(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function $B(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const or={},ov=[],Su=()=>{},lL=()=>!1,W2=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),QB=e=>e.startsWith("onUpdate:"),bs=Object.assign,GB=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},UJ=Object.prototype.hasOwnProperty,Wa=(e,t)=>UJ.call(e,t),bn=Array.isArray,iv=e=>eh(e)==="[object Map]",Zv=e=>eh(e)==="[object Set]",sP=e=>eh(e)==="[object Date]",RJ=e=>eh(e)==="[object RegExp]",Hn=e=>typeof e=="function",yr=e=>typeof e=="string",Ol=e=>typeof e=="symbol",ar=e=>e!==null&&typeof e=="object",uL=e=>(ar(e)||Hn(e))&&Hn(e.then)&&Hn(e.catch),cL=Object.prototype.toString,eh=e=>cL.call(e),NJ=e=>eh(e).slice(8,-1),dL=e=>eh(e)==="[object Object]",zB=e=>yr(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Rp=$B(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),j2=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},VJ=/-\w/g,$o=j2(e=>e.replace(VJ,t=>t.slice(1).toUpperCase())),LJ=/\B([A-Z])/g,eA=j2(e=>e.replace(LJ,"-$1").toLowerCase()),Lu=j2(e=>e.charAt(0).toUpperCase()+e.slice(1)),hx=j2(e=>e?`on${Lu(e)}`:""),Bd=(e,t)=>!Object.is(e,t),lv=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},AL=(e,t,n,a=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:a,value:n})},d_=e=>{const t=parseFloat(e);return isNaN(t)?e:t},fL=e=>{const t=yr(e)?Number(e):NaN;return isNaN(t)?e:t};let oP;const q2=()=>oP||(oP=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ut(e){if(bn(e)){const t={};for(let n=0;n<e.length;n++){const a=e[n],r=yr(a)?$J(a):Ut(a);if(r)for(const s in r)t[s]=r[s]}return t}else if(yr(e)||ar(e))return e}const MJ=/;(?![^(]*\))/g,OJ=/:([^]+)/,HJ=/\/\*[^]*?\*\//g;function $J(e){const t={};return e.replace(HJ,"").split(MJ).forEach(n=>{if(n){const a=n.split(OJ);a.length>1&&(t[a[0].trim()]=a[1].trim())}}),t}function ct(e){let t="";if(yr(e))t=e;else if(bn(e))for(let n=0;n<e.length;n++){const a=ct(e[n]);a&&(t+=a+" ")}else if(ar(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function Yl(e){if(!e)return null;let{class:t,style:n}=e;return t&&!yr(t)&&(e.class=ct(t)),n&&(e.style=Ut(n)),e}const QJ="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",GJ=$B(QJ);function mL(e){return!!e||e===""}function zJ(e,t){if(e.length!==t.length)return!1;let n=!0;for(let a=0;n&&a<e.length;a++)n=mf(e[a],t[a]);return n}function mf(e,t){if(e===t)return!0;let n=sP(e),a=sP(t);if(n||a)return n&&a?e.getTime()===t.getTime():!1;if(n=Ol(e),a=Ol(t),n||a)return e===t;if(n=bn(e),a=bn(t),n||a)return n&&a?zJ(e,t):!1;if(n=ar(e),a=ar(t),n||a){if(!n||!a)return!1;const r=Object.keys(e).length,s=Object.keys(t).length;if(r!==s)return!1;for(const o in e){const i=e.hasOwnProperty(o),c=t.hasOwnProperty(o);if(i&&!c||!i&&c||!mf(e[o],t[o]))return!1}}return String(e)===String(t)}function KB(e,t){return e.findIndex(n=>mf(n,t))}const vL=e=>!!(e&&e.__v_isRef===!0),K=e=>yr(e)?e:e==null?"":bn(e)||ar(e)&&(e.toString===cL||!Hn(e.toString))?vL(e)?K(e.value):JSON.stringify(e,hL,2):String(e),hL=(e,t)=>vL(t)?hL(e,t.value):iv(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[a,r],s)=>(n[px(a,s)+" =>"]=r,n),{})}:Zv(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>px(n))}:Ol(t)?px(t):ar(t)&&!bn(t)&&!dL(t)?String(t):t,px=(e,t="")=>{var n;return Ol(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};let ro;class pL{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ro,!t&&ro&&(this.index=(ro.scopes||(ro.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=ro;try{return ro=this,t()}finally{ro=n}}}on(){++this._on===1&&(this.prevScope=ro,ro=this)}off(){this._on>0&&--this._on===0&&(ro=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,a;for(n=0,a=this.effects.length;n<a;n++)this.effects[n].stop();for(this.effects.length=0,n=0,a=this.cleanups.length;n<a;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,a=this.scopes.length;n<a;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function Rd(e){return new pL(e)}function gL(){return ro}function us(e,t=!1){ro&&ro.cleanups.push(e)}let cr;const gx=new WeakSet;class yL{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ro&&ro.active&&ro.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,gx.has(this)&&(gx.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||wL(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,iP(this),bL(this);const t=cr,n=Rl;cr=this,Rl=!0;try{return this.fn()}finally{xL(this),cr=t,Rl=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)qB(t);this.deps=this.depsTail=void 0,iP(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?gx.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){oS(this)&&this.run()}get dirty(){return oS(this)}}let _L=0,Np,Vp;function wL(e,t=!1){if(e.flags|=8,t){e.next=Vp,Vp=e;return}e.next=Np,Np=e}function WB(){_L++}function jB(){if(--_L>0)return;if(Vp){let t=Vp;for(Vp=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Np;){let t=Np;for(Np=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(a){e||(e=a)}t=n}}if(e)throw e}function bL(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function xL(e){let t,n=e.depsTail,a=n;for(;a;){const r=a.prevDep;a.version===-1?(a===n&&(n=r),qB(a),KJ(a)):t=a,a.dep.activeLink=a.prevActiveLink,a.prevActiveLink=void 0,a=r}e.deps=t,e.depsTail=n}function oS(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(CL(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function CL(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===m0)||(e.globalVersion=m0,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!oS(e))))return;e.flags|=2;const t=e.dep,n=cr,a=Rl;cr=e,Rl=!0;try{bL(e);const r=e.fn(e._value);(t.version===0||Bd(r,e._value))&&(e.flags|=128,e._value=r,t.version++)}catch(r){throw t.version++,r}finally{cr=n,Rl=a,xL(e),e.flags&=-3}}function qB(e,t=!1){const{dep:n,prevSub:a,nextSub:r}=e;if(a&&(a.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=a,e.nextSub=void 0),n.subs===e&&(n.subs=a,!a&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)qB(s,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function KJ(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Rl=!0;const SL=[];function Bc(){SL.push(Rl),Rl=!1}function kc(){const e=SL.pop();Rl=e===void 0?!0:e}function iP(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=cr;cr=void 0;try{t()}finally{cr=n}}}let m0=0;class WJ{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class YB{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!cr||!Rl||cr===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==cr)n=this.activeLink=new WJ(cr,this),cr.deps?(n.prevDep=cr.depsTail,cr.depsTail.nextDep=n,cr.depsTail=n):cr.deps=cr.depsTail=n,EL(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const a=n.nextDep;a.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=a),n.prevDep=cr.depsTail,n.nextDep=void 0,cr.depsTail.nextDep=n,cr.depsTail=n,cr.deps===n&&(cr.deps=a)}return n}trigger(t){this.version++,m0++,this.notify(t)}notify(t){WB();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{jB()}}}function EL(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let a=t.deps;a;a=a.nextDep)EL(a)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const A_=new WeakMap,ZA=Symbol(""),iS=Symbol(""),v0=Symbol("");function io(e,t,n){if(Rl&&cr){let a=A_.get(e);a||A_.set(e,a=new Map);let r=a.get(n);r||(a.set(n,r=new YB),r.map=a,r.key=n),r.track()}}function fc(e,t,n,a,r,s){const o=A_.get(e);if(!o){m0++;return}const i=c=>{c&&c.trigger()};if(WB(),t==="clear")o.forEach(i);else{const c=bn(e),A=c&&zB(n);if(c&&n==="length"){const d=Number(a);o.forEach((f,m)=>{(m==="length"||m===v0||!Ol(m)&&m>=d)&&i(f)})}else switch((n!==void 0||o.has(void 0))&&i(o.get(n)),A&&i(o.get(v0)),t){case"add":c?A&&i(o.get("length")):(i(o.get(ZA)),iv(e)&&i(o.get(iS)));break;case"delete":c||(i(o.get(ZA)),iv(e)&&i(o.get(iS)));break;case"set":iv(e)&&i(o.get(ZA));break}}jB()}function jJ(e,t){const n=A_.get(e);return n&&n.get(t)}function Sm(e){const t=wn(e);return t===e?t:(io(t,"iterate",v0),Zi(e)?t:t.map(Hs))}function Y2(e){return io(e=wn(e),"iterate",v0),e}const qJ={__proto__:null,[Symbol.iterator](){return yx(this,Symbol.iterator,Hs)},concat(...e){return Sm(this).concat(...e.map(t=>bn(t)?Sm(t):t))},entries(){return yx(this,"entries",e=>(e[1]=Hs(e[1]),e))},every(e,t){return oc(this,"every",e,t,void 0,arguments)},filter(e,t){return oc(this,"filter",e,t,n=>n.map(Hs),arguments)},find(e,t){return oc(this,"find",e,t,Hs,arguments)},findIndex(e,t){return oc(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return oc(this,"findLast",e,t,Hs,arguments)},findLastIndex(e,t){return oc(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return oc(this,"forEach",e,t,void 0,arguments)},includes(...e){return _x(this,"includes",e)},indexOf(...e){return _x(this,"indexOf",e)},join(e){return Sm(this).join(e)},lastIndexOf(...e){return _x(this,"lastIndexOf",e)},map(e,t){return oc(this,"map",e,t,void 0,arguments)},pop(){return Xh(this,"pop")},push(...e){return Xh(this,"push",e)},reduce(e,...t){return lP(this,"reduce",e,t)},reduceRight(e,...t){return lP(this,"reduceRight",e,t)},shift(){return Xh(this,"shift")},some(e,t){return oc(this,"some",e,t,void 0,arguments)},splice(...e){return Xh(this,"splice",e)},toReversed(){return Sm(this).toReversed()},toSorted(e){return Sm(this).toSorted(e)},toSpliced(...e){return Sm(this).toSpliced(...e)},unshift(...e){return Xh(this,"unshift",e)},values(){return yx(this,"values",Hs)}};function yx(e,t,n){const a=Y2(e),r=a[t]();return a!==e&&!Zi(e)&&(r._next=r.next,r.next=()=>{const s=r._next();return s.value&&(s.value=n(s.value)),s}),r}const YJ=Array.prototype;function oc(e,t,n,a,r,s){const o=Y2(e),i=o!==e&&!Zi(e),c=o[t];if(c!==YJ[t]){const f=c.apply(e,s);return i?Hs(f):f}let A=n;o!==e&&(i?A=function(f,m){return n.call(this,Hs(f),m,e)}:n.length>2&&(A=function(f,m){return n.call(this,f,m,e)}));const d=c.call(o,A,a);return i&&r?r(d):d}function lP(e,t,n,a){const r=Y2(e);let s=n;return r!==e&&(Zi(e)?n.length>3&&(s=function(o,i,c){return n.call(this,o,i,c,e)}):s=function(o,i,c){return n.call(this,o,Hs(i),c,e)}),r[t](s,...a)}function _x(e,t,n){const a=wn(e);io(a,"iterate",v0);const r=a[t](...n);return(r===-1||r===!1)&&ZB(n[0])?(n[0]=wn(n[0]),a[t](...n)):r}function Xh(e,t,n=[]){Bc(),WB();const a=wn(e)[t].apply(e,n);return jB(),kc(),a}const XJ=$B("__proto__,__v_isRef,__isVue"),BL=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ol));function JJ(e){Ol(e)||(e=String(e));const t=wn(this);return io(t,"has",e),t.hasOwnProperty(e)}class kL{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,a){if(n==="__v_skip")return t.__v_skip;const r=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return s;if(n==="__v_raw")return a===(r?s?lZ:PL:s?FL:IL).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(a)?t:void 0;const o=bn(t);if(!r){let c;if(o&&(c=qJ[n]))return c;if(n==="hasOwnProperty")return JJ}const i=Reflect.get(t,n,Yr(t)?t:a);return(Ol(n)?BL.has(n):XJ(n))||(r||io(t,"get",n),s)?i:Yr(i)?o&&zB(n)?i:i.value:ar(i)?r?th(i):os(i):i}}class TL extends kL{constructor(t=!1){super(!1,t)}set(t,n,a,r){let s=t[n];if(!this._isShallow){const c=Nd(s);if(!Zi(a)&&!Nd(a)&&(s=wn(s),a=wn(a)),!bn(t)&&Yr(s)&&!Yr(a))return c||(s.value=a),!0}const o=bn(t)&&zB(n)?Number(n)<t.length:Wa(t,n),i=Reflect.set(t,n,a,Yr(t)?t:r);return t===wn(r)&&(o?Bd(a,s)&&fc(t,"set",n,a):fc(t,"add",n,a)),i}deleteProperty(t,n){const a=Wa(t,n);t[n];const r=Reflect.deleteProperty(t,n);return r&&a&&fc(t,"delete",n,void 0),r}has(t,n){const a=Reflect.has(t,n);return(!Ol(n)||!BL.has(n))&&io(t,"has",n),a}ownKeys(t){return io(t,"iterate",bn(t)?"length":ZA),Reflect.ownKeys(t)}}class ZJ extends kL{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const eZ=new TL,tZ=new ZJ,nZ=new TL(!0);const lS=e=>e,L1=e=>Reflect.getPrototypeOf(e);function aZ(e,t,n){return function(...a){const r=this.__v_raw,s=wn(r),o=iv(s),i=e==="entries"||e===Symbol.iterator&&o,c=e==="keys"&&o,A=r[e](...a),d=n?lS:t?m_:Hs;return!t&&io(s,"iterate",c?iS:ZA),{next(){const{value:f,done:m}=A.next();return m?{value:f,done:m}:{value:i?[d(f[0]),d(f[1])]:d(f),done:m}},[Symbol.iterator](){return this}}}}function M1(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function rZ(e,t){const n={get(r){const s=this.__v_raw,o=wn(s),i=wn(r);e||(Bd(r,i)&&io(o,"get",r),io(o,"get",i));const{has:c}=L1(o),A=t?lS:e?m_:Hs;if(c.call(o,r))return A(s.get(r));if(c.call(o,i))return A(s.get(i));s!==o&&s.get(r)},get size(){const r=this.__v_raw;return!e&&io(wn(r),"iterate",ZA),r.size},has(r){const s=this.__v_raw,o=wn(s),i=wn(r);return e||(Bd(r,i)&&io(o,"has",r),io(o,"has",i)),r===i?s.has(r):s.has(r)||s.has(i)},forEach(r,s){const o=this,i=o.__v_raw,c=wn(i),A=t?lS:e?m_:Hs;return!e&&io(c,"iterate",ZA),i.forEach((d,f)=>r.call(s,A(d),A(f),o))}};return bs(n,e?{add:M1("add"),set:M1("set"),delete:M1("delete"),clear:M1("clear")}:{add(r){!t&&!Zi(r)&&!Nd(r)&&(r=wn(r));const s=wn(this);return L1(s).has.call(s,r)||(s.add(r),fc(s,"add",r,r)),this},set(r,s){!t&&!Zi(s)&&!Nd(s)&&(s=wn(s));const o=wn(this),{has:i,get:c}=L1(o);let A=i.call(o,r);A||(r=wn(r),A=i.call(o,r));const d=c.call(o,r);return o.set(r,s),A?Bd(s,d)&&fc(o,"set",r,s):fc(o,"add",r,s),this},delete(r){const s=wn(this),{has:o,get:i}=L1(s);let c=o.call(s,r);c||(r=wn(r),c=o.call(s,r)),i&&i.call(s,r);const A=s.delete(r);return c&&fc(s,"delete",r,void 0),A},clear(){const r=wn(this),s=r.size!==0,o=r.clear();return s&&fc(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=aZ(r,e,t)}),n}function XB(e,t){const n=rZ(e,t);return(a,r,s)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?a:Reflect.get(Wa(n,r)&&r in a?n:a,r,s)}const sZ={get:XB(!1,!1)},oZ={get:XB(!1,!0)},iZ={get:XB(!0,!1)};const IL=new WeakMap,FL=new WeakMap,PL=new WeakMap,lZ=new WeakMap;function uZ(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function cZ(e){return e.__v_skip||!Object.isExtensible(e)?0:uZ(NJ(e))}function os(e){return Nd(e)?e:JB(e,!1,eZ,sZ,IL)}function DL(e){return JB(e,!1,nZ,oZ,FL)}function th(e){return JB(e,!0,tZ,iZ,PL)}function JB(e,t,n,a,r){if(!ar(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=cZ(e);if(s===0)return e;const o=r.get(e);if(o)return o;const i=new Proxy(e,s===2?a:n);return r.set(e,i),i}function uv(e){return Nd(e)?uv(e.__v_raw):!!(e&&e.__v_isReactive)}function Nd(e){return!!(e&&e.__v_isReadonly)}function Zi(e){return!!(e&&e.__v_isShallow)}function ZB(e){return e?!!e.__v_raw:!1}function wn(e){const t=e&&e.__v_raw;return t?wn(t):e}function f_(e){return!Wa(e,"__v_skip")&&Object.isExtensible(e)&&AL(e,"__v_skip",!0),e}const Hs=e=>ar(e)?os(e):e,m_=e=>ar(e)?th(e):e;function Yr(e){return e?e.__v_isRef===!0:!1}function V(e){return UL(e,!1)}function Ht(e){return UL(e,!0)}function UL(e,t){return Yr(e)?e:new dZ(e,t)}class dZ{constructor(t,n){this.dep=new YB,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:wn(t),this._value=n?t:Hs(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,a=this.__v_isShallow||Zi(t)||Nd(t);t=a?t:wn(t),Bd(t,n)&&(this._rawValue=t,this._value=a?t:Hs(t),this.dep.trigger())}}function Qe(e){return Yr(e)?e.value:e}function Tu(e){return Hn(e)?e():Qe(e)}const AZ={get:(e,t,n)=>t==="__v_raw"?e:Qe(Reflect.get(e,t,n)),set:(e,t,n,a)=>{const r=e[t];return Yr(r)&&!Yr(n)?(r.value=n,!0):Reflect.set(e,t,n,a)}};function RL(e){return uv(e)?e:new Proxy(e,AZ)}function Lf(e){const t=bn(e)?new Array(e.length):{};for(const n in e)t[n]=NL(e,n);return t}class fZ{constructor(t,n,a){this._object=t,this._key=n,this._defaultValue=a,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return jJ(wn(this._object),this._key)}}class mZ{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Xe(e,t,n){return Yr(e)?e:Hn(e)?new mZ(e):ar(e)&&arguments.length>1?NL(e,t,n):V(e)}function NL(e,t,n){const a=e[t];return Yr(a)?a:new fZ(e,t,n)}class vZ{constructor(t,n,a){this.fn=t,this.setter=n,this._value=void 0,this.dep=new YB(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=m0-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=a}notify(){if(this.flags|=16,!(this.flags&8)&&cr!==this)return wL(this,!0),!0}get value(){const t=this.dep.track();return CL(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function hZ(e,t,n=!1){let a,r;return Hn(e)?a=e:(a=e.get,r=e.set),new vZ(a,r,n)}const O1={},v_=new WeakMap;let NA;function pZ(e,t=!1,n=NA){if(n){let a=v_.get(n);a||v_.set(n,a=[]),a.push(e)}}function gZ(e,t,n=or){const{immediate:a,deep:r,once:s,scheduler:o,augmentJob:i,call:c}=n,A=T=>r?T:Zi(T)||r===!1||r===0?mc(T,1):mc(T);let d,f,m,v,p=!1,g=!1;if(Yr(e)?(f=()=>e.value,p=Zi(e)):uv(e)?(f=()=>A(e),p=!0):bn(e)?(g=!0,p=e.some(T=>uv(T)||Zi(T)),f=()=>e.map(T=>{if(Yr(T))return T.value;if(uv(T))return A(T);if(Hn(T))return c?c(T,2):T()})):Hn(e)?t?f=c?()=>c(e,2):e:f=()=>{if(m){Bc();try{m()}finally{kc()}}const T=NA;NA=d;try{return c?c(e,3,[v]):e(v)}finally{NA=T}}:f=Su,t&&r){const T=f,D=r===!0?1/0:r;f=()=>mc(T(),D)}const y=gL(),w=()=>{d.stop(),y&&y.active&&GB(y.effects,d)};if(s&&t){const T=t;t=(...D)=>{T(...D),w()}}let b=g?new Array(e.length).fill(O1):O1;const x=T=>{if(!(!(d.flags&1)||!d.dirty&&!T))if(t){const D=d.run();if(r||p||(g?D.some((k,S)=>Bd(k,b[S])):Bd(D,b))){m&&m();const k=NA;NA=d;try{const S=[D,b===O1?void 0:g&&b[0]===O1?[]:b,v];b=D,c?c(t,3,S):t(...S)}finally{NA=k}}}else d.run()};return i&&i(x),d=new yL(f),d.scheduler=o?()=>o(x,!1):x,v=T=>pZ(T,!1,d),m=d.onStop=()=>{const T=v_.get(d);if(T){if(c)c(T,4);else for(const D of T)D();v_.delete(d)}},t?a?x(!0):b=d.run():o?o(x.bind(null,!0),!0):d.run(),w.pause=d.pause.bind(d),w.resume=d.resume.bind(d),w.stop=w,w}function mc(e,t=1/0,n){if(t<=0||!ar(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,Yr(e))mc(e.value,t,n);else if(bn(e))for(let a=0;a<e.length;a++)mc(e[a],t,n);else if(Zv(e)||iv(e))e.forEach(a=>{mc(a,t,n)});else if(dL(e)){for(const a in e)mc(e[a],t,n);for(const a of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,a)&&mc(e[a],t,n)}return e}function rg(e,t,n,a){try{return a?e(...a):e()}catch(r){sg(r,t,n)}}function Hl(e,t,n,a){if(Hn(e)){const r=rg(e,t,n,a);return r&&uL(r)&&r.catch(s=>{sg(s,t,n)}),r}if(bn(e)){const r=[];for(let s=0;s<e.length;s++)r.push(Hl(e[s],t,n,a));return r}}function sg(e,t,n,a=!0){const r=t?t.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||or;if(t){let i=t.parent;const c=t.proxy,A=`https://vuejs.org/error-reference/#runtime-${n}`;for(;i;){const d=i.ec;if(d){for(let f=0;f<d.length;f++)if(d[f](e,c,A)===!1)return}i=i.parent}if(s){Bc(),rg(s,null,10,[e,c,A]),kc();return}}yZ(e,n,r,a,o)}function yZ(e,t,n,a=!0,r=!1){if(r)throw e;console.error(e)}const Vo=[];let pu=-1;const cv=[];let cd=null,zm=0;const VL=Promise.resolve();let h_=null;function _n(e){const t=h_||VL;return e?t.then(this?e.bind(this):e):t}function _Z(e){let t=pu+1,n=Vo.length;for(;t<n;){const a=t+n>>>1,r=Vo[a],s=h0(r);s<e||s===e&&r.flags&2?t=a+1:n=a}return t}function ek(e){if(!(e.flags&1)){const t=h0(e),n=Vo[Vo.length-1];!n||!(e.flags&2)&&t>=h0(n)?Vo.push(e):Vo.splice(_Z(t),0,e),e.flags|=1,LL()}}function LL(){h_||(h_=VL.then(OL))}function uS(e){bn(e)?cv.push(...e):cd&&e.id===-1?cd.splice(zm+1,0,e):e.flags&1||(cv.push(e),e.flags|=1),LL()}function uP(e,t,n=pu+1){for(;n<Vo.length;n++){const a=Vo[n];if(a&&a.flags&2){if(e&&a.id!==e.uid)continue;Vo.splice(n,1),n--,a.flags&4&&(a.flags&=-2),a(),a.flags&4||(a.flags&=-2)}}}function ML(e){if(cv.length){const t=[...new Set(cv)].sort((n,a)=>h0(n)-h0(a));if(cv.length=0,cd){cd.push(...t);return}for(cd=t,zm=0;zm<cd.length;zm++){const n=cd[zm];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}cd=null,zm=0}}const h0=e=>e.id==null?e.flags&2?-1:1/0:e.id;function OL(e){try{for(pu=0;pu<Vo.length;pu++){const t=Vo[pu];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),rg(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;pu<Vo.length;pu++){const t=Vo[pu];t&&(t.flags&=-2)}pu=-1,Vo.length=0,ML(),h_=null,(Vo.length||cv.length)&&OL()}}let Gs=null,HL=null;function p_(e){const t=Gs;return Gs=e,HL=e&&e.type.__scopeId||null,t}function u(e,t=Gs,n){if(!t||e._n)return e;const a=(...r)=>{a._d&&b_(-1);const s=p_(t);let o;try{o=e(...r)}finally{p_(s),a._d&&b_(1)}return o};return a._n=!0,a._c=!0,a._d=!0,a}function ma(e,t){if(Gs===null)return e;const n=aw(Gs),a=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[s,o,i,c=or]=t[r];s&&(Hn(s)&&(s={mounted:s,updated:s}),s.deep&&mc(o),a.push({dir:s,instance:n,value:o,oldValue:void 0,arg:i,modifiers:c}))}return e}function EA(e,t,n,a){const r=e.dirs,s=t&&t.dirs;for(let o=0;o<r.length;o++){const i=r[o];s&&(i.oldValue=s[o].value);let c=i.dir[a];c&&(Bc(),Hl(c,n,8,[e.el,i,e,t]),kc())}}const $L=Symbol("_vte"),QL=e=>e.__isTeleport,Lp=e=>e&&(e.disabled||e.disabled===""),cP=e=>e&&(e.defer||e.defer===""),dP=e=>typeof SVGElement<"u"&&e instanceof SVGElement,AP=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,cS=(e,t)=>{const n=e&&e.to;return yr(n)?t?t(n):null:n},GL={name:"Teleport",__isTeleport:!0,process(e,t,n,a,r,s,o,i,c,A){const{mc:d,pc:f,pbc:m,o:{insert:v,querySelector:p,createText:g,createComment:y}}=A,w=Lp(t.props);let{shapeFlag:b,children:x,dynamicChildren:T}=t;if(e==null){const D=t.el=g(""),k=t.anchor=g("");v(D,n,a),v(k,n,a);const S=(C,U)=>{b&16&&(r&&r.isCE&&(r.ce._teleportTarget=C),d(x,C,U,r,s,o,i,c))},E=()=>{const C=t.target=cS(t.props,p),U=zL(C,t,g,v);C&&(o!=="svg"&&dP(C)?o="svg":o!=="mathml"&&AP(C)&&(o="mathml"),w||(S(C,U),$y(t,!1)))};w&&(S(n,k),$y(t,!0)),cP(t.props)?(t.el.__isMounted=!1,vs(()=>{E(),delete t.el.__isMounted},s)):E()}else{if(cP(t.props)&&e.el.__isMounted===!1){vs(()=>{GL.process(e,t,n,a,r,s,o,i,c,A)},s);return}t.el=e.el,t.targetStart=e.targetStart;const D=t.anchor=e.anchor,k=t.target=e.target,S=t.targetAnchor=e.targetAnchor,E=Lp(e.props),C=E?n:k,U=E?D:S;if(o==="svg"||dP(k)?o="svg":(o==="mathml"||AP(k))&&(o="mathml"),T?(m(e.dynamicChildren,T,C,r,s,o,i),sk(e,t,!0)):c||f(e,t,C,U,r,s,o,i,!1),w)E?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):H1(t,n,D,A,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const F=t.target=cS(t.props,p);F&&H1(t,F,null,A,0)}else E&&H1(t,k,S,A,1);$y(t,w)}},remove(e,t,n,{um:a,o:{remove:r}},s){const{shapeFlag:o,children:i,anchor:c,targetStart:A,targetAnchor:d,target:f,props:m}=e;if(f&&(r(A),r(d)),s&&r(c),o&16){const v=s||!Lp(m);for(let p=0;p<i.length;p++){const g=i[p];a(g,t,n,v,!!g.dynamicChildren)}}},move:H1,hydrate:wZ};function H1(e,t,n,{o:{insert:a},m:r},s=2){s===0&&a(e.targetAnchor,t,n);const{el:o,anchor:i,shapeFlag:c,children:A,props:d}=e,f=s===2;if(f&&a(o,t,n),(!f||Lp(d))&&c&16)for(let m=0;m<A.length;m++)r(A[m],t,n,2);f&&a(i,t,n)}function wZ(e,t,n,a,r,s,{o:{nextSibling:o,parentNode:i,querySelector:c,insert:A,createText:d}},f){function m(g,y,w,b){y.anchor=f(o(g),y,i(g),n,a,r,s),y.targetStart=w,y.targetAnchor=b}const v=t.target=cS(t.props,c),p=Lp(t.props);if(v){const g=v._lpa||v.firstChild;if(t.shapeFlag&16)if(p)m(e,t,g,g&&o(g));else{t.anchor=o(e);let y=g;for(;y;){if(y&&y.nodeType===8){if(y.data==="teleport start anchor")t.targetStart=y;else if(y.data==="teleport anchor"){t.targetAnchor=y,v._lpa=t.targetAnchor&&o(t.targetAnchor);break}}y=o(y)}t.targetAnchor||zL(v,t,d,A),f(g&&o(g),t,v,n,a,r,s)}$y(t,p)}else p&&t.shapeFlag&16&&m(e,t,e,o(e));return t.anchor&&o(t.anchor)}const bZ=GL;function $y(e,t){const n=e.ctx;if(n&&n.ut){let a,r;for(t?(a=e.el,r=e.anchor):(a=e.targetStart,r=e.targetAnchor);a&&a!==r;)a.nodeType===1&&a.setAttribute("data-v-owner",n.uid),a=a.nextSibling;n.ut()}}function zL(e,t,n,a){const r=t.targetStart=n(""),s=t.targetAnchor=n("");return r[$L]=s,e&&(a(r,e),a(s,e)),s}const Ac=Symbol("_leaveCb"),$1=Symbol("_enterCb");function KL(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return dn(()=>{e.isMounted=!0}),va(()=>{e.isUnmounting=!0}),e}const Hi=[Function,Array],WL={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Hi,onEnter:Hi,onAfterEnter:Hi,onEnterCancelled:Hi,onBeforeLeave:Hi,onLeave:Hi,onAfterLeave:Hi,onLeaveCancelled:Hi,onBeforeAppear:Hi,onAppear:Hi,onAfterAppear:Hi,onAppearCancelled:Hi},jL=e=>{const t=e.subTree;return t.component?jL(t.component):t},xZ={name:"BaseTransition",props:WL,setup(e,{slots:t}){const n=Mf(),a=KL();return()=>{const r=t.default&&tk(t.default(),!0);if(!r||!r.length)return;const s=qL(r),o=wn(e),{mode:i}=o;if(a.isLeaving)return wx(s);const c=fP(s);if(!c)return wx(s);let A=p0(c,o,a,n,f=>A=f);c.type!==is&&Vd(c,A);let d=n.subTree&&fP(n.subTree);if(d&&d.type!==is&&!Cl(d,c)&&jL(n).type!==is){let f=p0(d,o,a,n);if(Vd(d,f),i==="out-in"&&c.type!==is)return a.isLeaving=!0,f.afterLeave=()=>{a.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,d=void 0},wx(s);i==="in-out"&&c.type!==is?f.delayLeave=(m,v,p)=>{const g=YL(a,d);g[String(d.key)]=d,m[Ac]=()=>{v(),m[Ac]=void 0,delete A.delayedLeave,d=void 0},A.delayedLeave=()=>{p(),delete A.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return s}}};function qL(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==is){t=n;break}}return t}const CZ=xZ;function YL(e,t){const{leavingVNodes:n}=e;let a=n.get(t.type);return a||(a=Object.create(null),n.set(t.type,a)),a}function p0(e,t,n,a,r){const{appear:s,mode:o,persisted:i=!1,onBeforeEnter:c,onEnter:A,onAfterEnter:d,onEnterCancelled:f,onBeforeLeave:m,onLeave:v,onAfterLeave:p,onLeaveCancelled:g,onBeforeAppear:y,onAppear:w,onAfterAppear:b,onAppearCancelled:x}=t,T=String(e.key),D=YL(n,e),k=(C,U)=>{C&&Hl(C,a,9,U)},S=(C,U)=>{const F=U[1];k(C,U),bn(C)?C.every(L=>L.length<=1)&&F():C.length<=1&&F()},E={mode:o,persisted:i,beforeEnter(C){let U=c;if(!n.isMounted)if(s)U=y||c;else return;C[Ac]&&C[Ac](!0);const F=D[T];F&&Cl(e,F)&&F.el[Ac]&&F.el[Ac](),k(U,[C])},enter(C){let U=A,F=d,L=f;if(!n.isMounted)if(s)U=w||A,F=b||d,L=x||f;else return;let H=!1;const ue=C[$1]=ie=>{H||(H=!0,ie?k(L,[C]):k(F,[C]),E.delayedLeave&&E.delayedLeave(),C[$1]=void 0)};U?S(U,[C,ue]):ue()},leave(C,U){const F=String(e.key);if(C[$1]&&C[$1](!0),n.isUnmounting)return U();k(m,[C]);let L=!1;const H=C[Ac]=ue=>{L||(L=!0,U(),ue?k(g,[C]):k(p,[C]),C[Ac]=void 0,D[F]===e&&delete D[F])};D[F]=e,v?S(v,[C,H]):H()},clone(C){const U=p0(C,t,n,a,r);return r&&r(U),U}};return E}function wx(e){if(X2(e))return e=Iu(e),e.children=null,e}function fP(e){if(!X2(e))return QL(e.type)&&e.children?qL(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&Hn(n.default))return n.default()}}function Vd(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Vd(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function tk(e,t=!1,n){let a=[],r=0;for(let s=0;s<e.length;s++){let o=e[s];const i=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===Ke?(o.patchFlag&128&&r++,a=a.concat(tk(o.children,t,i))):(t||o.type!==is)&&a.push(i!=null?Iu(o,{key:i}):o)}if(r>1)for(let s=0;s<a.length;s++)a[s].patchFlag=-2;return a}function nk(e,t){return Hn(e)?bs({name:e.name},t,{setup:e}):e}function zo(){const e=Mf();return e?(e.appContext.config.idPrefix||"v")+"-"+e.ids[0]+e.ids[1]++:""}function XL(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const g_=new WeakMap;function Mp(e,t,n,a,r=!1){if(bn(e)){e.forEach((p,g)=>Mp(p,t&&(bn(t)?t[g]:t),n,a,r));return}if(ef(a)&&!r){a.shapeFlag&512&&a.type.__asyncResolved&&a.component.subTree.component&&Mp(e,t,n,a.component.subTree);return}const s=a.shapeFlag&4?aw(a.component):a.el,o=r?null:s,{i,r:c}=e,A=t&&t.r,d=i.refs===or?i.refs={}:i.refs,f=i.setupState,m=wn(f),v=f===or?lL:p=>Wa(m,p);if(A!=null&&A!==c){if(mP(t),yr(A))d[A]=null,v(A)&&(f[A]=null);else if(Yr(A)){A.value=null;const p=t;p.k&&(d[p.k]=null)}}if(Hn(c))rg(c,i,12,[o,d]);else{const p=yr(c),g=Yr(c);if(p||g){const y=()=>{if(e.f){const w=p?v(c)?f[c]:d[c]:c.value;if(r)bn(w)&&GB(w,s);else if(bn(w))w.includes(s)||w.push(s);else if(p)d[c]=[s],v(c)&&(f[c]=d[c]);else{const b=[s];c.value=b,e.k&&(d[e.k]=b)}}else p?(d[c]=o,v(c)&&(f[c]=o)):g&&(c.value=o,e.k&&(d[e.k]=o))};if(o){const w=()=>{y(),g_.delete(e)};w.id=-1,g_.set(e,w),vs(w,n)}else mP(e),y()}}}function mP(e){const t=g_.get(e);t&&(t.flags|=8,g_.delete(e))}q2().requestIdleCallback;q2().cancelIdleCallback;const ef=e=>!!e.type.__asyncLoader,X2=e=>e.type.__isKeepAlive,SZ={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=Mf(),a=n.ctx;if(!a.renderer)return()=>{const b=t.default&&t.default();return b&&b.length===1?b[0]:b};const r=new Map,s=new Set;let o=null;const i=n.suspense,{renderer:{p:c,m:A,um:d,o:{createElement:f}}}=a,m=f("div");a.activate=(b,x,T,D,k)=>{const S=b.component;A(b,x,T,0,i),c(S.vnode,b,x,T,S,i,D,b.slotScopeIds,k),vs(()=>{S.isDeactivated=!1,S.a&&lv(S.a);const E=b.props&&b.props.onVnodeMounted;E&&Gi(E,S.parent,b)},i)},a.deactivate=b=>{const x=b.component;__(x.m),__(x.a),A(b,m,null,1,i),vs(()=>{x.da&&lv(x.da);const T=b.props&&b.props.onVnodeUnmounted;T&&Gi(T,x.parent,b),x.isDeactivated=!0},i)};function v(b){bx(b),d(b,n,i,!0)}function p(b){r.forEach((x,T)=>{const D=yS(x.type);D&&!b(D)&&g(T)})}function g(b){const x=r.get(b);x&&(!o||!Cl(x,o))?v(x):o&&bx(o),r.delete(b),s.delete(b)}je(()=>[e.include,e.exclude],([b,x])=>{b&&p(T=>gp(b,T)),x&&p(T=>!gp(x,T))},{flush:"post",deep:!0});let y=null;const w=()=>{y!=null&&(w_(n.subTree.type)?vs(()=>{r.set(y,Q1(n.subTree))},n.subTree.suspense):r.set(y,Q1(n.subTree)))};return dn(w),ew(w),va(()=>{r.forEach(b=>{const{subTree:x,suspense:T}=n,D=Q1(x);if(b.type===D.type&&b.key===D.key){bx(D);const k=D.component.da;k&&vs(k,T);return}v(b)})}),()=>{if(y=null,!t.default)return o=null;const b=t.default(),x=b[0];if(b.length>1)return o=null,b;if(!Ld(x)||!(x.shapeFlag&4)&&!(x.shapeFlag&128))return o=null,x;let T=Q1(x);if(T.type===is)return o=null,T;const D=T.type,k=yS(ef(T)?T.type.__asyncResolved||{}:D),{include:S,exclude:E,max:C}=e;if(S&&(!k||!gp(S,k))||E&&k&&gp(E,k))return T.shapeFlag&=-257,o=T,x;const U=T.key==null?D:T.key,F=r.get(U);return T.el&&(T=Iu(T),x.shapeFlag&128&&(x.ssContent=T)),y=U,F?(T.el=F.el,T.component=F.component,T.transition&&Vd(T,T.transition),T.shapeFlag|=512,s.delete(U),s.add(U)):(s.add(U),C&&s.size>parseInt(C,10)&&g(s.values().next().value)),T.shapeFlag|=256,o=T,w_(x.type)?x:T}}},EZ=SZ;function gp(e,t){return bn(e)?e.some(n=>gp(n,t)):yr(e)?e.split(",").includes(t):RJ(e)?(e.lastIndex=0,e.test(t)):!1}function og(e,t){JL(e,"a",t)}function J2(e,t){JL(e,"da",t)}function JL(e,t,n=co){const a=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(Z2(t,a,n),n){let r=n.parent;for(;r&&r.parent;)X2(r.parent.vnode)&&BZ(a,t,n,r),r=r.parent}}function BZ(e,t,n,a){const r=Z2(t,e,a,!0);Ii(()=>{GB(a[t],r)},n)}function bx(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function Q1(e){return e.shapeFlag&128?e.ssContent:e}function Z2(e,t,n=co,a=!1){if(n){const r=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...o)=>{Bc();const i=lg(n),c=Hl(t,n,e,o);return i(),kc(),c});return a?r.unshift(s):r.push(s),s}}const Lc=e=>(t,n=co)=>{(!y0||e==="sp")&&Z2(e,(...a)=>t(...a),n)},Xl=Lc("bm"),dn=Lc("m"),ZL=Lc("bu"),ew=Lc("u"),va=Lc("bum"),Ii=Lc("um"),kZ=Lc("sp"),TZ=Lc("rtg"),IZ=Lc("rtc");function FZ(e,t=co){Z2("ec",e,t)}const e8="components";function I(e,t){return n8(e8,e,!0,t)||e}const t8=Symbol.for("v-ndc");function tw(e){return yr(e)?n8(e8,e,!1)||e:e||t8}function n8(e,t,n=!0,a=!1){const r=Gs||co;if(r){const s=r.type;{const i=yS(s,!1);if(i&&(i===t||i===$o(t)||i===Lu($o(t))))return s}const o=vP(r[e]||s[e],t)||vP(r.appContext[e],t);return!o&&a?s:o}}function vP(e,t){return e&&(e[t]||e[$o(t)]||e[Lu($o(t))])}function Gt(e,t,n,a){let r;const s=n,o=bn(e);if(o||yr(e)){const i=o&&uv(e);let c=!1,A=!1;i&&(c=!Zi(e),A=Nd(e),e=Y2(e)),r=new Array(e.length);for(let d=0,f=e.length;d<f;d++)r[d]=t(c?A?m_(Hs(e[d])):Hs(e[d]):e[d],d,void 0,s)}else if(typeof e=="number"){r=new Array(e);for(let i=0;i<e;i++)r[i]=t(i+1,i,void 0,s)}else if(ar(e))if(e[Symbol.iterator])r=Array.from(e,(i,c)=>t(i,c,void 0,s));else{const i=Object.keys(e);r=new Array(i.length);for(let c=0,A=i.length;c<A;c++){const d=i[c];r[c]=t(e[d],d,c,s)}}else r=[];return r}function Ev(e,t){for(let n=0;n<t.length;n++){const a=t[n];if(bn(a))for(let r=0;r<a.length;r++)e[a[r].name]=a[r].fn;else a&&(e[a.name]=a.key?(...r)=>{const s=a.fn(...r);return s&&(s.key=a.key),s}:a.fn)}return e}function PZ(e,t,n={},a,r){if(Gs.ce||Gs.parent&&ef(Gs.parent)&&Gs.parent.ce)return R(),ve(Ke,null,[l("slot",n,a)],64);let s=e[t];s&&s._c&&(s._d=!1),R();const o=s&&a8(s(n)),i=n.key||o&&o.key,c=ve(Ke,{key:(i&&!Ol(i)?i:`_${t}`)+(!o&&a?"_fb":"")},o||[],o&&e._===1?64:-2);return s&&s._c&&(s._d=!0),c}function a8(e){return e.some(t=>Ld(t)?!(t.type===is||t.type===Ke&&!a8(t.children)):!0)?e:null}const dS=e=>e?b8(e)?aw(e):dS(e.parent):null,Op=bs(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>dS(e.parent),$root:e=>dS(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>s8(e),$forceUpdate:e=>e.f||(e.f=()=>{ek(e.update)}),$nextTick:e=>e.n||(e.n=_n.bind(e.proxy)),$watch:e=>ZZ.bind(e)}),xx=(e,t)=>e!==or&&!e.__isScriptSetup&&Wa(e,t),DZ={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:a,data:r,props:s,accessCache:o,type:i,appContext:c}=e;let A;if(t[0]!=="$"){const v=o[t];if(v!==void 0)switch(v){case 1:return a[t];case 2:return r[t];case 4:return n[t];case 3:return s[t]}else{if(xx(a,t))return o[t]=1,a[t];if(r!==or&&Wa(r,t))return o[t]=2,r[t];if((A=e.propsOptions[0])&&Wa(A,t))return o[t]=3,s[t];if(n!==or&&Wa(n,t))return o[t]=4,n[t];AS&&(o[t]=0)}}const d=Op[t];let f,m;if(d)return t==="$attrs"&&io(e.attrs,"get",""),d(e);if((f=i.__cssModules)&&(f=f[t]))return f;if(n!==or&&Wa(n,t))return o[t]=4,n[t];if(m=c.config.globalProperties,Wa(m,t))return m[t]},set({_:e},t,n){const{data:a,setupState:r,ctx:s}=e;return xx(r,t)?(r[t]=n,!0):a!==or&&Wa(a,t)?(a[t]=n,!0):Wa(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:a,appContext:r,propsOptions:s,type:o}},i){let c,A;return!!(n[i]||e!==or&&i[0]!=="$"&&Wa(e,i)||xx(t,i)||(c=s[0])&&Wa(c,i)||Wa(a,i)||Wa(Op,i)||Wa(r.config.globalProperties,i)||(A=o.__cssModules)&&A[i])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Wa(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function hP(e){return bn(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let AS=!0;function UZ(e){const t=s8(e),n=e.proxy,a=e.ctx;AS=!1,t.beforeCreate&&pP(t.beforeCreate,e,"bc");const{data:r,computed:s,methods:o,watch:i,provide:c,inject:A,created:d,beforeMount:f,mounted:m,beforeUpdate:v,updated:p,activated:g,deactivated:y,beforeDestroy:w,beforeUnmount:b,destroyed:x,unmounted:T,render:D,renderTracked:k,renderTriggered:S,errorCaptured:E,serverPrefetch:C,expose:U,inheritAttrs:F,components:L,directives:H,filters:ue}=t;if(A&&RZ(A,a,null),o)for(const X in o){const le=o[X];Hn(le)&&(a[X]=le.bind(n))}if(r){const X=r.call(n,n);ar(X)&&(e.data=os(X))}if(AS=!0,s)for(const X in s){const le=s[X],Z=Hn(le)?le.bind(n,n):Hn(le.get)?le.get.bind(n,n):Su,re=!Hn(le)&&Hn(le.set)?le.set.bind(n):Su,q=ne({get:Z,set:re});Object.defineProperty(a,X,{enumerable:!0,configurable:!0,get:()=>q.value,set:P=>q.value=P})}if(i)for(const X in i)r8(i[X],a,n,X);if(c){const X=Hn(c)?c.call(n):c;Reflect.ownKeys(X).forEach(le=>{La(le,X[le])})}d&&pP(d,e,"c");function Q(X,le){bn(le)?le.forEach(Z=>X(Z.bind(n))):le&&X(le.bind(n))}if(Q(Xl,f),Q(dn,m),Q(ZL,v),Q(ew,p),Q(og,g),Q(J2,y),Q(FZ,E),Q(IZ,k),Q(TZ,S),Q(va,b),Q(Ii,T),Q(kZ,C),bn(U))if(U.length){const X=e.exposed||(e.exposed={});U.forEach(le=>{Object.defineProperty(X,le,{get:()=>n[le],set:Z=>n[le]=Z,enumerable:!0})})}else e.exposed||(e.exposed={});D&&e.render===Su&&(e.render=D),F!=null&&(e.inheritAttrs=F),L&&(e.components=L),H&&(e.directives=H),C&&XL(e)}function RZ(e,t,n=Su){bn(e)&&(e=fS(e));for(const a in e){const r=e[a];let s;ar(r)?"default"in r?s=Tn(r.from||a,r.default,!0):s=Tn(r.from||a):s=Tn(r),Yr(s)?Object.defineProperty(t,a,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):t[a]=s}}function pP(e,t,n){Hl(bn(e)?e.map(a=>a.bind(t.proxy)):e.bind(t.proxy),t,n)}function r8(e,t,n,a){let r=a.includes(".")?h8(n,a):()=>n[a];if(yr(e)){const s=t[e];Hn(s)&&je(r,s)}else if(Hn(e))je(r,e.bind(n));else if(ar(e))if(bn(e))e.forEach(s=>r8(s,t,n,a));else{const s=Hn(e.handler)?e.handler.bind(n):t[e.handler];Hn(s)&&je(r,s,e)}}function s8(e){const t=e.type,{mixins:n,extends:a}=t,{mixins:r,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,i=s.get(t);let c;return i?c=i:!r.length&&!n&&!a?c=t:(c={},r.length&&r.forEach(A=>y_(c,A,o,!0)),y_(c,t,o)),ar(t)&&s.set(t,c),c}function y_(e,t,n,a=!1){const{mixins:r,extends:s}=t;s&&y_(e,s,n,!0),r&&r.forEach(o=>y_(e,o,n,!0));for(const o in t)if(!(a&&o==="expose")){const i=NZ[o]||n&&n[o];e[o]=i?i(e[o],t[o]):t[o]}return e}const NZ={data:gP,props:yP,emits:yP,methods:yp,computed:yp,beforeCreate:Do,created:Do,beforeMount:Do,mounted:Do,beforeUpdate:Do,updated:Do,beforeDestroy:Do,beforeUnmount:Do,destroyed:Do,unmounted:Do,activated:Do,deactivated:Do,errorCaptured:Do,serverPrefetch:Do,components:yp,directives:yp,watch:LZ,provide:gP,inject:VZ};function gP(e,t){return t?e?function(){return bs(Hn(e)?e.call(this,this):e,Hn(t)?t.call(this,this):t)}:t:e}function VZ(e,t){return yp(fS(e),fS(t))}function fS(e){if(bn(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Do(e,t){return e?[...new Set([].concat(e,t))]:t}function yp(e,t){return e?bs(Object.create(null),e,t):t}function yP(e,t){return e?bn(e)&&bn(t)?[...new Set([...e,...t])]:bs(Object.create(null),hP(e),hP(t??{})):t}function LZ(e,t){if(!e)return t;if(!t)return e;const n=bs(Object.create(null),e);for(const a in t)n[a]=Do(e[a],t[a]);return n}function o8(){return{app:null,config:{isNativeTag:lL,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let MZ=0;function OZ(e,t){return function(a,r=null){Hn(a)||(a=bs({},a)),r!=null&&!ar(r)&&(r=null);const s=o8(),o=new WeakSet,i=[];let c=!1;const A=s.app={_uid:MZ++,_component:a,_props:r,_container:null,_context:s,_instance:null,version:xee,get config(){return s.config},set config(d){},use(d,...f){return o.has(d)||(d&&Hn(d.install)?(o.add(d),d.install(A,...f)):Hn(d)&&(o.add(d),d(A,...f))),A},mixin(d){return s.mixins.includes(d)||s.mixins.push(d),A},component(d,f){return f?(s.components[d]=f,A):s.components[d]},directive(d,f){return f?(s.directives[d]=f,A):s.directives[d]},mount(d,f,m){if(!c){const v=A._ceVNode||l(a,r);return v.appContext=s,m===!0?m="svg":m===!1&&(m=void 0),e(v,d,m),c=!0,A._container=d,d.__vue_app__=A,aw(v.component)}},onUnmount(d){i.push(d)},unmount(){c&&(Hl(i,A._instance,16),e(null,A._container),delete A._container.__vue_app__)},provide(d,f){return s.provides[d]=f,A},runWithContext(d){const f=dv;dv=A;try{return d()}finally{dv=f}}};return A}}let dv=null;function La(e,t){if(co){let n=co.provides;const a=co.parent&&co.parent.provides;a===n&&(n=co.provides=Object.create(a)),n[e]=t}}function Tn(e,t,n=!1){const a=Mf();if(a||dv){let r=dv?dv._context.provides:a?a.parent==null||a.ce?a.vnode.appContext&&a.vnode.appContext.provides:a.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return n&&Hn(t)?t.call(a&&a.proxy):t}}const i8={},l8=()=>Object.create(i8),u8=e=>Object.getPrototypeOf(e)===i8;function HZ(e,t,n,a=!1){const r={},s=l8();e.propsDefaults=Object.create(null),c8(e,t,r,s);for(const o in e.propsOptions[0])o in r||(r[o]=void 0);n?e.props=a?r:DL(r):e.type.props?e.props=r:e.props=s,e.attrs=s}function $Z(e,t,n,a){const{props:r,attrs:s,vnode:{patchFlag:o}}=e,i=wn(r),[c]=e.propsOptions;let A=!1;if((a||o>0)&&!(o&16)){if(o&8){const d=e.vnode.dynamicProps;for(let f=0;f<d.length;f++){let m=d[f];if(nw(e.emitsOptions,m))continue;const v=t[m];if(c)if(Wa(s,m))v!==s[m]&&(s[m]=v,A=!0);else{const p=$o(m);r[p]=mS(c,i,p,v,e,!1)}else v!==s[m]&&(s[m]=v,A=!0)}}}else{c8(e,t,r,s)&&(A=!0);let d;for(const f in i)(!t||!Wa(t,f)&&((d=eA(f))===f||!Wa(t,d)))&&(c?n&&(n[f]!==void 0||n[d]!==void 0)&&(r[f]=mS(c,i,f,void 0,e,!0)):delete r[f]);if(s!==i)for(const f in s)(!t||!Wa(t,f))&&(delete s[f],A=!0)}A&&fc(e.attrs,"set","")}function c8(e,t,n,a){const[r,s]=e.propsOptions;let o=!1,i;if(t)for(let c in t){if(Rp(c))continue;const A=t[c];let d;r&&Wa(r,d=$o(c))?!s||!s.includes(d)?n[d]=A:(i||(i={}))[d]=A:nw(e.emitsOptions,c)||(!(c in a)||A!==a[c])&&(a[c]=A,o=!0)}if(s){const c=wn(n),A=i||or;for(let d=0;d<s.length;d++){const f=s[d];n[f]=mS(r,c,f,A[f],e,!Wa(A,f))}}return o}function mS(e,t,n,a,r,s){const o=e[n];if(o!=null){const i=Wa(o,"default");if(i&&a===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Hn(c)){const{propsDefaults:A}=r;if(n in A)a=A[n];else{const d=lg(r);a=A[n]=c.call(null,t),d()}}else a=c;r.ce&&r.ce._setProp(n,a)}o[0]&&(s&&!i?a=!1:o[1]&&(a===""||a===eA(n))&&(a=!0))}return a}const QZ=new WeakMap;function d8(e,t,n=!1){const a=n?QZ:t.propsCache,r=a.get(e);if(r)return r;const s=e.props,o={},i=[];let c=!1;if(!Hn(e)){const d=f=>{c=!0;const[m,v]=d8(f,t,!0);bs(o,m),v&&i.push(...v)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!s&&!c)return ar(e)&&a.set(e,ov),ov;if(bn(s))for(let d=0;d<s.length;d++){const f=$o(s[d]);_P(f)&&(o[f]=or)}else if(s)for(const d in s){const f=$o(d);if(_P(f)){const m=s[d],v=o[f]=bn(m)||Hn(m)?{type:m}:bs({},m),p=v.type;let g=!1,y=!0;if(bn(p))for(let w=0;w<p.length;++w){const b=p[w],x=Hn(b)&&b.name;if(x==="Boolean"){g=!0;break}else x==="String"&&(y=!1)}else g=Hn(p)&&p.name==="Boolean";v[0]=g,v[1]=y,(g||Wa(v,"default"))&&i.push(f)}}const A=[o,i];return ar(e)&&a.set(e,A),A}function _P(e){return e[0]!=="$"&&!Rp(e)}const ak=e=>e==="_"||e==="_ctx"||e==="$stable",rk=e=>bn(e)?e.map(bl):[bl(e)],GZ=(e,t,n)=>{if(t._n)return t;const a=u((...r)=>rk(t(...r)),n);return a._c=!1,a},A8=(e,t,n)=>{const a=e._ctx;for(const r in e){if(ak(r))continue;const s=e[r];if(Hn(s))t[r]=GZ(r,s,a);else if(s!=null){const o=rk(s);t[r]=()=>o}}},f8=(e,t)=>{const n=rk(t);e.slots.default=()=>n},m8=(e,t,n)=>{for(const a in t)(n||!ak(a))&&(e[a]=t[a])},zZ=(e,t,n)=>{const a=e.slots=l8();if(e.vnode.shapeFlag&32){const r=t._;r?(m8(a,t,n),n&&AL(a,"_",r,!0)):A8(t,a)}else t&&f8(e,t)},KZ=(e,t,n)=>{const{vnode:a,slots:r}=e;let s=!0,o=or;if(a.shapeFlag&32){const i=t._;i?n&&i===1?s=!1:m8(r,t,n):(s=!t.$stable,A8(t,r)),o=t}else t&&(f8(e,t),o={default:1});if(s)for(const i in r)!ak(i)&&o[i]==null&&delete r[i]},vs=Aee;function WZ(e){return jZ(e)}function jZ(e,t){const n=q2();n.__VUE__=!0;const{insert:a,remove:r,patchProp:s,createElement:o,createText:i,createComment:c,setText:A,setElementText:d,parentNode:f,nextSibling:m,setScopeId:v=Su,insertStaticContent:p}=e,g=(j,ce,de,_e=null,Re=null,be=null,Ee=void 0,Ce=null,Be=!!ce.dynamicChildren)=>{if(j===ce)return;j&&!Cl(j,ce)&&(_e=Y(j),P(j,Re,be,!0),j=null),ce.patchFlag===-2&&(Be=!1,ce.dynamicChildren=null);const{type:Te,ref:Oe,shapeFlag:Me}=ce;switch(Te){case ig:y(j,ce,de,_e);break;case is:w(j,ce,de,_e);break;case Sx:j==null&&b(ce,de,_e,Ee);break;case Ke:L(j,ce,de,_e,Re,be,Ee,Ce,Be);break;default:Me&1?D(j,ce,de,_e,Re,be,Ee,Ce,Be):Me&6?H(j,ce,de,_e,Re,be,Ee,Ce,Be):(Me&64||Me&128)&&Te.process(j,ce,de,_e,Re,be,Ee,Ce,Be,ae)}Oe!=null&&Re?Mp(Oe,j&&j.ref,be,ce||j,!ce):Oe==null&&j&&j.ref!=null&&Mp(j.ref,null,be,j,!0)},y=(j,ce,de,_e)=>{if(j==null)a(ce.el=i(ce.children),de,_e);else{const Re=ce.el=j.el;ce.children!==j.children&&A(Re,ce.children)}},w=(j,ce,de,_e)=>{j==null?a(ce.el=c(ce.children||""),de,_e):ce.el=j.el},b=(j,ce,de,_e)=>{[j.el,j.anchor]=p(j.children,ce,de,_e,j.el,j.anchor)},x=({el:j,anchor:ce},de,_e)=>{let Re;for(;j&&j!==ce;)Re=m(j),a(j,de,_e),j=Re;a(ce,de,_e)},T=({el:j,anchor:ce})=>{let de;for(;j&&j!==ce;)de=m(j),r(j),j=de;r(ce)},D=(j,ce,de,_e,Re,be,Ee,Ce,Be)=>{ce.type==="svg"?Ee="svg":ce.type==="math"&&(Ee="mathml"),j==null?k(ce,de,_e,Re,be,Ee,Ce,Be):C(j,ce,Re,be,Ee,Ce,Be)},k=(j,ce,de,_e,Re,be,Ee,Ce)=>{let Be,Te;const{props:Oe,shapeFlag:Me,transition:rt,dirs:ut}=j;if(Be=j.el=o(j.type,be,Oe&&Oe.is,Oe),Me&8?d(Be,j.children):Me&16&&E(j.children,Be,null,_e,Re,Cx(j,be),Ee,Ce),ut&&EA(j,null,_e,"created"),S(Be,j,j.scopeId,Ee,_e),Oe){for(const Ue in Oe)Ue!=="value"&&!Rp(Ue)&&s(Be,Ue,null,Oe[Ue],be,_e);"value"in Oe&&s(Be,"value",null,Oe.value,be),(Te=Oe.onVnodeBeforeMount)&&Gi(Te,_e,j)}ut&&EA(j,null,_e,"beforeMount");const Ie=qZ(Re,rt);Ie&&rt.beforeEnter(Be),a(Be,ce,de),((Te=Oe&&Oe.onVnodeMounted)||Ie||ut)&&vs(()=>{Te&&Gi(Te,_e,j),Ie&&rt.enter(Be),ut&&EA(j,null,_e,"mounted")},Re)},S=(j,ce,de,_e,Re)=>{if(de&&v(j,de),_e)for(let be=0;be<_e.length;be++)v(j,_e[be]);if(Re){let be=Re.subTree;if(ce===be||w_(be.type)&&(be.ssContent===ce||be.ssFallback===ce)){const Ee=Re.vnode;S(j,Ee,Ee.scopeId,Ee.slotScopeIds,Re.parent)}}},E=(j,ce,de,_e,Re,be,Ee,Ce,Be=0)=>{for(let Te=Be;Te<j.length;Te++){const Oe=j[Te]=Ce?dd(j[Te]):bl(j[Te]);g(null,Oe,ce,de,_e,Re,be,Ee,Ce)}},C=(j,ce,de,_e,Re,be,Ee)=>{const Ce=ce.el=j.el;let{patchFlag:Be,dynamicChildren:Te,dirs:Oe}=ce;Be|=j.patchFlag&16;const Me=j.props||or,rt=ce.props||or;let ut;if(de&&BA(de,!1),(ut=rt.onVnodeBeforeUpdate)&&Gi(ut,de,ce,j),Oe&&EA(ce,j,de,"beforeUpdate"),de&&BA(de,!0),(Me.innerHTML&&rt.innerHTML==null||Me.textContent&&rt.textContent==null)&&d(Ce,""),Te?U(j.dynamicChildren,Te,Ce,de,_e,Cx(ce,Re),be):Ee||le(j,ce,Ce,null,de,_e,Cx(ce,Re),be,!1),Be>0){if(Be&16)F(Ce,Me,rt,de,Re);else if(Be&2&&Me.class!==rt.class&&s(Ce,"class",null,rt.class,Re),Be&4&&s(Ce,"style",Me.style,rt.style,Re),Be&8){const Ie=ce.dynamicProps;for(let Ue=0;Ue<Ie.length;Ue++){const dt=Ie[Ue],Ft=Me[dt],it=rt[dt];(it!==Ft||dt==="value")&&s(Ce,dt,Ft,it,Re,de)}}Be&1&&j.children!==ce.children&&d(Ce,ce.children)}else!Ee&&Te==null&&F(Ce,Me,rt,de,Re);((ut=rt.onVnodeUpdated)||Oe)&&vs(()=>{ut&&Gi(ut,de,ce,j),Oe&&EA(ce,j,de,"updated")},_e)},U=(j,ce,de,_e,Re,be,Ee)=>{for(let Ce=0;Ce<ce.length;Ce++){const Be=j[Ce],Te=ce[Ce],Oe=Be.el&&(Be.type===Ke||!Cl(Be,Te)||Be.shapeFlag&198)?f(Be.el):de;g(Be,Te,Oe,null,_e,Re,be,Ee,!0)}},F=(j,ce,de,_e,Re)=>{if(ce!==de){if(ce!==or)for(const be in ce)!Rp(be)&&!(be in de)&&s(j,be,ce[be],null,Re,_e);for(const be in de){if(Rp(be))continue;const Ee=de[be],Ce=ce[be];Ee!==Ce&&be!=="value"&&s(j,be,Ce,Ee,Re,_e)}"value"in de&&s(j,"value",ce.value,de.value,Re)}},L=(j,ce,de,_e,Re,be,Ee,Ce,Be)=>{const Te=ce.el=j?j.el:i(""),Oe=ce.anchor=j?j.anchor:i("");let{patchFlag:Me,dynamicChildren:rt,slotScopeIds:ut}=ce;ut&&(Ce=Ce?Ce.concat(ut):ut),j==null?(a(Te,de,_e),a(Oe,de,_e),E(ce.children||[],de,Oe,Re,be,Ee,Ce,Be)):Me>0&&Me&64&&rt&&j.dynamicChildren?(U(j.dynamicChildren,rt,de,Re,be,Ee,Ce),(ce.key!=null||Re&&ce===Re.subTree)&&sk(j,ce,!0)):le(j,ce,de,Oe,Re,be,Ee,Ce,Be)},H=(j,ce,de,_e,Re,be,Ee,Ce,Be)=>{ce.slotScopeIds=Ce,j==null?ce.shapeFlag&512?Re.ctx.activate(ce,de,_e,Ee,Be):ue(ce,de,_e,Re,be,Ee,Be):ie(j,ce,Be)},ue=(j,ce,de,_e,Re,be,Ee)=>{const Ce=j.component=pee(j,_e,Re);if(X2(j)&&(Ce.ctx.renderer=ae),gee(Ce,!1,Ee),Ce.asyncDep){if(Re&&Re.registerDep(Ce,Q,Ee),!j.el){const Be=Ce.subTree=l(is);w(null,Be,ce,de),j.placeholder=Be.el}}else Q(Ce,j,ce,de,Re,be,Ee)},ie=(j,ce,de)=>{const _e=ce.component=j.component;if(oee(j,ce,de))if(_e.asyncDep&&!_e.asyncResolved){X(_e,ce,de);return}else _e.next=ce,_e.update();else ce.el=j.el,_e.vnode=ce},Q=(j,ce,de,_e,Re,be,Ee)=>{const Ce=()=>{if(j.isMounted){let{next:Me,bu:rt,u:ut,parent:Ie,vnode:Ue}=j;{const yt=v8(j);if(yt){Me&&(Me.el=Ue.el,X(j,Me,Ee)),yt.asyncDep.then(()=>{j.isUnmounted||Ce()});return}}let dt=Me,Ft;BA(j,!1),Me?(Me.el=Ue.el,X(j,Me,Ee)):Me=Ue,rt&&lv(rt),(Ft=Me.props&&Me.props.onVnodeBeforeUpdate)&&Gi(Ft,Ie,Me,Ue),BA(j,!0);const it=wP(j),qe=j.subTree;j.subTree=it,g(qe,it,f(qe.el),Y(qe),j,Re,be),Me.el=it.el,dt===null&&ik(j,it.el),ut&&vs(ut,Re),(Ft=Me.props&&Me.props.onVnodeUpdated)&&vs(()=>Gi(Ft,Ie,Me,Ue),Re)}else{let Me;const{el:rt,props:ut}=ce,{bm:Ie,m:Ue,parent:dt,root:Ft,type:it}=j,qe=ef(ce);BA(j,!1),Ie&&lv(Ie),!qe&&(Me=ut&&ut.onVnodeBeforeMount)&&Gi(Me,dt,ce),BA(j,!0);{Ft.ce&&Ft.ce._def.shadowRoot!==!1&&Ft.ce._injectChildStyle(it);const yt=j.subTree=wP(j);g(null,yt,de,_e,j,Re,be),ce.el=yt.el}if(Ue&&vs(Ue,Re),!qe&&(Me=ut&&ut.onVnodeMounted)){const yt=ce;vs(()=>Gi(Me,dt,yt),Re)}(ce.shapeFlag&256||dt&&ef(dt.vnode)&&dt.vnode.shapeFlag&256)&&j.a&&vs(j.a,Re),j.isMounted=!0,ce=de=_e=null}};j.scope.on();const Be=j.effect=new yL(Ce);j.scope.off();const Te=j.update=Be.run.bind(Be),Oe=j.job=Be.runIfDirty.bind(Be);Oe.i=j,Oe.id=j.uid,Be.scheduler=()=>ek(Oe),BA(j,!0),Te()},X=(j,ce,de)=>{ce.component=j;const _e=j.vnode.props;j.vnode=ce,j.next=null,$Z(j,ce.props,_e,de),KZ(j,ce.children,de),Bc(),uP(j),kc()},le=(j,ce,de,_e,Re,be,Ee,Ce,Be=!1)=>{const Te=j&&j.children,Oe=j?j.shapeFlag:0,Me=ce.children,{patchFlag:rt,shapeFlag:ut}=ce;if(rt>0){if(rt&128){re(Te,Me,de,_e,Re,be,Ee,Ce,Be);return}else if(rt&256){Z(Te,Me,de,_e,Re,be,Ee,Ce,Be);return}}ut&8?(Oe&16&&te(Te,Re,be),Me!==Te&&d(de,Me)):Oe&16?ut&16?re(Te,Me,de,_e,Re,be,Ee,Ce,Be):te(Te,Re,be,!0):(Oe&8&&d(de,""),ut&16&&E(Me,de,_e,Re,be,Ee,Ce,Be))},Z=(j,ce,de,_e,Re,be,Ee,Ce,Be)=>{j=j||ov,ce=ce||ov;const Te=j.length,Oe=ce.length,Me=Math.min(Te,Oe);let rt;for(rt=0;rt<Me;rt++){const ut=ce[rt]=Be?dd(ce[rt]):bl(ce[rt]);g(j[rt],ut,de,null,Re,be,Ee,Ce,Be)}Te>Oe?te(j,Re,be,!0,!1,Me):E(ce,de,_e,Re,be,Ee,Ce,Be,Me)},re=(j,ce,de,_e,Re,be,Ee,Ce,Be)=>{let Te=0;const Oe=ce.length;let Me=j.length-1,rt=Oe-1;for(;Te<=Me&&Te<=rt;){const ut=j[Te],Ie=ce[Te]=Be?dd(ce[Te]):bl(ce[Te]);if(Cl(ut,Ie))g(ut,Ie,de,null,Re,be,Ee,Ce,Be);else break;Te++}for(;Te<=Me&&Te<=rt;){const ut=j[Me],Ie=ce[rt]=Be?dd(ce[rt]):bl(ce[rt]);if(Cl(ut,Ie))g(ut,Ie,de,null,Re,be,Ee,Ce,Be);else break;Me--,rt--}if(Te>Me){if(Te<=rt){const ut=rt+1,Ie=ut<Oe?ce[ut].el:_e;for(;Te<=rt;)g(null,ce[Te]=Be?dd(ce[Te]):bl(ce[Te]),de,Ie,Re,be,Ee,Ce,Be),Te++}}else if(Te>rt)for(;Te<=Me;)P(j[Te],Re,be,!0),Te++;else{const ut=Te,Ie=Te,Ue=new Map;for(Te=Ie;Te<=rt;Te++){const an=ce[Te]=Be?dd(ce[Te]):bl(ce[Te]);an.key!=null&&Ue.set(an.key,Te)}let dt,Ft=0;const it=rt-Ie+1;let qe=!1,yt=0;const mt=new Array(it);for(Te=0;Te<it;Te++)mt[Te]=0;for(Te=ut;Te<=Me;Te++){const an=j[Te];if(Ft>=it){P(an,Re,be,!0);continue}let Cn;if(an.key!=null)Cn=Ue.get(an.key);else for(dt=Ie;dt<=rt;dt++)if(mt[dt-Ie]===0&&Cl(an,ce[dt])){Cn=dt;break}Cn===void 0?P(an,Re,be,!0):(mt[Cn-Ie]=Te+1,Cn>=yt?yt=Cn:qe=!0,g(an,ce[Cn],de,null,Re,be,Ee,Ce,Be),Ft++)}const xt=qe?YZ(mt):ov;for(dt=xt.length-1,Te=it-1;Te>=0;Te--){const an=Ie+Te,Cn=ce[an],oa=ce[an+1],Vt=an+1<Oe?oa.el||oa.placeholder:_e;mt[Te]===0?g(null,Cn,de,Vt,Re,be,Ee,Ce,Be):qe&&(dt<0||Te!==xt[dt]?q(Cn,de,Vt,2):dt--)}}},q=(j,ce,de,_e,Re=null)=>{const{el:be,type:Ee,transition:Ce,children:Be,shapeFlag:Te}=j;if(Te&6){q(j.component.subTree,ce,de,_e);return}if(Te&128){j.suspense.move(ce,de,_e);return}if(Te&64){Ee.move(j,ce,de,ae);return}if(Ee===Ke){a(be,ce,de);for(let Me=0;Me<Be.length;Me++)q(Be[Me],ce,de,_e);a(j.anchor,ce,de);return}if(Ee===Sx){x(j,ce,de);return}if(_e!==2&&Te&1&&Ce)if(_e===0)Ce.beforeEnter(be),a(be,ce,de),vs(()=>Ce.enter(be),Re);else{const{leave:Me,delayLeave:rt,afterLeave:ut}=Ce,Ie=()=>{j.ctx.isUnmounted?r(be):a(be,ce,de)},Ue=()=>{be._isLeaving&&be[Ac](!0),Me(be,()=>{Ie(),ut&&ut()})};rt?rt(be,Ie,Ue):Ue()}else a(be,ce,de)},P=(j,ce,de,_e=!1,Re=!1)=>{const{type:be,props:Ee,ref:Ce,children:Be,dynamicChildren:Te,shapeFlag:Oe,patchFlag:Me,dirs:rt,cacheIndex:ut}=j;if(Me===-2&&(Re=!1),Ce!=null&&(Bc(),Mp(Ce,null,de,j,!0),kc()),ut!=null&&(ce.renderCache[ut]=void 0),Oe&256){ce.ctx.deactivate(j);return}const Ie=Oe&1&&rt,Ue=!ef(j);let dt;if(Ue&&(dt=Ee&&Ee.onVnodeBeforeUnmount)&&Gi(dt,ce,j),Oe&6)M(j.component,de,_e);else{if(Oe&128){j.suspense.unmount(de,_e);return}Ie&&EA(j,null,ce,"beforeUnmount"),Oe&64?j.type.remove(j,ce,de,ae,_e):Te&&!Te.hasOnce&&(be!==Ke||Me>0&&Me&64)?te(Te,ce,de,!1,!0):(be===Ke&&Me&384||!Re&&Oe&16)&&te(Be,ce,de),_e&&G(j)}(Ue&&(dt=Ee&&Ee.onVnodeUnmounted)||Ie)&&vs(()=>{dt&&Gi(dt,ce,j),Ie&&EA(j,null,ce,"unmounted")},de)},G=j=>{const{type:ce,el:de,anchor:_e,transition:Re}=j;if(ce===Ke){J(de,_e);return}if(ce===Sx){T(j);return}const be=()=>{r(de),Re&&!Re.persisted&&Re.afterLeave&&Re.afterLeave()};if(j.shapeFlag&1&&Re&&!Re.persisted){const{leave:Ee,delayLeave:Ce}=Re,Be=()=>Ee(de,be);Ce?Ce(j.el,be,Be):Be()}else be()},J=(j,ce)=>{let de;for(;j!==ce;)de=m(j),r(j),j=de;r(ce)},M=(j,ce,de)=>{const{bum:_e,scope:Re,job:be,subTree:Ee,um:Ce,m:Be,a:Te}=j;__(Be),__(Te),_e&&lv(_e),Re.stop(),be&&(be.flags|=8,P(Ee,j,ce,de)),Ce&&vs(Ce,ce),vs(()=>{j.isUnmounted=!0},ce)},te=(j,ce,de,_e=!1,Re=!1,be=0)=>{for(let Ee=be;Ee<j.length;Ee++)P(j[Ee],ce,de,_e,Re)},Y=j=>{if(j.shapeFlag&6)return Y(j.component.subTree);if(j.shapeFlag&128)return j.suspense.next();const ce=m(j.anchor||j.el),de=ce&&ce[$L];return de?m(de):ce};let W=!1;const ee=(j,ce,de)=>{j==null?ce._vnode&&P(ce._vnode,null,null,!0):g(ce._vnode||null,j,ce,null,null,null,de),ce._vnode=j,W||(W=!0,uP(),ML(),W=!1)},ae={p:g,um:P,m:q,r:G,mt:ue,mc:E,pc:le,pbc:U,n:Y,o:e};return{render:ee,hydrate:void 0,createApp:OZ(ee)}}function Cx({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function BA({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function qZ(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function sk(e,t,n=!1){const a=e.children,r=t.children;if(bn(a)&&bn(r))for(let s=0;s<a.length;s++){const o=a[s];let i=r[s];i.shapeFlag&1&&!i.dynamicChildren&&((i.patchFlag<=0||i.patchFlag===32)&&(i=r[s]=dd(r[s]),i.el=o.el),!n&&i.patchFlag!==-2&&sk(o,i)),i.type===ig&&i.patchFlag!==-1&&(i.el=o.el),i.type===is&&!i.el&&(i.el=o.el)}}function YZ(e){const t=e.slice(),n=[0];let a,r,s,o,i;const c=e.length;for(a=0;a<c;a++){const A=e[a];if(A!==0){if(r=n[n.length-1],e[r]<A){t[a]=r,n.push(a);continue}for(s=0,o=n.length-1;s<o;)i=s+o>>1,e[n[i]]<A?s=i+1:o=i;A<e[n[s]]&&(s>0&&(t[a]=n[s-1]),n[s]=a)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=t[o];return n}function v8(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:v8(t)}function __(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const XZ=Symbol.for("v-scx"),JZ=()=>Tn(XZ);function _r(e,t){return ok(e,null,t)}function je(e,t,n){return ok(e,t,n)}function ok(e,t,n=or){const{immediate:a,deep:r,flush:s,once:o}=n,i=bs({},n),c=t&&a||!t&&s!=="post";let A;if(y0){if(s==="sync"){const v=JZ();A=v.__watcherHandles||(v.__watcherHandles=[])}else if(!c){const v=()=>{};return v.stop=Su,v.resume=Su,v.pause=Su,v}}const d=co;i.call=(v,p,g)=>Hl(v,d,p,g);let f=!1;s==="post"?i.scheduler=v=>{vs(v,d&&d.suspense)}:s!=="sync"&&(f=!0,i.scheduler=(v,p)=>{p?v():ek(v)}),i.augmentJob=v=>{t&&(v.flags|=4),f&&(v.flags|=2,d&&(v.id=d.uid,v.i=d))};const m=gZ(e,t,i);return y0&&(A?A.push(m):c&&m()),m}function ZZ(e,t,n){const a=this.proxy,r=yr(e)?e.includes(".")?h8(a,e):()=>a[e]:e.bind(a,a);let s;Hn(t)?s=t:(s=t.handler,n=t);const o=lg(this),i=ok(r,s.bind(a),n);return o(),i}function h8(e,t){const n=t.split(".");return()=>{let a=e;for(let r=0;r<n.length&&a;r++)a=a[n[r]];return a}}const eee=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${$o(t)}Modifiers`]||e[`${eA(t)}Modifiers`];function tee(e,t,...n){if(e.isUnmounted)return;const a=e.vnode.props||or;let r=n;const s=t.startsWith("update:"),o=s&&eee(a,t.slice(7));o&&(o.trim&&(r=n.map(d=>yr(d)?d.trim():d)),o.number&&(r=n.map(d_)));let i,c=a[i=hx(t)]||a[i=hx($o(t))];!c&&s&&(c=a[i=hx(eA(t))]),c&&Hl(c,e,6,r);const A=a[i+"Once"];if(A){if(!e.emitted)e.emitted={};else if(e.emitted[i])return;e.emitted[i]=!0,Hl(A,e,6,r)}}const nee=new WeakMap;function p8(e,t,n=!1){const a=n?nee:t.emitsCache,r=a.get(e);if(r!==void 0)return r;const s=e.emits;let o={},i=!1;if(!Hn(e)){const c=A=>{const d=p8(A,t,!0);d&&(i=!0,bs(o,d))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!s&&!i?(ar(e)&&a.set(e,null),null):(bn(s)?s.forEach(c=>o[c]=null):bs(o,s),ar(e)&&a.set(e,o),o)}function nw(e,t){return!e||!W2(t)?!1:(t=t.slice(2).replace(/Once$/,""),Wa(e,t[0].toLowerCase()+t.slice(1))||Wa(e,eA(t))||Wa(e,t))}function wP(e){const{type:t,vnode:n,proxy:a,withProxy:r,propsOptions:[s],slots:o,attrs:i,emit:c,render:A,renderCache:d,props:f,data:m,setupState:v,ctx:p,inheritAttrs:g}=e,y=p_(e);let w,b;try{if(n.shapeFlag&4){const T=r||a,D=T;w=bl(A.call(D,T,d,f,v,m,p)),b=i}else{const T=t;w=bl(T.length>1?T(f,{attrs:i,slots:o,emit:c}):T(f,null)),b=t.props?i:ree(i)}}catch(T){Hp.length=0,sg(T,e,1),w=l(is)}let x=w;if(b&&g!==!1){const T=Object.keys(b),{shapeFlag:D}=x;T.length&&D&7&&(s&&T.some(QB)&&(b=see(b,s)),x=Iu(x,b,!1,!0))}return n.dirs&&(x=Iu(x,null,!1,!0),x.dirs=x.dirs?x.dirs.concat(n.dirs):n.dirs),n.transition&&Vd(x,n.transition),w=x,p_(y),w}function aee(e,t=!0){let n;for(let a=0;a<e.length;a++){const r=e[a];if(Ld(r)){if(r.type!==is||r.children==="v-if"){if(n)return;n=r}}else return}return n}const ree=e=>{let t;for(const n in e)(n==="class"||n==="style"||W2(n))&&((t||(t={}))[n]=e[n]);return t},see=(e,t)=>{const n={};for(const a in e)(!QB(a)||!(a.slice(9)in t))&&(n[a]=e[a]);return n};function oee(e,t,n){const{props:a,children:r,component:s}=e,{props:o,children:i,patchFlag:c}=t,A=s.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return a?bP(a,o,A):!!o;if(c&8){const d=t.dynamicProps;for(let f=0;f<d.length;f++){const m=d[f];if(o[m]!==a[m]&&!nw(A,m))return!0}}}else return(r||i)&&(!i||!i.$stable)?!0:a===o?!1:a?o?bP(a,o,A):!0:!!o;return!1}function bP(e,t,n){const a=Object.keys(t);if(a.length!==Object.keys(e).length)return!0;for(let r=0;r<a.length;r++){const s=a[r];if(t[s]!==e[s]&&!nw(n,s))return!0}return!1}function ik({vnode:e,parent:t},n){for(;t;){const a=t.subTree;if(a.suspense&&a.suspense.activeBranch===e&&(a.el=e.el),a===e)(e=t.vnode).el=n,t=t.parent;else break}}const w_=e=>e.__isSuspense;let vS=0;const iee={name:"Suspense",__isSuspense:!0,process(e,t,n,a,r,s,o,i,c,A){if(e==null)lee(t,n,a,r,s,o,i,c,A);else{if(s&&s.deps>0&&!e.suspense.isInFallback){t.suspense=e.suspense,t.suspense.vnode=t,t.el=e.el;return}uee(e,t,n,a,r,o,i,c,A)}},hydrate:cee,normalize:dee},hS=iee;function g0(e,t){const n=e.props&&e.props[t];Hn(n)&&n()}function lee(e,t,n,a,r,s,o,i,c){const{p:A,o:{createElement:d}}=c,f=d("div"),m=e.suspense=g8(e,r,a,t,f,n,s,o,i,c);A(null,m.pendingBranch=e.ssContent,f,null,a,m,s,o),m.deps>0?(g0(e,"onPending"),g0(e,"onFallback"),A(null,e.ssFallback,t,n,a,null,s,o),Av(m,e.ssFallback)):m.resolve(!1,!0)}function uee(e,t,n,a,r,s,o,i,{p:c,um:A,o:{createElement:d}}){const f=t.suspense=e.suspense;f.vnode=t,t.el=e.el;const m=t.ssContent,v=t.ssFallback,{activeBranch:p,pendingBranch:g,isInFallback:y,isHydrating:w}=f;if(g)f.pendingBranch=m,Cl(g,m)?(c(g,m,f.hiddenContainer,null,r,f,s,o,i),f.deps<=0?f.resolve():y&&(w||(c(p,v,n,a,r,null,s,o,i),Av(f,v)))):(f.pendingId=vS++,w?(f.isHydrating=!1,f.activeBranch=g):A(g,r,f),f.deps=0,f.effects.length=0,f.hiddenContainer=d("div"),y?(c(null,m,f.hiddenContainer,null,r,f,s,o,i),f.deps<=0?f.resolve():(c(p,v,n,a,r,null,s,o,i),Av(f,v))):p&&Cl(p,m)?(c(p,m,n,a,r,f,s,o,i),f.resolve(!0)):(c(null,m,f.hiddenContainer,null,r,f,s,o,i),f.deps<=0&&f.resolve()));else if(p&&Cl(p,m))c(p,m,n,a,r,f,s,o,i),Av(f,m);else if(g0(t,"onPending"),f.pendingBranch=m,m.shapeFlag&512?f.pendingId=m.component.suspenseId:f.pendingId=vS++,c(null,m,f.hiddenContainer,null,r,f,s,o,i),f.deps<=0)f.resolve();else{const{timeout:b,pendingId:x}=f;b>0?setTimeout(()=>{f.pendingId===x&&f.fallback(v)},b):b===0&&f.fallback(v)}}function g8(e,t,n,a,r,s,o,i,c,A,d=!1){const{p:f,m,um:v,n:p,o:{parentNode:g,remove:y}}=A;let w;const b=fee(e);b&&t&&t.pendingBranch&&(w=t.pendingId,t.deps++);const x=e.props?fL(e.props.timeout):void 0,T=s,D={vnode:e,parent:t,parentComponent:n,namespace:o,container:a,hiddenContainer:r,deps:0,pendingId:vS++,timeout:typeof x=="number"?x:-1,activeBranch:null,pendingBranch:null,isInFallback:!d,isHydrating:d,isUnmounted:!1,effects:[],resolve(k=!1,S=!1){const{vnode:E,activeBranch:C,pendingBranch:U,pendingId:F,effects:L,parentComponent:H,container:ue}=D;let ie=!1;D.isHydrating?D.isHydrating=!1:k||(ie=C&&U.transition&&U.transition.mode==="out-in",ie&&(C.transition.afterLeave=()=>{F===D.pendingId&&(m(U,ue,s===T?p(C):s,0),uS(L))}),C&&(g(C.el)===ue&&(s=p(C)),v(C,H,D,!0)),ie||m(U,ue,s,0)),Av(D,U),D.pendingBranch=null,D.isInFallback=!1;let Q=D.parent,X=!1;for(;Q;){if(Q.pendingBranch){Q.effects.push(...L),X=!0;break}Q=Q.parent}!X&&!ie&&uS(L),D.effects=[],b&&t&&t.pendingBranch&&w===t.pendingId&&(t.deps--,t.deps===0&&!S&&t.resolve()),g0(E,"onResolve")},fallback(k){if(!D.pendingBranch)return;const{vnode:S,activeBranch:E,parentComponent:C,container:U,namespace:F}=D;g0(S,"onFallback");const L=p(E),H=()=>{D.isInFallback&&(f(null,k,U,L,C,null,F,i,c),Av(D,k))},ue=k.transition&&k.transition.mode==="out-in";ue&&(E.transition.afterLeave=H),D.isInFallback=!0,v(E,C,null,!0),ue||H()},move(k,S,E){D.activeBranch&&m(D.activeBranch,k,S,E),D.container=k},next(){return D.activeBranch&&p(D.activeBranch)},registerDep(k,S,E){const C=!!D.pendingBranch;C&&D.deps++;const U=k.vnode.el;k.asyncDep.catch(F=>{sg(F,k,0)}).then(F=>{if(k.isUnmounted||D.isUnmounted||D.pendingId!==k.suspenseId)return;k.asyncResolved=!0;const{vnode:L}=k;gS(k,F),U&&(L.el=U);const H=!U&&k.subTree.el;S(k,L,g(U||k.subTree.el),U?null:p(k.subTree),D,o,E),H&&y(H),ik(k,L.el),C&&--D.deps===0&&D.resolve()})},unmount(k,S){D.isUnmounted=!0,D.activeBranch&&v(D.activeBranch,n,k,S),D.pendingBranch&&v(D.pendingBranch,n,k,S)}};return D}function cee(e,t,n,a,r,s,o,i,c){const A=t.suspense=g8(t,a,n,e.parentNode,document.createElement("div"),null,r,s,o,i,!0),d=c(e,A.pendingBranch=t.ssContent,n,A,s,o);return A.deps===0&&A.resolve(!1,!0),d}function dee(e){const{shapeFlag:t,children:n}=e,a=t&32;e.ssContent=xP(a?n.default:n),e.ssFallback=a?xP(n.fallback):l(is)}function xP(e){let t;if(Hn(e)){const n=Bv&&e._c;n&&(e._d=!1,R()),e=e(),n&&(e._d=!0,t=ai,y8())}return bn(e)&&(e=aee(e)),e=bl(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(n=>n!==e)),e}function Aee(e,t){t&&t.pendingBranch?bn(e)?t.effects.push(...e):t.effects.push(e):uS(e)}function Av(e,t){e.activeBranch=t;const{vnode:n,parentComponent:a}=e;let r=t.el;for(;!r&&t.component;)t=t.component.subTree,r=t.el;n.el=r,a&&a.subTree===n&&(a.vnode.el=r,ik(a,r))}function fee(e){const t=e.props&&e.props.suspensible;return t!=null&&t!==!1}const Ke=Symbol.for("v-fgt"),ig=Symbol.for("v-txt"),is=Symbol.for("v-cmt"),Sx=Symbol.for("v-stc"),Hp=[];let ai=null;function R(e=!1){Hp.push(ai=e?null:[])}function y8(){Hp.pop(),ai=Hp[Hp.length-1]||null}let Bv=1;function b_(e,t=!1){Bv+=e,e<0&&ai&&t&&(ai.hasOnce=!0)}function _8(e){return e.dynamicChildren=Bv>0?ai||ov:null,y8(),Bv>0&&ai&&ai.push(e),e}function Ae(e,t,n,a,r,s){return _8(h(e,t,n,a,r,s,!0))}function ve(e,t,n,a,r){return _8(l(e,t,n,a,r,!0))}function Ld(e){return e?e.__v_isVNode===!0:!1}function Cl(e,t){return e.type===t.type&&e.key===t.key}const w8=({key:e})=>e??null,Qy=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?yr(e)||Yr(e)||Hn(e)?{i:Gs,r:e,k:t,f:!!n}:e:null);function h(e,t=null,n=null,a=0,r=null,s=e===Ke?0:1,o=!1,i=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&w8(t),ref:t&&Qy(t),scopeId:HL,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:a,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Gs};return i?(lk(c,n),s&128&&e.normalize(c)):n&&(c.shapeFlag|=yr(n)?8:16),Bv>0&&!o&&ai&&(c.patchFlag>0||s&6)&&c.patchFlag!==32&&ai.push(c),c}const l=mee;function mee(e,t=null,n=null,a=0,r=null,s=!1){if((!e||e===t8)&&(e=is),Ld(e)){const i=Iu(e,t,!0);return n&&lk(i,n),Bv>0&&!s&&ai&&(i.shapeFlag&6?ai[ai.indexOf(e)]=i:ai.push(i)),i.patchFlag=-2,i}if(bee(e)&&(e=e.__vccOpts),t){t=Jl(t);let{class:i,style:c}=t;i&&!yr(i)&&(t.class=ct(i)),ar(c)&&(ZB(c)&&!bn(c)&&(c=bs({},c)),t.style=Ut(c))}const o=yr(e)?1:w_(e)?128:QL(e)?64:ar(e)?4:Hn(e)?2:0;return h(e,t,n,a,r,o,s,!0)}function Jl(e){return e?ZB(e)||u8(e)?bs({},e):e:null}function Iu(e,t,n=!1,a=!1){const{props:r,ref:s,patchFlag:o,children:i,transition:c}=e,A=t?Pe(r||{},t):r,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:A,key:A&&w8(A),ref:t&&t.ref?n&&s?bn(s)?s.concat(Qy(t)):[s,Qy(t)]:Qy(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ke?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Iu(e.ssContent),ssFallback:e.ssFallback&&Iu(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&a&&Vd(d,c.clone(d)),d}function O(e=" ",t=0){return l(ig,null,e,t)}function ye(e="",t=!1){return t?(R(),ve(is,null,e)):l(is,null,e)}function bl(e){return e==null||typeof e=="boolean"?l(is):bn(e)?l(Ke,null,e.slice()):Ld(e)?dd(e):l(ig,null,String(e))}function dd(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Iu(e)}function lk(e,t){let n=0;const{shapeFlag:a}=e;if(t==null)t=null;else if(bn(t))n=16;else if(typeof t=="object")if(a&65){const r=t.default;r&&(r._c&&(r._d=!1),lk(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!u8(t)?t._ctx=Gs:r===3&&Gs&&(Gs.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Hn(t)?(t={default:t,_ctx:Gs},n=32):(t=String(t),a&64?(n=16,t=[O(t)]):n=8);e.children=t,e.shapeFlag|=n}function Pe(...e){const t={};for(let n=0;n<e.length;n++){const a=e[n];for(const r in a)if(r==="class")t.class!==a.class&&(t.class=ct([t.class,a.class]));else if(r==="style")t.style=Ut([t.style,a.style]);else if(W2(r)){const s=t[r],o=a[r];o&&s!==o&&!(bn(s)&&s.includes(o))&&(t[r]=s?[].concat(s,o):o)}else r!==""&&(t[r]=a[r])}return t}function Gi(e,t,n,a=null){Hl(e,t,7,[n,a])}const vee=o8();let hee=0;function pee(e,t,n){const a=e.type,r=(t?t.appContext:e.appContext)||vee,s={uid:hee++,vnode:e,type:a,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new pL(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:d8(a,r),emitsOptions:p8(a,r),emit:null,emitted:null,propsDefaults:or,inheritAttrs:a.inheritAttrs,ctx:or,data:or,props:or,attrs:or,slots:or,refs:or,setupState:or,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=tee.bind(null,s),e.ce&&e.ce(s),s}let co=null;const Mf=()=>co||Gs;let x_,pS;{const e=q2(),t=(n,a)=>{let r;return(r=e[n])||(r=e[n]=[]),r.push(a),s=>{r.length>1?r.forEach(o=>o(s)):r[0](s)}};x_=t("__VUE_INSTANCE_SETTERS__",n=>co=n),pS=t("__VUE_SSR_SETTERS__",n=>y0=n)}const lg=e=>{const t=co;return x_(e),e.scope.on(),()=>{e.scope.off(),x_(t)}},CP=()=>{co&&co.scope.off(),x_(null)};function b8(e){return e.vnode.shapeFlag&4}let y0=!1;function gee(e,t=!1,n=!1){t&&pS(t);const{props:a,children:r}=e.vnode,s=b8(e);HZ(e,a,s,t),zZ(e,r,n||t);const o=s?yee(e,t):void 0;return t&&pS(!1),o}function yee(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,DZ);const{setup:a}=n;if(a){Bc();const r=e.setupContext=a.length>1?wee(e):null,s=lg(e),o=rg(a,e,0,[e.props,r]),i=uL(o);if(kc(),s(),(i||e.sp)&&!ef(e)&&XL(e),i){if(o.then(CP,CP),t)return o.then(c=>{gS(e,c)}).catch(c=>{sg(c,e,0)});e.asyncDep=o}else gS(e,o)}else x8(e)}function gS(e,t,n){Hn(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:ar(t)&&(e.setupState=RL(t)),x8(e)}function x8(e,t,n){const a=e.type;e.render||(e.render=a.render||Su);{const r=lg(e);Bc();try{UZ(e)}finally{kc(),r()}}}const _ee={get(e,t){return io(e,"get",""),e[t]}};function wee(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,_ee),slots:e.slots,emit:e.emit,expose:t}}function aw(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(RL(f_(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Op)return Op[n](e)},has(t,n){return n in t||n in Op}})):e.proxy}function yS(e,t=!0){return Hn(e)?e.displayName||e.name:e.name||t&&e.__name}function bee(e){return Hn(e)&&"__vccOpts"in e}const ne=(e,t)=>hZ(e,t,y0);function Zl(e,t,n){const a=(s,o,i)=>{b_(-1);try{return l(s,o,i)}finally{b_(1)}},r=arguments.length;return r===2?ar(t)&&!bn(t)?Ld(t)?a(e,null,[t]):a(e,t):a(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Ld(n)&&(n=[n]),a(e,t,n))}const xee="3.5.21";let _S;const SP=typeof window<"u"&&window.trustedTypes;if(SP)try{_S=SP.createPolicy("vue",{createHTML:e=>e})}catch{}const C8=_S?e=>_S.createHTML(e):e=>e,Cee="http://www.w3.org/2000/svg",See="http://www.w3.org/1998/Math/MathML",dc=typeof document<"u"?document:null,EP=dc&&dc.createElement("template"),Eee={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,a)=>{const r=t==="svg"?dc.createElementNS(Cee,e):t==="mathml"?dc.createElementNS(See,e):n?dc.createElement(e,{is:n}):dc.createElement(e);return e==="select"&&a&&a.multiple!=null&&r.setAttribute("multiple",a.multiple),r},createText:e=>dc.createTextNode(e),createComment:e=>dc.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>dc.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,a,r,s){const o=n?n.previousSibling:t.lastChild;if(r&&(r===s||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===s||!(r=r.nextSibling)););else{EP.innerHTML=C8(a==="svg"?`<svg>${e}</svg>`:a==="mathml"?`<math>${e}</math>`:e);const i=EP.content;if(a==="svg"||a==="mathml"){const c=i.firstChild;for(;c.firstChild;)i.appendChild(c.firstChild);i.removeChild(c)}t.insertBefore(i,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},td="transition",Jh="animation",kv=Symbol("_vtc"),S8={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},E8=bs({},WL,S8),Bee=e=>(e.displayName="Transition",e.props=E8,e),Md=Bee((e,{slots:t})=>Zl(CZ,B8(e),t)),kA=(e,t=[])=>{bn(e)?e.forEach(n=>n(...t)):e&&e(...t)},BP=e=>e?bn(e)?e.some(t=>t.length>1):e.length>1:!1;function B8(e){const t={};for(const L in e)L in S8||(t[L]=e[L]);if(e.css===!1)return t;const{name:n="v",type:a,duration:r,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:i=`${n}-enter-to`,appearFromClass:c=s,appearActiveClass:A=o,appearToClass:d=i,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:m=`${n}-leave-active`,leaveToClass:v=`${n}-leave-to`}=e,p=kee(r),g=p&&p[0],y=p&&p[1],{onBeforeEnter:w,onEnter:b,onEnterCancelled:x,onLeave:T,onLeaveCancelled:D,onBeforeAppear:k=w,onAppear:S=b,onAppearCancelled:E=x}=t,C=(L,H,ue,ie)=>{L._enterCancelled=ie,id(L,H?d:i),id(L,H?A:o),ue&&ue()},U=(L,H)=>{L._isLeaving=!1,id(L,f),id(L,v),id(L,m),H&&H()},F=L=>(H,ue)=>{const ie=L?S:b,Q=()=>C(H,L,ue);kA(ie,[H,Q]),kP(()=>{id(H,L?c:s),vu(H,L?d:i),BP(ie)||TP(H,a,g,Q)})};return bs(t,{onBeforeEnter(L){kA(w,[L]),vu(L,s),vu(L,o)},onBeforeAppear(L){kA(k,[L]),vu(L,c),vu(L,A)},onEnter:F(!1),onAppear:F(!0),onLeave(L,H){L._isLeaving=!0;const ue=()=>U(L,H);vu(L,f),L._enterCancelled?(vu(L,m),wS()):(wS(),vu(L,m)),kP(()=>{L._isLeaving&&(id(L,f),vu(L,v),BP(T)||TP(L,a,y,ue))}),kA(T,[L,ue])},onEnterCancelled(L){C(L,!1,void 0,!0),kA(x,[L])},onAppearCancelled(L){C(L,!0,void 0,!0),kA(E,[L])},onLeaveCancelled(L){U(L),kA(D,[L])}})}function kee(e){if(e==null)return null;if(ar(e))return[Ex(e.enter),Ex(e.leave)];{const t=Ex(e);return[t,t]}}function Ex(e){return fL(e)}function vu(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[kv]||(e[kv]=new Set)).add(t)}function id(e,t){t.split(/\s+/).forEach(a=>a&&e.classList.remove(a));const n=e[kv];n&&(n.delete(t),n.size||(e[kv]=void 0))}function kP(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Tee=0;function TP(e,t,n,a){const r=e._endId=++Tee,s=()=>{r===e._endId&&a()};if(n!=null)return setTimeout(s,n);const{type:o,timeout:i,propCount:c}=k8(e,t);if(!o)return a();const A=o+"end";let d=0;const f=()=>{e.removeEventListener(A,m),s()},m=v=>{v.target===e&&++d>=c&&f()};setTimeout(()=>{d<c&&f()},i+1),e.addEventListener(A,m)}function k8(e,t){const n=window.getComputedStyle(e),a=p=>(n[p]||"").split(", "),r=a(`${td}Delay`),s=a(`${td}Duration`),o=IP(r,s),i=a(`${Jh}Delay`),c=a(`${Jh}Duration`),A=IP(i,c);let d=null,f=0,m=0;t===td?o>0&&(d=td,f=o,m=s.length):t===Jh?A>0&&(d=Jh,f=A,m=c.length):(f=Math.max(o,A),d=f>0?o>A?td:Jh:null,m=d?d===td?s.length:c.length:0);const v=d===td&&/\b(?:transform|all)(?:,|$)/.test(a(`${td}Property`).toString());return{type:d,timeout:f,propCount:m,hasTransform:v}}function IP(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,a)=>FP(n)+FP(e[a])))}function FP(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function wS(){return document.body.offsetHeight}function Iee(e,t,n){const a=e[kv];a&&(t=(t?[t,...a]:[...a]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const C_=Symbol("_vod"),T8=Symbol("_vsh"),ii={name:"show",beforeMount(e,{value:t},{transition:n}){e[C_]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Zh(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:a}){!t!=!n&&(a?t?(a.beforeEnter(e),Zh(e,!0),a.enter(e)):a.leave(e,()=>{Zh(e,!1)}):Zh(e,t))},beforeUnmount(e,{value:t}){Zh(e,t)}};function Zh(e,t){e.style.display=t?e[C_]:"none",e[T8]=!t}const Fee=Symbol(""),Pee=/(?:^|;)\s*display\s*:/;function Dee(e,t,n){const a=e.style,r=yr(n);let s=!1;if(n&&!r){if(t)if(yr(t))for(const o of t.split(";")){const i=o.slice(0,o.indexOf(":")).trim();n[i]==null&&Gy(a,i,"")}else for(const o in t)n[o]==null&&Gy(a,o,"");for(const o in n)o==="display"&&(s=!0),Gy(a,o,n[o])}else if(r){if(t!==n){const o=a[Fee];o&&(n+=";"+o),a.cssText=n,s=Pee.test(n)}}else t&&e.removeAttribute("style");C_ in e&&(e[C_]=s?a.display:"",e[T8]&&(a.display="none"))}const PP=/\s*!important$/;function Gy(e,t,n){if(bn(n))n.forEach(a=>Gy(e,t,a));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const a=Uee(e,t);PP.test(n)?e.setProperty(eA(a),n.replace(PP,""),"important"):e[a]=n}}const DP=["Webkit","Moz","ms"],Bx={};function Uee(e,t){const n=Bx[t];if(n)return n;let a=$o(t);if(a!=="filter"&&a in e)return Bx[t]=a;a=Lu(a);for(let r=0;r<DP.length;r++){const s=DP[r]+a;if(s in e)return Bx[t]=s}return t}const UP="http://www.w3.org/1999/xlink";function RP(e,t,n,a,r,s=GJ(t)){a&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(UP,t.slice(6,t.length)):e.setAttributeNS(UP,t,n):n==null||s&&!mL(n)?e.removeAttribute(t):e.setAttribute(t,s?"":Ol(n)?String(n):n)}function NP(e,t,n,a,r){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?C8(n):n);return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const i=s==="OPTION"?e.getAttribute("value")||"":e.value,c=n==null?e.type==="checkbox"?"on":"":String(n);(i!==c||!("_value"in e))&&(e.value=c),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const i=typeof e[t];i==="boolean"?n=mL(n):n==null&&i==="string"?(n="",o=!0):i==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(r||t)}function vc(e,t,n,a){e.addEventListener(t,n,a)}function Ree(e,t,n,a){e.removeEventListener(t,n,a)}const VP=Symbol("_vei");function Nee(e,t,n,a,r=null){const s=e[VP]||(e[VP]={}),o=s[t];if(a&&o)o.value=a;else{const[i,c]=Vee(t);if(a){const A=s[t]=Oee(a,r);vc(e,i,A,c)}else o&&(Ree(e,i,o,c),s[t]=void 0)}}const LP=/(?:Once|Passive|Capture)$/;function Vee(e){let t;if(LP.test(e)){t={};let a;for(;a=e.match(LP);)e=e.slice(0,e.length-a[0].length),t[a[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):eA(e.slice(2)),t]}let kx=0;const Lee=Promise.resolve(),Mee=()=>kx||(Lee.then(()=>kx=0),kx=Date.now());function Oee(e,t){const n=a=>{if(!a._vts)a._vts=Date.now();else if(a._vts<=n.attached)return;Hl(Hee(a,n.value),t,5,[a])};return n.value=e,n.attached=Mee(),n}function Hee(e,t){if(bn(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(a=>r=>!r._stopped&&a&&a(r))}else return t}const MP=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,$ee=(e,t,n,a,r,s)=>{const o=r==="svg";t==="class"?Iee(e,a,o):t==="style"?Dee(e,n,a):W2(t)?QB(t)||Nee(e,t,n,a,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Qee(e,t,a,o))?(NP(e,t,a),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&RP(e,t,a,o,s,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!yr(a))?NP(e,$o(t),a,s,t):(t==="true-value"?e._trueValue=a:t==="false-value"&&(e._falseValue=a),RP(e,t,a,o))};function Qee(e,t,n,a){if(a)return!!(t==="innerHTML"||t==="textContent"||t in e&&MP(t)&&Hn(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return MP(t)&&yr(n)?!1:t in e}const I8=new WeakMap,F8=new WeakMap,S_=Symbol("_moveCb"),OP=Symbol("_enterCb"),Gee=e=>(delete e.props.mode,e),zee=Gee({name:"TransitionGroup",props:bs({},E8,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=Mf(),a=KL();let r,s;return ew(()=>{if(!r.length)return;const o=e.moveClass||`${e.name||"v"}-move`;if(!qee(r[0].el,n.vnode.el,o)){r=[];return}r.forEach(Kee),r.forEach(Wee);const i=r.filter(jee);wS(),i.forEach(c=>{const A=c.el,d=A.style;vu(A,o),d.transform=d.webkitTransform=d.transitionDuration="";const f=A[S_]=m=>{m&&m.target!==A||(!m||m.propertyName.endsWith("transform"))&&(A.removeEventListener("transitionend",f),A[S_]=null,id(A,o))};A.addEventListener("transitionend",f)}),r=[]}),()=>{const o=wn(e),i=B8(o);let c=o.tag||Ke;if(r=[],s)for(let A=0;A<s.length;A++){const d=s[A];d.el&&d.el instanceof Element&&(r.push(d),Vd(d,p0(d,i,a,n)),I8.set(d,d.el.getBoundingClientRect()))}s=t.default?tk(t.default()):[];for(let A=0;A<s.length;A++){const d=s[A];d.key!=null&&Vd(d,p0(d,i,a,n))}return l(c,null,s)}}}),uk=zee;function Kee(e){const t=e.el;t[S_]&&t[S_](),t[OP]&&t[OP]()}function Wee(e){F8.set(e,e.el.getBoundingClientRect())}function jee(e){const t=I8.get(e),n=F8.get(e),a=t.left-n.left,r=t.top-n.top;if(a||r){const s=e.el.style;return s.transform=s.webkitTransform=`translate(${a}px,${r}px)`,s.transitionDuration="0s",e}}function qee(e,t,n){const a=e.cloneNode(),r=e[kv];r&&r.forEach(i=>{i.split(/\s+/).forEach(c=>c&&a.classList.remove(c))}),n.split(/\s+/).forEach(i=>i&&a.classList.add(i)),a.style.display="none";const s=t.nodeType===1?t:t.parentNode;s.appendChild(a);const{hasTransform:o}=k8(a);return s.removeChild(a),o}const Od=e=>{const t=e.props["onUpdate:modelValue"]||!1;return bn(t)?n=>lv(t,n):t};function Yee(e){e.target.composing=!0}function HP(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const el=Symbol("_assign"),QA={created(e,{modifiers:{lazy:t,trim:n,number:a}},r){e[el]=Od(r);const s=a||r.props&&r.props.type==="number";vc(e,t?"change":"input",o=>{if(o.target.composing)return;let i=e.value;n&&(i=i.trim()),s&&(i=d_(i)),e[el](i)}),n&&vc(e,"change",()=>{e.value=e.value.trim()}),t||(vc(e,"compositionstart",Yee),vc(e,"compositionend",HP),vc(e,"change",HP))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:a,trim:r,number:s}},o){if(e[el]=Od(o),e.composing)return;const i=(s||e.type==="number")&&!/^0\d/.test(e.value)?d_(e.value):e.value,c=t??"";i!==c&&(document.activeElement===e&&e.type!=="range"&&(a&&t===n||r&&e.value.trim()===c)||(e.value=c))}},Xee={deep:!0,created(e,t,n){e[el]=Od(n),vc(e,"change",()=>{const a=e._modelValue,r=Tv(e),s=e.checked,o=e[el];if(bn(a)){const i=KB(a,r),c=i!==-1;if(s&&!c)o(a.concat(r));else if(!s&&c){const A=[...a];A.splice(i,1),o(A)}}else if(Zv(a)){const i=new Set(a);s?i.add(r):i.delete(r),o(i)}else o(D8(e,s))})},mounted:$P,beforeUpdate(e,t,n){e[el]=Od(n),$P(e,t,n)}};function $P(e,{value:t,oldValue:n},a){e._modelValue=t;let r;if(bn(t))r=KB(t,a.props.value)>-1;else if(Zv(t))r=t.has(a.props.value);else{if(t===n)return;r=mf(t,D8(e,!0))}e.checked!==r&&(e.checked=r)}const Jee={created(e,{value:t},n){e.checked=mf(t,n.props.value),e[el]=Od(n),vc(e,"change",()=>{e[el](Tv(e))})},beforeUpdate(e,{value:t,oldValue:n},a){e[el]=Od(a),t!==n&&(e.checked=mf(t,a.props.value))}},P8={deep:!0,created(e,{value:t,modifiers:{number:n}},a){const r=Zv(t);vc(e,"change",()=>{const s=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>n?d_(Tv(o)):Tv(o));e[el](e.multiple?r?new Set(s):s:s[0]),e._assigning=!0,_n(()=>{e._assigning=!1})}),e[el]=Od(a)},mounted(e,{value:t}){QP(e,t)},beforeUpdate(e,t,n){e[el]=Od(n)},updated(e,{value:t}){e._assigning||QP(e,t)}};function QP(e,t){const n=e.multiple,a=bn(t);if(!(n&&!a&&!Zv(t))){for(let r=0,s=e.options.length;r<s;r++){const o=e.options[r],i=Tv(o);if(n)if(a){const c=typeof i;c==="string"||c==="number"?o.selected=t.some(A=>String(A)===String(i)):o.selected=KB(t,i)>-1}else o.selected=t.has(i);else if(mf(Tv(o),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Tv(e){return"_value"in e?e._value:e.value}function D8(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const U8={created(e,t,n){G1(e,t,n,null,"created")},mounted(e,t,n){G1(e,t,n,null,"mounted")},beforeUpdate(e,t,n,a){G1(e,t,n,a,"beforeUpdate")},updated(e,t,n,a){G1(e,t,n,a,"updated")}};function Zee(e,t){switch(e){case"SELECT":return P8;case"TEXTAREA":return QA;default:switch(t){case"checkbox":return Xee;case"radio":return Jee;default:return QA}}}function G1(e,t,n,a,r){const o=Zee(e.tagName,n.props&&n.props.type)[r];o&&o(e,t,n,a)}const ete=["ctrl","shift","alt","meta"],tte={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>ete.some(n=>e[`${n}Key`]&&!t.includes(n))},vn=(e,t)=>{const n=e._withMods||(e._withMods={}),a=t.join(".");return n[a]||(n[a]=((r,...s)=>{for(let o=0;o<t.length;o++){const i=tte[t[o]];if(i&&i(r,t))return}return e(r,...s)}))},nte={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},GP=(e,t)=>{const n=e._withKeys||(e._withKeys={}),a=t.join(".");return n[a]||(n[a]=(r=>{if(!("key"in r))return;const s=eA(r.key);if(t.some(o=>o===s||nte[o]===s))return e(r)}))},ate=bs({patchProp:$ee},Eee);let zP;function R8(){return zP||(zP=WZ(ate))}const N8=((...e)=>{R8().render(...e)}),rte=((...e)=>{const t=R8().createApp(...e),{mount:n}=t;return t.mount=a=>{const r=ote(a);if(!r)return;const s=t._component;!Hn(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,ste(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},t});function ste(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function ote(e){return yr(e)?document.querySelector(e):e}function go(e,t){let n;function a(){n=Rd(),n.run(()=>t.length?t(()=>{n?.stop(),a()}):t())}je(e,r=>{r&&!n?a():r||(n?.stop(),n=void 0)},{immediate:!0}),us(()=>{n?.stop()})}const Ba=typeof window<"u",ck=Ba&&"IntersectionObserver"in window,ite=Ba&&("ontouchstart"in window||window.navigator.maxTouchPoints>0),KP=Ba&&"EyeDropper"in window,lte=Ba&&"matchMedia"in window&&typeof window.matchMedia=="function";function WP(e,t,n){ute(e,t),t.set(e,n)}function ute(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function jP(e,t,n){return e.set(V8(e,t),n),n}function ic(e,t){return e.get(V8(e,t))}function V8(e,t,n){if(typeof e=="function"?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function L8(e,t,n){const a=t.length-1;if(a<0)return e===void 0?n:e;for(let r=0;r<a;r++){if(e==null)return n;e=e[t[r]]}return e==null||e[t[a]]===void 0?n:e[t[a]]}function _s(e,t){if(e===t)return!0;if(e instanceof Date&&t instanceof Date&&e.getTime()!==t.getTime()||e!==Object(e)||t!==Object(t))return!1;const n=Object.keys(e);return n.length!==Object.keys(t).length?!1:n.every(a=>_s(e[a],t[a]))}function vf(e,t,n){return e==null||!t||typeof t!="string"?n:e[t]!==void 0?e[t]:(t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,""),L8(e,t.split("."),n))}function Vr(e,t,n){if(t===!0)return e===void 0?n:e;if(t==null||typeof t=="boolean")return n;if(e!==Object(e)){if(typeof t!="function")return n;const r=t(e,n);return typeof r>"u"?n:r}if(typeof t=="string")return vf(e,t,n);if(Array.isArray(t))return L8(e,t,n);if(typeof t!="function")return n;const a=t(e,n);return typeof a>"u"?n:a}function xi(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.from({length:e},(n,a)=>t+a)}function Kt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"px";if(e==null||e==="")return;const n=Number(e);return isNaN(n)?String(e):isFinite(n)?`${n}${t}`:void 0}function _0(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function qP(e){let t;return e!==null&&typeof e=="object"&&((t=Object.getPrototypeOf(e))===Object.prototype||t===null)}function dk(e){if(e&&"$el"in e){const t=e.$el;return t?.nodeType===Node.TEXT_NODE?t.nextElementSibling:t}return e}const bS=Object.freeze({enter:"Enter",tab:"Tab",delete:"Delete",esc:"Escape",space:"Space",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",end:"End",home:"Home",del:"Delete",backspace:"Backspace",insert:"Insert",pageup:"PageUp",pagedown:"PageDown",shift:"Shift"});function M8(e){return Object.keys(e)}function GA(e,t){return t.every(n=>e.hasOwnProperty(n))}function Mc(e,t){const n={};for(const a of t)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function xS(e,t,n){const a=Object.create(null),r=Object.create(null);for(const s in e)t.some(o=>o instanceof RegExp?o.test(s):o===s)?a[s]=e[s]:r[s]=e[s];return[a,r]}function Ma(e,t){const n={...e};return t.forEach(a=>delete n[a]),n}const O8=/^on[^a-z]/,Ak=e=>O8.test(e),cte=["onAfterscriptexecute","onAnimationcancel","onAnimationend","onAnimationiteration","onAnimationstart","onAuxclick","onBeforeinput","onBeforescriptexecute","onChange","onClick","onCompositionend","onCompositionstart","onCompositionupdate","onContextmenu","onCopy","onCut","onDblclick","onFocusin","onFocusout","onFullscreenchange","onFullscreenerror","onGesturechange","onGestureend","onGesturestart","onGotpointercapture","onInput","onKeydown","onKeypress","onKeyup","onLostpointercapture","onMousedown","onMousemove","onMouseout","onMouseover","onMouseup","onMousewheel","onPaste","onPointercancel","onPointerdown","onPointerenter","onPointerleave","onPointermove","onPointerout","onPointerover","onPointerup","onReset","onSelect","onSubmit","onTouchcancel","onTouchend","onTouchmove","onTouchstart","onTransitioncancel","onTransitionend","onTransitionrun","onTransitionstart","onWheel"],dte=["ArrowUp","ArrowDown","ArrowRight","ArrowLeft","Enter","Escape","Tab"," "];function Ate(e){return e.isComposing&&dte.includes(e.key)}function tA(e){const[t,n]=xS(e,[O8]),a=Ma(t,cte),[r,s]=xS(n,["class","style","id",/^data-/]);return Object.assign(r,t),Object.assign(s,a),[r,s]}function gr(e){return e==null?[]:Array.isArray(e)?e:[e]}function H8(e,t){let n=0;const a=function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];clearTimeout(n),n=setTimeout(()=>e(...s),Qe(t))};return a.clear=()=>{clearTimeout(n)},a.immediate=e,a}function Ja(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.max(t,Math.min(n,e))}function YP(e){const t=e.toString().trim();return t.includes(".")?t.length-t.indexOf(".")-1:0}function XP(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0";return e+n.repeat(Math.max(0,t-e.length))}function JP(e,t){return(arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0").repeat(Math.max(0,t-e.length))+e}function fte(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const n=[];let a=0;for(;a<e.length;)n.push(e.substr(a,t)),a+=t;return n}function ZP(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;if(e<t)return`${e} B`;const n=t===1024?["Ki","Mi","Gi"]:["k","M","G"];let a=-1;for(;Math.abs(e)>=t&&a<n.length-1;)e/=t,++a;return`${e.toFixed(1)} ${n[a]}B`}function mo(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const a={};for(const r in e)a[r]=e[r];for(const r in t){const s=e[r],o=t[r];if(qP(s)&&qP(o)){a[r]=mo(s,o,n);continue}if(n&&Array.isArray(s)&&Array.isArray(o)){a[r]=n(s,o);continue}a[r]=o}return a}function $8(e){return e.map(t=>t.type===Ke?$8(t.children):t).flat()}function tf(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(tf.cache.has(e))return tf.cache.get(e);const t=e.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase();return tf.cache.set(e,t),t}tf.cache=new Map;function Ym(e,t){if(!t||typeof t!="object")return[];if(Array.isArray(t))return t.map(n=>Ym(e,n)).flat(1);if(t.suspense)return Ym(e,t.ssContent);if(Array.isArray(t.children))return t.children.map(n=>Ym(e,n)).flat(1);if(t.component){if(Object.getOwnPropertySymbols(t.component.provides).includes(e))return[t.component];if(t.component.subTree)return Ym(e,t.component.subTree).flat(1)}return[]}var Em=new WeakMap,TA=new WeakMap;class Q8{constructor(t){WP(this,Em,[]),WP(this,TA,0),this.size=t}get isFull(){return ic(Em,this).length===this.size}push(t){ic(Em,this)[ic(TA,this)]=t,jP(TA,this,(ic(TA,this)+1)%this.size)}values(){return ic(Em,this).slice(ic(TA,this)).concat(ic(Em,this).slice(0,ic(TA,this)))}clear(){ic(Em,this).length=0,jP(TA,this,0)}}function mte(e){return"touches"in e?{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}:{clientX:e.clientX,clientY:e.clientY}}function fk(e){const t=os({});_r(()=>{const a=e();for(const r in a)t[r]=a[r]},{flush:"sync"});const n={};for(const a in t)n[a]=Xe(()=>t[a]);return n}function E_(e,t){return e.includes(t)}function G8(e){return e[2].toLowerCase()+e.slice(3)}const Ds=()=>[Function,Array];function eD(e,t){return t="on"+Lu(t),!!(e[t]||e[`${t}Once`]||e[`${t}Capture`]||e[`${t}OnceCapture`]||e[`${t}CaptureOnce`])}function rw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];if(Array.isArray(e))for(const r of e)r(...n);else typeof e=="function"&&e(...n)}function w0(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=["button","[href]",'input:not([type="hidden"])',"select","textarea","[tabindex]"].map(a=>`${a}${t?':not([tabindex="-1"])':""}:not([disabled])`).join(", ");return[...e.querySelectorAll(n)]}function z8(e,t,n){let a,r=e.indexOf(document.activeElement);const s=t==="next"?1:-1;do r+=s,a=e[r];while((!a||a.offsetParent==null||!(n?.(a)??!0))&&r<e.length&&r>=0);return a}function nf(e,t){const n=w0(e);if(t==null)(e===document.activeElement||!e.contains(document.activeElement))&&n[0]?.focus();else if(t==="first")n[0]?.focus();else if(t==="last")n.at(-1)?.focus();else if(typeof t=="number")n[t]?.focus();else{const a=z8(n,t);a?a.focus():nf(e,t==="next"?"first":"last")}}function z1(e){return e==null||typeof e=="string"&&e.trim()===""}function K8(){}function Iv(e,t){if(!(Ba&&typeof CSS<"u"&&typeof CSS.supports<"u"&&CSS.supports(`selector(${t})`)))return null;try{return!!e&&e.matches(t)}catch{return null}}function sw(e){return e.some(t=>Ld(t)?t.type===is?!1:t.type!==Ke||sw(t.children):!0)?e:null}function Tx(e,t,n){return e?.(t)??n?.(t)}function vte(e,t){if(!Ba||e===0)return t(),()=>{};const n=window.setTimeout(t,e);return()=>window.clearTimeout(n)}function hte(e,t){const n=e.clientX,a=e.clientY,r=t.getBoundingClientRect(),s=r.left,o=r.top,i=r.right,c=r.bottom;return n>=s&&n<=i&&a>=o&&a<=c}function B_(){const e=Ht(),t=n=>{e.value=n};return Object.defineProperty(t,"value",{enumerable:!0,get:()=>e.value,set:n=>e.value=n}),Object.defineProperty(t,"el",{enumerable:!0,get:()=>dk(e.value)}),t}function Fv(e){const t=e.key.length===1,n=!e.ctrlKey&&!e.metaKey&&!e.altKey;return t&&n}function CS(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="bigint"}function k_(e){return"\\^$*+?.()|{}[]".includes(e)?`\\${e}`:e}function pte(e,t,n){const a=new RegExp(`[\\d\\-${k_(n)}]`),r=e.split("").filter(o=>a.test(o)).filter((o,i,c)=>i===0&&/[-]/.test(o)||o===n&&i===c.indexOf(o)||/\d/.test(o)).join("");if(t===0)return r.split(n)[0];const s=new RegExp(`${k_(n)}\\d`);if(t!==null&&s.test(r)){const o=r.split(n);return[o[0],o[1].substring(0,t)].join(n)}return r}function gte(e){const t={};for(const n in e)t[$o(n)]=e[n];return t}function yte(e){const t=["checked","disabled"];return Object.fromEntries(Object.entries(e).filter(n=>{let[a,r]=n;return t.includes(a)?!!r:r!==void 0}))}const W8=["top","bottom"],_te=["start","end","left","right"];function SS(e,t){let[n,a]=e.split(" ");return a||(a=E_(W8,n)?"start":E_(_te,n)?"top":"center"),{side:ES(n,t),align:ES(a,t)}}function ES(e,t){return e==="start"?t?"right":"left":e==="end"?t?"left":"right":e}function Ix(e){return{side:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.side],align:e.align}}function Fx(e){return{side:e.side,align:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.align]}}function tD(e){return{side:e.align,align:e.side}}function nD(e){return E_(W8,e.side)?"y":"x"}class Eu{constructor(t){let{x:n,y:a,width:r,height:s}=t;this.x=n,this.y=a,this.width=r,this.height=s}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function aD(e,t){return{x:{before:Math.max(0,t.left-e.left),after:Math.max(0,e.right-t.right)},y:{before:Math.max(0,t.top-e.top),after:Math.max(0,e.bottom-t.bottom)}}}function j8(e){return Array.isArray(e)?new Eu({x:e[0],y:e[1],width:0,height:0}):e.getBoundingClientRect()}function wte(e){if(e===document.documentElement)return visualViewport?new Eu({x:visualViewport.scale>1?0:visualViewport.offsetLeft,y:visualViewport.scale>1?0:visualViewport.offsetTop,width:visualViewport.width*visualViewport.scale,height:visualViewport.height*visualViewport.scale}):new Eu({x:0,y:0,width:document.documentElement.clientWidth,height:document.documentElement.clientHeight});{const t=e.getBoundingClientRect();return new Eu({x:t.x,y:t.y,width:e.clientWidth,height:e.clientHeight})}}function mk(e){const t=e.getBoundingClientRect(),n=getComputedStyle(e),a=n.transform;if(a){let r,s,o,i,c;if(a.startsWith("matrix3d("))r=a.slice(9,-1).split(/, /),s=Number(r[0]),o=Number(r[5]),i=Number(r[12]),c=Number(r[13]);else if(a.startsWith("matrix("))r=a.slice(7,-1).split(/, /),s=Number(r[0]),o=Number(r[3]),i=Number(r[4]),c=Number(r[5]);else return new Eu(t);const A=n.transformOrigin,d=t.x-i-(1-s)*parseFloat(A),f=t.y-c-(1-o)*parseFloat(A.slice(A.indexOf(" ")+1)),m=s?t.width/s:e.offsetWidth+1,v=o?t.height/o:e.offsetHeight+1;return new Eu({x:d,y:f,width:m,height:v})}else return new Eu(t)}function zA(e,t,n){if(typeof e.animate>"u")return{finished:Promise.resolve()};let a;try{a=e.animate(t,n)}catch{return{finished:Promise.resolve()}}return typeof a.finished>"u"&&(a.finished=new Promise(r=>{a.onfinish=()=>{r(a)}})),a}const zy=new WeakMap;function bte(e,t){Object.keys(t).forEach(n=>{if(Ak(n)){const a=G8(n),r=zy.get(e);if(t[n]==null)r?.forEach(s=>{const[o,i]=s;o===a&&(e.removeEventListener(a,i),r.delete(s))});else if(!r||![...r].some(s=>s[0]===a&&s[1]===t[n])){e.addEventListener(a,t[n]);const s=r||new Set;s.add([a,t[n]]),zy.has(e)||zy.set(e,s)}}else t[n]==null?e.removeAttribute(n):e.setAttribute(n,t[n])})}function xte(e,t){Object.keys(t).forEach(n=>{if(Ak(n)){const a=G8(n),r=zy.get(e);r?.forEach(s=>{const[o,i]=s;o===a&&(e.removeEventListener(a,i),r.delete(s))})}else e.removeAttribute(n)})}const Bm=2.4,rD=.2126729,sD=.7151522,oD=.072175,Cte=.55,Ste=.58,Ete=.57,Bte=.62,K1=.03,iD=1.45,kte=5e-4,Tte=1.25,Ite=1.25,lD=.078,uD=12.82051282051282,W1=.06,cD=.001;function dD(e,t){const n=(e.r/255)**Bm,a=(e.g/255)**Bm,r=(e.b/255)**Bm,s=(t.r/255)**Bm,o=(t.g/255)**Bm,i=(t.b/255)**Bm;let c=n*rD+a*sD+r*oD,A=s*rD+o*sD+i*oD;if(c<=K1&&(c+=(K1-c)**iD),A<=K1&&(A+=(K1-A)**iD),Math.abs(A-c)<kte)return 0;let d;if(A>c){const f=(A**Cte-c**Ste)*Tte;d=f<cD?0:f<lD?f-f*uD*W1:f-W1}else{const f=(A**Bte-c**Ete)*Ite;d=f>-cD?0:f>-lD?f-f*uD*W1:f+W1}return d*100}function q8(e,t){t=Array.isArray(t)?t.slice(0,-1).map(n=>`'${n}'`).join(", ")+` or '${t.at(-1)}'`:`'${t}'`}const T_=.20689655172413793,Fte=e=>e>T_**3?Math.cbrt(e):e/(3*T_**2)+4/29,Pte=e=>e>T_?e**3:3*T_**2*(e-4/29);function Y8(e){const t=Fte,n=t(e[1]);return[116*n-16,500*(t(e[0]/.95047)-n),200*(n-t(e[2]/1.08883))]}function X8(e){const t=Pte,n=(e[0]+16)/116;return[t(n+e[1]/500)*.95047,t(n),t(n-e[2]/200)*1.08883]}const Dte=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],Ute=e=>e<=.0031308?e*12.92:1.055*e**(1/2.4)-.055,Rte=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],Nte=e=>e<=.04045?e/12.92:((e+.055)/1.055)**2.4;function J8(e){const t=Array(3),n=Ute,a=Dte;for(let r=0;r<3;++r)t[r]=Math.round(Ja(n(a[r][0]*e[0]+a[r][1]*e[1]+a[r][2]*e[2]))*255);return{r:t[0],g:t[1],b:t[2]}}function vk(e){let{r:t,g:n,b:a}=e;const r=[0,0,0],s=Nte,o=Rte;t=s(t/255),n=s(n/255),a=s(a/255);for(let i=0;i<3;++i)r[i]=o[i][0]*t+o[i][1]*n+o[i][2]*a;return r}function BS(e){return!!e&&/^(#|var\(--|(rgb|hsl)a?\()/.test(e)}function Vte(e){return BS(e)&&!/^((rgb|hsl)a?\()?var\(--/.test(e)}const AD=/^(?<fn>(?:rgb|hsl)a?)\((?<values>.+)\)/,Lte={rgb:(e,t,n,a)=>({r:e,g:t,b:n,a}),rgba:(e,t,n,a)=>({r:e,g:t,b:n,a}),hsl:(e,t,n,a)=>fD({h:e,s:t,l:n,a}),hsla:(e,t,n,a)=>fD({h:e,s:t,l:n,a}),hsv:(e,t,n,a)=>Fu({h:e,s:t,v:n,a}),hsva:(e,t,n,a)=>Fu({h:e,s:t,v:n,a})};function Ci(e){if(typeof e=="number")return{r:(e&16711680)>>16,g:(e&65280)>>8,b:e&255};if(typeof e=="string"&&AD.test(e)){const{groups:t}=e.match(AD),{fn:n,values:a}=t,r=a.split(/,\s*|\s*\/\s*|\s+/).map((s,o)=>s.endsWith("%")||o>0&&o<3&&["hsl","hsla","hsv","hsva"].includes(n)?parseFloat(s)/100:parseFloat(s));return Lte[n](...r)}else if(typeof e=="string"){let t=e.startsWith("#")?e.slice(1):e;return[3,4].includes(t.length)?t=t.split("").map(n=>n+n).join(""):[6,8].includes(t.length),n6(t)}else if(typeof e=="object"){if(GA(e,["r","g","b"]))return e;if(GA(e,["h","s","l"]))return Fu(hk(e));if(GA(e,["h","s","v"]))return Fu(e)}throw new TypeError(`Invalid color: ${e==null?e:String(e)||e.constructor.name}
Expected #hex, #hexa, rgb(), rgba(), hsl(), hsla(), object or number`)}function Fu(e){const{h:t,s:n,v:a,a:r}=e,s=i=>{const c=(i+t/60)%6;return a-a*n*Math.max(Math.min(c,4-c,1),0)},o=[s(5),s(3),s(1)].map(i=>Math.round(i*255));return{r:o[0],g:o[1],b:o[2],a:r}}function fD(e){return Fu(hk(e))}function ug(e){if(!e)return{h:0,s:1,v:1,a:1};const t=e.r/255,n=e.g/255,a=e.b/255,r=Math.max(t,n,a),s=Math.min(t,n,a);let o=0;r!==s&&(r===t?o=60*(0+(n-a)/(r-s)):r===n?o=60*(2+(a-t)/(r-s)):r===a&&(o=60*(4+(t-n)/(r-s)))),o<0&&(o=o+360);const i=r===0?0:(r-s)/r,c=[o,i,r];return{h:c[0],s:c[1],v:c[2],a:e.a}}function kS(e){const{h:t,s:n,v:a,a:r}=e,s=a-a*n/2,o=s===1||s===0?0:(a-s)/Math.min(s,1-s);return{h:t,s:o,l:s,a:r}}function hk(e){const{h:t,s:n,l:a,a:r}=e,s=a+n*Math.min(a,1-a),o=s===0?0:2-2*a/s;return{h:t,s:o,v:s,a:r}}function Z8(e){let{r:t,g:n,b:a,a:r}=e;return r===void 0?`rgb(${t}, ${n}, ${a})`:`rgba(${t}, ${n}, ${a}, ${r})`}function e6(e){return Z8(Fu(e))}function j1(e){const t=Math.round(e).toString(16);return("00".substr(0,2-t.length)+t).toUpperCase()}function t6(e){let{r:t,g:n,b:a,a:r}=e;return`#${[j1(t),j1(n),j1(a),r!==void 0?j1(Math.round(r*255)):""].join("")}`}function n6(e){e=Ote(e);let[t,n,a,r]=fte(e,2).map(s=>parseInt(s,16));return r=r===void 0?r:r/255,{r:t,g:n,b:a,a:r}}function Mte(e){const t=n6(e);return ug(t)}function a6(e){return t6(Fu(e))}function Ote(e){return e.startsWith("#")&&(e=e.slice(1)),e=e.replace(/([^0-9a-f])/gi,"F"),(e.length===3||e.length===4)&&(e=e.split("").map(t=>t+t).join("")),e.length!==6&&(e=XP(XP(e,6),8,"F")),e}function Hte(e,t){const n=Y8(vk(e));return n[0]=n[0]+t*10,J8(X8(n))}function $te(e,t){const n=Y8(vk(e));return n[0]=n[0]-t*10,J8(X8(n))}function TS(e){const t=Ci(e);return vk(t)[1]}function Qte(e,t){const n=TS(e),a=TS(t),r=Math.max(n,a),s=Math.min(n,a);return(r+.05)/(s+.05)}function r6(e){const t=Math.abs(dD(Ci(0),Ci(e)));return Math.abs(dD(Ci(16777215),Ci(e)))>Math.min(t,50)?"#fff":"#000"}function lt(e,t){return n=>Object.keys(e).reduce((a,r)=>{const o=typeof e[r]=="object"&&e[r]!=null&&!Array.isArray(e[r])?e[r]:{type:e[r]};return n&&r in n?a[r]={...o,default:n[r]}:a[r]=o,t&&!a[r].source&&(a[r].source=t),a},{})}const Jt=lt({class:[String,Array,Object],style:{type:[String,Array,Object],default:null}},"component");function Pr(e,t){const n=Mf();if(!n)throw new Error(`[Vuetify] ${e} must be called from inside a setup function`);return n}function Mu(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"composables";const t=Pr(e).type;return tf(t?.aliasName||t?.name)}function Gte(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Pr("injectSelf");const{provides:n}=t;if(n&&e in n)return n[e]}const Pv=Symbol.for("vuetify:defaults");function zte(e){return V(e)}function pk(){const e=Tn(Pv);if(!e)throw new Error("[Vuetify] Could not find defaults instance");return e}function wr(e,t){const n=pk(),a=V(e),r=ne(()=>{if(Qe(t?.disabled))return n.value;const o=Qe(t?.scoped),i=Qe(t?.reset),c=Qe(t?.root);if(a.value==null&&!(o||i||c))return n.value;let A=mo(a.value,{prev:n.value});if(o)return A;if(i||c){const d=Number(i||1/0);for(let f=0;f<=d&&!(!A||!("prev"in A));f++)A=A.prev;return A&&typeof c=="string"&&c in A&&(A=mo(mo(A,{prev:A}),A[c])),A}return A.prev?mo(A.prev,A):A});return La(Pv,r),r}function Kte(e,t){return e.props&&(typeof e.props[t]<"u"||typeof e.props[tf(t)]<"u")}function Wte(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:pk();const a=Pr("useDefaults");if(t=t??a.type.name??a.type.__name,!t)throw new Error("[Vuetify] Could not determine component name");const r=ne(()=>n.value?.[e._as??t]),s=new Proxy(e,{get(c,A){const d=Reflect.get(c,A);if(A==="class"||A==="style")return[r.value?.[A],d].filter(v=>v!=null);if(Kte(a.vnode,A))return d;const f=r.value?.[A];if(f!==void 0)return f;const m=n.value?.global?.[A];return m!==void 0?m:d}}),o=Ht();_r(()=>{if(r.value){const c=Object.entries(r.value).filter(A=>{let[d]=A;return d.startsWith(d[0].toUpperCase())});o.value=c.length?Object.fromEntries(c):void 0}else o.value=void 0});function i(){const c=Gte(Pv,a);La(Pv,ne(()=>o.value?mo(c?.value??{},o.value):c?.value))}return{props:s,provideSubDefaults:i}}function Fi(e){if(e._setup=e._setup??e.setup,!e.name)return e;if(e._setup){e.props=lt(e.props??{},e.name)();const t=Object.keys(e.props).filter(n=>n!=="class"&&n!=="style");e.filterProps=function(a){return Mc(a,t)},e.props._as=String,e.setup=function(a,r){const s=pk();if(!s.value)return e._setup(a,r);const{props:o,provideSubDefaults:i}=Wte(a,a._as??e.name,s),c=e._setup(o,r);return i(),c}}return e}function gt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return t=>(e?Fi:nk)(t)}function jte(e,t){return t.props=e,t}function Oc(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",n=arguments.length>2?arguments[2]:void 0;return gt()({name:n??Lu($o(e.replace(/__/g,"-"))),props:{tag:{type:String,default:t},...Jt()},setup(a,r){let{slots:s}=r;return()=>Zl(a.tag,{class:[e,a.class],style:a.style},s.default?.())}})}function s6(e){if(typeof e.getRootNode!="function"){for(;e.parentNode;)e=e.parentNode;return e!==document?null:document}const t=e.getRootNode();return t!==document&&t.getRootNode({composed:!0})!==document?null:t}const b0="cubic-bezier(0.4, 0, 0.2, 1)",qte="cubic-bezier(0.0, 0, 0.2, 1)",Yte="cubic-bezier(0.4, 0, 1, 1)",Xte={linear:e=>e,easeInQuad:e=>e**2,easeOutQuad:e=>e*(2-e),easeInOutQuad:e=>e<.5?2*e**2:-1+(4-2*e)*e,easeInCubic:e=>e**3,easeOutCubic:e=>--e**3+1,easeInOutCubic:e=>e<.5?4*e**3:(e-1)*(2*e-2)*(2*e-2)+1,easeInQuart:e=>e**4,easeOutQuart:e=>1- --e**4,easeInOutQuart:e=>e<.5?8*e**4:1-8*--e**4,easeInQuint:e=>e**5,easeOutQuint:e=>1+--e**5,easeInOutQuint:e=>e<.5?16*e**5:1+16*--e**5};function mD(e,t,n){return Object.keys(e).filter(a=>Ak(a)&&a.endsWith(t)).reduce((a,r)=>(a[r.slice(0,-t.length)]=s=>e[r](s,n(s)),a),{})}function gk(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(;e;){if(t?Jte(e):yk(e))return e;e=e.parentElement}return document.scrollingElement}function I_(e,t){const n=[];if(t&&e&&!t.contains(e))return n;for(;e&&(yk(e)&&n.push(e),e!==t);)e=e.parentElement;return n}function yk(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e),n=t.overflowY==="scroll"||t.overflowY==="auto"&&e.scrollHeight>e.clientHeight,a=t.overflowX==="scroll"||t.overflowX==="auto"&&e.scrollWidth>e.clientWidth;return n||a}function Jte(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e);return["scroll","auto"].includes(t.overflowY)}function Zte(e){let{depth:t,isLast:n,isLastGroup:a,leafLinks:r,separateRoots:s,parentIndentLines:o,variant:i}=e;if(!o||!t)return{leaf:void 0,node:void 0,children:o};if(i==="simple")return{leaf:[...o,"line"],node:[...o,"line"],children:[...o,"line"]};const c=n&&(!a||s||t>1);return{leaf:[...o,c?"last-leaf":"leaf",...r?["leaf-link"]:[]],node:[...o,c?"last-leaf":"leaf"],children:[...o,c?"none":"line"]}}function ene(e){for(;e;){if(window.getComputedStyle(e).position==="fixed")return!0;e=e.offsetParent}return!1}function St(e){const t=Pr("useRender");t.render=e}function ln(e,t,n){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:f=>f,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:f=>f;const s=Pr("useProxiedModel"),o=V(e[t]!==void 0?e[t]:n),i=tf(t),A=ne(i!==t?()=>(e[t],!!((s.vnode.props?.hasOwnProperty(t)||s.vnode.props?.hasOwnProperty(i))&&(s.vnode.props?.hasOwnProperty(`onUpdate:${t}`)||s.vnode.props?.hasOwnProperty(`onUpdate:${i}`)))):()=>(e[t],!!(s.vnode.props?.hasOwnProperty(t)&&s.vnode.props?.hasOwnProperty(`onUpdate:${t}`))));go(()=>!A.value,()=>{je(()=>e[t],f=>{o.value=f})});const d=ne({get(){const f=e[t];return a(A.value?f:o.value)},set(f){const m=r(f),v=wn(A.value?e[t]:o.value);v===m||a(v)===f||(o.value=m,s?.emit(`update:${t}`,m))}});return Object.defineProperty(d,"externalValue",{get:()=>A.value?e[t]:o.value}),d}const tne={badge:"Badge",open:"Open",close:"Close",dismiss:"Dismiss",confirmEdit:{ok:"OK",cancel:"Cancel"},dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},dateRangeInput:{divider:"to"},datePicker:{itemsSelected:"{0} selected",range:{title:"Select dates",header:"Enter dates"},title:"Select date",header:"Enter date",input:{placeholder:"Enter date"},ariaLabel:{previousMonth:"Previous month",nextMonth:"Next month",selectYear:"Select year",selectDate:"{0}",currentDate:"Today, {0}"}},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more",today:"Today"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action",otp:"Please enter OTP character {0}"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},fileUpload:{title:"Drag and drop files here",divider:"or",browse:"Browse Files"},timePicker:{am:"AM",pm:"PM",title:"Select Time"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Go to page {0}",currentPage:"Page {0}, Current page",first:"First page",last:"Last page"}},stepper:{next:"Next",prev:"Previous"},rating:{ariaLabel:{item:"Rating {0} of {1}"}},loading:"Loading...",infiniteScroll:{loadMore:"Load more",empty:"No more"},rules:{required:"This field is required",email:"Please enter a valid email",number:"This field can only contain numbers",integer:"This field can only contain integer values",capital:"This field can only contain uppercase letters",maxLength:"You must enter a maximum of {0} characters",minLength:"You must enter a minimum of {0} characters",strictLength:"The length of the entered field is invalid",exclude:"The {0} character is not allowed",notEmpty:"Please choose at least one value",pattern:"Invalid format"},hotkey:{then:"then",ctrl:"Ctrl",command:"Command",space:"Space",shift:"Shift",alt:"Alt",enter:"Enter",escape:"Escape",upArrow:"Up Arrow",downArrow:"Down Arrow",leftArrow:"Left Arrow",rightArrow:"Right Arrow",backspace:"Backspace",option:"Option",plus:"plus",shortcut:"Keyboard shortcut: {0}"},video:{play:"Play",pause:"Pause",seek:"Seek",volume:"Volume",showVolume:"Show volume control",mute:"Mute",unmute:"Unmute",enterFullscreen:"Full screen",exitFullscreen:"Exit full screen"},colorPicker:{ariaLabel:{eyedropper:"Select color with eyedropper",hueSlider:"Hue",alphaSlider:"Alpha",redInput:"Red value",greenInput:"Green value",blueInput:"Blue value",alphaInput:"Alpha value",hueInput:"Hue value",saturationInput:"Saturation value",lightnessInput:"Lightness value",hexInput:"HEX value",hexaInput:"HEX with alpha value",changeFormat:"Change color format"}}},vD="$vuetify.",hD=(e,t)=>e.replace(/\{(\d+)\}/g,(n,a)=>String(t[Number(a)])),o6=(e,t,n)=>function(a){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];if(!a.startsWith(vD))return hD(a,s);const i=a.replace(vD,""),c=e.value&&n.value[e.value],A=t.value&&n.value[t.value];let d=vf(c,i,null);return d||(`${a}${e.value}`,d=vf(A,i,null)),d||(d=a),typeof d!="string"&&(d=a),hD(d,s)};function _k(e,t){return(n,a)=>new Intl.NumberFormat([e.value,t.value],a).format(n)}function i6(e,t){return _k(e,t)(.1).includes(",")?",":"."}function Px(e,t,n){const a=ln(e,t,e[t]??n.value);return a.value=e[t]??n.value,je(n,r=>{e[t]==null&&(a.value=n.value)}),a}function l6(e){return t=>{const n=Px(t,"locale",e.current),a=Px(t,"fallback",e.fallback),r=Px(t,"messages",e.messages);return{name:"vuetify",current:n,fallback:a,messages:r,decimalSeparator:Xe(()=>i6(n,a)),t:o6(n,a,r),n:_k(n,a),provide:l6({current:n,fallback:a,messages:r})}}}function nne(e){const t=Ht(e?.locale??"en"),n=Ht(e?.fallback??"en"),a=V({en:tne,...e?.messages});return{name:"vuetify",current:t,fallback:n,messages:a,decimalSeparator:Xe(()=>e?.decimalSeparator??i6(t,n)),t:o6(t,n,a),n:_k(t,n),provide:l6({current:t,fallback:n,messages:a})}}const Dv=Symbol.for("vuetify:locale");function ane(e){return e.name!=null}function rne(e){const t=e?.adapter&&ane(e?.adapter)?e?.adapter:nne(e),n=ine(t,e);return{...t,...n}}function Oa(){const e=Tn(Dv);if(!e)throw new Error("[Vuetify] Could not find injected locale instance");return e}function sne(e){const t=Tn(Dv);if(!t)throw new Error("[Vuetify] Could not find injected locale instance");const n=t.provide(e),a=lne(n,t.rtl,e),r={...n,...a};return La(Dv,r),r}function one(){return{af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!0,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,km:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1}}function ine(e,t){const n=V(t?.rtl??one()),a=ne(()=>n.value[e.current.value]??!1);return{isRtl:a,rtl:n,rtlClasses:Xe(()=>`v-locale--is-${a.value?"rtl":"ltr"}`)}}function lne(e,t,n){const a=ne(()=>n.rtl??t.value[e.current.value]??!1);return{isRtl:a,rtl:t,rtlClasses:Xe(()=>`v-locale--is-${a.value?"rtl":"ltr"}`)}}function Xr(){const e=Tn(Dv);if(!e)throw new Error("[Vuetify] Could not find injected rtl instance");return{isRtl:e.isRtl,rtlClasses:e.rtlClasses}}function cg(e){const t=e.slice(-2).toUpperCase();switch(!0){case e==="GB-alt-variant":return{firstDay:0,firstWeekSize:4};case e==="001":return{firstDay:1,firstWeekSize:1};case`AG AS BD BR BS BT BW BZ CA CO DM DO ET GT GU HK HN ID IL IN JM JP KE
    KH KR LA MH MM MO MT MX MZ NI NP PA PE PH PK PR PY SA SG SV TH TT TW UM US
    VE VI WS YE ZA ZW`.includes(t):return{firstDay:0,firstWeekSize:1};case`AI AL AM AR AU AZ BA BM BN BY CL CM CN CR CY EC GE HR KG KZ LB LK LV
    MD ME MK MN MY NZ RO RS SI TJ TM TR UA UY UZ VN XK`.includes(t):return{firstDay:1,firstWeekSize:1};case`AD AN AT AX BE BG CH CZ DE DK EE ES FI FJ FO FR GB GF GP GR HU IE IS
    IT LI LT LU MC MQ NL NO PL RE RU SE SK SM VA`.includes(t):return{firstDay:1,firstWeekSize:4};case"AE AF BH DJ DZ EG IQ IR JO KW LY OM QA SD SY".includes(t):return{firstDay:6,firstWeekSize:1};case t==="MV":return{firstDay:5,firstWeekSize:1};case t==="PT":return{firstDay:0,firstWeekSize:4};default:return null}}function une(e,t,n){const a=[];let r=[];const s=u6(e),o=c6(e),i=n??cg(t)?.firstDay??0,c=(s.getDay()-i+7)%7,A=(o.getDay()-i+7)%7;for(let d=0;d<c;d++){const f=new Date(s);f.setDate(f.getDate()-(c-d)),r.push(f)}for(let d=1;d<=o.getDate();d++){const f=new Date(e.getFullYear(),e.getMonth(),d);r.push(f),r.length===7&&(a.push(r),r=[])}for(let d=1;d<7-A;d++){const f=new Date(o);f.setDate(f.getDate()+d),r.push(f)}return r.length>0&&a.push(r),a}function IS(e,t,n){let a=(n??cg(t)?.firstDay??0)%7;[0,1,2,3,4,5,6].includes(a)||(a=0);const r=new Date(e);for(;r.getDay()!==a;)r.setDate(r.getDate()-1);return r}function cne(e,t){const n=new Date(e),a=((cg(t)?.firstDay??0)+6)%7;for(;n.getDay()!==a;)n.setDate(n.getDate()+1);return n}function u6(e){return new Date(e.getFullYear(),e.getMonth(),1)}function c6(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}function dne(e){const t=e.split("-").map(Number);return new Date(t[0],t[1]-1,t[2])}const Ane=/^([12]\d{3}-([1-9]|0[1-9]|1[0-2])-([1-9]|0[1-9]|[12]\d|3[01]))$/;function d6(e){if(e==null)return new Date;if(e instanceof Date)return e;if(typeof e=="string"){let t;if(Ane.test(e))return dne(e);if(t=Date.parse(e),!isNaN(t))return new Date(t)}return null}const pD=new Date(2e3,0,2);function fne(e,t,n){const a=t??cg(e)?.firstDay??0;return xi(7).map(r=>{const s=new Date(pD);return s.setDate(pD.getDate()+a+r),new Intl.DateTimeFormat(e,{weekday:n??"narrow"}).format(s)})}function mne(e,t,n,a){const r=d6(e)??new Date,s=a?.[t];if(typeof s=="function")return s(r,t,n);let o={};switch(t){case"fullDate":o={year:"numeric",month:"short",day:"numeric"};break;case"fullDateWithWeekday":o={weekday:"long",year:"numeric",month:"long",day:"numeric"};break;case"normalDate":const i=r.getDate(),c=new Intl.DateTimeFormat(n,{month:"long"}).format(r);return`${i} ${c}`;case"normalDateWithWeekday":o={weekday:"short",day:"numeric",month:"short"};break;case"shortDate":o={month:"short",day:"numeric"};break;case"year":o={year:"numeric"};break;case"month":o={month:"long"};break;case"monthShort":o={month:"short"};break;case"monthAndYear":o={month:"long",year:"numeric"};break;case"monthAndDate":o={month:"long",day:"numeric"};break;case"weekday":o={weekday:"long"};break;case"weekdayShort":o={weekday:"short"};break;case"dayOfMonth":return new Intl.NumberFormat(n).format(r.getDate());case"hours12h":o={hour:"numeric",hour12:!0};break;case"hours24h":o={hour:"numeric",hour12:!1};break;case"minutes":o={minute:"numeric"};break;case"seconds":o={second:"numeric"};break;case"fullTime":o={hour:"numeric",minute:"numeric"};break;case"fullTime12h":o={hour:"numeric",minute:"numeric",hour12:!0};break;case"fullTime24h":o={hour:"numeric",minute:"numeric",hour12:!1};break;case"fullDateTime":o={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"};break;case"fullDateTime12h":o={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0};break;case"fullDateTime24h":o={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1};break;case"keyboardDate":o={year:"numeric",month:"2-digit",day:"2-digit"};break;case"keyboardDateTime":return o={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric"},new Intl.DateTimeFormat(n,o).format(r).replace(/, /g," ");case"keyboardDateTime12h":return o={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!0},new Intl.DateTimeFormat(n,o).format(r).replace(/, /g," ");case"keyboardDateTime24h":return o={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!1},new Intl.DateTimeFormat(n,o).format(r).replace(/, /g," ");default:o=s??{timeZone:"UTC",timeZoneName:"short"}}return new Intl.DateTimeFormat(n,o).format(r)}function vne(e,t){const n=e.toJsDate(t),a=n.getFullYear(),r=JP(String(n.getMonth()+1),2,"0"),s=JP(String(n.getDate()),2,"0");return`${a}-${r}-${s}`}function hne(e){const[t,n,a]=e.split("-").map(Number);return new Date(t,n-1,a)}function pne(e,t){const n=new Date(e);return n.setMinutes(n.getMinutes()+t),n}function gne(e,t){const n=new Date(e);return n.setHours(n.getHours()+t),n}function Ky(e,t){const n=new Date(e);return n.setDate(n.getDate()+t),n}function yne(e,t){const n=new Date(e);return n.setDate(n.getDate()+t*7),n}function _ne(e,t){const n=new Date(e);return n.setDate(1),n.setMonth(n.getMonth()+t),n}function FS(e){return e.getFullYear()}function wne(e){return e.getMonth()}function bne(e,t,n,a){const r=cg(t),s=n??r?.firstDay??0,o=a??r?.firstWeekSize??1;function i(v){const p=new Date(v,0,1);return 7-PS(p,IS(p,t,s),"days")}let c=FS(e);const A=Ky(IS(e,t,s),6);c<FS(A)&&i(c+1)>=o&&c++;const d=new Date(c,0,1),f=i(c),m=f>=o?Ky(d,f-7):Ky(d,f);return 1+PS(A6(e),P_(m),"weeks")}function xne(e){return e.getDate()}function Cne(e){return new Date(e.getFullYear(),e.getMonth()+1,1)}function Sne(e){return new Date(e.getFullYear(),e.getMonth()-1,1)}function Ene(e){return e.getHours()}function Bne(e){return e.getMinutes()}function kne(e){return new Date(e.getFullYear(),0,1)}function Tne(e){return new Date(e.getFullYear(),11,31)}function Ine(e,t){return F_(e,t[0])&&Dne(e,t[1])}function Fne(e){const t=new Date(e);return t instanceof Date&&!isNaN(t.getTime())}function F_(e,t){return e.getTime()>t.getTime()}function Pne(e,t){return F_(P_(e),P_(t))}function Dne(e,t){return e.getTime()<t.getTime()}function gD(e,t){return e.getTime()===t.getTime()}function Une(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function Rne(e,t){return e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function Nne(e,t){return e.getFullYear()===t.getFullYear()}function PS(e,t,n){const a=new Date(e),r=new Date(t);switch(n){case"years":return a.getFullYear()-r.getFullYear();case"quarters":return Math.floor((a.getMonth()-r.getMonth()+(a.getFullYear()-r.getFullYear())*12)/4);case"months":return a.getMonth()-r.getMonth()+(a.getFullYear()-r.getFullYear())*12;case"weeks":return Math.floor((a.getTime()-r.getTime())/(1e3*60*60*24*7));case"days":return Math.floor((a.getTime()-r.getTime())/(1e3*60*60*24));case"hours":return Math.floor((a.getTime()-r.getTime())/(1e3*60*60));case"minutes":return Math.floor((a.getTime()-r.getTime())/(1e3*60));case"seconds":return Math.floor((a.getTime()-r.getTime())/1e3);default:return a.getTime()-r.getTime()}}function Vne(e,t){const n=new Date(e);return n.setHours(t),n}function Lne(e,t){const n=new Date(e);return n.setMinutes(t),n}function Mne(e,t){const n=new Date(e);return n.setMonth(t),n}function One(e,t){const n=new Date(e);return n.setDate(t),n}function Hne(e,t){const n=new Date(e);return n.setFullYear(t),n}function P_(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0)}function A6(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,59,999)}class $ne{constructor(t){this.locale=t.locale,this.formats=t.formats}date(t){return d6(t)}toJsDate(t){return t}toISO(t){return vne(this,t)}parseISO(t){return hne(t)}addMinutes(t,n){return pne(t,n)}addHours(t,n){return gne(t,n)}addDays(t,n){return Ky(t,n)}addWeeks(t,n){return yne(t,n)}addMonths(t,n){return _ne(t,n)}getWeekArray(t,n){const a=n!==void 0?Number(n):void 0;return une(t,this.locale,a)}startOfWeek(t,n){const a=n!==void 0?Number(n):void 0;return IS(t,this.locale,a)}endOfWeek(t){return cne(t,this.locale)}startOfMonth(t){return u6(t)}endOfMonth(t){return c6(t)}format(t,n){return mne(t,n,this.locale,this.formats)}isEqual(t,n){return gD(t,n)}isValid(t){return Fne(t)}isWithinRange(t,n){return Ine(t,n)}isAfter(t,n){return F_(t,n)}isAfterDay(t,n){return Pne(t,n)}isBefore(t,n){return!F_(t,n)&&!gD(t,n)}isSameDay(t,n){return Une(t,n)}isSameMonth(t,n){return Rne(t,n)}isSameYear(t,n){return Nne(t,n)}setMinutes(t,n){return Lne(t,n)}setHours(t,n){return Vne(t,n)}setMonth(t,n){return Mne(t,n)}setDate(t,n){return One(t,n)}setYear(t,n){return Hne(t,n)}getDiff(t,n,a){return PS(t,n,a)}getWeekdays(t,n){const a=t!==void 0?Number(t):void 0;return fne(this.locale,a,n)}getYear(t){return FS(t)}getMonth(t){return wne(t)}getWeek(t,n,a){const r=n!==void 0?Number(n):void 0;return bne(t,this.locale,r,a)}getDate(t){return xne(t)}getNextMonth(t){return Cne(t)}getPreviousMonth(t){return Sne(t)}getHours(t){return Ene(t)}getMinutes(t){return Bne(t)}startOfDay(t){return P_(t)}endOfDay(t){return A6(t)}startOfYear(t){return kne(t)}endOfYear(t){return Tne(t)}}const f6=Symbol.for("vuetify:date-options"),yD=Symbol.for("vuetify:date-adapter");function Qne(e,t){const n=mo({adapter:$ne,locale:{af:"af-ZA",bg:"bg-BG",ca:"ca-ES",ckb:"",cs:"cs-CZ",de:"de-DE",el:"el-GR",en:"en-US",et:"et-EE",fa:"fa-IR",fi:"fi-FI",hr:"hr-HR",hu:"hu-HU",he:"he-IL",id:"id-ID",it:"it-IT",ja:"ja-JP",ko:"ko-KR",lv:"lv-LV",lt:"lt-LT",nl:"nl-NL",no:"no-NO",pl:"pl-PL",pt:"pt-PT",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",srCyrl:"sr-SP",srLatn:"sr-SP",sv:"sv-SE",th:"th-TH",tr:"tr-TR",az:"az-AZ",uk:"uk-UA",vi:"vi-VN",zhHans:"zh-CN",zhHant:"zh-TW"}},e);return{options:n,instance:m6(n,t)}}function Gne(e,t,n){const a=e.getDiff(e.endOfDay(n??t),e.startOfDay(t),"days"),r=[t];for(let s=1;s<a;s++){const o=e.addDays(t,s);r.push(o)}return n&&r.push(e.endOfDay(n)),r}function m6(e,t){const n=os(typeof e.adapter=="function"?new e.adapter({locale:e.locale[t.current.value]??t.current.value,formats:e.formats}):e.adapter);return je(t.current,a=>{n.locale=e.locale[a]??a??n.locale}),n}function dg(){const e=Tn(f6);if(!e)throw new Error("[Vuetify] Could not find injected date options");const t=Oa();return m6(e,t)}const ow=["sm","md","lg","xl","xxl"],DS=Symbol.for("vuetify:display"),_D={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},zne=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_D;return mo(_D,e)};function wD(e){return Ba&&!e?window.innerWidth:typeof e=="object"&&e.clientWidth||0}function bD(e){return Ba&&!e?window.innerHeight:typeof e=="object"&&e.clientHeight||0}function xD(e){const t=Ba&&!e?window.navigator.userAgent:"ssr";function n(p){return!!t.match(p)}const a=n(/android/i),r=n(/iphone|ipad|ipod/i),s=n(/cordova/i),o=n(/electron/i),i=n(/chrome/i),c=n(/edge/i),A=n(/firefox/i),d=n(/opera/i),f=n(/win/i),m=n(/mac/i),v=n(/linux/i);return{android:a,ios:r,cordova:s,electron:o,chrome:i,edge:c,firefox:A,opera:d,win:f,mac:m,linux:v,touch:ite,ssr:t==="ssr"}}function Kne(e,t){const{thresholds:n,mobileBreakpoint:a}=zne(e),r=Ht(bD(t)),s=Ht(xD(t)),o=os({}),i=Ht(wD(t));function c(){r.value=bD(),i.value=wD()}function A(){c(),s.value=xD()}return _r(()=>{const d=i.value<n.sm,f=i.value<n.md&&!d,m=i.value<n.lg&&!(f||d),v=i.value<n.xl&&!(m||f||d),p=i.value<n.xxl&&!(v||m||f||d),g=i.value>=n.xxl,y=d?"xs":f?"sm":m?"md":v?"lg":p?"xl":"xxl",w=typeof a=="number"?a:n[a],b=i.value<w;o.xs=d,o.sm=f,o.md=m,o.lg=v,o.xl=p,o.xxl=g,o.smAndUp=!d,o.mdAndUp=!(d||f),o.lgAndUp=!(d||f||m),o.xlAndUp=!(d||f||m||v),o.smAndDown=!(m||v||p||g),o.mdAndDown=!(v||p||g),o.lgAndDown=!(p||g),o.xlAndDown=!g,o.name=y,o.height=r.value,o.width=i.value,o.mobile=b,o.mobileBreakpoint=a,o.platform=s.value,o.thresholds=n}),Ba&&(window.addEventListener("resize",c,{passive:!0}),us(()=>{window.removeEventListener("resize",c)},!0)),{...Lf(o),update:A,ssr:!!t}}const Of=lt({mobile:{type:Boolean,default:!1},mobileBreakpoint:[Number,String]},"display");function rl(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{mobile:null},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Mu();const n=Tn(DS);if(!n)throw new Error("Could not find Vuetify display injection");const a=ne(()=>e.mobile?!0:typeof e.mobileBreakpoint=="number"?n.width.value<e.mobileBreakpoint:e.mobileBreakpoint?n.width.value<n.thresholds.value[e.mobileBreakpoint]:e.mobile===null?n.mobile.value:!1),r=Xe(()=>t?{[`${t}--mobile`]:a.value}:{});return{...n,displayClasses:r,mobile:a}}const v6=Symbol.for("vuetify:goto");function h6(){return{container:void 0,duration:300,layout:!1,offset:0,easing:"easeInOutCubic",patterns:Xte}}function Wne(e){return wk(e)??(document.scrollingElement||document.body)}function wk(e){return typeof e=="string"?document.querySelector(e):dk(e)}function Dx(e,t,n){if(typeof e=="number")return t&&n?-e:e;let a=wk(e),r=0;for(;a;)r+=t?a.offsetLeft:a.offsetTop,a=a.offsetParent;return r}function jne(e,t){return{rtl:t.isRtl,options:mo(h6(),e)}}async function CD(e,t,n,a){const r=n?"scrollLeft":"scrollTop",s=mo(a?.options??h6(),t),o=a?.rtl.value,i=(typeof e=="number"?e:wk(e))??0,c=s.container==="parent"&&i instanceof HTMLElement?i.parentElement:Wne(s.container),A=typeof s.easing=="function"?s.easing:s.patterns[s.easing];if(!A)throw new TypeError(`Easing function "${s.easing}" not found.`);let d;if(typeof i=="number")d=Dx(i,n,o);else if(d=Dx(i,n,o)-Dx(c,n,o),s.layout){const p=window.getComputedStyle(i).getPropertyValue("--v-layout-top");p&&(d-=parseInt(p,10))}d+=s.offset,d=Yne(c,d,!!o,!!n);const f=c[r]??0;if(d===f)return Promise.resolve(d);const m=performance.now();return new Promise(v=>requestAnimationFrame(function p(g){const w=(g-m)/s.duration,b=Math.floor(f+(d-f)*A(Ja(w,0,1)));if(c[r]=b,w>=1&&Math.abs(b-c[r])<10)return v(d);if(w>2)return v(c[r]);requestAnimationFrame(p)}))}function qne(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=Tn(v6),{isRtl:n}=Xr();if(!t)throw new Error("[Vuetify] Could not find injected goto instance");const a={...t,rtl:Xe(()=>t.rtl.value||n.value)};async function r(s,o){return CD(s,mo(e,o),!1,a)}return r.horizontal=async(s,o)=>CD(s,mo(e,o),!0,a),r}function Yne(e,t,n,a){const{scrollWidth:r,scrollHeight:s}=e,[o,i]=e===document.scrollingElement?[window.innerWidth,window.innerHeight]:[e.offsetWidth,e.offsetHeight];let c,A;return a?n?(c=-(r-o),A=0):(c=0,A=r-o):(c=0,A=s+-i),Ja(t,c,A)}const Xne={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sortAsc:"mdi-arrow-up",sortDesc:"mdi-arrow-down",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus",calendar:"mdi-calendar",treeviewCollapse:"mdi-menu-down",treeviewExpand:"mdi-menu-right",eyeDropper:"mdi-eyedropper",upload:"mdi-cloud-upload",color:"mdi-palette",command:"mdi-apple-keyboard-command",ctrl:"mdi-apple-keyboard-control",space:"mdi-keyboard-space",shift:"mdi-apple-keyboard-shift",alt:"mdi-apple-keyboard-option",enter:"mdi-keyboard-return",arrowup:"mdi-arrow-up",arrowdown:"mdi-arrow-down",arrowleft:"mdi-arrow-left",arrowright:"mdi-arrow-right",backspace:"mdi-backspace",play:"mdi-play",pause:"mdi-pause",fullscreen:"mdi-fullscreen",fullscreenExit:"mdi-fullscreen-exit",volumeHigh:"mdi-volume-high",volumeMedium:"mdi-volume-medium",volumeLow:"mdi-volume-low",volumeOff:"mdi-volume-variant-off"},Jne={component:e=>Zl(xk,{...e,class:"mdi"})},cn=[String,Function,Object,Array],US=Symbol.for("vuetify:icons"),iw=lt({icon:{type:cn},tag:{type:[String,Object,Function],required:!0}},"icon"),RS=gt()({name:"VComponentIcon",props:iw(),setup(e,t){let{slots:n}=t;return()=>{const a=e.icon;return l(e.tag,null,{default:()=>[e.icon?l(a,null,null):n.default?.()]})}}}),bk=Fi({name:"VSvgIcon",inheritAttrs:!1,props:iw(),setup(e,t){let{attrs:n}=t;return()=>l(e.tag,Pe(n,{style:null}),{default:()=>[h("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[Array.isArray(e.icon)?e.icon.map(a=>Array.isArray(a)?h("path",{d:a[0],"fill-opacity":a[1]},null):h("path",{d:a},null)):h("path",{d:e.icon},null)])]})}}),Zne=Fi({name:"VLigatureIcon",props:iw(),setup(e){return()=>l(e.tag,null,{default:()=>[e.icon]})}}),xk=Fi({name:"VClassIcon",props:iw(),setup(e){return()=>l(e.tag,{class:ct(e.icon)},null)}});function eae(){return{svg:{component:bk},class:{component:xk}}}function tae(e){const t=eae(),n=e?.defaultSet??"mdi";return n==="mdi"&&!t.mdi&&(t.mdi=Jne),mo({defaultSet:n,sets:t,aliases:{...Xne,vuetify:["M8.2241 14.2009L12 21L22 3H14.4459L8.2241 14.2009Z",["M7.26303 12.4733L7.00113 12L2 3H12.5261C12.5261 3 12.5261 3 12.5261 3L7.26303 12.4733Z",.6]],"vuetify-outline":"svg:M7.26 12.47 12.53 3H2L7.26 12.47ZM14.45 3 8.22 14.2 12 21 22 3H14.45ZM18.6 5 12 16.88 10.51 14.2 15.62 5ZM7.26 8.35 5.4 5H9.13L7.26 8.35Z","vuetify-play":["m6.376 13.184-4.11-7.192C1.505 4.66 2.467 3 4.003 3h8.532l-.953 1.576-.006.01-.396.677c-.429.732-.214 1.507.194 2.015.404.503 1.092.878 1.869.806a3.72 3.72 0 0 1 1.005.022c.276.053.434.143.523.237.138.146.38.635-.25 2.09-.893 1.63-1.553 1.722-1.847 1.677-.213-.033-.468-.158-.756-.406a4.95 4.95 0 0 1-.8-.927c-.39-.564-1.04-.84-1.66-.846-.625-.006-1.316.27-1.693.921l-.478.826-.911 1.506Z",["M9.093 11.552c.046-.079.144-.15.32-.148a.53.53 0 0 1 .43.207c.285.414.636.847 1.046 1.2.405.35.914.662 1.516.754 1.334.205 2.502-.698 3.48-2.495l.014-.028.013-.03c.687-1.574.774-2.852-.005-3.675-.37-.391-.861-.586-1.333-.676a5.243 5.243 0 0 0-1.447-.044c-.173.016-.393-.073-.54-.257-.145-.18-.127-.316-.082-.392l.393-.672L14.287 3h5.71c1.536 0 2.499 1.659 1.737 2.992l-7.997 13.996c-.768 1.344-2.706 1.344-3.473 0l-3.037-5.314 1.377-2.278.004-.006.004-.007.481-.831Z",.6]]}},e)}const nae=e=>{const t=Tn(US);if(!t)throw new Error("Missing Vuetify Icons provide!");return{iconData:ne(()=>{const a=Tu(e);if(!a)return{component:RS};let r=a;if(typeof r=="string"&&(r=r.trim(),r.startsWith("$")&&(r=t.aliases?.[r.slice(1)])),Array.isArray(r))return{component:bk,icon:r};if(typeof r!="string")return{component:RS,icon:r};const s=Object.keys(t.sets).find(c=>typeof r=="string"&&r.startsWith(`${c}:`)),o=s?r.slice(s.length+1):r;return{component:t.sets[s??t.defaultSet].component,icon:o}})}},x0=Symbol.for("vuetify:theme"),ua=lt({theme:String},"theme");function SD(){return{defaultTheme:"light",prefix:"v-",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-bright":"#FFFFFF","surface-light":"#EEEEEE","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#1867C0","primary-darken-1":"#1F5592",secondary:"#48A9A6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#EEEEEE","theme-on-kbd":"#000000","theme-code":"#F5F5F5","theme-on-code":"#000000"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-bright":"#ccbfd6","surface-light":"#424242","surface-variant":"#c8c8c8","on-surface-variant":"#000000",primary:"#2196F3","primary-darken-1":"#277CC1",secondary:"#54B6B2","secondary-darken-1":"#48A9A6",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":1,"medium-emphasis-opacity":.7,"disabled-opacity":.5,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"theme-kbd":"#424242","theme-on-kbd":"#FFFFFF","theme-code":"#343434","theme-on-code":"#CCCCCC"}}},stylesheetId:"vuetify-theme-stylesheet",scoped:!1,unimportant:!1,utilities:!0}}function aae(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:SD();const t=SD();if(!e)return{...t,isDisabled:!0};const n={};for(const[a,r]of Object.entries(e.themes??{})){const s=r.dark||a==="dark"?t.themes?.dark:t.themes?.light;n[a]=mo(s,r)}return mo(t,{...e,themes:n})}function IA(e,t,n,a){e.push(`${iae(t,a)} {
`,...n.map(r=>`  ${r};
`),`}
`)}function ED(e,t){const n=e.dark?2:1,a=e.dark?1:2,r=[];for(const[s,o]of Object.entries(e.colors)){const i=Ci(o);r.push(`--${t}theme-${s}: ${i.r},${i.g},${i.b}`),s.startsWith("on-")||r.push(`--${t}theme-${s}-overlay-multiplier: ${TS(o)>.18?n:a}`)}for(const[s,o]of Object.entries(e.variables)){const i=typeof o=="string"&&o.startsWith("#")?Ci(o):void 0,c=i?`${i.r}, ${i.g}, ${i.b}`:void 0;r.push(`--${t}${s}: ${c??o}`)}return r}function rae(e,t,n){const a={};if(n)for(const r of["lighten","darken"]){const s=r==="lighten"?Hte:$te;for(const o of xi(n[r],1))a[`${e}-${r}-${o}`]=t6(s(Ci(t),o))}return a}function sae(e,t){if(!t)return{};let n={};for(const a of t.colors){const r=e[a];r&&(n={...n,...rae(a,r,t)})}return n}function oae(e){const t={};for(const n of Object.keys(e)){if(n.startsWith("on-")||e[`on-${n}`])continue;const a=`on-${n}`,r=Ci(e[n]);t[a]=r6(r)}return t}function iae(e,t){if(!t)return e;const n=`:where(${t})`;return e===":root"?n:`${n} ${e}`}function lae(e,t,n){const a=uae(e,t);a&&(a.innerHTML=n)}function uae(e,t){if(!Ba)return null;let n=document.getElementById(e);return n||(n=document.createElement("style"),n.id=e,n.type="text/css",t&&n.setAttribute("nonce",t),document.head.appendChild(n)),n}function cae(e){const t=aae(e),n=Ht(t.defaultTheme),a=V(t.themes),r=Ht("light"),s=ne({get(){return n.value==="system"?r.value:n.value},set(w){n.value=w}}),o=ne(()=>{const w={};for(const[b,x]of Object.entries(a.value)){const T={...x.colors,...sae(x.colors,t.variations)};w[b]={...x,colors:{...T,...oae(T)}}}return w}),i=Xe(()=>o.value[s.value]),c=Xe(()=>n.value==="system"),A=ne(()=>{const w=[],b=t.unimportant?"":" !important",x=t.scoped?t.prefix:"";i.value?.dark&&IA(w,":root",["color-scheme: dark"],t.scope),IA(w,":root",ED(i.value,t.prefix),t.scope);for(const[T,D]of Object.entries(o.value))IA(w,`.${t.prefix}theme--${T}`,[`color-scheme: ${D.dark?"dark":"normal"}`,...ED(D,t.prefix)],t.scope);if(t.utilities){const T=[],D=[],k=new Set(Object.values(o.value).flatMap(S=>Object.keys(S.colors)));for(const S of k)S.startsWith("on-")?IA(D,`.${S}`,[`color: rgb(var(--${t.prefix}theme-${S}))${b}`],t.scope):(IA(T,`.${x}bg-${S}`,[`--${t.prefix}theme-overlay-multiplier: var(--${t.prefix}theme-${S}-overlay-multiplier)`,`background-color: rgb(var(--${t.prefix}theme-${S}))${b}`,`color: rgb(var(--${t.prefix}theme-on-${S}))${b}`],t.scope),IA(D,`.${x}text-${S}`,[`color: rgb(var(--${t.prefix}theme-${S}))${b}`],t.scope),IA(D,`.${x}border-${S}`,[`--${t.prefix}border-color: var(--${t.prefix}theme-${S})`],t.scope));w.push(...T,...D)}return w.map((T,D)=>D===0?T:`    ${T}`).join("")}),d=Xe(()=>t.isDisabled?void 0:`${t.prefix}theme--${s.value}`),f=Xe(()=>Object.keys(o.value));if(lte){let b=function(){r.value=w.matches?"dark":"light"};const w=window.matchMedia("(prefers-color-scheme: dark)");b(),w.addEventListener("change",b,{passive:!0}),gL()&&us(()=>{w.removeEventListener("change",b)})}function m(w){if(t.isDisabled)return;const b=w._context.provides.usehead;if(b){let x=function(){return{style:[{textContent:A.value,id:t.stylesheetId,nonce:t.cspNonce||!1}]}};if(b.push){const T=b.push(x);Ba&&je(A,()=>{T.patch(x)})}else Ba?(b.addHeadObjs(Xe(x)),_r(()=>b.updateDOM())):b.addHeadObjs(x())}else{let x=function(){lae(t.stylesheetId,t.cspNonce,A.value)};Ba?je(A,x,{immediate:!0}):x()}}function v(w){w!=="system"&&!f.value.includes(w)||(s.value=w)}function p(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:f.value;const b=w.indexOf(s.value),x=b===-1?0:(b+1)%w.length;v(w[x])}function g(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["light","dark"];p(w)}const y=new Proxy(s,{get(w,b){return Reflect.get(w,b)},set(w,b,x){return b==="value"&&q8(`theme.global.name.value = ${x}`,`theme.change('${x}')`),Reflect.set(w,b,x)}});return{install:m,change:v,cycle:p,toggle:g,isDisabled:t.isDisabled,isSystem:c,name:s,themes:a,current:i,computedThemes:o,prefix:t.prefix,themeClasses:d,styles:A,global:{name:y,current:i}}}function ka(e){Pr("provideTheme");const t=Tn(x0,null);if(!t)throw new Error("Could not find Vuetify theme injection");const n=Xe(()=>e.theme??t.name.value),a=Xe(()=>t.themes.value[n.value]),r=Xe(()=>t.isDisabled?void 0:`${t.prefix}theme--${n.value}`),s={...t,name:n,current:a,themeClasses:r};return La(x0,s),s}function Ck(){Pr("useTheme");const e=Tn(x0,null);if(!e)throw new Error("Could not find Vuetify theme injection");return e}function $l(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"content";const n=B_(),a=V();if(Ba){const r=new ResizeObserver(s=>{e?.(s,r),s.length&&(t==="content"?a.value=s[0].contentRect:a.value=s[0].target.getBoundingClientRect())});va(()=>{r.disconnect()}),je(()=>n.el,(s,o)=>{o&&(r.unobserve(o),a.value=void 0),s&&r.observe(s)},{flush:"post"})}return{resizeRef:n,contentRect:th(a)}}const C0=Symbol.for("vuetify:layout"),p6=Symbol.for("vuetify:layout-item"),BD=1e3,g6=lt({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),Hf=lt({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function y6(){const e=Tn(C0);if(!e)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:e.getLayoutItem,mainRect:e.mainRect,mainStyles:e.mainStyles}}function $f(e){const t=Tn(C0);if(!t)throw new Error("[Vuetify] Could not find injected layout");const n=e.id??`layout-item-${zo()}`,a=Pr("useLayoutItem");La(p6,{id:n});const r=Ht(!1);J2(()=>r.value=!0),og(()=>r.value=!1);const{layoutItemStyles:s,layoutItemScrimStyles:o}=t.register(a,{...e,active:ne(()=>r.value?!1:e.active.value),id:n});return va(()=>t.unregister(n)),{layoutItemStyles:s,layoutRect:t.layoutRect,layoutItemScrimStyles:o}}const dae=(e,t,n,a)=>{let r={top:0,left:0,right:0,bottom:0};const s=[{id:"",layer:{...r}}];for(const o of e){const i=t.get(o),c=n.get(o),A=a.get(o);if(!i||!c||!A)continue;const d={...r,[i.value]:parseInt(r[i.value],10)+(A.value?parseInt(c.value,10):0)};s.push({id:o,layer:d}),r=d}return s};function _6(e){const t=Tn(C0,null),n=ne(()=>t?t.rootZIndex.value-100:BD),a=V([]),r=os(new Map),s=os(new Map),o=os(new Map),i=os(new Map),c=os(new Map),{resizeRef:A,contentRect:d}=$l(),f=ne(()=>{const k=new Map,S=e.overlaps??[];for(const E of S.filter(C=>C.includes(":"))){const[C,U]=E.split(":");if(!a.value.includes(C)||!a.value.includes(U))continue;const F=r.get(C),L=r.get(U),H=s.get(C),ue=s.get(U);!F||!L||!H||!ue||(k.set(U,{position:F.value,amount:parseInt(H.value,10)}),k.set(C,{position:L.value,amount:-parseInt(ue.value,10)}))}return k}),m=ne(()=>{const k=[...new Set([...o.values()].map(E=>E.value))].sort((E,C)=>E-C),S=[];for(const E of k){const C=a.value.filter(U=>o.get(U)?.value===E);S.push(...C)}return dae(S,r,s,i)}),v=ne(()=>!Array.from(c.values()).some(k=>k.value)),p=ne(()=>m.value[m.value.length-1].layer),g=Xe(()=>({"--v-layout-left":Kt(p.value.left),"--v-layout-right":Kt(p.value.right),"--v-layout-top":Kt(p.value.top),"--v-layout-bottom":Kt(p.value.bottom),...v.value?void 0:{transition:"none"}})),y=ne(()=>m.value.slice(1).map((k,S)=>{let{id:E}=k;const{layer:C}=m.value[S],U=s.get(E),F=r.get(E);return{id:E,...C,size:Number(U.value),position:F.value}})),w=k=>y.value.find(S=>S.id===k),b=Pr("createLayout"),x=Ht(!1);dn(()=>{x.value=!0}),La(C0,{register:(k,S)=>{let{id:E,order:C,position:U,layoutSize:F,elementSize:L,active:H,disableTransitions:ue,absolute:ie}=S;o.set(E,C),r.set(E,U),s.set(E,F),i.set(E,H),ue&&c.set(E,ue);const X=Ym(p6,b?.vnode).indexOf(k);X>-1?a.value.splice(X,0,E):a.value.push(E);const le=ne(()=>y.value.findIndex(P=>P.id===E)),Z=ne(()=>n.value+m.value.length*2-le.value*2),re=ne(()=>{const P=U.value==="left"||U.value==="right",G=U.value==="right",J=U.value==="bottom",M=L.value??F.value,te=M===0?"%":"px",Y={[U.value]:0,zIndex:Z.value,transform:`translate${P?"X":"Y"}(${(H.value?0:-(M===0?100:M))*(G||J?-1:1)}${te})`,position:ie.value||n.value!==BD?"absolute":"fixed",...v.value?void 0:{transition:"none"}};if(!x.value)return Y;const W=y.value[le.value],ee=f.value.get(E);return ee&&(W[ee.position]+=ee.amount),{...Y,height:P?`calc(100% - ${W.top}px - ${W.bottom}px)`:L.value?`${L.value}px`:void 0,left:G?void 0:`${W.left}px`,right:G?`${W.right}px`:void 0,top:U.value!=="bottom"?`${W.top}px`:void 0,bottom:U.value!=="top"?`${W.bottom}px`:void 0,width:P?L.value?`${L.value}px`:void 0:`calc(100% - ${W.left}px - ${W.right}px)`}}),q=ne(()=>({zIndex:Z.value-1}));return{layoutItemStyles:re,layoutItemScrimStyles:q,zIndex:Z}},unregister:k=>{o.delete(k),r.delete(k),s.delete(k),i.delete(k),c.delete(k),a.value=a.value.filter(S=>S!==k)},mainRect:p,mainStyles:g,getLayoutItem:w,items:y,layoutRect:d,rootZIndex:n});const T=Xe(()=>["v-layout",{"v-layout--full-height":e.fullHeight}]),D=Xe(()=>({zIndex:t?n.value:void 0,position:t?"relative":void 0,overflow:t?"hidden":void 0}));return{layoutClasses:T,layoutStyles:D,getLayoutItem:w,items:y,layoutRect:d,layoutRef:A}}function w6(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:t,...n}=e,a=mo(t,n),{aliases:r={},components:s={},directives:o={}}=a,i=Rd();return i.run(()=>{const c=zte(a.defaults),A=Kne(a.display,a.ssr),d=cae(a.theme),f=tae(a.icons),m=rne(a.locale),v=Qne(a.date,m),p=jne(a.goTo,m);function g(w){for(const x in o)w.directive(x,o[x]);for(const x in s)w.component(x,s[x]);for(const x in r)w.component(x,Fi({...r[x],name:x,aliasName:r[x].name}));const b=Rd();if(b.run(()=>{d.install(w)}),w.onUnmount(()=>b.stop()),w.provide(Pv,c),w.provide(DS,A),w.provide(x0,d),w.provide(US,f),w.provide(Dv,m),w.provide(f6,v.options),w.provide(yD,v.instance),w.provide(v6,p),Ba&&a.ssr)if(w.$nuxt)w.$nuxt.hook("app:suspense:resolve",()=>{A.update()});else{const{mount:x}=w;w.mount=function(){const T=x(...arguments);return _n(()=>A.update()),w.mount=x,T}}w.mixin({computed:{$vuetify(){return os({defaults:km.call(this,Pv),display:km.call(this,DS),theme:km.call(this,x0),icons:km.call(this,US),locale:km.call(this,Dv),date:km.call(this,yD)})}}})}function y(){i.stop()}return{install:g,unmount:y,defaults:c,display:A,theme:d,icons:f,locale:m,date:v,goTo:p}})}const Aae="3.9.7";w6.version=Aae;function km(e){const t=this.$,n=t.parent?.provides??t.vnode.appContext?.provides;if(n&&e in n)return n[e]}function fae(){return b6().__VUE_DEVTOOLS_GLOBAL_HOOK__}function b6(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const mae=typeof Proxy=="function",vae="devtools-plugin:setup",hae="plugin:settings:set";let Tm,NS;function pae(){var e;return Tm!==void 0||(typeof window<"u"&&window.performance?(Tm=!0,NS=window.performance):typeof globalThis<"u"&&(!((e=globalThis.perf_hooks)===null||e===void 0)&&e.performance)?(Tm=!0,NS=globalThis.perf_hooks.performance):Tm=!1),Tm}function gae(){return pae()?NS.now():Date.now()}class yae{constructor(t,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=n;const a={};if(t.settings)for(const o in t.settings){const i=t.settings[o];a[o]=i.defaultValue}const r=`__vue-devtools-plugin-settings__${t.id}`;let s=Object.assign({},a);try{const o=localStorage.getItem(r),i=JSON.parse(o);Object.assign(s,i)}catch{}this.fallbacks={getSettings(){return s},setSettings(o){try{localStorage.setItem(r,JSON.stringify(o))}catch{}s=o},now(){return gae()}},n&&n.on(hae,(o,i)=>{o===this.plugin.id&&this.fallbacks.setSettings(i)}),this.proxiedOn=new Proxy({},{get:(o,i)=>this.target?this.target.on[i]:(...c)=>{this.onQueue.push({method:i,args:c})}}),this.proxiedTarget=new Proxy({},{get:(o,i)=>this.target?this.target[i]:i==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(i)?(...c)=>(this.targetQueue.push({method:i,args:c,resolve:()=>{}}),this.fallbacks[i](...c)):(...c)=>new Promise(A=>{this.targetQueue.push({method:i,args:c,resolve:A})})})}async setRealTarget(t){this.target=t;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function _ae(e,t){const n=e,a=b6(),r=fae(),s=mae&&n.enableEarlyProxy;if(r&&(a.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!s))r.emit(vae,e,t);else{const o=s?new yae(n,r):null;(a.__VUE_DEVTOOLS_PLUGINS__=a.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:t,proxy:o}),o&&t(o.proxiedTarget)}}var x6="store";function ra(e){return e===void 0&&(e=null),Tn(e!==null?e:x6)}function nh(e,t){Object.keys(e).forEach(function(n){return t(e[n],n)})}function wae(e){return e!==null&&typeof e=="object"}function bae(e){return e&&typeof e.then=="function"}function xae(e,t){return function(){return e(t)}}function C6(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var a=t.indexOf(e);a>-1&&t.splice(a,1)}}function S6(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;lw(e,n,[],e._modules.root,!0),Sk(e,n,t)}function Sk(e,t,n){var a=e._state,r=e._scope;e.getters={},e._makeLocalGettersCache=Object.create(null);var s=e._wrappedGetters,o={},i={},c=Rd(!0);c.run(function(){nh(s,function(A,d){o[d]=xae(A,e),i[d]=ne(function(){return o[d]()}),Object.defineProperty(e.getters,d,{get:function(){return i[d].value},enumerable:!0})})}),e._state=os({data:t}),e._scope=c,e.strict&&kae(e),a&&n&&e._withCommit(function(){a.data=null}),r&&r.stop()}function lw(e,t,n,a,r){var s=!n.length,o=e._modules.getNamespace(n);if(a.namespaced&&(e._modulesNamespaceMap[o],e._modulesNamespaceMap[o]=a),!s&&!r){var i=Ek(t,n.slice(0,-1)),c=n[n.length-1];e._withCommit(function(){i[c]=a.state})}var A=a.context=Cae(e,o,n);a.forEachMutation(function(d,f){var m=o+f;Sae(e,m,d,A)}),a.forEachAction(function(d,f){var m=d.root?f:o+f,v=d.handler||d;Eae(e,m,v,A)}),a.forEachGetter(function(d,f){var m=o+f;Bae(e,m,d,A)}),a.forEachChild(function(d,f){lw(e,t,n.concat(f),d,r)})}function Cae(e,t,n){var a=t==="",r={dispatch:a?e.dispatch:function(s,o,i){var c=D_(s,o,i),A=c.payload,d=c.options,f=c.type;return(!d||!d.root)&&(f=t+f),e.dispatch(f,A)},commit:a?e.commit:function(s,o,i){var c=D_(s,o,i),A=c.payload,d=c.options,f=c.type;(!d||!d.root)&&(f=t+f),e.commit(f,A,d)}};return Object.defineProperties(r,{getters:{get:a?function(){return e.getters}:function(){return E6(e,t)}},state:{get:function(){return Ek(e.state,n)}}}),r}function E6(e,t){if(!e._makeLocalGettersCache[t]){var n={},a=t.length;Object.keys(e.getters).forEach(function(r){if(r.slice(0,a)===t){var s=r.slice(a);Object.defineProperty(n,s,{get:function(){return e.getters[r]},enumerable:!0})}}),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}function Sae(e,t,n,a){var r=e._mutations[t]||(e._mutations[t]=[]);r.push(function(o){n.call(e,a.state,o)})}function Eae(e,t,n,a){var r=e._actions[t]||(e._actions[t]=[]);r.push(function(o){var i=n.call(e,{dispatch:a.dispatch,commit:a.commit,getters:a.getters,state:a.state,rootGetters:e.getters,rootState:e.state},o);return bae(i)||(i=Promise.resolve(i)),e._devtoolHook?i.catch(function(c){throw e._devtoolHook.emit("vuex:error",c),c}):i})}function Bae(e,t,n,a){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(s){return n(a.state,a.getters,s.state,s.getters)})}function kae(e){je(function(){return e._state.data},function(){},{deep:!0,flush:"sync"})}function Ek(e,t){return t.reduce(function(n,a){return n[a]},e)}function D_(e,t,n){return wae(e)&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}var Tae="vuex bindings",kD="vuex:mutations",Ux="vuex:actions",Im="vuex",Iae=0;function Fae(e,t){_ae({id:"org.vuejs.vuex",app:e,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[Tae]},function(n){n.addTimelineLayer({id:kD,label:"Vuex Mutations",color:TD}),n.addTimelineLayer({id:Ux,label:"Vuex Actions",color:TD}),n.addInspector({id:Im,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(a){if(a.app===e&&a.inspectorId===Im)if(a.filter){var r=[];I6(r,t._modules.root,a.filter,""),a.rootNodes=r}else a.rootNodes=[T6(t._modules.root,"")]}),n.on.getInspectorState(function(a){if(a.app===e&&a.inspectorId===Im){var r=a.nodeId;E6(t,r),a.state=Uae(Nae(t._modules,r),r==="root"?t.getters:t._makeLocalGettersCache,r)}}),n.on.editInspectorState(function(a){if(a.app===e&&a.inspectorId===Im){var r=a.nodeId,s=a.path;r!=="root"&&(s=r.split("/").filter(Boolean).concat(s)),t._withCommit(function(){a.set(t._state.data,s,a.state.value)})}}),t.subscribe(function(a,r){var s={};a.payload&&(s.payload=a.payload),s.state=r,n.notifyComponentUpdate(),n.sendInspectorTree(Im),n.sendInspectorState(Im),n.addTimelineEvent({layerId:kD,event:{time:Date.now(),title:a.type,data:s}})}),t.subscribeAction({before:function(a,r){var s={};a.payload&&(s.payload=a.payload),a._id=Iae++,a._time=Date.now(),s.state=r,n.addTimelineEvent({layerId:Ux,event:{time:a._time,title:a.type,groupId:a._id,subtitle:"start",data:s}})},after:function(a,r){var s={},o=Date.now()-a._time;s.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},a.payload&&(s.payload=a.payload),s.state=r,n.addTimelineEvent({layerId:Ux,event:{time:Date.now(),title:a.type,groupId:a._id,subtitle:"end",data:s}})}})})}var TD=8702998,Pae=6710886,Dae=16777215,B6={label:"namespaced",textColor:Dae,backgroundColor:Pae};function k6(e){return e&&e!=="root"?e.split("/").slice(-2,-1)[0]:"Root"}function T6(e,t){return{id:t||"root",label:k6(t),tags:e.namespaced?[B6]:[],children:Object.keys(e._children).map(function(n){return T6(e._children[n],t+n+"/")})}}function I6(e,t,n,a){a.includes(n)&&e.push({id:a||"root",label:a.endsWith("/")?a.slice(0,a.length-1):a||"Root",tags:t.namespaced?[B6]:[]}),Object.keys(t._children).forEach(function(r){I6(e,t._children[r],n,a+r+"/")})}function Uae(e,t,n){t=n==="root"?t:t[n];var a=Object.keys(t),r={state:Object.keys(e.state).map(function(o){return{key:o,editable:!0,value:e.state[o]}})};if(a.length){var s=Rae(t);r.getters=Object.keys(s).map(function(o){return{key:o.endsWith("/")?k6(o):o,editable:!1,value:VS(function(){return s[o]})}})}return r}function Rae(e){var t={};return Object.keys(e).forEach(function(n){var a=n.split("/");if(a.length>1){var r=t,s=a.pop();a.forEach(function(o){r[o]||(r[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),r=r[o]._custom.value}),r[s]=VS(function(){return e[n]})}else t[n]=VS(function(){return e[n]})}),t}function Nae(e,t){var n=t.split("/").filter(function(a){return a});return n.reduce(function(a,r,s){var o=a[r];if(!o)throw new Error('Missing module "'+r+'" for path "'+t+'".');return s===n.length-1?o:o._children},t==="root"?e:e.root._children)}function VS(e){try{return e()}catch(t){return t}}var eu=function(t,n){this.runtime=n,this._children=Object.create(null),this._rawModule=t;var a=t.state;this.state=(typeof a=="function"?a():a)||{}},F6={namespaced:{configurable:!0}};F6.namespaced.get=function(){return!!this._rawModule.namespaced};eu.prototype.addChild=function(t,n){this._children[t]=n};eu.prototype.removeChild=function(t){delete this._children[t]};eu.prototype.getChild=function(t){return this._children[t]};eu.prototype.hasChild=function(t){return t in this._children};eu.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)};eu.prototype.forEachChild=function(t){nh(this._children,t)};eu.prototype.forEachGetter=function(t){this._rawModule.getters&&nh(this._rawModule.getters,t)};eu.prototype.forEachAction=function(t){this._rawModule.actions&&nh(this._rawModule.actions,t)};eu.prototype.forEachMutation=function(t){this._rawModule.mutations&&nh(this._rawModule.mutations,t)};Object.defineProperties(eu.prototype,F6);var Qf=function(t){this.register([],t,!1)};Qf.prototype.get=function(t){return t.reduce(function(n,a){return n.getChild(a)},this.root)};Qf.prototype.getNamespace=function(t){var n=this.root;return t.reduce(function(a,r){return n=n.getChild(r),a+(n.namespaced?r+"/":"")},"")};Qf.prototype.update=function(t){P6([],this.root,t)};Qf.prototype.register=function(t,n,a){var r=this;a===void 0&&(a=!0);var s=new eu(n,a);if(t.length===0)this.root=s;else{var o=this.get(t.slice(0,-1));o.addChild(t[t.length-1],s)}n.modules&&nh(n.modules,function(i,c){r.register(t.concat(c),i,a)})};Qf.prototype.unregister=function(t){var n=this.get(t.slice(0,-1)),a=t[t.length-1],r=n.getChild(a);r&&r.runtime&&n.removeChild(a)};Qf.prototype.isRegistered=function(t){var n=this.get(t.slice(0,-1)),a=t[t.length-1];return n?n.hasChild(a):!1};function P6(e,t,n){if(t.update(n),n.modules)for(var a in n.modules){if(!t.getChild(a))return;P6(e.concat(a),t.getChild(a),n.modules[a])}}function Vae(e){return new ui(e)}var ui=function(t){var n=this;t===void 0&&(t={});var a=t.plugins;a===void 0&&(a=[]);var r=t.strict;r===void 0&&(r=!1);var s=t.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new Qf(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=s;var o=this,i=this,c=i.dispatch,A=i.commit;this.dispatch=function(m,v){return c.call(o,m,v)},this.commit=function(m,v,p){return A.call(o,m,v,p)},this.strict=r;var d=this._modules.root.state;lw(this,d,[],this._modules.root),Sk(this,d),a.forEach(function(f){return f(n)})},Bk={state:{configurable:!0}};ui.prototype.install=function(t,n){t.provide(n||x6,this),t.config.globalProperties.$store=this;var a=this._devtools!==void 0?this._devtools:!1;a&&Fae(t,this)};Bk.state.get=function(){return this._state.data};Bk.state.set=function(e){};ui.prototype.commit=function(t,n,a){var r=this,s=D_(t,n,a),o=s.type,i=s.payload,c={type:o,payload:i},A=this._mutations[o];A&&(this._withCommit(function(){A.forEach(function(f){f(i)})}),this._subscribers.slice().forEach(function(d){return d(c,r.state)}))};ui.prototype.dispatch=function(t,n){var a=this,r=D_(t,n),s=r.type,o=r.payload,i={type:s,payload:o},c=this._actions[s];if(c){try{this._actionSubscribers.slice().filter(function(d){return d.before}).forEach(function(d){return d.before(i,a.state)})}catch{}var A=c.length>1?Promise.all(c.map(function(d){return d(o)})):c[0](o);return new Promise(function(d,f){A.then(function(m){try{a._actionSubscribers.filter(function(v){return v.after}).forEach(function(v){return v.after(i,a.state)})}catch{}d(m)},function(m){try{a._actionSubscribers.filter(function(v){return v.error}).forEach(function(v){return v.error(i,a.state,m)})}catch{}f(m)})})}};ui.prototype.subscribe=function(t,n){return C6(t,this._subscribers,n)};ui.prototype.subscribeAction=function(t,n){var a=typeof t=="function"?{before:t}:t;return C6(a,this._actionSubscribers,n)};ui.prototype.watch=function(t,n,a){var r=this;return je(function(){return t(r.state,r.getters)},n,Object.assign({},a))};ui.prototype.replaceState=function(t){var n=this;this._withCommit(function(){n._state.data=t})};ui.prototype.registerModule=function(t,n,a){a===void 0&&(a={}),typeof t=="string"&&(t=[t]),this._modules.register(t,n),lw(this,this.state,t,this._modules.get(t),a.preserveState),Sk(this,this.state)};ui.prototype.unregisterModule=function(t){var n=this;typeof t=="string"&&(t=[t]),this._modules.unregister(t),this._withCommit(function(){var a=Ek(n.state,t.slice(0,-1));delete a[t[t.length-1]]}),S6(this)};ui.prototype.hasModule=function(t){return typeof t=="string"&&(t=[t]),this._modules.isRegistered(t)};ui.prototype.hotUpdate=function(t){this._modules.update(t),S6(this,!0)};ui.prototype._withCommit=function(t){var n=this._committing;this._committing=!0,t(),this._committing=n};Object.defineProperties(ui.prototype,Bk);const Km=typeof document<"u";function D6(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Lae(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&D6(e.default)}const Ka=Object.assign;function Rx(e,t){const n={};for(const a in t){const r=t[a];n[a]=Ql(r)?r.map(e):e(r)}return n}const $p=()=>{},Ql=Array.isArray,U6=/#/g,Mae=/&/g,Oae=/\//g,Hae=/=/g,$ae=/\?/g,R6=/\+/g,Qae=/%5B/g,Gae=/%5D/g,N6=/%5E/g,zae=/%60/g,V6=/%7B/g,Kae=/%7C/g,L6=/%7D/g,Wae=/%20/g;function kk(e){return encodeURI(""+e).replace(Kae,"|").replace(Qae,"[").replace(Gae,"]")}function jae(e){return kk(e).replace(V6,"{").replace(L6,"}").replace(N6,"^")}function LS(e){return kk(e).replace(R6,"%2B").replace(Wae,"+").replace(U6,"%23").replace(Mae,"%26").replace(zae,"`").replace(V6,"{").replace(L6,"}").replace(N6,"^")}function qae(e){return LS(e).replace(Hae,"%3D")}function Yae(e){return kk(e).replace(U6,"%23").replace($ae,"%3F")}function Xae(e){return e==null?"":Yae(e).replace(Oae,"%2F")}function S0(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const Jae=/\/$/,Zae=e=>e.replace(Jae,"");function Nx(e,t,n="/"){let a,r={},s="",o="";const i=t.indexOf("#");let c=t.indexOf("?");return i<c&&i>=0&&(c=-1),c>-1&&(a=t.slice(0,c),s=t.slice(c+1,i>-1?i:t.length),r=e(s)),i>-1&&(a=a||t.slice(0,i),o=t.slice(i,t.length)),a=are(a??t,n),{fullPath:a+(s&&"?")+s+o,path:a,query:r,hash:S0(o)}}function ere(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function ID(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function tre(e,t,n){const a=t.matched.length-1,r=n.matched.length-1;return a>-1&&a===r&&Uv(t.matched[a],n.matched[r])&&M6(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Uv(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function M6(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!nre(e[n],t[n]))return!1;return!0}function nre(e,t){return Ql(e)?FD(e,t):Ql(t)?FD(t,e):e===t}function FD(e,t){return Ql(t)?e.length===t.length&&e.every((n,a)=>n===t[a]):e.length===1&&e[0]===t}function are(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),a=e.split("/"),r=a[a.length-1];(r===".."||r===".")&&a.push("");let s=n.length-1,o,i;for(o=0;o<a.length;o++)if(i=a[o],i!==".")if(i==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+a.slice(o).join("/")}const nd={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var E0;(function(e){e.pop="pop",e.push="push"})(E0||(E0={}));var Qp;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Qp||(Qp={}));function rre(e){if(!e)if(Km){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Zae(e)}const sre=/^[^#]+#/;function ore(e,t){return e.replace(sre,"#")+t}function ire(e,t){const n=document.documentElement.getBoundingClientRect(),a=e.getBoundingClientRect();return{behavior:t.behavior,left:a.left-n.left-(t.left||0),top:a.top-n.top-(t.top||0)}}const uw=()=>({left:window.scrollX,top:window.scrollY});function lre(e){let t;if("el"in e){const n=e.el,a=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?a?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;t=ire(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function PD(e,t){return(history.state?history.state.position-t:-1)+e}const MS=new Map;function ure(e,t){MS.set(e,t)}function cre(e){const t=MS.get(e);return MS.delete(e),t}let dre=()=>location.protocol+"//"+location.host;function O6(e,t){const{pathname:n,search:a,hash:r}=t,s=e.indexOf("#");if(s>-1){let i=r.includes(e.slice(s))?e.slice(s).length:1,c=r.slice(i);return c[0]!=="/"&&(c="/"+c),ID(c,"")}return ID(n,e)+a+r}function Are(e,t,n,a){let r=[],s=[],o=null;const i=({state:m})=>{const v=O6(e,location),p=n.value,g=t.value;let y=0;if(m){if(n.value=v,t.value=m,o&&o===p){o=null;return}y=g?m.position-g.position:0}else a(v);r.forEach(w=>{w(n.value,p,{delta:y,type:E0.pop,direction:y?y>0?Qp.forward:Qp.back:Qp.unknown})})};function c(){o=n.value}function A(m){r.push(m);const v=()=>{const p=r.indexOf(m);p>-1&&r.splice(p,1)};return s.push(v),v}function d(){const{history:m}=window;m.state&&m.replaceState(Ka({},m.state,{scroll:uw()}),"")}function f(){for(const m of s)m();s=[],window.removeEventListener("popstate",i),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",i),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:c,listen:A,destroy:f}}function DD(e,t,n,a=!1,r=!1){return{back:e,current:t,forward:n,replaced:a,position:window.history.length,scroll:r?uw():null}}function fre(e){const{history:t,location:n}=window,a={value:O6(e,n)},r={value:t.state};r.value||s(a.value,{back:null,current:a.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function s(c,A,d){const f=e.indexOf("#"),m=f>-1?(n.host&&document.querySelector("base")?e:e.slice(f))+c:dre()+e+c;try{t[d?"replaceState":"pushState"](A,"",m),r.value=A}catch(v){console.error(v),n[d?"replace":"assign"](m)}}function o(c,A){const d=Ka({},t.state,DD(r.value.back,c,r.value.forward,!0),A,{position:r.value.position});s(c,d,!0),a.value=c}function i(c,A){const d=Ka({},r.value,t.state,{forward:c,scroll:uw()});s(d.current,d,!0);const f=Ka({},DD(a.value,c,null),{position:d.position+1},A);s(c,f,!1),a.value=c}return{location:a,state:r,push:i,replace:o}}function mre(e){e=rre(e);const t=fre(e),n=Are(e,t.state,t.location,t.replace);function a(s,o=!0){o||n.pauseListeners(),history.go(s)}const r=Ka({location:"",base:e,go:a,createHref:ore.bind(null,e)},t,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function vre(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),mre(e)}function hre(e){return typeof e=="string"||e&&typeof e=="object"}function H6(e){return typeof e=="string"||typeof e=="symbol"}const $6=Symbol("");var UD;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(UD||(UD={}));function Rv(e,t){return Ka(new Error,{type:e,[$6]:!0},t)}function lc(e,t){return e instanceof Error&&$6 in e&&(t==null||!!(e.type&t))}const RD="[^/]+?",pre={sensitive:!1,strict:!1,start:!0,end:!0},gre=/[.+*?^${}()[\]/\\]/g;function yre(e,t){const n=Ka({},pre,t),a=[];let r=n.start?"^":"";const s=[];for(const A of e){const d=A.length?[]:[90];n.strict&&!A.length&&(r+="/");for(let f=0;f<A.length;f++){const m=A[f];let v=40+(n.sensitive?.25:0);if(m.type===0)f||(r+="/"),r+=m.value.replace(gre,"\\$&"),v+=40;else if(m.type===1){const{value:p,repeatable:g,optional:y,regexp:w}=m;s.push({name:p,repeatable:g,optional:y});const b=w||RD;if(b!==RD){v+=10;try{new RegExp(`(${b})`)}catch(T){throw new Error(`Invalid custom RegExp for param "${p}" (${b}): `+T.message)}}let x=g?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;f||(x=y&&A.length<2?`(?:/${x})`:"/"+x),y&&(x+="?"),r+=x,v+=20,y&&(v+=-8),g&&(v+=-20),b===".*"&&(v+=-50)}d.push(v)}a.push(d)}if(n.strict&&n.end){const A=a.length-1;a[A][a[A].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function i(A){const d=A.match(o),f={};if(!d)return null;for(let m=1;m<d.length;m++){const v=d[m]||"",p=s[m-1];f[p.name]=v&&p.repeatable?v.split("/"):v}return f}function c(A){let d="",f=!1;for(const m of e){(!f||!d.endsWith("/"))&&(d+="/"),f=!1;for(const v of m)if(v.type===0)d+=v.value;else if(v.type===1){const{value:p,repeatable:g,optional:y}=v,w=p in A?A[p]:"";if(Ql(w)&&!g)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const b=Ql(w)?w.join("/"):w;if(!b)if(y)m.length<2&&(d.endsWith("/")?d=d.slice(0,-1):f=!0);else throw new Error(`Missing required param "${p}"`);d+=b}}return d||"/"}return{re:o,score:a,keys:s,parse:i,stringify:c}}function _re(e,t){let n=0;for(;n<e.length&&n<t.length;){const a=t[n]-e[n];if(a)return a;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Q6(e,t){let n=0;const a=e.score,r=t.score;for(;n<a.length&&n<r.length;){const s=_re(a[n],r[n]);if(s)return s;n++}if(Math.abs(r.length-a.length)===1){if(ND(a))return 1;if(ND(r))return-1}return r.length-a.length}function ND(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const wre={type:0,value:""},bre=/[a-zA-Z0-9_]/;function xre(e){if(!e)return[[]];if(e==="/")return[[wre]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(v){throw new Error(`ERR (${n})/"${A}": ${v}`)}let n=0,a=n;const r=[];let s;function o(){s&&r.push(s),s=[]}let i=0,c,A="",d="";function f(){A&&(n===0?s.push({type:0,value:A}):n===1||n===2||n===3?(s.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${A}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:A,regexp:d,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),A="")}function m(){A+=c}for(;i<e.length;){if(c=e[i++],c==="\\"&&n!==2){a=n,n=4;continue}switch(n){case 0:c==="/"?(A&&f(),o()):c===":"?(f(),n=1):m();break;case 4:m(),n=a;break;case 1:c==="("?n=2:bre.test(c)?m():(f(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&i--);break;case 2:c===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+c:n=3:d+=c;break;case 3:f(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&i--,d="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${A}"`),f(),o(),r}function Cre(e,t,n){const a=yre(xre(e.path),n),r=Ka(a,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function Sre(e,t){const n=[],a=new Map;t=OD({strict:!1,end:!0,sensitive:!1},t);function r(f){return a.get(f)}function s(f,m,v){const p=!v,g=LD(f);g.aliasOf=v&&v.record;const y=OD(t,f),w=[g];if("alias"in f){const T=typeof f.alias=="string"?[f.alias]:f.alias;for(const D of T)w.push(LD(Ka({},g,{components:v?v.record.components:g.components,path:D,aliasOf:v?v.record:g})))}let b,x;for(const T of w){const{path:D}=T;if(m&&D[0]!=="/"){const k=m.record.path,S=k[k.length-1]==="/"?"":"/";T.path=m.record.path+(D&&S+D)}if(b=Cre(T,m,y),v?v.alias.push(b):(x=x||b,x!==b&&x.alias.push(b),p&&f.name&&!MD(b)&&o(f.name)),G6(b)&&c(b),g.children){const k=g.children;for(let S=0;S<k.length;S++)s(k[S],b,v&&v.children[S])}v=v||b}return x?()=>{o(x)}:$p}function o(f){if(H6(f)){const m=a.get(f);m&&(a.delete(f),n.splice(n.indexOf(m),1),m.children.forEach(o),m.alias.forEach(o))}else{const m=n.indexOf(f);m>-1&&(n.splice(m,1),f.record.name&&a.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function i(){return n}function c(f){const m=kre(f,n);n.splice(m,0,f),f.record.name&&!MD(f)&&a.set(f.record.name,f)}function A(f,m){let v,p={},g,y;if("name"in f&&f.name){if(v=a.get(f.name),!v)throw Rv(1,{location:f});y=v.record.name,p=Ka(VD(m.params,v.keys.filter(x=>!x.optional).concat(v.parent?v.parent.keys.filter(x=>x.optional):[]).map(x=>x.name)),f.params&&VD(f.params,v.keys.map(x=>x.name))),g=v.stringify(p)}else if(f.path!=null)g=f.path,v=n.find(x=>x.re.test(g)),v&&(p=v.parse(g),y=v.record.name);else{if(v=m.name?a.get(m.name):n.find(x=>x.re.test(m.path)),!v)throw Rv(1,{location:f,currentLocation:m});y=v.record.name,p=Ka({},m.params,f.params),g=v.stringify(p)}const w=[];let b=v;for(;b;)w.unshift(b.record),b=b.parent;return{name:y,path:g,params:p,matched:w,meta:Bre(w)}}e.forEach(f=>s(f));function d(){n.length=0,a.clear()}return{addRoute:s,resolve:A,removeRoute:o,clearRoutes:d,getRoutes:i,getRecordMatcher:r}}function VD(e,t){const n={};for(const a of t)a in e&&(n[a]=e[a]);return n}function LD(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Ere(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Ere(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const a in e.components)t[a]=typeof n=="object"?n[a]:n;return t}function MD(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Bre(e){return e.reduce((t,n)=>Ka(t,n.meta),{})}function OD(e,t){const n={};for(const a in e)n[a]=a in t?t[a]:e[a];return n}function kre(e,t){let n=0,a=t.length;for(;n!==a;){const s=n+a>>1;Q6(e,t[s])<0?a=s:n=s+1}const r=Tre(e);return r&&(a=t.lastIndexOf(r,a-1)),a}function Tre(e){let t=e;for(;t=t.parent;)if(G6(t)&&Q6(e,t)===0)return t}function G6({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Ire(e){const t={};if(e===""||e==="?")return t;const a=(e[0]==="?"?e.slice(1):e).split("&");for(let r=0;r<a.length;++r){const s=a[r].replace(R6," "),o=s.indexOf("="),i=S0(o<0?s:s.slice(0,o)),c=o<0?null:S0(s.slice(o+1));if(i in t){let A=t[i];Ql(A)||(A=t[i]=[A]),A.push(c)}else t[i]=c}return t}function HD(e){let t="";for(let n in e){const a=e[n];if(n=qae(n),a==null){a!==void 0&&(t+=(t.length?"&":"")+n);continue}(Ql(a)?a.map(s=>s&&LS(s)):[a&&LS(a)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+n,s!=null&&(t+="="+s))})}return t}function Fre(e){const t={};for(const n in e){const a=e[n];a!==void 0&&(t[n]=Ql(a)?a.map(r=>r==null?null:""+r):a==null?a:""+a)}return t}const Pre=Symbol(""),$D=Symbol(""),cw=Symbol(""),Tk=Symbol(""),OS=Symbol("");function ep(){let e=[];function t(a){return e.push(a),()=>{const r=e.indexOf(a);r>-1&&e.splice(r,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function Ad(e,t,n,a,r,s=o=>o()){const o=a&&(a.enterCallbacks[r]=a.enterCallbacks[r]||[]);return()=>new Promise((i,c)=>{const A=m=>{m===!1?c(Rv(4,{from:n,to:t})):m instanceof Error?c(m):hre(m)?c(Rv(2,{from:t,to:m})):(o&&a.enterCallbacks[r]===o&&typeof m=="function"&&o.push(m),i())},d=s(()=>e.call(a&&a.instances[r],t,n,A));let f=Promise.resolve(d);e.length<3&&(f=f.then(A)),f.catch(m=>c(m))})}function Vx(e,t,n,a,r=s=>s()){const s=[];for(const o of e)for(const i in o.components){let c=o.components[i];if(!(t!=="beforeRouteEnter"&&!o.instances[i]))if(D6(c)){const d=(c.__vccOpts||c)[t];d&&s.push(Ad(d,n,a,o,i,r))}else{let A=c();s.push(()=>A.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${i}" at "${o.path}"`);const f=Lae(d)?d.default:d;o.mods[i]=d,o.components[i]=f;const v=(f.__vccOpts||f)[t];return v&&Ad(v,n,a,o,i,r)()}))}}return s}function QD(e){const t=Tn(cw),n=Tn(Tk),a=ne(()=>{const c=Qe(e.to);return t.resolve(c)}),r=ne(()=>{const{matched:c}=a.value,{length:A}=c,d=c[A-1],f=n.matched;if(!d||!f.length)return-1;const m=f.findIndex(Uv.bind(null,d));if(m>-1)return m;const v=GD(c[A-2]);return A>1&&GD(d)===v&&f[f.length-1].path!==v?f.findIndex(Uv.bind(null,c[A-2])):m}),s=ne(()=>r.value>-1&&Vre(n.params,a.value.params)),o=ne(()=>r.value>-1&&r.value===n.matched.length-1&&M6(n.params,a.value.params));function i(c={}){if(Nre(c)){const A=t[Qe(e.replace)?"replace":"push"](Qe(e.to)).catch($p);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>A),A}return Promise.resolve()}return{route:a,href:ne(()=>a.value.href),isActive:s,isExactActive:o,navigate:i}}function Dre(e){return e.length===1?e[0]:e}const Ure=nk({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:QD,setup(e,{slots:t}){const n=os(QD(e)),{options:a}=Tn(cw),r=ne(()=>({[zD(e.activeClass,a.linkActiveClass,"router-link-active")]:n.isActive,[zD(e.exactActiveClass,a.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=t.default&&Dre(t.default(n));return e.custom?s:Zl("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},s)}}}),Rre=Ure;function Nre(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Vre(e,t){for(const n in t){const a=t[n],r=e[n];if(typeof a=="string"){if(a!==r)return!1}else if(!Ql(r)||r.length!==a.length||a.some((s,o)=>s!==r[o]))return!1}return!0}function GD(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const zD=(e,t,n)=>e??t??n,Lre=nk({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const a=Tn(OS),r=ne(()=>e.route||a.value),s=Tn($D,0),o=ne(()=>{let A=Qe(s);const{matched:d}=r.value;let f;for(;(f=d[A])&&!f.components;)A++;return A}),i=ne(()=>r.value.matched[o.value]);La($D,ne(()=>o.value+1)),La(Pre,i),La(OS,r);const c=V();return je(()=>[c.value,i.value,e.name],([A,d,f],[m,v,p])=>{d&&(d.instances[f]=A,v&&v!==d&&A&&A===m&&(d.leaveGuards.size||(d.leaveGuards=v.leaveGuards),d.updateGuards.size||(d.updateGuards=v.updateGuards))),A&&d&&(!v||!Uv(d,v)||!m)&&(d.enterCallbacks[f]||[]).forEach(g=>g(A))},{flush:"post"}),()=>{const A=r.value,d=e.name,f=i.value,m=f&&f.components[d];if(!m)return KD(n.default,{Component:m,route:A});const v=f.props[d],p=v?v===!0?A.params:typeof v=="function"?v(A):v:null,y=Zl(m,Ka({},p,t,{onVnodeUnmounted:w=>{w.component.isUnmounted&&(f.instances[d]=null)},ref:c}));return KD(n.default,{Component:y,route:A})||y}}});function KD(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Mre=Lre;function Ore(e){const t=Sre(e.routes,e),n=e.parseQuery||Ire,a=e.stringifyQuery||HD,r=e.history,s=ep(),o=ep(),i=ep(),c=Ht(nd);let A=nd;Km&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=Rx.bind(null,Y=>""+Y),f=Rx.bind(null,Xae),m=Rx.bind(null,S0);function v(Y,W){let ee,ae;return H6(Y)?(ee=t.getRecordMatcher(Y),ae=W):ae=Y,t.addRoute(ae,ee)}function p(Y){const W=t.getRecordMatcher(Y);W&&t.removeRoute(W)}function g(){return t.getRoutes().map(Y=>Y.record)}function y(Y){return!!t.getRecordMatcher(Y)}function w(Y,W){if(W=Ka({},W||c.value),typeof Y=="string"){const de=Nx(n,Y,W.path),_e=t.resolve({path:de.path},W),Re=r.createHref(de.fullPath);return Ka(de,_e,{params:m(_e.params),hash:S0(de.hash),redirectedFrom:void 0,href:Re})}let ee;if(Y.path!=null)ee=Ka({},Y,{path:Nx(n,Y.path,W.path).path});else{const de=Ka({},Y.params);for(const _e in de)de[_e]==null&&delete de[_e];ee=Ka({},Y,{params:f(de)}),W.params=f(W.params)}const ae=t.resolve(ee,W),oe=Y.hash||"";ae.params=d(m(ae.params));const j=ere(a,Ka({},Y,{hash:jae(oe),path:ae.path})),ce=r.createHref(j);return Ka({fullPath:j,hash:oe,query:a===HD?Fre(Y.query):Y.query||{}},ae,{redirectedFrom:void 0,href:ce})}function b(Y){return typeof Y=="string"?Nx(n,Y,c.value.path):Ka({},Y)}function x(Y,W){if(A!==Y)return Rv(8,{from:W,to:Y})}function T(Y){return S(Y)}function D(Y){return T(Ka(b(Y),{replace:!0}))}function k(Y){const W=Y.matched[Y.matched.length-1];if(W&&W.redirect){const{redirect:ee}=W;let ae=typeof ee=="function"?ee(Y):ee;return typeof ae=="string"&&(ae=ae.includes("?")||ae.includes("#")?ae=b(ae):{path:ae},ae.params={}),Ka({query:Y.query,hash:Y.hash,params:ae.path!=null?{}:Y.params},ae)}}function S(Y,W){const ee=A=w(Y),ae=c.value,oe=Y.state,j=Y.force,ce=Y.replace===!0,de=k(ee);if(de)return S(Ka(b(de),{state:typeof de=="object"?Ka({},oe,de.state):oe,force:j,replace:ce}),W||ee);const _e=ee;_e.redirectedFrom=W;let Re;return!j&&tre(a,ae,ee)&&(Re=Rv(16,{to:_e,from:ae}),q(ae,ae,!0,!1)),(Re?Promise.resolve(Re):U(_e,ae)).catch(be=>lc(be)?lc(be,2)?be:re(be):le(be,_e,ae)).then(be=>{if(be){if(lc(be,2))return S(Ka({replace:ce},b(be.to),{state:typeof be.to=="object"?Ka({},oe,be.to.state):oe,force:j}),W||_e)}else be=L(_e,ae,!0,ce,oe);return F(_e,ae,be),be})}function E(Y,W){const ee=x(Y,W);return ee?Promise.reject(ee):Promise.resolve()}function C(Y){const W=J.values().next().value;return W&&typeof W.runWithContext=="function"?W.runWithContext(Y):Y()}function U(Y,W){let ee;const[ae,oe,j]=Hre(Y,W);ee=Vx(ae.reverse(),"beforeRouteLeave",Y,W);for(const de of ae)de.leaveGuards.forEach(_e=>{ee.push(Ad(_e,Y,W))});const ce=E.bind(null,Y,W);return ee.push(ce),te(ee).then(()=>{ee=[];for(const de of s.list())ee.push(Ad(de,Y,W));return ee.push(ce),te(ee)}).then(()=>{ee=Vx(oe,"beforeRouteUpdate",Y,W);for(const de of oe)de.updateGuards.forEach(_e=>{ee.push(Ad(_e,Y,W))});return ee.push(ce),te(ee)}).then(()=>{ee=[];for(const de of j)if(de.beforeEnter)if(Ql(de.beforeEnter))for(const _e of de.beforeEnter)ee.push(Ad(_e,Y,W));else ee.push(Ad(de.beforeEnter,Y,W));return ee.push(ce),te(ee)}).then(()=>(Y.matched.forEach(de=>de.enterCallbacks={}),ee=Vx(j,"beforeRouteEnter",Y,W,C),ee.push(ce),te(ee))).then(()=>{ee=[];for(const de of o.list())ee.push(Ad(de,Y,W));return ee.push(ce),te(ee)}).catch(de=>lc(de,8)?de:Promise.reject(de))}function F(Y,W,ee){i.list().forEach(ae=>C(()=>ae(Y,W,ee)))}function L(Y,W,ee,ae,oe){const j=x(Y,W);if(j)return j;const ce=W===nd,de=Km?history.state:{};ee&&(ae||ce?r.replace(Y.fullPath,Ka({scroll:ce&&de&&de.scroll},oe)):r.push(Y.fullPath,oe)),c.value=Y,q(Y,W,ee,ce),re()}let H;function ue(){H||(H=r.listen((Y,W,ee)=>{if(!M.listening)return;const ae=w(Y),oe=k(ae);if(oe){S(Ka(oe,{replace:!0,force:!0}),ae).catch($p);return}A=ae;const j=c.value;Km&&ure(PD(j.fullPath,ee.delta),uw()),U(ae,j).catch(ce=>lc(ce,12)?ce:lc(ce,2)?(S(Ka(b(ce.to),{force:!0}),ae).then(de=>{lc(de,20)&&!ee.delta&&ee.type===E0.pop&&r.go(-1,!1)}).catch($p),Promise.reject()):(ee.delta&&r.go(-ee.delta,!1),le(ce,ae,j))).then(ce=>{ce=ce||L(ae,j,!1),ce&&(ee.delta&&!lc(ce,8)?r.go(-ee.delta,!1):ee.type===E0.pop&&lc(ce,20)&&r.go(-1,!1)),F(ae,j,ce)}).catch($p)}))}let ie=ep(),Q=ep(),X;function le(Y,W,ee){re(Y);const ae=Q.list();return ae.length?ae.forEach(oe=>oe(Y,W,ee)):console.error(Y),Promise.reject(Y)}function Z(){return X&&c.value!==nd?Promise.resolve():new Promise((Y,W)=>{ie.add([Y,W])})}function re(Y){return X||(X=!Y,ue(),ie.list().forEach(([W,ee])=>Y?ee(Y):W()),ie.reset()),Y}function q(Y,W,ee,ae){const{scrollBehavior:oe}=e;if(!Km||!oe)return Promise.resolve();const j=!ee&&cre(PD(Y.fullPath,0))||(ae||!ee)&&history.state&&history.state.scroll||null;return _n().then(()=>oe(Y,W,j)).then(ce=>ce&&lre(ce)).catch(ce=>le(ce,Y,W))}const P=Y=>r.go(Y);let G;const J=new Set,M={currentRoute:c,listening:!0,addRoute:v,removeRoute:p,clearRoutes:t.clearRoutes,hasRoute:y,getRoutes:g,resolve:w,options:e,push:T,replace:D,go:P,back:()=>P(-1),forward:()=>P(1),beforeEach:s.add,beforeResolve:o.add,afterEach:i.add,onError:Q.add,isReady:Z,install(Y){const W=this;Y.component("RouterLink",Rre),Y.component("RouterView",Mre),Y.config.globalProperties.$router=W,Object.defineProperty(Y.config.globalProperties,"$route",{enumerable:!0,get:()=>Qe(c)}),Km&&!G&&c.value===nd&&(G=!0,T(r.location).catch(oe=>{}));const ee={};for(const oe in nd)Object.defineProperty(ee,oe,{get:()=>c.value[oe],enumerable:!0});Y.provide(cw,W),Y.provide(Tk,DL(ee)),Y.provide(OS,c);const ae=Y.unmount;J.add(Y),Y.unmount=function(){J.delete(Y),J.size<1&&(A=nd,H&&H(),H=null,c.value=nd,G=!1,X=!1),ae()}}};function te(Y){return Y.reduce((W,ee)=>W.then(()=>C(ee)),Promise.resolve())}return M}function Hre(e,t){const n=[],a=[],r=[],s=Math.max(t.matched.length,e.matched.length);for(let o=0;o<s;o++){const i=t.matched[o];i&&(e.matched.find(A=>Uv(A,i))?a.push(i):n.push(i));const c=e.matched[o];c&&(t.matched.find(A=>Uv(A,c))||r.push(c))}return[n,a,r]}function sl(){return Tn(cw)}function Gf(e){return Tn(Tk)}function ca(){const e=ra(),t=ne(()=>e.getters["snackbar/snackbar"]),n=ne(()=>e.getters["snackbar/isSnackbarVisible"]),a=m=>{e.dispatch("snackbar/showSnackbar",m)},r=()=>{e.dispatch("snackbar/hideSnackbar")},s=m=>{e.dispatch("snackbar/setSnackbarVisibility",m)},o=m=>{e.dispatch("snackbar/showSuccess",m)},i=m=>{e.dispatch("snackbar/showError",m)};return{snackbar:t,isVisible:n,showSnackbar:a,hideSnackbar:r,setVisibility:s,showSuccess:o,showError:i,showWarning:m=>{e.dispatch("snackbar/showWarning",m)},showInfo:m=>{e.dispatch("snackbar/showInfo",m)},handleApiResponse:(m,v=null)=>{if(m.success){const p=v||m.message||"Operation successful";o(p)}else{const p=m.error||m.message||"An error occurred";i(p)}},handleApiError:(m,v="An error occurred")=>{let p=v;m.response?.data?.error?p=m.response.data.error:m.response?.data?.message?p=m.response.data.message:m.message&&(p=m.message),i(p)}}}const du={HTTPS_SERVER:29200,HTTP_SERVER:29201,WEBSOCKET:29200,HEALTH_ENDPOINTS:{HTTPS:"/health",HTTP:"/health"}},kr=(e="localhost")=>({https:`https://${e}:${du.HTTPS_SERVER}`,http:`http://${e}:${du.HTTP_SERVER}`,api:{https:`https://${e}:${du.HTTPS_SERVER}/api`,http:`http://${e}:${du.HTTP_SERVER}/api`},websocket:{wss:`wss://${e}:${du.WEBSOCKET}`,ws:`ws://${e}:${du.HTTP_SERVER}`},health:{https:`https://${e}:${du.HTTPS_SERVER}${du.HEALTH_ENDPOINTS.HTTPS}`,http:`http://${e}:${du.HTTP_SERVER}${du.HEALTH_ENDPOINTS.HTTP}`}}),Ra=()=>typeof window<"u"&&window.process&&window.process.type==="renderer",WD=()=>!Ra(),$re=()=>{try{let e=null;if(window.location.search&&(e=new URLSearchParams(window.location.search).get("endpoint"),e))return console.log("[environment] Retrieved endpoint from URL search params:",e),e;try{if(e=new URL(window.location.href).searchParams.get("endpoint"),e)return console.log("[environment] Retrieved endpoint from URL object:",e),e}catch(t){console.warn("[environment] Failed to parse URL from window.location.href:",t)}if(window.location.hash&&window.location.hash.includes("?")){const t=window.location.hash.split("?");if(t.length>1&&(e=new URLSearchParams("?"+t[1]).get("endpoint"),e))return console.log("[environment] Retrieved endpoint from hash params:",e),e}return null}catch(e){return console.warn("[environment] Failed to extract endpoint from URL:",e),null}},Ik=()=>{if(Ra()){const a=kr("localhost").api.http;return console.log("[environment] Electron mode - using base URL:",a),a}const e=$re();if(!e){const a="Web mode requires an endpoint parameter in the URL. Please add ?endpoint=https://your-api-server.com to the URL.";throw console.error("[environment]",a),new Error(a)}if(e.includes("localhost")||e.includes("127.0.0.1")){const a="Web mode requires a remote endpoint URL, not localhost. Please provide a valid remote server endpoint.";throw console.error("[environment]",a),new Error(a)}if(!e.startsWith("http://")&&!e.startsWith("https://")){const a="Web mode requires a full endpoint URL (http:// or https://).";throw console.error("[environment]",a),new Error(a)}const t=e.replace(/\/$/,""),n=t.endsWith("/api")?t:t+"/api";return console.log("[environment] Web mode - using base URL:",n),n},jD=()=>{try{return Ik().replace(/\/api\/?$/,"")}catch(e){if(console.error("[environment] Failed to get server base URL:",e),Ra())return kr("localhost").http;throw e}},Qre=(e="/ws/transcribe")=>{try{const t=Ik(),n=new URL(t),r=`${n.protocol==="https:"?"wss:":"ws:"}//${n.host}${e}`;return console.log("[environment] WebSocket URL:",r),r}catch(t){if(console.error("[environment] Failed to get WebSocket URL:",t),Ra())return`${kr("localhost").websocket.ws}${e}`;throw t}};function z6(e,t){return function(){return e.apply(t,arguments)}}const{toString:Gre}=Object.prototype,{getPrototypeOf:Fk}=Object,{iterator:dw,toStringTag:K6}=Symbol,Aw=(e=>t=>{const n=Gre.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),tu=e=>(e=e.toLowerCase(),t=>Aw(t)===e),fw=e=>t=>typeof t===e,{isArray:ah}=Array,Nv=fw("undefined");function Ag(e){return e!==null&&!Nv(e)&&e.constructor!==null&&!Nv(e.constructor)&&si(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const W6=tu("ArrayBuffer");function zre(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&W6(e.buffer),t}const Kre=fw("string"),si=fw("function"),j6=fw("number"),fg=e=>e!==null&&typeof e=="object",Wre=e=>e===!0||e===!1,Wy=e=>{if(Aw(e)!=="object")return!1;const t=Fk(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(K6 in e)&&!(dw in e)},jre=e=>{if(!fg(e)||Ag(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},qre=tu("Date"),Yre=tu("File"),Xre=tu("Blob"),Jre=tu("FileList"),Zre=e=>fg(e)&&si(e.pipe),ese=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||si(e.append)&&((t=Aw(e))==="formdata"||t==="object"&&si(e.toString)&&e.toString()==="[object FormData]"))},tse=tu("URLSearchParams"),[nse,ase,rse,sse]=["ReadableStream","Request","Response","Headers"].map(tu),ose=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function mg(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let a,r;if(typeof e!="object"&&(e=[e]),ah(e))for(a=0,r=e.length;a<r;a++)t.call(null,e[a],a,e);else{if(Ag(e))return;const s=n?Object.getOwnPropertyNames(e):Object.keys(e),o=s.length;let i;for(a=0;a<o;a++)i=s[a],t.call(null,e[i],i,e)}}function q6(e,t){if(Ag(e))return null;t=t.toLowerCase();const n=Object.keys(e);let a=n.length,r;for(;a-- >0;)if(r=n[a],t===r.toLowerCase())return r;return null}const KA=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Y6=e=>!Nv(e)&&e!==KA;function HS(){const{caseless:e,skipUndefined:t}=Y6(this)&&this||{},n={},a=(r,s)=>{const o=e&&q6(n,s)||s;Wy(n[o])&&Wy(r)?n[o]=HS(n[o],r):Wy(r)?n[o]=HS({},r):ah(r)?n[o]=r.slice():(!t||!Nv(r))&&(n[o]=r)};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&mg(arguments[r],a);return n}const ise=(e,t,n,{allOwnKeys:a}={})=>(mg(t,(r,s)=>{n&&si(r)?e[s]=z6(r,n):e[s]=r},{allOwnKeys:a}),e),lse=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),use=(e,t,n,a)=>{e.prototype=Object.create(t.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},cse=(e,t,n,a)=>{let r,s,o;const i={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),s=r.length;s-- >0;)o=r[s],(!a||a(o,e,t))&&!i[o]&&(t[o]=e[o],i[o]=!0);e=n!==!1&&Fk(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},dse=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const a=e.indexOf(t,n);return a!==-1&&a===n},Ase=e=>{if(!e)return null;if(ah(e))return e;let t=e.length;if(!j6(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},fse=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Fk(Uint8Array)),mse=(e,t)=>{const a=(e&&e[dw]).call(e);let r;for(;(r=a.next())&&!r.done;){const s=r.value;t.call(e,s[0],s[1])}},vse=(e,t)=>{let n;const a=[];for(;(n=e.exec(t))!==null;)a.push(n);return a},hse=tu("HTMLFormElement"),pse=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,a,r){return a.toUpperCase()+r}),qD=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),gse=tu("RegExp"),X6=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),a={};mg(n,(r,s)=>{let o;(o=t(r,s,e))!==!1&&(a[s]=o||r)}),Object.defineProperties(e,a)},yse=e=>{X6(e,(t,n)=>{if(si(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const a=e[n];if(si(a)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},_se=(e,t)=>{const n={},a=r=>{r.forEach(s=>{n[s]=!0})};return ah(e)?a(e):a(String(e).split(t)),n},wse=()=>{},bse=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function xse(e){return!!(e&&si(e.append)&&e[K6]==="FormData"&&e[dw])}const Cse=e=>{const t=new Array(10),n=(a,r)=>{if(fg(a)){if(t.indexOf(a)>=0)return;if(Ag(a))return a;if(!("toJSON"in a)){t[r]=a;const s=ah(a)?[]:{};return mg(a,(o,i)=>{const c=n(o,r+1);!Nv(c)&&(s[i]=c)}),t[r]=void 0,s}}return a};return n(e,0)},Sse=tu("AsyncFunction"),Ese=e=>e&&(fg(e)||si(e))&&si(e.then)&&si(e.catch),J6=((e,t)=>e?setImmediate:t?((n,a)=>(KA.addEventListener("message",({source:r,data:s})=>{r===KA&&s===n&&a.length&&a.shift()()},!1),r=>{a.push(r),KA.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",si(KA.postMessage)),Bse=typeof queueMicrotask<"u"?queueMicrotask.bind(KA):typeof process<"u"&&process.nextTick||J6,kse=e=>e!=null&&si(e[dw]),Ct={isArray:ah,isArrayBuffer:W6,isBuffer:Ag,isFormData:ese,isArrayBufferView:zre,isString:Kre,isNumber:j6,isBoolean:Wre,isObject:fg,isPlainObject:Wy,isEmptyObject:jre,isReadableStream:nse,isRequest:ase,isResponse:rse,isHeaders:sse,isUndefined:Nv,isDate:qre,isFile:Yre,isBlob:Xre,isRegExp:gse,isFunction:si,isStream:Zre,isURLSearchParams:tse,isTypedArray:fse,isFileList:Jre,forEach:mg,merge:HS,extend:ise,trim:ose,stripBOM:lse,inherits:use,toFlatObject:cse,kindOf:Aw,kindOfTest:tu,endsWith:dse,toArray:Ase,forEachEntry:mse,matchAll:vse,isHTMLForm:hse,hasOwnProperty:qD,hasOwnProp:qD,reduceDescriptors:X6,freezeMethods:yse,toObjectSet:_se,toCamelCase:pse,noop:wse,toFiniteNumber:bse,findKey:q6,global:KA,isContextDefined:Y6,isSpecCompliantForm:xse,toJSONObject:Cse,isAsyncFn:Sse,isThenable:Ese,setImmediate:J6,asap:Bse,isIterable:kse};function ta(e,t,n,a,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),a&&(this.request=a),r&&(this.response=r,this.status=r.status?r.status:null)}Ct.inherits(ta,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ct.toJSONObject(this.config),code:this.code,status:this.status}}});const Z6=ta.prototype,e5={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{e5[e]={value:e}});Object.defineProperties(ta,e5);Object.defineProperty(Z6,"isAxiosError",{value:!0});ta.from=(e,t,n,a,r,s)=>{const o=Object.create(Z6);Ct.toFlatObject(e,o,function(d){return d!==Error.prototype},A=>A!=="isAxiosError");const i=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return ta.call(o,i,c,n,a,r),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",s&&Object.assign(o,s),o};const Tse=null;function $S(e){return Ct.isPlainObject(e)||Ct.isArray(e)}function t5(e){return Ct.endsWith(e,"[]")?e.slice(0,-2):e}function YD(e,t,n){return e?e.concat(t).map(function(r,s){return r=t5(r),!n&&s?"["+r+"]":r}).join(n?".":""):t}function Ise(e){return Ct.isArray(e)&&!e.some($S)}const Fse=Ct.toFlatObject(Ct,{},null,function(t){return/^is[A-Z]/.test(t)});function mw(e,t,n){if(!Ct.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=Ct.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,y){return!Ct.isUndefined(y[g])});const a=n.metaTokens,r=n.visitor||d,s=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&Ct.isSpecCompliantForm(t);if(!Ct.isFunction(r))throw new TypeError("visitor must be a function");function A(p){if(p===null)return"";if(Ct.isDate(p))return p.toISOString();if(Ct.isBoolean(p))return p.toString();if(!c&&Ct.isBlob(p))throw new ta("Blob is not supported. Use a Buffer instead.");return Ct.isArrayBuffer(p)||Ct.isTypedArray(p)?c&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function d(p,g,y){let w=p;if(p&&!y&&typeof p=="object"){if(Ct.endsWith(g,"{}"))g=a?g:g.slice(0,-2),p=JSON.stringify(p);else if(Ct.isArray(p)&&Ise(p)||(Ct.isFileList(p)||Ct.endsWith(g,"[]"))&&(w=Ct.toArray(p)))return g=t5(g),w.forEach(function(x,T){!(Ct.isUndefined(x)||x===null)&&t.append(o===!0?YD([g],T,s):o===null?g:g+"[]",A(x))}),!1}return $S(p)?!0:(t.append(YD(y,g,s),A(p)),!1)}const f=[],m=Object.assign(Fse,{defaultVisitor:d,convertValue:A,isVisitable:$S});function v(p,g){if(!Ct.isUndefined(p)){if(f.indexOf(p)!==-1)throw Error("Circular reference detected in "+g.join("."));f.push(p),Ct.forEach(p,function(w,b){(!(Ct.isUndefined(w)||w===null)&&r.call(t,w,Ct.isString(b)?b.trim():b,g,m))===!0&&v(w,g?g.concat(b):[b])}),f.pop()}}if(!Ct.isObject(e))throw new TypeError("data must be an object");return v(e),t}function XD(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(a){return t[a]})}function Pk(e,t){this._pairs=[],e&&mw(e,this,t)}const n5=Pk.prototype;n5.append=function(t,n){this._pairs.push([t,n])};n5.toString=function(t){const n=t?function(a){return t.call(this,a,XD)}:XD;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function Pse(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function a5(e,t,n){if(!t)return e;const a=n&&n.encode||Pse;Ct.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let s;if(r?s=r(t,n):s=Ct.isURLSearchParams(t)?t.toString():new Pk(t,n).toString(a),s){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class JD{constructor(){this.handlers=[]}use(t,n,a){return this.handlers.push({fulfilled:t,rejected:n,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Ct.forEach(this.handlers,function(a){a!==null&&t(a)})}}const r5={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Dse=typeof URLSearchParams<"u"?URLSearchParams:Pk,Use=typeof FormData<"u"?FormData:null,Rse=typeof Blob<"u"?Blob:null,Nse={isBrowser:!0,classes:{URLSearchParams:Dse,FormData:Use,Blob:Rse},protocols:["http","https","file","blob","url","data"]},Dk=typeof window<"u"&&typeof document<"u",QS=typeof navigator=="object"&&navigator||void 0,Vse=Dk&&(!QS||["ReactNative","NativeScript","NS"].indexOf(QS.product)<0),Lse=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Mse=Dk&&window.location.href||"http://localhost",Ose=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Dk,hasStandardBrowserEnv:Vse,hasStandardBrowserWebWorkerEnv:Lse,navigator:QS,origin:Mse},Symbol.toStringTag,{value:"Module"})),Ao={...Ose,...Nse};function Hse(e,t){return mw(e,new Ao.classes.URLSearchParams,{visitor:function(n,a,r,s){return Ao.isNode&&Ct.isBuffer(n)?(this.append(a,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...t})}function $se(e){return Ct.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Qse(e){const t={},n=Object.keys(e);let a;const r=n.length;let s;for(a=0;a<r;a++)s=n[a],t[s]=e[s];return t}function s5(e){function t(n,a,r,s){let o=n[s++];if(o==="__proto__")return!0;const i=Number.isFinite(+o),c=s>=n.length;return o=!o&&Ct.isArray(r)?r.length:o,c?(Ct.hasOwnProp(r,o)?r[o]=[r[o],a]:r[o]=a,!i):((!r[o]||!Ct.isObject(r[o]))&&(r[o]=[]),t(n,a,r[o],s)&&Ct.isArray(r[o])&&(r[o]=Qse(r[o])),!i)}if(Ct.isFormData(e)&&Ct.isFunction(e.entries)){const n={};return Ct.forEachEntry(e,(a,r)=>{t($se(a),r,n,0)}),n}return null}function Gse(e,t,n){if(Ct.isString(e))try{return(t||JSON.parse)(e),Ct.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(n||JSON.stringify)(e)}const vg={transitional:r5,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const a=n.getContentType()||"",r=a.indexOf("application/json")>-1,s=Ct.isObject(t);if(s&&Ct.isHTMLForm(t)&&(t=new FormData(t)),Ct.isFormData(t))return r?JSON.stringify(s5(t)):t;if(Ct.isArrayBuffer(t)||Ct.isBuffer(t)||Ct.isStream(t)||Ct.isFile(t)||Ct.isBlob(t)||Ct.isReadableStream(t))return t;if(Ct.isArrayBufferView(t))return t.buffer;if(Ct.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let i;if(s){if(a.indexOf("application/x-www-form-urlencoded")>-1)return Hse(t,this.formSerializer).toString();if((i=Ct.isFileList(t))||a.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return mw(i?{"files[]":t}:t,c&&new c,this.formSerializer)}}return s||r?(n.setContentType("application/json",!1),Gse(t)):t}],transformResponse:[function(t){const n=this.transitional||vg.transitional,a=n&&n.forcedJSONParsing,r=this.responseType==="json";if(Ct.isResponse(t)||Ct.isReadableStream(t))return t;if(t&&Ct.isString(t)&&(a&&!this.responseType||r)){const o=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(t,this.parseReviver)}catch(i){if(o)throw i.name==="SyntaxError"?ta.from(i,ta.ERR_BAD_RESPONSE,this,null,this.response):i}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ao.classes.FormData,Blob:Ao.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ct.forEach(["delete","get","head","post","put","patch"],e=>{vg.headers[e]={}});const zse=Ct.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Kse=e=>{const t={};let n,a,r;return e&&e.split(`
`).forEach(function(o){r=o.indexOf(":"),n=o.substring(0,r).trim().toLowerCase(),a=o.substring(r+1).trim(),!(!n||t[n]&&zse[n])&&(n==="set-cookie"?t[n]?t[n].push(a):t[n]=[a]:t[n]=t[n]?t[n]+", "+a:a)}),t},ZD=Symbol("internals");function tp(e){return e&&String(e).trim().toLowerCase()}function jy(e){return e===!1||e==null?e:Ct.isArray(e)?e.map(jy):String(e)}function Wse(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=n.exec(e);)t[a[1]]=a[2];return t}const jse=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Lx(e,t,n,a,r){if(Ct.isFunction(a))return a.call(this,t,n);if(r&&(t=n),!!Ct.isString(t)){if(Ct.isString(a))return t.indexOf(a)!==-1;if(Ct.isRegExp(a))return a.test(t)}}function qse(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,a)=>n.toUpperCase()+a)}function Yse(e,t){const n=Ct.toCamelCase(" "+t);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+n,{value:function(r,s,o){return this[a].call(this,t,r,s,o)},configurable:!0})})}let oi=class{constructor(t){t&&this.set(t)}set(t,n,a){const r=this;function s(i,c,A){const d=tp(c);if(!d)throw new Error("header name must be a non-empty string");const f=Ct.findKey(r,d);(!f||r[f]===void 0||A===!0||A===void 0&&r[f]!==!1)&&(r[f||c]=jy(i))}const o=(i,c)=>Ct.forEach(i,(A,d)=>s(A,d,c));if(Ct.isPlainObject(t)||t instanceof this.constructor)o(t,n);else if(Ct.isString(t)&&(t=t.trim())&&!jse(t))o(Kse(t),n);else if(Ct.isObject(t)&&Ct.isIterable(t)){let i={},c,A;for(const d of t){if(!Ct.isArray(d))throw TypeError("Object iterator must return a key-value pair");i[A=d[0]]=(c=i[A])?Ct.isArray(c)?[...c,d[1]]:[c,d[1]]:d[1]}o(i,n)}else t!=null&&s(n,t,a);return this}get(t,n){if(t=tp(t),t){const a=Ct.findKey(this,t);if(a){const r=this[a];if(!n)return r;if(n===!0)return Wse(r);if(Ct.isFunction(n))return n.call(this,r,a);if(Ct.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=tp(t),t){const a=Ct.findKey(this,t);return!!(a&&this[a]!==void 0&&(!n||Lx(this,this[a],a,n)))}return!1}delete(t,n){const a=this;let r=!1;function s(o){if(o=tp(o),o){const i=Ct.findKey(a,o);i&&(!n||Lx(a,a[i],i,n))&&(delete a[i],r=!0)}}return Ct.isArray(t)?t.forEach(s):s(t),r}clear(t){const n=Object.keys(this);let a=n.length,r=!1;for(;a--;){const s=n[a];(!t||Lx(this,this[s],s,t,!0))&&(delete this[s],r=!0)}return r}normalize(t){const n=this,a={};return Ct.forEach(this,(r,s)=>{const o=Ct.findKey(a,s);if(o){n[o]=jy(r),delete n[s];return}const i=t?qse(s):String(s).trim();i!==s&&delete n[s],n[i]=jy(r),a[i]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return Ct.forEach(this,(a,r)=>{a!=null&&a!==!1&&(n[r]=t&&Ct.isArray(a)?a.join(", "):a)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const a=new this(t);return n.forEach(r=>a.set(r)),a}static accessor(t){const a=(this[ZD]=this[ZD]={accessors:{}}).accessors,r=this.prototype;function s(o){const i=tp(o);a[i]||(Yse(r,o),a[i]=!0)}return Ct.isArray(t)?t.forEach(s):s(t),this}};oi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ct.reduceDescriptors(oi.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(a){this[n]=a}}});Ct.freezeMethods(oi);function Mx(e,t){const n=this||vg,a=t||n,r=oi.from(a.headers);let s=a.data;return Ct.forEach(e,function(i){s=i.call(n,s,r.normalize(),t?t.status:void 0)}),r.normalize(),s}function o5(e){return!!(e&&e.__CANCEL__)}function rh(e,t,n){ta.call(this,e??"canceled",ta.ERR_CANCELED,t,n),this.name="CanceledError"}Ct.inherits(rh,ta,{__CANCEL__:!0});function i5(e,t,n){const a=n.config.validateStatus;!n.status||!a||a(n.status)?e(n):t(new ta("Request failed with status code "+n.status,[ta.ERR_BAD_REQUEST,ta.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Xse(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Jse(e,t){e=e||10;const n=new Array(e),a=new Array(e);let r=0,s=0,o;return t=t!==void 0?t:1e3,function(c){const A=Date.now(),d=a[s];o||(o=A),n[r]=c,a[r]=A;let f=s,m=0;for(;f!==r;)m+=n[f++],f=f%e;if(r=(r+1)%e,r===s&&(s=(s+1)%e),A-o<t)return;const v=d&&A-d;return v?Math.round(m*1e3/v):void 0}}function Zse(e,t){let n=0,a=1e3/t,r,s;const o=(A,d=Date.now())=>{n=d,r=null,s&&(clearTimeout(s),s=null),e(...A)};return[(...A)=>{const d=Date.now(),f=d-n;f>=a?o(A,d):(r=A,s||(s=setTimeout(()=>{s=null,o(r)},a-f)))},()=>r&&o(r)]}const U_=(e,t,n=3)=>{let a=0;const r=Jse(50,250);return Zse(s=>{const o=s.loaded,i=s.lengthComputable?s.total:void 0,c=o-a,A=r(c),d=o<=i;a=o;const f={loaded:o,total:i,progress:i?o/i:void 0,bytes:c,rate:A||void 0,estimated:A&&i&&d?(i-o)/A:void 0,event:s,lengthComputable:i!=null,[t?"download":"upload"]:!0};e(f)},n)},e3=(e,t)=>{const n=e!=null;return[a=>t[0]({lengthComputable:n,total:e,loaded:a}),t[1]]},t3=e=>(...t)=>Ct.asap(()=>e(...t)),eoe=Ao.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Ao.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Ao.origin),Ao.navigator&&/(msie|trident)/i.test(Ao.navigator.userAgent)):()=>!0,toe=Ao.hasStandardBrowserEnv?{write(e,t,n,a,r,s,o){if(typeof document>"u")return;const i=[`${e}=${encodeURIComponent(t)}`];Ct.isNumber(n)&&i.push(`expires=${new Date(n).toUTCString()}`),Ct.isString(a)&&i.push(`path=${a}`),Ct.isString(r)&&i.push(`domain=${r}`),s===!0&&i.push("secure"),Ct.isString(o)&&i.push(`SameSite=${o}`),document.cookie=i.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function noe(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function aoe(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function l5(e,t,n){let a=!noe(t);return e&&(a||n==!1)?aoe(e,t):t}const n3=e=>e instanceof oi?{...e}:e;function hf(e,t){t=t||{};const n={};function a(A,d,f,m){return Ct.isPlainObject(A)&&Ct.isPlainObject(d)?Ct.merge.call({caseless:m},A,d):Ct.isPlainObject(d)?Ct.merge({},d):Ct.isArray(d)?d.slice():d}function r(A,d,f,m){if(Ct.isUndefined(d)){if(!Ct.isUndefined(A))return a(void 0,A,f,m)}else return a(A,d,f,m)}function s(A,d){if(!Ct.isUndefined(d))return a(void 0,d)}function o(A,d){if(Ct.isUndefined(d)){if(!Ct.isUndefined(A))return a(void 0,A)}else return a(void 0,d)}function i(A,d,f){if(f in t)return a(A,d);if(f in e)return a(void 0,A)}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:i,headers:(A,d,f)=>r(n3(A),n3(d),f,!0)};return Ct.forEach(Object.keys({...e,...t}),function(d){const f=c[d]||r,m=f(e[d],t[d],d);Ct.isUndefined(m)&&f!==i||(n[d]=m)}),n}const u5=e=>{const t=hf({},e);let{data:n,withXSRFToken:a,xsrfHeaderName:r,xsrfCookieName:s,headers:o,auth:i}=t;if(t.headers=o=oi.from(o),t.url=a5(l5(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),i&&o.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):""))),Ct.isFormData(n)){if(Ao.hasStandardBrowserEnv||Ao.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(Ct.isFunction(n.getHeaders)){const c=n.getHeaders(),A=["content-type","content-length"];Object.entries(c).forEach(([d,f])=>{A.includes(d.toLowerCase())&&o.set(d,f)})}}if(Ao.hasStandardBrowserEnv&&(a&&Ct.isFunction(a)&&(a=a(t)),a||a!==!1&&eoe(t.url))){const c=r&&s&&toe.read(s);c&&o.set(r,c)}return t},roe=typeof XMLHttpRequest<"u",soe=roe&&function(e){return new Promise(function(n,a){const r=u5(e);let s=r.data;const o=oi.from(r.headers).normalize();let{responseType:i,onUploadProgress:c,onDownloadProgress:A}=r,d,f,m,v,p;function g(){v&&v(),p&&p(),r.cancelToken&&r.cancelToken.unsubscribe(d),r.signal&&r.signal.removeEventListener("abort",d)}let y=new XMLHttpRequest;y.open(r.method.toUpperCase(),r.url,!0),y.timeout=r.timeout;function w(){if(!y)return;const x=oi.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),D={data:!i||i==="text"||i==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:x,config:e,request:y};i5(function(S){n(S),g()},function(S){a(S),g()},D),y=null}"onloadend"in y?y.onloadend=w:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(w)},y.onabort=function(){y&&(a(new ta("Request aborted",ta.ECONNABORTED,e,y)),y=null)},y.onerror=function(T){const D=T&&T.message?T.message:"Network Error",k=new ta(D,ta.ERR_NETWORK,e,y);k.event=T||null,a(k),y=null},y.ontimeout=function(){let T=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const D=r.transitional||r5;r.timeoutErrorMessage&&(T=r.timeoutErrorMessage),a(new ta(T,D.clarifyTimeoutError?ta.ETIMEDOUT:ta.ECONNABORTED,e,y)),y=null},s===void 0&&o.setContentType(null),"setRequestHeader"in y&&Ct.forEach(o.toJSON(),function(T,D){y.setRequestHeader(D,T)}),Ct.isUndefined(r.withCredentials)||(y.withCredentials=!!r.withCredentials),i&&i!=="json"&&(y.responseType=r.responseType),A&&([m,p]=U_(A,!0),y.addEventListener("progress",m)),c&&y.upload&&([f,v]=U_(c),y.upload.addEventListener("progress",f),y.upload.addEventListener("loadend",v)),(r.cancelToken||r.signal)&&(d=x=>{y&&(a(!x||x.type?new rh(null,e,y):x),y.abort(),y=null)},r.cancelToken&&r.cancelToken.subscribe(d),r.signal&&(r.signal.aborted?d():r.signal.addEventListener("abort",d)));const b=Xse(r.url);if(b&&Ao.protocols.indexOf(b)===-1){a(new ta("Unsupported protocol "+b+":",ta.ERR_BAD_REQUEST,e));return}y.send(s||null)})},ooe=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let a=new AbortController,r;const s=function(A){if(!r){r=!0,i();const d=A instanceof Error?A:this.reason;a.abort(d instanceof ta?d:new rh(d instanceof Error?d.message:d))}};let o=t&&setTimeout(()=>{o=null,s(new ta(`timeout ${t} of ms exceeded`,ta.ETIMEDOUT))},t);const i=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(A=>{A.unsubscribe?A.unsubscribe(s):A.removeEventListener("abort",s)}),e=null)};e.forEach(A=>A.addEventListener("abort",s));const{signal:c}=a;return c.unsubscribe=()=>Ct.asap(i),c}},ioe=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let a=0,r;for(;a<n;)r=a+t,yield e.slice(a,r),a=r},loe=async function*(e,t){for await(const n of uoe(e))yield*ioe(n,t)},uoe=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:a}=await t.read();if(n)break;yield a}}finally{await t.cancel()}},a3=(e,t,n,a)=>{const r=loe(e,t);let s=0,o,i=c=>{o||(o=!0,a&&a(c))};return new ReadableStream({async pull(c){try{const{done:A,value:d}=await r.next();if(A){i(),c.close();return}let f=d.byteLength;if(n){let m=s+=f;n(m)}c.enqueue(new Uint8Array(d))}catch(A){throw i(A),A}},cancel(c){return i(c),r.return()}},{highWaterMark:2})},r3=64*1024,{isFunction:q1}=Ct,coe=(({Request:e,Response:t})=>({Request:e,Response:t}))(Ct.global),{ReadableStream:s3,TextEncoder:o3}=Ct.global,i3=(e,...t)=>{try{return!!e(...t)}catch{return!1}},doe=e=>{e=Ct.merge.call({skipUndefined:!0},coe,e);const{fetch:t,Request:n,Response:a}=e,r=t?q1(t):typeof fetch=="function",s=q1(n),o=q1(a);if(!r)return!1;const i=r&&q1(s3),c=r&&(typeof o3=="function"?(p=>g=>p.encode(g))(new o3):async p=>new Uint8Array(await new n(p).arrayBuffer())),A=s&&i&&i3(()=>{let p=!1;const g=new n(Ao.origin,{body:new s3,method:"POST",get duplex(){return p=!0,"half"}}).headers.has("Content-Type");return p&&!g}),d=o&&i&&i3(()=>Ct.isReadableStream(new a("").body)),f={stream:d&&(p=>p.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(p=>{!f[p]&&(f[p]=(g,y)=>{let w=g&&g[p];if(w)return w.call(g);throw new ta(`Response type '${p}' is not supported`,ta.ERR_NOT_SUPPORT,y)})});const m=async p=>{if(p==null)return 0;if(Ct.isBlob(p))return p.size;if(Ct.isSpecCompliantForm(p))return(await new n(Ao.origin,{method:"POST",body:p}).arrayBuffer()).byteLength;if(Ct.isArrayBufferView(p)||Ct.isArrayBuffer(p))return p.byteLength;if(Ct.isURLSearchParams(p)&&(p=p+""),Ct.isString(p))return(await c(p)).byteLength},v=async(p,g)=>{const y=Ct.toFiniteNumber(p.getContentLength());return y??m(g)};return async p=>{let{url:g,method:y,data:w,signal:b,cancelToken:x,timeout:T,onDownloadProgress:D,onUploadProgress:k,responseType:S,headers:E,withCredentials:C="same-origin",fetchOptions:U}=u5(p),F=t||fetch;S=S?(S+"").toLowerCase():"text";let L=ooe([b,x&&x.toAbortSignal()],T),H=null;const ue=L&&L.unsubscribe&&(()=>{L.unsubscribe()});let ie;try{if(k&&A&&y!=="get"&&y!=="head"&&(ie=await v(E,w))!==0){let q=new n(g,{method:"POST",body:w,duplex:"half"}),P;if(Ct.isFormData(w)&&(P=q.headers.get("content-type"))&&E.setContentType(P),q.body){const[G,J]=e3(ie,U_(t3(k)));w=a3(q.body,r3,G,J)}}Ct.isString(C)||(C=C?"include":"omit");const Q=s&&"credentials"in n.prototype,X={...U,signal:L,method:y.toUpperCase(),headers:E.normalize().toJSON(),body:w,duplex:"half",credentials:Q?C:void 0};H=s&&new n(g,X);let le=await(s?F(H,U):F(g,X));const Z=d&&(S==="stream"||S==="response");if(d&&(D||Z&&ue)){const q={};["status","statusText","headers"].forEach(M=>{q[M]=le[M]});const P=Ct.toFiniteNumber(le.headers.get("content-length")),[G,J]=D&&e3(P,U_(t3(D),!0))||[];le=new a(a3(le.body,r3,G,()=>{J&&J(),ue&&ue()}),q)}S=S||"text";let re=await f[Ct.findKey(f,S)||"text"](le,p);return!Z&&ue&&ue(),await new Promise((q,P)=>{i5(q,P,{data:re,headers:oi.from(le.headers),status:le.status,statusText:le.statusText,config:p,request:H})})}catch(Q){throw ue&&ue(),Q&&Q.name==="TypeError"&&/Load failed|fetch/i.test(Q.message)?Object.assign(new ta("Network Error",ta.ERR_NETWORK,p,H),{cause:Q.cause||Q}):ta.from(Q,Q&&Q.code,p,H)}}},Aoe=new Map,c5=e=>{let t=e&&e.env||{};const{fetch:n,Request:a,Response:r}=t,s=[a,r,n];let o=s.length,i=o,c,A,d=Aoe;for(;i--;)c=s[i],A=d.get(c),A===void 0&&d.set(c,A=i?new Map:doe(t)),d=A;return A};c5();const Uk={http:Tse,xhr:soe,fetch:{get:c5}};Ct.forEach(Uk,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const l3=e=>`- ${e}`,foe=e=>Ct.isFunction(e)||e===null||e===!1;function moe(e,t){e=Ct.isArray(e)?e:[e];const{length:n}=e;let a,r;const s={};for(let o=0;o<n;o++){a=e[o];let i;if(r=a,!foe(a)&&(r=Uk[(i=String(a)).toLowerCase()],r===void 0))throw new ta(`Unknown adapter '${i}'`);if(r&&(Ct.isFunction(r)||(r=r.get(t))))break;s[i||"#"+o]=r}if(!r){const o=Object.entries(s).map(([c,A])=>`adapter ${c} `+(A===!1?"is not supported by the environment":"is not available in the build"));let i=n?o.length>1?`since :
`+o.map(l3).join(`
`):" "+l3(o[0]):"as no adapter specified";throw new ta("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return r}const d5={getAdapter:moe,adapters:Uk};function Ox(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new rh(null,e)}function u3(e){return Ox(e),e.headers=oi.from(e.headers),e.data=Mx.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),d5.getAdapter(e.adapter||vg.adapter,e)(e).then(function(a){return Ox(e),a.data=Mx.call(e,e.transformResponse,a),a.headers=oi.from(a.headers),a},function(a){return o5(a)||(Ox(e),a&&a.response&&(a.response.data=Mx.call(e,e.transformResponse,a.response),a.response.headers=oi.from(a.response.headers))),Promise.reject(a)})}const A5="1.13.2",vw={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{vw[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});const c3={};vw.transitional=function(t,n,a){function r(s,o){return"[Axios v"+A5+"] Transitional option '"+s+"'"+o+(a?". "+a:"")}return(s,o,i)=>{if(t===!1)throw new ta(r(o," has been removed"+(n?" in "+n:"")),ta.ERR_DEPRECATED);return n&&!c3[o]&&(c3[o]=!0,console.warn(r(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,o,i):!0}};vw.spelling=function(t){return(n,a)=>(console.warn(`${a} is likely a misspelling of ${t}`),!0)};function voe(e,t,n){if(typeof e!="object")throw new ta("options must be an object",ta.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let r=a.length;for(;r-- >0;){const s=a[r],o=t[s];if(o){const i=e[s],c=i===void 0||o(i,s,e);if(c!==!0)throw new ta("option "+s+" must be "+c,ta.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ta("Unknown option "+s,ta.ERR_BAD_OPTION)}}const qy={assertOptions:voe,validators:vw},Au=qy.validators;let af=class{constructor(t){this.defaults=t||{},this.interceptors={request:new JD,response:new JD}}async request(t,n){try{return await this._request(t,n)}catch(a){if(a instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const s=r.stack?r.stack.replace(/^.+\n/,""):"";try{a.stack?s&&!String(a.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+s):a.stack=s}catch{}}throw a}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=hf(this.defaults,n);const{transitional:a,paramsSerializer:r,headers:s}=n;a!==void 0&&qy.assertOptions(a,{silentJSONParsing:Au.transitional(Au.boolean),forcedJSONParsing:Au.transitional(Au.boolean),clarifyTimeoutError:Au.transitional(Au.boolean)},!1),r!=null&&(Ct.isFunction(r)?n.paramsSerializer={serialize:r}:qy.assertOptions(r,{encode:Au.function,serialize:Au.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),qy.assertOptions(n,{baseUrl:Au.spelling("baseURL"),withXsrfToken:Au.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&Ct.merge(s.common,s[n.method]);s&&Ct.forEach(["delete","get","head","post","put","patch","common"],p=>{delete s[p]}),n.headers=oi.concat(o,s);const i=[];let c=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(n)===!1||(c=c&&g.synchronous,i.unshift(g.fulfilled,g.rejected))});const A=[];this.interceptors.response.forEach(function(g){A.push(g.fulfilled,g.rejected)});let d,f=0,m;if(!c){const p=[u3.bind(this),void 0];for(p.unshift(...i),p.push(...A),m=p.length,d=Promise.resolve(n);f<m;)d=d.then(p[f++],p[f++]);return d}m=i.length;let v=n;for(;f<m;){const p=i[f++],g=i[f++];try{v=p(v)}catch(y){g.call(this,y);break}}try{d=u3.call(this,v)}catch(p){return Promise.reject(p)}for(f=0,m=A.length;f<m;)d=d.then(A[f++],A[f++]);return d}getUri(t){t=hf(this.defaults,t);const n=l5(t.baseURL,t.url,t.allowAbsoluteUrls);return a5(n,t.params,t.paramsSerializer)}};Ct.forEach(["delete","get","head","options"],function(t){af.prototype[t]=function(n,a){return this.request(hf(a||{},{method:t,url:n,data:(a||{}).data}))}});Ct.forEach(["post","put","patch"],function(t){function n(a){return function(s,o,i){return this.request(hf(i||{},{method:t,headers:a?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}af.prototype[t]=n(),af.prototype[t+"Form"]=n(!0)});let hoe=class f5{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const a=this;this.promise.then(r=>{if(!a._listeners)return;let s=a._listeners.length;for(;s-- >0;)a._listeners[s](r);a._listeners=null}),this.promise.then=r=>{let s;const o=new Promise(i=>{a.subscribe(i),s=i}).then(r);return o.cancel=function(){a.unsubscribe(s)},o},t(function(s,o,i){a.reason||(a.reason=new rh(s,o,i),n(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=a=>{t.abort(a)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new f5(function(r){t=r}),cancel:t}}};function poe(e){return function(n){return e.apply(null,n)}}function goe(e){return Ct.isObject(e)&&e.isAxiosError===!0}const GS={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(GS).forEach(([e,t])=>{GS[t]=e});function m5(e){const t=new af(e),n=z6(af.prototype.request,t);return Ct.extend(n,af.prototype,t,{allOwnKeys:!0}),Ct.extend(n,t,null,{allOwnKeys:!0}),n.create=function(r){return m5(hf(e,r))},n}const Ir=m5(vg);Ir.Axios=af;Ir.CanceledError=rh;Ir.CancelToken=hoe;Ir.isCancel=o5;Ir.VERSION=A5;Ir.toFormData=mw;Ir.AxiosError=ta;Ir.Cancel=Ir.CanceledError;Ir.all=function(t){return Promise.all(t)};Ir.spread=poe;Ir.isAxiosError=goe;Ir.mergeConfig=hf;Ir.AxiosHeaders=oi;Ir.formToJSON=e=>s5(Ct.isHTMLForm(e)?new FormData(e):e);Ir.getAdapter=d5.getAdapter;Ir.HttpStatusCode=GS;Ir.default=Ir;const{Axios:yrt,AxiosError:_rt,CanceledError:wrt,isCancel:brt,CancelToken:xrt,VERSION:Crt,all:Srt,Cancel:Ert,isAxiosError:Brt,spread:krt,toFormData:Trt,AxiosHeaders:Irt,HttpStatusCode:Frt,formToJSON:Prt,getAdapter:Drt,mergeConfig:Urt}=Ir,yoe=()=>{};var d3={};const v5={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};const on=function(e,t){if(!e)throw sh(t)},sh=function(e){return new Error("Firebase Database ("+v5.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};const h5=function(e){const t=[];let n=0;for(let a=0;a<e.length;a++){let r=e.charCodeAt(a);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&a+1<e.length&&(e.charCodeAt(a+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++a)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},_oe=function(e){const t=[];let n=0,a=0;for(;n<e.length;){const r=e[n++];if(r<128)t[a++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[a++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=e[n++],o=e[n++],i=e[n++],c=((r&7)<<18|(s&63)<<12|(o&63)<<6|i&63)-65536;t[a++]=String.fromCharCode(55296+(c>>10)),t[a++]=String.fromCharCode(56320+(c&1023))}else{const s=e[n++],o=e[n++];t[a++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return t.join("")},hw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let r=0;r<e.length;r+=3){const s=e[r],o=r+1<e.length,i=o?e[r+1]:0,c=r+2<e.length,A=c?e[r+2]:0,d=s>>2,f=(s&3)<<4|i>>4;let m=(i&15)<<2|A>>6,v=A&63;c||(v=64,o||(m=64)),a.push(n[d],n[f],n[m],n[v])}return a.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(h5(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):_oe(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let r=0;r<e.length;){const s=n[e.charAt(r++)],i=r<e.length?n[e.charAt(r)]:0;++r;const A=r<e.length?n[e.charAt(r)]:64;++r;const f=r<e.length?n[e.charAt(r)]:64;if(++r,s==null||i==null||A==null||f==null)throw new woe;const m=s<<2|i>>4;if(a.push(m),A!==64){const v=i<<4&240|A>>2;if(a.push(v),f!==64){const p=A<<6&192|f;a.push(p)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class woe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const p5=function(e){const t=h5(e);return hw.encodeByteArray(t,!0)},g5=function(e){return p5(e).replace(/\./g,"")},R_=function(e){try{return hw.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function boe(e){return y5(void 0,e)}function y5(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)!t.hasOwnProperty(n)||!xoe(n)||(e[n]=y5(e[n],t[n]));return e}function xoe(e){return e!=="__proto__"}function Coe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Soe=()=>Coe().__FIREBASE_DEFAULTS__,Eoe=()=>{if(typeof process>"u"||typeof d3>"u")return;const e=d3.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Boe=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&R_(e[1]);return t&&JSON.parse(t)},Rk=()=>{try{return yoe()||Soe()||Eoe()||Boe()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},koe=e=>{var t,n;return(n=(t=Rk())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},_5=()=>{var e;return(e=Rk())===null||e===void 0?void 0:e.config},w5=e=>{var t;return(t=Rk())===null||t===void 0?void 0:t[`_${e}`]};class B0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,a)=>{n?this.reject(n):this.resolve(a),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,a))}}}function pw(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Toe(e){return(await fetch(e,{credentials:"include"})).ok}const Gp={};function Ioe(){const e={prod:[],emulator:[]};for(const t of Object.keys(Gp))Gp[t]?e.emulator.push(t):e.prod.push(t);return e}function Foe(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let A3=!1;function Poe(e,t){if(typeof window>"u"||typeof document>"u"||!pw(window.location.host)||Gp[e]===t||Gp[e]||A3)return;Gp[e]=t;function n(m){return`__firebase__banner__${m}`}const a="__firebase__banner",s=Ioe().prod.length>0;function o(){const m=document.getElementById(a);m&&m.remove()}function i(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,v){m.setAttribute("width","24"),m.setAttribute("id",v),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function A(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{A3=!0,o()},m}function d(m,v){m.setAttribute("id",v),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=Foe(a),v=n("text"),p=document.getElementById(v)||document.createElement("span"),g=n("learnmore"),y=document.getElementById(g)||document.createElement("a"),w=n("preprendIcon"),b=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const x=m.element;i(x),d(y,g);const T=A();c(b,w),x.append(b,p,y,T),document.body.appendChild(x)}s?(p.innerText="Preview backend disconnected.",b.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(b.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,p.innerText="Preview backend running in this workspace."),p.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}function Qo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Nk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qo())}function Doe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Uoe(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function b5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Roe(){const e=Qo();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Noe(){return v5.NODE_ADMIN===!0}function x5(){try{return typeof indexedDB=="object"}catch{return!1}}function Voe(){return new Promise((e,t)=>{try{let n=!0;const a="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(a);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(a),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;t(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}const Loe="FirebaseError";class Ou extends Error{constructor(t,n,a){super(n),this.code=t,this.customData=a,this.name=Loe,Object.setPrototypeOf(this,Ou.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oh.prototype.create)}}class oh{constructor(t,n,a){this.service=t,this.serviceName=n,this.errors=a}create(t,...n){const a=n[0]||{},r=`${this.service}/${t}`,s=this.errors[t],o=s?Moe(s,a):"Error",i=`${this.serviceName}: ${o} (${r}).`;return new Ou(r,i,a)}}function Moe(e,t){return e.replace(Ooe,(n,a)=>{const r=t[a];return r!=null?String(r):`<${a}?>`})}const Ooe=/\{\$([^}]+)}/g;function k0(e){return JSON.parse(e)}function Qs(e){return JSON.stringify(e)}const C5=function(e){let t={},n={},a={},r="";try{const s=e.split(".");t=k0(R_(s[0])||""),n=k0(R_(s[1])||""),r=s[2],a=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:a,signature:r}},Hoe=function(e){const t=C5(e),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},$oe=function(e){const t=C5(e).claims;return typeof t=="object"&&t.admin===!0};function Hc(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Vv(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function zS(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function N_(e,t,n){const a={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=t.call(n,e[r],r,e));return a}function Lv(e,t){if(e===t)return!0;const n=Object.keys(e),a=Object.keys(t);for(const r of n){if(!a.includes(r))return!1;const s=e[r],o=t[r];if(f3(s)&&f3(o)){if(!Lv(s,o))return!1}else if(s!==o)return!1}for(const r of a)if(!n.includes(r))return!1;return!0}function f3(e){return e!==null&&typeof e=="object"}function ih(e){const t=[];for(const[n,a]of Object.entries(e))Array.isArray(a)?a.forEach(r=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a));return t.length?"&"+t.join("&"):""}class Qoe{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n||(n=0);const a=this.W_;if(typeof t=="string")for(let f=0;f<16;f++)a[f]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let f=0;f<16;f++)a[f]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let f=16;f<80;f++){const m=a[f-3]^a[f-8]^a[f-14]^a[f-16];a[f]=(m<<1|m>>>31)&4294967295}let r=this.chain_[0],s=this.chain_[1],o=this.chain_[2],i=this.chain_[3],c=this.chain_[4],A,d;for(let f=0;f<80;f++){f<40?f<20?(A=i^s&(o^i),d=1518500249):(A=s^o^i,d=1859775393):f<60?(A=s&o|i&(s|o),d=2400959708):(A=s^o^i,d=3395469782);const m=(r<<5|r>>>27)+A+c+d+a[f]&4294967295;c=i,i=o,o=(s<<30|s>>>2)&4294967295,s=r,r=m}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+i&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(t,n){if(t==null)return;n===void 0&&(n=t.length);const a=n-this.blockSize;let r=0;const s=this.buf_;let o=this.inbuf_;for(;r<n;){if(o===0)for(;r<=a;)this.compress_(t,r),r+=this.blockSize;if(typeof t=="string"){for(;r<n;)if(s[o]=t.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}else for(;r<n;)if(s[o]=t[r],++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const t=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let a=0;for(let r=0;r<5;r++)for(let s=24;s>=0;s-=8)t[a]=this.chain_[r]>>s&255,++a;return t}}function Goe(e,t){const n=new zoe(e,t);return n.subscribe.bind(n)}class zoe{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(a=>{this.error(a)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,a){let r;if(t===void 0&&n===void 0&&a===void 0)throw new Error("Missing Observer.");Koe(t,["next","error","complete"])?r=t:r={next:t,error:n,complete:a},r.next===void 0&&(r.next=Hx),r.error===void 0&&(r.error=Hx),r.complete===void 0&&(r.complete=Hx);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Koe(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Hx(){}function Woe(e,t){return`${e} failed: ${t} argument `}const joe=function(e){const t=[];let n=0;for(let a=0;a<e.length;a++){let r=e.charCodeAt(a);if(r>=55296&&r<=56319){const s=r-55296;a++,on(a<e.length,"Surrogate pair missing trail surrogate.");const o=e.charCodeAt(a)-56320;r=65536+(s<<10)+o}r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):r<65536?(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},gw=function(e){let t=0;for(let n=0;n<e.length;n++){const a=e.charCodeAt(n);a<128?t++:a<2048?t+=2:a>=55296&&a<=56319?(t+=4,n++):t+=3}return t};function Hu(e){return e&&e._delegate?e._delegate:e}class Gl{constructor(t,n,a){this.name=t,this.instanceFactory=n,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const VA="[DEFAULT]";class qoe{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const a=new B0;if(this.instancesDeferred.set(n,a),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&a.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const a=this.normalizeInstanceIdentifier(t?.identifier),r=(n=t?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Xoe(t))try{this.getOrInitializeService({instanceIdentifier:VA})}catch{}for(const[n,a]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});a.resolve(s)}catch{}}}}clearInstance(t=VA){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=VA){return this.instances.has(t)}getOptions(t=VA){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:a,options:n});for(const[s,o]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(s);a===i&&o.resolve(r)}return r}onInit(t,n){var a;const r=this.normalizeInstanceIdentifier(n),s=(a=this.onInitCallbacks.get(r))!==null&&a!==void 0?a:new Set;s.add(t),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&t(o,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const a=this.onInitCallbacks.get(n);if(a)for(const r of a)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let a=this.instances.get(t);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:Yoe(t),options:n}),this.instances.set(t,a),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(a,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,a)}catch{}return a||null}normalizeInstanceIdentifier(t=VA){return this.component?this.component.multipleInstances?t:VA:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Yoe(e){return e===VA?void 0:e}function Xoe(e){return e.instantiationMode==="EAGER"}class Joe{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new qoe(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}var ja;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ja||(ja={}));const Zoe={debug:ja.DEBUG,verbose:ja.VERBOSE,info:ja.INFO,warn:ja.WARN,error:ja.ERROR,silent:ja.SILENT},eie=ja.INFO,tie={[ja.DEBUG]:"log",[ja.VERBOSE]:"log",[ja.INFO]:"info",[ja.WARN]:"warn",[ja.ERROR]:"error"},nie=(e,t,...n)=>{if(t<e.logLevel)return;const a=new Date().toISOString(),r=tie[t];if(r)console[r](`[${a}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};let hg=class{constructor(t){this.name=t,this._logLevel=eie,this._logHandler=nie,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ja))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Zoe[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ja.DEBUG,...t),this._logHandler(this,ja.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ja.VERBOSE,...t),this._logHandler(this,ja.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ja.INFO,...t),this._logHandler(this,ja.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ja.WARN,...t),this._logHandler(this,ja.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ja.ERROR,...t),this._logHandler(this,ja.ERROR,...t)}};const aie=(e,t)=>t.some(n=>e instanceof n);let m3,v3;function rie(){return m3||(m3=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sie(){return v3||(v3=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const S5=new WeakMap,KS=new WeakMap,E5=new WeakMap,$x=new WeakMap,Vk=new WeakMap;function oie(e){const t=new Promise((n,a)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(kd(e.result)),r()},o=()=>{a(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&S5.set(n,e)}).catch(()=>{}),Vk.set(t,e),t}function iie(e){if(KS.has(e))return;const t=new Promise((n,a)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{a(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});KS.set(e,t)}let WS={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return KS.get(e);if(t==="objectStoreNames")return e.objectStoreNames||E5.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return kd(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function lie(e){WS=e(WS)}function uie(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const a=e.call(Qx(this),t,...n);return E5.set(a,t.sort?t.sort():[t]),kd(a)}:sie().includes(e)?function(...t){return e.apply(Qx(this),t),kd(S5.get(this))}:function(...t){return kd(e.apply(Qx(this),t))}}function cie(e){return typeof e=="function"?uie(e):(e instanceof IDBTransaction&&iie(e),aie(e,rie())?new Proxy(e,WS):e)}function kd(e){if(e instanceof IDBRequest)return oie(e);if($x.has(e))return $x.get(e);const t=cie(e);return t!==e&&($x.set(e,t),Vk.set(t,e)),t}const Qx=e=>Vk.get(e);function die(e,t,{blocked:n,upgrade:a,blocking:r,terminated:s}={}){const o=indexedDB.open(e,t),i=kd(o);return a&&o.addEventListener("upgradeneeded",c=>{a(kd(o.result),c.oldVersion,c.newVersion,kd(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),i.then(c=>{s&&c.addEventListener("close",()=>s()),r&&c.addEventListener("versionchange",A=>r(A.oldVersion,A.newVersion,A))}).catch(()=>{}),i}const Aie=["get","getKey","getAll","getAllKeys","count"],fie=["put","add","delete","clear"],Gx=new Map;function h3(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Gx.get(t))return Gx.get(t);const n=t.replace(/FromIndex$/,""),a=t!==n,r=fie.includes(n);if(!(n in(a?IDBIndex:IDBObjectStore).prototype)||!(r||Aie.includes(n)))return;const s=async function(o,...i){const c=this.transaction(o,r?"readwrite":"readonly");let A=c.store;return a&&(A=A.index(i.shift())),(await Promise.all([A[n](...i),r&&c.done]))[0]};return Gx.set(t,s),s}lie(e=>({...e,get:(t,n,a)=>h3(t,n)||e.get(t,n,a),has:(t,n)=>!!h3(t,n)||e.has(t,n)}));class mie{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(vie(n)){const a=n.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(n=>n).join(" ")}}function vie(e){const t=e.getComponent();return t?.type==="VERSION"}const jS="@firebase/app",p3="0.13.2";const Tc=new hg("@firebase/app"),hie="@firebase/app-compat",pie="@firebase/analytics-compat",gie="@firebase/analytics",yie="@firebase/app-check-compat",_ie="@firebase/app-check",wie="@firebase/auth",bie="@firebase/auth-compat",xie="@firebase/database",Cie="@firebase/data-connect",Sie="@firebase/database-compat",Eie="@firebase/functions",Bie="@firebase/functions-compat",kie="@firebase/installations",Tie="@firebase/installations-compat",Iie="@firebase/messaging",Fie="@firebase/messaging-compat",Pie="@firebase/performance",Die="@firebase/performance-compat",Uie="@firebase/remote-config",Rie="@firebase/remote-config-compat",Nie="@firebase/storage",Vie="@firebase/storage-compat",Lie="@firebase/firestore",Mie="@firebase/ai",Oie="@firebase/firestore-compat",Hie="firebase",$ie="11.10.0";const qS="[DEFAULT]",Qie={[jS]:"fire-core",[hie]:"fire-core-compat",[gie]:"fire-analytics",[pie]:"fire-analytics-compat",[_ie]:"fire-app-check",[yie]:"fire-app-check-compat",[wie]:"fire-auth",[bie]:"fire-auth-compat",[xie]:"fire-rtdb",[Cie]:"fire-data-connect",[Sie]:"fire-rtdb-compat",[Eie]:"fire-fn",[Bie]:"fire-fn-compat",[kie]:"fire-iid",[Tie]:"fire-iid-compat",[Iie]:"fire-fcm",[Fie]:"fire-fcm-compat",[Pie]:"fire-perf",[Die]:"fire-perf-compat",[Uie]:"fire-rc",[Rie]:"fire-rc-compat",[Nie]:"fire-gcs",[Vie]:"fire-gcs-compat",[Lie]:"fire-fst",[Oie]:"fire-fst-compat",[Mie]:"fire-vertex","fire-js":"fire-js",[Hie]:"fire-js-all"};const V_=new Map,Gie=new Map,YS=new Map;function g3(e,t){try{e.container.addComponent(t)}catch(n){Tc.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Pu(e){const t=e.name;if(YS.has(t))return Tc.debug(`There were multiple attempts to register component ${t}.`),!1;YS.set(t,e);for(const n of V_.values())g3(n,e);for(const n of Gie.values())g3(n,e);return!0}function B5(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ji(e){return e==null?!1:e.settings!==void 0}const zie={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Td=new oh("app","Firebase",zie);class Kie{constructor(t,n,a){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Gl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Td.create("app-deleted",{appName:this._name})}}const nA=$ie;function k5(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const a=Object.assign({name:qS,automaticDataCollectionEnabled:!0},t),r=a.name;if(typeof r!="string"||!r)throw Td.create("bad-app-name",{appName:String(r)});if(n||(n=_5()),!n)throw Td.create("no-options");const s=V_.get(r);if(s){if(Lv(n,s.options)&&Lv(a,s.config))return s;throw Td.create("duplicate-app",{appName:r})}const o=new Joe(r);for(const c of YS.values())o.addComponent(c);const i=new Kie(n,a,o);return V_.set(r,i),i}function T5(e=qS){const t=V_.get(e);if(!t&&e===qS&&_5())return k5();if(!t)throw Td.create("no-app",{appName:e});return t}function Bi(e,t,n){var a;let r=(a=Qie[e])!==null&&a!==void 0?a:e;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const i=[`Unable to register library "${r}" with version "${t}":`];s&&i.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&i.push("and"),o&&i.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Tc.warn(i.join(" "));return}Pu(new Gl(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}const Wie="firebase-heartbeat-database",jie=1,T0="firebase-heartbeat-store";let zx=null;function I5(){return zx||(zx=die(Wie,jie,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(T0)}catch(n){console.warn(n)}}}}).catch(e=>{throw Td.create("idb-open",{originalErrorMessage:e.message})})),zx}async function qie(e){try{const n=(await I5()).transaction(T0),a=await n.objectStore(T0).get(F5(e));return await n.done,a}catch(t){if(t instanceof Ou)Tc.warn(t.message);else{const n=Td.create("idb-get",{originalErrorMessage:t?.message});Tc.warn(n.message)}}}async function y3(e,t){try{const a=(await I5()).transaction(T0,"readwrite");await a.objectStore(T0).put(t,F5(e)),await a.done}catch(n){if(n instanceof Ou)Tc.warn(n.message);else{const a=Td.create("idb-set",{originalErrorMessage:n?.message});Tc.warn(a.message)}}}function F5(e){return`${e.name}!${e.options.appId}`}const Yie=1024,Xie=30;class Jie{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ele(n),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var t,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=_3();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>Xie){const o=tle(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){Tc.warn(a)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=_3(),{heartbeatsToSend:a,unsentEntries:r}=Zie(this._heartbeatsCache.heartbeats),s=g5(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Tc.warn(n),""}}}function _3(){return new Date().toISOString().substring(0,10)}function Zie(e,t=Yie){const n=[];let a=e.slice();for(const r of e){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),w3(n)>t){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),w3(n)>t){n.pop();break}a=a.slice(1)}return{heartbeatsToSend:n,unsentEntries:a}}class ele{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return x5()?Voe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await qie(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return y3(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return y3(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function w3(e){return g5(JSON.stringify({version:2,heartbeats:e})).length}function tle(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let a=1;a<e.length;a++)e[a].date<n&&(n=e[a].date,t=a);return t}function nle(e){Pu(new Gl("platform-logger",t=>new mie(t),"PRIVATE")),Pu(new Gl("heartbeat",t=>new Jie(t),"PRIVATE")),Bi(jS,p3,e),Bi(jS,p3,"esm2017"),Bi("fire-js","")}nle("");var ale="firebase",rle="11.10.0";Bi(ale,rle,"app");function Lk(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n}function P5(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const sle=P5,D5=new oh("auth","Firebase",P5());const L_=new hg("@firebase/auth");function ole(e,...t){L_.logLevel<=ja.WARN&&L_.warn(`Auth (${nA}): ${e}`,...t)}function Yy(e,...t){L_.logLevel<=ja.ERROR&&L_.error(`Auth (${nA}): ${e}`,...t)}function Ic(e,...t){throw Mk(e,...t)}function Bu(e,...t){return Mk(e,...t)}function U5(e,t,n){const a=Object.assign(Object.assign({},sle()),{[t]:n});return new oh("auth","Firebase",a).create(t,{appName:e.name})}function rf(e){return U5(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Mk(e,...t){if(typeof e!="string"){const n=t[0],a=[...t.slice(1)];return a[0]&&(a[0].appName=e.name),e._errorFactory.create(n,...a)}return D5.create(e,...t)}function Gn(e,t,...n){if(!e)throw Mk(t,...n)}function pc(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Yy(t),new Error(t)}function Fc(e,t){e||pc(t)}function XS(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function ile(){return b3()==="http:"||b3()==="https:"}function b3(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}function lle(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ile()||Uoe()||"connection"in navigator)?navigator.onLine:!0}function ule(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}class pg{constructor(t,n){this.shortDelay=t,this.longDelay=n,Fc(n>t,"Short delay should be less than long delay!"),this.isMobile=Nk()||b5()}get(){return lle()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ok(e,t){Fc(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class R5{static initialize(t,n,a){this.fetchImpl=t,n&&(this.headersImpl=n),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const cle={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const dle=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Ale=new pg(3e4,6e4);function Hk(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function lh(e,t,n,a,r={}){return N5(e,r,async()=>{let s={},o={};a&&(t==="GET"?o=a:s={body:JSON.stringify(a)});const i=ih(Object.assign({key:e.config.apiKey},o)).slice(1),c=await e._getAdditionalHeaders();c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode);const A=Object.assign({method:t,headers:c},s);return Doe()||(A.referrerPolicy="no-referrer"),e.emulatorConfig&&pw(e.emulatorConfig.host)&&(A.credentials="include"),R5.fetch()(await V5(e,e.config.apiHost,n,i),A)})}async function N5(e,t,n){e._canInitEmulator=!1;const a=Object.assign(Object.assign({},cle),t);try{const r=new mle(e),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Y1(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const i=s.ok?o.errorMessage:o.error.message,[c,A]=i.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Y1(e,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Y1(e,"email-already-in-use",o);if(c==="USER_DISABLED")throw Y1(e,"user-disabled",o);const d=a[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(A)throw U5(e,d,A);Ic(e,d)}}catch(r){if(r instanceof Ou)throw r;Ic(e,"network-request-failed",{message:String(r)})}}async function fle(e,t,n,a,r={}){const s=await lh(e,t,n,a,r);return"mfaPendingCredential"in s&&Ic(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function V5(e,t,n,a){const r=`${t}${n}?${a}`,s=e,o=s.config.emulator?Ok(e.config,r):`${e.config.apiScheme}://${r}`;return dle.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}class mle{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,a)=>{this.timer=setTimeout(()=>a(Bu(this.auth,"network-request-failed")),Ale.get())})}}function Y1(e,t,n){const a={appName:e.name};n.email&&(a.email=n.email),n.phoneNumber&&(a.phoneNumber=n.phoneNumber);const r=Bu(e,t,a);return r.customData._tokenResponse=n,r}async function vle(e,t){return lh(e,"POST","/v1/accounts:delete",t)}async function M_(e,t){return lh(e,"POST","/v1/accounts:lookup",t)}function zp(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function hle(e,t=!1){const n=Hu(e),a=await n.getIdToken(t),r=$k(a);Gn(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:a,authTime:zp(Kx(r.auth_time)),issuedAtTime:zp(Kx(r.iat)),expirationTime:zp(Kx(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function Kx(e){return Number(e)*1e3}function $k(e){const[t,n,a]=e.split(".");if(t===void 0||n===void 0||a===void 0)return Yy("JWT malformed, contained fewer than 3 sections"),null;try{const r=R_(n);return r?JSON.parse(r):(Yy("Failed to decode base64 JWT payload"),null)}catch(r){return Yy("Caught error parsing JWT payload as JSON",r?.toString()),null}}function x3(e){const t=$k(e);return Gn(t,"internal-error"),Gn(typeof t.exp<"u","internal-error"),Gn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function I0(e,t,n=!1){if(n)return t;try{return await t}catch(a){throw a instanceof Ou&&ple(a)&&e.auth.currentUser===e&&await e.auth.signOut(),a}}function ple({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}class gle{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const a=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),a}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class JS{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zp(this.lastLoginAt),this.creationTime=zp(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function O_(e){var t;const n=e.auth,a=await e.getIdToken(),r=await I0(e,M_(n,{idToken:a}));Gn(r?.users.length,n,"internal-error");const s=r.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?L5(s.providerUserInfo):[],i=_le(e.providerData,o),c=e.isAnonymous,A=!(e.email&&s.passwordHash)&&!i?.length,d=c?A:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new JS(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}async function yle(e){const t=Hu(e);await O_(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function _le(e,t){return[...e.filter(a=>!t.some(r=>r.providerId===a.providerId)),...t]}function L5(e){return e.map(t=>{var{providerId:n}=t,a=Lk(t,["providerId"]);return{providerId:n,uid:a.rawId||"",displayName:a.displayName||null,email:a.email||null,phoneNumber:a.phoneNumber||null,photoURL:a.photoUrl||null}})}async function wle(e,t){const n=await N5(e,{},async()=>{const a=ih({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,o=await V5(e,r,"/v1/token",`key=${s}`),i=await e._getAdditionalHeaders();i["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:i,body:a};return e.emulatorConfig&&pw(e.emulatorConfig.host)&&(c.credentials="include"),R5.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ble(e,t){return lh(e,"POST","/v2/accounts:revokeToken",Hk(e,t))}class fv{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Gn(t.idToken,"internal-error"),Gn(typeof t.idToken<"u","internal-error"),Gn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):x3(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Gn(t.length!==0,"internal-error");const n=x3(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Gn(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:a,refreshToken:r,expiresIn:s}=await wle(t,n);this.updateTokensAndExpiration(a,r,Number(s))}updateTokensAndExpiration(t,n,a){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(t,n){const{refreshToken:a,accessToken:r,expirationTime:s}=n,o=new fv;return a&&(Gn(typeof a=="string","internal-error",{appName:t}),o.refreshToken=a),r&&(Gn(typeof r=="string","internal-error",{appName:t}),o.accessToken=r),s&&(Gn(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new fv,this.toJSON())}_performRefresh(){return pc("not implemented")}}function ad(e,t){Gn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class kl{constructor(t){var{uid:n,auth:a,stsTokenManager:r}=t,s=Lk(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gle(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=a,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new JS(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await I0(this,this.stsTokenManager.getToken(this.auth,t));return Gn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return hle(this,t)}reload(){return yle(this)}_assign(t){this!==t&&(Gn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new kl(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){Gn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let a=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),a=!0),n&&await O_(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ji(this.auth.app))return Promise.reject(rf(this.auth));const t=await this.getIdToken();return await I0(this,vle(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var a,r,s,o,i,c,A,d;const f=(a=n.displayName)!==null&&a!==void 0?a:void 0,m=(r=n.email)!==null&&r!==void 0?r:void 0,v=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,g=(i=n.tenantId)!==null&&i!==void 0?i:void 0,y=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,w=(A=n.createdAt)!==null&&A!==void 0?A:void 0,b=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:x,emailVerified:T,isAnonymous:D,providerData:k,stsTokenManager:S}=n;Gn(x&&S,t,"internal-error");const E=fv.fromJSON(this.name,S);Gn(typeof x=="string",t,"internal-error"),ad(f,t.name),ad(m,t.name),Gn(typeof T=="boolean",t,"internal-error"),Gn(typeof D=="boolean",t,"internal-error"),ad(v,t.name),ad(p,t.name),ad(g,t.name),ad(y,t.name),ad(w,t.name),ad(b,t.name);const C=new kl({uid:x,auth:t,email:m,emailVerified:T,displayName:f,isAnonymous:D,photoURL:p,phoneNumber:v,tenantId:g,stsTokenManager:E,createdAt:w,lastLoginAt:b});return k&&Array.isArray(k)&&(C.providerData=k.map(U=>Object.assign({},U))),y&&(C._redirectEventId=y),C}static async _fromIdTokenResponse(t,n,a=!1){const r=new fv;r.updateFromServerResponse(n);const s=new kl({uid:n.localId,auth:t,stsTokenManager:r,isAnonymous:a});return await O_(s),s}static async _fromGetAccountInfoResponse(t,n,a){const r=n.users[0];Gn(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?L5(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,i=new fv;i.updateFromIdToken(a);const c=new kl({uid:r.localId,auth:t,stsTokenManager:i,isAnonymous:o}),A={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new JS(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(c,A),c}}const C3=new Map;function gc(e){Fc(e instanceof Function,"Expected a class definition");let t=C3.get(e);return t?(Fc(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,C3.set(e,t),t)}class M5{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}M5.type="NONE";const S3=M5;function Xy(e,t,n){return`firebase:${e}:${t}:${n}`}class mv{constructor(t,n,a){this.persistence=t,this.auth=n,this.userKey=a;const{config:r,name:s}=this.auth;this.fullUserKey=Xy(this.userKey,r.apiKey,s),this.fullPersistenceKey=Xy("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await M_(this.auth,{idToken:t}).catch(()=>{});return n?kl._fromGetAccountInfoResponse(this.auth,n,t):null}return kl._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,a="authUser"){if(!n.length)return new mv(gc(S3),t,a);const r=(await Promise.all(n.map(async A=>{if(await A._isAvailable())return A}))).filter(A=>A);let s=r[0]||gc(S3);const o=Xy(a,t.config.apiKey,t.name);let i=null;for(const A of n)try{const d=await A._get(o);if(d){let f;if(typeof d=="string"){const m=await M_(t,{idToken:d}).catch(()=>{});if(!m)break;f=await kl._fromGetAccountInfoResponse(t,m,d)}else f=kl._fromJSON(t,d);A!==s&&(i=f),s=A;break}}catch{}const c=r.filter(A=>A._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new mv(s,t,a):(s=c[0],i&&await s._set(o,i.toJSON()),await Promise.all(n.map(async A=>{if(A!==s)try{await A._remove(o)}catch{}})),new mv(s,t,a))}}function E3(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Q5(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(O5(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(z5(t))return"Blackberry";if(K5(t))return"Webos";if(H5(t))return"Safari";if((t.includes("chrome/")||$5(t))&&!t.includes("edge/"))return"Chrome";if(G5(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=e.match(n);if(a?.length===2)return a[1]}return"Other"}function O5(e=Qo()){return/firefox\//i.test(e)}function H5(e=Qo()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function $5(e=Qo()){return/crios\//i.test(e)}function Q5(e=Qo()){return/iemobile/i.test(e)}function G5(e=Qo()){return/android/i.test(e)}function z5(e=Qo()){return/blackberry/i.test(e)}function K5(e=Qo()){return/webos/i.test(e)}function Qk(e=Qo()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function xle(e=Qo()){var t;return Qk(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function Cle(){return Roe()&&document.documentMode===10}function W5(e=Qo()){return Qk(e)||G5(e)||K5(e)||z5(e)||/windows phone/i.test(e)||Q5(e)}function j5(e,t=[]){let n;switch(e){case"Browser":n=E3(Qo());break;case"Worker":n=`${E3(Qo())}-${e}`;break;default:n=e}const a=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${nA}/${a}`}class Sle{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const a=s=>new Promise((o,i)=>{try{const c=t(s);o(c)}catch(c){i(c)}});a.onAbort=n,this.queue.push(a);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const a of this.queue)await a(t),a.onAbort&&n.push(a.onAbort)}catch(a){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a?.message})}}}async function Ele(e,t={}){return lh(e,"GET","/v2/passwordPolicy",Hk(e,t))}const Ble=6;class kle{constructor(t){var n,a,r,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Ble,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(a=t.allowedNonAlphanumericCharacters)===null||a===void 0?void 0:a.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,a,r,s,o,i;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,c),this.validatePasswordCharacterOptions(t,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(a=c.meetsMaxPasswordLength)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(i=c.containsNonAlphanumericCharacter)!==null&&i!==void 0?i:!0),c}validatePasswordLengthOptions(t,n){const a=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;a&&(n.meetsMinPasswordLength=t.length>=a),r&&(n.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let a;for(let r=0;r<t.length;r++)a=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(t,n,a,r,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}class Tle{constructor(t,n,a,r){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=a,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new B3(this),this.idTokenSubscription=new B3(this),this.beforeStateQueue=new Sle(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=D5,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=gc(n)),this._initializationPromise=this.queue(async()=>{var a,r,s;if(!this._deleted&&(this.persistenceManager=await mv.create(this,t),(a=this._resolvePersistenceManagerAvailable)===null||a===void 0||a.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await M_(this,{idToken:t}),a=await kl._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(a)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(ji(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(i=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(i,i))}):this.directlySetCurrentUser(null)}const a=await this.assertedPersistence.getCurrentUser();let r=a,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,i=r?._redirectEventId,c=await this.tryRedirectSignIn(t);(!o||o===i)&&c?.user&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=a,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Gn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await O_(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=ule()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(ji(this.app))return Promise.reject(rf(this));const n=t?Hu(t):null;return n&&Gn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Gn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return ji(this.app)?Promise.reject(rf(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return ji(this.app)?Promise.reject(rf(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gc(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Ele(this),n=new kle(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new oh("auth","Firebase",t())}onAuthStateChanged(t,n,a){return this.registerStateListener(this.authStateSubscription,t,n,a)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,a){return this.registerStateListener(this.idTokenSubscription,t,n,a)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const a=this.onAuthStateChanged(()=>{a(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(a.tenantId=this.tenantId),await ble(this,a)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const a=await this.getOrInitRedirectPersistenceManager(n);return t===null?a.removeCurrentUser():a.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&gc(t)||this._popupRedirectResolver;Gn(n,this,"argument-error"),this.redirectPersistenceManager=await mv.create(this,[gc(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,a;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((a=this.redirectUser)===null||a===void 0?void 0:a._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const a=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==a&&(this.lastNotifiedUid=a,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,a,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const i=this._isInitialized?Promise.resolve():this._initializationPromise;if(Gn(i,this,"internal-error"),i.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const c=t.addObserver(n,a,r);return()=>{o=!0,c()}}else{const c=t.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Gn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=j5(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const a=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());a&&(n["X-Firebase-Client"]=a);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var t;if(ji(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n?.error&&ole(`Error while retrieving App Check token: ${n.error}`),n?.token}}function yw(e){return Hu(e)}class B3{constructor(t){this.auth=t,this.observer=null,this.addObserver=Goe(n=>this.observer=n)}get next(){return Gn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Gk={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ile(e){Gk=e}function Fle(e){return Gk.loadJS(e)}function Ple(){return Gk.gapiScript}function Dle(e){return`__${e}${Math.floor(Math.random()*1e6)}`}function q5(e,t){const n=B5(e,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(Lv(s,t??{}))return r;Ic(r,"already-initialized")}return n.initialize({options:t})}function Ule(e,t){const n=t?.persistence||[],a=(Array.isArray(n)?n:[n]).map(gc);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(a,t?.popupRedirectResolver)}function Rle(e,t,n){const a=yw(e);Gn(/^https?:\/\//.test(t),a,"invalid-emulator-scheme");const r=!1,s=Y5(t),{host:o,port:i}=Nle(t),c=i===null?"":`:${i}`,A={url:`${s}//${o}${c}/`},d=Object.freeze({host:o,port:i,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!a._canInitEmulator){Gn(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),Gn(Lv(A,a.config.emulator)&&Lv(d,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=A,a.emulatorConfig=d,a.settings.appVerificationDisabledForTesting=!0,pw(o)?(Toe(`${s}//${o}${c}`),Poe("Auth",!0)):Vle()}function Y5(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Nle(e){const t=Y5(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const a=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(a);if(r){const s=r[1];return{host:s,port:k3(a.substr(s.length+1))}}else{const[s,o]=a.split(":");return{host:s,port:k3(o)}}}function k3(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function Vle(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}class X5{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return pc("not implemented")}_getIdTokenResponse(t){return pc("not implemented")}_linkToIdToken(t,n){return pc("not implemented")}_getReauthenticationResolver(t){return pc("not implemented")}}async function vv(e,t){return fle(e,"POST","/v1/accounts:signInWithIdp",Hk(e,t))}const Lle="http://localhost";class pf extends X5{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new pf(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Ic("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:a,signInMethod:r}=n,s=Lk(n,["providerId","signInMethod"]);if(!a||!r)return null;const o=new pf(a,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return vv(t,n)}_linkToIdToken(t,n){const a=this.buildRequest();return a.idToken=n,vv(t,a)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,vv(t,n)}buildRequest(){const t={requestUri:Lle,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=ih(n)}return t}}class J5{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class gg extends J5{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class vd extends gg{constructor(){super("facebook.com")}static credential(t){return pf._fromParams({providerId:vd.PROVIDER_ID,signInMethod:vd.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return vd.credentialFromTaggedObject(t)}static credentialFromError(t){return vd.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return vd.credential(t.oauthAccessToken)}catch{return null}}}vd.FACEBOOK_SIGN_IN_METHOD="facebook.com";vd.PROVIDER_ID="facebook.com";class wu extends gg{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return pf._fromParams({providerId:wu.PROVIDER_ID,signInMethod:wu.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return wu.credentialFromTaggedObject(t)}static credentialFromError(t){return wu.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:a}=t;if(!n&&!a)return null;try{return wu.credential(n,a)}catch{return null}}}wu.GOOGLE_SIGN_IN_METHOD="google.com";wu.PROVIDER_ID="google.com";class hd extends gg{constructor(){super("github.com")}static credential(t){return pf._fromParams({providerId:hd.PROVIDER_ID,signInMethod:hd.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return hd.credentialFromTaggedObject(t)}static credentialFromError(t){return hd.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return hd.credential(t.oauthAccessToken)}catch{return null}}}hd.GITHUB_SIGN_IN_METHOD="github.com";hd.PROVIDER_ID="github.com";class pd extends gg{constructor(){super("twitter.com")}static credential(t,n){return pf._fromParams({providerId:pd.PROVIDER_ID,signInMethod:pd.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return pd.credentialFromTaggedObject(t)}static credentialFromError(t){return pd.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:a}=t;if(!n||!a)return null;try{return pd.credential(n,a)}catch{return null}}}pd.TWITTER_SIGN_IN_METHOD="twitter.com";pd.PROVIDER_ID="twitter.com";class Mv{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,a,r=!1){const s=await kl._fromIdTokenResponse(t,a,r),o=T3(a);return new Mv({user:s,providerId:o,_tokenResponse:a,operationType:n})}static async _forOperation(t,n,a){await t._updateTokensIfNecessary(a,!0);const r=T3(a);return new Mv({user:t,providerId:r,_tokenResponse:a,operationType:n})}}function T3(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class H_ extends Ou{constructor(t,n,a,r){var s;super(n.code,n.message),this.operationType=a,this.user=r,Object.setPrototypeOf(this,H_.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(t,n,a,r){return new H_(t,n,a,r)}}function Z5(e,t,n,a){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?H_._fromErrorAndOperation(e,s,t,a):s})}async function Mle(e,t,n=!1){const a=await I0(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Mv._forOperation(e,"link",a)}async function Ole(e,t,n=!1){const{auth:a}=e;if(ji(a.app))return Promise.reject(rf(a));const r="reauthenticate";try{const s=await I0(e,Z5(a,r,t,e),n);Gn(s.idToken,a,"internal-error");const o=$k(s.idToken);Gn(o,a,"internal-error");const{sub:i}=o;return Gn(e.uid===i,a,"user-mismatch"),Mv._forOperation(e,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&Ic(a,"user-mismatch"),s}}async function eM(e,t,n=!1){if(ji(e.app))return Promise.reject(rf(e));const a="signIn",r=await Z5(e,a,t),s=await Mv._fromIdTokenResponse(e,a,r);return n||await e._updateCurrentUser(s.user),s}async function Hle(e,t){return eM(yw(e),t)}function $le(e,t){return Hu(e).setPersistence(t)}function tM(e,t,n,a){return Hu(e).onIdTokenChanged(t,n,a)}function Qle(e,t,n){return Hu(e).beforeAuthStateChanged(t,n)}function Gle(e,t,n,a){return Hu(e).onAuthStateChanged(t,n,a)}function zle(e){return Hu(e).signOut()}const $_="__sak";class nM{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem($_,"1"),this.storage.removeItem($_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const Kle=1e3,Wle=10;class aM extends nM{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=W5(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const a=this.storage.getItem(n),r=this.localCache[n];a!==r&&t(n,r,a)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,i,c)=>{this.notifyListeners(o,c)});return}const a=t.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(a);!n&&this.localCache[a]===o||this.notifyListeners(a,o)},s=this.storage.getItem(a);Cle()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,Wle):r()}notifyListeners(t,n){this.localCache[t]=n;const a=this.listeners[t];if(a)for(const r of Array.from(a))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:a}),!0)})},Kle)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}aM.type="LOCAL";const zk=aM;class rM extends nM{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}rM.type="SESSION";const Kk=rM;function jle(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}class _w{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(r=>r.isListeningto(t));if(n)return n;const a=new _w(t);return this.receivers.push(a),a}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:a,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:a,eventType:r});const i=Array.from(o).map(async A=>A(n.origin,s)),c=await jle(i);n.ports[0].postMessage({status:"done",eventId:a,eventType:r,response:c})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_w.receivers=[];function Wk(e="",t=10){let n="";for(let a=0;a<t;a++)n+=Math.floor(Math.random()*10);return e+n}class qle{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,a=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((i,c)=>{const A=Wk("",20);r.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},a);o={messageChannel:r,onMessage(f){const m=f;if(m.data.eventId===A)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),i(m.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:A,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function ku(){return window}function Yle(e){ku().location.href=e}function sM(){return typeof ku().WorkerGlobalScope<"u"&&typeof ku().importScripts=="function"}async function Xle(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Jle(){var e;return((e=navigator?.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function Zle(){return sM()?self:null}const oM="firebaseLocalStorageDb",eue=1,Q_="firebaseLocalStorage",iM="fbase_key";class yg{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ww(e,t){return e.transaction([Q_],t?"readwrite":"readonly").objectStore(Q_)}function tue(){const e=indexedDB.deleteDatabase(oM);return new yg(e).toPromise()}function ZS(){const e=indexedDB.open(oM,eue);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const a=e.result;try{a.createObjectStore(Q_,{keyPath:iM})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const a=e.result;a.objectStoreNames.contains(Q_)?t(a):(a.close(),await tue(),t(await ZS()))})})}async function I3(e,t,n){const a=ww(e,!0).put({[iM]:t,value:n});return new yg(a).toPromise()}async function nue(e,t){const n=ww(e,!1).get(t),a=await new yg(n).toPromise();return a===void 0?null:a.value}function F3(e,t){const n=ww(e,!0).delete(t);return new yg(n).toPromise()}const aue=800,rue=3;class lM{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ZS(),this.db)}async _withRetries(t){let n=0;for(;;)try{const a=await this._openDb();return await t(a)}catch(a){if(n++>rue)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sM()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_w._getInstance(Zle()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await Xle(),!this.activeServiceWorker)return;this.sender=new qle(this.activeServiceWorker);const a=await this.sender._send("ping",{},800);a&&!((t=a[0])===null||t===void 0)&&t.fulfilled&&!((n=a[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Jle()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await ZS();return await I3(t,$_,"1"),await F3(t,$_),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(a=>I3(a,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(a=>nue(a,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>F3(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const s=ww(r,!1).getAll();return new yg(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],a=new Set;if(t.length!==0)for(const{fbase_key:r,value:s}of t)a.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!a.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(t,n){this.localCache[t]=n;const a=this.listeners[t];if(a)for(const r of Array.from(a))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),aue)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lM.type="LOCAL";const uM=lM;new pg(3e4,6e4);function sue(e,t){return t?gc(t):(Gn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}class jk extends X5{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return vv(t,this._buildIdpRequest())}_linkToIdToken(t,n){return vv(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return vv(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function oue(e){return eM(e.auth,new jk(e),e.bypassAuthState)}function iue(e){const{auth:t,user:n}=e;return Gn(n,t,"internal-error"),Ole(n,new jk(e),e.bypassAuthState)}async function lue(e){const{auth:t,user:n}=e;return Gn(n,t,"internal-error"),Mle(n,new jk(e),e.bypassAuthState)}class cM{constructor(t,n,a,r,s=!1){this.auth=t,this.resolver=a,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:a,postBody:r,tenantId:s,error:o,type:i}=t;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:a,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(i)(c))}catch(A){this.reject(A)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return oue;case"linkViaPopup":case"linkViaRedirect":return lue;case"reauthViaPopup":case"reauthViaRedirect":return iue;default:Ic(this.auth,"internal-error")}}resolve(t){Fc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Fc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const uue=new pg(2e3,1e4);class Xm extends cM{constructor(t,n,a,r,s){super(t,n,r,s),this.provider=a,this.authWindow=null,this.pollId=null,Xm.currentPopupAction&&Xm.currentPopupAction.cancel(),Xm.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Gn(t,this.auth,"internal-error"),t}async onExecution(){Fc(this.filter.length===1,"Popup operations only handle one event");const t=Wk();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Bu(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Bu(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xm.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,a;if(!((a=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||a===void 0)&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Bu(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,uue.get())};t()}}Xm.currentPopupAction=null;const cue="pendingRedirect",Jy=new Map;class due extends cM{constructor(t,n,a=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,a),this.eventId=null}async execute(){let t=Jy.get(this.auth._key());if(!t){try{const a=await Aue(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(a)}catch(n){t=()=>Promise.reject(n)}Jy.set(this.auth._key(),t)}return this.bypassAuthState||Jy.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Aue(e,t){const n=vue(t),a=mue(e);if(!await a._isAvailable())return!1;const r=await a._get(n)==="true";return await a._remove(n),r}function fue(e,t){Jy.set(e._key(),t)}function mue(e){return gc(e._redirectPersistence)}function vue(e){return Xy(cue,e.config.apiKey,e.name)}async function hue(e,t,n=!1){if(ji(e.app))return Promise.reject(rf(e));const a=yw(e),r=sue(a,t),o=await new due(a,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await a._persistUserIfCurrent(o.user),await a._setRedirectUser(null,t)),o}const pue=600*1e3;class gue{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(t,a)&&(n=!0,this.sendToConsumer(t,a),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!yue(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var a;if(t.error&&!dM(t)){const r=((a=t.error.code)===null||a===void 0?void 0:a.split("auth/")[1])||"internal-error";n.onError(Bu(this.auth,r))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const a=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&a}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=pue&&this.cachedEventUids.clear(),this.cachedEventUids.has(P3(t))}saveEventToCache(t){this.cachedEventUids.add(P3(t)),this.lastProcessedEventTime=Date.now()}}function P3(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function dM({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function yue(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dM(e);default:return!1}}async function _ue(e,t={}){return lh(e,"GET","/v1/projects",t)}const wue=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bue=/^https?/;async function xue(e){if(e.config.emulator)return;const{authorizedDomains:t}=await _ue(e);for(const n of t)try{if(Cue(n))return}catch{}Ic(e,"unauthorized-domain")}function Cue(e){const t=XS(),{protocol:n,hostname:a}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&a===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===a}if(!bue.test(n))return!1;if(wue.test(e))return a===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(a)}const Sue=new pg(3e4,6e4);function D3(){const e=ku().___jsl;if(e?.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function Eue(e){return new Promise((t,n)=>{var a,r,s;function o(){D3(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{D3(),n(Bu(e,"network-request-failed"))},timeout:Sue.get()})}if(!((r=(a=ku().gapi)===null||a===void 0?void 0:a.iframes)===null||r===void 0)&&r.Iframe)t(gapi.iframes.getContext());else if(!((s=ku().gapi)===null||s===void 0)&&s.load)o();else{const i=Dle("iframefcb");return ku()[i]=()=>{gapi.load?o():n(Bu(e,"network-request-failed"))},Fle(`${Ple()}?onload=${i}`).catch(c=>n(c))}}).catch(t=>{throw Zy=null,t})}let Zy=null;function Bue(e){return Zy=Zy||Eue(e),Zy}const kue=new pg(5e3,15e3),Tue="__/auth/iframe",Iue="emulator/auth/iframe",Fue={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Pue=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Due(e){const t=e.config;Gn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Ok(t,Iue):`https://${e.config.authDomain}/${Tue}`,a={apiKey:t.apiKey,appName:e.name,v:nA},r=Pue.get(e.config.apiHost);r&&(a.eid=r);const s=e._getFrameworks();return s.length&&(a.fw=s.join(",")),`${n}?${ih(a).slice(1)}`}async function Uue(e){const t=await Bue(e),n=ku().gapi;return Gn(n,e,"internal-error"),t.open({where:document.body,url:Due(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Fue,dontclear:!0},a=>new Promise(async(r,s)=>{await a.restyle({setHideOnLeave:!1});const o=Bu(e,"network-request-failed"),i=ku().setTimeout(()=>{s(o)},kue.get());function c(){ku().clearTimeout(i),r(a)}a.ping(c).then(c,()=>{s(o)})}))}const Rue={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Nue=500,Vue=600,Lue="_blank",Mue="http://localhost";class U3{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Oue(e,t,n,a=Nue,r=Vue){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-a)/2,0).toString();let i="";const c=Object.assign(Object.assign({},Rue),{width:a.toString(),height:r.toString(),top:s,left:o}),A=Qo().toLowerCase();n&&(i=$5(A)?Lue:n),O5(A)&&(t=t||Mue,c.scrollbars="yes");const d=Object.entries(c).reduce((m,[v,p])=>`${m}${v}=${p},`,"");if(xle(A)&&i!=="_self")return Hue(t||"",i),new U3(null);const f=window.open(t||"",i,d);Gn(f,e,"popup-blocked");try{f.focus()}catch{}return new U3(f)}function Hue(e,t){const n=document.createElement("a");n.href=e,n.target=t;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(a)}const $ue="__/auth/handler",Que="emulator/auth/handler",Gue=encodeURIComponent("fac");async function R3(e,t,n,a,r,s){Gn(e.config.authDomain,e,"auth-domain-config-required"),Gn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:a,v:nA,eventId:r};if(t instanceof J5){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",zS(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,f]of Object.entries({}))o[d]=f}if(t instanceof gg){const d=t.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);const i=o;for(const d of Object.keys(i))i[d]===void 0&&delete i[d];const c=await e._getAppCheckToken(),A=c?`#${Gue}=${encodeURIComponent(c)}`:"";return`${zue(e)}?${ih(i).slice(1)}${A}`}function zue({config:e}){return e.emulator?Ok(e,Que):`https://${e.authDomain}/${$ue}`}const Wx="webStorageSupport";class Kue{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Kk,this._completeRedirectFn=hue,this._overrideRedirectResult=fue}async _openPopup(t,n,a,r){var s;Fc((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await R3(t,n,a,XS(),r);return Oue(t,o,Wk())}async _openRedirect(t,n,a,r){await this._originValidation(t);const s=await R3(t,n,a,XS(),r);return Yle(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(Fc(s,"If manager is not set, promise should be"),s)}const a=this.initAndGetManager(t);return this.eventManagers[n]={promise:a},a.catch(()=>{delete this.eventManagers[n]}),a}async initAndGetManager(t){const n=await Uue(t),a=new gue(t);return n.register("authEvent",r=>(Gn(r?.authEvent,t,"invalid-auth-event"),{status:a.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:a},this.iframes[t._key()]=n,a}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Wx,{type:Wx},r=>{var s;const o=(s=r?.[0])===null||s===void 0?void 0:s[Wx];o!==void 0&&n(!!o),Ic(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=xue(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return W5()||H5()||Qk()}}const AM=Kue;var N3="@firebase/auth",V3="1.10.8";class Wue{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(a=>{t(a?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Gn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function jue(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function que(e){Pu(new Gl("auth",(t,{options:n})=>{const a=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:i}=a.options;Gn(o&&!o.includes(":"),"invalid-api-key",{appName:a.name});const c={apiKey:o,authDomain:i,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:j5(e)},A=new Tle(a,r,s,c);return Ule(A,n),A},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,a)=>{t.getProvider("auth-internal").initialize()})),Pu(new Gl("auth-internal",t=>{const n=yw(t.getProvider("auth").getImmediate());return(a=>new Wue(a))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Bi(N3,V3,jue(e)),Bi(N3,V3,"esm2017")}const Yue=300,Xue=w5("authIdTokenMaxAge")||Yue;let L3=null;const Jue=e=>async t=>{const n=t&&await t.getIdTokenResult(),a=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(a&&a>Xue)return;const r=n?.token;L3!==r&&(L3=r,await fetch(e,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function Zue(e=T5()){const t=B5(e,"auth");if(t.isInitialized())return t.getImmediate();const n=q5(e,{popupRedirectResolver:AM,persistence:[uM,zk,Kk]}),a=w5("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(a,location.origin);if(location.origin===s.origin){const o=Jue(s.toString());Qle(n,o,()=>o(n.currentUser)),tM(n,i=>o(i))}}const r=koe("auth");return r&&Rle(n,`http://${r}`),n}function ece(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}Ile({loadJS(e){return new Promise((t,n)=>{const a=document.createElement("script");a.setAttribute("src",e),a.onload=t,a.onerror=r=>{const s=Bu("internal-error");s.customData=r,n(s)},a.type="text/javascript",a.charset="UTF-8",ece().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});que("Browser");const tce={apiKey:"AIzaSyB8g1LkpQ-pkRyoMT02e7Y-AkSgBt21tVI",authDomain:"origami-clinic.firebaseapp.com",projectId:"origami-clinic",storageBucket:"origami-clinic.firebasestorage.app",messagingSenderId:"1062163572761",appId:"1:1062163572761:web:c3c03832110d86365b2288",measurementId:"G-HSMXCJSMKS"};console.log("Initializing Firebase for Electron...");let e_,$s,X1,jx=!1;try{e_=k5(tce),console.log("Firebase app initialized successfully"),$s=Zue(e_),console.log("Firebase auth initialized successfully"),jx=()=>typeof window<"u"&&window.process&&window.process.type==="renderer",console.log("Running in Electron:",jx()),X1=new wu,X1.setCustomParameters({prompt:"select_account",include_granted_scopes:"true",access_type:"online"}),X1.addScope("email"),X1.addScope("profile"),console.log("Firebase initialized:",{app:!!e_,auth:!!$s,isElectron:jx()}),(async()=>{try{await $le($s,zk),console.log("Firebase auth persistence set to LOCAL"),$s.onAuthStateChanged(t=>{console.log("Auth state changed in firebase.js:",!!t)})}catch(t){console.error("Error setting Firebase auth persistence:",t)}})()}catch(e){throw console.error("Failed to initialize Firebase:",e),e}function nce(){const e=new Uint8Array(16);return crypto.getRandomValues(e),Array.from(e,t=>t.toString(16).padStart(2,"0")).join("")}function ace(e){const{clientId:t,redirectUri:n,scope:a="email profile openid",responseType:r="token id_token",prompt:s="select_account",nonce:o}=e;return`https://accounts.google.com/o/oauth2/v2/auth?${new URLSearchParams({client_id:t,redirect_uri:n,scope:a,response_type:r,include_granted_scopes:"true",prompt:s,nonce:o}).toString()}`}function rce(){return $s.app.options}function sce(){return"1062163572761-ic92tedsm74d5pqrujo13c84u0u1g6ao.apps.googleusercontent.com"}function oce(){return"https://login.evamed.in/auth-callback.html"}function ice(e){try{const t=e.split(".");if(t.length!==3)throw new Error("Invalid JWT format");const n=t[1],a=atob(n.replace(/-/g,"+").replace(/_/g,"/"));return JSON.parse(a)}catch(t){return console.error("Error decoding JWT:",t),null}}const lce={namespaced:!0,state:{user:null,loading:!1,error:null,isFirstTimeSignIn:!1,redirectInProgress:!1},mutations:{SET_USER(e,t){if(e.user=t,t){const n=t.metadata;e.isFirstTimeSignIn=n.creationTime===n.lastSignInTime}else e.isFirstTimeSignIn=!1},SET_LOADING(e,t){e.loading=t},SET_ERROR(e,t){e.error=t},SET_REDIRECT_IN_PROGRESS(e,t){e.redirectInProgress=t}},actions:{async signInWithGoogle({commit:e}){try{if(e("SET_LOADING",!0),e("SET_ERROR",null),e("SET_REDIRECT_IN_PROGRESS",!0),console.log("Starting Google sign in with dynamic OAuth URL..."),window.process&&window.process.type==="renderer"){console.log("Running in Electron environment");const{ipcRenderer:n}=window.require("electron");n.removeAllListeners("auth-redirect");const a=nce(),r={clientId:sce(),redirectUri:oce(),scope:"email profile openid",responseType:"token id_token",prompt:"select_account",nonce:a},s=ace(r);console.log("Firebase config:",rce()),console.log("Using client ID:",r.clientId),console.log("Using redirect URI:",r.redirectUri),console.log("Generated nonce:",a),console.log("Generated OAuth URL:",s);const{shell:o}=window.require("electron");return await o.openExternal(s),console.log("Opened authentication URL in default browser"),console.log("Waiting for OAuth callback via custom protocol..."),new Promise((i,c)=>{const A=setTimeout(()=>{n.removeAllListeners("auth-redirect"),e("SET_REDIRECT_IN_PROGRESS",!1),e("SET_LOADING",!1),c(new Error("Authentication timeout"))},12e4);n.once("auth-redirect",async(d,f)=>{console.log("Received auth redirect in renderer:",f),clearTimeout(A),n.removeAllListeners("auth-redirect");try{const m=new URL(f),v=new URLSearchParams(m.search),p=v.get("access_token"),g=v.get("id_token"),y=v.get("error");if(y)throw new Error(`OAuth error: ${y}`);if(p&&g){const w=ice(g);w&&(console.log("ID Token payload:",w),w.nonce&&w.nonce!==a&&console.warn("Nonce mismatch in ID token"));const b=wu.credential(g,p),x=await Hle($s,b);console.log("Authentication successful:",x.user),e("SET_USER",x.user),e("SET_REDIRECT_IN_PROGRESS",!1);const T=x.user.metadata.creationTime===x.user.metadata.lastSignInTime;i(T)}else throw new Error("No valid authentication tokens received")}catch(m){console.error("Error processing auth redirect:",m),e("SET_ERROR","Authentication failed. Please close the app, check your internet connection and retry."),e("SET_REDIRECT_IN_PROGRESS",!1),c(m)}})})}else throw new Error("Browser-based authentication not implemented for web environment")}catch(t){throw console.error("Sign in error:",t),e("SET_REDIRECT_IN_PROGRESS",!1),t.code==="auth/network-request-failed"?e("SET_ERROR","Authentication failed. Please close the app, check your internet connection and retry."):e("SET_ERROR",t.message||"Authentication failed. Please close the app, check your internet connection and retry."),t}finally{e("SET_LOADING",!1)}},async signOut({commit:e}){try{e("SET_LOADING",!0),e("SET_ERROR",null),await zle($s),e("SET_USER",null),e("SET_REDIRECT_IN_PROGRESS",!1)}catch(t){throw e("SET_ERROR",t.message),t}finally{e("SET_LOADING",!1)}},initAuthState({commit:e}){return new Promise(t=>Gle($s,a=>{console.log("Auth state changed:",a),e("SET_USER",a),a&&this.state.auth.redirectInProgress&&e("SET_REDIRECT_IN_PROGRESS",!1),t(a)},a=>{console.error("Auth state change error:",a),e("SET_ERROR",a.message),e("SET_REDIRECT_IN_PROGRESS",!1),t(null)}))}},getters:{isAuthenticated:e=>!!e.user,currentUser:e=>e.user,isLoading:e=>e.loading,error:e=>e.error,isFirstTimeSignIn:e=>e.isFirstTimeSignIn,redirectInProgress:e=>e.redirectInProgress}},eE=async()=>{try{return{data:(await At.get("/doctor/")).data.data.doctors,error:null}}catch(e){return console.error("There was an error fetching the doctors:",e?.response||e),{data:[],error:e}}},uce=async e=>{try{return await At.post(`/print/${e.doctorId}`,e),{error:null}}catch(t){return console.error("There was an error creating print config:",t),{error:t}}},cce=async e=>{try{const a=(await At.post("/doctor/",e)).data.data.id;console.log("Doctor created successfully, ID:",a);const r={doctorId:a,doctorName:e.doctorName||"",doctorDegrees:e.doctorDegrees||"",doctorRegistrationNumber:e.doctorRegistrationNumber||"",email:"",clinicAddress:"-",contactNumber:"",useHeader:!0,pageSize:"A4"},s=await uce(r);return s.error?console.warn("Doctor created successfully but print config creation failed:",s.error):console.log("Print configuration created successfully for doctor ID:",a),{error:null}}catch(t){return console.error("There was an error adding the doctor:",t),{error:t}}},dce=async e=>{try{return await At.put(`/doctor/${e.id}`,e),{error:null}}catch(t){return console.error("There was an error editing the doctor:",t),{error:t}}},Ace={namespaced:!0,state:()=>({doctors:[],doctorId:1,initialized:!1}),getters:{allDoctors:e=>e.doctors,currentDoctorId:e=>e.doctorId,currentDoctor:e=>e.doctors.find(t=>t.id===e.doctorId),isInitialized:e=>e.initialized,isProcedurePrimary:e=>e.doctors.find(n=>n.id===e.doctorId)?.procedurePrimary||!1,isGSTRegistered:e=>e.doctors.find(n=>n.id===e.doctorId)?.isGST||!1,gstIdentifier:e=>e.doctors.find(n=>n.id===e.doctorId)?.gstIdentifier||"",isPharmacyEnabled:e=>e.doctors.find(n=>n.id===e.doctorId)?.isPharmacy||!1},mutations:{setDoctors(e,t){e.doctors=t},setDoctorId(e,t){e.doctorId=t},setInitialized(e,t){e.initialized=t}},actions:{async fetchDoctors({commit:e}){const t=await eE();return e("setDoctors",t.data),t},async initializeDoctors({dispatch:e,commit:t,state:n}){if(!n.initialized)try{const a=await e("fetchDoctors");if(a.error){console.warn("Failed to fetch doctors due to API error:",a.error),t("setDoctorId",1),t("setInitialized",!0);return}a.data&&a.data.length>0?(console.log(`Found ${a.data.length} doctors, setting first as active`),t("setDoctorId",a.data[0].id)):(console.warn("No doctors found - using fallback ID 1"),t("setDoctorId",1)),t("setInitialized",!0)}catch(a){console.error("Error initializing doctors:",a),t("setDoctorId",1),t("setInitialized",!0)}}}},fM=async()=>{try{return{data:(await At.get("/clinic/")).data.data.clinics,error:null}}catch(e){return console.error("There was an error fetching the doctors:",e?.response||e),{data:[],error:e}}},fce=async e=>{try{return await At.post("/clinic/",e),{error:null}}catch(t){return console.error("There was an error adding the clinic:",t),{error:t}}},mce=async e=>{try{return await At.put(`/clinic/${e.id}`,e),{error:null}}catch(t){return console.error("There was an error editing the doctor:",t),{error:t}}},vce={namespaced:!0,state:()=>({clinics:[],clinicId:1,initialized:!1}),getters:{allClinics:e=>e.clinics,currentClinicId:e=>e.clinicId,currentClinic:e=>e.clinics.find(t=>t.id===e.clinicId),isInitialized:e=>e.initialized},mutations:{setClinics(e,t){e.clinics=t},setClinicId(e,t){e.clinicId=t},setInitialized(e,t){e.initialized=t}},actions:{async fetchClinics({commit:e}){const t=await fM();return e("setClinics",t.data),t},async initializeClinics({dispatch:e,commit:t,state:n}){if(!n.initialized)try{const a=await e("fetchClinics");if(a.error){console.warn("Failed to fetch clinics due to API error:",a.error),t("setClinicId",1),t("setInitialized",!0);return}a.data&&a.data.length>0?(console.log(`Found ${a.data.length} clinics, setting first as active`),t("setClinicId",a.data[0].id)):(console.warn("No clinics found - using fallback ID 1"),t("setClinicId",1)),t("setInitialized",!0)}catch(a){console.error("Error initializing clinics:",a),t("setClinicId",1),t("setInitialized",!0)}}}},hce={extensionContent:null},pce={SET_EXTENSION_CONTENT(e,t){e.extensionContent=t},CLEAR_EXTENSION_CONTENT(e){e.extensionContent=null}},gce={setExtensionContent({commit:e},t){e("SET_EXTENSION_CONTENT",t)},clearExtensionContent({commit:e}){e("CLEAR_EXTENSION_CONTENT")}},yce={extensionContent:e=>e.extensionContent},_ce={namespaced:!0,state:hce,mutations:pce,actions:gce,getters:yce},wce={show:!1,message:"",color:"info",timeout:4e3},bce={SHOW_SNACKBAR(e,{message:t,color:n="info",timeout:a=4e3}){e.show=!0,e.message=t,e.color=n,e.timeout=a},HIDE_SNACKBAR(e){e.show=!1,e.message=""},SET_SNACKBAR_VISIBILITY(e,t){e.show=t}},xce={showSnackbar({commit:e},t){e("SHOW_SNACKBAR",t)},hideSnackbar({commit:e}){e("HIDE_SNACKBAR")},setSnackbarVisibility({commit:e},t){e("SET_SNACKBAR_VISIBILITY",t)},showSuccess({commit:e},t){e("SHOW_SNACKBAR",{message:t,color:"success"})},showError({commit:e},t){e("SHOW_SNACKBAR",{message:t,color:"error"})},showWarning({commit:e},t){e("SHOW_SNACKBAR",{message:t,color:"warning"})},showInfo({commit:e},t){e("SHOW_SNACKBAR",{message:t,color:"info"})}},Cce={snackbar:e=>e,isSnackbarVisible:e=>e.show,snackbarMessage:e=>e.message,snackbarColor:e=>e.color},Sce={namespaced:!0,state:wce,mutations:bce,actions:xce,getters:Cce},Ece="modulepreload",Bce=function(e,t){return new URL(e,t).href},M3={},Tr=function(t,n,a){let r=Promise.resolve();if(n&&n.length>0){let A=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};const o=document.getElementsByTagName("link"),i=document.querySelector("meta[property=csp-nonce]"),c=i?.nonce||i?.getAttribute("nonce");r=A(n.map(d=>{if(d=Bce(d,a),d in M3)return;M3[d]=!0;const f=d.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(a)for(let p=o.length-1;p>=0;p--){const g=o[p];if(g.href===d&&(!f||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${m}`))return;const v=document.createElement("link");if(v.rel=f?"stylesheet":Ece,f||(v.as="script"),v.crossOrigin="",v.href=d,c&&v.setAttribute("nonce",c),document.head.appendChild(v),f)return new Promise((p,g)=>{v.addEventListener("load",p),v.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(o){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=o,window.dispatchEvent(i),!i.defaultPrevented)throw o}return r.then(o=>{for(const i of o||[])i.status==="rejected"&&s(i.reason);return t().catch(s)})},kce={namespaced:!0,state:{filters:{diagnosis:null,medicine:null,dateFrom:"",dateTo:"",patientName:"",gender:"",ageGreaterThan:"",ageLessThan:""},searchResults:[],isLoading:!1,hasSearched:!1,lastSearchTime:null,totalResults:0,searchError:null,currentPage:1,resultsPerPage:20},getters:{hasActiveFilters:e=>!!(e.filters.diagnosis||e.filters.medicine||e.filters.dateFrom||e.filters.dateTo||e.filters.patientName?.trim()||e.filters.gender||e.filters.ageGreaterThan||e.filters.ageLessThan),searchSummary:e=>e.hasSearched?{totalResults:e.totalResults,filters:{...e.filters},searchTime:e.lastSearchTime,hasResults:e.searchResults.length>0}:null,activeFiltersText:(e,t,n)=>{if(!t.hasActiveFilters)return"";const a=e.filters,r=[];a.diagnosis&&typeof a.diagnosis=="string"&&a.diagnosis.trim()&&r.push(`Diagnosis: ${a.diagnosis}`),a.medicine&&typeof a.medicine=="string"&&a.medicine.trim()&&r.push(`Medicine: ${a.medicine}`),a.dateFrom&&a.dateTo?r.push(`Date: ${a.dateFrom} to ${a.dateTo}`):a.dateFrom?r.push(`From: ${a.dateFrom}`):a.dateTo&&r.push(`Until: ${a.dateTo}`),a.patientName?.trim()&&r.push(`Patient: ${a.patientName.trim()}`),a.gender?.trim()&&r.push(`Gender: ${a.gender.trim()}`),(a.ageGreaterThan||a.ageLessThan)&&(a.ageGreaterThan&&a.ageLessThan?r.push(`Age: ${a.ageGreaterThan}-${a.ageLessThan} years`):a.ageGreaterThan?r.push(`Age: Over ${a.ageGreaterThan} years`):a.ageLessThan&&r.push(`Age: Under ${a.ageLessThan} years`));const s=n.doctorModule?.doctorId,i=n.doctorModule?.doctors?.find(c=>c.id===s)?.doctorName;return i&&r.push(`Doctor: ${i}`),r.join("  ")}},mutations:{SET_FILTERS(e,t){e.filters={...e.filters,...t}},SET_SEARCH_RESULTS(e,{results:t,total:n}){e.searchResults=t||[],e.totalResults=n||0,e.hasSearched=!0,e.lastSearchTime=new Date().toISOString(),e.searchError=null},SET_LOADING(e,t){e.isLoading=!!t},SET_ERROR(e,t){e.searchError=t,e.isLoading=!1},CLEAR_SEARCH(e){e.searchResults=[],e.hasSearched=!1,e.totalResults=0,e.lastSearchTime=null,e.searchError=null},RESET_FILTERS(e){e.filters={diagnosis:null,medicine:null,dateFrom:"",dateTo:"",patientName:"",gender:"",ageGreaterThan:"",ageLessThan:""}},CLEAR_ALL(e){e.filters={diagnosis:null,medicine:null,dateFrom:"",dateTo:"",patientName:"",gender:"",ageGreaterThan:"",ageLessThan:""},e.searchResults=[],e.hasSearched=!1,e.totalResults=0,e.lastSearchTime=null,e.searchError=null,e.isLoading=!1}},actions:{async performSearch({commit:e,state:t,rootState:n}){const{fetchResearchData:a}=await Tr(async()=>{const{fetchResearchData:r}=await import("./researchUtils-D6rvlA9J.js");return{fetchResearchData:r}},[],import.meta.url);e("SET_LOADING",!0),e("SET_ERROR",null);try{const r=n.doctorModule?.doctorId;if(!r)throw new Error("No doctor selected. Please select a doctor first.");const s={...t.filters,doctor_id:r};console.log(" Performing research search with filters (including current doctor):",s);const o=await a(s);if(o.error)throw new Error(`Search failed: ${o.error.message||"Unknown error"}`);const i=Array.isArray(o.data)?o.data:[];return e("SET_SEARCH_RESULTS",{results:i,total:i.length}),console.log(" Research search completed:",i.length,"results"),{data:i,error:null,success:!0}}catch(r){return console.error(" Research search failed:",r),e("SET_ERROR",r.message||"Failed to search research data"),{data:[],error:r,success:!1}}finally{e("SET_LOADING",!1)}},async updateFilters({commit:e,dispatch:t,getters:n},{filters:a,autoSearch:r=!1}){return e("SET_FILTERS",a),r&&n.hasActiveFilters?await t("performSearch"):{success:!0}},clearSearch({commit:e}){e("CLEAR_SEARCH")},clearFilters({commit:e}){e("RESET_FILTERS")},clearAll({commit:e}){e("CLEAR_ALL")}}},Tce={namespaced:!0,state:{filters:{procedureName:"",dateFrom:"",dateTo:"",gender:"",ageGreaterThan:"",ageLessThan:""},searchResults:[],isLoading:!1,hasSearched:!1,lastSearchTime:null,totalResults:0,searchError:null,currentPage:1,resultsPerPage:20},getters:{hasActiveFilters:e=>!!(e.filters.procedureName?.trim()||e.filters.dateFrom||e.filters.dateTo||e.filters.gender||e.filters.ageGreaterThan||e.filters.ageLessThan),searchSummary:e=>e.hasSearched?{totalResults:e.totalResults,filters:{...e.filters},searchTime:e.lastSearchTime,hasResults:e.searchResults.length>0}:null,activeFiltersText:(e,t,n)=>{if(!t.hasActiveFilters)return"";const a=e.filters,r=[];a.procedureName?.trim()&&r.push(`Procedure: ${a.procedureName.trim()}`),a.dateFrom&&a.dateTo?r.push(`Date: ${a.dateFrom} to ${a.dateTo}`):a.dateFrom?r.push(`From: ${a.dateFrom}`):a.dateTo&&r.push(`Until: ${a.dateTo}`),a.gender?.trim()&&r.push(`Gender: ${a.gender.trim()}`),(a.ageGreaterThan||a.ageLessThan)&&(a.ageGreaterThan&&a.ageLessThan?r.push(`Age: ${a.ageGreaterThan}-${a.ageLessThan} years`):a.ageGreaterThan?r.push(`Age: Over ${a.ageGreaterThan} years`):a.ageLessThan&&r.push(`Age: Under ${a.ageLessThan} years`));const s=n.doctorModule?.doctorId,i=n.doctorModule?.doctors?.find(c=>c.id===s)?.doctorName;return i&&r.push(`Doctor: ${i}`),r.join("  ")}},mutations:{SET_FILTERS(e,t){e.filters={...e.filters,...t}},SET_SEARCH_RESULTS(e,{results:t,total:n}){e.searchResults=t||[],e.totalResults=n||0,e.hasSearched=!0,e.lastSearchTime=new Date().toISOString(),e.searchError=null},SET_LOADING(e,t){e.isLoading=!!t},SET_ERROR(e,t){e.searchError=t,e.isLoading=!1},CLEAR_SEARCH(e){e.searchResults=[],e.hasSearched=!1,e.totalResults=0,e.lastSearchTime=null,e.searchError=null},RESET_FILTERS(e){e.filters={procedureName:"",dateFrom:"",dateTo:"",gender:"",ageGreaterThan:"",ageLessThan:""}},CLEAR_ALL(e){e.filters={procedureName:"",dateFrom:"",dateTo:"",gender:"",ageGreaterThan:"",ageLessThan:""},e.searchResults=[],e.hasSearched=!1,e.totalResults=0,e.lastSearchTime=null,e.searchError=null,e.isLoading=!1}},actions:{async performSearch({commit:e,state:t,rootState:n}){const{searchProcedureResearch:a}=await Tr(async()=>{const{searchProcedureResearch:r}=await Promise.resolve().then(()=>Vve);return{searchProcedureResearch:r}},void 0,import.meta.url);e("SET_LOADING",!0),e("SET_ERROR",null);try{const r=n.doctorModule?.doctorId;if(!r)throw new Error("No doctor selected. Please select a doctor first.");const s={...t.filters,doctor_id:r};console.log(" Performing procedure research search with filters:",s);const o=await a(s);if(o.error)throw new Error(`Search failed: ${o.error.message||"Unknown error"}`);const i=Array.isArray(o.data)?o.data:[];return e("SET_SEARCH_RESULTS",{results:i,total:i.length}),console.log(" Procedure research search completed:",i.length,"results"),{data:i,error:null,success:!0}}catch(r){return console.error(" Procedure research search failed:",r),e("SET_ERROR",r.message||"Failed to search procedure research data"),{data:[],error:r,success:!1}}finally{e("SET_LOADING",!1)}},async updateFilters({commit:e,dispatch:t,getters:n},{filters:a,autoSearch:r=!1}){return e("SET_FILTERS",a),r&&n.hasActiveFilters?await t("performSearch"):{success:!0}},clearSearch({commit:e}){e("CLEAR_SEARCH")},clearFilters({commit:e}){e("RESET_FILTERS")},clearAll({commit:e}){e("CLEAR_ALL")}}},Ice={filters:{reminderType:"",reminderStatus:"",patientName:"",dateFrom:"",dateTo:""},searchResults:[],rawResults:{appointments:[],consultations:[],treatmentPlans:[]},isLoading:!1,hasSearched:!1,searchError:null,partialErrors:[],lastSearchTime:null,totalResults:0},Fce={hasActiveFilters:e=>!!(e.filters.reminderType&&e.filters.reminderType!==""||e.filters.reminderStatus&&e.filters.reminderStatus!==""||e.filters.patientName?.trim()||e.filters.dateFrom||e.filters.dateTo),searchSummary:e=>e.hasSearched?{totalResults:e.totalResults,filters:{...e.filters},searchTime:e.lastSearchTime,hasResults:e.searchResults.length>0,hasPartialErrors:e.partialErrors.length>0}:null,activeFiltersText:(e,t,n)=>{if(!t.hasActiveFilters)return"";const a=e.filters,r=[];if(a.reminderType&&a.reminderType!==""){const c={appointment:"Appointments",consultation:"Consultations",procedures:"Treatment Plans"};r.push(`Type: ${c[a.reminderType]||a.reminderType}`)}if(a.reminderStatus&&a.reminderStatus!==""){const c={pending:"Pending",completed:"Completed"};r.push(`Status: ${c[a.reminderStatus]||a.reminderStatus}`)}a.patientName?.trim()&&r.push(`Patient: ${a.patientName.trim()}`),a.dateFrom&&a.dateTo?r.push(`Date: ${a.dateFrom} to ${a.dateTo}`):a.dateFrom?r.push(`From: ${a.dateFrom}`):a.dateTo&&r.push(`Until: ${a.dateTo}`);const s=n.doctorModule?.doctorId,i=n.doctorModule?.doctors?.find(c=>c.id===s)?.doctorName;return i&&r.push(`Doctor: ${i}`),r.join("  ")},uniquePatientsCount:e=>e.searchResults.length?new Set(e.searchResults.map(n=>n.patientId)).size:0,pendingRemindersCount:e=>e.searchResults.filter(t=>t.status==="pending").length,completedRemindersCount:e=>e.searchResults.filter(t=>t.status==="completed").length,appointmentReminders:e=>e.searchResults.filter(t=>t.type==="appointment"),consultationReminders:e=>e.searchResults.filter(t=>t.type==="consultation"),treatmentPlanReminders:e=>e.searchResults.filter(t=>t.type==="procedures")},Pce={SET_FILTERS(e,t){e.filters={...e.filters,...t}},SET_SEARCH_RESULTS(e,{results:t,rawResults:n,total:a,partialErrors:r}){e.searchResults=t||[],e.rawResults=n||{appointments:[],consultations:[],treatmentPlans:[]},e.totalResults=a||0,e.partialErrors=r||[],e.hasSearched=!0,e.lastSearchTime=new Date().toISOString(),e.searchError=null},SET_LOADING(e,t){e.isLoading=!!t},SET_ERROR(e,t){e.searchError=t,e.isLoading=!1},CLEAR_SEARCH(e){e.searchResults=[],e.rawResults={appointments:[],consultations:[],treatmentPlans:[]},e.hasSearched=!1,e.totalResults=0,e.lastSearchTime=null,e.searchError=null,e.partialErrors=[]},RESET_FILTERS(e){e.filters={reminderType:"",reminderStatus:"",patientName:"",dateFrom:"",dateTo:""}},CLEAR_ALL(e){e.filters={reminderType:"",reminderStatus:"",patientName:"",dateFrom:"",dateTo:""},e.searchResults=[],e.rawResults={appointments:[],consultations:[],treatmentPlans:[]},e.hasSearched=!1,e.totalResults=0,e.lastSearchTime=null,e.searchError=null,e.partialErrors=[],e.isLoading=!1},UPDATE_REMINDER_STATUS(e,{id:t,isReminded:n}){const a=e.searchResults.find(r=>r.id===t);a&&(a.status=n?"completed":"pending",a.details.isReminded=n)}},Dce={async performSearch({commit:e,state:t,rootState:n}){const{fetchAllReminders:a}=await Tr(async()=>{const{fetchAllReminders:r}=await import("./reminderUtils-DIOPlVjq.js");return{fetchAllReminders:r}},[],import.meta.url);e("SET_LOADING",!0),e("SET_ERROR",null);try{const r=n.doctorModule?.doctorId;if(!r)throw new Error("No doctor selected. Please select a doctor first.");const s={...t.filters,doctor_id:r};t.filters.reminderStatus==="pending"?s.reminded=!1:t.filters.reminderStatus==="completed"&&(s.reminded=!0),console.log(" Performing reminder search with filters (including current doctor):",s);const o=await a(s);if(o.error&&o.data.length===0)throw new Error(o.error);const i=o.data||[];return e("SET_SEARCH_RESULTS",{results:i,rawResults:o.rawResults||{},total:i.length,partialErrors:o.partialErrors||[]}),console.log(" Reminder search completed:",i.length,"results"),o.partialErrors?.length>0&&console.warn(" Search completed with partial errors:",o.partialErrors),{data:i,error:null,success:!0,partialErrors:o.partialErrors}}catch(r){return console.error(" Reminder search failed:",r),e("SET_ERROR",r.message||"Failed to search reminders"),{data:[],error:r,success:!1,partialErrors:[]}}finally{e("SET_LOADING",!1)}},async updateFilters({commit:e,dispatch:t,getters:n},{filters:a,autoSearch:r=!1}){return e("SET_FILTERS",a),console.log(" Reminder filters updated:",a),r&&n.hasActiveFilters?await t("performSearch"):{success:!0}},clearSearch({commit:e}){return e("CLEAR_SEARCH"),console.log(" Reminder search results cleared"),{success:!0}},resetFilters({commit:e}){return e("RESET_FILTERS"),console.log(" Reminder filters reset"),{success:!0}},clearAll({commit:e}){return e("CLEAR_ALL"),console.log(" All reminder filters and results cleared"),{success:!0}},async markAsReminded({commit:e,rootState:t},{reminder:n,isReminded:a}){try{const{updateReminderStatus:r}=await Tr(async()=>{const{updateReminderStatus:d}=await import("./reminderUtils-DIOPlVjq.js");return{updateReminderStatus:d}},[],import.meta.url),s=n.details.reminderType,o=n.originalId,i=n.details,c=t.clinicModule?.clinicId;c&&!i.clinicId&&!i.clinic_id&&(i.clinic_id=c),console.log(` Marking ${s} reminder as ${a?"reminded":"not reminded"}:`,o),console.log(" Original data:",i);const A=await r(s,o,a,i);if(A.success)return e("UPDATE_REMINDER_STATUS",{id:n.id,isReminded:a}),console.log(" Reminder status updated successfully"),{success:!0,error:null};throw new Error(A.error||"Failed to update reminder status")}catch(r){return console.error(" Failed to update reminder status:",r),{success:!1,error:r.message||"Failed to update reminder status"}}}},Uce={namespaced:!0,state:Ice,getters:Fce,mutations:Pce,actions:Dce},Rce=async(e,t=null,n=null)=>{try{const a={clinic_id:e};t&&(a.type=t);const r=n?{signal:n,params:a}:{params:a};return{data:(await At.get("/resource/entities",r)).data.data.entities,error:null}}catch(a){return a.name==="AbortError"?{data:[],error:null}:(console.error("Error fetching resource entities:",a),{data:[],error:a})}},Nce=async e=>{try{return{data:(await At.post("/resource/entities",e)).data.data.entity,error:null}}catch(t){return console.error("Error creating resource entity:",t),{data:null,error:t}}},Vce=async(e,t)=>{try{return{data:(await At.put(`/resource/entities/${e}`,t)).data.data.entity,error:null}}catch(n){return console.error("Error updating resource entity:",n),{data:null,error:n}}},Lce=async e=>{try{return{data:(await At.delete(`/resource/entities/${e}`)).data.data,error:null}}catch(t){return console.error("Error deleting resource entity:",t),{data:null,error:t}}},Mce=async(e,t=null)=>{try{const n=t?{signal:t,params:e}:{params:e};return{data:(await At.get("/resource/bookings",n)).data.data.bookings,error:null}}catch(n){return n.name==="AbortError"?{data:[],error:null}:(console.error("Error fetching resource bookings:",n),{data:[],error:n})}},Oce=async e=>{try{const t=await At.post("/resource/bookings",e);return{data:t.data.data.booking,error:null,hasConflicts:t.data.data.hasConflicts}}catch(t){return console.error("Error creating resource booking:",t),{data:null,error:t,hasConflicts:!1}}},Hce=async(e,t)=>{try{const n=await At.put(`/resource/bookings/${e}`,t);return{data:n.data.data.booking,error:null,hasConflicts:n.data.data.hasConflicts}}catch(n){return console.error("Error updating resource booking:",n),{data:null,error:n,hasConflicts:!1}}},$ce=async e=>{try{return{data:(await At.delete(`/resource/bookings/${e}`)).data.data,error:null}}catch(t){return console.error("Error deleting resource booking:",t),{data:null,error:t}}},Qce=async(e,t,n,a=null,r=null)=>{try{const s={entity_id:e,start_date_time:t,end_date_time:n};a&&(s.exclude_id=a);const o=r?{signal:r,params:s}:{params:s};return{data:(await At.get("/resource/bookings/conflicts",o)).data.data,error:null}}catch(s){return s.name==="AbortError"?{data:{conflicts:[],hasConflicts:!1},error:null}:(console.error("Error checking booking conflicts:",s),{data:{conflicts:[],hasConflicts:!1},error:s})}},Gce=()=>{try{const e=localStorage.getItem("resourceBookingState");if(e){const t=JSON.parse(e);return{selectedDate:t.selectedDate||null,selectedEntity:t.selectedEntity||null,entitySearchQuery:t.entitySearchQuery||""}}}catch(e){console.error("Error loading persisted resource booking state:",e)}return{selectedDate:null,selectedEntity:null,entitySearchQuery:""}},qx=Gce(),zce={namespaced:!0,state:{entities:[],bookings:[],selectedDate:qx.selectedDate,selectedEntity:qx.selectedEntity,entitySearchQuery:qx.entitySearchQuery,isLoading:!1,isRefreshing:!1,error:null},getters:{filteredEntities:e=>{if(!e.entitySearchQuery||e.entitySearchQuery.trim()==="")return[...e.entities].sort((n,a)=>n.name.localeCompare(a.name));const t=e.entitySearchQuery.toLowerCase().trim();return e.entities.filter(n=>n.name.toLowerCase().includes(t)).sort((n,a)=>n.name.localeCompare(a.name))},bookingsByDate:e=>e.selectedDate?e.bookings.filter(t=>!0):[],bookingsByEntity:(e,t)=>{const n=t.bookingsByDate,a={};return n.forEach(r=>{const s=r.entityId||r.entity?.id;a[s]||(a[s]=[]),a[s].push(r)}),a},conflicts:e=>{const t=[],n=e.bookings;for(let a=0;a<n.length;a++)for(let r=a+1;r<n.length;r++){const s=n[a],o=n[r];if(s.entityId===o.entityId||s.entity?.id===o.entity?.id){const i=s.startDateTime,c=s.endDateTime,A=o.startDateTime,d=o.endDateTime;i<d&&c>A&&t.push({booking1:s,booking2:o})}}return t}},mutations:{setEntities(e,t){e.entities=t},addEntity(e,t){e.entities.push(t)},updateEntity(e,t){const n=e.entities.findIndex(a=>a.id===t.id);n!==-1&&(e.entities[n]=t)},removeEntity(e,t){e.entities=e.entities.filter(n=>n.id!==t)},setBookings(e,t){e.bookings=t},addBooking(e,t){e.bookings.push(t)},updateBooking(e,t){const n=e.bookings.findIndex(a=>a.id===t.id);n!==-1&&(e.bookings[n]=t)},removeBooking(e,t){e.bookings=e.bookings.filter(n=>n.id!==t)},setSelectedDate(e,t){e.selectedDate=t;try{const n=JSON.parse(localStorage.getItem("resourceBookingState")||"{}");n.selectedDate=t,localStorage.setItem("resourceBookingState",JSON.stringify(n))}catch(n){console.error("Error persisting selectedDate:",n)}},setSelectedEntity(e,t){e.selectedEntity=t;try{const n=JSON.parse(localStorage.getItem("resourceBookingState")||"{}");n.selectedEntity=t,localStorage.setItem("resourceBookingState",JSON.stringify(n))}catch(n){console.error("Error persisting selectedEntity:",n)}},setEntitySearchQuery(e,t){e.entitySearchQuery=t;try{const n=JSON.parse(localStorage.getItem("resourceBookingState")||"{}");n.entitySearchQuery=t,localStorage.setItem("resourceBookingState",JSON.stringify(n))}catch(n){console.error("Error persisting entitySearchQuery:",n)}},setLoading(e,t){e.isLoading=t},setRefreshing(e,t){e.isRefreshing=t},setError(e,t){e.error=t},clearOldBookings(e){e.bookings=[]}},actions:{async fetchEntities({commit:e,rootState:t},{type:n=null,signal:a=null}={}){try{e("setLoading",!0),e("setError",null);const r=t.clinicId||t.clinicModule?.clinicId||1,s=await Rce(r,n,a);if(s.error)throw s.error;return e("setEntities",s.data||[]),{data:s.data,error:null}}catch(r){return e("setError",r),{data:[],error:r}}finally{e("setLoading",!1)}},async createEntity({commit:e,dispatch:t},n){try{e("setError",null);const a=await Nce(n);if(a.error)throw a.error;return e("addEntity",a.data),await t("fetchEntities"),{data:a.data,error:null}}catch(a){return e("setError",a),{data:null,error:a}}},async updateEntity({commit:e,dispatch:t},{id:n,entityData:a}){try{e("setError",null);const r=await Vce(n,a);if(r.error)throw r.error;return e("updateEntity",r.data),await t("fetchEntities"),{data:r.data,error:null}}catch(r){return e("setError",r),{data:null,error:r}}},async deleteEntity({commit:e,dispatch:t},n){try{e("setError",null);const a=await Lce(n);if(a.error)throw a.error;return e("removeEntity",n),await t("fetchEntities"),{data:a.data,error:null}}catch(a){return e("setError",a),{data:null,error:a}}},async fetchBookings({commit:e,rootState:t,state:n},{date:a=null,entityId:r=null,signal:s=null}={}){try{e("setLoading",!0),e("setError",null);const o=t.clinicId||t.clinicModule?.clinicId||1,i=a||n.selectedDate;if(!i)return e("setBookings",[]),{data:[],error:null};const c={clinic_id:o,date:i};r&&(c.entity_id=r);const A=await Mce(c,s);if(A.error)throw A.error;return e("setBookings",A.data||[]),{data:A.data,error:null}}catch(o){return o.name!=="AbortError"&&e("setError",o),{data:[],error:o}}finally{e("setLoading",!1)}},async createBooking({commit:e,dispatch:t},n){try{e("setError",null);const a=await Oce(n);if(a.error)throw a.error;return e("addBooking",a.data),await t("fetchBookings"),{data:a.data,error:null,hasConflicts:a.hasConflicts}}catch(a){return e("setError",a),{data:null,error:a,hasConflicts:!1}}},async updateBooking({commit:e,dispatch:t},{id:n,bookingData:a}){try{e("setError",null);const r=await Hce(n,a);if(r.error)throw r.error;return e("updateBooking",r.data),await t("fetchBookings"),{data:r.data,error:null,hasConflicts:r.hasConflicts}}catch(r){return e("setError",r),{data:null,error:r,hasConflicts:!1}}},async deleteBooking({commit:e,dispatch:t},n){try{e("setError",null);const a=await $ce(n);if(a.error)throw a.error;return e("removeBooking",n),await t("fetchBookings"),{data:a.data,error:null}}catch(a){return e("setError",a),{data:null,error:a}}},async refreshBookings({commit:e,dispatch:t,state:n}){try{return e("setRefreshing",!0),e("setError",null),await Promise.all([t("fetchEntities"),t("fetchBookings",{date:n.selectedDate})]),{error:null}}catch(a){return e("setError",a),{error:a}}finally{e("setRefreshing",!1)}},async checkConflicts({commit:e},{entityId:t,startDateTime:n,endDateTime:a,excludeId:r=null,signal:s=null}){try{const o=await Qce(t,n,a,r,s);if(o.error)throw o.error;return{data:o.data,error:null}}catch(o){return o.name!=="AbortError"&&e("setError",o),{data:{conflicts:[],hasConflicts:!1},error:o}}}}},Kce=()=>localStorage.getItem("selectedTranslationLanguage")||"none",Wce=()=>{const e=localStorage.getItem("selectedHeaderSize");return e?parseInt(e,10):130},Si=Vae({state:{doctorId:1,clinicId:1,appInitialized:!1,appInitializing:!0,selectedTranslationLanguage:Kce(),selectedHeaderSize:Wce()},getters:{isAppInitialized:e=>e.appInitialized,isAppInitializing:e=>e.appInitializing,getCurrentDoctorId:e=>e.doctorId,getCurrentClinicId:e=>e.clinicId,getSelectedTranslationLanguage:e=>e.selectedTranslationLanguage,getSelectedHeaderSize:e=>e.selectedHeaderSize},mutations:{setDoctorId(e,t){e.doctorId=t},setClinicId(e,t){e.clinicId=t},setAppInitialized(e,t){e.appInitialized=t},setAppInitializing(e,t){e.appInitializing=t},setSelectedTranslationLanguage(e,t){e.selectedTranslationLanguage=t,t&&t!=="none"?localStorage.setItem("selectedTranslationLanguage",t):localStorage.removeItem("selectedTranslationLanguage")},setSelectedHeaderSize(e,t){const n=Math.max(50,Math.min(200,parseInt(t,10)||130));e.selectedHeaderSize=n,localStorage.setItem("selectedHeaderSize",n.toString())}},actions:{updateDoctorId({commit:e},t){e("setDoctorId",t)},updateClinicId({commit:e},t){e("setClinicId",t)},updateSelectedTranslationLanguage({commit:e},t){e("setSelectedTranslationLanguage",t)},updateSelectedHeaderSize({commit:e},t){e("setSelectedHeaderSize",t)}},modules:{auth:lce,doctorModule:Ace,clinicModule:vce,appBar:_ce,snackbar:Sce,researchModule:kce,procedureResearchModule:Tce,reminderModule:Uce,resourceBookingModule:zce}});let tE=null;const At=Ir.create({baseURL:"",headers:{"Content-Type":"application/json"},timeout:3e5,withCredentials:!1}),Ov=e=>{console.log("[api/client] Base URL updated to:",e),tE=e,At.defaults.baseURL=e},mM=async()=>{console.log("[api/client] Initializing API client..."),console.log("[api/client] Environment:",Ra()?"Electron":"Web"),console.log("[api/client] Current URL:",window.location.href);try{const e=Ik();Ov(e),console.log("[api/client] API client initialized with base URL:",e)}catch(e){throw console.error("[api/client] Failed to initialize API client:",e.message),e}},jce=e=>{const t=kr("localhost");return e.replace(t.api.https,t.api.http)},O3=e=>!e||!Ra()?!1:e.includes("localhost")||e.includes("127.0.0.1")||e.includes("192.168.");At.interceptors.request.use(async e=>{if(Ra())try{const t=$s.currentUser;if(t){const n=await t.getIdToken();e.headers.Authorization=`Bearer ${n}`}}catch(t){console.warn("Failed to get Firebase auth token:",t)}return e},e=>Promise.reject(e));At.interceptors.response.use(e=>{if(e.data){const{success:t,message:n}=e.data,a=e.config.headers["X-Skip-Messages"]==="true";if(t&&n&&e.config.method!=="get"&&!a&&Si.dispatch("snackbar/showSuccess",n),!t&&(n||e.data.error)&&!a){const r=e.data.error||n;Si.dispatch("snackbar/showError",r)}}return e},async e=>{if(e.config&&!e.config.__isRetry&&Ra()){const a=e.config.baseURL||tE,r=!e.response,s=e.code==="CERT_AUTHORITY_INVALID"||e.code==="CERT_COMMON_NAME_INVALID"||e.code==="CERT_UNTRUSTED"||e.code==="ERR_CERT_AUTHORITY_INVALID"||e.code==="ERR_CERT_COMMON_NAME_INVALID"||e.code==="ERR_INSECURE_RESPONSE"||e.message?.includes("certificate")||e.message?.includes("SSL")||e.message?.includes("HTTPS")||e.message?.includes("self signed")||e.message?.includes("CERT_")||e.message?.includes("ERR_"),o=e.code==="ECONNREFUSED"||e.code==="ECONNRESET"||e.code==="ENOTFOUND"||e.code==="ETIMEDOUT";if(O3(a)&&a.startsWith("https://")&&(r||s||o||e.response?.status>=400)){console.log(" HTTPS failed for localhost (Electron mode), trying HTTP fallback..."),console.log("Error details:",{code:e.code,message:e.message,isNetworkError:r,isCertError:s,isConnectionError:o,originalUrl:a});try{const c=jce(a);console.log(`Attempting HTTP fallback: ${c}`),Ov(c),e.config.__isRetry=!0,e.config.baseURL=c;const A=await At.request(e.config);return console.log(" HTTP fallback successful"),A}catch(c){console.error(" HTTP fallback also failed:",c)}}}let t="An error occurred";return e.response?(console.error("Response error:",e.response.data),e.response.data?.error?t=e.response.data.error:e.response.data?.message?t=e.response.data.message:e.response.status===401?t="Authentication required":e.response.status===403?t="Access forbidden":e.response.status===404?t="Resource not found":e.response.status>=500&&(t="Server error occurred")):e.request?(console.error("Request error:",e.request),Ra()&&O3(tE)?t="Cannot connect to local server - please ensure the server is running":t="Network error - please check your connection"):(console.error("Error:",e.message),t=e.message||"Request failed"),e.config?.headers?.["X-Skip-Messages"]==="true"||Si.dispatch("snackbar/showError",t),Promise.reject(e)});const vM=e=>({...e,headers:{...e.headers,"X-Skip-Messages":"true"}}),hM=Object.freeze(Object.defineProperty({__proto__:null,createSilentRequest:vM,default:At,initializeAPIClient:mM,updateBaseURL:Ov},Symbol.toStringTag,{value:"Module"})),qr=V(localStorage.getItem("sessionToken")||null),Hd=V(JSON.parse(localStorage.getItem("permissions")||"[]")),$d=V(localStorage.getItem("isAdmin")==="true"),Qd=V(localStorage.getItem("userName")||null),Gd=V(localStorage.getItem("userId")?parseInt(localStorage.getItem("userId")):null),zd=V(JSON.parse(localStorage.getItem("features")||"[]")),qce=ne(()=>!!qr.value),hv=V(!1),G_=V(null);je([qr,Hd,$d,Qd,Gd,zd],()=>{if(qr.value){localStorage.setItem("sessionToken",qr.value),localStorage.setItem("permissions",JSON.stringify(Hd.value)),localStorage.setItem("isAdmin",$d.value.toString()),localStorage.setItem("userName",Qd.value||"");const e=Gd.value;localStorage.setItem("userId",e!=null?String(e):""),localStorage.setItem("features",JSON.stringify(zd.value))}else localStorage.removeItem("sessionToken"),localStorage.removeItem("permissions"),localStorage.removeItem("isAdmin"),localStorage.removeItem("userName"),localStorage.removeItem("userId"),localStorage.removeItem("features")},{deep:!0});let Yx=!1,nE=[];const Xx=(e,t=null)=>{nE.forEach(n=>{e?n.reject(e):n.resolve(t)}),nE=[]};function pM(e=At){e.interceptors.request.use(t=>{const n=t.url?.includes("/web/auth/login")||t.url?.includes("/web/auth/refresh");return qr.value&&!n&&(t.headers["x-session-token"]=qr.value),t},t=>Promise.reject(t)),e.interceptors.response.use(t=>t,async t=>{const n=t.config;if(t.response?.status===419)return console.warn("[useWebSession] Session invalidated - permissions may have been updated"),yc(),window.location.reload(),Promise.reject(t);if(t.response?.status===401&&qr.value){if(n.url?.includes("/web/auth/"))return console.log("[useWebSession] 401 on auth endpoint, clearing session"),yc(),Promise.reject(t);if(Yx)return new Promise((a,r)=>{nE.push({resolve:a,reject:r})}).then(a=>(n.headers["x-session-token"]=a,At(n))).catch(a=>Promise.reject(a));Yx=!0;try{return console.log("[useWebSession] Session expired (401), attempting automatic refresh..."),await gM()&&qr.value?(console.log("[useWebSession] Session refreshed successfully, retrying original request"),n.headers["x-session-token"]=qr.value,Xx(null,qr.value),At(n)):(console.warn("[useWebSession] Session refresh failed, clearing session"),yc(),Xx(t,null),Promise.reject(t))}catch(a){return console.error("[useWebSession] Session refresh error:",a),yc(),Xx(a,null),Promise.reject(a)}finally{Yx=!1}}return Promise.reject(t)})}async function Yce(e,t=null){hv.value=!0,G_.value=null;try{const n=await At.post("/web/auth/login",{passcode:e,userId:t});if(n.data.success){qr.value=n.data.sessionToken,Hd.value=n.data.permissions||[],$d.value=n.data.isAdmin||!1,Qd.value=n.data.userName||null;const a=n.data.userId;return Gd.value=a!=null?typeof a=="number"?a:parseInt(a,10):null,zd.value=n.data.features||[],{success:!0,isAdmin:n.data.isAdmin,userName:n.data.userName}}else throw new Error(n.data.error||"Login failed")}catch(n){throw G_.value=n.response?.data?.error||n.message||"Login failed",n}finally{hv.value=!1}}async function Xce(){try{qr.value&&await At.post("/web/auth/logout",{},{headers:{"x-session-token":qr.value}})}catch(e){console.error("Logout error:",e)}finally{yc()}}async function Jce(){if(!qr.value)return{valid:!1};hv.value=!0;try{const e=At.defaults.baseURL;if(!e)return console.error("[useWebSession] API client base URL not set! Cannot verify session."),hv.value=!1,{valid:!1,error:"API client not initialized"};console.log("[useWebSession] Verifying session with base URL:",e),console.log("[useWebSession] Full URL will be:",`${e}/web/auth/verify`),console.log("[useWebSession] Session token exists:",!!qr.value);const t=await At.get("/web/auth/verify");if(t.data.valid){Hd.value=t.data.permissions||[],$d.value=t.data.isAdmin||!1,Qd.value=t.data.userName||null;const n=t.data.userId;return Gd.value=n!=null?typeof n=="number"?n:parseInt(n,10):null,zd.value=t.data.features||[],{valid:!0,...t.data}}else return yc(),{valid:!1}}catch(e){return console.error("[useWebSession] Session verification failed:",e),(e.code==="ERR_NETWORK"||e.message?.includes("CORS")||e.message?.includes("Network Error")||!e.response)&&(console.error("[useWebSession] CORS or network error detected. Base URL:",At.defaults.baseURL),console.error("[useWebSession] This usually means the endpoint URL is incorrect or the server is not configured for CORS.")),e.response?.status===401&&yc(),{valid:!1,error:e.message}}finally{hv.value=!1}}async function gM(){if(!qr.value)return console.warn("[useWebSession] Cannot refresh session - no session token"),!1;try{console.log("[useWebSession] Refreshing session...");const e=await At.post("/web/auth/refresh",{},{headers:{"x-session-token":qr.value}});if(e.data.success){if(e.data.sessionToken&&(qr.value=e.data.sessionToken,console.log("[useWebSession] Session token updated after refresh")),e.data.permissions&&(Hd.value=e.data.permissions),e.data.isAdmin!==void 0&&($d.value=e.data.isAdmin),e.data.userName&&(Qd.value=e.data.userName),e.data.userId!==void 0){const t=e.data.userId;Gd.value=t!=null?typeof t=="number"?t:parseInt(t,10):null}return e.data.features&&(zd.value=e.data.features),console.log("[useWebSession] Session refreshed successfully"),!0}return!1}catch(e){return console.error("[useWebSession] Session refresh error:",e),e.response?.status===401&&(console.warn("[useWebSession] Refresh endpoint returned 401 - session truly expired"),yc()),!1}}function yc(){qr.value=null,Hd.value=[],$d.value=!1,Qd.value=null,Gd.value=null,zd.value=[],G_.value=null}function Zce(e){qr.value=e.sessionToken,Hd.value=e.permissions||[],$d.value=e.isAdmin||!1,Qd.value=e.userName||null;const t=e.userId;Gd.value=t!=null?typeof t=="number"?t:parseInt(t,10):null,zd.value=e.features||[]}function zf(){return{sessionToken:ne(()=>qr.value),permissions:ne(()=>Hd.value),isAdmin:ne(()=>$d.value),userName:ne(()=>Qd.value),userId:ne(()=>Gd.value),features:ne(()=>zd.value),isAuthenticated:qce,sessionLoading:ne(()=>hv.value),sessionError:ne(()=>G_.value),login:Yce,logout:Xce,verifySession:Jce,refreshSession:gM,clearSession:yc,setSession:Zce,setupSessionInterceptors:pM}}const ede="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M10%204A4%204%200%200%200%206%208A4%204%200%200%200%2010%2012A4%204%200%200%200%2014%208A4%204%200%200%200%2010%204M17.5%2013C15%2013%2013%2015%2013%2017.5C13%2020%2015%2022%2017.5%2022C20%2022%2022%2020%2022%2017.5C22%2015%2020%2013%2017.5%2013M10%2014C5.58%2014%202%2015.79%202%2018V20H11.5A6.5%206.5%200%200%201%2011%2017.5A6.5%206.5%200%200%201%2011.95%2014.14C11.32%2014.06%2010.68%2014%2010%2014M17.5%2014.5C19.16%2014.5%2020.5%2015.84%2020.5%2017.5C20.5%2018.06%2020.35%2018.58%2020.08%2019L16%2014.92C16.42%2014.65%2016.94%2014.5%2017.5%2014.5M14.92%2016L19%2020.08C18.58%2020.35%2018.06%2020.5%2017.5%2020.5C15.84%2020.5%2014.5%2019.16%2014.5%2017.5C14.5%2016.94%2014.65%2016.42%2014.92%2016Z'%20/%3e%3c/svg%3e",tde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M21.1,12.5L22.5,13.91L15.97,20.5L12.5,17L13.9,15.59L15.97,17.67L21.1,12.5M10,17L13,20H3V18C3,15.79%206.58,14%2011,14L12.89,14.11L10,17M11,4A4,4%200%200,1%2015,8A4,4%200%200,1%2011,12A4,4%200%200,1%207,8A4,4%200%200,1%2011,4Z'%20/%3e%3c/svg%3e",nde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M10.63,14.1C12.23,10.58%2016.38,9.03%2019.9,10.63C23.42,12.23%2024.97,16.38%2023.37,19.9C22.24,22.4%2019.75,24%2017,24C14.3,24%2011.83,22.44%2010.67,20H1V18C1.06,16.86%201.84,15.93%203.34,15.18C4.84,14.43%206.72,14.04%209,14C9.57,14%2010.11,14.05%2010.63,14.1V14.1M9,4C10.12,4.03%2011.06,4.42%2011.81,5.17C12.56,5.92%2012.93,6.86%2012.93,8C12.93,9.14%2012.56,10.08%2011.81,10.83C11.06,11.58%2010.12,11.95%209,11.95C7.88,11.95%206.94,11.58%206.19,10.83C5.44,10.08%205.07,9.14%205.07,8C5.07,6.86%205.44,5.92%206.19,5.17C6.94,4.42%207.88,4.03%209,4M17,22A5,5%200%200,0%2022,17A5,5%200%200,0%2017,12A5,5%200%200,0%2012,17A5,5%200%200,0%2017,22M16,14H17.5V16.82L19.94,18.23L19.19,19.53L16,17.69V14Z'%20/%3e%3c/svg%3e",ade="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M10%204A4%204%200%200%200%206%208A4%204%200%200%200%2010%2012A4%204%200%200%200%2014%208A4%204%200%200%200%2010%204M17%2012C16.87%2012%2016.76%2012.09%2016.74%2012.21L16.55%2013.53C16.25%2013.66%2015.96%2013.82%2015.7%2014L14.46%2013.5C14.35%2013.5%2014.22%2013.5%2014.15%2013.63L13.15%2015.36C13.09%2015.47%2013.11%2015.6%2013.21%2015.68L14.27%2016.5C14.25%2016.67%2014.24%2016.83%2014.24%2017C14.24%2017.17%2014.25%2017.33%2014.27%2017.5L13.21%2018.32C13.12%2018.4%2013.09%2018.53%2013.15%2018.64L14.15%2020.37C14.21%2020.5%2014.34%2020.5%2014.46%2020.5L15.7%2020C15.96%2020.18%2016.24%2020.35%2016.55%2020.47L16.74%2021.79C16.76%2021.91%2016.86%2022%2017%2022H19C19.11%2022%2019.22%2021.91%2019.24%2021.79L19.43%2020.47C19.73%2020.34%2020%2020.18%2020.27%2020L21.5%2020.5C21.63%2020.5%2021.76%2020.5%2021.83%2020.37L22.83%2018.64C22.89%2018.53%2022.86%2018.4%2022.77%2018.32L21.7%2017.5C21.72%2017.33%2021.74%2017.17%2021.74%2017C21.74%2016.83%2021.73%2016.67%2021.7%2016.5L22.76%2015.68C22.85%2015.6%2022.88%2015.47%2022.82%2015.36L21.82%2013.63C21.76%2013.5%2021.63%2013.5%2021.5%2013.5L20.27%2014C20%2013.82%2019.73%2013.65%2019.42%2013.53L19.23%2012.21C19.22%2012.09%2019.11%2012%2019%2012H17M10%2014C5.58%2014%202%2015.79%202%2018V20H11.68A7%207%200%200%201%2011%2017A7%207%200%200%201%2011.64%2014.09C11.11%2014.03%2010.56%2014%2010%2014M18%2015.5C18.83%2015.5%2019.5%2016.17%2019.5%2017C19.5%2017.83%2018.83%2018.5%2018%2018.5C17.16%2018.5%2016.5%2017.83%2016.5%2017C16.5%2016.17%2017.17%2015.5%2018%2015.5Z'%20/%3e%3c/svg%3e",rde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M16%2017V19H2V17S2%2013%209%2013%2016%2017%2016%2017M12.5%207.5A3.5%203.5%200%201%200%209%2011A3.5%203.5%200%200%200%2012.5%207.5M15.94%2013A5.32%205.32%200%200%201%2018%2017V19H22V17S22%2013.37%2015.94%2013M15%204A3.39%203.39%200%200%200%2013.07%204.59A5%205%200%200%201%2013.07%2010.41A3.39%203.39%200%200%200%2015%2011A3.5%203.5%200%200%200%2015%204Z'%20/%3e%3c/svg%3e",sde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M12,4A4,4%200%200,1%2016,8A4,4%200%200,1%2012,12A4,4%200%200,1%208,8A4,4%200%200,1%2012,4M12,14C16.42,14%2020,15.79%2020,18V20H4V18C4,15.79%207.58,14%2012,14Z'%20/%3e%3c/svg%3e",ode="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M23%207V13H21V7M21%2015H23V17H21M12%202A2%202%200%200%200%2010%204A2%202%200%200%200%2010%204.29C7.12%205.14%205%207.82%205%2011V17L3%2019V20H21V19L19%2017V11C19%207.82%2016.88%205.14%2014%204.29A2%202%200%200%200%2014%204A2%202%200%200%200%2012%202M10%2021A2%202%200%200%200%2012%2023A2%202%200%200%200%2014%2021Z'%20/%3e%3c/svg%3e",ide="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17.75%2021.16L15%2018.16L16.16%2017L17.75%2018.59L21.34%2015L22.5%2016.41L17.75%2021.16M3%2020V19L5%2017V11C5%207.9%207.03%205.18%2010%204.29V4C10%202.9%2010.9%202%2012%202C13.11%202%2014%202.9%2014%204V4.29C16.97%205.18%2019%207.9%2019%2011V12.08L18%2012C14.69%2012%2012%2014.69%2012%2018C12%2018.7%2012.12%2019.37%2012.34%2020H3M12%2023C10.9%2023%2010%2022.11%2010%2021H12.8C13.04%2021.41%2013.33%2021.79%2013.65%2022.13C13.29%2022.66%2012.69%2023%2012%2023Z'%20/%3e%3c/svg%3e",lde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19%202L14%206.5V17.5L19%2013V2M6.5%205C4.55%205%202.45%205.4%201%206.5V21.16C1%2021.41%201.25%2021.66%201.5%2021.66C1.6%2021.66%201.65%2021.59%201.75%2021.59C3.1%2020.94%205.05%2020.5%206.5%2020.5C8.45%2020.5%2010.55%2020.9%2012%2022C13.35%2021.15%2015.8%2020.5%2017.5%2020.5C19.15%2020.5%2020.85%2020.81%2022.25%2021.56C22.35%2021.61%2022.4%2021.59%2022.5%2021.59C22.75%2021.59%2023%2021.34%2023%2021.09V6.5C22.4%206.05%2021.75%205.75%2021%205.5V19C19.9%2018.65%2018.7%2018.5%2017.5%2018.5C15.8%2018.5%2013.35%2019.15%2012%2020V6.5C10.55%205.4%208.45%205%206.5%205Z'%20/%3e%3c/svg%3e",ude="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M7,2H17A2,2%200%200,1%2019,4V20A2,2%200%200,1%2017,22H7A2,2%200%200,1%205,20V4A2,2%200%200,1%207,2M7,4V8H17V4H7M7,10V12H9V10H7M11,10V12H13V10H11M15,10V12H17V10H15M7,14V16H9V14H7M11,14V16H13V14H11M15,14V16H17V14H15M7,18V20H9V18H7M11,18V20H13V18H11M15,18V20H17V18H15Z'%20/%3e%3c/svg%3e",cde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17,19H7V5H17M17,1H7C5.89,1%205,1.89%205,3V21A2,2%200%200,0%207,23H17A2,2%200%200,0%2019,21V3C19,1.89%2018.1,1%2017,1Z'%20/%3e%3c/svg%3e",dde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='currentColor'%20d='M16,11.78L20.24,4.45L21.97,5.45L16.74,14.5L10.23,10.75L5.46,19H22V21H2V3H4V17.54L9.5,8L16,11.78Z'%20/%3e%3c/svg%3e",Ade="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M22,12A10,10%200%200,1%2012,22A10,10%200%200,1%202,12A10,10%200%200,1%2012,2A10,10%200%200,1%2022,12M15.4,16.6L10.8,12L15.4,7.4L14,6L8,12L14,18L15.4,16.6Z'%20/%3e%3c/svg%3e",fde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M22,12A10,10%200%200,1%2012,22A10,10%200%200,1%202,12A10,10%200%200,1%2012,2A10,10%200%200,1%2022,12M10,18L16,12L10,6L8.6,7.4L13.2,12L8.6,16.6L10,18Z'%20/%3e%3c/svg%3e",mde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,3H14.82C14.4,1.84%2013.3,1%2012,1C10.7,1%209.6,1.84%209.18,3H5A2,2%200%200,0%203,5V19A2,2%200%200,0%205,21H19A2,2%200%200,0%2021,19V5A2,2%200%200,0%2019,3M12,3A1,1%200%200,1%2013,4A1,1%200%200,1%2012,5A1,1%200%200,1%2011,4A1,1%200%200,1%2012,3M5,13.46H7.17L10.5,7.08L11.44,14.05L13.93,10.86L16.53,13.46H19V15H15.89L14.07,13.21L10.38,17.92L9.62,12.15L8.11,15H5V13.46Z'%20/%3e%3c/svg%3e",vde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17,9H7V7H17M17,13H7V11H17M14,17H7V15H14M12,3A1,1%200%200,1%2013,4A1,1%200%200,1%2012,5A1,1%200%200,1%2011,4A1,1%200%200,1%2012,3M19,3H14.82C14.4,1.84%2013.3,1%2012,1C10.7,1%209.6,1.84%209.18,3H5A2,2%200%200,0%203,5V19A2,2%200%200,0%205,21H19A2,2%200%200,0%2021,19V5A2,2%200%200,0%2019,3Z'%20/%3e%3c/svg%3e",hde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M20%206.91L17.09%204L12%209.09L6.91%204L4%206.91L9.09%2012L4%2017.09L6.91%2020L12%2014.91L17.09%2020L20%2017.09L14.91%2012L20%206.91Z'%20/%3e%3c/svg%3e",pde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z'%20/%3e%3c/svg%3e",gde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M13%2019C13%2019.34%2013.04%2019.67%2013.09%2020H6.5C5%2020%203.69%2019.5%202.61%2018.43C1.54%2017.38%201%2016.09%201%2014.58C1%2013.28%201.39%2012.12%202.17%2011.1S4%209.43%205.25%209.15C5.67%207.62%206.5%206.38%207.75%205.43S10.42%204%2012%204C13.95%204%2015.6%204.68%2016.96%206.04C18.32%207.4%2019%209.05%2019%2011C20.15%2011.13%2021.1%2011.63%2021.86%2012.5C22.37%2013.07%2022.7%2013.71%2022.86%2014.42C21.82%2013.54%2020.5%2013%2019%2013C15.69%2013%2013%2015.69%2013%2019M20%2016H18V20H16L19%2023L22%2020H20V16Z'%20/%3e%3c/svg%3e",yde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,21H8V7H19M19,5H8A2,2%200%200,0%206,7V21A2,2%200%200,0%208,23H19A2,2%200%200,0%2021,21V7A2,2%200%200,0%2019,5M16,1H4A2,2%200%200,0%202,3V17H4V3H16V1Z'%20/%3e%3c/svg%3e",_de="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2%200%200,0%208,21H16A2,2%200%200,0%2018,19V7H6V19Z'%20/%3e%3c/svg%3e",wde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M20%204H4c-1.1%200-1.99.9-1.99%202L2%2018c0%201.1.9%202%202%202h16c1.1%200%202-.9%202-2V6c0-1.1-.9-2-2-2zm0%204l-8%205-8-5V6l8%205%208-5v2z'%20fill='currentColor'/%3e%3c/svg%3e",bde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19%2013C19.34%2013%2019.67%2013.04%2020%2013.09V8L14%202H6C4.89%202%204%202.89%204%204V20C4%2021.11%204.89%2022%206%2022H13.81C13.3%2021.12%2013%2020.1%2013%2019C13%2015.69%2015.69%2013%2019%2013M13%203.5L18.5%209H13V3.5M23.5%2020L21%2023L18.5%2020H20V16H22V20H23.5M19.5%2018H18V22H16V18H14.5L17%2015L19.5%2018Z'%20/%3e%3c/svg%3e",xde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M14,8H10V6H14V8M20,4V20C20,21.11%2019.11,22%2018,22H6C4.89,22%204,21.11%204,20V4A2,2%200%200,1%206,2H18C19.11,2%2020,2.9%2020,4M18,13H6V20H18V13M18,4H6V11H18V4M14,15H10V17H14V15Z'%20/%3e%3c/svg%3e",Cde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M8,12H16V14H8V12M10,20H6V4H13V9H18V12.1L20,10.1V8L14,2H6A2,2%200%200,0%204,4V20A2,2%200%200,0%206,22H10V20M8,18H12.1L13,17.1V16H8V18M20.2,13C20.3,13%2020.5,13.1%2020.6,13.2L21.9,14.5C22.1,14.7%2022.1,15.1%2021.9,15.3L20.9,16.3L18.8,14.2L19.8,13.2C19.9,13.1%2020,13%2020.2,13M20.2,16.9L14.1,23H12V20.9L18.1,14.8L20.2,16.9Z'%20/%3e%3c/svg%3e",Sde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M14%202H6C4.89%202%204%202.89%204%204V20C4%2021.11%204.89%2022%206%2022H13.81C13.28%2021.09%2013%2020.05%2013%2019C13%2018.67%2013.03%2018.33%2013.08%2018H6V16H13.81C14.27%2015.2%2014.91%2014.5%2015.68%2014H6V12H18V13.08C18.33%2013.03%2018.67%2013%2019%2013S19.67%2013.03%2020%2013.08V8L14%202M13%209V3.5L18.5%209H13M18%2015V18H15V20H18V23H20V20H23V18H20V15H18Z'%20/%3e%3c/svg%3e",Ede="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M14,2H6A2,2%200%200,0%204,4V20A2,2%200%200,0%206,22H18A2,2%200%200,0%2020,20V8L14,2M13.5,16V19H10.5V16H8L12,12L16,16H13.5M13,9V3.5L18.5,9H13Z'%20/%3e%3c/svg%3e",Bde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M6.1,10L4,18V8H21A2,2%200%200,0%2019,6H12L10,4H4A2,2%200%200,0%202,6V18A2,2%200%200,0%204,20H19C19.9,20%2020.7,19.4%2020.9,18.5L23.2,10H6.1M19,18H6L7.6,12H20.6L19,18Z'%20/%3e%3c/svg%3e",kde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M14,14H19V16H16V19H14V14M5,14H10V19H8V16H5V14M8,5H10V10H5V8H8V5M19,8V10H14V5H16V8H19Z'%20/%3e%3c/svg%3e",Tde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17V19H5V14H7V17H10Z'%20/%3e%3c/svg%3e",Ide="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z'%20/%3e%3c/svg%3e",Fde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M5%206C3.9%206%203%206.9%203%208S3.9%2010%205%2010%207%209.11%207%208%206.11%206%205%206M12%204C10.9%204%2010%204.89%2010%206S10.9%208%2012%208%2014%207.11%2014%206%2013.11%204%2012%204M19%202C17.9%202%2017%202.9%2017%204S17.9%206%2019%206%2021%205.11%2021%204%2020.11%202%2019%202M3.5%2011C2.67%2011%202%2011.67%202%2012.5V17H3V22H7V17H8V12.5C8%2011.67%207.33%2011%206.5%2011H3.5M10.5%209C9.67%209%209%209.67%209%2010.5V15H10V20H14V15H15V10.5C15%209.67%2014.33%209%2013.5%209H10.5M17.5%207C16.67%207%2016%207.67%2016%208.5V13H17V18H21V13H22V8.5C22%207.67%2021.33%207%2020.5%207H17.5Z'%20/%3e%3c/svg%3e",Pde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M21,17H7V3H21M21,1H7A2,2%200%200,0%205,3V17A2,2%200%200,0%207,19H21A2,2%200%200,0%2023,17V3A2,2%200%200,0%2021,1M3,5H1V21A2,2%200%200,0%203,23H19V21H3M15.96,10.29L13.21,13.83L11.25,11.47L8.5,15H19.5L15.96,10.29Z'%20/%3e%3c/svg%3e",Dde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M4,6H20V16H4M20,18A2,2%200%200,0%2022,16V6C22,4.89%2021.1,4%2020,4H4C2.89,4%202,4.89%202,6V16A2,2%200%200,0%204,18H0V20H24V18H20Z'%20/%3e%3c/svg%3e",Ude="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19%203H5C3.9%203%203%203.9%203%205V19C3%2020.1%203.9%2021%205%2021H19C20.1%2021%2021%2020.1%2021%2019V5C21%203.9%2020.1%203%2019%203M7%207H9V9H7V7M7%2011H9V13H7V11M7%2015H9V17H7V15M17%2017H11V15H17V17M17%2013H11V11H17V13M17%209H11V7H17V9Z'%20/%3e%3c/svg%3e",Rde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17%207L15.59%208.41L18.17%2011H8V13H18.17L15.59%2015.58L17%2017L22%2012M4%205H12V3H4C2.9%203%202%203.9%202%205V19C2%2020.1%202.9%2021%204%2021H12V19H4V5Z'%20/%3e%3c/svg%3e",Nde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M9,2A7,7%200%200,1%2016,9C16,10.57%2015.5,12%2014.61,13.19L15.41,14H16L22,20L20,22L14,16V15.41L13.19,14.61C12,15.5%2010.57,16%209,16A7,7%200%200,1%202,9A7,7%200%200,1%209,2M5,8V10H13V8H5Z'%20/%3e%3c/svg%3e",Vde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M9,2A7,7%200%200,1%2016,9C16,10.57%2015.5,12%2014.61,13.19L15.41,14H16L22,20L20,22L14,16V15.41L13.19,14.61C12,15.5%2010.57,16%209,16A7,7%200%200,1%202,9A7,7%200%200,1%209,2M8,5V8H5V10H8V13H10V10H13V8H10V5H8Z'%20/%3e%3c/svg%3e",Lde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M9.5,3A6.5,6.5%200%200,1%2016,9.5C16,11.11%2015.41,12.59%2014.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41%2011.11,16%209.5,16A6.5,6.5%200%200,1%203,9.5A6.5,6.5%200%200,1%209.5,3M9.5,5C7,5%205,7%205,9.5C5,12%207,14%209.5,14C12,14%2014,12%2014,9.5C14,7%2012,5%209.5,5Z'%20/%3e%3c/svg%3e",Mde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z'%20/%3e%3c/svg%3e",Ode="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,11C19,12.19%2018.66,13.3%2018.1,14.28L16.87,13.05C17.14,12.43%2017.3,11.74%2017.3,11H19M15,11.16L9,5.18V5A3,3%200%200,1%2012,2A3,3%200%200,1%2015,5V11L15,11.16M4.27,3L21,19.73L19.73,21L15.54,16.81C14.77,17.27%2013.91,17.58%2013,17.72V21H11V17.72C7.72,17.23%205,14.41%205,11H6.7C6.7,14%209.24,16.1%2012,16.1C12.81,16.1%2013.6,15.91%2014.31,15.58L12.65,13.92L12,14A3,3%200%200,1%209,11V10.28L3,4.27L4.27,3Z'%20/%3e%3c/svg%3e",Hde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M12,2A3,3%200%200,1%2015,5V11A3,3%200%200,1%2012,14A3,3%200%200,1%209,11V5A3,3%200%200,1%2012,2M19,11C19,14.53%2016.39,17.44%2013,17.93V21H11V17.93C7.61,17.44%205,14.53%205,11H7A5,5%200%200,0%2012,16A5,5%200%200,0%2017,11H19Z'%20/%3e%3c/svg%3e",$de="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M11.15,15.18L9.73,13.77L11.15,12.35L12.56,13.77L13.97,12.35L12.56,10.94L13.97,9.53L15.39,10.94L16.8,9.53L13.97,6.7L6.9,13.77L9.73,16.6L11.15,15.18M3.08,19L6.2,15.89L4.08,13.77L13.97,3.87L16.1,6L17.5,4.58L16.1,3.16L17.5,1.75L21.75,6L20.34,7.4L18.92,6L17.5,7.4L19.63,9.53L9.73,19.42L7.61,17.3L3.08,21.84V19Z'%20/%3e%3c/svg%3e",Qde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M20.71,7.04C21.1,6.65%2021.1,6%2020.71,5.63L18.37,3.29C18,2.9%2017.35,2.9%2016.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z'%20/%3e%3c/svg%3e",Gde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z'%20/%3e%3c/svg%3e",zde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M4,4V10L4,14H6V10H8L13.41,15.41L9.83,19L11.24,20.41L14.83,16.83L18.41,20.41L19.82,19L16.24,15.41L19.82,11.83L18.41,10.41L14.83,14L10.83,10H11A3,3%200%200,0%2014,7A3,3%200%200,0%2011,4H4M6,6H11A1,1%200%200,1%2012,7A1,1%200%200,1%2011,8H6V6Z'%20/%3e%3c/svg%3e",Kde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M18,3H6V7H18M19,12A1,1%200%200,1%2018,11A1,1%200%200,1%2019,10A1,1%200%200,1%2020,11A1,1%200%200,1%2019,12M16,19H8V14H16M19,8H5A3,3%200%200,0%202,11V17H6V21H18V17H22V11A3,3%200%200,0%2019,8Z'%20/%3e%3c/svg%3e",Wde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17.65,6.35C16.2,4.9%2014.21,4%2012,4A8,8%200%200,0%204,12A8,8%200%200,0%2012,20C15.73,20%2018.84,17.45%2019.73,14H17.65C16.83,16.33%2014.61,18%2012,18A6,6%200%200,1%206,12A6,6%200%200,1%2012,6C13.66,6%2015.14,6.69%2016.22,7.78L13,11H20V4L17.65,6.35Z'%20/%3e%3c/svg%3e",jde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M4,1H20A1,1%200%200,1%2021,2V6A1,1%200%200,1%2020,7H4A1,1%200%200,1%203,6V2A1,1%200%200,1%204,1M4,9H20A1,1%200%200,1%2021,10V14A1,1%200%200,1%2020,15H4A1,1%200%200,1%203,14V10A1,1%200%200,1%204,9M4,17H20A1,1%200%200,1%2021,18V22A1,1%200%200,1%2020,23H4A1,1%200%200,1%203,22V18A1,1%200%200,1%204,17M9,5H10V3H9V5M9,13H10V11H9V13M9,21H10V19H9V21M5,3V5H7V3H5M5,11V13H7V11H5M5,19V21H7V19H5Z'%20/%3e%3c/svg%3e",qde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M18,16.08C17.24,16.08%2016.56,16.38%2016.04,16.85L8.91,12.7C8.96,12.47%209,12.24%209,12C9,11.76%208.96,11.53%208.91,11.3L15.96,7.19C16.5,7.69%2017.21,8%2018,8A3,3%200%200,0%2021,5A3,3%200%200,0%2018,2A3,3%200%200,0%2015,5C15,5.24%2015.04,5.47%2015.09,5.7L8.04,9.81C7.5,9.31%206.79,9%206,9A3,3%200%200,0%203,12A3,3%200%200,0%206,15C6.79,15%207.5,14.69%208.04,14.19L15.16,18.34C15.11,18.55%2015.08,18.77%2015.08,19C15.08,20.61%2016.39,21.91%2018,21.91C19.61,21.91%2020.92,20.61%2020.92,19A2.92,2.92%200%200,0%2018,16.08Z'%20/%3e%3c/svg%3e",Yde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z'%20/%3e%3c/svg%3e",Xde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17,10.5V7A1,1%200%200,0%2016,6H4A1,1%200%200,0%203,7V17A1,1%200%200,0%204,18H16A1,1%200%200,0%2017,17V13.5L21,17.5V6.5L17,10.5M14,13H11V16H9V13H6V11H9V8H11V11H14V13Z'%20/%3e%3c/svg%3e",Jde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M6,19A5,5%200%200,1%201,14A5,5%200%200,1%206,9C7,6.65%209.3,5%2012,5C15.43,5%2018.24,7.66%2018.5,11.03L19,11A4,4%200%200,1%2023,15A4,4%200%200,1%2019,19H6M19,13H17V12A5,5%200%200,0%2012,7C9.5,7%207.45,8.82%207.06,11.19C6.73,11.07%206.37,11%206,11A3,3%200%200,0%203,14A3,3%200%200,0%206,17H19A2,2%200%200,0%2021,15A2,2%200%200,0%2019,13Z'%20/%3e%3c/svg%3e",Zde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M16.36,14C16.44,13.34%2016.5,12.68%2016.5,12C16.5,11.32%2016.44,10.66%2016.36,10H19.74C19.9,10.64%2020,11.31%2020,12C20,12.69%2019.9,13.36%2019.74,14M14.59,19.56C15.19,18.45%2015.65,17.25%2015.97,16H18.92C17.96,17.65%2016.43,18.93%2014.59,19.56M14.34,14H9.66C9.56,13.34%209.5,12.68%209.5,12C9.5,11.32%209.56,10.65%209.66,10H14.34C14.43,10.65%2014.5,11.32%2014.5,12C14.5,12.68%2014.43,13.34%2014.34,14M12,19.96C11.17,18.76%2010.5,17.43%2010.09,16H13.91C13.5,17.43%2012.83,18.76%2012,19.96M8,8H5.08C6.03,6.34%207.57,5.06%209.4,4.44C8.8,5.55%208.35,6.75%208,8M5.08,16H8C8.35,17.25%208.8,18.45%209.4,19.56C7.57,18.93%206.03,17.65%205.08,16M4.26,14C4.1,13.36%204,12.69%204,12C4,11.31%204.1,10.64%204.26,10H7.64C7.56,10.66%207.5,11.32%207.5,12C7.5,12.68%207.56,13.34%207.64,14M12,4.03C12.83,5.23%2013.5,6.57%2013.91,8H10.09C10.5,6.57%2011.17,5.23%2012,4.03M18.92,8H15.97C15.65,6.75%2015.19,5.55%2014.59,4.44C16.43,5.07%2017.96,6.34%2018.92,8M12,2C6.47,2%202,6.5%202,12A10,10%200%200,0%2012,22A10,10%200%200,0%2022,12A10,10%200%200,0%2012,2Z'%20/%3e%3c/svg%3e",eAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M12.04%202C6.58%202%202.13%206.45%202.13%2011.91C2.13%2013.66%202.59%2015.36%203.45%2016.86L2.05%2022L7.3%2020.62C8.75%2021.41%2010.38%2021.83%2012.04%2021.83C17.5%2021.83%2021.95%2017.38%2021.95%2011.92C21.95%209.27%2020.92%206.78%2019.05%204.91C17.18%203.03%2014.69%202%2012.04%202M12.05%203.67C14.25%203.67%2016.31%204.53%2017.87%206.09C19.42%207.65%2020.28%209.72%2020.28%2011.92C20.28%2016.46%2016.58%2020.15%2012.04%2020.15C10.56%2020.15%209.11%2019.76%207.85%2019L7.55%2018.83L4.43%2019.65L5.26%2016.61L5.06%2016.29C4.24%2015%203.8%2013.47%203.8%2011.91C3.81%207.37%207.5%203.67%2012.05%203.67M8.53%207.33C8.37%207.33%208.1%207.39%207.87%207.64C7.65%207.89%207%208.5%207%209.71C7%2010.93%207.89%2012.1%208%2012.27C8.14%2012.44%209.76%2014.94%2012.25%2016C12.84%2016.27%2013.3%2016.42%2013.66%2016.53C14.25%2016.72%2014.79%2016.69%2015.22%2016.63C15.7%2016.56%2016.68%2016.03%2016.89%2015.45C17.1%2014.87%2017.1%2014.38%2017.04%2014.27C16.97%2014.17%2016.81%2014.11%2016.56%2014C16.31%2013.86%2015.09%2013.26%2014.87%2013.18C14.64%2013.1%2014.5%2013.06%2014.31%2013.3C14.15%2013.55%2013.67%2014.11%2013.53%2014.27C13.38%2014.44%2013.24%2014.46%2013%2014.34C12.74%2014.21%2011.94%2013.95%2011%2013.11C10.26%2012.45%209.77%2011.64%209.62%2011.39C9.5%2011.15%209.61%2011%209.73%2010.89C9.84%2010.78%2010%2010.6%2010.1%2010.45C10.23%2010.31%2010.27%2010.2%2010.35%2010.04C10.43%209.87%2010.39%209.73%2010.33%209.61C10.27%209.5%209.77%208.26%209.56%207.77C9.36%207.29%209.16%207.35%209%207.34C8.86%207.34%208.7%207.33%208.53%207.33Z'%20/%3e%3c/svg%3e",tAe="5.2.21",yM={version:tAe},nAe=""+new URL("images/nav_drawer_banner-B2zCGthx.png",import.meta.url).href,z_=""+new URL("images/logo-Du9HqkeA.png",import.meta.url).href,Oo=V(localStorage.getItem("desktopSessionToken")||null),zl=V(JSON.parse(localStorage.getItem("desktopPermissions")||"[]")),Kl=V(localStorage.getItem("desktopIsAdmin")==="true"),gf=V(localStorage.getItem("desktopUserName")||null),yf=V(localStorage.getItem("desktopUserId")?parseInt(localStorage.getItem("desktopUserId")):null),_f=V(JSON.parse(localStorage.getItem("desktopFeatures")||"[]")),wf=V(localStorage.getItem("googleVerified")==="true"),F0=V(localStorage.getItem("googleUserId")?parseInt(localStorage.getItem("googleUserId")):null),K_=V(localStorage.getItem("googleUserName")||null),aAe=ne(()=>!!Oo.value);ne(()=>wf.value);const rAe=ne(()=>wf.value?Oo.value?"complete":"passcode":"google"),bf=V(!1),Hv=V(null);je([Oo,zl,Kl,gf,yf,_f,wf,F0,K_],()=>{Oo.value?(localStorage.setItem("desktopSessionToken",Oo.value),localStorage.setItem("desktopPermissions",JSON.stringify(zl.value)),localStorage.setItem("desktopIsAdmin",Kl.value.toString()),localStorage.setItem("desktopUserName",gf.value||""),localStorage.setItem("desktopUserId",yf.value?.toString()||""),localStorage.setItem("desktopFeatures",JSON.stringify(_f.value))):(localStorage.removeItem("desktopSessionToken"),localStorage.removeItem("desktopPermissions"),localStorage.removeItem("desktopIsAdmin"),localStorage.removeItem("desktopUserName"),localStorage.removeItem("desktopUserId"),localStorage.removeItem("desktopFeatures")),wf.value?(localStorage.setItem("googleVerified","true"),localStorage.setItem("googleUserId",F0.value?.toString()||""),localStorage.setItem("googleUserName",K_.value||"")):(localStorage.removeItem("googleVerified"),localStorage.removeItem("googleUserId"),localStorage.removeItem("googleUserName"))},{deep:!0});let H3=!1;function W_(e=At){H3||(H3=!0,e.interceptors.request.use(t=>(Oo.value&&(t.headers["x-session-token"]=Oo.value),t),t=>Promise.reject(t)),e.interceptors.response.use(t=>t,t=>{if(t.response?.status===419){console.warn("Desktop session invalidated - permissions may have been updated");const n=t.response?.data?.message||"Your permissions have been updated. Please log in again.";alert(n),$v()}return Promise.reject(t)}))}async function sAe(e){bf.value=!0,Hv.value=null;try{const t=await e.dispatch("auth/signInWithGoogle"),n=e.getters["auth/currentUser"];if(!n||!n.email)throw new Error("Google sign-in succeeded but no email returned");return{success:!0,email:n.email,displayName:n.displayName,isFirstTime:t}}catch(t){throw Hv.value=t.message||"Google sign-in failed",t}finally{bf.value=!1}}async function oAe(e,t=null){bf.value=!0,Hv.value=null;const n=t||F0.value;try{const a=await At.post("/desktop/auth/login",{passcode:e,userId:n});if(a.data.success)return Oo.value=a.data.sessionToken,zl.value=a.data.permissions||[],Kl.value=a.data.isAdmin||!1,gf.value=a.data.userName||null,yf.value=a.data.userId||null,_f.value=a.data.features||[],{success:!0,isAdmin:a.data.isAdmin,userName:a.data.userName,permissions:a.data.permissions};throw new Error(a.data.error||"Login failed")}catch(a){throw Hv.value=a.response?.data?.error||a.message||"Login failed",a}finally{bf.value=!1}}async function iAe(){if(!Oo.value)return{valid:!1};bf.value=!0;try{const e=await At.get("/desktop/auth/session",{headers:{"x-session-token":Oo.value}});return e.data.valid?(zl.value=e.data.permissions||[],Kl.value=e.data.isAdmin||!1,gf.value=e.data.userName||null,yf.value=e.data.userId||null,_f.value=e.data.features||[],{valid:!0,...e.data}):($v(),{valid:!1})}catch(e){return e.response?.status===401&&$v(),{valid:!1,error:e.message}}finally{bf.value=!1}}async function lAe(e,t=!0){try{Oo.value&&await At.post("/desktop/auth/logout",{},{headers:{"x-session-token":Oo.value}})}catch(n){console.error("Desktop logout error:",n)}finally{if($v(),qk(),t&&e)try{await e.dispatch("auth/signOut")}catch(n){console.error("Google sign-out error:",n)}}}function $v(){Oo.value=null,zl.value=[],Kl.value=!1,gf.value=null,yf.value=null,_f.value=[],Hv.value=null}function qk(){wf.value=!1,F0.value=null,K_.value=null}function uAe(){$v(),qk()}function cAe(e){Oo.value=e.sessionToken,zl.value=e.permissions||[],Kl.value=e.isAdmin||!1,gf.value=e.userName||null,yf.value=e.userId||null,_f.value=e.features||[],e.googleVerified!==void 0&&(wf.value=e.googleVerified)}function $3(e){return Kl.value?!0:zl.value.includes(e)}function Q3(e){return Kl.value?!0:e.some(t=>zl.value.includes(t))}function G3(e){return Kl.value?!0:e.every(t=>zl.value.includes(t))}function z3(e){if(Kl.value)return!0;const t=`${e}.`;return zl.value.some(n=>!n||typeof n!="string"?!1:n===e?!0:n.startsWith(t))}function uh(){const e=ra(),t=ne(()=>e?.getters["auth/currentUser"]),n=ne(()=>e?.getters["auth/isLoading"]),a=ne(()=>e?.getters["auth/redirectInProgress"]),r=ne(()=>e?.getters["auth/isAuthenticated"]);return W_(),{sessionToken:ne(()=>Oo.value),permissions:ne(()=>zl.value),isAdmin:ne(()=>Kl.value),userName:ne(()=>gf.value),userId:ne(()=>yf.value),features:ne(()=>_f.value),isAuthenticated:aAe,googleUser:t,googleLoading:n,googleRedirectInProgress:a,isGoogleSignedIn:r,isGoogleVerified:ne(()=>wf.value),googleVerifiedUserId:ne(()=>F0.value),googleVerifiedUserName:ne(()=>K_.value),authStep:rAe,sessionLoading:ne(()=>bf.value),sessionError:ne(()=>Hv.value),signInWithGoogle:()=>sAe(e),loginWithPasscode:(s,o)=>oAe(s,o),verifyDesktopSession:()=>iAe(),logoutDesktop:(s=!0)=>lAe(e,s),clearDesktopSession:$v,clearGoogleVerification:qk,resetAllAuthState:uAe,setDesktopSession:cAe,hasPermission:s=>ne(()=>$3(s)),hasAnyPermission:s=>ne(()=>Q3(s)),hasAllPermissions:s=>ne(()=>G3(s)),hasFeatureAccess:s=>ne(()=>z3(s)),checkPermission:$3,checkAnyPermission:Q3,checkAllPermissions:G3,checkFeatureAccess:z3,setupDesktopSessionInterceptors:W_,store:e}}function ch(){const e=Ra(),t=e?uh():null,n=e?null:zf(),a=ne(()=>e&&t?t.permissions.value||[]:!e&&n?n.permissions.value||[]:[]),r=ne(()=>e&&t?t.isAdmin.value||!1:!e&&n&&n.isAdmin.value||!1),s=ne(()=>e&&t?t.features.value||[]:!e&&n?n.features.value||[]:[]),o=y=>ne(()=>r.value?!0:a.value.includes(y)),i=y=>ne(()=>r.value||!y||y.length===0?!0:y.some(w=>a.value.includes(w))),c=y=>ne(()=>r.value||!y||y.length===0?!0:y.every(w=>a.value.includes(w))),A=y=>ne(()=>{if(!y)return!1;const w=s.value.find(x=>x&&x.id===y);return w&&w.adminOnly?r.value:r.value?!0:!a.value||!Array.isArray(a.value)?!1:a.value.some(x=>!x||typeof x!="string"?!1:x===y?!0:x.startsWith(`${y}.`))}),d=ne(()=>{if(r.value)return s.value.map(w=>w.id);const y=new Set;return a.value.forEach(w=>{const[b]=w.split(".");y.add(b)}),Array.from(y)});return{permissions:a,isAdmin:r,features:s,accessibleFeatures:d,hasPermission:o,hasAnyPermission:i,hasAllPermissions:c,hasFeatureAccess:A,getFeatureActions:y=>ne(()=>{if(r.value){const w=s.value.find(b=>b.id===y);return w?w.actions.map(b=>b.action):[]}return a.value.filter(w=>w.startsWith(`${y}.`)).map(w=>w.split(".")[1])}),canPerformAction:(y,w)=>ne(()=>r.value?!0:a.value.includes(`${y}.${w}`)),checkPermission:y=>r.value?!0:a.value.includes(y),checkAnyPermission:y=>r.value||!y||y.length===0?!0:y.some(w=>a.value.includes(w)),checkFeatureAccess:y=>{if(!a.value||!Array.isArray(a.value))return!1;const w=s.value.find(x=>x&&x.id===y);return w&&w.adminOnly?r.value:r.value?!0:a.value.some(x=>!x||typeof x!="string"?!1:x===y?!0:x.startsWith(`${y}.`))}}}const qt=(e,t)=>{const n=e.__vccOpts||e;for(const[a,r]of t)n[a]=r;return n},dAe={class:"nav-icon-container"},AAe=["src"],fAe={class:"nav-icon-container"},mAe=["src"],vAe={class:"nav-footer"},hAe={class:"version-display"},pAe={__name:"side-nav",props:{collapsed:{type:Boolean,default:!1}},setup(e){const n=Lf(e).collapsed,a=yM.version,{isAdmin:r,permissions:s,features:o}=ch(),i=Ra(),c=i?uh():null,A=i?null:zf();je([s,r],([p,g])=>{},{immediate:!0,deep:!0}),dn(async()=>{if(i&&c&&c.sessionToken.value)try{await c.verifyDesktopSession(),console.log("[SideNav] Desktop session verified, permissions updated")}catch(p){console.error("[SideNav] Failed to verify desktop session:",p)}else if(!i&&A&&A.sessionToken.value)try{await A.verifySession(),console.log("[SideNav] Web session verified, permissions updated")}catch(p){console.error("[SideNav] Failed to verify web session:",p)}});const d=[{type:"divider"},{type:"subheader",title:"Clinic"},{title:"Home",value:1,icon:"custom-home",route:"/home",feature:"home"},{title:"Patients",value:2,icon:"custom-account-multiple",route:"/patients",feature:"patients"},{title:"Tasks",value:6,icon:"custom-list-box",route:"/tasks",feature:"tasks"},{title:"Research",value:5,icon:"custom-book-open-page-variant",route:"/research",feature:"research"},{title:"Reports",value:8,icon:"mdi-chart-line",route:"/reports",feature:"reports"},{type:"divider"},{type:"subheader",title:"Finances"},{title:"Payments",value:7,icon:"mdi-currency-inr",route:"/payments",feature:"billing"},{type:"divider"},{type:"subheader",title:"Pharmacy"},{title:"Queue",value:9,icon:"mdi-pill",route:"/pharmacy/queue",feature:"pharmacy.queue"},{title:"Inventory",value:10,icon:"mdi-package-variant",route:"/pharmacy/inventory",feature:"pharmacy.inventory"},{title:"Purchase",value:12,icon:"mdi-cart",route:"/pharmacy/purchase",feature:"pharmacy.purchase"},{title:"Reports",value:11,icon:"mdi-chart-line",route:"/pharmacy/reports",feature:"pharmacy.reports"},{type:"divider"},{type:"subheader",title:"Setup"},{title:"Admin",value:3,icon:"custom-account-cog",route:"/admin",requiresAdmin:!0},{title:"Data",value:4,icon:"custom-file-arrow-up-down",route:"/data",feature:"data"}],f=ne(()=>{const p=s.value||[],g=r.value,y=o.value||[],w=()=>g?!0:!p||!Array.isArray(p)?!1:p.some(S=>S&&typeof S=="string"&&S.startsWith("admin.")),b=S=>{const E=y.find(U=>U&&U.id===S);return E&&E.adminOnly?g:g?!0:!p||!Array.isArray(p)?!1:p.some(U=>!U||typeof U!="string"?!1:U===S?!0:U.startsWith(`${S}.`))},x=S=>S.type==="divider"||S.type==="subheader"?!1:S.requiresAdmin?S.route==="/admin"?w():g:S.permission?g?!0:p.includes(S.permission):S.feature?b(S.feature):!0,T=[];let D={divider:null,subheader:null,items:[]};for(let S=0;S<d.length;S++){const E=d[S];E.type==="divider"?(D.items.some(x)&&(D.divider&&T.push(D.divider),D.subheader&&T.push(D.subheader),D.items.forEach(U=>{x(U)&&T.push(U)})),D={divider:E,subheader:null,items:[]}):E.type==="subheader"?D.subheader=E:D.items.push(E)}return D.items.some(x)&&(D.divider&&T.push(D.divider),D.subheader&&T.push(D.subheader),D.items.forEach(S=>{x(S)&&T.push(S)})),T}),m=p=>{console.log("Navigation item clicked:",p.title);const g=event.currentTarget;g&&(g.classList.add("nav-ripple"),setTimeout(()=>{g.classList.remove("nav-ripple")},600))},v=p=>{const g=p.replace("custom-","");try{return new URL(Object.assign({"../assets/icons/account-cancel.svg":ede,"../assets/icons/account-check.svg":tde,"../assets/icons/account-clock.svg":nde,"../assets/icons/account-cog.svg":ade,"../assets/icons/account-multiple.svg":rde,"../assets/icons/account.svg":sde,"../assets/icons/bell-alert.svg":ode,"../assets/icons/bell-check.svg":ide,"../assets/icons/book-open-page-variant.svg":lde,"../assets/icons/calculator-variant.svg":ude,"../assets/icons/cellphone.svg":cde,"../assets/icons/chart-line-variant.svg":dde,"../assets/icons/chevron-left-circle.svg":Ade,"../assets/icons/chevron-right-circle.svg":fde,"../assets/icons/clipboard-pulse.svg":mde,"../assets/icons/clipboard-text-outline.svg":vde,"../assets/icons/close-thick.svg":hde,"../assets/icons/close.svg":pde,"../assets/icons/cloud-arrow-down.svg":gde,"../assets/icons/content-copy.svg":yde,"../assets/icons/delete.svg":_de,"../assets/icons/email.svg":wde,"../assets/icons/file-arrow-up-down.svg":bde,"../assets/icons/file-cabinet.svg":xde,"../assets/icons/file-document-edit-outline.svg":Cde,"../assets/icons/file-document-plus.svg":Sde,"../assets/icons/file-upload.svg":Ede,"../assets/icons/folder-open-outline.svg":Bde,"../assets/icons/fullscreen-exit.svg":kde,"../assets/icons/fullscreen.svg":Tde,"../assets/icons/home.svg":Ide,"../assets/icons/human-queue.svg":Fde,"../assets/icons/image-multiple-outline.svg":Pde,"../assets/icons/laptop.svg":Dde,"../assets/icons/list-box.svg":Ude,"../assets/icons/logout.svg":Rde,"../assets/icons/magnify-minus.svg":Nde,"../assets/icons/magnify-plus.svg":Vde,"../assets/icons/magnify.svg":Lde,"../assets/icons/menu.svg":Mde,"../assets/icons/microphone-off.svg":Ode,"../assets/icons/microphone.svg":Hde,"../assets/icons/needle.svg":$de,"../assets/icons/pencil.svg":Qde,"../assets/icons/plus.svg":Gde,"../assets/icons/prescription.svg":zde,"../assets/icons/printer.svg":Kde,"../assets/icons/refresh.svg":Wde,"../assets/icons/server.svg":jde,"../assets/icons/share-variant.svg":qde,"../assets/icons/upload.svg":Yde,"../assets/icons/video-plus.svg":Xde,"../assets/icons/weather-cloudy.svg":Jde,"../assets/icons/web.svg":Zde,"../assets/icons/whatsapp.svg":eAe})[`../assets/icons/${g}.svg`],import.meta.url).href}catch(y){return console.warn(`Failed to load icon: ${g}.svg`,y),""}};return(p,g)=>{const y=I("v-img"),w=I("v-divider"),b=I("v-list-subheader"),x=I("v-icon"),T=I("v-list-item-title"),D=I("v-list-item"),k=I("v-tooltip"),S=I("v-list"),E=I("v-navigation-drawer");return R(),ve(E,{elevation:1,width:150,rail:Qe(n),"rail-width":80,permanent:"",image:Qe(nAe),app:"",class:"nav-drawer-with-opacity"},Ev({append:u(()=>[h("div",vAe,[h("div",hAe," v"+K(Qe(a)),1)])]),default:u(()=>[l(S,{density:"compact",nav:"",lines:!1,class:"interactive-nav-list"},{default:u(()=>[(R(!0),Ae(Ke,null,Gt(f.value,C=>(R(),Ae(Ke,{key:C.value||C.title},[C.type==="divider"?(R(),ve(w,{key:0,divider:"",class:"nav-divider"})):ye("",!0),C.type==="subheader"?(R(),ve(b,{key:1,class:"nav-subheader"},{default:u(()=>[O(K(C.title),1)]),_:2},1024)):ye("",!0),C.type!=="divider"&&C.type!=="subheader"?(R(),Ae(Ke,{key:2},[Qe(n)?(R(),ve(k,{key:0,location:"right","open-delay":200},{activator:u(({props:U})=>[l(D,Pe({ref_for:!0},U,{to:C.route,class:"nav-item-interactive",onClick:F=>m(C)}),{prepend:u(()=>[h("div",dAe,[C.icon.startsWith("custom-")?(R(),ve(x,{key:1,size:"large",class:"nav-icon"},{default:u(()=>[h("img",{src:v(C.icon),alt:""},null,8,AAe)]),_:2},1024)):(R(),ve(x,{key:0,size:"large",icon:C.icon,class:"nav-icon"},null,8,["icon"]))])]),default:u(()=>[l(T,{class:"font-weight-bold nav-title"},{default:u(()=>[O(K(C.title),1)]),_:2},1024)]),_:2},1040,["to","onClick"])]),default:u(()=>[h("span",null,K(C.title),1)]),_:2},1024)):(R(),ve(D,{key:1,to:C.route,class:"nav-item-interactive",onClick:U=>m(C)},{prepend:u(()=>[h("div",fAe,[C.icon.startsWith("custom-")?(R(),ve(x,{key:1,size:"large",class:"nav-icon"},{default:u(()=>[h("img",{src:v(C.icon),alt:""},null,8,mAe)]),_:2},1024)):(R(),ve(x,{key:0,size:"large",icon:C.icon,class:"nav-icon"},null,8,["icon"]))])]),default:u(()=>[l(T,{class:"font-weight-bold nav-title"},{default:u(()=>[O(K(C.title),1)]),_:2},1024)]),_:2},1032,["to","onClick"]))],64)):ye("",!0)],64))),128))]),_:1})]),_:2},[Qe(n)?{name:"prepend",fn:u(()=>[l(y,{src:Qe(z_),class:"mb-2 mt-4",height:50,contain:""},null,8,["src"])]),key:"1"}:{name:"prepend",fn:u(()=>[l(y,{src:Qe(z_),class:"mb-0 mt-3",height:60,contain:""},null,8,["src"])]),key:"0"}]),1032,["rail","image"])}}},gAe=qt(pAe,[["__scopeId","data-v-d46dd683"]]),yAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17,10.5V7A1,1%200%200,0%2016,6H4A1,1%200%200,0%203,7V17A1,1%200%200,0%204,18H16A1,1%200%200,0%2017,17V13.5L21,17.5V6.5L17,10.5M14,13H11V16H9V13H6V11H9V8H11V11H14V13Z'%20/%3e%3c/svg%3e",_Ae="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M9,2A7,7%200%200,1%2016,9C16,10.57%2015.5,12%2014.61,13.19L15.41,14H16L22,20L20,22L14,16V15.41L13.19,14.61C12,15.5%2010.57,16%209,16A7,7%200%200,1%202,9A7,7%200%200,1%209,2M5,8V10H13V8H5Z'%20/%3e%3c/svg%3e",wAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M9,2A7,7%200%200,1%2016,9C16,10.57%2015.5,12%2014.61,13.19L15.41,14H16L22,20L20,22L14,16V15.41L13.19,14.61C12,15.5%2010.57,16%209,16A7,7%200%200,1%202,9A7,7%200%200,1%209,2M8,5V8H5V10H8V13H10V10H13V8H10V5H8Z'%20/%3e%3c/svg%3e",bAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M14,14H19V16H16V19H14V14M5,14H10V19H8V16H5V14M8,5H10V10H5V8H8V5M19,8V10H14V5H16V8H19Z'%20/%3e%3c/svg%3e",xAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17V19H5V14H7V17H10Z'%20/%3e%3c/svg%3e",CAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M20%206.91L17.09%204L12%209.09L6.91%204L4%206.91L9.09%2012L4%2017.09L6.91%2020L12%2014.91L17.09%2020L20%2017.09L14.91%2012L20%206.91Z'%20/%3e%3c/svg%3e",K3="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17%207L15.59%208.41L18.17%2011H8V13H18.17L15.59%2015.58L17%2017L22%2012M4%205H12V3H4C2.9%203%202%203.9%202%205V19C2%2020.1%202.9%2021%204%2021H12V19H4V5Z'%20/%3e%3c/svg%3e";var J1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _M(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Jx,W3;function SAe(){if(W3)return Jx;W3=1;const e=new Set(["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH"]);return Jx=t=>!e.has(t&&t.code),Jx}var EAe=SAe();const BAe=_M(EAe),Yk="axios-retry";function wM(e){const t=["ERR_CANCELED","ECONNABORTED"];return e.response||!e.code||t.includes(e.code)?!1:BAe(e)}const bM=["get","head","options"],kAe=bM.concat(["put","delete"]);function Xk(e){return e.code!=="ECONNABORTED"&&(!e.response||e.response.status===429||e.response.status>=500&&e.response.status<=599)}function TAe(e){return e.config?.method?Xk(e)&&bM.indexOf(e.config.method)!==-1:!1}function xM(e){return e.config?.method?Xk(e)&&kAe.indexOf(e.config.method)!==-1:!1}function CM(e){return wM(e)||xM(e)}function Jk(e=void 0){const t=e?.response?.headers["retry-after"];if(!t)return 0;let n=(Number(t)||0)*1e3;return n===0&&(n=(new Date(t).valueOf()||0)-Date.now()),Math.max(0,n)}function IAe(e=0,t=void 0){return Math.max(0,Jk(t))}function FAe(e=0,t=void 0,n=100){const a=2**e*n,r=Math.max(a,Jk(t)),s=r*.2*Math.random();return r+s}function PAe(e=100){return(t=0,n=void 0)=>{const a=t*e;return Math.max(a,Jk(n))}}const DAe={retries:3,retryCondition:CM,retryDelay:IAe,shouldResetTimeout:!1,onRetry:()=>{},onMaxRetryTimesExceeded:()=>{},validateResponse:null};function UAe(e,t){return{...DAe,...t,...e[Yk]}}function j3(e,t,n=!1){const a=UAe(e,t||{});return a.retryCount=a.retryCount||0,(!a.lastRequestTime||n)&&(a.lastRequestTime=Date.now()),e[Yk]=a,a}function RAe(e,t){e.defaults.agent===t.agent&&delete t.agent,e.defaults.httpAgent===t.httpAgent&&delete t.httpAgent,e.defaults.httpsAgent===t.httpsAgent&&delete t.httpsAgent}async function NAe(e,t){const{retries:n,retryCondition:a}=e,r=(e.retryCount||0)<n&&a(t);if(typeof r=="object")try{return await r!==!1}catch{return!1}return r}async function VAe(e,t,n,a){t.retryCount+=1;const{retryDelay:r,shouldResetTimeout:s,onRetry:o}=t,i=r(t.retryCount,n);if(RAe(e,a),!s&&a.timeout&&t.lastRequestTime){const c=Date.now()-t.lastRequestTime,A=a.timeout-c-i;if(A<=0)return Promise.reject(n);a.timeout=A}return a.transformRequest=[c=>c],await o(t.retryCount,n,a),a.signal?.aborted?Promise.resolve(e(a)):new Promise(c=>{const A=()=>{clearTimeout(d),c(e(a))},d=setTimeout(()=>{c(e(a)),a.signal?.removeEventListener&&a.signal.removeEventListener("abort",A)},i);a.signal?.addEventListener&&a.signal.addEventListener("abort",A,{once:!0})})}async function LAe(e,t){e.retryCount>=e.retries&&await e.onMaxRetryTimesExceeded(t,e.retryCount)}const Pc=(e,t)=>{const n=e.interceptors.request.use(r=>(j3(r,t,!0),r[Yk]?.validateResponse&&(r.validateStatus=()=>!1),r)),a=e.interceptors.response.use(null,async r=>{const{config:s}=r;if(!s)return Promise.reject(r);const o=j3(s,t);return r.response&&o.validateResponse?.(r.response)?r.response:await NAe(o,r)?VAe(e,o,r,s):(await LAe(o,r),Promise.reject(r))});return{requestInterceptorId:n,responseInterceptorId:a}};Pc.isNetworkError=wM;Pc.isSafeRequestError=TAe;Pc.isIdempotentRequestError=xM;Pc.isNetworkOrIdempotentRequestError=CM;Pc.exponentialDelay=FAe;Pc.linearDelay=PAe;Pc.isRetryableError=Xk;const SM=Ir.create({timeout:15e3,headers:{"Content-Type":"application/json"}});Pc(SM,{retries:3,retryDelay:e=>{const t=Math.pow(2,e-1)*1e3;return console.log(` Tunnel health check retry ${e}, waiting ${t}ms...`),t},retryCondition:e=>{const t=Pc.isNetworkOrIdempotentRequestError(e)||e.code==="ECONNABORTED"||e.response?.status===404||e.response?.status>=500;return t&&console.log(` Will retry due to: ${e.message||e.response?.status}`),t},onRetry:(e,t,n)=>{console.log(` Tunnel health retry attempt ${e} for ${n.url}`)}});const rd=V("checking"),pi=V("checking"),to=V("checking"),Zx=V(!1),pl=V(!1);let Fm=null,Pm=null,Dm=null,FA=null,PA=null,np=null;function EM(){const{showSnackbar:e}=ca(),t=async(y=0)=>{if(!Ra())return console.log("[connectionStatus] Web mode: Skipping server health check"),rd.value="connected",!0;const w=kr("localhost"),b=[w.health.https,w.health.http];for(const x of b)try{console.log(` Checking server: ${x}`);const T=await fetch(x,{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(5e3)});if(!T.ok)throw new Error(`HTTP ${T.status}`);const D=await T.json();if(D.success&&D.status==="ok"&&D.database==="connected")return console.log(" Server connected"),rd.value="connected",!0}catch(T){if(console.warn(`Server check failed for ${x}:`,T.message),x===b[b.length-1]&&y<3&&T.message.includes("ERR_CONNECTION_REFUSED"))return rd.value="checking",await new Promise(D=>setTimeout(D,1e3*Math.pow(2,y))),t(y+1)}return rd.value="disconnected",!1},n=async()=>{if(!Ra())return navigator.onLine?(console.log("[connectionStatus] Web mode: Internet status (navigator.onLine):",navigator.onLine),pi.value="connected",!0):(console.log("[connectionStatus] Web mode: Navigator reports offline"),pi.value="disconnected",!1);if(!navigator.onLine)return console.log(" Navigator reports offline"),pi.value="disconnected",!1;try{if((await fetch("https://www.google.com/favicon.ico",{method:"GET",cache:"no-cache",signal:AbortSignal.timeout(3e3)})).ok)return console.log(" Internet connected"),pi.value="connected",!0}catch(y){console.warn(" Internet check failed:",y.message)}return pi.value="disconnected",!1};let a=0;const r=3,s=async()=>{if(!Ra())return console.log("[connectionStatus] Web mode: Skipping remote access health check"),to.value="connected",!0;if(pl.value)return console.log(" Skipping remote check - reconnecting"),!1;const y=kr("localhost");let w=null,b=!1;try{for(const x of[y.health.https,y.health.http])try{const T=await fetch(x,{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(3e3)});if(T.ok){const D=await T.json();w=D.ngrok?.tunnelUrl,b=D.ngrok?.isReconnecting||!1;break}}catch{}}catch{}if(!w&&np&&(w=np),b)return to.value="reconnecting",!1;if(!w)return console.log(" No tunnel URL available"),to.value="disconnected",a=0,!1;try{console.log(" Checking tunnel health:",w);const x=await SM.get(`${w}/health`);if(x.status===200&&x.data?.success)return console.log(" Remote access connected"),np=w,to.value="connected",a=0,!0;console.warn(" Tunnel health check returned unexpected response:",x.status,x.data)}catch(x){console.warn(" Tunnel health check failed after retries:",x.message)}return a++,console.log(` Health check failed (${a}/${r} failures)`),a>=r?(to.value="disconnected",pi.value==="connected"&&!pl.value&&(console.log(` ${r} consecutive failures detected, waiting 5 seconds before auto-reconnect...`),a=0,setTimeout(()=>{!pl.value&&pi.value==="connected"&&(console.log(" Starting auto-reconnect after delay..."),o())},5e3))):console.log(` Possible transient failure (${a}/${r}), will retry on next poll`),!1},o=async()=>{if(!Ra())return console.log("[connectionStatus] Web mode: Skipping auto-reconnect"),!1;if(pl.value)return console.log(" Auto-reconnect already in progress"),!1;if(pi.value!=="connected")return console.log(" No internet - cannot auto-reconnect"),!1;pl.value=!0,to.value="reconnecting",console.log(" Auto-reconnecting...");try{const y=kr("localhost"),w=y.api?.https||`https://localhost:${y.ports?.https||3443}/api`,b=await fetch(`${w}/ngrok/reconnect`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({}),signal:AbortSignal.timeout(5e4)}),x=await b.json();return b.ok&&x.success?(console.log(" Auto-reconnect successful:",x.data?.ngrokTunnelUrl),np=x.data?.ngrokTunnelUrl,to.value="connected",!0):(console.warn(" Auto-reconnect failed:",x.userMessage||x.error),to.value="disconnected",e({message:x.userMessage||x.error||"Auto-reconnection failed",color:"error",timeout:8e3}),!1)}catch(y){return console.error(" Auto-reconnect error:",y.message),to.value="disconnected",e({message:"Auto-reconnection failed. Please try manually.",color:"error",timeout:6e3}),!1}finally{pl.value=!1}},i=async()=>{if(!Ra())return console.log("[connectionStatus] Web mode: Skipping manual reconnect"),{success:!1,userMessage:"Reconnection not available in web mode"};if(pl.value)return{success:!1,userMessage:"Reconnection already in progress"};pl.value=!0,to.value="reconnecting",console.log(" Manual reconnect started");try{const y=kr("localhost"),w=y.api?.https||`https://localhost:${y.ports?.https||3443}/api`,b=await fetch(`${w}/ngrok/reconnect`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({}),signal:AbortSignal.timeout(5e4)}),x=await b.json();return b.ok&&x.success?(console.log(" Manual reconnect successful:",x.data?.ngrokTunnelUrl),np=x.data?.ngrokTunnelUrl,to.value="connected",{success:!0,tunnelUrl:x.data?.ngrokTunnelUrl,userMessage:x.message}):(console.warn(" Manual reconnect failed:",x.userMessage||x.error),to.value="disconnected",{success:!1,error:x.error,userMessage:x.userMessage||"Reconnection failed"})}catch(y){return console.error(" Manual reconnect error:",y.message),to.value="disconnected",{success:!1,error:y.message,userMessage:"Connection error. Please try again."}}finally{pl.value=!1}},c=()=>{Fm&&clearInterval(Fm),n(),FA&&window.removeEventListener("online",FA),PA&&window.removeEventListener("offline",PA),FA=()=>{console.log(" Online event"),n()},PA=()=>{console.log(" Offline event"),pi.value="disconnected"},window.addEventListener("online",FA),window.addEventListener("offline",PA),Fm=setInterval(()=>{navigator.onLine&&pi.value==="disconnected"&&n()},3e4)},A=()=>{Fm&&(clearInterval(Fm),Fm=null),FA&&(window.removeEventListener("online",FA),FA=null),PA&&(window.removeEventListener("offline",PA),PA=null)},d=()=>{if(!Ra()){console.log("[connectionStatus] Web mode: Skipping server monitoring"),rd.value="connected";return}Pm&&clearInterval(Pm),t(),Pm=setInterval(()=>{t()},3e4)};return{serverStatus:rd,internetStatus:pi,remoteAccessStatus:to,isChecking:Zx,isReconnecting:pl,checkAllConnections:async()=>(Zx.value=!0,rd.value="checking",pi.value="checking",d(),c(),Zx.value=!1,{server:rd.value==="connected",internet:pi.value==="connected"}),checkServerConnection:t,checkInternetConnection:n,checkRemoteAccessStatus:s,startInternetMonitoring:c,stopInternetMonitoring:A,startServerMonitoring:d,stopServerMonitoring:()=>{Pm&&(clearInterval(Pm),Pm=null)},startRemoteAccessMonitoring:()=>{if(!Ra()){console.log("[connectionStatus] Web mode: Skipping remote access monitoring"),to.value="connected";return}Dm&&clearTimeout(Dm),to.value="checking",s();const y=()=>{const w=pl.value?5e3:15e3;Dm=setTimeout(async()=>{await s(),y()},w)};y()},stopRemoteAccessMonitoring:()=>{Dm&&(clearTimeout(Dm),Dm=null)},attemptAutoReconnect:o,manualReconnect:i,getNetworkDetails:()=>{try{return{platform:window.process?.type==="renderer"?"electron":"browser",navigator_online:navigator.onLine,connection_type:navigator.connection?.effectiveType||"unknown",user_agent:navigator.userAgent}}catch(y){return{error:y.message}}}}}const MAe={class:"d-flex align-center gap-2"},OAe={class:"chip-text"},HAe={class:"chip-text"},$Ae={__name:"SelectorExtension",setup(e){const t=ra(),n=ne(()=>t.state.doctorModule.doctors),a=ne(()=>t.state.clinicModule.clinics),r=V(null),s=V(null),o=async()=>{await t.dispatch("doctorModule/fetchDoctors"),r.value=n.value.find(d=>d.id===t.state.doctorModule.doctorId)||null},i=async()=>{await t.dispatch("clinicModule/fetchClinics"),s.value=a.value.find(d=>d.id===t.state.clinicModule.clinicId)||null};Xl(async()=>{await o(),await i()}),dn(()=>{window.addEventListener("doctor-list-updated",o),window.addEventListener("clinic-list-updated",i)}),Ii(()=>{window.removeEventListener("doctor-list-updated",o),window.removeEventListener("clinic-list-updated",i)});const c=d=>{r.value=d,t.commit("doctorModule/setDoctorId",d.id),console.log("Selected doctor:",d.doctorName),window.dispatchEvent(new CustomEvent("doctor-selection-changed",{detail:{doctorId:d.id,doctorName:d.doctorName}}))},A=d=>{s.value=d,t.commit("clinicModule/setClinicId",d.id),console.log("Selected clinic:",d.clinicName),window.dispatchEvent(new CustomEvent("clinic-selection-changed",{detail:{clinicId:d.id,clinicName:d.clinicName}}))};return je(()=>t.state.doctorModule.doctorId,d=>{r.value=n.value.find(f=>f.id===d)||null}),je(()=>t.state.clinicModule.clinicId,d=>{s.value=a.value.find(f=>f.id===d)||null}),je(n,d=>{d&&d.length>0&&(r.value=d.find(f=>f.id===t.state.doctorModule.doctorId)||null)},{deep:!0}),je(a,d=>{d&&d.length>0&&(s.value=d.find(f=>f.id===t.state.clinicModule.clinicId)||null)},{deep:!0}),(d,f)=>{const m=I("v-icon"),v=I("v-chip"),p=I("v-list-item-title"),g=I("v-list-item-subtitle"),y=I("v-list-item"),w=I("v-list"),b=I("v-menu");return R(),Ae("div",MAe,[l(b,{"offset-y":""},{activator:u(({props:x})=>[l(v,Pe(x,{variant:"outlined",size:"small",class:"selector-chip doctor-chip","prepend-icon":"mdi-stethoscope",color:r.value?"primary":"surface"}),{append:u(()=>[l(m,{size:"small"},{default:u(()=>[...f[0]||(f[0]=[O("mdi-chevron-down",-1)])]),_:1})]),default:u(()=>[h("span",OAe,K(r.value?r.value.doctorName:"Select Doctor"),1)]),_:1},16,["color"])]),default:u(()=>[l(w,{density:"compact","max-width":"300"},{default:u(()=>[(R(!0),Ae(Ke,null,Gt(n.value,x=>(R(),ve(y,{key:x.id,onClick:T=>c(x),class:ct({"bg-primary":r.value&&x.id===r.value.id})},{prepend:u(()=>[l(m,{size:"small"},{default:u(()=>[...f[1]||(f[1]=[O("mdi-stethoscope",-1)])]),_:1})]),default:u(()=>[l(p,null,{default:u(()=>[O(K(x.doctorName),1)]),_:2},1024),l(g,null,{default:u(()=>[O(K(x.doctorSpecialization),1)]),_:2},1024)]),_:2},1032,["onClick","class"]))),128))]),_:1})]),_:1}),l(b,{"offset-y":""},{activator:u(({props:x})=>[l(v,Pe(x,{variant:"outlined",size:"small",class:"selector-chip clinic-chip","prepend-icon":"mdi-hospital-marker",color:s.value?"primary":"surface"}),{append:u(()=>[l(m,{size:"small"},{default:u(()=>[...f[2]||(f[2]=[O("mdi-chevron-down",-1)])]),_:1})]),default:u(()=>[h("span",HAe,K(s.value?s.value.clinicName:"Select Clinic"),1)]),_:1},16,["color"])]),default:u(()=>[l(w,{density:"compact","max-width":"300"},{default:u(()=>[(R(!0),Ae(Ke,null,Gt(a.value,x=>(R(),ve(y,{key:x.id,onClick:T=>A(x),class:ct({"bg-primary":s.value&&x.id===s.value.id})},{prepend:u(()=>[l(m,{size:"small"},{default:u(()=>[...f[3]||(f[3]=[O("mdi-hospital-marker",-1)])]),_:1})]),default:u(()=>[l(p,null,{default:u(()=>[O(K(x.clinicName),1)]),_:2},1024),l(g,null,{default:u(()=>[O(K(x.clinicAddress),1)]),_:2},1024)]),_:2},1032,["onClick","class"]))),128))]),_:1})]),_:1})])}}},QAe=qt($Ae,[["__scopeId","data-v-07416910"]]),GAe={class:"d-flex align-center"},zAe={__name:"ConnectionStatusIndicator",setup(e){const{serverStatus:t,internetStatus:n,remoteAccessStatus:a,checkAllConnections:r,stopInternetMonitoring:s,startRemoteAccessMonitoring:o,stopRemoteAccessMonitoring:i,getNetworkDetails:c}=EM(),A=V(null),d=ne(()=>({"status-icon--checking":t.value==="checking","status-icon--connected":t.value==="connected","status-icon--disconnected":t.value==="disconnected"})),f=ne(()=>{switch(t.value){case"checking":return"Checking database connection...";case"connected":return"Database connected ";case"disconnected":return"Database disconnected ";default:return"Database status unknown"}}),m=ne(()=>({"status-icon--checking":n.value==="checking","status-icon--connected":n.value==="connected","status-icon--disconnected":n.value==="disconnected"})),v=ne(()=>{switch(n.value){case"checking":return"Checking internet...";case"connected":return"Internet connected ";case"disconnected":return"No internet ";default:return"Internet status unknown"}}),p=ne(()=>({"status-icon--checking":a.value==="checking","status-icon--connected":a.value==="connected","status-icon--disconnected":a.value==="disconnected","status-icon--reconnecting":a.value==="reconnecting","status-icon--error":a.value==="error"})),g=ne(()=>{switch(a.value){case"checking":return"Checking Remote Access Link status...";case"connected":return"Remote Access Link Operational ";case"disconnected":return"Remote Access Link Unavailable ";case"reconnecting":return"Reconnecting...";case"error":return"Remote Access Link Error - Click Reconnect ";default:return"Remote Access Link status unknown"}});return dn(()=>{A.value=c(),console.log("Network details:",A.value),r(),o()}),va(()=>{s(),i()}),(y,w)=>{const b=I("v-icon"),x=I("v-tooltip");return R(),Ae("div",GAe,[l(x,{text:f.value,location:"bottom"},{activator:u(({props:T})=>[h("div",Pe({class:"mr-3"},T),[l(b,{size:"20",class:ct(d.value)},{default:u(()=>[...w[0]||(w[0]=[O("mdi-database",-1)])]),_:1},8,["class"])],16)]),_:1},8,["text"]),l(x,{text:v.value,location:"bottom"},{activator:u(({props:T})=>[h("div",Pe({class:"mr-3"},T),[l(b,{size:"20",class:ct(m.value)},{default:u(()=>[...w[1]||(w[1]=[O("mdi-wifi",-1)])]),_:1},8,["class"])],16)]),_:1},8,["text"]),l(x,{text:g.value,location:"bottom"},{activator:u(({props:T})=>[h("div",Yl(Jl(T)),[l(b,{size:"20",class:ct(p.value)},{default:u(()=>[...w[2]||(w[2]=[O("mdi-link-variant",-1)])]),_:1},8,["class"])],16)]),_:1},8,["text"])])}}},KAe=qt(zAe,[["__scopeId","data-v-a12df52e"]]),WAe=async(e,t="both",n=null)=>{try{const a={type:t};n&&(a.doctorId=n);const r=await At.get(`/upload/patient/${e}/images`,{params:a});if(r.data.success)return{success:!0,data:r.data.data,message:r.data.message};throw new Error(r.data.error||"Failed to fetch patient images")}catch(a){return console.error("Patient images fetch error:",a),{success:!1,error:a.response?.data?.error||a.message||"Failed to fetch patient images"}}},jAe=async(e,t=null)=>{try{const n={};t&&(n.doctorId=t);const a=await At.get(`/upload/patient/${e}/all`,{params:n});if(a.data.success)return{success:!0,data:a.data.data,message:a.data.message};throw new Error(a.data.error||"Failed to fetch patient uploads")}catch(n){return console.error("Patient uploads fetch error:",n),{success:!1,error:n.response?.data?.error||n.message||"Failed to fetch patient uploads"}}},q3=async(e,t)=>{try{const n=await At.post("/upload/upload-pdf",{pdfBase64:e,filename:t});if(n.data.success)return{success:!0,data:n.data.data,message:n.data.message};throw new Error(n.data.error||"Upload failed")}catch(n){return console.error("PDF upload error:",n),{success:!1,error:n.response?.data?.error||n.message||"Failed to upload PDF"}}},qAe=async()=>{try{const e=await At.get("/print/qr");if(e.data.success)return{success:!0,data:e.data.data,message:e.data.message};throw new Error(e.data.error||"Failed to fetch QR code data")}catch(e){return console.error("QR code data fetch error:",e),{success:!1,error:e.response?.data?.error||e.message||"Failed to fetch QR code data"}}},YAe=async()=>{try{const e=await At.post("/ngrok/regenerate");if(e.data.success)return{success:!0,data:e.data.data,message:e.data.message||"Ngrok tunnel regenerated successfully"};throw new Error(e.data.error||"Failed to regenerate ngrok tunnel")}catch(e){return console.error("Ngrok tunnel regeneration error:",e),{success:!1,error:e.response?.data?.error||e.message||"Failed to regenerate ngrok tunnel"}}},XAe=async e=>{try{const t=await At.delete(`/upload/${e}`);if(t.data.success)return{success:!0,message:t.data.message||"Upload deleted successfully"};throw new Error(t.data.error||"Failed to delete upload")}catch(t){return console.error("Upload delete error:",t),{success:!1,error:t.response?.data?.error||t.message||"Failed to delete upload"}}},JAe=async(e,t)=>{console.log(" [UploadUtils] Starting support logs upload..."),console.log(` [UploadUtils] Filename: ${t}`),console.log(` [UploadUtils] Base64 data length: ${e.length} characters`),console.log(` [UploadUtils] Estimated file size: ${Math.round(e.length*.75/1024)} KB`);try{console.log(" [UploadUtils] Calling API: POST /upload/support-logs-upload");const n=await At.post("/upload/support-logs-upload",{logsBase64:e,filename:t});if(console.log(" [UploadUtils] API response received:",{status:n.status,success:n.data.success,hasFileUrl:!!n.data.data?.file_url}),n.data.success)return console.log(" [UploadUtils] Upload successful!"),console.log(` [UploadUtils] File URL: ${n.data.data.file_url}`),{success:!0,data:n.data.data,message:n.data.message};throw console.error(" [UploadUtils] Upload failed:",n.data.error),new Error(n.data.error||"Upload failed")}catch(n){return console.error(" [UploadUtils] Support logs upload error:",n),console.error(" [UploadUtils] Error details:",{message:n.message,status:n.response?.status,statusText:n.response?.statusText,responseData:n.response?.data}),{success:!1,error:n.response?.data?.error||n.message||"Failed to upload support logs"}}},ZAe={key:0,class:"mb-4"},efe={class:"text-caption text-center mt-2 text-medium-emphasis"},tfe={__name:"support-dialog",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,a=t,r=ne({get:()=>n.modelValue,set:b=>a("update:modelValue",b)}),s=V(null),o=V(!1),i=V(""),c=V(""),A=V(!1),d=V(0),f=V(""),m=V(""),v={required:b=>!!b?.trim()||"This field is required",maxLength50:b=>!b||b.length<=50||"Maximum 50 characters allowed",maxLength1000:b=>!b||b.length<=1e3||"Maximum 1000 characters allowed"};je(r,b=>{b&&p()});const p=()=>{i.value="",c.value="",d.value=0,f.value="",m.value="",A.value=!1,s.value&&s.value.resetValidation()},g=()=>{A.value||(r.value=!1)},y=async()=>{console.log(" [Support] Submit support request initiated");const{valid:b}=await s.value.validate();if(!b){console.warn(" [Support] Form validation failed");return}console.log(" [Support] Form validated successfully"),console.log(" [Support] Error Title:",i.value),console.log(" [Support] Description length:",c.value.length,"characters"),A.value=!0,m.value="";try{console.log(" [Support] Step 1: Collecting application logs..."),d.value=20,f.value="Collecting application logs...";let x="",T=!1;try{if(window.require){console.log(" [Support] Electron IPC available, invoking get-support-logs...");const{ipcRenderer:k}=window.require("electron"),S=await k.invoke("get-support-logs");console.log(" [Support] IPC response received:",{success:S.success,fileCount:S.fileCount,compressedSize:S.compressedSize,dataLength:S.data?.length||0,error:S.error}),S.success&&S.data?(x=S.data,T=!0,console.log(" [Support] Logs collected successfully"),console.log(` [Support] Files: ${S.fileCount}, Size: ${Math.round(S.compressedSize/1024)} KB`)):console.warn(" [Support] Could not collect logs:",S.error)}else console.warn(" [Support] Electron IPC not available (running in browser?)")}catch(k){console.error(" [Support] Failed to collect logs:",k)}let D="";if(T&&x){console.log(" [Support] Step 2: Uploading support package..."),d.value=50,f.value="Uploading support package...";const S=`evamed-support-logs-${new Date().toISOString().replace(/[:.]/g,"-")}.zip`;console.log(` [Support] Filename: ${S}`),console.log(` [Support] Base64 data length: ${x.length} characters`);const E=await JAe(x,S);console.log(" [Support] Upload response:",{success:E.success,fileUrl:E.data?.file_url,error:E.error}),E.success?(D=E.data.file_url,console.log(" [Support] Logs uploaded successfully:",D)):console.warn(" [Support] Failed to upload logs:",E.error)}else console.log(" [Support] Skipping upload (no logs available)");console.log(" [Support] Step 3: Opening email client..."),d.value=80,f.value="Opening email client...",await w(D),console.log(" [Support] Step 4: Support request completed successfully"),d.value=100,f.value="Email client opened successfully!",setTimeout(()=>{console.log(" [Support] Closing dialog"),g()},1e3)}catch(x){console.error(" [Support] Support submission error:",x),console.error(" [Support] Error stack:",x.stack),m.value=x.message||"Failed to submit support request. Please try again."}finally{A.value=!1}},w=async b=>{console.log(" [Support] Building email content...");const x=yM.version,T=new Date().toISOString(),D=new Date().toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),k=`[EVAMED Support] ${i.value.trim()} - ${D}`;console.log(" [Support] Email subject:",k);let S=`Support Request from EVAMED Desktop Application

Error Title: ${i.value.trim()}

Description:
${c.value.trim()}

---`;b?(console.log(" [Support] Including support package URL in email"),S+=`
Support Package: ${b}
(Log files attached - available for 24 hours)
`):(console.log(" [Support] No support package URL available"),S+=`
Note: Log files could not be attached automatically.
`),S+=`
App Version: ${x}
Timestamp: ${T}

---
This support request was generated automatically by the EVAMED Desktop Application.`;const E=`mailto:support@evamed.in?subject=${encodeURIComponent(k)}&body=${encodeURIComponent(S)}`;console.log(" [Support] Mailto URL length:",E.length,"characters");try{if(window.require){console.log(" [Support] Using Electron IPC to open email client...");const{ipcRenderer:C}=window.require("electron"),U=await C.invoke("open-external",E);U.success?console.log(" [Support] Successfully opened email client via IPC"):(console.error(" [Support] Failed to open email client via IPC:",U.error),console.log(" [Support] Falling back to window.open..."),window.open(E,"_blank","noopener,noreferrer"))}else console.log(" [Support] Using window.open (no Electron IPC)..."),window.open(E,"_blank","noopener,noreferrer")}catch(C){console.error(" [Support] Failed to use Electron IPC:",C),console.log(" [Support] Falling back to window.open..."),window.open(E,"_blank","noopener,noreferrer")}};return(b,x)=>{const T=I("v-icon"),D=I("v-card-title"),k=I("v-col"),S=I("v-btn"),E=I("v-row"),C=I("v-card"),U=I("v-text-field"),F=I("v-textarea"),L=I("v-alert"),H=I("v-progress-linear"),ue=I("v-expand-transition"),ie=I("v-form"),Q=I("v-card-text"),X=I("v-divider"),le=I("v-spacer"),Z=I("v-card-actions"),re=I("v-dialog");return R(),ve(re,{modelValue:r.value,"onUpdate:modelValue":x[4]||(x[4]=q=>r.value=q),"max-width":"600",persistent:""},{default:u(()=>[l(C,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[l(C,{rounded:"0",class:"pa-3",color:"surfaceContainerHigh"},{default:u(()=>[l(E,{"no-gutters":"",align:"center"},{default:u(()=>[l(k,{cols:"10"},{default:u(()=>[l(D,{class:"pa-0 d-flex align-center"},{default:u(()=>[l(T,{class:"mr-2",color:"primary"},{default:u(()=>[...x[5]||(x[5]=[O("mdi-headset",-1)])]),_:1}),x[6]||(x[6]=O(" Contact Support ",-1))]),_:1})]),_:1}),l(k,{cols:"2",class:"d-flex justify-end"},{default:u(()=>[l(S,{icon:"",size:"small",onClick:g,disabled:A.value,variant:"text"},{default:u(()=>[l(T,null,{default:u(()=>[...x[7]||(x[7]=[O("mdi-close",-1)])]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),l(Q,{class:"pa-4"},{default:u(()=>[l(ie,{ref_key:"formRef",ref:s,modelValue:o.value,"onUpdate:modelValue":x[3]||(x[3]=q=>o.value=q),onSubmit:vn(y,["prevent"])},{default:u(()=>[l(U,{modelValue:i.value,"onUpdate:modelValue":x[0]||(x[0]=q=>i.value=q),label:"Error Title",placeholder:"Brief description of the issue",variant:"outlined",density:"comfortable",rules:[v.required,v.maxLength50],disabled:A.value,counter:"50",maxlength:"50",class:"mb-3"},{"prepend-inner":u(()=>[l(T,{size:"small",color:"error"},{default:u(()=>[...x[8]||(x[8]=[O("mdi-alert-circle-outline",-1)])]),_:1})]),_:1},8,["modelValue","rules","disabled"]),l(F,{modelValue:c.value,"onUpdate:modelValue":x[1]||(x[1]=q=>c.value=q),label:"Issue Description",placeholder:"Please describe the issue you are facing in detail. Include any steps to reproduce the problem.",variant:"outlined",density:"comfortable",rules:[v.required,v.maxLength1000],disabled:A.value,counter:"1000",maxlength:"1000",rows:"6","auto-grow":"",class:"mb-3"},{"prepend-inner":u(()=>[l(T,{size:"small",color:"info"},{default:u(()=>[...x[9]||(x[9]=[O("mdi-text-box-outline",-1)])]),_:1})]),_:1},8,["modelValue","rules","disabled"]),l(L,{type:"info",variant:"tonal",density:"compact",class:"mb-4"},{prepend:u(()=>[l(T,{size:"small"},{default:u(()=>[...x[10]||(x[10]=[O("mdi-information-outline",-1)])]),_:1})]),default:u(()=>[x[11]||(x[11]=h("span",{class:"text-caption"}," Application logs will be automatically attached to help our support team diagnose the issue. ",-1))]),_:1}),l(ue,null,{default:u(()=>[A.value?(R(),Ae("div",ZAe,[l(H,{"model-value":d.value,color:"primary",height:"6",rounded:""},null,8,["model-value"]),h("p",efe,K(f.value),1)])):ye("",!0)]),_:1}),m.value?(R(),ve(L,{key:0,type:"error",variant:"tonal",density:"compact",class:"mb-4",closable:"","onClick:close":x[2]||(x[2]=q=>m.value="")},{default:u(()=>[O(K(m.value),1)]),_:1})):ye("",!0)]),_:1},8,["modelValue"])]),_:1}),l(X),l(Z,{class:"pa-4"},{default:u(()=>[l(le),l(S,{variant:"outlined",onClick:g,disabled:A.value,class:"mr-2"},{default:u(()=>[...x[12]||(x[12]=[O(" Cancel ",-1)])]),_:1},8,["disabled"]),l(S,{variant:"elevated",color:"primary",onClick:y,loading:A.value,disabled:!o.value||A.value},{default:u(()=>[l(T,{start:""},{default:u(()=>[...x[13]||(x[13]=[O("mdi-send",-1)])]),_:1}),x[14]||(x[14]=O(" Submit Support Request ",-1))]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},nfe=qt(tfe,[["__scopeId","data-v-4d5ca3d9"]]),afe={class:"d-flex align-center user-section"},rfe={class:"mx-3"},sfe={class:"d-flex align-center mx-3"},ofe={key:1,class:"d-flex align-center mx-3"},ife={key:3,class:"mx-3 window-controls-container d-flex align-center pa-2"},lfe={key:0,src:bAe,alt:"Exit Fullscreen"},ufe={key:1,src:xAe,alt:"Enter Fullscreen"},cfe={key:0,class:"extension-content"},dfe={class:"d-flex align-center justify-center pa-2"},Afe={__name:"app-bar",setup(e){const t=ra(),n=sl(),{showSuccess:a,showError:r,showSnackbar:s,showInfo:o}=ca(),i=WD()?zf():null,{remoteAccessStatus:c,isReconnecting:A,manualReconnect:d}=EM(),f=V(null),m=V(!1),v=V(!1),p=V(!1),g=V(!1),y=V(0),w=V(!1),b=V(!1),x=ne(()=>A.value?!1:c.value==="disconnected"||c.value==="error"),T=async()=>{if(A.value){console.log(" Manual reconnect blocked - auto-reconnect in progress"),o("Auto-reconnection is already in progress. Please wait...");return}if(b.value){console.log("Reconnect already in progress");return}b.value=!0,console.log(" Manual reconnect initiated from app bar");try{const Oe=await d();if(Oe.success)a(Oe.userMessage||"Link reconnected successfully"),console.log(" Manual reconnect successful:",Oe.tunnelUrl);else{const Me=Oe.userMessage||Oe.error||"Failed to reconnect";s({message:Me,color:"error",timeout:8e3}),console.warn(" Manual reconnect failed:",{error:Oe.error,userMessage:Oe.userMessage})}}catch(Oe){console.error(" Manual reconnect error:",Oe),r("Connection error. Please try again.")}finally{b.value=!1}},D=V(0),k=V(100),S=V(!0),E=V(0),C=V(-1),U=V(1),F=ne(()=>p.value||D.value>=U.value),L=ne(()=>p.value||D.value<=C.value),H=V(!1),ue=V(""),ie=V("info"),Q=V(4e3),X=V(""),le=V(navigator.onLine),Z=(Oe,Me="Unknown")=>{console.error(`App Bar Error (${Me}):`,Oe),Oe?.code==="NETWORK_ERROR"||Oe?.response?.status>=500||!Oe?.response?f.value=`${Me} error. Please refresh the page or contact support.`:(H.value=!0,ue.value=`${Me}: ${Oe?.message||"Unknown error occurred"}`,ie.value="warning")},re=ne(()=>{try{return t.getters["appBar/extensionContent"]}catch(Oe){return Z(Oe,"Extension content loading"),null}}),q=ne(()=>{if(!re.value)return null;try{if(typeof re.value!="object")throw new Error("Invalid extension content format");return re.value.component?{component:re.value.component,props:re.value.props||{}}:(console.warn("Extension content missing component"),null)}catch(Oe){return Z(Oe,"Extension validation"),null}}),P=async()=>{try{const Oe=await Tr(()=>import("./app_bar-DVGh_H18.js"),[],import.meta.url);X.value=Oe.default||Oe}catch{console.warn("App bar image not found, using fallback"),X.value=""}},G=()=>{console.log("Video button clicked - navigating to Appointments/Teleconsult");try{const Oe=n.currentRoute.value;Oe.name==="HomePage"||Oe.path==="/"?(n.replace({name:"HomePage",params:{tab:"1"}}),a("Navigated to Teleconsultations")):(n.push({name:"HomePage",params:{tab:"1"}}),a("Navigated to Teleconsultations"))}catch(Oe){console.error("Error navigating to video section:",Oe),Z(Oe,"Navigation failed")}},J=()=>{console.log("Testing welcome dialog - navigating to /welcome"),n.push("/welcome")},M=async()=>{if(m.value){console.warn("Logout already in progress");return}try{m.value=!0,console.log("Starting logout process...");const Oe=t.dispatch("auth/signOut"),Me=new Promise((rt,ut)=>setTimeout(()=>ut(new Error("Logout timeout")),1e4));await Promise.race([Oe,Me]),console.log("Logout successful"),a("Logged out successfully"),setTimeout(()=>{n.push("/login")},1e3)}catch(Oe){console.error("Logout failed:",Oe),Z(Oe,"Logout failed"),(Oe.message==="Logout timeout"||Oe?.response?.status>=500)&&(console.warn("Force redirecting due to logout failure"),n.push("/login"))}finally{m.value=!1}},te=async()=>{try{console.log("Web mode logout - clearing session..."),i?await i.logout():(localStorage.removeItem("sessionToken"),localStorage.removeItem("permissions"),localStorage.removeItem("isAdmin"),localStorage.removeItem("userName"),localStorage.removeItem("userId"),localStorage.removeItem("features")),console.log("Web mode logout - session cleared, refreshing page"),window.location.reload()}catch(Oe){console.error("Web mode logout error:",Oe),localStorage.removeItem("sessionToken"),localStorage.removeItem("permissions"),localStorage.removeItem("isAdmin"),localStorage.removeItem("userName"),localStorage.removeItem("userId"),localStorage.removeItem("features"),window.location.reload()}},Y=async()=>{if(!g.value)try{if(g.value=!0,H.value=!0,ue.value="Checking for updates...",ie.value="info",Q.value=5e3,window.require){const{ipcRenderer:Oe}=window.require("electron"),Me=(Ue,dt)=>{console.log(" App-bar received update-available event:",dt),ue.value=`Update available: v${dt.version}`,ie.value="info",g.value=!1,Oe.removeListener("update-available",Me),Oe.removeListener("update-not-available",rt),Oe.removeListener("update-error",ut)},rt=(Ue,dt)=>{console.log(" App-bar received update-not-available event:",dt),ue.value="Already up to date",ie.value="success",g.value=!1,Oe.removeListener("update-available",Me),Oe.removeListener("update-not-available",rt),Oe.removeListener("update-error",ut)},ut=(Ue,dt)=>{console.log(" App-bar received update-error event:",dt),ue.value="Failed to check for updates",ie.value="error",g.value=!1,Oe.removeListener("update-available",Me),Oe.removeListener("update-not-available",rt),Oe.removeListener("update-error",ut)};Oe.on("update-available",Me),Oe.on("update-not-available",rt),Oe.on("update-error",ut),console.log(" App-bar initiating update check via IPC...");const Ie=await Oe.invoke("check-for-updates");console.log(" App-bar received IPC result:",Ie),setTimeout(()=>{g.value&&(ue.value="Update check timed out",ie.value="warning",g.value=!1,Oe.removeListener("update-available",Me),Oe.removeListener("update-not-available",rt),Oe.removeListener("update-error",ut))},3e4)}else ue.value="Update check not available",ie.value="warning",g.value=!1}catch(Oe){console.error("Update check failed:",Oe),ue.value="Failed to check for updates",ie.value="error",g.value=!1}},W=async()=>{if(!p.value)try{if(p.value=!0,window.require){const{ipcRenderer:Oe}=window.require("electron"),Me=await Oe.invoke("toggle-fullscreen");if(Me.success){S.value=Me.isFullscreen;const rt=Me.isFullscreen?"Entered fullscreen mode":"Exited fullscreen mode";a(rt),console.log(`Fullscreen toggled: ${Me.wasFullscreen}  ${Me.isFullscreen}`),Me.isFullscreen||setTimeout(()=>{a("You can now minimize using the window controls")},2e3)}else throw new Error(Me.error||"Failed to toggle fullscreen")}else throw new Error("Electron IPC not available")}catch(Oe){console.error("Failed to toggle fullscreen:",Oe),Z(Oe,"Fullscreen toggle failed")}finally{p.value=!1}},ee=async()=>{if(!p.value)try{if(p.value=!0,window.require){const{ipcRenderer:Oe}=window.require("electron"),Me=await Oe.invoke("window-close");if(Me.success)console.log("Window close initiated");else throw new Error(Me.error||"Failed to close window")}else throw new Error("Electron IPC not available")}catch(Oe){console.error("Failed to close window:",Oe),Z(Oe,"Close failed")}finally{p.value=!1}},ae=async()=>{if(!(p.value||D.value>=U.value))try{if(p.value=!0,window.require){const{ipcRenderer:Oe}=window.require("electron"),Me=await Oe.invoke("zoom-in");if(Me.success)D.value=Me.zoomLevel,k.value=Me.zoomFactor,a(`Zoomed in to ${Me.zoomFactor}%`),console.log(`Zoom in successful: ${Me.zoomFactor}%`);else throw new Error(Me.error||"Failed to zoom in")}else throw new Error("Electron IPC not available")}catch(Oe){console.error("Failed to zoom in:",Oe),Z(Oe,"Zoom in failed")}finally{p.value=!1}},oe=async()=>{if(!(p.value||D.value<=C.value))try{if(p.value=!0,window.require){const{ipcRenderer:Oe}=window.require("electron"),Me=await Oe.invoke("zoom-out");if(Me.success)D.value=Me.zoomLevel,k.value=Me.zoomFactor,a(`Zoomed out to ${Me.zoomFactor}%`),console.log(`Zoom out successful: ${Me.zoomFactor}%`);else throw new Error(Me.error||"Failed to zoom out")}else throw new Error("Electron IPC not available")}catch(Oe){console.error("Failed to zoom out:",Oe),Z(Oe,"Zoom out failed")}finally{p.value=!1}},j=async()=>{try{if(window.require){const{ipcRenderer:Oe}=window.require("electron"),Me=await Oe.invoke("get-zoom-level");Me.success&&(D.value=Me.zoomLevel,k.value=Me.zoomFactor,E.value=Me.zoomLevel,C.value=E.value-1,U.value=E.value+1,console.log(`Initial zoom state: level ${Me.zoomLevel} (${Me.zoomFactor}%)`),console.log(`Zoom limits: ${C.value} to ${U.value}`));const rt=await Oe.invoke("get-fullscreen-status");rt.success&&(S.value=rt.isFullscreen)}}catch(Oe){console.warn("Failed to get initial window state:",Oe)}},ce=()=>{le.value=!0,f.value?.includes("network")&&(f.value=null,a("Connection restored"))},de=()=>{le.value=!1,H.value=!0,ue.value="You are currently offline. Some features may not work.",ie.value="warning",Q.value=0},_e=Oe=>{Ce(Oe,"selector"),setTimeout(()=>{Ee.value.has("selector")&&(console.log("Auto-retrying selector component..."),Be("selector"))},3e3)},Re=Oe=>{Ce(Oe,"extension")},be=Oe=>{console.warn("Logout icon failed to load:",Oe)},Ee=V(new Set),Ce=(Oe,Me)=>{console.error(`Child component error in ${Me}:`,Oe),Ee.value.add(Me),Ee.value.size>2?f.value="Multiple component failures detected. Please refresh the page.":Z(Oe,Me)},Be=Oe=>{Ee.value.delete(Oe),y.value+=1},Te=V(null);return dn(async()=>{try{await P(),await j(),window.addEventListener("online",ce),window.addEventListener("offline",de),Te.value=t.watch(Oe=>Oe.errors,Oe=>{Oe?.appBar&&(Z(Oe.appBar,"Store error"),t.commit("clearError","appBar"))},{deep:!0}),console.log("App bar initialized successfully")}catch(Oe){Z(Oe,"App bar initialization")}}),va(()=>{try{window.removeEventListener("online",ce),window.removeEventListener("offline",de),Te.value&&Te.value(),m.value=!1,g.value=!1,H.value=!1,f.value=null,console.log("App bar cleanup completed")}catch(Oe){console.error("App bar cleanup error:",Oe)}}),je(()=>n.currentRoute.value.path,()=>{f.value&&!f.value.includes("contact support")&&(f.value=null)}),(Oe,Me)=>{const rt=I("v-alert"),ut=I("v-spacer"),Ie=I("v-btn"),Ue=I("v-icon"),dt=I("v-tooltip"),Ft=I("v-progress-circular"),it=I("v-chip"),qe=I("v-card"),yt=I("v-app-bar"),mt=I("v-snackbar");return R(),Ae("div",null,[f.value?(R(),ve(rt,{key:0,type:"error",variant:"tonal",closable:"","onClick:close":Me[0]||(Me[0]=xt=>f.value=null),class:"ma-2",density:"compact"},{default:u(()=>[O(K(f.value),1)]),_:1})):ye("",!0),l(yt,{elevation:"1",app:"",extended:!!q.value,density:"compact",class:"professional-app-bar",image:X.value},{default:u(()=>[l(ut),ma(l(Ie,{variant:"outlined",color:"warning",size:"small",onClick:J,class:"mx-2","prepend-icon":"mdi-test-tube"},{default:u(()=>[...Me[6]||(Me[6]=[O(" Test Welcome ",-1)])]),_:1},512),[[ii,!1]]),h("div",afe,[l(dt,{text:"Start teleconsultation",location:"bottom"},{activator:u(({props:xt})=>[l(Ie,Pe({icon:"",onClick:G},xt,{class:"video-btn mx-3",variant:"text",size:"small",disabled:v.value,loading:v.value,"aria-label":"Open Appointments and Teleconsult page"}),{default:u(()=>[l(Ue,{size:"24"},{default:u(()=>[h("img",{src:yAe,alt:"Video Consultation",class:"video-icon",onError:be},null,32)]),_:1})]),_:1},16,["disabled","loading"])]),_:1}),Ee.value.has("selector")?(R(),Ae("div",ofe,[l(it,{variant:"outlined",size:"small",color:"warning",class:"mr-2"},{default:u(()=>[...Me[8]||(Me[8]=[O(" Selection unavailable ",-1)])]),_:1}),l(Ie,{size:"x-small",variant:"text",onClick:Me[1]||(Me[1]=xt=>Be("selector")),class:"text-caption"},{default:u(()=>[...Me[9]||(Me[9]=[O(" Retry ",-1)])]),_:1})])):(R(),ve(hS,{key:0},{default:u(()=>[h("div",rfe,[(R(),ve(QAe,{onError:_e,key:y.value}))])]),fallback:u(()=>[h("div",sfe,[l(Ft,{indeterminate:"",size:"20",width:"2",color:"primary"}),Me[7]||(Me[7]=h("span",{class:"ml-2 text-caption"},"Loading...",-1))])]),_:1})),Qe(Ra)()?(R(),ve(qe,{key:2,variant:"outlined",class:"mx-3 status-indicators-container d-flex align-center pa-2",density:"compact",style:{"border-color":"rgba(0, 0, 0, 0.15) !important"}},{default:u(()=>[l(KAe),l(dt,{text:b.value?"Reconnecting...":"Reconnect Link",location:"bottom"},{activator:u(({props:xt})=>[x.value?(R(),ve(Ie,Pe({key:0},xt,{size:"x-small",variant:"outlined",color:b.value?"warning":"error",class:"ml-2 reconnect-btn",loading:b.value,disabled:b.value,onClick:T}),{default:u(()=>[l(Ue,{size:"14",class:"mr-1"},{default:u(()=>[...Me[10]||(Me[10]=[O("mdi-refresh",-1)])]),_:1}),O(" "+K(b.value?"":"Reconnect"),1)]),_:1},16,["color","loading","disabled"])):ye("",!0)]),_:1},8,["text"])]),_:1})):ye("",!0),Qe(Ra)()?(R(),Ae("div",ife,[l(dt,{text:"Zoom Out",location:"bottom"},{activator:u(({props:xt})=>[l(Ie,Pe(xt,{icon:"",size:"small",variant:"text",class:"control-btn mx-1",onClick:oe,disabled:L.value}),{default:u(()=>[l(Ue,{class:"control-icon"},{default:u(()=>[...Me[11]||(Me[11]=[h("img",{src:_Ae,alt:"Zoom Out"},null,-1)])]),_:1})]),_:1},16,["disabled"])]),_:1}),l(dt,{text:"Zoom In",location:"bottom"},{activator:u(({props:xt})=>[l(Ie,Pe(xt,{icon:"",size:"small",variant:"text",class:"control-btn mx-1",onClick:ae,disabled:F.value}),{default:u(()=>[l(Ue,{class:"control-icon"},{default:u(()=>[...Me[12]||(Me[12]=[h("img",{src:wAe,alt:"Zoom In"},null,-1)])]),_:1})]),_:1},16,["disabled"])]),_:1}),l(dt,{text:S.value?"Exit Fullscreen":"Enter Fullscreen",location:"bottom"},{activator:u(({props:xt})=>[l(Ie,Pe(xt,{icon:"",size:"small",variant:"text",class:"control-btn mx-1",onClick:W,disabled:p.value}),{default:u(()=>[l(Ue,{class:"control-icon"},{default:u(()=>[S.value?(R(),Ae("img",lfe)):(R(),Ae("img",ufe))]),_:1})]),_:1},16,["disabled"])]),_:1},8,["text"]),Me[14]||(Me[14]=h("div",{class:"mx-3"},null,-1)),l(dt,{text:"Close",location:"bottom"},{activator:u(({props:xt})=>[l(Ie,Pe(xt,{icon:"",size:"small",variant:"text",class:"control-btn close-btn",onClick:ee,disabled:p.value}),{default:u(()=>[l(Ue,{class:"control-icon close-icon"},{default:u(()=>[...Me[13]||(Me[13]=[h("img",{src:CAe,alt:"Close"},null,-1)])]),_:1})]),_:1},16,["disabled"])]),_:1})])):ye("",!0),l(dt,{text:"Contact Support",location:"bottom"},{activator:u(({props:xt})=>[l(Ie,Pe({icon:"",onClick:Me[2]||(Me[2]=an=>w.value=!0)},xt,{class:"support-btn mx-3",variant:"text",size:"small","aria-label":"Contact support"}),{default:u(()=>[l(Ue,{size:"20",class:"support-icon"},{default:u(()=>[...Me[15]||(Me[15]=[O("mdi-headset",-1)])]),_:1})]),_:1},16)]),_:1}),Qe(Ra)()?(R(),ve(dt,{key:4,text:"Check for Updates",location:"bottom"},{activator:u(({props:xt})=>[l(Ie,Pe({icon:"",onClick:Y},xt,{class:"updates-btn mx-3",variant:"text",size:"small",disabled:g.value,loading:g.value,"aria-label":"Check for application updates"}),{default:u(()=>[l(Ue,{size:"20",class:"updates-icon"},{default:u(()=>[...Me[16]||(Me[16]=[O("mdi-package-variant",-1)])]),_:1})]),_:1},16,["disabled","loading"])]),_:1})):ye("",!0),Qe(Ra)()?(R(),ve(dt,{key:5,text:"Logout",location:"bottom"},{activator:u(({props:xt})=>[l(Ie,Pe({icon:"",onClick:M},xt,{class:"logout-btn mx-3",variant:"text",size:"small",disabled:m.value,loading:m.value,"aria-label":"Logout from application"}),{default:u(()=>[l(Ue,{size:"20"},{default:u(()=>[h("img",{src:K3,alt:"Logout",class:"logout-icon",onError:be},null,32)]),_:1})]),_:1},16,["disabled","loading"])]),_:1})):ye("",!0),Qe(WD)()?(R(),ve(dt,{key:6,text:"Logout",location:"bottom"},{activator:u(({props:xt})=>[l(Ie,Pe({icon:"",onClick:te},xt,{class:"logout-btn mx-3",variant:"text",size:"small","aria-label":"Logout from application"}),{default:u(()=>[l(Ue,{size:"20"},{default:u(()=>[h("img",{src:K3,alt:"Logout",class:"logout-icon",onError:be},null,32)]),_:1})]),_:1},16)]),_:1})):ye("",!0)])]),extension:u(()=>[q.value?(R(),Ae("div",cfe,[(R(),ve(hS,null,{default:u(()=>[(R(),ve(tw(q.value.component),Pe(q.value.props||{},{onError:Re}),null,16))]),fallback:u(()=>[h("div",dfe,[l(Ft,{indeterminate:"",size:"16",width:"2",color:"primary"}),Me[17]||(Me[17]=h("span",{class:"ml-2 text-caption"},"Loading extension...",-1))])]),_:1}))])):ye("",!0)]),_:1},8,["extended","image"]),l(mt,{modelValue:H.value,"onUpdate:modelValue":Me[4]||(Me[4]=xt=>H.value=xt),color:ie.value,timeout:Q.value,location:"top"},{actions:u(()=>[l(Ie,{variant:"text",onClick:Me[3]||(Me[3]=xt=>H.value=!1)},{default:u(()=>[...Me[18]||(Me[18]=[O(" Close ",-1)])]),_:1})]),default:u(()=>[O(K(ue.value)+" ",1)]),_:1},8,["modelValue","color","timeout"]),l(nfe,{modelValue:w.value,"onUpdate:modelValue":Me[5]||(Me[5]=xt=>w.value=xt)},null,8,["modelValue"])])}}},ffe=qt(Afe,[["__scopeId","data-v-175fc1de"]]),mfe={name:"UpdateNotification",data(){return{updateAvailable:!1,downloadInProgress:!1,readyToInstall:!1,showError:!1,showSuccess:!1,errorMessage:"",successMessage:"",updateInfo:null,downloadProgress:0,downloadSpeed:0,downloadTransferred:0,downloadTotal:0,isDownloading:!1,isCheckingUpdate:!1,isDevelopment:!1,autoRestartEnabled:!0,canRetry:!1,retryCount:0,lastUpdateCheck:null,currentVersion:"Loading...",showUpdateStatusDialog:!1}},mounted(){this.setupUpdateListeners(),this.loadCurrentVersion()},beforeUnmount(){this.removeUpdateListeners()},computed:{},methods:{setupUpdateListeners(){if(!window.require)return;const{ipcRenderer:e}=window.require("electron");e.on("update-checking",this.onUpdateChecking),e.on("update-available",this.onUpdateAvailable),e.on("update-not-available",this.onUpdateNotAvailable),e.on("download-progress",this.onDownloadProgress),e.on("update-downloaded",this.onUpdateDownloaded),e.on("update-error",this.onUpdateError),e.on("server-ready",this.onServerReady),e.on("download-cancelled",this.onDownloadCancelled)},removeUpdateListeners(){if(!window.require)return;const{ipcRenderer:e}=window.require("electron");e.removeListener("update-checking",this.onUpdateChecking),e.removeListener("update-available",this.onUpdateAvailable),e.removeListener("update-not-available",this.onUpdateNotAvailable),e.removeListener("download-progress",this.onDownloadProgress),e.removeListener("update-downloaded",this.onUpdateDownloaded),e.removeListener("update-error",this.onUpdateError),e.removeListener("server-ready",this.onServerReady),e.removeListener("download-cancelled",this.onDownloadCancelled)},onUpdateChecking(){console.log("Checking for updates..."),this.lastUpdateCheck=new Date,this.isCheckingUpdate||(this.isCheckingUpdate=!0)},onUpdateAvailable(e,t){console.log("Update available:",t),this.updateInfo=t,this.updateAvailable=!0,this.isCheckingUpdate=!1},onUpdateNotAvailable(e,t){console.log("No updates available",t),this.isCheckingUpdate=!1,this.showUpdateStatusDialog=!0},onDownloadProgress(e,t){console.log("Download progress:",t),this.downloadProgress=t.percent||0,this.downloadSpeed=t.bytesPerSecond||0,this.downloadTransferred=t.transferred||0,this.downloadTotal=t.total||0,!this.downloadInProgress&&this.isDownloading&&(console.log("Showing download progress dialog"),this.downloadInProgress=!0,this.updateAvailable=!1),this.downloadProgress>0&&this.downloadProgress%25===0&&console.log(`Download ${Math.round(this.downloadProgress)}% complete`)},async onUpdateDownloaded(e,t){console.log("Update downloaded:",t),this.downloadInProgress=!1,this.isDownloading=!1,this.autoRestartEnabled?(this.successMessage=`Update ${t.version} downloaded successfully! Restarting application...`,this.showSuccess=!0,setTimeout(async()=>{console.log("Auto-restarting application to install update..."),await this.installNow()},2e3)):(this.readyToInstall=!0,this.successMessage=`Update ${t.version} downloaded successfully!`,this.showSuccess=!0)},onUpdateError(e,t){console.error("Update error:",t),this.showError=!0,t.errorType==="checksum_mismatch"||t.code==="ERR_CHECKSUM_MISMATCH"?(this.errorMessage=t.message||"Download verification failed. The file may be corrupted. Please try downloading again.",this.canRetry=t.canRetry!==!1,this.retryCount=t.retryCount||0):(this.errorMessage=`Update failed: ${t.message}`,this.canRetry=!1),this.isDownloading=!1,this.isCheckingUpdate=!1,this.downloadInProgress=!1,this.downloadProgress=0,this.downloadSpeed=0,this.downloadTransferred=0,this.downloadTotal=0},onServerReady(){console.log("Server is ready")},onDownloadCancelled(){console.log("Download was cancelled by main process"),this.downloadInProgress=!1,this.isDownloading=!1,this.downloadProgress=0,this.downloadSpeed=0,this.downloadTransferred=0,this.downloadTotal=0},async loadCurrentVersion(){try{if(!window.require)return;const{ipcRenderer:e}=window.require("electron"),t=await e.invoke("get-app-config");this.currentVersion=t.version||"Unknown"}catch(e){console.error("Failed to load current version:",e),this.currentVersion="Unknown"}},async checkForUpdates(){if(!window.require)return;const{ipcRenderer:e}=window.require("electron");try{this.isCheckingUpdate=!0,this.lastUpdateCheck=new Date;const t=await e.invoke("check-for-updates");console.log("Update check result:",t),setTimeout(()=>{this.isCheckingUpdate&&(this.isCheckingUpdate=!1,this.updateAvailable)},2e3)}catch(t){console.error("Failed to check for updates:",t),this.showError=!0,this.errorMessage="Failed to check for updates",this.isCheckingUpdate=!1}},async downloadUpdate(){if(!window.require)return;const{ipcRenderer:e}=window.require("electron");try{this.isDownloading=!0,this.errorMessage="",this.showError=!1,console.log("Starting update download...");const t=await e.invoke("download-update");if(t.success)console.log("Download started successfully");else throw new Error(t.error||"Failed to start download")}catch(t){console.error("Failed to start download:",t),this.showError=!0,this.errorMessage=`Failed to start download: ${t.message}`,this.isDownloading=!1}},dismissUpdate(){this.updateAvailable=!1,this.updateInfo=null},async installNow(){if(!window.require){console.error("Electron IPC not available"),this.showError=!0,this.errorMessage="Cannot restart application - Electron IPC not available";return}const{ipcRenderer:e}=window.require("electron");try{console.log("Requesting application restart and update installation..."),await e.invoke("quit-and-install"),console.warn("Application did not quit as expected")}catch(t){console.error("Failed to install update:",t),this.showError=!0,this.errorMessage=`Failed to install update: ${t.message}`,this.readyToInstall=!0}},installLater(){this.readyToInstall=!1},formatReleaseNotes(e){return e?e.replace(/\n/g,"<br>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/- (.*?)(<br>|$)/g," $1$2"):""},formatDate(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})},formatBytes(e){if(e===0)return"0 B";const t=1024,n=["B","KB","MB","GB"],a=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,a)).toFixed(1))+" "+n[a]},formatTimeRemaining(){if(this.downloadSpeed===0||this.downloadProgress===0||this.downloadProgress===100)return"Calculating...";const t=(this.downloadTotal-this.downloadTransferred)*1e3/(this.downloadSpeed*1e3),n=Math.floor(t/3600),a=Math.floor(t%3600/60),r=Math.floor(t%60);return`${n.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`},async cancelDownload(){try{if(this.downloadInProgress=!1,this.isDownloading=!1,this.downloadProgress=0,this.downloadSpeed=0,this.downloadTransferred=0,this.downloadTotal=0,window.require){const{ipcRenderer:e}=window.require("electron");await e.invoke("cancel-update-download"),console.log("Download cancelled successfully"),this.successMessage="Download cancelled successfully",this.showSuccess=!0}}catch(e){console.error("Failed to cancel download:",e),this.showError=!0,this.errorMessage="Failed to cancel download"}},async retryDownload(){if(!window.require)return;const{ipcRenderer:e}=window.require("electron");try{this.showError=!1,this.errorMessage="",console.log("Cleaning up corrupted download files...");const t=await e.invoke("cleanup-corrupted-download");t.success?console.log("Download cache cleared successfully"):console.warn("Failed to cleanup download cache:",t.error),await new Promise(n=>setTimeout(n,1e3)),await this.downloadUpdate()}catch(t){console.error("Failed to retry download:",t),this.showError=!0,this.errorMessage="Failed to retry download. Please try again."}},handleUpdateCheckEvent(){console.log("Updates check triggered from external source"),this.checkForUpdates()},formatLastCheckTime(e){if(!e)return"Never";const n=new Date-e,a=Math.floor(n/6e4),r=Math.floor(n/36e5),s=Math.floor(n/864e5);return s>0?`${s} day${s>1?"s":""} ago`:r>0?`${r} hour${r>1?"s":""} ago`:a>0?`${a} minute${a>1?"s":""} ago`:"Just now"}}},vfe={key:0},hfe={class:"mb-3"},pfe={key:0,class:"mb-3"},gfe=["innerHTML"],yfe={key:1,class:"mb-2"},_fe={class:"text--secondary"},wfe={key:2,class:"mb-2"},bfe={class:"text--secondary"},xfe={class:"text-center mb-3"},Cfe={class:"mt-3 text-center text--secondary"},Sfe={key:0};function Efe(e,t,n,a,r,s){const o=I("v-icon"),i=I("v-card-title"),c=I("v-card-text"),A=I("v-spacer"),d=I("v-btn"),f=I("v-card-actions"),m=I("v-card"),v=I("v-dialog"),p=I("v-progress-circular"),g=I("v-progress-linear"),y=I("v-snackbar");return R(),Ae("div",null,[l(v,{modelValue:r.updateAvailable,"onUpdate:modelValue":t[0]||(t[0]=w=>r.updateAvailable=w),"max-width":"500",persistent:""},{default:u(()=>[l(m,null,{default:u(()=>[l(i,{class:"text-h5 primary white--text"},{default:u(()=>[l(o,{left:"",color:"white"},{default:u(()=>[...t[7]||(t[7]=[O("mdi-download",-1)])]),_:1}),t[8]||(t[8]=O(" Update Available ",-1))]),_:1}),l(c,{class:"pt-4"},{default:u(()=>[r.updateInfo?(R(),Ae("div",vfe,[h("p",hfe,[h("strong",null,"Version "+K(r.updateInfo.version),1),t[9]||(t[9]=O(" is now available! ",-1))]),r.updateInfo.releaseNotes?(R(),Ae("div",pfe,[t[10]||(t[10]=h("h4",{class:"mb-2"},"What's New:",-1)),h("div",{class:"release-notes",innerHTML:s.formatReleaseNotes(r.updateInfo.releaseNotes)},null,8,gfe)])):ye("",!0),r.updateInfo.releaseDate?(R(),Ae("div",yfe,[h("small",_fe," Released: "+K(s.formatDate(r.updateInfo.releaseDate)),1)])):ye("",!0),r.updateInfo.files&&r.updateInfo.files.length>0?(R(),Ae("div",wfe,[h("small",bfe," Size: "+K(s.formatBytes(r.updateInfo.files[0].size||0)),1)])):ye("",!0)])):ye("",!0),t[11]||(t[11]=h("p",{class:"mb-0"}," Would you like to download and install the update now? ",-1))]),_:1}),l(f,null,{default:u(()=>[l(A),l(d,{text:"",onClick:s.dismissUpdate,class:"btn-hover-base"},{default:u(()=>[...t[12]||(t[12]=[O(" Later ",-1)])]),_:1},8,["onClick"]),l(d,{color:"primary",onClick:s.downloadUpdate,loading:r.isDownloading,class:"btn-hover-enhanced"},{default:u(()=>[...t[13]||(t[13]=[O(" Download & Install ",-1)])]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(v,{modelValue:r.downloadInProgress,"onUpdate:modelValue":t[1]||(t[1]=w=>r.downloadInProgress=w),"max-width":"400",persistent:""},{default:u(()=>[l(m,null,{default:u(()=>[l(i,{class:"text-h6"},{default:u(()=>[l(o,{left:""},{default:u(()=>[...t[14]||(t[14]=[O("mdi-download",-1)])]),_:1}),t[15]||(t[15]=O(" Downloading Update ",-1))]),_:1}),l(c,null,{default:u(()=>[h("div",xfe,[l(p,{value:r.downloadProgress,size:"80",width:"8",color:"primary"},{default:u(()=>[O(K(Math.round(r.downloadProgress))+"% ",1)]),_:1},8,["value"])]),l(g,{value:r.downloadProgress,color:"primary",height:"6",rounded:""},null,8,["value"]),h("div",Cfe,[h("small",null,[O(K(s.formatBytes(r.downloadTransferred))+" / "+K(s.formatBytes(r.downloadTotal))+" ",1),t[16]||(t[16]=h("br",null,null,-1)),O(" Speed: "+K(s.formatBytes(r.downloadSpeed))+"/s ",1),t[17]||(t[17]=h("br",null,null,-1)),r.downloadSpeed>0?(R(),Ae("span",Sfe," ETA: "+K(s.formatTimeRemaining()),1)):ye("",!0)])])]),_:1}),l(f,null,{default:u(()=>[l(A),l(d,{text:"",onClick:s.cancelDownload,disabled:r.downloadProgress>90},{default:u(()=>[...t[18]||(t[18]=[O(" Cancel ",-1)])]),_:1},8,["onClick","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(v,{modelValue:r.readyToInstall,"onUpdate:modelValue":t[2]||(t[2]=w=>r.readyToInstall=w),"max-width":"400",persistent:""},{default:u(()=>[l(m,null,{default:u(()=>[l(i,{class:"text-h5 success white--text"},{default:u(()=>[l(o,{left:"",color:"white"},{default:u(()=>[...t[19]||(t[19]=[O("mdi-check-circle",-1)])]),_:1}),t[20]||(t[20]=O(" Update Ready ",-1))]),_:1}),l(c,{class:"pt-4"},{default:u(()=>[...t[21]||(t[21]=[h("p",null," The update has been downloaded successfully. The application will restart to apply the update. ",-1),h("p",{class:"mb-0"},[h("strong",null,"Note:"),O(" Any unsaved work will be lost. ")],-1)])]),_:1}),l(f,null,{default:u(()=>[l(A),l(d,{text:"",onClick:s.installLater},{default:u(()=>[...t[22]||(t[22]=[O(" Restart Later ",-1)])]),_:1},8,["onClick"]),l(d,{color:"success",onClick:s.installNow},{default:u(()=>[...t[23]||(t[23]=[O(" Restart Now ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(y,{modelValue:r.showError,"onUpdate:modelValue":t[4]||(t[4]=w=>r.showError=w),color:"error",timeout:"0",top:""},{action:u(({attrs:w})=>[r.canRetry?(R(),ve(d,Pe({key:0,text:""},w,{onClick:s.retryDownload}),{default:u(()=>[...t[25]||(t[25]=[O(" Retry ",-1)])]),_:1},16,["onClick"])):ye("",!0),l(d,Pe({text:""},w,{onClick:t[3]||(t[3]=b=>r.showError=!1)}),{default:u(()=>[...t[26]||(t[26]=[O(" Close ",-1)])]),_:1},16)]),default:u(()=>[l(o,{left:""},{default:u(()=>[...t[24]||(t[24]=[O("mdi-alert",-1)])]),_:1}),O(" "+K(r.errorMessage)+" ",1)]),_:1},8,["modelValue"]),l(y,{modelValue:r.showSuccess,"onUpdate:modelValue":t[6]||(t[6]=w=>r.showSuccess=w),color:"success",timeout:"4000",top:""},{action:u(({attrs:w})=>[l(d,Pe({text:""},w,{onClick:t[5]||(t[5]=b=>r.showSuccess=!1)}),{default:u(()=>[...t[28]||(t[28]=[O(" Close ",-1)])]),_:1},16)]),default:u(()=>[l(o,{left:""},{default:u(()=>[...t[27]||(t[27]=[O("mdi-check-circle",-1)])]),_:1}),O(" "+K(r.successMessage)+" ",1)]),_:1},8,["modelValue"])])}const Bfe=qt(mfe,[["render",Efe],["__scopeId","data-v-b62dff2a"]]),kfe={__name:"App",setup(e){const t=ra(),n=sl(),{snackbar:a}=ca(),r=V(!1),s=Ra(),o=ne(()=>t.getters["auth/isAuthenticated"]),i=V(!!localStorage.getItem("desktopSessionToken")),c=zf(),A=ne(()=>{const p=!!localStorage.getItem("sessionToken"),g=c.isAuthenticated.value;return p&&g}),d=ne(()=>{if(s)return o.value&&i.value;{const p=A.value;return console.log("[App.vue] Web authentication check:",{hasToken:!!localStorage.getItem("sessionToken"),computedAuth:c.isAuthenticated.value,isFullyAuthenticated:p}),p}});s&&window.addEventListener("storage",p=>{p.key==="desktopSessionToken"&&(i.value=!!p.newValue)}),n.afterEach(()=>{s&&(i.value=!!localStorage.getItem("desktopSessionToken"))});const f=ne(()=>{const p=n.currentRoute.value.path,g=["/","/login","/desktop/passcode","/web/login"],y=d.value&&!g.includes(p);return console.log("[App.vue] showNavigation check:",{currentPath:p,isFullyAuthenticated:d.value,isExcluded:g.includes(p),shouldShow:y}),y});window.addEventListener("collapse-side-nav",p=>m(p.detail)),dn(async()=>{console.log("App mounted")});const m=p=>{r.value=p},v=p=>{t.dispatch("snackbar/showSnackbar",p)};return(p,g)=>{const y=I("router-view"),w=I("v-btn"),b=I("v-snackbar"),x=I("v-app");return R(),ve(x,null,{default:u(()=>[f.value?(R(),ve(gAe,{key:0,collapsed:r.value},null,8,["collapsed"])):ye("",!0),f.value?(R(),ve(ffe,{key:1})):ye("",!0),l(y,null,{default:u(({Component:T})=>[(R(),ve(EZ,null,[(R(),ve(tw(T),{key:p.$route.path}))],1024))]),_:1}),l(Bfe,{onShowSnackbar:v}),l(b,{modelValue:Qe(a).show,"onUpdate:modelValue":g[1]||(g[1]=T=>Qe(a).show=T),color:Qe(a).color,timeout:Qe(a).timeout,top:"",right:""},{action:u(({attrs:T})=>[l(w,Pe({text:""},T,{onClick:g[0]||(g[0]=D=>Qe(t).dispatch("snackbar/hideSnackbar"))}),{default:u(()=>[...g[2]||(g[2]=[O(" Close ",-1)])]),_:1},16)]),default:u(()=>[O(K(Qe(a).message)+" ",1)]),_:1},8,["modelValue","color","timeout"])]),_:1})}}},_g="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17.65,6.35C16.2,4.9%2014.21,4%2012,4A8,8%200%200,0%204,12A8,8%200%200,0%2012,20C15.73,20%2018.84,17.45%2019.73,14H17.65C16.83,16.33%2014.61,18%2012,18A6,6%200%200,1%206,12A6,6%200%200,1%2012,6C13.66,6%2015.14,6.69%2016.22,7.78L13,11H20V4L17.65,6.35Z'%20/%3e%3c/svg%3e",Tfe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M5%206C3.9%206%203%206.9%203%208S3.9%2010%205%2010%207%209.11%207%208%206.11%206%205%206M12%204C10.9%204%2010%204.89%2010%206S10.9%208%2012%208%2014%207.11%2014%206%2013.11%204%2012%204M19%202C17.9%202%2017%202.9%2017%204S17.9%206%2019%206%2021%205.11%2021%204%2020.11%202%2019%202M3.5%2011C2.67%2011%202%2011.67%202%2012.5V17H3V22H7V17H8V12.5C8%2011.67%207.33%2011%206.5%2011H3.5M10.5%209C9.67%209%209%209.67%209%2010.5V15H10V20H14V15H15V10.5C15%209.67%2014.33%209%2013.5%209H10.5M17.5%207C16.67%207%2016%207.67%2016%208.5V13H17V18H21V13H22V8.5C22%207.67%2021.33%207%2020.5%207H17.5Z'%20/%3e%3c/svg%3e",Ife="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M21.1,12.5L22.5,13.91L15.97,20.5L12.5,17L13.9,15.59L15.97,17.67L21.1,12.5M10,17L13,20H3V18C3,15.79%206.58,14%2011,14L12.89,14.11L10,17M11,4A4,4%200%200,1%2015,8A4,4%200%200,1%2011,12A4,4%200%200,1%207,8A4,4%200%200,1%2011,4Z'%20/%3e%3c/svg%3e",Ffe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M10%204A4%204%200%200%200%206%208A4%204%200%200%200%2010%2012A4%204%200%200%200%2014%208A4%204%200%200%200%2010%204M17.5%2013C15%2013%2013%2015%2013%2017.5C13%2020%2015%2022%2017.5%2022C20%2022%2022%2020%2022%2017.5C22%2015%2020%2013%2017.5%2013M10%2014C5.58%2014%202%2015.79%202%2018V20H11.5A6.5%206.5%200%200%201%2011%2017.5A6.5%206.5%200%200%201%2011.95%2014.14C11.32%2014.06%2010.68%2014%2010%2014M17.5%2014.5C19.16%2014.5%2020.5%2015.84%2020.5%2017.5C20.5%2018.06%2020.35%2018.58%2020.08%2019L16%2014.92C16.42%2014.65%2016.94%2014.5%2017.5%2014.5M14.92%2016L19%2020.08C18.58%2020.35%2018.06%2020.5%2017.5%2020.5C15.84%2020.5%2014.5%2019.16%2014.5%2017.5C14.5%2016.94%2014.65%2016.42%2014.92%2016Z'%20/%3e%3c/svg%3e",Pfe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M10.63,14.1C12.23,10.58%2016.38,9.03%2019.9,10.63C23.42,12.23%2024.97,16.38%2023.37,19.9C22.24,22.4%2019.75,24%2017,24C14.3,24%2011.83,22.44%2010.67,20H1V18C1.06,16.86%201.84,15.93%203.34,15.18C4.84,14.43%206.72,14.04%209,14C9.57,14%2010.11,14.05%2010.63,14.1V14.1M9,4C10.12,4.03%2011.06,4.42%2011.81,5.17C12.56,5.92%2012.93,6.86%2012.93,8C12.93,9.14%2012.56,10.08%2011.81,10.83C11.06,11.58%2010.12,11.95%209,11.95C7.88,11.95%206.94,11.58%206.19,10.83C5.44,10.08%205.07,9.14%205.07,8C5.07,6.86%205.44,5.92%206.19,5.17C6.94,4.42%207.88,4.03%209,4M17,22A5,5%200%200,0%2022,17A5,5%200%200,0%2017,12A5,5%200%200,0%2012,17A5,5%200%200,0%2017,22M16,14H17.5V16.82L19.94,18.23L19.19,19.53L16,17.69V14Z'%20/%3e%3c/svg%3e",eC="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M11.15,15.18L9.73,13.77L11.15,12.35L12.56,13.77L13.97,12.35L12.56,10.94L13.97,9.53L15.39,10.94L16.8,9.53L13.97,6.7L6.9,13.77L9.73,16.6L11.15,15.18M3.08,19L6.2,15.89L4.08,13.77L13.97,3.87L16.1,6L17.5,4.58L16.1,3.16L17.5,1.75L21.75,6L20.34,7.4L18.92,6L17.5,7.4L19.63,9.53L9.73,19.42L7.61,17.3L3.08,21.84V19Z'%20/%3e%3c/svg%3e",pv="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M20.71,7.04C21.1,6.65%2021.1,6%2020.71,5.63L18.37,3.29C18,2.9%2017.35,2.9%2016.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z'%20/%3e%3c/svg%3e",Id="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2%200%200,0%208,21H16A2,2%200%200,0%2018,19V7H6V19Z'%20/%3e%3c/svg%3e",tC="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M8,12H16V14H8V12M10,20H6V4H13V9H18V12.1L20,10.1V8L14,2H6A2,2%200%200,0%204,4V20A2,2%200%200,0%206,22H10V20M8,18H12.1L13,17.1V16H8V18M20.2,13C20.3,13%2020.5,13.1%2020.6,13.2L21.9,14.5C22.1,14.7%2022.1,15.1%2021.9,15.3L20.9,16.3L18.8,14.2L19.8,13.2C19.9,13.1%2020,13%2020.2,13M20.2,16.9L14.1,23H12V20.9L18.1,14.8L20.2,16.9Z'%20/%3e%3c/svg%3e",nu="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z'%20/%3e%3c/svg%3e";var _p={exports:{}};var Dfe=_p.exports,Y3;function Ufe(){return Y3||(Y3=1,(function(e,t){(function(){var n,a="4.17.21",r=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",i="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",A=500,d="__lodash_placeholder__",f=1,m=2,v=4,p=1,g=2,y=1,w=2,b=4,x=8,T=16,D=32,k=64,S=128,E=256,C=512,U=30,F="...",L=800,H=16,ue=1,ie=2,Q=3,X=1/0,le=9007199254740991,Z=17976931348623157e292,re=NaN,q=4294967295,P=q-1,G=q>>>1,J=[["ary",S],["bind",y],["bindKey",w],["curry",x],["curryRight",T],["flip",C],["partial",D],["partialRight",k],["rearg",E]],M="[object Arguments]",te="[object Array]",Y="[object AsyncFunction]",W="[object Boolean]",ee="[object Date]",ae="[object DOMException]",oe="[object Error]",j="[object Function]",ce="[object GeneratorFunction]",de="[object Map]",_e="[object Number]",Re="[object Null]",be="[object Object]",Ee="[object Promise]",Ce="[object Proxy]",Be="[object RegExp]",Te="[object Set]",Oe="[object String]",Me="[object Symbol]",rt="[object Undefined]",ut="[object WeakMap]",Ie="[object WeakSet]",Ue="[object ArrayBuffer]",dt="[object DataView]",Ft="[object Float32Array]",it="[object Float64Array]",qe="[object Int8Array]",yt="[object Int16Array]",mt="[object Int32Array]",xt="[object Uint8Array]",an="[object Uint8ClampedArray]",Cn="[object Uint16Array]",oa="[object Uint32Array]",Vt=/\b__p \+= '';/g,kt=/\b(__p \+=) '' \+/g,at=/(__e\(.*?\)|\b__t\)) \+\n'';/g,bt=/&(?:amp|lt|gt|quot|#39);/g,en=/[&<>"']/g,Ye=RegExp(bt.source),We=RegExp(en.source),_t=/<%-([\s\S]+?)%>/g,Rt=/<%([\s\S]+?)%>/g,zt=/<%=([\s\S]+?)%>/g,Pt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Wt=/^\w*$/,Lt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ia=/[\\^$.*+?()[\]{}|]/g,Ln=RegExp(ia.source),zn=/^\s+/,Yt=/\s/,Bn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ke=/\{\n\/\* \[wrapped with (.+)\] \*/,ze=/,? & /,Fe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Le=/[()=,{}\[\]\/\s]/,Ge=/\\(\\)?/g,he=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,se=/\w*$/,ge=/^[-+]0x[0-9a-f]+$/i,xe=/^0b[01]+$/i,He=/^\[object .+?Constructor\]$/,tt=/^0o[0-7]+$/i,nt=/^(?:0|[1-9]\d*)$/,et=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,st=/($^)/,wt=/['\n\r\u2028\u2029\\]/g,It="\\ud800-\\udfff",tn="\\u0300-\\u036f",kn="\\ufe20-\\ufe2f",hn="\\u20d0-\\u20ff",Sn=tn+kn+hn,Pa="\\u2700-\\u27bf",Er="a-z\\xdf-\\xf6\\xf8-\\xff",Zr="\\xac\\xb1\\xd7\\xf7",Ss="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Wo="\\u2000-\\u206f",Za=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",jo="A-Z\\xc0-\\xd6\\xd8-\\xde",Es="\\ufe0e\\ufe0f",Nt=Zr+Ss+Wo+Za,Dr="[']",Mn="["+It+"]",Eo="["+Nt+"]",Ys="["+Sn+"]",Kc="\\d+",vt="["+Pa+"]",pn="["+Er+"]",In="[^"+It+Nt+Kc+Pa+Er+jo+"]",ya="\\ud83c[\\udffb-\\udfff]",ju="(?:"+Ys+"|"+ya+")",Ha="[^"+It+"]",su="(?:\\ud83c[\\udde6-\\uddff]){2}",ll="[\\ud800-\\udbff][\\udc00-\\udfff]",Bo="["+jo+"]",im="\\u200d",iA="(?:"+pn+"|"+In+")",Dh="(?:"+Bo+"|"+In+")",$e="(?:"+Dr+"(?:d|ll|m|re|s|t|ve))?",pe="(?:"+Dr+"(?:D|LL|M|RE|S|T|VE))?",jt=ju+"?",nn="["+Es+"]?",Tt="(?:"+im+"(?:"+[Ha,su,ll].join("|")+")"+nn+jt+")*",fn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rn="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",$n=nn+jt+Tt,gn="(?:"+[vt,su,ll].join("|")+")"+$n,Ur="(?:"+[Ha+Ys+"?",Ys,su,ll,Mn].join("|")+")",Ta=RegExp(Dr,"g"),lA=RegExp(Ys,"g"),ko=RegExp(ya+"(?="+ya+")|"+Ur+$n,"g"),Uh=RegExp([Bo+"?"+pn+"+"+$e+"(?="+[Eo,Bo,"$"].join("|")+")",Dh+"+"+pe+"(?="+[Eo,Bo+iA,"$"].join("|")+")",Bo+"?"+iA+"+"+$e,Bo+"+"+pe,rn,fn,Kc,gn].join("|"),"g"),vr=RegExp("["+im+It+Sn+Es+"]"),qu=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Yu=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ul=-1,na={};na[Ft]=na[it]=na[qe]=na[yt]=na[mt]=na[xt]=na[an]=na[Cn]=na[oa]=!0,na[M]=na[te]=na[Ue]=na[W]=na[dt]=na[ee]=na[oe]=na[j]=na[de]=na[_e]=na[be]=na[Be]=na[Te]=na[Oe]=na[ut]=!1;var Wn={};Wn[M]=Wn[te]=Wn[Ue]=Wn[dt]=Wn[W]=Wn[ee]=Wn[Ft]=Wn[it]=Wn[qe]=Wn[yt]=Wn[mt]=Wn[de]=Wn[_e]=Wn[be]=Wn[Be]=Wn[Te]=Wn[Oe]=Wn[Me]=Wn[xt]=Wn[an]=Wn[Cn]=Wn[oa]=!0,Wn[oe]=Wn[j]=Wn[ut]=!1;var Hr={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},uA={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ur={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ou={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},di=parseFloat,Xs=parseInt,cA=typeof J1=="object"&&J1&&J1.Object===Object&&J1,lm=typeof self=="object"&&self&&self.Object===Object&&self,$a=cA||lm||Function("return this")(),Di=t&&!t.nodeType&&t,es=Di&&!0&&e&&!e.nodeType&&e,dA=es&&es.exports===Di,Ze=dA&&cA.process,Yn=(function(){try{var ft=es&&es.require&&es.require("util").types;return ft||Ze&&Ze.binding&&Ze.binding("util")}catch{}})(),cl=Yn&&Yn.isArrayBuffer,um=Yn&&Yn.isDate,AA=Yn&&Yn.isMap,Rh=Yn&&Yn.isRegExp,fA=Yn&&Yn.isSet,Yg=Yn&&Yn.isTypedArray;function Js(ft,Dt,Et){switch(Et.length){case 0:return ft.call(Dt);case 1:return ft.call(Dt,Et[0]);case 2:return ft.call(Dt,Et[0],Et[1]);case 3:return ft.call(Dt,Et[0],Et[1],Et[2])}return ft.apply(Dt,Et)}function mA(ft,Dt,Et,mn){for(var jn=-1,Ua=ft==null?0:ft.length;++jn<Ua;){var As=ft[jn];Dt(mn,As,Et(As),ft)}return mn}function To(ft,Dt){for(var Et=-1,mn=ft==null?0:ft.length;++Et<mn&&Dt(ft[Et],Et,ft)!==!1;);return ft}function Xg(ft,Dt){for(var Et=ft==null?0:ft.length;Et--&&Dt(ft[Et],Et,ft)!==!1;);return ft}function cm(ft,Dt){for(var Et=-1,mn=ft==null?0:ft.length;++Et<mn;)if(!Dt(ft[Et],Et,ft))return!1;return!0}function Ui(ft,Dt){for(var Et=-1,mn=ft==null?0:ft.length,jn=0,Ua=[];++Et<mn;){var As=ft[Et];Dt(As,Et,ft)&&(Ua[jn++]=As)}return Ua}function vA(ft,Dt){var Et=ft==null?0:ft.length;return!!Et&&Ai(ft,Dt,0)>-1}function Wc(ft,Dt,Et){for(var mn=-1,jn=ft==null?0:ft.length;++mn<jn;)if(Et(Dt,ft[mn]))return!0;return!1}function rr(ft,Dt){for(var Et=-1,mn=ft==null?0:ft.length,jn=Array(mn);++Et<mn;)jn[Et]=Dt(ft[Et],Et,ft);return jn}function dl(ft,Dt){for(var Et=-1,mn=Dt.length,jn=ft.length;++Et<mn;)ft[jn+Et]=Dt[Et];return ft}function Al(ft,Dt,Et,mn){var jn=-1,Ua=ft==null?0:ft.length;for(mn&&Ua&&(Et=ft[++jn]);++jn<Ua;)Et=Dt(Et,ft[jn],jn,ft);return Et}function Jg(ft,Dt,Et,mn){var jn=ft==null?0:ft.length;for(mn&&jn&&(Et=ft[--jn]);jn--;)Et=Dt(Et,ft[jn],jn,ft);return Et}function dm(ft,Dt){for(var Et=-1,mn=ft==null?0:ft.length;++Et<mn;)if(Dt(ft[Et],Et,ft))return!0;return!1}var Zg=Ne("length");function e1(ft){return ft.split("")}function qo(ft){return ft.match(Fe)||[]}function Nh(ft,Dt,Et){var mn;return Et(ft,function(jn,Ua,As){if(Dt(jn,Ua,As))return mn=Ua,!1}),mn}function hA(ft,Dt,Et,mn){for(var jn=ft.length,Ua=Et+(mn?1:-1);mn?Ua--:++Ua<jn;)if(Dt(ft[Ua],Ua,ft))return Ua;return-1}function Ai(ft,Dt,Et){return Dt===Dt?_K(ft,Dt,Et):hA(ft,fe,Et)}function N(ft,Dt,Et,mn){for(var jn=Et-1,Ua=ft.length;++jn<Ua;)if(mn(ft[jn],Dt))return jn;return-1}function fe(ft){return ft!==ft}function we(ft,Dt){var Et=ft==null?0:ft.length;return Et?Da(ft,Dt)/Et:re}function Ne(ft){return function(Dt){return Dt==null?n:Dt[ft]}}function pt(ft){return function(Dt){return ft==null?n:ft[Dt]}}function Bt(ft,Dt,Et,mn,jn){return jn(ft,function(Ua,As,sr){Et=mn?(mn=!1,Ua):Dt(Et,Ua,As,sr)}),Et}function Zt(ft,Dt){var Et=ft.length;for(ft.sort(Dt);Et--;)ft[Et]=ft[Et].value;return ft}function Da(ft,Dt){for(var Et,mn=-1,jn=ft.length;++mn<jn;){var Ua=Dt(ft[mn]);Ua!==n&&(Et=Et===n?Ua:Et+Ua)}return Et}function $r(ft,Dt){for(var Et=-1,mn=Array(ft);++Et<ft;)mn[Et]=Dt(Et);return mn}function _a(ft,Dt){return rr(Dt,function(Et){return[Et,ft[Et]]})}function ds(ft){return ft&&ft.slice(0,vI(ft)+1).replace(zn,"")}function Qa(ft){return function(Dt){return ft(Dt)}}function iu(ft,Dt){return rr(Dt,function(Et){return ft[Et]})}function Ns(ft,Dt){return ft.has(Dt)}function pA(ft,Dt){for(var Et=-1,mn=ft.length;++Et<mn&&Ai(Dt,ft[Et],0)>-1;);return Et}function Am(ft,Dt){for(var Et=ft.length;Et--&&Ai(Dt,ft[Et],0)>-1;);return Et}function AK(ft,Dt){for(var Et=ft.length,mn=0;Et--;)ft[Et]===Dt&&++mn;return mn}var fK=pt(Hr),mK=pt(uA);function vK(ft){return"\\"+ou[ft]}function hK(ft,Dt){return ft==null?n:ft[Dt]}function fm(ft){return vr.test(ft)}function pK(ft){return qu.test(ft)}function gK(ft){for(var Dt,Et=[];!(Dt=ft.next()).done;)Et.push(Dt.value);return Et}function wb(ft){var Dt=-1,Et=Array(ft.size);return ft.forEach(function(mn,jn){Et[++Dt]=[jn,mn]}),Et}function mI(ft,Dt){return function(Et){return ft(Dt(Et))}}function jc(ft,Dt){for(var Et=-1,mn=ft.length,jn=0,Ua=[];++Et<mn;){var As=ft[Et];(As===Dt||As===d)&&(ft[Et]=d,Ua[jn++]=Et)}return Ua}function t1(ft){var Dt=-1,Et=Array(ft.size);return ft.forEach(function(mn){Et[++Dt]=mn}),Et}function yK(ft){var Dt=-1,Et=Array(ft.size);return ft.forEach(function(mn){Et[++Dt]=[mn,mn]}),Et}function _K(ft,Dt,Et){for(var mn=Et-1,jn=ft.length;++mn<jn;)if(ft[mn]===Dt)return mn;return-1}function wK(ft,Dt,Et){for(var mn=Et+1;mn--;)if(ft[mn]===Dt)return mn;return mn}function mm(ft){return fm(ft)?xK(ft):Zg(ft)}function fl(ft){return fm(ft)?CK(ft):e1(ft)}function vI(ft){for(var Dt=ft.length;Dt--&&Yt.test(ft.charAt(Dt)););return Dt}var bK=pt(ur);function xK(ft){for(var Dt=ko.lastIndex=0;ko.test(ft);)++Dt;return Dt}function CK(ft){return ft.match(ko)||[]}function SK(ft){return ft.match(Uh)||[]}var EK=(function ft(Dt){Dt=Dt==null?$a:vm.defaults($a.Object(),Dt,vm.pick($a,Yu));var Et=Dt.Array,mn=Dt.Date,jn=Dt.Error,Ua=Dt.Function,As=Dt.Math,sr=Dt.Object,bb=Dt.RegExp,BK=Dt.String,Ri=Dt.TypeError,n1=Et.prototype,kK=Ua.prototype,hm=sr.prototype,a1=Dt["__core-js_shared__"],r1=kK.toString,Ya=hm.hasOwnProperty,TK=0,hI=(function(){var _=/[^.]+$/.exec(a1&&a1.keys&&a1.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""})(),s1=hm.toString,IK=r1.call(sr),FK=$a._,PK=bb("^"+r1.call(Ya).replace(ia,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),o1=dA?Dt.Buffer:n,qc=Dt.Symbol,i1=Dt.Uint8Array,pI=o1?o1.allocUnsafe:n,l1=mI(sr.getPrototypeOf,sr),gI=sr.create,yI=hm.propertyIsEnumerable,u1=n1.splice,_I=qc?qc.isConcatSpreadable:n,Vh=qc?qc.iterator:n,gA=qc?qc.toStringTag:n,c1=(function(){try{var _=xA(sr,"defineProperty");return _({},"",{}),_}catch{}})(),DK=Dt.clearTimeout!==$a.clearTimeout&&Dt.clearTimeout,UK=mn&&mn.now!==$a.Date.now&&mn.now,RK=Dt.setTimeout!==$a.setTimeout&&Dt.setTimeout,d1=As.ceil,A1=As.floor,xb=sr.getOwnPropertySymbols,NK=o1?o1.isBuffer:n,wI=Dt.isFinite,VK=n1.join,LK=mI(sr.keys,sr),fs=As.max,Zs=As.min,MK=mn.now,OK=Dt.parseInt,bI=As.random,HK=n1.reverse,Cb=xA(Dt,"DataView"),Lh=xA(Dt,"Map"),Sb=xA(Dt,"Promise"),pm=xA(Dt,"Set"),Mh=xA(Dt,"WeakMap"),Oh=xA(sr,"create"),f1=Mh&&new Mh,gm={},$K=CA(Cb),QK=CA(Lh),GK=CA(Sb),zK=CA(pm),KK=CA(Mh),m1=qc?qc.prototype:n,Hh=m1?m1.valueOf:n,xI=m1?m1.toString:n;function De(_){if(Rr(_)&&!Xn(_)&&!(_ instanceof Aa)){if(_ instanceof Ni)return _;if(Ya.call(_,"__wrapped__"))return CF(_)}return new Ni(_)}var ym=(function(){function _(){}return function(B){if(!Br(B))return{};if(gI)return gI(B);_.prototype=B;var z=new _;return _.prototype=n,z}})();function v1(){}function Ni(_,B){this.__wrapped__=_,this.__actions__=[],this.__chain__=!!B,this.__index__=0,this.__values__=n}De.templateSettings={escape:_t,evaluate:Rt,interpolate:zt,variable:"",imports:{_:De}},De.prototype=v1.prototype,De.prototype.constructor=De,Ni.prototype=ym(v1.prototype),Ni.prototype.constructor=Ni;function Aa(_){this.__wrapped__=_,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=q,this.__views__=[]}function WK(){var _=new Aa(this.__wrapped__);return _.__actions__=Yo(this.__actions__),_.__dir__=this.__dir__,_.__filtered__=this.__filtered__,_.__iteratees__=Yo(this.__iteratees__),_.__takeCount__=this.__takeCount__,_.__views__=Yo(this.__views__),_}function jK(){if(this.__filtered__){var _=new Aa(this);_.__dir__=-1,_.__filtered__=!0}else _=this.clone(),_.__dir__*=-1;return _}function qK(){var _=this.__wrapped__.value(),B=this.__dir__,z=Xn(_),me=B<0,Se=z?_.length:0,Ve=ij(0,Se,this.__views__),Je=Ve.start,ot=Ve.end,ht=ot-Je,Mt=me?ot:Je-1,Ot=this.__iteratees__,Qt=Ot.length,sn=0,yn=Zs(ht,this.__takeCount__);if(!z||!me&&Se==ht&&yn==ht)return WI(_,this.__actions__);var Dn=[];e:for(;ht--&&sn<yn;){Mt+=B;for(var sa=-1,Un=_[Mt];++sa<Qt;){var da=Ot[sa],ha=da.iteratee,vi=da.type,Po=ha(Un);if(vi==ie)Un=Po;else if(!Po){if(vi==ue)continue e;break e}}Dn[sn++]=Un}return Dn}Aa.prototype=ym(v1.prototype),Aa.prototype.constructor=Aa;function yA(_){var B=-1,z=_==null?0:_.length;for(this.clear();++B<z;){var me=_[B];this.set(me[0],me[1])}}function YK(){this.__data__=Oh?Oh(null):{},this.size=0}function XK(_){var B=this.has(_)&&delete this.__data__[_];return this.size-=B?1:0,B}function JK(_){var B=this.__data__;if(Oh){var z=B[_];return z===c?n:z}return Ya.call(B,_)?B[_]:n}function ZK(_){var B=this.__data__;return Oh?B[_]!==n:Ya.call(B,_)}function eW(_,B){var z=this.__data__;return this.size+=this.has(_)?0:1,z[_]=Oh&&B===n?c:B,this}yA.prototype.clear=YK,yA.prototype.delete=XK,yA.prototype.get=JK,yA.prototype.has=ZK,yA.prototype.set=eW;function Xu(_){var B=-1,z=_==null?0:_.length;for(this.clear();++B<z;){var me=_[B];this.set(me[0],me[1])}}function tW(){this.__data__=[],this.size=0}function nW(_){var B=this.__data__,z=h1(B,_);if(z<0)return!1;var me=B.length-1;return z==me?B.pop():u1.call(B,z,1),--this.size,!0}function aW(_){var B=this.__data__,z=h1(B,_);return z<0?n:B[z][1]}function rW(_){return h1(this.__data__,_)>-1}function sW(_,B){var z=this.__data__,me=h1(z,_);return me<0?(++this.size,z.push([_,B])):z[me][1]=B,this}Xu.prototype.clear=tW,Xu.prototype.delete=nW,Xu.prototype.get=aW,Xu.prototype.has=rW,Xu.prototype.set=sW;function Ju(_){var B=-1,z=_==null?0:_.length;for(this.clear();++B<z;){var me=_[B];this.set(me[0],me[1])}}function oW(){this.size=0,this.__data__={hash:new yA,map:new(Lh||Xu),string:new yA}}function iW(_){var B=k1(this,_).delete(_);return this.size-=B?1:0,B}function lW(_){return k1(this,_).get(_)}function uW(_){return k1(this,_).has(_)}function cW(_,B){var z=k1(this,_),me=z.size;return z.set(_,B),this.size+=z.size==me?0:1,this}Ju.prototype.clear=oW,Ju.prototype.delete=iW,Ju.prototype.get=lW,Ju.prototype.has=uW,Ju.prototype.set=cW;function _A(_){var B=-1,z=_==null?0:_.length;for(this.__data__=new Ju;++B<z;)this.add(_[B])}function dW(_){return this.__data__.set(_,c),this}function AW(_){return this.__data__.has(_)}_A.prototype.add=_A.prototype.push=dW,_A.prototype.has=AW;function ml(_){var B=this.__data__=new Xu(_);this.size=B.size}function fW(){this.__data__=new Xu,this.size=0}function mW(_){var B=this.__data__,z=B.delete(_);return this.size=B.size,z}function vW(_){return this.__data__.get(_)}function hW(_){return this.__data__.has(_)}function pW(_,B){var z=this.__data__;if(z instanceof Xu){var me=z.__data__;if(!Lh||me.length<r-1)return me.push([_,B]),this.size=++z.size,this;z=this.__data__=new Ju(me)}return z.set(_,B),this.size=z.size,this}ml.prototype.clear=fW,ml.prototype.delete=mW,ml.prototype.get=vW,ml.prototype.has=hW,ml.prototype.set=pW;function CI(_,B){var z=Xn(_),me=!z&&SA(_),Se=!z&&!me&&ed(_),Ve=!z&&!me&&!Se&&xm(_),Je=z||me||Se||Ve,ot=Je?$r(_.length,BK):[],ht=ot.length;for(var Mt in _)(B||Ya.call(_,Mt))&&!(Je&&(Mt=="length"||Se&&(Mt=="offset"||Mt=="parent")||Ve&&(Mt=="buffer"||Mt=="byteLength"||Mt=="byteOffset")||nc(Mt,ht)))&&ot.push(Mt);return ot}function SI(_){var B=_.length;return B?_[Nb(0,B-1)]:n}function gW(_,B){return T1(Yo(_),wA(B,0,_.length))}function yW(_){return T1(Yo(_))}function Eb(_,B,z){(z!==n&&!vl(_[B],z)||z===n&&!(B in _))&&Zu(_,B,z)}function $h(_,B,z){var me=_[B];(!(Ya.call(_,B)&&vl(me,z))||z===n&&!(B in _))&&Zu(_,B,z)}function h1(_,B){for(var z=_.length;z--;)if(vl(_[z][0],B))return z;return-1}function _W(_,B,z,me){return Yc(_,function(Se,Ve,Je){B(me,Se,z(Se),Je)}),me}function EI(_,B){return _&&uu(B,Bs(B),_)}function wW(_,B){return _&&uu(B,Jo(B),_)}function Zu(_,B,z){B=="__proto__"&&c1?c1(_,B,{configurable:!0,enumerable:!0,value:z,writable:!0}):_[B]=z}function Bb(_,B){for(var z=-1,me=B.length,Se=Et(me),Ve=_==null;++z<me;)Se[z]=Ve?n:ix(_,B[z]);return Se}function wA(_,B,z){return _===_&&(z!==n&&(_=_<=z?_:z),B!==n&&(_=_>=B?_:B)),_}function Vi(_,B,z,me,Se,Ve){var Je,ot=B&f,ht=B&m,Mt=B&v;if(z&&(Je=Se?z(_,me,Se,Ve):z(_)),Je!==n)return Je;if(!Br(_))return _;var Ot=Xn(_);if(Ot){if(Je=uj(_),!ot)return Yo(_,Je)}else{var Qt=eo(_),sn=Qt==j||Qt==ce;if(ed(_))return YI(_,ot);if(Qt==be||Qt==M||sn&&!Se){if(Je=ht||sn?{}:vF(_),!ot)return ht?JW(_,wW(Je,_)):XW(_,EI(Je,_))}else{if(!Wn[Qt])return Se?_:{};Je=cj(_,Qt,ot)}}Ve||(Ve=new ml);var yn=Ve.get(_);if(yn)return yn;Ve.set(_,Je),GF(_)?_.forEach(function(Un){Je.add(Vi(Un,B,z,Un,_,Ve))}):$F(_)&&_.forEach(function(Un,da){Je.set(da,Vi(Un,B,z,da,_,Ve))});var Dn=Mt?ht?Wb:Kb:ht?Jo:Bs,sa=Ot?n:Dn(_);return To(sa||_,function(Un,da){sa&&(da=Un,Un=_[da]),$h(Je,da,Vi(Un,B,z,da,_,Ve))}),Je}function bW(_){var B=Bs(_);return function(z){return BI(z,_,B)}}function BI(_,B,z){var me=z.length;if(_==null)return!me;for(_=sr(_);me--;){var Se=z[me],Ve=B[Se],Je=_[Se];if(Je===n&&!(Se in _)||!Ve(Je))return!1}return!0}function kI(_,B,z){if(typeof _!="function")throw new Ri(o);return qh(function(){_.apply(n,z)},B)}function Qh(_,B,z,me){var Se=-1,Ve=vA,Je=!0,ot=_.length,ht=[],Mt=B.length;if(!ot)return ht;z&&(B=rr(B,Qa(z))),me?(Ve=Wc,Je=!1):B.length>=r&&(Ve=Ns,Je=!1,B=new _A(B));e:for(;++Se<ot;){var Ot=_[Se],Qt=z==null?Ot:z(Ot);if(Ot=me||Ot!==0?Ot:0,Je&&Qt===Qt){for(var sn=Mt;sn--;)if(B[sn]===Qt)continue e;ht.push(Ot)}else Ve(B,Qt,me)||ht.push(Ot)}return ht}var Yc=tF(lu),TI=tF(Tb,!0);function xW(_,B){var z=!0;return Yc(_,function(me,Se,Ve){return z=!!B(me,Se,Ve),z}),z}function p1(_,B,z){for(var me=-1,Se=_.length;++me<Se;){var Ve=_[me],Je=B(Ve);if(Je!=null&&(ot===n?Je===Je&&!mi(Je):z(Je,ot)))var ot=Je,ht=Ve}return ht}function CW(_,B,z,me){var Se=_.length;for(z=aa(z),z<0&&(z=-z>Se?0:Se+z),me=me===n||me>Se?Se:aa(me),me<0&&(me+=Se),me=z>me?0:KF(me);z<me;)_[z++]=B;return _}function II(_,B){var z=[];return Yc(_,function(me,Se,Ve){B(me,Se,Ve)&&z.push(me)}),z}function Vs(_,B,z,me,Se){var Ve=-1,Je=_.length;for(z||(z=Aj),Se||(Se=[]);++Ve<Je;){var ot=_[Ve];B>0&&z(ot)?B>1?Vs(ot,B-1,z,me,Se):dl(Se,ot):me||(Se[Se.length]=ot)}return Se}var kb=nF(),FI=nF(!0);function lu(_,B){return _&&kb(_,B,Bs)}function Tb(_,B){return _&&FI(_,B,Bs)}function g1(_,B){return Ui(B,function(z){return ac(_[z])})}function bA(_,B){B=Jc(B,_);for(var z=0,me=B.length;_!=null&&z<me;)_=_[cu(B[z++])];return z&&z==me?_:n}function PI(_,B,z){var me=B(_);return Xn(_)?me:dl(me,z(_))}function Io(_){return _==null?_===n?rt:Re:gA&&gA in sr(_)?oj(_):yj(_)}function Ib(_,B){return _>B}function SW(_,B){return _!=null&&Ya.call(_,B)}function EW(_,B){return _!=null&&B in sr(_)}function BW(_,B,z){return _>=Zs(B,z)&&_<fs(B,z)}function Fb(_,B,z){for(var me=z?Wc:vA,Se=_[0].length,Ve=_.length,Je=Ve,ot=Et(Ve),ht=1/0,Mt=[];Je--;){var Ot=_[Je];Je&&B&&(Ot=rr(Ot,Qa(B))),ht=Zs(Ot.length,ht),ot[Je]=!z&&(B||Se>=120&&Ot.length>=120)?new _A(Je&&Ot):n}Ot=_[0];var Qt=-1,sn=ot[0];e:for(;++Qt<Se&&Mt.length<ht;){var yn=Ot[Qt],Dn=B?B(yn):yn;if(yn=z||yn!==0?yn:0,!(sn?Ns(sn,Dn):me(Mt,Dn,z))){for(Je=Ve;--Je;){var sa=ot[Je];if(!(sa?Ns(sa,Dn):me(_[Je],Dn,z)))continue e}sn&&sn.push(Dn),Mt.push(yn)}}return Mt}function kW(_,B,z,me){return lu(_,function(Se,Ve,Je){B(me,z(Se),Ve,Je)}),me}function Gh(_,B,z){B=Jc(B,_),_=yF(_,B);var me=_==null?_:_[cu(Mi(B))];return me==null?n:Js(me,_,z)}function DI(_){return Rr(_)&&Io(_)==M}function TW(_){return Rr(_)&&Io(_)==Ue}function IW(_){return Rr(_)&&Io(_)==ee}function zh(_,B,z,me,Se){return _===B?!0:_==null||B==null||!Rr(_)&&!Rr(B)?_!==_&&B!==B:FW(_,B,z,me,zh,Se)}function FW(_,B,z,me,Se,Ve){var Je=Xn(_),ot=Xn(B),ht=Je?te:eo(_),Mt=ot?te:eo(B);ht=ht==M?be:ht,Mt=Mt==M?be:Mt;var Ot=ht==be,Qt=Mt==be,sn=ht==Mt;if(sn&&ed(_)){if(!ed(B))return!1;Je=!0,Ot=!1}if(sn&&!Ot)return Ve||(Ve=new ml),Je||xm(_)?AF(_,B,z,me,Se,Ve):rj(_,B,ht,z,me,Se,Ve);if(!(z&p)){var yn=Ot&&Ya.call(_,"__wrapped__"),Dn=Qt&&Ya.call(B,"__wrapped__");if(yn||Dn){var sa=yn?_.value():_,Un=Dn?B.value():B;return Ve||(Ve=new ml),Se(sa,Un,z,me,Ve)}}return sn?(Ve||(Ve=new ml),sj(_,B,z,me,Se,Ve)):!1}function PW(_){return Rr(_)&&eo(_)==de}function Pb(_,B,z,me){var Se=z.length,Ve=Se,Je=!me;if(_==null)return!Ve;for(_=sr(_);Se--;){var ot=z[Se];if(Je&&ot[2]?ot[1]!==_[ot[0]]:!(ot[0]in _))return!1}for(;++Se<Ve;){ot=z[Se];var ht=ot[0],Mt=_[ht],Ot=ot[1];if(Je&&ot[2]){if(Mt===n&&!(ht in _))return!1}else{var Qt=new ml;if(me)var sn=me(Mt,Ot,ht,_,B,Qt);if(!(sn===n?zh(Ot,Mt,p|g,me,Qt):sn))return!1}}return!0}function UI(_){if(!Br(_)||mj(_))return!1;var B=ac(_)?PK:He;return B.test(CA(_))}function DW(_){return Rr(_)&&Io(_)==Be}function UW(_){return Rr(_)&&eo(_)==Te}function RW(_){return Rr(_)&&R1(_.length)&&!!na[Io(_)]}function RI(_){return typeof _=="function"?_:_==null?Zo:typeof _=="object"?Xn(_)?LI(_[0],_[1]):VI(_):aP(_)}function Db(_){if(!jh(_))return LK(_);var B=[];for(var z in sr(_))Ya.call(_,z)&&z!="constructor"&&B.push(z);return B}function NW(_){if(!Br(_))return gj(_);var B=jh(_),z=[];for(var me in _)me=="constructor"&&(B||!Ya.call(_,me))||z.push(me);return z}function Ub(_,B){return _<B}function NI(_,B){var z=-1,me=Xo(_)?Et(_.length):[];return Yc(_,function(Se,Ve,Je){me[++z]=B(Se,Ve,Je)}),me}function VI(_){var B=qb(_);return B.length==1&&B[0][2]?pF(B[0][0],B[0][1]):function(z){return z===_||Pb(z,_,B)}}function LI(_,B){return Xb(_)&&hF(B)?pF(cu(_),B):function(z){var me=ix(z,_);return me===n&&me===B?lx(z,_):zh(B,me,p|g)}}function y1(_,B,z,me,Se){_!==B&&kb(B,function(Ve,Je){if(Se||(Se=new ml),Br(Ve))VW(_,B,Je,z,y1,me,Se);else{var ot=me?me(Zb(_,Je),Ve,Je+"",_,B,Se):n;ot===n&&(ot=Ve),Eb(_,Je,ot)}},Jo)}function VW(_,B,z,me,Se,Ve,Je){var ot=Zb(_,z),ht=Zb(B,z),Mt=Je.get(ht);if(Mt){Eb(_,z,Mt);return}var Ot=Ve?Ve(ot,ht,z+"",_,B,Je):n,Qt=Ot===n;if(Qt){var sn=Xn(ht),yn=!sn&&ed(ht),Dn=!sn&&!yn&&xm(ht);Ot=ht,sn||yn||Dn?Xn(ot)?Ot=ot:Qr(ot)?Ot=Yo(ot):yn?(Qt=!1,Ot=YI(ht,!0)):Dn?(Qt=!1,Ot=XI(ht,!0)):Ot=[]:Yh(ht)||SA(ht)?(Ot=ot,SA(ot)?Ot=WF(ot):(!Br(ot)||ac(ot))&&(Ot=vF(ht))):Qt=!1}Qt&&(Je.set(ht,Ot),Se(Ot,ht,me,Ve,Je),Je.delete(ht)),Eb(_,z,Ot)}function MI(_,B){var z=_.length;if(z)return B+=B<0?z:0,nc(B,z)?_[B]:n}function OI(_,B,z){B.length?B=rr(B,function(Ve){return Xn(Ve)?function(Je){return bA(Je,Ve.length===1?Ve[0]:Ve)}:Ve}):B=[Zo];var me=-1;B=rr(B,Qa(Fn()));var Se=NI(_,function(Ve,Je,ot){var ht=rr(B,function(Mt){return Mt(Ve)});return{criteria:ht,index:++me,value:Ve}});return Zt(Se,function(Ve,Je){return YW(Ve,Je,z)})}function LW(_,B){return HI(_,B,function(z,me){return lx(_,me)})}function HI(_,B,z){for(var me=-1,Se=B.length,Ve={};++me<Se;){var Je=B[me],ot=bA(_,Je);z(ot,Je)&&Kh(Ve,Jc(Je,_),ot)}return Ve}function MW(_){return function(B){return bA(B,_)}}function Rb(_,B,z,me){var Se=me?N:Ai,Ve=-1,Je=B.length,ot=_;for(_===B&&(B=Yo(B)),z&&(ot=rr(_,Qa(z)));++Ve<Je;)for(var ht=0,Mt=B[Ve],Ot=z?z(Mt):Mt;(ht=Se(ot,Ot,ht,me))>-1;)ot!==_&&u1.call(ot,ht,1),u1.call(_,ht,1);return _}function $I(_,B){for(var z=_?B.length:0,me=z-1;z--;){var Se=B[z];if(z==me||Se!==Ve){var Ve=Se;nc(Se)?u1.call(_,Se,1):Mb(_,Se)}}return _}function Nb(_,B){return _+A1(bI()*(B-_+1))}function OW(_,B,z,me){for(var Se=-1,Ve=fs(d1((B-_)/(z||1)),0),Je=Et(Ve);Ve--;)Je[me?Ve:++Se]=_,_+=z;return Je}function Vb(_,B){var z="";if(!_||B<1||B>le)return z;do B%2&&(z+=_),B=A1(B/2),B&&(_+=_);while(B);return z}function la(_,B){return ex(gF(_,B,Zo),_+"")}function HW(_){return SI(Cm(_))}function $W(_,B){var z=Cm(_);return T1(z,wA(B,0,z.length))}function Kh(_,B,z,me){if(!Br(_))return _;B=Jc(B,_);for(var Se=-1,Ve=B.length,Je=Ve-1,ot=_;ot!=null&&++Se<Ve;){var ht=cu(B[Se]),Mt=z;if(ht==="__proto__"||ht==="constructor"||ht==="prototype")return _;if(Se!=Je){var Ot=ot[ht];Mt=me?me(Ot,ht,ot):n,Mt===n&&(Mt=Br(Ot)?Ot:nc(B[Se+1])?[]:{})}$h(ot,ht,Mt),ot=ot[ht]}return _}var QI=f1?function(_,B){return f1.set(_,B),_}:Zo,QW=c1?function(_,B){return c1(_,"toString",{configurable:!0,enumerable:!1,value:cx(B),writable:!0})}:Zo;function GW(_){return T1(Cm(_))}function Li(_,B,z){var me=-1,Se=_.length;B<0&&(B=-B>Se?0:Se+B),z=z>Se?Se:z,z<0&&(z+=Se),Se=B>z?0:z-B>>>0,B>>>=0;for(var Ve=Et(Se);++me<Se;)Ve[me]=_[me+B];return Ve}function zW(_,B){var z;return Yc(_,function(me,Se,Ve){return z=B(me,Se,Ve),!z}),!!z}function _1(_,B,z){var me=0,Se=_==null?me:_.length;if(typeof B=="number"&&B===B&&Se<=G){for(;me<Se;){var Ve=me+Se>>>1,Je=_[Ve];Je!==null&&!mi(Je)&&(z?Je<=B:Je<B)?me=Ve+1:Se=Ve}return Se}return Lb(_,B,Zo,z)}function Lb(_,B,z,me){var Se=0,Ve=_==null?0:_.length;if(Ve===0)return 0;B=z(B);for(var Je=B!==B,ot=B===null,ht=mi(B),Mt=B===n;Se<Ve;){var Ot=A1((Se+Ve)/2),Qt=z(_[Ot]),sn=Qt!==n,yn=Qt===null,Dn=Qt===Qt,sa=mi(Qt);if(Je)var Un=me||Dn;else Mt?Un=Dn&&(me||sn):ot?Un=Dn&&sn&&(me||!yn):ht?Un=Dn&&sn&&!yn&&(me||!sa):yn||sa?Un=!1:Un=me?Qt<=B:Qt<B;Un?Se=Ot+1:Ve=Ot}return Zs(Ve,P)}function GI(_,B){for(var z=-1,me=_.length,Se=0,Ve=[];++z<me;){var Je=_[z],ot=B?B(Je):Je;if(!z||!vl(ot,ht)){var ht=ot;Ve[Se++]=Je===0?0:Je}}return Ve}function zI(_){return typeof _=="number"?_:mi(_)?re:+_}function fi(_){if(typeof _=="string")return _;if(Xn(_))return rr(_,fi)+"";if(mi(_))return xI?xI.call(_):"";var B=_+"";return B=="0"&&1/_==-X?"-0":B}function Xc(_,B,z){var me=-1,Se=vA,Ve=_.length,Je=!0,ot=[],ht=ot;if(z)Je=!1,Se=Wc;else if(Ve>=r){var Mt=B?null:nj(_);if(Mt)return t1(Mt);Je=!1,Se=Ns,ht=new _A}else ht=B?[]:ot;e:for(;++me<Ve;){var Ot=_[me],Qt=B?B(Ot):Ot;if(Ot=z||Ot!==0?Ot:0,Je&&Qt===Qt){for(var sn=ht.length;sn--;)if(ht[sn]===Qt)continue e;B&&ht.push(Qt),ot.push(Ot)}else Se(ht,Qt,z)||(ht!==ot&&ht.push(Qt),ot.push(Ot))}return ot}function Mb(_,B){return B=Jc(B,_),_=yF(_,B),_==null||delete _[cu(Mi(B))]}function KI(_,B,z,me){return Kh(_,B,z(bA(_,B)),me)}function w1(_,B,z,me){for(var Se=_.length,Ve=me?Se:-1;(me?Ve--:++Ve<Se)&&B(_[Ve],Ve,_););return z?Li(_,me?0:Ve,me?Ve+1:Se):Li(_,me?Ve+1:0,me?Se:Ve)}function WI(_,B){var z=_;return z instanceof Aa&&(z=z.value()),Al(B,function(me,Se){return Se.func.apply(Se.thisArg,dl([me],Se.args))},z)}function Ob(_,B,z){var me=_.length;if(me<2)return me?Xc(_[0]):[];for(var Se=-1,Ve=Et(me);++Se<me;)for(var Je=_[Se],ot=-1;++ot<me;)ot!=Se&&(Ve[Se]=Qh(Ve[Se]||Je,_[ot],B,z));return Xc(Vs(Ve,1),B,z)}function jI(_,B,z){for(var me=-1,Se=_.length,Ve=B.length,Je={};++me<Se;){var ot=me<Ve?B[me]:n;z(Je,_[me],ot)}return Je}function Hb(_){return Qr(_)?_:[]}function $b(_){return typeof _=="function"?_:Zo}function Jc(_,B){return Xn(_)?_:Xb(_,B)?[_]:xF(Ga(_))}var KW=la;function Zc(_,B,z){var me=_.length;return z=z===n?me:z,!B&&z>=me?_:Li(_,B,z)}var qI=DK||function(_){return $a.clearTimeout(_)};function YI(_,B){if(B)return _.slice();var z=_.length,me=pI?pI(z):new _.constructor(z);return _.copy(me),me}function Qb(_){var B=new _.constructor(_.byteLength);return new i1(B).set(new i1(_)),B}function WW(_,B){var z=B?Qb(_.buffer):_.buffer;return new _.constructor(z,_.byteOffset,_.byteLength)}function jW(_){var B=new _.constructor(_.source,se.exec(_));return B.lastIndex=_.lastIndex,B}function qW(_){return Hh?sr(Hh.call(_)):{}}function XI(_,B){var z=B?Qb(_.buffer):_.buffer;return new _.constructor(z,_.byteOffset,_.length)}function JI(_,B){if(_!==B){var z=_!==n,me=_===null,Se=_===_,Ve=mi(_),Je=B!==n,ot=B===null,ht=B===B,Mt=mi(B);if(!ot&&!Mt&&!Ve&&_>B||Ve&&Je&&ht&&!ot&&!Mt||me&&Je&&ht||!z&&ht||!Se)return 1;if(!me&&!Ve&&!Mt&&_<B||Mt&&z&&Se&&!me&&!Ve||ot&&z&&Se||!Je&&Se||!ht)return-1}return 0}function YW(_,B,z){for(var me=-1,Se=_.criteria,Ve=B.criteria,Je=Se.length,ot=z.length;++me<Je;){var ht=JI(Se[me],Ve[me]);if(ht){if(me>=ot)return ht;var Mt=z[me];return ht*(Mt=="desc"?-1:1)}}return _.index-B.index}function ZI(_,B,z,me){for(var Se=-1,Ve=_.length,Je=z.length,ot=-1,ht=B.length,Mt=fs(Ve-Je,0),Ot=Et(ht+Mt),Qt=!me;++ot<ht;)Ot[ot]=B[ot];for(;++Se<Je;)(Qt||Se<Ve)&&(Ot[z[Se]]=_[Se]);for(;Mt--;)Ot[ot++]=_[Se++];return Ot}function eF(_,B,z,me){for(var Se=-1,Ve=_.length,Je=-1,ot=z.length,ht=-1,Mt=B.length,Ot=fs(Ve-ot,0),Qt=Et(Ot+Mt),sn=!me;++Se<Ot;)Qt[Se]=_[Se];for(var yn=Se;++ht<Mt;)Qt[yn+ht]=B[ht];for(;++Je<ot;)(sn||Se<Ve)&&(Qt[yn+z[Je]]=_[Se++]);return Qt}function Yo(_,B){var z=-1,me=_.length;for(B||(B=Et(me));++z<me;)B[z]=_[z];return B}function uu(_,B,z,me){var Se=!z;z||(z={});for(var Ve=-1,Je=B.length;++Ve<Je;){var ot=B[Ve],ht=me?me(z[ot],_[ot],ot,z,_):n;ht===n&&(ht=_[ot]),Se?Zu(z,ot,ht):$h(z,ot,ht)}return z}function XW(_,B){return uu(_,Yb(_),B)}function JW(_,B){return uu(_,fF(_),B)}function b1(_,B){return function(z,me){var Se=Xn(z)?mA:_W,Ve=B?B():{};return Se(z,_,Fn(me,2),Ve)}}function _m(_){return la(function(B,z){var me=-1,Se=z.length,Ve=Se>1?z[Se-1]:n,Je=Se>2?z[2]:n;for(Ve=_.length>3&&typeof Ve=="function"?(Se--,Ve):n,Je&&Fo(z[0],z[1],Je)&&(Ve=Se<3?n:Ve,Se=1),B=sr(B);++me<Se;){var ot=z[me];ot&&_(B,ot,me,Ve)}return B})}function tF(_,B){return function(z,me){if(z==null)return z;if(!Xo(z))return _(z,me);for(var Se=z.length,Ve=B?Se:-1,Je=sr(z);(B?Ve--:++Ve<Se)&&me(Je[Ve],Ve,Je)!==!1;);return z}}function nF(_){return function(B,z,me){for(var Se=-1,Ve=sr(B),Je=me(B),ot=Je.length;ot--;){var ht=Je[_?ot:++Se];if(z(Ve[ht],ht,Ve)===!1)break}return B}}function ZW(_,B,z){var me=B&y,Se=Wh(_);function Ve(){var Je=this&&this!==$a&&this instanceof Ve?Se:_;return Je.apply(me?z:this,arguments)}return Ve}function aF(_){return function(B){B=Ga(B);var z=fm(B)?fl(B):n,me=z?z[0]:B.charAt(0),Se=z?Zc(z,1).join(""):B.slice(1);return me[_]()+Se}}function wm(_){return function(B){return Al(tP(eP(B).replace(Ta,"")),_,"")}}function Wh(_){return function(){var B=arguments;switch(B.length){case 0:return new _;case 1:return new _(B[0]);case 2:return new _(B[0],B[1]);case 3:return new _(B[0],B[1],B[2]);case 4:return new _(B[0],B[1],B[2],B[3]);case 5:return new _(B[0],B[1],B[2],B[3],B[4]);case 6:return new _(B[0],B[1],B[2],B[3],B[4],B[5]);case 7:return new _(B[0],B[1],B[2],B[3],B[4],B[5],B[6])}var z=ym(_.prototype),me=_.apply(z,B);return Br(me)?me:z}}function ej(_,B,z){var me=Wh(_);function Se(){for(var Ve=arguments.length,Je=Et(Ve),ot=Ve,ht=bm(Se);ot--;)Je[ot]=arguments[ot];var Mt=Ve<3&&Je[0]!==ht&&Je[Ve-1]!==ht?[]:jc(Je,ht);if(Ve-=Mt.length,Ve<z)return lF(_,B,x1,Se.placeholder,n,Je,Mt,n,n,z-Ve);var Ot=this&&this!==$a&&this instanceof Se?me:_;return Js(Ot,this,Je)}return Se}function rF(_){return function(B,z,me){var Se=sr(B);if(!Xo(B)){var Ve=Fn(z,3);B=Bs(B),z=function(ot){return Ve(Se[ot],ot,Se)}}var Je=_(B,z,me);return Je>-1?Se[Ve?B[Je]:Je]:n}}function sF(_){return tc(function(B){var z=B.length,me=z,Se=Ni.prototype.thru;for(_&&B.reverse();me--;){var Ve=B[me];if(typeof Ve!="function")throw new Ri(o);if(Se&&!Je&&B1(Ve)=="wrapper")var Je=new Ni([],!0)}for(me=Je?me:z;++me<z;){Ve=B[me];var ot=B1(Ve),ht=ot=="wrapper"?jb(Ve):n;ht&&Jb(ht[0])&&ht[1]==(S|x|D|E)&&!ht[4].length&&ht[9]==1?Je=Je[B1(ht[0])].apply(Je,ht[3]):Je=Ve.length==1&&Jb(Ve)?Je[ot]():Je.thru(Ve)}return function(){var Mt=arguments,Ot=Mt[0];if(Je&&Mt.length==1&&Xn(Ot))return Je.plant(Ot).value();for(var Qt=0,sn=z?B[Qt].apply(this,Mt):Ot;++Qt<z;)sn=B[Qt].call(this,sn);return sn}})}function x1(_,B,z,me,Se,Ve,Je,ot,ht,Mt){var Ot=B&S,Qt=B&y,sn=B&w,yn=B&(x|T),Dn=B&C,sa=sn?n:Wh(_);function Un(){for(var da=arguments.length,ha=Et(da),vi=da;vi--;)ha[vi]=arguments[vi];if(yn)var Po=bm(Un),hi=AK(ha,Po);if(me&&(ha=ZI(ha,me,Se,yn)),Ve&&(ha=eF(ha,Ve,Je,yn)),da-=hi,yn&&da<Mt){var Gr=jc(ha,Po);return lF(_,B,x1,Un.placeholder,z,ha,Gr,ot,ht,Mt-da)}var hl=Qt?z:this,sc=sn?hl[_]:_;return da=ha.length,ot?ha=_j(ha,ot):Dn&&da>1&&ha.reverse(),Ot&&ht<da&&(ha.length=ht),this&&this!==$a&&this instanceof Un&&(sc=sa||Wh(sc)),sc.apply(hl,ha)}return Un}function oF(_,B){return function(z,me){return kW(z,_,B(me),{})}}function C1(_,B){return function(z,me){var Se;if(z===n&&me===n)return B;if(z!==n&&(Se=z),me!==n){if(Se===n)return me;typeof z=="string"||typeof me=="string"?(z=fi(z),me=fi(me)):(z=zI(z),me=zI(me)),Se=_(z,me)}return Se}}function Gb(_){return tc(function(B){return B=rr(B,Qa(Fn())),la(function(z){var me=this;return _(B,function(Se){return Js(Se,me,z)})})})}function S1(_,B){B=B===n?" ":fi(B);var z=B.length;if(z<2)return z?Vb(B,_):B;var me=Vb(B,d1(_/mm(B)));return fm(B)?Zc(fl(me),0,_).join(""):me.slice(0,_)}function tj(_,B,z,me){var Se=B&y,Ve=Wh(_);function Je(){for(var ot=-1,ht=arguments.length,Mt=-1,Ot=me.length,Qt=Et(Ot+ht),sn=this&&this!==$a&&this instanceof Je?Ve:_;++Mt<Ot;)Qt[Mt]=me[Mt];for(;ht--;)Qt[Mt++]=arguments[++ot];return Js(sn,Se?z:this,Qt)}return Je}function iF(_){return function(B,z,me){return me&&typeof me!="number"&&Fo(B,z,me)&&(z=me=n),B=rc(B),z===n?(z=B,B=0):z=rc(z),me=me===n?B<z?1:-1:rc(me),OW(B,z,me,_)}}function E1(_){return function(B,z){return typeof B=="string"&&typeof z=="string"||(B=Oi(B),z=Oi(z)),_(B,z)}}function lF(_,B,z,me,Se,Ve,Je,ot,ht,Mt){var Ot=B&x,Qt=Ot?Je:n,sn=Ot?n:Je,yn=Ot?Ve:n,Dn=Ot?n:Ve;B|=Ot?D:k,B&=~(Ot?k:D),B&b||(B&=-4);var sa=[_,B,Se,yn,Qt,Dn,sn,ot,ht,Mt],Un=z.apply(n,sa);return Jb(_)&&_F(Un,sa),Un.placeholder=me,wF(Un,_,B)}function zb(_){var B=As[_];return function(z,me){if(z=Oi(z),me=me==null?0:Zs(aa(me),292),me&&wI(z)){var Se=(Ga(z)+"e").split("e"),Ve=B(Se[0]+"e"+(+Se[1]+me));return Se=(Ga(Ve)+"e").split("e"),+(Se[0]+"e"+(+Se[1]-me))}return B(z)}}var nj=pm&&1/t1(new pm([,-0]))[1]==X?function(_){return new pm(_)}:fx;function uF(_){return function(B){var z=eo(B);return z==de?wb(B):z==Te?yK(B):_a(B,_(B))}}function ec(_,B,z,me,Se,Ve,Je,ot){var ht=B&w;if(!ht&&typeof _!="function")throw new Ri(o);var Mt=me?me.length:0;if(Mt||(B&=-97,me=Se=n),Je=Je===n?Je:fs(aa(Je),0),ot=ot===n?ot:aa(ot),Mt-=Se?Se.length:0,B&k){var Ot=me,Qt=Se;me=Se=n}var sn=ht?n:jb(_),yn=[_,B,z,me,Se,Ot,Qt,Ve,Je,ot];if(sn&&pj(yn,sn),_=yn[0],B=yn[1],z=yn[2],me=yn[3],Se=yn[4],ot=yn[9]=yn[9]===n?ht?0:_.length:fs(yn[9]-Mt,0),!ot&&B&(x|T)&&(B&=-25),!B||B==y)var Dn=ZW(_,B,z);else B==x||B==T?Dn=ej(_,B,ot):(B==D||B==(y|D))&&!Se.length?Dn=tj(_,B,z,me):Dn=x1.apply(n,yn);var sa=sn?QI:_F;return wF(sa(Dn,yn),_,B)}function cF(_,B,z,me){return _===n||vl(_,hm[z])&&!Ya.call(me,z)?B:_}function dF(_,B,z,me,Se,Ve){return Br(_)&&Br(B)&&(Ve.set(B,_),y1(_,B,n,dF,Ve),Ve.delete(B)),_}function aj(_){return Yh(_)?n:_}function AF(_,B,z,me,Se,Ve){var Je=z&p,ot=_.length,ht=B.length;if(ot!=ht&&!(Je&&ht>ot))return!1;var Mt=Ve.get(_),Ot=Ve.get(B);if(Mt&&Ot)return Mt==B&&Ot==_;var Qt=-1,sn=!0,yn=z&g?new _A:n;for(Ve.set(_,B),Ve.set(B,_);++Qt<ot;){var Dn=_[Qt],sa=B[Qt];if(me)var Un=Je?me(sa,Dn,Qt,B,_,Ve):me(Dn,sa,Qt,_,B,Ve);if(Un!==n){if(Un)continue;sn=!1;break}if(yn){if(!dm(B,function(da,ha){if(!Ns(yn,ha)&&(Dn===da||Se(Dn,da,z,me,Ve)))return yn.push(ha)})){sn=!1;break}}else if(!(Dn===sa||Se(Dn,sa,z,me,Ve))){sn=!1;break}}return Ve.delete(_),Ve.delete(B),sn}function rj(_,B,z,me,Se,Ve,Je){switch(z){case dt:if(_.byteLength!=B.byteLength||_.byteOffset!=B.byteOffset)return!1;_=_.buffer,B=B.buffer;case Ue:return!(_.byteLength!=B.byteLength||!Ve(new i1(_),new i1(B)));case W:case ee:case _e:return vl(+_,+B);case oe:return _.name==B.name&&_.message==B.message;case Be:case Oe:return _==B+"";case de:var ot=wb;case Te:var ht=me&p;if(ot||(ot=t1),_.size!=B.size&&!ht)return!1;var Mt=Je.get(_);if(Mt)return Mt==B;me|=g,Je.set(_,B);var Ot=AF(ot(_),ot(B),me,Se,Ve,Je);return Je.delete(_),Ot;case Me:if(Hh)return Hh.call(_)==Hh.call(B)}return!1}function sj(_,B,z,me,Se,Ve){var Je=z&p,ot=Kb(_),ht=ot.length,Mt=Kb(B),Ot=Mt.length;if(ht!=Ot&&!Je)return!1;for(var Qt=ht;Qt--;){var sn=ot[Qt];if(!(Je?sn in B:Ya.call(B,sn)))return!1}var yn=Ve.get(_),Dn=Ve.get(B);if(yn&&Dn)return yn==B&&Dn==_;var sa=!0;Ve.set(_,B),Ve.set(B,_);for(var Un=Je;++Qt<ht;){sn=ot[Qt];var da=_[sn],ha=B[sn];if(me)var vi=Je?me(ha,da,sn,B,_,Ve):me(da,ha,sn,_,B,Ve);if(!(vi===n?da===ha||Se(da,ha,z,me,Ve):vi)){sa=!1;break}Un||(Un=sn=="constructor")}if(sa&&!Un){var Po=_.constructor,hi=B.constructor;Po!=hi&&"constructor"in _&&"constructor"in B&&!(typeof Po=="function"&&Po instanceof Po&&typeof hi=="function"&&hi instanceof hi)&&(sa=!1)}return Ve.delete(_),Ve.delete(B),sa}function tc(_){return ex(gF(_,n,BF),_+"")}function Kb(_){return PI(_,Bs,Yb)}function Wb(_){return PI(_,Jo,fF)}var jb=f1?function(_){return f1.get(_)}:fx;function B1(_){for(var B=_.name+"",z=gm[B],me=Ya.call(gm,B)?z.length:0;me--;){var Se=z[me],Ve=Se.func;if(Ve==null||Ve==_)return Se.name}return B}function bm(_){var B=Ya.call(De,"placeholder")?De:_;return B.placeholder}function Fn(){var _=De.iteratee||dx;return _=_===dx?RI:_,arguments.length?_(arguments[0],arguments[1]):_}function k1(_,B){var z=_.__data__;return fj(B)?z[typeof B=="string"?"string":"hash"]:z.map}function qb(_){for(var B=Bs(_),z=B.length;z--;){var me=B[z],Se=_[me];B[z]=[me,Se,hF(Se)]}return B}function xA(_,B){var z=hK(_,B);return UI(z)?z:n}function oj(_){var B=Ya.call(_,gA),z=_[gA];try{_[gA]=n;var me=!0}catch{}var Se=s1.call(_);return me&&(B?_[gA]=z:delete _[gA]),Se}var Yb=xb?function(_){return _==null?[]:(_=sr(_),Ui(xb(_),function(B){return yI.call(_,B)}))}:mx,fF=xb?function(_){for(var B=[];_;)dl(B,Yb(_)),_=l1(_);return B}:mx,eo=Io;(Cb&&eo(new Cb(new ArrayBuffer(1)))!=dt||Lh&&eo(new Lh)!=de||Sb&&eo(Sb.resolve())!=Ee||pm&&eo(new pm)!=Te||Mh&&eo(new Mh)!=ut)&&(eo=function(_){var B=Io(_),z=B==be?_.constructor:n,me=z?CA(z):"";if(me)switch(me){case $K:return dt;case QK:return de;case GK:return Ee;case zK:return Te;case KK:return ut}return B});function ij(_,B,z){for(var me=-1,Se=z.length;++me<Se;){var Ve=z[me],Je=Ve.size;switch(Ve.type){case"drop":_+=Je;break;case"dropRight":B-=Je;break;case"take":B=Zs(B,_+Je);break;case"takeRight":_=fs(_,B-Je);break}}return{start:_,end:B}}function lj(_){var B=_.match(ke);return B?B[1].split(ze):[]}function mF(_,B,z){B=Jc(B,_);for(var me=-1,Se=B.length,Ve=!1;++me<Se;){var Je=cu(B[me]);if(!(Ve=_!=null&&z(_,Je)))break;_=_[Je]}return Ve||++me!=Se?Ve:(Se=_==null?0:_.length,!!Se&&R1(Se)&&nc(Je,Se)&&(Xn(_)||SA(_)))}function uj(_){var B=_.length,z=new _.constructor(B);return B&&typeof _[0]=="string"&&Ya.call(_,"index")&&(z.index=_.index,z.input=_.input),z}function vF(_){return typeof _.constructor=="function"&&!jh(_)?ym(l1(_)):{}}function cj(_,B,z){var me=_.constructor;switch(B){case Ue:return Qb(_);case W:case ee:return new me(+_);case dt:return WW(_,z);case Ft:case it:case qe:case yt:case mt:case xt:case an:case Cn:case oa:return XI(_,z);case de:return new me;case _e:case Oe:return new me(_);case Be:return jW(_);case Te:return new me;case Me:return qW(_)}}function dj(_,B){var z=B.length;if(!z)return _;var me=z-1;return B[me]=(z>1?"& ":"")+B[me],B=B.join(z>2?", ":" "),_.replace(Bn,`{
/* [wrapped with `+B+`] */
`)}function Aj(_){return Xn(_)||SA(_)||!!(_I&&_&&_[_I])}function nc(_,B){var z=typeof _;return B=B??le,!!B&&(z=="number"||z!="symbol"&&nt.test(_))&&_>-1&&_%1==0&&_<B}function Fo(_,B,z){if(!Br(z))return!1;var me=typeof B;return(me=="number"?Xo(z)&&nc(B,z.length):me=="string"&&B in z)?vl(z[B],_):!1}function Xb(_,B){if(Xn(_))return!1;var z=typeof _;return z=="number"||z=="symbol"||z=="boolean"||_==null||mi(_)?!0:Wt.test(_)||!Pt.test(_)||B!=null&&_ in sr(B)}function fj(_){var B=typeof _;return B=="string"||B=="number"||B=="symbol"||B=="boolean"?_!=="__proto__":_===null}function Jb(_){var B=B1(_),z=De[B];if(typeof z!="function"||!(B in Aa.prototype))return!1;if(_===z)return!0;var me=jb(z);return!!me&&_===me[0]}function mj(_){return!!hI&&hI in _}var vj=a1?ac:vx;function jh(_){var B=_&&_.constructor,z=typeof B=="function"&&B.prototype||hm;return _===z}function hF(_){return _===_&&!Br(_)}function pF(_,B){return function(z){return z==null?!1:z[_]===B&&(B!==n||_ in sr(z))}}function hj(_){var B=D1(_,function(me){return z.size===A&&z.clear(),me}),z=B.cache;return B}function pj(_,B){var z=_[1],me=B[1],Se=z|me,Ve=Se<(y|w|S),Je=me==S&&z==x||me==S&&z==E&&_[7].length<=B[8]||me==(S|E)&&B[7].length<=B[8]&&z==x;if(!(Ve||Je))return _;me&y&&(_[2]=B[2],Se|=z&y?0:b);var ot=B[3];if(ot){var ht=_[3];_[3]=ht?ZI(ht,ot,B[4]):ot,_[4]=ht?jc(_[3],d):B[4]}return ot=B[5],ot&&(ht=_[5],_[5]=ht?eF(ht,ot,B[6]):ot,_[6]=ht?jc(_[5],d):B[6]),ot=B[7],ot&&(_[7]=ot),me&S&&(_[8]=_[8]==null?B[8]:Zs(_[8],B[8])),_[9]==null&&(_[9]=B[9]),_[0]=B[0],_[1]=Se,_}function gj(_){var B=[];if(_!=null)for(var z in sr(_))B.push(z);return B}function yj(_){return s1.call(_)}function gF(_,B,z){return B=fs(B===n?_.length-1:B,0),function(){for(var me=arguments,Se=-1,Ve=fs(me.length-B,0),Je=Et(Ve);++Se<Ve;)Je[Se]=me[B+Se];Se=-1;for(var ot=Et(B+1);++Se<B;)ot[Se]=me[Se];return ot[B]=z(Je),Js(_,this,ot)}}function yF(_,B){return B.length<2?_:bA(_,Li(B,0,-1))}function _j(_,B){for(var z=_.length,me=Zs(B.length,z),Se=Yo(_);me--;){var Ve=B[me];_[me]=nc(Ve,z)?Se[Ve]:n}return _}function Zb(_,B){if(!(B==="constructor"&&typeof _[B]=="function")&&B!="__proto__")return _[B]}var _F=bF(QI),qh=RK||function(_,B){return $a.setTimeout(_,B)},ex=bF(QW);function wF(_,B,z){var me=B+"";return ex(_,dj(me,wj(lj(me),z)))}function bF(_){var B=0,z=0;return function(){var me=MK(),Se=H-(me-z);if(z=me,Se>0){if(++B>=L)return arguments[0]}else B=0;return _.apply(n,arguments)}}function T1(_,B){var z=-1,me=_.length,Se=me-1;for(B=B===n?me:B;++z<B;){var Ve=Nb(z,Se),Je=_[Ve];_[Ve]=_[z],_[z]=Je}return _.length=B,_}var xF=hj(function(_){var B=[];return _.charCodeAt(0)===46&&B.push(""),_.replace(Lt,function(z,me,Se,Ve){B.push(Se?Ve.replace(Ge,"$1"):me||z)}),B});function cu(_){if(typeof _=="string"||mi(_))return _;var B=_+"";return B=="0"&&1/_==-X?"-0":B}function CA(_){if(_!=null){try{return r1.call(_)}catch{}try{return _+""}catch{}}return""}function wj(_,B){return To(J,function(z){var me="_."+z[0];B&z[1]&&!vA(_,me)&&_.push(me)}),_.sort()}function CF(_){if(_ instanceof Aa)return _.clone();var B=new Ni(_.__wrapped__,_.__chain__);return B.__actions__=Yo(_.__actions__),B.__index__=_.__index__,B.__values__=_.__values__,B}function bj(_,B,z){(z?Fo(_,B,z):B===n)?B=1:B=fs(aa(B),0);var me=_==null?0:_.length;if(!me||B<1)return[];for(var Se=0,Ve=0,Je=Et(d1(me/B));Se<me;)Je[Ve++]=Li(_,Se,Se+=B);return Je}function xj(_){for(var B=-1,z=_==null?0:_.length,me=0,Se=[];++B<z;){var Ve=_[B];Ve&&(Se[me++]=Ve)}return Se}function Cj(){var _=arguments.length;if(!_)return[];for(var B=Et(_-1),z=arguments[0],me=_;me--;)B[me-1]=arguments[me];return dl(Xn(z)?Yo(z):[z],Vs(B,1))}var Sj=la(function(_,B){return Qr(_)?Qh(_,Vs(B,1,Qr,!0)):[]}),Ej=la(function(_,B){var z=Mi(B);return Qr(z)&&(z=n),Qr(_)?Qh(_,Vs(B,1,Qr,!0),Fn(z,2)):[]}),Bj=la(function(_,B){var z=Mi(B);return Qr(z)&&(z=n),Qr(_)?Qh(_,Vs(B,1,Qr,!0),n,z):[]});function kj(_,B,z){var me=_==null?0:_.length;return me?(B=z||B===n?1:aa(B),Li(_,B<0?0:B,me)):[]}function Tj(_,B,z){var me=_==null?0:_.length;return me?(B=z||B===n?1:aa(B),B=me-B,Li(_,0,B<0?0:B)):[]}function Ij(_,B){return _&&_.length?w1(_,Fn(B,3),!0,!0):[]}function Fj(_,B){return _&&_.length?w1(_,Fn(B,3),!0):[]}function Pj(_,B,z,me){var Se=_==null?0:_.length;return Se?(z&&typeof z!="number"&&Fo(_,B,z)&&(z=0,me=Se),CW(_,B,z,me)):[]}function SF(_,B,z){var me=_==null?0:_.length;if(!me)return-1;var Se=z==null?0:aa(z);return Se<0&&(Se=fs(me+Se,0)),hA(_,Fn(B,3),Se)}function EF(_,B,z){var me=_==null?0:_.length;if(!me)return-1;var Se=me-1;return z!==n&&(Se=aa(z),Se=z<0?fs(me+Se,0):Zs(Se,me-1)),hA(_,Fn(B,3),Se,!0)}function BF(_){var B=_==null?0:_.length;return B?Vs(_,1):[]}function Dj(_){var B=_==null?0:_.length;return B?Vs(_,X):[]}function Uj(_,B){var z=_==null?0:_.length;return z?(B=B===n?1:aa(B),Vs(_,B)):[]}function Rj(_){for(var B=-1,z=_==null?0:_.length,me={};++B<z;){var Se=_[B];me[Se[0]]=Se[1]}return me}function kF(_){return _&&_.length?_[0]:n}function Nj(_,B,z){var me=_==null?0:_.length;if(!me)return-1;var Se=z==null?0:aa(z);return Se<0&&(Se=fs(me+Se,0)),Ai(_,B,Se)}function Vj(_){var B=_==null?0:_.length;return B?Li(_,0,-1):[]}var Lj=la(function(_){var B=rr(_,Hb);return B.length&&B[0]===_[0]?Fb(B):[]}),Mj=la(function(_){var B=Mi(_),z=rr(_,Hb);return B===Mi(z)?B=n:z.pop(),z.length&&z[0]===_[0]?Fb(z,Fn(B,2)):[]}),Oj=la(function(_){var B=Mi(_),z=rr(_,Hb);return B=typeof B=="function"?B:n,B&&z.pop(),z.length&&z[0]===_[0]?Fb(z,n,B):[]});function Hj(_,B){return _==null?"":VK.call(_,B)}function Mi(_){var B=_==null?0:_.length;return B?_[B-1]:n}function $j(_,B,z){var me=_==null?0:_.length;if(!me)return-1;var Se=me;return z!==n&&(Se=aa(z),Se=Se<0?fs(me+Se,0):Zs(Se,me-1)),B===B?wK(_,B,Se):hA(_,fe,Se,!0)}function Qj(_,B){return _&&_.length?MI(_,aa(B)):n}var Gj=la(TF);function TF(_,B){return _&&_.length&&B&&B.length?Rb(_,B):_}function zj(_,B,z){return _&&_.length&&B&&B.length?Rb(_,B,Fn(z,2)):_}function Kj(_,B,z){return _&&_.length&&B&&B.length?Rb(_,B,n,z):_}var Wj=tc(function(_,B){var z=_==null?0:_.length,me=Bb(_,B);return $I(_,rr(B,function(Se){return nc(Se,z)?+Se:Se}).sort(JI)),me});function jj(_,B){var z=[];if(!(_&&_.length))return z;var me=-1,Se=[],Ve=_.length;for(B=Fn(B,3);++me<Ve;){var Je=_[me];B(Je,me,_)&&(z.push(Je),Se.push(me))}return $I(_,Se),z}function tx(_){return _==null?_:HK.call(_)}function qj(_,B,z){var me=_==null?0:_.length;return me?(z&&typeof z!="number"&&Fo(_,B,z)?(B=0,z=me):(B=B==null?0:aa(B),z=z===n?me:aa(z)),Li(_,B,z)):[]}function Yj(_,B){return _1(_,B)}function Xj(_,B,z){return Lb(_,B,Fn(z,2))}function Jj(_,B){var z=_==null?0:_.length;if(z){var me=_1(_,B);if(me<z&&vl(_[me],B))return me}return-1}function Zj(_,B){return _1(_,B,!0)}function eq(_,B,z){return Lb(_,B,Fn(z,2),!0)}function tq(_,B){var z=_==null?0:_.length;if(z){var me=_1(_,B,!0)-1;if(vl(_[me],B))return me}return-1}function nq(_){return _&&_.length?GI(_):[]}function aq(_,B){return _&&_.length?GI(_,Fn(B,2)):[]}function rq(_){var B=_==null?0:_.length;return B?Li(_,1,B):[]}function sq(_,B,z){return _&&_.length?(B=z||B===n?1:aa(B),Li(_,0,B<0?0:B)):[]}function oq(_,B,z){var me=_==null?0:_.length;return me?(B=z||B===n?1:aa(B),B=me-B,Li(_,B<0?0:B,me)):[]}function iq(_,B){return _&&_.length?w1(_,Fn(B,3),!1,!0):[]}function lq(_,B){return _&&_.length?w1(_,Fn(B,3)):[]}var uq=la(function(_){return Xc(Vs(_,1,Qr,!0))}),cq=la(function(_){var B=Mi(_);return Qr(B)&&(B=n),Xc(Vs(_,1,Qr,!0),Fn(B,2))}),dq=la(function(_){var B=Mi(_);return B=typeof B=="function"?B:n,Xc(Vs(_,1,Qr,!0),n,B)});function Aq(_){return _&&_.length?Xc(_):[]}function fq(_,B){return _&&_.length?Xc(_,Fn(B,2)):[]}function mq(_,B){return B=typeof B=="function"?B:n,_&&_.length?Xc(_,n,B):[]}function nx(_){if(!(_&&_.length))return[];var B=0;return _=Ui(_,function(z){if(Qr(z))return B=fs(z.length,B),!0}),$r(B,function(z){return rr(_,Ne(z))})}function IF(_,B){if(!(_&&_.length))return[];var z=nx(_);return B==null?z:rr(z,function(me){return Js(B,n,me)})}var vq=la(function(_,B){return Qr(_)?Qh(_,B):[]}),hq=la(function(_){return Ob(Ui(_,Qr))}),pq=la(function(_){var B=Mi(_);return Qr(B)&&(B=n),Ob(Ui(_,Qr),Fn(B,2))}),gq=la(function(_){var B=Mi(_);return B=typeof B=="function"?B:n,Ob(Ui(_,Qr),n,B)}),yq=la(nx);function _q(_,B){return jI(_||[],B||[],$h)}function wq(_,B){return jI(_||[],B||[],Kh)}var bq=la(function(_){var B=_.length,z=B>1?_[B-1]:n;return z=typeof z=="function"?(_.pop(),z):n,IF(_,z)});function FF(_){var B=De(_);return B.__chain__=!0,B}function xq(_,B){return B(_),_}function I1(_,B){return B(_)}var Cq=tc(function(_){var B=_.length,z=B?_[0]:0,me=this.__wrapped__,Se=function(Ve){return Bb(Ve,_)};return B>1||this.__actions__.length||!(me instanceof Aa)||!nc(z)?this.thru(Se):(me=me.slice(z,+z+(B?1:0)),me.__actions__.push({func:I1,args:[Se],thisArg:n}),new Ni(me,this.__chain__).thru(function(Ve){return B&&!Ve.length&&Ve.push(n),Ve}))});function Sq(){return FF(this)}function Eq(){return new Ni(this.value(),this.__chain__)}function Bq(){this.__values__===n&&(this.__values__=zF(this.value()));var _=this.__index__>=this.__values__.length,B=_?n:this.__values__[this.__index__++];return{done:_,value:B}}function kq(){return this}function Tq(_){for(var B,z=this;z instanceof v1;){var me=CF(z);me.__index__=0,me.__values__=n,B?Se.__wrapped__=me:B=me;var Se=me;z=z.__wrapped__}return Se.__wrapped__=_,B}function Iq(){var _=this.__wrapped__;if(_ instanceof Aa){var B=_;return this.__actions__.length&&(B=new Aa(this)),B=B.reverse(),B.__actions__.push({func:I1,args:[tx],thisArg:n}),new Ni(B,this.__chain__)}return this.thru(tx)}function Fq(){return WI(this.__wrapped__,this.__actions__)}var Pq=b1(function(_,B,z){Ya.call(_,z)?++_[z]:Zu(_,z,1)});function Dq(_,B,z){var me=Xn(_)?cm:xW;return z&&Fo(_,B,z)&&(B=n),me(_,Fn(B,3))}function Uq(_,B){var z=Xn(_)?Ui:II;return z(_,Fn(B,3))}var Rq=rF(SF),Nq=rF(EF);function Vq(_,B){return Vs(F1(_,B),1)}function Lq(_,B){return Vs(F1(_,B),X)}function Mq(_,B,z){return z=z===n?1:aa(z),Vs(F1(_,B),z)}function PF(_,B){var z=Xn(_)?To:Yc;return z(_,Fn(B,3))}function DF(_,B){var z=Xn(_)?Xg:TI;return z(_,Fn(B,3))}var Oq=b1(function(_,B,z){Ya.call(_,z)?_[z].push(B):Zu(_,z,[B])});function Hq(_,B,z,me){_=Xo(_)?_:Cm(_),z=z&&!me?aa(z):0;var Se=_.length;return z<0&&(z=fs(Se+z,0)),N1(_)?z<=Se&&_.indexOf(B,z)>-1:!!Se&&Ai(_,B,z)>-1}var $q=la(function(_,B,z){var me=-1,Se=typeof B=="function",Ve=Xo(_)?Et(_.length):[];return Yc(_,function(Je){Ve[++me]=Se?Js(B,Je,z):Gh(Je,B,z)}),Ve}),Qq=b1(function(_,B,z){Zu(_,z,B)});function F1(_,B){var z=Xn(_)?rr:NI;return z(_,Fn(B,3))}function Gq(_,B,z,me){return _==null?[]:(Xn(B)||(B=B==null?[]:[B]),z=me?n:z,Xn(z)||(z=z==null?[]:[z]),OI(_,B,z))}var zq=b1(function(_,B,z){_[z?0:1].push(B)},function(){return[[],[]]});function Kq(_,B,z){var me=Xn(_)?Al:Bt,Se=arguments.length<3;return me(_,Fn(B,4),z,Se,Yc)}function Wq(_,B,z){var me=Xn(_)?Jg:Bt,Se=arguments.length<3;return me(_,Fn(B,4),z,Se,TI)}function jq(_,B){var z=Xn(_)?Ui:II;return z(_,U1(Fn(B,3)))}function qq(_){var B=Xn(_)?SI:HW;return B(_)}function Yq(_,B,z){(z?Fo(_,B,z):B===n)?B=1:B=aa(B);var me=Xn(_)?gW:$W;return me(_,B)}function Xq(_){var B=Xn(_)?yW:GW;return B(_)}function Jq(_){if(_==null)return 0;if(Xo(_))return N1(_)?mm(_):_.length;var B=eo(_);return B==de||B==Te?_.size:Db(_).length}function Zq(_,B,z){var me=Xn(_)?dm:zW;return z&&Fo(_,B,z)&&(B=n),me(_,Fn(B,3))}var eY=la(function(_,B){if(_==null)return[];var z=B.length;return z>1&&Fo(_,B[0],B[1])?B=[]:z>2&&Fo(B[0],B[1],B[2])&&(B=[B[0]]),OI(_,Vs(B,1),[])}),P1=UK||function(){return $a.Date.now()};function tY(_,B){if(typeof B!="function")throw new Ri(o);return _=aa(_),function(){if(--_<1)return B.apply(this,arguments)}}function UF(_,B,z){return B=z?n:B,B=_&&B==null?_.length:B,ec(_,S,n,n,n,n,B)}function RF(_,B){var z;if(typeof B!="function")throw new Ri(o);return _=aa(_),function(){return--_>0&&(z=B.apply(this,arguments)),_<=1&&(B=n),z}}var ax=la(function(_,B,z){var me=y;if(z.length){var Se=jc(z,bm(ax));me|=D}return ec(_,me,B,z,Se)}),NF=la(function(_,B,z){var me=y|w;if(z.length){var Se=jc(z,bm(NF));me|=D}return ec(B,me,_,z,Se)});function VF(_,B,z){B=z?n:B;var me=ec(_,x,n,n,n,n,n,B);return me.placeholder=VF.placeholder,me}function LF(_,B,z){B=z?n:B;var me=ec(_,T,n,n,n,n,n,B);return me.placeholder=LF.placeholder,me}function MF(_,B,z){var me,Se,Ve,Je,ot,ht,Mt=0,Ot=!1,Qt=!1,sn=!0;if(typeof _!="function")throw new Ri(o);B=Oi(B)||0,Br(z)&&(Ot=!!z.leading,Qt="maxWait"in z,Ve=Qt?fs(Oi(z.maxWait)||0,B):Ve,sn="trailing"in z?!!z.trailing:sn);function yn(Gr){var hl=me,sc=Se;return me=Se=n,Mt=Gr,Je=_.apply(sc,hl),Je}function Dn(Gr){return Mt=Gr,ot=qh(da,B),Ot?yn(Gr):Je}function sa(Gr){var hl=Gr-ht,sc=Gr-Mt,rP=B-hl;return Qt?Zs(rP,Ve-sc):rP}function Un(Gr){var hl=Gr-ht,sc=Gr-Mt;return ht===n||hl>=B||hl<0||Qt&&sc>=Ve}function da(){var Gr=P1();if(Un(Gr))return ha(Gr);ot=qh(da,sa(Gr))}function ha(Gr){return ot=n,sn&&me?yn(Gr):(me=Se=n,Je)}function vi(){ot!==n&&qI(ot),Mt=0,me=ht=Se=ot=n}function Po(){return ot===n?Je:ha(P1())}function hi(){var Gr=P1(),hl=Un(Gr);if(me=arguments,Se=this,ht=Gr,hl){if(ot===n)return Dn(ht);if(Qt)return qI(ot),ot=qh(da,B),yn(ht)}return ot===n&&(ot=qh(da,B)),Je}return hi.cancel=vi,hi.flush=Po,hi}var nY=la(function(_,B){return kI(_,1,B)}),aY=la(function(_,B,z){return kI(_,Oi(B)||0,z)});function rY(_){return ec(_,C)}function D1(_,B){if(typeof _!="function"||B!=null&&typeof B!="function")throw new Ri(o);var z=function(){var me=arguments,Se=B?B.apply(this,me):me[0],Ve=z.cache;if(Ve.has(Se))return Ve.get(Se);var Je=_.apply(this,me);return z.cache=Ve.set(Se,Je)||Ve,Je};return z.cache=new(D1.Cache||Ju),z}D1.Cache=Ju;function U1(_){if(typeof _!="function")throw new Ri(o);return function(){var B=arguments;switch(B.length){case 0:return!_.call(this);case 1:return!_.call(this,B[0]);case 2:return!_.call(this,B[0],B[1]);case 3:return!_.call(this,B[0],B[1],B[2])}return!_.apply(this,B)}}function sY(_){return RF(2,_)}var oY=KW(function(_,B){B=B.length==1&&Xn(B[0])?rr(B[0],Qa(Fn())):rr(Vs(B,1),Qa(Fn()));var z=B.length;return la(function(me){for(var Se=-1,Ve=Zs(me.length,z);++Se<Ve;)me[Se]=B[Se].call(this,me[Se]);return Js(_,this,me)})}),rx=la(function(_,B){var z=jc(B,bm(rx));return ec(_,D,n,B,z)}),OF=la(function(_,B){var z=jc(B,bm(OF));return ec(_,k,n,B,z)}),iY=tc(function(_,B){return ec(_,E,n,n,n,B)});function lY(_,B){if(typeof _!="function")throw new Ri(o);return B=B===n?B:aa(B),la(_,B)}function uY(_,B){if(typeof _!="function")throw new Ri(o);return B=B==null?0:fs(aa(B),0),la(function(z){var me=z[B],Se=Zc(z,0,B);return me&&dl(Se,me),Js(_,this,Se)})}function cY(_,B,z){var me=!0,Se=!0;if(typeof _!="function")throw new Ri(o);return Br(z)&&(me="leading"in z?!!z.leading:me,Se="trailing"in z?!!z.trailing:Se),MF(_,B,{leading:me,maxWait:B,trailing:Se})}function dY(_){return UF(_,1)}function AY(_,B){return rx($b(B),_)}function fY(){if(!arguments.length)return[];var _=arguments[0];return Xn(_)?_:[_]}function mY(_){return Vi(_,v)}function vY(_,B){return B=typeof B=="function"?B:n,Vi(_,v,B)}function hY(_){return Vi(_,f|v)}function pY(_,B){return B=typeof B=="function"?B:n,Vi(_,f|v,B)}function gY(_,B){return B==null||BI(_,B,Bs(B))}function vl(_,B){return _===B||_!==_&&B!==B}var yY=E1(Ib),_Y=E1(function(_,B){return _>=B}),SA=DI((function(){return arguments})())?DI:function(_){return Rr(_)&&Ya.call(_,"callee")&&!yI.call(_,"callee")},Xn=Et.isArray,wY=cl?Qa(cl):TW;function Xo(_){return _!=null&&R1(_.length)&&!ac(_)}function Qr(_){return Rr(_)&&Xo(_)}function bY(_){return _===!0||_===!1||Rr(_)&&Io(_)==W}var ed=NK||vx,xY=um?Qa(um):IW;function CY(_){return Rr(_)&&_.nodeType===1&&!Yh(_)}function SY(_){if(_==null)return!0;if(Xo(_)&&(Xn(_)||typeof _=="string"||typeof _.splice=="function"||ed(_)||xm(_)||SA(_)))return!_.length;var B=eo(_);if(B==de||B==Te)return!_.size;if(jh(_))return!Db(_).length;for(var z in _)if(Ya.call(_,z))return!1;return!0}function EY(_,B){return zh(_,B)}function BY(_,B,z){z=typeof z=="function"?z:n;var me=z?z(_,B):n;return me===n?zh(_,B,n,z):!!me}function sx(_){if(!Rr(_))return!1;var B=Io(_);return B==oe||B==ae||typeof _.message=="string"&&typeof _.name=="string"&&!Yh(_)}function kY(_){return typeof _=="number"&&wI(_)}function ac(_){if(!Br(_))return!1;var B=Io(_);return B==j||B==ce||B==Y||B==Ce}function HF(_){return typeof _=="number"&&_==aa(_)}function R1(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=le}function Br(_){var B=typeof _;return _!=null&&(B=="object"||B=="function")}function Rr(_){return _!=null&&typeof _=="object"}var $F=AA?Qa(AA):PW;function TY(_,B){return _===B||Pb(_,B,qb(B))}function IY(_,B,z){return z=typeof z=="function"?z:n,Pb(_,B,qb(B),z)}function FY(_){return QF(_)&&_!=+_}function PY(_){if(vj(_))throw new jn(s);return UI(_)}function DY(_){return _===null}function UY(_){return _==null}function QF(_){return typeof _=="number"||Rr(_)&&Io(_)==_e}function Yh(_){if(!Rr(_)||Io(_)!=be)return!1;var B=l1(_);if(B===null)return!0;var z=Ya.call(B,"constructor")&&B.constructor;return typeof z=="function"&&z instanceof z&&r1.call(z)==IK}var ox=Rh?Qa(Rh):DW;function RY(_){return HF(_)&&_>=-le&&_<=le}var GF=fA?Qa(fA):UW;function N1(_){return typeof _=="string"||!Xn(_)&&Rr(_)&&Io(_)==Oe}function mi(_){return typeof _=="symbol"||Rr(_)&&Io(_)==Me}var xm=Yg?Qa(Yg):RW;function NY(_){return _===n}function VY(_){return Rr(_)&&eo(_)==ut}function LY(_){return Rr(_)&&Io(_)==Ie}var MY=E1(Ub),OY=E1(function(_,B){return _<=B});function zF(_){if(!_)return[];if(Xo(_))return N1(_)?fl(_):Yo(_);if(Vh&&_[Vh])return gK(_[Vh]());var B=eo(_),z=B==de?wb:B==Te?t1:Cm;return z(_)}function rc(_){if(!_)return _===0?_:0;if(_=Oi(_),_===X||_===-X){var B=_<0?-1:1;return B*Z}return _===_?_:0}function aa(_){var B=rc(_),z=B%1;return B===B?z?B-z:B:0}function KF(_){return _?wA(aa(_),0,q):0}function Oi(_){if(typeof _=="number")return _;if(mi(_))return re;if(Br(_)){var B=typeof _.valueOf=="function"?_.valueOf():_;_=Br(B)?B+"":B}if(typeof _!="string")return _===0?_:+_;_=ds(_);var z=xe.test(_);return z||tt.test(_)?Xs(_.slice(2),z?2:8):ge.test(_)?re:+_}function WF(_){return uu(_,Jo(_))}function HY(_){return _?wA(aa(_),-le,le):_===0?_:0}function Ga(_){return _==null?"":fi(_)}var $Y=_m(function(_,B){if(jh(B)||Xo(B)){uu(B,Bs(B),_);return}for(var z in B)Ya.call(B,z)&&$h(_,z,B[z])}),jF=_m(function(_,B){uu(B,Jo(B),_)}),V1=_m(function(_,B,z,me){uu(B,Jo(B),_,me)}),QY=_m(function(_,B,z,me){uu(B,Bs(B),_,me)}),GY=tc(Bb);function zY(_,B){var z=ym(_);return B==null?z:EI(z,B)}var KY=la(function(_,B){_=sr(_);var z=-1,me=B.length,Se=me>2?B[2]:n;for(Se&&Fo(B[0],B[1],Se)&&(me=1);++z<me;)for(var Ve=B[z],Je=Jo(Ve),ot=-1,ht=Je.length;++ot<ht;){var Mt=Je[ot],Ot=_[Mt];(Ot===n||vl(Ot,hm[Mt])&&!Ya.call(_,Mt))&&(_[Mt]=Ve[Mt])}return _}),WY=la(function(_){return _.push(n,dF),Js(qF,n,_)});function jY(_,B){return Nh(_,Fn(B,3),lu)}function qY(_,B){return Nh(_,Fn(B,3),Tb)}function YY(_,B){return _==null?_:kb(_,Fn(B,3),Jo)}function XY(_,B){return _==null?_:FI(_,Fn(B,3),Jo)}function JY(_,B){return _&&lu(_,Fn(B,3))}function ZY(_,B){return _&&Tb(_,Fn(B,3))}function eX(_){return _==null?[]:g1(_,Bs(_))}function tX(_){return _==null?[]:g1(_,Jo(_))}function ix(_,B,z){var me=_==null?n:bA(_,B);return me===n?z:me}function nX(_,B){return _!=null&&mF(_,B,SW)}function lx(_,B){return _!=null&&mF(_,B,EW)}var aX=oF(function(_,B,z){B!=null&&typeof B.toString!="function"&&(B=s1.call(B)),_[B]=z},cx(Zo)),rX=oF(function(_,B,z){B!=null&&typeof B.toString!="function"&&(B=s1.call(B)),Ya.call(_,B)?_[B].push(z):_[B]=[z]},Fn),sX=la(Gh);function Bs(_){return Xo(_)?CI(_):Db(_)}function Jo(_){return Xo(_)?CI(_,!0):NW(_)}function oX(_,B){var z={};return B=Fn(B,3),lu(_,function(me,Se,Ve){Zu(z,B(me,Se,Ve),me)}),z}function iX(_,B){var z={};return B=Fn(B,3),lu(_,function(me,Se,Ve){Zu(z,Se,B(me,Se,Ve))}),z}var lX=_m(function(_,B,z){y1(_,B,z)}),qF=_m(function(_,B,z,me){y1(_,B,z,me)}),uX=tc(function(_,B){var z={};if(_==null)return z;var me=!1;B=rr(B,function(Ve){return Ve=Jc(Ve,_),me||(me=Ve.length>1),Ve}),uu(_,Wb(_),z),me&&(z=Vi(z,f|m|v,aj));for(var Se=B.length;Se--;)Mb(z,B[Se]);return z});function cX(_,B){return YF(_,U1(Fn(B)))}var dX=tc(function(_,B){return _==null?{}:LW(_,B)});function YF(_,B){if(_==null)return{};var z=rr(Wb(_),function(me){return[me]});return B=Fn(B),HI(_,z,function(me,Se){return B(me,Se[0])})}function AX(_,B,z){B=Jc(B,_);var me=-1,Se=B.length;for(Se||(Se=1,_=n);++me<Se;){var Ve=_==null?n:_[cu(B[me])];Ve===n&&(me=Se,Ve=z),_=ac(Ve)?Ve.call(_):Ve}return _}function fX(_,B,z){return _==null?_:Kh(_,B,z)}function mX(_,B,z,me){return me=typeof me=="function"?me:n,_==null?_:Kh(_,B,z,me)}var XF=uF(Bs),JF=uF(Jo);function vX(_,B,z){var me=Xn(_),Se=me||ed(_)||xm(_);if(B=Fn(B,4),z==null){var Ve=_&&_.constructor;Se?z=me?new Ve:[]:Br(_)?z=ac(Ve)?ym(l1(_)):{}:z={}}return(Se?To:lu)(_,function(Je,ot,ht){return B(z,Je,ot,ht)}),z}function hX(_,B){return _==null?!0:Mb(_,B)}function pX(_,B,z){return _==null?_:KI(_,B,$b(z))}function gX(_,B,z,me){return me=typeof me=="function"?me:n,_==null?_:KI(_,B,$b(z),me)}function Cm(_){return _==null?[]:iu(_,Bs(_))}function yX(_){return _==null?[]:iu(_,Jo(_))}function _X(_,B,z){return z===n&&(z=B,B=n),z!==n&&(z=Oi(z),z=z===z?z:0),B!==n&&(B=Oi(B),B=B===B?B:0),wA(Oi(_),B,z)}function wX(_,B,z){return B=rc(B),z===n?(z=B,B=0):z=rc(z),_=Oi(_),BW(_,B,z)}function bX(_,B,z){if(z&&typeof z!="boolean"&&Fo(_,B,z)&&(B=z=n),z===n&&(typeof B=="boolean"?(z=B,B=n):typeof _=="boolean"&&(z=_,_=n)),_===n&&B===n?(_=0,B=1):(_=rc(_),B===n?(B=_,_=0):B=rc(B)),_>B){var me=_;_=B,B=me}if(z||_%1||B%1){var Se=bI();return Zs(_+Se*(B-_+di("1e-"+((Se+"").length-1))),B)}return Nb(_,B)}var xX=wm(function(_,B,z){return B=B.toLowerCase(),_+(z?ZF(B):B)});function ZF(_){return ux(Ga(_).toLowerCase())}function eP(_){return _=Ga(_),_&&_.replace(et,fK).replace(lA,"")}function CX(_,B,z){_=Ga(_),B=fi(B);var me=_.length;z=z===n?me:wA(aa(z),0,me);var Se=z;return z-=B.length,z>=0&&_.slice(z,Se)==B}function SX(_){return _=Ga(_),_&&We.test(_)?_.replace(en,mK):_}function EX(_){return _=Ga(_),_&&Ln.test(_)?_.replace(ia,"\\$&"):_}var BX=wm(function(_,B,z){return _+(z?"-":"")+B.toLowerCase()}),kX=wm(function(_,B,z){return _+(z?" ":"")+B.toLowerCase()}),TX=aF("toLowerCase");function IX(_,B,z){_=Ga(_),B=aa(B);var me=B?mm(_):0;if(!B||me>=B)return _;var Se=(B-me)/2;return S1(A1(Se),z)+_+S1(d1(Se),z)}function FX(_,B,z){_=Ga(_),B=aa(B);var me=B?mm(_):0;return B&&me<B?_+S1(B-me,z):_}function PX(_,B,z){_=Ga(_),B=aa(B);var me=B?mm(_):0;return B&&me<B?S1(B-me,z)+_:_}function DX(_,B,z){return z||B==null?B=0:B&&(B=+B),OK(Ga(_).replace(zn,""),B||0)}function UX(_,B,z){return(z?Fo(_,B,z):B===n)?B=1:B=aa(B),Vb(Ga(_),B)}function RX(){var _=arguments,B=Ga(_[0]);return _.length<3?B:B.replace(_[1],_[2])}var NX=wm(function(_,B,z){return _+(z?"_":"")+B.toLowerCase()});function VX(_,B,z){return z&&typeof z!="number"&&Fo(_,B,z)&&(B=z=n),z=z===n?q:z>>>0,z?(_=Ga(_),_&&(typeof B=="string"||B!=null&&!ox(B))&&(B=fi(B),!B&&fm(_))?Zc(fl(_),0,z):_.split(B,z)):[]}var LX=wm(function(_,B,z){return _+(z?" ":"")+ux(B)});function MX(_,B,z){return _=Ga(_),z=z==null?0:wA(aa(z),0,_.length),B=fi(B),_.slice(z,z+B.length)==B}function OX(_,B,z){var me=De.templateSettings;z&&Fo(_,B,z)&&(B=n),_=Ga(_),B=V1({},B,me,cF);var Se=V1({},B.imports,me.imports,cF),Ve=Bs(Se),Je=iu(Se,Ve),ot,ht,Mt=0,Ot=B.interpolate||st,Qt="__p += '",sn=bb((B.escape||st).source+"|"+Ot.source+"|"+(Ot===zt?he:st).source+"|"+(B.evaluate||st).source+"|$","g"),yn="//# sourceURL="+(Ya.call(B,"sourceURL")?(B.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ul+"]")+`
`;_.replace(sn,function(Un,da,ha,vi,Po,hi){return ha||(ha=vi),Qt+=_.slice(Mt,hi).replace(wt,vK),da&&(ot=!0,Qt+=`' +
__e(`+da+`) +
'`),Po&&(ht=!0,Qt+=`';
`+Po+`;
__p += '`),ha&&(Qt+=`' +
((__t = (`+ha+`)) == null ? '' : __t) +
'`),Mt=hi+Un.length,Un}),Qt+=`';
`;var Dn=Ya.call(B,"variable")&&B.variable;if(!Dn)Qt=`with (obj) {
`+Qt+`
}
`;else if(Le.test(Dn))throw new jn(i);Qt=(ht?Qt.replace(Vt,""):Qt).replace(kt,"$1").replace(at,"$1;"),Qt="function("+(Dn||"obj")+`) {
`+(Dn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ot?", __e = _.escape":"")+(ht?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Qt+`return __p
}`;var sa=nP(function(){return Ua(Ve,yn+"return "+Qt).apply(n,Je)});if(sa.source=Qt,sx(sa))throw sa;return sa}function HX(_){return Ga(_).toLowerCase()}function $X(_){return Ga(_).toUpperCase()}function QX(_,B,z){if(_=Ga(_),_&&(z||B===n))return ds(_);if(!_||!(B=fi(B)))return _;var me=fl(_),Se=fl(B),Ve=pA(me,Se),Je=Am(me,Se)+1;return Zc(me,Ve,Je).join("")}function GX(_,B,z){if(_=Ga(_),_&&(z||B===n))return _.slice(0,vI(_)+1);if(!_||!(B=fi(B)))return _;var me=fl(_),Se=Am(me,fl(B))+1;return Zc(me,0,Se).join("")}function zX(_,B,z){if(_=Ga(_),_&&(z||B===n))return _.replace(zn,"");if(!_||!(B=fi(B)))return _;var me=fl(_),Se=pA(me,fl(B));return Zc(me,Se).join("")}function KX(_,B){var z=U,me=F;if(Br(B)){var Se="separator"in B?B.separator:Se;z="length"in B?aa(B.length):z,me="omission"in B?fi(B.omission):me}_=Ga(_);var Ve=_.length;if(fm(_)){var Je=fl(_);Ve=Je.length}if(z>=Ve)return _;var ot=z-mm(me);if(ot<1)return me;var ht=Je?Zc(Je,0,ot).join(""):_.slice(0,ot);if(Se===n)return ht+me;if(Je&&(ot+=ht.length-ot),ox(Se)){if(_.slice(ot).search(Se)){var Mt,Ot=ht;for(Se.global||(Se=bb(Se.source,Ga(se.exec(Se))+"g")),Se.lastIndex=0;Mt=Se.exec(Ot);)var Qt=Mt.index;ht=ht.slice(0,Qt===n?ot:Qt)}}else if(_.indexOf(fi(Se),ot)!=ot){var sn=ht.lastIndexOf(Se);sn>-1&&(ht=ht.slice(0,sn))}return ht+me}function WX(_){return _=Ga(_),_&&Ye.test(_)?_.replace(bt,bK):_}var jX=wm(function(_,B,z){return _+(z?" ":"")+B.toUpperCase()}),ux=aF("toUpperCase");function tP(_,B,z){return _=Ga(_),B=z?n:B,B===n?pK(_)?SK(_):qo(_):_.match(B)||[]}var nP=la(function(_,B){try{return Js(_,n,B)}catch(z){return sx(z)?z:new jn(z)}}),qX=tc(function(_,B){return To(B,function(z){z=cu(z),Zu(_,z,ax(_[z],_))}),_});function YX(_){var B=_==null?0:_.length,z=Fn();return _=B?rr(_,function(me){if(typeof me[1]!="function")throw new Ri(o);return[z(me[0]),me[1]]}):[],la(function(me){for(var Se=-1;++Se<B;){var Ve=_[Se];if(Js(Ve[0],this,me))return Js(Ve[1],this,me)}})}function XX(_){return bW(Vi(_,f))}function cx(_){return function(){return _}}function JX(_,B){return _==null||_!==_?B:_}var ZX=sF(),eJ=sF(!0);function Zo(_){return _}function dx(_){return RI(typeof _=="function"?_:Vi(_,f))}function tJ(_){return VI(Vi(_,f))}function nJ(_,B){return LI(_,Vi(B,f))}var aJ=la(function(_,B){return function(z){return Gh(z,_,B)}}),rJ=la(function(_,B){return function(z){return Gh(_,z,B)}});function Ax(_,B,z){var me=Bs(B),Se=g1(B,me);z==null&&!(Br(B)&&(Se.length||!me.length))&&(z=B,B=_,_=this,Se=g1(B,Bs(B)));var Ve=!(Br(z)&&"chain"in z)||!!z.chain,Je=ac(_);return To(Se,function(ot){var ht=B[ot];_[ot]=ht,Je&&(_.prototype[ot]=function(){var Mt=this.__chain__;if(Ve||Mt){var Ot=_(this.__wrapped__),Qt=Ot.__actions__=Yo(this.__actions__);return Qt.push({func:ht,args:arguments,thisArg:_}),Ot.__chain__=Mt,Ot}return ht.apply(_,dl([this.value()],arguments))})}),_}function sJ(){return $a._===this&&($a._=FK),this}function fx(){}function oJ(_){return _=aa(_),la(function(B){return MI(B,_)})}var iJ=Gb(rr),lJ=Gb(cm),uJ=Gb(dm);function aP(_){return Xb(_)?Ne(cu(_)):MW(_)}function cJ(_){return function(B){return _==null?n:bA(_,B)}}var dJ=iF(),AJ=iF(!0);function mx(){return[]}function vx(){return!1}function fJ(){return{}}function mJ(){return""}function vJ(){return!0}function hJ(_,B){if(_=aa(_),_<1||_>le)return[];var z=q,me=Zs(_,q);B=Fn(B),_-=q;for(var Se=$r(me,B);++z<_;)B(z);return Se}function pJ(_){return Xn(_)?rr(_,cu):mi(_)?[_]:Yo(xF(Ga(_)))}function gJ(_){var B=++TK;return Ga(_)+B}var yJ=C1(function(_,B){return _+B},0),_J=zb("ceil"),wJ=C1(function(_,B){return _/B},1),bJ=zb("floor");function xJ(_){return _&&_.length?p1(_,Zo,Ib):n}function CJ(_,B){return _&&_.length?p1(_,Fn(B,2),Ib):n}function SJ(_){return we(_,Zo)}function EJ(_,B){return we(_,Fn(B,2))}function BJ(_){return _&&_.length?p1(_,Zo,Ub):n}function kJ(_,B){return _&&_.length?p1(_,Fn(B,2),Ub):n}var TJ=C1(function(_,B){return _*B},1),IJ=zb("round"),FJ=C1(function(_,B){return _-B},0);function PJ(_){return _&&_.length?Da(_,Zo):0}function DJ(_,B){return _&&_.length?Da(_,Fn(B,2)):0}return De.after=tY,De.ary=UF,De.assign=$Y,De.assignIn=jF,De.assignInWith=V1,De.assignWith=QY,De.at=GY,De.before=RF,De.bind=ax,De.bindAll=qX,De.bindKey=NF,De.castArray=fY,De.chain=FF,De.chunk=bj,De.compact=xj,De.concat=Cj,De.cond=YX,De.conforms=XX,De.constant=cx,De.countBy=Pq,De.create=zY,De.curry=VF,De.curryRight=LF,De.debounce=MF,De.defaults=KY,De.defaultsDeep=WY,De.defer=nY,De.delay=aY,De.difference=Sj,De.differenceBy=Ej,De.differenceWith=Bj,De.drop=kj,De.dropRight=Tj,De.dropRightWhile=Ij,De.dropWhile=Fj,De.fill=Pj,De.filter=Uq,De.flatMap=Vq,De.flatMapDeep=Lq,De.flatMapDepth=Mq,De.flatten=BF,De.flattenDeep=Dj,De.flattenDepth=Uj,De.flip=rY,De.flow=ZX,De.flowRight=eJ,De.fromPairs=Rj,De.functions=eX,De.functionsIn=tX,De.groupBy=Oq,De.initial=Vj,De.intersection=Lj,De.intersectionBy=Mj,De.intersectionWith=Oj,De.invert=aX,De.invertBy=rX,De.invokeMap=$q,De.iteratee=dx,De.keyBy=Qq,De.keys=Bs,De.keysIn=Jo,De.map=F1,De.mapKeys=oX,De.mapValues=iX,De.matches=tJ,De.matchesProperty=nJ,De.memoize=D1,De.merge=lX,De.mergeWith=qF,De.method=aJ,De.methodOf=rJ,De.mixin=Ax,De.negate=U1,De.nthArg=oJ,De.omit=uX,De.omitBy=cX,De.once=sY,De.orderBy=Gq,De.over=iJ,De.overArgs=oY,De.overEvery=lJ,De.overSome=uJ,De.partial=rx,De.partialRight=OF,De.partition=zq,De.pick=dX,De.pickBy=YF,De.property=aP,De.propertyOf=cJ,De.pull=Gj,De.pullAll=TF,De.pullAllBy=zj,De.pullAllWith=Kj,De.pullAt=Wj,De.range=dJ,De.rangeRight=AJ,De.rearg=iY,De.reject=jq,De.remove=jj,De.rest=lY,De.reverse=tx,De.sampleSize=Yq,De.set=fX,De.setWith=mX,De.shuffle=Xq,De.slice=qj,De.sortBy=eY,De.sortedUniq=nq,De.sortedUniqBy=aq,De.split=VX,De.spread=uY,De.tail=rq,De.take=sq,De.takeRight=oq,De.takeRightWhile=iq,De.takeWhile=lq,De.tap=xq,De.throttle=cY,De.thru=I1,De.toArray=zF,De.toPairs=XF,De.toPairsIn=JF,De.toPath=pJ,De.toPlainObject=WF,De.transform=vX,De.unary=dY,De.union=uq,De.unionBy=cq,De.unionWith=dq,De.uniq=Aq,De.uniqBy=fq,De.uniqWith=mq,De.unset=hX,De.unzip=nx,De.unzipWith=IF,De.update=pX,De.updateWith=gX,De.values=Cm,De.valuesIn=yX,De.without=vq,De.words=tP,De.wrap=AY,De.xor=hq,De.xorBy=pq,De.xorWith=gq,De.zip=yq,De.zipObject=_q,De.zipObjectDeep=wq,De.zipWith=bq,De.entries=XF,De.entriesIn=JF,De.extend=jF,De.extendWith=V1,Ax(De,De),De.add=yJ,De.attempt=nP,De.camelCase=xX,De.capitalize=ZF,De.ceil=_J,De.clamp=_X,De.clone=mY,De.cloneDeep=hY,De.cloneDeepWith=pY,De.cloneWith=vY,De.conformsTo=gY,De.deburr=eP,De.defaultTo=JX,De.divide=wJ,De.endsWith=CX,De.eq=vl,De.escape=SX,De.escapeRegExp=EX,De.every=Dq,De.find=Rq,De.findIndex=SF,De.findKey=jY,De.findLast=Nq,De.findLastIndex=EF,De.findLastKey=qY,De.floor=bJ,De.forEach=PF,De.forEachRight=DF,De.forIn=YY,De.forInRight=XY,De.forOwn=JY,De.forOwnRight=ZY,De.get=ix,De.gt=yY,De.gte=_Y,De.has=nX,De.hasIn=lx,De.head=kF,De.identity=Zo,De.includes=Hq,De.indexOf=Nj,De.inRange=wX,De.invoke=sX,De.isArguments=SA,De.isArray=Xn,De.isArrayBuffer=wY,De.isArrayLike=Xo,De.isArrayLikeObject=Qr,De.isBoolean=bY,De.isBuffer=ed,De.isDate=xY,De.isElement=CY,De.isEmpty=SY,De.isEqual=EY,De.isEqualWith=BY,De.isError=sx,De.isFinite=kY,De.isFunction=ac,De.isInteger=HF,De.isLength=R1,De.isMap=$F,De.isMatch=TY,De.isMatchWith=IY,De.isNaN=FY,De.isNative=PY,De.isNil=UY,De.isNull=DY,De.isNumber=QF,De.isObject=Br,De.isObjectLike=Rr,De.isPlainObject=Yh,De.isRegExp=ox,De.isSafeInteger=RY,De.isSet=GF,De.isString=N1,De.isSymbol=mi,De.isTypedArray=xm,De.isUndefined=NY,De.isWeakMap=VY,De.isWeakSet=LY,De.join=Hj,De.kebabCase=BX,De.last=Mi,De.lastIndexOf=$j,De.lowerCase=kX,De.lowerFirst=TX,De.lt=MY,De.lte=OY,De.max=xJ,De.maxBy=CJ,De.mean=SJ,De.meanBy=EJ,De.min=BJ,De.minBy=kJ,De.stubArray=mx,De.stubFalse=vx,De.stubObject=fJ,De.stubString=mJ,De.stubTrue=vJ,De.multiply=TJ,De.nth=Qj,De.noConflict=sJ,De.noop=fx,De.now=P1,De.pad=IX,De.padEnd=FX,De.padStart=PX,De.parseInt=DX,De.random=bX,De.reduce=Kq,De.reduceRight=Wq,De.repeat=UX,De.replace=RX,De.result=AX,De.round=IJ,De.runInContext=ft,De.sample=qq,De.size=Jq,De.snakeCase=NX,De.some=Zq,De.sortedIndex=Yj,De.sortedIndexBy=Xj,De.sortedIndexOf=Jj,De.sortedLastIndex=Zj,De.sortedLastIndexBy=eq,De.sortedLastIndexOf=tq,De.startCase=LX,De.startsWith=MX,De.subtract=FJ,De.sum=PJ,De.sumBy=DJ,De.template=OX,De.times=hJ,De.toFinite=rc,De.toInteger=aa,De.toLength=KF,De.toLower=HX,De.toNumber=Oi,De.toSafeInteger=HY,De.toString=Ga,De.toUpper=$X,De.trim=QX,De.trimEnd=GX,De.trimStart=zX,De.truncate=KX,De.unescape=WX,De.uniqueId=gJ,De.upperCase=jX,De.upperFirst=ux,De.each=PF,De.eachRight=DF,De.first=kF,Ax(De,(function(){var _={};return lu(De,function(B,z){Ya.call(De.prototype,z)||(_[z]=B)}),_})(),{chain:!1}),De.VERSION=a,To(["bind","bindKey","curry","curryRight","partial","partialRight"],function(_){De[_].placeholder=De}),To(["drop","take"],function(_,B){Aa.prototype[_]=function(z){z=z===n?1:fs(aa(z),0);var me=this.__filtered__&&!B?new Aa(this):this.clone();return me.__filtered__?me.__takeCount__=Zs(z,me.__takeCount__):me.__views__.push({size:Zs(z,q),type:_+(me.__dir__<0?"Right":"")}),me},Aa.prototype[_+"Right"]=function(z){return this.reverse()[_](z).reverse()}}),To(["filter","map","takeWhile"],function(_,B){var z=B+1,me=z==ue||z==Q;Aa.prototype[_]=function(Se){var Ve=this.clone();return Ve.__iteratees__.push({iteratee:Fn(Se,3),type:z}),Ve.__filtered__=Ve.__filtered__||me,Ve}}),To(["head","last"],function(_,B){var z="take"+(B?"Right":"");Aa.prototype[_]=function(){return this[z](1).value()[0]}}),To(["initial","tail"],function(_,B){var z="drop"+(B?"":"Right");Aa.prototype[_]=function(){return this.__filtered__?new Aa(this):this[z](1)}}),Aa.prototype.compact=function(){return this.filter(Zo)},Aa.prototype.find=function(_){return this.filter(_).head()},Aa.prototype.findLast=function(_){return this.reverse().find(_)},Aa.prototype.invokeMap=la(function(_,B){return typeof _=="function"?new Aa(this):this.map(function(z){return Gh(z,_,B)})}),Aa.prototype.reject=function(_){return this.filter(U1(Fn(_)))},Aa.prototype.slice=function(_,B){_=aa(_);var z=this;return z.__filtered__&&(_>0||B<0)?new Aa(z):(_<0?z=z.takeRight(-_):_&&(z=z.drop(_)),B!==n&&(B=aa(B),z=B<0?z.dropRight(-B):z.take(B-_)),z)},Aa.prototype.takeRightWhile=function(_){return this.reverse().takeWhile(_).reverse()},Aa.prototype.toArray=function(){return this.take(q)},lu(Aa.prototype,function(_,B){var z=/^(?:filter|find|map|reject)|While$/.test(B),me=/^(?:head|last)$/.test(B),Se=De[me?"take"+(B=="last"?"Right":""):B],Ve=me||/^find/.test(B);Se&&(De.prototype[B]=function(){var Je=this.__wrapped__,ot=me?[1]:arguments,ht=Je instanceof Aa,Mt=ot[0],Ot=ht||Xn(Je),Qt=function(da){var ha=Se.apply(De,dl([da],ot));return me&&sn?ha[0]:ha};Ot&&z&&typeof Mt=="function"&&Mt.length!=1&&(ht=Ot=!1);var sn=this.__chain__,yn=!!this.__actions__.length,Dn=Ve&&!sn,sa=ht&&!yn;if(!Ve&&Ot){Je=sa?Je:new Aa(this);var Un=_.apply(Je,ot);return Un.__actions__.push({func:I1,args:[Qt],thisArg:n}),new Ni(Un,sn)}return Dn&&sa?_.apply(this,ot):(Un=this.thru(Qt),Dn?me?Un.value()[0]:Un.value():Un)})}),To(["pop","push","shift","sort","splice","unshift"],function(_){var B=n1[_],z=/^(?:push|sort|unshift)$/.test(_)?"tap":"thru",me=/^(?:pop|shift)$/.test(_);De.prototype[_]=function(){var Se=arguments;if(me&&!this.__chain__){var Ve=this.value();return B.apply(Xn(Ve)?Ve:[],Se)}return this[z](function(Je){return B.apply(Xn(Je)?Je:[],Se)})}}),lu(Aa.prototype,function(_,B){var z=De[B];if(z){var me=z.name+"";Ya.call(gm,me)||(gm[me]=[]),gm[me].push({name:B,func:z})}}),gm[x1(n,w).name]=[{name:"wrapper",func:n}],Aa.prototype.clone=WK,Aa.prototype.reverse=jK,Aa.prototype.value=qK,De.prototype.at=Cq,De.prototype.chain=Sq,De.prototype.commit=Eq,De.prototype.next=Bq,De.prototype.plant=Tq,De.prototype.reverse=Iq,De.prototype.toJSON=De.prototype.valueOf=De.prototype.value=Fq,De.prototype.first=De.prototype.head,Vh&&(De.prototype[Vh]=kq),De}),vm=EK();es?((es.exports=vm)._=vm,Di._=vm):$a._=vm}).call(Dfe)})(_p,_p.exports)),_p.exports}var Rfe=Ufe();const Qn=_M(Rfe),BM=6048e5,Nfe=864e5,kM=6e4,TM=36e5,X3=Symbol.for("constructDateFrom");function Dc(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&X3 in e?e[X3](t):e instanceof Date?new e.constructor(t):new Date(t)}function Fr(e,t){return Dc(t||e,e)}let Vfe={};function bw(){return Vfe}function P0(e,t){const n=bw(),a=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,r=Fr(e,t?.in),s=r.getDay(),o=(s<a?7:0)+s-a;return r.setDate(r.getDate()-o),r.setHours(0,0,0,0),r}function j_(e,t){return P0(e,{...t,weekStartsOn:1})}function IM(e,t){const n=Fr(e,t?.in),a=n.getFullYear(),r=Dc(n,0);r.setFullYear(a+1,0,4),r.setHours(0,0,0,0);const s=j_(r),o=Dc(n,0);o.setFullYear(a,0,4),o.setHours(0,0,0,0);const i=j_(o);return n.getTime()>=s.getTime()?a+1:n.getTime()>=i.getTime()?a:a-1}function J3(e){const t=Fr(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function xw(e,...t){const n=Dc.bind(null,t.find(a=>typeof a=="object"));return t.map(n)}function q_(e,t){const n=Fr(e,t?.in);return n.setHours(0,0,0,0),n}function Lfe(e,t,n){const[a,r]=xw(n?.in,e,t),s=q_(a),o=q_(r),i=+s-J3(s),c=+o-J3(o);return Math.round((i-c)/Nfe)}function Mfe(e,t){const n=IM(e,t),a=Dc(e,0);return a.setFullYear(n,0,4),a.setHours(0,0,0,0),j_(a)}function Z3(e,t){const n=+Fr(e)-+Fr(t);return n<0?-1:n>0?1:n}function Ofe(e,t,n){const[a,r]=xw(n?.in,e,t);return+q_(a)==+q_(r)}function Hfe(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function $fe(e){return!(!Hfe(e)&&typeof e!="number"||isNaN(+Fr(e)))}function Qfe(e,t,n){const[a,r]=xw(n?.in,e,t);return a.getFullYear()-r.getFullYear()}function FM(e,t,n){const[a,r]=xw(n?.in,e,t),s=Z3(a,r),o=Math.abs(Qfe(a,r));a.setFullYear(1584),r.setFullYear(1584);const i=Z3(a,r)===-s,c=s*(o-+i);return c===0?0:c}function Gfe(e,t){const n=Fr(e,t?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const zfe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Kfe=(e,t,n)=>{let a;const r=zfe[e];return typeof r=="string"?a=r:t===1?a=r.one:a=r.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a};function nC(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Wfe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},jfe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},qfe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Yfe={date:nC({formats:Wfe,defaultWidth:"full"}),time:nC({formats:jfe,defaultWidth:"full"}),dateTime:nC({formats:qfe,defaultWidth:"full"})},Xfe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Jfe=(e,t,n,a)=>Xfe[e];function ap(e){return(t,n)=>{const a=n?.context?String(n.context):"standalone";let r;if(a==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,i=n?.width?String(n.width):o;r=e.formattingValues[i]||e.formattingValues[o]}else{const o=e.defaultWidth,i=n?.width?String(n.width):e.defaultWidth;r=e.values[i]||e.values[o]}const s=e.argumentCallback?e.argumentCallback(t):t;return r[s]}}const Zfe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},eme={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},tme={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},nme={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ame={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},rme={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},sme=(e,t)=>{const n=Number(e),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},ome={ordinalNumber:sme,era:ap({values:Zfe,defaultWidth:"wide"}),quarter:ap({values:eme,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ap({values:tme,defaultWidth:"wide"}),day:ap({values:nme,defaultWidth:"wide"}),dayPeriod:ap({values:ame,defaultWidth:"wide",formattingValues:rme,defaultFormattingWidth:"wide"})};function rp(e){return(t,n={})=>{const a=n.width,r=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],s=t.match(r);if(!s)return null;const o=s[0],i=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(i)?lme(i,f=>f.test(o)):ime(i,f=>f.test(o));let A;A=e.valueCallback?e.valueCallback(c):c,A=n.valueCallback?n.valueCallback(A):A;const d=t.slice(o.length);return{value:A,rest:d}}}function ime(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function lme(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function ume(e){return(t,n={})=>{const a=t.match(e.matchPattern);if(!a)return null;const r=a[0],s=t.match(e.parsePattern);if(!s)return null;let o=e.valueCallback?e.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const i=t.slice(r.length);return{value:o,rest:i}}}const cme=/^(\d+)(th|st|nd|rd)?/i,dme=/\d+/i,Ame={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},fme={any:[/^b/i,/^(a|c)/i]},mme={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},vme={any:[/1/i,/2/i,/3/i,/4/i]},hme={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},pme={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},gme={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},yme={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},_me={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},wme={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},bme={ordinalNumber:ume({matchPattern:cme,parsePattern:dme,valueCallback:e=>parseInt(e,10)}),era:rp({matchPatterns:Ame,defaultMatchWidth:"wide",parsePatterns:fme,defaultParseWidth:"any"}),quarter:rp({matchPatterns:mme,defaultMatchWidth:"wide",parsePatterns:vme,defaultParseWidth:"any",valueCallback:e=>e+1}),month:rp({matchPatterns:hme,defaultMatchWidth:"wide",parsePatterns:pme,defaultParseWidth:"any"}),day:rp({matchPatterns:gme,defaultMatchWidth:"wide",parsePatterns:yme,defaultParseWidth:"any"}),dayPeriod:rp({matchPatterns:_me,defaultMatchWidth:"any",parsePatterns:wme,defaultParseWidth:"any"})},xme={code:"en-US",formatDistance:Kfe,formatLong:Yfe,formatRelative:Jfe,localize:ome,match:bme,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Cme(e,t){const n=Fr(e,t?.in);return Lfe(n,Gfe(n))+1}function Sme(e,t){const n=Fr(e,t?.in),a=+j_(n)-+Mfe(n);return Math.round(a/BM)+1}function PM(e,t){const n=Fr(e,t?.in),a=n.getFullYear(),r=bw(),s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,o=Dc(t?.in||e,0);o.setFullYear(a+1,0,s),o.setHours(0,0,0,0);const i=P0(o,t),c=Dc(t?.in||e,0);c.setFullYear(a,0,s),c.setHours(0,0,0,0);const A=P0(c,t);return+n>=+i?a+1:+n>=+A?a:a-1}function Eme(e,t){const n=bw(),a=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,r=PM(e,t),s=Dc(t?.in||e,0);return s.setFullYear(r,0,a),s.setHours(0,0,0,0),P0(s,t)}function Bme(e,t){const n=Fr(e,t?.in),a=+P0(n,t)-+Eme(n,t);return Math.round(a/BM)+1}function Xa(e,t){const n=e<0?"-":"",a=Math.abs(e).toString().padStart(t,"0");return n+a}const sd={y(e,t){const n=e.getFullYear(),a=n>0?n:1-n;return Xa(t==="yy"?a%100:a,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Xa(n+1,2)},d(e,t){return Xa(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Xa(e.getHours()%12||12,t.length)},H(e,t){return Xa(e.getHours(),t.length)},m(e,t){return Xa(e.getMinutes(),t.length)},s(e,t){return Xa(e.getSeconds(),t.length)},S(e,t){const n=t.length,a=e.getMilliseconds(),r=Math.trunc(a*Math.pow(10,n-3));return Xa(r,t.length)}},Um={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},eU={G:function(e,t,n){const a=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});case"GGGG":default:return n.era(a,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const a=e.getFullYear(),r=a>0?a:1-a;return n.ordinalNumber(r,{unit:"year"})}return sd.y(e,t)},Y:function(e,t,n,a){const r=PM(e,a),s=r>0?r:1-r;if(t==="YY"){const o=s%100;return Xa(o,2)}return t==="Yo"?n.ordinalNumber(s,{unit:"year"}):Xa(s,t.length)},R:function(e,t){const n=IM(e);return Xa(n,t.length)},u:function(e,t){const n=e.getFullYear();return Xa(n,t.length)},Q:function(e,t,n){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return Xa(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,n){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return Xa(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,n){const a=e.getMonth();switch(t){case"M":case"MM":return sd.M(e,t);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,n){const a=e.getMonth();switch(t){case"L":return String(a+1);case"LL":return Xa(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,n,a){const r=Bme(e,a);return t==="wo"?n.ordinalNumber(r,{unit:"week"}):Xa(r,t.length)},I:function(e,t,n){const a=Sme(e);return t==="Io"?n.ordinalNumber(a,{unit:"week"}):Xa(a,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):sd.d(e,t)},D:function(e,t,n){const a=Cme(e);return t==="Do"?n.ordinalNumber(a,{unit:"dayOfYear"}):Xa(a,t.length)},E:function(e,t,n){const a=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});case"EEEE":default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,n,a){const r=e.getDay(),s=(r-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return Xa(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});case"eeee":default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(e,t,n,a){const r=e.getDay(),s=(r-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return Xa(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});case"cccc":default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(e,t,n){const a=e.getDay(),r=a===0?7:a;switch(t){case"i":return String(r);case"ii":return Xa(r,t.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});case"iiii":default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,n){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){const a=e.getHours();let r;switch(a===12?r=Um.noon:a===0?r=Um.midnight:r=a/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){const a=e.getHours();let r;switch(a>=17?r=Um.evening:a>=12?r=Um.afternoon:a>=4?r=Um.morning:r=Um.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let a=e.getHours()%12;return a===0&&(a=12),n.ordinalNumber(a,{unit:"hour"})}return sd.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):sd.H(e,t)},K:function(e,t,n){const a=e.getHours()%12;return t==="Ko"?n.ordinalNumber(a,{unit:"hour"}):Xa(a,t.length)},k:function(e,t,n){let a=e.getHours();return a===0&&(a=24),t==="ko"?n.ordinalNumber(a,{unit:"hour"}):Xa(a,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):sd.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):sd.s(e,t)},S:function(e,t){return sd.S(e,t)},X:function(e,t,n){const a=e.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return nU(a);case"XXXX":case"XX":return LA(a);case"XXXXX":case"XXX":default:return LA(a,":")}},x:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"x":return nU(a);case"xxxx":case"xx":return LA(a);case"xxxxx":case"xxx":default:return LA(a,":")}},O:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+tU(a,":");case"OOOO":default:return"GMT"+LA(a,":")}},z:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+tU(a,":");case"zzzz":default:return"GMT"+LA(a,":")}},t:function(e,t,n){const a=Math.trunc(+e/1e3);return Xa(a,t.length)},T:function(e,t,n){return Xa(+e,t.length)}};function tU(e,t=""){const n=e>0?"-":"+",a=Math.abs(e),r=Math.trunc(a/60),s=a%60;return s===0?n+String(r):n+String(r)+t+Xa(s,2)}function nU(e,t){return e%60===0?(e>0?"-":"+")+Xa(Math.abs(e)/60,2):LA(e,t)}function LA(e,t=""){const n=e>0?"-":"+",a=Math.abs(e),r=Xa(Math.trunc(a/60),2),s=Xa(a%60,2);return n+r+t+s}const aU=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},DM=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},kme=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],a=n[1],r=n[2];if(!r)return aU(e,t);let s;switch(a){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",aU(a,t)).replace("{{time}}",DM(r,t))},Tme={p:DM,P:kme},Ime=/^D+$/,Fme=/^Y+$/,Pme=["D","DD","YY","YYYY"];function Dme(e){return Ime.test(e)}function Ume(e){return Fme.test(e)}function Rme(e,t,n){const a=Nme(e,t,n);if(console.warn(a),Pme.includes(e))throw new RangeError(a)}function Nme(e,t,n){const a=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${a} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Vme=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Lme=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Mme=/^'([^]*?)'?$/,Ome=/''/g,Hme=/[a-zA-Z]/;function _o(e,t,n){const a=bw(),r=a.locale??xme,s=a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,o=a.weekStartsOn??a.locale?.options?.weekStartsOn??0,i=Fr(e,n?.in);if(!$fe(i))throw new RangeError("Invalid time value");let c=t.match(Lme).map(d=>{const f=d[0];if(f==="p"||f==="P"){const m=Tme[f];return m(d,r.formatLong)}return d}).join("").match(Vme).map(d=>{if(d==="''")return{isToken:!1,value:"'"};const f=d[0];if(f==="'")return{isToken:!1,value:$me(d)};if(eU[f])return{isToken:!0,value:d};if(f.match(Hme))throw new RangeError("Format string contains an unescaped latin alphabet character `"+f+"`");return{isToken:!1,value:d}});r.localize.preprocessor&&(c=r.localize.preprocessor(i,c));const A={firstWeekContainsDate:s,weekStartsOn:o,locale:r};return c.map(d=>{if(!d.isToken)return d.value;const f=d.value;(Ume(f)||Dme(f))&&Rme(f,t,String(e));const m=eU[f[0]];return m(i,f,r.localize,A)}).join("")}function $me(e){const t=e.match(Mme);return t?t[1].replace(Ome,"'"):e}function rU(e,t){return Fr(e*1e3,t?.in)}function Qme(e){return Math.trunc(+Fr(e)/1e3)}function Gme(e,t){return+Fr(e)>+Fr(t)}function dh(e,t){const n=()=>Dc(t?.in,NaN),r=jme(e);let s;if(r.date){const A=qme(r.date,2);s=Yme(A.restDateString,A.year)}if(!s||isNaN(+s))return n();const o=+s;let i=0,c;if(r.time&&(i=Xme(r.time),isNaN(i)))return n();if(r.timezone){if(c=Jme(r.timezone),isNaN(c))return n()}else{const A=new Date(o+i),d=Fr(0,t?.in);return d.setFullYear(A.getUTCFullYear(),A.getUTCMonth(),A.getUTCDate()),d.setHours(A.getUTCHours(),A.getUTCMinutes(),A.getUTCSeconds(),A.getUTCMilliseconds()),d}return Fr(o+i+c,t?.in)}const Z1={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},zme=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Kme=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Wme=/^([+-])(\d{2})(?::?(\d{2}))?$/;function jme(e){const t={},n=e.split(Z1.dateTimeDelimiter);let a;if(n.length>2)return t;if(/:/.test(n[0])?a=n[0]:(t.date=n[0],a=n[1],Z1.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Z1.timeZoneDelimiter)[0],a=e.substr(t.date.length,e.length))),a){const r=Z1.timezone.exec(a);r?(t.time=a.replace(r[1],""),t.timezone=r[1]):t.time=a}return t}function qme(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),a=e.match(n);if(!a)return{year:NaN,restDateString:""};const r=a[1]?parseInt(a[1]):null,s=a[2]?parseInt(a[2]):null;return{year:s===null?r:s*100,restDateString:e.slice((a[1]||a[2]).length)}}function Yme(e,t){if(t===null)return new Date(NaN);const n=e.match(zme);if(!n)return new Date(NaN);const a=!!n[4],r=sp(n[1]),s=sp(n[2])-1,o=sp(n[3]),i=sp(n[4]),c=sp(n[5])-1;if(a)return ave(t,i,c)?Zme(t,i,c):new Date(NaN);{const A=new Date(0);return!tve(t,s,o)||!nve(t,r)?new Date(NaN):(A.setUTCFullYear(t,s,Math.max(r,o)),A)}}function sp(e){return e?parseInt(e):1}function Xme(e){const t=e.match(Kme);if(!t)return NaN;const n=aC(t[1]),a=aC(t[2]),r=aC(t[3]);return rve(n,a,r)?n*TM+a*kM+r*1e3:NaN}function aC(e){return e&&parseFloat(e.replace(",","."))||0}function Jme(e){if(e==="Z")return 0;const t=e.match(Wme);if(!t)return 0;const n=t[1]==="+"?-1:1,a=parseInt(t[2]),r=t[3]&&parseInt(t[3])||0;return sve(a,r)?n*(a*TM+r*kM):NaN}function Zme(e,t,n){const a=new Date(0);a.setUTCFullYear(e,0,4);const r=a.getUTCDay()||7,s=(t-1)*7+n+1-r;return a.setUTCDate(a.getUTCDate()+s),a}const eve=[31,null,31,30,31,30,31,31,30,31,30,31];function UM(e){return e%400===0||e%4===0&&e%100!==0}function tve(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(eve[t]||(UM(e)?29:28))}function nve(e,t){return t>=1&&t<=(UM(e)?366:365)}function ave(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function rve(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function sve(e,t){return t>=0&&t<=59}function RM(e,t,n){const a=Fr(e,n?.in);return a.setHours(t),a}function ove(e,t,n){const a=Fr(e,n?.in);return a.setMilliseconds(t),a}function NM(e,t,n){const a=Fr(e,n?.in);return a.setMinutes(t),a}function ive(e,t,n){const a=Fr(e,n?.in);return a.setSeconds(t),a}const Zk=async(e,t,n=null)=>{try{const a=n||_o(new Date,"yyyy-MM-dd");return{data:{consultation_id:(await At.post("/consultation/",{patient_id:e,doctor_id:t,consultation_date:a})).data?.data?.consultation_id||null},error:null}}catch(a){return console.error("There was an error adding the consultation:",a),{data:null,error:a}}},sU=async e=>{try{const t=await At.get(`/consultation/${e}`),n=Qn.cloneDeep(t.data.data.consultation),a=await LM(n.id);return n.medicines=a.data,{data:n,error:null}}catch(t){return console.error("Error updating consultation:",t),{data:[],error:t}}},VM=async e=>{try{return await At.put(`/consultation/${e.id}`,e),{error:null}}catch(t){return console.error("Error updating consultation:",t),{error:t}}};let ey={value:[]};const LM=async e=>{try{return{data:(await At.get(`/consultation/consultation_medicines/${e}`)).data.data.medicines,error:null}}catch(t){return console.error("Error fetching medicines:",t),{data:[],error:t}}},t_=async(e,t=null)=>{try{if(!e)throw new Error("patient_id is required");let n="";t?n=`?doctor_id=${t}`:console.warn(" fetchConsultations called without doctor_id - this will return ALL consultations for patient"),console.log(" Fetching consultations from:",`/consultation/consultations/${e}${n}`);const a=await At.get(`/consultation/consultations/${e}${n}`);ey=Qn.cloneDeep(a.data.data.consultations),console.log(" Raw consultations from API:",ey.length,"items");for(const r of ey){const s=await LM(r.id);r.medicines=s.data}return{data:ey,error:null}}catch(n){return console.error("Error fetching consultations from API:",n),{data:[],error:n}}},lve=async e=>{try{console.log(`[Summary] Triggering summary generation for patient: ${e}`);const t=await At(vM({method:"post",url:`/consultation/generate-summary/${e}`}));return console.log(`[Summary] Summary generation queued successfully for patient: ${e}`),t}catch(t){return console.error(`[Summary] Failed to trigger summary generation for patient ${e}:`,t),{success:!1,error:t}}},MM=async e=>{try{return{data:(await At.post("/patient/create",e)).data.data.newPatient,error:null}}catch(t){return console.error("There was an error adding the patient:",t),{data:null,error:t}}},uve=async e=>{try{return console.log(`DEBUG bulkCreatePatients - Sending ${e.length} patients to API`),e.forEach((n,a)=>{console.log(`DEBUG bulkCreatePatients PATIENT ${a} - Gender: ${JSON.stringify(n.gender)}, Type: ${typeof n.gender}`),a<3&&console.log(`DEBUG bulkCreatePatients PATIENT ${a} - Full data:`,JSON.stringify(n,null,2))}),{data:(await At.post("/patient/bulk-create",{patients:e})).data.data,error:null}}catch(t){return console.error("There was an error in bulk patient creation:",t),{data:null,error:t}}},eT=async e=>{try{return{data:(await At.get(`/patient/${e}`)).data.data.patient,error:null}}catch(t){return console.error("Error fetching patient details from API:",t),{data:null,error:t}}},cve=async(e,t,n)=>{try{return{data:(await At.get("/patient/patients",{params:{name:e,phone:t,date:n}})).data.data.patients,error:null}}catch(a){return console.error("Error fetching patients from API:",a),{data:[],error:a}}},dve=async e=>{try{return await At.put(`/patient/${e.id}`,e),{error:null}}catch(t){return{error:t}}},tT=async e=>{try{return{data:(await At.get(`/patient/search/${e}`)).data.data.patients,error:null}}catch(t){return console.error("Error fetching patient details from API:",t),{data:[],error:t}}},rC=e=>{if(!e)return"";try{const[t,n]=e.split(":");if(!t||!n)return e;let a=new Date;return a=RM(a,parseInt(t)),a=NM(a,parseInt(n)),a=ive(a,0),a=ove(a,0),_o(a,"hh:mm a")}catch(t){return console.error("Error formatting time:",e,t),e}},nT=e=>{if(!e)return null;try{const t=typeof e=="string"?dh(e):new Date(e);return FM(new Date,t)}catch(t){return console.error("Error calculating age:",e,t),null}};function OM(e){const t=new Date;t.setHours(0,0,0,0);const n=new Date(e);return n.setHours(0,0,0,0),Ofe(n,t)||Gme(n,t)}const er=e=>{if(!e)return"";try{let t;if(typeof e=="string"){const n=e.replace(" ","T")+"Z";t=dh(n)}else t=new Date(e);return _o(t,"MMMM d")}catch(t){return console.error("Error formatting date:",e,t),""}},sC=_o(new Date,"MMMM d"),Rn=()=>{const e=new Date,t=5.5*60*60*1e3,n=new Date(e.getTime()+t),a=n.getUTCFullYear(),r=String(n.getUTCMonth()+1).padStart(2,"0"),s=String(n.getUTCDate()).padStart(2,"0");return`${a}-${r}-${s}`},Tl=e=>{if(!e)return"";try{const t=typeof e=="string"?dh(e):new Date(e);return _o(t,"MMM d, yyyy")}catch(t){return console.error("Error formatting date for chip:",e,t),e}},gd=e=>{if(!e)return null;try{const t=dh(e);return Qme(t)}catch(t){return console.error("Error converting date to timestamp:",e,t),null}},Ave=e=>{if(!e||e<946684800)return"";try{const t=new Date(e*1e3);return _o(t,"yyyy-MM-dd")}catch(t){return console.error("Error converting timestamp to date:",e,t),""}},fr=[e=>e?!0:"this information is required"],Ah=[e=>{if(!e)return"this information is required";const t=e.toString().replace(/\s+/g,"");return/^\d+$/.test(t)?t.length!==10?"Contact number must be exactly 10 digits.":/^0+$/.test(t)||/^(.)\1{9}$/.test(t)?"Please enter a valid phone number.":!0:"Contact number must contain only digits."}],HM=[e=>e?!0:"this information is required"],aT=[e=>{if(!e)return"this information is required.";const t=parseInt(e,10);return isNaN(t)||t<0||t>120?"Age must be a valid number between 0 and 120.":!0}],rT=[e=>{if(!e)return"this information is required.";const t=new Date(e);return OM(t)?"Birth date cannot be today or in the future.":!0}],sT=[e=>e?!0:"this information is required."],aE=[e=>{if(!e)return"this information is required.";const t=new Date(e);return OM(t)?!0:"Appointment date cannot be in the past."}],wg=[e=>!e||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)||"Please enter a valid email address"],fve=[e=>{if(!e)return"this information is required";const t=e.toString().replace(/\s+/g,"");return/^\d+$/.test(t)?t.length!==6?"Pincode must be exactly 6 digits.":!0:"Pincode must contain only digits."}],$M=""+new URL("images/add_patient-CvgE6aXm.png",import.meta.url).href,mve={class:"w-100",style:{"white-space":"normal",overflow:"visible","text-overflow":"unset"}},vve={class:"text-subtitle-2 mb-1",style:{"white-space":"normal","line-height":"1.3",overflow:"visible","text-overflow":"unset"}},hve={class:"text-caption",style:{opacity:"0.7"}},pve={class:"d-flex justify-center"},gve={class:"d-flex age-dob-container",style:{gap:"8px"}},yve={class:"d-flex justify-center"},_ve={__name:"add-appointment",props:{doctorId:{type:[String,Number],required:!0},clinicId:{type:[String,Number],required:!0},selectedDate:{type:String,default:()=>Rn()}},emits:["close","appointment-created","error"],setup(e,{emit:t}){const n=e,a=ra(),r=t;let s=null,o=null;const i=V(!1),c=V([]),A=V(""),d=V([]),f=V(!1),m=V(!1),v=V("dob"),p=V(""),g=V({name:"",contact_number:"",age:"",birthDate:"",gender:"",email:""}),y=V(n.selectedDate),w=V(new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Kolkata"})),b=V("walkin"),x=V(n.selectedDate),T=V(new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Kolkata"})),D=V("walkin"),k=ne(()=>n.doctorId),S=ne(()=>n.clinicId),E=ne(()=>a.getters["doctorModule/isProcedurePrimary"]),C=()=>E.value?"procedure":"consultation",U=V(C()),F=V(C()),L=te=>te?`${te.name||""} (${te.contactNumber||te.contact_number||""})`:"",H=(te,Y=0,W=!1)=>{if(Y===0)return"First time patient";if(W&&Y>1)return te?`Has appointment today  Last visit: ${Tl(te)}`:"Has appointment today";if(W&&Y===1)return"First visit today";if(te){const ee=Rn(),ae=te;if(ae<ee)return`Last visit: ${Tl(ae)}`;if(ae>ee)return`Next visit: ${Tl(ae)}`}return"No previous visits"},ue=ne(()=>!A.value||A.value.length<1?"Start typing to search for patients":f.value?`No patients found matching "${A.value}"`:""),ie=V(!1),Q=V(!1),X=te=>{const Y=te.target.value.replace(/[^0-9]/g,"").slice(0,10);g.value.contact_number=Y},le=te=>{if(v.value==="dob")if(te){p.value=te;const Y=nT(te);Y!==null&&(g.value.age=Y.toString())}else p.value=""};je(v,te=>{te==="age"?(g.value.birthDate&&(p.value=g.value.birthDate),g.value.birthDate=""):p.value&&(g.value.birthDate=p.value)});const Z=async te=>{if(!te||te.length<1){c.value=[],f.value=!1;return}o&&o.abort(),o=new AbortController,i.value=!0,f.value=!1;try{const Y=await tT(te,{signal:o.signal});o.signal.aborted||(c.value=Y.data,(!c.value||c.value.length===0)&&(f.value=!0))}catch(Y){Y.name!=="AbortError"&&(console.error("Error fetching patients:",Y),f.value=!0)}finally{o?.signal.aborted||(i.value=!1)}};je(A,te=>{s&&clearTimeout(s),f.value=!1,s=setTimeout(()=>{Z(te)},300)}),je(E,(te,Y)=>{if(te===Y)return;const W=te?"procedure":"consultation",ee=Y?"procedure":"consultation";U.value===ee&&(U.value=W),F.value===ee&&(F.value=W)},{immediate:!1});const re=()=>{m.value=!m.value,m.value&&(v.value="dob",p.value="",g.value={name:"",contact_number:"",age:"",birthDate:"",gender:"",email:""})},q=async()=>{const te={...g.value};if(v.value==="dob"&&te.birthDate){const ee=gd(te.birthDate);ee!==null?te.birthDate=ee.toString():te.birthDate=""}else delete te.birthDate;const Y=await MM(te),W=Y.data.id;Y.error?console.error("There was an error adding the patient:",Y.error):G(W,k.value,S.value)},P=async(te,Y,W)=>{const ee={patientId:te,clinicId:W,doctorId:Y,appointmentDate:y.value,appointmentTime:w.value,status:"waiting",category:b.value,type:U.value};try{await At.post("/appointment/",ee),E.value||await J(te,k.value,y.value),r("appointment-created",{success:!0,message:"Appointment created successfully"}),M()}catch(ae){console.error("There was an error creating new appointment:",ae),ae.response?.status===409?r("error",{title:"Appointment Already Exists",message:"An appointment for this patient with the same doctor, clinic, and date already exists. Please choose a different date.",type:"warning"}):ae.response?.status===404?r("error",{title:"Patient Not Found",message:"The selected patient could not be found. Please try searching again.",type:"error"}):ae.response?.status===400?r("error",{title:"Invalid Data",message:ae.response.data?.error||"Please check your appointment details and try again.",type:"error"}):r("error",{title:"Error Creating Appointment",message:"An unexpected error occurred while creating the appointment. Please try again.",type:"error"})}},G=async(te,Y,W)=>{const ee={patientId:te,clinicId:W,doctorId:Y,appointmentDate:x.value,appointmentTime:T.value,status:"waiting",category:D.value,type:F.value};try{await At.post("/appointment/",ee),E.value||await J(te,k.value,x.value),r("appointment-created",{success:!0,message:"Patient and appointment created successfully"}),M()}catch(ae){console.error("There was an error creating new appointment:",ae),ae.response?.status===409?r("error",{title:"Appointment Already Exists",message:"An appointment for this patient with the same doctor, clinic, and date already exists. Please choose a different date.",type:"warning"}):ae.response?.status===404?r("error",{title:"Patient Not Found",message:"The selected patient could not be found. Please try searching again.",type:"error"}):ae.response?.status===400?r("error",{title:"Invalid Data",message:ae.response.data?.error||"Please check your appointment details and try again.",type:"error"}):r("error",{title:"Error Creating Appointment",message:"An unexpected error occurred while creating the appointment. Please try again.",type:"error"})}},J=async(te,Y,W=null)=>{await Zk(te,Y,W)},M=()=>{r("close")};return va(()=>{s&&(clearTimeout(s),s=null),o&&(o.abort(),o=null)}),(te,Y)=>{const W=I("v-card-title"),ee=I("v-col"),ae=I("v-icon"),oe=I("v-btn"),j=I("v-row"),ce=I("v-card"),de=I("v-list-item"),_e=I("v-divider"),Re=I("v-card-subtitle"),be=I("v-list"),Ee=I("v-autocomplete"),Ce=I("v-card-text"),Be=I("v-text-field"),Te=I("v-select"),Oe=I("v-form"),Me=I("v-btn-toggle"),rt=I("v-empty-state");return R(),ve(ce,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[l(j,{"no-gutters":""},{default:u(()=>[l(ee,{cols:"12"},{default:u(()=>[l(ce,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(j,{"no-gutters":""},{default:u(()=>[l(ee,{cols:"11"},{default:u(()=>[l(W,{class:"pa-0 pl-2"},{default:u(()=>[...Y[25]||(Y[25]=[O("Add patient to queue",-1)])]),_:1})]),_:1}),l(ee,{cols:"1"},{default:u(()=>[l(oe,{icon:"",size:"x-small",onClick:M,tabindex:"-1"},{default:u(()=>[l(ae,null,{default:u(()=>[...Y[26]||(Y[26]=[h("img",{src:nu,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(j,{"no-gutters":""},{default:u(()=>[l(ee,{cols:"12"},{default:u(()=>[l(ce,{flat:"",class:"d-flex justify-center ma-2",color:"surfaceContainer"},{default:u(()=>[l(Ee,{ref:"searchRef",density:"compact",placeholder:"Search by name or phone",style:{width:"90%","max-width":"700px"},theme:"light",variant:"solo",rounded:"l",items:c.value,search:A.value,"onUpdate:search":Y[2]||(Y[2]=ut=>A.value=ut),loading:i.value,"item-title":L,"item-value":"id","return-object":"",modelValue:d.value,"onUpdate:modelValue":Y[3]||(Y[3]=ut=>d.value=ut),chips:"",clearable:"","prepend-inner-icon":"mdi-magnify","no-data-text":ue.value,"menu-props":{maxHeight:"400px",closeOnContentClick:!1}},{item:u(({props:ut,item:Ie,index:Ue})=>[l(be,{density:"compact",class:"pa-0 py-1"},{default:u(()=>[l(de,Pe(ut,{class:"py-0 my-0",style:{"min-height":"60px"}}),{default:u(()=>[h("div",mve,[h("div",vve," ID: "+K(Ie.raw.id)+"  "+K(Ie.raw.gender)+", "+K(Ie.raw.age)+" yrs  Added On: "+K(Qe(Tl)(Ie.raw.createdAt))+K(Ie.raw.importID?`  Import ID:
                      ${Ie.raw.importID}`:""),1),h("div",hve,K(H(Ie.raw.lastAppointmentDate,Ie.raw.totalAppointments,Ie.raw.hasAppointmentToday)),1)])]),_:2},1040),Ue===c.value.length-1?(R(),Ae(Ke,{key:0},[l(_e),l(ce,{flat:"",class:"pt-1"},{default:u(()=>[l(Re,null,{default:u(()=>[...Y[27]||(Y[27]=[O("Patient not in list ?",-1)])]),_:1}),l(oe,{class:"ml-3",variant:"outlined",onClick:Y[0]||(Y[0]=dt=>{te.$refs.searchRef.blur(),re()})},{default:u(()=>[...Y[28]||(Y[28]=[O("Add New",-1)])]),_:1})]),_:1})],64)):ye("",!0)]),_:2},1024)]),"no-data":u(()=>[l(be,{density:"compact"},{default:u(()=>[l(de,null,{default:u(()=>[l(Re,null,{default:u(()=>[O(K(ue.value),1)]),_:1})]),_:1}),f.value&&A.value&&A.value.length>=1?(R(),Ae(Ke,{key:0},[l(_e),l(ce,{flat:"",class:"pt-1"},{default:u(()=>[l(Re,null,{default:u(()=>[...Y[29]||(Y[29]=[O("Patient not in list ?",-1)])]),_:1}),l(oe,{class:"ml-3",variant:"outlined",onClick:Y[1]||(Y[1]=ut=>{te.$refs.searchRef.blur(),re()})},{default:u(()=>[...Y[30]||(Y[30]=[O("Add New",-1)])]),_:1})]),_:1})],64)):ye("",!0)]),_:1})]),append:u(()=>[l(oe,{variant:"elevated",icon:m.value?"mdi-close":"mdi-plus",onClick:re,rounded:"xl"},null,8,["icon"])]),_:1},8,["items","search","loading","modelValue","no-data-text"])]),_:1})]),_:1})]),_:1}),l(j,{"no-gutters":""},{default:u(()=>[l(ee,{cols:"12",class:"scroll-element"},{default:u(()=>[l(ce,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[d.value&&d.value.id?(R(),Ae(Ke,{key:0},[l(ce,{flat:"",class:"text-left",variant:"text"},{default:u(()=>[l(Ce,{class:"ma-0 pa-0 pl-4 mb-1"},{default:u(()=>[l(j,{"no-gutters":""},{default:u(()=>[l(ee,{cols:"6"},{default:u(()=>[O(K(`Name: ${d.value.name}`),1)]),_:1}),l(ee,{cols:"6"},{default:u(()=>[O(K(`Gender: ${d.value.gender}`),1)]),_:1})]),_:1}),l(j,{"no-gutters":""},{default:u(()=>[l(ee,{cols:"6"},{default:u(()=>[O(K(`Contact: ${d.value.contactNumber}`),1)]),_:1}),l(ee,{cols:"6"},{default:u(()=>[O(K(d.value.age!==null?`Age: ${d.value.age} yrs`:""),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(ce,{flat:"",class:"text-left",variant:"text"},{default:u(()=>[l(Oe,{modelValue:ie.value,"onUpdate:modelValue":Y[10]||(Y[10]=ut=>ie.value=ut),"validate-on":"input"},{default:u(()=>[l(j,{"no-gutters":""},{default:u(()=>[l(ee,{cols:"12"},{default:u(()=>[l(Be,{label:"Appointment Date *",modelValue:y.value,"onUpdate:modelValue":Y[4]||(Y[4]=ut=>y.value=ut),type:"date",density:"compact",rules:Qe(aE),class:"date-input",onClick:Y[5]||(Y[5]=ut=>ut.target.showPicker&&ut.target.showPicker())},null,8,["modelValue","rules"])]),_:1}),l(ee,{cols:"12"},{default:u(()=>[l(Be,{label:"Appointment Time",modelValue:w.value,"onUpdate:modelValue":Y[6]||(Y[6]=ut=>w.value=ut),type:"time",density:"compact"},null,8,["modelValue"])]),_:1}),l(ee,{cols:"12"},{default:u(()=>[l(Te,{modelValue:U.value,"onUpdate:modelValue":Y[7]||(Y[7]=ut=>U.value=ut),items:["consultation","followup","procedure"],label:"Appointment Type"},null,8,["modelValue"])]),_:1}),l(ee,{cols:"12"},{default:u(()=>[l(Te,{modelValue:b.value,"onUpdate:modelValue":Y[8]||(Y[8]=ut=>b.value=ut),items:["walkin","scheduled"],label:"Appointment Category"},null,8,["modelValue"])]),_:1}),l(ee,{cols:"12"},{default:u(()=>[l(_e,{class:"mb-2"}),h("div",pve,[l(oe,{variant:"outlined",onClick:Y[9]||(Y[9]=ut=>P(d.value.id,k.value,S.value)),disabled:!ie.value},{default:u(()=>[...Y[31]||(Y[31]=[O("Add to Queue",-1)])]),_:1},8,["disabled"])])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)):m.value?(R(),ve(ce,{key:1,flat:"",class:"text-left",variant:"text"},{default:u(()=>[l(Oe,{modelValue:Q.value,"onUpdate:modelValue":Y[24]||(Y[24]=ut=>Q.value=ut),"validate-on":"input"},{default:u(()=>[l(j,{"no-gutters":"",class:"mt-0 mb-4"},{default:u(()=>[l(ee,{cols:"6",class:"pr-2"},{default:u(()=>[l(Be,{label:"Name *",modelValue:g.value.name,"onUpdate:modelValue":Y[11]||(Y[11]=ut=>g.value.name=ut),clearable:"",rules:Qe(fr),density:"compact","hide-details":"auto"},null,8,["modelValue","rules"])]),_:1}),l(ee,{cols:"6",class:"pl-2"},{default:u(()=>[l(Be,{label:"Phone Number *",modelValue:g.value.contact_number,"onUpdate:modelValue":Y[12]||(Y[12]=ut=>g.value.contact_number=ut),type:"tel",rules:Qe(Ah),clearable:"",density:"compact",maxlength:"10",onInput:X,"hide-details":"auto"},null,8,["modelValue","rules"])]),_:1})]),_:1}),l(j,{"no-gutters":"",class:"my-4"},{default:u(()=>[l(ee,{cols:"6",class:"pr-2"},{default:u(()=>[h("div",gve,[l(Me,{modelValue:v.value,"onUpdate:modelValue":Y[13]||(Y[13]=ut=>v.value=ut),mandatory:"",density:"compact",variant:"outlined",divided:"",class:"age-dob-toggle"},{default:u(()=>[l(oe,{value:"dob",size:"small"},{default:u(()=>[...Y[32]||(Y[32]=[O("DOB",-1)])]),_:1}),l(oe,{value:"age",size:"small"},{default:u(()=>[...Y[33]||(Y[33]=[O("Age",-1)])]),_:1})]),_:1},8,["modelValue"]),v.value==="age"?(R(),ve(Be,{key:0,label:"Age (yrs) *",modelValue:g.value.age,"onUpdate:modelValue":Y[14]||(Y[14]=ut=>g.value.age=ut),clearable:"",density:"compact",rules:Qe(aT),disabled:!!g.value.birthDate||!!p.value,class:"flex-grow-1","hide-details":"auto"},null,8,["modelValue","rules","disabled"])):(R(),ve(Be,{key:1,label:"Date of Birth *",modelValue:g.value.birthDate,"onUpdate:modelValue":[Y[15]||(Y[15]=ut=>g.value.birthDate=ut),le],type:"date",clearable:"",density:"compact",rules:Qe(rT),class:"flex-grow-1 date-input","hide-details":"auto",onClick:Y[16]||(Y[16]=ut=>ut.target.showPicker&&ut.target.showPicker())},null,8,["modelValue","rules"]))])]),_:1}),l(ee,{cols:"6",class:"pl-2"},{default:u(()=>[l(Te,{modelValue:g.value.gender,"onUpdate:modelValue":Y[17]||(Y[17]=ut=>g.value.gender=ut),items:["Male","Female"],label:"Gender *",clearable:"",density:"compact",rules:Qe(sT),"hide-details":"auto"},null,8,["modelValue","rules"])]),_:1})]),_:1}),l(j,{"no-gutters":"",class:"my-4"},{default:u(()=>[l(ee,{cols:"12"},{default:u(()=>[l(Be,{label:"Email (optional)",modelValue:g.value.email,"onUpdate:modelValue":Y[18]||(Y[18]=ut=>g.value.email=ut),type:"email",clearable:"",density:"compact",rules:Qe(wg),"hide-details":"auto"},null,8,["modelValue","rules"])]),_:1})]),_:1}),l(j,{"no-gutters":"",class:"my-4"},{default:u(()=>[l(ee,{cols:"6",class:"pr-2"},{default:u(()=>[l(Be,{label:"Appointment Date *",modelValue:x.value,"onUpdate:modelValue":Y[19]||(Y[19]=ut=>x.value=ut),type:"date",density:"compact",rules:Qe(aE),class:"date-input",onClick:Y[20]||(Y[20]=ut=>ut.target.showPicker&&ut.target.showPicker()),"hide-details":"auto"},null,8,["modelValue","rules"])]),_:1}),l(ee,{cols:"6",class:"pl-2"},{default:u(()=>[l(Be,{label:"Appointment Time",modelValue:T.value,"onUpdate:modelValue":Y[21]||(Y[21]=ut=>T.value=ut),type:"time",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1})]),_:1}),l(j,{"no-gutters":"",class:"my-4"},{default:u(()=>[l(ee,{cols:"6",class:"pr-2"},{default:u(()=>[l(Te,{modelValue:F.value,"onUpdate:modelValue":Y[22]||(Y[22]=ut=>F.value=ut),items:["consultation","followup","procedure"],label:"Appointment Type",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1}),l(ee,{cols:"6",class:"pl-2"},{default:u(()=>[l(Te,{modelValue:D.value,"onUpdate:modelValue":Y[23]||(Y[23]=ut=>D.value=ut),items:["walkin","scheduled"],label:"Appointment Category",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1})]),_:1}),l(j,{"no-gutters":""},{default:u(()=>[l(ee,{cols:"12"},{default:u(()=>[l(_e,{class:"mb-2"}),h("div",yve,[l(oe,{variant:"outlined",disabled:!Q.value,onClick:q},{default:u(()=>[...Y[34]||(Y[34]=[O("Create and Add to Queue ",-1)])]),_:1},8,["disabled"])])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})):(R(),ve(rt,{key:2,image:Qe($M)},{title:u(()=>[...Y[35]||(Y[35]=[h("div",{class:"text-subtitle-2 mt-8"}," Search for old patients or add a new patient above ",-1)])]),text:u(()=>[...Y[36]||(Y[36]=[h("div",{class:"text-caption"},null,-1)])]),_:1},8,["image"]))]),_:1})]),_:1})]),_:1})]),_:1})}}},oU=qt(_ve,[["__scopeId","data-v-944161e8"]]),wve=async(e,t,n=null)=>{try{console.log("fetchAppointments called with params:",{doctor_id:e,clinic_id:t,date:n});const a={doctor_id:e,clinic_id:t};return n?(a.date=n,console.log("Adding date to params:",n)):console.log("No date provided, will use server default (today)"),console.log("Final API params:",a),{data:(await At.get("/appointment/",{params:a})).data.data.appointments,error:null}}catch(a){return console.error("There was an error fetching the patients:",a?.response||a),{data:[],error:a}}},bve=async(e="",t="")=>{try{const n={};e&&e.trim()!==""&&(n.doctor=e.trim()),t&&t.trim()!==""&&(n.fromdate=t.trim());const a=await At.get("/appointment/completed",{params:n});return{data:a.data.data.appointments||[],total:a.data.data.total||0,filters:a.data.data.filters||{},error:null}}catch(n){return console.error("There was an error fetching completed appointments:",n?.response||n),{data:[],total:0,filters:{},error:n}}},QM=async e=>{try{return await At.put(`/appointment/${e.id}`,e),{error:null}}catch(t){return console.error("Error updating consultation:",t),{error:t}}},xve=async e=>{try{return await At.delete(`/appointment/${e}`),{error:null}}catch(t){return console.error("Error deleting appointment:",t),{error:t}}},Cve={class:"d-flex justify-center"},iU={__name:"edit-appointment",props:{appointment:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const r=V((d=>{console.log("Edit appointment - original appointment:",d);const f={...d};if(f.appointmentDate){console.log("Original appointmentDate:",f.appointmentDate);let m=f.appointmentDate;if(m.includes("T")?m=m.split("T")[0]:m.length>10&&(m=m.split(" ")[0]),/^\d{4}-\d{2}-\d{2}$/.test(m))f.appointmentDate=m;else try{const p=new Date(m);if(!isNaN(p.getTime())){const g=p.getFullYear(),y=String(p.getMonth()+1).padStart(2,"0"),w=String(p.getDate()).padStart(2,"0");f.appointmentDate=`${g}-${y}-${w}`}}catch(p){console.error("Error parsing appointment date:",m,p)}console.log("Formatted appointmentDate:",f.appointmentDate)}return f.category||(f.category="scheduled"),f.status||(f.status="waiting"),f})(e.appointment)),s=t,o=V(!1),i=()=>{s("close")},c=async()=>{await A(r.value),console.log("close modal",r.value),s("close")},A=async d=>{(await QM(d)).error?console.error("Error updating consultation:"):console.log("Appointment updated successfully")};return(d,f)=>{const m=I("v-card-title"),v=I("v-col"),p=I("v-icon"),g=I("v-btn"),y=I("v-row"),w=I("v-card"),b=I("v-text-field"),x=I("v-select"),T=I("v-divider"),D=I("v-form");return R(),ve(w,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[l(y,{"no-gutters":""},{default:u(()=>[l(v,{cols:"12"},{default:u(()=>[l(w,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(y,{"no-gutters":""},{default:u(()=>[l(v,{cols:"11"},{default:u(()=>[l(m,{class:"pa-0 pl-2"},{default:u(()=>[...f[7]||(f[7]=[O("Edit appointment details",-1)])]),_:1})]),_:1}),l(v,{cols:"1"},{default:u(()=>[l(g,{icon:"",size:"x-small",onClick:i},{default:u(()=>[l(p,null,{default:u(()=>[...f[8]||(f[8]=[h("img",{src:nu,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(y,{"no-gutters":""},{default:u(()=>[l(v,{cols:"12"},{default:u(()=>[l(w,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(D,{modelValue:o.value,"onUpdate:modelValue":f[6]||(f[6]=k=>o.value=k),"validate-on":"blur"},{default:u(()=>[l(y,{"no-gutters":""},{default:u(()=>[l(v,{cols:"12"},{default:u(()=>[l(b,{label:"Appointment Date *",modelValue:r.value.appointmentDate,"onUpdate:modelValue":f[0]||(f[0]=k=>r.value.appointmentDate=k),type:"date",rules:Qe(aE)},null,8,["modelValue","rules"])]),_:1}),l(v,{cols:"12"},{default:u(()=>[l(b,{label:"Appointment Time",modelValue:r.value.appointmentTime,"onUpdate:modelValue":f[1]||(f[1]=k=>r.value.appointmentTime=k),type:"time"},null,8,["modelValue"])]),_:1}),l(v,{cols:"12"},{default:u(()=>[l(x,{modelValue:r.value.type,"onUpdate:modelValue":f[2]||(f[2]=k=>r.value.type=k),items:["consultation","followup","procedure"],label:"Appointment Type"},null,8,["modelValue"])]),_:1}),l(v,{cols:"12"},{default:u(()=>[l(x,{modelValue:r.value.category,"onUpdate:modelValue":f[3]||(f[3]=k=>r.value.category=k),items:["walkin","scheduled"],label:"Appointment Category"},null,8,["modelValue"])]),_:1}),l(v,{cols:"12"},{default:u(()=>[l(x,{modelValue:r.value.status,"onUpdate:modelValue":f[4]||(f[4]=k=>r.value.status=k),items:[{title:"waiting",value:"waiting"},{title:"confirmed",value:"confirmed"},{title:"completed",value:"completed"},{title:"cancelled",value:"cancelled"}],label:"Appointment Status","item-title":"title","item-value":"value"},null,8,["modelValue"])]),_:1}),l(v,{cols:"12"},{default:u(()=>[l(T,{class:"mb-2"}),h("div",Cve,[l(g,{variant:"outlined",onClick:f[5]||(f[5]=k=>c()),disabled:!o.value},{default:u(()=>[...f[9]||(f[9]=[O("Update Appointment",-1)])]),_:1},8,["disabled"])])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},Sve=async e=>{try{return!e||e.trim().length===0?{data:{services:[]},error:null}:{data:(await At.get(`/services/search_services/${encodeURIComponent(e)}`)).data.data,error:null}}catch(t){return console.error("Error searching services:",t),{data:null,error:t}}},Eve=async()=>{try{return{data:(await At.get("/services/all")).data.data,error:null}}catch(e){return console.error("Error fetching all services:",e),{data:null,error:e}}},Bve=async e=>{try{if(!e)throw new Error("Doctor ID is required");return{data:(await At.get(`/paymentreceipt/next-identifier/${e}`)).data.data,error:null}}catch(t){return console.error("Error getting next receipt identifier:",t),t.response?.status===400&&t.response?.data?.error?.includes("No receipt series found")?{data:null,error:{message:"No receipt series found. Please create a receipt series first in Admin Settings  Payment Receipt Series Configuration.",needsSeries:!0}}:{data:null,error:t}}},GM=async e=>{try{if(!e.doctorId)throw new Error("Doctor ID is required");if(!e.appointmentId&&!e.billId)throw new Error("Either Appointment ID or Bill ID is required");if(!e.billId&&(!e.services||!Array.isArray(e.services)||e.services.length===0))throw new Error("At least one service is required when Bill ID is not provided");return{data:(await At.post("/paymentreceipt/with-services",e)).data.data,error:null}}catch(t){if(console.error("Error creating receipt with services:",t),t.response?.status===500){const n=t.response?.data?.error||t.message||"";if(n.includes("No receipt series found")||n.includes("receipt series")||t.response?.data&&JSON.stringify(t.response.data).includes("receipt series"))return{data:null,error:{message:"No receipt series found. Please create a receipt series first in Admin Settings  Payment Receipt Series Configuration.",needsSeries:!0}}}return t.response?.status===400&&t.response?.data?.error?.includes("No receipt series found")?{data:null,error:{message:"No receipt series found. Please create a receipt series first in Admin Settings  Payment Receipt Series Configuration.",needsSeries:!0}}:{data:null,error:t}}},zM=async e=>{try{if(!e)throw new Error("Receipt ID is required");return{data:(await At.get(`/paymentreceipt/${e}/with-services`)).data.data,error:null}}catch(t){return console.error("Error getting receipt with services:",t),{data:null,error:t}}},kve=async(e,t)=>{try{if(!e)throw new Error("Receipt ID is required");if(!t.services||!Array.isArray(t.services)||t.services.length===0)throw new Error("At least one service is required");return{data:(await At.put(`/paymentreceipt/${e}/with-services`,t)).data.data,error:null}}catch(n){return console.error("Error updating receipt with services:",n),{data:null,error:n}}},Tve=async(e,t)=>{try{if(!e)throw new Error("Receipt ID is required");console.log(`Updating payment receipt ${e} with data:`,t);const n=await At.put(`/paymentreceipt/${e}`,t);return console.log("Payment receipt updated successfully via basic endpoint"),{data:n.data.data,error:null}}catch(n){return console.error("Error updating payment receipt:",n),n.response&&console.error("API Error Response:",n.response.status,n.response.data),{data:null,error:n}}},Ive={class:"service-name-truncate"},Fve={class:"text-caption"},Pve={class:"ml-3"},Dve={key:0,class:"ml-3"},Uve={__name:"search-service",props:{modelValue:{type:String,default:""}},emits:["update:modelValue","serviceSelected"],setup(e,{emit:t}){const n=e,a=t,r=V(!1),s=V([]),o=V([]),i=V(!1),c=V(""),A=V(""),d=V(!1);let f=null;const m=b=>{c.value=b,i.value&&o.value.length>0?g(b):i.value||v()},v=async()=>{i.value?(!c.value||c.value.length===0)&&(s.value=o.value,d.value=!1):await p()};je(A,b=>{typeof b=="string"?(a("update:modelValue",b),a("serviceSelected",{serviceDescription:b,isUserTyped:!0,isFromHistory:!1})):b&&typeof b=="object"?(a("update:modelValue",b.serviceDescription),a("serviceSelected",b)):b||(a("update:modelValue",""),a("serviceSelected",null))}),je(c,b=>{if(f&&clearTimeout(f),d.value=!1,i.value&&o.value.length>0){if(!b||b.length<1){s.value=o.value,r.value=!1;return}g(b);return}if(!b||b.length<1){r.value=!1,s.value=[];return}f=setTimeout(()=>{y(b)},300)}),je(()=>n.modelValue,b=>{b!==A.value&&(A.value=b)},{immediate:!0});const p=async()=>{if(!i.value){r.value=!0,d.value=!1;try{const b=await Eve();if(b.error){console.error("Error fetching all services:",b.error),d.value=!0;return}o.value=(b.data.services||[]).filter(x=>x.serviceDescription&&x.serviceDescription.trim().length>0),i.value=!0,s.value=o.value,c.value&&c.value.length>0&&g(c.value)}catch(b){console.error("Error fetching all services:",b),d.value=!0}finally{r.value=!1}}},g=b=>{if(!b||b.trim().length===0){s.value=o.value,d.value=!1;return}const x=b.toLowerCase().trim(),T=o.value.filter(D=>(D.serviceDescription||"").toLowerCase().includes(x));s.value=T,d.value=T.length===0},y=async b=>{if(!(!b||b.length<1)){r.value=!0,d.value=!1;try{const x=await Sve(b);if(x.error){console.error("Error fetching services:",x.error),d.value=!0;return}s.value=x.data.services.filter(T=>T.serviceDescription&&T.serviceDescription.trim().length>0),(!s.value||s.value.length===0)&&(d.value=!0)}catch(x){console.error("Error fetching services:",x),d.value=!0}finally{r.value=!1}}},w=ne(()=>r.value?i.value?"Filtering services...":"Loading services...":d.value?"No matching services found. You can create a new service by typing the description.":!c.value||c.value.length<1?i.value&&o.value.length>0?`Showing all ${o.value.length} services. Type to filter...`:"Click to view all services or type to search...":"");return(b,x)=>{const T=I("v-list-item"),D=I("v-card-subtitle"),k=I("v-card"),S=I("v-combobox");return R(),ve(S,{modelValue:A.value,"onUpdate:modelValue":x[0]||(x[0]=E=>A.value=E),items:s.value,search:c.value,"onUpdate:search":m,"onClick:clear":v,onFocus:v,onClick:v,"item-title":"serviceDescription","item-value":"serviceDescription",placeholder:"Type service description...",variant:"underlined",loading:r.value,"no-data-text":w.value,clearable:"","hide-no-data":"","auto-select-first":"",density:"compact",class:"service-combobox"},{item:u(({props:E,item:C,index:U})=>[(R(),ve(T,Pe({...E,title:void 0,value:C.raw.id||`service-${U}`},{key:C.raw.id||`service-temp-${U}`,density:"compact"}),{title:u(()=>[h("span",Ive,K(C.raw.serviceDescription),1)]),subtitle:u(()=>[h("div",Fve,[h("span",null,"Base Cost: "+K(C.raw.baseCost),1),h("span",Pve,"GST: "+K(C.raw.gstPercent||0)+"%",1),C.raw.hsnSacCode?(R(),Ae("span",Dve,"HSN/SAC: "+K(C.raw.hsnSacCode),1)):ye("",!0)])]),_:2},1040))]),"no-data":u(()=>[l(k,{flat:"",class:"pa-4 text-center"},{default:u(()=>[l(D,null,{default:u(()=>[O(K(w.value),1)]),_:1})]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},Cw=qt(Uve,[["__scopeId","data-v-62266e1f"]]),fh=async e=>{try{return console.log("Creating payment with data:",e),{success:!0,data:(await At.post("/payment",e)).data.data,message:"Payment created successfully"}}catch(t){return console.error("Error creating payment:",t),{success:!1,error:{message:t.response?.data?.error||t.message||"Failed to create payment",status:t.response?.status||500}}}},bg=async e=>{try{console.log("Fetching payments for receipt ID:",e);const t=await At.get(`/payment?paymentReceiptId=${e}`);return console.log("Raw API response:",t.data),{success:!0,data:t.data.data.payments,message:"Payments fetched successfully"}}catch(t){return console.error("Error fetching payments by receipt:",t),{success:!1,error:{message:t.response?.data?.error||t.message||"Failed to fetch payments",status:t.response?.status||500}}}},oT=async e=>{try{return console.log("Deleting payment with ID:",e),{success:!0,data:(await At.delete(`/payment/${e}`)).data.data,message:"Payment deleted successfully"}}catch(t){return console.error("Error deleting payment:",t),{success:!1,error:{message:t.response?.data?.error||t.message||"Failed to delete payment",status:t.response?.status||500}}}},KM=async(e="",t=null,n=null)=>{try{console.log("Fetching payment receipts with filters:",{paymentReceiptDate:e,doctorId:t,treatmentPlanId:n});const a=new URLSearchParams;e&&a.append("paymentReceiptDate",e),t&&a.append("doctor_id",t.toString()),n&&a.append("treatmentPlanId",n.toString());const r=a.toString()?`/paymentreceipt?${a.toString()}`:"/paymentreceipt";return{success:!0,data:(await At.get(r)).data.data,message:"Payment receipts fetched successfully"}}catch(a){return console.error("Error fetching payment receipts:",a),{success:!1,error:{message:a.response?.data?.error||a.message||"Failed to fetch payment receipts",status:a.response?.status||500}}}},WM=async(e,t,n,a=null)=>{try{const r=e.state.doctorModule?.doctorId;if(!r)throw new Error("No doctor selected. Please select a doctor first.");return console.log("Fetching payment receipts for date range:",{startDate:t,endDate:n,doctorId:r,treatmentPlanId:a}),await jM(t,n,r,a)}catch(r){return console.error("Error fetching payment receipts for date range:",r),{success:!1,error:{message:r.message||"Failed to fetch payment receipts for date range",status:500}}}},jM=async(e,t,n=null,a=null)=>{try{console.log("Fetching payment receipts for date range with filters:",{startDate:e,endDate:t,doctorId:n,treatmentPlanId:a});const r=new URLSearchParams;e&&r.append("startDate",e),t&&r.append("endDate",t),n&&r.append("doctor_id",n.toString()),a&&r.append("treatmentPlanId",a.toString());const s=`/paymentreceipt?${r.toString()}`;return{success:!0,data:(await At.get(s)).data.data,message:"Payment receipts fetched successfully for date range"}}catch(r){return console.error("Error fetching payment receipts for date range:",r),{success:!1,error:{message:r.response?.data?.error||r.message||"Failed to fetch payment receipts for date range",status:r.response?.status||500}}}},Sw=async(e,t="",n=null)=>{try{const a=e.state.doctorModule?.doctorId;if(!a)throw new Error("No doctor selected. Please select a doctor first.");return console.log("Fetching payment receipts for current doctor:",a,"treatmentPlanId:",n),await KM(t,a,n)}catch(a){return console.error("Error fetching payment receipts for current doctor:",a),{success:!1,error:{message:a.message||"Failed to fetch payment receipts for current doctor",status:500}}}},mh=["Cash","Card","UPI","Bank Transfer","Cheque","Online","Other"],dr=e=>!e&&e!==0?"0":`${Number(e).toLocaleString("en-IN")}`,Rve=Object.freeze(Object.defineProperty({__proto__:null,PAYMENT_MODES:mh,createPayment:fh,deletePayment:oT,fetchAllPaymentReceipts:KM,fetchAllPaymentReceiptsForDateRange:jM,fetchPaymentReceiptsForCurrentDoctor:Sw,fetchPaymentReceiptsForDateRange:WM,formatPaymentAmount:dr,getPaymentsByReceipt:bg},Symbol.toStringTag,{value:"Module"})),rE=async(e,t,n,a="",r="",s="",o=0)=>{try{return{data:(await At.post("/treatmentplan/",{patient_id:e,doctor_id:t,treatmentplan_name:n,start_date:a,end_date:r,notes:s,amount_paid:o})).data.data,error:null}}catch(i){return console.error("There was an error creating the treatment plan:",i),{data:null,error:i}}},iT=async(e,t)=>{try{if(!e)throw new Error("patient_id is required");if(!t)throw new Error("doctor_id is required");console.log(" Making API call to:",`/treatmentplan/patient/${e}/doctor/${t}`);const n=await At.get(`/treatmentplan/patient/${e}/doctor/${t}`);return console.log(" API Response status:",n.status),console.log(" API Response treatment plans count:",n.data?.data?.length||0),{data:Qn.cloneDeep(n.data.data),error:null}}catch(n){if(console.error(" Error fetching treatment plans:",n),console.error(" Error details:",{message:n.message,status:n.response?.status,statusText:n.response?.statusText,data:n.response?.data,url:n.config?.url,sqlError:n.response?.data?.error,sqlMessage:n.response?.data?.message}),n.response?.status===500){const a=n.response?.data?.message||n.response?.data?.error||n.message;if(a.includes("treatmentplan")&&(a.includes("table")||a.includes("relation")||a.includes("does not exist")))return console.error(" Database table 'treatmentplan' might not exist or have incorrect schema"),{data:[],error:{...n,message:"Treatment plans table not found or has incorrect schema. Please check database setup.",type:"DATABASE_TABLE_ERROR"}}}return{data:[],error:n}}},xf=async e=>{try{const t=await At.get(`/treatmentplan/${e}`);return{data:Qn.cloneDeep(t.data.data),error:null}}catch(t){return console.error("Error fetching treatment plan details:",t),{data:null,error:t}}},qM=async e=>{try{return await At.delete(`/treatmentplan/${e}`),{error:null}}catch(t){return console.error("Error deleting treatment plan:",t),{error:t}}},YM=async(e="",t)=>{try{if(!t)throw new Error("Doctor ID is required");const n=new URLSearchParams;e&&n.append("search",e),n.append("doctor_id",t);const a=`/procedure/?${n.toString()}`,r=await At.get(a);return{data:Qn.cloneDeep(r.data.data),error:null}}catch(n){return console.error("Error fetching procedures:",n),{data:[],error:n}}},lT=async(e,t=0,n="",a=!0,r="",s="",o)=>{try{if(!o)throw new Error("Doctor ID is required");const i=new URLSearchParams;return i.append("doctor_id",o),{data:(await At.post(`/procedure/?${i.toString()}`,{procedure_name:e,cost:t,description:n,isLocal:a,procedureId:r,identifier:s})).data.data,error:null}}catch(i){return console.error("There was an error creating the procedure:",i),{data:null,error:i}}},XM=async(e,t,n)=>{try{if(!n)throw new Error("Doctor ID is required");const a=new URLSearchParams;a.append("doctor_id",n);const r=await At.put(`/procedure/${e}?${a.toString()}`,t);return{data:Qn.cloneDeep(r.data.data),error:null}}catch(a){return console.error("Error updating procedure:",a),{data:null,error:a}}},wp=async(e,t,n=0,a="",r="",s="")=>{try{return{data:(await At.post(`/treatmentplan/${e}/procedure`,{procedure_id:t,cost_estimate:n,notes:a,location:r,option:s})).data.data,error:null}}catch(o){return console.error("There was an error creating the treatment plan-procedure mapping:",o),{data:null,error:o}}},sE=async(e,t,n)=>{try{return{data:(await At.put(`/treatmentplan/${e}/procedure-treatment/${t}`,n)).data.data,error:null}}catch(a){return console.error("There was an error updating the treatment plan-procedure mapping:",a),{data:null,error:a}}},JM=async(e,t)=>{try{return await At.delete(`/treatmentplan/${e}/procedure-treatment/${t}`),{error:null}}catch(n){return console.error("There was an error deleting the treatment plan-procedure mapping:",n),{error:n}}},Nve=async e=>{try{if(!e.doctor_id)throw new Error("doctor_id is required");const t=new URLSearchParams;e.procedureName?.trim()&&t.append("procedure_name",e.procedureName.trim()),e.dateFrom&&t.append("date_from",e.dateFrom),e.dateTo&&t.append("date_to",e.dateTo),e.gender?.trim()&&t.append("gender",e.gender.trim()),e.ageGreaterThan&&t.append("age_greater_than",e.ageGreaterThan),e.ageLessThan&&t.append("age_less_than",e.ageLessThan),t.append("doctor_id",e.doctor_id);const n=t.toString(),a=`/procedure/research${n?`?${n}`:""}`;console.log(" Making procedure research API call to:",a);const r=await At.get(a);return console.log(" API Response status:",r.status),console.log(" API Response procedure research results count:",r.data?.data?.length||0),{data:Qn.cloneDeep(r.data.data),error:null}}catch(t){if(console.error(" Error searching procedure research data:",t),console.error(" Error details:",{message:t.message,status:t.response?.status,statusText:t.response?.statusText,data:t.response?.data,url:t.config?.url,sqlError:t.response?.data?.error,sqlMessage:t.response?.data?.message}),t.response?.status===500){const n=t.response?.data?.message||t.response?.data?.error||t.message;if(n.includes("procedure")&&(n.includes("table")||n.includes("relation")||n.includes("does not exist")))return console.error(" Database table for procedure research might not exist or have incorrect schema"),{data:[],error:{...t,message:"Procedure research tables not found or have incorrect schema. Please check database setup.",type:"DATABASE_TABLE_ERROR"}}}return{data:[],error:t}}},xg=async(e,t)=>{try{const n=await iT(e,t);if(n.error)return n;const a=n.data.filter(r=>r.status!=="Cancelled"&&!r.isTemplate);return console.log(" Filtered treatment plans for receipt linking:",{total:n.data.length,filtered:a.length,excluded:n.data.length-a.length}),{data:a,error:null}}catch(n){return console.error(" Error fetching treatment plans for receipt:",n),{data:[],error:n}}},ZM=async(e,t,n)=>{try{if(!n)throw new Error("Doctor ID is required");const a=new URLSearchParams;a.append("doctor_id",n);const r=await At.put(`/procedure/${e}?${a.toString()}`,{description:t});return{data:Qn.cloneDeep(r.data.data),error:null}}catch(a){return console.error("Error updating procedure description:",a),{data:null,error:a}}},eO=async(e="",t)=>{try{if(!t)throw new Error("Doctor ID is required");const n=new URLSearchParams;n.append("doctor_id",t);const a=e&&e.trim()?e.trim():"all",r=`/treatmentplan/template/search/${encodeURIComponent(a)}?${n.toString()}`,s=await At.get(r);return{data:Qn.cloneDeep(s.data.data.templates||[]),error:null}}catch(n){return console.error("Error searching treatment plan templates:",n),{data:[],error:n}}},tO=async e=>{try{const t=await At.post("/treatmentplan/template",e);return{data:Qn.cloneDeep(t.data.data),error:null}}catch(t){return console.error("Error creating treatment plan template:",t),{data:null,error:t}}},nO=async(e,t)=>{try{const n=await At.put(`/treatmentplan/template/${e}`,t);return{data:Qn.cloneDeep(n.data.data),error:null}}catch(n){return console.error("Error updating treatment plan template:",n),{data:null,error:n}}},aO=async e=>{try{const t=await At.get(`/treatmentplan/template/${e}`);return{data:Qn.cloneDeep(t.data.data),error:null}}catch(t){return console.error("Error fetching treatment plan template:",t),{data:null,error:t}}},rO=async e=>{try{if(!e)throw new Error("Doctor ID is required");const t=new URLSearchParams;t.append("doctor_id",e);const n=`/treatmentplan/template/search/all?${t.toString()}`,a=await At.get(n);return{data:Qn.cloneDeep(a.data.data||[]),error:null}}catch(t){return console.error("Error fetching all treatment plan templates:",t),{data:[],error:t}}},Vve=Object.freeze(Object.defineProperty({__proto__:null,createProcedure:lT,createProcedureTreatment:wp,createTreatmentPlan:rE,createTreatmentPlanTemplate:tO,deleteProcedureTreatment:JM,deleteTreatmentPlan:qM,fetchProcedureDetails:xf,fetchProcedures:YM,fetchTreatmentPlans:iT,fetchTreatmentPlansForReceipt:xg,getAllTreatmentPlanTemplates:rO,getTreatmentPlanTemplate:aO,searchProcedureResearch:Nve,searchTreatmentPlanTemplates:eO,updateProcedure:XM,updateProcedureDescription:ZM,updateProcedureTreatment:sE,updateTreatmentPlanTemplate:nO},Symbol.toStringTag,{value:"Module"}));function uT(e,t){const n=A=>{const d=parseFloat(A.baseCost)||0,f=parseInt(A.quantity)||1,m=parseFloat(A.discountAmount)||0;return Math.max(0,d-m)*f},a=ne(()=>e.value.map(A=>({...A,total:n(A)}))),r=ne(()=>e.value.reduce((A,d)=>{const f=parseFloat(d.baseCost)||0,m=parseInt(d.quantity)||1;return A+f*m},0)),s=ne(()=>e.value.reduce((A,d)=>{const f=parseFloat(d.discountAmount)||0,m=parseInt(d.quantity)||1;return A+f*m},0)),o=ne(()=>{const A=s.value,d=parseFloat(t.value)||0;return A+d}),i=ne(()=>{const A=r.value,d=o.value;return Math.max(0,A-d)}),c=ne(()=>e.value.some(A=>A.serviceDescription&&A.serviceDescription.trim().length>0&&parseFloat(A.baseCost)>0));return{servicesWithTotals:a,subtotal:r,totalLineDiscount:s,totalAllDiscounts:o,finalGrandTotal:i,hasValidService:c,calculateServiceTotal:n}}const Lve={class:"pa-1"},Mve={class:"text-body-1 font-weight-medium"},Ove={class:"text-body-2 text-medium-emphasis"},Hve={class:"pa-1"},$ve={class:"text-body-1 font-weight-medium"},Qve={class:"text-body-2 text-medium-emphasis"},Gve={class:"pa-1"},zve={class:"text-body-2 text-medium-emphasis"},Kve={class:"d-flex flex-column py-1"},Wve={class:"text-body-2 font-weight-medium"},jve={class:"text-caption text-medium-emphasis"},qve={key:0},Yve={class:"text-caption"},Xve={key:0,class:"ml-2"},Jve={class:"font-weight-bold"},Zve={key:0,class:"text-body-2 mb-1"},ehe={class:"text-body-2 mb-1"},the={class:"text-body-2 mb-1"},nhe={key:0,class:"text-body-2 mb-1"},ahe={class:"text-subtitle-1 font-weight-bold"},rhe={__name:"payment-receipt-create",props:{appointment:{type:Object,required:!0}},emits:["close","receiptCreated","view-receipt"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ca(),o=ra(),i=ne(()=>o.state.doctorModule.doctorId),c=ne(()=>o.getters["doctorModule/currentDoctor"]),A=ne(()=>c.value?.doctorName||"Unknown Doctor"),d=V({patientName:n.appointment?.patient_name||"",patientId:n.appointment?.patientId||"",appointmentDate:n.appointment?.appointmentDate||"",receiptDate:Rn(),appointmentId:n.appointment?.id||null,doctorId:i.value,additionalDiscount:0}),f=V([{serviceDescription:"",baseCost:0,discountAmount:0,quantity:1,total:0,isFromHistory:!1}]),m=V(!1),v=V(null),p=V([]),g=V(!1);ne(()=>v.value?p.value.find(W=>W.id===v.value):null);const y=V(!1),w=uT(f,ne(()=>d.value.additionalDiscount)),{servicesWithTotals:b,subtotal:x,totalLineDiscount:T,finalGrandTotal:D,hasValidService:k}=w;V(null);const S=mh,E=V([{amount:null,mode:"Cash",paymentDate:Rn(),datePickerMenu:!1}]),C=[W=>!!W||"Amount is required",W=>W>0||"Amount must be greater than 0",W=>Number.isInteger(Number(W))||"Amount must be a whole number"],U=[W=>!!W||"Payment mode is required"],F=[W=>!!W||"Payment date is required"],L=()=>{f.value.push({serviceDescription:"",baseCost:0,discountAmount:0,quantity:1,total:0,isFromHistory:!1})},H=W=>{f.value.length>1?f.value.splice(W,1):f.value[0]={serviceDescription:"",baseCost:0,discountAmount:0,quantity:1,total:0,isFromHistory:!1}},ue=(W,ee)=>{f.value[W]&&(f.value[W].serviceDescription=ee)},ie=(W,ee)=>{console.log("Service selected:",ee),ee&&typeof ee=="object"&&!ee.isUserTyped?f.value[W]={...f.value[W],serviceDescription:ee.serviceDescription,baseCost:ee.baseCost||0,isFromHistory:!1}:ee===null&&(f.value[W]={...f.value[W],serviceDescription:"",baseCost:0,isFromHistory:!1})},Q=async()=>{if(!d.value.patientId||!d.value.doctorId){console.log("Missing patient or doctor ID for loading treatment plans");return}g.value=!0;try{console.log("Loading treatment plans for patient:",d.value.patientId,"doctor:",d.value.doctorId);const W=await xg(d.value.patientId,d.value.doctorId);if(W.error)throw new Error(W.error.message||"Failed to load treatment plans");p.value=W.data||[],console.log("Loaded treatment plans:",p.value.length)}catch(W){console.error("Error loading treatment plans:",W),s("Failed to load treatment plans: "+(W.message||"Unknown error")),p.value=[]}finally{g.value=!1}},X=ne(()=>E.value.reduce((W,ee)=>W+(parseFloat(ee.amount)||0),0));ne(()=>D.value-X.value);const le=W=>{if(!W)return"";try{return new Date(W).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return W}},Z=ne(()=>{const W=k.value,ee=d.value.doctorId&&d.value.appointmentId;return console.log("Validation check:",{hasValidService:W,hasValidAppointment:ee,services:f.value,receiptData:d.value}),W&&ee}),re=()=>{E.value.push({amount:null,mode:"Cash",paymentDate:Rn(),datePickerMenu:!1})},q=W=>{E.value.length>1?E.value.splice(W,1):E.value[0]={amount:null,mode:"Cash",paymentDate:Rn(),datePickerMenu:!1}},P=W=>{if(!W)return null;try{if(typeof W=="string")return W.includes("T")?W.split("T")[0]:W;if(W instanceof Date){const ee=W.getFullYear(),ae=String(W.getMonth()+1).padStart(2,"0"),oe=String(W.getDate()).padStart(2,"0");return`${ee}-${ae}-${oe}`}return null}catch(ee){return console.error("Error parsing payment date:",ee),null}},G=(W,ee)=>{if(W)if(W instanceof Date){const ae=W.getFullYear(),oe=String(W.getMonth()+1).padStart(2,"0"),j=String(W.getDate()).padStart(2,"0");ee.paymentDate=`${ae}-${oe}-${j}`}else typeof W=="string"&&(ee.paymentDate=W);else ee.paymentDate="";ee.datePickerMenu=!1},J=()=>{},M=async()=>{if(!Z.value){s("Please add at least one valid service with description and cost");return}y.value=!0;try{const{data:W,error:ee}=await Bve(d.value.doctorId);if(ee){if(ee.needsSeries){s("No receipt series found. Please create a receipt series first in Admin Settings  Payment Receipt Series Configuration.");return}throw new Error(ee.message||"Failed to get next receipt identifier")}console.log("Next receipt identifier:",W);const ae=f.value.filter(de=>de.serviceDescription&&de.serviceDescription.trim().length>0).map(de=>({serviceDescription:de.serviceDescription.trim(),baseCost:parseFloat(de.baseCost)||0,gstPercent:0,quantity:parseInt(de.quantity)||1,discountAmount:parseFloat(de.discountAmount)||0})),oe={doctorId:d.value.doctorId,appointmentId:d.value.appointmentId,paymentReceiptDate:d.value.receiptDate,additionalDiscount:parseFloat(d.value.additionalDiscount)||0,isThreeC:!0,treatmentPlanId:m.value?v.value:null,services:ae};console.log("Creating receipt with payload:",oe);const j=await GM(oe);if(j.error){s(j.error.message||"Failed to create receipt");return}console.log("Receipt created successfully:",j.data),r(`Receipt ${j.data.identifier} created successfully!`),E.value.some(de=>de.amount&&parseFloat(de.amount)>0&&de.mode&&de.paymentDate)&&await te(j.data.id),a("receiptCreated",j.data),a("view-receipt",j.data.id)}catch(W){console.error("Error generating receipt:",W),s("Failed to generate receipt. Please try again.")}finally{y.value=!1}},te=async W=>{if(!W||E.value.length===0){console.log("No payment entries to create or no receipt ID");return}console.log("Creating payment entries for receipt:",W);try{const ee=E.value.filter(ae=>ae.amount&&parseFloat(ae.amount)>0&&ae.mode&&ae.paymentDate);console.log("Valid payments to create:",ee);for(const ae of ee){const oe={amount:Number(ae.amount),mode:ae.mode,paymentDate:ae.paymentDate,paymentReceiptId:W,appointmentId:d.value.appointmentId};console.log("Creating payment with payload:",oe);const j=await fh(oe);j.success?console.log("Payment created successfully:",j.data):(console.error("Error creating payment entry:",j.error),s(`Failed to create payment: ${j.error?.message||"Unknown error"}`))}E.value=[{amount:null,mode:"Cash",paymentDate:Rn()}],console.log("Payment entries cleared")}catch(ee){console.error("Error creating payment entries:",ee)}},Y=()=>{y.value=!1,f.value=[{serviceDescription:"",baseCost:0,discountAmount:0,quantity:1,total:0,isFromHistory:!1}],d.value={patientName:n.appointment?.patient_name||"",patientId:n.appointment?.patientId||"",appointmentDate:n.appointment?.appointmentDate||"",receiptDate:Rn(),appointmentId:n.appointment?.id||null,doctorId:i.value,additionalDiscount:0},E.value=[{amount:null,mode:"Cash",paymentDate:Rn(),datePickerMenu:!1}],a("close")};return je(m,W=>{W&&p.value.length===0?Q():W||(v.value=null)}),(W,ee)=>{const ae=I("v-icon"),oe=I("v-btn"),j=I("v-card-title"),ce=I("v-col"),de=I("v-row"),_e=I("v-label"),Re=I("v-card-text"),be=I("v-card"),Ee=I("v-switch"),Ce=I("v-list-item"),Be=I("v-select"),Te=I("v-text-field"),Oe=I("v-table"),Me=I("v-divider"),rt=I("v-date-picker"),ut=I("v-menu"),Ie=I("v-container");return R(),ve(be,{rounded:"lg",color:"surfaceContainer",flat:"",ripple:!1},{default:u(()=>[l(de,{"no-gutters":""},{default:u(()=>[l(ce,{cols:"12"},{default:u(()=>[l(j,{class:"d-flex align-center justify-space-between"},{default:u(()=>[ee[4]||(ee[4]=h("span",null,"Payment Receipt - Generate Receipt",-1)),l(oe,{onClick:Y,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(ae,{size:"18"},{default:u(()=>[...ee[3]||(ee[3]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),ee[23]||(ee[23]=O()),l(de,{"no-gutters":""},{default:u(()=>[l(ce,{cols:"12",class:"scroll-element"},{default:u(()=>[l(Ie,{fluid:"",class:"pa-3"},{default:u(()=>[l(be,{flat:"",color:"surfaceContainerHigh",class:"mb-4 card-enhanced"},{default:u(()=>[l(Re,{class:"pb-1 pt-2"},{default:u(()=>[l(de,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(ce,{cols:"4"},{default:u(()=>[h("div",Lve,[l(_e,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...ee[5]||(ee[5]=[O("Patient Information",-1)])]),_:1}),h("div",Mve,K(d.value.patientName),1),h("div",Ove,"ID: "+K(d.value.patientId),1)])]),_:1}),l(ce,{cols:"4"},{default:u(()=>[h("div",Hve,[l(_e,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...ee[6]||(ee[6]=[O("Appointment Details",-1)])]),_:1}),h("div",$ve,"Dr. "+K(A.value),1),h("div",Qve,"Date: "+K(le(d.value.appointmentDate)),1)])]),_:1}),l(ce,{cols:"4"},{default:u(()=>[h("div",Gve,[l(_e,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...ee[7]||(ee[7]=[O("Receipt Information",-1)])]),_:1}),ee[8]||(ee[8]=h("div",{class:"text-body-1 font-weight-medium"},"New Receipt",-1)),h("div",zve,"Date: "+K(le(d.value.receiptDate)),1)])]),_:1})]),_:1})]),_:1})]),_:1}),l(be,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(Re,{class:"pb-2"},{default:u(()=>[l(de,{"no-gutters":"",align:"center",class:"mb-3"},{default:u(()=>[l(ce,{cols:"2",class:"d-flex align-center"},{default:u(()=>[...ee[9]||(ee[9]=[h("div",{class:"text-subtitle-1"},"Treatment Plan",-1)])]),_:1}),l(ce,{cols:"3",class:"d-flex align-center"},{default:u(()=>[l(Ee,{modelValue:m.value,"onUpdate:modelValue":ee[0]||(ee[0]=Ue=>m.value=Ue),label:"Link to treatment plan",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),m.value?(R(),ve(ce,{key:0,cols:"7"},{default:u(()=>[l(Be,{modelValue:v.value,"onUpdate:modelValue":ee[1]||(ee[1]=Ue=>v.value=Ue),items:p.value,"item-title":"treatmentPlanName","item-value":"id",label:"Select Treatment Plan",variant:"outlined",density:"compact",loading:g.value,disabled:g.value,clearable:"","hide-details":""},{selection:u(({item:Ue})=>[h("div",Kve,[h("div",Wve,K(Ue.raw.treatmentPlanName),1),h("div",jve,[O(" Status: "+K(Ue.raw.status)+"  Created: "+K(le(Ue.raw.createdAt))+" ",1),Ue.raw.notes?(R(),Ae("span",qve,"  "+K(Ue.raw.notes.substring(0,30))+"...",1)):ye("",!0)])])]),item:u(({props:Ue,item:dt})=>[l(Ce,Yl(Jl(Ue)),{title:u(()=>[O(K(dt.raw.treatmentPlanName),1)]),subtitle:u(()=>[h("div",Yve,[O(" Status: "+K(dt.raw.status)+"  Created: "+K(le(dt.raw.createdAt))+" ",1),dt.raw.notes?(R(),Ae("span",Xve," "+K(dt.raw.notes.substring(0,50))+"...",1)):ye("",!0)])]),_:2},1040)]),_:1},8,["modelValue","items","loading","disabled"])]),_:1})):ye("",!0)]),_:1})]),_:1})]),_:1}),l(be,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(Re,{class:"pb-2"},{default:u(()=>[ee[16]||(ee[16]=h("div",{class:"text-subtitle-1 mb-3"},"Item Details",-1)),l(Oe,{density:"compact",class:"mb-3"},{default:u(()=>[ee[11]||(ee[11]=h("thead",null,[h("tr",null,[h("th",{class:"text-left",style:{width:"60px"}},"Sr. No"),h("th",{class:"text-left",style:{width:"300px"}},"Description"),h("th",{class:"text-left",style:{width:"120px"}},"Base Cost per unit ()"),h("th",{class:"text-left",style:{width:"120px"}},"Discount per unit ()"),h("th",{class:"text-left",style:{width:"100px"}},"Quantity"),h("th",{class:"text-left",style:{width:"120px"}},"Total ()"),h("th",{class:"text-left",style:{width:"80px"}},"Actions")])],-1)),h("tbody",null,[(R(!0),Ae(Ke,null,Gt(Qe(b),(Ue,dt)=>(R(),Ae("tr",{key:dt},[h("td",null,K(dt+1),1),h("td",null,[l(Cw,{"model-value":Ue.serviceDescription,"onUpdate:modelValue":Ft=>ue(dt,Ft),onServiceSelected:Ft=>ie(dt,Ft),"doctor-id":i.value,density:"compact"},null,8,["model-value","onUpdate:modelValue","onServiceSelected","doctor-id"])]),h("td",null,[l(Te,{modelValue:f.value[dt].baseCost,"onUpdate:modelValue":Ft=>f.value[dt].baseCost=Ft,modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"underlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),h("td",null,[l(Te,{modelValue:f.value[dt].discountAmount,"onUpdate:modelValue":Ft=>f.value[dt].discountAmount=Ft,modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"underlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),h("td",null,[l(Te,{modelValue:f.value[dt].quantity,"onUpdate:modelValue":Ft=>f.value[dt].quantity=Ft,modelModifiers:{number:!0},type:"number",density:"compact",variant:"underlined","hide-details":"",min:"1"},null,8,["modelValue","onUpdate:modelValue"])]),h("td",null,[h("span",Jve,""+K(Ue.total||0),1)]),h("td",null,[l(oe,{icon:"",size:"small",color:"error",variant:"text",onClick:Ft=>H(dt)},{default:u(()=>[l(ae,null,{default:u(()=>[...ee[10]||(ee[10]=[O("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])]))),128))])]),_:1}),l(de,{"no-gutters":"",class:"align-center"},{default:u(()=>[l(ce,{cols:"auto"},{default:u(()=>[l(oe,{variant:"outlined",color:"primary",onClick:L,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...ee[12]||(ee[12]=[O(" Add Service ",-1)])]),_:1})]),_:1}),l(ce),l(ce,{cols:"3"},{default:u(()=>[l(Te,{label:"Additional Discount",modelValue:d.value.additionalDiscount,"onUpdate:modelValue":ee[2]||(ee[2]=Ue=>d.value.additionalDiscount=Ue),modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),l(Me,{class:"mb-3"}),l(de,{"no-gutters":""},{default:u(()=>[l(ce,{cols:"8",class:"text-right"},{default:u(()=>[ee[13]||(ee[13]=h("div",{class:"text-body-2 mb-1"},"Subtotal:",-1)),ee[14]||(ee[14]=h("div",{class:"text-body-2 mb-1"},"Line Discounts:",-1)),d.value.additionalDiscount>0?(R(),Ae("div",Zve,"Additional Discount:")):ye("",!0),ee[15]||(ee[15]=h("div",{class:"text-subtitle-1 font-weight-bold"},"Grand Total:",-1))]),_:1}),l(ce,{cols:"4",class:"text-right"},{default:u(()=>[h("div",ehe,K(Qe(dr)(Qe(x))),1),h("div",the,"-"+K(Qe(dr)(Qe(T))),1),d.value.additionalDiscount>0?(R(),Ae("div",nhe,"-"+K(Qe(dr)(d.value.additionalDiscount)),1)):ye("",!0),h("div",ahe,K(Qe(dr)(Qe(D))),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(be,{flat:"",class:"mb-3 card-enhanced",color:"surfaceContainerHigh"},{default:u(()=>[l(Re,{class:"pb-2"},{default:u(()=>[ee[21]||(ee[21]=h("div",{class:"text-subtitle-1 mb-3"},"Payment Information",-1)),l(Oe,{density:"compact",class:"mb-3"},{default:u(()=>[ee[19]||(ee[19]=h("thead",null,[h("tr",null,[h("th",{class:"text-left",style:{width:"60px"}},"Sr. No"),h("th",{class:"text-left",style:{width:"150px"}},"Amount ()"),h("th",{class:"text-left",style:{width:"150px"}},"Payment Mode"),h("th",{class:"text-left",style:{width:"150px"}},"Payment Date"),h("th",{class:"text-left",style:{width:"80px"}},"Actions")])],-1)),h("tbody",null,[(R(!0),Ae(Ke,null,Gt(E.value,(Ue,dt)=>(R(),Ae("tr",{key:dt},[h("td",null,K(dt+1),1),h("td",null,[l(Te,{modelValue:Ue.amount,"onUpdate:modelValue":Ft=>Ue.amount=Ft,modelModifiers:{number:!0},type:"number",prefix:"",min:"1",density:"compact",variant:"underlined","hide-details":"",rules:C,onInput:J},null,8,["modelValue","onUpdate:modelValue"])]),h("td",null,[l(Be,{modelValue:Ue.mode,"onUpdate:modelValue":Ft=>Ue.mode=Ft,items:Qe(S),density:"compact",variant:"underlined","hide-details":"",rules:U},null,8,["modelValue","onUpdate:modelValue","items"])]),h("td",null,[l(ut,{modelValue:Ue.datePickerMenu,"onUpdate:modelValue":Ft=>Ue.datePickerMenu=Ft,"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},{activator:u(({props:Ft})=>[l(Te,Pe({modelValue:Ue.paymentDate,"onUpdate:modelValue":it=>Ue.paymentDate=it,density:"compact",variant:"underlined","hide-details":"",rules:F,readonly:""},{ref_for:!0},Ft),{"append-inner":u(()=>[l(ae,{class:"text-medium-emphasis"},{default:u(()=>[...ee[17]||(ee[17]=[O("mdi-calendar",-1)])]),_:1})]),_:1},16,["modelValue","onUpdate:modelValue"])]),default:u(()=>[l(rt,{"model-value":P(Ue.paymentDate),"onUpdate:modelValue":Ft=>G(Ft,Ue),color:"primary",locale:"en-IN"},null,8,["model-value","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),h("td",null,[l(oe,{icon:"",size:"small",color:"error",variant:"text",onClick:Ft=>q(dt)},{default:u(()=>[l(ae,null,{default:u(()=>[...ee[18]||(ee[18]=[O("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])]))),128))])]),_:1}),l(de,{"no-gutters":"",class:"align-center"},{default:u(()=>[l(ce,{cols:"auto"},{default:u(()=>[l(oe,{variant:"outlined",color:"secondary",onClick:re,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...ee[20]||(ee[20]=[O(" Add Payment ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(be,{flat:"",color:"surfaceContainerHigh",class:"card-enhanced"},{default:u(()=>[l(Re,{class:"d-flex justify-center pb-2"},{default:u(()=>[l(oe,{color:"primary",onClick:M,loading:y.value,disabled:!Z.value,"prepend-icon":"mdi-receipt",class:"btn-hover-base"},{default:u(()=>[...ee[22]||(ee[22]=[O(" Generate Receipt ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),ye("",!0)]),_:1})]),_:1})]),_:1})]),_:1})}}},she=qt(rhe,[["__scopeId","data-v-57a37952"]]);function ohe(e){const t=V([]),n=V(!1),a=V([]),r=V(!1),s=(f=1e4)=>new Promise((m,v)=>setTimeout(()=>v(new Error("API_TIMEOUT")),f)),o=async()=>{if(!e.value){console.log("No receipt ID available for loading payments"),t.value=[];return}if(n.value){console.log("Already loading payments, skipping duplicate call");return}n.value=!0,console.log("Loading payments for receipt ID:",e.value);try{const f=await Promise.race([bg(e.value),s(1e4)]);console.log("Full API response:",f),f.success?(t.value=Array.isArray(f.data)?f.data:[],console.log(" Payments loaded successfully:",t.value.length)):(console.error(" API Error loading payments:",f.error),t.value=[])}catch(f){f.message==="API_TIMEOUT"?console.error(" Payment loading timed out"):console.error(" Exception loading receipt payments:",f),t.value=[]}finally{n.value=!1}},i=async f=>{if(!e.value)throw new Error("No receipt ID available for payment creation");r.value=!0;try{const m={...f,amount:Number(f.amount),paymentReceiptId:e.value};console.log("Creating payment with payload:",m);const v=await Promise.race([fh(m),s(15e3)]);if(!v.success)throw new Error(v.error?.message||"Failed to create payment");return console.log("Payment created successfully:",v.data),await o(),v}catch(m){throw m.message==="API_TIMEOUT"?new Error("Payment creation timed out. Please try again."):m}finally{r.value=!1}},c=async f=>{if(f){if(a.value.includes(f)){console.log("Payment already being deleted:",f);return}a.value.push(f);try{const m=await Promise.race([oT(f),s(1e4)]);if(!m.success)throw new Error(m.error?.message||"Failed to delete payment");return console.log("Payment deleted successfully:",f),await o(),m}catch(m){throw m.message==="API_TIMEOUT"?new Error("Payment deletion timed out. Please try again."):m}finally{a.value=a.value.filter(m=>m!==f)}}},A=ne(()=>Array.isArray(t.value)?t.value.reduce((f,m)=>f+(parseFloat(m.amount)||0),0):0);let d=null;return je(e,async(f,m)=>{if(console.log("Receipt ID watcher triggered:",{newReceiptId:f||"null",oldReceiptId:m||"null",lastReceiptId:d||"null"}),f===d){console.log("Receipt ID unchanged, skipping reload");return}d=f,f?(console.log("Receipt ID changed, loading payments for:",f),await o()):(console.log("No receipt ID, clearing payments"),t.value=[])},{immediate:!0}),{receiptPayments:t,isLoadingPayments:n,deletingPayments:a,isSubmittingPayment:r,totalPaymentsMade:A,loadReceiptPayments:o,createNewPayment:i,deletePayment:c,formatPaymentAmount:dr}}const ihe={class:"text-center"},lhe={class:"text-center"},uhe={class:"text-body-2 text-medium-emphasis mb-4"},che={class:"pa-1"},dhe={class:"text-body-1 font-weight-medium"},Ahe={class:"text-body-2 text-medium-emphasis"},fhe={class:"pa-1"},mhe={class:"text-body-1 font-weight-medium"},vhe={class:"text-body-2 text-medium-emphasis"},hhe={class:"pa-1"},phe={class:"text-body-1 font-weight-medium"},ghe={class:"text-body-2 text-medium-emphasis"},yhe={class:"text-caption text-medium-emphasis mt-1"},_he={class:"d-flex flex-column py-1"},whe={class:"text-body-2 font-weight-medium"},bhe={class:"text-caption text-medium-emphasis"},xhe={key:0},Che={class:"text-caption"},She={key:0,class:"ml-2"},Ehe={key:2,class:"text-body-2 text-medium-emphasis"},Bhe={key:0,class:"text-body-2 font-weight-medium"},khe={key:0,class:"text-body-2 font-weight-medium"},The={key:0,class:"text-body-2 font-weight-medium"},Ihe={key:0,class:"text-body-2 font-weight-medium"},Fhe={class:"font-weight-bold"},Phe={key:0,class:"text-body-2 mb-1"},Dhe={class:"text-body-2 mb-1"},Uhe={class:"text-body-2 mb-1"},Rhe={key:0,class:"text-body-2 mb-1"},Nhe={class:"text-subtitle-1 font-weight-bold"},Vhe={class:"text-h6"},Lhe={class:"text-h6 text-success"},Mhe={key:0,class:"text-center pa-4"},Ohe={class:"font-weight-bold"},Hhe={__name:"payment-receipt-edit",props:{receiptId:{type:[String,Number],required:!0}},emits:["close","receipt-updated"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ca(),o=ra(),i=ne(()=>o.state.doctorModule.doctorId),c=ne(()=>o.getters["doctorModule/currentDoctor"]),A=ne(()=>c.value?.doctorName||"Unknown Doctor"),d=V(!1),f=V(!1),m=V(null),v=V(null),p=V([]),g=V(!1),y=V(null),w=V([]),b=V(!1),x=V(null);ne(()=>y.value?w.value.find(Be=>Be.id===y.value):null);const T=uT(p,ne(()=>v.value?.additionalDiscount||0)),{servicesWithTotals:D,subtotal:k,totalLineDiscount:S,finalGrandTotal:E,hasValidService:C}=T,U=V(null),F=ohe(U),{receiptPayments:L,isLoadingPayments:H,deletingPayments:ue,totalPaymentsMade:ie,loadReceiptPayments:Q,deletePayment:X}=F;V([]),V([]);const le=mh,Z=V([]),re=[Be=>!!Be||"Amount is required",Be=>Be>0||"Amount must be greater than 0",Be=>Number.isInteger(Number(Be))||"Amount must be a whole number"],q=[Be=>!!Be||"Payment mode is required"],P=[Be=>!!Be||"Payment date is required"],G=()=>{p.value.push({serviceDescription:"",baseCost:0,discountAmount:0,quantity:1,isFromHistory:!1,isPrepopulated:!1})},J=Be=>{p.value.length>1?p.value.splice(Be,1):p.value[0]={serviceDescription:"",baseCost:0,discountAmount:0,quantity:1,isFromHistory:!1,isPrepopulated:!1}},M=(Be,Te)=>{p.value[Be]&&(p.value[Be].serviceDescription=Te)},te=(Be,Te)=>{console.log("Service selected:",Te),Te&&typeof Te=="object"&&!Te.isUserTyped?p.value[Be]={...p.value[Be],serviceDescription:Te.serviceDescription,baseCost:Te.baseCost||0,isFromHistory:!1,isPrepopulated:p.value[Be].isPrepopulated===!0}:Te===null&&(p.value[Be]={...p.value[Be],serviceDescription:"",baseCost:0,isFromHistory:!1,isPrepopulated:p.value[Be].isPrepopulated===!0})},Y=async()=>{if(!v.value?.patientId||!v.value?.doctorId){console.log("Missing patient or doctor ID for loading treatment plans");return}b.value=!0;try{console.log("Loading treatment plans for patient:",v.value.patientId,"doctor:",v.value.doctorId);const Be=await xg(v.value.patientId,v.value.doctorId);if(Be.error)throw new Error(Be.error.message||"Failed to load treatment plans");w.value=Be.data||[],console.log("Loaded treatment plans:",w.value.length)}catch(Be){console.error("Error loading treatment plans:",Be),s("Failed to load treatment plans: "+(Be.message||"Unknown error")),w.value=[]}finally{b.value=!1}},W=ne(()=>Array.isArray(Z.value)?Z.value.reduce((Be,Te)=>Be+(parseFloat(Te.amount)||0),0):0),ee=ne(()=>{const Be=ie.value,Te=W.value;return Math.max(0,E.value-Be-Te)}),ae=ne(()=>{const Be=C.value,Te=v.value?.patientName;return Be&&Te});ne(()=>Z.value.length>0&&Z.value.every(Be=>Be.amount&&parseFloat(Be.amount)>0&&Be.mode&&Be.paymentDate));const oe=()=>{Z.value.push({amount:null,mode:"Cash",paymentDate:new Date().toISOString().split("T")[0],datePickerMenu:!1})},j=Be=>{Z.value.splice(Be,1)},ce=Be=>{if(!Be)return null;try{if(typeof Be=="string")return Be.includes("T")?Be.split("T")[0]:Be;if(Be instanceof Date){const Te=Be.getFullYear(),Oe=String(Be.getMonth()+1).padStart(2,"0"),Me=String(Be.getDate()).padStart(2,"0");return`${Te}-${Oe}-${Me}`}return null}catch(Te){return console.error("Error parsing payment date:",Te),null}},de=(Be,Te)=>{if(Be)if(Be instanceof Date){const Oe=Be.getFullYear(),Me=String(Be.getMonth()+1).padStart(2,"0"),rt=String(Be.getDate()).padStart(2,"0");Te.paymentDate=`${Oe}-${Me}-${rt}`}else typeof Be=="string"&&(Te.paymentDate=Be);else Te.paymentDate="";Te.datePickerMenu=!1},_e=async()=>{if(!n.receiptId){m.value="No receipt ID provided";return}d.value=!0,m.value=null;try{console.log("Loading receipt data for editing, ID:",n.receiptId);const Be=await zM(n.receiptId);if(Be.error)throw new Error(Be.error.message||"Failed to load receipt");const Te=Be.data;if(v.value={identifier:Te.identifier,patientName:Te.patientName,patientId:Te.patientId,appointmentDate:Te.appointmentDate,paymentReceiptDate:Te.paymentReceiptDate||Te.receiptDate,appointmentId:Te.appointmentId,doctorId:Te.doctorId,additionalDiscount:Te.additionalDiscount||0},Te.services&&Te.services.length>0?p.value=Te.services.map(Oe=>({serviceDescription:Oe.serviceDescription,baseCost:Oe.baseCost,discountAmount:Oe.discountAmount,quantity:Oe.quantity,isFromHistory:!1,isPrepopulated:!0})):p.value=[{serviceDescription:"",baseCost:0,discountAmount:0,quantity:1,isFromHistory:!1,isPrepopulated:!1}],console.log("Receipt data loaded for editing:",v.value),console.log("Services loaded:",p.value),Te.treatmentPlanId){g.value=!0,y.value=Te.treatmentPlanId,await Y();try{const Oe=await xf(Te.treatmentPlanId);x.value=Oe}catch(Oe){console.error("Error loading original treatment plan data:",Oe)}}await Q()}catch(Be){console.error("Error loading receipt data:",Be),m.value=Be.message||"Failed to load receipt data",s(m.value)}finally{d.value=!1}},Re=async()=>{if(!ae.value){s("Please add at least one valid service with description and cost");return}f.value=!0;try{const Be=p.value.filter(Me=>Me.serviceDescription&&Me.serviceDescription.trim().length>0).map(Me=>({serviceDescription:Me.serviceDescription,baseCost:parseFloat(Me.baseCost)||0,gstPercent:0,discountAmount:parseFloat(Me.discountAmount)||0,quantity:parseInt(Me.quantity)||1})),Te={patientName:v.value.patientName,paymentReceiptDate:v.value.paymentReceiptDate,appointmentDate:v.value.appointmentDate,additionalDiscount:parseFloat(v.value.additionalDiscount)||0,treatmentPlanId:g.value?y.value:null,services:Be};console.log("Updating receipt with payload:",Te);const Oe=await kve(n.receiptId,Te);if(Oe.error)throw new Error(Oe.error.message||"Failed to update receipt");console.log("Receipt updated successfully:",Oe.data),await be(),r(`Receipt ${Oe.data.identifier} updated successfully!`),a("receipt-updated",Oe.data)}catch(Be){console.error("Error updating receipt:",Be),s("Failed to update receipt. Please try again.")}finally{f.value=!1}},be=async()=>{if(Z.value.length===0){console.log("No new payment entries to create");return}console.log("Creating new payment entries:",Z.value);try{const Be=Z.value.filter(Te=>Te.amount&&parseFloat(Te.amount)>0&&Te.mode&&Te.paymentDate);console.log("Valid payments to create:",Be);for(const Te of Be){const Oe={amount:parseFloat(Te.amount),mode:Te.mode,paymentDate:Te.paymentDate,paymentReceiptId:n.receiptId};console.log("Creating payment with payload:",Oe);const Me=await fh(Oe);Me.success?console.log("Payment created successfully:",Me.data):(console.error("Error creating payment entry:",Me.error),s(`Failed to create payment: ${Me.error?.message||"Unknown error"}`))}Z.value=[],console.log("New payment entries cleared"),await Q()}catch(Be){console.error("Error creating payment entries:",Be),s("Failed to create some payments. Please try again.")}},Ee=Be=>{if(!Be)return"";try{return new Date(Be).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return Be}},Ce=()=>{a("close")};return je(()=>n.receiptId,Be=>{U.value=Be},{immediate:!0}),je(g,Be=>{Be&&w.value.length===0?Y():Be||(y.value=null)}),dn(()=>{_e()}),(Be,Te)=>{const Oe=I("v-icon"),Me=I("v-btn"),rt=I("v-card-title"),ut=I("v-col"),Ie=I("v-row"),Ue=I("v-progress-circular"),dt=I("v-label"),Ft=I("v-card-text"),it=I("v-card"),qe=I("v-switch"),yt=I("v-chip"),mt=I("v-list-item"),xt=I("v-select"),an=I("v-text-field"),Cn=I("v-table"),oa=I("v-divider"),Vt=I("v-date-picker"),kt=I("v-menu"),at=I("v-container");return R(),ve(it,{rounded:"lg",color:"surfaceContainer",flat:"",ripple:!1},{default:u(()=>[l(Ie,{"no-gutters":""},{default:u(()=>[l(ut,{cols:"12"},{default:u(()=>[l(rt,{class:"d-flex align-center justify-space-between"},{default:u(()=>[Te[4]||(Te[4]=h("span",null,"Edit Payment Receipt",-1)),l(Me,{onClick:Ce,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(Oe,{size:"18"},{default:u(()=>[...Te[3]||(Te[3]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(Ie,{"no-gutters":""},{default:u(()=>[l(ut,{cols:"12",class:"scroll-element"},{default:u(()=>[d.value?(R(),ve(Ie,{key:0,"no-gutters":""},{default:u(()=>[l(ut,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[h("div",ihe,[l(Ue,{indeterminate:"",color:"primary",size:"64"}),Te[5]||(Te[5]=h("div",{class:"mt-4 text-subtitle-1"},"Loading receipt...",-1))])]),_:1})]),_:1})):m.value?(R(),ve(Ie,{key:1,"no-gutters":""},{default:u(()=>[l(ut,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[h("div",lhe,[l(Oe,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...Te[6]||(Te[6]=[O("mdi-alert-circle",-1)])]),_:1}),Te[8]||(Te[8]=h("div",{class:"text-h6 mb-2"},"Failed to Load Receipt",-1)),h("div",uhe,K(m.value),1),l(Me,{color:"primary",onClick:_e,"prepend-icon":"mdi-refresh"},{default:u(()=>[...Te[7]||(Te[7]=[O(" Try Again ",-1)])]),_:1})])]),_:1})]),_:1})):v.value?(R(),ve(at,{key:2,fluid:"",class:"pa-3"},{default:u(()=>[l(it,{flat:"",color:"surfaceContainerHigh",class:"mb-4 card-enhanced"},{default:u(()=>[l(Ft,{class:"pb-1 pt-2"},{default:u(()=>[l(Ie,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(ut,{cols:"4"},{default:u(()=>[h("div",che,[l(dt,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...Te[9]||(Te[9]=[O("Patient Information",-1)])]),_:1}),h("div",dhe,K(v.value.patientName||"Unknown Patient"),1),h("div",Ahe,"ID: "+K(v.value.patientId||"N/A"),1)])]),_:1}),l(ut,{cols:"4"},{default:u(()=>[h("div",fhe,[l(dt,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...Te[10]||(Te[10]=[O("Appointment Details",-1)])]),_:1}),h("div",mhe,"Dr. "+K(A.value),1),h("div",vhe,"Date: "+K(Ee(v.value.appointmentDate)),1)])]),_:1}),l(ut,{cols:"4"},{default:u(()=>[h("div",hhe,[l(dt,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...Te[11]||(Te[11]=[O("Receipt Information",-1)])]),_:1}),h("div",phe,K(v.value.identifier),1),h("div",ghe,"Date: "+K(Ee(v.value.paymentReceiptDate)),1)])]),_:1})]),_:1})]),_:1})]),_:1}),l(it,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(Ft,{class:"pb-2"},{default:u(()=>[l(Ie,{"no-gutters":"",align:"center",class:"mb-3"},{default:u(()=>[l(ut,{cols:"2",class:"d-flex align-center"},{default:u(()=>[...Te[12]||(Te[12]=[h("div",{class:"text-subtitle-1"},"Treatment Plan",-1)])]),_:1}),l(ut,{cols:"3",class:"d-flex align-center"},{default:u(()=>[l(qe,{modelValue:g.value,"onUpdate:modelValue":Te[0]||(Te[0]=bt=>g.value=bt),label:"Link to treatment plan",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),l(ut,{cols:"7"},{default:u(()=>[!g.value&&x.value?(R(),Ae(Ke,{key:0},[l(yt,{color:"secondary",variant:"outlined","prepend-icon":"mdi-link-variant",class:"mr-2"},{default:u(()=>[O(K(x.value.treatmentPlanName),1)]),_:1}),h("div",yhe," Status: "+K(x.value.status)+"  Created: "+K(Ee(x.value.createdAt)),1)],64)):g.value?(R(),ve(xt,{key:1,modelValue:y.value,"onUpdate:modelValue":Te[1]||(Te[1]=bt=>y.value=bt),items:w.value,"item-title":"treatmentPlanName","item-value":"id",label:"Select Treatment Plan",variant:"outlined",density:"compact",loading:b.value,disabled:b.value,clearable:"","hide-details":""},{selection:u(({item:bt})=>[h("div",_he,[h("div",whe,K(bt.raw.treatmentPlanName),1),h("div",bhe,[O(" Status: "+K(bt.raw.status)+"  Created: "+K(Ee(bt.raw.createdAt))+" ",1),bt.raw.notes?(R(),Ae("span",xhe,"  "+K(bt.raw.notes.substring(0,30))+"...",1)):ye("",!0)])])]),item:u(({props:bt,item:en})=>[l(mt,Yl(Jl(bt)),{title:u(()=>[O(K(en.raw.treatmentPlanName),1)]),subtitle:u(()=>[h("div",Che,[O(" Status: "+K(en.raw.status)+"  Created: "+K(Ee(en.raw.createdAt))+" ",1),en.raw.notes?(R(),Ae("span",She," "+K(en.raw.notes.substring(0,50))+"...",1)):ye("",!0)])]),_:2},1040)]),_:1},8,["modelValue","items","loading","disabled"])):(R(),Ae("div",Ehe," No treatment plan linked "))]),_:1})]),_:1})]),_:1})]),_:1}),l(it,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(Ft,{class:"pb-2"},{default:u(()=>[Te[19]||(Te[19]=h("div",{class:"text-subtitle-1 mb-3"},"Item Details",-1)),l(Cn,{density:"compact",class:"mb-3"},{default:u(()=>[Te[14]||(Te[14]=h("thead",null,[h("tr",null,[h("th",{class:"text-left",style:{width:"60px"}},"Sr. No"),h("th",{class:"text-left",style:{width:"300px"}},"Description"),h("th",{class:"text-left",style:{width:"120px"}},"Base Cost per unit ()"),h("th",{class:"text-left",style:{width:"120px"}},"Discount per unit ()"),h("th",{class:"text-left",style:{width:"100px"}},"Quantity"),h("th",{class:"text-left",style:{width:"120px"}},"Total ()"),h("th",{class:"text-left",style:{width:"80px"}},"Actions")])],-1)),h("tbody",null,[(R(!0),Ae(Ke,null,Gt(Qe(D),(bt,en)=>(R(),Ae("tr",{key:en,class:ct(bt.isPrepopulated?"prepopulated-service":"")},[h("td",null,K(en+1),1),h("td",null,[bt.isPrepopulated?(R(),Ae("span",Bhe,K(bt.serviceDescription),1)):(R(),ve(Cw,{key:1,"model-value":bt.serviceDescription,"onUpdate:modelValue":Ye=>M(en,Ye),onServiceSelected:Ye=>te(en,Ye),"doctor-id":i.value,density:"compact"},null,8,["model-value","onUpdate:modelValue","onServiceSelected","doctor-id"]))]),h("td",null,[bt.isPrepopulated?(R(),Ae("span",khe,""+K(bt.baseCost?.toLocaleString()||0),1)):(R(),ve(an,{key:1,modelValue:p.value[en].baseCost,"onUpdate:modelValue":Ye=>p.value[en].baseCost=Ye,modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"underlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"]))]),h("td",null,[bt.isPrepopulated?(R(),Ae("span",The,""+K(bt.discountAmount?.toLocaleString()||0),1)):(R(),ve(an,{key:1,modelValue:p.value[en].discountAmount,"onUpdate:modelValue":Ye=>p.value[en].discountAmount=Ye,modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"underlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"]))]),h("td",null,[bt.isPrepopulated?(R(),Ae("span",Ihe,K(bt.quantity||1),1)):(R(),ve(an,{key:1,modelValue:p.value[en].quantity,"onUpdate:modelValue":Ye=>p.value[en].quantity=Ye,modelModifiers:{number:!0},type:"number",density:"compact",variant:"underlined","hide-details":"",min:"1"},null,8,["modelValue","onUpdate:modelValue"]))]),h("td",null,[h("span",Fhe,""+K(bt.total||0),1)]),h("td",null,[l(Me,{icon:"",size:"small",color:"error",variant:"text",onClick:Ye=>J(en),title:bt.isPrepopulated?"Delete existing service":"Delete new service"},{default:u(()=>[l(Oe,null,{default:u(()=>[...Te[13]||(Te[13]=[O("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick","title"])])],2))),128))])]),_:1}),l(Ie,{"no-gutters":"",class:"align-center"},{default:u(()=>[l(ut,{cols:"auto"},{default:u(()=>[l(Me,{variant:"outlined",color:"primary",onClick:G,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...Te[15]||(Te[15]=[O(" Add Service ",-1)])]),_:1})]),_:1}),l(ut),l(ut,{cols:"3"},{default:u(()=>[l(an,{label:"Additional Discount",modelValue:v.value.additionalDiscount,"onUpdate:modelValue":Te[2]||(Te[2]=bt=>v.value.additionalDiscount=bt),modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),l(oa,{class:"mb-3"}),l(Ie,{"no-gutters":""},{default:u(()=>[l(ut,{cols:"8",class:"text-right"},{default:u(()=>[Te[16]||(Te[16]=h("div",{class:"text-body-2 mb-1"},"Subtotal:",-1)),Te[17]||(Te[17]=h("div",{class:"text-body-2 mb-1"},"Line Discounts:",-1)),v.value.additionalDiscount>0?(R(),Ae("div",Phe,"Additional Discount:")):ye("",!0),Te[18]||(Te[18]=h("div",{class:"text-subtitle-1 font-weight-bold"},"Grand Total:",-1))]),_:1}),l(ut,{cols:"4",class:"text-right"},{default:u(()=>[h("div",Dhe,K(Qe(dr)(Qe(k))),1),h("div",Uhe,"-"+K(Qe(dr)(Qe(S))),1),v.value.additionalDiscount>0?(R(),Ae("div",Rhe,"-"+K(Qe(dr)(v.value.additionalDiscount)),1)):ye("",!0),h("div",Nhe,K(Qe(dr)(Qe(E))),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(it,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(Ft,{class:"pb-2"},{default:u(()=>[Te[30]||(Te[30]=h("div",{class:"text-subtitle-1 mb-3"},"Payment Information",-1)),l(Ie,{"no-gutters":"",class:"mb-3"},{default:u(()=>[l(ut,{cols:"4"},{default:u(()=>[Te[20]||(Te[20]=h("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Total Amount",-1)),h("div",Vhe,K(Qe(dr)(Qe(E))),1)]),_:1}),l(ut,{cols:"4"},{default:u(()=>[Te[21]||(Te[21]=h("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Paid Amount",-1)),h("div",Lhe,K(Qe(dr)(Qe(ie)+W.value)),1)]),_:1}),l(ut,{cols:"4"},{default:u(()=>[Te[22]||(Te[22]=h("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Balance Due",-1)),h("div",{class:ct(["text-h6",ee.value>0?"text-error":"text-success"])},K(Qe(dr)(ee.value)),3)]),_:1})]),_:1}),Qe(H)?(R(),Ae("div",Mhe,[l(Ue,{indeterminate:"",size:"32",color:"primary"}),Te[23]||(Te[23]=h("div",{class:"text-body-2 mt-2"},"Loading payments...",-1))])):(R(),Ae(Ke,{key:1},[l(oa,{class:"mb-3"}),Te[29]||(Te[29]=h("div",{class:"text-subtitle-2 mb-2"},"Payments",-1)),l(Cn,{density:"compact",class:"mb-3"},{default:u(()=>[Te[27]||(Te[27]=h("thead",null,[h("tr",null,[h("th",{class:"text-left",style:{width:"60px"}},"Sr. No"),h("th",{class:"text-left",style:{width:"150px"}},"Amount ()"),h("th",{class:"text-left",style:{width:"150px"}},"Payment Mode"),h("th",{class:"text-left",style:{width:"150px"}},"Payment Date"),h("th",{class:"text-left",style:{width:"80px"}},"Actions")])],-1)),h("tbody",null,[(R(!0),Ae(Ke,null,Gt(Qe(L),(bt,en)=>(R(),Ae("tr",{key:`existing-${bt.id}`},[h("td",null,K(en+1),1),h("td",Ohe,""+K(bt.amount.toLocaleString()),1),h("td",null,K(bt.mode),1),h("td",null,K(Ee(bt.paymentDate)),1),h("td",null,[l(Me,{icon:"",size:"small",color:"error",variant:"text",onClick:Ye=>Qe(X)(bt.id),loading:Qe(ue).includes(bt.id)},{default:u(()=>[l(Oe,null,{default:u(()=>[...Te[24]||(Te[24]=[O("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick","loading"])])]))),128)),(R(!0),Ae(Ke,null,Gt(Z.value,(bt,en)=>(R(),Ae("tr",{key:`new-${en}`},[h("td",null,K(Qe(L).length+en+1),1),h("td",null,[l(an,{modelValue:bt.amount,"onUpdate:modelValue":Ye=>bt.amount=Ye,modelModifiers:{number:!0},type:"number",prefix:"",min:"1",density:"compact",variant:"underlined","hide-details":"",rules:re},null,8,["modelValue","onUpdate:modelValue"])]),h("td",null,[l(xt,{modelValue:bt.mode,"onUpdate:modelValue":Ye=>bt.mode=Ye,items:Qe(le),density:"compact",variant:"underlined","hide-details":"",rules:q},null,8,["modelValue","onUpdate:modelValue","items"])]),h("td",null,[l(kt,{modelValue:bt.datePickerMenu,"onUpdate:modelValue":Ye=>bt.datePickerMenu=Ye,"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},{activator:u(({props:Ye})=>[l(an,Pe({modelValue:bt.paymentDate,"onUpdate:modelValue":We=>bt.paymentDate=We,density:"compact",variant:"underlined","hide-details":"",rules:P,readonly:""},{ref_for:!0},Ye),{"append-inner":u(()=>[l(Oe,{class:"text-medium-emphasis"},{default:u(()=>[...Te[25]||(Te[25]=[O("mdi-calendar",-1)])]),_:1})]),_:1},16,["modelValue","onUpdate:modelValue"])]),default:u(()=>[l(Vt,{"model-value":ce(bt.paymentDate),"onUpdate:modelValue":Ye=>de(Ye,bt),color:"primary",locale:"en-IN"},null,8,["model-value","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),h("td",null,[l(Me,{icon:"",size:"small",color:"error",variant:"text",onClick:Ye=>j(en)},{default:u(()=>[l(Oe,null,{default:u(()=>[...Te[26]||(Te[26]=[O("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])]))),128))])]),_:1}),l(Ie,{"no-gutters":"",class:"align-center"},{default:u(()=>[l(ut,{cols:"auto"},{default:u(()=>[l(Me,{variant:"outlined",color:"secondary",onClick:oe,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...Te[28]||(Te[28]=[O(" Add Payment ",-1)])]),_:1})]),_:1})]),_:1})],64))]),_:1})]),_:1}),l(it,{flat:"",color:"surfaceContainerHigh",class:"card-enhanced"},{default:u(()=>[l(Ft,{class:"d-flex justify-center pb-2"},{default:u(()=>[l(Me,{color:"primary",onClick:Re,loading:f.value,disabled:!ae.value,"prepend-icon":"mdi-content-save",class:"btn-hover-base"},{default:u(()=>[...Te[31]||(Te[31]=[O(" Update Receipt ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})):ye("",!0)]),_:1})]),_:1})]),_:1})}}},sO=qt(Hhe,[["__scopeId","data-v-c427f5d3"]]),Y_="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M12.04%202C6.58%202%202.13%206.45%202.13%2011.91C2.13%2013.66%202.59%2015.36%203.45%2016.86L2.05%2022L7.3%2020.62C8.75%2021.41%2010.38%2021.83%2012.04%2021.83C17.5%2021.83%2021.95%2017.38%2021.95%2011.92C21.95%209.27%2020.92%206.78%2019.05%204.91C17.18%203.03%2014.69%202%2012.04%202M12.05%203.67C14.25%203.67%2016.31%204.53%2017.87%206.09C19.42%207.65%2020.28%209.72%2020.28%2011.92C20.28%2016.46%2016.58%2020.15%2012.04%2020.15C10.56%2020.15%209.11%2019.76%207.85%2019L7.55%2018.83L4.43%2019.65L5.26%2016.61L5.06%2016.29C4.24%2015%203.8%2013.47%203.8%2011.91C3.81%207.37%207.5%203.67%2012.05%203.67M8.53%207.33C8.37%207.33%208.1%207.39%207.87%207.64C7.65%207.89%207%208.5%207%209.71C7%2010.93%207.89%2012.1%208%2012.27C8.14%2012.44%209.76%2014.94%2012.25%2016C12.84%2016.27%2013.3%2016.42%2013.66%2016.53C14.25%2016.72%2014.79%2016.69%2015.22%2016.63C15.7%2016.56%2016.68%2016.03%2016.89%2015.45C17.1%2014.87%2017.1%2014.38%2017.04%2014.27C16.97%2014.17%2016.81%2014.11%2016.56%2014C16.31%2013.86%2015.09%2013.26%2014.87%2013.18C14.64%2013.1%2014.5%2013.06%2014.31%2013.3C14.15%2013.55%2013.67%2014.11%2013.53%2014.27C13.38%2014.44%2013.24%2014.46%2013%2014.34C12.74%2014.21%2011.94%2013.95%2011%2013.11C10.26%2012.45%209.77%2011.64%209.62%2011.39C9.5%2011.15%209.61%2011%209.73%2010.89C9.84%2010.78%2010%2010.6%2010.1%2010.45C10.23%2010.31%2010.27%2010.2%2010.35%2010.04C10.43%209.87%2010.39%209.73%2010.33%209.61C10.27%209.5%209.77%208.26%209.56%207.77C9.36%207.29%209.16%207.35%209%207.34C8.86%207.34%208.7%207.33%208.53%207.33Z'%20/%3e%3c/svg%3e",$he="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M20%204H4c-1.1%200-1.99.9-1.99%202L2%2018c0%201.1.9%202%202%202h16c1.1%200%202-.9%202-2V6c0-1.1-.9-2-2-2zm0%204l-8%205-8-5V6l8%205%208-5v2z'%20fill='currentColor'/%3e%3c/svg%3e";var oE=function(e,t){return oE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(n[r]=a[r])},oE(e,t)};function au(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");oE(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var iE=function(){return iE=Object.assign||function(t){for(var n,a=1,r=arguments.length;a<r;a++){n=arguments[a];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},iE.apply(this,arguments)};function Uo(e,t,n,a){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function i(d){try{A(a.next(d))}catch(f){o(f)}}function c(d){try{A(a.throw(d))}catch(f){o(f)}}function A(d){d.done?s(d.value):r(d.value).then(i,c)}A((a=a.apply(e,[])).next())})}function ao(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},a,r,s,o;return o={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function i(A){return function(d){return c([A,d])}}function c(A){if(a)throw new TypeError("Generator is already executing.");for(;n;)try{if(a=1,r&&(s=A[0]&2?r.return:A[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,A[1])).done)return s;switch(r=0,s&&(A=[A[0]&2,s.value]),A[0]){case 0:case 1:s=A;break;case 4:return n.label++,{value:A[1],done:!1};case 5:n.label++,r=A[1],A=[0];continue;case 7:A=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(A[0]===6||A[0]===2)){n=0;continue}if(A[0]===3&&(!s||A[1]>s[0]&&A[1]<s[3])){n.label=A[1];break}if(A[0]===6&&n.label<s[1]){n.label=s[1],s=A;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(A);break}s[2]&&n.ops.pop(),n.trys.pop();continue}A=t.call(e,n)}catch(d){A=[6,d],r=0}finally{a=s=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}}function ty(e,t,n){if(arguments.length===2)for(var a=0,r=t.length,s;a<r;a++)(s||!(a in t))&&(s||(s=Array.prototype.slice.call(t,0,a)),s[a]=t[a]);return e.concat(s||t)}var Uc=(function(){function e(t,n,a,r){this.left=t,this.top=n,this.width=a,this.height=r}return e.prototype.add=function(t,n,a,r){return new e(this.left+t,this.top+n,this.width+a,this.height+r)},e.fromClientRect=function(t,n){return new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height)},e.fromDOMRectList=function(t,n){var a=Array.from(n).find(function(r){return r.width!==0});return a?new e(a.left+t.windowBounds.left,a.top+t.windowBounds.top,a.width,a.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e})(),Ew=function(e,t){return Uc.fromClientRect(e,t.getBoundingClientRect())},Qhe=function(e){var t=e.body,n=e.documentElement;if(!t||!n)throw new Error("Unable to get document size");var a=Math.max(Math.max(t.scrollWidth,n.scrollWidth),Math.max(t.offsetWidth,n.offsetWidth),Math.max(t.clientWidth,n.clientWidth)),r=Math.max(Math.max(t.scrollHeight,n.scrollHeight),Math.max(t.offsetHeight,n.offsetHeight),Math.max(t.clientHeight,n.clientHeight));return new Uc(0,0,a,r)},Bw=function(e){for(var t=[],n=0,a=e.length;n<a;){var r=e.charCodeAt(n++);if(r>=55296&&r<=56319&&n<a){var s=e.charCodeAt(n++);(s&64512)===56320?t.push(((r&1023)<<10)+(s&1023)+65536):(t.push(r),n--)}else t.push(r)}return t},Wr=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var a=[],r=-1,s="";++r<n;){var o=e[r];o<=65535?a.push(o):(o-=65536,a.push((o>>10)+55296,o%1024+56320)),(r+1===n||a.length>16384)&&(s+=String.fromCharCode.apply(String,a),a.length=0)}return s},lU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ghe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ny=0;ny<lU.length;ny++)Ghe[lU.charCodeAt(ny)]=ny;var uU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bp=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ay=0;ay<uU.length;ay++)bp[uU.charCodeAt(ay)]=ay;var zhe=function(e){var t=e.length*.75,n=e.length,a,r=0,s,o,i,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var A=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(A)?A:new Uint8Array(A);for(a=0;a<n;a+=4)s=bp[e.charCodeAt(a)],o=bp[e.charCodeAt(a+1)],i=bp[e.charCodeAt(a+2)],c=bp[e.charCodeAt(a+3)],d[r++]=s<<2|o>>4,d[r++]=(o&15)<<4|i>>2,d[r++]=(i&3)<<6|c&63;return A},Khe=function(e){for(var t=e.length,n=[],a=0;a<t;a+=2)n.push(e[a+1]<<8|e[a]);return n},Whe=function(e){for(var t=e.length,n=[],a=0;a<t;a+=4)n.push(e[a+3]<<24|e[a+2]<<16|e[a+1]<<8|e[a]);return n},sf=5,cT=11,oC=2,jhe=cT-sf,oO=65536>>sf,qhe=1<<sf,iC=qhe-1,Yhe=1024>>sf,Xhe=oO+Yhe,Jhe=Xhe,Zhe=32,epe=Jhe+Zhe,tpe=65536>>cT,npe=1<<jhe,ape=npe-1,cU=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},rpe=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},spe=function(e,t){var n=zhe(e),a=Array.isArray(n)?Whe(n):new Uint32Array(n),r=Array.isArray(n)?Khe(n):new Uint16Array(n),s=24,o=cU(r,s/2,a[4]/2),i=a[5]===2?cU(r,(s+a[4])/2):rpe(a,Math.ceil((s+a[4])/4));return new ope(a[0],a[1],a[2],a[3],o,i)},ope=(function(){function e(t,n,a,r,s,o){this.initialValue=t,this.errorValue=n,this.highStart=a,this.highValueIndex=r,this.index=s,this.data=o}return e.prototype.get=function(t){var n;if(t>=0){if(t<55296||t>56319&&t<=65535)return n=this.index[t>>sf],n=(n<<oC)+(t&iC),this.data[n];if(t<=65535)return n=this.index[oO+(t-55296>>sf)],n=(n<<oC)+(t&iC),this.data[n];if(t<this.highStart)return n=epe-tpe+(t>>cT),n=this.index[n],n+=t>>sf&ape,n=this.index[n],n=(n<<oC)+(t&iC),this.data[n];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e})(),dU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ipe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ry=0;ry<dU.length;ry++)ipe[dU.charCodeAt(ry)]=ry;var lpe="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",AU=50,upe=1,iO=2,lO=3,cpe=4,dpe=5,fU=7,uO=8,mU=9,wd=10,lE=11,vU=12,uE=13,Ape=14,xp=15,cE=16,sy=17,op=18,fpe=19,hU=20,dE=21,ip=22,lC=23,Rm=24,gi=25,Cp=26,Sp=27,Nm=28,mpe=29,OA=30,vpe=31,oy=32,iy=33,AE=34,fE=35,mE=36,D0=37,vE=38,n_=39,a_=40,uC=41,cO=42,hpe=43,ppe=[9001,65288],dO="!",fa="",ly="",hE=spe(lpe),uc=[OA,mE],pE=[upe,iO,lO,dpe],AO=[wd,uO],pU=[Sp,Cp],gpe=pE.concat(AO),gU=[vE,n_,a_,AE,fE],ype=[xp,uE],_pe=function(e,t){t===void 0&&(t="strict");var n=[],a=[],r=[];return e.forEach(function(s,o){var i=hE.get(s);if(i>AU?(r.push(!0),i-=AU):r.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return a.push(o),n.push(cE);if(i===cpe||i===lE){if(o===0)return a.push(o),n.push(OA);var c=n[o-1];return gpe.indexOf(c)===-1?(a.push(a[o-1]),n.push(c)):(a.push(o),n.push(OA))}if(a.push(o),i===vpe)return n.push(t==="strict"?dE:D0);if(i===cO||i===mpe)return n.push(OA);if(i===hpe)return s>=131072&&s<=196605||s>=196608&&s<=262141?n.push(D0):n.push(OA);n.push(i)}),[a,n,r]},cC=function(e,t,n,a){var r=a[n];if(Array.isArray(e)?e.indexOf(r)!==-1:e===r)for(var s=n;s<=a.length;){s++;var o=a[s];if(o===t)return!0;if(o!==wd)break}if(r===wd)for(var s=n;s>0;){s--;var i=a[s];if(Array.isArray(e)?e.indexOf(i)!==-1:e===i)for(var c=n;c<=a.length;){c++;var o=a[c];if(o===t)return!0;if(o!==wd)break}if(i!==wd)break}return!1},yU=function(e,t){for(var n=e;n>=0;){var a=t[n];if(a===wd)n--;else return a}return 0},wpe=function(e,t,n,a,r){if(n[a]===0)return fa;var s=a-1;if(Array.isArray(r)&&r[s]===!0)return fa;var o=s-1,i=s+1,c=t[s],A=o>=0?t[o]:0,d=t[i];if(c===iO&&d===lO)return fa;if(pE.indexOf(c)!==-1)return dO;if(pE.indexOf(d)!==-1||AO.indexOf(d)!==-1)return fa;if(yU(s,t)===uO)return ly;if(hE.get(e[s])===lE||(c===oy||c===iy)&&hE.get(e[i])===lE||c===fU||d===fU||c===mU||[wd,uE,xp].indexOf(c)===-1&&d===mU||[sy,op,fpe,Rm,Nm].indexOf(d)!==-1||yU(s,t)===ip||cC(lC,ip,s,t)||cC([sy,op],dE,s,t)||cC(vU,vU,s,t))return fa;if(c===wd)return ly;if(c===lC||d===lC)return fa;if(d===cE||c===cE)return ly;if([uE,xp,dE].indexOf(d)!==-1||c===Ape||A===mE&&ype.indexOf(c)!==-1||c===Nm&&d===mE||d===hU||uc.indexOf(d)!==-1&&c===gi||uc.indexOf(c)!==-1&&d===gi||c===Sp&&[D0,oy,iy].indexOf(d)!==-1||[D0,oy,iy].indexOf(c)!==-1&&d===Cp||uc.indexOf(c)!==-1&&pU.indexOf(d)!==-1||pU.indexOf(c)!==-1&&uc.indexOf(d)!==-1||[Sp,Cp].indexOf(c)!==-1&&(d===gi||[ip,xp].indexOf(d)!==-1&&t[i+1]===gi)||[ip,xp].indexOf(c)!==-1&&d===gi||c===gi&&[gi,Nm,Rm].indexOf(d)!==-1)return fa;if([gi,Nm,Rm,sy,op].indexOf(d)!==-1)for(var f=s;f>=0;){var m=t[f];if(m===gi)return fa;if([Nm,Rm].indexOf(m)!==-1)f--;else break}if([Sp,Cp].indexOf(d)!==-1)for(var f=[sy,op].indexOf(c)!==-1?o:s;f>=0;){var m=t[f];if(m===gi)return fa;if([Nm,Rm].indexOf(m)!==-1)f--;else break}if(vE===c&&[vE,n_,AE,fE].indexOf(d)!==-1||[n_,AE].indexOf(c)!==-1&&[n_,a_].indexOf(d)!==-1||[a_,fE].indexOf(c)!==-1&&d===a_||gU.indexOf(c)!==-1&&[hU,Cp].indexOf(d)!==-1||gU.indexOf(d)!==-1&&c===Sp||uc.indexOf(c)!==-1&&uc.indexOf(d)!==-1||c===Rm&&uc.indexOf(d)!==-1||uc.concat(gi).indexOf(c)!==-1&&d===ip&&ppe.indexOf(e[i])===-1||uc.concat(gi).indexOf(d)!==-1&&c===op)return fa;if(c===uC&&d===uC){for(var v=n[s],p=1;v>0&&(v--,t[v]===uC);)p++;if(p%2!==0)return fa}return c===oy&&d===iy?fa:ly},bpe=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var n=_pe(e,t.lineBreak),a=n[0],r=n[1],s=n[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(r=r.map(function(i){return[gi,OA,cO].indexOf(i)!==-1?D0:i}));var o=t.wordBreak==="keep-all"?s.map(function(i,c){return i&&e[c]>=19968&&e[c]<=40959}):void 0;return[a,r,o]},xpe=(function(){function e(t,n,a,r){this.codePoints=t,this.required=n===dO,this.start=a,this.end=r}return e.prototype.slice=function(){return Wr.apply(void 0,this.codePoints.slice(this.start,this.end))},e})(),Cpe=function(e,t){var n=Bw(e),a=bpe(n,t),r=a[0],s=a[1],o=a[2],i=n.length,c=0,A=0;return{next:function(){if(A>=i)return{done:!0,value:null};for(var d=fa;A<i&&(d=wpe(n,s,r,++A,o))===fa;);if(d!==fa||A===i){var f=new xpe(n,d,c,A);return c=A,{value:f,done:!1}}return{done:!0,value:null}}}},Spe=1,Epe=2,Cg=4,_U=8,X_=10,wU=47,Kp=92,Bpe=9,kpe=32,uy=34,lp=61,Tpe=35,Ipe=36,Fpe=37,cy=39,dy=40,up=41,Ppe=95,ti=45,Dpe=33,Upe=60,Rpe=62,Npe=64,Vpe=91,Lpe=93,Mpe=61,Ope=123,Ay=63,Hpe=125,bU=124,$pe=126,Qpe=128,xU=65533,dC=42,WA=43,Gpe=44,zpe=58,Kpe=59,U0=46,Wpe=0,jpe=8,qpe=11,Ype=14,Xpe=31,Jpe=127,fu=-1,fO=48,mO=97,vO=101,Zpe=102,e0e=117,t0e=122,hO=65,pO=69,gO=70,n0e=85,a0e=90,so=function(e){return e>=fO&&e<=57},r0e=function(e){return e>=55296&&e<=57343},Vm=function(e){return so(e)||e>=hO&&e<=gO||e>=mO&&e<=Zpe},s0e=function(e){return e>=mO&&e<=t0e},o0e=function(e){return e>=hO&&e<=a0e},i0e=function(e){return s0e(e)||o0e(e)},l0e=function(e){return e>=Qpe},fy=function(e){return e===X_||e===Bpe||e===kpe},J_=function(e){return i0e(e)||l0e(e)||e===Ppe},CU=function(e){return J_(e)||so(e)||e===ti},u0e=function(e){return e>=Wpe&&e<=jpe||e===qpe||e>=Ype&&e<=Xpe||e===Jpe},fd=function(e,t){return e!==Kp?!1:t!==X_},my=function(e,t,n){return e===ti?J_(t)||fd(t,n):J_(e)?!0:!!(e===Kp&&fd(e,t))},AC=function(e,t,n){return e===WA||e===ti?so(t)?!0:t===U0&&so(n):so(e===U0?t:e)},c0e=function(e){var t=0,n=1;(e[t]===WA||e[t]===ti)&&(e[t]===ti&&(n=-1),t++);for(var a=[];so(e[t]);)a.push(e[t++]);var r=a.length?parseInt(Wr.apply(void 0,a),10):0;e[t]===U0&&t++;for(var s=[];so(e[t]);)s.push(e[t++]);var o=s.length,i=o?parseInt(Wr.apply(void 0,s),10):0;(e[t]===pO||e[t]===vO)&&t++;var c=1;(e[t]===WA||e[t]===ti)&&(e[t]===ti&&(c=-1),t++);for(var A=[];so(e[t]);)A.push(e[t++]);var d=A.length?parseInt(Wr.apply(void 0,A),10):0;return n*(r+i*Math.pow(10,-o))*Math.pow(10,c*d)},d0e={type:2},A0e={type:3},f0e={type:4},m0e={type:13},v0e={type:8},h0e={type:21},p0e={type:9},g0e={type:10},y0e={type:11},_0e={type:12},w0e={type:14},vy={type:23},b0e={type:1},x0e={type:25},C0e={type:24},S0e={type:26},E0e={type:27},B0e={type:28},k0e={type:29},T0e={type:31},gE={type:32},yO=(function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(Bw(t))},e.prototype.read=function(){for(var t=[],n=this.consumeToken();n!==gE;)t.push(n),n=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case uy:return this.consumeStringToken(uy);case Tpe:var n=this.peekCodePoint(0),a=this.peekCodePoint(1),r=this.peekCodePoint(2);if(CU(n)||fd(a,r)){var s=my(n,a,r)?Epe:Spe,o=this.consumeName();return{type:5,value:o,flags:s}}break;case Ipe:if(this.peekCodePoint(0)===lp)return this.consumeCodePoint(),m0e;break;case cy:return this.consumeStringToken(cy);case dy:return d0e;case up:return A0e;case dC:if(this.peekCodePoint(0)===lp)return this.consumeCodePoint(),w0e;break;case WA:if(AC(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case Gpe:return f0e;case ti:var i=t,c=this.peekCodePoint(0),A=this.peekCodePoint(1);if(AC(i,c,A))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(my(i,c,A))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(c===ti&&A===Rpe)return this.consumeCodePoint(),this.consumeCodePoint(),C0e;break;case U0:if(AC(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case wU:if(this.peekCodePoint(0)===dC)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===dC&&(d=this.consumeCodePoint(),d===wU))return this.consumeToken();if(d===fu)return this.consumeToken()}break;case zpe:return S0e;case Kpe:return E0e;case Upe:if(this.peekCodePoint(0)===Dpe&&this.peekCodePoint(1)===ti&&this.peekCodePoint(2)===ti)return this.consumeCodePoint(),this.consumeCodePoint(),x0e;break;case Npe:var f=this.peekCodePoint(0),m=this.peekCodePoint(1),v=this.peekCodePoint(2);if(my(f,m,v)){var o=this.consumeName();return{type:7,value:o}}break;case Vpe:return B0e;case Kp:if(fd(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case Lpe:return k0e;case Mpe:if(this.peekCodePoint(0)===lp)return this.consumeCodePoint(),v0e;break;case Ope:return y0e;case Hpe:return _0e;case e0e:case n0e:var p=this.peekCodePoint(0),g=this.peekCodePoint(1);return p===WA&&(Vm(g)||g===Ay)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case bU:if(this.peekCodePoint(0)===lp)return this.consumeCodePoint(),p0e;if(this.peekCodePoint(0)===bU)return this.consumeCodePoint(),h0e;break;case $pe:if(this.peekCodePoint(0)===lp)return this.consumeCodePoint(),g0e;break;case fu:return gE}return fy(t)?(this.consumeWhiteSpace(),T0e):so(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):J_(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:Wr(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],n=this.consumeCodePoint();Vm(n)&&t.length<6;)t.push(n),n=this.consumeCodePoint();for(var a=!1;n===Ay&&t.length<6;)t.push(n),n=this.consumeCodePoint(),a=!0;if(a){var r=parseInt(Wr.apply(void 0,t.map(function(c){return c===Ay?fO:c})),16),s=parseInt(Wr.apply(void 0,t.map(function(c){return c===Ay?gO:c})),16);return{type:30,start:r,end:s}}var o=parseInt(Wr.apply(void 0,t),16);if(this.peekCodePoint(0)===ti&&Vm(this.peekCodePoint(1))){this.consumeCodePoint(),n=this.consumeCodePoint();for(var i=[];Vm(n)&&i.length<6;)i.push(n),n=this.consumeCodePoint();var s=parseInt(Wr.apply(void 0,i),16);return{type:30,start:o,end:s}}else return{type:30,start:o,end:o}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===dy?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===dy?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===fu)return{type:22,value:""};var n=this.peekCodePoint(0);if(n===cy||n===uy){var a=this.consumeStringToken(this.consumeCodePoint());return a.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===fu||this.peekCodePoint(0)===up)?(this.consumeCodePoint(),{type:22,value:a.value}):(this.consumeBadUrlRemnants(),vy)}for(;;){var r=this.consumeCodePoint();if(r===fu||r===up)return{type:22,value:Wr.apply(void 0,t)};if(fy(r))return this.consumeWhiteSpace(),this.peekCodePoint(0)===fu||this.peekCodePoint(0)===up?(this.consumeCodePoint(),{type:22,value:Wr.apply(void 0,t)}):(this.consumeBadUrlRemnants(),vy);if(r===uy||r===cy||r===dy||u0e(r))return this.consumeBadUrlRemnants(),vy;if(r===Kp)if(fd(r,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),vy;else t.push(r)}},e.prototype.consumeWhiteSpace=function(){for(;fy(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===up||t===fu)return;fd(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var n=5e4,a="";t>0;){var r=Math.min(n,t);a+=Wr.apply(void 0,this._value.splice(0,r)),t-=r}return this._value.shift(),a},e.prototype.consumeStringToken=function(t){var n="",a=0;do{var r=this._value[a];if(r===fu||r===void 0||r===t)return n+=this.consumeStringSlice(a),{type:0,value:n};if(r===X_)return this._value.splice(0,a),b0e;if(r===Kp){var s=this._value[a+1];s!==fu&&s!==void 0&&(s===X_?(n+=this.consumeStringSlice(a),a=-1,this._value.shift()):fd(r,s)&&(n+=this.consumeStringSlice(a),n+=Wr(this.consumeEscapedCodePoint()),a=-1))}a++}while(!0)},e.prototype.consumeNumber=function(){var t=[],n=Cg,a=this.peekCodePoint(0);for((a===WA||a===ti)&&t.push(this.consumeCodePoint());so(this.peekCodePoint(0));)t.push(this.consumeCodePoint());a=this.peekCodePoint(0);var r=this.peekCodePoint(1);if(a===U0&&so(r))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),n=_U;so(this.peekCodePoint(0));)t.push(this.consumeCodePoint());a=this.peekCodePoint(0),r=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((a===pO||a===vO)&&((r===WA||r===ti)&&so(s)||so(r)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),n=_U;so(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[c0e(t),n]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),n=t[0],a=t[1],r=this.peekCodePoint(0),s=this.peekCodePoint(1),o=this.peekCodePoint(2);if(my(r,s,o)){var i=this.consumeName();return{type:15,number:n,flags:a,unit:i}}return r===Fpe?(this.consumeCodePoint(),{type:16,number:n,flags:a}):{type:17,number:n,flags:a}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(Vm(t)){for(var n=Wr(t);Vm(this.peekCodePoint(0))&&n.length<6;)n+=Wr(this.consumeCodePoint());fy(this.peekCodePoint(0))&&this.consumeCodePoint();var a=parseInt(n,16);return a===0||r0e(a)||a>1114111?xU:a}return t===fu?xU:t},e.prototype.consumeName=function(){for(var t="";;){var n=this.consumeCodePoint();if(CU(n))t+=Wr(n);else if(fd(n,this.peekCodePoint(0)))t+=Wr(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(n),t}},e})(),_O=(function(){function e(t){this._tokens=t}return e.create=function(t){var n=new yO;return n.write(t),new e(n.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var n=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return n;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var n=this.consumeComponentValue();if(n.type===32)return t;t.push(n),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var n={type:t,values:[]},a=this.consumeToken();;){if(a.type===32||F0e(a,t))return n;this.reconsumeToken(a),n.values.push(this.consumeComponentValue()),a=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var n={name:t.value,values:[],type:18};;){var a=this.consumeToken();if(a.type===32||a.type===3)return n;this.reconsumeToken(a),n.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?gE:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e})(),Sg=function(e){return e.type===15},vh=function(e){return e.type===17},tr=function(e){return e.type===20},I0e=function(e){return e.type===0},yE=function(e,t){return tr(e)&&e.value===t},wO=function(e){return e.type!==31},Qv=function(e){return e.type!==31&&e.type!==4},$u=function(e){var t=[],n=[];return e.forEach(function(a){if(a.type===4){if(n.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(n),n=[];return}a.type!==31&&n.push(a)}),n.length&&t.push(n),t},F0e=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},Kd=function(e){return e.type===17||e.type===15},ss=function(e){return e.type===16||Kd(e)},bO=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},zs={type:17,number:0,flags:Cg},dT={type:16,number:50,flags:Cg},bd={type:16,number:100,flags:Cg},Ep=function(e,t,n){var a=e[0],r=e[1];return[Ar(a,t),Ar(typeof r<"u"?r:a,n)]},Ar=function(e,t){if(e.type===16)return e.number/100*t;if(Sg(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},xO="deg",CO="grad",SO="rad",EO="turn",kw={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case xO:return Math.PI*t.number/180;case CO:return Math.PI/200*t.number;case SO:return t.number;case EO:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},BO=function(e){return e.type===15&&(e.unit===xO||e.unit===CO||e.unit===SO||e.unit===EO)},kO=function(e){var t=e.filter(tr).map(function(n){return n.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[zs,zs];case"to top":case"bottom":return Yi(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[zs,bd];case"to right":case"left":return Yi(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[bd,bd];case"to bottom":case"top":return Yi(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[bd,zs];case"to left":case"right":return Yi(270)}return 0},Yi=function(e){return Math.PI*e/180},Fd={name:"color",parse:function(e,t){if(t.type===18){var n=P0e[t.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return n(e,t.values)}if(t.type===5){if(t.value.length===3){var a=t.value.substring(0,1),r=t.value.substring(1,2),s=t.value.substring(2,3);return xd(parseInt(a+a,16),parseInt(r+r,16),parseInt(s+s,16),1)}if(t.value.length===4){var a=t.value.substring(0,1),r=t.value.substring(1,2),s=t.value.substring(2,3),o=t.value.substring(3,4);return xd(parseInt(a+a,16),parseInt(r+r,16),parseInt(s+s,16),parseInt(o+o,16)/255)}if(t.value.length===6){var a=t.value.substring(0,2),r=t.value.substring(2,4),s=t.value.substring(4,6);return xd(parseInt(a,16),parseInt(r,16),parseInt(s,16),1)}if(t.value.length===8){var a=t.value.substring(0,2),r=t.value.substring(2,4),s=t.value.substring(4,6),o=t.value.substring(6,8);return xd(parseInt(a,16),parseInt(r,16),parseInt(s,16),parseInt(o,16)/255)}}if(t.type===20){var i=xc[t.value.toUpperCase()];if(typeof i<"u")return i}return xc.TRANSPARENT}},Pd=function(e){return(255&e)===0},ks=function(e){var t=255&e,n=255&e>>8,a=255&e>>16,r=255&e>>24;return t<255?"rgba("+r+","+a+","+n+","+t/255+")":"rgb("+r+","+a+","+n+")"},xd=function(e,t,n,a){return(e<<24|t<<16|n<<8|Math.round(a*255)<<0)>>>0},SU=function(e,t){if(e.type===17)return e.number;if(e.type===16){var n=t===3?1:255;return t===3?e.number/100*n:Math.round(e.number/100*n)}return 0},EU=function(e,t){var n=t.filter(Qv);if(n.length===3){var a=n.map(SU),r=a[0],s=a[1],o=a[2];return xd(r,s,o,1)}if(n.length===4){var i=n.map(SU),r=i[0],s=i[1],o=i[2],c=i[3];return xd(r,s,o,c)}return 0};function fC(e,t,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(t-e)*n*6+e:n<1/2?t:n<2/3?(t-e)*6*(2/3-n)+e:e}var BU=function(e,t){var n=t.filter(Qv),a=n[0],r=n[1],s=n[2],o=n[3],i=(a.type===17?Yi(a.number):kw.parse(e,a))/(Math.PI*2),c=ss(r)?r.number/100:0,A=ss(s)?s.number/100:0,d=typeof o<"u"&&ss(o)?Ar(o,1):1;if(c===0)return xd(A*255,A*255,A*255,1);var f=A<=.5?A*(c+1):A+c-A*c,m=A*2-f,v=fC(m,f,i+1/3),p=fC(m,f,i),g=fC(m,f,i-1/3);return xd(v*255,p*255,g*255,d)},P0e={hsl:BU,hsla:BU,rgb:EU,rgba:EU},Wp=function(e,t){return Fd.parse(e,_O.create(t).parseComponentValue())},xc={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},D0e={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(n){if(tr(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},U0e={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Tw=function(e,t){var n=Fd.parse(e,t[0]),a=t[1];return a&&ss(a)?{color:n,stop:a}:{color:n,stop:null}},kU=function(e,t){var n=e[0],a=e[e.length-1];n.stop===null&&(n.stop=zs),a.stop===null&&(a.stop=bd);for(var r=[],s=0,o=0;o<e.length;o++){var i=e[o].stop;if(i!==null){var c=Ar(i,t);c>s?r.push(c):r.push(s),s=c}else r.push(null)}for(var A=null,o=0;o<r.length;o++){var d=r[o];if(d===null)A===null&&(A=o);else if(A!==null){for(var f=o-A,m=r[A-1],v=(d-m)/(f+1),p=1;p<=f;p++)r[A+p-1]=v*p;A=null}}return e.map(function(g,y){var w=g.color;return{color:w,stop:Math.max(Math.min(1,r[y]/t),0)}})},R0e=function(e,t,n){var a=t/2,r=n/2,s=Ar(e[0],t)-a,o=r-Ar(e[1],n);return(Math.atan2(o,s)+Math.PI*2)%(Math.PI*2)},N0e=function(e,t,n){var a=typeof e=="number"?e:R0e(e,t,n),r=Math.abs(t*Math.sin(a))+Math.abs(n*Math.cos(a)),s=t/2,o=n/2,i=r/2,c=Math.sin(a-Math.PI/2)*i,A=Math.cos(a-Math.PI/2)*i;return[r,s-A,s+A,o-c,o+c]},_l=function(e,t){return Math.sqrt(e*e+t*t)},TU=function(e,t,n,a,r){var s=[[0,0],[0,t],[e,0],[e,t]];return s.reduce(function(o,i){var c=i[0],A=i[1],d=_l(n-c,a-A);return(r?d<o.optimumDistance:d>o.optimumDistance)?{optimumCorner:i,optimumDistance:d}:o},{optimumDistance:r?1/0:-1/0,optimumCorner:null}).optimumCorner},V0e=function(e,t,n,a,r){var s=0,o=0;switch(e.size){case 0:e.shape===0?s=o=Math.min(Math.abs(t),Math.abs(t-a),Math.abs(n),Math.abs(n-r)):e.shape===1&&(s=Math.min(Math.abs(t),Math.abs(t-a)),o=Math.min(Math.abs(n),Math.abs(n-r)));break;case 2:if(e.shape===0)s=o=Math.min(_l(t,n),_l(t,n-r),_l(t-a,n),_l(t-a,n-r));else if(e.shape===1){var i=Math.min(Math.abs(n),Math.abs(n-r))/Math.min(Math.abs(t),Math.abs(t-a)),c=TU(a,r,t,n,!0),A=c[0],d=c[1];s=_l(A-t,(d-n)/i),o=i*s}break;case 1:e.shape===0?s=o=Math.max(Math.abs(t),Math.abs(t-a),Math.abs(n),Math.abs(n-r)):e.shape===1&&(s=Math.max(Math.abs(t),Math.abs(t-a)),o=Math.max(Math.abs(n),Math.abs(n-r)));break;case 3:if(e.shape===0)s=o=Math.max(_l(t,n),_l(t,n-r),_l(t-a,n),_l(t-a,n-r));else if(e.shape===1){var i=Math.max(Math.abs(n),Math.abs(n-r))/Math.max(Math.abs(t),Math.abs(t-a)),f=TU(a,r,t,n,!1),A=f[0],d=f[1];s=_l(A-t,(d-n)/i),o=i*s}break}return Array.isArray(e.size)&&(s=Ar(e.size[0],a),o=e.size.length===2?Ar(e.size[1],r):s),[s,o]},L0e=function(e,t){var n=Yi(180),a=[];return $u(t).forEach(function(r,s){if(s===0){var o=r[0];if(o.type===20&&o.value==="to"){n=kO(r);return}else if(BO(o)){n=kw.parse(e,o);return}}var i=Tw(e,r);a.push(i)}),{angle:n,stops:a,type:1}},hy=function(e,t){var n=Yi(180),a=[];return $u(t).forEach(function(r,s){if(s===0){var o=r[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){n=kO(r);return}else if(BO(o)){n=(kw.parse(e,o)+Yi(270))%Yi(360);return}}var i=Tw(e,r);a.push(i)}),{angle:n,stops:a,type:1}},M0e=function(e,t){var n=Yi(180),a=[],r=1,s=0,o=3,i=[];return $u(t).forEach(function(c,A){var d=c[0];if(A===0){if(tr(d)&&d.value==="linear"){r=1;return}else if(tr(d)&&d.value==="radial"){r=2;return}}if(d.type===18){if(d.name==="from"){var f=Fd.parse(e,d.values[0]);a.push({stop:zs,color:f})}else if(d.name==="to"){var f=Fd.parse(e,d.values[0]);a.push({stop:bd,color:f})}else if(d.name==="color-stop"){var m=d.values.filter(Qv);if(m.length===2){var f=Fd.parse(e,m[1]),v=m[0];vh(v)&&a.push({stop:{type:16,number:v.number*100,flags:v.flags},color:f})}}}}),r===1?{angle:(n+Yi(180))%Yi(360),stops:a,type:r}:{size:o,shape:s,stops:a,position:i,type:r}},TO="closest-side",IO="farthest-side",FO="closest-corner",PO="farthest-corner",DO="circle",UO="ellipse",RO="cover",NO="contain",O0e=function(e,t){var n=0,a=3,r=[],s=[];return $u(t).forEach(function(o,i){var c=!0;if(i===0){var A=!1;c=o.reduce(function(f,m){if(A)if(tr(m))switch(m.value){case"center":return s.push(dT),f;case"top":case"left":return s.push(zs),f;case"right":case"bottom":return s.push(bd),f}else(ss(m)||Kd(m))&&s.push(m);else if(tr(m))switch(m.value){case DO:return n=0,!1;case UO:return n=1,!1;case"at":return A=!0,!1;case TO:return a=0,!1;case RO:case IO:return a=1,!1;case NO:case FO:return a=2,!1;case PO:return a=3,!1}else if(Kd(m)||ss(m))return Array.isArray(a)||(a=[]),a.push(m),!1;return f},c)}if(c){var d=Tw(e,o);r.push(d)}}),{size:a,shape:n,stops:r,position:s,type:2}},py=function(e,t){var n=0,a=3,r=[],s=[];return $u(t).forEach(function(o,i){var c=!0;if(i===0?c=o.reduce(function(d,f){if(tr(f))switch(f.value){case"center":return s.push(dT),!1;case"top":case"left":return s.push(zs),!1;case"right":case"bottom":return s.push(bd),!1}else if(ss(f)||Kd(f))return s.push(f),!1;return d},c):i===1&&(c=o.reduce(function(d,f){if(tr(f))switch(f.value){case DO:return n=0,!1;case UO:return n=1,!1;case NO:case TO:return a=0,!1;case IO:return a=1,!1;case FO:return a=2,!1;case RO:case PO:return a=3,!1}else if(Kd(f)||ss(f))return Array.isArray(a)||(a=[]),a.push(f),!1;return d},c)),c){var A=Tw(e,o);r.push(A)}}),{size:a,shape:n,stops:r,position:s,type:2}},H0e=function(e){return e.type===1},$0e=function(e){return e.type===2},AT={name:"image",parse:function(e,t){if(t.type===22){var n={url:t.value,type:0};return e.cache.addImage(t.value),n}if(t.type===18){var a=VO[t.name];if(typeof a>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return a(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function Q0e(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!VO[e.name])}var VO={"linear-gradient":L0e,"-moz-linear-gradient":hy,"-ms-linear-gradient":hy,"-o-linear-gradient":hy,"-webkit-linear-gradient":hy,"radial-gradient":O0e,"-moz-radial-gradient":py,"-ms-radial-gradient":py,"-o-radial-gradient":py,"-webkit-radial-gradient":py,"-webkit-gradient":M0e},G0e={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var n=t[0];return n.type===20&&n.value==="none"?[]:t.filter(function(a){return Qv(a)&&Q0e(a)}).map(function(a){return AT.parse(e,a)})}},z0e={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(n){if(tr(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},K0e={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return $u(t).map(function(n){return n.filter(ss)}).map(bO)}},W0e={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return $u(t).map(function(n){return n.filter(tr).map(function(a){return a.value}).join(" ")}).map(j0e)}},j0e=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},gv;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(gv||(gv={}));var q0e={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return $u(t).map(function(n){return n.filter(Y0e)})}},Y0e=function(e){return tr(e)||ss(e)},Iw=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},X0e=Iw("top"),J0e=Iw("right"),Z0e=Iw("bottom"),ege=Iw("left"),Fw=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,n){return bO(n.filter(ss))}}},tge=Fw("top-left"),nge=Fw("top-right"),age=Fw("bottom-right"),rge=Fw("bottom-left"),Pw=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,n){switch(n){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},sge=Pw("top"),oge=Pw("right"),ige=Pw("bottom"),lge=Pw("left"),Dw=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,n){return Sg(n)?n.number:0}}},uge=Dw("top"),cge=Dw("right"),dge=Dw("bottom"),Age=Dw("left"),fge={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},mge={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},vge={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(tr).reduce(function(n,a){return n|hge(a.value)},0)}},hge=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},pge={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},gge={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},Z_;(function(e){e.NORMAL="normal",e.STRICT="strict"})(Z_||(Z_={}));var yge={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return Z_.STRICT;case"normal":default:return Z_.NORMAL}}},_ge={name:"line-height",initialValue:"normal",prefix:!1,type:4},IU=function(e,t){return tr(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:ss(e)?Ar(e,t):t},wge={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:AT.parse(e,t)}},bge={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},_E={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Uw=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},xge=Uw("top"),Cge=Uw("right"),Sge=Uw("bottom"),Ege=Uw("left"),Bge={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(tr).map(function(n){switch(n.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},kge={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},Rw=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Tge=Rw("top"),Ige=Rw("right"),Fge=Rw("bottom"),Pge=Rw("left"),Dge={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Uge={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Rge={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&yE(t[0],"none")?[]:$u(t).map(function(n){for(var a={color:xc.TRANSPARENT,offsetX:zs,offsetY:zs,blur:zs},r=0,s=0;s<n.length;s++){var o=n[s];Kd(o)?(r===0?a.offsetX=o:r===1?a.offsetY=o:a.blur=o,r++):a.color=Fd.parse(e,o)}return a})}},Nge={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Vge={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var n=Oge[t.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return n(t.values)}return null}},Lge=function(e){var t=e.filter(function(n){return n.type===17}).map(function(n){return n.number});return t.length===6?t:null},Mge=function(e){var t=e.filter(function(c){return c.type===17}).map(function(c){return c.number}),n=t[0],a=t[1];t[2],t[3];var r=t[4],s=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var o=t[12],i=t[13];return t[14],t[15],t.length===16?[n,a,r,s,o,i]:null},Oge={matrix:Lge,matrix3d:Mge},FU={type:16,number:50,flags:Cg},Hge=[FU,FU],$ge={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var n=t.filter(ss);return n.length!==2?Hge:[n[0],n[1]]}},Qge={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},jp;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(jp||(jp={}));var Gge={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return jp.BREAK_ALL;case"keep-all":return jp.KEEP_ALL;case"normal":default:return jp.NORMAL}}},zge={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(vh(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},LO={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},Kge={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return vh(t)?t.number:1}},Wge={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},jge={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(tr).map(function(n){switch(n.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(n){return n!==0})}},qge={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var n=[],a=[];return t.forEach(function(r){switch(r.type){case 20:case 0:n.push(r.value);break;case 17:n.push(r.number.toString());break;case 4:a.push(n.join(" ")),n.length=0;break}}),n.length&&a.push(n.join(" ")),a.map(function(r){return r.indexOf(" ")===-1?r:"'"+r+"'"})}},Yge={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Xge={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(vh(t))return t.number;if(tr(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},Jge={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(tr).map(function(n){return n.value})}},Zge={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},gs=function(e,t){return(e&t)!==0},e1e={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var n=t[0];return n.type===20&&n.value==="none"?[]:t}},t1e={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var n=t[0];if(n.type===20&&n.value==="none")return null;for(var a=[],r=t.filter(wO),s=0;s<r.length;s++){var o=r[s],i=r[s+1];if(o.type===20){var c=i&&vh(i)?i.number:1;a.push({counter:o.value,increment:c})}}return a}},n1e={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var n=[],a=t.filter(wO),r=0;r<a.length;r++){var s=a[r],o=a[r+1];if(tr(s)&&s.value!=="none"){var i=o&&vh(o)?o.number:0;n.push({counter:s.value,reset:i})}}return n}},a1e={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(Sg).map(function(n){return LO.parse(e,n)})}},r1e={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var n=t[0];if(n.type===20&&n.value==="none")return null;var a=[],r=t.filter(I0e);if(r.length%2!==0)return null;for(var s=0;s<r.length;s+=2){var o=r[s].value,i=r[s+1].value;a.push({open:o,close:i})}return a}},PU=function(e,t,n){if(!e)return"";var a=e[Math.min(t,e.length-1)];return a?n?a.open:a.close:""},s1e={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&yE(t[0],"none")?[]:$u(t).map(function(n){for(var a={color:255,offsetX:zs,offsetY:zs,blur:zs,spread:zs,inset:!1},r=0,s=0;s<n.length;s++){var o=n[s];yE(o,"inset")?a.inset=!0:Kd(o)?(r===0?a.offsetX=o:r===1?a.offsetY=o:r===2?a.blur=o:a.spread=o,r++):a.color=Fd.parse(e,o)}return a})}},o1e={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var n=[0,1,2],a=[];return t.filter(tr).forEach(function(r){switch(r.value){case"stroke":a.push(1);break;case"fill":a.push(0);break;case"markers":a.push(2);break}}),n.forEach(function(r){a.indexOf(r)===-1&&a.push(r)}),a}},i1e={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},l1e={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return Sg(t)?t.number:0}},u1e=(function(){function e(t,n){var a,r;this.animationDuration=An(t,a1e,n.animationDuration),this.backgroundClip=An(t,D0e,n.backgroundClip),this.backgroundColor=An(t,U0e,n.backgroundColor),this.backgroundImage=An(t,G0e,n.backgroundImage),this.backgroundOrigin=An(t,z0e,n.backgroundOrigin),this.backgroundPosition=An(t,K0e,n.backgroundPosition),this.backgroundRepeat=An(t,W0e,n.backgroundRepeat),this.backgroundSize=An(t,q0e,n.backgroundSize),this.borderTopColor=An(t,X0e,n.borderTopColor),this.borderRightColor=An(t,J0e,n.borderRightColor),this.borderBottomColor=An(t,Z0e,n.borderBottomColor),this.borderLeftColor=An(t,ege,n.borderLeftColor),this.borderTopLeftRadius=An(t,tge,n.borderTopLeftRadius),this.borderTopRightRadius=An(t,nge,n.borderTopRightRadius),this.borderBottomRightRadius=An(t,age,n.borderBottomRightRadius),this.borderBottomLeftRadius=An(t,rge,n.borderBottomLeftRadius),this.borderTopStyle=An(t,sge,n.borderTopStyle),this.borderRightStyle=An(t,oge,n.borderRightStyle),this.borderBottomStyle=An(t,ige,n.borderBottomStyle),this.borderLeftStyle=An(t,lge,n.borderLeftStyle),this.borderTopWidth=An(t,uge,n.borderTopWidth),this.borderRightWidth=An(t,cge,n.borderRightWidth),this.borderBottomWidth=An(t,dge,n.borderBottomWidth),this.borderLeftWidth=An(t,Age,n.borderLeftWidth),this.boxShadow=An(t,s1e,n.boxShadow),this.color=An(t,fge,n.color),this.direction=An(t,mge,n.direction),this.display=An(t,vge,n.display),this.float=An(t,pge,n.cssFloat),this.fontFamily=An(t,qge,n.fontFamily),this.fontSize=An(t,Yge,n.fontSize),this.fontStyle=An(t,Zge,n.fontStyle),this.fontVariant=An(t,Jge,n.fontVariant),this.fontWeight=An(t,Xge,n.fontWeight),this.letterSpacing=An(t,gge,n.letterSpacing),this.lineBreak=An(t,yge,n.lineBreak),this.lineHeight=An(t,_ge,n.lineHeight),this.listStyleImage=An(t,wge,n.listStyleImage),this.listStylePosition=An(t,bge,n.listStylePosition),this.listStyleType=An(t,_E,n.listStyleType),this.marginTop=An(t,xge,n.marginTop),this.marginRight=An(t,Cge,n.marginRight),this.marginBottom=An(t,Sge,n.marginBottom),this.marginLeft=An(t,Ege,n.marginLeft),this.opacity=An(t,Kge,n.opacity);var s=An(t,Bge,n.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=An(t,kge,n.overflowWrap),this.paddingTop=An(t,Tge,n.paddingTop),this.paddingRight=An(t,Ige,n.paddingRight),this.paddingBottom=An(t,Fge,n.paddingBottom),this.paddingLeft=An(t,Pge,n.paddingLeft),this.paintOrder=An(t,o1e,n.paintOrder),this.position=An(t,Uge,n.position),this.textAlign=An(t,Dge,n.textAlign),this.textDecorationColor=An(t,Wge,(a=n.textDecorationColor)!==null&&a!==void 0?a:n.color),this.textDecorationLine=An(t,jge,(r=n.textDecorationLine)!==null&&r!==void 0?r:n.textDecoration),this.textShadow=An(t,Rge,n.textShadow),this.textTransform=An(t,Nge,n.textTransform),this.transform=An(t,Vge,n.transform),this.transformOrigin=An(t,$ge,n.transformOrigin),this.visibility=An(t,Qge,n.visibility),this.webkitTextStrokeColor=An(t,i1e,n.webkitTextStrokeColor),this.webkitTextStrokeWidth=An(t,l1e,n.webkitTextStrokeWidth),this.wordBreak=An(t,Gge,n.wordBreak),this.zIndex=An(t,zge,n.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return Pd(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return gs(this.display,4)||gs(this.display,33554432)||gs(this.display,268435456)||gs(this.display,536870912)||gs(this.display,67108864)||gs(this.display,134217728)},e})(),c1e=(function(){function e(t,n){this.content=An(t,e1e,n.content),this.quotes=An(t,r1e,n.quotes)}return e})(),DU=(function(){function e(t,n){this.counterIncrement=An(t,t1e,n.counterIncrement),this.counterReset=An(t,n1e,n.counterReset)}return e})(),An=function(e,t,n){var a=new yO,r=n!==null&&typeof n<"u"?n.toString():t.initialValue;a.write(r);var s=new _O(a.read());switch(t.type){case 2:var o=s.parseComponentValue();return t.parse(e,tr(o)?o.value:t.initialValue);case 0:return t.parse(e,s.parseComponentValue());case 1:return t.parse(e,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(t.format){case"angle":return kw.parse(e,s.parseComponentValue());case"color":return Fd.parse(e,s.parseComponentValue());case"image":return AT.parse(e,s.parseComponentValue());case"length":var i=s.parseComponentValue();return Kd(i)?i:zs;case"length-percentage":var c=s.parseComponentValue();return ss(c)?c:zs;case"time":return LO.parse(e,s.parseComponentValue())}break}},d1e="data-html2canvas-debug",A1e=function(e){var t=e.getAttribute(d1e);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},wE=function(e,t){var n=A1e(e);return n===1||t===n},Qu=(function(){function e(t,n){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,wE(n,3))debugger;this.styles=new u1e(t,window.getComputedStyle(n,null)),CE(n)&&(this.styles.animationDuration.some(function(a){return a>0})&&(n.style.animationDuration="0s"),this.styles.transform!==null&&(n.style.transform="none")),this.bounds=Ew(this.context,n),wE(n,4)&&(this.flags|=16)}return e})(),f1e="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",UU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Bp=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var gy=0;gy<UU.length;gy++)Bp[UU.charCodeAt(gy)]=gy;var m1e=function(e){var t=e.length*.75,n=e.length,a,r=0,s,o,i,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var A=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(A)?A:new Uint8Array(A);for(a=0;a<n;a+=4)s=Bp[e.charCodeAt(a)],o=Bp[e.charCodeAt(a+1)],i=Bp[e.charCodeAt(a+2)],c=Bp[e.charCodeAt(a+3)],d[r++]=s<<2|o>>4,d[r++]=(o&15)<<4|i>>2,d[r++]=(i&3)<<6|c&63;return A},v1e=function(e){for(var t=e.length,n=[],a=0;a<t;a+=2)n.push(e[a+1]<<8|e[a]);return n},h1e=function(e){for(var t=e.length,n=[],a=0;a<t;a+=4)n.push(e[a+3]<<24|e[a+2]<<16|e[a+1]<<8|e[a]);return n},of=5,fT=11,mC=2,p1e=fT-of,MO=65536>>of,g1e=1<<of,vC=g1e-1,y1e=1024>>of,_1e=MO+y1e,w1e=_1e,b1e=32,x1e=w1e+b1e,C1e=65536>>fT,S1e=1<<p1e,E1e=S1e-1,RU=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},B1e=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},k1e=function(e,t){var n=m1e(e),a=Array.isArray(n)?h1e(n):new Uint32Array(n),r=Array.isArray(n)?v1e(n):new Uint16Array(n),s=24,o=RU(r,s/2,a[4]/2),i=a[5]===2?RU(r,(s+a[4])/2):B1e(a,Math.ceil((s+a[4])/4));return new T1e(a[0],a[1],a[2],a[3],o,i)},T1e=(function(){function e(t,n,a,r,s,o){this.initialValue=t,this.errorValue=n,this.highStart=a,this.highValueIndex=r,this.index=s,this.data=o}return e.prototype.get=function(t){var n;if(t>=0){if(t<55296||t>56319&&t<=65535)return n=this.index[t>>of],n=(n<<mC)+(t&vC),this.data[n];if(t<=65535)return n=this.index[MO+(t-55296>>of)],n=(n<<mC)+(t&vC),this.data[n];if(t<this.highStart)return n=x1e-C1e+(t>>fT),n=this.index[n],n+=t>>of&E1e,n=this.index[n],n=(n<<mC)+(t&vC),this.data[n];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e})(),NU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",I1e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var yy=0;yy<NU.length;yy++)I1e[NU.charCodeAt(yy)]=yy;var F1e=1,hC=2,pC=3,VU=4,LU=5,P1e=7,MU=8,gC=9,yC=10,OU=11,HU=12,$U=13,QU=14,_C=15,D1e=function(e){for(var t=[],n=0,a=e.length;n<a;){var r=e.charCodeAt(n++);if(r>=55296&&r<=56319&&n<a){var s=e.charCodeAt(n++);(s&64512)===56320?t.push(((r&1023)<<10)+(s&1023)+65536):(t.push(r),n--)}else t.push(r)}return t},U1e=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var a=[],r=-1,s="";++r<n;){var o=e[r];o<=65535?a.push(o):(o-=65536,a.push((o>>10)+55296,o%1024+56320)),(r+1===n||a.length>16384)&&(s+=String.fromCharCode.apply(String,a),a.length=0)}return s},R1e=k1e(f1e),zi="",wC="",N1e=function(e){return R1e.get(e)},V1e=function(e,t,n){var a=n-2,r=t[a],s=t[n-1],o=t[n];if(s===hC&&o===pC)return zi;if(s===hC||s===pC||s===VU||o===hC||o===pC||o===VU)return wC;if(s===MU&&[MU,gC,OU,HU].indexOf(o)!==-1||(s===OU||s===gC)&&(o===gC||o===yC)||(s===HU||s===yC)&&o===yC||o===$U||o===LU||o===P1e||s===F1e)return zi;if(s===$U&&o===QU){for(;r===LU;)r=t[--a];if(r===QU)return zi}if(s===_C&&o===_C){for(var i=0;r===_C;)i++,r=t[--a];if(i%2===0)return zi}return wC},L1e=function(e){var t=D1e(e),n=t.length,a=0,r=0,s=t.map(N1e);return{next:function(){if(a>=n)return{done:!0,value:null};for(var o=zi;a<n&&(o=V1e(t,s,++a))===zi;);if(o!==zi||a===n){var i=U1e.apply(null,t.slice(r,a));return r=a,{value:i,done:!1}}return{done:!0,value:null}}}},M1e=function(e){for(var t=L1e(e),n=[],a;!(a=t.next()).done;)a.value&&n.push(a.value.slice());return n},O1e=function(e){var t=123;if(e.createRange){var n=e.createRange();if(n.getBoundingClientRect){var a=e.createElement("boundtest");a.style.height=t+"px",a.style.display="block",e.body.appendChild(a),n.selectNode(a);var r=n.getBoundingClientRect(),s=Math.round(r.height);if(e.body.removeChild(a),s===t)return!0}}return!1},H1e=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var n=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var a=t.firstChild,r=Bw(a.data).map(function(c){return Wr(c)}),s=0,o={},i=r.every(function(c,A){n.setStart(a,s),n.setEnd(a,s+c.length);var d=n.getBoundingClientRect();s+=c.length;var f=d.x>o.x||d.y>o.y;return o=d,A===0?!0:f});return e.body.removeChild(t),i},$1e=function(){return typeof new Image().crossOrigin<"u"},Q1e=function(){return typeof new XMLHttpRequest().responseType=="string"},G1e=function(e){var t=new Image,n=e.createElement("canvas"),a=n.getContext("2d");if(!a)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{a.drawImage(t,0,0),n.toDataURL()}catch{return!1}return!0},GU=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},z1e=function(e){var t=e.createElement("canvas"),n=100;t.width=n,t.height=n;var a=t.getContext("2d");if(!a)return Promise.reject(!1);a.fillStyle="rgb(0, 255, 0)",a.fillRect(0,0,n,n);var r=new Image,s=t.toDataURL();r.src=s;var o=bE(n,n,0,0,r);return a.fillStyle="red",a.fillRect(0,0,n,n),zU(o).then(function(i){a.drawImage(i,0,0);var c=a.getImageData(0,0,n,n).data;a.fillStyle="red",a.fillRect(0,0,n,n);var A=e.createElement("div");return A.style.backgroundImage="url("+s+")",A.style.height=n+"px",GU(c)?zU(bE(n,n,0,0,A)):Promise.reject(!1)}).then(function(i){return a.drawImage(i,0,0),GU(a.getImageData(0,0,n,n).data)}).catch(function(){return!1})},bE=function(e,t,n,a,r){var s="http://www.w3.org/2000/svg",o=document.createElementNS(s,"svg"),i=document.createElementNS(s,"foreignObject");return o.setAttributeNS(null,"width",e.toString()),o.setAttributeNS(null,"height",t.toString()),i.setAttributeNS(null,"width","100%"),i.setAttributeNS(null,"height","100%"),i.setAttributeNS(null,"x",n.toString()),i.setAttributeNS(null,"y",a.toString()),i.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(i),i.appendChild(r),o},zU=function(e){return new Promise(function(t,n){var a=new Image;a.onload=function(){return t(a)},a.onerror=n,a.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},Ms={get SUPPORT_RANGE_BOUNDS(){var e=O1e(document);return Object.defineProperty(Ms,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=Ms.SUPPORT_RANGE_BOUNDS&&H1e(document);return Object.defineProperty(Ms,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=G1e(document);return Object.defineProperty(Ms,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?z1e(document):Promise.resolve(!1);return Object.defineProperty(Ms,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=$1e();return Object.defineProperty(Ms,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=Q1e();return Object.defineProperty(Ms,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Ms,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Ms,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},qp=(function(){function e(t,n){this.text=t,this.bounds=n}return e})(),K1e=function(e,t,n,a){var r=q1e(t,n),s=[],o=0;return r.forEach(function(i){if(n.textDecorationLine.length||i.trim().length>0)if(Ms.SUPPORT_RANGE_BOUNDS){var c=KU(a,o,i.length).getClientRects();if(c.length>1){var A=mT(i),d=0;A.forEach(function(m){s.push(new qp(m,Uc.fromDOMRectList(e,KU(a,d+o,m.length).getClientRects()))),d+=m.length})}else s.push(new qp(i,Uc.fromDOMRectList(e,c)))}else{var f=a.splitText(i.length);s.push(new qp(i,W1e(e,a))),a=f}else Ms.SUPPORT_RANGE_BOUNDS||(a=a.splitText(i.length));o+=i.length}),s},W1e=function(e,t){var n=t.ownerDocument;if(n){var a=n.createElement("html2canvaswrapper");a.appendChild(t.cloneNode(!0));var r=t.parentNode;if(r){r.replaceChild(a,t);var s=Ew(e,a);return a.firstChild&&r.replaceChild(a.firstChild,a),s}}return Uc.EMPTY},KU=function(e,t,n){var a=e.ownerDocument;if(!a)throw new Error("Node has no owner document");var r=a.createRange();return r.setStart(e,t),r.setEnd(e,t+n),r},mT=function(e){if(Ms.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(n){return n.segment})}return M1e(e)},j1e=function(e,t){if(Ms.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(e)).map(function(a){return a.segment})}return X1e(e,t)},q1e=function(e,t){return t.letterSpacing!==0?mT(e):j1e(e,t)},Y1e=[32,160,4961,65792,65793,4153,4241],X1e=function(e,t){for(var n=Cpe(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),a=[],r,s=function(){if(r.value){var o=r.value.slice(),i=Bw(o),c="";i.forEach(function(A){Y1e.indexOf(A)===-1?c+=Wr(A):(c.length&&a.push(c),a.push(Wr(A)),c="")}),c.length&&a.push(c)}};!(r=n.next()).done;)s();return a},J1e=(function(){function e(t,n,a){this.text=Z1e(n.data,a.textTransform),this.textBounds=K1e(t,this.text,a,n)}return e})(),Z1e=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(eye,tye);case 2:return e.toUpperCase();default:return e}},eye=/(^|\s|:|-|\(|\))([a-z])/g,tye=function(e,t,n){return e.length>0?t+n.toUpperCase():e},OO=(function(e){au(t,e);function t(n,a){var r=e.call(this,n,a)||this;return r.src=a.currentSrc||a.src,r.intrinsicWidth=a.naturalWidth,r.intrinsicHeight=a.naturalHeight,r.context.cache.addImage(r.src),r}return t})(Qu),HO=(function(e){au(t,e);function t(n,a){var r=e.call(this,n,a)||this;return r.canvas=a,r.intrinsicWidth=a.width,r.intrinsicHeight=a.height,r}return t})(Qu),$O=(function(e){au(t,e);function t(n,a){var r=e.call(this,n,a)||this,s=new XMLSerializer,o=Ew(n,a);return a.setAttribute("width",o.width+"px"),a.setAttribute("height",o.height+"px"),r.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(a)),r.intrinsicWidth=a.width.baseVal.value,r.intrinsicHeight=a.height.baseVal.value,r.context.cache.addImage(r.svg),r}return t})(Qu),QO=(function(e){au(t,e);function t(n,a){var r=e.call(this,n,a)||this;return r.value=a.value,r}return t})(Qu),xE=(function(e){au(t,e);function t(n,a){var r=e.call(this,n,a)||this;return r.start=a.start,r.reversed=typeof a.reversed=="boolean"&&a.reversed===!0,r}return t})(Qu),nye=[{type:15,flags:0,unit:"px",number:3}],aye=[{type:16,flags:0,number:50}],rye=function(e){return e.width>e.height?new Uc(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new Uc(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},sye=function(e){var t=e.type===oye?new Array(e.value.length+1).join(""):e.value;return t.length===0?e.placeholder||"":t},e2="checkbox",t2="radio",oye="password",WU=707406591,vT=(function(e){au(t,e);function t(n,a){var r=e.call(this,n,a)||this;switch(r.type=a.type.toLowerCase(),r.checked=a.checked,r.value=sye(a),(r.type===e2||r.type===t2)&&(r.styles.backgroundColor=3739148031,r.styles.borderTopColor=r.styles.borderRightColor=r.styles.borderBottomColor=r.styles.borderLeftColor=2779096575,r.styles.borderTopWidth=r.styles.borderRightWidth=r.styles.borderBottomWidth=r.styles.borderLeftWidth=1,r.styles.borderTopStyle=r.styles.borderRightStyle=r.styles.borderBottomStyle=r.styles.borderLeftStyle=1,r.styles.backgroundClip=[0],r.styles.backgroundOrigin=[0],r.bounds=rye(r.bounds)),r.type){case e2:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=nye;break;case t2:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=aye;break}return r}return t})(Qu),GO=(function(e){au(t,e);function t(n,a){var r=e.call(this,n,a)||this,s=a.options[a.selectedIndex||0];return r.value=s&&s.text||"",r}return t})(Qu),zO=(function(e){au(t,e);function t(n,a){var r=e.call(this,n,a)||this;return r.value=a.value,r}return t})(Qu),KO=(function(e){au(t,e);function t(n,a){var r=e.call(this,n,a)||this;r.src=a.src,r.width=parseInt(a.width,10)||0,r.height=parseInt(a.height,10)||0,r.backgroundColor=r.styles.backgroundColor;try{if(a.contentWindow&&a.contentWindow.document&&a.contentWindow.document.documentElement){r.tree=jO(n,a.contentWindow.document.documentElement);var s=a.contentWindow.document.documentElement?Wp(n,getComputedStyle(a.contentWindow.document.documentElement).backgroundColor):xc.TRANSPARENT,o=a.contentWindow.document.body?Wp(n,getComputedStyle(a.contentWindow.document.body).backgroundColor):xc.TRANSPARENT;r.backgroundColor=Pd(s)?Pd(o)?r.styles.backgroundColor:o:s}}catch{}return r}return t})(Qu),iye=["OL","UL","MENU"],r_=function(e,t,n,a){for(var r=t.firstChild,s=void 0;r;r=s)if(s=r.nextSibling,qO(r)&&r.data.trim().length>0)n.textNodes.push(new J1e(e,r,n.styles));else if(Jm(r))if(ZO(r)&&r.assignedNodes)r.assignedNodes().forEach(function(i){return r_(e,i,n,a)});else{var o=WO(e,r);o.styles.isVisible()&&(lye(r,o,a)?o.flags|=4:uye(o.styles)&&(o.flags|=2),iye.indexOf(r.tagName)!==-1&&(o.flags|=8),n.elements.push(o),r.slot,r.shadowRoot?r_(e,r.shadowRoot,o,a):!n2(r)&&!YO(r)&&!a2(r)&&r_(e,r,o,a))}},WO=function(e,t){return SE(t)?new OO(e,t):XO(t)?new HO(e,t):YO(t)?new $O(e,t):cye(t)?new QO(e,t):dye(t)?new xE(e,t):Aye(t)?new vT(e,t):a2(t)?new GO(e,t):n2(t)?new zO(e,t):JO(t)?new KO(e,t):new Qu(e,t)},jO=function(e,t){var n=WO(e,t);return n.flags|=4,r_(e,t,n,n),n},lye=function(e,t,n){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||hT(e)&&n.styles.isTransparent()},uye=function(e){return e.isPositioned()||e.isFloating()},qO=function(e){return e.nodeType===Node.TEXT_NODE},Jm=function(e){return e.nodeType===Node.ELEMENT_NODE},CE=function(e){return Jm(e)&&typeof e.style<"u"&&!s_(e)},s_=function(e){return typeof e.className=="object"},cye=function(e){return e.tagName==="LI"},dye=function(e){return e.tagName==="OL"},Aye=function(e){return e.tagName==="INPUT"},fye=function(e){return e.tagName==="HTML"},YO=function(e){return e.tagName==="svg"},hT=function(e){return e.tagName==="BODY"},XO=function(e){return e.tagName==="CANVAS"},jU=function(e){return e.tagName==="VIDEO"},SE=function(e){return e.tagName==="IMG"},JO=function(e){return e.tagName==="IFRAME"},qU=function(e){return e.tagName==="STYLE"},mye=function(e){return e.tagName==="SCRIPT"},n2=function(e){return e.tagName==="TEXTAREA"},a2=function(e){return e.tagName==="SELECT"},ZO=function(e){return e.tagName==="SLOT"},YU=function(e){return e.tagName.indexOf("-")>0},vye=(function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var n=this.counters[t];return n&&n.length?n[n.length-1]:1},e.prototype.getCounterValues=function(t){var n=this.counters[t];return n||[]},e.prototype.pop=function(t){var n=this;t.forEach(function(a){return n.counters[a].pop()})},e.prototype.parse=function(t){var n=this,a=t.counterIncrement,r=t.counterReset,s=!0;a!==null&&a.forEach(function(i){var c=n.counters[i.counter];c&&i.increment!==0&&(s=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=i.increment)});var o=[];return s&&r.forEach(function(i){var c=n.counters[i.counter];o.push(i.counter),c||(c=n.counters[i.counter]=[]),c.push(i.reset)}),o},e})(),XU={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},JU={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},hye={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},pye={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Lm=function(e,t,n,a,r,s){return e<t||e>n?R0(e,r,s.length>0):a.integers.reduce(function(o,i,c){for(;e>=i;)e-=i,o+=a.values[c];return o},"")+s},eH=function(e,t,n,a){var r="";do n||e--,r=a(e)+r,e/=t;while(e*t>=t);return r},zr=function(e,t,n,a,r){var s=n-t+1;return(e<0?"-":"")+(eH(Math.abs(e),s,a,function(o){return Wr(Math.floor(o%s)+t)})+r)},DA=function(e,t,n){n===void 0&&(n=". ");var a=t.length;return eH(Math.abs(e),a,!1,function(r){return t[Math.floor(r%a)]})+n},Wm=1,ld=2,ud=4,kp=8,cc=function(e,t,n,a,r,s){if(e<-9999||e>9999)return R0(e,4,r.length>0);var o=Math.abs(e),i=r;if(o===0)return t[0]+i;for(var c=0;o>0&&c<=4;c++){var A=o%10;A===0&&gs(s,Wm)&&i!==""?i=t[A]+i:A>1||A===1&&c===0||A===1&&c===1&&gs(s,ld)||A===1&&c===1&&gs(s,ud)&&e>100||A===1&&c>1&&gs(s,kp)?i=t[A]+(c>0?n[c-1]:"")+i:A===1&&c>0&&(i=n[c-1]+i),o=Math.floor(o/10)}return(e<0?a:"")+i},ZU="",eR="",tR="",bC="",R0=function(e,t,n){var a=n?". ":"",r=n?"":"",s=n?", ":"",o=n?" ":"";switch(t){case 0:return""+o;case 1:return""+o;case 2:return""+o;case 5:var i=zr(e,48,57,!0,a);return i.length<4?"0"+i:i;case 4:return DA(e,"",r);case 6:return Lm(e,1,3999,XU,3,a).toLowerCase();case 7:return Lm(e,1,3999,XU,3,a);case 8:return zr(e,945,969,!1,a);case 9:return zr(e,97,122,!1,a);case 10:return zr(e,65,90,!1,a);case 11:return zr(e,1632,1641,!0,a);case 12:case 49:return Lm(e,1,9999,JU,3,a);case 35:return Lm(e,1,9999,JU,3,a).toLowerCase();case 13:return zr(e,2534,2543,!0,a);case 14:case 30:return zr(e,6112,6121,!0,a);case 15:return DA(e,"",r);case 16:return DA(e,"",r);case 17:case 48:return cc(e,"",ZU,"",r,ld|ud|kp);case 47:return cc(e,"",eR,"",r,Wm|ld|ud|kp);case 42:return cc(e,"",ZU,"",r,ld|ud|kp);case 41:return cc(e,"",eR,"",r,Wm|ld|ud|kp);case 26:return cc(e,"","",tR,r,0);case 25:return cc(e,"","",tR,r,Wm|ld|ud);case 31:return cc(e,"","",bC,s,Wm|ld|ud);case 33:return cc(e,"","",bC,s,0);case 32:return cc(e,"","",bC,s,Wm|ld|ud);case 18:return zr(e,2406,2415,!0,a);case 20:return Lm(e,1,19999,pye,3,a);case 21:return zr(e,2790,2799,!0,a);case 22:return zr(e,2662,2671,!0,a);case 22:return Lm(e,1,10999,hye,3,a);case 23:return DA(e,"");case 24:return DA(e,"");case 27:return zr(e,3302,3311,!0,a);case 28:return DA(e,"",r);case 29:return DA(e,"",r);case 34:return zr(e,3792,3801,!0,a);case 37:return zr(e,6160,6169,!0,a);case 38:return zr(e,4160,4169,!0,a);case 39:return zr(e,2918,2927,!0,a);case 40:return zr(e,1776,1785,!0,a);case 43:return zr(e,3046,3055,!0,a);case 44:return zr(e,3174,3183,!0,a);case 45:return zr(e,3664,3673,!0,a);case 46:return zr(e,3872,3881,!0,a);case 3:default:return zr(e,48,57,!0,a)}},tH="data-html2canvas-ignore",nR=(function(){function e(t,n,a){if(this.context=t,this.options=a,this.scrolledElements=[],this.referenceElement=n,this.counters=new vye,this.quoteDepth=0,!n.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(n.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,n){var a=this,r=gye(t,n);if(!r.contentWindow)return Promise.reject("Unable to find iframe window");var s=t.defaultView.pageXOffset,o=t.defaultView.pageYOffset,i=r.contentWindow,c=i.document,A=wye(r).then(function(){return Uo(a,void 0,void 0,function(){var d,f;return ao(this,function(m){switch(m.label){case 0:return this.scrolledElements.forEach(Sye),i&&(i.scrollTo(n.left,n.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(i.scrollY!==n.top||i.scrollX!==n.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(i.scrollX-n.left,i.scrollY-n.top,0,0))),d=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:m.sent(),m.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,_ye(c)]:[3,4];case 3:m.sent(),m.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(c,f)}).then(function(){return r})]:[2,r]}})})});return c.open(),c.write(xye(document.doctype)+"<html></html>"),Cye(this.referenceElement.ownerDocument,s,o),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),A},e.prototype.createElementClone=function(t){if(wE(t,2))debugger;if(XO(t))return this.createCanvasClone(t);if(jU(t))return this.createVideoClone(t);if(qU(t))return this.createStyleClone(t);var n=t.cloneNode(!1);return SE(n)&&(SE(t)&&t.currentSrc&&t.currentSrc!==t.src&&(n.src=t.currentSrc,n.srcset=""),n.loading==="lazy"&&(n.loading="eager")),YU(n)?this.createCustomElementClone(n):n},e.prototype.createCustomElementClone=function(t){var n=document.createElement("html2canvascustomelement");return xC(t.style,n),n},e.prototype.createStyleClone=function(t){try{var n=t.sheet;if(n&&n.cssRules){var a=[].slice.call(n.cssRules,0).reduce(function(s,o){return o&&typeof o.cssText=="string"?s+o.cssText:s},""),r=t.cloneNode(!1);return r.textContent=a,r}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var n;if(this.options.inlineImages&&t.ownerDocument){var a=t.ownerDocument.createElement("img");try{return a.src=t.toDataURL(),a}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var r=t.cloneNode(!1);try{r.width=t.width,r.height=t.height;var s=t.getContext("2d"),o=r.getContext("2d");if(o)if(!this.options.allowTaint&&s)o.putImageData(s.getImageData(0,0,t.width,t.height),0,0);else{var i=(n=t.getContext("webgl2"))!==null&&n!==void 0?n:t.getContext("webgl");if(i){var c=i.getContextAttributes();c?.preserveDrawingBuffer===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}o.drawImage(t,0,0)}return r}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return r},e.prototype.createVideoClone=function(t){var n=t.ownerDocument.createElement("canvas");n.width=t.offsetWidth,n.height=t.offsetHeight;var a=n.getContext("2d");try{return a&&(a.drawImage(t,0,0,n.width,n.height),this.options.allowTaint||a.getImageData(0,0,n.width,n.height)),n}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var r=t.ownerDocument.createElement("canvas");return r.width=t.offsetWidth,r.height=t.offsetHeight,r},e.prototype.appendChildNode=function(t,n,a){(!Jm(n)||!mye(n)&&!n.hasAttribute(tH)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(n)))&&(!this.options.copyStyles||!Jm(n)||!qU(n))&&t.appendChild(this.cloneNode(n,a))},e.prototype.cloneChildNodes=function(t,n,a){for(var r=this,s=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;s;s=s.nextSibling)if(Jm(s)&&ZO(s)&&typeof s.assignedNodes=="function"){var o=s.assignedNodes();o.length&&o.forEach(function(i){return r.appendChildNode(n,i,a)})}else this.appendChildNode(n,s,a)},e.prototype.cloneNode=function(t,n){if(qO(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var a=t.ownerDocument.defaultView;if(a&&Jm(t)&&(CE(t)||s_(t))){var r=this.createElementClone(t);r.style.transitionProperty="none";var s=a.getComputedStyle(t),o=a.getComputedStyle(t,":before"),i=a.getComputedStyle(t,":after");this.referenceElement===t&&CE(r)&&(this.clonedReferenceElement=r),hT(r)&&kye(r);var c=this.counters.parse(new DU(this.context,s)),A=this.resolvePseudoContent(t,r,o,Yp.BEFORE);YU(t)&&(n=!0),jU(t)||this.cloneChildNodes(t,r,n),A&&r.insertBefore(A,r.firstChild);var d=this.resolvePseudoContent(t,r,i,Yp.AFTER);return d&&r.appendChild(d),this.counters.pop(c),(s&&(this.options.copyStyles||s_(t))&&!JO(t)||n)&&xC(s,r),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([r,t.scrollLeft,t.scrollTop]),(n2(t)||a2(t))&&(n2(r)||a2(r))&&(r.value=t.value),r}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,n,a,r){var s=this;if(a){var o=a.content,i=n.ownerDocument;if(!(!i||!o||o==="none"||o==="-moz-alt-content"||a.display==="none")){this.counters.parse(new DU(this.context,a));var c=new c1e(this.context,a),A=i.createElement("html2canvaspseudoelement");xC(a,A),c.content.forEach(function(f){if(f.type===0)A.appendChild(i.createTextNode(f.value));else if(f.type===22){var m=i.createElement("img");m.src=f.value,m.style.opacity="1",A.appendChild(m)}else if(f.type===18){if(f.name==="attr"){var v=f.values.filter(tr);v.length&&A.appendChild(i.createTextNode(t.getAttribute(v[0].value)||""))}else if(f.name==="counter"){var p=f.values.filter(Qv),g=p[0],y=p[1];if(g&&tr(g)){var w=s.counters.getCounterValue(g.value),b=y&&tr(y)?_E.parse(s.context,y.value):3;A.appendChild(i.createTextNode(R0(w,b,!1)))}}else if(f.name==="counters"){var x=f.values.filter(Qv),g=x[0],T=x[1],y=x[2];if(g&&tr(g)){var D=s.counters.getCounterValues(g.value),k=y&&tr(y)?_E.parse(s.context,y.value):3,S=T&&T.type===0?T.value:"",E=D.map(function(F){return R0(F,k,!1)}).join(S);A.appendChild(i.createTextNode(E))}}}else if(f.type===20)switch(f.value){case"open-quote":A.appendChild(i.createTextNode(PU(c.quotes,s.quoteDepth++,!0)));break;case"close-quote":A.appendChild(i.createTextNode(PU(c.quotes,--s.quoteDepth,!1)));break;default:A.appendChild(i.createTextNode(f.value))}}),A.className=EE+" "+BE;var d=r===Yp.BEFORE?" "+EE:" "+BE;return s_(n)?n.className.baseValue+=d:n.className+=d,A}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e})(),Yp;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(Yp||(Yp={}));var gye=function(e,t){var n=e.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=t.width.toString(),n.height=t.height.toString(),n.scrolling="no",n.setAttribute(tH,"true"),e.body.appendChild(n),n},yye=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},_ye=function(e){return Promise.all([].slice.call(e.images,0).map(yye))},wye=function(e){return new Promise(function(t,n){var a=e.contentWindow;if(!a)return n("No window assigned for iframe");var r=a.document;a.onload=e.onload=function(){a.onload=e.onload=null;var s=setInterval(function(){r.body.childNodes.length>0&&r.readyState==="complete"&&(clearInterval(s),t(e))},50)}})},bye=["all","d","content"],xC=function(e,t){for(var n=e.length-1;n>=0;n--){var a=e.item(n);bye.indexOf(a)===-1&&t.style.setProperty(a,e.getPropertyValue(a))}return t},xye=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},Cye=function(e,t,n){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||n!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,n)},Sye=function(e){var t=e[0],n=e[1],a=e[2];t.scrollLeft=n,t.scrollTop=a},Eye=":before",Bye=":after",EE="___html2canvas___pseudoelement_before",BE="___html2canvas___pseudoelement_after",aR=`{
    content: "" !important;
    display: none !important;
}`,kye=function(e){Tye(e,"."+EE+Eye+aR+`
         .`+BE+Bye+aR)},Tye=function(e,t){var n=e.ownerDocument;if(n){var a=n.createElement("style");a.textContent=t,e.appendChild(a)}},nH=(function(){function e(){}return e.getOrigin=function(t){var n=e._link;return n?(n.href=t,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e})(),Iye=(function(){function e(t,n){this.context=t,this._options=n,this._cache={}}return e.prototype.addImage=function(t){var n=Promise.resolve();return this.has(t)||(SC(t)||Uye(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),n},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return Uo(this,void 0,void 0,function(){var n,a,r,s,o=this;return ao(this,function(i){switch(i.label){case 0:return n=nH.isSameOrigin(t),a=!CC(t)&&this._options.useCORS===!0&&Ms.SUPPORT_CORS_IMAGES&&!n,r=!CC(t)&&!n&&!SC(t)&&typeof this._options.proxy=="string"&&Ms.SUPPORT_CORS_XHR&&!a,!n&&this._options.allowTaint===!1&&!CC(t)&&!SC(t)&&!r&&!a?[2]:(s=t,r?[4,this.proxy(s)]:[3,2]);case 1:s=i.sent(),i.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(c,A){var d=new Image;d.onload=function(){return c(d)},d.onerror=A,(Rye(s)||a)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return c(d)},500),o._options.imageTimeout>0&&setTimeout(function(){return A("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,i.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var n=this,a=this._options.proxy;if(!a)throw new Error("No proxy defined");var r=t.substring(0,256);return new Promise(function(s,o){var i=Ms.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(i==="text")s(c.response);else{var f=new FileReader;f.addEventListener("load",function(){return s(f.result)},!1),f.addEventListener("error",function(m){return o(m)},!1),f.readAsDataURL(c.response)}else o("Failed to proxy resource "+r+" with status code "+c.status)},c.onerror=o;var A=a.indexOf("?")>-1?"&":"?";if(c.open("GET",""+a+A+"url="+encodeURIComponent(t)+"&responseType="+i),i!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=i),n._options.imageTimeout){var d=n._options.imageTimeout;c.timeout=d,c.ontimeout=function(){return o("Timed out ("+d+"ms) proxying "+r)}}c.send()})},e})(),Fye=/^data:image\/svg\+xml/i,Pye=/^data:image\/.*;base64,/i,Dye=/^data:image\/.*/i,Uye=function(e){return Ms.SUPPORT_SVG_DRAWING||!Nye(e)},CC=function(e){return Dye.test(e)},Rye=function(e){return Pye.test(e)},SC=function(e){return e.substr(0,4)==="blob"},Nye=function(e){return e.substr(-3).toLowerCase()==="svg"||Fye.test(e)},un=(function(){function e(t,n){this.type=0,this.x=t,this.y=n}return e.prototype.add=function(t,n){return new e(this.x+t,this.y+n)},e})(),Mm=function(e,t,n){return new un(e.x+(t.x-e.x)*n,e.y+(t.y-e.y)*n)},_y=(function(){function e(t,n,a,r){this.type=1,this.start=t,this.startControl=n,this.endControl=a,this.end=r}return e.prototype.subdivide=function(t,n){var a=Mm(this.start,this.startControl,t),r=Mm(this.startControl,this.endControl,t),s=Mm(this.endControl,this.end,t),o=Mm(a,r,t),i=Mm(r,s,t),c=Mm(o,i,t);return n?new e(this.start,a,o,c):new e(c,i,s,this.end)},e.prototype.add=function(t,n){return new e(this.start.add(t,n),this.startControl.add(t,n),this.endControl.add(t,n),this.end.add(t,n))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e})(),Wi=function(e){return e.type===1},Vye=(function(){function e(t){var n=t.styles,a=t.bounds,r=Ep(n.borderTopLeftRadius,a.width,a.height),s=r[0],o=r[1],i=Ep(n.borderTopRightRadius,a.width,a.height),c=i[0],A=i[1],d=Ep(n.borderBottomRightRadius,a.width,a.height),f=d[0],m=d[1],v=Ep(n.borderBottomLeftRadius,a.width,a.height),p=v[0],g=v[1],y=[];y.push((s+c)/a.width),y.push((p+f)/a.width),y.push((o+g)/a.height),y.push((A+m)/a.height);var w=Math.max.apply(Math,y);w>1&&(s/=w,o/=w,c/=w,A/=w,f/=w,m/=w,p/=w,g/=w);var b=a.width-c,x=a.height-m,T=a.width-f,D=a.height-g,k=n.borderTopWidth,S=n.borderRightWidth,E=n.borderBottomWidth,C=n.borderLeftWidth,U=Ar(n.paddingTop,t.bounds.width),F=Ar(n.paddingRight,t.bounds.width),L=Ar(n.paddingBottom,t.bounds.width),H=Ar(n.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||o>0?Cr(a.left+C/3,a.top+k/3,s-C/3,o-k/3,za.TOP_LEFT):new un(a.left+C/3,a.top+k/3),this.topRightBorderDoubleOuterBox=s>0||o>0?Cr(a.left+b,a.top+k/3,c-S/3,A-k/3,za.TOP_RIGHT):new un(a.left+a.width-S/3,a.top+k/3),this.bottomRightBorderDoubleOuterBox=f>0||m>0?Cr(a.left+T,a.top+x,f-S/3,m-E/3,za.BOTTOM_RIGHT):new un(a.left+a.width-S/3,a.top+a.height-E/3),this.bottomLeftBorderDoubleOuterBox=p>0||g>0?Cr(a.left+C/3,a.top+D,p-C/3,g-E/3,za.BOTTOM_LEFT):new un(a.left+C/3,a.top+a.height-E/3),this.topLeftBorderDoubleInnerBox=s>0||o>0?Cr(a.left+C*2/3,a.top+k*2/3,s-C*2/3,o-k*2/3,za.TOP_LEFT):new un(a.left+C*2/3,a.top+k*2/3),this.topRightBorderDoubleInnerBox=s>0||o>0?Cr(a.left+b,a.top+k*2/3,c-S*2/3,A-k*2/3,za.TOP_RIGHT):new un(a.left+a.width-S*2/3,a.top+k*2/3),this.bottomRightBorderDoubleInnerBox=f>0||m>0?Cr(a.left+T,a.top+x,f-S*2/3,m-E*2/3,za.BOTTOM_RIGHT):new un(a.left+a.width-S*2/3,a.top+a.height-E*2/3),this.bottomLeftBorderDoubleInnerBox=p>0||g>0?Cr(a.left+C*2/3,a.top+D,p-C*2/3,g-E*2/3,za.BOTTOM_LEFT):new un(a.left+C*2/3,a.top+a.height-E*2/3),this.topLeftBorderStroke=s>0||o>0?Cr(a.left+C/2,a.top+k/2,s-C/2,o-k/2,za.TOP_LEFT):new un(a.left+C/2,a.top+k/2),this.topRightBorderStroke=s>0||o>0?Cr(a.left+b,a.top+k/2,c-S/2,A-k/2,za.TOP_RIGHT):new un(a.left+a.width-S/2,a.top+k/2),this.bottomRightBorderStroke=f>0||m>0?Cr(a.left+T,a.top+x,f-S/2,m-E/2,za.BOTTOM_RIGHT):new un(a.left+a.width-S/2,a.top+a.height-E/2),this.bottomLeftBorderStroke=p>0||g>0?Cr(a.left+C/2,a.top+D,p-C/2,g-E/2,za.BOTTOM_LEFT):new un(a.left+C/2,a.top+a.height-E/2),this.topLeftBorderBox=s>0||o>0?Cr(a.left,a.top,s,o,za.TOP_LEFT):new un(a.left,a.top),this.topRightBorderBox=c>0||A>0?Cr(a.left+b,a.top,c,A,za.TOP_RIGHT):new un(a.left+a.width,a.top),this.bottomRightBorderBox=f>0||m>0?Cr(a.left+T,a.top+x,f,m,za.BOTTOM_RIGHT):new un(a.left+a.width,a.top+a.height),this.bottomLeftBorderBox=p>0||g>0?Cr(a.left,a.top+D,p,g,za.BOTTOM_LEFT):new un(a.left,a.top+a.height),this.topLeftPaddingBox=s>0||o>0?Cr(a.left+C,a.top+k,Math.max(0,s-C),Math.max(0,o-k),za.TOP_LEFT):new un(a.left+C,a.top+k),this.topRightPaddingBox=c>0||A>0?Cr(a.left+Math.min(b,a.width-S),a.top+k,b>a.width+S?0:Math.max(0,c-S),Math.max(0,A-k),za.TOP_RIGHT):new un(a.left+a.width-S,a.top+k),this.bottomRightPaddingBox=f>0||m>0?Cr(a.left+Math.min(T,a.width-C),a.top+Math.min(x,a.height-E),Math.max(0,f-S),Math.max(0,m-E),za.BOTTOM_RIGHT):new un(a.left+a.width-S,a.top+a.height-E),this.bottomLeftPaddingBox=p>0||g>0?Cr(a.left+C,a.top+Math.min(D,a.height-E),Math.max(0,p-C),Math.max(0,g-E),za.BOTTOM_LEFT):new un(a.left+C,a.top+a.height-E),this.topLeftContentBox=s>0||o>0?Cr(a.left+C+H,a.top+k+U,Math.max(0,s-(C+H)),Math.max(0,o-(k+U)),za.TOP_LEFT):new un(a.left+C+H,a.top+k+U),this.topRightContentBox=c>0||A>0?Cr(a.left+Math.min(b,a.width+C+H),a.top+k+U,b>a.width+C+H?0:c-C+H,A-(k+U),za.TOP_RIGHT):new un(a.left+a.width-(S+F),a.top+k+U),this.bottomRightContentBox=f>0||m>0?Cr(a.left+Math.min(T,a.width-(C+H)),a.top+Math.min(x,a.height+k+U),Math.max(0,f-(S+F)),m-(E+L),za.BOTTOM_RIGHT):new un(a.left+a.width-(S+F),a.top+a.height-(E+L)),this.bottomLeftContentBox=p>0||g>0?Cr(a.left+C+H,a.top+D,Math.max(0,p-(C+H)),g-(E+L),za.BOTTOM_LEFT):new un(a.left+C+H,a.top+a.height-(E+L))}return e})(),za;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(za||(za={}));var Cr=function(e,t,n,a,r){var s=4*((Math.sqrt(2)-1)/3),o=n*s,i=a*s,c=e+n,A=t+a;switch(r){case za.TOP_LEFT:return new _y(new un(e,A),new un(e,A-i),new un(c-o,t),new un(c,t));case za.TOP_RIGHT:return new _y(new un(e,t),new un(e+o,t),new un(c,A-i),new un(c,A));case za.BOTTOM_RIGHT:return new _y(new un(c,t),new un(c,t+i),new un(e+o,A),new un(e,A));case za.BOTTOM_LEFT:default:return new _y(new un(c,A),new un(c-o,A),new un(e,t+i),new un(e,t))}},r2=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},Lye=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},s2=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},Mye=(function(){function e(t,n,a){this.offsetX=t,this.offsetY=n,this.matrix=a,this.type=0,this.target=6}return e})(),wy=(function(){function e(t,n){this.path=t,this.target=n,this.type=1}return e})(),Oye=(function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e})(),Hye=function(e){return e.type===0},aH=function(e){return e.type===1},$ye=function(e){return e.type===2},rR=function(e,t){return e.length===t.length?e.some(function(n,a){return n===t[a]}):!1},Qye=function(e,t,n,a,r){return e.map(function(s,o){switch(o){case 0:return s.add(t,n);case 1:return s.add(t+a,n);case 2:return s.add(t+a,n+r);case 3:return s.add(t,n+r)}return s})},rH=(function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e})(),sH=(function(){function e(t,n){if(this.container=t,this.parent=n,this.effects=[],this.curves=new Vye(this.container),this.container.styles.opacity<1&&this.effects.push(new Oye(this.container.styles.opacity)),this.container.styles.transform!==null){var a=this.container.bounds.left+this.container.styles.transformOrigin[0].number,r=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new Mye(a,r,s))}if(this.container.styles.overflowX!==0){var o=r2(this.curves),i=s2(this.curves);rR(o,i)?this.effects.push(new wy(o,6)):(this.effects.push(new wy(o,2)),this.effects.push(new wy(i,4)))}}return e.prototype.getEffects=function(t){for(var n=[2,3].indexOf(this.container.styles.position)===-1,a=this.parent,r=this.effects.slice(0);a;){var s=a.effects.filter(function(c){return!aH(c)});if(n||a.container.styles.position!==0||!a.parent){if(r.unshift.apply(r,s),n=[2,3].indexOf(a.container.styles.position)===-1,a.container.styles.overflowX!==0){var o=r2(a.curves),i=s2(a.curves);rR(o,i)||r.unshift(new wy(i,6))}}else r.unshift.apply(r,s);a=a.parent}return r.filter(function(c){return gs(c.target,t)})},e})(),kE=function(e,t,n,a){e.container.elements.forEach(function(r){var s=gs(r.flags,4),o=gs(r.flags,2),i=new sH(r,e);gs(r.styles.display,2048)&&a.push(i);var c=gs(r.flags,8)?[]:a;if(s||o){var A=s||r.styles.isPositioned()?n:t,d=new rH(i);if(r.styles.isPositioned()||r.styles.opacity<1||r.styles.isTransformed()){var f=r.styles.zIndex.order;if(f<0){var m=0;A.negativeZIndex.some(function(p,g){return f>p.element.container.styles.zIndex.order?(m=g,!1):m>0}),A.negativeZIndex.splice(m,0,d)}else if(f>0){var v=0;A.positiveZIndex.some(function(p,g){return f>=p.element.container.styles.zIndex.order?(v=g+1,!1):v>0}),A.positiveZIndex.splice(v,0,d)}else A.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else r.styles.isFloating()?A.nonPositionedFloats.push(d):A.nonPositionedInlineLevel.push(d);kE(i,d,s?d:n,c)}else r.styles.isInlineLevel()?t.inlineLevel.push(i):t.nonInlineLevel.push(i),kE(i,t,n,c);gs(r.flags,8)&&oH(r,c)})},oH=function(e,t){for(var n=e instanceof xE?e.start:1,a=e instanceof xE?e.reversed:!1,r=0;r<t.length;r++){var s=t[r];s.container instanceof QO&&typeof s.container.value=="number"&&s.container.value!==0&&(n=s.container.value),s.listValue=R0(n,s.container.styles.listStyleType,!0),n+=a?-1:1}},Gye=function(e){var t=new sH(e,null),n=new rH(t),a=[];return kE(t,n,n,a),oH(t.container,a),n},sR=function(e,t){switch(t){case 0:return Xi(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return Xi(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return Xi(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return Xi(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},zye=function(e,t){switch(t){case 0:return Xi(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return Xi(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return Xi(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return Xi(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},Kye=function(e,t){switch(t){case 0:return Xi(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return Xi(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return Xi(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return Xi(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},Wye=function(e,t){switch(t){case 0:return by(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return by(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return by(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return by(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},by=function(e,t){var n=[];return Wi(e)?n.push(e.subdivide(.5,!1)):n.push(e),Wi(t)?n.push(t.subdivide(.5,!0)):n.push(t),n},Xi=function(e,t,n,a){var r=[];return Wi(e)?r.push(e.subdivide(.5,!1)):r.push(e),Wi(n)?r.push(n.subdivide(.5,!0)):r.push(n),Wi(a)?r.push(a.subdivide(.5,!0).reverse()):r.push(a),Wi(t)?r.push(t.subdivide(.5,!1).reverse()):r.push(t),r},iH=function(e){var t=e.bounds,n=e.styles;return t.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},o2=function(e){var t=e.styles,n=e.bounds,a=Ar(t.paddingLeft,n.width),r=Ar(t.paddingRight,n.width),s=Ar(t.paddingTop,n.width),o=Ar(t.paddingBottom,n.width);return n.add(a+t.borderLeftWidth,s+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+a+r),-(t.borderTopWidth+t.borderBottomWidth+s+o))},jye=function(e,t){return e===0?t.bounds:e===2?o2(t):iH(t)},qye=function(e,t){return e===0?t.bounds:e===2?o2(t):iH(t)},EC=function(e,t,n){var a=jye(jm(e.styles.backgroundOrigin,t),e),r=qye(jm(e.styles.backgroundClip,t),e),s=Yye(jm(e.styles.backgroundSize,t),n,a),o=s[0],i=s[1],c=Ep(jm(e.styles.backgroundPosition,t),a.width-o,a.height-i),A=Xye(jm(e.styles.backgroundRepeat,t),c,s,a,r),d=Math.round(a.left+c[0]),f=Math.round(a.top+c[1]);return[A,d,f,o,i]},Om=function(e){return tr(e)&&e.value===gv.AUTO},xy=function(e){return typeof e=="number"},Yye=function(e,t,n){var a=t[0],r=t[1],s=t[2],o=e[0],i=e[1];if(!o)return[0,0];if(ss(o)&&i&&ss(i))return[Ar(o,n.width),Ar(i,n.height)];var c=xy(s);if(tr(o)&&(o.value===gv.CONTAIN||o.value===gv.COVER)){if(xy(s)){var A=n.width/n.height;return A<s!=(o.value===gv.COVER)?[n.width,n.width/s]:[n.height*s,n.height]}return[n.width,n.height]}var d=xy(a),f=xy(r),m=d||f;if(Om(o)&&(!i||Om(i))){if(d&&f)return[a,r];if(!c&&!m)return[n.width,n.height];if(m&&c){var v=d?a:r*s,p=f?r:a/s;return[v,p]}var g=d?a:n.width,y=f?r:n.height;return[g,y]}if(c){var w=0,b=0;return ss(o)?w=Ar(o,n.width):ss(i)&&(b=Ar(i,n.height)),Om(o)?w=b*s:(!i||Om(i))&&(b=w/s),[w,b]}var x=null,T=null;if(ss(o)?x=Ar(o,n.width):i&&ss(i)&&(T=Ar(i,n.height)),x!==null&&(!i||Om(i))&&(T=d&&f?x/a*r:n.height),T!==null&&Om(o)&&(x=d&&f?T/r*a:n.width),x!==null&&T!==null)return[x,T];throw new Error("Unable to calculate background-size for element")},jm=function(e,t){var n=e[t];return typeof n>"u"?e[0]:n},Xye=function(e,t,n,a,r){var s=t[0],o=t[1],i=n[0],c=n[1];switch(e){case 2:return[new un(Math.round(a.left),Math.round(a.top+o)),new un(Math.round(a.left+a.width),Math.round(a.top+o)),new un(Math.round(a.left+a.width),Math.round(c+a.top+o)),new un(Math.round(a.left),Math.round(c+a.top+o))];case 3:return[new un(Math.round(a.left+s),Math.round(a.top)),new un(Math.round(a.left+s+i),Math.round(a.top)),new un(Math.round(a.left+s+i),Math.round(a.height+a.top)),new un(Math.round(a.left+s),Math.round(a.height+a.top))];case 1:return[new un(Math.round(a.left+s),Math.round(a.top+o)),new un(Math.round(a.left+s+i),Math.round(a.top+o)),new un(Math.round(a.left+s+i),Math.round(a.top+o+c)),new un(Math.round(a.left+s),Math.round(a.top+o+c))];default:return[new un(Math.round(r.left),Math.round(r.top)),new un(Math.round(r.left+r.width),Math.round(r.top)),new un(Math.round(r.left+r.width),Math.round(r.height+r.top)),new un(Math.round(r.left),Math.round(r.height+r.top))]}},Jye="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",oR="Hidden Text",Zye=(function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,n){var a=this._document.createElement("div"),r=this._document.createElement("img"),s=this._document.createElement("span"),o=this._document.body;a.style.visibility="hidden",a.style.fontFamily=t,a.style.fontSize=n,a.style.margin="0",a.style.padding="0",a.style.whiteSpace="nowrap",o.appendChild(a),r.src=Jye,r.width=1,r.height=1,r.style.margin="0",r.style.padding="0",r.style.verticalAlign="baseline",s.style.fontFamily=t,s.style.fontSize=n,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(oR)),a.appendChild(s),a.appendChild(r);var i=r.offsetTop-s.offsetTop+2;a.removeChild(s),a.appendChild(this._document.createTextNode(oR)),a.style.lineHeight="normal",r.style.verticalAlign="super";var c=r.offsetTop-a.offsetTop+2;return o.removeChild(a),{baseline:i,middle:c}},e.prototype.getMetrics=function(t,n){var a=t+" "+n;return typeof this._data[a]>"u"&&(this._data[a]=this.parseMetrics(t,n)),this._data[a]},e})(),lH=(function(){function e(t,n){this.context=t,this.options=n}return e})(),e_e=1e4,t_e=(function(e){au(t,e);function t(n,a){var r=e.call(this,n,a)||this;return r._activeEffects=[],r.canvas=a.canvas?a.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),a.canvas||(r.canvas.width=Math.floor(a.width*a.scale),r.canvas.height=Math.floor(a.height*a.scale),r.canvas.style.width=a.width+"px",r.canvas.style.height=a.height+"px"),r.fontMetrics=new Zye(document),r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-a.x,-a.y),r.ctx.textBaseline="bottom",r._activeEffects=[],r.context.logger.debug("Canvas renderer initialized ("+a.width+"x"+a.height+") with scale "+a.scale),r}return t.prototype.applyEffects=function(n){for(var a=this;this._activeEffects.length;)this.popEffect();n.forEach(function(r){return a.applyEffect(r)})},t.prototype.applyEffect=function(n){this.ctx.save(),$ye(n)&&(this.ctx.globalAlpha=n.opacity),Hye(n)&&(this.ctx.translate(n.offsetX,n.offsetY),this.ctx.transform(n.matrix[0],n.matrix[1],n.matrix[2],n.matrix[3],n.matrix[4],n.matrix[5]),this.ctx.translate(-n.offsetX,-n.offsetY)),aH(n)&&(this.path(n.path),this.ctx.clip()),this._activeEffects.push(n)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(n){return Uo(this,void 0,void 0,function(){var a;return ao(this,function(r){switch(r.label){case 0:return a=n.element.container.styles,a.isVisible()?[4,this.renderStackContent(n)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(n){return Uo(this,void 0,void 0,function(){return ao(this,function(a){switch(a.label){case 0:if(gs(n.container.flags,16))debugger;return n.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(n)]:[3,3];case 1:return a.sent(),[4,this.renderNodeContent(n)];case 2:a.sent(),a.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(n,a,r){var s=this;if(a===0)this.ctx.fillText(n.text,n.bounds.left,n.bounds.top+r);else{var o=mT(n.text);o.reduce(function(i,c){return s.ctx.fillText(c,i,n.bounds.top+r),i+s.ctx.measureText(c).width},n.bounds.left)}},t.prototype.createFontStyle=function(n){var a=n.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),r=o_e(n.fontFamily).join(", "),s=Sg(n.fontSize)?""+n.fontSize.number+n.fontSize.unit:n.fontSize.number+"px";return[[n.fontStyle,a,n.fontWeight,s,r].join(" "),r,s]},t.prototype.renderTextNode=function(n,a){return Uo(this,void 0,void 0,function(){var r,s,o,i,c,A,d,f,m=this;return ao(this,function(v){return r=this.createFontStyle(a),s=r[0],o=r[1],i=r[2],this.ctx.font=s,this.ctx.direction=a.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(o,i),A=c.baseline,d=c.middle,f=a.paintOrder,n.textBounds.forEach(function(p){f.forEach(function(g){switch(g){case 0:m.ctx.fillStyle=ks(a.color),m.renderTextWithLetterSpacing(p,a.letterSpacing,A);var y=a.textShadow;y.length&&p.text.trim().length&&(y.slice(0).reverse().forEach(function(w){m.ctx.shadowColor=ks(w.color),m.ctx.shadowOffsetX=w.offsetX.number*m.options.scale,m.ctx.shadowOffsetY=w.offsetY.number*m.options.scale,m.ctx.shadowBlur=w.blur.number,m.renderTextWithLetterSpacing(p,a.letterSpacing,A)}),m.ctx.shadowColor="",m.ctx.shadowOffsetX=0,m.ctx.shadowOffsetY=0,m.ctx.shadowBlur=0),a.textDecorationLine.length&&(m.ctx.fillStyle=ks(a.textDecorationColor||a.color),a.textDecorationLine.forEach(function(w){switch(w){case 1:m.ctx.fillRect(p.bounds.left,Math.round(p.bounds.top+A),p.bounds.width,1);break;case 2:m.ctx.fillRect(p.bounds.left,Math.round(p.bounds.top),p.bounds.width,1);break;case 3:m.ctx.fillRect(p.bounds.left,Math.ceil(p.bounds.top+d),p.bounds.width,1);break}}));break;case 1:a.webkitTextStrokeWidth&&p.text.trim().length&&(m.ctx.strokeStyle=ks(a.webkitTextStrokeColor),m.ctx.lineWidth=a.webkitTextStrokeWidth,m.ctx.lineJoin=window.chrome?"miter":"round",m.ctx.strokeText(p.text,p.bounds.left,p.bounds.top+A)),m.ctx.strokeStyle="",m.ctx.lineWidth=0,m.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(n,a,r){if(r&&n.intrinsicWidth>0&&n.intrinsicHeight>0){var s=o2(n),o=s2(a);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(r,0,0,n.intrinsicWidth,n.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(n){return Uo(this,void 0,void 0,function(){var a,r,s,o,i,c,b,b,A,d,f,m,T,v,p,D,g,y,w,b,x,T,D;return ao(this,function(k){switch(k.label){case 0:this.applyEffects(n.getEffects(4)),a=n.container,r=n.curves,s=a.styles,o=0,i=a.textNodes,k.label=1;case 1:return o<i.length?(c=i[o],[4,this.renderTextNode(c,s)]):[3,4];case 2:k.sent(),k.label=3;case 3:return o++,[3,1];case 4:if(!(a instanceof OO))return[3,8];k.label=5;case 5:return k.trys.push([5,7,,8]),[4,this.context.cache.match(a.src)];case 6:return b=k.sent(),this.renderReplacedElement(a,r,b),[3,8];case 7:return k.sent(),this.context.logger.error("Error loading image "+a.src),[3,8];case 8:if(a instanceof HO&&this.renderReplacedElement(a,r,a.canvas),!(a instanceof $O))return[3,12];k.label=9;case 9:return k.trys.push([9,11,,12]),[4,this.context.cache.match(a.svg)];case 10:return b=k.sent(),this.renderReplacedElement(a,r,b),[3,12];case 11:return k.sent(),this.context.logger.error("Error loading svg "+a.svg.substring(0,255)),[3,12];case 12:return a instanceof KO&&a.tree?(A=new t(this.context,{scale:this.options.scale,backgroundColor:a.backgroundColor,x:0,y:0,width:a.width,height:a.height}),[4,A.render(a.tree)]):[3,14];case 13:d=k.sent(),a.width&&a.height&&this.ctx.drawImage(d,0,0,a.width,a.height,a.bounds.left,a.bounds.top,a.bounds.width,a.bounds.height),k.label=14;case 14:if(a instanceof vT&&(f=Math.min(a.bounds.width,a.bounds.height),a.type===e2?a.checked&&(this.ctx.save(),this.path([new un(a.bounds.left+f*.39363,a.bounds.top+f*.79),new un(a.bounds.left+f*.16,a.bounds.top+f*.5549),new un(a.bounds.left+f*.27347,a.bounds.top+f*.44071),new un(a.bounds.left+f*.39694,a.bounds.top+f*.5649),new un(a.bounds.left+f*.72983,a.bounds.top+f*.23),new un(a.bounds.left+f*.84,a.bounds.top+f*.34085),new un(a.bounds.left+f*.39363,a.bounds.top+f*.79)]),this.ctx.fillStyle=ks(WU),this.ctx.fill(),this.ctx.restore()):a.type===t2&&a.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(a.bounds.left+f/2,a.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=ks(WU),this.ctx.fill(),this.ctx.restore())),n_e(a)&&a.value.length){switch(m=this.createFontStyle(s),T=m[0],v=m[1],p=this.fontMetrics.getMetrics(T,v).baseline,this.ctx.font=T,this.ctx.fillStyle=ks(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=r_e(a.styles.textAlign),D=o2(a),g=0,a.styles.textAlign){case 1:g+=D.width/2;break;case 2:g+=D.width;break}y=D.add(g,0,0,-D.height/2+1),this.ctx.save(),this.path([new un(D.left,D.top),new un(D.left+D.width,D.top),new un(D.left+D.width,D.top+D.height),new un(D.left,D.top+D.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new qp(a.value,y),s.letterSpacing,p),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!gs(a.styles.display,2048))return[3,20];if(a.styles.listStyleImage===null)return[3,19];if(w=a.styles.listStyleImage,w.type!==0)return[3,18];b=void 0,x=w.url,k.label=15;case 15:return k.trys.push([15,17,,18]),[4,this.context.cache.match(x)];case 16:return b=k.sent(),this.ctx.drawImage(b,a.bounds.left-(b.width+10),a.bounds.top),[3,18];case 17:return k.sent(),this.context.logger.error("Error loading list-style-image "+x),[3,18];case 18:return[3,20];case 19:n.listValue&&a.styles.listStyleType!==-1&&(T=this.createFontStyle(s)[0],this.ctx.font=T,this.ctx.fillStyle=ks(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",D=new Uc(a.bounds.left,a.bounds.top+Ar(a.styles.paddingTop,a.bounds.width),a.bounds.width,IU(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new qp(n.listValue,D),s.letterSpacing,IU(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),k.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(n){return Uo(this,void 0,void 0,function(){var a,r,w,s,o,w,i,c,w,A,d,w,f,m,w,v,p,w,g,y,w;return ao(this,function(b){switch(b.label){case 0:if(gs(n.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(n.element)];case 1:b.sent(),a=0,r=n.negativeZIndex,b.label=2;case 2:return a<r.length?(w=r[a],[4,this.renderStack(w)]):[3,5];case 3:b.sent(),b.label=4;case 4:return a++,[3,2];case 5:return[4,this.renderNodeContent(n.element)];case 6:b.sent(),s=0,o=n.nonInlineLevel,b.label=7;case 7:return s<o.length?(w=o[s],[4,this.renderNode(w)]):[3,10];case 8:b.sent(),b.label=9;case 9:return s++,[3,7];case 10:i=0,c=n.nonPositionedFloats,b.label=11;case 11:return i<c.length?(w=c[i],[4,this.renderStack(w)]):[3,14];case 12:b.sent(),b.label=13;case 13:return i++,[3,11];case 14:A=0,d=n.nonPositionedInlineLevel,b.label=15;case 15:return A<d.length?(w=d[A],[4,this.renderStack(w)]):[3,18];case 16:b.sent(),b.label=17;case 17:return A++,[3,15];case 18:f=0,m=n.inlineLevel,b.label=19;case 19:return f<m.length?(w=m[f],[4,this.renderNode(w)]):[3,22];case 20:b.sent(),b.label=21;case 21:return f++,[3,19];case 22:v=0,p=n.zeroOrAutoZIndexOrTransformedOrOpacity,b.label=23;case 23:return v<p.length?(w=p[v],[4,this.renderStack(w)]):[3,26];case 24:b.sent(),b.label=25;case 25:return v++,[3,23];case 26:g=0,y=n.positiveZIndex,b.label=27;case 27:return g<y.length?(w=y[g],[4,this.renderStack(w)]):[3,30];case 28:b.sent(),b.label=29;case 29:return g++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(n){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(n.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(n){this.ctx.beginPath(),this.formatPath(n),this.ctx.closePath()},t.prototype.formatPath=function(n){var a=this;n.forEach(function(r,s){var o=Wi(r)?r.start:r;s===0?a.ctx.moveTo(o.x,o.y):a.ctx.lineTo(o.x,o.y),Wi(r)&&a.ctx.bezierCurveTo(r.startControl.x,r.startControl.y,r.endControl.x,r.endControl.y,r.end.x,r.end.y)})},t.prototype.renderRepeat=function(n,a,r,s){this.path(n),this.ctx.fillStyle=a,this.ctx.translate(r,s),this.ctx.fill(),this.ctx.translate(-r,-s)},t.prototype.resizeImage=function(n,a,r){var s;if(n.width===a&&n.height===r)return n;var o=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,i=o.createElement("canvas");i.width=Math.max(1,a),i.height=Math.max(1,r);var c=i.getContext("2d");return c.drawImage(n,0,0,n.width,n.height,0,0,a,r),i},t.prototype.renderBackgroundImage=function(n){return Uo(this,void 0,void 0,function(){var a,r,s,o,i,c;return ao(this,function(A){switch(A.label){case 0:a=n.styles.backgroundImage.length-1,r=function(d){var f,m,v,U,Q,X,H,ue,E,p,U,Q,X,H,ue,g,y,w,b,x,T,D,k,S,E,C,U,F,L,H,ue,ie,Q,X,le,Z,re,q,P,G,J,M;return ao(this,function(te){switch(te.label){case 0:if(d.type!==0)return[3,5];f=void 0,m=d.url,te.label=1;case 1:return te.trys.push([1,3,,4]),[4,s.context.cache.match(m)];case 2:return f=te.sent(),[3,4];case 3:return te.sent(),s.context.logger.error("Error loading background-image "+m),[3,4];case 4:return f&&(v=EC(n,a,[f.width,f.height,f.width/f.height]),U=v[0],Q=v[1],X=v[2],H=v[3],ue=v[4],E=s.ctx.createPattern(s.resizeImage(f,H,ue),"repeat"),s.renderRepeat(U,E,Q,X)),[3,6];case 5:H0e(d)?(p=EC(n,a,[null,null,null]),U=p[0],Q=p[1],X=p[2],H=p[3],ue=p[4],g=N0e(d.angle,H,ue),y=g[0],w=g[1],b=g[2],x=g[3],T=g[4],D=document.createElement("canvas"),D.width=H,D.height=ue,k=D.getContext("2d"),S=k.createLinearGradient(w,x,b,T),kU(d.stops,y).forEach(function(Y){return S.addColorStop(Y.stop,ks(Y.color))}),k.fillStyle=S,k.fillRect(0,0,H,ue),H>0&&ue>0&&(E=s.ctx.createPattern(D,"repeat"),s.renderRepeat(U,E,Q,X))):$0e(d)&&(C=EC(n,a,[null,null,null]),U=C[0],F=C[1],L=C[2],H=C[3],ue=C[4],ie=d.position.length===0?[dT]:d.position,Q=Ar(ie[0],H),X=Ar(ie[ie.length-1],ue),le=V0e(d,Q,X,H,ue),Z=le[0],re=le[1],Z>0&&re>0&&(q=s.ctx.createRadialGradient(F+Q,L+X,0,F+Q,L+X,Z),kU(d.stops,Z*2).forEach(function(Y){return q.addColorStop(Y.stop,ks(Y.color))}),s.path(U),s.ctx.fillStyle=q,Z!==re?(P=n.bounds.left+.5*n.bounds.width,G=n.bounds.top+.5*n.bounds.height,J=re/Z,M=1/J,s.ctx.save(),s.ctx.translate(P,G),s.ctx.transform(1,0,0,J,0,0),s.ctx.translate(-P,-G),s.ctx.fillRect(F,M*(L-G)+G,H,ue*M),s.ctx.restore()):s.ctx.fill())),te.label=6;case 6:return a--,[2]}})},s=this,o=0,i=n.styles.backgroundImage.slice(0).reverse(),A.label=1;case 1:return o<i.length?(c=i[o],[5,r(c)]):[3,4];case 2:A.sent(),A.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(n,a,r){return Uo(this,void 0,void 0,function(){return ao(this,function(s){return this.path(sR(r,a)),this.ctx.fillStyle=ks(n),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(n,a,r,s){return Uo(this,void 0,void 0,function(){var o,i;return ao(this,function(c){switch(c.label){case 0:return a<3?[4,this.renderSolidBorder(n,r,s)]:[3,2];case 1:return c.sent(),[2];case 2:return o=zye(s,r),this.path(o),this.ctx.fillStyle=ks(n),this.ctx.fill(),i=Kye(s,r),this.path(i),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(n){return Uo(this,void 0,void 0,function(){var a,r,s,o,i,c,A,d,f=this;return ao(this,function(m){switch(m.label){case 0:return this.applyEffects(n.getEffects(2)),a=n.container.styles,r=!Pd(a.backgroundColor)||a.backgroundImage.length,s=[{style:a.borderTopStyle,color:a.borderTopColor,width:a.borderTopWidth},{style:a.borderRightStyle,color:a.borderRightColor,width:a.borderRightWidth},{style:a.borderBottomStyle,color:a.borderBottomColor,width:a.borderBottomWidth},{style:a.borderLeftStyle,color:a.borderLeftColor,width:a.borderLeftWidth}],o=a_e(jm(a.backgroundClip,0),n.curves),r||a.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),Pd(a.backgroundColor)||(this.ctx.fillStyle=ks(a.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(n.container)]):[3,2];case 1:m.sent(),this.ctx.restore(),a.boxShadow.slice(0).reverse().forEach(function(v){f.ctx.save();var p=r2(n.curves),g=v.inset?0:e_e,y=Qye(p,-g+(v.inset?1:-1)*v.spread.number,(v.inset?1:-1)*v.spread.number,v.spread.number*(v.inset?-2:2),v.spread.number*(v.inset?-2:2));v.inset?(f.path(p),f.ctx.clip(),f.mask(y)):(f.mask(p),f.ctx.clip(),f.path(y)),f.ctx.shadowOffsetX=v.offsetX.number+g,f.ctx.shadowOffsetY=v.offsetY.number,f.ctx.shadowColor=ks(v.color),f.ctx.shadowBlur=v.blur.number,f.ctx.fillStyle=v.inset?ks(v.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),m.label=2;case 2:i=0,c=0,A=s,m.label=3;case 3:return c<A.length?(d=A[c],d.style!==0&&!Pd(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,i,n.curves,2)]:[3,11]):[3,13];case 4:return m.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,i,n.curves,3)];case 6:return m.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,i,n.curves)];case 8:return m.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,i,n.curves)];case 10:m.sent(),m.label=11;case 11:i++,m.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(n,a,r,s,o){return Uo(this,void 0,void 0,function(){var i,c,A,d,f,m,v,p,g,y,w,b,x,T,D,k,D,k;return ao(this,function(S){return this.ctx.save(),i=Wye(s,r),c=sR(s,r),o===2&&(this.path(c),this.ctx.clip()),Wi(c[0])?(A=c[0].start.x,d=c[0].start.y):(A=c[0].x,d=c[0].y),Wi(c[1])?(f=c[1].end.x,m=c[1].end.y):(f=c[1].x,m=c[1].y),r===0||r===2?v=Math.abs(A-f):v=Math.abs(d-m),this.ctx.beginPath(),o===3?this.formatPath(i):this.formatPath(c.slice(0,2)),p=a<3?a*3:a*2,g=a<3?a*2:a,o===3&&(p=a,g=a),y=!0,v<=p*2?y=!1:v<=p*2+g?(w=v/(2*p+g),p*=w,g*=w):(b=Math.floor((v+g)/(p+g)),x=(v-b*p)/(b-1),T=(v-(b+1)*p)/b,g=T<=0||Math.abs(g-x)<Math.abs(g-T)?x:T),y&&(o===3?this.ctx.setLineDash([0,p+g]):this.ctx.setLineDash([p,g])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=a):this.ctx.lineWidth=a*2+1.1,this.ctx.strokeStyle=ks(n),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(Wi(c[0])&&(D=c[3],k=c[0],this.ctx.beginPath(),this.formatPath([new un(D.end.x,D.end.y),new un(k.start.x,k.start.y)]),this.ctx.stroke()),Wi(c[1])&&(D=c[1],k=c[2],this.ctx.beginPath(),this.formatPath([new un(D.end.x,D.end.y),new un(k.start.x,k.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(n){return Uo(this,void 0,void 0,function(){var a;return ao(this,function(r){switch(r.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=ks(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),a=Gye(n),[4,this.renderStack(a)];case 1:return r.sent(),this.applyEffects([]),[2,this.canvas]}})})},t})(lH),n_e=function(e){return e instanceof zO||e instanceof GO?!0:e instanceof vT&&e.type!==t2&&e.type!==e2},a_e=function(e,t){switch(e){case 0:return r2(t);case 2:return Lye(t);case 1:default:return s2(t)}},r_e=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},s_e=["-apple-system","system-ui"],o_e=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return s_e.indexOf(t)===-1}):e},i_e=(function(e){au(t,e);function t(n,a){var r=e.call(this,n,a)||this;return r.canvas=a.canvas?a.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),r.options=a,r.canvas.width=Math.floor(a.width*a.scale),r.canvas.height=Math.floor(a.height*a.scale),r.canvas.style.width=a.width+"px",r.canvas.style.height=a.height+"px",r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-a.x,-a.y),r.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+a.width+"x"+a.height+" at "+a.x+","+a.y+") with scale "+a.scale),r}return t.prototype.render=function(n){return Uo(this,void 0,void 0,function(){var a,r;return ao(this,function(s){switch(s.label){case 0:return a=bE(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,n),[4,l_e(a)];case 1:return r=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=ks(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(r,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t})(lH),l_e=function(e){return new Promise(function(t,n){var a=new Image;a.onload=function(){t(a)},a.onerror=n,a.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},u_e=(function(){function e(t){var n=t.id,a=t.enabled;this.id=n,this.enabled=a,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,ty([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,ty([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,ty([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,ty([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e})(),c_e=(function(){function e(t,n){var a;this.windowBounds=n,this.instanceName="#"+e.instanceCount++,this.logger=new u_e({id:this.instanceName,enabled:t.logging}),this.cache=(a=t.cache)!==null&&a!==void 0?a:new Iye(this,t)}return e.instanceCount=1,e})(),d_e=function(e,t){return t===void 0&&(t={}),A_e(e,t)};typeof window<"u"&&nH.setContext(window);var A_e=function(e,t){return Uo(void 0,void 0,void 0,function(){var n,a,r,s,o,i,c,A,d,f,m,v,p,g,y,w,b,x,T,D,S,k,S,E,C,U,F,L,H,ue,ie,Q,X,le,Z,re,q,P,G,J;return ao(this,function(M){switch(M.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(n=e.ownerDocument,!n)throw new Error("Element is not attached to a Document");if(a=n.defaultView,!a)throw new Error("Document is not attached to a Window");return r={allowTaint:(E=t.allowTaint)!==null&&E!==void 0?E:!1,imageTimeout:(C=t.imageTimeout)!==null&&C!==void 0?C:15e3,proxy:t.proxy,useCORS:(U=t.useCORS)!==null&&U!==void 0?U:!1},s=iE({logging:(F=t.logging)!==null&&F!==void 0?F:!0,cache:t.cache},r),o={windowWidth:(L=t.windowWidth)!==null&&L!==void 0?L:a.innerWidth,windowHeight:(H=t.windowHeight)!==null&&H!==void 0?H:a.innerHeight,scrollX:(ue=t.scrollX)!==null&&ue!==void 0?ue:a.pageXOffset,scrollY:(ie=t.scrollY)!==null&&ie!==void 0?ie:a.pageYOffset},i=new Uc(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),c=new c_e(s,i),A=(Q=t.foreignObjectRendering)!==null&&Q!==void 0?Q:!1,d={allowTaint:(X=t.allowTaint)!==null&&X!==void 0?X:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:A,copyStyles:A},c.logger.debug("Starting document clone with size "+i.width+"x"+i.height+" scrolled to "+-i.left+","+-i.top),f=new nR(c,e,d),m=f.clonedReferenceElement,m?[4,f.toIFrame(n,i)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return v=M.sent(),p=hT(m)||fye(m)?Qhe(m.ownerDocument):Ew(c,m),g=p.width,y=p.height,w=p.left,b=p.top,x=f_e(c,m,t.backgroundColor),T={canvas:t.canvas,backgroundColor:x,scale:(Z=(le=t.scale)!==null&&le!==void 0?le:a.devicePixelRatio)!==null&&Z!==void 0?Z:1,x:((re=t.x)!==null&&re!==void 0?re:0)+w,y:((q=t.y)!==null&&q!==void 0?q:0)+b,width:(P=t.width)!==null&&P!==void 0?P:Math.ceil(g),height:(G=t.height)!==null&&G!==void 0?G:Math.ceil(y)},A?(c.logger.debug("Document cloned, using foreign object rendering"),S=new i_e(c,T),[4,S.render(m)]):[3,3];case 2:return D=M.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+w+","+b+" with size "+g+"x"+y+" using computed rendering"),c.logger.debug("Starting DOM parsing"),k=jO(c,m),x===k.styles.backgroundColor&&(k.styles.backgroundColor=xc.TRANSPARENT),c.logger.debug("Starting renderer for element at "+T.x+","+T.y+" with size "+T.width+"x"+T.height),S=new t_e(c,T),[4,S.render(k)];case 4:D=M.sent(),M.label=5;case 5:return(!((J=t.removeContainer)!==null&&J!==void 0)||J)&&(nR.destroy(v)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,D]}})})},f_e=function(e,t,n){var a=t.ownerDocument,r=a.documentElement?Wp(e,getComputedStyle(a.documentElement).backgroundColor):xc.TRANSPARENT,s=a.body?Wp(e,getComputedStyle(a.body).backgroundColor):xc.TRANSPARENT,o=typeof n=="string"?Wp(e,n):n===null?xc.TRANSPARENT:4294967295;return t===a.documentElement?Pd(r)?Pd(s)?o:s:r:o};class m_e{constructor(){this.languagePatterns={gujarati:/[\u0A80-\u0AFF]/,devanagari:/[\u0900-\u097F]/,kannada:/[\u0C80-\u0CFF]/,malayalam:/[\u0D00-\u0D7F]/,telugu:/[\u0C00-\u0C7F]/,tamil:/[\u0B80-\u0BFF]/,english:/^[A-Za-z0-9\s.,;:!?\-'"()]+$/},this.languageFonts={gujarati:'"Noto Sans Gujarati", "Shruti", "Gujarati Sangam MN", sans-serif',hindi:'"Noto Sans Devanagari", "Mangal", "Devanagari Sangam MN", sans-serif',marathi:'"Noto Sans Devanagari", "Mangal", "Devanagari Sangam MN", sans-serif',devanagari:'"Noto Sans Devanagari", "Mangal", "Devanagari Sangam MN", sans-serif',kannada:'"Noto Sans Kannada", "Tunga", "Kannada Sangam MN", sans-serif',malayalam:'"Noto Sans Malayalam", "Kartika", "Malayalam Sangam MN", sans-serif',telugu:'"Noto Sans Telugu", "Gautami", "Telugu Sangam MN", sans-serif',tamil:'"Noto Sans Tamil", "Latha", "Tamil Sangam MN", sans-serif'}}detectLanguage(t){return!t||typeof t!="string"?null:this.languagePatterns.gujarati.test(t)?"gujarati":this.languagePatterns.kannada.test(t)?"kannada":this.languagePatterns.malayalam.test(t)?"malayalam":this.languagePatterns.telugu.test(t)?"telugu":this.languagePatterns.tamil.test(t)?"tamil":this.languagePatterns.devanagari.test(t)?"hindi":(this.languagePatterns.english.test(t),"english")}getFixedContainerDimensions(t){switch(t?.toLowerCase()){case"letter":case"legal":return{width:580,minHeight:45,fontSize:17};case"a4":default:return{width:520,minHeight:40,fontSize:16}}}getMaxWidthForPageSize(t){switch(t?.toLowerCase()){case"letter":return 530;case"legal":return 530;case"a4":default:return 480}}createHtmlTemplate(t,n,a={},r="A4"){const s=this.getFixedContainerDimensions(r),o=a.fontSize||s.fontSize,i=a.color||"#2d3748",c=this.languageFonts[n]||this.languageFonts.devanagari,A=a.lineHeight||1.4,d=a.textAlign||"left",f=a.padding||3;return`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="UTF-8">
        <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Gujarati:wght@400;500&family=Noto+Sans+Devanagari:wght@400;500&family=Noto+Sans+Kannada:wght@400;500&family=Noto+Sans+Malayalam:wght@400;500&family=Noto+Sans+Telugu:wght@400;500&family=Noto+Sans+Tamil:wght@400;500&display=swap" rel="stylesheet">
        <style>
          * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
          }
          
          body {
            font-family: ${c};
            font-size: ${o}px;
            color: ${i};
            line-height: ${A};
            text-align: ${d};
            background: white;
            -webkit-font-smoothing: antialiased;
            text-rendering: optimizeLegibility;
            padding: ${f}px;
            width: ${s.width}px; /* Fixed width for consistency */
            min-height: ${s.minHeight}px; /* Minimum height for consistency */
            /* Remove fixed height and overflow hidden to allow dynamic content */
            display: flex;
            align-items: flex-start; /* Align content to top instead of center */
          }
          
          .text-content {
            word-wrap: break-word;
            overflow-wrap: break-word;
            width: 100%;
            /* Remove text-overflow ellipsis to show all content */
          }
        </style>
      </head>
      <body>
        <div class="text-content">${t.replace(/\n/g,"<br>")}</div>
      </body>
      </html>
    `}async renderTextAsImage(t,n,a={},r="A4"){return new Promise((s,o)=>{try{const i=document.createElement("iframe");i.style.cssText=`
          position: absolute;
          top: -10000px;
          left: -10000px;
          width: 800px;
          height: 600px;
          border: none;
          visibility: hidden;
        `,document.body.appendChild(i);const c=i.contentDocument||i.contentWindow.document,A=this.createHtmlTemplate(t,n,a,r);c.open(),c.write(A),c.close(),this.waitForFontsToLoad(c).then(()=>{try{const d=this.getFixedContainerDimensions(r),f=c.body,m=d.width,p=Math.max(f.offsetHeight,d.minHeight),g=a.scale||2;d_e(c.body,{width:m,height:p,scale:g,useCORS:!0,allowTaint:!1,backgroundColor:"white"}).then(y=>{const w=y.toDataURL("image/png");document.body.removeChild(i),s(w)}).catch(y=>{console.error("Canvas rendering failed:",y),document.body.removeChild(i),s(null)})}catch(d){console.error("Text rendering failed:",d),document.body.removeChild(i),s(null)}})}catch(i){console.error("Error in renderTextAsImage:",i),o(i)}})}waitForFontsToLoad(t){return new Promise(n=>{t.fonts&&t.fonts.ready?t.fonts.ready.then(()=>{setTimeout(n,100)}):setTimeout(n,500)})}async processTextForPdf(t,n={},a="A4",r=!1){if(!t)return{content:{text:"",style:n},success:!0,isRegional:!1};const s=this.detectLanguage(t);if(r||!["gujarati","hindi","marathi","kannada","malayalam","telugu","tamil"].includes(s))return{content:{text:t,style:n},success:!0,isRegional:!1};try{const o=await this.renderTextAsImage(t,s,{fontSize:n.fontSize||8,color:n.color||"#2d3748",lineHeight:n.lineHeight||1.4},a);return o?{content:{image:o,margin:n.margin||[0,0,0,0]},success:!0,isRegional:!0}:{content:{text:t,style:n},success:!1,isRegional:!1,error:"Regional text rendering failed"}}catch(o){return console.error("Regional text processing failed:",o),{content:{text:t,style:n},success:!1,isRegional:!1,error:o.message}}}}const cp=async e=>{try{const n=await(await fetch(e)).blob();return new Promise((a,r)=>{const s=new FileReader;s.readAsDataURL(n),s.onload=()=>a(s.result),s.onerror=o=>r(o)})}catch(t){throw console.error("Error converting URL to base64:",t),t}},hh=async e=>{try{return{data:(await At.get(`/print/${e}`)).data.data.config,error:null}}catch(t){return t?.response?.status===404?(console.log("No print configurations found for doctor ID:",e,"- this is normal for new users"),{data:null,error:null,isNewUser:!0}):(console.error("Error fetching print details:",t),{data:null,error:t,isNewUser:!1})}},Ro=typeof navigator<"u"&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),uH=async(e,t)=>{try{const n=new FormData;return n.append("file",t),{data:(await At.post(`/print/${e}/header-image`,n,{transformRequest:[(r,s)=>(delete s["Content-Type"],r)]})).data.data,error:null}}catch(n){return console.error("Error uploading header image:",n),{data:null,error:n}}},yd=async(e,t=null)=>{if(t){const{createFileURL:r}=await Tr(async()=>{const{createFileURL:o}=await Promise.resolve().then(()=>mR);return{createFileURL:o}},void 0,import.meta.url),s=`doctorHeaderImages/${t}`;return await r(s,"/api/print/header-image-file")}const{getCurrentServerURL:n}=await Tr(async()=>{const{getCurrentServerURL:r}=await Promise.resolve().then(()=>mR);return{getCurrentServerURL:r}},void 0,import.meta.url);return`${await n()}/api/print/${e}/header-image`},cH=async e=>{try{return{data:(await At.delete(`/print/${e}/header-image`)).data,error:null}}catch(t){return console.error("Error deleting header image:",t),{data:null,error:t}}},v_e=Object.freeze(Object.defineProperty({__proto__:null,deletePrescriptionHeaderImage:cH,fetchPrintConfigs:hh,getPrescriptionHeaderImageUrl:yd,isMobile:Ro,uploadPrescriptionHeaderImage:uH},Symbol.toStringTag,{value:"Module"}));let ms;const UA=async()=>{if(!ms)try{const[e,t]=await Promise.all([Tr(()=>import("./pdfmake-BQDj-poe.js").then(a=>a.p),[],import.meta.url),Tr(()=>import("./vfs_fonts-D7Fwc7XG.js").then(a=>a.v),[],import.meta.url)]);ms=e.default||e;const n=t.default||t;n.pdfMake&&n.pdfMake.vfs?ms.vfs=n.pdfMake.vfs:n.vfs?ms.vfs=n.vfs:(typeof n=="object"&&n["Roboto-Regular.ttf"],ms.vfs=n),console.log("PDFMake initialized successfully with VFS fonts")}catch(e){throw console.error("Failed to initialize PDFMake:",e),new Error("PDFMake initialization failed")}};class h_e{constructor(){this.regionalTextRenderer=new m_e,this.styles={clinicHeader:{fontSize:24,color:"#1a472a",alignment:"center",margin:[0,0,0,5]},doctorName:{fontSize:20,color:"#2d5aa0",margin:[0,0,0,3]},doctorCredentials:{fontSize:14,color:"#4a5568",margin:[0,0,0,2]},registrationInfo:{fontSize:12,color:"#718096",margin:[0,0,0,8]},prescriptionHeader:{fontSize:28,color:"#1a202c",alignment:"center",margin:[0,0,0,25]},patientSectionTitle:{fontSize:12,color:"#2d5aa0",margin:[12,3,12,3],padding:[8,4,8,4],alignment:"left"},patientLabel:{fontSize:11,color:"#4a5568"},patientValue:{fontSize:12,color:"#1a202c",margin:[0,2,0,0]},patientInlineInfo:{fontSize:11,color:"#4a5568",lineHeight:1.3,margin:[0,0,0,0]},medicalSectionTitle:{fontSize:12,color:"#2d5aa0",margin:[12,3,12,3],padding:[8,4,8,4],alignment:"left"},vitalLabel:{fontSize:12,color:"#2b6cb0"},vitalValue:{fontSize:12,color:"#1a202c",margin:[0,1,0,2]},diagnosisText:{fontSize:12,color:"#2d3748",lineHeight:1.2,margin:[0,0,0,0]},clinicalNotesText:{fontSize:12,color:"#2d3748",lineHeight:1.2,margin:[0,0,0,0]},prescriptionTableHeader:{fontSize:11,color:"#2d3748",margin:[8,8,8,8]},medicineNumber:{fontSize:18,color:"#2b6cb0",margin:[5,5,5,5]},cleanMedicineName:{fontSize:12,color:"#1a202c",margin:[0,0,0,4]},saltComposition:{fontSize:11,color:"#1a202c",margin:[0,0,0,4]},cleanMedicineDetails:{fontSize:12,color:"#4a5568",margin:[0,0,0,0]},cleanFieldLabel:{fontSize:12,color:"#2b6cb0",margin:[0,0,0,2]},cleanFieldValue:{fontSize:11,color:"#2d3748",margin:[0,0,0,0]},dosageInstructionsTitle:{fontSize:12,color:"#4a5568",margin:[0,3,0,5]},cleanDosageItem:{fontSize:12,color:"#2d3748",margin:[0,3,0,3],lineHeight:1.3},medicineName:{fontSize:14,color:"#1a202c",margin:[0,2,0,2]},medicineStrength:{fontSize:12,color:"#2b6cb0",margin:[0,1,0,2]},medicineComposition:{fontSize:10,color:"#718096",margin:[0,0,0,5]},dosageInstruction:{fontSize:11,color:"#2d3748",margin:[3,2,3,2],border:[!0,!0,!0,!0],borderColor:["#e2e8f0","#e2e8f0","#e2e8f0","#e2e8f0"],padding:[4,2,4,2]},durationText:{fontSize:9,color:"#c53030",alignment:"center",margin:[3,4,3,4],fillColor:"#fed7d7",border:[!0,!0,!0,!0],borderColor:["#fc8181","#fc8181","#fc8181","#fc8181"],borderWidth:[1,1,1,1]},instructionsText:{fontSize:11,color:"#4a5568",margin:[5,5,5,5]},medicalAdviceTitle:{fontSize:12,color:"#2d5aa0",margin:[12,3,12,3],padding:[8,4,8,4],alignment:"left"},adviceText:{fontSize:12,color:"#2d3748",lineHeight:1.2,margin:[0,0,0,0]},followupTitle:{fontSize:12,color:"#4a5568",margin:[0,3,0,3]},followupText:{fontSize:12,color:"#4a5568",margin:[0,2,0,0]},translationTitle:{fontSize:12,color:"#4a5568",margin:[15,5,15,3]},translatedText:{fontSize:12,color:"#4a5568",lineHeight:1.3,margin:[15,0,15,8]},medicalFooter:{fontSize:9,color:"#718096",alignment:"center",margin:[0,10,0,0]},disclaimer:{fontSize:9,color:"#6b7280",alignment:"center",lineHeight:1.3,margin:[0,3,0,3]},receiptTitle:{fontSize:20,color:"#2d5aa0",alignment:"center",margin:[0,5,0,10]},sectionHeader:{fontSize:12,color:"#2d5aa0",margin:[0,5,0,5],bold:!0},patientInfo:{fontSize:11,color:"#1a202c",margin:[5,2,5,2]},receiptInfo:{fontSize:11,color:"#1a202c",margin:[5,2,5,2]},tableHeader:{fontSize:11,color:"#2d3748",bold:!0,margin:[5,5,5,5]},tableCell:{fontSize:10,color:"#1a202c",margin:[5,3,5,3]},summaryLabel:{fontSize:11,color:"#4a5568",margin:[5,2,5,2]},summaryValue:{fontSize:11,color:"#1a202c",margin:[5,2,5,2]},summaryLabelBold:{fontSize:12,color:"#2d3748",bold:!0,margin:[5,3,5,3]},summaryValueBold:{fontSize:12,color:"#1a202c",bold:!0,margin:[5,3,5,3]},summaryValuePaid:{fontSize:11,color:"#1a202c",margin:[5,2,5,2]},summaryValueDue:{fontSize:11,color:"#1a202c",margin:[5,2,5,2]},noDataText:{fontSize:11,color:"#6b7280",alignment:"center",margin:[0,10,0,10]}}}async processRegionalText(t,n={},a="A4",r=!1){return(await this.regionalTextRenderer.processTextForPdf(t,n,a,r)).content}getRegionalImageWidth(t){switch(t?.toLowerCase()){case"letter":case"legal":return 460;case"a4":default:return 450}}async applyLanguageFont(t,n={},a="A4",r=!1){const s=this.regionalTextRenderer.detectLanguage(t);if(["gujarati","hindi","marathi","kannada","malayalam","telugu","tamil"].includes(s)&&!r){const o=this.regionalTextRenderer.getFixedContainerDimensions(a),i=this.getRegionalImageWidth(a);return{image:await this.regionalTextRenderer.renderTextAsImage(t,s,{fontSize:o.fontSize,color:n.color||"#2d3748",fontFamily:s==="gujarati"?"Noto Sans Gujarati":s==="kannada"?"Noto Sans Kannada":s==="malayalam"?"Noto Sans Malayalam":s==="telugu"?"Noto Sans Telugu":s==="tamil"?"Noto Sans Tamil":"Noto Sans Devanagari",padding:5},a),width:i,margin:[0,2,15,2],alignment:n.alignment||"left"}}return{text:t,...n}}async generateConsultationPDF(t,n){ms||await UA();let a=null;if(t.printConfigurations?.headerImagePath&&t.printConfigurations?.doctorId)try{const o=await yd(t.printConfigurations.doctorId,t.printConfigurations.headerImagePath);a=await cp(o)}catch(o){console.error("Failed to load header image for PDF:",o)}let r=null;t.printConfigurations?.headerSize!==void 0&&t.printConfigurations?.headerSize!==null?r=Math.round(t.printConfigurations.headerSize*72):t.headerSize!==void 0&&(r=t.headerSize);const s={pageSize:this.getPageSize(t.printConfigurations?.pageSize),pageMargins:this.getPageMargins(t.printConfigurations?.pageSize,r),defaultStyle:{fontSize:10,columnGap:20},header:()=>t.printConfigurations?.useHeader?this.createProfessionalMedicalHeader(t.printConfigurations,t.printConfigurations?.pageSize,a,r):null,footer:(o,i)=>t.printConfigurations?.useFooter?this.createMedicalFooter(o,i,t.printConfigurations):null,content:[this.createProfessionalPatientCard(n,t.consultation),...this.hasVitals(t.vitals)?[this.createProfessionalVitalsCard(t.vitals)]:[],await this.createClinicalFindingsSection(t.consultation,t.printConfigurations?.pageSize),await this.createProfessionalPrescriptionSection(t.medicines||[],t.translationLanguage,t.printConfigurations?.pageSize,t.translationFailed),await this.createMedicalAdviceSection(t.consultation,t.translatedPatientNotes,t.printConfigurations?.pageSize,t.translationFailed)],styles:this.styles,pageBreakBefore:function(o,i,c){return o.style==="prescriptionTableHeader"&&o.pageNumbers.length>1?!0:(i&&i.length===0&&c&&c.length<2,!1)},info:{title:"Medical Prescription",author:"Professional Medical System",subject:"Patient Prescription and Medical Advice"},compress:!1};return ms.createPdf(s)}createProfessionalMedicalHeader(t,n="A4",a=null,r=null){const s=this.getHeaderMargins(n,r),i=this.getPageWidth(n)-(s[0]+s[2]);return a?{table:{headerRows:0,widths:["*"],body:[[{stack:[{image:a,width:i,height:80,alignment:"center",margin:[0,0,0,0]},{canvas:[{type:"line",x1:0,y1:4,x2:500,y2:4,lineWidth:2,lineColor:"#2b6cb0"},{type:"line",x1:0,y1:8,x2:500,y2:8,lineWidth:1,lineColor:"#4a5568"}],margin:[0,10,0,0],alignment:"center"}],margin:[0,0,0,0]}]]},layout:"noBorders",margin:[s[0],s[1],s[2],s[3]]}:{table:{headerRows:0,widths:["*"],body:[[{stack:[{columns:[{width:"40%",stack:[{text:`Dr. ${t.doctorName}`,style:"doctorName"},{text:t.doctorDegrees||"MBBS",style:"doctorCredentials"},{text:`Reg. No: ${t.doctorRegistrationNumber}`,style:"registrationInfo"}]},{width:"60%",stack:[...t.clinicAddress?[{stack:t.clinicAddress.split(/\r?\n|\r/).map(c=>({text:c.trim(),fontSize:10,color:"#4a5568",alignment:"right",margin:[0,1,0,1]})),margin:[0,5,0,2]}]:[],...t.contactNumber?[{text:` ${t.contactNumber}`,fontSize:10,color:"#4a5568",alignment:"right"}]:[],...t.email?[{text:`Email: ${t.email}`,fontSize:10,color:"#4a5568",alignment:"right"}]:[]]}]},{canvas:[{type:"line",x1:0,y1:4,x2:500,y2:4,lineWidth:2,lineColor:"#2b6cb0"},{type:"line",x1:0,y1:8,x2:500,y2:8,lineWidth:1,lineColor:"#4a5568"}],margin:[0,10,0,0],alignment:"center"}],margin:s}]]},layout:"noBorders",margin:[0,0,0,20]}}createProfessionalPatientCard(t,n){const a=[`Patient Name - ${t.name||t.patientName||"N/A"}`,`${t.age||"N/A"} yrs/${t.gender||"N/A"}`,`ID - ${t.id||t.patientId||"N/A"}`,`Contact - ${t.contactNumber||t.phoneNumber||"N/A"}`].join(" | ");return{table:{headerRows:0,widths:["*","auto"],body:[[{text:a,style:"patientInlineInfo",margin:[6,3,15,3]},{text:(s=>{const o=new Date(s),c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][o.getMonth()],A=o.getDate(),d=o.getFullYear().toString().slice(-2);return`${A} ${c}' ${d}`})(n.consultationDate||n.createdAt),fontSize:11,color:"#4a5568",lineHeight:1.3,alignment:"right",margin:[15,3,12,3]}]]},layout:"noBorders",margin:[0,0,0,3],alignment:"left"}}createProfessionalVitalsCard(t){const n=[];if(t.pulse&&n.push(`Pulse Rate: ${t.pulse}bpm`),t.systolicBP&&t.diastolicBP&&n.push(`Blood Pressure: ${t.systolicBP}/${t.diastolicBP}mmHg`),t.temperature&&n.push(`Temperature: ${t.temperature}C`),t.respiratoryRate&&n.push(`Respiratory Rate: ${t.respiratoryRate}/min`),t.weight&&n.push(`Weight: ${t.weight}kg`),t.height){const a=t.weight&&t.height?(t.weight/(t.height/100*(t.height/100))).toFixed(1):null;n.push(`Height: ${t.height}cm${a?` (BMI: ${a})`:""}`)}return{table:{headerRows:0,widths:["*"],body:[[{text:[{text:"VITAL SIGNS: ",style:"patientSectionTitle"},{text:n.join(", "),style:"vitalValue"}],margin:[6,3,15,5]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,0,0,5],alignment:"left"}}async createClinicalFindingsSection(t,n="A4"){const a=[];if(t.diagnosis){const r=await this.applyLanguageFont(t.diagnosis,{style:"diagnosisText",margin:[0,0,0,0]},n,!1);a.push([{text:[{text:"DIAGNOSIS: ",style:"medicalAdviceTitle"},r.text?r:{text:t.diagnosis,style:"diagnosisText"}],margin:[6,3,15,1]}])}if(t.clinicalNotes?.trim()){const r=await this.applyLanguageFont(t.clinicalNotes,{style:"clinicalNotesText",margin:[0,0,0,0]},n,!1);a.push([{text:[{text:"CLINICAL NOTES: ",style:"medicalAdviceTitle"},r.text?r:{text:t.clinicalNotes,style:"clinicalNotesText"}],margin:[6,0,15,3]}])}return a.length===0?[]:[{table:{headerRows:0,widths:["*"],body:a},layout:{hLineWidth:(r,s)=>r===0||r===s.table.body.length?1:0,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,0,0,5],alignment:"left"}]}async createProfessionalPrescriptionSection(t,n="none",a="A4",r=!1){const s=t.filter(i=>i.isSelected!==!1);if(s.length===0)return{text:""};const o=[];for(const i of s){const A=this.createSimpleDosageText(i)||"As directed",d=i.duration||"As directed",f=i.instructions||"";let m=`Schedule: ${A}   Duration: ${d}`;f.trim()&&(m+=`   ${f}`);let v=i.productName||"";if(i.productForm||i.quantityUnits!==null&&i.quantityUnits!==void 0){const g=[];i.productForm&&g.push(i.productForm),i.quantityUnits!==null&&i.quantityUnits!==void 0&&g.push(`Qty:${i.quantityUnits}`),v+=` (${g.join(",")})`}const p=i.saltComposition?` - ${i.saltComposition.toUpperCase()}`:"";if(o.push({text:[{text:v,style:"cleanMedicineName",bold:!0},{text:p,fontSize:10,color:"#1a202c"}],margin:[0,0,0,0]}),o.push({text:m,style:"cleanFieldValue",margin:[0,0,0,n&&n!=="none"?0:4]}),n&&n!=="none")try{const g=[];if(A&&A!=="As directed"&&g.push(A),d&&d!=="As directed"&&g.push(d),f.trim()&&g.push(f),g.length>0){const y=g.map(T=>this.translateMedicineText(T,n)),w=await Promise.all(y);let b="",x=0;if(A&&A!=="As directed"){const T=w[x];T&&T.trim()&&(b+=T),x++}if(d&&d!=="As directed"){const T=w[x];T&&T.trim()&&(b&&(b+="   "),b+=T),x++}if(f.trim()){const T=w[x];T&&T.trim()&&(b&&(b+="   "),b+=T)}if(b&&b.trim()&&!r){const T=await this.applyLanguageFont(b,{style:"translatedText"},a,!1);o.push({...T,margin:[-6,1,0,2]})}}}catch(g){console.error("Error translating medicine text:",g)}}return[{table:{headerRows:0,widths:["*"],body:[[{text:"PRESCRIPTION (Rx)",style:"medicalAdviceTitle",margin:[6,3,15,1]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,0,0,2],alignment:"left"},{table:{headerRows:0,widths:["*"],body:[[{stack:o,margin:[6,3,6,1]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,0,0,5],alignment:"left"}]}createSimpleDosageText(t){return t?.dosage_schedule||"As directed"}async translateMedicineText(t,n){if(!t||!n||n==="none")return"";try{const{translationLanguages:a}=await Tr(async()=>{const{translationLanguages:c}=await Promise.resolve().then(()=>TE);return{translationLanguages:c}},void 0,import.meta.url),s=a.find(c=>c.value===n)?.label||n,{translateText:o}=await Tr(async()=>{const{translateText:c}=await import("./translationUtils-Bgo0F942.js");return{translateText:c}},[],import.meta.url);return await o(t,s)||t}catch(a){return console.error("Translation failed for medicine text:",a),t}}async createMedicalAdviceSection(t,n,a="A4",r=!1){const s=[];if(t.investigations?.trim()){const o=await this.applyLanguageFont(t.investigations,{style:"adviceText",margin:[0,0,0,0]},a,!1);s.push({stack:[{table:{headerRows:0,widths:["*"],body:[[{text:[{text:"INVESTIGATIONS ADVISED: ",style:"medicalAdviceTitle"},o.text?o:{text:t.investigations,style:"adviceText"}],margin:[6,3,15,1]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"}}],margin:[0,0,0,5],alignment:"left"})}if(t.followupDate){const o=i=>{const c=new Date(i),d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][c.getMonth()],f=c.getDate(),m=c.getFullYear().toString().slice(-2);return`${f} ${d}' ${m}`};s.push({stack:[{table:{headerRows:0,widths:["*"],body:[[{text:[{text:"FOLLOW-UP APPOINTMENT: ",style:"medicalAdviceTitle"},{text:o(t.followupDate),style:"followupText"}],margin:[6,3,15,5]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"}}],margin:[0,0,0,8],alignment:"left"})}if(t.patientNotes?.trim()){const o=await this.applyLanguageFont(t.patientNotes,{style:"adviceText",margin:[0,0,0,0]},a,!1),c=[{text:[{text:"PATIENT ADVICE: ",style:"medicalAdviceTitle"},o.text?o:{text:t.patientNotes,style:"adviceText"}],margin:[0,0,0,0]}];if(n&&!r){const A=await this.applyLanguageFont(n,{style:"translatedText"},a,!1);c.push({...A,margin:[-6,2,0,0]})}s.push({stack:[{table:{headerRows:0,widths:["*"],body:[[{stack:c,margin:[6,3,15,1]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"}}],margin:[0,0,0,5],alignment:"left"})}return s}createMedicalDisclaimer(){return{stack:[{table:{headerRows:0,widths:["*"],body:[[{stack:[{text:" IMPORTANT MEDICAL NOTICE",style:"medicalAdviceTitle",alignment:"center"},{text:[` Take medications exactly as prescribed
`,` Do not stop medication without consulting your doctor
`,` Contact your doctor immediately if you experience any adverse reactions
`,` Keep all medications out of reach of children
`," This prescription is valid for 30 days from date of issue"].join(""),style:"disclaimer",margin:[15,5,15,10]}]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#fed7d7",vLineColor:()=>"#fed7d7",fillColor:()=>"#fffbf5"}}],unbreakable:!0,margin:[0,15,0,0],alignment:"left",pageBreakBefore:function(t,n,a,r){return 842-(r?r.length*30:0)<120&&n.length===0}}}createMedicalFooter(t,n,a){return{columns:[{width:"*",text:`Dr. ${a?.doctorName||"Doctor"} - Reg. No: ${a?.doctorRegistrationNumber||"REG001"} | This is a computer-generated prescription.`,style:"medicalFooter"},{width:"auto",text:`Page ${t} of ${n}`,style:"medicalFooter"}],margin:[40,5,40,5],alignment:"left"}}createReceiptFooter(t,n,a){return{columns:[{width:"*",text:`Dr. ${a?.doctorName||"Doctor"} - Reg. No: ${a?.doctorRegistrationNumber||"REG001"} | This is a computer-generated receipt.`,style:"medicalFooter"},{width:"auto",text:`Page ${t} of ${n}`,style:"medicalFooter"}],margin:[40,5,40,5],alignment:"left"}}createTreatmentPlanFooter(t,n,a){return{columns:[{width:"*",text:`Dr. ${a?.doctorName||"Doctor"} - Reg. No: ${a?.doctorRegistrationNumber||"REG001"} | Charges are indicative`,style:"medicalFooter"},{width:"auto",text:`Page ${t} of ${n}`,style:"medicalFooter"}],margin:[40,5,40,5],alignment:"left"}}createPatientField(t,n){return{columns:[{width:"35%",text:t,style:"patientLabel"},{width:"*",text:n,style:"patientValue"}],margin:[0,0,0,1]}}createVitalField(t,n){return{text:`${t}: ${n}`,style:"vitalValue",margin:[8,3,8,3]}}createCleanDosageSchedule(t){return t?.dosage_schedule?[{text:t.dosage_schedule,style:"cleanDosageItem",alignment:"left",color:"#2d3748"}]:[{text:"Take as directed by your physician",style:"cleanDosageItem",alignment:"center",italics:!0,color:"#4a5568"}]}createDosageSchedule(t){return t?.dosage_schedule?[{text:t.dosage_schedule,style:"dosageInstruction",alignment:"left"}]:[{text:"Take as directed by physician",style:"dosageInstruction"}]}getBPStatus(t,n){return t>140||n>90?" High":t<90||n<60?" Low":" Normal"}async generateTreatmentPlanPDF(t,n){ms||await UA();let a=null;if(t.printConfigurations?.headerImagePath&&t.printConfigurations?.doctorId)try{const o=await yd(t.printConfigurations.doctorId,t.printConfigurations.headerImagePath);a=await cp(o)}catch(o){console.error("Failed to load header image for PDF:",o)}let r=null;t.printConfigurations?.headerSize!==void 0&&t.printConfigurations?.headerSize!==null?r=Math.round(t.printConfigurations.headerSize*72):t.headerSize!==void 0&&(r=t.headerSize);const s={pageSize:this.getPageSize(t.printConfigurations?.pageSize),pageMargins:this.getPageMargins(t.printConfigurations?.pageSize,r),defaultStyle:{fontSize:10,columnGap:20},header:()=>t.printConfigurations?.useHeader?this.createProfessionalMedicalHeader(t.printConfigurations,t.printConfigurations?.pageSize,a,r):null,footer:(o,i)=>t.printConfigurations?.useFooter?this.createTreatmentPlanFooter(o,i,t.printConfigurations):null,content:[this.createProfessionalPatientCard(n,{createdAt:new Date}),this.createTreatmentPlanDetailsSection(t.treatmentPlan),...this.getCompletedProcedures(t.procedureTreatments).length>0?[this.createProceduresSection("COMPLETED PROCEDURES",this.getCompletedProcedures(t.procedureTreatments))]:[],...this.createPendingProceduresSections(t.procedureTreatments),...t.paymentReceipts&&t.paymentReceipts.length>0?[this.createPaymentDetailsSection(t.paymentReceipts)]:[],...this.hasMultipleOptions(t.procedureTreatments)?[]:[this.createCostSummarySection(t.procedureTreatments,t.paymentReceipts)],this.createPaymentSummarySection(t.procedureTreatments,t.paymentReceipts)],styles:this.styles,pageBreakBefore:function(o,i,c){return i&&i.length===0&&c&&c.length<2,!1},info:{title:"Treatment Plan",author:"Professional Medical System",subject:"Patient Treatment Plan"},compress:!1};return ms.createPdf(s)}createTreatmentPlanDetailsSection(t){const n=t?.treatmentPlanName;return!n||n.startsWith("New Treatment Plan")?null:{stack:[{table:{headerRows:0,widths:["*"],body:[[{text:[{text:"TREATMENT PLAN: ",style:"medicalAdviceTitle"},{text:n,style:"patientValue"}],margin:[6,3,15,5]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"}}],unbreakable:!0,margin:[0,0,0,8],alignment:"left",pageBreakBefore:function(a,r){return r.length===0}}}getCompletedProcedures(t){return t?t.filter(n=>n.status?.toLowerCase()==="completed"&&n.isSelected!==!1&&n.status?.toLowerCase()!=="cancelled"):[]}getPendingProcedures(t){return t?t.filter(n=>n.status?.toLowerCase()!=="completed"&&n.isSelected!==!1&&n.status?.toLowerCase()!=="cancelled"):[]}hasMultipleOptions(t){if(!t)return!1;const n=t.filter(r=>r.status?.toLowerCase()!=="completed"&&r.isSelected!==!1&&r.status?.toLowerCase()!=="cancelled"),a=new Set;return n.forEach(r=>{const s=(r.option||r.options||"").trim();s&&a.add(s)}),a.size>=2}groupPendingProceduresByOption(t){const n=this.getPendingProcedures(t),a={};return n.forEach(r=>{const o=(r.option||r.options||"").trim()||"no-option";a[o]||(a[o]=[]),a[o].push(r)}),a}calculateGroupTotal(t){return t.reduce((n,a)=>{const r=a.costEstimate||a.procedureCost||0;return n+r},0)}createPendingProceduresSections(t){const n=this.getPendingProcedures(t);if(n.length===0)return[];if(this.hasMultipleOptions(t)){const a=this.groupPendingProceduresByOption(t),r=[];return a["no-option"]&&r.push(this.createProceduresSection("PENDING PROCEDURES",a["no-option"])),Object.keys(a).filter(o=>o!=="no-option").sort((o,i)=>o.localeCompare(i)).forEach(o=>{const i=a[o],c=this.calculateGroupTotal(i);r.push(this.createProceduresWithTotalSection(`OPTION ${o.toUpperCase()}`,i,c))}),r}else return[this.createProceduresSection("PENDING PROCEDURES",n)]}createProceduresWithTotalSection(t,n,a){if(!n||n.length===0)return null;const r={table:{headerRows:1,widths:["70%","30%"],body:[[{text:"PROCEDURE",style:"prescriptionTableHeader"},{text:"COST",style:"prescriptionTableHeader",alignment:"center"}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,2,0,8]};return n.forEach(s=>{const o=s.procedure?.procedure_name||s.procedureName||"Unknown Procedure",i=s.location&&s.location.trim()?`${o} (${s.location.trim()})`:o,c=s.procedure?.description||s.description||"",A=s.procedureCost||0,d=s.costEstimate||s.procedureCost||0,f=A-d;let m=`${d.toLocaleString()}`;f>0&&(m+=` (${f.toLocaleString()} discount)`),r.table.body.push([{stack:[{text:i,style:"cleanMedicineName"},...c?[{text:c,style:"cleanMedicineDetails"}]:[]]},{text:m,style:"cleanFieldValue",alignment:"center"}])}),r.table.body.push([{text:`${t} Total:`,style:"cleanMedicineName",bold:!0,alignment:"right"},{text:`${a.toLocaleString()}`,style:"cleanMedicineName",bold:!0,alignment:"center"}]),[{table:{headerRows:0,widths:["*"],body:[[{text:t,style:"medicalSectionTitle"}]]},layout:"noBorders",margin:[0,0,0,2]},r]}createProceduresSection(t,n){if(!n||n.length===0)return null;const a={table:{headerRows:1,widths:["70%","30%"],body:[[{text:"PROCEDURE",style:"prescriptionTableHeader"},{text:"COST",style:"prescriptionTableHeader",alignment:"center"}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,2,0,8]};return n.forEach(r=>{const s=r.procedure?.procedure_name||r.procedureName||"Unknown Procedure",o=r.location&&r.location.trim()?`${s} (${r.location.trim()})`:s,i=r.procedure?.description||r.description||"",c=r.procedureCost||0,A=r.costEstimate||r.procedureCost||0,d=c-A;let f=`${A.toLocaleString()}`;d>0&&(f+=` (${d.toLocaleString()} discount)`),a.table.body.push([{stack:[{text:o,style:"cleanMedicineName"},...i?[{text:i,style:"cleanMedicineDetails"}]:[]]},{text:f,style:"cleanFieldValue",alignment:"center"}])}),[{table:{headerRows:0,widths:["*"],body:[[{text:t,style:"medicalSectionTitle"}]]},layout:"noBorders",margin:[0,0,0,2]},a]}createPaymentDetailsSection(t){if(!t||t.length===0)return null;const n={table:{headerRows:1,widths:["25%","20%","18%","18%","19%"],body:[[{text:"RECEIPT ID",style:"prescriptionTableHeader"},{text:"DATE",style:"prescriptionTableHeader",alignment:"center"},{text:"TOTAL",style:"prescriptionTableHeader",alignment:"center"},{text:"PAID",style:"prescriptionTableHeader",alignment:"center"},{text:"BALANCE",style:"prescriptionTableHeader",alignment:"center"}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,2,0,8]};return t.forEach(a=>{n.table.body.push([{text:a.identifier||"N/A",style:"cleanFieldValue"},{text:er(a.paymentReceiptDate),style:"cleanFieldValue",alignment:"center"},{text:`${(a.totalAmount||0).toLocaleString()}`,style:"cleanFieldValue",alignment:"center"},{text:`${(a.totalPaid||0).toLocaleString()}`,style:"cleanFieldValue",alignment:"center"},{text:`${(a.balanceDue||0).toLocaleString()}`,style:"cleanFieldValue",alignment:"center"}])}),[{table:{headerRows:0,widths:["*"],body:[[{text:"PAYMENT INFORMATION",style:"medicalSectionTitle"}]]},layout:"noBorders",margin:[0,0,0,2]},n]}createCostSummarySection(t,n){const a=t?.filter(d=>d.isSelected!==!1&&d.status?.toLowerCase()!=="cancelled")||[],r=a.reduce((d,f)=>d+(f.procedureCost||0),0),s=a.reduce((d,f)=>d+(f.costEstimate||f.procedureCost||0),0),o=r-s;let i=`${s.toLocaleString()}`;o>0&&(i+=` (${o.toLocaleString()} total discount)`);const A={table:{headerRows:0,widths:["60%","40%"],body:[["Total Cost:",i]].map(([d,f])=>[{text:d,fontSize:12,color:"#000000",bold:!0,margin:[5,2,5,2]},{text:f,style:"cleanFieldValue",alignment:"right",margin:[5,2,5,2]}])},layout:{hLineWidth:(d,f)=>d===0||d===f.table.body.length?1:0,vLineWidth:(d,f)=>d===0||d===f.table.widths.length?1:0,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,2,0,8]};return[{table:{headerRows:0,widths:["*"],body:[[{text:"COST SUMMARY",style:"medicalSectionTitle"}]]},layout:"noBorders",margin:[0,0,0,2]},A]}createPaymentSummarySection(t,n){const a=t?.filter(A=>A.isSelected!==!1&&A.status?.toLowerCase()==="completed"&&A.status?.toLowerCase()!=="cancelled")||[],r=n?.reduce((A,d)=>A+(d.totalPaid||0),0)||0,s=a.reduce((A,d)=>{const f=d.costEstimate||d.cost_estimate,m=d.procedureCost||0;return A+(f!==void 0?f:m)},0),o=Math.max(0,s-r),i=[["Amount Due:",`${s.toLocaleString()}`],["Amount Paid:",`${r.toLocaleString()}`],["Amount Pending:",`${o.toLocaleString()}`]],c={table:{headerRows:0,widths:["60%","40%"],body:i.map(([A,d])=>[{text:A,fontSize:12,color:"#000000",bold:!0,margin:[5,2,5,2]},{text:d,style:"cleanFieldValue",alignment:"right",margin:[5,2,5,2]}])},layout:{hLineWidth:(A,d)=>A===0||A===d.table.body.length?1:0,vLineWidth:(A,d)=>A===0||A===d.table.widths.length?1:0,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,2,0,8]};return[{table:{headerRows:0,widths:["*"],body:[[{text:"PAYMENT SUMMARY",style:"medicalSectionTitle"}]]},layout:"noBorders",margin:[0,0,0,2]},c]}getLanguageDisplayName(t){return{hi:"Hindi",bn:"Bengali",te:"Telugu",mr:"Marathi",ta:"Tamil",gu:"Gujarati",ur:"Urdu",ml:"Malayalam",kn:"Kannada",or:"Odia",pa:"Punjabi",as:"Assamese",hindi:"Hindi",marathi:"Marathi",gujarati:"Gujarati",kannada:"Kannada",malayalam:"Malayalam",telugu:"Telugu",tamil:"Tamil"}[t]||(t?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase():"Translation")}getPageSize(t){switch(t?.toLowerCase()){case"letter":return"LETTER";case"legal":return"LEGAL";case"a4":default:return"A4"}}getPageMargins(t,n=null){const a=n??130;switch(t?.toLowerCase()){case"letter":return[45,a,45,45];case"legal":return[35,a,35,55];case"a4":default:return[40,a,40,40]}}getHeaderMargins(t,n=null){const a=this.getPageMargins(t,n);return[a[0],20,a[2],15]}getPageWidth(t){switch(t?.toLowerCase()){case"letter":return 612;case"legal":return 612;case"a4":default:return 595}}hasVitals(t){return t?!!(t.pulse||t.systolicBP||t.diastolicBP||t.respiratoryRate||t.temperature||t.weight||t.height):!1}async generateBillPDF(t,n){ms||await UA();const a=t.headerSize!==void 0?t.headerSize:null,r={pageSize:this.getPageSize(t.printConfigurations?.pageSize),pageMargins:this.getPageMargins(t.printConfigurations?.pageSize,a),defaultStyle:{fontSize:10,columnGap:20},header:()=>this.createProfessionalBillHeader(t.printConfigurations,t.printConfigurations?.pageSize,t.doctor,a),footer:(s,o)=>this.createBillFooter(s,o,t.printConfigurations),content:[this.createBillTitle(),this.createBillPatientInfo(n,t.consultation,t.printConfigurations,t.doctor),this.createBillServicesTable(t.consultation),...t.consultation.associatedReceipt?[this.createAssociatedReceiptSection(t.consultation.associatedReceipt,t.consultation.payments)]:[]],styles:this.styles,pageBreakBefore:function(s,o,i){return!!(s.table&&s.table.body&&s.table.body.length>15)},info:{title:"Tax Invoice cum Bill of Supply",author:"Professional Medical System",subject:"Patient Bill and Tax Invoice"},compress:!1};return ms.createPdf(r)}async generatePharmacyBillPDF(t,n){ms||await UA();const a=t.pharmacyBill,r=t.pharmacyConfigurations||{},s={pageSize:"A4",pageOrientation:"landscape",pageMargins:[40,60,40,40],defaultStyle:{fontSize:10,columnGap:20},header:()=>r.useHeader?this.createPharmacyBillHeader(r):null,footer:()=>null,content:[this.createPharmacyBillTitle(n,a,r),this.createPharmacyBillItemsTable(a),this.createPharmacyBillBottomSection(a)],styles:this.styles,pageBreakBefore:function(o,i,c){return!!(o.table&&o.table.body&&o.table.body.length>15)},info:{title:"Pharmacy Bill",author:"Professional Medical System",subject:"Pharmacy Bill"},compress:!1};return ms.createPdf(s)}async generateMedicalFitnessCertificatePDF(t,n,a){ms||await UA();const r=a?.pageSize||"A4";let s=null;if(a?.headerImagePath&&a?.doctorId)try{const y=await yd(a.doctorId,a.headerImagePath);s=await cp(y)}catch(y){console.error("Failed to load header image for PDF:",y)}let o=null;a?.headerSize!==void 0&&a?.headerSize!==null&&(o=Math.round(a.headerSize*72));const i=y=>{if(!y)return"";try{const w=new Date(y+"T12:00:00"),b=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],x=w.getDate(),T=b[w.getMonth()],D=w.getFullYear();return`${x} ${T} ${D}`}catch{return y}},c=t.patientName||n.name||"N/A",A=t.patientAge||n.age||"N/A",d=t.purpose||"",f=t.validityPeriod||"",m=t.additionalNotes||"";i(t.certificateDate);let v=`This is to certify that ${c}, aged ${A} years, is medically fit for ${d}. This certificate is valid for ${f}.`;m&&(v+=` ${m}`);const p={consultationDate:t.certificateDate,createdAt:t.certificateDate},g={pageSize:this.getPageSize(r),pageMargins:this.getPageMargins(r,o),defaultStyle:{fontSize:10,columnGap:20},header:()=>a?.useHeader?this.createProfessionalMedicalHeader(a,r,s,o):null,footer:(y,w)=>a?.useFooter?this.createMedicalFooter(y,w,a):null,content:[this.createProfessionalPatientCard(n,p),{text:"MEDICAL FITNESS CERTIFICATE",style:"prescriptionHeader",margin:[0,20,0,20]},{table:{headerRows:0,widths:["*"],body:[[{stack:[{text:v,style:"adviceText",margin:[0,0,0,20]}],margin:[12,0,12,0]}]]},layout:"noBorders",margin:[0,0,0,30]},{table:{headerRows:0,widths:["*"],body:[[{stack:[{canvas:[{type:"line",x1:0,y1:0,x2:200,y2:0,lineWidth:1,lineColor:"#1a202c"}],margin:[0,0,0,5]},{text:t.doctorName||a?.doctorName||"Dr. [Doctor Name]",fontSize:12,color:"#1a202c",margin:[0,0,0,3]},{text:i(t.certificateDate),fontSize:10,color:"#4a5568",margin:[0,0,0,3]},...a?.doctorRegistrationNumber?[{text:`Reg. No: ${a.doctorRegistrationNumber}`,fontSize:10,color:"#4a5568",margin:[0,0,0,0]}]:[]],margin:[12,0,12,0]}]]},layout:"noBorders",margin:[0,30,0,0]}],styles:this.styles,pageBreakBefore:function(y,w,b){return!1},info:{title:"Medical Fitness Certificate",author:"Professional Medical System",subject:"Medical Fitness Certificate"},compress:!1};return ms.createPdf(g)}async generateLeaveOfAbsencePDF(t,n,a){ms||await UA();const r=a?.pageSize||"A4";let s=null;if(a?.headerImagePath&&a?.doctorId)try{const b=await yd(a.doctorId,a.headerImagePath);s=await cp(b)}catch(b){console.error("Failed to load header image for PDF:",b)}let o=null;a?.headerSize!==void 0&&a?.headerSize!==null&&(o=Math.round(a.headerSize*72));const i=b=>{if(!b)return"";try{const x=new Date(b+"T12:00:00"),T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],D=x.getDate(),k=T[x.getMonth()],S=x.getFullYear();return`${D} ${k} ${S}`}catch{return b}},c=t.patientName||n.name||"N/A",A=t.patientAge||n.age||"N/A",d=t.activity||"",f=t.reason||"",m=i(t.tillDate),v=t.additionalNotes||"",p=i(t.certificateDate);let g=`This is to certify that ${c}, aged ${A} years, should be granted leave of absence from ${d}`;m&&(g+=` till ${m}`),g+=` for the reason ${f}.`,v&&(g+=` ${v}`);const y={consultationDate:t.certificateDate,createdAt:t.certificateDate},w={pageSize:this.getPageSize(r),pageMargins:this.getPageMargins(r,o),defaultStyle:{fontSize:10,columnGap:20},header:()=>a?.useHeader?this.createProfessionalMedicalHeader(a,r,s,o):null,footer:(b,x)=>a?.useFooter?this.createMedicalFooter(b,x,a):null,content:[this.createProfessionalPatientCard(n,y),{text:"LEAVE OF ABSENCE CERTIFICATE",style:"prescriptionHeader",margin:[0,20,0,20]},{table:{headerRows:0,widths:["*"],body:[[{stack:[{text:g,style:"adviceText",margin:[0,0,0,20]}],margin:[12,0,12,0]}]]},layout:"noBorders",margin:[0,0,0,30]},{table:{headerRows:0,widths:["*"],body:[[{stack:[{canvas:[{type:"line",x1:0,y1:0,x2:200,y2:0,lineWidth:1,lineColor:"#1a202c"}],margin:[0,0,0,5]},{text:t.doctorName||a?.doctorName||"Dr. [Doctor Name]",fontSize:12,color:"#1a202c",margin:[0,0,0,3]},{text:p,fontSize:10,color:"#4a5568",margin:[0,0,0,3]},...a?.doctorRegistrationNumber?[{text:`Reg. No: ${a.doctorRegistrationNumber}`,fontSize:10,color:"#4a5568",margin:[0,0,0,0]}]:[]],margin:[12,0,12,0]}]]},layout:"noBorders",margin:[0,30,0,0]}],styles:this.styles,pageBreakBefore:function(b,x,T){return!1},info:{title:"Leave of Absence Certificate",author:"Professional Medical System",subject:"Leave of Absence Certificate"},compress:!1};return ms.createPdf(w)}async generateReceiptPDF(t,n){await UA(),console.log("Generating receipt PDF with data:",t);const a=t.consultation,r=t.printConfigurations||{},s=r.pageSize||"A4";let o=null;if(r?.headerImagePath&&r?.doctorId)try{const A=await yd(r.doctorId,r.headerImagePath);o=await cp(A)}catch(A){console.error("Failed to load header image for PDF:",A)}let i=null;r?.headerSize!==void 0&&r?.headerSize!==null?i=Math.round(r.headerSize*72):t?.headerSize!==void 0&&(i=t.headerSize);const c={pageSize:this.getPageSize(s),pageMargins:this.getPageMargins(s,i),header:()=>r?.useHeader?this.createProfessionalMedicalHeader(r,s,o,i):null,footer:(A,d)=>r?.useFooter?this.createReceiptFooter(A,d,r):null,content:[this.createReceiptTitle(),this.createReceiptPatientInfo(n,a,t),this.createReceiptServicesTable(a),...this.createReceiptPaymentSection(a)],styles:this.styles,info:{title:"Payment Receipt",author:"Professional Medical System",subject:"Patient Payment Receipt"}};return ms.createPdf(c)}createReceiptTitle(){return{text:"PAYMENT RECEIPT",style:"receiptTitle",alignment:"center",margin:[0,0,0,15]}}createReceiptPatientInfo(t,n,a={}){return{table:{headerRows:0,widths:["33%","33%","34%"],body:[[{stack:[{text:"Patient Information",style:"sectionHeader",margin:[0,0,0,3]},{text:n.patientName||t.name||t.patientName||"Unknown Patient",style:"patientInfo"},{text:`ID: ${n.patientId||t.patientId||"N/A"}`,style:"patientInfo"}],margin:[6,3,6,3]},{stack:[{text:"Appointment Details",style:"sectionHeader",margin:[0,0,0,3]},{text:`Dr. ${n.doctorName||a?.doctor?.doctorName||"Unknown Doctor"}`,style:"patientInfo"},{text:`Date: ${this.formatReceiptDate(n.appointmentDate)}`,style:"patientInfo"}],margin:[6,3,6,3]},{stack:[{text:"Receipt Information",style:"sectionHeader",margin:[0,0,0,3]},{text:n.receiptNumber||n.identifier||"N/A",style:"patientInfo"},{text:`Date: ${this.formatReceiptDate(n.receiptDate||n.paymentReceiptDate)}`,style:"patientInfo"}],margin:[6,3,6,3]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,0,0,10]}}createReceiptServicesTable(t){const n=t.services||[];if(n.length===0)return{text:"No services recorded",style:"noDataText",margin:[0,10]};const a=n.some(i=>parseFloat(i.discountAmount)>0);let r,s;a?(r=[{text:"Description",style:"tableHeader"},{text:"Base Cost per unit",style:"tableHeader",alignment:"right"},{text:"Discount per unit",style:"tableHeader",alignment:"right"},{text:"Quantity",style:"tableHeader",alignment:"center"},{text:"Total",style:"tableHeader",alignment:"right"}],s=["35%","20%","20%","10%","15%"]):(r=[{text:"Description",style:"tableHeader"},{text:"Base Cost per unit",style:"tableHeader",alignment:"right"},{text:"Quantity",style:"tableHeader",alignment:"center"},{text:"Total",style:"tableHeader",alignment:"right"}],s=["45%","25%","15%","15%"]);const o=[r];return n.forEach(i=>{const c=parseFloat(i.baseCost)||0,A=parseFloat(i.discountAmount)||0,d=parseInt(i.quantity)||1,f=(c-A)*d;let m;a?m=[{text:i.serviceDescription||"Service",style:"tableCell"},{text:this.formatAmount(c),style:"tableCell",alignment:"right"},{text:this.formatAmount(A),style:"tableCell",alignment:"right"},{text:d.toString(),style:"tableCell",alignment:"center"},{text:this.formatAmount(f),style:"tableCell",alignment:"right"}]:m=[{text:i.serviceDescription||"Service",style:"tableCell"},{text:this.formatAmount(c),style:"tableCell",alignment:"right"},{text:d.toString(),style:"tableCell",alignment:"center"},{text:this.formatAmount(f),style:"tableCell",alignment:"right"}],o.push(m)}),[{table:{headerRows:0,widths:["*"],body:[[{text:"Item Details",style:"sectionHeader",margin:[6,3,6,3]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,0,0,2]},{table:{headerRows:1,widths:s,body:o},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0",fillColor:function(i){return i===0?"#f8f9fa":null}},margin:[0,0,0,5]},this.createReceiptSummary(t,a)]}createReceiptSummary(t,n){const a=t.subtotal||0,r=t.totalLineDiscount||0,s=parseFloat(t.additionalDiscount)||0,o=t.grandTotal||0,i=[];return i.push(["Subtotal:",this.formatAmount(a)]),n&&r>0&&i.push(["Line Discounts:",`-${this.formatAmount(r)}`]),s>0&&i.push(["Additional Discount:",`-${this.formatAmount(s)}`]),i.push(["Grand Total:",this.formatAmount(o)]),{table:{headerRows:0,widths:["70%","30%"],body:i.map(([c,A])=>[{text:c,style:c==="Grand Total:"?"summaryLabelBold":"summaryLabel",alignment:"right",margin:[5,2,5,2]},{text:A,style:c==="Grand Total:"?"summaryValueBold":"summaryValue",alignment:"right",margin:[5,2,5,2]}])},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,2,0,10]}}createReceiptPaymentSection(t){const n=t.grandTotal||0,a=t.totalPaid||0,r=t.balanceDue||0,s=t.payments||[],o=[];if(o.push({table:{headerRows:0,widths:["*"],body:[[{text:"Payment Information",style:"sectionHeader",margin:[6,3,6,3]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,0,0,2]}),o.push({table:{headerRows:0,widths:["33%","33%","34%"],body:[[{stack:[{text:"Total Amount",style:"summaryLabel",margin:[0,0,0,2]},{text:this.formatAmount(n),style:"summaryValueBold"}],margin:[6,8,6,8]},{stack:[{text:"Paid Amount",style:"summaryLabel",margin:[0,0,0,2]},{text:this.formatAmount(a),style:"summaryValuePaid"}],margin:[6,8,6,8]},{stack:[{text:"Balance Due",style:"summaryLabel",margin:[0,0,0,2]},{text:this.formatAmount(r),style:r>0?"summaryValueDue":"summaryValuePaid"}],margin:[6,8,6,8]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,0,0,10]}),s&&s.length>0){o.push({text:"Payment History",style:"summaryLabel",margin:[6,5,6,5]});const i=[[{text:"Date",style:"tableHeader"},{text:"Mode",style:"tableHeader"},{text:"Amount",style:"tableHeader",alignment:"right"}]];s.forEach(c=>{i.push([{text:this.formatReceiptDate(c.paymentDate),style:"tableCell"},{text:c.mode||"Cash",style:"tableCell"},{text:this.formatAmount(c.amount),style:"tableCell",alignment:"right"}])}),o.push({table:{headerRows:1,widths:["40%","30%","30%"],body:i},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0",fillColor:function(c){return c===0?"#f8f9fa":null}},margin:[0,0,0,10]})}else o.push({stack:[{text:"Payment History",style:"summaryLabel",margin:[6,5,6,2]},{text:"No payments recorded",style:"noDataText",margin:[0,5,0,5]}]});return o}formatAmount(t){if(t==null)return"0.00";const n=parseFloat(t)||0;return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(n)}formatReceiptDate(t){if(!t)return"N/A";try{return new Date(t).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return t}}formatDateTime(t){if(!t)return"N/A";try{return new Date(t*1e3).toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return t}}createBillTitle(){return{text:"Tax Invoice cum Bill of Supply",style:"receiptTitle",alignment:"center",margin:[0,10,0,15]}}createProfessionalBillHeader(t,n="A4",a=null,r=null){const s=this.getHeaderMargins(n,r);return{table:{headerRows:0,widths:["*"],body:[[{stack:[{columns:[{width:"40%",stack:[{text:`Dr. ${t.doctorName}`,style:"doctorName"},{text:t.doctorDegrees||"MBBS",style:"doctorCredentials"},{text:`Reg. No: ${t.doctorRegistrationNumber}`,style:"registrationInfo"}]},{width:"60%",stack:[...t.clinicAddress?[{stack:t.clinicAddress.split(/\r?\n|\r/).map(o=>({text:o.trim(),fontSize:10,color:"#4a5568",alignment:"right",margin:[0,1,0,1]})),margin:[0,5,0,2]}]:[],...t.contactNumber?[{text:` ${t.contactNumber}`,fontSize:10,color:"#4a5568",alignment:"right"}]:[],...t.email?[{text:`Email: ${t.email}`,fontSize:10,color:"#4a5568",alignment:"right"}]:[]]}]},{canvas:[{type:"line",x1:0,y1:4,x2:500,y2:4,lineWidth:2,lineColor:"#2b6cb0"},{type:"line",x1:0,y1:8,x2:500,y2:8,lineWidth:1,lineColor:"#4a5568"}],margin:[0,10,0,0],alignment:"center"}],margin:s}]]},layout:"noBorders",margin:[0,0,0,20]}}createBillPatientInfo(t,n,a,r=null){return{table:{headerRows:0,widths:["50%","50%"],body:[[{stack:[{text:"BILL TO:",style:"sectionHeader",alignment:"left"},{text:t.patientName||t.name||"Unknown Patient",style:"patientInfo"},{text:`Patient ID: ${t.patientId||"N/A"} | Age: ${n.patientAge||t.age||"N/A"}`,style:"patientInfo"}],margin:[12,8,12,8]},{stack:[{text:`Invoice No: ${n.billNumber}`,style:"patientInfo"},{text:`Date: ${this.formatReceiptDate(n.billDate)}`,style:"patientInfo"},{text:`Appointment Date: ${this.formatReceiptDate(n.appointmentDate)}`,style:"patientInfo"},...r?.isGST&&r?.gstIdentifier?[{text:`GST No: ${r.gstIdentifier}`,style:"patientInfo",bold:!0}]:[]],margin:[12,8,12,8],alignment:"left"}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,0,0,15]}}createBillServicesTable(t){const n=t.services||[];if(n.length===0)return{text:"No services found",style:"noDataText"};const a=n.some(c=>parseFloat(c.discountAmount)>0);let r,s;a?(r=[{text:"Sr.",style:"tableHeader",fontSize:9},{text:"Description",style:"tableHeader",fontSize:9},{text:"HSN/SAC Code",style:"tableHeader",fontSize:9},{text:"Base Cost per unit (incl. GST)",style:"tableHeader",fontSize:9},{text:"Discount per unit",style:"tableHeader",fontSize:9},{text:"GST%",style:"tableHeader",fontSize:9},{text:"Taxable Value",style:"tableHeader",fontSize:9},{text:"GST Amount",style:"tableHeader",fontSize:9},{text:"Quantity",style:"tableHeader",fontSize:9},{text:"Total",style:"tableHeader",fontSize:9}],s=["4%","16%","9%","11%","10%","7%","11%","10%","8%","14%"]):(r=[{text:"Sr.",style:"tableHeader",fontSize:9},{text:"Description",style:"tableHeader",fontSize:9},{text:"HSN/SAC Code",style:"tableHeader",fontSize:9},{text:"Base Cost per unit (incl. GST)",style:"tableHeader",fontSize:9},{text:"GST%",style:"tableHeader",fontSize:9},{text:"Taxable Value",style:"tableHeader",fontSize:9},{text:"GST Amount",style:"tableHeader",fontSize:9},{text:"Quantity",style:"tableHeader",fontSize:9},{text:"Total",style:"tableHeader",fontSize:9}],s=["4%","19%","11%","13%","8%","12%","12%","9%","12%"]);const o=[r];n.forEach((c,A)=>{let d;a?d=[{text:(A+1).toString(),style:"tableCell"},{text:c.serviceDescription||"N/A",style:"tableCell"},{text:c.hsnSacCode||"N/A",style:"tableCell",alignment:"center"},{text:this.formatAmount(c.baseCost),style:"tableCell",alignment:"right"},{text:this.formatAmount(c.discountAmount),style:"tableCell",alignment:"right"},{text:`${c.gstPercent||0}%`,style:"tableCell",alignment:"center"},{text:this.formatAmount(c.gstExclusiveAmount||0),style:"tableCell",alignment:"right"},{text:this.formatAmount(c.gstAmount),style:"tableCell",alignment:"right"},{text:c.quantity?.toString()||"1",style:"tableCell",alignment:"center"},{text:this.formatAmount(c.totalWithGst),style:"tableCell",alignment:"right",bold:!0}]:d=[{text:(A+1).toString(),style:"tableCell"},{text:c.serviceDescription||"N/A",style:"tableCell"},{text:c.hsnSacCode||"N/A",style:"tableCell",alignment:"center"},{text:this.formatAmount(c.baseCost),style:"tableCell",alignment:"right"},{text:`${c.gstPercent||0}%`,style:"tableCell",alignment:"center"},{text:this.formatAmount(c.gstExclusiveAmount||0),style:"tableCell",alignment:"right"},{text:this.formatAmount(c.gstAmount),style:"tableCell",alignment:"right"},{text:c.quantity?.toString()||"1",style:"tableCell",alignment:"center"},{text:this.formatAmount(c.totalWithGst),style:"tableCell",alignment:"right",bold:!0}],o.push(d)});const i=[];return a&&i.push([{text:"Base Cost Total (incl. GST):",style:"summaryLabel",fontSize:9,alignment:"right"},{text:this.formatAmount(t.baseSubtotal),style:"summaryValue",fontSize:9,alignment:"right"}],[{text:"Line Item Discounts:",style:"summaryLabel",fontSize:9,alignment:"right"},{text:`-${this.formatAmount(t.totalLineDiscount)}`,style:"summaryValue",fontSize:9,alignment:"right"}],[{text:"Subtotal after Discounts (incl. GST):",style:"summaryLabel",fontSize:9,alignment:"right"},{text:this.formatAmount(t.baseSubtotal-t.totalLineDiscount),style:"summaryValue",fontSize:9,alignment:"right"}]),i.push([{text:"Taxable Value Total:",style:"summaryLabel",fontSize:9,alignment:"right"},{text:this.formatAmount(t.totalTaxableValue||0),style:"summaryValue",fontSize:9,alignment:"right"}],[{text:"GST Amount:",style:"summaryLabel",fontSize:9,alignment:"right"},{text:this.formatAmount(t.totalGSTAmount),style:"summaryValue",fontSize:9,alignment:"right"}]),t.additionalDiscount>0&&i.push([{text:"Additional Discount:",style:"summaryLabel",fontSize:9,alignment:"right"},{text:`-${this.formatAmount(t.additionalDiscount)}`,style:"summaryValue",fontSize:9,alignment:"right"}]),i.push([{text:"Grand Total (incl. GST):",style:"summaryLabelBold",fontSize:10,alignment:"right"},{text:this.formatAmount(t.grandTotal),style:"summaryValueBold",fontSize:10,alignment:"right"}]),[{table:{headerRows:1,widths:s,body:o},layout:{hLineWidth:(c,A)=>c===0||c===1?2:1,vLineWidth:()=>1,hLineColor:()=>"#2b6cb0",vLineColor:()=>"#e2e8f0",fillColor:c=>c===0?"#f8fafc":null},margin:[0,0,0,10]},{table:{headerRows:0,widths:["70%","30%"],body:i},layout:{hLineWidth:(c,A)=>c===A.table.body.length-1?2:0,vLineWidth:()=>0,hLineColor:()=>"#2b6cb0",fillColor:(c,A)=>c===A.table.body.length-1?"#f1f5f9":null},margin:[0,5,0,15]}]}createAssociatedReceiptSection(t,n=[]){const a=[{text:"ASSOCIATED PAYMENT RECEIPT",style:"sectionHeader",margin:[0,15,0,10]}];if(t){if(a.push({table:{headerRows:0,widths:["50%","50%"],body:[[{stack:[{text:"Receipt Information:",style:"summaryLabel"},{text:`Receipt No: ${t.identifier}`,style:"receiptInfo"},{text:`Receipt Date: ${this.formatReceiptDate(t.paymentReceiptDate)}`,style:"receiptInfo"}],margin:[8,8,8,8]},{stack:[{text:"Payment Summary:",style:"summaryLabel"},{text:`Total Paid: ${this.formatAmount(n.reduce((r,s)=>r+(parseFloat(s.amount)||0),0))}`,style:"summaryValuePaid"},{text:`Balance Due: ${this.formatAmount(Math.max(0,t.balanceDue||0))}`,style:t.balanceDue>0?"summaryValueDue":"summaryValuePaid"}],margin:[8,8,8,8]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,0,0,10]}),n&&n.length>0){const r=[[{text:"Date",style:"tableHeader"},{text:"Method",style:"tableHeader"},{text:"Amount",style:"tableHeader"}]];n.forEach(s=>{r.push([{text:s.paymentDate||this.formatReceiptDate(s.paymentDate)||"N/A",style:"tableCell"},{text:s.paymentMethod||s.mode||"N/A",style:"tableCell"},{text:this.formatAmount(s.amount),style:"tableCell",alignment:"right"}])}),a.push({table:{headerRows:1,widths:["35%","30%","35%"],body:r},layout:{hLineWidth:s=>s===0||s===1?2:1,vLineWidth:()=>1,hLineColor:()=>"#2b6cb0",vLineColor:()=>"#e2e8f0",fillColor:s=>s===0?"#f8fafc":null},margin:[0,0,0,10]})}}else a.push({text:"No associated payment receipt found",style:"noDataText"});return a}createPharmacyBillTitle(t,n,a){const r=n.patientId||t.patientId||"N/A",s=n.patientName||t.name||t.patientName||"Unknown Patient";return{columns:[{width:"40%",text:"Tax Invoice cum Bill of Supply",style:"receiptTitle",fontSize:16,alignment:"left"},{width:"60%",table:{headerRows:0,widths:["50%","50%"],body:[[{text:`Patient: ${s} (ID${r})`,style:"patientInfo",fontSize:9,margin:[0,0,0,0]},{text:`Doctor: ${n.doctorName||"Unknown"}`,style:"patientInfo",fontSize:9,alignment:"right",margin:[0,0,0,0]}],[{text:`Invoice No.: ${n.identifier||"N/A"}`,style:"patientInfo",fontSize:9,margin:[0,1,0,0]},{text:`Date: ${this.formatReceiptDate(n.billDate)}`,style:"patientInfo",fontSize:9,alignment:"right",margin:[0,1,0,0]}]]},layout:"noBorders",alignment:"right"}],margin:[0,3,0,3]}}createPharmacyBillHeader(t){const n=t.header||"";return{table:{headerRows:0,widths:["*"],body:[[{stack:[{columns:[{width:"*",stack:n?n.split(/\r?\n|\r/).map(a=>a.trim()).filter(a=>a).map((a,r,s)=>({text:a,fontSize:r===0?14:12,color:r===0?"#1a202c":"#4a5568",alignment:"left",margin:[0,r===0?3:1,0,r===s.length-1?0:.5]})):[{text:"",fontSize:10}]},{width:"auto",stack:t.gstNumber?[{text:`GSTIN: ${t.gstNumber}`,fontSize:10,color:"#4a5568",alignment:"right",margin:[0,3,0,0]}]:[]}],margin:[0,0,0,0]},{canvas:[{type:"line",x1:0,y1:4,x2:762,y2:4,lineWidth:2,lineColor:"#2b6cb0"},{type:"line",x1:0,y1:8,x2:762,y2:8,lineWidth:1,lineColor:"#4a5568"}],margin:[0,3,0,0],alignment:"center"}],margin:[40,10,40,8]}]]},layout:"noBorders",margin:[0,0,0,3]}}createPharmacyBillPatientInfo(t,n,a){const r=n.patientId||t.patientId||"N/A",s=n.patientName||t.name||t.patientName||"Unknown Patient";return{table:{headerRows:0,widths:["35%","30%","35%"],body:[[{stack:[{text:`Patient: ${s} (ID${r})`,style:"patientInfo"},...n.patientPhone?[{text:`Phone: ${n.patientPhone}`,style:"patientInfo",margin:[0,2,0,0]}]:[]],margin:[6,2,6,2]},{stack:[{text:`Doctor: ${n.doctorName||"Unknown"}`,style:"patientInfo"}],margin:[6,2,6,2]},{columns:[{width:"auto",text:`Invoice No.: ${n.identifier||"N/A"}`,style:"patientInfo"},{width:"*",text:`Date: ${this.formatReceiptDate(n.billDate)}`,style:"patientInfo",alignment:"right"}],margin:[6,2,6,2]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,0,0,8]}}createPharmacyBillItemsTable(t){const n=t.items||[];if(n.length===0)return{text:"No items found",style:"noDataText",margin:[0,10]};const a=[{text:"Item",style:"tableHeader",fontSize:9},{text:"HSN",style:"tableHeader",alignment:"center",fontSize:9},{text:"Batch",style:"tableHeader",fontSize:9},{text:"Expiry",style:"tableHeader",fontSize:9},{text:"MRP/Unit",style:"tableHeader",alignment:"right",fontSize:8},{text:"Discount",style:"tableHeader",alignment:"right",fontSize:9},{text:"Taxable/Unit",style:"tableHeader",alignment:"right",fontSize:8},{text:"GST",style:"tableHeader",alignment:"right",fontSize:9},{text:"Final/Unit",style:"tableHeader",alignment:"right",fontSize:9},{text:"Qty",style:"tableHeader",alignment:"right",fontSize:9},{text:"Total",style:"tableHeader",alignment:"right",fontSize:9}],r=["24%","7%","8%","8%","8%","9%","9%","5%","9%","5%","8%"],s=[a];return n.forEach((o,i)=>{const c=o.taxableValuePerUnit!==void 0?o.taxableValuePerUnit:this.calculatePharmacyTaxableValuePerUnit(o),A=o.finalValuePerUnit!==void 0?o.finalValuePerUnit:this.calculatePharmacyFinalValuePerUnit(o),d=o.itemTotal!==void 0?o.itemTotal:this.calculatePharmacyItemTotal(o);let f="N/A",m=!1;if(o.expiryDate){const b=typeof o.expiryDate=="number"?new Date(o.expiryDate*1e3):new Date(o.expiryDate);if(!isNaN(b.getTime())){f=this.formatReceiptDate(o.expiryDate);const x=new Date;x.setHours(0,0,0,0),b.setHours(0,0,0,0),m=b<x}}const p=[{text:o.medicineName||"N/A",fontSize:9,bold:!0}];o.marketer&&p.push({text:"  ",fontSize:9,bold:!0},{text:o.marketer,fontSize:9});const g=o.batchNumber||"N/A",y=o.mrp&&o.unitsPerPack&&o.unitsPerPack>0?o.mrp/o.unitsPerPack:0,w=[{text:p,style:"tableCell",fontSize:9},{text:o.hsnCode||"N/A",style:"tableCell",fontSize:9,alignment:"center"},{text:g,style:"tableCell",fontSize:9},{text:f,style:"tableCell",fontSize:9,color:m?"#c53030":"#1a202c"},{text:this.formatAmount(y),style:"tableCell",fontSize:9,alignment:"right"},{text:`${o.discountPercentage||0}%`,style:"tableCell",fontSize:9,alignment:"right"},{text:this.formatAmount(c),style:"tableCell",fontSize:9,alignment:"right"},{text:`${o.gstPercentage||0}%`,style:"tableCell",fontSize:9,alignment:"right"},{text:this.formatAmount(A),style:"tableCell",fontSize:9,alignment:"right"},{text:(o.quantityUnits||0).toString(),style:"tableCell",fontSize:9,alignment:"right"},{text:this.formatAmount(d),style:"tableCell",fontSize:9,alignment:"right",bold:!0}];s.push(w)}),{table:{headerRows:1,widths:r,body:s},layout:{hLineWidth:(o,i)=>o===0||o===1?2:1,vLineWidth:()=>1,hLineColor:()=>"#2b6cb0",vLineColor:()=>"#e2e8f0"},margin:[0,0,0,3]}}calculatePharmacyTaxableValuePerUnit(t){if(!t.mrp||!t.unitsPerPack||t.unitsPerPack<=0)return 0;const n=parseFloat(t.mrp)||0,a=parseFloat(t.unitsPerPack)||1,r=parseFloat(t.gstPercentage)||0,s=parseFloat(t.discountPercentage)||0,o=n/a,i=1+r/100,c=o/i,A=1-s/100;return c*A}calculatePharmacyFinalValuePerUnit(t){if(!t.mrp||!t.unitsPerPack||t.unitsPerPack<=0)return 0;const n=this.calculatePharmacyTaxableValuePerUnit(t),r=1+(parseFloat(t.gstPercentage)||0)/100;return n*r}calculatePharmacyItemTotal(t){if(!t.mrp||!t.unitsPerPack||t.unitsPerPack<=0)return 0;const n=this.calculatePharmacyFinalValuePerUnit(t),a=parseFloat(t.quantityUnits)||0;return n*a}createPharmacyBillSummary(t){const n=[],a=(c,A,d=!1,f=9)=>{const m=d?{text:c,fontSize:f,bold:!0}:{text:c,fontSize:f},v=d?{text:A,fontSize:f,bold:!0}:{text:A,fontSize:f};n.push({columns:[{text:m.text,fontSize:m.fontSize,bold:m.bold,alignment:"right"},{text:v.text,fontSize:v.fontSize,bold:v.bold,alignment:"right",margin:[8,0,0,0]}],margin:[0,.5,0,.5]})};a("Total MRP:",this.formatAmount(t.totalMrp||0)),a("Total Discount:",`-${this.formatAmount(t.totalDiscount||0)}`);const r=this.formatAmount(t.totalGst||0);a("Total GST:",r);const s=this.formatAmount(t.totalCgst||0),o=this.formatAmount(t.totalSgst||0);n.push({columns:[{width:"*",text:"",fontSize:9},{width:"auto",text:`(CGST: ${s}, SGST: ${o})`,fontSize:9,alignment:"right"}],margin:[0,.5,0,.5]}),t.additionalDiscountAmount>0&&a("Additional Discount:",`-${this.formatAmount(t.additionalDiscountAmount)}`,!1),a("Net Amount:",this.formatAmount(t.netAmount||0),!0);const i=t.roundOff||0;return a("Round Off:",`${i>0?"+":""}${this.formatAmount(i)}`),a("Final Amount:",this.formatAmount(t.finalAmount||0),!0),{stack:n,margin:[0,0,0,8],alignment:"right"}}createPharmacyBillBottomSection(t){const n=[];t.payments&&t.payments.length>0?(n.push({text:"Payment Information",style:"sectionHeader",margin:[0,0,0,5]}),t.payments.forEach(s=>{const o=this.formatAmount(s.amount),i=s.mode||"Cash";n.push({text:`${o} - ${i}`,fontSize:9,margin:[0,2,0,2]})})):(n.push({text:"Payment Information",style:"sectionHeader",margin:[0,0,0,5]}),n.push({text:"No payments recorded",fontSize:9,color:"#718096",margin:[0,2,0,2]}));const a={stack:[{text:"",fontSize:10},{text:"Sign",style:"sectionHeader",alignment:"center",margin:[0,0,0,0]}],margin:[10,0,10,0]},r=this.createPharmacyBillSummary(t);return{columns:[{width:"33%",stack:n,margin:[0,5,10,0]},{width:"33%",stack:[a],margin:[10,5,10,0]},{width:"34%",stack:[r],margin:[10,5,0,0]}],margin:[0,10,0,0]}}createPharmacyBillFooter(t,n,a){return{margin:[40,5,40,15],table:{widths:["*"],body:[[{stack:[{text:"This is a computer generated bill",style:"disclaimer"}],border:[!1,!0,!1,!1],borderColor:["","#e2e8f0","",""]}]]},layout:"noBorders"}}createBillFooter(t,n,a){return{margin:[40,10,40,20],table:{widths:["*"],body:[[{stack:[{text:"Tax Invoice cum Bill of Supply - Computer Generated",style:"disclaimer"},{text:"This is a system generated bill and does not require physical signature.",style:"disclaimer"},...a?.clinicName?[{text:`${a.clinicName} - Professional Medical Services`,style:"medicalFooter"}]:[],{text:`Page ${t} of ${n}`,style:"medicalFooter"}],border:[!1,!0,!1,!1],borderColor:["","#e2e8f0","",""]}]]},layout:"noBorders"}}}const RA=new h_e,Nw=["Dermatology","Cardiology","Dentistry","Endocrinology","Neurology","Pediatrics","Orthopedics","Psychiatry","Ophthalmology","Gynecology"],pT=["Tablet","Capsule","Chewable Tablet","Effervescent Tablet","Sublingual Tablet","Gelatin coated Tablet","Soft Gelatin Capsule","Soft Gelatine Capsule","Capsule ER","Capsule XR","Eye Capsule","Vaginal Capsule","Capsule Combipack","TabCap","RotaCap","Instacap","TransCap","AliCap","RediCap","RespiCap","NexCap","OxyCap","Vegicap","Captab","Caplet","Pellet","Softule","Opticops","Diskette","Grain","Powder","Powder for Injection","Powder for Oral Suspension","Powder for Inhalation","Powder for Infusion","Powder for Oral Solution","Dusting Powder","Dry Syrup","Dry Suspension","Syrup","Solution","Suspension","Lotion","Liquid","Oral Solution","Oral Suspension","Solution for Injection","Solution for Infusion","Solution for Inhalation","Suspension for Injection","Nasal Solution","Ophthalmic Solution","Ophthalmic Suspension","Redimix Suspension","Rediuse Suspension","Oral Liquid","Oral Emulsion","Emulsion","Ophthalmic Emulsion","Elixir","Tonic","Linctus","Mouth Wash","Mouthwash","Expectorant","Cream","Ointment","Gel","Eye Gel","Eye Ointment","Ophthalmic Gel","Oral Gel","Dental Gel","Vaginal Gel","Rectal Gel","Rectal Ointment","Rectal Cream","Vaginal Cream","Eye Cream","Paste","Oral Paste","Gum Paint","Mouth Paint","Paint","Toothpaste","Serum","Oil","Moisturiser","Shampoo","Conditioner","Face Wash","Soap","Scrub","Cleanser","Liniment","Foam","Drop","Eye Drop","Ear Drop","Oral Drop","Nasal Drop","Eye/Ear Drop","Spray","Nasal Spray","Mouth Spray","Vaginal Spray","Intranasal Spray","Inhaler","Respule","Autohaler","Multihaler","Transihaler","Transpule","Oxipule","Nebuliser","Aerosol","Injection","Infusion","Prefilled Syringe","Water for Injection","Solvent for Injection","Ampule","Ampoule","Vial","Patch","Transdermal Patch","Vaginal Suppository","Suppository","Pessary","Enema","Lozenge","Pastille","Chewing Gum","Gummy","Gum","Bio-Adhesive","Disintegrating Strip","Strip","Film","Gargle","Oral Jelly","Jelly","Nail Lacquer","Intrauterine system","Wipe","Kit","Combo Pack","Tablet Combikit","Sachet","Bottle","Pen","Disposable Pen","Pre-filled Pen","Cartridge","Tube","Jar","Pouch","Bar","Box","Toothbrush","Vaccine","Granule","Particle","Husk","Various","Unit"],Vw=["Strip","Bottle","Box","Sachet","Tube","Vial","Ampoule","Ampule","Cartridge","Pouch","Jar","Kit","Combo Pack","Unit","Bag","Can","Dose","Pack"],dH=[{label:"No Translation",value:"none"},{label:"Gujarati",value:"gujarati"},{label:"Marathi",value:"marathi"},{label:"Hindi",value:"hindi"},{label:"Kannada",value:"kannada"},{label:"Malayalam",value:"malayalam"},{label:"Telugu",value:"telugu"},{label:"Tamil",value:"tamil"}],AH=[{name:"Practo",value:"practo"},{name:"Eka.Care",value:"ekacare"},{name:"Healthplix",value:"healthplix"},{name:"Evamed Custom Template",value:"evamed-custom"},{name:"TatvaCare",value:"tatvacare"}],fH=[{name:"Patient Records",value:"patients",disabled:!1}],gT=["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal","Andaman and Nicobar Islands","Chandigarh","Dadra and Nagar Haveli and Daman and Diu","Delhi","Jammu and Kashmir","Ladakh","Lakshadweep","Puducherry"],TE=Object.freeze(Object.defineProperty({__proto__:null,dataImportTypes:fH,doctorSpecialization:Nw,emrSystems:AH,indianStates:gT,packTypeOptions:Vw,productPhysicalForm:pT,translationLanguages:dH},Symbol.toStringTag,{value:"Module"})),p_e={class:"d-flex align-center"},g_e={key:0,class:"d-flex justify-center align-center pdf-loading"},y_e={key:1,class:"pdf-viewer"},__e=["src"],w_e={key:2,class:"d-flex justify-center align-center pdf-error"},b_e={__name:"pdf-share-component",props:{contentType:{type:String,required:!0,validator:e=>["consultation","treatment-plan","receipt","bill","pharmacy-bill","certificate","leave-of-absence"].includes(e)},data:{type:Object,required:!0},patient:{type:Object,required:!0}},emits:["pdfGenerated"],setup(e,{emit:t}){const n=e,a=t,r=ra(),s=ne(()=>r.getters["doctorModule/currentDoctor"]),{showWarning:o}=ca(),i=ne({get:()=>r.state.selectedTranslationLanguage,set:Z=>r.dispatch("updateSelectedTranslationLanguage",Z)}),c=ne(()=>{const Z=n.data?.printConfigurations?.headerSize;return Z!=null?Math.round(Z*72):130}),A=V(!1),d=V(!1),f=V(null),m=V(null),v=V(null),p=V(!1),g=V(!1),y=V(!1);let w=null;const b={consultation:{title:"Prescription PDF",filenamePrefix:"prescription"},"treatment-plan":{title:"Treatment Plan PDF",filenamePrefix:"treatment-plan"},receipt:{title:"Payment Receipt PDF",filenamePrefix:"receipt"},bill:{title:"Tax Invoice cum Bill of Supply PDF",filenamePrefix:"bill"},"pharmacy-bill":{title:"Pharmacy Bill PDF",filenamePrefix:"pharmacy-bill"},certificate:{title:"Medical Fitness Certificate PDF",filenamePrefix:"certificate"},"leave-of-absence":{title:"Leave of Absence PDF",filenamePrefix:"leave-of-absence"}},x=ne(()=>b[n.contentType]);ne(()=>x.value.title);const T=ne(()=>{const Z=n.patient.name||n.patient.patientName||"patient",re=new Date().toISOString().split("T")[0];return`${x.value.filenamePrefix}-${Z}-${re}.pdf`}),D=V(""),k=V(!1),S=ne(()=>{const Z=n.data.printConfigurations,re={...n.data,translatedPatientNotes:D.value,translationLanguage:i.value,translationFailed:i.value&&i.value!=="none"&&n.data.consultation?.patientNotes?.trim()&&E(n.data.consultation.patientNotes)&&!D.value};if(n.contentType!=="pharmacy-bill"&&n.contentType!=="certificate"&&n.contentType!=="leave-of-absence"&&(re.headerSize=c.value),(n.contentType==="certificate"||n.contentType==="leave-of-absence")&&(re.printConfigurations=Z||{}),Z&&Z.doctorName)return re;const q=s.value,P={doctorName:q?.doctorName||"Doctor",doctorDegrees:q?.doctorDegrees||"MBBS",doctorRegistrationNumber:q?.doctorRegistrationNumber||"REG001",email:q?.email||"",clinicAddress:q?.clinicAddress||`Medical Center
Healthcare District`,contactNumber:q?.contactNumber||"+1-234-567-8900",useHeader:!0,pageSize:"A4",doctorId:q?.id||1};return{...re,printConfigurations:P}}),E=Z=>{if(!Z||!Z.trim())return!1;const re=Z.trim();return re.length<3?!1:![/^[-_.\/\\]+$/,/^[nN][aA]$/,/^[nN]\/[aA]$/,/^[nN][iI][lL]$/,/^[nN][oO][nN][eE]$/,/^[nN][oO][tT]\s+[aA][pP][pP][lL][iI][cC][aA][bB][lL][eE]$/i,/^[\s\-\.\,\;\:]*$/].some(P=>P.test(re))},C=async()=>{if(n.contentType!=="consultation"||!n.data.consultation?.patientNotes?.trim()||!i.value||i.value==="none"||!E(n.data.consultation.patientNotes)){D.value="";return}try{k.value=!0;const{translationLanguages:Z}=await Tr(async()=>{const{translationLanguages:J}=await Promise.resolve().then(()=>TE);return{translationLanguages:J}},void 0,import.meta.url),q=Z.find(J=>J.value===i.value)?.label||i.value,{translateText:P}=await Tr(async()=>{const{translateText:J}=await import("./translationUtils-Bgo0F942.js");return{translateText:J}},[],import.meta.url),G=await P(n.data.consultation.patientNotes,q);if(!G||G.trim()===""||G===n.data.consultation.patientNotes){o(`Translation to ${q} temporarily unavailable - showing original text`),D.value="";return}D.value=G}catch(Z){console.error("Error translating patient notes:",Z);const{translationLanguages:re}=await Tr(async()=>{const{translationLanguages:G}=await Promise.resolve().then(()=>TE);return{translationLanguages:G}},void 0,import.meta.url),P=re.find(G=>G.value===i.value)?.label||i.value;o(`Translation to ${P} temporarily unavailable - showing original text`),D.value=""}finally{k.value=!1}};je(()=>[n.data,n.patient],async()=>{y.value||(n.contentType==="consultation"&&i.value&&i.value!=="none"&&n.data.consultation?.patientNotes?.trim()?await C():D.value="",await new Promise(Z=>setTimeout(Z,100)),F())});const U=async(Z,re)=>{w&&(clearTimeout(w),w=null),w=setTimeout(async()=>{Z!==re&&n.data&&n.patient&&!y.value&&(n.contentType==="consultation"&&Z&&Z!=="none"&&n.data.consultation?.patientNotes?.trim()?await C():D.value="",await new Promise(q=>setTimeout(q,100)),F()),w=null},400)};je(i,(Z,re)=>{U(Z,re)}),dn(async()=>{n.contentType==="consultation"&&i.value&&i.value!=="none"&&n.data.consultation?.patientNotes?.trim()&&await C(),await new Promise(Z=>setTimeout(Z,200)),F()});const F=async()=>{if(y.value){console.log("PDF generation already in progress, skipping...");return}try{y.value=!0,console.log(`Generating ${n.contentType} PDF with Professional PDFMake...`),console.log("Data:",S.value),console.log("Patient:",n.patient),A.value=!0,m.value=null,d.value=!1,f.value=null;let Z;if(n.contentType==="consultation"?Z=await RA.generateConsultationPDF(S.value,n.patient):n.contentType==="treatment-plan"?Z=await RA.generateTreatmentPlanPDF(S.value,n.patient):n.contentType==="receipt"?Z=await RA.generateReceiptPDF(S.value,n.patient):n.contentType==="bill"?Z=await RA.generateBillPDF(S.value,n.patient):n.contentType==="pharmacy-bill"?Z=await RA.generatePharmacyBillPDF(S.value,n.patient):(n.contentType==="certificate"||n.contentType==="leave-of-absence")&&((S.value.documentData?.documentType||(n.contentType==="leave-of-absence"?"leave-of-absence":"medical-fitness-certificate"))==="leave-of-absence"?Z=await RA.generateLeaveOfAbsencePDF(S.value.documentData,n.patient,S.value.printConfigurations):Z=await RA.generateMedicalFitnessCertificatePDF(S.value.documentData,n.patient,S.value.printConfigurations)),!Z)throw new Error(`PDF generation not supported for content type: ${n.contentType}`);Z.getBlob(re=>{A.value=!1,y.value=!1,d.value=!0,v.value=re;const q=URL.createObjectURL(re);f.value=q,a("pdfGenerated",re),console.log("Professional PDF generation with PDFMake completed successfully")})}catch(Z){console.error("Error generating Professional PDF with PDFMake:",Z),m.value="Failed to generate PDF. Please try again.",A.value=!1,y.value=!1}},L=async()=>{f.value&&(URL.revokeObjectURL(f.value),f.value=null),v.value=null,await F()},H=async()=>{if(!v.value){console.error("No PDF to share");return}try{p.value=!0;const Z=await X(v.value),re=await q3(Z,T.value);if(re.success){const q=re.data.file_url;await ue(q),alert("Please check the browser window to complete sharing PDF via WhatsApp.")}else throw new Error(`Failed to upload PDF: ${re.error}`)}catch(Z){console.error("Error sharing PDF:",Z),alert(`Failed to share PDF: ${Z.message}`)}finally{p.value=!1}},ue=async Z=>{const re=s.value?.doctorName||"Your Doctor",q=n.patient.name||n.patient.patientName||"Patient",P=n.patient.contactNumber||n.patient.phoneNumber;let G;if(n.contentType==="consultation"){const M=er(S.value.consultation.consultationDate),te=S.value.consultation.followupDate?er(S.value.consultation.followupDate):"Not scheduled";G=`Hi ${q},

Your prescription from Dr.${re} for consultation on ${M} is ready.

 **View your prescription:** ${Z}
 (Please download document within 24 hours)

 Please follow the dosage instructions carefully and complete the full course of medication. 
 Please schedule your follow-up appointment for: ${te}.

 For any questions, please contact your doctor.`,S.value.doctor?.doctorReviewLink&&(G+=`

 Kindly leave your feedback for Dr.${re}: ${S.value.doctor.doctorReviewLink}`),G+=`

Best regards,
Dr.${re}`}else if(n.contentType==="treatment-plan"){const M=S.value.treatmentPlan.treatmentPlanName||"Treatment Plan",te=er(Rn());G=`Hello ${q},

Your treatment plan from Dr. ${re} is ready.

 **Treatment Plan:** ${M}
 **Date:** ${te}

 **View your treatment plan:** ${Z}
 (Please download document within 24 hours)

 Please follow the treatment schedule and contact us for any questions.

Best regards,
Dr. ${re}`}else if(n.contentType==="receipt"){const M=S.value.consultation.receiptNumber||"Receipt",te=er(S.value.consultation.receiptDate||Rn());G=`Hello ${q},

Your payment receipt from Dr. ${re} is ready.

 **Receipt Number:** ${M}
 **Receipt Date:** ${te}

 **View your receipt:** ${Z}
 (Please download document within 24 hours)

 Thank you for your payment. Please keep this receipt for your records.

Best regards,
Dr. ${re}`}else if(n.contentType==="bill"){const M=S.value.consultation.billNumber||"Bill",te=er(S.value.consultation.billDate||Rn()),Y=S.value.consultation.grandTotal||0;G=`Hello ${q},

Your tax invoice cum bill of supply from Dr. ${re} is ready.

 **Bill Number:** ${M}
 **Bill Date:** ${te}
 **Total Amount:** ${Y.toFixed(2)}

 **View your bill:** ${Z}
 (Please download document within 24 hours)

Best regards,
Dr. ${re}`}else if(n.contentType==="certificate"){const M=S.value.documentData||{},te=M.documentType||"medical-fitness-certificate",Y=M.certificateDate?er(M.certificateDate):er(Rn());if(te==="leave-of-absence"){const W=M.activity||"",ee=M.reason||"",ae=M.tillDate?er(M.tillDate):"";G=`Hello ${q},

Your leave of absence certificate from Dr. ${re} is ready.

 **Certificate Type:** Leave of Absence Certificate
 **Document Date:** ${Y}
${W?` **From:** ${W}`:""}
${ee?` **Reason:** ${ee}`:""}
${ae?` **Valid Till:** ${ae}`:""}

 **View your certificate:** ${Z}
 (Please download document within 24 hours)

 Please keep this certificate for your records.

Best regards,
Dr. ${re}`}else{const W=M.purpose||"medical fitness",ee=M.validityPeriod||"";G=`Hello ${q},

Your medical fitness certificate from Dr. ${re} is ready.

 **Certificate Type:** Medical Fitness Certificate
 **Certificate Date:** ${Y}
${` **Purpose:** ${W}`}
${ee?` **Validity:** ${ee}`:""}

 **View your certificate:** ${Z}
 (Please download document within 24 hours)

 Please keep this certificate for your records.

Best regards,
Dr. ${re}`}}else if(n.contentType==="leave-of-absence"){const M=S.value.documentData||{},te=M.certificateDate?er(M.certificateDate):er(Rn()),Y=M.activity||"",W=M.reason||"",ee=M.tillDate?er(M.tillDate):"";G=`Hello ${q},

Your leave of absence certificate from Dr. ${re} is ready.

 **Certificate Type:** Leave of Absence Certificate
 **Document Date:** ${te}
${Y?` **From:** ${Y}`:""}
${W?` **Reason:** ${W}`:""}
${ee?` **Valid Till:** ${ee}`:""}

 **View your certificate:** ${Z}
 (Please download document within 24 hours)

 Please keep this certificate for your records.

Best regards,
Dr. ${re}`}else if(n.contentType==="pharmacy-bill"){const M=S.value.pharmacyBill?.identifier||"Bill",te=er(S.value.pharmacyBill?.billDate||Rn()),Y=S.value.pharmacyBill?.finalAmount||0;G=`Hello ${q},

Your pharmacy bill from Dr. ${re} is ready.

 **Bill Number:** ${M}
 **Bill Date:** ${te}
 **Total Amount:** ${Y.toFixed(2)}

 **View your bill:** ${Z}
 (Please download document within 24 hours)

 Thank you for your purchase.

Best regards,
Dr. ${re}`}G||(G=`Hello ${q},

Your document from Dr. ${re} is ready.

 **View your document:** ${Z}
 (Please download document within 24 hours)

Best regards,
Dr. ${re}`);const J=`https://api.whatsapp.com/send?phone=${P}&text=${encodeURIComponent(G)}`;try{const{ipcRenderer:M}=window.require("electron"),te=await M.invoke("open-external",J);te.success?console.log("Successfully opened WhatsApp with system default browser"):(console.error("Failed to open WhatsApp:",te.error),window.open(J,"_blank","noopener,noreferrer"))}catch(M){console.error("Failed to use Electron IPC:",M),window.open(J,"_blank","noopener,noreferrer")}},ie=async()=>{if(!v.value){console.error("No PDF to share");return}try{g.value=!0;const Z=await X(v.value),re=await q3(Z,T.value);if(re.success){const q=re.data.file_url;await Q(q),alert("Please check your email client to complete sharing PDF via email.")}else throw new Error(`Failed to upload PDF: ${re.error}`)}catch(Z){console.error("Error sharing PDF via email:",Z),alert(`Failed to share PDF via email: ${Z.message}`)}finally{g.value=!1}},Q=async Z=>{const re=s.value?.doctorName||"Your Doctor",q=n.patient.name||n.patient.patientName||"Patient",P=n.patient.email||n.patient.emailAddress;let G,J;if(n.contentType==="consultation"){const te=er(S.value.consultation.consultationDate),Y=S.value.consultation.followupDate?er(S.value.consultation.followupDate):"Not scheduled";G=`Prescription - Consultation ${te} - Dr. ${re}`,J=`Dear ${q},

Your prescription from Dr. ${re} for the consultation on ${te} is ready for review.

You can access your prescription document by clicking the link below:

${Z}

Please note: This document will be available for download for 24 hours.

Important Instructions:
- Please follow the dosage instructions carefully
- Complete the full course of medication as prescribed
- Schedule your follow-up appointment for: ${Y}

If you have any questions or concerns, please contact our clinic directly.`,S.value.doctor?.doctorReviewLink&&(J+=`

We value your feedback. Please share your experience: ${S.value.doctor.doctorReviewLink}`),J+=`

Best regards,
Dr. ${re}
${s.value?.clinicAddress||""}
${s.value?.contactNumber||""}`}else if(n.contentType==="treatment-plan"){const te=S.value.treatmentPlan.treatmentPlanName||"Treatment Plan",Y=er(Rn());G=`Treatment Plan - ${te} - Dr. ${re}`,J=`Dear ${q},

Your treatment plan from Dr. ${re} has been prepared.

Treatment Plan Details:
- Plan Name: ${te}
- Date Created: ${Y}

You can access your treatment plan document by clicking the link below:

${Z}

Please note: This document will be available for download for 24 hours.

Please follow the treatment schedule as outlined in the document. If you have any questions or concerns, please contact our clinic directly.

Best regards,
Dr. ${re}
${s.value?.clinicAddress||""}
${s.value?.contactNumber||""}`}else if(n.contentType==="receipt"){const te=S.value.consultation.receiptNumber||"Receipt",Y=er(S.value.consultation.receiptDate||Rn());G=`Payment Receipt - ${te} - Dr. ${re}`,J=`Dear ${q},

Your payment receipt from Dr. ${re} is ready.

Receipt Details:
- Receipt Number: ${te}
- Receipt Date: ${Y}

You can access your receipt document by clicking the link below:

${Z}

Please note: This document will be available for download for 24 hours.

Thank you for your payment. Please keep this receipt for your records.

Best regards,
Dr. ${re}
${s.value?.clinicAddress||""}
${s.value?.contactNumber||""}`}else if(n.contentType==="bill"){const te=S.value.consultation.billNumber||"Bill",Y=er(S.value.consultation.billDate||Rn()),W=S.value.consultation.grandTotal||0;G=`Tax Invoice - ${te} - Dr. ${re}`,J=`Dear ${q},

Your tax invoice cum bill of supply from Dr. ${re} is ready.

Invoice Details:
- Bill Number: ${te}
- Bill Date: ${Y}
- Total Amount: ${W.toFixed(2)}

You can access your invoice document by clicking the link below:

${Z}

Please note: This document will be available for download for 24 hours.

Best regards,
Dr. ${re}
${s.value?.clinicAddress||""}
${s.value?.contactNumber||""}`}else if(n.contentType==="pharmacy-bill"){const te=S.value.pharmacyBill?.identifier||"Bill",Y=er(S.value.pharmacyBill?.billDate||Rn()),W=S.value.pharmacyBill?.finalAmount||0;G=`Pharmacy Bill - ${te} - Dr. ${re}`,J=`Dear ${q},

Your pharmacy bill from Dr. ${re} is ready.

Bill Details:
- Bill Number: ${te}
- Bill Date: ${Y}
- Total Amount: ${W.toFixed(2)}

You can access your pharmacy bill document by clicking the link below:

${Z}

Please note: This document will be available for download for 24 hours.

Thank you for your purchase.

Best regards,
Dr. ${re}
${s.value?.clinicAddress||""}
${s.value?.contactNumber||""}`}else if(n.contentType==="certificate"){const te=S.value.documentData||{},Y=te.certificateDate?er(te.certificateDate):er(Rn()),W=te.purpose||"medical fitness",ee=te.validityPeriod||"";G=`Medical Fitness Certificate - Dr. ${re}`,J=`Dear ${q},

Your medical fitness certificate from Dr. ${re} is ready.

Certificate Details:
- Certificate Type: Medical Fitness Certificate
- Certificate Date: ${Y}
${`- Purpose: ${W}`}
${ee?`- Validity: ${ee}`:""}

You can access your certificate document by clicking the link below:

${Z}

Please note: This document will be available for download for 24 hours.

Please keep this certificate for your records.

Best regards,
Dr. ${re}
${s.value?.clinicAddress||""}
${s.value?.contactNumber||""}`}else if(n.contentType==="leave-of-absence"){const te=S.value.documentData||{},Y=te.certificateDate?er(te.certificateDate):er(Rn()),W=te.activity||"",ee=te.reason||"",ae=te.tillDate?er(te.tillDate):"";G=`Leave of Absence Certificate - Dr. ${re}`,J=`Dear ${q},

Your leave of absence certificate from Dr. ${re} is ready.

Certificate Details:
- Certificate Type: Leave of Absence Certificate
- Document Date: ${Y}
${W?`- From: ${W}`:""}
${ee?`- Reason: ${ee}`:""}
${ae?`- Valid Till: ${ae}`:""}

You can access your certificate document by clicking the link below:

${Z}

Please note: This document will be available for download for 24 hours.

Please keep this certificate for your records.

Best regards,
Dr. ${re}
${s.value?.clinicAddress||""}
${s.value?.contactNumber||""}`}(!G||!J)&&(G=`Document from Dr. ${re}`,J=`Dear ${q},

Your document from Dr. ${re} is ready.

You can access your document by clicking the link below:

${Z}

Please note: This document will be available for download for 24 hours.

Best regards,
Dr. ${re}
${s.value?.clinicAddress||""}
${s.value?.contactNumber||""}`);let M="mailto:";P&&(M+=encodeURIComponent(P)),M+=`?subject=${encodeURIComponent(G)}&body=${encodeURIComponent(J)}`;try{const{ipcRenderer:te}=window.require("electron"),Y=await te.invoke("open-external",M);Y.success?console.log("Successfully opened email client with system default email application"):(console.error("Failed to open email client:",Y.error),window.open(M,"_blank","noopener,noreferrer"))}catch(te){console.error("Failed to use Electron IPC:",te),window.open(M,"_blank","noopener,noreferrer")}},X=Z=>new Promise((re,q)=>{const P=new FileReader;P.readAsDataURL(Z),P.onload=()=>{const G=P.result.split(",")[1];re(G)},P.onerror=G=>q(G)}),le=()=>{console.log("PDF loaded in iframe")};return Ii(()=>{w&&(clearTimeout(w),w=null),f.value&&URL.revokeObjectURL(f.value)}),(Z,re)=>{const q=I("v-select"),P=I("v-icon"),G=I("v-btn"),J=I("v-tooltip"),M=I("v-col"),te=I("v-row"),Y=I("v-card"),W=I("v-progress-circular"),ee=I("v-alert-title"),ae=I("v-alert");return R(),Ae(Ke,null,[l(te,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[l(M,{cols:"12"},{default:u(()=>[l(Y,{rounded:"0",class:"pa-0",color:"surfaceContainerHigh"},{default:u(()=>[l(te,{"no-gutters":"",align:"center",class:"px-2 py-1"},{default:u(()=>[l(M,{cols:"12",class:"d-flex align-center justify-end"},{default:u(()=>[h("div",p_e,[e.contentType==="consultation"?(R(),ve(q,{key:0,modelValue:i.value,"onUpdate:modelValue":re[0]||(re[0]=oe=>i.value=oe),items:Qe(dH),"item-title":"label","item-value":"value",label:"Translation Language",density:"compact",variant:"underlined",clearable:"",style:{"max-width":"200px"},class:"text-caption compact-select mr-2","hide-details":"",disabled:A.value},null,8,["modelValue","items","disabled"])):ye("",!0),l(J,{text:"WhatsApp PDF"},{activator:u(({props:oe})=>[l(G,Pe({rounded:"x-small",size:"small",onClick:H,class:"mr-1 btn-hover-base",disabled:!d.value,loading:p.value},oe),{default:u(()=>[l(P,{size:"large"},{default:u(()=>[...re[1]||(re[1]=[h("img",{src:Y_,alt:"Share PDF",class:"whatsapp-icon"},null,-1)])]),_:1})]),_:1},16,["disabled","loading"])]),_:1}),l(J,{text:"Email PDF"},{activator:u(({props:oe})=>[l(G,Pe({rounded:"x-small",size:"small",onClick:ie,class:"mr-1 btn-hover-base",disabled:!d.value,loading:g.value},oe),{default:u(()=>[l(P,{size:"large"},{default:u(()=>[...re[2]||(re[2]=[h("img",{src:$he,alt:"Email PDF",class:"email-icon"},null,-1)])]),_:1})]),_:1},16,["disabled","loading"])]),_:1}),l(G,{rounded:"x-small",size:"small",variant:"outlined",onClick:L,class:"btn-hover-base"},{default:u(()=>[l(P,{size:"large"},{default:u(()=>[...re[3]||(re[3]=[h("img",{src:_g,alt:"Refresh"},null,-1)])]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(te,{"no-gutters":"",class:"pdf-row"},{default:u(()=>[l(M,{cols:"12",class:"pdf-container"},{default:u(()=>[A.value?(R(),Ae("div",g_e,[l(W,{indeterminate:"",color:"primary",size:"64"}),re[4]||(re[4]=h("span",{class:"ml-4"},"Generating PDF...",-1))])):f.value?(R(),Ae("div",y_e,[h("iframe",{src:f.value,width:"100%",height:"100%",style:{border:"none","border-radius":"8px"},onLoad:le},null,40,__e)])):m.value?(R(),Ae("div",w_e,[l(ae,{type:"error",variant:"tonal"},{append:u(()=>[l(G,{onClick:L,variant:"text"},{default:u(()=>[...re[6]||(re[6]=[O("Retry",-1)])]),_:1})]),default:u(()=>[l(ee,null,{default:u(()=>[...re[5]||(re[5]=[O("Error generating PDF",-1)])]),_:1}),O(" "+K(m.value)+" ",1)]),_:1})])):ye("",!0)]),_:1})]),_:1})],64)}}},ph=qt(b_e,[["__scopeId","data-v-4fc007bd"]]),x_e={class:"text-center"},C_e={class:"text-center"},S_e={class:"text-body-2 text-medium-emphasis mb-4"},E_e={class:"pa-1"},B_e={class:"text-body-1 font-weight-medium"},k_e={class:"text-body-2 text-medium-emphasis"},T_e={class:"pa-1"},I_e={class:"text-body-1 font-weight-medium"},F_e={class:"text-body-2 text-medium-emphasis"},P_e={class:"pa-1"},D_e={class:"text-body-1 font-weight-medium"},U_e={class:"text-body-2 text-medium-emphasis"},R_e={key:0,class:"d-flex align-center"},N_e={key:1,class:"text-body-2 text-error"},V_e={key:2,class:"d-flex flex-column"},L_e={class:"text-body-2 font-weight-medium"},M_e={class:"text-caption text-medium-emphasis"},O_e={key:0},H_e={key:1},$_e={key:0,class:"text-caption text-medium-emphasis mt-1"},Q_e={key:0},G_e={class:"text-left"},z_e={class:"text-left"},K_e={class:"text-left"},W_e={class:"text-left"},j_e={class:"text-left"},q_e={key:0,class:"text-body-2 mb-1"},Y_e={class:"text-body-2 mb-1"},X_e={class:"text-body-2 mb-1"},J_e={key:0,class:"text-body-2 mb-1"},Z_e={class:"text-subtitle-1 font-weight-bold"},e2e={class:"text-h6"},t2e={class:"text-h6 text-success"},n2e={key:0,class:"text-center pa-4"},a2e={class:"text-left"},r2e={class:"text-left"},s2e={class:"text-right"},o2e={class:"text-right"},i2e={class:"text-center pa-4"},l2e={__name:"payment-receipt-view",props:{receiptId:{type:[String,Number],required:!0}},emits:["close","edit-receipt"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ca(),o=ra(),i=ne(()=>o.getters["doctorModule/currentDoctor"]),c=ne(()=>i.value?.doctorName||"Unknown Doctor"),A=V(!1),d=V(!1),f=V(null),m=V(null),v=V([]),p=V("view"),g=V({}),y=V(null),w=V(null),b=V(!1),x=V(null),T=ne(()=>m.value?.services||[]),D=uT(T,ne(()=>m.value?.additionalDiscount||0)),{subtotal:k,totalLineDiscount:S,finalGrandTotal:E,calculateServiceTotal:C}=D,U=ne(()=>Array.isArray(v.value)?v.value.reduce((P,G)=>P+(parseFloat(G.amount)||0),0):0),F=ne(()=>Math.max(0,E.value-U.value)),L=ne(()=>m.value?{patientName:m.value.patientName||"Unknown Patient",patientId:m.value.patientId||"N/A",patientContactNumber:m.value.patientContactNumber,doctorName:c.value,receiptNumber:m.value.identifier,receiptDate:m.value.paymentReceiptDate,appointmentDate:m.value.appointmentDate,services:m.value.services||[],subtotal:k.value,totalLineDiscount:S.value,additionalDiscount:parseFloat(m.value.additionalDiscount)||0,grandTotal:E.value,totalPaid:U.value,balanceDue:F.value,payments:v.value||[]}:null),H=async()=>{if(!n.receiptId){f.value="No receipt ID provided";return}A.value=!0,f.value=null;try{console.log("Loading receipt data for ID:",n.receiptId);const P=await zM(n.receiptId);if(P.error)throw new Error(P.error.message||"Failed to load receipt");m.value=P.data,console.log("Receipt data loaded:",m.value),P.data.treatmentPlanId&&(y.value=P.data.treatmentPlanId,await ue()),await ie(),await Q()}catch(P){console.error("Error loading receipt data:",P),f.value=P.message||"Failed to load receipt data",s(f.value)}finally{A.value=!1}},ue=async()=>{if(!y.value){w.value=null;return}b.value=!0,x.value=null;try{console.log("Loading treatment plan data for ID:",y.value);const P=await xf(y.value);if(P.error)throw new Error(P.error.message||"Failed to load treatment plan");w.value=P.data,console.log("Treatment plan data loaded:",w.value)}catch(P){console.error("Error loading treatment plan data:",P),x.value=P.message||"Failed to load treatment plan"}finally{b.value=!1}},ie=async()=>{if(!n.receiptId){v.value=[];return}d.value=!0;try{console.log("Loading payments for receipt ID:",n.receiptId);const P=await bg(n.receiptId);P.success&&Array.isArray(P.data)?(v.value=P.data,console.log("Payments loaded:",v.value)):(console.warn("No payments found or invalid response:",P),v.value=[])}catch(P){console.error("Error loading receipt payments:",P),v.value=[]}finally{d.value=!1}},Q=async()=>{try{const P=o.state.doctorModule.doctorId;if(!P){console.warn("No doctor ID available for print configurations");return}const G=await hh(P);g.value=G.data||{},console.log("Print configurations fetched:",g.value)}catch(P){console.error("Error fetching print configs:",P),s("Failed to load print configurations")}},X=P=>{if(!P)return"";try{return new Date(P).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return P}},le=P=>{if(!P)return"";try{return new Date(P*1e3).toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return P}},Z=()=>{console.log("Edit receipt:",n.receiptId),a("edit-receipt",n.receiptId)},re=P=>{console.log("Receipt PDF generated successfully:",P),r("Receipt PDF generated successfully")},q=()=>{a("close")};return dn(()=>{H()}),(P,G)=>{const J=I("v-icon"),M=I("v-btn"),te=I("v-card-title"),Y=I("v-col"),W=I("v-row"),ee=I("v-tab"),ae=I("v-tabs"),oe=I("v-progress-circular"),j=I("v-label"),ce=I("v-card-text"),de=I("v-card"),_e=I("v-table"),Re=I("v-divider"),be=I("v-container"),Ee=I("v-tabs-window-item"),Ce=I("v-tabs-window");return R(),ve(de,{rounded:"lg",color:"surfaceContainer",flat:"",ripple:!1},{default:u(()=>[l(W,{"no-gutters":""},{default:u(()=>[l(Y,{cols:"12"},{default:u(()=>[l(te,{class:"d-flex align-center justify-space-between"},{default:u(()=>[G[3]||(G[3]=h("span",null,"Payment Receipt",-1)),l(M,{onClick:q,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(J,{size:"18"},{default:u(()=>[...G[2]||(G[2]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(W,{"no-gutters":""},{default:u(()=>[l(Y,{cols:"12"},{default:u(()=>[l(ae,{modelValue:p.value,"onUpdate:modelValue":G[0]||(G[0]=Be=>p.value=Be),color:"primary","bg-color":"surfaceContainerHigh","align-tabs":"start",class:"mx-3 mb-3"},{default:u(()=>[l(ee,{value:"view"},{default:u(()=>[l(J,{start:""},{default:u(()=>[...G[4]||(G[4]=[O("mdi-eye",-1)])]),_:1}),G[5]||(G[5]=O(" View Receipt ",-1))]),_:1}),l(ee,{value:"share"},{default:u(()=>[l(J,{start:""},{default:u(()=>[...G[6]||(G[6]=[O("mdi-share-variant",-1)])]),_:1}),G[7]||(G[7]=O(" Share Receipt ",-1))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(W,{"no-gutters":""},{default:u(()=>[l(Y,{cols:"12",class:"scroll-element"},{default:u(()=>[l(Ce,{modelValue:p.value,"onUpdate:modelValue":G[1]||(G[1]=Be=>p.value=Be)},{default:u(()=>[l(Ee,{value:"view"},{default:u(()=>[A.value?(R(),ve(W,{key:0,"no-gutters":""},{default:u(()=>[l(Y,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[h("div",x_e,[l(oe,{indeterminate:"",color:"primary",size:"64"}),G[8]||(G[8]=h("div",{class:"mt-4 text-subtitle-1"},"Loading receipt...",-1))])]),_:1})]),_:1})):f.value?(R(),ve(W,{key:1,"no-gutters":""},{default:u(()=>[l(Y,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[h("div",C_e,[l(J,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...G[9]||(G[9]=[O("mdi-alert-circle",-1)])]),_:1}),G[11]||(G[11]=h("div",{class:"text-h6 mb-2"},"Failed to Load Receipt",-1)),h("div",S_e,K(f.value),1),l(M,{color:"primary",onClick:H,"prepend-icon":"mdi-refresh"},{default:u(()=>[...G[10]||(G[10]=[O(" Try Again ",-1)])]),_:1})])]),_:1})]),_:1})):m.value?(R(),ve(be,{key:2,fluid:"",class:"pa-3"},{default:u(()=>[l(de,{flat:"",color:"surfaceContainerHigh",class:"mb-4 card-enhanced"},{default:u(()=>[l(ce,{class:"pb-1 pt-2"},{default:u(()=>[l(W,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(Y,{cols:"4"},{default:u(()=>[h("div",E_e,[l(j,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...G[12]||(G[12]=[O("Patient Information",-1)])]),_:1}),h("div",B_e,K(m.value.patientName||"Unknown Patient"),1),h("div",k_e,"ID: "+K(m.value.patientId||"N/A"),1)])]),_:1}),l(Y,{cols:"4"},{default:u(()=>[h("div",T_e,[l(j,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...G[13]||(G[13]=[O("Appointment Details",-1)])]),_:1}),h("div",I_e,"Dr. "+K(c.value),1),h("div",F_e,"Date: "+K(X(m.value.appointmentDate)),1)])]),_:1}),l(Y,{cols:"4"},{default:u(()=>[h("div",P_e,[l(j,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...G[14]||(G[14]=[O("Receipt Information",-1)])]),_:1}),h("div",D_e,K(m.value.identifier),1),h("div",U_e,"Date: "+K(X(m.value.paymentReceiptDate)),1)])]),_:1})]),_:1})]),_:1})]),_:1}),y.value?(R(),ve(de,{key:0,flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(ce,{class:"pb-2"},{default:u(()=>[l(W,{"no-gutters":"",align:"center",class:"mb-2"},{default:u(()=>[l(Y,{cols:"3",class:"d-flex align-center"},{default:u(()=>[...G[15]||(G[15]=[h("div",{class:"text-subtitle-1"},"Treatment Plan",-1)])]),_:1}),l(Y,{cols:"9"},{default:u(()=>[b.value?(R(),Ae("div",R_e,[l(oe,{indeterminate:"",size:"16",color:"primary",class:"mr-2"}),G[16]||(G[16]=h("span",{class:"text-body-2"},"Loading treatment plan...",-1))])):x.value?(R(),Ae("div",N_e,[l(J,{size:"16",class:"mr-1"},{default:u(()=>[...G[17]||(G[17]=[O("mdi-alert-circle",-1)])]),_:1}),O(" "+K(x.value),1)])):w.value?(R(),Ae("div",V_e,[h("div",L_e,K(w.value.treatmentPlanName),1),h("div",M_e,[O(" Status: "+K(w.value.status)+" ",1),w.value.startDate?(R(),Ae("span",O_e,"  Start: "+K(X(w.value.startDate)),1)):ye("",!0),w.value.endDate?(R(),Ae("span",H_e,"  End: "+K(X(w.value.endDate)),1)):ye("",!0)]),w.value.notes?(R(),Ae("div",$_e,[G[18]||(G[18]=h("strong",null,"Notes:",-1)),O(" "+K(w.value.notes.substring(0,80)),1),w.value.notes.length>80?(R(),Ae("span",Q_e,"...")):ye("",!0)])):ye("",!0)])):ye("",!0)]),_:1})]),_:1})]),_:1})]),_:1})):ye("",!0),l(de,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(ce,{class:"pb-2"},{default:u(()=>[G[23]||(G[23]=h("div",{class:"text-subtitle-1 mb-3"},"Item Details",-1)),l(_e,{density:"compact",class:"mb-3"},{default:u(()=>[G[19]||(G[19]=h("thead",null,[h("tr",null,[h("th",{class:"text-left",style:{width:"60px"}},"Sr. No"),h("th",{class:"text-left",style:{width:"300px"}},"Description"),h("th",{class:"text-left",style:{width:"120px"}},"Base Cost per unit ()"),h("th",{class:"text-left",style:{width:"120px"}},"Discount per unit ()"),h("th",{class:"text-left",style:{width:"100px"}},"Quantity"),h("th",{class:"text-left",style:{width:"120px"}},"Total ()")])],-1)),h("tbody",null,[(R(!0),Ae(Ke,null,Gt(m.value.services,(Be,Te)=>(R(),Ae("tr",{key:Te},[h("td",null,K(Te+1),1),h("td",G_e,K(Be.serviceDescription),1),h("td",z_e,K(Qe(dr)(Be.baseCost)),1),h("td",K_e,K(Qe(dr)(Be.discountAmount)),1),h("td",W_e,K(Be.quantity),1),h("td",j_e,K(Qe(dr)(Qe(C)(Be))),1)]))),128))])]),_:1}),l(Re,{class:"mb-3"}),l(W,{"no-gutters":""},{default:u(()=>[l(Y,{cols:"8",class:"text-right"},{default:u(()=>[G[20]||(G[20]=h("div",{class:"text-body-2 mb-1"},"Subtotal:",-1)),G[21]||(G[21]=h("div",{class:"text-body-2 mb-1"},"Line Discounts:",-1)),m.value.additionalDiscount>0?(R(),Ae("div",q_e,"Additional Discount:")):ye("",!0),G[22]||(G[22]=h("div",{class:"text-subtitle-1 font-weight-bold"},"Grand Total:",-1))]),_:1}),l(Y,{cols:"4",class:"text-right"},{default:u(()=>[h("div",Y_e,K(Qe(dr)(Qe(k))),1),h("div",X_e,"-"+K(Qe(dr)(Qe(S))),1),m.value.additionalDiscount>0?(R(),Ae("div",J_e,"-"+K(Qe(dr)(m.value.additionalDiscount)),1)):ye("",!0),h("div",Z_e,K(Qe(dr)(Qe(E))),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(de,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(ce,{class:"pb-2"},{default:u(()=>[G[32]||(G[32]=h("div",{class:"text-subtitle-1 mb-3"},"Payment Information",-1)),l(W,{"no-gutters":"",class:"mb-3"},{default:u(()=>[l(Y,{cols:"4"},{default:u(()=>[G[24]||(G[24]=h("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Total Amount",-1)),h("div",e2e,K(Qe(dr)(Qe(E))),1)]),_:1}),l(Y,{cols:"4"},{default:u(()=>[G[25]||(G[25]=h("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Paid Amount",-1)),h("div",t2e,K(Qe(dr)(U.value)),1)]),_:1}),l(Y,{cols:"4"},{default:u(()=>[G[26]||(G[26]=h("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Balance Due",-1)),h("div",{class:ct(["text-h6",F.value>0?"text-error":"text-success"])},K(Qe(dr)(F.value)),3)]),_:1})]),_:1}),d.value?(R(),Ae("div",n2e,[l(oe,{indeterminate:"",size:"32",color:"primary"}),G[27]||(G[27]=h("div",{class:"text-body-2 mt-2"},"Loading payments...",-1))])):v.value&&v.value.length>0?(R(),Ae(Ke,{key:1},[l(Re,{class:"mb-3"}),G[29]||(G[29]=h("div",{class:"text-subtitle-2 mb-2"},"Payment History",-1)),l(_e,{density:"compact"},{default:u(()=>[G[28]||(G[28]=h("thead",null,[h("tr",null,[h("th",{class:"text-left"},"Date"),h("th",{class:"text-left"},"Mode"),h("th",{class:"text-right"},"Amount"),h("th",{class:"text-right"},"Created")])],-1)),h("tbody",null,[(R(!0),Ae(Ke,null,Gt(v.value,Be=>(R(),Ae("tr",{key:Be.id},[h("td",a2e,K(X(Be.paymentDate)),1),h("td",r2e,K(Be.mode),1),h("td",s2e,K(Qe(dr)(Be.amount)),1),h("td",o2e,K(le(Be.createdAt)),1)]))),128))])]),_:1})],64)):(R(),Ae(Ke,{key:2},[l(Re,{class:"mb-3"}),h("div",i2e,[l(J,{size:"48",color:"outline",class:"mb-2"},{default:u(()=>[...G[30]||(G[30]=[O("mdi-currency-inr",-1)])]),_:1}),G[31]||(G[31]=h("div",{class:"text-body-2 text-medium-emphasis"},"No payments recorded",-1))])],64))]),_:1})]),_:1}),l(de,{flat:"",color:"surfaceContainerHigh",class:"card-enhanced"},{default:u(()=>[l(ce,{class:"d-flex justify-center gap-3 pb-2"},{default:u(()=>[l(M,{color:"secondary",variant:"outlined",onClick:Z,"prepend-icon":"mdi-pencil",class:"btn-hover-base"},{default:u(()=>[...G[33]||(G[33]=[O(" Edit Receipt ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})):ye("",!0)]),_:1}),l(Ee,{value:"share",class:"h-100"},{default:u(()=>[l(W,{"no-gutters":"",class:"h-100"},{default:u(()=>[l(Y,{cols:"12"},{default:u(()=>[l(ph,{"content-type":"receipt",data:{consultation:L.value,printConfigurations:g.value,doctor:i.value},patient:{name:m.value?.patientName,patientName:m.value?.patientName,patientId:m.value?.patientId,contactNumber:m.value?.patientContactNumber},onPdfGenerated:re},null,8,["data","patient"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}}},mH=qt(l2e,[["__scopeId","data-v-2cbfd0d5"]]),vH=async e=>{try{if(!e)throw new Error("Doctor ID is required");return{data:(await At.get(`/billreceipt/next-identifier/${e}`)).data.data,error:null}}catch(t){return console.error("Error getting next bill identifier:",t),t.response?.status===400&&t.response?.data?.error?.includes("No bill series found")?{data:null,error:{message:"No bill series found. Please create a bill series first in Admin Settings.",needsSeries:!0}}:{data:null,error:t}}},hH=async e=>{try{if(!e.doctorId||!e.appointmentId||!e.services)throw new Error("Doctor ID, Appointment ID, and services are required");if(!Array.isArray(e.services)||e.services.length===0)throw new Error("At least one service is required");return{data:(await At.post("/billreceipt/with-services",e)).data.data,error:null}}catch(t){return console.error("Error creating bill with services:",t),{data:null,error:t}}},yT=async e=>{try{if(!e)throw new Error("Bill ID is required");return{data:(await At.get(`/billreceipt/${e}/with-services`)).data.data,error:null}}catch(t){return console.error("Error getting bill with services:",t),{data:null,error:t}}},pH=async(e,t)=>{try{if(!e)throw new Error("Bill ID is required");if(!t.services||!Array.isArray(t.services)||t.services.length===0)throw new Error("At least one service is required");return{data:(await At.put(`/billreceipt/${e}/with-services`,t)).data.data,error:null}}catch(n){return console.error("Error updating bill with services:",n),{data:null,error:n}}},IE=async(e,t,n,a=null)=>{try{const r=e.state.doctorModule?.doctorId;if(!r)throw new Error("No doctor selected. Please select a doctor first.");return console.log("Fetching bills for date range:",{startDate:t,endDate:n,doctorId:r,treatmentPlanId:a}),await gH(t,n,r,a)}catch(r){return console.error("Error fetching bills for date range:",r),{success:!1,error:{message:r.message||"Failed to fetch bills for date range",status:500}}}},gH=async(e,t,n=null,a=null)=>{try{console.log("Fetching bills for date range with filters:",{startDate:e,endDate:t,doctorId:n,treatmentPlanId:a});const r=new URLSearchParams;e&&r.append("startDate",e),t&&r.append("endDate",t),n&&r.append("doctor_id",n.toString()),a&&r.append("treatmentPlanId",a.toString());const s=`/billreceipt/date-range?${r.toString()}`;return{success:!0,data:(await At.get(s)).data.data,message:"Bills fetched successfully for date range"}}catch(r){return console.error("Error fetching bills for date range:",r),{success:!1,error:{message:r.response?.data?.error||r.message||"Failed to fetch bills for date range",status:r.response?.status||500}}}},_T=async e=>{try{if(!e)throw new Error("Bill ID is required");return console.log("Fetching payment receipts for bill ID:",e),{success:!0,data:(await At.get("/paymentreceipt",{params:{bill_id:e}})).data.data||[],message:"Payment receipts fetched successfully"}}catch(t){return console.error("Error fetching payment receipts for bill:",t),{success:!1,error:{message:t.response?.data?.error||t.message||"Failed to fetch payment receipts",status:t.response?.status||500}}}},Zn=e=>!e&&e!==0?"0":`${Number(e).toLocaleString("en-IN")}`,u2e=Object.freeze(Object.defineProperty({__proto__:null,createBillWithServices:hH,fetchAllBillsForDateRange:gH,fetchBillsForDateRange:IE,formatBillAmount:Zn,getBillWithServices:yT,getNextBillIdentifier:vH,getReceiptsByBill:_T,updateBillWithServices:pH},Symbol.toStringTag,{value:"Module"}));function wT(e,t){const n=g=>{const y=parseFloat(g.baseCost)||0,w=parseInt(g.quantity)||1,b=parseFloat(g.gstPercent)||0,x=parseFloat(g.discountAmount)||0,T=y*w,D=x*w,k=Math.max(0,T-D),S=b>0?Math.round(k*b/(100+b)):0,E=k-S,C=k;return{baseAmount:T,gstAmount:S,gstExclusiveAmount:E,subtotalWithGST:C,discountAmount:D,total:C}},a=ne(()=>e.value.map(g=>({...g,...n(g)}))),r=ne(()=>e.value.reduce((g,y)=>{const w=parseFloat(y.baseCost)||0,b=parseInt(y.quantity)||1;return g+w*b},0)),s=ne(()=>e.value.reduce((g,y)=>{const w=parseFloat(y.baseCost)||0,b=parseInt(y.quantity)||1,x=parseFloat(y.gstPercent)||0,T=parseFloat(y.discountAmount)||0,D=w*b,k=T*b,S=Math.max(0,D-k),E=x>0?Math.round(S*x/(100+x)):0;return g+E},0)),o=ne(()=>e.value.reduce((g,y)=>{const w=n(y).total;return g+w},0)),i=ne(()=>e.value.reduce((g,y)=>{const w=parseFloat(y.discountAmount)||0,b=parseInt(y.quantity)||1;return g+w*b},0)),c=ne(()=>e.value.reduce((g,y)=>{const w=n(y);return g+(w.gstExclusiveAmount||0)},0)),A=ne(()=>{const g=i.value,y=parseFloat(t.value)||0;return g+y}),d=ne(()=>{const g=o.value,y=parseFloat(t.value)||0;return Math.max(0,g-y)}),f=ne(()=>e.value.some(g=>g.serviceDescription&&g.serviceDescription.trim().length>0&&parseFloat(g.baseCost)>0)),m=ne(()=>{const g={};return e.value.forEach(y=>{const w=parseFloat(y.gstPercent)||0;if(w>0){g[w]||(g[w]={rate:w,baseAmount:0,gstAmount:0});const b=parseFloat(y.baseCost)||0,x=parseInt(y.quantity)||1,T=parseFloat(y.discountAmount)||0,D=b*x,k=T*x,S=Math.max(0,D-k),E=Math.round(S*w/(100+w)),C=S-E;g[w].baseAmount+=C,g[w].gstAmount+=E}}),Object.values(g)}),v=g=>n(g),p=ne(()=>r.value===0?0:s.value/r.value*100);return{servicesWithTotals:a,baseSubtotal:r,totalGSTAmount:s,subtotalWithGST:o,totalLineDiscount:i,totalTaxableValue:c,totalAllDiscounts:A,finalGrandTotal:d,gstBreakdown:m,effectiveTaxRate:p,hasValidService:f,calculateServiceTotal:n,getServiceGSTDetails:v}}const c2e={class:"pa-1"},d2e={class:"text-body-1 font-weight-medium"},A2e={class:"text-body-2 text-medium-emphasis"},f2e={class:"pa-1"},m2e={class:"text-body-1 font-weight-medium"},v2e={class:"text-body-2 text-medium-emphasis"},h2e={class:"pa-1"},p2e={class:"text-body-2 text-medium-emphasis"},g2e={class:"d-flex flex-column py-1"},y2e={class:"text-body-2 font-weight-medium"},_2e={class:"text-caption text-medium-emphasis"},w2e={key:0},b2e={class:"text-caption"},x2e={key:0,class:"ml-2"},C2e={key:0,class:"text-left",style:{width:"100px"}},S2e={key:0},E2e={class:"text-body-2 font-weight-medium"},B2e={class:"text-body-2 font-weight-medium"},k2e={class:"text-body-2 font-weight-medium"},T2e={key:0,class:"text-body-2 mb-1"},I2e={key:1,class:"text-body-2 mb-1"},F2e={key:2,class:"text-body-2 mb-1"},P2e={key:3,class:"text-body-2 mb-1"},D2e={key:0,class:"text-body-2 mb-1"},U2e={key:1,class:"text-body-2 mb-1"},R2e={key:2,class:"text-body-2 mb-1"},N2e={class:"text-body-2 mb-1"},V2e={class:"text-body-2 mb-1"},L2e={key:3,class:"text-body-2 mb-1"},M2e={class:"text-subtitle-1 font-weight-bold"},O2e={class:"text-body-2 mb-1"},H2e={class:"text-body-2 mb-1"},$2e={__name:"bill-receipt-create",props:{appointment:{type:Object,required:!0}},emits:["close","billCreated","view-bill"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ca(),o=ra(),i=ne(()=>o.state.doctorModule.doctorId),c=ne(()=>o.getters["doctorModule/currentDoctor"]),A=ne(()=>c.value?.doctorName||"Unknown Doctor"),d=ne(()=>c.value?.isGST||!1),f=V({patientName:n.appointment?.patient_name||"",patientId:n.appointment?.patientId||"",appointmentDate:n.appointment?.appointmentDate||"",billDate:Rn(),appointmentId:n.appointment?.id||null,doctorId:i.value,additionalDiscount:0}),m=V([{serviceDescription:"",hsnSacCode:"",baseCost:null,gstPercent:0,quantity:1,discountAmount:0,isFromHistory:!1}]),v=V(!1),p=V(null),g=V([]),y=V(!1);ne(()=>p.value?g.value.find(ce=>ce.id===p.value):null);const w=V(!1),b=mh,x=V([{amount:null,mode:"Cash",paymentDate:Rn(),datePickerMenu:!1}]);V(!1);const T=wT(m,ne(()=>f.value.additionalDiscount)),{servicesWithTotals:D,baseSubtotal:k,totalGSTAmount:S,subtotalWithGST:E,totalLineDiscount:C,totalTaxableValue:U,totalAllDiscounts:F,finalGrandTotal:L,hasValidService:H,gstBreakdown:ue,calculateServiceTotal:ie}=T,Q=ne(()=>m.value.some(ce=>(parseFloat(ce.discountAmount)||0)>0)),X=()=>{m.value.push({serviceDescription:"",hsnSacCode:"",baseCost:null,gstPercent:0,quantity:1,discountAmount:0,isFromHistory:!1})},le=ce=>{m.value.length>1?m.value.splice(ce,1):s("At least one service is required")},Z=(ce,de)=>{m.value[ce]&&(m.value[ce].serviceDescription=de)},re=(ce,de)=>{console.log("Service selected:",de),de&&typeof de=="object"&&!de.isUserTyped?(m.value[ce]={...m.value[ce],serviceDescription:de.serviceDescription,hsnSacCode:de.hsnSacCode||"",baseCost:de.baseCost||0,gstPercent:de.gstPercent||de.gstRate||0,isFromHistory:!1},console.log("Updated service with baseCost:",m.value[ce].baseCost,"and GST%:",m.value[ce].gstPercent,"and HSN/SAC:",m.value[ce].hsnSacCode)):de===null&&(m.value[ce]={...m.value[ce],serviceDescription:"",hsnSacCode:"",baseCost:0,gstPercent:0,isFromHistory:!1})},q=ne(()=>{const ce=H.value,de=f.value.doctorId&&f.value.appointmentId;return console.log("Bill validation check:",{hasValidService:ce,hasValidAppointment:de,billData:f.value}),ce&&de}),P=async()=>{if(!f.value.patientId||!f.value.doctorId){console.log("Missing patient or doctor ID for loading treatment plans");return}y.value=!0;try{console.log("Loading treatment plans for patient:",f.value.patientId,"doctor:",f.value.doctorId);const ce=await xg(f.value.patientId,f.value.doctorId);if(ce.error)throw new Error(ce.error.message||"Failed to load treatment plans");g.value=ce.data||[],console.log("Loaded treatment plans:",g.value.length)}catch(ce){console.error("Error loading treatment plans:",ce),s("Failed to load treatment plans: "+(ce.message||"Unknown error")),g.value=[]}finally{y.value=!1}},G=ne(()=>x.value.reduce((ce,de)=>ce+(parseFloat(de.amount)||0),0)),J=ne(()=>L.value-G.value),M=ce=>{if(!ce)return"";try{return new Date(ce).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return ce}},te=()=>{x.value.push({amount:null,mode:"Cash",paymentDate:Rn(),datePickerMenu:!1})},Y=ce=>{x.value.length>1?x.value.splice(ce,1):x.value[0]={amount:null,mode:"Cash",paymentDate:Rn(),datePickerMenu:!1}},W=ce=>{if(!ce)return null;try{if(typeof ce=="string")return ce.includes("T")?ce.split("T")[0]:ce;if(ce instanceof Date){const de=ce.getFullYear(),_e=String(ce.getMonth()+1).padStart(2,"0"),Re=String(ce.getDate()).padStart(2,"0");return`${de}-${_e}-${Re}`}return null}catch(de){return console.error("Error parsing payment date:",de),null}},ee=(ce,de)=>{if(ce)if(ce instanceof Date){const _e=ce.getFullYear(),Re=String(ce.getMonth()+1).padStart(2,"0"),be=String(ce.getDate()).padStart(2,"0");de.paymentDate=`${_e}-${Re}-${be}`}else typeof ce=="string"&&(de.paymentDate=ce);else de.paymentDate="";de.datePickerMenu=!1},ae=async()=>{if(!q.value){s("Please fill in all required fields and add at least one valid service");return}w.value=!0;try{const{data:ce,error:de}=await vH(f.value.doctorId);if(de){if(de.needsSeries){s("No bill series found. Please create a bill series first in Admin Settings  GST Bill Series Configuration.");return}throw new Error(de.message||"Failed to get next bill identifier")}console.log("Next bill identifier:",ce);const _e={doctorId:f.value.doctorId,appointmentId:f.value.appointmentId,billDate:f.value.billDate,additionalDiscount:f.value.additionalDiscount||0,treatmentPlanId:v.value?p.value:null,services:m.value.map(Ce=>({serviceDescription:Ce.serviceDescription,hsnSacCode:Ce.hsnSacCode||"",baseCost:Ce.baseCost,gstPercent:Ce.gstPercent||0,quantity:Ce.quantity||1,discountAmount:Ce.discountAmount||0}))};console.log("Creating bill with data:",_e);const{data:Re,error:be}=await hH(_e);if(be)throw new Error(be.message||"Failed to create bill");console.log("Bill created successfully:",Re),x.value.some(Ce=>Ce.amount&&parseFloat(Ce.amount)>0&&Ce.mode&&Ce.paymentDate)&&await oe(Re.id),r("Bill created successfully!"),a("billCreated",Re),a("view-bill",Re.id)}catch(ce){console.error("Error generating bill:",ce),s("Failed to generate bill. Please try again.")}finally{w.value=!1}},oe=async ce=>{try{console.log("Creating payment receipt for bill:",ce);const de={doctorId:f.value.doctorId,appointmentId:f.value.appointmentId,billId:ce,paymentReceiptDate:Rn(),additionalDiscount:0,isThreeC:!0,treatmentPlanId:v.value?p.value:null};console.log("Creating payment receipt with payload:",de);const _e=await GM(de);if(_e.error){console.error("Error creating payment receipt:",_e.error),s("Bill created but failed to create payment receipt: "+_e.error.message);return}const Re=_e.data.id;console.log("Payment receipt created:",Re);const be=x.value.filter(Ee=>Ee.amount&&parseFloat(Ee.amount)>0&&Ee.mode&&Ee.paymentDate);console.log("Creating payments:",be);for(const Ee of be){const Ce={amount:Number(Ee.amount),mode:Ee.mode,paymentDate:Ee.paymentDate,paymentReceiptId:Re,appointmentId:f.value.appointmentId};console.log("Creating payment with payload:",Ce);const Be=await fh(Ce);Be.success?console.log("Payment created successfully:",Be.data):(console.error("Error creating payment:",Be.error),s(`Failed to create payment: ${Be.error?.message||"Unknown error"}`))}x.value=[{amount:null,mode:"Cash",paymentDate:Rn()}],r("Payment receipt and payments created successfully!")}catch(de){console.error("Error creating payment receipt and payments:",de),s("Bill created but failed to create payments: "+(de.message||"Unknown error"))}},j=()=>{w.value=!1,m.value=[{serviceDescription:"",hsnSacCode:"",baseCost:null,gstPercent:0,quantity:1,discountAmount:0,isFromHistory:!1}],f.value={patientName:n.appointment?.patient_name||"",patientId:n.appointment?.patientId||"",appointmentDate:n.appointment?.appointmentDate||"",billDate:Rn(),appointmentId:n.appointment?.id||null,doctorId:i.value,additionalDiscount:0},x.value=[{amount:null,mode:"Cash",paymentDate:Rn(),datePickerMenu:!1}],v.value=!1,p.value=null,g.value=[],y.value=!1,a("close")};return je(v,ce=>{ce&&g.value.length===0?P():ce||(p.value=null)}),(ce,de)=>{const _e=I("v-icon"),Re=I("v-btn"),be=I("v-card-title"),Ee=I("v-col"),Ce=I("v-row"),Be=I("v-label"),Te=I("v-card-text"),Oe=I("v-card"),Me=I("v-switch"),rt=I("v-list-item"),ut=I("v-select"),Ie=I("v-text-field"),Ue=I("v-table"),dt=I("v-divider"),Ft=I("v-date-picker"),it=I("v-menu"),qe=I("v-container");return R(),ve(Oe,{rounded:"lg",color:"surfaceContainer",flat:"",ripple:!1},{default:u(()=>[l(Ce,{"no-gutters":""},{default:u(()=>[l(Ee,{cols:"12"},{default:u(()=>[l(be,{class:"d-flex align-center justify-space-between"},{default:u(()=>[de[4]||(de[4]=h("span",null,"Tax Invoice cum Bill of Supply - Generate",-1)),l(Re,{onClick:j,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(_e,{size:"18"},{default:u(()=>[...de[3]||(de[3]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(Ce,{"no-gutters":""},{default:u(()=>[l(Ee,{cols:"12",class:"scroll-element"},{default:u(()=>[l(qe,{fluid:"",class:"pa-3"},{default:u(()=>[l(Oe,{flat:"",color:"surfaceContainerHigh",class:"mb-4 card-enhanced"},{default:u(()=>[l(Te,{class:"pb-1 pt-2"},{default:u(()=>[l(Ce,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(Ee,{cols:"4"},{default:u(()=>[h("div",c2e,[l(Be,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...de[5]||(de[5]=[O("Patient Information",-1)])]),_:1}),h("div",d2e,K(f.value.patientName),1),h("div",A2e,"ID: "+K(f.value.patientId),1)])]),_:1}),l(Ee,{cols:"4"},{default:u(()=>[h("div",f2e,[l(Be,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...de[6]||(de[6]=[O("Appointment Details",-1)])]),_:1}),h("div",m2e,"Dr. "+K(A.value),1),h("div",v2e,"Date: "+K(M(f.value.appointmentDate)),1)])]),_:1}),l(Ee,{cols:"4"},{default:u(()=>[h("div",h2e,[l(Be,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...de[7]||(de[7]=[O("Tax Invoice cum Bill of Supply Information",-1)])]),_:1}),de[8]||(de[8]=h("div",{class:"text-body-1 font-weight-medium"},"New Bill",-1)),h("div",p2e,"Date: "+K(M(f.value.billDate)),1)])]),_:1})]),_:1})]),_:1})]),_:1}),l(Oe,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(Te,{class:"pb-2"},{default:u(()=>[l(Ce,{"no-gutters":"",align:"center",class:"mb-3"},{default:u(()=>[l(Ee,{cols:"2",class:"d-flex align-center"},{default:u(()=>[...de[9]||(de[9]=[h("div",{class:"text-subtitle-1"},"Treatment Plan",-1)])]),_:1}),l(Ee,{cols:"3",class:"d-flex align-center"},{default:u(()=>[l(Me,{modelValue:v.value,"onUpdate:modelValue":de[0]||(de[0]=yt=>v.value=yt),label:"Link to treatment plan",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),v.value?(R(),ve(Ee,{key:0,cols:"7"},{default:u(()=>[l(ut,{modelValue:p.value,"onUpdate:modelValue":de[1]||(de[1]=yt=>p.value=yt),items:g.value,"item-title":"treatmentPlanName","item-value":"id",label:"Select Treatment Plan",variant:"outlined",density:"compact",loading:y.value,disabled:y.value,clearable:"","hide-details":""},{selection:u(({item:yt})=>[h("div",g2e,[h("div",y2e,K(yt.raw.treatmentPlanName),1),h("div",_2e,[O(" Status: "+K(yt.raw.status)+"  Created: "+K(M(yt.raw.createdAt))+" ",1),yt.raw.notes?(R(),Ae("span",w2e,"  "+K(yt.raw.notes.substring(0,30))+"...",1)):ye("",!0)])])]),item:u(({props:yt,item:mt})=>[l(rt,Yl(Jl(yt)),{title:u(()=>[O(K(mt.raw.treatmentPlanName),1)]),subtitle:u(()=>[h("div",b2e,[O(" Status: "+K(mt.raw.status)+"  Created: "+K(M(mt.raw.createdAt))+" ",1),mt.raw.notes?(R(),Ae("span",x2e," "+K(mt.raw.notes.substring(0,50))+"...",1)):ye("",!0)])]),_:2},1040)]),_:1},8,["modelValue","items","loading","disabled"])]),_:1})):ye("",!0)]),_:1})]),_:1})]),_:1}),l(Oe,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(Te,{class:"pb-2"},{default:u(()=>[de[25]||(de[25]=h("div",{class:"text-subtitle-1 mb-3"},"Goods and Services Information",-1)),l(Ue,{density:"compact",class:"mb-3"},{default:u(()=>[h("thead",null,[h("tr",null,[de[10]||(de[10]=h("th",{class:"text-left",style:{width:"60px"}},"Sr. No",-1)),de[11]||(de[11]=h("th",{class:"text-left",style:{width:"200px"}},"Description",-1)),d.value?(R(),Ae("th",C2e,"HSN/SAC Code")):ye("",!0),de[12]||(de[12]=h("th",{class:"text-left",style:{width:"120px"}},"Base Cost per unit (incl. GST)",-1)),de[13]||(de[13]=h("th",{class:"text-left",style:{width:"110px"}},"Discount per unit",-1)),de[14]||(de[14]=h("th",{class:"text-left",style:{width:"100px"}},"GST %",-1)),de[15]||(de[15]=h("th",{class:"text-left",style:{width:"120px"}},"Taxable Value",-1)),de[16]||(de[16]=h("th",{class:"text-left",style:{width:"100px"}},"GST Amount",-1)),de[17]||(de[17]=h("th",{class:"text-left",style:{width:"70px"}},"Quantity",-1)),de[18]||(de[18]=h("th",{class:"text-left",style:{width:"120px"}},"Total",-1)),de[19]||(de[19]=h("th",{class:"text-left",style:{width:"80px"}},"Actions",-1))])]),h("tbody",null,[(R(!0),Ae(Ke,null,Gt(Qe(D),(yt,mt)=>(R(),Ae("tr",{key:mt},[h("td",null,K(mt+1),1),h("td",null,[l(Cw,{"model-value":yt.serviceDescription,"onUpdate:modelValue":xt=>Z(mt,xt),onServiceSelected:xt=>re(mt,xt),"doctor-id":i.value,density:"compact"},null,8,["model-value","onUpdate:modelValue","onServiceSelected","doctor-id"])]),d.value?(R(),Ae("td",S2e,[l(Ie,{modelValue:m.value[mt].hsnSacCode,"onUpdate:modelValue":xt=>m.value[mt].hsnSacCode=xt,density:"compact",variant:"underlined","hide-details":"",placeholder:"HSN/SAC"},null,8,["modelValue","onUpdate:modelValue"])])):ye("",!0),h("td",null,[l(Ie,{modelValue:m.value[mt].baseCost,"onUpdate:modelValue":xt=>m.value[mt].baseCost=xt,modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"underlined","hide-details":"",min:"0",step:"1"},null,8,["modelValue","onUpdate:modelValue"])]),h("td",null,[l(Ie,{modelValue:m.value[mt].discountAmount,"onUpdate:modelValue":xt=>m.value[mt].discountAmount=xt,modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"underlined","hide-details":"",min:"0",step:"1"},null,8,["modelValue","onUpdate:modelValue"])]),h("td",null,[l(Ie,{modelValue:m.value[mt].gstPercent,"onUpdate:modelValue":xt=>m.value[mt].gstPercent=xt,modelModifiers:{number:!0},type:"number",suffix:"%",density:"compact",variant:"underlined","hide-details":"",min:"0",max:"100",step:"0.1"},null,8,["modelValue","onUpdate:modelValue"])]),h("td",null,[h("div",E2e,K(Qe(Zn)(Qe(ie)(m.value[mt]).gstExclusiveAmount||0)),1)]),h("td",null,[h("div",B2e,K(Qe(Zn)(Qe(ie)(m.value[mt]).gstAmount||0)),1)]),h("td",null,[l(Ie,{modelValue:m.value[mt].quantity,"onUpdate:modelValue":xt=>m.value[mt].quantity=xt,modelModifiers:{number:!0},type:"number",density:"compact",variant:"underlined","hide-details":"",min:"1",step:"1"},null,8,["modelValue","onUpdate:modelValue"])]),h("td",null,[h("div",k2e,K(Qe(Zn)(Qe(ie)(m.value[mt]).total||0)),1)]),h("td",null,[l(Re,{icon:"",size:"small",color:"error",variant:"text",onClick:xt=>le(mt)},{default:u(()=>[l(_e,null,{default:u(()=>[...de[20]||(de[20]=[O("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])]))),128))])]),_:1}),l(Ce,{"no-gutters":"",class:"align-center"},{default:u(()=>[l(Ee,{cols:"auto"},{default:u(()=>[l(Re,{variant:"outlined",color:"primary",onClick:X,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...de[21]||(de[21]=[O(" Add Service ",-1)])]),_:1})]),_:1}),l(Ee),l(Ee,{cols:"3"},{default:u(()=>[l(Ie,{label:"Additional Discount",modelValue:f.value.additionalDiscount,"onUpdate:modelValue":de[2]||(de[2]=yt=>f.value.additionalDiscount=yt),modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),l(dt,{class:"mb-3"}),l(Ce,{"no-gutters":""},{default:u(()=>[l(Ee,{cols:"8",class:"text-right"},{default:u(()=>[Q.value?(R(),Ae("div",T2e,"Base Cost Total (incl. GST):")):ye("",!0),Q.value?(R(),Ae("div",I2e,"Line Item Discounts:")):ye("",!0),Q.value?(R(),Ae("div",F2e,"Subtotal after Discounts (incl. GST):")):ye("",!0),de[22]||(de[22]=h("div",{class:"text-body-2 mb-1"},"Taxable Value Total:",-1)),de[23]||(de[23]=h("div",{class:"text-body-2 mb-1"},"GST Amount:",-1)),f.value.additionalDiscount>0?(R(),Ae("div",P2e,"Additional Discount:")):ye("",!0),de[24]||(de[24]=h("div",{class:"text-subtitle-1 font-weight-bold"},"Grand Total (incl. GST):",-1))]),_:1}),l(Ee,{cols:"4",class:"text-right"},{default:u(()=>[Q.value?(R(),Ae("div",D2e,K(Qe(Zn)(Qe(k))),1)):ye("",!0),Q.value?(R(),Ae("div",U2e,"-"+K(Qe(Zn)(Qe(C))),1)):ye("",!0),Q.value?(R(),Ae("div",R2e,K(Qe(Zn)(Qe(k)-Qe(C))),1)):ye("",!0),h("div",N2e,K(Qe(Zn)(Qe(U))),1),h("div",V2e,K(Qe(Zn)(Qe(S))),1),f.value.additionalDiscount>0?(R(),Ae("div",L2e,"-"+K(Qe(Zn)(f.value.additionalDiscount)),1)):ye("",!0),h("div",M2e,K(Qe(Zn)(Qe(L))),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(Oe,{flat:"",class:"mb-3 card-enhanced",color:"surfaceContainerHigh"},{default:u(()=>[l(Te,{class:"pb-2"},{default:u(()=>[de[30]||(de[30]=h("div",{class:"text-subtitle-1 mb-3"},"Payment Information",-1)),l(Ue,{density:"compact",class:"mb-3"},{default:u(()=>[de[28]||(de[28]=h("thead",null,[h("tr",null,[h("th",{class:"text-left",style:{width:"60px"}},"Sr. No"),h("th",{class:"text-left",style:{width:"150px"}},"Amount ()"),h("th",{class:"text-left",style:{width:"120px"}},"Payment Mode"),h("th",{class:"text-left",style:{width:"150px"}},"Payment Date"),h("th",{class:"text-left",style:{width:"80px"}},"Actions")])],-1)),h("tbody",null,[(R(!0),Ae(Ke,null,Gt(x.value,(yt,mt)=>(R(),Ae("tr",{key:mt},[h("td",null,K(mt+1),1),h("td",null,[l(Ie,{modelValue:yt.amount,"onUpdate:modelValue":xt=>yt.amount=xt,modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"underlined","hide-details":"",min:"0",step:"1"},null,8,["modelValue","onUpdate:modelValue"])]),h("td",null,[l(ut,{modelValue:yt.mode,"onUpdate:modelValue":xt=>yt.mode=xt,items:Qe(b),density:"compact",variant:"underlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),h("td",null,[l(it,{modelValue:yt.datePickerMenu,"onUpdate:modelValue":xt=>yt.datePickerMenu=xt,"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},{activator:u(({props:xt})=>[l(Ie,Pe({modelValue:yt.paymentDate,"onUpdate:modelValue":an=>yt.paymentDate=an,density:"compact",variant:"underlined","hide-details":"",readonly:""},{ref_for:!0},xt),{"append-inner":u(()=>[l(_e,{class:"text-medium-emphasis"},{default:u(()=>[...de[26]||(de[26]=[O("mdi-calendar",-1)])]),_:1})]),_:1},16,["modelValue","onUpdate:modelValue"])]),default:u(()=>[l(Ft,{"model-value":W(yt.paymentDate),"onUpdate:modelValue":xt=>ee(xt,yt),color:"primary",locale:"en-IN"},null,8,["model-value","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),h("td",null,[l(Re,{icon:"",size:"small",color:"error",variant:"text",onClick:xt=>Y(mt)},{default:u(()=>[l(_e,null,{default:u(()=>[...de[27]||(de[27]=[O("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])]))),128))])]),_:1}),l(Ce,{"no-gutters":"",class:"align-center"},{default:u(()=>[l(Ee,{cols:"auto"},{default:u(()=>[l(Re,{variant:"outlined",color:"secondary",onClick:te,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...de[29]||(de[29]=[O(" Add Payment ",-1)])]),_:1})]),_:1}),l(Ee),l(Ee,{cols:"4",class:"text-right"},{default:u(()=>[h("div",O2e,"Bill Total: "+K(Qe(Zn)(Qe(L))),1),h("div",H2e,"Total Payments: "+K(Qe(Zn)(G.value)),1),h("div",{class:ct(["text-subtitle-1 font-weight-bold",J.value>=0?"text-success":"text-error"])}," Balance: "+K(Qe(Zn)(J.value)),3)]),_:1})]),_:1})]),_:1})]),_:1}),l(Oe,{flat:"",color:"surfaceContainerHigh",class:"card-enhanced"},{default:u(()=>[l(Te,{class:"d-flex justify-center pb-2"},{default:u(()=>[l(Re,{color:"primary",onClick:ae,disabled:!q.value||w.value,loading:w.value,"prepend-icon":"mdi-receipt",class:"btn-hover-base"},{default:u(()=>[...de[31]||(de[31]=[O(" Generate Bill ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},Q2e=qt($2e,[["__scopeId","data-v-2a9d4242"]]),G2e={class:"text-center"},z2e={class:"text-center"},K2e={class:"text-body-2 text-medium-emphasis mb-4"},W2e={class:"pa-1"},j2e={class:"text-body-1 font-weight-medium"},q2e={class:"text-body-2 text-medium-emphasis"},Y2e={class:"pa-1"},X2e={class:"text-body-1 font-weight-medium"},J2e={class:"text-body-2 text-medium-emphasis"},Z2e={class:"pa-1"},ewe={class:"text-body-1 font-weight-medium"},twe={class:"text-body-2 text-medium-emphasis"},nwe={key:0,class:"text-body-2 text-medium-emphasis"},awe={key:0,class:"d-flex align-center"},rwe={key:1,class:"text-body-2 text-error"},swe={key:2,class:"d-flex flex-column"},owe={class:"text-body-2 font-weight-medium"},iwe={class:"text-caption text-medium-emphasis"},lwe={key:0},uwe={key:1},cwe={key:0,class:"text-caption text-medium-emphasis mt-1"},dwe={key:0},Awe={key:0,class:"text-left"},fwe={key:1,class:"text-right"},mwe={class:"text-left"},vwe={class:"text-left"},hwe={key:0,class:"text-left"},pwe={class:"text-right"},gwe={key:1,class:"text-right"},ywe={class:"text-center"},_we={class:"text-right"},wwe={class:"text-right"},bwe={class:"text-center"},xwe={class:"text-right"},Cwe={key:0,class:"text-body-2 mb-1"},Swe={key:1,class:"text-body-2 mb-1"},Ewe={key:2,class:"text-body-2 mb-1"},Bwe={key:3,class:"text-body-2 mb-1"},kwe={key:0,class:"text-body-2 mb-1"},Twe={key:1,class:"text-body-2 mb-1"},Iwe={key:2,class:"text-body-2 mb-1"},Fwe={class:"text-body-2 mb-1"},Pwe={class:"text-body-2 mb-1"},Dwe={key:3,class:"text-body-2 mb-1"},Uwe={class:"text-subtitle-1 font-weight-bold"},Rwe={key:0,class:"text-center pa-4"},Nwe={key:1,class:"text-center pa-4"},Vwe={class:"text-body-2 text-error"},Lwe={class:"text-body-1 font-weight-medium"},Mwe={class:"text-caption text-medium-emphasis"},Owe={class:"text-h6"},Hwe={class:"text-h6 text-success"},$we={key:0,class:"text-center pa-4"},Qwe={class:"text-left"},Gwe={class:"text-left"},zwe={class:"text-right"},Kwe={class:"text-center pa-4"},Wwe={key:3,class:"text-center pa-4"},jwe={__name:"bill-receipt-view",props:{billId:{type:[String,Number],required:!0}},emits:["close","edit-bill"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ca(),o=ra(),i=ne(()=>o.getters["doctorModule/currentDoctor"]),c=ne(()=>i.value?.doctorName||"Unknown Doctor"),A=ne(()=>i.value?.isGST||!1),d=V(!1),f=V(!1),m=V(!1),v=V(null),p=V(null),g=V(null),y=V(null),w=V([]),b=V("view"),x=V({}),T=V(null),D=V(null),k=V(!1),S=V(null),E=ne(()=>{if(!g.value?.services)return null;const ee=V(g.value.services||[]),ae=V(g.value.additionalDiscount||0);return wT(ee,ae)}),C=ne(()=>E.value?.baseSubtotal.value||0),U=ne(()=>E.value?.totalGSTAmount.value||0),F=ne(()=>E.value?.subtotalWithGST.value||0),L=ne(()=>E.value?.totalLineDiscount.value||0),H=ne(()=>E.value?.totalTaxableValue.value||0),ue=ne(()=>E.value?.finalGrandTotal.value||0),ie=ee=>E.value?E.value.calculateServiceTotal(ee):{total:0,gstAmount:0},Q=ne(()=>Array.isArray(w.value)?w.value.reduce((ee,ae)=>ee+(parseFloat(ae.amount)||0),0):0),X=ne(()=>Math.max(0,ue.value-Q.value)),le=ne(()=>g.value?.services?g.value.services.some(ee=>(parseFloat(ee.discountAmount)||0)>0):!1),Z=ne(()=>g.value?{patientName:g.value.patientName||"Unknown Patient",patientId:g.value.patientId||"N/A",patientAge:g.value.patientAge||g.value.age||"N/A",patientGender:g.value.patientGender||g.value.gender||"N/A",patientContactNumber:g.value.patientContactNumber,doctorName:c.value,billNumber:g.value.identifier,billDate:g.value.billDate,appointmentDate:g.value.appointmentDate,services:(g.value.services||[]).map(ee=>{const ae=ie(ee);return{...ee,gstAmount:ae.gstAmount,gstExclusiveAmount:ae.gstExclusiveAmount,totalWithGst:ae.total}}),baseSubtotal:C.value,totalGSTAmount:U.value,subtotalWithGST:F.value,totalLineDiscount:L.value,totalTaxableValue:H.value,additionalDiscount:parseFloat(g.value.additionalDiscount)||0,grandTotal:ue.value,associatedReceipt:y.value?{...y.value,balanceDue:X.value}:null,totalPaid:Q.value,balanceDue:X.value,payments:(w.value||[]).map(ee=>({...ee,paymentDate:ee.paymentDate?M(ee.paymentDate):"N/A",paymentMethod:ee.mode||"N/A",amount:ee.amount||0}))}:null),re=async()=>{if(!n.billId){v.value="No bill ID provided";return}d.value=!0,v.value=null;try{console.log("Loading bill data for ID:",n.billId);const ee=await yT(n.billId);if(ee.error)throw new Error(ee.error.message||"Failed to load bill");if(g.value=ee.data,console.log("Bill data loaded:",g.value),g.value&&(!g.value.patientAge||!g.value.patientGender))try{const ae=g.value.patientId;if(ae&&o.getters["patientModule/getPatientById"]){const oe=o.getters["patientModule/getPatientById"](ae);oe&&(g.value.patientAge=g.value.patientAge||oe.age,g.value.patientGender=g.value.patientGender||oe.gender)}}catch(ae){console.warn("Could not fetch additional patient details:",ae)}ee.data.treatmentPlanId&&(T.value=ee.data.treatmentPlanId,await q()),await P(),await J()}catch(ee){console.error("Error loading bill data:",ee),v.value=ee.message||"Failed to load bill data",s(v.value)}finally{d.value=!1}},q=async()=>{if(!T.value){D.value=null;return}k.value=!0,S.value=null;try{console.log("Loading treatment plan data for ID:",T.value);const ee=await xf(T.value);if(ee.error)throw new Error(ee.error.message||"Failed to load treatment plan");D.value=ee.data,console.log("Treatment plan data loaded:",D.value)}catch(ee){console.error("Error loading treatment plan data:",ee),S.value=ee.message||"Failed to load treatment plan"}finally{k.value=!1}},P=async()=>{if(!n.billId){y.value=null;return}f.value=!0,p.value=null;try{console.log("Loading associated payment receipt for bill ID:",n.billId);const ee=await _T(n.billId);ee.success&&Array.isArray(ee.data)&&ee.data.length>0?(y.value=ee.data[0],console.log("Associated payment receipt loaded:",y.value),await G()):(console.warn("No associated payment receipt found for bill:",n.billId),y.value=null)}catch(ee){console.error("Error loading associated payment receipt:",ee),p.value=ee.message||"Failed to load payment information"}finally{f.value=!1}},G=async()=>{if(!y.value?.id){w.value=[];return}m.value=!0;try{console.log("Loading payments for receipt ID:",y.value.id);const ee=await bg(y.value.id);ee.success&&Array.isArray(ee.data)?(w.value=ee.data,console.log("Payments loaded:",w.value)):(console.warn("No payments found or invalid response:",ee),w.value=[])}catch(ee){console.error("Error loading receipt payments:",ee),w.value=[]}finally{m.value=!1}},J=async()=>{try{const ee=o.state.doctorModule.doctorId;if(!ee){console.warn("No doctor ID available for print configurations");return}const ae=await hh(ee);x.value=ae.data||{},console.log("Print configurations fetched:",x.value)}catch(ee){console.error("Error fetching print configs:",ee),s("Failed to load print configurations")}},M=ee=>{if(!ee)return"";try{return new Date(ee).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return ee}},te=()=>{a("edit-bill",n.billId)},Y=ee=>{console.log("Bill PDF generated successfully:",ee),r("Bill PDF generated successfully")},W=()=>{a("close")};return dn(()=>{re()}),(ee,ae)=>{const oe=I("v-icon"),j=I("v-btn"),ce=I("v-card-title"),de=I("v-col"),_e=I("v-row"),Re=I("v-tab"),be=I("v-tabs"),Ee=I("v-progress-circular"),Ce=I("v-label"),Be=I("v-card-text"),Te=I("v-card"),Oe=I("v-table"),Me=I("v-divider"),rt=I("v-container"),ut=I("v-tabs-window-item"),Ie=I("v-tabs-window");return R(),ve(Te,{rounded:"lg",color:"surfaceContainer",flat:"",ripple:!1},{default:u(()=>[l(_e,{"no-gutters":""},{default:u(()=>[l(de,{cols:"12"},{default:u(()=>[l(ce,{class:"d-flex align-center justify-space-between"},{default:u(()=>[ae[3]||(ae[3]=h("span",null,"Tax Invoice cum Bill of Supply - View",-1)),l(j,{onClick:W,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(oe,{size:"18"},{default:u(()=>[...ae[2]||(ae[2]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(_e,{"no-gutters":""},{default:u(()=>[l(de,{cols:"12"},{default:u(()=>[l(be,{modelValue:b.value,"onUpdate:modelValue":ae[0]||(ae[0]=Ue=>b.value=Ue),color:"primary","bg-color":"surfaceContainerHigh","align-tabs":"start",class:"mx-3 mb-3"},{default:u(()=>[l(Re,{value:"view"},{default:u(()=>[l(oe,{start:""},{default:u(()=>[...ae[4]||(ae[4]=[O("mdi-eye",-1)])]),_:1}),ae[5]||(ae[5]=O(" View Bill ",-1))]),_:1}),l(Re,{value:"share"},{default:u(()=>[l(oe,{start:""},{default:u(()=>[...ae[6]||(ae[6]=[O("mdi-share-variant",-1)])]),_:1}),ae[7]||(ae[7]=O(" Share Bill ",-1))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(_e,{"no-gutters":""},{default:u(()=>[l(de,{cols:"12",class:"scroll-element"},{default:u(()=>[l(Ie,{modelValue:b.value,"onUpdate:modelValue":ae[1]||(ae[1]=Ue=>b.value=Ue)},{default:u(()=>[l(ut,{value:"view"},{default:u(()=>[d.value?(R(),ve(_e,{key:0,"no-gutters":""},{default:u(()=>[l(de,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[h("div",G2e,[l(Ee,{indeterminate:"",color:"primary",size:"64"}),ae[8]||(ae[8]=h("div",{class:"mt-4 text-subtitle-1"},"Loading bill...",-1))])]),_:1})]),_:1})):v.value?(R(),ve(_e,{key:1,"no-gutters":""},{default:u(()=>[l(de,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[h("div",z2e,[l(oe,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...ae[9]||(ae[9]=[O("mdi-alert-circle",-1)])]),_:1}),ae[11]||(ae[11]=h("div",{class:"text-h6 mb-2"},"Failed to Load Bill",-1)),h("div",K2e,K(v.value),1),l(j,{color:"primary",onClick:re,"prepend-icon":"mdi-refresh"},{default:u(()=>[...ae[10]||(ae[10]=[O(" Try Again ",-1)])]),_:1})])]),_:1})]),_:1})):g.value?(R(),ve(rt,{key:2,fluid:"",class:"pa-3"},{default:u(()=>[l(Te,{flat:"",color:"surfaceContainerHigh",class:"mb-4 card-enhanced"},{default:u(()=>[l(Be,{class:"pb-1 pt-2"},{default:u(()=>[l(_e,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(de,{cols:"4"},{default:u(()=>[h("div",W2e,[l(Ce,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...ae[12]||(ae[12]=[O("Patient Information",-1)])]),_:1}),h("div",j2e,K(g.value.patientName||"Unknown Patient"),1),h("div",q2e,"ID: "+K(g.value.patientId||"N/A"),1)])]),_:1}),l(de,{cols:"4"},{default:u(()=>[h("div",Y2e,[l(Ce,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...ae[13]||(ae[13]=[O("Appointment Details",-1)])]),_:1}),h("div",X2e,"Dr. "+K(c.value),1),h("div",J2e,"Date: "+K(M(g.value.appointmentDate)),1)])]),_:1}),l(de,{cols:"4"},{default:u(()=>[h("div",Z2e,[l(Ce,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...ae[14]||(ae[14]=[O("Tax Invoice cum Bill of Supply Information",-1)])]),_:1}),h("div",ewe,K(g.value.identifier),1),h("div",twe,"Date: "+K(M(g.value.billDate)),1),i.value?.isGST&&i.value?.gstIdentifier?(R(),Ae("div",nwe,"GST: "+K(i.value.gstIdentifier),1)):ye("",!0)])]),_:1})]),_:1})]),_:1})]),_:1}),T.value?(R(),ve(Te,{key:0,flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(Be,{class:"pb-2"},{default:u(()=>[l(_e,{"no-gutters":"",align:"center",class:"mb-2"},{default:u(()=>[l(de,{cols:"3",class:"d-flex align-center"},{default:u(()=>[...ae[15]||(ae[15]=[h("div",{class:"text-subtitle-1"},"Treatment Plan",-1)])]),_:1}),l(de,{cols:"9"},{default:u(()=>[k.value?(R(),Ae("div",awe,[l(Ee,{indeterminate:"",size:"16",color:"primary",class:"mr-2"}),ae[16]||(ae[16]=h("span",{class:"text-body-2"},"Loading treatment plan...",-1))])):S.value?(R(),Ae("div",rwe,[l(oe,{size:"16",class:"mr-1"},{default:u(()=>[...ae[17]||(ae[17]=[O("mdi-alert-circle",-1)])]),_:1}),O(" "+K(S.value),1)])):D.value?(R(),Ae("div",swe,[h("div",owe,K(D.value.treatmentPlanName),1),h("div",iwe,[O(" Status: "+K(D.value.status)+" ",1),D.value.startDate?(R(),Ae("span",lwe,"  Start: "+K(M(D.value.startDate)),1)):ye("",!0),D.value.endDate?(R(),Ae("span",uwe,"  End: "+K(M(D.value.endDate)),1)):ye("",!0)]),D.value.notes?(R(),Ae("div",cwe,[ae[18]||(ae[18]=h("strong",null,"Notes:",-1)),O(" "+K(D.value.notes.substring(0,80)),1),D.value.notes.length>80?(R(),Ae("span",dwe,"...")):ye("",!0)])):ye("",!0)])):ye("",!0)]),_:1})]),_:1})]),_:1})]),_:1})):ye("",!0),l(Te,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(Be,{class:"pb-2"},{default:u(()=>[ae[30]||(ae[30]=h("div",{class:"text-subtitle-1 mb-3"},"Goods and Services Information",-1)),l(Oe,{density:"compact",class:"mb-3"},{default:u(()=>[h("thead",null,[h("tr",null,[ae[19]||(ae[19]=h("th",{class:"text-left"},"Sr. No",-1)),ae[20]||(ae[20]=h("th",{class:"text-left"},"Description",-1)),A.value?(R(),Ae("th",Awe,"HSN/SAC Code")):ye("",!0),ae[21]||(ae[21]=h("th",{class:"text-right"},"Base Cost per unit (incl. GST)",-1)),le.value?(R(),Ae("th",fwe,"Discount per unit")):ye("",!0),ae[22]||(ae[22]=h("th",{class:"text-center"},"GST %",-1)),ae[23]||(ae[23]=h("th",{class:"text-right"},"Taxable Value",-1)),ae[24]||(ae[24]=h("th",{class:"text-right"},"GST Amt",-1)),ae[25]||(ae[25]=h("th",{class:"text-center"},"Qty",-1)),ae[26]||(ae[26]=h("th",{class:"text-right"},"Total",-1))])]),h("tbody",null,[(R(!0),Ae(Ke,null,Gt(g.value.services,(Ue,dt)=>(R(),Ae("tr",{key:dt},[h("td",mwe,K(dt+1),1),h("td",vwe,K(Ue.serviceDescription),1),A.value?(R(),Ae("td",hwe,K(Ue.hsnSacCode||"N/A"),1)):ye("",!0),h("td",pwe,K(Qe(Zn)(Ue.baseCost)),1),le.value?(R(),Ae("td",gwe,K(Qe(Zn)(Ue.discountAmount)),1)):ye("",!0),h("td",ywe,K(Ue.gstPercent)+"%",1),h("td",_we,K(Qe(Zn)(ie(Ue).gstExclusiveAmount)),1),h("td",wwe,K(Qe(Zn)(ie(Ue).gstAmount)),1),h("td",bwe,K(Ue.quantity),1),h("td",xwe,K(Qe(Zn)(ie(Ue).total)),1)]))),128))])]),_:1}),l(Me,{class:"mb-3"}),l(_e,{"no-gutters":""},{default:u(()=>[l(de,{cols:"8",class:"text-right"},{default:u(()=>[le.value?(R(),Ae("div",Cwe,"Base Cost Total (incl. GST):")):ye("",!0),le.value?(R(),Ae("div",Swe,"Line Item Discounts:")):ye("",!0),le.value?(R(),Ae("div",Ewe,"Subtotal after Discounts (incl. GST):")):ye("",!0),ae[27]||(ae[27]=h("div",{class:"text-body-2 mb-1"},"Taxable Value Total:",-1)),ae[28]||(ae[28]=h("div",{class:"text-body-2 mb-1"},"GST Amount:",-1)),g.value.additionalDiscount>0?(R(),Ae("div",Bwe,"Additional Discount:")):ye("",!0),ae[29]||(ae[29]=h("div",{class:"text-subtitle-1 font-weight-bold"},"Grand Total (incl. GST):",-1))]),_:1}),l(de,{cols:"4",class:"text-right"},{default:u(()=>[le.value?(R(),Ae("div",kwe,K(Qe(Zn)(C.value)),1)):ye("",!0),le.value?(R(),Ae("div",Twe,"-"+K(Qe(Zn)(L.value)),1)):ye("",!0),le.value?(R(),Ae("div",Iwe,K(Qe(Zn)(C.value-L.value)),1)):ye("",!0),h("div",Fwe,K(Qe(Zn)(H.value)),1),h("div",Pwe,K(Qe(Zn)(U.value)),1),g.value.additionalDiscount>0?(R(),Ae("div",Dwe,"-"+K(Qe(Zn)(g.value.additionalDiscount)),1)):ye("",!0),h("div",Uwe,K(Qe(Zn)(ue.value)),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(Te,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(Be,{class:"pb-2"},{default:u(()=>[ae[43]||(ae[43]=h("div",{class:"text-subtitle-1 mb-3"},"Payment Information",-1)),f.value?(R(),Ae("div",Rwe,[l(Ee,{indeterminate:"",size:"32",color:"primary"}),ae[31]||(ae[31]=h("div",{class:"text-body-2 mt-2"},"Loading payment information...",-1))])):p.value?(R(),Ae("div",Nwe,[l(oe,{size:"48",color:"error",class:"mb-2"},{default:u(()=>[...ae[32]||(ae[32]=[O("mdi-alert-circle",-1)])]),_:1}),h("div",Vwe,K(p.value),1)])):y.value?(R(),Ae(Ke,{key:2},[l(_e,{"no-gutters":"",class:"mb-3"},{default:u(()=>[l(de,{cols:"4"},{default:u(()=>[ae[33]||(ae[33]=h("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Payment Receipt",-1)),h("div",Lwe,K(y.value.identifier),1),h("div",Mwe,K(M(y.value.paymentReceiptDate)),1)]),_:1}),l(de,{cols:"4"},{default:u(()=>[ae[34]||(ae[34]=h("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Total Amount",-1)),h("div",Owe,K(Qe(Zn)(ue.value)),1)]),_:1}),l(de,{cols:"4"},{default:u(()=>[ae[35]||(ae[35]=h("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Paid Amount",-1)),h("div",Hwe,K(Qe(Zn)(Q.value)),1)]),_:1})]),_:1}),m.value?(R(),Ae("div",$we,[l(Ee,{indeterminate:"",size:"32",color:"primary"}),ae[36]||(ae[36]=h("div",{class:"text-body-2 mt-2"},"Loading payment history...",-1))])):w.value&&w.value.length>0?(R(),Ae(Ke,{key:1},[l(Me,{class:"mb-3"}),ae[38]||(ae[38]=h("div",{class:"text-subtitle-2 mb-2"},"Payment History",-1)),l(Oe,{density:"compact"},{default:u(()=>[ae[37]||(ae[37]=h("thead",null,[h("tr",null,[h("th",{class:"text-left"},"Date"),h("th",{class:"text-left"},"Method"),h("th",{class:"text-right"},"Amount")])],-1)),h("tbody",null,[(R(!0),Ae(Ke,null,Gt(w.value,Ue=>(R(),Ae("tr",{key:Ue.id},[h("td",Qwe,K(M(Ue.paymentDate)),1),h("td",Gwe,K(Ue.mode||"N/A"),1),h("td",zwe,K(Qe(Zn)(Ue.amount)),1)]))),128))])]),_:1})],64)):(R(),Ae(Ke,{key:2},[l(Me,{class:"mb-3"}),h("div",Kwe,[l(oe,{size:"48",color:"outline",class:"mb-2"},{default:u(()=>[...ae[39]||(ae[39]=[O("mdi-currency-inr",-1)])]),_:1}),ae[40]||(ae[40]=h("div",{class:"text-body-2 text-medium-emphasis"},"No payments recorded",-1))])],64))],64)):(R(),Ae("div",Wwe,[l(oe,{size:"48",color:"outline",class:"mb-2"},{default:u(()=>[...ae[41]||(ae[41]=[O("mdi-receipt",-1)])]),_:1}),ae[42]||(ae[42]=h("div",{class:"text-body-2 text-medium-emphasis"},"No associated payment receipt found",-1))]))]),_:1})]),_:1}),l(Te,{flat:"",color:"surfaceContainerHigh",class:"card-enhanced"},{default:u(()=>[l(Be,{class:"d-flex justify-center gap-3 pb-2"},{default:u(()=>[l(j,{color:"secondary",variant:"outlined",onClick:te,"prepend-icon":"mdi-pencil",class:"btn-hover-base"},{default:u(()=>[...ae[44]||(ae[44]=[O(" Edit Bill ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})):ye("",!0)]),_:1}),l(ut,{value:"share",class:"h-100"},{default:u(()=>[l(_e,{"no-gutters":"",class:"h-100"},{default:u(()=>[l(de,{cols:"12"},{default:u(()=>[l(ph,{"content-type":"bill",data:{consultation:Z.value,printConfigurations:x.value,doctor:i.value},patient:{name:g.value?.patientName,patientName:g.value?.patientName,patientId:g.value?.patientId,contactNumber:g.value?.patientContactNumber},onPdfGenerated:Y},null,8,["data","patient"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}}},yH=qt(jwe,[["__scopeId","data-v-f81d44f3"]]),qwe={class:"text-center"},Ywe={class:"text-center"},Xwe={class:"text-body-2 text-medium-emphasis mb-4"},Jwe={class:"pa-1"},Zwe={class:"text-body-1 font-weight-medium"},ebe={class:"text-body-2 text-medium-emphasis"},tbe={class:"pa-1"},nbe={class:"text-body-1 font-weight-medium"},abe={class:"text-body-2 text-medium-emphasis"},rbe={class:"pa-1"},sbe={class:"text-body-1 font-weight-medium"},obe={class:"text-body-2 text-medium-emphasis"},ibe={class:"text-caption text-medium-emphasis mt-1"},lbe={class:"d-flex flex-column py-1"},ube={class:"text-body-2 font-weight-medium"},cbe={class:"text-caption text-medium-emphasis"},dbe={key:0},Abe={class:"text-caption"},fbe={key:0,class:"ml-2"},mbe={key:2,class:"text-body-2 text-medium-emphasis"},vbe={key:0,class:"text-left",style:{width:"100px"}},hbe={key:0,class:"text-body-2 font-weight-medium"},pbe={key:0},gbe={key:0,class:"text-body-2 font-weight-medium"},ybe={key:0,class:"text-body-2 font-weight-medium"},_be={key:0,class:"text-body-2 font-weight-medium"},wbe={key:0,class:"text-body-2 font-weight-medium"},bbe={class:"text-body-2 font-weight-medium"},xbe={class:"text-body-2 font-weight-medium"},Cbe={key:0,class:"text-body-2 font-weight-medium"},Sbe={class:"text-body-2 font-weight-medium"},Ebe={key:0,class:"text-body-2 mb-1"},Bbe={key:1,class:"text-body-2 mb-1"},kbe={key:2,class:"text-body-2 mb-1"},Tbe={key:3,class:"text-body-2 mb-1"},Ibe={key:0,class:"text-body-2 mb-1"},Fbe={key:1,class:"text-body-2 mb-1"},Pbe={key:2,class:"text-body-2 mb-1"},Dbe={class:"text-body-2 mb-1"},Ube={class:"text-body-2 mb-1"},Rbe={key:3,class:"text-body-2 mb-1"},Nbe={class:"text-subtitle-1 font-weight-bold"},Vbe={key:0,class:"text-center pa-4"},Lbe={class:"text-subtitle-2"},Mbe={class:"text-body-2"},Obe={class:"text-h6"},Hbe={class:"text-h6 text-success"},$be={key:0,class:"text-center pa-4"},Qbe={class:"font-weight-bold"},Gbe={__name:"bill-receipt-edit",props:{billId:{type:[String,Number],required:!0}},emits:["close","bill-updated"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ca(),o=ra(),i=ne(()=>o.state.doctorModule.doctorId),c=ne(()=>o.getters["doctorModule/currentDoctor"]),A=ne(()=>c.value?.doctorName||"Unknown Doctor"),d=ne(()=>c.value?.isGST||!1),f=V(!1),m=V(!1),v=V(null),p=V(null),g=V([]),y=V(!1),w=V(!1),b=V(null),x=V(null),T=V([]),D=V([]),k=V(!1),S=V(null),E=V([]),C=V(!1),U=V(null);ne(()=>S.value?E.value.find(Ie=>Ie.id===S.value):null);const F=wT(g,ne(()=>p.value?.additionalDiscount||0)),{servicesWithTotals:L,baseSubtotal:H,totalGSTAmount:ue,subtotalWithGST:ie,totalLineDiscount:Q,totalTaxableValue:X,finalGrandTotal:le,hasValidService:Z,calculateServiceTotal:re}=F,q=ne(()=>g.value.some(Ie=>(parseFloat(Ie.discountAmount)||0)>0)),P=mh,G=V([]),J=()=>{g.value.push({serviceDescription:"",hsnSacCode:"",baseCost:null,gstPercent:0,quantity:1,discountAmount:0,isFromHistory:!1,isPrepopulated:!1})},M=Ie=>{g.value.length>1?g.value.splice(Ie,1):s("At least one service is required")},te=(Ie,Ue)=>{g.value[Ie]&&(g.value[Ie].serviceDescription=Ue)},Y=(Ie,Ue)=>{console.log("Service selected:",Ue),Ue&&typeof Ue=="object"&&!Ue.isUserTyped?g.value[Ie]={...g.value[Ie],serviceDescription:Ue.serviceDescription,hsnSacCode:Ue.hsnSacCode||"",baseCost:Ue.baseCost,gstPercent:Ue.gstPercent||0,isFromHistory:!0,isPrepopulated:g.value[Ie].isPrepopulated===!0}:Ue===null&&(g.value[Ie]={serviceDescription:"",hsnSacCode:"",baseCost:null,gstPercent:0,quantity:1,discountAmount:0,isFromHistory:!1,isPrepopulated:g.value[Ie].isPrepopulated===!0})},W=async()=>{if(!p.value?.patientId||!p.value?.doctorId){console.log("Missing patient or doctor ID for loading treatment plans");return}C.value=!0;try{console.log("Loading treatment plans for patient:",p.value.patientId,"doctor:",p.value.doctorId);const Ie=await xg(p.value.patientId,p.value.doctorId);if(Ie.error)throw new Error(Ie.error.message||"Failed to load treatment plans");E.value=Ie.data||[],console.log("Loaded treatment plans:",E.value.length)}catch(Ie){console.error("Error loading treatment plans:",Ie),s("Failed to load treatment plans: "+(Ie.message||"Unknown error")),E.value=[]}finally{C.value=!1}},ee=ne(()=>Array.isArray(T.value)?T.value.reduce((Ie,Ue)=>Ie+(parseFloat(Ue.amount)||0),0):0),ae=ne(()=>Array.isArray(G.value)?G.value.reduce((Ie,Ue)=>Ie+(parseFloat(Ue.amount)||0),0):0),oe=ne(()=>{const Ie=ee.value,Ue=ae.value;return Math.max(0,le.value-Ie-Ue)}),j=ne(()=>{const Ie=Z.value,Ue=p.value?.patientName;return Ie&&Ue}),ce=()=>{G.value.push({amount:null,mode:"Cash",paymentDate:new Date().toISOString().split("T")[0],datePickerMenu:!1})},de=Ie=>{G.value.splice(Ie,1)},_e=Ie=>{if(!Ie)return null;try{if(typeof Ie=="string")return Ie.includes("T")?Ie.split("T")[0]:Ie;if(Ie instanceof Date){const Ue=Ie.getFullYear(),dt=String(Ie.getMonth()+1).padStart(2,"0"),Ft=String(Ie.getDate()).padStart(2,"0");return`${Ue}-${dt}-${Ft}`}return null}catch(Ue){return console.error("Error parsing payment date:",Ue),null}},Re=(Ie,Ue)=>{if(Ie)if(Ie instanceof Date){const dt=Ie.getFullYear(),Ft=String(Ie.getMonth()+1).padStart(2,"0"),it=String(Ie.getDate()).padStart(2,"0");Ue.paymentDate=`${dt}-${Ft}-${it}`}else typeof Ie=="string"&&(Ue.paymentDate=Ie);else Ue.paymentDate="";Ue.datePickerMenu=!1},be=async()=>{if(!n.billId){v.value="No bill ID provided";return}f.value=!0,v.value=null;try{console.log("Loading bill data for editing, ID:",n.billId);const Ie=await yT(n.billId);if(Ie.error)throw new Error(Ie.error.message||"Failed to load bill");const Ue=Ie.data;if(p.value={id:Ue.id,identifier:Ue.identifier,patientName:Ue.patientName,patientId:Ue.patientId,appointmentDate:Ue.appointmentDate,billDate:Ue.billDate,doctorId:Ue.doctorId,appointmentId:Ue.appointmentId,additionalDiscount:Ue.additionalDiscount||0,treatmentPlanId:Ue.treatmentPlanId},Ue.services&&Ue.services.length>0?g.value=Ue.services.map(dt=>({id:dt.id,serviceDescription:dt.serviceDescription,hsnSacCode:dt.hsnSacCode||"",baseCost:dt.baseCost,gstPercent:dt.gstPercent||0,quantity:dt.quantity||1,discountAmount:dt.discountAmount||0,isFromHistory:!1,isPrepopulated:!0})):g.value=[{serviceDescription:"",hsnSacCode:"",baseCost:null,gstPercent:0,quantity:1,discountAmount:0,isFromHistory:!1,isPrepopulated:!1}],console.log("Bill data loaded for editing:",p.value),console.log("Services loaded:",g.value),Ue.treatmentPlanId){k.value=!0,S.value=Ue.treatmentPlanId,await W();try{const dt=await xf(Ue.treatmentPlanId);U.value=dt}catch(dt){console.error("Error loading original treatment plan data:",dt)}}await Ee()}catch(Ie){console.error("Error loading bill data:",Ie),v.value=Ie.message||"Failed to load bill data",s(v.value)}finally{f.value=!1}},Ee=async()=>{if(!n.billId){x.value=null;return}y.value=!0,b.value=null;try{console.log("Loading associated payment receipt for bill ID:",n.billId);const Ie=await _T(n.billId);Ie.success&&Array.isArray(Ie.data)&&Ie.data.length>0?(x.value=Ie.data[0],console.log("Associated payment receipt loaded:",x.value),await Ce()):(console.warn("No associated payment receipt found for bill:",n.billId),x.value=null)}catch(Ie){console.error("Error loading associated payment receipt:",Ie),b.value=Ie.message||"Failed to load payment information"}finally{y.value=!1}},Ce=async()=>{if(!x.value?.id){T.value=[];return}w.value=!0;try{console.log("Loading payments for receipt ID:",x.value.id);const Ie=await bg(x.value.id);Ie.success&&Array.isArray(Ie.data)?(T.value=Ie.data,console.log("Payments loaded:",T.value)):(console.warn("No payments found or invalid response:",Ie),T.value=[])}catch(Ie){console.error("Error loading receipt payments:",Ie),T.value=[]}finally{w.value=!1}},Be=async()=>{if(!j.value){s("Please add at least one valid service with description and cost");return}m.value=!0;try{const Ie=g.value.filter(Ft=>Ft.serviceDescription&&Ft.baseCost>0).map(Ft=>({id:Ft.id,serviceDescription:Ft.serviceDescription,hsnSacCode:Ft.hsnSacCode||"",baseCost:parseFloat(Ft.baseCost)||0,gstPercent:parseFloat(Ft.gstPercent)||0,quantity:parseInt(Ft.quantity)||1,discountAmount:parseFloat(Ft.discountAmount)||0})),Ue={patientName:p.value.patientName,patientId:p.value.patientId,appointmentDate:p.value.appointmentDate,billDate:p.value.billDate,doctorId:p.value.doctorId,appointmentId:p.value.appointmentId,additionalDiscount:parseFloat(p.value.additionalDiscount)||0,treatmentPlanId:k.value?S.value:null,services:Ie};console.log("Updating bill with payload:",Ue);const dt=await pH(n.billId,Ue);if(dt.error)throw new Error(dt.error.message||"Failed to update bill");console.log("Bill updated successfully:",dt.data),await Me(),await Te(),r(`Bill ${dt.data.identifier} updated successfully!`),a("bill-updated",dt.data)}catch(Ie){console.error("Error updating bill:",Ie),s("Failed to update bill. Please try again.")}finally{m.value=!1}},Te=async()=>{if(G.value.length===0||!x.value){console.log("No new payment entries to create or no associated receipt");return}console.log("Creating new payment entries:",G.value);try{const Ie=G.value.filter(Ue=>Ue.amount&&Ue.amount>0&&Ue.mode&&Ue.paymentDate);console.log("Valid payments to create:",Ie);for(const Ue of Ie){const dt={amount:parseFloat(Ue.amount),mode:Ue.mode,paymentDate:Ue.paymentDate,paymentReceiptId:x.value.id};console.log("Creating payment with payload:",dt);const Ft=await fh(dt);Ft.success?console.log("Payment created successfully:",Ft.data):(console.error("Error creating payment entry:",Ft.error),s(`Failed to create payment: ${Ft.error?.message||"Unknown error"}`))}await Ce(),G.value=[]}catch(Ie){console.error("Error creating payment entries:",Ie),s("Failed to create some payments: "+(Ie.message||"Unknown error"))}},Oe=async Ie=>{if(Ie){D.value.push(Ie);try{console.log("Deleting payment:",Ie);const Ue=await oT(Ie);if(Ue.error)throw new Error(Ue.error.message||"Failed to delete payment");T.value=T.value.filter(dt=>dt.id!==Ie),r("Payment deleted successfully")}catch(Ue){console.error("Error deleting payment:",Ue),s("Failed to delete payment: "+(Ue.message||"Unknown error"))}finally{D.value=D.value.filter(Ue=>Ue!==Ie)}}},Me=async()=>{if(!x.value?.id){console.log("No associated payment receipt to update");return}try{console.log("Updating payment receipt treatment plan");const Ie={treatmentPlanId:k.value?S.value:null};console.log("Updating payment receipt with data:",Ie);const Ue=await Tve(x.value.id,Ie);if(Ue.error)throw new Error(Ue.error.message||"Failed to update payment receipt treatment plan");console.log("Payment receipt treatment plan updated successfully"),x.value.treatmentPlanId=Ie.treatmentPlanId}catch(Ie){console.error("Error updating payment receipt treatment plan:",Ie),console.warn("Payment receipt treatment plan update failed, but bill was updated successfully")}},rt=Ie=>{if(!Ie)return"";try{return new Date(Ie).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return Ie}},ut=()=>{a("close")};return je(k,Ie=>{Ie&&E.value.length===0?W():Ie||(S.value=null)}),dn(()=>{be()}),(Ie,Ue)=>{const dt=I("v-icon"),Ft=I("v-btn"),it=I("v-card-title"),qe=I("v-col"),yt=I("v-row"),mt=I("v-progress-circular"),xt=I("v-label"),an=I("v-card-text"),Cn=I("v-card"),oa=I("v-switch"),Vt=I("v-chip"),kt=I("v-list-item"),at=I("v-select"),bt=I("v-text-field"),en=I("v-table"),Ye=I("v-divider"),We=I("v-alert"),_t=I("v-date-picker"),Rt=I("v-menu"),zt=I("v-container");return R(),ve(Cn,{rounded:"lg",color:"surfaceContainer",flat:"",ripple:!1},{default:u(()=>[l(yt,{"no-gutters":""},{default:u(()=>[l(qe,{cols:"12"},{default:u(()=>[l(it,{class:"d-flex align-center justify-space-between"},{default:u(()=>[Ue[4]||(Ue[4]=h("span",null,"Tax Invoice cum Bill of Supply - Edit",-1)),l(Ft,{onClick:ut,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(dt,{size:"18"},{default:u(()=>[...Ue[3]||(Ue[3]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(yt,{"no-gutters":""},{default:u(()=>[l(qe,{cols:"12",class:"scroll-element"},{default:u(()=>[f.value?(R(),ve(yt,{key:0,"no-gutters":""},{default:u(()=>[l(qe,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[h("div",qwe,[l(mt,{indeterminate:"",color:"primary",size:"64"}),Ue[5]||(Ue[5]=h("div",{class:"mt-4 text-subtitle-1"},"Loading bill...",-1))])]),_:1})]),_:1})):v.value?(R(),ve(yt,{key:1,"no-gutters":""},{default:u(()=>[l(qe,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[h("div",Ywe,[l(dt,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...Ue[6]||(Ue[6]=[O("mdi-alert-circle",-1)])]),_:1}),Ue[8]||(Ue[8]=h("div",{class:"text-h6 mb-2"},"Failed to Load Bill",-1)),h("div",Xwe,K(v.value),1),l(Ft,{color:"primary",onClick:be,"prepend-icon":"mdi-refresh"},{default:u(()=>[...Ue[7]||(Ue[7]=[O(" Retry ",-1)])]),_:1})])]),_:1})]),_:1})):p.value?(R(),ve(zt,{key:2,fluid:"",class:"pa-3"},{default:u(()=>[l(Cn,{flat:"",color:"surfaceContainerHigh",class:"mb-4 card-enhanced"},{default:u(()=>[l(an,{class:"pb-1 pt-2"},{default:u(()=>[l(yt,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(qe,{cols:"4"},{default:u(()=>[h("div",Jwe,[l(xt,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...Ue[9]||(Ue[9]=[O("Patient Information",-1)])]),_:1}),h("div",Zwe,K(p.value.patientName||"Unknown Patient"),1),h("div",ebe,"ID: "+K(p.value.patientId||"N/A"),1)])]),_:1}),l(qe,{cols:"4"},{default:u(()=>[h("div",tbe,[l(xt,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...Ue[10]||(Ue[10]=[O("Appointment Details",-1)])]),_:1}),h("div",nbe,"Dr. "+K(A.value),1),h("div",abe,"Date: "+K(rt(p.value.appointmentDate)),1)])]),_:1}),l(qe,{cols:"4"},{default:u(()=>[h("div",rbe,[l(xt,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...Ue[11]||(Ue[11]=[O("Tax Invoice cum Bill of Supply Information",-1)])]),_:1}),h("div",sbe,K(p.value.identifier),1),h("div",obe,"Date: "+K(rt(p.value.billDate)),1)])]),_:1})]),_:1})]),_:1})]),_:1}),l(Cn,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(an,{class:"pb-2"},{default:u(()=>[l(yt,{"no-gutters":"",align:"center",class:"mb-3"},{default:u(()=>[l(qe,{cols:"2",class:"d-flex align-center"},{default:u(()=>[...Ue[12]||(Ue[12]=[h("div",{class:"text-subtitle-1"},"Treatment Plan",-1)])]),_:1}),l(qe,{cols:"3",class:"d-flex align-center"},{default:u(()=>[l(oa,{modelValue:k.value,"onUpdate:modelValue":Ue[0]||(Ue[0]=Pt=>k.value=Pt),label:"Link to treatment plan",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),l(qe,{cols:"7"},{default:u(()=>[!k.value&&U.value?(R(),Ae(Ke,{key:0},[l(Vt,{color:"secondary",variant:"outlined","prepend-icon":"mdi-link-variant",class:"mr-2"},{default:u(()=>[O(K(U.value.treatmentPlanName),1)]),_:1}),h("div",ibe," Status: "+K(U.value.status)+"  Created: "+K(rt(U.value.createdAt)),1)],64)):k.value?(R(),ve(at,{key:1,modelValue:S.value,"onUpdate:modelValue":Ue[1]||(Ue[1]=Pt=>S.value=Pt),items:E.value,"item-title":"treatmentPlanName","item-value":"id",label:"Select Treatment Plan",variant:"outlined",density:"compact",loading:C.value,disabled:C.value,clearable:"","hide-details":""},{selection:u(({item:Pt})=>[h("div",lbe,[h("div",ube,K(Pt.raw.treatmentPlanName),1),h("div",cbe,[O(" Status: "+K(Pt.raw.status)+"  Created: "+K(rt(Pt.raw.createdAt))+" ",1),Pt.raw.notes?(R(),Ae("span",dbe,"  "+K(Pt.raw.notes.substring(0,30))+"...",1)):ye("",!0)])])]),item:u(({props:Pt,item:Wt})=>[l(kt,Yl(Jl(Pt)),{title:u(()=>[O(K(Wt.raw.treatmentPlanName),1)]),subtitle:u(()=>[h("div",Abe,[O(" Status: "+K(Wt.raw.status)+"  Created: "+K(rt(Wt.raw.createdAt))+" ",1),Wt.raw.notes?(R(),Ae("span",fbe," "+K(Wt.raw.notes.substring(0,50))+"...",1)):ye("",!0)])]),_:2},1040)]),_:1},8,["modelValue","items","loading","disabled"])):(R(),Ae("div",mbe," No treatment plan linked "))]),_:1})]),_:1})]),_:1})]),_:1}),l(Cn,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(an,{class:"pb-2"},{default:u(()=>[Ue[28]||(Ue[28]=h("div",{class:"text-subtitle-1 mb-3"},"Goods and Services Information",-1)),l(en,{density:"compact",class:"mb-3"},{default:u(()=>[h("thead",null,[h("tr",null,[Ue[13]||(Ue[13]=h("th",{class:"text-left",style:{width:"60px"}},"Sr. No",-1)),Ue[14]||(Ue[14]=h("th",{class:"text-left",style:{width:"200px"}},"Description",-1)),d.value?(R(),Ae("th",vbe,"HSN/SAC Code")):ye("",!0),Ue[15]||(Ue[15]=h("th",{class:"text-left",style:{width:"120px"}},"Base Cost per unit (incl. GST)",-1)),Ue[16]||(Ue[16]=h("th",{class:"text-left",style:{width:"110px"}},"Discount per unit",-1)),Ue[17]||(Ue[17]=h("th",{class:"text-left",style:{width:"80px"}},"GST %",-1)),Ue[18]||(Ue[18]=h("th",{class:"text-left",style:{width:"120px"}},"Taxable Value",-1)),Ue[19]||(Ue[19]=h("th",{class:"text-left",style:{width:"100px"}},"GST Amount",-1)),Ue[20]||(Ue[20]=h("th",{class:"text-left",style:{width:"90px"}},"Quantity",-1)),Ue[21]||(Ue[21]=h("th",{class:"text-left",style:{width:"120px"}},"Total",-1)),Ue[22]||(Ue[22]=h("th",{class:"text-left",style:{width:"80px"}},"Actions",-1))])]),h("tbody",null,[(R(!0),Ae(Ke,null,Gt(Qe(L),(Pt,Wt)=>(R(),Ae("tr",{key:Wt,class:ct(Pt.isPrepopulated?"prepopulated-service":"")},[h("td",null,K(Wt+1),1),h("td",null,[Pt.isPrepopulated?(R(),Ae("span",hbe,K(Pt.serviceDescription),1)):(R(),ve(Cw,{key:1,"model-value":Pt.serviceDescription,"onUpdate:modelValue":Lt=>te(Wt,Lt),onServiceSelected:Lt=>Y(Wt,Lt),"doctor-id":i.value,density:"compact"},null,8,["model-value","onUpdate:modelValue","onServiceSelected","doctor-id"]))]),d.value?(R(),Ae("td",pbe,[Pt.isPrepopulated?(R(),Ae("span",gbe,K(Pt.hsnSacCode||"N/A"),1)):(R(),ve(bt,{key:1,modelValue:g.value[Wt].hsnSacCode,"onUpdate:modelValue":Lt=>g.value[Wt].hsnSacCode=Lt,density:"compact",variant:"underlined","hide-details":"",placeholder:"HSN/SAC"},null,8,["modelValue","onUpdate:modelValue"]))])):ye("",!0),h("td",null,[Pt.isPrepopulated?(R(),Ae("span",ybe,""+K(Pt.baseCost?.toLocaleString()||0),1)):(R(),ve(bt,{key:1,modelValue:g.value[Wt].baseCost,"onUpdate:modelValue":Lt=>g.value[Wt].baseCost=Lt,modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"underlined","hide-details":"",min:"0",step:"1"},null,8,["modelValue","onUpdate:modelValue"]))]),h("td",null,[Pt.isPrepopulated?(R(),Ae("span",_be,""+K(Pt.discountAmount?.toLocaleString()||0),1)):(R(),ve(bt,{key:1,modelValue:g.value[Wt].discountAmount,"onUpdate:modelValue":Lt=>g.value[Wt].discountAmount=Lt,modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"underlined","hide-details":"",min:"0",step:"1"},null,8,["modelValue","onUpdate:modelValue"]))]),h("td",null,[Pt.isPrepopulated?(R(),Ae("span",wbe,K(Pt.gstPercent||0)+"%",1)):(R(),ve(bt,{key:1,modelValue:g.value[Wt].gstPercent,"onUpdate:modelValue":Lt=>g.value[Wt].gstPercent=Lt,modelModifiers:{number:!0},type:"number",suffix:"%",density:"compact",variant:"underlined","hide-details":"",min:"0",max:"100",step:"0.1"},null,8,["modelValue","onUpdate:modelValue"]))]),h("td",null,[h("div",bbe,K(Qe(Zn)(Qe(re)(g.value[Wt]).gstExclusiveAmount||0)),1)]),h("td",null,[h("div",xbe,K(Qe(Zn)(Qe(re)(g.value[Wt]).gstAmount||0)),1)]),h("td",null,[Pt.isPrepopulated?(R(),Ae("span",Cbe,K(Pt.quantity||1),1)):(R(),ve(bt,{key:1,modelValue:g.value[Wt].quantity,"onUpdate:modelValue":Lt=>g.value[Wt].quantity=Lt,modelModifiers:{number:!0},type:"number",density:"compact",variant:"underlined","hide-details":"",min:"1",step:"1"},null,8,["modelValue","onUpdate:modelValue"]))]),h("td",null,[h("div",Sbe,K(Qe(Zn)(Qe(re)(g.value[Wt]).total||0)),1)]),h("td",null,[l(Ft,{icon:"",size:"small",color:"error",variant:"text",onClick:Lt=>M(Wt),title:Pt.isPrepopulated?"Delete existing service":"Delete new service"},{default:u(()=>[l(dt,null,{default:u(()=>[...Ue[23]||(Ue[23]=[O("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick","title"])])],2))),128))])]),_:1}),l(yt,{"no-gutters":"",class:"align-center"},{default:u(()=>[l(qe,{cols:"auto"},{default:u(()=>[l(Ft,{variant:"outlined",color:"primary",onClick:J,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...Ue[24]||(Ue[24]=[O(" Add Service ",-1)])]),_:1})]),_:1}),l(qe),l(qe,{cols:"3"},{default:u(()=>[l(bt,{label:"Additional Discount",modelValue:p.value.additionalDiscount,"onUpdate:modelValue":Ue[2]||(Ue[2]=Pt=>p.value.additionalDiscount=Pt),modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),l(Ye,{class:"mb-3"}),l(yt,{"no-gutters":""},{default:u(()=>[l(qe,{cols:"8",class:"text-right"},{default:u(()=>[q.value?(R(),Ae("div",Ebe,"Base Cost Total (incl. GST):")):ye("",!0),q.value?(R(),Ae("div",Bbe,"Line Item Discounts:")):ye("",!0),q.value?(R(),Ae("div",kbe,"Subtotal after Discounts (incl. GST):")):ye("",!0),Ue[25]||(Ue[25]=h("div",{class:"text-body-2 mb-1"},"Taxable Value Total:",-1)),Ue[26]||(Ue[26]=h("div",{class:"text-body-2 mb-1"},"GST Amount:",-1)),p.value.additionalDiscount>0?(R(),Ae("div",Tbe,"Additional Discount:")):ye("",!0),Ue[27]||(Ue[27]=h("div",{class:"text-subtitle-1 font-weight-bold"},"Grand Total (incl. GST):",-1))]),_:1}),l(qe,{cols:"4",class:"text-right"},{default:u(()=>[q.value?(R(),Ae("div",Ibe,K(Qe(Zn)(Qe(H))),1)):ye("",!0),q.value?(R(),Ae("div",Fbe,"-"+K(Qe(Zn)(Qe(Q))),1)):ye("",!0),q.value?(R(),Ae("div",Pbe,K(Qe(Zn)(Qe(H)-Qe(Q))),1)):ye("",!0),h("div",Dbe,K(Qe(Zn)(Qe(X))),1),h("div",Ube,K(Qe(Zn)(Qe(ue))),1),p.value.additionalDiscount>0?(R(),Ae("div",Rbe,"-"+K(Qe(Zn)(p.value.additionalDiscount)),1)):ye("",!0),h("div",Nbe,K(Qe(Zn)(Qe(le))),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(Cn,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(an,{class:"pb-2"},{default:u(()=>[Ue[42]||(Ue[42]=h("div",{class:"text-subtitle-1 mb-3"},"Payment Information",-1)),y.value?(R(),Ae("div",Vbe,[l(mt,{indeterminate:"",color:"primary",size:"32"}),Ue[29]||(Ue[29]=h("div",{class:"mt-2 text-body-2"},"Loading payment information...",-1))])):b.value?(R(),ve(We,{key:1,type:"warning",variant:"tonal",class:"mb-3"},{default:u(()=>[O(K(b.value),1)]),_:1})):x.value?(R(),Ae(Ke,{key:2},[l(yt,{"no-gutters":"",class:"mb-3"},{default:u(()=>[l(qe,{cols:"12"},{default:u(()=>[l(We,{type:"info",variant:"tonal",density:"compact"},{title:u(()=>[h("span",Lbe,"Payment Receipt: "+K(x.value.identifier),1)]),default:u(()=>[h("div",Mbe,[Ue[30]||(Ue[30]=h("strong",null,"Date:",-1)),O(" "+K(rt(x.value.paymentReceiptDate)),1)])]),_:1})]),_:1})]),_:1}),l(yt,{"no-gutters":"",class:"mb-3"},{default:u(()=>[l(qe,{cols:"4"},{default:u(()=>[Ue[31]||(Ue[31]=h("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Total Amount",-1)),h("div",Obe,K(Qe(Zn)(Qe(le))),1)]),_:1}),l(qe,{cols:"4"},{default:u(()=>[Ue[32]||(Ue[32]=h("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Paid Amount",-1)),h("div",Hbe,K(Qe(Zn)(ee.value+ae.value)),1)]),_:1}),l(qe,{cols:"4"},{default:u(()=>[Ue[33]||(Ue[33]=h("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Balance Due",-1)),h("div",{class:ct(["text-h6",oe.value>0?"text-error":"text-success"])},K(Qe(Zn)(oe.value)),3)]),_:1})]),_:1}),w.value?(R(),Ae("div",$be,[l(mt,{indeterminate:"",size:"32",color:"primary"}),Ue[34]||(Ue[34]=h("div",{class:"text-body-2 mt-2"},"Loading payments...",-1))])):(R(),Ae(Ke,{key:1},[l(Ye,{class:"mb-3"}),Ue[40]||(Ue[40]=h("div",{class:"text-subtitle-2 mb-2"},"Payments",-1)),l(en,{density:"compact",class:"mb-3"},{default:u(()=>[Ue[38]||(Ue[38]=h("thead",null,[h("tr",null,[h("th",{class:"text-left",style:{width:"60px"}},"Sr. No"),h("th",{class:"text-left",style:{width:"150px"}},"Amount ()"),h("th",{class:"text-left",style:{width:"150px"}},"Payment Mode"),h("th",{class:"text-left",style:{width:"150px"}},"Payment Date"),h("th",{class:"text-left",style:{width:"80px"}},"Actions")])],-1)),h("tbody",null,[(R(!0),Ae(Ke,null,Gt(T.value,(Pt,Wt)=>(R(),Ae("tr",{key:`existing-${Pt.id}`},[h("td",null,K(Wt+1),1),h("td",Qbe,""+K(Pt.amount.toLocaleString()),1),h("td",null,K(Pt.mode),1),h("td",null,K(rt(Pt.paymentDate)),1),h("td",null,[l(Ft,{icon:"",size:"small",color:"error",variant:"text",onClick:Lt=>Oe(Pt.id),loading:D.value.includes(Pt.id)},{default:u(()=>[l(dt,null,{default:u(()=>[...Ue[35]||(Ue[35]=[O("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick","loading"])])]))),128)),(R(!0),Ae(Ke,null,Gt(G.value,(Pt,Wt)=>(R(),Ae("tr",{key:`new-${Wt}`},[h("td",null,K(T.value.length+Wt+1),1),h("td",null,[l(bt,{modelValue:Pt.amount,"onUpdate:modelValue":Lt=>Pt.amount=Lt,modelModifiers:{number:!0},type:"number",prefix:"",min:"1",density:"compact",variant:"underlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),h("td",null,[l(at,{modelValue:Pt.mode,"onUpdate:modelValue":Lt=>Pt.mode=Lt,items:Qe(P),density:"compact",variant:"underlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),h("td",null,[l(Rt,{modelValue:Pt.datePickerMenu,"onUpdate:modelValue":Lt=>Pt.datePickerMenu=Lt,"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},{activator:u(({props:Lt})=>[l(bt,Pe({modelValue:Pt.paymentDate,"onUpdate:modelValue":ia=>Pt.paymentDate=ia,density:"compact",variant:"underlined","hide-details":"",readonly:""},{ref_for:!0},Lt),{"append-inner":u(()=>[l(dt,{class:"text-medium-emphasis"},{default:u(()=>[...Ue[36]||(Ue[36]=[O("mdi-calendar",-1)])]),_:1})]),_:1},16,["modelValue","onUpdate:modelValue"])]),default:u(()=>[l(_t,{"model-value":_e(Pt.paymentDate),"onUpdate:modelValue":Lt=>Re(Lt,Pt),color:"primary",locale:"en-IN"},null,8,["model-value","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),h("td",null,[l(Ft,{icon:"",size:"small",color:"error",variant:"text",onClick:Lt=>de(Wt)},{default:u(()=>[l(dt,null,{default:u(()=>[...Ue[37]||(Ue[37]=[O("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])]))),128))])]),_:1}),l(yt,{"no-gutters":"",class:"align-center"},{default:u(()=>[l(qe,{cols:"auto"},{default:u(()=>[l(Ft,{variant:"outlined",color:"secondary",onClick:ce,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...Ue[39]||(Ue[39]=[O(" Add Payment ",-1)])]),_:1})]),_:1})]),_:1})],64))],64)):(R(),ve(We,{key:3,type:"info",variant:"tonal"},{default:u(()=>[...Ue[41]||(Ue[41]=[O(" No associated payment receipt found. Payments will be managed separately. ",-1)])]),_:1}))]),_:1})]),_:1}),l(Cn,{flat:"",color:"surfaceContainerHigh",class:"card-enhanced"},{default:u(()=>[l(an,{class:"d-flex justify-center pb-2"},{default:u(()=>[l(Ft,{color:"primary",onClick:Be,loading:m.value,disabled:!j.value,"prepend-icon":"mdi-content-save",class:"btn-hover-base"},{default:u(()=>[...Ue[43]||(Ue[43]=[O(" Update Bill ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})):ye("",!0)]),_:1})]),_:1})]),_:1})}}},_H=qt(Gbe,[["__scopeId","data-v-f7ae1934"]]),zbe={key:1,class:"d-flex justify-center align-center pa-8"},Kbe={__name:"patient-document-create",props:{appointment:{type:Object,required:!0},doctorId:{type:Number,required:!0},clinicId:{type:Number,required:!0}},emits:["close"],setup(e,{emit:t}){const n=e,a=t,{showError:r}=ca();ra();const s=V("write"),o=V("medical-fitness-certificate"),i=V([{title:"Medical Fitness Certificate",value:"medical-fitness-certificate"},{title:"Leave of Absence",value:"leave-of-absence"}]),c=V(!1),A=V(!1),d=V(null),f=V(null),m=U=>{if(U instanceof Date){const F=U.getFullYear(),L=String(U.getMonth()+1).padStart(2,"0"),H=String(U.getDate()).padStart(2,"0");return`${F}-${L}-${H}`}return U},v=()=>Rn(),p=V({documentType:"medical-fitness-certificate",patientName:n.appointment.patient_name||"",patientAge:n.appointment.patient_age||null,certificateDate:v(),purpose:"",validityPeriod:"",activity:"",reason:"",tillDate:"",doctorName:"",clinicName:"",additionalNotes:""}),g=ne(()=>{const U={};return p.value.patientName||(U.patientName="Required"),(p.value.patientAge===null||p.value.patientAge===void 0||p.value.patientAge==="")&&(U.patientAge="Required"),p.value.certificateDate||(U.certificateDate="Required"),o.value==="medical-fitness-certificate"&&(p.value.purpose||(U.purpose="Required"),p.value.validityPeriod||(U.validityPeriod="Required")),o.value==="leave-of-absence"&&(p.value.activity||(U.activity="Required"),p.value.reason||(U.reason="Required"),p.value.tillDate||(U.tillDate="Required")),p.value.doctorName||(U.doctorName="Required"),p.value.clinicName||(U.clinicName="Required"),U}),y=ne({get:()=>p.value.certificateDate?new Date(p.value.certificateDate+"T12:00:00").toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"",set:()=>{}}),w=ne({get:()=>p.value.tillDate?new Date(p.value.tillDate+"T12:00:00").toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"",set:()=>{}}),b=ne(()=>o.value==="leave-of-absence"?"Document Date *":"Certificate Date *"),x=ne(()=>({id:n.appointment.patientId,name:p.value.patientName||n.appointment.patient_name||"N/A",age:p.value.patientAge||n.appointment.patient_age||null,gender:n.appointment.patient_gender||"N/A",contactNumber:n.appointment.contactNumber||"N/A"})),T=ne(()=>f.value?{documentData:{...p.value,certificateDate:p.value.certificateDate},printConfigurations:f.value}:null),D=U=>{let F;typeof U=="string"?F=U.includes("T")?U.split("T")[0]:U:U instanceof Date?F=m(U):F=v(),p.value.certificateDate=F,c.value=!1},k=U=>{let F;typeof U=="string"?F=U.includes("T")?U.split("T")[0]:U:U instanceof Date?F=m(U):F="",p.value.tillDate=F,A.value=!1},S=U=>{p.value.documentType=U,U==="medical-fitness-certificate"?(p.value.activity="",p.value.reason="",p.value.tillDate=""):U==="leave-of-absence"&&(p.value.purpose="",p.value.validityPeriod="")},E=async()=>{try{const U=await hh(n.doctorId);if(U.error){console.error("Error fetching print configs:",U.error),r("Failed to load print configurations");return}if(f.value=U.data||{},f.value.doctorName&&!p.value.doctorName&&(p.value.doctorName=f.value.doctorName),f.value.clinicAddress&&!p.value.clinicName){const F=f.value.clinicAddress.split(`
`)[0]||f.value.clinicAddress;p.value.clinicName=F}}catch(U){console.error("Error fetching print configurations:",U),r("Failed to load print configurations")}},C=()=>{a("close")};return je(s,U=>{U==="write"&&d.value&&d.value.validate()}),dn(async()=>{await E()}),(U,F)=>{const L=I("v-icon"),H=I("v-btn"),ue=I("v-card-title"),ie=I("v-col"),Q=I("v-row"),X=I("v-select"),le=I("v-tab"),Z=I("v-tabs"),re=I("v-text-field"),q=I("v-date-picker"),P=I("v-menu"),G=I("v-textarea"),J=I("v-form"),M=I("v-card-text"),te=I("v-card"),Y=I("v-tabs-window-item"),W=I("v-progress-circular"),ee=I("v-tabs-window");return R(),ve(te,{rounded:"lg",color:"surfaceContainer",flat:"",ripple:!1},{default:u(()=>[l(Q,{"no-gutters":""},{default:u(()=>[l(ie,{cols:"12"},{default:u(()=>[l(ue,{class:"d-flex align-center justify-space-between"},{default:u(()=>[F[19]||(F[19]=h("span",null,"Create Document",-1)),l(H,{onClick:C,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(L,{size:"18"},{default:u(()=>[...F[18]||(F[18]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(Q,{"no-gutters":""},{default:u(()=>[l(ie,{cols:"12",class:"pa-3"},{default:u(()=>[l(X,{modelValue:o.value,"onUpdate:modelValue":[F[0]||(F[0]=ae=>o.value=ae),S],items:i.value,label:"Document Type",variant:"outlined",density:"compact",class:"mb-0","hide-details":""},null,8,["modelValue","items"]),l(Z,{modelValue:s.value,"onUpdate:modelValue":F[1]||(F[1]=ae=>s.value=ae),class:"mb-3"},{default:u(()=>[l(le,{value:"write"},{default:u(()=>[...F[20]||(F[20]=[O("Write",-1)])]),_:1}),l(le,{value:"share"},{default:u(()=>[...F[21]||(F[21]=[O("Share",-1)])]),_:1})]),_:1},8,["modelValue"]),l(ee,{modelValue:s.value,"onUpdate:modelValue":F[17]||(F[17]=ae=>s.value=ae)},{default:u(()=>[l(Y,{value:"write"},{default:u(()=>[l(te,{flat:"",color:"surfaceContainerHigh",class:"card-enhanced"},{default:u(()=>[l(M,null,{default:u(()=>[l(J,{ref_key:"formRef",ref:d},{default:u(()=>[l(Q,null,{default:u(()=>[l(ie,{cols:"6"},{default:u(()=>[l(re,{modelValue:p.value.patientName,"onUpdate:modelValue":F[2]||(F[2]=ae=>p.value.patientName=ae),label:"Patient Name *",variant:"outlined",density:"compact",rules:[ae=>!!ae||"Patient name is required"],"error-messages":g.value.patientName},null,8,["modelValue","rules","error-messages"])]),_:1}),l(ie,{cols:"6"},{default:u(()=>[l(re,{modelValue:p.value.patientAge,"onUpdate:modelValue":F[3]||(F[3]=ae=>p.value.patientAge=ae),modelModifiers:{number:!0},label:"Patient Age *",type:"number",variant:"outlined",density:"compact",rules:[ae=>ae!=null&&ae!==""||"Patient age is required"],"error-messages":g.value.patientAge},null,8,["modelValue","rules","error-messages"])]),_:1}),l(ie,{cols:"6"},{default:u(()=>[l(P,{modelValue:c.value,"onUpdate:modelValue":F[6]||(F[6]=ae=>c.value=ae),"close-on-content-click":!1,transition:"scale-transition","offset-y":""},{activator:u(({props:ae})=>[l(re,Pe({modelValue:y.value,"onUpdate:modelValue":F[4]||(F[4]=oe=>y.value=oe),label:b.value,variant:"outlined",density:"compact",readonly:""},ae,{rules:[oe=>!!oe||"Certificate date is required"],"error-messages":g.value.certificateDate}),{"append-inner":u(()=>[l(L,null,{default:u(()=>[...F[22]||(F[22]=[O("mdi-calendar",-1)])]),_:1})]),_:1},16,["modelValue","label","rules","error-messages"])]),default:u(()=>[l(q,{modelValue:p.value.certificateDate,"onUpdate:modelValue":[F[5]||(F[5]=ae=>p.value.certificateDate=ae),D],color:"primary",locale:"en-IN"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),o.value==="medical-fitness-certificate"?(R(),Ae(Ke,{key:0},[l(ie,{cols:"6"},{default:u(()=>[l(re,{modelValue:p.value.purpose,"onUpdate:modelValue":F[7]||(F[7]=ae=>p.value.purpose=ae),label:"Purpose *",variant:"outlined",density:"compact",placeholder:"e.g., work, travel",rules:[ae=>!!ae||"Purpose is required"],"error-messages":g.value.purpose},null,8,["modelValue","rules","error-messages"])]),_:1}),l(ie,{cols:"6"},{default:u(()=>[l(re,{modelValue:p.value.validityPeriod,"onUpdate:modelValue":F[8]||(F[8]=ae=>p.value.validityPeriod=ae),label:"Validity Period *",variant:"outlined",density:"compact",placeholder:"e.g., 30 days",rules:[ae=>!!ae||"Validity period is required"],"error-messages":g.value.validityPeriod},null,8,["modelValue","rules","error-messages"])]),_:1})],64)):ye("",!0),o.value==="leave-of-absence"?(R(),Ae(Ke,{key:1},[l(ie,{cols:"6"},{default:u(()=>[l(re,{modelValue:p.value.activity,"onUpdate:modelValue":F[9]||(F[9]=ae=>p.value.activity=ae),label:"Activity/Institution *",variant:"outlined",density:"compact",placeholder:"e.g., college, court",rules:[ae=>!!ae||"Activity is required"],"error-messages":g.value.activity},null,8,["modelValue","rules","error-messages"])]),_:1}),l(ie,{cols:"6"},{default:u(()=>[l(re,{modelValue:p.value.reason,"onUpdate:modelValue":F[10]||(F[10]=ae=>p.value.reason=ae),label:"Reason *",variant:"outlined",density:"compact",placeholder:"e.g., medical treatment",rules:[ae=>!!ae||"Reason is required"],"error-messages":g.value.reason},null,8,["modelValue","rules","error-messages"])]),_:1}),l(ie,{cols:"6"},{default:u(()=>[l(P,{modelValue:A.value,"onUpdate:modelValue":F[13]||(F[13]=ae=>A.value=ae),"close-on-content-click":!1,transition:"scale-transition","offset-y":""},{activator:u(({props:ae})=>[l(re,Pe({modelValue:w.value,"onUpdate:modelValue":F[11]||(F[11]=oe=>w.value=oe),label:"Till Date *",variant:"outlined",density:"compact",readonly:""},ae,{rules:[oe=>!!oe||"Till date is required"],"error-messages":g.value.tillDate}),{"append-inner":u(()=>[l(L,null,{default:u(()=>[...F[23]||(F[23]=[O("mdi-calendar",-1)])]),_:1})]),_:1},16,["modelValue","rules","error-messages"])]),default:u(()=>[l(q,{modelValue:p.value.tillDate,"onUpdate:modelValue":[F[12]||(F[12]=ae=>p.value.tillDate=ae),k],color:"primary",locale:"en-IN"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})],64)):ye("",!0),l(ie,{cols:"6"},{default:u(()=>[l(re,{modelValue:p.value.doctorName,"onUpdate:modelValue":F[14]||(F[14]=ae=>p.value.doctorName=ae),label:"Doctor Name *",variant:"outlined",density:"compact",rules:[ae=>!!ae||"Doctor name is required"],"error-messages":g.value.doctorName},null,8,["modelValue","rules","error-messages"])]),_:1}),l(ie,{cols:"6"},{default:u(()=>[l(re,{modelValue:p.value.clinicName,"onUpdate:modelValue":F[15]||(F[15]=ae=>p.value.clinicName=ae),label:"Clinic Name *",variant:"outlined",density:"compact",rules:[ae=>!!ae||"Clinic name is required"],"error-messages":g.value.clinicName},null,8,["modelValue","rules","error-messages"])]),_:1}),l(ie,{cols:"12"},{default:u(()=>[l(G,{modelValue:p.value.additionalNotes,"onUpdate:modelValue":F[16]||(F[16]=ae=>p.value.additionalNotes=ae),label:"Additional Notes",variant:"outlined",density:"compact",rows:"3",placeholder:"Optional additional information"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1}),l(Y,{value:"share"},{default:u(()=>[f.value?(R(),ve(ph,{key:0,contentType:o.value==="leave-of-absence"?"leave-of-absence":"certificate",data:T.value,patient:x.value},null,8,["contentType","data","patient"])):(R(),Ae("div",zbe,[l(W,{indeterminate:"",color:"primary"})]))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}}},Wbe=qt(Kbe,[["__scopeId","data-v-407b4bc6"]]),BC=""+new URL("images/no_patient_waiting-BEIBlTUs.png",import.meta.url).href,jbe={__name:"Permission",props:{permission:{type:String,default:null},anyPermission:{type:Array,default:null},allPermissions:{type:Array,default:null},feature:{type:String,default:null},requireAdmin:{type:Boolean,default:!1},tag:{type:String,default:"div"}},setup(e){const t=e,{hasPermission:n,hasAnyPermission:a,hasAllPermissions:r,hasFeatureAccess:s,isAdmin:o,features:i}=ch(),c=ne(()=>{if(t.requireAdmin)return o.value;if(t.feature){const A=s(t.feature);return A?A.value:!1}if(t.permission){if(o.value)return!0;const A=n(t.permission),d=t.permission.split(".");if(d.length>=2){const f=d[0],m=i.value.find(v=>v&&v.id===f);if(m&&m.adminOnly)return!1}return A.value}return t.anyPermission&&Array.isArray(t.anyPermission)&&t.anyPermission.length>0?a(t.anyPermission).value:t.allPermissions&&Array.isArray(t.allPermissions)&&t.allPermissions.length>0?r(t.allPermissions).value:!0});return(A,d)=>c.value?(R(),ve(tw(e.tag),Yl(Pe({key:0},A.$attrs)),{default:u(()=>[PZ(A.$slots,"default",{},void 0,!0)]),_:3},16)):ye("",!0)}},En=qt(jbe,[["__scopeId","data-v-4340528a"]]),iR={__name:"delete-appointment",props:{deleteSelectedAppointment:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=e,a=t,r=V(n.deleteSelectedAppointment),s=()=>{a("close")},o=async i=>{const c=await xve(i.id);c.error?console.error("Error deleting appointment:",c.error):console.log("Appointment deleted successfully"),s()};return(i,c)=>{const A=I("v-card-title"),d=I("v-col"),f=I("v-icon"),m=I("v-btn"),v=I("v-row"),p=I("v-card"),g=I("v-card-text"),y=I("v-divider");return R(),ve(p,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(v,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(p,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(v,{"no-gutters":""},{default:u(()=>[l(d,{cols:"11"},{default:u(()=>[l(A,{class:"pa-0 pl-2"},{default:u(()=>[...c[1]||(c[1]=[O("Confirm Appointment Delete",-1)])]),_:1})]),_:1}),l(d,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(m,{icon:"",size:"x-small",onClick:s},{default:u(()=>[l(f,null,{default:u(()=>[...c[2]||(c[2]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(v,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(p,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(v,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(g,{class:"text-left"},{default:u(()=>[...c[3]||(c[3]=[O(" Are you sure you want to delete this appointment? ",-1),h("span",{class:"text-red font-weight-bold"}," You will not be able to recover data once deleted. ",-1)])]),_:1})]),_:1})]),_:1}),l(y),l(v,{"no-gutters":""},{default:u(()=>[l(d,{cols:"2"}),l(d,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(m,{variant:"outlined",onClick:c[0]||(c[0]=w=>o(r.value))},{default:u(()=>[...c[4]||(c[4]=[O("Yes, Delete Appointment",-1)])]),_:1})]),_:1}),l(d,{cols:"2"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},qbe={class:"tab-content"},Ybe={class:"tab-content"},Xbe={class:"tab-content"},Jbe={class:"scroll-hover",style:{height:"calc(100% - 8px)"}},Zbe={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},exe={class:"d-flex align-center flex-wrap"},txe={class:"text-caption mr-2"},nxe={class:"d-flex align-center"},axe={class:"scroll-hover",style:{height:"calc(100vh - 280px)"}},rxe={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},sxe={class:"d-flex align-center flex-wrap"},oxe={class:"text-caption mr-2"},ixe={class:"text-success"},lxe={class:"d-flex align-center"},uxe={class:"scroll-hover",style:{height:"calc(100vh - 280px)"}},cxe={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},dxe={class:"d-flex align-center flex-wrap"},Axe={class:"text-caption mr-2"},fxe={class:"text-error"},mxe={class:"d-flex align-center"},vxe={__name:"appointment-queue",setup(e,{expose:t}){const n=ra(),a=sl(),{showSuccess:r,showWarning:s}=ca(),o=V("in-queue"),i=V(!1),c=V([]),A=V(!1),d=V(null),f=V(!1),m=V(null),v=V(!1),p=V(!1),g=V(!1),y=V(null),w=V(!1),b=V(null),x=V(!1),T=V(null),D=V(!1),k=V(null),S=V(!1),E=V(null),C=V(!1),U=V(null),F=()=>{const kt=new Date,at=new Date(kt.getTime()+330*60*1e3),bt=at.getUTCFullYear(),en=String(at.getUTCMonth()+1).padStart(2,"0"),Ye=String(at.getUTCDate()).padStart(2,"0");return`${bt}-${en}-${Ye}`},L=kt=>{if(kt instanceof Date){const at=kt.getFullYear(),bt=String(kt.getMonth()+1).padStart(2,"0"),en=String(kt.getDate()).padStart(2,"0");return`${at}-${bt}-${en}`}return kt},H=V(F()),ue=V(""),ie=V(null),Q=ne(()=>n.state.doctorModule.doctorId),X=ne(()=>n.state.clinicModule.clinicId),le=ne(()=>n.getters["doctorModule/isGSTRegistered"]),Z=kt=>{if(!ue.value||ue.value.trim()==="")return kt;const at=ue.value.toLowerCase().trim();return kt.filter(bt=>bt.patient_name.toLowerCase().includes(at))},re=ne(()=>{const kt=c.value.filter(at=>at.status==="waiting"||at.status==="confirmed");return Z(kt)}),q=ne(()=>{const kt=c.value.filter(at=>at.status==="completed");return Z(kt)}),P=ne(()=>{const kt=c.value.filter(at=>at.status==="cancelled");return Z(kt)}),{hasPermission:G}=ch(),J=kt=>{if(!G("home.queue.patient").value){s("You do not have permission to view patient details from appointment card");return}console.log("Is this mobile",Ro),Ro?a.push({name:"PatientDetailMobile",params:{id:kt},query:{from:"home"}}):a.push({name:"PatientDetailPage",params:{id:kt},query:{from:"home"}})},M=kt=>{console.log("Tab changed to:",kt),f.value=!0,setTimeout(()=>{f.value=!1},500),requestAnimationFrame(()=>{f.value=!0,setTimeout(()=>{f.value=!1},300)}),m.value=kt,setTimeout(()=>{m.value=null},600)},te=kt=>{if(!kt)return"Select Date";const at=F(),bt=new Date(Date.now()+330*60*1e3-1440*60*1e3).toISOString().slice(0,10),en=new Date(Date.now()+330*60*1e3+1440*60*1e3).toISOString().slice(0,10);if(kt===at)return"Today";if(kt===bt)return"Yesterday";if(kt===en)return"Tomorrow";const Ye=new Date(kt+"T12:00:00");return Ye.toLocaleDateString("en-IN",{day:"numeric",month:"short",year:Ye.getFullYear()!==new Date().getFullYear()?"numeric":void 0})},Y=async kt=>{let at;typeof kt=="string"?at=kt.includes("T")?kt.split("T")[0]:kt:kt instanceof Date?at=L(kt):at=F(),H.value=at,v.value=!1,await xt(Q.value,X.value,at)},W=()=>{ie.value&&clearTimeout(ie.value),ie.value=setTimeout(()=>{console.log("Search query:",ue.value)},300)};Xl(()=>{xt(Q.value,X.value,H.value)});const ee=()=>{i.value=!0},ae=async()=>{i.value=!1,await xt(Q.value,X.value,H.value)},oe=async kt=>{r(kt.message),await xt(Q.value,X.value,H.value)},j=kt=>{kt.type,r(kt.message)},ce=V(!1),de=V(null),_e=kt=>{ce.value=!0,de.value=kt,console.log("Selected Appointment for Deletion:",kt)},Re=async()=>{ce.value=!1,de.value=null,await xt(Q.value,X.value,H.value)},be=kt=>{d.value={...kt},A.value=!0},Ee=async()=>{await xt(Q.value,X.value,H.value),A.value=!1},Ce=kt=>{if(!G("home.queue.bill").value){s("You do not have permission to generate receipts");return}y.value=kt,le.value?g.value=!0:p.value=!0},Be=()=>{p.value=!1,g.value=!1,y.value=null},Te=kt=>{console.log("Receipt created successfully:",kt),r(`Receipt ${kt.identifier} created successfully!`)},Oe=kt=>{console.log("Bill created successfully:",kt),r(`Bill ${kt.identifier} created successfully!`),g.value=!1,y.value=null,dt(kt.id)},Me=kt=>{console.log("Edit receipt requested for ID:",kt),p.value=!1,g.value=!1,b.value=kt,w.value=!0},rt=()=>{w.value=!1,b.value=null},ut=()=>{x.value=!1,T.value=null},Ie=kt=>{console.log("View receipt requested for ID:",kt),p.value=!1,g.value=!1,k.value=kt,D.value=!0},Ue=()=>{D.value=!1,k.value=null},dt=kt=>{console.log("View bill requested for ID:",kt),p.value=!1,g.value=!1,E.value=kt,S.value=!0},Ft=()=>{S.value=!1,E.value=null},it=kt=>{console.log("Edit bill requested from view for ID:",kt),S.value=!1,E.value=null,T.value=kt,x.value=!0},qe=kt=>{console.log("Edit receipt requested from view for ID:",kt),D.value=!1,k.value=null,b.value=kt,w.value=!0},yt=kt=>{console.log("Receipt updated successfully:",kt),r(`Receipt ${kt.identifier} updated successfully!`),rt()},mt=kt=>{console.log("Bill updated successfully:",kt),r(`Bill ${kt.identifier} updated successfully!`),ut()},xt=async(kt,at,bt=null,en=!1)=>{const Ye=await wve(kt,at,bt);Ye.error||(c.value=[...Ye.data],en&&r("Appointment list refreshed"))},an=async kt=>{kt.status=kt.status==="waiting"?"completed":"waiting",await QM(kt)},Cn=async()=>{await xt(Q.value,X.value,H.value,!0)},oa=kt=>{if(!G("home.queue.certificate").value){s("You do not have permission to generate certificates");return}U.value=kt,C.value=!0},Vt=()=>{C.value=!1,U.value=null};return t({refreshAppointments:xt}),(kt,at)=>{const bt=I("v-icon"),en=I("v-btn"),Ye=I("v-date-picker"),We=I("v-menu"),_t=I("v-col"),Rt=I("v-tooltip"),zt=I("v-spacer"),Pt=I("v-row"),Wt=I("v-badge"),Lt=I("v-tab"),ia=I("v-tabs"),Ln=I("v-card"),zn=I("v-text-field"),Yt=I("v-progress-circular"),Bn=I("v-card-title"),ke=I("v-chip"),ze=I("v-card-text"),Fe=I("v-card-actions"),Le=I("v-empty-state"),Ge=I("v-tabs-window-item"),he=I("v-tabs-window"),se=I("v-bottom-sheet"),ge=I("v-dialog");return R(),Ae(Ke,null,[l(Ln,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex flex-column"},{default:u(()=>[l(Ln,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(Pt,{"no-gutters":""},{default:u(()=>[l(_t,{cols:"7",class:"d-flex justify-start"},{default:u(()=>[l(We,{modelValue:v.value,"onUpdate:modelValue":at[1]||(at[1]=xe=>v.value=xe),"close-on-content-click":!1,transition:"scale-transition","offset-y":""},{activator:u(({props:xe})=>[l(en,Pe(xe,{variant:"outlined",size:"small",rounded:"x-small",class:"btn-hover-enhanced"}),{default:u(()=>[O(K(te(H.value))+" ",1),l(bt,{class:"ml-1"},{default:u(()=>[...at[20]||(at[20]=[O("mdi-calendar",-1)])]),_:1})]),_:1},16)]),default:u(()=>[l(Ye,{modelValue:H.value,"onUpdate:modelValue":[at[0]||(at[0]=xe=>H.value=xe),Y],color:"primary",locale:"en-IN"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),l(_t,{cols:"5",class:"d-flex justify-end"},{default:u(()=>[l(Rt,{text:"Add Patient to Appointment Queue"},{activator:u(({props:xe})=>[l(en,Pe({rounded:"x-small",onClick:ee,size:"small",variant:"outlined"},xe,{class:"btn-hover-enhanced mr-1"}),{default:u(()=>[...at[21]||(at[21]=[O(" Add Patient ",-1)])]),_:1},16)]),_:1}),l(zt),l(Rt,{text:"Refresh Appointment Queue"},{activator:u(({props:xe})=>[l(en,Pe({rounded:"x-small",onClick:Cn,size:"small"},xe,{class:"btn-hover-enhanced"}),{default:u(()=>[l(bt,{size:"large"},{default:u(()=>[...at[22]||(at[22]=[h("img",{src:_g,alt:"Refresh",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1},16)]),_:1})]),_:1})]),_:1}),l(Pt,{"no-gutters":""},{default:u(()=>[l(_t,{cols:"12"},{default:u(()=>[l(ia,{modelValue:o.value,"onUpdate:modelValue":[at[2]||(at[2]=xe=>o.value=xe),M],"align-tabs":"center",density:"compact",class:"tabs-hover-container"},{default:u(()=>[l(Rt,{text:"Patients Waiting & Confirmed"},{activator:u(({props:xe})=>[l(Lt,Pe({value:"in-queue"},xe,{class:["tab-hover",{"tab-active":o.value==="in-queue"}]}),{default:u(()=>[h("div",qbe,[l(Wt,{color:o.value==="in-queue"?"warning":"primary",content:re.value.length,inline:"",class:"tab-badge"},{default:u(()=>[l(bt,{size:"large",class:"tab-icon"},{default:u(()=>[...at[23]||(at[23]=[h("img",{src:Tfe,alt:"waiting"},null,-1)])]),_:1})]),_:1},8,["color","content"])])]),_:1},16,["class"])]),_:1}),l(Rt,{text:"Consultations Completed"},{activator:u(({props:xe})=>[l(Lt,Pe({value:"completed"},xe,{class:["tab-hover",{"tab-active":o.value==="completed"}]}),{default:u(()=>[h("div",Ybe,[l(Wt,{color:o.value==="completed"?"success":"primary",content:q.value.length,inline:"",class:"tab-badge"},{default:u(()=>[l(bt,{size:"large",class:"tab-icon"},{default:u(()=>[...at[24]||(at[24]=[h("img",{src:Ife,alt:"completed"},null,-1)])]),_:1})]),_:1},8,["color","content"])])]),_:1},16,["class"])]),_:1}),l(Rt,{text:"Cancelled Appointments"},{activator:u(({props:xe})=>[l(Lt,Pe({value:"cancelled"},xe,{class:["tab-hover",{"tab-active":o.value==="cancelled"}]}),{default:u(()=>[h("div",Xbe,[l(Wt,{color:o.value==="cancelled"?"error":"primary",content:P.value.length,inline:"",class:"tab-badge"},{default:u(()=>[l(bt,{size:"large",class:"tab-icon"},{default:u(()=>[...at[25]||(at[25]=[h("img",{src:Ffe,alt:"cancelled"},null,-1)])]),_:1})]),_:1},8,["color","content"])])]),_:1},16,["class"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(he,{modelValue:o.value,"onUpdate:modelValue":at[6]||(at[6]=xe=>o.value=xe),class:"flex-grow-1"},{default:u(()=>[l(Ge,{value:"in-queue",class:"h-100"},{default:u(()=>[l(Pt,{"no-gutters":"",class:"h-100"},{default:u(()=>[l(_t,{cols:"12",class:"pa-2"},{default:u(()=>[l(zn,{modelValue:ue.value,"onUpdate:modelValue":at[3]||(at[3]=xe=>ue.value=xe),placeholder:"Search waiting patients by name...",variant:"outlined",density:"compact","hide-details":"",clearable:"",class:"search-field",onInput:W},{"prepend-inner":u(()=>[l(bt,{size:"small",color:"secondary"},{default:u(()=>[...at[26]||(at[26]=[O("mdi-magnify",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(_t,{cols:"12",class:"h-100",style:{height:"calc(100% - 80px)"}},{default:u(()=>[h("div",Jbe,[re.value?re.value.length>0?(R(!0),Ae(Ke,{key:1},Gt(re.value.sort((xe,He)=>new Date(xe.appointmentDate+" "+xe.appointmentTime)-new Date(He.appointmentDate+" "+He.appointmentTime)),xe=>(R(),ve(Ln,{key:xe.id,style:Ut([{textAlign:"left"},{cursor:"pointer",position:"relative",overflow:"visible"}]),density:"compact",class:"ma-2 card-enhanced card-hover-base card-status-waiting",onClick:He=>J(xe.patientId)},{default:u(()=>[l(Bn,{class:"pb-0 pt-2"},{default:u(()=>[h("div",Zbe,K(xe.patient_name),1)]),_:2},1024),l(ze,{class:"py-1"},{default:u(()=>[l(Pt,{"no-gutters":"",align:"center"},{default:u(()=>[l(_t,{cols:"12",class:"d-flex align-center justify-space-between"},{default:u(()=>[h("div",exe,[h("span",txe,[h("span",{class:ct(new Date(xe.appointmentDate+" "+xe.appointmentTime)<new Date?"text-error":"text-primary")},K(Qe(rC)(xe.appointmentTime)),3),O(" "+K(`  ${xe.patient_gender}`)+K(xe.patient_age!==null?`  ${xe.patient_age}y`:"")+K(xe.contactNumber?`  ${xe.contactNumber}`:"")+K(xe.importID?`  Import ID: ${xe.importID}`:""),1)])]),h("div",nxe,[xe.status==="confirmed"?(R(),ve(bt,{key:0,size:"small",color:"secondary",class:"mr-1"},{default:u(()=>[...at[27]||(at[27]=[h("img",{src:Pfe,alt:"Confirmed"},null,-1)])]),_:1})):ye("",!0),l(Rt,{text:xe.category==="walkin"?"Walk-in Patient":"Scheduled Appointment"},{activator:u(({props:He})=>[l(bt,Pe({size:"small",class:"mr-1",color:"secondary"},{ref_for:!0},He),{default:u(()=>[O(K(xe.category==="walkin"?"mdi-walk":"mdi-calendar-account-outline"),1)]),_:2},1040)]),_:2},1032,["text"]),xe.type==="procedure"?(R(),ve(Rt,{key:1,text:"Procedure Appointment"},{activator:u(({props:He})=>[l(bt,Pe({size:"small",class:"mr-1",color:"secondary"},{ref_for:!0},He),{default:u(()=>[...at[28]||(at[28]=[h("img",{src:eC,alt:"Procedure"},null,-1)])]),_:1},16)]),_:1})):ye("",!0),xe.has_prior_consultation?(R(),ve(Rt,{key:2,text:"Past Consultations Available"},{activator:u(({props:He})=>[l(bt,Pe({size:"small",class:"mr-1",color:"secondary"},{ref_for:!0},He),{default:u(()=>[...at[29]||(at[29]=[O("mdi-file-eye",-1)])]),_:1},16)]),_:1})):ye("",!0),xe.type==="followup"?(R(),ve(ke,{key:3,size:"x-small",color:"primary","text-color":"black",class:"mr-1"},{default:u(()=>[...at[30]||(at[30]=[O(" follow-up ",-1)])]),_:1})):ye("",!0)])]),_:2},1024)]),_:2},1024)]),_:2},1024),l(Fe,{class:"pa-0 px-4 action-row-highlight"},{default:u(()=>[l(Rt,{text:"Edit Appointment"},{activator:u(({props:He})=>[l(en,Pe({color:"primary",variant:"plain",size:"default"},{ref_for:!0},He,{onClick:vn(tt=>be(xe),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[l(bt,{size:"default"},{default:u(()=>[...at[31]||(at[31]=[h("img",{src:pv,alt:"Edit"},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024),l(Rt,{text:"Delete Appointment"},{activator:u(({props:He})=>[l(en,Pe({color:"secondary",variant:"plain",size:"default"},{ref_for:!0},He,{onClick:vn(tt=>_e(xe),["stop"]),class:"btn-hover-base"}),{default:u(()=>[l(bt,{size:"default"},{default:u(()=>[...at[32]||(at[32]=[h("img",{src:Id},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024),l(zt),l(En,{permission:"home.queue.bill",tag:"span"},{default:u(()=>[l(Rt,{text:"Generate Receipt"},{activator:u(({props:He})=>[l(en,Pe({color:"primary",variant:"plain",size:"default"},{ref_for:!0},He,{onClick:vn(tt=>Ce(xe),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[l(bt,{size:"default"},{default:u(()=>[...at[33]||(at[33]=[O("mdi-currency-inr",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024),l(En,{permission:"home.queue.certificate",tag:"span"},{default:u(()=>[l(Rt,{text:"Create Document"},{activator:u(({props:He})=>[l(en,Pe({color:"primary",variant:"plain",size:"default"},{ref_for:!0},He,{onClick:vn(tt=>oa(xe),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[l(bt,{size:"default"},{default:u(()=>[...at[34]||(at[34]=[h("img",{src:tC,alt:"Create Document"},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024),l(Rt,{text:"Mark Complete"},{activator:u(({props:He})=>[l(en,Pe({color:"#2e7d32",variant:"plain",size:"default"},{ref_for:!0},He,{onClick:vn(tt=>an(xe),["stop"]),class:"btn-hover-base"}),{default:u(()=>[l(bt,{size:"default"},{default:u(()=>[...at[35]||(at[35]=[O("mdi-check-circle-outline",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):re.value.length===0?(R(),ve(_t,{key:2,class:"text-center"},{default:u(()=>[l(Ln,{flat:"",color:"surfaceContainer"},{default:u(()=>[l(Le,{image:Qe(BC)},{title:u(()=>[...at[36]||(at[36]=[h("div",{class:"text-subtitle-2 mt-8"}," No patients in the wait queue ",-1)])]),text:u(()=>[...at[37]||(at[37]=[h("div",{class:"text-caption"}," appointments will show here once you add them to wait queue ",-1)])]),_:1},8,["image"])]),_:1})]),_:1})):ye("",!0):(R(),ve(Pt,{key:0,"no-gutters":""},{default:u(()=>[l(_t,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[l(Yt,{indeterminate:"",color:"primary"})]),_:1})]),_:1}))])]),_:1})]),_:1})]),_:1}),l(Ge,{value:"completed"},{default:u(()=>[l(Pt,{"no-gutters":""},{default:u(()=>[l(_t,{cols:"12",class:"pa-2"},{default:u(()=>[l(zn,{modelValue:ue.value,"onUpdate:modelValue":at[4]||(at[4]=xe=>ue.value=xe),placeholder:"Search completed patients by name...",variant:"outlined",density:"compact","hide-details":"",clearable:"",class:"search-field",onInput:W},{"prepend-inner":u(()=>[l(bt,{size:"small",color:"secondary"},{default:u(()=>[...at[38]||(at[38]=[O("mdi-magnify",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(_t,{cols:"12"},{default:u(()=>[h("div",axe,[q.value?q.value.length>0?(R(!0),Ae(Ke,{key:1},Gt(q.value.sort((xe,He)=>new Date(He.appointmentDate+" "+He.appointmentTime)-new Date(xe.appointmentDate+" "+xe.appointmentTime)),xe=>(R(),ve(Ln,{key:xe.id,style:Ut([{textAlign:"left"},{cursor:"pointer",position:"relative",overflow:"visible"}]),density:"compact",class:"ma-2 card-enhanced card-hover-base card-status-completed",onClick:He=>J(xe.patientId)},{default:u(()=>[l(Bn,{class:"pb-0 pt-2"},{default:u(()=>[h("div",rxe,K(xe.patient_name),1)]),_:2},1024),l(ze,{class:"py-1"},{default:u(()=>[l(Pt,{"no-gutters":"",align:"center"},{default:u(()=>[l(_t,{cols:"12",class:"d-flex align-center justify-space-between"},{default:u(()=>[h("div",sxe,[h("span",oxe,[h("span",ixe,K(Qe(rC)(xe.appointmentTime)),1),O(" "+K(`  ${xe.patient_gender}`)+K(xe.patient_age!==null?`  ${xe.patient_age}y`:"")+K(xe.contactNumber?`  ${xe.contactNumber}`:"")+K(xe.importID?`  Import ID: ${xe.importID}`:""),1)])]),h("div",lxe,[l(bt,{size:"small",color:"success",class:"mr-1"},{default:u(()=>[...at[39]||(at[39]=[O(" mdi-check-circle ",-1)])]),_:1}),l(Rt,{text:xe.category==="walkin"?"Walk-in Patient":"Scheduled Appointment"},{activator:u(({props:He})=>[l(bt,Pe({size:"small",class:"mr-1",color:"secondary"},{ref_for:!0},He),{default:u(()=>[O(K(xe.category==="walkin"?"mdi-walk":"mdi-calendar-account-outline"),1)]),_:2},1040)]),_:2},1032,["text"]),xe.type==="procedure"?(R(),ve(Rt,{key:0,text:"Procedure Appointment"},{activator:u(({props:He})=>[l(bt,Pe({size:"small",class:"mr-1",color:"secondary"},{ref_for:!0},He),{default:u(()=>[...at[40]||(at[40]=[h("img",{src:eC,alt:"Procedure"},null,-1)])]),_:1},16)]),_:1})):ye("",!0),xe.has_prior_consultation?(R(),ve(Rt,{key:1,text:"Past Consultations Available"},{activator:u(({props:He})=>[l(bt,Pe({size:"small",class:"mr-1",color:"secondary"},{ref_for:!0},He),{default:u(()=>[...at[41]||(at[41]=[O("mdi-file-eye",-1)])]),_:1},16)]),_:1})):ye("",!0),xe.type==="followup"?(R(),ve(ke,{key:2,size:"x-small",color:"primary","text-color":"black",class:"mr-1"},{default:u(()=>[...at[42]||(at[42]=[O(" follow-up ",-1)])]),_:1})):ye("",!0)])]),_:2},1024)]),_:2},1024)]),_:2},1024),l(Fe,{class:"pa-0 px-4 action-row-highlight"},{default:u(()=>[l(Rt,{text:"Edit Appointment"},{activator:u(({props:He})=>[l(en,Pe({color:"primary",variant:"plain",size:"default"},{ref_for:!0},He,{onClick:vn(tt=>be(xe),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[l(bt,{size:"default"},{default:u(()=>[...at[43]||(at[43]=[h("img",{src:pv,alt:"Edit"},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024),l(Rt,{text:"Delete Appointment"},{activator:u(({props:He})=>[l(en,Pe({color:"secondary",variant:"plain",size:"default"},{ref_for:!0},He,{onClick:vn(tt=>_e(xe),["stop"]),class:"btn-hover-base"}),{default:u(()=>[l(bt,{size:"default"},{default:u(()=>[...at[44]||(at[44]=[h("img",{src:Id},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024),l(zt),l(En,{permission:"home.queue.bill",tag:"span"},{default:u(()=>[l(Rt,{text:"Generate Receipt"},{activator:u(({props:He})=>[l(en,Pe({color:"primary",variant:"plain",size:"default"},{ref_for:!0},He,{onClick:vn(tt=>Ce(xe),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[l(bt,{size:"default"},{default:u(()=>[...at[45]||(at[45]=[O("mdi-currency-inr",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024),l(En,{permission:"home.queue.certificate",tag:"span"},{default:u(()=>[l(Rt,{text:"Create Document"},{activator:u(({props:He})=>[l(en,Pe({color:"primary",variant:"plain",size:"default"},{ref_for:!0},He,{onClick:vn(tt=>oa(xe),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[l(bt,{size:"default"},{default:u(()=>[...at[46]||(at[46]=[h("img",{src:tC,alt:"Create Document"},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024),l(Rt,{text:"Unmark Complete"},{activator:u(({props:He})=>[l(en,Pe({color:"#f57c00",variant:"plain",size:"default"},{ref_for:!0},He,{onClick:vn(tt=>an(xe),["stop"]),class:"btn-hover-base"}),{default:u(()=>[l(bt,{size:"default"},{default:u(()=>[...at[47]||(at[47]=[O("mdi-undo",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):ye("",!0):(R(),ve(Pt,{key:0,"no-gutters":""},{default:u(()=>[l(_t,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[l(Yt,{indeterminate:"",color:"primary"})]),_:1})]),_:1})),q.value.length===0?(R(),ve(_t,{key:2,class:"text-center"},{default:u(()=>[l(Ln,{flat:"",color:"surfaceContainer"},{default:u(()=>[l(Le,{image:Qe(BC)},{title:u(()=>[...at[48]||(at[48]=[h("div",{class:"text-subtitle-2 mt-8"}," No patients in the completed list ",-1)])]),text:u(()=>[...at[49]||(at[49]=[h("div",{class:"text-caption"}," appointments will show here once you completed them ",-1)])]),_:1},8,["image"])]),_:1})]),_:1})):ye("",!0)])]),_:1})]),_:1})]),_:1}),l(Ge,{value:"cancelled"},{default:u(()=>[l(Pt,{"no-gutters":""},{default:u(()=>[l(_t,{cols:"12",class:"pa-2"},{default:u(()=>[l(zn,{modelValue:ue.value,"onUpdate:modelValue":at[5]||(at[5]=xe=>ue.value=xe),placeholder:"Search cancelled patients by name...",variant:"outlined",density:"compact","hide-details":"",clearable:"",class:"search-field",onInput:W},{"prepend-inner":u(()=>[l(bt,{size:"small",color:"secondary"},{default:u(()=>[...at[50]||(at[50]=[O("mdi-magnify",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(_t,{cols:"12"},{default:u(()=>[h("div",uxe,[P.value?P.value.length>0?(R(!0),Ae(Ke,{key:1},Gt(P.value.sort((xe,He)=>new Date(He.appointmentDate+" "+He.appointmentTime)-new Date(xe.appointmentDate+" "+xe.appointmentTime)),xe=>(R(),ve(Ln,{key:xe.id,style:Ut([{textAlign:"left"},{cursor:"pointer",position:"relative",overflow:"visible"}]),density:"compact",class:"ma-2 card-enhanced card-hover-base card-status-cancelled",onClick:He=>J(xe.patientId)},{default:u(()=>[l(Bn,{class:"pb-0 pt-2"},{default:u(()=>[h("div",cxe,K(xe.patient_name),1)]),_:2},1024),l(ze,{class:"py-1"},{default:u(()=>[l(Pt,{"no-gutters":"",align:"center"},{default:u(()=>[l(_t,{cols:"12",class:"d-flex align-center justify-space-between"},{default:u(()=>[h("div",dxe,[h("span",Axe,[h("span",fxe,K(Qe(rC)(xe.appointmentTime)),1),O(" "+K(`  ${xe.patient_gender}`)+K(xe.patient_age!==null?`  ${xe.patient_age}y`:"")+K(xe.contactNumber?`  ${xe.contactNumber}`:"")+K(xe.importID?`  Import ID: ${xe.importID}`:""),1)])]),h("div",mxe,[l(bt,{size:"small",color:"error",class:"mr-1"},{default:u(()=>[...at[51]||(at[51]=[O(" mdi-cancel ",-1)])]),_:1}),l(Rt,{text:xe.category==="walkin"?"Walk-in Patient":"Scheduled Appointment"},{activator:u(({props:He})=>[l(bt,Pe({size:"small",class:"mr-1",color:"secondary"},{ref_for:!0},He),{default:u(()=>[O(K(xe.category==="walkin"?"mdi-walk":"mdi-calendar-account-outline"),1)]),_:2},1040)]),_:2},1032,["text"]),xe.type==="procedure"?(R(),ve(Rt,{key:0,text:"Procedure Appointment"},{activator:u(({props:He})=>[l(bt,Pe({size:"small",class:"mr-1",color:"secondary"},{ref_for:!0},He),{default:u(()=>[...at[52]||(at[52]=[h("img",{src:eC,alt:"Procedure"},null,-1)])]),_:1},16)]),_:1})):ye("",!0),xe.has_prior_consultation?(R(),ve(Rt,{key:1,text:"Past Consultations Available"},{activator:u(({props:He})=>[l(bt,Pe({size:"small",class:"mr-1",color:"secondary"},{ref_for:!0},He),{default:u(()=>[...at[53]||(at[53]=[O("mdi-file-eye",-1)])]),_:1},16)]),_:1})):ye("",!0),xe.type==="followup"?(R(),ve(ke,{key:2,size:"x-small",color:"primary","text-color":"black",class:"mr-1"},{default:u(()=>[...at[54]||(at[54]=[O(" follow-up ",-1)])]),_:1})):ye("",!0)])]),_:2},1024)]),_:2},1024)]),_:2},1024),l(Fe,{class:"pa-0 px-4 action-row-highlight"},{default:u(()=>[l(Rt,{text:"Edit Appointment"},{activator:u(({props:He})=>[l(en,Pe({color:"primary",variant:"plain",size:"default"},{ref_for:!0},He,{onClick:vn(tt=>be(xe),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[l(bt,{size:"default"},{default:u(()=>[...at[55]||(at[55]=[h("img",{src:pv,alt:"Edit"},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024),l(Rt,{text:"Delete Appointment"},{activator:u(({props:He})=>[l(en,Pe({color:"secondary",variant:"plain",size:"default"},{ref_for:!0},He,{onClick:vn(tt=>_e(xe),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[l(bt,{size:"default"},{default:u(()=>[...at[56]||(at[56]=[h("img",{src:Id},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024),l(zt),l(En,{permission:"home.queue.bill",tag:"span"},{default:u(()=>[l(Rt,{text:"Generate Receipt"},{activator:u(({props:He})=>[l(en,Pe({color:"primary",variant:"plain",size:"default"},{ref_for:!0},He,{onClick:vn(tt=>Ce(xe),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[l(bt,{size:"default"},{default:u(()=>[...at[57]||(at[57]=[O("mdi-currency-inr",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024),l(En,{permission:"home.queue.certificate",tag:"span"},{default:u(()=>[l(Rt,{text:"Create Document"},{activator:u(({props:He})=>[l(en,Pe({color:"primary",variant:"plain",size:"default"},{ref_for:!0},He,{onClick:vn(tt=>oa(xe),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[l(bt,{size:"default"},{default:u(()=>[...at[58]||(at[58]=[h("img",{src:tC,alt:"Create Document"},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024),l(Rt,{text:"Reschedule"},{activator:u(({props:He})=>[l(en,Pe({color:"#f57c00",variant:"plain",size:"default"},{ref_for:!0},He,{onClick:vn(tt=>be(xe),["stop"]),class:"btn-hover-base"}),{default:u(()=>[l(bt,{size:"default"},{default:u(()=>[...at[59]||(at[59]=[O("mdi-calendar-edit",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):ye("",!0):(R(),ve(Pt,{key:0,"no-gutters":""},{default:u(()=>[l(_t,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[l(Yt,{indeterminate:"",color:"primary"})]),_:1})]),_:1})),P.value.length===0?(R(),ve(_t,{key:2,class:"text-center"},{default:u(()=>[l(Ln,{flat:"",color:"surfaceContainer"},{default:u(()=>[l(Le,{image:Qe(BC)},{title:u(()=>[...at[60]||(at[60]=[h("div",{class:"text-subtitle-2 mt-8"}," No cancelled appointments ",-1)])]),text:u(()=>[...at[61]||(at[61]=[h("div",{class:"text-caption"}," cancelled appointments will show here ",-1)])]),_:1},8,["image"])]),_:1})]),_:1})):ye("",!0)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),Qe(Ro)?(R(),ve(se,{key:0,modelValue:i.value,"onUpdate:modelValue":at[7]||(at[7]=xe=>i.value=xe),class:"elevation-24","max-width":"100%"},{default:u(()=>[l(oU,{onClose:ae,onAppointmentCreated:oe,onError:j,doctorId:Q.value,clinicId:X.value,selectedDate:H.value},null,8,["doctorId","clinicId","selectedDate"])]),_:1},8,["modelValue"])):ye("",!0),Qe(Ro)?ye("",!0):(R(),ve(ge,{key:1,modelValue:i.value,"onUpdate:modelValue":at[8]||(at[8]=xe=>i.value=xe),persistent:"","max-width":"1000px"},{default:u(()=>[l(oU,{onClose:ae,onAppointmentCreated:oe,onError:j,doctorId:Q.value,clinicId:X.value,selectedDate:H.value},null,8,["doctorId","clinicId","selectedDate"])]),_:1},8,["modelValue"])),Qe(Ro)?(R(),ve(se,{key:2,modelValue:A.value,"onUpdate:modelValue":at[9]||(at[9]=xe=>A.value=xe),class:"elevation-24","max-width":"100%"},{default:u(()=>[l(iU,{onClose:Ee,appointment:d.value},null,8,["appointment"])]),_:1},8,["modelValue"])):ye("",!0),Qe(Ro)?ye("",!0):(R(),ve(ge,{key:3,modelValue:A.value,"onUpdate:modelValue":at[10]||(at[10]=xe=>A.value=xe),persistent:"","max-width":"30%"},{default:u(()=>[l(iU,{onClose:Ee,appointment:d.value},null,8,["appointment"])]),_:1},8,["modelValue"])),Qe(Ro)?(R(),ve(se,{key:4,modelValue:ce.value,"onUpdate:modelValue":at[11]||(at[11]=xe=>ce.value=xe),class:"elevation-24","max-width":"100%"},{default:u(()=>[l(iR,{onClose:Re,deleteSelectedAppointment:de.value},null,8,["deleteSelectedAppointment"])]),_:1},8,["modelValue"])):ye("",!0),Qe(Ro)?ye("",!0):(R(),ve(ge,{key:5,modelValue:ce.value,"onUpdate:modelValue":at[12]||(at[12]=xe=>ce.value=xe),persistent:"","max-width":"30%"},{default:u(()=>[l(iR,{onClose:Re,deleteSelectedAppointment:de.value},null,8,["deleteSelectedAppointment"])]),_:1},8,["modelValue"])),l(ge,{modelValue:p.value,"onUpdate:modelValue":at[13]||(at[13]=xe=>p.value=xe),persistent:"","max-width":"70%"},{default:u(()=>[y.value?(R(),ve(she,{key:0,appointment:y.value,onClose:Be,onReceiptCreated:Te,onEditReceipt:Me,onViewReceipt:Ie},null,8,["appointment"])):ye("",!0)]),_:1},8,["modelValue"]),at[62]||(at[62]=O()),l(ge,{modelValue:g.value,"onUpdate:modelValue":at[14]||(at[14]=xe=>g.value=xe),persistent:"","max-width":"80%"},{default:u(()=>[y.value?(R(),ve(Q2e,{key:0,appointment:y.value,onClose:Be,onBillCreated:Oe,onEditReceipt:Me,onViewBill:dt},null,8,["appointment"])):ye("",!0)]),_:1},8,["modelValue"]),l(ge,{modelValue:w.value,"onUpdate:modelValue":at[15]||(at[15]=xe=>w.value=xe),persistent:"","max-width":"70%"},{default:u(()=>[w.value&&b.value?(R(),ve(sO,{key:0,receiptId:b.value,onClose:rt,onReceiptUpdated:yt},null,8,["receiptId"])):ye("",!0)]),_:1},8,["modelValue"]),l(ge,{modelValue:x.value,"onUpdate:modelValue":at[16]||(at[16]=xe=>x.value=xe),persistent:"","max-width":"85%"},{default:u(()=>[x.value&&T.value?(R(),ve(_H,{key:0,billId:T.value,onClose:ut,onBillUpdated:mt},null,8,["billId"])):ye("",!0)]),_:1},8,["modelValue"]),l(ge,{modelValue:D.value,"onUpdate:modelValue":at[17]||(at[17]=xe=>D.value=xe),persistent:"","max-width":"70%"},{default:u(()=>[D.value&&k.value?(R(),ve(mH,{key:0,receiptId:k.value,onClose:Ue,onEditReceipt:qe},null,8,["receiptId"])):ye("",!0)]),_:1},8,["modelValue"]),l(ge,{modelValue:S.value,"onUpdate:modelValue":at[18]||(at[18]=xe=>S.value=xe),persistent:"","max-width":"80%"},{default:u(()=>[S.value&&E.value?(R(),ve(yH,{key:0,billId:E.value,onClose:Ft,onEditBill:it},null,8,["billId"])):ye("",!0)]),_:1},8,["modelValue"]),l(ge,{modelValue:C.value,"onUpdate:modelValue":at[19]||(at[19]=xe=>C.value=xe),persistent:"","max-width":"80%"},{default:u(()=>[U.value?(R(),ve(Wbe,{key:0,appointment:U.value,doctorId:Q.value,clinicId:X.value,onClose:Vt},null,8,["appointment","doctorId","clinicId"])):ye("",!0)]),_:1},8,["modelValue"])],64)}}},wH=qt(vxe,[["__scopeId","data-v-981063c4"]]),hxe=""+new URL("images/default-BWombGQT.jpg",import.meta.url).href,lf=[{src:hxe,alt:"evamed logo",url:"https://www.evamed.in"}],pxe=async(e=null)=>{try{console.log("=== MAKING API CALL TO FETCH CAROUSEL ITEMS ===");let t=e;if(!t){const i=Si.state.doctorModule?.doctors||[],c=Si.state.doctorModule?.doctorId,A=i.find(d=>d.id===c);A&&A.doctorSpecialization&&(t=A.doctorSpecialization)}console.log("API call with specialization:",t);const n=new URLSearchParams;n.append("active_only","true"),t&&n.append("specialization",t);const a=`https://api.origamimed.com/advertisements/?${n.toString()}`;console.log("Fetching carousel items from:",a);const r={"Content-Type":"application/json"},s=$s.currentUser;if(s){const i=await s.getIdToken();r.Authorization=`Bearer ${i}`}const o=await fetch(a,{method:"GET",headers:r,signal:AbortSignal.timeout(1e4)});if(console.log("API Response Status:",o.status),o.ok){const i=await o.json();if(console.log("API Response Data:",i),i.success&&i.data&&i.data.advertisements){const c=i.data.advertisements.map(A=>({src:A.image_url,alt:A.title||"Advertisement",url:A.link_url,title:A.title,description:A.description,id:A.id}));return console.log("Returning",c.length,"carousel items from API"),bH(c),c}else console.warn("API response success but no advertisements found:",i)}else console.error("API request failed with status:",o.status);return console.log("Falling back to default carousel items"),lf.map(i=>({...i,isDefault:!0}))}catch(t){return console.error("Error fetching carousel items:",t),lf.map(n=>({...n,isDefault:!0}))}},bH=e=>{try{if(!e||e.length===0)return;const t={items:e,timestamp:Date.now(),specialization:gxe()};localStorage.setItem("carouselItemsSimple",JSON.stringify(t)),console.log(" Saved",e.length,"items to cache")}catch(t){console.error(" Error saving to cache:",t)}},kC=()=>{try{const e=localStorage.getItem("carouselItemsSimple");if(!e)return console.log(" No cache found"),null;const t=JSON.parse(e);if(t.items&&t.items.length>0){const n=Date.now()-t.timestamp;return console.log(" Found cached items:",t.items.length,"age:",Math.round(n/(60*1e3)),"min"),t.items}return null}catch(e){return console.error(" Error loading from cache:",e),null}},lR=async(e=!1)=>{if(console.log(" getCarouselItemsSimple called, forceRefresh:",e),!e){const t=kC();if(t&&t.length>0)return console.log(" Using cached items"),t}try{console.log(" Fetching from API...");const t=await pxe();if(t&&t.length>0&&!t[0].isDefault)return console.log(" Got real API data:",t.length,"items"),bH(t),t;console.log(" API failed, trying cache fallback");const n=kC();return n&&n.length>0?(console.log(" Using cache as fallback"),n):(console.log(" No cache available, using defaults"),lf)}catch(t){console.error(" API error:",t);const n=kC();return n&&n.length>0?n:lf}},gxe=()=>{const e=Si.state.doctorModule?.doctors||[],t=Si.state.doctorModule?.doctorId;return e.find(a=>a.id===t)?.doctorSpecialization||null},uR=()=>{try{console.log("=== CACHE DEBUG ===");const e=localStorage.getItem("carouselItems");if(e){const n=JSON.parse(e);console.log(" Old cache found:",n.items?.length||0,"items")}else console.log(" No old cache");const t=localStorage.getItem("carouselItemsSimple");if(t){const n=JSON.parse(t);console.log(" New cache found:",n.items?.length||0,"items"),console.log(" First item:",n.items?.[0])}else console.log(" No new cache");console.log("=== END CACHE DEBUG ===")}catch(e){console.error(" Debug error:",e)}},yxe=e=>typeof e=="object"&&e!==null&&typeof e.src=="string"&&e.src.length>0&&typeof e.alt=="string"&&(e.url===null||typeof e.url=="string"),cR=e=>{console.log("filterValidCarouselItems - input items:",e);const n=e.filter((a,r)=>{const s=yxe(a);return s||console.log(`filterValidCarouselItems - item ${r} failed validation:`,a),s}).map(a=>{const r={...a};return delete r.isDefault,r});return console.log("filterValidCarouselItems - output items:",n),n},_xe=()=>{try{const e=localStorage.getItem("carouselState");if(e){const t=JSON.parse(e),n=Date.now()-3600*1e3;if(t.timestamp>n)return t}}catch(e){console.error("Error loading carousel state:",e)}return null},wxe=(e,t)=>{try{const n={currentSlide:e,viewTime:t,timestamp:Date.now()};localStorage.setItem("carouselState",JSON.stringify(n))}catch(n){console.error("Error saving carousel state:",n)}},bxe={key:0,class:"d-flex align-center justify-center",style:{height:"100%"}},xxe={class:"carousel-overlay"},Cxe={key:0,class:"cta-container"},Sxe={class:"progress-container"},Exe={class:"progress-text"},Bxe={key:2,class:"d-flex align-center justify-center",style:{height:"100%"}},TC=1e4,dR=2e3,kxe={__name:"home-content",setup(e){const t=ra(),n=ne(()=>{const k=t.state.doctorModule?.doctors||[],S=t.state.doctorModule?.doctorId;return k.find(E=>E.id===S)||null}),a=ne(()=>n.value?.doctorSpecialization||null),r=V([]),s=V(!0),o=V(0),i=V(0),c=V(null),A=V(!0),d=V(!1),f=V(!1),m=V(!1),v=()=>{wxe(o.value,i.value)},p=()=>{const k=_xe();return k?(d.value=!0,o.value=k.currentSlide||0,i.value=k.viewTime||0,setTimeout(()=>{d.value=!1},100),!0):!1},g=()=>{if(c.value&&(clearInterval(c.value),c.value=null),!f.value){console.log("Component not active, skipping timer start");return}c.value=setInterval(()=>{A.value&&f.value&&(i.value+=dR,i.value>=TC&&w(),i.value%1e3===0&&v())},dR),console.log("Timer started with ID:",c.value)},y=()=>{c.value&&(clearInterval(c.value),c.value=null)},w=()=>{r.value.length>0&&(o.value=(o.value+1)%r.value.length,i.value=0,v())},b=()=>{d.value||(i.value=0)},x=k=>{if(k)if(window.require)try{const{shell:S}=window.require("electron");S.openExternal(k)}catch(S){console.error("Error opening external URL:",S),window.open(k,"_blank")}else window.open(k,"_blank")},T=async()=>{try{console.log("refreshCarouselItems called - forcing fresh fetch due to doctor change"),s.value=!0,uR();const k=await lR(!0);if(console.log("refreshCarouselItems - freshItems:",k),k&&k.length>0){const S=cR(k);console.log("refreshCarouselItems - validItems:",S),S.length>0?(r.value=S,o.value=0,i.value=0,v()):console.log("refreshCarouselItems - no valid items after filtering, keeping existing items")}else console.log("refreshCarouselItems - no fresh items, keeping existing items")}catch(k){console.error("Error refreshing carousel items:",k)}finally{s.value=!1}},D=()=>{A.value=!document.hidden};return je(o,(k,S)=>{!d.value&&S!==k&&(i.value=0),v()}),je(r,k=>{k.length>0&&o.value>=k.length&&(o.value=0,i.value=0)},{immediate:!0}),je(a,async(k,S)=>{if(console.log("Doctor specialization changed:",{oldSpecialization:S,newSpecialization:k}),m.value){console.log("Already refreshing, skipping...");return}if(S!==void 0&&k!==S&&r.value.length>0){console.log("Refreshing carousel items due to specialization change");try{m.value=!0,await T()}finally{m.value=!1}}},{immediate:!1}),dn(async()=>{try{console.log("onMounted - starting carousel setup"),uR(),s.value=!0;const k=await lR();if(console.log("onMounted - received carousel data:",k),k&&k.length>0){const E=cR(k);console.log("onMounted - validItems:",E),E.length>0?r.value=E:(console.log("onMounted - no valid items after filtering, using defaults"),r.value=lf)}else console.log("onMounted - no data, using defaults"),r.value=lf;p()||(o.value=0,i.value=0),o.value>=r.value.length&&(o.value=0,i.value=0)}catch(k){console.error("Error loading carousel items:",k),r.value.length===0&&(r.value=lf)}finally{s.value=!1,await _n(),f.value=!0,g(),document.addEventListener("visibilitychange",D)}}),Ii(()=>{f.value=!1,y(),v(),document.removeEventListener("visibilitychange",D)}),og(()=>{f.value=!0}),J2(()=>{f.value=!1,v()}),(k,S)=>{const E=I("v-skeleton-loader"),C=I("v-icon"),U=I("v-btn"),F=I("v-progress-linear"),L=I("v-carousel-item"),H=I("v-carousel"),ue=I("v-alert"),ie=I("v-card");return R(),ve(ie,{flat:"",color:"surfaceContainer",class:"pa-1",style:{height:"100%"}},{default:u(()=>[s.value?(R(),Ae("div",bxe,[l(E,{type:"card",width:"80%",height:"80%",class:"mx-auto"})])):r.value.length>0?(R(),ve(H,{key:1,modelValue:o.value,"onUpdate:modelValue":[S[0]||(S[0]=Q=>o.value=Q),b],"show-arrows":"hover",cycle:!1,"hide-delimiters":"",style:{height:"100%"}},{default:u(()=>[(R(!0),Ae(Ke,null,Gt(r.value,(Q,X)=>(R(),ve(L,{key:X,src:Q.src,alt:Q.alt,contain:""},{default:u(()=>[h("div",xxe,[Q.url?(R(),Ae("div",Cxe,[l(U,{variant:"elevated",color:"primary",size:"large",onClick:le=>x(Q.url),class:"btn-hover-enhanced"},{default:u(()=>[S[2]||(S[2]=O(" Know More ",-1)),l(C,{right:"",class:"ml-2"},{default:u(()=>[...S[1]||(S[1]=[O("mdi-open-in-new",-1)])]),_:1})]),_:1},8,["onClick"])])):ye("",!0),h("div",Sxe,[l(F,{"model-value":i.value/TC*100,color:"white",height:"3",class:"progress-bar"},null,8,["model-value"]),h("div",Exe,K(Math.ceil((TC-i.value)/1e3))+"s ",1)])])]),_:2},1032,["src","alt"]))),128))]),_:1},8,["modelValue"])):(R(),Ae("div",Bxe,[l(ue,{type:"info",variant:"tonal"},{default:u(()=>[...S[3]||(S[3]=[O(" No carousel items available ",-1)])]),_:1})]))]),_:1})}}},Txe=qt(kxe,[["__scopeId","data-v-8073aa0a"]]),Ixe={class:"booking-content"},Fxe={key:0,class:"booking-patient-name"},Pxe={class:"booking-actions"},Dxe={__name:"resource-booking-row",props:{booking:{type:Object,required:!0},startColumn:{type:Number,required:!0},spanColumns:{type:Number,required:!0},hasConflict:{type:Boolean,default:!1}},emits:["click","edit","delete"],setup(e,{emit:t}){const n=e,a=t,r=ne(()=>{const f=n.booking.reason;return{procedure:"Procedure",maintenance:"Maintenance",cleaning:"Cleaning"}[f]||"Procedure"}),s=ne(()=>`reason-${n.booking.reason||"procedure"}`),o=ne(()=>{if(!n.booking.patient?.name)return"";const f=n.booking.patient.name;return f.length>10?f.substring(0,10)+"...":f});ne(()=>{const f=rU(n.booking.startDateTime),m=rU(n.booking.endDateTime),v=_o(f,"h:mm a"),p=_o(m,"h:mm a");return`${v} - ${p}`});const i=ne(()=>({gridColumnStart:n.startColumn+2,gridColumnEnd:n.startColumn+n.spanColumns+2})),c=()=>{a("click",n.booking)},A=()=>{a("edit",n.booking)},d=()=>{a("delete",n.booking)};return(f,m)=>{const v=I("v-icon"),p=I("v-btn");return R(),Ae("div",{class:ct(["booking-row",{"has-conflict":e.hasConflict}]),style:Ut(i.value),onClick:c},[h("div",Ixe,[e.booking.reason==="procedure"&&e.booking.patient?(R(),Ae("div",Fxe,K(o.value),1)):(R(),Ae("div",{key:1,class:ct(["booking-reason",s.value])},K(r.value),3)),h("div",Pxe,[l(p,{icon:"",size:"x-small",variant:"text",onClick:vn(A,["stop"]),class:"booking-action-btn"},{default:u(()=>[l(v,{size:"small"},{default:u(()=>[...m[0]||(m[0]=[O("mdi-pencil",-1)])]),_:1})]),_:1}),l(p,{icon:"",size:"x-small",variant:"text",onClick:vn(d,["stop"]),class:"booking-action-btn"},{default:u(()=>[l(v,{size:"small"},{default:u(()=>[...m[1]||(m[1]=[O("mdi-delete",-1)])]),_:1})]),_:1})])])],6)}}},Uxe=qt(Dxe,[["__scopeId","data-v-b5fd55e6"]]),Rxe={class:"booking-grid-container"},Nxe={class:"grid-header sticky-header"},Vxe={key:0,class:"hour-label"},Lxe={key:1,class:"quarter-marker"},Mxe={class:"entity-header-row sticky-row"},Oxe={class:"entity-header-cell sticky-cell"},Hxe={class:"entity-content"},$xe={class:"entity-name-row"},Qxe={class:"entity-name"},Gxe={class:"entity-actions"},zxe={key:1,class:"empty-entity-row"},Kxe={__name:"resource-booking-grid",props:{entities:{type:Array,default:()=>[]},bookings:{type:Array,default:()=>[]},conflicts:{type:Array,default:()=>[]}},emits:["booking-click","add-booking","edit-entity","delete-entity","edit-booking","delete-booking"],setup(e,{emit:t}){const n=e,a=t,r=ne(()=>{const y=[];for(let x=8;x<=23;x++){const T=x===23?0:45;for(let D=0;D<=T;D+=15){const k=NM(RM(new Date,x),D),S=D===0?_o(k,"h a"):"";y.push({hour:x,minute:D,label:_o(k,"h:mm a"),hourLabel:S,timestamp:k.getTime()})}}return y}),s=ne(()=>[...n.entities].sort((y,w)=>y.name.localeCompare(w.name))),o=y=>n.bookings.filter(w=>(w.entityId||w.entity?.id)===y).sort((w,b)=>w.startDateTime-b.startDateTime),i=y=>{const w=y.startDateTime,b=new Date(w*1e3),x=b.getHours(),T=b.getMinutes();if(x<8)return 0;if(x>23||x===23&&T>0)return 59;const D=x-8,k=Math.floor(T/15)+1,S=D*4+k;return Math.max(0,Math.min(59,S))},c=y=>{const w=i(y),b=y.endDateTime,x=new Date(b*1e3),T=x.getHours(),D=x.getMinutes();if(T<8)return 1;if(T>23||T===23&&D>0)return 60-w;const k=T-8,S=Math.floor(D/15)+1,C=k*4+S-w;return Math.max(1,C)},A=y=>n.conflicts.some(w=>w.booking1?.id===y.id||w.booking2?.id===y.id),d=y=>{a("booking-click",y)},f=y=>{a("edit-booking",y)},m=y=>{a("delete-booking",y)},v=y=>{a("add-booking",y)},p=y=>{a("edit-entity",y)},g=y=>{a("delete-entity",y)};return(y,w)=>{const b=I("v-icon"),x=I("v-btn");return R(),Ae("div",Rxe,[h("div",Nxe,[w[0]||(w[0]=h("div",{class:"entity-header-cell sticky-cell"},null,-1)),(R(!0),Ae(Ke,null,Gt(r.value,(T,D)=>(R(),Ae("div",{key:D,class:ct(["time-header-cell",{"hour-marker":T.minute===0&&T.hour!==23}])},[T.minute===0&&T.hour!==23?(R(),Ae("span",Vxe,K(T.hourLabel),1)):ye("",!0),T.minute!==0&&T.minute%15===0?(R(),Ae("div",Lxe)):ye("",!0)],2))),128))]),(R(!0),Ae(Ke,null,Gt(s.value,T=>(R(),Ae("div",{key:T.id,class:"entity-section"},[h("div",Mxe,[h("div",Oxe,[h("div",Hxe,[h("div",$xe,[h("div",Qxe,K(T.name),1),h("div",Gxe,[l(x,{icon:"",size:"x-small",variant:"text",onClick:vn(D=>p(T),["stop"]),class:"ml-1"},{default:u(()=>[l(b,{size:"small"},{default:u(()=>[...w[1]||(w[1]=[O("mdi-pencil",-1)])]),_:1})]),_:1},8,["onClick"]),l(x,{icon:"",size:"x-small",variant:"text",onClick:vn(D=>v(T),["stop"]),class:"ml-1",color:"primary"},{default:u(()=>[l(b,{size:"small"},{default:u(()=>[...w[2]||(w[2]=[O("mdi-plus",-1)])]),_:1})]),_:1},8,["onClick"]),l(x,{icon:"",size:"x-small",variant:"text",onClick:vn(D=>g(T),["stop"]),class:"ml-1"},{default:u(()=>[l(b,{size:"small"},{default:u(()=>[...w[3]||(w[3]=[O("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])])])]),(R(!0),Ae(Ke,null,Gt(r.value,(D,k)=>(R(),Ae("div",{key:k,class:"time-cell"}))),128))]),o(T.id).length>0?(R(!0),Ae(Ke,{key:0},Gt(o(T.id),D=>(R(),Ae("div",{key:D.id,class:"booking-row-wrapper"},[w[4]||(w[4]=h("div",{class:"entity-header-cell sticky-cell"},null,-1)),l(Uxe,{booking:D,"start-column":i(D),"span-columns":c(D),"has-conflict":A(D),onClick:d,onEdit:f,onDelete:m},null,8,["booking","start-column","span-columns","has-conflict"])]))),128)):(R(),Ae("div",zxe,[...w[5]||(w[5]=[h("div",{class:"entity-header-cell sticky-cell"},null,-1),h("div",{class:"empty-booking-cell"},null,-1)])]))]))),128))])}}},Wxe=qt(Kxe,[["__scopeId","data-v-a822fa5b"]]),jxe={__name:"resource-entity-create",emits:["close","saved"],setup(e,{emit:t}){const n=t,a=ra(),{showSuccess:r,showError:s}=ca(),o=V(!0),i=V(!1),c=V(!1),A=V(null),d=[{label:"Room",value:"room"},{label:"Equipment",value:"equipment"}],f=V({name:"",type:"room"}),m=()=>{o.value=!1,n("close")},v=async()=>{if(!A.value)return;const{valid:p}=await A.value.validate();if(p){c.value=!0;try{const g=a.state.clinicId||a.state.clinicModule?.clinicId||1,y={...f.value,clinicId:g},w=await a.dispatch("resourceBookingModule/createEntity",y);if(w.error)throw w.error;r("Entity created successfully"),n("saved"),m()}catch(g){console.error("Error creating entity:",g),s(g.response?.data?.error||g.message||"Failed to create entity")}finally{c.value=!1}}};return(p,g)=>{const y=I("v-icon"),w=I("v-btn"),b=I("v-card-title"),x=I("v-divider"),T=I("v-text-field"),D=I("v-select"),k=I("v-form"),S=I("v-card-text"),E=I("v-spacer"),C=I("v-card-actions"),U=I("v-card"),F=I("v-dialog");return R(),ve(F,{modelValue:o.value,"onUpdate:modelValue":g[3]||(g[3]=L=>o.value=L),persistent:"","max-width":"600px"},{default:u(()=>[l(U,{rounded:"lg"},{default:u(()=>[l(b,{class:"d-flex align-center justify-space-between"},{default:u(()=>[g[5]||(g[5]=h("span",null,"Add Entity",-1)),l(w,{onClick:m,variant:"text",size:"small"},{default:u(()=>[l(y,null,{default:u(()=>[...g[4]||(g[4]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(x),l(S,{class:"py-2"},{default:u(()=>[l(k,{ref_key:"form",ref:A,modelValue:i.value,"onUpdate:modelValue":g[2]||(g[2]=L=>i.value=L)},{default:u(()=>[l(T,{modelValue:f.value.name,"onUpdate:modelValue":g[0]||(g[0]=L=>f.value.name=L),label:"Name *",variant:"outlined",density:"compact",rules:[L=>!!L||"Name is required"],"prepend-inner-icon":"mdi-rename-box",class:"mb-1"},null,8,["modelValue","rules"]),l(D,{modelValue:f.value.type,"onUpdate:modelValue":g[1]||(g[1]=L=>f.value.type=L),items:d,"item-title":"label","item-value":"value",label:"Type *",variant:"outlined",density:"compact",rules:[L=>!!L||"Type is required"],"prepend-inner-icon":"mdi-tag",class:"mb-1"},null,8,["modelValue","rules"])]),_:1},8,["modelValue"])]),_:1}),l(x),l(C,{class:"pa-3"},{default:u(()=>[l(E),l(w,{onClick:m},{default:u(()=>[...g[6]||(g[6]=[O("Cancel",-1)])]),_:1}),l(w,{color:"primary",onClick:v,disabled:!i.value||c.value,loading:c.value},{default:u(()=>[...g[7]||(g[7]=[O(" Create ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},qxe={__name:"resource-entity-edit",props:{entity:{type:Object,required:!0}},emits:["close","saved"],setup(e,{emit:t}){const n=e,a=t,r=ra(),{showSuccess:s,showError:o}=ca(),i=V(!0),c=V(!1),A=V(!1),d=V(null),f=[{label:"Room",value:"room"},{label:"Equipment",value:"equipment"}],m=V({name:"",type:"room"});je(()=>n.entity,g=>{g&&(m.value={name:g.name||"",type:g.type||"room"})},{immediate:!0});const v=()=>{i.value=!1,a("close")},p=async()=>{if(!d.value)return;const{valid:g}=await d.value.validate();if(g){A.value=!0;try{const y=r.state.clinicId||r.state.clinicModule?.clinicId||1,w={...m.value,clinicId:y},b=await r.dispatch("resourceBookingModule/updateEntity",{id:n.entity.id,entityData:w});if(b.error)throw b.error;s("Entity updated successfully"),a("saved"),v()}catch(y){console.error("Error updating entity:",y),o(y.response?.data?.error||y.message||"Failed to update entity")}finally{A.value=!1}}};return(g,y)=>{const w=I("v-icon"),b=I("v-btn"),x=I("v-card-title"),T=I("v-divider"),D=I("v-text-field"),k=I("v-select"),S=I("v-form"),E=I("v-card-text"),C=I("v-spacer"),U=I("v-card-actions"),F=I("v-card"),L=I("v-dialog");return R(),ve(L,{modelValue:i.value,"onUpdate:modelValue":y[3]||(y[3]=H=>i.value=H),persistent:"","max-width":"600px"},{default:u(()=>[l(F,{rounded:"lg"},{default:u(()=>[l(x,{class:"d-flex align-center justify-space-between"},{default:u(()=>[y[5]||(y[5]=h("span",null,"Edit Entity",-1)),l(b,{onClick:v,variant:"text",size:"small"},{default:u(()=>[l(w,null,{default:u(()=>[...y[4]||(y[4]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(T),l(E,{class:"py-2"},{default:u(()=>[l(S,{ref_key:"form",ref:d,modelValue:c.value,"onUpdate:modelValue":y[2]||(y[2]=H=>c.value=H)},{default:u(()=>[l(D,{modelValue:m.value.name,"onUpdate:modelValue":y[0]||(y[0]=H=>m.value.name=H),label:"Name *",variant:"outlined",density:"compact",rules:[H=>!!H||"Name is required"],"prepend-inner-icon":"mdi-rename-box",class:"mb-1"},null,8,["modelValue","rules"]),l(k,{modelValue:m.value.type,"onUpdate:modelValue":y[1]||(y[1]=H=>m.value.type=H),items:f,"item-title":"label","item-value":"value",label:"Type *",variant:"outlined",density:"compact",rules:[H=>!!H||"Type is required"],"prepend-inner-icon":"mdi-tag",class:"mb-1"},null,8,["modelValue","rules"])]),_:1},8,["modelValue"])]),_:1}),l(T),l(U,{class:"pa-3"},{default:u(()=>[l(C),l(b,{onClick:v},{default:u(()=>[...y[6]||(y[6]=[O("Cancel",-1)])]),_:1}),l(b,{color:"primary",onClick:p,disabled:!c.value||A.value,loading:A.value},{default:u(()=>[...y[7]||(y[7]=[O(" Update ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Yxe={class:"w-100"},Xxe={class:"text-subtitle-2 mb-1"},Jxe={class:"text-caption",style:{opacity:"0.7"}},Zxe={__name:"resource-booking-form",props:{booking:{type:Object,default:null},entities:{type:Array,default:()=>[]},selectedDate:{type:String,default:()=>Rn()},preselectedEntity:{type:Object,default:null}},emits:["close","saved"],setup(e,{emit:t}){const n=e,a=t,r=ra(),{showSuccess:s,showError:o}=ca(),i=V(!0),c=V(!1),A=V(!1),d=V(null),f=V(null);let m=null,v=null;const p=V(!1),g=V([]),y=V(""),w=V(null),b=V(!1),x=[{label:"Procedure",value:"procedure"},{label:"Maintenance",value:"maintenance"},{label:"Cleaning",value:"cleaning"}],T=V({entityId:n.preselectedEntity?.id||null,startDate:n.selectedDate,startTime:new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Kolkata"}),endDate:n.selectedDate,endTime:"",reason:"procedure",patientId:null}),D=V(!1),k=V([]),S=ne(()=>!!n.booking),E=()=>{if(T.value.startTime){const[q,P]=T.value.startTime.split(":").map(Number),G=P+30,J=q+Math.floor(G/60),M=G%60;T.value.endTime=`${J.toString().padStart(2,"0")}:${M.toString().padStart(2,"0")}`}};je(()=>T.value.startTime,()=>{!S.value&&T.value.startTime&&!T.value.endTime&&E()},{immediate:!0}),je(()=>n.booking,q=>{if(q){const P=new Date(q.startDateTime*1e3),G=new Date(q.endDateTime*1e3);T.value={entityId:q.entityId||q.entity?.id,startDate:P.toISOString().split("T")[0],startTime:`${P.getHours().toString().padStart(2,"0")}:${P.getMinutes().toString().padStart(2,"0")}`,endDate:G.toISOString().split("T")[0],endTime:`${G.getHours().toString().padStart(2,"0")}:${G.getMinutes().toString().padStart(2,"0")}`,reason:q.reason||"procedure",patientId:q.patientId||null},q.patient&&(w.value=q.patient)}else T.value={entityId:n.preselectedEntity?.id||null,startDate:n.selectedDate,startTime:new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Kolkata"}),endDate:n.selectedDate,endTime:"",reason:"procedure",patientId:null},w.value=null,E()},{immediate:!0}),je(()=>n.preselectedEntity,q=>{!S.value&&q&&!T.value.entityId&&(T.value.entityId=q.id)},{immediate:!0});const C=q=>!q||!T.value.startDate?!0:q<T.value.startDate?"End date must be on or after start date":!0,U=q=>!q||!T.value.startTime?!0:T.value.startDate===T.value.endDate&&q<=T.value.startTime?"End time must be after start time":!0,F=q=>q?`${q.name||""} (${q.contactNumber||q.contact_number||""})`:"",L=ne(()=>!y.value||y.value.length<1?"Start typing to search for patients":b.value?`No patients found matching "${y.value}"`:""),H=async q=>{if(!q||q.length<1){g.value=[],b.value=!1;return}v&&v.abort(),v=new AbortController,p.value=!0,b.value=!1;try{const P=await tT(q,{signal:v.signal});v.signal.aborted||(g.value=P.data,(!g.value||g.value.length===0)&&(b.value=!0))}catch(P){P.name!=="AbortError"&&(console.error("Error fetching patients:",P),b.value=!0)}finally{v?.signal.aborted||(p.value=!1)}};je(y,q=>{m&&clearTimeout(m),b.value=!1,m=setTimeout(()=>{H(q)},300)}),je(w,q=>{q?T.value.patientId=q.id:T.value.patientId=null});const ue=()=>{!S.value&&T.value.startDate&&!T.value.endDate&&(T.value.endDate=T.value.startDate)},ie=()=>{!S.value&&T.value.startTime&&T.value.startDate===T.value.endDate&&E()},Q=()=>{T.value.endDate<T.value.startDate&&(T.value.startDate=T.value.endDate)},X=()=>{},le=async()=>{if(!(!T.value.entityId||!T.value.startDate||!T.value.startTime||!T.value.endDate||!T.value.endTime))try{const q=new Date(`${T.value.startDate}T${T.value.startTime}:00`),P=new Date(`${T.value.endDate}T${T.value.endTime}:00`),G=Math.floor(q.getTime()/1e3),J=Math.floor(P.getTime()/1e3),M=S.value?n.booking.id:null,te=await r.dispatch("resourceBookingModule/checkConflicts",{entityId:T.value.entityId,startDateTime:G.toString(),endDateTime:J.toString(),excludeId:M,signal:null});te.data&&(D.value=te.data.hasConflicts,k.value=te.data.conflicts||[])}catch(q){console.error("Error checking conflicts:",q)}};je([()=>T.value.entityId,()=>T.value.startDate,()=>T.value.startTime,()=>T.value.endDate,()=>T.value.endTime],()=>{c.value&&le()},{deep:!0});const Z=()=>{i.value=!1,a("close")},re=async()=>{if(!d.value)return;const{valid:q}=await d.value.validate();if(q){A.value=!0;try{const P=`${T.value.startDate}T${T.value.startTime}:00`,G=`${T.value.endDate}T${T.value.endTime}:00`,J=new Date(P),M=new Date(G),te=Math.floor(J.getTime()/1e3),Y=Math.floor(M.getTime()/1e3);if(isNaN(te)||isNaN(Y)||te<=0||Y<=0)throw new Error("Invalid date or time. Please check your input.");const W={entityId:T.value.entityId,patientId:T.value.patientId||null,reason:T.value.reason,startDateTime:te.toString(),endDateTime:Y.toString()};let ee;if(S.value?ee=await r.dispatch("resourceBookingModule/updateBooking",{id:n.booking.id,bookingData:W}):ee=await r.dispatch("resourceBookingModule/createBooking",W),ee.error)throw ee.error;ee.hasConflicts?s(S.value?"Booking updated (with conflicts)":"Booking created (with conflicts)"):s(S.value?"Booking updated successfully":"Booking created successfully"),a("saved"),Z()}catch(P){console.error("Error saving booking:",P),o(P.response?.data?.error||P.message||`Failed to ${S.value?"update":"create"} booking`)}finally{A.value=!1}}};return va(()=>{m&&(clearTimeout(m),m=null),v&&(v.abort(),v=null)}),(q,P)=>{const G=I("v-icon"),J=I("v-btn"),M=I("v-card-title"),te=I("v-divider"),Y=I("v-select"),W=I("v-text-field"),ee=I("v-col"),ae=I("v-row"),oe=I("v-list-item"),j=I("v-autocomplete"),ce=I("v-alert"),de=I("v-form"),_e=I("v-card-text"),Re=I("v-spacer"),be=I("v-card-actions"),Ee=I("v-card"),Ce=I("v-dialog");return R(),ve(Ce,{modelValue:i.value,"onUpdate:modelValue":P[11]||(P[11]=Be=>i.value=Be),persistent:"","max-width":"700px"},{default:u(()=>[l(Ee,{rounded:"lg"},{default:u(()=>[l(M,{class:"d-flex align-center justify-space-between"},{default:u(()=>[h("span",null,K(S.value?"Edit Booking":"Create Booking"),1),l(J,{onClick:Z,variant:"text",size:"small"},{default:u(()=>[l(G,null,{default:u(()=>[...P[12]||(P[12]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(te),l(_e,{class:"py-2"},{default:u(()=>[l(de,{ref_key:"form",ref:d,modelValue:c.value,"onUpdate:modelValue":P[10]||(P[10]=Be=>c.value=Be)},{default:u(()=>[S.value?ye("",!0):(R(),ve(Y,{key:0,modelValue:T.value.entityId,"onUpdate:modelValue":P[0]||(P[0]=Be=>T.value.entityId=Be),items:e.entities,"item-title":"name","item-value":"id",label:"Entity *",variant:"outlined",density:"compact",rules:[Be=>!!Be||"Entity is required"],"prepend-inner-icon":"mdi-office-building",class:"mb-2"},null,8,["modelValue","items","rules"])),l(ae,{dense:""},{default:u(()=>[l(ee,{cols:"12",md:"6"},{default:u(()=>[l(W,{modelValue:T.value.startDate,"onUpdate:modelValue":[P[1]||(P[1]=Be=>T.value.startDate=Be),ue],label:"Start Date *",type:"date",variant:"outlined",density:"compact",rules:[Be=>!!Be||"Start date is required"],"prepend-inner-icon":"mdi-calendar",class:"date-input",onClick:P[2]||(P[2]=Be=>Be.target.showPicker&&Be.target.showPicker())},null,8,["modelValue","rules"])]),_:1}),l(ee,{cols:"12",md:"6"},{default:u(()=>[l(W,{modelValue:T.value.startTime,"onUpdate:modelValue":[P[3]||(P[3]=Be=>T.value.startTime=Be),ie],label:"Start Time *",type:"time",variant:"outlined",density:"compact",rules:[Be=>!!Be||"Start time is required"],"prepend-inner-icon":"mdi-clock-outline"},null,8,["modelValue","rules"])]),_:1})]),_:1}),l(ae,{dense:""},{default:u(()=>[l(ee,{cols:"12",md:"6"},{default:u(()=>[l(W,{modelValue:T.value.endDate,"onUpdate:modelValue":[P[4]||(P[4]=Be=>T.value.endDate=Be),Q],label:"End Date *",type:"date",variant:"outlined",density:"compact",rules:[Be=>!!Be||"End date is required",C],"prepend-inner-icon":"mdi-calendar",class:"date-input",onClick:P[5]||(P[5]=Be=>Be.target.showPicker&&Be.target.showPicker())},null,8,["modelValue","rules"])]),_:1}),l(ee,{cols:"12",md:"6"},{default:u(()=>[l(W,{modelValue:T.value.endTime,"onUpdate:modelValue":[P[6]||(P[6]=Be=>T.value.endTime=Be),X],label:"End Time *",type:"time",variant:"outlined",density:"compact",rules:[Be=>!!Be||"End time is required",U],"prepend-inner-icon":"mdi-clock-outline"},null,8,["modelValue","rules"])]),_:1})]),_:1}),l(Y,{modelValue:T.value.reason,"onUpdate:modelValue":P[7]||(P[7]=Be=>T.value.reason=Be),items:x,"item-title":"label","item-value":"value",label:"Reason *",variant:"outlined",density:"compact",rules:[Be=>!!Be||"Reason is required"],"prepend-inner-icon":"mdi-tag",class:"mb-2"},null,8,["modelValue","rules"]),l(j,{ref_key:"searchRef",ref:f,modelValue:w.value,"onUpdate:modelValue":P[8]||(P[8]=Be=>w.value=Be),search:y.value,"onUpdate:search":P[9]||(P[9]=Be=>y.value=Be),items:g.value,loading:p.value,"item-title":F,"item-value":"id","return-object":"",label:"Patient (Optional)",variant:"outlined",density:"compact",clearable:"","prepend-inner-icon":"mdi-account-search","no-data-text":L.value,"menu-props":{maxHeight:"400px",closeOnContentClick:!1},class:"mb-2"},{item:u(({props:Be,item:Te})=>[l(oe,Pe(Be,{class:"py-2"}),{default:u(()=>[h("div",Yxe,[h("div",Xxe," ID: "+K(Te.raw.id)+"  "+K(Te.raw.gender)+", "+K(Te.raw.age)+" yrs ",1),h("div",Jxe,K(Te.raw.contactNumber||Te.raw.contact_number||""),1)])]),_:2},1040)]),_:1},8,["modelValue","search","items","loading","no-data-text"]),D.value&&k.value.length>0?(R(),ve(ce,{key:1,type:"warning",variant:"tonal",density:"compact",class:"mb-2"},{default:u(()=>[O(" This booking conflicts with "+K(k.value.length)+" existing booking(s). Booking will still be created. ",1)]),_:1})):ye("",!0)]),_:1},8,["modelValue"])]),_:1}),l(te),l(be,{class:"pa-3"},{default:u(()=>[l(Re),l(J,{onClick:Z},{default:u(()=>[...P[13]||(P[13]=[O("Cancel",-1)])]),_:1}),l(J,{color:"primary",onClick:re,disabled:!c.value||A.value,loading:A.value},{default:u(()=>[O(K(S.value?"Update":"Create"),1)]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},eCe=qt(Zxe,[["__scopeId","data-v-158ca215"]]),tCe={key:0,class:"d-flex justify-center align-center",style:{height:"100%"}},nCe={__name:"resource-booking",setup(e){const t=ra(),{showSuccess:n,showError:a}=ca(),r=V(!1),s=V(!1),o=V(!1),i=V(!1),c=V(null),A=V(null),d=V(null);let f=null,m=null;const v=ne(()=>t.getters["resourceBookingModule/filteredEntities"]),p=ne(()=>t.getters["resourceBookingModule/bookingsByDate"]),g=ne(()=>t.getters["resourceBookingModule/conflicts"]),y=ne({get:()=>t.state.resourceBookingModule.selectedDate||Rn(),set:J=>t.commit("resourceBookingModule/setSelectedDate",J)});ne(()=>t.state.resourceBookingModule.selectedEntity);const w=ne({get:()=>t.state.resourceBookingModule.entitySearchQuery||"",set:J=>t.commit("resourceBookingModule/setEntitySearchQuery",J)}),b=ne(()=>t.state.resourceBookingModule.isLoading),x=ne(()=>t.state.resourceBookingModule.isRefreshing),T=ne(()=>v.value),D=J=>{if(!J)return"Select Date";const M=Rn(),te=new Date(Date.now()+330*60*1e3-1440*60*1e3).toISOString().slice(0,10),Y=new Date(Date.now()+330*60*1e3+1440*60*1e3).toISOString().slice(0,10);if(J===M)return"Today";if(J===te)return"Yesterday";if(J===Y)return"Tomorrow";const W=new Date(J+"T12:00:00");return W.toLocaleDateString("en-IN",{day:"numeric",month:"short",year:W.getFullYear()!==new Date().getFullYear()?"numeric":void 0})},k=async J=>{let M;typeof J=="string"?M=J.includes("T")?J.split("T")[0]:J:J instanceof Date?M=_o(J,"yyyy-MM-dd"):M=Rn(),y.value=M,r.value=!1,await P()},S=()=>{f&&clearTimeout(f),f=setTimeout(()=>{},300)},E=()=>{s.value=!0},C=()=>{s.value=!1},U=J=>{c.value=J,o.value=!0},F=()=>{o.value=!1,c.value=null},L=async()=>{await q()},H=J=>{U(J)},ue=async J=>{if(confirm(`Are you sure you want to delete "${J.name}"? This will also delete all bookings for this entity.`))try{const M=await t.dispatch("resourceBookingModule/deleteEntity",J.id);if(M.error)throw M.error;n("Entity deleted successfully"),await q(),await P()}catch(M){a(M.response?.data?.error||M.message||"Failed to delete entity")}},ie=(J=null)=>{d.value=J,A.value=null,i.value=!0},Q=J=>{A.value=J,i.value=!0},X=async J=>{if(confirm("Are you sure you want to delete this booking?"))try{const M=await t.dispatch("resourceBookingModule/deleteBooking",J.id);if(M.error)throw M.error;n("Booking deleted successfully"),await P()}catch(M){a(M.response?.data?.error||M.message||"Failed to delete booking")}},le=()=>{i.value=!1,A.value=null,d.value=null},Z=async()=>{await P()},re=async()=>{await t.dispatch("resourceBookingModule/refreshBookings")},q=async()=>{m&&m.abort(),m=new AbortController,await t.dispatch("resourceBookingModule/fetchEntities",{signal:m.signal})},P=async()=>{m&&m.abort(),y.value||(y.value=Rn()),m=new AbortController;try{const J=await t.dispatch("resourceBookingModule/fetchBookings",{date:y.value,signal:m.signal});J.error&&console.error("Error fetching bookings:",J.error)}catch(J){console.error("Error in fetchBookings:",J)}},G=async()=>{try{const J=t.state.resourceBookingModule.selectedDate;J?y.value=J:y.value=Rn(),t.commit("resourceBookingModule/setSelectedDate",y.value),await q(),y.value&&await P()}catch(J){console.error("Error initializing resource booking component:",J),a("Failed to initialize resource bookings. Please refresh the page.")}};return dn(async()=>{await G()}),og(async()=>{(v.value.length===0||!y.value)&&await G()}),va(()=>{f&&(clearTimeout(f),f=null),m&&(m.abort(),m=null)}),(J,M)=>{const te=I("v-icon"),Y=I("v-btn"),W=I("v-date-picker"),ee=I("v-menu"),ae=I("v-col"),oe=I("v-text-field"),j=I("v-tooltip"),ce=I("v-row"),de=I("v-card"),_e=I("v-progress-circular"),Re=I("v-empty-state"),be=I("v-alert"),Ee=I("v-dialog");return R(),ve(de,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex flex-column"},{default:u(()=>[l(de,{rounded:"0",class:"pa-2",color:"surfaceContainerHigh",style:{"min-height":"56px"}},{default:u(()=>[l(ce,{"no-gutters":"",align:"center",class:"header-row"},{default:u(()=>[l(ae,{cols:"auto",class:"d-flex align-center pr-2"},{default:u(()=>[l(ee,{modelValue:r.value,"onUpdate:modelValue":M[1]||(M[1]=Ce=>r.value=Ce),"close-on-content-click":!1,transition:"scale-transition","offset-y":""},{activator:u(({props:Ce})=>[l(Y,Pe(Ce,{variant:"outlined",size:"small",rounded:"x-small",class:"btn-hover-enhanced",style:{"min-width":"auto"}}),{default:u(()=>[O(K(D(y.value))+" ",1),l(te,{size:"small",class:"ml-1"},{default:u(()=>[...M[7]||(M[7]=[O("mdi-calendar",-1)])]),_:1})]),_:1},16)]),default:u(()=>[l(W,{modelValue:y.value,"onUpdate:modelValue":[M[0]||(M[0]=Ce=>y.value=Ce),k],color:"primary",locale:"en-IN"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),l(ae,{class:"d-flex justify-center"},{default:u(()=>[l(oe,{modelValue:w.value,"onUpdate:modelValue":[M[2]||(M[2]=Ce=>w.value=Ce),S],label:"Filter entities",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-magnify",clearable:"","hide-details":"",style:{"max-width":"300px"}},null,8,["modelValue"])]),_:1}),l(ae,{cols:"auto",class:"d-flex justify-end align-center gap-1"},{default:u(()=>[l(j,{text:"Add Entity"},{activator:u(({props:Ce})=>[l(Y,Pe({rounded:"x-small",onClick:E,size:"small",variant:"outlined"},Ce,{class:"btn-hover-enhanced",style:{"min-width":"auto"}}),{default:u(()=>[...M[8]||(M[8]=[O(" Add Entity ",-1)])]),_:1},16)]),_:1}),l(j,{text:"Refresh Bookings"},{activator:u(({props:Ce})=>[l(Y,Pe({rounded:"x-small",onClick:re,size:"small"},Ce,{class:"btn-hover-enhanced",loading:x.value,disabled:x.value,style:{"min-width":"auto"}}),{default:u(()=>[x.value?ye("",!0):(R(),ve(te,{key:0,size:"small"},{default:u(()=>[...M[9]||(M[9]=[h("img",{src:_g,alt:"Refresh",style:{filter:"invert(1)"}},null,-1)])]),_:1}))]),_:1},16,["loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1}),l(de,{flat:"",class:"ma-2",color:"surfaceContainer",style:{height:"calc(100% - 16px)"}},{default:u(()=>[b.value?(R(),Ae("div",tCe,[l(_e,{indeterminate:"",color:"primary"})])):T.value.length===0?(R(),ve(Re,{key:1},{title:u(()=>[...M[10]||(M[10]=[h("div",{class:"text-subtitle-2 mt-4"}," No entities available ",-1)])]),text:u(()=>[l(Y,{variant:"outlined",onClick:E},{default:u(()=>[...M[11]||(M[11]=[O("Add Entity",-1)])]),_:1})]),_:1})):(R(),Ae(Ke,{key:2},[Qe(t).state.resourceBookingModule.error?(R(),ve(be,{key:0,type:"error",variant:"tonal",density:"compact",class:"ma-2",dismissible:"","onClick:close":M[3]||(M[3]=Ce=>Qe(t).commit("resourceBookingModule/setError",null))},{default:u(()=>[O(K(Qe(t).state.resourceBookingModule.error?.response?.data?.error||Qe(t).state.resourceBookingModule.error?.message||"An error occurred"),1)]),_:1})):ye("",!0),l(Wxe,{entities:T.value,bookings:p.value,conflicts:g.value,onBookingClick:Q,onAddBooking:ie,onEditEntity:H,onDeleteEntity:ue,onEditBooking:Q,onDeleteBooking:X},null,8,["entities","bookings","conflicts"])],64))]),_:1}),l(Ee,{modelValue:s.value,"onUpdate:modelValue":M[4]||(M[4]=Ce=>s.value=Ce),persistent:"","max-width":"600px"},{default:u(()=>[s.value?(R(),ve(jxe,{key:0,onClose:C,onSaved:L})):ye("",!0)]),_:1},8,["modelValue"]),l(Ee,{modelValue:o.value,"onUpdate:modelValue":M[5]||(M[5]=Ce=>o.value=Ce),persistent:"","max-width":"600px"},{default:u(()=>[o.value&&c.value?(R(),ve(qxe,{key:0,entity:c.value,onClose:F,onSaved:L},null,8,["entity"])):ye("",!0)]),_:1},8,["modelValue"]),l(Ee,{modelValue:i.value,"onUpdate:modelValue":M[6]||(M[6]=Ce=>i.value=Ce),persistent:"","max-width":"700px"},{default:u(()=>[i.value?(R(),ve(eCe,{key:0,booking:A.value,entities:v.value,"selected-date":y.value,"preselected-entity":d.value,onClose:le,onSaved:Z},null,8,["booking","entities","selected-date","preselected-entity"])):ye("",!0)]),_:1},8,["modelValue"])]),_:1})}}},aCe=qt(nCe,[["__scopeId","data-v-97873da0"]]),rCe={class:"scrollable-content"},sCe={class:"scrollable-content"},oCe={class:"text-h6 mb-4"},iCe=["aria-label"],lCe={key:0,class:"d-flex align-center justify-center",style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",background:"rgba(255, 255, 255, 0.95)","z-index":"9999"}},uCe={__name:"home-page",setup(e){const t=ra(),n=Gf(),a=sl(),r=V(null);let s=null;try{window.require&&(s=window.require("electron").ipcRenderer)}catch(E){console.error("Failed to access ipcRenderer:",E)}const o=V(0),i=V(new Map),c=V({}),A=V(!1),d=V(""),f=V(!1),m=V(""),v=V(null),p=V(new Map),g=V(100),y=V([{title:"Queue"},{title:"Appointments",url:"https://calendar.google.com/",id:"calendar"},{title:"Procedure Bookings",id:"procedure-bookings"}]);y.value.slice(1).forEach(E=>{E.id&&(c.value[E.id]=!1)}),dn(async()=>{try{await w(),n.params.tab==="1"?o.value=1:o.value=0}catch(E){console.error("Error during initialization:",E),v.value="Failed to initialize component properly"}if(s)try{s.on("external-site-loading",(E,{siteId:C,isLoading:U})=>{Object.prototype.hasOwnProperty.call(c.value,C)&&(c.value[C]=U)}),s.on("external-site-loaded",(E,{siteId:C})=>{if(Object.prototype.hasOwnProperty.call(c.value,C)){c.value[C]=!1;const U=p.value.get(C);U&&(clearTimeout(U),p.value.delete(C))}}),s.on("external-site-error",(E,{siteId:C,error:U})=>{if(Object.prototype.hasOwnProperty.call(c.value,C)){c.value[C]=!1,f.value=!0,m.value=`Failed to load ${C}: ${U}`;const F=p.value.get(C);F&&(clearTimeout(F),p.value.delete(C))}})}catch(E){console.error("Error setting up IPC listeners:",E),v.value="Failed to initialize external site integration"}try{window.addEventListener("doctor-selection-changed",k),window.addEventListener("clinic-selection-changed",S)}catch(E){console.error("Error setting up event listeners:",E),v.value="Failed to initialize data refresh listeners"}}),je(o,async(E,C)=>{try{if(E===1&&await w(),E>=1&&E<y.value.length){const U=y.value[E];U.url&&U.id&&setTimeout(()=>{_n(()=>{T(U.id,U.url)})},500)}if(C>=1&&C<y.value.length){const U=y.value[C];U.url&&U.id&&D(U.id)}}catch(U){console.error("Error in tab watcher:",U),v.value="Failed to switch tabs properly"}}),je(()=>a.currentRoute.value.params.tab,E=>{if(E){let C=0;E==="1"&&(C=1),C!==o.value&&(console.log("Route tab parameter changed, switching to tab:",C),o.value=C)}}),va(()=>{try{y.value.slice(1).forEach(E=>{if(E.url&&E.id)try{D(E.id)}catch(C){console.error(`Error closing external site ${E.id}:`,C)}}),s&&(s.removeAllListeners("external-site-loading"),s.removeAllListeners("external-site-loaded"),s.removeAllListeners("external-site-error")),window.removeEventListener("doctor-selection-changed",k),window.removeEventListener("clinic-selection-changed",S),p.value.forEach(E=>clearTimeout(E)),p.value.clear(),i.value.clear()}catch(E){console.error("Error during component cleanup:",E)}});const w=async()=>{try{if(s){const E=await s.invoke("get-zoom-level");E.success?g.value=E.zoomFactor||100:console.error("Failed to get zoom level:",E.error)}else console.warn("ipcRenderer not available for zoom check")}catch(E){console.error("Error checking zoom level:",E)}},b=(E,C)=>{C?i.value.set(E,C):i.value.delete(E)},x=E=>i.value.get(E)||null,T=async(E,C)=>{try{if(E==="calendar"&&(await w(),g.value!==100))return;_n(()=>{const U=x(E);if(!(U instanceof HTMLElement)){console.error(`${E}Container is not a DOM element`),f.value=!0,m.value=`Failed to load ${E}. Please try again.`;return}if(!s){console.error("ipcRenderer is not available");try{window.open(C,"_blank"),A.value=!0,d.value=`${E} opened in external browser`}catch{f.value=!0,m.value=`Failed to open ${E}`}return}if(U){c.value[E]=!0;const F=setTimeout(()=>{c.value[E]=!1,f.value=!0,m.value=`${E} is taking too long to load`},15e3);p.value.set(E,F);const L=U.getBoundingClientRect(),H=12,ue=4;s.send("open-external-site",{siteId:E,url:C,bounds:{x:L.left+ue,y:L.top+ue,width:L.width-ue*2,height:L.height-ue*2}})}else console.error(`${E}Container is not defined`),f.value=!0,m.value=`Failed to initialize ${E} container`})}catch(U){console.error("Error opening external site:",U),c.value[E]=!1,f.value=!0,m.value="Failed to open external application"}},D=E=>{try{_n(()=>{c.value[E]=!1;const C=p.value.get(E);C&&(clearTimeout(C),p.value.delete(E)),s?s.send("close-external-site",{siteId:E}):console.error("ipcRenderer is not available")})}catch(C){console.error("Error closing external site:",C)}},k=async E=>{try{const{doctorId:C,doctorName:U}=E.detail;if(console.log("Doctor changed:",U),!C){console.warn("No doctorId provided in doctor change event");return}if(!r.value?.refreshAppointments){console.warn("AppointmentQueue component not ready for refresh");return}const F=t.state.clinicModule?.clinicId;if(!F){console.warn("No clinicId available for appointment refresh");return}await r.value.refreshAppointments(C,F)}catch(C){console.error("Error handling doctor change:",C),f.value=!0,m.value="Failed to refresh appointments after doctor change"}},S=async E=>{try{const{clinicId:C,clinicName:U}=E.detail;if(console.log("Clinic changed:",U),!C){console.warn("No clinicId provided in clinic change event");return}if(!r.value?.refreshAppointments){console.warn("AppointmentQueue component not ready for refresh");return}const F=t.state.doctorModule?.doctorId;if(!F){console.warn("No doctorId available for appointment refresh");return}await r.value.refreshAppointments(F,C)}catch(C){console.error("Error handling clinic change:",C),f.value=!0,m.value="Failed to refresh appointments after clinic change"}};return(E,C)=>{const U=I("v-alert"),F=I("v-tab"),L=I("v-tabs"),H=I("v-card"),ue=I("v-col"),ie=I("v-row"),Q=I("v-snackbar"),X=I("v-window-item"),le=I("v-icon"),Z=I("v-card-title"),re=I("v-card-text"),q=I("v-skeleton-loader"),P=I("v-window"),G=I("v-main");return R(),ve(G,null,{default:u(()=>[v.value?(R(),ve(U,{key:0,type:"error",dismissible:"","onClick:close":C[0]||(C[0]=J=>v.value=null),class:"ma-3"},{default:u(()=>[O(K(v.value),1)]),_:1})):ye("",!0),l(ie,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[l(ue,{cols:"12"},{default:u(()=>[l(H,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center"},{default:u(()=>[l(L,{modelValue:o.value,"onUpdate:modelValue":C[1]||(C[1]=J=>o.value=J),color:"primary","align-tabs":"start",class:"w-100"},{default:u(()=>[(R(!0),Ae(Ke,null,Gt(y.value,(J,M)=>(R(),ve(F,{key:M,value:M},{default:u(()=>[O(K(J.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(P,{modelValue:o.value,"onUpdate:modelValue":C[4]||(C[4]=J=>o.value=J),class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[l(X,{value:0,style:{height:"100%"}},{default:u(()=>[l(ie,{"no-gutters":"","aria-label":"main row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[l(ue,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[h("div",rCe,[l(wH,{ref_key:"appointmentQueueRef",ref:r},null,512)])]),_:1}),l(ue,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[h("div",sCe,[l(Txe)])]),_:1})]),_:1}),l(Q,{modelValue:A.value,"onUpdate:modelValue":C[2]||(C[2]=J=>A.value=J),class:"elevation-24",color:"success"},{default:u(()=>[O(K(d.value),1)]),_:1},8,["modelValue"]),l(Q,{modelValue:f.value,"onUpdate:modelValue":C[3]||(C[3]=J=>f.value=J),class:"elevation-24",color:"failure"},{default:u(()=>[O(K(m.value),1)]),_:1},8,["modelValue"])]),_:1}),(R(!0),Ae(Ke,null,Gt(y.value.slice(1),(J,M)=>(R(),ve(X,{key:J.id,value:M+1,style:{height:"100%"}},{default:u(()=>[l(ie,{"no-gutters":"","aria-label":"main-row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[l(ue,{cols:"12",order:"1",class:"stable-height-column"},{default:u(()=>[J.id==="calendar"&&g.value!==100?(R(),ve(H,{key:0,color:"surface",variant:"elevated",class:"pa-6 ma-2 d-flex flex-column align-center justify-center scrollable-content"},{default:u(()=>[l(le,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...C[5]||(C[5]=[O(" mdi-magnify-close ",-1)])]),_:1}),l(Z,{class:"text-h5 text-center mb-2"},{default:u(()=>[...C[6]||(C[6]=[O(" Calendar Unavailable ",-1)])]),_:1}),l(re,{class:"text-center"},{default:u(()=>[C[7]||(C[7]=h("p",{class:"text-h6 mb-3"},"Calendar requires 100% zoom level to display properly.",-1)),h("p",oCe,[h("strong",null,"Current zoom: "+K(g.value)+"%",1)]),C[8]||(C[8]=h("p",{class:"text-body-1 mb-4"}," The calendar positioning system requires the default zoom level to work correctly. Please use the zoom controls in the top navigation bar to reset to 100%. ",-1))]),_:1})]),_:1})):ye("",!0),J.id==="procedure-bookings"?(R(),ve(aCe,{key:1})):J.url?(R(),ve(H,{key:2,color:"surfaceContainer",flat:"",class:"pa-1 scrollable-content"},{default:u(()=>[h("div",{ref_for:!0,ref:te=>b(J.id,te),style:{width:"100%",height:"100%",position:"relative"},"aria-label":`${J.title} Container`},[c.value[J.id]?(R(),Ae("div",lCe,[l(q,{type:"card",width:"80%",height:"80%",class:"mx-auto"})])):ye("",!0)],8,iCe)]),_:2},1024)):ye("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})}}},cCe=qt(uCe,[["__scopeId","data-v-431c6b2c"]]),dCe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M14,2H6A2,2%200%200,0%204,4V20A2,2%200%200,0%206,22H18A2,2%200%200,0%2020,20V8L14,2M13.5,16V19H10.5V16H8L12,12L16,16H13.5M13,9V3.5L18.5,9H13Z'%20/%3e%3c/svg%3e",ACe={__name:"TabsExtension",props:{items:{type:Array,required:!0},modelValue:{type:Number,default:0},alignTabs:{type:String,default:"start"}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,a=t,r=V(n.modelValue);je(()=>n.modelValue,o=>{r.value=o});const s=o=>{a("update:modelValue",o)};return(o,i)=>{const c=I("v-tab"),A=I("v-tabs");return R(),ve(A,{modelValue:r.value,"onUpdate:modelValue":[i[0]||(i[0]=d=>r.value=d),s],"align-tabs":e.alignTabs||"start",density:"compact"},{default:u(()=>[(R(!0),Ae(Ke,null,Gt(e.items,(d,f)=>(R(),ve(c,{key:d.title||f,disabled:d.disabled},{default:u(()=>[O(K(d.title),1)]),_:2},1032,["disabled"]))),128))]),_:1},8,["modelValue","align-tabs"])}}},fCe={__name:"BreadcrumbsExtension",props:{items:{type:Array,required:!0}},setup(e){return(t,n)=>{const a=I("v-icon"),r=I("v-breadcrumbs-item"),s=I("v-breadcrumbs");return R(),ve(s,null,{default:u(()=>[(R(!0),Ae(Ke,null,Gt(e.items,(o,i)=>(R(),ve(r,{key:i,to:o.to,disabled:o.disabled},{default:u(()=>[o.icon?(R(),ve(a,{key:0,start:o.iconPosition!=="end",end:o.iconPosition==="end",small:"",class:ct(o.iconClass)},{default:u(()=>[O(K(o.icon),1)]),_:2},1032,["start","end","class"])):ye("",!0),O(" "+K(o.text),1)]),_:2},1032,["to","disabled"]))),128))]),_:1})}}};function mCe(){const e=ra(),t=(r,s=0,o="start",i=null)=>{e.dispatch("appBar/setExtensionContent",{component:f_(ACe),props:{items:r,modelValue:s,alignTabs:o,"onUpdate:modelValue":i||(()=>{})}})},n=r=>{e.dispatch("appBar/setExtensionContent",{component:f_(fCe),props:{items:r}})},a=()=>{e.dispatch("appBar/clearExtensionContent")};return Ii(()=>{a()}),{setTabs:t,setBreadcrumbs:n,clearExtension:a}}const vCe={class:"filter-container pa-3",style:{flex:"1 1 auto","overflow-y":"auto"}},hCe={class:"filter-field mb-3"},pCe={class:"filter-field mb-3"},gCe={class:"filter-field mb-3"},yCe={class:"d-flex justify-center mt-4"},_Ce={class:"d-flex align-center"},wCe={class:"d-flex age-dob-container",style:{gap:"8px"}},bCe={__name:"PatientFilter",props:{modelValueName:{type:String,default:""},modelValuePhone:{type:String,default:""},modelValueDate:{type:String,default:""}},emits:["update:modelValueName","update:modelValuePhone","update:modelValueDate","filter-change","clear-filters","patient-created"],setup(e,{expose:t,emit:n}){const a=e,r=n,s=V(a.modelValueName),o=V(a.modelValuePhone),i=V(a.modelValueDate),c=V(""),A=V(""),d=V(""),f=V(!1),m=V(!1),v=V("dob"),p=V(""),g=V({name:"",contact_number:"",age:"",birthDate:"",gender:"",email:""}),y=()=>{f.value=!0},w=()=>{f.value=!1,v.value="dob",p.value="",g.value={name:"",contact_number:"",age:"",birthDate:"",gender:"",email:""},m.value=!1},b=U=>{if(v.value==="dob")if(U){p.value=U;const F=nT(U);F!==null&&(g.value.age=F.toString())}else p.value=""};je(v,U=>{U==="age"?(g.value.birthDate&&(p.value=g.value.birthDate),g.value.birthDate=""):p.value&&(g.value.birthDate=p.value)}),t({openCreatePatientDialog:y});const x=()=>{c.value="",s.value&&s.value.length<2&&(c.value="Name must be at least 2 characters long"),S()},T=()=>{A.value="",o.value&&o.value.replace(/\D/g,"").length>15&&(A.value="Phone number cannot exceed 15 digits"),S()},D=()=>{if(d.value="",i.value){const U=new Date(i.value);isNaN(U.getTime())&&(d.value="Please enter a valid date")}S()},k=()=>{s.value="",o.value="",i.value="",c.value="",A.value="",d.value="",r("update:modelValueName",""),r("update:modelValuePhone",""),r("update:modelValueDate",""),r("clear-filters")},S=()=>{r("update:modelValueName",s.value),r("update:modelValuePhone",o.value),r("update:modelValueDate",i.value),r("filter-change",{name:s.value,phone:o.value,date:i.value,hasErrors:!!(c.value||A.value||d.value)})};je(()=>a.modelValueName,U=>{s.value=U}),je(()=>a.modelValuePhone,U=>{o.value=U}),je(()=>a.modelValueDate,U=>{i.value=U}),je([s,o,i],()=>{S()});const E=U=>{const F=U.target.value.replace(/[^0-9]/g,"").slice(0,10);g.value.contact_number=F},C=async()=>{try{const U={...g.value};if(v.value==="dob"&&U.birthDate){const L=gd(U.birthDate);L!==null?U.birthDate=L.toString():U.birthDate=""}else delete U.birthDate;const F=await MM(U);F.error?(r("patient-created",{success:!1,message:"Error creating patient. Please try again.",error:F.error}),console.error("There was an error creating the patient:",F.error)):(w(),r("patient-created",{success:!0,message:"Patient created successfully",patient:F.data}))}catch(U){console.error("There was an error creating the patient:",U),r("patient-created",{success:!1,message:"An unexpected error occurred. Please try again.",error:U})}};return(U,F)=>{const L=I("v-card-text"),H=I("v-card"),ue=I("v-text-field"),ie=I("v-btn"),Q=I("v-icon"),X=I("v-card-title"),le=I("v-divider"),Z=I("v-col"),re=I("v-btn-toggle"),q=I("v-select"),P=I("v-row"),G=I("v-form"),J=I("v-spacer"),M=I("v-card-actions"),te=I("v-dialog");return R(),ve(H,{color:"surfaceContainer",flat:"",style:{height:"100%",display:"flex","flex-direction":"column"}},{default:u(()=>[l(H,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(L,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...F[13]||(F[13]=[h("span",{class:"text-body-2 font-weight-medium"},"Filter Patients",-1)])]),_:1})]),_:1}),h("div",vCe,[h("div",hCe,[l(ue,{modelValue:s.value,"onUpdate:modelValue":F[0]||(F[0]=Y=>s.value=Y),label:"Patient Name",placeholder:"Enter patient name...",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":c.value,onInput:x,maxlength:"100"},null,8,["modelValue","error-messages"])]),h("div",pCe,[l(ue,{modelValue:o.value,"onUpdate:modelValue":F[1]||(F[1]=Y=>o.value=Y),label:"Phone Number",placeholder:"Enter phone number...",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":A.value,onInput:T,maxlength:"15"},null,8,["modelValue","error-messages"])]),h("div",gCe,[l(ue,{modelValue:i.value,"onUpdate:modelValue":F[2]||(F[2]=Y=>i.value=Y),type:"date",label:"Appointment Date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input date-input","error-messages":d.value,onInput:D},null,8,["modelValue","error-messages"])]),h("div",yCe,[l(ie,{variant:"text",size:"small","prepend-icon":"mdi-filter-remove",onClick:k,class:"filter-button-clear"},{default:u(()=>[...F[14]||(F[14]=[O(" Clear ",-1)])]),_:1})])]),l(te,{modelValue:f.value,"onUpdate:modelValue":F[12]||(F[12]=Y=>f.value=Y),persistent:"","max-width":"900px"},{default:u(()=>[l(H,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[l(X,{class:"d-flex justify-space-between align-center pa-3"},{default:u(()=>[h("div",_Ce,[l(Q,{class:"mr-2",color:"primary"},{default:u(()=>[...F[15]||(F[15]=[O("mdi-account-plus",-1)])]),_:1}),F[16]||(F[16]=h("span",{class:"text-h6 font-weight-medium"},"Create Patient",-1))]),l(ie,{icon:"",size:"x-small",onClick:w,tabindex:"-1"},{default:u(()=>[l(Q,null,{default:u(()=>[...F[17]||(F[17]=[h("img",{src:nu,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1}),l(le),l(L,{class:"pa-4"},{default:u(()=>[l(G,{modelValue:m.value,"onUpdate:modelValue":F[11]||(F[11]=Y=>m.value=Y),"validate-on":"input"},{default:u(()=>[l(P,{"no-gutters":""},{default:u(()=>[l(Z,{cols:"6",class:"pr-2 mb-2"},{default:u(()=>[l(ue,{label:"Name *",modelValue:g.value.name,"onUpdate:modelValue":F[3]||(F[3]=Y=>g.value.name=Y),clearable:"",rules:Qe(fr),density:"comfortable",variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),l(Z,{cols:"6",class:"pl-2 mb-2"},{default:u(()=>[l(ue,{label:"Phone Number *",modelValue:g.value.contact_number,"onUpdate:modelValue":F[4]||(F[4]=Y=>g.value.contact_number=Y),type:"tel",counter:10,rules:Qe(Ah),clearable:"",density:"comfortable",variant:"outlined",maxlength:"10",onInput:E},null,8,["modelValue","rules"])]),_:1}),l(Z,{cols:"6",class:"pr-2 mb-2"},{default:u(()=>[h("div",wCe,[l(re,{modelValue:v.value,"onUpdate:modelValue":F[5]||(F[5]=Y=>v.value=Y),mandatory:"",density:"compact",variant:"outlined",divided:"",class:"age-dob-toggle"},{default:u(()=>[l(ie,{value:"dob",size:"small"},{default:u(()=>[...F[18]||(F[18]=[O("DOB",-1)])]),_:1}),l(ie,{value:"age",size:"small"},{default:u(()=>[...F[19]||(F[19]=[O("Age",-1)])]),_:1})]),_:1},8,["modelValue"]),v.value==="age"?(R(),ve(ue,{key:0,label:"Age (yrs) *",modelValue:g.value.age,"onUpdate:modelValue":F[6]||(F[6]=Y=>g.value.age=Y),clearable:"",density:"comfortable",variant:"outlined",rules:Qe(aT),disabled:!!g.value.birthDate||!!p.value,class:"flex-grow-1","hide-details":"auto"},null,8,["modelValue","rules","disabled"])):(R(),ve(ue,{key:1,label:"Date of Birth *",modelValue:g.value.birthDate,"onUpdate:modelValue":[F[7]||(F[7]=Y=>g.value.birthDate=Y),b],type:"date",clearable:"",density:"comfortable",variant:"outlined",rules:Qe(rT),class:"flex-grow-1 date-input","hide-details":"auto",onClick:F[8]||(F[8]=Y=>Y.target.showPicker&&Y.target.showPicker())},null,8,["modelValue","rules"]))])]),_:1}),l(Z,{cols:"6",class:"pl-2 mb-2"},{default:u(()=>[l(q,{modelValue:g.value.gender,"onUpdate:modelValue":F[9]||(F[9]=Y=>g.value.gender=Y),items:["Male","Female"],label:"Gender *",clearable:"",density:"comfortable",variant:"outlined",rules:Qe(sT)},null,8,["modelValue","rules"])]),_:1}),l(Z,{cols:"12",class:"mb-2"},{default:u(()=>[l(ue,{label:"Email (optional)",modelValue:g.value.email,"onUpdate:modelValue":F[10]||(F[10]=Y=>g.value.email=Y),type:"email",clearable:"",density:"comfortable",variant:"outlined",rules:Qe(wg)},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(le),l(M,{class:"pa-3"},{default:u(()=>[l(J),l(ie,{variant:"text",onClick:w},{default:u(()=>[...F[20]||(F[20]=[O(" Cancel ",-1)])]),_:1}),l(ie,{variant:"outlined",disabled:!m.value,onClick:C,"prepend-icon":"mdi-account-plus",class:"btn-hover-enhanced"},{default:u(()=>[...F[21]||(F[21]=[O(" Create Patient ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},xCe=qt(bCe,[["__scopeId","data-v-04aa507e"]]),CCe={class:"filter-container pa-3",style:{flex:"1 1 auto","overflow-y":"auto"}},SCe={class:"filter-field mb-3"},ECe={class:"filter-field mb-3"},BCe={class:"d-flex justify-center mt-4 mb-2"},kCe={key:0,class:"d-flex justify-center"},TCe={__name:"TrendsFilter",props:{modelValueDoctor:{type:String,default:null},modelValueFromDate:{type:String,default:""},availableDoctors:{type:Array,default:()=>[]},maxDate:{type:String,default:""},isLoading:{type:Boolean,default:!1}},emits:["update:modelValueDoctor","update:modelValueFromDate","show-trends","clear-filters"],setup(e,{emit:t}){const n=e,a=t,r=V(n.modelValueDoctor),s=V(n.modelValueFromDate);je(()=>n.modelValueDoctor,c=>{r.value=c}),je(()=>n.modelValueFromDate,c=>{s.value=c}),je(r,c=>{a("update:modelValueDoctor",c)}),je(s,c=>{a("update:modelValueFromDate",c)});const o=()=>{a("show-trends",{doctor:r.value,fromDate:s.value})},i=()=>{r.value=null,s.value="",a("clear-filters")};return(c,A)=>{const d=I("v-card-text"),f=I("v-card"),m=I("v-list-item"),v=I("v-select"),p=I("v-text-field"),g=I("v-btn");return R(),ve(f,{color:"surfaceContainer",flat:"",style:{height:"100%",display:"flex","flex-direction":"column"}},{default:u(()=>[l(f,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(d,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...A[2]||(A[2]=[h("span",{class:"text-body-2 font-weight-medium"},"Trends Analysis",-1)])]),_:1})]),_:1}),h("div",CCe,[h("div",SCe,[l(v,{modelValue:r.value,"onUpdate:modelValue":A[0]||(A[0]=y=>r.value=y),items:e.availableDoctors,"item-title":"doctorName","item-value":"doctorName",label:"Doctor (optional)",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input"},{item:u(({props:y,item:w})=>[l(m,Pe(y,{title:w.raw.doctorName}),{subtitle:u(()=>[O(K(w.raw.doctorSpecialization),1)]),_:2},1040,["title"])]),_:1},8,["modelValue","items"])]),h("div",ECe,[l(p,{modelValue:s.value,"onUpdate:modelValue":A[1]||(A[1]=y=>s.value=y),type:"date",label:"From Date (optional)",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input date-input",max:e.maxDate},null,8,["modelValue","max"])]),h("div",BCe,[l(g,{color:"primary",size:"small","prepend-icon":"mdi-chart-line",onClick:o,loading:e.isLoading,class:"filter-button"},{default:u(()=>[...A[3]||(A[3]=[O(" Show Trends ",-1)])]),_:1},8,["loading"])]),r.value||s.value?(R(),Ae("div",kCe,[l(g,{variant:"text",size:"small","prepend-icon":"mdi-filter-remove",onClick:i,class:"filter-button-clear"},{default:u(()=>[...A[4]||(A[4]=[O(" Clear ",-1)])]),_:1})])):ye("",!0)])]),_:1})}}},ICe=qt(TCe,[["__scopeId","data-v-950c9542"]]),Gv=""+new URL("images/search_here-_oFYQxGX.png",import.meta.url).href,FCe={class:"scrollable-content"},PCe={class:"scrollable-content"},DCe={class:"text-center"},UCe={class:"text-center"},RCe={class:"text-body-2 text-medium-emphasis mb-4"},NCe={class:"text-center"},VCe={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},LCe={key:0,class:"text-body-2 text-medium-emphasis ml-2",style:{"font-weight":"500"}},MCe={class:"d-flex align-center flex-wrap"},OCe={key:0,class:"text-body-2 text-medium-emphasis mr-3"},HCe={key:1,class:"text-body-2 text-medium-emphasis mr-3"},$Ce={key:2,class:"text-body-2 text-medium-emphasis mr-3"},QCe={key:3,class:"text-body-2 text-medium-emphasis mr-3"},GCe={class:"scrollable-content"},zCe={class:"scrollable-content"},KCe={key:1},WCe={class:"text-center"},jCe={class:"text-center"},qCe={class:"text-center"},YCe={class:"text-body-2 text-medium-emphasis mb-4"},XCe={class:"text-center"},JCe={key:4,class:"trends-scroll-container",style:{"overflow-y":"auto","max-height":"75vh"}},ZCe={class:"text-h4"},eSe={class:"text-h4"},tSe={class:"text-h4"},nSe={class:"text-h4"},aSe={class:"chart-container"},rSe={class:"text-center"},sSe={class:"font-weight-medium"},oSe={class:"text-center"},iSe={class:"font-weight-medium"},lSe={class:"d-flex justify-center"},uSe={__name:"patients-landing-page",setup(e){mCe();const{showSnackbar:t,showWarning:n}=ca(),a=ra(),r=V(0),s=Gf(),o=sl(),i=V(s.params.id),c=V([]),A=V(""),d=V(""),f=V(""),m=V(null),v=V(!1),p=V(null),g=V(!1),y=V(null),w=ne(()=>Rn()),b=ne(()=>[{title:"Start Date",key:"startDate",sortable:!0,align:"center",width:"35%"},{title:"End Date",key:"endDate",sortable:!0,align:"center",width:"35%"},{title:"Appointments",key:"count",sortable:!0,align:"center",width:"30%"}]),x=ne(()=>{if(!Q.value.length)return[];const oe={};return Q.value.forEach(j=>{const ce=new Date(j.appointmentDate),de=ce.getFullYear(),_e=E(ce),Re=`${de}-W${_e.toString().padStart(2,"0")}`;oe[Re]||(oe[Re]={week:Re,count:0,dates:[],year:de,weekNumber:_e}),oe[Re].count++,oe[Re].dates.push(j.appointmentDate)}),Object.values(oe).map(j=>{const ce=C(j.year,j.weekNumber),de=U(j.year,j.weekNumber);return{...j,startDate:ce.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),endDate:de.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),dateRange:`${ce.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${de.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`}}).sort((j,ce)=>j.week.localeCompare(ce.week))}),T=ne(()=>Q.value.length?new Set(Q.value.map(j=>j.patientId)).size:0),D=ne(()=>{if(!x.value.length)return 0;const oe=x.value.reduce((j,ce)=>j+ce.count,0);return Math.round(oe/x.value.length)}),k=ne(()=>x.value.length),S=ne(()=>a.getters["doctorModule/allDoctors"]||[]),E=oe=>{const j=new Date(oe.getFullYear(),0,1),ce=j.getDay(),de=(oe-j)/(1440*60*1e3)+1;return Math.ceil((de+ce-1)/7)},C=(oe,j)=>{const de=new Date(oe,0,1).getDay(),_e=(j-1)*7-de+1;return new Date(oe,0,1+_e)},U=(oe,j)=>{const ce=C(oe,j);return new Date(ce.getTime()+8640*60*1e3)},F=async()=>{if(!ue.value)try{ue.value=!0,ie.value=null,le.value=!0;const oe=await bve(X.value.selectedDoctor?.trim()||"",X.value.fromDate||"");if(oe.error)throw new Error(`Failed to fetch trends data: ${oe.error.message||"Unknown error"}`);Q.value=Array.isArray(oe.data)?oe.data:[],t({message:`Loaded ${Q.value.length} completed appointments for trends analysis`,color:"success",timeout:3e3})}catch(oe){console.error("Error fetching trends data:",oe),ie.value=oe.message||"Failed to load trends data",Q.value=[],t({message:ie.value,color:"error",timeout:5e3})}finally{ue.value=!1}},L=()=>{try{X.value.selectedDoctor=null,X.value.fromDate="",ie.value=null,le.value=!1,Q.value=[],t({message:"Trends configuration cleared successfully",color:"success",timeout:3e3})}catch(oe){console.error("Error clearing trends configuration:",oe),m.value="Failed to clear trends configuration"}},H=async()=>{try{a.getters["doctorModule/isInitialized"]||await a.dispatch("doctorModule/initializeDoctors")}catch(oe){console.error("Error initializing doctors:",oe)}},ue=V(!1),ie=V(null),Q=V([]),X=V({selectedDoctor:null,fromDate:""}),le=V(!1),Z=V([{title:"List",disabled:!1},{title:"Trends",disabled:!1}]),re=async()=>{try{if(await o.isReady(),s.path==="/patients")return;await _n();let oe=0;for(;!s.params.id&&oe<3;)await _n(),await new Promise(j=>setTimeout(j,10)),oe++;if(!s.params.id){console.warn("Route params not ready after retries, skipping URL param extraction");return}if(i.value=s.params.id,!i.value)throw new Error("No user ID found in URL parameters")}catch(oe){console.error("Error extracting URL parameters:",oe),m.value="Invalid URL parameters"}},q=ne(()=>{try{return s.path!=="/patients"}catch(oe){return console.error("Error checking child route:",oe),!1}});ne(()=>s.query.from==="patients-landing-page"),dn(async()=>{try{s.path!=="/patients"?await re():(g.value=!0,P(),H())}catch(oe){console.error("Error on mount:",oe),m.value="Failed to initialize"}}),je(()=>s.path,async()=>{try{if(await o.isReady(),s.path==="/patients"){g.value=!0,P(),(m.value==="Invalid URL parameters"||m.value==="Navigation error occurred")&&(m.value=null);return}await _n(),await new Promise(oe=>setTimeout(oe,50)),s.path!=="/patients"&&await re()}catch(oe){console.error("Error on route change:",oe),s.path!=="/patients"&&(m.value="Navigation update failed")}}),je(()=>s.path,()=>{try{s.path!=="/patients"||m.value==="Navigation error occurred"&&(m.value=null)}catch(oe){console.error("Error in route validation:",oe),m.value="Navigation error occurred"}},{immediate:!1}),je(r,oe=>{try{oe===1&&H()}catch(j){console.error("Error handling tab change:",j)}});const P=async()=>{if(!v.value)try{v.value=!0,p.value=null;const oe=await cve(A.value?.trim()||"",d.value?.trim()||"",f.value||"");if(oe.error)throw new Error(`Search failed: ${oe.error.message||"Unknown error"}`);c.value=Array.isArray(oe.data)?oe.data:[],g.value=!0,(A.value||d.value||f.value)&&t({message:`Found ${c.value.length} patient${c.value.length!==1?"s":""}`,color:"success",timeout:3e3})}catch(oe){console.error("Error fetching patients:",oe),p.value=oe.message||"Failed to search patients",c.value=[],g.value=!0,t({message:p.value,color:"error",timeout:5e3})}finally{v.value=!1}},G=()=>{p.value=null,P()},J=()=>{try{A.value="",d.value="",f.value="",p.value=null,g.value=!0,P(),t({message:"Filters cleared successfully",color:"success",timeout:3e3})}catch(oe){console.error("Error clearing filters:",oe),m.value="Failed to clear filters"}},M=oe=>{oe.hasErrors||(g.value=!0,ae())},te=oe=>{oe.success?(t({message:oe.message||"Patient created successfully",color:"success",timeout:3e3}),P()):t({message:oe.message||"Error creating patient",color:"error",timeout:5e3})},Y=()=>{y.value&&y.value.openCreatePatientDialog()},W=oe=>{const{hasPermission:j}=ch();if(!j("patients.details").value){n("You do not have permission to view patient details");return}if(!j("patients.details").value){n("You do not have permission to access consultation or procedure");return}try{if(!oe)throw new Error("Invalid patient ID");o.push({path:`/patients/${oe}`,query:{from:"patients-landing-page"}})}catch(_e){console.error("Error navigating to patient:",_e),t({message:"Failed to open patient details",color:"error",timeout:5e3})}};let ee;const ae=()=>{clearTimeout(ee),ee=setTimeout(()=>{P()},500)};return je([A,d,f],()=>{g.value=!0,ae()}),(oe,j)=>{const ce=I("v-alert"),de=I("v-tab"),_e=I("v-tabs"),Re=I("v-btn"),be=I("v-card"),Ee=I("v-col"),Ce=I("v-row"),Be=I("v-progress-circular"),Te=I("v-icon"),Oe=I("v-card-text"),Me=I("v-empty-state"),rt=I("v-card-title"),ut=I("v-tooltip"),Ie=I("v-lazy"),Ue=I("v-window-item"),dt=I("v-chip"),Ft=I("v-data-table"),it=I("v-window"),qe=I("router-view"),yt=I("v-main");return R(),ve(yt,null,{default:u(()=>[m.value?(R(),ve(ce,{key:0,type:"error",dismissible:"","onClick:close":j[0]||(j[0]=mt=>m.value=null),class:"ma-3"},{default:u(()=>[O(K(m.value),1)]),_:1})):ye("",!0),q.value?(R(),ve(qe,{key:2})):(R(),Ae(Ke,{key:1},[l(Ce,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[l(Ee,{cols:"12"},{default:u(()=>[l(be,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center justify-space-between"},{default:u(()=>[l(_e,{modelValue:r.value,"onUpdate:modelValue":j[1]||(j[1]=mt=>r.value=mt),color:"primary","align-tabs":"start",class:"flex-grow-1"},{default:u(()=>[(R(!0),Ae(Ke,null,Gt(Z.value,(mt,xt)=>(R(),ve(de,{key:xt,value:xt,disabled:mt.disabled},{default:u(()=>[O(K(mt.title),1)]),_:2},1032,["value","disabled"]))),128))]),_:1},8,["modelValue"]),l(En,{permission:"patients.create",class:"create-patient-btn"},{default:u(()=>[l(Re,{color:"primary",variant:"flat","prepend-icon":"mdi-account-plus",onClick:Y,size:"small"},{default:u(()=>[...j[8]||(j[8]=[O(" Create Patient ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(it,{modelValue:r.value,"onUpdate:modelValue":j[7]||(j[7]=mt=>r.value=mt),class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[l(Ue,{value:0,style:{height:"100%"}},{default:u(()=>[l(Ce,{"aria-label":"main row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[l(Ee,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[h("div",FCe,[l(xCe,{ref_key:"patientFilterRef",ref:y,"model-value-name":A.value,"onUpdate:modelValueName":j[2]||(j[2]=mt=>A.value=mt),"model-value-phone":d.value,"onUpdate:modelValuePhone":j[3]||(j[3]=mt=>d.value=mt),"model-value-date":f.value,"onUpdate:modelValueDate":j[4]||(j[4]=mt=>f.value=mt),onFilterChange:M,onClearFilters:J,onPatientCreated:te},null,8,["model-value-name","model-value-phone","model-value-date"])])]),_:1}),l(Ee,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[h("div",PCe,[l(be,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[v.value?(R(),ve(Ce,{key:0,"no-gutters":""},{default:u(()=>[l(Ee,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[h("div",DCe,[l(Be,{indeterminate:"",color:"primary",size:"64"}),j[9]||(j[9]=h("div",{class:"mt-4 text-subtitle-1"},"Searching patients...",-1))])]),_:1})]),_:1})):p.value?(R(),ve(Ce,{key:1,"no-gutters":""},{default:u(()=>[l(Ee,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[h("div",UCe,[l(Te,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...j[10]||(j[10]=[O("mdi-alert-circle",-1)])]),_:1}),j[12]||(j[12]=h("div",{class:"text-h6 mb-2"},"Search Failed",-1)),h("div",RCe,K(p.value),1),l(Re,{color:"primary",onClick:G,"prepend-icon":"mdi-refresh"},{default:u(()=>[...j[11]||(j[11]=[O(" Try Again ",-1)])]),_:1})])]),_:1})]),_:1})):c.value&&c.value.length===0&&g.value?(R(),Ae(Ke,{key:2},[l(be,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(Oe,{class:"pt-2 pb-0"},{default:u(()=>[...j[13]||(j[13]=[h("strong",null,"0",-1),O(" results found ",-1)])]),_:1})]),_:1}),l(Me,{image:Qe(Gv),class:"d-flex justify-center"},{title:u(()=>[...j[14]||(j[14]=[h("div",{class:"text-subtitle-2 mt-8 text-center"}," No Patients Found ",-1)])]),text:u(()=>[...j[15]||(j[15]=[h("div",{class:"text-caption text-center"}," Try adjusting your search criteria or clear filters to see all patients ",-1)])]),actions:u(()=>[l(Re,{color:"primary",variant:"outlined",onClick:J,"prepend-icon":"mdi-filter-remove"},{default:u(()=>[...j[16]||(j[16]=[O(" Clear Filters ",-1)])]),_:1})]),_:1},8,["image"])],64)):g.value?c.value&&c.value.length>0?(R(),Ae(Ke,{key:4},[l(be,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(Oe,{class:"pt-2 pb-0"},{default:u(()=>[h("strong",null,K(c.value.length),1),O(" result"+K(c.value.length!==1?"s":"")+" found ",1)]),_:1})]),_:1}),l(Ce,{"no-gutters":""},{default:u(()=>[l(Ee,{cols:"12",class:"scroll-element mt-2",style:{"padding-bottom":"20px"}},{default:u(()=>[(R(!0),Ae(Ke,null,Gt(c.value,mt=>(R(),ve(Ie,{key:mt?.id||Math.random(),options:{threshold:.1,rootMargin:"50px"},"min-height":"70"},{default:u(()=>[l(En,{"any-permission":["patients.details"],feature:["patients"],tag:"div"},{default:u(()=>[mt?(R(),ve(be,{key:0,style:Ut([{textAlign:"left"},{cursor:"pointer"}]),density:"compact",class:"mx-2 patient-card-spacing card-enhanced card-status-default card-hover-base",rounded:"lg",onClick:xt=>W(mt.id)},{default:u(()=>[l(Ce,{"no-gutters":""},{default:u(()=>[l(Ee,{cols:"12"},{default:u(()=>[l(rt,{class:"pb-0 pt-2"},{default:u(()=>[h("span",VCe,K(mt?.name||"Unknown Patient"),1),mt?.contactNumber?(R(),Ae("span",LCe," ("+K(mt.contactNumber)+") ",1)):ye("",!0)]),_:2},1024),l(Oe,{class:"pb-1"},{default:u(()=>[h("div",MCe,[mt?.id?(R(),Ae("span",OCe,[j[20]||(j[20]=h("strong",null,"ID:",-1)),O(" "+K(mt.id),1)])):ye("",!0),mt?.gender&&mt.gender!==""?(R(),Ae("span",HCe,[j[21]||(j[21]=h("strong",null,"Gender:",-1)),O(" "+K(mt.gender),1)])):ye("",!0),mt?.age&&mt.age!==""?(R(),Ae("span",$Ce,[j[22]||(j[22]=h("strong",null,"Age:",-1)),O(" "+K(mt.age?`${mt.age} yrs`:""),1)])):ye("",!0),mt?.importID?(R(),Ae("span",QCe,[j[23]||(j[23]=h("strong",null,"Import ID:",-1)),O(" "+K(mt.importID),1)])):ye("",!0),mt?.isImported===!0||mt?.isImported===1?(R(),ve(ut,{key:4,text:"Imported Patient"},{activator:u(({props:xt})=>[l(Te,Pe({size:"small",color:"info"},{ref_for:!0},xt,{class:"ml-1"}),{default:u(()=>[...j[24]||(j[24]=[h("img",{src:dCe,alt:"Imported",style:{width:"16px",height:"16px",filter:"invert(0.5)"}},null,-1)])]),_:1},16)]),_:1})):ye("",!0)])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])):ye("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})],64)):ye("",!0):(R(),ve(Ce,{key:3,"no-gutters":""},{default:u(()=>[l(Ee,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[h("div",NCe,[l(Te,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...j[17]||(j[17]=[O("mdi-account-search",-1)])]),_:1}),j[18]||(j[18]=h("div",{class:"text-h6 mb-2"},"Search for Patients",-1)),j[19]||(j[19]=h("div",{class:"text-body-2 text-medium-emphasis"},"Use the filters on the left to find patients",-1))])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1})]),_:1}),l(Ue,{value:1,style:{height:"100%"}},{default:u(()=>[l(Ce,{"aria-label":"trends row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[l(Ee,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[h("div",GCe,[l(ICe,{"model-value-doctor":X.value.selectedDoctor,"onUpdate:modelValueDoctor":j[5]||(j[5]=mt=>X.value.selectedDoctor=mt),"model-value-from-date":X.value.fromDate,"onUpdate:modelValueFromDate":j[6]||(j[6]=mt=>X.value.fromDate=mt),"available-doctors":S.value,"max-date":w.value,"is-loading":ue.value,onShowTrends:F,onClearFilters:L},null,8,["model-value-doctor","model-value-from-date","available-doctors","max-date","is-loading"])])]),_:1}),l(Ee,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[h("div",zCe,[l(be,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[l(be,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(Oe,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[Q.value.length>0?(R(),Ae(Ke,{key:0},[h("strong",null,K(Q.value.length),1),j[25]||(j[25]=O(" appointments analyzed ",-1))],64)):(R(),Ae("strong",KCe,"Trends Analysis"))]),_:1})]),_:1}),le.value?ue.value?(R(),ve(Ce,{key:1,"no-gutters":""},{default:u(()=>[l(Ee,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[h("div",jCe,[l(Be,{indeterminate:"",color:"primary",size:"64"}),j[30]||(j[30]=h("div",{class:"mt-4 text-subtitle-1"},"Loading trends data...",-1))])]),_:1})]),_:1})):ie.value?(R(),ve(Ce,{key:2,"no-gutters":""},{default:u(()=>[l(Ee,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[h("div",qCe,[l(Te,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...j[31]||(j[31]=[O("mdi-alert-circle",-1)])]),_:1}),j[33]||(j[33]=h("div",{class:"text-h6 mb-2"},"Failed to Load Trends",-1)),h("div",YCe,K(ie.value),1),l(Re,{color:"primary",onClick:F,"prepend-icon":"mdi-refresh"},{default:u(()=>[...j[32]||(j[32]=[O(" Try Again ",-1)])]),_:1})])]),_:1})]),_:1})):Q.value.length===0&&le.value?(R(),ve(Ce,{key:3,"no-gutters":""},{default:u(()=>[l(Ee,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[h("div",XCe,[l(Te,{size:"64",color:"warning",class:"mb-4"},{default:u(()=>[...j[34]||(j[34]=[O("mdi-chart-line-variant",-1)])]),_:1}),j[36]||(j[36]=h("div",{class:"text-h6 mb-2"},"No Trends Data",-1)),j[37]||(j[37]=h("div",{class:"text-body-2 text-medium-emphasis mb-4"}," No completed appointments found for the selected criteria ",-1)),l(Re,{color:"primary",variant:"outlined",onClick:L,"prepend-icon":"mdi-refresh"},{default:u(()=>[...j[35]||(j[35]=[O(" Clear Configuration ",-1)])]),_:1})])]),_:1})]),_:1})):Q.value.length>0?(R(),Ae("div",JCe,[l(Oe,{class:"pt-3"},{default:u(()=>[l(Ce,{class:"mb-4"},{default:u(()=>[l(Ee,{cols:"3"},{default:u(()=>[l(be,{color:"primary",variant:"tonal"},{default:u(()=>[l(Oe,{class:"text-center"},{default:u(()=>[h("div",ZCe,K(Q.value.length),1),j[38]||(j[38]=h("div",{class:"text-caption"},"Total Appointments",-1))]),_:1})]),_:1})]),_:1}),l(Ee,{cols:"3"},{default:u(()=>[l(be,{color:"success",variant:"tonal"},{default:u(()=>[l(Oe,{class:"text-center"},{default:u(()=>[h("div",eSe,K(T.value),1),j[39]||(j[39]=h("div",{class:"text-caption"},"Unique Patients",-1))]),_:1})]),_:1})]),_:1}),l(Ee,{cols:"3"},{default:u(()=>[l(be,{color:"info",variant:"tonal"},{default:u(()=>[l(Oe,{class:"text-center"},{default:u(()=>[h("div",tSe,K(D.value),1),j[40]||(j[40]=h("div",{class:"text-caption"},"Weekly Average",-1))]),_:1})]),_:1})]),_:1}),l(Ee,{cols:"3"},{default:u(()=>[l(be,{color:"warning",variant:"tonal"},{default:u(()=>[l(Oe,{class:"text-center"},{default:u(()=>[h("div",nSe,K(k.value),1),j[41]||(j[41]=h("div",{class:"text-caption"},"Weeks of Data",-1))]),_:1})]),_:1})]),_:1})]),_:1}),h("div",aSe,[l(Ft,{headers:b.value,items:x.value,"items-per-page":10,class:"elevation-1 trends-table",density:"comfortable","fixed-header":""},{"item.startDate":u(({item:mt})=>[h("div",rSe,[h("span",sSe,K(mt.startDate),1)])]),"item.endDate":u(({item:mt})=>[h("div",oSe,[h("span",iSe,K(mt.endDate),1)])]),"item.count":u(({item:mt})=>[h("div",lSe,[l(dt,{color:"primary",size:"small"},{default:u(()=>[O(K(mt.count),1)]),_:2},1024)])]),_:2},1032,["headers","items"])])]),_:1})])):ye("",!0):(R(),ve(Ce,{key:0,"no-gutters":""},{default:u(()=>[l(Ee,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[h("div",WCe,[l(Te,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...j[26]||(j[26]=[O("mdi-chart-line-variant",-1)])]),_:1}),j[28]||(j[28]=h("div",{class:"text-h6 mb-2"},"Ready to Analyze Trends",-1)),j[29]||(j[29]=h("div",{class:"text-body-2 text-medium-emphasis mb-4"},' Configure your analysis settings and click "Show Trends" to view appointment trends ',-1)),l(Re,{color:"primary",variant:"outlined",onClick:F,"prepend-icon":"mdi-chart-line"},{default:u(()=>[...j[27]||(j[27]=[O(" Show All Trends ",-1)])]),_:1})])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))]),_:1})}}},cSe=qt(uSe,[["__scopeId","data-v-46e38356"]]),dSe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,21H8V7H19M19,5H8A2,2%200%200,0%206,7V21A2,2%200%200,0%208,23H19A2,2%200%200,0%2021,21V7A2,2%200%200,0%2019,5M16,1H4A2,2%200%200,0%202,3V17H4V3H16V1Z'%20/%3e%3c/svg%3e",FE="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17,9H7V7H17M17,13H7V11H17M14,17H7V15H14M12,3A1,1%200%200,1%2013,4A1,1%200%200,1%2012,5A1,1%200%200,1%2011,4A1,1%200%200,1%2012,3M19,3H14.82C14.4,1.84%2013.3,1%2012,1C10.7,1%209.6,1.84%209.18,3H5A2,2%200%200,0%203,5V19A2,2%200%200,0%205,21H19A2,2%200%200,0%2021,19V5A2,2%200%200,0%2019,3Z'%20/%3e%3c/svg%3e",ASe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,3H14.82C14.4,1.84%2013.3,1%2012,1C10.7,1%209.6,1.84%209.18,3H5A2,2%200%200,0%203,5V19A2,2%200%200,0%205,21H19A2,2%200%200,0%2021,19V5A2,2%200%200,0%2019,3M12,3A1,1%200%200,1%2013,4A1,1%200%200,1%2012,5A1,1%200%200,1%2011,4A1,1%200%200,1%2012,3M5,13.46H7.17L10.5,7.08L11.44,14.05L13.93,10.86L16.53,13.46H19V15H15.89L14.07,13.21L10.38,17.92L9.62,12.15L8.11,15H5V13.46Z'%20/%3e%3c/svg%3e",fSe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='currentColor'%20d='M16,11.78L20.24,4.45L21.97,5.45L16.74,14.5L10.23,10.75L5.46,19H22V21H2V3H4V17.54L9.5,8L16,11.78Z'%20/%3e%3c/svg%3e",xH="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M14%202H6C4.89%202%204%202.89%204%204V20C4%2021.11%204.89%2022%206%2022H13.81C13.28%2021.09%2013%2020.05%2013%2019C13%2018.67%2013.03%2018.33%2013.08%2018H6V16H13.81C14.27%2015.2%2014.91%2014.5%2015.68%2014H6V12H18V13.08C18.33%2013.03%2018.67%2013%2019%2013S19.67%2013.03%2020%2013.08V8L14%202M13%209V3.5L18.5%209H13M18%2015V18H15V20H18V23H20V20H23V18H20V15H18Z'%20/%3e%3c/svg%3e",PE="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z'%20/%3e%3c/svg%3e",Wd="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M4,6H20V16H4M20,18A2,2%200%200,0%2022,16V6C22,4.89%2021.1,4%2020,4H4C2.89,4%202,4.89%202,6V16A2,2%200%200,0%204,18H0V20H24V18H20Z'%20/%3e%3c/svg%3e",gh="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M6,19A5,5%200%200,1%201,14A5,5%200%200,1%206,9C7,6.65%209.3,5%2012,5C15.43,5%2018.24,7.66%2018.5,11.03L19,11A4,4%200%200,1%2023,15A4,4%200%200,1%2019,19H6M19,13H17V12A5,5%200%200,0%2012,7C9.5,7%207.45,8.82%207.06,11.19C6.73,11.07%206.37,11%206,11A3,3%200%200,0%203,14A3,3%200%200,0%206,17H19A2,2%200%200,0%2021,15A2,2%200%200,0%2019,13Z'%20/%3e%3c/svg%3e",mSe=async e=>{try{return{data:(await At.post("/diagnosis/",e)).data.data.new_diagnosis,error:null}}catch(t){return console.error("There was an error creating patients:",t?.response||t),{data:[],error:t}}},vSe=async e=>{try{return await At.put("/diagnosis/",e),{error:null}}catch(t){return console.error("Error updating diagnosis:",t),{error:t}}},CH=async e=>{try{return{data:(await At.post("/medicine/medicines",e)).data.data.id_mapping,error:null}}catch(t){return console.error("Error adding medicine:",t),{data:[],error:t}}},SH=async(e,t)=>{try{return{data:(await At.post(`/dosages?doctor_id=${t}`,e)).data.data.id_mapping,error:null}}catch(n){return console.error("Error creating dosage:",n),{data:null,error:n}}},EH=async(e,t)=>{try{return await At.post(`/consultation/consultation_medicines/${e}`,t),{error:null}}catch(n){return console.error("Error updating consultation:",n),{error:n}}},bT=async e=>{try{return{data:(await At.post("/medicine/",e)).data.data.newMedicine,error:null}}catch(t){return console.error("Error adding medicine:",t),{data:[],error:t}}},i2=async(e,t)=>{try{return await At.post(`/diagnosis/diagnosis_medicines/${e}`,t),{error:null}}catch(n){return console.error("Error adding diagnosis medicine mapping:",n),{error:n}}},BH=async e=>{try{return{data:(await At.get(`/medicine/diagnosis_medicines/${e.id}`)).data.data.medicines,error:null}}catch(t){return console.error("Error adding diagnosis medicine mapping:",t),{data:[],error:t}}},kH=async(e,t,n={})=>{try{const a=n.skipMessages?{headers:{"X-Skip-Messages":"true"}}:{};return{data:(await At.get(`/medicine/dosage/${e.id}?doctor_id=${t}`,a)).data.data.dosages,error:null,errorMessage:null}}catch(a){if(console.error("Error fetching dosages:",a),a.response?.status===404){const r=a.response?.data?.error||null;return{data:[],error:null,errorMessage:r}}return{data:[],error:a,errorMessage:null}}},xT=async(e,t=!1)=>{try{const n=t?{include_pharmacy_details:!0}:{};return{data:(await At.get(`/medicine/search_medicines/${e}`,{params:n})).data.data.medicines,error:null}}catch(n){return console.error("Error fetching medicines:",n),n.response?.status===404?{data:[],error:null}:{data:[],error:n}}},TH=async(e,t)=>{try{return{data:(await At.put(`/medicine/${e}`,t)).data.data,error:null}}catch(n){return console.error("Error updating medicine:",n),{data:null,error:n}}},IH=Object.freeze(Object.defineProperty({__proto__:null,createDiagnosisMedicines:i2,createDosages:SH,createMedicines:CH,createNewMedicine:bT,getDiagnosisMedicines:BH,getDosages:kH,saveConsultationMedicines:EH,searchMedicines:xT,updateMedicine:TH},Symbol.toStringTag,{value:"Module"})),hSe={__name:"create-diagnosis-template",props:{medicineList:{type:Array,default:()=>[]},diagnosis:{type:String,default:""},patientNotes:{type:String,default:""},investigations:{type:String,default:""},doctorId:{type:[String,Number],required:!0}},emits:["close","update&close"],setup(e,{emit:t}){const n=e,a=t,r=V(n.diagnosis),s=V(n.patientNotes),o=V(n.investigations),i=V(!1),c=V(!1),A=V([]),d=V(""),f=V(null),m=ne(()=>n.medicineList.filter(y=>y.isLocal&&y.productName&&y.id!==void 0&&y.id!==null)),v=()=>{f.value&&f.value.abort(),a("close")},p=(y,w)=>{if(w)A.value.includes(y.id)||A.value.push(y.id),console.log("Medicine selected:",y.productName);else{const b=A.value.indexOf(y.id);b>-1&&A.value.splice(b,1),console.log("Medicine deselected:",y.productName)}d.value=""},g=async()=>{c.value=!0,d.value="",f.value=new AbortController;const y=n.medicineList.filter(b=>A.value.includes(b.id)),w={diagnosisName:r.value,instructions:s.value,investigations:o.value,isBookmark:1,isCreatedByUser:1,isImportedFromServer:0,doctor_id:n.doctorId};console.log("Creating new diagnosis:",w);try{const b=await mSe(w);if(f.value?.signal.aborted)return;if(b.error)d.value="Failed to create diagnosis template. Please try again.",console.error("Error creating diagnosis:",b.error);else{w.id=b.data.id;const x=await i2(w.id,y);if(f.value?.signal.aborted)return;if(x.error){d.value="Diagnosis created but failed to associate medicines. Please try editing the template to add medicines.",console.error("Error creating diagnosis medicines:",x.error);return}console.log("Diagnosis template created successfully"),a("update&close")}}catch(b){f.value?.signal.aborted||(d.value="An unexpected error occurred. Please try again.",console.error("Error creating diagnosis template:",b))}finally{f.value?.signal.aborted||(c.value=!1),f.value=null}};return va(()=>{f.value&&f.value.abort()}),(y,w)=>{const b=I("v-card-title"),x=I("v-col"),T=I("v-icon"),D=I("v-btn"),k=I("v-row"),S=I("v-card"),E=I("v-text-field"),C=I("v-textarea"),U=I("v-divider"),F=I("v-card-subtitle"),L=I("v-checkbox"),H=I("v-tooltip"),ue=I("v-chip"),ie=I("v-card-text"),Q=I("v-alert"),X=I("v-form");return R(),ve(S,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(k,{"no-gutters":""},{default:u(()=>[l(x,{cols:"12"},{default:u(()=>[l(S,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(k,{"no-gutters":""},{default:u(()=>[l(x,{cols:"11"},{default:u(()=>[l(b,{class:"pa-0 pl-2"},{default:u(()=>[...w[4]||(w[4]=[O("Create Diagnosis Template",-1)])]),_:1})]),_:1}),l(x,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(D,{icon:"",size:"x-small",onClick:v},{default:u(()=>[l(T,null,{default:u(()=>[...w[5]||(w[5]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(k,{"no-gutters":""},{default:u(()=>[l(x,{cols:"12"},{default:u(()=>[l(S,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(X,{modelValue:i.value,"onUpdate:modelValue":w[3]||(w[3]=le=>i.value=le),"validate-on":"blur"},{default:u(()=>[l(k,{"no-gutters":""},{default:u(()=>[l(x,{cols:"12"},{default:u(()=>[l(E,{label:"Diagnosis Name *",density:"compact",modelValue:r.value,"onUpdate:modelValue":w[0]||(w[0]=le=>r.value=le),rules:Qe(fr)},null,8,["modelValue","rules"])]),_:1}),l(x,{cols:"12"},{default:u(()=>[l(C,{label:"Instructions",density:"compact",modelValue:s.value,"onUpdate:modelValue":w[1]||(w[1]=le=>s.value=le),rows:"2","auto-grow":""},null,8,["modelValue"])]),_:1}),l(x,{cols:"12"},{default:u(()=>[l(C,{label:"Investigations",density:"compact",modelValue:o.value,"onUpdate:modelValue":w[2]||(w[2]=le=>o.value=le),rows:"1","auto-grow":""},null,8,["modelValue"])]),_:1})]),_:1}),l(k,{"no-gutters":""},{default:u(()=>[l(x,{cols:"12"},{default:u(()=>[l(U,{class:"my-3"},{default:u(()=>[...w[6]||(w[6]=[O("Medicines",-1)])]),_:1}),m.value.length>0?(R(),ve(S,{key:0,variant:"outlined"},{default:u(()=>[l(F,{class:"pb-2"},{default:u(()=>[...w[7]||(w[7]=[O("Available Medicines (from current consultation):",-1)])]),_:1}),l(ie,null,{default:u(()=>[(R(!0),Ae(Ke,null,Gt(m.value,le=>(R(),ve(S,{key:`available-${le.id}`,flat:""},{default:u(()=>[l(k,{"no-gutters":""},{default:u(()=>[l(x,{cols:"5",class:"d-flex align-center justify-start"},{default:u(()=>[l(L,{"model-value":A.value.includes(le.id),color:"primary",density:"compact","hide-details":"","onUpdate:modelValue":Z=>p(le,Z)},null,8,["model-value","onUpdate:modelValue"]),l(ue,{color:"primary","text-color":"black",size:"small",class:"ml-2"},Ev({default:u(()=>[h("strong",null,K(le.productName),1)]),_:2},[le.isLocal?{name:"append",fn:u(()=>[l(H,{text:"Saved Medicine"},{activator:u(({props:Z})=>[l(T,Pe({size:"small"},{ref_for:!0},Z,{class:"ml-1"}),{default:u(()=>[...w[8]||(w[8]=[h("img",{src:Wd,alt:"Saved Medicine"},null,-1)])]),_:1},16)]),_:1})]),key:"0"}:{name:"append",fn:u(()=>[l(H,{text:"External Medicine"},{activator:u(({props:Z})=>[l(T,Pe({size:"small"},{ref_for:!0},Z,{class:"ml-1"}),{default:u(()=>[...w[9]||(w[9]=[h("img",{src:gh,alt:"External Medicine"},null,-1)])]),_:1},16)]),_:1})]),key:"1"}]),1024)]),_:2},1024),l(x,{cols:"7",class:"d-flex align-center justify-start"},{default:u(()=>[l(F,null,{default:u(()=>[O(K(le.saltComposition),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):(R(),ve(Q,{key:1,type:"info",variant:"outlined"},{default:u(()=>[...w[10]||(w[10]=[O(" No medicines available from current consultation to add to template. ",-1)])]),_:1})),d.value?(R(),ve(Q,{key:2,type:"error",variant:"outlined",class:"mt-3"},{default:u(()=>[O(K(d.value),1)]),_:1})):ye("",!0)]),_:1})]),_:1}),l(U),l(k,{"no-gutters":""},{default:u(()=>[l(x,{cols:"2"}),l(x,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(D,{variant:"outlined",onClick:g,disabled:!i.value,loading:c.value},{default:u(()=>[...w[11]||(w[11]=[O(" Create ",-1)])]),_:1},8,["disabled","loading"])]),_:1}),l(x,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},pSe=qt(hSe,[["__scopeId","data-v-92535624"]]),gSe={__name:"edit-diagnosis-template",props:{medicineList:{type:Array,required:!0},selectedDiagnosis:{type:Object,default:null}},emits:["close","update&close"],setup(e,{emit:t}){const n=e,a=t,r=V(null),s=V({}),o=V([]),i=V(!1),c=V(!1),A=V([]),d=V(!1),f=V(""),m=V(null);je(()=>n.medicineList,()=>{v()},{deep:!0});const v=()=>{const x=o.value.map(T=>T.id);A.value=n.medicineList.filter(T=>T.isLocal&&T.id!==void 0&&T.id!==null&&!x.includes(T.id)).map(T=>({...T,isSelected:!1,_uniqueKey:`available_${T.id}`}))};dn(async()=>{n.selectedDiagnosis?(r.value=n.selectedDiagnosis,await p(n.selectedDiagnosis)):v()});const p=async x=>{if(!x){s.value={},o.value=[],v();return}s.value=Qn.cloneDeep(x),d.value=!0,f.value="";try{const T=await BH(x);o.value=(T.data||[]).map(D=>({...D,isSelected:!0,_uniqueKey:`template_${D.id}`})),console.log("Template medicines fetched:",o.value),v()}catch(T){console.error("Error fetching template medicines:",T),f.value="Failed to load template medicines. Please try again.",o.value=[],v()}finally{d.value=!1}},g=x=>{console.log("Medicine selection changed:",x.productName,x.isSelected)},y=x=>{console.log("Template medicine selection changed:",x.productName,x.isSelected)},w=async()=>{if(!(!r.value||!c.value)){i.value=!0;try{const x=await vSe(s.value);if(x.error){console.error("Error updating diagnosis:",x.error);return}const T=o.value.filter(S=>S.isSelected),D=A.value.filter(S=>S.isSelected),k=[...T,...D];if(k.length>0){const S=await i2(r.value.id,k);if(S.error){console.error("Error updating diagnosis medicines:",S.error);return}}else{const S=await i2(r.value.id,[]);if(S.error){console.error("Error clearing diagnosis medicines:",S.error);return}}console.log("Template updated successfully"),a("update&close")}catch(x){console.error("Error updating template:",x)}finally{i.value=!1}}},b=()=>{m.value&&m.value.abort(),a("close")};return va(()=>{m.value&&m.value.abort()}),(x,T)=>{const D=I("v-card-title"),k=I("v-col"),S=I("v-icon"),E=I("v-btn"),C=I("v-row"),U=I("v-card"),F=I("v-text-field"),L=I("v-textarea"),H=I("v-divider"),ue=I("v-card-subtitle"),ie=I("v-progress-linear"),Q=I("v-card-text"),X=I("v-checkbox"),le=I("v-tooltip"),Z=I("v-chip"),re=I("v-alert"),q=I("v-form");return R(),ve(U,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(C,{"no-gutters":""},{default:u(()=>[l(k,{cols:"12"},{default:u(()=>[l(U,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(C,{"no-gutters":""},{default:u(()=>[l(k,{cols:"11"},{default:u(()=>[l(D,{class:"pa-0 pl-2"},{default:u(()=>[...T[4]||(T[4]=[O("Edit Diagnosis Template",-1)])]),_:1})]),_:1}),l(k,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(E,{icon:"",size:"x-small",onClick:b},{default:u(()=>[l(S,null,{default:u(()=>[...T[5]||(T[5]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(C,{"no-gutters":""},{default:u(()=>[l(k,{cols:"12"},{default:u(()=>[l(U,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(q,{modelValue:c.value,"onUpdate:modelValue":T[3]||(T[3]=P=>c.value=P),"validate-on":"blur"},{default:u(()=>[l(C,{"no-gutters":""},{default:u(()=>[r.value?(R(),Ae(Ke,{key:0},[l(k,{cols:"12"},{default:u(()=>[l(F,{label:"Diagnosis Name *",density:"compact",modelValue:s.value.diagnosisName,"onUpdate:modelValue":T[0]||(T[0]=P=>s.value.diagnosisName=P),rules:Qe(fr)},null,8,["modelValue","rules"])]),_:1}),l(k,{cols:"12"},{default:u(()=>[l(L,{label:"Instructions",density:"compact",rows:"2","auto-grow":"",modelValue:s.value.instructions,"onUpdate:modelValue":T[1]||(T[1]=P=>s.value.instructions=P)},null,8,["modelValue"])]),_:1}),l(k,{cols:"12"},{default:u(()=>[l(L,{label:"Investigations",density:"compact",modelValue:s.value.investigations,"onUpdate:modelValue":T[2]||(T[2]=P=>s.value.investigations=P),rows:"1","auto-grow":""},null,8,["modelValue"])]),_:1}),l(k,{cols:"12"},{default:u(()=>[l(H,{class:"my-3"},{default:u(()=>[...T[6]||(T[6]=[O("Medicines",-1)])]),_:1}),d.value?(R(),ve(U,{key:0,variant:"outlined",class:"mb-3"},{default:u(()=>[l(ue,{class:"pb-2"},{default:u(()=>[...T[7]||(T[7]=[O("Loading template medicines...",-1)])]),_:1}),l(Q,null,{default:u(()=>[l(ie,{indeterminate:""})]),_:1})]),_:1})):o.value.length>0?(R(),ve(U,{key:1,variant:"outlined",class:"mb-3"},{default:u(()=>[l(ue,{class:"pb-2"},{default:u(()=>[...T[8]||(T[8]=[O("Current Template Medicines:",-1)])]),_:1}),l(Q,null,{default:u(()=>[(R(!0),Ae(Ke,null,Gt(o.value,P=>(R(),ve(U,{key:P._uniqueKey||`template-${P.id}`,flat:""},{default:u(()=>[l(C,{"no-gutters":""},{default:u(()=>[l(k,{cols:"5",class:"d-flex align-center justify-start"},{default:u(()=>[l(X,{modelValue:P.isSelected,"onUpdate:modelValue":G=>P.isSelected=G,color:"primary",density:"compact","hide-details":"",onChange:G=>y(P)},null,8,["modelValue","onUpdate:modelValue","onChange"]),l(Z,{color:"primary","text-color":"black",size:"small",class:"ml-2"},{append:u(()=>[l(le,{text:"Saved Medicine"},{activator:u(({props:G})=>[l(S,Pe({size:"small"},{ref_for:!0},G,{class:"ml-1"}),{default:u(()=>[...T[9]||(T[9]=[h("img",{src:Wd,alt:"Saved Medicine"},null,-1)])]),_:1},16)]),_:1})]),default:u(()=>[h("strong",null,K(P.productName),1)]),_:2},1024)]),_:2},1024),l(k,{cols:"7",class:"d-flex align-center justify-start"},{default:u(()=>[l(ue,null,{default:u(()=>[O(K(P.saltComposition),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):ye("",!0),A.value.length>0?(R(),ve(U,{key:2,variant:"outlined"},{default:u(()=>[l(ue,{class:"pb-2"},{default:u(()=>[...T[10]||(T[10]=[O("Available Medicines (from current consultation):",-1)])]),_:1}),l(Q,null,{default:u(()=>[(R(!0),Ae(Ke,null,Gt(A.value,P=>(R(),ve(U,{key:P._uniqueKey||`available-${P.id}`,flat:""},{default:u(()=>[l(C,{"no-gutters":""},{default:u(()=>[l(k,{cols:"5",class:"d-flex align-center justify-start"},{default:u(()=>[l(X,{modelValue:P.isSelected,"onUpdate:modelValue":G=>P.isSelected=G,color:"primary",density:"compact","hide-details":"",onChange:G=>g(P)},null,8,["modelValue","onUpdate:modelValue","onChange"]),l(Z,{color:"primary","text-color":"black",size:"small",class:"ml-2"},Ev({default:u(()=>[h("strong",null,K(P.productName),1)]),_:2},[P.isLocal?{name:"append",fn:u(()=>[l(le,{text:"Saved Medicine"},{activator:u(({props:G})=>[l(S,Pe({size:"small"},{ref_for:!0},G,{class:"ml-1"}),{default:u(()=>[...T[11]||(T[11]=[h("img",{src:Wd,alt:"Saved Medicine"},null,-1)])]),_:1},16)]),_:1})]),key:"0"}:{name:"append",fn:u(()=>[l(le,{text:"External Medicine"},{activator:u(({props:G})=>[l(S,Pe({size:"small"},{ref_for:!0},G,{class:"ml-1"}),{default:u(()=>[...T[12]||(T[12]=[h("img",{src:gh,alt:"External Medicine"},null,-1)])]),_:1},16)]),_:1})]),key:"1"}]),1024)]),_:2},1024),l(k,{cols:"7",class:"d-flex align-center justify-start"},{default:u(()=>[l(ue,null,{default:u(()=>[O(K(P.saltComposition),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):(R(),ve(re,{key:3,type:"info",variant:"outlined"},{default:u(()=>[...T[13]||(T[13]=[O(" No medicines available from current consultation to add to template. ",-1)])]),_:1})),f.value?(R(),ve(re,{key:4,type:"error",variant:"outlined",class:"mt-3"},{default:u(()=>[O(K(f.value),1)]),_:1})):ye("",!0)]),_:1})],64)):(R(),ve(k,{key:1,cols:"12"},{default:u(()=>[l(re,{type:"info",variant:"outlined"},{default:u(()=>[...T[14]||(T[14]=[O(" No diagnosis template selected for editing. ",-1)])]),_:1})]),_:1}))]),_:1}),l(H),l(C,{"no-gutters":""},{default:u(()=>[l(k,{cols:"2"}),l(k,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(E,{variant:"outlined",onClick:w,disabled:!c.value||!r.value,loading:i.value},{default:u(()=>[...T[15]||(T[15]=[O(" Update ",-1)])]),_:1},8,["disabled","loading"])]),_:1}),l(k,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},ySe=qt(gSe,[["__scopeId","data-v-217bbc0c"]]),_Se={class:"diagnosis-name-truncate"},wSe={__name:"search-diagnosis",props:{modelValue:{type:String,default:""},doctorId:{type:[String,Number],required:!0}},emits:["update:modelValue","diagnosisSelected"],setup(e,{emit:t}){const n=e,a=t,r=V(!1),s=V([]),o=V(""),i=V(""),c=V(!1);let A=null;const d=v=>{o.value=v};je(i,v=>{typeof v=="string"?(a("update:modelValue",v),a("diagnosisSelected",{diagnosisName:v,isUserTyped:!0,isFromHistory:!1})):v&&typeof v=="object"?(a("update:modelValue",v.diagnosisName),a("diagnosisSelected",v)):v||(a("update:modelValue",""),a("diagnosisSelected",null))}),je(o,v=>{if(A&&clearTimeout(A),c.value=!1,!v||v.length<1){r.value=!1,s.value=[];return}A=setTimeout(()=>{f(v)},300)}),je(()=>n.modelValue,v=>{v!==i.value&&(i.value=v)},{immediate:!0});const f=async v=>{if(!(!v||v.length<1)){r.value=!0,c.value=!1;try{const p=await At.get(`diagnosis/search_diagnosis/${v}`,{params:{doctor_id:n.doctorId}});s.value=p.data.data.diagnosis,(!s.value||s.value.length===0)&&(c.value=!0)}catch(p){console.error("Error fetching diagnosis:",p),c.value=!0}finally{r.value=!1}}},m=ne(()=>!o.value||o.value.length<1?"Start typing to search consultation history, or type custom diagnosis":r.value?"Searching consultation history and external sources...":c.value?"No matches found in consultation history or external sources. You can still type custom diagnosis.":"");return(v,p)=>{const g=I("v-icon"),y=I("v-tooltip"),w=I("v-list-item"),b=I("v-card-subtitle"),x=I("v-card"),T=I("v-combobox");return R(),ve(T,{modelValue:i.value,"onUpdate:modelValue":p[0]||(p[0]=D=>i.value=D),items:s.value,search:o.value,"onUpdate:search":d,"item-title":"diagnosisName","item-value":"diagnosisName",label:"Diagnosis - search history or type directly",placeholder:"Type diagnosis or search consultation history...",variant:"underlined",loading:r.value,"no-data-text":m.value,clearable:"","hide-no-data":"","auto-select-first":"",density:"compact",class:"diagnosis-combobox"},{item:u(({props:D,item:k})=>[l(w,Pe(D,{density:"compact"}),{title:u(()=>[h("span",_Se,K(k.raw.diagnosisName),1)]),append:u(()=>[l(y,{location:"top"},{activator:u(({props:S})=>[l(g,Pe(S,{size:"small"}),{default:u(()=>[k.raw.isFromHistory?(R(),ve(g,{key:0,icon:"mdi-history",color:"primary"})):(R(),ve(g,{key:1,icon:"mdi-cloud",color:"secondary"}))]),_:2},1040)]),default:u(()=>[h("span",null,K(k.raw.isFromHistory?"From your consultation history":"External suggestion"),1)]),_:2},1024)]),_:2},1040)]),"no-data":u(()=>[l(x,{flat:"",class:"pa-4 text-center"},{default:u(()=>[l(b,null,{default:u(()=>[O(K(m.value),1)]),_:1})]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},bSe=qt(wSe,[["__scopeId","data-v-18a25720"]]),xSe={class:"investigation-name-truncate"},CSe={__name:"search-investigation",props:{modelValue:{type:String,default:""},doctorId:{type:[String,Number],required:!0}},emits:["update:modelValue","investigationSelected"],setup(e,{emit:t}){const n=e,a=t,r=V(!1),s=V([]),o=V(""),i=V(""),c=V(!1);let A=null;const d=v=>{o.value=v};je(i,v=>{typeof v=="string"?(a("update:modelValue",v),a("investigationSelected",{investigationName:v,isUserTyped:!0,isFromHistory:!1})):v&&typeof v=="object"?(a("update:modelValue",v.investigationName),a("investigationSelected",v)):v||(a("update:modelValue",""),a("investigationSelected",null))}),je(o,v=>{if(A&&clearTimeout(A),c.value=!1,!v||v.length<1){r.value=!1,s.value=[];return}A=setTimeout(()=>{f(v)},300)}),je(()=>n.modelValue,v=>{v!==i.value&&(i.value=v)},{immediate:!0});const f=async v=>{if(!(!v||v.length<1)){r.value=!0,c.value=!1;try{const p=await At.get(`consultation/search_investigations/${v}`,{params:{doctor_id:n.doctorId}});s.value=p.data.data.investigations.filter(g=>g.investigationName&&g.investigationName.trim().length>0),(!s.value||s.value.length===0)&&(c.value=!0)}catch(p){console.error("Error fetching investigations:",p),c.value=!0}finally{r.value=!1}}},m=ne(()=>!o.value||o.value.length<1?"Start typing to search consultation history, or type custom investigations":r.value?"Searching consultation history...":c.value?"No matches found in consultation history. You can still type custom investigations.":"");return(v,p)=>{const g=I("v-icon"),y=I("v-tooltip"),w=I("v-list-item"),b=I("v-card-subtitle"),x=I("v-card"),T=I("v-combobox");return R(),ve(T,{modelValue:i.value,"onUpdate:modelValue":p[0]||(p[0]=D=>i.value=D),items:s.value,search:o.value,"onUpdate:search":d,"item-title":"investigationName","item-value":"investigationName",label:"Investigations - search history or type directly",placeholder:"Type investigations or search consultation history...",variant:"underlined",loading:r.value,"no-data-text":m.value,clearable:"","hide-no-data":"","auto-select-first":"",density:"compact",class:"investigation-combobox"},{item:u(({props:D,item:k})=>[l(w,Pe(D,{density:"compact"}),{title:u(()=>[h("span",xSe,K(k.raw.investigationName),1)]),append:u(()=>[l(y,{location:"top"},{activator:u(({props:S})=>[l(g,Pe(S,{size:"small"}),{default:u(()=>[k.raw.isFromHistory?(R(),ve(g,{key:0,icon:"mdi-history",color:"primary"})):ye("",!0)]),_:2},1040)]),default:u(()=>[h("span",null,K(k.raw.isFromHistory?"From your consultation history":"Custom investigation"),1)]),_:2},1024)]),_:2},1040)]),"no-data":u(()=>[l(x,{flat:"",class:"pa-4 text-center"},{default:u(()=>[l(b,null,{default:u(()=>[O(K(m.value),1)]),_:1})]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},SSe=qt(CSe,[["__scopeId","data-v-4f59e225"]]),ESe={class:"patient-advice-multiline"},BSe={__name:"search-patient-advice",props:{doctorId:{type:[String,Number],required:!0}},emits:["patientAdviceSelected"],setup(e,{emit:t}){const n=e,a=t,r=V(!1),s=V([]),o=V(""),i=V(null),c=V(!1);let A=null;const d=g=>{s.value.some(w=>w.patientAdvice===g)||(o.value=g)},f=()=>{(!o.value||o.value.length===0)&&s.value.length===0&&v("")},m=g=>{g&&(a("patientAdviceSelected",g),i.value=null)};je(o,g=>{A&&clearTimeout(A),c.value=!1,A=setTimeout(()=>{v(g||"")},300)});const v=async g=>{r.value=!0,c.value=!1;try{const y=g||"",w=await At.get(`consultation/search_patient_advice/${encodeURIComponent(y)}`,{params:{doctor_id:n.doctorId}});s.value=w.data.data.patientAdvices.filter(b=>b.patientAdvice&&b.patientAdvice.trim().length>0),(!s.value||s.value.length===0)&&(c.value=!0)}catch(y){console.error("Error fetching patient advice:",y),c.value=!0}finally{r.value=!1}},p=ne(()=>!o.value||o.value.length<1?r.value?"Loading recent patient advice...":c.value?"No patient advice found in consultation history. Start typing to search.":"Start typing to search consultation history":r.value?"Searching consultation history...":c.value?"No matches found in consultation history.":"");return(g,y)=>{const w=I("v-icon"),b=I("v-tooltip"),x=I("v-list-item"),T=I("v-card-subtitle"),D=I("v-card"),k=I("v-autocomplete");return R(),ve(k,{modelValue:i.value,"onUpdate:modelValue":[y[0]||(y[0]=S=>i.value=S),m],items:s.value,search:o.value,"onUpdate:search":d,onFocus:f,"item-title":"patientAdvice","item-value":"patientAdvice",label:"Search Patient Advice History",placeholder:"Type to search consultation history...",variant:"outlined",loading:r.value,"no-data-text":p.value,clearable:"","hide-no-data":"","auto-select-first":"",density:"compact","return-object":"",class:"patient-advice-search"},{item:u(({props:S,item:E})=>[l(x,Pe(S,{density:"compact",class:"patient-advice-list-item"}),{title:u(()=>[h("div",ESe,K(E.raw.patientAdvice),1)]),append:u(()=>[l(b,{location:"top"},{activator:u(({props:C})=>[l(w,Pe(C,{size:"small"}),{default:u(()=>[E.raw.isFromHistory?(R(),ve(w,{key:0,icon:"mdi-history",color:"primary"})):ye("",!0)]),_:2},1040)]),default:u(()=>[h("span",null,K(E.raw.isFromHistory?"From your consultation history":"Custom patient advice"),1)]),_:2},1024)]),_:2},1040)]),"no-data":u(()=>[l(D,{flat:"",class:"pa-4 text-center"},{default:u(()=>[l(T,null,{default:u(()=>[O(K(p.value),1)]),_:1})]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},kSe=qt(BSe,[["__scopeId","data-v-daaff071"]]),TSe={class:"template-name template-name-truncate"},ISe={class:"text-caption template-subtitle-truncate"},FSe={key:0},PSe={__name:"diagnosis-template-autocomplete",props:{doctorId:{type:[String,Number],required:!0}},emits:["template-selected"],setup(e,{emit:t}){const n=e,a=t,r=V(null),s=V([]),o=V(""),i=V(!1),c=V(!1);let A=null;const d=w=>{o.value=w},f=()=>{s.value.length===0&&(!o.value||o.value.length===0)&&v()};je(o,w=>{if(A&&clearTimeout(A),!w||w.length===0){v();return}A=setTimeout(()=>{p(w)},300)});const m=w=>{w&&typeof w=="object"&&(console.log("Template selected:",w),a("template-selected",{template:w,autoFillData:{diagnosis:w.diagnosisName,instructions:w.instructions||"",investigations:w.investigations||"",medicines:w.diagnosisMedicines||[]}}),setTimeout(()=>{r.value=null,o.value="",s.value=[]},100))},v=async()=>{i.value=!0;try{const w=await At.get("diagnosis/search_templates/all",{params:{doctor_id:n.doctorId}});s.value=w.data.data.templates||[],c.value=!0}catch(w){console.error("Error fetching all templates:",w),s.value=[],c.value=!0}finally{i.value=!1}},p=async w=>{if(!(!w||w.length===0)){i.value=!0;try{const b=await At.get(`diagnosis/search_templates/${w}`,{params:{doctor_id:n.doctorId}});s.value=b.data.data.templates||[]}catch(b){console.error("Error fetching templates:",b),s.value=[]}finally{i.value=!1}}},g=w=>{const b=[];return w.instructions&&b.push(`Instructions: ${w.instructions.substring(0,30)}...`),w.investigations&&b.push(`Investigations: ${w.investigations.substring(0,20)}...`),w.diagnosisMedicines&&w.diagnosisMedicines.length>0&&b.push(`${w.diagnosisMedicines.length} medicine(s)`),b.join(" | ")||"Template"},y=ne(()=>i.value?!o.value||o.value.length===0?"Loading templates...":"Searching templates...":!o.value||o.value.length===0?c.value&&s.value.length===0?"No saved diagnosis templates found. Create templates during consultations to see them here.":"Click to view your saved diagnosis templates":o.value&&s.value.length===0?`No templates found for "${o.value}". Try a different search term.`:"");return(w,b)=>{const x=I("v-icon"),T=I("v-tooltip"),D=I("v-list-item"),k=I("v-list"),S=I("v-card-subtitle"),E=I("v-card-text"),C=I("v-card"),U=I("v-autocomplete");return R(),ve(U,{modelValue:r.value,"onUpdate:modelValue":[b[0]||(b[0]=F=>r.value=F),m],items:s.value,search:o.value,"onUpdate:search":d,onFocus:f,"item-title":"diagnosisName","item-value":"diagnosisName",label:"select diagnosis template (optional)",placeholder:"Search saved templates...",variant:"outlined",loading:i.value,"no-data-text":y.value,clearable:"","return-object":"",density:"compact","prepend-inner-icon":"mdi-magnify",class:"template-autocomplete"},{item:u(({props:F,item:L})=>[l(k,{density:"compact",class:"template-search-list"},{default:u(()=>[l(D,Pe(F,{class:"template-search-item"}),{title:u(()=>[h("span",TSe,K(L.raw.diagnosisName),1)]),subtitle:u(()=>[h("span",ISe,K(g(L.raw)),1)]),append:u(()=>[l(T,{location:"top"},{activator:u(({props:H})=>[l(x,Pe(H,{size:"small",color:"primary"}),{default:u(()=>[...b[1]||(b[1]=[O(" mdi-bookmark ",-1)])]),_:1},16)]),default:u(()=>[b[2]||(b[2]=h("span",null,"Saved Template",-1))]),_:1})]),_:2},1040)]),_:2},1024)]),"no-data":u(()=>[l(C,{flat:"",class:"pa-4 text-center"},{default:u(()=>[c.value&&s.value.length===0&&!o.value?(R(),Ae("div",FSe,[l(x,{color:"grey-lighten-1",size:"48",class:"mb-2"},{default:u(()=>[...b[3]||(b[3]=[O("mdi-bookmark-outline",-1)])]),_:1}),l(S,{class:"text-wrap mb-2"},{default:u(()=>[...b[4]||(b[4]=[O("No saved diagnosis templates found",-1)])]),_:1}),l(E,{class:"text-caption text-grey"},{default:u(()=>[...b[5]||(b[5]=[O(" Save diagnosis templates during consultations to quickly reuse them here. ",-1)])]),_:1})])):(R(),ve(S,{key:1,class:"text-wrap"},{default:u(()=>[O(K(y.value),1)]),_:1}))]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},DSe=qt(PSe,[["__scopeId","data-v-fd6a829c"]]),USe={class:"font-weight-medium medicine-chip-truncate"},RSe={class:"d-flex align-center"},NSe={class:"medicine-name-truncate"},VSe={key:0,class:"ml-2"},LSe={key:1,class:"ml-2"},MSe={class:"text-center"},OSe={__name:"search-medicine",props:{showInventoryStatus:{type:Boolean,default:!1}},emits:["searchedMedicines","addMedicine"],setup(e,{emit:t}){const n=e,a=t,r=()=>{a("addMedicine")},s=V(!1),o=V([]),i=V(""),c=V([]),A=V(!1);let d=null;je(i,g=>{if(d&&clearTimeout(d),A.value=!1,!g||g.trim().length===0){s.value=!1;return}d=setTimeout(()=>{f(g)},300)}),je(c,g=>{g.length>0&&a("searchedMedicines",g)});const f=async g=>{if(!(!g||g.trim().length===0)){s.value=!0,A.value=!1;try{const y=await xT(g,n.showInventoryStatus);y.error?(console.error("Medicine search error:",y.error),A.value=!0):(o.value=y.data,(!o.value||o.value.length===0)&&(A.value=!0))}catch(y){console.error("Medicine search failed:",y),A.value=!0}finally{s.value=!1}}},m=g=>g.isPharmacy?g.inventoryUnits===void 0||g.inventoryUnits===null?"grey":g.inventoryUnits===0?"error":g.lowStock?"warning":"success":"default",v=g=>g.isPharmacy?g.inventoryUnits===void 0||g.inventoryUnits===null?"No Inventory":g.inventoryUnits===0?g.closestExpiry&&new Date(g.closestExpiry)<new Date?"Expired - No stock":"No stock":`${g.inventoryUnits} units`:"",p=ne(()=>!i.value||i.value.trim().length===0?"Start typing to search medicines":s.value?"Searching medicines...":A.value?"No medicines found matching your search. Try different keywords or create new medicine below.":"");return(g,y)=>{const w=I("v-chip"),b=I("v-list-item-subtitle"),x=I("v-icon"),T=I("v-list-item"),D=I("v-divider"),k=I("v-card-subtitle"),S=I("v-btn"),E=I("v-card"),C=I("v-list"),U=I("v-autocomplete");return R(),ve(U,{multiple:"",clearable:"","clear-on-select":"","hide-selected":"",chips:"","closable-chips":"",density:"compact",variant:"outlined",label:"search medicine by trade name",items:o.value,search:i.value,"onUpdate:search":y[0]||(y[0]=F=>i.value=F),loading:s.value,"item-title":"productName","item-value":"item","return-object":"",modelValue:c.value,"onUpdate:modelValue":y[1]||(y[1]=F=>c.value=F),rounded:"l","prepend-inner-icon":"mdi-magnify","no-data-text":p.value,placeholder:s.value?"Searching...":"Start typing to search medicines"},{chip:u(({props:F,item:L})=>[l(w,Pe(F,{size:"small",class:"mr-1"}),{default:u(()=>[h("span",USe,K(L.raw.productName),1)]),_:2},1040)]),item:u(({props:F,item:L,index:H})=>[l(C,{density:"compact",class:"medicine-search-list"},{default:u(()=>[l(T,Pe(F,{class:"medicine-search-item"}),{title:u(()=>[h("div",RSe,[h("span",NSe,K(L.raw.productName),1),e.showInventoryStatus&&L.raw.isPharmacy?(R(),ve(w,{key:0,color:m(L.raw),size:"x-small",variant:"flat",class:"ml-2"},{default:u(()=>[O(K(v(L.raw)),1)]),_:2},1032,["color"])):ye("",!0)])]),append:u(()=>[e.showInventoryStatus&&L.raw.isPharmacy?(R(),ve(x,{key:0,size:"small"},{default:u(()=>[...y[2]||(y[2]=[O(" mdi-store-plus-outline ",-1)])]),_:1})):L.raw.isLocal?(R(),ve(x,{key:1,size:"small"},{default:u(()=>[...y[3]||(y[3]=[h("img",{src:Wd,alt:"Saved Medicine"},null,-1)])]),_:1})):(R(),ve(x,{key:2,size:"small"},{default:u(()=>[...y[4]||(y[4]=[h("img",{src:gh,alt:"External Medicine"},null,-1)])]),_:1}))]),default:u(()=>[l(b,{class:"medicine-subtitle-truncate"},{default:u(()=>[O(K(L.raw.marketer)+" ",1),e.showInventoryStatus&&L.raw.isPharmacy?(R(),Ae(Ke,{key:0},[L.raw.mrp!==null&&L.raw.mrp!==void 0?(R(),Ae("span",VSe,"  MRP: "+K(Math.round(L.raw.mrp)),1)):ye("",!0),L.raw.discountPercentage!==null&&L.raw.discountPercentage!==void 0?(R(),Ae("span",LSe,"  Discount: "+K(L.raw.discountPercentage)+"% ",1)):ye("",!0)],64)):ye("",!0)]),_:2},1024)]),_:2},1040),H===o.value.length-1?(R(),Ae(Ke,{key:0},[l(D),l(E,{flat:"",class:"pt-1"},{default:u(()=>[l(k,null,{default:u(()=>[...y[5]||(y[5]=[O("Medicine not in list?",-1)])]),_:1}),l(S,{class:"ml-3",variant:"outlined",onClick:r},{default:u(()=>[l(x,{class:"mr-2"},{default:u(()=>[...y[6]||(y[6]=[O("mdi-plus",-1)])]),_:1}),y[7]||(y[7]=O(" Create Medicine ",-1))]),_:1})]),_:1})],64)):ye("",!0)]),_:2},1024)]),"no-data":u(()=>[i.value&&i.value.trim().length>0?(R(),ve(E,{key:0,flat:"",class:"pa-4"},{default:u(()=>[h("div",MSe,[l(k,{class:"mb-2"},{default:u(()=>[O(K(p.value),1)]),_:1}),l(S,{variant:"outlined",color:"primary",onClick:r},{default:u(()=>[l(x,{class:"mr-2"},{default:u(()=>[...y[8]||(y[8]=[O("mdi-plus",-1)])]),_:1}),y[9]||(y[9]=O(" Create Medicine ",-1))]),_:1})])]),_:1})):(R(),ve(E,{key:1,flat:"",class:"pa-4 text-center"},{default:u(()=>[l(k,null,{default:u(()=>[O(K(p.value),1)]),_:1})]),_:1}))]),_:1},8,["items","search","loading","modelValue","no-data-text","placeholder"])}}},FH=qt(OSe,[["__scopeId","data-v-da685ba5"]]),HSe={__name:"search-dosage-schedule",props:{modelValue:{type:String,default:""},medicineId:{type:[String,Number],default:null},productForm:{type:String,default:null},doctorId:{type:[String,Number],required:!0}},emits:["update:modelValue","dosageScheduleSelected"],setup(e,{emit:t}){const n=e,a=t,r=V(!1),s=V([]),o=V(""),i=V(""),c=V(!1);let A=null,d=!0;const f=y=>{o.value=y},m=()=>{(!o.value||o.value.trim().length===0)&&n.medicineId&&p("*")},v=()=>{(!o.value||o.value.trim().length===0)&&n.medicineId&&p("*")};je(i,y=>{typeof y=="string"?(a("update:modelValue",y),a("dosageScheduleSelected",{dosage_schedule:y,isUserTyped:!0,isFromHistory:!1})):y&&typeof y=="object"?(a("update:modelValue",y.dosage_schedule),a("dosageScheduleSelected",y)):y||(a("update:modelValue",""),a("dosageScheduleSelected",null))}),je(o,y=>{if(A&&clearTimeout(A),c.value=!1,!y||y.length<1){r.value=!1,s.value=[];return}A=setTimeout(()=>{p(y)},300)}),je(()=>n.modelValue,y=>{y!==i.value&&(i.value=y)},{immediate:!0}),je([()=>n.medicineId,()=>n.productForm],()=>{o.value&&o.value.length>0?p(o.value):n.medicineId&&p("*")});const p=async y=>{const w=y==="*"||y==="FOCUS";if(!(!w&&(!y||y.length<1))){r.value=!0,c.value=!1;try{const b={};n.medicineId&&(b.medicine_id=n.medicineId),n.productForm&&(b.product_form=n.productForm),n.doctorId&&(b.doctor_id=n.doctorId);const x=w?"*":y,T=await At.get(`/medicine/search_dosage_schedules/${encodeURIComponent(x)}`,{params:b});if(!d)return;if(T.data.success&&T.data.data.dosage_schedules){const D=T.data.data.dosage_schedules.filter(k=>k&&k.trim().length>0).map(k=>({dosage_schedule:k,isFromHistory:!0}));s.value=D,D.length===0&&(c.value=!0)}else s.value=[],c.value=!0}catch(b){if(!d)return;console.error("Error fetching dosage schedules:",b),c.value=!0}finally{d&&(r.value=!1)}}},g=ne(()=>!o.value||o.value.length<1?"Click to see all schedule history, or start typing to search":r.value?"Searching schedule history...":c.value?"No matches found in schedule history. You can still type custom schedule.":"");return va(()=>{d=!1,A&&(clearTimeout(A),A=null)}),(y,w)=>{const b=I("v-icon"),x=I("v-tooltip"),T=I("v-combobox");return R(),ve(T,{modelValue:i.value,"onUpdate:modelValue":w[0]||(w[0]=D=>i.value=D),items:s.value,search:o.value,"onUpdate:search":f,onClick:m,onFocus:v,"item-title":"dosage_schedule","item-value":"dosage_schedule",label:"Dosage Schedule",placeholder:"Type or search dosage...",variant:"outlined",loading:r.value,"no-data-text":g.value,clearable:"","hide-no-data":"","auto-select-first":"",density:"compact",class:"dosage-schedule-combobox","single-line":"","hide-details":"","hide-dropdown-icon":""},{"prepend-inner":u(()=>[l(x,{text:"Dosage Schedule e.g. 1 after breakfast",location:"top"},{activator:u(({props:D})=>[l(b,Pe(D,{size:"small",class:"text-medium-emphasis mr-1"}),{default:u(()=>[...w[1]||(w[1]=[O(" mdi-clock-outline ",-1)])]),_:1},16)]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},$Se=qt(HSe,[["__scopeId","data-v-b0eb0e04"]]),QSe={__name:"search-dosage-duration",props:{modelValue:{type:String,default:""},medicineId:{type:[String,Number],default:null},productForm:{type:String,default:null},doctorId:{type:[String,Number],required:!0}},emits:["update:modelValue","durationSelected"],setup(e,{emit:t}){const n=e,a=t,r=V(!1),s=V([]),o=V(""),i=V(""),c=V(!1);let A=null,d=!0;const f=y=>{o.value=y},m=()=>{(!o.value||o.value.trim().length===0)&&n.medicineId&&p("*")},v=()=>{(!o.value||o.value.trim().length===0)&&n.medicineId&&p("*")};je(i,y=>{typeof y=="string"?(a("update:modelValue",y),a("durationSelected",{duration:y,isUserTyped:!0,isFromHistory:!1})):y&&typeof y=="object"?(a("update:modelValue",y.duration),a("durationSelected",y)):y||(a("update:modelValue",""),a("durationSelected",null))}),je(o,y=>{if(A&&clearTimeout(A),c.value=!1,!y||y.length<1){r.value=!1,s.value=[];return}A=setTimeout(()=>{p(y)},300)}),je(()=>n.modelValue,y=>{y!==i.value&&(i.value=y)},{immediate:!0}),je([()=>n.medicineId,()=>n.productForm],()=>{o.value&&o.value.length>0?p(o.value):n.medicineId&&p("*")});const p=async y=>{const w=y==="*"||y==="FOCUS";if(!(!w&&(!y||y.length<1))){r.value=!0,c.value=!1;try{const b={};n.medicineId&&(b.medicine_id=n.medicineId),n.productForm&&(b.product_form=n.productForm),n.doctorId&&(b.doctor_id=n.doctorId);const x=w?"*":y,T=await At.get(`/medicine/search_dosage_duration/${encodeURIComponent(x)}`,{params:b});if(!d)return;if(T.data.success&&T.data.data.dosage_durations){const D=T.data.data.dosage_durations.filter(k=>k&&k.trim().length>0).map(k=>({duration:k,isFromHistory:!0}));s.value=D,D.length===0&&(c.value=!0)}else s.value=[],c.value=!0}catch(b){if(!d)return;console.error("Error fetching dosage durations:",b),c.value=!0}finally{d&&(r.value=!1)}}},g=ne(()=>!o.value||o.value.length<1?"Click to see all duration history, or start typing to search":r.value?"Searching duration history...":c.value?"No matches found in duration history. You can still type custom duration.":"");return va(()=>{d=!1,A&&(clearTimeout(A),A=null)}),(y,w)=>{const b=I("v-icon"),x=I("v-tooltip"),T=I("v-combobox");return R(),ve(T,{modelValue:i.value,"onUpdate:modelValue":w[0]||(w[0]=D=>i.value=D),items:s.value,search:o.value,"onUpdate:search":f,onClick:m,onFocus:v,"item-title":"duration","item-value":"duration",label:"Duration",placeholder:"Type or search duration...",variant:"outlined",loading:r.value,"no-data-text":g.value,clearable:"","hide-no-data":"","auto-select-first":"",density:"compact",class:"dosage-duration-combobox","single-line":"","hide-details":"","hide-dropdown-icon":""},{"prepend-inner":u(()=>[l(x,{text:"Duration e.g. 5 days",location:"top"},{activator:u(({props:D})=>[l(b,Pe(D,{size:"small",class:"text-medium-emphasis mr-1"}),{default:u(()=>[...w[1]||(w[1]=[O(" mdi-calendar-range ",-1)])]),_:1},16)]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},GSe=qt(QSe,[["__scopeId","data-v-f773064d"]]),zSe={__name:"search-dosage-instructions",props:{modelValue:{type:String,default:""},medicineId:{type:[String,Number],default:null},productForm:{type:String,default:null},doctorId:{type:[String,Number],required:!0}},emits:["update:modelValue","instructionsSelected"],setup(e,{emit:t}){const n=e,a=t,r=V(!1),s=V([]),o=V(""),i=V(""),c=V(!1);let A=null,d=!0;const f=y=>{o.value=y},m=()=>{(!o.value||o.value.trim().length===0)&&n.medicineId&&p("*")},v=()=>{(!o.value||o.value.trim().length===0)&&n.medicineId&&p("*")};je(i,y=>{typeof y=="string"?(a("update:modelValue",y),a("instructionsSelected",{instructions:y,isUserTyped:!0,isFromHistory:!1})):y&&typeof y=="object"?(a("update:modelValue",y.instructions),a("instructionsSelected",y)):y||(a("update:modelValue",""),a("instructionsSelected",null))}),je(o,y=>{if(A&&clearTimeout(A),c.value=!1,!y||y.length<1){r.value=!1,s.value=[];return}A=setTimeout(()=>{p(y)},300)}),je(()=>n.modelValue,y=>{y!==i.value&&(i.value=y)},{immediate:!0}),je([()=>n.medicineId,()=>n.productForm],()=>{o.value&&o.value.length>0?p(o.value):n.medicineId&&p("*")});const p=async y=>{const w=y==="*"||y==="FOCUS";if(!(!w&&(!y||y.length<1))){r.value=!0,c.value=!1;try{const b={};n.medicineId&&(b.medicine_id=n.medicineId),n.productForm&&(b.product_form=n.productForm),n.doctorId&&(b.doctor_id=n.doctorId);const x=w?"*":y,T=await At.get(`/medicine/search_dosage_instructions/${encodeURIComponent(x)}`,{params:b});if(!d)return;if(T.data.success&&T.data.data.dosage_instructions){const D=T.data.data.dosage_instructions.filter(k=>k&&k.trim().length>0).map(k=>({instructions:k,isFromHistory:!0}));s.value=D,D.length===0&&(c.value=!0)}else s.value=[],c.value=!0}catch(b){if(!d)return;console.error("Error fetching dosage instructions:",b),c.value=!0}finally{d&&(r.value=!1)}}},g=ne(()=>!o.value||o.value.length<1?"Click to see all instruction history, or start typing to search":r.value?"Searching instruction history...":c.value?"No matches found in instruction history. You can still type custom instructions.":"");return va(()=>{d=!1,A&&(clearTimeout(A),A=null)}),(y,w)=>{const b=I("v-icon"),x=I("v-tooltip"),T=I("v-combobox");return R(),ve(T,{modelValue:i.value,"onUpdate:modelValue":w[0]||(w[0]=D=>i.value=D),items:s.value,search:o.value,"onUpdate:search":f,onClick:m,onFocus:v,"item-title":"instructions","item-value":"instructions",label:"Instructions",placeholder:"Type or search instructions...",variant:"outlined",loading:r.value,"no-data-text":g.value,clearable:"","hide-no-data":"","auto-select-first":"",density:"compact",class:"dosage-instructions-combobox","single-line":"","hide-details":"","hide-dropdown-icon":""},{"prepend-inner":u(()=>[l(x,{text:"Instructions e.g. on empty stomach",location:"top"},{activator:u(({props:D})=>[l(b,Pe(D,{size:"small",class:"text-medium-emphasis mr-1"}),{default:u(()=>[...w[1]||(w[1]=[O(" mdi-information-outline ",-1)])]),_:1},16)]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},KSe=qt(zSe,[["__scopeId","data-v-73718740"]]),PH={__name:"edit-medicine",props:{medicine:{type:Object,required:!0},mode:{type:String,default:"consultation",validator:e=>["consultation","pharmacy"].includes(e)}},emits:["close","update:medicine"],setup(e,{emit:t}){const n=e,a=t,r=V(pT),s=ne(()=>n.mode==="pharmacy"),o=V({productName:"",marketer:"",saltComposition:"",productForm:"",group:"",hsnCode:"",alertUnits:0}),i=V(!1),c=f=>{f&&(o.value={productName:f.productName||"",marketer:f.marketer||"",saltComposition:f.saltComposition||"",productForm:f.productForm||"",group:f.group||"",hsnCode:f.hsnCode||"",alertUnits:f.alertUnits!==void 0&&f.alertUnits!==null?f.alertUnits:0},console.log("Edit medicine form populated from:",f),console.log("Edit medicine form populated to:",o.value))};je(()=>n.medicine,f=>{c(f)},{immediate:!0,deep:!0}),je(()=>n.medicine?.id,f=>{f&&n.medicine&&c(n.medicine)},{immediate:!0});const A=()=>{a("close")},d=async()=>{const f={productName:o.value.productName,marketer:o.value.marketer||"",saltComposition:o.value.saltComposition||"",productForm:o.value.productForm,group:o.value.group||""};s.value&&(f.hsnCode=o.value.hsnCode||"",f.alertUnits=o.value.alertUnits||0,f.isPharmacy=!0);const m=await TH(n.medicine.id,f);if(m.error)console.error("Error updating medicine:",m.error);else{const v=m.data||{...n.medicine,...f};a("update:medicine",v),A()}};return(f,m)=>{const v=I("v-card-title"),p=I("v-col"),g=I("v-icon"),y=I("v-btn"),w=I("v-row"),b=I("v-card"),x=I("v-text-field"),T=I("v-combobox"),D=I("v-divider"),k=I("v-form");return R(),ve(b,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(w,{"no-gutters":""},{default:u(()=>[l(p,{cols:"12"},{default:u(()=>[l(b,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(w,{"no-gutters":""},{default:u(()=>[l(p,{cols:"11"},{default:u(()=>[l(v,{class:"pa-0 pl-2"},{default:u(()=>[...m[8]||(m[8]=[O("Edit Medicine",-1)])]),_:1})]),_:1}),l(p,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(y,{icon:"",size:"x-small",onClick:A},{default:u(()=>[l(g,null,{default:u(()=>[...m[9]||(m[9]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(w,{"no-gutters":""},{default:u(()=>[l(p,{cols:"12"},{default:u(()=>[l(b,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(k,{modelValue:i.value,"onUpdate:modelValue":m[7]||(m[7]=S=>i.value=S),"validate-on":"blur"},{default:u(()=>[l(w,{"no-gutters":""},{default:u(()=>[l(p,{cols:"12"},{default:u(()=>[l(x,{label:"Trade Name *",density:"compact",modelValue:o.value.productName,"onUpdate:modelValue":m[0]||(m[0]=S=>o.value.productName=S),rules:Qe(fr)},null,8,["modelValue","rules"])]),_:1}),l(p,{cols:"12"},{default:u(()=>[l(T,{label:"Product Form *",density:"compact",items:r.value,rules:Qe(fr),modelValue:o.value.productForm,"onUpdate:modelValue":m[1]||(m[1]=S=>o.value.productForm=S),clearable:""},null,8,["items","rules","modelValue"])]),_:1}),l(p,{cols:"12"},{default:u(()=>[l(x,{label:"Company Name",density:"compact",modelValue:o.value.marketer,"onUpdate:modelValue":m[2]||(m[2]=S=>o.value.marketer=S)},null,8,["modelValue"])]),_:1}),l(p,{cols:"12"},{default:u(()=>[l(x,{label:"Salt Composition",density:"compact",modelValue:o.value.saltComposition,"onUpdate:modelValue":m[3]||(m[3]=S=>o.value.saltComposition=S)},null,8,["modelValue"])]),_:1}),l(p,{cols:"12"},{default:u(()=>[l(x,{label:"Group",density:"compact",modelValue:o.value.group,"onUpdate:modelValue":m[4]||(m[4]=S=>o.value.group=S)},null,8,["modelValue"])]),_:1}),s.value?(R(),Ae(Ke,{key:0},[l(p,{cols:"12"},{default:u(()=>[l(x,{label:"HSN Code",density:"compact",modelValue:o.value.hsnCode,"onUpdate:modelValue":m[5]||(m[5]=S=>o.value.hsnCode=S),hint:"4-8 digits, alphanumeric","persistent-hint":""},null,8,["modelValue"])]),_:1}),l(p,{cols:"12"},{default:u(()=>[l(x,{label:"Alert Units",density:"compact",type:"number",modelValue:o.value.alertUnits,"onUpdate:modelValue":m[6]||(m[6]=S=>o.value.alertUnits=S),modelModifiers:{number:!0},hint:"Low stock alert threshold","persistent-hint":"",rules:[S=>S>=0||"Must be 0 or greater"]},null,8,["modelValue","rules"])]),_:1})],64)):ye("",!0)]),_:1}),l(D),l(w,{"no-gutters":""},{default:u(()=>[l(p,{cols:"2"}),l(p,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(y,{variant:"outlined",onClick:d,disabled:!i.value},{default:u(()=>[...m[10]||(m[10]=[O("Update",-1)])]),_:1},8,["disabled"])]),_:1}),l(p,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},CT={__name:"create-medicine",props:{mode:{type:String,default:"consultation",validator:e=>["consultation","pharmacy"].includes(e)}},emits:["close","update:medicinelist","medicine-created"],setup(e,{emit:t}){const n=e,a=t,r=V(pT),s=V({productName:"",marketer:"",saltComposition:"",productForm:"",group:"",hsnCode:"",alertUnits:0}),o=ne(()=>n.mode==="pharmacy"),i=V(!1),c=()=>{a("close")},A=async d=>{const f={productName:d.productName,marketer:d.marketer||"",saltComposition:d.saltComposition||"",productForm:d.productForm,group:d.group||""};o.value&&(f.hsnCode=d.hsnCode||"",f.alertUnits=d.alertUnits||0,f.isPharmacy=!0);const m=await bT(f);m.error?console.error("Error creating medicine:",m.error):(a("update:medicinelist",m.data),a("medicine-created",m.data),c())};return(d,f)=>{const m=I("v-card-title"),v=I("v-col"),p=I("v-icon"),g=I("v-btn"),y=I("v-row"),w=I("v-card"),b=I("v-text-field"),x=I("v-combobox"),T=I("v-divider"),D=I("v-form");return R(),ve(w,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(y,{"no-gutters":""},{default:u(()=>[l(v,{cols:"12"},{default:u(()=>[l(w,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(y,{"no-gutters":""},{default:u(()=>[l(v,{cols:"11"},{default:u(()=>[l(m,{class:"pa-0 pl-2"},{default:u(()=>[...f[9]||(f[9]=[O("Create New Medicine",-1)])]),_:1})]),_:1}),l(v,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(g,{icon:"",size:"x-small",onClick:c},{default:u(()=>[l(p,null,{default:u(()=>[...f[10]||(f[10]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(y,{"no-gutters":""},{default:u(()=>[l(v,{cols:"12"},{default:u(()=>[l(w,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(D,{modelValue:i.value,"onUpdate:modelValue":f[8]||(f[8]=k=>i.value=k),"validate-on":"blur"},{default:u(()=>[l(y,{"no-gutters":""},{default:u(()=>[l(v,{cols:"12"},{default:u(()=>[l(b,{label:"Trade Name *",density:"compact",modelValue:s.value.productName,"onUpdate:modelValue":f[0]||(f[0]=k=>s.value.productName=k),rules:Qe(fr)},null,8,["modelValue","rules"])]),_:1}),l(v,{cols:"12"},{default:u(()=>[l(x,{label:"Product Form *",density:"compact",items:r.value,rules:Qe(fr),modelValue:s.value.productForm,"onUpdate:modelValue":f[1]||(f[1]=k=>s.value.productForm=k),clearable:""},null,8,["items","rules","modelValue"])]),_:1}),l(v,{cols:"12"},{default:u(()=>[l(b,{label:"Company Name",density:"compact",modelValue:s.value.marketer,"onUpdate:modelValue":f[2]||(f[2]=k=>s.value.marketer=k)},null,8,["modelValue"])]),_:1}),l(v,{cols:"12"},{default:u(()=>[l(b,{label:"Salt Composition",density:"compact",modelValue:s.value.saltComposition,"onUpdate:modelValue":f[3]||(f[3]=k=>s.value.saltComposition=k)},null,8,["modelValue"])]),_:1}),l(v,{cols:"12"},{default:u(()=>[l(b,{label:"Group",density:"compact",modelValue:s.value.group,"onUpdate:modelValue":f[4]||(f[4]=k=>s.value.group=k)},null,8,["modelValue"])]),_:1}),o.value?(R(),Ae(Ke,{key:0},[l(v,{cols:"12"},{default:u(()=>[l(b,{label:"HSN Code",density:"compact",modelValue:s.value.hsnCode,"onUpdate:modelValue":f[5]||(f[5]=k=>s.value.hsnCode=k),hint:"4-8 digits, alphanumeric","persistent-hint":""},null,8,["modelValue"])]),_:1}),l(v,{cols:"12"},{default:u(()=>[l(b,{label:"Alert Units",density:"compact",type:"number",modelValue:s.value.alertUnits,"onUpdate:modelValue":f[6]||(f[6]=k=>s.value.alertUnits=k),modelModifiers:{number:!0},hint:"Low stock alert threshold","persistent-hint":"",rules:[k=>k>=0||"Must be 0 or greater"]},null,8,["modelValue","rules"])]),_:1})],64)):ye("",!0)]),_:1}),l(T),l(y,{"no-gutters":""},{default:u(()=>[l(v,{cols:"2"}),l(v,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(g,{variant:"outlined",onClick:f[7]||(f[7]=k=>A(s.value)),disabled:!i.value},{default:u(()=>[...f[11]||(f[11]=[O("Create",-1)])]),_:1},8,["disabled"])]),_:1}),l(v,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},WSe={class:"transcription-container pa-4"},jSe={key:0,class:"text-center"},qSe={key:1,class:"text-center"},YSe={key:2,class:"text-center"},XSe={key:3,class:"transcription-text"},JSe={class:"text-body-1 mb-0 text-white"},ZSe={key:4,class:"text-center text-medium-emphasis"},eEe={key:0,class:"d-flex justify-center mb-4"},tEe={__name:"dictation-modal",props:{modelValue:{type:Boolean,default:!1},currentText:{type:String,default:""},label:{type:String,default:"Dictation"}},emits:["update:modelValue","transcriptionComplete","transcriptionUpdate"],setup(e,{emit:t}){const n=e,a=t,r=V(!1),s=V(!1),o=V(!1),i=V(!1),c=V("");window.dictationModalActive=!1;let A=null,d=null,f=null,m=null;je(()=>n.modelValue,k=>{r.value=k,window.dictationModalActive=k,k&&(c.value="",setTimeout(()=>{b()},300))}),je(r,k=>{a("update:modelValue",k),window.dictationModalActive=k,k||D()});const v=()=>o.value?"Requesting permission...":i.value?"Connecting...":s.value?"Recording...":"Processing...",p=k=>{if(!r.value)return;const S=k.target;S&&(S.isContentEditable||["INPUT","TEXTAREA","SELECT"].includes(S.tagName))||k.repeat||(window.dictationModalActive=!0,k.key==="Enter"?(k.preventDefault(),k.stopPropagation(),k.stopImmediatePropagation(),s.value?x():T()):k.key==="Escape"&&(k.preventDefault(),k.stopPropagation(),k.stopImmediatePropagation(),s.value&&x()),setTimeout(()=>{window.dictationModalActive=!1},10))};dn(()=>{document.addEventListener("keydown",p,{capture:!0})});const g=()=>{if(m&&(clearTimeout(m),m=null),A){if(A.readyState===WebSocket.OPEN)try{A.send(JSON.stringify({action:"close"}))}catch(k){console.warn("Error sending close message to WebSocket:",k)}A.close(),A=null}};Ii(()=>{document.removeEventListener("keydown",p,{capture:!0}),g(),D()});const y=async()=>{try{return"permissions"in navigator?(await navigator.permissions.query({name:"microphone"})).state:"unknown"}catch(k){return console.log("Permissions API not available:",k),"unknown"}},w=async()=>{try{return(await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}})).getTracks().forEach(S=>S.stop()),!0}catch(k){throw console.error("Failed to get microphone access:",k),k}},b=async()=>{if(!(s.value||o.value||i.value))try{if(o.value=!0,await y()==="denied"){alert("Microphone access is blocked. Please enable microphone permissions in your browser settings and refresh the page.");return}await w(),f=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:16e3}}),o.value=!1,i.value=!0,c.value="";const S=Qre();A=new WebSocket(S),m=setTimeout(()=>{A.readyState!==WebSocket.OPEN&&(console.error("WebSocket connection timeout"),alert("Connection timeout. Please check your network connection and try again."),D(),T())},1e4),A.onopen=()=>{m&&(clearTimeout(m),m=null),A.send(JSON.stringify({action:"open"})),d=new MediaRecorder(f),d.ondataavailable=E=>{if(E.data.size>0&&A.readyState===WebSocket.OPEN){const C=new FileReader;C.onload=()=>{const U=C.result.split(",")[1];A.send(JSON.stringify({action:"audio_data",data:U}))},C.readAsDataURL(E.data)}},d.start(1e3),i.value=!1,s.value=!0},A.onmessage=E=>{try{const C=JSON.parse(E.data);if(console.log("WebSocket message received:",C),C.status==="transcription")C.type==="interim"?(c.value=C.fullText+(C.text?" "+C.text:""),a("transcriptionUpdate",c.value),console.log("Interim transcription updated:",c.value)):C.type==="final"&&(c.value=C.fullText,a("transcriptionUpdate",c.value),console.log("Final transcription updated:",c.value));else if(C.status==="completed"){console.log("Received transcription:",C.transcription),console.log("Received summary:",C.summary);const U=(C.summary||C.transcription||"").trim();c.value="Processing complete...",setTimeout(()=>{a("transcriptionComplete",U),T()},1e3),A.close()}else C.status==="error"&&(console.error("WebSocket error:",C.message),A.close())}catch{console.log("Received message:",E.data)}},A.onerror=E=>{console.error("WebSocket error:",E),m&&(clearTimeout(m),m=null),i.value=!1,D()},A.onclose=()=>{m&&(clearTimeout(m),m=null),i.value=!1,s.value=!1}}catch(k){console.error("Error starting recording:",k),o.value=!1,i.value=!1,m&&(clearTimeout(m),m=null);let S="Unable to access microphone. ";k.name==="NotAllowedError"?S+="Please allow microphone access in your browser settings and try again.":k.name==="NotFoundError"?S+="No microphone found on this device.":k.name==="NotSupportedError"?S+="Microphone is not supported in this browser.":k.name==="NotReadableError"?S+="Microphone is already in use by another application.":S+="Please check your permissions and try again.",alert(S),T()}},x=()=>{s.value&&(d&&d.state==="recording"&&d.stop(),A&&A.readyState===WebSocket.OPEN&&A.send(JSON.stringify({action:"close"})),s.value=!1)},T=()=>{D(),r.value=!1},D=()=>{m&&(clearTimeout(m),m=null),d&&d.state==="recording"&&d.stop(),f&&(f.getTracks().forEach(k=>k.stop()),f=null),A&&A.readyState===WebSocket.OPEN&&A.close(),A=null,d=null,s.value=!1,o.value=!1,i.value=!1};return(k,S)=>{const E=I("v-icon"),C=I("v-card-title"),U=I("v-col"),F=I("v-btn"),L=I("v-row"),H=I("v-card"),ue=I("v-progress-circular"),ie=I("v-sheet"),Q=I("v-dialog");return R(),ve(Q,{modelValue:r.value,"onUpdate:modelValue":S[0]||(S[0]=X=>r.value=X),persistent:"","max-width":"500px"},{default:u(()=>[l(H,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[l(L,{"no-gutters":""},{default:u(()=>[l(U,{cols:"12"},{default:u(()=>[l(H,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(L,{"no-gutters":""},{default:u(()=>[l(U,{cols:"11"},{default:u(()=>[l(C,{class:"pa-0 pl-2"},{default:u(()=>[l(E,{class:ct([{"recording-pulse":s.value},"mr-2"]),color:s.value?"error":i.value?"warning":"primary"},{default:u(()=>[...S[1]||(S[1]=[O(" mdi-microphone ",-1)])]),_:1},8,["class","color"]),O(" "+K(v()),1)]),_:1})]),_:1}),l(U,{cols:"1"},{default:u(()=>[l(F,{icon:"",size:"x-small",onClick:T},{default:u(()=>[l(E,null,{default:u(()=>[...S[2]||(S[2]=[h("img",{src:nu,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(L,{"no-gutters":""},{default:u(()=>[l(U,{cols:"12"},{default:u(()=>[l(H,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[h("div",WSe,[l(ie,{class:ct(["transcription-display pa-4",{"transcription-active":s.value}]),rounded:"lg",color:"surface-variant","min-height":"150"},{default:u(()=>[o.value?(R(),Ae("div",jSe,[l(ue,{indeterminate:"",color:"primary",class:"mb-3"}),S[3]||(S[3]=h("p",{class:"text-body-1 text-medium-emphasis"},"Requesting microphone permission...",-1))])):i.value?(R(),Ae("div",qSe,[l(ue,{indeterminate:"",color:"primary",class:"mb-3"}),S[4]||(S[4]=h("p",{class:"text-body-1 text-medium-emphasis"},"Connecting to transcription service...",-1))])):s.value&&!c.value?(R(),Ae("div",YSe,[...S[5]||(S[5]=[h("div",{class:"listening-indicator mb-3"},[h("div",{class:"listening-dots"},[h("span"),h("span"),h("span")])],-1),h("p",{class:"text-body-1 text-white"},"Listening... Start speaking now",-1)])])):c.value?(R(),Ae("div",XSe,[h("p",JSe,K(c.value),1)])):(R(),Ae("div",ZSe,[...S[6]||(S[6]=[h("p",{class:"text-body-1"},"Preparing to record...",-1)])]))]),_:1},8,["class"])]),s.value?(R(),Ae("div",eEe,[l(F,{color:"error",variant:"outlined",onClick:x,size:"large",class:"stop-recording-btn"},{default:u(()=>[l(E,null,{default:u(()=>[...S[7]||(S[7]=[O("mdi-stop",-1)])]),_:1}),S[8]||(S[8]=O(" Stop Dictation ",-1))]),_:1})])):ye("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Xp=qt(tEe,[["__scopeId","data-v-c1bafded"]]),nEe=async(e=null,t=null)=>{try{const n={};return e&&(n.date=e),t&&(n.status=t),{data:(await At.get("/pharmacy/bills",{params:n})).data.data.bills||[],error:null}}catch(n){return console.error("Error fetching pharmacy bills:",n),{data:[],error:n}}},DH=async e=>{try{return{data:(await At.get(`/pharmacy/bills/${e}`)).data.data.bill||null,error:null}}catch(t){return console.error("Error fetching pharmacy bill:",t),{data:null,error:t}}},UH=async e=>{try{return{data:(await At.post("/pharmacy/bills",{consultationId:e})).data.data.bill||null,error:null}}catch(t){return console.error("Error creating draft bill:",t),{data:null,error:t}}},aEe=async(e,t,n=0)=>{try{return{data:{success:!0,message:(await At.put(`/pharmacy/bills/${e}`,{items:t,additionalDiscountAmount:n})).data.message},error:null}}catch(a){return console.error("Error updating draft bill:",a),{data:null,error:a}}},rEe=async(e,t=null)=>{try{const n={};return t&&(n.paymentMethod=t.paymentMethod,n.paymentAmount=t.paymentAmount,n.paymentDate=t.paymentDate,n.notes=t.notes),{data:(await At.post(`/pharmacy/bills/${e}/finalize`,n)).data.data.bill||null,error:null}}catch(n){return console.error("Error finalizing bill:",n),{data:null,error:n}}},sEe=async e=>{try{return{data:(await At.post(`/pharmacy/bills/${e}/cancel`,{})).data.data.bill||null,error:null}}catch(t){return console.error("Error cancelling bill:",t),{data:null,error:t}}},Lw=async()=>{try{return{data:(await At.get("/pharmacy/inventory")).data.data.inventory||[],error:null}}catch(e){return console.error("Error fetching pharmacy inventory:",e),{data:[],error:e}}},oEe=async e=>{try{return{data:(await At.get(`/pharmacy/batches/available/${e}`)).data.data.batches||[],error:null}}catch(t){return console.error("Error fetching available batches:",t),{data:[],error:t}}},RH=async e=>{try{return{data:(await At.post("/pharmacy/batches",e)).data.data.batch||null,error:null}}catch(t){return console.error("Error creating batch:",t),{data:null,error:t}}},iEe=async(e,t)=>{try{return{data:(await At.put(`/pharmacy/batches/${e}`,t)).data.data.batch||null,error:null}}catch(n){return console.error("Error updating batch:",n),{data:null,error:n}}},lEe=async(e,t,n,a="stock_correction",r=void 0)=>{try{const s={purchase:1,stock_correction:2},o={medicineBatchId:e,adjustment:t,note:n};return a&&s[a]&&(o.transactionType=s[a]),r&&(o.inwardBillId=r),{data:(await At.post("/pharmacy/inventory/adjust",o)).data.data.transaction||null,error:null}}catch(s){return console.error("Error adjusting stock:",s),{data:null,error:s}}},uEe=async(e,t)=>{try{return{data:(await At.post(`/pharmacy/bills/${e}/return`,{items:t})).data.data||null,error:null}}catch(n){return console.error("Error processing return:",n),{data:null,error:n}}},NH=async()=>{try{return{data:(await At.get("/pharmacy/config")).data.data.config||null,error:null}}catch(e){return console.error("Error fetching pharmacy config:",e),{data:null,error:e}}},cEe=async e=>{try{return{data:(await At.put("/pharmacy/config",e)).data.data.config||null,error:null}}catch(t){return console.error("Error updating pharmacy config:",t),{data:null,error:t}}},dEe=async e=>{try{return{data:(await At.get(`/pharmacy/medicines/search/${encodeURIComponent(e)}`)).data.data.medicines||[],error:null}}catch(t){return console.error("Error searching pharmacy medicines:",t),t.response?.status===404?{data:[],error:null}:{data:[],error:t}}},AEe=async e=>{try{const{updateMedicine:t}=await Tr(async()=>{const{updateMedicine:a}=await Promise.resolve().then(()=>IH);return{updateMedicine:a}},void 0,import.meta.url),n=await t(e,{isPharmacy:!0});return{data:n.data,error:n.error}}catch(t){return console.error("Error marking medicine as pharmacy:",t),{data:null,error:t}}},fEe=async e=>{try{const{updateMedicine:t}=await Tr(async()=>{const{updateMedicine:a}=await Promise.resolve().then(()=>IH);return{updateMedicine:a}},void 0,import.meta.url),n=await t(e,{isPharmacy:!1});return{data:n.data,error:n.error}}catch(t){return console.error("Error unmarking medicine as pharmacy:",t),{data:null,error:t}}},mEe=async(e,t)=>{try{return console.log("Creating pharmacy payment with data:",{billId:e,paymentData:t}),{success:!0,data:(await At.post(`/pharmacy/bills/${e}/payments`,t)).data.data,message:"Payment created successfully"}}catch(n){return console.error("Error creating pharmacy payment:",n),{success:!1,error:{message:n.response?.data?.error||n.message||"Failed to create payment",status:n.response?.status||500}}}},vEe=async e=>{try{console.log("Fetching payments for pharmacy bill ID:",e);const t=await At.get(`/pharmacy/bills/${e}/payments`);return console.log("Raw API response:",t.data),{success:!0,data:t.data.data.payments||[],message:"Payments fetched successfully"}}catch(t){return console.error("Error fetching payments by pharmacy bill:",t),{success:!1,error:{message:t.response?.data?.error||t.message||"Failed to fetch payments",status:t.response?.status||500}}}},hEe=async(e,t)=>{try{return console.log("Deleting pharmacy payment:",{billId:e,paymentId:t}),{success:!0,message:(await At.delete(`/pharmacy/bills/${e}/payments/${t}`)).data.message||"Payment deleted successfully"}}catch(n){return console.error("Error deleting pharmacy payment:",n),{success:!1,error:{message:n.response?.data?.error||n.message||"Failed to delete payment",status:n.response?.status||500}}}},pEe=async e=>{try{return{data:(await At.get(`/pharmacy/batches/${e}/usage-check`)).data.data||null,error:null}}catch(t){return console.error("Error checking batch usage:",t),{data:null,error:t}}},gEe=async e=>{try{return{data:(await At.delete(`/pharmacy/batches/${e}`)).data||null,error:null}}catch(t){return console.error("Error deleting batch:",t),{data:null,error:{message:t.response?.data?.error||t.message||"Failed to delete batch",status:t.response?.status||500}}}},VH=async()=>{try{return{data:(await At.get("/pharmacy/suppliers")).data.data||[],error:null}}catch(e){return console.error("Error fetching pharmacy suppliers:",e),{data:[],error:e}}},yEe=async e=>{try{return{data:(await At.post("/pharmacy/suppliers",e)).data.data||null,error:null}}catch(t){return console.error("Error creating supplier:",t),{data:null,error:t}}},_Ee=async(e,t)=>{try{return{data:(await At.put(`/pharmacy/suppliers/${e}`,t)).data.data||null,error:null}}catch(n){return console.error("Error updating supplier:",n),{data:null,error:n}}},wEe=async(e={})=>{try{const t={};return e.supplierId&&(t.supplierId=e.supplierId),e.identifier&&(t.identifier=e.identifier),{data:(await At.get("/pharmacy/purchase-invoices",{params:t})).data.data||[],error:null}}catch(t){return console.error("Error fetching pharmacy purchase invoices:",t),{data:[],error:t}}},bEe=async e=>{try{return{data:(await At.post("/pharmacy/purchase-invoices",e)).data.data||null,error:null}}catch(t){return console.error("Error creating purchase invoice:",t),{data:null,error:t}}},Eg=async e=>{try{return{data:(await At.get(`/pharmacy/purchase-invoices/${e}`)).data.data||null,error:null}}catch(t){return console.error("Error fetching purchase invoice:",t),{data:null,error:t}}},xEe=async(e,t)=>{try{return{data:(await At.put(`/pharmacy/purchase-invoices/${e}`,t)).data.data||null,error:null}}catch(n){return console.error("Error updating purchase invoice:",n),{data:null,error:n}}},CEe=async()=>{try{return{data:((await At.get("/pharmacy/purchase-invoices")).data.data||[]).map(n=>({id:n.id,identifier:n.pharmacyPurchaseInvoiceIdentifier,date:n.pharmacyPurchaseInvoiceDate,displayText:`${n.pharmacyPurchaseInvoiceIdentifier} (${new Date(n.pharmacyPurchaseInvoiceDate*1e3).toLocaleDateString()})`})),error:null}}catch(e){return console.error("Error fetching purchase invoices for dropdown:",e),{data:[],error:e}}},SEe=async(e,t)=>{try{return{data:(await At.delete(`/pharmacy/purchase-invoices/${e}/batches/${t}`)).data||null,error:null}}catch(n){return console.error("Error removing batch from invoice:",n),{data:null,error:n}}},LH=async e=>{try{return{data:(await At.post("/vitals",e)).data.data.vitals,error:null}}catch(t){return console.error("Error creating vitals:",t),{data:null,error:t}}},EEe=async e=>{try{return{data:(await At.get(`/vitals/consultation/${e}`)).data.data.vitals,error:null}}catch(t){return console.error("Error fetching vitals:",t),{data:null,error:t}}},MH=async(e,t=10,n=0)=>{try{return{data:(await At.get(`/vitals/patient/${e}?limit=${t}&offset=${n}`)).data.data.vitals,error:null}}catch(a){return console.error("Error fetching patient vitals history:",a),{data:[],error:a}}},OH=async(e,t)=>{try{return{data:(await At.put(`/vitals/consultation/${e}`,t)).data.data.vitals,error:null}}catch(n){return console.error("Error updating vitals:",n),{data:null,error:n}}},HH=async(e,t,n)=>{try{const a=await LH({consultationId:e,patientId:t,...n});return a.error&&a.error.response?.status===400?await OH(e,n):a}catch(a){return console.error("Error saving vitals:",a),{data:null,error:a}}},jr=(e,t)=>e==null||e===""?"":`${e} ${t}`,o_=(e,t)=>{if(!t)return{isNormal:null,range:""};const a={pulse:{min:60,max:100,range:"60-100 bpm"},systolicBP:{min:90,max:120,range:"90-120 mmHg"},diastolicBP:{min:60,max:80,range:"60-80 mmHg"},respiratoryRate:{min:12,max:20,range:"12-20 breaths/min"},temperature:{min:36.1,max:37.2,range:"36.1-37.2C"},serumBilirubin:{min:.2,max:1.2,range:"0.2-1.2 mg/dL"},bloodGlucoseFF:{min:70,max:100,range:"70-100 mg/dL"},bloodGlucosePP:{min:0,max:140,range:"<140 mg/dL"},bloodGlucoseRandom:{min:0,max:200,range:"<200 mg/dL"},serumCreatinine:{min:.7,max:1.3,range:"0.7-1.3 mg/dL"}}[e];return a?{isNormal:t>=a.min&&t<=a.max,range:a.range}:{isNormal:null,range:""}},BEe=Object.freeze(Object.defineProperty({__proto__:null,createVitals:LH,fetchVitalsByConsultation:EEe,fetchVitalsByPatient:MH,formatVitalWithUnit:jr,isVitalInNormalRange:o_,saveVitals:HH,updateVitals:OH},Symbol.toStringTag,{value:"Module"})),DE="vitalsPreferences",dp={pulse:!0,bloodPressure:!0,temperature:!0,respiratoryRate:!0,height:!1,weight:!0,serumBilirubin:!1,bloodGlucoseFF:!1,bloodGlucosePP:!1,bloodGlucoseRandom:!1,serumCreatinine:!1},ST=e=>{try{if(!e)return console.warn("Doctor ID is required to get vitals preferences"),{...dp};const t=localStorage.getItem(DE);if(!t)return{...dp};const a=JSON.parse(t)[e];return a?{...dp,...a,weight:!0}:{...dp}}catch(t){return console.error("Error getting vitals preferences:",t),{...dp}}},kEe=(e,t)=>{try{if(!e)return console.error("Doctor ID is required to save vitals preferences"),!1;if(!t||typeof t!="object")return console.error("Valid preferences object is required"),!1;let n={};const a=localStorage.getItem(DE);a&&(n=JSON.parse(a));const r={...t,weight:!0};return n[e]=r,localStorage.setItem(DE,JSON.stringify(n)),console.log(`Vitals preferences saved for doctor ${e}:`,r),!0}catch(n){return console.error("Error saving vitals preferences:",n),!1}},TEe={__name:"add-edit-vitals",props:{consultation:{type:Object,required:!0},patient:{type:Object,required:!0},existingVitals:{type:Object,default:null}},emits:["close","vitals-saved"],setup(e,{emit:t}){const n=e,a=t,r=ra(),s=V(!1),o=V(!1),i=ne(()=>r.state.doctorModule.doctorId),c=V({}),A=()=>{const Q=i.value;Q&&(c.value=ST(Q),console.log("Loaded vitals preferences:",c.value))},d=V({pulse:null,systolicBP:null,diastolicBP:null,respiratoryRate:null,weight:null,height:null,temperature:null,serumBilirubin:null,bloodGlucoseFF:null,bloodGlucosePP:null,bloodGlucoseRandom:null,serumCreatinine:null}),f=ne(()=>!!n.existingVitals),m=ne(()=>Object.values(d.value).some(Q=>Q!=null&&Q!=="")),v=ne(()=>c.value.pulse===!0),p=ne(()=>c.value.bloodPressure===!0),g=ne(()=>c.value.temperature===!0),y=ne(()=>c.value.respiratoryRate===!0),w=ne(()=>!0),b=ne(()=>c.value.height===!0),x=ne(()=>c.value.serumBilirubin===!0),T=ne(()=>c.value.bloodGlucoseFF===!0),D=ne(()=>c.value.bloodGlucosePP===!0),k=ne(()=>c.value.bloodGlucoseRandom===!0),S=ne(()=>c.value.serumCreatinine===!0),E=ne(()=>x.value||T.value||D.value||k.value||S.value),C=[Q=>!Q||!isNaN(Q)&&Q>0||"Must be a positive number"],U=[Q=>!Q||!isNaN(Q)&&Q>0&&Q<50||"Must be a valid temperature"],F=[Q=>!Q||!isNaN(Q)&&Q>=0&&Q<=20||"Must be between 0-20 mg/dL"],L=[Q=>!Q||!isNaN(Q)&&Q>=30&&Q<=600||"Must be between 30-600 mg/dL"],H=[Q=>!Q||!isNaN(Q)&&Q>=.1&&Q<=10||"Must be between 0.1-10 mg/dL"],ue=()=>{a("close")},ie=async()=>{if(m.value){o.value=!0;try{const Q={};Object.keys(d.value).forEach(le=>{const Z=d.value[le];Z!=null&&Z!==""&&(Q[le]=parseFloat(Z))});const X=await HH(n.consultation.id,n.patient.id,Q);X.error?console.error("Error saving vitals:",X.error):(a("vitals-saved",X.data),ue())}catch(Q){console.error("Error saving vitals:",Q)}finally{o.value=!1}}};return dn(()=>{A(),n.existingVitals&&Object.keys(d.value).forEach(Q=>{n.existingVitals[Q]!==null&&n.existingVitals[Q]!==void 0&&(d.value[Q]=n.existingVitals[Q])})}),(Q,X)=>{const le=I("v-card-title"),Z=I("v-col"),re=I("v-icon"),q=I("v-btn"),P=I("v-row"),G=I("v-card"),J=I("v-text-field"),M=I("v-subheader"),te=I("v-divider"),Y=I("v-form");return R(),ve(G,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(P,{"no-gutters":""},{default:u(()=>[l(Z,{cols:"12"},{default:u(()=>[l(G,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(P,{"no-gutters":""},{default:u(()=>[l(Z,{cols:"11"},{default:u(()=>[l(le,{class:"pa-0 pl-2"},{default:u(()=>[O(K(f.value?"Edit Vitals":"Add Vitals"),1)]),_:1})]),_:1}),l(Z,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(q,{icon:"",size:"x-small",onClick:ue},{default:u(()=>[l(re,null,{default:u(()=>[...X[13]||(X[13]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(P,{"no-gutters":""},{default:u(()=>[l(Z,{cols:"12"},{default:u(()=>[l(G,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(Y,{modelValue:s.value,"onUpdate:modelValue":X[12]||(X[12]=W=>s.value=W),"validate-on":"blur"},{default:u(()=>[l(P,{"no-gutters":""},{default:u(()=>[v.value?(R(),ve(Z,{key:0,cols:"6",class:"pr-1"},{default:u(()=>[l(J,{label:"Pulse (bpm)",density:"compact",type:"number",modelValue:d.value.pulse,"onUpdate:modelValue":X[0]||(X[0]=W=>d.value.pulse=W),rules:C,suffix:"bpm",hint:"Normal range: 60-100 bpm","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1})):ye("",!0),y.value?(R(),ve(Z,{key:1,cols:v.value?6:12,class:ct(v.value?"pl-1":"")},{default:u(()=>[l(J,{label:"Respiratory Rate",density:"compact",type:"number",modelValue:d.value.respiratoryRate,"onUpdate:modelValue":X[1]||(X[1]=W=>d.value.respiratoryRate=W),rules:C,suffix:"breaths/min",hint:"Normal range: 12-20 breaths/min","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1},8,["cols","class"])):ye("",!0)]),_:1}),p.value?(R(),ve(P,{key:0,"no-gutters":""},{default:u(()=>[l(Z,{cols:"6",class:"pr-1"},{default:u(()=>[l(J,{label:"Systolic BP",density:"compact",type:"number",modelValue:d.value.systolicBP,"onUpdate:modelValue":X[2]||(X[2]=W=>d.value.systolicBP=W),rules:C,suffix:"mmHg",hint:"Normal: 90-120","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1}),l(Z,{cols:"6",class:"pl-1"},{default:u(()=>[l(J,{label:"Diastolic BP",density:"compact",type:"number",modelValue:d.value.diastolicBP,"onUpdate:modelValue":X[3]||(X[3]=W=>d.value.diastolicBP=W),rules:C,suffix:"mmHg",hint:"Normal: 60-80","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})):ye("",!0),l(P,{"no-gutters":""},{default:u(()=>[w.value?(R(),ve(Z,{key:0,cols:"6",class:"pr-1"},{default:u(()=>[l(J,{label:"Weight",density:"compact",type:"number",modelValue:d.value.weight,"onUpdate:modelValue":X[4]||(X[4]=W=>d.value.weight=W),rules:C,suffix:"kg",clearable:""},null,8,["modelValue"])]),_:1})):ye("",!0),b.value?(R(),ve(Z,{key:1,cols:w.value?6:12,class:ct(w.value?"pl-1":"")},{default:u(()=>[l(J,{label:"Height",density:"compact",type:"number",modelValue:d.value.height,"onUpdate:modelValue":X[5]||(X[5]=W=>d.value.height=W),rules:C,suffix:"cm",clearable:""},null,8,["modelValue"])]),_:1},8,["cols","class"])):ye("",!0)]),_:1}),g.value?(R(),ve(P,{key:1,"no-gutters":""},{default:u(()=>[l(Z,{cols:"6",class:"pr-1"},{default:u(()=>[l(J,{label:"Temperature",density:"compact",type:"number",step:"0.1",modelValue:d.value.temperature,"onUpdate:modelValue":X[6]||(X[6]=W=>d.value.temperature=W),rules:U,suffix:"C",hint:"Normal range: 36.1-37.2C","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})):ye("",!0),E.value?(R(),ve(P,{key:2,"no-gutters":"",class:"mt-4"},{default:u(()=>[l(Z,{cols:"12"},{default:u(()=>[l(M,{class:"text-subtitle-2 font-weight-medium pa-0 mb-2"},{default:u(()=>[...X[14]||(X[14]=[O("Blood Chemistry",-1)])]),_:1})]),_:1})]),_:1})):ye("",!0),x.value||S.value?(R(),ve(P,{key:3,"no-gutters":""},{default:u(()=>[x.value?(R(),ve(Z,{key:0,cols:S.value?6:12,class:ct(S.value?"pr-1":"")},{default:u(()=>[l(J,{label:"Serum Bilirubin",density:"compact",type:"number",step:"0.1",modelValue:d.value.serumBilirubin,"onUpdate:modelValue":X[7]||(X[7]=W=>d.value.serumBilirubin=W),rules:F,suffix:"mg/dL",hint:"Normal range: 0.2-1.2 mg/dL","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1},8,["cols","class"])):ye("",!0),S.value?(R(),ve(Z,{key:1,cols:x.value?6:12,class:ct(x.value?"pl-1":"")},{default:u(()=>[l(J,{label:"Serum Creatinine",density:"compact",type:"number",step:"0.1",modelValue:d.value.serumCreatinine,"onUpdate:modelValue":X[8]||(X[8]=W=>d.value.serumCreatinine=W),rules:H,suffix:"mg/dL",hint:"Normal range: 0.7-1.3 mg/dL","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1},8,["cols","class"])):ye("",!0)]),_:1})):ye("",!0),T.value||D.value||k.value?(R(),ve(P,{key:4,"no-gutters":"",class:"mt-2"},{default:u(()=>[T.value?(R(),ve(Z,{key:0,cols:"4",class:"pr-1"},{default:u(()=>[l(J,{label:"Blood Glucose (FF)",density:"compact",type:"number",modelValue:d.value.bloodGlucoseFF,"onUpdate:modelValue":X[9]||(X[9]=W=>d.value.bloodGlucoseFF=W),rules:L,suffix:"mg/dL",hint:"Normal: 70-100 mg/dL","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1})):ye("",!0),D.value?(R(),ve(Z,{key:1,cols:"4",class:ct([T.value?"px-1":"pr-1",k.value?"":"pl-0"])},{default:u(()=>[l(J,{label:"Blood Glucose (PP)",density:"compact",type:"number",modelValue:d.value.bloodGlucosePP,"onUpdate:modelValue":X[10]||(X[10]=W=>d.value.bloodGlucosePP=W),rules:L,suffix:"mg/dL",hint:"Normal: <140 mg/dL","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1},8,["class"])):ye("",!0),k.value?(R(),ve(Z,{key:2,cols:"4",class:"pl-1"},{default:u(()=>[l(J,{label:"Blood Glucose (Random)",density:"compact",type:"number",modelValue:d.value.bloodGlucoseRandom,"onUpdate:modelValue":X[11]||(X[11]=W=>d.value.bloodGlucoseRandom=W),rules:L,suffix:"mg/dL",hint:"Normal: <200 mg/dL","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1})):ye("",!0)]),_:1})):ye("",!0),l(te,{class:"mt-3"}),l(P,{"no-gutters":""},{default:u(()=>[l(Z,{cols:"2"}),l(Z,{cols:"8",class:"mt-3 d-flex justify-center gap-2"},{default:u(()=>[l(q,{variant:"outlined",onClick:ue},{default:u(()=>[...X[15]||(X[15]=[O("Cancel",-1)])]),_:1}),l(q,{variant:"elevated",color:"primary",onClick:ie,disabled:!m.value,loading:o.value},{default:u(()=>[O(K(f.value?"Update":"Save"),1)]),_:1},8,["disabled","loading"])]),_:1}),l(Z,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},IEe=qt(TEe,[["__scopeId","data-v-7bcda799"]]),FEe={key:0,class:"d-flex justify-center align-center",style:{height:"200px"}},PEe={key:1,class:"text-center pa-4"},DEe={class:"text-error"},UEe={key:2,class:"text-center pa-4"},REe={key:3},NEe={class:"font-weight-medium"},VEe={key:1,class:"text-grey"},LEe={key:1,class:"text-grey"},MEe={key:1,class:"text-grey"},OEe={key:1,class:"text-grey"},HEe={key:0,class:"font-weight-medium"},$Ee={key:1,class:"text-grey"},QEe={key:0,class:"font-weight-medium"},GEe={key:1,class:"text-grey"},zEe={key:1,class:"text-grey"},KEe={key:1,class:"text-grey"},WEe={key:1,class:"text-grey"},jEe={key:1,class:"text-grey"},qEe={key:1,class:"text-grey"},YEe={__name:"vitals-trends",props:{patientId:{type:[String,Number],required:!0},patientName:{type:String,default:"Patient"}},emits:["close"],setup(e){const t=e,n=ra(),a=V([]),r=V(!1),s=V(null),o=ne(()=>n.state.doctorModule.doctorId),i=V({}),c=()=>{const y=o.value;y&&(i.value=ST(y),console.log("Loaded vitals preferences for trends:",i.value))},A=[{title:"Date",key:"date",width:"120px",alwaysShow:!0},{title:"Pulse",key:"pulse",width:"100px",vitalKey:"pulse"},{title:"Blood Pressure",key:"bloodPressure",width:"140px",vitalKey:"bloodPressure"},{title:"Temperature",key:"temperature",width:"120px",vitalKey:"temperature"},{title:"Respiratory Rate",key:"respiratoryRate",width:"140px",vitalKey:"respiratoryRate"},{title:"Weight",key:"weight",width:"100px",alwaysShow:!0},{title:"Height",key:"height",width:"100px",vitalKey:"height"},{title:"Serum Bilirubin",key:"serumBilirubin",width:"140px",vitalKey:"serumBilirubin"},{title:"Blood Glucose FF",key:"bloodGlucoseFF",width:"140px",vitalKey:"bloodGlucoseFF"},{title:"Blood Glucose PP",key:"bloodGlucosePP",width:"140px",vitalKey:"bloodGlucosePP"},{title:"Blood Glucose Random",key:"bloodGlucoseRandom",width:"160px",vitalKey:"bloodGlucoseRandom"},{title:"Serum Creatinine",key:"serumCreatinine",width:"140px",vitalKey:"serumCreatinine"}],d=ne(()=>A.filter(y=>{if(y.alwaysShow)return!0;const w=y.vitalKey;return i.value[w]===!0})),f=ne(()=>a.value.map(y=>({date:y.createdAt,pulse:y.pulse,systolicBP:y.systolicBP,diastolicBP:y.diastolicBP,temperature:y.temperature,respiratoryRate:y.respiratoryRate,weight:y.weight,height:y.height,bloodPressure:y.systolicBP&&y.diastolicBP?`${y.systolicBP}/${y.diastolicBP}`:null,serumBilirubin:y.serumBilirubin,bloodGlucoseFF:y.bloodGlucoseFF,bloodGlucosePP:y.bloodGlucosePP,bloodGlucoseRandom:y.bloodGlucoseRandom,serumCreatinine:y.serumCreatinine}))),m=async()=>{if(!t.patientId){s.value="Patient ID is required";return}r.value=!0,s.value=null;try{const y=await MH(t.patientId,50,0);if(y.error)throw new Error(y.error.message||"Failed to fetch vitals history");a.value=y.data||[]}catch(y){console.error("Error fetching vitals history:",y),s.value=y.message||"Failed to fetch vitals history"}finally{r.value=!1}},v=y=>{if(!y)return"";try{return er(y)}catch(w){return console.error("Error formatting date:",y,w),y||""}},p=(y,w)=>{const b=o_(y,w);return b.isNormal===null?"grey":b.isNormal?"success":"warning"},g=(y,w)=>{const b=o_("systolicBP",y),x=o_("diastolicBP",w);return b.isNormal===null||x.isNormal===null?"grey":b.isNormal&&x.isNormal?"success":"warning"};return dn(()=>{c(),m()}),(y,w)=>{const b=I("v-card-title"),x=I("v-col"),T=I("v-icon"),D=I("v-btn"),k=I("v-row"),S=I("v-card"),E=I("v-progress-circular"),C=I("v-chip"),U=I("v-data-table");return R(),ve(S,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[l(k,{"no-gutters":""},{default:u(()=>[l(x,{cols:"12"},{default:u(()=>[l(S,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(k,{"no-gutters":""},{default:u(()=>[l(x,{cols:"11"},{default:u(()=>[l(b,{class:"pa-0 pl-2"},{default:u(()=>[O("Vitals Trends - "+K(e.patientName),1)]),_:1})]),_:1}),l(x,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(D,{icon:"",size:"x-small",onClick:w[0]||(w[0]=F=>y.$emit("close"))},{default:u(()=>[l(T,null,{default:u(()=>[...w[1]||(w[1]=[h("img",{src:nu,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(k,{"no-gutters":""},{default:u(()=>[l(x,{cols:"12"},{default:u(()=>[l(S,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[r.value?(R(),Ae("div",FEe,[l(E,{indeterminate:"",color:"primary"})])):s.value?(R(),Ae("div",PEe,[l(T,{color:"error",size:"48",class:"mb-2"},{default:u(()=>[...w[2]||(w[2]=[O("mdi-alert-circle",-1)])]),_:1}),h("p",DEe,K(s.value),1),l(D,{onClick:m,color:"primary",variant:"outlined"},{default:u(()=>[...w[3]||(w[3]=[O(" Try Again ",-1)])]),_:1})])):!a.value||a.value.length===0?(R(),Ae("div",UEe,[l(T,{color:"grey",size:"48",class:"mb-2"},{default:u(()=>[...w[4]||(w[4]=[O("mdi-chart-line-variant",-1)])]),_:1}),w[5]||(w[5]=h("p",{class:"text-grey"},"No vitals history found for this patient",-1))])):(R(),Ae("div",REe,[l(U,{headers:d.value,items:f.value,"items-per-page":10,class:"elevation-1",density:"compact"},Ev({"item.date":u(({item:F})=>[h("span",NEe,K(v(F.date)),1)]),"item.weight":u(({item:F})=>[F.weight?(R(),Ae("span",HEe,K(Qe(jr)(F.weight,"kg")),1)):(R(),Ae("span",$Ee,"-"))]),_:2},[i.value.pulse?{name:"item.pulse",fn:u(({item:F})=>[F.pulse?(R(),ve(C,{key:0,color:p("pulse",F.pulse),size:"small",variant:"tonal"},{default:u(()=>[O(K(Qe(jr)(F.pulse,"bpm")),1)]),_:2},1032,["color"])):(R(),Ae("span",VEe,"-"))]),key:"0"}:void 0,i.value.bloodPressure?{name:"item.bloodPressure",fn:u(({item:F})=>[F.systolicBP&&F.diastolicBP?(R(),ve(C,{key:0,color:g(F.systolicBP,F.diastolicBP),size:"small",variant:"tonal"},{default:u(()=>[O(K(F.systolicBP)+"/"+K(F.diastolicBP)+" mmHg ",1)]),_:2},1032,["color"])):(R(),Ae("span",LEe,"-"))]),key:"1"}:void 0,i.value.temperature?{name:"item.temperature",fn:u(({item:F})=>[F.temperature?(R(),ve(C,{key:0,color:p("temperature",F.temperature),size:"small",variant:"tonal"},{default:u(()=>[O(K(Qe(jr)(F.temperature,"C")),1)]),_:2},1032,["color"])):(R(),Ae("span",MEe,"-"))]),key:"2"}:void 0,i.value.respiratoryRate?{name:"item.respiratoryRate",fn:u(({item:F})=>[F.respiratoryRate?(R(),ve(C,{key:0,color:p("respiratoryRate",F.respiratoryRate),size:"small",variant:"tonal"},{default:u(()=>[O(K(Qe(jr)(F.respiratoryRate,"breaths/min")),1)]),_:2},1032,["color"])):(R(),Ae("span",OEe,"-"))]),key:"3"}:void 0,i.value.height?{name:"item.height",fn:u(({item:F})=>[F.height?(R(),Ae("span",QEe,K(Qe(jr)(F.height,"cm")),1)):(R(),Ae("span",GEe,"-"))]),key:"4"}:void 0,i.value.serumBilirubin?{name:"item.serumBilirubin",fn:u(({item:F})=>[F.serumBilirubin?(R(),ve(C,{key:0,color:p("serumBilirubin",F.serumBilirubin),size:"small",variant:"tonal"},{default:u(()=>[O(K(Qe(jr)(F.serumBilirubin,"mg/dL")),1)]),_:2},1032,["color"])):(R(),Ae("span",zEe,"-"))]),key:"5"}:void 0,i.value.bloodGlucoseFF?{name:"item.bloodGlucoseFF",fn:u(({item:F})=>[F.bloodGlucoseFF?(R(),ve(C,{key:0,color:p("bloodGlucoseFF",F.bloodGlucoseFF),size:"small",variant:"tonal"},{default:u(()=>[O(K(Qe(jr)(F.bloodGlucoseFF,"mg/dL")),1)]),_:2},1032,["color"])):(R(),Ae("span",KEe,"-"))]),key:"6"}:void 0,i.value.bloodGlucosePP?{name:"item.bloodGlucosePP",fn:u(({item:F})=>[F.bloodGlucosePP?(R(),ve(C,{key:0,color:p("bloodGlucosePP",F.bloodGlucosePP),size:"small",variant:"tonal"},{default:u(()=>[O(K(Qe(jr)(F.bloodGlucosePP,"mg/dL")),1)]),_:2},1032,["color"])):(R(),Ae("span",WEe,"-"))]),key:"7"}:void 0,i.value.bloodGlucoseRandom?{name:"item.bloodGlucoseRandom",fn:u(({item:F})=>[F.bloodGlucoseRandom?(R(),ve(C,{key:0,color:p("bloodGlucoseRandom",F.bloodGlucoseRandom),size:"small",variant:"tonal"},{default:u(()=>[O(K(Qe(jr)(F.bloodGlucoseRandom,"mg/dL")),1)]),_:2},1032,["color"])):(R(),Ae("span",jEe,"-"))]),key:"8"}:void 0,i.value.serumCreatinine?{name:"item.serumCreatinine",fn:u(({item:F})=>[F.serumCreatinine?(R(),ve(C,{key:0,color:p("serumCreatinine",F.serumCreatinine),size:"small",variant:"tonal"},{default:u(()=>[O(K(Qe(jr)(F.serumCreatinine,"mg/dL")),1)]),_:2},1032,["color"])):(R(),Ae("span",qEe,"-"))]),key:"9"}:void 0]),1032,["headers","items"])]))]),_:1})]),_:1})]),_:1})]),_:1})}}},XEe=qt(YEe,[["__scopeId","data-v-145a88d7"]]),JEe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M21,17H7V3H21M21,1H7A2,2%200%200,0%205,3V17A2,2%200%200,0%207,19H21A2,2%200%200,0%2023,17V3A2,2%200%200,0%2021,1M3,5H1V21A2,2%200%200,0%203,23H19V21H3M15.96,10.29L13.21,13.83L11.25,11.47L8.5,15H19.5L15.96,10.29Z'%20/%3e%3c/svg%3e",qi={MAX_FILE_SIZE:25*1024*1024,MAX_FILES:15,ACCEPTED_IMAGE_TYPES:["image/jpeg","image/jpg","image/png","image/gif","image/bmp","image/webp"],ACCEPTED_DOCUMENT_TYPES:["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","text/csv"],ACCEPTED_VIDEO_TYPES:["video/mp4","video/avi","video/mov","video/wmv"]},yv=e=>{if(e===0)return"0 B";const t=1024,n=["B","KB","MB","GB"],a=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,a)).toFixed(2))+" "+n[a]},ZEe=e=>qi.ACCEPTED_IMAGE_TYPES.includes(e)?"image":qi.ACCEPTED_DOCUMENT_TYPES.includes(e)?"document":qi.ACCEPTED_VIDEO_TYPES.includes(e)?"video":"other",eBe=e=>{if(e.size>qi.MAX_FILE_SIZE)return{success:!1,error:`File "${e.name}" is too large. Maximum size is ${yv(qi.MAX_FILE_SIZE)}. Current size: ${yv(e.size)}`,type:"file_size"};const t=ZEe(e.type);return t==="other"?{success:!1,error:`File "${e.name}" has unsupported file type: ${e.type}. Please use medical image formats (JPEG, PNG, etc.) or documents (PDF, Word, etc.)`,type:"file_type"}:{success:!0,file:e,category:t,size:e.size,formattedSize:yv(e.size)}},tBe=e=>{const t=Array.from(e||[]);if(t.length>qi.MAX_FILES)return{success:!1,error:`Too many files selected. Maximum allowed: ${qi.MAX_FILES}. Selected: ${t.length}`,type:"file_count",validFiles:[],errors:[]};const n=[],a=[];let r=0;t.forEach((o,i)=>{const c=eBe(o);c.success?(n.push({file:o,index:i,category:c.category,size:c.size,formattedSize:c.formattedSize}),r+=o.size):a.push({index:i,fileName:o.name,error:c.error,type:c.type})});const s={totalFiles:t.length,validFiles:n.length,invalidFiles:a.length,totalSize:r,formattedTotalSize:yv(r),categories:{}};return n.forEach(o=>{s.categories[o.category]=(s.categories[o.category]||0)+1}),{success:a.length===0,validFiles:n,errors:a,summary:s,hasWarnings:n.length>0&&a.length>0}},nBe=e=>{const t=[];if(e.success){const{summary:n}=e;t.push({type:"success",title:"Files Ready for Upload",message:`${n.validFiles} file(s) selected (${n.formattedTotalSize})`});const a=Object.keys(n.categories);if(a.length>1){const r=a.map(s=>`${n.categories[s]} ${s}${n.categories[s]>1?"s":""}`).join(", ");t.push({type:"info",title:"File Types",message:r})}}else e.hasWarnings?t.push({type:"warning",title:"Some Files Cannot Be Uploaded",message:`${e.validFiles.length} valid, ${e.errors.length} invalid`}):t.push({type:"error",title:"Upload Not Possible",message:"All selected files have validation errors"});return e.errors.forEach(n=>{t.push({type:"error",title:n.fileName,message:n.error})}),t},aBe=()=>({limits:{maxFiles:qi.MAX_FILES,maxFileSize:yv(qi.MAX_FILE_SIZE),maxFileSizeBytes:qi.MAX_FILE_SIZE},acceptedTypes:{images:"JPEG, PNG, GIF, BMP, WebP",documents:"PDF, Word documents, Text files",videos:"MP4, AVI, MOV, WMV"},recommendations:["For medical images: Use high-quality JPEG or PNG format","For X-rays and scans: Ensure images are clear and properly oriented","For documents: PDF format is preferred for reports and forms","Compress large files if possible while maintaining medical image quality"],warnings:[`Files larger than ${yv(qi.MAX_FILE_SIZE)} will be rejected`,`Maximum ${qi.MAX_FILES} files can be uploaded at once`,"Unsupported file types will be automatically filtered out"]});function rBe(e,t){return t.forEach((function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach((function(a){if(a!=="default"&&!(a in e)){var r=Object.getOwnPropertyDescriptor(n,a);Object.defineProperty(e,a,r.get?r:{enumerable:!0,get:function(){return n[a]}})}}))})),Object.freeze(e)}function $H(e,t){return new Promise((function(n,a){let r;return sBe(e).then((function(s){try{return r=s,n(new Blob([t.slice(0,2),r,t.slice(2)],{type:"image/jpeg"}))}catch(o){return a(o)}}),a)}))}const sBe=e=>new Promise(((t,n)=>{const a=new FileReader;a.addEventListener("load",(({target:{result:r}})=>{const s=new DataView(r);let o=0;if(s.getUint16(o)!==65496)return n("not a valid JPEG");for(o+=2;;){const i=s.getUint16(o);if(i===65498)break;const c=s.getUint16(o+2);if(i===65505&&s.getUint32(o+4)===1165519206){const A=o+10;let d;switch(s.getUint16(A)){case 18761:d=!0;break;case 19789:d=!1;break;default:return n("TIFF header contains invalid endian")}if(s.getUint16(A+2,d)!==42)return n("TIFF header contains invalid version");const f=s.getUint32(A+4,d),m=A+f+2+12*s.getUint16(A+f,d);for(let v=A+f+2;v<m;v+=12)if(s.getUint16(v,d)==274){if(s.getUint16(v+2,d)!==3)return n("Orientation data type is invalid");if(s.getUint32(v+4,d)!==1)return n("Orientation data count is invalid");s.setUint16(v+8,1,d);break}return t(r.slice(o,o+2+c))}o+=2+c}return t(new Blob)})),a.readAsArrayBuffer(e)}));var l2={},oBe={get exports(){return l2},set exports(e){l2=e}};(function(e){var t,n,a={};oBe.exports=a,a.parse=function(r,s){for(var o=a.bin.readUshort,i=a.bin.readUint,c=0,A={},d=new Uint8Array(r),f=d.length-4;i(d,f)!=101010256;)f--;c=f,c+=4;var m=o(d,c+=4);o(d,c+=2);var v=i(d,c+=2),p=i(d,c+=4);c+=4,c=p;for(var g=0;g<m;g++){i(d,c),c+=4,c+=4,c+=4,i(d,c+=4),v=i(d,c+=4);var y=i(d,c+=4),w=o(d,c+=4),b=o(d,c+2),x=o(d,c+4);c+=6;var T=i(d,c+=8);c+=4,c+=w+b+x,a._readLocal(d,T,A,v,y,s)}return A},a._readLocal=function(r,s,o,i,c,A){var d=a.bin.readUshort,f=a.bin.readUint;f(r,s),d(r,s+=4),d(r,s+=2);var m=d(r,s+=2);f(r,s+=2),f(r,s+=4),s+=4;var v=d(r,s+=8),p=d(r,s+=2);s+=2;var g=a.bin.readUTF8(r,s,v);if(s+=v,s+=p,A)o[g]={size:c,csize:i};else{var y=new Uint8Array(r.buffer,s);if(m==0)o[g]=new Uint8Array(y.buffer.slice(s,s+i));else{if(m!=8)throw"unknown compression method: "+m;var w=new Uint8Array(c);a.inflateRaw(y,w),o[g]=w}}},a.inflateRaw=function(r,s){return a.F.inflate(r,s)},a.inflate=function(r,s){return r[0],r[1],a.inflateRaw(new Uint8Array(r.buffer,r.byteOffset+2,r.length-6),s)},a.deflate=function(r,s){s==null&&(s={level:6});var o=0,i=new Uint8Array(50+Math.floor(1.1*r.length));i[o]=120,i[o+1]=156,o+=2,o=a.F.deflateRaw(r,i,o,s.level);var c=a.adler(r,0,r.length);return i[o+0]=c>>>24&255,i[o+1]=c>>>16&255,i[o+2]=c>>>8&255,i[o+3]=c>>>0&255,new Uint8Array(i.buffer,0,o+4)},a.deflateRaw=function(r,s){s==null&&(s={level:6});var o=new Uint8Array(50+Math.floor(1.1*r.length)),i=a.F.deflateRaw(r,o,i,s.level);return new Uint8Array(o.buffer,0,i)},a.encode=function(r,s){s==null&&(s=!1);var o=0,i=a.bin.writeUint,c=a.bin.writeUshort,A={};for(var d in r){var f=!a._noNeed(d)&&!s,m=r[d],v=a.crc.crc(m,0,m.length);A[d]={cpr:f,usize:m.length,crc:v,file:f?a.deflateRaw(m):m}}for(var d in A)o+=A[d].file.length+30+46+2*a.bin.sizeUTF8(d);o+=22;var p=new Uint8Array(o),g=0,y=[];for(var d in A){var w=A[d];y.push(g),g=a._writeHeader(p,g,d,w,0)}var b=0,x=g;for(var d in A)w=A[d],y.push(g),g=a._writeHeader(p,g,d,w,1,y[b++]);var T=g-x;return i(p,g,101010256),g+=4,c(p,g+=4,b),c(p,g+=2,b),i(p,g+=2,T),i(p,g+=4,x),g+=4,g+=2,p.buffer},a._noNeed=function(r){var s=r.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(s)!=-1},a._writeHeader=function(r,s,o,i,c,A){var d=a.bin.writeUint,f=a.bin.writeUshort,m=i.file;return d(r,s,c==0?67324752:33639248),s+=4,c==1&&(s+=2),f(r,s,20),f(r,s+=2,0),f(r,s+=2,i.cpr?8:0),d(r,s+=2,0),d(r,s+=4,i.crc),d(r,s+=4,m.length),d(r,s+=4,i.usize),f(r,s+=4,a.bin.sizeUTF8(o)),f(r,s+=2,0),s+=2,c==1&&(s+=2,s+=2,d(r,s+=6,A),s+=4),s+=a.bin.writeUTF8(r,s,o),c==0&&(r.set(m,s),s+=m.length),s},a.crc={table:(function(){for(var r=new Uint32Array(256),s=0;s<256;s++){for(var o=s,i=0;i<8;i++)1&o?o=3988292384^o>>>1:o>>>=1;r[s]=o}return r})(),update:function(r,s,o,i){for(var c=0;c<i;c++)r=a.crc.table[255&(r^s[o+c])]^r>>>8;return r},crc:function(r,s,o){return 4294967295^a.crc.update(4294967295,r,s,o)}},a.adler=function(r,s,o){for(var i=1,c=0,A=s,d=s+o;A<d;){for(var f=Math.min(A+5552,d);A<f;)c+=i+=r[A++];i%=65521,c%=65521}return c<<16|i},a.bin={readUshort:function(r,s){return r[s]|r[s+1]<<8},writeUshort:function(r,s,o){r[s]=255&o,r[s+1]=o>>8&255},readUint:function(r,s){return 16777216*r[s+3]+(r[s+2]<<16|r[s+1]<<8|r[s])},writeUint:function(r,s,o){r[s]=255&o,r[s+1]=o>>8&255,r[s+2]=o>>16&255,r[s+3]=o>>24&255},readASCII:function(r,s,o){for(var i="",c=0;c<o;c++)i+=String.fromCharCode(r[s+c]);return i},writeASCII:function(r,s,o){for(var i=0;i<o.length;i++)r[s+i]=o.charCodeAt(i)},pad:function(r){return r.length<2?"0"+r:r},readUTF8:function(r,s,o){for(var i,c="",A=0;A<o;A++)c+="%"+a.bin.pad(r[s+A].toString(16));try{i=decodeURIComponent(c)}catch{return a.bin.readASCII(r,s,o)}return i},writeUTF8:function(r,s,o){for(var i=o.length,c=0,A=0;A<i;A++){var d=o.charCodeAt(A);if((4294967168&d)==0)r[s+c]=d,c++;else if((4294965248&d)==0)r[s+c]=192|d>>6,r[s+c+1]=128|d>>0&63,c+=2;else if((4294901760&d)==0)r[s+c]=224|d>>12,r[s+c+1]=128|d>>6&63,r[s+c+2]=128|d>>0&63,c+=3;else{if((4292870144&d)!=0)throw"e";r[s+c]=240|d>>18,r[s+c+1]=128|d>>12&63,r[s+c+2]=128|d>>6&63,r[s+c+3]=128|d>>0&63,c+=4}}return c},sizeUTF8:function(r){for(var s=r.length,o=0,i=0;i<s;i++){var c=r.charCodeAt(i);if((4294967168&c)==0)o++;else if((4294965248&c)==0)o+=2;else if((4294901760&c)==0)o+=3;else{if((4292870144&c)!=0)throw"e";o+=4}}return o}},a.F={},a.F.deflateRaw=function(r,s,o,i){var c=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][i],A=a.F.U,d=a.F._goodIndex;a.F._hash;var f=a.F._putsE,m=0,v=o<<3,p=0,g=r.length;if(i==0){for(;m<g;)f(s,v,m+(F=Math.min(65535,g-m))==g?1:0),v=a.F._copyExact(r,m,F,s,v+8),m+=F;return v>>>3}var y=A.lits,w=A.strt,b=A.prev,x=0,T=0,D=0,k=0,S=0,E=0;for(g>2&&(w[E=a.F._hash(r,0)]=0),m=0;m<g;m++){if(S=E,m+1<g-2){E=a.F._hash(r,m+1);var C=m+1&32767;b[C]=w[E],w[E]=C}if(p<=m){(x>14e3||T>26697)&&g-m>100&&(p<m&&(y[x]=m-p,x+=2,p=m),v=a.F._writeBlock(m==g-1||p==g?1:0,y,x,k,r,D,m-D,s,v),x=T=k=0,D=m);var U=0;m<g-2&&(U=a.F._bestMatch(r,m,b,S,Math.min(c[2],g-m),c[3]));var F=U>>>16,L=65535&U;if(U!=0){L=65535&U;var H=d(F=U>>>16,A.of0);A.lhst[257+H]++;var ue=d(L,A.df0);A.dhst[ue]++,k+=A.exb[H]+A.dxb[ue],y[x]=F<<23|m-p,y[x+1]=L<<16|H<<8|ue,x+=2,p=m+F}else A.lhst[r[m]]++;T++}}for(D==m&&r.length!=0||(p<m&&(y[x]=m-p,x+=2,p=m),v=a.F._writeBlock(1,y,x,k,r,D,m-D,s,v),x=0,T=0,x=T=k=0,D=m);(7&v)!=0;)v++;return v>>>3},a.F._bestMatch=function(r,s,o,i,c,A){var d=32767&s,f=o[d],m=d-f+32768&32767;if(f==d||i!=a.F._hash(r,s-m))return 0;for(var v=0,p=0,g=Math.min(32767,s);m<=g&&--A!=0&&f!=d;){if(v==0||r[s+v]==r[s+v-m]){var y=a.F._howLong(r,s,m);if(y>v){if(p=m,(v=y)>=c)break;m+2<y&&(y=m+2);for(var w=0,b=0;b<y-2;b++){var x=s-m+b+32768&32767,T=x-o[x]+32768&32767;T>w&&(w=T,f=x)}}}m+=(d=f)-(f=o[d])+32768&32767}return v<<16|p},a.F._howLong=function(r,s,o){if(r[s]!=r[s-o]||r[s+1]!=r[s+1-o]||r[s+2]!=r[s+2-o])return 0;var i=s,c=Math.min(r.length,s+258);for(s+=3;s<c&&r[s]==r[s-o];)s++;return s-i},a.F._hash=function(r,s){return(r[s]<<8|r[s+1])+(r[s+2]<<4)&65535},a.saved=0,a.F._writeBlock=function(r,s,o,i,c,A,d,f,m){var v,p,g,y,w,b,x,T,D,k=a.F.U,S=a.F._putsF,E=a.F._putsE;k.lhst[256]++,p=(v=a.F.getTrees())[0],g=v[1],y=v[2],w=v[3],b=v[4],x=v[5],T=v[6],D=v[7];var C=32+((m+3&7)==0?0:8-(m+3&7))+(d<<3),U=i+a.F.contSize(k.fltree,k.lhst)+a.F.contSize(k.fdtree,k.dhst),F=i+a.F.contSize(k.ltree,k.lhst)+a.F.contSize(k.dtree,k.dhst);F+=14+3*x+a.F.contSize(k.itree,k.ihst)+(2*k.ihst[16]+3*k.ihst[17]+7*k.ihst[18]);for(var L=0;L<286;L++)k.lhst[L]=0;for(L=0;L<30;L++)k.dhst[L]=0;for(L=0;L<19;L++)k.ihst[L]=0;var H=C<U&&C<F?0:U<F?1:2;if(S(f,m,r),S(f,m+1,H),m+=3,H==0){for(;(7&m)!=0;)m++;m=a.F._copyExact(c,A,d,f,m)}else{var ue,ie;if(H==1&&(ue=k.fltree,ie=k.fdtree),H==2){a.F.makeCodes(k.ltree,p),a.F.revCodes(k.ltree,p),a.F.makeCodes(k.dtree,g),a.F.revCodes(k.dtree,g),a.F.makeCodes(k.itree,y),a.F.revCodes(k.itree,y),ue=k.ltree,ie=k.dtree,E(f,m,w-257),E(f,m+=5,b-1),E(f,m+=5,x-4),m+=4;for(var Q=0;Q<x;Q++)E(f,m+3*Q,k.itree[1+(k.ordr[Q]<<1)]);m+=3*x,m=a.F._codeTiny(T,k.itree,f,m),m=a.F._codeTiny(D,k.itree,f,m)}for(var X=A,le=0;le<o;le+=2){for(var Z=s[le],re=Z>>>23,q=X+(8388607&Z);X<q;)m=a.F._writeLit(c[X++],ue,f,m);if(re!=0){var P=s[le+1],G=P>>16,J=P>>8&255,M=255&P;E(f,m=a.F._writeLit(257+J,ue,f,m),re-k.of0[J]),m+=k.exb[J],S(f,m=a.F._writeLit(M,ie,f,m),G-k.df0[M]),m+=k.dxb[M],X+=re}}m=a.F._writeLit(256,ue,f,m)}return m},a.F._copyExact=function(r,s,o,i,c){var A=c>>>3;return i[A]=o,i[A+1]=o>>>8,i[A+2]=255-i[A],i[A+3]=255-i[A+1],A+=4,i.set(new Uint8Array(r.buffer,s,o),A),c+(o+4<<3)},a.F.getTrees=function(){for(var r=a.F.U,s=a.F._hufTree(r.lhst,r.ltree,15),o=a.F._hufTree(r.dhst,r.dtree,15),i=[],c=a.F._lenCodes(r.ltree,i),A=[],d=a.F._lenCodes(r.dtree,A),f=0;f<i.length;f+=2)r.ihst[i[f]]++;for(f=0;f<A.length;f+=2)r.ihst[A[f]]++;for(var m=a.F._hufTree(r.ihst,r.itree,7),v=19;v>4&&r.itree[1+(r.ordr[v-1]<<1)]==0;)v--;return[s,o,m,c,d,v,i,A]},a.F.getSecond=function(r){for(var s=[],o=0;o<r.length;o+=2)s.push(r[o+1]);return s},a.F.nonZero=function(r){for(var s="",o=0;o<r.length;o+=2)r[o+1]!=0&&(s+=(o>>1)+",");return s},a.F.contSize=function(r,s){for(var o=0,i=0;i<s.length;i++)o+=s[i]*r[1+(i<<1)];return o},a.F._codeTiny=function(r,s,o,i){for(var c=0;c<r.length;c+=2){var A=r[c],d=r[c+1];i=a.F._writeLit(A,s,o,i);var f=A==16?2:A==17?3:7;A>15&&(a.F._putsE(o,i,d,f),i+=f)}return i},a.F._lenCodes=function(r,s){for(var o=r.length;o!=2&&r[o-1]==0;)o-=2;for(var i=0;i<o;i+=2){var c=r[i+1],A=i+3<o?r[i+3]:-1,d=i+5<o?r[i+5]:-1,f=i==0?-1:r[i-1];if(c==0&&A==c&&d==c){for(var m=i+5;m+2<o&&r[m+2]==c;)m+=2;(v=Math.min(m+1-i>>>1,138))<11?s.push(17,v-3):s.push(18,v-11),i+=2*v-2}else if(c==f&&A==c&&d==c){for(m=i+5;m+2<o&&r[m+2]==c;)m+=2;var v=Math.min(m+1-i>>>1,6);s.push(16,v-3),i+=2*v-2}else s.push(c,0)}return o>>>1},a.F._hufTree=function(r,s,o){var i=[],c=r.length,A=s.length,d=0;for(d=0;d<A;d+=2)s[d]=0,s[d+1]=0;for(d=0;d<c;d++)r[d]!=0&&i.push({lit:d,f:r[d]});var f=i.length,m=i.slice(0);if(f==0)return 0;if(f==1){var v=i[0].lit;return m=v==0?1:0,s[1+(v<<1)]=1,s[1+(m<<1)]=1,1}i.sort((function(T,D){return T.f-D.f}));var p=i[0],g=i[1],y=0,w=1,b=2;for(i[0]={lit:-1,f:p.f+g.f,l:p,r:g,d:0};w!=f-1;)p=y!=w&&(b==f||i[y].f<i[b].f)?i[y++]:i[b++],g=y!=w&&(b==f||i[y].f<i[b].f)?i[y++]:i[b++],i[w++]={lit:-1,f:p.f+g.f,l:p,r:g};var x=a.F.setDepth(i[w-1],0);for(x>o&&(a.F.restrictDepth(m,o,x),x=o),d=0;d<f;d++)s[1+(m[d].lit<<1)]=m[d].d;return x},a.F.setDepth=function(r,s){return r.lit!=-1?(r.d=s,s):Math.max(a.F.setDepth(r.l,s+1),a.F.setDepth(r.r,s+1))},a.F.restrictDepth=function(r,s,o){var i=0,c=1<<o-s,A=0;for(r.sort((function(f,m){return m.d==f.d?f.f-m.f:m.d-f.d})),i=0;i<r.length&&r[i].d>s;i++){var d=r[i].d;r[i].d=s,A+=c-(1<<o-d)}for(A>>>=o-s;A>0;)(d=r[i].d)<s?(r[i].d++,A-=1<<s-d-1):i++;for(;i>=0;i--)r[i].d==s&&A<0&&(r[i].d--,A++);A!=0&&console.log("debt left")},a.F._goodIndex=function(r,s){var o=0;return s[16|o]<=r&&(o|=16),s[8|o]<=r&&(o|=8),s[4|o]<=r&&(o|=4),s[2|o]<=r&&(o|=2),s[1|o]<=r&&(o|=1),o},a.F._writeLit=function(r,s,o,i){return a.F._putsF(o,i,s[r<<1]),i+s[1+(r<<1)]},a.F.inflate=function(r,s){var o=Uint8Array;if(r[0]==3&&r[1]==0)return s||new o(0);var i=a.F,c=i._bitsF,A=i._bitsE,d=i._decodeTiny,f=i.makeCodes,m=i.codes2map,v=i._get17,p=i.U,g=s==null;g&&(s=new o(r.length>>>2<<3));for(var y,w,b=0,x=0,T=0,D=0,k=0,S=0,E=0,C=0,U=0;b==0;)if(b=c(r,U,1),x=c(r,U+1,2),U+=3,x!=0){if(g&&(s=a.F._check(s,C+(1<<17))),x==1&&(y=p.flmap,w=p.fdmap,S=511,E=31),x==2){T=A(r,U,5)+257,D=A(r,U+5,5)+1,k=A(r,U+10,4)+4,U+=14;for(var F=0;F<38;F+=2)p.itree[F]=0,p.itree[F+1]=0;var L=1;for(F=0;F<k;F++){var H=A(r,U+3*F,3);p.itree[1+(p.ordr[F]<<1)]=H,H>L&&(L=H)}U+=3*k,f(p.itree,L),m(p.itree,L,p.imap),y=p.lmap,w=p.dmap,U=d(p.imap,(1<<L)-1,T+D,r,U,p.ttree);var ue=i._copyOut(p.ttree,0,T,p.ltree);S=(1<<ue)-1;var ie=i._copyOut(p.ttree,T,D,p.dtree);E=(1<<ie)-1,f(p.ltree,ue),m(p.ltree,ue,y),f(p.dtree,ie),m(p.dtree,ie,w)}for(;;){var Q=y[v(r,U)&S];U+=15&Q;var X=Q>>>4;if(!(X>>>8))s[C++]=X;else{if(X==256)break;var le=C+X-254;if(X>264){var Z=p.ldef[X-257];le=C+(Z>>>3)+A(r,U,7&Z),U+=7&Z}var re=w[v(r,U)&E];U+=15&re;var q=re>>>4,P=p.ddef[q],G=(P>>>4)+c(r,U,15&P);for(U+=15&P,g&&(s=a.F._check(s,C+(1<<17)));C<le;)s[C]=s[C++-G],s[C]=s[C++-G],s[C]=s[C++-G],s[C]=s[C++-G];C=le}}}else{(7&U)!=0&&(U+=8-(7&U));var J=4+(U>>>3),M=r[J-4]|r[J-3]<<8;g&&(s=a.F._check(s,C+M)),s.set(new o(r.buffer,r.byteOffset+J,M),C),U=J+M<<3,C+=M}return s.length==C?s:s.slice(0,C)},a.F._check=function(r,s){var o=r.length;if(s<=o)return r;var i=new Uint8Array(Math.max(o<<1,s));return i.set(r,0),i},a.F._decodeTiny=function(r,s,o,i,c,A){for(var d=a.F._bitsE,f=a.F._get17,m=0;m<o;){var v=r[f(i,c)&s];c+=15&v;var p=v>>>4;if(p<=15)A[m]=p,m++;else{var g=0,y=0;p==16?(y=3+d(i,c,2),c+=2,g=A[m-1]):p==17?(y=3+d(i,c,3),c+=3):p==18&&(y=11+d(i,c,7),c+=7);for(var w=m+y;m<w;)A[m]=g,m++}}return c},a.F._copyOut=function(r,s,o,i){for(var c=0,A=0,d=i.length>>>1;A<o;){var f=r[A+s];i[A<<1]=0,i[1+(A<<1)]=f,f>c&&(c=f),A++}for(;A<d;)i[A<<1]=0,i[1+(A<<1)]=0,A++;return c},a.F.makeCodes=function(r,s){for(var o,i,c,A,d=a.F.U,f=r.length,m=d.bl_count,v=0;v<=s;v++)m[v]=0;for(v=1;v<f;v+=2)m[r[v]]++;var p=d.next_code;for(o=0,m[0]=0,i=1;i<=s;i++)o=o+m[i-1]<<1,p[i]=o;for(c=0;c<f;c+=2)(A=r[c+1])!=0&&(r[c]=p[A],p[A]++)},a.F.codes2map=function(r,s,o){for(var i=r.length,c=a.F.U.rev15,A=0;A<i;A+=2)if(r[A+1]!=0)for(var d=A>>1,f=r[A+1],m=d<<4|f,v=s-f,p=r[A]<<v,g=p+(1<<v);p!=g;)o[c[p]>>>15-s]=m,p++},a.F.revCodes=function(r,s){for(var o=a.F.U.rev15,i=15-s,c=0;c<r.length;c+=2){var A=r[c]<<s-r[c+1];r[c]=o[A]>>>i}},a.F._putsE=function(r,s,o){o<<=7&s;var i=s>>>3;r[i]|=o,r[i+1]|=o>>>8},a.F._putsF=function(r,s,o){o<<=7&s;var i=s>>>3;r[i]|=o,r[i+1]|=o>>>8,r[i+2]|=o>>>16},a.F._bitsE=function(r,s,o){return(r[s>>>3]|r[1+(s>>>3)]<<8)>>>(7&s)&(1<<o)-1},a.F._bitsF=function(r,s,o){return(r[s>>>3]|r[1+(s>>>3)]<<8|r[2+(s>>>3)]<<16)>>>(7&s)&(1<<o)-1},a.F._get17=function(r,s){return(r[s>>>3]|r[1+(s>>>3)]<<8|r[2+(s>>>3)]<<16)>>>(7&s)},a.F._get25=function(r,s){return(r[s>>>3]|r[1+(s>>>3)]<<8|r[2+(s>>>3)]<<16|r[3+(s>>>3)]<<24)>>>(7&s)},a.F.U=(t=Uint16Array,n=Uint32Array,{next_code:new t(16),bl_count:new t(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new t(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new t(512),fltree:[],fdmap:new t(32),fdtree:[],lmap:new t(32768),ltree:[],ttree:[],dmap:new t(32768),dtree:[],imap:new t(512),itree:[],rev15:new t(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new t(65536),prev:new t(32768)}),(function(){for(var r=a.F.U,s=0;s<32768;s++){var o=s;o=(4278255360&(o=(4042322160&(o=(3435973836&(o=(2863311530&o)>>>1|(1431655765&o)<<1))>>>2|(858993459&o)<<2))>>>4|(252645135&o)<<4))>>>8|(16711935&o)<<8,r.rev15[s]=(o>>>16|o<<16)>>>17}function i(c,A,d){for(;A--!=0;)c.push(0,d)}for(s=0;s<32;s++)r.ldef[s]=r.of0[s]<<3|r.exb[s],r.ddef[s]=r.df0[s]<<4|r.dxb[s];i(r.fltree,144,8),i(r.fltree,112,9),i(r.fltree,24,7),i(r.fltree,8,8),a.F.makeCodes(r.fltree,9),a.F.codes2map(r.fltree,9,r.flmap),a.F.revCodes(r.fltree,9),i(r.fdtree,32,5),a.F.makeCodes(r.fdtree,5),a.F.codes2map(r.fdtree,5,r.fdmap),a.F.revCodes(r.fdtree,5),i(r.itree,19,0),i(r.ltree,286,0),i(r.dtree,30,0),i(r.ttree,320,0)})()})();var iBe=rBe({__proto__:null,default:l2},[l2]);const wl=(function(){var e={nextZero(d,f){for(;d[f]!=0;)f++;return f},readUshort:(d,f)=>d[f]<<8|d[f+1],writeUshort(d,f,m){d[f]=m>>8&255,d[f+1]=255&m},readUint:(d,f)=>16777216*d[f]+(d[f+1]<<16|d[f+2]<<8|d[f+3]),writeUint(d,f,m){d[f]=m>>24&255,d[f+1]=m>>16&255,d[f+2]=m>>8&255,d[f+3]=255&m},readASCII(d,f,m){let v="";for(let p=0;p<m;p++)v+=String.fromCharCode(d[f+p]);return v},writeASCII(d,f,m){for(let v=0;v<m.length;v++)d[f+v]=m.charCodeAt(v)},readBytes(d,f,m){const v=[];for(let p=0;p<m;p++)v.push(d[f+p]);return v},pad:d=>d.length<2?`0${d}`:d,readUTF8(d,f,m){let v,p="";for(let g=0;g<m;g++)p+=`%${e.pad(d[f+g].toString(16))}`;try{v=decodeURIComponent(p)}catch{return e.readASCII(d,f,m)}return v}};function t(d,f,m,v){const p=f*m,g=s(v),y=Math.ceil(f*g/8),w=new Uint8Array(4*p),b=new Uint32Array(w.buffer),{ctype:x}=v,{depth:T}=v,D=e.readUshort;if(x==6){const Z=p<<2;if(T==8)for(var k=0;k<Z;k+=4)w[k]=d[k],w[k+1]=d[k+1],w[k+2]=d[k+2],w[k+3]=d[k+3];if(T==16)for(k=0;k<Z;k++)w[k]=d[k<<1]}else if(x==2){const Z=v.tabs.tRNS;if(Z==null){if(T==8)for(k=0;k<p;k++){var S=3*k;b[k]=255<<24|d[S+2]<<16|d[S+1]<<8|d[S]}if(T==16)for(k=0;k<p;k++)S=6*k,b[k]=255<<24|d[S+4]<<16|d[S+2]<<8|d[S]}else{var E=Z[0];const re=Z[1],q=Z[2];if(T==8)for(k=0;k<p;k++){var C=k<<2;S=3*k,b[k]=255<<24|d[S+2]<<16|d[S+1]<<8|d[S],d[S]==E&&d[S+1]==re&&d[S+2]==q&&(w[C+3]=0)}if(T==16)for(k=0;k<p;k++)C=k<<2,S=6*k,b[k]=255<<24|d[S+4]<<16|d[S+2]<<8|d[S],D(d,S)==E&&D(d,S+2)==re&&D(d,S+4)==q&&(w[C+3]=0)}}else if(x==3){const Z=v.tabs.PLTE,re=v.tabs.tRNS,q=re?re.length:0;if(T==1)for(var U=0;U<m;U++){var F=U*y,L=U*f;for(k=0;k<f;k++){C=L+k<<2;var H=3*(ue=d[F+(k>>3)]>>7-((7&k)<<0)&1);w[C]=Z[H],w[C+1]=Z[H+1],w[C+2]=Z[H+2],w[C+3]=ue<q?re[ue]:255}}if(T==2)for(U=0;U<m;U++)for(F=U*y,L=U*f,k=0;k<f;k++)C=L+k<<2,H=3*(ue=d[F+(k>>2)]>>6-((3&k)<<1)&3),w[C]=Z[H],w[C+1]=Z[H+1],w[C+2]=Z[H+2],w[C+3]=ue<q?re[ue]:255;if(T==4)for(U=0;U<m;U++)for(F=U*y,L=U*f,k=0;k<f;k++)C=L+k<<2,H=3*(ue=d[F+(k>>1)]>>4-((1&k)<<2)&15),w[C]=Z[H],w[C+1]=Z[H+1],w[C+2]=Z[H+2],w[C+3]=ue<q?re[ue]:255;if(T==8)for(k=0;k<p;k++){var ue;C=k<<2,H=3*(ue=d[k]),w[C]=Z[H],w[C+1]=Z[H+1],w[C+2]=Z[H+2],w[C+3]=ue<q?re[ue]:255}}else if(x==4){if(T==8)for(k=0;k<p;k++){C=k<<2;var ie=d[Q=k<<1];w[C]=ie,w[C+1]=ie,w[C+2]=ie,w[C+3]=d[Q+1]}if(T==16)for(k=0;k<p;k++){var Q;C=k<<2,ie=d[Q=k<<2],w[C]=ie,w[C+1]=ie,w[C+2]=ie,w[C+3]=d[Q+2]}}else if(x==0)for(E=v.tabs.tRNS?v.tabs.tRNS:-1,U=0;U<m;U++){const Z=U*y,re=U*f;if(T==1)for(var X=0;X<f;X++){var le=(ie=255*(d[Z+(X>>>3)]>>>7-(7&X)&1))==255*E?0:255;b[re+X]=le<<24|ie<<16|ie<<8|ie}else if(T==2)for(X=0;X<f;X++)le=(ie=85*(d[Z+(X>>>2)]>>>6-((3&X)<<1)&3))==85*E?0:255,b[re+X]=le<<24|ie<<16|ie<<8|ie;else if(T==4)for(X=0;X<f;X++)le=(ie=17*(d[Z+(X>>>1)]>>>4-((1&X)<<2)&15))==17*E?0:255,b[re+X]=le<<24|ie<<16|ie<<8|ie;else if(T==8)for(X=0;X<f;X++)le=(ie=d[Z+X])==E?0:255,b[re+X]=le<<24|ie<<16|ie<<8|ie;else if(T==16)for(X=0;X<f;X++)ie=d[Z+(X<<1)],le=D(d,Z+(X<<1))==E?0:255,b[re+X]=le<<24|ie<<16|ie<<8|ie}return w}function n(d,f,m,v){const p=s(d),g=Math.ceil(m*p/8),y=new Uint8Array((g+1+d.interlace)*v);return f=d.tabs.CgBI?r(f,y):a(f,y),d.interlace==0?f=o(f,d,0,m,v):d.interlace==1&&(f=(function(b,x){const T=x.width,D=x.height,k=s(x),S=k>>3,E=Math.ceil(T*k/8),C=new Uint8Array(D*E);let U=0;const F=[0,0,4,0,2,0,1],L=[0,4,0,2,0,1,0],H=[8,8,8,4,4,2,2],ue=[8,8,4,4,2,2,1];let ie=0;for(;ie<7;){const X=H[ie],le=ue[ie];let Z=0,re=0,q=F[ie];for(;q<D;)q+=X,re++;let P=L[ie];for(;P<T;)P+=le,Z++;const G=Math.ceil(Z*k/8);o(b,x,U,Z,re);let J=0,M=F[ie];for(;M<D;){let te=L[ie],Y=U+J*G<<3;for(;te<T;){var Q;if(k==1&&(Q=(Q=b[Y>>3])>>7-(7&Y)&1,C[M*E+(te>>3)]|=Q<<7-((7&te)<<0)),k==2&&(Q=(Q=b[Y>>3])>>6-(7&Y)&3,C[M*E+(te>>2)]|=Q<<6-((3&te)<<1)),k==4&&(Q=(Q=b[Y>>3])>>4-(7&Y)&15,C[M*E+(te>>1)]|=Q<<4-((1&te)<<2)),k>=8){const W=M*E+te*S;for(let ee=0;ee<S;ee++)C[W+ee]=b[(Y>>3)+ee]}Y+=k,te+=le}J++,M+=X}Z*re!=0&&(U+=re*(1+G)),ie+=1}return C})(f,d)),f}function a(d,f){return r(new Uint8Array(d.buffer,2,d.length-6),f)}var r=(function(){const d={H:{}};return d.H.N=function(f,m){const v=Uint8Array;let p,g,y=0,w=0,b=0,x=0,T=0,D=0,k=0,S=0,E=0;if(f[0]==3&&f[1]==0)return m||new v(0);const C=d.H,U=C.b,F=C.e,L=C.R,H=C.n,ue=C.A,ie=C.Z,Q=C.m,X=m==null;for(X&&(m=new v(f.length>>>2<<5));y==0;)if(y=U(f,E,1),w=U(f,E+1,2),E+=3,w!=0){if(X&&(m=d.H.W(m,S+(1<<17))),w==1&&(p=Q.J,g=Q.h,D=511,k=31),w==2){b=F(f,E,5)+257,x=F(f,E+5,5)+1,T=F(f,E+10,4)+4,E+=14;let Z=1;for(var le=0;le<38;le+=2)Q.Q[le]=0,Q.Q[le+1]=0;for(le=0;le<T;le++){const P=F(f,E+3*le,3);Q.Q[1+(Q.X[le]<<1)]=P,P>Z&&(Z=P)}E+=3*T,H(Q.Q,Z),ue(Q.Q,Z,Q.u),p=Q.w,g=Q.d,E=L(Q.u,(1<<Z)-1,b+x,f,E,Q.v);const re=C.V(Q.v,0,b,Q.C);D=(1<<re)-1;const q=C.V(Q.v,b,x,Q.D);k=(1<<q)-1,H(Q.C,re),ue(Q.C,re,p),H(Q.D,q),ue(Q.D,q,g)}for(;;){const Z=p[ie(f,E)&D];E+=15&Z;const re=Z>>>4;if(!(re>>>8))m[S++]=re;else{if(re==256)break;{let q=S+re-254;if(re>264){const te=Q.q[re-257];q=S+(te>>>3)+F(f,E,7&te),E+=7&te}const P=g[ie(f,E)&k];E+=15&P;const G=P>>>4,J=Q.c[G],M=(J>>>4)+U(f,E,15&J);for(E+=15&J;S<q;)m[S]=m[S++-M],m[S]=m[S++-M],m[S]=m[S++-M],m[S]=m[S++-M];S=q}}}}else{(7&E)!=0&&(E+=8-(7&E));const Z=4+(E>>>3),re=f[Z-4]|f[Z-3]<<8;X&&(m=d.H.W(m,S+re)),m.set(new v(f.buffer,f.byteOffset+Z,re),S),E=Z+re<<3,S+=re}return m.length==S?m:m.slice(0,S)},d.H.W=function(f,m){const v=f.length;if(m<=v)return f;const p=new Uint8Array(v<<1);return p.set(f,0),p},d.H.R=function(f,m,v,p,g,y){const w=d.H.e,b=d.H.Z;let x=0;for(;x<v;){const T=f[b(p,g)&m];g+=15&T;const D=T>>>4;if(D<=15)y[x]=D,x++;else{let k=0,S=0;D==16?(S=3+w(p,g,2),g+=2,k=y[x-1]):D==17?(S=3+w(p,g,3),g+=3):D==18&&(S=11+w(p,g,7),g+=7);const E=x+S;for(;x<E;)y[x]=k,x++}}return g},d.H.V=function(f,m,v,p){let g=0,y=0;const w=p.length>>>1;for(;y<v;){const b=f[y+m];p[y<<1]=0,p[1+(y<<1)]=b,b>g&&(g=b),y++}for(;y<w;)p[y<<1]=0,p[1+(y<<1)]=0,y++;return g},d.H.n=function(f,m){const v=d.H.m,p=f.length;let g,y,w,b;const x=v.j;for(var T=0;T<=m;T++)x[T]=0;for(T=1;T<p;T+=2)x[f[T]]++;const D=v.K;for(g=0,x[0]=0,y=1;y<=m;y++)g=g+x[y-1]<<1,D[y]=g;for(w=0;w<p;w+=2)b=f[w+1],b!=0&&(f[w]=D[b],D[b]++)},d.H.A=function(f,m,v){const p=f.length,g=d.H.m.r;for(let y=0;y<p;y+=2)if(f[y+1]!=0){const w=y>>1,b=f[y+1],x=w<<4|b,T=m-b;let D=f[y]<<T;const k=D+(1<<T);for(;D!=k;)v[g[D]>>>15-m]=x,D++}},d.H.l=function(f,m){const v=d.H.m.r,p=15-m;for(let g=0;g<f.length;g+=2){const y=f[g]<<m-f[g+1];f[g]=v[y]>>>p}},d.H.M=function(f,m,v){v<<=7&m;const p=m>>>3;f[p]|=v,f[p+1]|=v>>>8},d.H.I=function(f,m,v){v<<=7&m;const p=m>>>3;f[p]|=v,f[p+1]|=v>>>8,f[p+2]|=v>>>16},d.H.e=function(f,m,v){return(f[m>>>3]|f[1+(m>>>3)]<<8)>>>(7&m)&(1<<v)-1},d.H.b=function(f,m,v){return(f[m>>>3]|f[1+(m>>>3)]<<8|f[2+(m>>>3)]<<16)>>>(7&m)&(1<<v)-1},d.H.Z=function(f,m){return(f[m>>>3]|f[1+(m>>>3)]<<8|f[2+(m>>>3)]<<16)>>>(7&m)},d.H.i=function(f,m){return(f[m>>>3]|f[1+(m>>>3)]<<8|f[2+(m>>>3)]<<16|f[3+(m>>>3)]<<24)>>>(7&m)},d.H.m=(function(){const f=Uint16Array,m=Uint32Array;return{K:new f(16),j:new f(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new f(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new m(32),J:new f(512),_:[],h:new f(32),$:[],w:new f(32768),C:[],v:[],d:new f(32768),D:[],u:new f(512),Q:[],r:new f(32768),s:new m(286),Y:new m(30),a:new m(19),t:new m(15e3),k:new f(65536),g:new f(32768)}})(),(function(){const f=d.H.m;for(var m=0;m<32768;m++){let p=m;p=(2863311530&p)>>>1|(1431655765&p)<<1,p=(3435973836&p)>>>2|(858993459&p)<<2,p=(4042322160&p)>>>4|(252645135&p)<<4,p=(4278255360&p)>>>8|(16711935&p)<<8,f.r[m]=(p>>>16|p<<16)>>>17}function v(p,g,y){for(;g--!=0;)p.push(0,y)}for(m=0;m<32;m++)f.q[m]=f.S[m]<<3|f.T[m],f.c[m]=f.p[m]<<4|f.z[m];v(f._,144,8),v(f._,112,9),v(f._,24,7),v(f._,8,8),d.H.n(f._,9),d.H.A(f._,9,f.J),d.H.l(f._,9),v(f.$,32,5),d.H.n(f.$,5),d.H.A(f.$,5,f.h),d.H.l(f.$,5),v(f.Q,19,0),v(f.C,286,0),v(f.D,30,0),v(f.v,320,0)})(),d.H.N})();function s(d){return[1,null,3,1,2,null,4][d.ctype]*d.depth}function o(d,f,m,v,p){let g=s(f);const y=Math.ceil(v*g/8);let w,b;g=Math.ceil(g/8);let x=d[m],T=0;if(x>1&&(d[m]=[0,0,1][x-2]),x==3)for(T=g;T<y;T++)d[T+1]=d[T+1]+(d[T+1-g]>>>1)&255;for(let D=0;D<p;D++)if(w=m+D*y,b=w+D+1,x=d[b-1],T=0,x==0)for(;T<y;T++)d[w+T]=d[b+T];else if(x==1){for(;T<g;T++)d[w+T]=d[b+T];for(;T<y;T++)d[w+T]=d[b+T]+d[w+T-g]}else if(x==2)for(;T<y;T++)d[w+T]=d[b+T]+d[w+T-y];else if(x==3){for(;T<g;T++)d[w+T]=d[b+T]+(d[w+T-y]>>>1);for(;T<y;T++)d[w+T]=d[b+T]+(d[w+T-y]+d[w+T-g]>>>1)}else{for(;T<g;T++)d[w+T]=d[b+T]+i(0,d[w+T-y],0);for(;T<y;T++)d[w+T]=d[b+T]+i(d[w+T-g],d[w+T-y],d[w+T-g-y])}return d}function i(d,f,m){const v=d+f-m,p=v-d,g=v-f,y=v-m;return p*p<=g*g&&p*p<=y*y?d:g*g<=y*y?f:m}function c(d,f,m){m.width=e.readUint(d,f),f+=4,m.height=e.readUint(d,f),f+=4,m.depth=d[f],f++,m.ctype=d[f],f++,m.compress=d[f],f++,m.filter=d[f],f++,m.interlace=d[f],f++}function A(d,f,m,v,p,g,y,w,b){const x=Math.min(f,p),T=Math.min(m,g);let D=0,k=0;for(let ie=0;ie<T;ie++)for(let Q=0;Q<x;Q++)if(y>=0&&w>=0?(D=ie*f+Q<<2,k=(w+ie)*p+y+Q<<2):(D=(-w+ie)*f-y+Q<<2,k=ie*p+Q<<2),b==0)v[k]=d[D],v[k+1]=d[D+1],v[k+2]=d[D+2],v[k+3]=d[D+3];else if(b==1){var S=d[D+3]*.00392156862745098,E=d[D]*S,C=d[D+1]*S,U=d[D+2]*S,F=v[k+3]*(1/255),L=v[k]*F,H=v[k+1]*F,ue=v[k+2]*F;const X=1-S,le=S+F*X,Z=le==0?0:1/le;v[k+3]=255*le,v[k+0]=(E+L*X)*Z,v[k+1]=(C+H*X)*Z,v[k+2]=(U+ue*X)*Z}else if(b==2)S=d[D+3],E=d[D],C=d[D+1],U=d[D+2],F=v[k+3],L=v[k],H=v[k+1],ue=v[k+2],S==F&&E==L&&C==H&&U==ue?(v[k]=0,v[k+1]=0,v[k+2]=0,v[k+3]=0):(v[k]=E,v[k+1]=C,v[k+2]=U,v[k+3]=S);else if(b==3){if(S=d[D+3],E=d[D],C=d[D+1],U=d[D+2],F=v[k+3],L=v[k],H=v[k+1],ue=v[k+2],S==F&&E==L&&C==H&&U==ue)continue;if(S<220&&F>20)return!1}return!0}return{decode:function(f){const m=new Uint8Array(f);let v=8;const p=e,g=p.readUshort,y=p.readUint,w={tabs:{},frames:[]},b=new Uint8Array(m.length);let x,T=0,D=0;const k=[137,80,78,71,13,10,26,10];for(var S=0;S<8;S++)if(m[S]!=k[S])throw"The input is not a PNG file!";for(;v<m.length;){const ie=p.readUint(m,v);v+=4;const Q=p.readASCII(m,v,4);if(v+=4,Q=="IHDR")c(m,v,w);else if(Q=="iCCP"){for(var E=v;m[E]!=0;)E++;p.readASCII(m,v,E-v),m[E+1];const X=m.slice(E+2,v+ie);let le=null;try{le=a(X)}catch{le=r(X)}w.tabs[Q]=le}else if(Q=="CgBI")w.tabs[Q]=m.slice(v,v+4);else if(Q=="IDAT"){for(S=0;S<ie;S++)b[T+S]=m[v+S];T+=ie}else if(Q=="acTL")w.tabs[Q]={num_frames:y(m,v),num_plays:y(m,v+4)},x=new Uint8Array(m.length);else if(Q=="fcTL"){D!=0&&((ue=w.frames[w.frames.length-1]).data=n(w,x.slice(0,D),ue.rect.width,ue.rect.height),D=0);const X={x:y(m,v+12),y:y(m,v+16),width:y(m,v+4),height:y(m,v+8)};let le=g(m,v+22);le=g(m,v+20)/(le==0?100:le);const Z={rect:X,delay:Math.round(1e3*le),dispose:m[v+24],blend:m[v+25]};w.frames.push(Z)}else if(Q=="fdAT"){for(S=0;S<ie-4;S++)x[D+S]=m[v+S+4];D+=ie-4}else if(Q=="pHYs")w.tabs[Q]=[p.readUint(m,v),p.readUint(m,v+4),m[v+8]];else if(Q=="cHRM")for(w.tabs[Q]=[],S=0;S<8;S++)w.tabs[Q].push(p.readUint(m,v+4*S));else if(Q=="tEXt"||Q=="zTXt"){w.tabs[Q]==null&&(w.tabs[Q]={});var C=p.nextZero(m,v),U=p.readASCII(m,v,C-v),F=v+ie-C-1;if(Q=="tEXt")H=p.readASCII(m,C+1,F);else{var L=a(m.slice(C+2,C+2+F));H=p.readUTF8(L,0,L.length)}w.tabs[Q][U]=H}else if(Q=="iTXt"){w.tabs[Q]==null&&(w.tabs[Q]={}),C=0,E=v,C=p.nextZero(m,E),U=p.readASCII(m,E,C-E);const X=m[E=C+1];var H;m[E+1],E+=2,C=p.nextZero(m,E),p.readASCII(m,E,C-E),E=C+1,C=p.nextZero(m,E),p.readUTF8(m,E,C-E),F=ie-((E=C+1)-v),X==0?H=p.readUTF8(m,E,F):(L=a(m.slice(E,E+F)),H=p.readUTF8(L,0,L.length)),w.tabs[Q][U]=H}else if(Q=="PLTE")w.tabs[Q]=p.readBytes(m,v,ie);else if(Q=="hIST"){const X=w.tabs.PLTE.length/3;for(w.tabs[Q]=[],S=0;S<X;S++)w.tabs[Q].push(g(m,v+2*S))}else if(Q=="tRNS")w.ctype==3?w.tabs[Q]=p.readBytes(m,v,ie):w.ctype==0?w.tabs[Q]=g(m,v):w.ctype==2&&(w.tabs[Q]=[g(m,v),g(m,v+2),g(m,v+4)]);else if(Q=="gAMA")w.tabs[Q]=p.readUint(m,v)/1e5;else if(Q=="sRGB")w.tabs[Q]=m[v];else if(Q=="bKGD")w.ctype==0||w.ctype==4?w.tabs[Q]=[g(m,v)]:w.ctype==2||w.ctype==6?w.tabs[Q]=[g(m,v),g(m,v+2),g(m,v+4)]:w.ctype==3&&(w.tabs[Q]=m[v]);else if(Q=="IEND")break;v+=ie,p.readUint(m,v),v+=4}var ue;return D!=0&&((ue=w.frames[w.frames.length-1]).data=n(w,x.slice(0,D),ue.rect.width,ue.rect.height)),w.data=n(w,b,w.width,w.height),delete w.compress,delete w.interlace,delete w.filter,w},toRGBA8:function(f){const m=f.width,v=f.height;if(f.tabs.acTL==null)return[t(f.data,m,v,f).buffer];const p=[];f.frames[0].data==null&&(f.frames[0].data=f.data);const g=m*v*4,y=new Uint8Array(g),w=new Uint8Array(g),b=new Uint8Array(g);for(let T=0;T<f.frames.length;T++){const D=f.frames[T],k=D.rect.x,S=D.rect.y,E=D.rect.width,C=D.rect.height,U=t(D.data,E,C,f);if(T!=0)for(var x=0;x<g;x++)b[x]=y[x];if(D.blend==0?A(U,E,C,y,m,v,k,S,0):D.blend==1&&A(U,E,C,y,m,v,k,S,1),p.push(y.buffer.slice(0)),D.dispose!=0){if(D.dispose==1)A(w,E,C,y,m,v,k,S,0);else if(D.dispose==2)for(x=0;x<g;x++)y[x]=b[x]}}return p},_paeth:i,_copyTile:A,_bin:e}})();(function(){const{_copyTile:e}=wl,{_bin:t}=wl,n=wl._paeth;var a={table:(function(){const E=new Uint32Array(256);for(let C=0;C<256;C++){let U=C;for(let F=0;F<8;F++)1&U?U=3988292384^U>>>1:U>>>=1;E[C]=U}return E})(),update(E,C,U,F){for(let L=0;L<F;L++)E=a.table[255&(E^C[U+L])]^E>>>8;return E},crc:(E,C,U)=>4294967295^a.update(4294967295,E,C,U)};function r(E,C,U,F){C[U]+=E[0]*F>>4,C[U+1]+=E[1]*F>>4,C[U+2]+=E[2]*F>>4,C[U+3]+=E[3]*F>>4}function s(E){return Math.max(0,Math.min(255,E))}function o(E,C){const U=E[0]-C[0],F=E[1]-C[1],L=E[2]-C[2],H=E[3]-C[3];return U*U+F*F+L*L+H*H}function i(E,C,U,F,L,H,ue){ue==null&&(ue=1);const ie=F.length,Q=[];for(var X=0;X<ie;X++){const M=F[X];Q.push([M>>>0&255,M>>>8&255,M>>>16&255,M>>>24&255])}for(X=0;X<ie;X++){let M=4294967295;for(var le=0,Z=0;Z<ie;Z++){var re=o(Q[X],Q[Z]);Z!=X&&re<M&&(M=re,le=Z)}}const q=new Uint32Array(L.buffer),P=new Int16Array(C*U*4),G=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(X=0;X<G.length;X++)G[X]=255*((G[X]+.5)/16-.5);for(let M=0;M<U;M++)for(let te=0;te<C;te++){var J;X=4*(M*C+te),ue!=2?J=[s(E[X]+P[X]),s(E[X+1]+P[X+1]),s(E[X+2]+P[X+2]),s(E[X+3]+P[X+3])]:(re=G[4*(3&M)+(3&te)],J=[s(E[X]+re),s(E[X+1]+re),s(E[X+2]+re),s(E[X+3]+re)]),le=0;let Y=16777215;for(Z=0;Z<ie;Z++){const ae=o(J,Q[Z]);ae<Y&&(Y=ae,le=Z)}const W=Q[le],ee=[J[0]-W[0],J[1]-W[1],J[2]-W[2],J[3]-W[3]];ue==1&&(te!=C-1&&r(ee,P,X+4,7),M!=U-1&&(te!=0&&r(ee,P,X+4*C-4,3),r(ee,P,X+4*C,5),te!=C-1&&r(ee,P,X+4*C+4,1))),H[X>>2]=le,q[X>>2]=F[le]}}function c(E,C,U,F,L){L==null&&(L={});const{crc:H}=a,ue=t.writeUint,ie=t.writeUshort,Q=t.writeASCII;let X=8;const le=E.frames.length>1;let Z,re=!1,q=33+(le?20:0);if(L.sRGB!=null&&(q+=13),L.pHYs!=null&&(q+=21),L.iCCP!=null&&(Z=pako.deflate(L.iCCP),q+=21+Z.length+4),E.ctype==3){for(var P=E.plte.length,G=0;G<P;G++)E.plte[G]>>>24!=255&&(re=!0);q+=8+3*P+4+(re?8+1*P+4:0)}for(var J=0;J<E.frames.length;J++)le&&(q+=38),q+=(W=E.frames[J]).cimg.length+12,J!=0&&(q+=4);q+=12;const M=new Uint8Array(q),te=[137,80,78,71,13,10,26,10];for(G=0;G<8;G++)M[G]=te[G];if(ue(M,X,13),X+=4,Q(M,X,"IHDR"),X+=4,ue(M,X,C),X+=4,ue(M,X,U),X+=4,M[X]=E.depth,X++,M[X]=E.ctype,X++,M[X]=0,X++,M[X]=0,X++,M[X]=0,X++,ue(M,X,H(M,X-17,17)),X+=4,L.sRGB!=null&&(ue(M,X,1),X+=4,Q(M,X,"sRGB"),X+=4,M[X]=L.sRGB,X++,ue(M,X,H(M,X-5,5)),X+=4),L.iCCP!=null){const ee=13+Z.length;ue(M,X,ee),X+=4,Q(M,X,"iCCP"),X+=4,Q(M,X,"ICC profile"),X+=11,X+=2,M.set(Z,X),X+=Z.length,ue(M,X,H(M,X-(ee+4),ee+4)),X+=4}if(L.pHYs!=null&&(ue(M,X,9),X+=4,Q(M,X,"pHYs"),X+=4,ue(M,X,L.pHYs[0]),X+=4,ue(M,X,L.pHYs[1]),X+=4,M[X]=L.pHYs[2],X++,ue(M,X,H(M,X-13,13)),X+=4),le&&(ue(M,X,8),X+=4,Q(M,X,"acTL"),X+=4,ue(M,X,E.frames.length),X+=4,ue(M,X,L.loop!=null?L.loop:0),X+=4,ue(M,X,H(M,X-12,12)),X+=4),E.ctype==3){for(ue(M,X,3*(P=E.plte.length)),X+=4,Q(M,X,"PLTE"),X+=4,G=0;G<P;G++){const ee=3*G,ae=E.plte[G],oe=255&ae,j=ae>>>8&255,ce=ae>>>16&255;M[X+ee+0]=oe,M[X+ee+1]=j,M[X+ee+2]=ce}if(X+=3*P,ue(M,X,H(M,X-3*P-4,3*P+4)),X+=4,re){for(ue(M,X,P),X+=4,Q(M,X,"tRNS"),X+=4,G=0;G<P;G++)M[X+G]=E.plte[G]>>>24&255;X+=P,ue(M,X,H(M,X-P-4,P+4)),X+=4}}let Y=0;for(J=0;J<E.frames.length;J++){var W=E.frames[J];le&&(ue(M,X,26),X+=4,Q(M,X,"fcTL"),X+=4,ue(M,X,Y++),X+=4,ue(M,X,W.rect.width),X+=4,ue(M,X,W.rect.height),X+=4,ue(M,X,W.rect.x),X+=4,ue(M,X,W.rect.y),X+=4,ie(M,X,F[J]),X+=2,ie(M,X,1e3),X+=2,M[X]=W.dispose,X++,M[X]=W.blend,X++,ue(M,X,H(M,X-30,30)),X+=4);const ee=W.cimg;ue(M,X,(P=ee.length)+(J==0?0:4)),X+=4;const ae=X;Q(M,X,J==0?"IDAT":"fdAT"),X+=4,J!=0&&(ue(M,X,Y++),X+=4),M.set(ee,X),X+=P,ue(M,X,H(M,ae,X-ae)),X+=4}return ue(M,X,0),X+=4,Q(M,X,"IEND"),X+=4,ue(M,X,H(M,X-4,4)),X+=4,M.buffer}function A(E,C,U){for(let F=0;F<E.frames.length;F++){const L=E.frames[F];L.rect.width;const H=L.rect.height,ue=new Uint8Array(H*L.bpl+H);L.cimg=v(L.img,H,L.bpp,L.bpl,ue,C,U)}}function d(E,C,U,F,L){const H=L[0],ue=L[1],ie=L[2],Q=L[3],X=L[4],le=L[5];let Z=6,re=8,q=255;for(var P=0;P<E.length;P++){const Re=new Uint8Array(E[P]);for(var G=Re.length,J=0;J<G;J+=4)q&=Re[J+3]}const M=q!=255,te=(function(be,Ee,Ce,Be,Te,Oe){const Me=[];for(var rt=0;rt<be.length;rt++){const it=new Uint8Array(be[rt]),qe=new Uint32Array(it.buffer);var ut;let yt=0,mt=0,xt=Ee,an=Ce,Cn=Be?1:0;if(rt!=0){const oa=Oe||Be||rt==1||Me[rt-2].dispose!=0?1:2;let Vt=0,kt=1e9;for(let at=0;at<oa;at++){var Ie=new Uint8Array(be[rt-1-at]);const bt=new Uint32Array(be[rt-1-at]);let en=Ee,Ye=Ce,We=-1,_t=-1;for(let zt=0;zt<Ce;zt++)for(let Pt=0;Pt<Ee;Pt++)qe[dt=zt*Ee+Pt]!=bt[dt]&&(Pt<en&&(en=Pt),Pt>We&&(We=Pt),zt<Ye&&(Ye=zt),zt>_t&&(_t=zt));We==-1&&(en=Ye=We=_t=0),Te&&((1&en)==1&&en--,(1&Ye)==1&&Ye--);const Rt=(We-en+1)*(_t-Ye+1);Rt<kt&&(kt=Rt,Vt=at,yt=en,mt=Ye,xt=We-en+1,an=_t-Ye+1)}Ie=new Uint8Array(be[rt-1-Vt]),Vt==1&&(Me[rt-1].dispose=2),ut=new Uint8Array(xt*an*4),e(Ie,Ee,Ce,ut,xt,an,-yt,-mt,0),Cn=e(it,Ee,Ce,ut,xt,an,-yt,-mt,3)?1:0,Cn==1?m(it,Ee,Ce,ut,{x:yt,y:mt,width:xt,height:an}):e(it,Ee,Ce,ut,xt,an,-yt,-mt,0)}else ut=it.slice(0);Me.push({rect:{x:yt,y:mt,width:xt,height:an},img:ut,blend:Cn,dispose:0})}if(Be)for(rt=0;rt<Me.length;rt++){if((Ft=Me[rt]).blend==1)continue;const it=Ft.rect,qe=Me[rt-1].rect,yt=Math.min(it.x,qe.x),mt=Math.min(it.y,qe.y),xt={x:yt,y:mt,width:Math.max(it.x+it.width,qe.x+qe.width)-yt,height:Math.max(it.y+it.height,qe.y+qe.height)-mt};Me[rt-1].dispose=1,rt-1!=0&&f(be,Ee,Ce,Me,rt-1,xt,Te),f(be,Ee,Ce,Me,rt,xt,Te)}let Ue=0;if(be.length!=1)for(var dt=0;dt<Me.length;dt++){var Ft;Ue+=(Ft=Me[dt]).rect.width*Ft.rect.height}return Me})(E,C,U,H,ue,ie),Y={},W=[],ee=[];if(F!=0){const Re=[];for(J=0;J<te.length;J++)Re.push(te[J].img.buffer);const be=(function(Te){let Oe=0;for(var Me=0;Me<Te.length;Me++)Oe+=Te[Me].byteLength;const rt=new Uint8Array(Oe);let ut=0;for(Me=0;Me<Te.length;Me++){const Ie=new Uint8Array(Te[Me]),Ue=Ie.length;for(let dt=0;dt<Ue;dt+=4){let Ft=Ie[dt],it=Ie[dt+1],qe=Ie[dt+2];const yt=Ie[dt+3];yt==0&&(Ft=it=qe=0),rt[ut+dt]=Ft,rt[ut+dt+1]=it,rt[ut+dt+2]=qe,rt[ut+dt+3]=yt}ut+=Ue}return rt.buffer})(Re),Ee=g(be,F);for(J=0;J<Ee.plte.length;J++)W.push(Ee.plte[J].est.rgba);let Ce=0;for(J=0;J<te.length;J++){const Be=(oe=te[J]).img.length;var ae=new Uint8Array(Ee.inds.buffer,Ce>>2,Be>>2);ee.push(ae);const Te=new Uint8Array(Ee.abuf,Ce,Be);le&&i(oe.img,oe.rect.width,oe.rect.height,W,Te,ae),oe.img.set(Te),Ce+=Be}}else for(P=0;P<te.length;P++){var oe=te[P];const Re=new Uint32Array(oe.img.buffer);var j=oe.rect.width;for(G=Re.length,ae=new Uint8Array(G),ee.push(ae),J=0;J<G;J++){const be=Re[J];if(J!=0&&be==Re[J-1])ae[J]=ae[J-1];else if(J>j&&be==Re[J-j])ae[J]=ae[J-j];else{let Ee=Y[be];if(Ee==null&&(Y[be]=Ee=W.length,W.push(be),W.length>=300))break;ae[J]=Ee}}}const ce=W.length;for(ce<=256&&X==0&&(re=ce<=2?1:ce<=4?2:ce<=16?4:8,re=Math.max(re,Q)),P=0;P<te.length;P++){(oe=te[P]).rect.x,oe.rect.y,j=oe.rect.width;const Re=oe.rect.height;let be=oe.img;new Uint32Array(be.buffer);let Ee=4*j,Ce=4;if(ce<=256&&X==0){Ee=Math.ceil(re*j/8);var de=new Uint8Array(Ee*Re);const Be=ee[P];for(let Te=0;Te<Re;Te++){J=Te*Ee;const Oe=Te*j;if(re==8)for(var _e=0;_e<j;_e++)de[J+_e]=Be[Oe+_e];else if(re==4)for(_e=0;_e<j;_e++)de[J+(_e>>1)]|=Be[Oe+_e]<<4-4*(1&_e);else if(re==2)for(_e=0;_e<j;_e++)de[J+(_e>>2)]|=Be[Oe+_e]<<6-2*(3&_e);else if(re==1)for(_e=0;_e<j;_e++)de[J+(_e>>3)]|=Be[Oe+_e]<<7-1*(7&_e)}be=de,Z=3,Ce=1}else if(M==0&&te.length==1){de=new Uint8Array(j*Re*3);const Be=j*Re;for(J=0;J<Be;J++){const Te=3*J,Oe=4*J;de[Te]=be[Oe],de[Te+1]=be[Oe+1],de[Te+2]=be[Oe+2]}be=de,Z=2,Ce=3,Ee=3*j}oe.img=be,oe.bpl=Ee,oe.bpp=Ce}return{ctype:Z,depth:re,plte:W,frames:te}}function f(E,C,U,F,L,H,ue){const ie=Uint8Array,Q=Uint32Array,X=new ie(E[L-1]),le=new Q(E[L-1]),Z=L+1<E.length?new ie(E[L+1]):null,re=new ie(E[L]),q=new Q(re.buffer);let P=C,G=U,J=-1,M=-1;for(let Y=0;Y<H.height;Y++)for(let W=0;W<H.width;W++){const ee=H.x+W,ae=H.y+Y,oe=ae*C+ee,j=q[oe];j==0||F[L-1].dispose==0&&le[oe]==j&&(Z==null||Z[4*oe+3]!=0)||(ee<P&&(P=ee),ee>J&&(J=ee),ae<G&&(G=ae),ae>M&&(M=ae))}J==-1&&(P=G=J=M=0),ue&&((1&P)==1&&P--,(1&G)==1&&G--),H={x:P,y:G,width:J-P+1,height:M-G+1};const te=F[L];te.rect=H,te.blend=1,te.img=new Uint8Array(H.width*H.height*4),F[L-1].dispose==0?(e(X,C,U,te.img,H.width,H.height,-H.x,-H.y,0),m(re,C,U,te.img,H)):e(re,C,U,te.img,H.width,H.height,-H.x,-H.y,0)}function m(E,C,U,F,L){e(E,C,U,F,L.width,L.height,-L.x,-L.y,2)}function v(E,C,U,F,L,H,ue){const ie=[];let Q,X=[0,1,2,3,4];H!=-1?X=[H]:(C*F>5e5||U==1)&&(X=[0]),ue&&(Q={level:0});const le=iBe;for(var Z=0;Z<X.length;Z++){for(let P=0;P<C;P++)p(L,E,P,F,U,X[Z]);ie.push(le.deflate(L,Q))}let re,q=1e9;for(Z=0;Z<ie.length;Z++)ie[Z].length<q&&(re=Z,q=ie[Z].length);return ie[re]}function p(E,C,U,F,L,H){const ue=U*F;let ie=ue+U;if(E[ie]=H,ie++,H==0)if(F<500)for(var Q=0;Q<F;Q++)E[ie+Q]=C[ue+Q];else E.set(new Uint8Array(C.buffer,ue,F),ie);else if(H==1){for(Q=0;Q<L;Q++)E[ie+Q]=C[ue+Q];for(Q=L;Q<F;Q++)E[ie+Q]=C[ue+Q]-C[ue+Q-L]+256&255}else if(U==0){for(Q=0;Q<L;Q++)E[ie+Q]=C[ue+Q];if(H==2)for(Q=L;Q<F;Q++)E[ie+Q]=C[ue+Q];if(H==3)for(Q=L;Q<F;Q++)E[ie+Q]=C[ue+Q]-(C[ue+Q-L]>>1)+256&255;if(H==4)for(Q=L;Q<F;Q++)E[ie+Q]=C[ue+Q]-n(C[ue+Q-L],0,0)+256&255}else{if(H==2)for(Q=0;Q<F;Q++)E[ie+Q]=C[ue+Q]+256-C[ue+Q-F]&255;if(H==3){for(Q=0;Q<L;Q++)E[ie+Q]=C[ue+Q]+256-(C[ue+Q-F]>>1)&255;for(Q=L;Q<F;Q++)E[ie+Q]=C[ue+Q]+256-(C[ue+Q-F]+C[ue+Q-L]>>1)&255}if(H==4){for(Q=0;Q<L;Q++)E[ie+Q]=C[ue+Q]+256-n(0,C[ue+Q-F],0)&255;for(Q=L;Q<F;Q++)E[ie+Q]=C[ue+Q]+256-n(C[ue+Q-L],C[ue+Q-F],C[ue+Q-L-F])&255}}}function g(E,C){const U=new Uint8Array(E),F=U.slice(0),L=new Uint32Array(F.buffer),H=y(F,C),ue=H[0],ie=H[1],Q=U.length,X=new Uint8Array(Q>>2);let le;if(U.length<2e7)for(var Z=0;Z<Q;Z+=4)le=w(ue,re=U[Z]*(1/255),q=U[Z+1]*(1/255),P=U[Z+2]*(1/255),G=U[Z+3]*(1/255)),X[Z>>2]=le.ind,L[Z>>2]=le.est.rgba;else for(Z=0;Z<Q;Z+=4){var re=U[Z]*.00392156862745098,q=U[Z+1]*(1/255),P=U[Z+2]*(1/255),G=U[Z+3]*(1/255);for(le=ue;le.left;)le=b(le.est,re,q,P,G)<=0?le.left:le.right;X[Z>>2]=le.ind,L[Z>>2]=le.est.rgba}return{abuf:F.buffer,inds:X,plte:ie}}function y(E,C,U){U==null&&(U=1e-4);const F=new Uint32Array(E.buffer),L={i0:0,i1:E.length,bst:null,est:null,tdst:0,left:null,right:null};L.bst=D(E,L.i0,L.i1),L.est=k(L.bst);const H=[L];for(;H.length<C;){let ie=0,Q=0;for(var ue=0;ue<H.length;ue++)H[ue].est.L>ie&&(ie=H[ue].est.L,Q=ue);if(ie<U)break;const X=H[Q],le=x(E,F,X.i0,X.i1,X.est.e,X.est.eMq255);if(X.i0>=le||X.i1<=le){X.est.L=0;continue}const Z={i0:X.i0,i1:le,bst:null,est:null,tdst:0,left:null,right:null};Z.bst=D(E,Z.i0,Z.i1),Z.est=k(Z.bst);const re={i0:le,i1:X.i1,bst:null,est:null,tdst:0,left:null,right:null};for(re.bst={R:[],m:[],N:X.bst.N-Z.bst.N},ue=0;ue<16;ue++)re.bst.R[ue]=X.bst.R[ue]-Z.bst.R[ue];for(ue=0;ue<4;ue++)re.bst.m[ue]=X.bst.m[ue]-Z.bst.m[ue];re.est=k(re.bst),X.left=Z,X.right=re,H[Q]=Z,H.push(re)}for(H.sort(((ie,Q)=>Q.bst.N-ie.bst.N)),ue=0;ue<H.length;ue++)H[ue].ind=ue;return[L,H]}function w(E,C,U,F,L){if(E.left==null)return E.tdst=(function(Z,re,q,P,G){const J=re-Z[0],M=q-Z[1],te=P-Z[2],Y=G-Z[3];return J*J+M*M+te*te+Y*Y})(E.est.q,C,U,F,L),E;const H=b(E.est,C,U,F,L);let ue=E.left,ie=E.right;H>0&&(ue=E.right,ie=E.left);const Q=w(ue,C,U,F,L);if(Q.tdst<=H*H)return Q;const X=w(ie,C,U,F,L);return X.tdst<Q.tdst?X:Q}function b(E,C,U,F,L){const{e:H}=E;return H[0]*C+H[1]*U+H[2]*F+H[3]*L-E.eMq}function x(E,C,U,F,L,H){for(F-=4;U<F;){for(;T(E,U,L)<=H;)U+=4;for(;T(E,F,L)>H;)F-=4;if(U>=F)break;const ue=C[U>>2];C[U>>2]=C[F>>2],C[F>>2]=ue,U+=4,F-=4}for(;T(E,U,L)>H;)U-=4;return U+4}function T(E,C,U){return E[C]*U[0]+E[C+1]*U[1]+E[C+2]*U[2]+E[C+3]*U[3]}function D(E,C,U){const F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],L=[0,0,0,0],H=U-C>>2;for(let ue=C;ue<U;ue+=4){const ie=E[ue]*.00392156862745098,Q=E[ue+1]*(1/255),X=E[ue+2]*(1/255),le=E[ue+3]*(1/255);L[0]+=ie,L[1]+=Q,L[2]+=X,L[3]+=le,F[0]+=ie*ie,F[1]+=ie*Q,F[2]+=ie*X,F[3]+=ie*le,F[5]+=Q*Q,F[6]+=Q*X,F[7]+=Q*le,F[10]+=X*X,F[11]+=X*le,F[15]+=le*le}return F[4]=F[1],F[8]=F[2],F[9]=F[6],F[12]=F[3],F[13]=F[7],F[14]=F[11],{R:F,m:L,N:H}}function k(E){const{R:C}=E,{m:U}=E,{N:F}=E,L=U[0],H=U[1],ue=U[2],ie=U[3],Q=F==0?0:1/F,X=[C[0]-L*L*Q,C[1]-L*H*Q,C[2]-L*ue*Q,C[3]-L*ie*Q,C[4]-H*L*Q,C[5]-H*H*Q,C[6]-H*ue*Q,C[7]-H*ie*Q,C[8]-ue*L*Q,C[9]-ue*H*Q,C[10]-ue*ue*Q,C[11]-ue*ie*Q,C[12]-ie*L*Q,C[13]-ie*H*Q,C[14]-ie*ue*Q,C[15]-ie*ie*Q],le=X,Z=S;let re=[Math.random(),Math.random(),Math.random(),Math.random()],q=0,P=0;if(F!=0)for(let J=0;J<16&&(re=Z.multVec(le,re),P=Math.sqrt(Z.dot(re,re)),re=Z.sml(1/P,re),!(J!=0&&Math.abs(P-q)<1e-9));J++)q=P;const G=[L*Q,H*Q,ue*Q,ie*Q];return{Cov:X,q:G,e:re,L:q,eMq255:Z.dot(Z.sml(255,G),re),eMq:Z.dot(re,G),rgba:(Math.round(255*G[3])<<24|Math.round(255*G[2])<<16|Math.round(255*G[1])<<8|Math.round(255*G[0])<<0)>>>0}}var S={multVec:(E,C)=>[E[0]*C[0]+E[1]*C[1]+E[2]*C[2]+E[3]*C[3],E[4]*C[0]+E[5]*C[1]+E[6]*C[2]+E[7]*C[3],E[8]*C[0]+E[9]*C[1]+E[10]*C[2]+E[11]*C[3],E[12]*C[0]+E[13]*C[1]+E[14]*C[2]+E[15]*C[3]],dot:(E,C)=>E[0]*C[0]+E[1]*C[1]+E[2]*C[2]+E[3]*C[3],sml:(E,C)=>[E*C[0],E*C[1],E*C[2],E*C[3]]};wl.encode=function(C,U,F,L,H,ue,ie){L==null&&(L=0),ie==null&&(ie=!1);const Q=d(C,U,F,L,[!1,!1,!1,0,ie,!1]);return A(Q,-1),c(Q,U,F,H,ue)},wl.encodeLL=function(C,U,F,L,H,ue,ie,Q){const X={ctype:0+(L==1?0:2)+(H==0?0:4),depth:ue,frames:[]},le=(L+H)*ue,Z=le*U;for(let re=0;re<C.length;re++)X.frames.push({rect:{x:0,y:0,width:U,height:F},img:new Uint8Array(C[re]),blend:0,dispose:1,bpp:Math.ceil(le/8),bpl:Math.ceil(Z/8)});return A(X,0,!0),c(X,U,F,ie,Q)},wl.encode.compress=d,wl.encode.dither=i,wl.quantize=g,wl.quantize.getKDtree=y,wl.quantize.getNearest=w})();const QH={toArrayBuffer(e,t){const n=e.width,a=e.height,r=n<<2,s=e.getContext("2d").getImageData(0,0,n,a),o=new Uint32Array(s.data.buffer),i=(32*n+31)/32<<2,c=i*a,A=122+c,d=new ArrayBuffer(A),f=new DataView(d),m=1<<20;let v,p,g,y,w=m,b=0,x=0,T=0;function D(E){f.setUint16(x,E,!0),x+=2}function k(E){f.setUint32(x,E,!0),x+=4}function S(E){x+=E}D(19778),k(A),S(4),k(122),k(108),k(n),k(-a>>>0),D(1),D(32),k(3),k(c),k(2835),k(2835),S(8),k(16711680),k(65280),k(255),k(4278190080),k(1466527264),(function E(){for(;b<a&&w>0;){for(y=122+b*i,v=0;v<r;)w--,p=o[T++],g=p>>>24,f.setUint32(y+v,p<<8|g),v+=4;b++}T<o.length?(w=m,setTimeout(E,QH._dly)):t(d)})()},toBlob(e,t){this.toArrayBuffer(e,(n=>{t(new Blob([n],{type:"image/bmp"}))}))},_dly:9};var ni={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},lBe={[ni.CHROME]:16384,[ni.FIREFOX]:11180,[ni.DESKTOP_SAFARI]:16384,[ni.IE]:8192,[ni.IOS]:4096,[ni.ETC]:8192};const ET=typeof window<"u",GH=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,u2=ET&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),uBe=(ET||GH)&&(u2&&u2.getOriginalSymbol(window,"File")||typeof File<"u"&&File),zH=(ET||GH)&&(u2&&u2.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function BT(e,t,n=Date.now()){return new Promise((a=>{const r=e.split(","),s=r[0].match(/:(.*?);/)[1],o=globalThis.atob(r[1]);let i=o.length;const c=new Uint8Array(i);for(;i--;)c[i]=o.charCodeAt(i);const A=new Blob([c],{type:s});A.name=t,A.lastModified=n,a(A)}))}function KH(e){return new Promise(((t,n)=>{const a=new zH;a.onload=()=>t(a.result),a.onerror=r=>n(r),a.readAsDataURL(e)}))}function WH(e){return new Promise(((t,n)=>{const a=new Image;a.onload=()=>t(a),a.onerror=r=>n(r),a.src=e}))}function jA(){if(jA.cachedResult!==void 0)return jA.cachedResult;let e=ni.ETC;const{userAgent:t}=navigator;return/Chrom(e|ium)/i.test(t)?e=ni.CHROME:/iP(ad|od|hone)/i.test(t)&&/WebKit/i.test(t)?e=ni.IOS:/Safari/i.test(t)?e=ni.DESKTOP_SAFARI:/Firefox/i.test(t)?e=ni.FIREFOX:(/MSIE/i.test(t)||document.documentMode)&&(e=ni.IE),jA.cachedResult=e,jA.cachedResult}function jH(e,t){const n=jA(),a=lBe[n];let r=e,s=t,o=r*s;const i=r>s?s/r:r/s;for(;o>a*a;){const c=(a+r)/2,A=(a+s)/2;c<A?(s=A,r=A*i):(s=c*i,r=c),o=r*s}return{width:r,height:s}}function Mw(e,t){let n,a;try{if(n=new OffscreenCanvas(e,t),a=n.getContext("2d"),a===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),a=n.getContext("2d")}return n.width=e,n.height=t,[n,a]}function qH(e,t){const{width:n,height:a}=jH(e.width,e.height),[r,s]=Mw(n,a);return t&&/jpe?g/.test(t)&&(s.fillStyle="white",s.fillRect(0,0,r.width,r.height)),s.drawImage(e,0,0,r.width,r.height),r}function i_(){return i_.cachedResult!==void 0||(i_.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),i_.cachedResult}function c2(e,t={}){return new Promise((function(n,a){let r,s;var o=function(){try{return s=qH(r,t.fileType||e.type),n([r,s])}catch(c){return a(c)}},i=function(c){try{var A=function(d){try{throw d}catch(f){return a(f)}};try{let d;return KH(e).then((function(f){try{return d=f,WH(d).then((function(m){try{return r=m,(function(){try{return o()}catch(v){return a(v)}})()}catch(v){return A(v)}}),A)}catch(m){return A(m)}}),A)}catch(d){A(d)}}catch(d){return a(d)}};try{if(i_()||[ni.DESKTOP_SAFARI,ni.MOBILE_SAFARI].includes(jA()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(e).then((function(c){try{return r=c,o()}catch{return i()}}),i)}catch{i()}}))}function d2(e,t,n,a,r=1){return new Promise((function(s,o){let i;if(t==="image/png"){let A,d,f;return A=e.getContext("2d"),{data:d}=A.getImageData(0,0,e.width,e.height),f=wl.encode([d.buffer],e.width,e.height,4096*r),i=new Blob([f],{type:t}),i.name=n,i.lastModified=a,c.call(this)}{let A=function(){return c.call(this)};if(t==="image/bmp")return new Promise((d=>QH.toBlob(e,d))).then((function(d){try{return i=d,i.name=n,i.lastModified=a,A.call(this)}catch(f){return o(f)}}).bind(this),o);{let d=function(){return A.call(this)};if(typeof OffscreenCanvas=="function"&&e instanceof OffscreenCanvas)return e.convertToBlob({type:t,quality:r}).then((function(f){try{return i=f,i.name=n,i.lastModified=a,d.call(this)}catch(m){return o(m)}}).bind(this),o);{let f;return f=e.toDataURL(t,r),BT(f,n,a).then((function(m){try{return i=m,d.call(this)}catch(v){return o(v)}}).bind(this),o)}}}function c(){return s(i)}}))}function yu(e){e.width=0,e.height=0}function Zm(){return new Promise((function(e,t){let n,a,r,s;return Zm.cachedResult!==void 0?e(Zm.cachedResult):BT("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(o){try{return n=o,c2(n).then((function(i){try{return a=i[1],d2(a,n.type,n.name,n.lastModified).then((function(c){try{return r=c,yu(a),c2(r).then((function(A){try{return s=A[0],Zm.cachedResult=s.width===1&&s.height===2,e(Zm.cachedResult)}catch(d){return t(d)}}),t)}catch(A){return t(A)}}),t)}catch(c){return t(c)}}),t)}catch(i){return t(i)}}),t)}))}function YH(e){return new Promise(((t,n)=>{const a=new zH;a.onload=r=>{const s=new DataView(r.target.result);if(s.getUint16(0,!1)!=65496)return t(-2);const o=s.byteLength;let i=2;for(;i<o;){if(s.getUint16(i+2,!1)<=8)return t(-1);const c=s.getUint16(i,!1);if(i+=2,c==65505){if(s.getUint32(i+=2,!1)!=1165519206)return t(-1);const A=s.getUint16(i+=6,!1)==18761;i+=s.getUint32(i+4,A);const d=s.getUint16(i,A);i+=2;for(let f=0;f<d;f++)if(s.getUint16(i+12*f,A)==274)return t(s.getUint16(i+12*f+8,A))}else{if((65280&c)!=65280)break;i+=s.getUint16(i,!1)}}return t(-1)},a.onerror=r=>n(r),a.readAsArrayBuffer(e)}))}function XH(e,t){const{width:n}=e,{height:a}=e,{maxWidthOrHeight:r}=t;let s,o=e;return isFinite(r)&&(n>r||a>r)&&([o,s]=Mw(n,a),n>a?(o.width=r,o.height=a/n*r):(o.width=n/a*r,o.height=r),s.drawImage(e,0,0,o.width,o.height),yu(e)),o}function JH(e,t){const{width:n}=e,{height:a}=e,[r,s]=Mw(n,a);switch(t>4&&t<9?(r.width=a,r.height=n):(r.width=n,r.height=a),t){case 2:s.transform(-1,0,0,1,n,0);break;case 3:s.transform(-1,0,0,-1,n,a);break;case 4:s.transform(1,0,0,-1,0,a);break;case 5:s.transform(0,1,1,0,0,0);break;case 6:s.transform(0,1,-1,0,a,0);break;case 7:s.transform(0,-1,-1,0,a,n);break;case 8:s.transform(0,-1,1,0,0,n)}return s.drawImage(e,0,0,n,a),yu(e),r}function AR(e,t,n=0){return new Promise((function(a,r){let s,o,i,c,A,d,f,m,v,p,g,y,w,b,x,T,D,k,S,E;function C(F=5){if(t.signal&&t.signal.aborted)throw t.signal.reason;s+=F,t.onProgress(Math.min(s,100))}function U(F){if(t.signal&&t.signal.aborted)throw t.signal.reason;s=Math.min(Math.max(F,s),100),t.onProgress(s)}return s=n,o=t.maxIteration||10,i=1024*t.maxSizeMB*1024,C(),c2(e,t).then((function(F){try{return[,c]=F,C(),A=XH(c,t),C(),new Promise((function(L,H){var ue;if(!(ue=t.exifOrientation))return YH(e).then((function(Q){try{return ue=Q,ie.call(this)}catch(X){return H(X)}}).bind(this),H);function ie(){return L(ue)}return ie.call(this)})).then((function(L){try{return d=L,C(),Zm().then((function(H){try{return f=H?A:JH(A,d),C(),m=t.initialQuality||1,v=t.fileType||e.type,d2(f,v,e.name,e.lastModified,m).then((function(ue){try{{let Q=function(){if(o--&&(x>i||x>w)){let le,Z;return le=E?.95*S.width:S.width,Z=E?.95*S.height:S.height,[D,k]=Mw(le,Z),k.drawImage(S,0,0,le,Z),m*=v==="image/png"?.85:.95,d2(D,v,e.name,e.lastModified,m).then((function(re){try{return T=re,yu(S),S=D,x=T.size,U(Math.min(99,Math.floor((b-x)/(b-i)*100))),Q}catch(q){return r(q)}}),r)}return[1]},X=function(){return yu(S),yu(D),yu(A),yu(f),yu(c),U(100),a(T)};if(p=ue,C(),g=p.size>i,y=p.size>e.size,!g&&!y)return U(100),a(p);var ie;return w=e.size,b=p.size,x=b,S=f,E=!t.alwaysKeepResolution&&g,(ie=(function(le){for(;le;){if(le.then)return void le.then(ie,r);try{if(le.pop){if(le.length)return le.pop()?X.call(this):le;le=Q}else le=le.call(this)}catch(Z){return r(Z)}}}).bind(this))(Q)}}catch(Q){return r(Q)}}).bind(this),r)}catch(ue){return r(ue)}}).bind(this),r)}catch(H){return r(H)}}).bind(this),r)}catch(L){return r(L)}}).bind(this),r)}))}const cBe=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let IC;function dBe(e,t){return new Promise(((n,a)=>{IC||(IC=(function(o){const i=[];return i.push(o),URL.createObjectURL(new Blob(i))})(cBe));const r=new Worker(IC);r.addEventListener("message",(function(o){if(t.signal&&t.signal.aborted)r.terminate();else if(o.data.progress===void 0){if(o.data.error)return a(new Error(o.data.error)),void r.terminate();n(o.data.file),r.terminate()}else t.onProgress(o.data.progress)})),r.addEventListener("error",a),t.signal&&t.signal.addEventListener("abort",(()=>{a(t.signal.reason),r.terminate()})),r.postMessage({file:e,imageCompressionLibUrl:t.libURL,options:{...t,onProgress:void 0,signal:void 0}})}))}function ns(e,t){return new Promise((function(n,a){let r,s,o,i,c,A;if(r={...t},o=0,{onProgress:i}=r,r.maxSizeMB=r.maxSizeMB||Number.POSITIVE_INFINITY,c=typeof r.useWebWorker!="boolean"||r.useWebWorker,delete r.useWebWorker,r.onProgress=v=>{o=v,typeof i=="function"&&i(o)},!(e instanceof Blob||e instanceof uBe))return a(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(e.type))return a(new Error("The file given is not an image"));if(A=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!c||typeof Worker!="function"||A)return AR(e,r).then((function(v){try{return s=v,m.call(this)}catch(p){return a(p)}}).bind(this),a);var d=(function(){try{return m.call(this)}catch(v){return a(v)}}).bind(this),f=function(v){try{return AR(e,r).then((function(p){try{return s=p,d()}catch(g){return a(g)}}),a)}catch(p){return a(p)}};try{return r.libURL=r.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",dBe(e,r).then((function(v){try{return s=v,d()}catch{return f()}}),f)}catch{f()}function m(){try{s.name=e.name,s.lastModified=e.lastModified}catch{}try{r.preserveExif&&e.type==="image/jpeg"&&(!r.fileType||r.fileType&&r.fileType===e.type)&&(s=$H(e,s))}catch{}return n(s)}}))}ns.getDataUrlFromFile=KH,ns.getFilefromDataUrl=BT,ns.loadImage=WH,ns.drawImageInCanvas=qH,ns.drawFileInCanvas=c2,ns.canvasToFile=d2,ns.getExifOrientation=YH,ns.handleMaxWidthOrHeight=XH,ns.followExifOrientation=JH,ns.cleanupCanvasMemory=yu,ns.isAutoOrientationInBrowser=Zm,ns.approximateBelowMaximumCanvasSizeOfBrowser=jH,ns.copyExifWithoutOrientation=$H,ns.getBrowserName=jA,ns.version="2.0.2";const ABe={class:"text-caption"},fBe={key:1,class:"text-overline grey--text text--darken-3 mx-2"},mBe={class:"mb-3"},vBe={class:"text-body-2"},hBe={class:"text-body-2"},pBe={class:"text-caption text-grey-600"},gBe={class:"d-flex justify-center"},yBe={class:"text-center text-caption mt-2 text-info"},fR={__name:"upload-dialog",props:{consultation:{type:Object,required:!1},procedure:{type:Object,required:!1},patient:{type:Object,required:!1}},emits:["close"],setup(e,{emit:t}){const n=e,a=t,r=V([]),s=V(!1),o=V(""),i=V(null),c=V([]),A=V(""),d=V(null),f=V(""),m=V("fast"),v=V([]),p=[{title:"Skip Compression",value:"none",subtitle:"Upload files without compression (fastest)"},{title:"Fast Compression",value:"fast",subtitle:"Quick compression, minimal quality loss"},{title:"Balanced",value:"balanced",subtitle:"Good balance of quality and size"},{title:"High Quality",value:"high",subtitle:"Best quality, larger files"},{title:"Aggressive",value:"aggressive",subtitle:"Smaller files, some quality loss"},{title:"Ultra",value:"ultra",subtitle:"Maximum compression, noticeable quality loss"}],g=aBe(),y=g.limits,w=g.acceptedTypes,b=["before_image","after_image","prescription","report","consent_letter"],x=ne(()=>i.value&&i.value.validFiles.length>0),T=ne(()=>x.value&&o.value&&!s.value),D=ne(()=>i.value?.validFiles?i.value.validFiles.some(re=>re.file.type.startsWith("image/")):!1),k=ne(()=>{if(!i.value?.validFiles)return"";const re=i.value.validFiles.filter(Y=>Y.file.type.startsWith("image/"));if(re.length===0)return"";const q=re.reduce((Y,W)=>Y+W.file.size,0),P=(q/(1024*1024)).toFixed(2),G={high:.7,balanced:.5,aggressive:.3,ultra:.2},M=(q*G[m.value]/(1024*1024)).toFixed(2),te=((1-G[m.value])*100).toFixed(0);return`${P}MB  ${M}MB (${te}% reduction)`}),S=()=>{if(!i.value?.validFiles){v.value=[];return}const re=i.value.validFiles.filter(P=>P.file.type.startsWith("image/")),q={high:.7,balanced:.5,aggressive:.3,ultra:.2};v.value=re.map(P=>{const G=P.file.size,J=(G/(1024*1024)).toFixed(2),te=(G*q[m.value]/(1024*1024)).toFixed(2),Y=((1-q[m.value])*100).toFixed(0);return{name:P.file.name,originalSize:`${J}MB`,estimatedSize:`${te}MB`,reduction:Y}})},E=re=>{if(A.value="",c.value=[],i.value=null,!re||re.length===0)return;const q=tBe(re);i.value=q;const P=nBe(q);c.value=P,!q.success&&!q.hasWarnings&&(A.value="Selected files cannot be uploaded due to validation errors"),console.log("File validation result:",q)};je(r,E);const C=re=>({image:"mdi-image",document:"mdi-file-document",video:"mdi-video",other:"mdi-file"})[re]||"mdi-file",U=re=>({image:"success",document:"info",video:"warning",other:"grey"})[re]||"grey",F={high:{maxSizeMB:2,maxWidthOrHeight:2048,quality:.9,fileType:"image/jpeg"},balanced:{maxSizeMB:1,maxWidthOrHeight:1920,quality:.85,fileType:"image/jpeg"},aggressive:{maxSizeMB:.5,maxWidthOrHeight:1600,quality:.75,fileType:"image/jpeg"},ultra:{maxSizeMB:.25,maxWidthOrHeight:1200,quality:.65,fileType:"image/jpeg"}},L=re=>{const q=re.size/1048576;return(re.name.toLowerCase().includes("xray")||re.name.toLowerCase().includes("scan")||re.name.toLowerCase().includes("mri"))&&q<=5&&m.value!=="ultra"?F.high:F[m.value]||F.balanced};je([i,m],()=>{S()},{immediate:!0});const H=async re=>new Promise(q=>{const P=document.createElement("canvas"),G=P.getContext("2d"),J=new Image;J.onload=()=>{requestAnimationFrame(()=>{P.width=J.width,P.height=J.height,G.drawImage(J,0,0),window.requestIdleCallback?requestIdleCallback(()=>{P.toBlob(M=>{const te=new File([M],re.name,{type:re.type,lastModified:Date.now()});q(te)},re.type,.95)}):setTimeout(()=>{P.toBlob(M=>{const te=new File([M],re.name,{type:re.type,lastModified:Date.now()});q(te)},re.type,.95)},0)})},J.src=URL.createObjectURL(re)}),ue=re=>{const q=re.type==="image/png"&&re.name.toLowerCase().includes("transparent");return re.type==="image/png"||q?"image/png":"image/jpeg"},ie=async re=>{if(!re.type.startsWith("image/"))return re;try{const q=re.size;console.log(`Compressing image: ${re.name} (${(q/1024/1024).toFixed(2)}MB)`);const P=await H(re);console.log(`Metadata stripped: ${(P.size/1024/1024).toFixed(2)}MB`);let G;if(m.value==="fast")G={maxSizeMB:1,maxWidthOrHeight:1200,quality:.7,fileType:"image/jpeg",useWebWorker:!1,initialQuality:.7};else{G=L(P);const W=ue(P);G.fileType=W}let J=await ns(P,G);const M=J.size/q;if(M>.8){if(console.log(`Primary compression insufficient (${(M*100).toFixed(1)}%), trying alternatives...`),G.fileType!=="image/jpeg"){const W={...G,fileType:"image/jpeg",quality:Math.max(.6,G.quality-.1)},ee=await ns(P,W);ee.size<J.size&&(J=ee,console.log("JPEG compression was better"))}if(J.size/q>.7){console.log("Still too large, applying ultra compression...");const ee=await ns(P,{maxSizeMB:.2,maxWidthOrHeight:1e3,quality:.6,fileType:"image/jpeg",useWebWorker:!0});ee.size<J.size&&(J=ee,console.log("Ultra compression applied"))}}const te=J.size,Y=((1-te/q)*100).toFixed(1);return console.log(`Final compression: ${re.name} -> ${(te/1024/1024).toFixed(2)}MB (${Y}% reduction)`),J}catch(q){console.warn(`Failed to compress ${re.name}:`,q);try{return console.log(`Attempting fallback JPEG compression for ${re.name}`),await ns(re,{maxSizeMB:1,maxWidthOrHeight:1600,quality:.7,fileType:"image/jpeg",useWebWorker:!0})}catch(P){return console.warn(`Fallback compression also failed for ${re.name}:`,P),re}}},Q=async(re,q=null)=>{const P=[];let G=0;for(let J=0;J<re.length;J++){const M=re[J];if(M.type.startsWith("image/")){if(m.value==="none"||M.size>10*1024*1024){console.log(`Skipping compression for file: ${M.name} (${(M.size/1024/1024).toFixed(2)}MB)`),P.push(M),G++;continue}q&&q(Math.round(G/re.length*100),`Compressing ${M.name}...`);const te=await new Promise(Y=>{setTimeout(async()=>{try{await new Promise(oe=>setTimeout(oe,0));const W=ie(M),ee=new Promise((oe,j)=>setTimeout(()=>j(new Error("Compression timeout")),1e4)),ae=await Promise.race([W,ee]);Y(ae)}catch(W){console.error("Compression error:",W),Y(M)}},0)});P.push(te)}else P.push(M);G++,J<re.length-1&&await new Promise(te=>setTimeout(te,50))}return q&&q(100,"Compression complete!"),P},X=()=>{a("close")},le=()=>{r.value=[],o.value="",i.value=null,c.value=[],A.value=""},Z=async()=>{if(!T.value){console.warn("Cannot upload: validation failed or missing file type");return}s.value=!0;try{const re=i.value.validFiles.map(ee=>ee.file);if(re.length===0)throw new Error("No valid files to upload");console.log("Compressing images before upload..."),d.value=0,f.value="Starting compression...";const q=await Q(re,(ee,ae)=>{d.value=ee,f.value=ae}),P=new FormData;q.forEach(ee=>{P.append("files",ee)});const G={tag:o.value},J=n.consultation?.id,M=J&&J!==0&&J!=="0",te=n.procedure?.id,Y=te&&te!==0&&te!=="0";if(M)G.consultationId=J;else if(Y)G.treatmentPlanId=te;else if(n.patient?.id)G.patientId=n.patient.id;else throw new Error("Either consultation, procedure, or patient ID is required");console.log("Uploading files:",{fileCount:q.length,totalSize:q.reduce((ee,ae)=>ee+ae.size,0),tag:o.value,params:G});const W=await At.post("/upload/",P,{params:G,headers:{"Content-Type":"multipart/form-data"}});console.log("Upload successful:",W.data)}catch(re){console.error("Upload failed:",re)}finally{s.value=!1,d.value=null,f.value="",X()}};return(re,q)=>{const P=I("v-chip"),G=I("v-card-title"),J=I("v-col"),M=I("v-icon"),te=I("v-btn"),Y=I("v-tooltip"),W=I("v-row"),ee=I("v-card"),ae=I("v-file-input"),oe=I("v-alert"),j=I("v-expansion-panel-title"),ce=I("v-list-item-title"),de=I("v-list-item-subtitle"),_e=I("v-list-item"),Re=I("v-list"),be=I("v-expansion-panel-text"),Ee=I("v-expansion-panel"),Ce=I("v-expansion-panels"),Be=I("v-select"),Te=I("v-divider"),Oe=I("v-progress-linear");return R(),ve(ee,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[l(W,{"no-gutters":""},{default:u(()=>[l(J,{cols:"12"},{default:u(()=>[l(ee,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(W,{"no-gutters":""},{default:u(()=>[l(J,{cols:"10"},{default:u(()=>[l(G,{class:"pa-0 pl-2"},{default:u(()=>[q[3]||(q[3]=O(" Medical File Upload ",-1)),l(P,{size:"small",color:"info",class:"ml-2"},{default:u(()=>[O(" Max: "+K(Qe(y).maxFiles)+" files, "+K(Qe(y).maxFileSize),1)]),_:1})]),_:1})]),_:1}),l(J,{cols:"2",class:"d-flex justify-end align-center"},{default:u(()=>[l(Y,{"max-width":"400"},{activator:u(({props:Me})=>[l(te,Pe({icon:"",size:"x-small"},Me,{class:"mr-1"}),{default:u(()=>[l(M,null,{default:u(()=>[...q[4]||(q[4]=[O("mdi-help-circle-outline",-1)])]),_:1})]),_:1},16)]),default:u(()=>[h("div",ABe,[q[5]||(q[5]=h("strong",null,"File Limits:",-1)),q[6]||(q[6]=h("br",null,null,-1)),O("  Maximum "+K(Qe(y).maxFiles)+" files per upload",1),q[7]||(q[7]=h("br",null,null,-1)),O("  Maximum "+K(Qe(y).maxFileSize)+" per file",1),q[8]||(q[8]=h("br",null,null,-1)),q[9]||(q[9]=h("br",null,null,-1)),q[10]||(q[10]=h("strong",null,"Accepted Types:",-1)),q[11]||(q[11]=h("br",null,null,-1)),O("  Images: "+K(Qe(w).images),1),q[12]||(q[12]=h("br",null,null,-1)),O("  Documents: "+K(Qe(w).documents),1),q[13]||(q[13]=h("br",null,null,-1)),O("  Videos: "+K(Qe(w).videos),1)])]),_:1}),l(te,{icon:"",size:"x-small",onClick:X,class:"btn-hover-base"},{default:u(()=>[l(M,null,{default:u(()=>[...q[14]||(q[14]=[h("img",{src:nu,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(W,{"no-gutters":""},{default:u(()=>[l(J,{cols:"12"},{default:u(()=>[l(ee,{flat:"",class:"d-flex justify-center ma-2",color:"surfaceContainer"},{default:u(()=>[l(W,{"no-gutters":""},{default:u(()=>[l(J,{cols:"12"},{default:u(()=>[l(ae,{modelValue:r.value,"onUpdate:modelValue":[q[0]||(q[0]=Me=>r.value=Me),E],loading:s.value,density:"comfortable",variant:"solo-inverted",counter:"",clearable:"",accept:"image/*,application/*,video/*",label:"Select medical files",chips:"",multiple:"",error:!!A.value,"error-messages":A.value},{selection:u(({fileNames:Me,index:rt})=>[rt<2?(R(),ve(P,{key:0,color:"primary",size:"small",class:"me-2"},{default:u(()=>[O(K(Me[rt]),1)]),_:2},1024)):rt===2?(R(),Ae("span",fBe," +"+K(r.value.length-2)+" File(s) ",1)):ye("",!0)]),_:1},8,["modelValue","loading","error","error-messages"])]),_:1}),c.value.length>0?(R(),ve(J,{key:0,cols:"12"},{default:u(()=>[h("div",mBe,[(R(!0),Ae(Ke,null,Gt(c.value,(Me,rt)=>(R(),ve(oe,{key:rt,type:Me.type,title:Me.title,text:Me.message,class:"mb-2",density:"compact",variant:"tonal"},null,8,["type","title","text"]))),128))])]),_:1})):ye("",!0),i.value&&i.value.validFiles.length>0?(R(),ve(J,{key:1,cols:"12"},{default:u(()=>[l(Ce,{variant:"accordion",class:"mb-3"},{default:u(()=>[l(Ee,null,{default:u(()=>[l(j,null,{default:u(()=>[h("span",vBe,"  "+K(i.value.summary.validFiles)+" Valid Files ("+K(i.value.summary.formattedTotalSize)+") ",1)]),_:1}),l(be,null,{default:u(()=>[l(Re,{dense:"",class:"py-0"},{default:u(()=>[(R(!0),Ae(Ke,null,Gt(i.value.validFiles,Me=>(R(),ve(_e,{key:Me.index,class:"px-0 py-1"},{prepend:u(()=>[l(M,{size:"small",color:U(Me.category)},{default:u(()=>[O(K(C(Me.category)),1)]),_:2},1032,["color"])]),default:u(()=>[l(ce,{class:"text-caption"},{default:u(()=>[O(K(Me.file.name),1)]),_:2},1024),l(de,{class:"text-caption"},{default:u(()=>[O(K(Me.formattedSize)+"  "+K(Me.category),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):ye("",!0),l(J,{cols:"12"},{default:u(()=>[l(Be,{modelValue:o.value,"onUpdate:modelValue":q[1]||(q[1]=Me=>o.value=Me),density:"comfortable",variant:"solo-inverted",items:b,label:"Select type",disabled:!x.value},null,8,["modelValue","disabled"])]),_:1}),x.value&&D.value?(R(),ve(J,{key:2,cols:"12"},{default:u(()=>[l(Ce,{variant:"accordion",class:"mb-3"},{default:u(()=>[l(Ee,null,{default:u(()=>[l(j,null,{default:u(()=>[h("span",hBe,[q[15]||(q[15]=O("  Image Compression Settings ",-1)),l(P,{size:"x-small",color:"info",class:"ml-2"},{default:u(()=>[O(K(m.value),1)]),_:1})])]),_:1}),l(be,null,{default:u(()=>[l(W,{"no-gutters":""},{default:u(()=>[l(J,{cols:"12",class:"mb-3"},{default:u(()=>[l(Be,{modelValue:m.value,"onUpdate:modelValue":q[2]||(q[2]=Me=>m.value=Me),items:p,label:"Compression Mode",density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1}),l(J,{cols:"12",class:"mb-2"},{default:u(()=>[h("div",pBe," Estimated compression: "+K(k.value),1)]),_:1}),v.value.length>0?(R(),ve(J,{key:0,cols:"12"},{default:u(()=>[l(Re,{dense:"",class:"py-0"},{default:u(()=>[(R(!0),Ae(Ke,null,Gt(v.value,Me=>(R(),ve(_e,{key:Me.name,class:"px-0 py-1"},{default:u(()=>[l(ce,{class:"text-caption"},{default:u(()=>[O(K(Me.name),1)]),_:2},1024),l(de,{class:"text-caption"},{default:u(()=>[O(K(Me.originalSize)+"  "+K(Me.estimatedSize)+" ("+K(Me.reduction)+"% reduction) ",1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):ye("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):ye("",!0),l(J,{cols:"12"},{default:u(()=>[l(Te,{class:"mb-2"}),h("div",gBe,[l(te,{variant:"outlined",onClick:le,disabled:!r.value||r.value.length===0,class:"btn-hover-base mr-4"},{default:u(()=>[...q[16]||(q[16]=[O(" Clear ",-1)])]),_:1},8,["disabled"]),l(te,{variant:"elevated",color:"primary",onClick:Z,loading:s.value,disabled:!T.value,class:"btn-hover-enhanced ml-4"},{default:u(()=>[l(M,{start:""},{default:u(()=>[...q[17]||(q[17]=[O("mdi-upload",-1)])]),_:1}),O(" Upload "+K(i.value?.summary?.validFiles||0)+" Files ",1)]),_:1},8,["loading","disabled"])])]),_:1}),d.value!==null&&d.value<100?(R(),ve(J,{key:3,cols:"12"},{default:u(()=>[l(Oe,{"model-value":d.value,color:"info",class:"mt-3"},null,8,["model-value"]),h("div",yBe,K(f.value),1)]),_:1})):ye("",!0),s.value?(R(),ve(J,{key:4,cols:"12"},{default:u(()=>[l(Oe,{indeterminate:"",color:"primary",class:"mt-3"}),q[18]||(q[18]=h("div",{class:"text-center text-caption mt-2 text-primary"}," Uploading medical files... ",-1))]),_:1})):ye("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},kT=()=>typeof window<"u"&&window.process&&window.process.type==="renderer",TT=async()=>{if(kT())try{const{ipcRenderer:e}=window.require("electron");return await e.invoke("get-local-ip")}catch(e){return console.error("Failed to get local IP via IPC:",e),"localhost"}else try{const e=window.location.hostname,n=`${kr(e).api.https}/network-info`,r=await(await fetch(n)).json();return r.success&&r.localIP?r.localIP:(console.warn("API returned unsuccessful response:",r),"localhost")}catch(e){return console.error("Failed to get local IP from API:",e),"localhost"}},FC=async e=>{try{const t=e.replace("/api","/health"),n=await fetch(t,{method:"GET",headers:{Accept:"application/json"},timeout:5e3});return console.log(` ${t} is accessible (status: ${n.status})`),n.ok}catch(t){return console.log(` ${e} not accessible:`,t.message),!1}},ZH=async()=>{if(kT())try{const e=await TT(),t=kr(e);let n=t.api.https;if(!await FC(n)&&(console.log(" HTTPS not accessible, trying HTTP fallback..."),n=t.api.http,!await FC(n))){console.log(" Network IP not accessible, falling back to localhost...");const s=kr("localhost");n=s.api.https,await FC(n)||(console.log(" Localhost HTTPS not accessible, trying localhost HTTP..."),n=s.api.http)}return Ov(n),console.log(` API initialized with: ${n}`),n}catch(e){console.error("Failed to initialize network API:",e);const t=kr("localhost").api.https;return Ov(t),t}else return console.log("[network] Web mode: Skipping network API initialization - base URL already set by environment"),null},Ow=async()=>{if(kT())try{const e=await TT();return kr(e).https}catch(e){return console.error("Failed to get current server URL:",e),kr("localhost").https}else try{const e=window.location.hostname,t=kr(e),n=`${t.api.https}/network-info`,r=await(await fetch(n)).json();return r.success&&r.serverURL?r.serverURL:(console.warn("API returned unsuccessful response for server URL:",r),t.https)}catch(e){return console.error("Failed to get server URL from API:",e),kr(window.location.hostname).https}},_Be=async(e,t="/api/upload/file")=>{try{return`${await Ow()}${t}?path=${encodeURIComponent(e)}`}catch(n){return console.error("Failed to create file URL, using localhost fallback:",n),`${kr("localhost").https}${t}?path=${encodeURIComponent(e)}`}},IT=async(e,t="/api/upload/file")=>{try{const n=await Ow();return e.map(a=>`${n}${t}?path=${encodeURIComponent(a)}`)}catch(n){console.error("Failed to create file URLs, using localhost fallback:",n);const a=kr("localhost").https;return e.map(r=>`${a}${t}?path=${encodeURIComponent(r)}`)}},e$=async()=>{try{return await Ow()}catch(e){return console.error("Failed to get server URL, using localhost:",e),kr("localhost").https}},mR=Object.freeze(Object.defineProperty({__proto__:null,createFileURL:_Be,createFileURLBatch:IT,createServerURLRef:e$,getCurrentServerURL:Ow,getLocalIP:TT,getServerURLs:kr,initializeNetworkAPI:ZH},Symbol.toStringTag,{value:"Module"})),wBe={key:0,style:{height:"70vh"}},bBe={key:0,style:{height:"100%",width:"100%",position:"relative"},class:"bg-grey-lighten-4"},xBe={class:"d-flex align-center justify-center fill-height"},CBe={class:"d-flex align-center justify-center fill-height"},SBe={class:"image-controls"},EBe=["src"],BBe={key:2,style:{height:"100%",width:"100%",position:"relative",background:"#f5f5f5"}},kBe={class:"d-flex flex-column align-center justify-center",style:{height:"100%"}},TBe={class:"mt-4"},IBe={class:"mt-6"},FBe={key:3,class:"d-flex flex-column align-center justify-center",style:{height:"100%"}},PBe={class:"mt-4 text-subtitle-1"},DBe={class:"text-caption text-grey"},UBe={class:"mt-4",style:{width:"100%",height:"60%"}},RBe=["src"],NBe={key:4,class:"d-flex flex-column align-center justify-center",style:{height:"100%"}},VBe={class:"mt-4 text-subtitle-1"},LBe={class:"text-caption text-grey"},MBe={__name:"media-viewer",props:{isOpen:{type:Boolean,required:!0},mediaItems:{type:Array,required:!0},selectedMedia:{type:Object,default:null},currentIndex:{type:Number,default:0}},emits:["close","navigate"],setup(e,{emit:t}){const n=V(!1);let a=null;try{window.require&&(a=window.require("electron").ipcRenderer,n.value=!0)}catch{console.log("Not running in Electron environment")}const r=e,s=t,o=V(!1),i=V(0),c=V(1),A=V(0),d=V(0),f=V(!1),m=V({x:0,y:0}),v=V(!1);let p;try{p=jD()}catch(P){console.error("Failed to get server base URL from environment, using localhost fallback:",P),p=kr("localhost").http}const g=V(p);(async()=>{try{const P=jD();g.value=P}catch(P){console.error("Failed to get server URL from environment, trying network utility:",P);try{const G=await e$();g.value=G}catch(G){console.error("Failed to get server URL, using localhost fallback:",G),g.value=kr("localhost").http}}})();const w=P=>`${g.value}/api/upload/file?path=${encodeURIComponent(P)}`,b=P=>{if(!P)return"Unknown File";const G=P.split("/");return G[G.length-1]||"Unknown File"},x=P=>{i.value=(i.value+P)%360,i.value<0&&(i.value+=360)},T=()=>{i.value=0},D=()=>{const P=Math.min(c.value*1.2,5);c.value=P},k=()=>{const P=Math.max(c.value/1.2,.2);c.value=P,E()},S=()=>{c.value=1,A.value=0,d.value=0},E=()=>{const P=Math.max(0,(c.value-1)*200);A.value=Math.max(-P,Math.min(P,A.value)),d.value=Math.max(-P,Math.min(P,d.value))},C=P=>{c.value>1&&(f.value=!0,m.value={x:P.clientX,y:P.clientY},P.preventDefault())},U=P=>{if(f.value&&c.value>1){const G=P.clientX-m.value.x,J=P.clientY-m.value.y;A.value+=G/c.value,d.value+=J/c.value,E(),m.value={x:P.clientX,y:P.clientY},P.preventDefault()}},F=()=>{f.value=!1},L=P=>{P.deltaY<0?D():k()},H=async()=>{if(!n.value||!a){console.warn("Copy feature only available in Electron");return}if(!r.selectedMedia||!r.selectedMedia.type.startsWith("image/")){console.warn("Copy feature only available for images");return}try{v.value=!0;const P=await a.invoke("copy-image-to-clipboard",r.selectedMedia.path);if(P.success)console.log("Image copied to clipboard successfully");else throw new Error(P.error||"Failed to copy image")}catch(P){console.error("Failed to copy image to clipboard:",P)}finally{v.value=!1}},ue=()=>{i.value=0,c.value=1,A.value=0,d.value=0,f.value=!1,v.value=!1},ie=P=>{let G;P==="next"?G=Math.min(r.currentIndex+1,r.mediaItems.length-1):G=Math.max(r.currentIndex-1,0),G!==r.currentIndex&&(ue(),s("navigate",G))},Q=P=>{if(r.isOpen)switch(P.key){case"ArrowLeft":P.preventDefault(),ie("prev");break;case"ArrowRight":P.preventDefault(),ie("next");break;case"Escape":P.preventDefault(),q();break}},X=async P=>{const G=w(P.path);if(window.require)try{const{ipcRenderer:J}=window.require("electron"),M=await J.invoke("open-external",G);if(M.success){console.log("Successfully opened PDF with system default application");return}else console.error("Failed to open with system app:",M.error)}catch(J){console.error("Failed to use Electron IPC:",J)}le(G)},le=P=>{try{if(!window.open(P,"_blank","noopener,noreferrer")){console.log("Popup blocked, trying alternative approach");const J=document.createElement("a");J.href=P,J.target="_blank",J.rel="noopener noreferrer",document.body.appendChild(J),J.click(),document.body.removeChild(J)}}catch(G){console.error("Failed to open URL:",G),Z(P)}},Z=async P=>{try{await navigator.clipboard.writeText(P),console.log("URL copied to clipboard:",P),alert("Unable to open PDF. URL copied to clipboard - paste it in your browser.")}catch(G){console.error("Failed to copy to clipboard:",G),prompt("Copy this URL to view the PDF:",P)}},re=P=>{const G=w(P.path),J=document.createElement("a");J.href=G,J.download=b(P.path)||"download",document.body.appendChild(J),J.click(),document.body.removeChild(J)},q=()=>{o.value=!1,s("close")};return(P,G)=>{const J=I("v-chip"),M=I("v-col"),te=I("v-icon"),Y=I("v-btn"),W=I("v-tooltip"),ee=I("v-row"),ae=I("v-card"),oe=I("v-progress-circular"),j=I("v-alert"),ce=I("v-img"),de=I("v-card-text");return R(),ve(ae,{onKeydown:Q},{default:u(()=>[l(ee,{"no-gutters":""},{default:u(()=>[l(M,{cols:"12"},{default:u(()=>[l(ae,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(ee,{"no-gutters":""},{default:u(()=>[l(M,{cols:"8",class:"d-flex align-center justify-start"},{default:u(()=>[G[13]||(G[13]=h("span",null,"Media Viewer",-1)),l(J,{class:"ml-2",size:"small",variant:"outlined"},{default:u(()=>[O(K(e.currentIndex+1)+" of "+K(e.mediaItems.length),1)]),_:1}),e.selectedMedia?.tag?(R(),ve(J,{key:0,class:"ml-2",size:"small",color:"primary"},{default:u(()=>[O(K(e.selectedMedia.tag==="before_image"?"Before":e.selectedMedia.tag==="after_image"?"After":e.selectedMedia.tag==="report"?"Report":e.selectedMedia.tag==="prescription"?"Rx":e.selectedMedia.tag==="consent_letter"?"Consent":e.selectedMedia.tag),1)]),_:1})):ye("",!0)]),_:1}),l(M,{cols:"4",class:"d-flex align-center justify-end"},{default:u(()=>[l(W,{text:"Previous ()",location:"bottom"},{activator:u(({props:_e})=>[l(Y,Pe({icon:"",variant:"text",disabled:e.currentIndex===0,onClick:G[0]||(G[0]=Re=>ie("prev")),class:"mr-1"},_e),{default:u(()=>[l(te,null,{default:u(()=>[...G[14]||(G[14]=[O("mdi-chevron-left",-1)])]),_:1})]),_:1},16,["disabled"])]),_:1}),l(W,{text:"Next ()",location:"bottom"},{activator:u(({props:_e})=>[l(Y,Pe({icon:"",variant:"text",disabled:e.currentIndex===e.mediaItems.length-1,onClick:G[1]||(G[1]=Re=>ie("next")),class:"mr-2"},_e),{default:u(()=>[l(te,null,{default:u(()=>[...G[15]||(G[15]=[O("mdi-chevron-right",-1)])]),_:1})]),_:1},16,["disabled"])]),_:1}),l(W,{text:"Close (Esc)",location:"bottom"},{activator:u(({props:_e})=>[l(Y,Pe({icon:"",size:"x-small",onClick:q},_e),{default:u(()=>[l(te,null,{default:u(()=>[...G[16]||(G[16]=[h("img",{src:nu,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1},16)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(de,{class:"pa-0"},{default:u(()=>[e.selectedMedia?(R(),Ae("div",wBe,[e.selectedMedia.type.startsWith("image/")?(R(),Ae("div",bBe,[h("div",{style:Ut([{height:"100%",width:"100%",overflow:"hidden",cursor:"grab"},{cursor:f.value?"grabbing":c.value>1?"grab":"default"}]),onMousedown:C,onMousemove:U,onMouseup:F,onMouseleave:F,onWheel:vn(L,["prevent"])},[e.selectedMedia.path?(R(),ve(ce,{key:0,src:w(e.selectedMedia.path),height:"100%",width:"100%",contain:"",style:Ut({transform:`rotate(${i.value}deg) scale(${c.value}) translate(${A.value}px, ${d.value}px)`,transition:f.value?"none":"transform 0.3s ease",transformOrigin:"center center"})},{placeholder:u(()=>[h("div",xBe,[l(oe,{indeterminate:"",color:"primary"})])]),error:u(()=>[h("div",CBe,[l(j,{type:"error",variant:"tonal"},{default:u(()=>[...G[17]||(G[17]=[O(" Failed to load image ",-1)])]),_:1})])]),_:1},8,["src","style"])):ye("",!0)],36),h("div",SBe,[l(W,{text:"Copy Image",location:"top"},{activator:u(({props:_e})=>[l(Y,Pe({icon:"",size:"small",variant:"elevated",onClick:G[2]||(G[2]=Re=>H())},_e,{class:"mr-2",loading:v.value,disabled:v.value}),{default:u(()=>[l(te,null,{default:u(()=>[...G[18]||(G[18]=[O("mdi-content-copy",-1)])]),_:1})]),_:1},16,["loading","disabled"])]),_:1}),l(W,{text:"Zoom In",location:"top"},{activator:u(({props:_e})=>[l(Y,Pe({icon:"",size:"small",variant:"elevated",onClick:G[3]||(G[3]=Re=>D())},_e,{class:"mr-2",disabled:c.value>=5}),{default:u(()=>[l(te,null,{default:u(()=>[...G[19]||(G[19]=[O("mdi-magnify-plus-outline",-1)])]),_:1})]),_:1},16,["disabled"])]),_:1}),l(W,{text:"Zoom Out",location:"top"},{activator:u(({props:_e})=>[l(Y,Pe({icon:"",size:"small",variant:"elevated",onClick:G[4]||(G[4]=Re=>k())},_e,{class:"mr-2",disabled:c.value<=.2}),{default:u(()=>[l(te,null,{default:u(()=>[...G[20]||(G[20]=[O("mdi-magnify-minus-outline",-1)])]),_:1})]),_:1},16,["disabled"])]),_:1}),l(W,{text:"Reset Zoom",location:"top"},{activator:u(({props:_e})=>[l(Y,Pe({icon:"",size:"small",variant:"elevated",onClick:G[5]||(G[5]=Re=>S())},_e,{class:"mr-2",disabled:c.value===1&&A.value===0&&d.value===0}),{default:u(()=>[l(te,null,{default:u(()=>[...G[21]||(G[21]=[O("mdi-fit-to-page-outline",-1)])]),_:1})]),_:1},16,["disabled"])]),_:1}),l(W,{text:"Rotate Left",location:"top"},{activator:u(({props:_e})=>[l(Y,Pe({icon:"",size:"small",variant:"elevated",onClick:G[6]||(G[6]=Re=>x(-90))},_e,{class:"mr-2"}),{default:u(()=>[l(te,null,{default:u(()=>[...G[22]||(G[22]=[O("mdi-rotate-left",-1)])]),_:1})]),_:1},16)]),_:1}),l(W,{text:"Rotate Right",location:"top"},{activator:u(({props:_e})=>[l(Y,Pe({icon:"",size:"small",variant:"elevated",onClick:G[7]||(G[7]=Re=>x(90))},_e,{class:"mr-2"}),{default:u(()=>[l(te,null,{default:u(()=>[...G[23]||(G[23]=[O("mdi-rotate-right",-1)])]),_:1})]),_:1},16)]),_:1}),l(W,{text:"Reset Rotation",location:"top"},{activator:u(({props:_e})=>[l(Y,Pe({icon:"",size:"small",variant:"elevated",onClick:G[8]||(G[8]=Re=>T())},_e,{disabled:i.value===0}),{default:u(()=>[l(te,null,{default:u(()=>[...G[24]||(G[24]=[O("mdi-backup-restore",-1)])]),_:1})]),_:1},16,["disabled"])]),_:1})])])):e.selectedMedia.type.startsWith("video/")?(R(),Ae("video",{key:1,src:w(e.selectedMedia.path),controls:"",style:{width:"100%",height:"100%","object-fit":"contain"}},null,8,EBe)):e.selectedMedia.type==="application/pdf"?(R(),Ae("div",BBe,[h("div",kBe,[l(te,{size:"80",color:"primary"},{default:u(()=>[...G[25]||(G[25]=[O("mdi-file-pdf-box",-1)])]),_:1}),h("h3",TBe,K(b(e.selectedMedia.path)),1),G[28]||(G[28]=h("p",{class:"text-caption text-grey mt-2"},"PDF Document",-1)),G[29]||(G[29]=h("p",{class:"text-caption text-grey"},"Click to open/download this PDF",-1)),h("div",IBe,[l(Y,{color:"primary",variant:"elevated",size:"large",onClick:G[9]||(G[9]=_e=>X(e.selectedMedia)),class:"px-8"},{default:u(()=>[l(te,{left:""},{default:u(()=>[...G[26]||(G[26]=[O("mdi-file-pdf-box",-1)])]),_:1}),G[27]||(G[27]=O(" Open PDF ",-1))]),_:1})])])])):e.selectedMedia.type.startsWith("application/")?(R(),Ae("div",FBe,[l(te,{size:"64",color:"grey"},{default:u(()=>[...G[30]||(G[30]=[O("mdi-file-document",-1)])]),_:1}),h("p",PBe,K(b(e.selectedMedia.path)),1),h("p",DBe,"File type: "+K(e.selectedMedia.type),1),h("div",UBe,[h("iframe",{src:w(e.selectedMedia.path),style:{width:"100%",height:"100%",border:"1px solid #ccc"},title:"Document Viewer",onError:G[10]||(G[10]=_e=>o.value=!0)},null,40,RBe)]),l(Y,{color:"primary",variant:"outlined",class:"mt-4",onClick:G[11]||(G[11]=_e=>re(e.selectedMedia))},{default:u(()=>[l(te,{left:""},{default:u(()=>[...G[31]||(G[31]=[O("mdi-download",-1)])]),_:1}),G[32]||(G[32]=O(" Download File ",-1))]),_:1})])):(R(),Ae("div",NBe,[l(te,{size:"64",color:"grey"},{default:u(()=>[...G[33]||(G[33]=[O("mdi-file",-1)])]),_:1}),h("p",VBe,K(b(e.selectedMedia.path)),1),h("p",LBe,"File type: "+K(e.selectedMedia.type),1),l(Y,{color:"primary",variant:"outlined",class:"mt-4",onClick:G[12]||(G[12]=_e=>re(e.selectedMedia))},{default:u(()=>[l(te,{left:""},{default:u(()=>[...G[34]||(G[34]=[O("mdi-download",-1)])]),_:1}),G[35]||(G[35]=O(" Download File ",-1))]),_:1})]))])):ye("",!0)]),_:1})]),_:1})}}},vR=qt(MBe,[["__scopeId","data-v-d2c20c46"]]),OBe={key:0,class:"text-caption text-medium-emphasis ml-2"},HBe={key:0,class:"d-flex justify-center align-center",style:{height:"400px"}},$Be={key:1,class:"text-center pa-4"},QBe={class:"text-error"},GBe={key:2},zBe={class:"images-column"},KBe={class:"column-header pa-3 bg-surface-variant"},WBe={key:0,class:"images-scroll"},jBe={class:"pa-2"},qBe={class:"text-body-2 font-weight-bold"},YBe={class:"d-flex align-center justify-center fill-height"},XBe={class:"d-flex align-center justify-center fill-height"},JBe={key:1,class:"empty-state pa-4 text-center"},ZBe={class:"images-column"},eke={class:"column-header pa-3 bg-surface-variant"},tke={key:0,class:"images-scroll"},nke={class:"pa-2"},ake={class:"text-body-2 font-weight-bold"},rke={class:"d-flex align-center justify-center fill-height"},ske={class:"d-flex align-center justify-center fill-height"},oke={key:1,class:"empty-state pa-4 text-center"},ike={__name:"patient-images-modal",props:{isOpen:{type:Boolean,required:!0},patientId:{type:Number,required:!0},doctorId:{type:Number,required:!1}},emits:["close"],setup(e,{emit:t}){const n=e,a=t,r=V(!1),s=V(null),o=V(null),i=V([]),c=ne(()=>i.value.filter(v=>v.tag==="before_image").sort((v,p)=>p.createdAt-v.createdAt)),A=ne(()=>i.value.filter(v=>v.tag==="after_image").sort((v,p)=>p.createdAt-v.createdAt)),d=v=>{if(!v)return"";const p=new Date(v*1e3),g=new Date,y=new Date(p.getFullYear(),p.getMonth(),p.getDate()),b=new Date(g.getFullYear(),g.getMonth(),g.getDate()).getTime()-y.getTime(),x=Math.floor(b/(1e3*3600*24)),T=p.toLocaleDateString("en-US",{timeZone:"Asia/Kolkata",year:"numeric",month:"short",day:"numeric"});let D;return x===0?D="Today":x===1?D="1 day ago":D=`${x} days ago`,`${T}  ${D}`},f=async()=>{if(n.patientId){r.value=!0,s.value=null;try{const v=await WAe(n.patientId,"both",n.doctorId);if(v.success){o.value=v.data.patient;const p=v.data.images.map(y=>y.path),g=await IT(p);i.value=v.data.images.map((y,w)=>({...y,fileUrl:g[w]}))}else s.value=v.error}catch(v){s.value=v.message||"Failed to fetch patient images"}finally{r.value=!1}}},m=()=>{a("close")};return dn(()=>{n.patientId&&f()}),je(()=>n.isOpen,v=>{v&&n.patientId&&f()}),je(()=>n.patientId,v=>{v&&n.isOpen&&f()}),(v,p)=>{const g=I("v-card-title"),y=I("v-col"),w=I("v-icon"),b=I("v-btn"),x=I("v-row"),T=I("v-card"),D=I("v-progress-circular"),k=I("v-chip"),S=I("v-card-subtitle"),E=I("v-alert"),C=I("v-img"),U=I("v-card-text");return R(),ve(T,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[l(x,{"no-gutters":""},{default:u(()=>[l(y,{cols:"12"},{default:u(()=>[l(T,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(x,{"no-gutters":""},{default:u(()=>[l(y,{cols:"11"},{default:u(()=>[l(g,{class:"pa-0 pl-2"},{default:u(()=>[p[0]||(p[0]=O(" Patient Images History ",-1)),o.value?(R(),Ae("span",OBe," - "+K(o.value.name),1)):ye("",!0)]),_:1})]),_:1}),l(y,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(b,{icon:"",size:"x-small",onClick:m},{default:u(()=>[l(w,null,{default:u(()=>[...p[1]||(p[1]=[h("img",{src:nu,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(x,{"no-gutters":""},{default:u(()=>[l(y,{cols:"12"},{default:u(()=>[l(T,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[r.value?(R(),Ae("div",HBe,[l(D,{indeterminate:"",color:"primary",size:"64"})])):s.value?(R(),Ae("div",$Be,[l(w,{color:"error",size:"48",class:"mb-2"},{default:u(()=>[...p[2]||(p[2]=[O("mdi-alert-circle",-1)])]),_:1}),h("p",QBe,K(s.value),1),l(b,{onClick:f,color:"primary",variant:"outlined"},{default:u(()=>[...p[3]||(p[3]=[O(" Try Again ",-1)])]),_:1})])):(R(),Ae("div",GBe,[l(U,{class:"pa-0",style:{height:"75vh"}},{default:u(()=>[l(x,{"no-gutters":"",class:"fill-height"},{default:u(()=>[l(y,{cols:"6",class:"border-e"},{default:u(()=>[h("div",zBe,[h("div",KBe,[l(w,{icon:"mdi-camera-outline",class:"me-2",color:"success"}),p[4]||(p[4]=h("span",{class:"text-subtitle-2 font-weight-bold"},"Before Images",-1)),l(k,{size:"small",class:"ms-2"},{default:u(()=>[O(K(c.value.length),1)]),_:1})]),c.value.length>0?(R(),Ae("div",WBe,[h("div",jBe,[l(x,{"no-gutters":""},{default:u(()=>[(R(!0),Ae(Ke,null,Gt(c.value,(F,L)=>(R(),ve(y,{key:`before-${L}`,cols:"12",class:"mb-3"},{default:u(()=>[l(T,{class:"image-card",elevation:"2"},{default:u(()=>[l(S,{class:"pa-2"},{default:u(()=>[h("div",qBe,[l(w,{icon:"mdi-calendar",size:"small",class:"me-1"}),O(" "+K(d(F.createdAt)),1)])]),_:2},1024),F.fileUrl?(R(),ve(C,{key:0,src:F.fileUrl,"aspect-ratio":"1",cover:"",loading:"lazy",transition:!1,class:"image-thumbnail"},{placeholder:u(()=>[h("div",YBe,[l(D,{indeterminate:"",size:"24"})])]),error:u(()=>[h("div",XBe,[l(E,{type:"error",variant:"tonal"},{default:u(()=>[...p[5]||(p[5]=[O(" Failed to load image ",-1)])]),_:1})])]),_:1},8,["src"])):ye("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1})])])):(R(),Ae("div",JBe,[l(w,{icon:"mdi-camera-off",size:"48",class:"text-medium-emphasis mb-2"}),p[6]||(p[6]=h("p",{class:"text-body-2 text-medium-emphasis"},"No before images found",-1))]))])]),_:1}),l(y,{cols:"6"},{default:u(()=>[h("div",ZBe,[h("div",eke,[l(w,{icon:"mdi-camera-enhance",class:"me-2",color:"info"}),p[7]||(p[7]=h("span",{class:"text-subtitle-2 font-weight-bold"},"After Images",-1)),l(k,{size:"small",class:"ms-2"},{default:u(()=>[O(K(A.value.length),1)]),_:1})]),A.value.length>0?(R(),Ae("div",tke,[h("div",nke,[l(x,{"no-gutters":""},{default:u(()=>[(R(!0),Ae(Ke,null,Gt(A.value,(F,L)=>(R(),ve(y,{key:`after-${L}`,cols:"12",class:"mb-3"},{default:u(()=>[l(T,{class:"image-card",elevation:"2"},{default:u(()=>[l(S,{class:"pa-2"},{default:u(()=>[h("div",ake,[l(w,{icon:"mdi-calendar",size:"small",class:"me-1"}),O(" "+K(d(F.createdAt)),1)])]),_:2},1024),F.fileUrl?(R(),ve(C,{key:0,src:F.fileUrl,"aspect-ratio":"1",cover:"",loading:"lazy",transition:!1,class:"image-thumbnail"},{placeholder:u(()=>[h("div",rke,[l(D,{indeterminate:"",size:"24"})])]),error:u(()=>[h("div",ske,[l(E,{type:"error",variant:"tonal"},{default:u(()=>[...p[8]||(p[8]=[O(" Failed to load image ",-1)])]),_:1})])]),_:1},8,["src"])):ye("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1})])])):(R(),Ae("div",oke,[l(w,{icon:"mdi-camera-off",size:"48",class:"text-medium-emphasis mb-2"}),p[9]||(p[9]=h("p",{class:"text-body-2 text-medium-emphasis"},"No after images found",-1))]))])]),_:1})]),_:1})]),_:1})]))]),_:1})]),_:1})]),_:1})]),_:1})}}},hR=qt(ike,[["__scopeId","data-v-8c82235c"]]),lke={__name:"delete-upload",props:{deleteSelectedUpload:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=e,a=t,r=V(n.deleteSelectedUpload),s=()=>{a("close")},o=async i=>{try{const c=await XAe(i.id);c.success?console.log("Upload deleted successfully"):console.error("Error deleting upload:",c.error)}catch(c){console.error("Error deleting upload:",c)}s()};return(i,c)=>{const A=I("v-card-title"),d=I("v-col"),f=I("v-icon"),m=I("v-btn"),v=I("v-row"),p=I("v-card"),g=I("v-card-text"),y=I("v-divider");return R(),ve(p,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(v,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(p,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(v,{"no-gutters":""},{default:u(()=>[l(d,{cols:"11"},{default:u(()=>[l(A,{class:"pa-0 pl-2"},{default:u(()=>[...c[1]||(c[1]=[O("Confirm Upload Delete",-1)])]),_:1})]),_:1}),l(d,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(m,{icon:"",size:"x-small",onClick:s},{default:u(()=>[l(f,null,{default:u(()=>[...c[2]||(c[2]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(v,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(p,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(v,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(g,{class:"text-left"},{default:u(()=>[...c[3]||(c[3]=[O(" Are you sure you want to delete this uploaded file? ",-1),h("span",{class:"text-red font-weight-bold"}," You will not be able to recover the file once deleted. ",-1)])]),_:1})]),_:1})]),_:1}),l(y),l(v,{"no-gutters":""},{default:u(()=>[l(d,{cols:"2"}),l(d,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(m,{variant:"outlined",onClick:c[0]||(c[0]=w=>o(r.value))},{default:u(()=>[...c[4]||(c[4]=[O("Yes, Delete File",-1)])]),_:1})]),_:1}),l(d,{cols:"2"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},uke=""+new URL("images/upload_image-CQ-OTL21.png",import.meta.url).href,cke={key:1,class:"d-flex justify-center align-center",style:{height:"100%","min-height":"60vh"}},dke={key:2,class:"date-organized-uploads-vertical"},Ake={class:"date-header-vertical mb-3"},fke={class:"upload-count-vertical text-caption text-medium-emphasis ml-2"},mke={class:"d-flex align-center justify-center fill-height"},vke={class:"d-flex align-center justify-center fill-height"},hke={key:1,class:"no-images-placeholder text-center pa-4"},pke={key:0,class:"documents-list"},gke={class:"d-flex align-center"},yke={class:"file-info flex-grow-1 min-width-0"},_ke={class:"file-name text-body-2 font-weight-medium text-truncate"},wke={class:"file-type text-caption text-medium-emphasis"},bke={key:1,class:"no-documents-placeholder text-center pa-4"},xke={__name:"upload-files",props:{consultation:{type:Object,required:!1},procedure:{type:Object,required:!1},patient:{type:Object,required:!1}},setup(e){const t=e,n=ra(),a=V([]),r=V(!1),s=V(t.consultation?Qn.cloneDeep(t.consultation):null),o=V(t.procedure?Qn.cloneDeep(t.procedure):null),i=V(!1),c=V(null),A=V(0),d=V(!1),f=V(null),m=V(null),v=V(!1),p=V(null),g=ne(()=>{if(!a.value||a.value.length===0)return[];const X={};return a.value.forEach(le=>{const Z=new Date(le.createdAt*1e3),re=new Date,q=new Date(re);q.setDate(q.getDate()-1);let P,G;if(Z.toDateString()===re.toDateString())P="Today",G="Today";else if(Z.toDateString()===q.toDateString())P="Yesterday",G="Yesterday";else{const J=Z.getFullYear()===re.getFullYear();P=Z.toLocaleDateString("en-US",{timeZone:"Asia/Kolkata",month:"short",day:"numeric",...J?{}:{year:"numeric"}}),G=Z.toLocaleDateString("en-US",{timeZone:"Asia/Kolkata",year:"numeric",month:"long",day:"numeric"})}X[P]||(X[P]={date:P,fullDate:G,rawDate:Z,items:[]}),X[P].items.push(le)}),Object.values(X).sort((le,Z)=>Z.rawDate.getTime()-le.rawDate.getTime())}),y=X=>{const le=[],Z=[];return X.forEach(re=>{re.type.startsWith("image/")?le.push(re):Z.push(re)}),{images:le,documents:Z}},w=async()=>{const X=f.value,le=m.value||n.state.doctorModule?.doctorId;if(!X){console.log("Cannot fetch upload items: Patient ID not available"),a.value=[],r.value=!1;return}if(!le){console.log("Cannot fetch upload items: Doctor ID not available"),a.value=[],r.value=!1;return}r.value=!0;try{const Z=await jAe(X,le);if(Z.success&&Z.data.uploads){const re=Z.data.uploads.map(P=>P.path),q=await IT(re);a.value=Z.data.uploads.map((P,G)=>({...P,fileUrl:q[G]}))}else console.error("Failed to fetch patient uploads:",Z.error),a.value=[]}catch(Z){console.error("Error fetching upload items:",Z),a.value=[]}finally{r.value=!1}};je(()=>t.consultation,async X=>{X?(s.value=Qn.cloneDeep(X),f.value=X.patientId,m.value=X.doctorId,X.patientId&&X.doctorId?await w():(a.value=[],console.log("Patient ID or Doctor ID not available"))):(s.value=null,t.patient?.id&&(f.value=t.patient.id,m.value=m.value||n.state.doctorModule?.doctorId,f.value&&m.value&&await w()))},{immediate:!0}),je(()=>t.patient,async X=>{X&&X.id&&(f.value||(f.value=X.id),m.value||(m.value=n.state.doctorModule?.doctorId),f.value&&m.value&&await w())},{immediate:!0}),je(()=>t.procedure,async X=>{X?(o.value=Qn.cloneDeep(X),f.value=X.patientId,m.value=X.doctorId,X.patientId&&X.doctorId?await w():(a.value=[],console.log("Patient ID or Doctor ID not available"))):(o.value=null,t.patient?.id?(f.value=t.patient.id,m.value=m.value||n.state.doctorModule?.doctorId,f.value&&m.value&&await w()):a.value=[])},{immediate:!0});const b=V(!1),x=()=>{b.value=!0,console.log("Upload Template")},T=async()=>{b.value=!1,await w()},D=X=>({before_image:"Before",after_image:"After",report:"Report",prescription:"Rx",consent_letter:"Consent"})[X]||"Others",k=X=>({before_image:"mdi-camera-outline",after_image:"mdi-camera-enhance",report:"mdi-file-document-outline",prescription:"mdi-pill",consent_letter:"mdi-file-sign"})[X]||"mdi-file",S=X=>X.includes("pdf")?"mdi-file-pdf-box":X.includes("word")||X.includes("document")?"mdi-file-word-box":X.includes("excel")||X.includes("spreadsheet")?"mdi-file-excel-box":X.includes("powerpoint")||X.includes("presentation")?"mdi-file-powerpoint-box":"mdi-file-document-outline",E=X=>X.includes("pdf")?"red":X.includes("word")||X.includes("document")?"blue":X.includes("excel")||X.includes("spreadsheet")?"green":X.includes("powerpoint")||X.includes("presentation")?"orange":"grey",C=X=>{const le=X.split("/"),re=le[le.length-1].split(".").pop();return re?re.toUpperCase():"FILE"},U=X=>{console.log("Open Media",X);const le=a.value.findIndex(Z=>Z.path===X.path);A.value=le,c.value=X,i.value=!0},F=X=>{A.value=X,c.value=a.value[X]},L=()=>{i.value=!1,c.value=null,A.value=0},H=()=>{f.value?d.value=!0:console.warn("Patient information not available")},ue=()=>{d.value=!1},ie=X=>{if(!X){console.error("No upload provided for deletion");return}v.value=!0,p.value=X,console.log("Selected Upload for Deletion:",X)},Q=async()=>{try{v.value=!1,p.value=null,await w()}catch(X){console.error("Error handling upload delete close:",X)}};return(X,le)=>{const Z=I("v-col"),re=I("v-btn"),q=I("v-tooltip"),P=I("v-icon"),G=I("v-row"),J=I("v-card"),M=I("v-progress-circular"),te=I("v-empty-state"),Y=I("v-chip"),W=I("v-divider"),ee=I("v-alert"),ae=I("v-img"),oe=I("v-card-text"),j=I("v-bottom-sheet"),ce=I("v-dialog");return R(),Ae(Ke,null,[l(J,{rounded:"0",class:"pa-1 section-header-style",elevation:"0"},{default:u(()=>[l(G,{"no-gutters":""},{default:u(()=>[l(Z,{cols:"6"}),l(Z,{cols:"6",class:"d-flex justify-end align-center py-1"},{default:u(()=>[l(q,{text:"Upload Files"},{activator:u(({props:de})=>[l(re,Pe({size:"small"},de,{onClick:x,class:"mr-1 btn-hover-base"}),{default:u(()=>[...le[7]||(le[7]=[O(" Upload ",-1)])]),_:1},16)]),_:1}),l(q,{text:"View Patient Images History"},{activator:u(({props:de})=>[l(re,Pe({variant:"outlined",size:"small"},de,{onClick:H,class:"mr-1 btn-hover-base"}),{default:u(()=>[l(P,{size:"small"},{default:u(()=>[...le[8]||(le[8]=[h("img",{src:JEe,alt:"History"},null,-1)])]),_:1})]),_:1},16)]),_:1}),l(q,{text:"Refresh Files"},{activator:u(({props:de})=>[l(re,Pe({variant:"outlined",size:"small"},de,{onClick:w,class:"btn-hover-base"}),{default:u(()=>[l(P,{size:"small"},{default:u(()=>[...le[9]||(le[9]=[h("img",{src:_g,alt:"Refresh"},null,-1)])]),_:1})]),_:1},16)]),_:1})]),_:1})]),_:1})]),_:1}),l(G,{"no-gutters":""},{default:u(()=>[l(Z,{cols:"12",class:"scroll-element mt-1"},{default:u(()=>[r.value?(R(),ve(G,{key:0,"no-gutters":""},{default:u(()=>[l(Z,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%","min-height":"60vh"}},{default:u(()=>[l(M,{indeterminate:"",color:"primary"})]),_:1})]),_:1})):a.value.length===0?(R(),Ae("div",cke,[l(te,{image:Qe(uke)},{title:u(()=>[...le[10]||(le[10]=[h("div",{class:"text-subtitle-2 mt-8"}," No images or documents found for this patient ",-1)])]),text:u(()=>[...le[11]||(le[11]=[h("div",{class:"text-caption"}," All uploaded images and documents for this patient will appear here ",-1)])]),_:1},8,["image"])])):(R(),Ae("div",dke,[(R(!0),Ae(Ke,null,Gt(g.value,(de,_e)=>(R(),Ae("div",{key:_e,class:"date-section mb-4"},[h("div",Ake,[l(Y,{color:"primary",variant:"elevated",size:"default",class:"date-chip-vertical","prepend-icon":"mdi-calendar",title:de.fullDate||de.date},{default:u(()=>[O(K(de.date),1)]),_:2},1032,["title"]),h("span",fke,K(de.items.length)+" upload"+K(de.items.length!==1?"s":""),1),l(W,{class:"ml-4"})]),l(G,{"no-gutters":"",class:"split-content-row"},{default:u(()=>[l(Z,{cols:"9",class:"images-section pr-2"},{default:u(()=>[y(de.items).images.length>0?(R(),ve(G,{key:0,"no-gutters":""},{default:u(()=>[(R(!0),Ae(Ke,null,Gt(y(de.items).images,(Re,be)=>(R(),ve(Z,{key:`img-${_e}-${be}`,cols:"12",sm:"6",md:"4",class:"image-item-col pa-1"},{default:u(()=>[l(J,{class:"image-card elevation-2 card-hover-base",rounded:"lg",onClick:Ee=>U(Re)},{default:u(()=>[l(Y,{color:"primary",variant:"elevated",size:"x-small",class:"media-tag-small text-white","prepend-icon":k(Re.tag)},{default:u(()=>[O(K(D(Re.tag)),1)]),_:2},1032,["prepend-icon"]),l(q,{text:"Delete File"},{activator:u(({props:Ee})=>[l(re,Pe({icon:"",size:"small",variant:"plain",color:"secondary",class:"delete-icon-small"},{ref_for:!0},Ee,{onClick:vn(Ce=>ie(Re),["stop"])}),{default:u(()=>[l(P,{size:"small"},{default:u(()=>[...le[12]||(le[12]=[h("img",{src:Id,alt:"Delete"},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024),l(ae,{src:Re.fileUrl,class:"image-thumbnail",cover:"","aspect-ratio":"1",loading:"lazy",transition:!1},{placeholder:u(()=>[h("div",mke,[l(M,{indeterminate:"",size:"20"})])]),error:u(()=>[h("div",vke,[l(ee,{type:"error",variant:"tonal",density:"compact"},{default:u(()=>[...le[13]||(le[13]=[O(" Failed to load ",-1)])]),_:1})])]),_:1},8,["src"])]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:2},1024)):(R(),Ae("div",hke,[l(P,{icon:"mdi-image-off",size:"32",class:"text-medium-emphasis mb-2"}),le[14]||(le[14]=h("p",{class:"text-caption text-medium-emphasis"},"No images for this date",-1))]))]),_:2},1024),l(Z,{cols:"3",class:"documents-section pl-2"},{default:u(()=>[y(de.items).documents.length>0?(R(),Ae("div",pke,[(R(!0),Ae(Ke,null,Gt(y(de.items).documents,(Re,be)=>(R(),ve(J,{key:`doc-${_e}-${be}`,class:"document-item mb-2 elevation-1",rounded:"md",onClick:Ee=>U(Re),hover:""},{default:u(()=>[l(oe,{class:"pa-2"},{default:u(()=>[h("div",gke,[l(P,{icon:S(Re.type),size:"20",color:E(Re.type),class:"mr-2 flex-shrink-0"},null,8,["icon","color"]),h("div",yke,[h("div",_ke,K(D(Re.tag)),1),h("div",wke,K(C(Re.path)),1)]),l(re,{icon:"",size:"small",variant:"plain",color:"error",class:"ml-1 flex-shrink-0",onClick:vn(Ee=>ie(Re),["stop"])},{default:u(()=>[l(P,{size:"small"},{default:u(()=>[...le[15]||(le[15]=[h("img",{src:Id,alt:"Delete"},null,-1)])]),_:1})]),_:1},8,["onClick"])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])):(R(),Ae("div",bke,[l(P,{icon:"mdi-file-off",size:"32",class:"text-medium-emphasis mb-2"}),le[16]||(le[16]=h("p",{class:"text-caption text-medium-emphasis"},"No documents for this date",-1))]))]),_:2},1024)]),_:2},1024)]))),128))]))]),_:1})]),_:1}),Qe(Ro)?(R(),ve(j,{key:0,modelValue:b.value,"onUpdate:modelValue":le[0]||(le[0]=de=>b.value=de),class:"elevation-24","max-width":"100%"},{default:u(()=>[l(fR,{consultation:s.value,procedure:o.value,patient:t.patient,onClose:T},null,8,["consultation","procedure","patient"])]),_:1},8,["modelValue"])):ye("",!0),Qe(Ro)?ye("",!0):(R(),ve(ce,{key:1,modelValue:b.value,"onUpdate:modelValue":le[1]||(le[1]=de=>b.value=de),persistent:"","max-width":"40%"},{default:u(()=>[l(fR,{consultation:s.value,procedure:o.value,patient:t.patient,onClose:T},null,8,["consultation","procedure","patient"])]),_:1},8,["modelValue"])),Qe(Ro)?(R(),ve(j,{key:2,modelValue:i.value,"onUpdate:modelValue":le[2]||(le[2]=de=>i.value=de),class:"elevation-24","max-width":"100%"},{default:u(()=>[l(vR,{isOpen:i.value,mediaItems:a.value,selectedMedia:c.value,currentIndex:A.value,onClose:L,onNavigate:F},null,8,["isOpen","mediaItems","selectedMedia","currentIndex"])]),_:1},8,["modelValue"])):ye("",!0),Qe(Ro)?ye("",!0):(R(),ve(ce,{key:3,modelValue:i.value,"onUpdate:modelValue":le[3]||(le[3]=de=>i.value=de),"max-width":"90%","max-height":"90%"},{default:u(()=>[l(vR,{isOpen:i.value,mediaItems:a.value,selectedMedia:c.value,currentIndex:A.value,onClose:L,onNavigate:F},null,8,["isOpen","mediaItems","selectedMedia","currentIndex"])]),_:1},8,["modelValue"])),Qe(Ro)?(R(),ve(j,{key:4,modelValue:d.value,"onUpdate:modelValue":le[4]||(le[4]=de=>d.value=de),class:"elevation-24","max-width":"100%","max-height":"95%"},{default:u(()=>[l(hR,{isOpen:d.value,patientId:f.value,doctorId:m.value,onClose:ue},null,8,["isOpen","patientId","doctorId"])]),_:1},8,["modelValue"])):ye("",!0),Qe(Ro)?ye("",!0):(R(),ve(ce,{key:5,modelValue:d.value,"onUpdate:modelValue":le[5]||(le[5]=de=>d.value=de),"max-width":"95%","max-height":"95%"},{default:u(()=>[l(hR,{isOpen:d.value,patientId:f.value,doctorId:m.value,onClose:ue},null,8,["isOpen","patientId","doctorId"])]),_:1},8,["modelValue"])),l(ce,{modelValue:v.value,"onUpdate:modelValue":le[6]||(le[6]=de=>v.value=de),"max-width":"30%",persistent:""},{default:u(()=>[l(lke,{deleteSelectedUpload:p.value,onClose:Q},null,8,["deleteSelectedUpload"])]),_:1},8,["modelValue"])],64)}}},t$=qt(xke,[["__scopeId","data-v-c89e3178"]]),pR=""+new URL("images/no_today_consultation-CFXdUpZK.png",import.meta.url).href,Cke={class:"text-caption"},Ske={class:"text-center"},Eke={class:"text-body-2 text-medium-emphasis mt-2"},Bke={key:1,class:"text-caption text-medium-emphasis ml-2"},kke={class:"d-flex justify-start align-center flex-wrap"},Tke={class:"text-body-2 font-weight-medium text-primary d-flex align-center justify-center"},Ike={class:"text-body-2 font-weight-medium text-primary d-flex align-center justify-center"},Fke={class:"text-body-2 font-weight-medium text-primary d-flex align-center justify-center"},Pke={class:"text-body-2 font-weight-medium text-primary d-flex align-center justify-center"},Dke={class:"medicine-info flex-grow-1"},Uke={class:"d-flex align-center justify-start"},Rke={class:"d-flex align-center"},Nke={class:"medicine-trade-name text-left"},Vke={key:0,class:"text-caption text-medium-emphasis ml-1"},Lke={class:"d-flex flex-column ml-1 order-buttons-container",style:{gap:"2px"}},Mke={class:"d-flex align-center ml-2"},Oke={class:"text-caption text-medium-emphasis text-right"},Hke={class:"d-flex flex-wrap gap-1"},$ke={class:"text-caption text-error d-flex align-center"},Qke={class:"text-caption text-warning d-flex align-center"},Gke={class:"text-caption"},zke={class:"text-center"},Kke={class:"text-body-2 text-medium-emphasis mt-2"},Wke={__name:"consultation-window",props:{consultation:{type:Object,required:!0},patient:{type:Object,required:!0},consultationCopy:{type:Object,required:!1}},emits:["update:consultation","createNewArtefact","pdfGenerated"],setup(e,{emit:t}){const n=e,a=ra(),{showSuccess:r,showError:s,showWarning:o}=ca(),i=t,c=V(Qn.cloneDeep(n.patient)),A=V(Qn.cloneDeep(n.consultation)),d=V([]),f=V(null),m=V("write"),v=V(!1),p=V(!1),g=V(null),y=V(!1),w=V(!1),b=V(!1),x=V(!1),T=V(!1),D=V(!1),k=V({}),S=ne(()=>a.state.doctorModule.doctorId),E=ne(()=>a.getters["doctorModule/currentDoctor"]),C=ne(()=>a.getters["doctorModule/isPharmacyEnabled"]),U=V(!1),F=he=>{if(!he?.consultationDate||!he?.status)return!1;const se=he.consultationDate,ge=he.status,xe=tt=>{if(!tt)return!1;const nt=new Date().toLocaleDateString("en-CA");return tt===nt},He=tt=>{if(!tt)return!1;const nt=new Date().toLocaleDateString("en-CA"),et=new Date(tt),st=new Date(nt);return et>st};return(xe(se)||He(se))&&ge==="CREATED"||ge==="UPDATED"},L=ne(()=>A.value?.id&&A.value.id!=="0"&&F(A.value)),H=ne(()=>A.value?.status==="UPDATED");ne(()=>!d.value||d.value.length===0?!1:d.value.some(he=>he.isPharmacy===!0&&he.quantityUnits!==null&&he.quantityUnits!==void 0&&he.quantityUnits>0));const ue=ne(()=>!P.value||P.value.length===0?[]:P.value.filter(he=>he.isCreatedByUser===!0&&!he.isUserTyped)),ie=he=>he.dosage_schedule&&he.dosage_schedule.trim()||he.duration&&he.duration.trim()||he.instructions&&he.instructions.trim(),Q=he=>he.isSelected?ie(he)?null:"missing-dosage":"unselected",X=he=>{const se=Q(he);return se?`medicine-${se}`:""},le=ne(()=>d.value.filter(he=>he.isSelected&&ie(he)));ne(()=>d.value.filter(he=>he.isSelected&&!ie(he)));const Z=ne(()=>d.value.filter(he=>!he.isSelected)),re=ne(()=>d.value.filter(he=>he.isSelected&&!ie(he))),q=ne(()=>{const he=le.value.length,se=re.value.length,ge=Z.value.length;if(ge===0&&se===0)return"Save Consultation";const xe=[];ge>0&&xe.push(`${ge} unselected will be excluded`),se>0&&xe.push(`${se} without dosage will be excluded`);const He=he>0?`${he} medicine${he>1?"s":""} will be saved`:"";return He?`Save Consultation (${He}, ${xe.join(", ")})`:`Save Consultation (${xe.join(", ")})`}),P=V([]),G=ne(()=>{const he=new Date;return he.setDate(he.getDate()+1),he.toISOString().split("T")[0]}),J=he=>{(he.ctrlKey||he.metaKey)&&he.key==="s"&&(he.preventDefault(),A.value?.id&&A.value.id!=="0"&&Ln(A.value))},M=(he,se=30)=>!he||he.length<=se?he:he.substring(0,se)+"...",te=he=>{if(!he)return"";const se=[];return he.dosageSchedule&&he.dosageSchedule.trim()&&se.push(he.dosageSchedule.trim()),he.duration&&he.duration.trim()&&se.push(he.duration.trim()),he.instructions&&he.instructions.trim()&&se.push(he.instructions.trim()),he.quantityUnits!==null&&he.quantityUnits!==void 0&&se.push(`Qty: ${he.quantityUnits}`),se.join(", ")},Y=he=>{if(!he)return null;if(he instanceof Date){const se=he.getFullYear(),ge=String(he.getMonth()+1).padStart(2,"0"),xe=String(he.getDate()).padStart(2,"0");return`${se}-${ge}-${xe}`}return typeof he=="string"?he.includes("T")?he.split("T")[0]:he:null},W=he=>{if(!he)return"dd-mm";try{let se;if(he instanceof Date)se=he;else if(typeof he=="string")se=new Date(he.includes("T")?he:he+"T12:00:00");else return"dd-mm";return isNaN(se.getTime())?"dd-mm":se.toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}catch(se){return console.error("Error formatting followup date:",se),"dd-mm"}},ee=he=>{A.value.followupDate=Y(he),D.value=!1},ae=he=>{if(!he)return null;try{if(he instanceof Date)return he;if(typeof he=="string"){const se=he.includes("T")?he.split("T")[0]:he;return new Date(se+"T12:00:00")}}catch(se){console.error("Error parsing followup date for picker:",se)}return null},oe=()=>{A.value.followupDate=null},j=he=>{console.log("Tab changed to:",he)};dn(async()=>{await zt(),document.addEventListener("keydown",J)}),Ii(()=>{document.removeEventListener("keydown",J)});const ce=()=>{console.log("Add Item"),v.value=!0},de=()=>{v.value=!1},_e=he=>{g.value=he,p.value=!0},Re=()=>{p.value=!1,g.value=null},be=he=>{const se=d.value.findIndex(ge=>ge.id===he.id);se!==-1&&(d.value[se]={...d.value[se],...he})},Ee=he=>{if(he===0)return;const se=[...d.value];[se[he-1],se[he]]=[se[he],se[he-1]],d.value=se},Ce=he=>{if(he===d.value.length-1)return;const se=[...d.value];[se[he],se[he+1]]=[se[he+1],se[he]],d.value=se},Be=V(!1),Te=V(!1),Oe=V(null),Me=()=>{Be.value=!0,console.log("Diagnosis Template")},rt=he=>{Oe.value=he,Te.value=!0,console.log("Edit Diagnosis Template",he)},ut=()=>{Be.value=!1},Ie=()=>{Be.value=!1},Ue=()=>{Te.value=!1,Oe.value=null},dt=()=>{Te.value=!1,Oe.value=null},Ft=async he=>{if(!he||he==="0"){console.log("Cannot fetch vitals: Invalid consultation ID"),f.value=null;return}try{const{fetchVitalsByConsultation:se}=await Tr(async()=>{const{fetchVitalsByConsultation:xe}=await Promise.resolve().then(()=>BEe);return{fetchVitalsByConsultation:xe}},void 0,import.meta.url),ge=await se(he);f.value=ge.data}catch(se){console.error("Error fetching vitals:",se)}},it=()=>{y.value=!0},qe=()=>{y.value=!1},yt=he=>{f.value=he,y.value=!1},mt=()=>{w.value=!0},xt=()=>{w.value=!1};je(()=>n.patient,he=>{he&&(c.value=Qn.cloneDeep(he),console.log("Patient data updated:",c.value))},{immediate:!0}),je(()=>n.consultation,async he=>{he&&he.id&&he.id!=="0"?(F(he)||console.warn("Consultation window received invalid consultation:",{id:he.id,status:he.status,date:he.consultationDate}),A.value=Qn.cloneDeep(he),console.log("Consultation Details",A.value),d.value=Qn.cloneDeep(A.value.medicines||[]),d.value&&d.value.length>0&&d.value.forEach(se=>{se.isSelected=!0,se.dosage?(se.dosage_schedule=se.dosage.dosageSchedule||"",se.duration=se.dosage.duration||"",se.instructions=se.dosage.instructions||"",se.quantityUnits=se.dosage.quantityUnits!==null&&se.dosage.quantityUnits!==void 0?se.dosage.quantityUnits:null):(se.dosage_schedule=se.dosage_schedule||"",se.duration=se.duration||"",se.instructions=se.instructions||"",se.quantityUnits=se.quantityUnits!==null&&se.quantityUnits!==void 0?se.quantityUnits:null)}),await Ft(he.id)):he&&he.id==="0"&&(A.value=Qn.cloneDeep(he),d.value=[],f.value=null,console.log("No consultation selected"))},{immediate:!0}),je(()=>n.consultationCopy,he=>{console.log("Consultation Copy",he),A.value.doctorNotes=he.doctorNotes,A.value.patientNotes=he.patientNotes,A.value.diagnosis=he.diagnosis,A.value.investigations=he.investigations,A.value.clinicalNotes=he.clinicalNotes||"",d.value=Qn.cloneDeep(he.medicines||[]),d.value&&d.value.length>0&&d.value.forEach(se=>{se.dosage?(se.dosage_schedule=se.dosage.dosageSchedule||"",se.duration=se.dosage.duration||"",se.instructions=se.dosage.instructions||"",se.quantityUnits=se.dosage.quantityUnits!==null&&se.dosage.quantityUnits!==void 0?se.dosage.quantityUnits:null):(se.dosage_schedule=se.dosage_schedule||"",se.duration=se.duration||"",se.instructions=se.instructions||"",se.quantityUnits=se.quantityUnits!==null&&se.quantityUnits!==void 0?se.quantityUnits:null)})}),je(()=>A.value.patientNotes,he=>{he?.trim()||console.log("Patient notes cleared")});const an=async he=>{console.log("Searched Medicine",he);for(const se of he)await Cn(se)},Cn=async he=>{if(d.value.some(se=>se.id===he.id))console.log("Medicine already selected");else{if(he.dosage_schedule=he.dosage_schedule||"",he.duration=he.duration||"",he.instructions=he.instructions||"",he.quantityUnits=he.quantityUnits!==null&&he.quantityUnits!==void 0?he.quantityUnits:null,he.isSelected=!0,he.isLocal===!0)try{const{data:se,error:ge,errorMessage:xe}=await kH(he,S.value,{skipMessages:!0});!ge&&se&&se.length>0?(he.dosageHistory=se,console.log(`Fetched ${se.length} dosage records for local medicine:`,he.productName)):(he.dosageHistory=[],xe&&xe.includes("No dosages found")&&o(xe))}catch(se){console.error("Error fetching dosage history:",se),he.dosageHistory=[]}else he.dosageHistory=[];console.log("Selected Medicine",he),d.value.push(he),console.log("Medicines List",d.value)}},oa=he=>{console.log("New Medicines",he),d.value.push({id:he.id,productName:he.productName,marketer:he.marketer,saltComposition:he.saltComposition,productForm:he.productForm,isLocal:he.isLocal,dosage_schedule:"",duration:"",instructions:"",quantityUnits:null,isSelected:!0})},Vt=(he,se)=>{if(console.log("Selected dosage schedule:",he,"for medicine:",se),!he||!se)return;const ge=d.value.findIndex(xe=>xe.id===se.id);if(ge!==-1){const xe=typeof he=="string"?he:he.dosage_schedule||"";d.value[ge].dosage_schedule=xe,console.log("Updated medicine with dosage schedule:",d.value[ge])}},kt=(he,se)=>{if(console.log("Selected dosage instructions:",he,"for medicine:",se),!se)return;const ge=d.value.findIndex(xe=>xe.id===se.id);if(ge!==-1){const xe=typeof he=="string"?he:he?.instructions||"";d.value[ge].instructions=xe,console.log("Updated medicine with instructions:",d.value[ge])}},at=(he,se)=>{if(console.log("Selected dosage duration:",he,"for medicine:",se),!se)return;const ge=d.value.findIndex(xe=>xe.id===se.id);if(ge!==-1){const xe=typeof he=="string"?he:he?.duration||"";d.value[ge].duration=xe,console.log("Updated medicine with duration:",d.value[ge])}},bt=(he,se)=>{if(console.log("Selected dosage history:",he,"for medicine:",se),!he||!se)return;const ge=d.value.findIndex(xe=>xe.id===se.id);ge!==-1&&(d.value[ge].dosage_schedule=he.dosageSchedule||"",d.value[ge].instructions=he.instructions||"",d.value[ge].duration=he.duration||"",d.value[ge].quantityUnits=he.quantityUnits!==null&&he.quantityUnits!==void 0?he.quantityUnits:null,console.log("Updated medicine with dosage history:",d.value[ge]))},en=async he=>{console.log("Template selected for auto-fill:",he);const{template:se,autoFillData:ge}=he;if(ge.diagnosis&&ge.diagnosis.trim()&&(A.value.diagnosis&&A.value.diagnosis.trim()?A.value.diagnosis.includes(ge.diagnosis)||(A.value.diagnosis+=", "+ge.diagnosis):A.value.diagnosis=ge.diagnosis),ge.instructions&&ge.instructions.trim()&&(A.value.patientNotes&&A.value.patientNotes.trim()?A.value.patientNotes.includes(ge.instructions)||(A.value.patientNotes+=", "+ge.instructions):A.value.patientNotes=ge.instructions),ge.investigations&&ge.investigations.trim()&&(A.value.investigations&&A.value.investigations.trim()?A.value.investigations.includes(ge.investigations)||(A.value.investigations+=", "+ge.investigations):A.value.investigations=ge.investigations),ge.medicines&&Array.isArray(ge.medicines))for(const xe of ge.medicines)xe.medicine&&await Cn(xe.medicine);P.value.some(xe=>xe.id===se.id)||P.value.push(se),console.log("Template auto-fill completed")},Ye=async he=>{if(!he){P.value=[];return}console.log("Diagnosis selected:",he),he.isCreatedByUser&&!he.isUserTyped?(P.value.some(se=>se.id===he.id)||P.value.push(he),await Rt(he)):(P.value=[],console.log("User-typed or history diagnosis - no template extras to process"))},We=async he=>{he&&console.log("Investigation selected:",he)},_t=async he=>{if(!he)return;console.log("Patient advice selected:",he);const se=he.patientAdvice||"",ge=A.value.patientNotes||"";ge.trim()?A.value.patientNotes=ge.trim()+", "+se:A.value.patientNotes=se},Rt=async he=>{if(console.log("Processing Diagnosis Extras",he),!he.isCreatedByUser||he.isUserTyped){console.log("Skipping extras for user-typed text:",he.diagnosisName);return}if(he.instructions&&!A.value.patientNotes.includes(he.instructions)&&(A.value.patientNotes.trim()?A.value.patientNotes+=", "+he.instructions:A.value.patientNotes=he.instructions),he.investigations&&!A.value.investigations.includes(he.investigations)&&(A.value.investigations.trim()?A.value.investigations+=", "+he.investigations:A.value.investigations=he.investigations),he.diagnosisMedicines&&Array.isArray(he.diagnosisMedicines))for(const se of he.diagnosisMedicines)console.log("Diagnosis Medicine",se),se.medicine&&await Cn(se.medicine)},zt=async()=>{try{const he=await hh(S.value);k.value=he.data,console.log("Configuration data fetched:",k.value)}catch(he){console.error("Error fetching diagnosis:",he)}},Pt=()=>{console.log("Create New Consultation"),i("createNewArtefact")},Wt=async()=>{if(!A.value.id||A.value.id==="0"){console.log("Cannot refresh: No valid consultation ID");return}const he=await sU(A.value.id);A.value=Qn.cloneDeep(he.data),d.value=Qn.cloneDeep(A.value.medicines||[]),d.value&&d.value.length>0&&d.value.forEach(se=>{se.isSelected=!0,se.dosage?(se.dosage_schedule=se.dosage.dosageSchedule||"",se.duration=se.dosage.duration||"",se.instructions=se.dosage.instructions||"",se.quantityUnits=se.dosage.quantityUnits!==null&&se.dosage.quantityUnits!==void 0?se.dosage.quantityUnits:null):(se.dosage_schedule=se.dosage_schedule||"",se.duration=se.duration||"",se.instructions=se.instructions||"",se.quantityUnits=se.quantityUnits!==null&&se.quantityUnits!==void 0?se.quantityUnits:null)}),await Ft(A.value.id)},Lt=async he=>{const se=he.patient_id||he.patientId;se&&await lve(se)},ia=async()=>{if(!A.value?.id||A.value.id==="0"){s("Please save the consultation first");return}try{U.value=!0;const{data:he,error:se}=await UH(A.value.id);se?s(se.response?.data?.error||"Failed to send to pharmacy"):r("Draft bill created successfully in pharmacy")}catch(he){console.error("Error sending to pharmacy:",he),s("An unexpected error occurred")}finally{U.value=!1}},Ln=async he=>{if(!he?.id||he.id==="0"){console.log("Cannot save: No valid consultation ID");return}try{const se=d.value.filter(tt=>tt.isSelected),ge=se.length>0;if(he.status="UPDATED",await VM(he),!ge){console.log("Consultation saved successfully without medicines"),await zn(),await Lt(he);return}const xe=await CH(se);console.log("Medicines created response",xe.data),xe.data&&se.forEach(tt=>{xe.data[tt.id]&&(tt.id=xe.data[tt.id]),tt.isLocal=!0}),console.log("Medicines for Dosage",se);const He=await SH(se,S.value);console.log("Dosage created response",he.id,He.data),await EH(he.id,He.data),r("Consultation details and medicines saved successfully"),await zn(),await Lt(he)}catch(se){console.error("Error updating consultation:",se)}},zn=async()=>{try{const he=await sU(A.value.id),se=Qn.cloneDeep(he.data);A.value=se,d.value=Qn.cloneDeep(se.medicines||[]),d.value&&d.value.length>0&&d.value.forEach(ge=>{ge.isSelected=!0,ge.dosage?(ge.dosage_schedule=ge.dosage.dosageSchedule||"",ge.duration=ge.dosage.duration||"",ge.instructions=ge.dosage.instructions||"",ge.quantityUnits=ge.dosage.quantityUnits!==null&&ge.dosage.quantityUnits!==void 0?ge.dosage.quantityUnits:null):(ge.dosage_schedule=ge.dosage_schedule||"",ge.duration=ge.duration||"",ge.instructions=ge.instructions||"",ge.quantityUnits=ge.quantityUnits!==null&&ge.quantityUnits!==void 0?ge.quantityUnits:null)}),await Ft(se.id),i("update:consultation",se),console.log("Emitted fresh consultation data to parent:",se)}catch(he){console.error("Error refreshing consultation data after save:",he),i("update:consultation",Qn.cloneDeep(A.value))}},Yt=he=>{console.log("PDF generated successfully:",he),i("pdfGenerated",he)},Bn=()=>{b.value=!0},ke=he=>{console.log("Clinical notes transcription completed:",he),he&&he.trim()&&(A.value.clinicalNotes&&A.value.clinicalNotes.trim()?A.value.clinicalNotes+=" "+he:A.value.clinicalNotes=he),b.value=!1},ze=()=>{x.value=!0},Fe=he=>{console.log("Patient advice transcription completed:",he),he&&he.trim()&&(A.value.patientNotes&&A.value.patientNotes.trim()?A.value.patientNotes+=" "+he:A.value.patientNotes=he),x.value=!1},Le=()=>{T.value=!0},Ge=he=>{console.log("Doctor notes transcription completed:",he),he&&he.trim()&&(A.value.doctorNotes&&A.value.doctorNotes.trim()?A.value.doctorNotes+=" "+he:A.value.doctorNotes=he),T.value=!1};return(he,se)=>{const ge=I("v-tab"),xe=I("v-tooltip"),He=I("v-tabs"),tt=I("v-card"),nt=I("v-col"),et=I("v-row"),st=I("v-progress-circular"),wt=I("v-btn"),It=I("v-empty-state"),tn=I("v-icon"),kn=I("v-card-subtitle"),hn=I("v-chip"),Sn=I("v-textarea"),Pa=I("v-checkbox"),Er=I("v-text-field"),Zr=I("v-date-picker"),Ss=I("v-menu"),Wo=I("v-divider"),Za=I("v-dialog"),jo=I("v-tabs-window-item"),Es=I("v-tabs-window");return R(),Ae(Ke,null,[l(et,{"no-gutters":""},{default:u(()=>[l(nt,null,{default:u(()=>[l(tt,{rounded:"0",class:"pa-1 patient-header-style",elevation:"0"},{default:u(()=>[l(He,{modelValue:m.value,"onUpdate:modelValue":[se[0]||(se[0]=Nt=>m.value=Nt),j],"align-tabs":"center",density:"compact",class:"interactive-tabs"},{default:u(()=>[l(xe,{text:"Write Prescription"},{activator:u(({props:Nt})=>[l(ge,Pe({value:"write"},Nt,{class:["tab-interactive",{"tab-active":m.value==="write"}],tabindex:"-1"}),{default:u(()=>[...se[21]||(se[21]=[h("div",{class:"tab-content"}," WRITE Rx ",-1)])]),_:1},16,["class"])]),_:1}),l(xe,{text:"Share Prescription"},{activator:u(({props:Nt})=>[l(ge,Pe({value:"share"},Nt,{class:["tab-interactive",{"tab-active":m.value==="share"}]}),{default:u(()=>[...se[22]||(se[22]=[h("div",{class:"tab-content"}," SHARE Rx ",-1)])]),_:1},16,["class"])]),_:1}),l(xe,{text:"Uploaded Items"},{activator:u(({props:Nt})=>[l(ge,Pe({value:"media"},Nt,{class:["tab-interactive",{"tab-active":m.value==="media"}],tabindex:"-1"}),{default:u(()=>[...se[23]||(se[23]=[h("div",{class:"tab-content"}," UPLOADS ",-1)])]),_:1},16,["class"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(Es,{modelValue:m.value,"onUpdate:modelValue":se[18]||(se[18]=Nt=>m.value=Nt),class:"flex-grow-1"},{default:u(()=>[l(jo,{value:"write",class:"h-100"},{default:u(()=>[A.value.id?A.value.id==0?(R(),ve(et,{key:1,"no-gutters":""},{default:u(()=>[l(nt,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%"}},{default:u(()=>[l(It,{image:Qe(pR)},{title:u(()=>[...se[24]||(se[24]=[h("div",{class:"text-subtitle-2"}," No consultation selected ",-1)])]),text:u(()=>[h("div",Cke,[se[26]||(se[26]=O(" Create a consultation by clicking on the button above ",-1)),se[27]||(se[27]=h("br",null,null,-1)),l(wt,{class:"mt-2",onClick:Pt},{default:u(()=>[...se[25]||(se[25]=[O("Create Consultation",-1)])]),_:1})])]),_:1},8,["image"])]),_:1})]),_:1})):A.value.id&&!L.value?(R(),ve(et,{key:2,"no-gutters":""},{default:u(()=>[l(nt,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%"}},{default:u(()=>[h("div",Ske,[l(tn,{size:"48",color:"warning",class:"mb-4"},{default:u(()=>[...se[28]||(se[28]=[O("mdi-alert-circle-outline",-1)])]),_:1}),se[29]||(se[29]=h("div",{class:"text-h6 text-medium-emphasis"},"Invalid consultation",-1)),h("div",Eke,"This consultation cannot be displayed (status: "+K(A.value.status)+")",1)])]),_:1})]),_:1})):(R(),Ae(Ke,{key:3},[l(et,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[l(nt,{cols:"12"},{default:u(()=>[l(tt,{rounded:"0",class:"pa-1 patient-header-style",elevation:"0"},{default:u(()=>[l(et,{"no-gutters":""},{default:u(()=>[l(nt,{cols:"8",style:{"text-align":"left"},class:"d-flex align-center pl-1"},{default:u(()=>[O(K(A.value.consultationDate?new Date(A.value.consultationDate).toLocaleDateString("en-US",{timeZone:"Asia/Kolkata",weekday:"short",month:"short",day:"numeric",year:"numeric"}):A.value.createdAt?Qe(er)(A.value.createdAt):"No date"),1)]),_:1}),l(nt,{cols:"4",class:"d-flex justify-end align-center"},{default:u(()=>[C.value?(R(),ve(xe,{key:0,text:"Send to Pharmacy"},{activator:u(({props:Nt})=>[l(wt,Pe({onClick:ia},Nt,{class:"btn-hover-base mr-1",tabindex:"-1",variant:"outlined",loading:U.value,disabled:!H.value}),{default:u(()=>[...se[30]||(se[30]=[O("Send to Pharmacy",-1)])]),_:1},16,["loading","disabled"])]),_:1})):ye("",!0),l(xe,{text:q.value},{activator:u(({props:Nt})=>[l(wt,Pe({onClick:se[1]||(se[1]=Dr=>Ln(A.value))},Nt,{class:"btn-hover-base mr-1",tabindex:"-1"}),{default:u(()=>[...se[31]||(se[31]=[O("SAVE",-1)])]),_:1},16)]),_:1},8,["text"]),l(xe,{text:"Refresh Consultation"},{activator:u(({props:Nt})=>[l(wt,Pe({rounded:"x-small",size:"small",variant:"outlined"},Nt,{class:"btn-hover-base",onClick:se[2]||(se[2]=Dr=>Wt()),tabindex:"-1"}),{default:u(()=>[l(tn,{size:"large"},{default:u(()=>[...se[32]||(se[32]=[h("img",{src:_g,alt:"Refresh"},null,-1)])]),_:1})]),_:1},16)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(et,{"no-gutters":"",class:"h-100"},{default:u(()=>[l(nt,{cols:"12",class:"scroll-element",style:{"padding-bottom":"20px"}},{default:u(()=>[l(et,{"no-gutters":""},{default:u(()=>[l(nt,{cols:"12"},{default:u(()=>[l(tt,{class:"form-section-card card-status-default ma-2 mb-1 pa-3",elevation:"2"},{default:u(()=>[l(et,{"no-gutters":""},{default:u(()=>[l(nt,{cols:"8",class:"d-flex align-center flex-wrap gap-2"},{default:u(()=>[l(kn,{class:"pa-0"},{default:u(()=>[...se[33]||(se[33]=[h("strong",null,"Vitals",-1)])]),_:1}),f.value?(R(),Ae(Ke,{key:0},[f.value.pulse?(R(),ve(hn,{key:0,color:"primary","text-color":"black",size:"small",class:"ml-2"},{default:u(()=>[se[34]||(se[34]=h("strong",null,"Pulse:",-1)),O(" "+K(Qe(jr)(f.value.pulse,"bpm")),1)]),_:1})):ye("",!0),f.value.systolicBP&&f.value.diastolicBP?(R(),ve(hn,{key:1,color:"primary","text-color":"black",size:"small"},{default:u(()=>[se[35]||(se[35]=h("strong",null,"BP:",-1)),O(" "+K(f.value.systolicBP)+"/"+K(f.value.diastolicBP)+" mmHg ",1)]),_:1})):ye("",!0),f.value.respiratoryRate?(R(),ve(hn,{key:2,color:"primary","text-color":"black",size:"small"},{default:u(()=>[se[36]||(se[36]=h("strong",null,"RR:",-1)),O(" "+K(Qe(jr)(f.value.respiratoryRate,"breaths/min")),1)]),_:1})):ye("",!0),f.value.temperature?(R(),ve(hn,{key:3,color:"primary","text-color":"black",size:"small"},{default:u(()=>[se[37]||(se[37]=h("strong",null,"Temp:",-1)),O(" "+K(Qe(jr)(f.value.temperature,"C")),1)]),_:1})):ye("",!0),f.value.weight?(R(),ve(hn,{key:4,color:"primary","text-color":"black",size:"small"},{default:u(()=>[se[38]||(se[38]=h("strong",null,"Weight:",-1)),O(" "+K(Qe(jr)(f.value.weight,"kg")),1)]),_:1})):ye("",!0),f.value.height?(R(),ve(hn,{key:5,color:"primary","text-color":"black",size:"small"},{default:u(()=>[se[39]||(se[39]=h("strong",null,"Height:",-1)),O(" "+K(Qe(jr)(f.value.height,"cm")),1)]),_:1})):ye("",!0),f.value.serumBilirubin?(R(),ve(hn,{key:6,color:"secondary","text-color":"black",size:"small"},{default:u(()=>[se[40]||(se[40]=h("strong",null,"S.Bilirubin:",-1)),O(" "+K(Qe(jr)(f.value.serumBilirubin,"mg/dL")),1)]),_:1})):ye("",!0),f.value.bloodGlucoseFF?(R(),ve(hn,{key:7,color:"secondary","text-color":"black",size:"small"},{default:u(()=>[se[41]||(se[41]=h("strong",null,"Glucose(FF):",-1)),O(" "+K(Qe(jr)(f.value.bloodGlucoseFF,"mg/dL")),1)]),_:1})):ye("",!0),f.value.bloodGlucosePP?(R(),ve(hn,{key:8,color:"secondary","text-color":"black",size:"small"},{default:u(()=>[se[42]||(se[42]=h("strong",null,"Glucose(PP):",-1)),O(" "+K(Qe(jr)(f.value.bloodGlucosePP,"mg/dL")),1)]),_:1})):ye("",!0),f.value.bloodGlucoseRandom?(R(),ve(hn,{key:9,color:"secondary","text-color":"black",size:"small"},{default:u(()=>[se[43]||(se[43]=h("strong",null,"Glucose(R):",-1)),O(" "+K(Qe(jr)(f.value.bloodGlucoseRandom,"mg/dL")),1)]),_:1})):ye("",!0),f.value.serumCreatinine?(R(),ve(hn,{key:10,color:"secondary","text-color":"black",size:"small"},{default:u(()=>[se[44]||(se[44]=h("strong",null,"S.Creatinine:",-1)),O(" "+K(Qe(jr)(f.value.serumCreatinine,"mg/dL")),1)]),_:1})):ye("",!0)],64)):(R(),Ae("span",Bke," - No vitals recorded yet "))]),_:1}),l(nt,{cols:"4",class:"d-flex justify-end align-center gap-2"},{default:u(()=>[l(xe,{text:f.value?"Edit Vitals":"Add Vitals"},{activator:u(({props:Nt})=>[l(wt,Pe({variant:"outlined",size:"small",class:"d-flex align-center justify-center btn-hover-enhanced"},Nt,{onClick:it,tabindex:"-1"}),{default:u(()=>[l(tn,{start:""},{default:u(()=>[...se[45]||(se[45]=[h("img",{src:ASe,alt:"Vitals"},null,-1)])]),_:1}),O(" "+K(f.value?"Update":"Add"),1)]),_:1},16)]),_:1},8,["text"]),l(xe,{text:"View Trends"},{activator:u(({props:Nt})=>[l(wt,Pe({variant:"outlined",size:"small",class:"d-flex align-center justify-center btn-hover-enhanced"},Nt,{onClick:mt,tabindex:"-1"}),{default:u(()=>[l(tn,{start:""},{default:u(()=>[...se[46]||(se[46]=[h("img",{src:fSe,alt:"Trends"},null,-1)])]),_:1}),se[47]||(se[47]=O(" Trends ",-1))]),_:1},16)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(et,{"no-gutters":""},{default:u(()=>[l(nt,{cols:"12"},{default:u(()=>[l(tt,{class:"form-section-card card-status-default ma-2 mb-1 pa-3",elevation:"2"},{default:u(()=>[l(et,{"no-gutters":"",class:"align-top"},{default:u(()=>[l(nt,{cols:"2",class:"d-flex align-top"},{default:u(()=>[l(kn,{class:"pa-0"},{default:u(()=>[...se[48]||(se[48]=[h("strong",null,"Diagnosis",-1)])]),_:1})]),_:1}),l(nt,{cols:"7",class:"d-flex align-top"},{default:u(()=>[l(DSe,{"doctor-id":S.value,onTemplateSelected:en},null,8,["doctor-id"])]),_:1}),l(nt,{cols:"3",class:"d-flex justify-end align-top"},{default:u(()=>[l(xe,{text:"Save as Template"},{activator:u(({props:Nt})=>[l(wt,Pe({variant:"outlined",size:"small",class:"d-flex align-center justify-center btn-hover-enhanced"},Nt,{onClick:Me,tabindex:"-1"}),{default:u(()=>[l(tn,{start:""},{default:u(()=>[...se[49]||(se[49]=[h("img",{src:xH,alt:"Save Template"},null,-1)])]),_:1}),se[50]||(se[50]=O(" Create Template ",-1))]),_:1},16)]),_:1})]),_:1})]),_:1}),ue.value.length>0?(R(),ve(et,{key:0,"no-gutters":"",class:"mt-n2 mb-2"},{default:u(()=>[l(nt,{cols:"1"}),l(nt,{cols:"10"},{default:u(()=>[h("div",kke,[(R(!0),Ae(Ke,null,Gt(ue.value,Nt=>(R(),ve(xe,{key:Nt.id,text:`Edit template: ${Nt.diagnosisName}`},{activator:u(({props:Dr})=>[l(hn,Pe({variant:"tonal",size:"default",density:"default",color:"primary",text:M(Nt.diagnosisName,30),class:"mr-1 mb-1 chip-hover"},{ref_for:!0},Dr),{append:u(()=>[l(xe,{text:"Edit Template"},{activator:u(({props:Mn})=>[l(tn,Pe({size:"small",onClick:vn(Eo=>rt(Nt),["stop"])},{ref_for:!0},Mn,{class:"ml-1 edit-icon",tabindex:"-1"}),{default:u(()=>[...se[51]||(se[51]=[h("img",{src:pv,alt:"Edit Template"},null,-1)])]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1040,["text"])]),_:2},1032,["text"]))),128))])]),_:1}),l(nt,{cols:"1"})]),_:1})):ye("",!0),l(et,{"no-gutters":""},{default:u(()=>[l(nt,{cols:"1"}),l(nt,{cols:"9"},{default:u(()=>[l(bSe,{modelValue:A.value.diagnosis,"onUpdate:modelValue":se[3]||(se[3]=Nt=>A.value.diagnosis=Nt),"doctor-id":S.value,onDiagnosisSelected:Ye},null,8,["modelValue","doctor-id"])]),_:1}),l(nt,{cols:"2"})]),_:1}),l(et,{"no-gutters":""},{default:u(()=>[l(nt,{cols:"1"}),l(nt,{cols:"9"},{default:u(()=>[l(Sn,{modelValue:A.value.clinicalNotes,"onUpdate:modelValue":se[4]||(se[4]=Nt=>A.value.clinicalNotes=Nt),label:"Clinical Notes",clearable:"","auto-grow":"",rows:"1","row-height":"15",density:"compact",variant:"underlined",name:"clinical-notes",autocomplete:"off","hide-details":"auto"},null,8,["modelValue"])]),_:1}),l(nt,{cols:"1",class:"d-flex align-center justify-center"},{default:u(()=>[l(xe,{text:"Voice Input"},{activator:u(({props:Nt})=>[l(wt,Pe({icon:"mdi-microphone",rounded:"xls",variant:"flat",color:"primary",size:"small"},Nt,{onClick:Bn,tabindex:"-1",class:"dictation-btn"}),null,16)]),_:1})]),_:1}),l(nt,{cols:"1"})]),_:1})]),_:1})]),_:1})]),_:1}),l(et,{"no-gutters":""},{default:u(()=>[l(nt,{cols:"12"},{default:u(()=>[l(tt,{class:"form-section-card card-status-default ma-2 mb-1 pa-3",elevation:"2"},{default:u(()=>[l(et,{"no-gutters":"",class:"align-top"},{default:u(()=>[l(nt,{cols:"2",class:"d-flex align-top"},{default:u(()=>[l(kn,{class:"pa-0"},{default:u(()=>[...se[52]||(se[52]=[h("strong",null,"Rx",-1)])]),_:1})]),_:1}),l(nt,{cols:"7",class:"d-flex align-top px-2"},{default:u(()=>[l(FH,{showInventoryStatus:C.value,onSearchedMedicines:an,onAddMedicine:ce},null,8,["showInventoryStatus"])]),_:1}),l(nt,{cols:"3",class:"d-flex justify-end align-top gap-2"},{default:u(()=>[l(xe,{text:"Add Medicine"},{activator:u(({props:Nt})=>[l(wt,Pe({variant:"outlined",size:"small",class:"d-flex align-center justify-center btn-hover-enhanced"},Nt,{onClick:ce,tabindex:"-1"}),{default:u(()=>[l(tn,{start:""},{default:u(()=>[...se[53]||(se[53]=[h("img",{src:PE,alt:"Add Medicine"},null,-1)])]),_:1}),se[54]||(se[54]=O(" Create Medicine ",-1))]),_:1},16)]),_:1})]),_:1})]),_:1}),l(et,{"no-gutters":""},{default:u(()=>[d.value.length>0?(R(),ve(nt,{key:0,cols:"12"},{default:u(()=>[l(et,{"no-gutters":"",class:"mb-2 mt-0"},{default:u(()=>[l(nt,{cols:C.value?3:4,class:"pr-2"},{default:u(()=>[h("div",Tke,[l(tn,{size:"small",class:"mr-1"},{default:u(()=>[...se[55]||(se[55]=[O("mdi-clock-outline",-1)])]),_:1}),se[56]||(se[56]=O(" Dosage Schedule e.g. 1 after breakfast ",-1))])]),_:1},8,["cols"]),l(nt,{cols:(C.value,3),class:"px-1"},{default:u(()=>[h("div",Ike,[l(tn,{size:"small",class:"mr-1"},{default:u(()=>[...se[57]||(se[57]=[O("mdi-calendar-range",-1)])]),_:1}),se[58]||(se[58]=O(" Duration e.g. 5 days ",-1))])]),_:1},8,["cols"]),l(nt,{cols:C.value?3:5,class:"px-1"},{default:u(()=>[h("div",Fke,[l(tn,{size:"small",class:"mr-1"},{default:u(()=>[...se[59]||(se[59]=[O("mdi-information-outline",-1)])]),_:1}),se[60]||(se[60]=O(" Instructions e.g. on empty stomach ",-1))])]),_:1},8,["cols"]),C.value?(R(),ve(nt,{key:0,cols:"3",class:"pl-2"},{default:u(()=>[h("div",Pke,[l(tn,{size:"small",class:"mr-1"},{default:u(()=>[...se[61]||(se[61]=[O("mdi-numeric",-1)])]),_:1}),se[62]||(se[62]=O(" Quantity e.g. 5 ",-1))])]),_:1})):ye("",!0)]),_:1}),(R(!0),Ae(Ke,null,Gt(d.value,(Nt,Dr)=>(R(),Ae(Ke,{key:Dr},[l(tt,{flat:"",class:ct(["medicine-inline-layout mb-1",X(Nt)])},{default:u(()=>[l(et,{"no-gutters":"",align:"center",class:"mb-1"},{default:u(()=>[l(nt,{cols:"5",class:"d-flex align-center"},{default:u(()=>[l(Pa,{modelValue:Nt.isSelected,"onUpdate:modelValue":Mn=>Nt.isSelected=Mn,color:"primary",density:"compact","hide-details":"",class:"mr-2 flex-shrink-0",style:{"margin-top":"-2px"},tabindex:"-1"},null,8,["modelValue","onUpdate:modelValue"]),h("div",Dke,[h("div",Uke,[h("div",Rke,[h("span",Nke,[O(K(Nt.productName)+" ",1),Nt.productForm?(R(),Ae("span",Vke," ("+K(Nt.productForm)+") ",1)):ye("",!0)]),Nt.isLocal?(R(),ve(xe,{key:0,text:"Edit Medicine"},{activator:u(({props:Mn})=>[l(tn,Pe({size:"small"},{ref_for:!0},Mn,{class:"edit-icon flex-shrink-0 ml-1",onClick:Eo=>_e(Nt),tabindex:"-1"}),{default:u(()=>[...se[63]||(se[63]=[O(" mdi-pencil ",-1)])]),_:1},16,["onClick"])]),_:2},1024)):ye("",!0),h("div",Lke,[l(xe,{text:"Move Up"},{activator:u(({props:Mn})=>[l(tn,Pe({size:"x-small"},{ref_for:!0},Mn,{class:["order-icon",{"order-icon-disabled":Dr===0}],onClick:Eo=>Ee(Dr),tabindex:"-1"}),{default:u(()=>[...se[64]||(se[64]=[O(" mdi-chevron-up ",-1)])]),_:1},16,["class","onClick"])]),_:2},1024),l(xe,{text:"Move Down"},{activator:u(({props:Mn})=>[l(tn,Pe({size:"x-small"},{ref_for:!0},Mn,{class:["order-icon",{"order-icon-disabled":Dr===d.value.length-1}],onClick:Eo=>Ce(Dr),tabindex:"-1"}),{default:u(()=>[...se[65]||(se[65]=[O(" mdi-chevron-down ",-1)])]),_:1},16,["class","onClick"])]),_:2},1024)])]),h("div",Mke,[Nt.isPharmacy?(R(),ve(xe,{key:0,text:"Pharmacy Medicine"},{activator:u(({props:Mn})=>[l(tn,Pe({size:"small"},{ref_for:!0},Mn,{class:"flex-shrink-0"}),{default:u(()=>[...se[66]||(se[66]=[O(" mdi-store-plus-outline ",-1)])]),_:1},16)]),_:1})):Nt.isLocal?(R(),ve(xe,{key:1,text:"Saved Medicine"},{activator:u(({props:Mn})=>[l(tn,Pe({size:"small"},{ref_for:!0},Mn,{class:"flex-shrink-0"}),{default:u(()=>[...se[67]||(se[67]=[h("img",{src:Wd,alt:"Saved Medicine"},null,-1)])]),_:1},16)]),_:1})):(R(),ve(xe,{key:2,text:"External Medicine"},{activator:u(({props:Mn})=>[l(tn,Pe({size:"small"},{ref_for:!0},Mn,{class:"flex-shrink-0"}),{default:u(()=>[...se[68]||(se[68]=[h("img",{src:gh,alt:"External Medicine"},null,-1)])]),_:1},16)]),_:1}))])])])]),_:2},1024),l(nt,{cols:"7",class:"d-flex align-center justify-end pl-2"},{default:u(()=>[h("span",Oke,K(Nt.saltComposition),1)]),_:2},1024)]),_:2},1024),Nt.isLocal&&Nt.dosageHistory&&Nt.dosageHistory.length>0?(R(),ve(et,{key:0,"no-gutters":"",class:"mb-2"},{default:u(()=>[l(nt,{cols:"12"},{default:u(()=>[h("div",Hke,[(R(!0),Ae(Ke,null,Gt(Nt.dosageHistory,(Mn,Eo)=>(R(),ve(hn,{key:Eo,size:"small",variant:"outlined",color:"primary",class:"chip-hover text-caption",onClick:Ys=>bt(Mn,Nt),style:{cursor:"pointer"}},{default:u(()=>[O(K(te(Mn)),1)]),_:2},1032,["onClick"]))),128))])]),_:2},1024)]),_:2},1024)):ye("",!0),l(et,{"no-gutters":"",align:"center"},{default:u(()=>[l(nt,{cols:C.value?3:4,class:"pr-2"},{default:u(()=>[l($Se,{modelValue:Nt.dosage_schedule,"onUpdate:modelValue":Mn=>Nt.dosage_schedule=Mn,"medicine-id":Nt.id,"product-form":Nt.productForm,"doctor-id":S.value,onDosageScheduleSelected:Mn=>Vt(Mn,Nt),class:"flex-grow-1"},null,8,["modelValue","onUpdate:modelValue","medicine-id","product-form","doctor-id","onDosageScheduleSelected"])]),_:2},1032,["cols"]),l(nt,{cols:(C.value,3),class:"px-1"},{default:u(()=>[l(GSe,{modelValue:Nt.duration,"onUpdate:modelValue":Mn=>Nt.duration=Mn,"medicine-id":Nt.id,"product-form":Nt.productForm,"doctor-id":S.value,onDurationSelected:Mn=>at(Mn,Nt),class:"flex-grow-1"},null,8,["modelValue","onUpdate:modelValue","medicine-id","product-form","doctor-id","onDurationSelected"])]),_:2},1032,["cols"]),l(nt,{cols:C.value?3:5,class:"px-1"},{default:u(()=>[l(KSe,{modelValue:Nt.instructions,"onUpdate:modelValue":Mn=>Nt.instructions=Mn,"medicine-id":Nt.id,"product-form":Nt.productForm,"doctor-id":S.value,onInstructionsSelected:Mn=>kt(Mn,Nt),class:"flex-grow-1"},null,8,["modelValue","onUpdate:modelValue","medicine-id","product-form","doctor-id","onInstructionsSelected"])]),_:2},1032,["cols"]),C.value?(R(),ve(nt,{key:0,cols:"3",class:"pl-2"},{default:u(()=>[l(Er,{"model-value":Nt.quantityUnits!==null&&Nt.quantityUnits!==void 0?Nt.quantityUnits:"","onUpdate:modelValue":Mn=>Nt.quantityUnits=Mn===""||Mn===null||Mn===void 0?null:Number(Mn),label:"Quantity",type:"number",variant:"outlined",density:"compact",min:0,disabled:!Nt.isPharmacy,"hide-details":"","single-line":"",class:"flex-grow-1",placeholder:""},{"prepend-inner":u(()=>[l(xe,{text:"Quantity e.g. 5",location:"top"},{activator:u(({props:Mn})=>[l(tn,Pe({ref_for:!0},Mn,{size:"small",class:"text-medium-emphasis mr-1"}),{default:u(()=>[...se[69]||(se[69]=[O(" mdi-numeric ",-1)])]),_:1},16)]),_:1})]),_:1},8,["model-value","onUpdate:modelValue","disabled"])]),_:2},1024)):ye("",!0)]),_:2},1024)]),_:2},1032,["class"]),Nt.isSelected?ye("",!0):(R(),ve(et,{key:0,"no-gutters":"",class:"mb-1"},{default:u(()=>[l(nt,{cols:"12",class:"px-2"},{default:u(()=>[h("div",$ke,[l(tn,{size:"x-small",class:"mr-1"},{default:u(()=>[...se[70]||(se[70]=[O("mdi-alert-circle-outline",-1)])]),_:1}),se[71]||(se[71]=O(" Select this medicine to include it in the prescription ",-1))])]),_:1})]),_:1})),Nt.isSelected&&!ie(Nt)?(R(),ve(et,{key:1,"no-gutters":"",class:"mb-1"},{default:u(()=>[l(nt,{cols:"12",class:"px-2"},{default:u(()=>[h("div",Qke,[l(tn,{size:"x-small",class:"mr-1"},{default:u(()=>[...se[72]||(se[72]=[O("mdi-alert-circle-outline",-1)])]),_:1}),se[73]||(se[73]=O(" Add dosage information to include this medicine in the prescription ",-1))])]),_:1})]),_:1})):ye("",!0)],64))),128))]),_:1})):(R(),ve(nt,{key:1,cols:"12"},{default:u(()=>[l(tt,{flat:"",class:"pa-2"},{default:u(()=>[l(et,{"no-gutters":""},{default:u(()=>[l(nt,{cols:"1"}),l(nt,{cols:"10"},{default:u(()=>[l(kn,{style:{textAlign:"centre"}},{default:u(()=>[...se[74]||(se[74]=[O("No medicines added yet",-1)])]),_:1})]),_:1}),l(nt,{cols:"1"})]),_:1})]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}),l(et,{"no-gutters":""},{default:u(()=>[l(nt,{cols:"12"},{default:u(()=>[l(tt,{class:"form-section-card card-status-default ma-2 mb-1 pa-3",elevation:"2"},{default:u(()=>[l(et,{"no-gutters":""},{default:u(()=>[l(nt,{cols:"12",class:"d-flex align-top mb-2"},{default:u(()=>[l(kn,{class:"pa-0"},{default:u(()=>[...se[75]||(se[75]=[h("strong",null,"Investigations & Patient Advice",-1)])]),_:1})]),_:1})]),_:1}),l(et,{"no-gutters":"",class:"mt-2"},{default:u(()=>[l(nt,{cols:"1"}),l(nt,{cols:"6"},{default:u(()=>[l(SSe,{modelValue:A.value.investigations,"onUpdate:modelValue":se[5]||(se[5]=Nt=>A.value.investigations=Nt),"doctor-id":S.value,onInvestigationSelected:We},null,8,["modelValue","doctor-id"])]),_:1}),l(nt,{cols:"1"}),l(nt,{cols:"3",class:"pl-2"},{default:u(()=>[l(Ss,{modelValue:D.value,"onUpdate:modelValue":se[8]||(se[8]=Nt=>D.value=Nt),"close-on-content-click":!1,transition:"scale-transition","offset-y":""},{activator:u(({props:Nt})=>[l(Er,Pe(Nt,{"model-value":W(A.value.followupDate),label:"Follow-up Date",readonly:"",density:"comfortable",variant:"outlined","hide-details":"auto",class:"input-hover date-input",clearable:"","onClick:clear":oe,onKeydown:[se[6]||(se[6]=GP(Dr=>D.value=!0,["enter"])),se[7]||(se[7]=GP(Dr=>D.value=!0,["space"]))]}),{"append-inner":u(()=>[l(tn,{class:"text-medium-emphasis"},{default:u(()=>[...se[76]||(se[76]=[O("mdi-calendar",-1)])]),_:1})]),_:1},16,["model-value"])]),default:u(()=>[l(Zr,{"model-value":ae(A.value.followupDate),"onUpdate:modelValue":ee,color:"primary",locale:"en-IN",min:G.value},null,8,["model-value","min"])]),_:1},8,["modelValue"])]),_:1}),l(nt,{cols:"1"})]),_:1}),l(et,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(nt,{cols:"1"}),l(nt,{cols:"9"},{default:u(()=>[l(kSe,{"doctor-id":S.value,onPatientAdviceSelected:_t},null,8,["doctor-id"])]),_:1}),l(nt,{cols:"2"})]),_:1}),l(et,{"no-gutters":""},{default:u(()=>[l(nt,{cols:"1"}),l(nt,{cols:"9"},{default:u(()=>[l(Sn,{modelValue:A.value.patientNotes,"onUpdate:modelValue":se[9]||(se[9]=Nt=>A.value.patientNotes=Nt),label:"Patient Advice",clearable:"","auto-grow":"",rows:"2","row-height":"15",density:"compact",variant:"underlined",name:"patient-advice",autocomplete:"off","hide-details":"auto"},null,8,["modelValue"])]),_:1}),l(nt,{cols:"1",class:"d-flex align-center justify-center"},{default:u(()=>[l(xe,{text:"Voice Input"},{activator:u(({props:Nt})=>[l(wt,Pe({icon:"mdi-microphone",rounded:"xls",variant:"flat",color:"primary",size:"small"},Nt,{onClick:ze,tabindex:"-1",class:"dictation-btn"}),null,16)]),_:1})]),_:1}),l(nt,{cols:"1"})]),_:1})]),_:1})]),_:1})]),_:1}),l(et,{"no-gutters":""},{default:u(()=>[l(nt,{cols:"12",class:"px-4 py-1"},{default:u(()=>[l(Wo,{thickness:"2",class:"border-opacity-50"})]),_:1})]),_:1}),l(et,{"no-gutters":""},{default:u(()=>[l(nt,{cols:"12"},{default:u(()=>[l(tt,{class:"form-section-card card-status-default mx-2 pa-3",elevation:"2"},{default:u(()=>[l(et,{"no-gutters":""},{default:u(()=>[l(nt,{cols:"12",class:"d-flex align-top mb-1"},{default:u(()=>[l(kn,{class:"pa-0"},{default:u(()=>[...se[77]||(se[77]=[h("strong",null,"Notes for Doctor",-1)])]),_:1})]),_:1})]),_:1}),l(et,{"no-gutters":""},{default:u(()=>[l(nt,{cols:"1"}),l(nt,{cols:"9"},{default:u(()=>[l(Sn,{clearable:"","auto-grow":"",rows:"1","row-height":"15",density:"compact",variant:"underlined",label:"Notes for Doctor",modelValue:A.value.doctorNotes,"onUpdate:modelValue":se[10]||(se[10]=Nt=>A.value.doctorNotes=Nt),name:"doctor-notes",autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(nt,{cols:"1",class:"d-flex align-center justify-center"},{default:u(()=>[l(xe,{text:"Voice Input"},{activator:u(({props:Nt})=>[l(wt,Pe({icon:"mdi-microphone",rounded:"xls",variant:"flat",color:"primary",size:"small"},Nt,{onClick:Le,tabindex:"-1",class:"dictation-btn"}),null,16)]),_:1})]),_:1}),l(nt,{cols:"1"})]),_:1})]),_:1})]),_:1})]),_:1}),l(Za,{modelValue:p.value,"onUpdate:modelValue":se[11]||(se[11]=Nt=>p.value=Nt),"max-width":"40%",persistent:""},{default:u(()=>[g.value?(R(),ve(PH,{key:0,medicine:g.value,onClose:Re,"onUpdate:medicine":be},null,8,["medicine"])):ye("",!0)]),_:1},8,["modelValue"]),l(Za,{modelValue:v.value,"onUpdate:modelValue":se[12]||(se[12]=Nt=>v.value=Nt),"max-width":"40%",persistent:""},{default:u(()=>[l(CT,{onClose:de,"onUpdate:medicinelist":oa})]),_:1},8,["modelValue"]),l(Za,{modelValue:y.value,"onUpdate:modelValue":se[13]||(se[13]=Nt=>y.value=Nt),"max-width":"50%",persistent:""},{default:u(()=>[l(IEe,{consultation:A.value,patient:c.value,"existing-vitals":f.value,onClose:qe,onVitalsSaved:yt},null,8,["consultation","patient","existing-vitals"])]),_:1},8,["modelValue"]),l(Za,{modelValue:w.value,"onUpdate:modelValue":se[14]||(se[14]=Nt=>w.value=Nt),"max-width":"80%",persistent:""},{default:u(()=>[l(XEe,{"patient-id":c.value.id,"patient-name":c.value.name,onClose:xt},null,8,["patient-id","patient-name"])]),_:1},8,["modelValue"]),l(Xp,{modelValue:b.value,"onUpdate:modelValue":se[15]||(se[15]=Nt=>b.value=Nt),"current-text":A.value.clinicalNotes,label:"Clinical Notes",onTranscriptionComplete:ke},null,8,["modelValue","current-text"]),l(Xp,{modelValue:x.value,"onUpdate:modelValue":se[16]||(se[16]=Nt=>x.value=Nt),"current-text":A.value.patientNotes,label:"Patient Advice",onTranscriptionComplete:Fe},null,8,["modelValue","current-text"]),l(Xp,{modelValue:T.value,"onUpdate:modelValue":se[17]||(se[17]=Nt=>T.value=Nt),"current-text":A.value.doctorNotes,label:"Doctor Notes",onTranscriptionComplete:Ge},null,8,["modelValue","current-text"])]),_:1})]),_:1})],64)):(R(),ve(et,{key:0,"no-gutters":""},{default:u(()=>[l(nt,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[l(st,{indeterminate:"",color:"primary"})]),_:1})]),_:1}))]),_:1}),l(jo,{value:"share",class:"h-100"},{default:u(()=>[A.value.id?A.value.id==0?(R(),ve(et,{key:1,"no-gutters":""},{default:u(()=>[l(nt,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%"}},{default:u(()=>[l(It,{image:Qe(pR)},{title:u(()=>[...se[78]||(se[78]=[h("div",{class:"text-subtitle-2"}," No consultation selected ",-1)])]),text:u(()=>[h("div",Gke,[se[80]||(se[80]=O(" Create a consultation by clicking on the button above ",-1)),se[81]||(se[81]=h("br",null,null,-1)),l(wt,{class:"mt-2",onClick:Pt},{default:u(()=>[...se[79]||(se[79]=[O("Create Consultation",-1)])]),_:1})])]),_:1},8,["image"])]),_:1})]),_:1})):A.value.id&&!L.value?(R(),ve(et,{key:2,"no-gutters":""},{default:u(()=>[l(nt,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%"}},{default:u(()=>[h("div",zke,[l(tn,{size:"48",color:"warning",class:"mb-4"},{default:u(()=>[...se[82]||(se[82]=[O("mdi-alert-circle-outline",-1)])]),_:1}),se[83]||(se[83]=h("div",{class:"text-h6 text-medium-emphasis"},"Invalid consultation",-1)),h("div",Kke,"This consultation cannot be displayed (status: "+K(A.value.status)+")",1)])]),_:1})]),_:1})):(R(),ve(et,{key:3,"no-gutters":"",class:"h-100"},{default:u(()=>[l(nt,{cols:"12"},{default:u(()=>[l(ph,{"content-type":"consultation",data:{consultation:A.value,medicines:d.value,vitals:f.value,printConfigurations:k.value,doctor:E.value},patient:c.value,onPdfGenerated:Yt},null,8,["data","patient"])]),_:1})]),_:1})):(R(),ve(et,{key:0,"no-gutters":""},{default:u(()=>[l(nt,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[l(st,{indeterminate:"",color:"primary"})]),_:1})]),_:1}))]),_:1}),l(jo,{value:"media",class:"h-100"},{default:u(()=>[l(et,{"no-gutters":"","aria-label":"toolbar",class:"h-100"},{default:u(()=>[l(nt,{cols:"12"},{default:u(()=>[l(t$,{consultation:A.value,patient:c.value},null,8,["consultation","patient"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(Za,{modelValue:Be.value,"onUpdate:modelValue":se[19]||(se[19]=Nt=>Be.value=Nt),persistent:"","max-width":"40%"},{default:u(()=>[l(pSe,{diagnosis:A.value.diagnosis,patientNotes:A.value.patientNotes,investigations:A.value.investigations,medicineList:d.value,"doctor-id":S.value,onClose:ut,"onUpdate&close":Ie},null,8,["diagnosis","patientNotes","investigations","medicineList","doctor-id"])]),_:1},8,["modelValue"]),l(Za,{modelValue:Te.value,"onUpdate:modelValue":se[20]||(se[20]=Nt=>Te.value=Nt),persistent:"","max-width":"50%"},{default:u(()=>[l(ySe,{medicineList:d.value,selectedDiagnosis:Oe.value,onClose:Ue,"onUpdate&close":dt},null,8,["medicineList","selectedDiagnosis"])]),_:1},8,["modelValue"])],64)}}},n$=qt(Wke,[["__scopeId","data-v-73f3a8d7"]]),jke={__name:"create-procedure",emits:["close","update:procedurelist"],setup(e,{emit:t}){const n=t,a=ra(),r=ne(()=>a.state.doctorModule.doctorId),s=V({procedureName:"",cost:0,description:""}),o=V(!1),i=V(!1),c=[f=>f!=null&&f>=0||"Cost must be a positive number"],A=()=>{n("close")},d=async f=>{if(o.value){if(!r.value){console.error("Doctor ID not available");return}i.value=!0;try{const m=await lT(f.procedureName,f.cost,f.description,!0,"","",r.value);m.error?console.error("Error creating procedure:",m.error):(n("update:procedurelist",m.data),A())}catch(m){console.error("Error creating procedure:",m)}finally{i.value=!1}}};return(f,m)=>{const v=I("v-card-title"),p=I("v-col"),g=I("v-icon"),y=I("v-btn"),w=I("v-row"),b=I("v-card"),x=I("v-text-field"),T=I("v-textarea"),D=I("v-divider"),k=I("v-form");return R(),ve(b,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(w,{"no-gutters":""},{default:u(()=>[l(p,{cols:"12"},{default:u(()=>[l(b,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(w,{"no-gutters":""},{default:u(()=>[l(p,{cols:"11"},{default:u(()=>[l(v,{class:"pa-0 pl-2"},{default:u(()=>[...m[5]||(m[5]=[O("Create New Procedure",-1)])]),_:1})]),_:1}),l(p,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(y,{icon:"",size:"x-small",onClick:A},{default:u(()=>[l(g,null,{default:u(()=>[...m[6]||(m[6]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(w,{"no-gutters":""},{default:u(()=>[l(p,{cols:"12"},{default:u(()=>[l(b,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(k,{modelValue:o.value,"onUpdate:modelValue":m[4]||(m[4]=S=>o.value=S),"validate-on":"blur"},{default:u(()=>[l(w,{"no-gutters":""},{default:u(()=>[l(p,{cols:"12"},{default:u(()=>[l(x,{label:"Procedure Name *",density:"compact",modelValue:s.value.procedureName,"onUpdate:modelValue":m[0]||(m[0]=S=>s.value.procedureName=S),rules:Qe(fr)},null,8,["modelValue","rules"])]),_:1}),l(p,{cols:"12"},{default:u(()=>[l(x,{label:"Cost *",density:"compact",modelValue:s.value.cost,"onUpdate:modelValue":m[1]||(m[1]=S=>s.value.cost=S),modelModifiers:{number:!0},type:"number",min:"0",step:"0.01",prefix:"",rules:c},null,8,["modelValue"])]),_:1}),l(p,{cols:"12"},{default:u(()=>[l(T,{label:"Description",density:"compact",modelValue:s.value.description,"onUpdate:modelValue":m[2]||(m[2]=S=>s.value.description=S),rows:"3"},null,8,["modelValue"])]),_:1})]),_:1}),l(D),l(w,{"no-gutters":""},{default:u(()=>[l(p,{cols:"2"}),l(p,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(y,{variant:"outlined",onClick:m[3]||(m[3]=S=>d(s.value)),disabled:!o.value,loading:i.value},{default:u(()=>[...m[7]||(m[7]=[O(" Create ",-1)])]),_:1},8,["disabled","loading"])]),_:1}),l(p,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},qke={__name:"edit-procedure",props:{procedure:{type:Object,required:!0}},emits:["close","procedureUpdated"],setup(e,{emit:t}){const n=t,a=ra(),r=ne(()=>a.state.doctorModule.doctorId),o=e.procedure||{},i=V({...Qn.cloneDeep(o),procedureName:o.treatmentName||o.treatment_name||o.procedureName||o.procedure_name||"",description:o.description||o.treatmentDescription||o.procedureDescription||"",cost:o.cost||o.costEstimate||o.cost_estimate||o.procedureCost||0,id:o.id||o.procedure_id||""}),c=V(!1),A=V(!1),d=[v=>v==null||v===""?"Cost is required":v<0?"Cost must be positive":!0],f=()=>{n("close")},m=async()=>{if(!i.value.id){console.error("Cannot update procedure: missing ID");return}if(!r.value){console.error("Doctor ID not available");return}c.value=!0,console.log("Updating procedure",i.value);try{const v=await XM(i.value.id,{procedure_name:i.value.procedureName,description:i.value.description,cost:i.value.cost},r.value);if(v.error)throw console.error("Error updating procedure",v.error),new Error(v.error.message||"Failed to update procedure");console.log("Procedure updated successfully",v.data),n("procedureUpdated",v.data),f()}catch(v){console.error("Error updating procedure",v)}finally{c.value=!1}};return(v,p)=>{const g=I("v-card-title"),y=I("v-col"),w=I("v-icon"),b=I("v-btn"),x=I("v-row"),T=I("v-card"),D=I("v-text-field"),k=I("v-textarea"),S=I("v-divider"),E=I("v-form");return R(),ve(T,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(x,{"no-gutters":""},{default:u(()=>[l(y,{cols:"12"},{default:u(()=>[l(T,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(x,{"no-gutters":""},{default:u(()=>[l(y,{cols:"11"},{default:u(()=>[l(g,{class:"pa-0 pl-2"},{default:u(()=>[...p[4]||(p[4]=[O("Edit Procedure",-1)])]),_:1})]),_:1}),l(y,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(b,{icon:"",size:"x-small",onClick:f},{default:u(()=>[l(w,null,{default:u(()=>[...p[5]||(p[5]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(x,{"no-gutters":""},{default:u(()=>[l(y,{cols:"12"},{default:u(()=>[l(T,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(E,{modelValue:A.value,"onUpdate:modelValue":p[3]||(p[3]=C=>A.value=C),"validate-on":"blur"},{default:u(()=>[l(x,{"no-gutters":""},{default:u(()=>[l(y,{cols:"12"},{default:u(()=>[l(D,{label:"Procedure Name *",density:"compact",modelValue:i.value.procedureName,"onUpdate:modelValue":p[0]||(p[0]=C=>i.value.procedureName=C),clearable:"",rules:Qe(fr)},null,8,["modelValue","rules"])]),_:1}),l(y,{cols:"12"},{default:u(()=>[l(k,{label:"Procedure Description",density:"compact",modelValue:i.value.description,"onUpdate:modelValue":p[1]||(p[1]=C=>i.value.description=C),clearable:"",rows:"2","auto-grow":""},null,8,["modelValue"])]),_:1}),l(y,{cols:"12"},{default:u(()=>[l(D,{label:"Base Cost *",density:"compact",modelValue:i.value.cost,"onUpdate:modelValue":p[2]||(p[2]=C=>i.value.cost=C),modelModifiers:{number:!0},type:"number",min:"0",step:"0.01",prefix:"",clearable:"",rules:d},null,8,["modelValue"])]),_:1})]),_:1}),l(S),l(x,{"no-gutters":""},{default:u(()=>[l(y,{cols:"2"}),l(y,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(b,{variant:"outlined",onClick:m,disabled:!A.value,loading:c.value},{default:u(()=>[...p[6]||(p[6]=[O(" Update Procedure ",-1)])]),_:1},8,["disabled","loading"])]),_:1}),l(y,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},Yke={__name:"delete-procedure-treatment",props:{procedureTreatment:{type:Object,required:!0},treatmentPlanId:{type:[String,Number],required:!0}},emits:["close","deleted"],setup(e,{emit:t}){const n=e,a=t,r=V(n.procedureTreatment),s=()=>{a("close")},o=async i=>{try{const c=await JM(n.treatmentPlanId,i.id);c.error?console.error("Error deleting procedure treatment mapping:",c.error):(console.log("Procedure treatment mapping deleted successfully"),a("deleted",i))}catch(c){console.error("Error deleting procedure treatment mapping:",c)}s()};return(i,c)=>{const A=I("v-card-title"),d=I("v-col"),f=I("v-icon"),m=I("v-btn"),v=I("v-row"),p=I("v-card"),g=I("v-card-text"),y=I("v-divider");return R(),ve(p,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(v,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(p,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(v,{"no-gutters":""},{default:u(()=>[l(d,{cols:"11"},{default:u(()=>[l(A,{class:"pa-0 pl-2"},{default:u(()=>[...c[1]||(c[1]=[O("Confirm Procedure Removal",-1)])]),_:1})]),_:1}),l(d,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(m,{icon:"",size:"x-small",onClick:s},{default:u(()=>[l(f,null,{default:u(()=>[...c[2]||(c[2]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(v,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(p,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(v,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(g,{class:"text-left"},{default:u(()=>[...c[3]||(c[3]=[O(" Are you sure you want to remove this procedure from the treatment plan? ",-1),h("span",{class:"text-red font-weight-bold"}," You will not be able to recover this data once deleted. ",-1)])]),_:1})]),_:1})]),_:1}),l(y),l(v,{"no-gutters":""},{default:u(()=>[l(d,{cols:"2"}),l(d,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(m,{variant:"outlined",onClick:c[0]||(c[0]=w=>o(r.value))},{default:u(()=>[...c[4]||(c[4]=[O("Yes, Remove Procedure",-1)])]),_:1})]),_:1}),l(d,{cols:"2"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},Xke={class:"procedure-name-wrap"},Jke={class:"font-weight-medium"},Zke={class:"text-center"},eTe={__name:"search-procedure",emits:["handleSearchedProcedures","addProcedure"],setup(e,{emit:t}){const n=t,a=ra(),r=ne(()=>a.state.doctorModule.doctorId),s=()=>{n("addProcedure")},o=V(!1),i=V([]),c=V(""),A=V([]),d=V(!1);let f=null;je(c,p=>{if(f&&clearTimeout(f),d.value=!1,!p||p.trim().length===0){o.value=!1;return}f=setTimeout(()=>{m(p)},300)}),je(A,p=>{console.log("Search add procedures changed:",p),p.length>0&&(n("handleSearchedProcedures",p),A.value=[])});const m=async p=>{if(!(!p||p.trim().length===0)){if(!r.value){console.error("Doctor ID not available for procedure search");return}o.value=!0,d.value=!1;try{const g=new URLSearchParams;g.append("doctor_id",r.value);const y=await At.get(`procedure/search_procedure/${p}?${g.toString()}`);i.value=y.data.data.procedures,(!i.value||i.value.length===0)&&(d.value=!0)}catch(g){console.error("Error fetching procedures:",g),d.value=!0}finally{o.value=!1}}},v=ne(()=>!c.value||c.value.trim().length===0?"Start typing to search procedures":o.value?"Searching procedures...":d.value?"No procedures found matching your search. Try different keywords or create new procedure below.":"");return(p,g)=>{const y=I("v-icon"),w=I("v-list-item"),b=I("v-divider"),x=I("v-card-subtitle"),T=I("v-btn"),D=I("v-card"),k=I("v-chip"),S=I("v-autocomplete");return R(),ve(S,{multiple:"",clearable:"","clear-on-select":"","hide-selected":"",chips:"","closable-chips":"",density:"compact",variant:"outlined",label:"Search procedures",items:i.value,search:c.value,"onUpdate:search":g[0]||(g[0]=E=>c.value=E),loading:o.value,"item-title":"procedureName","item-value":"item","return-object":"",modelValue:A.value,"onUpdate:modelValue":g[1]||(g[1]=E=>A.value=E),rounded:"l","prepend-inner-icon":"mdi-magnify","no-data-text":v.value,placeholder:o.value?"Searching...":"Start typing to search procedures"},{item:u(({props:E,item:C,index:U})=>[l(w,Pe(E,{density:"compact"}),{title:u(()=>[h("span",Xke,K(C.raw.procedureName),1)]),append:u(()=>[C.raw.isLocal?(R(),ve(y,{key:0},{default:u(()=>[...g[2]||(g[2]=[h("img",{src:Wd,alt:"Local Procedure"},null,-1)])]),_:1})):(R(),ve(y,{key:1},{default:u(()=>[...g[3]||(g[3]=[h("img",{src:gh,alt:"External Procedure"},null,-1)])]),_:1}))]),_:2},1040),U===i.value.length-1?(R(),Ae(Ke,{key:0},[l(b),l(D,{flat:"",class:"pt-1"},{default:u(()=>[l(x,null,{default:u(()=>[...g[4]||(g[4]=[O("Procedure not in list?",-1)])]),_:1}),l(T,{class:"ml-3",variant:"outlined",onClick:s},{default:u(()=>[l(y,{class:"mr-2"},{default:u(()=>[...g[5]||(g[5]=[O("mdi-plus",-1)])]),_:1}),g[6]||(g[6]=O(" Create Procedure ",-1))]),_:1})]),_:1})],64)):ye("",!0)]),chip:u(({props:E,item:C})=>[l(k,Pe(E,{size:"small",class:"mr-1"}),{default:u(()=>[h("span",Jke,K(C.raw.procedureName),1)]),_:2},1040)]),"no-data":u(()=>[c.value&&c.value.trim().length>0?(R(),ve(D,{key:0,flat:"",class:"pa-4"},{default:u(()=>[h("div",Zke,[l(x,{class:"mb-2"},{default:u(()=>[O(K(v.value),1)]),_:1}),l(T,{variant:"outlined",color:"primary",onClick:s},{default:u(()=>[l(y,{class:"mr-2"},{default:u(()=>[...g[7]||(g[7]=[O("mdi-plus",-1)])]),_:1}),g[8]||(g[8]=O(" Create Procedure ",-1))]),_:1})])]),_:1})):(R(),ve(D,{key:1,flat:"",class:"pa-4 text-center"},{default:u(()=>[l(x,null,{default:u(()=>[O(K(v.value),1)]),_:1})]),_:1}))]),_:1},8,["items","search","loading","modelValue","no-data-text","placeholder"])}}},tTe=qt(eTe,[["__scopeId","data-v-c9cffa1d"]]),nTe={class:"procedure-care-multiline"},aTe={__name:"search-post-procedure-care",props:{doctorId:{type:[String,Number],required:!0}},emits:["postProcedureCareSelected"],setup(e,{emit:t}){const n=e,a=t,r=V(!1),s=V([]),o=V(""),i=V(null),c=V(!1);let A=null;const d=g=>{s.value.some(w=>w.description===g)||(o.value=g)},f=()=>{(!o.value||o.value.length===0)&&s.value.length===0&&v("")},m=g=>{g&&(a("postProcedureCareSelected",g),i.value=null)};je(o,g=>{A&&clearTimeout(A),c.value=!1,A=setTimeout(()=>{v(g||"")},300)});const v=async g=>{r.value=!0,c.value=!1;try{const y=g||"",w=await At.get(`procedure/search_descriptions/${encodeURIComponent(y)}`,{params:{doctor_id:n.doctorId}});s.value=w.data.data.descriptions.filter(b=>b.description&&b.description.trim().length>0),(!s.value||s.value.length===0)&&(c.value=!0)}catch(y){console.error("Error fetching procedure care instructions:",y),c.value=!0}finally{r.value=!1}},p=ne(()=>!o.value||o.value.length<1?r.value?"Loading recent procedure care instructions...":c.value?"No procedure care instructions found. Start typing to search.":"Start typing to search procedure care instructions":r.value?"Searching procedure care instructions...":c.value?"No matches found in procedure care instructions.":"");return Ii(()=>{A&&(clearTimeout(A),A=null)}),(g,y)=>{const w=I("v-icon"),b=I("v-tooltip"),x=I("v-list-item"),T=I("v-card-subtitle"),D=I("v-card"),k=I("v-autocomplete");return R(),ve(k,{modelValue:i.value,"onUpdate:modelValue":[y[0]||(y[0]=S=>i.value=S),m],items:s.value,search:o.value,"onUpdate:search":d,onFocus:f,"item-title":"description","item-value":"description",label:"Search Post-Procedure Care Instructions",placeholder:"Type to search procedure care instructions...",variant:"outlined",loading:r.value,"no-data-text":p.value,clearable:"","hide-no-data":"","auto-select-first":"",density:"compact","return-object":"",class:"procedure-care-search"},{item:u(({props:S,item:E})=>[l(x,Pe(S,{density:"compact",class:"procedure-care-list-item"}),{title:u(()=>[h("div",nTe,K(E.raw.description),1)]),append:u(()=>[l(b,{location:"top"},{activator:u(({props:C})=>[l(w,Pe(C,{size:"small"}),{default:u(()=>[E.raw.isFromHistory?(R(),ve(w,{key:0,icon:"mdi-history",color:"primary"})):ye("",!0)]),_:2},1040)]),default:u(()=>[h("span",null,K(E.raw.isFromHistory?"From your procedure history":"Custom procedure care instructions"),1)]),_:2},1024)]),_:2},1040)]),"no-data":u(()=>[l(D,{flat:"",class:"pa-4 text-center"},{default:u(()=>[l(T,null,{default:u(()=>[O(K(p.value),1)]),_:1})]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},gR=qt(aTe,[["__scopeId","data-v-69ba2d09"]]),rTe={class:"template-name template-name-truncate"},sTe={class:"text-caption template-subtitle-truncate"},oTe={key:0},iTe={__name:"treatment-plan-template-autocomplete",props:{doctorId:{type:[String,Number],required:!0}},emits:["template-selected"],setup(e,{emit:t}){const n=e,a=t,r=V(null),s=V([]),o=V(""),i=V(!1),c=V(!1);let A=null;const d=w=>{o.value=w},f=()=>{s.value.length===0&&(!o.value||o.value.length===0)&&v()};je(o,w=>{if(A&&clearTimeout(A),!w||w.length===0){v();return}A=setTimeout(()=>{p(w)},300)});const m=w=>{w&&typeof w=="object"&&(console.log("Template selected:",w),a("template-selected",{template:w,autoFillData:{treatmentPlanName:w.treatmentPlanName,notes:w.notes||"",procedures:(w.procedures||[]).map(b=>({procedureId:b.procedureId,costEstimate:b.costEstimate||0,procedureCost:b.procedureCost||0,procedureName:b.procedureName||"",location:b.location||"",option:b.option||"",procedureDescription:b.procedureDescription||""}))}}),setTimeout(()=>{r.value=null,o.value="",s.value=[]},100))},v=async()=>{i.value=!0;try{const w=await rO(n.doctorId);w.error?(s.value=[],c.value=!0):(s.value=w.data||[],c.value=!0)}catch(w){console.error("Error fetching all templates:",w),s.value=[],c.value=!0}finally{i.value=!1}},p=async w=>{if(!(!w||w.length===0)){i.value=!0;try{const b=await eO(w,n.doctorId);b.error?s.value=[]:s.value=b.data||[]}catch(b){console.error("Error fetching templates:",b),s.value=[]}finally{i.value=!1}}},g=w=>{const b=[];return w.notes&&b.push(`Notes: ${w.notes.substring(0,30)}...`),w.procedures&&w.procedures.length>0&&b.push(`${w.procedures.length} procedure(s)`),b.join(" | ")||"Template"},y=ne(()=>i.value?!o.value||o.value.length===0?"Loading templates...":"Searching templates...":!o.value||o.value.length===0?c.value&&s.value.length===0?"No saved treatment plan templates found. Create templates during consultations to see them here.":"Click to view your saved treatment plan templates":o.value&&s.value.length===0?`No templates found for "${o.value}". Try a different search term.`:"");return(w,b)=>{const x=I("v-icon"),T=I("v-tooltip"),D=I("v-list-item"),k=I("v-list"),S=I("v-card-subtitle"),E=I("v-card-text"),C=I("v-card"),U=I("v-autocomplete");return R(),ve(U,{modelValue:r.value,"onUpdate:modelValue":[b[0]||(b[0]=F=>r.value=F),m],items:s.value,search:o.value,"onUpdate:search":d,onFocus:f,"item-title":"treatmentPlanName","item-value":"treatmentPlanName",label:"select treatment plan template (optional)",placeholder:"Search saved templates...",variant:"outlined",loading:i.value,"no-data-text":y.value,clearable:"","return-object":"",density:"compact","prepend-inner-icon":"mdi-magnify",class:"template-autocomplete"},{item:u(({props:F,item:L})=>[l(k,{density:"compact",class:"template-search-list"},{default:u(()=>[l(D,Pe(F,{class:"template-search-item"}),{title:u(()=>[h("span",rTe,K(L.raw.treatmentPlanName),1)]),subtitle:u(()=>[h("span",sTe,K(g(L.raw)),1)]),append:u(()=>[l(T,{location:"top"},{activator:u(({props:H})=>[l(x,Pe(H,{size:"small",color:"primary"}),{default:u(()=>[...b[1]||(b[1]=[O(" mdi-bookmark ",-1)])]),_:1},16)]),default:u(()=>[b[2]||(b[2]=h("span",null,"Saved Template",-1))]),_:1})]),_:2},1040)]),_:2},1024)]),"no-data":u(()=>[l(C,{flat:"",class:"pa-4 text-center"},{default:u(()=>[c.value&&s.value.length===0&&!o.value?(R(),Ae("div",oTe,[l(x,{color:"grey-lighten-1",size:"48",class:"mb-2"},{default:u(()=>[...b[3]||(b[3]=[O("mdi-bookmark-outline",-1)])]),_:1}),l(S,{class:"text-wrap mb-2"},{default:u(()=>[...b[4]||(b[4]=[O("No saved treatment plan templates found",-1)])]),_:1}),l(E,{class:"text-caption text-grey"},{default:u(()=>[...b[5]||(b[5]=[O(" Save treatment plan templates during consultations to quickly reuse them here. ",-1)])]),_:1})])):(R(),ve(S,{key:1,class:"text-wrap"},{default:u(()=>[O(K(y.value),1)]),_:1}))]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},lTe=qt(iTe,[["__scopeId","data-v-c280e42e"]]),uTe={class:"text-caption mr-3"},cTe={key:0,class:"text-caption mr-3"},dTe={key:1,class:"text-caption mr-3"},ATe={key:2,class:"text-caption"},fTe={__name:"create-treatment-plan-template",props:{procedureList:{type:Array,default:()=>[]},treatmentPlanName:{type:String,default:""},notes:{type:String,default:""},doctorId:{type:[String,Number],required:!0}},emits:["close","update&close"],setup(e,{emit:t}){const n=e,a=t,r=V(n.treatmentPlanName),s=V(n.notes),o=V(!1),i=V(!1),c=V([]),A=V(""),d=V(null),f=ne(()=>n.procedureList.filter(g=>g.isLocal&&(g.procedureName||g.procedure_name)&&g.id!==void 0&&g.id!==null)),m=()=>{d.value&&d.value.abort(),a("close")},v=(g,y)=>{if(y)c.value.includes(g.id)||c.value.push(g.id),console.log("Procedure selected:",g.procedureName||g.procedure_name);else{const w=c.value.indexOf(g.id);w>-1&&c.value.splice(w,1),console.log("Procedure deselected:",g.procedureName||g.procedure_name)}A.value=""},p=async()=>{if(c.value.length===0){A.value="Please select at least one procedure to create a template";return}i.value=!0,A.value="",d.value=new AbortController;const g=n.procedureList.filter(w=>c.value.includes(w.id)),y={doctor_id:n.doctorId,treatmentplan_name:r.value,notes:s.value||"",procedures:g.map(w=>({procedure_id:w.procedureId||w.procedure_id||w.id,cost_estimate:w.costEstimate!==void 0&&w.costEstimate!==null?parseFloat(w.costEstimate):parseFloat(w.cost||w.procedureCost||0),location:w.location||"",option:w.option||""}))};console.log("Creating new treatment plan template:",y);try{const w=await tO(y);if(d.value?.signal.aborted)return;w.error?(A.value="Failed to create treatment plan template. Please try again.",console.error("Error creating treatment plan template:",w.error)):(console.log("Treatment plan template created successfully"),a("update&close"))}catch(w){d.value?.signal.aborted||(A.value="An unexpected error occurred. Please try again.",console.error("Error creating treatment plan template:",w))}finally{d.value?.signal.aborted||(i.value=!1),d.value=null}};return va(()=>{d.value&&d.value.abort()}),(g,y)=>{const w=I("v-card-title"),b=I("v-col"),x=I("v-icon"),T=I("v-btn"),D=I("v-row"),k=I("v-card"),S=I("v-text-field"),E=I("v-textarea"),C=I("v-divider"),U=I("v-card-subtitle"),F=I("v-checkbox"),L=I("v-chip"),H=I("v-card-text"),ue=I("v-alert"),ie=I("v-form");return R(),ve(k,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(D,{"no-gutters":""},{default:u(()=>[l(b,{cols:"12"},{default:u(()=>[l(k,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(D,{"no-gutters":""},{default:u(()=>[l(b,{cols:"11"},{default:u(()=>[l(w,{class:"pa-0 pl-2"},{default:u(()=>[...y[3]||(y[3]=[O("Create Treatment Plan Template",-1)])]),_:1})]),_:1}),l(b,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(T,{icon:"",size:"x-small",onClick:m},{default:u(()=>[l(x,null,{default:u(()=>[...y[4]||(y[4]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(D,{"no-gutters":""},{default:u(()=>[l(b,{cols:"12"},{default:u(()=>[l(k,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(ie,{modelValue:o.value,"onUpdate:modelValue":y[2]||(y[2]=Q=>o.value=Q),"validate-on":"blur"},{default:u(()=>[l(D,{"no-gutters":""},{default:u(()=>[l(b,{cols:"12"},{default:u(()=>[l(S,{label:"Treatment Plan Name *",density:"compact",modelValue:r.value,"onUpdate:modelValue":y[0]||(y[0]=Q=>r.value=Q),rules:Qe(fr)},null,8,["modelValue","rules"])]),_:1}),l(b,{cols:"12"},{default:u(()=>[l(E,{label:"Notes",density:"compact",modelValue:s.value,"onUpdate:modelValue":y[1]||(y[1]=Q=>s.value=Q),rows:"2","auto-grow":""},null,8,["modelValue"])]),_:1})]),_:1}),l(D,{"no-gutters":""},{default:u(()=>[l(b,{cols:"12"},{default:u(()=>[l(C,{class:"my-3"},{default:u(()=>[...y[5]||(y[5]=[O("Procedures",-1)])]),_:1}),f.value.length>0?(R(),ve(k,{key:0,variant:"outlined"},{default:u(()=>[l(U,{class:"pb-2"},{default:u(()=>[...y[6]||(y[6]=[O("Available Local Procedures (from current treatment plan):",-1)])]),_:1}),l(H,null,{default:u(()=>[(R(!0),Ae(Ke,null,Gt(f.value,Q=>(R(),ve(k,{key:`available-${Q.id}`,flat:""},{default:u(()=>[l(D,{"no-gutters":"",class:"align-center"},{default:u(()=>[l(b,{cols:"auto",class:"d-flex align-center justify-start"},{default:u(()=>[l(F,{"model-value":c.value.includes(Q.id),color:"primary",density:"compact","hide-details":"","onUpdate:modelValue":X=>v(Q,X)},null,8,["model-value","onUpdate:modelValue"]),l(L,{color:"primary","text-color":"black",size:"small",class:"ml-2"},{default:u(()=>[h("strong",null,K(Q.procedureName||Q.procedure_name),1)]),_:2},1024)]),_:2},1024),l(b,{cols:"auto",class:"d-flex align-center justify-start flex-wrap ml-4"},{default:u(()=>[h("span",uTe," Base: "+K((Q.cost||Q.procedureCost||0).toFixed(2)),1),Q.costEstimate!==void 0&&Q.costEstimate!==null?(R(),Ae("span",cTe," Final: "+K(parseFloat(Q.costEstimate||0).toFixed(2)),1)):ye("",!0),Q.location?(R(),Ae("span",dTe," Location: "+K(Q.location),1)):ye("",!0),Q.option?(R(),Ae("span",ATe," Option: "+K(Q.option),1)):ye("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):(R(),ve(ue,{key:1,type:"info",variant:"outlined"},{default:u(()=>[...y[7]||(y[7]=[O(" No local procedures available from current treatment plan to add to template. ",-1)])]),_:1})),A.value?(R(),ve(ue,{key:2,type:"error",variant:"outlined",class:"mt-3"},{default:u(()=>[O(K(A.value),1)]),_:1})):ye("",!0)]),_:1})]),_:1}),l(C),l(D,{"no-gutters":""},{default:u(()=>[l(b,{cols:"2"}),l(b,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(T,{variant:"outlined",onClick:p,disabled:!o.value||c.value.length===0,loading:i.value},{default:u(()=>[...y[8]||(y[8]=[O(" Create ",-1)])]),_:1},8,["disabled","loading"])]),_:1}),l(b,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},mTe=qt(fTe,[["__scopeId","data-v-11bfc2fd"]]),vTe={class:"text-caption mr-3"},hTe={key:0,class:"text-caption mr-3"},pTe={key:1,class:"text-caption mr-3"},gTe={key:2,class:"text-caption"},yTe={class:"text-caption mr-3"},_Te={key:0,class:"text-caption mr-3"},wTe={key:1,class:"text-caption mr-3"},bTe={key:2,class:"text-caption"},xTe={__name:"edit-treatment-plan-template",props:{procedureList:{type:Array,required:!0},selectedTemplate:{type:Object,default:null}},emits:["close","update&close"],setup(e,{emit:t}){const n=e,a=t,r=V(null),s=V({}),o=V([]),i=V(!1),c=V(!1),A=V([]),d=V(!1),f=V(""),m=V(null);je(()=>n.procedureList,()=>{v()},{deep:!0});const v=()=>{const x=o.value.map(T=>T.procedureId);A.value=n.procedureList.filter(T=>T.isLocal&&T.id!==void 0&&T.id!==null&&!x.includes(T.id)).map(T=>({...T,isSelected:!1,_uniqueKey:`available_${T.id}`}))};dn(async()=>{n.selectedTemplate?(r.value=n.selectedTemplate,await p(n.selectedTemplate)):v()});const p=async x=>{if(!x){s.value={},o.value=[],v();return}s.value=Qn.cloneDeep(x),d.value=!0,f.value="";try{const T=await aO(x.id);if(!T.error&&T.data)o.value=(T.data.procedures||[]).map(D=>({...D,isSelected:!0,_uniqueKey:`template_${D.id}`})),console.log("Template procedures fetched:",o.value),v();else throw new Error("Failed to fetch template procedures")}catch(T){console.error("Error fetching template procedures:",T),f.value="Failed to load template procedures. Please try again.",o.value=[],v()}finally{d.value=!1}},g=x=>{console.log("Procedure selection changed:",x.procedureName||x.procedure_name,x.isSelected)},y=x=>{console.log("Template procedure selection changed:",x.procedureName,x.isSelected)},w=async()=>{if(!(!r.value||!c.value)){i.value=!0,f.value="";try{const x=o.value.filter(E=>E.isSelected),T=A.value.filter(E=>E.isSelected),k=[...x,...T].map(E=>({procedure_id:E.procedureId||E.procedure_id||E.id,cost_estimate:E.costEstimate!==void 0&&E.costEstimate!==null?parseFloat(E.costEstimate):parseFloat(E.procedureCost||E.cost||0),location:E.location||"",option:E.option||""})),S=await nO(r.value.id,{treatmentplan_name:s.value.treatmentPlanName,notes:s.value.notes||"",procedures:k});if(S.error){f.value="Failed to update template. Please try again.",console.error("Error updating treatment plan template:",S.error);return}console.log("Template updated successfully"),a("update&close")}catch(x){f.value="An unexpected error occurred. Please try again.",console.error("Error updating template:",x)}finally{i.value=!1}}},b=()=>{m.value&&m.value.abort(),a("close")};return va(()=>{m.value&&m.value.abort()}),(x,T)=>{const D=I("v-card-title"),k=I("v-col"),S=I("v-icon"),E=I("v-btn"),C=I("v-row"),U=I("v-card"),F=I("v-text-field"),L=I("v-textarea"),H=I("v-divider"),ue=I("v-card-subtitle"),ie=I("v-progress-linear"),Q=I("v-card-text"),X=I("v-checkbox"),le=I("v-chip"),Z=I("v-alert"),re=I("v-form");return R(),ve(U,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(C,{"no-gutters":""},{default:u(()=>[l(k,{cols:"12"},{default:u(()=>[l(U,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(C,{"no-gutters":""},{default:u(()=>[l(k,{cols:"11"},{default:u(()=>[l(D,{class:"pa-0 pl-2"},{default:u(()=>[...T[3]||(T[3]=[O("Edit Treatment Plan Template",-1)])]),_:1})]),_:1}),l(k,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(E,{icon:"",size:"x-small",onClick:b},{default:u(()=>[l(S,null,{default:u(()=>[...T[4]||(T[4]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(C,{"no-gutters":""},{default:u(()=>[l(k,{cols:"12"},{default:u(()=>[l(U,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(re,{modelValue:c.value,"onUpdate:modelValue":T[2]||(T[2]=q=>c.value=q),"validate-on":"blur"},{default:u(()=>[l(C,{"no-gutters":""},{default:u(()=>[r.value?(R(),Ae(Ke,{key:0},[l(k,{cols:"12"},{default:u(()=>[l(F,{label:"Treatment Plan Name *",density:"compact",modelValue:s.value.treatmentPlanName,"onUpdate:modelValue":T[0]||(T[0]=q=>s.value.treatmentPlanName=q),rules:Qe(fr)},null,8,["modelValue","rules"])]),_:1}),l(k,{cols:"12"},{default:u(()=>[l(L,{label:"Notes",density:"compact",rows:"2","auto-grow":"",modelValue:s.value.notes,"onUpdate:modelValue":T[1]||(T[1]=q=>s.value.notes=q)},null,8,["modelValue"])]),_:1}),l(k,{cols:"12"},{default:u(()=>[l(H,{class:"my-3"},{default:u(()=>[...T[5]||(T[5]=[O("Procedures",-1)])]),_:1}),d.value?(R(),ve(U,{key:0,variant:"outlined",class:"mb-3"},{default:u(()=>[l(ue,{class:"pb-2"},{default:u(()=>[...T[6]||(T[6]=[O("Loading template procedures...",-1)])]),_:1}),l(Q,null,{default:u(()=>[l(ie,{indeterminate:""})]),_:1})]),_:1})):o.value.length>0?(R(),ve(U,{key:1,variant:"outlined",class:"mb-3"},{default:u(()=>[l(ue,{class:"pb-2"},{default:u(()=>[...T[7]||(T[7]=[O("Current Template Procedures:",-1)])]),_:1}),l(Q,null,{default:u(()=>[(R(!0),Ae(Ke,null,Gt(o.value,q=>(R(),ve(U,{key:q._uniqueKey||`template-${q.id}`,flat:""},{default:u(()=>[l(C,{"no-gutters":"",class:"align-center"},{default:u(()=>[l(k,{cols:"auto",class:"d-flex align-center justify-start"},{default:u(()=>[l(X,{modelValue:q.isSelected,"onUpdate:modelValue":P=>q.isSelected=P,color:"primary",density:"compact","hide-details":"",onChange:P=>y(q)},null,8,["modelValue","onUpdate:modelValue","onChange"]),l(le,{color:"primary","text-color":"black",size:"small",class:"ml-2"},{default:u(()=>[h("strong",null,K(q.procedureName),1)]),_:2},1024)]),_:2},1024),l(k,{cols:"auto",class:"d-flex align-center justify-start flex-wrap ml-4"},{default:u(()=>[h("span",vTe," Base: "+K((q.procedureCost||0).toFixed(2)),1),q.costEstimate!==void 0&&q.costEstimate!==null?(R(),Ae("span",hTe," Final: "+K(parseFloat(q.costEstimate||0).toFixed(2)),1)):ye("",!0),q.location?(R(),Ae("span",pTe," Location: "+K(q.location),1)):ye("",!0),q.option?(R(),Ae("span",gTe," Option: "+K(q.option),1)):ye("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):ye("",!0),A.value.length>0?(R(),ve(U,{key:2,variant:"outlined"},{default:u(()=>[l(ue,{class:"pb-2"},{default:u(()=>[...T[8]||(T[8]=[O("Available Local Procedures (from current treatment plan):",-1)])]),_:1}),l(Q,null,{default:u(()=>[(R(!0),Ae(Ke,null,Gt(A.value,q=>(R(),ve(U,{key:q._uniqueKey||`available-${q.id}`,flat:""},{default:u(()=>[l(C,{"no-gutters":"",class:"align-center"},{default:u(()=>[l(k,{cols:"auto",class:"d-flex align-center justify-start"},{default:u(()=>[l(X,{modelValue:q.isSelected,"onUpdate:modelValue":P=>q.isSelected=P,color:"primary",density:"compact","hide-details":"",onChange:P=>g(q)},null,8,["modelValue","onUpdate:modelValue","onChange"]),l(le,{color:"primary","text-color":"black",size:"small",class:"ml-2"},{default:u(()=>[h("strong",null,K(q.procedureName||q.procedure_name),1)]),_:2},1024)]),_:2},1024),l(k,{cols:"auto",class:"d-flex align-center justify-start flex-wrap ml-4"},{default:u(()=>[h("span",yTe," Base: "+K((q.cost||q.procedureCost||0).toFixed(2)),1),q.costEstimate!==void 0&&q.costEstimate!==null?(R(),Ae("span",_Te," Final: "+K(parseFloat(q.costEstimate||0).toFixed(2)),1)):ye("",!0),q.location?(R(),Ae("span",wTe," Location: "+K(q.location),1)):ye("",!0),q.option?(R(),Ae("span",bTe," Option: "+K(q.option),1)):ye("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):(R(),ve(Z,{key:3,type:"info",variant:"outlined"},{default:u(()=>[...T[9]||(T[9]=[O(" No local procedures available from current treatment plan to add to template. ",-1)])]),_:1})),f.value?(R(),ve(Z,{key:4,type:"error",variant:"outlined",class:"mt-3"},{default:u(()=>[O(K(f.value),1)]),_:1})):ye("",!0)]),_:1})],64)):(R(),ve(k,{key:1,cols:"12"},{default:u(()=>[l(Z,{type:"info",variant:"outlined"},{default:u(()=>[...T[10]||(T[10]=[O(" No treatment plan template selected for editing. ",-1)])]),_:1})]),_:1}))]),_:1}),l(H),l(C,{"no-gutters":""},{default:u(()=>[l(k,{cols:"2"}),l(k,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(E,{variant:"outlined",onClick:w,disabled:!c.value||!r.value,loading:i.value},{default:u(()=>[...T[11]||(T[11]=[O(" Update ",-1)])]),_:1},8,["disabled","loading"])]),_:1}),l(k,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},CTe=qt(xTe,[["__scopeId","data-v-a21afca5"]]),A2=e=>{if(!e)return"";try{const t=typeof e=="string"?dh(e):new Date(e);return _o(t,"MMMM d, yyyy")}catch{return e}},STe=(e,t,n)=>{const a=A2(e.dueDate);return`Hi ${n},

This is a reminder for your upcoming appointment with Dr. ${t}.

 Date: ${a}

Please arrive 10 minutes early. Contact us if you need to reschedule.

Best regards,
Dr. ${t}`},ETe=(e,t,n)=>{const a=A2(e.details.consultationDate),r=A2(e.dueDate);return`Hi ${n},

Your follow-up consultation with Dr. ${t} is due.

 Original Consultation: ${a}
 Follow-up Due: ${r}

Please schedule your follow-up appointment. Contact us to book a slot.

Best regards,
Dr. ${t}`},BTe=(e,t,n)=>{const a=A2(e.dueDate);let r="",s="";if(e.details.procedures&&Array.isArray(e.details.procedures)){const o=e.details.procedures.filter(c=>c.status==="completed").map(c=>c.procedure_name||c.procedureName).filter(c=>c),i=e.details.procedures.filter(c=>["proposed","ongoing","active","scheduled"].includes(c.status)).map(c=>c.procedure_name||c.procedureName).filter(c=>c);r=o.length>0?o.join(", "):"None",s=i.length>0?i.join(", "):"None"}else{if(e.procedureDetails){if(e.procedureDetails.includes("Completed:")){const o=e.procedureDetails.match(/Completed: ([^]+)/);r=o?o[1].trim():"None"}if(e.procedureDetails.includes("Pending:")){const o=e.procedureDetails.match(/Pending: ([^]*)/);s=o?o[1].trim():"None"}}r||(r="None"),s||(s="None")}return`Hi ${n},

This is a reminder for your treatment plan follow-up with Dr. ${t}.

 Follow-up Due: ${a}
 Completed: ${r}
 Pending: ${s}

Please contact us to schedule your next visit.

Best regards,
Dr. ${t}`},a$=async(e,t)=>{let n=e;n=n.replace(/\D/g,""),!n.startsWith("91")&&n.length===10&&(n="91"+n);const a=`https://api.whatsapp.com/send?phone=${n}&text=${encodeURIComponent(t)}`;try{const{ipcRenderer:r}=window.require("electron"),s=await r.invoke("open-external",a);return s.success?(console.log("Successfully opened WhatsApp with system default browser"),{success:!0}):(console.error("Failed to open WhatsApp via Electron:",s.error),window.open(a,"_blank","noopener,noreferrer"),{success:!0})}catch(r){return console.error("Failed to use Electron IPC:",r),window.open(a,"_blank","noopener,noreferrer"),{success:!0}}},r$=e=>{if(!e)return!1;const t=e.replace(/\D/g,"");return t.length===10||t.length===12&&t.startsWith("91")},kTe=async(e,t)=>{try{if(!e)throw new Error("Reminder data is required");if(!t?.doctorName)throw new Error("Doctor information is required");const n=e.details?.patient_phone||e.details?.contactNumber||e.details?.contact_number;if(!n)throw new Error("Patient contact number not available");if(!r$(n))throw new Error("Invalid phone number format");const a=e.patientName||"Patient",r=t.doctorName;let s;switch(e.type){case"appointment":s=STe(e,r,a);break;case"consultation":s=ETe(e,r,a);break;case"procedures":s=BTe(e,r,a);break;default:throw new Error(`Unsupported reminder type: ${e.type}`)}if((await a$(n,s)).success)return{success:!0,message:`WhatsApp reminder sent to ${a}`};throw new Error("Failed to open WhatsApp")}catch(n){return console.error("WhatsApp reminder failed:",n),{success:!1,error:n.message}}},TTe=(e,t,n,a,r)=>`Hi ${r},

Post-procedure care instructions for ${e}:

${t}

Best regards,
Dr. ${a}`,ITe=async(e,t,n)=>{try{if(!e)throw new Error("Procedure data is required");if(!t)throw new Error("Patient data is required");if(!n?.doctorName)throw new Error("Doctor information is required");const a=t.contactNumber||t.phoneNumber||t.contact_number||t.patient_phone;if(!a)throw new Error("Patient contact number not available");if(!r$(a))throw new Error("Invalid phone number format");const r=t.name||t.patientName||"Patient",s=n.doctorName,o=e.procedureName||e.procedure?.procedure_name||e.procedure_name||"Procedure",i=e.postProcedureCare||e.instructions||"",c=e.startDate||e.procedureDate||e.treatmentPlan?.startDate||new Date().toISOString().split("T")[0];if(!i||!i.trim())throw new Error("Post-procedure care instructions are required");const A=TTe(o,i.trim(),c,s,r);if((await a$(a,A)).success)return{success:!0,message:`Post-procedure care instructions sent to ${r}`};throw new Error("Failed to open WhatsApp")}catch(a){return console.error("WhatsApp post-procedure care failed:",a),{success:!1,error:a.message}}},FTe={class:"text-caption"},PTe={key:0,class:"d-flex flex-wrap gap-1 align-center mt-1"},DTe={class:"d-flex flex-wrap gap-2 align-center"},UTe={key:0,class:"mt-2"},RTe={key:0,class:"text-caption text-medium-emphasis ml-2"},NTe={key:0,class:"mt-3 mb-3"},VTe={class:"text-center"},LTe={class:"text-body-2 font-weight-medium mb-0"},MTe={class:"text-center"},OTe={class:"text-body-2 font-weight-medium mb-0"},HTe={class:"text-center"},$Te={class:"text-body-2 font-weight-medium mb-0"},QTe={class:"text-center"},GTe={class:"text-body-2 font-weight-medium mb-0"},zTe={class:"text-center"},KTe={class:"text-center"},WTe={key:1,class:"d-flex justify-center align-center pa-4"},jTe={key:2,class:"payment-receipts-container"},qTe={class:"d-flex align-center flex-wrap payment-receipt-details"},YTe={class:"text-subtitle-2 font-weight-bold receipt-id"},XTe={class:"text-caption text-medium-emphasis receipt-date"},JTe={class:"text-caption receipt-amount"},ZTe={class:"text-caption receipt-amount"},e4e={class:"text-caption text-error receipt-amount"},t4e={key:0,class:"mx-2 pb-2"},n4e={class:"text-subtitle-2 text-medium-emphasis"},a4e={class:"d-flex align-center gap-2"},r4e={class:"text-subtitle-2 text-left"},s4e=["src","alt"],o4e={class:"mx-2 pb-2"},i4e={class:"text-subtitle-2 text-medium-emphasis"},l4e={class:"mb-1"},u4e={class:"procedure-name text-body-2 font-weight-bold text-left"},c4e={class:"text-body-2 font-weight-medium text-left d-flex align-center gap-1"},d4e={class:"d-flex align-center gap-1"},A4e={class:"d-flex justify-start align-center gap-2"},f4e={class:"d-flex justify-start"},m4e={key:2,class:"text-center py-8"},v4e={key:0,class:"date-section mb-4"},h4e={class:"date-header-vertical mb-3",style:{"margin-top":"16px","margin-left":"8px"}},p4e={class:"text-subtitle-2 text-left mb-1"},g4e={class:"d-flex flex-wrap gap-2 align-center mb-1"},y4e={class:"text-caption text-medium-emphasis procedure-description"},_4e={class:"text-subtitle-2 text-left mb-1"},w4e={class:"d-flex flex-wrap gap-2 align-center mb-1"},b4e={class:"text-caption text-medium-emphasis procedure-description"},x4e={key:1,class:"text-center py-8"},C4e={__name:"procedure-window",props:{treatmentPlan:{type:Object,default:()=>({id:"0"})},patient:{type:Object,default:()=>({})}},emits:["update:treatmentPlan","createNewTreatmentPlan"],setup(e,{emit:t}){const n=e,a=t,r=ra(),s=ne(()=>r.state.doctorModule.doctorId),o=ne(()=>r.getters["doctorModule/currentDoctor"]),{showSuccess:i,showError:c}=ca(),A=V("plan"),d=V({}),f=V([]),m=V([]),v=V(!1),p=V(!1),g=V(!1),y=V(null),w=V(null),b=V([]),x=V(!1),T=V(!1),D=V(!1),k=V(null),S=V([]),E=V(!1),C=V(!1),U=V(null),F=V(new Set),L=V(!1),H=V({}),ue=V(!1),ie=V(null),Q=V(!1),X=V(null),le=V(new Map),Z=V({}),re=V({show:!1,text:"",color:"success"}),q=[{title:"Proposed",value:"proposed"},{title:"Ongoing",value:"ongoing"},{title:"Completed",value:"completed"},{title:"Deleted",value:"deleted"}],P=[{title:"Proposed",value:"proposed"},{title:"Ongoing",value:"ongoing"},{title:"Completed",value:"completed"},{title:"On Hold",value:"on_hold"},{title:"Cancelled",value:"cancelled"}],G=ne(()=>!f.value||f.value.length===0?0:f.value.filter(se=>se.isSelected&&se.status?.toLowerCase()!=="cancelled").reduce((se,ge)=>{const xe=ge.procedureCost||0;return se+xe},0)),J=ne(()=>!f.value||f.value.length===0?0:f.value.filter(se=>se.isSelected&&se.status?.toLowerCase()!=="cancelled").reduce((se,ge)=>{const xe=ge.costEstimate||ge.cost_estimate,He=ge.procedureCost||0;return se+(xe!==void 0?xe:He)},0)),M=ne(()=>!f.value||f.value.length===0?0:f.value.filter(se=>se.isSelected&&se.status?.toLowerCase()==="completed"&&se.status?.toLowerCase()!=="cancelled").reduce((se,ge)=>{const xe=ge.costEstimate||ge.cost_estimate,He=ge.procedureCost||0;return se+(xe!==void 0?xe:He)},0)),te=ne(()=>!k.value||k.value.length===0?0:k.value.reduce((se,ge)=>se+(ge.totalPaid||0),0)),Y=ne(()=>Math.max(0,M.value-te.value)),W=ne(()=>f.value?f.value.some(se=>(se.option||se.options||"").trim()!==""&&se.status?.toLowerCase()!=="cancelled"):!1),ee=ne(()=>f.value?f.value.filter(se=>se.status?.toLowerCase()!=="cancelled"):[]);ne(()=>{if(!f.value)return[];const se={ongoing:1,on_hold:2,proposed:3,completed:4,cancelled:5},ge=He=>{const tt=He.start_date||He.startDate,nt=He.created_at||He.createdAt;return tt?new Date(tt):nt?new Date(nt):new Date(0)},xe=[...f.value];return xe.length>100?xe.sort((He,tt)=>{const nt=le.value.get(He.id)||{status:He.status?.toLowerCase(),date:ge(He)},et=le.value.get(tt.id)||{status:tt.status?.toLowerCase(),date:ge(tt)},st=se[nt.status]||999,wt=se[et.status]||999;return st!==wt?st-wt:et.date-nt.date}):xe.sort((He,tt)=>{const nt=le.value.get(He.id)||{status:He.status?.toLowerCase(),date:ge(He)},et=le.value.get(tt.id)||{status:tt.status?.toLowerCase(),date:ge(tt)},st=se[nt.status]||999,wt=se[et.status]||999;return st!==wt?st-wt:et.date-nt.date})});const ae=ne(()=>{if(!f.value||f.value.length===0)return{unscheduled:[],dateGroups:[]};const se={ongoing:1,on_hold:2,proposed:3,completed:4,cancelled:5},ge=nt=>nt.sort((et,st)=>{const wt=(et.status||"proposed").toLowerCase(),It=(st.status||"proposed").toLowerCase(),tn=se[wt]||999,kn=se[It]||999;return tn-kn}),xe=[],He={};f.value.forEach(nt=>{const st=le.value.get(nt.id)?.startDate;if(!st)xe.push(nt);else{const wt=new Date(st),It=new Date,tn=wt.getFullYear()===It.getFullYear(),kn=wt.toLocaleDateString("en-US",{timeZone:"Asia/Kolkata",month:"short",day:"numeric",...tn?{}:{year:"numeric"}}),hn=wt.toLocaleDateString("en-US",{timeZone:"Asia/Kolkata",year:"numeric",month:"long",day:"numeric"});He[kn]||(He[kn]={date:kn,fullDate:hn,rawDate:wt,procedures:[]}),He[kn].procedures.push(nt)}}),ge(xe),Object.values(He).forEach(nt=>{ge(nt.procedures)});const tt=Object.values(He).sort((nt,et)=>nt.rawDate.getTime()-et.rawDate.getTime());return{unscheduled:xe,dateGroups:tt}}),oe=async()=>{if(!d.value?.id||d.value.id==="0"){f.value=[];return}try{const se=await xf(d.value.id);if(se.error)throw new Error(se.error.message||"Failed to load procedure details");let ge=se.data.procedures||[];ge=ge.sort((xe,He)=>{const tt=xe.option||xe.options||"",nt=He.option||He.options||"";return!tt&&nt?-1:tt&&!nt?1:tt.localeCompare(nt)}),f.value=ge,f.value.forEach(xe=>{Le(xe)}),We()}catch(se){console.error("Error loading procedure treatments:",se),f.value=[]}},j=async()=>{if(!d.value?.id||d.value.id==="0"){k.value=[];return}try{k.value=null;const se=await Sw(r,"",d.value.id);if(se.error)throw new Error(se.error.message||"Failed to load payment receipts");k.value=se.data||[]}catch(se){console.error("Error loading payment receipts:",se),k.value=[],Lt("Failed to load payment receipts","error")}};je(()=>n.treatmentPlan,se=>{se&&(d.value=Qn.cloneDeep(se),(d.value.amountPaid===void 0||d.value.amountPaid===null)&&(d.value.amountPaid=0),L.value&&(H.value={treatmentPlanName:d.value.treatmentPlanName||"",status:d.value.status||"proposed",startDate:d.value.startDate||"",endDate:d.value.endDate||"",followupDate:d.value.followupDate||"",notes:d.value.notes||"",isReminded:d.value.isReminded||!1}),oe(),se.id&&se.id!=="0"?j():k.value=[])},{immediate:!0,deep:!0}),je(()=>H.value.followupDate,(se,ge)=>{se&&ge&&se!==ge&&H.value.isReminded&&(H.value.isReminded=!1,console.log("Follow-up date changed, setting reminder to pending"))});const ce=se=>{console.log("Tab changed to:",se)},de=()=>{a("createNewTreatmentPlan",{treatmentPlanName:"New Treatment Plan",startDate:"",endDate:"",followupDate:"",status:"proposed",notes:"",amountPaid:0,isTemplate:!1})},_e=async()=>{if(!s.value){console.error("Doctor ID not available");return}x.value=!0;try{const se=await YM("",s.value);if(se.error)throw new Error(se.error.message||"Failed to load procedures");b.value=se.data}catch(se){console.error("Error loading procedures:",se),Lt("Failed to load procedures","error")}finally{x.value=!1}},Re=async se=>{if(!d.value?.id||d.value.id==="0"){Lt("Please create a treatment plan first","error");return}const{template:ge,autoFillData:xe}=se;if(!xe.procedures||xe.procedures.length===0){Lt("Template has no procedures to copy","warning");return}try{const He=await At.put(`/treatmentplan/${d.value.id}`,{treatmentplan_name:xe.treatmentPlanName,notes:xe.notes||""});if(!He.data.success)throw new Error(He.data.error||"Failed to update treatment plan details");let tt=0,nt=0;const et=[];for(const st of xe.procedures)try{await At.post(`/treatmentplan/${d.value.id}/procedure`,{procedure_id:st.procedureId,cost_estimate:st.costEstimate||0,location:st.location||"",option:st.option||"",notes:""}),tt++}catch(wt){nt++,et.push(st.procedureName||"Unknown"),console.error("Error adding procedure from template:",wt)}await en(),S.value.find(st=>st.id===ge.id)||S.value.push(ge),nt===0?Lt(`Applied template "${ge.treatmentPlanName}": ${tt} procedure(s) added`,"success"):Lt(`Template applied with partial success: ${tt} succeeded, ${nt} failed. Failed: ${et.join(", ")}`,"warning")}catch(He){console.error("Error applying template:",He),Lt("Failed to apply template","error")}},be=()=>{E.value=!0},Ee=()=>{E.value=!1},Ce=()=>{E.value=!1,Lt("Treatment plan template created successfully","success")},Be=se=>{U.value=se,C.value=!0},Te=()=>{C.value=!1,U.value=null},Oe=()=>{C.value=!1,U.value=null,Lt("Treatment plan template updated successfully","success")},Me=se=>{S.value=S.value.filter(ge=>ge.id!==se)},rt=()=>{v.value=!0},ut=async se=>{console.log("Searched Procedures received:",se),console.log("Current selectedProcedures before:",m.value);for(const ge of se)await Ie(ge);console.log("Current selectedProcedures after:",m.value)},Ie=async se=>{if(console.log("Adding procedure to staging:",se),se.isLocal===!0){console.log("Local procedure - saving directly to treatment plan"),await Ue(se);return}console.log("Server procedure - adding to staging area");const ge=m.value.some(xe=>xe.id===se.id);if(console.log("Procedure already exists in staging:",ge),ge)console.log("Procedure already in staging, skipping");else{const xe={...se,cost:se.cost||0,costEstimate:se.cost||0,location:se.location||"",options:se.option||"",isSelected:!0,isLocal:se.isLocal!==void 0?se.isLocal:!0,stagingId:`staging_${Date.now()}_${se.id||Math.random()}`};console.log("Staged Procedure:",xe),m.value.push(xe),console.log("Updated staging list:",m.value)}},Ue=async se=>{if(!d.value.id||d.value.id==="0"){Lt("Please select a valid treatment plan first","error");return}try{console.log("Saving local procedure directly:",se);const ge=await wp(d.value.id,se.id,se.cost||0,"","","");if(ge.error)throw new Error(ge.error.message||"Failed to save procedure to treatment plan");await oe(),Lt(`"${se.procedureName}" added to treatment plan`,"success")}catch(ge){console.error("Error saving local procedure directly:",ge),Lt("Failed to add procedure to treatment plan","error")}},dt=async()=>{if(!d.value.id||d.value.id==="0"){Lt("Please select a valid treatment plan first","error");return}if(m.value.length===0){Lt("No procedures selected to save","warning");return}T.value=!0;let se=0;try{for(const ge of m.value)if(ge.isSelected){let xe=ge.id;if(!ge.isLocal&&!ge.id.toString().startsWith("staging_"))try{if(console.log("Creating local procedure for server procedure:",ge),!s.value)throw new Error("Doctor ID not available");const tt=await lT(ge.procedureName,ge.cost||0,"",!0,ge.id.toString().replace("server_",""),ge.identifier||"",s.value);if(tt.error)throw console.error("API Error Response:",tt.error),new Error(tt.error.message||"Failed to create local procedure entry");xe=tt.data.id,console.log("Server procedure saved to local DB with ID:",xe)}catch(tt){throw console.error("Error saving server procedure to local DB:",tt),tt}const He=await wp(d.value.id,xe,ge.costEstimate||ge.cost||0,"",ge.location||"",ge.option||"");if(He.error)throw new Error(He.error.message||"Failed to save procedure to treatment plan");se++}se>0&&(m.value=[],await oe(),Lt(`${se} procedure(s) added to treatment plan successfully`,"success"))}catch(ge){console.error("Error saving procedures to treatment plan:",ge),Lt("Failed to save procedures to treatment plan","error")}finally{T.value=!1}},Ft=se=>{m.value=m.value.filter(ge=>ge.stagingId!==se)},it=async()=>{if(!d.value?.id||d.value.id==="0"){Lt("Please select a valid treatment plan first","error");return}if(!f.value||f.value.length===0){Lt("No procedures to save","warning");return}D.value=!0;let se=0;try{for(const ge of f.value){const xe={cost_estimate:ge.costEstimate||ge.procedureCost||0,notes:ge.notes||"",location:ge.location||"",option:ge.option||"",status:ge.status||"proposed",start_date:ge.startDate||null,end_date:ge.endDate||null},He=await sE(d.value.id,ge.id,xe);He.error?console.error("Error saving procedure treatment:",ge.id,He.error):se++}se>0?(Lt(`${se} procedure(s) saved successfully`,"success"),await oe()):Lt("No procedures were saved","warning")}catch(ge){console.error("Error saving procedure treatments:",ge),Lt("Failed to save procedure treatments","error")}finally{D.value=!1}},qe=async se=>{(!se.costEstimate||se.costEstimate===0)&&(se.costEstimate=se.procedureCost||0),console.log("Final cost updated for procedure:",se.id,"New cost:",se.costEstimate)},yt=se=>{console.log("Edit procedure - original procedureTreatment:",se),console.log("ProcedureTreatment keys:",Object.keys(se)),console.log("ProcedureTreatment ID:",se.id),console.log("ProcedureTreatment procedure_id:",se.procedure_id),console.log("ProcedureTreatment procedure:",se.procedure),console.log("ProcedureTreatment costEstimate:",se.costEstimate),console.log("ProcedureTreatment cost_estimate:",se.cost_estimate);const ge={id:se.procedureId||se.procedure_id||se.procedure?.id,procedureName:se.procedureName||se.procedure_name||se.procedure?.procedureName,description:se.procedureDescription||se.procedure_description||se.procedure?.description||"",cost:se.procedureCost||se.procedure_cost||se.procedure?.cost||0,isLocal:se.isLocal||se.procedure?.isLocal||!0};console.log("Extracted actual procedure for editing:",ge),y.value=ge,p.value=!0},mt=async se=>{if(!d.value?.id||d.value.id==="0"){Lt("Please select a valid treatment plan first","error");return}try{console.log("Duplicating procedure:",se);const ge=se.procedureId||se.procedure_id,xe=se.costEstimate||se.cost_estimate||0;if(!ge){Lt("Unable to determine procedure ID for duplication","error");return}const He=await wp(d.value.id,ge,xe,"","","");if(He.error){console.error("Error duplicating procedure:",He.error),Lt("Failed to duplicate procedure","error");return}await oe();const tt=se.procedure?.procedure_name||se.procedureName||se.procedure_name||"procedure";Lt(`"${tt}" duplicated successfully`,"success")}catch(ge){console.error("Error duplicating procedure:",ge),Lt("Failed to duplicate procedure","error")}},xt=async se=>{if(console.log("New procedure created:",se),console.log("Local treatment plan:",d.value),console.log("Procedure ID:",se.id),console.log("Procedure cost:",se.cost),!d.value.id||d.value.id==="0"){console.error("No valid treatment plan selected"),Lt("Please select a valid treatment plan first","error");return}if(!se.id){console.error("No procedure ID received from creation"),Lt("Procedure was created but ID is missing","error");return}try{console.log("Making API call with:",{treatmentPlanId:d.value.id,procedureId:se.id,costEstimate:se.cost,notes:""});const ge=await wp(d.value.id,se.id,se.cost,"","","");if(console.log("API response:",ge),ge.error){console.error("API error details:",ge.error);const xe=ge.error.response?.data?.error||ge.error.message||"Failed to link procedure to treatment plan";throw new Error(xe)}await oe(),Lt("Procedure added to treatment plan successfully","success")}catch(ge){console.error("Error linking procedure to treatment plan:",ge),console.error("Error stack:",ge.stack);let xe="Failed to add procedure to treatment plan";ge.message&&(xe=ge.message),Lt(xe,"error")}},an=()=>{v.value=!1},Cn=()=>{p.value=!1,y.value=null},oa=se=>{w.value=se,g.value=!0},Vt=()=>{g.value=!1,w.value=null},kt=async se=>{console.log("Procedure treatment deleted:",se),await oe(),Lt("Procedure removed from treatment plan successfully","success")},at=()=>{D.value||(L.value||(H.value={treatmentPlanName:d.value.treatmentPlanName||"",status:d.value.status||"proposed",startDate:d.value.startDate||"",endDate:d.value.endDate||"",followupDate:d.value.followupDate||"",notes:d.value.notes||"",isReminded:d.value.isReminded||!1}),L.value=!L.value)},bt=async()=>{if(!d.value?.id||d.value.id==="0"){Lt("Please select a valid treatment plan first","error");return}if(!H.value.treatmentPlanName?.trim()){Lt("Treatment plan name is required","error");return}D.value=!0;try{const se=await At.put(`/treatmentplan/${d.value.id}`,{treatmentplan_name:H.value.treatmentPlanName,status:H.value.status,start_date:H.value.startDate||null,end_date:H.value.endDate||null,followup_date:H.value.followupDate||null,notes:H.value.notes||"",isReminded:H.value.isReminded||!1});if(!se.data.success)throw new Error(se.data.error||"Failed to update treatment plan");L.value=!1,H.value={},await en(),Lt("Treatment plan updated successfully","success")}catch(se){console.error("Error saving treatment plan changes:",se),Lt("Failed to update treatment plan","error")}finally{D.value=!1}},en=async()=>{try{const se=await xf(d.value.id);if(se.error)throw new Error(se.error||"Failed to fetch treatment plan details");const ge=Qn.cloneDeep(se.data);d.value=ge,await oe(),await j(),a("update:treatmentPlan",ge),console.log("Emitted fresh treatment plan data to parent:",ge)}catch(se){console.error("Error refreshing treatment plan data after save:",se),a("update:treatmentPlan",Qn.cloneDeep(d.value))}},Ye=async se=>{console.log("Procedure updated:",se),await oe(),Lt("Procedure updated successfully","success")},We=()=>{if(!f.value)return;const se=ge=>{const xe=ge.start_date||ge.startDate,He=ge.created_at||ge.createdAt;return xe?new Date(xe):He?new Date(He):new Date(0)};f.value.forEach(ge=>{if(!le.value.has(ge.id)){const xe=ge.start_date||ge.startDate;le.value.set(ge.id,{status:ge.status?.toLowerCase(),date:se(ge),startDate:xe||null})}})},_t=async se=>{if(!d.value?.id||d.value.id==="0"){Lt("Please select a valid treatment plan first","error");return}se.isUpdating=!0;try{console.log("Updating procedure treatment progress:",se),console.log("Procedure treatment keys:",Object.keys(se)),console.log("Treatment procedure ID:",se.id);const ge=se.id;if(!ge)throw console.error("No treatment procedure ID found in procedure treatment object"),new Error("Treatment procedure ID not found in treatment data");const xe={cost_estimate:se.costEstimate||se.cost_estimate||0,notes:se.notes||"",location:se.location||"",status:se.status||"proposed",start_date:se.startDate||"",end_date:se.endDate||""};console.log("Sending update with treatmentProcedureId:",ge,"updateData:",xe);const He=await sE(d.value.id,ge,xe);if(He.error)throw new Error(He.error.message||"Failed to update procedure treatment");console.log("Update response:",He),le.value.delete(se.id),await oe(),Lt("Procedure progress updated successfully","success")}catch(ge){console.error("Error updating procedure treatment:",ge),Lt("Failed to update procedure progress","error")}finally{se.isUpdating=!1}},Rt=se=>{switch(se?.toLowerCase()){case"proposed":return"grey";case"ongoing":return"primary";case"completed":return"success";case"on_hold":return"warning";case"cancelled":return"error";default:return"grey"}},zt=se=>{const ge=new Set(F.value);if(ge.has(se))ge.delete(se);else{ge.add(se);const xe=f.value.find(He=>He.id===se);if(xe&&(xe.postProcedureCare===void 0||xe.postProcedureCare===null)){const He=xe.procedure?.description||xe.procedureDescription||xe.procedure_description||xe.description||"";xe.postProcedureCare=He,console.log("Initialized postProcedureCare from procedure description:",He)}}F.value=ge},Pt=se=>F.value.has(se),Wt=se=>{try{return new Date(se).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}catch{return se}},Lt=(se,ge="success")=>{re.value={show:!0,text:se,color:ge}},ia=se=>{ie.value=se,ue.value=!0},Ln=se=>{console.log("Progress notes transcription completed:",se),se&&se.trim()&&ie.value&&(ie.value.notes&&ie.value.notes.trim()?ie.value.notes+=" "+se:ie.value.notes=se),ue.value=!1,ie.value=null},zn=(se,ge)=>{if(!se||!se.description||!ge)return;const xe=se.description||"",He=ge.postProcedureCare||"";He.trim()?ge.postProcedureCare=He.trim()+", "+xe:ge.postProcedureCare=xe},Yt=se=>{X.value=se,Q.value=!0},Bn=se=>{console.log("Post-procedure care transcription completed:",se),se&&se.trim()&&X.value&&(X.value.postProcedureCare&&X.value.postProcedureCare.trim()?X.value.postProcedureCare+=" "+se:X.value.postProcedureCare=se),Q.value=!1,X.value=null},ke=se=>{const ge=se?.contactNumber||se?.phoneNumber||se?.contact_number||se?.patient_phone;if(!ge)return!1;const xe=ge.replace(/\D/g,"");return xe.length===10||xe.length===12&&xe.startsWith("91")},ze=async se=>{try{if(!o.value){c("Please select a doctor first");return}if(!ke(n.patient)){c("Patient contact number not available or invalid");return}if(!se.postProcedureCare||!se.postProcedureCare.trim()){c("Post-procedure care instructions are required");return}se.sendingWhatsApp=!0,console.log(" Sending post-procedure care instructions via WhatsApp");const ge={procedureName:se.procedure?.procedure_name||se.procedureName||se.procedure_name||"Procedure",postProcedureCare:se.postProcedureCare.trim(),startDate:se.startDate||se.start_date||d.value.startDate||new Date().toISOString().split("T")[0],procedure:se.procedure,treatmentPlan:d.value},xe=await ITe(ge,n.patient,o.value);if(xe.success){const He=se.procedureId||se.procedure_id||se.procedure?.id;if(He)try{await ZM(He,se.postProcedureCare.trim(),s.value),console.log(" Updated procedure.description with shared instructions")}catch(tt){console.error(" Failed to update procedure.description:",tt)}i(xe.message||"Post-procedure care instructions sent successfully")}else throw new Error(xe.error||"Failed to send post-procedure care instructions")}catch(ge){console.error(" WhatsApp post-procedure care failed:",ge),c(ge.message||"Failed to send post-procedure care instructions")}finally{se&&(se.sendingWhatsApp=!1)}},Fe=()=>"primary",Le=se=>{se.scalePercentage===void 0&&(se.scalePercentage=100),se.finalCost===void 0&&(se.finalCost=se.costEstimate||se.cost_estimate||se.procedure?.cost||0),se.option===void 0&&(se.option=se.option||""),se.isSelected===void 0&&(se.isSelected=!0),se.status===void 0&&(se.status="proposed"),se.startDate===void 0&&(se.startDate=""),se.endDate===void 0&&(se.endDate=""),se.notes===void 0&&(se.notes=""),se.isUpdating===void 0&&(se.isUpdating=!1),se.sendingWhatsApp===void 0&&(se.sendingWhatsApp=!1)},Ge=se=>{console.log("Treatment plan PDF generated:",se)},he=async()=>{if(!s.value){console.warn("Doctor ID not available for loading print configurations"),Z.value={};return}try{const{fetchPrintConfigs:se}=await Tr(async()=>{const{fetchPrintConfigs:xe}=await Promise.resolve().then(()=>v_e);return{fetchPrintConfigs:xe}},void 0,import.meta.url),ge=await se(s.value);Z.value=ge.data||{}}catch(se){console.error("Error loading print configurations:",se),Z.value={}}};return dn(()=>{_e(),he(),d.value?.id&&d.value.id!=="0"&&oe()}),(se,ge)=>{const xe=I("v-tab"),He=I("v-tooltip"),tt=I("v-tabs"),nt=I("v-card"),et=I("v-col"),st=I("v-row"),wt=I("v-progress-circular"),It=I("v-btn"),tn=I("v-empty-state"),kn=I("v-card-subtitle"),hn=I("v-icon"),Sn=I("v-chip"),Pa=I("v-text-field"),Er=I("v-textarea"),Zr=I("v-select"),Ss=I("v-switch"),Wo=I("v-form"),Za=I("v-expand-transition"),jo=I("v-card-text"),Es=I("v-divider"),Nt=I("v-checkbox"),Dr=I("v-alert"),Mn=I("v-tabs-window-item"),Eo=I("v-tabs-window"),Ys=I("v-dialog"),Kc=I("v-snackbar");return R(),Ae(Ke,null,[l(st,{"no-gutters":""},{default:u(()=>[l(et,null,{default:u(()=>[l(nt,{rounded:"0",class:"pa-1 patient-header-style",elevation:"0"},{default:u(()=>[l(tt,{modelValue:A.value,"onUpdate:modelValue":[ge[0]||(ge[0]=vt=>A.value=vt),ce],"align-tabs":"center",density:"compact",class:"interactive-tabs"},{default:u(()=>[l(He,{text:"Treatment Plan"},{activator:u(({props:vt})=>[l(xe,Pe({value:"plan"},vt,{class:["tab-interactive",{"tab-active":A.value==="plan"}],tabindex:"-1"}),{default:u(()=>[...ge[17]||(ge[17]=[h("div",{class:"tab-content"}," PLAN ",-1)])]),_:1},16,["class"])]),_:1}),l(He,{text:"Treatment Progress"},{activator:u(({props:vt})=>[l(xe,Pe({value:"progress"},vt,{class:["tab-interactive",{"tab-active":A.value==="progress"}],tabindex:"-1"}),{default:u(()=>[...ge[18]||(ge[18]=[h("div",{class:"tab-content"}," PROGRESS ",-1)])]),_:1},16,["class"])]),_:1}),l(He,{text:"Share Treatment Plan"},{activator:u(({props:vt})=>[l(xe,Pe({value:"share"},vt,{class:["tab-interactive",{"tab-active":A.value==="share"}],tabindex:"-1"}),{default:u(()=>[...ge[19]||(ge[19]=[h("div",{class:"tab-content"}," SHARE PLAN ",-1)])]),_:1},16,["class"])]),_:1}),l(He,{text:"Uploads"},{activator:u(({props:vt})=>[l(xe,Pe({value:"uploads"},vt,{class:["tab-interactive",{"tab-active":A.value==="uploads"}],tabindex:"-1"}),{default:u(()=>[...ge[20]||(ge[20]=[h("div",{class:"tab-content"}," UPLOADS ",-1)])]),_:1},16,["class"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(Eo,{modelValue:A.value,"onUpdate:modelValue":ge[8]||(ge[8]=vt=>A.value=vt),class:"flex-grow-1"},{default:u(()=>[!e.treatmentPlan?.id&&A.value!=="uploads"?(R(),ve(st,{key:0,"no-gutters":""},{default:u(()=>[l(et,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[l(wt,{indeterminate:"",color:"primary"})]),_:1})]),_:1})):e.treatmentPlan.id=="0"&&A.value!=="uploads"?(R(),ve(st,{key:1,"no-gutters":""},{default:u(()=>[l(et,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%"}},{default:u(()=>[l(tn,null,{title:u(()=>[...ge[21]||(ge[21]=[h("div",{class:"text-subtitle-2"}," No treatment plan selected ",-1)])]),text:u(()=>[h("div",FTe,[ge[23]||(ge[23]=O(" Create a new treatment plan or select an existing one ",-1)),ge[24]||(ge[24]=h("br",null,null,-1)),l(It,{class:"mt-2",onClick:de},{default:u(()=>[...ge[22]||(ge[22]=[O("Create Treatment Plan",-1)])]),_:1})])]),_:1})]),_:1})]),_:1})):ye("",!0),l(Mn,{value:"plan",class:"h-100"},{default:u(()=>[e.treatmentPlan?.id&&e.treatmentPlan.id!=="0"?(R(),ve(st,{key:0,"no-gutters":"",class:"h-100"},{default:u(()=>[l(et,{cols:"12",class:"scroll-element",style:{"padding-bottom":"20px"}},{default:u(()=>[l(nt,{class:"form-section-card card-status-default mx-2 my-1 pa-3",elevation:"2"},{default:u(()=>[l(st,{"no-gutters":"",class:"align-top"},{default:u(()=>[l(et,{cols:"2",class:"d-flex align-top"},{default:u(()=>[l(kn,{class:"pa-0"},{default:u(()=>[...ge[25]||(ge[25]=[h("strong",null,"Treatment Plan Details",-1)])]),_:1})]),_:1}),l(et,{cols:"1"}),l(et,{cols:"6",class:"d-flex align-top flex-column"},{default:u(()=>[l(lTe,{doctorId:s.value,onTemplateSelected:Re},null,8,["doctorId"]),S.value.length>0?(R(),Ae("div",PTe,[(R(!0),Ae(Ke,null,Gt(S.value,vt=>(R(),ve(Sn,{key:vt.id,color:"primary",variant:"outlined",size:"small",closable:"","onClick:close":pn=>Me(vt.id),onClick:pn=>Be(vt),class:"cursor-pointer"},{default:u(()=>[O(K(vt.treatmentPlanName)+" ",1),l(hn,{end:"",size:"small",class:"ml-1"},{default:u(()=>[...ge[26]||(ge[26]=[O("mdi-pencil",-1)])]),_:1})]),_:2},1032,["onClick:close","onClick"]))),128))])):ye("",!0)]),_:1}),l(et,{cols:"3",class:"d-flex justify-end align-top"},{default:u(()=>[l(He,{text:"Save as Template"},{activator:u(({props:vt})=>[l(It,Pe({variant:"outlined",size:"small",class:"d-flex align-center justify-center btn-hover-enhanced"},vt,{onClick:be,disabled:!e.treatmentPlan?.id||e.treatmentPlan.id==="0",tabindex:"-1"}),{default:u(()=>[l(hn,{start:""},{default:u(()=>[...ge[27]||(ge[27]=[h("img",{src:xH,alt:"Save Template"},null,-1)])]),_:1}),ge[28]||(ge[28]=O(" Save as Template ",-1))]),_:1},16,["disabled"])]),_:1})]),_:1})]),_:1}),l(st,{"no-gutters":"",class:"mt-2 mb-2"},{default:u(()=>[l(et,{cols:"11"},{default:u(()=>[h("div",DTe,[l(Sn,{color:"primary","text-color":"black",size:"small",density:"compact"},{default:u(()=>[h("strong",null,K(d.value?.treatmentPlanName||"New Treatment Plan"),1)]),_:1}),l(Sn,{size:"small",color:Fe(),variant:"outlined",density:"compact"},{default:u(()=>[O(K((d.value?.status||"proposed").charAt(0).toUpperCase()+(d.value?.status||"proposed").slice(1)),1)]),_:1},8,["color"]),d.value?.startDate?(R(),ve(Sn,{key:0,size:"small",variant:"outlined",color:"primary",density:"compact"},{default:u(()=>[O(" Start: "+K(Qe(Tl)(d.value.startDate)),1)]),_:1})):ye("",!0),d.value?.endDate?(R(),ve(Sn,{key:1,size:"small",variant:"outlined",color:"primary",density:"compact"},{default:u(()=>[O(" End: "+K(Qe(Tl)(d.value.endDate)),1)]),_:1})):ye("",!0),d.value?.followupDate?(R(),ve(Sn,{key:2,size:"small",variant:"outlined",color:"secondary",density:"compact"},{default:u(()=>[O(" Follow-up: "+K(Qe(Tl)(d.value.followupDate)),1)]),_:1})):ye("",!0)])]),_:1}),l(et,{cols:"1",class:"d-flex flex-column justify-center align-center"},{default:u(()=>[l(He,{text:L.value?"Collapse":"Edit Treatment Plan"},{activator:u(({props:vt})=>[l(hn,Pe(vt,{size:"small",color:"primary",class:"expand-hint cursor-pointer",disabled:!e.treatmentPlan?.id||e.treatmentPlan.id==="0"||D.value,onClick:at}),{default:u(()=>[O(K(L.value?"mdi-chevron-up":"mdi-chevron-down"),1)]),_:1},16,["disabled"])]),_:1},8,["text"])]),_:1})]),_:1}),l(Za,null,{default:u(()=>[L.value?(R(),Ae("div",UTe,[l(Wo,{onSubmit:vn(bt,["prevent"])},{default:u(()=>[l(st,{"no-gutters":"",class:"mb-2 align-top"},{default:u(()=>[l(et,{cols:"10",class:"pr-2"},{default:u(()=>[l(Pa,{modelValue:H.value.treatmentPlanName,"onUpdate:modelValue":ge[1]||(ge[1]=vt=>H.value.treatmentPlanName=vt),label:"Treatment Plan Name",variant:"outlined",density:"compact",required:"","hide-details":""},null,8,["modelValue"])]),_:1}),l(et,{cols:"2",class:"d-flex justify-center align-start"},{default:u(()=>[l(It,{color:"primary",size:"small",type:"submit",loading:D.value,disabled:!H.value.treatmentPlanName},{default:u(()=>[...ge[29]||(ge[29]=[O(" Save ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),l(st,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(et,{cols:"10"},{default:u(()=>[l(Er,{modelValue:H.value.notes,"onUpdate:modelValue":ge[2]||(ge[2]=vt=>H.value.notes=vt),label:"Notes",variant:"outlined",density:"compact",rows:"1","auto-grow":"","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),l(st,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(et,{cols:"4",class:"pr-1"},{default:u(()=>[l(Zr,{modelValue:H.value.status,"onUpdate:modelValue":ge[3]||(ge[3]=vt=>H.value.status=vt),items:q,label:"Status",variant:"outlined",density:"compact",required:"","hide-details":""},null,8,["modelValue"])]),_:1}),l(et,{cols:"3",class:"px-1"},{default:u(()=>[l(Pa,{modelValue:H.value.startDate,"onUpdate:modelValue":ge[4]||(ge[4]=vt=>H.value.startDate=vt),label:"Start Date",type:"date",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),l(et,{cols:"3",class:"pl-1"},{default:u(()=>[l(Pa,{modelValue:H.value.endDate,"onUpdate:modelValue":ge[5]||(ge[5]=vt=>H.value.endDate=vt),label:"End Date",type:"date",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),l(st,{"no-gutters":"",class:"mb-0"},{default:u(()=>[l(et,{cols:"4",class:"pr-1"},{default:u(()=>[l(Pa,{modelValue:H.value.followupDate,"onUpdate:modelValue":ge[6]||(ge[6]=vt=>H.value.followupDate=vt),label:"Follow-up Date",type:"date",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),l(et,{cols:"6",class:"pl-1 d-flex align-center"},{default:u(()=>[l(Ss,{modelValue:H.value.isReminded,"onUpdate:modelValue":ge[7]||(ge[7]=vt=>H.value.isReminded=vt),label:H.value.isReminded?"Reminded":"Reminder Pending",color:"primary",density:"compact","hide-details":"","true-value":!0,"false-value":!1},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1})])):ye("",!0)]),_:1})]),_:1}),l(nt,{class:"form-section-card card-status-default mx-2 my-1 pa-3",elevation:"2"},{default:u(()=>[l(st,{"no-gutters":""},{default:u(()=>[l(et,{cols:"12",class:"d-flex align-center"},{default:u(()=>[l(kn,{class:"pa-0"},{default:u(()=>[...ge[30]||(ge[30]=[h("strong",null,"Cost and Payment Information",-1)])]),_:1}),k.value&&k.value.length===0?(R(),Ae("span",RTe,"- No payment receipts found")):ye("",!0)]),_:1})]),_:1}),f.value&&f.value.length>0?(R(),Ae("div",NTe,[l(nt,{class:"cost-breakdown-card",color:"blue-grey-lighten-5",elevation:"0",rounded:"lg"},{default:u(()=>[l(jo,{class:"pa-3"},{default:u(()=>[l(st,{"no-gutters":"",class:"justify-space-between align-center"},{default:u(()=>[l(et,null,{default:u(()=>[h("div",VTe,[ge[31]||(ge[31]=h("p",{class:"text-caption text-medium-emphasis mb-0"},"Base Cost",-1)),h("p",LTe,""+K(G.value.toLocaleString()),1)])]),_:1}),l(et,null,{default:u(()=>[h("div",MTe,[ge[32]||(ge[32]=h("p",{class:"text-caption text-medium-emphasis mb-0"},"Final Cost",-1)),h("p",OTe,""+K(J.value.toLocaleString()),1)])]),_:1}),l(et,null,{default:u(()=>[h("div",HTe,[ge[33]||(ge[33]=h("p",{class:"text-caption text-medium-emphasis mb-0"},"Amount Due",-1)),h("p",$Te,""+K(M.value.toLocaleString()),1)])]),_:1}),l(et,null,{default:u(()=>[h("div",QTe,[ge[34]||(ge[34]=h("p",{class:"text-caption text-medium-emphasis mb-0"},"Amount Paid",-1)),h("p",GTe,""+K(te.value.toLocaleString()),1)])]),_:1}),l(et,null,{default:u(()=>[h("div",zTe,[ge[35]||(ge[35]=h("p",{class:"text-caption text-medium-emphasis mb-0"},"Amount Pending",-1)),h("p",{class:ct(["text-body-2 font-weight-medium mb-0",Y.value>0?"text-error":"text-success"])}," "+K(Y.value.toLocaleString()),3)])]),_:1})]),_:1}),G.value!==J.value?(R(),ve(st,{key:0,"no-gutters":"",class:"justify-space-between align-center mt-2"},{default:u(()=>[l(et),l(et,null,{default:u(()=>[h("div",KTe,[l(Sn,{size:"small",color:J.value<G.value?"success":"warning",variant:"outlined",density:"compact"},{default:u(()=>[O(K(J.value<G.value?""+(G.value-J.value).toLocaleString()+" off":""+(J.value-G.value).toLocaleString()+" markup"),1)]),_:1},8,["color"])])]),_:1}),l(et),l(et),l(et)]),_:1})):ye("",!0)]),_:1})]),_:1})])):ye("",!0),k.value?k.value.length>0?(R(),Ae("div",jTe,[(R(!0),Ae(Ke,null,Gt(k.value,vt=>(R(),ve(nt,{key:vt.id,class:"payment-receipt-card ma-1 pa-2",variant:"outlined",rounded:"md"},{default:u(()=>[l(st,{"no-gutters":"",align:"center"},{default:u(()=>[l(et,null,{default:u(()=>[h("div",qTe,[h("span",YTe,K(vt.identifier),1),l(Es,{vertical:"",class:"mx-2"}),h("span",XTe,K(Wt(vt.paymentReceiptDate)),1),l(Es,{vertical:"",class:"mx-2"}),h("span",JTe,[ge[36]||(ge[36]=h("strong",null,"Total:",-1)),O(" "+K((vt.totalAmount||0).toLocaleString()),1)]),l(Es,{vertical:"",class:"mx-2"}),h("span",ZTe,[ge[37]||(ge[37]=h("strong",null,"Paid:",-1)),O(" "+K((vt.totalPaid||0).toLocaleString()),1)]),vt.balanceDue>0?(R(),Ae(Ke,{key:0},[l(Es,{vertical:"",class:"mx-2"}),h("span",e4e,[ge[38]||(ge[38]=h("strong",null,"Balance:",-1)),O(" "+K(vt.balanceDue.toLocaleString()),1)])],64)):(R(),Ae(Ke,{key:1},[l(Es,{vertical:"",class:"mx-2"}),l(Sn,{size:"x-small",color:"success",variant:"outlined",class:"receipt-status"},{default:u(()=>[...ge[39]||(ge[39]=[O(" Paid ",-1)])]),_:1})],64))])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))])):ye("",!0):(R(),Ae("div",WTe,[l(wt,{indeterminate:"",color:"primary",size:"24"})]))]),_:1}),l(nt,{class:"form-section-card card-status-default mx-2 my-1 pa-3",elevation:"2"},{default:u(()=>[l(st,{"no-gutters":""},{default:u(()=>[l(et,{cols:"6",class:"d-flex align-top"},{default:u(()=>[l(kn,{class:"pa-0"},{default:u(()=>[...ge[40]||(ge[40]=[h("strong",null,"Procedures",-1)])]),_:1})]),_:1}),l(et,{cols:"6",class:"d-flex justify-end align-center mb-2 gap-2"},{default:u(()=>[l(He,{text:"Create Procedure"},{activator:u(({props:vt})=>[l(It,Pe({variant:"outlined",size:"small",class:"d-flex align-center justify-center btn-hover-enhanced"},vt,{onClick:rt,disabled:!e.treatmentPlan?.id||e.treatmentPlan.id==="0"}),{default:u(()=>[l(hn,{start:""},{default:u(()=>[...ge[41]||(ge[41]=[h("img",{src:PE,alt:"Create Procedure"},null,-1)])]),_:1}),ge[42]||(ge[42]=O(" Create Procedure ",-1))]),_:1},16,["disabled"])]),_:1})]),_:1})]),_:1}),l(st,{"no-gutters":""},{default:u(()=>[l(et,{cols:"1"}),l(et,{cols:"10"},{default:u(()=>[l(tTe,{onHandleSearchedProcedures:ut,onAddProcedure:rt})]),_:1})]),_:1}),m.value&&m.value.length>0?(R(),Ae("div",t4e,[l(st,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(et,{cols:"8"},{default:u(()=>[h("h6",n4e,"Selected Procedures ("+K(m.value.filter(vt=>vt.isSelected).length)+")",1)]),_:1}),l(et,{cols:"4",class:"d-flex justify-end align-center"},{default:u(()=>[l(It,{color:"primary",size:"small",class:"btn-hover-enhanced",onClick:dt,loading:T.value,disabled:m.value.filter(vt=>vt.isSelected).length===0},{default:u(()=>[...ge[43]||(ge[43]=[O(" Save to Treatment Plan ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),(R(!0),Ae(Ke,null,Gt(m.value,vt=>(R(),Ae("div",{key:vt.stagingId,class:"staging-row pa-3 mb-2",style:{border:"2px dashed rgba(var(--v-theme-primary), 0.3)","border-radius":"8px","background-color":"rgba(var(--v-theme-primary), 0.05)"}},[l(st,{"no-gutters":""},{default:u(()=>[l(et,{cols:"3",class:"d-flex flex-column justify-start align-start"},{default:u(()=>[h("div",a4e,[h("h5",r4e,K(vt.procedureName||"Unknown Procedure"),1),l(hn,{size:"small",class:"text-medium-emphasis"},{default:u(()=>[h("img",{src:vt.isLocal?Qe(Wd):Qe(gh),alt:vt.isLocal?"Local":"Server"},null,8,s4e)]),_:2},1024)])]),_:2},1024),l(et,{cols:"2",class:"px-2"},{default:u(()=>[ge[44]||(ge[44]=h("div",{class:"text-caption text-medium-emphasis"},"Location",-1)),l(Pa,{modelValue:vt.location,"onUpdate:modelValue":pn=>vt.location=pn,variant:"underlined",density:"compact",placeholder:"e.g.#14,left leg","hide-details":"",class:"location-input"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(et,{cols:"2",class:"px-2"},{default:u(()=>[ge[45]||(ge[45]=h("div",{class:"text-caption text-medium-emphasis"},"Option",-1)),l(Zr,{modelValue:vt.option,"onUpdate:modelValue":pn=>vt.option=pn,variant:"underlined",density:"compact",items:["","A","B","C","D"],placeholder:"Select","hide-details":"",class:"option-select"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(et,{cols:"2",class:"px-2"},{default:u(()=>[ge[46]||(ge[46]=h("div",{class:"text-caption text-medium-emphasis"},"Base Cost",-1)),l(Pa,{modelValue:vt.cost,"onUpdate:modelValue":pn=>vt.cost=pn,modelModifiers:{number:!0},variant:"underlined",density:"compact",type:"number",min:"0",step:"0.01",prefix:"","hide-details":"",class:"base-cost-input",placeholder:vt.isLocal?"Set cost":"Server procedure",onInput:pn=>vt.costEstimate=vt.cost},null,8,["modelValue","onUpdate:modelValue","placeholder","onInput"])]),_:2},1024),l(et,{cols:"2",class:"px-2"},{default:u(()=>[ge[47]||(ge[47]=h("div",{class:"text-caption text-medium-emphasis"},"Estimate Cost",-1)),l(Pa,{modelValue:vt.costEstimate,"onUpdate:modelValue":pn=>vt.costEstimate=pn,modelModifiers:{number:!0},variant:"underlined",density:"compact",type:"number",min:"0",step:"0.01",prefix:"","hide-details":"",class:"final-cost-input"},null,8,["modelValue","onUpdate:modelValue"]),vt.cost&&vt.costEstimate!==vt.cost?(R(),ve(Sn,{key:0,size:"small",color:vt.costEstimate<vt.cost?"success":"warning",variant:"outlined",density:"comfortable",class:"mt-1"},{default:u(()=>[O(K(vt.costEstimate<vt.cost?""+(vt.cost-vt.costEstimate).toLocaleString()+" off":""+(vt.costEstimate-vt.cost).toLocaleString()+" markup"),1)]),_:2},1032,["color"])):ye("",!0)]),_:2},1024),l(et,{cols:"1",class:"d-flex justify-end align-center"},{default:u(()=>[l(He,{text:"Remove from staging"},{activator:u(({props:pn})=>[l(It,Pe({size:"small",icon:"",variant:"plain",onClick:In=>Ft(vt.stagingId),class:"edit-icon mr-2"},{ref_for:!0},pn),{default:u(()=>[l(hn,{size:"small",color:"error"},{default:u(()=>[...ge[48]||(ge[48]=[O("mdi-delete",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024),l(Nt,{modelValue:vt.isSelected,"onUpdate:modelValue":pn=>vt.isSelected=pn,"true-value":!0,"false-value":!1,density:"compact","hide-details":"",class:"treatment-checkbox"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]))),128))])):ye("",!0),m.value&&m.value.length>0&&f.value&&f.value.length>0?(R(),ve(Es,{key:1,class:"mx-4 my-2"})):ye("",!0),W.value?(R(),ve(Dr,{key:2,type:"info",variant:"tonal",density:"compact",class:"mx-2 mb-2",icon:"mdi-information-outline",border:"start"},{default:u(()=>[...ge[49]||(ge[49]=[h("div",{class:"text-caption"}," Some procedures have options (A, B, C...) added to them. Please clear options once treatmentplan is finalized. ",-1)])]),_:1})):ye("",!0),h("div",o4e,[ee.value&&ee.value.length>0?(R(),ve(st,{key:0,"no-gutters":"",class:"mb-2"},{default:u(()=>[l(et,{cols:"8",class:"d-flex justify-start align-center"},{default:u(()=>[h("h6",i4e,"Saved Procedures ("+K(ee.value.filter(vt=>vt.isSelected&&vt.status?.toLowerCase()!=="cancelled").length)+")",1)]),_:1}),l(et,{cols:"4",class:"d-flex justify-end align-center"},{default:u(()=>[l(It,{color:"primary",size:"small",class:"btn-hover-enhanced",onClick:it,loading:D.value,disabled:!ee.value||ee.value.length===0},{default:u(()=>[...ge[50]||(ge[50]=[O(" Save Changes ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1})):ye("",!0),ee.value&&ee.value.length>0?(R(!0),Ae(Ke,{key:1},Gt(ee.value,vt=>(R(),Ae("div",{key:vt.id,class:"procedure-item-card pa-2 mb-1",style:{border:"1px solid rgba(var(--v-theme-outline), 0.12)","border-radius":"12px","background-color":"rgba(var(--v-theme-surface), 0.5)"}},[l(st,{"no-gutters":"",align:"center"},{default:u(()=>[l(et,{cols:"5",class:"pr-2"},{default:u(()=>[h("div",l4e,[h("div",u4e,K(vt.procedure?.procedure_name||vt.procedureName||vt.procedure_name||"Unknown Procedure"),1)]),h("div",c4e,[O(" Base Cost "+K((vt.procedureCost||0).toLocaleString())+" ",1),l(He,{text:"Edit Procedure"},{activator:u(({props:pn})=>[l(It,Pe({size:"x-small",icon:"",variant:"text",onClick:vn(In=>yt(vt),["stop"]),class:"edit-icon-btn"},{ref_for:!0},pn),{default:u(()=>[l(hn,{size:"14",color:"primary"},{default:u(()=>[...ge[51]||(ge[51]=[h("img",{src:pv},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)])]),_:2},1024),l(et,{cols:"2",class:"px-1"},{default:u(()=>[ge[52]||(ge[52]=h("div",{class:"text-caption text-medium-emphasis mb-1"},"Location",-1)),l(Pa,{modelValue:vt.location,"onUpdate:modelValue":pn=>vt.location=pn,variant:"outlined",density:"compact",placeholder:"e.g.#14,left leg","hide-details":"",class:"location-input-field"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(et,{cols:"2",class:"px-1"},{default:u(()=>[ge[53]||(ge[53]=h("div",{class:"text-caption text-medium-emphasis mb-1"},"Option",-1)),l(Zr,{modelValue:vt.option,"onUpdate:modelValue":pn=>vt.option=pn,variant:"outlined",density:"compact",items:["","A","B","C","D"],placeholder:"Select","hide-details":"",class:"option-select-field"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(et,{cols:"2",class:"px-1"},{default:u(()=>[ge[54]||(ge[54]=h("div",{class:"text-caption text-medium-emphasis mb-1"},"Final Cost",-1)),l(Pa,{modelValue:vt.costEstimate,"onUpdate:modelValue":pn=>vt.costEstimate=pn,modelModifiers:{number:!0},variant:"outlined",density:"compact",type:"number",min:"0",step:"0.01",prefix:"","hide-details":"",class:"final-cost-input-field",onBlur:pn=>qe(vt)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),_:2},1024),l(et,{cols:"1",class:"pl-1 d-flex justify-end align-center"},{default:u(()=>[h("div",d4e,[l(He,{text:"Duplicate Procedure"},{activator:u(({props:pn})=>[l(It,Pe({size:"small",icon:"",variant:"text",onClick:In=>mt(vt),class:"edit-icon-btn"},{ref_for:!0},pn),{default:u(()=>[l(hn,{size:"18",color:"primary"},{default:u(()=>[...ge[55]||(ge[55]=[h("img",{src:PE},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024),l(He,{text:"Remove Procedure"},{activator:u(({props:pn})=>[l(It,Pe({size:"small",icon:"",variant:"text",onClick:In=>oa(vt),class:"edit-icon-btn"},{ref_for:!0},pn),{default:u(()=>[l(hn,{size:"18",color:"error"},{default:u(()=>[...ge[56]||(ge[56]=[h("img",{src:Id},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)])]),_:2},1024)]),_:2},1024),l(st,{"no-gutters":"",align:"center",class:"mt-1"},{default:u(()=>[l(et,{cols:"5",class:"pr-2"},{default:u(()=>[h("div",A4e,[l(Sn,{size:"small",color:Rt(vt.status),variant:"outlined",density:"compact",class:"text-caption"},{default:u(()=>[O(K((vt.status||"proposed").charAt(0).toUpperCase()+(vt.status||"proposed").slice(1).replace("_"," ")),1)]),_:2},1032,["color"])])]),_:2},1024),l(et,{cols:"2",class:"px-1"}),l(et,{cols:"2",class:"px-1"}),l(et,{cols:"2",class:"px-1"},{default:u(()=>[h("div",f4e,[vt.procedureCost&&vt.costEstimate!==vt.procedureCost?(R(),ve(Sn,{key:0,size:"small",color:vt.costEstimate<vt.procedureCost?"success":"warning",variant:"outlined",density:"compact",class:"text-caption"},{default:u(()=>[O(K(vt.costEstimate<vt.procedureCost?""+(vt.procedureCost-vt.costEstimate).toLocaleString()+" off":""+(vt.costEstimate-vt.procedureCost).toLocaleString()+" markup"),1)]),_:2},1032,["color"])):ye("",!0)])]),_:2},1024),l(et,{cols:"1",class:"pl-1"})]),_:2},1024)]))),128)):(R(),Ae("div",m4e,[...ge[57]||(ge[57]=[h("p",{class:"text-subtitle-1 text-medium-emphasis"},"No procedures added yet",-1),h("p",{class:"text-caption text-medium-emphasis"},"Add procedures to create a treatment plan",-1)])]))])]),_:1})]),_:1})]),_:1})):ye("",!0)]),_:1}),l(Mn,{value:"progress",class:"h-100"},{default:u(()=>[e.treatmentPlan?.id&&e.treatmentPlan.id!=="0"?(R(),ve(st,{key:0,"no-gutters":"",class:"h-100"},{default:u(()=>[l(et,{cols:"12",class:"scroll-element",style:{"padding-bottom":"20px"}},{default:u(()=>[ae.value.unscheduled.length>0||ae.value.dateGroups.length>0?(R(),Ae(Ke,{key:0},[ae.value.unscheduled.length>0?(R(),Ae("div",v4e,[h("div",h4e,[l(Sn,{color:"grey",variant:"elevated",size:"default",class:"date-chip-vertical","prepend-icon":"mdi-calendar-remove"},{default:u(()=>[...ge[58]||(ge[58]=[O(" Unscheduled ",-1)])]),_:1}),l(Es,{class:"ml-4"})]),(R(!0),Ae(Ke,null,Gt(ae.value.unscheduled,vt=>(R(),Ae("div",{key:vt.id,class:"ma-2 mb-2"},[l(nt,{class:"form-section-card card-status-default pa-3 treatment-row"},{default:u(()=>[l(st,{"no-gutters":"",class:"mb-2 procedure-header",onClick:pn=>zt(vt.id),style:{cursor:"pointer"}},{default:u(()=>[l(et,{cols:"11",class:"d-flex flex-column justify-start align-start"},{default:u(()=>[h("h5",p4e,K(vt.procedure?.procedure_name||vt.procedureName||vt.procedure_name||"Unknown Procedure"),1),h("div",g4e,[vt.location?(R(),ve(Sn,{key:0,size:"small",color:"blue-grey",variant:"outlined",density:"compact"},{default:u(()=>[O(K(vt.location),1)]),_:2},1024)):ye("",!0),l(Sn,{size:"small",color:Rt(vt.status),variant:"outlined",density:"compact"},{default:u(()=>[O(K((vt.status||"proposed").charAt(0).toUpperCase()+(vt.status||"proposed").slice(1).replace("_"," ")),1)]),_:2},1032,["color"])]),h("div",y4e,K(vt.procedure?.description||vt.description||vt.procedureDescription||""),1)]),_:2},1024),l(et,{cols:"1",class:"d-flex flex-column justify-center align-center"},{default:u(()=>[l(hn,{size:"small",color:"primary",class:"expand-hint"},{default:u(()=>[O(K(Pt(vt.id)?"mdi-chevron-up":"mdi-chevron-down"),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]),l(Za,null,{default:u(()=>[ma(h("div",null,[l(st,{"no-gutters":"",class:"mb-4 align-center"},{default:u(()=>[l(et,{cols:"12",md:"3",class:"pr-2"},{default:u(()=>[l(Pa,{modelValue:vt.startDate,"onUpdate:modelValue":pn=>vt.startDate=pn,label:"Start Date",variant:"outlined",density:"compact",type:"date","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(et,{cols:"12",md:"3",class:"px-1"},{default:u(()=>[l(Pa,{modelValue:vt.endDate,"onUpdate:modelValue":pn=>vt.endDate=pn,label:"End Date",variant:"outlined",density:"compact",type:"date","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(et,{cols:"12",md:"2",class:"px-1"},{default:u(()=>[l(Zr,{modelValue:vt.status,"onUpdate:modelValue":pn=>vt.status=pn,label:"Status",variant:"outlined",density:"compact",items:P,"hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(et,{cols:"12",md:"4",class:"d-flex justify-end gap-2 pl-2"},{default:u(()=>[l(It,{color:"primary",variant:"flat",size:"small",class:"btn-hover-enhanced",loading:vt.isUpdating,onClick:vn(pn=>_t(vt),["stop"])},{default:u(()=>[...ge[59]||(ge[59]=[O(" Save ",-1)])]),_:1},8,["loading","onClick"])]),_:2},1024)]),_:2},1024),l(st,{"no-gutters":"",class:"mt-2"},{default:u(()=>[l(et,{cols:"12"},{default:u(()=>[l(st,{"no-gutters":"",class:"mb-1 mx-2"},{default:u(()=>[l(et,{cols:"11"},{default:u(()=>[l(Er,{modelValue:vt.notes,"onUpdate:modelValue":pn=>vt.notes=pn,label:"Notes",variant:"underlined",density:"compact",rows:"2","auto-grow":"",clearable:"","hide-details":"",placeholder:"Add notes about procedure progress..."},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(et,{cols:"1",class:"d-flex align-center justify-center"},{default:u(()=>[l(He,{text:"Voice Input"},{activator:u(({props:pn})=>[l(It,Pe({icon:"mdi-microphone",rounded:"xls",variant:"flat",color:"primary",size:"small"},{ref_for:!0},pn,{onClick:In=>ia(vt),tabindex:"-1",class:"dictation-btn"}),null,16,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),l(st,{"no-gutters":"",class:"mt-4"},{default:u(()=>[l(et,{cols:"12",class:"px-2"},{default:u(()=>[l(nt,{variant:"outlined",class:"pa-3 post-procedure-care-card"},{default:u(()=>[l(kn,{class:"text-subtitle-2 pa-0 mb-2"},{default:u(()=>[...ge[60]||(ge[60]=[O(" Post-Procedure Care Instructions ",-1)])]),_:1}),l(st,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(et,{cols:"10"},{default:u(()=>[l(gR,{"doctor-id":s.value,onPostProcedureCareSelected:pn=>zn(pn,vt)},null,8,["doctor-id","onPostProcedureCareSelected"])]),_:2},1024),l(et,{cols:"2"})]),_:2},1024),l(st,{"no-gutters":""},{default:u(()=>[l(et,{cols:"10"},{default:u(()=>[l(Er,{modelValue:vt.postProcedureCare,"onUpdate:modelValue":pn=>vt.postProcedureCare=pn,label:"Instructions",variant:"underlined",density:"compact",rows:"2","auto-grow":"",clearable:"","hide-details":"",placeholder:"Enter post-procedure care instructions..."},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(et,{cols:"1",class:"d-flex align-center justify-center"},{default:u(()=>[l(He,{text:"Voice Input"},{activator:u(({props:pn})=>[l(It,Pe({icon:"mdi-microphone",rounded:"xls",variant:"flat",color:"primary",size:"small"},{ref_for:!0},pn,{onClick:In=>Yt(vt),tabindex:"-1",class:"dictation-btn"}),null,16,["onClick"])]),_:2},1024)]),_:2},1024),l(et,{cols:"1",class:"d-flex align-center justify-center"},{default:u(()=>[l(He,{text:"Share via WhatsApp"},{activator:u(({props:pn})=>[l(It,Pe({icon:"",rounded:"xls",variant:"flat",color:"success",size:"small"},{ref_for:!0},pn,{onClick:In=>ze(vt),loading:vt.sendingWhatsApp,disabled:!vt.postProcedureCare||!vt.postProcedureCare.trim(),tabindex:"-1",class:"whatsapp-btn"}),{default:u(()=>[l(hn,{size:"small"},{default:u(()=>[...ge[61]||(ge[61]=[h("img",{src:Y_,alt:"WhatsApp",style:{width:"18px",height:"18px"}},null,-1)])]),_:1})]),_:1},16,["onClick","loading","disabled"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)],512),[[ii,Pt(vt.id)]])]),_:2},1024)]),_:2},1024)]))),128))])):ye("",!0),(R(!0),Ae(Ke,null,Gt(ae.value.dateGroups,(vt,pn)=>(R(),Ae("div",{key:`date-${pn}`,class:"date-section mb-4"},[h("div",{class:"date-header-vertical mb-3",style:Ut((pn===0&&ae.value.unscheduled.length===0?"margin-top: 16px;":"")+" margin-left: 8px;")},[l(Sn,{color:"primary",variant:"elevated",size:"default",class:"date-chip-vertical","prepend-icon":"mdi-calendar",title:vt.fullDate||vt.date},{default:u(()=>[O(K(vt.date),1)]),_:2},1032,["title"]),l(Es,{class:"ml-4"})],4),(R(!0),Ae(Ke,null,Gt(vt.procedures,In=>(R(),Ae("div",{key:In.id,class:"ma-2 mb-2"},[l(nt,{class:"form-section-card card-status-default pa-3 treatment-row"},{default:u(()=>[l(st,{"no-gutters":"",class:"mb-2 procedure-header",onClick:ya=>zt(In.id),style:{cursor:"pointer"}},{default:u(()=>[l(et,{cols:"11",class:"d-flex flex-column justify-start align-start"},{default:u(()=>[h("h5",_4e,K(In.procedure?.procedure_name||In.procedureName||In.procedure_name||"Unknown Procedure"),1),h("div",w4e,[In.location?(R(),ve(Sn,{key:0,size:"small",color:"blue-grey",variant:"outlined",density:"compact"},{default:u(()=>[O(K(In.location),1)]),_:2},1024)):ye("",!0),l(Sn,{size:"small",color:Rt(In.status),variant:"outlined",density:"compact"},{default:u(()=>[O(K((In.status||"proposed").charAt(0).toUpperCase()+(In.status||"proposed").slice(1).replace("_"," ")),1)]),_:2},1032,["color"])]),h("div",b4e,K(In.procedure?.description||In.description||In.procedureDescription||""),1)]),_:2},1024),l(et,{cols:"1",class:"d-flex flex-column justify-center align-center"},{default:u(()=>[l(hn,{size:"small",color:"primary",class:"expand-hint"},{default:u(()=>[O(K(Pt(In.id)?"mdi-chevron-up":"mdi-chevron-down"),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]),l(Za,null,{default:u(()=>[ma(h("div",null,[l(st,{"no-gutters":"",class:"mb-4 align-center"},{default:u(()=>[l(et,{cols:"12",md:"3",class:"pr-2"},{default:u(()=>[l(Pa,{modelValue:In.startDate,"onUpdate:modelValue":ya=>In.startDate=ya,label:"Start Date",variant:"outlined",density:"compact",type:"date","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(et,{cols:"12",md:"3",class:"px-1"},{default:u(()=>[l(Pa,{modelValue:In.endDate,"onUpdate:modelValue":ya=>In.endDate=ya,label:"End Date",variant:"outlined",density:"compact",type:"date","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(et,{cols:"12",md:"2",class:"px-1"},{default:u(()=>[l(Zr,{modelValue:In.status,"onUpdate:modelValue":ya=>In.status=ya,label:"Status",variant:"outlined",density:"compact",items:P,"hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(et,{cols:"12",md:"4",class:"d-flex justify-end gap-2 pl-2"},{default:u(()=>[l(It,{color:"primary",variant:"flat",size:"small",class:"btn-hover-enhanced",loading:In.isUpdating,onClick:vn(ya=>_t(In),["stop"])},{default:u(()=>[...ge[62]||(ge[62]=[O(" Save ",-1)])]),_:1},8,["loading","onClick"])]),_:2},1024)]),_:2},1024),l(st,{"no-gutters":"",class:"mt-2"},{default:u(()=>[l(et,{cols:"12"},{default:u(()=>[l(st,{"no-gutters":"",class:"mb-1 mx-2"},{default:u(()=>[l(et,{cols:"11"},{default:u(()=>[l(Er,{modelValue:In.notes,"onUpdate:modelValue":ya=>In.notes=ya,label:"Notes",variant:"underlined",density:"compact",rows:"2","auto-grow":"",clearable:"","hide-details":"",placeholder:"Add notes about procedure progress..."},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(et,{cols:"1",class:"d-flex align-center justify-center"},{default:u(()=>[l(He,{text:"Voice Input"},{activator:u(({props:ya})=>[l(It,Pe({icon:"mdi-microphone",rounded:"xls",variant:"flat",color:"primary",size:"small"},{ref_for:!0},ya,{onClick:ju=>ia(In),tabindex:"-1",class:"dictation-btn"}),null,16,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),l(st,{"no-gutters":"",class:"mt-4"},{default:u(()=>[l(et,{cols:"12",class:"px-2"},{default:u(()=>[l(nt,{variant:"outlined",class:"pa-3 post-procedure-care-card"},{default:u(()=>[l(kn,{class:"text-subtitle-2 pa-0 mb-2"},{default:u(()=>[...ge[63]||(ge[63]=[O(" Post-Procedure Care Instructions ",-1)])]),_:1}),l(st,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(et,{cols:"10"},{default:u(()=>[l(gR,{"doctor-id":s.value,onPostProcedureCareSelected:ya=>zn(ya,In)},null,8,["doctor-id","onPostProcedureCareSelected"])]),_:2},1024),l(et,{cols:"2"})]),_:2},1024),l(st,{"no-gutters":""},{default:u(()=>[l(et,{cols:"10"},{default:u(()=>[l(Er,{modelValue:In.postProcedureCare,"onUpdate:modelValue":ya=>In.postProcedureCare=ya,label:"Instructions",variant:"underlined",density:"compact",rows:"2","auto-grow":"",clearable:"","hide-details":"",placeholder:"Enter post-procedure care instructions..."},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(et,{cols:"1",class:"d-flex align-center justify-center"},{default:u(()=>[l(He,{text:"Voice Input"},{activator:u(({props:ya})=>[l(It,Pe({icon:"mdi-microphone",rounded:"xls",variant:"flat",color:"primary",size:"small"},{ref_for:!0},ya,{onClick:ju=>Yt(In),tabindex:"-1",class:"dictation-btn"}),null,16,["onClick"])]),_:2},1024)]),_:2},1024),l(et,{cols:"1",class:"d-flex align-center justify-center"},{default:u(()=>[l(He,{text:"Share via WhatsApp"},{activator:u(({props:ya})=>[l(It,Pe({icon:"",rounded:"xls",variant:"flat",color:"success",size:"small"},{ref_for:!0},ya,{onClick:ju=>ze(In),loading:In.sendingWhatsApp,disabled:!In.postProcedureCare||!In.postProcedureCare.trim(),tabindex:"-1",class:"whatsapp-btn"}),{default:u(()=>[l(hn,{size:"small"},{default:u(()=>[...ge[64]||(ge[64]=[h("img",{src:Y_,alt:"WhatsApp",style:{width:"18px",height:"18px"}},null,-1)])]),_:1})]),_:1},16,["onClick","loading","disabled"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)],512),[[ii,Pt(In.id)]])]),_:2},1024)]),_:2},1024)]))),128))]))),128))],64)):(R(),Ae("div",x4e,[l(hn,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...ge[65]||(ge[65]=[h("img",{src:FE},null,-1)])]),_:1}),ge[66]||(ge[66]=h("p",{class:"text-subtitle-1 text-medium-emphasis"},"No procedures to track",-1)),ge[67]||(ge[67]=h("p",{class:"text-caption text-medium-emphasis"},"Add procedures to the treatment plan first",-1))]))]),_:1})]),_:1})):ye("",!0)]),_:1}),l(Mn,{value:"share",class:"h-100"},{default:u(()=>[e.treatmentPlan?.id&&e.treatmentPlan.id!=="0"?(R(),ve(st,{key:0,"no-gutters":"",class:"h-100"},{default:u(()=>[l(et,{cols:"12"},{default:u(()=>[l(ph,{"content-type":"treatment-plan",data:{treatmentPlan:d.value,procedureTreatments:f.value,paymentReceipts:k.value,printConfigurations:Z.value},patient:e.patient,onPdfGenerated:Ge},null,8,["data","patient"])]),_:1})]),_:1})):ye("",!0)]),_:1}),l(Mn,{value:"uploads",class:"h-100"},{default:u(()=>[l(st,{"no-gutters":"","aria-label":"toolbar",class:"h-100"},{default:u(()=>[l(et,{cols:"12"},{default:u(()=>[l(t$,{procedure:d.value,patient:e.patient},null,8,["procedure","patient"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(Ys,{modelValue:v.value,"onUpdate:modelValue":ge[9]||(ge[9]=vt=>v.value=vt),"max-width":"500px",persistent:""},{default:u(()=>[l(jke,{onClose:an,"onUpdate:procedurelist":xt})]),_:1},8,["modelValue"]),l(Ys,{modelValue:p.value,"onUpdate:modelValue":ge[10]||(ge[10]=vt=>p.value=vt),"max-width":"500px",persistent:""},{default:u(()=>[y.value?(R(),ve(qke,{key:0,procedure:y.value,onClose:Cn,onProcedureUpdated:Ye},null,8,["procedure"])):ye("",!0)]),_:1},8,["modelValue"]),l(Ys,{modelValue:g.value,"onUpdate:modelValue":ge[11]||(ge[11]=vt=>g.value=vt),"max-width":"500px",persistent:""},{default:u(()=>[w.value&&g.value?(R(),ve(Yke,{key:0,"procedure-treatment":w.value,"treatment-plan-id":e.treatmentPlan?.id,onClose:Vt,onDeleted:kt},null,8,["procedure-treatment","treatment-plan-id"])):ye("",!0)]),_:1},8,["modelValue"]),l(Xp,{modelValue:ue.value,"onUpdate:modelValue":ge[12]||(ge[12]=vt=>ue.value=vt),"current-text":ie.value?.notes||"",label:"Progress Notes",onTranscriptionComplete:Ln},null,8,["modelValue","current-text"]),l(Xp,{modelValue:Q.value,"onUpdate:modelValue":ge[13]||(ge[13]=vt=>Q.value=vt),"current-text":X.value?.postProcedureCare||"",label:"Post-Procedure Care Instructions",onTranscriptionComplete:Bn},null,8,["modelValue","current-text"]),l(Ys,{modelValue:E.value,"onUpdate:modelValue":ge[14]||(ge[14]=vt=>E.value=vt),"max-width":"800",persistent:""},{default:u(()=>[l(mTe,{treatmentPlanName:d.value?.treatmentPlanName||"",notes:d.value?.notes||"",procedureList:f.value||[],doctorId:s.value,onClose:Ee,"onUpdate&close":Ce},null,8,["treatmentPlanName","notes","procedureList","doctorId"])]),_:1},8,["modelValue"]),l(Ys,{modelValue:C.value,"onUpdate:modelValue":ge[15]||(ge[15]=vt=>C.value=vt),"max-width":"800",persistent:""},{default:u(()=>[U.value?(R(),ve(CTe,{key:0,selectedTemplate:U.value,procedureList:f.value||[],onClose:Te,"onUpdate&close":Oe},null,8,["selectedTemplate","procedureList"])):ye("",!0)]),_:1},8,["modelValue"]),l(Kc,{modelValue:re.value.show,"onUpdate:modelValue":ge[16]||(ge[16]=vt=>re.value.show=vt),color:re.value.color,class:"elevation-24"},{default:u(()=>[O(K(re.value.text),1)]),_:1},8,["modelValue","color"])],64)}}},S4e=qt(C4e,[["__scopeId","data-v-7e8477a1"]]),E4e={class:"d-flex age-dob-container",style:{gap:"8px"}},B4e={class:"d-flex justify-center"},k4e={__name:"edit-patient-details",props:{patient:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=e,a=t,r=V({id:n.patient.id,name:n.patient.name||"",age:n.patient.age||"",birthDate:"",gender:n.patient.gender||"",contactNumber:n.patient.contactNumber||"",email:n.patient.email||"",address:n.patient.address||"",note:n.patient.note||""}),s=V("dob"),o=V("");dn(()=>{if(n.patient.birthDate){let f="";typeof n.patient.birthDate=="string"?f=n.patient.birthDate:typeof n.patient.birthDate=="number"&&(f=Ave(n.patient.birthDate)),f&&(r.value.birthDate=f,s.value="dob")}else s.value="dob"}),je(s,f=>{f==="age"?(r.value.birthDate&&(o.value=r.value.birthDate),r.value.birthDate=""):o.value&&(r.value.birthDate=o.value)});const i=f=>{if(s.value==="dob")if(f){o.value=f;const m=nT(f);m!==null&&(r.value.age=m.toString())}else o.value=""},c=V(!1),A=()=>{a("close")},d=async()=>{const f={...r.value,name:r.value.name||"",age:r.value.age||"",gender:r.value.gender||"",contactNumber:r.value.contactNumber||"",email:r.value.email||"",address:r.value.address||"",note:r.value.note||""};if(s.value==="dob"&&f.birthDate){const v=gd(f.birthDate);v!==null?f.birthDate=v.toString():f.birthDate=""}else delete f.birthDate;const m=await dve(f);m&&!m.error?(console.log("Patient updated successfully"),a("close",r.value)):(console.error("Error updating patient"),a("close"))};return(f,m)=>{const v=I("v-card-title"),p=I("v-col"),g=I("v-icon"),y=I("v-btn"),w=I("v-row"),b=I("v-card"),x=I("v-text-field"),T=I("v-btn-toggle"),D=I("v-select"),k=I("v-textarea"),S=I("v-divider"),E=I("v-form");return R(),ve(b,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[l(w,{"no-gutters":""},{default:u(()=>[l(p,{cols:"12"},{default:u(()=>[l(b,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(w,{"no-gutters":""},{default:u(()=>[l(p,{cols:"11"},{default:u(()=>[l(v,{class:"pa-0 pl-2"},{default:u(()=>[...m[12]||(m[12]=[O("Edit patient details",-1)])]),_:1})]),_:1}),l(p,{cols:"1",class:"d-flex justify-end align-center"},{default:u(()=>[l(y,{icon:"",size:"x-small",onClick:A},{default:u(()=>[l(g,null,{default:u(()=>[...m[13]||(m[13]=[h("img",{src:nu,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(w,{"no-gutters":""},{default:u(()=>[l(p,{cols:"12"},{default:u(()=>[l(b,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(E,{modelValue:c.value,"onUpdate:modelValue":m[11]||(m[11]=C=>c.value=C),"validate-on":"blur"},{default:u(()=>[l(w,{"no-gutters":""},{default:u(()=>[l(p,{cols:"12",class:"my-2"},{default:u(()=>[l(x,{label:"Name *",variant:"outlined",modelValue:r.value.name,"onUpdate:modelValue":m[0]||(m[0]=C=>r.value.name=C),clearable:"",density:"compact",rules:Qe(fr)},null,8,["modelValue","rules"])]),_:1}),l(p,{cols:"12",class:"mb-2"},{default:u(()=>[l(x,{label:"Contact Number *",variant:"outlined",modelValue:r.value.contactNumber,"onUpdate:modelValue":m[1]||(m[1]=C=>r.value.contactNumber=C),type:"tel",rules:Qe(Ah),clearable:"",density:"compact"},null,8,["modelValue","rules"])]),_:1}),l(p,{cols:"12",class:"mb-2"},{default:u(()=>[h("div",E4e,[l(T,{modelValue:s.value,"onUpdate:modelValue":m[2]||(m[2]=C=>s.value=C),mandatory:"",density:"compact",variant:"outlined",divided:"",class:"age-dob-toggle"},{default:u(()=>[l(y,{value:"dob",size:"small"},{default:u(()=>[...m[14]||(m[14]=[O("DOB",-1)])]),_:1}),l(y,{value:"age",size:"small"},{default:u(()=>[...m[15]||(m[15]=[O("AGE",-1)])]),_:1})]),_:1},8,["modelValue"]),s.value==="age"?(R(),ve(x,{key:0,label:"Age (yrs) *",variant:"outlined",modelValue:r.value.age,"onUpdate:modelValue":m[3]||(m[3]=C=>r.value.age=C),clearable:"",density:"compact",rules:Qe(aT),disabled:!!r.value.birthDate||!!o.value,class:"flex-grow-1"},null,8,["modelValue","rules","disabled"])):(R(),ve(x,{key:1,label:"Date of Birth *",variant:"outlined",modelValue:r.value.birthDate,"onUpdate:modelValue":[m[4]||(m[4]=C=>r.value.birthDate=C),i],type:"date",clearable:"",density:"compact",rules:Qe(rT),class:"flex-grow-1 date-input",onClick:m[5]||(m[5]=C=>C.target.showPicker&&C.target.showPicker())},null,8,["modelValue","rules"]))])]),_:1}),l(p,{cols:"12",class:"mb-2"},{default:u(()=>[l(D,{modelValue:r.value.gender,"onUpdate:modelValue":m[6]||(m[6]=C=>r.value.gender=C),items:["Male","Female"],label:"Gender *",required:"",clearable:"",variant:"outlined",density:"compact",rules:Qe(sT)},null,8,["modelValue","rules"])]),_:1}),l(p,{cols:"12",class:"mb-2"},{default:u(()=>[l(x,{label:"Email (optional)",variant:"outlined",modelValue:r.value.email,"onUpdate:modelValue":m[7]||(m[7]=C=>r.value.email=C),clearable:"",density:"compact",rules:Qe(wg)},null,8,["modelValue","rules"])]),_:1}),l(p,{cols:"12",class:"mb-2"},{default:u(()=>[l(x,{label:"Address (optional)",variant:"outlined",modelValue:r.value.address,"onUpdate:modelValue":m[8]||(m[8]=C=>r.value.address=C),clearable:"",density:"compact"},null,8,["modelValue"])]),_:1}),l(p,{cols:"12",class:"mb-2"},{default:u(()=>[l(k,{label:"Patient Notes (optional)",variant:"outlined",modelValue:r.value.note,"onUpdate:modelValue":m[9]||(m[9]=C=>r.value.note=C),clearable:"",density:"compact",rows:"3","auto-grow":""},null,8,["modelValue"])]),_:1}),l(p,{cols:"12"},{default:u(()=>[l(S,{class:"mb-2"}),h("div",B4e,[l(y,{variant:"outlined",onClick:m[10]||(m[10]=C=>d()),disabled:!c.value},{default:u(()=>[...m[16]||(m[16]=[O("Update Patient",-1)])]),_:1},8,["disabled"])])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},T4e=qt(k4e,[["__scopeId","data-v-9b0284ef"]]),I4e={__name:"delete-consultation",props:{deleteConsult:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=e,a=t,r=V(n.deleteConsult),s=()=>{a("close")},o=async i=>{i.status="CANCELLED";const c=await VM(i);c.error?console.error("Consultation delete failed",c.error):console.error("Consultation delete successful"),s()};return(i,c)=>{const A=I("v-card-title"),d=I("v-col"),f=I("v-icon"),m=I("v-btn"),v=I("v-row"),p=I("v-card"),g=I("v-card-text"),y=I("v-divider");return R(),ve(p,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(v,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(p,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(v,{"no-gutters":""},{default:u(()=>[l(d,{cols:"11"},{default:u(()=>[l(A,{class:"pa-0 pl-2"},{default:u(()=>[...c[1]||(c[1]=[O("Confirm Consultation Delete",-1)])]),_:1})]),_:1}),l(d,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(m,{icon:"",size:"x-small",onClick:s},{default:u(()=>[l(f,null,{default:u(()=>[...c[2]||(c[2]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(v,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(p,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(v,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(g,{class:"text-left"},{default:u(()=>[...c[3]||(c[3]=[O(" Are you sure you want to delete this consultation? You will not be able to recover data once deleted. ",-1)])]),_:1})]),_:1})]),_:1}),l(y),l(v,{"no-gutters":""},{default:u(()=>[l(d,{cols:"2"}),l(d,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(m,{variant:"outlined",onClick:c[0]||(c[0]=w=>o(r.value))},{default:u(()=>[...c[4]||(c[4]=[O("Yes, Delete Consultation",-1)])]),_:1})]),_:1}),l(d,{cols:"2"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},F4e={class:"text-center"},P4e={class:"patient-header w-100"},D4e={class:"d-flex align-center flex-wrap justify-center"},U4e={class:"text-body-2 font-weight-bold"},R4e={class:"text-subtitle-2 ml-2 text-medium-emphasis"},N4e={key:0,class:"patient-note-inline-same-row"},V4e={class:"text-caption text-black font-style-italic"},L4e={key:1,class:"patient-note-inline-same-row",style:{opacity:"0.7"}},M4e={class:"scrollable-content"},O4e={class:"d-flex justify-start section-header"},H4e={class:"scroll-hover",style:{height:"calc(100% - 8px)"}},$4e={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},Q4e={key:0},G4e={key:1,class:"text-caption text-medium-emphasis"},z4e={class:"d-flex align-center justify-center"},K4e={key:1,class:"text-center pa-4"},W4e={class:"scroll-hover",style:{height:"calc(100% - 8px)"}},j4e={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},q4e={class:"text-caption text-medium-emphasis mb-1"},Y4e={class:"d-flex align-center justify-center"},X4e={key:2,class:"text-center pa-4"},J4e={class:"scrollable-content"},Z4e={__name:"patient-detail-page",setup(e){const t=ra(),n=Gf(),a=sl(),{hasPermission:r}=ch(),s=V(n.params.id),o=V([]),i=V([]),c=V(!0),A=V({}),d=V({}),f=V(!1),m=V(""),v=V(!1),p=V(""),g=ne(()=>t.state.doctorModule.doctorId),y=V(null),w=V(null),b=V(!0),x=ne(()=>t.getters["doctorModule/isProcedurePrimary"]),T=ne(()=>{const Ee=[],Ce=n.query.from;return Ce==="patients-landing-page"?Ee.push({text:"Patients",to:{path:"/patients"},icon:"mdi-arrow-left",iconClass:"mr-1"}):Ce==="research"?Ee.push({text:"Research",to:{path:"/research"},icon:"mdi-arrow-left",iconClass:"mr-1"}):Ce==="data"?Ee.push({text:"Data",to:{path:"/data"},icon:"mdi-arrow-left",iconClass:"mr-1"}):Ce==="home"?Ee.push({text:"Home",to:{path:"/home"},icon:"mdi-arrow-left",iconClass:"mr-1"}):Ee.push({text:"Patients",to:{path:"/patients"},icon:"mdi-arrow-left",iconClass:"mr-1"}),Ee}),D=V("consultations"),k=V([]),S=V({id:"0"}),E=V(!1),C=V(!1);je(g,async(Ee,Ce)=>{if(Ee&&Ce&&Ee!==Ce&&d.value?.id){console.log(" Doctor changed from",Ce,"to",Ee,"- refreshing consultations and procedures");try{const Be=await t_(d.value.id,Ee);Be.error||(o.value=Qn.cloneDeep(Be.data)),await oe(),await Y(),S.value={id:"0"},E.value=!1}catch(Be){console.error("Error refreshing data after doctor change:",Be),v.value=!0,p.value="Failed to refresh data for new doctor"}}}),Xl(async()=>{try{if(D.value=x.value?"procedures":"consultations",await G(),!s.value)throw new Error("No patient ID provided");if(!g.value)throw new Error("No doctor ID available - please select a doctor first");console.log(" Initializing patient detail page - Patient:",s.value,"Doctor:",g.value);const Ee=await eT(s.value);if(Ee.error)throw new Error(`Failed to load patient: ${Ee.error.message}`);d.value=Qn.cloneDeep(Ee.data),console.log(" Fetching consultations for patient:",d.value.id,"doctor:",g.value);const Ce=await t_(d.value.id,g.value);if(Ce.error)throw new Error(`Failed to load consultations: ${Ce.error.message}`);console.log(" Fetched consultations:",Ce.data),o.value=Qn.cloneDeep(Ce.data),ie(),await oe(),await Y()}catch(Ee){console.error("Error in onBeforeMount:",Ee),w.value=Ee.message||"Failed to load patient data"}finally{b.value=!1}}),dn(async()=>{window.dispatchEvent(new CustomEvent("collapse-side-nav",{detail:!0})),console.log("Consultations on Mount",o.value),console.log("Patient Details on mount",d.value),document.addEventListener("keydown",J)}),va(async()=>{window.dispatchEvent(new CustomEvent("collapse-side-nav",{detail:!1})),document.removeEventListener("keydown",J)});const U=V(!1),F=V(!1),L=Ee=>{if(!Ee){console.error("No consultation provided for deletion"),v.value=!0,p.value="Cannot delete: Invalid consultation";return}U.value=!0,y.value=Ee,console.log("Selected Consultation for Deletion:",Ee)},H=async()=>{try{y.value&&i.value&&y.value.id===i.value.id&&await Y(),U.value=!1,setTimeout(()=>{y.value=null},100)}catch(Ee){console.error("Error handling consultation delete close:",Ee),v.value=!0,p.value="Error refreshing after deletion",U.value=!1,setTimeout(()=>{y.value=null},100)}},ue=async Ee=>{try{F.value=!1,Ee&&(d.value=Qn.cloneDeep(Ee),f.value=!0,m.value="Patient details updated successfully",console.log("Patient details updated:",Ee))}catch(Ce){console.error("Error updating patient details:",Ce),v.value=!0,p.value="Failed to update patient details"}},ie=()=>{if(!Array.isArray(o.value)||o.value.length===0)return;o.value.length>50?window.requestIdleCallback?requestIdleCallback(()=>{Ee()}):setTimeout(()=>{Ee()},0):Ee();function Ee(){o.value.sort((Ce,Be)=>!Ce.consultationDate&&!Be.consultationDate?0:Ce.consultationDate?Be.consultationDate?new Date(Be.consultationDate)-new Date(Ce.consultationDate):-1:1),console.log(" Sorted consultations chronologically:",o.value)}},Q=ne(()=>!Array.isArray(o.value)||o.value.length===0?!1:o.value.some(Ee=>Ee?.consultationDate&&q(Ee))),X=Ee=>{if(!Ee)return 0;const Ce=new Date().toLocaleDateString("en-CA"),Be=new Date(Ee),Oe=new Date(Ce)-Be;return Math.floor(Oe/(1e3*60*60*24))},le=Ee=>{if(!Ee)return{text:"No date",class:"consultation-date-text"};const Ce=new Date(Ee).toLocaleDateString("en-US",{timeZone:"Asia/Kolkata",month:"short",day:"numeric",year:"numeric"}),Be=X(Ee);let Te="",Oe="consultation-date-text";return Be===0?(Te="Today",Oe+=" date-today"):Be>0?(Te=`${Be}d ago`,Oe+=" date-past"):(Te=`${Math.abs(Be)}d to go`,Oe+=" date-future"),{text:`${Ce}  ${Te}`,class:Oe}},Z=Ee=>{if(!Ee)return!1;const Ce=new Date().toLocaleDateString("en-CA");return Ee===Ce},re=Ee=>{if(!Ee)return!1;const Ce=new Date().toLocaleDateString("en-CA"),Be=new Date(Ee),Te=new Date(Ce);return Be>Te},q=Ee=>{if(!Ee?.consultationDate||!Ee?.status)return!1;const Ce=Ee.consultationDate,Be=Ee.status;return(Z(Ce)||re(Ce))&&Be==="CREATED"||Be==="UPDATED"},P=ne(()=>!Array.isArray(o.value)||o.value.length===0?!1:o.value.some(Ee=>Z(Ee.consultationDate)&&(Ee?.status==="UPDATED"||Ee?.status==="CREATED"))),G=async()=>{try{if(await a.isReady(),s.value=n.params.id,!s.value)throw new Error("No patient ID found in URL parameters")}catch(Ee){throw console.error("Error extracting URL parameters:",Ee),w.value="Invalid patient URL",Ee}},J=Ee=>{if(Ee.key==="Escape"){if(window.dictationModalActive)return;const Ce=document.activeElement;if(Ce&&(Ce.tagName==="INPUT"||Ce.tagName==="TEXTAREA"||Ce.isContentEditable||Ce.closest(".v-field__input")||Ce.closest(".v-text-field")||Ce.closest(".v-textarea")))return;Ee.preventDefault(),M()}},M=()=>{try{const Ee=n.query.from;Ee==="patients-landing-page"?a.push("/patients"):Ee==="research"?a.push("/research"):Ee==="data"?a.push("/data"):Ee==="home"?a.push("/home"):a.push("/patients"),console.log(" Navigating back from ESC shortcut to:",Ee||"patients (default)")}catch(Ee){console.error("Error in back navigation:",Ee),a.push("/patients")}},te=async()=>{try{if(!s.value||!g.value)throw new Error("Missing patient or doctor information");const Ee=new Date().toLocaleDateString("en-CA");await Zk(s.value,g.value,Ee);const Ce=await t_(s.value,g.value);if(Ce.error)throw new Error(`Failed to refresh consultations: ${Ce.error.message}`);o.value=Qn.cloneDeep(Ce.data),ie(),await Y(),console.log("New consultation created"),f.value=!0,m.value="New consultation created successfully"}catch(Ee){console.error("Error creating consultation:",Ee),v.value=!0,p.value=Ee.message||"Failed to create consultation"}},Y=async()=>{try{if(o.value&&o.value.length>0){const Ee=o.value.filter(Ce=>Ce?.consultationDate&&q(Ce));Ee.length>0?(i.value=Ee[0],console.log("Selected most recent visible consultation:",i.value)):(console.log("No visible consultations available"),i.value={id:"0"})}else console.log("No consultations available"),i.value={id:"0"};c.value=Z(i.value?.consultationDate)}catch(Ee){console.error("Error selecting most recent consultation:",Ee),i.value={id:"0"},c.value=!1}},W=Ee=>{if(!Ee){console.error("No consultation provided to selectArtefact");return}if(!q(Ee)){console.warn("Attempted to select a consultation that should not be visible:",Ee);return}i.value=Ee,c.value=!1,E.value=!1,console.log("Selected Artefact:",i.value)},ee=Ee=>{if(!Ee?.id){console.error("Invalid consultation provided for update");return}const Ce=o.value.findIndex(Be=>Be?.id===Ee.id);Ce!==-1&&(o.value[Ce]=Ee),console.log("Updated Consultation:",i.value)},ae=Ee=>{if(!Ee){console.error("No consultation provided to copy"),v.value=!0,p.value="Failed to copy consultation details";return}try{A.value=Qn.cloneDeep(Ee),f.value=!0,m.value="Details copied to new consultation",console.log("Copied Artefact:",A.value)}catch(Ce){console.error("Error copying consultation:",Ce),v.value=!0,p.value="Failed to copy consultation details"}},oe=async()=>{if(!d.value.id||!g.value){console.warn("Patient ID or Doctor ID not available for loading procedures");return}C.value=!0;try{console.log(" Fetching procedures for patient:",d.value.id,"doctor:",g.value);const Ee=await iT(d.value.id,g.value);if(Ee.error)throw new Error(`Failed to load treatment plans: ${Ee.error.message}`);console.log(" Fetched procedures:",Ee.data),k.value=Qn.cloneDeep(Ee.data),console.log("Successfully loaded procedures:",k.value)}catch(Ee){console.error("Error loading procedures:",Ee),k.value=[],v.value=!0,p.value=`Failed to load treatment plans: ${Ee.message}`}finally{C.value=!1}},j=async()=>{if(!d.value.id||!g.value){v.value=!0,p.value="Patient or doctor information missing";return}try{const Ee=`New Treatment Plan ${new Date().toLocaleDateString()}`,Ce=await rE(d.value.id,g.value,Ee,"","","");if(Ce.error)throw new Error(`Failed to create procedure: ${Ce.error.message}`);await oe(),S.value=Ce.data,E.value=!0,f.value=!0,m.value="New treatment plan created successfully",console.log("Created new procedure:",Ce.data)}catch(Ee){console.error("Error creating procedure:",Ee),v.value=!0,p.value=Ee.message||"Failed to create treatment plan"}},ce=Ee=>{if(!Ee){console.error("No procedure provided to selectProcedure");return}S.value=Ee,E.value=!0,console.log("Selected Procedure:",S.value)},de=Ee=>{if(!Ee?.id){console.error("Invalid procedure provided for update");return}const Ce=k.value.findIndex(Be=>Be?.id===Ee.id);Ce!==-1&&(k.value[Ce]=Ee,S.value=Ee),console.log("Updated Procedure:",S.value)},_e=async Ee=>{if(!d.value.id||!g.value){v.value=!0,p.value="Patient or doctor information missing";return}try{const Ce=await rE(d.value.id,g.value,Ee.treatmentPlanName||"New Treatment Plan",Ee.startDate||"",Ee.endDate||"",Ee.notes||"");if(Ce.error)throw new Error(`Failed to create procedure: ${Ce.error.message}`);await oe(),S.value=Ce.data,f.value=!0,m.value="Treatment plan created successfully",console.log("Created procedure from window:",Ce.data)}catch(Ce){console.error("Error creating procedure from window:",Ce),v.value=!0,p.value=Ce.message||"Failed to create treatment plan"}},Re=async Ee=>{if(!Ee?.id){console.error("No procedure provided for deletion"),v.value=!0,p.value="Cannot delete: Invalid treatment plan";return}if(confirm(`Are you sure you want to delete the treatment plan "${Ee.treatmentPlanName}"?`))try{const Ce=await qM(Ee.id);if(Ce.error)throw new Error(`Failed to delete procedure: ${Ce.error.message}`);await oe(),S.value?.id===Ee.id&&(S.value={id:"0"},E.value=!1),f.value=!0,m.value="Treatment plan deleted successfully",console.log("Deleted procedure:",Ee.id)}catch(Ce){console.error("Error deleting procedure:",Ce),v.value=!0,p.value=Ce.message||"Failed to delete treatment plan"}},be=Ee=>{if(!Ee)return{text:"No data",class:"procedure-date-text"};let Ce="",Be="",Te="procedure-date-text";const Oe=rt=>rt?new Date(rt).toLocaleDateString("en-US",{timeZone:"Asia/Kolkata",month:"short",day:"numeric",year:"numeric"}):null;return Ee.status&&(Be=Ee.status,Ee.status.toLowerCase()==="completed"&&(Te+=" status-completed")),Ee.startDate&&Ee.endDate?Ce=`${Oe(Ee.startDate)}  ${Oe(Ee.endDate)}`:Ee.startDate?Ce=`Start: ${Oe(Ee.startDate)}`:Ee.endDate?Ce=`End: ${Oe(Ee.endDate)}`:Ee.createdAt?Ce=`Created: ${Oe(Ee.createdAt)}`:Ce="No date available",{text:Be?`${Be}  ${Ce}`:Ce,class:Te}};return(Ee,Ce)=>{const Be=I("v-alert"),Te=I("v-progress-circular"),Oe=I("v-col"),Me=I("v-row"),rt=I("v-icon"),ut=I("v-breadcrumbs-item"),Ie=I("v-breadcrumbs"),Ue=I("v-card-title"),dt=I("v-btn"),Ft=I("v-tooltip"),it=I("v-card"),qe=I("v-tab"),yt=I("v-tabs"),mt=I("v-card-text"),xt=I("v-tabs-window-item"),an=I("v-tabs-window"),Cn=I("v-dialog"),oa=I("v-snackbar");return R(),Ae(Ke,null,[w.value?(R(),ve(Be,{key:0,type:"error",dismissible:"","onClick:close":Ce[0]||(Ce[0]=Vt=>w.value=null),class:"ma-3"},{default:u(()=>[O(K(w.value),1)]),_:1})):ye("",!0),b.value?(R(),ve(Me,{key:1,"no-gutters":"",class:"pa-3",style:{height:"100%"}},{default:u(()=>[l(Oe,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[h("div",F4e,[l(Te,{indeterminate:"",color:"primary",size:"64"}),Ce[8]||(Ce[8]=h("div",{class:"mt-4 text-subtitle-1"},"Loading patient details...",-1))])]),_:1})]),_:1})):w.value?ye("",!0):(R(),Ae(Ke,{key:2},[l(Me,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[l(Oe,{cols:"12"},{default:u(()=>[l(it,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center"},{default:u(()=>[h("div",P4e,[l(Me,{"no-gutters":"",class:"align-center"},{default:u(()=>[l(Oe,{cols:"2",class:"d-flex justify-start"},{default:u(()=>[l(Ie,{density:"default",class:"pa-0 breadcrumb-enhanced"},{default:u(()=>[(R(!0),Ae(Ke,null,Gt(T.value,(Vt,kt)=>(R(),ve(ut,{key:kt,to:Vt.to,disabled:Vt.disabled,class:"text-subtitle-2 font-weight-medium breadcrumb-item-enhanced"},{default:u(()=>[Vt.icon?(R(),ve(rt,{key:0,start:Vt.iconPosition!=="end",end:Vt.iconPosition==="end",size:"default",color:"primary",class:ct(Vt.iconClass)},{default:u(()=>[O(K(Vt.icon),1)]),_:2},1032,["start","end","class"])):ye("",!0),O(" "+K(Vt.text),1)]),_:2},1032,["to","disabled"]))),128))]),_:1})]),_:1}),l(Oe,{cols:"10",class:"d-flex justify-center"},{default:u(()=>[h("div",D4e,[l(Ue,{class:"pb-2 pr-2"},{default:u(()=>[h("span",U4e,K((d.value?.name||"Unknown Patient").length>40?(d.value?.name||"Unknown Patient").slice(0,40)+"":d.value?.name||"Unknown Patient"),1),h("span",R4e," ID: "+K(d.value?.id||"N/A")+"  "+K(d.value?.gender||"Unknown")+K(d.value?.age?`, ${d.value.age} yrs`:"")+K(d.value?.importID?`  Import ID: ${d.value.importID}`:""),1)]),_:1}),d.value?.note&&d.value.note.trim()!==""?(R(),Ae("div",N4e,[h("span",V4e,K(d.value.note),1)])):(R(),Ae("div",L4e,[...Ce[9]||(Ce[9]=[h("span",{class:"text-caption text-medium-emphasis font-style-italic"},"no special note",-1)])])),l(En,{permission:"patients.edit"},{default:u(()=>[l(Ft,{text:"Edit Patient Details"},{activator:u(({props:Vt})=>[l(dt,Pe({color:"primary",variant:"text",size:"small"},Vt,{onClick:Ce[1]||(Ce[1]=kt=>F.value=!0),icon:"",tabindex:"-1",class:"ml-2"}),{default:u(()=>[l(rt,null,{default:u(()=>[...Ce[10]||(Ce[10]=[h("img",{src:pv},null,-1)])]),_:1})]),_:1},16)]),_:1})]),_:1})])]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1}),l(Me,{"no-gutters":"","aria-label":"main row",class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[l(Oe,{cols:"3",order:"1","aria-label":"list column",class:"pr-1 stable-height-column"},{default:u(()=>[h("div",M4e,[l(it,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex flex-column"},{default:u(()=>[h("div",O4e,[l(yt,{modelValue:D.value,"onUpdate:modelValue":Ce[2]||(Ce[2]=Vt=>D.value=Vt),density:"compact",class:"mb-2"},{default:u(()=>[x.value?(R(),Ae(Ke,{key:0},[Qe(r)("home.queue.patient").value||Qe(r)("patients.details").value?(R(),ve(qe,{key:0,value:"procedures",tabindex:"-1"},{default:u(()=>[...Ce[11]||(Ce[11]=[O(" Procedure ",-1)])]),_:1})):ye("",!0),Qe(r)("home.queue.patient").value||Qe(r)("patients.details").value?(R(),ve(qe,{key:1,value:"consultations",tabindex:"-1"},{default:u(()=>[...Ce[12]||(Ce[12]=[O(" Consultation ",-1)])]),_:1})):ye("",!0)],64)):(R(),Ae(Ke,{key:1},[Qe(r)("home.queue.patient").value||Qe(r)("patients.details").value?(R(),ve(qe,{key:0,value:"consultations",tabindex:"-1"},{default:u(()=>[...Ce[13]||(Ce[13]=[O(" Consultation ",-1)])]),_:1})):ye("",!0),Qe(r)("home.queue.patient").value||Qe(r)("patients.details").value?(R(),ve(qe,{key:1,value:"procedures",tabindex:"-1"},{default:u(()=>[...Ce[14]||(Ce[14]=[O(" Procedure ",-1)])]),_:1})):ye("",!0)],64))]),_:1},8,["modelValue"])]),l(an,{modelValue:D.value,"onUpdate:modelValue":Ce[3]||(Ce[3]=Vt=>D.value=Vt),class:"flex-grow-1"},{default:u(()=>[l(En,{anyPermission:"['home.queue.patient', 'patients.details']"},{default:u(()=>[l(xt,{value:"consultations",class:"h-100"},{default:u(()=>[l(Me,{"no-gutters":"",class:"h-100"},{default:u(()=>[l(Oe,{cols:"12",class:"mt-1 h-100"},{default:u(()=>[h("div",H4e,[l(En,{permission:"consultations.create"},{default:u(()=>[P.value?ye("",!0):(R(),ve(it,{key:0,color:"surfaceContainerHigh",density:"compact",class:"ma-2",rounded:"lg"},{default:u(()=>[l(mt,{class:"pa-3"},{default:u(()=>[l(dt,{color:"primary",variant:"flat",block:"",onClick:te,disabled:!d.value?.id||!g.value},{default:u(()=>[...Ce[15]||(Ce[15]=[O(" Create New Consultation ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1}))]),_:1}),Q.value?(R(!0),Ae(Ke,{key:0},Gt(o.value,Vt=>(R(),Ae(Ke,{key:Vt.id},[Vt?.consultationDate&&q(Vt)?(R(),ve(it,{key:0,style:Ut([{textAlign:"left"},{cursor:"pointer"}]),class:ct([{"card-status-selected":i.value?.id===Vt.id,"card-status-default":i.value?.id!==Vt.id},"mx-2 mt-1 mb-2 card-enhanced card-hover-base"]),density:"compact",rounded:"lg",onClick:kt=>W(Vt)},{default:u(()=>[l(Me,{"no-gutters":""},{default:u(()=>[l(Oe,{cols:"12"},{default:u(()=>[l(Ue,{class:"pb-0 pt-2"},{default:u(()=>[h("div",$4e,K(Vt?.diagnosis||"No diagnosis"),1)]),_:2},1024),l(Me,{"no-gutters":""},{default:u(()=>[l(Oe,{cols:"12"},{default:u(()=>[l(mt,{class:"pa-0 pb-2 pl-4"},{default:u(()=>[Ce[16]||(Ce[16]=h("span",{class:"text-caption text-medium-emphasis font-weight-bold"},"Rx: ",-1)),Vt?.medicines&&Vt.medicines.length>0?(R(!0),Ae(Ke,{key:0},Gt(Vt.medicines,kt=>(R(),Ae(Ke,{key:kt?.id||kt},[O(K(kt?.productName||"Unknown medicine")+" ",1),Vt.medicines&&Vt.medicines.length>1&&Vt.medicines.indexOf(kt)!==Vt.medicines.length-1?(R(),Ae("span",Q4e,", ")):ye("",!0)],64))),128)):(R(),Ae("span",G4e,"No medicines prescribed"))]),_:2},1024)]),_:2},1024),Vt?.investigations&&Vt.investigations.trim()!==""?(R(),ve(Oe,{key:0,cols:"12"},{default:u(()=>[l(mt,{class:"pa-0 pb-2 pl-4"},{default:u(()=>[Ce[17]||(Ce[17]=h("span",{class:"text-caption text-medium-emphasis font-weight-bold"},"Investigations: ",-1)),O(K(Vt.investigations),1)]),_:2},1024)]),_:2},1024)):ye("",!0),l(Oe,{cols:"12",class:"d-flex align-center justify-space-between action-row-highlight pa-3 ma-0"},{default:u(()=>[l(mt,{class:"pa-0"},{default:u(()=>[h("span",{class:ct(le(Vt.consultationDate).class)},K(le(Vt.consultationDate).text),3)]),_:2},1024),h("div",z4e,[l(Ft,{text:Z(Vt.consultationDate)||re(Vt.consultationDate)?"Cannot copy from today's or future consultations":"Copy to Most Recent"},{activator:u(({props:kt})=>[l(dt,Pe({onClick:vn(at=>ae(Vt),["stop"]),variant:"plain"},{ref_for:!0},kt,{size:"small",color:"primary",disabled:i.value?.id===Vt.id||Z(Vt.consultationDate)||re(Vt.consultationDate),class:"btn-hover-base mr-1"}),{default:u(()=>[l(rt,{size:"medium"},{default:u(()=>[...Ce[18]||(Ce[18]=[h("img",{src:dSe},null,-1)])]),_:1})]),_:1},16,["onClick","disabled"])]),_:2},1032,["text"]),l(En,{permission:"consultations.delete"},{default:u(()=>[l(Ft,{text:Z(Vt.consultationDate)?"Cannot delete today's consultation":"Delete Consultation"},{activator:u(({props:kt})=>[l(dt,Pe({color:"secondary",variant:"plain",size:"small"},{ref_for:!0},kt,{onClick:vn(at=>L(Vt),["stop"]),disabled:Z(Vt.consultationDate),class:"btn-hover-base"}),{default:u(()=>[l(rt,{size:"medium"},{default:u(()=>[...Ce[19]||(Ce[19]=[h("img",{src:Id},null,-1)])]),_:1})]),_:1},16,["onClick","disabled"])]),_:2},1032,["text"])]),_:2},1024)])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class","onClick"])):ye("",!0)],64))),128)):(R(),Ae("div",K4e,[l(rt,{size:"48",color:"primary",class:"mb-2"},{default:u(()=>[...Ce[20]||(Ce[20]=[h("img",{src:FE},null,-1)])]),_:1}),Ce[21]||(Ce[21]=h("p",{class:"text-subtitle-2 text-medium-emphasis"},"No consultations yet",-1)),Ce[22]||(Ce[22]=h("p",{class:"text-caption text-medium-emphasis"},"Create a consultation to get started",-1))]))])]),_:1})]),_:1})]),_:1})]),_:1}),l(En,{anyPermission:"['home.queue.patient', 'patients.details']"},{default:u(()=>[l(xt,{value:"procedures",class:"h-100"},{default:u(()=>[l(Me,{"no-gutters":"",class:"h-100"},{default:u(()=>[l(Oe,{cols:"12",class:"mt-1 h-100"},{default:u(()=>[h("div",W4e,[l(En,{permission:"treatmentplans.create"},{default:u(()=>[l(it,{color:"surfaceContainerHigh",density:"compact",class:"ma-2",rounded:"lg"},{default:u(()=>[l(mt,{class:"pa-3"},{default:u(()=>[l(dt,{color:"primary",variant:"flat",block:"",onClick:j,disabled:!d.value?.id||!g.value},{default:u(()=>[...Ce[23]||(Ce[23]=[O(" Create Treatment Plan ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),C.value?(R(),ve(Me,{key:0,"no-gutters":""},{default:u(()=>[l(Oe,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100px"}},{default:u(()=>[l(Te,{indeterminate:"",color:"primary"})]),_:1})]),_:1})):k.value&&k.value.length>0?(R(!0),Ae(Ke,{key:1},Gt(k.value,Vt=>(R(),ve(it,{key:Vt.id,style:Ut([{textAlign:"left"},{cursor:"pointer"}]),class:ct([{"card-status-selected":S.value?.id===Vt.id&&E.value,"card-status-default":!(S.value?.id===Vt.id&&E.value)},"ma-2 card-enhanced card-hover-base"]),density:"compact",rounded:"lg",onClick:kt=>ce(Vt)},{default:u(()=>[l(Me,{"no-gutters":""},{default:u(()=>[l(Oe,{cols:"12"},{default:u(()=>[l(Ue,{class:"pb-0 pt-2"},{default:u(()=>[h("div",j4e,K(Vt?.treatmentPlanName||"Unnamed Treatment Plan"),1)]),_:2},1024),l(Me,{"no-gutters":""},{default:u(()=>[l(Oe,{cols:"12"},{default:u(()=>[l(mt,{class:"pa-0 pb-2 pl-4"},{default:u(()=>[h("p",q4e,K(Vt?.notes||"No notes"),1)]),_:2},1024)]),_:2},1024),l(Oe,{cols:"12",class:"d-flex align-center justify-space-between action-row-highlight pa-3 ma-0"},{default:u(()=>[l(mt,{class:"pa-0"},{default:u(()=>[h("span",{class:ct(be(Vt).class),style:{"min-height":"18px",display:"inline-block"}},K(be(Vt).text),3)]),_:2},1024),h("div",Y4e,[l(En,{permission:"treatmentplans.delete"},{default:u(()=>[l(Ft,{text:"Delete Treatment Plan"},{activator:u(({props:kt})=>[l(dt,Pe({color:"secondary",variant:"plain",size:"small"},{ref_for:!0},kt,{onClick:vn(at=>Re(Vt),["stop"]),class:"btn-hover-base"}),{default:u(()=>[l(rt,{size:"medium"},{default:u(()=>[...Ce[24]||(Ce[24]=[h("img",{src:Id},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024)])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128)):(R(),Ae("div",X4e,[l(rt,{size:"48",color:"primary",class:"mb-2"},{default:u(()=>[...Ce[25]||(Ce[25]=[h("img",{src:FE},null,-1)])]),_:1}),Ce[26]||(Ce[26]=h("p",{class:"text-subtitle-2 text-medium-emphasis"},"No treatment plans yet",-1)),Ce[27]||(Ce[27]=h("p",{class:"text-caption text-medium-emphasis"},"Create a treatment plan to get started",-1))]))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(Cn,{modelValue:U.value,"onUpdate:modelValue":Ce[4]||(Ce[4]=Vt=>U.value=Vt),"max-width":"30%",persistent:""},{default:u(()=>[l(I4e,{deleteConsult:y.value,onClose:H},null,8,["deleteConsult"])]),_:1},8,["modelValue"]),l(Cn,{modelValue:F.value,"onUpdate:modelValue":Ce[5]||(Ce[5]=Vt=>F.value=Vt),"max-width":"50%",persistent:""},{default:u(()=>[l(T4e,{patient:d.value,onClose:ue},null,8,["patient"])]),_:1},8,["modelValue"])]),_:1})])]),_:1}),l(Oe,{cols:"9",order:"2",class:"pl-1 stable-height-column","aria-label":"consultation column"},{default:u(()=>[h("div",J4e,[l(it,{color:"surfaceContainer",flat:"",style:{height:"100%"}},{default:u(()=>[D.value==="procedures"?(R(),ve(S4e,{treatmentPlan:S.value,patient:d.value,key:S.value?.id||"new","onUpdate:treatmentPlan":de,onCreateNewTreatmentPlan:_e},null,8,["treatmentPlan","patient"])):(R(),ve(n$,{consultation:i.value,patient:d.value,key:i.value.id,consultationCopy:A.value,"onUpdate:consultation":ee,onCreateNewArtefact:te},null,8,["consultation","patient","consultationCopy"]))]),_:1})])]),_:1})]),_:1}),l(oa,{modelValue:f.value,"onUpdate:modelValue":Ce[6]||(Ce[6]=Vt=>f.value=Vt),class:"elevation-24",color:"success"},{default:u(()=>[O(K(m.value),1)]),_:1},8,["modelValue"]),l(oa,{modelValue:v.value,"onUpdate:modelValue":Ce[7]||(Ce[7]=Vt=>v.value=Vt),class:"elevation-24",color:"failure"},{default:u(()=>[O(K(p.value),1)]),_:1},8,["modelValue"])],64))],64)}}},eIe=qt(Z4e,[["__scopeId","data-v-58e071ae"]]),tIe={__name:"edit-doctor",props:{doctor:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=t,a=V(Nw),r=e,s=V(Qn.clone(r.doctor)),o=V(!1),i=()=>{n("close")},c=async A=>{console.log("Updating doctor details",A);const d={...A,email:A.email||"",isGST:A.isGST||!1,gstIdentifier:A.gstIdentifier||"",isPharmacy:A.isPharmacy||!1},f=await dce(d);f.error?console.error("Error updating doctor details",f.error):console.error("Doctor detail update successful"),i()};return(A,d)=>{const f=I("v-card-title"),m=I("v-col"),v=I("v-icon"),p=I("v-btn"),g=I("v-row"),y=I("v-card"),w=I("v-switch"),b=I("v-card-subtitle"),x=I("v-divider"),T=I("v-text-field"),D=I("v-combobox"),k=I("v-form");return R(),ve(y,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(g,{"no-gutters":""},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(y,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(g,{"no-gutters":""},{default:u(()=>[l(m,{cols:"11"},{default:u(()=>[l(f,{class:"pa-0 pl-2"},{default:u(()=>[...d[10]||(d[10]=[O("Update Doctor Details",-1)])]),_:1})]),_:1}),l(m,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(p,{icon:"",size:"x-small",onClick:i},{default:u(()=>[l(v,null,{default:u(()=>[...d[11]||(d[11]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(g,{"no-gutters":""},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(y,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(k,{modelValue:o.value,"onUpdate:modelValue":d[9]||(d[9]=S=>o.value=S),"validate-on":"blur"},{default:u(()=>[l(g,{"no-gutters":"",class:"mb-3 pl-3"},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(w,{modelValue:s.value.procedurePrimary,"onUpdate:modelValue":d[0]||(d[0]=S=>s.value.procedurePrimary=S),label:"Procedure-Primary Practice",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"]),l(b,{class:"pa-0 text-caption text-medium-emphasis"},{default:u(()=>[...d[12]||(d[12]=[O(" Enable this for procedure-centric practices. ",-1)])]),_:1})]),_:1})]),_:1}),l(x,{class:"mb-3"}),l(g,{"no-gutters":""},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(T,{label:"Doctor Name (Dr.) *",density:"compact",modelValue:s.value.doctorName,"onUpdate:modelValue":d[1]||(d[1]=S=>s.value.doctorName=S),clearable:"",rules:Qe(fr)},null,8,["modelValue","rules"])]),_:1}),l(m,{cols:"12"},{default:u(()=>[l(D,{label:"Specialization *",density:"compact",items:a.value,rules:Qe(fr),clearable:"",modelValue:s.value.doctorSpecialization,"onUpdate:modelValue":d[2]||(d[2]=S=>s.value.doctorSpecialization=S)},null,8,["items","rules","modelValue"])]),_:1}),l(m,{cols:"12"},{default:u(()=>[l(T,{label:"Doctor Email (optional)",density:"compact",clearable:"",rules:Qe(wg),modelValue:s.value.email,"onUpdate:modelValue":d[3]||(d[3]=S=>s.value.email=S)},null,8,["rules","modelValue"])]),_:1}),l(m,{cols:"12"},{default:u(()=>[l(T,{label:"Review Link (optional)",density:"compact",clearable:"",modelValue:s.value.doctorReviewLink,"onUpdate:modelValue":d[4]||(d[4]=S=>s.value.doctorReviewLink=S)},null,8,["modelValue"])]),_:1})]),_:1}),l(x,{class:"my-3"}),l(g,{"no-gutters":"",class:"mb-3 pl-3"},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(w,{modelValue:s.value.isGST,"onUpdate:modelValue":d[5]||(d[5]=S=>s.value.isGST=S),label:"GST Registered Practice",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"]),l(b,{class:"pa-0 text-caption text-medium-emphasis"},{default:u(()=>[...d[13]||(d[13]=[O(" Enable if your practice is registered for GST. ",-1)])]),_:1})]),_:1})]),_:1}),s.value.isGST?(R(),ve(g,{key:0,"no-gutters":"",class:"mb-3"},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(T,{label:"GST Registration Number (optional)",density:"compact",modelValue:s.value.gstIdentifier,"onUpdate:modelValue":d[6]||(d[6]=S=>s.value.gstIdentifier=S),clearable:"",placeholder:"e.g., 27AAAAA0000A1Z5"},null,8,["modelValue"])]),_:1})]),_:1})):ye("",!0),l(x,{class:"my-3"}),l(g,{"no-gutters":"",class:"mb-3 pl-3"},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(w,{modelValue:s.value.isPharmacy,"onUpdate:modelValue":d[7]||(d[7]=S=>s.value.isPharmacy=S),label:"Pharmacy Practice",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"]),l(b,{class:"pa-0 text-caption text-medium-emphasis"},{default:u(()=>[...d[14]||(d[14]=[O(" Enable this for pharmacy practices. ",-1)])]),_:1})]),_:1})]),_:1}),l(x),l(g,{"no-gutters":""},{default:u(()=>[l(m,{cols:"2"}),l(m,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(p,{variant:"outlined",onClick:d[8]||(d[8]=S=>c(s.value)),disabled:!o.value},{default:u(()=>[...d[15]||(d[15]=[O("Update",-1)])]),_:1},8,["disabled"])]),_:1}),l(m,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},nIe={__name:"edit-clinic",props:{clinic:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=t,a=e,r=V(Qn.clone(a.clinic)),s=V(!1),o=()=>{n("close")},i=async c=>{console.log("Updating clinic details",c);const A=await mce(c);A.error?console.error("Error updating clinic details",A.error):console.error("Clinic detail update successful"),o()};return(c,A)=>{const d=I("v-card-title"),f=I("v-col"),m=I("v-icon"),v=I("v-btn"),p=I("v-row"),g=I("v-card"),y=I("v-text-field"),w=I("v-select"),b=I("v-divider"),x=I("v-form");return R(),ve(g,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(p,{"no-gutters":""},{default:u(()=>[l(f,{cols:"12"},{default:u(()=>[l(g,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(p,{"no-gutters":""},{default:u(()=>[l(f,{cols:"11"},{default:u(()=>[l(d,{class:"pa-0 pl-2"},{default:u(()=>[...A[5]||(A[5]=[O("Update Clinic Details",-1)])]),_:1})]),_:1}),l(f,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(v,{icon:"",size:"x-small",onClick:o},{default:u(()=>[l(m,null,{default:u(()=>[...A[6]||(A[6]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(p,{"no-gutters":""},{default:u(()=>[l(f,{cols:"12"},{default:u(()=>[l(g,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(x,{modelValue:s.value,"onUpdate:modelValue":A[4]||(A[4]=T=>s.value=T),"validate-on":"blur"},{default:u(()=>[l(p,{"no-gutters":""},{default:u(()=>[l(f,{cols:"12"},{default:u(()=>[l(y,{label:"Clinic Name *",density:"compact",modelValue:r.value.clinicName,"onUpdate:modelValue":A[0]||(A[0]=T=>r.value.clinicName=T),clearable:"",rules:Qe(fr)},null,8,["modelValue","rules"])]),_:1}),l(f,{cols:"12"},{default:u(()=>[l(w,{label:"State/UT *",density:"compact",modelValue:r.value.clinicAddress,"onUpdate:modelValue":A[1]||(A[1]=T=>r.value.clinicAddress=T),items:Qe(gT),rules:Qe(fr),clearable:""},null,8,["modelValue","items","rules"])]),_:1}),l(f,{cols:"12"},{default:u(()=>[l(y,{label:"Contact Number *",density:"compact",clearable:"",modelValue:r.value.contactNumber,"onUpdate:modelValue":A[2]||(A[2]=T=>r.value.contactNumber=T),rules:Qe(Ah)},null,8,["modelValue","rules"])]),_:1})]),_:1}),l(b),l(p,{"no-gutters":""},{default:u(()=>[l(f,{cols:"2"}),l(f,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(v,{variant:"outlined",onClick:A[3]||(A[3]=T=>i(r.value)),disabled:!s.value},{default:u(()=>[...A[7]||(A[7]=[O("Update",-1)])]),_:1},8,["disabled"])]),_:1}),l(f,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},aIe={__name:"create-clinic",emits:["close"],setup(e,{emit:t}){const n=t,a=V({clinicName:"",clinicAddress:"",contactNumber:""}),r=V(!1),s=()=>{n("close")},o=async i=>{console.log("Create clinic",i);const c=await fce(i);c.error?console.error("Error creating clinic",c.error):console.error("Clinic create successful"),s()};return(i,c)=>{const A=I("v-card-title"),d=I("v-col"),f=I("v-icon"),m=I("v-btn"),v=I("v-row"),p=I("v-card"),g=I("v-text-field"),y=I("v-select"),w=I("v-divider"),b=I("v-form");return R(),ve(p,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(v,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(p,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(v,{"no-gutters":""},{default:u(()=>[l(d,{cols:"11"},{default:u(()=>[l(A,{class:"pa-0 pl-2"},{default:u(()=>[...c[5]||(c[5]=[O("Create New Clinic",-1)])]),_:1})]),_:1}),l(d,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(m,{icon:"",size:"x-small",onClick:s},{default:u(()=>[l(f,null,{default:u(()=>[...c[6]||(c[6]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(v,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(p,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(b,{modelValue:r.value,"onUpdate:modelValue":c[4]||(c[4]=x=>r.value=x),"validate-on":"blur"},{default:u(()=>[l(v,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(g,{label:"Clinic Name *",density:"compact",modelValue:a.value.clinicName,"onUpdate:modelValue":c[0]||(c[0]=x=>a.value.clinicName=x),clearable:"",rules:Qe(fr)},null,8,["modelValue","rules"])]),_:1}),l(d,{cols:"12"},{default:u(()=>[l(y,{label:"State/UT *",density:"compact",modelValue:a.value.clinicAddress,"onUpdate:modelValue":c[1]||(c[1]=x=>a.value.clinicAddress=x),items:Qe(gT),rules:Qe(fr),clearable:""},null,8,["modelValue","items","rules"])]),_:1}),l(d,{cols:"12"},{default:u(()=>[l(g,{label:"Contact Number *",density:"compact",clearable:"",modelValue:a.value.contactNumber,"onUpdate:modelValue":c[2]||(c[2]=x=>a.value.contactNumber=x),rules:Qe(Ah)},null,8,["modelValue","rules"])]),_:1})]),_:1}),l(w),l(v,{"no-gutters":""},{default:u(()=>[l(d,{cols:"2"}),l(d,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(m,{variant:"outlined",onClick:c[3]||(c[3]=x=>o(a.value)),disabled:!r.value},{default:u(()=>[...c[7]||(c[7]=[O("Create",-1)])]),_:1},8,["disabled"])]),_:1}),l(d,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},rIe={__name:"create-doctor",emits:["close"],setup(e,{emit:t}){const n=t,a=V(Nw),r=V({doctorName:"",doctorSpecialization:"",email:"",doctorReviewLink:"",procedurePrimary:!1,isGST:!1,gstIdentifier:"",isPharmacy:!1}),s=V(!1),o=()=>{n("close")},i=async c=>{console.log("Create doctor details",c);const A=await cce(c);A.error?console.error("Error creating doctor",A.error):console.error("Doctor created successfully"),o()};return(c,A)=>{const d=I("v-card-title"),f=I("v-col"),m=I("v-icon"),v=I("v-btn"),p=I("v-row"),g=I("v-card"),y=I("v-switch"),w=I("v-card-subtitle"),b=I("v-divider"),x=I("v-text-field"),T=I("v-combobox"),D=I("v-form");return R(),ve(g,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(p,{"no-gutters":""},{default:u(()=>[l(f,{cols:"12"},{default:u(()=>[l(g,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(p,{"no-gutters":""},{default:u(()=>[l(f,{cols:"11"},{default:u(()=>[l(d,{class:"pa-0 pl-2"},{default:u(()=>[...A[10]||(A[10]=[O("Create New Doctor",-1)])]),_:1})]),_:1}),l(f,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(v,{icon:"",size:"x-small",onClick:o},{default:u(()=>[l(m,null,{default:u(()=>[...A[11]||(A[11]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(p,{"no-gutters":""},{default:u(()=>[l(f,{cols:"12"},{default:u(()=>[l(g,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(D,{modelValue:s.value,"onUpdate:modelValue":A[9]||(A[9]=k=>s.value=k),"validate-on":"blur"},{default:u(()=>[l(p,{"no-gutters":"",class:"mb-3 pl-3"},{default:u(()=>[l(f,{cols:"12"},{default:u(()=>[l(y,{modelValue:r.value.procedurePrimary,"onUpdate:modelValue":A[0]||(A[0]=k=>r.value.procedurePrimary=k),label:"Procedure-Primary Practice",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"]),l(w,{class:"pa-0 text-caption text-medium-emphasis"},{default:u(()=>[...A[12]||(A[12]=[O(" Enable this for procedure-centric practices. ",-1)])]),_:1})]),_:1})]),_:1}),l(b,{class:"mb-3"}),l(p,{"no-gutters":""},{default:u(()=>[l(f,{cols:"12"},{default:u(()=>[l(x,{label:"Doctor Name (Dr.) *",density:"compact",modelValue:r.value.doctorName,"onUpdate:modelValue":A[1]||(A[1]=k=>r.value.doctorName=k),clearable:"",rules:Qe(fr)},null,8,["modelValue","rules"])]),_:1}),l(f,{cols:"12"},{default:u(()=>[l(T,{label:"Specialization *",density:"compact",items:a.value,rules:Qe(fr),clearable:"",modelValue:r.value.doctorSpecialization,"onUpdate:modelValue":A[2]||(A[2]=k=>r.value.doctorSpecialization=k)},null,8,["items","rules","modelValue"])]),_:1}),l(f,{cols:"12"},{default:u(()=>[l(x,{label:"Doctor Email (optional)",density:"compact",clearable:"",rules:Qe(wg),modelValue:r.value.email,"onUpdate:modelValue":A[3]||(A[3]=k=>r.value.email=k)},null,8,["rules","modelValue"])]),_:1}),l(f,{cols:"12"},{default:u(()=>[l(x,{label:"Review Link (optional)",density:"compact",clearable:"",modelValue:r.value.doctorReviewLink,"onUpdate:modelValue":A[4]||(A[4]=k=>r.value.doctorReviewLink=k)},null,8,["modelValue"])]),_:1})]),_:1}),l(b,{class:"my-3"}),l(p,{"no-gutters":"",class:"mb-3 pl-3"},{default:u(()=>[l(f,{cols:"12"},{default:u(()=>[l(y,{modelValue:r.value.isGST,"onUpdate:modelValue":A[5]||(A[5]=k=>r.value.isGST=k),label:"GST Registered Practice",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"]),l(w,{class:"pa-0 text-caption text-medium-emphasis"},{default:u(()=>[...A[13]||(A[13]=[O(" Enable if your practice is registered for GST. ",-1)])]),_:1})]),_:1})]),_:1}),r.value.isGST?(R(),ve(p,{key:0,"no-gutters":"",class:"mb-3"},{default:u(()=>[l(f,{cols:"12"},{default:u(()=>[l(x,{label:"GST Registration Number (optional)",density:"compact",modelValue:r.value.gstIdentifier,"onUpdate:modelValue":A[6]||(A[6]=k=>r.value.gstIdentifier=k),clearable:"",placeholder:"e.g., 27AAAAA0000A1Z5"},null,8,["modelValue"])]),_:1})]),_:1})):ye("",!0),l(b,{class:"my-3"}),l(p,{"no-gutters":"",class:"mb-3 pl-3"},{default:u(()=>[l(f,{cols:"12"},{default:u(()=>[l(y,{modelValue:r.value.isPharmacy,"onUpdate:modelValue":A[7]||(A[7]=k=>r.value.isPharmacy=k),label:"Pharmacy Practice",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"]),l(w,{class:"pa-0 text-caption text-medium-emphasis"},{default:u(()=>[...A[14]||(A[14]=[O(" Enable this for pharmacy practices. ",-1)])]),_:1})]),_:1})]),_:1}),l(b),l(p,{"no-gutters":""},{default:u(()=>[l(f,{cols:"2"}),l(f,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(v,{variant:"outlined",onClick:A[8]||(A[8]=k=>i(r.value)),disabled:!s.value},{default:u(()=>[...A[15]||(A[15]=[O("Create",-1)])]),_:1},8,["disabled"])]),_:1}),l(f,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},sIe={class:"permissions-section"},oIe={class:"d-flex align-center justify-space-between mb-4"},iIe={key:0,class:"text-center py-8"},lIe={key:1,class:"features-container"},uIe={class:"d-flex align-center justify-space-between w-100 pr-4"},cIe={class:"d-flex align-center flex-grow-1"},dIe={class:"flex-grow-1"},AIe={class:"text-body-1 font-weight-medium d-flex align-center"},fIe={class:"text-caption text-medium-emphasis mt-1"},mIe={class:"text-caption text-medium-emphasis mb-3 d-flex align-center"},vIe={class:"action-card-content"},hIe={class:"action-card-text"},pIe={class:"text-body-2 font-weight-medium action-title"},gIe={class:"action-description-wrapper"},yIe={class:"text-caption text-medium-emphasis action-description"},_Ie={__name:"permission-assignment",props:{user:{type:Object,required:!0,default:()=>({permissions:[],selectedFeatures:[],role:null})},availableFeatures:{type:Array,required:!0,default:()=>[]}},emits:["update:user"],setup(e,{emit:t}){const n=e,a=t,r=V(""),s=V([]),o=V([]),i=V(null),c=ne(()=>o.value.map(D=>({value:D.id,name:D.name,description:D.description,...D}))),A=async()=>{try{const D=await At.get("/admin/users/roles");D.data&&D.data.success&&(o.value=D.data.roles||[])}catch(D){console.error("Failed to load roles:",D)}},d=D=>{if(f.value=!0,i.value=D,!D){g({role:null}),f.value=!1;return}const k=o.value.find(F=>F.id===D);if(!k){f.value=!1;return}const S=k.defaultFeatures||[],E=k.defaultPermissions||[],C=S.includes("home")?[...S]:["home",...S],U=[...E];g({role:D,selectedFeatures:C,permissions:U}),setTimeout(()=>{f.value=!1},100)},f=V(!1),m=()=>{if(!n.user)return;const D=n.user.permissions||[],k=n.user.selectedFeatures||[];let S=!1;const E={};k.includes("home")||(E.selectedFeatures=[...k,"home"],S=!0),D.includes("home")||(E.permissions=[...D,"home"],S=!0),S&&g(E)};dn(()=>{A(),n.user.role&&(i.value=n.user.role),m()}),je(()=>[n.user?.permissions,n.user?.selectedFeatures],()=>{const D=n.user?.permissions||[],k=n.user?.selectedFeatures||[];(!D.includes("home")||!k.includes("home"))&&m()},{immediate:!0}),je(()=>n.user.role,D=>{f.value||D!==i.value&&(i.value=D||null)});const v=D=>D&&D.actions&&Array.isArray(D.actions)&&D.actions.length>0,p=(D,k)=>{if(!v(D)){k.stopPropagation(),k.preventDefault();const S=s.value.indexOf(D.id);S>-1&&s.value.splice(S,1)}},g=D=>{a("update:user",{...n.user,...D})},y=ne(()=>{if(!r.value||r.value.trim()==="")return n.availableFeatures||[];const D=r.value.toLowerCase().trim();return(n.availableFeatures||[]).filter(k=>{if(!k)return!1;const S=(k.name||"").toLowerCase().includes(D),E=(k.description||"").toLowerCase().includes(D),C=(k.id||"").toLowerCase().includes(D),U=k.actions&&Array.isArray(k.actions)&&k.actions.some(F=>{const L=(F.description||"").toLowerCase(),H=(F.id||"").toLowerCase(),ue=(F.action||"").toLowerCase();return L.includes(D)||H.includes(D)||ue.includes(D)});return S||E||C||U})}),w=D=>!n.user||!n.user.permissions||!Array.isArray(n.user.permissions)?!1:n.user.permissions.includes(D),b=D=>{if(!n.user||!n.user.permissions||!Array.isArray(n.user.permissions))return 0;const k=n.availableFeatures.find(E=>E&&E.id===D);if(!k||!k.actions||!Array.isArray(k.actions))return 0;const S=k.actions.filter(E=>E&&E.id).map(E=>E.id);return n.user.permissions.filter(E=>S.includes(E)).length},x=(D,k)=>{if(!n.user||D==="home"&&!k)return;const S=n.user.permissions||[],E=n.user.selectedFeatures||[],C=n.availableFeatures.find(H=>H&&H.id===D);if(!C)return;const U=C.actions&&Array.isArray(C.actions)?C.actions.filter(H=>H&&H.id).map(H=>H.id):[];let F=[...S],L=[...E];k?(L.includes(D)||L.push(D),F.includes(D)||F.push(D),U.forEach(H=>{F.includes(H)||F.push(H)}),F=[...new Set(F)]):(L=L.filter(H=>H!==D),F=F.filter(H=>!(H===D||U.includes(H)||H&&typeof H=="string"&&H.startsWith(`${D}.`)))),L.includes("home")||L.push("home"),F.includes("home")||F.push("home"),g({permissions:F,selectedFeatures:L})},T=(D,k)=>{if(!n.user)return;let E=[...n.user.permissions||[]];k?E.includes(D)||E.push(D):E=E.filter(C=>C!==D),g({permissions:E})};return(D,k)=>{const S=I("v-chip"),E=I("v-list-item-subtitle"),C=I("v-list-item"),U=I("v-select"),F=I("v-text-field"),L=I("v-progress-circular"),H=I("v-checkbox"),ue=I("v-expansion-panel-title"),ie=I("v-icon"),Q=I("v-card"),X=I("v-col"),le=I("v-row"),Z=I("v-expansion-panel-text"),re=I("v-expansion-panel"),q=I("v-expansion-panels");return R(),Ae("div",sIe,[h("div",oIe,[k[5]||(k[5]=h("div",null,[h("h3",{class:"text-h6 mb-1"},"Assign Permissions"),h("p",{class:"text-caption text-medium-emphasis mb-0"}," Select features and specific actions the user can perform ")],-1)),e.user.selectedFeatures&&e.user.selectedFeatures.length>0?(R(),ve(S,{key:0,color:"primary",size:"small",variant:"flat",class:"font-weight-medium"},{default:u(()=>[O(K(e.user.selectedFeatures.length)+" selected ",1)]),_:1})):ye("",!0)]),l(U,{modelValue:i.value,"onUpdate:modelValue":[k[0]||(k[0]=P=>i.value=P),d],items:c.value,"item-value":"value","item-title":"name",label:"Select Role",variant:"outlined",density:"comfortable",clearable:"","hide-details":"",class:"mb-4",color:"primary"},{item:u(({props:P,item:G})=>[l(C,Yl(Jl(P)),{default:u(()=>[l(E,null,{default:u(()=>[O(K(G.raw.description),1)]),_:2},1024)]),_:2},1040)]),selection:u(({item:P})=>[O(K(P.raw.name),1)]),_:1},8,["modelValue","items"]),l(F,{modelValue:r.value,"onUpdate:modelValue":k[1]||(k[1]=P=>r.value=P),"prepend-inner-icon":"mdi-magnify",label:"Search features or actions...",variant:"outlined",density:"comfortable",clearable:"","hide-details":"",class:"mb-4",color:"primary"},null,8,["modelValue"]),!e.availableFeatures||e.availableFeatures.length===0?(R(),Ae("div",iIe,[l(L,{indeterminate:"",color:"primary",size:"32"}),k[6]||(k[6]=h("p",{class:"text-body-2 text-medium-emphasis mt-4"},"Loading permissions...",-1))])):(R(),Ae("div",lIe,[l(q,{modelValue:s.value,"onUpdate:modelValue":k[4]||(k[4]=P=>s.value=P),variant:"accordion",multiple:"",class:"feature-panels"},{default:u(()=>[(R(!0),Ae(Ke,null,Gt(y.value,P=>(R(),ve(re,{key:P?.id||P,value:P.id,class:"feature-panel"},{default:u(()=>[l(ue,{class:"feature-panel-title","hide-actions":!v(P),onClick:G=>p(P,G)},{default:u(()=>[h("div",uIe,[h("div",cIe,[P&&P.id?(R(),ve(H,{key:0,"model-value":e.user.selectedFeatures&&Array.isArray(e.user.selectedFeatures)&&e.user.selectedFeatures.includes(P.id),disabled:P.id==="home",onClick:k[2]||(k[2]=vn(()=>{},["stop"])),"onUpdate:modelValue":G=>x(P.id,G),density:"comfortable","hide-details":"",color:"primary",class:"mr-3"},null,8,["model-value","disabled","onUpdate:modelValue"])):ye("",!0),h("div",dIe,[h("div",AIe,[O(K(P.name||P.id)+" ",1),b(P.id)>0?(R(),ve(S,{key:0,size:"x-small",color:"primary",variant:"flat",class:"ml-2"},{default:u(()=>[O(K(b(P.id))+"/"+K(P.actions?.length||0),1)]),_:2},1024)):ye("",!0)]),h("div",fIe,K(P.description||"No description available"),1)])])])]),_:2},1032,["hide-actions","onClick"]),v(P)?(R(),ve(Z,{key:0,class:"feature-panel-content"},{default:u(()=>[h("div",null,[h("div",mIe,[l(ie,{size:"small",class:"mr-1"},{default:u(()=>[...k[7]||(k[7]=[O("mdi-check-circle-outline",-1)])]),_:1}),k[8]||(k[8]=O(" Select specific actions for this feature ",-1))]),l(le,{dense:"",class:"actions-grid"},{default:u(()=>[(R(!0),Ae(Ke,null,Gt(P.actions,G=>(R(),Ae(Ke,{key:G?.id||`action-${G?.action}`},[G&&G.id?(R(),ve(X,{key:0,cols:"12",sm:"6",md:"4"},{default:u(()=>[l(Q,{class:ct(["action-card",{"action-card-selected":w(G.id)}]),onClick:J=>T(G.id,!w(G.id)),elevation:"0"},{default:u(()=>[h("div",vIe,[l(H,{"model-value":w(G.id),onClick:k[3]||(k[3]=vn(()=>{},["stop"])),"onUpdate:modelValue":J=>T(G.id,J),density:"compact","hide-details":"",color:"primary",class:"action-checkbox",size:"small"},null,8,["model-value","onUpdate:modelValue"]),h("div",hIe,[h("div",pIe,K(G.action?G.action.charAt(0).toUpperCase()+G.action.slice(1):G.id?G.id.split(".").pop():"Action"),1)])]),h("div",gIe,[h("div",yIe,K(G.description||G.id||"No description"),1)])]),_:2},1032,["class","onClick"])]),_:2},1024)):ye("",!0)],64))),128))]),_:2},1024)])]),_:2},1024)):ye("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]))])}}},yR=qt(_Ie,[["__scopeId","data-v-92772965"]]),wIe=async(e,t,n)=>{try{if(!e)throw new Error("Doctor ID is required");if(!t||t.length!==3||!/^[A-Z]{3}$/.test(t))throw new Error("Prefix must be exactly 3 uppercase letters (A-Z)");if(!n||n.length!==6||!/^\d{6}$/.test(n))throw new Error("Seed suffix must be exactly 6 digits");const r=new Date().toISOString().split("T")[0],s={identifier:`${t}${n}`,status:"SERIES",paymentReceiptDate:r,doctorId:e,isThreeC:!1,additionalDiscount:0};return console.log("Creating receipt series with seed:",s),{data:(await At.post("/paymentreceipt/",s)).data.data,error:null}}catch(a){return console.error("Error creating receipt series:",a),{data:null,error:a}}},bIe=async(e,t,n)=>{try{if(!e)throw new Error("Doctor ID is required");if(!t||t.length!==3||!/^[A-Z]{3}$/.test(t))throw new Error("Prefix must be exactly 3 uppercase letters (A-Z)");if(!n||n.length!==6||!/^\d{6}$/.test(n))throw new Error("Seed suffix must be exactly 6 digits");const r=new Date().toISOString().split("T")[0],s={identifier:`${t}${n}`,status:"SERIES",billDate:r,doctorId:e,additionalDiscount:0};return console.log("Creating bill series with seed:",s),{data:(await At.post("/billreceipt/series",s)).data.data,error:null}}catch(a){return console.error("Error creating bill series:",a),{data:null,error:a}}},xIe={class:"text-center"},CIe={class:"scroll-hover",style:{"overflow-y":"auto",height:"100%"}},SIe={key:0,class:"ma-2 mb-3"},EIe={key:1,class:"ma-2 mt-4"},BIe={key:2,class:"ma-2 mt-4"},kIe={class:"text-subtitle-2 ml-2"},TIe={class:"scroll-hover",style:{"overflow-y":"auto","max-height":"75vh"}},IIe={key:0,class:"mb-3"},FIe={key:1},PIe={class:"scroll-hover",style:{"overflow-y":"auto","max-height":"75vh"}},DIe={key:0,class:"text-caption text-medium-emphasis"},UIe={key:1,class:"text-caption text-medium-emphasis"},RIe={class:"d-flex align-center justify-center fill-height"},NIe={class:"d-flex align-center justify-center fill-height"},VIe={class:"d-flex align-center justify-space-between"},LIe={class:"flex-grow-1"},MIe={class:"d-flex align-center"},OIe=["href"],HIe={key:1,class:"text-body-2 text-disabled"},$Ie={class:"d-flex align-center"},QIe=["href"],GIe={key:1,class:"text-body-2 text-disabled"},zIe={class:"d-flex align-center"},KIe={class:"text-body-2"},WIe={class:"d-flex flex-wrap mt-3"},jIe={class:"text-subtitle-2 ml-2"},qIe={class:"scroll-hover",style:{"overflow-y":"auto","max-height":"75vh"}},YIe={class:"text-subtitle-2 ml-2"},XIe={class:"scroll-hover",style:{"overflow-y":"auto","max-height":"75vh"}},JIe={class:"text-subtitle-2 ml-2"},ZIe={class:"scroll-hover",style:{"overflow-y":"auto","max-height":"75vh"}},eFe={class:"scroll-hover",style:{"overflow-y":"auto","max-height":"75vh"}},tFe={class:"scroll-hover pa-3",style:{"overflow-y":"auto","max-height":"75vh"}},nFe={class:"d-flex align-center"},aFe={class:"text-white"},rFe={class:"text-left"},sFe={class:"text-subtitle-2 font-weight-bold text-left"},oFe={class:"text-caption text-grey text-left"},iFe={class:"text-caption text-left"},lFe={key:0,class:"text-grey"},uFe={class:"user-actions-container"},cFe={class:"dialog-title"},dFe={class:"text-center pa-4"},AFe={class:"mb-4"},fFe={class:"mb-4"},mFe={class:"mb-4"},vFe={class:"text-body-1 font-weight-bold mb-2"},hFe={__name:"admin-page",setup(e){const t=ra(),{isAdmin:n,hasPermission:a}=ch(),r=V(!0),s=V(null),o=ne(()=>n.value),i=ne(()=>{const $e=a("admin.vitals").value,pe=a("admin.setup.prescription").value||a("admin.setup.receipt").value||a("admin.setup.bill").value||a("admin.setup.doctor").value||a("admin.setup.clinic").value||a("admin.setup.remote").value||a("admin.setup.pharmacy").value;return $e||pe}),c=ne(()=>n.value),A=()=>a("admin.vitals").value?"vitalsconfig":n.value?"rxprintdetails":"vitalsconfig",d=V("vitalsconfig"),f=V(!1),m=V(""),v=V(!1),p=V(""),g=V(""),y=V(""),w=V(29200),b=V(!1),x=V(""),T=V(""),D=V(""),k=V(null),S=V(!1),E=V(),C=V(),U=ne(()=>t.state.doctorModule.doctorId),F=V({pulse:!0,bloodPressure:!0,temperature:!0,respiratoryRate:!0,height:!1,serumBilirubin:!1,bloodGlucoseFF:!1,bloodGlucosePP:!1,bloodGlucoseRandom:!1,serumCreatinine:!1}),L=V(!1),H=V({prefix:"",suffix:""}),ue=V(!1),ie=V(!1),Q=V({prefix:"",suffix:""}),X=V(!1),le=V(!1),Z=V({pharmacyName:"",addressAndContactInfo:"",gstNumber:"",otherRegistrationInfo:"",useHeader:!0,pageSize:"A4"}),re=V(!1),q=V(!1),P=V([]),G=V(!1),J=V([]);je(J,$e=>{Array.isArray($e)||(J.value=[])},{deep:!0});const M=V(!1),te=V(!1),Y=V(!1),W=V(null),ee=V(null),ae=V({name:"",email:"",passcode:"",doctorId:null,role:null,permissions:["home"],selectedFeatures:["home"]}),oe=V(!1),j=V(!1),ce=V(!1),de=V(null),_e=V({id:null,name:"",email:"",doctorId:null,role:null,permissions:[],selectedFeatures:[]}),Re=V(!1),be=V(!1),Ee=V(!1),Ce=V(null),Be=V(""),Te=V(!1),Oe=V(!1),Me=V(!1),rt=V(!1),ut=V(null),Ie=V(""),Ue=V(!1),dt=V(null),Ft=V(!1),it=V(null),qe=V(""),yt=V(!1),mt=V([]);je(mt,$e=>{Array.isArray($e)||(mt.value=[])},{deep:!0});const xt=[$e=>!!$e||"Prefix is required",$e=>$e&&$e.length===3||"Prefix must be exactly 3 characters",$e=>$e&&/^[A-Z]{3}$/.test($e)||"Prefix must be 3 uppercase letters (A-Z)"],an=[$e=>!!$e||"First receipt number is required",$e=>$e&&$e.length===6||"First receipt number must be exactly 6 digits",$e=>$e&&/^\d{6}$/.test($e)||"First receipt number must be 6 digits (000001-999999)",$e=>$e&&parseInt($e)>=1&&parseInt($e)<=999999||"First receipt number must be between 000001 and 999999"],Cn=[$e=>!!$e||"Prefix is required",$e=>$e&&$e.length===3||"Prefix must be exactly 3 characters",$e=>$e&&/^[A-Z]{3}$/.test($e)||"Prefix must be 3 uppercase letters (A-Z)"],oa=[$e=>!!$e||"First bill number is required",$e=>$e&&$e.length===6||"First bill number must be exactly 6 digits",$e=>$e&&/^\d{6}$/.test($e)||"First bill number must be 6 digits (000001-999999)",$e=>$e&&parseInt($e)>=1&&parseInt($e)<=999999||"First bill number must be between 000001 and 999999"],Vt=ne(()=>t.getters["doctorModule/currentDoctor"]?.doctorName||null),kt=ne(()=>t.getters["doctorModule/isGSTRegistered"]);ne(()=>y.value?`https://${y.value}:${w.value}`:"");const at=($e,pe="An error occurred")=>{console.error(pe,$e),v.value=!0,p.value=`${pe}: ${$e?.response?.data?.message||$e.message||"Unknown error"}`;const jt=$e?.response?.status===401||$e?.response?.status===403;($e?.response?.status>=500||!$e?.response)&&!jt&&(s.value=`${pe}. Please try again or contact support.`)},bt=$e=>{f.value=!0,m.value=$e},en=async $e=>{try{await navigator.clipboard.writeText($e);let pe="Text copied to clipboard";$e.includes("http")?pe="URL copied to clipboard":$e.includes(":")?pe="Server address copied to clipboard":$e.match(/^\d+\.\d+\.\d+\.\d+$/)&&(pe="IP address copied to clipboard"),bt(pe)}catch(pe){console.error("Failed to copy to clipboard:",pe),v.value=!0,p.value="Failed to copy to clipboard"}},Ye=()=>{try{if(!T.value||typeof T.value!="string")return console.warn("Invalid ngrok QR path value:",T.value),"";let pe=`file:///${T.value.replace(/\\/g,"/")}`;return k.value&&(pe+=`?t=${k.value}`),pe}catch($e){return console.error("Error processing ngrok QR URL:",$e),""}},We=V(!1),_t=V(!1),Rt=[{title:"A4",value:"A4"},{title:"Letter",value:"Letter"},{title:"Legal",value:"Legal"}],zt=V(!1),Pt=$e=>{try{if(!$e||typeof $e!="object")throw new Error("Invalid doctor data provided");E.value=$e,zt.value=!0}catch(pe){at(pe,"Failed to open doctor edit dialog")}},Wt=async()=>{try{zt.value=!1,window.dispatchEvent(new Event("doctor-list-updated")),await et()}catch($e){at($e,"Failed to refresh doctor details")}},Lt=V(!1),ia=async()=>{try{Lt.value=!1,window.dispatchEvent(new Event("doctor-list-updated")),await et()}catch($e){at($e,"Failed to refresh doctor details after creation")}},Ln=V(!1),zn=$e=>{try{if(!$e||typeof $e!="object")throw new Error("Invalid clinic data provided");C.value=$e,Ln.value=!0}catch(pe){at(pe,"Failed to open clinic edit dialog")}},Yt=async()=>{try{Ln.value=!1,window.dispatchEvent(new Event("clinic-list-updated")),await wt()}catch($e){at($e,"Failed to refresh clinic details")}},Bn=V(!1),ke=async()=>{try{Bn.value=!1,window.dispatchEvent(new Event("clinic-list-updated")),await wt()}catch($e){at($e,"Failed to refresh clinic details after creation")}};dn(()=>{try{console.log("Admin page mounted successfully")}catch($e){at($e,"Failed to mount admin page")}}),Xl(async()=>{try{r.value=!0,console.log("AdminPage component is about to be mounted.");const $e=A();$e&&(d.value=$e);const pe=[ge(),et(),wt(),He()];(await Promise.allSettled(pe)).forEach((nn,Tt)=>{nn.status==="rejected"&&console.error(`Promise ${Tt} failed:`,nn.reason)}),It()}catch($e){at($e,"Failed to initialize admin page")}finally{r.value=!1}}),je(U,async($e,pe)=>{try{$e&&$e!==pe&&(console.log(`Doctor ID changed from ${pe} to ${$e}, refetching configurations...`),await ge($e),It())}catch(jt){at(jt,"Failed to fetch configurations for new doctor")}},{immediate:!1}),je(d,async $e=>{$e==="usermanagement"&&(await Promise.all([Sn(),Pa()]),mt.value.length||await Er())},{immediate:!1}),je(d,async $e=>{$e==="mobiledetails"&&!g.value&&!y.value&&await ze(),$e==="pharmacyconfig"&&(Z.value.pharmacyName||await He())},{immediate:!1}),je(kt,$e=>{if(!$e&&d.value==="billconfig"){const pe=A();pe&&(d.value=pe),bt("GST Bill Series Configuration is only available for GST-registered doctors")}},{immediate:!0}),je([n,()=>a("admin.vitals").value],()=>{if(!(()=>{switch(d.value){case"vitalsconfig":return a("admin.vitals").value;case"rxprintdetails":case"mobiledetails":case"doctordetails":case"clinicdetails":case"receiptconfig":case"billconfig":case"pharmacyconfig":case"usermanagement":return n.value;default:return!0}})()){const pe=A();pe&&(d.value=pe)}},{immediate:!0}),va(()=>{try{r.value=!1,s.value=null,Fe.value={doctorName:"",doctorDegrees:"",doctorRegistrationNumber:"",clinicAddress:"-",email:"",doctorId:null,useHeader:!0,pageSize:"A4",headerImagePath:""},Ge.value="",Le.value=null,Z.value={pharmacyName:"",addressAndContactInfo:"",gstNumber:"",otherRegistrationInfo:"",useHeader:!0,pageSize:"A4"},nt.value=[],st.value=[],console.log("Admin page cleanup completed")}catch($e){console.error("Error during admin page cleanup:",$e)}});const ze=async()=>{try{b.value=!0;const $e=await qAe();if(!$e.success||!$e.data)throw new Error($e.error||"Invalid response received from server");const pe=$e.data;g.value=pe.path||"",y.value=pe.ipAddress||"",w.value=pe.port||29200,x.value=pe.ngrokTunnelUrl||"",T.value=pe.ngrokQrPath||"",D.value=pe.ngrokEndpointUrl||"",console.log("QR Code data fetched - IP:",y.value,"Port:",w.value,"Path:",g.value),console.log("Ngrok data fetched - Tunnel:",x.value,"QR Path:",T.value,"Endpoint:",D.value),D.value?console.log(" Ngrok endpoint URL is available:",D.value):console.log(" Ngrok endpoint URL is NOT available"),T.value?console.log(" Ngrok QR path is available:",T.value):console.log(" Ngrok QR path is NOT available")}catch($e){if($e?.response?.status===401||$e?.response?.status===403){console.log("Authentication required for mobile connection details"),g.value="",y.value="",w.value=29200,x.value="",T.value="",D.value="";return}at($e,"Failed to fetch mobile connection details"),g.value="",y.value="",w.value=29200,x.value="",T.value="",D.value=""}finally{b.value=!1}},Fe=V({doctorName:"",doctorDegrees:"",doctorRegistrationNumber:"",clinicAddress:"-",email:"",doctorId:null,useHeader:!0,useFooter:!0,pageSize:"A4",headerSize:1.8,headerImagePath:""}),Le=V(null),Ge=V(""),he=V(!1),se=V(!1);je(oe,$e=>{$e||(Re.value=!1)}),je(Le,async($e,pe)=>{if($e&&$e instanceof File&&$e!==pe&&!he.value){const jt=new FileReader;jt.onload=nn=>{Ge.value=nn.target.result},jt.readAsDataURL($e),console.log("File selected via watcher, auto-uploading:",$e.name);try{await iA()}catch(nn){console.error("Auto-upload failed:",nn)}}else!$e&&pe&&(Ge.value="")});const ge=async($e=null)=>{try{const pe=$e||U.value;if(!pe)throw new Error("Doctor ID is required to fetch print configurations");console.log(`Fetching print configurations for doctor ID: ${pe}`);const jt=await hh(pe);if(jt.error)throw jt.error;if(!jt.data){console.log("No existing configuration found, initializing with defaults for new user"),Fe.value={doctorName:"",doctorDegrees:"",doctorRegistrationNumber:"",clinicAddress:"-",email:"",doctorId:pe,useHeader:!0,useFooter:!0,pageSize:"A4",headerSize:1.8,headerImagePath:""},Ge.value="",bt("Please setup your print preferences.");return}const nn=jt.data;Fe.value={doctorName:nn.doctorName||"",doctorDegrees:nn.doctorDegrees||"",doctorRegistrationNumber:nn.doctorRegistrationNumber||"",clinicAddress:nn.clinicAddress||"",email:nn.email||"",doctorId:pe,useHeader:nn.useHeader!==void 0?nn.useHeader:!0,useFooter:nn.useFooter!==void 0?nn.useFooter:!0,pageSize:nn.pageSize||"A4",headerSize:nn.headerSize!==void 0&&nn.headerSize!==null?nn.headerSize:1.8,headerImagePath:nn.headerImagePath||""},nn.headerImagePath?yd(pe,nn.headerImagePath).then(Tt=>{Ge.value=Tt}).catch(Tt=>{console.error("Failed to get header image URL:",Tt),Ge.value=""}):Ge.value="",console.log("Configuration data fetched:",Fe.value)}catch(pe){if(pe?.response?.status===404){console.log("Print configuration not found - this is normal for new users");const nn=$e||U.value;Fe.value={doctorName:"",doctorDegrees:"",doctorRegistrationNumber:"",clinicAddress:"-",email:"",doctorId:nn,useHeader:!0,useFooter:!0,pageSize:"A4",headerImagePath:""},Ge.value="",bt("Please setup your print preferences.");return}at(pe,"Failed to fetch print configurations");const jt=$e||U.value;Fe.value={doctorName:"",doctorDegrees:"",doctorRegistrationNumber:"",clinicAddress:"-",email:"",doctorId:jt,useHeader:!0,useFooter:!0,pageSize:"A4",headerImagePath:""},Ge.value=""}},xe=async()=>{if(!_t.value)try{if(_t.value=!0,!We.value)throw new Error("Please fix validation errors before saving");const $e=t.state.doctorModule.doctorId;if(!$e)throw new Error("Doctor ID is required to save configurations");if(!Fe.value.doctorName?.trim())throw new Error("Doctor name is required");const pe={doctorName:Fe.value.doctorName,doctorDegrees:Fe.value.doctorDegrees,doctorRegistrationNumber:Fe.value.doctorRegistrationNumber,clinicAddress:Fe.value.clinicAddress,email:Fe.value.email,useHeader:Fe.value.useHeader,useFooter:Fe.value.useFooter,pageSize:Fe.value.pageSize,headerSize:Fe.value.headerSize!==void 0&&Fe.value.headerSize!==null?Fe.value.headerSize:1.8,headerImagePath:Fe.value.headerImagePath||"",doctorId:$e};console.log("Saving print configs with data:",pe),await Bo(At.post(`/print/${$e}`,pe)),bt("Print configurations saved successfully")}catch($e){at($e,"Failed to save print configurations")}finally{_t.value=!1}},He=async()=>{try{console.log("Fetching pharmacy configurations...");const $e=await NH();if($e.error)throw $e.error;if(!$e.data){console.log("No existing pharmacy configuration found, initializing with defaults"),Z.value={pharmacyName:"Add pharmacy details here",addressAndContactInfo:"",gstNumber:"Add GST number here",otherRegistrationInfo:"",useHeader:!0,pageSize:"A4"};return}const pe=$e.data,nn=(pe.header||"Add pharmacy details here").split(`
`),Tt=nn[0]||"Add pharmacy details here",fn=nn[1]||"",$n=(pe.gstNumber||"Add GST number here").split(`
`),gn=$n[0]||"Add GST number here",Ur=$n[1]||"";Z.value={pharmacyName:Tt,addressAndContactInfo:fn,gstNumber:gn,otherRegistrationInfo:Ur,useHeader:pe.useHeader!==void 0?pe.useHeader===1||pe.useHeader===!0:!0,pageSize:pe.pageSize||"A4"},console.log("Pharmacy configuration data fetched:",Z.value)}catch($e){if($e?.response?.status===404){console.log("Pharmacy configuration not found - this is normal for new installations"),Z.value={pharmacyName:"Add pharmacy details here",addressAndContactInfo:"",gstNumber:"Add GST number here",otherRegistrationInfo:"",useHeader:!0,pageSize:"A4"};return}at($e,"Failed to fetch pharmacy configurations"),Z.value={pharmacyName:"Add pharmacy details here",addressAndContactInfo:"",gstNumber:"Add GST number here",otherRegistrationInfo:"",useHeader:!0,pageSize:"A4"}}},tt=async()=>{if(!q.value)try{if(q.value=!0,!re.value)throw new Error("Please fix validation errors before saving");if(!Z.value.pharmacyName?.trim())throw new Error("Pharmacy name is required");const $e=Z.value.pharmacyName.trim()+(Z.value.addressAndContactInfo?.trim()?`
`+Z.value.addressAndContactInfo.trim():""),pe=Z.value.gstNumber.trim()+(Z.value.otherRegistrationInfo?.trim()?`
`+Z.value.otherRegistrationInfo.trim():""),jt={header:$e,gstNumber:pe||"",useHeader:Z.value.useHeader,pageSize:Z.value.pageSize||"A4"},nn=await cEe(jt);if(nn.error)throw nn.error;bt("Pharmacy configurations saved successfully")}catch($e){at($e,"Failed to save pharmacy configurations")}finally{q.value=!1}},nt=V([]),et=async()=>{try{const $e=await eE();if(!$e?.data){console.warn("No doctor data found in response"),nt.value=[];return}const pe=Array.isArray($e.data)?$e.data:[$e.data];nt.value=pe.filter(jt=>jt&&typeof jt=="object"&&jt.id),console.log("Doctor details fetched:",nt.value)}catch($e){at($e,"Failed to fetch doctor details"),nt.value=[]}},st=V([]),wt=async()=>{try{const $e=await fM();if(!$e?.data){console.warn("No clinic data found in response"),st.value=[];return}const pe=Array.isArray($e.data)?$e.data:[$e.data];st.value=pe.filter(jt=>jt&&typeof jt=="object"&&jt.id),console.log("Clinic details fetched:",st.value)}catch($e){at($e,"Failed to fetch clinic details"),st.value=[]}},It=()=>{try{const $e=U.value;if(!$e){console.warn("No doctor ID available to load vitals preferences");return}const pe=ST($e);F.value={pulse:pe.pulse,bloodPressure:pe.bloodPressure,temperature:pe.temperature,respiratoryRate:pe.respiratoryRate,height:pe.height,serumBilirubin:pe.serumBilirubin,bloodGlucoseFF:pe.bloodGlucoseFF,bloodGlucosePP:pe.bloodGlucosePP,bloodGlucoseRandom:pe.bloodGlucoseRandom,serumCreatinine:pe.serumCreatinine},console.log("Vitals preferences loaded:",F.value)}catch($e){at($e,"Failed to load vitals preferences")}},tn=async()=>{if(!L.value)try{L.value=!0;const $e=U.value;if(!$e)throw new Error("Doctor ID is required to save vitals preferences");const pe={...F.value,weight:!0};if(kEe($e,pe))bt("Vitals preferences saved successfully");else throw new Error("Failed to save preferences")}catch($e){at($e,"Failed to save vitals preferences")}finally{L.value=!1}},kn=async()=>{if(!ie.value)try{if(ie.value=!0,!ue.value)throw new Error("Please fix validation errors before creating series");const $e=U.value;if(!$e)throw new Error("Doctor ID is required to create receipt series");if(!H.value.prefix?.trim())throw new Error("Prefix is required");if(!H.value.suffix?.trim())throw new Error("First receipt number is required");const nn=(parseInt(H.value.suffix)-1).toString().padStart(6,"0");console.log("Creating receipt series with:",{doctorId:$e,prefix:H.value.prefix,suffix:nn,firstReceiptWillBe:H.value.suffix});const Tt=await wIe($e,H.value.prefix,nn);if(Tt.error)throw Tt.error;bt(`Receipt series created successfully. First receipt will be: ${H.value.prefix}${H.value.suffix}`),H.value={prefix:"",suffix:""},ue.value=!1}catch($e){at($e,"Failed to create receipt series")}finally{ie.value=!1}},hn=async()=>{if(!le.value)try{if(le.value=!0,!X.value)throw new Error("Please fix validation errors before creating bill series");const $e=U.value;if(!$e)throw new Error("Doctor ID is required to create bill series");if(!Q.value.prefix?.trim())throw new Error("Prefix is required");if(!Q.value.suffix?.trim())throw new Error("First bill number is required");const nn=(parseInt(Q.value.suffix)-1).toString().padStart(6,"0");console.log("Creating bill series with:",{doctorId:$e,prefix:Q.value.prefix,suffix:nn,firstBillWillBe:Q.value.suffix});const Tt=await bIe($e,Q.value.prefix,nn);if(Tt.error)throw Tt.error;bt(`Bill series created successfully. First bill will be: ${Q.value.prefix}${Q.value.suffix}`),Q.value={prefix:"",suffix:""},X.value=!1}catch($e){at($e,"Failed to create bill series")}finally{le.value=!1}},Sn=async()=>{G.value=!0;try{const $e=await At.get("/admin/users");P.value=$e.data.users||[]}catch($e){console.error("Failed to load users:",$e),P.value=[]}finally{G.value=!1}},Pa=async()=>{try{const pe=(await At.get("/admin/users/features")).data.features||[];console.log("Loaded features:",pe),pe.forEach(jt=>{console.log(`Feature ${jt.id} (${jt.name}):`,{hasActions:!!jt.actions,actionsType:Array.isArray(jt.actions)?"array":typeof jt.actions,actionsLength:Array.isArray(jt.actions)?jt.actions.length:0,actions:jt.actions})}),J.value=pe}catch($e){console.error("Failed to load features:",$e),J.value=[]}},Er=async()=>{try{const $e=await eE();mt.value=$e||[]}catch($e){console.error("Failed to load doctors:",$e),mt.value=[]}},Zr=$e=>$e?$e.split(" ").map(pe=>pe[0]).join("").toUpperCase().slice(0,2):"?",Ss=$e=>$e?$e.charAt(0).toUpperCase()+$e.slice(1):"",Wo=$e=>{if(!$e)return"";const pe=J.value.find(rn=>rn&&rn.id===$e);if(pe)return pe.name||$e;let jt=null,nn=$e;for(const rn of J.value)if(rn&&rn.id&&$e.startsWith(`${rn.id}.`)){jt=rn,nn=$e.substring(rn.id.length+1);break}if(!jt){const rn=$e.split(".");if(rn.length>=2){const $n=rn[0];jt=J.value.find(gn=>gn&&gn.id===$n),nn=rn.slice(1).join(".")}}const Tt=jt?jt.name||jt.id:$e.split(".")[0];let fn=nn;if(jt&&jt.actions){const rn=jt.actions.find($n=>$n&&$n.id===$e);if(rn)fn=rn.action?rn.action.charAt(0).toUpperCase()+rn.action.slice(1):nn;else{const $n=nn.split(".");fn=$n[$n.length-1].charAt(0).toUpperCase()+$n[$n.length-1].slice(1)}}else{const rn=nn.split(".");fn=rn[rn.length-1].charAt(0).toUpperCase()+rn[rn.length-1].slice(1)}return`${Tt}: ${fn}`},Za=async()=>{J.value.length||await Pa(),mt.value.length||await Er(),ae.value={name:"",email:"",passcode:"",doctorId:null,permissions:["home"],selectedFeatures:["home"]},ee.value=null,M.value=!0},jo=async()=>{if(console.log("[createUser] ========== FUNCTION CALLED =========="),console.log("[createUser] createUserLoading:",Y.value),console.log("[createUser] createUserValid:",te.value),console.log("[createUser] Form ref exists:",!!W.value),Y.value){console.log("[createUser] Already loading, returning early");return}if(W.value){const{valid:$e}=await W.value.validate();console.log("[createUser] Form validation result:",$e),$e||console.warn("[createUser] Form is not valid, but proceeding anyway for debugging")}console.log("[createUser] Setting loading to true"),Y.value=!0;try{console.log("[createUser] Starting user creation process"),console.log("[createUser] newUser.value:",ae.value);const $e=Dr(ae.value.permissions||[],ae.value.selectedFeatures||[],J.value);if(console.log("[createUser] Creating user with permissions:",{selectedFeatures:ae.value.selectedFeatures,permissions:$e,permissionsCount:$e.length}),console.log("[createUser] About to make API call to /admin/users"),console.log("[createUser] Request payload:",{name:ae.value.name,email:ae.value.email,passcode:ae.value.passcode,doctorId:ae.value.doctorId,role:ae.value.role,permissions:$e}),console.log("[createUser] apiClient:",At),console.log("[createUser] apiClient baseURL:",At.defaults?.baseURL),console.log("[createUser] apiClient defaults:",At.defaults),!At.defaults?.baseURL)throw console.error("[createUser] ERROR: API client baseURL is not set!"),new Error("API client is not initialized. Please refresh the page.");console.log("[createUser] Making POST request to:",`${At.defaults.baseURL}/admin/users`);const pe=await At.post("/admin/users",{name:ae.value.name,email:ae.value.email,passcode:ae.value.passcode,doctorId:ae.value.doctorId,role:ae.value.role,permissions:$e});console.log("[createUser] API call successful, response:",pe.data),pe.data.success&&(bt(`User "${ae.value.name}" created successfully`),M.value=!1,await Sn())}catch($e){console.error("[createUser] Error occurred:",$e),console.error("[createUser] Error details:",{message:$e.message,response:$e.response?.data,status:$e.response?.status,config:$e.config});const pe=$e.response?.data?.code,jt=$e.response?.data?.error||$e.message;pe==="PASSCODE_NOT_UNIQUE"||jt?.toLowerCase().includes("passcode")?ee.value="This passcode is already in use by another user. Please use a different unique passcode.":(ee.value=null,at($e,"Failed to create user"))}finally{console.log("[createUser] Finally block - setting loading to false"),Y.value=!1}},Es=async $e=>{try{if(J.value.length||await Pa(),mt.value.length||await Er(),!J.value||J.value.length===0){console.error("Features not loaded"),alert("Failed to load features. Please try again.");return}if(!$e||!$e.id){console.error("Invalid user data:",$e),alert("Invalid user data");return}const pe=[],jt=$e.permissions||[];for(const nn of J.value){if(!nn||!nn.id)continue;if((!nn.actions||nn.actions.length===0)&&jt.includes(nn.id)){pe.push(nn.id);continue}jt.some(fn=>!fn||typeof fn!="string"?!1:fn===nn.id||fn.startsWith(`${nn.id}.`))&&pe.push(nn.id)}jt.includes("home")||jt.push("home"),pe.includes("home")||pe.push("home"),_e.value={id:$e.id,name:$e.name||"",email:$e.email||"",doctorId:$e.doctorId||null,role:$e.role||null,isAdmin:$e.isAdmin===!0,permissions:Array.isArray(jt)?[...jt]:["home"],selectedFeatures:Array.isArray(pe)?[...pe]:["home"]},(!_e.value.permissions||!Array.isArray(_e.value.permissions))&&(_e.value.permissions=["home"]),(!_e.value.selectedFeatures||!Array.isArray(_e.value.selectedFeatures))&&(_e.value.selectedFeatures=["home"]),_e.value.permissions.includes("home")||_e.value.permissions.push("home"),_e.value.selectedFeatures.includes("home")||_e.value.selectedFeatures.push("home"),oe.value=!0}catch(pe){console.error("Error opening edit user dialog:",pe),alert("Error opening user editor. Please try again.")}},Nt=async()=>{if(!ce.value){ce.value=!0;try{const $e=_e.value.isAdmin===!0;if(await At.put(`/admin/users/${_e.value.id}`,{name:_e.value.name,email:_e.value.email,role:_e.value.role,isActive:!0,isAdmin:$e}),$e)bt("Admin user updated successfully");else{const pe=Dr(_e.value.permissions||[],_e.value.selectedFeatures||[],J.value);_e.value.permissions=pe,console.log("Saving permissions:",{selectedFeatures:_e.value.selectedFeatures,permissions:pe,permissionsCount:pe.length}),await At.put(`/admin/users/${_e.value.id}/permissions`,{permissions:pe}),bt("User updated successfully")}oe.value=!1,await Sn()}catch($e){at($e,"Failed to update user")}finally{ce.value=!1}}},Dr=($e,pe,jt)=>{if(!Array.isArray($e)||!Array.isArray(pe)||!Array.isArray(jt))return $e||[];const nn=new Set;pe.forEach(rn=>{const $n=jt.find(gn=>gn&&gn.id===rn);$n&&($n.actions&&Array.isArray($n.actions)&&$n.actions.forEach(gn=>{gn&&gn.id&&nn.add(gn.id)}),(!$n.actions||$n.actions.length===0)&&nn.add(rn))});const Tt=new Set;$e.forEach(rn=>{rn&&typeof rn=="string"&&pe.some(gn=>rn.startsWith(`${gn}.`)||rn===gn)&&Tt.add(rn)}),pe.forEach(rn=>{const $n=jt.find(gn=>gn&&gn.id===rn);$n&&((!$n.actions||$n.actions.length===0)&&Tt.add(rn),$e.includes(rn)&&Tt.add(rn))});const fn=Array.from(Tt);return console.log("Cleaned permissions:",{original:$e.length,cleaned:fn.length,added:Tt.size-$e.length,selectedFeatures:pe,validPermissionIds:Array.from(nn)}),fn},Mn=$e=>{Ce.value=$e,Be.value="",be.value=!0},Eo=async $e=>{ut.value=$e,Ie.value="",dt.value=null,Ue.value=!1,Me.value=!0,await Ys($e)},Ys=async $e=>{if(!rt.value){rt.value=!0,dt.value=null;try{const pe=await At.get(`/admin/users/${$e.id}/passcode`);pe.data.success&&pe.data.passcode?Ie.value=pe.data.passcode:(Ie.value="",dt.value=null)}catch(pe){pe.response?.status===404||pe.response?.status===400?(Ie.value="",dt.value=null):(dt.value=pe.response?.data?.error||"Failed to retrieve passcode",Ie.value="")}finally{rt.value=!1}}},Kc=async()=>{if(Ie.value)try{await navigator.clipboard.writeText(Ie.value),bt("Passcode copied to clipboard")}catch($e){console.error("Failed to copy passcode to clipboard:",$e),v.value=!0,p.value="Failed to copy passcode to clipboard"}},vt=async()=>{if(!Ee.value){Ee.value=!0;try{(await At.put(`/admin/users/${Ce.value.id}/passcode`,{passcode:Be.value})).data.success&&(bt(`Passcode reset for "${Ce.value.name}"`),be.value=!1,Be.value="",ya(Ce.value)&&setTimeout(()=>{window.location.reload()},1e3))}catch($e){at($e,"Failed to reset passcode")}finally{Ee.value=!1}}},pn=uh();W_(At);const In=ne(()=>pn.userId.value),ya=$e=>!$e||!$e.id?!1:$e.id===In.value,ju=$e=>{it.value=$e,qe.value="",Ft.value=!0},Ha=async()=>{if(!(yt.value||!it.value)){if(ya(it.value)){at(null,"Cannot delete your own account"),Ft.value=!1;return}if(qe.value!=="DELETE"){at(null,"Please type DELETE to confirm");return}yt.value=!0;try{(await At.delete(`/admin/users/${it.value.id}`)).data.success&&(bt(`User "${it.value.name}" deleted successfully`),Ft.value=!1,qe.value="",it.value=null,await Sn())}catch($e){$e.response?.status===400&&$e.response?.data?.error?.includes("own account")?at($e,"Cannot delete your own account"):at($e,"Failed to delete user")}finally{yt.value=!1}}},su=()=>{console.warn("Ngrok QR code image failed to load"),v.value=!0,p.value="Remote access QR code could not be loaded. Please refresh the page."},ll=async()=>{if(!S.value)try{S.value=!0,console.log(" Clearing existing ngrok data..."),x.value="",T.value="",D.value="",k.value=null,console.log(" Regenerating ngrok tunnel...");const $e=await YAe();if(!$e.success)throw new Error($e.error||"Failed to regenerate ngrok tunnel");const pe=$e.data;x.value=pe.ngrokTunnelUrl||"",T.value=pe.ngrokQrPath||"",D.value=pe.ngrokEndpointUrl||"",k.value=Date.now(),console.log(" Ngrok tunnel regenerated successfully"),console.log("New tunnel URL:",x.value),console.log("New QR path:",T.value),console.log("New endpoint URL:",D.value),bt("Remote access regenerated successfully. New QR code and URL are now available.")}catch($e){console.error("Failed to regenerate ngrok tunnel:",$e),at($e,"Failed to regenerate remote access")}finally{S.value=!1}},Bo=($e,pe=3e4)=>Promise.race([$e,new Promise((jt,nn)=>setTimeout(()=>nn(new Error("Request timeout")),pe))]),im=$e=>{console.log("File input changed")},iA=async()=>{if(Le.value&&!he.value)try{he.value=!0;const $e=U.value;if(!$e)throw new Error("Doctor ID is required to upload header image");let pe=Le.value;const jt=pe.size;if(pe.type.startsWith("image/")&&jt>100*1024)try{console.log(`Compressing header image: ${pe.name} (${(jt/1024/1024).toFixed(2)}MB)`),pe=await ns(pe,{maxSizeMB:2,maxWidthOrHeight:1200,useWebWorker:!0,fileType:"image/jpeg",initialQuality:.85});const $n=pe.size,gn=((1-$n/jt)*100).toFixed(1);console.log(`Header image compressed: ${($n/1024/1024).toFixed(2)}MB (${gn}% reduction)`)}catch(rn){console.warn("Image compression failed, using original file:",rn)}const nn=await uH($e,pe);if(nn.error)throw nn.error;let Tt=nn.data?.filename||nn.data?.data?.filename;if(!Tt){const rn=Le.value.name.split(".").pop()?.toLowerCase()||"jpg";Tt=`prescription_header_${$e}.${rn==="png"?"png":"jpg"}`,console.warn("No filename in upload response, using constructed:",Tt)}Fe.value.headerImagePath=Tt,console.log("Header image path updated to:",Tt);const fn={doctorName:Fe.value.doctorName||"",doctorDegrees:Fe.value.doctorDegrees||"",doctorRegistrationNumber:Fe.value.doctorRegistrationNumber||"",clinicAddress:Fe.value.clinicAddress||"",email:Fe.value.email||"",useHeader:Fe.value.useHeader!==void 0?Fe.value.useHeader:!0,useFooter:Fe.value.useFooter!==void 0?Fe.value.useFooter:!0,pageSize:Fe.value.pageSize||"A4",headerSize:Fe.value.headerSize!==void 0&&Fe.value.headerSize!==null?Fe.value.headerSize:1.8,headerImagePath:Tt,doctorId:$e};console.log("Auto-saving print configs with headerImagePath:",fn),await Bo(At.post(`/print/${$e}`,fn)),Tt&&yd($e,Tt).then(rn=>{Ge.value=rn}).catch(rn=>{console.error("Failed to get header image URL:",rn)}),Le.value=null,bt("Header image uploaded and saved successfully")}catch($e){at($e,"Failed to upload header image")}finally{he.value=!1}},Dh=async()=>{if(!se.value)try{se.value=!0;const $e=U.value;if(!$e)throw new Error("Doctor ID is required to delete header image");const pe=await cH($e);if(pe.error)throw pe.error;Fe.value.headerImagePath="",Ge.value="",Le.value=null,bt("Header image removed successfully")}catch($e){at($e,"Failed to remove header image")}finally{se.value=!1}};return($e,pe)=>{const jt=I("v-alert"),nn=I("v-progress-circular"),Tt=I("v-col"),fn=I("v-row"),rn=I("v-card-title"),$n=I("v-card-subtitle"),gn=I("v-card"),Ur=I("v-tooltip"),Ta=I("v-btn"),lA=I("v-switch"),ko=I("v-img"),Uh=I("v-file-input"),vr=I("v-text-field"),qu=I("v-textarea"),Yu=I("v-select"),ul=I("v-form"),na=I("v-tabs-window-item"),Wn=I("v-card-text"),Hr=I("v-icon"),uA=I("v-card-item"),ur=I("v-divider"),ou=I("v-chip"),di=I("v-dialog"),Xs=I("v-checkbox"),cA=I("v-avatar"),lm=I("v-tabs-window"),$a=I("v-spacer"),Di=I("v-card-actions"),es=I("v-snackbar"),dA=I("v-main");return R(),ve(dA,{class:"mt-5"},{default:u(()=>[s.value?(R(),ve(jt,{key:0,type:"error",dismissible:"","onClick:close":pe[0]||(pe[0]=Ze=>s.value=null),class:"ma-3"},{default:u(()=>[O(K(s.value),1)]),_:1})):ye("",!0),r.value?(R(),ve(fn,{key:1,"no-gutters":"",class:"pa-3",style:{height:"88%"}},{default:u(()=>[l(Tt,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[h("div",xIe,[l(nn,{indeterminate:"",color:"primary",size:"64"}),pe[90]||(pe[90]=h("div",{class:"mt-4 text-subtitle-1"},"Loading admin settings...",-1))])]),_:1})]),_:1})):s.value?ye("",!0):(R(),Ae(Ke,{key:2},[l(fn,{"aria-label":"main row",class:"pl-3 pr-3",style:{height:"100%"}},{default:u(()=>[l(Tt,{cols:"4",order:"1",class:"pr-1",style:{height:"92%"}},{default:u(()=>[l(gn,{color:"surfaceContainer",flat:"",style:{height:"100%"}},{default:u(()=>[h("div",CIe,[l(fn,{"no-gutters":""},{default:u(()=>[l(Tt,{cols:"12"},{default:u(()=>[o.value?(R(),Ae("div",SIe,[l(rn,{class:"text-body-2 pa-2 pb-1",style:{"font-weight":"500"}},{default:u(()=>[...pe[91]||(pe[91]=[O(" evamed Setup ",-1)])]),_:1}),l(En,{permission:"admin.setup.doctor"},{default:u(()=>[l(Ur,{text:"Doctor Setup Details"},{activator:u(({props:Ze})=>[l(gn,Pe({style:[{textAlign:"left"},{cursor:"pointer"}],class:["ma-1 mb-1 card-enhanced card-hover-base",{"card-status-selected":d.value==="doctordetails","card-status-default":d.value!=="doctordetails"}],onClick:pe[1]||(pe[1]=Yn=>d.value="doctordetails")},Ze),{default:u(()=>[l(rn,{class:"pb-0 pt-2"},{default:u(()=>[...pe[92]||(pe[92]=[h("div",{class:"text-body-2 font-weight-bold"},"Doctor Setup",-1)])]),_:1}),l($n,{class:"text-caption text-medium-emphasis pb-1 pt-0"},{default:u(()=>[...pe[93]||(pe[93]=[O("Name, Specialization ..",-1)])]),_:1})]),_:1},16,["class"])]),_:1})]),_:1}),l(En,{permission:"admin.setup.clinic"},{default:u(()=>[l(Ur,{text:"Clinic Setup Details"},{activator:u(({props:Ze})=>[l(gn,Pe({style:[{textAlign:"left"},{cursor:"pointer"}],class:["ma-1 mb-1 card-enhanced card-hover-base",{"card-status-selected":d.value==="clinicdetails","card-status-default":d.value!=="clinicdetails"}],onClick:pe[2]||(pe[2]=Yn=>d.value="clinicdetails")},Ze),{default:u(()=>[l(rn,{class:"pb-0 pt-2"},{default:u(()=>[...pe[94]||(pe[94]=[h("div",{class:"text-body-2 font-weight-bold"},"Clinic Setup",-1)])]),_:1}),l($n,{class:"text-caption text-medium-emphasis pb-1 pt-0"},{default:u(()=>[...pe[95]||(pe[95]=[O("Name, Address ..",-1)])]),_:1})]),_:1},16,["class"])]),_:1})]),_:1}),l(En,{permission:"admin.setup.remote"},{default:u(()=>[l(Ur,{text:"Remote Access"},{activator:u(({props:Ze})=>[l(gn,Pe({style:[{textAlign:"left"},{cursor:"pointer"}],class:["ma-1 mb-1 card-enhanced card-hover-base",{"card-status-selected":d.value==="mobiledetails","card-status-default":d.value!=="mobiledetails"}],onClick:pe[3]||(pe[3]=Yn=>d.value="mobiledetails")},Ze),{default:u(()=>[l(rn,{class:"pb-0 pt-2"},{default:u(()=>[...pe[96]||(pe[96]=[h("div",{class:"text-body-2 font-weight-bold"},"Remote Access",-1)])]),_:1}),l($n,{class:"text-caption text-medium-emphasis pb-1 pt-0"},{default:u(()=>[...pe[97]||(pe[97]=[O("Server address, QR Code ..",-1)])]),_:1})]),_:1},16,["class"])]),_:1})]),_:1}),l(En,{permission:"admin.setup.pharmacy"},{default:u(()=>[l(Ur,{text:"Pharmacy Print Configuration"},{activator:u(({props:Ze})=>[l(gn,Pe({style:[{textAlign:"left"},{cursor:"pointer"}],class:["ma-1 mb-1 card-enhanced card-hover-base",{"card-status-selected":d.value==="pharmacyconfig","card-status-default":d.value!=="pharmacyconfig"}],onClick:pe[4]||(pe[4]=Yn=>d.value="pharmacyconfig")},Ze),{default:u(()=>[l(rn,{class:"pb-0 pt-2"},{default:u(()=>[...pe[98]||(pe[98]=[h("div",{class:"text-body-2 font-weight-bold"},"Pharmacy Print Configuration",-1)])]),_:1}),l($n,{class:"text-caption text-medium-emphasis pb-1 pt-0"},{default:u(()=>[...pe[99]||(pe[99]=[O("Header, GST Number ..",-1)])]),_:1})]),_:1},16,["class"])]),_:1})]),_:1})])):ye("",!0),i.value?(R(),Ae("div",EIe,[l(rn,{class:"text-body-2 pa-2 pb-1",style:{"font-weight":"500"}},{default:u(()=>[...pe[100]||(pe[100]=[O(" Doctor Specific Setup ",-1)])]),_:1}),l(En,{permission:"admin.vitals"},{default:u(()=>[l(Ur,{text:"Configure Vitals Parameters"},{activator:u(({props:Ze})=>[l(gn,Pe({style:[{textAlign:"left"},{cursor:"pointer"}],class:["ma-1 mb-1 card-enhanced card-hover-base vitals-config-card",{"card-status-selected":d.value==="vitalsconfig","card-status-default":d.value!=="vitalsconfig"}],onClick:pe[5]||(pe[5]=Yn=>d.value="vitalsconfig")},Ze),{default:u(()=>[l(rn,{class:"pb-0 pt-2"},{default:u(()=>[...pe[101]||(pe[101]=[h("div",{class:"text-body-2 font-weight-bold"},"Vitals Configuration",-1)])]),_:1}),l($n,{class:"text-caption text-medium-emphasis pb-1 pt-0"},{default:u(()=>[...pe[102]||(pe[102]=[O("Select relevant parameters ..",-1)])]),_:1})]),_:1},16,["class"])]),_:1})]),_:1}),l(En,{permission:"admin.setup.prescription"},{default:u(()=>[l(Ur,{text:"Print Configuration Details"},{activator:u(({props:Ze})=>[l(gn,Pe({style:[{textAlign:"left"},{cursor:"pointer"}],class:["ma-1 mb-1 card-enhanced card-hover-base",{"card-status-selected":d.value==="rxprintdetails","card-status-default":d.value!=="rxprintdetails"}],onClick:pe[6]||(pe[6]=Yn=>d.value="rxprintdetails")},Ze),{default:u(()=>[l(rn,{class:"pb-0 pt-2"},{default:u(()=>[...pe[103]||(pe[103]=[h("div",{class:"text-body-2 font-weight-bold"},"Prescription Print Configuration",-1)])]),_:1}),l($n,{class:"text-caption text-medium-emphasis pb-1 pt-0"},{default:u(()=>[...pe[104]||(pe[104]=[O("Name, Registration number ..",-1)])]),_:1})]),_:1},16,["class"])]),_:1})]),_:1}),l(En,{permission:"admin.setup.receipt"},{default:u(()=>[l(Ur,{text:"Payment Receipt Configuration Details"},{activator:u(({props:Ze})=>[l(gn,Pe({style:[{textAlign:"left"},{cursor:"pointer"}],class:["ma-1 mb-1 card-enhanced card-hover-base",{"card-status-selected":d.value==="receiptconfig","card-status-default":d.value!=="receiptconfig"}],onClick:pe[7]||(pe[7]=Yn=>d.value="receiptconfig")},Ze),{default:u(()=>[l(rn,{class:"pb-0 pt-2"},{default:u(()=>[...pe[105]||(pe[105]=[h("div",{class:"text-body-2 font-weight-bold"},"Payment Receipt Configuration",-1)])]),_:1}),l($n,{class:"text-caption text-medium-emphasis pb-1 pt-0"},{default:u(()=>[...pe[106]||(pe[106]=[O("Setup receipt series prefix and suffix ..",-1)])]),_:1})]),_:1},16,["class"])]),_:1})]),_:1}),l(En,{permission:"admin.setup.bill"},{default:u(()=>[kt.value?(R(),ve(Ur,{key:0,text:kt.value?"GST Bill Series Configuration Details":"GST Bill Series Configuration (Only available for GST-registered doctors)"},{activator:u(({props:Ze})=>[l(gn,Pe({style:[{textAlign:"left"},{cursor:"pointer"}],class:["ma-1 mb-1 card-enhanced card-hover-base",{"card-status-selected":d.value==="billconfig","card-status-default":d.value!=="billconfig"}],onClick:pe[8]||(pe[8]=()=>{kt.value&&(d.value="billconfig")})},Ze),{default:u(()=>[l(rn,{class:"pb-0 pt-2"},{default:u(()=>[...pe[107]||(pe[107]=[h("div",{class:"text-body-2 font-weight-bold"},"GST Bill Series Configuration",-1)])]),_:1}),l($n,{class:"text-caption text-medium-emphasis pb-1 pt-0"},{default:u(()=>[...pe[108]||(pe[108]=[O("Setup GST bill series prefix and suffix ..",-1)])]),_:1})]),_:1},16,["class"])]),_:1},8,["text"])):ye("",!0)]),_:1})])):ye("",!0),c.value?(R(),Ae("div",BIe,[l(rn,{class:"text-body-2 pa-2 pb-1",style:{"font-weight":"500"}},{default:u(()=>[...pe[109]||(pe[109]=[O(" Access Control ",-1)])]),_:1}),l(En,{"require-admin":""},{default:u(()=>[l(Ur,{text:"Manage Users and Permissions"},{activator:u(({props:Ze})=>[l(gn,Pe({style:[{textAlign:"left"},{cursor:"pointer"}],class:["ma-1 mb-1 card-enhanced card-hover-base",{"card-status-selected":d.value==="usermanagement","card-status-default":d.value!=="usermanagement"}],onClick:pe[9]||(pe[9]=Yn=>d.value="usermanagement")},Ze),{default:u(()=>[l(rn,{class:"pb-0 pt-2"},{default:u(()=>[...pe[110]||(pe[110]=[h("div",{class:"text-body-2 font-weight-bold"},"User Management",-1)])]),_:1}),l($n,{class:"text-caption text-medium-emphasis pb-1 pt-0"},{default:u(()=>[...pe[111]||(pe[111]=[O("Create users, assign permissions ..",-1)])]),_:1})]),_:1},16,["class"])]),_:1})]),_:1})])):ye("",!0)]),_:1})]),_:1})])]),_:1})]),_:1}),l(Tt,{cols:"8",order:"2",class:"pl-1",style:{height:"100%"}},{default:u(()=>[l(gn,{color:"surfaceContainer",flat:"",style:{height:"92%"}},{default:u(()=>[l(lm,{modelValue:d.value,"onUpdate:modelValue":pe[57]||(pe[57]=Ze=>d.value=Ze)},{default:u(()=>[l(na,{value:"rxprintdetails"},{default:u(()=>[l(fn,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[l(Tt,{cols:"12"},{default:u(()=>[l(gn,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(fn,{"no-gutters":""},{default:u(()=>[l(Tt,{cols:"8",class:"d-flex align-center"},{default:u(()=>[h("div",kIe,[Vt.value?(R(),Ae(Ke,{key:0},[O(" Editing configurations for: "+K(Vt.value),1)],64)):(R(),Ae(Ke,{key:1},[O(" Print Configuration Settings ")],64))])]),_:1}),l(Tt,{cols:"4",class:"d-flex justify-end"},{default:u(()=>[l(Ta,{onClick:xe,disabled:!We.value||_t.value,loading:_t.value,class:"btn-hover-enhanced"},{default:u(()=>[...pe[112]||(pe[112]=[O(" SAVE ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),h("div",TIe,[l(fn,{"no-gutters":""},{default:u(()=>[l(Tt,{cols:"12",color:"surfaceContainer"},{default:u(()=>[l(ul,{modelValue:We.value,"onUpdate:modelValue":pe[20]||(pe[20]=Ze=>We.value=Ze),"validate-on":"blur",onSubmit:vn(xe,["prevent"])},{default:u(()=>[l(fn,{"no-gutters":"",class:"ma-2 pa-2"},{default:u(()=>[l(Tt,{cols:"6",class:"py-0 pl-2 pr-2"},{default:u(()=>[l(lA,{modelValue:Fe.value.useHeader,"onUpdate:modelValue":pe[10]||(pe[10]=Ze=>Fe.value.useHeader=Ze),label:"Use Header on Prescription",hint:"When disabled, blank space will be left at the top of each page for your custom prescription header",class:"input-hover",color:"primary",density:"compact"},null,8,["modelValue"])]),_:1}),l(Tt,{cols:"6",class:"py-0 pl-2 pr-2"},{default:u(()=>[l(lA,{modelValue:Fe.value.useFooter,"onUpdate:modelValue":pe[11]||(pe[11]=Ze=>Fe.value.useFooter=Ze),label:"Use Footer on Prescription",hint:"When disabled, no footer will be printed at the bottom of each page",class:"input-hover",color:"primary",density:"compact"},null,8,["modelValue"])]),_:1}),l(Tt,{cols:"12",class:"py-2 mb-4"},{default:u(()=>[l(gn,{variant:"outlined",class:"pa-3"},{default:u(()=>[l(rn,{class:"text-subtitle-2 pa-0 mb-2"},{default:u(()=>[...pe[113]||(pe[113]=[O("Prescription Header Image",-1)])]),_:1}),l($n,{class:"text-caption pa-0 mb-3"},{default:u(()=>[...pe[114]||(pe[114]=[O(" Upload an image to replace the text-based header. Image will be used when available. ",-1)])]),_:1}),Ge.value?(R(),Ae("div",IIe,[l(ko,{src:Ge.value,"max-height":"150",contain:"",class:"mb-2",style:{border:"1px solid #e0e0e0","border-radius":"4px"}},null,8,["src"]),l(Ta,{onClick:Dh,color:"error",variant:"outlined",size:"small",loading:se.value},{default:u(()=>[...pe[115]||(pe[115]=[O(" Remove Image ",-1)])]),_:1},8,["loading"])])):(R(),Ae("div",FIe,[l(Uh,{modelValue:Le.value,"onUpdate:modelValue":pe[12]||(pe[12]=Ze=>Le.value=Ze),label:"Upload Header Image",accept:"image/jpeg,image/jpg,image/png","prepend-icon":"mdi-image",variant:"outlined",density:"compact",disabled:he.value,loading:he.value,onChange:im,class:"input-hover"},null,8,["modelValue","disabled","loading"])]))]),_:1})]),_:1}),l(Tt,{cols:"12"},{default:u(()=>[l(vr,{modelValue:Fe.value.doctorName,"onUpdate:modelValue":pe[13]||(pe[13]=Ze=>Fe.value.doctorName=Ze),label:"Doctor Name (Dr.) *",variant:"outlined",clearable:"",density:"compact",rows:"10",rules:Qe(fr),class:"input-hover"},null,8,["modelValue","rules"])]),_:1}),l(Tt,{cols:"12"},{default:u(()=>[l(qu,{"auto-grow":"",label:"Doctor Qualification *",clearable:"",rows:"2","row-height":"10",variant:"outlined",density:"compact",class:"input-hover",rules:Qe(fr),modelValue:Fe.value.doctorDegrees,"onUpdate:modelValue":pe[14]||(pe[14]=Ze=>Fe.value.doctorDegrees=Ze)},null,8,["rules","modelValue"])]),_:1}),l(Tt,{cols:"12"},{default:u(()=>[l(vr,{modelValue:Fe.value.doctorRegistrationNumber,"onUpdate:modelValue":pe[15]||(pe[15]=Ze=>Fe.value.doctorRegistrationNumber=Ze),label:"Registration Number *",clearable:"",density:"compact",variant:"outlined",rows:"10",rules:Qe(HM),class:"input-hover"},null,8,["modelValue","rules"])]),_:1}),l(Tt,{cols:"12"},{default:u(()=>[l(qu,{"auto-grow":"",label:"Clinic Details *",clearable:"",rows:"2","row-height":"10",variant:"outlined",density:"compact",class:"input-hover",rules:Qe(fr),modelValue:Fe.value.clinicAddress,"onUpdate:modelValue":pe[16]||(pe[16]=Ze=>Fe.value.clinicAddress=Ze)},null,8,["rules","modelValue"])]),_:1}),l(Tt,{cols:"12"},{default:u(()=>[l(vr,{modelValue:Fe.value.email,"onUpdate:modelValue":pe[17]||(pe[17]=Ze=>Fe.value.email=Ze),label:"Email (optional)",variant:"outlined",density:"compact",rows:"10",class:"input-hover"},null,8,["modelValue"])]),_:1}),l(Tt,{cols:"12"},{default:u(()=>[l(Yu,{modelValue:Fe.value.pageSize,"onUpdate:modelValue":pe[18]||(pe[18]=Ze=>Fe.value.pageSize=Ze),label:"Page Size",items:Rt,variant:"outlined",density:"compact",class:"input-hover"},null,8,["modelValue"])]),_:1}),l(Tt,{cols:"12"},{default:u(()=>[l(vr,{modelValue:Fe.value.headerSize,"onUpdate:modelValue":pe[19]||(pe[19]=Ze=>Fe.value.headerSize=Ze),modelModifiers:{number:!0},label:"Header Size (inches)",variant:"outlined",density:"compact",type:"number",step:"0.1",min:"0.7",max:"2.8",suffix:"in",hint:"Header size in inches (0.7 to 2.8)","persistent-hint":"",rules:[Ze=>Ze==null||Ze>=.7&&Ze<=2.8||"Header size must be between 0.7 and 2.8 inches"],class:"input-hover"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})])]),_:1}),l(na,{value:"mobiledetails"},{default:u(()=>[l(fn,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[l(Tt,{cols:"12"},{default:u(()=>[l(gn,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(fn,{"no-gutters":""},{default:u(()=>[l(Tt,{cols:"10"}),l(Tt,{cols:"2",class:"d-flex justify-end ma-3"})]),_:1})]),_:1})]),_:1})]),_:1}),h("div",PIe,[l(fn,{"no-gutters":""},{default:u(()=>[l(Tt,{cols:"12"},{default:u(()=>[l(gn,{style:{textAlign:"left"},density:"compact",rounded:"lg",class:"ma-2 card-enhanced card-status-default card-hover-base"},{default:u(()=>[l(fn,{"no-gutters":""},{default:u(()=>[l(Tt,{cols:"12"},{default:u(()=>[l(rn,null,{default:u(()=>[...pe[116]||(pe[116]=[O("Remote Access via Internet",-1)])]),_:1}),l(Wn,{class:"ma-0 pa-0 pl-4 pb-2"},{default:u(()=>[D.value?(R(),Ae("div",DIe," Industry first access from other locations and devices using evamed True Private Network ")):(R(),Ae("div",UIe,[...pe[117]||(pe[117]=[O(" Remote access is not currently available.",-1),h("br",null,null,-1),O(" Ngrok tunnel may not be configured or running. ",-1)])]))]),_:1})]),_:1})]),_:1}),l(fn,{"no-gutters":"",class:"pa-4"},{default:u(()=>[b.value?(R(),ve(Tt,{key:0,cols:"12",class:"d-flex justify-center align-center pa-4"},{default:u(()=>[l(nn,{indeterminate:"",color:"primary"}),pe[118]||(pe[118]=h("span",{class:"ml-2"},"Loading mobile connection details...",-1))]),_:1})):S.value?(R(),ve(Tt,{key:1,cols:"12",class:"d-flex flex-column justify-center align-center pa-4"},{default:u(()=>[l(nn,{indeterminate:"",color:"primary",size:"64"}),pe[119]||(pe[119]=h("span",{class:"mt-3 text-subtitle-2"},"Regenerating Remote Access...",-1)),pe[120]||(pe[120]=h("span",{class:"mt-1 text-caption text-medium-emphasis"},"Creating new tunnel and QR code",-1))]),_:1})):(R(),Ae(Ke,{key:2},[l(Tt,{cols:"12",class:"d-flex justify-center mb-4"},{default:u(()=>[T.value&&Ye()?(R(),ve(ko,{src:Ye(),contain:"",height:"150",width:"150",onError:su,key:k.value},{placeholder:u(()=>[h("div",RIe,[l(nn,{indeterminate:"",color:"primary"})])]),error:u(()=>[h("div",NIe,[l(jt,{type:"error",variant:"tonal"},{default:u(()=>[...pe[121]||(pe[121]=[O(" Failed to load QR code ",-1)])]),_:1})])]),_:1},8,["src"])):(R(),ve(jt,{key:1,type:"info",variant:"tonal",density:"compact"},{default:u(()=>[...pe[122]||(pe[122]=[h("div",{class:"text-center"},[h("div",{class:"text-subtitle-2 mb-2"},"Remote Access Not Available"),h("div",{class:"text-caption"},[O(" Ngrok tunnel is not running or not configured."),h("br"),O(" Check server logs for ngrok setup instructions. ")])],-1)])]),_:1}))]),_:1}),l(Tt,{cols:"12"},{default:u(()=>[D.value?(R(),ve(vr,{key:0,"model-value":D.value,label:"Remote Access URL",readonly:"",variant:"outlined",density:"compact","append-inner-icon":"mdi-content-copy","onClick:appendInner":pe[21]||(pe[21]=Ze=>en(D.value))},null,8,["model-value"])):(R(),ve(jt,{key:1,type:"info",variant:"tonal",density:"compact"},{default:u(()=>[...pe[123]||(pe[123]=[h("div",{class:"text-center"},[h("div",{class:"text-subtitle-2 mb-1"},"Remote Access URL Not Available"),h("div",{class:"text-caption"}," Configure ngrok tunnel to enable remote access ")],-1)])]),_:1}))]),_:1}),l(Tt,{cols:"12",class:"mt-3 d-flex flex-column align-center"},{default:u(()=>[l(Ta,{onClick:ll,disabled:S.value||b.value,loading:S.value,color:"primary",variant:"outlined",size:"small",density:"compact",class:"btn-hover-enhanced"},{default:u(()=>[l(Hr,{start:"",size:"small"},{default:u(()=>[...pe[124]||(pe[124]=[O("mdi-refresh",-1)])]),_:1}),O(" "+K(S.value?"Regenerating...":"Regenerate Remote Access"),1)]),_:1},8,["disabled","loading"]),pe[125]||(pe[125]=h("div",{class:"text-caption text-medium-emphasis mt-1 text-center",style:{"font-size":"0.7rem"}}," This will create a new tunnel URL and QR code. The old URL will stop working. ",-1))]),_:1})],64))]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1}),l(na,{value:"doctordetails"},{default:u(()=>[l(fn,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[l(Tt,{cols:"12"},{default:u(()=>[l(gn,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(fn,{"no-gutters":""},{default:u(()=>[l(Tt,{cols:"10"}),l(Tt,{cols:"2",class:"d-flex justify-end"},{default:u(()=>[l(Ta,{onClick:pe[22]||(pe[22]=Ze=>Lt.value=!0),class:"btn-hover-enhanced"},{default:u(()=>[...pe[126]||(pe[126]=[O("Create New",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(fn,{"no-gutters":""},{default:u(()=>[l(Tt,{cols:"12",color:"surfaceContainer"},{default:u(()=>[!nt.value||nt.value.length===0?(R(),ve(jt,{key:0,type:"info",variant:"tonal",class:"ma-3"},{default:u(()=>[...pe[127]||(pe[127]=[O(' No doctors found. Click "Create New" to add a doctor. ',-1)])]),_:1})):ye("",!0),(R(!0),Ae(Ke,null,Gt(nt.value||[],Ze=>(R(),ve(gn,{style:{textAlign:"left"},density:"compact",rounded:"lg",class:"ma-2 card-enhanced card-status-default card-hover-base",key:Ze?.id||Math.random()},{default:u(()=>[l(uA,{class:"pb-2"},{default:u(()=>[h("div",VIe,[h("div",LIe,[l(rn,{class:"text-h6 pa-0 mb-1"},{default:u(()=>[O(K(Ze?.doctorName||"Unknown Doctor"),1)]),_:2},1024),Ze?.doctorSpecialization?(R(),ve($n,{key:0,class:"text-body-2 pa-0"},{default:u(()=>[O(K(Ze?.doctorSpecialization),1)]),_:2},1024)):ye("",!0)]),l(Ur,{text:"Edit Doctor Details"},{activator:u(({props:Yn})=>[l(Ta,Pe({icon:"",variant:"outlined",size:"small"},{ref_for:!0},Yn,{onClick:cl=>Pt(Ze),class:"icon-btn-border"}),{default:u(()=>[...pe[128]||(pe[128]=[h("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[h("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),h("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])]),_:1},16,["onClick"])]),_:2},1024)])]),_:2},1024),l(ur,{class:"mx-4 mb-3"}),l(Wn,{class:"pt-0"},{default:u(()=>[l(fn,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(Tt,{cols:"12",class:"mb-2"},{default:u(()=>[h("div",MIe,[l(Hr,{size:"small",class:"mr-2 text-medium-emphasis"},{default:u(()=>[...pe[129]||(pe[129]=[O("mdi-email-outline",-1)])]),_:1}),pe[130]||(pe[130]=h("span",{class:"text-body-2 text-medium-emphasis mr-2"},"Email:",-1)),Ze?.email&&Ze.email!=="Not specified"?(R(),Ae("a",{key:0,href:`mailto:${Ze.email}`,class:"text-body-2 text-primary text-decoration-none",onClick:pe[23]||(pe[23]=vn(()=>{},["stop"]))},K(Ze.email),9,OIe)):(R(),Ae("span",HIe,"Not specified"))])]),_:2},1024),l(Tt,{cols:"12",class:"mb-2"},{default:u(()=>[h("div",$Ie,[l(Hr,{size:"small",class:"mr-2 text-medium-emphasis"},{default:u(()=>[...pe[131]||(pe[131]=[O("mdi-link-variant",-1)])]),_:1}),pe[134]||(pe[134]=h("span",{class:"text-body-2 text-medium-emphasis mr-2"},"Review Link:",-1)),Ze?.doctorReviewLink&&Ze.doctorReviewLink!=="Not specified"?(R(),Ae("a",{key:0,href:Ze.doctorReviewLink,target:"_blank",rel:"noopener noreferrer",class:"text-body-2 text-primary text-decoration-none",onClick:pe[24]||(pe[24]=vn(()=>{},["stop"]))},[pe[133]||(pe[133]=O(" View Profile ",-1)),l(Hr,{size:"x-small",class:"ml-1"},{default:u(()=>[...pe[132]||(pe[132]=[O("mdi-open-in-new",-1)])]),_:1})],8,QIe)):(R(),Ae("span",GIe,"Not specified"))])]),_:2},1024),Ze?.isGST&&Ze?.gstIdentifier?(R(),ve(Tt,{key:0,cols:"12",class:"mb-2"},{default:u(()=>[h("div",zIe,[l(Hr,{size:"small",class:"mr-2 text-medium-emphasis"},{default:u(()=>[...pe[135]||(pe[135]=[O("mdi-receipt",-1)])]),_:1}),pe[136]||(pe[136]=h("span",{class:"text-body-2 text-medium-emphasis mr-2"},"GST Number:",-1)),h("span",KIe,K(Ze.gstIdentifier),1)])]),_:2},1024)):ye("",!0)]),_:2},1024),h("div",WIe,[l(ou,{color:Ze?.isGST?"success":"default",variant:Ze?.isGST?"tonal":"outlined",size:"small",density:"comfortable",class:"mr-2 mb-1"},{default:u(()=>[l(Hr,{start:"",size:"small"},{default:u(()=>[O(K(Ze?.isGST?"mdi-check-circle":"mdi-cancel"),1)]),_:2},1024),O(" "+K(Ze?.isGST?"GST Registered":"Non-GST"),1)]),_:2},1032,["color","variant"]),l(ou,{color:Ze?.isPharmacy?"primary":"default",variant:Ze?.isPharmacy?"tonal":"outlined",size:"small",density:"comfortable",class:"mb-1"},{default:u(()=>[l(Hr,{start:"",size:"small"},{default:u(()=>[O(K(Ze?.isPharmacy?"mdi-pharmacy":"mdi-pharmacy-off"),1)]),_:2},1024),O(" "+K(Ze?.isPharmacy?"Pharmacy Enabled":"Pharmacy Disabled"),1)]),_:2},1032,["color","variant"])])]),_:2},1024)]),_:2},1024))),128)),l(di,{modelValue:zt.value,"onUpdate:modelValue":pe[25]||(pe[25]=Ze=>zt.value=Ze),"max-width":"40%",persistent:""},{default:u(()=>[l(tIe,{doctor:E.value,onClose:Wt},null,8,["doctor"])]),_:1},8,["modelValue"]),l(di,{modelValue:Lt.value,"onUpdate:modelValue":pe[26]||(pe[26]=Ze=>Lt.value=Ze),"max-width":"40%",persistent:""},{default:u(()=>[l(rIe,{onClose:ia})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(na,{value:"clinicdetails"},{default:u(()=>[l(fn,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[l(Tt,{cols:"12"},{default:u(()=>[l(gn,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(fn,{"no-gutters":""},{default:u(()=>[l(Tt,{cols:"10"}),l(Tt,{cols:"2",class:"d-flex justify-end"},{default:u(()=>[l(Ta,{onClick:pe[27]||(pe[27]=Ze=>Bn.value=!0),class:"btn-hover-enhanced"},{default:u(()=>[...pe[137]||(pe[137]=[O("Create New",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(fn,{"no-gutters":""},{default:u(()=>[l(Tt,{cols:"12",color:"surfaceContainer"},{default:u(()=>[!st.value||st.value.length===0?(R(),ve(jt,{key:0,type:"info",variant:"tonal",class:"ma-3"},{default:u(()=>[...pe[138]||(pe[138]=[O(' No clinics found. Click "Create New" to add a clinic. ',-1)])]),_:1})):ye("",!0),(R(!0),Ae(Ke,null,Gt(st.value||[],Ze=>(R(),ve(gn,{style:{textAlign:"left"},density:"compact",rounded:"lg",class:"ma-2 card-enhanced card-status-default card-hover-base",key:Ze?.id||Math.random()},{default:u(()=>[l(fn,{"no-gutters":""},{default:u(()=>[l(Tt,{cols:"10"},{default:u(()=>[l(fn,{"no-gutters":""},{default:u(()=>[l(Tt,{cols:"12"},{default:u(()=>[l(rn,null,{default:u(()=>[O(K(Ze?.clinicName||"Unknown Clinic"),1)]),_:2},1024)]),_:2},1024),l(Tt,{cols:"12"},{default:u(()=>[l(Wn,{class:"ma-0 pa-0 pl-4 pb-2"},{default:u(()=>[h("div",null,"Address: "+K(Ze?.clinicAddress||"Not specified"),1),h("div",null,"Contact: "+K(Ze?.contactNumber||"Not specified"),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),l(Tt,{cols:"2",class:"d-flex justify-end align-center"},{default:u(()=>[l(fn,{"no-gutters":""},{default:u(()=>[l(Tt,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[l(Ur,{text:"Edit Clinic Details"},{activator:u(({props:Yn})=>[l(Ta,Pe({icon:"",variant:"outlined",size:"small"},{ref_for:!0},Yn,{onClick:cl=>zn(Ze),class:"icon-btn-border"}),{default:u(()=>[...pe[139]||(pe[139]=[h("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[h("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),h("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024),l(ur),l(Tt,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[l(Ur,{text:"Delete Clinic"},{activator:u(({props:Yn})=>[l(Ta,Pe({icon:"",variant:"outlined",size:"small"},{ref_for:!0},Yn,{disabled:"",class:"icon-btn-border"}),{default:u(()=>[...pe[140]||(pe[140]=[h("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[h("polyline",{points:"3 6 5 6 21 6"}),h("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)])]),_:1},16)]),_:1})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),l(di,{modelValue:Ln.value,"onUpdate:modelValue":pe[28]||(pe[28]=Ze=>Ln.value=Ze),"max-width":"40%",persistent:""},{default:u(()=>[l(nIe,{clinic:C.value,onClose:Yt},null,8,["clinic"])]),_:1},8,["modelValue"]),l(di,{modelValue:Bn.value,"onUpdate:modelValue":pe[29]||(pe[29]=Ze=>Bn.value=Ze),"max-width":"40%",persistent:""},{default:u(()=>[l(aIe,{onClose:ke})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(na,{value:"vitalsconfig"},{default:u(()=>[l(fn,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[l(Tt,{cols:"12"},{default:u(()=>[l(gn,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(fn,{"no-gutters":""},{default:u(()=>[l(Tt,{cols:"8",class:"d-flex align-center"},{default:u(()=>[h("div",jIe,[Vt.value?(R(),Ae(Ke,{key:0},[O(" Vitals Parameters Configured for: "+K(Vt.value),1)],64)):(R(),Ae(Ke,{key:1},[O(" Configure Vitals Parameters ")],64))])]),_:1}),l(Tt,{cols:"4",class:"d-flex justify-end"},{default:u(()=>[l(Ta,{onClick:tn,disabled:L.value,loading:L.value,class:"btn-hover-enhanced"},{default:u(()=>[...pe[141]||(pe[141]=[O(" Save Preferences ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),h("div",qIe,[l(fn,{"no-gutters":""},{default:u(()=>[l(Tt,{cols:"12",color:"surfaceContainer"},{default:u(()=>[l(gn,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(rn,{class:"text-h6 mb-2"},{default:u(()=>[...pe[142]||(pe[142]=[O("Select Vitals Parameters",-1)])]),_:1}),l($n,{class:"text-subtitle-2 mb-1"},{default:u(()=>[...pe[143]||(pe[143]=[O("Basic Vitals",-1)])]),_:1}),l(fn,{"no-gutters":"",class:"mb-3"},{default:u(()=>[l(Tt,{cols:"4",class:"pr-1"},{default:u(()=>[l(Xs,{label:"Weight (kg)","model-value":!0,disabled:"",density:"compact",class:"input-hover",color:"primary"})]),_:1}),l(Tt,{cols:"4",class:"px-1"},{default:u(()=>[l(Xs,{modelValue:F.value.pulse,"onUpdate:modelValue":pe[30]||(pe[30]=Ze=>F.value.pulse=Ze),label:"Pulse (bpm)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1}),l(Tt,{cols:"4",class:"pl-1"},{default:u(()=>[l(Xs,{modelValue:F.value.temperature,"onUpdate:modelValue":pe[31]||(pe[31]=Ze=>F.value.temperature=Ze),label:"Temperature (C)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1}),l(Tt,{cols:"4",class:"pr-1"},{default:u(()=>[l(Xs,{modelValue:F.value.bloodPressure,"onUpdate:modelValue":pe[32]||(pe[32]=Ze=>F.value.bloodPressure=Ze),label:"Blood Pressure (mmHg)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1}),l(Tt,{cols:"4",class:"px-1"},{default:u(()=>[l(Xs,{modelValue:F.value.respiratoryRate,"onUpdate:modelValue":pe[33]||(pe[33]=Ze=>F.value.respiratoryRate=Ze),label:"Respiratory Rate (breaths/min)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1}),l(Tt,{cols:"4",class:"pl-1"},{default:u(()=>[l(Xs,{modelValue:F.value.height,"onUpdate:modelValue":pe[34]||(pe[34]=Ze=>F.value.height=Ze),label:"Height (cm)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1})]),_:1}),l($n,{class:"text-subtitle-2 mb-1"},{default:u(()=>[...pe[144]||(pe[144]=[O("Blood Chemistry Parameters",-1)])]),_:1}),l(fn,{"no-gutters":"",class:"mb-3"},{default:u(()=>[l(Tt,{cols:"4",class:"pr-1"},{default:u(()=>[l(Xs,{modelValue:F.value.serumBilirubin,"onUpdate:modelValue":pe[35]||(pe[35]=Ze=>F.value.serumBilirubin=Ze),label:"Serum Bilirubin (mg/dL)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1}),l(Tt,{cols:"4",class:"px-1"},{default:u(()=>[l(Xs,{modelValue:F.value.bloodGlucoseFF,"onUpdate:modelValue":pe[36]||(pe[36]=Ze=>F.value.bloodGlucoseFF=Ze),label:"Blood Glucose - FF (mg/dL)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1}),l(Tt,{cols:"4",class:"pl-1"},{default:u(()=>[l(Xs,{modelValue:F.value.bloodGlucosePP,"onUpdate:modelValue":pe[37]||(pe[37]=Ze=>F.value.bloodGlucosePP=Ze),label:"Blood Glucose - PP (mg/dL)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1}),l(Tt,{cols:"4",class:"pr-1"},{default:u(()=>[l(Xs,{modelValue:F.value.bloodGlucoseRandom,"onUpdate:modelValue":pe[38]||(pe[38]=Ze=>F.value.bloodGlucoseRandom=Ze),label:"Blood Glucose - Random (mg/dL)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1}),l(Tt,{cols:"4",class:"px-1"},{default:u(()=>[l(Xs,{modelValue:F.value.serumCreatinine,"onUpdate:modelValue":pe[39]||(pe[39]=Ze=>F.value.serumCreatinine=Ze),label:"Serum Creatinine (mg/dL)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1})]),_:1}),l(jt,{type:"info",variant:"tonal",density:"compact",class:"mt-2"},{default:u(()=>[...pe[145]||(pe[145]=[O(" These preferences will be applied to the vitals form and trends view. Weight is always enabled as it's considered essential. Blood chemistry parameters are advanced lab values that can be enabled as needed. ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1}),l(na,{value:"receiptconfig"},{default:u(()=>[l(fn,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[l(Tt,{cols:"12"},{default:u(()=>[l(gn,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(fn,{"no-gutters":""},{default:u(()=>[l(Tt,{cols:"12",class:"d-flex align-center"},{default:u(()=>[h("div",YIe,[Vt.value?(R(),Ae(Ke,{key:0},[O(" Payment Receipt Configuration for: "+K(Vt.value),1)],64)):(R(),Ae(Ke,{key:1},[O(" Payment Receipt Configuration Settings ")],64))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),h("div",XIe,[l(fn,{"no-gutters":""},{default:u(()=>[l(Tt,{cols:"12",color:"surfaceContainer"},{default:u(()=>[l(ul,{modelValue:ue.value,"onUpdate:modelValue":pe[44]||(pe[44]=Ze=>ue.value=Ze),"validate-on":"blur",onSubmit:vn(kn,["prevent"])},{default:u(()=>[l(fn,{"no-gutters":"",class:"ma-2 pa-2"},{default:u(()=>[l(Tt,{cols:"12"},{default:u(()=>[l(gn,{flat:"",class:"mb-4",color:"surfaceContainer"},{default:u(()=>[l(rn,{class:"text-h6 mb-2"},{default:u(()=>[...pe[146]||(pe[146]=[O("Payment Receipt Series",-1)])]),_:1}),l(Wn,null,{default:u(()=>[...pe[147]||(pe[147]=[O(" Create a new receipt series by specifying a 3-letter prefix and the first receipt number you want to use. The system will generate sequential receipt numbers starting from your specified number. ",-1)])]),_:1})]),_:1})]),_:1}),l(Tt,{cols:"12",class:"mb-3"},{default:u(()=>[l(jt,{type:"info",variant:"tonal",density:"compact"},{default:u(()=>[...pe[148]||(pe[148]=[h("strong",null,"Example:",-1),O(' If you enter prefix "INV" and first number "000100", your receipts will be numbered "INV000100", "INV000101", "INV000102", and so on. ',-1)])]),_:1})]),_:1}),l(Tt,{cols:"6",class:"pr-2"},{default:u(()=>[l(vr,{modelValue:H.value.prefix,"onUpdate:modelValue":pe[40]||(pe[40]=Ze=>H.value.prefix=Ze),label:"Prefix (3 letters) *",variant:"outlined",clearable:"",density:"compact",rules:xt,class:"input-hover",hint:"Enter 3 uppercase letters (e.g., INV, REC, PAY)",maxlength:"3",onInput:pe[41]||(pe[41]=Ze=>H.value.prefix=(Ze.target?.value||Ze||"").toString().toUpperCase())},null,8,["modelValue"])]),_:1}),l(Tt,{cols:"6",class:"pl-2"},{default:u(()=>[l(vr,{modelValue:H.value.suffix,"onUpdate:modelValue":pe[42]||(pe[42]=Ze=>H.value.suffix=Ze),label:"First Receipt Number (6 digits) *",variant:"outlined",clearable:"",density:"compact",rules:an,class:"input-hover",hint:"Enter 6 digits (000001-999999). This will be your first receipt number.",maxlength:"6",onInput:pe[43]||(pe[43]=Ze=>H.value.suffix=(Ze.target?.value||Ze||"").toString().replace(/\D/g,""))},null,8,["modelValue"])]),_:1}),l(Tt,{cols:"12",class:"mt-2"},{default:u(()=>[H.value.prefix&&H.value.suffix?(R(),ve(jt,{key:0,type:"success",variant:"tonal",density:"compact"},{default:u(()=>[pe[149]||(pe[149]=h("strong",null,"First Receipt Number:",-1)),O(" "+K(H.value.prefix)+K(H.value.suffix)+" ",1),pe[150]||(pe[150]=h("br",null,null,-1)),pe[151]||(pe[151]=h("strong",null,"Second Receipt Number:",-1)),O(" "+K(H.value.prefix)+K((parseInt(H.value.suffix)+1).toString().padStart(6,"0")),1)]),_:1})):(R(),ve(jt,{key:1,type:"info",variant:"tonal",density:"compact"},{default:u(()=>[pe[152]||(pe[152]=h("strong",null,"Preview:",-1)),O(" "+K(H.value.prefix||"XXX")+K(H.value.suffix||"000000")+" ",1),pe[153]||(pe[153]=h("br",null,null,-1)),pe[154]||(pe[154]=O("Enter both prefix and first receipt number to see the preview. ",-1))]),_:1}))]),_:1}),l(Tt,{cols:"12",class:"mt-3 d-flex justify-center"},{default:u(()=>[l(Ta,{onClick:kn,disabled:!ue.value||ie.value,loading:ie.value,color:"primary",variant:"elevated",class:"btn-hover-enhanced"},{default:u(()=>[...pe[155]||(pe[155]=[O(" Create Series ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})])]),_:1}),kt.value?(R(),ve(na,{key:0,value:"billconfig"},{default:u(()=>[l(fn,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[l(Tt,{cols:"12"},{default:u(()=>[l(gn,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(fn,{"no-gutters":""},{default:u(()=>[l(Tt,{cols:"12",class:"d-flex align-center"},{default:u(()=>[h("div",JIe,[Vt.value?(R(),Ae(Ke,{key:0},[O(" GST Bill Series Configuration for: "+K(Vt.value),1)],64)):(R(),Ae(Ke,{key:1},[O(" GST Bill Series Configuration Settings ")],64))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),h("div",ZIe,[l(fn,{"no-gutters":""},{default:u(()=>[l(Tt,{cols:"12",color:"surfaceContainer"},{default:u(()=>[l(ul,{modelValue:X.value,"onUpdate:modelValue":pe[49]||(pe[49]=Ze=>X.value=Ze),"validate-on":"blur",onSubmit:vn(hn,["prevent"])},{default:u(()=>[l(fn,{"no-gutters":"",class:"ma-2 pa-2"},{default:u(()=>[l(Tt,{cols:"12"},{default:u(()=>[l(gn,{flat:"",class:"mb-4",color:"surfaceContainer"},{default:u(()=>[l(rn,{class:"text-h6 mb-2"},{default:u(()=>[...pe[156]||(pe[156]=[O("GST Bill Series",-1)])]),_:1}),l(Wn,null,{default:u(()=>[...pe[157]||(pe[157]=[O(" Create a new GST bill series by specifying a 3-letter prefix and the first bill number you want to use. The system will generate sequential bill numbers starting from your specified number. This is separate from payment receipts and specifically for GST-registered billing. ",-1)])]),_:1})]),_:1})]),_:1}),l(Tt,{cols:"12",class:"mb-3"},{default:u(()=>[l(jt,{type:"info",variant:"tonal",density:"compact"},{default:u(()=>[...pe[158]||(pe[158]=[h("strong",null,"Example:",-1),O(' If you enter prefix "BTX" and first number "000100", your GST bills will be numbered "BTX000100", "BTX000101", "BTX000102", and so on. ',-1),h("br",null,null,-1),h("strong",null,"Suggestion:",-1),O(' Use "BTX" for Bill Tax, "GST" for GST Bills, or your clinic initials. ',-1)])]),_:1})]),_:1}),l(Tt,{cols:"6",class:"pr-2"},{default:u(()=>[l(vr,{modelValue:Q.value.prefix,"onUpdate:modelValue":pe[45]||(pe[45]=Ze=>Q.value.prefix=Ze),label:"Prefix (3 letters) *",variant:"outlined",clearable:"",density:"compact",rules:Cn,class:"input-hover",hint:"Enter 3 uppercase letters (e.g., BTX, GST, CLN)",maxlength:"3",onInput:pe[46]||(pe[46]=Ze=>Q.value.prefix=(Ze.target?.value||Ze||"").toString().toUpperCase())},null,8,["modelValue"])]),_:1}),l(Tt,{cols:"6",class:"pl-2"},{default:u(()=>[l(vr,{modelValue:Q.value.suffix,"onUpdate:modelValue":pe[47]||(pe[47]=Ze=>Q.value.suffix=Ze),label:"First Bill Number (6 digits) *",variant:"outlined",clearable:"",density:"compact",rules:oa,class:"input-hover",hint:"Enter 6 digits (000001-999999). This will be your first bill number.",maxlength:"6",onInput:pe[48]||(pe[48]=Ze=>Q.value.suffix=(Ze.target?.value||Ze||"").toString().replace(/\D/g,""))},null,8,["modelValue"])]),_:1}),l(Tt,{cols:"12",class:"mt-2"},{default:u(()=>[Q.value.prefix&&Q.value.suffix?(R(),ve(jt,{key:0,type:"success",variant:"tonal",density:"compact"},{default:u(()=>[pe[159]||(pe[159]=h("strong",null,"First Bill Number:",-1)),O(" "+K(Q.value.prefix)+K(Q.value.suffix)+" ",1),pe[160]||(pe[160]=h("br",null,null,-1)),pe[161]||(pe[161]=h("strong",null,"Second Bill Number:",-1)),O(" "+K(Q.value.prefix)+K((parseInt(Q.value.suffix)+1).toString().padStart(6,"0")),1)]),_:1})):(R(),ve(jt,{key:1,type:"info",variant:"tonal",density:"compact"},{default:u(()=>[pe[162]||(pe[162]=h("strong",null,"Preview:",-1)),O(" "+K(Q.value.prefix||"XXX")+K(Q.value.suffix||"000000")+" ",1),pe[163]||(pe[163]=h("br",null,null,-1)),pe[164]||(pe[164]=O("Enter both prefix and first bill number to see the preview. ",-1))]),_:1}))]),_:1}),l(Tt,{cols:"12",class:"mt-3 d-flex justify-center"},{default:u(()=>[l(Ta,{onClick:hn,disabled:!X.value||le.value,loading:le.value,color:"primary",variant:"elevated",class:"btn-hover-enhanced"},{default:u(()=>[...pe[165]||(pe[165]=[O(" Create Bill Series ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})])]),_:1})):ye("",!0),l(na,{value:"pharmacyconfig"},{default:u(()=>[l(fn,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[l(Tt,{cols:"12"},{default:u(()=>[l(gn,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(fn,{"no-gutters":""},{default:u(()=>[l(Tt,{cols:"8",class:"d-flex align-center"},{default:u(()=>[...pe[166]||(pe[166]=[h("div",{class:"text-subtitle-2 ml-2"}," Pharmacy Print Configuration Settings ",-1)])]),_:1}),l(Tt,{cols:"4",class:"d-flex justify-end"},{default:u(()=>[l(Ta,{onClick:tt,disabled:!re.value||q.value,loading:q.value,class:"btn-hover-enhanced"},{default:u(()=>[...pe[167]||(pe[167]=[O(" SAVE ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),h("div",eFe,[l(fn,{"no-gutters":""},{default:u(()=>[l(Tt,{cols:"12",color:"surfaceContainer"},{default:u(()=>[l(ul,{modelValue:re.value,"onUpdate:modelValue":pe[56]||(pe[56]=Ze=>re.value=Ze),"validate-on":"blur",onSubmit:vn(tt,["prevent"])},{default:u(()=>[l(fn,{"no-gutters":"",class:"ma-2 pa-2"},{default:u(()=>[l(Tt,{cols:"12",class:"py-0 pl-2 pr-2"},{default:u(()=>[l(lA,{modelValue:Z.value.useHeader,"onUpdate:modelValue":pe[50]||(pe[50]=Ze=>Z.value.useHeader=Ze),label:"Use Header on Pharmacy Bill",hint:"When disabled, blank space will be left at the top of each page for your custom pharmacy header",class:"input-hover",color:"primary",density:"compact"},null,8,["modelValue"])]),_:1}),l(Tt,{cols:"12"},{default:u(()=>[l(vr,{modelValue:Z.value.pharmacyName,"onUpdate:modelValue":pe[51]||(pe[51]=Ze=>Z.value.pharmacyName=Ze),label:"Pharmacy Name *",variant:"outlined",clearable:"",density:"compact",class:"input-hover",rules:Qe(fr)},null,8,["modelValue","rules"])]),_:1}),l(Tt,{cols:"12"},{default:u(()=>[l(vr,{modelValue:Z.value.addressAndContactInfo,"onUpdate:modelValue":pe[52]||(pe[52]=Ze=>Z.value.addressAndContactInfo=Ze),label:"Address and Contact Info",variant:"outlined",clearable:"",density:"compact",class:"input-hover"},null,8,["modelValue"])]),_:1}),l(Tt,{cols:"12"},{default:u(()=>[l(vr,{modelValue:Z.value.gstNumber,"onUpdate:modelValue":pe[53]||(pe[53]=Ze=>Z.value.gstNumber=Ze),label:"GST Number",variant:"outlined",clearable:"",density:"compact",class:"input-hover"},null,8,["modelValue"])]),_:1}),l(Tt,{cols:"12"},{default:u(()=>[l(vr,{modelValue:Z.value.otherRegistrationInfo,"onUpdate:modelValue":pe[54]||(pe[54]=Ze=>Z.value.otherRegistrationInfo=Ze),label:"Other Registration Information",variant:"outlined",clearable:"",density:"compact",class:"input-hover"},null,8,["modelValue"])]),_:1}),l(Tt,{cols:"12"},{default:u(()=>[l(Yu,{modelValue:Z.value.pageSize,"onUpdate:modelValue":pe[55]||(pe[55]=Ze=>Z.value.pageSize=Ze),label:"Page Size",items:Rt,variant:"outlined",density:"compact",class:"input-hover",disabled:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})])]),_:1}),l(na,{value:"usermanagement"},{default:u(()=>[l(fn,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[l(Tt,{cols:"12"},{default:u(()=>[l(gn,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(fn,{"no-gutters":""},{default:u(()=>[l(Tt,{cols:"8",class:"d-flex align-center"},{default:u(()=>[...pe[168]||(pe[168]=[h("div",{class:"text-subtitle-2 ml-2"}," User Management & Permissions ",-1)])]),_:1}),l(Tt,{cols:"4",class:"d-flex justify-end"},{default:u(()=>[l(Ta,{onClick:Za,color:"primary",class:"btn-hover-enhanced"},{default:u(()=>[l(Hr,{left:""},{default:u(()=>[...pe[169]||(pe[169]=[O("mdi-plus",-1)])]),_:1}),pe[170]||(pe[170]=O(" Add User ",-1))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),h("div",tFe,[G.value?(R(),ve(fn,{key:0,"no-gutters":"",class:"justify-center py-8"},{default:u(()=>[l(nn,{indeterminate:"",color:"primary"})]),_:1})):P.value.length?(R(),ve(fn,{key:2,"no-gutters":""},{default:u(()=>[l(Tt,{cols:"12"},{default:u(()=>[(R(!0),Ae(Ke,null,Gt(P.value,Ze=>(R(),ve(gn,{key:Ze.id,class:"mb-2 card-enhanced card-hover-base",outlined:""},{default:u(()=>[l(Wn,{class:"d-flex align-center justify-space-between"},{default:u(()=>[h("div",nFe,[l(cA,{color:Ze.isActive?"primary":"grey",size:"40",class:"mr-3"},{default:u(()=>[h("span",aFe,K(Zr(Ze.name)),1)]),_:2},1032,["color"]),h("div",rFe,[h("div",sFe,[O(K(Ze.name)+" ",1),Ze.isAdmin?(R(),ve(ou,{key:0,"x-small":"",color:"primary",class:"ml-1",density:"compact",style:{height:"18px","font-size":"10px",padding:"0 6px"}},{default:u(()=>[...pe[174]||(pe[174]=[O("Admin",-1)])]),_:1})):ye("",!0),Ze.role?(R(),ve(ou,{key:1,"x-small":"",color:"success",class:"ml-1",density:"compact",style:{height:"18px","font-size":"10px",padding:"0 6px"}},{default:u(()=>[O(K(Ss(Ze.role)),1)]),_:2},1024)):ye("",!0)]),h("div",oFe,[O(K(Ze.email||"No email")+" ",1),Ze.doctorId?(R(),ve(ou,{key:0,"x-small":"",color:"info",class:"ml-1",density:"compact",style:{height:"18px","font-size":"10px",padding:"0 6px"}},{default:u(()=>[...pe[175]||(pe[175]=[O("Doctor",-1)])]),_:1})):ye("",!0)]),h("div",iFe,[(R(!0),Ae(Ke,null,Gt(Ze.permissions?.slice(0,3),Yn=>(R(),ve(ou,{key:Yn,"x-small":"",class:"mr-1 mt-1",density:"compact",style:{height:"18px","font-size":"10px",padding:"0 6px"}},{default:u(()=>[O(K(Wo(Yn)),1)]),_:2},1024))),128)),Ze.permissions?.length>3?(R(),Ae("span",lFe," +"+K(Ze.permissions.length-3)+" more ",1)):ye("",!0)])])]),h("div",uFe,[l(Ur,{text:"Edit User"},{activator:u(({props:Yn})=>[l(Ta,Pe({icon:"",size:"small",variant:"outlined",onClick:cl=>Es(Ze),class:"icon-btn-border mr-1"},{ref_for:!0},Yn),{default:u(()=>[...pe[176]||(pe[176]=[h("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[h("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),h("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])]),_:1},16,["onClick"])]),_:2},1024),l(Ur,{text:"View Passcode"},{activator:u(({props:Yn})=>[l(Ta,Pe({icon:"",size:"small",variant:"outlined",onClick:cl=>Eo(Ze),class:"icon-btn-border mr-1"},{ref_for:!0},Yn),{default:u(()=>[...pe[177]||(pe[177]=[h("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[h("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),h("circle",{cx:"12",cy:"12",r:"3"})],-1)])]),_:1},16,["onClick"])]),_:2},1024),l(Ur,{text:"Reset Passcode"},{activator:u(({props:Yn})=>[l(Ta,Pe({icon:"",size:"small",variant:"outlined",onClick:cl=>Mn(Ze),class:"icon-btn-border mr-1"},{ref_for:!0},Yn),{default:u(()=>[...pe[178]||(pe[178]=[h("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[h("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),h("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})],-1)])]),_:1},16,["onClick"])]),_:2},1024),l(En,{"require-admin":""},{default:u(()=>[l(Ur,{text:"Delete User"},{activator:u(({props:Yn})=>[l(Ta,Pe({icon:"",size:"small",variant:"outlined",onClick:cl=>ju(Ze),disabled:ya(Ze),color:"error",class:"icon-btn-border"},{ref_for:!0},Yn),{default:u(()=>[...pe[179]||(pe[179]=[h("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[h("polyline",{points:"3 6 5 6 21 6"}),h("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)])]),_:1},16,["onClick","disabled"])]),_:2},1024)]),_:2},1024)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):(R(),ve(fn,{key:1,"no-gutters":"",class:"justify-center py-8"},{default:u(()=>[l(Tt,{cols:"12",class:"text-center"},{default:u(()=>[l(Hr,{size:"64",color:"grey-lighten-1"},{default:u(()=>[...pe[171]||(pe[171]=[O("mdi-account-group-outline",-1)])]),_:1}),pe[172]||(pe[172]=h("p",{class:"text-subtitle-1 mt-4"},"No users found",-1)),pe[173]||(pe[173]=h("p",{class:"text-caption text-grey"},'Click "Add User" to create your first user',-1))]),_:1})]),_:1}))])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(di,{modelValue:M.value,"onUpdate:modelValue":pe[68]||(pe[68]=Ze=>M.value=Ze),"max-width":"600",scrollable:""},{default:u(()=>[l(gn,{class:"dialog-card"},{default:u(()=>[l(rn,{class:"dialog-header"},{default:u(()=>[pe[181]||(pe[181]=h("span",{class:"dialog-title"},"Create New User",-1)),l($a),l(Ta,{icon:"",variant:"text",size:"small",onClick:pe[58]||(pe[58]=Ze=>M.value=!1),class:"dialog-close-btn"},{default:u(()=>[l(Hr,null,{default:u(()=>[...pe[180]||(pe[180]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(Wn,{class:"dialog-card-text"},{default:u(()=>[ee.value?(R(),ve(jt,{key:0,type:"error",variant:"tonal",dismissible:"","onClick:close":pe[59]||(pe[59]=Ze=>ee.value=null),class:"mb-4"},{default:u(()=>[O(K(ee.value),1)]),_:1})):ye("",!0),l(ul,{ref_key:"createUserForm",ref:W,modelValue:te.value,"onUpdate:modelValue":pe[66]||(pe[66]=Ze=>te.value=Ze)},{default:u(()=>[l(vr,{modelValue:ae.value.name,"onUpdate:modelValue":pe[60]||(pe[60]=Ze=>ae.value.name=Ze),label:"User Name *",variant:"outlined",density:"compact",rules:[Ze=>!!Ze||"Name is required"],class:"mb-2"},null,8,["modelValue","rules"]),l(vr,{modelValue:ae.value.passcode,"onUpdate:modelValue":pe[62]||(pe[62]=Ze=>ae.value.passcode=Ze),label:"Passcode *",variant:"outlined",density:"compact",type:Te.value?"text":"password",rules:[Ze=>!!Ze||"Passcode is required",Ze=>Ze.length>=4||"Passcode must be at least 4 characters"],error:!!ee.value,onInput:pe[63]||(pe[63]=Ze=>ee.value=null),class:"mb-2"},{"append-inner":u(()=>[l(Hr,{icon:Te.value?"mdi-eye-off":"mdi-eye",onClick:pe[61]||(pe[61]=Ze=>Te.value=!Te.value),style:{cursor:"pointer"}},null,8,["icon"])]),_:1},8,["modelValue","type","rules","error"]),l(vr,{modelValue:ae.value.email,"onUpdate:modelValue":pe[64]||(pe[64]=Ze=>ae.value.email=Ze),label:"Email (optional)",variant:"outlined",density:"compact",type:"email",class:"mb-2"},null,8,["modelValue"]),l(yR,{user:ae.value,"available-features":J.value,"onUpdate:user":pe[65]||(pe[65]=Ze=>ae.value=Ze)},null,8,["user","available-features"])]),_:1},8,["modelValue"])]),_:1}),l(Di,{class:"dialog-actions"},{default:u(()=>[l($a),l(Ta,{variant:"outlined",color:"grey-darken-1",onClick:pe[67]||(pe[67]=Ze=>M.value=!1),class:"dialog-cancel-btn"},{default:u(()=>[...pe[182]||(pe[182]=[O(" Cancel ",-1)])]),_:1}),l(Ta,{color:"primary",variant:"flat",disabled:!te.value,loading:Y.value,onClick:jo,class:"dialog-save-btn"},{default:u(()=>[...pe[183]||(pe[183]=[O(" Create ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(di,{modelValue:oe.value,"onUpdate:modelValue":pe[75]||(pe[75]=Ze=>oe.value=Ze),"max-width":"600",persistent:ce.value,scrollable:""},{default:u(()=>[_e.value&&_e.value.id&&Array.isArray(J.value)&&Array.isArray(mt.value)?(R(),ve(gn,{key:0,class:"dialog-card"},{default:u(()=>[l(rn,{class:"dialog-header"},{default:u(()=>[h("span",cFe,"Edit User: "+K(_e.value?.name),1),l($a),l(Ta,{icon:"",variant:"text",size:"small",onClick:pe[69]||(pe[69]=Ze=>oe.value=!1),disabled:ce.value,class:"dialog-close-btn"},{default:u(()=>[l(Hr,null,{default:u(()=>[...pe[184]||(pe[184]=[O("mdi-close",-1)])]),_:1})]),_:1},8,["disabled"])]),_:1}),l(Wn,{class:"dialog-card-text"},{default:u(()=>[l(ul,{ref_key:"editUserForm",ref:de,modelValue:j.value,"onUpdate:modelValue":pe[73]||(pe[73]=Ze=>j.value=Ze)},{default:u(()=>[l(vr,{modelValue:_e.value.name,"onUpdate:modelValue":pe[70]||(pe[70]=Ze=>_e.value.name=Ze),label:"User Name *",variant:"outlined",density:"compact",rules:[Ze=>!!Ze||"Name is required"],"validate-on":"blur",class:"mb-2"},null,8,["modelValue","rules"]),l(vr,{modelValue:_e.value.email,"onUpdate:modelValue":pe[71]||(pe[71]=Ze=>_e.value.email=Ze),label:"Email (optional)",variant:"outlined",density:"compact",type:"email","validate-on":"blur",class:"mb-2"},null,8,["modelValue"]),_e.value.isAdmin?ye("",!0):(R(),ve(yR,{key:0,user:_e.value,"available-features":J.value,"onUpdate:user":pe[72]||(pe[72]=Ze=>_e.value=Ze)},null,8,["user","available-features"]))]),_:1},8,["modelValue"])]),_:1}),l(Di,{class:"dialog-actions"},{default:u(()=>[l($a),l(Ta,{variant:"outlined",color:"grey-darken-1",onClick:pe[74]||(pe[74]=Ze=>oe.value=!1),disabled:ce.value,class:"dialog-cancel-btn"},{default:u(()=>[...pe[185]||(pe[185]=[O(" Cancel ",-1)])]),_:1},8,["disabled"]),l(Ta,{color:"primary",variant:"flat",disabled:!j.value,loading:ce.value,onClick:Nt,class:"dialog-save-btn"},{default:u(()=>[...pe[186]||(pe[186]=[O(" Save ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})):(R(),ve(gn,{key:1},{default:u(()=>[l(Wn,null,{default:u(()=>[h("div",dFe,[l(nn,{indeterminate:"",color:"primary"}),pe[187]||(pe[187]=h("p",{class:"mt-4"},"Loading user data...",-1))])]),_:1})]),_:1}))]),_:1},8,["modelValue","persistent"]),l(di,{modelValue:be.value,"onUpdate:modelValue":pe[79]||(pe[79]=Ze=>be.value=Ze),"max-width":"400"},{default:u(()=>[l(gn,null,{default:u(()=>[l(rn,null,{default:u(()=>[...pe[188]||(pe[188]=[O("Reset Passcode",-1)])]),_:1}),l(Wn,null,{default:u(()=>[h("p",AFe,"Enter a new passcode for "+K(Ce.value?.name),1),l(vr,{modelValue:Be.value,"onUpdate:modelValue":pe[77]||(pe[77]=Ze=>Be.value=Ze),label:"New Passcode *",variant:"outlined",density:"compact",type:Oe.value?"text":"password",rules:[Ze=>!!Ze||"Passcode is required",Ze=>Ze.length>=4||"Passcode must be at least 4 characters"]},{"append-inner":u(()=>[l(Hr,{icon:Oe.value?"mdi-eye-off":"mdi-eye",onClick:pe[76]||(pe[76]=Ze=>Oe.value=!Oe.value),style:{cursor:"pointer"}},null,8,["icon"])]),_:1},8,["modelValue","type","rules"])]),_:1}),l(Di,null,{default:u(()=>[l($a),l(Ta,{text:"",onClick:pe[78]||(pe[78]=Ze=>be.value=!1)},{default:u(()=>[...pe[189]||(pe[189]=[O("Cancel",-1)])]),_:1}),l(Ta,{color:"primary",disabled:!Be.value||Be.value.length<4,loading:Ee.value,onClick:vt},{default:u(()=>[...pe[190]||(pe[190]=[O("Reset",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(di,{modelValue:Me.value,"onUpdate:modelValue":pe[84]||(pe[84]=Ze=>Me.value=Ze),"max-width":"400"},{default:u(()=>[l(gn,null,{default:u(()=>[l(rn,null,{default:u(()=>[...pe[191]||(pe[191]=[O("View Passcode",-1)])]),_:1}),l(Wn,null,{default:u(()=>[h("p",fFe,"Passcode for "+K(ut.value?.name),1),dt.value?(R(),ve(jt,{key:0,type:"error",variant:"tonal",dismissible:"","onClick:close":pe[80]||(pe[80]=Ze=>dt.value=null),class:"mb-4"},{default:u(()=>[O(K(dt.value),1)]),_:1})):ye("",!0),l(vr,{modelValue:Ie.value,"onUpdate:modelValue":pe[82]||(pe[82]=Ze=>Ie.value=Ze),label:"Passcode",variant:"outlined",density:"compact",type:Ue.value?"text":"password",readonly:"",loading:rt.value},{"append-inner":u(()=>[l(Hr,{icon:Ue.value?"mdi-eye-off":"mdi-eye",onClick:pe[81]||(pe[81]=Ze=>Ue.value=!Ue.value),style:{cursor:"pointer"}},null,8,["icon"])]),_:1},8,["modelValue","type","loading"]),!rt.value&&!dt.value&&!Ie.value?(R(),ve(jt,{key:1,type:"info",variant:"tonal",density:"compact",class:"mt-2"},{default:u(()=>[...pe[192]||(pe[192]=[O(" Passcode cannot be viewed for security reasons. Passcodes are stored securely and cannot be retrieved. ",-1)])]),_:1})):ye("",!0)]),_:1}),l(Di,null,{default:u(()=>[l($a),l(Ta,{icon:"",size:"small",onClick:Kc,disabled:!Ie.value,class:"mr-2"},{default:u(()=>[l(Hr,null,{default:u(()=>[...pe[193]||(pe[193]=[O("mdi-content-copy",-1)])]),_:1})]),_:1},8,["disabled"]),l(Ta,{text:"",onClick:pe[83]||(pe[83]=Ze=>Me.value=!1)},{default:u(()=>[...pe[194]||(pe[194]=[O("Close",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(di,{modelValue:Ft.value,"onUpdate:modelValue":pe[87]||(pe[87]=Ze=>Ft.value=Ze),"max-width":"500"},{default:u(()=>[l(gn,null,{default:u(()=>[l(rn,{class:"text-error"},{default:u(()=>[l(Hr,{color:"error",class:"mr-2"},{default:u(()=>[...pe[195]||(pe[195]=[O("mdi-alert-circle",-1)])]),_:1}),pe[196]||(pe[196]=O(" Delete User ",-1))]),_:1}),l(Wn,null,{default:u(()=>[h("div",mFe,[h("p",vFe,[pe[197]||(pe[197]=O(" Are you sure you want to delete ",-1)),h("strong",null,K(it.value?.name),1),pe[198]||(pe[198]=O("? ",-1))]),l(jt,{type:"warning",variant:"tonal",class:"mb-2"},{default:u(()=>[...pe[199]||(pe[199]=[h("div",{class:"text-caption"},[h("strong",null,"This action cannot be undone!")],-1),h("div",{class:"text-caption mt-1"},[O(" This will permanently delete: "),h("ul",{class:"mt-1 mb-0"},[h("li",null,"User account"),h("li",null,"All user permissions"),h("li",null,"All active sessions"),h("li",null,"All subscription data"),h("li",null,"All usage tracking data")])],-1)])]),_:1}),ya(it.value)?(R(),ve(jt,{key:0,type:"error",variant:"tonal"},{default:u(()=>[...pe[200]||(pe[200]=[O(" You cannot delete your own account! ",-1)])]),_:1})):ye("",!0)]),l(vr,{modelValue:qe.value,"onUpdate:modelValue":pe[85]||(pe[85]=Ze=>qe.value=Ze),label:"Type 'DELETE' to confirm",variant:"outlined",density:"compact",rules:[Ze=>Ze==="DELETE"||"Please type DELETE to confirm"]},null,8,["modelValue","rules"])]),_:1}),l(Di,null,{default:u(()=>[l($a),l(Ta,{text:"",onClick:pe[86]||(pe[86]=Ze=>{Ft.value=!1,qe.value=""})},{default:u(()=>[...pe[201]||(pe[201]=[O("Cancel",-1)])]),_:1}),l(Ta,{color:"error",disabled:qe.value!=="DELETE"||ya(it.value),loading:yt.value,onClick:Ha},{default:u(()=>[...pe[202]||(pe[202]=[O(" Delete User ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(es,{modelValue:f.value,"onUpdate:modelValue":pe[88]||(pe[88]=Ze=>f.value=Ze),class:"elevation-24",color:"success"},{default:u(()=>[O(K(m.value),1)]),_:1},8,["modelValue"]),l(es,{modelValue:v.value,"onUpdate:modelValue":pe[89]||(pe[89]=Ze=>v.value=Ze),timeout:2e3,class:"elevation-24",color:"failure"},{default:u(()=>[O(K(p.value),1)]),_:1},8,["modelValue"])],64))]),_:1})}}},pFe=qt(hFe,[["__scopeId","data-v-43948400"]]);var s$=1252,gFe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],FT={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},PT=function(e){gFe.indexOf(e)!=-1&&(s$=FT[0]=e)};function yFe(){PT(1252)}var Il=function(e){PT(e)};function o$(){Il(1200),yFe()}function _R(e){for(var t=[],n=0,a=e.length;n<a;++n)t[n]=e.charCodeAt(n);return t}function _Fe(e){for(var t=[],n=0;n<e.length>>1;++n)t[n]=String.fromCharCode(e.charCodeAt(2*n)+(e.charCodeAt(2*n+1)<<8));return t.join("")}function i$(e){for(var t=[],n=0;n<e.length>>1;++n)t[n]=String.fromCharCode(e.charCodeAt(2*n+1)+(e.charCodeAt(2*n)<<8));return t.join("")}var Tp=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1);return t==255&&n==254?_Fe(e.slice(2)):t==254&&n==255?i$(e.slice(2)):t==65279?e.slice(1):e},Cy=function(t){return String.fromCharCode(t)},wR=function(t){return String.fromCharCode(t)},N0,Cd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function bR(e){for(var t="",n=0,a=0,r=0,s=0,o=0,i=0,c=0,A=0;A<e.length;)n=e.charCodeAt(A++),s=n>>2,a=e.charCodeAt(A++),o=(n&3)<<4|a>>4,r=e.charCodeAt(A++),i=(a&15)<<2|r>>6,c=r&63,isNaN(a)?i=c=64:isNaN(r)&&(c=64),t+=Cd.charAt(s)+Cd.charAt(o)+Cd.charAt(i)+Cd.charAt(c);return t}function Ti(e){var t="",n=0,a=0,r=0,s=0,o=0,i=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var A=0;A<e.length;)s=Cd.indexOf(e.charAt(A++)),o=Cd.indexOf(e.charAt(A++)),n=s<<2|o>>4,t+=String.fromCharCode(n),i=Cd.indexOf(e.charAt(A++)),a=(o&15)<<4|i>>2,i!==64&&(t+=String.fromCharCode(a)),c=Cd.indexOf(e.charAt(A++)),r=(i&3)<<6|c,c!==64&&(t+=String.fromCharCode(r));return t}var pa=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),Kf=(function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,n){return n?new Buffer(t,n):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}})();function jd(e){return pa?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function xR(e){return pa?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Sl=function(t){return pa?Kf(t,"binary"):t.split("").map(function(n){return n.charCodeAt(0)&255})};function Wf(e){if(Array.isArray(e))return e.map(function(a){return String.fromCharCode(a)}).join("");for(var t=[],n=0;n<e.length;++n)t[n]=String.fromCharCode(e[n]);return t.join("")}function DT(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return DT(new Uint8Array(e));for(var t=new Array(e.length),n=0;n<e.length;++n)t[n]=e[n];return t}var _d=pa?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:Kf(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,n=0;for(t=0;t<e.length;++t)n+=e[t].length;var a=new Uint8Array(n),r=0;for(t=0,n=0;t<e.length;n+=r,++t)if(r=e[t].length,e[t]instanceof Uint8Array)a.set(e[t],n);else{if(typeof e[t]=="string")throw"wtf";a.set(new Uint8Array(e[t]),n)}return a}return[].concat.apply([],e.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function wFe(e){for(var t=[],n=0,a=e.length+250,r=jd(e.length+255),s=0;s<e.length;++s){var o=e.charCodeAt(s);if(o<128)r[n++]=o;else if(o<2048)r[n++]=192|o>>6&31,r[n++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var i=e.charCodeAt(++s)&1023;r[n++]=240|o>>8&7,r[n++]=128|o>>2&63,r[n++]=128|i>>6&15|(o&3)<<4,r[n++]=128|i&63}else r[n++]=224|o>>12&15,r[n++]=128|o>>6&63,r[n++]=128|o&63;n>a&&(t.push(r.slice(0,n)),n=0,r=jd(65535),a=65530)}return t.push(r.slice(0,n)),_d(t)}var Ho=/\u0000/g,Ip=/[\u0001-\u0006]/g;function _v(e){for(var t="",n=e.length-1;n>=0;)t+=e.charAt(n--);return t}function Fl(e,t){var n=""+e;return n.length>=t?n:Nr("0",t-n.length)+n}function UT(e,t){var n=""+e;return n.length>=t?n:Nr(" ",t-n.length)+n}function f2(e,t){var n=""+e;return n.length>=t?n:n+Nr(" ",t-n.length)}function bFe(e,t){var n=""+Math.round(e);return n.length>=t?n:Nr("0",t-n.length)+n}function xFe(e,t){var n=""+e;return n.length>=t?n:Nr("0",t-n.length)+n}var CR=Math.pow(2,32);function Hm(e,t){if(e>CR||e<-CR)return bFe(e,t);var n=Math.round(e);return xFe(n,t)}function m2(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var SR=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],PC=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function CFe(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var ea={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},ER={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},SFe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function v2(e,t,n){for(var a=e<0?-1:1,r=e*a,s=0,o=1,i=0,c=1,A=0,d=0,f=Math.floor(r);A<t&&(f=Math.floor(r),i=f*o+s,d=f*A+c,!(r-f<5e-8));)r=1/(r-f),s=o,o=i,c=A,A=d;if(d>t&&(A>t?(d=c,i=s):(d=A,i=o)),!n)return[0,a*i,d];var m=Math.floor(a*i/d);return[m,a*i-m*d,d]}function qA(e,t,n){if(e>2958465||e<0)return null;var a=e|0,r=Math.floor(86400*(e-a)),s=0,o=[],i={D:a,T:r,u:86400*(e-a)-r,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(i.u)<1e-6&&(i.u=0),t&&t.date1904&&(a+=1462),i.u>.9999&&(i.u=0,++r==86400&&(i.T=r=0,++a,++i.D)),a===60)o=n?[1317,10,29]:[1900,2,29],s=3;else if(a===0)o=n?[1317,8,29]:[1900,1,0],s=6;else{a>60&&--a;var c=new Date(1900,0,1);c.setDate(c.getDate()+a-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),a<60&&(s=(s+6)%7),n&&(s=FFe(c,o))}return i.y=o[0],i.m=o[1],i.d=o[2],i.S=r%60,r=Math.floor(r/60),i.M=r%60,r=Math.floor(r/60),i.H=r,i.q=s,i}var l$=new Date(1899,11,31,0,0,0),EFe=l$.getTime(),BFe=new Date(1900,2,1,0,0,0);function u$(e,t){var n=e.getTime();return t?n-=1461*24*60*60*1e3:e>=BFe&&(n+=1440*60*1e3),(n-(EFe+(e.getTimezoneOffset()-l$.getTimezoneOffset())*6e4))/(1440*60*1e3)}function RT(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function kFe(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function TFe(e){var t=e<0?12:11,n=RT(e.toFixed(12));return n.length<=t||(n=e.toPrecision(10),n.length<=t)?n:e.toExponential(5)}function IFe(e){var t=RT(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function V0(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),n;return t>=-4&&t<=-1?n=e.toPrecision(10+t):Math.abs(t)<=9?n=TFe(e):t===10?n=e.toFixed(10).substr(0,12):n=IFe(e),RT(kFe(n.toUpperCase()))}function Cf(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):V0(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return tl(14,u$(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function FFe(e,t){t[0]-=581;var n=e.getDay();return e<60&&(n=(n+6)%7),n}function PFe(e,t,n,a){var r="",s=0,o=0,i=n.y,c,A=0;switch(e){case 98:i=n.y+543;case 121:switch(t.length){case 1:case 2:c=i%100,A=2;break;default:c=i%1e4,A=4;break}break;case 109:switch(t.length){case 1:case 2:c=n.m,A=t.length;break;case 3:return PC[n.m-1][1];case 5:return PC[n.m-1][0];default:return PC[n.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=n.d,A=t.length;break;case 3:return SR[n.q][0];default:return SR[n.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(n.H+11)%12,A=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=n.H,A=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=n.M,A=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return n.u===0&&(t=="s"||t=="ss")?Fl(n.S,t.length):(a>=2?o=a===3?1e3:100:o=a===1?10:1,s=Math.round(o*(n.S+n.u)),s>=60*o&&(s=0),t==="s"?s===0?"0":""+s/o:(r=Fl(s,2+a),t==="ss"?r.substr(0,2):"."+r.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=n.D*24+n.H;break;case"[m]":case"[mm]":c=(n.D*24+n.H)*60+n.M;break;case"[s]":case"[ss]":c=((n.D*24+n.H)*60+n.M)*60+Math.round(n.S+n.u);break;default:throw"bad abstime format: "+t}A=t.length===3?1:2;break;case 101:c=i,A=1;break}var d=A>0?Fl(c,A):"";return d}function Sd(e){var t=3;if(e.length<=t)return e;for(var n=e.length%t,a=e.substr(0,n);n!=e.length;n+=t)a+=(a.length>0?",":"")+e.substr(n,t);return a}var c$=/%/g;function DFe(e,t,n){var a=t.replace(c$,""),r=t.length-a.length;return Cc(e,a,n*Math.pow(10,2*r))+Nr("%",r)}function UFe(e,t,n){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return Cc(e,t.substr(0,a),n/Math.pow(10,3*(t.length-a)))}function d$(e,t){var n,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+d$(e,-t);var r=e.indexOf(".");r===-1&&(r=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%r;if(s<0&&(s+=r),n=(t/Math.pow(10,s)).toPrecision(a+1+(r+s)%r),n.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(o-n.length+s):n+="E+"+(o-s);n.substr(0,2)==="0.";)n=n.charAt(0)+n.substr(2,r)+"."+n.substr(2+r),n=n.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(i,c,A,d){return c+A+d.substr(0,(r+s)%r)+"."+d.substr(s)+"E"})}else n=t.toExponential(a);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var A$=/# (\?+)( ?)\/( ?)(\d+)/;function RFe(e,t,n){var a=parseInt(e[4],10),r=Math.round(t*a),s=Math.floor(r/a),o=r-s*a,i=a;return n+(s===0?"":""+s)+" "+(o===0?Nr(" ",e[1].length+1+e[4].length):UT(o,e[1].length)+e[2]+"/"+e[3]+Fl(i,e[4].length))}function NFe(e,t,n){return n+(t===0?"":""+t)+Nr(" ",e[1].length+2+e[4].length)}var f$=/^#*0*\.([0#]+)/,m$=/\).*[0#]/,v$=/\(###\) ###\\?-####/;function No(e){for(var t="",n,a=0;a!=e.length;++a)switch(n=e.charCodeAt(a)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(n)}return t}function BR(e,t){var n=Math.pow(10,t);return""+Math.round(e*n)/n}function kR(e,t){var n=e-Math.floor(e),a=Math.pow(10,t);return t<(""+Math.round(n*a)).length?0:Math.round(n*a)}function VFe(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function LFe(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Qi(e,t,n){if(e.charCodeAt(0)===40&&!t.match(m$)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?Qi("n",a,n):"("+Qi("n",a,-n)+")"}if(t.charCodeAt(t.length-1)===44)return UFe(e,t,n);if(t.indexOf("%")!==-1)return DFe(e,t,n);if(t.indexOf("E")!==-1)return d$(t,n);if(t.charCodeAt(0)===36)return"$"+Qi(e,t.substr(t.charAt(1)==" "?2:1),n);var r,s,o,i,c=Math.abs(n),A=n<0?"-":"";if(t.match(/^00+$/))return A+Hm(c,t.length);if(t.match(/^[#?]+$/))return r=Hm(n,0),r==="0"&&(r=""),r.length>t.length?r:No(t.substr(0,t.length-r.length))+r;if(s=t.match(A$))return RFe(s,c,A);if(t.match(/^#+0+$/))return A+Hm(c,t.length-t.indexOf("0"));if(s=t.match(f$))return r=BR(n,s[1].length).replace(/^([^\.]+)$/,"$1."+No(s[1])).replace(/\.$/,"."+No(s[1])).replace(/\.(\d*)$/,function(p,g){return"."+g+Nr("0",No(s[1]).length-g.length)}),t.indexOf("0.")!==-1?r:r.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return A+BR(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return A+Sd(Hm(c,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+Qi(e,t,-n):Sd(""+(Math.floor(n)+VFe(n,s[1].length)))+"."+Fl(kR(n,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return Qi(e,t.replace(/^#,#*,/,""),n);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return r=_v(Qi(e,t.replace(/[\\-]/g,""),n)),o=0,_v(_v(t.replace(/\\/g,"")).replace(/[0#]/g,function(p){return o<r.length?r.charAt(o++):p==="0"?"0":""}));if(t.match(v$))return r=Qi(e,"##########",n),"("+r.substr(0,3)+") "+r.substr(3,3)+"-"+r.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),i=v2(c,Math.pow(10,o)-1,!1),r=""+A,d=Cc("n",s[1],i[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),r+=d+s[2]+"/"+s[3],d=f2(i[2],o),d.length<s[4].length&&(d=No(s[4].substr(s[4].length-d.length))+d),r+=d,r;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),i=v2(c,Math.pow(10,o)-1,!0),A+(i[0]||(i[1]?"":"0"))+" "+(i[1]?UT(i[1],o)+s[2]+"/"+s[3]+f2(i[2],o):Nr(" ",2*o+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return r=Hm(n,0),t.length<=r.length?r:No(t.substr(0,t.length-r.length))+r;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){r=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=r.indexOf(".");var f=t.indexOf(".")-o,m=t.length-r.length-f;return No(t.substr(0,f)+r+t.substr(t.length-m))}if(s=t.match(/^00,000\.([#0]*0)$/))return o=kR(n,s[1].length),n<0?"-"+Qi(e,t,-n):Sd(LFe(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(p){return"00,"+(p.length<3?Fl(0,3-p.length):"")+p})+"."+Fl(o,s[1].length);switch(t){case"###,##0.00":return Qi(e,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var v=Sd(Hm(c,0));return v!=="0"?A+v:"";case"###,###.00":return Qi(e,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return Qi(e,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function MFe(e,t,n){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return Cc(e,t.substr(0,a),n/Math.pow(10,3*(t.length-a)))}function OFe(e,t,n){var a=t.replace(c$,""),r=t.length-a.length;return Cc(e,a,n*Math.pow(10,2*r))+Nr("%",r)}function h$(e,t){var n,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+h$(e,-t);var r=e.indexOf(".");r===-1&&(r=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%r;if(s<0&&(s+=r),n=(t/Math.pow(10,s)).toPrecision(a+1+(r+s)%r),!n.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(o-n.length+s):n+="E+"+(o-s),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(i,c,A,d){return c+A+d.substr(0,(r+s)%r)+"."+d.substr(s)+"E"})}else n=t.toExponential(a);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function hu(e,t,n){if(e.charCodeAt(0)===40&&!t.match(m$)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?hu("n",a,n):"("+hu("n",a,-n)+")"}if(t.charCodeAt(t.length-1)===44)return MFe(e,t,n);if(t.indexOf("%")!==-1)return OFe(e,t,n);if(t.indexOf("E")!==-1)return h$(t,n);if(t.charCodeAt(0)===36)return"$"+hu(e,t.substr(t.charAt(1)==" "?2:1),n);var r,s,o,i,c=Math.abs(n),A=n<0?"-":"";if(t.match(/^00+$/))return A+Fl(c,t.length);if(t.match(/^[#?]+$/))return r=""+n,n===0&&(r=""),r.length>t.length?r:No(t.substr(0,t.length-r.length))+r;if(s=t.match(A$))return NFe(s,c,A);if(t.match(/^#+0+$/))return A+Fl(c,t.length-t.indexOf("0"));if(s=t.match(f$))return r=(""+n).replace(/^([^\.]+)$/,"$1."+No(s[1])).replace(/\.$/,"."+No(s[1])),r=r.replace(/\.(\d*)$/,function(p,g){return"."+g+Nr("0",No(s[1]).length-g.length)}),t.indexOf("0.")!==-1?r:r.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return A+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return A+Sd(""+c);if(s=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+hu(e,t,-n):Sd(""+n)+"."+Nr("0",s[1].length);if(s=t.match(/^#,#*,#0/))return hu(e,t.replace(/^#,#*,/,""),n);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return r=_v(hu(e,t.replace(/[\\-]/g,""),n)),o=0,_v(_v(t.replace(/\\/g,"")).replace(/[0#]/g,function(p){return o<r.length?r.charAt(o++):p==="0"?"0":""}));if(t.match(v$))return r=hu(e,"##########",n),"("+r.substr(0,3)+") "+r.substr(3,3)+"-"+r.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),i=v2(c,Math.pow(10,o)-1,!1),r=""+A,d=Cc("n",s[1],i[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),r+=d+s[2]+"/"+s[3],d=f2(i[2],o),d.length<s[4].length&&(d=No(s[4].substr(s[4].length-d.length))+d),r+=d,r;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),i=v2(c,Math.pow(10,o)-1,!0),A+(i[0]||(i[1]?"":"0"))+" "+(i[1]?UT(i[1],o)+s[2]+"/"+s[3]+f2(i[2],o):Nr(" ",2*o+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return r=""+n,t.length<=r.length?r:No(t.substr(0,t.length-r.length))+r;if(s=t.match(/^([#0]+)\.([#0]+)$/)){r=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=r.indexOf(".");var f=t.indexOf(".")-o,m=t.length-r.length-f;return No(t.substr(0,f)+r+t.substr(t.length-m))}if(s=t.match(/^00,000\.([#0]*0)$/))return n<0?"-"+hu(e,t,-n):Sd(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(p){return"00,"+(p.length<3?Fl(0,3-p.length):"")+p})+"."+Fl(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var v=Sd(""+c);return v!=="0"?A+v:"";default:if(t.match(/\.[0#?]*$/))return hu(e,t.slice(0,t.lastIndexOf(".")),n)+No(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Cc(e,t,n){return(n|0)===n?hu(e,t,n):Qi(e,t,n)}function HFe(e){for(var t=[],n=!1,a=0,r=0;a<e.length;++a)switch(e.charCodeAt(a)){case 34:n=!n;break;case 95:case 42:case 92:++a;break;case 59:t[t.length]=e.substr(r,a-r),r=a+1}if(t[t.length]=e.substr(r),n===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var p$=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function yh(e){for(var t=0,n="",a="";t<e.length;)switch(n=e.charAt(t)){case"G":m2(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(a=n;e.charAt(t++)!=="]"&&t<e.length;)a+=e.charAt(t);if(a.match(p$))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(n=e.charAt(++t))>-1||n=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===n;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function $Fe(e,t,n,a){for(var r=[],s="",o=0,i="",c="t",A,d,f,m="H";o<e.length;)switch(i=e.charAt(o)){case"G":if(!m2(e,o))throw new Error("unrecognized character "+i+" in "+e);r[r.length]={t:"G",v:"General"},o+=7;break;case'"':for(s="";(f=e.charCodeAt(++o))!==34&&o<e.length;)s+=String.fromCharCode(f);r[r.length]={t:"t",v:s},++o;break;case"\\":var v=e.charAt(++o),p=v==="("||v===")"?v:"t";r[r.length]={t:p,v},++o;break;case"_":r[r.length]={t:"t",v:" "},o+=2;break;case"@":r[r.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(A==null&&(A=qA(t,n,e.charAt(o+1)==="2"),A==null))return"";r[r.length]={t:"X",v:e.substr(o,2)},c=i,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":i=i.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||A==null&&(A=qA(t,n),A==null))return"";for(s=i;++o<e.length&&e.charAt(o).toLowerCase()===i;)s+=i;i==="m"&&c.toLowerCase()==="h"&&(i="M"),i==="h"&&(i=m),r[r.length]={t:i,v:s},c=i;break;case"A":case"a":case"":var g={t:i,v:i};if(A==null&&(A=qA(t,n)),e.substr(o,3).toUpperCase()==="A/P"?(A!=null&&(g.v=A.H>=12?"P":"A"),g.t="T",m="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(A!=null&&(g.v=A.H>=12?"PM":"AM"),g.t="T",o+=5,m="h"):e.substr(o,5).toUpperCase()==="/"?(A!=null&&(g.v=A.H>=12?"":""),g.t="T",o+=5,m="h"):(g.t="t",++o),A==null&&g.t==="T")return"";r[r.length]=g,c=i;break;case"[":for(s=i;e.charAt(o++)!=="]"&&o<e.length;)s+=e.charAt(o);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(p$)){if(A==null&&(A=qA(t,n),A==null))return"";r[r.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",yh(e)||(r[r.length]={t:"t",v:s}));break;case".":if(A!=null){for(s=i;++o<e.length&&(i=e.charAt(o))==="0";)s+=i;r[r.length]={t:"s",v:s};break}case"0":case"#":for(s=i;++o<e.length&&"0#?.,E+-%".indexOf(i=e.charAt(o))>-1;)s+=i;r[r.length]={t:"n",v:s};break;case"?":for(s=i;e.charAt(++o)===i;)s+=i;r[r.length]={t:i,v:s},c=i;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":r[r.length]={t:a===1?"t":i,v:i},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=i;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)s+=e.charAt(o);r[r.length]={t:"D",v:s};break;case" ":r[r.length]={t:i,v:i},++o;break;case"$":r[r.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(i)===-1)throw new Error("unrecognized character "+i+" in "+e);r[r.length]={t:"t",v:i},++o;break}var y=0,w=0,b;for(o=r.length-1,c="t";o>=0;--o)switch(r[o].t){case"h":case"H":r[o].t=m,c="h",y<1&&(y=1);break;case"s":(b=r[o].v.match(/\.0+$/))&&(w=Math.max(w,b[0].length-1)),y<3&&(y=3);case"d":case"y":case"M":case"e":c=r[o].t;break;case"m":c==="s"&&(r[o].t="M",y<2&&(y=2));break;case"X":break;case"Z":y<1&&r[o].v.match(/[Hh]/)&&(y=1),y<2&&r[o].v.match(/[Mm]/)&&(y=2),y<3&&r[o].v.match(/[Ss]/)&&(y=3)}switch(y){case 0:break;case 1:A.u>=.5&&(A.u=0,++A.S),A.S>=60&&(A.S=0,++A.M),A.M>=60&&(A.M=0,++A.H);break;case 2:A.u>=.5&&(A.u=0,++A.S),A.S>=60&&(A.S=0,++A.M);break}var x="",T;for(o=0;o<r.length;++o)switch(r[o].t){case"t":case"T":case" ":case"D":break;case"X":r[o].v="",r[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":r[o].v=PFe(r[o].t.charCodeAt(0),r[o].v,A,w),r[o].t="t";break;case"n":case"?":for(T=o+1;r[T]!=null&&((i=r[T].t)==="?"||i==="D"||(i===" "||i==="t")&&r[T+1]!=null&&(r[T+1].t==="?"||r[T+1].t==="t"&&r[T+1].v==="/")||r[o].t==="("&&(i===" "||i==="n"||i===")")||i==="t"&&(r[T].v==="/"||r[T].v===" "&&r[T+1]!=null&&r[T+1].t=="?"));)r[o].v+=r[T].v,r[T]={v:"",t:";"},++T;x+=r[o].v,o=T-1;break;case"G":r[o].t="t",r[o].v=Cf(t,n);break}var D="",k,S;if(x.length>0){x.charCodeAt(0)==40?(k=t<0&&x.charCodeAt(0)===45?-t:t,S=Cc("n",x,k)):(k=t<0&&a>1?-t:t,S=Cc("n",x,k),k<0&&r[0]&&r[0].t=="t"&&(S=S.substr(1),r[0].v="-"+r[0].v)),T=S.length-1;var E=r.length;for(o=0;o<r.length;++o)if(r[o]!=null&&r[o].t!="t"&&r[o].v.indexOf(".")>-1){E=o;break}var C=r.length;if(E===r.length&&S.indexOf("E")===-1){for(o=r.length-1;o>=0;--o)r[o]==null||"n?".indexOf(r[o].t)===-1||(T>=r[o].v.length-1?(T-=r[o].v.length,r[o].v=S.substr(T+1,r[o].v.length)):T<0?r[o].v="":(r[o].v=S.substr(0,T+1),T=-1),r[o].t="t",C=o);T>=0&&C<r.length&&(r[C].v=S.substr(0,T+1)+r[C].v)}else if(E!==r.length&&S.indexOf("E")===-1){for(T=S.indexOf(".")-1,o=E;o>=0;--o)if(!(r[o]==null||"n?".indexOf(r[o].t)===-1)){for(d=r[o].v.indexOf(".")>-1&&o===E?r[o].v.indexOf(".")-1:r[o].v.length-1,D=r[o].v.substr(d+1);d>=0;--d)T>=0&&(r[o].v.charAt(d)==="0"||r[o].v.charAt(d)==="#")&&(D=S.charAt(T--)+D);r[o].v=D,r[o].t="t",C=o}for(T>=0&&C<r.length&&(r[C].v=S.substr(0,T+1)+r[C].v),T=S.indexOf(".")+1,o=E;o<r.length;++o)if(!(r[o]==null||"n?(".indexOf(r[o].t)===-1&&o!==E)){for(d=r[o].v.indexOf(".")>-1&&o===E?r[o].v.indexOf(".")+1:0,D=r[o].v.substr(0,d);d<r[o].v.length;++d)T<S.length&&(D+=S.charAt(T++));r[o].v=D,r[o].t="t",C=o}}}for(o=0;o<r.length;++o)r[o]!=null&&"n?".indexOf(r[o].t)>-1&&(k=a>1&&t<0&&o>0&&r[o-1].v==="-"?-t:t,r[o].v=Cc(r[o].t,r[o].v,k),r[o].t="t");var U="";for(o=0;o!==r.length;++o)r[o]!=null&&(U+=r[o].v);return U}var TR=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function IR(e,t){if(t==null)return!1;var n=parseFloat(t[2]);switch(t[1]){case"=":if(e==n)return!0;break;case">":if(e>n)return!0;break;case"<":if(e<n)return!0;break;case"<>":if(e!=n)return!0;break;case">=":if(e>=n)return!0;break;case"<=":if(e<=n)return!0;break}return!1}function QFe(e,t){var n=HFe(e),a=n.length,r=n[a-1].indexOf("@");if(a<4&&r>-1&&--a,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if(typeof t!="number")return[4,n.length===4||r>-1?n[n.length-1]:"@"];switch(n.length){case 1:n=r>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=r>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=r>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"];break}var s=t>0?n[0]:t<0?n[1]:n[2];if(n[0].indexOf("[")===-1&&n[1].indexOf("[")===-1)return[a,s];if(n[0].match(/\[[=<>]/)!=null||n[1].match(/\[[=<>]/)!=null){var o=n[0].match(TR),i=n[1].match(TR);return IR(t,o)?[a,n[0]]:IR(t,i)?[a,n[1]]:[a,n[o!=null&&i!=null?2:1]]}return[a,s]}function tl(e,t,n){n==null&&(n={});var a="";switch(typeof e){case"string":e=="m/d/yy"&&n.dateNF?a=n.dateNF:a=e;break;case"number":e==14&&n.dateNF?a=n.dateNF:a=(n.table!=null?n.table:ea)[e],a==null&&(a=n.table&&n.table[ER[e]]||ea[ER[e]]),a==null&&(a=SFe[e]||"General");break}if(m2(a,0))return Cf(t,n);t instanceof Date&&(t=u$(t,n.date1904));var r=QFe(a,t);if(m2(r[1]))return Cf(t,n);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return $Fe(r[1],t,n,r[0])}function uf(e,t){if(typeof t!="number"){t=+t||-1;for(var n=0;n<392;++n){if(ea[n]==null){t<0&&(t=n);continue}if(ea[n]==e){t=n;break}}t<0&&(t=391)}return ea[t]=e,t}function g$(){ea=CFe()}var GFe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},y$=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function zFe(e){var t=typeof e=="number"?ea[e]:e;return t=t.replace(y$,"(\\d+)"),new RegExp("^"+t+"$")}function KFe(e,t,n){var a=-1,r=-1,s=-1,o=-1,i=-1,c=-1;(t.match(y$)||[]).forEach(function(f,m){var v=parseInt(n[m+1],10);switch(f.toLowerCase().charAt(0)){case"y":a=v;break;case"d":s=v;break;case"h":o=v;break;case"s":c=v;break;case"m":o>=0?i=v:r=v;break}}),c>=0&&i==-1&&r>=0&&(i=r,r=-1);var A=(""+(a>=0?a:new Date().getFullYear())).slice(-4)+"-"+("00"+(r>=1?r:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);A.length==7&&(A="0"+A),A.length==8&&(A="20"+A);var d=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&i==-1&&c==-1?A:a==-1&&r==-1&&s==-1?d:A+"T"+d}var WFe=(function(){var e={};e.version="1.2.0";function t(){for(var S=0,E=new Array(256),C=0;C!=256;++C)S=C,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,E[C]=S;return typeof Int32Array<"u"?new Int32Array(E):E}var n=t();function a(S){var E=0,C=0,U=0,F=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(U=0;U!=256;++U)F[U]=S[U];for(U=0;U!=256;++U)for(C=S[U],E=256+U;E<4096;E+=256)C=F[E]=C>>>8^S[C&255];var L=[];for(U=1;U!=16;++U)L[U-1]=typeof Int32Array<"u"?F.subarray(U*256,U*256+256):F.slice(U*256,U*256+256);return L}var r=a(n),s=r[0],o=r[1],i=r[2],c=r[3],A=r[4],d=r[5],f=r[6],m=r[7],v=r[8],p=r[9],g=r[10],y=r[11],w=r[12],b=r[13],x=r[14];function T(S,E){for(var C=E^-1,U=0,F=S.length;U<F;)C=C>>>8^n[(C^S.charCodeAt(U++))&255];return~C}function D(S,E){for(var C=E^-1,U=S.length-15,F=0;F<U;)C=x[S[F++]^C&255]^b[S[F++]^C>>8&255]^w[S[F++]^C>>16&255]^y[S[F++]^C>>>24]^g[S[F++]]^p[S[F++]]^v[S[F++]]^m[S[F++]]^f[S[F++]]^d[S[F++]]^A[S[F++]]^c[S[F++]]^i[S[F++]]^o[S[F++]]^s[S[F++]]^n[S[F++]];for(U+=15;F<U;)C=C>>>8^n[(C^S[F++])&255];return~C}function k(S,E){for(var C=E^-1,U=0,F=S.length,L=0,H=0;U<F;)L=S.charCodeAt(U++),L<128?C=C>>>8^n[(C^L)&255]:L<2048?(C=C>>>8^n[(C^(192|L>>6&31))&255],C=C>>>8^n[(C^(128|L&63))&255]):L>=55296&&L<57344?(L=(L&1023)+64,H=S.charCodeAt(U++)&1023,C=C>>>8^n[(C^(240|L>>8&7))&255],C=C>>>8^n[(C^(128|L>>2&63))&255],C=C>>>8^n[(C^(128|H>>6&15|(L&3)<<4))&255],C=C>>>8^n[(C^(128|H&63))&255]):(C=C>>>8^n[(C^(224|L>>12&15))&255],C=C>>>8^n[(C^(128|L>>6&63))&255],C=C>>>8^n[(C^(128|L&63))&255]);return~C}return e.table=n,e.bstr=T,e.buf=D,e.str=k,e})(),ba=(function(){var t={};t.version="1.2.1";function n(ke,ze){for(var Fe=ke.split("/"),Le=ze.split("/"),Ge=0,he=0,se=Math.min(Fe.length,Le.length);Ge<se;++Ge){if(he=Fe[Ge].length-Le[Ge].length)return he;if(Fe[Ge]!=Le[Ge])return Fe[Ge]<Le[Ge]?-1:1}return Fe.length-Le.length}function a(ke){if(ke.charAt(ke.length-1)=="/")return ke.slice(0,-1).indexOf("/")===-1?ke:a(ke.slice(0,-1));var ze=ke.lastIndexOf("/");return ze===-1?ke:ke.slice(0,ze+1)}function r(ke){if(ke.charAt(ke.length-1)=="/")return r(ke.slice(0,-1));var ze=ke.lastIndexOf("/");return ze===-1?ke:ke.slice(ze+1)}function s(ke,ze){typeof ze=="string"&&(ze=new Date(ze));var Fe=ze.getHours();Fe=Fe<<6|ze.getMinutes(),Fe=Fe<<5|ze.getSeconds()>>>1,ke.write_shift(2,Fe);var Le=ze.getFullYear()-1980;Le=Le<<4|ze.getMonth()+1,Le=Le<<5|ze.getDate(),ke.write_shift(2,Le)}function o(ke){var ze=ke.read_shift(2)&65535,Fe=ke.read_shift(2)&65535,Le=new Date,Ge=Fe&31;Fe>>>=5;var he=Fe&15;Fe>>>=4,Le.setMilliseconds(0),Le.setFullYear(Fe+1980),Le.setMonth(he-1),Le.setDate(Ge);var se=ze&31;ze>>>=5;var ge=ze&63;return ze>>>=6,Le.setHours(ze),Le.setMinutes(ge),Le.setSeconds(se<<1),Le}function i(ke){Os(ke,0);for(var ze={},Fe=0;ke.l<=ke.length-4;){var Le=ke.read_shift(2),Ge=ke.read_shift(2),he=ke.l+Ge,se={};switch(Le){case 21589:Fe=ke.read_shift(1),Fe&1&&(se.mtime=ke.read_shift(4)),Ge>5&&(Fe&2&&(se.atime=ke.read_shift(4)),Fe&4&&(se.ctime=ke.read_shift(4))),se.mtime&&(se.mt=new Date(se.mtime*1e3));break}ke.l=he,ze[Le]=se}return ze}var c;function A(){return c||(c={})}function d(ke,ze){if(ke[0]==80&&ke[1]==75)return at(ke,ze);if((ke[0]|32)==109&&(ke[1]|32)==105)return Wt(ke,ze);if(ke.length<512)throw new Error("CFB file size "+ke.length+" < 512");var Fe=3,Le=512,Ge=0,he=0,se=0,ge=0,xe=0,He=[],tt=ke.slice(0,512);Os(tt,0);var nt=f(tt);switch(Fe=nt[0],Fe){case 3:Le=512;break;case 4:Le=4096;break;case 0:if(nt[1]==0)return at(ke,ze);default:throw new Error("Major Version: Expected 3 or 4 saw "+Fe)}Le!==512&&(tt=ke.slice(0,Le),Os(tt,28));var et=ke.slice(0,Le);m(tt,Fe);var st=tt.read_shift(4,"i");if(Fe===3&&st!==0)throw new Error("# Directory Sectors: Expected 0 saw "+st);tt.l+=4,se=tt.read_shift(4,"i"),tt.l+=4,tt.chk("00100000","Mini Stream Cutoff Size: "),ge=tt.read_shift(4,"i"),Ge=tt.read_shift(4,"i"),xe=tt.read_shift(4,"i"),he=tt.read_shift(4,"i");for(var wt=-1,It=0;It<109&&(wt=tt.read_shift(4,"i"),!(wt<0));++It)He[It]=wt;var tn=v(ke,Le);y(xe,he,tn,Le,He);var kn=b(tn,se,He,Le);kn[se].name="!Directory",Ge>0&&ge!==H&&(kn[ge].name="!MiniFAT"),kn[He[0]].name="!FAT",kn.fat_addrs=He,kn.ssz=Le;var hn={},Sn=[],Pa=[],Er=[];x(se,kn,tn,Sn,Ge,hn,Pa,ge),p(Pa,Er,Sn),Sn.shift();var Zr={FileIndex:Pa,FullPaths:Er};return ze&&ze.raw&&(Zr.raw={header:et,sectors:tn}),Zr}function f(ke){if(ke[ke.l]==80&&ke[ke.l+1]==75)return[0,0];ke.chk(ue,"Header Signature: "),ke.l+=16;var ze=ke.read_shift(2,"u");return[ke.read_shift(2,"u"),ze]}function m(ke,ze){var Fe=9;switch(ke.l+=2,Fe=ke.read_shift(2)){case 9:if(ze!=3)throw new Error("Sector Shift: Expected 9 saw "+Fe);break;case 12:if(ze!=4)throw new Error("Sector Shift: Expected 12 saw "+Fe);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Fe)}ke.chk("0600","Mini Sector Shift: "),ke.chk("000000000000","Reserved: ")}function v(ke,ze){for(var Fe=Math.ceil(ke.length/ze)-1,Le=[],Ge=1;Ge<Fe;++Ge)Le[Ge-1]=ke.slice(Ge*ze,(Ge+1)*ze);return Le[Fe-1]=ke.slice(Fe*ze),Le}function p(ke,ze,Fe){for(var Le=0,Ge=0,he=0,se=0,ge=0,xe=Fe.length,He=[],tt=[];Le<xe;++Le)He[Le]=tt[Le]=Le,ze[Le]=Fe[Le];for(;ge<tt.length;++ge)Le=tt[ge],Ge=ke[Le].L,he=ke[Le].R,se=ke[Le].C,He[Le]===Le&&(Ge!==-1&&He[Ge]!==Ge&&(He[Le]=He[Ge]),he!==-1&&He[he]!==he&&(He[Le]=He[he])),se!==-1&&(He[se]=Le),Ge!==-1&&Le!=He[Le]&&(He[Ge]=He[Le],tt.lastIndexOf(Ge)<ge&&tt.push(Ge)),he!==-1&&Le!=He[Le]&&(He[he]=He[Le],tt.lastIndexOf(he)<ge&&tt.push(he));for(Le=1;Le<xe;++Le)He[Le]===Le&&(he!==-1&&He[he]!==he?He[Le]=He[he]:Ge!==-1&&He[Ge]!==Ge&&(He[Le]=He[Ge]));for(Le=1;Le<xe;++Le)if(ke[Le].type!==0){if(ge=Le,ge!=He[ge])do ge=He[ge],ze[Le]=ze[ge]+"/"+ze[Le];while(ge!==0&&He[ge]!==-1&&ge!=He[ge]);He[Le]=-1}for(ze[0]+="/",Le=1;Le<xe;++Le)ke[Le].type!==2&&(ze[Le]+="/")}function g(ke,ze,Fe){for(var Le=ke.start,Ge=ke.size,he=[],se=Le;Fe&&Ge>0&&se>=0;)he.push(ze.slice(se*L,se*L+L)),Ge-=L,se=HA(Fe,se*4);return he.length===0?hs(0):_d(he).slice(0,ke.size)}function y(ke,ze,Fe,Le,Ge){var he=H;if(ke===H){if(ze!==0)throw new Error("DIFAT chain shorter than expected")}else if(ke!==-1){var se=Fe[ke],ge=(Le>>>2)-1;if(!se)return;for(var xe=0;xe<ge&&(he=HA(se,xe*4))!==H;++xe)Ge.push(he);y(HA(se,Le-4),ze-1,Fe,Le,Ge)}}function w(ke,ze,Fe,Le,Ge){var he=[],se=[];Ge||(Ge=[]);var ge=Le-1,xe=0,He=0;for(xe=ze;xe>=0;){Ge[xe]=!0,he[he.length]=xe,se.push(ke[xe]);var tt=Fe[Math.floor(xe*4/Le)];if(He=xe*4&ge,Le<4+He)throw new Error("FAT boundary crossed: "+xe+" 4 "+Le);if(!ke[tt])break;xe=HA(ke[tt],He)}return{nodes:he,data:OR([se])}}function b(ke,ze,Fe,Le){var Ge=ke.length,he=[],se=[],ge=[],xe=[],He=Le-1,tt=0,nt=0,et=0,st=0;for(tt=0;tt<Ge;++tt)if(ge=[],et=tt+ze,et>=Ge&&(et-=Ge),!se[et]){xe=[];var wt=[];for(nt=et;nt>=0;){wt[nt]=!0,se[nt]=!0,ge[ge.length]=nt,xe.push(ke[nt]);var It=Fe[Math.floor(nt*4/Le)];if(st=nt*4&He,Le<4+st)throw new Error("FAT boundary crossed: "+nt+" 4 "+Le);if(!ke[It]||(nt=HA(ke[It],st),wt[nt]))break}he[et]={nodes:ge,data:OR([xe])}}return he}function x(ke,ze,Fe,Le,Ge,he,se,ge){for(var xe=0,He=Le.length?2:0,tt=ze[ke].data,nt=0,et=0,st;nt<tt.length;nt+=128){var wt=tt.slice(nt,nt+128);Os(wt,64),et=wt.read_shift(2),st=OT(wt,0,et-He),Le.push(st);var It={name:st,type:wt.read_shift(1),color:wt.read_shift(1),L:wt.read_shift(4,"i"),R:wt.read_shift(4,"i"),C:wt.read_shift(4,"i"),clsid:wt.read_shift(16),state:wt.read_shift(4,"i"),start:0,size:0},tn=wt.read_shift(2)+wt.read_shift(2)+wt.read_shift(2)+wt.read_shift(2);tn!==0&&(It.ct=T(wt,wt.l-8));var kn=wt.read_shift(2)+wt.read_shift(2)+wt.read_shift(2)+wt.read_shift(2);kn!==0&&(It.mt=T(wt,wt.l-8)),It.start=wt.read_shift(4,"i"),It.size=wt.read_shift(4,"i"),It.size<0&&It.start<0&&(It.size=It.type=0,It.start=H,It.name=""),It.type===5?(xe=It.start,Ge>0&&xe!==H&&(ze[xe].name="!StreamData")):It.size>=4096?(It.storage="fat",ze[It.start]===void 0&&(ze[It.start]=w(Fe,It.start,ze.fat_addrs,ze.ssz)),ze[It.start].name=It.name,It.content=ze[It.start].data.slice(0,It.size)):(It.storage="minifat",It.size<0?It.size=0:xe!==H&&It.start!==H&&ze[xe]&&(It.content=g(It,ze[xe].data,(ze[ge]||{}).data))),It.content&&Os(It.content,0),he[st]=It,se.push(It)}}function T(ke,ze){return new Date((_i(ke,ze+4)/1e7*Math.pow(2,32)+_i(ke,ze)/1e7-11644473600)*1e3)}function D(ke,ze){return A(),d(c.readFileSync(ke),ze)}function k(ke,ze){var Fe=ze&&ze.type;switch(Fe||pa&&Buffer.isBuffer(ke)&&(Fe="buffer"),Fe||"base64"){case"file":return D(ke,ze);case"base64":return d(Sl(Ti(ke)),ze);case"binary":return d(Sl(ke),ze)}return d(ke,ze)}function S(ke,ze){var Fe=ze||{},Le=Fe.root||"Root Entry";if(ke.FullPaths||(ke.FullPaths=[]),ke.FileIndex||(ke.FileIndex=[]),ke.FullPaths.length!==ke.FileIndex.length)throw new Error("inconsistent CFB structure");ke.FullPaths.length===0&&(ke.FullPaths[0]=Le+"/",ke.FileIndex[0]={name:Le,type:5}),Fe.CLSID&&(ke.FileIndex[0].clsid=Fe.CLSID),E(ke)}function E(ke){var ze="Sh33tJ5";if(!ba.find(ke,"/"+ze)){var Fe=hs(4);Fe[0]=55,Fe[1]=Fe[3]=50,Fe[2]=54,ke.FileIndex.push({name:ze,type:2,content:Fe,size:4,L:69,R:69,C:69}),ke.FullPaths.push(ke.FullPaths[0]+ze),C(ke)}}function C(ke,ze){S(ke);for(var Fe=!1,Le=!1,Ge=ke.FullPaths.length-1;Ge>=0;--Ge){var he=ke.FileIndex[Ge];switch(he.type){case 0:Le?Fe=!0:(ke.FileIndex.pop(),ke.FullPaths.pop());break;case 1:case 2:case 5:Le=!0,isNaN(he.R*he.L*he.C)&&(Fe=!0),he.R>-1&&he.L>-1&&he.R==he.L&&(Fe=!0);break;default:Fe=!0;break}}if(!(!Fe&&!ze)){var se=new Date(1987,1,19),ge=0,xe=Object.create?Object.create(null):{},He=[];for(Ge=0;Ge<ke.FullPaths.length;++Ge)xe[ke.FullPaths[Ge]]=!0,ke.FileIndex[Ge].type!==0&&He.push([ke.FullPaths[Ge],ke.FileIndex[Ge]]);for(Ge=0;Ge<He.length;++Ge){var tt=a(He[Ge][0]);Le=xe[tt],Le||(He.push([tt,{name:r(tt).replace("/",""),type:1,clsid:Q,ct:se,mt:se,content:null}]),xe[tt]=!0)}for(He.sort(function(st,wt){return n(st[0],wt[0])}),ke.FullPaths=[],ke.FileIndex=[],Ge=0;Ge<He.length;++Ge)ke.FullPaths[Ge]=He[Ge][0],ke.FileIndex[Ge]=He[Ge][1];for(Ge=0;Ge<He.length;++Ge){var nt=ke.FileIndex[Ge],et=ke.FullPaths[Ge];if(nt.name=r(et).replace("/",""),nt.L=nt.R=nt.C=-(nt.color=1),nt.size=nt.content?nt.content.length:0,nt.start=0,nt.clsid=nt.clsid||Q,Ge===0)nt.C=He.length>1?1:-1,nt.size=0,nt.type=5;else if(et.slice(-1)=="/"){for(ge=Ge+1;ge<He.length&&a(ke.FullPaths[ge])!=et;++ge);for(nt.C=ge>=He.length?-1:ge,ge=Ge+1;ge<He.length&&a(ke.FullPaths[ge])!=a(et);++ge);nt.R=ge>=He.length?-1:ge,nt.type=1}else a(ke.FullPaths[Ge+1]||"")==a(et)&&(nt.R=Ge+1),nt.type=2}}}function U(ke,ze){var Fe=ze||{};if(Fe.fileType=="mad")return Lt(ke,Fe);switch(C(ke),Fe.fileType){case"zip":return en(ke,Fe)}var Le=(function(st){for(var wt=0,It=0,tn=0;tn<st.FileIndex.length;++tn){var kn=st.FileIndex[tn];if(kn.content){var hn=kn.content.length;hn>0&&(hn<4096?wt+=hn+63>>6:It+=hn+511>>9)}}for(var Sn=st.FullPaths.length+3>>2,Pa=wt+7>>3,Er=wt+127>>7,Zr=Pa+It+Sn+Er,Ss=Zr+127>>7,Wo=Ss<=109?0:Math.ceil((Ss-109)/127);Zr+Ss+Wo+127>>7>Ss;)Wo=++Ss<=109?0:Math.ceil((Ss-109)/127);var Za=[1,Wo,Ss,Er,Sn,It,wt,0];return st.FileIndex[0].size=wt<<6,Za[7]=(st.FileIndex[0].start=Za[0]+Za[1]+Za[2]+Za[3]+Za[4]+Za[5])+(Za[6]+7>>3),Za})(ke),Ge=hs(Le[7]<<9),he=0,se=0;{for(he=0;he<8;++he)Ge.write_shift(1,ie[he]);for(he=0;he<8;++he)Ge.write_shift(2,0);for(Ge.write_shift(2,62),Ge.write_shift(2,3),Ge.write_shift(2,65534),Ge.write_shift(2,9),Ge.write_shift(2,6),he=0;he<3;++he)Ge.write_shift(2,0);for(Ge.write_shift(4,0),Ge.write_shift(4,Le[2]),Ge.write_shift(4,Le[0]+Le[1]+Le[2]+Le[3]-1),Ge.write_shift(4,0),Ge.write_shift(4,4096),Ge.write_shift(4,Le[3]?Le[0]+Le[1]+Le[2]-1:H),Ge.write_shift(4,Le[3]),Ge.write_shift(-4,Le[1]?Le[0]-1:H),Ge.write_shift(4,Le[1]),he=0;he<109;++he)Ge.write_shift(-4,he<Le[2]?Le[1]+he:-1)}if(Le[1])for(se=0;se<Le[1];++se){for(;he<236+se*127;++he)Ge.write_shift(-4,he<Le[2]?Le[1]+he:-1);Ge.write_shift(-4,se===Le[1]-1?H:se+1)}var ge=function(st){for(se+=st;he<se-1;++he)Ge.write_shift(-4,he+1);st&&(++he,Ge.write_shift(-4,H))};for(se=he=0,se+=Le[1];he<se;++he)Ge.write_shift(-4,X.DIFSECT);for(se+=Le[2];he<se;++he)Ge.write_shift(-4,X.FATSECT);ge(Le[3]),ge(Le[4]);for(var xe=0,He=0,tt=ke.FileIndex[0];xe<ke.FileIndex.length;++xe)tt=ke.FileIndex[xe],tt.content&&(He=tt.content.length,!(He<4096)&&(tt.start=se,ge(He+511>>9)));for(ge(Le[6]+7>>3);Ge.l&511;)Ge.write_shift(-4,X.ENDOFCHAIN);for(se=he=0,xe=0;xe<ke.FileIndex.length;++xe)tt=ke.FileIndex[xe],tt.content&&(He=tt.content.length,!(!He||He>=4096)&&(tt.start=se,ge(He+63>>6)));for(;Ge.l&511;)Ge.write_shift(-4,X.ENDOFCHAIN);for(he=0;he<Le[4]<<2;++he){var nt=ke.FullPaths[he];if(!nt||nt.length===0){for(xe=0;xe<17;++xe)Ge.write_shift(4,0);for(xe=0;xe<3;++xe)Ge.write_shift(4,-1);for(xe=0;xe<12;++xe)Ge.write_shift(4,0);continue}tt=ke.FileIndex[he],he===0&&(tt.start=tt.size?tt.start-1:H);var et=he===0&&Fe.root||tt.name;if(He=2*(et.length+1),Ge.write_shift(64,et,"utf16le"),Ge.write_shift(2,He),Ge.write_shift(1,tt.type),Ge.write_shift(1,tt.color),Ge.write_shift(-4,tt.L),Ge.write_shift(-4,tt.R),Ge.write_shift(-4,tt.C),tt.clsid)Ge.write_shift(16,tt.clsid,"hex");else for(xe=0;xe<4;++xe)Ge.write_shift(4,0);Ge.write_shift(4,tt.state||0),Ge.write_shift(4,0),Ge.write_shift(4,0),Ge.write_shift(4,0),Ge.write_shift(4,0),Ge.write_shift(4,tt.start),Ge.write_shift(4,tt.size),Ge.write_shift(4,0)}for(he=1;he<ke.FileIndex.length;++he)if(tt=ke.FileIndex[he],tt.size>=4096)if(Ge.l=tt.start+1<<9,pa&&Buffer.isBuffer(tt.content))tt.content.copy(Ge,Ge.l,0,tt.size),Ge.l+=tt.size+511&-512;else{for(xe=0;xe<tt.size;++xe)Ge.write_shift(1,tt.content[xe]);for(;xe&511;++xe)Ge.write_shift(1,0)}for(he=1;he<ke.FileIndex.length;++he)if(tt=ke.FileIndex[he],tt.size>0&&tt.size<4096)if(pa&&Buffer.isBuffer(tt.content))tt.content.copy(Ge,Ge.l,0,tt.size),Ge.l+=tt.size+63&-64;else{for(xe=0;xe<tt.size;++xe)Ge.write_shift(1,tt.content[xe]);for(;xe&63;++xe)Ge.write_shift(1,0)}if(pa)Ge.l=Ge.length;else for(;Ge.l<Ge.length;)Ge.write_shift(1,0);return Ge}function F(ke,ze){var Fe=ke.FullPaths.map(function(xe){return xe.toUpperCase()}),Le=Fe.map(function(xe){var He=xe.split("/");return He[He.length-(xe.slice(-1)=="/"?2:1)]}),Ge=!1;ze.charCodeAt(0)===47?(Ge=!0,ze=Fe[0].slice(0,-1)+ze):Ge=ze.indexOf("/")!==-1;var he=ze.toUpperCase(),se=Ge===!0?Fe.indexOf(he):Le.indexOf(he);if(se!==-1)return ke.FileIndex[se];var ge=!he.match(Ip);for(he=he.replace(Ho,""),ge&&(he=he.replace(Ip,"!")),se=0;se<Fe.length;++se)if((ge?Fe[se].replace(Ip,"!"):Fe[se]).replace(Ho,"")==he||(ge?Le[se].replace(Ip,"!"):Le[se]).replace(Ho,"")==he)return ke.FileIndex[se];return null}var L=64,H=-2,ue="d0cf11e0a1b11ae1",ie=[208,207,17,224,161,177,26,225],Q="00000000000000000000000000000000",X={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:H,FREESECT:-1,HEADER_SIGNATURE:ue,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Q,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function le(ke,ze,Fe){A();var Le=U(ke,Fe);c.writeFileSync(ze,Le)}function Z(ke){for(var ze=new Array(ke.length),Fe=0;Fe<ke.length;++Fe)ze[Fe]=String.fromCharCode(ke[Fe]);return ze.join("")}function re(ke,ze){var Fe=U(ke,ze);switch(ze&&ze.type||"buffer"){case"file":return A(),c.writeFileSync(ze.filename,Fe),Fe;case"binary":return typeof Fe=="string"?Fe:Z(Fe);case"base64":return bR(typeof Fe=="string"?Fe:Z(Fe));case"buffer":if(pa)return Buffer.isBuffer(Fe)?Fe:Kf(Fe);case"array":return typeof Fe=="string"?Sl(Fe):Fe}return Fe}var q;function P(ke){try{var ze=ke.InflateRaw,Fe=new ze;if(Fe._processChunk(new Uint8Array([3,0]),Fe._finishFlushFlag),Fe.bytesRead)q=ke;else throw new Error("zlib does not expose bytesRead")}catch(Le){console.error("cannot use native zlib: "+(Le.message||Le))}}function G(ke,ze){if(!q)return Vt(ke,ze);var Fe=q.InflateRaw,Le=new Fe,Ge=Le._processChunk(ke.slice(ke.l),Le._finishFlushFlag);return ke.l+=Le.bytesRead,Ge}function J(ke){return q?q.deflateRawSync(ke):it(ke)}var M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],te=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Y=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function W(ke){var ze=(ke<<1|ke<<11)&139536|(ke<<5|ke<<15)&558144;return(ze>>16|ze>>8|ze)&255}for(var ee=typeof Uint8Array<"u",ae=ee?new Uint8Array(256):[],oe=0;oe<256;++oe)ae[oe]=W(oe);function j(ke,ze){var Fe=ae[ke&255];return ze<=8?Fe>>>8-ze:(Fe=Fe<<8|ae[ke>>8&255],ze<=16?Fe>>>16-ze:(Fe=Fe<<8|ae[ke>>16&255],Fe>>>24-ze))}function ce(ke,ze){var Fe=ze&7,Le=ze>>>3;return(ke[Le]|(Fe<=6?0:ke[Le+1]<<8))>>>Fe&3}function de(ke,ze){var Fe=ze&7,Le=ze>>>3;return(ke[Le]|(Fe<=5?0:ke[Le+1]<<8))>>>Fe&7}function _e(ke,ze){var Fe=ze&7,Le=ze>>>3;return(ke[Le]|(Fe<=4?0:ke[Le+1]<<8))>>>Fe&15}function Re(ke,ze){var Fe=ze&7,Le=ze>>>3;return(ke[Le]|(Fe<=3?0:ke[Le+1]<<8))>>>Fe&31}function be(ke,ze){var Fe=ze&7,Le=ze>>>3;return(ke[Le]|(Fe<=1?0:ke[Le+1]<<8))>>>Fe&127}function Ee(ke,ze,Fe){var Le=ze&7,Ge=ze>>>3,he=(1<<Fe)-1,se=ke[Ge]>>>Le;return Fe<8-Le||(se|=ke[Ge+1]<<8-Le,Fe<16-Le)||(se|=ke[Ge+2]<<16-Le,Fe<24-Le)||(se|=ke[Ge+3]<<24-Le),se&he}function Ce(ke,ze,Fe){var Le=ze&7,Ge=ze>>>3;return Le<=5?ke[Ge]|=(Fe&7)<<Le:(ke[Ge]|=Fe<<Le&255,ke[Ge+1]=(Fe&7)>>8-Le),ze+3}function Be(ke,ze,Fe){var Le=ze&7,Ge=ze>>>3;return Fe=(Fe&1)<<Le,ke[Ge]|=Fe,ze+1}function Te(ke,ze,Fe){var Le=ze&7,Ge=ze>>>3;return Fe<<=Le,ke[Ge]|=Fe&255,Fe>>>=8,ke[Ge+1]=Fe,ze+8}function Oe(ke,ze,Fe){var Le=ze&7,Ge=ze>>>3;return Fe<<=Le,ke[Ge]|=Fe&255,Fe>>>=8,ke[Ge+1]=Fe&255,ke[Ge+2]=Fe>>>8,ze+16}function Me(ke,ze){var Fe=ke.length,Le=2*Fe>ze?2*Fe:ze+5,Ge=0;if(Fe>=ze)return ke;if(pa){var he=xR(Le);if(ke.copy)ke.copy(he);else for(;Ge<ke.length;++Ge)he[Ge]=ke[Ge];return he}else if(ee){var se=new Uint8Array(Le);if(se.set)se.set(ke);else for(;Ge<Fe;++Ge)se[Ge]=ke[Ge];return se}return ke.length=Le,ke}function rt(ke){for(var ze=new Array(ke),Fe=0;Fe<ke;++Fe)ze[Fe]=0;return ze}function ut(ke,ze,Fe){var Le=1,Ge=0,he=0,se=0,ge=0,xe=ke.length,He=ee?new Uint16Array(32):rt(32);for(he=0;he<32;++he)He[he]=0;for(he=xe;he<Fe;++he)ke[he]=0;xe=ke.length;var tt=ee?new Uint16Array(xe):rt(xe);for(he=0;he<xe;++he)He[Ge=ke[he]]++,Le<Ge&&(Le=Ge),tt[he]=0;for(He[0]=0,he=1;he<=Le;++he)He[he+16]=ge=ge+He[he-1]<<1;for(he=0;he<xe;++he)ge=ke[he],ge!=0&&(tt[he]=He[ge+16]++);var nt=0;for(he=0;he<xe;++he)if(nt=ke[he],nt!=0)for(ge=j(tt[he],Le)>>Le-nt,se=(1<<Le+4-nt)-1;se>=0;--se)ze[ge|se<<nt]=nt&15|he<<4;return Le}var Ie=ee?new Uint16Array(512):rt(512),Ue=ee?new Uint16Array(32):rt(32);if(!ee){for(var dt=0;dt<512;++dt)Ie[dt]=0;for(dt=0;dt<32;++dt)Ue[dt]=0}(function(){for(var ke=[],ze=0;ze<32;ze++)ke.push(5);ut(ke,Ue,32);var Fe=[];for(ze=0;ze<=143;ze++)Fe.push(8);for(;ze<=255;ze++)Fe.push(9);for(;ze<=279;ze++)Fe.push(7);for(;ze<=287;ze++)Fe.push(8);ut(Fe,Ie,288)})();var Ft=(function(){for(var ze=ee?new Uint8Array(32768):[],Fe=0,Le=0;Fe<Y.length-1;++Fe)for(;Le<Y[Fe+1];++Le)ze[Le]=Fe;for(;Le<32768;++Le)ze[Le]=29;var Ge=ee?new Uint8Array(259):[];for(Fe=0,Le=0;Fe<te.length-1;++Fe)for(;Le<te[Fe+1];++Le)Ge[Le]=Fe;function he(ge,xe){for(var He=0;He<ge.length;){var tt=Math.min(65535,ge.length-He),nt=He+tt==ge.length;for(xe.write_shift(1,+nt),xe.write_shift(2,tt),xe.write_shift(2,~tt&65535);tt-- >0;)xe[xe.l++]=ge[He++]}return xe.l}function se(ge,xe){for(var He=0,tt=0,nt=ee?new Uint16Array(32768):[];tt<ge.length;){var et=Math.min(65535,ge.length-tt);if(et<10){for(He=Ce(xe,He,+(tt+et==ge.length)),He&7&&(He+=8-(He&7)),xe.l=He/8|0,xe.write_shift(2,et),xe.write_shift(2,~et&65535);et-- >0;)xe[xe.l++]=ge[tt++];He=xe.l*8;continue}He=Ce(xe,He,+(tt+et==ge.length)+2);for(var st=0;et-- >0;){var wt=ge[tt];st=(st<<5^wt)&32767;var It=-1,tn=0;if((It=nt[st])&&(It|=tt&-32768,It>tt&&(It-=32768),It<tt))for(;ge[It+tn]==ge[tt+tn]&&tn<250;)++tn;if(tn>2){wt=Ge[tn],wt<=22?He=Te(xe,He,ae[wt+1]>>1)-1:(Te(xe,He,3),He+=5,Te(xe,He,ae[wt-23]>>5),He+=3);var kn=wt<8?0:wt-4>>2;kn>0&&(Oe(xe,He,tn-te[wt]),He+=kn),wt=ze[tt-It],He=Te(xe,He,ae[wt]>>3),He-=3;var hn=wt<4?0:wt-2>>1;hn>0&&(Oe(xe,He,tt-It-Y[wt]),He+=hn);for(var Sn=0;Sn<tn;++Sn)nt[st]=tt&32767,st=(st<<5^ge[tt])&32767,++tt;et-=tn-1}else wt<=143?wt=wt+48:He=Be(xe,He,1),He=Te(xe,He,ae[wt]),nt[st]=tt&32767,++tt}He=Te(xe,He,0)-1}return xe.l=(He+7)/8|0,xe.l}return function(xe,He){return xe.length<8?he(xe,He):se(xe,He)}})();function it(ke){var ze=hs(50+Math.floor(ke.length*1.1)),Fe=Ft(ke,ze);return ze.slice(0,Fe)}var qe=ee?new Uint16Array(32768):rt(32768),yt=ee?new Uint16Array(32768):rt(32768),mt=ee?new Uint16Array(128):rt(128),xt=1,an=1;function Cn(ke,ze){var Fe=Re(ke,ze)+257;ze+=5;var Le=Re(ke,ze)+1;ze+=5;var Ge=_e(ke,ze)+4;ze+=4;for(var he=0,se=ee?new Uint8Array(19):rt(19),ge=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],xe=1,He=ee?new Uint8Array(8):rt(8),tt=ee?new Uint8Array(8):rt(8),nt=se.length,et=0;et<Ge;++et)se[M[et]]=he=de(ke,ze),xe<he&&(xe=he),He[he]++,ze+=3;var st=0;for(He[0]=0,et=1;et<=xe;++et)tt[et]=st=st+He[et-1]<<1;for(et=0;et<nt;++et)(st=se[et])!=0&&(ge[et]=tt[st]++);var wt=0;for(et=0;et<nt;++et)if(wt=se[et],wt!=0){st=ae[ge[et]]>>8-wt;for(var It=(1<<7-wt)-1;It>=0;--It)mt[st|It<<wt]=wt&7|et<<3}var tn=[];for(xe=1;tn.length<Fe+Le;)switch(st=mt[be(ke,ze)],ze+=st&7,st>>>=3){case 16:for(he=3+ce(ke,ze),ze+=2,st=tn[tn.length-1];he-- >0;)tn.push(st);break;case 17:for(he=3+de(ke,ze),ze+=3;he-- >0;)tn.push(0);break;case 18:for(he=11+be(ke,ze),ze+=7;he-- >0;)tn.push(0);break;default:tn.push(st),xe<st&&(xe=st);break}var kn=tn.slice(0,Fe),hn=tn.slice(Fe);for(et=Fe;et<286;++et)kn[et]=0;for(et=Le;et<30;++et)hn[et]=0;return xt=ut(kn,qe,286),an=ut(hn,yt,30),ze}function oa(ke,ze){if(ke[0]==3&&!(ke[1]&3))return[jd(ze),2];for(var Fe=0,Le=0,Ge=xR(ze||1<<18),he=0,se=Ge.length>>>0,ge=0,xe=0;(Le&1)==0;){if(Le=de(ke,Fe),Fe+=3,Le>>>1)Le>>1==1?(ge=9,xe=5):(Fe=Cn(ke,Fe),ge=xt,xe=an);else{Fe&7&&(Fe+=8-(Fe&7));var He=ke[Fe>>>3]|ke[(Fe>>>3)+1]<<8;if(Fe+=32,He>0)for(!ze&&se<he+He&&(Ge=Me(Ge,he+He),se=Ge.length);He-- >0;)Ge[he++]=ke[Fe>>>3],Fe+=8;continue}for(;;){!ze&&se<he+32767&&(Ge=Me(Ge,he+32767),se=Ge.length);var tt=Ee(ke,Fe,ge),nt=Le>>>1==1?Ie[tt]:qe[tt];if(Fe+=nt&15,nt>>>=4,(nt>>>8&255)===0)Ge[he++]=nt;else{if(nt==256)break;nt-=257;var et=nt<8?0:nt-4>>2;et>5&&(et=0);var st=he+te[nt];et>0&&(st+=Ee(ke,Fe,et),Fe+=et),tt=Ee(ke,Fe,xe),nt=Le>>>1==1?Ue[tt]:yt[tt],Fe+=nt&15,nt>>>=4;var wt=nt<4?0:nt-2>>1,It=Y[nt];for(wt>0&&(It+=Ee(ke,Fe,wt),Fe+=wt),!ze&&se<st&&(Ge=Me(Ge,st+100),se=Ge.length);he<st;)Ge[he]=Ge[he-It],++he}}}return ze?[Ge,Fe+7>>>3]:[Ge.slice(0,he),Fe+7>>>3]}function Vt(ke,ze){var Fe=ke.slice(ke.l||0),Le=oa(Fe,ze);return ke.l+=Le[1],Le[0]}function kt(ke,ze){if(ke)typeof console<"u"&&console.error(ze);else throw new Error(ze)}function at(ke,ze){var Fe=ke;Os(Fe,0);var Le=[],Ge=[],he={FileIndex:Le,FullPaths:Ge};S(he,{root:ze.root});for(var se=Fe.length-4;(Fe[se]!=80||Fe[se+1]!=75||Fe[se+2]!=5||Fe[se+3]!=6)&&se>=0;)--se;Fe.l=se+4,Fe.l+=4;var ge=Fe.read_shift(2);Fe.l+=6;var xe=Fe.read_shift(4);for(Fe.l=xe,se=0;se<ge;++se){Fe.l+=20;var He=Fe.read_shift(4),tt=Fe.read_shift(4),nt=Fe.read_shift(2),et=Fe.read_shift(2),st=Fe.read_shift(2);Fe.l+=8;var wt=Fe.read_shift(4),It=i(Fe.slice(Fe.l+nt,Fe.l+nt+et));Fe.l+=nt+et+st;var tn=Fe.l;Fe.l=wt+4,bt(Fe,He,tt,he,It),Fe.l=tn}return he}function bt(ke,ze,Fe,Le,Ge){ke.l+=2;var he=ke.read_shift(2),se=ke.read_shift(2),ge=o(ke);if(he&8257)throw new Error("Unsupported ZIP encryption");for(var xe=ke.read_shift(4),He=ke.read_shift(4),tt=ke.read_shift(4),nt=ke.read_shift(2),et=ke.read_shift(2),st="",wt=0;wt<nt;++wt)st+=String.fromCharCode(ke[ke.l++]);if(et){var It=i(ke.slice(ke.l,ke.l+et));(It[21589]||{}).mt&&(ge=It[21589].mt),((Ge||{})[21589]||{}).mt&&(ge=Ge[21589].mt)}ke.l+=et;var tn=ke.slice(ke.l,ke.l+He);switch(se){case 8:tn=G(ke,tt);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+se)}var kn=!1;he&8&&(xe=ke.read_shift(4),xe==134695760&&(xe=ke.read_shift(4),kn=!0),He=ke.read_shift(4),tt=ke.read_shift(4)),He!=ze&&kt(kn,"Bad compressed size: "+ze+" != "+He),tt!=Fe&&kt(kn,"Bad uncompressed size: "+Fe+" != "+tt),Ln(Le,st,tn,{unsafe:!0,mt:ge})}function en(ke,ze){var Fe=ze||{},Le=[],Ge=[],he=hs(1),se=Fe.compression?8:0,ge=0,xe=0,He=0,tt=0,nt=0,et=ke.FullPaths[0],st=et,wt=ke.FileIndex[0],It=[],tn=0;for(xe=1;xe<ke.FullPaths.length;++xe)if(st=ke.FullPaths[xe].slice(et.length),wt=ke.FileIndex[xe],!(!wt.size||!wt.content||st=="Sh33tJ5")){var kn=tt,hn=hs(st.length);for(He=0;He<st.length;++He)hn.write_shift(1,st.charCodeAt(He)&127);hn=hn.slice(0,hn.l),It[nt]=WFe.buf(wt.content,0);var Sn=wt.content;se==8&&(Sn=J(Sn)),he=hs(30),he.write_shift(4,67324752),he.write_shift(2,20),he.write_shift(2,ge),he.write_shift(2,se),wt.mt?s(he,wt.mt):he.write_shift(4,0),he.write_shift(-4,It[nt]),he.write_shift(4,Sn.length),he.write_shift(4,wt.content.length),he.write_shift(2,hn.length),he.write_shift(2,0),tt+=he.length,Le.push(he),tt+=hn.length,Le.push(hn),tt+=Sn.length,Le.push(Sn),he=hs(46),he.write_shift(4,33639248),he.write_shift(2,0),he.write_shift(2,20),he.write_shift(2,ge),he.write_shift(2,se),he.write_shift(4,0),he.write_shift(-4,It[nt]),he.write_shift(4,Sn.length),he.write_shift(4,wt.content.length),he.write_shift(2,hn.length),he.write_shift(2,0),he.write_shift(2,0),he.write_shift(2,0),he.write_shift(2,0),he.write_shift(4,0),he.write_shift(4,kn),tn+=he.l,Ge.push(he),tn+=hn.length,Ge.push(hn),++nt}return he=hs(22),he.write_shift(4,101010256),he.write_shift(2,0),he.write_shift(2,0),he.write_shift(2,nt),he.write_shift(2,nt),he.write_shift(4,tn),he.write_shift(4,tt),he.write_shift(2,0),_d([_d(Le),_d(Ge),he])}var Ye={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function We(ke,ze){if(ke.ctype)return ke.ctype;var Fe=ke.name||"",Le=Fe.match(/\.([^\.]+)$/);return Le&&Ye[Le[1]]||ze&&(Le=(Fe=ze).match(/[\.\\]([^\.\\])+$/),Le&&Ye[Le[1]])?Ye[Le[1]]:"application/octet-stream"}function _t(ke){for(var ze=bR(ke),Fe=[],Le=0;Le<ze.length;Le+=76)Fe.push(ze.slice(Le,Le+76));return Fe.join(`\r
`)+`\r
`}function Rt(ke){var ze=ke.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(He){var tt=He.charCodeAt(0).toString(16).toUpperCase();return"="+(tt.length==1?"0"+tt:tt)});ze=ze.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ze.charAt(0)==`
`&&(ze="=0D"+ze.slice(1)),ze=ze.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Fe=[],Le=ze.split(`\r
`),Ge=0;Ge<Le.length;++Ge){var he=Le[Ge];if(he.length==0){Fe.push("");continue}for(var se=0;se<he.length;){var ge=76,xe=he.slice(se,se+ge);xe.charAt(ge-1)=="="?ge--:xe.charAt(ge-2)=="="?ge-=2:xe.charAt(ge-3)=="="&&(ge-=3),xe=he.slice(se,se+ge),se+=ge,se<he.length&&(xe+="="),Fe.push(xe)}}return Fe.join(`\r
`)}function zt(ke){for(var ze=[],Fe=0;Fe<ke.length;++Fe){for(var Le=ke[Fe];Fe<=ke.length&&Le.charAt(Le.length-1)=="=";)Le=Le.slice(0,Le.length-1)+ke[++Fe];ze.push(Le)}for(var Ge=0;Ge<ze.length;++Ge)ze[Ge]=ze[Ge].replace(/[=][0-9A-Fa-f]{2}/g,function(he){return String.fromCharCode(parseInt(he.slice(1),16))});return Sl(ze.join(`\r
`))}function Pt(ke,ze,Fe){for(var Le="",Ge="",he="",se,ge=0;ge<10;++ge){var xe=ze[ge];if(!xe||xe.match(/^\s*$/))break;var He=xe.match(/^(.*?):\s*([^\s].*)$/);if(He)switch(He[1].toLowerCase()){case"content-location":Le=He[2].trim();break;case"content-type":he=He[2].trim();break;case"content-transfer-encoding":Ge=He[2].trim();break}}switch(++ge,Ge.toLowerCase()){case"base64":se=Sl(Ti(ze.slice(ge).join("")));break;case"quoted-printable":se=zt(ze.slice(ge));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Ge)}var tt=Ln(ke,Le.slice(Fe.length),se,{unsafe:!0});he&&(tt.ctype=he)}function Wt(ke,ze){if(Z(ke.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Fe=ze&&ze.root||"",Le=(pa&&Buffer.isBuffer(ke)?ke.toString("binary"):Z(ke)).split(`\r
`),Ge=0,he="";for(Ge=0;Ge<Le.length;++Ge)if(he=Le[Ge],!!/^Content-Location:/i.test(he)&&(he=he.slice(he.indexOf("file")),Fe||(Fe=he.slice(0,he.lastIndexOf("/")+1)),he.slice(0,Fe.length)!=Fe))for(;Fe.length>0&&(Fe=Fe.slice(0,Fe.length-1),Fe=Fe.slice(0,Fe.lastIndexOf("/")+1),he.slice(0,Fe.length)!=Fe););var se=(Le[1]||"").match(/boundary="(.*?)"/);if(!se)throw new Error("MAD cannot find boundary");var ge="--"+(se[1]||""),xe=[],He=[],tt={FileIndex:xe,FullPaths:He};S(tt);var nt,et=0;for(Ge=0;Ge<Le.length;++Ge){var st=Le[Ge];st!==ge&&st!==ge+"--"||(et++&&Pt(tt,Le.slice(nt,Ge),Fe),nt=Ge)}return tt}function Lt(ke,ze){var Fe=ze||{},Le=Fe.boundary||"SheetJS";Le="------="+Le;for(var Ge=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Le.slice(2)+'"',"","",""],he=ke.FullPaths[0],se=he,ge=ke.FileIndex[0],xe=1;xe<ke.FullPaths.length;++xe)if(se=ke.FullPaths[xe].slice(he.length),ge=ke.FileIndex[xe],!(!ge.size||!ge.content||se=="Sh33tJ5")){se=se.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(tn){return"_x"+tn.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(tn){return"_u"+tn.charCodeAt(0).toString(16)+"_"});for(var He=ge.content,tt=pa&&Buffer.isBuffer(He)?He.toString("binary"):Z(He),nt=0,et=Math.min(1024,tt.length),st=0,wt=0;wt<=et;++wt)(st=tt.charCodeAt(wt))>=32&&st<128&&++nt;var It=nt>=et*4/5;Ge.push(Le),Ge.push("Content-Location: "+(Fe.root||"file:///C:/SheetJS/")+se),Ge.push("Content-Transfer-Encoding: "+(It?"quoted-printable":"base64")),Ge.push("Content-Type: "+We(ge,se)),Ge.push(""),Ge.push(It?Rt(tt):_t(tt))}return Ge.push(Le+`--\r
`),Ge.join(`\r
`)}function ia(ke){var ze={};return S(ze,ke),ze}function Ln(ke,ze,Fe,Le){var Ge=Le&&Le.unsafe;Ge||S(ke);var he=!Ge&&ba.find(ke,ze);if(!he){var se=ke.FullPaths[0];ze.slice(0,se.length)==se?se=ze:(se.slice(-1)!="/"&&(se+="/"),se=(se+ze).replace("//","/")),he={name:r(ze),type:2},ke.FileIndex.push(he),ke.FullPaths.push(se),Ge||ba.utils.cfb_gc(ke)}return he.content=Fe,he.size=Fe?Fe.length:0,Le&&(Le.CLSID&&(he.clsid=Le.CLSID),Le.mt&&(he.mt=Le.mt),Le.ct&&(he.ct=Le.ct)),he}function zn(ke,ze){S(ke);var Fe=ba.find(ke,ze);if(Fe){for(var Le=0;Le<ke.FileIndex.length;++Le)if(ke.FileIndex[Le]==Fe)return ke.FileIndex.splice(Le,1),ke.FullPaths.splice(Le,1),!0}return!1}function Yt(ke,ze,Fe){S(ke);var Le=ba.find(ke,ze);if(Le){for(var Ge=0;Ge<ke.FileIndex.length;++Ge)if(ke.FileIndex[Ge]==Le)return ke.FileIndex[Ge].name=r(Fe),ke.FullPaths[Ge]=Fe,!0}return!1}function Bn(ke){C(ke,!0)}return t.find=F,t.read=k,t.parse=d,t.write=re,t.writeFile=le,t.utils={cfb_new:ia,cfb_add:Ln,cfb_del:zn,cfb_mov:Yt,cfb_gc:Bn,ReadShift:Jp,CheckField:H$,prep_blob:Os,bconcat:_d,use_zlib:P,_deflateRaw:it,_inflateRaw:Vt,consts:X},t})();function jFe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var n=t.read();return t.close(),n}catch(a){if(!a.message||!a.message.match(/onstruct/))throw a}throw new Error("Cannot access file "+e)}function Du(e){for(var t=Object.keys(e),n=[],a=0;a<t.length;++a)Object.prototype.hasOwnProperty.call(e,t[a])&&n.push(t[a]);return n}function NT(e){for(var t=[],n=Du(e),a=0;a!==n.length;++a)t[e[n[a]]]=n[a];return t}var h2=new Date(1899,11,30,0,0,0);function Go(e,t){var n=e.getTime(),a=h2.getTime()+(e.getTimezoneOffset()-h2.getTimezoneOffset())*6e4;return(n-a)/(1440*60*1e3)}var _$=new Date,qFe=h2.getTime()+(_$.getTimezoneOffset()-h2.getTimezoneOffset())*6e4,FR=_$.getTimezoneOffset();function Hw(e){var t=new Date;return t.setTime(e*24*60*60*1e3+qFe),t.getTimezoneOffset()!==FR&&t.setTime(t.getTime()+(t.getTimezoneOffset()-FR)*6e4),t}function YFe(e){var t=0,n=0,a=!1,r=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!r)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var s=1;s!=r.length;++s)if(r[s]){switch(n=1,s>3&&(a=!0),r[s].slice(r[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+r[s].slice(r[s].length-1));case"D":n*=24;case"H":n*=60;case"M":if(a)n*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=n*parseInt(r[s],10)}return t}var PR=new Date("2017-02-19T19:06:09.000Z"),w$=isNaN(PR.getFullYear())?new Date("2/19/17"):PR,XFe=w$.getFullYear()==2017;function Us(e,t){var n=new Date(e);if(XFe)return t>0?n.setTime(n.getTime()+n.getTimezoneOffset()*60*1e3):t<0&&n.setTime(n.getTime()-n.getTimezoneOffset()*60*1e3),n;if(e instanceof Date)return e;if(w$.getFullYear()==1917&&!isNaN(n.getFullYear())){var a=n.getFullYear();return e.indexOf(""+a)>-1||n.setFullYear(n.getFullYear()+100),n}var r=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+r[0],+r[1]-1,+r[2],+r[3]||0,+r[4]||0,+r[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function Sf(e,t){if(pa&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return Pp(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Pp(i$(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Pp(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Pp(new TextDecoder("utf-16be").decode(e.slice(2)))}var n={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(s){return n[s]||s})}catch{}for(var a=[],r=0;r!=e.length;++r)a.push(String.fromCharCode(e[r]));return a.join("")}function Ws(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=Ws(e[n]));return t}function Nr(e,t){for(var n="";n.length<t;)n+=e;return n}function Nl(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var n=1,a=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return n*=100,""});return!isNaN(t=Number(a))||(a=a.replace(/[(](.*)[)]/,function(r,s){return n=-n,s}),!isNaN(t=Number(a)))?t/n:t}var JFe=["january","february","march","april","may","june","july","august","september","october","november","december"];function zv(e){var t=new Date(e),n=new Date(NaN),a=t.getYear(),r=t.getMonth(),s=t.getDate();if(isNaN(s))return n;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&JFe.indexOf(o)==-1)return n}else if(o.match(/[a-z]/))return n;return a<0||a>8099?n:(r>0||s>1)&&a!=101?t:e.match(/[^-0-9:,\/\\]/)?n:t}var ZFe=(function(){var e="abacaba".split(/(:?b)/i).length==5;return function(n,a,r){if(e||typeof a=="string")return n.split(a);for(var s=n.split(a),o=[s[0]],i=1;i<s.length;++i)o.push(r),o.push(s[i]);return o}})();function b$(e){return e?e.content&&e.type?Sf(e.content,!0):e.data?Tp(e.data):e.asNodeBuffer&&pa?Tp(e.asNodeBuffer().toString("binary")):e.asBinary?Tp(e.asBinary()):e._data&&e._data.getContent?Tp(Sf(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function x$(e){if(!e)return null;if(e.data)return _R(e.data);if(e.asNodeBuffer&&pa)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?_R(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function ePe(e){return e&&e.name.slice(-4)===".bin"?x$(e):b$(e)}function Ki(e,t){for(var n=e.FullPaths||Du(e.files),a=t.toLowerCase().replace(/[\/]/g,"\\"),r=a.replace(/\\/g,"/"),s=0;s<n.length;++s){var o=n[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(a==o||r==o)return e.files?e.files[n[s]]:e.FileIndex[s]}return null}function VT(e,t){var n=Ki(e,t);if(n==null)throw new Error("Cannot find file "+t+" in zip");return n}function as(e,t,n){if(!n)return ePe(VT(e,t));if(!t)return null;try{return as(e,t)}catch{return null}}function wi(e,t,n){if(!n)return b$(VT(e,t));if(!t)return null;try{return wi(e,t)}catch{return null}}function tPe(e,t,n){return x$(VT(e,t))}function DR(e){for(var t=e.FullPaths||Du(e.files),n=[],a=0;a<t.length;++a)t[a].slice(-1)!="/"&&n.push(t[a].replace(/^Root Entry[\/]/,""));return n.sort()}function nPe(e,t,n){if(e.FullPaths){if(typeof n=="string"){var a;return pa?a=Kf(n):a=wFe(n),ba.utils.cfb_add(e,t,a)}ba.utils.cfb_add(e,t,n)}else e.file(t,n)}function C$(e,t){switch(t.type){case"base64":return ba.read(e,{type:"base64"});case"binary":return ba.read(e,{type:"binary"});case"buffer":case"array":return ba.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Fp(e,t){if(e.charAt(0)=="/")return e.slice(1);var n=t.split("/");t.slice(-1)!="/"&&n.pop();for(var a=e.split("/");a.length!==0;){var r=a.shift();r===".."?n.pop():r!=="."&&n.push(r)}return n.join("/")}var S$=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,aPe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,UR=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,rPe=/<[^>]*>/g,Co=S$.match(UR)?UR:rPe,sPe=/<\w*:/,oPe=/<(\/?)\w+:/;function On(e,t,n){for(var a={},r=0,s=0;r!==e.length&&!((s=e.charCodeAt(r))===32||s===10||s===13);++r);if(t||(a[0]=e.slice(0,r)),r===e.length)return a;var o=e.match(aPe),i=0,c="",A=0,d="",f="",m=1;if(o)for(A=0;A!=o.length;++A){for(f=o[A],s=0;s!=f.length&&f.charCodeAt(s)!==61;++s);for(d=f.slice(0,s).trim();f.charCodeAt(s+1)==32;)++s;for(m=(r=f.charCodeAt(s+1))==34||r==39?1:0,c=f.slice(s+1+m,f.length-m),i=0;i!=d.length&&d.charCodeAt(i)!==58;++i);if(i===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),a[d]=c,a[d.toLowerCase()]=c;else{var v=(i===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(i+1);if(a[v]&&d.slice(i-3,i)=="ext")continue;a[v]=c,a[v.toLowerCase()]=c}}return a}function Gu(e){return e.replace(oPe,"<$1")}var E$={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},iPe=NT(E$),Ia=(function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function n(a){var r=a+"",s=r.indexOf("<![CDATA[");if(s==-1)return r.replace(e,function(i,c){return E$[i]||String.fromCharCode(parseInt(c,i.indexOf("x")>-1?16:10))||i}).replace(t,function(i,c){return String.fromCharCode(parseInt(c,16))});var o=r.indexOf("]]>");return n(r.slice(0,s))+r.slice(s+9,o)+n(r.slice(o+3))}})(),lPe=/[&<>'"]/g,uPe=/[\u0000-\u001f]/g;function LT(e){var t=e+"";return t.replace(lPe,function(n){return iPe[n]}).replace(/\n/g,"<br/>").replace(uPe,function(n){return"&#x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+";"})}var RR=(function(){var e=/&#(\d+);/g;function t(n,a){return String.fromCharCode(parseInt(a,10))}return function(a){return a.replace(e,t)}})();function Sr(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function DC(e){for(var t="",n=0,a=0,r=0,s=0,o=0,i=0;n<e.length;){if(a=e.charCodeAt(n++),a<128){t+=String.fromCharCode(a);continue}if(r=e.charCodeAt(n++),a>191&&a<224){o=(a&31)<<6,o|=r&63,t+=String.fromCharCode(o);continue}if(s=e.charCodeAt(n++),a<240){t+=String.fromCharCode((a&15)<<12|(r&63)<<6|s&63);continue}o=e.charCodeAt(n++),i=((a&7)<<18|(r&63)<<12|(s&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(i>>>10&1023)),t+=String.fromCharCode(56320+(i&1023))}return t}function NR(e){var t=jd(2*e.length),n,a,r=1,s=0,o=0,i;for(a=0;a<e.length;a+=r)r=1,(i=e.charCodeAt(a))<128?n=i:i<224?(n=(i&31)*64+(e.charCodeAt(a+1)&63),r=2):i<240?(n=(i&15)*4096+(e.charCodeAt(a+1)&63)*64+(e.charCodeAt(a+2)&63),r=3):(r=4,n=(i&7)*262144+(e.charCodeAt(a+1)&63)*4096+(e.charCodeAt(a+2)&63)*64+(e.charCodeAt(a+3)&63),n-=65536,o=55296+(n>>>10&1023),n=56320+(n&1023)),o!==0&&(t[s++]=o&255,t[s++]=o>>>8,o=0),t[s++]=n%256,t[s++]=n>>>8;return t.slice(0,s).toString("ucs2")}function VR(e){return Kf(e,"binary").toString("utf8")}var Sy="foo bar baz",mr=pa&&(VR(Sy)==DC(Sy)&&VR||NR(Sy)==DC(Sy)&&NR)||DC,Pp=pa?function(e){return Kf(e,"utf8").toString("binary")}:function(e){for(var t=[],n=0,a=0,r=0;n<e.length;)switch(a=e.charCodeAt(n++),!0){case a<128:t.push(String.fromCharCode(a));break;case a<2048:t.push(String.fromCharCode(192+(a>>6))),t.push(String.fromCharCode(128+(a&63)));break;case(a>=55296&&a<57344):a-=55296,r=e.charCodeAt(n++)-56320+(a<<10),t.push(String.fromCharCode(240+(r>>18&7))),t.push(String.fromCharCode(144+(r>>12&63))),t.push(String.fromCharCode(128+(r>>6&63))),t.push(String.fromCharCode(128+(r&63)));break;default:t.push(String.fromCharCode(224+(a>>12))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)))}return t.join("")},L0=(function(){var e={};return function(n,a){var r=n+"|"+(a||"");return e[r]?e[r]:e[r]=new RegExp("<(?:\\w+:)?"+n+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+n+">",a||"")}})(),B$=(function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(n){for(var a=n.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),r=0;r<e.length;++r)a=a.replace(e[r][0],e[r][1]);return a}})(),cPe=(function(){var e={};return function(n){return e[n]!==void 0?e[n]:e[n]=new RegExp("<(?:vt:)?"+n+">([\\s\\S]*?)</(?:vt:)?"+n+">","g")}})(),dPe=/<\/?(?:vt:)?variant>/g,APe=/<(?:vt:)([^>]*)>([\s\S]*)</;function LR(e,t){var n=On(e),a=e.match(cPe(n.baseType))||[],r=[];if(a.length!=n.size){if(t.WTF)throw new Error("unexpected vector length "+a.length+" != "+n.size);return r}return a.forEach(function(s){var o=s.replace(dPe,"").match(APe);o&&r.push({v:mr(o[2]),t:o[1]})}),r}var fPe=/(^\s|\s$|\n)/;function mPe(e){return Du(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function vPe(e,t,n){return"<"+e+(n!=null?mPe(n):"")+(t!=null?(t.match(fPe)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function MT(e){if(pa&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return mr(Wf(DT(e)));throw new Error("Bad input format: expected Buffer or string")}var M0=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,hPe={CT:"http://schemas.openxmlformats.org/package/2006/content-types"},pPe=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function gPe(e,t){for(var n=1-2*(e[t+7]>>>7),a=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),r=e[t+6]&15,s=5;s>=0;--s)r=r*256+e[t+s];return a==2047?r==0?n*(1/0):NaN:(a==0?a=-1022:(a-=1023,r+=Math.pow(2,52)),n*Math.pow(2,a-52)*r)}function yPe(e,t,n){var a=(t<0||1/t==-1/0?1:0)<<7,r=0,s=0,o=a?-t:t;isFinite(o)?o==0?r=s=0:(r=Math.floor(Math.log(o)/Math.LN2),s=o*Math.pow(2,52-r),r<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?r=-1022:(s-=Math.pow(2,52),r+=1023)):(r=2047,s=isNaN(t)?26985:0);for(var i=0;i<=5;++i,s/=256)e[n+i]=s&255;e[n+6]=(r&15)<<4|s&15,e[n+7]=r>>4|a}var MR=function(e){for(var t=[],n=10240,a=0;a<e[0].length;++a)if(e[0][a])for(var r=0,s=e[0][a].length;r<s;r+=n)t.push.apply(t,e[0][a].slice(r,r+n));return t},OR=pa?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:Kf(t)})):MR(e)}:MR,HR=function(e,t,n){for(var a=[],r=t;r<n;r+=2)a.push(String.fromCharCode(_c(e,r)));return a.join("").replace(Ho,"")},OT=pa?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf16le",t,n).replace(Ho,""):HR(e,t,n)}:HR,$R=function(e,t,n){for(var a=[],r=t;r<t+n;++r)a.push(("0"+e[r].toString(16)).slice(-2));return a.join("")},k$=pa?function(e,t,n){return Buffer.isBuffer(e)?e.toString("hex",t,t+n):$R(e,t,n)}:$R,QR=function(e,t,n){for(var a=[],r=t;r<n;r++)a.push(String.fromCharCode(qm(e,r)));return a.join("")},Bg=pa?function(t,n,a){return Buffer.isBuffer(t)?t.toString("utf8",n,a):QR(t,n,a)}:QR,T$=function(e,t){var n=_i(e,t);return n>0?Bg(e,t+4,t+4+n-1):""},I$=T$,F$=function(e,t){var n=_i(e,t);return n>0?Bg(e,t+4,t+4+n-1):""},P$=F$,D$=function(e,t){var n=2*_i(e,t);return n>0?Bg(e,t+4,t+4+n-1):""},U$=D$,R$=function(t,n){var a=_i(t,n);return a>0?OT(t,n+4,n+4+a):""},N$=R$,V$=function(e,t){var n=_i(e,t);return n>0?Bg(e,t+4,t+4+n):""},L$=V$,M$=function(e,t){return gPe(e,t)},p2=M$,O$=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};pa&&(I$=function(t,n){if(!Buffer.isBuffer(t))return T$(t,n);var a=t.readUInt32LE(n);return a>0?t.toString("utf8",n+4,n+4+a-1):""},P$=function(t,n){if(!Buffer.isBuffer(t))return F$(t,n);var a=t.readUInt32LE(n);return a>0?t.toString("utf8",n+4,n+4+a-1):""},U$=function(t,n){if(!Buffer.isBuffer(t))return D$(t,n);var a=2*t.readUInt32LE(n);return t.toString("utf16le",n+4,n+4+a-1)},N$=function(t,n){if(!Buffer.isBuffer(t))return R$(t,n);var a=t.readUInt32LE(n);return t.toString("utf16le",n+4,n+4+a)},L$=function(t,n){if(!Buffer.isBuffer(t))return V$(t,n);var a=t.readUInt32LE(n);return t.toString("utf8",n+4,n+4+a)},p2=function(t,n){return Buffer.isBuffer(t)?t.readDoubleLE(n):M$(t,n)},O$=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var qm=function(e,t){return e[t]},_c=function(e,t){return e[t+1]*256+e[t]},_Pe=function(e,t){var n=e[t+1]*256+e[t];return n<32768?n:(65535-n+1)*-1},_i=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},HA=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},wPe=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Jp(e,t){var n="",a,r,s=[],o,i,c,A;switch(t){case"dbcs":if(A=this.l,pa&&Buffer.isBuffer(this))n=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)n+=String.fromCharCode(_c(this,A)),A+=2;e*=2;break;case"utf8":n=Bg(this,this.l,this.l+e);break;case"utf16le":e*=2,n=OT(this,this.l,this.l+e);break;case"wstr":return Jp.call(this,e,"dbcs");case"lpstr-ansi":n=I$(this,this.l),e=4+_i(this,this.l);break;case"lpstr-cp":n=P$(this,this.l),e=4+_i(this,this.l);break;case"lpwstr":n=U$(this,this.l),e=4+2*_i(this,this.l);break;case"lpp4":e=4+_i(this,this.l),n=N$(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+_i(this,this.l),n=L$(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,n="";(o=qm(this,this.l+e++))!==0;)s.push(Cy(o));n=s.join("");break;case"_wstr":for(e=0,n="";(o=_c(this,this.l+e))!==0;)s.push(Cy(o)),e+=2;e+=2,n=s.join("");break;case"dbcs-cont":for(n="",A=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(A)!==-1)return o=qm(this,A),this.l=A+1,i=Jp.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+i;s.push(Cy(_c(this,A))),A+=2}n=s.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(n="",A=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(A)!==-1)return o=qm(this,A),this.l=A+1,i=Jp.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+i;s.push(Cy(qm(this,A))),A+=1}n=s.join("");break;default:switch(e){case 1:return a=qm(this,this.l),this.l++,a;case 2:return a=(t==="i"?_Pe:_c)(this,this.l),this.l+=2,a;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(a=(e>0?HA:wPe)(this,this.l),this.l+=4,a):(r=_i(this,this.l),this.l+=4,r);case 8:case-8:if(t==="f")return e==8?r=p2(this,this.l):r=p2([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,r;e=8;case 16:n=k$(this,this.l,e);break}}return this.l+=e,n}var bPe=function(e,t,n){e[n]=t&255,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24&255},xPe=function(e,t,n){e[n]=t&255,e[n+1]=t>>8&255,e[n+2]=t>>16&255,e[n+3]=t>>24&255},CPe=function(e,t,n){e[n]=t&255,e[n+1]=t>>>8&255};function SPe(e,t,n){var a=0,r=0;if(n==="dbcs"){for(r=0;r!=t.length;++r)CPe(this,t.charCodeAt(r),this.l+2*r);a=2*t.length}else if(n==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),r=0;r!=t.length;++r)this[this.l+r]=t.charCodeAt(r)&255;a=t.length}else if(n==="hex"){for(;r<e;++r)this[this.l++]=parseInt(t.slice(2*r,2*r+2),16)||0;return this}else if(n==="utf16le"){var s=Math.min(this.l+e,this.length);for(r=0;r<Math.min(t.length,e);++r){var o=t.charCodeAt(r);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(e){case 1:a=1,this[this.l]=t&255;break;case 2:a=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:a=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:a=4,bPe(this,t,this.l);break;case 8:if(a=8,n==="f"){yPe(this,t,this.l);break}case 16:break;case-4:a=4,xPe(this,t,this.l);break}return this.l+=a,this}function H$(e,t){var n=k$(this,this.l,e.length>>1);if(n!==e)throw new Error(t+"Expected "+e+" saw "+n);this.l+=e.length>>1}function Os(e,t){e.l=t,e.read_shift=Jp,e.chk=H$,e.write_shift=SPe}function wo(e,t){e.l+=t}function hs(e){var t=jd(e);return Os(t,0),t}function $c(e,t,n){if(e){var a,r,s;Os(e,e.l||0);for(var o=e.length,i=0,c=0;e.l<o;){i=e.read_shift(1),i&128&&(i=(i&127)+((e.read_shift(1)&127)<<7));var A=x2[i]||x2[65535];for(a=e.read_shift(1),s=a&127,r=1;r<4&&a&128;++r)s+=((a=e.read_shift(1))&127)<<7*r;c=e.l+s;var d=A.f&&A.f(e,s,n);if(e.l=c,t(d,A,i))return}}}function UE(){var e=[],t=pa?256:2048,n=function(A){var d=hs(A);return Os(d,0),d},a=n(t),r=function(){a&&(a.length>a.l&&(a=a.slice(0,a.l),a.l=a.length),a.length>0&&e.push(a),a=null)},s=function(A){return a&&A<a.length-a.l?a:(r(),a=n(Math.max(A+1,t)))},o=function(){return r(),_d(e)},i=function(A){r(),a=A,a.l==null&&(a.l=a.length),s(t)};return{next:s,push:i,end:o,_bufs:e}}function Zp(e,t,n){var a=Ws(e);if(t.s?(a.cRel&&(a.c+=t.s.c),a.rRel&&(a.r+=t.s.r)):(a.cRel&&(a.c+=t.c),a.rRel&&(a.r+=t.r)),!n||n.biff<12){for(;a.c>=256;)a.c-=256;for(;a.r>=65536;)a.r-=65536}return a}function GR(e,t,n){var a=Ws(e);return a.s=Zp(a.s,t.s,n),a.e=Zp(a.e,t.s,n),a}function e0(e,t){if(e.cRel&&e.c<0)for(e=Ws(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Ws(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var n=qn(e);return!e.cRel&&e.cRel!=null&&(n=kPe(n)),!e.rRel&&e.rRel!=null&&(n=EPe(n)),n}function UC(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+ys(e.s.c)+":"+(e.e.cRel?"":"$")+ys(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+js(e.s.r)+":"+(e.e.rRel?"":"$")+js(e.e.r):e0(e.s,t.biff)+":"+e0(e.e,t.biff)}function HT(e){return parseInt(BPe(e),10)-1}function js(e){return""+(e+1)}function EPe(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function BPe(e){return e.replace(/\$(\d+)$/,"$1")}function $T(e){for(var t=TPe(e),n=0,a=0;a!==t.length;++a)n=26*n+t.charCodeAt(a)-64;return n-1}function ys(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function kPe(e){return e.replace(/^([A-Z])/,"$$$1")}function TPe(e){return e.replace(/^\$([A-Z])/,"$1")}function IPe(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Mo(e){for(var t=0,n=0,a=0;a<e.length;++a){var r=e.charCodeAt(a);r>=48&&r<=57?t=10*t+(r-48):r>=65&&r<=90&&(n=26*n+(r-64))}return{c:n-1,r:t-1}}function qn(e){for(var t=e.c+1,n="";t;t=(t-1)/26|0)n=String.fromCharCode((t-1)%26+65)+n;return n+(e.r+1)}function _h(e){var t=e.indexOf(":");return t==-1?{s:Mo(e),e:Mo(e)}:{s:Mo(e.slice(0,t)),e:Mo(e.slice(t+1))}}function Sa(e,t){return typeof t>"u"||typeof t=="number"?Sa(e.s,e.e):(typeof e!="string"&&(e=qn(e)),typeof t!="string"&&(t=qn(t)),e==t?e:e+":"+t)}function Lr(e){var t={s:{c:0,r:0},e:{c:0,r:0}},n=0,a=0,r=0,s=e.length;for(n=0;a<s&&!((r=e.charCodeAt(a)-64)<1||r>26);++a)n=26*n+r;for(t.s.c=--n,n=0;a<s&&!((r=e.charCodeAt(a)-48)<0||r>9);++a)n=10*n+r;if(t.s.r=--n,a===s||r!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++a,n=0;a!=s&&!((r=e.charCodeAt(a)-64)<1||r>26);++a)n=26*n+r;for(t.e.c=--n,n=0;a!=s&&!((r=e.charCodeAt(a)-48)<0||r>9);++a)n=10*n+r;return t.e.r=--n,t}function zR(e,t){var n=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=tl(e.z,n?Go(t):t)}catch{}try{return e.w=tl((e.XF||{}).numFmtId||(n?14:0),n?Go(t):t)}catch{return""+t}}function Rc(e,t,n){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&n&&n.dateNF&&(e.z=n.dateNF),e.t=="e"?Yf[e.v]||e.v:t==null?zR(e,e.v):zR(e,t))}function aA(e,t){var n=t&&t.sheet?t.sheet:"Sheet1",a={};return a[n]=e,{SheetNames:[n],Sheets:a}}function $$(e,t,n){var a=n||{},r=e?Array.isArray(e):a.dense,s=e||(r?[]:{}),o=0,i=0;if(s&&a.origin!=null){if(typeof a.origin=="number")o=a.origin;else{var c=typeof a.origin=="string"?Mo(a.origin):a.origin;o=c.r,i=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var A={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=Lr(s["!ref"]);A.s.c=d.s.c,A.s.r=d.s.r,A.e.c=Math.max(A.e.c,d.e.c),A.e.r=Math.max(A.e.r,d.e.r),o==-1&&(A.e.r=o=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var m=0;m!=t[f].length;++m)if(!(typeof t[f][m]>"u")){var v={v:t[f][m]},p=o+f,g=i+m;if(A.s.r>p&&(A.s.r=p),A.s.c>g&&(A.s.c=g),A.e.r<p&&(A.e.r=p),A.e.c<g&&(A.e.c=g),t[f][m]&&typeof t[f][m]=="object"&&!Array.isArray(t[f][m])&&!(t[f][m]instanceof Date))v=t[f][m];else if(Array.isArray(v.v)&&(v.f=t[f][m][1],v.v=v.v[0]),v.v===null)if(v.f)v.t="n";else if(a.nullError)v.t="e",v.v=0;else if(a.sheetStubs)v.t="z";else continue;else typeof v.v=="number"?v.t="n":typeof v.v=="boolean"?v.t="b":v.v instanceof Date?(v.z=a.dateNF||ea[14],a.cellDates?(v.t="d",v.w=tl(v.z,Go(v.v))):(v.t="n",v.v=Go(v.v),v.w=tl(v.z,v.v))):v.t="s";if(r)s[p]||(s[p]=[]),s[p][g]&&s[p][g].z&&(v.z=s[p][g].z),s[p][g]=v;else{var y=qn({c:g,r:p});s[y]&&s[y].z&&(v.z=s[y].z),s[y]=v}}}return A.s.c<1e7&&(s["!ref"]=Sa(A)),s}function wh(e,t){return $$(null,e,t)}function FPe(e){return e.read_shift(4,"i")}function yo(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function PPe(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function QT(e,t){var n=e.l,a=e.read_shift(1),r=yo(e),s=[],o={t:r,h:r};if((a&1)!==0){for(var i=e.read_shift(4),c=0;c!=i;++c)s.push(PPe(e));o.r=s}else o.r=[{ich:0,ifnt:0}];return e.l=n+t,o}var DPe=QT;function ol(e){var t=e.read_shift(4),n=e.read_shift(2);return n+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:n}}function jf(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}var UPe=yo;function GT(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}var RPe=yo,RE=GT;function zT(e){var t=e.slice(e.l,e.l+4),n=t[0]&1,a=t[0]&2;e.l+=4;var r=a===0?p2([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):HA(t,0)>>2;return n?r/100:r}function Q$(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var qf=Q$;function fo(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function NPe(e){var t={},n=e.read_shift(1),a=n>>>1,r=e.read_shift(1),s=e.read_shift(2,"i"),o=e.read_shift(1),i=e.read_shift(1),c=e.read_shift(1);switch(e.l++,a){case 0:t.auto=1;break;case 1:t.index=r;var A=cf[r];A&&(t.rgb=H0(A));break;case 2:t.rgb=H0([o,i,c]);break;case 3:t.theme=r;break}return s!=0&&(t.tint=s>0?s/32767:s/32768),t}function VPe(e){var t=e.read_shift(1);e.l++;var n={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return n}function G$(e,t){var n={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},a=e.read_shift(4);switch(a){case 0:return"";case 4294967295:case 4294967294:return n[e.read_shift(4)]||""}if(a>400)throw new Error("Unsupported Clipboard: "+a.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function LPe(e){return G$(e,1)}function MPe(e){return G$(e,2)}var KT=2,ei=3,Ey=11,KR=12,g2=19,By=64,OPe=65,HPe=71,$Pe=4108,QPe=4126,Is=80,z$=81,GPe=[Is,z$],zPe={1:{n:"CodePage",t:KT},2:{n:"Category",t:Is},3:{n:"PresentationFormat",t:Is},4:{n:"ByteCount",t:ei},5:{n:"LineCount",t:ei},6:{n:"ParagraphCount",t:ei},7:{n:"SlideCount",t:ei},8:{n:"NoteCount",t:ei},9:{n:"HiddenCount",t:ei},10:{n:"MultimediaClipCount",t:ei},11:{n:"ScaleCrop",t:Ey},12:{n:"HeadingPairs",t:$Pe},13:{n:"TitlesOfParts",t:QPe},14:{n:"Manager",t:Is},15:{n:"Company",t:Is},16:{n:"LinksUpToDate",t:Ey},17:{n:"CharacterCount",t:ei},19:{n:"SharedDoc",t:Ey},22:{n:"HyperlinksChanged",t:Ey},23:{n:"AppVersion",t:ei,p:"version"},24:{n:"DigSig",t:OPe},26:{n:"ContentType",t:Is},27:{n:"ContentStatus",t:Is},28:{n:"Language",t:Is},29:{n:"Version",t:Is},255:{},2147483648:{n:"Locale",t:g2},2147483651:{n:"Behavior",t:g2},1919054434:{}},KPe={1:{n:"CodePage",t:KT},2:{n:"Title",t:Is},3:{n:"Subject",t:Is},4:{n:"Author",t:Is},5:{n:"Keywords",t:Is},6:{n:"Comments",t:Is},7:{n:"Template",t:Is},8:{n:"LastAuthor",t:Is},9:{n:"RevNumber",t:Is},10:{n:"EditTime",t:By},11:{n:"LastPrinted",t:By},12:{n:"CreatedDate",t:By},13:{n:"ModifiedDate",t:By},14:{n:"PageCount",t:ei},15:{n:"WordCount",t:ei},16:{n:"CharCount",t:ei},17:{n:"Thumbnail",t:HPe},18:{n:"Application",t:Is},19:{n:"DocSecurity",t:ei},255:{},2147483648:{n:"Locale",t:g2},2147483651:{n:"Behavior",t:g2},1919054434:{}},WR={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},WPe=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function jPe(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var qPe=jPe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),cf=Ws(qPe),Yf={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},K$={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},jR={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function YPe(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function XPe(e){var t=YPe();if(!e||!e.match)return t;var n={};if((e.match(Co)||[]).forEach(function(a){var r=On(a);switch(r[0].replace(sPe,"<")){case"<?xml":break;case"<Types":t.xmlns=r["xmlns"+(r[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":n[r.Extension]=r.ContentType;break;case"<Override":t[jR[r.ContentType]]!==void 0&&t[jR[r.ContentType]].push(r.PartName);break}}),t.xmlns!==hPe.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=n,delete t.calcchains,t}var ev={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function NE(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function t0(e,t){var n={"!id":{}};if(!e)return n;t.charAt(0)!=="/"&&(t="/"+t);var a={};return(e.match(Co)||[]).forEach(function(r){var s=On(r);if(s[0]==="<Relationship"){var o={};o.Type=s.Type,o.Target=s.Target,o.Id=s.Id,s.TargetMode&&(o.TargetMode=s.TargetMode);var i=s.TargetMode==="External"?s.Target:Fp(s.Target,t);n[i]=o,a[s.Id]=o}}),n["!id"]=a,n}var JPe="application/vnd.oasis.opendocument.spreadsheet";function ZPe(e,t){for(var n=MT(e),a,r;a=M0.exec(n);)switch(a[3]){case"manifest":break;case"file-entry":if(r=On(a[0],!1),r.path=="/"&&r.type!==JPe)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw a}}var n0=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],eDe=(function(){for(var e=new Array(n0.length),t=0;t<n0.length;++t){var n=n0[t],a="(?:"+n[0].slice(0,n[0].indexOf(":"))+":)"+n[0].slice(n[0].indexOf(":")+1);e[t]=new RegExp("<"+a+"[^>]*>([\\s\\S]*?)</"+a+">")}return e})();function W$(e){var t={};e=mr(e);for(var n=0;n<n0.length;++n){var a=n0[n],r=e.match(eDe[n]);r!=null&&r.length>0&&(t[a[1]]=Ia(r[1])),a[2]==="date"&&t[a[1]]&&(t[a[1]]=Us(t[a[1]]))}return t}var tDe=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function j$(e,t,n,a){var r=[];if(typeof e=="string")r=LR(e,a);else for(var s=0;s<e.length;++s)r=r.concat(e[s].map(function(d){return{v:d}}));var o=typeof t=="string"?LR(t,a).map(function(d){return d.v}):t,i=0,c=0;if(o.length>0)for(var A=0;A!==r.length;A+=2){switch(c=+r[A+1].v,r[A].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":n.Worksheets=c,n.SheetNames=o.slice(i,i+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":n.NamedRanges=c,n.DefinedNames=o.slice(i,i+c);break;case"Charts":case"Diagramme":n.Chartsheets=c,n.ChartNames=o.slice(i,i+c);break}i+=c}}function nDe(e,t,n){var a={};return t||(t={}),e=mr(e),tDe.forEach(function(r){var s=(e.match(L0(r[0]))||[])[1];switch(r[2]){case"string":s&&(t[r[1]]=Ia(s));break;case"bool":t[r[1]]=s==="true";break;case"raw":var o=e.match(new RegExp("<"+r[0]+"[^>]*>([\\s\\S]*?)</"+r[0]+">"));o&&o.length>0&&(a[r[1]]=o[1]);break}}),a.HeadingPairs&&a.TitlesOfParts&&j$(a.HeadingPairs,a.TitlesOfParts,t,n),t}var aDe=/<[^>]+>[^<]*/g;function rDe(e,t){var n={},a="",r=e.match(aDe);if(r)for(var s=0;s!=r.length;++s){var o=r[s],i=On(o);switch(i[0]){case"<?xml":break;case"<Properties":break;case"<property":a=Ia(i.name);break;case"</property>":a=null;break;default:if(o.indexOf("<vt:")===0){var c=o.split(">"),A=c[0].slice(4),d=c[1];switch(A){case"lpstr":case"bstr":case"lpwstr":n[a]=Ia(d);break;case"bool":n[a]=Sr(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":n[a]=parseInt(d,10);break;case"r4":case"r8":case"decimal":n[a]=parseFloat(d);break;case"filetime":case"date":n[a]=Us(d);break;case"cy":case"error":n[a]=Ia(d);break;default:if(A.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",o,A,c)}}else if(o.slice(0,2)!=="</"){if(t.WTF)throw new Error(o)}}}return n}var sDe={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},RC;function oDe(e,t,n){RC||(RC=NT(sDe)),t=RC[t]||t,e[t]=n}function WT(e){var t=e.read_shift(4),n=e.read_shift(4);return new Date((n/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function q$(e,t,n){var a=e.l,r=e.read_shift(0,"lpstr-cp");if(n)for(;e.l-a&3;)++e.l;return r}function Y$(e,t,n){var a=e.read_shift(0,"lpwstr");return a}function X$(e,t,n){return t===31?Y$(e):q$(e,t,n)}function VE(e,t,n){return X$(e,t,n===!1?0:4)}function iDe(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return X$(e,t,0)}function lDe(e){for(var t=e.read_shift(4),n=[],a=0;a!=t;++a){var r=e.l;n[a]=e.read_shift(0,"lpwstr").replace(Ho,""),e.l-r&2&&(e.l+=2)}return n}function uDe(e){for(var t=e.read_shift(4),n=[],a=0;a!=t;++a)n[a]=e.read_shift(0,"lpstr-cp").replace(Ho,"");return n}function cDe(e){var t=e.l,n=y2(e,z$);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var a=y2(e,ei);return[n,a]}function dDe(e){for(var t=e.read_shift(4),n=[],a=0;a<t/2;++a)n.push(cDe(e));return n}function qR(e,t){for(var n=e.read_shift(4),a={},r=0;r!=n;++r){var s=e.read_shift(4),o=e.read_shift(4);a[s]=e.read_shift(o,t===1200?"utf16le":"utf8").replace(Ho,"").replace(Ip,"!"),t===1200&&o%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),a}function J$(e){var t=e.read_shift(4),n=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),n}function ADe(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function y2(e,t,n){var a=e.read_shift(2),r,s=n||{};if(e.l+=2,t!==KR&&a!==t&&GPe.indexOf(t)===-1&&!((t&65534)==4126&&(a&65534)==4126))throw new Error("Expected type "+t+" saw "+a);switch(t===KR?a:t){case 2:return r=e.read_shift(2,"i"),s.raw||(e.l+=2),r;case 3:return r=e.read_shift(4,"i"),r;case 11:return e.read_shift(4)!==0;case 19:return r=e.read_shift(4),r;case 30:return q$(e,a,4).replace(Ho,"");case 31:return Y$(e);case 64:return WT(e);case 65:return J$(e);case 71:return ADe(e);case 80:return VE(e,a,!s.raw).replace(Ho,"");case 81:return iDe(e,a).replace(Ho,"");case 4108:return dDe(e);case 4126:case 4127:return a==4127?lDe(e):uDe(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+a)}}function YR(e,t){var n=e.l,a=e.read_shift(4),r=e.read_shift(4),s=[],o=0,i=0,c=-1,A={};for(o=0;o!=r;++o){var d=e.read_shift(4),f=e.read_shift(4);s[o]=[d,f+n]}s.sort(function(b,x){return b[1]-x[1]});var m={};for(o=0;o!=r;++o){if(e.l!==s[o][1]){var v=!0;if(o>0&&t)switch(t[s[o-1][0]].t){case 2:e.l+2===s[o][1]&&(e.l+=2,v=!1);break;case 80:e.l<=s[o][1]&&(e.l=s[o][1],v=!1);break;case 4108:e.l<=s[o][1]&&(e.l=s[o][1],v=!1);break}if((!t||o==0)&&e.l<=s[o][1]&&(v=!1,e.l=s[o][1]),v)throw new Error("Read Error: Expected address "+s[o][1]+" at "+e.l+" :"+o)}if(t){var p=t[s[o][0]];if(m[p.n]=y2(e,p.t,{raw:!0}),p.p==="version"&&(m[p.n]=String(m[p.n]>>16)+"."+("0000"+String(m[p.n]&65535)).slice(-4)),p.n=="CodePage")switch(m[p.n]){case 0:m[p.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Il(i=m[p.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+m[p.n])}}else if(s[o][0]===1){if(i=m.CodePage=y2(e,KT),Il(i),c!==-1){var g=e.l;e.l=s[c][1],A=qR(e,i),e.l=g}}else if(s[o][0]===0){if(i===0){c=o,e.l=s[o+1][1];continue}A=qR(e,i)}else{var y=A[s[o][0]],w;switch(e[e.l]){case 65:e.l+=4,w=J$(e);break;case 30:e.l+=4,w=VE(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,w=VE(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,w=e.read_shift(4,"i");break;case 19:e.l+=4,w=e.read_shift(4);break;case 5:e.l+=4,w=e.read_shift(8,"f");break;case 11:e.l+=4,w=Kr(e,4);break;case 64:e.l+=4,w=Us(WT(e));break;default:throw new Error("unparsed value: "+e[e.l])}m[y]=w}}return e.l=n+a,m}function XR(e,t,n){var a=e.content;if(!a)return{};Os(a,0);var r,s,o,i,c=0;a.chk("feff","Byte Order: "),a.read_shift(2);var A=a.read_shift(4),d=a.read_shift(16);if(d!==ba.utils.consts.HEADER_CLSID&&d!==n)throw new Error("Bad PropertySet CLSID "+d);if(r=a.read_shift(4),r!==1&&r!==2)throw new Error("Unrecognized #Sets: "+r);if(s=a.read_shift(16),i=a.read_shift(4),r===1&&i!==a.l)throw new Error("Length mismatch: "+i+" !== "+a.l);r===2&&(o=a.read_shift(16),c=a.read_shift(4));var f=YR(a,t),m={SystemIdentifier:A};for(var v in f)m[v]=f[v];if(m.FMTID=s,r===1)return m;if(c-a.l==2&&(a.l+=2),a.l!==c)throw new Error("Length mismatch 2: "+a.l+" !== "+c);var p;try{p=YR(a,null)}catch{}for(v in p)m[v]=p[v];return m.FMTID=[s,o],m}function od(e,t){return e.read_shift(t),null}function fDe(e,t,n){for(var a=[],r=e.l+t;e.l<r;)a.push(n(e,r-e.l));if(r!==e.l)throw new Error("Slurp error");return a}function Kr(e,t){return e.read_shift(t)===1}function rs(e){return e.read_shift(2,"u")}function Z$(e,t){return fDe(e,t,rs)}function mDe(e){var t=e.read_shift(1),n=e.read_shift(1);return n===1?t:t===1}function kg(e,t,n){var a=e.read_shift(n&&n.biff>=12?2:1),r="sbcs-cont";if(n&&n.biff>=8,!n||n.biff==8){var s=e.read_shift(1);s&&(r="dbcs-cont")}else n.biff==12&&(r="wstr");n.biff>=2&&n.biff<=5&&(r="cpstr");var o=a?e.read_shift(a,r):"";return o}function vDe(e){var t=e.read_shift(2),n=e.read_shift(1),a=n&4,r=n&8,s=1+(n&1),o=0,i,c={};r&&(o=e.read_shift(2)),a&&(i=e.read_shift(4));var A=s==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,A);return r&&(e.l+=4*o),a&&(e.l+=i),c.t=d,r||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function Ef(e,t,n){var a;if(n){if(n.biff>=2&&n.biff<=5)return e.read_shift(t,"cpstr");if(n.biff>=12)return e.read_shift(t,"dbcs-cont")}var r=e.read_shift(1);return r===0?a=e.read_shift(t,"sbcs-cont"):a=e.read_shift(t,"dbcs-cont"),a}function Tg(e,t,n){var a=e.read_shift(n&&n.biff==2?1:2);return a===0?(e.l++,""):Ef(e,a,n)}function Xf(e,t,n){if(n.biff>5)return Tg(e,t,n);var a=e.read_shift(1);return a===0?(e.l++,""):e.read_shift(a,n.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function hDe(e){var t=e.read_shift(1);e.l++;var n=e.read_shift(2);return e.l+=2,[t,n]}function pDe(e){var t=e.read_shift(4),n=e.l,a=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(a=!0),e.l=n);var r=e.read_shift((a?t-24:t)>>1,"utf16le").replace(Ho,"");return a&&(e.l+=24),r}function gDe(e){for(var t=e.read_shift(2),n="";t-- >0;)n+="../";var a=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var r=e.read_shift(4);if(r===0)return n+a.replace(/\\/g,"/");var s=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=e.read_shift(s>>1,"utf16le").replace(Ho,"");return n+o}function yDe(e,t){var n=e.read_shift(16);switch(n){case"e0c9ea79f9bace118c8200aa004ba90b":return pDe(e);case"0303000000000000c000000000000046":return gDe(e);default:throw new Error("Unsupported Moniker "+n)}}function ky(e){var t=e.read_shift(4),n=t>0?e.read_shift(t,"utf16le").replace(Ho,""):"";return n}function _De(e,t){var n=e.l+t,a=e.read_shift(4);if(a!==2)throw new Error("Unrecognized streamVersion: "+a);var r=e.read_shift(2);e.l+=2;var s,o,i,c,A="",d,f;r&16&&(s=ky(e,n-e.l)),r&128&&(o=ky(e,n-e.l)),(r&257)===257&&(i=ky(e,n-e.l)),(r&257)===1&&(c=yDe(e,n-e.l)),r&8&&(A=ky(e,n-e.l)),r&32&&(d=e.read_shift(16)),r&64&&(f=WT(e)),e.l=n;var m=o||i||c||"";m&&A&&(m+="#"+A),m||(m="#"+A),r&2&&m.charAt(0)=="/"&&m.charAt(1)!="/"&&(m="file://"+m);var v={Target:m};return d&&(v.guid=d),f&&(v.time=f),s&&(v.Tooltip=s),v}function e9(e){var t=e.read_shift(1),n=e.read_shift(1),a=e.read_shift(1),r=e.read_shift(1);return[t,n,a,r]}function t9(e,t){var n=e9(e);return n[3]=0,n}function zu(e){var t=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{r:t,c:n,ixfe:a}}function wDe(e){var t=e.read_shift(2),n=e.read_shift(2);return e.l+=8,{type:t,flags:n}}function bDe(e,t,n){return t===0?"":Xf(e,t,n)}function xDe(e,t,n){var a=n.biff>8?4:2,r=e.read_shift(a),s=e.read_shift(a,"i"),o=e.read_shift(a,"i");return[r,s,o]}function n9(e){var t=e.read_shift(2),n=zT(e);return[t,n]}function CDe(e,t,n){e.l+=4,t-=4;var a=e.l+t,r=kg(e,t,n),s=e.read_shift(2);if(a-=e.l,s!==a)throw new Error("Malformed AddinUdf: padding = "+a+" != "+s);return e.l+=s,r}function $w(e){var t=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),r=e.read_shift(2);return{s:{c:a,r:t},e:{c:r,r:n}}}function a9(e){var t=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(1),r=e.read_shift(1);return{s:{c:a,r:t},e:{c:r,r:n}}}var SDe=a9;function r9(e){e.l+=4;var t=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return e.l+=12,[n,t,a]}function EDe(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function BDe(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function no(e){e.l+=2,e.l+=e.read_shift(2)}var kDe={0:no,4:no,5:no,6:no,7:BDe,8:no,9:no,10:no,11:no,12:no,13:EDe,14:no,15:no,16:no,17:no,18:no,19:no,20:no,21:r9};function TDe(e,t){for(var n=e.l+t,a=[];e.l<n;){var r=e.read_shift(2);e.l-=2;try{a.push(kDe[r](e,n-e.l))}catch{return e.l=n,a}}return e.l!=n&&(e.l=n),a}function Ty(e,t){var n={BIFFVer:0,dt:0};switch(n.BIFFVer=e.read_shift(2),t-=2,t>=2&&(n.dt=e.read_shift(2),e.l-=2),n.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+n.BIFFVer)}return e.read_shift(t),n}function IDe(e,t){return t===0||e.read_shift(2),1200}function FDe(e,t,n){if(n.enc)return e.l+=t,"";var a=e.l,r=Xf(e,0,n);return e.read_shift(t+a-e.l),r}function PDe(e,t,n){var a=n&&n.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:a&16,fBelow:a&64,fRight:a&128}}function DDe(e,t,n){var a=e.read_shift(4),r=e.read_shift(1)&3,s=e.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var o=kg(e,0,n);return o.length===0&&(o="Sheet1"),{pos:a,hs:r,dt:s,name:o}}function UDe(e,t){for(var n=e.l+t,a=e.read_shift(4),r=e.read_shift(4),s=[],o=0;o!=r&&e.l<n;++o)s.push(vDe(e));return s.Count=a,s.Unique=r,s}function RDe(e,t){var n={};return n.dsst=e.read_shift(2),e.l+=t-2,n}function NDe(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var n=e.read_shift(2);e.l+=4;var a=e.read_shift(1);return e.l+=3,a&7&&(t.level=a&7),a&32&&(t.hidden=!0),a&64&&(t.hpt=n/20),t}function VDe(e){var t=wDe(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var n=e.read_shift(4);return n!==0}function LDe(e){return e.read_shift(2),e.read_shift(4)}function JR(e,t,n){var a=0;n&&n.biff==2||(a=e.read_shift(2));var r=e.read_shift(2);n&&n.biff==2&&(a=1-(r>>15),r&=32767);var s={Unsynced:a&1,DyZero:(a&2)>>1,ExAsc:(a&4)>>2,ExDsc:(a&8)>>3};return[s,r]}function MDe(e){var t=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(2),o=e.read_shift(2),i=e.read_shift(2),c=e.read_shift(2),A=e.read_shift(2);return{Pos:[t,n],Dim:[a,r],Flags:s,CurTab:o,FirstTab:i,Selected:c,TabRatio:A}}function ODe(e,t,n){if(n&&n.biff>=2&&n.biff<5)return{};var a=e.read_shift(2);return{RTL:a&64}}function HDe(){}function $De(e,t,n){var a={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(n&&n.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return a.name=kg(e,0,n),a}function QDe(e){var t=zu(e);return t.isst=e.read_shift(4),t}function GDe(e,t,n){n.biffguess&&n.biff==2&&(n.biff=5);var a=e.l+t,r=zu(e);n.biff==2&&e.l++;var s=Tg(e,a-e.l,n);return r.val=s,r}function zDe(e,t,n){var a=e.read_shift(2),r=Xf(e,0,n);return[a,r]}var KDe=Xf;function ZR(e,t,n){var a=e.l+t,r=n.biff==8||!n.biff?4:2,s=e.read_shift(r),o=e.read_shift(r),i=e.read_shift(2),c=e.read_shift(2);return e.l=a,{s:{r:s,c:i},e:{r:o,c}}}function WDe(e){var t=e.read_shift(2),n=e.read_shift(2),a=n9(e);return{r:t,c:n,ixfe:a[0],rknum:a[1]}}function jDe(e,t){for(var n=e.l+t-2,a=e.read_shift(2),r=e.read_shift(2),s=[];e.l<n;)s.push(n9(e));if(e.l!==n)throw new Error("MulRK read error");var o=e.read_shift(2);if(s.length!=o-r+1)throw new Error("MulRK length mismatch");return{r:a,c:r,C:o,rkrec:s}}function qDe(e,t){for(var n=e.l+t-2,a=e.read_shift(2),r=e.read_shift(2),s=[];e.l<n;)s.push(e.read_shift(2));if(e.l!==n)throw new Error("MulBlank read error");var o=e.read_shift(2);if(s.length!=o-r+1)throw new Error("MulBlank length mismatch");return{r:a,c:r,C:o,ixfe:s}}function YDe(e,t,n,a){var r={},s=e.read_shift(4),o=e.read_shift(4),i=e.read_shift(4),c=e.read_shift(2);return r.patternType=WPe[i>>26],a.cellStyles&&(r.alc=s&7,r.fWrap=s>>3&1,r.alcV=s>>4&7,r.fJustLast=s>>7&1,r.trot=s>>8&255,r.cIndent=s>>16&15,r.fShrinkToFit=s>>20&1,r.iReadOrder=s>>22&2,r.fAtrNum=s>>26&1,r.fAtrFnt=s>>27&1,r.fAtrAlc=s>>28&1,r.fAtrBdr=s>>29&1,r.fAtrPat=s>>30&1,r.fAtrProt=s>>31&1,r.dgLeft=o&15,r.dgRight=o>>4&15,r.dgTop=o>>8&15,r.dgBottom=o>>12&15,r.icvLeft=o>>16&127,r.icvRight=o>>23&127,r.grbitDiag=o>>30&3,r.icvTop=i&127,r.icvBottom=i>>7&127,r.icvDiag=i>>14&127,r.dgDiag=i>>21&15,r.icvFore=c&127,r.icvBack=c>>7&127,r.fsxButton=c>>14&1),r}function XDe(e,t,n){var a={};return a.ifnt=e.read_shift(2),a.numFmtId=e.read_shift(2),a.flags=e.read_shift(2),a.fStyle=a.flags>>2&1,t-=6,a.data=YDe(e,t,a.fStyle,n),a}function JDe(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function eN(e,t,n){var a=zu(e);(n.biff==2||t==9)&&++e.l;var r=mDe(e);return a.val=r,a.t=r===!0||r===!1?"b":"e",a}function ZDe(e,t,n){n.biffguess&&n.biff==2&&(n.biff=5);var a=zu(e),r=fo(e);return a.val=r,a}var tN=bDe;function e3e(e,t,n){var a=e.l+t,r=e.read_shift(2),s=e.read_shift(2);if(n.sbcch=s,s==1025||s==14849)return[s,r];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var o=Ef(e,s),i=[];a>e.l;)i.push(Tg(e));return[s,r,o,i]}function nN(e,t,n){var a=e.read_shift(2),r,s={fBuiltIn:a&1,fWantAdvise:a>>>1&1,fWantPict:a>>>2&1,fOle:a>>>3&1,fOleLink:a>>>4&1,cf:a>>>5&1023,fIcon:a>>>15&1};return n.sbcch===14849&&(r=CDe(e,t-2,n)),s.body=r||e.read_shift(t-2),typeof r=="string"&&(s.Name=r),s}var t3e=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function aN(e,t,n){var a=e.l+t,r=e.read_shift(2),s=e.read_shift(1),o=e.read_shift(1),i=e.read_shift(n&&n.biff==2?1:2),c=0;(!n||n.biff>=5)&&(n.biff!=5&&(e.l+=2),c=e.read_shift(2),n.biff==5&&(e.l+=2),e.l+=4);var A=Ef(e,o,n);r&32&&(A=t3e[A.charCodeAt(0)]);var d=a-e.l;n&&n.biff==2&&--d;var f=a==e.l||i===0||!(d>0)?[]:NNe(e,d,n,i);return{chKey:s,Name:A,itab:c,rgce:f}}function s9(e,t,n){if(n.biff<8)return n3e(e,t,n);for(var a=[],r=e.l+t,s=e.read_shift(n.biff>8?4:2);s--!==0;)a.push(xDe(e,n.biff>8?12:6,n));if(e.l!=r)throw new Error("Bad ExternSheet: "+e.l+" != "+r);return a}function n3e(e,t,n){e[e.l+1]==3&&e[e.l]++;var a=kg(e,t,n);return a.charCodeAt(0)==3?a.slice(1):a}function a3e(e,t,n){if(n.biff<8){e.l+=t;return}var a=e.read_shift(2),r=e.read_shift(2),s=Ef(e,a,n),o=Ef(e,r,n);return[s,o]}function r3e(e,t,n){var a=a9(e);e.l++;var r=e.read_shift(1);return t-=8,[VNe(e,t,n),r,a]}function rN(e,t,n){var a=SDe(e);switch(n.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[a,UNe(e,t,n)]}function s3e(e){var t=e.read_shift(4)!==0,n=e.read_shift(4)!==0,a=e.read_shift(4);return[t,n,a]}function o3e(e,t,n){if(!(n.biff<8)){var a=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(2),o=e.read_shift(2),i=Xf(e,0,n);return n.biff<8&&e.read_shift(1),[{r:a,c:r},i,o,s]}}function i3e(e,t,n){return o3e(e,t,n)}function l3e(e,t){for(var n=[],a=e.read_shift(2);a--;)n.push($w(e));return n}function u3e(e,t,n){if(n&&n.biff<8)return d3e(e,t,n);var a=r9(e),r=TDe(e,t-22,a[1]);return{cmo:a,ft:r}}var c3e={8:function(e,t){var n=e.l+t;e.l+=10;var a=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var r=e.read_shift(1);return e.l+=r,e.l=n,{fmt:a}}};function d3e(e,t,n){e.l+=4;var a=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var o=[];return o.push((c3e[a]||wo)(e,t,n)),{cmo:[r,a,s],ft:o}}function A3e(e,t,n){var a=e.l,r="";try{e.l+=4;var s=(n.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(s)==-1?e.l+=6:o=hDe(e,6,n);var i=e.read_shift(2);e.read_shift(2),rs(e,2);var c=e.read_shift(2);e.l+=c;for(var A=1;A<e.lens.length-1;++A){if(e.l-a!=e.lens[A])throw new Error("TxO: bad continue record");var d=e[e.l],f=Ef(e,e.lens[A+1]-e.lens[A]-1);if(r+=f,r.length>=(d?i:2*i))break}if(r.length!==i&&r.length!==i*2)throw new Error("cchText: "+i+" != "+r.length);return e.l=a+t,{t:r}}catch{return e.l=a+t,{t:r}}}function f3e(e,t){var n=$w(e);e.l+=16;var a=_De(e,t-24);return[n,a]}function m3e(e,t){e.read_shift(2);var n=$w(e),a=e.read_shift((t-10)/2,"dbcs-cont");return a=a.replace(Ho,""),[n,a]}function v3e(e){var t=[0,0],n;return n=e.read_shift(2),t[0]=WR[n]||n,n=e.read_shift(2),t[1]=WR[n]||n,t}function h3e(e){for(var t=e.read_shift(2),n=[];t-- >0;)n.push(t9(e));return n}function p3e(e){for(var t=e.read_shift(2),n=[];t-- >0;)n.push(t9(e));return n}function g3e(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function o9(e,t,n){if(!n.cellStyles)return wo(e,t);var a=n&&n.biff>=12?4:2,r=e.read_shift(a),s=e.read_shift(a),o=e.read_shift(a),i=e.read_shift(a),c=e.read_shift(2);a==2&&(e.l+=2);var A={s:r,e:s,w:o,ixfe:i,flags:c};return(n.biff>=5||!n.biff)&&(A.level=c>>8&7),A}function y3e(e,t){var n={};return t<32||(e.l+=16,n.header=fo(e),n.footer=fo(e),e.l+=2),n}function _3e(e,t,n){var a={area:!1};if(n.biff!=5)return e.l+=t,a;var r=e.read_shift(1);return e.l+=3,r&16&&(a.area=!0),a}var w3e=zu,b3e=Z$,x3e=Tg;function C3e(e){var t=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(4),r={fmt:t,env:n,len:a,data:e.slice(e.l,e.l+a)};return e.l+=a,r}function S3e(e,t,n){n.biffguess&&n.biff==5&&(n.biff=2);var a=zu(e);++e.l;var r=Xf(e,t-7,n);return a.t="str",a.val=r,a}function E3e(e){var t=zu(e);++e.l;var n=fo(e);return t.t="n",t.val=n,t}function B3e(e){var t=zu(e);++e.l;var n=e.read_shift(2);return t.t="n",t.val=n,t}function k3e(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function T3e(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function I3e(e,t,n){var a=e.l+t,r=zu(e),s=e.read_shift(2),o=Ef(e,s,n);return e.l=a,r.t="str",r.val=o,r}var F3e=[2,3,48,49,131,139,140,245],sN=(function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=NT({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(i,c){var A=[],d=jd(1);switch(c.type){case"base64":d=Sl(Ti(i));break;case"binary":d=Sl(i);break;case"buffer":case"array":d=i;break}Os(d,0);var f=d.read_shift(1),m=!!(f&136),v=!1,p=!1;switch(f){case 2:break;case 3:break;case 48:v=!0,m=!0;break;case 49:v=!0,m=!0;break;case 131:break;case 139:break;case 140:p=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var g=0,y=521;f==2&&(g=d.read_shift(2)),d.l+=3,f!=2&&(g=d.read_shift(4)),g>1048576&&(g=1e6),f!=2&&(y=d.read_shift(2));var w=d.read_shift(2),b=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(b=e[d[d.l]]),d.l+=1,d.l+=2),p&&(d.l+=36);for(var x=[],T={},D=Math.min(d.length,f==2?521:y-10-(v?264:0)),k=p?32:11;d.l<D&&d[d.l]!=13;)switch(T={},T.name=N0.utils.decode(b,d.slice(d.l,d.l+k)).replace(/[\u0000\r\n].*$/g,""),d.l+=k,T.type=String.fromCharCode(d.read_shift(1)),f!=2&&!p&&(T.offset=d.read_shift(4)),T.len=d.read_shift(1),f==2&&(T.offset=d.read_shift(2)),T.dec=d.read_shift(1),T.name.length&&x.push(T),f!=2&&(d.l+=p?13:14),T.type){case"B":(!v||T.len!=8)&&c.WTF&&console.log("Skipping "+T.name+":"+T.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+T.name+":"+T.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+T.type)}if(d[d.l]!==13&&(d.l=y-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=y;var S=0,E=0;for(A[0]=[],E=0;E!=x.length;++E)A[0][E]=x[E].name;for(;g-- >0;){if(d[d.l]===42){d.l+=w;continue}for(++d.l,A[++S]=[],E=0,E=0;E!=x.length;++E){var C=d.slice(d.l,d.l+x[E].len);d.l+=x[E].len,Os(C,0);var U=N0.utils.decode(b,C);switch(x[E].type){case"C":U.trim().length&&(A[S][E]=U.replace(/\s+$/,""));break;case"D":U.length===8?A[S][E]=new Date(+U.slice(0,4),+U.slice(4,6)-1,+U.slice(6,8)):A[S][E]=U;break;case"F":A[S][E]=parseFloat(U.trim());break;case"+":case"I":A[S][E]=p?C.read_shift(-4,"i")^2147483648:C.read_shift(4,"i");break;case"L":switch(U.trim().toUpperCase()){case"Y":case"T":A[S][E]=!0;break;case"N":case"F":A[S][E]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+U+"|")}break;case"M":if(!m)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));A[S][E]="##MEMO##"+(p?parseInt(U.trim(),10):C.read_shift(4));break;case"N":U=U.replace(/\u0000/g,"").trim(),U&&U!="."&&(A[S][E]=+U||0);break;case"@":A[S][E]=new Date(C.read_shift(-8,"f")-621356832e5);break;case"T":A[S][E]=new Date((C.read_shift(4)-2440588)*864e5+C.read_shift(4));break;case"Y":A[S][E]=C.read_shift(4,"i")/1e4+C.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":A[S][E]=-C.read_shift(-8,"f");break;case"B":if(v&&x[E].len==8){A[S][E]=C.read_shift(8,"f");break}case"G":case"P":C.l+=x[E].len;break;case"0":if(x[E].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+x[E].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(A=A.slice(0,c.sheetRows)),c.DBF=x,A}function a(i,c){var A=c||{};A.dateNF||(A.dateNF="yyyymmdd");var d=wh(n(i,A),A);return d["!cols"]=A.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete A.DBF,d}function r(i,c){try{return aA(a(i,c),c)}catch(A){if(c&&c.WTF)throw A}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function o(i,c){var A=c||{};if(+A.codepage>=0&&Il(+A.codepage),A.type=="string")throw new Error("Cannot write DBF to JS string");var d=UE(),f=GE(i,{header:1,raw:!0,cellDates:!0}),m=f[0],v=f.slice(1),p=i["!cols"]||[],g=0,y=0,w=0,b=1;for(g=0;g<m.length;++g){if(((p[g]||{}).DBF||{}).name){m[g]=p[g].DBF.name,++w;continue}if(m[g]!=null){if(++w,typeof m[g]=="number"&&(m[g]=m[g].toString(10)),typeof m[g]!="string")throw new Error("DBF Invalid column name "+m[g]+" |"+typeof m[g]+"|");if(m.indexOf(m[g])!==g){for(y=0;y<1024;++y)if(m.indexOf(m[g]+"_"+y)==-1){m[g]+="_"+y;break}}}}var x=Lr(i["!ref"]),T=[],D=[],k=[];for(g=0;g<=x.e.c-x.s.c;++g){var S="",E="",C=0,U=[];for(y=0;y<v.length;++y)v[y][g]!=null&&U.push(v[y][g]);if(U.length==0||m[g]==null){T[g]="?";continue}for(y=0;y<U.length;++y){switch(typeof U[y]){case"number":E="B";break;case"string":E="C";break;case"boolean":E="L";break;case"object":E=U[y]instanceof Date?"D":"C";break;default:E="C"}C=Math.max(C,String(U[y]).length),S=S&&S!=E?"C":E}C>250&&(C=250),E=((p[g]||{}).DBF||{}).type,E=="C"&&p[g].DBF.len>C&&(C=p[g].DBF.len),S=="B"&&E=="N"&&(S="N",k[g]=p[g].DBF.dec,C=p[g].DBF.len),D[g]=S=="C"||E=="N"?C:s[S]||0,b+=D[g],T[g]=S}var F=d.next(32);for(F.write_shift(4,318902576),F.write_shift(4,v.length),F.write_shift(2,296+32*w),F.write_shift(2,b),g=0;g<4;++g)F.write_shift(4,0);for(F.write_shift(4,0|(+t[s$]||3)<<8),g=0,y=0;g<m.length;++g)if(m[g]!=null){var L=d.next(32),H=(m[g].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);L.write_shift(1,H,"sbcs"),L.write_shift(1,T[g]=="?"?"C":T[g],"sbcs"),L.write_shift(4,y),L.write_shift(1,D[g]||s[T[g]]||0),L.write_shift(1,k[g]||0),L.write_shift(1,2),L.write_shift(4,0),L.write_shift(1,0),L.write_shift(4,0),L.write_shift(4,0),y+=D[g]||s[T[g]]||0}var ue=d.next(264);for(ue.write_shift(4,13),g=0;g<65;++g)ue.write_shift(4,0);for(g=0;g<v.length;++g){var ie=d.next(b);for(ie.write_shift(1,0),y=0;y<m.length;++y)if(m[y]!=null)switch(T[y]){case"L":ie.write_shift(1,v[g][y]==null?63:v[g][y]?84:70);break;case"B":ie.write_shift(8,v[g][y]||0,"f");break;case"N":var Q="0";for(typeof v[g][y]=="number"&&(Q=v[g][y].toFixed(k[y]||0)),w=0;w<D[y]-Q.length;++w)ie.write_shift(1,32);ie.write_shift(1,Q,"sbcs");break;case"D":v[g][y]?(ie.write_shift(4,("0000"+v[g][y].getFullYear()).slice(-4),"sbcs"),ie.write_shift(2,("00"+(v[g][y].getMonth()+1)).slice(-2),"sbcs"),ie.write_shift(2,("00"+v[g][y].getDate()).slice(-2),"sbcs")):ie.write_shift(8,"00000000","sbcs");break;case"C":var X=String(v[g][y]!=null?v[g][y]:"").slice(0,D[y]);for(ie.write_shift(1,X,"sbcs"),w=0;w<D[y]-X.length;++w)ie.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:r,to_sheet:a,from_sheet:o}})(),P3e=(function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Du(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),n=function(m,v){var p=e[v];return typeof p=="number"?wR(p):p},a=function(m,v,p){var g=v.charCodeAt(0)-32<<4|p.charCodeAt(0)-48;return g==59?m:wR(g)};e["|"]=254;function r(m,v){switch(v.type){case"base64":return s(Ti(m),v);case"binary":return s(m,v);case"buffer":return s(pa&&Buffer.isBuffer(m)?m.toString("binary"):Wf(m),v);case"array":return s(Sf(m),v)}throw new Error("Unrecognized type "+v.type)}function s(m,v){var p=m.split(/[\n\r]+/),g=-1,y=-1,w=0,b=0,x=[],T=[],D=null,k={},S=[],E=[],C=[],U=0,F;for(+v.codepage>=0&&Il(+v.codepage);w!==p.length;++w){U=0;var L=p[w].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,a).replace(t,n),H=L.replace(/;;/g,"\0").split(";").map(function(M){return M.replace(/\u0000/g,";")}),ue=H[0],ie;if(L.length>0)switch(ue){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":H[1].charAt(0)=="P"&&T.push(L.slice(3).replace(/;;/g,";"));break;case"C":var Q=!1,X=!1,le=!1,Z=!1,re=-1,q=-1;for(b=1;b<H.length;++b)switch(H[b].charAt(0)){case"A":break;case"X":y=parseInt(H[b].slice(1))-1,X=!0;break;case"Y":for(g=parseInt(H[b].slice(1))-1,X||(y=0),F=x.length;F<=g;++F)x[F]=[];break;case"K":ie=H[b].slice(1),ie.charAt(0)==='"'?ie=ie.slice(1,ie.length-1):ie==="TRUE"?ie=!0:ie==="FALSE"?ie=!1:isNaN(Nl(ie))?isNaN(zv(ie).getDate())||(ie=Us(ie)):(ie=Nl(ie),D!==null&&yh(D)&&(ie=Hw(ie))),Q=!0;break;case"E":Z=!0;var P=wv(H[b].slice(1),{r:g,c:y});x[g][y]=[x[g][y],P];break;case"S":le=!0,x[g][y]=[x[g][y],"S5S"];break;case"G":break;case"R":re=parseInt(H[b].slice(1))-1;break;case"C":q=parseInt(H[b].slice(1))-1;break;default:if(v&&v.WTF)throw new Error("SYLK bad record "+L)}if(Q&&(x[g][y]&&x[g][y].length==2?x[g][y][0]=ie:x[g][y]=ie,D=null),le){if(Z)throw new Error("SYLK shared formula cannot have own formula");var G=re>-1&&x[re][q];if(!G||!G[1])throw new Error("SYLK shared formula cannot find base");x[g][y][1]=h9(G[1],{r:g-re,c:y-q})}break;case"F":var J=0;for(b=1;b<H.length;++b)switch(H[b].charAt(0)){case"X":y=parseInt(H[b].slice(1))-1,++J;break;case"Y":for(g=parseInt(H[b].slice(1))-1,F=x.length;F<=g;++F)x[F]=[];break;case"M":U=parseInt(H[b].slice(1))/20;break;case"F":break;case"G":break;case"P":D=T[parseInt(H[b].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(C=H[b].slice(1).split(" "),F=parseInt(C[0],10);F<=parseInt(C[1],10);++F)U=parseInt(C[2],10),E[F-1]=U===0?{hidden:!0}:{wch:U},Kv(E[F-1]);break;case"C":y=parseInt(H[b].slice(1))-1,E[y]||(E[y]={});break;case"R":g=parseInt(H[b].slice(1))-1,S[g]||(S[g]={}),U>0?(S[g].hpt=U,S[g].hpx=$0(U)):U===0&&(S[g].hidden=!0);break;default:if(v&&v.WTF)throw new Error("SYLK bad record "+L)}J<1&&(D=null);break;default:if(v&&v.WTF)throw new Error("SYLK bad record "+L)}}return S.length>0&&(k["!rows"]=S),E.length>0&&(k["!cols"]=E),v&&v.sheetRows&&(x=x.slice(0,v.sheetRows)),[x,k]}function o(m,v){var p=r(m,v),g=p[0],y=p[1],w=wh(g,v);return Du(y).forEach(function(b){w[b]=y[b]}),w}function i(m,v){return aA(o(m,v),v)}function c(m,v,p,g){var y="C;Y"+(p+1)+";X"+(g+1)+";K";switch(m.t){case"n":y+=m.v||0,m.f&&!m.F&&(y+=";E"+gRe(m.f,{r:p,c:g}));break;case"b":y+=m.v?"TRUE":"FALSE";break;case"e":y+=m.w||m.v;break;case"d":y+='"'+(m.w||m.v)+'"';break;case"s":y+='"'+m.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return y}function A(m,v){v.forEach(function(p,g){var y="F;W"+(g+1)+" "+(g+1)+" ";p.hidden?y+="0":(typeof p.width=="number"&&!p.wpx&&(p.wpx=w2(p.width)),typeof p.wpx=="number"&&!p.wch&&(p.wch=b2(p.wpx)),typeof p.wch=="number"&&(y+=Math.round(p.wch))),y.charAt(y.length-1)!=" "&&m.push(y)})}function d(m,v){v.forEach(function(p,g){var y="F;";p.hidden?y+="M0;":p.hpt?y+="M"+20*p.hpt+";":p.hpx&&(y+="M"+20*f9(p.hpx)+";"),y.length>2&&m.push(y+"R"+(g+1))})}function f(m,v){var p=["ID;PWXL;N;E"],g=[],y=Lr(m["!ref"]),w,b=Array.isArray(m),x=`\r
`;p.push("P;PGeneral"),p.push("F;P0;DG0G8;M255"),m["!cols"]&&A(p,m["!cols"]),m["!rows"]&&d(p,m["!rows"]),p.push("B;Y"+(y.e.r-y.s.r+1)+";X"+(y.e.c-y.s.c+1)+";D"+[y.s.c,y.s.r,y.e.c,y.e.r].join(" "));for(var T=y.s.r;T<=y.e.r;++T)for(var D=y.s.c;D<=y.e.c;++D){var k=qn({r:T,c:D});w=b?(m[T]||[])[D]:m[k],!(!w||w.v==null&&(!w.f||w.F))&&g.push(c(w,m,T,D))}return p.join(x)+x+g.join(x)+x+"E"+x}return{to_workbook:i,to_sheet:o,from_sheet:f}})(),D3e=(function(){function e(s,o){switch(o.type){case"base64":return t(Ti(s),o);case"binary":return t(s,o);case"buffer":return t(pa&&Buffer.isBuffer(s)?s.toString("binary"):Wf(s),o);case"array":return t(Sf(s),o)}throw new Error("Unrecognized type "+o.type)}function t(s,o){for(var i=s.split(`
`),c=-1,A=-1,d=0,f=[];d!==i.length;++d){if(i[d].trim()==="BOT"){f[++c]=[],A=0;continue}if(!(c<0)){var m=i[d].trim().split(","),v=m[0],p=m[1];++d;for(var g=i[d]||"";(g.match(/["]/g)||[]).length&1&&d<i.length-1;)g+=`
`+i[++d];switch(g=g.trim(),+v){case-1:if(g==="BOT"){f[++c]=[],A=0;continue}else if(g!=="EOD")throw new Error("Unrecognized DIF special command "+g);break;case 0:g==="TRUE"?f[c][A]=!0:g==="FALSE"?f[c][A]=!1:isNaN(Nl(p))?isNaN(zv(p).getDate())?f[c][A]=p:f[c][A]=Us(p):f[c][A]=Nl(p),++A;break;case 1:g=g.slice(1,g.length-1),g=g.replace(/""/g,'"'),g&&g.match(/^=".*"$/)&&(g=g.slice(2,-1)),f[c][A++]=g!==""?g:null;break}if(g==="EOD")break}}return o&&o.sheetRows&&(f=f.slice(0,o.sheetRows)),f}function n(s,o){return wh(e(s,o),o)}function a(s,o){return aA(n(s,o),o)}var r=(function(){var s=function(c,A,d,f,m){c.push(A),c.push(d+","+f),c.push('"'+m.replace(/"/g,'""')+'"')},o=function(c,A,d,f){c.push(A+","+d),c.push(A==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var A=[],d=Lr(c["!ref"]),f,m=Array.isArray(c);s(A,"TABLE",0,1,"sheetjs"),s(A,"VECTORS",0,d.e.r-d.s.r+1,""),s(A,"TUPLES",0,d.e.c-d.s.c+1,""),s(A,"DATA",0,0,"");for(var v=d.s.r;v<=d.e.r;++v){o(A,-1,0,"BOT");for(var p=d.s.c;p<=d.e.c;++p){var g=qn({r:v,c:p});if(f=m?(c[v]||[])[p]:c[g],!f){o(A,1,0,"");continue}switch(f.t){case"n":var y=f.w;!y&&f.v!=null&&(y=f.v),y==null?f.f&&!f.F?o(A,1,0,"="+f.f):o(A,1,0,""):o(A,0,y,"V");break;case"b":o(A,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":o(A,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=tl(f.z||ea[14],Go(Us(f.v)))),o(A,0,f.w,"V");break;default:o(A,1,0,"")}}}o(A,-1,0,"EOD");var w=`\r
`,b=A.join(w);return b}})();return{to_workbook:a,to_sheet:n,from_sheet:r}})(),U3e=(function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function n(f,m){for(var v=f.split(`
`),p=-1,g=-1,y=0,w=[];y!==v.length;++y){var b=v[y].trim().split(":");if(b[0]==="cell"){var x=Mo(b[1]);if(w.length<=x.r)for(p=w.length;p<=x.r;++p)w[p]||(w[p]=[]);switch(p=x.r,g=x.c,b[2]){case"t":w[p][g]=e(b[3]);break;case"v":w[p][g]=+b[3];break;case"vtf":var T=b[b.length-1];case"vtc":switch(b[3]){case"nl":w[p][g]=!!+b[4];break;default:w[p][g]=+b[4];break}b[2]=="vtf"&&(w[p][g]=[w[p][g],T])}}}return m&&m.sheetRows&&(w=w.slice(0,m.sheetRows)),w}function a(f,m){return wh(n(f,m),m)}function r(f,m){return aA(a(f,m),m)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,i=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function A(f){if(!f||!f["!ref"])return"";for(var m=[],v=[],p,g="",y=_h(f["!ref"]),w=Array.isArray(f),b=y.s.r;b<=y.e.r;++b)for(var x=y.s.c;x<=y.e.c;++x)if(g=qn({r:b,c:x}),p=w?(f[b]||[])[x]:f[g],!(!p||p.v==null||p.t==="z")){switch(v=["cell",g,"t"],p.t){case"s":case"str":v.push(t(p.v));break;case"n":p.f?(v[2]="vtf",v[3]="n",v[4]=p.v,v[5]=t(p.f)):(v[2]="v",v[3]=p.v);break;case"b":v[2]="vt"+(p.f?"f":"c"),v[3]="nl",v[4]=p.v?"1":"0",v[5]=t(p.f||(p.v?"TRUE":"FALSE"));break;case"d":var T=Go(Us(p.v));v[2]="vtc",v[3]="nd",v[4]=""+T,v[5]=p.w||tl(p.z||ea[14],T);break;case"e":continue}m.push(v.join(":"))}return m.push("sheet:c:"+(y.e.c-y.s.c+1)+":r:"+(y.e.r-y.s.r+1)+":tvf:1"),m.push("valueformat:1:text-wiki"),m.join(`
`)}function d(f){return[s,o,i,o,A(f),c].join(`
`)}return{to_workbook:r,to_sheet:a,from_sheet:d}})(),O0=(function(){function e(d,f,m,v,p){p.raw?f[m][v]=d:d===""||(d==="TRUE"?f[m][v]=!0:d==="FALSE"?f[m][v]=!1:isNaN(Nl(d))?isNaN(zv(d).getDate())?f[m][v]=d:f[m][v]=Us(d):f[m][v]=Nl(d))}function t(d,f){var m=f||{},v=[];if(!d||d.length===0)return v;for(var p=d.split(/[\r\n]/),g=p.length-1;g>=0&&p[g].length===0;)--g;for(var y=10,w=0,b=0;b<=g;++b)w=p[b].indexOf(" "),w==-1?w=p[b].length:w++,y=Math.max(y,w);for(b=0;b<=g;++b){v[b]=[];var x=0;for(e(p[b].slice(0,y).trim(),v,b,x,m),x=1;x<=(p[b].length-y)/10+1;++x)e(p[b].slice(y+(x-1)*10,y+x*10).trim(),v,b,x,m)}return m.sheetRows&&(v=v.slice(0,m.sheetRows)),v}var n={44:",",9:"	",59:";",124:"|"},a={44:3,9:2,59:1,124:0};function r(d){for(var f={},m=!1,v=0,p=0;v<d.length;++v)(p=d.charCodeAt(v))==34?m=!m:!m&&p in n&&(f[p]=(f[p]||0)+1);p=[];for(v in f)Object.prototype.hasOwnProperty.call(f,v)&&p.push([f[v],v]);if(!p.length){f=a;for(v in f)Object.prototype.hasOwnProperty.call(f,v)&&p.push([f[v],v])}return p.sort(function(g,y){return g[0]-y[0]||a[g[1]]-a[y[1]]}),n[p.pop()[1]]||44}function s(d,f){var m=f||{},v="",p=m.dense?[]:{},g={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(v=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(v=d.charAt(4),d=d.slice(6)):v=r(d.slice(0,1024)):m&&m.FS?v=m.FS:v=r(d.slice(0,1024));var y=0,w=0,b=0,x=0,T=0,D=v.charCodeAt(0),k=!1,S=0,E=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var C=m.dateNF!=null?zFe(m.dateNF):null;function U(){var F=d.slice(x,T),L={};if(F.charAt(0)=='"'&&F.charAt(F.length-1)=='"'&&(F=F.slice(1,-1).replace(/""/g,'"')),F.length===0)L.t="z";else if(m.raw)L.t="s",L.v=F;else if(F.trim().length===0)L.t="s",L.v=F;else if(F.charCodeAt(0)==61)F.charCodeAt(1)==34&&F.charCodeAt(F.length-1)==34?(L.t="s",L.v=F.slice(2,-1).replace(/""/g,'"')):_Re(F)?(L.t="n",L.f=F.slice(1)):(L.t="s",L.v=F);else if(F=="TRUE")L.t="b",L.v=!0;else if(F=="FALSE")L.t="b",L.v=!1;else if(!isNaN(b=Nl(F)))L.t="n",m.cellText!==!1&&(L.w=F),L.v=b;else if(!isNaN(zv(F).getDate())||C&&F.match(C)){L.z=m.dateNF||ea[14];var H=0;C&&F.match(C)&&(F=KFe(F,m.dateNF,F.match(C)||[]),H=1),m.cellDates?(L.t="d",L.v=Us(F,H)):(L.t="n",L.v=Go(Us(F,H))),m.cellText!==!1&&(L.w=tl(L.z,L.v instanceof Date?Go(L.v):L.v)),m.cellNF||delete L.z}else L.t="s",L.v=F;if(L.t=="z"||(m.dense?(p[y]||(p[y]=[]),p[y][w]=L):p[qn({c:w,r:y})]=L),x=T+1,E=d.charCodeAt(x),g.e.c<w&&(g.e.c=w),g.e.r<y&&(g.e.r=y),S==D)++w;else if(w=0,++y,m.sheetRows&&m.sheetRows<=y)return!0}e:for(;T<d.length;++T)switch(S=d.charCodeAt(T)){case 34:E===34&&(k=!k);break;case D:case 10:case 13:if(!k&&U())break e;break}return T-x>0&&U(),p["!ref"]=Sa(g),p}function o(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,f):wh(t(d,f),f)}function i(d,f){var m="",v=f.type=="string"?[0,0,0,0]:t4(d,f);switch(f.type){case"base64":m=Ti(d);break;case"binary":m=d;break;case"buffer":f.codepage==65001?m=d.toString("utf8"):f.codepage&&typeof N0<"u"||(m=pa&&Buffer.isBuffer(d)?d.toString("binary"):Wf(d));break;case"array":m=Sf(d);break;case"string":m=d;break;default:throw new Error("Unrecognized type "+f.type)}return v[0]==239&&v[1]==187&&v[2]==191?m=mr(m.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?m=mr(m):f.type=="binary"&&typeof N0<"u",m.slice(0,19)=="socialcalc:version:"?U3e.to_sheet(f.type=="string"?m:mr(m),f):o(m,f)}function c(d,f){return aA(i(d,f),f)}function A(d){for(var f=[],m=Lr(d["!ref"]),v,p=Array.isArray(d),g=m.s.r;g<=m.e.r;++g){for(var y=[],w=m.s.c;w<=m.e.c;++w){var b=qn({r:g,c:w});if(v=p?(d[g]||[])[w]:d[b],!v||v.v==null){y.push("          ");continue}for(var x=(v.w||(Rc(v),v.w)||"").slice(0,10);x.length<10;)x+=" ";y.push(x+(w===0?" ":""))}f.push(y.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:i,from_sheet:A}})();function R3e(e,t){var n=t||{},a=!!n.WTF;n.WTF=!0;try{var r=P3e.to_workbook(e,n);return n.WTF=a,r}catch(s){if(n.WTF=a,!s.message.match(/SYLK bad record ID/)&&a)throw s;return O0.to_workbook(e,t)}}var a0=(function(){function e(P,G,J){if(P){Os(P,P.l||0);for(var M=J.Enum||re;P.l<P.length;){var te=P.read_shift(2),Y=M[te]||M[65535],W=P.read_shift(2),ee=P.l+W,ae=Y.f&&Y.f(P,W,J);if(P.l=ee,G(ae,Y,te))return}}}function t(P,G){switch(G.type){case"base64":return n(Sl(Ti(P)),G);case"binary":return n(Sl(P),G);case"buffer":case"array":return n(P,G)}throw"Unsupported type "+G.type}function n(P,G){if(!P)return P;var J=G||{},M=J.dense?[]:{},te="Sheet1",Y="",W=0,ee={},ae=[],oe=[],j={s:{r:0,c:0},e:{r:0,c:0}},ce=J.sheetRows||0;if(P[2]==0&&(P[3]==8||P[3]==9)&&P.length>=16&&P[14]==5&&P[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(P[2]==2)J.Enum=re,e(P,function(be,Ee,Ce){switch(Ce){case 0:J.vers=be,be>=4096&&(J.qpro=!0);break;case 6:j=be;break;case 204:be&&(Y=be);break;case 222:Y=be;break;case 15:case 51:J.qpro||(be[1].v=be[1].v.slice(1));case 13:case 14:case 16:Ce==14&&(be[2]&112)==112&&(be[2]&15)>1&&(be[2]&15)<15&&(be[1].z=J.dateNF||ea[14],J.cellDates&&(be[1].t="d",be[1].v=Hw(be[1].v))),J.qpro&&be[3]>W&&(M["!ref"]=Sa(j),ee[te]=M,ae.push(te),M=J.dense?[]:{},j={s:{r:0,c:0},e:{r:0,c:0}},W=be[3],te=Y||"Sheet"+(W+1),Y="");var Be=J.dense?(M[be[0].r]||[])[be[0].c]:M[qn(be[0])];if(Be){Be.t=be[1].t,Be.v=be[1].v,be[1].z!=null&&(Be.z=be[1].z),be[1].f!=null&&(Be.f=be[1].f);break}J.dense?(M[be[0].r]||(M[be[0].r]=[]),M[be[0].r][be[0].c]=be[1]):M[qn(be[0])]=be[1];break}},J);else if(P[2]==26||P[2]==14)J.Enum=q,P[2]==14&&(J.qpro=!0,P.l=0),e(P,function(be,Ee,Ce){switch(Ce){case 204:te=be;break;case 22:be[1].v=be[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(be[3]>W&&(M["!ref"]=Sa(j),ee[te]=M,ae.push(te),M=J.dense?[]:{},j={s:{r:0,c:0},e:{r:0,c:0}},W=be[3],te="Sheet"+(W+1)),ce>0&&be[0].r>=ce)break;J.dense?(M[be[0].r]||(M[be[0].r]=[]),M[be[0].r][be[0].c]=be[1]):M[qn(be[0])]=be[1],j.e.c<be[0].c&&(j.e.c=be[0].c),j.e.r<be[0].r&&(j.e.r=be[0].r);break;case 27:be[14e3]&&(oe[be[14e3][0]]=be[14e3][1]);break;case 1537:oe[be[0]]=be[1],be[0]==W&&(te=be[1]);break}},J);else throw new Error("Unrecognized LOTUS BOF "+P[2]);if(M["!ref"]=Sa(j),ee[Y||te]=M,ae.push(Y||te),!oe.length)return{SheetNames:ae,Sheets:ee};for(var de={},_e=[],Re=0;Re<oe.length;++Re)ee[ae[Re]]?(_e.push(oe[Re]||ae[Re]),de[oe[Re]]=ee[oe[Re]]||ee[ae[Re]]):(_e.push(oe[Re]),de[oe[Re]]={"!ref":"A1"});return{SheetNames:_e,Sheets:de}}function a(P,G){var J=G||{};if(+J.codepage>=0&&Il(+J.codepage),J.type=="string")throw new Error("Cannot write WK1 to JS string");var M=UE(),te=Lr(P["!ref"]),Y=Array.isArray(P),W=[];yl(M,0,s(1030)),yl(M,6,c(te));for(var ee=Math.min(te.e.r,8191),ae=te.s.r;ae<=ee;++ae)for(var oe=js(ae),j=te.s.c;j<=te.e.c;++j){ae===te.s.r&&(W[j]=ys(j));var ce=W[j]+oe,de=Y?(P[ae]||[])[j]:P[ce];if(!(!de||de.t=="z"))if(de.t=="n")(de.v|0)==de.v&&de.v>=-32768&&de.v<=32767?yl(M,13,v(ae,j,de.v)):yl(M,14,g(ae,j,de.v));else{var _e=Rc(de);yl(M,15,f(ae,j,_e.slice(0,239)))}}return yl(M,1),M.end()}function r(P,G){var J=G||{};if(+J.codepage>=0&&Il(+J.codepage),J.type=="string")throw new Error("Cannot write WK3 to JS string");var M=UE();yl(M,0,o(P));for(var te=0,Y=0;te<P.SheetNames.length;++te)(P.Sheets[P.SheetNames[te]]||{})["!ref"]&&yl(M,27,Z(P.SheetNames[te],Y++));var W=0;for(te=0;te<P.SheetNames.length;++te){var ee=P.Sheets[P.SheetNames[te]];if(!(!ee||!ee["!ref"])){for(var ae=Lr(ee["!ref"]),oe=Array.isArray(ee),j=[],ce=Math.min(ae.e.r,8191),de=ae.s.r;de<=ce;++de)for(var _e=js(de),Re=ae.s.c;Re<=ae.e.c;++Re){de===ae.s.r&&(j[Re]=ys(Re));var be=j[Re]+_e,Ee=oe?(ee[de]||[])[Re]:ee[be];if(!(!Ee||Ee.t=="z"))if(Ee.t=="n")yl(M,23,U(de,Re,W,Ee.v));else{var Ce=Rc(Ee);yl(M,22,S(de,Re,W,Ce.slice(0,239)))}}++W}}return yl(M,1),M.end()}function s(P){var G=hs(2);return G.write_shift(2,P),G}function o(P){var G=hs(26);G.write_shift(2,4096),G.write_shift(2,4),G.write_shift(4,0);for(var J=0,M=0,te=0,Y=0;Y<P.SheetNames.length;++Y){var W=P.SheetNames[Y],ee=P.Sheets[W];if(!(!ee||!ee["!ref"])){++te;var ae=_h(ee["!ref"]);J<ae.e.r&&(J=ae.e.r),M<ae.e.c&&(M=ae.e.c)}}return J>8191&&(J=8191),G.write_shift(2,J),G.write_shift(1,te),G.write_shift(1,M),G.write_shift(2,0),G.write_shift(2,0),G.write_shift(1,1),G.write_shift(1,2),G.write_shift(4,0),G.write_shift(4,0),G}function i(P,G,J){var M={s:{c:0,r:0},e:{c:0,r:0}};return G==8&&J.qpro?(M.s.c=P.read_shift(1),P.l++,M.s.r=P.read_shift(2),M.e.c=P.read_shift(1),P.l++,M.e.r=P.read_shift(2),M):(M.s.c=P.read_shift(2),M.s.r=P.read_shift(2),G==12&&J.qpro&&(P.l+=2),M.e.c=P.read_shift(2),M.e.r=P.read_shift(2),G==12&&J.qpro&&(P.l+=2),M.s.c==65535&&(M.s.c=M.e.c=M.s.r=M.e.r=0),M)}function c(P){var G=hs(8);return G.write_shift(2,P.s.c),G.write_shift(2,P.s.r),G.write_shift(2,P.e.c),G.write_shift(2,P.e.r),G}function A(P,G,J){var M=[{c:0,r:0},{t:"n",v:0},0,0];return J.qpro&&J.vers!=20768?(M[0].c=P.read_shift(1),M[3]=P.read_shift(1),M[0].r=P.read_shift(2),P.l+=2):(M[2]=P.read_shift(1),M[0].c=P.read_shift(2),M[0].r=P.read_shift(2)),M}function d(P,G,J){var M=P.l+G,te=A(P,G,J);if(te[1].t="s",J.vers==20768){P.l++;var Y=P.read_shift(1);return te[1].v=P.read_shift(Y,"utf8"),te}return J.qpro&&P.l++,te[1].v=P.read_shift(M-P.l,"cstr"),te}function f(P,G,J){var M=hs(7+J.length);M.write_shift(1,255),M.write_shift(2,G),M.write_shift(2,P),M.write_shift(1,39);for(var te=0;te<M.length;++te){var Y=J.charCodeAt(te);M.write_shift(1,Y>=128?95:Y)}return M.write_shift(1,0),M}function m(P,G,J){var M=A(P,G,J);return M[1].v=P.read_shift(2,"i"),M}function v(P,G,J){var M=hs(7);return M.write_shift(1,255),M.write_shift(2,G),M.write_shift(2,P),M.write_shift(2,J,"i"),M}function p(P,G,J){var M=A(P,G,J);return M[1].v=P.read_shift(8,"f"),M}function g(P,G,J){var M=hs(13);return M.write_shift(1,255),M.write_shift(2,G),M.write_shift(2,P),M.write_shift(8,J,"f"),M}function y(P,G,J){var M=P.l+G,te=A(P,G,J);if(te[1].v=P.read_shift(8,"f"),J.qpro)P.l=M;else{var Y=P.read_shift(2);T(P.slice(P.l,P.l+Y),te),P.l+=Y}return te}function w(P,G,J){var M=G&32768;return G&=-32769,G=(M?P:0)+(G>=8192?G-16384:G),(M?"":"$")+(J?ys(G):js(G))}var b={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},x=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function T(P,G){Os(P,0);for(var J=[],M=0,te="",Y="",W="",ee="";P.l<P.length;){var ae=P[P.l++];switch(ae){case 0:J.push(P.read_shift(8,"f"));break;case 1:Y=w(G[0].c,P.read_shift(2),!0),te=w(G[0].r,P.read_shift(2),!1),J.push(Y+te);break;case 2:{var oe=w(G[0].c,P.read_shift(2),!0),j=w(G[0].r,P.read_shift(2),!1);Y=w(G[0].c,P.read_shift(2),!0),te=w(G[0].r,P.read_shift(2),!1),J.push(oe+j+":"+Y+te)}break;case 3:if(P.l<P.length){console.error("WK1 premature formula end");return}break;case 4:J.push("("+J.pop()+")");break;case 5:J.push(P.read_shift(2));break;case 6:{for(var ce="";ae=P[P.l++];)ce+=String.fromCharCode(ae);J.push('"'+ce.replace(/"/g,'""')+'"')}break;case 8:J.push("-"+J.pop());break;case 23:J.push("+"+J.pop());break;case 22:J.push("NOT("+J.pop()+")");break;case 20:case 21:ee=J.pop(),W=J.pop(),J.push(["AND","OR"][ae-20]+"("+W+","+ee+")");break;default:if(ae<32&&x[ae])ee=J.pop(),W=J.pop(),J.push(W+x[ae]+ee);else if(b[ae]){if(M=b[ae][1],M==69&&(M=P[P.l++]),M>J.length){console.error("WK1 bad formula parse 0x"+ae.toString(16)+":|"+J.join("|")+"|");return}var de=J.slice(-M);J.length-=M,J.push(b[ae][0]+"("+de.join(",")+")")}else return ae<=7?console.error("WK1 invalid opcode "+ae.toString(16)):ae<=24?console.error("WK1 unsupported op "+ae.toString(16)):ae<=30?console.error("WK1 invalid opcode "+ae.toString(16)):ae<=115?console.error("WK1 unsupported function opcode "+ae.toString(16)):console.error("WK1 unrecognized opcode "+ae.toString(16))}}J.length==1?G[1].f=""+J[0]:console.error("WK1 bad formula parse |"+J.join("|")+"|")}function D(P){var G=[{c:0,r:0},{t:"n",v:0},0];return G[0].r=P.read_shift(2),G[3]=P[P.l++],G[0].c=P[P.l++],G}function k(P,G){var J=D(P);return J[1].t="s",J[1].v=P.read_shift(G-4,"cstr"),J}function S(P,G,J,M){var te=hs(6+M.length);te.write_shift(2,P),te.write_shift(1,J),te.write_shift(1,G),te.write_shift(1,39);for(var Y=0;Y<M.length;++Y){var W=M.charCodeAt(Y);te.write_shift(1,W>=128?95:W)}return te.write_shift(1,0),te}function E(P,G){var J=D(P);J[1].v=P.read_shift(2);var M=J[1].v>>1;if(J[1].v&1)switch(M&7){case 0:M=(M>>3)*5e3;break;case 1:M=(M>>3)*500;break;case 2:M=(M>>3)/20;break;case 3:M=(M>>3)/200;break;case 4:M=(M>>3)/2e3;break;case 5:M=(M>>3)/2e4;break;case 6:M=(M>>3)/16;break;case 7:M=(M>>3)/64;break}return J[1].v=M,J}function C(P,G){var J=D(P),M=P.read_shift(4),te=P.read_shift(4),Y=P.read_shift(2);if(Y==65535)return M===0&&te===3221225472?(J[1].t="e",J[1].v=15):M===0&&te===3489660928?(J[1].t="e",J[1].v=42):J[1].v=0,J;var W=Y&32768;return Y=(Y&32767)-16446,J[1].v=(1-W*2)*(te*Math.pow(2,Y+32)+M*Math.pow(2,Y)),J}function U(P,G,J,M){var te=hs(14);if(te.write_shift(2,P),te.write_shift(1,J),te.write_shift(1,G),M==0)return te.write_shift(4,0),te.write_shift(4,0),te.write_shift(2,65535),te;var Y=0,W=0,ee=0,ae=0;return M<0&&(Y=1,M=-M),W=Math.log2(M)|0,M/=Math.pow(2,W-31),ae=M>>>0,(ae&2147483648)==0&&(M/=2,++W,ae=M>>>0),M-=ae,ae|=2147483648,ae>>>=0,M*=Math.pow(2,32),ee=M>>>0,te.write_shift(4,ee),te.write_shift(4,ae),W+=16383+(Y?32768:0),te.write_shift(2,W),te}function F(P,G){var J=C(P);return P.l+=G-14,J}function L(P,G){var J=D(P),M=P.read_shift(4);return J[1].v=M>>6,J}function H(P,G){var J=D(P),M=P.read_shift(8,"f");return J[1].v=M,J}function ue(P,G){var J=H(P);return P.l+=G-10,J}function ie(P,G){return P[P.l+G-1]==0?P.read_shift(G,"cstr"):""}function Q(P,G){var J=P[P.l++];J>G-1&&(J=G-1);for(var M="";M.length<J;)M+=String.fromCharCode(P[P.l++]);return M}function X(P,G,J){if(!(!J.qpro||G<21)){var M=P.read_shift(1);P.l+=17,P.l+=1,P.l+=2;var te=P.read_shift(G-21,"cstr");return[M,te]}}function le(P,G){for(var J={},M=P.l+G;P.l<M;){var te=P.read_shift(2);if(te==14e3){for(J[te]=[0,""],J[te][0]=P.read_shift(2);P[P.l];)J[te][1]+=String.fromCharCode(P[P.l]),P.l++;P.l++}}return J}function Z(P,G){var J=hs(5+P.length);J.write_shift(2,14e3),J.write_shift(2,G);for(var M=0;M<P.length;++M){var te=P.charCodeAt(M);J[J.l++]=te>127?95:te}return J[J.l++]=0,J}var re={0:{n:"BOF",f:rs},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:i},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:m},14:{n:"NUMBER",f:p},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:y},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:ie},222:{n:"SHEETNAMELP",f:Q},65535:{n:""}},q={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:k},23:{n:"NUMBER17",f:C},24:{n:"NUMBER18",f:E},25:{n:"FORMULA19",f:F},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:le},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:L},38:{n:"??"},39:{n:"NUMBER27",f:H},40:{n:"FORMULA28",f:ue},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:ie},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:X},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:a,book_to_wk3:r,to_workbook:t}})();function N3e(e){var t={},n=e.match(Co),a=0,r=!1;if(n)for(;a!=n.length;++a){var s=On(n[a]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;t.cp=FT[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=s.val;break;case"<sz":t.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":s.rgb&&(t.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(s[0].charCodeAt(1)!==47&&!r)throw new Error("Unrecognized rich format "+s[0])}}return t}var V3e=(function(){var e=L0("t"),t=L0("rPr");function n(s){var o=s.match(e);if(!o)return{t:"s",v:""};var i={t:"s",v:Ia(o[1])},c=s.match(t);return c&&(i.s=N3e(c[1])),i}var a=/<(?:\w+:)?r>/g,r=/<\/(?:\w+:)?r>/;return function(o){return o.replace(a,"").split(r).map(n).filter(function(i){return i.v})}})(),L3e=(function(){var t=/(\r\n|\n)/g;function n(r,s,o){var i=[];r.u&&i.push("text-decoration: underline;"),r.uval&&i.push("text-underline-style:"+r.uval+";"),r.sz&&i.push("font-size:"+r.sz+"pt;"),r.outline&&i.push("text-effect: outline;"),r.shadow&&i.push("text-shadow: auto;"),s.push('<span style="'+i.join("")+'">'),r.b&&(s.push("<b>"),o.push("</b>")),r.i&&(s.push("<i>"),o.push("</i>")),r.strike&&(s.push("<s>"),o.push("</s>"));var c=r.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(s.push("<"+c+">"),o.push("</"+c+">")),o.push("</span>"),r}function a(r){var s=[[],r.v,[]];return r.v?(r.s&&n(r.s,s[0],s[2]),s[0].join("")+s[1].replace(t,"<br/>")+s[2].join("")):""}return function(s){return s.map(a).join("")}})(),M3e=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,O3e=/<(?:\w+:)?r>/,H3e=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function jT(e,t){var n=t?t.cellHTML:!0,a={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(a.t=Ia(mr(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),a.r=mr(e),n&&(a.h=LT(a.t))):e.match(O3e)&&(a.r=mr(e),a.t=Ia(mr((e.replace(H3e,"").match(M3e)||[]).join("").replace(Co,""))),n&&(a.h=L3e(V3e(a.r)))),a):{t:""}}var $3e=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,Q3e=/<(?:\w+:)?(?:si|sstItem)>/g,G3e=/<\/(?:\w+:)?(?:si|sstItem)>/;function z3e(e,t){var n=[],a="";if(!e)return n;var r=e.match($3e);if(r){a=r[2].replace(Q3e,"").split(G3e);for(var s=0;s!=a.length;++s){var o=jT(a[s].trim(),t);o!=null&&(n[n.length]=o)}r=On(r[1]),n.Count=r.count,n.Unique=r.uniqueCount}return n}function K3e(e){return[e.read_shift(4),e.read_shift(4)]}function W3e(e,t){var n=[],a=!1;return $c(e,function(s,o,i){switch(i){case 159:n.Count=s[0],n.Unique=s[1];break;case 19:n.push(s);break;case 160:return!0;case 35:a=!0;break;case 36:a=!1;break;default:if(o.T,!a||t.WTF)throw new Error("Unexpected record 0x"+i.toString(16))}}),n}function i9(e){for(var t=[],n=e.split(""),a=0;a<n.length;++a)t[a]=n[a].charCodeAt(0);return t}function Sc(e,t){var n={};return n.Major=e.read_shift(2),n.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),n}function j3e(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=Sc(e,4),t.U=Sc(e,4),t.W=Sc(e,4),t}function q3e(e){for(var t=e.read_shift(4),n=e.l+t-4,a={},r=e.read_shift(4),s=[];r-- >0;)s.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(a.name=e.read_shift(0,"lpp4"),a.comps=s,e.l!=n)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+n);return a}function Y3e(e){var t=[];e.l+=4;for(var n=e.read_shift(4);n-- >0;)t.push(q3e(e));return t}function X3e(e){var t=[];e.l+=4;for(var n=e.read_shift(4);n-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function J3e(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=Sc(e,4),t.U=Sc(e,4),t.W=Sc(e,4),t}function Z3e(e){var t=J3e(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function l9(e,t){var n=e.l+t,a={};a.Flags=e.read_shift(4)&63,e.l+=4,a.AlgID=e.read_shift(4);var r=!1;switch(a.AlgID){case 26126:case 26127:case 26128:r=a.Flags==36;break;case 26625:r=a.Flags==4;break;case 0:r=a.Flags==16||a.Flags==4||a.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+a.AlgID}if(!r)throw new Error("Encryption Flags/AlgID mismatch");return a.AlgIDHash=e.read_shift(4),a.KeySize=e.read_shift(4),a.ProviderType=e.read_shift(4),e.l+=8,a.CSPName=e.read_shift(n-e.l>>1,"utf16le"),e.l=n,a}function u9(e,t){var n={},a=e.l+t;return e.l+=4,n.Salt=e.slice(e.l,e.l+16),e.l+=16,n.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),n.VerifierHash=e.slice(e.l,a),e.l=a,n}function eUe(e){var t=Sc(e);switch(t.Minor){case 2:return[t.Minor,tUe(e)];case 3:return[t.Minor,nUe()];case 4:return[t.Minor,aUe(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function tUe(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var n=e.read_shift(4),a=l9(e,n),r=u9(e,e.length-e.l);return{t:"Std",h:a,v:r}}function nUe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function aUe(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var n=e.read_shift(e.length-e.l,"utf8"),a={};return n.replace(Co,function(s){var o=On(s);switch(Gu(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(i){a[i]=o[i]});break;case"<dataIntegrity":a.encryptedHmacKey=o.encryptedHmacKey,a.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":a.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":a.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":a.encs.push(o);break;default:throw o[0]}}),a}function rUe(e,t){var n={},a=n.EncryptionVersionInfo=Sc(e,4);if(t-=4,a.Minor!=2)throw new Error("unrecognized minor version code: "+a.Minor);if(a.Major>4||a.Major<2)throw new Error("unrecognized major version code: "+a.Major);n.Flags=e.read_shift(4),t-=4;var r=e.read_shift(4);return t-=4,n.EncryptionHeader=l9(e,r),t-=r,n.EncryptionVerifier=u9(e,t),n}function sUe(e){var t={},n=t.EncryptionVersionInfo=Sc(e,4);if(n.Major!=1||n.Minor!=1)throw"unrecognized version code "+n.Major+" : "+n.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function oUe(e){var t=0,n,a=i9(e),r=a.length+1,s,o,i,c,A;for(n=jd(r),n[0]=a.length,s=1;s!=r;++s)n[s]=a[s-1];for(s=r-1;s>=0;--s)o=n[s],i=(t&16384)===0?0:1,c=t<<1&32767,A=i|c,t=A^o;return t^52811}var c9=(function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],n=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],a=function(o){return(o/2|o*128)&255},r=function(o,i){return a(o^i)},s=function(o){for(var i=t[o.length-1],c=104,A=o.length-1;A>=0;--A)for(var d=o[A],f=0;f!=7;++f)d&64&&(i^=n[c]),d*=2,--c;return i};return function(o){for(var i=i9(o),c=s(i),A=i.length,d=jd(16),f=0;f!=16;++f)d[f]=0;var m,v,p;for((A&1)===1&&(m=c>>8,d[A]=r(e[0],m),--A,m=c&255,v=i[i.length-1],d[A]=r(v,m));A>0;)--A,m=c>>8,d[A]=r(i[A],m),--A,m=c&255,d[A]=r(i[A],m);for(A=15,p=15-i.length;p>0;)m=c>>8,d[A]=r(e[p],m),--A,--p,m=c&255,d[A]=r(i[A],m),--A,--p;return d}})(),iUe=function(e,t,n,a,r){r||(r=t),a||(a=c9(e));var s,o;for(s=0;s!=t.length;++s)o=t[s],o^=a[n],o=(o>>5|o<<3)&255,r[s]=o,++n;return[r,n,a]},lUe=function(e){var t=0,n=c9(e);return function(a){var r=iUe("",a,t,n);return t=r[1],r[0]}};function uUe(e,t,n,a){var r={key:rs(e),verificationBytes:rs(e)};return n.password&&(r.verifier=oUe(n.password)),a.valid=r.verificationBytes===r.verifier,a.valid&&(a.insitu=lUe(n.password)),r}function cUe(e,t,n){var a=n||{};return a.Info=e.read_shift(2),e.l-=2,a.Info===1?a.Data=sUe(e):a.Data=rUe(e,t),a}function dUe(e,t,n){var a={Type:n.biff>=8?e.read_shift(2):0};return a.Type?cUe(e,t-2,a):uUe(e,n.biff>=8?t:t-2,n,a),a}var AUe=(function(){function e(r,s){switch(s.type){case"base64":return t(Ti(r),s);case"binary":return t(r,s);case"buffer":return t(pa&&Buffer.isBuffer(r)?r.toString("binary"):Wf(r),s);case"array":return t(Sf(r),s)}throw new Error("Unrecognized type "+s.type)}function t(r,s){var o=s||{},i=o.dense?[]:{},c=r.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var A={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(i)&&(i[f]=[]);for(var m=/\\\w+\b/g,v=0,p,g=-1;p=m.exec(d);){switch(p[0]){case"\\cell":var y=d.slice(v,m.lastIndex-p[0].length);if(y[0]==" "&&(y=y.slice(1)),++g,y.length){var w={v:y,t:"s"};Array.isArray(i)?i[f][g]=w:i[qn({r:f,c:g})]=w}break}v=m.lastIndex}g>A.e.c&&(A.e.c=g)}),i["!ref"]=Sa(A),i}function n(r,s){return aA(e(r,s),s)}function a(r){for(var s=["{\\rtf1\\ansi"],o=Lr(r["!ref"]),i,c=Array.isArray(r),A=o.s.r;A<=o.e.r;++A){s.push("\\trowd\\trautofit1");for(var d=o.s.c;d<=o.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=o.s.c;d<=o.e.c;++d){var f=qn({r:A,c:d});i=c?(r[A]||[])[d]:r[f],!(!i||i.v==null&&(!i.f||i.F))&&(s.push(" "+(i.w||(Rc(i),i.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:n,to_sheet:e,from_sheet:a}})();function fUe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function H0(e){for(var t=0,n=1;t!=3;++t)n=n*256+(e[t]>255?255:e[t]<0?0:e[t]);return n.toString(16).toUpperCase().slice(1)}function mUe(e){var t=e[0]/255,n=e[1]/255,a=e[2]/255,r=Math.max(t,n,a),s=Math.min(t,n,a),o=r-s;if(o===0)return[0,0,t];var i=0,c=0,A=r+s;switch(c=o/(A>1?2-A:A),r){case t:i=((n-a)/o+6)%6;break;case n:i=(a-t)/o+2;break;case a:i=(t-n)/o+4;break}return[i/6,c,A/2]}function vUe(e){var t=e[0],n=e[1],a=e[2],r=n*2*(a<.5?a:1-a),s=a-r/2,o=[s,s,s],i=6*t,c;if(n!==0)switch(i|0){case 0:case 6:c=r*i,o[0]+=r,o[1]+=c;break;case 1:c=r*(2-i),o[0]+=c,o[1]+=r;break;case 2:c=r*(i-2),o[1]+=r,o[2]+=c;break;case 3:c=r*(4-i),o[1]+=c,o[2]+=r;break;case 4:c=r*(i-4),o[2]+=r,o[0]+=c;break;case 5:c=r*(6-i),o[2]+=c,o[0]+=r;break}for(var A=0;A!=3;++A)o[A]=Math.round(o[A]*255);return o}function _2(e,t){if(t===0)return e;var n=mUe(fUe(e));return t<0?n[2]=n[2]*(1+t):n[2]=1-(1-n[2])*(1-t),H0(vUe(n))}var d9=6,hUe=15,pUe=1,Lo=d9;function w2(e){return Math.floor((e+Math.round(128/Lo)/256)*Lo)}function b2(e){return Math.floor((e-5)/Lo*100+.5)/100}function LE(e){return Math.round((e*Lo+5)/Lo*256)/256}function NC(e){return LE(b2(w2(e)))}function qT(e){var t=Math.abs(e-NC(e)),n=Lo;if(t>.005)for(Lo=pUe;Lo<hUe;++Lo)Math.abs(e-NC(e))<=t&&(t=Math.abs(e-NC(e)),n=Lo);Lo=n}function Kv(e){e.width?(e.wpx=w2(e.width),e.wch=b2(e.wpx),e.MDW=Lo):e.wpx?(e.wch=b2(e.wpx),e.width=LE(e.wch),e.MDW=Lo):typeof e.wch=="number"&&(e.width=LE(e.wch),e.wpx=w2(e.width),e.MDW=Lo),e.customWidth&&delete e.customWidth}var gUe=96,A9=gUe;function f9(e){return e*96/A9}function $0(e){return e*A9/96}var yUe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function _Ue(e,t,n,a){t.Borders=[];var r={},s=!1;(e[0].match(Co)||[]).forEach(function(o){var i=On(o);switch(Gu(i[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":r={},i.diagonalUp&&(r.diagonalUp=Sr(i.diagonalUp)),i.diagonalDown&&(r.diagonalDown=Sr(i.diagonalDown)),t.Borders.push(r);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(a&&a.WTF&&!s)throw new Error("unrecognized "+i[0]+" in borders")}})}function wUe(e,t,n,a){t.Fills=[];var r={},s=!1;(e[0].match(Co)||[]).forEach(function(o){var i=On(o);switch(Gu(i[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":r={},t.Fills.push(r);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(r),r={};break;case"<patternFill":case"<patternFill>":i.patternType&&(r.patternType=i.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":r.bgColor||(r.bgColor={}),i.indexed&&(r.bgColor.indexed=parseInt(i.indexed,10)),i.theme&&(r.bgColor.theme=parseInt(i.theme,10)),i.tint&&(r.bgColor.tint=parseFloat(i.tint)),i.rgb&&(r.bgColor.rgb=i.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":r.fgColor||(r.fgColor={}),i.theme&&(r.fgColor.theme=parseInt(i.theme,10)),i.tint&&(r.fgColor.tint=parseFloat(i.tint)),i.rgb!=null&&(r.fgColor.rgb=i.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(a&&a.WTF&&!s)throw new Error("unrecognized "+i[0]+" in fills")}})}function bUe(e,t,n,a){t.Fonts=[];var r={},s=!1;(e[0].match(Co)||[]).forEach(function(o){var i=On(o);switch(Gu(i[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(r),r={};break;case"<name":i.val&&(r.name=mr(i.val));break;case"<name/>":case"</name>":break;case"<b":r.bold=i.val?Sr(i.val):1;break;case"<b/>":r.bold=1;break;case"<i":r.italic=i.val?Sr(i.val):1;break;case"<i/>":r.italic=1;break;case"<u":switch(i.val){case"none":r.underline=0;break;case"single":r.underline=1;break;case"double":r.underline=2;break;case"singleAccounting":r.underline=33;break;case"doubleAccounting":r.underline=34;break}break;case"<u/>":r.underline=1;break;case"<strike":r.strike=i.val?Sr(i.val):1;break;case"<strike/>":r.strike=1;break;case"<outline":r.outline=i.val?Sr(i.val):1;break;case"<outline/>":r.outline=1;break;case"<shadow":r.shadow=i.val?Sr(i.val):1;break;case"<shadow/>":r.shadow=1;break;case"<condense":r.condense=i.val?Sr(i.val):1;break;case"<condense/>":r.condense=1;break;case"<extend":r.extend=i.val?Sr(i.val):1;break;case"<extend/>":r.extend=1;break;case"<sz":i.val&&(r.sz=+i.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":i.val&&(r.vertAlign=i.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":i.val&&(r.family=parseInt(i.val,10));break;case"<family/>":case"</family>":break;case"<scheme":i.val&&(r.scheme=i.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(i.val=="1")break;i.codepage=FT[parseInt(i.val,10)];break;case"<color":if(r.color||(r.color={}),i.auto&&(r.color.auto=Sr(i.auto)),i.rgb)r.color.rgb=i.rgb.slice(-6);else if(i.indexed){r.color.index=parseInt(i.indexed,10);var c=cf[r.color.index];r.color.index==81&&(c=cf[1]),c||(c=cf[1]),r.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else i.theme&&(r.color.theme=parseInt(i.theme,10),i.tint&&(r.color.tint=parseFloat(i.tint)),i.theme&&n.themeElements&&n.themeElements.clrScheme&&(r.color.rgb=_2(n.themeElements.clrScheme[r.color.theme].rgb,r.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(a&&a.WTF&&!s)throw new Error("unrecognized "+i[0]+" in fonts")}})}function xUe(e,t,n){t.NumberFmt=[];for(var a=Du(ea),r=0;r<a.length;++r)t.NumberFmt[a[r]]=ea[a[r]];var s=e[0].match(Co);if(s)for(r=0;r<s.length;++r){var o=On(s[r]);switch(Gu(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var i=Ia(mr(o.formatCode)),c=parseInt(o.numFmtId,10);if(t.NumberFmt[c]=i,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=i}uf(i,c)}}break;case"</numFmt>":break;default:if(n.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}var Iy=["numFmtId","fillId","fontId","borderId","xfId"],Fy=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function CUe(e,t,n){t.CellXf=[];var a,r=!1;(e[0].match(Co)||[]).forEach(function(s){var o=On(s),i=0;switch(Gu(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(a=o,delete a[0],i=0;i<Iy.length;++i)a[Iy[i]]&&(a[Iy[i]]=parseInt(a[Iy[i]],10));for(i=0;i<Fy.length;++i)a[Fy[i]]&&(a[Fy[i]]=Sr(a[Fy[i]]));if(t.NumberFmt&&a.numFmtId>392){for(i=392;i>60;--i)if(t.NumberFmt[a.numFmtId]==t.NumberFmt[i]){a.numFmtId=i;break}}t.CellXf.push(a);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};o.vertical&&(c.vertical=o.vertical),o.horizontal&&(c.horizontal=o.horizontal),o.textRotation!=null&&(c.textRotation=o.textRotation),o.indent&&(c.indent=o.indent),o.wrapText&&(c.wrapText=Sr(o.wrapText)),a.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":r=!0;break;case"</AlternateContent>":r=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(n&&n.WTF&&!r)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}var SUe=(function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,n=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,a=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,r=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(i,c,A){var d={};if(!i)return d;i=i.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=i.match(t))&&xUe(f,d,A),(f=i.match(r))&&bUe(f,d,c,A),(f=i.match(a))&&wUe(f,d,c,A),(f=i.match(s))&&_Ue(f,d,c,A),(f=i.match(n))&&CUe(f,d,A),d}})();function EUe(e,t){var n=e.read_shift(2),a=yo(e);return[n,a]}function BUe(e,t,n){var a={};a.sz=e.read_shift(2)/20;var r=VPe(e);r.fItalic&&(a.italic=1),r.fCondense&&(a.condense=1),r.fExtend&&(a.extend=1),r.fShadow&&(a.shadow=1),r.fOutline&&(a.outline=1),r.fStrikeout&&(a.strike=1);var s=e.read_shift(2);switch(s===700&&(a.bold=1),e.read_shift(2)){case 1:a.vertAlign="superscript";break;case 2:a.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(a.underline=o);var i=e.read_shift(1);i>0&&(a.family=i);var c=e.read_shift(1);switch(c>0&&(a.charset=c),e.l++,a.color=NPe(e),e.read_shift(1)){case 1:a.scheme="major";break;case 2:a.scheme="minor";break}return a.name=yo(e),a}var kUe=wo;function TUe(e,t){var n=e.l+t,a=e.read_shift(2),r=e.read_shift(2);return e.l=n,{ixfe:a,numFmtId:r}}var IUe=wo;function FUe(e,t,n){var a={};a.NumberFmt=[];for(var r in ea)a.NumberFmt[r]=ea[r];a.CellXf=[],a.Fonts=[];var s=[],o=!1;return $c(e,function(c,A,d){switch(d){case 44:a.NumberFmt[c[0]]=c[1],uf(c[1],c[0]);break;case 43:a.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=_2(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&a.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:s.push(d),o=!0;break;case 38:s.pop(),o=!1;break;default:if(A.T>0)s.push(d);else if(A.T<0)s.pop();else if(!o||n.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),a}var PUe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function DUe(e,t,n){t.themeElements.clrScheme=[];var a={};(e[0].match(Co)||[]).forEach(function(r){var s=On(r);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":a.rgb=s.val;break;case"<a:sysClr":a.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(t.themeElements.clrScheme[PUe.indexOf(s[0])]=a,a={}):a.name=s[0].slice(3,s[0].length-1);break;default:if(n&&n.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function UUe(){}function RUe(){}var NUe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,VUe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,LUe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function MUe(e,t,n){t.themeElements={};var a;[["clrScheme",NUe,DUe],["fontScheme",VUe,UUe],["fmtScheme",LUe,RUe]].forEach(function(r){if(!(a=e.match(r[1])))throw new Error(r[0]+" not found in themeElements");r[2](a,t,n)})}var OUe=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function m9(e,t){(!e||e.length===0)&&(e=HUe());var n,a={};if(!(n=e.match(OUe)))throw new Error("themeElements not found in theme");return MUe(n[0],a,t),a.raw=e,a}function HUe(e,t){var n=[S$];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface=" "/>',n[n.length]='<a:font script="Hang" typeface=" "/>',n[n.length]='<a:font script="Hans" typeface=""/>',n[n.length]='<a:font script="Hant" typeface=""/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface=" "/>',n[n.length]='<a:font script="Hang" typeface=" "/>',n[n.length]='<a:font script="Hans" typeface=""/>',n[n.length]='<a:font script="Hant" typeface=""/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function $Ue(e,t,n){var a=e.l+t,r=e.read_shift(4);if(r!==124226){if(!n.cellStyles){e.l=a;return}var s=e.slice(e.l);e.l=a;var o;try{o=C$(s,{type:"array"})}catch{return}var i=wi(o,"theme/theme/theme1.xml",!0);if(i)return m9(i,n)}}function QUe(e){return e.read_shift(4)}function GUe(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=zUe(e,4);break;case 2:t.xclrValue=e9(e);break;case 3:t.xclrValue=QUe(e);break;case 4:e.l+=4;break}return e.l+=8,t}function zUe(e,t){return wo(e,t)}function KUe(e,t){return wo(e,t)}function WUe(e){var t=e.read_shift(2),n=e.read_shift(2)-4,a=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:a[1]=GUe(e);break;case 6:a[1]=KUe(e,n);break;case 14:case 15:a[1]=e.read_shift(n===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+n)}return a}function jUe(e,t){var n=e.l+t;e.l+=2;var a=e.read_shift(2);e.l+=2;for(var r=e.read_shift(2),s=[];r-- >0;)s.push(WUe(e,n-e.l));return{ixfe:a,ext:s}}function qUe(e,t){t.forEach(function(n){n[0]})}function YUe(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:yo(e)}}function XUe(e){for(var t=[],n=e.read_shift(4);n-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function JUe(e){return e.l+=4,e.read_shift(4)!=0}function ZUe(e,t,n){var a={Types:[],Cell:[],Value:[]},r=n||{},s=[],o=!1,i=2;return $c(e,function(c,A,d){switch(d){case 335:a.Types.push({name:c.name});break;case 51:c.forEach(function(f){i==1?a.Cell.push({type:a.Types[f[0]-1].name,index:f[1]}):i==0&&a.Value.push({type:a.Types[f[0]-1].name,index:f[1]})});break;case 337:i=c?1:0;break;case 338:i=2;break;case 35:s.push(d),o=!0;break;case 36:s.pop(),o=!1;break;default:if(!A.T){if(!o||r.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),a}function eRe(e,t,n){var a={Types:[],Cell:[],Value:[]};if(!e)return a;var r=!1,s=2,o;return e.replace(Co,function(i){var c=On(i);switch(Gu(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":a.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var A=0;A<a.Types.length;++A)a.Types[A].name==c.name&&(o=a.Types[A]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?a.Cell.push({type:a.Types[c.t-1].name,index:+c.v}):s==0&&a.Value.push({type:a.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+c.i);break;default:if(!r&&n.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return i}),a}function tRe(e){var t=[];if(!e)return t;var n=1;return(e.match(Co)||[]).forEach(function(a){var r=On(a);switch(r[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete r[0],r.i?n=r.i:r.i=n,t.push(r);break}}),t}function nRe(e){var t={};t.i=e.read_shift(4);var n={};n.r=e.read_shift(4),n.c=e.read_shift(4),t.r=qn(n);var a=e.read_shift(1);return a&2&&(t.l="1"),a&8&&(t.a="1"),t}function aRe(e,t,n){var a=[];return $c(e,function(s,o,i){switch(i){case 63:a.push(s);break;default:if(!o.T)throw new Error("Unexpected record 0x"+i.toString(16))}}),a}function rRe(e,t,n,a){if(!e)return e;var r=a||{},s=!1;$c(e,function(i,c,A){switch(A){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!c.T){if(!s||r.WTF)throw new Error("Unexpected record 0x"+A.toString(16))}}},r)}function sRe(e,t){if(!e)return"??";var n=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][n].Target}function oN(e,t,n,a){var r=Array.isArray(e),s;t.forEach(function(o){var i=Mo(o.ref);if(r?(e[i.r]||(e[i.r]=[]),s=e[i.r][i.c]):s=e[o.ref],!s){s={t:"z"},r?e[i.r][i.c]=s:e[o.ref]=s;var c=Lr(e["!ref"]||"BDWGO1000001:A1");c.s.r>i.r&&(c.s.r=i.r),c.e.r<i.r&&(c.e.r=i.r),c.s.c>i.c&&(c.s.c=i.c),c.e.c<i.c&&(c.e.c=i.c);var A=Sa(c);A!==e["!ref"]&&(e["!ref"]=A)}s.c||(s.c=[]);var d={a:o.author,t:o.t,r:o.r,T:n};o.h&&(d.h=o.h);for(var f=s.c.length-1;f>=0;--f){if(!n&&s.c[f].T)return;n&&!s.c[f].T&&s.c.splice(f,1)}if(n&&a){for(f=0;f<a.length;++f)if(d.a==a[f].id){d.a=a[f].name||d.a;break}}s.c.push(d)})}function oRe(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var n=[],a=[],r=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);r&&r[1]&&r[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var i=o.match(/<(?:\w+:)?author[^>]*>(.*)/);i&&n.push(i[1])}});var s=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var i=o.match(/<(?:\w+:)?comment[^>]*>/);if(i){var c=On(i[0]),A={author:c.authorId&&n[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=Mo(c.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var f=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),m=!!f&&!!f[1]&&jT(f[1])||{r:"",t:"",h:""};A.r=m.r,m.r=="<t></t>"&&(m.t=m.h=""),A.t=(m.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(A.h=m.h),a.push(A)}}}}),a}function iRe(e,t){var n=[],a=!1,r={},s=0;return e.replace(Co,function(i,c){var A=On(i);switch(Gu(A[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":r={author:A.personId,guid:A.id,ref:A.ref,T:1};break;case"</threadedComment>":r.t!=null&&n.push(r);break;case"<text>":case"<text":s=c+i.length;break;case"</text>":r.t=e.slice(s,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":a=!0;break;case"</mentions>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&t.WTF)throw new Error("unrecognized "+A[0]+" in threaded comments")}return i}),n}function lRe(e,t){var n=[],a=!1;return e.replace(Co,function(s){var o=On(s);switch(Gu(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":n.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&t.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return s}),n}function uRe(e){var t={};t.iauthor=e.read_shift(4);var n=qf(e);return t.rfx=n.s,t.ref=qn(n.s),e.l+=16,t}var cRe=yo;function dRe(e,t){var n=[],a=[],r={},s=!1;return $c(e,function(i,c,A){switch(A){case 632:a.push(i);break;case 635:r=i;break;case 637:r.t=i.t,r.h=i.h,r.r=i.r;break;case 636:if(r.author=a[r.iauthor],delete r.iauthor,t.sheetRows&&r.rfx&&t.sheetRows<=r.rfx.r)break;r.t||(r.t=""),delete r.rfx,n.push(r);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!s||t.WTF)throw new Error("Unexpected record 0x"+A.toString(16))}}}),n}var ARe="application/vnd.ms-office.vbaProject";function fRe(e){var t=ba.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(n,a){if(!(n.slice(-1)==="/"||!n.match(/_VBA_PROJECT_CUR/))){var r=n.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");ba.utils.cfb_add(t,r,e.FileIndex[a].content)}}),ba.write(t)}function mRe(){return{"!type":"dialog"}}function vRe(){return{"!type":"dialog"}}function hRe(){return{"!type":"macro"}}function pRe(){return{"!type":"macro"}}var wv=(function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function n(a,r,s,o){var i=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),o.length==0?i=!0:o.charAt(0)=="["&&(i=!0,o=o.slice(1,-1));var A=s.length>0?parseInt(s,10)|0:0,d=o.length>0?parseInt(o,10)|0:0;return i?d+=t.c:--d,c?A+=t.r:--A,r+(i?"":"$")+ys(d)+(c?"":"$")+js(A)}return function(r,s){return t=s,r.replace(e,n)}})(),v9=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,gRe=(function(){return function(t,n){return t.replace(v9,function(a,r,s,o,i,c){var A=$T(o)-(s?0:n.c),d=HT(c)-(i?0:n.r),f=d==0?"":i?d+1:"["+d+"]",m=A==0?"":s?A+1:"["+A+"]";return r+"R"+f+"C"+m})}})();function h9(e,t){return e.replace(v9,function(n,a,r,s,o,i){return a+(r=="$"?r+s:ys($T(s)+t.c))+(o=="$"?o+i:js(HT(i)+t.r))})}function yRe(e,t,n){var a=_h(t),r=a.s,s=Mo(n),o={r:s.r-r.r,c:s.c-r.c};return h9(e,o)}function _Re(e){return e.length!=1}function iN(e){return e.replace(/_xlfn\./g,"")}function ts(e){e.l+=1}function qd(e,t){var n=e.read_shift(2);return[n&16383,n>>14&1,n>>15&1]}function p9(e,t,n){var a=2;if(n){if(n.biff>=2&&n.biff<=5)return g9(e);n.biff==12&&(a=4)}var r=e.read_shift(a),s=e.read_shift(a),o=qd(e),i=qd(e);return{s:{r,c:o[0],cRel:o[1],rRel:o[2]},e:{r:s,c:i[0],cRel:i[1],rRel:i[2]}}}function g9(e){var t=qd(e),n=qd(e),a=e.read_shift(1),r=e.read_shift(1);return{s:{r:t[0],c:a,cRel:t[1],rRel:t[2]},e:{r:n[0],c:r,cRel:n[1],rRel:n[2]}}}function wRe(e,t,n){if(n.biff<8)return g9(e);var a=e.read_shift(n.biff==12?4:2),r=e.read_shift(n.biff==12?4:2),s=qd(e),o=qd(e);return{s:{r:a,c:s[0],cRel:s[1],rRel:s[2]},e:{r,c:o[0],cRel:o[1],rRel:o[2]}}}function y9(e,t,n){if(n&&n.biff>=2&&n.biff<=5)return bRe(e);var a=e.read_shift(n&&n.biff==12?4:2),r=qd(e);return{r:a,c:r[0],cRel:r[1],rRel:r[2]}}function bRe(e){var t=qd(e),n=e.read_shift(1);return{r:t[0],c:n,cRel:t[1],rRel:t[2]}}function xRe(e){var t=e.read_shift(2),n=e.read_shift(2);return{r:t,c:n&255,fQuoted:!!(n&16384),cRel:n>>15,rRel:n>>15}}function CRe(e,t,n){var a=n&&n.biff?n.biff:8;if(a>=2&&a<=5)return SRe(e);var r=e.read_shift(a>=12?4:2),s=e.read_shift(2),o=(s&16384)>>14,i=(s&32768)>>15;if(s&=16383,i==1)for(;r>524287;)r-=1048576;if(o==1)for(;s>8191;)s=s-16384;return{r,c:s,cRel:o,rRel:i}}function SRe(e){var t=e.read_shift(2),n=e.read_shift(1),a=(t&32768)>>15,r=(t&16384)>>14;return t&=16383,a==1&&t>=8192&&(t=t-16384),r==1&&n>=128&&(n=n-256),{r:t,c:n,cRel:r,rRel:a}}function ERe(e,t,n){var a=(e[e.l++]&96)>>5,r=p9(e,n.biff>=2&&n.biff<=5?6:8,n);return[a,r]}function BRe(e,t,n){var a=(e[e.l++]&96)>>5,r=e.read_shift(2,"i"),s=8;if(n)switch(n.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}var o=p9(e,s,n);return[a,r,o]}function kRe(e,t,n){var a=(e[e.l++]&96)>>5;return e.l+=n&&n.biff>8?12:n.biff<8?6:8,[a]}function TRe(e,t,n){var a=(e[e.l++]&96)>>5,r=e.read_shift(2),s=8;if(n)switch(n.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}return e.l+=s,[a,r]}function IRe(e,t,n){var a=(e[e.l++]&96)>>5,r=wRe(e,t-1,n);return[a,r]}function FRe(e,t,n){var a=(e[e.l++]&96)>>5;return e.l+=n.biff==2?6:n.biff==12?14:7,[a]}function lN(e){var t=e[e.l+1]&1,n=1;return e.l+=4,[t,n]}function PRe(e,t,n){e.l+=2;for(var a=e.read_shift(n&&n.biff==2?1:2),r=[],s=0;s<=a;++s)r.push(e.read_shift(n&&n.biff==2?1:2));return r}function DRe(e,t,n){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(n&&n.biff==2?1:2)]}function URe(e,t,n){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(n&&n.biff==2?1:2)]}function RRe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function NRe(e,t,n){var a=e[e.l+1]&255?1:0;return e.l+=n&&n.biff==2?3:4,[a]}function _9(e){var t=e.read_shift(1),n=e.read_shift(1);return[t,n]}function VRe(e){return e.read_shift(2),_9(e)}function LRe(e){return e.read_shift(2),_9(e)}function MRe(e,t,n){var a=(e[e.l]&96)>>5;e.l+=1;var r=y9(e,0,n);return[a,r]}function ORe(e,t,n){var a=(e[e.l]&96)>>5;e.l+=1;var r=CRe(e,0,n);return[a,r]}function HRe(e,t,n){var a=(e[e.l]&96)>>5;e.l+=1;var r=e.read_shift(2);n&&n.biff==5&&(e.l+=12);var s=y9(e,0,n);return[a,r,s]}function $Re(e,t,n){var a=(e[e.l]&96)>>5;e.l+=1;var r=e.read_shift(n&&n.biff<=3?1:2);return[QNe[r],x9[r],a]}function QRe(e,t,n){var a=e[e.l++],r=e.read_shift(1),s=n&&n.biff<=3?[a==88?-1:0,e.read_shift(1)]:GRe(e);return[r,(s[0]===0?x9:$Ne)[s[1]]]}function GRe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function zRe(e,t,n){e.l+=n&&n.biff==2?3:4}function KRe(e,t,n){if(e.l++,n&&n.biff==12)return[e.read_shift(4,"i"),0];var a=e.read_shift(2),r=e.read_shift(n&&n.biff==2?1:2);return[a,r]}function WRe(e){return e.l++,Yf[e.read_shift(1)]}function jRe(e){return e.l++,e.read_shift(2)}function qRe(e){return e.l++,e.read_shift(1)!==0}function YRe(e){return e.l++,fo(e)}function XRe(e,t,n){return e.l++,kg(e,t-1,n)}function JRe(e,t){var n=[e.read_shift(1)];if(t==12)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2;break}switch(n[0]){case 4:n[1]=Kr(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:n[1]=Yf[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:n[1]=fo(e);break;case 2:n[1]=Xf(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function ZRe(e,t,n){for(var a=e.read_shift(n.biff==12?4:2),r=[],s=0;s!=a;++s)r.push((n.biff==12?qf:$w)(e));return r}function eNe(e,t,n){var a=0,r=0;n.biff==12?(a=e.read_shift(4),r=e.read_shift(4)):(r=1+e.read_shift(1),a=1+e.read_shift(2)),n.biff>=2&&n.biff<8&&(--a,--r==0&&(r=256));for(var s=0,o=[];s!=a&&(o[s]=[]);++s)for(var i=0;i!=r;++i)o[s][i]=JRe(e,n.biff);return o}function tNe(e,t,n){var a=e.read_shift(1)>>>5&3,r=!n||n.biff>=8?4:2,s=e.read_shift(r);switch(n.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[a,0,s]}function nNe(e,t,n){if(n.biff==5)return aNe(e);var a=e.read_shift(1)>>>5&3,r=e.read_shift(2),s=e.read_shift(4);return[a,r,s]}function aNe(e){var t=e.read_shift(1)>>>5&3,n=e.read_shift(2,"i");e.l+=8;var a=e.read_shift(2);return e.l+=12,[t,n,a]}function rNe(e,t,n){var a=e.read_shift(1)>>>5&3;e.l+=n&&n.biff==2?3:4;var r=e.read_shift(n&&n.biff==2?1:2);return[a,r]}function sNe(e,t,n){var a=e.read_shift(1)>>>5&3,r=e.read_shift(n&&n.biff==2?1:2);return[a,r]}function oNe(e,t,n){var a=e.read_shift(1)>>>5&3;return e.l+=4,n.biff<8&&e.l--,n.biff==12&&(e.l+=2),[a]}function iNe(e,t,n){var a=(e[e.l++]&96)>>5,r=e.read_shift(2),s=4;if(n)switch(n.biff){case 5:s=15;break;case 12:s=6;break}return e.l+=s,[a,r]}var lNe=wo,uNe=wo,cNe=wo;function Ig(e,t,n){return e.l+=2,[xRe(e)]}function YT(e){return e.l+=6,[]}var dNe=Ig,ANe=YT,fNe=YT,mNe=Ig;function w9(e){return e.l+=2,[rs(e),e.read_shift(2)&1]}var vNe=Ig,hNe=w9,pNe=YT,gNe=Ig,yNe=Ig,_Ne=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function wNe(e){e.l+=2;var t=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(4),r=e.read_shift(2),s=e.read_shift(2),o=_Ne[n>>2&31];return{ixti:t,coltype:n&3,rt:o,idx:a,c:r,C:s}}function bNe(e){return e.l+=2,[e.read_shift(4)]}function xNe(e,t,n){return e.l+=5,e.l+=2,e.l+=n.biff==2?1:4,["PTGSHEET"]}function CNe(e,t,n){return e.l+=n.biff==2?4:5,["PTGENDSHEET"]}function SNe(e){var t=e.read_shift(1)>>>5&3,n=e.read_shift(2);return[t,n]}function ENe(e){var t=e.read_shift(1)>>>5&3,n=e.read_shift(2);return[t,n]}function BNe(e){return e.l+=4,[0,0]}var uN={1:{n:"PtgExp",f:KRe},2:{n:"PtgTbl",f:cNe},3:{n:"PtgAdd",f:ts},4:{n:"PtgSub",f:ts},5:{n:"PtgMul",f:ts},6:{n:"PtgDiv",f:ts},7:{n:"PtgPower",f:ts},8:{n:"PtgConcat",f:ts},9:{n:"PtgLt",f:ts},10:{n:"PtgLe",f:ts},11:{n:"PtgEq",f:ts},12:{n:"PtgGe",f:ts},13:{n:"PtgGt",f:ts},14:{n:"PtgNe",f:ts},15:{n:"PtgIsect",f:ts},16:{n:"PtgUnion",f:ts},17:{n:"PtgRange",f:ts},18:{n:"PtgUplus",f:ts},19:{n:"PtgUminus",f:ts},20:{n:"PtgPercent",f:ts},21:{n:"PtgParen",f:ts},22:{n:"PtgMissArg",f:ts},23:{n:"PtgStr",f:XRe},26:{n:"PtgSheet",f:xNe},27:{n:"PtgEndSheet",f:CNe},28:{n:"PtgErr",f:WRe},29:{n:"PtgBool",f:qRe},30:{n:"PtgInt",f:jRe},31:{n:"PtgNum",f:YRe},32:{n:"PtgArray",f:FRe},33:{n:"PtgFunc",f:$Re},34:{n:"PtgFuncVar",f:QRe},35:{n:"PtgName",f:tNe},36:{n:"PtgRef",f:MRe},37:{n:"PtgArea",f:ERe},38:{n:"PtgMemArea",f:rNe},39:{n:"PtgMemErr",f:lNe},40:{n:"PtgMemNoMem",f:uNe},41:{n:"PtgMemFunc",f:sNe},42:{n:"PtgRefErr",f:oNe},43:{n:"PtgAreaErr",f:kRe},44:{n:"PtgRefN",f:ORe},45:{n:"PtgAreaN",f:IRe},46:{n:"PtgMemAreaN",f:SNe},47:{n:"PtgMemNoMemN",f:ENe},57:{n:"PtgNameX",f:nNe},58:{n:"PtgRef3d",f:HRe},59:{n:"PtgArea3d",f:BRe},60:{n:"PtgRefErr3d",f:iNe},61:{n:"PtgAreaErr3d",f:TRe},255:{}},kNe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},TNe={1:{n:"PtgElfLel",f:w9},2:{n:"PtgElfRw",f:gNe},3:{n:"PtgElfCol",f:dNe},6:{n:"PtgElfRwV",f:yNe},7:{n:"PtgElfColV",f:mNe},10:{n:"PtgElfRadical",f:vNe},11:{n:"PtgElfRadicalS",f:pNe},13:{n:"PtgElfColS",f:ANe},15:{n:"PtgElfColSV",f:fNe},16:{n:"PtgElfRadicalLel",f:hNe},25:{n:"PtgList",f:wNe},29:{n:"PtgSxName",f:bNe},255:{}},INe={0:{n:"PtgAttrNoop",f:BNe},1:{n:"PtgAttrSemi",f:NRe},2:{n:"PtgAttrIf",f:URe},4:{n:"PtgAttrChoose",f:PRe},8:{n:"PtgAttrGoto",f:DRe},16:{n:"PtgAttrSum",f:zRe},32:{n:"PtgAttrBaxcel",f:lN},33:{n:"PtgAttrBaxcel",f:lN},64:{n:"PtgAttrSpace",f:VRe},65:{n:"PtgAttrSpaceSemi",f:LRe},128:{n:"PtgAttrIfError",f:RRe},255:{}};function Fg(e,t,n,a){if(a.biff<8)return wo(e,t);for(var r=e.l+t,s=[],o=0;o!==n.length;++o)switch(n[o][0]){case"PtgArray":n[o][1]=eNe(e,0,a),s.push(n[o][1]);break;case"PtgMemArea":n[o][2]=ZRe(e,n[o][1],a),s.push(n[o][2]);break;case"PtgExp":a&&a.biff==12&&(n[o][1][1]=e.read_shift(4),s.push(n[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[o][0]}return t=r-e.l,t!==0&&s.push(wo(e,t)),s}function Pg(e,t,n){for(var a=e.l+t,r,s,o=[];a!=e.l;)t=a-e.l,s=e[e.l],r=uN[s]||uN[kNe[s]],(s===24||s===25)&&(r=(s===24?TNe:INe)[e[e.l+1]]),!r||!r.f?wo(e,t):o.push([r.n,r.f(e,t,n)]);return o}function FNe(e){for(var t=[],n=0;n<e.length;++n){for(var a=e[n],r=[],s=0;s<a.length;++s){var o=a[s];if(o)switch(o[0]){case 2:r.push('"'+o[1].replace(/"/g,'""')+'"');break;default:r.push(o[1])}else r.push("")}t.push(r.join(","))}return t.join(";")}var PNe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function DNe(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function b9(e,t,n){if(!e)return"SH33TJSERR0";if(n.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var a=e.XTI[t];if(n.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!a)return"SH33TJSERR1";var r="";if(n.biff>8)switch(e[a[0]][0]){case 357:return r=a[1]==-1?"#REF":e.SheetNames[a[1]],a[1]==a[2]?r:r+":"+e.SheetNames[a[2]];case 358:return n.SID!=null?e.SheetNames[n.SID]:"SH33TJSSAME"+e[a[0]][0];case 355:default:return"SH33TJSSRC"+e[a[0]][0]}switch(e[a[0]][0][0]){case 1025:return r=a[1]==-1?"#REF":e.SheetNames[a[1]]||"SH33TJSERR3",a[1]==a[2]?r:r+":"+e.SheetNames[a[2]];case 14849:return e[a[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return e[a[0]][0][3]?(r=a[1]==-1?"#REF":e[a[0]][0][3][a[1]]||"SH33TJSERR4",a[1]==a[2]?r:r+":"+e[a[0]][0][3][a[2]]):"SH33TJSERR2"}}function cN(e,t,n){var a=b9(e,t,n);return a=="#REF"?a:DNe(a,n)}function oo(e,t,n,a,r){var s=r&&r.biff||8,o={s:{c:0,r:0}},i=[],c,A,d,f=0,m=0,v,p="";if(!e[0]||!e[0][0])return"";for(var g=-1,y="",w=0,b=e[0].length;w<b;++w){var x=e[0][w];switch(x[0]){case"PtgUminus":i.push("-"+i.pop());break;case"PtgUplus":i.push("+"+i.pop());break;case"PtgPercent":i.push(i.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=i.pop(),A=i.pop(),g>=0){switch(e[0][g][1][0]){case 0:y=Nr(" ",e[0][g][1][1]);break;case 1:y=Nr("\r",e[0][g][1][1]);break;default:if(y="",r.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][g][1][0])}A=A+y,g=-1}i.push(A+PNe[x[0]]+c);break;case"PtgIsect":c=i.pop(),A=i.pop(),i.push(A+" "+c);break;case"PtgUnion":c=i.pop(),A=i.pop(),i.push(A+","+c);break;case"PtgRange":c=i.pop(),A=i.pop(),i.push(A+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=Zp(x[1][1],o,r),i.push(e0(d,s));break;case"PtgRefN":d=n?Zp(x[1][1],n,r):x[1][1],i.push(e0(d,s));break;case"PtgRef3d":f=x[1][1],d=Zp(x[1][2],o,r),p=cN(a,f,r),i.push(p+"!"+e0(d,s));break;case"PtgFunc":case"PtgFuncVar":var T=x[1][0],D=x[1][1];T||(T=0),T&=127;var k=T==0?[]:i.slice(-T);i.length-=T,D==="User"&&(D=k.shift()),i.push(D+"("+k.join(",")+")");break;case"PtgBool":i.push(x[1]?"TRUE":"FALSE");break;case"PtgInt":i.push(x[1]);break;case"PtgNum":i.push(String(x[1]));break;case"PtgStr":i.push('"'+x[1].replace(/"/g,'""')+'"');break;case"PtgErr":i.push(x[1]);break;case"PtgAreaN":v=GR(x[1][1],n?{s:n}:o,r),i.push(UC(v,r));break;case"PtgArea":v=GR(x[1][1],o,r),i.push(UC(v,r));break;case"PtgArea3d":f=x[1][1],v=x[1][2],p=cN(a,f,r),i.push(p+"!"+UC(v,r));break;case"PtgAttrSum":i.push("SUM("+i.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":m=x[1][2];var S=(a.names||[])[m-1]||(a[0]||[])[m],E=S?S.Name:"SH33TJSNAME"+String(m);E&&E.slice(0,6)=="_xlfn."&&!r.xlfn&&(E=E.slice(6)),i.push(E);break;case"PtgNameX":var C=x[1][1];m=x[1][2];var U;if(r.biff<=5)C<0&&(C=-C),a[C]&&(U=a[C][m]);else{var F="";if(((a[C]||[])[0]||[])[0]==14849||(((a[C]||[])[0]||[])[0]==1025?a[C][m]&&a[C][m].itab>0&&(F=a.SheetNames[a[C][m].itab-1]+"!"):F=a.SheetNames[m-1]+"!"),a[C]&&a[C][m])F+=a[C][m].Name;else if(a[0]&&a[0][m])F+=a[0][m].Name;else{var L=(b9(a,C,r)||"").split(";;");L[m-1]?F=L[m-1]:F+="SH33TJSERRX"}i.push(F);break}U||(U={Name:"SH33TJSERRY"}),i.push(U.Name);break;case"PtgParen":var H="(",ue=")";if(g>=0){switch(y="",e[0][g][1][0]){case 2:H=Nr(" ",e[0][g][1][1])+H;break;case 3:H=Nr("\r",e[0][g][1][1])+H;break;case 4:ue=Nr(" ",e[0][g][1][1])+ue;break;case 5:ue=Nr("\r",e[0][g][1][1])+ue;break;default:if(r.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][g][1][0])}g=-1}i.push(H+i.pop()+ue);break;case"PtgRefErr":i.push("#REF!");break;case"PtgRefErr3d":i.push("#REF!");break;case"PtgExp":d={c:x[1][1],r:x[1][0]};var ie={c:n.c,r:n.r};if(a.sharedf[qn(d)]){var Q=a.sharedf[qn(d)];i.push(oo(Q,o,ie,a,r))}else{var X=!1;for(c=0;c!=a.arrayf.length;++c)if(A=a.arrayf[c],!(d.c<A[0].s.c||d.c>A[0].e.c)&&!(d.r<A[0].s.r||d.r>A[0].e.r)){i.push(oo(A[1],o,ie,a,r)),X=!0;break}X||i.push(x[1])}break;case"PtgArray":i.push("{"+FNe(x[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":g=w;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":i.push("");break;case"PtgAreaErr":i.push("#REF!");break;case"PtgAreaErr3d":i.push("#REF!");break;case"PtgList":i.push("Table"+x[1].idx+"[#"+x[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(x));default:throw new Error("Unrecognized Formula Token: "+String(x))}var le=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(r.biff!=3&&g>=0&&le.indexOf(e[0][w][0])==-1){x=e[0][g];var Z=!0;switch(x[1][0]){case 4:Z=!1;case 0:y=Nr(" ",x[1][1]);break;case 5:Z=!1;case 1:y=Nr("\r",x[1][1]);break;default:if(y="",r.WTF)throw new Error("Unexpected PtgAttrSpaceType "+x[1][0])}i.push((Z?y:"")+i.pop()+(Z?"":y)),g=-1}}if(i.length>1&&r.WTF)throw new Error("bad formula stack");return i[0]}function UNe(e,t,n){var a=e.l+t,r=n.biff==2?1:2,s,o=e.read_shift(r);if(o==65535)return[[],wo(e,t-2)];var i=Pg(e,o,n);return t!==o+r&&(s=Fg(e,t-o-r,i,n)),e.l=a,[i,s]}function RNe(e,t,n){var a=e.l+t,r=n.biff==2?1:2,s,o=e.read_shift(r);if(o==65535)return[[],wo(e,t-2)];var i=Pg(e,o,n);return t!==o+r&&(s=Fg(e,t-o-r,i,n)),e.l=a,[i,s]}function NNe(e,t,n,a){var r=e.l+t,s=Pg(e,a,n),o;return r!==e.l&&(o=Fg(e,r-e.l,s,n)),[s,o]}function VNe(e,t,n){var a=e.l+t,r,s=e.read_shift(2),o=Pg(e,s,n);return s==65535?[[],wo(e,t-2)]:(t!==s+2&&(r=Fg(e,a-s-2,o,n)),[o,r])}function LNe(e){var t;if(_c(e,e.l+6)!==65535)return[fo(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function VC(e,t,n){var a=e.l+t,r=zu(e);n.biff==2&&++e.l;var s=LNe(e),o=e.read_shift(1);n.biff!=2&&(e.read_shift(1),n.biff>=5&&e.read_shift(4));var i=RNe(e,a-e.l,n);return{cell:r,val:s[0],formula:i,shared:o>>3&1,tt:s[1]}}function Qw(e,t,n){var a=e.read_shift(4),r=Pg(e,a,n),s=e.read_shift(4),o=s>0?Fg(e,s,r,n):null;return[r,o]}var MNe=Qw,Gw=Qw,ONe=Qw,HNe=Qw,$Ne={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},x9={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},QNe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function dN(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,n){return n.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function LC(e){var t=e.split(":"),n=t[0].split(".")[0];return[n,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}var r0={},bv={};function s0(e,t){if(e){var n=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(n=[1,1,1,1,.5,.5]),e.left==null&&(e.left=n[0]),e.right==null&&(e.right=n[1]),e.top==null&&(e.top=n[2]),e.bottom==null&&(e.bottom=n[3]),e.header==null&&(e.header=n[4]),e.footer==null&&(e.footer=n[5])}}function C9(e,t,n,a,r,s){try{a.cellNF&&(e.z=ea[t])}catch(i){if(a.WTF)throw i}if(!(e.t==="z"&&!a.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Us(e.v)),(!a||a.cellText!==!1)&&e.t!=="z")try{if(ea[t]==null&&uf(GFe[t]||"General",t),e.t==="e")e.w=e.w||Yf[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=V0(e.v);else if(e.t==="d"){var o=Go(e.v);(o|0)===o?e.w=o.toString(10):e.w=V0(o)}else{if(e.v===void 0)return"";e.w=Cf(e.v,bv)}else e.t==="d"?e.w=tl(t,Go(e.v),bv):e.w=tl(t,e.v,bv)}catch(i){if(a.WTF)throw i}if(a.cellStyles&&n!=null)try{e.s=s.Fills[n],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=_2(r.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),a.WTF&&(e.s.fgColor.raw_rgb=r.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=_2(r.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),a.WTF&&(e.s.bgColor.raw_rgb=r.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(i){if(a.WTF&&s.Fills)throw i}}}function GNe(e,t){var n=Lr(t);n.s.r<=n.e.r&&n.s.c<=n.e.c&&n.s.r>=0&&n.s.c>=0&&(e["!ref"]=Sa(n))}var zNe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,KNe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,WNe=/<(?:\w:)?hyperlink [^>]*>/mg,jNe=/"(\w*:\w*)"/,qNe=/<(?:\w:)?col\b[^>]*[\/]?>/g,YNe=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,XNe=/<(?:\w:)?pageMargins[^>]*\/>/g,S9=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,JNe=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,ZNe=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function eVe(e,t,n,a,r,s,o){if(!e)return e;a||(a={"!id":{}});var i=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},A="",d="",f=e.match(KNe);f?(A=e.slice(0,f.index),d=e.slice(f.index+f[0].length)):A=d=e;var m=A.match(S9);m?XT(m[0],i,r,n):(m=A.match(JNe))&&tVe(m[0],m[1]||"",i,r,n);var v=(A.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(v>0){var p=A.slice(v,v+50).match(jNe);p&&GNe(i,p[1])}var g=A.match(ZNe);g&&g[1]&&iVe(g[1],r);var y=[];if(t.cellStyles){var w=A.match(qNe);w&&rVe(y,w)}f&&lVe(f[1],i,t,c,s,o);var b=d.match(YNe);b&&(i["!autofilter"]=sVe(b[0]));var x=[],T=d.match(zNe);if(T)for(v=0;v!=T.length;++v)x[v]=Lr(T[v].slice(T[v].indexOf('"')+1));var D=d.match(WNe);D&&nVe(i,D,a);var k=d.match(XNe);if(k&&(i["!margins"]=aVe(On(k[0]))),!i["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(i["!ref"]=Sa(c)),t.sheetRows>0&&i["!ref"]){var S=Lr(i["!ref"]);t.sheetRows<=+S.e.r&&(S.e.r=t.sheetRows-1,S.e.r>c.e.r&&(S.e.r=c.e.r),S.e.r<S.s.r&&(S.s.r=S.e.r),S.e.c>c.e.c&&(S.e.c=c.e.c),S.e.c<S.s.c&&(S.s.c=S.e.c),i["!fullref"]=i["!ref"],i["!ref"]=Sa(S))}return y.length>0&&(i["!cols"]=y),x.length>0&&(i["!merges"]=x),i}function XT(e,t,n,a){var r=On(e);n.Sheets[a]||(n.Sheets[a]={}),r.codeName&&(n.Sheets[a].CodeName=Ia(mr(r.codeName)))}function tVe(e,t,n,a,r){XT(e.slice(0,e.indexOf(">")),n,a,r)}function nVe(e,t,n){for(var a=Array.isArray(e),r=0;r!=t.length;++r){var s=On(mr(t[r]),!0);if(!s.ref)return;var o=((n||{})["!id"]||[])[s.id];o?(s.Target=o.Target,s.location&&(s.Target+="#"+Ia(s.location))):(s.Target="#"+Ia(s.location),o={Target:s.Target,TargetMode:"Internal"}),s.Rel=o,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var i=Lr(s.ref),c=i.s.r;c<=i.e.r;++c)for(var A=i.s.c;A<=i.e.c;++A){var d=qn({c:A,r:c});a?(e[c]||(e[c]=[]),e[c][A]||(e[c][A]={t:"z",v:void 0}),e[c][A].l=s):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=s)}}}function aVe(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(n){e[n]&&(t[n]=parseFloat(e[n]))}),t}function rVe(e,t){for(var n=!1,a=0;a!=t.length;++a){var r=On(t[a],!0);r.hidden&&(r.hidden=Sr(r.hidden));var s=parseInt(r.min,10)-1,o=parseInt(r.max,10)-1;for(r.outlineLevel&&(r.level=+r.outlineLevel||0),delete r.min,delete r.max,r.width=+r.width,!n&&r.width&&(n=!0,qT(r.width)),Kv(r);s<=o;)e[s++]=Ws(r)}}function sVe(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}var oVe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function iVe(e,t){t.Views||(t.Views=[{}]),(e.match(oVe)||[]).forEach(function(n,a){var r=On(n);t.Views[a]||(t.Views[a]={}),+r.zoomScale&&(t.Views[a].zoom=+r.zoomScale),Sr(r.rightToLeft)&&(t.Views[a].RTL=!0)})}var lVe=(function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,n=/r=["']([^"']*)["']/,a=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,r=/ref=["']([^"']*)["']/,s=L0("v"),o=L0("f");return function(c,A,d,f,m,v){for(var p=0,g="",y=[],w=[],b=0,x=0,T=0,D="",k,S,E=0,C=0,U,F,L=0,H=0,ue=Array.isArray(v.CellXf),ie,Q=[],X=[],le=Array.isArray(A),Z=[],re={},q=!1,P=!!d.sheetStubs,G=c.split(t),J=0,M=G.length;J!=M;++J){g=G[J].trim();var te=g.length;if(te!==0){var Y=0;e:for(p=0;p<te;++p)switch(g[p]){case">":if(g[p-1]!="/"){++p;break e}if(d&&d.cellStyles){if(S=On(g.slice(Y,p),!0),E=S.r!=null?parseInt(S.r,10):E+1,C=-1,d.sheetRows&&d.sheetRows<E)continue;re={},q=!1,S.ht&&(q=!0,re.hpt=parseFloat(S.ht),re.hpx=$0(re.hpt)),S.hidden=="1"&&(q=!0,re.hidden=!0),S.outlineLevel!=null&&(q=!0,re.level=+S.outlineLevel),q&&(Z[E-1]=re)}break;case"<":Y=p;break}if(Y>=p)break;if(S=On(g.slice(Y,p),!0),E=S.r!=null?parseInt(S.r,10):E+1,C=-1,!(d.sheetRows&&d.sheetRows<E)){f.s.r>E-1&&(f.s.r=E-1),f.e.r<E-1&&(f.e.r=E-1),d&&d.cellStyles&&(re={},q=!1,S.ht&&(q=!0,re.hpt=parseFloat(S.ht),re.hpx=$0(re.hpt)),S.hidden=="1"&&(q=!0,re.hidden=!0),S.outlineLevel!=null&&(q=!0,re.level=+S.outlineLevel),q&&(Z[E-1]=re)),y=g.slice(p).split(e);for(var W=0;W!=y.length&&y[W].trim().charAt(0)=="<";++W);for(y=y.slice(W),p=0;p!=y.length;++p)if(g=y[p].trim(),g.length!==0){if(w=g.match(n),b=p,x=0,T=0,g="<c "+(g.slice(0,1)=="<"?">":"")+g,w!=null&&w.length===2){for(b=0,D=w[1],x=0;x!=D.length&&!((T=D.charCodeAt(x)-64)<1||T>26);++x)b=26*b+T;--b,C=b}else++C;for(x=0;x!=g.length&&g.charCodeAt(x)!==62;++x);if(++x,S=On(g.slice(0,x),!0),S.r||(S.r=qn({r:E-1,c:C})),D=g.slice(x),k={t:""},(w=D.match(s))!=null&&w[1]!==""&&(k.v=Ia(w[1])),d.cellFormula){if((w=D.match(o))!=null&&w[1]!==""){if(k.f=Ia(mr(w[1])).replace(/\r\n/g,`
`),d.xlfn||(k.f=iN(k.f)),w[0].indexOf('t="array"')>-1)k.F=(D.match(r)||[])[1],k.F.indexOf(":")>-1&&Q.push([Lr(k.F),k.F]);else if(w[0].indexOf('t="shared"')>-1){F=On(w[0]);var ee=Ia(mr(w[1]));d.xlfn||(ee=iN(ee)),X[parseInt(F.si,10)]=[F,ee,S.r]}}else(w=D.match(/<f[^>]*\/>/))&&(F=On(w[0]),X[F.si]&&(k.f=yRe(X[F.si][1],X[F.si][2],S.r)));var ae=Mo(S.r);for(x=0;x<Q.length;++x)ae.r>=Q[x][0].s.r&&ae.r<=Q[x][0].e.r&&ae.c>=Q[x][0].s.c&&ae.c<=Q[x][0].e.c&&(k.F=Q[x][1])}if(S.t==null&&k.v===void 0)if(k.f||k.F)k.v=0,k.t="n";else if(P)k.t="z";else continue;else k.t=S.t||"n";switch(f.s.c>C&&(f.s.c=C),f.e.c<C&&(f.e.c=C),k.t){case"n":if(k.v==""||k.v==null){if(!P)continue;k.t="z"}else k.v=parseFloat(k.v);break;case"s":if(typeof k.v>"u"){if(!P)continue;k.t="z"}else U=r0[parseInt(k.v,10)],k.v=U.t,k.r=U.r,d.cellHTML&&(k.h=U.h);break;case"str":k.t="s",k.v=k.v!=null?mr(k.v):"",d.cellHTML&&(k.h=LT(k.v));break;case"inlineStr":w=D.match(a),k.t="s",w!=null&&(U=jT(w[1]))?(k.v=U.t,d.cellHTML&&(k.h=U.h)):k.v="";break;case"b":k.v=Sr(k.v);break;case"d":d.cellDates?k.v=Us(k.v,1):(k.v=Go(Us(k.v,1)),k.t="n");break;case"e":(!d||d.cellText!==!1)&&(k.w=k.v),k.v=K$[k.v];break}if(L=H=0,ie=null,ue&&S.s!==void 0&&(ie=v.CellXf[S.s],ie!=null&&(ie.numFmtId!=null&&(L=ie.numFmtId),d.cellStyles&&ie.fillId!=null&&(H=ie.fillId))),C9(k,L,H,d,m,v),d.cellDates&&ue&&k.t=="n"&&yh(ea[L])&&(k.t="d",k.v=Hw(k.v)),S.cm&&d.xlmeta){var oe=(d.xlmeta.Cell||[])[+S.cm-1];oe&&oe.type=="XLDAPR"&&(k.D=!0)}if(le){var j=Mo(S.r);A[j.r]||(A[j.r]=[]),A[j.r][j.c]=k}else A[S.r]=k}}}}Z.length>0&&(A["!rows"]=Z)}})();function uVe(e,t){var n={},a=e.l+t;n.r=e.read_shift(4),e.l+=4;var r=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=a,s&7&&(n.level=s&7),s&16&&(n.hidden=!0),s&32&&(n.hpt=r/20),n}var cVe=qf;function dVe(){}function AVe(e,t){var n={},a=e[e.l];return++e.l,n.above=!(a&64),n.left=!(a&128),e.l+=18,n.name=UPe(e),n}function fVe(e){var t=ol(e);return[t]}function mVe(e){var t=jf(e);return[t]}function vVe(e){var t=ol(e),n=e.read_shift(1);return[t,n,"b"]}function hVe(e){var t=jf(e),n=e.read_shift(1);return[t,n,"b"]}function pVe(e){var t=ol(e),n=e.read_shift(1);return[t,n,"e"]}function gVe(e){var t=jf(e),n=e.read_shift(1);return[t,n,"e"]}function yVe(e){var t=ol(e),n=e.read_shift(4);return[t,n,"s"]}function _Ve(e){var t=jf(e),n=e.read_shift(4);return[t,n,"s"]}function wVe(e){var t=ol(e),n=fo(e);return[t,n,"n"]}function E9(e){var t=jf(e),n=fo(e);return[t,n,"n"]}function bVe(e){var t=ol(e),n=zT(e);return[t,n,"n"]}function xVe(e){var t=jf(e),n=zT(e);return[t,n,"n"]}function CVe(e){var t=ol(e),n=QT(e);return[t,n,"is"]}function SVe(e){var t=ol(e),n=yo(e);return[t,n,"str"]}function EVe(e){var t=jf(e),n=yo(e);return[t,n,"str"]}function BVe(e,t,n){var a=e.l+t,r=ol(e);r.r=n["!row"];var s=e.read_shift(1),o=[r,s,"b"];if(n.cellFormula){e.l+=2;var i=Gw(e,a-e.l,n);o[3]=oo(i,null,r,n.supbooks,n)}else e.l=a;return o}function kVe(e,t,n){var a=e.l+t,r=ol(e);r.r=n["!row"];var s=e.read_shift(1),o=[r,s,"e"];if(n.cellFormula){e.l+=2;var i=Gw(e,a-e.l,n);o[3]=oo(i,null,r,n.supbooks,n)}else e.l=a;return o}function TVe(e,t,n){var a=e.l+t,r=ol(e);r.r=n["!row"];var s=fo(e),o=[r,s,"n"];if(n.cellFormula){e.l+=2;var i=Gw(e,a-e.l,n);o[3]=oo(i,null,r,n.supbooks,n)}else e.l=a;return o}function IVe(e,t,n){var a=e.l+t,r=ol(e);r.r=n["!row"];var s=yo(e),o=[r,s,"str"];if(n.cellFormula){e.l+=2;var i=Gw(e,a-e.l,n);o[3]=oo(i,null,r,n.supbooks,n)}else e.l=a;return o}var FVe=qf;function PVe(e,t){var n=e.l+t,a=qf(e),r=GT(e),s=yo(e),o=yo(e),i=yo(e);e.l=n;var c={rfx:a,relId:r,loc:s,display:i};return o&&(c.Tooltip=o),c}function DVe(){}function UVe(e,t,n){var a=e.l+t,r=Q$(e),s=e.read_shift(1),o=[r];if(o[2]=s,n.cellFormula){var i=MNe(e,a-e.l,n);o[1]=i}else e.l=a;return o}function RVe(e,t,n){var a=e.l+t,r=qf(e),s=[r];if(n.cellFormula){var o=HNe(e,a-e.l,n);s[1]=o,e.l=a}else e.l=a;return s}var NVe=["left","right","top","bottom","header","footer"];function VVe(e){var t={};return NVe.forEach(function(n){t[n]=fo(e)}),t}function LVe(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function MVe(){}function OVe(){}function HVe(e,t,n,a,r,s,o){if(!e)return e;var i=t||{};a||(a={"!id":{}});var c=i.dense?[]:{},A,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,m=!1,v,p,g,y,w,b,x,T,D,k=[];i.biff=12,i["!row"]=0;var S=0,E=!1,C=[],U={},F=i.supbooks||r.supbooks||[[]];if(F.sharedf=U,F.arrayf=C,F.SheetNames=r.SheetNames||r.Sheets.map(function(le){return le.name}),!i.supbooks&&(i.supbooks=F,r.Names))for(var L=0;L<r.Names.length;++L)F[0][L+1]=r.Names[L];var H=[],ue=[],ie=!1;x2[16]={n:"BrtShortReal",f:E9};var Q;if($c(e,function(Z,re,q){if(!m)switch(q){case 148:A=Z;break;case 0:v=Z,i.sheetRows&&i.sheetRows<=v.r&&(m=!0),T=js(y=v.r),i["!row"]=v.r,(Z.hidden||Z.hpt||Z.level!=null)&&(Z.hpt&&(Z.hpx=$0(Z.hpt)),ue[Z.r]=Z);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(p={t:Z[2]},Z[2]){case"n":p.v=Z[1];break;case"s":x=r0[Z[1]],p.v=x.t,p.r=x.r;break;case"b":p.v=!!Z[1];break;case"e":p.v=Z[1],i.cellText!==!1&&(p.w=Yf[p.v]);break;case"str":p.t="s",p.v=Z[1];break;case"is":p.t="s",p.v=Z[1].t;break}if((g=o.CellXf[Z[0].iStyleRef])&&C9(p,g.numFmtId,null,i,s,o),w=Z[0].c==-1?w+1:Z[0].c,i.dense?(c[y]||(c[y]=[]),c[y][w]=p):c[ys(w)+T]=p,i.cellFormula){for(E=!1,S=0;S<C.length;++S){var P=C[S];v.r>=P[0].s.r&&v.r<=P[0].e.r&&w>=P[0].s.c&&w<=P[0].e.c&&(p.F=Sa(P[0]),E=!0)}!E&&Z.length>3&&(p.f=Z[3])}if(d.s.r>v.r&&(d.s.r=v.r),d.s.c>w&&(d.s.c=w),d.e.r<v.r&&(d.e.r=v.r),d.e.c<w&&(d.e.c=w),i.cellDates&&g&&p.t=="n"&&yh(ea[g.numFmtId])){var G=qA(p.v);G&&(p.t="d",p.v=new Date(G.y,G.m-1,G.d,G.H,G.M,G.S,G.u))}Q&&(Q.type=="XLDAPR"&&(p.D=!0),Q=void 0);break;case 1:case 12:if(!i.sheetStubs||f)break;p={t:"z",v:void 0},w=Z[0].c==-1?w+1:Z[0].c,i.dense?(c[y]||(c[y]=[]),c[y][w]=p):c[ys(w)+T]=p,d.s.r>v.r&&(d.s.r=v.r),d.s.c>w&&(d.s.c=w),d.e.r<v.r&&(d.e.r=v.r),d.e.c<w&&(d.e.c=w),Q&&(Q.type=="XLDAPR"&&(p.D=!0),Q=void 0);break;case 176:k.push(Z);break;case 49:Q=((i.xlmeta||{}).Cell||[])[Z-1];break;case 494:var J=a["!id"][Z.relId];for(J?(Z.Target=J.Target,Z.loc&&(Z.Target+="#"+Z.loc),Z.Rel=J):Z.relId==""&&(Z.Target="#"+Z.loc),y=Z.rfx.s.r;y<=Z.rfx.e.r;++y)for(w=Z.rfx.s.c;w<=Z.rfx.e.c;++w)i.dense?(c[y]||(c[y]=[]),c[y][w]||(c[y][w]={t:"z",v:void 0}),c[y][w].l=Z):(b=qn({c:w,r:y}),c[b]||(c[b]={t:"z",v:void 0}),c[b].l=Z);break;case 426:if(!i.cellFormula)break;C.push(Z),D=i.dense?c[y][w]:c[ys(w)+T],D.f=oo(Z[1],d,{r:v.r,c:w},F,i),D.F=Sa(Z[0]);break;case 427:if(!i.cellFormula)break;U[qn(Z[0].s)]=Z[1],D=i.dense?c[y][w]:c[ys(w)+T],D.f=oo(Z[1],d,{r:v.r,c:w},F,i);break;case 60:if(!i.cellStyles)break;for(;Z.e>=Z.s;)H[Z.e--]={width:Z.w/256,hidden:!!(Z.flags&1),level:Z.level},ie||(ie=!0,qT(Z.w/256)),Kv(H[Z.e+1]);break;case 161:c["!autofilter"]={ref:Sa(Z)};break;case 476:c["!margins"]=Z;break;case 147:r.Sheets[n]||(r.Sheets[n]={}),Z.name&&(r.Sheets[n].CodeName=Z.name),(Z.above||Z.left)&&(c["!outline"]={above:Z.above,left:Z.left});break;case 137:r.Views||(r.Views=[{}]),r.Views[0]||(r.Views[0]={}),Z.RTL&&(r.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!re.T){if(!f||i.WTF)throw new Error("Unexpected record 0x"+q.toString(16))}}},i),delete i.supbooks,delete i["!row"],!c["!ref"]&&(d.s.r<2e6||A&&(A.e.r>0||A.e.c>0||A.s.r>0||A.s.c>0))&&(c["!ref"]=Sa(A||d)),i.sheetRows&&c["!ref"]){var X=Lr(c["!ref"]);i.sheetRows<=+X.e.r&&(X.e.r=i.sheetRows-1,X.e.r>d.e.r&&(X.e.r=d.e.r),X.e.r<X.s.r&&(X.s.r=X.e.r),X.e.c>d.e.c&&(X.e.c=d.e.c),X.e.c<X.s.c&&(X.s.c=X.e.c),c["!fullref"]=c["!ref"],c["!ref"]=Sa(X))}return k.length>0&&(c["!merges"]=k),H.length>0&&(c["!cols"]=H),ue.length>0&&(c["!rows"]=ue),c}function $Ve(e){var t=[],n=e.match(/^<c:numCache>/),a;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var o=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(t[+o[1]]=n?+o[2]:o[2])});var r=Ia((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){a=s.replace(/<.*?>/g,"")}),[t,r,a]}function QVe(e,t,n,a,r,s){var o=s||{"!type":"chart"};if(!e)return s;var i=0,c=0,A="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var m=$Ve(f);d.s.r=d.s.c=0,d.e.c=i,A=ys(i),m[0].forEach(function(v,p){o[A+js(p)]={t:"n",v,z:m[1]},c=p}),d.e.r<c&&(d.e.r=c),++i}),i>0&&(o["!ref"]=Sa(d)),o}function GVe(e,t,n,a,r){if(!e)return e;a||(a={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},o,i=e.match(S9);return i&&XT(i[0],s,r,n),(o=e.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=o[1]),a["!id"][s["!rel"]]&&(s["!drawel"]=a["!id"][s["!rel"]]),s}function zVe(e,t){e.l+=10;var n=yo(e);return{name:n}}function KVe(e,t,n,a,r){if(!e)return e;a||(a={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},o=!1;return $c(e,function(c,A,d){switch(d){case 550:s["!rel"]=c;break;case 651:r.Sheets[n]||(r.Sheets[n]={}),c.name&&(r.Sheets[n].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(A.T>0)){if(!(A.T<0)){if(!o||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),a["!id"][s["!rel"]]&&(s["!drawel"]=a["!id"][s["!rel"]]),s}var B9=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],WVe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],jVe=[],qVe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function AN(e,t){for(var n=0;n!=e.length;++n)for(var a=e[n],r=0;r!=t.length;++r){var s=t[r];if(a[s[0]]==null)a[s[0]]=s[1];else switch(s[2]){case"bool":typeof a[s[0]]=="string"&&(a[s[0]]=Sr(a[s[0]]));break;case"int":typeof a[s[0]]=="string"&&(a[s[0]]=parseInt(a[s[0]],10));break}}}function fN(e,t){for(var n=0;n!=t.length;++n){var a=t[n];if(e[a[0]]==null)e[a[0]]=a[1];else switch(a[2]){case"bool":typeof e[a[0]]=="string"&&(e[a[0]]=Sr(e[a[0]]));break;case"int":typeof e[a[0]]=="string"&&(e[a[0]]=parseInt(e[a[0]],10));break}}}function k9(e){fN(e.WBProps,B9),fN(e.CalcPr,qVe),AN(e.WBView,WVe),AN(e.Sheets,jVe),bv.date1904=Sr(e.WBProps.date1904)}var YVe="][*?/\\".split("");function XVe(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var n=!0;return YVe.forEach(function(a){if(e.indexOf(a)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),n}var JVe=/<\w+:workbook/;function ZVe(e,t){if(!e)throw new Error("Could not find file");var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},a=!1,r="xmlns",s={},o=0;if(e.replace(Co,function(c,A){var d=On(c);switch(Gu(d[0])){case"<?xml":break;case"<workbook":c.match(JVe)&&(r="xmlns"+c.match(/<(\w+):/)[1]),n.xmlns=d[r];break;case"</workbook>":break;case"<fileVersion":delete d[0],n.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":B9.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":n.WBProps[f[0]]=Sr(d[f[0]]);break;case"int":n.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:n.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(n.WBProps.CodeName=mr(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],n.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Ia(mr(d.name)),delete d[0],n.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":a=!0;break;case"</definedNames>":a=!1;break;case"<definedName":s={},s.Name=mr(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),Sr(d.hidden||"0")&&(s.Hidden=!0),o=A+c.length;break;case"</definedName>":s.Ref=Ia(mr(e.slice(o,A))),n.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],n.CalcPr=d;break;case"<calcPr/>":delete d[0],n.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":a=!0;break;case"</AlternateContent>":a=!1;break;case"<revisionPtr":break;default:if(!a&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),pPe.indexOf(n.xmlns)===-1)throw new Error("Unknown Namespace: "+n.xmlns);return k9(n),n}function eLe(e,t){var n={};return n.Hidden=e.read_shift(4),n.iTabID=e.read_shift(4),n.strRelID=RE(e),n.name=yo(e),n}function tLe(e,t){var n={},a=e.read_shift(4);n.defaultThemeVersion=e.read_shift(4);var r=t>8?yo(e):"";return r.length>0&&(n.CodeName=r),n.autoCompressPictures=!!(a&65536),n.backupFile=!!(a&64),n.checkCompatibility=!!(a&4096),n.date1904=!!(a&1),n.filterPrivacy=!!(a&8),n.hidePivotFieldList=!!(a&1024),n.promptedSolutions=!!(a&16),n.publishItems=!!(a&2048),n.refreshAllConnections=!!(a&262144),n.saveExternalLinkValues=!!(a&128),n.showBorderUnselectedTables=!!(a&4),n.showInkAnnotation=!!(a&32),n.showObjects=["all","placeholders","none"][a>>13&3],n.showPivotChartFilter=!!(a&32768),n.updateLinks=["userSet","never","always"][a>>8&3],n}function nLe(e,t){var n={};return e.read_shift(4),n.ArchID=e.read_shift(4),e.l+=t-8,n}function aLe(e,t,n){var a=e.l+t;e.l+=4,e.l+=1;var r=e.read_shift(4),s=RPe(e),o=ONe(e,0,n),i=GT(e);e.l=a;var c={Name:s,Ptg:o};return r<268435455&&(c.Sheet=r),i&&(c.Comment=i),c}function rLe(e,t){var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},a=[],r=!1;t||(t={}),t.biff=12;var s=[],o=[[]];return o.SheetNames=[],o.XTI=[],x2[16]={n:"BrtFRTArchID$",f:nLe},$c(e,function(c,A,d){switch(d){case 156:o.SheetNames.push(c.name),n.Sheets.push(c);break;case 153:n.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=oo(c.Ptg,null,null,o,t),delete t.SID,delete c.Ptg,s.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([d,c]):o[0]=[d,c],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(c),o.XTI=o.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:a.push(d),r=!0;break;case 36:a.pop(),r=!1;break;case 37:a.push(d),r=!0;break;case 38:a.pop(),r=!1;break;case 16:break;default:if(!A.T){if(!r||t.WTF&&a[a.length-1]!=37&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),k9(n),n.Names=s,n.supbooks=o,n}function sLe(e,t,n){return t.slice(-4)===".bin"?rLe(e,n):ZVe(e,n)}function oLe(e,t,n,a,r,s,o,i){return t.slice(-4)===".bin"?HVe(e,a,n,r,s,o,i):eVe(e,a,n,r,s,o,i)}function iLe(e,t,n,a,r,s,o,i){return t.slice(-4)===".bin"?KVe(e,a,n,r,s):GVe(e,a,n,r,s)}function lLe(e,t,n,a,r,s,o,i){return t.slice(-4)===".bin"?hRe():pRe()}function uLe(e,t,n,a,r,s,o,i){return t.slice(-4)===".bin"?mRe():vRe()}function cLe(e,t,n,a){return t.slice(-4)===".bin"?FUe(e,n,a):SUe(e,n,a)}function dLe(e,t,n){return m9(e,n)}function ALe(e,t,n){return t.slice(-4)===".bin"?W3e(e,n):z3e(e,n)}function fLe(e,t,n){return t.slice(-4)===".bin"?dRe(e,n):oRe(e,n)}function mLe(e,t,n){return t.slice(-4)===".bin"?aRe(e):tRe(e)}function vLe(e,t,n,a){return n.slice(-4)===".bin"?rRe(e,t,n,a):void 0}function hLe(e,t,n){return t.slice(-4)===".bin"?ZUe(e,t,n):eRe(e,t,n)}var T9=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,I9=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function gl(e,t){var n=e.split(/\s+/),a=[];if(a[0]=n[0],n.length===1)return a;var r=e.match(T9),s,o,i,c;if(r)for(c=0;c!=r.length;++c)s=r[c].match(I9),(o=s[1].indexOf(":"))===-1?a[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?i="xmlns"+s[1].slice(6):i=s[1].slice(o+1),a[i]=s[2].slice(1,s[2].length-1));return a}function pLe(e){var t=e.split(/\s+/),n={};if(t.length===1)return n;var a=e.match(T9),r,s,o,i;if(a)for(i=0;i!=a.length;++i)r=a[i].match(I9),(s=r[1].indexOf(":"))===-1?n[r[1]]=r[2].slice(1,r[2].length-1):(r[1].slice(0,6)==="xmlns:"?o="xmlns"+r[1].slice(6):o=r[1].slice(s+1),n[o]=r[2].slice(1,r[2].length-1));return n}var o0;function gLe(e,t){var n=o0[e]||Ia(e);return n==="General"?Cf(t):tl(n,t)}function yLe(e,t,n,a){var r=a;switch((n[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":r=Sr(a);break;case"i2":case"int":r=parseInt(a,10);break;case"r4":case"float":r=parseFloat(a);break;case"date":case"dateTime.tz":r=Us(a);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+n[0])}e[Ia(t)]=r}function _Le(e,t,n){if(e.t!=="z"){if(!n||n.cellText!==!1)try{e.t==="e"?e.w=e.w||Yf[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=V0(e.v):e.w=Cf(e.v):e.w=gLe(t||"General",e.v)}catch(s){if(n.WTF)throw s}try{var a=o0[t]||t||"General";if(n.cellNF&&(e.z=a),n.cellDates&&e.t=="n"&&yh(a)){var r=qA(e.v);r&&(e.t="d",e.v=new Date(r.y,r.m-1,r.d,r.H,r.M,r.S,r.u))}}catch(s){if(n.WTF)throw s}}}function wLe(e,t,n){if(n.cellStyles&&t.Interior){var a=t.Interior;a.Pattern&&(a.patternType=yUe[a.Pattern]||a.Pattern)}e[t.ID]=t}function bLe(e,t,n,a,r,s,o,i,c,A){var d="General",f=a.StyleID,m={};A=A||{};var v=[],p=0;for(f===void 0&&i&&(f=i.StyleID),f===void 0&&o&&(f=o.StyleID);s[f]!==void 0&&(s[f].nf&&(d=s[f].nf),s[f].Interior&&v.push(s[f].Interior),!!s[f].Parent);)f=s[f].Parent;switch(n.Type){case"Boolean":a.t="b",a.v=Sr(e);break;case"String":a.t="s",a.r=RR(Ia(e)),a.v=e.indexOf("<")>-1?Ia(t||e).replace(/<.*?>/g,""):a.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),a.v=(Us(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),a.v!==a.v?a.v=Ia(e):a.v<60&&(a.v=a.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":a.v===void 0&&(a.v=+e),a.t||(a.t="n");break;case"Error":a.t="e",a.v=K$[e],A.cellText!==!1&&(a.w=e);break;default:e==""&&t==""?a.t="z":(a.t="s",a.v=RR(t||e));break}if(_Le(a,d,A),A.cellFormula!==!1)if(a.Formula){var g=Ia(a.Formula);g.charCodeAt(0)==61&&(g=g.slice(1)),a.f=wv(g,r),delete a.Formula,a.ArrayRange=="RC"?a.F=wv("RC:RC",r):a.ArrayRange&&(a.F=wv(a.ArrayRange,r),c.push([Lr(a.F),a.F]))}else for(p=0;p<c.length;++p)r.r>=c[p][0].s.r&&r.r<=c[p][0].e.r&&r.c>=c[p][0].s.c&&r.c<=c[p][0].e.c&&(a.F=c[p][1]);A.cellStyles&&(v.forEach(function(y){!m.patternType&&y.patternType&&(m.patternType=y.patternType)}),a.s=m),a.StyleID!==void 0&&(a.ixfe=a.StyleID)}function xLe(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function MC(e,t){var n=t||{};g$();var a=Tp(MT(e));(n.type=="binary"||n.type=="array"||n.type=="base64")&&(a=mr(a));var r=a.slice(0,1024).toLowerCase(),s=!1;if(r=r.replace(/".*?"/g,""),(r.indexOf(">")&1023)>Math.min(r.indexOf(",")&1023,r.indexOf(";")&1023)){var o=Ws(n);return o.type="string",O0.to_workbook(a,o)}if(r.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Ee){r.indexOf("<"+Ee)>=0&&(s=!0)}),s)return PLe(a,n);o0={"General Number":"General","General Date":ea[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":ea[15],"Short Date":ea[14],"Long Time":ea[19],"Medium Time":ea[18],"Short Time":ea[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:ea[2],Standard:ea[4],Percent:ea[10],Scientific:ea[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var i,c=[],A,d={},f=[],m=n.dense?[]:{},v="",p={},g={},y=gl('<Data ss:Type="String">'),w=0,b=0,x=0,T={s:{r:2e6,c:2e6},e:{r:0,c:0}},D={},k={},S="",E=0,C=[],U={},F={},L=0,H=[],ue=[],ie={},Q=[],X,le=!1,Z=[],re=[],q={},P=0,G=0,J={Sheets:[],WBProps:{date1904:!1}},M={};M0.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"");for(var te="";i=M0.exec(a);)switch(i[3]=(te=i[3]).toLowerCase()){case"data":if(te=="data"){if(i[1]==="/"){if((A=c.pop())[0]!==i[3])throw new Error("Bad state: "+A.join("|"))}else i[0].charAt(i[0].length-2)!=="/"&&c.push([i[3],!0]);break}if(c[c.length-1][1])break;i[1]==="/"?bLe(a.slice(w,i.index),S,y,c[c.length-1][0]=="comment"?ie:p,{c:b,r:x},D,Q[b],g,Z,n):(S="",y=gl(i[0]),w=i.index+i[0].length);break;case"cell":if(i[1]==="/")if(ue.length>0&&(p.c=ue),(!n.sheetRows||n.sheetRows>x)&&p.v!==void 0&&(n.dense?(m[x]||(m[x]=[]),m[x][b]=p):m[ys(b)+js(x)]=p),p.HRef&&(p.l={Target:Ia(p.HRef)},p.HRefScreenTip&&(p.l.Tooltip=p.HRefScreenTip),delete p.HRef,delete p.HRefScreenTip),(p.MergeAcross||p.MergeDown)&&(P=b+(parseInt(p.MergeAcross,10)|0),G=x+(parseInt(p.MergeDown,10)|0),C.push({s:{c:b,r:x},e:{c:P,r:G}})),!n.sheetStubs)p.MergeAcross?b=P+1:++b;else if(p.MergeAcross||p.MergeDown){for(var Y=b;Y<=P;++Y)for(var W=x;W<=G;++W)(Y>b||W>x)&&(n.dense?(m[W]||(m[W]=[]),m[W][Y]={t:"z"}):m[ys(Y)+js(W)]={t:"z"});b=P+1}else++b;else p=pLe(i[0]),p.Index&&(b=+p.Index-1),b<T.s.c&&(T.s.c=b),b>T.e.c&&(T.e.c=b),i[0].slice(-2)==="/>"&&++b,ue=[];break;case"row":i[1]==="/"||i[0].slice(-2)==="/>"?(x<T.s.r&&(T.s.r=x),x>T.e.r&&(T.e.r=x),i[0].slice(-2)==="/>"&&(g=gl(i[0]),g.Index&&(x=+g.Index-1)),b=0,++x):(g=gl(i[0]),g.Index&&(x=+g.Index-1),q={},(g.AutoFitHeight=="0"||g.Height)&&(q.hpx=parseInt(g.Height,10),q.hpt=f9(q.hpx),re[x]=q),g.Hidden=="1"&&(q.hidden=!0,re[x]=q));break;case"worksheet":if(i[1]==="/"){if((A=c.pop())[0]!==i[3])throw new Error("Bad state: "+A.join("|"));f.push(v),T.s.r<=T.e.r&&T.s.c<=T.e.c&&(m["!ref"]=Sa(T),n.sheetRows&&n.sheetRows<=T.e.r&&(m["!fullref"]=m["!ref"],T.e.r=n.sheetRows-1,m["!ref"]=Sa(T))),C.length&&(m["!merges"]=C),Q.length>0&&(m["!cols"]=Q),re.length>0&&(m["!rows"]=re),d[v]=m}else T={s:{r:2e6,c:2e6},e:{r:0,c:0}},x=b=0,c.push([i[3],!1]),A=gl(i[0]),v=Ia(A.Name),m=n.dense?[]:{},C=[],Z=[],re=[],M={name:v,Hidden:0},J.Sheets.push(M);break;case"table":if(i[1]==="/"){if((A=c.pop())[0]!==i[3])throw new Error("Bad state: "+A.join("|"))}else{if(i[0].slice(-2)=="/>")break;c.push([i[3],!1]),Q=[],le=!1}break;case"style":i[1]==="/"?wLe(D,k,n):k=gl(i[0]);break;case"numberformat":k.nf=Ia(gl(i[0]).Format||"General"),o0[k.nf]&&(k.nf=o0[k.nf]);for(var ee=0;ee!=392&&ea[ee]!=k.nf;++ee);if(ee==392){for(ee=57;ee!=392;++ee)if(ea[ee]==null){uf(k.nf,ee);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(X=gl(i[0]),X.Hidden&&(X.hidden=!0,delete X.Hidden),X.Width&&(X.wpx=parseInt(X.Width,10)),!le&&X.wpx>10){le=!0,Lo=d9;for(var ae=0;ae<Q.length;++ae)Q[ae]&&Kv(Q[ae])}le&&Kv(X),Q[X.Index-1||Q.length]=X;for(var oe=0;oe<+X.Span;++oe)Q[Q.length]=Ws(X);break;case"namedrange":if(i[1]==="/")break;J.Names||(J.Names=[]);var j=On(i[0]),ce={Name:j.Name,Ref:wv(j.RefersTo.slice(1),{r:0,c:0})};J.Sheets.length>0&&(ce.Sheet=J.Sheets.length-1),J.Names.push(ce);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(i[0].slice(-2)==="/>")break;i[1]==="/"?S+=a.slice(E,i.index):E=i.index+i[0].length;break;case"interior":if(!n.cellStyles)break;k.Interior=gl(i[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(i[0].slice(-2)==="/>")break;i[1]==="/"?oDe(U,te,a.slice(L,i.index)):L=i.index+i[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(i[1]==="/"){if((A=c.pop())[0]!==i[3])throw new Error("Bad state: "+A.join("|"))}else c.push([i[3],!1]);break;case"comment":if(i[1]==="/"){if((A=c.pop())[0]!==i[3])throw new Error("Bad state: "+A.join("|"));xLe(ie),ue.push(ie)}else c.push([i[3],!1]),A=gl(i[0]),ie={a:A.Author};break;case"autofilter":if(i[1]==="/"){if((A=c.pop())[0]!==i[3])throw new Error("Bad state: "+A.join("|"))}else if(i[0].charAt(i[0].length-2)!=="/"){var de=gl(i[0]);m["!autofilter"]={ref:wv(de.Range).replace(/\$/g,"")},c.push([i[3],!0])}break;case"name":break;case"datavalidation":if(i[1]==="/"){if((A=c.pop())[0]!==i[3])throw new Error("Bad state: "+A.join("|"))}else i[0].charAt(i[0].length-2)!=="/"&&c.push([i[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(i[1]==="/"){if((A=c.pop())[0]!==i[3])throw new Error("Bad state: "+A.join("|"))}else i[0].charAt(i[0].length-2)!=="/"&&c.push([i[3],!0]);break;case"null":break;default:if(c.length==0&&i[3]=="document"||c.length==0&&i[3]=="uof")return yN(a,n);var _e=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(i[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:_e=!1}break;case"componentoptions":switch(i[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:_e=!1}break;case"excelworkbook":switch(i[3]){case"date1904":J.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:_e=!1}break;case"workbookoptions":switch(i[3]){case"owcversion":break;case"height":break;case"width":break;default:_e=!1}break;case"worksheetoptions":switch(i[3]){case"visible":if(i[0].slice(-2)!=="/>")if(i[1]==="/")switch(a.slice(L,i.index)){case"SheetHidden":M.Hidden=1;break;case"SheetVeryHidden":M.Hidden=2;break}else L=i.index+i[0].length;break;case"header":m["!margins"]||s0(m["!margins"]={},"xlml"),isNaN(+On(i[0]).Margin)||(m["!margins"].header=+On(i[0]).Margin);break;case"footer":m["!margins"]||s0(m["!margins"]={},"xlml"),isNaN(+On(i[0]).Margin)||(m["!margins"].footer=+On(i[0]).Margin);break;case"pagemargins":var Re=On(i[0]);m["!margins"]||s0(m["!margins"]={},"xlml"),isNaN(+Re.Top)||(m["!margins"].top=+Re.Top),isNaN(+Re.Left)||(m["!margins"].left=+Re.Left),isNaN(+Re.Right)||(m["!margins"].right=+Re.Right),isNaN(+Re.Bottom)||(m["!margins"].bottom=+Re.Bottom);break;case"displayrighttoleft":J.Views||(J.Views=[]),J.Views[0]||(J.Views[0]={}),J.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:_e=!1}break;case"pivottable":case"pivotcache":switch(i[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:_e=!1}break;case"pagebreaks":switch(i[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:_e=!1}break;case"autofilter":switch(i[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:_e=!1}break;case"querytable":switch(i[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:_e=!1}break;case"datavalidation":switch(i[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:_e=!1}break;case"sorting":case"conditionalformatting":switch(i[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:_e=!1}break;case"mapinfo":case"schema":case"data":switch(i[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:_e=!1}break;case"smarttags":break;default:_e=!1;break}if(_e||i[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+i[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(i[0].slice(-2)==="/>")break;i[1]==="/"?yLe(F,te,H,a.slice(L,i.index)):(H=i,L=i.index+i[0].length);break}if(n.WTF)throw"Unrecognized tag: "+i[3]+"|"+c.join("|")}var be={};return!n.bookSheets&&!n.bookProps&&(be.Sheets=d),be.SheetNames=f,be.Workbook=J,be.SSF=Ws(ea),be.Props=U,be.Custprops=F,be}function ME(e,t){switch(e4(t=t||{}),t.type||"base64"){case"base64":return MC(Ti(e),t);case"binary":case"buffer":case"file":return MC(e,t);case"array":return MC(Wf(e),t)}}function CLe(e){var t={},n=e.content;if(n.l=28,t.AnsiUserType=n.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=LPe(n),n.length-n.l<=4)return t;var a=n.read_shift(4);if(a==0||a>40||(n.l-=4,t.Reserved1=n.read_shift(0,"lpstr-ansi"),n.length-n.l<=4)||(a=n.read_shift(4),a!==1907505652)||(t.UnicodeClipboardFormat=MPe(n),a=n.read_shift(4),a==0||a>40))return t;n.l-=4,t.Reserved2=n.read_shift(0,"lpwstr")}var SLe=[60,1084,2066,2165,2175];function ELe(e,t,n,a,r){var s=a,o=[],i=n.slice(n.l,n.l+s);if(r&&r.enc&&r.enc.insitu&&i.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:r.enc.insitu(i)}o.push(i),n.l+=s;for(var c=_c(n,n.l),A=OE[c],d=0;A!=null&&SLe.indexOf(c)>-1;)s=_c(n,n.l+2),d=n.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),i=n.slice(d,n.l+4+s),o.push(i),n.l+=4+s,A=OE[c=_c(n,n.l)];var f=_d(o);Os(f,0);var m=0;f.lens=[];for(var v=0;v<o.length;++v)f.lens.push(m),m+=o[v].length;if(f.length<a)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+a;return t.f(f,f.length,r)}function mu(e,t,n){if(e.t!=="z"&&e.XF){var a=0;try{a=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=ea[a])}catch(s){if(t.WTF)throw s}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||Yf[e.v]:a===0||a=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=V0(e.v):e.w=Cf(e.v):e.w=tl(a,e.v,{date1904:!!n,dateNF:t&&t.dateNF})}catch(s){if(t.WTF)throw s}if(t.cellDates&&a&&e.t=="n"&&yh(ea[a]||String(a))){var r=qA(e.v);r&&(e.t="d",e.v=new Date(r.y,r.m-1,r.d,r.H,r.M,r.S,r.u))}}}function Py(e,t,n){return{v:e,ixfe:t,t:n}}function BLe(e,t){var n={opts:{}},a={},r=t.dense?[]:{},s={},o={},i=null,c=[],A="",d={},f,m="",v,p,g,y,w={},b=[],x,T,D=[],k=[],S={Sheets:[],WBProps:{date1904:!1},Views:[{}]},E={},C=function(it){return it<8?cf[it]:it<64&&k[it-8]||cf[it]},U=function(it,qe,yt){var mt=qe.XF.data;if(!(!mt||!mt.patternType||!yt||!yt.cellStyles)){qe.s={},qe.s.patternType=mt.patternType;var xt;(xt=H0(C(mt.icvFore)))&&(qe.s.fgColor={rgb:xt}),(xt=H0(C(mt.icvBack)))&&(qe.s.bgColor={rgb:xt})}},F=function(it,qe,yt){if(!(q>1)&&!(yt.sheetRows&&it.r>=yt.sheetRows)){if(yt.cellStyles&&qe.XF&&qe.XF.data&&U(it,qe,yt),delete qe.ixfe,delete qe.XF,f=it,m=qn(it),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),it.r<o.s.r&&(o.s.r=it.r),it.c<o.s.c&&(o.s.c=it.c),it.r+1>o.e.r&&(o.e.r=it.r+1),it.c+1>o.e.c&&(o.e.c=it.c+1),yt.cellFormula&&qe.f){for(var mt=0;mt<b.length;++mt)if(!(b[mt][0].s.c>it.c||b[mt][0].s.r>it.r)&&!(b[mt][0].e.c<it.c||b[mt][0].e.r<it.r)){qe.F=Sa(b[mt][0]),(b[mt][0].s.c!=it.c||b[mt][0].s.r!=it.r)&&delete qe.f,qe.f&&(qe.f=""+oo(b[mt][1],o,it,Z,L));break}}yt.dense?(r[it.r]||(r[it.r]=[]),r[it.r][it.c]=qe):r[m]=qe}},L={enc:!1,sbcch:0,snames:[],sharedf:w,arrayf:b,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(L.password=t.password);var H,ue=[],ie=[],Q=[],X=[],le=!1,Z=[];Z.SheetNames=L.snames,Z.sharedf=L.sharedf,Z.arrayf=L.arrayf,Z.names=[],Z.XTI=[];var re=0,q=0,P=0,G=[],J=[],M;L.codepage=1200,Il(1200);for(var te=!1;e.l<e.length-1;){var Y=e.l,W=e.read_shift(2);if(W===0&&re===10)break;var ee=e.l===e.length?0:e.read_shift(2),ae=OE[W];if(ae&&ae.f){if(t.bookSheets&&re===133&&W!==133)break;if(re=W,ae.r===2||ae.r==12){var oe=e.read_shift(2);if(ee-=2,!L.enc&&oe!==W&&((oe&255)<<8|oe>>8)!==W)throw new Error("rt mismatch: "+oe+"!="+W);ae.r==12&&(e.l+=10,ee-=10)}var j={};if(W===10?j=ae.f(e,ee,L):j=ELe(W,ae,e,ee,L),q==0&&[9,521,1033,2057].indexOf(re)===-1)continue;switch(W){case 34:n.opts.Date1904=S.WBProps.date1904=j;break;case 134:n.opts.WriteProtect=!0;break;case 47:if(L.enc||(e.l=0),L.enc=j,!t.password)throw new Error("File is password-protected");if(j.valid==null)throw new Error("Encryption scheme unsupported");if(!j.valid)throw new Error("Password is incorrect");break;case 92:L.lastuser=j;break;case 66:var ce=Number(j);switch(ce){case 21010:ce=1200;break;case 32768:ce=1e4;break;case 32769:ce=1252;break}Il(L.codepage=ce),te=!0;break;case 317:L.rrtabid=j;break;case 25:L.winlocked=j;break;case 439:n.opts.RefreshAll=j;break;case 12:n.opts.CalcCount=j;break;case 16:n.opts.CalcDelta=j;break;case 17:n.opts.CalcIter=j;break;case 13:n.opts.CalcMode=j;break;case 14:n.opts.CalcPrecision=j;break;case 95:n.opts.CalcSaveRecalc=j;break;case 15:L.CalcRefMode=j;break;case 2211:n.opts.FullCalc=j;break;case 129:j.fDialog&&(r["!type"]="dialog"),j.fBelow||((r["!outline"]||(r["!outline"]={})).above=!0),j.fRight||((r["!outline"]||(r["!outline"]={})).left=!0);break;case 224:D.push(j);break;case 430:Z.push([j]),Z[Z.length-1].XTI=[];break;case 35:case 547:Z[Z.length-1].push(j);break;case 24:case 536:M={Name:j.Name,Ref:oo(j.rgce,o,null,Z,L)},j.itab>0&&(M.Sheet=j.itab-1),Z.names.push(M),Z[0]||(Z[0]=[],Z[0].XTI=[]),Z[Z.length-1].push(j),j.Name=="_xlnm._FilterDatabase"&&j.itab>0&&j.rgce&&j.rgce[0]&&j.rgce[0][0]&&j.rgce[0][0][0]=="PtgArea3d"&&(J[j.itab-1]={ref:Sa(j.rgce[0][0][1][2])});break;case 22:L.ExternCount=j;break;case 23:Z.length==0&&(Z[0]=[],Z[0].XTI=[]),Z[Z.length-1].XTI=Z[Z.length-1].XTI.concat(j),Z.XTI=Z.XTI.concat(j);break;case 2196:if(L.biff<8)break;M!=null&&(M.Comment=j[1]);break;case 18:r["!protect"]=j;break;case 19:j!==0&&L.WTF&&console.error("Password verifier: "+j);break;case 133:s[j.pos]=j,L.snames.push(j.name);break;case 10:{if(--q)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,r["!ref"]=Sa(o),t.sheetRows&&t.sheetRows<=o.e.r){var de=o.e.r;o.e.r=t.sheetRows-1,r["!fullref"]=r["!ref"],r["!ref"]=Sa(o),o.e.r=de}o.e.r++,o.e.c++}ue.length>0&&(r["!merges"]=ue),ie.length>0&&(r["!objects"]=ie),Q.length>0&&(r["!cols"]=Q),X.length>0&&(r["!rows"]=X),S.Sheets.push(E)}A===""?d=r:a[A]=r,r=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(L.biff===8&&(L.biff={9:2,521:3,1033:4}[W]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[j.BIFFVer]||8),L.biffguess=j.BIFFVer==0,j.BIFFVer==0&&j.dt==4096&&(L.biff=5,te=!0,Il(L.codepage=28591)),L.biff==8&&j.BIFFVer==0&&j.dt==16&&(L.biff=2),q++)break;if(r=t.dense?[]:{},L.biff<8&&!te&&(te=!0,Il(L.codepage=t.codepage||1252)),L.biff<5||j.BIFFVer==0&&j.dt==4096){A===""&&(A="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var _e={pos:e.l-ee,name:A};s[_e.pos]=_e,L.snames.push(A)}else A=(s[Y]||{name:""}).name;j.dt==32&&(r["!type"]="chart"),j.dt==64&&(r["!type"]="macro"),ue=[],ie=[],L.arrayf=b=[],Q=[],X=[],le=!1,E={Hidden:(s[Y]||{hs:0}).hs,name:A}}break;case 515:case 3:case 2:r["!type"]=="chart"&&(t.dense?(r[j.r]||[])[j.c]:r[qn({c:j.c,r:j.r})])&&++j.c,x={ixfe:j.ixfe,XF:D[j.ixfe]||{},v:j.val,t:"n"},P>0&&(x.z=G[x.ixfe>>8&63]),mu(x,t,n.opts.Date1904),F({c:j.c,r:j.r},x,t);break;case 5:case 517:x={ixfe:j.ixfe,XF:D[j.ixfe],v:j.val,t:j.t},P>0&&(x.z=G[x.ixfe>>8&63]),mu(x,t,n.opts.Date1904),F({c:j.c,r:j.r},x,t);break;case 638:x={ixfe:j.ixfe,XF:D[j.ixfe],v:j.rknum,t:"n"},P>0&&(x.z=G[x.ixfe>>8&63]),mu(x,t,n.opts.Date1904),F({c:j.c,r:j.r},x,t);break;case 189:for(var Re=j.c;Re<=j.C;++Re){var be=j.rkrec[Re-j.c][0];x={ixfe:be,XF:D[be],v:j.rkrec[Re-j.c][1],t:"n"},P>0&&(x.z=G[x.ixfe>>8&63]),mu(x,t,n.opts.Date1904),F({c:Re,r:j.r},x,t)}break;case 6:case 518:case 1030:{if(j.val=="String"){i=j;break}if(x=Py(j.val,j.cell.ixfe,j.tt),x.XF=D[x.ixfe],t.cellFormula){var Ee=j.formula;if(Ee&&Ee[0]&&Ee[0][0]&&Ee[0][0][0]=="PtgExp"){var Ce=Ee[0][0][1][0],Be=Ee[0][0][1][1],Te=qn({r:Ce,c:Be});w[Te]?x.f=""+oo(j.formula,o,j.cell,Z,L):x.F=((t.dense?(r[Ce]||[])[Be]:r[Te])||{}).F}else x.f=""+oo(j.formula,o,j.cell,Z,L)}P>0&&(x.z=G[x.ixfe>>8&63]),mu(x,t,n.opts.Date1904),F(j.cell,x,t),i=j}break;case 7:case 519:if(i)i.val=j,x=Py(j,i.cell.ixfe,"s"),x.XF=D[x.ixfe],t.cellFormula&&(x.f=""+oo(i.formula,o,i.cell,Z,L)),P>0&&(x.z=G[x.ixfe>>8&63]),mu(x,t,n.opts.Date1904),F(i.cell,x,t),i=null;else throw new Error("String record expects Formula");break;case 33:case 545:{b.push(j);var Oe=qn(j[0].s);if(v=t.dense?(r[j[0].s.r]||[])[j[0].s.c]:r[Oe],t.cellFormula&&v){if(!i||!Oe||!v)break;v.f=""+oo(j[1],o,j[0],Z,L),v.F=Sa(j[0])}}break;case 1212:{if(!t.cellFormula)break;if(m){if(!i)break;w[qn(i.cell)]=j[0],v=t.dense?(r[i.cell.r]||[])[i.cell.c]:r[qn(i.cell)],(v||{}).f=""+oo(j[0],o,f,Z,L)}}break;case 253:x=Py(c[j.isst].t,j.ixfe,"s"),c[j.isst].h&&(x.h=c[j.isst].h),x.XF=D[x.ixfe],P>0&&(x.z=G[x.ixfe>>8&63]),mu(x,t,n.opts.Date1904),F({c:j.c,r:j.r},x,t);break;case 513:t.sheetStubs&&(x={ixfe:j.ixfe,XF:D[j.ixfe],t:"z"},P>0&&(x.z=G[x.ixfe>>8&63]),mu(x,t,n.opts.Date1904),F({c:j.c,r:j.r},x,t));break;case 190:if(t.sheetStubs)for(var Me=j.c;Me<=j.C;++Me){var rt=j.ixfe[Me-j.c];x={ixfe:rt,XF:D[rt],t:"z"},P>0&&(x.z=G[x.ixfe>>8&63]),mu(x,t,n.opts.Date1904),F({c:Me,r:j.r},x,t)}break;case 214:case 516:case 4:x=Py(j.val,j.ixfe,"s"),x.XF=D[x.ixfe],P>0&&(x.z=G[x.ixfe>>8&63]),mu(x,t,n.opts.Date1904),F({c:j.c,r:j.r},x,t);break;case 0:case 512:q===1&&(o=j);break;case 252:c=j;break;case 1054:if(L.biff==4){G[P++]=j[1];for(var ut=0;ut<P+163&&ea[ut]!=j[1];++ut);ut>=163&&uf(j[1],P+163)}else uf(j[1],j[0]);break;case 30:{G[P++]=j;for(var Ie=0;Ie<P+163&&ea[Ie]!=j;++Ie);Ie>=163&&uf(j,P+163)}break;case 229:ue=ue.concat(j);break;case 93:ie[j.cmo[0]]=L.lastobj=j;break;case 438:L.lastobj.TxO=j;break;case 127:L.lastobj.ImData=j;break;case 440:for(y=j[0].s.r;y<=j[0].e.r;++y)for(g=j[0].s.c;g<=j[0].e.c;++g)v=t.dense?(r[y]||[])[g]:r[qn({c:g,r:y})],v&&(v.l=j[1]);break;case 2048:for(y=j[0].s.r;y<=j[0].e.r;++y)for(g=j[0].s.c;g<=j[0].e.c;++g)v=t.dense?(r[y]||[])[g]:r[qn({c:g,r:y})],v&&v.l&&(v.l.Tooltip=j[1]);break;case 28:{if(L.biff<=5&&L.biff>=2)break;v=t.dense?(r[j[0].r]||[])[j[0].c]:r[qn(j[0])];var Ue=ie[j[2]];v||(t.dense?(r[j[0].r]||(r[j[0].r]=[]),v=r[j[0].r][j[0].c]={t:"z"}):v=r[qn(j[0])]={t:"z"},o.e.r=Math.max(o.e.r,j[0].r),o.s.r=Math.min(o.s.r,j[0].r),o.e.c=Math.max(o.e.c,j[0].c),o.s.c=Math.min(o.s.c,j[0].c)),v.c||(v.c=[]),p={a:j[1],t:Ue.TxO.t},v.c.push(p)}break;case 2173:qUe(D[j.ixfe],j.ext);break;case 125:{if(!L.cellStyles)break;for(;j.e>=j.s;)Q[j.e--]={width:j.w/256,level:j.level||0,hidden:!!(j.flags&1)},le||(le=!0,qT(j.w/256)),Kv(Q[j.e+1])}break;case 520:{var dt={};j.level!=null&&(X[j.r]=dt,dt.level=j.level),j.hidden&&(X[j.r]=dt,dt.hidden=!0),j.hpt&&(X[j.r]=dt,dt.hpt=j.hpt,dt.hpx=$0(j.hpt))}break;case 38:case 39:case 40:case 41:r["!margins"]||s0(r["!margins"]={}),r["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[W]]=j;break;case 161:r["!margins"]||s0(r["!margins"]={}),r["!margins"].header=j.header,r["!margins"].footer=j.footer;break;case 574:j.RTL&&(S.Views[0].RTL=!0);break;case 146:k=j;break;case 2198:H=j;break;case 140:T=j;break;case 442:A?E.CodeName=j||E.name:S.WBProps.CodeName=j||"ThisWorkbook";break}}else ae||console.error("Missing Info for XLS Record 0x"+W.toString(16)),e.l+=ee}return n.SheetNames=Du(s).sort(function(Ft,it){return Number(Ft)-Number(it)}).map(function(Ft){return s[Ft].name}),t.bookSheets||(n.Sheets=a),!n.SheetNames.length&&d["!ref"]?(n.SheetNames.push("Sheet1"),n.Sheets&&(n.Sheets.Sheet1=d)):n.Preamble=d,n.Sheets&&J.forEach(function(Ft,it){n.Sheets[n.SheetNames[it]]["!autofilter"]=Ft}),n.Strings=c,n.SSF=Ws(ea),L.enc&&(n.Encryption=L.enc),H&&(n.Themes=H),n.Metadata={},T!==void 0&&(n.Metadata.Country=T),Z.names.length>0&&(S.Names=Z.names),n.Workbook=S,n}var mN={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function kLe(e,t,n){var a=ba.find(e,"/!DocumentSummaryInformation");if(a&&a.size>0)try{var r=XR(a,zPe,mN.DSI);for(var s in r)t[s]=r[s]}catch(A){if(n.WTF)throw A}var o=ba.find(e,"/!SummaryInformation");if(o&&o.size>0)try{var i=XR(o,KPe,mN.SI);for(var c in i)t[c]==null&&(t[c]=i[c])}catch(A){if(n.WTF)throw A}t.HeadingPairs&&t.TitlesOfParts&&(j$(t.HeadingPairs,t.TitlesOfParts,t,n),delete t.HeadingPairs,delete t.TitlesOfParts)}function F9(e,t){t||(t={}),e4(t),o$(),t.codepage&&PT(t.codepage);var n,a;if(e.FullPaths){if(ba.find(e,"/encryption"))throw new Error("File is password-protected");n=ba.find(e,"!CompObj"),a=ba.find(e,"/Workbook")||ba.find(e,"/Book")}else{switch(t.type){case"base64":e=Sl(Ti(e));break;case"binary":e=Sl(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Os(e,0),a={content:e}}var r,s;if(n&&CLe(n),t.bookProps&&!t.bookSheets)r={};else{var o=pa?"buffer":"array";if(a&&a.content)r=BLe(a.content,t);else if((s=ba.find(e,"PerfectOffice_MAIN"))&&s.content)r=a0.to_workbook(s.content,(t.type=o,t));else if((s=ba.find(e,"NativeContent_MAIN"))&&s.content)r=a0.to_workbook(s.content,(t.type=o,t));else throw(s=ba.find(e,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&ba.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(r.vbaraw=fRe(e))}var i={};return e.FullPaths&&kLe(e,i,t),r.Props=r.Custprops=i,t.bookFiles&&(r.cfb=e),r}var x2={0:{f:uVe},1:{f:fVe},2:{f:bVe},3:{f:pVe},4:{f:vVe},5:{f:wVe},6:{f:SVe},7:{f:yVe},8:{f:IVe},9:{f:TVe},10:{f:BVe},11:{f:kVe},12:{f:mVe},13:{f:xVe},14:{f:gVe},15:{f:hVe},16:{f:E9},17:{f:EVe},18:{f:_Ve},19:{f:QT},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:aLe},40:{},42:{},43:{f:BUe},44:{f:EUe},45:{f:kUe},46:{f:IUe},47:{f:TUe},48:{},49:{f:FPe},50:{},51:{f:XUe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:o9},62:{f:CVe},63:{f:nRe},64:{f:MVe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:wo,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:LVe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:AVe},148:{f:cVe,p:16},151:{f:DVe},152:{},153:{f:tLe},154:{},155:{},156:{f:eLe},157:{},158:{},159:{T:1,f:K3e},160:{T:-1},161:{T:1,f:qf},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:FVe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:YUe},336:{T:-1},337:{f:JUe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:RE},357:{},358:{},359:{},360:{T:1},361:{},362:{f:s9},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:UVe},427:{f:RVe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:VVe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:dVe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:PVe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:RE},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:cRe},633:{T:1},634:{T:-1},635:{T:1,f:uRe},636:{T:-1},637:{f:DPe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:zVe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:OVe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},OE={6:{f:VC},10:{f:od},12:{f:rs},13:{f:rs},14:{f:Kr},15:{f:Kr},16:{f:fo},17:{f:Kr},18:{f:Kr},19:{f:rs},20:{f:tN},21:{f:tN},23:{f:s9},24:{f:aN},25:{f:Kr},26:{},27:{},28:{f:i3e},29:{},34:{f:Kr},35:{f:nN},38:{f:fo},39:{f:fo},40:{f:fo},41:{f:fo},42:{f:Kr},43:{f:Kr},47:{f:dUe},49:{f:$De},51:{f:rs},60:{},61:{f:MDe},64:{f:Kr},65:{f:HDe},66:{f:rs},77:{},80:{},81:{},82:{},85:{f:rs},89:{},90:{},91:{},92:{f:FDe},93:{f:u3e},94:{},95:{f:Kr},96:{},97:{},99:{f:Kr},125:{f:o9},128:{f:JDe},129:{f:PDe},130:{f:rs},131:{f:Kr},132:{f:Kr},133:{f:DDe},134:{},140:{f:v3e},141:{f:rs},144:{},146:{f:p3e},151:{},152:{},153:{},154:{},155:{},156:{f:rs},157:{},158:{},160:{f:b3e},161:{f:y3e},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:jDe},190:{f:qDe},193:{f:od},197:{},198:{},199:{},200:{},201:{},202:{f:Kr},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:rs},220:{},221:{f:Kr},222:{},224:{f:XDe},225:{f:IDe},226:{f:od},227:{},229:{f:l3e},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:UDe},253:{f:QDe},255:{f:RDe},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:Z$},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Kr},353:{f:od},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:e3e},431:{f:Kr},432:{},433:{},434:{},437:{},438:{f:A3e},439:{f:Kr},440:{f:f3e},441:{},442:{f:Tg},443:{},444:{f:rs},445:{},446:{},448:{f:od},449:{f:LDe,r:2},450:{f:od},512:{f:ZR},513:{f:w3e},515:{f:ZDe},516:{f:GDe},517:{f:eN},519:{f:x3e},520:{f:NDe},523:{},545:{f:rN},549:{f:JR},566:{},574:{f:ODe},638:{f:WDe},659:{},1048:{},1054:{f:zDe},1084:{},1212:{f:r3e},2048:{f:m3e},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Ty},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:od},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:g3e,r:12},2173:{f:jUe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Kr,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:a3e,r:12},2197:{},2198:{f:$Ue,r:12},2199:{},2200:{},2201:{},2202:{f:s3e,r:12},2203:{f:od},2204:{},2205:{},2206:{},2207:{},2211:{f:VDe},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:rs},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:_3e},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:h3e},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:ZR},1:{},2:{f:B3e},3:{f:E3e},4:{f:S3e},5:{f:eN},7:{f:k3e},8:{},9:{f:Ty},11:{},22:{f:rs},30:{f:KDe},31:{},32:{},33:{f:rN},36:{},37:{f:JR},50:{f:T3e},62:{},52:{},67:{},68:{f:rs},69:{},86:{},126:{},127:{f:C3e},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:I3e},223:{},234:{},354:{},421:{},518:{f:VC},521:{f:Ty},536:{f:aN},547:{f:nN},561:{},579:{},1030:{f:VC},1033:{f:Ty},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function yl(e,t,n,a){var r=t;if(!isNaN(r)){var s=(n||[]).length||0,o=e.next(4);o.write_shift(2,r),o.write_shift(2,s),s>0&&O$(n)&&e.push(n)}}function vN(e,t){var n=t||{},a=n.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var r=e.match(/<table/i);if(!r)throw new Error("Invalid HTML: could not find <table>");var s=e.match(/<\/table/i),o=r.index,i=s&&s.index||e.length,c=ZFe(e.slice(o,i),/(:?<tr[^>]*>)/i,"<tr>"),A=-1,d=0,f=0,m=0,v={s:{r:1e7,c:1e7},e:{r:0,c:0}},p=[];for(o=0;o<c.length;++o){var g=c[o].trim(),y=g.slice(0,3).toLowerCase();if(y=="<tr"){if(++A,n.sheetRows&&n.sheetRows<=A){--A;break}d=0;continue}if(!(y!="<td"&&y!="<th")){var w=g.split(/<\/t[dh]>/i);for(i=0;i<w.length;++i){var b=w[i].trim();if(b.match(/<t[dh]/i)){for(var x=b,T=0;x.charAt(0)=="<"&&(T=x.indexOf(">"))>-1;)x=x.slice(T+1);for(var D=0;D<p.length;++D){var k=p[D];k.s.c==d&&k.s.r<A&&A<=k.e.r&&(d=k.e.c+1,D=-1)}var S=On(b.slice(0,b.indexOf(">")));m=S.colspan?+S.colspan:1,((f=+S.rowspan)>1||m>1)&&p.push({s:{r:A,c:d},e:{r:A+(f||1)-1,c:d+m-1}});var E=S.t||S["data-t"]||"";if(!x.length){d+=m;continue}if(x=B$(x),v.s.r>A&&(v.s.r=A),v.e.r<A&&(v.e.r=A),v.s.c>d&&(v.s.c=d),v.e.c<d&&(v.e.c=d),!x.length){d+=m;continue}var C={t:"s",v:x};n.raw||!x.trim().length||E=="s"||(x==="TRUE"?C={t:"b",v:!0}:x==="FALSE"?C={t:"b",v:!1}:isNaN(Nl(x))?isNaN(zv(x).getDate())||(C={t:"d",v:Us(x)},n.cellDates||(C={t:"n",v:Go(C.v)}),C.z=n.dateNF||ea[14]):C={t:"n",v:Nl(x)}),n.dense?(a[A]||(a[A]=[]),a[A][d]=C):a[qn({r:A,c:d})]=C,d+=m}}}}return a["!ref"]=Sa(v),p.length&&(a["!merges"]=p),a}function TLe(e,t,n,a){for(var r=e["!merges"]||[],s=[],o=t.s.c;o<=t.e.c;++o){for(var i=0,c=0,A=0;A<r.length;++A)if(!(r[A].s.r>n||r[A].s.c>o)&&!(r[A].e.r<n||r[A].e.c<o)){if(r[A].s.r<n||r[A].s.c<o){i=-1;break}i=r[A].e.r-r[A].s.r+1,c=r[A].e.c-r[A].s.c+1;break}if(!(i<0)){var d=qn({r:n,c:o}),f=a.dense?(e[n]||[])[o]:e[d],m=f&&f.v!=null&&(f.h||LT(f.w||(Rc(f),f.w)||""))||"",v={};i>1&&(v.rowspan=i),c>1&&(v.colspan=c),a.editable?m='<span contenteditable="true">'+m+"</span>":f&&(v["data-t"]=f&&f.t||"z",f.v!=null&&(v["data-v"]=f.v),f.z!=null&&(v["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(m='<a href="'+f.l.Target+'">'+m+"</a>")),v.id=(a.id||"sjs")+"-"+d,s.push(vPe("td",m,v))}}var p="<tr>";return p+s.join("")+"</tr>"}var ILe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',FLe="</body></html>";function PLe(e,t){var n=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!n||n.length==0)throw new Error("Invalid HTML: could not find <table>");if(n.length==1)return aA(vN(n[0],t),t);var a=n4();return n.forEach(function(r,s){a4(a,vN(r,t),"Sheet"+(s+1))}),a}function DLe(e,t,n){var a=[];return a.join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}function ULe(e,t){var n=t||{},a=n.header!=null?n.header:ILe,r=n.footer!=null?n.footer:FLe,s=[a],o=_h(e["!ref"]);n.dense=Array.isArray(e),s.push(DLe(e,o,n));for(var i=o.s.r;i<=o.e.r;++i)s.push(TLe(e,o,i,n));return s.push("</table>"+r),s.join("")}function P9(e,t,n){var a=n||{},r=0,s=0;if(a.origin!=null)if(typeof a.origin=="number")r=a.origin;else{var o=typeof a.origin=="string"?Mo(a.origin):a.origin;r=o.r,s=o.c}var i=t.getElementsByTagName("tr"),c=Math.min(a.sheetRows||1e7,i.length),A={s:{r:0,c:0},e:{r,c:s}};if(e["!ref"]){var d=_h(e["!ref"]);A.s.r=Math.min(A.s.r,d.s.r),A.s.c=Math.min(A.s.c,d.s.c),A.e.r=Math.max(A.e.r,d.e.r),A.e.c=Math.max(A.e.c,d.e.c),r==-1&&(A.e.r=r=d.e.r+1)}var f=[],m=0,v=e["!rows"]||(e["!rows"]=[]),p=0,g=0,y=0,w=0,b=0,x=0;for(e["!cols"]||(e["!cols"]=[]);p<i.length&&g<c;++p){var T=i[p];if(hN(T)){if(a.display)continue;v[g]={hidden:!0}}var D=T.children;for(y=w=0;y<D.length;++y){var k=D[y];if(!(a.display&&hN(k))){var S=k.hasAttribute("data-v")?k.getAttribute("data-v"):k.hasAttribute("v")?k.getAttribute("v"):B$(k.innerHTML),E=k.getAttribute("data-z")||k.getAttribute("z");for(m=0;m<f.length;++m){var C=f[m];C.s.c==w+s&&C.s.r<g+r&&g+r<=C.e.r&&(w=C.e.c+1-s,m=-1)}x=+k.getAttribute("colspan")||1,((b=+k.getAttribute("rowspan")||1)>1||x>1)&&f.push({s:{r:g+r,c:w+s},e:{r:g+r+(b||1)-1,c:w+s+(x||1)-1}});var U={t:"s",v:S},F=k.getAttribute("data-t")||k.getAttribute("t")||"";S!=null&&(S.length==0?U.t=F||"z":a.raw||S.trim().length==0||F=="s"||(S==="TRUE"?U={t:"b",v:!0}:S==="FALSE"?U={t:"b",v:!1}:isNaN(Nl(S))?isNaN(zv(S).getDate())||(U={t:"d",v:Us(S)},a.cellDates||(U={t:"n",v:Go(U.v)}),U.z=a.dateNF||ea[14]):U={t:"n",v:Nl(S)})),U.z===void 0&&E!=null&&(U.z=E);var L="",H=k.getElementsByTagName("A");if(H&&H.length)for(var ue=0;ue<H.length&&!(H[ue].hasAttribute("href")&&(L=H[ue].getAttribute("href"),L.charAt(0)!="#"));++ue);L&&L.charAt(0)!="#"&&(U.l={Target:L}),a.dense?(e[g+r]||(e[g+r]=[]),e[g+r][w+s]=U):e[qn({c:w+s,r:g+r})]=U,A.e.c<w+s&&(A.e.c=w+s),w+=x}}++g}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),A.e.r=Math.max(A.e.r,g-1+r),e["!ref"]=Sa(A),g>=c&&(e["!fullref"]=Sa((A.e.r=i.length-p+g-1+r,A))),e}function D9(e,t){var n=t||{},a=n.dense?[]:{};return P9(a,e,t)}function RLe(e,t){return aA(D9(e,t),t)}function hN(e){var t="",n=NLe(e);return n&&(t=n(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function NLe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function VLe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(a,r){return Array(parseInt(r,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),n=Ia(t.replace(/<[^>]*>/g,""));return[n]}var pN={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function U9(e,t){var n=t||{},a=MT(e),r=[],s,o,i={name:""},c="",A=0,d,f,m={},v=[],p=n.dense?[]:{},g,y,w={value:""},b="",x=0,T=[],D=-1,k=-1,S={s:{r:1e6,c:1e7},e:{r:0,c:0}},E=0,C={},U=[],F={},L=0,H=0,ue=[],ie=1,Q=1,X=[],le={Names:[]},Z={},re=["",""],q=[],P={},G="",J=0,M=!1,te=!1,Y=0;for(M0.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");g=M0.exec(a);)switch(g[3]=g[3].replace(/_.*$/,"")){case"table":case"":g[1]==="/"?(S.e.c>=S.s.c&&S.e.r>=S.s.r?p["!ref"]=Sa(S):p["!ref"]="A1:A1",n.sheetRows>0&&n.sheetRows<=S.e.r&&(p["!fullref"]=p["!ref"],S.e.r=n.sheetRows-1,p["!ref"]=Sa(S)),U.length&&(p["!merges"]=U),ue.length&&(p["!rows"]=ue),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),v.push(d.name),m[d.name]=p,te=!1):g[0].charAt(g[0].length-2)!=="/"&&(d=On(g[0],!1),D=k=-1,S.s.r=S.s.c=1e7,S.e.r=S.e.c=0,p=n.dense?[]:{},U=[],ue=[],te=!0);break;case"table-row-group":g[1]==="/"?--E:++E;break;case"table-row":case"":if(g[1]==="/"){D+=ie,ie=1;break}if(f=On(g[0],!1),f.?D=f.-1:D==-1&&(D=0),ie=+f["number-rows-repeated"]||1,ie<10)for(Y=0;Y<ie;++Y)E>0&&(ue[D+Y]={level:E});k=-1;break;case"covered-table-cell":g[1]!=="/"&&++k,n.sheetStubs&&(n.dense?(p[D]||(p[D]=[]),p[D][k]={t:"z"}):p[qn({r:D,c:k})]={t:"z"}),b="",T=[];break;case"table-cell":case"":if(g[0].charAt(g[0].length-2)==="/")++k,w=On(g[0],!1),Q=parseInt(w["number-columns-repeated"]||"1",10),y={t:"z",v:null},w.formula&&n.cellFormula!=!1&&(y.f=dN(Ia(w.formula))),(w.||w["value-type"])=="string"&&(y.t="s",y.v=Ia(w["string-value"]||""),n.dense?(p[D]||(p[D]=[]),p[D][k]=y):p[qn({r:D,c:k})]=y),k+=Q-1;else if(g[1]!=="/"){++k,b="",x=0,T=[],Q=1;var W=ie?D+ie-1:D;if(k>S.e.c&&(S.e.c=k),k<S.s.c&&(S.s.c=k),D<S.s.r&&(S.s.r=D),W>S.e.r&&(S.e.r=W),w=On(g[0],!1),q=[],P={},y={t:w.||w["value-type"],v:null},n.cellFormula)if(w.formula&&(w.formula=Ia(w.formula)),w["number-matrix-columns-spanned"]&&w["number-matrix-rows-spanned"]&&(L=parseInt(w["number-matrix-rows-spanned"],10)||0,H=parseInt(w["number-matrix-columns-spanned"],10)||0,F={s:{r:D,c:k},e:{r:D+L-1,c:k+H-1}},y.F=Sa(F),X.push([F,y.F])),w.formula)y.f=dN(w.formula);else for(Y=0;Y<X.length;++Y)D>=X[Y][0].s.r&&D<=X[Y][0].e.r&&k>=X[Y][0].s.c&&k<=X[Y][0].e.c&&(y.F=X[Y][1]);switch((w["number-columns-spanned"]||w["number-rows-spanned"])&&(L=parseInt(w["number-rows-spanned"],10)||0,H=parseInt(w["number-columns-spanned"],10)||0,F={s:{r:D,c:k},e:{r:D+L-1,c:k+H-1}},U.push(F)),w["number-columns-repeated"]&&(Q=parseInt(w["number-columns-repeated"],10)),y.t){case"boolean":y.t="b",y.v=Sr(w["boolean-value"]);break;case"float":y.t="n",y.v=parseFloat(w.value);break;case"percentage":y.t="n",y.v=parseFloat(w.value);break;case"currency":y.t="n",y.v=parseFloat(w.value);break;case"date":y.t="d",y.v=Us(w["date-value"]),n.cellDates||(y.t="n",y.v=Go(y.v)),y.z="m/d/yy";break;case"time":y.t="n",y.v=YFe(w["time-value"])/86400,n.cellDates&&(y.t="d",y.v=Hw(y.v)),y.z="HH:MM:SS";break;case"number":y.t="n",y.v=parseFloat(w.);break;default:if(y.t==="string"||y.t==="text"||!y.t)y.t="s",w["string-value"]!=null&&(b=Ia(w["string-value"]),T=[]);else throw new Error("Unsupported value type "+y.t)}}else{if(M=!1,y.t==="s"&&(y.v=b||"",T.length&&(y.R=T),M=x==0),Z.Target&&(y.l=Z),q.length>0&&(y.c=q,q=[]),b&&n.cellText!==!1&&(y.w=b),M&&(y.t="z",delete y.v),(!M||n.sheetStubs)&&!(n.sheetRows&&n.sheetRows<=D))for(var ee=0;ee<ie;++ee){if(Q=parseInt(w["number-columns-repeated"]||"1",10),n.dense)for(p[D+ee]||(p[D+ee]=[]),p[D+ee][k]=ee==0?y:Ws(y);--Q>0;)p[D+ee][k+Q]=Ws(y);else for(p[qn({r:D+ee,c:k})]=y;--Q>0;)p[qn({r:D+ee,c:k+Q})]=Ws(y);S.e.c<=k&&(S.e.c=k)}Q=parseInt(w["number-columns-repeated"]||"1",10),k+=Q-1,Q=0,y={},b="",T=[]}Z={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(g[1]==="/"){if((s=r.pop())[0]!==g[3])throw"Bad state: "+s}else g[0].charAt(g[0].length-2)!=="/"&&r.push([g[3],!0]);break;case"annotation":if(g[1]==="/"){if((s=r.pop())[0]!==g[3])throw"Bad state: "+s;P.t=b,T.length&&(P.R=T),P.a=G,q.push(P)}else g[0].charAt(g[0].length-2)!=="/"&&r.push([g[3],!1]);G="",J=0,b="",x=0,T=[];break;case"creator":g[1]==="/"?G=a.slice(J,g.index):J=g.index+g[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(g[1]==="/"){if((s=r.pop())[0]!==g[3])throw"Bad state: "+s}else g[0].charAt(g[0].length-2)!=="/"&&r.push([g[3],!1]);b="",x=0,T=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(g[1]==="/"){if(C[i.name]=c,(s=r.pop())[0]!==g[3])throw"Bad state: "+s}else g[0].charAt(g[0].length-2)!=="/"&&(c="",i=On(g[0],!1),r.push([g[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(r[r.length-1][0]){case"time-style":case"date-style":o=On(g[0],!1),c+=pN[g[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(r[r.length-1][0]){case"time-style":case"date-style":o=On(g[0],!1),c+=pN[g[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(g[0].slice(-2)==="/>")break;if(g[1]==="/")switch(r[r.length-1][0]){case"number-style":case"date-style":case"time-style":c+=a.slice(A,g.index);break}else A=g.index+g[0].length;break;case"named-range":o=On(g[0],!1),re=LC(o["cell-range-address"]);var ae={Name:o.name,Ref:re[0]+"!"+re[1]};te&&(ae.Sheet=v.length),le.Names.push(ae);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(r[r.length-1][0])>-1)break;if(g[1]==="/"&&(!w||!w["string-value"])){var oe=VLe(a.slice(x,g.index));b=(b.length>0?b+`
`:"")+oe[0]}else On(g[0],!1),x=g.index+g[0].length;break;case"s":break;case"database-range":if(g[1]==="/")break;try{re=LC(On(g[0])["target-range-address"]),m[re[0]]["!autofilter"]={ref:re[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(g[1]!=="/"){if(Z=On(g[0],!1),!Z.href)break;Z.Target=Ia(Z.href),delete Z.href,Z.Target.charAt(0)=="#"&&Z.Target.indexOf(".")>-1?(re=LC(Z.Target.slice(1)),Z.Target="#"+re[0]+"!"+re[1]):Z.Target.match(/^\.\.[\\\/]/)&&(Z.Target=Z.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(g[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(n.WTF)throw new Error(g)}}var j={Sheets:m,SheetNames:v,Workbook:le};return n.bookSheets&&delete j.Sheets,j}function gN(e,t){t=t||{},Ki(e,"META-INF/manifest.xml")&&ZPe(as(e,"META-INF/manifest.xml"),t);var n=wi(e,"content.xml");if(!n)throw new Error("Missing content.xml in ODS / UOF file");var a=U9(mr(n),t);return Ki(e,"meta.xml")&&(a.Props=W$(as(e,"meta.xml"))),a}function yN(e,t){return U9(e,t)}function JT(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function HE(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):mr(Wf(e))}function $E(e){var t=e.reduce(function(r,s){return r+s.length},0),n=new Uint8Array(t),a=0;return e.forEach(function(r){n.set(r,a),a+=r.length}),n}function _N(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function LLe(e,t){for(var n=(e[t+15]&127)<<7|e[t+14]>>1,a=e[t+14]&1,r=t+13;r>=t;--r)a=a*256+e[r];return(e[t+15]&128?-a:a)*Math.pow(10,n-6176)}function Q0(e,t){var n=t?t[0]:0,a=e[n]&127;e:if(e[n++]>=128&&(a|=(e[n]&127)<<7,e[n++]<128||(a|=(e[n]&127)<<14,e[n++]<128)||(a|=(e[n]&127)<<21,e[n++]<128)||(a+=(e[n]&127)*Math.pow(2,28),++n,e[n++]<128)||(a+=(e[n]&127)*Math.pow(2,35),++n,e[n++]<128)||(a+=(e[n]&127)*Math.pow(2,42),++n,e[n++]<128)))break e;return t&&(t[0]=n),a}function ws(e){var t=0,n=e[t]&127;e:if(e[t++]>=128){if(n|=(e[t]&127)<<7,e[t++]<128||(n|=(e[t]&127)<<14,e[t++]<128)||(n|=(e[t]&127)<<21,e[t++]<128))break e;n|=(e[t]&127)<<28}return n}function vo(e){for(var t=[],n=[0];n[0]<e.length;){var a=n[0],r=Q0(e,n),s=r&7;r=Math.floor(r/8);var o=0,i;if(r==0)break;switch(s){case 0:{for(var c=n[0];e[n[0]++]>=128;);i=e.slice(c,n[0])}break;case 5:o=4,i=e.slice(n[0],n[0]+o),n[0]+=o;break;case 1:o=8,i=e.slice(n[0],n[0]+o),n[0]+=o;break;case 2:o=Q0(e,n),i=e.slice(n[0],n[0]+o),n[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(r," at offset ").concat(a))}var A={data:i,type:s};t[r]==null?t[r]=[A]:t[r].push(A)}return t}function ZT(e,t){return e?.map(function(n){return t(n.data)})||[]}function MLe(e){for(var t,n=[],a=[0];a[0]<e.length;){var r=Q0(e,a),s=vo(e.slice(a[0],a[0]+r));a[0]+=r;var o={id:ws(s[1][0].data),messages:[]};s[2].forEach(function(i){var c=vo(i.data),A=ws(c[3][0].data);o.messages.push({meta:c,data:e.slice(a[0],a[0]+A)}),a[0]+=A}),(t=s[3])!=null&&t[0]&&(o.merge=ws(s[3][0].data)>>>0>0),n.push(o)}return n}function OLe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var n=[0],a=Q0(t,n),r=[];n[0]<t.length;){var s=t[n[0]]&3;if(s==0){var o=t[n[0]++]>>2;if(o<60)++o;else{var i=o-59;o=t[n[0]],i>1&&(o|=t[n[0]+1]<<8),i>2&&(o|=t[n[0]+2]<<16),i>3&&(o|=t[n[0]+3]<<24),o>>>=0,o++,n[0]+=i}r.push(t.slice(n[0],n[0]+o)),n[0]+=o;continue}else{var c=0,A=0;if(s==1?(A=(t[n[0]]>>2&7)+4,c=(t[n[0]++]&224)<<3,c|=t[n[0]++]):(A=(t[n[0]++]>>2)+1,s==2?(c=t[n[0]]|t[n[0]+1]<<8,n[0]+=2):(c=(t[n[0]]|t[n[0]+1]<<8|t[n[0]+2]<<16|t[n[0]+3]<<24)>>>0,n[0]+=4)),r=[$E(r)],c==0)throw new Error("Invalid offset 0");if(c>r[0].length)throw new Error("Invalid offset beyond length");if(A>=c)for(r.push(r[0].slice(-c)),A-=c;A>=r[r.length-1].length;)r.push(r[r.length-1]),A-=r[r.length-1].length;r.push(r[0].slice(-c,-c+A))}}var d=$E(r);if(d.length!=a)throw new Error("Unexpected length: ".concat(d.length," != ").concat(a));return d}function HLe(e){for(var t=[],n=0;n<e.length;){var a=e[n++],r=e[n]|e[n+1]<<8|e[n+2]<<16;n+=3,t.push(OLe(a,e.slice(n,n+r))),n+=r}if(n!==e.length)throw new Error("data is not a valid framed stream!");return $E(t)}function $Le(e,t,n,a){var r=JT(e),s=r.getUint32(4,!0),o=(a>1?12:8)+_N(s&(a>1?3470:398))*4,i=-1,c=-1,A=NaN,d=new Date(2001,0,1);s&512&&(i=r.getUint32(o,!0),o+=4),o+=_N(s&(a>1?12288:4096))*4,s&16&&(c=r.getUint32(o,!0),o+=4),s&32&&(A=r.getFloat64(o,!0),o+=8),s&64&&(d.setTime(d.getTime()+r.getFloat64(o,!0)*1e3),o+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:A};break;case 3:f={t:"s",v:t[c]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:A>0};break;case 7:f={t:"n",v:A/86400};break;case 8:f={t:"e",v:0};break;case 9:if(i>-1)f={t:"s",v:n[i]};else if(c>-1)f={t:"s",v:t[c]};else if(!isNaN(A))f={t:"n",v:A};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function QLe(e,t,n){var a=JT(e),r=a.getUint32(8,!0),s=12,o=-1,i=-1,c=NaN,A=NaN,d=new Date(2001,0,1);r&1&&(c=LLe(e,s),s+=16),r&2&&(A=a.getFloat64(s,!0),s+=8),r&4&&(d.setTime(d.getTime()+a.getFloat64(s,!0)*1e3),s+=8),r&8&&(i=a.getUint32(s,!0),s+=4),r&16&&(o=a.getUint32(s,!0),s+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:t[i]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:A>0};break;case 7:f={t:"n",v:A/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:n[o]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(r&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(r&31," : ").concat(e.slice(0,4)))}return f}function GLe(e,t,n){switch(e[0]){case 0:case 1:case 2:case 3:return $Le(e,t,n,e[0]);case 5:return QLe(e,t,n);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function Dd(e){var t=vo(e);return Q0(t[1][0].data)}function wN(e,t){var n=vo(t.data),a=ws(n[1][0].data),r=n[3],s=[];return(r||[]).forEach(function(o){var i=vo(o.data),c=ws(i[1][0].data)>>>0;switch(a){case 1:s[c]=HE(i[3][0].data);break;case 8:{var A=e[Dd(i[9][0].data)][0],d=vo(A.data),f=e[Dd(d[1][0].data)][0],m=ws(f.meta[1][0].data);if(m!=2001)throw new Error("2000 unexpected reference to ".concat(m));var v=vo(f.data);s[c]=v[3].map(function(p){return HE(p.data)}).join("")}break}}),s}function zLe(e,t){var n,a,r,s,o,i,c,A,d,f,m,v,p,g,y=vo(e),w=ws(y[1][0].data)>>>0,b=ws(y[2][0].data)>>>0,x=((a=(n=y[8])==null?void 0:n[0])==null?void 0:a.data)&&ws(y[8][0].data)>0||!1,T,D;if((s=(r=y[7])==null?void 0:r[0])!=null&&s.data&&t!=0)T=(i=(o=y[7])==null?void 0:o[0])==null?void 0:i.data,D=(A=(c=y[6])==null?void 0:c[0])==null?void 0:A.data;else if((f=(d=y[4])==null?void 0:d[0])!=null&&f.data&&t!=1)T=(v=(m=y[4])==null?void 0:m[0])==null?void 0:v.data,D=(g=(p=y[3])==null?void 0:p[0])==null?void 0:g.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var k=x?4:1,S=JT(T),E=[],C=0;C<T.length/2;++C){var U=S.getUint16(C*2,!0);U<65535&&E.push([C,U])}if(E.length!=b)throw"Expected ".concat(b," cells, found ").concat(E.length);var F=[];for(C=0;C<E.length-1;++C)F[E[C][0]]=D.subarray(E[C][1]*k,E[C+1][1]*k);return E.length>=1&&(F[E[E.length-1][0]]=D.subarray(E[E.length-1][1]*k)),{R:w,cells:F}}function KLe(e,t){var n,a=vo(t.data),r=(n=a?.[7])!=null&&n[0]?ws(a[7][0].data)>>>0>0?1:0:-1,s=ZT(a[5],function(o){return zLe(o,r)});return{nrows:ws(a[4][0].data)>>>0,data:s.reduce(function(o,i){return o[i.R]||(o[i.R]=[]),i.cells.forEach(function(c,A){if(o[i.R][A])throw new Error("Duplicate cell r=".concat(i.R," c=").concat(A));o[i.R][A]=c}),o},[])}}function WLe(e,t,n){var a,r=vo(t.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(ws(r[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(r[6][0].data));if(s.e.c=(ws(r[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(r[7][0].data));n["!ref"]=Sa(s);var o=vo(r[4][0].data),i=wN(e,e[Dd(o[4][0].data)][0]),c=(a=o[17])!=null&&a[0]?wN(e,e[Dd(o[17][0].data)][0]):[],A=vo(o[3][0].data),d=0;A[1].forEach(function(f){var m=vo(f.data),v=e[Dd(m[2][0].data)][0],p=ws(v.meta[1][0].data);if(p!=6002)throw new Error("6001 unexpected reference to ".concat(p));var g=KLe(e,v);g.data.forEach(function(y,w){y.forEach(function(b,x){var T=qn({r:d+w,c:x}),D=GLe(b,i,c);D&&(n[T]=D)})}),d+=g.nrows})}function jLe(e,t){var n=vo(t.data),a={"!ref":"A1"},r=e[Dd(n[2][0].data)],s=ws(r[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return WLe(e,r[0],a),a}function qLe(e,t){var n,a=vo(t.data),r={name:(n=a[1])!=null&&n[0]?HE(a[1][0].data):"",sheets:[]},s=ZT(a[2],Dd);return s.forEach(function(o){e[o].forEach(function(i){var c=ws(i.meta[1][0].data);c==6e3&&r.sheets.push(jLe(e,i))})}),r}function YLe(e,t){var n=n4(),a=vo(t.data),r=ZT(a[1],Dd);if(r.forEach(function(s){e[s].forEach(function(o){var i=ws(o.meta[1][0].data);if(i==2){var c=qLe(e,o);c.sheets.forEach(function(A,d){a4(n,A,d==0?c.name:c.name+"_"+d,!0)})}})}),n.SheetNames.length==0)throw new Error("Empty NUMBERS file");return n}function OC(e){var t,n,a,r,s={},o=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var A;try{A=HLe(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var d;try{d=MLe(A)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){s[f.id]=f.messages,o.push(f.id)})}}),!o.length)throw new Error("File has no messages");var i=((r=(a=(n=(t=s?.[1])==null?void 0:t[0])==null?void 0:n.meta)==null?void 0:a[1])==null?void 0:r[0].data)&&ws(s[1][0].meta[1][0].data)==1&&s[1][0];if(i||o.forEach(function(c){s[c].forEach(function(A){var d=ws(A.meta[1][0].data)>>>0;if(d==1)if(!i)i=A;else throw new Error("Document has multiple roots")})}),!i)throw new Error("Cannot find Document root");return YLe(s,i)}function XLe(e){return function(n){for(var a=0;a!=e.length;++a){var r=e[a];n[r[0]]===void 0&&(n[r[0]]=r[1]),r[2]==="n"&&(n[r[0]]=Number(n[r[0]]))}}}function e4(e){XLe([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function JLe(e){return ev.WS.indexOf(e)>-1?"sheet":e==ev.CS?"chart":e==ev.DS?"dialog":e==ev.MS?"macro":e&&e.length?e:"sheet"}function ZLe(e,t){if(!e)return 0;try{e=t.map(function(a){return a.id||(a.id=a.strRelID),[a.name,e["!id"][a.id].Target,JLe(e["!id"][a.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function e8e(e,t,n,a,r,s,o,i,c,A,d,f){try{s[a]=t0(wi(e,n,!0),t);var m=as(e,t),v;switch(i){case"sheet":v=oLe(m,t,r,c,s[a],A,d,f);break;case"chart":if(v=iLe(m,t,r,c,s[a],A,d,f),!v||!v["!drawel"])break;var p=Fp(v["!drawel"].Target,t),g=NE(p),y=sRe(wi(e,p,!0),t0(wi(e,g,!0),p)),w=Fp(y,p),b=NE(w);v=QVe(wi(e,w,!0),w,c,t0(wi(e,b,!0),w),A,v);break;case"macro":v=lLe(m,t,r,c,s[a],A,d,f);break;case"dialog":v=uLe(m,t,r,c,s[a],A,d,f);break;default:throw new Error("Unrecognized sheet type "+i)}o[a]=v;var x=[];s&&s[a]&&Du(s[a]).forEach(function(T){var D="";if(s[a][T].Type==ev.CMNT){D=Fp(s[a][T].Target,t);var k=fLe(as(e,D,!0),D,c);if(!k||!k.length)return;oN(v,k,!1)}s[a][T].Type==ev.TCMNT&&(D=Fp(s[a][T].Target,t),x=x.concat(iRe(as(e,D,!0),c)))}),x&&x.length&&oN(v,x,!0,c.people||[])}catch(T){if(c.WTF)throw T}}function $i(e){return e.charAt(0)=="/"?e.slice(1):e}function t8e(e,t){if(g$(),t=t||{},e4(t),Ki(e,"META-INF/manifest.xml")||Ki(e,"objectdata.xml"))return gN(e,t);if(Ki(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof OC<"u"){if(e.FileIndex)return OC(e);var n=ba.utils.cfb_new();return DR(e).forEach(function(ue){nPe(n,ue,tPe(e,ue))}),OC(n)}throw new Error("Unsupported NUMBERS file")}if(!Ki(e,"[Content_Types].xml"))throw Ki(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Ki(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var a=DR(e),r=XPe(wi(e,"[Content_Types].xml")),s=!1,o,i;if(r.workbooks.length===0&&(i="xl/workbook.xml",as(e,i,!0)&&r.workbooks.push(i)),r.workbooks.length===0){if(i="xl/workbook.bin",!as(e,i,!0))throw new Error("Could not find workbook");r.workbooks.push(i),s=!0}r.workbooks[0].slice(-3)=="bin"&&(s=!0);var c={},A={};if(!t.bookSheets&&!t.bookProps){if(r0=[],r.sst)try{r0=ALe(as(e,$i(r.sst)),r.sst,t)}catch(ue){if(t.WTF)throw ue}t.cellStyles&&r.themes.length&&(c=dLe(wi(e,r.themes[0].replace(/^\//,""),!0)||"",r.themes[0],t)),r.style&&(A=cLe(as(e,$i(r.style)),r.style,c,t))}r.links.map(function(ue){try{var ie=t0(wi(e,NE($i(ue))),ue);return vLe(as(e,$i(ue)),ie,ue,t)}catch{}});var d=sLe(as(e,$i(r.workbooks[0])),r.workbooks[0],t),f={},m="";r.coreprops.length&&(m=as(e,$i(r.coreprops[0]),!0),m&&(f=W$(m)),r.extprops.length!==0&&(m=as(e,$i(r.extprops[0]),!0),m&&nDe(m,f,t)));var v={};(!t.bookSheets||t.bookProps)&&r.custprops.length!==0&&(m=wi(e,$i(r.custprops[0]),!0),m&&(v=rDe(m,t)));var p={};if((t.bookSheets||t.bookProps)&&(d.Sheets?o=d.Sheets.map(function(ie){return ie.name}):f.Worksheets&&f.SheetNames.length>0&&(o=f.SheetNames),t.bookProps&&(p.Props=f,p.Custprops=v),t.bookSheets&&typeof o<"u"&&(p.SheetNames=o),t.bookSheets?p.SheetNames:t.bookProps))return p;o={};var g={};t.bookDeps&&r.calcchain&&(g=mLe(as(e,$i(r.calcchain)),r.calcchain));var y=0,w={},b,x;{var T=d.Sheets;f.Worksheets=T.length,f.SheetNames=[];for(var D=0;D!=T.length;++D)f.SheetNames[D]=T[D].name}var k=s?"bin":"xml",S=r.workbooks[0].lastIndexOf("/"),E=(r.workbooks[0].slice(0,S+1)+"_rels/"+r.workbooks[0].slice(S+1)+".rels").replace(/^\//,"");Ki(e,E)||(E="xl/_rels/workbook."+k+".rels");var C=t0(wi(e,E,!0),E.replace(/_rels.*/,"s5s"));(r.metadata||[]).length>=1&&(t.xlmeta=hLe(as(e,$i(r.metadata[0])),r.metadata[0],t)),(r.people||[]).length>=1&&(t.people=lRe(as(e,$i(r.people[0])),t)),C&&(C=ZLe(C,d.Sheets));var U=as(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(y=0;y!=f.Worksheets;++y){var F="sheet";if(C&&C[y]?(b="xl/"+C[y][1].replace(/[\/]?xl\//,""),Ki(e,b)||(b=C[y][1]),Ki(e,b)||(b=E.replace(/_rels\/.*$/,"")+C[y][1]),F=C[y][2]):(b="xl/worksheets/sheet"+(y+1-U)+"."+k,b=b.replace(/sheet0\./,"sheet.")),x=b.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(y!=t.sheets)continue e;break;case"string":if(f.SheetNames[y].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var L=!1,H=0;H!=t.sheets.length;++H)typeof t.sheets[H]=="number"&&t.sheets[H]==y&&(L=1),typeof t.sheets[H]=="string"&&t.sheets[H].toLowerCase()==f.SheetNames[y].toLowerCase()&&(L=1);if(!L)continue e}}e8e(e,b,x,f.SheetNames[y],y,w,o,F,t,d,c,A)}return p={Directory:r,Workbook:d,Props:f,Custprops:v,Deps:g,Sheets:o,SheetNames:f.SheetNames,Strings:r0,Styles:A,Themes:c,SSF:Ws(ea)},t&&t.bookFiles&&(e.files?(p.keys=a,p.files=e.files):(p.keys=[],p.files={},e.FullPaths.forEach(function(ue,ie){ue=ue.replace(/^Root Entry[\/]/,""),p.keys.push(ue),p.files[ue]=e.FileIndex[ie]}))),t&&t.bookVBA&&(r.vba.length>0?p.vbaraw=as(e,$i(r.vba[0]),!0):r.defaults&&r.defaults.bin===ARe&&(p.vbaraw=as(e,"xl/vbaProject.bin",!0))),p}function n8e(e,t){var n=t||{},a="Workbook",r=ba.find(e,a);try{if(a="/!DataSpaces/Version",r=ba.find(e,a),!r||!r.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(j3e(r.content),a="/!DataSpaces/DataSpaceMap",r=ba.find(e,a),!r||!r.content)throw new Error("ECMA-376 Encrypted file missing "+a);var s=Y3e(r.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",r=ba.find(e,a),!r||!r.content)throw new Error("ECMA-376 Encrypted file missing "+a);var o=X3e(r.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",r=ba.find(e,a),!r||!r.content)throw new Error("ECMA-376 Encrypted file missing "+a);Z3e(r.content)}catch{}if(a="/EncryptionInfo",r=ba.find(e,a),!r||!r.content)throw new Error("ECMA-376 Encrypted file missing "+a);var i=eUe(r.content);if(a="/EncryptedPackage",r=ba.find(e,a),!r||!r.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(i[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(i[1],r.content,n.password||"",n);if(i[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(i[1],r.content,n.password||"",n);throw new Error("File is password-protected")}function t4(e,t){var n="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":n=Ti(e.slice(0,12));break;case"binary":n=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function a8e(e,t){return ba.find(e,"EncryptedPackage")?n8e(e,t):F9(e,t)}function r8e(e,t){var n,a=e,r=t||{};return r.type||(r.type=pa&&Buffer.isBuffer(e)?"buffer":"base64"),n=C$(a,r),t8e(n,r)}function R9(e,t){var n=0;e:for(;n<e.length;)switch(e.charCodeAt(n)){case 10:case 13:case 32:++n;break;case 60:return ME(e.slice(n),t);default:break e}return O0.to_workbook(e,t)}function s8e(e,t){var n="",a=t4(e,t);switch(t.type){case"base64":n=Ti(e);break;case"binary":n=e;break;case"buffer":n=e.toString("binary");break;case"array":n=Sf(e);break;default:throw new Error("Unrecognized type "+t.type)}return a[0]==239&&a[1]==187&&a[2]==191&&(n=mr(n)),t.type="binary",R9(n,t)}function o8e(e,t){var n=e;return t.type=="base64"&&(n=Ti(n)),n=N0.utils.decode(1200,n.slice(2),"str"),t.type="binary",R9(n,t)}function i8e(e){return e.match(/[^\x00-\x7F]/)?Pp(e):e}function HC(e,t,n,a){return a?(n.type="string",O0.to_workbook(e,n)):O0.to_workbook(t,n)}function QE(e,t){o$();var n=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return QE(new Uint8Array(e),(n=Ws(n),n.type="array",n));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!n.type&&(n.type=typeof Deno<"u"?"buffer":"array");var a=e,r=[0,0,0,0],s=!1;if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),bv={},n.dateNF&&(bv.dateNF=n.dateNF),n.type||(n.type=pa&&Buffer.isBuffer(e)?"buffer":"base64"),n.type=="file"&&(n.type=pa?"buffer":"binary",a=jFe(e),typeof Uint8Array<"u"&&!pa&&(n.type="array")),n.type=="string"&&(s=!0,n.type="binary",n.codepage=65001,a=i8e(e)),n.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),i=new Uint8Array(o);if(i.foo="bar",!i.foo)return n=Ws(n),n.type="array",QE(DT(a),n)}switch((r=t4(a,n))[0]){case 208:if(r[1]===207&&r[2]===17&&r[3]===224&&r[4]===161&&r[5]===177&&r[6]===26&&r[7]===225)return a8e(ba.read(a,n),n);break;case 9:if(r[1]<=8)return F9(a,n);break;case 60:return ME(a,n);case 73:if(r[1]===73&&r[2]===42&&r[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(r[1]===68)return R3e(a,n);break;case 84:if(r[1]===65&&r[2]===66&&r[3]===76)return D3e.to_workbook(a,n);break;case 80:return r[1]===75&&r[2]<9&&r[3]<9?r8e(a,n):HC(e,a,n,s);case 239:return r[3]===60?ME(a,n):HC(e,a,n,s);case 255:if(r[1]===254)return o8e(a,n);if(r[1]===0&&r[2]===2&&r[3]===0)return a0.to_workbook(a,n);break;case 0:if(r[1]===0&&(r[2]>=2&&r[3]===0||r[2]===0&&(r[3]===8||r[3]===9)))return a0.to_workbook(a,n);break;case 3:case 131:case 139:case 140:return sN.to_workbook(a,n);case 123:if(r[1]===92&&r[2]===114&&r[3]===116)return AUe.to_workbook(a,n);break;case 10:case 13:case 32:return s8e(a,n);case 137:if(r[1]===80&&r[2]===78&&r[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return F3e.indexOf(r[0])>-1&&r[2]<=12&&r[3]<=31?sN.to_workbook(a,n):HC(e,a,n,s)}function l8e(e,t,n,a,r,s,o,i){var c=js(n),A=i.defval,d=i.raw||!Object.prototype.hasOwnProperty.call(i,"raw"),f=!0,m=r===1?[]:{};if(r!==1)if(Object.defineProperty)try{Object.defineProperty(m,"__rowNum__",{value:n,enumerable:!1})}catch{m.__rowNum__=n}else m.__rowNum__=n;if(!o||e[n])for(var v=t.s.c;v<=t.e.c;++v){var p=o?e[n][v]:e[a[v]+c];if(p===void 0||p.t===void 0){if(A===void 0)continue;s[v]!=null&&(m[s[v]]=A);continue}var g=p.v;switch(p.t){case"z":if(g==null)break;continue;case"e":g=g==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+p.t)}if(s[v]!=null){if(g==null)if(p.t=="e"&&g===null)m[s[v]]=null;else if(A!==void 0)m[s[v]]=A;else if(d&&g===null)m[s[v]]=null;else continue;else m[s[v]]=d&&(p.t!=="n"||p.t==="n"&&i.rawNumbers!==!1)?g:Rc(p,g,i);g!=null&&(f=!1)}}return{row:m,isempty:f}}function GE(e,t){if(e==null||e["!ref"]==null)return[];var n={t:"n",v:0},a=0,r=1,s=[],o=0,i="",c={s:{r:0,c:0},e:{r:0,c:0}},A=t||{},d=A.range!=null?A.range:e["!ref"];switch(A.header===1?a=1:A.header==="A"?a=2:Array.isArray(A.header)?a=3:A.header==null&&(a=0),typeof d){case"string":c=Lr(d);break;case"number":c=Lr(e["!ref"]),c.s.r=d;break;default:c=d}a>0&&(r=0);var f=js(c.s.r),m=[],v=[],p=0,g=0,y=Array.isArray(e),w=c.s.r,b=0,x={};y&&!e[w]&&(e[w]=[]);var T=A.skipHidden&&e["!cols"]||[],D=A.skipHidden&&e["!rows"]||[];for(b=c.s.c;b<=c.e.c;++b)if(!(T[b]||{}).hidden)switch(m[b]=ys(b),n=y?e[w][b]:e[m[b]+f],a){case 1:s[b]=b-c.s.c;break;case 2:s[b]=m[b];break;case 3:s[b]=A.header[b-c.s.c];break;default:if(n==null&&(n={w:"__EMPTY",t:"s"}),i=o=Rc(n,null,A),g=x[o]||0,!g)x[o]=1;else{do i=o+"_"+g++;while(x[i]);x[o]=g,x[i]=1}s[b]=i}for(w=c.s.r+r;w<=c.e.r;++w)if(!(D[w]||{}).hidden){var k=l8e(e,c,w,m,a,s,y,A);(k.isempty===!1||(a===1?A.blankrows!==!1:A.blankrows))&&(v[p++]=k.row)}return v.length=p,v}var bN=/"/g;function u8e(e,t,n,a,r,s,o,i){for(var c=!0,A=[],d="",f=js(n),m=t.s.c;m<=t.e.c;++m)if(a[m]){var v=i.dense?(e[n]||[])[m]:e[a[m]+f];if(v==null)d="";else if(v.v!=null){c=!1,d=""+(i.rawNumbers&&v.t=="n"?v.v:Rc(v,null,i));for(var p=0,g=0;p!==d.length;++p)if((g=d.charCodeAt(p))===r||g===s||g===34||i.forceQuotes){d='"'+d.replace(bN,'""')+'"';break}d=="ID"&&(d='"ID"')}else v.f!=null&&!v.F?(c=!1,d="="+v.f,d.indexOf(",")>=0&&(d='"'+d.replace(bN,'""')+'"')):d="";A.push(d)}return i.blankrows===!1&&c?null:A.join(o)}function N9(e,t){var n=[],a=t??{};if(e==null||e["!ref"]==null)return"";var r=Lr(e["!ref"]),s=a.FS!==void 0?a.FS:",",o=s.charCodeAt(0),i=a.RS!==void 0?a.RS:`
`,c=i.charCodeAt(0),A=new RegExp((s=="|"?"\\|":s)+"+$"),d="",f=[];a.dense=Array.isArray(e);for(var m=a.skipHidden&&e["!cols"]||[],v=a.skipHidden&&e["!rows"]||[],p=r.s.c;p<=r.e.c;++p)(m[p]||{}).hidden||(f[p]=ys(p));for(var g=0,y=r.s.r;y<=r.e.r;++y)(v[y]||{}).hidden||(d=u8e(e,r,y,f,o,c,s,a),d!=null&&(a.strip&&(d=d.replace(A,"")),(d||a.blankrows!==!1)&&n.push((g++?i:"")+d)));return delete a.dense,n.join("")}function c8e(e,t){t||(t={}),t.FS="	",t.RS=`
`;var n=N9(e,t);return n}function d8e(e){var t="",n,a="";if(e==null||e["!ref"]==null)return[];var r=Lr(e["!ref"]),s="",o=[],i,c=[],A=Array.isArray(e);for(i=r.s.c;i<=r.e.c;++i)o[i]=ys(i);for(var d=r.s.r;d<=r.e.r;++d)for(s=js(d),i=r.s.c;i<=r.e.c;++i)if(t=o[i]+s,n=A?(e[d]||[])[i]:e[t],a="",n!==void 0){if(n.F!=null){if(t=n.F,!n.f)continue;a=n.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(n.f!=null)a=n.f;else{if(n.t=="z")continue;if(n.t=="n"&&n.v!=null)a=""+n.v;else if(n.t=="b")a=n.v?"TRUE":"FALSE";else if(n.w!==void 0)a="'"+n.w;else{if(n.v===void 0)continue;n.t=="s"?a="'"+n.v:a=""+n.v}}c[c.length]=t+"="+a}return c}function V9(e,t,n){var a=n||{},r=+!a.skipHeader,s=e||{},o=0,i=0;if(s&&a.origin!=null)if(typeof a.origin=="number")o=a.origin;else{var c=typeof a.origin=="string"?Mo(a.origin):a.origin;o=c.r,i=c.c}var A,d={s:{c:0,r:0},e:{c:i,r:o+t.length-1+r}};if(s["!ref"]){var f=Lr(s["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),o==-1&&(o=f.e.r+1,d.e.r=o+t.length-1+r)}else o==-1&&(o=0,d.e.r=t.length-1+r);var m=a.header||[],v=0;t.forEach(function(g,y){Du(g).forEach(function(w){(v=m.indexOf(w))==-1&&(m[v=m.length]=w);var b=g[w],x="z",T="",D=qn({c:i+v,r:o+y+r});A=G0(s,D),b&&typeof b=="object"&&!(b instanceof Date)?s[D]=b:(typeof b=="number"?x="n":typeof b=="boolean"?x="b":typeof b=="string"?x="s":b instanceof Date?(x="d",a.cellDates||(x="n",b=Go(b)),T=a.dateNF||ea[14]):b===null&&a.nullError&&(x="e",b=0),A?(A.t=x,A.v=b,delete A.w,delete A.R,T&&(A.z=T)):s[D]=A={t:x,v:b},T&&(A.z=T))})}),d.e.c=Math.max(d.e.c,i+m.length-1);var p=js(o);if(r)for(v=0;v<m.length;++v)s[ys(v+i)+p]={t:"s",v:m[v]};return s["!ref"]=Sa(d),s}function A8e(e,t){return V9(null,e,t)}function G0(e,t,n){if(typeof t=="string"){if(Array.isArray(e)){var a=Mo(t);return e[a.r]||(e[a.r]=[]),e[a.r][a.c]||(e[a.r][a.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?G0(e,qn(t)):G0(e,qn({r:t,c:n||0}))}function f8e(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var n=e.SheetNames.indexOf(t);if(n>-1)return n;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function n4(){return{SheetNames:[],Sheets:{}}}function a4(e,t,n,a){var r=1;if(!n)for(;r<=65535&&e.SheetNames.indexOf(n="Sheet"+r)!=-1;++r,n=void 0);if(!n||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(a&&e.SheetNames.indexOf(n)>=0){var s=n.match(/(^.*?)(\d+)$/);r=s&&+s[2]||0;var o=s&&s[1]||n;for(++r;r<=65535&&e.SheetNames.indexOf(n=o+r)!=-1;++r);}if(XVe(n),e.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return e.SheetNames.push(n),e.Sheets[n]=t,n}function m8e(e,t,n){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var a=f8e(e,t);switch(e.Workbook.Sheets[a]||(e.Workbook.Sheets[a]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}e.Workbook.Sheets[a].Hidden=n}function v8e(e,t){return e.z=t,e}function L9(e,t,n){return t?(e.l={Target:t},n&&(e.l.Tooltip=n)):delete e.l,e}function h8e(e,t,n){return L9(e,"#"+t,n)}function p8e(e,t,n){e.c||(e.c=[]),e.c.push({t,a:n||"SheetJS"})}function g8e(e,t,n,a){for(var r=typeof t!="string"?t:Lr(t),s=typeof t=="string"?t:Sa(t),o=r.s.r;o<=r.e.r;++o)for(var i=r.s.c;i<=r.e.c;++i){var c=G0(e,o,i);c.t="n",c.F=s,delete c.v,o==r.s.r&&i==r.s.c&&(c.f=n,a&&(c.D=!0))}return e}var y8e={encode_col:ys,encode_row:js,encode_cell:qn,encode_range:Sa,decode_col:$T,decode_row:HT,split_cell:IPe,decode_cell:Mo,decode_range:_h,format_cell:Rc,sheet_add_aoa:$$,sheet_add_json:V9,sheet_add_dom:P9,aoa_to_sheet:wh,json_to_sheet:A8e,table_to_sheet:D9,table_to_book:RLe,sheet_to_csv:N9,sheet_to_txt:c8e,sheet_to_json:GE,sheet_to_html:ULe,sheet_to_formulae:d8e,sheet_to_row_object_array:GE,sheet_get_cell:G0,book_new:n4,book_append_sheet:a4,book_set_sheet_visibility:m8e,cell_set_number_format:v8e,cell_set_hyperlink:L9,cell_set_internal_link:h8e,cell_add_comment:p8e,sheet_set_array_formula:g8e,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const M9={practo:{name:"Practo",headerRow:1,requiredColumns:{"Patient Name":"name","Mobile Number":"contact_number",Age:"age",Gender:"gender"},optionalColumns:{"Patient Number":"importID","Email Address":"email",Pincode:"address","Date of Birth":"dateOfBirth",DOB:"dateOfBirth","Birth Date":"dateOfBirth"},validation:{required:["Patient Name","Mobile Number","Age","Gender"],optional:["Patient Number","Email Address","Pincode","Date of Birth","DOB","Birth Date"],dataTypes:{"Patient Name":"string","Patient Number":"string",Age:["string","number"],Gender:"string","Mobile Number":["string","number"],"Email Address":"string",Pincode:"string","Date of Birth":"string",DOB:"string","Birth Date":"string"}}},ekacare:{name:"Eka.Care",requiredColumns:{"Patient name":"name",Mobile:"contact_number"},optionalColumns:{"UHID (DF)":"importID",Age:"age",Gender:"gender","Patient Address":"address","Mail ID(DF)":"email","Date of Birth":"dateOfBirth",DOB:"dateOfBirth","Birth Date":"dateOfBirth"},validation:{required:["Patient name","Mobile"],optional:["UHID (DF)","Age","Gender","Patient Address","Mail ID(DF)","Date of Birth","DOB","Birth Date"],dataTypes:{"Patient name":"string","UHID (DF)":"string",Mobile:"string",Age:"string",Gender:"string","Patient Address":"string","Mail ID(DF)":"string","Date of Birth":"string",DOB:"string","Birth Date":"string"}}},healthplix:{name:"Healthplix",headerRow:1,requiredColumns:{ID:"importID",name:"name",phone_number:"contact_number",Sex:"gender",age:"age"},optionalColumns:{person_address:"address",email_id:"email",dob:"dateOfBirth",date_of_birth:"dateOfBirth","Date of Birth":"dateOfBirth",DOB:"dateOfBirth","Birth Date":"dateOfBirth"},validation:{required:["ID","name","phone_number","Sex","age"],optional:["person_address","email_id","dob","date_of_birth","Date of Birth","DOB","Birth Date"],dataTypes:{ID:"string",name:"string",phone_number:["string","number"],Sex:"string",age:["string","number"],person_address:"string",email_id:"string",dob:"string",date_of_birth:"string","Date of Birth":"string",DOB:"string","Birth Date":"string"}}},"evamed-custom":{name:"Evamed Custom Template",headerRow:1,requiredColumns:{id:"importID",name:"name",phone_number:"contact_number"},optionalColumns:{age:"age",gender:"gender",date_of_birth:"dateOfBirth",address:"address",email:"email"},validation:{required:["id","name","phone_number"],optional:["age","gender","date_of_birth","address","email"],dataTypes:{id:["string","number"],name:"string",phone_number:["string","number"],age:["string","number"],gender:"string",date_of_birth:"string",address:"string",email:"string"}}},tatvacare:{name:"TatvaCare",headerRow:1,requiredColumns:{"Patient Name":"name",Mobile:"contact_number"},optionalColumns:{Gender:"gender","Date of Birth":"dateOfBirth",Age:"age","Patient ID":"importID","Street Address":"streetAddress",City:"city",State:"state","Pin Code":"pinCode"},validation:{required:["Patient Name","Mobile"],optional:["Gender","Date of Birth","Age","Patient ID","Street Address","City","State","Pin Code"],dataTypes:{"Patient Name":"string",Mobile:["string","number"],Gender:"string","Date of Birth":"string",Age:["string","number"],"Patient ID":"string","Street Address":"string",City:"string",State:"string","Pin Code":"string"}}}},C2=e=>M9[e]||null,xN=e=>Object.prototype.hasOwnProperty.call(M9,e),O9=(e,t)=>{const n=C2(t);if(!n)return{isValid:!1,error:`Unsupported EMR system: ${t}`,missing:[],found:[]};const a=n.validation.required,r=new Set(e.map(i=>i.trim()));let s=[],o=[];if(t==="practo"){const i={"Patient Name":["Patient Name","PatientName","patient Name","patient name","Name","Patient","Full Name","FullName"],"Mobile Number":["Mobile Number","MobileNumber","mobile Number","mobile number","Mobile","Phone","Phone Number","PhoneNumber","Contact","Contact Number","ContactNumber"],Age:["Age","age","Patient Age","patient Age","Age (Years)"],Gender:["Gender","gender","Sex","sex","Patient Gender","patient Gender"],"Patient Number":["Patient Number","PatientNumber","patient Number","patient number","Patient ID","PatientID","ID","Patient No","PatientNo"],"Date of Birth":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],DOB:["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],"Birth Date":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"]};a.forEach(c=>{(i[c]||[c]).find(f=>r.has(f))?o.push(c):s.push(c)})}else if(t==="evamed-custom"){const i={id:["id","ID","Id","patient_id","patient id","Patient ID","PatientID","Patient Id","patientId","PatientNumber","patient number","Patient Number"],name:["name","Name","patient_name","patient name","Patient Name","PatientName","Patient name","Full Name","FullName","full name"],phone_number:["phone_number","phone number","Phone Number","PhoneNumber","phone","Phone","mobile","Mobile","Mobile Number","mobile number","contact_number","contact number","Contact Number","ContactNumber","Contact"],age:["age","Age","patient_age","patient age","Patient Age","PatientAge","Age (Years)","age (years)"],gender:["gender","Gender","patient_gender","patient gender","Patient Gender","PatientGender","sex","Sex","Gender/Sex"],date_of_birth:["date_of_birth","date of birth","Date of Birth","DateOfBirth","DOB","dob","Birth Date","birth date","BirthDate","birthdate"],address:["address","Address","patient_address","patient address","Patient Address","PatientAddress","Address Line","address line"],email:["email","Email","patient_email","patient email","Patient Email","PatientEmail","email_id","email id","Email ID","EmailID","Email Address","email address"]};a.forEach(c=>{(i[c]||[c]).find(f=>r.has(f))?o.push(c):s.push(c)})}else if(t==="tatvacare"){const i={"Patient Name":["Patient Name","PatientName","patient Name","patient name","Name","Patient","Full Name","FullName"],Mobile:["Mobile","mobile","Mobile Number","mobile Number","MobileNumber","Phone","Phone Number","PhoneNumber","Contact","Contact Number","ContactNumber"],Gender:["Gender","gender","Sex","sex","Patient Gender","patient Gender"],"Date of Birth":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth Date"],Age:["Age","age","Patient Age","patient Age","Age (Years)","age (years)"],"Patient ID":["Patient ID","PatientID","patient ID","patient id","Patient Id","ID","Id","Patient Number","PatientNumber"],"Street Address":["Street Address","StreetAddress","street Address","street address","Address","address","Street","street"],City:["City","city"],State:["State","state"],"Pin Code":["Pin Code","PinCode","pin Code","pin code","Pincode","pincode","Postal Code","postal Code","Zip Code","zip Code"]};a.forEach(c=>{(i[c]||[c]).find(f=>r.has(f))?o.push(c):s.push(c)})}else if(t==="ekacare"){const i={"Patient name":["Patient name","Patient Name","PatientName","patient name","patient Name","Name","Patient","Full Name","FullName"],Mobile:["Mobile","mobile","Mobile Number","mobile Number","MobileNumber","Phone","Phone Number","PhoneNumber","Contact","Contact Number","ContactNumber"],Age:["Age","age","Patient Age","patient Age","Age (Years)"],Gender:["Gender","gender","Sex","sex","Patient Gender","patient Gender"],"Date of Birth":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],DOB:["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],"Birth Date":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"]};a.forEach(c=>{(i[c]||[c]).find(f=>r.has(f))?o.push(c):s.push(c)})}else if(t==="healthplix"){const i={ID:["ID","id","Id","patient_id","patient id","Patient ID","PatientID","Patient Id","patientId"],name:["name","Name","patient_name","patient name","Patient Name","PatientName","Patient name","Full Name","FullName"],phone_number:["phone_number","phone number","Phone Number","PhoneNumber","phone","Phone","mobile","Mobile","Mobile Number","mobile number","contact_number","contact number","Contact Number","ContactNumber"],Sex:["Sex","sex","Gender","gender","Patient Gender","patient Gender"],age:["age","Age","patient_age","patient age","Patient Age","PatientAge","Age (Years)"],dob:["dob","DOB","date_of_birth","date of birth","Date of Birth","DateOfBirth","Birth Date","birth date","BirthDate","birthdate"],date_of_birth:["dob","date_of_birth","date of birth","Date of Birth","DateOfBirth","DOB","Birth Date","birth date","BirthDate","birthdate"],"Date of Birth":["dob","Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],DOB:["dob","Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],"Birth Date":["dob","Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","Birth Date","birth date","BirthDate","birthdate","date_of_birth"]};a.forEach(c=>{(i[c]||[c]).find(f=>r.has(f))?o.push(c):s.push(c)})}else s=a.filter(i=>!r.has(i)),o=a.filter(i=>r.has(i));return{isValid:s.length===0,error:s.length>0?`Missing required columns: ${s.join(", ")}`:null,missing:s,found:o,mapping:n}},Ap=e=>{if(!e)return null;try{const t=dh(e),a=FM(new Date,t);return isNaN(a)||a<0?null:a}catch(t){return console.error("Error calculating age from DOB:",e,t),null}},_8e=(e,t,n)=>{const a=C2(n);if(!a)throw new Error(`Unsupported EMR system: ${n}`);const r={},s={...a.requiredColumns,...a.optionalColumns},o=(i,c)=>{let A=c.indexOf(i);if(A!==-1)return A;if(n==="practo"){const f={"Patient Name":["Patient Name","patient Name","Patient name","patient name","PatientName","Name","Patient","Full Name","FullName"],"Mobile Number":["Mobile Number","mobile Number","Mobile number","mobile number","MobileNumber","Mobile","Phone","Phone Number","PhoneNumber","Contact","Contact Number","ContactNumber"],"Patient Number":["Patient Number","patient Number","Patient number","patient number","PatientNumber","Patient ID","PatientID","ID","Patient No","PatientNo"],Age:["Age","age","Patient Age","patient Age","Age (Years)"],Gender:["Gender","gender","Sex","sex","Patient Gender","patient Gender"],"Email Address":["Email Address","email Address","Email address","email address","Email","email","Email ID","Email address"],Pincode:["Pincode","pincode","Pin Code","pin Code","Postal Code","postal Code","Zip Code","zip Code"],"Date of Birth":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],DOB:["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],"Birth Date":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"]}[i]||[i];for(const m of f)if(A=c.indexOf(m),A!==-1)return A}if(n==="evamed-custom"){const f={id:["id","ID","Id","patient_id","patient id","Patient ID","PatientID","Patient Id","patientId","PatientNumber","patient number","Patient Number"],name:["name","Name","patient_name","patient name","Patient Name","PatientName","Patient name","Full Name","FullName","full name"],phone_number:["phone_number","phone number","Phone Number","PhoneNumber","phone","Phone","mobile","Mobile","Mobile Number","mobile number","contact_number","contact number","Contact Number","ContactNumber","Contact"],age:["age","Age","patient_age","patient age","Patient Age","PatientAge","Age (Years)","age (years)"],gender:["gender","Gender","patient_gender","patient gender","Patient Gender","PatientGender","sex","Sex","Gender/Sex"],date_of_birth:["date_of_birth","date of birth","Date of Birth","DateOfBirth","DOB","dob","Birth Date","birth date","BirthDate","birthdate"],address:["address","Address","patient_address","patient address","Patient Address","PatientAddress","Address Line","address line"],email:["email","Email","patient_email","patient email","Patient Email","PatientEmail","email_id","email id","Email ID","EmailID","Email Address","email address"]}[i]||[i];for(const m of f)if(A=c.indexOf(m),A!==-1)return A}if(n==="ekacare"){const f={"Patient name":["Patient name","Patient Name","PatientName","patient name","patient Name","Name","Patient","Full Name","FullName"],Mobile:["Mobile","mobile","Mobile Number","mobile Number","MobileNumber","Phone","Phone Number","PhoneNumber","Contact","Contact Number","ContactNumber"],Age:["Age","age","Patient Age","patient Age","Age (Years)"],Gender:["Gender","gender","Sex","sex","Patient Gender","patient Gender"],"Date of Birth":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],DOB:["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],"Birth Date":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"]}[i]||[i];for(const m of f)if(A=c.indexOf(m),A!==-1)return A}if(n==="healthplix"){const f={ID:["ID","id","Id","patient_id","patient id","Patient ID","PatientID","Patient Id","patientId"],name:["name","Name","patient_name","patient name","Patient Name","PatientName","Patient name","Full Name","FullName"],phone_number:["phone_number","phone number","Phone Number","PhoneNumber","phone","Phone","mobile","Mobile","Mobile Number","mobile number","contact_number","contact number","Contact Number","ContactNumber"],Sex:["Sex","sex","Gender","gender","Patient Gender","patient Gender"],age:["age","Age","patient_age","patient age","Patient Age","PatientAge","Age (Years)"],dob:["dob","DOB","date_of_birth","date of birth","Date of Birth","DateOfBirth","Birth Date","birth date","BirthDate","birthdate"],date_of_birth:["dob","date_of_birth","date of birth","Date of Birth","DateOfBirth","DOB","Birth Date","birth date","BirthDate","birthdate"],"Date of Birth":["dob","Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],DOB:["dob","Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],"Birth Date":["dob","Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","Birth Date","birth date","BirthDate","birthdate","date_of_birth"]}[i]||[i];for(const m of f)if(A=c.indexOf(m),A!==-1)return A}if(n==="tatvacare"){const f={"Patient Name":["Patient Name","patient Name","Patient name","patient name","PatientName","Name","Patient","Full Name","FullName"],Mobile:["Mobile","mobile","Mobile Number","mobile Number","MobileNumber","Phone","Phone Number","PhoneNumber","Contact","Contact Number","ContactNumber"],Gender:["Gender","gender","Sex","sex","Patient Gender","patient Gender"],"Date of Birth":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth Date"],Age:["Age","age","Patient Age","patient Age","Age (Years)","age (years)"],"Patient ID":["Patient ID","PatientID","patient ID","patient id","Patient Id","ID","Id","Patient Number","PatientNumber"],"Street Address":["Street Address","StreetAddress","street Address","street address","Address","address","Street","street"],City:["City","city"],State:["State","state"],"Pin Code":["Pin Code","PinCode","pin Code","pin code","Pincode","pincode","Postal Code","postal Code","Zip Code","zip Code"]}[i]||[i];for(const m of f)if(A=c.indexOf(m),A!==-1)return A}return-1};if(Object.entries(s).forEach(([i,c])=>{const A=o(i,t);if(A!==-1&&c){let d=e[A];n==="practo"&&typeof d=="string"&&d.endsWith("'")&&(d=d.slice(0,-1).trim()),d=b8e(d,i,a.validation.dataTypes[i]),d!=null&&d!==""&&(r[c]=d)}}),r.email=r.email||"",r.address=r.address||"",r.note=r.note||"",n==="practo"){if(r.dateOfBirth){const i=gd(r.dateOfBirth);i!==null&&(r.birthDate=i.toString(),r.age=Ap(r.dateOfBirth)),delete r.dateOfBirth}else if(r.age!==void 0&&r.age!==null&&r.age!==""){const i=parseInt(r.age,10);r.age=isNaN(i)||i<0?null:i}else r.age=null;r.gender=r.gender||"Male"}if(n==="ekacare"){if(r.dateOfBirth){const i=gd(r.dateOfBirth);i!==null&&(r.birthDate=i.toString(),r.age=Ap(r.dateOfBirth)),delete r.dateOfBirth}else if(r.age!==void 0&&r.age!==null&&r.age!==""){const i=String(r.age).match(/^\d+/);if(i){const c=parseInt(i[0],10);r.age=isNaN(c)||c<0?null:c}else r.age=null}}if(n==="healthplix"){if(r.dateOfBirth){const i=gd(r.dateOfBirth);i!==null&&(r.birthDate=i.toString(),r.age=Ap(r.dateOfBirth)),delete r.dateOfBirth}else if(r.age!==void 0&&r.age!==null&&r.age!==""){const i=parseInt(r.age,10);r.age=isNaN(i)||i<0?null:i}}if(n==="evamed-custom"){if(r.dateOfBirth){const i=gd(r.dateOfBirth);i!==null&&(r.birthDate=i.toString(),r.age=Ap(r.dateOfBirth)),delete r.dateOfBirth}else if(r.age!==void 0&&r.age!==null){const i=parseInt(r.age,10);r.age=isNaN(i)||i<0?null:i}if(r.gender){const i=String(r.gender).toLowerCase().trim();i==="male"||i==="m"?r.gender="Male":i==="female"||i==="f"?r.gender="Female":i==="other"||i==="o"?r.gender="Other":r.gender=String(r.gender).trim()}else r.gender="Male"}if(n==="tatvacare"){if(r.dateOfBirth){const c=gd(r.dateOfBirth);c!==null&&(r.birthDate=c.toString(),r.age=Ap(r.dateOfBirth)),delete r.dateOfBirth}else if(r.age!==void 0&&r.age!==null){const c=parseInt(r.age,10);r.age=isNaN(c)||c<0?null:c}const i=[];if(r.streetAddress&&i.push(r.streetAddress),r.city&&i.push(r.city),r.state&&i.push(r.state),r.pinCode&&i.push(r.pinCode),r.address=i.length>0?i.join(", "):"",delete r.streetAddress,delete r.city,delete r.state,delete r.pinCode,r.gender){const c=String(r.gender).toLowerCase().trim();c==="male"||c==="m"?r.gender="Male":c==="female"||c==="f"?r.gender="Female":c==="other"||c==="o"?r.gender="Other":r.gender=String(r.gender).trim()}else r.gender="Male"}return r.importID=r.importID||null,r.importSource=n,r},w8e=e=>{if(!e||e==="")return"";const t=String(e).trim();let n=t.match(/^(\d{2})-(\d{2})-(\d{4})$/);if(n){const[,a,r,s]=n;return`${s}-${r}-${a}`}if(n=t.match(/^(\d{4})-(\d{2})-(\d{2})$/),n)return t;if(n=t.match(/^(\d{2})\/(\d{2})\/(\d{4})$/),n){const[,a,r,s]=n;return`${s}-${r}-${a}`}if(n=t.match(/^(\d{4})\/(\d{2})\/(\d{2})$/),n){const[,a,r,s]=n;return`${a}-${r}-${s}`}return t},b8e=(e,t,n)=>{if(e==null||e==="")return"";let a=String(e).trim();if(!n)return a;switch(t){case"Patient Age":{if(typeof e=="number")return String(Math.floor(e));const r=a.match(/\d+/);return r?r[0]:a}case"Age":{if(e==null||e===""||a==="")return"";if(a.endsWith("'"))return a.slice(0,-1).trim()||"";const r=a.match(/^\d+/);return r?r[0]:""}case"Patient Contact":return a.replace(/[^\d+\-\s]/g,"");case"Mobile Number":{let r=a;return r.endsWith("'")&&(r=r.slice(0,-1)),r.startsWith("+91")&&(r=r.substring(3)),r.trim()}case"Mobile":return a.startsWith("+91")?a.substring(3).trim():a.replace(/[^\d]/g,"");case"Patient Gender":case"Gender":case"gender":{if(e==null||e===""||a==="")return"";let r=a;if(r.endsWith("'")&&(r=r.slice(0,-1).trim()),!r.trim())return"";const s=r.toLowerCase().trim();return s==="f"?"Female":s==="m"?"Male":s==="o"?"Other":s==="male"||s.includes("male")&&!s.includes("female")?"Male":s==="female"||s.includes("female")?"Female":s==="other"?"Other":r.trim()}case"Patient Name":case"Patient name":{let r=a;return r.endsWith("'")&&(r=r.slice(0,-1)),r.replace(/\s+/g," ").trim()}case"Email Address":{let r=a;return r.endsWith("'")&&(r=r.slice(0,-1)),r.trim()}case"Pincode":{let r=a;return r.endsWith("'")&&(r=r.slice(0,-1)),r.trim()}case"Patient Number":{let r=a;return r.endsWith("'")&&(r=r.slice(0,-1)),r.trim()}case"UHID (DF)":return a.trim();case"ID":return a.trim();case"phone_number":{if(e==null||e==="")return"";let r=String(e).trim();return r.startsWith("+91")&&(r=r.substring(3).trim()),r.endsWith(".0")&&(r=r.slice(0,-2)),r=r.replace(/[^\d]/g,""),r}case"Sex":{if(e==null||e===""||a==="")return"";const r=a.trim(),s=r.toLowerCase();return s==="female"?"Female":s==="male"?"Male":r}case"Age":case"age":{if(e==null||e===""||a==="")return"";let r=a;r.endsWith("'")&&(r=r.slice(0,-1).trim());const s=r.match(/^\d+/);return s?s[0]:""}case"id":return e==null||e===""?"":String(e).trim();case"address":case"person_address":return e==null||e===""||a===","||a==='","'?"":String(e).replace(/\s+/g," ").trim();case"email":case"email_id":return e==null||e===""?"":String(e).trim();case"Date of Birth":case"date_of_birth":case"dob":case"DOB":case"Birth Date":{let r=a;return r.endsWith("'")&&(r=r.slice(0,-1).trim()),w8e(r)}case"Patient ID":return a.trim();case"Street Address":case"City":case"State":case"Pin Code":return e==null||e===""?"":String(e).trim();default:return a}};function $C(e){const t=[];let n="",a=!1;for(let r=0;r<e.length;r++){const s=e[r],o=e[r+1];s==='"'?a&&o==='"'?(n+='"',r++):a=!a:s===","&&!a?(t.push(n.trim()),n=""):n+=s}return t.push(n.trim()),t}const H9=async(e,t=null)=>{const n=e.name.toLowerCase(),a=e.type==="text/csv"||e.type==="application/csv"||n.endsWith(".csv"),r=e.type==="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"||e.type==="application/vnd.ms-excel"||n.endsWith(".xlsx")||n.endsWith(".xls");if(!a&&!r)throw new Error("Unsupported file type. Please use CSV (.csv) or Excel (.xlsx, .xls) files.");return a?new Promise((s,o)=>{const i=new FileReader;i.onload=c=>{try{const d=c.target.result.split(/\r?\n/);let f=0,m=1;if(t){const w=C2(t);w&&w.headerRow&&(f=w.headerRow-1,m=f+1)}if(f>=d.length){o(new Error(`Header row ${f+1} does not exist in file`));return}const v=d[f].trim();if(!v){o(new Error("Header row is empty"));return}const p=$C(v).map(w=>String(w).trim()).filter(w=>w!=="");let g=0;for(let w=m;w<d.length;w++){const b=d[w].trim();b&&$C(b).some(x=>x.trim()!=="")&&g++}const y=[];for(let w=m;w<d.length;w++){const b=d[w].trim();if(b){const x=$C(b);x.some(T=>T.trim()!=="")&&y.push(x)}}s({headers:p,rows:y,totalRows:y.length,headerRowIndex:f+1,isCSV:!0,fileType:"csv"})}catch(A){o(new Error(`Failed to parse CSV file: ${A.message}`))}},i.onerror=()=>o(new Error("Failed to read file")),i.readAsText(e)}):r?new Promise((s,o)=>{const i=new FileReader;i.onload=c=>{try{console.log(`Reading Excel file: ${e.name} (${(e.size/1024/1024).toFixed(2)} MB)`);const A=c.target.result,d=QE(A,{type:"binary",cellDates:!1,cellNF:!1,cellStyles:!1,sheetStubs:!1});if(!d.SheetNames||d.SheetNames.length===0){o(new Error("Excel file has no worksheets"));return}const f=d.SheetNames[0],m=d.Sheets[f];if(!m){o(new Error(`Worksheet "${f}" not found`));return}console.log(`Processing worksheet: ${f}`);const v=y8e.sheet_to_json(m,{header:1,defval:"",raw:!1,blankrows:!1});if(v.length===0){o(new Error("Excel file is empty"));return}console.log(`Excel file parsed: ${v.length} total rows`);let p=0,g=1;if(t){const b=C2(t);b&&b.headerRow&&(p=b.headerRow-1,g=p+1)}if(p>=v.length){o(new Error(`Header row ${p+1} does not exist in Excel file`));return}const y=v[p].map(b=>String(b).trim()).filter(b=>b!=="");if(y.length===0){o(new Error("Header row is empty in Excel file"));return}const w=v.slice(g).filter(b=>b.some(x=>x!=null&&String(x).trim()!==""));console.log(`Excel file processed: ${y.length} columns, ${w.length} data rows`),s({headers:y,rows:w,totalRows:w.length,headerRowIndex:p+1,isCSV:!1,fileType:"excel"})}catch(A){console.error("Excel file parsing error:",A),o(new Error(`Failed to parse Excel file: ${A.message}`))}},i.onerror=()=>{console.error("Failed to read Excel file"),o(new Error("Failed to read Excel file"))},i.readAsBinaryString(e)}):Promise.reject(new Error("Unsupported file type. Please use CSV (.csv) or Excel (.xlsx, .xls) files."))},zE=async(e,t)=>{try{const n=await H9(e,t),a=O9(n.headers,t);return{isValid:a.isValid,error:a.error,fileData:a.isValid?n:null,validation:a}}catch(n){return{isValid:!1,error:n.message,fileData:null,validation:null}}},$9=async(e,t,n=null)=>{const{headers:a,rows:r,fileType:s}=e;s&&console.log(`Processing ${s.toUpperCase()} file with ${r.length} rows`);const o={total:r.length,successful:0,failed:0,errors:[],patients:[],duplicates:0},i=100,c=500,A=new Map,d=[],f=[];for(let m=0;m<r.length;m++)try{const v=_8e(r[m],a,t);v.isImported=!0;const p=C8e(v);if(p){o.failed++,o.errors.push({row:m+1,patientData:r[m],error:p,mappedData:v});continue}v.importID&&v.importID.trim()!==""?(A.set(v.importID,{patientData:v,rowIndex:m+1}),d.push(v)):f.push(v),n&&(m%i===0||m===r.length-1)&&n({current:m+1,total:r.length,phase:"mapping",currentPatient:v.name,message:`Processing row ${m+1} of ${r.length}...`}),m%i===0&&m>0&&await new Promise(g=>setTimeout(g,0))}catch(v){console.error(`Row ${m+1} mapping error:`,v),o.failed++,o.errors.push({row:m+1,patientData:r[m],error:v.message,mappedData:null})}if(d.length>0){n&&n({current:0,total:d.length,phase:"duplicate-check",message:"Checking for existing patients..."});const m=await x8e(d,t);o.duplicates=m.duplicates.length,o.errors.push(...m.duplicates.map(p=>({row:p.row,patientData:p.originalData,error:`Patient already exists with Import ID: ${p.importID}`,mappedData:p.originalData,isDuplicate:!0})));const v=[...m.newPatients,...f];await CN(v,o,n,c)}else await CN(f,o,n,c);return n&&n({current:r.length,total:r.length,phase:"complete",successful:o.successful,failed:o.failed,duplicates:o.duplicates,message:`Import completed: ${o.successful} successful, ${o.failed} failed, ${o.duplicates} duplicates`}),o};async function CN(e,t,n,a){if(e.length===0){console.log("No patients to import");return}n&&n({current:0,total:e.length,phase:"bulk-insert",message:`Inserting ${e.length} patients in batches...`}),console.log(`Bulk inserting ${e.length} patients in batches of ${a}...`);for(let r=0;r<e.length;r+=a){const s=e.slice(r,r+a),o=Math.floor(r/a)+1,i=Math.ceil(e.length/a);console.log(`Processing batch ${o}/${i} (${s.length} patients)...`),n&&n({current:r,total:e.length,phase:"bulk-insert",message:`Inserting batch ${o}/${i}: ${r+1}-${Math.min(r+a,e.length)} of ${e.length}...`});try{const{data:c,error:A}=await uve(s);A?(console.error(`Batch ${o} failed:`,A),t.failed+=s.length,t.errors.push(...s.map((d,f)=>({patientData:d,error:A.message||"Failed to bulk create patients",row:r+f+1})))):(t.successful+=c.successful||0,t.failed+=c.failed||0,c.patients&&t.patients.push(...c.patients),c.errors&&c.errors.length>0&&t.errors.push(...c.errors.map((d,f)=>({...d,row:r+f+1})))),r+a<e.length&&await new Promise(d=>setTimeout(d,50))}catch(c){console.error(`Batch ${o} error:`,c),t.failed+=s.length,t.errors.push(...s.map((A,d)=>({patientData:A,error:c.message||"Failed to process batch",row:r+d+1})))}s.length=0}console.log(`Bulk insert completed: ${t.successful} successful, ${t.failed} failed`)}const x8e=async(e,t)=>{const n=e.filter(a=>a.importID&&a.importID.trim()!=="");if(n.length===0)return console.log("No patients with importID found, proceeding with all patients"),{newPatients:e,duplicates:[]};try{console.log(`Checking for duplicates: ${n.length} patients with importID from ${t}`);const{default:a}=await Tr(async()=>{const{default:c}=await Promise.resolve().then(()=>hM);return{default:c}},void 0,import.meta.url),r=1e3,s=new Set;for(let c=0;c<n.length;c+=r){const d=n.slice(c,c+r).map(f=>f.importID);try{const f=await a.post("/patient/check-duplicates",{importIDs:d,importSource:t});if(f.data&&f.data.success){const m=f.data.data.existingImportIDs||[];m.forEach(v=>s.add(v)),console.log(`Batch ${Math.floor(c/r)+1}: Found ${m.length} duplicates`)}}catch(f){console.warn("Duplicate check batch failed, continuing with other batches:",f.message)}}console.log(`Found ${s.size} total existing patients with matching importIDs`);const o=[],i=[];return e.forEach((c,A)=>{c.importID&&c.importID.trim()!==""&&s.has(c.importID)?i.push({row:A+1,importID:c.importID,originalData:c}):o.push(c)}),console.log(`Duplicate check results: ${o.length} new patients, ${i.length} duplicates`),{newPatients:o,duplicates:i}}catch(a){return console.warn("Duplicate check failed, proceeding with all patients:",a.message),{newPatients:e,duplicates:[]}}},C8e=e=>(console.log("DEBUG validatePatientData - Input data:",JSON.stringify(e,null,2)),!e.name||e.name.trim()===""?"Patient name is required":!e.contact_number||e.contact_number.trim()===""?"Contact number is required":(console.log(`DEBUG validatePatientData - Before modification - Age: ${JSON.stringify(e.age)}, Gender: ${JSON.stringify(e.gender)}`),!e.age&&e.age!=="0"&&(e.age=""),e.gender||(e.gender=""),console.log(`DEBUG validatePatientData - After modification - Age: ${JSON.stringify(e.age)}, Gender: ${JSON.stringify(e.gender)}`),null)),Q9=async(e,t)=>{try{if(console.log("saveImportFile called with:",{fileName:e?.name,fileSize:e?.size,fileType:e?.type,emrSystem:t}),!t)throw new Error("EMR system is required");const n=new FormData;n.append("importFile",e,e.name),console.log("FormData contents:");for(let o of n.entries())console.log(o[0],o[1]);const a={emrSystem:t};console.log("Query params:",a);const{default:r}=await Tr(async()=>{const{default:o}=await Promise.resolve().then(()=>hM);return{default:o}},void 0,import.meta.url),s=await r.post("/upload/save-import",n,{params:a,headers:{"Content-Type":"multipart/form-data"}});if(s.data&&s.data.success)return{success:!0,filePath:s.data.data.filePath,fileName:s.data.data.fileName};throw new Error(s.data?.error||"Failed to save file")}catch(n){return console.error("Error saving import file:",n),console.error("Error response:",n.response?.data),{success:!1,error:n.response?.data?.error||n.message||"Failed to save import file"}}},G9=e=>{if(e===0)return"0 Bytes";const t=1024,n=["Bytes","KB","MB","GB"],a=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,a)).toFixed(2))+" "+n[a]},z9=e=>{const t=e*.1,n=e*.01,a=t+n+2;return a<60?`~${Math.ceil(a)} seconds`:a<3600?`~${Math.ceil(a/60)} minutes`:`~${Math.ceil(a/3600)} hours`},S8e=Object.freeze(Object.defineProperty({__proto__:null,estimateImportTime:z9,getFileSizeString:G9,processImportFile:$9,readImportFile:H9,saveImportFile:Q9,validateFileHeaders:O9,validateImportFile:zE},Symbol.toStringTag,{value:"Module"})),r4={patients:{tableName:"patients",displayName:"Patient Records",columns:[{dbField:"name",exportName:"Name"},{dbField:"age",exportName:"Age"},{dbField:"gender",exportName:"Gender"},{dbField:"contactNumber",exportName:"Contact Number"},{dbField:"email",exportName:"Email Address"},{dbField:"address",exportName:"Address"},{dbField:"note",exportName:"Notes"},{dbField:"importID",exportName:"Import ID"},{dbField:"importSource",exportName:"Import Source"},{dbField:"isImported",exportName:"Is Imported"}]},medicines:{tableName:"medicines",displayName:"Medicines",columns:[{dbField:"productName",exportName:"Product Name"},{dbField:"marketer",exportName:"Marketer"},{dbField:"saltComposition",exportName:"Salt Composition"},{dbField:"productForm",exportName:"Product Form"}]}},E8e=e=>r4[e]?.columns||[],B8e=async e=>{try{const t={success:!1,data:{},summary:{totalRecords:0,dataTypes:[],dateRange:null},filePath:null,error:null};if(!e.dataTypes||!Object.values(e.dataTypes).some(a=>a))throw new Error("No data types selected for export");const n=Object.keys(e.dataTypes).filter(a=>e.dataTypes[a]);console.log("Selected data types for export:",n);for(const a of n){const r=await k8e(a,e);t.data[a]=r,t.summary.totalRecords+=r.length,t.summary.dataTypes.push({type:a,count:r.length,displayName:r4[a]?.displayName||a})}return(e.dateFrom||e.dateTo)&&(t.summary.dateRange={from:e.dateFrom||"Beginning",to:e.dateTo||"Now"}),t.success=!0,t}catch(t){return console.error("Export error:",t),{success:!1,data:{},summary:{totalRecords:0,dataTypes:[],dateRange:null},filePath:null,error:t.message}}},k8e=async(e,t)=>{try{console.log(`Fetching ${e} data for export...`);let n;if(e==="patients"){n=await At.get("/patient/patients",{params:{dateFrom:t.dateFrom,dateTo:t.dateTo,exportAll:!0}});const a=n.data?.data?.patients||n.data?.patients||[];return console.log(`Found ${a.length} patients for export`),a}else if(e==="medicines")try{n=await At.get("/medicine/all",{params:{dateFrom:t.dateFrom,dateTo:t.dateTo,exportAll:!0}});const a=n.data?.data?.medicines||n.data?.medicines||[];return console.log(`Found ${a.length} medicines for export`),a}catch(a){return console.warn("Medicine export endpoint not available yet:",a.message),[]}else throw new Error(`Unknown data type: ${e}`)}catch(n){if(console.error(`Error fetching ${e} data:`,n),n.response?.status===404)return console.warn(`API endpoint for ${e} export not implemented yet. Returning empty array.`),[];throw n}},T8e=e=>{try{const t=[];return Object.keys(e.data).forEach(n=>{const a=e.data[n],r=E8e(n);if(a.length===0)return;t.push(`
--- ${r4[n]?.displayName||n} ---`);const s=r.map(o=>o.exportName);t.push(s.join(",")),a.forEach(o=>{const i=r.map(c=>{const A=o[c.dbField];if(A==null)return"";const d=String(A);return d.includes(",")||d.includes('"')||d.includes(`
`)?`"${d.replace(/"/g,'""')}"`:d});t.push(i.join(","))}),t.push("")}),t.join(`
`)}catch(t){throw console.error("Error generating CSV:",t),t}},I8e=()=>{try{const e=["id","name","phone_number","age","gender","date_of_birth","address","email"],t=[{id:"P001",name:"Rajesh Kumar",phone_number:"9876543210",age:"35",gender:"Male",date_of_birth:"1989-05-15",address:"123 Main Street, Mumbai, Maharashtra",email:"rajesh.kumar@example.com"},{id:"P002",name:"Priya Sharma",phone_number:"9876543211",age:"28",gender:"Female",date_of_birth:"1996-08-22",address:"456 Park Avenue, Delhi",email:"priya.sharma@example.com"},{id:"P003",name:"Amit Patel",phone_number:"9876543212",age:"42",gender:"Male",date_of_birth:"1982-03-10",address:"789 MG Road, Bangalore, Karnataka",email:"amit.patel@example.com"},{id:"P004",name:"Sneha Reddy",phone_number:"9876543213",age:"31",gender:"Female",date_of_birth:"1993-11-05",address:"321 Church Street, Hyderabad, Telangana",email:"sneha.reddy@example.com"},{id:"P005",name:"Vikram Singh",phone_number:"9876543214",age:"45",gender:"Male",date_of_birth:"1979-07-18",address:"654 Nehru Road, Pune, Maharashtra",email:"vikram.singh@example.com"},{id:"P006",name:"Anjali Desai",phone_number:"9876543215",age:"29",gender:"Female",date_of_birth:"1995-12-30",address:"987 Gandhi Nagar, Ahmedabad, Gujarat",email:"anjali.desai@example.com"}],n=[];return n.push(e.join(",")),t.forEach(a=>{const r=e.map(s=>{const o=a[s]||"";if(o==null||o==="")return"";const i=String(o);return i.includes(",")||i.includes('"')||i.includes(`
`)?`"${i.replace(/"/g,'""')}"`:i});n.push(r.join(","))}),n.join(`
`)}catch(e){throw console.error("Error generating Evamed template:",e),e}},F8e=async()=>{try{const e=I8e(),t="evamed_template.csv",n=new Blob([e],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const a=await window.electronAPI.showSaveDialog({defaultPath:t,filters:[{name:"CSV Files",extensions:["csv"]}]});return!a.canceled&&a.filePath?(await window.electronAPI.writeFile(a.filePath,e),{success:!0,filePath:a.filePath,filename:t}):{success:!1,error:"Save canceled by user"}}else{const a=document.createElement("a"),r=URL.createObjectURL(n);return a.setAttribute("href",r),a.setAttribute("download",t),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r),{success:!0,filePath:`Downloaded: ${t}`,filename:t}}}catch(e){return console.error("Error downloading Evamed template:",e),{success:!1,error:e.message}}},P8e=async(e,t)=>{try{const n=new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5),r=`evamed_export_${t.dataTypes.map(o=>o.type).join("_")}_${n}.csv`,s=new Blob([e],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const o=await window.electronAPI.showSaveDialog({defaultPath:r,filters:[{name:"CSV Files",extensions:["csv"]}]});return!o.canceled&&o.filePath?(await window.electronAPI.writeFile(o.filePath,e),{success:!0,filePath:o.filePath,filename:r}):{success:!1,error:"Save canceled by user"}}else{const o=document.createElement("a"),i=URL.createObjectURL(s);return o.setAttribute("href",i),o.setAttribute("download",r),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i),{success:!0,filePath:`Downloaded: ${r}`,filename:r}}}catch(n){return console.error("Error saving export file:",n),{success:!1,error:n.message}}},D8e={class:"filter-container pa-3",style:{flex:"1 1 auto","overflow-y":"auto"}},U8e={class:"filter-field mb-3"},R8e={class:"text-caption"},N8e={class:"filter-field mb-3"},V8e={class:"d-flex justify-center mt-4 mb-2"},L8e={key:1,class:"d-flex justify-center"},M8e={__name:"ImportFilter",props:{filters:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},emits:["filter-change","start-import","clear-filters","template-downloaded"],setup(e,{emit:t}){const n=e,a=t,r=V({selectedEMR:n.filters.selectedEMR||"",selectedDataType:n.filters.selectedDataType||"patients",importFile:n.filters.importFile||null}),s=V({isValidating:!1,isValid:null,error:null,fileData:null}),o=V(!1),i=V([...AH]),c=V([...fH,{name:"Appointments",value:"appointments",disabled:!0},{name:"Treatments",value:"treatments",disabled:!0},{name:"Billing Records",value:"billing",disabled:!0}]),A=ne(()=>n.loading),d=ne(()=>r.value.selectedEMR!==""),f=ne(()=>r.value.selectedEMR&&r.value.selectedDataType&&r.value.importFile&&s.value.isValid===!0&&!s.value.isValidating&&!A.value),m=ne(()=>r.value.selectedEMR||r.value.importFile),v=ne(()=>r.value.selectedEMR?s.value.isValidating?"Validating file structure...":s.value.error?`Error: ${s.value.error}`:s.value.isValid&&s.value.fileData?`Valid file: ${s.value.fileData.totalRows} patient records found`:"Supported formats: CSV, Excel":"Please select an EMR system first"),p=async D=>{console.log("File selected, starting validation...",D),s.value={isValidating:!1,isValid:null,error:null,fileData:null};const k=r.value.importFile;console.log("Files from v-model:",k);let S=null;if(k&&(Array.isArray(k)?S=k.length>0?k[0]:null:k instanceof File&&(S=k)),S){console.log("File selected:",S.name,`(${G9(S.size)})`);const E=g(S);if(E.error){console.error("Basic validation failed:",E.error),s.value.error=E.error,s.value.isValid=!1,y();return}if(console.log("Basic validation passed"),r.value.selectedEMR&&xN(r.value.selectedEMR)){console.log("Starting file structure validation for EMR:",r.value.selectedEMR),s.value.isValidating=!0;try{const C=await zE(S,r.value.selectedEMR);console.log("File validation result:",C),s.value.isValid=C.isValid,s.value.error=C.error,s.value.fileData=C.fileData,C.isValid?console.log(` File validated successfully: ${C.fileData.totalRows} rows found`):console.warn(" File validation failed:",C.error)}catch(C){console.error("File validation error:",C),s.value.isValid=!1,s.value.error=`Validation error: ${C.message}`}s.value.isValidating=!1}else console.log("EMR system not selected or not supported, skipping structure validation"),s.value.isValid=!0}else console.log("No file found");y()},g=D=>{if(D.size>52428800)return{error:"File size exceeds 50MB limit"};const S=[".csv",".xlsx",".xls"],E="."+D.name.split(".").pop().toLowerCase();return S.includes(E)?D.size===0?{error:"File is empty"}:{error:null}:{error:"Unsupported file type. Please use CSV or Excel files."}},y=()=>{a("filter-change",{...r.value})},w=()=>{a("start-import",{...r.value})},b=()=>{r.value={selectedEMR:"",selectedDataType:"patients",importFile:null},s.value={isValidating:!1,isValid:null,error:null,fileData:null},a("clear-filters"),y()},x=async()=>{try{o.value=!0;const D=await F8e();D.success?a("template-downloaded",{success:!0,filename:D.filename}):a("template-downloaded",{success:!1,error:D.error})}catch(D){console.error("Error downloading template:",D),a("template-downloaded",{success:!1,error:D.message})}finally{o.value=!1}},T=V({});return je(()=>n.filters,D=>{Object.keys(D).some(S=>D[S]!==T.value[S])&&(r.value={...r.value,...D},T.value={...D})},{immediate:!0}),je(()=>r.value.selectedEMR,async(D,k)=>{if(D!==k){if(s.value={isValidating:!1,isValid:null,error:null,fileData:null},r.value.importFile&&D&&xN(D)){s.value.isValidating=!0;try{const S=await zE(r.value.importFile[0],D);s.value.isValid=S.isValid,s.value.error=S.error,s.value.fileData=S.fileData}catch(S){s.value.isValid=!1,s.value.error=`Validation error: ${S.message}`}s.value.isValidating=!1}y()}}),(D,k)=>{const S=I("v-card-text"),E=I("v-card"),C=I("v-select"),U=I("v-icon"),F=I("v-alert"),L=I("v-chip"),H=I("v-list-item"),ue=I("v-file-input"),ie=I("v-btn");return R(),ve(E,{color:"surfaceContainer",flat:"",style:{height:"100%",display:"flex","flex-direction":"column"}},{default:u(()=>[l(E,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(S,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...k[3]||(k[3]=[h("span",{class:"text-body-2 font-weight-medium"},"Import Configuration",-1)])]),_:1})]),_:1}),h("div",D8e,[h("div",U8e,[l(C,{modelValue:r.value.selectedEMR,"onUpdate:modelValue":[k[0]||(k[0]=Q=>r.value.selectedEMR=Q),y],items:i.value,"item-title":"name","item-value":"value",label:"EMR System",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input"},null,8,["modelValue","items"])]),r.value.selectedEMR==="evamed-custom"?(R(),ve(F,{key:0,type:"info",variant:"tonal",class:"mb-3",border:"start",density:"compact"},{prepend:u(()=>[l(U,{size:"small",color:"primary"},{default:u(()=>[...k[4]||(k[4]=[O("mdi-alert-circle",-1)])]),_:1})]),default:u(()=>[h("div",R8e,[k[5]||(k[5]=O(" Important - please ",-1)),h("a",{href:"#",onClick:vn(x,["prevent"]),class:ct(["template-download-link",{"template-download-link-disabled":o.value}])}," click here ",2),k[6]||(k[6]=O(" to download the blank custom template. Add your information and then import below. ",-1))])]),_:1})):ye("",!0),h("div",N8e,[l(C,{modelValue:r.value.selectedDataType,"onUpdate:modelValue":k[1]||(k[1]=Q=>r.value.selectedDataType=Q),items:c.value,"item-title":"name","item-value":"value",label:"Data Type",density:"compact",variant:"outlined",disabled:!0,"hide-details":"auto",class:"filter-input"},{item:u(({props:Q,item:X})=>[l(H,Pe(Q,{disabled:X.raw.disabled}),Ev({_:2},[X.raw.disabled?{name:"append",fn:u(()=>[l(L,{size:"x-small",color:"grey"},{default:u(()=>[...k[7]||(k[7]=[O("Coming Soon",-1)])]),_:1})]),key:"0"}:void 0]),1040,["disabled"])]),_:1},8,["modelValue","items"]),k[8]||(k[8]=h("p",{class:"text-caption text-medium-emphasis mt-1 mb-0"},"Currently we support import of patient information only.",-1))]),h("div",{class:ct(["filter-field mb-3",{"opacity-disabled":!d.value}])},[l(ue,{modelValue:r.value.importFile,"onUpdate:modelValue":k[2]||(k[2]=Q=>r.value.importFile=Q),label:"Import File",placeholder:"Select file to import",density:"compact",variant:"outlined",accept:".csv,.xlsx,.xls","show-size":"","hide-details":"auto",class:"filter-input",disabled:!d.value,loading:s.value.isValidating,onChange:p},Ev({_:2},[r.value.importFile&&!s.value.isValidating?{name:"append-inner",fn:u(()=>[s.value.isValid===!0?(R(),ve(U,{key:0,color:"success",size:"small"},{default:u(()=>[...k[9]||(k[9]=[O(" mdi-check-circle ",-1)])]),_:1})):s.value.isValid===!1?(R(),ve(U,{key:1,color:"error",size:"small"},{default:u(()=>[...k[10]||(k[10]=[O(" mdi-alert-circle ",-1)])]),_:1})):ye("",!0)]),key:"0"}:void 0]),1032,["modelValue","disabled","loading"]),h("p",{class:ct(["text-caption mt-1 mb-0",{"text-success":s.value.isValid===!0,"text-error":s.value.isValid===!1,"text-medium-emphasis":s.value.isValid===null}])},K(v.value),3)],2),h("div",V8e,[l(ie,{color:"primary",size:"small","prepend-icon":"mdi-upload",onClick:w,disabled:!f.value,loading:A.value,class:"filter-button"},{default:u(()=>[...k[11]||(k[11]=[O(" Start Import ",-1)])]),_:1},8,["disabled","loading"])]),m.value?(R(),Ae("div",L8e,[l(ie,{variant:"text",size:"small","prepend-icon":"mdi-filter-remove",onClick:b,class:"filter-button-clear"},{default:u(()=>[...k[12]||(k[12]=[O(" Clear ",-1)])]),_:1})])):ye("",!0)])]),_:1})}}},O8e=qt(M8e,[["__scopeId","data-v-29791cb3"]]),H8e={class:"filter-container pa-3",style:{flex:"1 1 auto","overflow-y":"auto"}},$8e={class:"filter-section mb-3"},Q8e={class:"filter-section mb-3"},G8e={class:"d-flex justify-center mt-4 mb-2"},z8e={key:0,class:"d-flex justify-center"},K8e={__name:"ExportFilter",props:{filters:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},emits:["filter-change","start-export","clear-filters"],setup(e,{emit:t}){const n=e,a=t,r=V({dataTypes:{patients:n.filters.dataTypes?.patients!==void 0?n.filters.dataTypes.patients:!0,medicines:n.filters.dataTypes?.medicines!==void 0?n.filters.dataTypes.medicines:!1},dateFrom:n.filters.dateFrom||"",dateTo:n.filters.dateTo||""}),s=V(n.filters.dataTypes?.patients?"patients":n.filters.dataTypes?.medicines?"medicines":"patients"),o=ne(()=>n.loading),i=ne(()=>new Date().toISOString().split("T")[0]),c=ne(()=>!o.value&&A.value),A=ne(()=>s.value!==null&&s.value!==""),d=ne(()=>r.value.dateFrom||r.value.dateTo||s.value!=="patients"),f=g=>{r.value.dataTypes={patients:!1,medicines:!1},g&&(r.value.dataTypes[g]=!0),m()},m=()=>{a("filter-change",{...r.value})},v=()=>{a("start-export",{...r.value})},p=()=>{s.value="patients",r.value={dataTypes:{patients:!0,medicines:!1},dateFrom:"",dateTo:""},a("clear-filters"),m()};return je(()=>n.filters,g=>{r.value={...r.value,...g},g.dataTypes&&(s.value=g.dataTypes.patients?"patients":g.dataTypes.medicines?"medicines":"patients")},{deep:!0}),f(s.value),(g,y)=>{const w=I("v-card-text"),b=I("v-card"),x=I("v-radio"),T=I("v-radio-group"),D=I("v-text-field"),k=I("v-btn");return R(),ve(b,{color:"surfaceContainer",flat:"",style:{height:"100%",display:"flex","flex-direction":"column"}},{default:u(()=>[l(b,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(w,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...y[3]||(y[3]=[h("span",{class:"text-body-2 font-weight-medium"},"Export Configuration",-1)])]),_:1})]),_:1}),h("div",H8e,[h("div",$8e,[y[4]||(y[4]=h("div",{class:"filter-section-label mb-2"},"Data Type",-1)),l(T,{modelValue:s.value,"onUpdate:modelValue":[y[0]||(y[0]=S=>s.value=S),f],"hide-details":"",density:"compact"},{default:u(()=>[l(x,{value:"patients",label:"Patient Records",density:"compact"}),l(x,{value:"medicines",label:"Medicines",density:"compact"})]),_:1},8,["modelValue"])]),h("div",Q8e,[y[5]||(y[5]=h("div",{class:"filter-section-label mb-2"},"Date Range (Optional)",-1)),l(D,{modelValue:r.value.dateFrom,"onUpdate:modelValue":[y[1]||(y[1]=S=>r.value.dateFrom=S),m],label:"From Date",type:"date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input mb-2",max:r.value.dateTo||i.value},null,8,["modelValue","max"]),l(D,{modelValue:r.value.dateTo,"onUpdate:modelValue":[y[2]||(y[2]=S=>r.value.dateTo=S),m],label:"To Date",type:"date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input",min:r.value.dateFrom,max:i.value},null,8,["modelValue","min","max"])]),h("div",G8e,[l(k,{disabled:!c.value,loading:o.value,color:"primary",size:"small","prepend-icon":"mdi-download",onClick:v,class:"filter-button"},{default:u(()=>[...y[6]||(y[6]=[O(" Start Export ",-1)])]),_:1},8,["disabled","loading"])]),d.value?(R(),Ae("div",z8e,[l(k,{variant:"text",size:"small","prepend-icon":"mdi-filter-remove",onClick:p,class:"filter-button-clear"},{default:u(()=>[...y[7]||(y[7]=[O(" Clear ",-1)])]),_:1})])):ye("",!0)])]),_:1})}}},W8e=qt(K8e,[["__scopeId","data-v-19977106"]]),j8e={class:"scrollable-content"},q8e={class:"scrollable-content"},Y8e={key:1},X8e={class:"text-center"},J8e={class:"mt-4 text-subtitle-1"},Z8e={class:"text-center"},e6e={class:"scrollable-content"},t6e={class:"scrollable-content"},n6e={key:1},a6e={class:"text-center"},r6e={class:"mt-4 text-subtitle-1"},s6e={key:0,class:"mt-4"},o6e={class:"mb-2"},i6e={class:"mb-2"},l6e={key:0,class:"mb-2"},u6e={key:1},c6e={class:"text-center"},d6e={class:"mb-4"},A6e={class:"mb-4"},f6e={class:"text-caption"},m6e={key:0,class:"mb-4"},v6e={class:"mt-2"},h6e={key:1},p6e={__name:"data-page",setup(e){const t=V(0);Gf();const n=V(null),a=V(!1),r=V(""),s=V(!1),o=V(""),i=V(!1),c=V(null),A=V(!1),d=V(0),f=V(""),m=V([]),v=V([]),p=V({selectedEMR:"",selectedDataType:"patients",importFile:null}),g=V(!1),y=V(0),w=V(""),b=V([]),x=V(null),T=V(!1),D=V({dataTypes:{patients:!0,medicines:!1},dateFrom:"",dateTo:""}),k=V([{title:"Data Type",key:"type",sortable:!0},{title:"Import Source",key:"importSource",sortable:!0},{title:"Records Processed",key:"processed",sortable:!0},{title:"Records Imported",key:"imported",sortable:!0},{title:"Duplicates Skipped",key:"duplicates",sortable:!0},{title:"With Import ID",key:"withImportID",sortable:!0},{title:"Errors",key:"errors",sortable:!0},{title:"Status",key:"status",sortable:!0}]),S=V([{title:"Date",key:"date",sortable:!0},{title:"Format",key:"format",sortable:!0},{title:"Data Types",key:"dataTypes",sortable:!0},{title:"Records",key:"recordCount",sortable:!0},{title:"Status",key:"status",sortable:!0},{title:"Actions",key:"actions",sortable:!1}]),E=V([{title:"Row",key:"row",sortable:!0,width:"80px"},{title:"Patient Data",key:"patientData",sortable:!1},{title:"Error",key:"error",sortable:!1},{title:"Actions",key:"actions",sortable:!1,width:"100px"}]),C=V([{title:"IMPORT",disabled:!1},{title:"EXPORT",disabled:!1}]),U=re=>{p.value={...p.value,...re}},F=re=>{D.value={...D.value,...re}},L=()=>{p.value={selectedEMR:"",selectedDataType:"patients",importFile:null}},H=re=>{re.success?(a.value=!0,r.value=`Evamed template downloaded successfully: ${re.filename}`):(s.value=!0,o.value=`Failed to download template: ${re.error}`)},ue=()=>{D.value={dataTypes:{patients:!0,medicines:!1},dateFrom:"",dateTo:""}},ie=async re=>{try{if(A.value=!0,d.value=0,f.value="Initializing import...",m.value=[],v.value=[],console.log("Starting import with filters:",re),!re.importFile)throw new Error("No file selected for import");if(!re.selectedEMR)throw new Error("No EMR system selected");let q;if(Array.isArray(re.importFile))q=re.importFile[0];else if(re.importFile instanceof File)q=re.importFile;else throw new Error("Invalid file format");if(!q)throw new Error("No valid file found");const P=re.selectedEMR;if(console.log("Processing file:",q.name,"for EMR:",P),console.log("Full filterData:",re),!P||P.trim()==="")throw new Error("EMR system is required and cannot be empty");f.value="Saving import file...";const G=await Q9(q,P);if(!G.success)throw new Error(`Failed to save import file: ${G.error}`);d.value=10,console.log(`Import file saved: ${G.fileName}`),f.value="Reading and validating file...";const{readImportFile:J,validateFileHeaders:M}=await Tr(async()=>{const{readImportFile:ce,validateFileHeaders:de}=await Promise.resolve().then(()=>S8e);return{readImportFile:ce,validateFileHeaders:de}},void 0,import.meta.url);let te;try{te=await J(q,P)}catch(ce){throw new Error(`Failed to read file: ${ce.message}`)}const Y=M(te.headers,P);if(!Y.isValid)throw new Error(`File validation failed: ${Y.error}`);d.value=20;const W=z9(te.totalRows);f.value=`Processing ${te.totalRows} patient records (${W})...`;const ee=await $9(te,P,ce=>{if(ce.phase==="mapping")d.value=20+ce.current/ce.total*30,f.value=`Mapping data: ${ce.current} of ${ce.total}`,ce.currentPatient&&(f.value+=` (${ce.currentPatient})`);else if(ce.phase==="duplicate-check")d.value=50+ce.current/ce.total*10,f.value=ce.message||"Checking for existing patients...";else if(ce.phase==="bulk-insert")d.value=60+ce.current/ce.total*30,f.value=ce.message||"Bulk inserting patients...";else if(ce.phase==="complete"&&(d.value=90+ce.current/ce.total*10,f.value=ce.message||"Import completed!",ce.successful>0||ce.failed>0||ce.duplicates>0)){const de=[];ce.successful>0&&de.push(`Success: ${ce.successful}`),ce.failed>0&&de.push(`Failed: ${ce.failed}`),ce.duplicates>0&&de.push(`Duplicates: ${ce.duplicates}`),f.value+=` - ${de.join(", ")}`}ce.lastError&&ce.failed>0&&console.warn("Import error:",ce.lastError)});v.value=ee.errors||[];const ae=ee.patients?ee.patients.filter(ce=>ce.importID&&ce.importID.trim()!=="").length:0;d.value=100,A.value=!1;const oe=P==="practo"?"Practo":P==="ekacare"?"Eka.Care":P==="healthplix"?"Healthplix":P==="evamed-custom"?"Evamed Custom Template":P==="tatvacare"?"TatvaCare":P;m.value=[{type:"Patient Records",importSource:oe,processed:ee.total,imported:ee.successful,duplicates:ee.duplicates||0,withImportID:ae,errors:ee.failed,status:ee.failed===0?"Success":"Partial Success"}];const j=ee.duplicates||0;if(ee.failed===0&&j===0)f.value=`${oe} import completed successfully! ${ee.successful} patients imported.`,a.value=!0,r.value=`Successfully imported ${ee.successful} patients from ${oe}!`;else if(ee.failed===0&&j>0)f.value=`${oe} import completed successfully! ${ee.successful} patients imported, ${j} duplicates skipped.`,a.value=!0,r.value=`Successfully imported ${ee.successful} patients from ${oe} (${j} duplicates skipped)!`;else{const ce=j>0?`, ${j} duplicates skipped`:"";f.value=`${oe} import completed with ${ee.failed} errors. ${ee.successful} patients imported successfully${ce}.`,s.value=!0,o.value=`${oe} import completed with ${ee.failed} errors out of ${ee.total} records${ce}.`}console.log("Import Results:",ee),ee.errors.length>0&&console.log("Import Errors:",ee.errors)}catch(q){console.error("Import error:",q),A.value=!1,d.value=0,s.value=!0,o.value="Import failed: "+q.message,f.value=`Import failed: ${q.message}`}},Q=async re=>{try{g.value=!0,y.value=0,w.value="Preparing export...",x.value=null,T.value=!1,console.log("Starting export with filters:",re),y.value=10,w.value="Collecting data...";const q=await B8e(re);if(!q.success)throw new Error(q.error||"Failed to collect export data");y.value=50,w.value=`Found ${q.summary.totalRecords} records. Formatting data...`;const P=T8e(q);y.value=80,w.value="Preparing file for download...";const G=await P8e(P,q.summary);if(!G.success)throw new Error(G.error||"Failed to save export file");y.value=100,w.value="Export completed successfully!",x.value={...q.summary,filePath:G.filePath,filename:G.filename},T.value=!0;const J={id:Date.now().toString(),date:new Date().toLocaleDateString(),format:"CSV",dataTypes:q.summary.dataTypes.map(M=>M.displayName).join(", "),recordCount:q.summary.totalRecords,status:"Completed",filePath:G.filePath,filename:G.filename};b.value.unshift(J),a.value=!0,r.value=`Export completed! ${q.summary.totalRecords} records exported.`}catch(q){console.error("Export error:",q),g.value=!1,y.value=0,w.value="",T.value=!1,s.value=!0,o.value="Export failed: "+q.message}finally{setTimeout(()=>{T.value&&(g.value=!1)},1500)}},X=re=>{console.log("Opening export:",re),window.require.electronAPI&&re.filePath&&window.require.electronAPI.showItemInFolder(re.filePath),a.value=!0,r.value=`Opened ${re.format} export location`},le=re=>{if(!re||!Array.isArray(re))return"No data available";const q=re[0]||"Unknown",P=re[3]||re[1]||"No contact";return`${q} (${P})`},Z=re=>{let q=null;re.mappedData&&(q={source:re.mappedData.importSource||"Unknown",importID:re.mappedData.importID||null}),c.value={row:re.row,patientData:re.patientData,error:re.error,formattedData:le(re.patientData),importInfo:q},i.value=!0};return dn(()=>{try{console.log("Data page initialized")}catch(re){console.error("Error setting up data page:",re),n.value="Failed to initialize data page"}}),(re,q)=>{const P=I("v-alert"),G=I("v-tab"),J=I("v-tabs"),M=I("v-card"),te=I("v-col"),Y=I("v-row"),W=I("v-card-text"),ee=I("v-progress-circular"),ae=I("v-data-table"),oe=I("v-icon"),j=I("v-expansion-panel-title"),ce=I("v-chip"),de=I("v-btn"),_e=I("v-expansion-panel-text"),Re=I("v-expansion-panel"),be=I("v-expansion-panels"),Ee=I("v-window-item"),Ce=I("v-card-title"),Be=I("v-window"),Te=I("v-snackbar"),Oe=I("v-spacer"),Me=I("v-card-actions"),rt=I("v-dialog"),ut=I("v-main");return R(),ve(ut,null,{default:u(()=>[l(En,{feature:"data"},{default:u(()=>[n.value?(R(),ve(P,{key:0,type:"error",dismissible:"","onClick:close":q[0]||(q[0]=Ie=>n.value=null),class:"ma-3"},{default:u(()=>[O(K(n.value),1)]),_:1})):ye("",!0),l(Y,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[l(te,{cols:"12"},{default:u(()=>[l(M,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center"},{default:u(()=>[l(J,{modelValue:t.value,"onUpdate:modelValue":q[1]||(q[1]=Ie=>t.value=Ie),color:"primary","align-tabs":"start",class:"w-100"},{default:u(()=>[(R(!0),Ae(Ke,null,Gt(C.value,(Ie,Ue)=>(R(),ve(G,{key:Ue,value:Ue,disabled:Ie.disabled},{default:u(()=>[O(K(Ie.title),1)]),_:2},1032,["value","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(Be,{modelValue:t.value,"onUpdate:modelValue":q[2]||(q[2]=Ie=>t.value=Ie),class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[l(Ee,{value:0,style:{height:"100%"}},{default:u(()=>[l(En,{permission:"data.import"},{default:u(()=>[l(Y,{"aria-label":"import row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[l(te,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[h("div",j8e,[l(O8e,{filters:p.value,loading:A.value,onFilterChange:U,onStartImport:ie,onClearFilters:L,onTemplateDownloaded:H},null,8,["filters","loading"])])]),_:1}),l(te,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[h("div",q8e,[l(M,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[l(M,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(W,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[m.value.length>0?(R(),Ae(Ke,{key:0},[h("strong",null,K(m.value[0]?.imported||0),1),q[7]||(q[7]=O(" records imported ",-1))],64)):(R(),Ae("strong",Y8e,"Import Data"))]),_:1})]),_:1}),A.value?(R(),ve(Y,{key:0,"no-gutters":""},{default:u(()=>[l(te,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[h("div",X8e,[l(ee,{indeterminate:"",color:"primary",size:"64"}),h("div",J8e,K(f.value||"Processing import..."),1)])]),_:1})]),_:1})):m.value.length>0?(R(),ve(Y,{key:1,"no-gutters":""},{default:u(()=>[l(te,{cols:"12",class:"scroll-element mt-2",style:{"padding-bottom":"20px"}},{default:u(()=>[l(ae,{headers:k.value,items:m.value,class:"elevation-1 ma-2",density:"comfortable"},null,8,["headers","items"]),v.value.length>0?(R(),ve(be,{key:0,class:"ma-2"},{default:u(()=>[l(Re,null,{default:u(()=>[l(j,null,{default:u(()=>[l(oe,{color:"error",class:"mr-2"},{default:u(()=>[...q[8]||(q[8]=[O("mdi-alert-circle",-1)])]),_:1}),O(" Failed Records ("+K(v.value.length)+") ",1)]),_:1}),l(_e,null,{default:u(()=>[l(ae,{headers:E.value,items:v.value,class:"elevation-1",density:"comfortable","items-per-page":10,"items-per-page-options":[5,10,25,50]},{"item.patientData":u(({item:Ie})=>[l(ce,{size:"small",color:"grey",variant:"outlined"},{default:u(()=>[O(K(le(Ie.patientData)),1)]),_:2},1024)]),"item.error":u(({item:Ie})=>[l(ce,{size:"small",color:"error",variant:"outlined"},{default:u(()=>[O(K(Ie.error),1)]),_:2},1024)]),"item.actions":u(({item:Ie})=>[l(de,{size:"small",color:"primary",variant:"text",onClick:Ue=>Z(Ie)},{default:u(()=>[l(oe,{size:"small"},{default:u(()=>[...q[9]||(q[9]=[O("mdi-eye",-1)])]),_:1}),q[10]||(q[10]=O(" Details ",-1))]),_:1},8,["onClick"])]),_:2},1032,["headers","items"])]),_:1})]),_:1})]),_:1})):ye("",!0)]),_:1})]),_:1})):(R(),ve(Y,{key:2,"no-gutters":"",style:{height:"calc(100% - 60px)"}},{default:u(()=>[l(te,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%"}},{default:u(()=>[h("div",Z8e,[l(oe,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...q[11]||(q[11]=[O("mdi-cloud-upload",-1)])]),_:1}),q[12]||(q[12]=h("div",{class:"text-h6 mb-2"},"Import Data",-1)),q[13]||(q[13]=h("div",{class:"text-body-2 text-medium-emphasis"},"Select EMR system and file to begin import process",-1))])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1}),l(Ee,{value:1,style:{height:"100%"}},{default:u(()=>[l(En,{permission:"data.export"},{default:u(()=>[l(Y,{"aria-label":"export row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[l(te,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[h("div",e6e,[l(W8e,{filters:D.value,loading:g.value,onFilterChange:F,onStartExport:Q,onClearFilters:ue},null,8,["filters","loading"])])]),_:1}),l(te,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[h("div",t6e,[l(M,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[l(M,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(W,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[b.value.length>0?(R(),Ae(Ke,{key:0},[h("strong",null,K(b.value.length),1),O(" export"+K(b.value.length!==1?"s":"")+" available ",1)],64)):(R(),Ae("strong",n6e,"Export Data"))]),_:1})]),_:1}),g.value?(R(),ve(Y,{key:0,"no-gutters":""},{default:u(()=>[l(te,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[h("div",a6e,[l(ee,{"model-value":y.value,color:"primary",size:"64",width:"6"},{default:u(()=>[O(K(y.value)+"% ",1)]),_:1},8,["model-value"]),h("div",r6e,K(w.value||"Processing export..."),1),x.value?(R(),Ae("div",s6e,[l(M,{class:"mx-auto","max-width":"300",outlined:""},{default:u(()=>[l(Ce,{class:"text-h6"},{default:u(()=>[...q[14]||(q[14]=[O("Export Summary",-1)])]),_:1}),l(W,null,{default:u(()=>[h("div",o6e,[q[15]||(q[15]=h("strong",null,"Total Records:",-1)),O(" "+K(x.value.totalRecords),1)]),h("div",i6e,[q[16]||(q[16]=h("strong",null,"Data Types:",-1)),(R(!0),Ae(Ke,null,Gt(x.value.dataTypes,Ie=>(R(),Ae("div",{key:Ie.type,class:"ml-2"},K(Ie.displayName)+": "+K(Ie.count)+" records ",1))),128))]),x.value.dateRange?(R(),Ae("div",l6e,[q[17]||(q[17]=h("strong",null,"Date Range:",-1)),O(" "+K(x.value.dateRange.from)+" - "+K(x.value.dateRange.to),1)])):ye("",!0),T.value&&x.value.filename?(R(),Ae("div",u6e,[q[18]||(q[18]=h("strong",null,"File:",-1)),O(" "+K(x.value.filename),1)])):ye("",!0)]),_:1})]),_:1})])):ye("",!0)])]),_:1})]),_:1})):b.value.length>0?(R(),ve(Y,{key:1,"no-gutters":""},{default:u(()=>[l(te,{cols:"12",class:"scroll-element mt-2",style:{"padding-bottom":"20px"}},{default:u(()=>[l(ae,{headers:S.value,items:b.value,class:"elevation-1 ma-2",density:"comfortable"},{"item.actions":u(({item:Ie})=>[l(de,{size:"small",color:"primary",variant:"text",onClick:Ue=>X(Ie)},{default:u(()=>[l(oe,null,{default:u(()=>[...q[19]||(q[19]=[O("mdi-download",-1)])]),_:1}),q[20]||(q[20]=O(" Download ",-1))]),_:1},8,["onClick"])]),_:2},1032,["headers","items"])]),_:1})]),_:1})):(R(),ve(Y,{key:2,"no-gutters":"",style:{height:"calc(100% - 60px)"}},{default:u(()=>[l(te,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%"}},{default:u(()=>[h("div",c6e,[l(oe,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...q[21]||(q[21]=[O("mdi-download",-1)])]),_:1}),q[22]||(q[22]=h("div",{class:"text-h6 mb-2"},"Export Data",-1)),q[23]||(q[23]=h("div",{class:"text-body-2 text-medium-emphasis"},"Configure export settings and start export process",-1))])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(Te,{modelValue:a.value,"onUpdate:modelValue":q[3]||(q[3]=Ie=>a.value=Ie),class:"elevation-24",color:"success"},{default:u(()=>[O(K(r.value),1)]),_:1},8,["modelValue"]),l(Te,{modelValue:s.value,"onUpdate:modelValue":q[4]||(q[4]=Ie=>s.value=Ie),class:"elevation-24",color:"error"},{default:u(()=>[O(K(o.value),1)]),_:1},8,["modelValue"]),l(rt,{modelValue:i.value,"onUpdate:modelValue":q[6]||(q[6]=Ie=>i.value=Ie),"max-width":"600px"},{default:u(()=>[l(M,null,{default:u(()=>[l(Ce,{class:"text-h6"},{default:u(()=>[l(oe,{color:"error",class:"mr-2"},{default:u(()=>[...q[24]||(q[24]=[O("mdi-alert-circle",-1)])]),_:1}),O(" Error Details - Row "+K(c.value?.row),1)]),_:1}),l(W,null,{default:u(()=>[l(Y,null,{default:u(()=>[l(te,{cols:"12"},{default:u(()=>[h("div",d6e,[q[25]||(q[25]=h("strong",null,"Error Message:",-1)),l(ce,{color:"error",variant:"outlined",class:"ml-2"},{default:u(()=>[O(K(c.value?.error),1)]),_:1})]),h("div",A6e,[q[26]||(q[26]=h("strong",null,"Patient Data:",-1)),l(M,{variant:"outlined",class:"mt-2 pa-3"},{default:u(()=>[h("pre",f6e,K(JSON.stringify(c.value?.patientData,null,2)),1)]),_:1})]),c.value?.importInfo?(R(),Ae("div",m6e,[q[28]||(q[28]=h("strong",null,"Import Information:",-1)),h("div",v6e,[l(ce,{color:"info",variant:"outlined",class:"mr-2"},{default:u(()=>[O(" Source: "+K(c.value.importInfo.source),1)]),_:1}),c.value.importInfo.importID?(R(),ve(ce,{key:0,color:"secondary",variant:"outlined"},{default:u(()=>[O(" ID: "+K(c.value.importInfo.importID),1)]),_:1})):(R(),ve(ce,{key:1,color:"warning",variant:"outlined"},{default:u(()=>[...q[27]||(q[27]=[O(" No Import ID ",-1)])]),_:1}))])])):ye("",!0),c.value?.formattedData?(R(),Ae("div",h6e,[q[29]||(q[29]=h("strong",null,"Formatted Data:",-1)),l(ce,{color:"primary",variant:"outlined",class:"ml-2"},{default:u(()=>[O(K(c.value.formattedData),1)]),_:1})])):ye("",!0)]),_:1})]),_:1})]),_:1}),l(Me,null,{default:u(()=>[l(Oe),l(de,{color:"primary",onClick:q[5]||(q[5]=Ie=>i.value=!1)},{default:u(()=>[...q[30]||(q[30]=[O(" Close ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}},g6e=qt(p6e,[["__scopeId","data-v-6767bc22"]]),y6e={class:"filter-container pa-3",style:{flex:"1 1 auto","overflow-y":"auto"}},_6e={class:"filter-field mb-3"},w6e={class:"filter-field mb-3"},b6e={key:0,class:"text-caption"},x6e={class:"filter-section mb-3"},C6e={class:"filter-section mb-3"},S6e={class:"d-flex justify-center mt-4 mb-2"},E6e={class:"d-flex justify-center"},B6e={__name:"ResearchFilter",props:{modelValueDiagnosis:{type:String,default:null},modelValueMedicine:{type:String,default:null},modelValueDateFrom:{type:String,default:""},modelValueDateTo:{type:String,default:""},modelValuePatientName:{type:String,default:""},modelValueGender:{type:String,default:""},modelValueAgeGreaterThan:{type:[String,Number],default:""},modelValueAgeLessThan:{type:[String,Number],default:""},maxDate:{type:String,default:()=>Rn()},isSearching:{type:Boolean,default:!1}},emits:["update:modelValueDiagnosis","update:modelValueMedicine","update:modelValueDateFrom","update:modelValueDateTo","update:modelValuePatientName","update:modelValueGender","update:modelValueAgeGreaterThan","update:modelValueAgeLessThan","filter-change","search","clear-filters"],setup(e,{emit:t}){const n=e,a=t,r=V(n.modelValueDiagnosis),s=V(n.modelValueMedicine),o=V(n.modelValueDateFrom),i=V(n.modelValueDateTo),c=V(n.modelValuePatientName),A=V(n.modelValueGender),d=V(n.modelValueAgeGreaterThan),f=V(n.modelValueAgeLessThan),m=V(""),v=V(""),p=V(""),g=V(""),y=V(""),w=V(""),b=V(""),x=V(""),T=V(""),D=V([]),k=V(!1),S=[{title:"Male",value:"Male"},{title:"Female",value:"Female"}],E=ne(()=>!!(m.value||v.value||p.value||g.value||y.value||w.value||b.value||x.value));je(()=>n.modelValueDiagnosis,le=>{r.value=le}),je(()=>n.modelValueMedicine,le=>{s.value=le}),je(()=>n.modelValueDateFrom,le=>{o.value=le}),je(()=>n.modelValueDateTo,le=>{i.value=le}),je(()=>n.modelValuePatientName,le=>{c.value=le}),je(()=>n.modelValueGender,le=>{A.value=le}),je(()=>n.modelValueAgeGreaterThan,le=>{d.value=le}),je(()=>n.modelValueAgeLessThan,le=>{f.value=le}),je(r,le=>{a("update:modelValueDiagnosis",le),U()}),je(s,le=>{a("update:modelValueMedicine",le),U()}),je(o,le=>{a("update:modelValueDateFrom",le),H(),ue(),U()}),je(i,le=>{a("update:modelValueDateTo",le),ue(),H(),U()}),je(c,le=>{a("update:modelValuePatientName",le),U()}),je(A,le=>{a("update:modelValueGender",le),U()}),je(d,le=>{a("update:modelValueAgeGreaterThan",le),ie(),U()}),je(f,le=>{a("update:modelValueAgeLessThan",le),ie(),U()});let C=null;const U=()=>{const le=typeof s.value=="object"&&s.value!==null?s.value.productName:s.value;a("filter-change",{diagnosis:r.value,medicine:le,dateFrom:o.value,dateTo:i.value,patientName:c.value,gender:A.value,ageGreaterThan:d.value,ageLessThan:f.value,hasErrors:E.value})},F=()=>{if(!E.value){const le={diagnosis:r.value,medicine:s.value,dateFrom:o.value,dateTo:i.value,patientName:c.value,gender:A.value,ageGreaterThan:d.value,ageLessThan:f.value};console.log(" ResearchFilter: Starting search with filters"),a("search",le)}},L=()=>{r.value=null,s.value=null,o.value="",i.value="",c.value="",A.value="",d.value="",f.value="",T.value="",m.value="",v.value="",p.value="",g.value="",y.value="",w.value="",b.value="",x.value="",a("clear-filters")},H=()=>{p.value="",o.value&&i.value&&o.value>i.value&&(p.value="From date cannot be after to date")},ue=()=>{g.value="",o.value&&i.value&&i.value<o.value&&(g.value="To date cannot be before from date")},ie=()=>{b.value="",x.value="",d.value&&(isNaN(d.value)||d.value<0)&&(b.value="Please enter a valid age"),f.value&&(isNaN(f.value)||f.value<0)&&(x.value="Please enter a valid age"),d.value&&f.value&&parseInt(d.value)>=parseInt(f.value)&&(b.value='Must be less than "Age less than"',x.value='Must be greater than "Age greater than"')},Q=le=>{clearTimeout(C),C=setTimeout(()=>{X(le)},300)},X=async le=>{k.value=!0;try{const Z=await xT(le);if(Z.error)D.value=[];else{const re=Z.data||[];D.value=re.filter(q=>q.isLocal===!0)}}catch(Z){console.error("Error fetching medicines:",Z),D.value=[]}finally{k.value=!1}};return(le,Z)=>{const re=I("v-card-text"),q=I("v-card"),P=I("v-text-field"),G=I("v-icon"),J=I("v-list-item"),M=I("v-list-item-title"),te=I("v-autocomplete"),Y=I("v-col"),W=I("v-row"),ee=I("v-select"),ae=I("v-btn");return R(),ve(q,{color:"surfaceContainer",flat:"",style:{height:"100%",display:"flex","flex-direction":"column"}},{default:u(()=>[l(q,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(re,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...Z[10]||(Z[10]=[h("span",{class:"text-body-2 font-weight-medium"},"Research Filters",-1)])]),_:1})]),_:1}),h("div",y6e,[h("div",_6e,[l(P,{modelValue:r.value,"onUpdate:modelValue":Z[0]||(Z[0]=oe=>r.value=oe),label:"Diagnosis",placeholder:"Enter diagnosis name...",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":m.value,maxlength:"100"},null,8,["modelValue","error-messages"])]),h("div",w6e,[l(te,{modelValue:s.value,"onUpdate:modelValue":Z[1]||(Z[1]=oe=>s.value=oe),search:T.value,"onUpdate:search":[Z[2]||(Z[2]=oe=>T.value=oe),Q],items:D.value,loading:k.value,"item-title":"productName","item-value":"item","return-object":"",label:"Medicine",placeholder:"Search for medicine...",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":v.value},{item:u(({props:oe,item:j})=>[l(J,Pe(oe,{title:j.raw.productName}),{subtitle:u(()=>[j.raw.marketer?(R(),Ae("span",b6e,K(j.raw.marketer),1)):ye("",!0)]),append:u(()=>[l(G,null,{default:u(()=>[...Z[11]||(Z[11]=[h("img",{src:Wd,alt:"Saved Medicine"},null,-1)])]),_:1})]),_:2},1040,["title"])]),"no-data":u(()=>[T.value&&T.value.length>=3?(R(),ve(J,{key:0},{default:u(()=>[l(M,null,{default:u(()=>[O('No medicines found matching "'+K(T.value)+'"',1)]),_:1})]),_:1})):(R(),ve(J,{key:1},{default:u(()=>[l(M,null,{default:u(()=>[...Z[12]||(Z[12]=[O("Type at least 3 characters to search",-1)])]),_:1})]),_:1}))]),_:1},8,["modelValue","search","items","loading","error-messages"])]),h("div",x6e,[Z[13]||(Z[13]=h("div",{class:"filter-section-label mb-2"},"Date Range",-1)),l(W,{dense:""},{default:u(()=>[l(Y,{cols:"6"},{default:u(()=>[l(P,{modelValue:o.value,"onUpdate:modelValue":Z[3]||(Z[3]=oe=>o.value=oe),type:"date",label:"From Date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input date-input",max:i.value||e.maxDate,"error-messages":p.value,onInput:H,onClick:Z[4]||(Z[4]=oe=>oe.target.showPicker&&oe.target.showPicker())},null,8,["modelValue","max","error-messages"])]),_:1}),l(Y,{cols:"6"},{default:u(()=>[l(P,{modelValue:i.value,"onUpdate:modelValue":Z[5]||(Z[5]=oe=>i.value=oe),type:"date",label:"To Date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input date-input",min:o.value,max:e.maxDate,"error-messages":g.value,onInput:ue,onClick:Z[6]||(Z[6]=oe=>oe.target.showPicker&&oe.target.showPicker())},null,8,["modelValue","min","max","error-messages"])]),_:1})]),_:1})]),h("div",C6e,[Z[14]||(Z[14]=h("div",{class:"filter-section-label mb-2"},"Demographics",-1)),l(ee,{modelValue:A.value,"onUpdate:modelValue":Z[7]||(Z[7]=oe=>A.value=oe),items:S,label:"Gender",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input mb-2","error-messages":w.value},null,8,["modelValue","error-messages"]),l(W,{dense:""},{default:u(()=>[l(Y,{cols:"6"},{default:u(()=>[l(P,{modelValue:d.value,"onUpdate:modelValue":Z[8]||(Z[8]=oe=>d.value=oe),type:"number",label:"Age >",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":b.value,min:"0",max:"150"},null,8,["modelValue","error-messages"])]),_:1}),l(Y,{cols:"6"},{default:u(()=>[l(P,{modelValue:f.value,"onUpdate:modelValue":Z[9]||(Z[9]=oe=>f.value=oe),type:"number",label:"Age <",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":x.value,min:"0",max:"150"},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),h("div",S6e,[l(ae,{color:"primary",size:"small","prepend-icon":"mdi-database-search",onClick:F,loading:e.isSearching,disabled:E.value,class:"filter-button"},{default:u(()=>[...Z[15]||(Z[15]=[O(" Search ",-1)])]),_:1},8,["loading","disabled"])]),h("div",E6e,[l(ae,{variant:"text",size:"small","prepend-icon":"mdi-filter-remove",onClick:L,class:"filter-button-clear"},{default:u(()=>[...Z[16]||(Z[16]=[O(" Clear ",-1)])]),_:1})])])]),_:1})}}},k6e=qt(B6e,[["__scopeId","data-v-1e00cd36"]]),T6e={class:"filter-cards-container px-2 pb-2",style:{flex:"1 1 auto"}},I6e={class:"d-flex justify-center mt-2 mb-2"},F6e={class:"d-flex justify-center mt-2"},P6e={__name:"ProcedureResearchFilter",props:{modelValueProcedureName:{type:String,default:""},modelValueDateFrom:{type:String,default:""},modelValueDateTo:{type:String,default:""},modelValueGender:{type:String,default:""},modelValueAgeGreaterThan:{type:[String,Number],default:""},modelValueAgeLessThan:{type:[String,Number],default:""},maxDate:{type:String,default:()=>Rn()},isSearching:{type:Boolean,default:!1}},emits:["update:modelValueProcedureName","update:modelValueDateFrom","update:modelValueDateTo","update:modelValueGender","update:modelValueAgeGreaterThan","update:modelValueAgeLessThan","filter-change","search","clear-filters"],setup(e,{emit:t}){const n=e,a=t,r=V(n.modelValueProcedureName||""),s=V(n.modelValueDateFrom||""),o=V(n.modelValueDateTo||""),i=V(n.modelValueGender||""),c=V(n.modelValueAgeGreaterThan||""),A=V(n.modelValueAgeLessThan||""),d=V(""),f=V(""),m=V(""),v=V(""),p=V(""),g=V(""),y=["Male","Female"],w=ne(()=>!!(d.value||f.value||m.value||v.value||p.value||g.value)),b=()=>{f.value="",s.value&&o.value&&s.value>o.value&&(f.value="From date cannot be after To date"),s.value&&n.maxDate&&s.value>n.maxDate&&(f.value="From date cannot be in the future")},x=()=>{m.value="",s.value&&o.value&&o.value<s.value&&(m.value="To date cannot be before From date"),o.value&&n.maxDate&&o.value>n.maxDate&&(m.value="To date cannot be in the future")},T=()=>{p.value="",g.value="";const E=parseInt(c.value),C=parseInt(A.value);c.value&&(isNaN(E)||E<0||E>150)&&(p.value="Age must be between 0 and 150"),A.value&&(isNaN(C)||C<0||C>150)&&(g.value="Age must be between 0 and 150"),c.value&&A.value&&E>=C&&(p.value='Must be less than "Age Less Than"',g.value='Must be greater than "Age Greater Than"')},D=Qn.debounce(()=>{const E={procedureName:r.value,dateFrom:s.value,dateTo:o.value,gender:i.value,ageGreaterThan:c.value,ageLessThan:A.value};a("filter-change",E)},300);je(()=>n.modelValueProcedureName,E=>{E!==r.value&&(r.value=E||"")}),je(()=>n.modelValueDateFrom,E=>{E!==s.value&&(s.value=E||"")}),je(()=>n.modelValueDateTo,E=>{E!==o.value&&(o.value=E||"")}),je(()=>n.modelValueGender,E=>{E!==i.value&&(i.value=E||"")}),je(()=>n.modelValueAgeGreaterThan,E=>{E!==c.value&&(c.value=E||"")}),je(()=>n.modelValueAgeLessThan,E=>{E!==A.value&&(A.value=E||"")}),je(r,E=>{a("update:modelValueProcedureName",E),D()}),je(s,E=>{a("update:modelValueDateFrom",E),b(),x(),D()}),je(o,E=>{a("update:modelValueDateTo",E),x(),b(),D()}),je(i,E=>{a("update:modelValueGender",E),D()}),je(c,E=>{a("update:modelValueAgeGreaterThan",E),T(),D()}),je(A,E=>{a("update:modelValueAgeLessThan",E),T(),D()});const k=async()=>{if(b(),x(),T(),await _n(),w.value){console.log(" Cannot search: validation errors present");return}const E={procedureName:r.value,dateFrom:s.value,dateTo:o.value,gender:i.value,ageGreaterThan:c.value,ageLessThan:A.value};console.log(" Procedure research search triggered with filters:",E),a("search",E)},S=()=>{r.value="",s.value="",o.value="",i.value="",c.value="",A.value="",d.value="",f.value="",m.value="",v.value="",p.value="",g.value="",a("clear-filters")};return(E,C)=>{const U=I("v-icon"),F=I("v-card-title"),L=I("v-text-field"),H=I("v-card-text"),ue=I("v-card"),ie=I("v-col"),Q=I("v-row"),X=I("v-select"),le=I("v-btn");return R(),ve(ue,{color:"surfaceContainer",flat:"",style:{height:"100%",display:"flex","flex-direction":"column"}},{default:u(()=>[h("div",T6e,[l(ue,{class:"form-section-card card-status-default mx-2 mt-1 mb-3 pa-3",elevation:"2"},{default:u(()=>[l(F,{class:"pa-0 pb-2"},{default:u(()=>[l(U,{class:"mr-2",size:"small",color:"primary"},{default:u(()=>[...C[8]||(C[8]=[O("mdi-medical-bag",-1)])]),_:1}),C[9]||(C[9]=h("span",{class:"text-subtitle-1 font-weight-medium"},"Procedure Name",-1))]),_:1}),l(H,{class:"pa-0"},{default:u(()=>[l(L,{modelValue:r.value,"onUpdate:modelValue":C[0]||(C[0]=Z=>r.value=Z),placeholder:"Enter procedure name...",density:"comfortable",variant:"outlined",clearable:"","hide-details":"auto","prepend-inner-icon":"mdi-medical-bag",class:"input-hover","error-messages":d.value,maxlength:"100"},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),l(ue,{class:"form-section-card card-status-default ma-2 mb-3 pa-3",elevation:"2"},{default:u(()=>[l(F,{class:"pa-0 pb-2"},{default:u(()=>[l(U,{class:"mr-2",size:"small",color:"primary"},{default:u(()=>[...C[10]||(C[10]=[O("mdi-calendar-range",-1)])]),_:1}),C[11]||(C[11]=h("span",{class:"text-subtitle-1 font-weight-medium"},"Date Range",-1))]),_:1}),l(H,{class:"pa-0"},{default:u(()=>[l(Q,{dense:""},{default:u(()=>[l(ie,{cols:"6"},{default:u(()=>[l(L,{modelValue:s.value,"onUpdate:modelValue":C[1]||(C[1]=Z=>s.value=Z),type:"date",label:"From Date",density:"comfortable",variant:"outlined",clearable:"","hide-details":"auto","prepend-inner-icon":"mdi-calendar-start",class:"input-hover date-input",max:o.value||e.maxDate,"error-messages":f.value,onInput:b,onClick:C[2]||(C[2]=Z=>Z.target.showPicker&&Z.target.showPicker())},null,8,["modelValue","max","error-messages"])]),_:1}),l(ie,{cols:"6"},{default:u(()=>[l(L,{modelValue:o.value,"onUpdate:modelValue":C[3]||(C[3]=Z=>o.value=Z),type:"date",label:"To Date",density:"comfortable",variant:"outlined",clearable:"","hide-details":"auto","prepend-inner-icon":"mdi-calendar-end",class:"input-hover date-input",min:s.value,max:e.maxDate,"error-messages":m.value,onInput:x,onClick:C[4]||(C[4]=Z=>Z.target.showPicker&&Z.target.showPicker())},null,8,["modelValue","min","max","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1}),l(ue,{class:"form-section-card card-status-default ma-2 mb-3 pa-3",elevation:"2"},{default:u(()=>[l(F,{class:"pa-0 pb-2"},{default:u(()=>[l(U,{class:"mr-2",size:"small",color:"primary"},{default:u(()=>[...C[12]||(C[12]=[O("mdi-human-male-female",-1)])]),_:1}),C[13]||(C[13]=h("span",{class:"text-subtitle-1 font-weight-medium"},"Demographics",-1))]),_:1}),l(H,{class:"pa-0"},{default:u(()=>[l(Q,{dense:""},{default:u(()=>[l(ie,{cols:"12",class:"mb-2"},{default:u(()=>[l(X,{modelValue:i.value,"onUpdate:modelValue":C[5]||(C[5]=Z=>i.value=Z),items:y,label:"Gender",density:"comfortable",variant:"outlined",clearable:"","hide-details":"auto","prepend-inner-icon":"mdi-human-male-female",class:"input-hover","error-messages":v.value},null,8,["modelValue","error-messages"])]),_:1}),l(ie,{cols:"6"},{default:u(()=>[l(L,{modelValue:c.value,"onUpdate:modelValue":C[6]||(C[6]=Z=>c.value=Z),type:"number",label:"Age Greater Than",density:"comfortable",variant:"outlined",clearable:"","hide-details":"auto","prepend-inner-icon":"mdi-calendar-plus",class:"input-hover","error-messages":p.value,min:"0",max:"150"},null,8,["modelValue","error-messages"])]),_:1}),l(ie,{cols:"6"},{default:u(()=>[l(L,{modelValue:A.value,"onUpdate:modelValue":C[7]||(C[7]=Z=>A.value=Z),type:"number",label:"Age Less Than",density:"comfortable",variant:"outlined",clearable:"","hide-details":"auto","prepend-inner-icon":"mdi-calendar-minus",class:"input-hover","error-messages":g.value,min:"0",max:"150"},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1}),h("div",I6e,[l(le,{color:"primary","prepend-icon":"mdi-medical-bag",onClick:k,loading:e.isSearching,disabled:w.value,class:"btn-hover-enhanced"},{default:u(()=>[...C[14]||(C[14]=[O(" Search Procedures ",-1)])]),_:1},8,["loading","disabled"])]),h("div",F6e,[l(le,{variant:"outlined",color:"secondary","prepend-icon":"mdi-filter-remove",onClick:S,disabled:e.isSearching,class:"btn-hover-enhanced"},{default:u(()=>[...C[15]||(C[15]=[O(" Clear All Filters ",-1)])]),_:1},8,["disabled"])])])]),_:1})}}},D6e=qt(P6e,[["__scopeId","data-v-1a060e25"]]),U6e={class:"scrollable-content"},R6e={class:"scrollable-content"},N6e={key:0,class:"text-medium-emphasis ml-2"},V6e={key:1},L6e={class:"text-center"},M6e={class:"text-center"},O6e={class:"text-body-2 text-medium-emphasis mb-4"},H6e={class:"text-center"},$6e={class:"text-h4"},Q6e={class:"text-h4"},G6e={class:"text-h4"},z6e={class:"text-h4"},K6e={class:"d-flex align-center"},W6e={class:"mr-2 text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},j6e={class:"text-caption text-medium-emphasis"},q6e={key:0,class:"text-body-2 mb-1"},Y6e={key:1,class:"text-body-2"},X6e={class:"scrollable-content"},J6e={class:"scrollable-content"},Z6e={key:0,class:"text-medium-emphasis ml-2"},e5e={key:1},t5e={class:"text-center"},n5e={class:"text-center"},a5e={class:"text-body-2 text-medium-emphasis mb-4"},r5e={class:"text-center"},s5e={class:"text-h4"},o5e={class:"text-h4"},i5e={class:"text-h4"},l5e={class:"text-h4"},u5e={class:"d-flex align-center"},c5e={class:"mr-2 text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},d5e={class:"text-caption text-medium-emphasis"},A5e={key:0,class:"text-body-2 mb-1"},f5e={__name:"research-page",setup(e){const{showSnackbar:t}=ca(),n=ra(),a=V(0);Gf();const r=sl(),s=V(null),o=ne(()=>Rn()),i=V([{title:"Consultations",disabled:!1},{title:"Procedures",disabled:!1}]),c=V({diagnosis:null,medicine:null,dateFrom:"",dateTo:"",patientName:"",gender:"",ageGreaterThan:"",ageLessThan:""}),A=V({procedureName:"",dateFrom:"",dateTo:"",gender:"",ageGreaterThan:"",ageLessThan:""}),d=ne(()=>n.state.researchModule.searchResults),f=ne(()=>n.state.researchModule.isLoading),m=ne(()=>n.state.researchModule.hasSearched),v=ne(()=>n.state.researchModule.searchError),p=ne(()=>n.getters["researchModule/searchSummary"]),g=ne(()=>n.getters["researchModule/hasActiveFilters"]),y=ne(()=>n.getters["researchModule/activeFiltersText"]),w=ne(()=>d.value.length?new Set(d.value.map(W=>W.patientId)).size:0),b=ne(()=>d.value.length?new Set(d.value.filter(W=>W.diagnosis).map(W=>W.diagnosis)).size:0),x=ne(()=>{if(!d.value.length)return 0;const Y=new Set;return d.value.forEach(W=>{W.medicines&&Array.isArray(W.medicines)&&W.medicines.forEach(ee=>Y.add(ee.productName))}),Y.size}),T=ne(()=>d.value.length),D=ne(()=>n.state.procedureResearchModule.searchResults),k=ne(()=>n.state.procedureResearchModule.isLoading),S=ne(()=>n.state.procedureResearchModule.hasSearched),E=ne(()=>n.state.procedureResearchModule.searchError),C=ne(()=>n.getters["procedureResearchModule/searchSummary"]),U=ne(()=>n.getters["procedureResearchModule/hasActiveFilters"]),F=ne(()=>n.getters["procedureResearchModule/activeFiltersText"]),L=ne(()=>D.value.length?new Set(D.value.map(W=>W.patientId)).size:0),H=ne(()=>D.value.length?new Set(D.value.filter(W=>W.procedureName).map(W=>W.procedureName)).size:0),ue=ne(()=>D.value.length?new Set(D.value.filter(W=>W.treatmentPlanId).map(W=>W.treatmentPlanId)).size:0),ie=ne(()=>D.value.length);dn(()=>{try{const Y=n.state.researchModule.filters;c.value={...Y};const W=n.state.procedureResearchModule?.filters||{};A.value={...A.value,...W},m.value&&d.value.length>0?(console.log(" Restored previous consultation research search:",d.value.length,"results"),t({message:`Restored previous search: ${d.value.length} results`,color:"success",timeout:3e3})):g.value&&!m.value&&console.log(" Active consultation filters found, ready to search"),S.value&&D.value.length>0?console.log(" Restored previous procedure research search:",D.value.length,"results"):U.value&&!S.value&&console.log(" Active procedure filters found, ready to search")}catch(Y){console.error("Error setting up research page:",Y),s.value="Failed to initialize research page"}});const Q=async Y=>{if(f.value){console.log(" Search in progress, skipping filter update");return}try{c.value={...c.value,...Y},await n.dispatch("researchModule/updateFilters",{filters:c.value}),console.log(" Research filters updated:",c.value)}catch(W){console.error("Error updating filters:",W),s.value="Failed to update search filters"}},X=async(Y=null)=>{if(f.value){console.log(" Search already in progress, skipping duplicate request");return}try{console.log(" Starting research search...");const W=Y||c.value;await n.dispatch("researchModule/updateFilters",{filters:W});const ee=await n.dispatch("researchModule/performSearch");ee.success?t({message:`Found ${ee.data.length} research results`,color:"success",timeout:3e3}):t({message:ee.error?.message||"Search failed",color:"error",timeout:5e3})}catch(W){console.error(" Search failed:",W),t({message:W.message||"Failed to perform search",color:"error",timeout:5e3})}},le=async()=>{await X()},Z=async()=>{if(f.value){console.log(" Search in progress, skipping filter clear");return}try{c.value={diagnosis:null,medicine:null,dateFrom:"",dateTo:"",patientName:"",gender:"",ageGreaterThan:"",ageLessThan:""},await n.dispatch("researchModule/clearAll"),t({message:"All filters and results cleared",color:"success",timeout:3e3})}catch(Y){console.error("Error clearing filters:",Y),s.value="Failed to clear filters"}},re=Y=>{try{if(!Y.patientId)throw new Error("Invalid patient ID");r.push({path:`/patients/${Y.patientId}`,query:{from:"research"}})}catch(W){console.error("Error navigating to patient:",W),t({message:"Failed to open patient details",color:"error",timeout:5e3})}},q=async Y=>{if(k.value){console.log(" Procedure search in progress, skipping filter update");return}try{A.value={...A.value,...Y},await n.dispatch("procedureResearchModule/updateFilters",{filters:A.value}),console.log(" Procedure filters updated:",A.value)}catch(W){console.error("Error updating procedure filters:",W),s.value="Failed to update procedure search filters"}},P=async(Y=null)=>{if(k.value){console.log(" Procedure search already in progress, skipping duplicate request");return}try{console.log(" Starting procedure research search...");const W=Y||A.value;await n.dispatch("procedureResearchModule/updateFilters",{filters:W});const ee=await n.dispatch("procedureResearchModule/performSearch");ee.success?t({message:`Found ${ee.data.length} procedure results`,color:"success",timeout:3e3}):t({message:ee.error?.message||"Procedure search failed",color:"error",timeout:5e3})}catch(W){console.error(" Procedure search failed:",W),t({message:W.message||"Failed to perform procedure search",color:"error",timeout:5e3})}},G=async()=>{await P()},J=async()=>{if(k.value){console.log(" Procedure search in progress, skipping filter clear");return}try{A.value={procedureName:"",dateFrom:"",dateTo:"",gender:"",ageGreaterThan:"",ageLessThan:""},await n.dispatch("procedureResearchModule/clearAll"),t({message:"All procedure filters and results cleared",color:"success",timeout:3e3})}catch(Y){console.error("Error clearing procedure filters:",Y),s.value="Failed to clear procedure filters"}},M=Y=>{try{if(!Y.patientId)throw new Error("Invalid patient ID");r.push({path:`/patients/${Y.patientId}`,query:{from:"research"}})}catch(W){console.error("Error navigating to patient from procedure result:",W),t({message:"Failed to open patient details",color:"error",timeout:5e3})}},te=Y=>{if(!Y)return"";try{return new Date(Y).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return Y}};return(Y,W)=>{const ee=I("v-alert"),ae=I("v-tab"),oe=I("v-tabs"),j=I("v-card"),ce=I("v-col"),de=I("v-row"),_e=I("v-card-text"),Re=I("v-progress-circular"),be=I("v-icon"),Ee=I("v-btn"),Ce=I("v-empty-state"),Be=I("v-chip"),Te=I("v-card-title"),Oe=I("v-lazy"),Me=I("v-window-item"),rt=I("v-window"),ut=I("v-main");return R(),ve(ut,null,{default:u(()=>[l(En,{feature:"research"},{default:u(()=>[s.value?(R(),ve(ee,{key:0,type:"error",dismissible:"","onClick:close":W[0]||(W[0]=Ie=>s.value=null),class:"ma-3"},{default:u(()=>[O(K(s.value),1)]),_:1})):ye("",!0),l(de,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[l(ce,{cols:"12"},{default:u(()=>[l(j,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center"},{default:u(()=>[l(oe,{modelValue:a.value,"onUpdate:modelValue":W[1]||(W[1]=Ie=>a.value=Ie),color:"primary","align-tabs":"start",class:"w-100"},{default:u(()=>[(R(!0),Ae(Ke,null,Gt(i.value,(Ie,Ue)=>(R(),ve(ae,{key:Ue,value:Ue,disabled:Ie.disabled},{default:u(()=>[O(K(Ie.title),1)]),_:2},1032,["value","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(rt,{modelValue:a.value,"onUpdate:modelValue":W[16]||(W[16]=Ie=>a.value=Ie),class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[l(Me,{value:0,style:{height:"100%"}},{default:u(()=>[l(de,{"aria-label":"research row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[l(ce,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[h("div",U6e,[l(k6e,{"model-value-diagnosis":c.value.diagnosis,"onUpdate:modelValueDiagnosis":W[2]||(W[2]=Ie=>c.value.diagnosis=Ie),"model-value-medicine":c.value.medicine,"onUpdate:modelValueMedicine":W[3]||(W[3]=Ie=>c.value.medicine=Ie),"model-value-date-from":c.value.dateFrom,"onUpdate:modelValueDateFrom":W[4]||(W[4]=Ie=>c.value.dateFrom=Ie),"model-value-date-to":c.value.dateTo,"onUpdate:modelValueDateTo":W[5]||(W[5]=Ie=>c.value.dateTo=Ie),"model-value-patient-name":c.value.patientName,"onUpdate:modelValuePatientName":W[6]||(W[6]=Ie=>c.value.patientName=Ie),"model-value-gender":c.value.gender,"onUpdate:modelValueGender":W[7]||(W[7]=Ie=>c.value.gender=Ie),"model-value-age-greater-than":c.value.ageGreaterThan,"onUpdate:modelValueAgeGreaterThan":W[8]||(W[8]=Ie=>c.value.ageGreaterThan=Ie),"model-value-age-less-than":c.value.ageLessThan,"onUpdate:modelValueAgeLessThan":W[9]||(W[9]=Ie=>c.value.ageLessThan=Ie),"max-date":o.value,"is-searching":f.value,onFilterChange:Q,onSearch:X,onClearFilters:Z},null,8,["model-value-diagnosis","model-value-medicine","model-value-date-from","model-value-date-to","model-value-patient-name","model-value-gender","model-value-age-greater-than","model-value-age-less-than","max-date","is-searching"])])]),_:1}),l(ce,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[h("div",R6e,[l(j,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[l(j,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(_e,{class:"pt-2 pb-0"},{default:u(()=>[p.value&&p.value.totalResults>0?(R(),Ae(Ke,{key:0},[h("strong",null,K(p.value.totalResults),1),O(" research result"+K(p.value.totalResults!==1?"s":"")+" found ",1),y.value?(R(),Ae("span",N6e,"  "+K(y.value),1)):ye("",!0)],64)):(R(),Ae("strong",V6e,"Research Data Search"))]),_:1})]),_:1}),f.value?(R(),ve(de,{key:0,"no-gutters":""},{default:u(()=>[l(ce,{cols:"12",class:"d-flex justify-center align-center",style:{height:"calc(100vh - 280px)"}},{default:u(()=>[h("div",L6e,[l(Re,{indeterminate:"",size:"64",color:"primary"}),W[17]||(W[17]=h("div",{class:"mt-4 text-subtitle-1"},"Searching Research Data...",-1))])]),_:1})]),_:1})):v.value?(R(),ve(de,{key:1,"no-gutters":""},{default:u(()=>[l(ce,{cols:"12",class:"d-flex justify-center align-center",style:{height:"calc(100vh - 280px)"}},{default:u(()=>[h("div",M6e,[l(be,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...W[18]||(W[18]=[O("mdi-alert-circle",-1)])]),_:1}),W[20]||(W[20]=h("div",{class:"text-h6 mb-2"},"Search Failed",-1)),h("div",O6e,K(v.value),1),l(Ee,{color:"primary",onClick:le,"prepend-icon":"mdi-refresh",loading:f.value,disabled:f.value},{default:u(()=>[...W[19]||(W[19]=[O(" Try Again ",-1)])]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})):d.value&&d.value.length===0&&m.value?(R(),ve(Ce,{key:2,image:Qe(Gv),class:"d-flex justify-center"},{title:u(()=>[...W[21]||(W[21]=[h("div",{class:"text-subtitle-2 mt-8 text-center"}," No Research Data Found ",-1)])]),text:u(()=>[...W[22]||(W[22]=[h("div",{class:"text-caption text-center"}," Try adjusting your search criteria or clear filters to see all data ",-1)])]),actions:u(()=>[l(Ee,{color:"primary",variant:"outlined",onClick:Z,"prepend-icon":"mdi-filter-remove",loading:f.value,disabled:f.value},{default:u(()=>[...W[23]||(W[23]=[O(" Clear Filters ",-1)])]),_:1},8,["loading","disabled"])]),_:1},8,["image"])):m.value?d.value&&d.value.length>0?(R(),Ae(Ke,{key:4},[l(de,{class:"mb-1 pa-1"},{default:u(()=>[l(ce,{cols:"3"},{default:u(()=>[l(j,{color:"primary",variant:"tonal"},{default:u(()=>[l(_e,{class:"text-center"},{default:u(()=>[h("div",$6e,K(w.value),1),W[27]||(W[27]=h("div",{class:"text-caption"},"Unique Patients",-1))]),_:1})]),_:1})]),_:1}),l(ce,{cols:"3"},{default:u(()=>[l(j,{color:"success",variant:"tonal"},{default:u(()=>[l(_e,{class:"text-center"},{default:u(()=>[h("div",Q6e,K(b.value),1),W[28]||(W[28]=h("div",{class:"text-caption"},"Unique Diagnoses",-1))]),_:1})]),_:1})]),_:1}),l(ce,{cols:"3"},{default:u(()=>[l(j,{color:"info",variant:"tonal"},{default:u(()=>[l(_e,{class:"text-center"},{default:u(()=>[h("div",G6e,K(x.value),1),W[29]||(W[29]=h("div",{class:"text-caption"},"Unique Medicines",-1))]),_:1})]),_:1})]),_:1}),l(ce,{cols:"3"},{default:u(()=>[l(j,{color:"warning",variant:"tonal"},{default:u(()=>[l(_e,{class:"text-center"},{default:u(()=>[h("div",z6e,K(T.value),1),W[30]||(W[30]=h("div",{class:"text-caption"},"Total Consultations",-1))]),_:1})]),_:1})]),_:1})]),_:1}),l(de,{"no-gutters":""},{default:u(()=>[l(ce,{cols:"12",class:"scroll-element",style:{"padding-bottom":"40px"}},{default:u(()=>[(R(!0),Ae(Ke,null,Gt(d.value,Ie=>(R(),ve(Oe,{key:`${Ie.patientId}-${Ie.consultationId}`,options:{threshold:.1,rootMargin:"50px"},"min-height":"50"},{default:u(()=>[l(j,{style:Ut([{textAlign:"left"},{cursor:"pointer"}]),density:"compact",class:"mb-1 mx-2 card-enhanced card-status-default card-hover-base",rounded:"lg",onClick:Ue=>re(Ie)},{default:u(()=>[l(de,{"no-gutters":""},{default:u(()=>[l(ce,{cols:"12"},{default:u(()=>[l(Te,{class:"d-flex align-center justify-space-between pb-2 pt-2"},{default:u(()=>[h("div",K6e,[h("span",W6e,K(Ie.patientName||"Unknown Patient"),1),Ie.patientGender&&Ie.patientGender!==""?(R(),ve(Be,{key:0,color:"primary","text-color":"black",size:"small",class:"mr-1"},{default:u(()=>[O(K(Ie.patientGender),1)]),_:2},1024)):ye("",!0),Ie.patientAge&&Ie.patientAge!==""?(R(),ve(Be,{key:1,color:"primary","text-color":"black",size:"small",class:"mr-1"},{default:u(()=>[O(K(Ie.patientAge?`${Ie.patientAge} yrs`:""),1)]),_:2},1024)):ye("",!0)]),h("div",j6e,K(te(Ie.consultationDate)),1)]),_:2},1024),l(_e,{class:"pt-0 pb-1"},{default:u(()=>[l(de,{dense:""},{default:u(()=>[l(ce,{cols:"12"},{default:u(()=>[Ie.diagnosis?(R(),Ae("div",q6e,[W[31]||(W[31]=h("strong",null,"Diagnosis:",-1)),O(" "+K(Ie.diagnosis),1)])):ye("",!0),Ie.medicines&&Ie.medicines.length>0?(R(),Ae("div",Y6e,[W[32]||(W[32]=h("strong",null,"Medicines:",-1)),O(" "+K(Ie.medicines.map(Ue=>Ue.productName).join(", ")),1)])):ye("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),_:1})],64)):ye("",!0):(R(),ve(de,{key:3,"no-gutters":""},{default:u(()=>[l(ce,{cols:"12",class:"d-flex justify-center align-center",style:{height:"calc(100vh - 280px)"}},{default:u(()=>[h("div",H6e,[l(be,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...W[24]||(W[24]=[O("mdi-database-search",-1)])]),_:1}),W[25]||(W[25]=h("div",{class:"text-h6 mb-2"},"Search for Research Data",-1)),W[26]||(W[26]=h("div",{class:"text-body-2 text-medium-emphasis"},"Use the filters on the left to search based on diagnosis, medicines, and dates",-1))])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1})]),_:1}),l(Me,{value:1,style:{height:"100%"}},{default:u(()=>[l(de,{"aria-label":"procedure research row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[l(ce,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[h("div",X6e,[l(D6e,{"model-value-procedure-name":A.value.procedureName,"onUpdate:modelValueProcedureName":W[10]||(W[10]=Ie=>A.value.procedureName=Ie),"model-value-date-from":A.value.dateFrom,"onUpdate:modelValueDateFrom":W[11]||(W[11]=Ie=>A.value.dateFrom=Ie),"model-value-date-to":A.value.dateTo,"onUpdate:modelValueDateTo":W[12]||(W[12]=Ie=>A.value.dateTo=Ie),"model-value-gender":A.value.gender,"onUpdate:modelValueGender":W[13]||(W[13]=Ie=>A.value.gender=Ie),"model-value-age-greater-than":A.value.ageGreaterThan,"onUpdate:modelValueAgeGreaterThan":W[14]||(W[14]=Ie=>A.value.ageGreaterThan=Ie),"model-value-age-less-than":A.value.ageLessThan,"onUpdate:modelValueAgeLessThan":W[15]||(W[15]=Ie=>A.value.ageLessThan=Ie),"max-date":o.value,"is-searching":k.value,onFilterChange:q,onSearch:P,onClearFilters:J},null,8,["model-value-procedure-name","model-value-date-from","model-value-date-to","model-value-gender","model-value-age-greater-than","model-value-age-less-than","max-date","is-searching"])])]),_:1}),l(ce,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[h("div",J6e,[l(j,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[l(j,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(_e,{class:"pt-2 pb-0"},{default:u(()=>[C.value&&C.value.totalResults>0?(R(),Ae(Ke,{key:0},[h("strong",null,K(C.value.totalResults),1),O(" procedure result"+K(C.value.totalResults!==1?"s":"")+" found ",1),F.value?(R(),Ae("span",Z6e,"  "+K(F.value),1)):ye("",!0)],64)):(R(),Ae("strong",e5e,"Procedure Research Search"))]),_:1})]),_:1}),k.value?(R(),ve(de,{key:0,"no-gutters":""},{default:u(()=>[l(ce,{cols:"12",class:"d-flex justify-center align-center",style:{height:"calc(100vh - 280px)"}},{default:u(()=>[h("div",t5e,[l(Re,{indeterminate:"",size:"64",color:"primary"}),W[33]||(W[33]=h("div",{class:"mt-4 text-subtitle-1"},"Searching Procedure Data...",-1))])]),_:1})]),_:1})):E.value?(R(),ve(de,{key:1,"no-gutters":""},{default:u(()=>[l(ce,{cols:"12",class:"d-flex justify-center align-center",style:{height:"calc(100vh - 280px)"}},{default:u(()=>[h("div",n5e,[l(be,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...W[34]||(W[34]=[O("mdi-alert-circle",-1)])]),_:1}),W[36]||(W[36]=h("div",{class:"text-h6 mb-2"},"Search Failed",-1)),h("div",a5e,K(E.value),1),l(Ee,{color:"primary",onClick:G,"prepend-icon":"mdi-refresh",loading:k.value,disabled:k.value},{default:u(()=>[...W[35]||(W[35]=[O(" Try Again ",-1)])]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})):D.value&&D.value.length===0&&S.value?(R(),ve(Ce,{key:2,image:Qe(Gv),class:"d-flex justify-center"},{title:u(()=>[...W[37]||(W[37]=[h("div",{class:"text-subtitle-2 mt-8 text-center"}," No Procedure Data Found ",-1)])]),text:u(()=>[...W[38]||(W[38]=[h("div",{class:"text-caption text-center"}," Try adjusting your search criteria or clear filters to see all data ",-1)])]),actions:u(()=>[l(Ee,{color:"primary",variant:"outlined",onClick:J,"prepend-icon":"mdi-filter-remove",loading:k.value,disabled:k.value},{default:u(()=>[...W[39]||(W[39]=[O(" Clear Filters ",-1)])]),_:1},8,["loading","disabled"])]),_:1},8,["image"])):S.value?D.value&&D.value.length>0?(R(),Ae(Ke,{key:4},[l(de,{class:"mb-1 pa-1"},{default:u(()=>[l(ce,{cols:"3"},{default:u(()=>[l(j,{color:"primary",variant:"tonal"},{default:u(()=>[l(_e,{class:"text-center"},{default:u(()=>[h("div",s5e,K(L.value),1),W[43]||(W[43]=h("div",{class:"text-caption"},"Unique Patients",-1))]),_:1})]),_:1})]),_:1}),l(ce,{cols:"3"},{default:u(()=>[l(j,{color:"success",variant:"tonal"},{default:u(()=>[l(_e,{class:"text-center"},{default:u(()=>[h("div",o5e,K(H.value),1),W[44]||(W[44]=h("div",{class:"text-caption"},"Unique Procedures",-1))]),_:1})]),_:1})]),_:1}),l(ce,{cols:"3"},{default:u(()=>[l(j,{color:"info",variant:"tonal"},{default:u(()=>[l(_e,{class:"text-center"},{default:u(()=>[h("div",i5e,K(ue.value),1),W[45]||(W[45]=h("div",{class:"text-caption"},"Treatment Plans",-1))]),_:1})]),_:1})]),_:1}),l(ce,{cols:"3"},{default:u(()=>[l(j,{color:"warning",variant:"tonal"},{default:u(()=>[l(_e,{class:"text-center"},{default:u(()=>[h("div",l5e,K(ie.value),1),W[46]||(W[46]=h("div",{class:"text-caption"},"Total Records",-1))]),_:1})]),_:1})]),_:1})]),_:1}),l(de,{"no-gutters":""},{default:u(()=>[l(ce,{cols:"12",class:"scroll-element",style:{"padding-bottom":"40px"}},{default:u(()=>[(R(!0),Ae(Ke,null,Gt(D.value,Ie=>(R(),ve(Oe,{key:`${Ie.patientId}-${Ie.treatmentProcedureId}`,options:{threshold:.1,rootMargin:"50px"},"min-height":"50"},{default:u(()=>[l(j,{style:Ut([{textAlign:"left"},{cursor:"pointer"}]),density:"compact",class:"mb-1 mx-2 card-enhanced card-status-default card-hover-base",rounded:"lg",onClick:Ue=>M(Ie)},{default:u(()=>[l(de,{"no-gutters":""},{default:u(()=>[l(ce,{cols:"12"},{default:u(()=>[l(Te,{class:"d-flex align-center justify-space-between pb-2 pt-2"},{default:u(()=>[h("div",u5e,[h("span",c5e,K(Ie.patientName||"Unknown Patient"),1),Ie.patientGender&&Ie.patientGender!==""?(R(),ve(Be,{key:0,color:"primary","text-color":"black",size:"small",class:"mr-1"},{default:u(()=>[O(K(Ie.patientGender),1)]),_:2},1024)):ye("",!0),Ie.patientAge&&Ie.patientAge!==""?(R(),ve(Be,{key:1,color:"primary","text-color":"black",size:"small",class:"mr-1"},{default:u(()=>[O(K(Ie.patientAge?`${Ie.patientAge} yrs`:""),1)]),_:2},1024)):ye("",!0)]),h("div",d5e,K(te(Ie.procedureStartDate||Ie.treatmentPlanCreatedAt)),1)]),_:2},1024),l(_e,{class:"pt-0 pb-1"},{default:u(()=>[l(de,{dense:""},{default:u(()=>[l(ce,{cols:"12"},{default:u(()=>[Ie.procedureName?(R(),Ae("div",A5e,[W[47]||(W[47]=h("strong",null,"Procedure:",-1)),O(" "+K(Ie.procedureName),1)])):ye("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),_:1})],64)):ye("",!0):(R(),ve(de,{key:3,"no-gutters":""},{default:u(()=>[l(ce,{cols:"12",class:"d-flex justify-center align-center",style:{height:"calc(100vh - 280px)"}},{default:u(()=>[h("div",r5e,[l(be,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...W[40]||(W[40]=[O("mdi-database-search",-1)])]),_:1}),W[41]||(W[41]=h("div",{class:"text-h6 mb-2"},"Search for Procedure Data",-1)),W[42]||(W[42]=h("div",{class:"text-body-2 text-medium-emphasis"},"Use the filters on the left to search based on procedures, dates, and demographics",-1))])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}},m5e=qt(f5e,[["__scopeId","data-v-a66dfcba"]]),v5e={class:"filter-container pa-3",style:{flex:"1 1 auto","overflow-y":"auto"}},h5e={class:"filter-field mb-3"},p5e={class:"filter-field mb-3"},g5e={class:"filter-section mb-3"},y5e={class:"filter-field mb-3"},_5e={class:"d-flex justify-center mt-4 mb-2"},w5e={class:"d-flex justify-center"},b5e={__name:"ReminderFilter",props:{filters:{type:Object,default:()=>({})},isLoading:{type:Boolean,default:!1}},emits:["filter-change","search","clear-filters"],setup(e,{emit:t}){const n=e,a=t,r=V(n.filters?.reminderType||""),s=V(n.filters?.reminderStatus||""),o=V(n.filters?.dateFrom||""),i=V(n.filters?.dateTo||""),c=V(n.filters?.patientName||""),A=V(""),d=V(""),f=V(""),m=V(""),v=V(""),p=[{title:"All Types",value:""},{title:"Appointment",value:"appointment"},{title:"Consultation",value:"consultation"},{title:"Procedures",value:"procedures"}],g=[{title:"All Statuses",value:""},{title:"Pending",value:"pending"},{title:"Completed",value:"completed"}],y=ne(()=>!!(A.value||d.value||f.value||m.value||v.value)),w=()=>{f.value="",o.value&&i.value&&o.value>i.value&&(f.value="From date cannot be after To date")},b=()=>{m.value="",o.value&&i.value&&i.value<o.value&&(m.value="To date cannot be before From date")},x=()=>{v.value="",c.value&&c.value.length<2&&(v.value="Patient name must be at least 2 characters")};je(()=>n.filters,S=>{S&&(r.value=S.reminderType||"",s.value=S.reminderStatus||"",o.value=S.dateFrom||"",i.value=S.dateTo||"",c.value=S.patientName||"")},{deep:!0}),je(r,()=>{T()}),je(s,()=>{T()}),je(o,()=>{w(),b(),T()}),je(i,()=>{b(),w(),T()}),je(c,()=>{x(),T()});const T=()=>{const S={reminderType:r.value,reminderStatus:s.value,dateFrom:o.value,dateTo:i.value,patientName:c.value};a("filter-change",S)},D=async()=>{if(w(),b(),x(),await _n(),y.value){console.log(" Cannot search: validation errors present");return}const S={reminderType:r.value,reminderStatus:s.value,dateFrom:o.value,dateTo:i.value,patientName:c.value};console.log(" Reminder search triggered with filters:",S),a("search",S)},k=()=>{r.value="",s.value="",o.value="",i.value="",c.value="",A.value="",d.value="",f.value="",m.value="",v.value="",a("clear-filters")};return(S,E)=>{const C=I("v-card-text"),U=I("v-card"),F=I("v-select"),L=I("v-text-field"),H=I("v-col"),ue=I("v-row"),ie=I("v-btn");return R(),ve(U,{color:"surfaceContainer",flat:"",style:{height:"100%",display:"flex","flex-direction":"column"}},{default:u(()=>[l(U,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(C,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...E[7]||(E[7]=[h("span",{class:"text-body-2 font-weight-medium"},"Filter Reminders",-1)])]),_:1})]),_:1}),h("div",v5e,[h("div",h5e,[l(F,{modelValue:r.value,"onUpdate:modelValue":E[0]||(E[0]=Q=>r.value=Q),items:p,label:"Reminder Type",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":A.value},null,8,["modelValue","error-messages"])]),h("div",p5e,[l(F,{modelValue:s.value,"onUpdate:modelValue":E[1]||(E[1]=Q=>s.value=Q),items:g,label:"Reminder Status",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":d.value},null,8,["modelValue","error-messages"])]),h("div",g5e,[E[8]||(E[8]=h("div",{class:"filter-section-label mb-2"},"Date Range",-1)),l(ue,{dense:""},{default:u(()=>[l(H,{cols:"6"},{default:u(()=>[l(L,{modelValue:o.value,"onUpdate:modelValue":E[2]||(E[2]=Q=>o.value=Q),type:"date",label:"From Date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input date-input",max:i.value,"error-messages":f.value,onInput:w,onClick:E[3]||(E[3]=Q=>Q.target.showPicker&&Q.target.showPicker())},null,8,["modelValue","max","error-messages"])]),_:1}),l(H,{cols:"6"},{default:u(()=>[l(L,{modelValue:i.value,"onUpdate:modelValue":E[4]||(E[4]=Q=>i.value=Q),type:"date",label:"To Date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input date-input",min:o.value,"error-messages":m.value,onInput:b,onClick:E[5]||(E[5]=Q=>Q.target.showPicker&&Q.target.showPicker())},null,8,["modelValue","min","error-messages"])]),_:1})]),_:1})]),h("div",y5e,[l(L,{modelValue:c.value,"onUpdate:modelValue":E[6]||(E[6]=Q=>c.value=Q),label:"Patient Name",placeholder:"Enter patient name...",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":v.value,maxlength:"100"},null,8,["modelValue","error-messages"])]),h("div",_5e,[l(ie,{color:"primary",size:"small","prepend-icon":"mdi-magnify",onClick:D,loading:e.isLoading,disabled:y.value,class:"filter-button"},{default:u(()=>[...E[9]||(E[9]=[O(" Search ",-1)])]),_:1},8,["loading","disabled"])]),h("div",w5e,[l(ie,{variant:"text",size:"small","prepend-icon":"mdi-filter-remove",onClick:k,disabled:e.isLoading,class:"filter-button-clear"},{default:u(()=>[...E[10]||(E[10]=[O(" Clear ",-1)])]),_:1},8,["disabled"])]),l(U,{color:"info",variant:"tonal",class:"mt-4 pa-2",elevation:"0",rounded:"lg"},{default:u(()=>[...E[11]||(E[11]=[h("div",{class:"text-caption text-medium-emphasis mb-2"},[h("strong",null,"Default Search Windows:")],-1),h("div",{class:"text-caption"},[h("div",{class:"mb-1"},"Appointments: Next 7 days"),h("div",{class:"mb-1"},"Consultations: Next 30 days"),h("div",{class:"mb-1"},"Treatment Plans: Next 30 days")],-1)])]),_:1})])]),_:1})}}},x5e=qt(b5e,[["__scopeId","data-v-3c599c88"]]),C5e={class:"scrollable-content"},S5e={class:"scrollable-content"},E5e={key:0,class:"text-medium-emphasis ml-2"},B5e={key:1},k5e={class:"text-center"},T5e={class:"text-center"},I5e={class:"text-body-2 text-medium-emphasis mb-4"},F5e={class:"text-caption text-center"},P5e={class:"text-center"},D5e={class:"text-caption text-center"},U5e={class:"d-flex align-center mb-1"},R5e={class:"d-flex align-center mb-1"},N5e={class:"d-flex align-center"},V5e={class:"text-h4"},L5e={class:"text-h4"},M5e={class:"text-h4"},O5e={class:"text-h4"},H5e={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},$5e={class:"d-flex align-center"},Q5e={class:"text-body-2 font-weight-medium"},G5e={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},z5e={key:0,class:"text-body-2 text-medium-emphasis ml-2"},K5e={key:0,class:"text-body-2 text-medium-emphasis mt-1"},W5e={key:2,class:"text-body-2 text-medium-emphasis mt-1"},j5e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"18",height:"18"},q5e=["d"],Y5e={__name:"tasks-page",setup(e){const{showSnackbar:t}=ca(),n=ra(),a=V(0),r=V(null),s=ne(()=>n.state.reminderModule.searchResults),o=ne(()=>n.state.reminderModule.isLoading),i=ne(()=>n.state.reminderModule.hasSearched),c=ne(()=>n.state.reminderModule.searchError),A=ne(()=>n.state.reminderModule.filters),d=ne(()=>n.getters["reminderModule/hasActiveFilters"]),f=ne(()=>n.getters["reminderModule/uniquePatientsCount"]),m=ne(()=>n.getters["reminderModule/pendingRemindersCount"]),v=ne(()=>n.getters["reminderModule/completedRemindersCount"]),p=V([{title:"Reminders",disabled:!1}]);dn(()=>{try{console.log("Tasks page initialized")}catch(E){console.error("Error setting up tasks page:",E),r.value="Failed to initialize tasks page"}});const g=E=>{const C=E.details?.patient_phone||E.details?.contactNumber||E.details?.contact_number;if(!C)return!1;const U=C.replace(/\D/g,"");return U.length===10||U.length===12&&U.startsWith("91")},y=async E=>{try{const C=n.getters["doctorModule/currentDoctor"];if(!C){t({message:"Please select a doctor first",color:"warning",timeout:5e3});return}if(!g(E)){t({message:"Patient contact number not available or invalid",color:"warning",timeout:5e3});return}E.sendingWhatsApp=!0,console.log(" Sending WhatsApp reminder for:",E.type,E.patientName);const U=await kTe(E,C);if(U.success)t({message:U.message||"WhatsApp reminder sent successfully",color:"success",timeout:3e3});else throw new Error(U.error||"Failed to send WhatsApp reminder")}catch(C){console.error(" WhatsApp reminder failed:",C),t({message:C.message||"Failed to send WhatsApp reminder",color:"error",timeout:5e3})}finally{E&&(E.sendingWhatsApp=!1)}},w=async E=>{try{await n.dispatch("reminderModule/updateFilters",{filters:E}),console.log(" Reminder filters updated via store:",E)}catch(C){console.error("Error updating filters:",C),r.value="Failed to update search filters"}},b=async(E=null)=>{try{if(E&&await n.dispatch("reminderModule/updateFilters",{filters:E}),!n.state.doctorModule?.doctorId){t({message:"Please select a doctor first to search reminders",color:"warning",timeout:5e3});return}console.log(" Starting reminder search...");const U=await n.dispatch("reminderModule/performSearch");if(U.success){const F=U.data.length;let L=`Found ${F} reminder${F!==1?"s":""}`;U.partialErrors?.length>0?(L+=` (${U.partialErrors.length} source${U.partialErrors.length!==1?"s":""} failed)`,t({message:L,color:"warning",timeout:5e3})):t({message:L,color:"success",timeout:3e3})}else throw new Error(U.error?.message||"Search failed")}catch(C){console.error(" Search failed:",C),t({message:C.message||"Failed to search reminders",color:"error",timeout:5e3})}},x=()=>{D(),setTimeout(()=>{b()},100)},T=async()=>{await b()},D=async()=>{try{await n.dispatch("reminderModule/clearAll"),t({message:"All filters and results cleared",color:"success",timeout:3e3})}catch(E){console.error("Error clearing filters:",E),r.value="Failed to clear filters"}},k=async E=>{try{const C=!E.details.isReminded,U=C?"reminded":"not reminded";console.log(` Toggling reminder status to: ${U}`,E),console.log(" Reminder details:",E.details),t({message:`Marking reminder as ${U}...`,color:"info",timeout:2e3}),await new Promise(L=>requestAnimationFrame(L));const F=await n.dispatch("reminderModule/markAsReminded",{reminder:E,isReminded:C});if(F.success)await new Promise(L=>requestAnimationFrame(L)),t({message:`Reminder marked as ${U}`,color:"success",timeout:3e3});else throw new Error(F.error||"Failed to update reminder status")}catch(C){console.error(" Failed to toggle reminder status:",C),t({message:C.message||"Failed to update reminder status",color:"error",timeout:5e3})}},S=E=>{if(!E)return"";try{return new Date(E).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return E}};return(E,C)=>{const U=I("v-alert"),F=I("v-tab"),L=I("v-tabs"),H=I("v-card"),ue=I("v-col"),ie=I("v-row"),Q=I("v-card-text"),X=I("v-progress-circular"),le=I("v-icon"),Z=I("v-btn"),re=I("v-empty-state"),q=I("v-divider"),P=I("v-card-title"),G=I("v-tooltip"),J=I("v-lazy"),M=I("v-window-item"),te=I("v-window"),Y=I("v-main");return R(),ve(Y,null,{default:u(()=>[r.value?(R(),ve(U,{key:0,type:"error",dismissible:"","onClick:close":C[0]||(C[0]=W=>r.value=null),class:"ma-3"},{default:u(()=>[O(K(r.value),1)]),_:1})):ye("",!0),l(ie,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[l(ue,{cols:"12"},{default:u(()=>[l(H,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center"},{default:u(()=>[l(L,{modelValue:a.value,"onUpdate:modelValue":C[1]||(C[1]=W=>a.value=W),color:"primary","align-tabs":"start",class:"w-100"},{default:u(()=>[(R(!0),Ae(Ke,null,Gt(p.value,(W,ee)=>(R(),ve(F,{key:ee,value:ee,disabled:W.disabled},{default:u(()=>[O(K(W.title),1)]),_:2},1032,["value","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(te,{modelValue:a.value,"onUpdate:modelValue":C[2]||(C[2]=W=>a.value=W),class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[l(M,{value:0,style:{height:"100%"}},{default:u(()=>[l(ie,{"aria-label":"reminders row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[l(ue,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[h("div",C5e,[l(x5e,{filters:A.value,isLoading:o.value,onFilterChange:w,onSearch:b,onClearFilters:D},null,8,["filters","isLoading"])])]),_:1}),l(ue,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[h("div",S5e,[l(H,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[l(H,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(Q,{class:"pt-2 pb-0"},{default:u(()=>[s.value.length>0&&i.value?(R(),Ae(Ke,{key:0},[h("strong",null,K(s.value.length),1),O(" reminder"+K(s.value.length!==1?"s":"")+" found ",1),d.value?(R(),Ae("span",E5e,"  Filtered ")):ye("",!0)],64)):(R(),Ae("strong",B5e,"Reminders Management"))]),_:1})]),_:1}),o.value?(R(),ve(ie,{key:0,"no-gutters":""},{default:u(()=>[l(ue,{cols:"12",class:"d-flex justify-center align-center",style:{height:"calc(100vh - 280px)"}},{default:u(()=>[h("div",k5e,[l(X,{indeterminate:"",size:"64",color:"primary"}),C[3]||(C[3]=h("div",{class:"mt-4 text-subtitle-1"},"Searching Reminders...",-1))])]),_:1})]),_:1})):c.value?(R(),ve(ie,{key:1,"no-gutters":""},{default:u(()=>[l(ue,{cols:"12",class:"d-flex justify-center align-center",style:{height:"calc(100vh - 280px)"}},{default:u(()=>[h("div",T5e,[l(le,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...C[4]||(C[4]=[O("mdi-alert-circle",-1)])]),_:1}),C[6]||(C[6]=h("div",{class:"text-h6 mb-2"},"Search Failed",-1)),h("div",I5e,K(c.value),1),l(Z,{color:"primary",onClick:T,"prepend-icon":"mdi-refresh",loading:o.value,disabled:o.value},{default:u(()=>[...C[5]||(C[5]=[O(" Try Again ",-1)])]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})):s.value.length===0&&i.value?(R(),ve(re,{key:2,image:Qe(Gv),class:"d-flex justify-center"},{title:u(()=>[...C[7]||(C[7]=[h("div",{class:"text-subtitle-2 mt-8 text-center"}," No Reminders Found ",-1)])]),text:u(()=>[C[12]||(C[12]=h("div",{class:"text-caption text-center mb-4"}," Try adjusting your search criteria or clear filters to see all reminders ",-1)),l(H,{color:"info",variant:"tonal",class:"pa-3 mx-auto",style:{"max-width":"400px"},rounded:"lg"},{default:u(()=>[h("div",F5e,[l(le,{size:"small",class:"mb-1"},{default:u(()=>[...C[8]||(C[8]=[O("mdi-information",-1)])]),_:1}),C[9]||(C[9]=h("div",{class:"font-weight-medium mb-1"},"Default Search Ranges",-1)),C[10]||(C[10]=h("div",{class:"text-body-2 text-left"},[O("  "),h("strong",null,"Appointments:"),O(" Next 7 days"),h("br"),O("  "),h("strong",null,"Consultations:"),O(" Next 30 days"),h("br"),O("  "),h("strong",null,"Treatment Plans:"),O(" Next 30 days ")],-1)),C[11]||(C[11]=h("div",{class:"mt-2 text-caption text-medium-emphasis"}," Use date filters to search beyond these ranges ",-1))])]),_:1})]),actions:u(()=>[l(Z,{color:"primary",variant:"outlined",onClick:D,"prepend-icon":"mdi-filter-remove",loading:o.value,disabled:o.value},{default:u(()=>[...C[13]||(C[13]=[O(" Clear Filters ",-1)])]),_:1},8,["loading","disabled"])]),_:1},8,["image"])):i.value?s.value.length>0?(R(),Ae(Ke,{key:4},[l(ie,{class:"mb-1 pa-1"},{default:u(()=>[l(ue,{cols:"3"},{default:u(()=>[l(H,{color:"primary",variant:"tonal"},{default:u(()=>[l(Q,{class:"text-center"},{default:u(()=>[h("div",V5e,K(f.value),1),C[27]||(C[27]=h("div",{class:"text-caption"},"Unique Patients",-1))]),_:1})]),_:1})]),_:1}),l(ue,{cols:"3"},{default:u(()=>[l(H,{color:"success",variant:"tonal"},{default:u(()=>[l(Q,{class:"text-center"},{default:u(()=>[h("div",L5e,K(m.value),1),C[28]||(C[28]=h("div",{class:"text-caption"},"Pending",-1))]),_:1})]),_:1})]),_:1}),l(ue,{cols:"3"},{default:u(()=>[l(H,{color:"info",variant:"tonal"},{default:u(()=>[l(Q,{class:"text-center"},{default:u(()=>[h("div",M5e,K(v.value),1),C[29]||(C[29]=h("div",{class:"text-caption"},"Completed",-1))]),_:1})]),_:1})]),_:1}),l(ue,{cols:"3"},{default:u(()=>[l(H,{color:"warning",variant:"tonal"},{default:u(()=>[l(Q,{class:"text-center"},{default:u(()=>[h("div",O5e,K(s.value.length),1),C[30]||(C[30]=h("div",{class:"text-caption"},"Total Reminders",-1))]),_:1})]),_:1})]),_:1})]),_:1}),l(ie,{"no-gutters":""},{default:u(()=>[l(ue,{cols:"12",class:"scroll-element",style:{"padding-bottom":"40px"}},{default:u(()=>[(R(!0),Ae(Ke,null,Gt(s.value,W=>(R(),ve(J,{key:`reminder-${W.id}-${W.status}-${W.details?.isReminded||!1}`,options:{threshold:.1,rootMargin:"100px"},"min-height":"60",eager:""},{default:u(()=>[l(H,{style:{textAlign:"left"},density:"compact",class:"mb-2 mx-2 card-enhanced card-status-default",rounded:"lg"},{default:u(()=>[l(ie,{"no-gutters":""},{default:u(()=>[l(ue,{cols:"10"},{default:u(()=>[l(P,{class:"d-flex justify-space-between align-center pb-0 pt-2"},{default:u(()=>[h("span",H5e,K(W.title||"Reminder"),1),h("div",$5e,[h("span",Q5e,K(S(W.dueDate)),1)])]),_:2},1024),l(Q,{class:"pb-1"},{default:u(()=>[l(ie,{dense:""},{default:u(()=>[l(ue,{cols:"12"},{default:u(()=>[h("div",G5e,[O(K(W.patientName)+" ",1),W.description?(R(),Ae("span",z5e," ("+K(W.description)+") ",1)):ye("",!0)]),W.type==="consultation"&&W.consultationDetails?(R(),Ae("div",K5e,K(W.consultationDetails),1)):ye("",!0),W.type==="procedures"&&W.procedureDetails?(R(!0),Ae(Ke,{key:1},Gt(W.procedureDetails.split(" | "),(ee,ae)=>(R(),Ae("div",{key:ae,class:"text-body-2 text-medium-emphasis mt-1"},K(ee),1))),128)):ye("",!0),W.type==="appointment"&&W.lastAppointmentDetails?(R(),Ae("div",W5e,K(W.lastAppointmentDetails),1)):ye("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),l(ue,{cols:"2",class:"d-flex justify-center align-center"},{default:u(()=>[l(ie,{"no-gutters":""},{default:u(()=>[l(ue,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[l(En,{permission:"tasks.edit",tag:"span"},{default:u(()=>[l(G,{text:W.status==="completed"?"Mark as Not Reminded":"Mark as Reminded"},{activator:u(({props:ee})=>[l(Z,Pe({color:W.status==="completed"?"success":"warning",variant:"plain",size:"small"},{ref_for:!0},ee,{onClick:vn(ae=>k(W),["stop"]),class:"btn-hover-base mb-2"}),{default:u(()=>[l(le,{color:W.status==="completed"?"success":"warning",size:"18"},{default:u(()=>[(R(),Ae("svg",j5e,[h("path",{fill:"currentColor",d:W.status==="completed"?"M17.75 21.16L15 18.16L16.16 17L17.75 18.59L21.34 15L22.5 16.41L17.75 21.16M3 20V19L5 17V11C5 7.9 7.03 5.18 10 4.29V4C10 2.9 10.9 2 12 2C13.11 2 14 2.9 14 4V4.29C16.97 5.18 19 7.9 19 11V12.08L18 12C14.69 12 12 14.69 12 18C12 18.7 12.12 19.37 12.34 20H3M12 23C10.9 23 10 22.11 10 21H12.8C13.04 21.41 13.33 21.79 13.65 22.13C13.29 22.66 12.69 23 12 23Z":"M23 7V13H21V7M21 15H23V17H21M12 2A2 2 0 0 0 10 4A2 2 0 0 0 10 4.29C7.12 5.14 5 7.82 5 11V17L3 19V20H21V19L19 17V11C19 7.82 16.88 5.14 14 4.29A2 2 0 0 0 14 4A2 2 0 0 0 12 2M10 21A2 2 0 0 0 12 23A2 2 0 0 0 14 21Z"},null,8,q5e)]))]),_:2},1032,["color"])]),_:2},1040,["color","onClick"])]),_:2},1032,["text"])]),_:2},1024)]),_:2},1024),l(q,{class:"mx-4"}),l(ue,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[l(G,{text:"Send WhatsApp Reminder"},{activator:u(({props:ee})=>[l(Z,Pe({variant:"plain",size:"small"},{ref_for:!0},ee,{onClick:vn(ae=>y(W),["stop"]),disabled:!g(W),loading:W.sendingWhatsApp,class:"btn-hover-base mt-1"}),{default:u(()=>[l(le,{size:"18"},{default:u(()=>[...C[31]||(C[31]=[h("img",{src:Y_,alt:"WhatsApp",style:{width:"18px",height:"18px"}},null,-1)])]),_:1})]),_:1},16,["onClick","disabled","loading"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})],64)):ye("",!0):(R(),ve(ie,{key:3,"no-gutters":""},{default:u(()=>[l(ue,{cols:"12",class:"d-flex justify-center align-center",style:{height:"calc(100vh - 280px)"}},{default:u(()=>[h("div",P5e,[l(le,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...C[14]||(C[14]=[O("mdi-bell-outline",-1)])]),_:1}),C[25]||(C[25]=h("div",{class:"text-h6 mb-2"},"Reminder Management",-1)),C[26]||(C[26]=h("div",{class:"text-body-2 text-medium-emphasis mb-6"},"Use the filters on the left to search for reminders",-1)),l(Z,{color:"primary",variant:"outlined",onClick:x},{default:u(()=>[...C[15]||(C[15]=[O(" View All Reminders ",-1)])]),_:1}),l(H,{color:"surface-variant",variant:"tonal",class:"mt-6 pa-4 mx-auto",style:{"max-width":"400px"},rounded:"lg"},{default:u(()=>[h("div",D5e,[l(le,{size:"small",class:"mb-2"},{default:u(()=>[...C[16]||(C[16]=[O("mdi-clock-outline",-1)])]),_:1}),C[23]||(C[23]=h("div",{class:"font-weight-medium mb-2 text-body-2"},"Default Search Windows",-1)),l(ie,{dense:"",class:"text-left"},{default:u(()=>[l(ue,{cols:"12",class:"text-body-2"},{default:u(()=>[h("div",U5e,[l(le,{size:"x-small",color:"primary",class:"mr-2"},{default:u(()=>[...C[17]||(C[17]=[O("mdi-calendar-clock",-1)])]),_:1}),C[18]||(C[18]=h("span",null,[h("strong",null,"Appointments:"),O(" Next 7 days")],-1))]),h("div",R5e,[l(le,{size:"x-small",color:"success",class:"mr-2"},{default:u(()=>[...C[19]||(C[19]=[O("mdi-stethoscope",-1)])]),_:1}),C[20]||(C[20]=h("span",null,[h("strong",null,"Consultations:"),O(" Next 30 days")],-1))]),h("div",N5e,[l(le,{size:"x-small",color:"info",class:"mr-2"},{default:u(()=>[...C[21]||(C[21]=[O("mdi-medical-bag",-1)])]),_:1}),C[22]||(C[22]=h("span",null,[h("strong",null,"Treatment Plans:"),O(" Next 30 days")],-1))])]),_:1})]),_:1}),l(q,{class:"my-2"}),C[24]||(C[24]=h("div",{class:"text-caption text-medium-emphasis"},"  Set custom date ranges in filters to search beyond these windows ",-1))])]),_:1})])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},X5e=qt(Y5e,[["__scopeId","data-v-d9f25aad"]]),J5e={class:"filter-container pa-3",style:{flex:"1 1 auto","overflow-y":"auto"}},Z5e={class:"filter-field mb-3"},eMe={class:"d-flex justify-center mt-4"},tMe={__name:"PaymentFilter",props:{paymentDate:{type:String,default:""}},emits:["filter-change","search","clear"],setup(e,{emit:t}){const n=e,a=t,r=V(n.paymentDate||""),s=ne(()=>Rn()),o=ne(()=>!!r.value);ne(()=>{let m=0;return r.value&&m++,m});const i=m=>{if(!m)return"";try{return new Date(m).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return m}},c=()=>{d()},A=()=>{r.value="",d()},d=()=>{a("filter-change",{paymentDate:r.value,hasErrors:!1,hasFilters:o.value})},f=()=>{r.value="",a("clear"),d()};return je(()=>n.paymentDate,m=>{r.value=m||""}),d(),(m,v)=>{const p=I("v-card-text"),g=I("v-card"),y=I("v-text-field"),w=I("v-chip"),b=I("v-btn");return R(),ve(g,{color:"surfaceContainer",flat:"",style:{height:"100%",display:"flex","flex-direction":"column"}},{default:u(()=>[l(g,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(p,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...v[1]||(v[1]=[h("span",{class:"text-body-2 font-weight-medium"},"Filter Payment Receipts",-1)])]),_:1})]),_:1}),h("div",J5e,[h("div",Z5e,[l(y,{modelValue:r.value,"onUpdate:modelValue":[v[0]||(v[0]=x=>r.value=x),c],type:"date",label:"Payment Receipt Date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input date-input",max:s.value,"onClick:clear":A},null,8,["modelValue","max"]),r.value?(R(),ve(w,{key:0,size:"small",color:"primary",variant:"outlined",closable:"",class:"mt-2","onClick:close":A},{default:u(()=>[O(" Date: "+K(i(r.value)),1)]),_:1})):ye("",!0)]),h("div",eMe,[l(b,{variant:"text",size:"small","prepend-icon":"mdi-filter-remove",onClick:f,class:"filter-button-clear",disabled:!o.value},{default:u(()=>[...v[2]||(v[2]=[O(" Clear ",-1)])]),_:1},8,["disabled"])])])]),_:1})}}},nMe=qt(tMe,[["__scopeId","data-v-e2fa6283"]]),aMe={class:"scrollable-content"},rMe={class:"scrollable-content"},sMe={class:"text-center"},oMe={class:"text-center"},iMe={class:"text-body-2 text-medium-emphasis mb-4"},lMe={class:"text-center"},uMe={class:"text-body-2 text-medium-emphasis"},cMe={class:"font-weight-bold",style:{color:"black"}},dMe={key:0,class:"text-body-2 mb-1"},AMe={class:"font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},fMe={key:1,class:"text-body-2 text-medium-emphasis mb-1"},mMe={key:0,class:"amount-badge"},vMe={class:"text-body-1 font-weight-bold"},hMe={__name:"payments",setup(e){const{showSnackbar:t}=ca(),n=ra(),a=V(0),r=V([]),s=V(""),o=V(null),i=V(!1),c=V(null),A=V(!1),d=V(!1),f=V(!1),m=V(null),v=V(!1),p=V(null),g=V(!1);ne(()=>Rn());const y=ne(()=>n.getters["doctorModule/isGSTRegistered"]),w=async()=>{if(!i.value)try{i.value=!0,c.value=null;const re=await Sw(n,s.value?.trim()||"");if(re.error)throw new Error(`Search failed: ${re.error.message||"Unknown error"}`);const q=Array.isArray(re.data)?re.data:[];r.value=q.filter(P=>P.status!=="Series"),A.value=!0,s.value&&t({message:`Found ${r.value.length} payment receipt${r.value.length!==1?"s":""}`,color:"success",timeout:3e3})}catch(re){console.error("Error fetching payment receipts:",re),c.value=re.message||"Failed to search payment receipts",r.value=[],A.value=!0,t({message:c.value,color:"error",timeout:5e3})}finally{i.value=!1}},b=()=>{c.value=null,w()},x=()=>{try{s.value="",c.value=null,A.value=!0,w(),t({message:"Filters cleared successfully",color:"success",timeout:3e3})}catch(re){console.error("Error clearing filters:",re),o.value="Failed to clear filters"}},T=re=>{s.value=re.paymentDate||"",re.hasErrors||(A.value=!0,Z())},D=re=>{s.value=re.paymentDate||"",w()},k=re=>{if(y.value){const q=r.value.find(G=>G.id===re),P=q?.billId||q?.billid;P?(p.value=P,v.value=!0):(t({message:"No associated bill found. Showing payment receipt view.",color:"info",timeout:3e3}),m.value=re,d.value=!0)}else m.value=re,d.value=!0},S=re=>{if(y.value){const q=r.value.find(G=>G.id===re),P=q?.billId||q?.billid;P?(p.value=P,g.value=!0):(t({message:"No associated bill found. Showing payment receipt edit.",color:"info",timeout:3e3}),m.value=re,f.value=!0)}else console.log("Edit receipt:",re),m.value=re,f.value=!0},E=()=>{d.value=!1,m.value=null},C=()=>{f.value=!1,m.value=null},U=re=>{d.value=!1,m.value=re,f.value=!0},F=()=>{v.value=!1,p.value=null},L=re=>{v.value=!1,p.value=null,p.value=re,g.value=!0},H=()=>{g.value=!1,p.value=null},ue=re=>{console.log("Bill updated:",re),g.value=!1,p.value=null,w(),t({message:`Bill ${re.identifier} updated successfully!`,color:"success",timeout:3e3})},ie=re=>{console.log("Receipt updated:",re),f.value=!1,m.value=null,w(),t({message:`Receipt ${re.identifier} updated successfully!`,color:"success",timeout:3e3})},Q=re=>{if(!re)return"";try{let q;typeof re=="number"?q=new Date(re*1e3):q=new Date(re);const P=_o(q,"d MMM"),G=_o(q,"EEE");return`${P}, ${G}`}catch(q){return console.error("Error formatting created day:",q),""}},X=re=>{if(!re)return"";try{let q;typeof re=="number"?q=new Date(re*1e3):q=new Date(re);const P=q.getHours(),G=q.getMinutes(),J=P%12||12,M=P>=12?"PM":"AM";return`${J}.${G.toString().padStart(2,"0")}${M}`}catch(q){return console.error("Error formatting created time:",q),""}};let le;const Z=()=>{clearTimeout(le),le=setTimeout(()=>{w()},500)};return je([s],()=>{A.value=!0,Z()}),dn(()=>{try{r.value.length===0&&!A.value&&(A.value=!0,w())}catch(re){console.error("Error on mount:",re),o.value="Failed to initialize"}}),og(()=>{}),(re,q)=>{const P=I("v-alert"),G=I("v-tab"),J=I("v-tabs"),M=I("v-card"),te=I("v-col"),Y=I("v-row"),W=I("v-progress-circular"),ee=I("v-icon"),ae=I("v-btn"),oe=I("v-card-text"),j=I("v-empty-state"),ce=I("v-card-title"),de=I("v-tooltip"),_e=I("v-divider"),Re=I("v-lazy"),be=I("v-window-item"),Ee=I("v-window"),Ce=I("v-main"),Be=I("v-dialog");return R(),Ae(Ke,null,[l(Ce,null,{default:u(()=>[o.value?(R(),ve(P,{key:0,type:"error",dismissible:"","onClick:close":q[0]||(q[0]=Te=>o.value=null),class:"ma-3"},{default:u(()=>[O(K(o.value),1)]),_:1})):ye("",!0),l(Y,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[l(te,{cols:"12"},{default:u(()=>[l(M,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center"},{default:u(()=>[l(J,{modelValue:a.value,"onUpdate:modelValue":q[1]||(q[1]=Te=>a.value=Te),color:"primary","align-tabs":"start",class:"w-100"},{default:u(()=>[l(G,{value:0},{default:u(()=>[...q[7]||(q[7]=[O("List",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(Ee,{modelValue:a.value,"onUpdate:modelValue":q[2]||(q[2]=Te=>a.value=Te),class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[l(be,{value:0,style:{height:"100%"}},{default:u(()=>[l(Y,{"aria-label":"main row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[l(te,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[h("div",aMe,[l(nMe,{"payment-date":s.value,onFilterChange:T,onSearch:D,onClear:x},null,8,["payment-date"])])]),_:1}),l(te,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[h("div",rMe,[l(M,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[i.value?(R(),ve(Y,{key:0,"no-gutters":""},{default:u(()=>[l(te,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[h("div",sMe,[l(W,{indeterminate:"",color:"primary",size:"64"}),q[8]||(q[8]=h("div",{class:"mt-4 text-subtitle-1"},"Searching payment receipts...",-1))])]),_:1})]),_:1})):c.value?(R(),ve(Y,{key:1,"no-gutters":""},{default:u(()=>[l(te,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[h("div",oMe,[l(ee,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...q[9]||(q[9]=[O("mdi-alert-circle",-1)])]),_:1}),q[11]||(q[11]=h("div",{class:"text-h6 mb-2"},"Search Failed",-1)),h("div",iMe,K(c.value),1),l(ae,{color:"primary",onClick:b,"prepend-icon":"mdi-refresh"},{default:u(()=>[...q[10]||(q[10]=[O(" Try Again ",-1)])]),_:1})])]),_:1})]),_:1})):r.value&&r.value.length===0&&A.value?(R(),Ae(Ke,{key:2},[l(M,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(oe,{class:"pt-2 pb-0"},{default:u(()=>[...q[12]||(q[12]=[h("strong",null,"0",-1),O(" results found ",-1)])]),_:1})]),_:1}),l(j,{image:Qe(Gv),class:"d-flex justify-center"},{title:u(()=>[...q[13]||(q[13]=[h("div",{class:"text-subtitle-2 mt-8 text-center"}," No Payment Receipts Found ",-1)])]),text:u(()=>[...q[14]||(q[14]=[h("div",{class:"text-caption text-center"}," Try adjusting your search criteria or clear filters to see all receipts ",-1)])]),actions:u(()=>[l(ae,{color:"primary",variant:"outlined",onClick:x,"prepend-icon":"mdi-filter-remove"},{default:u(()=>[...q[15]||(q[15]=[O(" Clear Filters ",-1)])]),_:1})]),_:1},8,["image"])],64)):A.value?r.value&&r.value.length>0?(R(),Ae(Ke,{key:4},[l(M,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(oe,{class:"pt-2 pb-0"},{default:u(()=>[h("strong",null,K(r.value.length),1),O(" result"+K(r.value.length!==1?"s":"")+" found ",1)]),_:1})]),_:1}),l(Y,{"no-gutters":""},{default:u(()=>[l(te,{cols:"12",class:"scroll-element mt-2",style:{"padding-bottom":"20px"}},{default:u(()=>[(R(!0),Ae(Ke,null,Gt(r.value,(Te,Oe)=>(R(),ve(Re,{key:Te?.id||`receipt-${Oe}`,options:{threshold:.1,rootMargin:"50px"},"min-height":"80"},{default:u(()=>[Te?(R(),ve(M,{key:0,style:{textAlign:"left"},density:"compact",class:"mb-2 mx-2 card-enhanced card-status-default card-hover-base",rounded:"lg"},{default:u(()=>[l(Y,{"no-gutters":""},{default:u(()=>[l(te,{cols:"8"},{default:u(()=>[l(ce,{class:"pb-0 pt-2"},{default:u(()=>[h("div",uMe,[Te?.identifier?(R(),Ae(Ke,{key:0},[h("span",cMe,"Receipt ID: "+K(Te.identifier),1),q[19]||(q[19]=O("  ",-1))],64)):ye("",!0),Te?.createdAt||Te?.paymentReceiptDate?(R(),Ae(Ke,{key:1},[O(K(Q(Te.createdAt||Te.paymentReceiptDate))+"  "+K(X(Te.createdAt||Te.paymentReceiptDate)),1)],64)):ye("",!0)])]),_:2},1024),l(oe,{class:"pb-1"},{default:u(()=>[Te?.patientName?(R(),Ae("div",dMe,[l(ee,{size:"small",class:"mr-1"},{default:u(()=>[...q[20]||(q[20]=[O("mdi-account",-1)])]),_:1}),h("span",AMe,K(Te.patientName),1)])):ye("",!0),Te?.servicesInfo?(R(),Ae("div",fMe,[l(ee,{size:"small",class:"mr-1"},{default:u(()=>[...q[21]||(q[21]=[O("mdi-file-document-outline",-1)])]),_:1}),O(" "+K(Te.servicesInfo),1)])):ye("",!0)]),_:2},1024)]),_:2},1024),l(te,{cols:"2",class:"d-flex justify-center align-center"},{default:u(()=>[Te?.totalPaid!==void 0?(R(),Ae("div",mMe,[h("div",vMe,K(Qe(dr)(Te.totalPaid)),1)])):ye("",!0)]),_:2},1024),l(te,{cols:"2",class:"d-flex justify-center align-center"},{default:u(()=>[l(Y,{"no-gutters":""},{default:u(()=>[l(te,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[l(En,{feature:"billing"},{default:u(()=>[l(de,{text:"View Receipt"},{activator:u(({props:Me})=>[l(ae,Pe({variant:"plain",color:"primary",size:"small"},{ref_for:!0},Me,{onClick:vn(rt=>k(Te.id),["stop"]),class:"btn-hover-base mb-2"}),{default:u(()=>[l(ee,{size:"18"},{default:u(()=>[...q[22]||(q[22]=[O("mdi-eye",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),l(_e,{class:"mx-4"}),l(te,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[l(En,{permission:"billing.edit"},{default:u(()=>[l(de,{text:"Edit Receipt"},{activator:u(({props:Me})=>[l(ae,Pe({variant:"plain",color:"secondary",size:"small"},{ref_for:!0},Me,{onClick:vn(rt=>S(Te.id),["stop"]),class:"btn-hover-base mt-1"}),{default:u(()=>[l(ee,{size:"18"},{default:u(()=>[...q[23]||(q[23]=[O("mdi-pencil",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):ye("",!0)]),_:2},1024))),128))]),_:1})]),_:1})],64)):ye("",!0):(R(),ve(Y,{key:3,"no-gutters":""},{default:u(()=>[l(te,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[h("div",lMe,[l(ee,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...q[16]||(q[16]=[O("mdi-currency-inr",-1)])]),_:1}),q[17]||(q[17]=h("div",{class:"text-h6 mb-2"},"Search for Payment Receipts",-1)),q[18]||(q[18]=h("div",{class:"text-body-2 text-medium-emphasis"},"Use the filters on the left to find payment receipts",-1))])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(Be,{modelValue:d.value,"onUpdate:modelValue":q[3]||(q[3]=Te=>d.value=Te),persistent:"","max-width":"70%"},{default:u(()=>[m.value?(R(),ve(mH,{key:0,"receipt-id":m.value,onClose:E,onEditReceipt:U},null,8,["receipt-id"])):ye("",!0)]),_:1},8,["modelValue"]),l(Be,{modelValue:v.value,"onUpdate:modelValue":q[4]||(q[4]=Te=>v.value=Te),persistent:"","max-width":"80%"},{default:u(()=>[p.value?(R(),ve(yH,{key:0,"bill-id":p.value,onClose:F,onEditBill:L},null,8,["bill-id"])):ye("",!0)]),_:1},8,["modelValue"]),l(Be,{modelValue:f.value,"onUpdate:modelValue":q[5]||(q[5]=Te=>f.value=Te),persistent:"","max-width":"70%"},{default:u(()=>[m.value?(R(),ve(sO,{key:0,"receipt-id":m.value,onClose:C,onReceiptUpdated:ie},null,8,["receipt-id"])):ye("",!0)]),_:1},8,["modelValue"]),l(Be,{modelValue:g.value,"onUpdate:modelValue":q[6]||(q[6]=Te=>g.value=Te),persistent:"","max-width":"85%"},{default:u(()=>[p.value?(R(),ve(_H,{key:0,"bill-id":p.value,onClose:H,onBillUpdated:ue},null,8,["bill-id"])):ye("",!0)]),_:1},8,["modelValue"])],64)}}},pMe=qt(hMe,[["__scopeId","data-v-ac0be4df"]]),gMe={class:"filter-container pa-3",style:{flex:"1 1 auto","overflow-y":"auto"}},yMe={class:"filter-field mb-3"},_Me={key:0,class:"filter-section mb-3"},wMe={class:"filter-section-label mb-2"},bMe={class:"d-flex justify-center mt-4 mb-2"},xMe={class:"d-flex justify-center"},CMe={key:1,class:"mt-4"},SMe={class:"text-caption text-medium-emphasis"},EMe={class:"mb-1"},BMe={key:0},kMe={key:1},TMe={key:2},IMe={key:3},FMe={__name:"ReportFilter",props:{filters:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},emits:["filter-change","start-report","clear-filters"],setup(e,{emit:t}){const n=e,a=t,r=V({reportType:"3c-daily-case-register",selectedDate:"",startDate:"",endDate:"",...n.filters}),s=V([{label:"3C Daily Case Register",value:"3c-daily-case-register"},{label:"Payment Report",value:"payment-report"},{label:"GST Bill Report",value:"gst-bill-report"},{label:"GST Detail Report",value:"gst-detail-report"}]),o=ne(()=>r.value.reportType?r.value.reportType==="3c-daily-case-register"?!!r.value.selectedDate:r.value.reportType==="payment-report"||r.value.reportType==="gst-bill-report"||r.value.reportType==="gst-detail-report"?!!(r.value.startDate&&r.value.endDate):!0:!1);je(()=>n.filters,m=>{r.value={...r.value,...m}},{deep:!0});const i=()=>{a("filter-change",{...r.value})},c=()=>{o.value&&a("start-report",{...r.value})},A=()=>{r.value={reportType:"3c-daily-case-register",selectedDate:"",startDate:"",endDate:""},a("clear-filters"),i()},d=m=>{const v=s.value.find(p=>p.value===m);return v?v.label:m},f=m=>m?new Date(m).toLocaleDateString():"";return(m,v)=>{const p=I("v-card-text"),g=I("v-card"),y=I("v-select"),w=I("v-text-field"),b=I("v-col"),x=I("v-row"),T=I("v-btn"),D=I("v-form");return R(),ve(g,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[l(g,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(p,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...v[4]||(v[4]=[h("span",{class:"text-body-2 font-weight-medium"},"Report Configuration",-1)])]),_:1})]),_:1}),h("div",gMe,[l(D,{onSubmit:vn(c,["prevent"])},{default:u(()=>[h("div",yMe,[l(y,{modelValue:r.value.reportType,"onUpdate:modelValue":[v[0]||(v[0]=k=>r.value.reportType=k),i],items:s.value,"item-title":"label","item-value":"value",label:"Report Type",variant:"outlined",density:"compact",class:"filter-input"},null,8,["modelValue","items"])]),r.value.reportType?(R(),Ae("div",_Me,[h("div",wMe,K(r.value.reportType==="3c-daily-case-register"?"Select Date":"Select Date Range"),1),r.value.reportType==="3c-daily-case-register"?(R(),ve(w,{key:0,modelValue:r.value.selectedDate,"onUpdate:modelValue":[v[1]||(v[1]=k=>r.value.selectedDate=k),i],type:"date",label:"Report Date",variant:"outlined",density:"compact",class:"filter-input date-input"},null,8,["modelValue"])):r.value.reportType==="payment-report"||r.value.reportType==="gst-bill-report"||r.value.reportType==="gst-detail-report"?(R(),ve(x,{key:1,dense:""},{default:u(()=>[l(b,{cols:"6"},{default:u(()=>[l(w,{modelValue:r.value.startDate,"onUpdate:modelValue":[v[2]||(v[2]=k=>r.value.startDate=k),i],type:"date",label:"Start Date",variant:"outlined",density:"compact",class:"filter-input date-input"},null,8,["modelValue"])]),_:1}),l(b,{cols:"6"},{default:u(()=>[l(w,{modelValue:r.value.endDate,"onUpdate:modelValue":[v[3]||(v[3]=k=>r.value.endDate=k),i],type:"date",label:"End Date",variant:"outlined",density:"compact",class:"filter-input date-input"},null,8,["modelValue"])]),_:1})]),_:1})):ye("",!0)])):ye("",!0),h("div",bMe,[l(T,{type:"submit",color:"primary",size:"small",loading:e.loading,disabled:!o.value,"prepend-icon":"mdi-chart-line",class:"filter-button"},{default:u(()=>[...v[5]||(v[5]=[O(" Generate Report ",-1)])]),_:1},8,["loading","disabled"])]),h("div",xMe,[l(T,{variant:"text",size:"small",onClick:A,"prepend-icon":"mdi-filter-remove",class:"filter-button-clear"},{default:u(()=>[...v[6]||(v[6]=[O(" Clear ",-1)])]),_:1})]),r.value.reportType?(R(),Ae("div",CMe,[l(g,{variant:"outlined",class:"pa-2",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.02)"}},{default:u(()=>[h("div",SMe,[h("div",EMe,[v[7]||(v[7]=h("strong",null,"Type:",-1)),O(" "+K(d(r.value.reportType)),1)]),r.value.reportType==="3c-daily-case-register"&&r.value.selectedDate?(R(),Ae("div",BMe,[v[8]||(v[8]=h("strong",null,"Date:",-1)),O(" "+K(f(r.value.selectedDate)),1)])):ye("",!0),r.value.reportType==="payment-report"&&r.value.startDate&&r.value.endDate?(R(),Ae("div",kMe,[v[9]||(v[9]=h("strong",null,"Date Range:",-1)),O(" "+K(f(r.value.startDate))+" - "+K(f(r.value.endDate)),1)])):ye("",!0),r.value.reportType==="gst-bill-report"&&r.value.startDate&&r.value.endDate?(R(),Ae("div",TMe,[v[10]||(v[10]=h("strong",null,"Date Range:",-1)),O(" "+K(f(r.value.startDate))+" - "+K(f(r.value.endDate)),1)])):ye("",!0),r.value.reportType==="gst-detail-report"&&r.value.startDate&&r.value.endDate?(R(),Ae("div",IMe,[v[11]||(v[11]=h("strong",null,"Date Range:",-1)),O(" "+K(f(r.value.startDate))+" - "+K(f(r.value.endDate)),1)])):ye("",!0)])]),_:1})])):ye("",!0)]),_:1})])]),_:1})}}},PMe=qt(FMe,[["__scopeId","data-v-26d5957c"]]),DMe={class:"scrollable-content"},UMe={class:"scrollable-content"},RMe={key:1},NMe={class:"text-center"},VMe={class:"mt-4 text-subtitle-1"},LMe={key:0,class:"mt-4"},MMe={class:"mb-2"},OMe={class:"mb-2"},HMe={key:0,class:"mb-2"},$Me={key:1},QMe={class:"text-center"},GMe={__name:"reports",setup(e){const t=ra(),n=V(!1),a=V(""),r=V(!1),s=V(""),o=V(!1),i=V(0),c=V(""),A=V([]),d=V(null),f=V(!1),m=V({reportType:"3c-daily-case-register",selectedDate:"",startDate:"",endDate:"",includeCharts:!0,format:"pdf",includePatientDetails:!0,includeConsultationNotes:!1,includeTaxDetails:!0,includePaymentMethods:!0}),v=V([{title:"Date",key:"date",sortable:!0},{title:"Report Type",key:"reportType",sortable:!0},{title:"Format",key:"format",sortable:!0},{title:"Records",key:"recordCount",sortable:!0},{title:"Status",key:"status",sortable:!0}]),p=P=>{m.value={...m.value,...P}},g=()=>{m.value={reportType:"3c-daily-case-register",selectedDate:"",startDate:"",endDate:"",includeCharts:!0,format:"pdf",includePatientDetails:!0,includeConsultationNotes:!1,includeTaxDetails:!0,includePaymentMethods:!0}},y=async P=>{try{o.value=!0,i.value=0,c.value="Preparing report...",d.value=null,f.value=!1,console.log("Starting report generation with filters:",P),P.reportType==="3c-daily-case-register"?await ie(P):P.reportType==="payment-report"?await F(P):P.reportType==="gst-bill-report"?await w(P):P.reportType==="gst-detail-report"?await E(P):await q(P)}catch(G){console.error("Report generation error:",G),o.value=!1,i.value=0,c.value="",f.value=!1,r.value=!0,s.value="Report generation failed: "+G.message}finally{setTimeout(()=>{f.value&&(o.value=!1)},1500)}},w=async P=>{try{if(!P.startDate||!P.endDate)throw new Error("Please select both start and end dates for the GST Bill Report");const G=new Date(P.startDate),J=new Date(P.endDate);if(G>J)throw new Error("Start date must be less than or equal to end date");i.value=20,c.value="Fetching bills for date range...";const M=await IE(t,P.startDate,P.endDate);if(M.error)throw new Error(`Failed to fetch bills: ${M.error.message||"Unknown error"}`);i.value=40,c.value="Processing bill data...";const te=Array.isArray(M.data)?M.data:[],Y=te.filter(ce=>ce.status!=="Series");console.log(`Found ${Y.length} valid bills out of ${te.length} total bills for date range`),i.value=60,c.value="Transforming data to GST Bill Report format...";const W=await x(Y,P.startDate,P.endDate);i.value=80,c.value="Generating CSV file...";const ee=D(W);i.value=90,c.value="Preparing download...";const ae=`gst_bill_report_${P.startDate}_to_${P.endDate}.csv`,oe=await U(ee,ae);if(!oe.success)throw new Error(oe.error||"Failed to save report file");i.value=100,c.value="GST Bill Report generated successfully!",d.value={reportType:"GST Bill Report",totalRecords:W.length,dateRange:{from:P.startDate,to:P.endDate},filename:ae},f.value=!0;const j={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"GST Bill Report",format:"CSV",recordCount:W.length,status:"Completed",filename:ae};A.value.unshift(j),n.value=!0,a.value=`GST Bill Report generated successfully! ${W.length} records included.`}catch(G){throw console.error("GST Bill Report generation error:",G),G}},b=P=>{if(!P.services||!Array.isArray(P.services)||P.services.length===0)return{itemTotal:0,gstAmount:0,totalWithGST:0,grandTotal:0};let G=0,J=0,M=0;P.services.forEach(W=>{const ee=parseFloat(W.baseCost)||0,ae=parseInt(W.quantity)||1,oe=parseFloat(W.gstPercent)||0,j=parseFloat(W.discountAmount)||0,ce=ee*ae,de=j*ae,_e=Math.max(0,ce-de),Re=oe>0?Math.round(_e*oe/(100+oe)):0,be=_e-Re;G+=be,J+=Re,M+=_e});const te=parseFloat(P.additionalDiscount)||0,Y=Math.max(0,M-te);return{itemTotal:Math.round(G),gstAmount:J,totalWithGST:Math.round(M),grandTotal:Math.round(Y)}},x=async(P,G,J)=>{const M=[],te=P.sort((Y,W)=>{const ee=new Date(Y.billDate),ae=new Date(W.billDate);return ee-ae});for(const Y of te){const W=await T(Y.id),ee=b(Y),ae={billIdentifier:Y.identifier||"",billDate:Y.billDate||"",patientName:Y.patientName||"Unknown Patient",services:Y.servicesDescription||"",itemTotal:ee.itemTotal,gstAmount:ee.gstAmount,totalWithGST:ee.totalWithGST,additionalDiscount:Y.additionalDiscount||0,grandTotal:ee.grandTotal,cash:W.cash||0,card:W.card||0,upi:W.upi||0,bankTransfer:W.bankTransfer||0,cheque:W.cheque||0,online:W.online||0};M.push(ae)}return console.log("Transformed GST Bill Report data:",M),M},T=async P=>{const G={cash:0,card:0,upi:0,bankTransfer:0,cheque:0,online:0};try{const{getReceiptsByBill:J,getPaymentsByReceipt:M}=await Tr(async()=>{const{getReceiptsByBill:W,getPaymentsByReceipt:ee}=await Promise.resolve().then(()=>u2e);return{getReceiptsByBill:W,getPaymentsByReceipt:ee}},void 0,import.meta.url),{getPaymentsByReceipt:te}=await Tr(async()=>{const{getPaymentsByReceipt:W}=await Promise.resolve().then(()=>Rve);return{getPaymentsByReceipt:W}},void 0,import.meta.url),Y=await J(P);if(Y.success&&Array.isArray(Y.data))for(const W of Y.data){const ee=await te(W.id);ee.success&&Array.isArray(ee.data)&&ee.data.forEach(ae=>{const oe=ae.mode?.toLowerCase(),j=ae.amount||0;switch(oe){case"cash":G.cash+=j;break;case"card":G.card+=j;break;case"upi":G.upi+=j;break;case"bank transfer":case"banktransfer":G.bankTransfer+=j;break;case"cheque":G.cheque+=j;break;case"online":G.online+=j;break;default:G.online+=j;break}})}}catch(J){console.error("Error fetching payment modes for bill:",P,J)}return G},D=P=>{const J=[["Bill Identifier","Bill Date","Patient Name","Services","Total Taxable Value","GST Amount","Total with GST","Additional Discount","Grand Total","Cash","Card","UPI","Bank Transfer","Cheque","Online"].join(",")];return P.forEach(M=>{const te=[le(M.billIdentifier),M.billDate,le(M.patientName),le(M.services),M.itemTotal,M.gstAmount,M.totalWithGST,M.additionalDiscount,M.grandTotal,M.cash,M.card,M.upi,M.bankTransfer,M.cheque,M.online];J.push(te.join(","))}),J.join(`
`)},k=P=>{const G=parseFloat(P.baseCost)||0,J=parseInt(P.quantity)||1,M=parseFloat(P.gstPercent)||0,te=parseFloat(P.discountAmount)||0,Y=G*J,W=te*J,ee=Math.max(0,Y-W),ae=M>0?Math.round(ee*M/(100+M)):0,oe=ee-ae,j=ee;return{baseCost:G,discountAmount:te,gstPercent:M,quantity:J,taxableValue:Math.round(oe),gstAmount:ae,total:Math.round(j)}},S=async(P,G,J)=>{const M=[],te=P.sort((Y,W)=>{const ee=new Date(Y.billDate),ae=new Date(W.billDate);return ee-ae});for(const Y of te)if(!(!Y.services||!Array.isArray(Y.services)||Y.services.length===0))for(const W of Y.services){const ee=k(W),ae={billIdentifier:Y.identifier||"",billDate:Y.billDate||"",patientName:Y.patientName||"Unknown Patient",serviceDescription:W.serviceDescription||"",hsnSacCode:W.hsnSacCode||"",baseCost:ee.baseCost,discountAmount:ee.discountAmount,gstPercent:ee.gstPercent,quantity:ee.quantity,taxableValue:ee.taxableValue,gstAmount:ee.gstAmount,total:ee.total};M.push(ae)}return console.log("Transformed GST Detail Report data:",M),M},E=async P=>{try{i.value=10,c.value="Fetching bills data...",i.value=30,c.value="Loading bills from database...";const G=await IE(t,P.startDate,P.endDate);if(G.error)throw new Error(G.error.message||"Failed to fetch bills");const J=Array.isArray(G.data)?G.data:[],M=J.filter(oe=>oe.status!=="Series");console.log(`Found ${M.length} valid bills out of ${J.length} total bills for date range`),i.value=60,c.value="Transforming data to GST Detail Report format...";const te=await S(M,P.startDate,P.endDate);i.value=80,c.value="Generating CSV file...";const Y=C(te);i.value=90,c.value="Preparing download...";const W=`gst_detail_report_${P.startDate}_to_${P.endDate}.csv`,ee=await U(Y,W);if(!ee.success)throw new Error(ee.error||"Failed to save report file");i.value=100,c.value="GST Detail Report generated successfully!",d.value={reportType:"GST Detail Report",totalRecords:te.length,dateRange:{from:P.startDate,to:P.endDate},filename:W},f.value=!0;const ae={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"GST Detail Report",format:"CSV",recordCount:te.length,status:"Completed",filename:W};A.value.unshift(ae),n.value=!0,a.value=`GST Detail Report generated successfully! ${te.length} line items included.`}catch(G){throw console.error("GST Detail Report generation error:",G),G}},C=P=>{const J=[["Bill Identifier","Bill Date","Patient Name","Service Description","HSN/SAC Code","Base Cost per unit (incl. GST)","Discount per unit","GST %","Quantity","Taxable Value","GST Amount","Total (incl. GST)"].join(",")];return P.forEach(M=>{const te=[le(M.billIdentifier),M.billDate,le(M.patientName),le(M.serviceDescription),le(M.hsnSacCode),M.baseCost,M.discountAmount,M.gstPercent,M.quantity,M.taxableValue,M.gstAmount,M.total];J.push(te.join(","))}),J.join(`
`)},U=async(P,G)=>{try{const J=new Blob([P],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const M=await window.electronAPI.showSaveDialog({defaultPath:G,filters:[{name:"CSV Files",extensions:["csv"]}]});return!M.canceled&&M.filePath?(await window.electronAPI.writeFile(M.filePath,P),{success:!0,filePath:M.filePath,filename:G}):{success:!1,error:"Save canceled by user"}}else{const M=document.createElement("a"),te=URL.createObjectURL(J);return M.setAttribute("href",te),M.setAttribute("download",G),M.style.visibility="hidden",document.body.appendChild(M),M.click(),document.body.removeChild(M),URL.revokeObjectURL(te),{success:!0,filePath:`Downloaded: ${G}`,filename:G}}}catch(J){return console.error("Error saving GST Bill Report file:",J),{success:!1,error:J.message}}},F=async P=>{try{if(!P.startDate||!P.endDate)throw new Error("Please select both start and end dates for the Payment Report");const G=new Date(P.startDate),J=new Date(P.endDate);if(G>J)throw new Error("Start date must be less than or equal to end date");i.value=20,c.value="Fetching payment receipts for date range...";const M=await WM(t,P.startDate,P.endDate);if(M.error)throw new Error(`Failed to fetch payment receipts: ${M.error.message||"Unknown error"}`);i.value=40,c.value="Processing payment data...";const te=Array.isArray(M.data)?M.data:[],Y=te.filter(ce=>ce.status==="Created"||ce.status==="Completed");console.log(`Found ${Y.length} valid receipts out of ${te.length} total receipts for date range`),i.value=60,c.value="Transforming data to Payment Report format...";const W=L(Y,P.startDate,P.endDate);i.value=80,c.value="Generating CSV file...";const ee=H(W);i.value=90,c.value="Preparing download...";const ae=`payment_report_${P.startDate}_to_${P.endDate}.csv`,oe=await ue(ee,ae);if(!oe.success)throw new Error(oe.error||"Failed to save report file");i.value=100,c.value="Payment Report generated successfully!",d.value={reportType:"Payment Report",totalRecords:W.length,dateRange:{from:P.startDate,to:P.endDate},filename:ae},f.value=!0;const j={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"Payment Report",format:"CSV",recordCount:W.length,status:"Completed",filename:ae};A.value.unshift(j),n.value=!0,a.value=`Payment Report generated successfully! ${W.length} records included.`}catch(G){throw console.error("Payment Report generation error:",G),G}},L=(P,G,J)=>{const M=P.sort((Y,W)=>{const ee=new Date(Y.paymentReceiptDate||Y.createdAt),ae=new Date(W.paymentReceiptDate||W.createdAt);return ee-ae}),te=[];return M.forEach(Y=>{const W={cash:0,card:0,upi:0,bankTransfer:0,cheque:0,online:0};Y.payments&&Array.isArray(Y.payments)&&Y.payments.forEach(oe=>{const j=oe.mode?.toLowerCase(),ce=oe.amount||0;switch(j){case"cash":W.cash+=ce;break;case"card":W.card+=ce;break;case"upi":W.upi+=ce;break;case"bank transfer":case"banktransfer":W.bankTransfer+=ce;break;case"cheque":W.cheque+=ce;break;case"online":W.online+=ce;break;default:W.online+=ce;break}});const ee=Y.servicesInfo||"",ae={paymentReceiptId:Y.identifier||"",patientName:Y.patientName||"Unknown Patient",services:ee,totalAmount:Y.totalAmount||0,cash:W.cash,card:W.card,upi:W.upi,bankTransfer:W.bankTransfer,cheque:W.cheque,online:W.online,receiptDate:re(Y.paymentReceiptDate||Y.createdAt)};te.push(ae)}),console.log("Transformed Payment Report data:",te),te},H=P=>{const J=[["Payment Receipt ID","Patient Name","Services","Total Amount","Cash","Card","UPI","Bank Transfer","Cheque","Online","Receipt Date"].join(",")];return P.forEach(M=>{const te=[le(M.paymentReceiptId),le(M.patientName),le(M.services),M.totalAmount,M.cash,M.card,M.upi,M.bankTransfer,M.cheque,M.online,M.receiptDate];J.push(te.join(","))}),J.join(`
`)},ue=async(P,G)=>{try{const J=new Blob([P],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const M=await window.electronAPI.showSaveDialog({defaultPath:G,filters:[{name:"CSV Files",extensions:["csv"]}]});return!M.canceled&&M.filePath?(await window.electronAPI.writeFile(M.filePath,P),{success:!0,filePath:M.filePath,filename:G}):{success:!1,error:"Save canceled by user"}}else{const M=document.createElement("a"),te=URL.createObjectURL(J);return M.setAttribute("href",te),M.setAttribute("download",G),M.style.visibility="hidden",document.body.appendChild(M),M.click(),document.body.removeChild(M),URL.revokeObjectURL(te),{success:!0,filePath:`Downloaded: ${G}`,filename:G}}}catch(J){return console.error("Error saving Payment Report file:",J),{success:!1,error:J.message}}},ie=async P=>{try{if(!P.selectedDate)throw new Error("Please select a date for the 3C Daily Case Register report");i.value=20,c.value="Fetching payment receipts...";const G=await Sw(t,P.selectedDate);if(G.error)throw new Error(`Failed to fetch payment receipts: ${G.error.message||"Unknown error"}`);i.value=40,c.value="Processing receipt data...";const J=Array.isArray(G.data)?G.data:[],M=J.filter(oe=>oe.status==="Created"||oe.status==="Completed");console.log(`Found ${M.length} valid receipts out of ${J.length} total receipts`),i.value=60,c.value="Transforming data to 3C format...";const te=Q(M,P.selectedDate);i.value=80,c.value="Generating CSV file...";const Y=X(te);i.value=90,c.value="Preparing download...";const W=`3c_daily_case_register_${P.selectedDate}.csv`,ee=await Z(Y,W);if(!ee.success)throw new Error(ee.error||"Failed to save report file");i.value=100,c.value="Report generated successfully!",d.value={reportType:"3C Daily Case Register",totalRecords:te.length,dateRange:{from:P.selectedDate,to:P.selectedDate},filename:W},f.value=!0;const ae={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"3C Daily Case Register",format:"CSV",recordCount:te.length,status:"Completed",filename:W};A.value.unshift(ae),n.value=!0,a.value=`3C Report generated successfully! ${te.length} records included.`}catch(G){throw console.error("3C Report generation error:",G),G}},Q=(P,G)=>{const J=P.sort((Y,W)=>{const ee=new Date(Y.paymentReceiptDate||Y.createdAt),ae=new Date(W.paymentReceiptDate||W.createdAt);return ee-ae}),M=[];let te=1;return J.forEach(Y=>{const W=Y.servicesInfo||"",ee={date:G,serialNumber:te++,patientName:Y.patientName||"Unknown Patient",services:W,feesReceived:Y.totalPaid||0,dateOfReceipt:re(Y.paymentReceiptDate||Y.createdAt),paymentReceiptNo:Y.identifier||""};M.push(ee)}),console.log("Transformed 3C data:",M),M},X=P=>{const J=[["Date","Serial Number","Patient Name","Services","Fees Received","Date of Receipt","Payment Receipt No."].join(",")];return P.forEach(M=>{const te=[M.date,M.serialNumber,le(M.patientName),le(M.services),M.feesReceived,M.dateOfReceipt,le(M.paymentReceiptNo)];J.push(te.join(","))}),J.join(`
`)},le=P=>{if(P==null)return"";const G=String(P);return G.includes(",")||G.includes('"')||G.includes(`
`)?`"${G.replace(/"/g,'""')}"`:G},Z=async(P,G)=>{try{const J=new Blob([P],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const M=await window.electronAPI.showSaveDialog({defaultPath:G,filters:[{name:"CSV Files",extensions:["csv"]}]});return!M.canceled&&M.filePath?(await window.electronAPI.writeFile(M.filePath,P),{success:!0,filePath:M.filePath,filename:G}):{success:!1,error:"Save canceled by user"}}else{const M=document.createElement("a"),te=URL.createObjectURL(J);return M.setAttribute("href",te),M.setAttribute("download",G),M.style.visibility="hidden",document.body.appendChild(M),M.click(),document.body.removeChild(M),URL.revokeObjectURL(te),{success:!0,filePath:`Downloaded: ${G}`,filename:G}}}catch(J){return console.error("Error saving 3C report file:",J),{success:!1,error:J.message}}},re=P=>{if(!P)return"";try{return new Date(P).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"})}catch{return P}},q=async P=>{i.value=10,c.value="Collecting data...",await new Promise(W=>setTimeout(W,1e3)),i.value=30,c.value="Analyzing records...",await new Promise(W=>setTimeout(W,1500)),i.value=60,c.value="Generating charts and visualizations...",await new Promise(W=>setTimeout(W,1e3)),i.value=80,c.value="Finalizing report...",await new Promise(W=>setTimeout(W,800)),i.value=100,c.value="Report generated successfully!";const G=Math.floor(Math.random()*500)+50,M={"payment-report":"Payment Report","gst-bill-report":"GST Bill Report","gst-detail-report":"GST Detail Report","3c-daily-case-register":"3C Daily Case Register"}[P.reportType]||"Custom Report";let te=null;(P.reportType==="payment-report"||P.reportType==="gst-bill-report"||P.reportType==="gst-detail-report")&&P.startDate&&P.endDate&&(te={from:P.startDate,to:P.endDate}),d.value={reportType:M,totalRecords:G,dateRange:te,filename:`${P.reportType}_report_${new Date().toISOString().split("T")[0]}.${P.format||"pdf"}`},f.value=!0;const Y={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:M,format:(P.format||"pdf").toUpperCase(),recordCount:G,status:"Completed",filename:d.value.filename};A.value.unshift(Y),n.value=!0,a.value=`Report generated successfully! ${G} records included.`};return dn(()=>{console.log("Reports page initialized")}),(P,G)=>{const J=I("v-col"),M=I("v-card-text"),te=I("v-card"),Y=I("v-progress-circular"),W=I("v-card-title"),ee=I("v-row"),ae=I("v-data-table"),oe=I("v-icon"),j=I("v-snackbar"),ce=I("v-main");return R(),ve(ce,null,{default:u(()=>[l(En,{feature:"reports"},{default:u(()=>[l(ee,{"aria-label":"reports row",style:{height:"calc(100vh - 64px)"},class:"d-flex align-stretch ma-0"},{default:u(()=>[l(J,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[h("div",DMe,[l(PMe,{filters:m.value,loading:o.value,onFilterChange:p,onStartReport:y,onClearFilters:g},null,8,["filters","loading"])])]),_:1}),l(J,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[h("div",UMe,[l(te,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[l(te,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(M,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[A.value.length>0?(R(),Ae(Ke,{key:0},[h("strong",null,K(A.value.length),1),O(" report"+K(A.value.length!==1?"s":"")+" available ",1)],64)):(R(),Ae("strong",RMe,"Generate Reports"))]),_:1})]),_:1}),o.value?(R(),ve(ee,{key:0,"no-gutters":""},{default:u(()=>[l(J,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[h("div",NMe,[l(Y,{"model-value":i.value,color:"primary",size:"64",width:"6"},{default:u(()=>[O(K(i.value)+"% ",1)]),_:1},8,["model-value"]),h("div",VMe,K(c.value||"Generating report..."),1),d.value?(R(),Ae("div",LMe,[l(te,{class:"mx-auto","max-width":"300",outlined:""},{default:u(()=>[l(W,{class:"text-h6"},{default:u(()=>[...G[2]||(G[2]=[O("Report Summary",-1)])]),_:1}),l(M,null,{default:u(()=>[h("div",MMe,[G[3]||(G[3]=h("strong",null,"Report Type:",-1)),O(" "+K(d.value.reportType),1)]),h("div",OMe,[G[4]||(G[4]=h("strong",null,"Total Records:",-1)),O(" "+K(d.value.totalRecords),1)]),d.value.dateRange?(R(),Ae("div",HMe,[G[5]||(G[5]=h("strong",null,"Date Range:",-1)),O(" "+K(d.value.dateRange.from)+" - "+K(d.value.dateRange.to),1)])):ye("",!0),f.value&&d.value.filename?(R(),Ae("div",$Me,[G[6]||(G[6]=h("strong",null,"File:",-1)),O(" "+K(d.value.filename),1)])):ye("",!0)]),_:1})]),_:1})])):ye("",!0)])]),_:1})]),_:1})):A.value.length>0?(R(),ve(ee,{key:1,"no-gutters":""},{default:u(()=>[l(J,{cols:"12",class:"scroll-element mt-2",style:{"padding-bottom":"20px"}},{default:u(()=>[l(ae,{headers:v.value,items:A.value,class:"elevation-1 ma-2",density:"comfortable"},null,8,["headers","items"])]),_:1})]),_:1})):(R(),ve(ee,{key:2,"no-gutters":"",style:{height:"calc(100% - 60px)"}},{default:u(()=>[l(J,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%"}},{default:u(()=>[h("div",QMe,[l(oe,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...G[7]||(G[7]=[O("mdi-chart-line",-1)])]),_:1}),G[8]||(G[8]=h("div",{class:"text-h6 mb-2"},"Generate Reports",-1)),G[9]||(G[9]=h("div",{class:"text-body-2 text-medium-emphasis"},"Configure report settings and generate comprehensive clinic reports",-1))])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1}),l(j,{modelValue:n.value,"onUpdate:modelValue":G[0]||(G[0]=de=>n.value=de),class:"elevation-24",color:"success"},{default:u(()=>[O(K(a.value),1)]),_:1},8,["modelValue"]),l(j,{modelValue:r.value,"onUpdate:modelValue":G[1]||(G[1]=de=>r.value=de),class:"elevation-24",color:"error"},{default:u(()=>[O(K(s.value),1)]),_:1},8,["modelValue"])]),_:1})]),_:1})}}},zMe=qt(GMe,[["__scopeId","data-v-8ffafc0c"]]),KMe={class:"filter-container pa-3",style:{flex:"1 1 auto","overflow-y":"auto"}},WMe={class:"filter-field mb-3"},jMe={class:"filter-field mb-3"},qMe={class:"status-chip-wrapper"},YMe={class:"d-flex justify-center mt-4 mb-2"},XMe={class:"d-flex justify-center"},JMe={__name:"PharmacyQueueFilter",props:{billDate:{type:String,default:""},status:{type:String,default:null},isSearching:{type:Boolean,default:!1}},emits:["filter-change","search","clear"],setup(e,{emit:t}){const n=e,a=t,r=V(n.billDate||""),s=V(n.status!==null?n.status:null),o=[{value:null,label:"All"},{value:"Draft",label:"Draft"},{value:"Finalized",label:"Finalized"},{value:"Cancelled",label:"Cancelled"},{value:"Refund",label:"Refund"}],i=ne(()=>Rn()),c=ne(()=>!!r.value||s.value!==null),A=()=>{v()},d=()=>{r.value="",v()},f=()=>{v()},m=y=>{s.value=y,f()},v=()=>{a("filter-change",{billDate:r.value,status:s.value,hasErrors:!1,hasFilters:c.value})},p=()=>{a("search",{billDate:r.value,status:s.value})},g=()=>{r.value="",s.value=null,a("clear"),v()};return je(()=>n.billDate,y=>{r.value=y||""}),je(()=>n.status,y=>{s.value=y!==void 0?y:null}),v(),(y,w)=>{const b=I("v-card-text"),x=I("v-card"),T=I("v-text-field"),D=I("v-icon"),k=I("v-chip"),S=I("v-btn");return R(),ve(x,{color:"surfaceContainer",flat:"",style:{height:"100%",display:"flex","flex-direction":"column"}},{default:u(()=>[l(x,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(b,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...w[1]||(w[1]=[h("span",{class:"text-body-2 font-weight-medium"},"Filter Pharmacy Bills",-1)])]),_:1})]),_:1}),h("div",KMe,[h("div",WMe,[l(T,{modelValue:r.value,"onUpdate:modelValue":[w[0]||(w[0]=E=>r.value=E),A],type:"date",label:"Bill Date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input date-input",max:i.value,"onClick:clear":d},null,8,["modelValue","max"])]),h("div",jMe,[w[3]||(w[3]=h("div",{class:"filter-section-label mb-2"},"Status",-1)),h("div",qMe,[(R(),Ae(Ke,null,Gt(o,E=>l(k,{key:E.value,size:"small",variant:s.value===E.value?"flat":"outlined",color:s.value===E.value?"primary":"default",class:ct(["status-chip",{"status-chip-active":s.value===E.value}]),onClick:C=>m(E.value)},{default:u(()=>[s.value===E.value?(R(),ve(D,{key:0,size:"small",class:"mr-1"},{default:u(()=>[...w[2]||(w[2]=[O(" mdi-check-circle ",-1)])]),_:1})):ye("",!0),O(" "+K(E.label),1)]),_:2},1032,["variant","color","class","onClick"])),64))])]),h("div",YMe,[l(S,{color:"primary",size:"small","prepend-icon":"mdi-magnify",onClick:p,class:"filter-button",loading:e.isSearching},{default:u(()=>[...w[4]||(w[4]=[O(" Search ",-1)])]),_:1},8,["loading"])]),h("div",XMe,[l(S,{variant:"text",size:"small","prepend-icon":"mdi-filter-remove",onClick:g,class:"filter-button-clear",disabled:!c.value},{default:u(()=>[...w[5]||(w[5]=[O(" Clear ",-1)])]),_:1},8,["disabled"])])])]),_:1})}}},ZMe=qt(JMe,[["__scopeId","data-v-95bbd6af"]]);var tv=9e15,rA=1e9,KE="0123456789abcdef",S2="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",E2="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",WE={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-tv,maxE:tv,crypto:!1},K9,wc,Kn=!0,zw="[DecimalError] ",Yd=zw+"Invalid argument: ",W9=zw+"Precision limit exceeded",j9=zw+"crypto unavailable",q9="[object Decimal]",bo=Math.floor,ps=Math.pow,eOe=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,tOe=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,nOe=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Y9=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Vl=1e7,Pn=7,aOe=9007199254740991,rOe=S2.length-1,jE=E2.length-1,$t={toStringTag:q9};$t.absoluteValue=$t.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),xn(e)};$t.ceil=function(){return xn(new this.constructor(this),this.e+1,2)};$t.clampedTo=$t.clamp=function(e,t){var n,a=this,r=a.constructor;if(e=new r(e),t=new r(t),!e.s||!t.s)return new r(NaN);if(e.gt(t))throw Error(Yd+t);return n=a.cmp(e),n<0?e:a.cmp(t)>0?t:new r(a)};$t.comparedTo=$t.cmp=function(e){var t,n,a,r,s=this,o=s.d,i=(e=new s.constructor(e)).d,c=s.s,A=e.s;if(!o||!i)return!c||!A?NaN:c!==A?c:o===i?0:!o^c<0?1:-1;if(!o[0]||!i[0])return o[0]?c:i[0]?-A:0;if(c!==A)return c;if(s.e!==e.e)return s.e>e.e^c<0?1:-1;for(a=o.length,r=i.length,t=0,n=a<r?a:r;t<n;++t)if(o[t]!==i[t])return o[t]>i[t]^c<0?1:-1;return a===r?0:a>r^c<0?1:-1};$t.cosine=$t.cos=function(){var e,t,n=this,a=n.constructor;return n.d?n.d[0]?(e=a.precision,t=a.rounding,a.precision=e+Math.max(n.e,n.sd())+Pn,a.rounding=1,n=sOe(a,tQ(a,n)),a.precision=e,a.rounding=t,xn(wc==2||wc==3?n.neg():n,e,t,!0)):new a(1):new a(NaN)};$t.cubeRoot=$t.cbrt=function(){var e,t,n,a,r,s,o,i,c,A,d=this,f=d.constructor;if(!d.isFinite()||d.isZero())return new f(d);for(Kn=!1,s=d.s*ps(d.s*d,1/3),!s||Math.abs(s)==1/0?(n=Ks(d.d),e=d.e,(s=(e-n.length+1)%3)&&(n+=s==1||s==-2?"0":"00"),s=ps(n,1/3),e=bo((e+1)/3)-(e%3==(e<0?-1:2)),s==1/0?n="5e"+e:(n=s.toExponential(),n=n.slice(0,n.indexOf("e")+1)+e),a=new f(n),a.s=d.s):a=new f(s.toString()),o=(e=f.precision)+3;;)if(i=a,c=i.times(i).times(i),A=c.plus(d),a=ir(A.plus(d).times(i),A.plus(c),o+2,1),Ks(i.d).slice(0,o)===(n=Ks(a.d)).slice(0,o))if(n=n.slice(o-3,o+1),n=="9999"||!r&&n=="4999"){if(!r&&(xn(i,e+1,0),i.times(i).times(i).eq(d))){a=i;break}o+=4,r=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(xn(a,e+1,1),t=!a.times(a).times(a).eq(d));break}return Kn=!0,xn(a,e,f.rounding,t)};$t.decimalPlaces=$t.dp=function(){var e,t=this.d,n=NaN;if(t){if(e=t.length-1,n=(e-bo(this.e/Pn))*Pn,e=t[e],e)for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n};$t.dividedBy=$t.div=function(e){return ir(this,new this.constructor(e))};$t.dividedToIntegerBy=$t.divToInt=function(e){var t=this,n=t.constructor;return xn(ir(t,new n(e),0,1,1),n.precision,n.rounding)};$t.equals=$t.eq=function(e){return this.cmp(e)===0};$t.floor=function(){return xn(new this.constructor(this),this.e+1,3)};$t.greaterThan=$t.gt=function(e){return this.cmp(e)>0};$t.greaterThanOrEqualTo=$t.gte=function(e){var t=this.cmp(e);return t==1||t===0};$t.hyperbolicCosine=$t.cosh=function(){var e,t,n,a,r,s=this,o=s.constructor,i=new o(1);if(!s.isFinite())return new o(s.s?1/0:NaN);if(s.isZero())return i;n=o.precision,a=o.rounding,o.precision=n+Math.max(s.e,s.sd())+4,o.rounding=1,r=s.d.length,r<32?(e=Math.ceil(r/3),t=(1/Ww(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),s=Wv(o,1,s.times(t),new o(1),!0);for(var c,A=e,d=new o(8);A--;)c=s.times(s),s=i.minus(c.times(d.minus(c.times(d))));return xn(s,o.precision=n,o.rounding=a,!0)};$t.hyperbolicSine=$t.sinh=function(){var e,t,n,a,r=this,s=r.constructor;if(!r.isFinite()||r.isZero())return new s(r);if(t=s.precision,n=s.rounding,s.precision=t+Math.max(r.e,r.sd())+4,s.rounding=1,a=r.d.length,a<3)r=Wv(s,2,r,r,!0);else{e=1.4*Math.sqrt(a),e=e>16?16:e|0,r=r.times(1/Ww(5,e)),r=Wv(s,2,r,r,!0);for(var o,i=new s(5),c=new s(16),A=new s(20);e--;)o=r.times(r),r=r.times(i.plus(o.times(c.times(o).plus(A))))}return s.precision=t,s.rounding=n,xn(r,t,n,!0)};$t.hyperbolicTangent=$t.tanh=function(){var e,t,n=this,a=n.constructor;return n.isFinite()?n.isZero()?new a(n):(e=a.precision,t=a.rounding,a.precision=e+7,a.rounding=1,ir(n.sinh(),n.cosh(),a.precision=e,a.rounding=t)):new a(n.s)};$t.inverseCosine=$t.acos=function(){var e=this,t=e.constructor,n=e.abs().cmp(1),a=t.precision,r=t.rounding;return n!==-1?n===0?e.isNeg()?bu(t,a,r):new t(0):new t(NaN):e.isZero()?bu(t,a+4,r).times(.5):(t.precision=a+6,t.rounding=1,e=new t(1).minus(e).div(e.plus(1)).sqrt().atan(),t.precision=a,t.rounding=r,e.times(2))};$t.inverseHyperbolicCosine=$t.acosh=function(){var e,t,n=this,a=n.constructor;return n.lte(1)?new a(n.eq(1)?0:NaN):n.isFinite()?(e=a.precision,t=a.rounding,a.precision=e+Math.max(Math.abs(n.e),n.sd())+4,a.rounding=1,Kn=!1,n=n.times(n).minus(1).sqrt().plus(n),Kn=!0,a.precision=e,a.rounding=t,n.ln()):new a(n)};$t.inverseHyperbolicSine=$t.asinh=function(){var e,t,n=this,a=n.constructor;return!n.isFinite()||n.isZero()?new a(n):(e=a.precision,t=a.rounding,a.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,a.rounding=1,Kn=!1,n=n.times(n).plus(1).sqrt().plus(n),Kn=!0,a.precision=e,a.rounding=t,n.ln())};$t.inverseHyperbolicTangent=$t.atanh=function(){var e,t,n,a,r=this,s=r.constructor;return r.isFinite()?r.e>=0?new s(r.abs().eq(1)?r.s/0:r.isZero()?r:NaN):(e=s.precision,t=s.rounding,a=r.sd(),Math.max(a,e)<2*-r.e-1?xn(new s(r),e,t,!0):(s.precision=n=a-r.e,r=ir(r.plus(1),new s(1).minus(r),n+e,1),s.precision=e+4,s.rounding=1,r=r.ln(),s.precision=e,s.rounding=t,r.times(.5))):new s(NaN)};$t.inverseSine=$t.asin=function(){var e,t,n,a,r=this,s=r.constructor;return r.isZero()?new s(r):(t=r.abs().cmp(1),n=s.precision,a=s.rounding,t!==-1?t===0?(e=bu(s,n+4,a).times(.5),e.s=r.s,e):new s(NaN):(s.precision=n+6,s.rounding=1,r=r.div(new s(1).minus(r.times(r)).sqrt().plus(1)).atan(),s.precision=n,s.rounding=a,r.times(2)))};$t.inverseTangent=$t.atan=function(){var e,t,n,a,r,s,o,i,c,A=this,d=A.constructor,f=d.precision,m=d.rounding;if(A.isFinite()){if(A.isZero())return new d(A);if(A.abs().eq(1)&&f+4<=jE)return o=bu(d,f+4,m).times(.25),o.s=A.s,o}else{if(!A.s)return new d(NaN);if(f+4<=jE)return o=bu(d,f+4,m).times(.5),o.s=A.s,o}for(d.precision=i=f+10,d.rounding=1,n=Math.min(28,i/Pn+2|0),e=n;e;--e)A=A.div(A.times(A).plus(1).sqrt().plus(1));for(Kn=!1,t=Math.ceil(i/Pn),a=1,c=A.times(A),o=new d(A),r=A;e!==-1;)if(r=r.times(c),s=o.minus(r.div(a+=2)),r=r.times(c),o=s.plus(r.div(a+=2)),o.d[t]!==void 0)for(e=t;o.d[e]===s.d[e]&&e--;);return n&&(o=o.times(2<<n-1)),Kn=!0,xn(o,d.precision=f,d.rounding=m,!0)};$t.isFinite=function(){return!!this.d};$t.isInteger=$t.isInt=function(){return!!this.d&&bo(this.e/Pn)>this.d.length-2};$t.isNaN=function(){return!this.s};$t.isNegative=$t.isNeg=function(){return this.s<0};$t.isPositive=$t.isPos=function(){return this.s>0};$t.isZero=function(){return!!this.d&&this.d[0]===0};$t.lessThan=$t.lt=function(e){return this.cmp(e)<0};$t.lessThanOrEqualTo=$t.lte=function(e){return this.cmp(e)<1};$t.logarithm=$t.log=function(e){var t,n,a,r,s,o,i,c,A=this,d=A.constructor,f=d.precision,m=d.rounding,v=5;if(e==null)e=new d(10),t=!0;else{if(e=new d(e),n=e.d,e.s<0||!n||!n[0]||e.eq(1))return new d(NaN);t=e.eq(10)}if(n=A.d,A.s<0||!n||!n[0]||A.eq(1))return new d(n&&!n[0]?-1/0:A.s!=1?NaN:n?0:1/0);if(t)if(n.length>1)s=!0;else{for(r=n[0];r%10===0;)r/=10;s=r!==1}if(Kn=!1,i=f+v,o=Ed(A,i),a=t?B2(d,i+10):Ed(e,i),c=ir(o,a,i,1),z0(c.d,r=f,m))do if(i+=10,o=Ed(A,i),a=t?B2(d,i+10):Ed(e,i),c=ir(o,a,i,1),!s){+Ks(c.d).slice(r+1,r+15)+1==1e14&&(c=xn(c,f+1,0));break}while(z0(c.d,r+=10,m));return Kn=!0,xn(c,f,m)};$t.minus=$t.sub=function(e){var t,n,a,r,s,o,i,c,A,d,f,m,v=this,p=v.constructor;if(e=new p(e),!v.d||!e.d)return!v.s||!e.s?e=new p(NaN):v.d?e.s=-e.s:e=new p(e.d||v.s!==e.s?v:NaN),e;if(v.s!=e.s)return e.s=-e.s,v.plus(e);if(A=v.d,m=e.d,i=p.precision,c=p.rounding,!A[0]||!m[0]){if(m[0])e.s=-e.s;else if(A[0])e=new p(v);else return new p(c===3?-0:0);return Kn?xn(e,i,c):e}if(n=bo(e.e/Pn),d=bo(v.e/Pn),A=A.slice(),s=d-n,s){for(f=s<0,f?(t=A,s=-s,o=m.length):(t=m,n=d,o=A.length),a=Math.max(Math.ceil(i/Pn),o)+2,s>a&&(s=a,t.length=1),t.reverse(),a=s;a--;)t.push(0);t.reverse()}else{for(a=A.length,o=m.length,f=a<o,f&&(o=a),a=0;a<o;a++)if(A[a]!=m[a]){f=A[a]<m[a];break}s=0}for(f&&(t=A,A=m,m=t,e.s=-e.s),o=A.length,a=m.length-o;a>0;--a)A[o++]=0;for(a=m.length;a>s;){if(A[--a]<m[a]){for(r=a;r&&A[--r]===0;)A[r]=Vl-1;--A[r],A[a]+=Vl}A[a]-=m[a]}for(;A[--o]===0;)A.pop();for(;A[0]===0;A.shift())--n;return A[0]?(e.d=A,e.e=Kw(A,n),Kn?xn(e,i,c):e):new p(c===3?-0:0)};$t.modulo=$t.mod=function(e){var t,n=this,a=n.constructor;return e=new a(e),!n.d||!e.s||e.d&&!e.d[0]?new a(NaN):!e.d||n.d&&!n.d[0]?xn(new a(n),a.precision,a.rounding):(Kn=!1,a.modulo==9?(t=ir(n,e.abs(),0,3,1),t.s*=e.s):t=ir(n,e,0,a.modulo,1),t=t.times(e),Kn=!0,n.minus(t))};$t.naturalExponential=$t.exp=function(){return qE(this)};$t.naturalLogarithm=$t.ln=function(){return Ed(this)};$t.negated=$t.neg=function(){var e=new this.constructor(this);return e.s=-e.s,xn(e)};$t.plus=$t.add=function(e){var t,n,a,r,s,o,i,c,A,d,f=this,m=f.constructor;if(e=new m(e),!f.d||!e.d)return!f.s||!e.s?e=new m(NaN):f.d||(e=new m(e.d||f.s===e.s?f:NaN)),e;if(f.s!=e.s)return e.s=-e.s,f.minus(e);if(A=f.d,d=e.d,i=m.precision,c=m.rounding,!A[0]||!d[0])return d[0]||(e=new m(f)),Kn?xn(e,i,c):e;if(s=bo(f.e/Pn),a=bo(e.e/Pn),A=A.slice(),r=s-a,r){for(r<0?(n=A,r=-r,o=d.length):(n=d,a=s,o=A.length),s=Math.ceil(i/Pn),o=s>o?s+1:o+1,r>o&&(r=o,n.length=1),n.reverse();r--;)n.push(0);n.reverse()}for(o=A.length,r=d.length,o-r<0&&(r=o,n=d,d=A,A=n),t=0;r;)t=(A[--r]=A[r]+d[r]+t)/Vl|0,A[r]%=Vl;for(t&&(A.unshift(t),++a),o=A.length;A[--o]==0;)A.pop();return e.d=A,e.e=Kw(A,a),Kn?xn(e,i,c):e};$t.precision=$t.sd=function(e){var t,n=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Yd+e);return n.d?(t=X9(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t};$t.round=function(){var e=this,t=e.constructor;return xn(new t(e),e.e+1,t.rounding)};$t.sine=$t.sin=function(){var e,t,n=this,a=n.constructor;return n.isFinite()?n.isZero()?new a(n):(e=a.precision,t=a.rounding,a.precision=e+Math.max(n.e,n.sd())+Pn,a.rounding=1,n=iOe(a,tQ(a,n)),a.precision=e,a.rounding=t,xn(wc>2?n.neg():n,e,t,!0)):new a(NaN)};$t.squareRoot=$t.sqrt=function(){var e,t,n,a,r,s,o=this,i=o.d,c=o.e,A=o.s,d=o.constructor;if(A!==1||!i||!i[0])return new d(!A||A<0&&(!i||i[0])?NaN:i?o:1/0);for(Kn=!1,A=Math.sqrt(+o),A==0||A==1/0?(t=Ks(i),(t.length+c)%2==0&&(t+="0"),A=Math.sqrt(t),c=bo((c+1)/2)-(c<0||c%2),A==1/0?t="5e"+c:(t=A.toExponential(),t=t.slice(0,t.indexOf("e")+1)+c),a=new d(t)):a=new d(A.toString()),n=(c=d.precision)+3;;)if(s=a,a=s.plus(ir(o,s,n+2,1)).times(.5),Ks(s.d).slice(0,n)===(t=Ks(a.d)).slice(0,n))if(t=t.slice(n-3,n+1),t=="9999"||!r&&t=="4999"){if(!r&&(xn(s,c+1,0),s.times(s).eq(o))){a=s;break}n+=4,r=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(xn(a,c+1,1),e=!a.times(a).eq(o));break}return Kn=!0,xn(a,c,d.rounding,e)};$t.tangent=$t.tan=function(){var e,t,n=this,a=n.constructor;return n.isFinite()?n.isZero()?new a(n):(e=a.precision,t=a.rounding,a.precision=e+10,a.rounding=1,n=n.sin(),n.s=1,n=ir(n,new a(1).minus(n.times(n)).sqrt(),e+10,0),a.precision=e,a.rounding=t,xn(wc==2||wc==4?n.neg():n,e,t,!0)):new a(NaN)};$t.times=$t.mul=function(e){var t,n,a,r,s,o,i,c,A,d=this,f=d.constructor,m=d.d,v=(e=new f(e)).d;if(e.s*=d.s,!m||!m[0]||!v||!v[0])return new f(!e.s||m&&!m[0]&&!v||v&&!v[0]&&!m?NaN:!m||!v?e.s/0:e.s*0);for(n=bo(d.e/Pn)+bo(e.e/Pn),c=m.length,A=v.length,c<A&&(s=m,m=v,v=s,o=c,c=A,A=o),s=[],o=c+A,a=o;a--;)s.push(0);for(a=A;--a>=0;){for(t=0,r=c+a;r>a;)i=s[r]+v[a]*m[r-a-1]+t,s[r--]=i%Vl|0,t=i/Vl|0;s[r]=(s[r]+t)%Vl|0}for(;!s[--o];)s.pop();return t?++n:s.shift(),e.d=s,e.e=Kw(s,n),Kn?xn(e,f.precision,f.rounding):e};$t.toBinary=function(e,t){return s4(this,2,e,t)};$t.toDecimalPlaces=$t.toDP=function(e,t){var n=this,a=n.constructor;return n=new a(n),e===void 0?n:(li(e,0,rA),t===void 0?t=a.rounding:li(t,0,8),xn(n,e+n.e+1,t))};$t.toExponential=function(e,t){var n,a=this,r=a.constructor;return e===void 0?n=Uu(a,!0):(li(e,0,rA),t===void 0?t=r.rounding:li(t,0,8),a=xn(new r(a),e+1,t),n=Uu(a,!0,e+1)),a.isNeg()&&!a.isZero()?"-"+n:n};$t.toFixed=function(e,t){var n,a,r=this,s=r.constructor;return e===void 0?n=Uu(r):(li(e,0,rA),t===void 0?t=s.rounding:li(t,0,8),a=xn(new s(r),e+r.e+1,t),n=Uu(a,!1,e+a.e+1)),r.isNeg()&&!r.isZero()?"-"+n:n};$t.toFraction=function(e){var t,n,a,r,s,o,i,c,A,d,f,m,v=this,p=v.d,g=v.constructor;if(!p)return new g(v);if(A=n=new g(1),a=c=new g(0),t=new g(a),s=t.e=X9(p)-v.e-1,o=s%Pn,t.d[0]=ps(10,o<0?Pn+o:o),e==null)e=s>0?t:A;else{if(i=new g(e),!i.isInt()||i.lt(A))throw Error(Yd+i);e=i.gt(t)?s>0?t:A:i}for(Kn=!1,i=new g(Ks(p)),d=g.precision,g.precision=s=p.length*Pn*2;f=ir(i,t,0,1,1),r=n.plus(f.times(a)),r.cmp(e)!=1;)n=a,a=r,r=A,A=c.plus(f.times(r)),c=r,r=t,t=i.minus(f.times(r)),i=r;return r=ir(e.minus(n),a,0,1,1),c=c.plus(r.times(A)),n=n.plus(r.times(a)),c.s=A.s=v.s,m=ir(A,a,s,1).minus(v).abs().cmp(ir(c,n,s,1).minus(v).abs())<1?[A,a]:[c,n],g.precision=d,Kn=!0,m};$t.toHexadecimal=$t.toHex=function(e,t){return s4(this,16,e,t)};$t.toNearest=function(e,t){var n=this,a=n.constructor;if(n=new a(n),e==null){if(!n.d)return n;e=new a(1),t=a.rounding}else{if(e=new a(e),t===void 0?t=a.rounding:li(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(Kn=!1,n=ir(n,e,0,t,1).times(e),Kn=!0,xn(n)):(e.s=n.s,n=e),n};$t.toNumber=function(){return+this};$t.toOctal=function(e,t){return s4(this,8,e,t)};$t.toPower=$t.pow=function(e){var t,n,a,r,s,o,i=this,c=i.constructor,A=+(e=new c(e));if(!i.d||!e.d||!i.d[0]||!e.d[0])return new c(ps(+i,A));if(i=new c(i),i.eq(1))return i;if(a=c.precision,s=c.rounding,e.eq(1))return xn(i,a,s);if(t=bo(e.e/Pn),t>=e.d.length-1&&(n=A<0?-A:A)<=aOe)return r=J9(c,i,n,a),e.s<0?new c(1).div(r):xn(r,a,s);if(o=i.s,o<0){if(t<e.d.length-1)return new c(NaN);if((e.d[t]&1)==0&&(o=1),i.e==0&&i.d[0]==1&&i.d.length==1)return i.s=o,i}return n=ps(+i,A),t=n==0||!isFinite(n)?bo(A*(Math.log("0."+Ks(i.d))/Math.LN10+i.e+1)):new c(n+"").e,t>c.maxE+1||t<c.minE-1?new c(t>0?o/0:0):(Kn=!1,c.rounding=i.s=1,n=Math.min(12,(t+"").length),r=qE(e.times(Ed(i,a+n)),a),r.d&&(r=xn(r,a+5,1),z0(r.d,a,s)&&(t=a+10,r=xn(qE(e.times(Ed(i,t+n)),t),t+5,1),+Ks(r.d).slice(a+1,a+15)+1==1e14&&(r=xn(r,a+1,0)))),r.s=o,Kn=!0,c.rounding=s,xn(r,a,s))};$t.toPrecision=function(e,t){var n,a=this,r=a.constructor;return e===void 0?n=Uu(a,a.e<=r.toExpNeg||a.e>=r.toExpPos):(li(e,1,rA),t===void 0?t=r.rounding:li(t,0,8),a=xn(new r(a),e,t),n=Uu(a,e<=a.e||a.e<=r.toExpNeg,e)),a.isNeg()&&!a.isZero()?"-"+n:n};$t.toSignificantDigits=$t.toSD=function(e,t){var n=this,a=n.constructor;return e===void 0?(e=a.precision,t=a.rounding):(li(e,1,rA),t===void 0?t=a.rounding:li(t,0,8)),xn(new a(n),e,t)};$t.toString=function(){var e=this,t=e.constructor,n=Uu(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n};$t.truncated=$t.trunc=function(){return xn(new this.constructor(this),this.e+1,1)};$t.valueOf=$t.toJSON=function(){var e=this,t=e.constructor,n=Uu(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};function Ks(e){var t,n,a,r=e.length-1,s="",o=e[0];if(r>0){for(s+=o,t=1;t<r;t++)a=e[t]+"",n=Pn-a.length,n&&(s+=md(n)),s+=a;o=e[t],a=o+"",n=Pn-a.length,n&&(s+=md(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}function li(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Yd+e)}function z0(e,t,n,a){var r,s,o,i;for(s=e[0];s>=10;s/=10)--t;return--t<0?(t+=Pn,r=0):(r=Math.ceil((t+1)/Pn),t%=Pn),s=ps(10,Pn-t),i=e[r]%s|0,a==null?t<3?(t==0?i=i/100|0:t==1&&(i=i/10|0),o=n<4&&i==99999||n>3&&i==49999||i==5e4||i==0):o=(n<4&&i+1==s||n>3&&i+1==s/2)&&(e[r+1]/s/100|0)==ps(10,t-2)-1||(i==s/2||i==0)&&(e[r+1]/s/100|0)==0:t<4?(t==0?i=i/1e3|0:t==1?i=i/100|0:t==2&&(i=i/10|0),o=(a||n<4)&&i==9999||!a&&n>3&&i==4999):o=((a||n<4)&&i+1==s||!a&&n>3&&i+1==s/2)&&(e[r+1]/s/1e3|0)==ps(10,t-3)-1,o}function l_(e,t,n){for(var a,r=[0],s,o=0,i=e.length;o<i;){for(s=r.length;s--;)r[s]*=t;for(r[0]+=KE.indexOf(e.charAt(o++)),a=0;a<r.length;a++)r[a]>n-1&&(r[a+1]===void 0&&(r[a+1]=0),r[a+1]+=r[a]/n|0,r[a]%=n)}return r.reverse()}function sOe(e,t){var n,a,r;if(t.isZero())return t;a=t.d.length,a<32?(n=Math.ceil(a/3),r=(1/Ww(4,n)).toString()):(n=16,r="2.3283064365386962890625e-10"),e.precision+=n,t=Wv(e,1,t.times(r),new e(1));for(var s=n;s--;){var o=t.times(t);t=o.times(o).minus(o).times(8).plus(1)}return e.precision-=n,t}var ir=(function(){function e(a,r,s){var o,i=0,c=a.length;for(a=a.slice();c--;)o=a[c]*r+i,a[c]=o%s|0,i=o/s|0;return i&&a.unshift(i),a}function t(a,r,s,o){var i,c;if(s!=o)c=s>o?1:-1;else for(i=c=0;i<s;i++)if(a[i]!=r[i]){c=a[i]>r[i]?1:-1;break}return c}function n(a,r,s,o){for(var i=0;s--;)a[s]-=i,i=a[s]<r[s]?1:0,a[s]=i*o+a[s]-r[s];for(;!a[0]&&a.length>1;)a.shift()}return function(a,r,s,o,i,c){var A,d,f,m,v,p,g,y,w,b,x,T,D,k,S,E,C,U,F,L,H=a.constructor,ue=a.s==r.s?1:-1,ie=a.d,Q=r.d;if(!ie||!ie[0]||!Q||!Q[0])return new H(!a.s||!r.s||(ie?Q&&ie[0]==Q[0]:!Q)?NaN:ie&&ie[0]==0||!Q?ue*0:ue/0);for(c?(v=1,d=a.e-r.e):(c=Vl,v=Pn,d=bo(a.e/v)-bo(r.e/v)),F=Q.length,C=ie.length,w=new H(ue),b=w.d=[],f=0;Q[f]==(ie[f]||0);f++);if(Q[f]>(ie[f]||0)&&d--,s==null?(k=s=H.precision,o=H.rounding):i?k=s+(a.e-r.e)+1:k=s,k<0)b.push(1),p=!0;else{if(k=k/v+2|0,f=0,F==1){for(m=0,Q=Q[0],k++;(f<C||m)&&k--;f++)S=m*c+(ie[f]||0),b[f]=S/Q|0,m=S%Q|0;p=m||f<C}else{for(m=c/(Q[0]+1)|0,m>1&&(Q=e(Q,m,c),ie=e(ie,m,c),F=Q.length,C=ie.length),E=F,x=ie.slice(0,F),T=x.length;T<F;)x[T++]=0;L=Q.slice(),L.unshift(0),U=Q[0],Q[1]>=c/2&&++U;do m=0,A=t(Q,x,F,T),A<0?(D=x[0],F!=T&&(D=D*c+(x[1]||0)),m=D/U|0,m>1?(m>=c&&(m=c-1),g=e(Q,m,c),y=g.length,T=x.length,A=t(g,x,y,T),A==1&&(m--,n(g,F<y?L:Q,y,c))):(m==0&&(A=m=1),g=Q.slice()),y=g.length,y<T&&g.unshift(0),n(x,g,T,c),A==-1&&(T=x.length,A=t(Q,x,F,T),A<1&&(m++,n(x,F<T?L:Q,T,c))),T=x.length):A===0&&(m++,x=[0]),b[f++]=m,A&&x[0]?x[T++]=ie[E]||0:(x=[ie[E]],T=1);while((E++<C||x[0]!==void 0)&&k--);p=x[0]!==void 0}b[0]||b.shift()}if(v==1)w.e=d,K9=p;else{for(f=1,m=b[0];m>=10;m/=10)f++;w.e=f+d*v-1,xn(w,i?s+w.e+1:s,o,p)}return w}})();function xn(e,t,n,a){var r,s,o,i,c,A,d,f,m,v=e.constructor;e:if(t!=null){if(f=e.d,!f)return e;for(r=1,i=f[0];i>=10;i/=10)r++;if(s=t-r,s<0)s+=Pn,o=t,d=f[m=0],c=d/ps(10,r-o-1)%10|0;else if(m=Math.ceil((s+1)/Pn),i=f.length,m>=i)if(a){for(;i++<=m;)f.push(0);d=c=0,r=1,s%=Pn,o=s-Pn+1}else break e;else{for(d=i=f[m],r=1;i>=10;i/=10)r++;s%=Pn,o=s-Pn+r,c=o<0?0:d/ps(10,r-o-1)%10|0}if(a=a||t<0||f[m+1]!==void 0||(o<0?d:d%ps(10,r-o-1)),A=n<4?(c||a)&&(n==0||n==(e.s<0?3:2)):c>5||c==5&&(n==4||a||n==6&&(s>0?o>0?d/ps(10,r-o):0:f[m-1])%10&1||n==(e.s<0?8:7)),t<1||!f[0])return f.length=0,A?(t-=e.e+1,f[0]=ps(10,(Pn-t%Pn)%Pn),e.e=-t||0):f[0]=e.e=0,e;if(s==0?(f.length=m,i=1,m--):(f.length=m+1,i=ps(10,Pn-s),f[m]=o>0?(d/ps(10,r-o)%ps(10,o)|0)*i:0),A)for(;;)if(m==0){for(s=1,o=f[0];o>=10;o/=10)s++;for(o=f[0]+=i,i=1;o>=10;o/=10)i++;s!=i&&(e.e++,f[0]==Vl&&(f[0]=1));break}else{if(f[m]+=i,f[m]!=Vl)break;f[m--]=0,i=1}for(s=f.length;f[--s]===0;)f.pop()}return Kn&&(e.e>v.maxE?(e.d=null,e.e=NaN):e.e<v.minE&&(e.e=0,e.d=[0])),e}function Uu(e,t,n){if(!e.isFinite())return eQ(e);var a,r=e.e,s=Ks(e.d),o=s.length;return t?(n&&(a=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+md(a):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(e.e<0?"e":"e+")+e.e):r<0?(s="0."+md(-r-1)+s,n&&(a=n-o)>0&&(s+=md(a))):r>=o?(s+=md(r+1-o),n&&(a=n-r-1)>0&&(s=s+"."+md(a))):((a=r+1)<o&&(s=s.slice(0,a)+"."+s.slice(a)),n&&(a=n-o)>0&&(r+1===o&&(s+="."),s+=md(a))),s}function Kw(e,t){var n=e[0];for(t*=Pn;n>=10;n/=10)t++;return t}function B2(e,t,n){if(t>rOe)throw Kn=!0,n&&(e.precision=n),Error(W9);return xn(new e(S2),t,1,!0)}function bu(e,t,n){if(t>jE)throw Error(W9);return xn(new e(E2),t,n,!0)}function X9(e){var t=e.length-1,n=t*Pn+1;if(t=e[t],t){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function md(e){for(var t="";e--;)t+="0";return t}function J9(e,t,n,a){var r,s=new e(1),o=Math.ceil(a/Pn+4);for(Kn=!1;;){if(n%2&&(s=s.times(t),EN(s.d,o)&&(r=!0)),n=bo(n/2),n===0){n=s.d.length-1,r&&s.d[n]===0&&++s.d[n];break}t=t.times(t),EN(t.d,o)}return Kn=!0,s}function SN(e){return e.d[e.d.length-1]&1}function Z9(e,t,n){for(var a,r,s=new e(t[0]),o=0;++o<t.length;){if(r=new e(t[o]),!r.s){s=r;break}a=s.cmp(r),(a===n||a===0&&s.s===n)&&(s=r)}return s}function qE(e,t){var n,a,r,s,o,i,c,A=0,d=0,f=0,m=e.constructor,v=m.rounding,p=m.precision;if(!e.d||!e.d[0]||e.e>17)return new m(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(t==null?(Kn=!1,c=p):c=t,i=new m(.03125);e.e>-2;)e=e.times(i),f+=5;for(a=Math.log(ps(2,f))/Math.LN10*2+5|0,c+=a,n=s=o=new m(1),m.precision=c;;){if(s=xn(s.times(e),c,1),n=n.times(++d),i=o.plus(ir(s,n,c,1)),Ks(i.d).slice(0,c)===Ks(o.d).slice(0,c)){for(r=f;r--;)o=xn(o.times(o),c,1);if(t==null)if(A<3&&z0(o.d,c-a,v,A))m.precision=c+=10,n=s=i=new m(1),d=0,A++;else return xn(o,m.precision=p,v,Kn=!0);else return m.precision=p,o}o=i}}function Ed(e,t){var n,a,r,s,o,i,c,A,d,f,m,v=1,p=10,g=e,y=g.d,w=g.constructor,b=w.rounding,x=w.precision;if(g.s<0||!y||!y[0]||!g.e&&y[0]==1&&y.length==1)return new w(y&&!y[0]?-1/0:g.s!=1?NaN:y?0:g);if(t==null?(Kn=!1,d=x):d=t,w.precision=d+=p,n=Ks(y),a=n.charAt(0),Math.abs(s=g.e)<15e14){for(;a<7&&a!=1||a==1&&n.charAt(1)>3;)g=g.times(e),n=Ks(g.d),a=n.charAt(0),v++;s=g.e,a>1?(g=new w("0."+n),s++):g=new w(a+"."+n.slice(1))}else return A=B2(w,d+2,x).times(s+""),g=Ed(new w(a+"."+n.slice(1)),d-p).plus(A),w.precision=x,t==null?xn(g,x,b,Kn=!0):g;for(f=g,c=o=g=ir(g.minus(1),g.plus(1),d,1),m=xn(g.times(g),d,1),r=3;;){if(o=xn(o.times(m),d,1),A=c.plus(ir(o,new w(r),d,1)),Ks(A.d).slice(0,d)===Ks(c.d).slice(0,d))if(c=c.times(2),s!==0&&(c=c.plus(B2(w,d+2,x).times(s+""))),c=ir(c,new w(v),d,1),t==null)if(z0(c.d,d-p,b,i))w.precision=d+=p,A=o=g=ir(f.minus(1),f.plus(1),d,1),m=xn(g.times(g),d,1),r=i=1;else return xn(c,w.precision=x,b,Kn=!0);else return w.precision=x,c;c=A,r+=2}}function eQ(e){return String(e.s*e.s/0)}function u_(e,t){var n,a,r;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(n<0&&(n=a),n+=+t.slice(a+1),t=t.substring(0,a)):n<0&&(n=t.length),a=0;t.charCodeAt(a)===48;a++);for(r=t.length;t.charCodeAt(r-1)===48;--r);if(t=t.slice(a,r),t){if(r-=a,e.e=n=n-a-1,e.d=[],a=(n+1)%Pn,n<0&&(a+=Pn),a<r){for(a&&e.d.push(+t.slice(0,a)),r-=Pn;a<r;)e.d.push(+t.slice(a,a+=Pn));t=t.slice(a),a=Pn-t.length}else a-=r;for(;a--;)t+="0";e.d.push(+t),Kn&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function oOe(e,t){var n,a,r,s,o,i,c,A,d;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),Y9.test(t))return u_(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(tOe.test(t))n=16,t=t.toLowerCase();else if(eOe.test(t))n=2;else if(nOe.test(t))n=8;else throw Error(Yd+t);for(s=t.search(/p/i),s>0?(c=+t.slice(s+1),t=t.substring(2,s)):t=t.slice(2),s=t.indexOf("."),o=s>=0,a=e.constructor,o&&(t=t.replace(".",""),i=t.length,s=i-s,r=J9(a,new a(n),s,s*2)),A=l_(t,n,Vl),d=A.length-1,s=d;A[s]===0;--s)A.pop();return s<0?new a(e.s*0):(e.e=Kw(A,d),e.d=A,Kn=!1,o&&(e=ir(e,r,i*4)),c&&(e=e.times(Math.abs(c)<54?ps(2,c):Xt.pow(2,c))),Kn=!0,e)}function iOe(e,t){var n,a=t.d.length;if(a<3)return t.isZero()?t:Wv(e,2,t,t);n=1.4*Math.sqrt(a),n=n>16?16:n|0,t=t.times(1/Ww(5,n)),t=Wv(e,2,t,t);for(var r,s=new e(5),o=new e(16),i=new e(20);n--;)r=t.times(t),t=t.times(s.plus(r.times(o.times(r).minus(i))));return t}function Wv(e,t,n,a,r){var s,o,i,c,A=e.precision,d=Math.ceil(A/Pn);for(Kn=!1,c=n.times(n),i=new e(a);;){if(o=ir(i.times(c),new e(t++*t++),A,1),i=r?a.plus(o):a.minus(o),a=ir(o.times(c),new e(t++*t++),A,1),o=i.plus(a),o.d[d]!==void 0){for(s=d;o.d[s]===i.d[s]&&s--;);if(s==-1)break}s=i,i=a,a=o,o=s}return Kn=!0,o.d.length=d+1,o}function Ww(e,t){for(var n=e;--t;)n*=e;return n}function tQ(e,t){var n,a=t.s<0,r=bu(e,e.precision,1),s=r.times(.5);if(t=t.abs(),t.lte(s))return wc=a?4:1,t;if(n=t.divToInt(r),n.isZero())wc=a?3:2;else{if(t=t.minus(n.times(r)),t.lte(s))return wc=SN(n)?a?2:3:a?4:1,t;wc=SN(n)?a?1:4:a?3:2}return t.minus(r).abs()}function s4(e,t,n,a){var r,s,o,i,c,A,d,f,m,v=e.constructor,p=n!==void 0;if(p?(li(n,1,rA),a===void 0?a=v.rounding:li(a,0,8)):(n=v.precision,a=v.rounding),!e.isFinite())d=eQ(e);else{for(d=Uu(e),o=d.indexOf("."),p?(r=2,t==16?n=n*4-3:t==8&&(n=n*3-2)):r=t,o>=0&&(d=d.replace(".",""),m=new v(1),m.e=d.length-o,m.d=l_(Uu(m),10,r),m.e=m.d.length),f=l_(d,10,r),s=c=f.length;f[--c]==0;)f.pop();if(!f[0])d=p?"0p+0":"0";else{if(o<0?s--:(e=new v(e),e.d=f,e.e=s,e=ir(e,m,n,a,0,r),f=e.d,s=e.e,A=K9),o=f[n],i=r/2,A=A||f[n+1]!==void 0,A=a<4?(o!==void 0||A)&&(a===0||a===(e.s<0?3:2)):o>i||o===i&&(a===4||A||a===6&&f[n-1]&1||a===(e.s<0?8:7)),f.length=n,A)for(;++f[--n]>r-1;)f[n]=0,n||(++s,f.unshift(1));for(c=f.length;!f[c-1];--c);for(o=0,d="";o<c;o++)d+=KE.charAt(f[o]);if(p){if(c>1)if(t==16||t==8){for(o=t==16?4:3,--c;c%o;c++)d+="0";for(f=l_(d,r,t),c=f.length;!f[c-1];--c);for(o=1,d="1.";o<c;o++)d+=KE.charAt(f[o])}else d=d.charAt(0)+"."+d.slice(1);d=d+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)d="0"+d;d="0."+d}else if(++s>c)for(s-=c;s--;)d+="0";else s<c&&(d=d.slice(0,s)+"."+d.slice(s))}d=(t==16?"0x":t==2?"0b":t==8?"0o":"")+d}return e.s<0?"-"+d:d}function EN(e,t){if(e.length>t)return e.length=t,!0}function lOe(e){return new this(e).abs()}function uOe(e){return new this(e).acos()}function cOe(e){return new this(e).acosh()}function dOe(e,t){return new this(e).plus(t)}function AOe(e){return new this(e).asin()}function fOe(e){return new this(e).asinh()}function mOe(e){return new this(e).atan()}function vOe(e){return new this(e).atanh()}function hOe(e,t){e=new this(e),t=new this(t);var n,a=this.precision,r=this.rounding,s=a+4;return!e.s||!t.s?n=new this(NaN):!e.d&&!t.d?(n=bu(this,s,1).times(t.s>0?.25:.75),n.s=e.s):!t.d||e.isZero()?(n=t.s<0?bu(this,a,r):new this(0),n.s=e.s):!e.d||t.isZero()?(n=bu(this,s,1).times(.5),n.s=e.s):t.s<0?(this.precision=s,this.rounding=1,n=this.atan(ir(e,t,s,1)),t=bu(this,s,1),this.precision=a,this.rounding=r,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(ir(e,t,s,1)),n}function pOe(e){return new this(e).cbrt()}function gOe(e){return xn(e=new this(e),e.e+1,2)}function yOe(e,t,n){return new this(e).clamp(t,n)}function _Oe(e){if(!e||typeof e!="object")throw Error(zw+"Object expected");var t,n,a,r=e.defaults===!0,s=["precision",1,rA,"rounding",0,8,"toExpNeg",-tv,0,"toExpPos",0,tv,"maxE",0,tv,"minE",-tv,0,"modulo",0,9];for(t=0;t<s.length;t+=3)if(n=s[t],r&&(this[n]=WE[n]),(a=e[n])!==void 0)if(bo(a)===a&&a>=s[t+1]&&a<=s[t+2])this[n]=a;else throw Error(Yd+n+": "+a);if(n="crypto",r&&(this[n]=WE[n]),(a=e[n])!==void 0)if(a===!0||a===!1||a===0||a===1)if(a)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(j9);else this[n]=!1;else throw Error(Yd+n+": "+a);return this}function wOe(e){return new this(e).cos()}function bOe(e){return new this(e).cosh()}function nQ(e){var t,n,a;function r(s){var o,i,c,A=this;if(!(A instanceof r))return new r(s);if(A.constructor=r,BN(s)){A.s=s.s,Kn?!s.d||s.e>r.maxE?(A.e=NaN,A.d=null):s.e<r.minE?(A.e=0,A.d=[0]):(A.e=s.e,A.d=s.d.slice()):(A.e=s.e,A.d=s.d?s.d.slice():s.d);return}if(c=typeof s,c==="number"){if(s===0){A.s=1/s<0?-1:1,A.e=0,A.d=[0];return}if(s<0?(s=-s,A.s=-1):A.s=1,s===~~s&&s<1e7){for(o=0,i=s;i>=10;i/=10)o++;Kn?o>r.maxE?(A.e=NaN,A.d=null):o<r.minE?(A.e=0,A.d=[0]):(A.e=o,A.d=[s]):(A.e=o,A.d=[s]);return}if(s*0!==0){s||(A.s=NaN),A.e=NaN,A.d=null;return}return u_(A,s.toString())}if(c==="string")return(i=s.charCodeAt(0))===45?(s=s.slice(1),A.s=-1):(i===43&&(s=s.slice(1)),A.s=1),Y9.test(s)?u_(A,s):oOe(A,s);if(c==="bigint")return s<0?(s=-s,A.s=-1):A.s=1,u_(A,s.toString());throw Error(Yd+s)}if(r.prototype=$t,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.EUCLID=9,r.config=r.set=_Oe,r.clone=nQ,r.isDecimal=BN,r.abs=lOe,r.acos=uOe,r.acosh=cOe,r.add=dOe,r.asin=AOe,r.asinh=fOe,r.atan=mOe,r.atanh=vOe,r.atan2=hOe,r.cbrt=pOe,r.ceil=gOe,r.clamp=yOe,r.cos=wOe,r.cosh=bOe,r.div=xOe,r.exp=COe,r.floor=SOe,r.hypot=EOe,r.ln=BOe,r.log=kOe,r.log10=IOe,r.log2=TOe,r.max=FOe,r.min=POe,r.mod=DOe,r.mul=UOe,r.pow=ROe,r.random=NOe,r.round=VOe,r.sign=LOe,r.sin=MOe,r.sinh=OOe,r.sqrt=HOe,r.sub=$Oe,r.sum=QOe,r.tan=GOe,r.tanh=zOe,r.trunc=KOe,e===void 0&&(e={}),e&&e.defaults!==!0)for(a=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<a.length;)e.hasOwnProperty(n=a[t++])||(e[n]=this[n]);return r.config(e),r}function xOe(e,t){return new this(e).div(t)}function COe(e){return new this(e).exp()}function SOe(e){return xn(e=new this(e),e.e+1,3)}function EOe(){var e,t,n=new this(0);for(Kn=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return Kn=!0,new this(1/0);n=t}return Kn=!0,n.sqrt()}function BN(e){return e instanceof Xt||e&&e.toStringTag===q9||!1}function BOe(e){return new this(e).ln()}function kOe(e,t){return new this(e).log(t)}function TOe(e){return new this(e).log(2)}function IOe(e){return new this(e).log(10)}function FOe(){return Z9(this,arguments,-1)}function POe(){return Z9(this,arguments,1)}function DOe(e,t){return new this(e).mod(t)}function UOe(e,t){return new this(e).mul(t)}function ROe(e,t){return new this(e).pow(t)}function NOe(e){var t,n,a,r,s=0,o=new this(1),i=[];if(e===void 0?e=this.precision:li(e,1,rA),a=Math.ceil(e/Pn),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(a));s<a;)r=t[s],r>=429e7?t[s]=crypto.getRandomValues(new Uint32Array(1))[0]:i[s++]=r%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(a*=4);s<a;)r=t[s]+(t[s+1]<<8)+(t[s+2]<<16)+((t[s+3]&127)<<24),r>=214e7?crypto.randomBytes(4).copy(t,s):(i.push(r%1e7),s+=4);s=a/4}else throw Error(j9);else for(;s<a;)i[s++]=Math.random()*1e7|0;for(a=i[--s],e%=Pn,a&&e&&(r=ps(10,Pn-e),i[s]=(a/r|0)*r);i[s]===0;s--)i.pop();if(s<0)n=0,i=[0];else{for(n=-1;i[0]===0;n-=Pn)i.shift();for(a=1,r=i[0];r>=10;r/=10)a++;a<Pn&&(n-=Pn-a)}return o.e=n,o.d=i,o}function VOe(e){return xn(e=new this(e),e.e+1,this.rounding)}function LOe(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function MOe(e){return new this(e).sin()}function OOe(e){return new this(e).sinh()}function HOe(e){return new this(e).sqrt()}function $Oe(e,t){return new this(e).sub(t)}function QOe(){var e=0,t=arguments,n=new this(t[e]);for(Kn=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return Kn=!0,xn(n,this.precision,this.rounding)}function GOe(e){return new this(e).tan()}function zOe(e){return new this(e).tanh()}function KOe(e){return xn(e=new this(e),e.e+1,1)}$t[Symbol.for("nodejs.util.inspect.custom")]=$t.toString;$t[Symbol.toStringTag]="Decimal";var Xt=$t.constructor=nQ(WE);S2=new Xt(S2);E2=new Xt(E2);function aQ(e){const t=V([]),n=V(!1),a=V([]),r=V(!1),s=(f=1e4)=>new Promise((m,v)=>setTimeout(()=>v(new Error("API_TIMEOUT")),f)),o=async()=>{if(!e.value){console.log("No bill ID available for loading payments"),t.value=[];return}if(n.value){console.log("Already loading payments, skipping duplicate call");return}n.value=!0,console.log("Loading payments for pharmacy bill ID:",e.value);try{const f=await Promise.race([vEe(e.value),s(1e4)]);console.log("Full API response:",f),f.success?(t.value=Array.isArray(f.data)?f.data:[],console.log(" Payments loaded successfully:",t.value.length)):(console.error(" API Error loading payments:",f.error),t.value=[])}catch(f){f.message==="API_TIMEOUT"?console.error(" Payment loading timed out"):console.error(" Exception loading bill payments:",f),t.value=[]}finally{n.value=!1}},i=async f=>{if(!e.value)throw new Error("No bill ID available for payment creation");r.value=!0;try{const m={...f,amount:Number(f.amount)};console.log("Creating pharmacy payment with payload:",m);const v=await Promise.race([mEe(e.value,m),s(15e3)]);if(!v.success)throw new Error(v.error?.message||"Failed to create payment");return console.log("Payment created successfully:",v.data),await o(),v}catch(m){throw m.message==="API_TIMEOUT"?new Error("Payment creation timed out. Please try again."):m}finally{r.value=!1}},c=async f=>{if(!(!f||!e.value)){if(a.value.includes(f)){console.log("Payment already being deleted:",f);return}a.value.push(f);try{const m=await Promise.race([hEe(e.value,f),s(1e4)]);if(!m.success)throw new Error(m.error?.message||"Failed to delete payment");return console.log("Payment deleted successfully:",f),await o(),m}catch(m){throw m.message==="API_TIMEOUT"?new Error("Payment deletion timed out. Please try again."):m}finally{a.value=a.value.filter(m=>m!==f)}}},A=ne(()=>Array.isArray(t.value)?t.value.reduce((f,m)=>f+(parseFloat(m.amount)||0),0):0);let d=null;return je(e,async(f,m)=>{if(console.log("Bill ID watcher triggered:",{newBillId:f||"null",oldBillId:m||"null",lastBillId:d||"null"}),f===d){console.log("Bill ID unchanged, skipping reload");return}d=f,f?(console.log("Bill ID changed, loading payments for:",f),await o()):(console.log("No bill ID, clearing payments"),t.value=[])},{immediate:!0}),{billPayments:t,isLoadingPayments:n,deletingPayments:a,isSubmittingPayment:r,totalPaymentsMade:A,loadBillPayments:o,createNewPayment:i,deletePayment:c,formatPaymentAmount:dr}}const WOe={class:"text-center"},jOe={class:"text-center"},qOe={class:"text-body-2 text-medium-emphasis mb-4"},YOe={class:"pa-1"},XOe={class:"text-body-1 font-weight-medium"},JOe={class:"text-body-2 text-medium-emphasis"},ZOe={class:"pa-1"},eHe={class:"text-body-1 font-weight-medium"},tHe={class:"text-body-2 text-medium-emphasis"},nHe={class:"pa-1"},aHe={class:"text-body-1 font-weight-medium"},rHe={class:"text-body-2 text-medium-emphasis"},sHe={key:0,class:"text-right",style:{width:"100px"}},oHe={key:1,class:"text-right",style:{width:"100px"}},iHe={key:2,class:"text-left",style:{width:"80px"}},lHe={class:"text-body-2 font-weight-medium"},uHe={class:"text-caption text-medium-emphasis"},cHe={key:0,class:"text-caption text-medium-emphasis"},dHe={class:"text-body-2 font-weight-medium"},AHe={key:1},fHe={class:"text-body-2"},mHe={class:"text-caption text-medium-emphasis"},vHe={class:"text-right"},hHe={class:"text-right"},pHe={class:"text-right"},gHe={class:"text-right"},yHe={class:"text-right"},_He={class:"text-right"},wHe={key:1},bHe={key:0,class:"text-right"},xHe={class:"text-body-2"},CHe={key:1,class:"text-right"},SHe={class:"text-right font-weight-medium"},EHe={key:2},BHe={key:0},kHe={key:1},THe={class:"text-body-2 mb-1"},IHe={class:"text-body-2 mb-1"},FHe={key:0,class:"text-body-2 mb-1"},PHe={class:"text-body-2 mb-1"},DHe={class:"text-body-2 mb-1"},UHe={class:"text-body-2 mb-1"},RHe={class:"text-body-2 mb-1"},NHe={key:0,class:"text-body-2 mb-1"},VHe={class:"text-body-2 mb-1"},LHe={class:"text-body-2 mb-1"},MHe={class:"text-subtitle-1 font-weight-bold mt-2"},OHe={class:"text-h6"},HHe={key:0,class:"text-caption text-medium-emphasis mt-1"},$He={class:"text-h6 text-success"},QHe={key:0,class:"text-caption text-info mt-1"},GHe={key:0,class:"text-center pa-4"},zHe={class:"font-weight-bold"},KHe={class:"d-flex align-center flex-wrap",style:{gap:"2px"}},WHe={class:"font-weight-medium text-body-1"},jHe={key:0,class:"text-caption text-medium-emphasis"},qHe={class:"mt-1"},YHe={class:"d-flex align-center justify-space-between flex-wrap gap-2 mt-1"},XHe={class:"d-flex align-center flex-wrap gap-2"},JHe={__name:"pharmacy-bill-edit",props:{billId:{type:[String,Number],required:!0},mode:{type:String,default:"edit",validator:e=>["edit","return"].includes(e)}},emits:["close","bill-updated"],setup(e,{emit:t}){const{showSuccess:n,showError:a}=ca(),r=e,s=t,o=V(!1),i=V(null),c=V(null),A=V([]),d=V([]),f=V(0),m=V(!1),v=V(!1),p=V(!1),g=V(!1),y=V(null),w=V([]),b=V(!1),x=V("");let T=null;const D=V({}),k=V(null),S=aQ(k),{billPayments:E,isLoadingPayments:C,deletingPayments:U,totalPaymentsMade:F,loadBillPayments:L,createNewPayment:H,deletePayment:ue}=S,ie=mh,Q=V([]),X=[Ye=>!!Ye||"Amount is required",Ye=>Ye>0||"Amount must be greater than 0",Ye=>Number.isInteger(Number(Ye))||"Amount must be a whole number"],le=[Ye=>!!Ye||"Payment mode is required"],Z=[Ye=>!!Ye||"Payment date is required"],re=()=>{Q.value.push({amount:null,mode:"Cash",paymentDate:Rn(),datePickerMenu:!1})},q=Ye=>{Q.value.splice(Ye,1)},P=Ye=>{if(!Ye)return null;try{if(typeof Ye=="string")return Ye.includes("T")?Ye.split("T")[0]:Ye;if(Ye instanceof Date){const We=Ye.getFullYear(),_t=String(Ye.getMonth()+1).padStart(2,"0"),Rt=String(Ye.getDate()).padStart(2,"0");return`${We}-${_t}-${Rt}`}return null}catch(We){return console.error("Error parsing payment date:",We),null}},G=(Ye,We)=>{if(Ye)if(Ye instanceof Date){const _t=Ye.getFullYear(),Rt=String(Ye.getMonth()+1).padStart(2,"0"),zt=String(Ye.getDate()).padStart(2,"0");We.paymentDate=`${_t}-${Rt}-${zt}`}else typeof Ye=="string"&&(We.paymentDate=Ye);else We.paymentDate="";We.datePickerMenu=!1},J=ne(()=>Array.isArray(Q.value)?Q.value.reduce((Ye,We)=>Ye+(parseFloat(We.amount)||0),0):0),M=ne(()=>{const Ye=F.value,We=J.value;return Math.max(0,Me.value-Ye-We)}),te=async()=>{if(Q.value.length===0){console.log("No new payment entries to create");return}console.log("Creating new payment entries:",Q.value);try{const Ye=Q.value.filter(We=>We.amount&&parseFloat(We.amount)>0&&We.mode&&We.paymentDate);console.log("Valid payments to create:",Ye);for(const We of Ye){const _t={amount:parseFloat(We.amount),mode:We.mode,paymentDate:We.paymentDate};console.log("Creating payment with payload:",_t);const Rt=await H(_t);Rt.success?console.log("Payment created successfully:",Rt.data):(console.error("Error creating payment entry:",Rt.error),a(`Failed to create payment: ${Rt.error?.message||"Unknown error"}`))}Q.value=[],console.log("New payment entries cleared"),await L()}catch(Ye){console.error("Error creating payment entries:",Ye),a("Failed to create some payments. Please try again.")}},Y=async()=>{try{o.value=!0,i.value=null;const{data:Ye,error:We}=await DH(r.billId);if(We)i.value=We.response?.data?.error||We.message||"Failed to load bill",a("Error loading bill");else{if(r.mode==="return"&&Ye.status!=="Finalized"){i.value="Only finalized bills can be returned",a("Only finalized bills can be returned");return}c.value=Ye,A.value=Ye.prescriptionMedicines||[],d.value=(Ye.items||[]).map(_t=>({..._t,medicineId:_t.medicineId,medicineName:_t.medicineName,saltComposition:_t.saltComposition||"",marketer:_t.marketer||"",batchId:_t.medicineBatchId||null,batchNumber:_t.batchNumber||"",expiryDate:_t.expiryDate||null,packType:_t.packType||"",unitsPerPack:_t.unitsPerPack||1,mrp:_t.mrp||0,discountPercentage:_t.discountPercentage||0,gstPercentage:_t.gstPercentage||0,quantityUnits:_t.quantityUnits||1,availableUnits:_t.availableUnits||0,returnedQuantity:_t.returnedQuantity||0,returnQuantity:0,billItemId:_t.id})),f.value=Ye.additionalDiscountAmount||0,await ee(),k.value=r.billId,await L()}}catch(Ye){console.error("Error loading bill:",Ye),i.value=Ye.message||"An unexpected error occurred",a("Error loading bill")}finally{o.value=!1}},W=async Ye=>{if(D.value[Ye])return D.value[Ye];try{const{data:We,error:_t}=await oEe(Ye);if(!_t&&We){const Rt=We.map(zt=>({id:zt.batchId||zt.id,label:`${zt.batchNumber} (Exp: ${mt(zt.expiryDate)}, Stock: ${zt.availableUnits})`,batchNumber:zt.batchNumber,expiryDate:zt.expiryDate,packType:zt.packType||"",unitsPerPack:zt.unitsPerPack||1,availableUnits:zt.availableUnits,mrp:zt.mrp,discountPercentage:zt.discountPercentage,gstPercentage:zt.gstPercentage}));return D.value[Ye]=Rt,Rt}}catch(We){console.error("Error loading batches:",We)}return[]},ee=async()=>{const Ye=[...new Set(d.value.map(We=>We.medicineId))];await Promise.all(Ye.map(We=>W(We)))},ae=Ye=>D.value[Ye]||[],oe=async(Ye,We)=>{const Rt=ae(Ye.medicineId).find(zt=>zt.id===Ye.batchId);Rt&&(Ye.batchNumber=Rt.batchNumber,Ye.expiryDate=Rt.expiryDate,Ye.packType=Rt.packType||"",Ye.unitsPerPack=Rt.unitsPerPack||1,Ye.mrp=Rt.mrp,Ye.discountPercentage=Rt.discountPercentage,Ye.gstPercentage=Rt.gstPercentage,Ye.availableUnits=Rt.availableUnits,_e(Ye))},j=Ye=>{if(!Ye.mrp||!Ye.unitsPerPack||Ye.unitsPerPack<=0)return 0;const We=new Xt(Ye.mrp),_t=new Xt(Ye.unitsPerPack),Rt=new Xt(Ye.gstPercentage||0),zt=new Xt(Ye.discountPercentage||0),Pt=We.dividedBy(_t),Wt=new Xt(1).minus(zt.dividedBy(100)),Lt=Pt.times(Wt),ia=new Xt(1).plus(Rt.dividedBy(100));return Lt.dividedBy(ia).toNumber()},ce=Ye=>{if(!Ye.mrp||!Ye.unitsPerPack||Ye.unitsPerPack<=0)return 0;const We=new Xt(Ye.mrp),_t=new Xt(Ye.unitsPerPack),Rt=new Xt(Ye.discountPercentage||0),zt=We.dividedBy(_t),Pt=new Xt(1).minus(Rt.dividedBy(100));return zt.times(Pt).toNumber()},de=Ye=>{if(r.mode==="return"){const We=Ye.quantityUnits||0,_t=Ye.returnQuantity||0;return Math.max(0,We-_t)}return Ye.quantityUnits||0},_e=(Ye,We)=>{if(!Ye.mrp||!Ye.unitsPerPack||Ye.unitsPerPack<=0)return 0;const _t=new Xt(Ye.mrp),Rt=new Xt(Ye.unitsPerPack),zt=new Xt(Ye.discountPercentage||0),Pt=de(Ye),Wt=new Xt(Pt),Lt=_t.dividedBy(Rt),ia=new Xt(1).minus(zt.dividedBy(100));return Lt.times(ia).times(Wt).toNumber()},Re=()=>{d.value.forEach((Ye,We)=>{_e(Ye)})},be=ne(()=>d.value.reduce((We,_t)=>{if(!_t.mrp||!_t.unitsPerPack||_t.unitsPerPack<=0)return We;const Rt=new Xt(_t.mrp),zt=new Xt(_t.unitsPerPack),Pt=de(_t),Wt=new Xt(Pt),ia=Rt.dividedBy(zt).times(Wt);return We.plus(ia)},new Xt(0)).toNumber()),Ee=ne(()=>d.value.reduce((We,_t)=>{if(!_t.mrp||!_t.unitsPerPack||_t.unitsPerPack<=0)return We;const Rt=new Xt(_t.mrp),zt=new Xt(_t.unitsPerPack),Pt=new Xt(_t.discountPercentage||0),Wt=de(_t),Lt=new Xt(Wt),ia=Rt.dividedBy(zt),Ln=new Xt(1).minus(Pt.dividedBy(100)),zn=ia.times(Ln),Bn=ia.minus(zn).times(Lt);return We.plus(Bn)},new Xt(0)).toNumber()),Ce=ne(()=>d.value.reduce((We,_t)=>{if(!_t.mrp||!_t.unitsPerPack||_t.unitsPerPack<=0)return We;const Rt=new Xt(_t.mrp),zt=new Xt(_t.unitsPerPack),Pt=new Xt(_t.gstPercentage||0),Wt=new Xt(_t.discountPercentage||0),Lt=de(_t),ia=new Xt(Lt),Ln=Rt.dividedBy(zt),zn=new Xt(1).minus(Wt.dividedBy(100)),Yt=Ln.times(zn),Bn=new Xt(1).plus(Pt.dividedBy(100)),Fe=Yt.dividedBy(Bn).times(Pt.dividedBy(100)).times(ia);return We.plus(Fe)},new Xt(0)).toNumber()),Be=ne(()=>d.value.reduce((We,_t)=>{const Rt=new Xt(_e(_t,d.value.indexOf(_t)));return We.plus(Rt)},new Xt(0)).toNumber()),Te=ne(()=>{const Ye=new Xt(Be.value),We=new Xt(f.value||0),_t=Ye.minus(We);return Xt.max(new Xt(0),_t).toNumber()}),Oe=ne(()=>Math.ceil(Te.value)-Te.value),Me=ne(()=>Math.ceil(Te.value)),rt=Ye=>{if(!Ye)return"N/A";try{let We;if(typeof Ye=="number")We=new Date(Ye*1e3);else if(typeof Ye=="string")We=new Date(Ye);else return"Invalid Date";if(isNaN(We.getTime()))return"Invalid Date";const _t=String(We.getDate()).padStart(2,"0"),Rt=We.toLocaleDateString("en-IN",{month:"short"}),zt=String(We.getFullYear()).slice(-2);return`${_t} ${Rt} ${zt}`}catch(We){return console.error("Error formatting date:",We,Ye),"Invalid Date"}},ut=Ye=>{if(x.value=Ye,T&&clearTimeout(T),!Ye||Ye.trim().length===0){w.value=[],b.value=!1;return}T=setTimeout(()=>{Ie(Ye.trim())},300)},Ie=async Ye=>{if(!Ye||Ye.trim().length===0){w.value=[];return}try{b.value=!0,console.log(" Searching for:",Ye);const{data:We,error:_t}=await dEe(Ye);if(console.log(" Search response:",{medicinesCount:We?.length||0,error:_t?.message||null,data:We}),!_t&&We){const Rt=[];We.forEach(zt=>{console.log(` Medicine: ${zt.productName}, Batches: ${zt.batches?.length||0}`);const Pt=zt.batches||[];console.log(` Valid batches for ${zt.productName}: ${Pt.length}`),Pt.forEach(Wt=>{const Lt=Wt.unitsPerPack||1,ia=Wt.mrp/Lt;Rt.push({batchId:Wt.batchId||Wt.id,batchNumber:Wt.batchNumber,expiryDate:Wt.expiryDate,expiryFormatted:rt(Wt.expiryDate),medicineId:zt.id,medicineName:zt.productName,saltComposition:zt.saltComposition||"",marketer:zt.marketer||"",availableUnits:Wt.availableUnits,mrp:Wt.mrp,mrpPerUnit:ia,discountPercentage:Wt.discountPercentage||0,gstPercentage:Wt.gstPercentage||0,packType:Wt.packType||"",unitsPerPack:Lt,displayLabel:`${zt.productName} - ${Wt.batchNumber} (Exp: ${rt(Wt.expiryDate)}, Stock: ${Wt.availableUnits}, MRP: ${xt(ia)}/unit)`})})}),w.value=Rt,console.log("Flattened batches:",Rt.length)}else console.log("No data or error in response"),w.value=[],_t&&a("Error searching medicines: "+(_t.message||"Unknown error"))}catch(We){console.error("Error searching medicines:",We),w.value=[],a("Error searching medicines")}finally{b.value=!1}},Ue=()=>{g.value=!0,w.value=[],y.value=null,x.value="",T&&clearTimeout(T)},dt=()=>{if(!y.value)return;const Ye=y.value;if(Ye.availableUnits<=0){a("Selected batch has no available stock.");return}const We={medicineId:Ye.medicineId,medicineName:Ye.medicineName,saltComposition:Ye.saltComposition,marketer:Ye.marketer||"",batchId:Ye.batchId,batchNumber:Ye.batchNumber,expiryDate:Ye.expiryDate,packType:Ye.packType,unitsPerPack:Ye.unitsPerPack,mrp:Ye.mrp,discountPercentage:Ye.discountPercentage,gstPercentage:Ye.gstPercentage,quantityUnits:1,availableUnits:Ye.availableUnits};d.value.push(We),_e(We,d.value.length-1),g.value=!1,y.value=null,n("Medicine added to bill")},Ft=Ye=>{d.value.splice(Ye,1),Re()},it=async()=>{if(d.value.length===0)return{success:!1,error:"Please add at least one item to save the draft"};try{const Ye=d.value.map(Rt=>({medicineId:Rt.medicineId,medicineBatchId:Rt.batchId,quantityUnits:Rt.quantityUnits,discountPercentage:Rt.discountPercentage||0})),{data:We,error:_t}=await aEe(r.billId,Ye,f.value);return _t?{success:!1,error:_t.response?.data?.error||"Failed to save draft"}:(await te(),{success:!0,error:null})}catch(Ye){return console.error("Error saving draft:",Ye),{success:!1,error:Ye.message||"An unexpected error occurred"}}},qe=async()=>{try{m.value=!0;const Ye=await it();Ye.success?(n("Draft saved successfully"),s("bill-updated"),Vt()):a(Ye.error||"Failed to save draft")}catch(Ye){console.error("Error saving draft:",Ye),a("An unexpected error occurred")}finally{m.value=!1}},yt=async()=>{if(d.value.length===0){a("Please add at least one item to finalize the bill");return}try{v.value=!0;const Ye=await it();if(!Ye.success){a(`Failed to save changes: ${Ye.error}. Please try again.`);return}const{data:We,error:_t}=await rEe(r.billId);_t?a(_t.response?.data?.error||"Failed to finalize bill"):(n("Bill finalized successfully"),s("bill-updated",r.billId))}catch(Ye){console.error("Error finalizing bill:",Ye),a("An unexpected error occurred")}finally{v.value=!1}},mt=Ye=>{if(!Ye)return"";try{let We;if(typeof Ye=="number")We=new Date(Ye*1e3);else if(typeof Ye=="string")We=new Date(Ye);else return"";if(isNaN(We.getTime()))return"";const _t=String(We.getDate()).padStart(2,"0"),Rt=We.toLocaleDateString("en-IN",{month:"short"}),zt=String(We.getFullYear()).slice(-2);return`${_t} ${Rt} ${zt}`}catch(We){return console.error("Error formatting date:",We,Ye),""}},xt=Ye=>Ye==null?"0.00":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(Ye),an=Ye=>Ye==null?"0":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(Ye),Cn=Ye=>{if(!Ye)return!1;try{let We;if(typeof Ye=="number")We=new Date(Ye*1e3);else if(typeof Ye=="string")We=new Date(Ye);else return!1;if(isNaN(We.getTime()))return!1;const _t=new Date;return _t.setHours(0,0,0,0),We.setHours(0,0,0,0),We<_t}catch(We){return console.error("Error checking expiry:",We,Ye),!1}},oa=Ye=>({Draft:"warning",Finalized:"success",Cancelled:"error",Refund:"info"})[Ye]||"default",Vt=()=>{s("close")},kt=Ye=>Ye.quantityUnits-(Ye.returnedQuantity||0),at=(Ye,We)=>{const _t=kt(Ye);Ye.returnQuantity>_t&&(Ye.returnQuantity=_t,a(`Return quantity cannot exceed ${_t} units for ${Ye.medicineName}`)),Ye.returnQuantity<0&&(Ye.returnQuantity=0)},bt=ne(()=>d.value.filter(Ye=>Ye.returnQuantity>0).length),en=async()=>{const Ye=d.value.filter(We=>We.returnQuantity>0).map(We=>({billItemId:We.billItemId||We.id,returnedQuantity:We.returnQuantity}));if(Ye.length===0){a("Please specify return quantity for at least one item");return}try{if(p.value=!0,Q.value.length>0){const Rt=Q.value.filter(zt=>zt.amount&&parseFloat(zt.amount)>0&&zt.mode&&zt.paymentDate);if(Rt.length>0){for(const zt of Rt){const Pt={amount:parseFloat(zt.amount),mode:zt.mode,paymentDate:zt.paymentDate},Wt=await H(Pt);if(!Wt.success){a(`Failed to create payment: ${Wt.error?.message||"Unknown error"}`),p.value=!1;return}}Q.value=[],await L()}}const{data:We,error:_t}=await uEe(r.billId,Ye);_t?a(_t.response?.data?.error||_t.message||"Failed to process return"):(n("Return processed successfully"),s("bill-updated",r.billId))}catch(We){console.error("Error processing return:",We),a("An unexpected error occurred")}finally{p.value=!1}};return je(()=>r.billId,Ye=>{k.value=Ye},{immediate:!0}),dn(()=>{Y()}),(Ye,We)=>{const _t=I("v-icon"),Rt=I("v-btn"),zt=I("v-card-title"),Pt=I("v-col"),Wt=I("v-row"),Lt=I("v-progress-circular"),ia=I("v-label"),Ln=I("v-chip"),zn=I("v-card-text"),Yt=I("v-card"),Bn=I("v-select"),ke=I("v-text-field"),ze=I("v-table"),Fe=I("v-alert"),Le=I("v-divider"),Ge=I("v-date-picker"),he=I("v-menu"),se=I("v-container"),ge=I("v-list-item"),xe=I("v-card-subtitle"),He=I("v-autocomplete"),tt=I("v-spacer"),nt=I("v-card-actions"),et=I("v-dialog");return R(),Ae(Ke,null,[l(Yt,{rounded:"lg",color:"surfaceContainer",flat:"",ripple:!1},{default:u(()=>[l(Wt,{"no-gutters":""},{default:u(()=>[l(Pt,{cols:"12"},{default:u(()=>[l(zt,{class:"d-flex align-center justify-space-between"},{default:u(()=>[h("span",null,"Pharmacy Bill - "+K(e.mode==="return"?"Return":"Edit"),1),l(Rt,{onClick:Vt,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(_t,{size:"18"},{default:u(()=>[...We[4]||(We[4]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(Wt,{"no-gutters":""},{default:u(()=>[l(Pt,{cols:"12",class:"scroll-element"},{default:u(()=>[o.value?(R(),ve(Wt,{key:0,"no-gutters":""},{default:u(()=>[l(Pt,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[h("div",WOe,[l(Lt,{indeterminate:"",color:"primary",size:"64"}),We[5]||(We[5]=h("div",{class:"mt-4 text-subtitle-1"},"Loading bill...",-1))])]),_:1})]),_:1})):i.value?(R(),ve(Wt,{key:1,"no-gutters":""},{default:u(()=>[l(Pt,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[h("div",jOe,[l(_t,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...We[6]||(We[6]=[O("mdi-alert-circle",-1)])]),_:1}),We[8]||(We[8]=h("div",{class:"text-h6 mb-2"},"Failed to Load Bill",-1)),h("div",qOe,K(i.value),1),l(Rt,{color:"primary",onClick:Y,"prepend-icon":"mdi-refresh"},{default:u(()=>[...We[7]||(We[7]=[O(" Retry ",-1)])]),_:1})])]),_:1})]),_:1})):c.value?(R(),ve(se,{key:2,fluid:"",class:"pa-3"},{default:u(()=>[l(Yt,{flat:"",color:"surfaceContainerHigh",class:"mb-4 card-enhanced"},{default:u(()=>[l(zn,{class:"pb-1 pt-2"},{default:u(()=>[l(Wt,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(Pt,{cols:"4"},{default:u(()=>[h("div",YOe,[l(ia,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...We[9]||(We[9]=[O("Patient Information",-1)])]),_:1}),h("div",XOe,K(c.value.patientName||"Unknown Patient"),1),h("div",JOe,"ID: "+K(c.value.patientId||"N/A"),1)])]),_:1}),l(Pt,{cols:"4"},{default:u(()=>[h("div",ZOe,[l(ia,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...We[10]||(We[10]=[O("Consultation Details",-1)])]),_:1}),h("div",eHe,"Dr. "+K(c.value.doctorName||"Unknown"),1),h("div",tHe,"Date: "+K(mt(c.value.consultationDate)),1)])]),_:1}),l(Pt,{cols:"4"},{default:u(()=>[h("div",nHe,[l(ia,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...We[11]||(We[11]=[O("Bill Information",-1)])]),_:1}),h("div",aHe,K(c.value.identifier),1),h("div",rHe,"Date: "+K(mt(c.value.billDate)),1),l(Ln,{color:oa(c.value.status),size:"small",variant:"flat",class:"mt-1"},{default:u(()=>[O(K(c.value.status),1)]),_:1},8,["color"])])]),_:1})]),_:1})]),_:1})]),_:1}),A.value&&A.value.length>0?(R(),ve(Yt,{key:0,flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(zn,{class:"pb-2"},{default:u(()=>[We[12]||(We[12]=h("div",{class:"text-subtitle-1 mb-2"},"Prescription Medicines",-1)),We[13]||(We[13]=h("div",{class:"text-body-2 text-medium-emphasis mb-2"},"These medicines were prescribed in the consultation:",-1)),(R(!0),Ae(Ke,null,Gt(A.value,(st,wt)=>(R(),ve(Ln,{key:wt,size:"small",variant:"outlined",class:"mr-2 mb-2"},{default:u(()=>[O(K(st.productName)+" ("+K(st.quantityUnits)+" units) ",1)]),_:2},1024))),128))]),_:1})]),_:1})):ye("",!0),l(Yt,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(zn,{class:"pb-2"},{default:u(()=>[We[34]||(We[34]=h("div",{class:"text-subtitle-1 mb-3"},"Bill Items",-1)),l(ze,{density:"compact",class:"mb-3"},{default:u(()=>[h("thead",null,[h("tr",null,[We[14]||(We[14]=h("th",{class:"text-left",style:{width:"60px"}},"Sr. No",-1)),We[15]||(We[15]=h("th",{class:"text-left",style:{width:"200px"}},"Item",-1)),We[16]||(We[16]=h("th",{class:"text-left",style:{width:"150px"}},"Batch Details",-1)),We[17]||(We[17]=h("th",{class:"text-left",style:{width:"120px"}},"Packaging Details",-1)),We[18]||(We[18]=h("th",{class:"text-right",style:{width:"100px"}},"MRP (Pack)",-1)),We[19]||(We[19]=h("th",{class:"text-right",style:{width:"100px"}},"Discount %",-1)),We[20]||(We[20]=h("th",{class:"text-right",style:{width:"120px"}},"Taxable Value/Unit",-1)),We[21]||(We[21]=h("th",{class:"text-right",style:{width:"100px"}},"GST %",-1)),We[22]||(We[22]=h("th",{class:"text-right",style:{width:"120px"}},"Final Value/Unit",-1)),We[23]||(We[23]=h("th",{class:"text-right",style:{width:"100px"}},"Qty",-1)),e.mode==="return"?(R(),Ae("th",sHe,"Already Returned")):ye("",!0),e.mode==="return"?(R(),Ae("th",oHe,"Return Qty")):ye("",!0),We[24]||(We[24]=h("th",{class:"text-right",style:{width:"120px"}},"Total ()",-1)),e.mode==="edit"?(R(),Ae("th",iHe,"Actions")):ye("",!0)])]),h("tbody",null,[(R(!0),Ae(Ke,null,Gt(d.value,(st,wt)=>(R(),Ae("tr",{key:wt},[h("td",null,K(wt+1),1),h("td",null,[h("div",lHe,K(st.medicineName),1),h("div",uHe,K(st.saltComposition),1),st.marketer?(R(),Ae("div",cHe,K(st.marketer),1)):ye("",!0)]),h("td",null,[e.mode==="return"||st.batchId?(R(),Ae(Ke,{key:0},[h("div",dHe,K(st.batchNumber||"N/A"),1),h("div",{class:ct(["text-caption text-medium-emphasis",Cn(st.expiryDate)?"text-error":""])},[st.expiryDate?(R(),Ae(Ke,{key:0},[O(" Exp: "+K(mt(st.expiryDate))+" ",1),Cn(st.expiryDate)?(R(),ve(Ln,{key:0,color:"error",size:"x-small",variant:"tonal",class:"ml-1"},{default:u(()=>[...We[25]||(We[25]=[O(" Expired ",-1)])]),_:1})):ye("",!0)],64)):(R(),Ae("span",AHe,"Exp: N/A"))],2),e.mode==="return"?(R(),ve(Ln,{key:0,size:"x-small",color:"info",variant:"tonal",class:"mt-1"},{default:u(()=>[l(_t,{start:"",size:"x-small"},{default:u(()=>[...We[26]||(We[26]=[O("mdi-lock",-1)])]),_:1}),We[27]||(We[27]=O(" Locked ",-1))]),_:1})):ye("",!0)],64)):e.mode==="edit"?(R(),ve(Bn,{key:1,modelValue:st.batchId,"onUpdate:modelValue":[It=>st.batchId=It,()=>oe(st,wt)],items:ae(st.medicineId),"item-title":"label","item-value":"id",density:"compact",variant:"underlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):ye("",!0)]),h("td",null,[h("div",fHe,K(st.packType||"N/A"),1),h("div",mHe,K(st.unitsPerPack||1)+" units/pack",1)]),h("td",vHe,K(xt(st.mrp)),1),h("td",hHe,K(st.discountPercentage)+"%",1),h("td",pHe,K(xt(j(st))),1),h("td",gHe,K(st.gstPercentage)+"%",1),h("td",yHe,K(xt(ce(st))),1),h("td",_He,[e.mode==="edit"?(R(),ve(ke,{key:0,modelValue:st.quantityUnits,"onUpdate:modelValue":[It=>st.quantityUnits=It,()=>_e(st,wt)],modelModifiers:{number:!0},type:"number",density:"compact",variant:"underlined","hide-details":"",min:"1",max:st.availableUnits},null,8,["modelValue","onUpdate:modelValue","max"])):(R(),Ae("span",wHe,K(st.quantityUnits),1))]),e.mode==="return"?(R(),Ae("td",bHe,[h("span",xHe,K(st.returnedQuantity||0),1)])):ye("",!0),e.mode==="return"?(R(),Ae("td",CHe,[l(ke,{modelValue:st.returnQuantity,"onUpdate:modelValue":[It=>st.returnQuantity=It,()=>{at(st,wt),Re()}],modelModifiers:{number:!0},type:"number",density:"compact",variant:"underlined","hide-details":"",min:"0",max:kt(st)},null,8,["modelValue","onUpdate:modelValue","max"])])):ye("",!0),h("td",SHe,K(xt(_e(st,wt))),1),e.mode==="edit"?(R(),Ae("td",EHe,[l(Rt,{icon:"",size:"small",color:"error",variant:"text",onClick:It=>Ft(wt)},{default:u(()=>[l(_t,null,{default:u(()=>[...We[28]||(We[28]=[O("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])):ye("",!0)]))),128))])]),_:1}),d.value.length===0?(R(),ve(Fe,{key:0,type:"info",variant:"tonal",class:"mt-2"},{default:u(()=>[e.mode==="edit"?(R(),Ae("span",BHe,'No items in bill. Click "Add Medicine" to add items.')):(R(),Ae("span",kHe,"No items in bill."))]),_:1})):ye("",!0),e.mode==="edit"?(R(),ve(Wt,{key:1,"no-gutters":"",class:"align-center mt-3"},{default:u(()=>[l(Pt,{cols:"auto"},{default:u(()=>[l(Rt,{variant:"outlined",color:"primary",onClick:Ue,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...We[29]||(We[29]=[O(" Add Medicine ",-1)])]),_:1})]),_:1}),l(Pt),l(Pt,{cols:"3"},{default:u(()=>[l(ke,{label:"Additional Discount",modelValue:f.value,"onUpdate:modelValue":[We[0]||(We[0]=st=>f.value=st),Re],modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})):ye("",!0),e.mode==="return"?(R(),ve(Yt,{key:2,flat:"",color:"surfaceContainerHigh",class:"mt-3 card-enhanced"},{default:u(()=>[l(zn,{class:"pb-2"},{default:u(()=>[We[32]||(We[32]=h("div",{class:"text-subtitle-2 mb-2"},"Return Summary",-1)),h("div",THe,[We[30]||(We[30]=O(" Items to Return: ",-1)),h("strong",null,K(bt.value),1)]),l(Le,{class:"my-2"}),h("div",IHe,[We[31]||(We[31]=h("strong",null,"Updated Bill Total (after return):",-1)),O(" "+K(xt(Me.value)),1)]),We[33]||(We[33]=h("div",{class:"text-body-2 text-medium-emphasis"}," Bill total updates in real-time. Adjust payments as needed before processing return. ",-1))]),_:1})]),_:1})):ye("",!0)]),_:1})]),_:1}),l(Yt,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(zn,{class:"pb-2"},{default:u(()=>[We[42]||(We[42]=h("div",{class:"text-subtitle-1 mb-3"},"Bill Summary",-1)),l(Le,{class:"mb-3"}),l(Wt,{"no-gutters":""},{default:u(()=>[l(Pt,{cols:"6"},{default:u(()=>[We[35]||(We[35]=h("div",{class:"text-body-2 mb-1"},"Total MRP:",-1)),We[36]||(We[36]=h("div",{class:"text-body-2 mb-1"},"Total Discount:",-1)),We[37]||(We[37]=h("div",{class:"text-body-2 mb-1"},"Total GST:",-1)),We[38]||(We[38]=h("div",{class:"text-body-2 mb-1"},"Subtotal with GST:",-1)),f.value>0?(R(),Ae("div",FHe,"Additional Discount:")):ye("",!0),We[39]||(We[39]=h("div",{class:"text-body-2 mb-1"},"Net Amount:",-1)),We[40]||(We[40]=h("div",{class:"text-body-2 mb-1"},"Round Off:",-1)),We[41]||(We[41]=h("div",{class:"text-subtitle-1 font-weight-bold mt-2"},"Final Amount:",-1))]),_:1}),l(Pt,{cols:"6",class:"text-right"},{default:u(()=>[h("div",PHe,K(xt(be.value)),1),h("div",DHe,"-"+K(xt(Ee.value)),1),h("div",UHe,K(xt(Ce.value)),1),h("div",RHe,K(xt(Be.value)),1),f.value>0?(R(),Ae("div",NHe,"-"+K(xt(f.value)),1)):ye("",!0),h("div",VHe,K(xt(Te.value)),1),h("div",LHe,K(Oe.value>0?"+":"")+K(xt(Oe.value)),1),h("div",MHe,K(xt(Me.value)),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(Yt,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(zn,{class:"pb-2"},{default:u(()=>[We[53]||(We[53]=h("div",{class:"text-subtitle-1 mb-3"},"Payment Information",-1)),l(Wt,{"no-gutters":"",class:"mb-3"},{default:u(()=>[l(Pt,{cols:"4"},{default:u(()=>[We[43]||(We[43]=h("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Total Amount",-1)),h("div",OHe,K(xt(Me.value)),1),e.mode==="return"?(R(),Ae("div",HHe," (Updated after return) ")):ye("",!0)]),_:1}),l(Pt,{cols:"4"},{default:u(()=>[We[44]||(We[44]=h("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Paid Amount",-1)),h("div",$He,K(xt(Qe(F)+J.value)),1)]),_:1}),l(Pt,{cols:"4"},{default:u(()=>[We[45]||(We[45]=h("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Balance Due",-1)),h("div",{class:ct(["text-h6",M.value>0?"text-error":"text-success"])},K(xt(M.value)),3),e.mode==="return"&&M.value<0?(R(),Ae("div",QHe," (Credit/Overpayment) ")):ye("",!0)]),_:1})]),_:1}),Qe(C)?(R(),Ae("div",GHe,[l(Lt,{indeterminate:"",size:"32",color:"primary"}),We[46]||(We[46]=h("div",{class:"text-body-2 mt-2"},"Loading payments...",-1))])):(R(),Ae(Ke,{key:1},[l(Le,{class:"mb-3"}),We[52]||(We[52]=h("div",{class:"text-subtitle-2 mb-2"},"Payments",-1)),l(ze,{density:"compact",class:"mb-3"},{default:u(()=>[We[50]||(We[50]=h("thead",null,[h("tr",null,[h("th",{class:"text-left",style:{width:"60px"}},"Sr. No"),h("th",{class:"text-left",style:{width:"150px"}},"Amount ()"),h("th",{class:"text-left",style:{width:"150px"}},"Payment Mode"),h("th",{class:"text-left",style:{width:"150px"}},"Payment Date"),h("th",{class:"text-left",style:{width:"80px"}},"Actions")])],-1)),h("tbody",null,[(R(!0),Ae(Ke,null,Gt(Qe(E),(st,wt)=>(R(),Ae("tr",{key:`existing-${st.id}`},[h("td",null,K(wt+1),1),h("td",zHe,""+K(st.amount.toLocaleString()),1),h("td",null,K(st.mode),1),h("td",null,K(mt(st.paymentDate)),1),h("td",null,[l(Rt,{icon:"",size:"small",color:"error",variant:"text",onClick:It=>Qe(ue)(st.id),loading:Qe(U).includes(st.id)},{default:u(()=>[l(_t,null,{default:u(()=>[...We[47]||(We[47]=[O("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick","loading"])])]))),128)),(R(!0),Ae(Ke,null,Gt(Q.value,(st,wt)=>(R(),Ae("tr",{key:`new-${wt}`},[h("td",null,K(Qe(E).length+wt+1),1),h("td",null,[l(ke,{modelValue:st.amount,"onUpdate:modelValue":It=>st.amount=It,modelModifiers:{number:!0},type:"number",prefix:"",min:"1",density:"compact",variant:"underlined","hide-details":"",rules:X},null,8,["modelValue","onUpdate:modelValue"])]),h("td",null,[l(Bn,{modelValue:st.mode,"onUpdate:modelValue":It=>st.mode=It,items:Qe(ie),density:"compact",variant:"underlined","hide-details":"",rules:le},null,8,["modelValue","onUpdate:modelValue","items"])]),h("td",null,[l(he,{modelValue:st.datePickerMenu,"onUpdate:modelValue":It=>st.datePickerMenu=It,"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},{activator:u(({props:It})=>[l(ke,Pe({modelValue:st.paymentDate,"onUpdate:modelValue":tn=>st.paymentDate=tn,density:"compact",variant:"underlined","hide-details":"",rules:Z,readonly:""},{ref_for:!0},It),{"append-inner":u(()=>[l(_t,{class:"text-medium-emphasis"},{default:u(()=>[...We[48]||(We[48]=[O("mdi-calendar",-1)])]),_:1})]),_:1},16,["modelValue","onUpdate:modelValue"])]),default:u(()=>[l(Ge,{"model-value":P(st.paymentDate),"onUpdate:modelValue":It=>G(It,st),color:"primary",locale:"en-IN"},null,8,["model-value","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),h("td",null,[l(Rt,{icon:"",size:"small",color:"error",variant:"text",onClick:It=>q(wt)},{default:u(()=>[l(_t,null,{default:u(()=>[...We[49]||(We[49]=[O("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])]))),128))])]),_:1}),l(Wt,{"no-gutters":"",class:"align-center"},{default:u(()=>[l(Pt,{cols:"auto"},{default:u(()=>[l(Rt,{variant:"outlined",color:"secondary",onClick:re,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...We[51]||(We[51]=[O(" Add Payment ",-1)])]),_:1})]),_:1})]),_:1})],64))]),_:1})]),_:1}),l(Yt,{flat:"",color:"surfaceContainerHigh",class:"card-enhanced"},{default:u(()=>[l(zn,{class:"d-flex justify-center pb-2",style:{gap:"4px"}},{default:u(()=>[e.mode==="edit"?(R(),Ae(Ke,{key:0},[l(Rt,{variant:"outlined",onClick:qe,loading:m.value,disabled:c.value.status!=="Draft"||d.value.length===0},{default:u(()=>[...We[54]||(We[54]=[O(" Save Draft ",-1)])]),_:1},8,["loading","disabled"]),l(Rt,{color:"primary",onClick:yt,loading:v.value,disabled:c.value.status!=="Draft"||d.value.length===0},{default:u(()=>[...We[55]||(We[55]=[O(" Finalize Bill ",-1)])]),_:1},8,["loading","disabled"])],64)):(R(),Ae(Ke,{key:1},[l(Rt,{variant:"outlined",onClick:Vt},{default:u(()=>[...We[56]||(We[56]=[O(" Cancel ",-1)])]),_:1}),l(Rt,{color:"primary",onClick:en,loading:p.value,disabled:bt.value===0},{default:u(()=>[...We[57]||(We[57]=[O(" Process Return ",-1)])]),_:1},8,["loading","disabled"])],64))]),_:1})]),_:1})]),_:1})):ye("",!0)]),_:1})]),_:1})]),_:1}),l(et,{modelValue:g.value,"onUpdate:modelValue":We[3]||(We[3]=st=>g.value=st),"max-width":"700px",persistent:""},{default:u(()=>[l(Yt,null,{default:u(()=>[l(zt,null,{default:u(()=>[...We[58]||(We[58]=[O("Add Medicine to Bill",-1)])]),_:1}),l(zn,null,{default:u(()=>[l(He,{modelValue:y.value,"onUpdate:modelValue":We[1]||(We[1]=st=>y.value=st),items:w.value,"item-title":"displayLabel","return-object":"",label:"Search Medicine by Batch",variant:"outlined",loading:b.value,"onUpdate:search":ut,placeholder:"Type medicine name to search...",clearable:"",autofocus:""},{item:u(({props:st,item:wt})=>[l(ge,Pe(st,{class:"batch-search-item"}),{title:u(()=>[h("div",KHe,[h("span",WHe,K(wt.raw.medicineName),1),wt.raw.saltComposition?(R(),Ae("span",jHe," ("+K(wt.raw.saltComposition)+") ",1)):ye("",!0)])]),subtitle:u(()=>[h("div",qHe,[h("div",YHe,[h("div",XHe,[l(Ln,{size:"small",variant:"tonal",color:"primary",density:"compact"},{default:u(()=>[l(_t,{start:"",size:"small"},{default:u(()=>[...We[59]||(We[59]=[O("mdi-barcode",-1)])]),_:1}),O(" "+K(wt.raw.batchNumber),1)]),_:2},1024),l(Ln,{size:"small",variant:"tonal",color:"info",density:"compact"},{default:u(()=>[l(_t,{start:"",size:"small"},{default:u(()=>[...We[60]||(We[60]=[O("mdi-calendar",-1)])]),_:1}),O(" "+K(wt.raw.expiryFormatted),1)]),_:2},1024),l(Ln,{size:"small",variant:"tonal",color:"default",density:"compact"},{default:u(()=>[O(K(an(wt.raw.mrpPerUnit))+"/unit ",1)]),_:2},1024),wt.raw.discountPercentage>0?(R(),ve(Ln,{key:0,size:"small",variant:"tonal",color:"warning",density:"compact"},{default:u(()=>[l(_t,{start:"",size:"small"},{default:u(()=>[...We[61]||(We[61]=[O("mdi-tag",-1)])]),_:1}),O(" "+K(wt.raw.discountPercentage)+"% off ",1)]),_:2},1024)):ye("",!0)]),l(Ln,{size:"default",variant:"flat",color:"success",class:"font-weight-bold"},{default:u(()=>[l(_t,{start:""},{default:u(()=>[...We[62]||(We[62]=[O("mdi-package-variant",-1)])]),_:1}),O(" "+K(wt.raw.availableUnits)+" units ",1)]),_:2},1024)])])]),_:2},1040)]),"no-data":u(()=>[l(Yt,{flat:"",class:"pa-4 text-center"},{default:u(()=>[l(xe,null,{default:u(()=>[O(K(b.value?"Searching...":"No batches found. Try a different search term."),1)]),_:1})]),_:1})]),_:1},8,["modelValue","items","loading"])]),_:1}),l(nt,null,{default:u(()=>[l(tt),l(Rt,{variant:"outlined",onClick:We[2]||(We[2]=st=>g.value=!1)},{default:u(()=>[...We[63]||(We[63]=[O("Cancel",-1)])]),_:1}),l(Rt,{color:"primary",onClick:dt,disabled:!y.value},{default:u(()=>[...We[64]||(We[64]=[O("Add to Bill",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},ZHe=qt(JHe,[["__scopeId","data-v-21b23054"]]),e$e={class:"text-center"},t$e={class:"text-center"},n$e={class:"text-body-2 text-medium-emphasis mb-4"},a$e={class:"pa-1"},r$e={class:"text-body-1 font-weight-medium"},s$e={class:"text-body-2 text-medium-emphasis"},o$e={key:0,class:"text-body-2 text-medium-emphasis"},i$e={class:"pa-1"},l$e={class:"text-body-1 font-weight-medium"},u$e={class:"text-body-2 text-medium-emphasis"},c$e={class:"pa-1"},d$e={class:"text-body-1 font-weight-medium"},A$e={class:"text-body-2 text-medium-emphasis"},f$e={class:"text-body-2 font-weight-medium"},m$e={key:0,class:"text-caption text-medium-emphasis"},v$e={class:"text-body-2"},h$e={class:"text-body-2 font-weight-medium"},p$e={key:1},g$e={class:"text-body-2"},y$e={class:"text-caption text-medium-emphasis"},_$e={class:"text-right"},w$e={class:"text-right"},b$e={class:"text-right"},x$e={class:"text-right"},C$e={class:"text-right"},S$e={class:"text-right"},E$e={class:"text-right font-weight-medium"},B$e={key:0,class:"text-body-2 mb-1 font-weight-bold"},k$e={class:"text-body-2 mb-1"},T$e={class:"text-body-2 mb-1"},I$e={class:"text-body-2 mb-1"},F$e={class:"text-body-2 mb-1",style:{"font-size":"0.875rem"}},P$e={class:"text-body-2 mb-1",style:{"font-size":"0.875rem"}},D$e={class:"text-body-2 mb-1 font-weight-bold"},U$e={key:0,class:"text-body-2 mb-1 font-weight-bold"},R$e={class:"text-body-2 mb-1"},N$e={class:"text-body-2 mb-1"},V$e={class:"text-subtitle-1 font-weight-bold mt-2"},L$e={class:"text-h6"},M$e={class:"text-h6 text-success"},O$e={key:0,class:"text-center pa-4"},H$e={class:"text-left"},$$e={class:"text-left"},Q$e={class:"text-right"},G$e={class:"text-right"},z$e={class:"text-center pa-4"},K$e={key:1,class:"d-flex justify-center align-center pa-8"},W$e={class:"text-center"},j$e={__name:"pharmacy-bill-view",props:{billId:{type:[String,Number],required:!0}},emits:["close","edit-bill"],setup(e,{emit:t}){const{showError:n}=ca(),a=e,r=t,s=V(!1),o=V(null),i=V(null),c=V(null),A=V("view"),d=V({}),f=V(null),m=aQ(f),{billPayments:v,isLoadingPayments:p,totalPaymentsMade:g,loadBillPayments:y}=m,w=async()=>{try{s.value=!0,o.value=null;const{data:M,error:te}=await DH(a.billId);if(te)o.value=te.response?.data?.error||te.message||"Failed to load bill",n("Error loading bill");else{if(i.value=M,M.patientId)try{const Y=await eT(M.patientId);Y.data&&(c.value=Y.data)}catch(Y){console.warn("Could not fetch patient details:",Y)}f.value=a.billId,await y()}}catch(M){console.error("Error loading bill:",M),o.value=M.message||"An unexpected error occurred",n("Error loading bill")}finally{s.value=!1}},b=M=>{if(!M)return"";try{let te;if(typeof M=="number")te=new Date(M*1e3);else if(typeof M=="string")te=new Date(M);else return"";if(isNaN(te.getTime()))return"";const Y=String(te.getDate()).padStart(2,"0"),W=te.toLocaleDateString("en-IN",{month:"short"}),ee=String(te.getFullYear()).slice(-2);return`${Y} ${W} ${ee}`}catch(te){return console.error("Error formatting date:",te,M),""}},x=M=>{if(!M)return"";try{return new Date(M*1e3).toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return M}},T=M=>M==null?"0.00":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(M),D=M=>{if(!M.mrp||!M.unitsPerPack||M.unitsPerPack<=0)return 0;const te=new Xt(M.mrp),Y=new Xt(M.unitsPerPack),W=new Xt(M.gstPercentage||0),ee=new Xt(M.discountPercentage||0),ae=te.dividedBy(Y),oe=new Xt(1).plus(W.dividedBy(100)),j=ae.dividedBy(oe),ce=new Xt(1).minus(ee.dividedBy(100));return j.times(ce).toNumber()},k=M=>{if(!M.mrp||!M.unitsPerPack||M.unitsPerPack<=0)return 0;const te=new Xt(D(M)),Y=new Xt(M.gstPercentage||0),W=new Xt(1).plus(Y.dividedBy(100));return te.times(W).toNumber()},S=(M,te)=>{if(!M.mrp||!M.unitsPerPack||M.unitsPerPack<=0)return 0;const Y=new Xt(M.mrp),W=new Xt(M.unitsPerPack),ee=new Xt(M.gstPercentage||0),ae=new Xt(M.discountPercentage||0),oe=new Xt(M.quantityUnits||0),j=Y.dividedBy(W),ce=new Xt(1).plus(ee.dividedBy(100)),de=j.dividedBy(ce),_e=new Xt(1).minus(ae.dividedBy(100)),Re=de.times(_e),be=Re.times(ee.dividedBy(100));return Re.plus(be).times(oe).toNumber()},E=ne(()=>i.value?.items?i.value.items.reduce((te,Y)=>{if(!Y.mrp||!Y.unitsPerPack||Y.unitsPerPack<=0)return te;const W=new Xt(Y.mrp),ee=new Xt(Y.unitsPerPack),ae=new Xt(Y.quantityUnits||0),j=W.dividedBy(ee).times(ae);return te.plus(j)},new Xt(0)).toNumber():0),C=ne(()=>i.value?.items?i.value.items.reduce((te,Y)=>{if(!Y.mrp||!Y.unitsPerPack||Y.unitsPerPack<=0)return te;const W=new Xt(Y.mrp),ee=new Xt(Y.unitsPerPack),ae=new Xt(Y.gstPercentage||0),oe=new Xt(Y.discountPercentage||0),j=new Xt(Y.quantityUnits||0),ce=W.dividedBy(ee),de=new Xt(1).plus(ae.dividedBy(100)),_e=ce.dividedBy(de),Re=new Xt(1).minus(oe.dividedBy(100)),be=_e.times(Re),Ce=_e.minus(be).times(j);return te.plus(Ce)},new Xt(0)).toNumber():0),U=ne(()=>i.value?.items?i.value.items.reduce((te,Y)=>{if(!Y.mrp||!Y.unitsPerPack||Y.unitsPerPack<=0)return te;const W=new Xt(Y.mrp),ee=new Xt(Y.unitsPerPack),ae=new Xt(Y.gstPercentage||0),oe=new Xt(Y.discountPercentage||0),j=new Xt(Y.quantityUnits||0),ce=W.dividedBy(ee),de=new Xt(1).plus(ae.dividedBy(100)),_e=ce.dividedBy(de),Re=new Xt(1).minus(oe.dividedBy(100)),Ce=_e.times(Re).times(ae.dividedBy(100)).times(j);return te.plus(Ce)},new Xt(0)).toNumber():0),F=ne(()=>new Xt(U.value).dividedBy(2).toNumber()),L=ne(()=>new Xt(U.value).dividedBy(2).toNumber()),H=ne(()=>i.value?.items?i.value.items.reduce((te,Y)=>{const W=Y.totalAmount||S(Y);return te.plus(new Xt(W))},new Xt(0)).toNumber():0),ue=ne(()=>{const M=new Xt(H.value),te=new Xt(i.value?.additionalDiscountAmount||0),Y=M.minus(te);return Xt.max(new Xt(0),Y).toNumber()}),ie=ne(()=>Math.ceil(ue.value)-ue.value),Q=ne(()=>Math.ceil(ue.value)),X=ne(()=>Math.max(0,Q.value-g.value)),le=M=>{if(!M)return!1;try{let te;if(typeof M=="number")te=new Date(M*1e3);else if(typeof M=="string")te=new Date(M);else return!1;if(isNaN(te.getTime()))return!1;const Y=new Date;return Y.setHours(0,0,0,0),te.setHours(0,0,0,0),te<Y}catch(te){return console.error("Error checking expiry:",te,M),!1}},Z=M=>({Draft:"warning",Finalized:"success",Cancelled:"error",Refund:"info"})[M]||"default",re=()=>{r("edit-bill")},q=()=>{r("close")},P=async()=>{try{const M=await NH();if(M.error)console.error("Error fetching pharmacy config:",M.error),d.value={header:"",gstNumber:"",useHeader:!0,pageSize:"A4"};else{const te=M.data||{};d.value={header:te.header||"",gstNumber:te.gstNumber||"",useHeader:te.useHeader!==void 0?te.useHeader===1||te.useHeader===!0:!0,pageSize:te.pageSize||"A4"}}}catch(M){console.error("Error fetching pharmacy configurations:",M),d.value={header:"",gstNumber:"",useHeader:!0,pageSize:"A4"}}},G=ne(()=>{if(!i.value)return null;const M=i.value.items.map((te,Y)=>({...te,taxableValuePerUnit:te.unitPrice||D(te),finalValuePerUnit:te.totalAmount&&te.quantityUnits?te.totalAmount/te.quantityUnits:k(te),itemTotal:te.totalAmount||S(te)}));return{pharmacyBill:{identifier:i.value.identifier,billDate:i.value.billDate,status:i.value.status,patientName:i.value.patientName,patientId:i.value.patientId,patientContactNumber:i.value.patientContactNumber,doctorName:i.value.doctorName,consultationDate:i.value.consultationDate,items:M,totalMrp:E.value,totalDiscount:C.value,totalGst:U.value,totalCgst:F.value,totalSgst:L.value,subtotalWithGst:H.value,additionalDiscountAmount:i.value.additionalDiscountAmount||0,netAmount:ue.value,roundOff:ie.value,finalAmount:Q.value,payments:v.value||[],totalPaymentsMade:g.value,balanceDue:X.value},pharmacyConfigurations:d.value}}),J=M=>{console.log("Pharmacy bill PDF generated:",M)};return je(()=>a.billId,M=>{f.value=M},{immediate:!0}),dn(()=>{w(),P()}),(M,te)=>{const Y=I("v-icon"),W=I("v-btn"),ee=I("v-card-title"),ae=I("v-col"),oe=I("v-row"),j=I("v-tab"),ce=I("v-tabs"),de=I("v-progress-circular"),_e=I("v-label"),Re=I("v-chip"),be=I("v-card-text"),Ee=I("v-card"),Ce=I("v-table"),Be=I("v-divider"),Te=I("v-container"),Oe=I("v-tabs-window-item"),Me=I("v-tabs-window");return R(),ve(Ee,{rounded:"lg",color:"surfaceContainer",flat:"",ripple:!1},{default:u(()=>[l(oe,{"no-gutters":""},{default:u(()=>[l(ae,{cols:"12"},{default:u(()=>[l(ee,{class:"d-flex align-center justify-space-between"},{default:u(()=>[te[3]||(te[3]=h("span",null,"Pharmacy Bill - View",-1)),l(W,{onClick:q,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(Y,{size:"18"},{default:u(()=>[...te[2]||(te[2]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(oe,{"no-gutters":""},{default:u(()=>[l(ae,{cols:"12"},{default:u(()=>[l(ce,{modelValue:A.value,"onUpdate:modelValue":te[0]||(te[0]=rt=>A.value=rt),color:"primary","bg-color":"surfaceContainerHigh","align-tabs":"start",class:"mx-3 mb-3"},{default:u(()=>[l(j,{value:"view"},{default:u(()=>[l(Y,{start:""},{default:u(()=>[...te[4]||(te[4]=[O("mdi-eye",-1)])]),_:1}),te[5]||(te[5]=O(" View Bill ",-1))]),_:1}),l(j,{value:"share"},{default:u(()=>[l(Y,{start:""},{default:u(()=>[...te[6]||(te[6]=[O("mdi-share-variant",-1)])]),_:1}),te[7]||(te[7]=O(" Share Bill ",-1))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(oe,{"no-gutters":""},{default:u(()=>[l(ae,{cols:"12",class:"scroll-element"},{default:u(()=>[l(Me,{modelValue:A.value,"onUpdate:modelValue":te[1]||(te[1]=rt=>A.value=rt)},{default:u(()=>[l(Oe,{value:"view"},{default:u(()=>[s.value?(R(),ve(oe,{key:0,"no-gutters":""},{default:u(()=>[l(ae,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[h("div",e$e,[l(de,{indeterminate:"",color:"primary",size:"64"}),te[8]||(te[8]=h("div",{class:"mt-4 text-subtitle-1"},"Loading bill...",-1))])]),_:1})]),_:1})):o.value?(R(),ve(oe,{key:1,"no-gutters":""},{default:u(()=>[l(ae,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[h("div",t$e,[l(Y,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...te[9]||(te[9]=[O("mdi-alert-circle",-1)])]),_:1}),te[11]||(te[11]=h("div",{class:"text-h6 mb-2"},"Failed to Load Bill",-1)),h("div",n$e,K(o.value),1),l(W,{color:"primary",onClick:w,"prepend-icon":"mdi-refresh"},{default:u(()=>[...te[10]||(te[10]=[O(" Retry ",-1)])]),_:1})])]),_:1})]),_:1})):i.value?(R(),ve(Te,{key:2,fluid:"",class:"pa-3"},{default:u(()=>[l(Ee,{flat:"",color:"surfaceContainerHigh",class:"mb-4 card-enhanced"},{default:u(()=>[l(be,{class:"pb-1 pt-2"},{default:u(()=>[l(oe,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(ae,{cols:"4"},{default:u(()=>[h("div",a$e,[l(_e,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...te[12]||(te[12]=[O("Patient Information",-1)])]),_:1}),h("div",r$e,K(i.value.patientName||"Unknown Patient"),1),h("div",s$e,"ID: "+K(i.value.patientId||"N/A"),1),i.value.patientContactNumber?(R(),Ae("div",o$e," Phone: "+K(i.value.patientContactNumber),1)):ye("",!0)])]),_:1}),l(ae,{cols:"4"},{default:u(()=>[h("div",i$e,[l(_e,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...te[13]||(te[13]=[O("Consultation Details",-1)])]),_:1}),h("div",l$e,"Dr. "+K(i.value.doctorName||"Unknown"),1),h("div",u$e,"Date: "+K(b(i.value.consultationDate)),1)])]),_:1}),l(ae,{cols:"4"},{default:u(()=>[h("div",c$e,[l(_e,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...te[14]||(te[14]=[O("Bill Information",-1)])]),_:1}),h("div",d$e,K(i.value.identifier),1),h("div",A$e,"Date: "+K(b(i.value.billDate)),1),l(Re,{color:Z(i.value.status),size:"small",variant:"flat",class:"mt-1"},{default:u(()=>[O(K(i.value.status),1)]),_:1},8,["color"])])]),_:1})]),_:1})]),_:1})]),_:1}),l(Ee,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(be,{class:"pb-2"},{default:u(()=>[te[17]||(te[17]=h("div",{class:"text-subtitle-1 mb-3"},"Bill Items",-1)),l(Ce,{density:"compact",class:"mb-3"},{default:u(()=>[te[16]||(te[16]=h("thead",null,[h("tr",null,[h("th",{class:"text-left",style:{width:"60px"}},"Sr. No"),h("th",{class:"text-left",style:{width:"200px"}},"Item"),h("th",{class:"text-left",style:{width:"100px"}},"HSN Code"),h("th",{class:"text-left",style:{width:"150px"}},"Batch Details"),h("th",{class:"text-left",style:{width:"120px"}},"Packaging Details"),h("th",{class:"text-right",style:{width:"100px"}},"MRP (Pack)"),h("th",{class:"text-right",style:{width:"100px"}},"Discount %"),h("th",{class:"text-right",style:{width:"120px"}},"Taxable Value/Unit"),h("th",{class:"text-right",style:{width:"100px"}},"GST %"),h("th",{class:"text-right",style:{width:"120px"}},"Final Value/Unit"),h("th",{class:"text-right",style:{width:"100px"}},"Qty"),h("th",{class:"text-right",style:{width:"120px"}},"Total ()")])],-1)),h("tbody",null,[(R(!0),Ae(Ke,null,Gt(i.value.items,(rt,ut)=>(R(),Ae("tr",{key:ut},[h("td",null,K(ut+1),1),h("td",null,[h("div",f$e,K(rt.medicineName),1),rt.marketer?(R(),Ae("div",m$e,K(rt.marketer),1)):ye("",!0)]),h("td",null,[h("div",v$e,K(rt.hsnCode||"N/A"),1)]),h("td",null,[h("div",h$e,K(rt.batchNumber||"N/A"),1),h("div",{class:ct(["text-caption text-medium-emphasis",le(rt.expiryDate)?"text-error":""])},[rt.expiryDate?(R(),Ae(Ke,{key:0},[O(" Exp: "+K(b(rt.expiryDate))+" ",1),le(rt.expiryDate)?(R(),ve(Re,{key:0,color:"error",size:"x-small",variant:"tonal",class:"ml-1"},{default:u(()=>[...te[15]||(te[15]=[O(" Expired ",-1)])]),_:1})):ye("",!0)],64)):(R(),Ae("span",p$e,"Exp: N/A"))],2)]),h("td",null,[h("div",g$e,K(rt.packType||"N/A"),1),h("div",y$e,K(rt.unitsPerPack||1)+" units/pack",1)]),h("td",_$e,K(T(rt.mrp)),1),h("td",w$e,K(rt.discountPercentage)+"%",1),h("td",b$e,K(T(rt.unitPrice||D(rt))),1),h("td",x$e,K(rt.gstPercentage)+"%",1),h("td",C$e,K(T(rt.totalAmount&&rt.quantityUnits?rt.totalAmount/rt.quantityUnits:k(rt))),1),h("td",S$e,K(rt.quantityUnits),1),h("td",E$e,K(T(rt.totalAmount||S(rt,ut))),1)]))),128))])]),_:1})]),_:1})]),_:1}),l(Ee,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(be,{class:"pb-2"},{default:u(()=>[te[27]||(te[27]=h("div",{class:"text-subtitle-1 mb-3"},"Bill Summary",-1)),l(Be,{class:"mb-3"}),l(oe,{"no-gutters":""},{default:u(()=>[l(ae,{cols:"6"},{default:u(()=>[te[18]||(te[18]=h("div",{class:"text-body-2 mb-1"},"Total MRP:",-1)),te[19]||(te[19]=h("div",{class:"text-body-2 mb-1"},"Total Discount:",-1)),te[20]||(te[20]=h("div",{class:"text-body-2 mb-1"},"Total GST:",-1)),te[21]||(te[21]=h("div",{class:"text-body-2 mb-1 pl-4",style:{"font-size":"0.875rem"}},"CGST:",-1)),te[22]||(te[22]=h("div",{class:"text-body-2 mb-1 pl-4",style:{"font-size":"0.875rem"}},"SGST:",-1)),te[23]||(te[23]=h("div",{class:"text-body-2 mb-1 font-weight-bold"},"Subtotal with GST:",-1)),i.value.additionalDiscountAmount>0?(R(),Ae("div",B$e,"Additional Discount:")):ye("",!0),te[24]||(te[24]=h("div",{class:"text-body-2 mb-1"},"Net Amount:",-1)),te[25]||(te[25]=h("div",{class:"text-body-2 mb-1"},"Round Off:",-1)),te[26]||(te[26]=h("div",{class:"text-subtitle-1 font-weight-bold mt-2"},"Final Amount:",-1))]),_:1}),l(ae,{cols:"6",class:"text-right"},{default:u(()=>[h("div",k$e,K(T(E.value)),1),h("div",T$e,"-"+K(T(C.value)),1),h("div",I$e,K(T(U.value)),1),h("div",F$e,K(T(F.value)),1),h("div",P$e,K(T(L.value)),1),h("div",D$e,K(T(H.value)),1),i.value.additionalDiscountAmount>0?(R(),Ae("div",U$e,"-"+K(T(i.value.additionalDiscountAmount)),1)):ye("",!0),h("div",R$e,K(T(ue.value)),1),h("div",N$e,K(ie.value>0?"+":"")+K(T(ie.value)),1),h("div",V$e,K(T(Q.value)),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(Ee,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(be,{class:"pb-2"},{default:u(()=>[te[36]||(te[36]=h("div",{class:"text-subtitle-1 mb-3"},"Payment Information",-1)),l(oe,{"no-gutters":"",class:"mb-3"},{default:u(()=>[l(ae,{cols:"4"},{default:u(()=>[te[28]||(te[28]=h("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Total Amount",-1)),h("div",L$e,K(T(Q.value)),1)]),_:1}),l(ae,{cols:"4"},{default:u(()=>[te[29]||(te[29]=h("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Paid Amount",-1)),h("div",M$e,K(T(Qe(g))),1)]),_:1}),l(ae,{cols:"4"},{default:u(()=>[te[30]||(te[30]=h("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Balance Due",-1)),h("div",{class:ct(["text-h6",X.value>0?"text-error":"text-success"])},K(T(X.value)),3)]),_:1})]),_:1}),Qe(p)?(R(),Ae("div",O$e,[l(de,{indeterminate:"",size:"32",color:"primary"}),te[31]||(te[31]=h("div",{class:"text-body-2 mt-2"},"Loading payments...",-1))])):Qe(v)&&Qe(v).length>0?(R(),Ae(Ke,{key:1},[l(Be,{class:"mb-3"}),te[33]||(te[33]=h("div",{class:"text-subtitle-2 mb-2"},"Payment History",-1)),l(Ce,{density:"compact"},{default:u(()=>[te[32]||(te[32]=h("thead",null,[h("tr",null,[h("th",{class:"text-left"},"Date"),h("th",{class:"text-left"},"Mode"),h("th",{class:"text-right"},"Amount"),h("th",{class:"text-right"},"Created")])],-1)),h("tbody",null,[(R(!0),Ae(Ke,null,Gt(Qe(v),rt=>(R(),Ae("tr",{key:rt.id},[h("td",H$e,K(b(rt.paymentDate)),1),h("td",$$e,K(rt.mode),1),h("td",Q$e,K(T(rt.amount)),1),h("td",G$e,K(x(rt.createdAt)),1)]))),128))])]),_:1})],64)):(R(),Ae(Ke,{key:2},[l(Be,{class:"mb-3"}),h("div",z$e,[l(Y,{size:"48",color:"outline",class:"mb-2"},{default:u(()=>[...te[34]||(te[34]=[O("mdi-currency-inr",-1)])]),_:1}),te[35]||(te[35]=h("div",{class:"text-body-2 text-medium-emphasis"},"No payments recorded",-1))])],64))]),_:1})]),_:1}),l(Ee,{flat:"",color:"surfaceContainerHigh",class:"card-enhanced"},{default:u(()=>[l(be,{class:"d-flex justify-center pb-2 gap-2"},{default:u(()=>[i.value.status==="Draft"?(R(),ve(W,{key:0,color:"primary",onClick:re},{default:u(()=>[...te[37]||(te[37]=[O(" Edit Bill ",-1)])]),_:1})):ye("",!0)]),_:1})]),_:1})]),_:1})):ye("",!0)]),_:1}),l(Oe,{value:"share",class:"h-100"},{default:u(()=>[l(oe,{"no-gutters":"",class:"h-100"},{default:u(()=>[l(ae,{cols:"12"},{default:u(()=>[G.value&&c.value?(R(),ve(ph,{key:0,"content-type":"pharmacy-bill",data:G.value,patient:c.value,onPdfGenerated:J},null,8,["data","patient"])):(R(),Ae("div",K$e,[h("div",W$e,[l(de,{indeterminate:"",color:"primary",size:"64"}),te[38]||(te[38]=h("div",{class:"mt-4 text-subtitle-1"},"Loading bill data...",-1))])]))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}}},q$e=qt(j$e,[["__scopeId","data-v-01d0853d"]]),Y$e={class:"text-medium-emphasis"},X$e={key:0},J$e={__name:"cancel-bill",props:{bill:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ca(),o=V(!1),i=()=>{a("close")},c=async()=>{try{o.value=!0;const A=await sEe(n.bill.id);if(A.error){const d=A.error.response?.data?.error||A.error.message||"Failed to cancel bill";s(d)}else r("Bill cancelled successfully. Inventory has been released."),i()}catch(A){console.error("Error cancelling bill:",A),s("An unexpected error occurred while cancelling the bill")}finally{o.value=!1}};return(A,d)=>{const f=I("v-card-title"),m=I("v-col"),v=I("v-icon"),p=I("v-btn"),g=I("v-row"),y=I("v-card"),w=I("v-card-text"),b=I("v-divider");return R(),ve(y,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(g,{"no-gutters":""},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(y,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(g,{"no-gutters":""},{default:u(()=>[l(m,{cols:"11"},{default:u(()=>[l(f,{class:"pa-0 pl-2"},{default:u(()=>[...d[0]||(d[0]=[O("Confirm Bill Cancellation",-1)])]),_:1})]),_:1}),l(m,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(p,{icon:"",size:"x-small",onClick:i},{default:u(()=>[l(v,null,{default:u(()=>[...d[1]||(d[1]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(g,{"no-gutters":""},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(y,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(g,{"no-gutters":""},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(w,{class:"text-left"},{default:u(()=>[d[4]||(d[4]=O(" Are you sure you want to cancel this bill? ",-1)),d[5]||(d[5]=h("span",{class:"text-warning font-weight-bold"}," This will release the reserved/sold inventory back to stock. ",-1)),d[6]||(d[6]=h("br",null,null,-1)),d[7]||(d[7]=h("br",null,null,-1)),h("span",Y$e,[d[3]||(d[3]=O(" Bill ID: ",-1)),h("strong",null,K(e.bill?.identifier||"N/A"),1),e.bill?.status?(R(),Ae("span",X$e,[d[2]||(d[2]=O("  Status: ",-1)),h("strong",null,K(e.bill.status),1)])):ye("",!0)])]),_:1})]),_:1})]),_:1}),l(b),l(g,{"no-gutters":""},{default:u(()=>[l(m,{cols:"2"}),l(m,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(p,{variant:"outlined",color:"error",onClick:c,loading:o.value,disabled:o.value},{default:u(()=>[...d[8]||(d[8]=[O(" Yes, Cancel Bill ",-1)])]),_:1},8,["loading","disabled"])]),_:1}),l(m,{cols:"2"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},Z$e={class:"w-100",style:{"white-space":"normal",overflow:"visible","text-overflow":"unset"}},e9e={class:"text-subtitle-2 mb-1",style:{"white-space":"normal","line-height":"1.3",overflow:"visible","text-overflow":"unset"}},t9e={class:"text-caption",style:{opacity:"0.7"}},n9e={class:"d-flex justify-center"},a9e={__name:"create-draft-bill",emits:["close","draft-bill-created"],setup(e,{emit:t}){const n=ra(),{showSuccess:a,showError:r}=ca(),s=t,o=ne(()=>n.getters["doctorModule/allDoctors"]||[]),i=V(null);dn(()=>{i.value=n.state.doctorModule.doctorId,o.value.length===0&&n.dispatch("doctorModule/fetchDoctors").then(()=>{!i.value&&o.value.length>0&&(i.value=n.state.doctorModule.doctorId||o.value[0]?.id)})});let c=null,A=null;const d=V(!1),f=V([]),m=V(""),v=V(null),p=V(!1),g=V(!1),y=k=>k?`${k.name||""} (${k.contactNumber||k.contact_number||""})`:"",w=(k,S=0,E=!1)=>{if(S===0)return"First time patient";if(E&&S>1)return k?`Has appointment today  Last visit: ${Tl(k)}`:"Has appointment today";if(E&&S===1)return"First visit today";if(k){const C=Rn(),U=k;if(U<C)return`Last visit: ${Tl(U)}`;if(U>C)return`Next visit: ${Tl(U)}`}return"No previous visits"},b=ne(()=>!m.value||m.value.length<1?"Start typing to search for patients":p.value?`No patients found matching "${m.value}"`:""),x=async k=>{if(!k||k.length<1){f.value=[],p.value=!1;return}A&&A.abort(),A=new AbortController,d.value=!0,p.value=!1;try{const S=await tT(k,{signal:A.signal});A.signal.aborted||(f.value=S.data,(!f.value||f.value.length===0)&&(p.value=!0))}catch(S){S.name!=="AbortError"&&(console.error("Error fetching patients:",S),p.value=!0)}finally{A?.signal.aborted||(d.value=!1)}};je(m,k=>{c&&clearTimeout(c),p.value=!1,c=setTimeout(()=>{x(k)},300)});const T=async()=>{if(!v.value||!v.value.id){r("Please select a patient");return}if(!i.value){r("Please select a doctor");return}try{g.value=!0;const k=Rn(),S=await Zk(v.value.id,i.value,k);if(S.error){r(S.error.response?.data?.error||"Failed to create consultation");return}if(!S.data||!S.data.consultation_id){r("Failed to get consultation ID");return}const E=S.data.consultation_id,C=await UH(E);if(C.error){r(C.error.response?.data?.error||"Failed to create draft bill");return}a("Draft bill created successfully"),s("draft-bill-created"),D()}catch(k){console.error("Error creating draft bill:",k),r("An unexpected error occurred")}finally{g.value=!1}},D=()=>{s("close")};return va(()=>{c&&(clearTimeout(c),c=null),A&&(A.abort(),A=null)}),(k,S)=>{const E=I("v-card-title"),C=I("v-col"),U=I("v-icon"),F=I("v-btn"),L=I("v-row"),H=I("v-card"),ue=I("v-list-item"),ie=I("v-select"),Q=I("v-list"),X=I("v-card-subtitle"),le=I("v-autocomplete"),Z=I("v-card-text"),re=I("v-divider"),q=I("v-empty-state");return R(),ve(H,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[l(L,{"no-gutters":""},{default:u(()=>[l(C,{cols:"12"},{default:u(()=>[l(H,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(L,{"no-gutters":""},{default:u(()=>[l(C,{cols:"11"},{default:u(()=>[l(E,{class:"pa-0 pl-2"},{default:u(()=>[...S[3]||(S[3]=[O("Create Draft Bill",-1)])]),_:1})]),_:1}),l(C,{cols:"1"},{default:u(()=>[l(F,{icon:"",size:"x-small",onClick:D,tabindex:"-1"},{default:u(()=>[l(U,null,{default:u(()=>[...S[4]||(S[4]=[h("img",{src:nu,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(L,{"no-gutters":""},{default:u(()=>[l(C,{cols:"12"},{default:u(()=>[l(H,{flat:"",class:"d-flex justify-center ma-2",color:"surfaceContainer"},{default:u(()=>[l(ie,{modelValue:i.value,"onUpdate:modelValue":S[0]||(S[0]=P=>i.value=P),items:o.value,"item-title":"doctorName","item-value":"id",density:"compact",variant:"outlined",placeholder:"Select Doctor",style:{width:"90%","max-width":"700px"},"prepend-inner-icon":"mdi-doctor","hide-details":"auto","menu-props":{maxHeight:"400px"}},{item:u(({props:P,item:G})=>[l(ue,Yl(Jl(P)),{title:u(()=>[O(K(G.raw.doctorName),1)]),subtitle:u(()=>[O(K(G.raw.doctorSpecialization),1)]),_:2},1040)]),_:1},8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),l(L,{"no-gutters":""},{default:u(()=>[l(C,{cols:"12"},{default:u(()=>[l(H,{flat:"",class:"d-flex justify-center ma-2",color:"surfaceContainer"},{default:u(()=>[l(le,{ref:"searchRef",density:"compact",placeholder:"Search by name or phone",style:{width:"90%","max-width":"700px"},theme:"light",variant:"solo",rounded:"l",items:f.value,search:m.value,"onUpdate:search":S[1]||(S[1]=P=>m.value=P),loading:d.value,"item-title":y,"item-value":"id","return-object":"",modelValue:v.value,"onUpdate:modelValue":S[2]||(S[2]=P=>v.value=P),chips:"",clearable:"","prepend-inner-icon":"mdi-magnify","no-data-text":b.value,"menu-props":{maxHeight:"400px",closeOnContentClick:!1}},{item:u(({props:P,item:G,index:J})=>[l(Q,{density:"compact",class:"pa-0 py-1"},{default:u(()=>[l(ue,Pe(P,{class:"py-0 my-0",style:{"min-height":"60px"}}),{default:u(()=>[h("div",Z$e,[h("div",e9e," ID: "+K(G.raw.id)+"  "+K(G.raw.gender)+", "+K(G.raw.age)+" yrs  Added On: "+K(Qe(Tl)(G.raw.createdAt))+K(G.raw.importID?`  Import ID: ${G.raw.importID}`:""),1),h("div",t9e,K(w(G.raw.lastAppointmentDate,G.raw.totalAppointments,G.raw.hasAppointmentToday)),1)])]),_:2},1040)]),_:2},1024)]),"no-data":u(()=>[l(Q,{density:"compact"},{default:u(()=>[l(ue,null,{default:u(()=>[l(X,null,{default:u(()=>[O(K(b.value),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["items","search","loading","modelValue","no-data-text"])]),_:1})]),_:1})]),_:1}),l(L,{"no-gutters":""},{default:u(()=>[l(C,{cols:"12",class:"scroll-element"},{default:u(()=>[l(H,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[v.value&&v.value.id?(R(),Ae(Ke,{key:0},[l(H,{flat:"",class:"text-left",variant:"text"},{default:u(()=>[l(Z,{class:"ma-0 pa-0 pl-4 mb-1"},{default:u(()=>[l(L,{"no-gutters":""},{default:u(()=>[l(C,{cols:"6"},{default:u(()=>[O(K(`Name: ${v.value.name}`),1)]),_:1}),l(C,{cols:"6"},{default:u(()=>[O(K(`Gender: ${v.value.gender}`),1)]),_:1})]),_:1}),l(L,{"no-gutters":""},{default:u(()=>[l(C,{cols:"6"},{default:u(()=>[O(K(`Contact: ${v.value.contactNumber||v.value.contact_number}`),1)]),_:1}),l(C,{cols:"6"},{default:u(()=>[O(K(v.value.age!==null?`Age: ${v.value.age} yrs`:""),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(H,{flat:"",class:"text-left",variant:"text"},{default:u(()=>[l(L,{"no-gutters":""},{default:u(()=>[l(C,{cols:"12"},{default:u(()=>[l(re,{class:"mb-2"}),h("div",n9e,[l(F,{variant:"outlined",onClick:T,disabled:!v.value||g.value,loading:g.value},{default:u(()=>[...S[5]||(S[5]=[O(" Create Draft Bill ",-1)])]),_:1},8,["disabled","loading"])])]),_:1})]),_:1})]),_:1})],64)):(R(),ve(q,{key:1,image:Qe($M)},{title:u(()=>[...S[6]||(S[6]=[h("div",{class:"text-subtitle-2 mt-8"}," Search for a patient above to create a draft bill ",-1)])]),text:u(()=>[...S[7]||(S[7]=[h("div",{class:"text-caption"},null,-1)])]),_:1},8,["image"]))]),_:1})]),_:1})]),_:1})]),_:1})}}},r9e=qt(a9e,[["__scopeId","data-v-b2a2ca6f"]]),s9e={class:"scrollable-content"},o9e={class:"scrollable-content"},i9e={class:"text-center"},l9e={class:"text-center"},u9e={class:"text-body-2 text-medium-emphasis mb-4"},c9e={class:"text-center"},d9e={class:"text-subtitle-2 mt-8 text-center"},A9e={key:0},f9e={key:1},m9e={class:"text-caption text-center"},v9e={key:0},h9e={key:1},p9e={class:"text-body-2 text-medium-emphasis"},g9e={class:"font-weight-bold",style:{color:"black"}},y9e={key:0,class:"text-body-2 mb-1"},_9e={class:"font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},w9e={key:0,class:"text-medium-emphasis ml-2"},b9e={key:1,class:"text-body-2 text-medium-emphasis mb-1"},x9e={key:2,class:"text-body-2 font-weight-medium mt-2"},C9e={__name:"pharmacy-queue",setup(e){const{showError:t}=ca(),n=V(0),a=V([]),r=V(""),s=V(""),o=V(null),i=V(null),c=V(!1),A=V(null),d=V(!1),f=V(!1),m=V(!1),v=V(null),p=V("edit"),g=V(!1),y=V(null),w=V(!1);ne(()=>Rn());const b=ne(()=>{if(!a.value||a.value.length===0)return[];const J=r.value?.trim();if(!J)return a.value;if(/^\d+$/.test(J))return a.value.filter(te=>te?.patientContactNumber?.includes(J)??!1);{const te=J.toLowerCase();return a.value.filter(Y=>Y?.patientName?.toLowerCase().includes(te)??!1)}}),x=J=>({Draft:"rgb(var(--v-theme-warning))",Finalized:"rgb(var(--v-theme-success))",Cancelled:"rgb(var(--v-theme-error))",Refund:"rgb(var(--v-theme-info))",Series:"rgb(var(--v-theme-secondary))"})[J]||"rgb(var(--v-theme-on-surface))",T=J=>{if(!J)return"";try{const M=new Date(J*1e3),te=_o(M,"d MMM"),Y=_o(M,"EEE");return`${te}, ${Y}`}catch(M){return console.error("Error formatting created day:",M),""}},D=J=>{if(!J)return"";try{const M=new Date(J*1e3),te=M.getHours(),Y=M.getMinutes(),W=te%12||12,ee=te>=12?"PM":"AM";return`${W}.${Y.toString().padStart(2,"0")}${ee}`}catch(M){return console.error("Error formatting created time:",M),""}},k=J=>J==null?"0.00":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(J),S=async()=>{if(!c.value)try{c.value=!0,A.value=null;const{data:J,error:M}=await nEe(s.value||null,o.value||null);M?(A.value=M.response?.data?.error||M.message||"Failed to fetch pharmacy bills",a.value=[],t("Error fetching pharmacy bills")):(a.value=J||[],d.value=!0)}catch(J){console.error("Error in fetchBills:",J),A.value=J.message||"An unexpected error occurred",a.value=[],t("Error fetching pharmacy bills")}finally{c.value=!1}},E=J=>{s.value=J.billDate||"",o.value=J.status||null},C=()=>{S()},U=()=>{s.value="",o.value=null,r.value="",a.value=[],d.value=!1,A.value=null},F=()=>{S()},L=J=>{v.value=J,f.value=!0},H=J=>{v.value=J,p.value="edit",m.value=!0},ue=J=>{v.value=J,p.value="return",m.value=!0},ie=J=>{J?.status!=="Cancelled"&&(y.value=J,g.value=!0)},Q=()=>{g.value=!1,y.value=null,S()},X=()=>{m.value=!1,v.value=null,p.value="edit"},le=()=>{f.value=!1,v.value=null},Z=()=>{f.value=!1,m.value=!0},re=async J=>{m.value=!1,p.value="edit",await _n(),J?(v.value=J,f.value=!0):v.value=null,S()},q=()=>{w.value=!0},P=()=>{w.value=!1},G=()=>{S()};return dn(()=>{s.value=Rn(),S()}),(J,M)=>{const te=I("v-alert"),Y=I("v-tab"),W=I("v-tabs"),ee=I("v-card"),ae=I("v-col"),oe=I("v-row"),j=I("v-progress-circular"),ce=I("v-icon"),de=I("v-btn"),_e=I("v-text-field"),Re=I("v-card-text"),be=I("v-empty-state"),Ee=I("v-card-title"),Ce=I("v-tooltip"),Be=I("v-divider"),Te=I("v-lazy"),Oe=I("v-window-item"),Me=I("v-window"),rt=I("v-main"),ut=I("v-dialog");return R(),Ae(Ke,null,[l(rt,null,{default:u(()=>[i.value?(R(),ve(te,{key:0,type:"error",dismissible:"","onClick:close":M[0]||(M[0]=Ie=>i.value=null),class:"ma-3"},{default:u(()=>[O(K(i.value),1)]),_:1})):ye("",!0),l(oe,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[l(ae,{cols:"12"},{default:u(()=>[l(ee,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center"},{default:u(()=>[l(W,{modelValue:n.value,"onUpdate:modelValue":M[1]||(M[1]=Ie=>n.value=Ie),color:"primary","align-tabs":"start",class:"w-100"},{default:u(()=>[l(Y,{value:0},{default:u(()=>[...M[9]||(M[9]=[O("Queue",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(Me,{modelValue:n.value,"onUpdate:modelValue":M[4]||(M[4]=Ie=>n.value=Ie),class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[l(Oe,{value:0,style:{height:"100%"}},{default:u(()=>[l(oe,{"aria-label":"main row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[l(ae,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[h("div",s9e,[l(ZMe,{"bill-date":s.value,status:o.value,onFilterChange:E,onSearch:C,onClear:U},null,8,["bill-date","status"])])]),_:1}),l(ae,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[h("div",o9e,[l(ee,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[c.value?(R(),ve(oe,{key:0,"no-gutters":""},{default:u(()=>[l(ae,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[h("div",i9e,[l(j,{indeterminate:"",color:"primary",size:"64"}),M[10]||(M[10]=h("div",{class:"mt-4 text-subtitle-1"},"Loading pharmacy bills...",-1))])]),_:1})]),_:1})):A.value?(R(),ve(oe,{key:1,"no-gutters":""},{default:u(()=>[l(ae,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[h("div",l9e,[l(ce,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...M[11]||(M[11]=[O("mdi-alert-circle",-1)])]),_:1}),M[13]||(M[13]=h("div",{class:"text-h6 mb-2"},"Search Failed",-1)),h("div",u9e,K(A.value),1),l(de,{color:"primary",onClick:F,"prepend-icon":"mdi-refresh"},{default:u(()=>[...M[12]||(M[12]=[O(" Try Again ",-1)])]),_:1})])]),_:1})]),_:1})):d.value?(R(),Ae(Ke,{key:3},[l(ee,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(Re,{class:"pt-2 pb-0 d-flex align-center"},{default:u(()=>[l(ae,{cols:"4",class:"pa-0"},{default:u(()=>[l(_e,{modelValue:r.value,"onUpdate:modelValue":M[2]||(M[2]=Ie=>r.value=Ie),density:"compact",variant:"outlined",clearable:"","hide-details":"auto","prepend-inner-icon":"mdi-account-search",placeholder:"Search by name or number",class:"patient-search-input"},null,8,["modelValue"])]),_:1}),l(ae,{cols:"4",class:"pa-0 text-center"},{default:u(()=>[h("strong",null,K(b.value.length),1),O(" result"+K(b.value.length!==1?"s":"")+" found ",1)]),_:1}),l(ae,{cols:"4",class:"pa-0 text-right"},{default:u(()=>[l(En,{permission:"pharmacy.queue.bill"},{default:u(()=>[l(de,{color:"primary",variant:"outlined",onClick:q,"prepend-icon":"mdi-plus",size:"small"},{default:u(()=>[...M[17]||(M[17]=[O(" Create Draft Bill ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),b.value&&b.value.length===0?(R(),ve(be,{key:0,image:Qe(Gv),class:"d-flex justify-center"},{title:u(()=>[h("div",d9e,[r.value?(R(),Ae("span",A9e,"No bills match your search")):(R(),Ae("span",f9e,"No Pharmacy Bills Found"))])]),text:u(()=>[h("div",m9e,[r.value?(R(),Ae("span",v9e,"Try a different search term or clear the filter")):(R(),Ae("span",h9e,"Try adjusting your search criteria or clear filters to see all bills"))])]),actions:u(()=>[r.value?(R(),ve(de,{key:0,color:"primary",variant:"outlined",onClick:M[3]||(M[3]=Ie=>r.value=""),"prepend-icon":"mdi-close",class:"mr-2"},{default:u(()=>[...M[18]||(M[18]=[O(" Clear Search ",-1)])]),_:1})):ye("",!0),l(de,{color:"primary",variant:"outlined",onClick:U,"prepend-icon":"mdi-filter-remove"},{default:u(()=>[...M[19]||(M[19]=[O(" Clear All Filters ",-1)])]),_:1})]),_:1},8,["image"])):b.value&&b.value.length>0?(R(),ve(oe,{key:1,"no-gutters":""},{default:u(()=>[l(ae,{cols:"12",class:"scroll-element mt-2",style:{"padding-bottom":"20px"}},{default:u(()=>[(R(!0),Ae(Ke,null,Gt(b.value,Ie=>(R(),ve(Te,{key:Ie?.id||Math.random(),options:{threshold:.1,rootMargin:"50px"}},{default:u(()=>[Ie?(R(),ve(ee,{key:0,style:{textAlign:"left"},density:"compact",class:"mb-2 mx-2 card-enhanced card-status-default card-hover-base",rounded:"lg"},{default:u(()=>[l(oe,{"no-gutters":""},{default:u(()=>[l(ae,{cols:"8"},{default:u(()=>[l(Ee,{class:"pb-0 pt-2"},{default:u(()=>[h("div",p9e,[Ie?.identifier?(R(),Ae(Ke,{key:0},[h("span",g9e,"Bill ID: "+K(Ie.identifier),1),M[20]||(M[20]=O("  ",-1))],64)):ye("",!0),Ie?.createdAt?(R(),Ae(Ke,{key:1},[O(K(T(Ie.createdAt))+"  "+K(D(Ie.createdAt))+"  ",1)],64)):ye("",!0),h("span",{class:"font-weight-medium",style:Ut({color:x(Ie?.status)})},K(Ie?.status||"Unknown"),5)])]),_:2},1024),l(Re,{class:"pb-1 pt-1"},{default:u(()=>[Ie?.patientName?(R(),Ae("div",y9e,[l(ce,{size:"small",class:"mr-1"},{default:u(()=>[...M[21]||(M[21]=[O("mdi-account",-1)])]),_:1}),h("span",_9e,K(Ie.patientName),1),Ie?.patientContactNumber?(R(),Ae("span",w9e,"("+K(Ie.patientContactNumber)+")",1)):ye("",!0)])):ye("",!0),Ie?.doctorName?(R(),Ae("div",b9e,[l(ce,{size:"small",class:"mr-1"},{default:u(()=>[...M[22]||(M[22]=[O("mdi-doctor",-1)])]),_:1}),O(" Dr. "+K(Ie.doctorName),1)])):ye("",!0),Ie?.netAmount!==void 0?(R(),Ae("div",x9e,[l(ce,{size:"small",class:"mr-1"},{default:u(()=>[...M[23]||(M[23]=[O("mdi-currency-inr",-1)])]),_:1}),O(" Net Amount: "+K(k(Ie.netAmount)),1)])):ye("",!0)]),_:2},1024)]),_:2},1024),l(ae,{cols:"2",class:"d-flex justify-center align-center"},{default:u(()=>[l(oe,{"no-gutters":""},{default:u(()=>[l(ae,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[l(En,{feature:"billing"},{default:u(()=>[l(Ce,{text:"View Bill"},{activator:u(({props:Ue})=>[l(de,Pe({variant:"plain",color:"primary",size:"small"},{ref_for:!0},Ue,{onClick:vn(dt=>L(Ie.id),["stop"]),class:"btn-hover-base mb-2"}),{default:u(()=>[l(ce,{size:"18"},{default:u(()=>[...M[24]||(M[24]=[O("mdi-eye",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),l(Be,{class:"mx-4"}),l(ae,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[l(En,{permission:"billing.edit"},{default:u(()=>[l(Ce,{text:Ie?.status==="Finalized"?"Cannot edit finalized bills":Ie?.status==="Cancelled"?"Cannot edit cancelled bills":"Edit Bill"},{activator:u(({props:Ue})=>[l(de,Pe({variant:"plain",color:"secondary",size:"small"},{ref_for:!0},Ue,{disabled:Ie?.status==="Finalized"||Ie?.status==="Cancelled",onClick:vn(dt=>H(Ie.id),["stop"]),class:"btn-hover-base mt-1"}),{default:u(()=>[l(ce,{size:"18"},{default:u(()=>[...M[25]||(M[25]=[O("mdi-pencil",-1)])]),_:1})]),_:1},16,["disabled","onClick"])]),_:2},1032,["text"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),l(ae,{cols:"2",class:"d-flex justify-center align-center"},{default:u(()=>[l(oe,{"no-gutters":""},{default:u(()=>[l(ae,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[l(Ce,{text:Ie?.status==="Finalized"?"Return Bill":"Return only available for finalized bills"},{activator:u(({props:Ue})=>[l(de,Pe({variant:"plain",size:"small"},{ref_for:!0},Ue,{disabled:Ie?.status!=="Finalized",onClick:vn(dt=>ue(Ie.id),["stop"]),class:"btn-hover-base mb-2",style:{color:"orange"}}),{default:u(()=>[l(ce,{size:"18",color:"orange"},{default:u(()=>[...M[26]||(M[26]=[O("mdi-arrow-u-left-top",-1)])]),_:1})]),_:1},16,["disabled","onClick"])]),_:2},1032,["text"])]),_:2},1024),l(Be,{class:"mx-4"}),l(ae,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[l(En,{permission:"billing.delete"},{default:u(()=>[l(Ce,{text:Ie?.status==="Cancelled"?"Bill is already cancelled":"Cancel Bill"},{activator:u(({props:Ue})=>[l(de,Pe({variant:"plain",color:"error",size:"small"},{ref_for:!0},Ue,{disabled:Ie?.status==="Cancelled",onClick:vn(dt=>ie(Ie),["stop"]),class:"btn-hover-base mt-1"}),{default:u(()=>[l(ce,{size:"18"},{default:u(()=>[...M[27]||(M[27]=[O("mdi-close-circle",-1)])]),_:1})]),_:1},16,["disabled","onClick"])]),_:2},1032,["text"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):ye("",!0)]),_:2},1024))),128))]),_:1})]),_:1})):ye("",!0)],64)):(R(),ve(oe,{key:2,"no-gutters":""},{default:u(()=>[l(ae,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[h("div",c9e,[l(ce,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...M[14]||(M[14]=[O("mdi-pill",-1)])]),_:1}),M[15]||(M[15]=h("div",{class:"text-h6 mb-2"},"Search for Pharmacy Bills",-1)),M[16]||(M[16]=h("div",{class:"text-body-2 text-medium-emphasis"},"Use the filters on the left to find pharmacy bills",-1))])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(ut,{modelValue:m.value,"onUpdate:modelValue":M[5]||(M[5]=Ie=>m.value=Ie),persistent:"","max-width":"85%"},{default:u(()=>[v.value?(R(),ve(ZHe,{key:0,"bill-id":v.value,mode:p.value,onClose:X,onBillUpdated:re},null,8,["bill-id","mode"])):ye("",!0)]),_:1},8,["modelValue"]),l(ut,{modelValue:f.value,"onUpdate:modelValue":M[6]||(M[6]=Ie=>f.value=Ie),persistent:"","max-width":"70%"},{default:u(()=>[v.value?(R(),ve(q$e,{key:0,"bill-id":v.value,onClose:le,onEditBill:Z},null,8,["bill-id"])):ye("",!0)]),_:1},8,["modelValue"]),l(ut,{modelValue:g.value,"onUpdate:modelValue":M[7]||(M[7]=Ie=>g.value=Ie),persistent:"","max-width":"30%"},{default:u(()=>[y.value?(R(),ve(J$e,{key:0,bill:y.value,onClose:Q},null,8,["bill"])):ye("",!0)]),_:1},8,["modelValue"]),l(ut,{modelValue:w.value,"onUpdate:modelValue":M[8]||(M[8]=Ie=>w.value=Ie),persistent:"","max-width":"50%"},{default:u(()=>[l(r9e,{onClose:P,onDraftBillCreated:G})]),_:1},8,["modelValue"])],64)}}},S9e=qt(C9e,[["__scopeId","data-v-d633baf2"]]),E9e={class:"mb-4"},B9e={class:"d-flex align-center justify-space-between"},k9e={class:"flex-grow-1"},T9e={class:"text-subtitle-1 font-weight-medium"},I9e={key:0,class:"text-caption text-medium-emphasis mt-1"},F9e={key:1,class:"text-caption text-medium-emphasis"},P9e={key:2,class:"text-caption text-warning mt-1"},D9e={__name:"pharmacy-medicine-form",emits:["close","medicine-added"],setup(e,{emit:t}){const{showSuccess:n,showInfo:a}=ca(),r=t,s=V(null),o=V(!1),i=V(null),c=V(null),A=V(!1),d=async g=>{if(!g||g.length===0)return;const y=g[0];s.value=y,i.value=null,c.value=null,y.isPharmacy?c.value="This medicine is already marked as pharmacy medicine.":y.isLocal||(c.value="This is an external medicine. It will be created in your database and then marked as pharmacy medicine.")},f=()=>{A.value=!0},m=async g=>{A.value=!1,g&&g.id&&(s.value={...g,isLocal:!0,isPharmacy:!1},await v())},v=async()=>{if(!s.value){i.value="Please select a medicine first";return}if(s.value.isPharmacy){a("This medicine is already in pharmacy");return}try{o.value=!0,i.value=null;let g=s.value.id;if(!s.value.isLocal){const b=await bT({productName:s.value.productName,marketer:s.value.marketer||"",saltComposition:s.value.saltComposition||"",productForm:s.value.productForm||"",productId:s.value.productId||"",primaryUse:s.value.primaryUse||"",source:"A",isCreatedByUser:!1});if(b.error){i.value=b.error.response?.data?.error||"Failed to create medicine";return}if(!b.data||!b.data.id){i.value="Medicine was created but ID was not returned";return}g=b.data.id}const{data:y,error:w}=await AEe(g);if(w){i.value=w.response?.data?.error||"Failed to add medicine to pharmacy";return}n("Medicine added to pharmacy successfully"),r("medicine-added",y),p()}catch(g){console.error("Error adding medicine to pharmacy:",g),i.value="An unexpected error occurred"}finally{o.value=!1}},p=()=>{s.value=null,i.value=null,c.value=null,r("close")};return(g,y)=>{const w=I("v-icon"),b=I("v-btn"),x=I("v-card-title"),T=I("v-divider"),D=I("v-alert"),k=I("v-chip"),S=I("v-card"),E=I("v-card-text"),C=I("v-spacer"),U=I("v-card-actions"),F=I("v-dialog");return R(),Ae(Ke,null,[l(S,{rounded:"lg",color:"surfaceContainer",flat:""},{default:u(()=>[l(x,{class:"d-flex align-center justify-space-between"},{default:u(()=>[y[4]||(y[4]=h("span",null,"Add Medicine to Pharmacy",-1)),l(b,{onClick:p,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(w,{size:"18"},{default:u(()=>[...y[3]||(y[3]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(T),l(E,{class:"pt-4"},{default:u(()=>[i.value?(R(),ve(D,{key:0,type:"error",variant:"tonal",class:"mb-4",dismissible:"","onClick:close":y[0]||(y[0]=L=>i.value=null)},{default:u(()=>[O(K(i.value),1)]),_:1})):ye("",!0),c.value?(R(),ve(D,{key:1,type:"info",variant:"tonal",class:"mb-4"},{default:u(()=>[O(K(c.value),1)]),_:1})):ye("",!0),h("div",E9e,[y[5]||(y[5]=h("div",{class:"text-subtitle-2 mb-2"},"Search and select a medicine to add to pharmacy inventory:",-1)),l(FH,{onSearchedMedicines:d,onAddMedicine:f})]),s.value?(R(),ve(S,{key:2,variant:"outlined",class:"pa-3 mb-4",color:s.value.isPharmacy?"success":"primary"},{default:u(()=>[h("div",B9e,[h("div",k9e,[h("div",T9e,[O(K(s.value.productName)+" ",1),s.value.isPharmacy?(R(),ve(k,{key:0,size:"x-small",color:"success",variant:"flat",class:"ml-2"},{default:u(()=>[...y[6]||(y[6]=[O(" Already in Pharmacy ",-1)])]),_:1})):ye("",!0)]),s.value.saltComposition?(R(),Ae("div",I9e,K(s.value.saltComposition),1)):ye("",!0),s.value.marketer?(R(),Ae("div",F9e,K(s.value.marketer),1)):ye("",!0),s.value.isLocal?ye("",!0):(R(),Ae("div",P9e,[l(w,{size:"small"},{default:u(()=>[...y[7]||(y[7]=[O("mdi-information",-1)])]),_:1}),y[8]||(y[8]=O(" This medicine will be created in your database first ",-1))]))])])]),_:1},8,["color"])):ye("",!0)]),_:1}),l(T),l(U,{class:"pa-4"},{default:u(()=>[l(C),l(b,{onClick:p},{default:u(()=>[...y[9]||(y[9]=[O(" Cancel ",-1)])]),_:1}),l(b,{color:"primary",variant:"outlined",onClick:v,disabled:!s.value||o.value||s.value&&s.value.isPharmacy,loading:o.value},{default:u(()=>[O(K(s.value?.isPharmacy?"Already Added":"Add to Pharmacy"),1)]),_:1},8,["disabled","loading"])]),_:1})]),_:1}),l(F,{modelValue:A.value,"onUpdate:modelValue":y[2]||(y[2]=L=>A.value=L),persistent:"","max-width":"600px"},{default:u(()=>[l(CT,{onClose:y[1]||(y[1]=L=>A.value=!1),"onUpdate:medicinelist":m})]),_:1},8,["modelValue"])],64)}}},U9e=qt(D9e,[["__scopeId","data-v-4e957024"]]),R9e={key:0,class:"text-caption text-medium-emphasis"},N9e={key:1},V9e={class:"text-caption font-weight-medium"},L9e={key:0,class:"text-caption text-medium-emphasis"},M9e={key:2,class:"text-caption text-error"},O9e={class:"text-caption text-medium-emphasis"},H9e={class:"font-weight-medium"},$9e={class:"text-caption text-medium-emphasis"},Q9e={key:0,class:"mb-0.5"},G9e={key:1,class:"mb-0.5"},z9e={key:2},K9e={__name:"pharmacy-batch-inward-form",props:{medicineId:{type:Number,default:null},medicineInfo:{type:Object,default:null},purchaseInvoiceId:{type:Number,default:null}},emits:["close","batch-created"],setup(e,{emit:t}){const{showSuccess:n,showError:a}=ca(),r=e,s=t,o=V(null),i=V(!1),c=V(!1),A=V(!1),d=V(!1),f=V(null),m=V([]),v=V(""),p=V({medicineId:r.medicineId||null,batchNumber:"",expiryDate:"",packType:"",unitsPerPack:1,mrp:null,discountPercentage:0,saleQuantityPacks:0,freeQuantityPacks:0,cgstPercentage:0,sgstPercentage:0,inwardBillId:"",purchaseInvoiceId:r.purchaseInvoiceId||null,location:""}),g=V("0.00"),y=ne(()=>Number(g.value??0)||0),w=()=>{g.value=(Number(g.value??0)||0).toFixed(2)},b=ne(()=>{const q=Number(p.value.cgstPercentage??0)||0,P=Number(p.value.sgstPercentage??0)||0;return q+P}),x=ne(()=>{const q=y.value||0,P=Number(b.value??0)||0;return q*(1+P/100)}),T=ne(()=>(Number(x.value??0)||0).toFixed(2)),D=ne(()=>{const q=p.value.saleQuantityPacks||0,P=p.value.freeQuantityPacks||0;return q+P}),k=ne(()=>D.value*(p.value.unitsPerPack||1)),S=ne(()=>{const q=p.value.saleQuantityPacks||0,P=p.value.freeQuantityPacks||0,G=y.value||0,J=q+P;return J===0?null:G*q/J}),E=ne(()=>{const q=p.value.saleQuantityPacks||0,P=p.value.freeQuantityPacks||0,G=x.value||0,J=q+P;return J===0?null:G*q/J}),C=ne(()=>{const q=p.value.cgstPercentage||0,P=p.value.sgstPercentage||0;return q+P}),U=[q=>!!q||"Expiry date is required"],F=[q=>q!=null&&!isNaN(q)&&q>=0||"Sale quantity must be non-negative",q=>{const P=q!=null&&!isNaN(q)?q:0,G=p.value.freeQuantityPacks!==null&&p.value.freeQuantityPacks!==void 0&&!isNaN(p.value.freeQuantityPacks)?p.value.freeQuantityPacks:0;return P>0||G>0||"At least one of sale quantity or free quantity must be greater than 0"}],L=[q=>q!=null&&!isNaN(q)&&q>=0||"Free quantity must be non-negative",q=>{const P=p.value.saleQuantityPacks!==null&&p.value.saleQuantityPacks!==void 0&&!isNaN(p.value.saleQuantityPacks)?p.value.saleQuantityPacks:0,G=q!=null&&!isNaN(q)?q:0;return P>0||G>0||"At least one of sale quantity or free quantity must be greater than 0"}],H=[q=>{if(!q||q.trim()==="")return"Price to retailer (excl. GST) is required";const P=Number(q);return isNaN(P)?"Price to retailer (excl. GST) must be a valid number":P<0?"Price to retailer (excl. GST) must be non-negative":!0}],ue=()=>{o.value&&o.value.validate()},ie=()=>{o.value&&o.value.validate()},Q=async()=>{if(r.purchaseInvoiceId)try{const{data:q}=await Eg(r.purchaseInvoiceId);q&&(v.value=`${q.pharmacyPurchaseInvoiceIdentifier} (${X(q.pharmacyPurchaseInvoiceDate)})`)}catch(q){console.error("Error loading invoice info:",q)}else{d.value=!0;try{const{data:q}=await CEe();m.value=q||[]}catch(q){console.error("Error loading purchase invoices:",q)}finally{d.value=!1}}},X=q=>q?new Date(q*1e3).toLocaleDateString():"-",le=async()=>{if(!r.medicineId){f.value=null;return}if(r.medicineInfo){f.value={id:r.medicineInfo.id,productName:r.medicineInfo.productName,marketer:r.medicineInfo.marketer},p.value.medicineId=r.medicineInfo.id;return}try{A.value=!0;const{data:q,error:P}=await Lw();if(!P&&q){const G=q.find(J=>J.id===r.medicineId);G?(f.value={id:G.id,productName:G.productName,marketer:G.marketer},p.value.medicineId=G.id):(a("Medicine not found"),f.value=null)}else a("Failed to load medicine details"),f.value=null}catch(q){console.error("Error loading medicine details:",q),a("Error loading medicine details"),f.value=null}finally{A.value=!1}},Z=async()=>{if(!i.value){o.value?.validate();return}try{c.value=!0;const q=p.value.saleQuantityPacks||0,P=p.value.freeQuantityPacks||0;if(q===0&&P===0){a("At least one of sale quantity or free quantity must be greater than 0"),c.value=!1;return}const G=E.value;if(G!==null&&p.value.mrp<G){a("MRP must be greater than or equal to calculated cost"),c.value=!1;return}const J={medicineId:p.value.medicineId,batchNumber:p.value.batchNumber,expiryDate:p.value.expiryDate,packType:p.value.packType,unitsPerPack:parseInt(p.value.unitsPerPack||1),mrp:parseFloat(p.value.mrp),discountPercentage:parseFloat(p.value.discountPercentage||0),saleQuantityPacks:parseFloat(p.value.saleQuantityPacks||0),freeQuantityPacks:parseFloat(p.value.freeQuantityPacks||0),priceToRetailer:parseFloat(x.value||0),cgstPercentage:parseFloat(p.value.cgstPercentage||0),sgstPercentage:parseFloat(p.value.sgstPercentage||0),inwardBillId:p.value.inwardBillId||"",purchaseInvoiceId:p.value.purchaseInvoiceId||r.purchaseInvoiceId||null,location:p.value.location||""},{data:M,error:te}=await RH(J);te?a(te.response?.data?.error||"Failed to create batch inward"):(n("Batch inward created successfully"),s("batch-created"),re())}catch(q){console.error("Error saving batch inward:",q),a("An unexpected error occurred")}finally{c.value=!1}},re=()=>{s("close")};return je(()=>r.purchaseInvoiceId,q=>{q&&(p.value.purchaseInvoiceId=q,Q())},{immediate:!0}),dn(()=>{w(),r.medicineId?le():a("Medicine ID is required"),Q()}),(q,P)=>{const G=I("v-icon"),J=I("v-btn"),M=I("v-card-title"),te=I("v-divider"),Y=I("v-col"),W=I("v-text-field"),ee=I("v-select"),ae=I("v-autocomplete"),oe=I("v-row"),j=I("v-form"),ce=I("v-card-text"),de=I("v-spacer"),_e=I("v-card-actions"),Re=I("v-card");return R(),ve(Re,{rounded:"lg",color:"surfaceContainer",flat:""},{default:u(()=>[l(M,{class:"d-flex align-center justify-space-between"},{default:u(()=>[P[16]||(P[16]=h("span",null,"Add purchased inventory",-1)),l(J,{onClick:re,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(G,{size:"18"},{default:u(()=>[...P[15]||(P[15]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(te),l(ce,{class:"py-1"},{default:u(()=>[l(j,{ref_key:"form",ref:o,modelValue:i.value,"onUpdate:modelValue":P[14]||(P[14]=be=>i.value=be)},{default:u(()=>[l(oe,{dense:""},{default:u(()=>[l(Y,{cols:"12",class:"pb-1"},{default:u(()=>[A.value?(R(),Ae("div",R9e," Loading... ")):f.value?(R(),Ae("div",N9e,[h("div",V9e,K(f.value.productName||"Unknown Medicine"),1),f.value.marketer?(R(),Ae("div",L9e,K(f.value.marketer),1)):ye("",!0)])):(R(),Ae("div",M9e," Medicine not found "))]),_:1}),l(Y,{cols:"12",md:"6"},{default:u(()=>[l(W,{modelValue:p.value.batchNumber,"onUpdate:modelValue":P[0]||(P[0]=be=>p.value.batchNumber=be),label:"Batch Number *",variant:"outlined",density:"compact",rules:[be=>!!be||"Batch number is required"],"prepend-inner-icon":"mdi-barcode"},null,8,["modelValue","rules"])]),_:1}),l(Y,{cols:"12",md:"6"},{default:u(()=>[l(W,{modelValue:p.value.expiryDate,"onUpdate:modelValue":P[1]||(P[1]=be=>p.value.expiryDate=be),type:"date",label:"Expiry Date *",variant:"outlined",density:"compact",rules:U,"prepend-inner-icon":"mdi-calendar"},null,8,["modelValue"])]),_:1}),l(Y,{cols:"12",md:"6"},{default:u(()=>[l(ee,{modelValue:p.value.packType,"onUpdate:modelValue":P[2]||(P[2]=be=>p.value.packType=be),items:Qe(Vw),label:"Pack Type *",variant:"outlined",density:"compact",rules:[be=>!!be||"Pack type is required"],"prepend-inner-icon":"mdi-package-variant"},null,8,["modelValue","items","rules"])]),_:1}),l(Y,{cols:"12",md:"6"},{default:u(()=>[l(W,{modelValue:p.value.unitsPerPack,"onUpdate:modelValue":P[3]||(P[3]=be=>p.value.unitsPerPack=be),modelModifiers:{number:!0},label:"Units Per Pack *",variant:"outlined",density:"compact",type:"number",rules:[be=>be!=null&&!isNaN(be)&&be>0||"Units per pack must be greater than 0"],"prepend-inner-icon":"mdi-numeric"},null,8,["modelValue","rules"])]),_:1}),l(Y,{cols:"12",md:"6"},{default:u(()=>[l(W,{modelValue:p.value.mrp,"onUpdate:modelValue":P[4]||(P[4]=be=>p.value.mrp=be),modelModifiers:{number:!0},label:"MRP per Pack () *",variant:"outlined",density:"compact",type:"number",rules:[be=>be!=null&&!isNaN(be)&&be>=0||"MRP must be a positive number"],"prepend-inner-icon":"mdi-currency-inr"},null,8,["modelValue","rules"])]),_:1}),l(Y,{cols:"12",md:"6"},{default:u(()=>[l(W,{modelValue:p.value.discountPercentage,"onUpdate:modelValue":P[5]||(P[5]=be=>p.value.discountPercentage=be),modelModifiers:{number:!0},label:"Discount to Patients % *",variant:"outlined",density:"compact",type:"number",rules:[be=>be!=null&&!isNaN(be)&&be>=0&&be<=100||"Discount must be between 0-100%"],"prepend-inner-icon":"mdi-percent"},null,8,["modelValue","rules"])]),_:1}),l(Y,{cols:"12",class:"py-0"},{default:u(()=>[l(te)]),_:1}),l(Y,{cols:"12",md:"6"},{default:u(()=>[l(W,{modelValue:p.value.saleQuantityPacks,"onUpdate:modelValue":[P[6]||(P[6]=be=>p.value.saleQuantityPacks=be),ue],modelModifiers:{number:!0},label:"Sale Quantity (Packs) *",variant:"outlined",density:"compact",type:"number",rules:F,"prepend-inner-icon":"mdi-package-variant"},null,8,["modelValue"])]),_:1}),l(Y,{cols:"12",md:"6"},{default:u(()=>[l(W,{modelValue:p.value.freeQuantityPacks,"onUpdate:modelValue":[P[7]||(P[7]=be=>p.value.freeQuantityPacks=be),ie],modelModifiers:{number:!0},label:"Free Quantity (Packs) *",variant:"outlined",density:"compact",type:"number",rules:L,"prepend-inner-icon":"mdi-gift"},null,8,["modelValue"])]),_:1}),l(Y,{cols:"12",md:"6"},{default:u(()=>[l(W,{modelValue:p.value.cgstPercentage,"onUpdate:modelValue":P[8]||(P[8]=be=>p.value.cgstPercentage=be),modelModifiers:{number:!0},label:"CGST % *",variant:"outlined",density:"compact",type:"number",rules:[be=>be!=null&&!isNaN(be)&&be>=0&&be<=100||"CGST must be between 0-100%"],"prepend-inner-icon":"mdi-percent"},null,8,["modelValue","rules"])]),_:1}),l(Y,{cols:"12",md:"6"},{default:u(()=>[l(W,{modelValue:p.value.sgstPercentage,"onUpdate:modelValue":P[9]||(P[9]=be=>p.value.sgstPercentage=be),modelModifiers:{number:!0},label:"SGST % *",variant:"outlined",density:"compact",type:"number",rules:[be=>be!=null&&!isNaN(be)&&be>=0&&be<=100||"SGST must be between 0-100%"],"prepend-inner-icon":"mdi-percent"},null,8,["modelValue","rules"])]),_:1}),l(Y,{cols:"12",md:"6"},{default:u(()=>[l(W,{modelValue:g.value,"onUpdate:modelValue":P[10]||(P[10]=be=>g.value=be),label:"Price to Retailer (Excl. GST) per Pack () *",variant:"outlined",density:"compact",inputmode:"decimal",rules:H,"prepend-inner-icon":"mdi-currency-inr",hint:"User input (excludes GST)","persistent-hint":"",onBlur:w},null,8,["modelValue"])]),_:1}),l(Y,{cols:"12",md:"6"},{default:u(()=>[h("div",O9e,[h("div",H9e,"Price to Retailer (Incl. GST): "+K(T.value),1),P[17]||(P[17]=h("div",null,"Computed using CGST + SGST",-1))])]),_:1}),e.purchaseInvoiceId?ye("",!0):(R(),ve(Y,{key:0,cols:"12",md:"6"},{default:u(()=>[l(ae,{modelValue:p.value.purchaseInvoiceId,"onUpdate:modelValue":P[11]||(P[11]=be=>p.value.purchaseInvoiceId=be),items:m.value,"item-title":"displayText","item-value":"id",label:"Purchase Invoice (Optional)",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-file-document",loading:d.value,hint:"Link this batch to a purchase invoice","persistent-hint":"",clearable:""},null,8,["modelValue","items","loading"])]),_:1})),e.purchaseInvoiceId?(R(),ve(Y,{key:1,cols:"12",md:"6"},{default:u(()=>[l(W,{"model-value":v.value,label:"Purchase Invoice",variant:"outlined",density:"compact",readonly:"","prepend-inner-icon":"mdi-file-document"},null,8,["model-value"])]),_:1})):ye("",!0),l(Y,{cols:"12",md:"6"},{default:u(()=>[l(W,{modelValue:p.value.inwardBillId,"onUpdate:modelValue":P[12]||(P[12]=be=>p.value.inwardBillId=be),label:"Inward Bill ID",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-receipt",hint:"Optional reference to inward bill","persistent-hint":""},null,8,["modelValue"])]),_:1}),l(Y,{cols:"12",md:"6"},{default:u(()=>[l(W,{modelValue:p.value.location,"onUpdate:modelValue":P[13]||(P[13]=be=>p.value.location=be),label:"Location",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-map-marker",hint:"Physical storage location (e.g., Shelf A-3, Room 1)","persistent-hint":""},null,8,["modelValue"])]),_:1}),l(Y,{cols:"12",class:"pt-1"},{default:u(()=>[l(te,{class:"mb-1"}),h("div",$9e,[D.value>0?(R(),Ae("div",Q9e,[P[18]||(P[18]=h("strong",null,"Total Quantity:",-1)),O(" "+K(D.value)+" packs ("+K(k.value)+" units) ",1)])):ye("",!0),S.value!==null?(R(),Ae("div",G9e,[P[19]||(P[19]=h("strong",null,"Cost per Pack (Excl. GST):",-1)),O(" "+K(S.value.toFixed(2)),1)])):ye("",!0),C.value!==null?(R(),Ae("div",z9e,[P[20]||(P[20]=h("strong",null,"GST %:",-1)),O(" "+K(C.value.toFixed(2))+"% ",1)])):ye("",!0)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(te),l(_e,{class:"pa-3"},{default:u(()=>[l(de),l(J,{onClick:re},{default:u(()=>[...P[21]||(P[21]=[O(" Cancel ",-1)])]),_:1}),l(J,{color:"primary",onClick:Z,disabled:!i.value||c.value,loading:c.value,variant:"outlined"},{default:u(()=>[...P[22]||(P[22]=[O(" Add purchased inventory ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})}}},W9e=qt(K9e,[["__scopeId","data-v-df4ad396"]]),j9e={class:"text-body-2 font-weight-medium"},q9e={key:0,class:"text-caption text-medium-emphasis mt-0.5"},Y9e={class:"text-caption text-medium-emphasis"},X9e={class:"font-weight-medium"},J9e={class:"text-body-2 text-medium-emphasis"},Z9e={key:0,class:"mb-0.5"},eQe={key:1,class:"mb-0.5"},tQe={key:2},nQe={__name:"edit-batch-inward",props:{batchId:{type:Number,required:!0},batch:{type:Object,required:!0}},emits:["close","batch-updated"],setup(e,{emit:t}){const{showSuccess:n,showError:a}=ca(),r=e,s=t,o=V(null),i=V(!1),c=V(!1),A=V(null),d=V(null),f=P=>{if(!P)return"";try{const G=new Date(P*1e3);if(isNaN(G.getTime()))return"";const J=G.getFullYear(),M=String(G.getMonth()+1).padStart(2,"0"),te=String(G.getDate()).padStart(2,"0");return`${J}-${M}-${te}`}catch(G){return console.error("Error converting timestamp to date:",G),""}},m=r.batch.unitsPerPack||1,v=r.batch.saleQuantity||0,p=r.batch.freeQuantity||0,y=(r.batch.priceToRetailer||0)/100,w=ne(()=>{const P=Number(S.value.cgstPercentage??0)||0,G=Number(S.value.sgstPercentage??0)||0;return P+G}),b=V("0.00"),x=ne(()=>Number(b.value??0)||0),T=()=>{b.value=(Number(b.value??0)||0).toFixed(2)},D=ne(()=>{const P=x.value||0,G=Number(w.value??0)||0;return P*(1+G/100)}),k=ne(()=>(Number(D.value??0)||0).toFixed(2)),S=V({batchNumber:r.batch.batchNumber||"",expiryDate:r.batch.expiryDate?typeof r.batch.expiryDate=="number"?f(r.batch.expiryDate):typeof r.batch.expiryDate=="string"&&r.batch.expiryDate.includes("T")?r.batch.expiryDate.split("T")[0]:r.batch.expiryDate:"",packType:r.batch.packType||"",unitsPerPack:m,mrp:r.batch.mrp||null,discountPercentage:r.batch.discountPercentage||0,saleQuantityPacks:m>0?v/m:0,freeQuantityPacks:m>0?p/m:0,cgstPercentage:r.batch.cgstPercentage||0,sgstPercentage:r.batch.sgstPercentage||0,inwardBillId:r.batch.inwardBillId||"",location:r.batch.location||""}),E=()=>{const G=1+(Number(w.value??0)||0)/100;if(G<=0){b.value="0.00";return}b.value=((Number(y??0)||0)/G).toFixed(2)},C=ne(()=>{const P=S.value.saleQuantityPacks||0,G=S.value.freeQuantityPacks||0;return P+G}),U=ne(()=>C.value*(S.value.unitsPerPack||1)),F=ne(()=>{const P=S.value.saleQuantityPacks||0,G=S.value.freeQuantityPacks||0,J=Number(x.value??0)||0,M=P+G;return M===0?null:J*P/M}),L=ne(()=>{const P=S.value.saleQuantityPacks||0,G=S.value.freeQuantityPacks||0,J=D.value||0,M=P+G;return M===0?null:J*P/M}),H=ne(()=>{const P=S.value.cgstPercentage||0,G=S.value.sgstPercentage||0;return P+G}),ue=[P=>!!P||"Expiry date is required"],ie=[P=>P!=null&&P>=0||"Sale quantity must be non-negative",P=>{const G=P||0,J=S.value.freeQuantityPacks||0;return G>0||J>0||"At least one of sale quantity or free quantity must be greater than 0"}],Q=[P=>P!=null&&P>=0||"Free quantity must be non-negative",P=>{const G=S.value.saleQuantityPacks||0,J=P||0;return G>0||J>0||"At least one of sale quantity or free quantity must be greater than 0"}],X=async()=>{if(!i.value){o.value?.validate();return}try{c.value=!0;const P=S.value.saleQuantityPacks||0,G=S.value.freeQuantityPacks||0;if(P===0&&G===0){a("At least one of sale quantity or free quantity must be greater than 0"),c.value=!1;return}const J=L.value;if(J!==null&&S.value.mrp<J){a("MRP must be greater than or equal to calculated cost"),c.value=!1;return}const M={batchNumber:S.value.batchNumber,expiryDate:S.value.expiryDate,packType:S.value.packType,unitsPerPack:parseInt(S.value.unitsPerPack||1),mrp:parseFloat(S.value.mrp),discountPercentage:parseFloat(S.value.discountPercentage||0),saleQuantityPacks:parseFloat(S.value.saleQuantityPacks||0),freeQuantityPacks:parseFloat(S.value.freeQuantityPacks||0),priceToRetailer:parseFloat(D.value||0),cgstPercentage:parseFloat(S.value.cgstPercentage||0),sgstPercentage:parseFloat(S.value.sgstPercentage||0),inwardBillId:S.value.inwardBillId||"",location:S.value.location||""},{data:te,error:Y}=await iEe(r.batchId,M);Y?a(Y.response?.data?.error||"Failed to update batch inward"):(n("Batch inward updated successfully"),s("batch-updated"),q())}catch(P){console.error("Error updating batch inward:",P),a("An unexpected error occurred")}finally{c.value=!1}},le=async()=>{if(r.batch.purchaseInvoiceId)try{const{data:P}=await Eg(r.batch.purchaseInvoiceId);P&&(d.value={id:P.id,identifier:P.pharmacyPurchaseInvoiceIdentifier,date:P.pharmacyPurchaseInvoiceDate,displayText:`${P.pharmacyPurchaseInvoiceIdentifier} (${Z(P.pharmacyPurchaseInvoiceDate)})`})}catch(P){console.error("Error loading purchase invoice info:",P)}},Z=P=>P?new Date(P*1e3).toLocaleDateString():"-",re=()=>{r.batch.medicineName||r.batch.medicineMarketer?A.value={id:r.batch.medicineId,productName:r.batch.medicineName,marketer:r.batch.medicineMarketer}:Lw().then(({data:P,error:G})=>{if(!G&&P){for(const J of P)if(J.batches&&J.batches.find(te=>te.id===r.batchId)){A.value={id:J.id,productName:J.productName,marketer:J.marketer};break}}}).catch(P=>{console.error("Error loading medicine info:",P)})},q=()=>{s("close")};return dn(()=>{re(),le(),E()}),(P,G)=>{const J=I("v-icon"),M=I("v-btn"),te=I("v-card-title"),Y=I("v-divider"),W=I("v-col"),ee=I("v-text-field"),ae=I("v-select"),oe=I("v-row"),j=I("v-form"),ce=I("v-card-text"),de=I("v-spacer"),_e=I("v-card-actions"),Re=I("v-card");return R(),ve(Re,{rounded:"lg",color:"surfaceContainer",flat:""},{default:u(()=>[l(te,{class:"d-flex align-center justify-space-between"},{default:u(()=>[G[15]||(G[15]=h("span",null,"Edit purchased inventory",-1)),l(M,{onClick:q,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(J,{size:"18"},{default:u(()=>[...G[14]||(G[14]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(Y),l(ce,{class:"py-1"},{default:u(()=>[l(j,{ref_key:"form",ref:o,modelValue:i.value,"onUpdate:modelValue":G[13]||(G[13]=be=>i.value=be)},{default:u(()=>[l(oe,{dense:""},{default:u(()=>[A.value?(R(),ve(W,{key:0,cols:"12"},{default:u(()=>[h("div",j9e,K(A.value.productName||"Unknown Medicine"),1),A.value.marketer?(R(),Ae("div",q9e,K(A.value.marketer),1)):ye("",!0)]),_:1})):ye("",!0),l(W,{cols:"12",md:"6"},{default:u(()=>[l(ee,{modelValue:S.value.batchNumber,"onUpdate:modelValue":G[0]||(G[0]=be=>S.value.batchNumber=be),label:"Batch Number *",variant:"outlined",density:"compact",rules:[be=>!!be||"Batch number is required"],"prepend-inner-icon":"mdi-barcode"},null,8,["modelValue","rules"])]),_:1}),l(W,{cols:"12",md:"6"},{default:u(()=>[l(ee,{modelValue:S.value.expiryDate,"onUpdate:modelValue":G[1]||(G[1]=be=>S.value.expiryDate=be),type:"date",label:"Expiry Date *",variant:"outlined",density:"compact",rules:ue,"prepend-inner-icon":"mdi-calendar"},null,8,["modelValue"])]),_:1}),l(W,{cols:"12",md:"6"},{default:u(()=>[l(ae,{modelValue:S.value.packType,"onUpdate:modelValue":G[2]||(G[2]=be=>S.value.packType=be),items:Qe(Vw),label:"Pack Type *",variant:"outlined",density:"compact",rules:[be=>!!be||"Pack type is required"],"prepend-inner-icon":"mdi-package-variant"},null,8,["modelValue","items","rules"])]),_:1}),l(W,{cols:"12",md:"6"},{default:u(()=>[l(ee,{modelValue:S.value.unitsPerPack,"onUpdate:modelValue":G[3]||(G[3]=be=>S.value.unitsPerPack=be),modelModifiers:{number:!0},label:"Units Per Pack *",variant:"outlined",density:"compact",type:"number",rules:[be=>be!=null&&be>0||"Units per pack must be greater than 0"],"prepend-inner-icon":"mdi-numeric"},null,8,["modelValue","rules"])]),_:1}),l(W,{cols:"12",md:"6"},{default:u(()=>[l(ee,{modelValue:S.value.mrp,"onUpdate:modelValue":G[4]||(G[4]=be=>S.value.mrp=be),modelModifiers:{number:!0},label:"MRP per Pack () *",variant:"outlined",density:"compact",type:"number",rules:[be=>be!=null&&be>=0||"MRP must be a positive number"],"prepend-inner-icon":"mdi-currency-inr"},null,8,["modelValue","rules"])]),_:1}),l(W,{cols:"12",md:"6"},{default:u(()=>[l(ee,{modelValue:S.value.discountPercentage,"onUpdate:modelValue":G[5]||(G[5]=be=>S.value.discountPercentage=be),modelModifiers:{number:!0},label:"Discount to Patients % *",variant:"outlined",density:"compact",type:"number",rules:[be=>be!=null&&be>=0&&be<=100||"Discount must be between 0-100%"],"prepend-inner-icon":"mdi-percent"},null,8,["modelValue","rules"])]),_:1}),l(W,{cols:"12"},{default:u(()=>[l(Y,{class:"my-1"})]),_:1}),l(W,{cols:"12",md:"6"},{default:u(()=>[l(ee,{modelValue:S.value.saleQuantityPacks,"onUpdate:modelValue":G[6]||(G[6]=be=>S.value.saleQuantityPacks=be),modelModifiers:{number:!0},label:"Sale Quantity (Packs) *",variant:"outlined",density:"compact",type:"number",rules:ie,"prepend-inner-icon":"mdi-package-variant"},null,8,["modelValue"])]),_:1}),l(W,{cols:"12",md:"6"},{default:u(()=>[l(ee,{modelValue:S.value.freeQuantityPacks,"onUpdate:modelValue":G[7]||(G[7]=be=>S.value.freeQuantityPacks=be),modelModifiers:{number:!0},label:"Free Quantity (Packs) *",variant:"outlined",density:"compact",type:"number",rules:Q,"prepend-inner-icon":"mdi-gift"},null,8,["modelValue"])]),_:1}),l(W,{cols:"12",md:"6"},{default:u(()=>[l(ee,{modelValue:S.value.cgstPercentage,"onUpdate:modelValue":G[8]||(G[8]=be=>S.value.cgstPercentage=be),modelModifiers:{number:!0},label:"CGST % *",variant:"outlined",density:"compact",type:"number",rules:[be=>be!=null&&be>=0&&be<=100||"CGST must be between 0-100%"],"prepend-inner-icon":"mdi-percent"},null,8,["modelValue","rules"])]),_:1}),l(W,{cols:"12",md:"6"},{default:u(()=>[l(ee,{modelValue:S.value.sgstPercentage,"onUpdate:modelValue":G[9]||(G[9]=be=>S.value.sgstPercentage=be),modelModifiers:{number:!0},label:"SGST % *",variant:"outlined",density:"compact",type:"number",rules:[be=>be!=null&&be>=0&&be<=100||"SGST must be between 0-100%"],"prepend-inner-icon":"mdi-percent"},null,8,["modelValue","rules"])]),_:1}),l(W,{cols:"12",md:"6"},{default:u(()=>[l(ee,{modelValue:b.value,"onUpdate:modelValue":G[10]||(G[10]=be=>b.value=be),label:"Price to Retailer (Excl. GST) per Pack () *",variant:"outlined",density:"compact",inputmode:"decimal",rules:[be=>Number(be)>=0||"Price to retailer (excl. GST) must be non-negative"],"prepend-inner-icon":"mdi-currency-inr",hint:"User input (excludes GST)","persistent-hint":"",onBlur:T},null,8,["modelValue","rules"])]),_:1}),l(W,{cols:"12",md:"6"},{default:u(()=>[h("div",Y9e,[h("div",X9e,"Price to Retailer (Incl. GST): "+K(k.value),1),G[16]||(G[16]=h("div",null,"Computed using CGST + SGST",-1))])]),_:1}),d.value?(R(),ve(W,{key:1,cols:"12",md:"6"},{default:u(()=>[l(ee,{"model-value":d.value.displayText,label:"Purchase Invoice",variant:"outlined",density:"compact",readonly:"","prepend-inner-icon":"mdi-file-document",hint:"Invoice link cannot be changed","persistent-hint":""},null,8,["model-value"])]),_:1})):ye("",!0),l(W,{cols:"12",md:"6"},{default:u(()=>[l(ee,{modelValue:S.value.inwardBillId,"onUpdate:modelValue":G[11]||(G[11]=be=>S.value.inwardBillId=be),label:"Inward Bill ID",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-receipt",hint:"Optional reference to inward bill","persistent-hint":""},null,8,["modelValue"])]),_:1}),l(W,{cols:"12",md:"6"},{default:u(()=>[l(ee,{modelValue:S.value.location,"onUpdate:modelValue":G[12]||(G[12]=be=>S.value.location=be),label:"Location",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-map-marker",hint:"Physical storage location (e.g., Shelf A-3, Room 1)","persistent-hint":""},null,8,["modelValue"])]),_:1}),l(W,{cols:"12"},{default:u(()=>[l(Y,{class:"my-1"}),h("div",J9e,[C.value>0?(R(),Ae("div",Z9e,[G[17]||(G[17]=h("strong",null,"Total Quantity:",-1)),O(" "+K(C.value)+" packs ("+K(U.value)+" units) ",1)])):ye("",!0),F.value!==null?(R(),Ae("div",eQe,[G[18]||(G[18]=h("strong",null,"Calculated Cost per Pack (Excl. GST):",-1)),O(" "+K(F.value.toFixed(2)),1)])):ye("",!0),H.value!==null?(R(),Ae("div",tQe,[G[19]||(G[19]=h("strong",null,"Calculated GST %:",-1)),O(" "+K(H.value.toFixed(2))+"% ",1)])):ye("",!0)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(Y),l(_e,{class:"pa-3"},{default:u(()=>[l(de),l(M,{onClick:q},{default:u(()=>[...G[20]||(G[20]=[O(" Cancel ",-1)])]),_:1}),l(M,{color:"primary",variant:"outlined",onClick:X,disabled:!i.value||c.value,loading:c.value},{default:u(()=>[...G[21]||(G[21]=[O(" Update purchased inventory ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})}}},aQe=qt(nQe,[["__scopeId","data-v-b0e37027"]]),rQe={class:"text-body-2"},sQe={key:2,class:"text-caption text-medium-emphasis mt-1 ml-4"},oQe={key:3,class:"text-caption text-medium-emphasis mt-1 ml-4"},iQe={__name:"edit-inventory",props:{batchId:{type:Number,required:!0},batch:{type:Object,required:!0}},emits:["close","inventory-added"],setup(e,{emit:t}){const{showSuccess:n,showError:a}=ca(),r=e,s=t,o=V(null),i=V(!1),c=V(!1),A=V(!1),d=V(null),f=V(null),m=V("increase"),v=V(""),p=V("packs"),g=V(null),y=V(null),w=ne(()=>p.value==="packs"&&g.value&&f.value?.unitsPerPack>0?g.value*f.value.unitsPerPack:y.value||0),b=ne(()=>p.value==="units"&&y.value&&f.value?.unitsPerPack>0?(y.value/f.value.unitsPerPack).toFixed(2):g.value||0),x=()=>{p.value==="packs"?(g.value&&f.value?.unitsPerPack>0&&(y.value=g.value*f.value.unitsPerPack),p.value="units"):(y.value&&f.value?.unitsPerPack>0&&(g.value=y.value/f.value.unitsPerPack),p.value="packs")},T=ne(()=>[E=>E!=null&&E>0||"Quantity must be greater than 0",E=>{if(m.value==="decrease"&&f.value){const C=f.value.availableUnits||0;let U=0;return p.value==="packs"&&E&&f.value?.unitsPerPack>0?U=E*f.value.unitsPerPack:p.value==="units"&&E&&(U=E),U<=C||`Cannot decrease more than current stock (${C} units)`}return!0}]),D=async()=>{try{A.value=!0,d.value=null,r.batch?f.value={batchNumber:r.batch.batchNumber||"Unknown",medicineName:r.batch.medicineName||"Unknown",availableUnits:r.batch.availableUnits||0,medicineId:r.batch.medicineId,unitsPerPack:r.batch.unitsPerPack||1}:d.value="Batch information not available"}catch(E){console.error("Error loading batch info:",E),d.value=E.message||"Failed to load batch information"}finally{A.value=!1}},k=async()=>{if(!i.value){o.value?.validate();return}if(!m.value){a("Please select increase or decrease for stock correction");return}try{c.value=!0;let E=0;if(p.value==="packs"&&g.value&&f.value?.unitsPerPack>0)E=g.value*f.value.unitsPerPack;else if(p.value==="units"&&y.value)E=y.value;else{a("Please enter a valid quantity"),c.value=!1;return}const C="stock_correction";let U=E;m.value==="decrease"&&(U=-E);const{data:F,error:L}=await lEe(r.batchId,U,v.value,C);if(L)a(L.response?.data?.error||"Failed to adjust inventory");else{const H=m.value==="increase"?"increased":"decreased";n(`Inventory ${H} successfully`),s("inventory-added"),S()}}catch(E){console.error("Error adjusting inventory:",E),a("An unexpected error occurred")}finally{c.value=!1}},S=()=>{m.value="increase",g.value=null,y.value=null,p.value="packs",v.value="",s("close")};return dn(()=>{D()}),(E,C)=>{const U=I("v-icon"),F=I("v-btn"),L=I("v-card-title"),H=I("v-divider"),ue=I("v-progress-circular"),ie=I("v-col"),Q=I("v-row"),X=I("v-alert"),le=I("v-radio"),Z=I("v-radio-group"),re=I("v-text-field"),q=I("v-textarea"),P=I("v-form"),G=I("v-card-text"),J=I("v-spacer"),M=I("v-card-actions"),te=I("v-card");return R(),ve(te,{rounded:"lg",color:"surfaceContainer",flat:""},{default:u(()=>[l(L,{class:"d-flex align-center justify-space-between"},{default:u(()=>[C[6]||(C[6]=h("span",null,"Manage Inventory",-1)),l(F,{onClick:S,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(U,{size:"18"},{default:u(()=>[...C[5]||(C[5]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(H),l(G,{class:"pt-4"},{default:u(()=>[A.value?(R(),ve(Q,{key:0},{default:u(()=>[l(ie,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[l(ue,{indeterminate:"",color:"primary"})]),_:1})]),_:1})):f.value?(R(),Ae(Ke,{key:1},[l(X,{type:"info",variant:"tonal",class:"mb-4"},{default:u(()=>[h("div",rQe,[C[7]||(C[7]=h("strong",null,"Batch:",-1)),O(" "+K(f.value.batchNumber),1),C[8]||(C[8]=h("br",null,null,-1)),C[9]||(C[9]=h("strong",null,"Medicine:",-1)),O(" "+K(f.value.medicineName),1),C[10]||(C[10]=h("br",null,null,-1)),C[11]||(C[11]=h("strong",null,"Current Stock:",-1)),O(" "+K(f.value.availableUnits||0)+" units ",1)])]),_:1}),l(P,{ref_key:"form",ref:o,modelValue:i.value,"onUpdate:modelValue":C[4]||(C[4]=Y=>i.value=Y)},{default:u(()=>[l(Q,null,{default:u(()=>[l(ie,{cols:"12"},{default:u(()=>[l(Z,{modelValue:m.value,"onUpdate:modelValue":C[0]||(C[0]=Y=>m.value=Y),inline:"",rules:[Y=>!!Y||"Please select correction direction"]},{default:u(()=>[l(le,{label:"Increase Stock",value:"increase",color:"success"}),l(le,{label:"Decrease Stock",value:"decrease",color:"error"})]),_:1},8,["modelValue","rules"])]),_:1}),l(ie,{cols:"12"},{default:u(()=>[p.value==="packs"?(R(),ve(re,{key:0,modelValue:g.value,"onUpdate:modelValue":C[1]||(C[1]=Y=>g.value=Y),modelModifiers:{number:!0},label:"Quantity (Packs) *",variant:"outlined",density:"comfortable",type:"number",rules:T.value,"prepend-inner-icon":"mdi-package-variant",hint:"Enter quantity in packs","persistent-hint":""},{"append-inner":u(()=>[l(F,{icon:"",size:"small",variant:"text",onClick:x,title:"Switch to Units"},{default:u(()=>[l(U,{size:"small"},{default:u(()=>[...C[12]||(C[12]=[O("mdi-swap-horizontal",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","rules"])):(R(),ve(re,{key:1,modelValue:y.value,"onUpdate:modelValue":C[2]||(C[2]=Y=>y.value=Y),modelModifiers:{number:!0},label:"Quantity (Units) *",variant:"outlined",density:"comfortable",type:"number",rules:T.value,"prepend-inner-icon":"mdi-package-variant",hint:"Enter quantity in units","persistent-hint":""},{"append-inner":u(()=>[l(F,{icon:"",size:"small",variant:"text",onClick:x,title:"Switch to Packs"},{default:u(()=>[l(U,{size:"small"},{default:u(()=>[...C[13]||(C[13]=[O("mdi-swap-horizontal",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","rules"])),p.value==="packs"&&f.value?.unitsPerPack>0&&g.value?(R(),Ae("div",sQe," = "+K(w.value)+" units ("+K(f.value.unitsPerPack)+" units/pack) ",1)):p.value==="units"&&f.value?.unitsPerPack>0&&y.value?(R(),Ae("div",oQe," = "+K(b.value)+" packs ("+K(f.value.unitsPerPack)+" units/pack) ",1)):ye("",!0)]),_:1}),l(ie,{cols:"12"},{default:u(()=>[l(q,{modelValue:v.value,"onUpdate:modelValue":C[3]||(C[3]=Y=>v.value=Y),label:"Reason/Notes *",variant:"outlined",density:"comfortable",rules:[Y=>!!Y||"Reason is required"],rows:"3","prepend-inner-icon":"mdi-note-text"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)):d.value?(R(),Ae(Ke,{key:2},[l(X,{type:"error",class:"mb-4"},{default:u(()=>[O(K(d.value),1)]),_:1}),l(F,{color:"primary",onClick:D,"prepend-icon":"mdi-refresh"},{default:u(()=>[...C[14]||(C[14]=[O(" Retry ",-1)])]),_:1})],64)):ye("",!0)]),_:1}),l(H),l(M,{class:"pa-4"},{default:u(()=>[l(J),l(F,{variant:"outlined",onClick:S},{default:u(()=>[...C[15]||(C[15]=[O(" Cancel ",-1)])]),_:1}),l(F,{color:"primary",onClick:k,disabled:!i.value||c.value||!f.value,loading:c.value},{default:u(()=>[O(K(m.value==="increase"?"Increase Stock":"Decrease Stock"),1)]),_:1},8,["disabled","loading"])]),_:1})]),_:1})}}},lQe=qt(iQe,[["__scopeId","data-v-199072f7"]]),uQe={class:"text-medium-emphasis"},cQe={key:0},dQe={__name:"remove-medicine-from-pharmacy",props:{medicine:{type:Object,required:!0}},emits:["close","medicine-removed"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ca(),o=V(!1),i=()=>{a("close")},c=async()=>{try{o.value=!0;const A=await fEe(n.medicine.id);if(A.error){const d=A.error.response?.data?.error||A.error.message||"Failed to remove medicine from pharmacy";s(d)}else r("Medicine removed from pharmacy successfully"),a("medicine-removed"),i()}catch(A){console.error("Error removing medicine from pharmacy:",A),s("An unexpected error occurred while removing the medicine from pharmacy")}finally{o.value=!1}};return(A,d)=>{const f=I("v-card-title"),m=I("v-col"),v=I("v-icon"),p=I("v-btn"),g=I("v-row"),y=I("v-card"),w=I("v-card-text"),b=I("v-divider");return R(),ve(y,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(g,{"no-gutters":""},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(y,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(g,{"no-gutters":""},{default:u(()=>[l(m,{cols:"11"},{default:u(()=>[l(f,{class:"pa-0 pl-2"},{default:u(()=>[...d[0]||(d[0]=[O("Remove Medicine from Pharmacy",-1)])]),_:1})]),_:1}),l(m,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(p,{icon:"",size:"x-small",onClick:i},{default:u(()=>[l(v,null,{default:u(()=>[...d[1]||(d[1]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(g,{"no-gutters":""},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(y,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(g,{"no-gutters":""},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(w,{class:"text-left"},{default:u(()=>[d[4]||(d[4]=O(" Are you sure you want to remove this medicine from pharmacy? ",-1)),d[5]||(d[5]=h("span",{class:"text-warning font-weight-bold"}," Medicine will not be shown in pharmacy operations. You will need to select and add it again later. ",-1)),d[6]||(d[6]=h("br",null,null,-1)),d[7]||(d[7]=h("br",null,null,-1)),h("span",uQe,[d[3]||(d[3]=O(" Medicine: ",-1)),h("strong",null,K(e.medicine?.productName||"N/A"),1),e.medicine?.marketer?(R(),Ae("span",cQe,[d[2]||(d[2]=O("  Marketer: ",-1)),h("strong",null,K(e.medicine.marketer),1)])):ye("",!0)])]),_:1})]),_:1})]),_:1}),l(b),l(g,{"no-gutters":""},{default:u(()=>[l(m,{cols:"2"}),l(m,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(p,{variant:"outlined",color:"error",onClick:c,loading:o.value,disabled:o.value},{default:u(()=>[...d[8]||(d[8]=[O(" Yes, Remove from Pharmacy ",-1)])]),_:1},8,["loading","disabled"])]),_:1}),l(m,{cols:"2"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},AQe={class:"d-flex align-center"},fQe={class:"d-flex align-center"},mQe={class:"pr-3 d-flex"},vQe={class:"scrollable-content"},hQe={class:"text-center"},pQe={class:"text-center"},gQe={class:"text-body-2 text-medium-emphasis mb-4"},yQe={class:"text-center"},_Qe={class:"text-center"},wQe={class:"text-body-2 text-medium-emphasis mb-4"},bQe={key:0},xQe={key:1},CQe={class:"d-flex align-center justify-space-between w-100"},SQe={class:"flex-grow-1"},EQe={class:"d-flex align-center mb-1"},BQe={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},kQe={class:"d-flex align-center flex-wrap"},TQe={class:"d-flex align-center ml-2"},IQe={key:0},FQe={class:"text-right"},PQe={class:"text-right"},DQe={class:"text-right"},UQe={class:"text-right"},RQe={class:"text-center"},NQe={key:1,class:"text-body-2 text-medium-emphasis text-center py-2"},VQe={key:0,class:"text-medium-emphasis"},LQe={__name:"pharmacy-inventory",setup(e){const{showSuccess:t,showError:n}=ca(),a=V(0),r=V([]),s=V(null),o=V(!1),i=V(null),c=V(""),A=V(""),d=V(!1),f=V(!1),m=V(!1),v=V(!1),p=V(!1),g=V(!1),y=V(!1),w=V(!1),b=V(!1),x=V(null),T=V(null);V(null);const D=V(null),k=V(null),S=V(null),E=V(new Map),C=V(new Set),U=V(!1),F=V(null),L=it=>!it||it===0?"error":it<10?"warning":"success",H=it=>{if(!it)return!1;try{const qe=new Date(it),yt=new Date;return yt.setHours(0,0,0,0),qe<yt}catch{return!1}},ue=it=>{if(!it.batches||it.batches.length===0)return!1;const qe=new Date;return qe.setHours(0,0,0,0),it.batches.some(yt=>{if(!yt.expiryDate)return!1;try{const mt=new Date(yt.expiryDate);return mt.setHours(0,0,0,0),mt<qe&&(yt.availableUnits||0)>0}catch{return!1}})},ie=it=>{if(!it)return"";try{return new Date(it).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return it}},Q=it=>it==null?"0.00":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(it),X=ne(()=>{let it=r.value;if(c.value&&c.value.trim()!==""){const qe=c.value.toLowerCase().trim();it=it.filter(yt=>(yt.productName||"").toLowerCase().includes(qe))}if(A.value&&A.value.trim()!==""){const qe=A.value.toLowerCase().trim();it=it.filter(yt=>(yt.group||"").toLowerCase().includes(qe))}return d.value&&(it=it.filter(qe=>qe.hasExpiredBatchesWithInventory)),f.value&&(it=it.filter(qe=>qe.lowStock)),it}),le=it=>{if(!it.batches||it.batches.length===0)return{availableUnits:0,lowStock:!1};const qe=new Date;qe.setHours(0,0,0,0);const yt=it.batches.filter(an=>{if(!an.expiryDate)return!0;try{return new Date(an.expiryDate)>=qe}catch{return!0}}).reduce((an,Cn)=>an+(Cn.availableUnits||0),0),mt=it.alertUnits||0,xt=yt<mt;return{availableUnits:yt,lowStock:xt}},Z=async()=>{try{o.value=!0,i.value=null;const{data:it,error:qe}=await Lw();qe?(i.value=qe.response?.data?.error||qe.message||"Failed to load inventory",r.value=[],n("Error loading inventory")):(r.value=(it||[]).map(yt=>{const mt=le(yt),xt=ue(yt);return{...yt,availableUnits:mt.availableUnits,lowStock:mt.lowStock,hasExpiredBatchesWithInventory:xt}}),await Ie())}catch(it){console.error("Error in loadInventory:",it),i.value=it.message||"An unexpected error occurred",r.value=[],n("Error loading inventory")}finally{o.value=!1}},re=()=>{m.value=!0},q=(it=null)=>{if(x.value=it,it){const qe=r.value.find(yt=>yt.id===it);qe?T.value={id:qe.id,productName:qe.productName,marketer:qe.marketer}:T.value=null}else T.value=null;v.value=!0},P=it=>{let qe=null,yt=null;for(const mt of r.value)if(mt.batches&&(qe=mt.batches.find(xt=>xt.id===it),qe)){yt=mt;break}qe?(k.value={...qe,medicineId:yt.id,medicineName:yt.productName,medicineMarketer:yt.marketer},w.value=!0):n("Batch not found")},G=it=>{let qe=null;for(const yt of r.value)if(yt.batches){const mt=yt.batches.find(xt=>xt.id===it);if(mt){qe={...mt,medicineName:yt.productName||"Unknown",medicineId:yt.id,unitsPerPack:mt.unitsPerPack||1};break}}qe?(k.value=qe,p.value=!0):n("Batch not found")},J=()=>{g.value=!0},M=()=>{m.value=!1},te=()=>{m.value=!1,Z()},Y=()=>{v.value=!1,x.value=null,T.value=null},W=()=>{v.value=!1,x.value=null,T.value=null,Z()},ee=()=>{p.value=!1,k.value=null},ae=()=>{p.value=!1,k.value=null,Z()},oe=()=>{g.value=!1},j=()=>{g.value=!1,Z(),t("Medicine created successfully")},ce=it=>{D.value=it,y.value=!0},de=it=>{S.value=it,b.value=!0},_e=()=>{y.value=!1,D.value=null},Re=it=>{const qe=r.value.findIndex(yt=>yt.id===it.id);qe!==-1&&(r.value[qe]={...r.value[qe],...it}),y.value=!1,D.value=null,Z(),t("Medicine updated successfully")},be=()=>{w.value=!1,k.value=null},Ee=()=>{w.value=!1,k.value=null,Z()},Ce=()=>{b.value=!1,S.value=null},Be=()=>{b.value=!1,S.value=null,Z()},Te=it=>E.value.has(it)&&E.value.get(it)===!0,Oe=it=>!!(it.purchaseInvoiceId||it.purchaseInvoiceIdentifier),Me=it=>Te(it.id)?"Cannot delete: Inventory is used in a bill":Oe(it)?"Cannot delete: Batch is linked to a purchase invoice. Remove from invoice view instead.":"Delete Inventory",rt=it=>C.value.has(it),ut=async it=>{if(E.value.has(it))return E.value.get(it);const{data:qe,error:yt}=await pEe(it);if(yt)return console.error("Error checking batch usage:",yt),E.value.set(it,!1),!1;const mt=qe?.isUsed||!1;return E.value.set(it,mt),mt},Ie=async()=>{E.value.clear();const it=[];r.value.forEach(yt=>{yt.batches&&yt.batches.length>0&&yt.batches.forEach(mt=>{it.push(mt.id)})});const qe=it.map(yt=>ut(yt));await Promise.all(qe)},Ue=async it=>{let qe=null;for(const mt of r.value)if(mt.batches&&(qe=mt.batches.find(xt=>xt.id===it),qe))break;if(!qe){n("Batch not found");return}if(Oe(qe)){n("Cannot delete batch: Batch is linked to a purchase invoice. Remove from invoice view instead.");return}if(await ut(it)){n("Cannot delete batch: This inventory is being used in one or more bills");return}F.value=qe,U.value=!0},dt=()=>{U.value=!1,F.value=null},Ft=async it=>{if(it)try{C.value.add(it);const{data:qe,error:yt}=await gEe(it);if(yt){const mt=yt.message||"Failed to delete batch";n(mt);return}E.value.delete(it),U.value=!1,F.value=null,t("Batch deleted successfully"),await Z()}catch(qe){console.error("Error deleting batch:",qe),n("An unexpected error occurred while deleting the batch")}finally{C.value.delete(it)}};return dn(()=>{Z()}),(it,qe)=>{const yt=I("v-alert"),mt=I("v-tab"),xt=I("v-tabs"),an=I("v-icon"),Cn=I("v-card-text"),oa=I("v-card"),Vt=I("v-btn"),kt=I("v-tooltip"),at=I("v-col"),bt=I("v-row"),en=I("v-progress-circular"),Ye=I("v-text-field"),We=I("v-checkbox"),_t=I("v-chip"),Rt=I("v-card-title"),zt=I("v-divider"),Pt=I("v-table"),Wt=I("v-lazy"),Lt=I("v-window-item"),ia=I("v-window"),Ln=I("v-main"),zn=I("v-dialog");return R(),Ae(Ke,null,[l(Ln,null,{default:u(()=>[s.value?(R(),ve(yt,{key:0,type:"error",dismissible:"","onClick:close":qe[0]||(qe[0]=Yt=>s.value=null),class:"ma-3"},{default:u(()=>[O(K(s.value),1)]),_:1})):ye("",!0),l(bt,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[l(at,{cols:"12"},{default:u(()=>[l(oa,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center justify-space-between"},{default:u(()=>[h("div",AQe,[l(xt,{modelValue:a.value,"onUpdate:modelValue":qe[1]||(qe[1]=Yt=>a.value=Yt),color:"primary","align-tabs":"start"},{default:u(()=>[l(mt,{value:0},{default:u(()=>[...qe[17]||(qe[17]=[O("Inventory",-1)])]),_:1})]),_:1},8,["modelValue"]),r.value&&r.value.length>0?(R(),ve(oa,{key:0,rounded:"0",class:"ml-3",color:"warning",variant:"tonal",style:{height:"fit-content"}},{default:u(()=>[l(Cn,{class:"py-1 px-2"},{default:u(()=>[h("div",fQe,[l(an,{color:"warning",size:"small",class:"mr-2"},{default:u(()=>[...qe[18]||(qe[18]=[O("mdi-alert-circle",-1)])]),_:1}),qe[19]||(qe[19]=h("span",{class:"text-body-2 font-weight-medium"}," Before reconciliation, ensure no inventory blocked for draft bills. ",-1))])]),_:1})]),_:1})):ye("",!0)]),h("div",mQe,[l(En,{permission:"pharmacy.inventory.manage"},{default:u(()=>[l(Vt,{color:"primary","prepend-icon":"mdi-magnify-plus",onClick:re,style:{"margin-right":"2px"}},{default:u(()=>[...qe[20]||(qe[20]=[O(" Search & Add Medicine ",-1)])]),_:1})]),_:1}),l(En,{permission:"pharmacy.inventory.manage"},{default:u(()=>[l(Vt,{color:"primary",variant:"outlined","prepend-icon":"mdi-plus-box",onClick:J,style:{"margin-right":"2px"}},{default:u(()=>[...qe[21]||(qe[21]=[O(" Create & Add Medicine ",-1)])]),_:1})]),_:1}),l(kt,{text:"Refresh Inventory"},{activator:u(({props:Yt})=>[l(Vt,Pe({rounded:"x-small",onClick:Z,size:"small"},Yt,{loading:o.value,class:"btn-hover-enhanced ml-1"}),{default:u(()=>[l(an,null,{default:u(()=>[...qe[22]||(qe[22]=[O("mdi-refresh",-1)])]),_:1})]),_:1},16,["loading"])]),_:1})])]),_:1})]),_:1})]),_:1}),l(ia,{modelValue:a.value,"onUpdate:modelValue":qe[7]||(qe[7]=Yt=>a.value=Yt),class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[l(Lt,{value:0,style:{height:"100%"}},{default:u(()=>[h("div",vQe,[o.value?(R(),ve(bt,{key:0,"no-gutters":""},{default:u(()=>[l(at,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50vh"}},{default:u(()=>[h("div",hQe,[l(en,{indeterminate:"",color:"primary",size:"64"}),qe[23]||(qe[23]=h("div",{class:"mt-4 text-subtitle-1"},"Loading inventory...",-1))])]),_:1})]),_:1})):i.value?(R(),ve(bt,{key:1,"no-gutters":""},{default:u(()=>[l(at,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50vh"}},{default:u(()=>[h("div",pQe,[l(an,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...qe[24]||(qe[24]=[O("mdi-alert-circle",-1)])]),_:1}),qe[26]||(qe[26]=h("div",{class:"text-h6 mb-2"},"Failed to Load Inventory",-1)),h("div",gQe,K(i.value),1),l(Vt,{color:"primary",onClick:Z,"prepend-icon":"mdi-refresh"},{default:u(()=>[...qe[25]||(qe[25]=[O(" Try Again ",-1)])]),_:1})])]),_:1})]),_:1})):r.value&&r.value.length===0?(R(),ve(bt,{key:2,"no-gutters":""},{default:u(()=>[l(at,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50vh"}},{default:u(()=>[h("div",yQe,[l(an,{size:"64",color:"grey",class:"mb-4"},{default:u(()=>[...qe[27]||(qe[27]=[O("mdi-pill-off",-1)])]),_:1}),qe[29]||(qe[29]=h("div",{class:"text-h6 mb-2"},"No Pharmacy Inventory",-1)),qe[30]||(qe[30]=h("div",{class:"text-body-2 text-medium-emphasis mb-4"},"Add medicines to start managing inventory",-1)),l(En,{permission:"pharmacy.inventory.manage"},{default:u(()=>[l(Vt,{color:"primary",onClick:re,"prepend-icon":"mdi-magnify-plus"},{default:u(()=>[...qe[28]||(qe[28]=[O(" Search & Add Medicine ",-1)])]),_:1})]),_:1})])]),_:1})]),_:1})):r.value&&r.value.length>0?(R(),Ae(Ke,{key:3},[l(bt,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(at,{cols:"12",class:"d-flex justify-center align-center flex-wrap gap-2"},{default:u(()=>[l(Ye,{modelValue:c.value,"onUpdate:modelValue":qe[2]||(qe[2]=Yt=>c.value=Yt),placeholder:"Filter by medicine name...",density:"compact",variant:"outlined",clearable:"","hide-details":"","prepend-inner-icon":"mdi-magnify",class:"filter-input",style:{"max-width":"300px",width:"100%"}},null,8,["modelValue"]),l(Ye,{modelValue:A.value,"onUpdate:modelValue":qe[3]||(qe[3]=Yt=>A.value=Yt),placeholder:"Filter by group...",density:"compact",variant:"outlined",clearable:"","hide-details":"","prepend-inner-icon":"mdi-tag",class:"filter-input",style:{"max-width":"300px",width:"100%"}},null,8,["modelValue"]),l(We,{modelValue:d.value,"onUpdate:modelValue":qe[4]||(qe[4]=Yt=>d.value=Yt),label:"Expired batches only",density:"compact","hide-details":"",color:"error",class:"filter-checkbox"},null,8,["modelValue"]),l(We,{modelValue:f.value,"onUpdate:modelValue":qe[5]||(qe[5]=Yt=>f.value=Yt),label:"Low stock only",density:"compact","hide-details":"",color:"warning",class:"filter-checkbox"},null,8,["modelValue"])]),_:1})]),_:1}),c.value&&c.value.trim()!==""||A.value&&A.value.trim()!==""||d.value||f.value?(R(),Ae(Ke,{key:0},[X.value.length===0?(R(),ve(bt,{key:0,"no-gutters":""},{default:u(()=>[l(at,{cols:"12",class:"d-flex justify-center align-center",style:{height:"40vh"}},{default:u(()=>[h("div",_Qe,[l(an,{size:"64",color:"grey",class:"mb-4"},{default:u(()=>[...qe[31]||(qe[31]=[O("mdi-magnify-remove",-1)])]),_:1}),qe[33]||(qe[33]=h("div",{class:"text-h6 mb-2"},"No medicines found",-1)),h("div",wQe,[c.value&&c.value.trim()!==""?(R(),Ae("span",bQe,' No medicines match "'+K(c.value)+'" ',1)):(R(),Ae("span",xQe," No medicines match the selected filters "))]),l(Vt,{color:"primary",onClick:qe[6]||(qe[6]=Yt=>{c.value="",A.value="",d.value=!1,f.value=!1}),"prepend-icon":"mdi-filter-remove"},{default:u(()=>[...qe[32]||(qe[32]=[O(" Clear All Filters ",-1)])]),_:1})])]),_:1})]),_:1})):ye("",!0)],64)):ye("",!0),(R(!0),Ae(Ke,null,Gt(X.value,Yt=>(R(),ve(Wt,{key:Yt?.id||Math.random(),options:{threshold:.1,rootMargin:"50px"}},{default:u(()=>[Yt?(R(),ve(oa,{key:0,style:{textAlign:"left"},density:"compact",class:"mb-1 mx-2 card-enhanced card-status-default",rounded:"lg"},{default:u(()=>[l(Rt,{class:"pb-0 pt-2"},{default:u(()=>[h("div",CQe,[h("div",SQe,[h("div",EQe,[h("span",BQe,K(Yt.productName||"Unknown Medicine"),1),l(En,{permission:"pharmacy.inventory.manage"},{default:u(()=>[l(kt,{text:"Edit Medicine"},{activator:u(({props:Bn})=>[l(an,Pe({size:"x-small"},{ref_for:!0},Bn,{class:"edit-icon flex-shrink-0 ml-1",onClick:ke=>ce(Yt),tabindex:"-1"}),{default:u(()=>[...qe[34]||(qe[34]=[O(" mdi-pencil ",-1)])]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024),l(En,{permission:"pharmacy.inventory.manage"},{default:u(()=>[l(kt,{text:"Remove Medicine from Pharmacy"},{activator:u(({props:Bn})=>[l(an,Pe({size:"x-small"},{ref_for:!0},Bn,{class:"edit-icon flex-shrink-0 ml-1",onClick:ke=>de(Yt),tabindex:"-1",color:"error"}),{default:u(()=>[...qe[35]||(qe[35]=[O(" mdi-delete-outline ",-1)])]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024)]),h("div",kQe,[Yt.group&&Yt.group.trim()!==""?(R(),ve(_t,{key:0,color:"info",size:"small",variant:"tonal",class:"mr-1 mb-1"},{default:u(()=>[O(K(Yt.group),1)]),_:2},1024)):ye("",!0),l(_t,{color:L(Yt.availableUnits),size:"small",variant:"tonal",class:"mr-1 mb-1"},{default:u(()=>[l(an,{size:"small",class:"mr-1"},{default:u(()=>[...qe[36]||(qe[36]=[O("mdi-package-variant",-1)])]),_:1}),O(" "+K(Yt.availableUnits||0)+" units ",1)]),_:2},1032,["color"]),Yt.lowStock?(R(),ve(_t,{key:1,color:"warning",size:"small",variant:"tonal",class:"mr-1 mb-1"},{default:u(()=>[l(an,{size:"small",class:"mr-1"},{default:u(()=>[...qe[37]||(qe[37]=[O("mdi-alert",-1)])]),_:1}),qe[38]||(qe[38]=O(" Low Stock ",-1))]),_:1})):ye("",!0),!Yt.hsnCode||Yt.hsnCode.trim()===""?(R(),ve(_t,{key:2,color:"warning",size:"small",variant:"tonal",class:"mr-1 mb-1"},{default:u(()=>[l(an,{size:"small",class:"mr-1"},{default:u(()=>[...qe[39]||(qe[39]=[O("mdi-alert-circle",-1)])]),_:1}),qe[40]||(qe[40]=O(" HSN Missing ",-1))]),_:1})):ye("",!0)])]),h("div",TQe,[l(En,{permission:"pharmacy.inventory.manage"},{default:u(()=>[l(Vt,{color:"primary",variant:"outlined","prepend-icon":"mdi-plus",size:"small",onClick:Bn=>q(Yt.id)},{default:u(()=>[...qe[41]||(qe[41]=[O(" Add Inventory ",-1)])]),_:1},8,["onClick"])]),_:2},1024)])])]),_:2},1024),Yt.batches&&Yt.batches.length>0?(R(),ve(zt,{key:0})):ye("",!0),l(Cn,{class:ct({"pt-1 pb-1":Yt.batches&&Yt.batches.length>0,"pa-0":!Yt.batches||Yt.batches.length===0})},{default:u(()=>[Yt.batches&&Yt.batches.length>0?(R(),Ae("div",IQe,[l(Pt,{density:"compact",class:"batch-table compact-table"},{default:u(()=>[qe[42]||(qe[42]=h("thead",null,[h("tr",null,[h("th",{class:"text-left"},"Batch #"),h("th",{class:"text-left"},"Expiry"),h("th",{class:"text-left"},"InwardBillID"),h("th",{class:"text-left"},"Location"),h("th",{class:"text-right"},"MRP/pack"),h("th",{class:"text-right"},"Cost/pack"),h("th",{class:"text-right"},"Discount %"),h("th",{class:"text-right"},"Available Quantity"),h("th",{class:"text-center"},"Actions")])],-1)),h("tbody",null,[(R(!0),Ae(Ke,null,Gt(Yt.batches,Bn=>(R(),Ae("tr",{key:Bn.id,class:ct({"batch-expired":H(Bn.expiryDate)})},[h("td",null,K(Bn.batchNumber),1),h("td",null,[h("span",{class:ct({"text-error":H(Bn.expiryDate)})},K(ie(Bn.expiryDate)),3)]),h("td",null,K(Bn.inwardBillId||Bn.purchaseInvoiceIdentifier||"-"),1),h("td",null,K(Bn.location||"-"),1),h("td",FQe,K(Q(Bn.mrp)),1),h("td",PQe,K(Q(Bn.cost)),1),h("td",DQe,K(Bn.discountPercentage||0)+"%",1),h("td",UQe,[l(_t,{color:Bn.availableUnits>0?"success":"error",size:"small",variant:"tonal"},{default:u(()=>[O(K(Bn.availableUnits||0),1)]),_:2},1032,["color"])]),h("td",RQe,[l(En,{permission:"pharmacy.inventory.manage",tag:"span"},{default:u(()=>[l(kt,{text:"Edit Purchased Inventory"},{activator:u(({props:ke})=>[l(Vt,Pe({icon:"mdi-pencil",size:"small",variant:"text",onClick:ze=>P(Bn.id),class:"mr-1"},{ref_for:!0},ke),null,16,["onClick"])]),_:2},1024)]),_:2},1024),l(En,{permission:"pharmacy.inventory.manage",tag:"span"},{default:u(()=>[l(kt,{text:"Manage Inventory"},{activator:u(({props:ke})=>[l(Vt,Pe({icon:"mdi-swap-horizontal",size:"small",variant:"text",onClick:ze=>G(Bn.id)},{ref_for:!0},ke,{class:"mr-1"}),null,16,["onClick"])]),_:2},1024)]),_:2},1024),l(En,{permission:"pharmacy.inventory.manage",tag:"span"},{default:u(()=>[l(kt,{text:Me(Bn)},{activator:u(({props:ke})=>[l(Vt,Pe({icon:"mdi-delete-outline",size:"small",variant:"text",onClick:ze=>Ue(Bn.id),disabled:Te(Bn.id)||Oe(Bn)||rt(Bn.id),loading:rt(Bn.id),color:"error"},{ref_for:!0},ke),null,16,["onClick","disabled","loading"])]),_:2},1032,["text"])]),_:2},1024)])],2))),128))])]),_:2},1024)])):(R(),Ae("div",NQe,' No inventory available. Click on "Add Inventory" to add inventory. '))]),_:2},1032,["class"])]),_:2},1024)):ye("",!0)]),_:2},1024))),128))],64)):ye("",!0)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(zn,{modelValue:m.value,"onUpdate:modelValue":qe[8]||(qe[8]=Yt=>m.value=Yt),persistent:"","max-width":"700px"},{default:u(()=>[m.value?(R(),ve(U9e,{key:0,onClose:M,onMedicineAdded:te})):ye("",!0)]),_:1},8,["modelValue"]),l(zn,{modelValue:v.value,"onUpdate:modelValue":qe[9]||(qe[9]=Yt=>v.value=Yt),persistent:"","max-width":"800px"},{default:u(()=>[v.value?(R(),ve(W9e,{key:0,"medicine-id":x.value,"medicine-info":T.value,onClose:Y,onBatchCreated:W},null,8,["medicine-id","medicine-info"])):ye("",!0)]),_:1},8,["modelValue"]),l(zn,{modelValue:p.value,"onUpdate:modelValue":qe[10]||(qe[10]=Yt=>p.value=Yt),persistent:"","max-width":"600px"},{default:u(()=>[p.value&&k.value?(R(),ve(lQe,{key:0,"batch-id":k.value.id,batch:k.value,onClose:ee,onInventoryAdded:ae},null,8,["batch-id","batch"])):ye("",!0)]),_:1},8,["modelValue"]),l(zn,{modelValue:g.value,"onUpdate:modelValue":qe[11]||(qe[11]=Yt=>g.value=Yt),persistent:"","max-width":"40%"},{default:u(()=>[g.value?(R(),ve(CT,{key:0,mode:"pharmacy",onClose:oe,onMedicineCreated:j})):ye("",!0)]),_:1},8,["modelValue"]),l(zn,{modelValue:y.value,"onUpdate:modelValue":qe[12]||(qe[12]=Yt=>y.value=Yt),persistent:"","max-width":"40%"},{default:u(()=>[y.value&&D.value?(R(),ve(PH,{key:0,medicine:D.value,mode:"pharmacy",onClose:_e,"onUpdate:medicine":Re},null,8,["medicine"])):ye("",!0)]),_:1},8,["modelValue"]),l(zn,{modelValue:w.value,"onUpdate:modelValue":qe[13]||(qe[13]=Yt=>w.value=Yt),persistent:"","max-width":"800px"},{default:u(()=>[w.value&&k.value?(R(),ve(aQe,{key:0,"batch-id":k.value.id,batch:k.value,onClose:be,onBatchUpdated:Ee},null,8,["batch-id","batch"])):ye("",!0)]),_:1},8,["modelValue"]),l(zn,{modelValue:b.value,"onUpdate:modelValue":qe[14]||(qe[14]=Yt=>b.value=Yt),persistent:"","max-width":"30%"},{default:u(()=>[b.value&&S.value?(R(),ve(dQe,{key:0,medicine:S.value,onClose:Ce,onMedicineRemoved:Be},null,8,["medicine"])):ye("",!0)]),_:1},8,["modelValue"]),l(zn,{modelValue:U.value,"onUpdate:modelValue":qe[16]||(qe[16]=Yt=>U.value=Yt),persistent:"","max-width":"500px"},{default:u(()=>[l(oa,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(bt,{"no-gutters":""},{default:u(()=>[l(at,{cols:"12"},{default:u(()=>[l(oa,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(bt,{"no-gutters":""},{default:u(()=>[l(at,{cols:"11"},{default:u(()=>[l(Rt,{class:"pa-0 pl-2"},{default:u(()=>[...qe[43]||(qe[43]=[O("Delete Inventory Batch",-1)])]),_:1})]),_:1}),l(at,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(Vt,{icon:"",size:"x-small",onClick:dt,disabled:rt(F.value?.id)},{default:u(()=>[l(an,null,{default:u(()=>[...qe[44]||(qe[44]=[O("mdi-close",-1)])]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(bt,{"no-gutters":""},{default:u(()=>[l(at,{cols:"12"},{default:u(()=>[l(oa,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(bt,{"no-gutters":""},{default:u(()=>[l(at,{cols:"12"},{default:u(()=>[l(Cn,{class:"text-left"},{default:u(()=>[qe[50]||(qe[50]=O(" Are you sure you want to delete this inventory batch? ",-1)),qe[51]||(qe[51]=h("span",{class:"text-error font-weight-bold"}," This action cannot be undone. The batch and all associated inventory data will be permanently deleted. ",-1)),qe[52]||(qe[52]=h("br",null,null,-1)),qe[53]||(qe[53]=h("br",null,null,-1)),F.value?(R(),Ae("span",VQe,[qe[45]||(qe[45]=h("strong",null,"Batch #:",-1)),O(" "+K(F.value.batchNumber),1),qe[46]||(qe[46]=h("br",null,null,-1)),qe[47]||(qe[47]=h("strong",null,"Expiry:",-1)),O(" "+K(ie(F.value.expiryDate)),1),qe[48]||(qe[48]=h("br",null,null,-1)),qe[49]||(qe[49]=h("strong",null,"Available Units:",-1)),O(" "+K(F.value.availableUnits||0),1)])):ye("",!0)]),_:1})]),_:1})]),_:1}),l(zt),l(bt,{"no-gutters":""},{default:u(()=>[l(at,{cols:"12",class:"pa-3 d-flex justify-end"},{default:u(()=>[l(Vt,{variant:"outlined",color:"error",onClick:qe[15]||(qe[15]=Yt=>Ft(F.value?.id)),loading:rt(F.value?.id),disabled:!F.value||rt(F.value?.id),class:"mr-2"},{default:u(()=>[...qe[54]||(qe[54]=[O(" Delete ",-1)])]),_:1},8,["loading","disabled"]),l(Vt,{variant:"flat",color:"primary",onClick:dt,disabled:rt(F.value?.id)},{default:u(()=>[...qe[55]||(qe[55]=[O(" Cancel ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},MQe=qt(LQe,[["__scopeId","data-v-68b893f0"]]),OQe={__name:"pharmacy-supplier-form",props:{supplier:{type:Object,default:null}},emits:["close","saved"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ca(),o=V(!0),i=V(!1),c=V(!1),A=V(null),d=V({identifier:"",supplierName:"",gstin:"",address:"",contactNumber:""});je(()=>n.supplier,v=>{v&&(d.value={...v})},{immediate:!0});const f=()=>{o.value=!1,a("close")},m=async()=>{if(!A.value)return;const{valid:v}=await A.value.validate();if(v){c.value=!0;try{const{data:p,error:g}=await yEe(d.value);if(g)throw g;r("Supplier created successfully"),a("saved"),f()}catch(p){console.error("Error creating supplier:",p),s(p.response?.data?.error||p.message||"Failed to create supplier")}finally{c.value=!1}}};return(v,p)=>{const g=I("v-icon"),y=I("v-btn"),w=I("v-card-title"),b=I("v-divider"),x=I("v-text-field"),T=I("v-textarea"),D=I("v-form"),k=I("v-card-text"),S=I("v-spacer"),E=I("v-card-actions"),C=I("v-card"),U=I("v-dialog");return R(),ve(U,{modelValue:o.value,"onUpdate:modelValue":p[6]||(p[6]=F=>o.value=F),persistent:"","max-width":"600px"},{default:u(()=>[l(C,{rounded:"lg"},{default:u(()=>[l(w,{class:"d-flex align-center justify-space-between"},{default:u(()=>[p[8]||(p[8]=h("span",null,"Add Supplier",-1)),l(y,{onClick:f,variant:"text",size:"small"},{default:u(()=>[l(g,null,{default:u(()=>[...p[7]||(p[7]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(b),l(k,{class:"py-2"},{default:u(()=>[l(D,{ref_key:"form",ref:A,modelValue:i.value,"onUpdate:modelValue":p[5]||(p[5]=F=>i.value=F)},{default:u(()=>[l(x,{modelValue:d.value.identifier,"onUpdate:modelValue":p[0]||(p[0]=F=>d.value.identifier=F),label:"Identifier",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-identifier",class:"mb-1"},null,8,["modelValue"]),l(x,{modelValue:d.value.supplierName,"onUpdate:modelValue":p[1]||(p[1]=F=>d.value.supplierName=F),label:"Supplier Name *",variant:"outlined",density:"compact",rules:[F=>!!F||"Supplier name is required"],"prepend-inner-icon":"mdi-account",class:"mb-1"},null,8,["modelValue","rules"]),l(x,{modelValue:d.value.gstin,"onUpdate:modelValue":p[2]||(p[2]=F=>d.value.gstin=F),label:"GSTIN *",variant:"outlined",density:"compact",rules:[F=>!!F||"GSTIN is required"],"prepend-inner-icon":"mdi-card-account-details",class:"mb-1"},null,8,["modelValue","rules"]),l(T,{modelValue:d.value.address,"onUpdate:modelValue":p[3]||(p[3]=F=>d.value.address=F),label:"Address",variant:"outlined",density:"compact",rows:"2","prepend-inner-icon":"mdi-map-marker",class:"mb-1"},null,8,["modelValue"]),l(x,{modelValue:d.value.contactNumber,"onUpdate:modelValue":p[4]||(p[4]=F=>d.value.contactNumber=F),label:"Contact Number",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-phone"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),l(b),l(E,{class:"pa-3"},{default:u(()=>[l(S),l(y,{onClick:f},{default:u(()=>[...p[9]||(p[9]=[O("Cancel",-1)])]),_:1}),l(y,{color:"primary",onClick:m,disabled:!i.value||c.value,loading:c.value},{default:u(()=>[...p[10]||(p[10]=[O(" Save ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},HQe={__name:"pharmacy-edit-supplier",props:{supplier:{type:Object,required:!0}},emits:["close","saved"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ca(),o=V(!0),i=V(!1),c=V(!1),A=V(null),d=V({identifier:"",supplierName:"",gstin:"",address:"",contactNumber:""});je(()=>n.supplier,v=>{v&&(d.value={identifier:v.identifier||"",supplierName:v.supplierName||"",gstin:v.gstin||"",address:v.address||"",contactNumber:v.contactNumber||""})},{immediate:!0});const f=()=>{o.value=!1,a("close")},m=async()=>{if(!A.value)return;const{valid:v}=await A.value.validate();if(v){c.value=!0;try{const{data:p,error:g}=await _Ee(n.supplier.id,d.value);if(g)throw g;r("Supplier updated successfully"),a("saved"),f()}catch(p){console.error("Error updating supplier:",p),s(p.response?.data?.error||p.message||"Failed to update supplier")}finally{c.value=!1}}};return(v,p)=>{const g=I("v-icon"),y=I("v-btn"),w=I("v-card-title"),b=I("v-divider"),x=I("v-text-field"),T=I("v-textarea"),D=I("v-form"),k=I("v-card-text"),S=I("v-spacer"),E=I("v-card-actions"),C=I("v-card"),U=I("v-dialog");return R(),ve(U,{modelValue:o.value,"onUpdate:modelValue":p[6]||(p[6]=F=>o.value=F),persistent:"","max-width":"600px"},{default:u(()=>[l(C,{rounded:"lg"},{default:u(()=>[l(w,{class:"d-flex align-center justify-space-between"},{default:u(()=>[p[8]||(p[8]=h("span",null,"Edit Supplier",-1)),l(y,{onClick:f,variant:"text",size:"small"},{default:u(()=>[l(g,null,{default:u(()=>[...p[7]||(p[7]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(b),l(k,{class:"py-2"},{default:u(()=>[l(D,{ref_key:"form",ref:A,modelValue:i.value,"onUpdate:modelValue":p[5]||(p[5]=F=>i.value=F)},{default:u(()=>[l(x,{modelValue:d.value.identifier,"onUpdate:modelValue":p[0]||(p[0]=F=>d.value.identifier=F),label:"Identifier",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-identifier",class:"mb-1"},null,8,["modelValue"]),l(x,{modelValue:d.value.supplierName,"onUpdate:modelValue":p[1]||(p[1]=F=>d.value.supplierName=F),label:"Supplier Name *",variant:"outlined",density:"compact",rules:[F=>!!F||"Supplier name is required"],"prepend-inner-icon":"mdi-account",class:"mb-1"},null,8,["modelValue","rules"]),l(x,{modelValue:d.value.gstin,"onUpdate:modelValue":p[2]||(p[2]=F=>d.value.gstin=F),label:"GSTIN *",variant:"outlined",density:"compact",rules:[F=>!!F||"GSTIN is required"],"prepend-inner-icon":"mdi-card-account-details",class:"mb-1"},null,8,["modelValue","rules"]),l(T,{modelValue:d.value.address,"onUpdate:modelValue":p[3]||(p[3]=F=>d.value.address=F),label:"Address",variant:"outlined",density:"compact",rows:"2","prepend-inner-icon":"mdi-map-marker",class:"mb-1"},null,8,["modelValue"]),l(x,{modelValue:d.value.contactNumber,"onUpdate:modelValue":p[4]||(p[4]=F=>d.value.contactNumber=F),label:"Contact Number",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-phone"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),l(b),l(E,{class:"pa-3"},{default:u(()=>[l(S),l(y,{onClick:f},{default:u(()=>[...p[9]||(p[9]=[O("Cancel",-1)])]),_:1}),l(y,{color:"primary",onClick:m,disabled:!i.value||c.value,loading:c.value},{default:u(()=>[...p[10]||(p[10]=[O(" Update ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},$Qe={__name:"pharmacy-purchase-invoice-form",props:{supplierId:{type:Number,default:null}},emits:["close","saved"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ca(),o=V(!0),i=V(!1),c=V(!1),A=V(null),d=V([]),f=V({supplierId:null,pharmacyPurchaseInvoiceDate:"",pharmacyPurchaseInvoiceIdentifier:"",status:1,additionalDiscount:0,paymentDueDate:"",paymentDate:""}),m=[{label:"Draft",value:1},{label:"Finalized",value:2}];je(()=>n.supplierId,g=>{g&&(f.value.supplierId=g)},{immediate:!0}),dn(async()=>{const{data:g}=await VH();d.value=g||[]});const v=()=>{o.value=!1,a("close")},p=async()=>{if(!A.value)return;const{valid:g}=await A.value.validate();if(g){c.value=!0;try{const{data:y,error:w}=await bEe(f.value);if(w)throw w;r("Purchase invoice created successfully"),a("saved"),v()}catch(y){console.error("Error creating purchase invoice:",y),s(y.response?.data?.error||y.message||"Failed to create purchase invoice")}finally{c.value=!1}}};return(g,y)=>{const w=I("v-icon"),b=I("v-btn"),x=I("v-card-title"),T=I("v-divider"),D=I("v-select"),k=I("v-col"),S=I("v-text-field"),E=I("v-row"),C=I("v-form"),U=I("v-card-text"),F=I("v-spacer"),L=I("v-card-actions"),H=I("v-card"),ue=I("v-dialog");return R(),ve(ue,{modelValue:o.value,"onUpdate:modelValue":y[8]||(y[8]=ie=>o.value=ie),persistent:"","max-width":"700px"},{default:u(()=>[l(H,{rounded:"lg"},{default:u(()=>[l(x,{class:"d-flex align-center justify-space-between"},{default:u(()=>[y[10]||(y[10]=h("span",null,"Create Purchase Invoice",-1)),l(b,{onClick:v,variant:"text",size:"small"},{default:u(()=>[l(w,null,{default:u(()=>[...y[9]||(y[9]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(T),l(U,{class:"py-1"},{default:u(()=>[l(C,{ref_key:"form",ref:A,modelValue:i.value,"onUpdate:modelValue":y[7]||(y[7]=ie=>i.value=ie)},{default:u(()=>[l(E,{dense:""},{default:u(()=>[l(k,{cols:"12"},{default:u(()=>[l(D,{modelValue:f.value.supplierId,"onUpdate:modelValue":y[0]||(y[0]=ie=>f.value.supplierId=ie),items:d.value,"item-title":"supplierName","item-value":"id",label:"Supplier *",variant:"outlined",density:"compact",rules:[ie=>!!ie||"Supplier is required"],"prepend-inner-icon":"mdi-account",disabled:!!e.supplierId},null,8,["modelValue","items","rules","disabled"])]),_:1}),l(k,{cols:"12",md:"6"},{default:u(()=>[l(S,{modelValue:f.value.pharmacyPurchaseInvoiceDate,"onUpdate:modelValue":y[1]||(y[1]=ie=>f.value.pharmacyPurchaseInvoiceDate=ie),type:"date",label:"Invoice Date *",variant:"outlined",density:"compact",rules:[ie=>!!ie||"Invoice date is required"],"prepend-inner-icon":"mdi-calendar"},null,8,["modelValue","rules"])]),_:1}),l(k,{cols:"12",md:"6"},{default:u(()=>[l(S,{modelValue:f.value.pharmacyPurchaseInvoiceIdentifier,"onUpdate:modelValue":y[2]||(y[2]=ie=>f.value.pharmacyPurchaseInvoiceIdentifier=ie),label:"Invoice Identifier *",variant:"outlined",density:"compact",rules:[ie=>!!ie||"Invoice identifier is required"],"prepend-inner-icon":"mdi-file-document"},null,8,["modelValue","rules"])]),_:1}),l(k,{cols:"12",md:"6"},{default:u(()=>[l(D,{modelValue:f.value.status,"onUpdate:modelValue":y[3]||(y[3]=ie=>f.value.status=ie),items:m,"item-title":"label","item-value":"value",label:"Status",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-check-circle"},null,8,["modelValue"])]),_:1}),l(k,{cols:"12",md:"6"},{default:u(()=>[l(S,{modelValue:f.value.additionalDiscount,"onUpdate:modelValue":y[4]||(y[4]=ie=>f.value.additionalDiscount=ie),modelModifiers:{number:!0},label:"Additional Discount ()",variant:"outlined",density:"compact",type:"number",rules:[ie=>ie==null||ie>=0||"Additional discount cannot be negative"],"prepend-inner-icon":"mdi-currency-inr"},null,8,["modelValue","rules"])]),_:1}),l(k,{cols:"12",md:"6"},{default:u(()=>[l(S,{modelValue:f.value.paymentDueDate,"onUpdate:modelValue":y[5]||(y[5]=ie=>f.value.paymentDueDate=ie),type:"date",label:"Payment Due Date",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-calendar-clock"},null,8,["modelValue"])]),_:1}),l(k,{cols:"12",md:"6"},{default:u(()=>[l(S,{modelValue:f.value.paymentDate,"onUpdate:modelValue":y[6]||(y[6]=ie=>f.value.paymentDate=ie),type:"date",label:"Payment Date",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-calendar-check"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(T),l(L,{class:"pa-3"},{default:u(()=>[l(F),l(b,{onClick:v},{default:u(()=>[...y[11]||(y[11]=[O("Cancel",-1)])]),_:1}),l(b,{color:"primary",onClick:p,disabled:!i.value||c.value,loading:c.value},{default:u(()=>[...y[12]||(y[12]=[O(" Create Invoice ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},QQe={class:"text-center py-4"},GQe={__name:"pharmacy-edit-purchase-invoice",props:{invoiceId:{type:Number,required:!0}},emits:["close","saved"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ca(),o=V(!0),i=V(!1),c=V(!1),A=V(!1),d=V(null),f=V({status:1,additionalDiscount:0,paymentDueDate:"",paymentDate:""}),m=[{label:"Draft",value:1},{label:"Finalized",value:2}],v=async()=>{A.value=!0;try{const{data:w,error:b}=await Eg(n.invoiceId);if(b)throw b;f.value={status:w.status||1,additionalDiscount:w.additionalDiscount||0,paymentDueDate:w.paymentDueDate?p(w.paymentDueDate):"",paymentDate:w.paymentDate?p(w.paymentDate):""}}catch(w){console.error("Error loading invoice:",w),s(w.response?.data?.error||w.message||"Failed to load invoice")}finally{A.value=!1}};dn(()=>{v()});const p=w=>w?new Date(w*1e3).toISOString().split("T")[0]:"",g=()=>{o.value=!1,a("close")},y=async()=>{if(!d.value)return;const{valid:w}=await d.value.validate();if(w){c.value=!0;try{const{data:b,error:x}=await xEe(n.invoiceId,f.value);if(x)throw x;r("Purchase invoice updated successfully"),a("saved"),g()}catch(b){console.error("Error updating purchase invoice:",b),s(b.response?.data?.error||b.message||"Failed to update purchase invoice")}finally{c.value=!1}}};return(w,b)=>{const x=I("v-icon"),T=I("v-btn"),D=I("v-card-title"),k=I("v-divider"),S=I("v-progress-circular"),E=I("v-card-text"),C=I("v-select"),U=I("v-text-field"),F=I("v-form"),L=I("v-spacer"),H=I("v-card-actions"),ue=I("v-card"),ie=I("v-dialog");return R(),ve(ie,{modelValue:o.value,"onUpdate:modelValue":b[5]||(b[5]=Q=>o.value=Q),persistent:"","max-width":"600px"},{default:u(()=>[l(ue,{rounded:"lg"},{default:u(()=>[l(D,{class:"d-flex align-center justify-space-between"},{default:u(()=>[b[7]||(b[7]=h("span",null,"Edit Purchase Invoice",-1)),l(T,{onClick:g,variant:"text",size:"small"},{default:u(()=>[l(x,null,{default:u(()=>[...b[6]||(b[6]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(k),A.value?(R(),ve(E,{key:0,class:"py-2"},{default:u(()=>[h("div",QQe,[l(S,{indeterminate:"",color:"primary"})])]),_:1})):(R(),ve(E,{key:1,class:"py-2"},{default:u(()=>[l(F,{ref_key:"form",ref:d,modelValue:i.value,"onUpdate:modelValue":b[4]||(b[4]=Q=>i.value=Q)},{default:u(()=>[l(C,{modelValue:f.value.status,"onUpdate:modelValue":b[0]||(b[0]=Q=>f.value.status=Q),items:m,"item-title":"label","item-value":"value",label:"Status",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-check-circle",class:"mb-1"},null,8,["modelValue"]),l(U,{modelValue:f.value.additionalDiscount,"onUpdate:modelValue":b[1]||(b[1]=Q=>f.value.additionalDiscount=Q),modelModifiers:{number:!0},label:"Additional Discount ()",variant:"outlined",density:"compact",type:"number",rules:[Q=>Q==null||Q>=0||"Additional discount cannot be negative"],"prepend-inner-icon":"mdi-currency-inr",class:"mb-1"},null,8,["modelValue","rules"]),l(U,{modelValue:f.value.paymentDueDate,"onUpdate:modelValue":b[2]||(b[2]=Q=>f.value.paymentDueDate=Q),type:"date",label:"Payment Due Date",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-calendar-clock",class:"mb-1"},null,8,["modelValue"]),l(U,{modelValue:f.value.paymentDate,"onUpdate:modelValue":b[3]||(b[3]=Q=>f.value.paymentDate=Q),type:"date",label:"Payment Date",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-calendar-check"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})),l(k),l(H,{class:"pa-3"},{default:u(()=>[l(L),l(T,{onClick:g},{default:u(()=>[...b[8]||(b[8]=[O("Cancel",-1)])]),_:1}),l(T,{color:"primary",onClick:y,disabled:!i.value||c.value,loading:c.value},{default:u(()=>[...b[9]||(b[9]=[O(" Update ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},zQe={class:"text-center py-4"},KQe={class:"text-body-2 mb-0.5"},WQe={class:"text-body-2 mb-0.5"},jQe={class:"text-body-2 mb-0.5"},qQe={class:"text-body-2 mb-0.5"},YQe={class:"text-body-2 mb-0.5"},XQe={key:0,class:"text-body-2 mb-0.5"},JQe={key:0,class:"text-body-2 mb-0.5"},ZQe={key:1,class:"text-body-2 mb-0.5"},e7e={key:2,class:"text-body-2 mb-0.5"},t7e={class:"text-right"},n7e={class:"text-right"},a7e={class:"text-right"},r7e={class:"text-right"},s7e={class:"text-right"},o7e={class:"text-right"},i7e={class:"text-center"},l7e={key:1,class:"text-body-2 text-medium-emphasis py-2 text-center"},u7e={key:0,class:"text-body-2 mb-1"},c7e={class:"text-body-2 mb-1"},d7e={class:"text-body-2 mb-1"},A7e={class:"text-body-2 mb-1"},f7e={key:0,class:"text-body-2 mb-1"},m7e={class:"text-subtitle-1 font-weight-bold"},v7e={class:"text-body-2 text-medium-emphasis mt-2"},h7e={__name:"pharmacy-purchase-invoice-view",props:{invoiceId:{type:Number,required:!0}},emits:["close","updated","add-batch"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ca(),o=V(!0),i=V(!1),c=V(null),A=V(!1),d=async()=>{i.value=!0;try{const{data:b,error:x}=await Eg(n.invoiceId);if(x)throw x;c.value=b}catch(b){console.error("Error loading invoice:",b),s(b.response?.data?.error||b.message||"Failed to load invoice")}finally{i.value=!1}};je(()=>n.invoiceId,()=>{d()},{immediate:!0});const f=()=>{o.value=!1,a("close")},m=()=>{a("add-batch",n.invoiceId)},v=()=>{A.value=!0},p=()=>{A.value=!1,d(),a("updated")},g=async b=>{if(confirm("Are you sure you want to remove this batch? This will delete the batch entirely."))try{const{error:x}=await SEe(n.invoiceId,b);if(x)throw x;r("Batch removed successfully"),d(),a("updated")}catch(x){console.error("Error removing batch:",x),s(x.response?.data?.error||x.message||"Failed to remove batch")}},y=b=>b?new Date(b*1e3).toLocaleDateString():"-",w=b=>b==null?"0.00":`${b.toFixed(2)}`;return(b,x)=>{const T=I("v-icon"),D=I("v-btn"),k=I("v-card-title"),S=I("v-divider"),E=I("v-progress-circular"),C=I("v-card-text"),U=I("v-chip"),F=I("v-col"),L=I("v-row"),H=I("v-table"),ue=I("v-spacer"),ie=I("v-card-actions"),Q=I("v-card"),X=I("v-dialog");return R(),Ae(Ke,null,[l(X,{modelValue:o.value,"onUpdate:modelValue":x[0]||(x[0]=le=>o.value=le),persistent:"","max-width":"90%",scrollable:""},{default:u(()=>[l(Q,{rounded:"lg"},{default:u(()=>[l(k,{class:"d-flex align-center justify-space-between"},{default:u(()=>[x[3]||(x[3]=h("span",null,"Purchase Invoice Details",-1)),l(D,{onClick:f,variant:"text",size:"small"},{default:u(()=>[l(T,null,{default:u(()=>[...x[2]||(x[2]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(S),i.value?(R(),ve(C,{key:0,class:"py-2"},{default:u(()=>[h("div",zQe,[l(E,{indeterminate:"",color:"primary"})])]),_:1})):c.value?(R(),ve(C,{key:1,class:"py-2"},{default:u(()=>[l(L,{dense:"",class:"mb-2"},{default:u(()=>[l(F,{cols:"12",md:"4"},{default:u(()=>[x[7]||(x[7]=h("div",{class:"text-subtitle-2 mb-1"},"Invoice Information",-1)),h("div",KQe,[x[4]||(x[4]=h("strong",null,"Date:",-1)),O(" "+K(y(c.value.pharmacyPurchaseInvoiceDate)),1)]),h("div",WQe,[x[5]||(x[5]=h("strong",null,"Identifier:",-1)),O(" "+K(c.value.pharmacyPurchaseInvoiceIdentifier),1)]),h("div",jQe,[x[6]||(x[6]=h("strong",null,"Status:",-1)),l(U,{color:c.value.status===2?"success":"warning",size:"small",variant:"tonal",class:"ml-2"},{default:u(()=>[O(K(c.value.statusLabel||"Draft"),1)]),_:1},8,["color"])])]),_:1}),l(F,{cols:"12",md:"4"},{default:u(()=>[x[11]||(x[11]=h("div",{class:"text-subtitle-2 mb-1"},"Supplier Information",-1)),h("div",qQe,[x[8]||(x[8]=h("strong",null,"Name:",-1)),O(" "+K(c.value.supplier?.supplierName||"-"),1)]),h("div",YQe,[x[9]||(x[9]=h("strong",null,"GSTIN:",-1)),O(" "+K(c.value.supplier?.gstin||"-"),1)]),c.value.supplier?.address?(R(),Ae("div",XQe,[x[10]||(x[10]=h("strong",null,"Address:",-1)),O(" "+K(c.value.supplier.address),1)])):ye("",!0)]),_:1}),l(F,{cols:"12",md:"4"},{default:u(()=>[x[15]||(x[15]=h("div",{class:"text-subtitle-2 mb-1"},"Payment Information",-1)),c.value.paymentDueDate?(R(),Ae("div",JQe,[x[12]||(x[12]=h("strong",null,"Due Date:",-1)),O(" "+K(y(c.value.paymentDueDate)),1)])):ye("",!0),c.value.paymentDate?(R(),Ae("div",ZQe,[x[13]||(x[13]=h("strong",null,"Payment Date:",-1)),O(" "+K(y(c.value.paymentDate)),1)])):(R(),Ae("div",e7e,[...x[14]||(x[14]=[h("strong",null,"Payment Status:",-1),O(),h("span",{class:"text-warning"},"Unpaid",-1)])]))]),_:1})]),_:1}),l(S,{class:"my-2"}),x[23]||(x[23]=h("div",{class:"text-subtitle-2 mb-1"},"Medicine Batches",-1)),c.value.batches&&c.value.batches.length>0?(R(),ve(H,{key:0,density:"compact"},{default:u(()=>[x[16]||(x[16]=h("thead",null,[h("tr",null,[h("th",{class:"text-left"},"Medicine Name"),h("th",{class:"text-left"},"Batch Number"),h("th",{class:"text-left"},"Expiry Date"),h("th",{class:"text-left"},"Location"),h("th",{class:"text-right"},"MRP (per pack)"),h("th",{class:"text-right"},"Cost (per unit excl. GST)"),h("th",{class:"text-right"},"GST %"),h("th",{class:"text-right"},"Total Packs"),h("th",{class:"text-right"},"Total Units"),h("th",{class:"text-right"},"Total Cost"),h("th",{class:"text-center"},"Actions")])],-1)),h("tbody",null,[(R(!0),Ae(Ke,null,Gt(c.value.batches,le=>(R(),Ae("tr",{key:le.id},[h("td",null,K(le.medicine?.productName||"-"),1),h("td",null,K(le.batchNumber),1),h("td",null,K(y(le.expiryDate)),1),h("td",null,K(le.location||"-"),1),h("td",t7e,K(w(le.mrp)),1),h("td",n7e,K(w(le.costPerUnitExclGst||0)),1),h("td",a7e,K(le.gstPercentage||0)+"%",1),h("td",r7e,K(le.totalPacks||0),1),h("td",s7e,K(le.totalUnits||0),1),h("td",o7e,K(w(le.totalCost||0)),1),h("td",i7e,[l(D,{size:"x-small",variant:"text",icon:"mdi-delete",color:"error",onClick:Z=>g(le.id)},null,8,["onClick"])])]))),128))])]),_:1})):(R(),Ae("div",l7e," No batches added yet ")),l(S,{class:"mb-3 mt-2"}),c.value.totals?(R(),ve(L,{key:2,"no-gutters":""},{default:u(()=>[l(F,{cols:"8",class:"text-right"},{default:u(()=>[x[17]||(x[17]=h("div",{class:"text-body-2 mb-1"},"Base Cost Total:",-1)),x[18]||(x[18]=h("div",{class:"text-body-2 mb-1"},"GST:",-1)),x[19]||(x[19]=h("div",{class:"text-body-2 mb-1"},"Subtotal with GST:",-1)),c.value.totals.additionalDiscount>0?(R(),Ae("div",u7e,"Additional Discount:")):ye("",!0),x[20]||(x[20]=h("div",{class:"text-subtitle-1 font-weight-bold"},"Grand Total:",-1))]),_:1}),l(F,{cols:"4",class:"text-right"},{default:u(()=>[h("div",c7e,K(w(c.value.totals.subtotal)),1),h("div",d7e,K(w(c.value.totals.totalGST)),1),h("div",A7e,K(w(c.value.totals.subtotalWithGST)),1),c.value.totals.additionalDiscount>0?(R(),Ae("div",f7e,"-"+K(w(c.value.totals.additionalDiscount)),1)):ye("",!0),h("div",m7e,K(w(c.value.totals.netAmount)),1)]),_:1})]),_:1})):ye("",!0),h("div",v7e,[x[21]||(x[21]=h("strong",null,"Medicine Count:",-1)),O(" "+K(c.value.medicineCount||0)+" | ",1),x[22]||(x[22]=h("strong",null,"Batch Count:",-1)),O(" "+K(c.value.batchCount||0),1)])]),_:1})):ye("",!0),l(S),l(ie,{class:"pa-3"},{default:u(()=>[l(D,{color:"primary","prepend-icon":"mdi-plus",onClick:m},{default:u(()=>[...x[24]||(x[24]=[O(" Add Medicine Batch ",-1)])]),_:1}),l(ue),l(D,{color:"primary",variant:"outlined","prepend-icon":"mdi-pencil",onClick:v},{default:u(()=>[...x[25]||(x[25]=[O(" Edit Invoice ",-1)])]),_:1}),l(D,{onClick:f},{default:u(()=>[...x[26]||(x[26]=[O("Close",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),A.value?(R(),ve(GQe,{key:0,"invoice-id":e.invoiceId,onClose:x[1]||(x[1]=le=>A.value=!1),onSaved:p},null,8,["invoice-id"])):ye("",!0)],64)}}},p7e={key:1},g7e={class:"text-caption text-medium-emphasis"},y7e={class:"font-weight-medium"},_7e={class:"text-caption text-medium-emphasis"},w7e={key:0,class:"mb-0.5"},b7e={key:1,class:"mb-0.5"},x7e={key:2},C7e={__name:"pharmacy-add-medicine-batch",props:{purchaseInvoiceId:{type:Number,required:!0}},emits:["close","saved"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ca(),o=V(!0),i=V(!1),c=V(!1),A=V(!1),d=V(null),f=V(null),m=V(null),v=V([]),p=V(""),g=V({batchNumber:"",expiryDate:"",packType:"",unitsPerPack:1,mrp:null,discountPercentage:0,saleQuantityPacks:0,freeQuantityPacks:0,cgstPercentage:0,sgstPercentage:0,location:""}),y=V("0.00"),w=ne(()=>Number(y.value??0)||0),b=()=>{y.value=(Number(y.value??0)||0).toFixed(2)},x=ne(()=>{const ie=Number(g.value.cgstPercentage??0)||0,Q=Number(g.value.sgstPercentage??0)||0;return ie+Q}),T=ne(()=>{const ie=w.value||0,Q=Number(x.value??0)||0;return ie*(1+Q/100)}),D=ne(()=>(Number(T.value??0)||0).toFixed(2)),k=ne(()=>{const ie=g.value.saleQuantityPacks||0,Q=g.value.freeQuantityPacks||0;return ie+Q}),S=ne(()=>k.value*(g.value.unitsPerPack||1)),E=ne(()=>{const ie=g.value.saleQuantityPacks||0,Q=g.value.freeQuantityPacks||0,X=w.value||0,le=ie+Q;return le===0?null:X*ie/le});dn(async()=>{b(),await C(),await U()});const C=async()=>{A.value=!0;try{const{data:ie,error:Q}=await Lw();if(Q){console.error("Error loading pharmacy medicines:",Q),s("Failed to load pharmacy medicines");return}v.value=(ie||[]).map(X=>({id:X.id,productName:X.productName,marketer:X.marketer,productForm:X.productForm,group:X.group,hsnCode:X.hsnCode,displayName:X.productName}))}catch(ie){console.error("Error loading pharmacy medicines:",ie),showSnackbar("Failed to load pharmacy medicines","error")}finally{A.value=!1}},U=async()=>{try{const{data:ie}=await Eg(n.purchaseInvoiceId);ie&&(p.value=`${ie.pharmacyPurchaseInvoiceIdentifier} (${L(ie.pharmacyPurchaseInvoiceDate)})`)}catch(ie){console.error("Error loading invoice info:",ie)}},F=ie=>{m.value=v.value.find(Q=>Q.id===ie)},L=ie=>ie?new Date(ie*1e3).toLocaleDateString():"-",H=()=>{o.value=!1,a("close")},ue=async()=>{if(!d.value)return;const{valid:ie}=await d.value.validate();if(ie){if(!f.value){s("Please select a medicine");return}c.value=!0;try{const Q={medicineId:f.value,purchaseInvoiceId:n.purchaseInvoiceId,...g.value,priceToRetailer:Number(T.value??0)||0},{data:X,error:le}=await RH(Q);if(le)throw le;r("Batch added successfully"),a("saved"),H()}catch(Q){console.error("Error creating batch:",Q),s(Q.response?.data?.error||Q.message||"Failed to create batch")}finally{c.value=!1}}};return(ie,Q)=>{const X=I("v-icon"),le=I("v-btn"),Z=I("v-card-title"),re=I("v-divider"),q=I("v-text-field"),P=I("v-list-item-title"),G=I("v-list-item-subtitle"),J=I("v-list-item"),M=I("v-autocomplete"),te=I("v-col"),Y=I("v-select"),W=I("v-row"),ee=I("v-form"),ae=I("v-card-text"),oe=I("v-spacer"),j=I("v-card-actions"),ce=I("v-card"),de=I("v-dialog");return R(),ve(de,{modelValue:o.value,"onUpdate:modelValue":Q[14]||(Q[14]=_e=>o.value=_e),persistent:"","max-width":"800px",scrollable:""},{default:u(()=>[l(ce,{rounded:"lg"},{default:u(()=>[l(Z,{class:"d-flex align-center justify-space-between"},{default:u(()=>[Q[16]||(Q[16]=h("span",null,"Add Medicine Batch to Invoice",-1)),l(le,{onClick:H,variant:"text",size:"small"},{default:u(()=>[l(X,null,{default:u(()=>[...Q[15]||(Q[15]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(re),l(ae,{class:"py-1"},{default:u(()=>[l(ee,{ref_key:"form",ref:d,modelValue:i.value,"onUpdate:modelValue":Q[13]||(Q[13]=_e=>i.value=_e)},{default:u(()=>[e.purchaseInvoiceId?(R(),ve(q,{key:0,"model-value":p.value,label:"Purchase Invoice",variant:"outlined",density:"compact",readonly:"","prepend-inner-icon":"mdi-file-document",class:"mb-1"},null,8,["model-value"])):ye("",!0),l(M,{modelValue:f.value,"onUpdate:modelValue":[Q[0]||(Q[0]=_e=>f.value=_e),F],items:v.value,"item-value":"id","item-title":"productName",label:"Select Medicine *",variant:"outlined",density:"compact",rules:[_e=>!!_e||"Medicine selection is required"],"prepend-inner-icon":"mdi-pill",loading:A.value,class:"mb-1"},{selection:u(({item:_e})=>[O(K(_e.raw.productName),1)]),item:u(({props:_e,item:Re})=>[l(J,Yl(Jl({..._e,title:void 0})),{prepend:u(()=>[l(X,null,{default:u(()=>[...Q[17]||(Q[17]=[O("mdi-pill",-1)])]),_:1})]),default:u(()=>[l(P,{class:"text-wrap"},{default:u(()=>[O(K(Re.raw.productName),1)]),_:2},1024),l(G,{class:"text-wrap"},{default:u(()=>[O(K([Re.raw.marketer,Re.raw.group,Re.raw.productForm].filter(Boolean).join(" | ")||"No additional details"),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","items","rules","loading"]),f.value&&m.value?(R(),Ae("div",p7e,[l(re,{class:"my-1"}),Q[22]||(Q[22]=h("div",{class:"text-caption font-weight-medium mb-1"},"Batch Details",-1)),l(W,{dense:""},{default:u(()=>[l(te,{cols:"12",md:"6"},{default:u(()=>[l(q,{modelValue:g.value.batchNumber,"onUpdate:modelValue":Q[1]||(Q[1]=_e=>g.value.batchNumber=_e),label:"Batch Number *",variant:"outlined",density:"compact",rules:[_e=>!!_e||"Batch number is required"],"prepend-inner-icon":"mdi-barcode"},null,8,["modelValue","rules"])]),_:1}),l(te,{cols:"12",md:"6"},{default:u(()=>[l(q,{modelValue:g.value.expiryDate,"onUpdate:modelValue":Q[2]||(Q[2]=_e=>g.value.expiryDate=_e),type:"date",label:"Expiry Date *",variant:"outlined",density:"compact",rules:[_e=>!!_e||"Expiry date is required"],"prepend-inner-icon":"mdi-calendar"},null,8,["modelValue","rules"])]),_:1}),l(te,{cols:"12",md:"6"},{default:u(()=>[l(Y,{modelValue:g.value.packType,"onUpdate:modelValue":Q[3]||(Q[3]=_e=>g.value.packType=_e),items:Qe(Vw),label:"Pack Type *",variant:"outlined",density:"compact",rules:[_e=>!!_e||"Pack type is required"],"prepend-inner-icon":"mdi-package-variant"},null,8,["modelValue","items","rules"])]),_:1}),l(te,{cols:"12",md:"6"},{default:u(()=>[l(q,{modelValue:g.value.unitsPerPack,"onUpdate:modelValue":Q[4]||(Q[4]=_e=>g.value.unitsPerPack=_e),modelModifiers:{number:!0},label:"Units Per Pack *",variant:"outlined",density:"compact",type:"number",rules:[_e=>_e!=null&&_e>0||"Units per pack must be greater than 0"],"prepend-inner-icon":"mdi-numeric"},null,8,["modelValue","rules"])]),_:1}),l(te,{cols:"12",md:"6"},{default:u(()=>[l(q,{modelValue:g.value.mrp,"onUpdate:modelValue":Q[5]||(Q[5]=_e=>g.value.mrp=_e),modelModifiers:{number:!0},label:"MRP per Pack () *",variant:"outlined",density:"compact",type:"number",rules:[_e=>_e!=null&&_e>=0||"MRP must be a positive number"],"prepend-inner-icon":"mdi-currency-inr"},null,8,["modelValue","rules"])]),_:1}),l(te,{cols:"12",md:"6"},{default:u(()=>[l(q,{modelValue:g.value.discountPercentage,"onUpdate:modelValue":Q[6]||(Q[6]=_e=>g.value.discountPercentage=_e),modelModifiers:{number:!0},label:"Discount to Patients %",variant:"outlined",density:"compact",type:"number",rules:[_e=>_e==null||_e>=0&&_e<=100||"Discount must be between 0 and 100"],"prepend-inner-icon":"mdi-percent"},null,8,["modelValue","rules"])]),_:1}),l(te,{cols:"12",md:"6"},{default:u(()=>[l(q,{modelValue:g.value.saleQuantityPacks,"onUpdate:modelValue":Q[7]||(Q[7]=_e=>g.value.saleQuantityPacks=_e),modelModifiers:{number:!0},label:"Sale Quantity (Packs) *",variant:"outlined",density:"compact",type:"number",rules:[_e=>_e!=null&&_e>=0||"Sale quantity must be non-negative"],"prepend-inner-icon":"mdi-numeric"},null,8,["modelValue","rules"])]),_:1}),l(te,{cols:"12",md:"6"},{default:u(()=>[l(q,{modelValue:g.value.freeQuantityPacks,"onUpdate:modelValue":Q[8]||(Q[8]=_e=>g.value.freeQuantityPacks=_e),modelModifiers:{number:!0},label:"Free Quantity (Packs) *",variant:"outlined",density:"compact",type:"number",rules:[_e=>_e!=null&&_e>=0||"Free quantity must be non-negative"],"prepend-inner-icon":"mdi-numeric"},null,8,["modelValue","rules"])]),_:1}),l(te,{cols:"12",md:"6"},{default:u(()=>[l(q,{modelValue:g.value.cgstPercentage,"onUpdate:modelValue":Q[9]||(Q[9]=_e=>g.value.cgstPercentage=_e),modelModifiers:{number:!0},label:"CGST % *",variant:"outlined",density:"compact",type:"number",rules:[_e=>_e!=null||"CGST percentage is required"],"prepend-inner-icon":"mdi-percent"},null,8,["modelValue","rules"])]),_:1}),l(te,{cols:"12",md:"6"},{default:u(()=>[l(q,{modelValue:g.value.sgstPercentage,"onUpdate:modelValue":Q[10]||(Q[10]=_e=>g.value.sgstPercentage=_e),modelModifiers:{number:!0},label:"SGST % *",variant:"outlined",density:"compact",type:"number",rules:[_e=>_e!=null||"SGST percentage is required"],"prepend-inner-icon":"mdi-percent"},null,8,["modelValue","rules"])]),_:1}),l(te,{cols:"12",md:"6"},{default:u(()=>[l(q,{modelValue:y.value,"onUpdate:modelValue":Q[11]||(Q[11]=_e=>y.value=_e),label:"Price to Retailer (Excl. GST) () *",variant:"outlined",density:"compact",inputmode:"decimal",rules:[_e=>Number(_e)>=0||"Price to retailer (excl. GST) must be non-negative"],"prepend-inner-icon":"mdi-currency-inr",hint:"User input (excludes GST)","persistent-hint":"",onBlur:b},null,8,["modelValue","rules"])]),_:1}),l(te,{cols:"12",md:"6"},{default:u(()=>[h("div",g7e,[h("div",y7e,"Price to Retailer (Incl. GST): "+K(D.value),1),Q[18]||(Q[18]=h("div",null,"Computed using CGST + SGST",-1))])]),_:1}),l(te,{cols:"12"},{default:u(()=>[l(q,{modelValue:g.value.location,"onUpdate:modelValue":Q[12]||(Q[12]=_e=>g.value.location=_e),label:"Location",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-map-marker",hint:"Physical storage location (e.g., Shelf A-3, Room 1)","persistent-hint":""},null,8,["modelValue"])]),_:1}),l(te,{cols:"12",class:"pt-1"},{default:u(()=>[l(re,{class:"mb-1"}),h("div",_7e,[k.value>0?(R(),Ae("div",w7e,[Q[19]||(Q[19]=h("strong",null,"Total Quantity:",-1)),O(" "+K(k.value)+" packs ("+K(S.value)+" units) ",1)])):ye("",!0),E.value!==null?(R(),Ae("div",b7e,[Q[20]||(Q[20]=h("strong",null,"Cost per Pack (Excl. GST):",-1)),O(" "+K(E.value.toFixed(2)),1)])):ye("",!0),x.value!==null?(R(),Ae("div",x7e,[Q[21]||(Q[21]=h("strong",null,"GST %:",-1)),O(" "+K(x.value.toFixed(2))+"% ",1)])):ye("",!0)])]),_:1})]),_:1})])):ye("",!0)]),_:1},8,["modelValue"])]),_:1}),l(re),l(j,{class:"pa-3"},{default:u(()=>[l(oe),l(le,{onClick:H},{default:u(()=>[...Q[23]||(Q[23]=[O("Cancel",-1)])]),_:1}),l(le,{color:"primary",onClick:ue,disabled:!i.value||!f.value||c.value,loading:c.value},{default:u(()=>[...Q[24]||(Q[24]=[O(" Add Batch ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},S7e={class:"d-flex align-center"},E7e={class:"pr-3 d-flex"},B7e={class:"scrollable-content"},k7e={class:"text-center"},T7e={class:"text-center"},I7e={class:"text-body-2 text-medium-emphasis mb-4"},F7e={class:"text-center"},P7e={class:"d-flex align-center justify-space-between w-100"},D7e={class:"flex-grow-1"},U7e={class:"d-flex align-center"},R7e={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},N7e={class:"d-flex align-center"},V7e={key:0,class:"text-body-2 mb-2"},L7e={class:"d-flex align-center flex-wrap"},M7e={key:0,class:"text-medium-emphasis mr-2"},O7e={key:1,class:"text-medium-emphasis mr-2"},H7e={key:2,class:"text-medium-emphasis"},$7e={key:1},Q7e={class:"text-right"},G7e={class:"text-right"},z7e={class:"text-right"},K7e={class:"text-center"},W7e={key:2,class:"text-body-2 text-medium-emphasis text-center py-2"},j7e={__name:"pharmacy-purchase",setup(e){const t=V(0),n=V(null),a=V(!1),r=V(null),s=V([]),o=V(""),i=V(""),c=V(!1),A=V(!1),d=V(null),f=V(!1),m=V(null),v=V(null),p=V(!1),g=V(null),y=ne(()=>{let X=s.value;if(o.value&&o.value.trim()!==""){const le=o.value.toLowerCase();X=X.filter(Z=>Z.supplierName&&Z.supplierName.toLowerCase().includes(le))}if(i.value&&i.value.trim()!==""){const le=i.value.toLowerCase();X=X.map(Z=>{const re=(Z.invoices||[]).filter(q=>q.pharmacyPurchaseInvoiceIdentifier&&q.pharmacyPurchaseInvoiceIdentifier.toLowerCase().includes(le));return{...Z,invoices:re}}).filter(Z=>Z.invoices.length>0)}return X}),w=async()=>{a.value=!0,r.value=null;try{const{data:X,error:le}=await VH();if(le)throw le;const Z=await Promise.all((X||[]).map(async re=>{const{data:q}=await wEe({supplierId:re.id});return{...re,invoices:q||[]}}));s.value=Z}catch(X){console.error("Error loading suppliers:",X),r.value=X.response?.data?.error||X.message||"Failed to load suppliers"}finally{a.value=!1}},b=()=>{d.value=null,c.value=!0},x=()=>{c.value=!1,d.value=null},T=X=>{d.value=X,A.value=!0},D=()=>{A.value=!1,d.value=null},k=()=>{x(),D(),w()},S=X=>{m.value=X,f.value=!0},E=()=>{f.value=!1,m.value=null},C=()=>{E(),w()},U=X=>{v.value=X},F=()=>{v.value=null},L=X=>{g.value=X,p.value=!0},H=()=>{p.value=!1,g.value=null},ue=()=>{H(),v.value&&(F(),U(g.value)),w()},ie=X=>X?new Date(X*1e3).toLocaleDateString():"-",Q=X=>X==null?"0.00":`${X.toFixed(2)}`;return dn(()=>{w()}),(X,le)=>{const Z=I("v-alert"),re=I("v-tab"),q=I("v-tabs"),P=I("v-btn"),G=I("v-icon"),J=I("v-tooltip"),M=I("v-card"),te=I("v-col"),Y=I("v-row"),W=I("v-progress-circular"),ee=I("v-text-field"),ae=I("v-card-title"),oe=I("v-divider"),j=I("v-chip"),ce=I("v-table"),de=I("v-card-text"),_e=I("v-lazy"),Re=I("v-window-item"),be=I("v-window"),Ee=I("v-main");return R(),ve(Ee,null,{default:u(()=>[n.value?(R(),ve(Z,{key:0,type:"error",dismissible:"","onClick:close":le[0]||(le[0]=Ce=>n.value=null),class:"ma-3"},{default:u(()=>[O(K(n.value),1)]),_:1})):ye("",!0),l(Y,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[l(te,{cols:"12"},{default:u(()=>[l(M,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center justify-space-between"},{default:u(()=>[h("div",S7e,[l(q,{modelValue:t.value,"onUpdate:modelValue":le[1]||(le[1]=Ce=>t.value=Ce),color:"primary","align-tabs":"start"},{default:u(()=>[l(re,{value:0},{default:u(()=>[...le[5]||(le[5]=[O("Purchase",-1)])]),_:1})]),_:1},8,["modelValue"])]),h("div",E7e,[l(En,{permission:"pharmacy.purchase.create"},{default:u(()=>[l(P,{color:"primary","prepend-icon":"mdi-plus",onClick:b},{default:u(()=>[...le[6]||(le[6]=[O(" Add Supplier ",-1)])]),_:1})]),_:1}),l(J,{text:"Refresh"},{activator:u(({props:Ce})=>[l(P,Pe({rounded:"x-small",onClick:w,size:"small"},Ce,{loading:a.value,class:"btn-hover-enhanced ml-1"}),{default:u(()=>[l(G,null,{default:u(()=>[...le[7]||(le[7]=[O("mdi-refresh",-1)])]),_:1})]),_:1},16,["loading"])]),_:1})])]),_:1})]),_:1})]),_:1}),l(be,{modelValue:t.value,"onUpdate:modelValue":le[4]||(le[4]=Ce=>t.value=Ce),class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[l(Re,{value:0,style:{height:"100%"}},{default:u(()=>[h("div",B7e,[a.value?(R(),ve(Y,{key:0,"no-gutters":""},{default:u(()=>[l(te,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50vh"}},{default:u(()=>[h("div",k7e,[l(W,{indeterminate:"",color:"primary",size:"64"}),le[8]||(le[8]=h("div",{class:"mt-4 text-subtitle-1"},"Loading suppliers...",-1))])]),_:1})]),_:1})):r.value?(R(),ve(Y,{key:1,"no-gutters":""},{default:u(()=>[l(te,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50vh"}},{default:u(()=>[h("div",T7e,[l(G,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...le[9]||(le[9]=[O("mdi-alert-circle",-1)])]),_:1}),le[11]||(le[11]=h("div",{class:"text-h6 mb-2"},"Failed to Load Suppliers",-1)),h("div",I7e,K(r.value),1),l(P,{color:"primary",onClick:w,"prepend-icon":"mdi-refresh"},{default:u(()=>[...le[10]||(le[10]=[O(" Try Again ",-1)])]),_:1})])]),_:1})]),_:1})):y.value.length===0?(R(),ve(Y,{key:2,"no-gutters":""},{default:u(()=>[l(te,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50vh"}},{default:u(()=>[h("div",F7e,[l(G,{size:"64",color:"grey",class:"mb-4"},{default:u(()=>[...le[12]||(le[12]=[O("mdi-cart-off",-1)])]),_:1}),le[14]||(le[14]=h("div",{class:"text-h6 mb-2"},"No Suppliers",-1)),le[15]||(le[15]=h("div",{class:"text-body-2 text-medium-emphasis mb-4"},"Add suppliers to start managing purchase invoices",-1)),l(En,{permission:"pharmacy.purchase.create"},{default:u(()=>[l(P,{color:"primary",onClick:b,"prepend-icon":"mdi-plus"},{default:u(()=>[...le[13]||(le[13]=[O(" Add Supplier ",-1)])]),_:1})]),_:1})])]),_:1})]),_:1})):(R(),Ae(Ke,{key:3},[l(Y,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(te,{cols:"12",class:"d-flex justify-center align-center flex-wrap gap-2"},{default:u(()=>[l(ee,{modelValue:o.value,"onUpdate:modelValue":le[2]||(le[2]=Ce=>o.value=Ce),placeholder:"Filter by supplier name...",density:"compact",variant:"outlined",clearable:"","hide-details":"","prepend-inner-icon":"mdi-magnify",class:"filter-input",style:{"max-width":"300px",width:"100%"}},null,8,["modelValue"]),l(ee,{modelValue:i.value,"onUpdate:modelValue":le[3]||(le[3]=Ce=>i.value=Ce),placeholder:"Filter by invoice ID...",density:"compact",variant:"outlined",clearable:"","hide-details":"","prepend-inner-icon":"mdi-file-document",class:"filter-input",style:{"max-width":"300px",width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),(R(!0),Ae(Ke,null,Gt(y.value,Ce=>(R(),ve(_e,{key:Ce.id,options:{threshold:.1,rootMargin:"50px"}},{default:u(()=>[l(M,{style:{textAlign:"left"},density:"compact",class:"mb-1 mx-2 card-enhanced card-status-default",rounded:"lg"},{default:u(()=>[l(ae,{class:"pb-0 pt-2"},{default:u(()=>[h("div",P7e,[h("div",D7e,[h("div",U7e,[h("div",R7e,K(Ce.supplierName||"Unknown Supplier"),1),l(En,{permission:"pharmacy.purchase.create",tag:"span"},{default:u(()=>[l(J,{text:"Edit Supplier"},{activator:u(({props:Be})=>[l(G,Pe({size:"x-small"},{ref_for:!0},Be,{class:"edit-icon flex-shrink-0 ml-1",onClick:Te=>T(Ce),tabindex:"-1"}),{default:u(()=>[...le[16]||(le[16]=[O(" mdi-pencil ",-1)])]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024)])]),h("div",N7e,[l(En,{permission:"pharmacy.purchase.create"},{default:u(()=>[l(P,{color:"primary",variant:"outlined","prepend-icon":"mdi-file-document-plus",size:"small",onClick:Be=>S(Ce.id)},{default:u(()=>[...le[17]||(le[17]=[O(" Add Invoice ",-1)])]),_:1},8,["onClick"])]),_:2},1024)])])]),_:2},1024),l(de,{class:ct({"pt-1 pb-1":Ce.invoices&&Ce.invoices.length>0,"pa-0":!Ce.invoices||Ce.invoices.length===0})},{default:u(()=>[Ce.gstin||Ce.address||Ce.contactNumber?(R(),Ae("div",V7e,[h("div",L7e,[Ce.gstin&&Ce.gstin.trim()!==""?(R(),Ae("span",M7e," GSTIN: "+K(Ce.gstin),1)):ye("",!0),Ce.address?(R(),Ae("span",O7e," Address: "+K(Ce.address),1)):ye("",!0),Ce.contactNumber?(R(),Ae("span",H7e," Contact No.: "+K(Ce.contactNumber),1)):ye("",!0)])])):ye("",!0),Ce.invoices&&Ce.invoices.length>0?(R(),Ae("div",$7e,[Ce.address||Ce.contactNumber?(R(),ve(oe,{key:0,class:"mb-2"})):ye("",!0),l(ce,{density:"compact",class:"batch-table compact-table"},{default:u(()=>[le[18]||(le[18]=h("thead",null,[h("tr",null,[h("th",{class:"text-left"},"Date"),h("th",{class:"text-left"},"Invoice ID"),h("th",{class:"text-left"},"Status"),h("th",{class:"text-right"},"Total Amount"),h("th",{class:"text-right"},"Batches"),h("th",{class:"text-right"},"Medicines"),h("th",{class:"text-center"},"Actions")])],-1)),h("tbody",null,[(R(!0),Ae(Ke,null,Gt(Ce.invoices,Be=>(R(),Ae("tr",{key:Be.id},[h("td",null,K(ie(Be.pharmacyPurchaseInvoiceDate)),1),h("td",null,K(Be.pharmacyPurchaseInvoiceIdentifier),1),h("td",null,[l(j,{color:Be.status===2?"success":"warning",size:"small",variant:"tonal"},{default:u(()=>[O(K(Be.statusLabel||"Draft"),1)]),_:2},1032,["color"])]),h("td",Q7e,K(Q(Be.totalAmount||0)),1),h("td",G7e,K(Be.batchCount||0),1),h("td",z7e,K(Be.medicineCount||0),1),h("td",K7e,[l(En,{feature:"pharmacy.purchase",tag:"span"},{default:u(()=>[l(J,{text:"View Invoice"},{activator:u(({props:Te})=>[l(P,Pe({icon:"mdi-eye",size:"small",variant:"text",onClick:Oe=>U(Be.id),class:"mr-1"},{ref_for:!0},Te),null,16,["onClick"])]),_:2},1024)]),_:2},1024),l(En,{permission:"pharmacy.purchase.create",tag:"span"},{default:u(()=>[l(J,{text:"Add Medicine Batch"},{activator:u(({props:Te})=>[l(P,Pe({icon:"mdi-plus",size:"small",variant:"text",onClick:Oe=>L(Be.id)},{ref_for:!0},Te),null,16,["onClick"])]),_:2},1024)]),_:2},1024)])]))),128))])]),_:2},1024)])):(R(),Ae("div",W7e,' No purchase invoices yet. Click on "Add Invoice" to create one. '))]),_:2},1032,["class"])]),_:2},1024)]),_:2},1024))),128))],64))])]),_:1})]),_:1},8,["modelValue"]),c.value?(R(),ve(OQe,{key:1,supplier:d.value,onClose:x,onSaved:k},null,8,["supplier"])):ye("",!0),A.value?(R(),ve(HQe,{key:2,supplier:d.value,onClose:D,onSaved:k},null,8,["supplier"])):ye("",!0),f.value?(R(),ve($Qe,{key:3,"supplier-id":m.value,onClose:E,onSaved:C},null,8,["supplier-id"])):ye("",!0),v.value?(R(),ve(h7e,{key:4,"invoice-id":v.value,onClose:F,onUpdated:C,onAddBatch:L},null,8,["invoice-id"])):ye("",!0),p.value?(R(),ve(C7e,{key:5,"purchase-invoice-id":g.value,onClose:H,onSaved:ue},null,8,["purchase-invoice-id"])):ye("",!0)]),_:1})}}},q7e=qt(j7e,[["__scopeId","data-v-85b63955"]]),Y7e={class:"mb-4"},X7e={class:"mb-4"},J7e={key:0,class:"text-caption text-medium-emphasis mt-2"},Z7e={key:1,class:"text-caption text-medium-emphasis mt-2"},eGe={class:"d-flex justify-center mt-2 mb-2"},tGe={class:"d-flex justify-center mt-2"},nGe={key:0,class:"mt-4"},aGe={class:"text-caption text-medium-emphasis"},rGe={key:0},sGe={key:1},oGe={key:2},iGe={__name:"PharmacyReportFilter",props:{filters:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},emits:["filter-change","start-report","clear-filters"],setup(e,{emit:t}){const n=e,a=t,r=V({reportType:"",startDate:"",endDate:"",...n.filters}),s=V([{label:"Medicine Wise Sales Report",value:"sales-report"},{label:"Billing Report",value:"billing-report"},{label:"Payment Report",value:"payment-report"},{label:"Inventory Transactions Report",value:"inventory-report"},{label:"Expired Inventory Report",value:"expired-inventory-report"},{label:"Purchase Bill Report",value:"purchase-bill-report"},{label:"HSN-wise GST Report",value:"hsn-wise-gst-report"},{label:"Rate-wise GST Report",value:"rate-wise-gst-report"},{label:"Inventory Snapshot Report",value:"inventory-snapshot-report"}]),o=ne(()=>r.value.reportType?r.value.reportType==="expired-inventory-report"||r.value.reportType==="inventory-snapshot-report"?!0:!!(r.value.startDate&&r.value.endDate):!1);je(()=>n.filters,m=>{r.value={...r.value,...m}},{deep:!0});const i=()=>{a("filter-change",{...r.value})},c=()=>{o.value&&a("start-report",{...r.value})},A=()=>{r.value={reportType:"",startDate:"",endDate:""},a("clear-filters"),i()},d=m=>{const v=s.value.find(p=>p.value===m);return v?v.label:m},f=m=>m?new Date(m).toLocaleDateString():"";return(m,v)=>{const p=I("v-card-text"),g=I("v-card"),y=I("v-label"),w=I("v-icon"),b=I("v-select"),x=I("v-text-field"),T=I("v-col"),D=I("v-row"),k=I("v-divider"),S=I("v-btn"),E=I("v-card-title"),C=I("v-form");return R(),ve(g,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[l(g,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(p,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...v[3]||(v[3]=[h("strong",null,"Report Configuration",-1)])]),_:1})]),_:1}),l(p,{class:"pa-4"},{default:u(()=>[l(C,{onSubmit:vn(c,["prevent"])},{default:u(()=>[h("div",Y7e,[l(y,{class:"text-subtitle-2 font-weight-medium mb-2"},{default:u(()=>[...v[4]||(v[4]=[O("Report Type",-1)])]),_:1}),l(b,{modelValue:r.value.reportType,"onUpdate:modelValue":[v[0]||(v[0]=U=>r.value.reportType=U),i],items:s.value,"item-title":"label","item-value":"value",variant:"outlined",density:"comfortable"},{"prepend-inner":u(()=>[l(w,{color:"primary"},{default:u(()=>[...v[5]||(v[5]=[O("mdi-chart-line",-1)])]),_:1})]),_:1},8,["modelValue","items"])]),h("div",X7e,[l(y,{class:"text-subtitle-2 font-weight-medium mb-2"},{default:u(()=>[r.value.reportType==="expired-inventory-report"||r.value.reportType==="inventory-snapshot-report"?(R(),Ae(Ke,{key:0},[O(" Snapshot Report (Current Date) ")],64)):(R(),Ae(Ke,{key:1},[O(" Select Date Range ")],64))]),_:1}),l(D,{"no-gutters":"",class:"ga-2"},{default:u(()=>[l(T,{cols:"6"},{default:u(()=>[l(x,{modelValue:r.value.startDate,"onUpdate:modelValue":[v[1]||(v[1]=U=>r.value.startDate=U),i],type:"date",label:"Start Date",variant:"outlined",density:"comfortable",disabled:r.value.reportType==="expired-inventory-report"||r.value.reportType==="inventory-snapshot-report"},null,8,["modelValue","disabled"])]),_:1}),l(T,{cols:"6"},{default:u(()=>[l(x,{modelValue:r.value.endDate,"onUpdate:modelValue":[v[2]||(v[2]=U=>r.value.endDate=U),i],type:"date",label:"End Date",variant:"outlined",density:"comfortable",disabled:r.value.reportType==="expired-inventory-report"||r.value.reportType==="inventory-snapshot-report"},null,8,["modelValue","disabled"])]),_:1})]),_:1}),r.value.reportType==="expired-inventory-report"?(R(),Ae("div",J7e," This report shows expired/expiring batches as of today (IST). Date range selection is not applicable. ")):ye("",!0),r.value.reportType==="inventory-snapshot-report"?(R(),Ae("div",Z7e," This report shows current inventory state as of today. Date range selection is not applicable. ")):ye("",!0)]),l(k,{class:"my-4"}),h("div",eGe,[l(S,{type:"submit",color:"primary",loading:e.loading,disabled:!o.value,"prepend-icon":"mdi-chart-line",class:"btn-hover-enhanced"},{default:u(()=>[...v[6]||(v[6]=[O(" Generate Report ",-1)])]),_:1},8,["loading","disabled"])]),h("div",tGe,[l(S,{variant:"outlined",color:"secondary",onClick:A,"prepend-icon":"mdi-filter-remove",class:"btn-hover-enhanced"},{default:u(()=>[...v[7]||(v[7]=[O(" Clear All Filters ",-1)])]),_:1})]),r.value.reportType?(R(),Ae("div",nGe,[l(g,{variant:"outlined",class:"pa-3"},{default:u(()=>[l(E,{class:"text-subtitle-2 pa-0"},{default:u(()=>[...v[8]||(v[8]=[O("Report Preview",-1)])]),_:1}),l(p,{class:"pa-0 pt-2"},{default:u(()=>[h("div",aGe,[h("div",null,[v[9]||(v[9]=h("strong",null,"Type:",-1)),O(" "+K(d(r.value.reportType)),1)]),r.value.reportType==="expired-inventory-report"?(R(),Ae("div",rGe,[...v[10]||(v[10]=[h("strong",null,"Report Type:",-1),O(" Snapshot (Current Date - IST) ",-1)])])):ye("",!0),r.value.reportType==="inventory-snapshot-report"?(R(),Ae("div",sGe,[...v[11]||(v[11]=[h("strong",null,"Report Type:",-1),O(" Snapshot (Current Date) ",-1)])])):r.value.startDate&&r.value.endDate?(R(),Ae("div",oGe,[v[12]||(v[12]=h("strong",null,"Date Range:",-1)),O(" "+K(f(r.value.startDate))+" - "+K(f(r.value.endDate)),1)])):ye("",!0)])]),_:1})]),_:1})])):ye("",!0)]),_:1})]),_:1})]),_:1})}}},lGe=qt(iGe,[["__scopeId","data-v-8619668a"]]),uGe={class:"scrollable-content"},cGe={class:"scrollable-content"},dGe={key:1},AGe={class:"text-center"},fGe={class:"mt-4 text-subtitle-1"},mGe={key:0,class:"mt-4"},vGe={class:"mb-2"},hGe={class:"mb-2"},pGe={key:0,class:"mb-2"},gGe={key:1},yGe={class:"text-center"},_Ge={__name:"pharmacy-reports",setup(e){ra();const t=V(!1),n=V(""),a=V(!1),r=V(""),s=V(!1),o=V(0),i=V(""),c=V([]),A=V(null),d=V(!1),f=V({reportType:"",startDate:"",endDate:""}),m=V([{title:"Date",key:"date",sortable:!0},{title:"Report Type",key:"reportType",sortable:!0},{title:"Format",key:"format",sortable:!0},{title:"Records",key:"recordCount",sortable:!0},{title:"Status",key:"status",sortable:!0}]),v=W=>{f.value={...f.value,...W}},p=()=>{f.value={reportType:"",startDate:"",endDate:""}},g=async W=>{try{if(s.value=!0,o.value=0,i.value="Preparing report...",A.value=null,d.value=!1,console.log("Starting pharmacy report generation with filters:",W),W.reportType!=="expired-inventory-report"&&W.reportType!=="inventory-snapshot-report"){if(!W.startDate||!W.endDate)throw new Error("Please select both start and end dates for the report");const ee=new Date(W.startDate),ae=new Date(W.endDate);if(ee>ae)throw new Error("Start date must be less than or equal to end date")}if(W.reportType==="sales-report")await y(W);else if(W.reportType==="billing-report")await x(W);else if(W.reportType==="payment-report")await k(W);else if(W.reportType==="inventory-report")await C(W);else if(W.reportType==="expired-inventory-report")await L(W);else if(W.reportType==="purchase-bill-report")await ue(W);else if(W.reportType==="hsn-wise-gst-report")await X(W);else if(W.reportType==="rate-wise-gst-report")await re(W);else if(W.reportType==="inventory-snapshot-report")await G(W);else throw new Error("Invalid report type selected")}catch(ee){console.error("Report generation error:",ee),s.value=!1,o.value=0,i.value="",d.value=!1,a.value=!0,r.value="Report generation failed: "+ee.message}finally{setTimeout(()=>{d.value&&(s.value=!1)},1500)}},y=async W=>{try{o.value=20,i.value="Fetching medicine-wise sales data...";const ee=await At.get("/pharmacy/reports/medicine-wise-sales",{params:{startDate:W.startDate,endDate:W.endDate}});if(ee.data.success===!1)throw new Error(ee.data.error||"Failed to fetch medicine-wise sales data");const ae=ee.data.data||[];o.value=60,i.value="Processing sales data...",o.value=80,i.value="Generating CSV file...";const oe=w(ae);o.value=90,i.value="Preparing download...";const j=`medicine_wise_sales_report_${W.startDate}_to_${W.endDate}.csv`,ce=await b(oe,j);if(!ce.success)throw new Error(ce.error||"Failed to save report file");o.value=100,i.value="Medicine Wise Sales Report generated successfully!",A.value={reportType:"Medicine Wise Sales Report",totalRecords:ae.length,dateRange:{from:W.startDate,to:W.endDate},filename:j},d.value=!0;const de={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"Medicine Wise Sales Report",format:"CSV",recordCount:ae.length,status:"Completed",filename:j};c.value.unshift(de),t.value=!0,n.value=`Medicine Wise Sales Report generated successfully! ${ae.length} records included.`}catch(ee){throw console.error("Medicine Wise Sales Report generation error:",ee),ee}},w=W=>{const ae=[["MedicineName","Company","GenericName","HSN","Group","BillID","BillDate","PatientName","DoctorName","BatchDetails","ExpiryDate","InwardBillID","MRP/unit","Cost/unit","Quantity","Discount%","TotalTaxableValue","GST Rate %","GSTAmount","Total Amount","CostAmount","ProfitAmount"].join(",")];return W.forEach(oe=>{const j=[te(oe.MedicineName),te(oe.Company),te(oe.GenericName),te(oe.HSN),te(oe.Group),te(oe.BillID),oe.BillDate,te(oe.PatientName),te(oe.DoctorName),te(oe.BatchDetails),oe.ExpiryDate,te(oe.InwardBillID),oe.MRPPerUnit,oe.CostPerUnit,oe.Quantity,oe.DiscountPercentage,oe.TotalTaxableValue,oe.GSTRatePercentage,oe.GSTAmount,oe.TotalAmount,oe.CostAmount,oe.ProfitAmount];ae.push(j.join(","))}),ae.join(`
`)},b=async(W,ee)=>{try{const ae=new Blob([W],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const oe=await window.electronAPI.showSaveDialog({defaultPath:ee,filters:[{name:"CSV Files",extensions:["csv"]}]});return!oe.canceled&&oe.filePath?(await window.electronAPI.writeFile(oe.filePath,W),{success:!0,filePath:oe.filePath,filename:ee}):{success:!1,error:"Save canceled by user"}}else{const oe=document.createElement("a"),j=URL.createObjectURL(ae);return oe.setAttribute("href",j),oe.setAttribute("download",ee),oe.style.visibility="hidden",document.body.appendChild(oe),oe.click(),document.body.removeChild(oe),URL.revokeObjectURL(j),{success:!0,filePath:`Downloaded: ${ee}`,filename:ee}}}catch(ae){return console.error("Error saving Sales Report file:",ae),{success:!1,error:ae.message}}},x=async W=>{try{o.value=20,i.value="Fetching billing data...";const ee=await At.get("/pharmacy/reports/billing",{params:{startDate:W.startDate,endDate:W.endDate}});if(ee.data.success===!1)throw new Error(ee.data.error||"Failed to fetch billing data");const ae=ee.data.data||[];o.value=60,i.value="Processing billing data...",o.value=80,i.value="Generating CSV file...";const oe=T(ae);o.value=90,i.value="Preparing download...";const j=`billing_report_${W.startDate}_to_${W.endDate}.csv`,ce=await D(oe,j);if(!ce.success)throw new Error(ce.error||"Failed to save report file");o.value=100,i.value="Billing Report generated successfully!",A.value={reportType:"Billing Report",totalRecords:ae.length,dateRange:{from:W.startDate,to:W.endDate},filename:j},d.value=!0;const de={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"Billing Report",format:"CSV",recordCount:ae.length,status:"Completed",filename:j};c.value.unshift(de),t.value=!0,n.value=`Billing Report generated successfully! ${ae.length} records included.`}catch(ee){throw console.error("Billing Report generation error:",ee),ee}},T=W=>{const ae=[["BillID","BillDate","PatientName","DoctorName","TotalMRP","TotalDiscount","TotalTaxableValue","TotalGST","AdditionalDiscount","NetAmount","Roundoff","FinalAmount"].join(",")];return W.forEach(oe=>{const j=[te(oe.BillID),oe.BillDate,te(oe.PatientName),te(oe.DoctorName),oe.TotalMRP,oe.TotalDiscount,oe.TotalTaxableValue,oe.TotalGST,oe.AdditionalDiscount,oe.NetAmount,oe.Roundoff,oe.FinalAmount];ae.push(j.join(","))}),ae.join(`
`)},D=async(W,ee)=>{try{const ae=new Blob([W],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const oe=await window.electronAPI.showSaveDialog({defaultPath:ee,filters:[{name:"CSV Files",extensions:["csv"]}]});return!oe.canceled&&oe.filePath?(await window.electronAPI.writeFile(oe.filePath,W),{success:!0,filePath:oe.filePath,filename:ee}):{success:!1,error:"Save canceled by user"}}else{const oe=document.createElement("a"),j=URL.createObjectURL(ae);return oe.setAttribute("href",j),oe.setAttribute("download",ee),oe.style.visibility="hidden",document.body.appendChild(oe),oe.click(),document.body.removeChild(oe),URL.revokeObjectURL(j),{success:!0,filePath:`Downloaded: ${ee}`,filename:ee}}}catch(ae){return console.error("Error saving Billing Report file:",ae),{success:!1,error:ae.message}}},k=async W=>{try{o.value=20,i.value="Fetching payment data...";const ee=await At.get("/pharmacy/reports/payment",{params:{startDate:W.startDate,endDate:W.endDate}});if(ee.data.success===!1)throw new Error(ee.data.error||"Failed to fetch payment data");const ae=ee.data.data||[];o.value=60,i.value="Processing payment data...",o.value=80,i.value="Generating CSV file...";const oe=S(ae);o.value=90,i.value="Preparing download...";const j=`payment_report_${W.startDate}_to_${W.endDate}.csv`,ce=await E(oe,j);if(!ce.success)throw new Error(ce.error||"Failed to save report file");o.value=100,i.value="Payment Report generated successfully!",A.value={reportType:"Payment Report",totalRecords:ae.length,dateRange:{from:W.startDate,to:W.endDate},filename:j},d.value=!0;const de={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"Payment Report",format:"CSV",recordCount:ae.length,status:"Completed",filename:j};c.value.unshift(de),t.value=!0,n.value=`Payment Report generated successfully! ${ae.length} records included.`}catch(ee){throw console.error("Payment Report generation error:",ee),ee}},S=W=>{const ae=[["BillID","BillDate","PatientName","Total Amount","Cash","Card","UPI","Bank Transfer","Cheque","Online","Other"].join(",")];return W.forEach(oe=>{const j=[te(oe.BillID),oe.BillDate,te(oe.PatientName),oe.TotalAmount,oe.Cash,oe.Card,oe.UPI,oe.BankTransfer,oe.Cheque,oe.Online,oe.Other];ae.push(j.join(","))}),ae.join(`
`)},E=async(W,ee)=>{try{const ae=new Blob([W],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const oe=await window.electronAPI.showSaveDialog({defaultPath:ee,filters:[{name:"CSV Files",extensions:["csv"]}]});return!oe.canceled&&oe.filePath?(await window.electronAPI.writeFile(oe.filePath,W),{success:!0,filePath:oe.filePath,filename:ee}):{success:!1,error:"Save canceled by user"}}else{const oe=document.createElement("a"),j=URL.createObjectURL(ae);return oe.setAttribute("href",j),oe.setAttribute("download",ee),oe.style.visibility="hidden",document.body.appendChild(oe),oe.click(),document.body.removeChild(oe),URL.revokeObjectURL(j),{success:!0,filePath:`Downloaded: ${ee}`,filename:ee}}}catch(ae){return console.error("Error saving Payment Report file:",ae),{success:!1,error:ae.message}}},C=async W=>{try{o.value=20,i.value="Fetching inventory transactions data...";const ee=await At.get("/pharmacy/reports/inventory-transactions",{params:{startDate:W.startDate,endDate:W.endDate}});if(ee.data.success===!1)throw new Error(ee.data.error||"Failed to fetch inventory transactions data");const ae=ee.data.data||[];o.value=60,i.value="Processing inventory transactions data...",o.value=80,i.value="Generating CSV file...";const oe=U(ae);o.value=90,i.value="Preparing download...";const j=`inventory_transactions_report_${W.startDate}_to_${W.endDate}.csv`,ce=await F(oe,j);if(!ce.success)throw new Error(ce.error||"Failed to save report file");o.value=100,i.value="Inventory Transactions Report generated successfully!",A.value={reportType:"Inventory Transactions Report",totalRecords:ae.length,dateRange:{from:W.startDate,to:W.endDate},filename:j},d.value=!0;const de={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"Inventory Transactions Report",format:"CSV",recordCount:ae.length,status:"Completed",filename:j};c.value.unshift(de),t.value=!0,n.value=`Inventory Transactions Report generated successfully! ${ae.length} records included.`}catch(ee){throw console.error("Inventory Transactions Report generation error:",ee),ee}},U=W=>{const ae=[["Transaction Date","Medicine Name","Batch ID","Transaction Type","Quantity","Note","Inward Bill ID"].join(",")];return W.forEach(oe=>{const j=[oe.transactionDate,te(oe.medicineName),te(oe.batchId),te(oe.transactionType),oe.quantity,te(oe.note),te(oe.inwardBillId)];ae.push(j.join(","))}),ae.join(`
`)},F=async(W,ee)=>{try{const ae=new Blob([W],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const oe=await window.electronAPI.showSaveDialog({defaultPath:ee,filters:[{name:"CSV Files",extensions:["csv"]}]});return!oe.canceled&&oe.filePath?(await window.electronAPI.writeFile(oe.filePath,W),{success:!0,filePath:oe.filePath,filename:ee}):{success:!1,error:"Save canceled by user"}}else{const oe=document.createElement("a"),j=URL.createObjectURL(ae);return oe.setAttribute("href",j),oe.setAttribute("download",ee),oe.style.visibility="hidden",document.body.appendChild(oe),oe.click(),document.body.removeChild(oe),URL.revokeObjectURL(j),{success:!0,filePath:`Downloaded: ${ee}`,filename:ee}}}catch(ae){return console.error("Error saving Inventory Transactions Report file:",ae),{success:!1,error:ae.message}}},L=async W=>{try{o.value=20,i.value="Fetching expired inventory data...";const ee=await At.get("/pharmacy/reports/expired-inventory");if(ee.data.success===!1)throw new Error(ee.data.error||"Failed to fetch expired inventory data");const ae=ee.data.data||[];o.value=60,i.value="Processing expired inventory data...",o.value=80,i.value="Generating CSV file...";const oe=H(ae);o.value=90,i.value="Preparing download...";const j=Rn(),ce=`expired_inventory_report_${j}.csv`,de=await Y(oe,ce);if(!de.success)throw new Error(de.error||"Failed to save report file");o.value=100,i.value="Expired Inventory Report generated successfully!",A.value={reportType:"Expired Inventory Report",totalRecords:ae.length,dateRange:{from:j,to:j},filename:ce},d.value=!0;const _e={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"Expired Inventory Report",format:"CSV",recordCount:ae.length,status:"Completed",filename:ce};c.value.unshift(_e),t.value=!0,n.value=`Expired Inventory Report generated successfully! ${ae.length} records included.`}catch(ee){throw console.error("Expired Inventory Report generation error:",ee),ee}},H=W=>{const ae=[["Medicine Name","Company Name","Batch ID","Expiry Date","MRP","cost excl. GST","GST%","cost incl. GST","Inventory Quantity"].join(",")];return W.forEach(oe=>{const j=[te(oe.medicineName),te(oe.companyName),te(oe.batchId),oe.expiryDate,oe.mrp,oe["cost excl. GST"]||0,oe["GST%"]||0,oe["cost incl. GST"]||0,oe.inventoryQuantity];ae.push(j.join(","))}),ae.join(`
`)},ue=async W=>{try{o.value=20,i.value="Fetching purchase bill data...";const ee=await At.get("/pharmacy/reports/purchase-bill",{params:{startDate:W.startDate,endDate:W.endDate}});if(ee.data.success===!1)throw new Error(ee.data.error||"Failed to fetch purchase bill data");const ae=ee.data.data||[];o.value=60,i.value="Processing purchase bill data...",o.value=80,i.value="Generating CSV file...";const oe=ie(ae);o.value=90,i.value="Preparing download...";const j=`purchase_bill_report_${W.startDate}_to_${W.endDate}.csv`,ce=await Q(oe,j);if(!ce.success)throw new Error(ce.error||"Failed to save report file");o.value=100,i.value="Purchase Bill Report generated successfully!",A.value={reportType:"Purchase Bill Report",totalRecords:ae.length,dateRange:{from:W.startDate,to:W.endDate},filename:j},d.value=!0;const de={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"Purchase Bill Report",format:"CSV",recordCount:ae.length,status:"Completed",filename:j};c.value.unshift(de),t.value=!0,n.value=`Purchase Bill Report generated successfully! ${ae.length} records included.`}catch(ee){throw console.error("Purchase Bill Report generation error:",ee),ee}},ie=W=>{const ae=[["SupplierName","SupplierGSTIN","TotalMRP","TotalTaxableValue","TotalGST","AdditionalDiscount","NetAmount"].join(",")];return W.forEach(oe=>{const j=[te(oe.SupplierName),te(oe.SupplierGSTIN),oe.TotalMRP,oe.TotalTaxableValue,oe.TotalGST,oe.AdditionalDiscount,oe.NetAmount];ae.push(j.join(","))}),ae.join(`
`)},Q=async(W,ee)=>{try{const ae=new Blob([W],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const oe=await window.electronAPI.showSaveDialog({defaultPath:ee,filters:[{name:"CSV Files",extensions:["csv"]}]});return!oe.canceled&&oe.filePath?(await window.electronAPI.writeFile(oe.filePath,W),{success:!0,filePath:oe.filePath,filename:ee}):{success:!1,error:"Save canceled by user"}}else{const oe=document.createElement("a"),j=URL.createObjectURL(ae);return oe.setAttribute("href",j),oe.setAttribute("download",ee),oe.style.visibility="hidden",document.body.appendChild(oe),oe.click(),document.body.removeChild(oe),URL.revokeObjectURL(j),{success:!0,filePath:`Downloaded: ${ee}`,filename:ee}}}catch(ae){return console.error("Error saving Purchase Bill Report file:",ae),{success:!1,error:ae.message}}},X=async W=>{try{o.value=20,i.value="Fetching HSN-wise GST data...";const ee=await At.get("/pharmacy/reports/hsn-wise-gst",{params:{startDate:W.startDate,endDate:W.endDate}});if(ee.data.success===!1)throw new Error(ee.data.error||"Failed to fetch HSN-wise GST data");const ae=ee.data.data||[];o.value=60,i.value="Processing HSN-wise GST data...",o.value=80,i.value="Generating CSV file...";const oe=le(ae);o.value=90,i.value="Preparing download...";const j=`hsn_wise_gst_report_${W.startDate}_to_${W.endDate}.csv`,ce=await Z(oe,j);if(!ce.success)throw new Error(ce.error||"Failed to save report file");o.value=100,i.value="HSN-wise GST Report generated successfully!",A.value={reportType:"HSN-wise GST Report",totalRecords:ae.length,dateRange:{from:W.startDate,to:W.endDate},filename:j},d.value=!0;const de={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"HSN-wise GST Report",format:"CSV",recordCount:ae.length,status:"Completed",filename:j};c.value.unshift(de),t.value=!0,n.value=`HSN-wise GST Report generated successfully! ${ae.length} records included.`}catch(ee){throw console.error("HSN-wise GST Report generation error:",ee),ee}},le=W=>{const ae=[["HSN","TotalQuantity","TotalTaxableValue","GSTAmount","TotalAmount"].join(",")];return W.forEach(oe=>{const j=[te(oe.HSN),oe.TotalQuantity,oe.TotalTaxableValue,oe.GSTAmount,oe.TotalAmount];ae.push(j.join(","))}),ae.join(`
`)},Z=async(W,ee)=>{try{const ae=new Blob([W],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const oe=await window.electronAPI.showSaveDialog({defaultPath:ee,filters:[{name:"CSV Files",extensions:["csv"]}]});return!oe.canceled&&oe.filePath?(await window.electronAPI.writeFile(oe.filePath,W),{success:!0,filePath:oe.filePath,filename:ee}):{success:!1,error:"Save canceled by user"}}else{const oe=document.createElement("a"),j=URL.createObjectURL(ae);return oe.setAttribute("href",j),oe.setAttribute("download",ee),oe.style.visibility="hidden",document.body.appendChild(oe),oe.click(),document.body.removeChild(oe),URL.revokeObjectURL(j),{success:!0,filePath:`Downloaded: ${ee}`,filename:ee}}}catch(ae){return console.error("Error saving HSN-wise GST Report file:",ae),{success:!1,error:ae.message}}},re=async W=>{try{o.value=20,i.value="Fetching rate-wise GST data...";const ee=await At.get("/pharmacy/reports/rate-wise-gst",{params:{startDate:W.startDate,endDate:W.endDate}});if(ee.data.success===!1)throw new Error(ee.data.error||"Failed to fetch rate-wise GST data");const ae=ee.data.data||[];o.value=60,i.value="Processing rate-wise GST data...",o.value=80,i.value="Generating CSV file...";const oe=q(ae);o.value=90,i.value="Preparing download...";const j=`rate_wise_gst_report_${W.startDate}_to_${W.endDate}.csv`,ce=await P(oe,j);if(!ce.success)throw new Error(ce.error||"Failed to save report file");o.value=100,i.value="Rate-wise GST Report generated successfully!",A.value={reportType:"Rate-wise GST Report",totalRecords:ae.length,dateRange:{from:W.startDate,to:W.endDate},filename:j},d.value=!0;const de={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"Rate-wise GST Report",format:"CSV",recordCount:ae.length,status:"Completed",filename:j};c.value.unshift(de),t.value=!0,n.value=`Rate-wise GST Report generated successfully! ${ae.length} records included.`}catch(ee){throw console.error("Rate-wise GST Report generation error:",ee),ee}},q=W=>{const ae=[["GST%","TotalTaxableValue","GSTAmount","TotalAmount"].join(",")];return W.forEach(oe=>{const j=[oe["GST%"],oe.TotalTaxableValue,oe.GSTAmount,oe.TotalAmount];ae.push(j.join(","))}),ae.join(`
`)},P=async(W,ee)=>{try{const ae=new Blob([W],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const oe=await window.electronAPI.showSaveDialog({defaultPath:ee,filters:[{name:"CSV Files",extensions:["csv"]}]});return!oe.canceled&&oe.filePath?(await window.electronAPI.writeFile(oe.filePath,W),{success:!0,filePath:oe.filePath,filename:ee}):{success:!1,error:"Save canceled by user"}}else{const oe=document.createElement("a"),j=URL.createObjectURL(ae);return oe.setAttribute("href",j),oe.setAttribute("download",ee),oe.style.visibility="hidden",document.body.appendChild(oe),oe.click(),document.body.removeChild(oe),URL.revokeObjectURL(j),{success:!0,filePath:`Downloaded: ${ee}`,filename:ee}}}catch(ae){return console.error("Error saving Rate-wise GST Report file:",ae),{success:!1,error:ae.message}}},G=async W=>{try{o.value=20,i.value="Fetching inventory snapshot data...";const ee=await At.get("/pharmacy/reports/inventory-snapshot");if(ee.data.success===!1)throw new Error(ee.data.error||"Failed to fetch inventory snapshot data");const ae=ee.data.data||[];o.value=60,i.value="Processing inventory snapshot data...",o.value=80,i.value="Generating CSV file...";const oe=J(ae);o.value=90,i.value="Preparing download...";const j=Rn(),ce=`inventory_snapshot_report_${j}.csv`,de=await M(oe,ce);if(!de.success)throw new Error(de.error||"Failed to save report file");o.value=100,i.value="Inventory Snapshot Report generated successfully!",A.value={reportType:"Inventory Snapshot Report",totalRecords:ae.length,dateRange:{from:j,to:j},filename:ce},d.value=!0;const _e={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"Inventory Snapshot Report",format:"CSV",recordCount:ae.length,status:"Completed",filename:ce};c.value.unshift(_e),t.value=!0,n.value=`Inventory Snapshot Report generated successfully! ${ae.length} records included.`}catch(ee){throw console.error("Inventory Snapshot Report generation error:",ee),ee}},J=W=>{const ae=[["MedicineName","HSN","Product_form","Group","batchNumber","Expiry Date","PackType","UnitsPerpack","MRP","COST excl. GST","GST%","COST incl. GST","Quantity","InwardBillID","Location"].join(",")];return W.forEach(oe=>{const j=[te(oe.MedicineName),te(oe.HSN),te(oe.Product_form),te(oe.Group),te(oe.batchNumber),oe["Expiry Date"],te(oe.PackType),oe.UnitsPerpack,oe.MRP,oe["COST excl. GST"]||0,oe["GST%"]||0,oe["COST incl. GST"]||0,oe.Quantity,te(oe.InwardBillID),te(oe.Location)];ae.push(j.join(","))}),ae.join(`
`)},M=async(W,ee)=>{try{const ae=new Blob([W],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const oe=await window.electronAPI.showSaveDialog({defaultPath:ee,filters:[{name:"CSV Files",extensions:["csv"]}]});return!oe.canceled&&oe.filePath?(await window.electronAPI.writeFile(oe.filePath,W),{success:!0,filePath:oe.filePath,filename:ee}):{success:!1,error:"Save canceled by user"}}else{const oe=document.createElement("a"),j=URL.createObjectURL(ae);return oe.setAttribute("href",j),oe.setAttribute("download",ee),oe.style.visibility="hidden",document.body.appendChild(oe),oe.click(),document.body.removeChild(oe),URL.revokeObjectURL(j),{success:!0,filePath:`Downloaded: ${ee}`,filename:ee}}}catch(ae){return console.error("Error saving Inventory Snapshot Report file:",ae),{success:!1,error:ae.message}}},te=W=>{if(W==null)return"";const ee=String(W);return ee.includes(",")||ee.includes('"')||ee.includes(`
`)?`"${ee.replace(/"/g,'""')}"`:ee},Y=async(W,ee)=>{try{const ae=new Blob([W],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const oe=await window.electronAPI.showSaveDialog({defaultPath:ee,filters:[{name:"CSV Files",extensions:["csv"]}]});return!oe.canceled&&oe.filePath?(await window.electronAPI.writeFile(oe.filePath,W),{success:!0,filePath:oe.filePath,filename:ee}):{success:!1,error:"Save canceled by user"}}else{const oe=document.createElement("a"),j=URL.createObjectURL(ae);return oe.setAttribute("href",j),oe.setAttribute("download",ee),oe.style.visibility="hidden",document.body.appendChild(oe),oe.click(),document.body.removeChild(oe),URL.revokeObjectURL(j),{success:!0,filePath:`Downloaded: ${ee}`,filename:ee}}}catch(ae){return console.error("Error saving Expired Inventory Report file:",ae),{success:!1,error:ae.message}}};return dn(()=>{console.log("Pharmacy Reports page initialized")}),(W,ee)=>{const ae=I("v-col"),oe=I("v-card-text"),j=I("v-card"),ce=I("v-progress-circular"),de=I("v-card-title"),_e=I("v-row"),Re=I("v-data-table"),be=I("v-icon"),Ee=I("v-snackbar"),Ce=I("v-main");return R(),ve(Ce,null,{default:u(()=>[l(En,{feature:"pharmacy.reports"},{default:u(()=>[l(_e,{"aria-label":"pharmacy reports row",style:{height:"calc(100vh - 64px)"},class:"d-flex align-stretch ma-0"},{default:u(()=>[l(ae,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[h("div",uGe,[l(lGe,{filters:f.value,loading:s.value,onFilterChange:v,onStartReport:g,onClearFilters:p},null,8,["filters","loading"])])]),_:1}),l(ae,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[h("div",cGe,[l(j,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[l(j,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(oe,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[c.value.length>0?(R(),Ae(Ke,{key:0},[h("strong",null,K(c.value.length),1),O(" report"+K(c.value.length!==1?"s":"")+" available ",1)],64)):(R(),Ae("strong",dGe,"Generate Reports"))]),_:1})]),_:1}),s.value?(R(),ve(_e,{key:0,"no-gutters":""},{default:u(()=>[l(ae,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[h("div",AGe,[l(ce,{"model-value":o.value,color:"primary",size:"64",width:"6"},{default:u(()=>[O(K(o.value)+"% ",1)]),_:1},8,["model-value"]),h("div",fGe,K(i.value||"Generating report..."),1),A.value?(R(),Ae("div",mGe,[l(j,{class:"mx-auto","max-width":"300",outlined:""},{default:u(()=>[l(de,{class:"text-h6"},{default:u(()=>[...ee[2]||(ee[2]=[O("Report Summary",-1)])]),_:1}),l(oe,null,{default:u(()=>[h("div",vGe,[ee[3]||(ee[3]=h("strong",null,"Report Type:",-1)),O(" "+K(A.value.reportType),1)]),h("div",hGe,[ee[4]||(ee[4]=h("strong",null,"Total Records:",-1)),O(" "+K(A.value.totalRecords),1)]),A.value.dateRange?(R(),Ae("div",pGe,[ee[5]||(ee[5]=h("strong",null,"Date Range:",-1)),O(" "+K(A.value.dateRange.from)+" - "+K(A.value.dateRange.to),1)])):ye("",!0),d.value&&A.value.filename?(R(),Ae("div",gGe,[ee[6]||(ee[6]=h("strong",null,"File:",-1)),O(" "+K(A.value.filename),1)])):ye("",!0)]),_:1})]),_:1})])):ye("",!0)])]),_:1})]),_:1})):c.value.length>0?(R(),ve(_e,{key:1,"no-gutters":""},{default:u(()=>[l(ae,{cols:"12",class:"scroll-element mt-2",style:{"padding-bottom":"20px"}},{default:u(()=>[l(Re,{headers:m.value,items:c.value,class:"elevation-1 ma-2",density:"comfortable"},null,8,["headers","items"])]),_:1})]),_:1})):(R(),ve(_e,{key:2,"no-gutters":"",style:{height:"calc(100% - 60px)"}},{default:u(()=>[l(ae,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%"}},{default:u(()=>[h("div",yGe,[l(be,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...ee[7]||(ee[7]=[O("mdi-chart-line",-1)])]),_:1}),ee[8]||(ee[8]=h("div",{class:"text-h6 mb-2"},"Generate Reports",-1)),ee[9]||(ee[9]=h("div",{class:"text-body-2 text-medium-emphasis"},"Configure report settings and generate comprehensive pharmacy reports",-1))])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1}),l(Ee,{modelValue:t.value,"onUpdate:modelValue":ee[0]||(ee[0]=Be=>t.value=Be),class:"elevation-24",color:"success"},{default:u(()=>[O(K(n.value),1)]),_:1},8,["modelValue"]),l(Ee,{modelValue:a.value,"onUpdate:modelValue":ee[1]||(ee[1]=Be=>a.value=Be),class:"elevation-24",color:"error"},{default:u(()=>[O(K(r.value),1)]),_:1},8,["modelValue"])]),_:1})]),_:1})}}},wGe=qt(_Ge,[["__scopeId","data-v-2d811d1f"]]),YE=""+new URL("images/login_screen-CYaYXXaw.png",import.meta.url).href,bGe=""+new URL("images/login_screen_card-37SK0J6l.png",import.meta.url).href,xGe=""+new URL("google-ax7zTtAP.webp",import.meta.url).href,CGe={key:0,class:"window-controls"},SGe={class:"d-flex justify-center align-center",style:{height:"100%",padding:"40px"}},EGe={class:"card-content"},BGe={class:"terms-text mb-4 text-center text-caption"},kGe={__name:"login-page",setup(e){const t=ra(),n=sl(),a=Ra(),r=ne(()=>t.state.auth.loading),s=ne(()=>t.state.auth.error),o=V(!1),i=ne(()=>t.getters["auth/isAuthenticated"]);je(i,(m,v)=>{if(a&&m&&!v){console.log("Google authentication completed, clearing desktop session and redirecting to passcode login..."),localStorage.removeItem("desktopSessionToken"),localStorage.removeItem("desktopPermissions"),localStorage.removeItem("desktopIsAdmin"),localStorage.removeItem("desktopUserName"),localStorage.removeItem("desktopUserId"),localStorage.removeItem("desktopFeatures");const p=t.getters["auth/currentUser"];if(p&&p.metadata){const g=p.metadata.creationTime===p.metadata.lastSignInTime;sessionStorage.setItem("isFirstTimeSignIn",g?"true":"false")}n.replace("/desktop/passcode")}},{immediate:!1}),dn(()=>{if(!a){const p=new URLSearchParams(window.location.search).get("endpoint"),g=p?`/web/login?endpoint=${encodeURIComponent(p)}`:"/web/login";n.replace(g);return}const m=!!localStorage.getItem("desktopSessionToken");i.value&&(m?n.replace("/home"):n.replace("/desktop/passcode"))});const c=async()=>{try{console.log("Starting authentication process..."),localStorage.removeItem("desktopSessionToken"),localStorage.removeItem("desktopPermissions"),localStorage.removeItem("desktopIsAdmin"),localStorage.removeItem("desktopUserName"),localStorage.removeItem("desktopUserId"),localStorage.removeItem("desktopFeatures");const m=await t.dispatch("auth/signInWithGoogle");t.getters["auth/isAuthenticated"]?(sessionStorage.setItem("isFirstTimeSignIn",m?"true":"false"),await n.replace("/desktop/passcode")):console.error("Authentication failed or user not authenticated after attempt.")}catch(m){console.error("Component caught authentication error:",m)}},A=()=>{try{if(window.require){const{shell:m}=window.require("electron");m.openExternal("https://www.evamed.in/terms")}else window.open("https://www.evamed.in/terms","_blank")}catch(m){console.error("Error opening terms link:",m),window.open("https://www.evamed.in/terms","_blank")}},d=async()=>{if(!(!a||o.value))try{if(o.value=!0,window.require){const{ipcRenderer:m}=window.require("electron"),v=await m.invoke("toggle-fullscreen");if(v.success)console.log(`Fullscreen toggled: ${v.wasFullscreen}  ${v.isFullscreen}`),v.isFullscreen||console.log("Exited fullscreen - native window controls now available");else throw new Error(v.error||"Failed to exit fullscreen")}else throw new Error("Electron IPC not available")}catch(m){console.error("Failed to exit fullscreen:",m)}finally{o.value=!1}},f=async()=>{if(!(!a||o.value))try{if(o.value=!0,window.require){const{ipcRenderer:m}=window.require("electron"),v=await m.invoke("window-close");if(v.success)console.log("Window close initiated");else throw new Error(v.error||"Failed to close window")}else throw new Error("Electron IPC not available")}catch(m){console.error("Failed to close window:",m)}finally{o.value=!1}};return(m,v)=>{const p=I("v-icon"),g=I("v-btn"),y=I("v-tooltip"),w=I("v-img"),b=I("v-alert"),x=I("v-card");return R(),Ae("div",{class:"login-wrapper login-page-root",style:Ut({backgroundImage:`url(${Qe(YE)})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",width:"100vw",height:"100vh"})},[Qe(a)?(R(),Ae("div",CGe,[l(y,{text:"Exit Fullscreen",location:"bottom"},{activator:u(({props:T})=>[l(g,Pe(T,{icon:"",size:"small",variant:"outlined",class:"control-btn",onClick:d,disabled:o.value}),{default:u(()=>[l(p,null,{default:u(()=>[...v[0]||(v[0]=[O("mdi-fullscreen-exit",-1)])]),_:1})]),_:1},16,["disabled"])]),_:1}),l(y,{text:"Close",location:"bottom"},{activator:u(({props:T})=>[l(g,Pe(T,{icon:"",size:"small",variant:"outlined",class:"control-btn close-btn",onClick:f,disabled:o.value}),{default:u(()=>[l(p,null,{default:u(()=>[...v[1]||(v[1]=[O("mdi-close",-1)])]),_:1})]),_:1},16,["disabled"])]),_:1})])):ye("",!0),h("div",SGe,[l(x,{elevation:"2",class:"login-card",rounded:"xl"},{default:u(()=>[l(w,{src:Qe(bGe),cover:"",height:"300",class:"card-image"},null,8,["src"]),h("div",EGe,[h("p",BGe,[v[2]||(v[2]=O(" By continuing, you agree to our ",-1)),h("a",{href:"#",onClick:vn(A,["prevent"]),class:"terms-link"},"Terms and Conditions"),v[3]||(v[3]=O(". ",-1))]),Qe(a)?(R(),ve(g,{key:0,block:"",variant:"elevated",size:"large",loading:r.value,disabled:r.value,onClick:c,class:"text-none btn-hover-enhanced login-button",color:"primary"},{prepend:u(()=>[l(w,{src:Qe(xGe),height:"24",width:"24",contain:""},null,8,["src"])]),default:u(()=>[v[4]||(v[4]=O(" Sign in with Google ",-1))]),_:1},8,["loading","disabled"])):ye("",!0),s.value?(R(),ve(b,{key:1,type:"error",variant:"tonal",density:"compact",class:"mt-4 text-left text-caption",closable:""},{default:u(()=>[O(K(s.value),1)]),_:1})):ye("",!0)])]),_:1})])],4)}}},TGe=qt(kGe,[["__scopeId","data-v-42131e5c"]]),IGe={name:"WelcomePage",setup(){const e=sl(),t=V(!0),n=V(0),a=V({first_name:"",last_name:"",registrationNumber:"",phone:"",pincode:"",specialization:""}),r=V(null),s=V(!1),o=V(null),i=[f=>!!f||"this information is required"];return dn(()=>{t.value=!0}),{showDialog:t,currentStep:n,userProfile:a,profileForm:r,isSubmitting:s,profileError:o,doctorSpecialization:Nw,nameRules:fr,regNumberRules:HM,phoneRules:Ah,pincodeRules:fve,specializationRules:i,submitProfile:async()=>{const{valid:f}=await r.value.validate();if(!f){o.value="Please fill in all required fields correctly.";return}s.value=!0,o.value=null;try{const m=$s.currentUser;if(!m||!m.email)throw new Error("User authentication required");const v={first_name:a.value.first_name,last_name:a.value.last_name,email:m.email,phone:a.value.phone,address:"",city:"",state:"",country:"India",pincode:a.value.pincode,registration_number:a.value.registrationNumber,specialization:a.value.specialization,premium_level:"basic",premium_end_date:null,max_devices:1,auth_id:m.uid};console.log("=== DETAILED API PAYLOAD DEBUG ==="),console.log("Full payload:",JSON.stringify(v,null,2)),console.log("Registration number:",v.registration_number),console.log("Specialization:",v.specialization),console.log("Auth ID:",v.auth_id),console.log("=====================================");const p=await m.getIdToken(),y=await Ir.post("https://api.origamimed.com/users/",v,{headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"}});if(y.status===200||y.status===201)console.log("User profile created successfully"),n.value=1;else throw new Error("Failed to create user profile")}catch(m){if(console.error("Profile submission error:",m),m.response){const v=m.response.status;v>=400&&v<500?o.value="Please check your information and try again.":o.value="Server error. Please try again later."}else m.request?o.value="Network error. Please check your connection and try again.":o.value=m.message||"Something went wrong. Please try again."}finally{s.value=!1}},goToHome:()=>{t.value=!1,setTimeout(()=>{e.push("/home")},200)},openVideos:()=>{try{if(window.require){const{shell:f}=window.require("electron");f.openExternal("https://www.evamed.in/videos")}else window.open("https://www.evamed.in/videos","_blank")}catch(f){console.error("Error opening videos link:",f),window.open("https://www.evamed.in/videos","_blank")}}}}};function FGe(e,t,n,a,r,s){const o=I("v-toolbar-title"),i=I("v-toolbar"),c=I("v-stepper-item"),A=I("v-divider"),d=I("v-stepper-header"),f=I("v-text-field"),m=I("v-col"),v=I("v-combobox"),p=I("v-row"),g=I("v-form"),y=I("v-alert"),w=I("v-card-text"),b=I("v-spacer"),x=I("v-btn"),T=I("v-card-actions"),D=I("v-stepper-window-item"),k=I("v-list-item-title"),S=I("v-list-item-subtitle"),E=I("v-list-item"),C=I("v-list"),U=I("v-stepper-window"),F=I("v-stepper"),L=I("v-card"),H=I("v-dialog");return R(),Ae("div",null,[l(H,{modelValue:a.showDialog,"onUpdate:modelValue":t[10]||(t[10]=ue=>a.showDialog=ue),persistent:"","max-width":"700px","overlay-opacity":"0.7"},{default:u(()=>[l(L,null,{default:u(()=>[l(i,{color:"primary",dark:"",flat:"",class:"brand-blue-toolbar"},{default:u(()=>[l(o,null,{default:u(()=>[...t[11]||(t[11]=[O("Welcome to evamed!",-1)])]),_:1})]),_:1}),l(F,{modelValue:a.currentStep,"onUpdate:modelValue":t[9]||(t[9]=ue=>a.currentStep=ue),"alt-labels":""},{default:u(()=>[l(d,null,{default:u(()=>[l(c,{complete:a.currentStep>0,step:"1",title:"Setup Profile"},null,8,["complete"]),l(A),l(c,{step:"2",title:"Get Started"})]),_:1}),l(U,{modelValue:a.currentStep,"onUpdate:modelValue":t[8]||(t[8]=ue=>a.currentStep=ue)},{default:u(()=>[l(D,{value:0},{default:u(()=>[l(w,{class:"pt-4"},{default:u(()=>[t[13]||(t[13]=h("h2",{class:"text-h5 mb-3"},"Let's set up your profile with evamed.",-1)),t[14]||(t[14]=h("p",{class:"mb-4"},"Please provide your professional details to get started:",-1)),l(g,{ref:"profileForm",onSubmit:vn(a.submitProfile,["prevent"])},{default:u(()=>[l(p,{"no-gutters":"",class:"mx-0"},{default:u(()=>[l(m,{cols:"12",md:"6",class:"pb-2 pr-md-2"},{default:u(()=>[l(f,{modelValue:a.userProfile.first_name,"onUpdate:modelValue":t[0]||(t[0]=ue=>a.userProfile.first_name=ue),label:"First Name",rules:a.nameRules,variant:"outlined",density:"compact",required:""},null,8,["modelValue","rules"])]),_:1}),l(m,{cols:"12",md:"6",class:"pb-2 pl-md-2"},{default:u(()=>[l(f,{modelValue:a.userProfile.last_name,"onUpdate:modelValue":t[1]||(t[1]=ue=>a.userProfile.last_name=ue),label:"Last Name",rules:a.nameRules,variant:"outlined",density:"compact",required:""},null,8,["modelValue","rules"])]),_:1}),l(m,{cols:"12",md:"6",class:"pb-2 pr-md-2"},{default:u(()=>[l(f,{modelValue:a.userProfile.registrationNumber,"onUpdate:modelValue":t[2]||(t[2]=ue=>a.userProfile.registrationNumber=ue),label:"Medical Registration Number",rules:a.regNumberRules,variant:"outlined",density:"compact",required:""},null,8,["modelValue","rules"])]),_:1}),l(m,{cols:"12",md:"6",class:"pb-2 pl-md-2"},{default:u(()=>[l(f,{modelValue:a.userProfile.phone,"onUpdate:modelValue":t[3]||(t[3]=ue=>a.userProfile.phone=ue),label:"Mobile Number",rules:a.phoneRules,variant:"outlined",density:"compact",required:""},null,8,["modelValue","rules"])]),_:1}),l(m,{cols:"12",md:"6",class:"pb-2 pr-md-2"},{default:u(()=>[l(f,{modelValue:a.userProfile.pincode,"onUpdate:modelValue":t[4]||(t[4]=ue=>a.userProfile.pincode=ue),label:"Practice Pincode",rules:a.pincodeRules,variant:"outlined",density:"compact",required:""},null,8,["modelValue","rules"])]),_:1}),l(m,{cols:"12",md:"6",class:"pb-2 pl-md-2"},{default:u(()=>[l(v,{modelValue:a.userProfile.specialization,"onUpdate:modelValue":t[5]||(t[5]=ue=>a.userProfile.specialization=ue),items:a.doctorSpecialization,label:"Specialization",rules:a.specializationRules,variant:"outlined",density:"compact",required:""},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1},8,["onSubmit"]),a.profileError?(R(),ve(y,{key:0,type:"error",variant:"tonal",density:"compact",class:"mt-4",closable:"","onClick:close":t[6]||(t[6]=ue=>a.profileError=null)},{default:u(()=>[O(K(a.profileError),1)]),_:1})):ye("",!0),l(y,{type:"info",variant:"tonal",density:"compact",class:"mt-4",icon:"mdi-information"},{default:u(()=>[...t[12]||(t[12]=[h("small",null," This information is shared with evamed. It is used to verify your identity and ensure only licensed practitioners can access the software. ",-1)])]),_:1})]),_:1}),l(T,{class:"px-6 pb-6"},{default:u(()=>[l(b),l(x,{color:"primary",class:"btn-hover-base text-none",onClick:a.submitProfile,loading:a.isSubmitting,disabled:a.isSubmitting},{default:u(()=>[...t[15]||(t[15]=[O(" Continue ",-1)])]),_:1},8,["onClick","loading","disabled"])]),_:1})]),_:1}),l(D,{value:1},{default:u(()=>[l(w,{class:"pt-6"},{default:u(()=>[t[21]||(t[21]=h("h2",{class:"text-h5 mb-4"},"Let's get started",-1)),t[22]||(t[22]=h("p",{class:"mb-4"},"We're excited to have you onboard! Choose how you'd like to begin:",-1)),l(C,null,{default:u(()=>[l(E,{"prepend-icon":"mdi-play-circle"},{default:u(()=>[l(k,null,{default:u(()=>[...t[16]||(t[16]=[O("Watch demo videos",-1)])]),_:1}),l(S,null,{default:u(()=>[t[17]||(t[17]=O("View our tutorials and take a demo at ",-1)),h("a",{href:"#",onClick:t[7]||(t[7]=vn((...ue)=>a.openVideos&&a.openVideos(...ue),["prevent"])),class:"video-link"},"our website"),t[18]||(t[18]=O(".",-1))]),_:1})]),_:1}),l(E,{"prepend-icon":"mdi-account-cog"},{default:u(()=>[l(k,null,{default:u(()=>[...t[19]||(t[19]=[O("Setup your practice",-1)])]),_:1}),l(S,null,{default:u(()=>[...t[20]||(t[20]=[O("Configure your doctor, clinic and print details in the Admin tab.",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),l(T,{class:"px-6 pb-6"},{default:u(()=>[l(b),l(x,{color:"primary",class:"btn-hover-base text-none",onClick:a.goToHome},{default:u(()=>[...t[23]||(t[23]=[O(" GET STARTED ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])])}const PGe=qt(IGe,[["render",FGe],["__scopeId","data-v-57136c3e"]]),DGe={class:"splash-screen"},UGe={class:"splash-content"},RGe={class:"logo-container"},NGe={class:"loading-container"},VGe={key:0,class:"timeout-message"},LGe={__name:"SplashScreen",setup(e){const t=V(!1);let n=null;return dn(()=>{n=setTimeout(()=>{t.value=!0},3e3)}),Ii(()=>{n&&clearTimeout(n)}),(a,r)=>{const s=I("v-img"),o=I("v-progress-linear"),i=I("v-alert");return R(),Ae("div",DGe,[h("div",UGe,[h("div",RGe,[l(s,{src:Qe(z_),alt:"evamed Logo",width:"120",height:"120",class:"logo-image"},null,8,["src"])]),r[2]||(r[2]=h("h1",{class:"app-name"},"evamed",-1)),h("div",NGe,[r[0]||(r[0]=h("p",{class:"loading-text"},"Initializing...",-1)),l(o,{indeterminate:"",color:"primary",height:"4",rounded:"",class:"loading-bar"})]),t.value?(R(),Ae("div",VGe,[l(i,{type:"info",variant:"tonal",density:"compact",class:"mt-4"},{default:u(()=>[...r[1]||(r[1]=[O(" Taking longer than usual. Please wait... ",-1)])]),_:1})])):ye("",!0)])])}}},MGe=qt(LGe,[["__scopeId","data-v-ff0066be"]]),OGe={class:"splash-page"},HGe={__name:"splash-page",setup(e){return(t,n)=>(R(),Ae("div",OGe,[l(MGe)]))}},$Ge=qt(HGe,[["__scopeId","data-v-bb0f5d68"]]),QGe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z'%20/%3e%3c/svg%3e",GGe={__name:"mobile-home",setup(e){const t=V("queue"),n=V(!1),a=r=>{t.value=r,setTimeout(()=>{n.value=!1},150)};return(r,s)=>{const o=I("v-app-bar-title"),i=I("v-spacer"),c=I("v-icon"),A=I("v-btn"),d=I("v-app-bar"),f=I("v-card-title"),m=I("v-col"),v=I("v-row"),p=I("v-card"),g=I("v-list-item-title"),y=I("v-list-item"),w=I("v-list"),b=I("v-navigation-drawer"),x=I("v-main");return R(),Ae(Ke,null,[l(d,{density:"compact",color:"primary",elevation:"2",class:"app-header"},{default:u(()=>[l(o,{class:"text-h6 font-weight-medium"},{default:u(()=>[...s[5]||(s[5]=[O(" EvaMed ",-1)])]),_:1}),l(i),l(A,{icon:"",variant:"text",onClick:s[0]||(s[0]=vn(T=>n.value=!n.value,["stop"])),class:"btn-hover-base"},{default:u(()=>[l(c,null,{default:u(()=>[...s[6]||(s[6]=[h("img",{src:QGe,alt:"Menu",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1}),l(b,{modelValue:n.value,"onUpdate:modelValue":s[4]||(s[4]=T=>n.value=T),location:"bottom",temporary:"",class:"navigation-drawer",height:"280"},{default:u(()=>[l(p,{rounded:"lg",color:"surfaceContainer",class:"navigation-card"},{default:u(()=>[l(v,{"no-gutters":""},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(p,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(v,{"no-gutters":""},{default:u(()=>[l(m,{cols:"11"},{default:u(()=>[l(f,{class:"pa-0 pl-2"},{default:u(()=>[...s[7]||(s[7]=[O("Navigation",-1)])]),_:1})]),_:1}),l(m,{cols:"1"},{default:u(()=>[l(A,{icon:"",size:"x-small",onClick:s[1]||(s[1]=T=>n.value=!1)},{default:u(()=>[l(c,null,{default:u(()=>[...s[8]||(s[8]=[h("img",{src:nu,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(v,{"no-gutters":""},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(p,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(w,{class:"nav-list"},{default:u(()=>[l(y,{class:ct([{"active-item":t.value==="home"},"nav-item btn-hover-base"]),onClick:s[2]||(s[2]=T=>a("home")),ripple:""},{prepend:u(()=>[l(c,{color:t.value==="home"?"primary":"grey-darken-1",class:"nav-icon"},{default:u(()=>[...s[9]||(s[9]=[O(" mdi-home-outline ",-1)])]),_:1},8,["color"])]),default:u(()=>[l(g,{class:ct([{"active-title":t.value==="home"},"nav-title"])},{default:u(()=>[...s[10]||(s[10]=[O(" Home ",-1)])]),_:1},8,["class"])]),_:1},8,["class"]),l(y,{class:ct([{"active-item":t.value==="queue"},"nav-item btn-hover-base"]),onClick:s[3]||(s[3]=T=>a("queue")),ripple:""},{prepend:u(()=>[l(c,{color:t.value==="queue"?"primary":"grey-darken-1",class:"nav-icon"},{default:u(()=>[...s[11]||(s[11]=[O(" mdi-clipboard-list-outline ",-1)])]),_:1},8,["color"])]),default:u(()=>[l(g,{class:ct([{"active-title":t.value==="queue"},"nav-title"])},{default:u(()=>[...s[12]||(s[12]=[O(" Queue ",-1)])]),_:1},8,["class"])]),_:1},8,["class"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(x,{class:"pt-0"},{default:u(()=>[t.value==="home"?(R(),Ae(Ke,{key:0},[O(" This is home ")],64)):ye("",!0),t.value==="queue"?(R(),ve(wH,{key:1})):ye("",!0)]),_:1})],64)}}},zGe=qt(GGe,[["__scopeId","data-v-dd4f3937"]]),KGe={class:"d-flex justify-center align-center",style:{height:"100%"}},WGe={class:"text-center"},jGe={key:1,class:"d-flex justify-center align-center pa-4",style:{"min-height":"50vh"}},qGe={class:"text-center"},YGe={class:"d-flex justify-center align-center pa-4",style:{"min-height":"30vh"}},XGe={class:"text-center"},JGe={__name:"patient-detail-mobile",setup(e){const t=Gf(),n=sl(),a=V(!0),r=V(!1),s=V(null),o=V(0),i=V(!1),c=V(""),A=V("info"),d=V(4e3),f=V(navigator.onLine),m=V(t.params.id),v=V({}),p=V([]),g=V({}),y=(Q,X="Unknown")=>{console.error(`Mobile Patient Detail Error (${X}):`,Q),Q?.code==="NETWORK_ERROR"||Q?.response?.status>=500||!Q?.response||Q?.message?.includes("timeout")?s.value=`${X} error. Please check your connection and try again.`:(i.value=!0,c.value=`${X}: ${Q?.response?.data?.message||Q.message||"Unknown error occurred"}`,A.value="error")},w=Q=>{i.value=!0,c.value=Q,A.value="success",d.value=3e3},b=Q=>{i.value=!0,c.value=Q,A.value="warning",d.value=5e3},x=ne(()=>{try{return v.value?.name||"Unknown Patient"}catch(Q){return console.warn("Error accessing patient name:",Q),"Unknown Patient"}}),T=(Q,X=15e3)=>Promise.race([Q,new Promise((le,Z)=>setTimeout(()=>Z(new Error("Request timeout")),X))]),D=()=>{try{window.history.length>1?n.back():n.push("/patients")}catch(Q){console.error("Navigation error:",Q),n.push("/patients")}},k=async()=>{try{if(!m.value)throw new Error("Patient ID is required");const Q=await T(eT(m.value));if(!Q?.data)throw new Error("No patient data received");v.value=Qn.cloneDeep(Q.data),console.log("Patient details fetched:",v.value)}catch(Q){y(Q,"Failed to fetch patient details"),v.value={name:"Unknown Patient"}}},S=async()=>{try{if(!v.value?.id)throw new Error("Patient ID is required for consultations");const Q=await T(t_(v.value.id));if(!Q?.data){console.warn("No consultation data received"),p.value=[];return}p.value=Qn.cloneDeep(Q.data),console.log("Consultations fetched:",p.value)}catch(Q){y(Q,"Failed to fetch consultations"),p.value=[]}},E=async()=>{try{await n.isReady();const Q=t.params.id;if(!Q)throw new Error("Patient ID not found in URL");if(!/^[a-zA-Z0-9-]+$/.test(Q))throw new Error("Invalid patient ID format");m.value=Q,console.log("Patient ID extracted from URL:",m.value)}catch(Q){y(Q,"Invalid URL parameters"),n.push("/patients")}},C=ne(()=>{try{return!Array.isArray(p.value)||p.value.length===0?!1:p.value.some(Q=>{try{if(!Q?.createdAt)return console.warn("Consultation missing createdAt:",Q),!1;const X=er(Q.createdAt);return console.log("Created Date",Q.createdAt,"Checking creation date in IST:",X,"against today:",sC),X===sC}catch(X){return console.warn("Error processing consultation date:",X),!1}})}catch(Q){return console.error("Error checking consultation presence:",Q),!1}}),U=async()=>{try{if(C.value){const Q=p.value.find(X=>{try{return X?.createdAt&&er(X.createdAt)===sC}catch(le){return console.warn("Error processing consultation for selection:",le),!1}});g.value=Q||{id:"0"},Q?console.log("Today's consultation selected:",Q):console.warn("Today's consultation found but could not be selected")}else console.log("No consultation found for today"),g.value={id:"0"}}catch(Q){console.error("Error selecting today's consultation:",Q),g.value={id:"0"}}},F=async()=>{if(!r.value)try{r.value=!0,await Promise.allSettled([k(),S()]),await U(),o.value+=1,w("Data refreshed successfully")}catch(Q){y(Q,"Failed to refresh data")}finally{r.value=!1}},L=Q=>{console.error("Consultation component error:",Q),y(Q,"Consultation loading failed"),o.value+=1},H=()=>{f.value=!0,w("Connection restored"),setTimeout(()=>{F()},1e3)},ue=()=>{f.value=!1,b("You are now offline. Data may not be current.")},ie=Q=>{Q.touches.length>1&&Q.preventDefault()};return Xl(async()=>{try{a.value=!0,console.log("Patient detail mobile page initializing..."),await E(),await k(),await S(),await U()}catch(Q){y(Q,"Failed to initialize page")}finally{a.value=!1}}),dn(()=>{try{window.addEventListener("online",H),window.addEventListener("offline",ue),document.addEventListener("touchstart",ie,{passive:!1});const Q=document.querySelector("meta[name=viewport]");Q&&Q.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"),console.log("Mobile patient detail page mounted successfully")}catch(Q){console.error("Error setting up mobile optimizations:",Q)}}),va(()=>{try{window.removeEventListener("online",H),window.removeEventListener("offline",ue),document.removeEventListener("touchstart",ie),a.value=!1,r.value=!1,s.value=null,i.value=!1,console.log("Mobile patient detail cleanup completed")}catch(Q){console.error("Cleanup error:",Q)}}),je(()=>t.params.id,async Q=>{Q&&Q!==m.value&&(m.value=Q,await F())}),(Q,X)=>{const le=I("v-alert"),Z=I("v-icon"),re=I("v-app-bar-nav-icon"),q=I("v-toolbar-title"),P=I("v-app-bar"),G=I("v-progress-circular"),J=I("v-card"),M=I("v-main"),te=I("v-spacer"),Y=I("v-btn"),W=I("v-snackbar");return R(),Ae(Ke,null,[s.value?(R(),ve(le,{key:0,type:"error",variant:"tonal",closable:"","onClick:close":X[0]||(X[0]=ee=>s.value=null),class:"ma-2",density:"compact"},{default:u(()=>[O(K(s.value),1)]),_:1})):ye("",!0),a.value?(R(),Ae(Ke,{key:1},[l(P,{density:"compact"},{default:u(()=>[l(re,null,{default:u(()=>[l(Z,{onClick:D,icon:"mdi-chevron-left",size:"large"})]),_:1}),l(q,{class:"text-h6"},{default:u(()=>[...X[3]||(X[3]=[O("Loading...",-1)])]),_:1})]),_:1}),l(M,{class:"pt-0"},{default:u(()=>[l(J,{color:"surfaceContainer",flat:"",style:{height:"100vh"}},{default:u(()=>[h("div",KGe,[h("div",WGe,[l(G,{indeterminate:"",color:"primary",size:"64"}),X[4]||(X[4]=h("div",{class:"mt-4 text-subtitle-1"},"Loading patient details...",-1))])])]),_:1})]),_:1})],64)):s.value?ye("",!0):(R(),Ae(Ke,{key:2},[l(P,{density:"compact",class:"mobile-app-bar"},{default:u(()=>[l(re,null,{default:u(()=>[l(Z,{onClick:D,icon:"mdi-chevron-left",size:"large"})]),_:1}),l(q,{class:"text-h6 patient-title"},{default:u(()=>[O(K(x.value),1)]),_:1}),l(te),l(Y,{icon:"",onClick:F,loading:r.value,disabled:r.value,size:"small"},{default:u(()=>[l(Z,null,{default:u(()=>[...X[5]||(X[5]=[O("mdi-refresh",-1)])]),_:1})]),_:1},8,["loading","disabled"])]),_:1}),l(M,{class:"pt-0"},{default:u(()=>[l(J,{color:"surfaceContainer",flat:"",class:"mobile-content"},{default:u(()=>[f.value?ye("",!0):(R(),ve(le,{key:0,type:"warning",variant:"tonal",density:"compact",class:"ma-2"},{default:u(()=>[...X[6]||(X[6]=[O(" You are offline. Data may not be current. ",-1)])]),_:1})),!g.value?.id||g.value.id==="0"?(R(),Ae("div",jGe,[h("div",qGe,[l(Z,{size:"64",color:"grey-lighten-1",class:"mb-4"},{default:u(()=>[...X[7]||(X[7]=[O("mdi-calendar-blank",-1)])]),_:1}),X[9]||(X[9]=h("div",{class:"text-h6 mb-2"},"No consultation today",-1)),X[10]||(X[10]=h("div",{class:"text-body-2 text-grey"},"No consultation has been created for today.",-1)),l(Y,{variant:"outlined",onClick:F,class:"mt-4",loading:r.value},{default:u(()=>[...X[8]||(X[8]=[O(" Refresh ",-1)])]),_:1},8,["loading"])])])):(R(),ve(hS,{key:2},{default:u(()=>[(R(),ve(n$,{consultation:g.value,patient:v.value,key:`${g.value.id}-${o.value}`,onError:L},null,8,["consultation","patient"]))]),fallback:u(()=>[h("div",YGe,[h("div",XGe,[l(G,{indeterminate:"",color:"primary",size:"48"}),X[11]||(X[11]=h("div",{class:"mt-3 text-body-2"},"Loading consultation...",-1))])])]),_:1}))]),_:1})]),_:1})],64)),l(W,{modelValue:i.value,"onUpdate:modelValue":X[2]||(X[2]=ee=>i.value=ee),color:A.value,timeout:d.value,location:"bottom",class:"mobile-snackbar"},{actions:u(()=>[l(Y,{variant:"text",size:"small",onClick:X[1]||(X[1]=ee=>i.value=!1)},{default:u(()=>[...X[12]||(X[12]=[O(" Close ",-1)])]),_:1})]),default:u(()=>[O(K(c.value)+" ",1)]),_:1},8,["modelValue","color","timeout"])],64)}}},ZGe=qt(JGe,[["__scopeId","data-v-fd53b52b"]]),eze={class:"passcode-card"},tze={key:0,class:"loading-section"},nze={key:1,class:"user-section"},aze={key:0,class:"user-selector mb-4"},rze={class:"text-white text-caption"},sze={class:"d-flex align-center user-selection-content"},oze={class:"text-white text-caption"},ize={class:"user-selection-text"},lze={class:"user-avatar"},uze={class:"welcome-text"},cze={key:1,class:"subtitle"},dze={class:"passcode-input-wrapper"},Aze=["type","disabled"],fze={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},mze={key:1,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},vze={key:0,class:"error-message"},hze=["disabled"],pze={key:0,class:"loading-spinner"},gze={key:1},yze={key:3,class:"footer-section"},_ze={__name:"passcode-login",setup(e){const t=ra(),n=sl(),a=Gf(),{loginWithPasscode:r,resetAllAuthState:s}=uh(),o=V(""),i=V(!1),c=V(null),A=V(!0),d=V(""),f=V(null),m=V(!1),v=V(!0),p=V(!1),g=()=>{if(p.value)return;const Q=document.querySelector(".passcode-input");Q&&document.activeElement!==Q&&(o.value="",Q.value="",Q.setAttribute("value",""),Q.removeAttribute("data-autofilled"))};je(()=>a.path,Q=>{Q==="/desktop/passcode"&&(o.value="",p.value=!1,g())},{immediate:!0}),je(o,(Q,X)=>{!p.value&&Q&&Q.length>1&&(!X||X.length===0)&&_n(()=>{if(!p.value){const le=document.querySelector(".passcode-input");le&&document.activeElement!==le&&(console.log("Clearing browser autofilled passcode"),g())}})},{immediate:!1});const y=V([]),w=V(null),b=V(!1),x=V(""),T=ne(()=>t.getters["auth/currentUser"]),D=ne(()=>T.value?.email||""),k=ne(()=>T.value?.displayName||""),S=ne(()=>{if(w.value){const Q=y.value.find(X=>X.id===w.value);if(Q)return Q.name||Q.email||"User"}return d.value||k.value||"User"}),E=Q=>!Q||Q==="User"?"?":Q.split(" ").map(X=>X[0]).join("").toUpperCase().slice(0,2),C=async()=>{b.value=!0;try{let Q;try{Q=await At.get("/desktop/auth/users")}catch{Q=await At.get("/admin/users")}const X=Q.data?.users||(Array.isArray(Q.data)?Q.data:[]);if(Array.isArray(X)&&X.length>0){y.value=X;const le=y.value.find(Z=>Z.isAdmin===!0)||y.value[0];le&&(w.value=le.id,x.value=le.email||"",f.value=le.id,d.value=le.name||"User")}}catch(Q){console.error("Failed to fetch users:",Q)}finally{b.value=!1}},U=ne(()=>y.value.map(Q=>{const X=Q.name||Q.email||"Unknown User",le=Q.isAdmin?`${X} (Admin)`:X;return{value:Q.id,text:le,email:Q.email,raw:Q}})),F=Q=>{const X=y.value.find(le=>le.id===Q);X&&(f.value=X.id,d.value=X.name||"User",x.value=X.email||"")};let L=null,H=null;dn(async()=>{if(o.value="",p.value=!1,A.value=!0,await _n(),!T.value||!D.value){console.log("No Google auth found, redirecting to login..."),setTimeout(()=>{n.replace("/login")},100);return}g(),await C();try{const Q=sessionStorage.getItem("selectedUserId");if(Q){const X=parseInt(Q),le=y.value.find(Z=>Z.id===X);le&&(w.value=X,f.value=X,d.value=le.name||le.email||"User",x.value=le.email||"")}}catch(Q){console.error("Error verifying Google user:",Q)}finally{A.value=!1,await _n();const Q=document.querySelector(".passcode-input");if(Q){H=Q,o.value="",Q.value="";const X=()=>{p.value=!0};Q.addEventListener("keydown",X),Q.addEventListener("keypress",X),Q.addEventListener("input",re=>{re.inputType&&(re.inputType.includes("insert")||re.inputType.includes("delete"))&&X(),document.activeElement===Q&&X()}),Q.addEventListener("focus",()=>{setTimeout(()=>{!p.value&&(Q.value||o.value)&&document.activeElement!==Q&&(console.log("Clearing autofilled passcode on focus"),g())},100)}),Q.addEventListener("animationstart",re=>{(re.animationName==="onAutoFillStart"||re.target.matches(":-webkit-autofill"))&&!p.value&&(console.log("Detected autofill animation, clearing passcode"),setTimeout(()=>{p.value||g()},100))});const le=new MutationObserver(re=>{!p.value&&document.activeElement!==Q&&(Q.value||o.value)&&(console.log("MutationObserver detected value change, clearing passcode"),g())});L=le,le.observe(Q,{attributes:!0,attributeFilter:["value"],childList:!1,subtree:!1}),[()=>{!p.value&&document.activeElement!==Q&&g()},()=>{!p.value&&document.activeElement!==Q&&g()},()=>{!p.value&&document.activeElement!==Q&&g()}].forEach((re,q)=>{setTimeout(re,(q+1)*200)})}v.value=!1}}),Ii(()=>{if(L&&L.disconnect(),H){const Q=H.cloneNode(!0);H.parentNode?.replaceChild(Q,H)}});const ue=async()=>{if(!o.value){c.value="Please enter your passcode";return}const Q=w.value||f.value;if(!Q){c.value="Please select a user";return}i.value=!0,c.value=null;try{if((await r(o.value,Q)).success){sessionStorage.removeItem("selectedUserId");const le=sessionStorage.getItem("isFirstTimeSignIn")==="true";sessionStorage.removeItem("isFirstTimeSignIn");const Z=le?"/welcome":"/home";n.replace(Z)}}catch(X){c.value=X.response?.data?.error||X.message||"Invalid passcode. Please try again.",o.value=""}finally{i.value=!1}},ie=async()=>{try{s(),await t.dispatch("auth/signOut")}catch(Q){console.error("Error signing out:",Q)}n.replace("/login")};return(Q,X)=>{const le=I("v-avatar"),Z=I("v-list-item"),re=I("v-select");return R(),Ae("div",{class:"passcode-login-container",style:Ut({backgroundImage:Qe(YE)?`url(${Qe(YE)})`:"none",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",width:"100vw",height:"100vh"})},[h("div",eze,[A.value?(R(),Ae("div",tze,[...X[3]||(X[3]=[h("div",{class:"loading-spinner large"},null,-1),h("p",{class:"loading-text"},"Verifying your account...",-1)])])):(R(),Ae("div",nze,[y.value.length>0?(R(),Ae("div",aze,[l(re,{modelValue:w.value,"onUpdate:modelValue":[X[0]||(X[0]=q=>w.value=q),F],items:U.value,"item-title":"text","item-value":"value",label:"Select User",variant:"outlined",density:"compact",loading:b.value,class:"user-select-field",color:"primary"},{item:u(({props:q,item:P})=>[l(Z,Yl(Jl(q)),{prepend:u(()=>[l(le,{size:"32",color:P.raw.raw?.isAdmin?"primary":"secondary"},{default:u(()=>[h("span",rze,K(E(P.raw.text)),1)]),_:2},1032,["color"])]),_:2},1040)]),selection:u(({item:q})=>[h("div",sze,[l(le,{size:"24",color:q.raw.raw?.isAdmin?"primary":"secondary",class:"mr-2 flex-shrink-0"},{default:u(()=>[h("span",oze,K(E(q.raw.text)),1)]),_:2},1032,["color"]),h("span",ize,K(q.raw.text),1)])]),_:1},8,["modelValue","items","loading"])])):ye("",!0),h("div",lze,K(E(S.value)),1),h("h2",uze,"Welcome, "+K(S.value)+"!",1),x.value?(R(),Ae("p",cze,K(x.value),1)):ye("",!0),X[4]||(X[4]=h("p",{class:"subtitle"},"Enter your passcode to continue",-1))])),A.value?ye("",!0):(R(),Ae("form",{key:2,onSubmit:vn(ue,["prevent"]),class:"passcode-form",autocomplete:"off","data-form-type":"other"},[h("div",dze,[ma(h("input",{"onUpdate:modelValue":X[1]||(X[1]=q=>o.value=q),type:m.value?"text":"password",class:"passcode-input",placeholder:"Enter passcode",disabled:i.value,autocomplete:"new-password","data-form-type":"other","data-lpignore":"true","data-1p-ignore":"true","data-bwignore":"true","data-safari-ignore":"true",name:"passcode-input-manual",id:"passcode-input-manual",autofocus:"",maxlength:"20"},null,8,Aze),[[U8,o.value]]),h("button",{type:"button",class:"passcode-toggle-btn",onClick:X[2]||(X[2]=q=>m.value=!m.value),tabindex:"-1"},[m.value?(R(),Ae("svg",fze,[...X[5]||(X[5]=[h("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},null,-1),h("line",{x1:"1",y1:"1",x2:"23",y2:"23"},null,-1)])])):(R(),Ae("svg",mze,[...X[6]||(X[6]=[h("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},null,-1),h("circle",{cx:"12",cy:"12",r:"3"},null,-1)])]))])]),c.value?(R(),Ae("div",vze,K(c.value),1)):ye("",!0),h("button",{type:"submit",class:"login-button",disabled:i.value||!o.value},[i.value?(R(),Ae("span",pze)):(R(),Ae("span",gze,"Continue"))],8,hze)],32)),A.value?ye("",!0):(R(),Ae("div",yze,[h("button",{class:"switch-account-btn",onClick:ie}," Sign in with different account ")]))])],4)}}},wze=qt(_ze,[["__scopeId","data-v-83c06fd7"]]),bze={class:"login-container"},xze={class:"login-card"},Cze={key:0,class:"form-group"},Sze=["disabled"],Eze=["value"],Bze={class:"form-group"},kze={class:"passcode-input-wrapper"},Tze=["type","disabled"],Ize={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Fze={key:1,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Pze={key:1,class:"error-message"},Dze=["disabled"],Uze={key:0,class:"loading-spinner"},Rze={key:1},Nze={__name:"login",setup(e){const t=sl(),{login:n}=zf(),a=V(""),r=V(!1),s=V(null),o=V([]),i=V(null),c=V(!1),A=V(!1),d=V(!0),f=V(!1),m=()=>{const g=document.getElementById("passcode");g&&(a.value="",g.value="",g.setAttribute("value",""),g.removeAttribute("data-autofilled"))};je(a,g=>{!f.value&&g&&g.length>0&&_n(()=>{const y=document.getElementById("passcode");y&&y.value&&!f.value&&(console.log("Clearing browser autofilled passcode"),m())})},{immediate:!1});const v=async()=>{c.value=!0;try{const g=await At.get("/web/auth/users"),y=g.data?.users||(Array.isArray(g.data)?g.data:[]);if(Array.isArray(y)&&y.length>0){o.value=y;const w=o.value.find(b=>b.isAdmin===!0)||o.value[0];w&&(i.value=w.id)}}catch(g){console.error("Failed to fetch users:",g)}finally{c.value=!1}};dn(async()=>{m();const g=document.getElementById("passcode");if(!g)return;const y=()=>{f.value=!0};g.addEventListener("keydown",y,{once:!0}),g.addEventListener("input",y,{once:!0}),g.addEventListener("focus",()=>{setTimeout(()=>{!f.value&&g.value&&(console.log("Clearing autofilled passcode on focus"),m())},50)}),g.addEventListener("animationstart",D=>{(D.animationName==="onAutoFillStart"||D.target.matches(":-webkit-autofill"))&&(f.value||(console.log("Detected autofill animation, clearing passcode"),setTimeout(()=>m(),100)))});const w=new MutationObserver(D=>{!f.value&&g.value&&(console.log("MutationObserver detected value change, clearing passcode"),m())});w.observe(g,{attributes:!0,attributeFilter:["value"],childList:!1,subtree:!1}),await _n(),setTimeout(()=>m(),100),setTimeout(()=>m(),300),setTimeout(()=>m(),500),setTimeout(()=>m(),1e3),await v(),setTimeout(()=>{m(),d.value=!1},1500);let b=w,x=g,T=y;Ii(()=>{b&&b.disconnect(),x&&(x.removeEventListener("keydown",T),x.removeEventListener("input",T))})});const p=async()=>{if(!a.value){s.value="Please enter your passcode";return}if(!i.value){s.value="Please select a user";return}r.value=!0,s.value=null;try{(await n(a.value,i.value)).success&&t.push("/home")}catch(g){s.value=g.response?.data?.error||g.message||"Login failed. Please try again."}finally{r.value=!1}};return(g,y)=>(R(),Ae("div",bze,[h("div",xze,[y[8]||(y[8]=h("div",{class:"logo-section"},[h("img",{src:z_,alt:"Logo",class:"logo"}),h("h1",{class:"app-title"},"EvaMed"),h("p",{class:"app-subtitle"},"Medical Practice Management")],-1)),h("form",{onSubmit:vn(p,["prevent"]),class:"login-form",autocomplete:"off"},[o.value.length>0?(R(),Ae("div",Cze,[y[4]||(y[4]=h("label",{for:"user",class:"form-label"},"Select User",-1)),ma(h("select",{id:"user","onUpdate:modelValue":y[0]||(y[0]=w=>i.value=w),class:"form-input",disabled:r.value||c.value},[y[3]||(y[3]=h("option",{value:null},"Select a user...",-1)),(R(!0),Ae(Ke,null,Gt(o.value,w=>(R(),Ae("option",{key:w.id,value:w.id},K(w.name||w.email)+" "+K(w.isAdmin?"(Admin)":""),9,Eze))),128))],8,Sze),[[P8,i.value]])])):ye("",!0),h("div",Bze,[y[7]||(y[7]=h("label",{for:"passcode",class:"form-label"},"Enter Passcode",-1)),h("div",kze,[ma(h("input",{id:"passcode","onUpdate:modelValue":y[1]||(y[1]=w=>a.value=w),type:A.value?"text":"password",class:"form-input",placeholder:"Enter your passcode",disabled:r.value,autocomplete:"off","data-form-type":"other","data-lpignore":"true","data-1p-ignore":"true",autofocus:""},null,8,Tze),[[U8,a.value]]),h("button",{type:"button",class:"passcode-toggle-btn",onClick:y[2]||(y[2]=w=>A.value=!A.value),tabindex:"-1"},[A.value?(R(),Ae("svg",Ize,[...y[5]||(y[5]=[h("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},null,-1),h("line",{x1:"1",y1:"1",x2:"23",y2:"23"},null,-1)])])):(R(),Ae("svg",Fze,[...y[6]||(y[6]=[h("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},null,-1),h("circle",{cx:"12",cy:"12",r:"3"},null,-1)])]))])])]),s.value?(R(),Ae("div",Pze,K(s.value),1)):ye("",!0),h("button",{type:"submit",class:"login-button",disabled:r.value||!a.value},[r.value?(R(),Ae("span",Uze)):(R(),Ae("span",Rze,"Sign In"))],8,Dze)],32),y[9]||(y[9]=h("div",{class:"login-footer"},[h("p",null,"Contact admin if you don't have a passcode")],-1))])]))}},Vze=qt(Nze,[["__scopeId","data-v-6be93448"]]),Lze={class:"user-management-container"},Mze={key:0,class:"loading-container"},Oze={key:1,class:"error-container"},Hze={key:2,class:"users-list"},$ze={class:"user-info"},Qze={class:"user-avatar"},Gze={class:"user-details"},zze={class:"user-name"},Kze={class:"user-email"},Wze={class:"user-meta"},jze={key:0,class:"badge badge-info"},qze={key:1,class:"badge badge-warning"},Yze={class:"permission-count"},Xze={class:"user-actions"},Jze=["onClick"],Zze=["onClick"],eKe=["onClick"],tKe=["onClick"],nKe={key:0,class:"empty-state"},aKe={class:"modal-content"},rKe={key:0,class:"error-message"},sKe={key:1,class:"error-message"},oKe={class:"form-group"},iKe={class:"form-group"},lKe={class:"form-group"},uKe={class:"form-group"},cKe={key:0,class:"field-error-message"},dKe={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",style:{display:"inline-block","vertical-align":"middle","margin-right":"4px"}},AKe={key:1,class:"field-help-text"},fKe={class:"form-actions"},mKe=["disabled"],vKe={key:0},hKe={key:1},pKe={class:"modal-content modal-large"},gKe={class:"modal-title"},yKe={class:"permissions-editor"},_Ke={class:"features-list"},wKe={key:0,class:"loading-features"},bKe={class:"feature-checkbox"},xKe=["checked","onChange"],CKe={class:"feature-name"},SKe={class:"feature-description"},EKe={key:0,class:"actions-section"},BKe={class:"actions-list"},kKe=["checked","onChange"],TKe={class:"permissions-summary"},IKe={class:"selected-permissions"},FKe={key:0,class:"no-permissions"},PKe={class:"form-actions"},DKe={class:"modal-content"},UKe={class:"modal-title"},RKe={key:0,class:"passcode-result"},NKe={class:"passcode-display"},VKe={key:1,class:"passcode-options"},LKe={class:"form-actions"},MKe={class:"modal-content"},OKe={class:"modal-title"},HKe={key:0,class:"loading-container"},$Ke={key:1,class:"error-message"},QKe={key:2,class:"passcode-result"},GKe={class:"passcode-display"},zKe={__name:"user-management",setup(e){uh(),W_(At);const t=V([]),n=V([]),a=V(!0),r=V(null),s=V(!1),o=V(!1),i=V(!1),c=V(!1),A=V({name:"",email:"",doctorId:null,passcode:""}),d=V(null),f=V([]),m=V(null),v=V(null),p=V(!1),g=V(null),y=V(null),w=V(!1),b=V(null);V(!1);const x=At,T=async()=>{a.value=!0,r.value=null;try{const[J,M]=await Promise.all([x.get("/admin/users"),x.get("/admin/users/features")]);t.value=J.data.users||[],n.value=M.data.features||[]}catch(J){r.value=J.response?.data?.error||"Failed to load users",console.error("Load users error:",J)}finally{a.value=!1}},D=J=>J?J.split(" ").map(M=>M[0]).join("").toUpperCase().slice(0,2):"?",k=async()=>{v.value=null,g.value=null,p.value=!0;try{const J=await x.post("/admin/users",{name:A.value.name,email:A.value.email||void 0,doctorId:A.value.doctorId||void 0,passcode:A.value.passcode?.trim()||void 0,generatePasscode:!A.value.passcode?.trim()});if(J.data.success){const M=J.data.passcode;alert(`User created!

Passcode: ${M}

Please save this passcode securely.`),S(),T()}}catch(J){const M=J.response?.data?.error||"Failed to create user";J.response?.data?.code==="PASSCODE_NOT_UNIQUE"||M.toLowerCase().includes("passcode")?(g.value="This passcode is already in use by another user. Please use a different unique passcode.",v.value=null,setTimeout(()=>{const Y=document.getElementById("passcode");Y&&(Y.focus(),Y.scrollIntoView({behavior:"smooth",block:"center"}),Y.classList.add("shake-animation"),setTimeout(()=>{Y.classList.remove("shake-animation")},500))},100)):(v.value=M,g.value=null)}finally{p.value=!1}},S=()=>{s.value=!1,A.value={name:"",email:"",doctorId:null,passcode:""},v.value=null,g.value=null},E=J=>{try{if(!n.value||n.value.length===0){console.warn("Features not loaded yet, loading now..."),T().then(()=>{n.value&&n.value.length>0?(d.value=J,f.value=[...J.permissions||[]],o.value=!0):alert("Failed to load features. Please try again.")});return}if(!J||!J.id){console.error("Invalid user data:",J),alert("Invalid user data");return}d.value=J,f.value=[...J.permissions||[]],o.value=!0}catch(M){console.error("Error opening edit permissions modal:",M),alert("Error opening permissions editor. Please try again.")}},C=ne(()=>{const J=new Set;return f.value&&f.value.length>0&&f.value.forEach(M=>{if(M&&typeof M=="string"){const te=M.split(".")[0];te&&J.add(te)}}),J}),U=ne(()=>new Set(f.value||[])),F=J=>C.value.has(J),L=J=>U.value.has(J),H=(J,M)=>{const te=n.value.find(Y=>Y.id===J);if(te)if(M){const Y=te.actions.find(W=>W.action==="view");Y&&!f.value.includes(Y.id)&&f.value.push(Y.id)}else f.value=f.value.filter(Y=>!Y.startsWith(`${J}.`))},ue=(J,M)=>{M?f.value.includes(J)||f.value.push(J):f.value=f.value.filter(te=>te!==J)},ie=async()=>{try{await x.put(`/admin/users/${d.value.id}/permissions`,{permissions:f.value}),alert("Permissions updated successfully!"),o.value=!1,T()}catch(J){alert(J.response?.data?.error||"Failed to update permissions")}},Q=J=>{d.value=J,m.value=null,i.value=!0},X=async()=>{try{const J=await x.put(`/admin/users/${d.value.id}/passcode`,{generateNew:!0});J.data.success&&(m.value=J.data.passcode)}catch(J){alert(J.response?.data?.error||"Failed to reset passcode")}},le=()=>{i.value=!1,m.value=null},Z=async J=>{console.log("View passcode clicked for user:",J),d.value=J,y.value=null,b.value=null,w.value=!0,c.value=!0;try{console.log("Fetching passcode for user ID:",J.id);const M=await x.get(`/admin/users/${J.id}/passcode`);console.log("Passcode response:",M.data),M.data.success?y.value=M.data.passcode:b.value=M.data.error||"Failed to retrieve passcode"}catch(M){console.error("Error fetching passcode:",M),b.value=M.response?.data?.error||"Failed to retrieve passcode"}finally{w.value=!1}},re=async()=>{if(y.value)try{await navigator.clipboard.writeText(y.value),alert("Passcode copied to clipboard!")}catch{const M=document.createElement("textarea");M.value=y.value,M.style.position="fixed",M.style.opacity="0",document.body.appendChild(M),M.select();try{document.execCommand("copy"),alert("Passcode copied to clipboard!")}catch{alert("Failed to copy passcode. Please copy manually.")}document.body.removeChild(M)}},q=()=>{c.value=!1,y.value=null,b.value=null,w.value=!1},P=()=>{v.value=null,g.value=null,A.value={name:"",email:"",doctorId:null,passcode:""},s.value=!0},G=J=>{alert("Edit user functionality coming soon")};return dn(()=>{T()}),(J,M)=>(R(),Ae("div",Lze,[h("div",{class:"page-header"},[M[11]||(M[11]=h("h1",{class:"page-title"},"User Management",-1)),h("button",{class:"btn-primary",onClick:P},[...M[10]||(M[10]=[h("span",{class:"btn-icon"},"+",-1),O(" Add User ",-1)])])]),a.value?(R(),Ae("div",Mze,[...M[12]||(M[12]=[h("div",{class:"loading-spinner"},null,-1),h("p",null,"Loading users...",-1)])])):r.value?(R(),Ae("div",Oze,[h("p",null,K(r.value),1),h("button",{class:"btn-secondary",onClick:T},"Retry")])):(R(),Ae("div",Hze,[(R(!0),Ae(Ke,null,Gt(t.value,te=>(R(),Ae("div",{key:te.id,class:ct(["user-card",{inactive:!te.isActive}])},[h("div",$ze,[h("div",Qze,K(D(te.name)),1),h("div",Gze,[h("h3",zze,K(te.name),1),h("p",Kze,K(te.email||"No email"),1),h("div",Wze,[te.doctorId?(R(),Ae("span",jze,"Doctor #"+K(te.doctorId),1)):ye("",!0),te.isActive?ye("",!0):(R(),Ae("span",qze,"Inactive")),h("span",Yze,K(te.permissions.length)+" permissions",1)])])]),h("div",Xze,[h("button",{class:"btn-icon-action",onClick:Y=>E(te),title:"Edit Permissions"},[...M[13]||(M[13]=[h("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[h("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),h("polyline",{points:"16 17 21 12 16 7"}),h("line",{x1:"21",y1:"12",x2:"9",y2:"12"})],-1)])],8,Jze),h("button",{class:"btn-icon-action",onClick:Y=>Z(te),title:"View Passcode"},[...M[14]||(M[14]=[h("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[h("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),h("circle",{cx:"12",cy:"12",r:"3"})],-1)])],8,Zze),h("button",{class:"btn-icon-action",onClick:Y=>Q(te),title:"Reset Passcode"},[...M[15]||(M[15]=[h("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[h("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),h("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})],-1)])],8,eKe),h("button",{class:"btn-icon-action",onClick:Y=>G(),title:"Edit User"},[...M[16]||(M[16]=[h("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[h("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),h("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,tKe)])],2))),128)),t.value.length===0?(R(),Ae("div",nKe,[...M[17]||(M[17]=[h("p",null,"No users found. Create your first user to get started.",-1)])])):ye("",!0)])),s.value?(R(),Ae("div",{key:3,class:"modal-overlay",onClick:M[5]||(M[5]=vn(te=>s.value=!1,["self"]))},[h("div",aKe,[M[25]||(M[25]=h("h2",{class:"modal-title"},"Create New User",-1)),g.value?(R(),Ae("div",rKe,[M[18]||(M[18]=h("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[h("circle",{cx:"12",cy:"12",r:"10"}),h("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),h("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})],-1)),h("span",null,K(g.value),1)])):ye("",!0),v.value&&!g.value?(R(),Ae("div",sKe,[M[19]||(M[19]=h("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[h("circle",{cx:"12",cy:"12",r:"10"}),h("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),h("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})],-1)),h("span",null,K(v.value),1)])):ye("",!0),h("form",{onSubmit:vn(k,["prevent"]),class:"modal-form"},[h("div",oKe,[M[20]||(M[20]=h("label",{for:"name"},"Name *",-1)),ma(h("input",{id:"name","onUpdate:modelValue":M[0]||(M[0]=te=>A.value.name=te),type:"text",required:"",placeholder:"Enter user name"},null,512),[[QA,A.value.name]])]),h("div",iKe,[M[21]||(M[21]=h("label",{for:"email"},"Email",-1)),ma(h("input",{id:"email","onUpdate:modelValue":M[1]||(M[1]=te=>A.value.email=te),type:"email",placeholder:"Enter email (optional)"},null,512),[[QA,A.value.email]])]),h("div",lKe,[M[22]||(M[22]=h("label",{for:"doctorId"},"Link to Doctor (ID)",-1)),ma(h("input",{id:"doctorId","onUpdate:modelValue":M[2]||(M[2]=te=>A.value.doctorId=te),type:"number",placeholder:"Doctor ID (optional)"},null,512),[[QA,A.value.doctorId,void 0,{number:!0}]])]),h("div",uKe,[M[24]||(M[24]=h("label",{for:"passcode"},"Passcode",-1)),ma(h("input",{id:"passcode","onUpdate:modelValue":M[3]||(M[3]=te=>A.value.passcode=te),type:"text",class:ct({"input-error":g.value}),placeholder:"Enter passcode (leave empty to auto-generate)",onInput:M[4]||(M[4]=te=>g.value=null)},null,34),[[QA,A.value.passcode]]),g.value?(R(),Ae("p",cKe,[(R(),Ae("svg",dKe,[...M[23]||(M[23]=[h("circle",{cx:"12",cy:"12",r:"10"},null,-1),h("line",{x1:"12",y1:"8",x2:"12",y2:"12"},null,-1),h("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"},null,-1)])])),O(" "+K(g.value),1)])):(R(),Ae("p",AKe," Leave empty to auto-generate a unique passcode "))]),h("div",fKe,[h("button",{type:"button",class:"btn-secondary",onClick:S},"Cancel"),h("button",{type:"submit",class:"btn-primary",disabled:!A.value.name||p.value},[p.value?(R(),Ae("span",vKe,"Creating...")):(R(),Ae("span",hKe,"Create User"))],8,mKe)])],32)])])):ye("",!0),o.value?(R(),Ae("div",{key:4,class:"modal-overlay",onClick:M[7]||(M[7]=vn(te=>o.value=!1,["self"]))},[h("div",pKe,[h("h2",gKe,"Edit Permissions: "+K(d.value?.name),1),h("div",yKe,[M[27]||(M[27]=h("p",{class:"help-text"}," Select features to grant access. Once a feature is selected, you can assign specific actions. ",-1)),h("div",_Ke,[!n.value||n.value.length===0?(R(),Ae("div",wKe,[...M[26]||(M[26]=[h("p",null,"Loading features...",-1)])])):(R(!0),Ae(Ke,{key:1},Gt(n.value,te=>(R(),Ae("div",{key:te.id,class:"feature-item"},[h("label",bKe,[h("input",{type:"checkbox",checked:F(te.id),onChange:Y=>H(te.id,Y.target.checked)},null,40,xKe),h("span",CKe,K(te.name),1),h("span",SKe,K(te.description),1)]),F(te.id)?(R(),Ae("div",EKe,[h("h4",null,"Actions for "+K(te.name),1),h("div",BKe,[(R(!0),Ae(Ke,null,Gt(te.actions,Y=>(R(),Ae("label",{key:Y.id,class:"action-checkbox"},[h("input",{type:"checkbox",checked:L(Y.id),onChange:W=>ue(Y.id,W.target.checked)},null,40,kKe),h("span",null,K(Y.description),1)]))),128))])])):ye("",!0)]))),128))]),h("div",TKe,[h("h4",null,"Selected Permissions ("+K(f.value.length)+")",1),h("div",IKe,[(R(!0),Ae(Ke,null,Gt(f.value,te=>(R(),Ae("span",{key:te,class:"permission-badge"},K(te),1))),128)),f.value.length===0?(R(),Ae("span",FKe," No permissions selected ")):ye("",!0)])])]),h("div",PKe,[h("button",{type:"button",class:"btn-secondary",onClick:M[6]||(M[6]=te=>o.value=!1)},"Cancel"),h("button",{type:"button",class:"btn-primary",onClick:ie},"Save Permissions")])])])):ye("",!0),i.value?(R(),Ae("div",{key:5,class:"modal-overlay",onClick:M[8]||(M[8]=vn(te=>i.value=!1,["self"]))},[h("div",DKe,[h("h2",UKe,"Reset Passcode: "+K(d.value?.name),1),m.value?(R(),Ae("div",RKe,[M[28]||(M[28]=h("p",{class:"passcode-label"},"New Passcode:",-1)),h("div",NKe,K(m.value),1),M[29]||(M[29]=h("p",{class:"passcode-warning"}," Save this passcode securely. It won't be shown again.",-1))])):(R(),Ae("div",VKe,[...M[30]||(M[30]=[h("p",null,"Generate a new passcode for this user?",-1),h("p",{class:"warning-text"},"This will invalidate all active sessions for this user.",-1)])])),h("div",LKe,[h("button",{type:"button",class:"btn-secondary",onClick:le},K(m.value?"Close":"Cancel"),1),m.value?ye("",!0):(R(),Ae("button",{key:0,type:"button",class:"btn-primary",onClick:X}," Generate New Passcode "))])])])):ye("",!0),c.value?(R(),Ae("div",{key:6,class:"modal-overlay",onClick:M[9]||(M[9]=vn(te=>c.value=!1,["self"]))},[h("div",MKe,[h("h2",OKe,"View Passcode: "+K(d.value?.name),1),w.value?(R(),Ae("div",HKe,[...M[31]||(M[31]=[h("div",{class:"loading-spinner"},null,-1),h("p",null,"Loading passcode...",-1)])])):b.value?(R(),Ae("div",$Ke,[M[32]||(M[32]=h("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[h("circle",{cx:"12",cy:"12",r:"10"}),h("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),h("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})],-1)),h("span",null,K(b.value),1)])):y.value?(R(),Ae("div",QKe,[M[33]||(M[33]=h("p",{class:"passcode-label"},"Passcode:",-1)),h("div",GKe,K(y.value),1),h("button",{type:"button",class:"btn-secondary",onClick:re,style:{"margin-top":"10px"}}," Copy to Clipboard "),M[34]||(M[34]=h("p",{class:"passcode-warning"}," This passcode is stored in plain text. Keep it secure.",-1))])):ye("",!0),h("div",{class:"form-actions"},[h("button",{type:"button",class:"btn-secondary",onClick:q},"Close")])])])):ye("",!0)]))}},kN=qt(zKe,[["__scopeId","data-v-79c64cc9"]]),KKe=[{path:"/",name:"SplashPage",component:$Ge,meta:{requiresAuth:!1}},{name:"LoginPage",component:TGe,path:"/login",meta:{requiresAuth:!1}},{name:"MobileHome",component:zGe,path:"/mobile",meta:{requiresAuth:!1}},{name:"PatientDetailMobile",component:ZGe,path:"/mobile/:id",meta:{requiresAuth:!1}},{name:"WelcomePage",component:PGe,path:"/welcome",meta:{requiresAuth:!0}},{name:"HomePage",component:cCe,path:"/home/:tab?",meta:{requiresAuth:!0,requiredFeature:"home"}},{name:"PatientsLandingPage",component:cSe,path:"/patients",meta:{requiresAuth:!0,requiredFeature:"patients"},children:[{path:":id",name:"PatientDetailPage",component:eIe,meta:{requiresAuth:!0,requiredFeature:"patients"}}]},{name:"TasksPage",component:X5e,path:"/tasks",meta:{requiresAuth:!0,requiredFeature:"tasks"}},{name:"AdminPage",component:pFe,path:"/admin",meta:{requiresAuth:!0,requiresAdmin:!0}},{name:"DataPage",component:g6e,path:"/data",meta:{requiresAuth:!0,requiredFeature:"data"}},{name:"ResearchPage",component:m5e,path:"/research",meta:{requiresAuth:!0,requiredFeature:"research"}},{name:"ReportsPage",component:zMe,path:"/reports",meta:{requiresAuth:!0,requiredFeature:"reports"}},{name:"PaymentsPage",component:pMe,path:"/payments",meta:{requiresAuth:!0,requiredFeature:"billing"}},{name:"PharmacyQueuePage",component:S9e,path:"/pharmacy/queue",meta:{requiresAuth:!0,requiredFeature:"pharmacy.queue"}},{name:"PharmacyInventoryPage",component:MQe,path:"/pharmacy/inventory",meta:{requiresAuth:!0,requiredFeature:"pharmacy.inventory"}},{name:"PharmacyPurchasePage",component:q7e,path:"/pharmacy/purchase",meta:{requiresAuth:!0,requiredFeature:"pharmacy.purchase"}},{name:"PharmacyReportsPage",component:wGe,path:"/pharmacy/reports",meta:{requiresAuth:!0,requiredFeature:"pharmacy.reports"}},{name:"DesktopPasscodeLogin",component:wze,path:"/desktop/passcode",meta:{requiresAuth:!1,requiresGoogleAuth:!0}},{name:"WebLogin",component:Vze,path:"/web/login",meta:{requiresAuth:!1}},{name:"UserManagement",component:kN,path:"/admin/users",meta:{requiresAuth:!0,requiresAdmin:!0}},{name:"UserManagementEdit",component:kN,path:"/admin/users/:id",meta:{requiresAuth:!0,requiresAdmin:!0}}],Ls=Ore({history:vre(),routes:KKe});Ls.beforeEach(async(e,t,n)=>{const a=t.query.server||e.query.server,r=t.query.endpoint||e.query.endpoint;if((a||r)&&!e.query.server&&!e.query.endpoint)return console.log("Preserving query params:",{serverParam:a,endpointParam:r}),n({...e,query:{...e.query,...a&&{server:a},...r&&{endpoint:r}}});if(Ra()){const o=Si.getters["auth/isAuthenticated"],i=!!localStorage.getItem("desktopSessionToken"),c=o&&i,A=uh(),d=A.isAdmin.value,f=A.permissions.value||[];console.log("Navigation guard triggered (Electron mode):",{to:e.path,from:t.path,requiresAuth:e.matched.some(w=>w.meta.requiresAuth),requiresGoogleAuth:e.matched.some(w=>w.meta.requiresGoogleAuth),requiresAdmin:e.matched.some(w=>w.meta.requiresAdmin),requiredFeature:e.meta.requiredFeature,requiredPermission:e.meta.requiredPermission,isGoogleAuthenticated:o,hasDesktopSession:i,isFullyAuthenticated:c,isAdmin:d,permissionsCount:f.length});const m=e.matched.some(w=>w.meta.requiresAuth),v=e.matched.some(w=>w.meta.requiresGoogleAuth),p=e.matched.some(w=>w.meta.requiresAdmin),g=e.meta.requiredFeature,y=e.meta.requiredPermission;if(m&&!c)if(o){console.log("Route requires auth, have Google auth but no passcode, redirecting to passcode page"),n("/desktop/passcode");return}else{console.log("Route requires auth but no Google auth, redirecting to login"),n("/login");return}if(p&&!(d||f.some(b=>b&&typeof b=="string"&&b.startsWith("admin.")))){console.log("Route requires admin access or admin permissions, redirecting to home"),n("/home");return}if(y&&!d){if(!f.includes(y)){console.log(`Route requires permission: ${y}, redirecting to home`),n("/home");return}}if(g&&((A.features.value||[]).find(b=>b&&b.id===g),!d)){if(!f.some(x=>!x||typeof x!="string"?!1:x===g?!0:x.startsWith(`${g}.`))){console.log(`Route requires feature access: ${g}, user doesn't have access, redirecting to home`),n("/home");return}}if(v&&!o){console.log("Route requires Google auth but user not signed in, redirecting to login"),n("/login");return}if(e.path==="/login"){if(c){console.log("Fully authenticated user trying to access login page, redirecting to home"),n("/home");return}else if(o){console.log("Google authenticated user trying to access login page, redirecting to passcode"),n("/desktop/passcode");return}}if(e.path==="/desktop/passcode"&&c){console.log("Fully authenticated user trying to access passcode page, redirecting to home"),n("/home");return}console.log("Navigation allowed (Electron mode)"),n()}else{const o=zf(),i=!!localStorage.getItem("sessionToken"),c=o.isAuthenticated.value,A=o.isAdmin.value,d=o.permissions.value||[];console.log("Navigation guard triggered (Web mode):",{to:e.path,from:t.path,requiresAuth:e.matched.some(y=>y.meta.requiresAuth),requiresAdmin:e.matched.some(y=>y.meta.requiresAdmin),requiredFeature:e.meta.requiredFeature,requiredPermission:e.meta.requiredPermission,hasSessionToken:i,isWebAuthenticated:c,sessionTokenValue:o.sessionToken.value?"exists":"null",isAdmin:A,permissionsCount:d.length});const f=e.matched.some(y=>y.meta.requiresAuth),m=e.matched.some(y=>y.meta.requiresAdmin),v=e.meta.requiredFeature,p=e.meta.requiredPermission,g=()=>{const b=new URLSearchParams(window.location.search).get("endpoint")||e.query.endpoint||t.query.endpoint;return b?`/web/login?endpoint=${encodeURIComponent(b)}`:"/web/login"};if(e.path==="/"&&!c){console.log("On splash page but not authenticated, redirecting to web login");const y=g();console.log("Redirecting to:",y),n(y);return}if(f&&!c){console.log("Route requires auth but not authenticated, redirecting to web login");const y=g();console.log("Redirecting to:",y),n(y);return}if(m&&!A){console.log("Route requires admin access, redirecting to home"),n("/home");return}if(p&&!A){if(!d.includes(p)){console.log(`Route requires permission: ${p}, redirecting to home`),n("/home");return}}if(v&&!A){if(!d.some(w=>!w||typeof w!="string"?!1:w===v?!0:w.startsWith(`${v}.`))){console.log(`Route requires feature access: ${v}, user doesn't have access, redirecting to home`),n("/home");return}}if(e.path==="/web/login"&&c){console.log("Authenticated user trying to access web login page, redirecting to home"),n("/home");return}console.log("Navigation allowed (Web mode)"),n()}});const WKe=lt({...Jt(),...Ma(g6(),["fullHeight"]),...ua()},"VApp"),jKe=gt()({name:"VApp",props:WKe(),setup(e,t){let{slots:n}=t;const a=ka(e),{layoutClasses:r,getLayoutItem:s,items:o,layoutRef:i}=_6({...e,fullHeight:!0}),{rtlClasses:c}=Xr();return St(()=>h("div",{ref:i,class:ct(["v-application",a.themeClasses.value,r.value,c.value,e.class]),style:Ut([e.style])},[h("div",{class:"v-application__wrap"},[n.default?.()])])),{getLayoutItem:s,items:o,theme:a}}}),Nn=lt({tag:{type:[String,Object,Function],default:"div"}},"tag"),rQ=lt({text:String,...Jt(),...Nn()},"VToolbarTitle"),o4=gt()({name:"VToolbarTitle",props:rQ(),setup(e,t){let{slots:n}=t;return St(()=>{const a=!!(n.default||n.text||e.text);return l(e.tag,{class:ct(["v-toolbar-title",e.class]),style:Ut(e.style)},{default:()=>[a&&h("div",{class:"v-toolbar-title__placeholder"},[n.text?n.text():e.text,n.default?.()])]})}),{}}}),qKe=lt({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function Pi(e,t,n){return gt()({name:e,props:qKe({mode:n,origin:t}),setup(a,r){let{slots:s}=r;const o={onBeforeEnter(i){a.origin&&(i.style.transformOrigin=a.origin)},onLeave(i){if(a.leaveAbsolute){const{offsetTop:c,offsetLeft:A,offsetWidth:d,offsetHeight:f}=i;i._transitionInitialStyles={position:i.style.position,top:i.style.top,left:i.style.left,width:i.style.width,height:i.style.height},i.style.position="absolute",i.style.top=`${c}px`,i.style.left=`${A}px`,i.style.width=`${d}px`,i.style.height=`${f}px`}a.hideOnLeave&&i.style.setProperty("display","none","important")},onAfterLeave(i){if(a.leaveAbsolute&&i?._transitionInitialStyles){const{position:c,top:A,left:d,width:f,height:m}=i._transitionInitialStyles;delete i._transitionInitialStyles,i.style.position=c||"",i.style.top=A||"",i.style.left=d||"",i.style.width=f||"",i.style.height=m||""}}};return()=>{const i=a.group?uk:Md;return Zl(i,{name:a.disabled?"":e,css:!a.disabled,...a.group?void 0:{mode:a.mode},...a.disabled?{}:o},s.default)}}})}function sQ(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return gt()({name:e,props:{mode:{type:String,default:n},disabled:Boolean,group:Boolean},setup(a,r){let{slots:s}=r;const o=a.group?uk:Md;return()=>Zl(o,{name:a.disabled?"":e,css:!a.disabled,...a.disabled?{}:t},s.default)}})}function oQ(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",a=$o(`offset-${n}`);return{onBeforeEnter(o){o._parent=o.parentNode,o._initialStyle={transition:o.style.transition,overflow:o.style.overflow,[n]:o.style[n]}},onEnter(o){const i=o._initialStyle;if(!i)return;o.style.setProperty("transition","none","important"),o.style.overflow="hidden";const c=`${o[a]}px`;o.style[n]="0",o.offsetHeight,o.style.transition=i.transition,e&&o._parent&&o._parent.classList.add(e),requestAnimationFrame(()=>{o.style[n]=c})},onAfterEnter:s,onEnterCancelled:s,onLeave(o){o._initialStyle={transition:"",overflow:o.style.overflow,[n]:o.style[n]},o.style.overflow="hidden",o.style[n]=`${o[a]}px`,o.offsetHeight,requestAnimationFrame(()=>o.style[n]="0")},onAfterLeave:r,onLeaveCancelled:r};function r(o){e&&o._parent&&o._parent.classList.remove(e),s(o)}function s(o){if(!o._initialStyle)return;const i=o._initialStyle[n];o.style.overflow=o._initialStyle.overflow,i!=null&&(o.style[n]=i),delete o._initialStyle}}const YKe=lt({target:[Object,Array]},"v-dialog-transition"),QC=new WeakMap,jw=gt()({name:"VDialogTransition",props:YKe(),setup(e,t){let{slots:n}=t;const a={onBeforeEnter(r){r.style.pointerEvents="none",r.style.visibility="hidden"},async onEnter(r,s){await new Promise(v=>requestAnimationFrame(v)),await new Promise(v=>requestAnimationFrame(v)),r.style.visibility="";const o=IN(e.target,r),{x:i,y:c,sx:A,sy:d,speed:f}=o;QC.set(r,o);const m=zA(r,[{transform:`translate(${i}px, ${c}px) scale(${A}, ${d})`,opacity:0},{}],{duration:225*f,easing:qte});TN(r)?.forEach(v=>{zA(v,[{opacity:0},{opacity:0,offset:.33},{}],{duration:450*f,easing:b0})}),m.finished.then(()=>s())},onAfterEnter(r){r.style.removeProperty("pointer-events")},onBeforeLeave(r){r.style.pointerEvents="none"},async onLeave(r,s){await new Promise(v=>requestAnimationFrame(v));let o;!QC.has(r)||Array.isArray(e.target)||e.target.offsetParent||e.target.getClientRects().length?o=IN(e.target,r):o=QC.get(r);const{x:i,y:c,sx:A,sy:d,speed:f}=o;zA(r,[{},{transform:`translate(${i}px, ${c}px) scale(${A}, ${d})`,opacity:0}],{duration:125*f,easing:Yte}).finished.then(()=>s()),TN(r)?.forEach(v=>{zA(v,[{},{opacity:0,offset:.2},{opacity:0}],{duration:250*f,easing:b0})})},onAfterLeave(r){r.style.removeProperty("pointer-events")}};return()=>e.target?l(Md,Pe({name:"dialog-transition"},a,{css:!1}),n):l(Md,{name:"dialog-transition"},n)}});function TN(e){const t=e.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list")?.children;return t&&[...t]}function IN(e,t){const n=j8(e),a=mk(t),[r,s]=getComputedStyle(t).transformOrigin.split(" ").map(w=>parseFloat(w)),[o,i]=getComputedStyle(t).getPropertyValue("--v-overlay-anchor-origin").split(" ");let c=n.left+n.width/2;o==="left"||i==="left"?c-=n.width/2:(o==="right"||i==="right")&&(c+=n.width/2);let A=n.top+n.height/2;o==="top"||i==="top"?A-=n.height/2:(o==="bottom"||i==="bottom")&&(A+=n.height/2);const d=n.width/a.width,f=n.height/a.height,m=Math.max(1,d,f),v=d/m||0,p=f/m||0,g=a.width*a.height/(window.innerWidth*window.innerHeight),y=g>.12?Math.min(1.5,(g-.12)*10+1):1;return{x:c-(r+a.left),y:A-(s+a.top),sx:v,sy:p,speed:y}}const XKe=Pi("fab-transition","center center","out-in"),JKe=Pi("dialog-bottom-transition"),ZKe=Pi("dialog-top-transition"),K0=Pi("fade-transition"),i4=Pi("scale-transition"),eWe=Pi("scroll-x-transition"),tWe=Pi("scroll-x-reverse-transition"),nWe=Pi("scroll-y-transition"),aWe=Pi("scroll-y-reverse-transition"),rWe=Pi("slide-x-transition"),sWe=Pi("slide-x-reverse-transition"),l4=Pi("slide-y-transition"),oWe=Pi("slide-y-reverse-transition"),qw=sQ("expand-transition",oQ()),u4=sQ("expand-x-transition",oQ("",!0)),iWe=lt({defaults:Object,disabled:Boolean,reset:[Number,String],root:[Boolean,String],scoped:Boolean},"VDefaultsProvider"),Vn=gt(!1)({name:"VDefaultsProvider",props:iWe(),setup(e,t){let{slots:n}=t;const{defaults:a,disabled:r,reset:s,root:o,scoped:i}=Lf(e);return wr(a,{reset:s,root:o,scoped:i,disabled:r}),()=>n.default?.()}}),Mr=lt({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function Or(e){return{dimensionStyles:ne(()=>{const n={},a=Kt(e.height),r=Kt(e.maxHeight),s=Kt(e.maxWidth),o=Kt(e.minHeight),i=Kt(e.minWidth),c=Kt(e.width);return a!=null&&(n.height=a),r!=null&&(n.maxHeight=r),s!=null&&(n.maxWidth=s),o!=null&&(n.minHeight=o),i!=null&&(n.minWidth=i),c!=null&&(n.width=c),n})}}function lWe(e){return{aspectStyles:ne(()=>{const t=Number(e.aspectRatio);return t?{paddingBottom:String(1/t*100)+"%"}:void 0})}}const iQ=lt({aspectRatio:[String,Number],contentClass:null,inline:Boolean,...Jt(),...Mr()},"VResponsive"),XE=gt()({name:"VResponsive",props:iQ(),setup(e,t){let{slots:n}=t;const{aspectStyles:a}=lWe(e),{dimensionStyles:r}=Or(e);return St(()=>h("div",{class:ct(["v-responsive",{"v-responsive--inline":e.inline},e.class]),style:Ut([r.value,e.style])},[h("div",{class:"v-responsive__sizer",style:Ut(a.value)},null),n.additional?.(),n.default&&h("div",{class:ct(["v-responsive__content",e.contentClass])},[n.default()])])),{}}});function c4(e){return fk(()=>{const t=Tu(e),n=[],a={};if(t.background)if(BS(t.background)){if(a.backgroundColor=t.background,!t.text&&Vte(t.background)){const r=Ci(t.background);if(r.a==null||r.a===1){const s=r6(r);a.color=s,a.caretColor=s}}}else n.push(`bg-${t.background}`);return t.text&&(BS(t.text)?(a.color=t.text,a.caretColor=t.text):n.push(`text-${t.text}`)),{colorClasses:n,colorStyles:a}})}function Rs(e){const{colorClasses:t,colorStyles:n}=c4(()=>({text:Tu(e)}));return{textColorClasses:t,textColorStyles:n}}function Fa(e){const{colorClasses:t,colorStyles:n}=c4(()=>({background:Tu(e)}));return{backgroundColorClasses:t,backgroundColorStyles:n}}const lr=lt({rounded:{type:[Boolean,Number,String],default:void 0},tile:Boolean},"rounded");function xr(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Mu();return{roundedClasses:ne(()=>{const a=Yr(e)?e.value:e.rounded,r=Yr(e)?e.value:e.tile,s=[];if(r||a===!1)s.push("rounded-0");else if(a===!0||a==="")s.push(`${t}--rounded`);else if(typeof a=="string"||a===0)for(const o of String(a).split(" "))s.push(`rounded-${o}`);return s})}}const ru=lt({transition:{type:null,default:"fade-transition",validator:e=>e!==!0}},"transition"),ho=(e,t)=>{let{slots:n}=t;const{transition:a,disabled:r,group:s,...o}=e,{component:i=s?uk:Md,...c}=_0(a)?a:{};let A;return _0(a)?A=Pe(c,yte({disabled:r,group:s}),o):A=Pe({name:r||!a?"":a},o),Zl(i,A,n)};function uWe(e,t){if(!ck)return;const n=t.modifiers||{},a=t.value,{handler:r,options:s}=typeof a=="object"?a:{handler:a,options:{}},o=new IntersectionObserver(function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],c=arguments.length>1?arguments[1]:void 0;const A=e._observe?.[t.instance.$.uid];if(!A)return;const d=i.some(f=>f.isIntersecting);r&&(!n.quiet||A.init)&&(!n.once||d||A.init)&&r(d,i,c),d&&n.once?lQ(e,t):A.init=!0},s);e._observe=Object(e._observe),e._observe[t.instance.$.uid]={init:!1,observer:o},o.observe(e)}function lQ(e,t){const n=e._observe?.[t.instance.$.uid];n&&(n.observer.unobserve(e),delete e._observe[t.instance.$.uid])}const Wl={mounted:uWe,unmounted:lQ},uQ=lt({absolute:Boolean,alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...iQ(),...Jt(),...lr(),...ru()},"VImg"),Nc=gt()({name:"VImg",directives:{vIntersect:Wl},props:uQ(),emits:{loadstart:e=>!0,load:e=>!0,error:e=>!0},setup(e,t){let{emit:n,slots:a}=t;const{backgroundColorClasses:r,backgroundColorStyles:s}=Fa(()=>e.color),{roundedClasses:o}=xr(e),i=Pr("VImg"),c=Ht(""),A=V(),d=Ht(e.eager?"loading":"idle"),f=Ht(),m=Ht(),v=ne(()=>e.src&&typeof e.src=="object"?{src:e.src.src,srcset:e.srcset||e.src.srcset,lazySrc:e.lazySrc||e.src.lazySrc,aspect:Number(e.aspectRatio||e.src.aspect||0)}:{src:e.src,srcset:e.srcset,lazySrc:e.lazySrc,aspect:Number(e.aspectRatio||0)}),p=ne(()=>v.value.aspect||f.value/m.value||0);je(()=>e.src,()=>{g(d.value!=="idle")}),je(p,(L,H)=>{!L&&H&&A.value&&T(A.value)}),Xl(()=>g());function g(L){if(!(e.eager&&L)&&!(ck&&!L&&!e.eager)){if(d.value="loading",v.value.lazySrc){const H=new Image;H.src=v.value.lazySrc,T(H,null)}v.value.src&&_n(()=>{n("loadstart",A.value?.currentSrc||v.value.src),setTimeout(()=>{if(!i.isUnmounted)if(A.value?.complete){if(A.value.naturalWidth||w(),d.value==="error")return;p.value||T(A.value,null),d.value==="loading"&&y()}else p.value||T(A.value),b()})})}}function y(){i.isUnmounted||(b(),T(A.value),d.value="loaded",n("load",A.value?.currentSrc||v.value.src))}function w(){i.isUnmounted||(d.value="error",n("error",A.value?.currentSrc||v.value.src))}function b(){const L=A.value;L&&(c.value=L.currentSrc||L.src)}let x=-1;va(()=>{clearTimeout(x)});function T(L){let H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const ue=()=>{if(clearTimeout(x),i.isUnmounted)return;const{naturalHeight:ie,naturalWidth:Q}=L;ie||Q?(f.value=Q,m.value=ie):!L.complete&&d.value==="loading"&&H!=null?x=window.setTimeout(ue,H):(L.currentSrc.endsWith(".svg")||L.currentSrc.startsWith("data:image/svg+xml"))&&(f.value=1,m.value=1)};ue()}const D=Xe(()=>({"v-img__img--cover":e.cover,"v-img__img--contain":!e.cover})),k=()=>{if(!v.value.src||d.value==="idle")return null;const L=h("img",{class:ct(["v-img__img",D.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:v.value.src,srcset:v.value.srcset,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable,sizes:e.sizes,ref:A,onLoad:y,onError:w},null),H=a.sources?.();return l(ho,{transition:e.transition,appear:!0},{default:()=>[ma(H?h("picture",{class:"v-img__picture"},[H,L]):L,[[ii,d.value==="loaded"]])]})},S=()=>l(ho,{transition:e.transition},{default:()=>[v.value.lazySrc&&d.value!=="loaded"&&h("img",{class:ct(["v-img__img","v-img__img--preload",D.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:v.value.lazySrc,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable},null)]}),E=()=>a.placeholder?l(ho,{transition:e.transition,appear:!0},{default:()=>[(d.value==="loading"||d.value==="error"&&!a.error)&&h("div",{class:"v-img__placeholder"},[a.placeholder()])]}):null,C=()=>a.error?l(ho,{transition:e.transition,appear:!0},{default:()=>[d.value==="error"&&h("div",{class:"v-img__error"},[a.error()])]}):null,U=()=>e.gradient?h("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${e.gradient})`}},null):null,F=Ht(!1);{const L=je(p,H=>{H&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{F.value=!0})}),L())})}return St(()=>{const L=XE.filterProps(e);return ma(l(XE,Pe({class:["v-img",{"v-img--absolute":e.absolute,"v-img--booting":!F.value},r.value,o.value,e.class],style:[{width:Kt(e.width==="auto"?f.value:e.width)},s.value,e.style]},L,{aspectRatio:p.value,"aria-label":e.alt,role:e.alt?"img":void 0}),{additional:()=>h(Ke,null,[l(k,null,null),l(S,null,null),l(U,null,null),l(E,null,null),l(C,null,null)]),default:a.default}),[[Wl,{handler:g,options:e.options},null,{once:!0}]])}),{currentSrc:c,image:A,state:d,naturalWidth:f,naturalHeight:m}}}),Ko=lt({border:[Boolean,Number,String]},"border");function ci(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Mu();return{borderClasses:ne(()=>{const a=e.border;return a===!0||a===""?`${t}--border`:typeof a=="string"||a===0?String(a).split(" ").map(r=>`border-${r}`):[]})}}const Jr=lt({elevation:{type:[Number,String],validator(e){const t=parseInt(e);return!isNaN(t)&&t>=0&&t<=24}}},"elevation");function xs(e){return{elevationClasses:Xe(()=>{const n=Yr(e)?e.value:e.elevation;return n==null?[]:[`elevation-${n}`]})}}const cWe=[null,"prominent","default","comfortable","compact"],cQ=lt({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>cWe.includes(e)},extended:{type:Boolean,default:null},extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...Ko(),...Jt(),...Jr(),...lr(),...Nn({tag:"header"}),...ua()},"VToolbar"),JE=gt()({name:"VToolbar",props:cQ(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:a,backgroundColorStyles:r}=Fa(()=>e.color),{borderClasses:s}=ci(e),{elevationClasses:o}=xs(e),{roundedClasses:i}=xr(e),{themeClasses:c}=ka(e),{rtlClasses:A}=Xr(),d=Ht(e.extended===null?!!n.extension?.():e.extended),f=ne(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),m=ne(()=>d.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return wr({VBtn:{variant:"text"}}),St(()=>{const v=!!(e.title||n.title),p=!!(n.image||e.image),g=n.extension?.();return d.value=e.extended===null?!!g:e.extended,l(e.tag,{class:ct(["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},a.value,s.value,o.value,i.value,c.value,A.value,e.class]),style:Ut([r.value,e.style])},{default:()=>[p&&h("div",{key:"image",class:"v-toolbar__image"},[n.image?l(Vn,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},n.image):l(Nc,{key:"image-img",cover:!0,src:e.image},null)]),l(Vn,{defaults:{VTabs:{height:Kt(f.value)}}},{default:()=>[h("div",{class:"v-toolbar__content",style:{height:Kt(f.value)}},[n.prepend&&h("div",{class:"v-toolbar__prepend"},[n.prepend?.()]),v&&l(o4,{key:"title",text:e.title},{text:n.title}),n.default?.(),n.append&&h("div",{class:"v-toolbar__append"},[n.append?.()])])]}),l(Vn,{defaults:{VTabs:{height:Kt(m.value)}}},{default:()=>[l(qw,null,{default:()=>[d.value&&h("div",{class:"v-toolbar__extension",style:{height:Kt(m.value)}},[g])]})]})]})}),{contentHeight:f,extensionHeight:m}}}),dWe=lt({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function AWe(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:n}=t;let a=0,r=0;const s=V(null),o=Ht(0),i=Ht(0),c=Ht(0),A=Ht(!1),d=Ht(!1),f=ne(()=>Number(e.scrollThreshold)),m=ne(()=>Ja((f.value-o.value)/f.value||0)),v=()=>{const p=s.value;if(!p||n&&!n.value)return;a=o.value,o.value="window"in p?p.pageYOffset:p.scrollTop;const g=p instanceof Window?document.documentElement.scrollHeight:p.scrollHeight;if(r!==g){r=g;return}d.value=o.value<a,c.value=Math.abs(o.value-f.value)};return je(d,()=>{i.value=i.value||o.value}),je(A,()=>{i.value=0}),dn(()=>{je(()=>e.scrollTarget,p=>{const g=p?document.querySelector(p):window;g&&g!==s.value&&(s.value?.removeEventListener("scroll",v),s.value=g,s.value.addEventListener("scroll",v,{passive:!0}))},{immediate:!0})}),va(()=>{s.value?.removeEventListener("scroll",v)}),n&&je(n,v,{immediate:!0}),{scrollThreshold:f,currentScroll:o,currentThreshold:c,isScrollActive:A,scrollRatio:m,isScrollingUp:d,savedScroll:i}}function Jf(){const e=Ht(!1);return dn(()=>{window.requestAnimationFrame(()=>{e.value=!0})}),{ssrBootStyles:Xe(()=>e.value?void 0:{transition:"none !important"}),isBooted:th(e)}}const fWe=lt({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...cQ(),...Hf(),...dWe(),height:{type:[Number,String],default:64}},"VAppBar"),mWe=gt()({name:"VAppBar",props:fWe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=V(),r=ln(e,"modelValue"),s=ne(()=>{const b=new Set(e.scrollBehavior?.split(" ")??[]);return{hide:b.has("hide"),fullyHide:b.has("fully-hide"),inverted:b.has("inverted"),collapse:b.has("collapse"),elevate:b.has("elevate"),fadeImage:b.has("fade-image")}}),o=ne(()=>{const b=s.value;return b.hide||b.fullyHide||b.inverted||b.collapse||b.elevate||b.fadeImage||!r.value}),{currentScroll:i,scrollThreshold:c,isScrollingUp:A,scrollRatio:d}=AWe(e,{canScroll:o}),f=Xe(()=>s.value.hide||s.value.fullyHide),m=ne(()=>e.collapse||s.value.collapse&&(s.value.inverted?d.value>0:d.value===0)),v=ne(()=>e.flat||s.value.fullyHide&&!r.value||s.value.elevate&&(s.value.inverted?i.value>0:i.value===0)),p=ne(()=>s.value.fadeImage?s.value.inverted?1-d.value:d.value:void 0),g=ne(()=>{if(s.value.hide&&s.value.inverted)return 0;const b=a.value?.contentHeight??0,x=a.value?.extensionHeight??0;return f.value?i.value<c.value||s.value.fullyHide?b+x:b:b+x});go(()=>!!e.scrollBehavior,()=>{_r(()=>{f.value?s.value.inverted?r.value=i.value>c.value:r.value=A.value||i.value<c.value:r.value=!0})});const{ssrBootStyles:y}=Jf(),{layoutItemStyles:w}=$f({id:e.name,order:ne(()=>parseInt(e.order,10)),position:Xe(()=>e.location),layoutSize:g,elementSize:Ht(void 0),active:r,absolute:Xe(()=>e.absolute)});return St(()=>{const b=JE.filterProps(e);return l(JE,Pe({ref:a,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...w.value,"--v-toolbar-image-opacity":p.value,height:void 0,...y.value},e.style]},b,{collapse:m.value,flat:v.value}),n)}),{}}}),vWe=[null,"default","comfortable","compact"],cs=lt({density:{type:String,default:"default",validator:e=>vWe.includes(e)}},"density");function So(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Mu();return{densityClasses:Xe(()=>`${t}--density-${e.density}`)}}const hWe=["elevated","flat","tonal","outlined","text","plain"];function sA(e,t){return h(Ke,null,[e&&h("span",{key:"overlay",class:ct(`${t}__overlay`)},null),h("span",{key:"underlay",class:ct(`${t}__underlay`)},null)])}const il=lt({color:String,variant:{type:String,default:"elevated",validator:e=>hWe.includes(e)}},"variant");function Zf(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Mu();const n=Xe(()=>{const{variant:s}=Tu(e);return`${t}--variant-${s}`}),{colorClasses:a,colorStyles:r}=c4(()=>{const{variant:s,color:o}=Tu(e);return{[["elevated","flat"].includes(s)?"background":"text"]:o}});return{colorClasses:a,colorStyles:r,variantClasses:n}}const dQ=lt({baseColor:String,divided:Boolean,direction:{type:String,default:"horizontal"},...Ko(),...Jt(),...cs(),...Jr(),...lr(),...Nn(),...ua(),...il()},"VBtnGroup"),ZE=gt()({name:"VBtnGroup",props:dQ(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=ka(e),{densityClasses:r}=So(e),{borderClasses:s}=ci(e),{elevationClasses:o}=xs(e),{roundedClasses:i}=xr(e);wr({VBtn:{height:Xe(()=>e.direction==="horizontal"?"auto":null),baseColor:Xe(()=>e.baseColor),color:Xe(()=>e.color),density:Xe(()=>e.density),flat:!0,variant:Xe(()=>e.variant)}}),St(()=>l(e.tag,{class:ct(["v-btn-group",`v-btn-group--${e.direction}`,{"v-btn-group--divided":e.divided},a.value,s.value,r.value,o.value,i.value,e.class]),style:Ut(e.style)},n))}}),em=lt({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),tm=lt({value:null,disabled:Boolean,selectedClass:String},"group-item");function nm(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const a=Pr("useGroupItem");if(!a)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const r=zo();La(Symbol.for(`${t.description}:id`),r);const s=Tn(t,null);if(!s){if(!n)return s;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${t.description}`)}const o=Xe(()=>e.value),i=ne(()=>!!(s.disabled.value||e.disabled));s.register({id:r,value:o,disabled:i},a),va(()=>{s.unregister(r)});const c=ne(()=>s.isSelected(r)),A=ne(()=>s.items.value[0].id===r),d=ne(()=>s.items.value[s.items.value.length-1].id===r),f=ne(()=>c.value&&[s.selectedClass.value,e.selectedClass]);return je(c,m=>{a.emit("group:selected",{value:m})},{flush:"sync"}),{id:r,isSelected:c,isFirst:A,isLast:d,toggle:()=>s.select(r,!c.value),select:m=>s.select(r,m),selectedClass:f,value:o,disabled:i,group:s}}function oA(e,t){let n=!1;const a=os([]),r=ln(e,"modelValue",[],m=>m==null?[]:AQ(a,gr(m)),m=>{const v=gWe(a,m);return e.multiple?v:v[0]}),s=Pr("useGroup");function o(m,v){const p=m,g=Symbol.for(`${t.description}:id`),w=Ym(g,s?.vnode).indexOf(v);Qe(p.value)==null&&(p.value=w,p.useIndexAsValue=!0),w>-1?a.splice(w,0,p):a.push(p)}function i(m){if(n)return;c();const v=a.findIndex(p=>p.id===m);a.splice(v,1)}function c(){const m=a.find(v=>!v.disabled);m&&e.mandatory==="force"&&!r.value.length&&(r.value=[m.id])}dn(()=>{c()}),va(()=>{n=!0}),ew(()=>{for(let m=0;m<a.length;m++)a[m].useIndexAsValue&&(a[m].value=m)});function A(m,v){const p=a.find(g=>g.id===m);if(!(v&&p?.disabled))if(e.multiple){const g=r.value.slice(),y=g.findIndex(b=>b===m),w=~y;if(v=v??!w,w&&e.mandatory&&g.length<=1||!w&&e.max!=null&&g.length+1>e.max)return;y<0&&v?g.push(m):y>=0&&!v&&g.splice(y,1),r.value=g}else{const g=r.value.includes(m);if(e.mandatory&&g||!g&&!v)return;r.value=v??!g?[m]:[]}}function d(m){if(e.multiple,r.value.length){const v=r.value[0],p=a.findIndex(w=>w.id===v);let g=(p+m)%a.length,y=a[g];for(;y.disabled&&g!==p;)g=(g+m)%a.length,y=a[g];if(y.disabled)return;r.value=[a[g].id]}else{const v=a.find(p=>!p.disabled);v&&(r.value=[v.id])}}const f={register:o,unregister:i,selected:r,select:A,disabled:Xe(()=>e.disabled),prev:()=>d(a.length-1),next:()=>d(1),isSelected:m=>r.value.includes(m),selectedClass:Xe(()=>e.selectedClass),items:Xe(()=>a),getItemIndex:m=>pWe(a,m)};return La(t,f),f}function pWe(e,t){const n=AQ(e,[t]);return n.length?e.findIndex(a=>a.id===n[0]):-1}function AQ(e,t){const n=[];return t.forEach(a=>{const r=e.find(o=>_s(a,o.value)),s=e[a];r?.value!=null?n.push(r.id):s?.useIndexAsValue&&n.push(s.id)}),n}function gWe(e,t){const n=[];return t.forEach(a=>{const r=e.findIndex(s=>s.id===a);if(~r){const s=e[r];n.push(s.value!=null?s.value:r)}}),n}const d4=Symbol.for("vuetify:v-btn-toggle"),yWe=lt({...dQ(),...em()},"VBtnToggle"),_We=gt()({name:"VBtnToggle",props:yWe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{isSelected:a,next:r,prev:s,select:o,selected:i}=oA(e,d4);return St(()=>{const c=ZE.filterProps(e);return l(ZE,Pe({class:["v-btn-toggle",e.class]},c,{style:e.style}),{default:()=>[n.default?.({isSelected:a,next:r,prev:s,select:o,selected:i})]})}),{next:r,prev:s,select:o}}}),wWe=["x-small","small","default","large","x-large"],Ku=lt({size:{type:[String,Number],default:"default"}},"size");function bh(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Mu();return fk(()=>{const n=e.size;let a,r;return E_(wWe,n)?a=`${t}--size-${n}`:n&&(r={width:Kt(n),height:Kt(n)}),{sizeClasses:a,sizeStyles:r}})}const bWe=lt({color:String,disabled:Boolean,start:Boolean,end:Boolean,icon:cn,opacity:[String,Number],...Jt(),...Ku(),...Nn({tag:"i"}),...ua()},"VIcon"),Ea=gt()({name:"VIcon",props:bWe(),setup(e,t){let{attrs:n,slots:a}=t;const r=Ht(),{themeClasses:s}=Ck(),{iconData:o}=nae(()=>r.value||e.icon),{sizeClasses:i}=bh(e),{textColorClasses:c,textColorStyles:A}=Rs(()=>e.color);return St(()=>{const d=a.default?.();d&&(r.value=$8(d).filter(m=>m.type===ig&&m.children&&typeof m.children=="string")[0]?.children);const f=!!(n.onClick||n.onClickOnce);return l(o.value.component,{tag:e.tag,icon:o.value.icon,class:ct(["v-icon","notranslate",s.value,i.value,c.value,{"v-icon--clickable":f,"v-icon--disabled":e.disabled,"v-icon--start":e.start,"v-icon--end":e.end},e.class]),style:Ut([{"--v-icon-opacity":e.opacity},i.value?void 0:{fontSize:Kt(e.size),height:Kt(e.size),width:Kt(e.size)},A.value,e.style]),role:f?"button":void 0,"aria-hidden":!f,tabindex:f?e.disabled?-1:0:void 0},{default:()=>[d]})}),{}}});function Dg(e,t){const n=V(),a=Ht(!1);if(ck){const r=new IntersectionObserver(s=>{a.value=!!s.find(o=>o.isIntersecting)},t);us(()=>{r.disconnect()}),je(n,(s,o)=>{o&&(r.unobserve(o),a.value=!1),s&&r.observe(s)},{flush:"post"})}return{intersectionRef:n,isIntersecting:a}}const xWe=lt({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...Jt(),...Ku(),...Nn({tag:"div"}),...ua()},"VProgressCircular"),Bf=gt()({name:"VProgressCircular",props:xWe(),setup(e,t){let{slots:n}=t;const a=20,r=2*Math.PI*a,s=V(),{themeClasses:o}=ka(e),{sizeClasses:i,sizeStyles:c}=bh(e),{textColorClasses:A,textColorStyles:d}=Rs(()=>e.color),{textColorClasses:f,textColorStyles:m}=Rs(()=>e.bgColor),{intersectionRef:v,isIntersecting:p}=Dg(),{resizeRef:g,contentRect:y}=$l(),w=Xe(()=>Ja(parseFloat(e.modelValue),0,100)),b=Xe(()=>Number(e.width)),x=Xe(()=>c.value?Number(e.size):y.value?y.value.width:Math.max(b.value,32)),T=Xe(()=>a/(1-b.value/x.value)*2),D=Xe(()=>b.value/x.value*T.value),k=Xe(()=>Kt((100-w.value)/100*r));return _r(()=>{v.value=s.value,g.value=s.value}),St(()=>l(e.tag,{ref:s,class:ct(["v-progress-circular",{"v-progress-circular--indeterminate":!!e.indeterminate,"v-progress-circular--visible":p.value,"v-progress-circular--disable-shrink":e.indeterminate==="disable-shrink"},o.value,i.value,A.value,e.class]),style:Ut([c.value,d.value,e.style]),role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.indeterminate?void 0:w.value},{default:()=>[h("svg",{style:{transform:`rotate(calc(-90deg + ${Number(e.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${T.value} ${T.value}`},[h("circle",{class:ct(["v-progress-circular__underlay",f.value]),style:Ut(m.value),fill:"transparent",cx:"50%",cy:"50%",r:a,"stroke-width":D.value,"stroke-dasharray":r,"stroke-dashoffset":0},null),h("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:a,"stroke-width":D.value,"stroke-dasharray":r,"stroke-dashoffset":k.value},null)]),n.default&&h("div",{class:"v-progress-circular__content"},[n.default({value:w.value})])]})),{}}}),FN={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},Qc=lt({location:String},"location");function am(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2?arguments[2]:void 0;const{isRtl:a}=Xr();return{locationStyles:ne(()=>{if(!e.location)return{};const{side:s,align:o}=SS(e.location.split(" ").length>1?e.location:`${e.location} center`,a.value);function i(A){return n?n(A):0}const c={};return s!=="center"&&(t?c[FN[s]]=`calc(100% - ${i(s)}px)`:c[s]=0),o!=="center"?t?c[FN[o]]=`calc(100% - ${i(o)}px)`:c[o]=0:(s==="center"?c.top=c.left="50%":c[{top:"left",bottom:"left",left:"top",right:"top"}[s]]="50%",c.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[s]),c})}}const CWe=lt({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},bufferColor:String,bufferOpacity:[Number,String],clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},opacity:[Number,String],reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...Jt(),...Qc({location:"top"}),...lr(),...Nn(),...ua()},"VProgressLinear"),Yw=gt()({name:"VProgressLinear",props:CWe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=ln(e,"modelValue"),{isRtl:r,rtlClasses:s}=Xr(),{themeClasses:o}=ka(e),{locationStyles:i}=am(e),{textColorClasses:c,textColorStyles:A}=Rs(()=>e.color),{backgroundColorClasses:d,backgroundColorStyles:f}=Fa(()=>e.bgColor||e.color),{backgroundColorClasses:m,backgroundColorStyles:v}=Fa(()=>e.bufferColor||e.bgColor||e.color),{backgroundColorClasses:p,backgroundColorStyles:g}=Fa(()=>e.color),{roundedClasses:y}=xr(e),{intersectionRef:w,isIntersecting:b}=Dg(),x=ne(()=>parseFloat(e.max)),T=ne(()=>parseFloat(e.height)),D=ne(()=>Ja(parseFloat(e.bufferValue)/x.value*100,0,100)),k=ne(()=>Ja(parseFloat(a.value)/x.value*100,0,100)),S=ne(()=>r.value!==e.reverse),E=ne(()=>e.indeterminate?"fade-transition":"slide-x-transition");function C(U){if(!w.value)return;const{left:F,right:L,width:H}=w.value.getBoundingClientRect(),ue=S.value?H-U.clientX+(L-H):U.clientX-F;a.value=Math.round(ue/H*x.value)}return St(()=>l(e.tag,{ref:w,class:ct(["v-progress-linear",{"v-progress-linear--absolute":e.absolute,"v-progress-linear--active":e.active&&b.value,"v-progress-linear--reverse":S.value,"v-progress-linear--rounded":e.rounded,"v-progress-linear--rounded-bar":e.roundedBar,"v-progress-linear--striped":e.striped,"v-progress-linear--clickable":e.clickable},y.value,o.value,s.value,e.class]),style:Ut([{bottom:e.location==="bottom"?0:void 0,top:e.location==="top"?0:void 0,height:e.active?Kt(T.value):0,"--v-progress-linear-height":Kt(T.value),...e.absolute?i.value:{}},e.style]),role:"progressbar","aria-hidden":e.active?"false":"true","aria-valuemin":"0","aria-valuemax":e.max,"aria-valuenow":e.indeterminate?void 0:Math.min(parseFloat(a.value),x.value),onClick:e.clickable&&C},{default:()=>[e.stream&&h("div",{key:"stream",class:ct(["v-progress-linear__stream",c.value]),style:{...A.value,[S.value?"left":"right"]:Kt(-T.value),borderTop:`${Kt(T.value/2)} dotted`,opacity:parseFloat(e.bufferOpacity),top:`calc(50% - ${Kt(T.value/4)})`,width:Kt(100-D.value,"%"),"--v-progress-linear-stream-to":Kt(T.value*(S.value?1:-1))}},null),h("div",{class:ct(["v-progress-linear__background",d.value]),style:Ut([f.value,{opacity:parseFloat(e.bgOpacity),width:e.stream?0:void 0}])},null),h("div",{class:ct(["v-progress-linear__buffer",m.value]),style:Ut([v.value,{opacity:parseFloat(e.bufferOpacity),width:Kt(D.value,"%")}])},null),l(Md,{name:E.value},{default:()=>[e.indeterminate?h("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(U=>h("div",{key:U,class:ct(["v-progress-linear__indeterminate",U,p.value]),style:Ut(g.value)},null))]):h("div",{class:ct(["v-progress-linear__determinate",p.value]),style:Ut([g.value,{width:Kt(k.value,"%")}])},null)]}),n.default&&h("div",{class:"v-progress-linear__content"},[n.default({value:k.value,buffer:D.value})])]})),{}}}),Xw=lt({loading:[Boolean,String]},"loader");function Ug(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Mu();return{loaderClasses:Xe(()=>({[`${t}--loading`]:e.loading}))}}function Rg(e,t){let{slots:n}=t;return h("div",{class:ct(`${e.name}__loader`)},[n.default?.({color:e.color,isActive:e.active})||l(Yw,{absolute:e.absolute,active:e.active,color:e.color,height:"2",indeterminate:!0},null)])}const SWe=["static","relative","fixed","absolute","sticky"],xh=lt({position:{type:String,validator:e=>SWe.includes(e)}},"position");function Ch(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Mu();return{positionClasses:Xe(()=>e.position?`${t}--${e.position}`:void 0)}}function EWe(){const e=Pr("useRoute");return ne(()=>e?.proxy?.$route)}function fQ(){return Pr("useRouter")?.proxy?.$router}function Ng(e,t){const n=tw("RouterLink"),a=Xe(()=>!!(e.href||e.to)),r=ne(()=>a?.value||eD(t,"click")||eD(e,"click"));if(typeof n=="string"||!("useLink"in n)){const d=Xe(()=>e.href);return{isLink:a,isClickable:r,href:d,linkProps:os({href:d})}}const s=n.useLink({to:Xe(()=>e.to||""),replace:Xe(()=>e.replace)}),o=ne(()=>e.to?s:void 0),i=EWe(),c=ne(()=>o.value?e.exact?i.value?o.value.isExactActive?.value&&_s(o.value.route.value.query,i.value.query):o.value.isExactActive?.value??!1:o.value.isActive?.value??!1:!1),A=ne(()=>e.to?o.value?.route.value.href:e.href);return{isLink:a,isClickable:r,isActive:c,route:o.value?.route,navigate:o.value?.navigate,href:A,linkProps:os({href:A,"aria-current":Xe(()=>c.value?"page":void 0)})}}const Vg=lt({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let GC=!1;function BWe(e,t){let n=!1,a,r;Ba&&e?.beforeEach&&(_n(()=>{window.addEventListener("popstate",s),a=e.beforeEach((o,i,c)=>{GC?n?t(c):c():setTimeout(()=>n?t(c):c()),GC=!0}),r=e?.afterEach(()=>{GC=!1})}),us(()=>{window.removeEventListener("popstate",s),a?.(),r?.()}));function s(o){o.state?.replaced||(n=!0,setTimeout(()=>n=!1))}}function kWe(e,t){je(()=>e.isActive?.value,n=>{e.isLink.value&&n!=null&&t&&_n(()=>{t(n)})},{immediate:!0})}const eB=Symbol("rippleStop"),TWe=80;function PN(e,t){e.style.transform=t,e.style.webkitTransform=t}function tB(e){return e.constructor.name==="TouchEvent"}function mQ(e){return e.constructor.name==="KeyboardEvent"}const IWe=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=0,r=0;if(!mQ(e)){const f=t.getBoundingClientRect(),m=tB(e)?e.touches[e.touches.length-1]:e;a=m.clientX-f.left,r=m.clientY-f.top}let s=0,o=.3;t._ripple?.circle?(o=.15,s=t.clientWidth/2,s=n.center?s:s+Math.sqrt((a-s)**2+(r-s)**2)/4):s=Math.sqrt(t.clientWidth**2+t.clientHeight**2)/2;const i=`${(t.clientWidth-s*2)/2}px`,c=`${(t.clientHeight-s*2)/2}px`,A=n.center?i:`${a-s}px`,d=n.center?c:`${r-s}px`;return{radius:s,scale:o,x:A,y:d,centerX:i,centerY:c}},k2={show(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t?._ripple?.enabled)return;const a=document.createElement("span"),r=document.createElement("span");a.appendChild(r),a.className="v-ripple__container",n.class&&(a.className+=` ${n.class}`);const{radius:s,scale:o,x:i,y:c,centerX:A,centerY:d}=IWe(e,t,n),f=`${s*2}px`;r.className="v-ripple__animation",r.style.width=f,r.style.height=f,t.appendChild(a);const m=window.getComputedStyle(t);m&&m.position==="static"&&(t.style.position="relative",t.dataset.previousPosition="static"),r.classList.add("v-ripple__animation--enter"),r.classList.add("v-ripple__animation--visible"),PN(r,`translate(${i}, ${c}) scale3d(${o},${o},${o})`),r.dataset.activated=String(performance.now()),requestAnimationFrame(()=>{requestAnimationFrame(()=>{r.classList.remove("v-ripple__animation--enter"),r.classList.add("v-ripple__animation--in"),PN(r,`translate(${A}, ${d}) scale3d(1,1,1)`)})})},hide(e){if(!e?._ripple?.enabled)return;const t=e.getElementsByClassName("v-ripple__animation");if(t.length===0)return;const n=Array.from(t).findLast(s=>!s.dataset.isHiding);if(n)n.dataset.isHiding="true";else return;const a=performance.now()-Number(n.dataset.activated),r=Math.max(250-a,0);setTimeout(()=>{n.classList.remove("v-ripple__animation--in"),n.classList.add("v-ripple__animation--out"),setTimeout(()=>{e.getElementsByClassName("v-ripple__animation").length===1&&e.dataset.previousPosition&&(e.style.position=e.dataset.previousPosition,delete e.dataset.previousPosition),n.parentNode?.parentNode===e&&e.removeChild(n.parentNode)},300)},r)}};function vQ(e){return typeof e>"u"||!!e}function W0(e){const t={},n=e.currentTarget;if(!(!n?._ripple||n._ripple.touched||e[eB])){if(e[eB]=!0,tB(e))n._ripple.touched=!0,n._ripple.isTouch=!0;else if(n._ripple.isTouch)return;if(t.center=n._ripple.centered||mQ(e),n._ripple.class&&(t.class=n._ripple.class),tB(e)){if(n._ripple.showTimerCommit)return;n._ripple.showTimerCommit=()=>{k2.show(e,n,t)},n._ripple.showTimer=window.setTimeout(()=>{n?._ripple?.showTimerCommit&&(n._ripple.showTimerCommit(),n._ripple.showTimerCommit=null)},TWe)}else k2.show(e,n,t)}}function DN(e){e[eB]=!0}function bi(e){const t=e.currentTarget;if(t?._ripple){if(window.clearTimeout(t._ripple.showTimer),e.type==="touchend"&&t._ripple.showTimerCommit){t._ripple.showTimerCommit(),t._ripple.showTimerCommit=null,t._ripple.showTimer=window.setTimeout(()=>{bi(e)});return}window.setTimeout(()=>{t._ripple&&(t._ripple.touched=!1)}),k2.hide(t)}}function hQ(e){const t=e.currentTarget;t?._ripple&&(t._ripple.showTimerCommit&&(t._ripple.showTimerCommit=null),window.clearTimeout(t._ripple.showTimer))}let j0=!1;function UN(e,t){!j0&&t.includes(e.key)&&(j0=!0,W0(e))}function pQ(e){j0=!1,bi(e)}function gQ(e){j0&&(j0=!1,bi(e))}function yQ(e,t,n){const{value:a,modifiers:r}=t,s=vQ(a);s||k2.hide(e),e._ripple=e._ripple??{},e._ripple.enabled=s,e._ripple.centered=r.center,e._ripple.circle=r.circle;const o=_0(a)?a:{};o.class&&(e._ripple.class=o.class);const i=o.keys??["Enter","Space"];if(e._ripple.keyDownHandler=c=>UN(c,i),s&&!n){if(r.stop){e.addEventListener("touchstart",DN,{passive:!0}),e.addEventListener("mousedown",DN);return}e.addEventListener("touchstart",W0,{passive:!0}),e.addEventListener("touchend",bi,{passive:!0}),e.addEventListener("touchmove",hQ,{passive:!0}),e.addEventListener("touchcancel",bi),e.addEventListener("mousedown",W0),e.addEventListener("mouseup",bi),e.addEventListener("mouseleave",bi),e.addEventListener("keydown",c=>UN(c,i)),e.addEventListener("keyup",pQ),e.addEventListener("blur",gQ),e.addEventListener("dragstart",bi,{passive:!0})}else!s&&n&&_Q(e)}function _Q(e){e.removeEventListener("mousedown",W0),e.removeEventListener("touchstart",W0),e.removeEventListener("touchend",bi),e.removeEventListener("touchmove",hQ),e.removeEventListener("touchcancel",bi),e.removeEventListener("mouseup",bi),e.removeEventListener("mouseleave",bi),e._ripple?.keyDownHandler&&e.removeEventListener("keydown",e._ripple.keyDownHandler),e.removeEventListener("keyup",pQ),e.removeEventListener("dragstart",bi),e.removeEventListener("blur",gQ)}function FWe(e,t){yQ(e,t,!1)}function PWe(e){_Q(e),delete e._ripple}function DWe(e,t){if(t.value===t.oldValue)return;const n=vQ(t.oldValue);yQ(e,t,n)}const xo={mounted:FWe,unmounted:PWe,updated:DWe},Jw=lt({active:{type:Boolean,default:void 0},activeColor:String,baseColor:String,symbol:{type:null,default:d4},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:cn,appendIcon:cn,block:Boolean,readonly:Boolean,slim:Boolean,stacked:Boolean,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},...Ko(),...Jt(),...cs(),...Mr(),...Jr(),...tm(),...Xw(),...Qc(),...xh(),...lr(),...Vg(),...Ku(),...Nn({tag:"button"}),...ua(),...il({variant:"elevated"})},"VBtn"),Jn=gt()({name:"VBtn",props:Jw(),emits:{"group:selected":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const{themeClasses:r}=ka(e),{borderClasses:s}=ci(e),{densityClasses:o}=So(e),{dimensionStyles:i}=Or(e),{elevationClasses:c}=xs(e),{loaderClasses:A}=Ug(e),{locationStyles:d}=am(e),{positionClasses:f}=Ch(e),{roundedClasses:m}=xr(e),{sizeClasses:v,sizeStyles:p}=bh(e),g=nm(e,e.symbol,!1),y=Ng(e,n),w=ne(()=>e.active!==void 0?e.active:y.isLink.value?y.isActive?.value:g?.isSelected.value),b=Xe(()=>w.value?e.activeColor??e.color:e.color),x=ne(()=>({color:g?.isSelected.value&&(!y.isLink.value||y.isActive?.value)||!g||y.isActive?.value?b.value??e.baseColor:e.baseColor,variant:e.variant})),{colorClasses:T,colorStyles:D,variantClasses:k}=Zf(x),S=ne(()=>g?.disabled.value||e.disabled),E=Xe(()=>e.variant==="elevated"&&!(e.disabled||e.flat||e.border)),C=ne(()=>{if(!(e.value===void 0||typeof e.value=="symbol"))return Object(e.value)===e.value?JSON.stringify(e.value,null,0):e.value});function U(F){S.value||y.isLink.value&&(F.metaKey||F.ctrlKey||F.shiftKey||F.button!==0||n.target==="_blank")||(y.navigate?.(F),g?.toggle())}return kWe(y,g?.select),St(()=>{const F=y.isLink.value?"a":e.tag,L=!!(e.prependIcon||a.prepend),H=!!(e.appendIcon||a.append),ue=!!(e.icon&&e.icon!==!0);return ma(l(F,Pe({type:F==="a"?void 0:"button",class:["v-btn",g?.selectedClass.value,{"v-btn--active":w.value,"v-btn--block":e.block,"v-btn--disabled":S.value,"v-btn--elevated":E.value,"v-btn--flat":e.flat,"v-btn--icon":!!e.icon,"v-btn--loading":e.loading,"v-btn--readonly":e.readonly,"v-btn--slim":e.slim,"v-btn--stacked":e.stacked},r.value,s.value,T.value,o.value,c.value,A.value,f.value,m.value,v.value,k.value,e.class],style:[D.value,i.value,d.value,p.value,e.style],"aria-busy":e.loading?!0:void 0,disabled:S.value||void 0,tabindex:e.loading||e.readonly?-1:void 0,onClick:U,value:C.value},y.linkProps),{default:()=>[sA(!0,"v-btn"),!e.icon&&L&&h("span",{key:"prepend",class:"v-btn__prepend"},[a.prepend?l(Vn,{key:"prepend-defaults",disabled:!e.prependIcon,defaults:{VIcon:{icon:e.prependIcon}}},a.prepend):l(Ea,{key:"prepend-icon",icon:e.prependIcon},null)]),h("span",{class:"v-btn__content","data-no-activator":""},[!a.default&&ue?l(Ea,{key:"content-icon",icon:e.icon},null):l(Vn,{key:"content-defaults",disabled:!ue,defaults:{VIcon:{icon:e.icon}}},{default:()=>[a.default?.()??K(e.text)]})]),!e.icon&&H&&h("span",{key:"append",class:"v-btn__append"},[a.append?l(Vn,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VIcon:{icon:e.appendIcon}}},a.append):l(Ea,{key:"append-icon",icon:e.appendIcon},null)]),!!e.loading&&h("span",{key:"loader",class:"v-btn__loader"},[a.loader?.()??l(Bf,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,width:"2"},null)])]}),[[xo,!S.value&&e.ripple,"",{center:!!e.icon}]])}),{group:g}}}),UWe=lt({...Jw({icon:"$menu",variant:"text"})},"VAppBarNavIcon"),RWe=gt()({name:"VAppBarNavIcon",props:UWe(),setup(e,t){let{slots:n}=t;return St(()=>l(Jn,Pe(e,{class:["v-app-bar-nav-icon"]}),n)),{}}}),NWe=gt()({name:"VAppBarTitle",props:rQ(),setup(e,t){let{slots:n}=t;return St(()=>l(o4,Pe(e,{class:"v-app-bar-title"}),n)),{}}}),wQ=Oc("v-alert-title"),VWe=lt({iconSize:[Number,String],iconSizes:{type:Array,default:()=>[["x-small",10],["small",16],["default",24],["large",28],["x-large",32]]}},"iconSize");function LWe(e,t){return{iconSize:ne(()=>{const a=new Map(e.iconSizes),r=e.iconSize??t()??"default";return a.has(r)?a.get(r):r})}}const MWe=["success","info","warning","error"],OWe=lt({border:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:cn,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>MWe.includes(e)},...Jt(),...cs(),...Mr(),...Jr(),...VWe(),...Qc(),...xh(),...lr(),...Nn(),...ua(),...il({variant:"flat"})},"VAlert"),HWe=gt()({name:"VAlert",props:OWe(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const r=ln(e,"modelValue"),s=Xe(()=>{if(e.icon!==!1)return e.type?e.icon??`$${e.type}`:e.icon}),{iconSize:o}=LWe(e,()=>e.prominent?44:void 0),{themeClasses:i}=ka(e),{colorClasses:c,colorStyles:A,variantClasses:d}=Zf(()=>({color:e.color??e.type,variant:e.variant})),{densityClasses:f}=So(e),{dimensionStyles:m}=Or(e),{elevationClasses:v}=xs(e),{locationStyles:p}=am(e),{positionClasses:g}=Ch(e),{roundedClasses:y}=xr(e),{textColorClasses:w,textColorStyles:b}=Rs(()=>e.borderColor),{t:x}=Oa(),T=Xe(()=>({"aria-label":x(e.closeLabel),onClick(D){r.value=!1,n("click:close",D)}}));return()=>{const D=!!(a.prepend||s.value),k=!!(a.title||e.title),S=!!(a.close||e.closable),E={density:e.density,icon:s.value,size:e.iconSize||e.prominent?o.value:void 0};return r.value&&l(e.tag,{class:ct(["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${e.border===!0?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},i.value,c.value,f.value,v.value,g.value,y.value,d.value,e.class]),style:Ut([A.value,m.value,p.value,e.style]),role:"alert"},{default:()=>[sA(!1,"v-alert"),e.border&&h("div",{key:"border",class:ct(["v-alert__border",w.value]),style:Ut(b.value)},null),D&&h("div",{key:"prepend",class:"v-alert__prepend"},[a.prepend?l(Vn,{key:"prepend-defaults",disabled:!s.value,defaults:{VIcon:{...E}}},a.prepend):l(Ea,Pe({key:"prepend-icon"},E),null)]),h("div",{class:"v-alert__content"},[k&&l(wQ,{key:"title"},{default:()=>[a.title?.()??e.title]}),a.text?.()??e.text,a.default?.()]),a.append&&h("div",{key:"append",class:"v-alert__append"},[a.append()]),S&&h("div",{key:"close",class:"v-alert__close"},[a.close?l(Vn,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>[a.close?.({props:T.value})]}):l(Jn,Pe({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},T.value),null)])]})}}}),$We=lt({start:Boolean,end:Boolean,icon:cn,image:String,text:String,...Ko(),...Jt(),...cs(),...lr(),...Ku(),...Nn(),...ua(),...il({variant:"flat"})},"VAvatar"),nl=gt()({name:"VAvatar",props:$We(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=ka(e),{borderClasses:r}=ci(e),{colorClasses:s,colorStyles:o,variantClasses:i}=Zf(e),{densityClasses:c}=So(e),{roundedClasses:A}=xr(e),{sizeClasses:d,sizeStyles:f}=bh(e);return St(()=>l(e.tag,{class:ct(["v-avatar",{"v-avatar--start":e.start,"v-avatar--end":e.end},a.value,r.value,s.value,c.value,A.value,d.value,i.value,e.class]),style:Ut([o.value,f.value,e.style])},{default:()=>[n.default?l(Vn,{key:"content-defaults",defaults:{VImg:{cover:!0,src:e.image},VIcon:{icon:e.icon}}},{default:()=>[n.default()]}):e.image?l(Nc,{key:"image",src:e.image,alt:"",cover:!0},null):e.icon?l(Ea,{key:"icon",icon:e.icon},null):e.text,sA(!1,"v-avatar")]})),{}}}),QWe=lt({text:String,onClick:Ds(),...Jt(),...ua()},"VLabel"),Sh=gt()({name:"VLabel",props:QWe(),setup(e,t){let{slots:n}=t;return St(()=>h("label",{class:ct(["v-label",{"v-label--clickable":!!e.onClick},e.class]),style:Ut(e.style),onClick:e.onClick},[e.text,n.default?.()])),{}}}),bQ=Symbol.for("vuetify:selection-control-group"),A4=lt({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:cn,trueIcon:cn,ripple:{type:[Boolean,Object],default:!0},multiple:{type:Boolean,default:null},name:String,readonly:{type:Boolean,default:null},modelValue:null,type:String,valueComparator:{type:Function,default:_s},...Jt(),...cs(),...ua()},"SelectionControlGroup"),GWe=lt({...A4({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup"),xQ=gt()({name:"VSelectionControlGroup",props:GWe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=ln(e,"modelValue"),r=zo(),s=Xe(()=>e.id||`v-selection-control-group-${r}`),o=Xe(()=>e.name||s.value),i=new Set;return La(bQ,{modelValue:a,forceUpdate:()=>{i.forEach(c=>c())},onForceUpdate:c=>{i.add(c),us(()=>{i.delete(c)})}}),wr({[e.defaultsTarget]:{color:Xe(()=>e.color),disabled:Xe(()=>e.disabled),density:Xe(()=>e.density),error:Xe(()=>e.error),inline:Xe(()=>e.inline),modelValue:a,multiple:Xe(()=>!!e.multiple||e.multiple==null&&Array.isArray(a.value)),name:o,falseIcon:Xe(()=>e.falseIcon),trueIcon:Xe(()=>e.trueIcon),readonly:Xe(()=>e.readonly),ripple:Xe(()=>e.ripple),type:Xe(()=>e.type),valueComparator:Xe(()=>e.valueComparator)}}),St(()=>h("div",{class:ct(["v-selection-control-group",{"v-selection-control-group--inline":e.inline},e.class]),style:Ut(e.style),role:e.type==="radio"?"radiogroup":void 0},[n.default?.()])),{}}}),Zw=lt({label:String,baseColor:String,trueValue:null,falseValue:null,value:null,...Jt(),...A4()},"VSelectionControl");function zWe(e){const t=Tn(bQ,void 0),{densityClasses:n}=So(e),a=ln(e,"modelValue"),r=ne(()=>e.trueValue!==void 0?e.trueValue:e.value!==void 0?e.value:!0),s=ne(()=>e.falseValue!==void 0?e.falseValue:!1),o=ne(()=>!!e.multiple||e.multiple==null&&Array.isArray(a.value)),i=ne({get(){const v=t?t.modelValue.value:a.value;return o.value?gr(v).some(p=>e.valueComparator(p,r.value)):e.valueComparator(v,r.value)},set(v){if(e.readonly)return;const p=v?r.value:s.value;let g=p;o.value&&(g=v?[...gr(a.value),p]:gr(a.value).filter(y=>!e.valueComparator(y,r.value))),t?t.modelValue.value=g:a.value=g}}),{textColorClasses:c,textColorStyles:A}=Rs(()=>{if(!(e.error||e.disabled))return i.value?e.color:e.baseColor}),{backgroundColorClasses:d,backgroundColorStyles:f}=Fa(()=>i.value&&!e.error&&!e.disabled?e.color:e.baseColor),m=ne(()=>i.value?e.trueIcon:e.falseIcon);return{group:t,densityClasses:n,trueValue:r,falseValue:s,model:i,textColorClasses:c,textColorStyles:A,backgroundColorClasses:d,backgroundColorStyles:f,icon:m}}const Xd=gt()({name:"VSelectionControl",directives:{vRipple:xo},inheritAttrs:!1,props:Zw(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const{group:r,densityClasses:s,icon:o,model:i,textColorClasses:c,textColorStyles:A,backgroundColorClasses:d,backgroundColorStyles:f,trueValue:m}=zWe(e),v=zo(),p=Ht(!1),g=Ht(!1),y=V(),w=Xe(()=>e.id||`input-${v}`),b=Xe(()=>!e.disabled&&!e.readonly);r?.onForceUpdate(()=>{y.value&&(y.value.checked=i.value)});function x(S){b.value&&(p.value=!0,Iv(S.target,":focus-visible")!==!1&&(g.value=!0))}function T(){p.value=!1,g.value=!1}function D(S){S.stopPropagation()}function k(S){if(!b.value){y.value&&(y.value.checked=i.value);return}e.readonly&&r&&_n(()=>r.forceUpdate()),i.value=S.target.checked}return St(()=>{const S=a.label?a.label({label:e.label,props:{for:w.value}}):e.label,[E,C]=tA(n),U=h("input",Pe({ref:y,checked:i.value,disabled:!!e.disabled,id:w.value,onBlur:T,onFocus:x,onInput:k,"aria-disabled":!!e.disabled,"aria-label":e.label,type:e.type,value:m.value,name:e.name,"aria-checked":e.type==="checkbox"?i.value:void 0},C),null);return h("div",Pe({class:["v-selection-control",{"v-selection-control--dirty":i.value,"v-selection-control--disabled":e.disabled,"v-selection-control--error":e.error,"v-selection-control--focused":p.value,"v-selection-control--focus-visible":g.value,"v-selection-control--inline":e.inline},s.value,e.class]},E,{style:e.style}),[h("div",{class:ct(["v-selection-control__wrapper",c.value]),style:Ut(A.value)},[a.default?.({backgroundColorClasses:d,backgroundColorStyles:f}),ma(h("div",{class:ct(["v-selection-control__input"])},[a.input?.({model:i,textColorClasses:c,textColorStyles:A,backgroundColorClasses:d,backgroundColorStyles:f,inputNode:U,icon:o.value,props:{onFocus:x,onBlur:T,id:w.value}})??h(Ke,null,[o.value&&l(Ea,{key:"icon",icon:o.value},null),U])]),[[xo,!e.disabled&&!e.readonly&&e.ripple,null,{center:!0,circle:!0}]])]),S&&l(Sh,{for:w.value,onClick:D},{default:()=>[S]})])}),{isFocused:p,input:y}}}),CQ=lt({indeterminate:Boolean,indeterminateIcon:{type:cn,default:"$checkboxIndeterminate"},...Zw({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),Ru=gt()({name:"VCheckboxBtn",props:CQ(),emits:{"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{slots:n}=t;const a=ln(e,"indeterminate"),r=ln(e,"modelValue");function s(c){a.value&&(a.value=!1)}const o=Xe(()=>a.value?e.indeterminateIcon:e.falseIcon),i=Xe(()=>a.value?e.indeterminateIcon:e.trueIcon);return St(()=>{const c=Ma(Xd.filterProps(e),["modelValue"]);return l(Xd,Pe(c,{modelValue:r.value,"onUpdate:modelValue":[A=>r.value=A,s],class:["v-checkbox-btn",e.class],style:e.style,type:"checkbox",falseIcon:o.value,trueIcon:i.value,"aria-checked":a.value?"mixed":void 0}),n)}),{}}});function SQ(e){const{t}=Oa();function n(a){let{name:r,color:s,...o}=a;const i={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[r],c=e[`onClick:${r}`];function A(f){f.key!=="Enter"&&f.key!==" "||(f.preventDefault(),f.stopPropagation(),rw(c,new PointerEvent("click",f)))}const d=c&&i?t(`$vuetify.input.${i}`,e.label??""):void 0;return l(Ea,Pe({icon:e[`${r}Icon`],"aria-label":d,onClick:c,onKeydown:A,color:s},o),null)}return{InputIcon:n}}const KWe=lt({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...Jt(),...ru({transition:{component:l4,leaveAbsolute:!0,group:!0}})},"VMessages"),EQ=gt()({name:"VMessages",props:KWe(),setup(e,t){let{slots:n}=t;const a=ne(()=>gr(e.messages)),{textColorClasses:r,textColorStyles:s}=Rs(()=>e.color);return St(()=>l(ho,{transition:e.transition,tag:"div",class:ct(["v-messages",r.value,e.class]),style:Ut([s.value,e.style])},{default:()=>[e.active&&a.value.map((o,i)=>h("div",{class:"v-messages__message",key:`${i}-${a.value}`},[n.message?n.message({message:o}):o]))]})),{}}}),Lg=lt({focused:Boolean,"onUpdate:focused":Ds()},"focus");function Gc(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Mu();const n=ln(e,"focused"),a=Xe(()=>({[`${t}--focused`]:n.value}));function r(){n.value=!0}function s(){n.value=!1}return{focusClasses:a,isFocused:n,focus:r,blur:s}}const BQ=Symbol.for("vuetify:form"),WWe=lt({disabled:Boolean,fastFail:Boolean,readonly:Boolean,modelValue:{type:Boolean,default:null},validateOn:{type:String,default:"input"}},"form");function jWe(e){const t=ln(e,"modelValue"),n=Xe(()=>e.disabled),a=Xe(()=>e.readonly),r=Ht(!1),s=V([]),o=V([]);async function i(){const d=[];let f=!0;o.value=[],r.value=!0;for(const m of s.value){const v=await m.validate();if(v.length>0&&(f=!1,d.push({id:m.id,errorMessages:v})),!f&&e.fastFail)break}return o.value=d,r.value=!1,{valid:f,errors:o.value}}function c(){s.value.forEach(d=>d.reset())}function A(){s.value.forEach(d=>d.resetValidation())}return je(s,()=>{let d=0,f=0;const m=[];for(const v of s.value)v.isValid===!1?(f++,m.push({id:v.id,errorMessages:v.errorMessages})):v.isValid===!0&&d++;o.value=m,t.value=f>0?!1:d===s.value.length?!0:null},{deep:!0,flush:"post"}),La(BQ,{register:d=>{let{id:f,vm:m,validate:v,reset:p,resetValidation:g}=d;s.value.some(y=>y.id===f),s.value.push({id:f,validate:v,reset:p,resetValidation:g,vm:f_(m),isValid:null,errorMessages:[]})},unregister:d=>{s.value=s.value.filter(f=>f.id!==d)},update:(d,f,m)=>{const v=s.value.find(p=>p.id===d);v&&(v.isValid=f,v.errorMessages=m)},isDisabled:n,isReadonly:a,isValidating:r,isValid:t,items:s,validateOn:Xe(()=>e.validateOn)}),{errors:o,isDisabled:n,isReadonly:a,isValidating:r,isValid:t,items:s,validate:i,reset:c,resetValidation:A}}function Mg(e){const t=Tn(BQ,null);return{...t,isReadonly:ne(()=>!!(e?.readonly??t?.isReadonly.value)),isDisabled:ne(()=>!!(e?.disabled??t?.isDisabled.value))}}const qWe=Symbol.for("vuetify:rules");function YWe(e){const t=Tn(qWe,null);if(!e){if(!t)throw new Error("Could not find Vuetify rules injection");return t.aliases}return t?.resolve(e)??Xe(e)}const kQ=lt({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...Lg()},"validation");function TQ(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Mu(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:zo();const a=ln(e,"modelValue"),r=ne(()=>e.validationValue===void 0?a.value:e.validationValue),s=Mg(e),o=YWe(()=>e.rules),i=V([]),c=Ht(!0),A=ne(()=>!!(gr(a.value===""?null:a.value).length||gr(r.value===""?null:r.value).length)),d=ne(()=>e.errorMessages?.length?gr(e.errorMessages).concat(i.value).slice(0,Math.max(0,Number(e.maxErrors))):i.value),f=ne(()=>{let T=(e.validateOn??s.validateOn?.value)||"input";T==="lazy"&&(T="input lazy"),T==="eager"&&(T="input eager");const D=new Set(T?.split(" ")??[]);return{input:D.has("input"),blur:D.has("blur")||D.has("input")||D.has("invalid-input"),invalidInput:D.has("invalid-input"),lazy:D.has("lazy"),eager:D.has("eager")}}),m=ne(()=>e.error||e.errorMessages?.length?!1:e.rules.length?c.value?i.value.length||f.value.lazy?null:!0:!i.value.length:!0),v=Ht(!1),p=ne(()=>({[`${t}--error`]:m.value===!1,[`${t}--dirty`]:A.value,[`${t}--disabled`]:s.isDisabled.value,[`${t}--readonly`]:s.isReadonly.value})),g=Pr("validation"),y=ne(()=>e.name??Qe(n));Xl(()=>{s.register?.({id:y.value,vm:g,validate:x,reset:w,resetValidation:b})}),va(()=>{s.unregister?.(y.value)}),dn(async()=>{f.value.lazy||await x(!f.value.eager),s.update?.(y.value,m.value,d.value)}),go(()=>f.value.input||f.value.invalidInput&&m.value===!1,()=>{je(r,()=>{if(r.value!=null)x();else if(e.focused){const T=je(()=>e.focused,D=>{D||x(),T()})}})}),go(()=>f.value.blur,()=>{je(()=>e.focused,T=>{T||x()})}),je([m,d],()=>{s.update?.(y.value,m.value,d.value)});async function w(){a.value=null,await _n(),await b()}async function b(){c.value=!0,f.value.lazy?i.value=[]:await x(!f.value.eager)}async function x(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const D=[];v.value=!0;for(const k of o.value){if(D.length>=Number(e.maxErrors??1))break;const E=await(typeof k=="function"?k:()=>k)(r.value);if(E!==!0){if(E!==!1&&typeof E!="string"){console.warn(`${E} is not a valid value. Rule functions must return boolean true or a string.`);continue}D.push(E||"")}}return i.value=D,v.value=!1,c.value=T,i.value}return{errorMessages:d,isDirty:A,isDisabled:s.isDisabled,isReadonly:s.isReadonly,isPristine:c,isValid:m,isValidating:v,reset:w,resetValidation:b,validate:x,validationClasses:p}}const zc=lt({id:String,appendIcon:cn,baseColor:String,centerAffix:{type:Boolean,default:!0},color:String,glow:Boolean,iconColor:[Boolean,String],prependIcon:cn,hideDetails:[Boolean,String],hideSpinButtons:Boolean,hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},"onClick:prepend":Ds(),"onClick:append":Ds(),...Jt(),...cs(),...Mc(Mr(),["maxWidth","minWidth","width"]),...ua(),...kQ()},"VInput"),qs=gt()({name:"VInput",props:{...zc()},emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:a,emit:r}=t;const{densityClasses:s}=So(e),{dimensionStyles:o}=Or(e),{themeClasses:i}=ka(e),{rtlClasses:c}=Xr(),{InputIcon:A}=SQ(e),d=zo(),f=ne(()=>e.id||`input-${d}`),{errorMessages:m,isDirty:v,isDisabled:p,isReadonly:g,isPristine:y,isValid:w,isValidating:b,reset:x,resetValidation:T,validate:D,validationClasses:k}=TQ(e,"v-input",f),S=ne(()=>e.errorMessages?.length||!y.value&&m.value.length?m.value:e.hint&&(e.persistentHint||e.focused)?e.hint:e.messages),E=Xe(()=>S.value.length>0),C=Xe(()=>!e.hideDetails||e.hideDetails==="auto"&&(E.value||!!a.details)),U=ne(()=>C.value?`${f.value}-messages`:void 0),F=ne(()=>({id:f,messagesId:U,isDirty:v,isDisabled:p,isReadonly:g,isPristine:y,isValid:w,isValidating:b,hasDetails:C,reset:x,resetValidation:T,validate:D})),L=Xe(()=>e.error||e.disabled?void 0:e.focused?e.color:e.baseColor),H=Xe(()=>{if(e.iconColor)return e.iconColor===!0?L.value:e.iconColor});return St(()=>{const ue=!!(a.prepend||e.prependIcon),ie=!!(a.append||e.appendIcon);return h("div",{class:ct(["v-input",`v-input--${e.direction}`,{"v-input--center-affix":e.centerAffix,"v-input--focused":e.focused,"v-input--glow":e.glow,"v-input--hide-spin-buttons":e.hideSpinButtons},s.value,i.value,c.value,k.value,e.class]),style:Ut([o.value,e.style])},[ue&&h("div",{key:"prepend",class:"v-input__prepend"},[a.prepend?.(F.value),e.prependIcon&&l(A,{key:"prepend-icon",name:"prepend",color:H.value},null)]),a.default&&h("div",{class:"v-input__control"},[a.default?.(F.value)]),ie&&h("div",{key:"append",class:"v-input__append"},[e.appendIcon&&l(A,{key:"append-icon",name:"append",color:H.value},null),a.append?.(F.value)]),C.value&&h("div",{id:U.value,class:"v-input__details",role:"alert","aria-live":"polite"},[l(EQ,{active:E.value,messages:S.value},{message:a.message}),a.details?.(F.value)])])}),{reset:x,resetValidation:T,validate:D,isValid:w,errorMessages:m}}}),zC=Symbol("Forwarded refs");function KC(e,t){let n=e;for(;n;){const a=Reflect.getOwnPropertyDescriptor(n,t);if(a)return a;n=Object.getPrototypeOf(n)}}function Cs(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return e[zC]=n,new Proxy(e,{get(r,s){if(Reflect.has(r,s))return Reflect.get(r,s);if(!(typeof s=="symbol"||s.startsWith("$")||s.startsWith("__"))){for(const o of n)if(o.value&&Reflect.has(o.value,s)){const i=Reflect.get(o.value,s);return typeof i=="function"?i.bind(o.value):i}}},has(r,s){if(Reflect.has(r,s))return!0;if(typeof s=="symbol"||s.startsWith("$")||s.startsWith("__"))return!1;for(const o of n)if(o.value&&Reflect.has(o.value,s))return!0;return!1},set(r,s,o){if(Reflect.has(r,s))return Reflect.set(r,s,o);if(typeof s=="symbol"||s.startsWith("$")||s.startsWith("__"))return!1;for(const i of n)if(i.value&&Reflect.has(i.value,s))return Reflect.set(i.value,s,o);return!1},getOwnPropertyDescriptor(r,s){const o=Reflect.getOwnPropertyDescriptor(r,s);if(o)return o;if(!(typeof s=="symbol"||s.startsWith("$")||s.startsWith("__"))){for(const i of n){if(!i.value)continue;const c=KC(i.value,s)??("_"in i.value?KC(i.value._?.setupState,s):void 0);if(c)return c}for(const i of n){const c=i.value&&i.value[zC];if(!c)continue;const A=c.slice();for(;A.length;){const d=A.shift(),f=KC(d.value,s);if(f)return f;const m=d.value&&d.value[zC];m&&A.push(...m)}}}}})}const XWe=lt({...zc(),...Ma(CQ(),["inline"])},"VCheckbox"),JWe=gt()({name:"VCheckbox",inheritAttrs:!1,props:XWe(),emits:{"update:modelValue":e=>!0,"update:focused":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const r=ln(e,"modelValue"),{isFocused:s,focus:o,blur:i}=Gc(e),c=V(),A=zo();return St(()=>{const[d,f]=tA(n),m=qs.filterProps(e),v=Ru.filterProps(e);return l(qs,Pe({ref:c,class:["v-checkbox",e.class]},d,m,{modelValue:r.value,"onUpdate:modelValue":p=>r.value=p,id:e.id||`checkbox-${A}`,focused:s.value,style:e.style}),{...a,default:p=>{let{id:g,messagesId:y,isDisabled:w,isReadonly:b,isValid:x}=p;return l(Ru,Pe(v,{id:g.value,"aria-describedby":y.value,disabled:w.value,readonly:b.value},f,{error:x.value===!1,modelValue:r.value,"onUpdate:modelValue":T=>r.value=T,onFocus:o,onBlur:i}),a)}})}),Cs({},c)}});function ZWe(e){let{selectedElement:t,containerElement:n,isRtl:a,isHorizontal:r}=e;const s=q0(r,n),o=IQ(r,a,n),i=q0(r,t),c=FQ(r,t),A=i*.4;return o>c?c-A:o+s<c+i?c-s+i+A:o}function eje(e){let{selectedElement:t,containerElement:n,isHorizontal:a}=e;const r=q0(a,n),s=FQ(a,t),o=q0(a,t);return s-r/2+o/2}function RN(e,t){return t?.[e?"scrollWidth":"scrollHeight"]||0}function tje(e,t){return t?.[e?"clientWidth":"clientHeight"]||0}function IQ(e,t,n){if(!n)return 0;const{scrollLeft:a,offsetWidth:r,scrollWidth:s}=n;return e?t?s-r+a:a:n.scrollTop}function q0(e,t){return t?.[e?"offsetWidth":"offsetHeight"]||0}function FQ(e,t){return t?.[e?"offsetLeft":"offsetTop"]||0}const PQ=Symbol.for("vuetify:v-slide-group"),f4=lt({centerActive:Boolean,contentClass:null,direction:{type:String,default:"horizontal"},symbol:{type:null,default:PQ},nextIcon:{type:cn,default:"$next"},prevIcon:{type:cn,default:"$prev"},showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["always","desktop","mobile"].includes(e)},...Jt(),...Of({mobile:null}),...Nn(),...em({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),Y0=gt()({name:"VSlideGroup",props:f4(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{isRtl:a}=Xr(),{displayClasses:r,mobile:s}=rl(e),o=oA(e,e.symbol),i=Ht(!1),c=Ht(0),A=Ht(0),d=Ht(0),f=ne(()=>e.direction==="horizontal"),{resizeRef:m,contentRect:v}=$l(),{resizeRef:p,contentRect:g}=$l(),y=qne(),w=ne(()=>({container:m.el,duration:200,easing:"easeOutQuart"})),b=ne(()=>o.selected.value.length?o.items.value.findIndex(P=>P.id===o.selected.value[0]):-1),x=ne(()=>o.selected.value.length?o.items.value.findIndex(P=>P.id===o.selected.value[o.selected.value.length-1]):-1);if(Ba){let P=-1;je(()=>[o.selected.value,v.value,g.value,f.value],()=>{cancelAnimationFrame(P),P=requestAnimationFrame(()=>{if(v.value&&g.value){const G=f.value?"width":"height";A.value=v.value[G],d.value=g.value[G],i.value=A.value+1<d.value}if(b.value>=0&&p.el){const G=p.el.children[x.value];D(G,e.centerActive)}})})}const T=Ht(!1);function D(P,G){let J=0;G?J=eje({containerElement:m.el,isHorizontal:f.value,selectedElement:P}):J=ZWe({containerElement:m.el,isHorizontal:f.value,isRtl:a.value,selectedElement:P}),k(J)}function k(P){if(!Ba||!m.el)return;const G=q0(f.value,m.el),J=IQ(f.value,a.value,m.el);if(!(RN(f.value,m.el)<=G||Math.abs(P-J)<16)){if(f.value&&a.value&&m.el){const{scrollWidth:te,offsetWidth:Y}=m.el;P=te-Y-P}f.value?y.horizontal(P,w.value):y(P,w.value)}}function S(P){const{scrollTop:G,scrollLeft:J}=P.target;c.value=f.value?J:G}function E(P){if(T.value=!0,!(!i.value||!p.el)){for(const G of P.composedPath())for(const J of p.el.children)if(J===G){D(J);return}}}function C(P){T.value=!1}let U=!1;function F(P){!U&&!T.value&&!(P.relatedTarget&&p.el?.contains(P.relatedTarget))&&ie(),U=!1}function L(){U=!0}function H(P){if(!p.el)return;function G(J){P.preventDefault(),ie(J)}f.value?P.key==="ArrowRight"?G(a.value?"prev":"next"):P.key==="ArrowLeft"&&G(a.value?"next":"prev"):P.key==="ArrowDown"?G("next"):P.key==="ArrowUp"&&G("prev"),P.key==="Home"?G("first"):P.key==="End"&&G("last")}function ue(P,G){if(!P)return;let J=P;do J=J?.[G==="next"?"nextElementSibling":"previousElementSibling"];while(J?.hasAttribute("disabled"));return J}function ie(P){if(!p.el)return;let G;if(!P)G=w0(p.el)[0];else if(P==="next"){if(G=ue(p.el.querySelector(":focus"),P),!G)return ie("first")}else if(P==="prev"){if(G=ue(p.el.querySelector(":focus"),P),!G)return ie("last")}else P==="first"?(G=p.el.firstElementChild,G?.hasAttribute("disabled")&&(G=ue(G,"next"))):P==="last"&&(G=p.el.lastElementChild,G?.hasAttribute("disabled")&&(G=ue(G,"prev")));G&&G.focus({preventScroll:!0})}function Q(P){const G=f.value&&a.value?-1:1,J=(P==="prev"?-G:G)*A.value;let M=c.value+J;if(f.value&&a.value&&m.el){const{scrollWidth:te,offsetWidth:Y}=m.el;M+=te-Y}k(M)}const X=ne(()=>({next:o.next,prev:o.prev,select:o.select,isSelected:o.isSelected})),le=ne(()=>i.value||Math.abs(c.value)>0),Z=ne(()=>{switch(e.showArrows){case"always":return!0;case"desktop":return!s.value;case!0:return le.value;case"mobile":return s.value||le.value;default:return!s.value&&le.value}}),re=ne(()=>Math.abs(c.value)>1),q=ne(()=>{if(!m.value||!le.value)return!1;const P=RN(f.value,m.el),G=tje(f.value,m.el);return P-G-Math.abs(c.value)>1});return St(()=>l(e.tag,{class:ct(["v-slide-group",{"v-slide-group--vertical":!f.value,"v-slide-group--has-affixes":Z.value,"v-slide-group--is-overflowing":i.value},r.value,e.class]),style:Ut(e.style),tabindex:T.value||o.selected.value.length?-1:0,onFocus:F},{default:()=>[Z.value&&h("div",{key:"prev",class:ct(["v-slide-group__prev",{"v-slide-group__prev--disabled":!re.value}]),onMousedown:L,onClick:()=>re.value&&Q("prev")},[n.prev?.(X.value)??l(K0,null,{default:()=>[l(Ea,{icon:a.value?e.nextIcon:e.prevIcon},null)]})]),h("div",{key:"container",ref:m,class:ct(["v-slide-group__container",e.contentClass]),onScroll:S},[h("div",{ref:p,class:"v-slide-group__content",onFocusin:E,onFocusout:C,onKeydown:H},[n.default?.(X.value)])]),Z.value&&h("div",{key:"next",class:ct(["v-slide-group__next",{"v-slide-group__next--disabled":!q.value}]),onMousedown:L,onClick:()=>q.value&&Q("next")},[n.next?.(X.value)??l(K0,null,{default:()=>[l(Ea,{icon:a.value?e.prevIcon:e.nextIcon},null)]})])]})),{selected:o.selected,scrollTo:Q,scrollOffset:c,focus:ie,hasPrev:re,hasNext:q}}}),DQ=Symbol.for("vuetify:v-chip-group"),nje=lt({baseColor:String,column:Boolean,filter:Boolean,valueComparator:{type:Function,default:_s},...f4(),...Jt(),...em({selectedClass:"v-chip--selected"}),...Nn(),...ua(),...il({variant:"tonal"})},"VChipGroup"),aje=gt()({name:"VChipGroup",props:nje(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:a}=ka(e),{isSelected:r,select:s,next:o,prev:i,selected:c}=oA(e,DQ);return wr({VChip:{baseColor:Xe(()=>e.baseColor),color:Xe(()=>e.color),disabled:Xe(()=>e.disabled),filter:Xe(()=>e.filter),variant:Xe(()=>e.variant)}}),St(()=>{const A=Y0.filterProps(e);return l(Y0,Pe(A,{class:["v-chip-group",{"v-chip-group--column":e.column},a.value,e.class],style:e.style}),{default:()=>[n.default?.({isSelected:r,select:s,next:o,prev:i,selected:c.value})]})}),{}}}),rje=lt({activeClass:String,appendAvatar:String,appendIcon:cn,baseColor:String,closable:Boolean,closeIcon:{type:cn,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:cn,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:cn,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},modelValue:{type:Boolean,default:!0},onClick:Ds(),onClickOnce:Ds(),...Ko(),...Jt(),...cs(),...Jr(),...tm(),...lr(),...Vg(),...Ku(),...Nn({tag:"span"}),...ua(),...il({variant:"tonal"})},"VChip"),Eh=gt()({name:"VChip",directives:{vRipple:xo},props:rje(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0,"group:selected":e=>!0,click:e=>!0},setup(e,t){let{attrs:n,emit:a,slots:r}=t;const{t:s}=Oa(),{borderClasses:o}=ci(e),{densityClasses:i}=So(e),{elevationClasses:c}=xs(e),{roundedClasses:A}=xr(e),{sizeClasses:d}=bh(e),{themeClasses:f}=ka(e),m=ln(e,"modelValue"),v=nm(e,DQ,!1),p=Ng(e,n),g=Xe(()=>e.link!==!1&&p.isLink.value),y=ne(()=>!e.disabled&&e.link!==!1&&(!!v||e.link||p.isClickable.value)),w=Xe(()=>({"aria-label":s(e.closeLabel),disabled:e.disabled,onClick(S){S.preventDefault(),S.stopPropagation(),m.value=!1,a("click:close",S)}})),{colorClasses:b,colorStyles:x,variantClasses:T}=Zf(()=>({color:!v||v.isSelected.value?e.color??e.baseColor:e.baseColor,variant:e.variant}));function D(S){a("click",S),y.value&&(p.navigate?.(S),v?.toggle())}function k(S){(S.key==="Enter"||S.key===" ")&&(S.preventDefault(),D(S))}return()=>{const S=p.isLink.value?"a":e.tag,E=!!(e.appendIcon||e.appendAvatar),C=!!(E||r.append),U=!!(r.close||e.closable),F=!!(r.filter||e.filter)&&v,L=!!(e.prependIcon||e.prependAvatar),H=!!(L||r.prepend);return m.value&&ma(l(S,Pe({class:["v-chip",{"v-chip--disabled":e.disabled,"v-chip--label":e.label,"v-chip--link":y.value,"v-chip--filter":F,"v-chip--pill":e.pill,[`${e.activeClass}`]:e.activeClass&&p.isActive?.value},f.value,o.value,b.value,i.value,c.value,A.value,d.value,T.value,v?.selectedClass.value,e.class],style:[x.value,e.style],disabled:e.disabled||void 0,draggable:e.draggable,tabindex:y.value?0:void 0,onClick:D,onKeydown:y.value&&!g.value&&k},p.linkProps),{default:()=>[sA(y.value,"v-chip"),F&&l(u4,{key:"filter"},{default:()=>[ma(h("div",{class:"v-chip__filter"},[r.filter?l(Vn,{key:"filter-defaults",disabled:!e.filterIcon,defaults:{VIcon:{icon:e.filterIcon}}},r.filter):l(Ea,{key:"filter-icon",icon:e.filterIcon},null)]),[[ii,v.isSelected.value]])]}),H&&h("div",{key:"prepend",class:"v-chip__prepend"},[r.prepend?l(Vn,{key:"prepend-defaults",disabled:!L,defaults:{VAvatar:{image:e.prependAvatar,start:!0},VIcon:{icon:e.prependIcon,start:!0}}},r.prepend):h(Ke,null,[e.prependIcon&&l(Ea,{key:"prepend-icon",icon:e.prependIcon,start:!0},null),e.prependAvatar&&l(nl,{key:"prepend-avatar",image:e.prependAvatar,start:!0},null)])]),h("div",{class:"v-chip__content","data-no-activator":""},[r.default?.({isSelected:v?.isSelected.value,selectedClass:v?.selectedClass.value,select:v?.select,toggle:v?.toggle,value:v?.value.value,disabled:e.disabled})??K(e.text)]),C&&h("div",{key:"append",class:"v-chip__append"},[r.append?l(Vn,{key:"append-defaults",disabled:!E,defaults:{VAvatar:{end:!0,image:e.appendAvatar},VIcon:{end:!0,icon:e.appendIcon}}},r.append):h(Ke,null,[e.appendIcon&&l(Ea,{key:"append-icon",end:!0,icon:e.appendIcon},null),e.appendAvatar&&l(nl,{key:"append-avatar",end:!0,image:e.appendAvatar},null)])]),U&&h("button",Pe({key:"close",class:"v-chip__close",type:"button","data-testid":"close-chip"},w.value),[r.close?l(Vn,{key:"close-defaults",defaults:{VIcon:{icon:e.closeIcon,size:"x-small"}}},r.close):l(Ea,{key:"close-icon",icon:e.closeIcon,size:"x-small"},null)])]}),[[xo,y.value&&e.ripple,null]])}}}),sje=lt({color:String,inset:Boolean,length:[Number,String],opacity:[Number,String],thickness:[Number,String],vertical:Boolean,...Jt(),...ua()},"VDivider"),Ei=gt()({name:"VDivider",props:sje(),setup(e,t){let{attrs:n,slots:a}=t;const{themeClasses:r}=ka(e),{textColorClasses:s,textColorStyles:o}=Rs(()=>e.color),i=ne(()=>{const c={};return e.length&&(c[e.vertical?"height":"width"]=Kt(e.length)),e.thickness&&(c[e.vertical?"borderRightWidth":"borderTopWidth"]=Kt(e.thickness)),c});return St(()=>{const c=h("hr",{class:ct([{"v-divider":!0,"v-divider--inset":e.inset,"v-divider--vertical":e.vertical},r.value,s.value,e.class]),style:Ut([i.value,o.value,{"--v-border-opacity":e.opacity},e.style]),"aria-orientation":!n.role||n.role==="separator"?e.vertical?"vertical":"horizontal":void 0,role:`${n.role||"separator"}`},null);return a.default?h("div",{class:ct(["v-divider__wrapper",{"v-divider__wrapper--vertical":e.vertical,"v-divider__wrapper--inset":e.inset}])},[c,h("div",{class:"v-divider__content"},[a.default()]),c]):c}),{}}}),nB=Symbol.for("vuetify:list");function UQ(){let{filterable:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{filterable:!1};const t=Tn(nB,{filterable:!1,hasPrepend:Ht(!1),updateHasPrepend:()=>null}),n={filterable:t.filterable||e,hasPrepend:Ht(!1),updateHasPrepend:a=>{a&&(n.hasPrepend.value=a)}};return La(nB,n),t}function RQ(){return Tn(nB,null)}const m4=e=>{const t={activate:n=>{let{id:a,value:r,activated:s}=n;return a=wn(a),e&&!r&&s.size===1&&s.has(a)||(r?s.add(a):s.delete(a)),s},in:(n,a,r)=>{let s=new Set;if(n!=null)for(const o of gr(n))s=t.activate({id:o,value:!0,activated:new Set(s),children:a,parents:r});return s},out:n=>Array.from(n)};return t},NQ=e=>{const t=m4(e);return{activate:a=>{let{activated:r,id:s,...o}=a;s=wn(s);const i=r.has(s)?new Set([s]):new Set;return t.activate({...o,id:s,activated:i})},in:(a,r,s)=>{let o=new Set;if(a!=null){const i=gr(a);i.length&&(o=t.in(i.slice(0,1),r,s))}return o},out:(a,r,s)=>t.out(a,r,s)}},oje=e=>{const t=m4(e);return{activate:a=>{let{id:r,activated:s,children:o,...i}=a;return r=wn(r),o.has(r)?s:t.activate({id:r,activated:s,children:o,...i})},in:t.in,out:t.out}},ije=e=>{const t=NQ(e);return{activate:a=>{let{id:r,activated:s,children:o,...i}=a;return r=wn(r),o.has(r)?s:t.activate({id:r,activated:s,children:o,...i})},in:t.in,out:t.out}},lje={open:e=>{let{id:t,value:n,opened:a,parents:r}=e;if(n){const s=new Set;s.add(t);let o=r.get(t);for(;o!=null;)s.add(o),o=r.get(o);return s}else return a.delete(t),a},select:()=>null},VQ={open:e=>{let{id:t,value:n,opened:a,parents:r}=e;if(n){let s=r.get(t);for(a.add(t);s!=null&&s!==t;)a.add(s),s=r.get(s);return a}else a.delete(t);return a},select:()=>null},uje={open:VQ.open,select:e=>{let{id:t,value:n,opened:a,parents:r}=e;if(!n)return a;const s=[];let o=r.get(t);for(;o!=null;)s.push(o),o=r.get(o);return new Set(s)}},v4=e=>{const t={select:n=>{let{id:a,value:r,selected:s}=n;if(a=wn(a),e&&!r){const o=Array.from(s.entries()).reduce((i,c)=>{let[A,d]=c;return d==="on"&&i.push(A),i},[]);if(o.length===1&&o[0]===a)return s}return s.set(a,r?"on":"off"),s},in:(n,a,r,s)=>{const o=new Map;for(const i of n||[])t.select({id:i,value:!0,selected:o,children:a,parents:r,disabled:s});return o},out:n=>{const a=[];for(const[r,s]of n.entries())s==="on"&&a.push(r);return a}};return t},LQ=e=>{const t=v4(e);return{select:a=>{let{selected:r,id:s,...o}=a;s=wn(s);const i=r.has(s)?new Map([[s,r.get(s)]]):new Map;return t.select({...o,id:s,selected:i})},in:(a,r,s,o)=>a?.length?t.in(a.slice(0,1),r,s,o):new Map,out:(a,r,s)=>t.out(a,r,s)}},cje=e=>{const t=v4(e);return{select:a=>{let{id:r,selected:s,children:o,...i}=a;return r=wn(r),o.has(r)?s:t.select({id:r,selected:s,children:o,...i})},in:t.in,out:t.out}},dje=e=>{const t=LQ(e);return{select:a=>{let{id:r,selected:s,children:o,...i}=a;return r=wn(r),o.has(r)?s:t.select({id:r,selected:s,children:o,...i})},in:t.in,out:t.out}},MQ=e=>{const t={select:n=>{let{id:a,value:r,selected:s,children:o,parents:i,disabled:c}=n;a=wn(a);const A=new Map(s),d=[a];for(;d.length;){const m=d.shift();c.has(m)||s.set(wn(m),r?"on":"off"),o.has(m)&&d.push(...o.get(m))}let f=wn(i.get(a));for(;f;){let m=!0,v=!0;for(const p of o.get(f)){const g=wn(p);if(!c.has(g)&&(s.get(g)!=="on"&&(m=!1),s.has(g)&&s.get(g)!=="off"&&(v=!1),!m&&!v))break}s.set(f,m?"on":v?"off":"indeterminate"),f=wn(i.get(f))}return e&&!r&&Array.from(s.entries()).reduce((v,p)=>{let[g,y]=p;return y==="on"&&v.push(g),v},[]).length===0?A:s},in:(n,a,r,s)=>{let o=new Map;for(const i of n||[])o=t.select({id:i,value:!0,selected:o,children:a,parents:r,disabled:s});return o},out:(n,a)=>{const r=[];for(const[s,o]of n.entries())o==="on"&&!a.has(s)&&r.push(s);return r}};return t},Aje=e=>{const t=MQ(e);return{select:t.select,in:t.in,out:(a,r,s)=>{const o=[];for(const[i,c]of a.entries())if(c==="on"){if(s.has(i)){const A=s.get(i);if(a.get(A)==="on")continue}o.push(i)}return o}}},X0=Symbol.for("vuetify:nested"),OQ={id:Ht(),root:{register:()=>null,unregister:()=>null,children:V(new Map),parents:V(new Map),disabled:V(new Set),open:()=>null,openOnSelect:()=>null,activate:()=>null,select:()=>null,activatable:V(!1),selectable:V(!1),opened:V(new Set),activated:V(new Set),selected:V(new Map),selectedValues:V([]),getPath:()=>[]}},fje=lt({activatable:Boolean,selectable:Boolean,activeStrategy:[String,Function,Object],selectStrategy:[String,Function,Object],openStrategy:[String,Object],opened:null,activated:null,selected:null,mandatory:Boolean},"nested"),mje=e=>{let t=!1;const n=Ht(new Map),a=Ht(new Map),r=Ht(new Set),s=ln(e,"opened",e.opened,g=>new Set(Array.isArray(g)?g.map(y=>wn(y)):g),g=>[...g.values()]),o=ne(()=>{if(typeof e.activeStrategy=="object")return e.activeStrategy;if(typeof e.activeStrategy=="function")return e.activeStrategy(e.mandatory);switch(e.activeStrategy){case"leaf":return oje(e.mandatory);case"single-leaf":return ije(e.mandatory);case"independent":return m4(e.mandatory);case"single-independent":default:return NQ(e.mandatory)}}),i=ne(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;if(typeof e.selectStrategy=="function")return e.selectStrategy(e.mandatory);switch(e.selectStrategy){case"single-leaf":return dje(e.mandatory);case"leaf":return cje(e.mandatory);case"independent":return v4(e.mandatory);case"single-independent":return LQ(e.mandatory);case"trunk":return Aje(e.mandatory);case"classic":default:return MQ(e.mandatory)}}),c=ne(()=>{if(typeof e.openStrategy=="object")return e.openStrategy;switch(e.openStrategy){case"list":return uje;case"single":return lje;case"multiple":default:return VQ}}),A=ln(e,"activated",e.activated,g=>o.value.in(g,n.value,a.value),g=>o.value.out(g,n.value,a.value)),d=ln(e,"selected",e.selected,g=>i.value.in(g,n.value,a.value,r.value),g=>i.value.out(g,n.value,a.value));va(()=>{t=!0});function f(g){const y=[];let w=wn(g);for(;w!==void 0;)y.unshift(w),w=a.value.get(w);return y}const m=Pr("nested"),v=new Set,p={id:Ht(),root:{opened:s,activatable:Xe(()=>e.activatable),selectable:Xe(()=>e.selectable),activated:A,selected:d,selectedValues:ne(()=>{const g=[];for(const[y,w]of d.value.entries())w==="on"&&g.push(y);return g}),register:(g,y,w,b)=>{if(v.has(g)){f(g).map(String).join(" -> "),f(y).concat(g).map(String).join(" -> ");return}else v.add(g);y&&g!==y&&a.value.set(g,y),w&&r.value.add(g),b&&n.value.set(g,[]),y!=null&&n.value.set(y,[...n.value.get(y)||[],g])},unregister:g=>{if(t)return;v.delete(g),n.value.delete(g),r.value.delete(g);const y=a.value.get(g);if(y){const w=n.value.get(y)??[];n.value.set(y,w.filter(b=>b!==g))}a.value.delete(g)},open:(g,y,w)=>{m.emit("click:open",{id:g,value:y,path:f(g),event:w});const b=c.value.open({id:g,value:y,opened:new Set(s.value),children:n.value,parents:a.value,event:w});b&&(s.value=b)},openOnSelect:(g,y,w)=>{const b=c.value.select({id:g,value:y,selected:new Map(d.value),opened:new Set(s.value),children:n.value,parents:a.value,event:w});b&&(s.value=b)},select:(g,y,w)=>{m.emit("click:select",{id:g,value:y,path:f(g),event:w});const b=i.value.select({id:g,value:y,selected:new Map(d.value),children:n.value,parents:a.value,disabled:r.value,event:w});b&&(d.value=b),p.root.openOnSelect(g,y,w)},activate:(g,y,w)=>{if(!e.activatable)return p.root.select(g,!0,w);m.emit("click:activate",{id:g,value:y,path:f(g),event:w});const b=o.value.activate({id:g,value:y,activated:new Set(A.value),children:n.value,parents:a.value,event:w});if(b.size!==A.value.size)A.value=b;else{for(const x of b)if(!A.value.has(x)){A.value=b;return}for(const x of A.value)if(!b.has(x)){A.value=b;return}}},children:n,parents:a,disabled:r,getPath:f}};return La(X0,p),p.root},HQ=(e,t,n)=>{const a=Tn(X0,OQ),r=Symbol("nested item"),s=ne(()=>{const i=wn(Tu(e));return i!==void 0?i:r}),o={...a,id:s,open:(i,c)=>a.root.open(s.value,i,c),openOnSelect:(i,c)=>a.root.openOnSelect(s.value,i,c),isOpen:ne(()=>a.root.opened.value.has(s.value)),parent:ne(()=>a.root.parents.value.get(s.value)),activate:(i,c)=>a.root.activate(s.value,i,c),isActivated:ne(()=>a.root.activated.value.has(s.value)),select:(i,c)=>a.root.select(s.value,i,c),isSelected:ne(()=>a.root.selected.value.get(s.value)==="on"),isIndeterminate:ne(()=>a.root.selected.value.get(s.value)==="indeterminate"),isLeaf:ne(()=>!a.root.children.value.get(s.value)),isGroupActivator:a.isGroupActivator};return Xl(()=>{a.isGroupActivator||a.root.register(s.value,a.id.value,Tu(t),n)}),va(()=>{a.isGroupActivator||a.root.unregister(s.value)}),n&&La(X0,o),o},vje=()=>{const e=Tn(X0,OQ);La(X0,{...e,isGroupActivator:!0})},hje=Fi({name:"VListGroupActivator",setup(e,t){let{slots:n}=t;return vje(),()=>n.default?.()}}),$Q=lt({activeColor:String,baseColor:String,color:String,collapseIcon:{type:cn,default:"$collapse"},disabled:Boolean,expandIcon:{type:cn,default:"$expand"},rawId:[String,Number],prependIcon:cn,appendIcon:cn,fluid:Boolean,subgroup:Boolean,title:String,value:null,...Jt(),...Nn()},"VListGroup"),J0=gt()({name:"VListGroup",props:$Q(),setup(e,t){let{slots:n}=t;const{isOpen:a,open:r,id:s}=HQ(()=>e.value,()=>e.disabled,!0),o=ne(()=>`v-list-group--id-${String(e.rawId??s.value)}`),i=RQ(),{isBooted:c}=Jf();function A(v){["INPUT","TEXTAREA"].includes(v.target?.tagName)||r(!a.value,v)}const d=ne(()=>({onClick:A,class:"v-list-group__header",id:o.value})),f=ne(()=>a.value?e.collapseIcon:e.expandIcon),m=ne(()=>({VListItem:{activeColor:e.activeColor,baseColor:e.baseColor,color:e.color,prependIcon:e.prependIcon||e.subgroup&&f.value,appendIcon:e.appendIcon||!e.subgroup&&f.value,title:e.title,value:e.value}}));return St(()=>l(e.tag,{class:ct(["v-list-group",{"v-list-group--prepend":i?.hasPrepend.value,"v-list-group--fluid":e.fluid,"v-list-group--subgroup":e.subgroup,"v-list-group--open":a.value},e.class]),style:Ut(e.style)},{default:()=>[n.activator&&l(Vn,{defaults:m.value},{default:()=>[l(hje,null,{default:()=>[n.activator({props:d.value,isOpen:a.value})]})]}),l(ho,{transition:{component:qw},disabled:!c.value},{default:()=>[ma(h("div",{class:"v-list-group__items",role:"group","aria-labelledby":o.value},[n.default?.()]),[[ii,a.value]])]})]})),{isOpen:a}}}),pje=lt({opacity:[Number,String],...Jt(),...Nn()},"VListItemSubtitle"),QQ=gt()({name:"VListItemSubtitle",props:pje(),setup(e,t){let{slots:n}=t;return St(()=>l(e.tag,{class:ct(["v-list-item-subtitle",e.class]),style:Ut([{"--v-list-item-subtitle-opacity":e.opacity},e.style])},n)),{}}}),GQ=Oc("v-list-item-title"),zQ=lt({active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:cn,baseColor:String,disabled:Boolean,lines:[Boolean,String],link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:cn,ripple:{type:[Boolean,Object],default:!0},slim:Boolean,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},value:null,onClick:Ds(),onClickOnce:Ds(),...Ko(),...Jt(),...cs(),...Mr(),...Jr(),...lr(),...Vg(),...Nn(),...ua(),...il({variant:"text"})},"VListItem"),jl=gt()({name:"VListItem",directives:{vRipple:xo},props:zQ(),emits:{click:e=>!0},setup(e,t){let{attrs:n,slots:a,emit:r}=t;const s=Ng(e,n),o=ne(()=>e.value===void 0?s.href.value:e.value),{activate:i,isActivated:c,select:A,isOpen:d,isSelected:f,isIndeterminate:m,isGroupActivator:v,root:p,parent:g,openOnSelect:y,id:w}=HQ(o,()=>e.disabled,!1),b=RQ(),x=ne(()=>e.active!==!1&&(e.active||s.isActive?.value||(p.activatable.value?c.value:f.value))),T=Xe(()=>e.link!==!1&&s.isLink.value),D=ne(()=>!!b&&(p.selectable.value||p.activatable.value||e.value!=null)),k=ne(()=>!e.disabled&&e.link!==!1&&(e.link||s.isClickable.value||D.value)),S=Xe(()=>e.rounded||e.nav),E=Xe(()=>e.color??e.activeColor),C=Xe(()=>({color:x.value?E.value??e.baseColor:e.baseColor,variant:e.variant}));je(()=>s.isActive?.value,M=>{M&&U()}),Xl(()=>{s.isActive?.value&&U()});function U(){g.value!=null&&p.open(g.value,!0),y(!0)}const{themeClasses:F}=ka(e),{borderClasses:L}=ci(e),{colorClasses:H,colorStyles:ue,variantClasses:ie}=Zf(C),{densityClasses:Q}=So(e),{dimensionStyles:X}=Or(e),{elevationClasses:le}=xs(e),{roundedClasses:Z}=xr(S),re=Xe(()=>e.lines?`v-list-item--${e.lines}-line`:void 0),q=Xe(()=>e.ripple!==void 0&&e.ripple&&b?.filterable?{keys:["Enter"]}:e.ripple),P=ne(()=>({isActive:x.value,select:A,isOpen:d.value,isSelected:f.value,isIndeterminate:m.value}));function G(M){r("click",M),!["INPUT","TEXTAREA"].includes(M.target?.tagName)&&k.value&&(s.navigate?.(M),!v&&(p.activatable.value?i(!c.value,M):(p.selectable.value||e.value!=null)&&A(!f.value,M)))}function J(M){const te=M.target;["INPUT","TEXTAREA"].includes(te.tagName)||(M.key==="Enter"||M.key===" "&&!b?.filterable)&&(M.preventDefault(),M.stopPropagation(),M.target.dispatchEvent(new MouseEvent("click",M)))}return St(()=>{const M=T.value?"a":e.tag,te=a.title||e.title!=null,Y=a.subtitle||e.subtitle!=null,W=!!(e.appendAvatar||e.appendIcon),ee=!!(W||a.append),ae=!!(e.prependAvatar||e.prependIcon),oe=!!(ae||a.prepend);return b?.updateHasPrepend(oe),e.activeColor&&q8("active-color",["color","base-color"]),ma(l(M,Pe({class:["v-list-item",{"v-list-item--active":x.value,"v-list-item--disabled":e.disabled,"v-list-item--link":k.value,"v-list-item--nav":e.nav,"v-list-item--prepend":!oe&&b?.hasPrepend.value,"v-list-item--slim":e.slim,[`${e.activeClass}`]:e.activeClass&&x.value},F.value,L.value,H.value,Q.value,le.value,re.value,Z.value,ie.value,e.class],style:[ue.value,X.value,e.style],tabindex:k.value?b?-2:0:void 0,"aria-selected":D.value?p.activatable.value?c.value:p.selectable.value?f.value:x.value:void 0,onClick:G,onKeydown:k.value&&!T.value&&J},s.linkProps),{default:()=>[sA(k.value||x.value,"v-list-item"),oe&&h("div",{key:"prepend",class:"v-list-item__prepend"},[a.prepend?l(Vn,{key:"prepend-defaults",disabled:!ae,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon},VListItemAction:{start:!0}}},{default:()=>[a.prepend?.(P.value)]}):h(Ke,null,[e.prependAvatar&&l(nl,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&l(Ea,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)]),h("div",{class:"v-list-item__spacer"},null)]),h("div",{class:"v-list-item__content","data-no-activator":""},[te&&l(GQ,{key:"title"},{default:()=>[a.title?.({title:e.title})??K(e.title)]}),Y&&l(QQ,{key:"subtitle"},{default:()=>[a.subtitle?.({subtitle:e.subtitle})??K(e.subtitle)]}),a.default?.(P.value)]),ee&&h("div",{key:"append",class:"v-list-item__append"},[a.append?l(Vn,{key:"append-defaults",disabled:!W,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon},VListItemAction:{end:!0}}},{default:()=>[a.append?.(P.value)]}):h(Ke,null,[e.appendIcon&&l(Ea,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&l(nl,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)]),h("div",{class:"v-list-item__spacer"},null)])]}),[[xo,k.value&&q.value]])}),{activate:i,isActivated:c,isGroupActivator:v,isSelected:f,list:b,select:A,root:p,id:w,link:s}}}),gje=lt({color:String,inset:Boolean,sticky:Boolean,title:String,...Jt(),...Nn()},"VListSubheader"),Bh=gt()({name:"VListSubheader",props:gje(),setup(e,t){let{slots:n}=t;const{textColorClasses:a,textColorStyles:r}=Rs(()=>e.color);return St(()=>{const s=!!(n.default||e.title);return l(e.tag,{class:ct(["v-list-subheader",{"v-list-subheader--inset":e.inset,"v-list-subheader--sticky":e.sticky},a.value,e.class]),style:Ut([{textColorStyles:r},e.style])},{default:()=>[s&&h("div",{class:"v-list-subheader__text"},[n.default?.()??e.title])]})}),{}}}),yje=lt({items:Array,returnObject:Boolean},"VListChildren"),KQ=gt()({name:"VListChildren",props:yje(),setup(e,t){let{slots:n}=t;return UQ(),()=>n.default?.()??e.items?.map(a=>{let{children:r,props:s,type:o,raw:i}=a;if(o==="divider")return n.divider?.({props:s})??l(Ei,s,null);if(o==="subheader")return n.subheader?.({props:s})??l(Bh,s,null);const c={subtitle:n.subtitle?d=>n.subtitle?.({...d,item:i}):void 0,prepend:n.prepend?d=>n.prepend?.({...d,item:i}):void 0,append:n.append?d=>n.append?.({...d,item:i}):void 0,title:n.title?d=>n.title?.({...d,item:i}):void 0},A=J0.filterProps(s);return r?l(J0,Pe(A,{value:e.returnObject?i:s?.value,rawId:s?.value}),{activator:d=>{let{props:f}=d;const m=Pe(s,f,{value:e.returnObject?i:s.value});return n.header?n.header({props:m}):l(jl,m,c)},default:()=>l(KQ,{items:r,returnObject:e.returnObject},n)}):n.item?n.item({props:s}):l(jl,Pe(s,{value:e.returnObject?i:s.value}),c)})}}),WQ=lt({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},itemType:{type:[Boolean,String,Array,Function],default:"type"},returnObject:Boolean,valueComparator:Function},"list-items"),_je=new Set(["item","divider","subheader"]);function El(e,t){const n=Vr(t,e.itemTitle,t),a=Vr(t,e.itemValue,n),r=Vr(t,e.itemChildren),s=e.itemProps===!0?typeof t=="object"&&t!=null&&!Array.isArray(t)?"children"in t?Ma(t,["children"]):t:void 0:Vr(t,e.itemProps);let o=Vr(t,e.itemType,"item");_je.has(o)||(o="item");const i={title:n,value:a,...s};return{type:o,title:String(i.title??""),value:i.value,props:i,children:o==="item"&&Array.isArray(r)?jQ(e,r):void 0,raw:t}}El.neededProps=["itemTitle","itemValue","itemChildren","itemProps","itemType"];function jQ(e,t){const n=Mc(e,El.neededProps),a=[];for(const r of t)a.push(El(n,r));return a}function h4(e){const t=ne(()=>jQ(e,e.items)),n=ne(()=>t.value.some(i=>i.value===null)),a=Ht(new Map),r=Ht([]);_r(()=>{const i=t.value,c=new Map,A=[];for(let d=0;d<i.length;d++){const f=i[d];if(CS(f.value)||f.value===null){let m=c.get(f.value);m||(m=[],c.set(f.value,m)),m.push(f)}else A.push(f)}a.value=c,r.value=A});function s(i){const c=a.value,A=t.value,d=r.value,f=n.value,m=e.returnObject,v=!!e.valueComparator,p=e.valueComparator||_s,g=Mc(e,El.neededProps),y=[];e:for(const w of i){if(!f&&w===null)continue;if(m&&typeof w=="string"){y.push(El(g,w));continue}const b=c.get(w);if(v||!b){for(const x of v?A:d)if(p(w,x.value)){y.push(x);continue e}y.push(El(g,w));continue}y.push(...b)}return y}function o(i){return e.returnObject?i.map(c=>{let{raw:A}=c;return A}):i.map(c=>{let{value:A}=c;return A})}return{items:t,transformIn:s,transformOut:o}}const wje=new Set(["item","divider","subheader"]);function bje(e,t){const n=CS(t)?t:Vr(t,e.itemTitle),a=CS(t)?t:Vr(t,e.itemValue,void 0),r=Vr(t,e.itemChildren),s=e.itemProps===!0?Ma(t,["children"]):Vr(t,e.itemProps);let o=Vr(t,e.itemType,"item");wje.has(o)||(o="item");const i={title:n,value:a,...s};return{type:o,title:i.title,value:i.value,props:i,children:o==="item"&&r?qQ(e,r):void 0,raw:t}}function qQ(e,t){const n=[];for(const a of t)n.push(bje(e,a));return n}function YQ(e){return{items:ne(()=>qQ(e,e.items))}}const XQ=lt({baseColor:String,activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,filterable:Boolean,expandIcon:cn,collapseIcon:cn,lines:{type:[Boolean,String],default:"one"},slim:Boolean,nav:Boolean,"onClick:open":Ds(),"onClick:select":Ds(),"onUpdate:opened":Ds(),...fje({selectStrategy:"single-leaf",openStrategy:"list"}),...Ko(),...Jt(),...cs(),...Mr(),...Jr(),...WQ(),...lr(),...Nn(),...ua(),...il({variant:"text"})},"VList"),jv=gt()({name:"VList",props:XQ(),emits:{"update:selected":e=>!0,"update:activated":e=>!0,"update:opened":e=>!0,"click:open":e=>!0,"click:activate":e=>!0,"click:select":e=>!0},setup(e,t){let{slots:n}=t;const{items:a}=YQ(e),{themeClasses:r}=ka(e),{backgroundColorClasses:s,backgroundColorStyles:o}=Fa(()=>e.bgColor),{borderClasses:i}=ci(e),{densityClasses:c}=So(e),{dimensionStyles:A}=Or(e),{elevationClasses:d}=xs(e),{roundedClasses:f}=xr(e),{children:m,open:v,parents:p,select:g,getPath:y}=mje(e),w=Xe(()=>e.lines?`v-list--${e.lines}-line`:void 0),b=Xe(()=>e.activeColor),x=Xe(()=>e.baseColor),T=Xe(()=>e.color);UQ({filterable:e.filterable}),wr({VListGroup:{activeColor:b,baseColor:x,color:T,expandIcon:Xe(()=>e.expandIcon),collapseIcon:Xe(()=>e.collapseIcon)},VListItem:{activeClass:Xe(()=>e.activeClass),activeColor:b,baseColor:x,color:T,density:Xe(()=>e.density),disabled:Xe(()=>e.disabled),lines:Xe(()=>e.lines),nav:Xe(()=>e.nav),slim:Xe(()=>e.slim),variant:Xe(()=>e.variant)}});const D=Ht(!1),k=V();function S(H){D.value=!0}function E(H){D.value=!1}function C(H){!D.value&&!(H.relatedTarget&&k.value?.contains(H.relatedTarget))&&L()}function U(H){const ue=H.target;if(!(!k.value||ue.tagName==="INPUT"&&["Home","End"].includes(H.key)||ue.tagName==="TEXTAREA")){if(H.key==="ArrowDown")L("next");else if(H.key==="ArrowUp")L("prev");else if(H.key==="Home")L("first");else if(H.key==="End")L("last");else return;H.preventDefault()}}function F(H){D.value=!0}function L(H){if(k.value)return nf(k.value,H)}return St(()=>l(e.tag,{ref:k,class:ct(["v-list",{"v-list--disabled":e.disabled,"v-list--nav":e.nav,"v-list--slim":e.slim},r.value,s.value,i.value,c.value,d.value,w.value,f.value,e.class]),style:Ut([o.value,A.value,e.style]),tabindex:e.disabled?-1:0,role:"listbox","aria-activedescendant":void 0,onFocusin:S,onFocusout:E,onFocus:C,onKeydown:U,onMousedown:F},{default:()=>[l(KQ,{items:a.value,returnObject:e.returnObject},n)]})),{open:v,select:g,focus:L,children:m,parents:p,getPath:y}}}),xje=Oc("v-list-img"),Cje=lt({start:Boolean,end:Boolean,...Jt(),...Nn()},"VListItemAction"),JQ=gt()({name:"VListItemAction",props:Cje(),setup(e,t){let{slots:n}=t;return St(()=>l(e.tag,{class:ct(["v-list-item-action",{"v-list-item-action--start":e.start,"v-list-item-action--end":e.end},e.class]),style:Ut(e.style)},n)),{}}}),Sje=lt({start:Boolean,end:Boolean,...Jt(),...Nn()},"VListItemMedia"),Eje=gt()({name:"VListItemMedia",props:Sje(),setup(e,t){let{slots:n}=t;return St(()=>l(e.tag,{class:ct(["v-list-item-media",{"v-list-item-media--start":e.start,"v-list-item-media--end":e.end},e.class]),style:Ut(e.style)},n)),{}}});function WC(e,t){return{x:e.x+t.x,y:e.y+t.y}}function Bje(e,t){return{x:e.x-t.x,y:e.y-t.y}}function NN(e,t){if(e.side==="top"||e.side==="bottom"){const{side:n,align:a}=e,r=a==="left"?0:a==="center"?t.width/2:a==="right"?t.width:a,s=n==="top"?0:n==="bottom"?t.height:n;return WC({x:r,y:s},t)}else if(e.side==="left"||e.side==="right"){const{side:n,align:a}=e,r=n==="left"?0:n==="right"?t.width:n,s=a==="top"?0:a==="center"?t.height/2:a==="bottom"?t.height:a;return WC({x:r,y:s},t)}return WC({x:t.width/2,y:t.height/2},t)}const ZQ={static:Ije,connected:Pje},kje=lt({locationStrategy:{type:[String,Function],default:"static",validator:e=>typeof e=="function"||e in ZQ},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array]},"VOverlay-location-strategies");function Tje(e,t){const n=V({}),a=V();Ba&&go(()=>!!(t.isActive.value&&e.locationStrategy),i=>{je(()=>e.locationStrategy,i),us(()=>{window.removeEventListener("resize",r),visualViewport?.removeEventListener("resize",s),visualViewport?.removeEventListener("scroll",o),a.value=void 0}),window.addEventListener("resize",r,{passive:!0}),visualViewport?.addEventListener("resize",s,{passive:!0}),visualViewport?.addEventListener("scroll",o,{passive:!0}),typeof e.locationStrategy=="function"?a.value=e.locationStrategy(t,e,n)?.updateLocation:a.value=ZQ[e.locationStrategy](t,e,n)?.updateLocation});function r(i){a.value?.(i)}function s(i){a.value?.(i)}function o(i){a.value?.(i)}return{contentStyles:n,updateLocation:a}}function Ije(){}function Fje(e,t){const n=mk(e);return t?n.x+=parseFloat(e.style.right||0):n.x-=parseFloat(e.style.left||0),n.y-=parseFloat(e.style.top||0),n}function Pje(e,t,n){(Array.isArray(e.target.value)||ene(e.target.value))&&Object.assign(n.value,{position:"fixed",top:0,[e.isRtl.value?"right":"left"]:0});const{preferredAnchor:r,preferredOrigin:s}=fk(()=>{const w=SS(t.location,e.isRtl.value),b=t.origin==="overlap"?w:t.origin==="auto"?Ix(w):SS(t.origin,e.isRtl.value);return w.side===b.side&&w.align===Fx(b).align?{preferredAnchor:tD(w),preferredOrigin:tD(b)}:{preferredAnchor:w,preferredOrigin:b}}),[o,i,c,A]=["minWidth","minHeight","maxWidth","maxHeight"].map(w=>ne(()=>{const b=parseFloat(t[w]);return isNaN(b)?1/0:b})),d=ne(()=>{if(Array.isArray(t.offset))return t.offset;if(typeof t.offset=="string"){const w=t.offset.split(" ").map(parseFloat);return w.length<2&&w.push(0),w}return typeof t.offset=="number"?[t.offset,0]:[0,0]});let f=!1,m=-1;const v=new Q8(4),p=new ResizeObserver(()=>{if(!f)return;if(requestAnimationFrame(b=>{b!==m&&v.clear(),requestAnimationFrame(x=>{m=x})}),v.isFull){const b=v.values();if(_s(b.at(-1),b.at(-3))&&!_s(b.at(-1),b.at(-2)))return}const w=y();w&&v.push(w.flipped)});let g=new Eu({x:0,y:0,width:0,height:0});je(e.target,(w,b)=>{b&&!Array.isArray(b)&&p.unobserve(b),Array.isArray(w)?_s(w,b)||y():w&&p.observe(w)},{immediate:!0}),je(e.contentEl,(w,b)=>{b&&p.unobserve(b),w&&p.observe(w)},{immediate:!0}),us(()=>{p.disconnect()});function y(){if(f=!1,requestAnimationFrame(()=>f=!0),!e.target.value||!e.contentEl.value)return;(Array.isArray(e.target.value)||e.target.value.offsetParent||e.target.value.getClientRects().length)&&(g=j8(e.target.value));const w=Fje(e.contentEl.value,e.isRtl.value),b=I_(e.contentEl.value),x=12;b.length||(b.push(document.documentElement),e.contentEl.value.style.top&&e.contentEl.value.style.left||(w.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),w.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const T=b.reduce((H,ue)=>{const ie=wte(ue);return H?new Eu({x:Math.max(H.left,ie.left),y:Math.max(H.top,ie.top),width:Math.min(H.right,ie.right)-Math.max(H.left,ie.left),height:Math.min(H.bottom,ie.bottom)-Math.max(H.top,ie.top)}):ie},void 0);T.x+=x,T.y+=x,T.width-=x*2,T.height-=x*2;let D={anchor:r.value,origin:s.value};function k(H){const ue=new Eu(w),ie=NN(H.anchor,g),Q=NN(H.origin,ue);let{x:X,y:le}=Bje(ie,Q);switch(H.anchor.side){case"top":le-=d.value[0];break;case"bottom":le+=d.value[0];break;case"left":X-=d.value[0];break;case"right":X+=d.value[0];break}switch(H.anchor.align){case"top":le-=d.value[1];break;case"bottom":le+=d.value[1];break;case"left":X-=d.value[1];break;case"right":X+=d.value[1];break}return ue.x+=X,ue.y+=le,ue.width=Math.min(ue.width,c.value),ue.height=Math.min(ue.height,A.value),{overflows:aD(ue,T),x:X,y:le}}let S=0,E=0;const C={x:0,y:0},U={x:!1,y:!1};let F=-1;for(;!(F++>10);){const{x:H,y:ue,overflows:ie}=k(D);S+=H,E+=ue,w.x+=H,w.y+=ue;{const Q=nD(D.anchor),X=ie.x.before||ie.x.after,le=ie.y.before||ie.y.after;let Z=!1;if(["x","y"].forEach(re=>{if(re==="x"&&X&&!U.x||re==="y"&&le&&!U.y){const q={anchor:{...D.anchor},origin:{...D.origin}},P=re==="x"?Q==="y"?Fx:Ix:Q==="y"?Ix:Fx;q.anchor=P(q.anchor),q.origin=P(q.origin);const{overflows:G}=k(q);(G[re].before<=ie[re].before&&G[re].after<=ie[re].after||G[re].before+G[re].after<(ie[re].before+ie[re].after)/2)&&(D=q,Z=U[re]=!0)}}),Z)continue}ie.x.before&&(S+=ie.x.before,w.x+=ie.x.before),ie.x.after&&(S-=ie.x.after,w.x-=ie.x.after),ie.y.before&&(E+=ie.y.before,w.y+=ie.y.before),ie.y.after&&(E-=ie.y.after,w.y-=ie.y.after);{const Q=aD(w,T);C.x=T.width-Q.x.before-Q.x.after,C.y=T.height-Q.y.before-Q.y.after,S+=Q.x.before,w.x+=Q.x.before,E+=Q.y.before,w.y+=Q.y.before}break}const L=nD(D.anchor);return Object.assign(n.value,{"--v-overlay-anchor-origin":`${D.anchor.side} ${D.anchor.align}`,transformOrigin:`${D.origin.side} ${D.origin.align}`,top:Kt(jC(E)),left:e.isRtl.value?void 0:Kt(jC(S)),right:e.isRtl.value?Kt(jC(-S)):void 0,minWidth:Kt(L==="y"?Math.min(o.value,g.width):o.value),maxWidth:Kt(VN(Ja(C.x,o.value===1/0?0:o.value,c.value))),maxHeight:Kt(VN(Ja(C.y,i.value===1/0?0:i.value,A.value)))}),{available:C,contentBox:w,flipped:U}}return je(()=>[r.value,s.value,t.offset,t.minWidth,t.minHeight,t.maxWidth,t.maxHeight],()=>y()),_n(()=>{const w=y();if(!w)return;const{available:b,contentBox:x}=w;x.height>b.y&&requestAnimationFrame(()=>{y(),requestAnimationFrame(()=>{y()})})}),{updateLocation:y}}function jC(e){return Math.round(e*devicePixelRatio)/devicePixelRatio}function VN(e){return Math.ceil(e*devicePixelRatio)/devicePixelRatio}let aB=!0;const T2=[];function Dje(e){!aB||T2.length?(T2.push(e),rB()):(aB=!1,e(),rB())}let LN=-1;function rB(){cancelAnimationFrame(LN),LN=requestAnimationFrame(()=>{const e=T2.shift();e&&e(),T2.length?rB():aB=!0})}const e7={none:null,close:Nje,block:Vje,reposition:Lje},Uje=lt({scrollStrategy:{type:[String,Function],default:"block",validator:e=>typeof e=="function"||e in e7}},"VOverlay-scroll-strategies");function Rje(e,t){if(!Ba)return;let n;_r(async()=>{n?.stop(),t.isActive.value&&e.scrollStrategy&&(n=Rd(),await new Promise(a=>setTimeout(a)),n.active&&n.run(()=>{typeof e.scrollStrategy=="function"?e.scrollStrategy(t,e,n):e7[e.scrollStrategy]?.(t,e,n)}))}),us(()=>{n?.stop()})}function Nje(e){function t(n){e.isActive.value=!1}t7(p4(e.target.value,e.contentEl.value),t)}function Vje(e,t){const n=e.root.value?.offsetParent,a=p4(e.target.value,e.contentEl.value),r=[...new Set([...I_(a,t.contained?n:void 0),...I_(e.contentEl.value,t.contained?n:void 0)])].filter(i=>!i.classList.contains("v-overlay-scroll-blocked")),s=window.innerWidth-document.documentElement.offsetWidth,o=(i=>yk(i)&&i)(n||document.documentElement);o&&e.root.value.classList.add("v-overlay--scroll-blocked"),r.forEach((i,c)=>{i.style.setProperty("--v-body-scroll-x",Kt(-i.scrollLeft)),i.style.setProperty("--v-body-scroll-y",Kt(-i.scrollTop)),i!==document.documentElement&&i.style.setProperty("--v-scrollbar-offset",Kt(s)),i.classList.add("v-overlay-scroll-blocked")}),us(()=>{r.forEach((i,c)=>{const A=parseFloat(i.style.getPropertyValue("--v-body-scroll-x")),d=parseFloat(i.style.getPropertyValue("--v-body-scroll-y")),f=i.style.scrollBehavior;i.style.scrollBehavior="auto",i.style.removeProperty("--v-body-scroll-x"),i.style.removeProperty("--v-body-scroll-y"),i.style.removeProperty("--v-scrollbar-offset"),i.classList.remove("v-overlay-scroll-blocked"),i.scrollLeft=-A,i.scrollTop=-d,i.style.scrollBehavior=f}),o&&e.root.value.classList.remove("v-overlay--scroll-blocked")})}function Lje(e,t,n){let a=!1,r=-1,s=-1;function o(i){Dje(()=>{const c=performance.now();e.updateLocation.value?.(i),a=(performance.now()-c)/(1e3/60)>2})}s=(typeof requestIdleCallback>"u"?i=>i():requestIdleCallback)(()=>{n.run(()=>{t7(p4(e.target.value,e.contentEl.value),i=>{a?(cancelAnimationFrame(r),r=requestAnimationFrame(()=>{r=requestAnimationFrame(()=>{o(i)})})):o(i)})})}),us(()=>{typeof cancelIdleCallback<"u"&&cancelIdleCallback(s),cancelAnimationFrame(r)})}function p4(e,t){return Array.isArray(e)?document.elementsFromPoint(...e).find(n=>!t?.contains(n)):e??t}function t7(e,t){const n=[document,...I_(e)];n.forEach(a=>{a.addEventListener("scroll",t,{passive:!0})}),us(()=>{n.forEach(a=>{a.removeEventListener("scroll",t)})})}const sB=Symbol.for("vuetify:v-menu"),g4=lt({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function y4(e,t){let n=()=>{};function a(o){n?.();const i=Number(o?e.openDelay:e.closeDelay);return new Promise(c=>{n=vte(i,()=>{t?.(o),c(o)})})}function r(){return a(!0)}function s(){return a(!1)}return{clearDelay:n,runOpenDelay:r,runCloseDelay:s}}const Mje=lt({target:[String,Object],activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...g4()},"VOverlay-activator");function Oje(e,t){let{isActive:n,isTop:a,contentEl:r}=t;const s=Pr("useActivator"),o=V();let i=!1,c=!1,A=!0;const d=ne(()=>e.openOnFocus||e.openOnFocus==null&&e.openOnHover),f=ne(()=>e.openOnClick||e.openOnClick==null&&!e.openOnHover&&!d.value),{runOpenDelay:m,runCloseDelay:v}=y4(e,E=>{E===(e.openOnHover&&i||d.value&&c)&&!(e.openOnHover&&n.value&&!a.value)&&(n.value!==E&&(A=!0),n.value=E)}),p=V(),g={onClick:E=>{E.stopPropagation(),o.value=E.currentTarget||E.target,n.value||(p.value=[E.clientX,E.clientY]),n.value=!n.value},onMouseenter:E=>{E.sourceCapabilities?.firesTouchEvents||(i=!0,o.value=E.currentTarget||E.target,m())},onMouseleave:E=>{i=!1,v()},onFocus:E=>{Iv(E.target,":focus-visible")!==!1&&(c=!0,E.stopPropagation(),o.value=E.currentTarget||E.target,m())},onBlur:E=>{c=!1,E.stopPropagation(),v()}},y=ne(()=>{const E={};return f.value&&(E.onClick=g.onClick),e.openOnHover&&(E.onMouseenter=g.onMouseenter,E.onMouseleave=g.onMouseleave),d.value&&(E.onFocus=g.onFocus,E.onBlur=g.onBlur),E}),w=ne(()=>{const E={};if(e.openOnHover&&(E.onMouseenter=()=>{i=!0,m()},E.onMouseleave=()=>{i=!1,v()}),d.value&&(E.onFocusin=()=>{c=!0,m()},E.onFocusout=()=>{c=!1,v()}),e.closeOnContentClick){const C=Tn(sB,null);E.onClick=()=>{n.value=!1,C?.closeParents()}}return E}),b=ne(()=>{const E={};return e.openOnHover&&(E.onMouseenter=()=>{A&&(i=!0,A=!1,m())},E.onMouseleave=()=>{i=!1,v()}),E});je(a,E=>{E&&(e.openOnHover&&!i&&(!d.value||!c)||d.value&&!c&&(!e.openOnHover||!i))&&!r.value?.contains(document.activeElement)&&(n.value=!1)}),je(n,E=>{E||setTimeout(()=>{p.value=void 0})},{flush:"post"});const x=B_();_r(()=>{x.value&&_n(()=>{o.value=x.el})});const T=B_(),D=ne(()=>e.target==="cursor"&&p.value?p.value:T.value?T.el:n7(e.target,s)||o.value),k=ne(()=>Array.isArray(D.value)?void 0:D.value);let S;return je(()=>!!e.activator,E=>{E&&Ba?(S=Rd(),S.run(()=>{Hje(e,s,{activatorEl:o,activatorEvents:y})})):S&&S.stop()},{flush:"post",immediate:!0}),us(()=>{S?.stop()}),{activatorEl:o,activatorRef:x,target:D,targetEl:k,targetRef:T,activatorEvents:y,contentEvents:w,scrimEvents:b}}function Hje(e,t,n){let{activatorEl:a,activatorEvents:r}=n;je(()=>e.activator,(c,A)=>{if(A&&c!==A){const d=i(A);d&&o(d)}c&&_n(()=>s())},{immediate:!0}),je(()=>e.activatorProps,()=>{s()}),us(()=>{o()});function s(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:i(),A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;c&&bte(c,Pe(r.value,A))}function o(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:i(),A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;c&&xte(c,Pe(r.value,A))}function i(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.activator;const A=n7(c,t);return a.value=A?.nodeType===Node.ELEMENT_NODE?A:void 0,a.value}}function n7(e,t){if(!e)return;let n;if(e==="parent"){let a=t?.proxy?.$el?.parentNode;for(;a?.hasAttribute("data-no-activator");)a=a.parentNode;n=a}else typeof e=="string"?n=document.querySelector(e):"$el"in e?n=e.$el:n=e;return n}function a7(){if(!Ba)return Ht(!1);const{ssr:e}=rl();if(e){const t=Ht(!1);return dn(()=>{t.value=!0}),t}else return Ht(!0)}const _4=lt({eager:Boolean},"lazy");function w4(e,t){const n=Ht(!1),a=Xe(()=>n.value||e.eager||t.value);je(t,()=>n.value=!0);function r(){e.eager||(n.value=!1)}return{isBooted:n,hasContent:a,onAfterLeave:r}}function rm(){const t=Pr("useScopeId").vnode.scopeId;return{scopeId:t?{[t]:""}:void 0}}const MN=Symbol.for("vuetify:stack"),fp=os([]);function $je(e,t,n){const a=Pr("useStack"),r=!n,s=Tn(MN,void 0),o=os({activeChildren:new Set});La(MN,o);const i=Ht(Number(Tu(t)));go(e,()=>{const d=fp.at(-1)?.[1];i.value=d?d+10:Number(Tu(t)),r&&fp.push([a.uid,i.value]),s?.activeChildren.add(a.uid),us(()=>{if(r){const f=wn(fp).findIndex(m=>m[0]===a.uid);fp.splice(f,1)}s?.activeChildren.delete(a.uid)})});const c=Ht(!0);r&&_r(()=>{const d=fp.at(-1)?.[0]===a.uid;setTimeout(()=>c.value=d)});const A=Xe(()=>!o.activeChildren.size);return{globalTop:th(c),localTop:A,stackStyles:Xe(()=>({zIndex:i.value}))}}function Qje(e){return{teleportTarget:ne(()=>{const n=e();if(n===!0||!Ba)return;const a=n===!1?document.body:typeof n=="string"?document.querySelector(n):n;if(a==null)return;let r=[...a.children].find(s=>s.matches(".v-overlay-container"));return r||(r=document.createElement("div"),r.className="v-overlay-container",a.appendChild(r)),r})}}function Gje(){return!0}function r7(e,t,n){if(!e||s7(e,n)===!1)return!1;const a=s6(t);if(typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&a.host===e.target)return!1;const r=(typeof n.value=="object"&&n.value.include||(()=>[]))();return r.push(t),!r.some(s=>s?.contains(e.target))}function s7(e,t){return(typeof t.value=="object"&&t.value.closeConditional||Gje)(e)}function zje(e,t,n){const a=typeof n.value=="function"?n.value:n.value.handler;e.shadowTarget=e.target,t._clickOutside.lastMousedownWasOutside&&r7(e,t,n)&&setTimeout(()=>{s7(e,n)&&a&&a(e)},0)}function ON(e,t){const n=s6(e);t(document),typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&t(n)}const oB={mounted(e,t){const n=r=>zje(r,e,t),a=r=>{e._clickOutside.lastMousedownWasOutside=r7(r,e,t)};ON(e,r=>{r.addEventListener("click",n,!0),r.addEventListener("mousedown",a,!0)}),e._clickOutside||(e._clickOutside={lastMousedownWasOutside:!1}),e._clickOutside[t.instance.$.uid]={onClick:n,onMousedown:a}},beforeUnmount(e,t){e._clickOutside&&(ON(e,n=>{if(!n||!e._clickOutside?.[t.instance.$.uid])return;const{onClick:a,onMousedown:r}=e._clickOutside[t.instance.$.uid];n.removeEventListener("click",a,!0),n.removeEventListener("mousedown",r,!0)}),delete e._clickOutside[t.instance.$.uid])}};function Kje(e){const{modelValue:t,color:n,...a}=e;return l(Md,{name:"fade-transition",appear:!0},{default:()=>[e.modelValue&&h("div",Pe({class:["v-overlay__scrim",e.color.backgroundColorClasses.value],style:e.color.backgroundColorStyles.value},a),null)]})}const Og=lt({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,opacity:[Number,String],noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...Mje(),...Jt(),...Mr(),..._4(),...kje(),...Uje(),...ua(),...ru()},"VOverlay"),Nu=gt()({name:"VOverlay",directives:{vClickOutside:oB},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...Og()},emits:{"click:outside":e=>!0,"update:modelValue":e=>!0,keydown:e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,t){let{slots:n,attrs:a,emit:r}=t;const s=Pr("VOverlay"),o=V(),i=V(),c=V(),A=ln(e,"modelValue"),d=ne({get:()=>A.value,set:Y=>{Y&&e.disabled||(A.value=Y)}}),{themeClasses:f}=ka(e),{rtlClasses:m,isRtl:v}=Xr(),{hasContent:p,onAfterLeave:g}=w4(e,d),y=Fa(()=>typeof e.scrim=="string"?e.scrim:null),{globalTop:w,localTop:b,stackStyles:x}=$je(d,()=>e.zIndex,e._disableGlobalStack),{activatorEl:T,activatorRef:D,target:k,targetEl:S,targetRef:E,activatorEvents:C,contentEvents:U,scrimEvents:F}=Oje(e,{isActive:d,isTop:b,contentEl:c}),{teleportTarget:L}=Qje(()=>{const Y=e.attach||e.contained;if(Y)return Y;const W=T?.value?.getRootNode()||s.proxy?.$el?.getRootNode();return W instanceof ShadowRoot?W:!1}),{dimensionStyles:H}=Or(e),ue=a7(),{scopeId:ie}=rm();je(()=>e.disabled,Y=>{Y&&(d.value=!1)});const{contentStyles:Q,updateLocation:X}=Tje(e,{isRtl:v,contentEl:c,target:k,isActive:d});Rje(e,{root:o,contentEl:c,targetEl:S,target:k,isActive:d,updateLocation:X});function le(Y){r("click:outside",Y),e.persistent?J():d.value=!1}function Z(Y){return d.value&&w.value&&(!e.scrim||Y.target===i.value||Y instanceof MouseEvent&&Y.shadowTarget===i.value)}Ba&&je(d,Y=>{Y?window.addEventListener("keydown",re):window.removeEventListener("keydown",re)},{immediate:!0}),va(()=>{Ba&&window.removeEventListener("keydown",re)});function re(Y){Y.key==="Escape"&&w.value&&(c.value?.contains(document.activeElement)||r("keydown",Y),e.persistent?J():(d.value=!1,c.value?.contains(document.activeElement)&&T.value?.focus()))}function q(Y){Y.key==="Escape"&&!w.value||r("keydown",Y)}const P=fQ();go(()=>e.closeOnBack,()=>{BWe(P,Y=>{w.value&&d.value?(Y(!1),e.persistent?J():d.value=!1):Y()})});const G=V();je(()=>d.value&&(e.absolute||e.contained)&&L.value==null,Y=>{if(Y){const W=gk(o.value);W&&W!==document.scrollingElement&&(G.value=W.scrollTop)}});function J(){e.noClickAnimation||c.value&&zA(c.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:b0})}function M(){r("afterEnter")}function te(){g(),r("afterLeave")}return St(()=>h(Ke,null,[n.activator?.({isActive:d.value,targetRef:E,props:Pe({ref:D},C.value,e.activatorProps)}),ue.value&&p.value&&l(bZ,{disabled:!L.value,to:L.value},{default:()=>[h("div",Pe({class:["v-overlay",{"v-overlay--absolute":e.absolute||e.contained,"v-overlay--active":d.value,"v-overlay--contained":e.contained},f.value,m.value,e.class],style:[x.value,{"--v-overlay-opacity":e.opacity,top:Kt(G.value)},e.style],ref:o,onKeydown:q},ie,a),[l(Kje,Pe({color:y,modelValue:d.value&&!!e.scrim,ref:i},F.value),null),l(ho,{appear:!0,persisted:!0,transition:e.transition,target:k.value,onAfterEnter:M,onAfterLeave:te},{default:()=>[ma(h("div",Pe({ref:c,class:["v-overlay__content",e.contentClass],style:[H.value,Q.value]},U.value,e.contentProps),[n.default?.({isActive:d})]),[[ii,d.value],[oB,{handler:le,closeConditional:Z,include:()=>[T.value]}]])]})])]})])),{activatorEl:T,scrimEl:i,target:k,animateClick:J,contentEl:c,globalTop:w,localTop:b,updateLocation:X}}}),o7=lt({id:String,submenu:Boolean,disableInitialFocus:Boolean,...Ma(Og({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:jw}}),["absolute"])},"VMenu"),qv=gt()({name:"VMenu",props:o7(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=ln(e,"modelValue"),{scopeId:r}=rm(),{isRtl:s}=Xr(),o=zo(),i=Xe(()=>e.id||`v-menu-${o}`),c=V(),A=Tn(sB,null),d=Ht(new Set);La(sB,{register(){d.value.add(o)},unregister(){d.value.delete(o)},closeParents(y){setTimeout(()=>{!d.value.size&&!e.persistent&&(y==null||c.value?.contentEl&&!hte(y,c.value.contentEl))&&(a.value=!1,A?.closeParents())},40)}}),va(()=>{A?.unregister(),document.removeEventListener("focusin",f)}),J2(()=>a.value=!1);async function f(y){const w=y.relatedTarget,b=y.target;await _n(),a.value&&w!==b&&c.value?.contentEl&&c.value?.globalTop&&![document,c.value.contentEl].includes(b)&&!c.value.contentEl.contains(b)&&w0(c.value.contentEl)[0]?.focus()}je(a,y=>{y?(A?.register(),Ba&&!e.disableInitialFocus&&document.addEventListener("focusin",f,{once:!0})):(A?.unregister(),Ba&&document.removeEventListener("focusin",f))},{immediate:!0});function m(y){A?.closeParents(y)}function v(y){if(!e.disabled)if(y.key==="Tab"||y.key==="Enter"&&!e.closeOnContentClick){if(y.key==="Enter"&&(y.target instanceof HTMLTextAreaElement||y.target instanceof HTMLInputElement&&y.target.closest("form")))return;y.key==="Enter"&&y.preventDefault(),z8(w0(c.value?.contentEl,!1),y.shiftKey?"prev":"next",b=>b.tabIndex>=0)||(a.value=!1,c.value?.activatorEl?.focus())}else e.submenu&&y.key===(s.value?"ArrowRight":"ArrowLeft")&&(a.value=!1,c.value?.activatorEl?.focus())}function p(y){if(e.disabled)return;const w=c.value?.contentEl;w&&a.value?y.key==="ArrowDown"?(y.preventDefault(),y.stopImmediatePropagation(),nf(w,"next")):y.key==="ArrowUp"?(y.preventDefault(),y.stopImmediatePropagation(),nf(w,"prev")):e.submenu&&(y.key===(s.value?"ArrowRight":"ArrowLeft")?a.value=!1:y.key===(s.value?"ArrowLeft":"ArrowRight")&&(y.preventDefault(),nf(w,"first"))):(e.submenu?y.key===(s.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(y.key))&&(a.value=!0,y.preventDefault(),setTimeout(()=>setTimeout(()=>p(y))))}const g=ne(()=>Pe({"aria-haspopup":"menu","aria-expanded":String(a.value),"aria-controls":i.value,onKeydown:p},e.activatorProps));return St(()=>{const y=Nu.filterProps(e);return l(Nu,Pe({ref:c,id:i.value,class:["v-menu",e.class],style:e.style},y,{modelValue:a.value,"onUpdate:modelValue":w=>a.value=w,absolute:!0,activatorProps:g.value,location:e.location??(e.submenu?"end":"bottom"),"onClick:outside":m,onKeydown:v},r),{activator:n.activator,default:function(){for(var w=arguments.length,b=new Array(w),x=0;x<w;x++)b[x]=arguments[x];return l(Vn,{root:"VMenu"},{default:()=>[n.default?.(...b)]})}})}),Cs({id:i,openChildren:d},c)}}),Wje=lt({active:Boolean,disabled:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...Jt(),...ru({transition:{component:l4}})},"VCounter"),eb=gt()({name:"VCounter",functional:!0,props:Wje(),setup(e,t){let{slots:n}=t;const a=Xe(()=>e.max?`${e.value} / ${e.max}`:String(e.value));return St(()=>l(ho,{transition:e.transition},{default:()=>[ma(h("div",{class:ct(["v-counter",{"text-error":e.max&&!e.disabled&&parseFloat(e.value)>parseFloat(e.max)},e.class]),style:Ut(e.style)},[n.default?n.default({counter:a.value,max:e.max,value:e.value}):a.value]),[[ii,e.active]])]})),{}}}),jje=lt({floating:Boolean,...Jt()},"VFieldLabel"),Dp=gt()({name:"VFieldLabel",props:jje(),setup(e,t){let{slots:n}=t;return St(()=>l(Sh,{class:ct(["v-field-label",{"v-field-label--floating":e.floating},e.class]),style:Ut(e.style)},n)),{}}}),qje=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],Hg=lt({appendInnerIcon:cn,bgColor:String,clearable:Boolean,clearIcon:{type:cn,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,details:Boolean,dirty:Boolean,disabled:{type:Boolean,default:null},glow:Boolean,error:Boolean,flat:Boolean,iconColor:[Boolean,String],label:String,persistentClear:Boolean,prependInnerIcon:cn,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:e=>qje.includes(e)},"onClick:clear":Ds(),"onClick:appendInner":Ds(),"onClick:prependInner":Ds(),...Jt(),...Xw(),...lr(),...ua()},"VField"),Jd=gt()({name:"VField",inheritAttrs:!1,props:{id:String,...Lg(),...Hg()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:r}=t;const{themeClasses:s}=ka(e),{loaderClasses:o}=Ug(e),{focusClasses:i,isFocused:c,focus:A,blur:d}=Gc(e),{InputIcon:f}=SQ(e),{roundedClasses:m}=xr(e),{rtlClasses:v}=Xr(),p=Xe(()=>e.dirty||e.active),g=Xe(()=>!!(e.label||r.label)),y=Xe(()=>!e.singleLine&&g.value),w=zo(),b=ne(()=>e.id||`input-${w}`),x=Xe(()=>e.details?`${b.value}-messages`:void 0),T=V(),D=V(),k=V(),S=ne(()=>["plain","underlined"].includes(e.variant)),E=ne(()=>e.error||e.disabled?void 0:p.value&&c.value?e.color:e.baseColor),C=ne(()=>{if(!(!e.iconColor||e.glow&&!c.value))return e.iconColor===!0?E.value:e.iconColor}),{backgroundColorClasses:U,backgroundColorStyles:F}=Fa(()=>e.bgColor),{textColorClasses:L,textColorStyles:H}=Rs(E);je(p,Q=>{if(y.value){const X=T.value.$el,le=D.value.$el;requestAnimationFrame(()=>{const Z=mk(X),re=le.getBoundingClientRect(),q=re.x-Z.x,P=re.y-Z.y-(Z.height/2-re.height/2),G=re.width/.75,J=Math.abs(G-Z.width)>1?{maxWidth:Kt(G)}:void 0,M=getComputedStyle(X),te=getComputedStyle(le),Y=parseFloat(M.transitionDuration)*1e3||150,W=parseFloat(te.getPropertyValue("--v-field-label-scale")),ee=te.getPropertyValue("color");X.style.visibility="visible",le.style.visibility="hidden",zA(X,{transform:`translate(${q}px, ${P}px) scale(${W})`,color:ee,...J},{duration:Y,easing:b0,direction:Q?"normal":"reverse"}).finished.then(()=>{X.style.removeProperty("visibility"),le.style.removeProperty("visibility")})})}},{flush:"post"});const ue=ne(()=>({isActive:p,isFocused:c,controlRef:k,blur:d,focus:A}));function ie(Q){Q.target!==document.activeElement&&Q.preventDefault()}return St(()=>{const Q=e.variant==="outlined",X=!!(r["prepend-inner"]||e.prependInnerIcon),le=!!(e.clearable||r.clear)&&!e.disabled,Z=!!(r["append-inner"]||e.appendInnerIcon||le),re=()=>r.label?r.label({...ue.value,label:e.label,props:{for:b.value}}):e.label;return h("div",Pe({class:["v-field",{"v-field--active":p.value,"v-field--appended":Z,"v-field--center-affix":e.centerAffix??!S.value,"v-field--disabled":e.disabled,"v-field--dirty":e.dirty,"v-field--error":e.error,"v-field--glow":e.glow,"v-field--flat":e.flat,"v-field--has-background":!!e.bgColor,"v-field--persistent-clear":e.persistentClear,"v-field--prepended":X,"v-field--reverse":e.reverse,"v-field--single-line":e.singleLine,"v-field--no-label":!re(),[`v-field--variant-${e.variant}`]:!0},s.value,U.value,i.value,o.value,m.value,v.value,e.class],style:[F.value,e.style],onClick:ie},n),[h("div",{class:"v-field__overlay"},null),l(Rg,{name:"v-field",active:!!e.loading,color:e.error?"error":typeof e.loading=="string"?e.loading:e.color},{default:r.loader}),X&&h("div",{key:"prepend",class:"v-field__prepend-inner"},[e.prependInnerIcon&&l(f,{key:"prepend-icon",name:"prependInner",color:C.value},null),r["prepend-inner"]?.(ue.value)]),h("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(e.variant)&&y.value&&l(Dp,{key:"floating-label",ref:D,class:ct([L.value]),floating:!0,for:b.value,"aria-hidden":!p.value,style:Ut(H.value)},{default:()=>[re()]}),g.value&&l(Dp,{key:"label",ref:T,for:b.value},{default:()=>[re()]}),r.default?.({...ue.value,props:{id:b.value,class:"v-field__input","aria-describedby":x.value},focus:A,blur:d})??h("div",{id:b.value,class:"v-field__input","aria-describedby":x.value},null)]),le&&l(u4,{key:"clear"},{default:()=>[ma(h("div",{class:"v-field__clearable",onMousedown:q=>{q.preventDefault(),q.stopPropagation()}},[l(Vn,{defaults:{VIcon:{icon:e.clearIcon}}},{default:()=>[r.clear?r.clear({...ue.value,props:{onFocus:A,onBlur:d,onClick:e["onClick:clear"],tabindex:-1}}):l(f,{name:"clear",onFocus:A,onBlur:d,tabindex:-1},null)]})]),[[ii,e.dirty]])]}),Z&&h("div",{key:"append",class:"v-field__append-inner"},[r["append-inner"]?.(ue.value),e.appendInnerIcon&&l(f,{key:"append-icon",name:"appendInner",color:C.value},null)]),h("div",{class:ct(["v-field__outline",L.value]),style:Ut(H.value)},[Q&&h(Ke,null,[h("div",{class:"v-field__outline__start"},null),y.value&&h("div",{class:"v-field__outline__notch"},[l(Dp,{ref:D,floating:!0,for:b.value,"aria-hidden":!p.value},{default:()=>[re()]})]),h("div",{class:"v-field__outline__end"},null)]),S.value&&y.value&&l(Dp,{ref:D,floating:!0,for:b.value,"aria-hidden":!p.value},{default:()=>[re()]})])])}),{controlRef:k,fieldIconColor:C}}});function i7(e){function t(n,a){!e.autofocus||!n||a[0].target?.focus?.()}return{onIntersect:t}}const Yje=["color","file","time","date","datetime-local","week","month"],$g=lt({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...zc(),...Hg()},"VTextField"),Vc=gt()({name:"VTextField",directives:{vIntersect:Wl},inheritAttrs:!1,props:$g(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:r}=t;const s=ln(e,"modelValue"),{isFocused:o,focus:i,blur:c}=Gc(e),{onIntersect:A}=i7(e),d=ne(()=>typeof e.counterValue=="function"?e.counterValue(s.value):typeof e.counterValue=="number"?e.counterValue:(s.value??"").toString().length),f=ne(()=>{if(n.maxlength)return n.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),m=ne(()=>["plain","underlined"].includes(e.variant)),v=V(),p=V(),g=V(),y=ne(()=>Yje.includes(e.type)||e.persistentPlaceholder||o.value||e.active);function w(){o.value||i(),_n(()=>{g.value!==document.activeElement&&g.value?.focus()})}function b(k){a("mousedown:control",k),k.target!==g.value&&(w(),k.preventDefault())}function x(k){a("click:control",k)}function T(k,S){k.stopPropagation(),w(),_n(()=>{s.value=null,S(),rw(e["onClick:clear"],k)})}function D(k){const S=k.target;if(s.value=S.value,e.modelModifiers?.trim&&["text","search","password","tel","url"].includes(e.type)){const E=[S.selectionStart,S.selectionEnd];_n(()=>{S.selectionStart=E[0],S.selectionEnd=E[1]})}}return St(()=>{const k=!!(r.counter||e.counter!==!1&&e.counter!=null),S=!!(k||r.details),[E,C]=tA(n),{modelValue:U,...F}=qs.filterProps(e),L=Jd.filterProps(e);return l(qs,Pe({ref:v,modelValue:s.value,"onUpdate:modelValue":H=>s.value=H,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-input--plain-underlined":m.value},e.class],style:e.style},E,F,{centerAffix:!m.value,focused:o.value}),{...r,default:H=>{let{id:ue,isDisabled:ie,isDirty:Q,isReadonly:X,isValid:le,hasDetails:Z,reset:re}=H;return l(Jd,Pe({ref:p,onMousedown:b,onClick:x,"onClick:clear":q=>T(q,re),"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:e.role},Ma(L,["onClick:clear"]),{id:ue.value,active:y.value||Q.value,dirty:Q.value||e.dirty,disabled:ie.value,focused:o.value,details:Z.value,error:le.value===!1}),{...r,default:q=>{let{props:{class:P,...G}}=q;const J=ma(h("input",Pe({ref:g,value:s.value,onInput:D,autofocus:e.autofocus,readonly:X.value,disabled:ie.value,name:e.name,placeholder:e.placeholder,size:1,role:e.role,type:e.type,onFocus:i,onBlur:c},G,C),null),[[Wl,{handler:A},null,{once:!0}]]);return h(Ke,null,[e.prefix&&h("span",{class:"v-text-field__prefix"},[h("span",{class:"v-text-field__prefix__text"},[e.prefix])]),r.default?h("div",{class:ct(P),"data-no-activator":""},[r.default(),J]):Iu(J,{class:P}),e.suffix&&h("span",{class:"v-text-field__suffix"},[h("span",{class:"v-text-field__suffix__text"},[e.suffix])])])}})},details:S?H=>h(Ke,null,[r.details?.(H),k&&h(Ke,null,[h("span",null,null),l(eb,{active:e.persistentCounter||o.value,value:d.value,max:f.value,disabled:e.disabled},r.counter)])]):void 0})}),Cs({},v,p,g)}}),Xje=lt({renderless:Boolean,...Jt()},"VVirtualScrollItem"),l7=gt()({name:"VVirtualScrollItem",inheritAttrs:!1,props:Xje(),emits:{"update:height":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:r}=t;const{resizeRef:s,contentRect:o}=$l(void 0,"border");je(()=>o.value?.height,i=>{i!=null&&a("update:height",i)}),St(()=>e.renderless?h(Ke,null,[r.default?.({itemRef:s})]):h("div",Pe({ref:s,class:["v-virtual-scroll__item",e.class],style:e.style},n),[r.default?.()]))}}),Jje=-1,Zje=1,qC=100,u7=lt({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function c7(e,t){const n=rl(),a=Ht(0);_r(()=>{a.value=parseFloat(e.itemHeight||0)});const r=Ht(0),s=Ht(Math.ceil((parseInt(e.height)||n.height.value)/(a.value||16))||1),o=Ht(0),i=Ht(0),c=V(),A=V();let d=0;const{resizeRef:f,contentRect:m}=$l();_r(()=>{f.value=c.value});const v=ne(()=>c.value===document.documentElement?n.height.value:m.value?.height||parseInt(e.height)||0),p=ne(()=>!!(c.value&&A.value&&v.value&&a.value));let g=Array.from({length:t.value.length}),y=Array.from({length:t.value.length});const w=Ht(0);let b=-1;function x(re){return g[re]||a.value}const T=H8(()=>{const re=performance.now();y[0]=0;const q=t.value.length;for(let P=1;P<=q-1;P++)y[P]=(y[P-1]||0)+x(P-1);w.value=Math.max(w.value,performance.now()-re)},w),D=je(p,re=>{re&&(D(),d=A.value.offsetTop,T.immediate(),Q(),~b&&_n(()=>{Ba&&window.requestAnimationFrame(()=>{le(b),b=-1})}))});us(()=>{T.clear()});function k(re,q){const P=g[re],G=a.value;a.value=G?Math.min(a.value,q):q,(P!==q||G!==a.value)&&(g[re]=q,T())}function S(re){re=Ja(re,0,t.value.length-1);const q=Math.floor(re),P=re%1,G=q+1,J=y[q]||0,M=y[G]||J;return J+(M-J)*P}function E(re){return eqe(y,re)}let C=0,U=0,F=0;je(v,(re,q)=>{q&&(Q(),re<q&&requestAnimationFrame(()=>{U=0,Q()}))});let L=-1;function H(){if(!c.value||!A.value)return;const re=c.value.scrollTop,q=performance.now();q-F>500?(U=Math.sign(re-C),d=A.value.offsetTop):U=re-C,C=re,F=q,window.clearTimeout(L),L=window.setTimeout(ue,500),Q()}function ue(){!c.value||!A.value||(U=0,F=0,window.clearTimeout(L),Q())}let ie=-1;function Q(){cancelAnimationFrame(ie),ie=requestAnimationFrame(X)}function X(){if(!c.value||!v.value||!a.value)return;const re=C-d,q=Math.sign(U),P=Math.max(0,re-qC),G=Ja(E(P),0,t.value.length),J=re+v.value+qC,M=Ja(E(J)+1,G+1,t.value.length);if((q!==Jje||G<r.value)&&(q!==Zje||M>s.value)){const te=S(r.value)-S(G),Y=S(M)-S(s.value);Math.max(te,Y)>qC?(r.value=G,s.value=M):(G<=0&&(r.value=G),M>=t.value.length&&(s.value=M))}o.value=S(r.value),i.value=S(t.value.length)-S(s.value)}function le(re){const q=S(re);!c.value||re&&!q?b=re:c.value.scrollTop=q}const Z=ne(()=>t.value.slice(r.value,s.value).map((re,q)=>{const P=q+r.value;return{raw:re,index:P,key:Vr(re,e.itemKey,P)}}));return je(t,()=>{g=Array.from({length:t.value.length}),y=Array.from({length:t.value.length}),T.immediate(),Q()},{deep:1}),{calculateVisibleItems:Q,containerRef:c,markerRef:A,computedItems:Z,paddingTop:o,paddingBottom:i,scrollToIndex:le,handleScroll:H,handleScrollend:ue,handleItemResize:k}}function eqe(e,t){let n=e.length-1,a=0,r=0,s=null,o=-1;if(e[n]<t)return n;for(;a<=n;)if(r=a+n>>1,s=e[r],s>t)n=r-1;else if(s<t)o=r,a=r+1;else return s===t?r:a;return o}const tqe=lt({items:{type:Array,default:()=>[]},renderless:Boolean,...u7(),...Jt(),...Mr()},"VVirtualScroll"),tb=gt()({name:"VVirtualScroll",props:tqe(),setup(e,t){let{slots:n}=t;const a=Pr("VVirtualScroll"),{dimensionStyles:r}=Or(e),{calculateVisibleItems:s,containerRef:o,markerRef:i,handleScroll:c,handleScrollend:A,handleItemResize:d,scrollToIndex:f,paddingTop:m,paddingBottom:v,computedItems:p}=c7(e,Xe(()=>e.items));return go(()=>e.renderless,()=>{function g(){const w=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";o.value===document.documentElement?(document[w]("scroll",c,{passive:!0}),document[w]("scrollend",A)):(o.value?.[w]("scroll",c,{passive:!0}),o.value?.[w]("scrollend",A))}dn(()=>{o.value=gk(a.vnode.el,!0),g(!0)}),us(g)}),St(()=>{const g=p.value.map(y=>l(l7,{key:y.key,renderless:e.renderless,"onUpdate:height":w=>d(y.index,w)},{default:w=>n.default?.({item:y.raw,index:y.index,...w})}));return e.renderless?h(Ke,null,[h("div",{ref:i,class:"v-virtual-scroll__spacer",style:{paddingTop:Kt(m.value)}},null),g,h("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:Kt(v.value)}},null)]):h("div",{ref:o,class:ct(["v-virtual-scroll",e.class]),onScrollPassive:c,onScrollend:A,style:Ut([r.value,e.style])},[h("div",{ref:i,class:"v-virtual-scroll__container",style:{paddingTop:Kt(m.value),paddingBottom:Kt(v.value)}},[g])])}),{calculateVisibleItems:s,scrollToIndex:f}}});function b4(e,t){const n=Ht(!1);let a;function r(i){cancelAnimationFrame(a),n.value=!0,a=requestAnimationFrame(()=>{a=requestAnimationFrame(()=>{n.value=!1})})}async function s(){await new Promise(i=>requestAnimationFrame(i)),await new Promise(i=>requestAnimationFrame(i)),await new Promise(i=>requestAnimationFrame(i)),await new Promise(i=>{if(n.value){const c=je(n,()=>{c(),i()})}else i()})}async function o(i){if(i.key==="Tab"&&t.value?.focus(),!["PageDown","PageUp","Home","End"].includes(i.key))return;const c=e.value?.$el;if(!c)return;(i.key==="Home"||i.key==="End")&&c.scrollTo({top:i.key==="Home"?0:c.scrollHeight,behavior:"smooth"}),await s();const A=c.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(i.key==="PageDown"||i.key==="Home"){const d=c.getBoundingClientRect().top;for(const f of A)if(f.getBoundingClientRect().top>=d){f.focus();break}}else{const d=c.getBoundingClientRect().bottom;for(const f of[...A].reverse())if(f.getBoundingClientRect().bottom<=d){f.focus();break}}}return{onScrollPassive:r,onKeydown:o}}const x4=lt({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:cn,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,noAutoScroll:Boolean,...WQ({itemChildren:!1})},"Select"),nqe=lt({...x4(),...Ma($g({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...ru({transition:{component:jw}})},"VSelect"),C4=gt()({name:"VSelect",props:nqe(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:n}=t;const{t:a}=Oa(),r=V(),s=V(),o=V(),{items:i,transformIn:c,transformOut:A}=h4(e),d=ln(e,"modelValue",[],re=>c(re===null?[null]:gr(re)),re=>{const q=A(re);return e.multiple?q:q[0]??null}),f=ne(()=>typeof e.counterValue=="function"?e.counterValue(d.value):typeof e.counterValue=="number"?e.counterValue:d.value.length),m=Mg(e),v=ne(()=>d.value.map(re=>re.value)),p=Ht(!1);let g="",y=-1,w;const b=ne(()=>e.hideSelected?i.value.filter(re=>!d.value.some(q=>(e.valueComparator||_s)(q,re))):i.value),x=ne(()=>e.hideNoData&&!b.value.length||m.isReadonly.value||m.isDisabled.value),T=ln(e,"menu"),D=ne({get:()=>T.value,set:re=>{T.value&&!re&&s.value?.openChildren.size||re&&x.value||(T.value=re)}}),k=Xe(()=>D.value?e.closeText:e.openText),S=ne(()=>({...e.menuProps,activatorProps:{...e.menuProps?.activatorProps||{},"aria-haspopup":"listbox"}})),E=V(),C=b4(E,r);function U(re){e.openOnClear&&(D.value=!0)}function F(){x.value||(D.value=!D.value)}function L(re){Fv(re)&&H(re)}function H(re){if(!re.key||m.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(re.key)&&re.preventDefault(),["Enter","ArrowDown"," "].includes(re.key)&&(D.value=!0),["Escape","Tab"].includes(re.key)&&(D.value=!1),re.key==="Home"?E.value?.focus("first"):re.key==="End"&&E.value?.focus("last");const q=1e3;if(!Fv(re))return;const P=performance.now();P-w>q&&(g="",y=-1),g+=re.key.toLowerCase(),w=P;const G=b.value;function J(){let ee=M();return ee||g.at(-1)===g.at(-2)&&(g=g.slice(0,-1),ee=M(),ee)||(y=-1,ee=M(),ee)?ee:(g=re.key.toLowerCase(),M())}function M(){for(let ee=y+1;ee<G.length;ee++){const ae=G[ee];if(ae.title.toLowerCase().startsWith(g))return[ae,ee]}}const te=J();if(!te)return;const[Y,W]=te;y=W,E.value?.focus(W),e.multiple||(d.value=[Y])}function ue(re){let q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!re.props.disabled)if(e.multiple){const P=d.value.findIndex(J=>(e.valueComparator||_s)(J.value,re.value)),G=q??!~P;if(~P){const J=G?[...d.value,re]:[...d.value];J.splice(P,1),d.value=J}else G&&(d.value=[...d.value,re])}else{const P=q!==!1;d.value=P?[re]:[],_n(()=>{D.value=!1})}}function ie(re){E.value?.$el.contains(re.relatedTarget)||(D.value=!1)}function Q(){e.eager&&o.value?.calculateVisibleItems()}function X(){p.value&&r.value?.focus()}function le(re){p.value=!0}function Z(re){if(re==null)d.value=[];else if(Iv(r.value,":autofill")||Iv(r.value,":-webkit-autofill")){const q=i.value.find(P=>P.title===re);q&&ue(q)}else r.value&&(r.value.value="")}return je(D,()=>{if(!e.hideSelected&&D.value&&d.value.length){const re=b.value.findIndex(q=>d.value.some(P=>(e.valueComparator||_s)(P.value,q.value)));Ba&&!e.noAutoScroll&&window.requestAnimationFrame(()=>{re>=0&&o.value?.scrollToIndex(re)})}}),je(()=>e.items,(re,q)=>{D.value||p.value&&e.hideNoData&&!q.length&&re.length&&(D.value=!0)}),St(()=>{const re=!!(e.chips||n.chip),q=!!(!e.hideNoData||b.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),P=d.value.length>0,G=Vc.filterProps(e),J=P||!p.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return l(Vc,Pe({ref:r},G,{modelValue:d.value.map(M=>M.props.title).join(", "),"onUpdate:modelValue":Z,focused:p.value,"onUpdate:focused":M=>p.value=M,validationValue:d.externalValue,counterValue:f.value,dirty:P,class:["v-select",{"v-select--active-menu":D.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":d.value.length,"v-select--selection-slot":!!n.selection},e.class],style:e.style,inputmode:"none",placeholder:J,"onClick:clear":U,"onMousedown:control":F,onBlur:ie,onKeydown:H,"aria-label":a(k.value),title:a(k.value)}),{...n,default:()=>h(Ke,null,[l(qv,Pe({ref:s,modelValue:D.value,"onUpdate:modelValue":M=>D.value=M,activator:"parent",contentClass:"v-select__content",disabled:x.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:Q,onAfterLeave:X},S.value),{default:()=>[q&&l(jv,Pe({ref:E,selected:v.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:M=>M.preventDefault(),onKeydown:L,onFocusin:le,tabindex:"-1","aria-live":"polite","aria-label":`${e.label}-list`,color:e.itemColor??e.color},C,e.listProps),{default:()=>[n["prepend-item"]?.(),!b.value.length&&!e.hideNoData&&(n["no-data"]?.()??l(jl,{key:"no-data",title:a(e.noDataText)},null)),l(tb,{ref:o,renderless:!0,items:b.value,itemKey:"value"},{default:M=>{let{item:te,index:Y,itemRef:W}=M;const ee=gte(te.props),ae=Pe(te.props,{ref:W,key:te.value,onClick:()=>ue(te,null)});return te.type==="divider"?n.divider?.({props:te.raw,index:Y})??l(Ei,Pe(te.props,{key:`divider-${Y}`}),null):te.type==="subheader"?n.subheader?.({props:te.raw,index:Y})??l(Bh,Pe(te.props,{key:`subheader-${Y}`}),null):n.item?.({item:te,index:Y,props:ae})??l(jl,Pe(ae,{role:"option"}),{prepend:oe=>{let{isSelected:j}=oe;return h(Ke,null,[e.multiple&&!e.hideSelected?l(Ru,{key:te.value,modelValue:j,ripple:!1,tabindex:"-1"},null):void 0,ee.prependAvatar&&l(nl,{image:ee.prependAvatar},null),ee.prependIcon&&l(Ea,{icon:ee.prependIcon},null)])}})}}),n["append-item"]?.()]})]}),d.value.map((M,te)=>{function Y(oe){oe.stopPropagation(),oe.preventDefault(),ue(M,!1)}const W={"onClick:close":Y,onKeydown(oe){oe.key!=="Enter"&&oe.key!==" "||(oe.preventDefault(),oe.stopPropagation(),Y(oe))},onMousedown(oe){oe.preventDefault(),oe.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},ee=re?!!n.chip:!!n.selection,ae=ee?sw(re?n.chip({item:M,index:te,props:W}):n.selection({item:M,index:te})):void 0;if(!(ee&&!ae))return h("div",{key:M.value,class:"v-select__selection"},[re?n.chip?l(Vn,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:M.title}}},{default:()=>[ae]}):l(Eh,Pe({key:"chip",closable:e.closableChips,size:"small",text:M.title,disabled:M.props.disabled},W),null):ae??h("span",{class:"v-select__selection-text"},[M.title,e.multiple&&te<d.value.length-1&&h("span",{class:"v-select__selection-comma"},[O(",")])])])})]),"append-inner":function(){for(var M=arguments.length,te=new Array(M),Y=0;Y<M;Y++)te[Y]=arguments[Y];return h(Ke,null,[n["append-inner"]?.(...te),e.menuIcon?l(Ea,{class:"v-select__menu-icon",color:r.value?.fieldIconColor,icon:e.menuIcon},null):void 0])}})}),Cs({isFocused:p,menu:D,select:ue},r)}}),aqe=(e,t,n)=>{if(e==null||t==null)return-1;if(!t.length)return 0;e=e.toString().toLocaleLowerCase(),t=t.toString().toLocaleLowerCase();const a=[];let r=e.indexOf(t);for(;~r;)a.push([r,r+t.length]),r=e.indexOf(t,r+t.length);return a.length?a:-1};function YC(e,t){if(!(e==null||typeof e=="boolean"||e===-1))return typeof e=="number"?[[e,e+t.length]]:Array.isArray(e[0])?e:[e]}const kh=lt({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function rqe(e,t,n){const a=[],r=n?.default??aqe,s=n?.filterKeys?gr(n.filterKeys):!1,o=Object.keys(n?.customKeyFilter??{}).length;if(!e?.length)return a;e:for(let i=0;i<e.length;i++){const[c,A=c]=gr(e[i]),d={},f={};let m=-1;if((t||o>0)&&!n?.noFilter){let v=!1;if(typeof c=="object"){if(c.type==="divider"||c.type==="subheader")continue;const y=s||Object.keys(A);v=y.length===o;for(const w of y){const b=Vr(A,w),x=n?.customKeyFilter?.[w];if(m=x?x(b,t,c):r(b,t,c),m!==-1&&m!==!1)x?d[w]=YC(m,t):f[w]=YC(m,t);else if(n?.filterMode==="every")continue e}}else m=r(c,t,c),m!==-1&&m!==!1&&(f.title=YC(m,t));const p=Object.keys(f).length,g=Object.keys(d).length;if(!p&&!g||n?.filterMode==="union"&&g!==o&&!p||n?.filterMode==="intersection"&&(g!==o||!p&&o>0&&!v))continue}a.push({index:i,matches:{...f,...d}})}return a}function Th(e,t,n,a){const r=Ht([]),s=Ht(new Map),o=ne(()=>a?.transform?Qe(t).map(c=>[c,a.transform(c)]):Qe(t));_r(()=>{const c=typeof n=="function"?n():Qe(n),A=typeof c!="string"&&typeof c!="number"?"":String(c),d=rqe(o.value,A,{customKeyFilter:{...e.customKeyFilter,...Qe(a?.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),f=Qe(t),m=[],v=new Map;d.forEach(p=>{let{index:g,matches:y}=p;const w=f[g];m.push(w),v.set(w.value,y)}),r.value=m,s.value=v});function i(c){return s.value.get(c.value)}return{filteredItems:r,filteredMatches:s,getMatches:i}}function d7(e,t,n){return n==null||!n.length?t:n.map((a,r)=>{const s=r===0?0:n[r-1][1],o=[h("span",{class:ct(`${e}__unmask`)},[t.slice(s,a[0])]),h("span",{class:ct(`${e}__mask`)},[t.slice(a[0],a[1])])];return r===n.length-1&&o.push(h("span",{class:ct(`${e}__unmask`)},[t.slice(a[1])])),h(Ke,null,[o])})}const sqe=lt({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...kh({filterKeys:["title"]}),...x4(),...Ma($g({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...ru({transition:!1})},"VAutocomplete"),oqe=gt()({name:"VAutocomplete",props:sqe(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:n}=t;const{t:a}=Oa(),r=V(),s=Ht(!1),o=Ht(!0),i=Ht(!1),c=V(),A=V(),d=Ht(-1),{items:f,transformIn:m,transformOut:v}=h4(e),{textColorClasses:p,textColorStyles:g}=Rs(()=>r.value?.color),y=ln(e,"search",""),w=ln(e,"modelValue",[],ae=>m(ae===null?[null]:gr(ae)),ae=>{const oe=v(ae);return e.multiple?oe:oe[0]??null}),b=ne(()=>typeof e.counterValue=="function"?e.counterValue(w.value):typeof e.counterValue=="number"?e.counterValue:w.value.length),x=Mg(e),{filteredItems:T,getMatches:D}=Th(e,f,()=>o.value?"":y.value),k=ne(()=>e.hideSelected?T.value.filter(ae=>!w.value.some(oe=>oe.value===ae.value)):T.value),S=ne(()=>!!(e.chips||n.chip)),E=ne(()=>S.value||!!n.selection),C=ne(()=>w.value.map(ae=>ae.props.value)),U=ne(()=>(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&y.value===k.value[0]?.title)&&k.value.length>0&&!o.value&&!i.value),F=ne(()=>e.hideNoData&&!k.value.length||x.isReadonly.value||x.isDisabled.value),L=ln(e,"menu"),H=ne({get:()=>L.value,set:ae=>{L.value&&!ae&&c.value?.openChildren.size||ae&&F.value||(L.value=ae)}}),ue=ne(()=>H.value?e.closeText:e.openText),ie=V(),Q=b4(ie,r);function X(ae){e.openOnClear&&(H.value=!0),y.value=""}function le(){F.value||(H.value=!0)}function Z(ae){F.value||(s.value&&(ae.preventDefault(),ae.stopPropagation()),H.value=!H.value)}function re(ae){(Fv(ae)||ae.key==="Backspace")&&r.value?.focus()}function q(ae){if(x.isReadonly.value)return;const oe=r.value?.selectionStart,j=w.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(ae.key)&&ae.preventDefault(),["Enter","ArrowDown"].includes(ae.key)&&(H.value=!0),["Escape"].includes(ae.key)&&(H.value=!1),U.value&&["Enter","Tab"].includes(ae.key)&&!w.value.some(ce=>{let{value:de}=ce;return de===k.value[0].value})&&ee(k.value[0]),ae.key==="ArrowDown"&&U.value&&ie.value?.focus("next"),["Backspace","Delete"].includes(ae.key)){if(!e.multiple&&E.value&&w.value.length>0&&!y.value)return ee(w.value[0],!1);if(~d.value){ae.preventDefault();const ce=d.value;ee(w.value[d.value],!1),d.value=ce>=j-1?j-2:ce}else ae.key==="Backspace"&&!y.value&&(d.value=j-1);return}if(e.multiple)if(ae.key==="ArrowLeft"){if(d.value<0&&oe&&oe>0)return;const ce=d.value>-1?d.value-1:j-1;if(w.value[ce])d.value=ce;else{const de=y.value?.length??null;d.value=-1,r.value?.setSelectionRange(de,de)}}else if(ae.key==="ArrowRight"){if(d.value<0)return;const ce=d.value+1;w.value[ce]?d.value=ce:(d.value=-1,r.value?.setSelectionRange(0,0))}else~d.value&&Fv(ae)&&(d.value=-1)}function P(ae){if(Iv(r.value,":autofill")||Iv(r.value,":-webkit-autofill")){const oe=f.value.find(j=>j.title===ae.target.value);oe&&ee(oe)}}function G(){e.eager&&A.value?.calculateVisibleItems()}function J(){s.value&&(o.value=!0,r.value?.focus())}function M(ae){s.value=!0,setTimeout(()=>{i.value=!0})}function te(ae){i.value=!1}function Y(ae){(ae==null||ae===""&&!e.multiple&&!E.value)&&(w.value=[])}const W=Ht(!1);function ee(ae){let oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!ae||ae.props.disabled))if(e.multiple){const j=w.value.findIndex(de=>(e.valueComparator||_s)(de.value,ae.value)),ce=oe??!~j;if(~j){const de=ce?[...w.value,ae]:[...w.value];de.splice(j,1),w.value=de}else ce&&(w.value=[...w.value,ae]);e.clearOnSelect&&(y.value="")}else{const j=oe!==!1;w.value=j?[ae]:[],y.value=j&&!E.value?ae.title:"",_n(()=>{H.value=!1,o.value=!0})}}return je(s,(ae,oe)=>{ae!==oe&&(ae?(W.value=!0,y.value=e.multiple||E.value?"":String(w.value.at(-1)?.props.title??""),o.value=!0,_n(()=>W.value=!1)):(!e.multiple&&y.value==null&&(w.value=[]),H.value=!1,(e.multiple||E.value)&&(y.value=""),d.value=-1))}),je(y,ae=>{!s.value||W.value||(ae&&(H.value=!0),o.value=!ae)}),je(H,()=>{if(!e.hideSelected&&H.value&&w.value.length){const ae=k.value.findIndex(oe=>w.value.some(j=>oe.value===j.value));Ba&&window.requestAnimationFrame(()=>{ae>=0&&A.value?.scrollToIndex(ae)})}}),je(()=>e.items,(ae,oe)=>{H.value||s.value&&!oe.length&&ae.length&&(H.value=!0)}),St(()=>{const ae=!!(!e.hideNoData||k.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),oe=w.value.length>0,j=Vc.filterProps(e);return l(Vc,Pe({ref:r},j,{modelValue:y.value,"onUpdate:modelValue":[ce=>y.value=ce,Y],focused:s.value,"onUpdate:focused":ce=>s.value=ce,validationValue:w.externalValue,counterValue:b.value,dirty:oe,onChange:P,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":H.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!E.value,"v-autocomplete--selecting-index":d.value>-1},e.class],style:e.style,readonly:x.isReadonly.value,placeholder:oe?void 0:e.placeholder,"onClick:clear":X,"onMousedown:control":le,onKeydown:q}),{...n,default:()=>h(Ke,null,[l(qv,Pe({ref:c,modelValue:H.value,"onUpdate:modelValue":ce=>H.value=ce,activator:"parent",contentClass:"v-autocomplete__content",disabled:F.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:G,onAfterLeave:J},e.menuProps),{default:()=>[ae&&l(jv,Pe({ref:ie,filterable:!0,selected:C.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:ce=>ce.preventDefault(),onKeydown:re,onFocusin:M,onFocusout:te,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},Q,e.listProps),{default:()=>[n["prepend-item"]?.(),!k.value.length&&!e.hideNoData&&(n["no-data"]?.()??l(jl,{key:"no-data",title:a(e.noDataText)},null)),l(tb,{ref:A,renderless:!0,items:k.value,itemKey:"value"},{default:ce=>{let{item:de,index:_e,itemRef:Re}=ce;const be=Pe(de.props,{ref:Re,key:de.value,active:U.value&&_e===0?!0:void 0,onClick:()=>ee(de,null)});return de.type==="divider"?n.divider?.({props:de.raw,index:_e})??l(Ei,Pe(de.props,{key:`divider-${_e}`}),null):de.type==="subheader"?n.subheader?.({props:de.raw,index:_e})??l(Bh,Pe(de.props,{key:`subheader-${_e}`}),null):n.item?.({item:de,index:_e,props:be})??l(jl,Pe(be,{role:"option"}),{prepend:Ee=>{let{isSelected:Ce}=Ee;return h(Ke,null,[e.multiple&&!e.hideSelected?l(Ru,{key:de.value,modelValue:Ce,ripple:!1,tabindex:"-1"},null):void 0,de.props.prependAvatar&&l(nl,{image:de.props.prependAvatar},null),de.props.prependIcon&&l(Ea,{icon:de.props.prependIcon},null)])},title:()=>o.value?de.title:d7("v-autocomplete",de.title,D(de)?.title)})}}),n["append-item"]?.()]})]}),w.value.map((ce,de)=>{function _e(Ce){Ce.stopPropagation(),Ce.preventDefault(),ee(ce,!1)}const Re={"onClick:close":_e,onKeydown(Ce){Ce.key!=="Enter"&&Ce.key!==" "||(Ce.preventDefault(),Ce.stopPropagation(),_e(Ce))},onMousedown(Ce){Ce.preventDefault(),Ce.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},be=S.value?!!n.chip:!!n.selection,Ee=be?sw(S.value?n.chip({item:ce,index:de,props:Re}):n.selection({item:ce,index:de})):void 0;if(!(be&&!Ee))return h("div",{key:ce.value,class:ct(["v-autocomplete__selection",de===d.value&&["v-autocomplete__selection--selected",p.value]]),style:Ut(de===d.value?g.value:{})},[S.value?n.chip?l(Vn,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:ce.title}}},{default:()=>[Ee]}):l(Eh,Pe({key:"chip",closable:e.closableChips,size:"small",text:ce.title,disabled:ce.props.disabled},Re),null):Ee??h("span",{class:"v-autocomplete__selection-text"},[ce.title,e.multiple&&de<w.value.length-1&&h("span",{class:"v-autocomplete__selection-comma"},[O(",")])])])})]),"append-inner":function(){for(var ce=arguments.length,de=new Array(ce),_e=0;_e<ce;_e++)de[_e]=arguments[_e];return h(Ke,null,[n["append-inner"]?.(...de),e.menuIcon?l(Ea,{class:"v-autocomplete__menu-icon",color:r.value?.fieldIconColor,icon:e.menuIcon,onMousedown:Z,onClick:K8,"aria-label":a(ue.value),title:a(ue.value),tabindex:"-1"},null):void 0])}})}),Cs({isFocused:s,isPristine:o,menu:H,search:y,filteredItems:T,select:ee},r)}}),iqe=lt({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:cn,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...Jt(),...Qc({location:"top end"}),...lr(),...Nn(),...ua(),...ru({transition:"scale-rotate-transition"}),...Mr()},"VBadge"),lqe=gt()({name:"VBadge",inheritAttrs:!1,props:iqe(),setup(e,t){const{backgroundColorClasses:n,backgroundColorStyles:a}=Fa(()=>e.color),{roundedClasses:r}=xr(e),{t:s}=Oa(),{textColorClasses:o,textColorStyles:i}=Rs(()=>e.textColor),{themeClasses:c}=Ck(),{locationStyles:A}=am(e,!0,f=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(f)?Number(e.offsetY??0):["left","right"].includes(f)?Number(e.offsetX??0):0)),{dimensionStyles:d}=Or(e);return St(()=>{const f=Number(e.content),m=!e.max||isNaN(f)?e.content:f<=Number(e.max)?f:`${e.max}+`,[v,p]=xS(t.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return l(e.tag,Pe({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},p,{style:e.style}),{default:()=>[h("div",{class:"v-badge__wrapper"},[t.slots.default?.(),l(ho,{transition:e.transition},{default:()=>[ma(h("span",Pe({class:["v-badge__badge",c.value,n.value,r.value,o.value],style:[a.value,i.value,d.value,e.inline?{}:A.value],"aria-atomic":"true","aria-label":s(e.label,f),"aria-live":"polite",role:"status"},v),[e.dot?void 0:t.slots.badge?t.slots.badge?.():e.icon?l(Ea,{icon:e.icon},null):m]),[[ii,e.modelValue]])]})])]})}),{}}}),uqe=lt({color:String,density:String,...Jt()},"VBannerActions"),A7=gt()({name:"VBannerActions",props:uqe(),setup(e,t){let{slots:n}=t;return wr({VBtn:{color:e.color,density:e.density,slim:!0,variant:"text"}}),St(()=>h("div",{class:ct(["v-banner-actions",e.class]),style:Ut(e.style)},[n.default?.()])),{}}}),f7=Oc("v-banner-text"),cqe=lt({avatar:String,bgColor:String,color:String,icon:cn,lines:String,stacked:Boolean,sticky:Boolean,text:String,...Ko(),...Jt(),...cs(),...Mr(),...Of({mobile:null}),...Jr(),...Qc(),...xh(),...lr(),...Nn(),...ua()},"VBanner"),dqe=gt()({name:"VBanner",props:cqe(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:a,backgroundColorStyles:r}=Fa(()=>e.bgColor),{borderClasses:s}=ci(e),{densityClasses:o}=So(e),{displayClasses:i,mobile:c}=rl(e),{dimensionStyles:A}=Or(e),{elevationClasses:d}=xs(e),{locationStyles:f}=am(e),{positionClasses:m}=Ch(e),{roundedClasses:v}=xr(e),{themeClasses:p}=ka(e),g=Xe(()=>e.color),y=Xe(()=>e.density);wr({VBannerActions:{color:g,density:y}}),St(()=>{const w=!!(e.text||n.text),b=!!(e.avatar||e.icon),x=!!(b||n.prepend);return l(e.tag,{class:ct(["v-banner",{"v-banner--stacked":e.stacked||c.value,"v-banner--sticky":e.sticky,[`v-banner--${e.lines}-line`]:!!e.lines},p.value,a.value,s.value,o.value,i.value,d.value,m.value,v.value,e.class]),style:Ut([r.value,A.value,f.value,e.style]),role:"banner"},{default:()=>[x&&h("div",{key:"prepend",class:"v-banner__prepend"},[n.prepend?l(Vn,{key:"prepend-defaults",disabled:!b,defaults:{VAvatar:{color:g.value,density:y.value,icon:e.icon,image:e.avatar}}},n.prepend):l(nl,{key:"prepend-avatar",color:g.value,density:y.value,icon:e.icon,image:e.avatar},null)]),h("div",{class:"v-banner__content"},[w&&l(f7,{key:"text"},{default:()=>[n.text?.()??e.text]}),n.default?.()]),n.actions&&l(A7,{key:"actions"},n.actions)]})})}}),Aqe=lt({baseColor:String,bgColor:String,color:String,grow:Boolean,mode:{type:String,validator:e=>!e||["horizontal","shift"].includes(e)},height:{type:[Number,String],default:56},active:{type:Boolean,default:!0},...Ko(),...Jt(),...cs(),...Jr(),...lr(),...Hf({name:"bottom-navigation"}),...Nn({tag:"header"}),...em({selectedClass:"v-btn--selected"}),...ua()},"VBottomNavigation"),fqe=gt()({name:"VBottomNavigation",props:Aqe(),emits:{"update:active":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:a}=Ck(),{borderClasses:r}=ci(e),{backgroundColorClasses:s,backgroundColorStyles:o}=Fa(()=>e.bgColor),{densityClasses:i}=So(e),{elevationClasses:c}=xs(e),{roundedClasses:A}=xr(e),{ssrBootStyles:d}=Jf(),f=ne(()=>Number(e.height)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0)),m=ln(e,"active",e.active),{layoutItemStyles:v}=$f({id:e.name,order:ne(()=>parseInt(e.order,10)),position:Xe(()=>"bottom"),layoutSize:Xe(()=>m.value?f.value:0),elementSize:f,active:m,absolute:Xe(()=>e.absolute)});return oA(e,d4),wr({VBtn:{baseColor:Xe(()=>e.baseColor),color:Xe(()=>e.color),density:Xe(()=>e.density),stacked:Xe(()=>e.mode!=="horizontal"),variant:"text"}},{scoped:!0}),St(()=>l(e.tag,{class:ct(["v-bottom-navigation",{"v-bottom-navigation--active":m.value,"v-bottom-navigation--grow":e.grow,"v-bottom-navigation--shift":e.mode==="shift"},a.value,s.value,r.value,i.value,c.value,A.value,e.class]),style:Ut([o.value,v.value,{height:Kt(f.value)},d.value,e.style])},{default:()=>[n.default&&h("div",{class:"v-bottom-navigation__content"},[n.default()])]})),{}}}),m7=lt({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...Og({origin:"center center",scrollStrategy:"block",transition:{component:jw},zIndex:2400})},"VDialog"),iB=gt()({name:"VDialog",props:m7(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,t){let{emit:n,slots:a}=t;const r=ln(e,"modelValue"),{scopeId:s}=rm(),o=V();function i(d){const f=d.relatedTarget,m=d.target;if(f!==m&&o.value?.contentEl&&o.value?.globalTop&&![document,o.value.contentEl].includes(m)&&!o.value.contentEl.contains(m)){const v=w0(o.value.contentEl);if(!v.length)return;const p=v[0],g=v[v.length-1];f===p?g.focus():p.focus()}}va(()=>{document.removeEventListener("focusin",i)}),Ba&&je(()=>r.value&&e.retainFocus,d=>{d?document.addEventListener("focusin",i):document.removeEventListener("focusin",i)},{immediate:!0});function c(){n("afterEnter"),(e.scrim||e.retainFocus)&&o.value?.contentEl&&!o.value.contentEl.contains(document.activeElement)&&o.value.contentEl.focus({preventScroll:!0})}function A(){n("afterLeave")}return je(r,async d=>{d||(await _n(),o.value.activatorEl?.focus({preventScroll:!0}))}),St(()=>{const d=Nu.filterProps(e),f=Pe({"aria-haspopup":"dialog"},e.activatorProps),m=Pe({tabindex:-1},e.contentProps);return l(Nu,Pe({ref:o,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},d,{modelValue:r.value,"onUpdate:modelValue":v=>r.value=v,"aria-modal":"true",activatorProps:f,contentProps:m,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:c,onAfterLeave:A},s),{activator:a.activator,default:function(){for(var v=arguments.length,p=new Array(v),g=0;g<v;g++)p[g]=arguments[g];return l(Vn,{root:"VDialog"},{default:()=>[a.default?.(...p)]})}})}),Cs({},o)}}),mqe=lt({inset:Boolean,...m7({transition:"bottom-sheet-transition"})},"VBottomSheet"),vqe=gt()({name:"VBottomSheet",props:mqe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=ln(e,"modelValue");return St(()=>{const r=iB.filterProps(e);return l(iB,Pe(r,{contentClass:["v-bottom-sheet__content",e.contentClass],modelValue:a.value,"onUpdate:modelValue":s=>a.value=s,class:["v-bottom-sheet",{"v-bottom-sheet--inset":e.inset},e.class],style:e.style}),n)}),{}}}),hqe=lt({divider:[Number,String],...Jt()},"VBreadcrumbsDivider"),v7=gt()({name:"VBreadcrumbsDivider",props:hqe(),setup(e,t){let{slots:n}=t;return St(()=>h("li",{"aria-hidden":"true",class:ct(["v-breadcrumbs-divider",e.class]),style:Ut(e.style)},[n?.default?.()??e.divider])),{}}}),pqe=lt({active:Boolean,activeClass:String,activeColor:String,color:String,disabled:Boolean,title:String,...Jt(),...Vg(),...Nn({tag:"li"})},"VBreadcrumbsItem"),h7=gt()({name:"VBreadcrumbsItem",props:pqe(),setup(e,t){let{slots:n,attrs:a}=t;const r=Ng(e,a),s=ne(()=>e.active||r.isActive?.value),{textColorClasses:o,textColorStyles:i}=Rs(()=>s.value?e.activeColor:e.color);return St(()=>l(e.tag,{class:ct(["v-breadcrumbs-item",{"v-breadcrumbs-item--active":s.value,"v-breadcrumbs-item--disabled":e.disabled,[`${e.activeClass}`]:s.value&&e.activeClass},o.value,e.class]),style:Ut([i.value,e.style]),"aria-current":s.value?"page":void 0},{default:()=>[r.isLink.value?h("a",Pe({class:"v-breadcrumbs-item--link",onClick:r.navigate},r.linkProps),[n.default?.()??e.title]):n.default?.()??e.title]})),{}}}),gqe=lt({activeClass:String,activeColor:String,bgColor:String,color:String,disabled:Boolean,divider:{type:String,default:"/"},icon:cn,items:{type:Array,default:()=>[]},...Jt(),...cs(),...lr(),...Nn({tag:"ul"})},"VBreadcrumbs"),yqe=gt()({name:"VBreadcrumbs",props:gqe(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:a,backgroundColorStyles:r}=Fa(()=>e.bgColor),{densityClasses:s}=So(e),{roundedClasses:o}=xr(e);wr({VBreadcrumbsDivider:{divider:Xe(()=>e.divider)},VBreadcrumbsItem:{activeClass:Xe(()=>e.activeClass),activeColor:Xe(()=>e.activeColor),color:Xe(()=>e.color),disabled:Xe(()=>e.disabled)}});const i=ne(()=>e.items.map(c=>typeof c=="string"?{item:{title:c},raw:c}:{item:c,raw:c}));return St(()=>{const c=!!(n.prepend||e.icon);return l(e.tag,{class:ct(["v-breadcrumbs",a.value,s.value,o.value,e.class]),style:Ut([r.value,e.style])},{default:()=>[c&&h("li",{key:"prepend",class:"v-breadcrumbs__prepend"},[n.prepend?l(Vn,{key:"prepend-defaults",disabled:!e.icon,defaults:{VIcon:{icon:e.icon,start:!0}}},n.prepend):l(Ea,{key:"prepend-icon",start:!0,icon:e.icon},null)]),i.value.map((A,d,f)=>{let{item:m,raw:v}=A;return h(Ke,null,[n.item?.({item:m,index:d})??l(h7,Pe({key:d,disabled:d>=f.length-1},typeof m=="string"?{title:m}:m),{default:n.title?()=>n.title?.({item:m,index:d}):void 0}),d<f.length-1&&l(v7,null,{default:n.divider?()=>n.divider?.({item:v,index:d}):void 0})])}),n.default?.()]})}),{}}}),p7=gt()({name:"VCardActions",props:Jt(),setup(e,t){let{slots:n}=t;return wr({VBtn:{slim:!0,variant:"text"}}),St(()=>h("div",{class:ct(["v-card-actions",e.class]),style:Ut(e.style)},[n.default?.()])),{}}}),_qe=lt({opacity:[Number,String],...Jt(),...Nn()},"VCardSubtitle"),g7=gt()({name:"VCardSubtitle",props:_qe(),setup(e,t){let{slots:n}=t;return St(()=>l(e.tag,{class:ct(["v-card-subtitle",e.class]),style:Ut([{"--v-card-subtitle-opacity":e.opacity},e.style])},n)),{}}}),y7=Oc("v-card-title"),wqe=lt({appendAvatar:String,appendIcon:cn,prependAvatar:String,prependIcon:cn,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...Jt(),...cs()},"VCardItem"),_7=gt()({name:"VCardItem",props:wqe(),setup(e,t){let{slots:n}=t;return St(()=>{const a=!!(e.prependAvatar||e.prependIcon),r=!!(a||n.prepend),s=!!(e.appendAvatar||e.appendIcon),o=!!(s||n.append),i=!!(e.title!=null||n.title),c=!!(e.subtitle!=null||n.subtitle);return h("div",{class:ct(["v-card-item",e.class]),style:Ut(e.style)},[r&&h("div",{key:"prepend",class:"v-card-item__prepend"},[n.prepend?l(Vn,{key:"prepend-defaults",disabled:!a,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon}}},n.prepend):h(Ke,null,[e.prependAvatar&&l(nl,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&l(Ea,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])]),h("div",{class:"v-card-item__content"},[i&&l(y7,{key:"title"},{default:()=>[n.title?.()??K(e.title)]}),c&&l(g7,{key:"subtitle"},{default:()=>[n.subtitle?.()??K(e.subtitle)]}),n.default?.()]),o&&h("div",{key:"append",class:"v-card-item__append"},[n.append?l(Vn,{key:"append-defaults",disabled:!s,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon}}},n.append):h(Ke,null,[e.appendIcon&&l(Ea,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&l(nl,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)])])])}),{}}}),bqe=lt({opacity:[Number,String],...Jt(),...Nn()},"VCardText"),w7=gt()({name:"VCardText",props:bqe(),setup(e,t){let{slots:n}=t;return St(()=>l(e.tag,{class:ct(["v-card-text",e.class]),style:Ut([{"--v-card-text-opacity":e.opacity},e.style])},n)),{}}}),xqe=lt({appendAvatar:String,appendIcon:cn,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:cn,ripple:{type:[Boolean,Object],default:!0},subtitle:{type:[String,Number,Boolean],default:void 0},text:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...Ko(),...Jt(),...cs(),...Mr(),...Jr(),...Xw(),...Qc(),...xh(),...lr(),...Vg(),...Nn(),...ua(),...il({variant:"elevated"})},"VCard"),Cqe=gt()({name:"VCard",directives:{vRipple:xo},props:xqe(),setup(e,t){let{attrs:n,slots:a}=t;const{themeClasses:r}=ka(e),{borderClasses:s}=ci(e),{colorClasses:o,colorStyles:i,variantClasses:c}=Zf(e),{densityClasses:A}=So(e),{dimensionStyles:d}=Or(e),{elevationClasses:f}=xs(e),{loaderClasses:m}=Ug(e),{locationStyles:v}=am(e),{positionClasses:p}=Ch(e),{roundedClasses:g}=xr(e),y=Ng(e,n);return St(()=>{const w=e.link!==!1&&y.isLink.value,b=!e.disabled&&e.link!==!1&&(e.link||y.isClickable.value),x=w?"a":e.tag,T=!!(a.title||e.title!=null),D=!!(a.subtitle||e.subtitle!=null),k=T||D,S=!!(a.append||e.appendAvatar||e.appendIcon),E=!!(a.prepend||e.prependAvatar||e.prependIcon),C=!!(a.image||e.image),U=k||E||S,F=!!(a.text||e.text!=null);return ma(l(x,Pe({class:["v-card",{"v-card--disabled":e.disabled,"v-card--flat":e.flat,"v-card--hover":e.hover&&!(e.disabled||e.flat),"v-card--link":b},r.value,s.value,o.value,A.value,f.value,m.value,p.value,g.value,c.value,e.class],style:[i.value,d.value,v.value,e.style],onClick:b&&y.navigate,tabindex:e.disabled?-1:void 0},y.linkProps),{default:()=>[C&&h("div",{key:"image",class:"v-card__image"},[a.image?l(Vn,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},a.image):l(Nc,{key:"image-img",cover:!0,src:e.image},null)]),l(Rg,{name:"v-card",active:!!e.loading,color:typeof e.loading=="boolean"?void 0:e.loading},{default:a.loader}),U&&l(_7,{key:"item",prependAvatar:e.prependAvatar,prependIcon:e.prependIcon,title:e.title,subtitle:e.subtitle,appendAvatar:e.appendAvatar,appendIcon:e.appendIcon},{default:a.item,prepend:a.prepend,title:a.title,subtitle:a.subtitle,append:a.append}),F&&l(w7,{key:"text"},{default:()=>[a.text?.()??e.text]}),a.default?.(),a.actions&&l(p7,null,{default:a.actions}),sA(b,"v-card")]}),[[xo,b&&e.ripple]])}),{}}}),Sqe=e=>{const{touchstartX:t,touchendX:n,touchstartY:a,touchendY:r}=e,s=.5,o=16;e.offsetX=n-t,e.offsetY=r-a,Math.abs(e.offsetY)<s*Math.abs(e.offsetX)&&(e.left&&n<t-o&&e.left(e),e.right&&n>t+o&&e.right(e)),Math.abs(e.offsetX)<s*Math.abs(e.offsetY)&&(e.up&&r<a-o&&e.up(e),e.down&&r>a+o&&e.down(e))};function Eqe(e,t){const n=e.changedTouches[0];t.touchstartX=n.clientX,t.touchstartY=n.clientY,t.start?.({originalEvent:e,...t})}function Bqe(e,t){const n=e.changedTouches[0];t.touchendX=n.clientX,t.touchendY=n.clientY,t.end?.({originalEvent:e,...t}),Sqe(t)}function kqe(e,t){const n=e.changedTouches[0];t.touchmoveX=n.clientX,t.touchmoveY=n.clientY,t.move?.({originalEvent:e,...t})}function Tqe(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:n=>Eqe(n,t),touchend:n=>Bqe(n,t),touchmove:n=>kqe(n,t)}}function Iqe(e,t){const n=t.value,a=n?.parent?e.parentElement:e,r=n?.options??{passive:!0},s=t.instance?.$.uid;if(!a||s===void 0)return;const o=Tqe(t.value);a._touchHandlers=a._touchHandlers??Object.create(null),a._touchHandlers[s]=o,M8(o).forEach(i=>{a.addEventListener(i,o[i],r)})}function Fqe(e,t){const n=t.value?.parent?e.parentElement:e,a=t.instance?.$.uid;if(!n?._touchHandlers||a===void 0)return;const r=n._touchHandlers[a];M8(r).forEach(s=>{n.removeEventListener(s,r[s])}),delete n._touchHandlers[a]}const I2={mounted:Iqe,unmounted:Fqe},b7=Symbol.for("vuetify:v-window"),x7=Symbol.for("vuetify:v-window-group"),nb=lt({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||e==="hover"},verticalArrows:[Boolean,String],touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...Jt(),...Nn(),...ua()},"VWindow"),kf=gt()({name:"VWindow",directives:{vTouch:I2},props:nb(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:a}=ka(e),{isRtl:r}=Xr(),{t:s}=Oa(),o=oA(e,x7),i=V(),c=ne(()=>r.value?!e.reverse:e.reverse),A=Ht(!1),d=ne(()=>{const T=e.direction==="vertical"?"y":"x",k=(c.value?!A.value:A.value)?"-reverse":"";return`v-window-${T}${k}-transition`}),f=Ht(0),m=V(void 0),v=ne(()=>o.items.value.findIndex(T=>o.selected.value.includes(T.id)));je(v,(T,D)=>{const k=o.items.value.length,S=k-1;k<=2?A.value=T<D:T===S&&D===0?A.value=!0:T===0&&D===S?A.value=!1:A.value=T<D}),La(b7,{transition:d,isReversed:A,transitionCount:f,transitionHeight:m,rootRef:i});const p=Xe(()=>e.continuous||v.value!==0),g=Xe(()=>e.continuous||v.value!==o.items.value.length-1);function y(){p.value&&o.prev()}function w(){g.value&&o.next()}const b=ne(()=>{const T=[],D={icon:r.value?e.nextIcon:e.prevIcon,class:`v-window__${c.value?"right":"left"}`,onClick:o.prev,"aria-label":s("$vuetify.carousel.prev")};T.push(p.value?n.prev?n.prev({props:D}):l(Jn,D,null):h("div",null,null));const k={icon:r.value?e.prevIcon:e.nextIcon,class:`v-window__${c.value?"left":"right"}`,onClick:o.next,"aria-label":s("$vuetify.carousel.next")};return T.push(g.value?n.next?n.next({props:k}):l(Jn,k,null):h("div",null,null)),T}),x=ne(()=>e.touch===!1?e.touch:{...{left:()=>{c.value?y():w()},right:()=>{c.value?w():y()},start:D=>{let{originalEvent:k}=D;k.stopPropagation()}},...e.touch===!0?{}:e.touch});return St(()=>ma(l(e.tag,{ref:i,class:ct(["v-window",{"v-window--show-arrows-on-hover":e.showArrows==="hover","v-window--vertical-arrows":!!e.verticalArrows},a.value,e.class]),style:Ut(e.style)},{default:()=>[h("div",{class:"v-window__container",style:{height:m.value}},[n.default?.({group:o}),e.showArrows!==!1&&h("div",{class:ct(["v-window__controls",{"v-window__controls--left":e.verticalArrows==="left"||e.verticalArrows===!0},{"v-window__controls--right":e.verticalArrows==="right"}])},[b.value])]),n.additional?.({group:o})]}),[[I2,x.value]])),{group:o}}}),Pqe=lt({color:String,cycle:Boolean,delimiterIcon:{type:cn,default:"$delimiter"},height:{type:[Number,String],default:500},hideDelimiters:Boolean,hideDelimiterBackground:Boolean,interval:{type:[Number,String],default:6e3,validator:e=>Number(e)>0},progress:[Boolean,String],verticalDelimiters:[Boolean,String],...nb({continuous:!0,mandatory:"force",showArrows:!0})},"VCarousel"),Dqe=gt()({name:"VCarousel",props:Pqe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=ln(e,"modelValue"),{t:r}=Oa(),s=V();let o=-1;je(a,c),je(()=>e.interval,c),je(()=>e.cycle,A=>{A?c():window.clearTimeout(o)}),dn(i);function i(){!e.cycle||!s.value||(o=window.setTimeout(s.value.group.next,Number(e.interval)>0?Number(e.interval):6e3))}function c(){window.clearTimeout(o),window.requestAnimationFrame(i)}return St(()=>{const A=kf.filterProps(e);return l(kf,Pe({ref:s},A,{modelValue:a.value,"onUpdate:modelValue":d=>a.value=d,class:["v-carousel",{"v-carousel--hide-delimiter-background":e.hideDelimiterBackground,"v-carousel--vertical-delimiters":e.verticalDelimiters},e.class],style:[{height:Kt(e.height)},e.style]}),{default:n.default,additional:d=>{let{group:f}=d;return h(Ke,null,[!e.hideDelimiters&&h("div",{class:"v-carousel__controls",style:{left:e.verticalDelimiters==="left"&&e.verticalDelimiters?0:"auto",right:e.verticalDelimiters==="right"?0:"auto"}},[f.items.value.length>0&&l(Vn,{defaults:{VBtn:{color:e.color,icon:e.delimiterIcon,size:"x-small",variant:"text"}},scoped:!0},{default:()=>[f.items.value.map((m,v)=>{const p={id:`carousel-item-${m.id}`,"aria-label":r("$vuetify.carousel.ariaLabel.delimiter",v+1,f.items.value.length),class:["v-carousel__controls__item",f.isSelected(m.id)&&"v-btn--active"],onClick:()=>f.select(m.id,!0)};return n.item?n.item({props:p,item:m}):l(Jn,Pe(m,p),null)})]})]),e.progress&&l(Yw,{absolute:!0,class:"v-carousel__progress",color:typeof e.progress=="string"?e.progress:void 0,modelValue:(f.getItemIndex(a.value)+1)/f.items.value.length*100},null)])},prev:n.prev,next:n.next})}),{}}}),ab=lt({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...Jt(),...tm(),..._4()},"VWindowItem"),Tf=gt()({name:"VWindowItem",directives:{vTouch:I2},props:ab(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const a=Tn(b7),r=nm(e,x7),{isBooted:s}=Jf();if(!a||!r)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const o=Ht(!1),i=ne(()=>s.value&&(a.isReversed.value?e.reverseTransition!==!1:e.transition!==!1));function c(){!o.value||!a||(o.value=!1,a.transitionCount.value>0&&(a.transitionCount.value-=1,a.transitionCount.value===0&&(a.transitionHeight.value=void 0)))}function A(){o.value||!a||(o.value=!0,a.transitionCount.value===0&&(a.transitionHeight.value=Kt(a.rootRef.value?.clientHeight)),a.transitionCount.value+=1)}function d(){c()}function f(p){o.value&&_n(()=>{!i.value||!o.value||!a||(a.transitionHeight.value=Kt(p.clientHeight))})}const m=ne(()=>{const p=a.isReversed.value?e.reverseTransition:e.transition;return i.value?{name:typeof p!="string"?a.transition.value:p,onBeforeEnter:A,onAfterEnter:c,onEnterCancelled:d,onBeforeLeave:A,onAfterLeave:c,onLeaveCancelled:d,onEnter:f}:!1}),{hasContent:v}=w4(e,r.isSelected);return St(()=>l(ho,{transition:m.value,disabled:!s.value},{default:()=>[ma(h("div",{class:ct(["v-window-item",r.selectedClass.value,e.class]),style:Ut(e.style)},[v.value&&n.default?.()]),[[ii,r.isSelected.value]])]})),{groupItem:r}}}),Uqe=lt({...uQ(),...ab()},"VCarouselItem"),Rqe=gt()({name:"VCarouselItem",inheritAttrs:!1,props:Uqe(),setup(e,t){let{slots:n,attrs:a}=t;St(()=>{const r=Nc.filterProps(e),s=Tf.filterProps(e);return l(Tf,Pe({class:["v-carousel-item",e.class]},s),{default:()=>[l(Nc,Pe(a,r),n)]})})}}),Nqe=Oc("v-code","code"),Vqe=lt({color:{type:Object},disabled:Boolean,dotSize:{type:[Number,String],default:10},height:{type:[Number,String],default:150},width:{type:[Number,String],default:300},...Jt()},"VColorPickerCanvas"),Lqe=Fi({name:"VColorPickerCanvas",props:Vqe(),emits:{"update:color":e=>!0,"update:position":e=>!0},setup(e,t){let{emit:n}=t;const a=Ht(!1),r=V(),s=Ht(parseFloat(e.width)),o=Ht(parseFloat(e.height)),i=V({x:0,y:0}),c=ne({get:()=>i.value,set(y){if(!r.value)return;const{x:w,y:b}=y;i.value=y,n("update:color",{h:e.color?.h??0,s:Ja(w,0,s.value)/s.value,v:1-Ja(b,0,o.value)/o.value,a:e.color?.a??1})}}),A=ne(()=>{const{x:y,y:w}=c.value,b=parseInt(e.dotSize,10)/2;return{width:Kt(e.dotSize),height:Kt(e.dotSize),transform:`translate(${Kt(y-b)}, ${Kt(w-b)})`}}),{resizeRef:d}=$l(y=>{if(!d.el?.offsetParent)return;const{width:w,height:b}=y[0].contentRect;s.value=w,o.value=b});function f(y,w,b){const{left:x,top:T,width:D,height:k}=b;c.value={x:Ja(y-x,0,D),y:Ja(w-T,0,k)}}function m(y){y.type==="mousedown"&&y.preventDefault(),!e.disabled&&(v(y),window.addEventListener("mousemove",v),window.addEventListener("mouseup",p),window.addEventListener("touchmove",v),window.addEventListener("touchend",p))}function v(y){if(e.disabled||!r.value)return;a.value=!0;const w=mte(y);f(w.clientX,w.clientY,r.value.getBoundingClientRect())}function p(){window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",p),window.removeEventListener("touchmove",v),window.removeEventListener("touchend",p)}function g(){if(!r.value)return;const y=r.value,w=y.getContext("2d");if(!w)return;const b=w.createLinearGradient(0,0,y.width,0);b.addColorStop(0,"hsla(0, 0%, 100%, 1)"),b.addColorStop(1,`hsla(${e.color?.h??0}, 100%, 50%, 1)`),w.fillStyle=b,w.fillRect(0,0,y.width,y.height);const x=w.createLinearGradient(0,0,0,y.height);x.addColorStop(0,"hsla(0, 0%, 0%, 0)"),x.addColorStop(1,"hsla(0, 0%, 0%, 1)"),w.fillStyle=x,w.fillRect(0,0,y.width,y.height)}return je(()=>e.color?.h,g,{immediate:!0}),je(()=>[s.value,o.value],(y,w)=>{g(),i.value={x:c.value.x*y[0]/w[0],y:c.value.y*y[1]/w[1]}},{flush:"post"}),je(()=>e.color,()=>{if(a.value){a.value=!1;return}i.value=e.color?{x:e.color.s*s.value,y:(1-e.color.v)*o.value}:{x:0,y:0}},{deep:!0,immediate:!0}),dn(()=>g()),St(()=>h("div",{ref:d,class:ct(["v-color-picker-canvas",e.class]),style:Ut(e.style),onMousedown:m,onTouchstartPassive:m},[h("canvas",{ref:r,width:s.value,height:o.value},null),e.color&&h("div",{class:ct(["v-color-picker-canvas__dot",{"v-color-picker-canvas__dot--disabled":e.disabled}]),style:Ut(A.value)},null)])),{}}});function Mqe(e,t){if(t){const{a:n,...a}=e;return a}return e}function Oqe(e,t){if(t==null||typeof t=="string"){const n=e.a!==1;if(t?.startsWith("rgb(")){const{r,g:s,b:o,a:i}=Fu(e);return`rgb(${r} ${s} ${o}`+(n?` / ${i})`:")")}else if(t?.startsWith("hsl(")){const{h:r,s,l:o,a:i}=kS(e);return`hsl(${r} ${Math.round(s*100)} ${Math.round(o*100)}`+(n?` / ${i})`:")")}const a=a6(e);return e.a===1?a.slice(0,7):a}if(typeof t=="object"){let n;return GA(t,["r","g","b"])?n=Fu(e):GA(t,["h","s","l"])?n=kS(e):GA(t,["h","s","v"])&&(n=e),Mqe(n,!GA(t,["a"])&&e.a===1)}return e}const nv={h:0,s:0,v:0,a:1},lB={inputProps:{type:"number",min:0},inputs:[{label:"R",max:255,step:1,getValue:e=>Math.round(e.r),getColor:(e,t)=>({...e,r:Number(t)}),localeKey:"redInput"},{label:"G",max:255,step:1,getValue:e=>Math.round(e.g),getColor:(e,t)=>({...e,g:Number(t)}),localeKey:"greenInput"},{label:"B",max:255,step:1,getValue:e=>Math.round(e.b),getColor:(e,t)=>({...e,b:Number(t)}),localeKey:"blueInput"},{label:"A",max:1,step:.01,getValue:e=>{let{a:t}=e;return t!=null?Math.round(t*100)/100:1},getColor:(e,t)=>({...e,a:Number(t)}),localeKey:"alphaInput"}],to:Fu,from:ug},Hqe={...lB,inputs:lB.inputs?.slice(0,3)},uB={inputProps:{type:"number",min:0},inputs:[{label:"H",max:360,step:1,getValue:e=>Math.round(e.h),getColor:(e,t)=>({...e,h:Number(t)}),localeKey:"hueInput"},{label:"S",max:1,step:.01,getValue:e=>Math.round(e.s*100)/100,getColor:(e,t)=>({...e,s:Number(t)}),localeKey:"saturationInput"},{label:"L",max:1,step:.01,getValue:e=>Math.round(e.l*100)/100,getColor:(e,t)=>({...e,l:Number(t)}),localeKey:"lightnessInput"},{label:"A",max:1,step:.01,getValue:e=>{let{a:t}=e;return t!=null?Math.round(t*100)/100:1},getColor:(e,t)=>({...e,a:Number(t)}),localeKey:"alphaInput"}],to:kS,from:hk},$qe={...uB,inputs:uB.inputs.slice(0,3)},C7={inputProps:{type:"text"},inputs:[{label:"HEXA",getValue:e=>e,getColor:(e,t)=>t,localeKey:"hexaInput"}],to:a6,from:Mte},Qqe={...C7,inputs:[{label:"HEX",getValue:e=>e.slice(0,7),getColor:(e,t)=>t,localeKey:"hexInput"}]},df={rgb:Hqe,rgba:lB,hsl:$qe,hsla:uB,hex:Qqe,hexa:C7},Gqe=e=>{let{label:t,...n}=e;return h("div",{class:"v-color-picker-edit__input"},[h("input",Yl(Jl(n)),null),h("span",null,[t])])},zqe=lt({color:Object,disabled:Boolean,mode:{type:String,default:"rgba",validator:e=>Object.keys(df).includes(e)},modes:{type:Array,default:()=>Object.keys(df),validator:e=>Array.isArray(e)&&e.every(t=>Object.keys(df).includes(t))},...Jt()},"VColorPickerEdit"),Kqe=Fi({name:"VColorPickerEdit",props:zqe(),emits:{"update:color":e=>!0,"update:mode":e=>!0},setup(e,t){let{emit:n}=t;const{t:a}=Oa(),r=ne(()=>e.modes.map(o=>({...df[o],name:o}))),s=ne(()=>{const o=r.value.find(c=>c.name===e.mode);if(!o)return[];const i=e.color?o.to(e.color):null;return o.inputs?.map(c=>{let{getValue:A,getColor:d,localeKey:f,...m}=c;return{...o.inputProps,...m,ariaLabel:a(`$vuetify.colorPicker.ariaLabel.${f}`),disabled:e.disabled,value:i&&A(i),onChange:v=>{const p=v.target;p&&n("update:color",o.from(d(i??o.to(nv),p.value)))}}})});return St(()=>h("div",{class:ct(["v-color-picker-edit",e.class]),style:Ut(e.style)},[s.value?.map(o=>l(Gqe,o,null)),r.value.length>1&&l(Jn,{icon:"$unfold",size:"x-small",variant:"plain","aria-label":a("$vuetify.colorPicker.ariaLabel.changeFormat"),onClick:()=>{const o=r.value.findIndex(i=>i.name===e.mode);n("update:mode",r.value[(o+1)%r.value.length].name)}},null)])),{}}}),S4=Symbol.for("vuetify:v-slider");function cB(e,t,n){const a=n==="vertical",r=t.getBoundingClientRect(),s="touches"in e?e.touches[0]:e;return a?s.clientY-(r.top+r.height/2):s.clientX-(r.left+r.width/2)}function Wqe(e,t){return"touches"in e&&e.touches.length?e.touches[0][t]:"changedTouches"in e&&e.changedTouches.length?e.changedTouches[0][t]:e[t]}const S7=lt({disabled:{type:Boolean,default:null},error:Boolean,readonly:{type:Boolean,default:null},max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:e=>typeof e=="boolean"||e==="always"},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:e=>typeof e=="boolean"||e==="always"},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:e=>["vertical","horizontal"].includes(e)},reverse:Boolean,noKeyboard:Boolean,...lr(),...Jr({elevation:2}),ripple:{type:Boolean,default:!0}},"Slider"),E7=e=>{const t=ne(()=>parseFloat(e.min)),n=ne(()=>parseFloat(e.max)),a=ne(()=>Number(e.step)>0?parseFloat(e.step):0),r=ne(()=>Math.max(YP(a.value),YP(t.value)));function s(o){if(o=parseFloat(o),a.value<=0)return o;const i=Ja(o,t.value,n.value),c=t.value%a.value;let A=Math.round((i-c)/a.value)*a.value+c;return i>A&&A+a.value>n.value&&(A=n.value),parseFloat(Math.min(A,n.value).toFixed(r.value))}return{min:t,max:n,step:a,decimals:r,roundValue:s}},B7=e=>{let{props:t,steps:n,onSliderStart:a,onSliderMove:r,onSliderEnd:s,getActiveThumb:o}=e;const{isRtl:i}=Xr(),c=Xe(()=>t.reverse),A=ne(()=>t.direction==="vertical"),d=ne(()=>A.value!==c.value),{min:f,max:m,step:v,decimals:p,roundValue:g}=n,y=ne(()=>parseInt(t.thumbSize,10)),w=ne(()=>parseInt(t.tickSize,10)),b=ne(()=>parseInt(t.trackSize,10)),x=ne(()=>(m.value-f.value)/v.value),T=Xe(()=>t.disabled),D=ne(()=>t.error||t.disabled?void 0:t.thumbColor??t.color),k=ne(()=>t.error||t.disabled?void 0:t.thumbColor),S=ne(()=>t.error||t.disabled?void 0:t.trackColor??t.color),E=ne(()=>t.error||t.disabled?void 0:t.trackFillColor??t.color),C=Ht(!1),U=Ht(0),F=V(),L=V();function H(Y){const W=F.value?.$el;if(!W)return;const ee=t.direction==="vertical",ae=ee?"top":"left",oe=ee?"height":"width",j=ee?"clientY":"clientX",{[ae]:ce,[oe]:de}=W.getBoundingClientRect(),_e=Wqe(Y,j);let Re=Ja((_e-ce-U.value)/de)||0;return(ee?d.value:d.value!==i.value)&&(Re=1-Re),g(f.value+Re*(m.value-f.value))}const ue=Y=>{const W=H(Y);W!=null&&s({value:W}),C.value=!1,U.value=0},ie=Y=>{const W=H(Y);L.value=o(Y),L.value&&(C.value=!0,L.value.contains(Y.target)?U.value=cB(Y,L.value,t.direction):(U.value=0,W!=null&&r({value:W})),W!=null&&a({value:W}),_n(()=>L.value?.focus()))},Q={passive:!0,capture:!0};function X(Y){const W=H(Y);W!=null&&r({value:W})}function le(Y){Y.stopPropagation(),Y.preventDefault(),ue(Y),window.removeEventListener("mousemove",X,Q),window.removeEventListener("mouseup",le)}function Z(Y){ue(Y),window.removeEventListener("touchmove",X,Q),Y.target?.removeEventListener("touchend",Z)}function re(Y){ie(Y),window.addEventListener("touchmove",X,Q),Y.target?.addEventListener("touchend",Z,{passive:!1})}function q(Y){Y.button===0&&(Y.preventDefault(),ie(Y),window.addEventListener("mousemove",X,Q),window.addEventListener("mouseup",le,{passive:!1}))}const P=Y=>{const W=(Y-f.value)/(m.value-f.value)*100;return Ja(isNaN(W)?0:W,0,100)},G=Xe(()=>t.showTicks),J=ne(()=>G.value?t.ticks?Array.isArray(t.ticks)?t.ticks.map(Y=>({value:Y,position:P(Y),label:Y.toString()})):Object.keys(t.ticks).map(Y=>({value:parseFloat(Y),position:P(parseFloat(Y)),label:t.ticks[Y]})):x.value!==1/0?xi(x.value+1).map(Y=>{const W=f.value+Y*v.value;return{value:W,position:P(W)}}):[]:[]),M=ne(()=>J.value.some(Y=>{let{label:W}=Y;return!!W})),te={activeThumbRef:L,color:Xe(()=>t.color),decimals:p,disabled:T,direction:Xe(()=>t.direction),elevation:Xe(()=>t.elevation),hasLabels:M,isReversed:c,indexFromEnd:d,min:f,max:m,mousePressed:C,noKeyboard:Xe(()=>t.noKeyboard),numTicks:x,onSliderMousedown:q,onSliderTouchstart:re,parsedTicks:J,parseMouseMove:H,position:P,readonly:Xe(()=>t.readonly),rounded:Xe(()=>t.rounded),roundValue:g,showTicks:G,startOffset:U,step:v,thumbSize:y,thumbColor:D,thumbLabelColor:k,thumbLabel:Xe(()=>t.thumbLabel),ticks:Xe(()=>t.ticks),tickSize:w,trackColor:S,trackContainerRef:F,trackFillColor:E,trackSize:b,vertical:A};return La(S4,te),te},jqe=lt({focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0},ripple:{type:[Boolean,Object],default:!0},name:String,noKeyboard:Boolean,...Jt()},"VSliderThumb"),dB=gt()({name:"VSliderThumb",directives:{vRipple:xo},props:jqe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n,emit:a}=t;const r=Tn(S4),{isRtl:s,rtlClasses:o}=Xr();if(!r)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{min:i,max:c,thumbColor:A,thumbLabelColor:d,step:f,disabled:m,thumbSize:v,thumbLabel:p,direction:g,isReversed:y,vertical:w,readonly:b,elevation:x,mousePressed:T,decimals:D,indexFromEnd:k}=r,S=ne(()=>m.value?void 0:x.value),{elevationClasses:E}=xs(S),{textColorClasses:C,textColorStyles:U}=Rs(A),{backgroundColorClasses:F,backgroundColorStyles:L}=Fa(d),{pageup:H,pagedown:ue,end:ie,home:Q,left:X,right:le,down:Z,up:re}=bS,q=[H,ue,ie,Q,X,le,Z,re],P=ne(()=>f.value?[1,2,3]:[1,5,10]);function G(M,te){if(e.noKeyboard||!q.includes(M.key))return;M.preventDefault();const Y=f.value||.1,W=(c.value-i.value)/Y;if([X,le,Z,re].includes(M.key)){const ae=(w.value?[s.value?X:le,y.value?Z:re]:k.value!==s.value?[X,re]:[le,re]).includes(M.key)?1:-1,oe=M.shiftKey?2:M.ctrlKey?1:0;ae===-1&&te===c.value&&!oe&&!Number.isInteger(W)?te=te-W%1*Y:te=te+ae*Y*P.value[oe]}else if(M.key===Q)te=i.value;else if(M.key===ie)te=c.value;else{const ee=M.key===ue?1:-1;te=te-ee*Y*(W>100?W/10:10)}return Math.max(e.min,Math.min(e.max,te))}function J(M){const te=G(M,e.modelValue);te!=null&&a("update:modelValue",te)}return St(()=>{const M=Kt(k.value?100-e.position:e.position,"%");return h("div",{class:ct(["v-slider-thumb",{"v-slider-thumb--focused":e.focused,"v-slider-thumb--pressed":e.focused&&T.value},e.class,o.value]),style:Ut([{"--v-slider-thumb-position":M,"--v-slider-thumb-size":Kt(v.value)},e.style]),role:"slider",tabindex:m.value?-1:0,"aria-label":e.name,"aria-valuemin":i.value,"aria-valuemax":c.value,"aria-valuenow":e.modelValue,"aria-readonly":!!b.value,"aria-orientation":g.value,onKeydown:b.value?void 0:J},[h("div",{class:ct(["v-slider-thumb__surface",C.value,E.value]),style:Ut(U.value)},null),ma(h("div",{class:ct(["v-slider-thumb__ripple",C.value]),style:Ut(U.value)},null),[[xo,e.ripple,null,{circle:!0,center:!0}]]),l(i4,{origin:"bottom center"},{default:()=>[ma(h("div",{class:"v-slider-thumb__label-container"},[h("div",{class:ct(["v-slider-thumb__label",F.value]),style:Ut(L.value)},[h("div",null,[n["thumb-label"]?.({modelValue:e.modelValue})??e.modelValue.toFixed(f.value?D.value:1)]),h("div",{class:"v-slider-thumb__label-wedge"},null)])]),[[ii,p.value&&e.focused||p.value==="always"]])]})])}),{}}}),qqe=lt({start:{type:Number,required:!0},stop:{type:Number,required:!0},...Jt()},"VSliderTrack"),k7=gt()({name:"VSliderTrack",props:qqe(),emits:{},setup(e,t){let{slots:n}=t;const a=Tn(S4);if(!a)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{color:r,parsedTicks:s,rounded:o,showTicks:i,tickSize:c,trackColor:A,trackFillColor:d,trackSize:f,vertical:m,min:v,max:p,indexFromEnd:g}=a,{roundedClasses:y}=xr(o),{backgroundColorClasses:w,backgroundColorStyles:b}=Fa(d),{backgroundColorClasses:x,backgroundColorStyles:T}=Fa(A),D=ne(()=>`inset-${m.value?"block":"inline"}-${g.value?"end":"start"}`),k=ne(()=>m.value?"height":"width"),S=ne(()=>({[D.value]:"0%",[k.value]:"100%"})),E=ne(()=>e.stop-e.start),C=ne(()=>({[D.value]:Kt(e.start,"%"),[k.value]:Kt(E.value,"%")})),U=ne(()=>i.value?(m.value?s.value.slice().reverse():s.value).map((L,H)=>{const ue=L.value!==v.value&&L.value!==p.value?Kt(L.position,"%"):void 0;return h("div",{key:L.value,class:ct(["v-slider-track__tick",{"v-slider-track__tick--filled":L.position>=e.start&&L.position<=e.stop,"v-slider-track__tick--first":L.value===v.value,"v-slider-track__tick--last":L.value===p.value}]),style:{[D.value]:ue}},[(L.label||n["tick-label"])&&h("div",{class:"v-slider-track__tick-label"},[n["tick-label"]?.({tick:L,index:H})??L.label])])}):[]);return St(()=>h("div",{class:ct(["v-slider-track",y.value,e.class]),style:Ut([{"--v-slider-track-size":Kt(f.value),"--v-slider-tick-size":Kt(c.value)},e.style])},[h("div",{class:ct(["v-slider-track__background",x.value,{"v-slider-track__background--opacity":!!r.value||!d.value}]),style:{...S.value,...T.value}},null),h("div",{class:ct(["v-slider-track__fill",w.value]),style:{...C.value,...b.value}},null),i.value&&h("div",{class:ct(["v-slider-track__ticks",{"v-slider-track__ticks--always-show":i.value==="always"}])},[U.value])])),{}}}),Yqe=lt({...Lg(),...S7(),...zc(),modelValue:{type:[Number,String],default:0}},"VSlider"),AB=gt()({name:"VSlider",props:Yqe(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,start:e=>!0,end:e=>!0},setup(e,t){let{slots:n,emit:a}=t;const r=V(),s=V(),{rtlClasses:o}=Xr(),i=E7(e),c=ln(e,"modelValue",void 0,E=>i.roundValue(E??i.min.value)),{min:A,max:d,mousePressed:f,roundValue:m,onSliderMousedown:v,onSliderTouchstart:p,trackContainerRef:g,position:y,hasLabels:w,readonly:b,noKeyboard:x}=B7({props:e,steps:i,onSliderStart:()=>{a("start",c.value)},onSliderEnd:E=>{let{value:C}=E;const U=m(C);c.value=U,a("end",U)},onSliderMove:E=>{let{value:C}=E;return c.value=m(C)},getActiveThumb:()=>r.value?.$el}),{isFocused:T,focus:D,blur:k}=Gc(e),S=ne(()=>y(c.value));return St(()=>{const E=qs.filterProps(e),C=!!(e.label||n.label||n.prepend);return l(qs,Pe({ref:s,class:["v-slider",{"v-slider--has-labels":!!n["tick-label"]||w.value,"v-slider--focused":T.value,"v-slider--pressed":f.value,"v-slider--disabled":e.disabled},o.value,e.class],style:e.style},E,{focused:T.value}),{...n,prepend:C?U=>h(Ke,null,[n.label?.(U)??(e.label?l(Sh,{id:U.id.value,class:"v-slider__label",text:e.label},null):void 0),n.prepend?.(U)]):void 0,default:U=>{let{id:F,messagesId:L}=U;return h("div",{class:"v-slider__container",onMousedown:b.value?void 0:v,onTouchstartPassive:b.value?void 0:p},[h("input",{id:F.value,name:e.name||F.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:c.value},null),l(k7,{ref:g,start:0,stop:S.value},{"tick-label":n["tick-label"]}),l(dB,{ref:r,"aria-describedby":L.value,focused:T.value,noKeyboard:x.value,min:A.value,max:d.value,modelValue:c.value,"onUpdate:modelValue":H=>c.value=H,position:S.value,elevation:e.elevation,onFocus:D,onBlur:k,ripple:e.ripple,name:e.name},{"thumb-label":n["thumb-label"]})])}})}),Cs({focus:()=>r.value?.$el.focus()},s)}}),Xqe=lt({color:{type:Object},disabled:Boolean,hideAlpha:Boolean,...Jt()},"VColorPickerPreview"),Jqe=Fi({name:"VColorPickerPreview",props:Xqe(),emits:{"update:color":e=>!0},setup(e,t){let{emit:n}=t;const{t:a}=Oa(),r=new AbortController;Ii(()=>r.abort());async function s(){if(!KP||e.disabled)return;const o=new window.EyeDropper;try{const i=await o.open({signal:r.signal}),c=ug(Ci(i.sRGBHex));n("update:color",{...e.color??nv,...c})}catch{}}return St(()=>h("div",{class:ct(["v-color-picker-preview",{"v-color-picker-preview--hide-alpha":e.hideAlpha},e.class]),style:Ut(e.style)},[KP&&h("div",{class:"v-color-picker-preview__eye-dropper",key:"eyeDropper"},[l(Jn,{"aria-label":a("$vuetify.colorPicker.ariaLabel.eyedropper"),density:"comfortable",disabled:e.disabled,icon:"$eyeDropper",variant:"plain",onClick:s},null)]),h("div",{class:"v-color-picker-preview__dot"},[h("div",{style:{background:e6(e.color??nv)}},null)]),h("div",{class:"v-color-picker-preview__sliders"},[l(AB,{class:"v-color-picker-preview__track v-color-picker-preview__hue",name:a("$vuetify.colorPicker.ariaLabel.hueSlider"),modelValue:e.color?.h,"onUpdate:modelValue":o=>n("update:color",{...e.color??nv,h:o}),step:0,min:0,max:360,disabled:e.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null),!e.hideAlpha&&l(AB,{class:"v-color-picker-preview__track v-color-picker-preview__alpha",name:a("$vuetify.colorPicker.ariaLabel.alphaSlider"),modelValue:e.color?.a??1,"onUpdate:modelValue":o=>n("update:color",{...e.color??nv,a:o}),step:1/256,min:0,max:1,disabled:e.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null)])])),{}}}),Zqe={base:"#f44336",lighten5:"#ffebee",lighten4:"#ffcdd2",lighten3:"#ef9a9a",lighten2:"#e57373",lighten1:"#ef5350",darken1:"#e53935",darken2:"#d32f2f",darken3:"#c62828",darken4:"#b71c1c",accent1:"#ff8a80",accent2:"#ff5252",accent3:"#ff1744",accent4:"#d50000"},eYe={base:"#e91e63",lighten5:"#fce4ec",lighten4:"#f8bbd0",lighten3:"#f48fb1",lighten2:"#f06292",lighten1:"#ec407a",darken1:"#d81b60",darken2:"#c2185b",darken3:"#ad1457",darken4:"#880e4f",accent1:"#ff80ab",accent2:"#ff4081",accent3:"#f50057",accent4:"#c51162"},tYe={base:"#9c27b0",lighten5:"#f3e5f5",lighten4:"#e1bee7",lighten3:"#ce93d8",lighten2:"#ba68c8",lighten1:"#ab47bc",darken1:"#8e24aa",darken2:"#7b1fa2",darken3:"#6a1b9a",darken4:"#4a148c",accent1:"#ea80fc",accent2:"#e040fb",accent3:"#d500f9",accent4:"#aa00ff"},nYe={base:"#673ab7",lighten5:"#ede7f6",lighten4:"#d1c4e9",lighten3:"#b39ddb",lighten2:"#9575cd",lighten1:"#7e57c2",darken1:"#5e35b1",darken2:"#512da8",darken3:"#4527a0",darken4:"#311b92",accent1:"#b388ff",accent2:"#7c4dff",accent3:"#651fff",accent4:"#6200ea"},aYe={base:"#3f51b5",lighten5:"#e8eaf6",lighten4:"#c5cae9",lighten3:"#9fa8da",lighten2:"#7986cb",lighten1:"#5c6bc0",darken1:"#3949ab",darken2:"#303f9f",darken3:"#283593",darken4:"#1a237e",accent1:"#8c9eff",accent2:"#536dfe",accent3:"#3d5afe",accent4:"#304ffe"},rYe={base:"#2196f3",lighten5:"#e3f2fd",lighten4:"#bbdefb",lighten3:"#90caf9",lighten2:"#64b5f6",lighten1:"#42a5f5",darken1:"#1e88e5",darken2:"#1976d2",darken3:"#1565c0",darken4:"#0d47a1",accent1:"#82b1ff",accent2:"#448aff",accent3:"#2979ff",accent4:"#2962ff"},sYe={base:"#03a9f4",lighten5:"#e1f5fe",lighten4:"#b3e5fc",lighten3:"#81d4fa",lighten2:"#4fc3f7",lighten1:"#29b6f6",darken1:"#039be5",darken2:"#0288d1",darken3:"#0277bd",darken4:"#01579b",accent1:"#80d8ff",accent2:"#40c4ff",accent3:"#00b0ff",accent4:"#0091ea"},oYe={base:"#00bcd4",lighten5:"#e0f7fa",lighten4:"#b2ebf2",lighten3:"#80deea",lighten2:"#4dd0e1",lighten1:"#26c6da",darken1:"#00acc1",darken2:"#0097a7",darken3:"#00838f",darken4:"#006064",accent1:"#84ffff",accent2:"#18ffff",accent3:"#00e5ff",accent4:"#00b8d4"},iYe={base:"#009688",lighten5:"#e0f2f1",lighten4:"#b2dfdb",lighten3:"#80cbc4",lighten2:"#4db6ac",lighten1:"#26a69a",darken1:"#00897b",darken2:"#00796b",darken3:"#00695c",darken4:"#004d40",accent1:"#a7ffeb",accent2:"#64ffda",accent3:"#1de9b6",accent4:"#00bfa5"},lYe={base:"#4caf50",lighten5:"#e8f5e9",lighten4:"#c8e6c9",lighten3:"#a5d6a7",lighten2:"#81c784",lighten1:"#66bb6a",darken1:"#43a047",darken2:"#388e3c",darken3:"#2e7d32",darken4:"#1b5e20",accent1:"#b9f6ca",accent2:"#69f0ae",accent3:"#00e676",accent4:"#00c853"},uYe={base:"#8bc34a",lighten5:"#f1f8e9",lighten4:"#dcedc8",lighten3:"#c5e1a5",lighten2:"#aed581",lighten1:"#9ccc65",darken1:"#7cb342",darken2:"#689f38",darken3:"#558b2f",darken4:"#33691e",accent1:"#ccff90",accent2:"#b2ff59",accent3:"#76ff03",accent4:"#64dd17"},cYe={base:"#cddc39",lighten5:"#f9fbe7",lighten4:"#f0f4c3",lighten3:"#e6ee9c",lighten2:"#dce775",lighten1:"#d4e157",darken1:"#c0ca33",darken2:"#afb42b",darken3:"#9e9d24",darken4:"#827717",accent1:"#f4ff81",accent2:"#eeff41",accent3:"#c6ff00",accent4:"#aeea00"},dYe={base:"#ffeb3b",lighten5:"#fffde7",lighten4:"#fff9c4",lighten3:"#fff59d",lighten2:"#fff176",lighten1:"#ffee58",darken1:"#fdd835",darken2:"#fbc02d",darken3:"#f9a825",darken4:"#f57f17",accent1:"#ffff8d",accent2:"#ffff00",accent3:"#ffea00",accent4:"#ffd600"},AYe={base:"#ffc107",lighten5:"#fff8e1",lighten4:"#ffecb3",lighten3:"#ffe082",lighten2:"#ffd54f",lighten1:"#ffca28",darken1:"#ffb300",darken2:"#ffa000",darken3:"#ff8f00",darken4:"#ff6f00",accent1:"#ffe57f",accent2:"#ffd740",accent3:"#ffc400",accent4:"#ffab00"},fYe={base:"#ff9800",lighten5:"#fff3e0",lighten4:"#ffe0b2",lighten3:"#ffcc80",lighten2:"#ffb74d",lighten1:"#ffa726",darken1:"#fb8c00",darken2:"#f57c00",darken3:"#ef6c00",darken4:"#e65100",accent1:"#ffd180",accent2:"#ffab40",accent3:"#ff9100",accent4:"#ff6d00"},mYe={base:"#ff5722",lighten5:"#fbe9e7",lighten4:"#ffccbc",lighten3:"#ffab91",lighten2:"#ff8a65",lighten1:"#ff7043",darken1:"#f4511e",darken2:"#e64a19",darken3:"#d84315",darken4:"#bf360c",accent1:"#ff9e80",accent2:"#ff6e40",accent3:"#ff3d00",accent4:"#dd2c00"},vYe={base:"#795548",lighten5:"#efebe9",lighten4:"#d7ccc8",lighten3:"#bcaaa4",lighten2:"#a1887f",lighten1:"#8d6e63",darken1:"#6d4c41",darken2:"#5d4037",darken3:"#4e342e",darken4:"#3e2723"},hYe={base:"#607d8b",lighten5:"#eceff1",lighten4:"#cfd8dc",lighten3:"#b0bec5",lighten2:"#90a4ae",lighten1:"#78909c",darken1:"#546e7a",darken2:"#455a64",darken3:"#37474f",darken4:"#263238"},pYe={base:"#9e9e9e",lighten5:"#fafafa",lighten4:"#f5f5f5",lighten3:"#eeeeee",lighten2:"#e0e0e0",lighten1:"#bdbdbd",darken1:"#757575",darken2:"#616161",darken3:"#424242",darken4:"#212121"},gYe={black:"#000000",white:"#ffffff",transparent:"#ffffff00"},yYe={red:Zqe,pink:eYe,purple:tYe,deepPurple:nYe,indigo:aYe,blue:rYe,lightBlue:sYe,cyan:oYe,teal:iYe,green:lYe,lightGreen:uYe,lime:cYe,yellow:dYe,amber:AYe,orange:fYe,deepOrange:mYe,brown:vYe,blueGrey:hYe,grey:pYe,shades:gYe},_Ye=lt({swatches:{type:Array,default:()=>wYe(yYe)},disabled:Boolean,color:Object,maxHeight:[Number,String],...Jt()},"VColorPickerSwatches");function wYe(e){return Object.keys(e).map(t=>{const n=e[t];return n.base?[n.base,n.darken4,n.darken3,n.darken2,n.darken1,n.lighten1,n.lighten2,n.lighten3,n.lighten4,n.lighten5]:[n.black,n.white,n.transparent]})}const bYe=Fi({name:"VColorPickerSwatches",props:_Ye(),emits:{"update:color":e=>!0},setup(e,t){let{emit:n}=t;return St(()=>h("div",{class:ct(["v-color-picker-swatches",e.class]),style:Ut([{maxHeight:Kt(e.maxHeight)},e.style])},[h("div",null,[e.swatches.map(a=>h("div",{class:"v-color-picker-swatches__swatch"},[a.map(r=>{const s=Ci(r),o=ug(s),i=Z8(s);return h("div",{class:"v-color-picker-swatches__color",onClick:()=>o&&n("update:color",o)},[h("div",{style:{background:i}},[e.color&&_s(e.color,o)?l(Ea,{size:"x-small",icon:"$success",color:Qte(r,"#FFFFFF")>2?"white":"black"},null):void 0])])})]))])])),{}}}),xYe=Oc("v-picker-title"),E4=lt({color:String,...Ko(),...Jt(),...Mr(),...Jr(),...Qc(),...xh(),...lr(),...Nn(),...ua()},"VSheet"),Z0=gt()({name:"VSheet",props:E4(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=ka(e),{backgroundColorClasses:r,backgroundColorStyles:s}=Fa(()=>e.color),{borderClasses:o}=ci(e),{dimensionStyles:i}=Or(e),{elevationClasses:c}=xs(e),{locationStyles:A}=am(e),{positionClasses:d}=Ch(e),{roundedClasses:f}=xr(e);return St(()=>l(e.tag,{class:ct(["v-sheet",a.value,r.value,o.value,c.value,d.value,f.value,e.class]),style:Ut([s.value,i.value,A.value,e.style])},n)),{}}}),rb=lt({bgColor:String,divided:Boolean,landscape:Boolean,title:String,hideHeader:Boolean,...E4()},"VPicker"),Yv=gt()({name:"VPicker",props:rb(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:a,backgroundColorStyles:r}=Fa(()=>e.color);return St(()=>{const s=Z0.filterProps(e),o=!!(e.title||n.title);return l(Z0,Pe(s,{color:e.bgColor,class:["v-picker",{"v-picker--divided":e.divided,"v-picker--landscape":e.landscape,"v-picker--with-actions":!!n.actions},e.class],style:e.style}),{default:()=>[!e.hideHeader&&h("div",{key:"header",class:ct([a.value]),style:Ut([r.value])},[o&&l(xYe,{key:"picker-title"},{default:()=>[n.title?.()??e.title]}),n.header&&h("div",{class:"v-picker__header"},[n.header()])]),h("div",{class:"v-picker__body"},[n.default?.()]),n.actions&&l(Vn,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[h("div",{class:"v-picker__actions"},[n.actions()])]})]})}),{}}}),CYe=lt({canvasHeight:{type:[String,Number],default:150},disabled:Boolean,dotSize:{type:[Number,String],default:10},hideCanvas:Boolean,hideSliders:Boolean,hideInputs:Boolean,mode:{type:String,default:"rgba",validator:e=>Object.keys(df).includes(e)},modes:{type:Array,default:()=>Object.keys(df),validator:e=>Array.isArray(e)&&e.every(t=>Object.keys(df).includes(t))},showSwatches:Boolean,swatches:Array,swatchesMaxHeight:{type:[Number,String],default:150},modelValue:{type:[Object,String]},...rb({hideHeader:!0})},"VColorPicker"),SYe=Fi({name:"VColorPicker",props:CYe(),emits:{"update:modelValue":e=>!0,"update:mode":e=>!0},setup(e,t){let{slots:n}=t;const a=ln(e,"mode"),r=V(null),s=ln(e,"modelValue",void 0,d=>{if(d==null||d==="")return null;let f;try{f=ug(Ci(d))}catch{return null}return f},d=>d?Oqe(d,e.modelValue):null),o=ne(()=>s.value?{...s.value,h:r.value??s.value.h}:null),{rtlClasses:i}=Xr();let c=!0;je(s,d=>{if(!c){c=!0;return}d&&(r.value=d.h)},{immediate:!0});const A=d=>{c=!1,r.value=d.h,s.value=d};return Xl(()=>{e.modes.includes(a.value)||(a.value=e.modes[0])}),wr({VSlider:{color:void 0,trackColor:void 0,trackFillColor:void 0}}),St(()=>{const d=Yv.filterProps(e);return l(Yv,Pe(d,{class:["v-color-picker",i.value,e.class],style:[{"--v-color-picker-color-hsv":e6({...o.value??nv,a:1})},e.style]}),{...n,default:()=>h(Ke,null,[!e.hideCanvas&&l(Lqe,{key:"canvas",color:o.value,"onUpdate:color":A,disabled:e.disabled,dotSize:e.dotSize,width:e.width,height:e.canvasHeight},null),(!e.hideSliders||!e.hideInputs)&&h("div",{key:"controls",class:"v-color-picker__controls"},[!e.hideSliders&&l(Jqe,{key:"preview",color:o.value,"onUpdate:color":A,hideAlpha:!a.value.endsWith("a"),disabled:e.disabled},null),!e.hideInputs&&l(Kqe,{key:"edit",modes:e.modes,mode:a.value,"onUpdate:mode":f=>a.value=f,color:o.value,"onUpdate:color":A,disabled:e.disabled},null)]),e.showSwatches&&l(bYe,{key:"swatches",color:o.value,"onUpdate:color":A,maxHeight:e.swatchesMaxHeight,swatches:e.swatches,disabled:e.disabled},null)])})}),{}}}),EYe=lt({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...kh({filterKeys:["title"]}),...x4({hideNoData:!0,returnObject:!0}),...Ma($g({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...ru({transition:!1})},"VCombobox"),BYe=gt()({name:"VCombobox",props:EYe(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:search":e=>!0,"update:menu":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const{t:r}=Oa(),s=V(),o=Ht(!1),i=Ht(!0),c=Ht(!1),A=V(),d=V(),f=Ht(-1);let m=!1;const{items:v,transformIn:p,transformOut:g}=h4(e),{textColorClasses:y,textColorStyles:w}=Rs(()=>s.value?.color),b=ln(e,"modelValue",[],oe=>p(gr(oe)),oe=>{const j=g(oe);return e.multiple?j:j[0]??null}),x=Mg(e),T=ne(()=>!!(e.chips||a.chip)),D=ne(()=>T.value||!!a.selection),k=Ht(!e.multiple&&!D.value?b.value[0]?.title??"":""),S=ne({get:()=>k.value,set:async oe=>{if(k.value=oe??"",!e.multiple&&!D.value&&(b.value=[El(e,oe)],_n(()=>d.value?.scrollToIndex(0))),oe&&e.multiple&&e.delimiters?.length){const j=e.delimiters.map(k_).join("|"),ce=oe.split(new RegExp(`(?:${j})+`));if(ce.length>1){for(let de of ce)de=de.trim(),de&&(Y(El(e,de)),await _n());k.value=""}}oe||(f.value=-1),i.value=!oe}}),E=ne(()=>typeof e.counterValue=="function"?e.counterValue(b.value):typeof e.counterValue=="number"?e.counterValue:e.multiple?b.value.length:S.value.length),{filteredItems:C,getMatches:U}=Th(e,v,()=>i.value?"":S.value),F=ne(()=>e.hideSelected?C.value.filter(oe=>!b.value.some(j=>j.value===oe.value)):C.value),L=ne(()=>e.hideNoData&&!F.value.length||x.isReadonly.value||x.isDisabled.value),H=ln(e,"menu"),ue=ne({get:()=>H.value,set:oe=>{H.value&&!oe&&A.value?.openChildren.size||oe&&L.value||(H.value=oe)}}),ie=Xe(()=>ue.value?e.closeText:e.openText);je(k,oe=>{m?_n(()=>m=!1):o.value&&!ue.value&&(ue.value=!0),n("update:search",oe)}),je(b,oe=>{!e.multiple&&!D.value&&(k.value=oe[0]?.title??"")});const Q=ne(()=>b.value.map(oe=>oe.value)),X=ne(()=>(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&S.value===F.value[0]?.title)&&F.value.length>0&&!i.value&&!c.value),le=V(),Z=b4(le,s);function re(oe){m=!0,e.openOnClear&&(ue.value=!0)}function q(){L.value||(ue.value=!0)}function P(oe){L.value||(o.value&&(oe.preventDefault(),oe.stopPropagation()),ue.value=!ue.value)}function G(oe){(Fv(oe)||oe.key==="Backspace")&&s.value?.focus()}function J(oe){if(Ate(oe)||x.isReadonly.value)return;const j=s.value?.selectionStart,ce=b.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(oe.key)&&oe.preventDefault(),["Enter","ArrowDown"].includes(oe.key)&&(ue.value=!0),["Escape"].includes(oe.key)&&(ue.value=!1),["Enter","Escape","Tab"].includes(oe.key)&&(X.value&&["Enter","Tab"].includes(oe.key)&&!b.value.some(de=>{let{value:_e}=de;return _e===F.value[0].value})&&Y(C.value[0]),i.value=!0),oe.key==="ArrowDown"&&X.value&&le.value?.focus("next"),oe.key==="Enter"&&S.value&&(Y(El(e,S.value)),D.value&&(k.value="")),["Backspace","Delete"].includes(oe.key)){if(!e.multiple&&D.value&&b.value.length>0&&!S.value)return Y(b.value[0],!1);if(~f.value){oe.preventDefault();const de=f.value;Y(b.value[f.value],!1),f.value=de>=ce-1?ce-2:de}else oe.key==="Backspace"&&!S.value&&(f.value=ce-1);return}if(e.multiple)if(oe.key==="ArrowLeft"){if(f.value<0&&j&&j>0)return;const de=f.value>-1?f.value-1:ce-1;b.value[de]?f.value=de:(f.value=-1,s.value?.setSelectionRange(S.value.length,S.value.length))}else if(oe.key==="ArrowRight"){if(f.value<0)return;const de=f.value+1;b.value[de]?f.value=de:(f.value=-1,s.value?.setSelectionRange(0,0))}else~f.value&&Fv(oe)&&(f.value=-1)}function M(){e.eager&&d.value?.calculateVisibleItems()}function te(){o.value&&(i.value=!0,s.value?.focus())}function Y(oe){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!oe||oe.props.disabled))if(e.multiple){const ce=b.value.findIndex(_e=>(e.valueComparator||_s)(_e.value,oe.value)),de=j??!~ce;if(~ce){const _e=de?[...b.value,oe]:[...b.value];_e.splice(ce,1),b.value=_e}else de&&(b.value=[...b.value,oe]);e.clearOnSelect&&(S.value="")}else{const ce=j!==!1;b.value=ce?[oe]:[],k.value=ce&&!D.value?oe.title:"",_n(()=>{ue.value=!1,i.value=!0})}}function W(oe){o.value=!0,setTimeout(()=>{c.value=!0})}function ee(oe){c.value=!1}function ae(oe){(oe==null||oe===""&&!e.multiple&&!D.value)&&(b.value=[])}return je(o,(oe,j)=>{if(!(oe||oe===j)&&(f.value=-1,ue.value=!1,S.value)){if(e.multiple){Y(El(e,S.value));return}if(!D.value)return;b.value.some(ce=>{let{title:de}=ce;return de===S.value})?k.value="":Y(El(e,S.value))}}),je(ue,()=>{if(!e.hideSelected&&ue.value&&b.value.length){const oe=F.value.findIndex(j=>b.value.some(ce=>(e.valueComparator||_s)(ce.value,j.value)));Ba&&window.requestAnimationFrame(()=>{oe>=0&&d.value?.scrollToIndex(oe)})}}),je(()=>e.items,(oe,j)=>{ue.value||o.value&&!j.length&&oe.length&&(ue.value=!0)}),St(()=>{const oe=!!(!e.hideNoData||F.value.length||a["prepend-item"]||a["append-item"]||a["no-data"]),j=b.value.length>0,ce=Vc.filterProps(e);return l(Vc,Pe({ref:s},ce,{modelValue:S.value,"onUpdate:modelValue":[de=>S.value=de,ae],focused:o.value,"onUpdate:focused":de=>o.value=de,validationValue:b.externalValue,counterValue:E.value,dirty:j,class:["v-combobox",{"v-combobox--active-menu":ue.value,"v-combobox--chips":!!e.chips,"v-combobox--selection-slot":!!D.value,"v-combobox--selecting-index":f.value>-1,[`v-combobox--${e.multiple?"multiple":"single"}`]:!0},e.class],style:e.style,readonly:x.isReadonly.value,placeholder:j?void 0:e.placeholder,"onClick:clear":re,"onMousedown:control":q,onKeydown:J}),{...a,default:()=>h(Ke,null,[l(qv,Pe({ref:A,modelValue:ue.value,"onUpdate:modelValue":de=>ue.value=de,activator:"parent",contentClass:"v-combobox__content",disabled:L.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:M,onAfterLeave:te},e.menuProps),{default:()=>[oe&&l(jv,Pe({ref:le,filterable:!0,selected:Q.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:de=>de.preventDefault(),onKeydown:G,onFocusin:W,onFocusout:ee,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},Z,e.listProps),{default:()=>[a["prepend-item"]?.(),!F.value.length&&!e.hideNoData&&(a["no-data"]?.()??l(jl,{key:"no-data",title:r(e.noDataText)},null)),l(tb,{ref:d,renderless:!0,items:F.value,itemKey:"value"},{default:de=>{let{item:_e,index:Re,itemRef:be}=de;const Ee=Pe(_e.props,{ref:be,key:_e.value,active:X.value&&Re===0?!0:void 0,onClick:()=>Y(_e,null)});return _e.type==="divider"?a.divider?.({props:_e.raw,index:Re})??l(Ei,Pe(_e.props,{key:`divider-${Re}`}),null):_e.type==="subheader"?a.subheader?.({props:_e.raw,index:Re})??l(Bh,Pe(_e.props,{key:`subheader-${Re}`}),null):a.item?.({item:_e,index:Re,props:Ee})??l(jl,Pe(Ee,{role:"option"}),{prepend:Ce=>{let{isSelected:Be}=Ce;return h(Ke,null,[e.multiple&&!e.hideSelected?l(Ru,{key:_e.value,modelValue:Be,ripple:!1,tabindex:"-1"},null):void 0,_e.props.prependAvatar&&l(nl,{image:_e.props.prependAvatar},null),_e.props.prependIcon&&l(Ea,{icon:_e.props.prependIcon},null)])},title:()=>i.value?_e.title:d7("v-combobox",_e.title,U(_e)?.title)})}}),a["append-item"]?.()]})]}),b.value.map((de,_e)=>{function Re(Be){Be.stopPropagation(),Be.preventDefault(),Y(de,!1)}const be={"onClick:close":Re,onKeydown(Be){Be.key!=="Enter"&&Be.key!==" "||(Be.preventDefault(),Be.stopPropagation(),Re(Be))},onMousedown(Be){Be.preventDefault(),Be.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},Ee=T.value?!!a.chip:!!a.selection,Ce=Ee?sw(T.value?a.chip({item:de,index:_e,props:be}):a.selection({item:de,index:_e})):void 0;if(!(Ee&&!Ce))return h("div",{key:de.value,class:ct(["v-combobox__selection",_e===f.value&&["v-combobox__selection--selected",y.value]]),style:Ut(_e===f.value?w.value:{})},[T.value?a.chip?l(Vn,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:de.title}}},{default:()=>[Ce]}):l(Eh,Pe({key:"chip",closable:e.closableChips,size:"small",text:de.title,disabled:de.props.disabled},be),null):Ce??h("span",{class:"v-combobox__selection-text"},[de.title,e.multiple&&_e<b.value.length-1&&h("span",{class:"v-combobox__selection-comma"},[O(",")])])])})]),"append-inner":function(){for(var de=arguments.length,_e=new Array(de),Re=0;Re<de;Re++)_e[Re]=arguments[Re];return h(Ke,null,[a["append-inner"]?.(..._e),(!e.hideNoData||e.items.length)&&e.menuIcon?l(Ea,{class:"v-combobox__menu-icon",color:s.value?.fieldIconColor,icon:e.menuIcon,onMousedown:P,onClick:K8,"aria-label":r(ie.value),title:r(ie.value),tabindex:"-1"},null):void 0])}})}),Cs({isFocused:o,isPristine:i,menu:ue,search:S,selectionIndex:f,filteredItems:C,select:Y},s)}}),kYe=lt({modelValue:null,color:String,cancelText:{type:String,default:"$vuetify.confirmEdit.cancel"},okText:{type:String,default:"$vuetify.confirmEdit.ok"},disabled:{type:[Boolean,Array],default:void 0},hideActions:Boolean},"VConfirmEdit"),TYe=gt()({name:"VConfirmEdit",props:kYe(),emits:{cancel:()=>!0,save:e=>!0,"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const r=ln(e,"modelValue"),s=V();_r(()=>{s.value=structuredClone(wn(r.value))});const{t:o}=Oa(),i=ne(()=>_s(r.value,s.value));function c(g){return typeof e.disabled=="boolean"?e.disabled:Array.isArray(e.disabled)?e.disabled.includes(g):i.value}const A=ne(()=>c("save")),d=ne(()=>c("cancel"));function f(){r.value=s.value,n("save",s.value)}function m(){s.value=structuredClone(wn(r.value)),n("cancel")}function v(g){return h(Ke,null,[l(Jn,Pe({disabled:d.value,variant:"text",color:e.color,onClick:m,text:o(e.cancelText)},g),null),l(Jn,Pe({disabled:A.value,variant:"text",color:e.color,onClick:f,text:o(e.okText)},g),null)])}let p=!1;return St(()=>h(Ke,null,[a.default?.({model:s,save:f,cancel:m,isPristine:i.value,get actions(){return p=!0,v}}),!e.hideActions&&!p&&v()])),{save:f,cancel:m,isPristine:i}}}),T7=lt({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),I7=Symbol.for("vuetify:datatable:expanded");function sb(e){const t=Xe(()=>e.expandOnClick),n=ln(e,"expanded",e.expanded,i=>new Set(i),i=>[...i.values()]);function a(i,c){const A=new Set(n.value);c?A.add(i.value):A.delete(i.value),n.value=A}function r(i){return n.value.has(i.value)}function s(i){a(i,!r(i))}const o={expand:a,expanded:n,expandOnClick:t,isExpanded:r,toggleExpand:s};return La(I7,o),o}function F7(){const e=Tn(I7);if(!e)throw new Error("foo");return e}const B4=lt({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),P7=Symbol.for("vuetify:data-table-group");function k4(e){return{groupBy:ln(e,"groupBy")}}function ob(e){const{disableSort:t,groupBy:n,sortBy:a}=e,r=V(new Set),s=ne(()=>n.value.map(d=>({...d,order:d.order??!1})).concat(t?.value?[]:a.value));function o(d){return r.value.has(d.id)}function i(d){const f=new Set(r.value);o(d)?f.delete(d.id):f.add(d.id),r.value=f}function c(d){function f(m){const v=[];for(const p of m.items)"type"in p&&p.type==="group"?v.push(...f(p)):v.push(p);return[...new Set(v)]}return f({items:d})}const A={sortByWithGroups:s,toggleGroup:i,opened:r,groupBy:n,extractRows:c,isGroupOpen:o};return La(P7,A),A}function D7(){const e=Tn(P7);if(!e)throw new Error("Missing group!");return e}function IYe(e,t){if(!e.length)return[];const n=new Map;for(const a of e){const r=vf(a.raw,t);n.has(r)||n.set(r,[]),n.get(r).push(a)}return n}function U7(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!t.length)return[];const r=IYe(e,t[0]),s=[],o=t.slice(1);return r.forEach((i,c)=>{const A=t[0],d=`${a}_${A}_${c}`;s.push({depth:n,id:d,key:A,value:c,items:o.length?U7(i,o,n+1,d):i,type:"group"})}),s}function R7(e,t){const n=[];for(const a of e)"type"in a&&a.type==="group"?(a.value!=null&&n.push(a),(t.has(a.id)||a.value==null)&&n.push(...R7(a.items,t))):n.push(a);return n}function ib(e,t,n){return{flatItems:ne(()=>{if(!t.value.length)return e.value;const r=U7(e.value,t.value.map(s=>s.key));return R7(r,n.value)})}}function lb(e){let{page:t,itemsPerPage:n,sortBy:a,groupBy:r,search:s}=e;const o=Pr("VDataTable"),i=()=>({page:t.value,itemsPerPage:n.value,sortBy:a.value,groupBy:r.value,search:s.value});let c=null;je(i,A=>{_s(c,A)||(c&&c.search!==A.search&&(t.value=1),o.emit("update:options",A),c=A)},{deep:!0,immediate:!0})}const T4=lt({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),N7=Symbol.for("vuetify:data-table-pagination");function I4(e){const t=ln(e,"page",void 0,a=>Number(a??1)),n=ln(e,"itemsPerPage",void 0,a=>Number(a??10));return{page:t,itemsPerPage:n}}function F4(e){const{page:t,itemsPerPage:n,itemsLength:a}=e,r=ne(()=>n.value===-1?0:n.value*(t.value-1)),s=ne(()=>n.value===-1?a.value:Math.min(a.value,r.value+n.value)),o=ne(()=>n.value===-1||a.value===0?1:Math.ceil(a.value/n.value));je([t,o],()=>{t.value>o.value&&(t.value=o.value)});function i(m){n.value=m,t.value=1}function c(){t.value=Ja(t.value+1,1,o.value)}function A(){t.value=Ja(t.value-1,1,o.value)}function d(m){t.value=Ja(m,1,o.value)}const f={page:t,itemsPerPage:n,startIndex:r,stopIndex:s,pageCount:o,itemsLength:a,nextPage:c,prevPage:A,setPage:d,setItemsPerPage:i};return La(N7,f),f}function FYe(){const e=Tn(N7);if(!e)throw new Error("Missing pagination!");return e}function V7(e){const t=Pr("usePaginatedItems"),{items:n,startIndex:a,stopIndex:r,itemsPerPage:s}=e,o=ne(()=>s.value<=0?n.value:n.value.slice(a.value,r.value));return je(o,i=>{t.emit("update:currentItems",i)},{immediate:!0}),{paginatedItems:o}}const PYe={showSelectAll:!1,allSelected:()=>[],select:e=>{let{items:t,value:n}=e;return new Set(n?[t[0]?.value]:[])},selectAll:e=>{let{selected:t}=e;return t}},L7={showSelectAll:!0,allSelected:e=>{let{currentPage:t}=e;return t},select:e=>{let{items:t,value:n,selected:a}=e;for(const r of t)n?a.add(r.value):a.delete(r.value);return a},selectAll:e=>{let{value:t,currentPage:n,selected:a}=e;return L7.select({items:n,value:t,selected:a})}},M7={showSelectAll:!0,allSelected:e=>{let{allItems:t}=e;return t},select:e=>{let{items:t,value:n,selected:a}=e;for(const r of t)n?a.add(r.value):a.delete(r.value);return a},selectAll:e=>{let{value:t,allItems:n,selected:a}=e;return M7.select({items:n,value:t,selected:a})}},O7=lt({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:{type:Function,default:_s}},"DataTable-select"),H7=Symbol.for("vuetify:data-table-selection");function ub(e,t){let{allItems:n,currentPage:a}=t;const r=ln(e,"modelValue",e.modelValue,b=>new Set(gr(b).map(x=>n.value.find(T=>e.valueComparator(x,T.value))?.value??x)),b=>[...b.values()]),s=ne(()=>n.value.filter(b=>b.selectable)),o=ne(()=>a.value.filter(b=>b.selectable)),i=ne(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;switch(e.selectStrategy){case"single":return PYe;case"all":return M7;case"page":default:return L7}}),c=Ht(null);function A(b){return gr(b).every(x=>r.value.has(x.value))}function d(b){return gr(b).some(x=>r.value.has(x.value))}function f(b,x){const T=i.value.select({items:b,value:x,selected:new Set(r.value)});r.value=T}function m(b,x,T){const D=[];if(x=x??a.value.findIndex(k=>k.value===b.value),e.selectStrategy!=="single"&&T?.shiftKey&&c.value!==null){const[k,S]=[c.value,x].sort((E,C)=>E-C);D.push(...a.value.slice(k,S+1).filter(E=>E.selectable))}else D.push(b),c.value=x;f(D,!A([b]))}function v(b){const x=i.value.selectAll({value:b,allItems:s.value,currentPage:o.value,selected:new Set(r.value)});r.value=x}const p=ne(()=>r.value.size>0),g=ne(()=>{const b=i.value.allSelected({allItems:s.value,currentPage:o.value});return!!b.length&&A(b)}),y=Xe(()=>i.value.showSelectAll),w={toggleSelect:m,select:f,selectAll:v,isSelected:A,isSomeSelected:d,someSelected:p,allSelected:g,showSelectAll:y,lastSelectedIndex:c,selectStrategy:i};return La(H7,w),w}function cb(){const e=Tn(H7);if(!e)throw new Error("Missing selection!");return e}const $7=lt({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),Q7=Symbol.for("vuetify:data-table-sort");function db(e){const t=ln(e,"sortBy"),n=Xe(()=>e.mustSort),a=Xe(()=>e.multiSort);return{sortBy:t,mustSort:n,multiSort:a}}function Ab(e){const{sortBy:t,mustSort:n,multiSort:a,page:r}=e,s=c=>{if(c.key==null)return;let A=t.value.map(f=>({...f}))??[];const d=A.find(f=>f.key===c.key);d?d.order==="desc"?n.value&&A.length===1?d.order="asc":A=A.filter(f=>f.key!==c.key):d.order="desc":a.value?A.push({key:c.key,order:"asc"}):A=[{key:c.key,order:"asc"}],t.value=A,r&&(r.value=1)};function o(c){return!!t.value.find(A=>A.key===c.key)}const i={sortBy:t,toggleSort:s,isSorted:o};return La(Q7,i),i}function G7(){const e=Tn(Q7);if(!e)throw new Error("Missing sort!");return e}function P4(e,t,n,a){const r=Oa();return{sortedItems:ne(()=>n.value.length?DYe(t.value,n.value,r.current.value,{transform:a?.transform,sortFunctions:{...e.customKeySort,...a?.sortFunctions?.value},sortRawFunctions:a?.sortRawFunctions?.value}):t.value)}}function DYe(e,t,n,a){const r=new Intl.Collator(n,{sensitivity:"accent",usage:"sort"});return e.map(o=>[o,a?.transform?a.transform(o):o]).sort((o,i)=>{for(let c=0;c<t.length;c++){let A=!1;const d=t[c].key,f=t[c].order??"asc";if(f===!1)continue;let m=vf(o[1],d),v=vf(i[1],d),p=o[0].raw,g=i[0].raw;if(f==="desc"&&([m,v]=[v,m],[p,g]=[g,p]),a?.sortRawFunctions?.[d]){const y=a.sortRawFunctions[d](p,g);if(y==null)continue;if(A=!0,y)return y}if(a?.sortFunctions?.[d]){const y=a.sortFunctions[d](m,v);if(y==null)continue;if(A=!0,y)return y}if(!A&&(m instanceof Date&&v instanceof Date&&(m=m.getTime(),v=v.getTime()),[m,v]=[m,v].map(y=>y!=null?y.toString().toLocaleLowerCase():y),m!==v))return z1(m)&&z1(v)?0:z1(m)?-1:z1(v)?1:!isNaN(m)&&!isNaN(v)?Number(m)-Number(v):r.compare(m,v)}return 0}).map(o=>{let[i]=o;return i})}const UYe=lt({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},returnObject:Boolean},"DataIterator-items");function RYe(e,t){const n=e.returnObject?t:Vr(t,e.itemValue),a=Vr(t,e.itemSelectable,!0);return{type:"item",value:n,selectable:a,raw:t}}function NYe(e,t){const n=[];for(const a of t)n.push(RYe(e,a));return n}function VYe(e){return{items:ne(()=>NYe(e,e.items))}}const LYe=lt({search:String,loading:Boolean,...Jt(),...UYe(),...O7(),...$7(),...T4({itemsPerPage:5}),...T7(),...B4(),...kh(),...Nn(),...ru({transition:{component:K0,hideOnLeave:!0}})},"VDataIterator"),MYe=gt()({name:"VDataIterator",props:LYe(),emits:{"update:modelValue":e=>!0,"update:groupBy":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,t){let{slots:n}=t;const a=ln(e,"groupBy"),r=Xe(()=>e.search),{items:s}=VYe(e),{filteredItems:o}=Th(e,s,r,{transform:q=>q.raw}),{sortBy:i,multiSort:c,mustSort:A}=db(e),{page:d,itemsPerPage:f}=I4(e),{toggleSort:m}=Ab({sortBy:i,multiSort:c,mustSort:A,page:d}),{sortByWithGroups:v,opened:p,extractRows:g,isGroupOpen:y,toggleGroup:w}=ob({groupBy:a,sortBy:i}),{sortedItems:b}=P4(e,o,v,{transform:q=>q.raw}),{flatItems:x}=ib(b,a,p),T=Xe(()=>x.value.length),{startIndex:D,stopIndex:k,pageCount:S,prevPage:E,nextPage:C,setItemsPerPage:U,setPage:F}=F4({page:d,itemsPerPage:f,itemsLength:T}),{paginatedItems:L}=V7({items:x,startIndex:D,stopIndex:k,itemsPerPage:f}),H=ne(()=>g(L.value)),{isSelected:ue,select:ie,selectAll:Q,toggleSelect:X}=ub(e,{allItems:s,currentPage:H}),{isExpanded:le,toggleExpand:Z}=sb(e);lb({page:d,itemsPerPage:f,sortBy:i,groupBy:a,search:r});const re=ne(()=>({page:d.value,itemsPerPage:f.value,sortBy:i.value,pageCount:S.value,toggleSort:m,prevPage:E,nextPage:C,setPage:F,setItemsPerPage:U,isSelected:ue,select:ie,selectAll:Q,toggleSelect:X,isExpanded:le,toggleExpand:Z,isGroupOpen:y,toggleGroup:w,items:H.value,groupedItems:L.value}));return St(()=>l(e.tag,{class:ct(["v-data-iterator",{"v-data-iterator--loading":e.loading},e.class]),style:Ut(e.style)},{default:()=>[n.header?.(re.value),l(ho,{transition:e.transition},{default:()=>[e.loading?l(Rg,{key:"loader",name:"v-data-iterator",active:!0},{default:q=>n.loader?.(q)}):h("div",{key:"items"},[L.value.length?n.default?.(re.value):n["no-data"]?.()])]}),n.footer?.(re.value)]})),{}}});function OYe(){const e=V([]);ZL(()=>e.value=[]);function t(n,a){e.value[a]=n}return{refs:e,updateRef:t}}const HYe=lt({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:cn,default:"$first"},prevIcon:{type:cn,default:"$prev"},nextIcon:{type:cn,default:"$next"},lastIcon:{type:cn,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...Ko(),...Jt(),...cs(),...Jr(),...lr(),...Ku(),...Nn({tag:"nav"}),...ua(),...il({variant:"text"})},"VPagination"),fB=gt()({name:"VPagination",props:HYe(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,t){let{slots:n,emit:a}=t;const r=ln(e,"modelValue"),{t:s,n:o}=Oa(),{isRtl:i}=Xr(),{themeClasses:c}=ka(e),{width:A}=rl(),d=Ht(-1);wr(void 0,{scoped:!0});const{resizeRef:f}=$l(E=>{if(!E.length)return;const{target:C,contentRect:U}=E[0],F=C.querySelector(".v-pagination__list > *");if(!F)return;const L=U.width,H=F.offsetWidth+parseFloat(getComputedStyle(F).marginRight)*2;d.value=g(L,H)}),m=ne(()=>parseInt(e.length,10)),v=ne(()=>parseInt(e.start,10)),p=ne(()=>e.totalVisible!=null?parseInt(e.totalVisible,10):d.value>=0?d.value:g(A.value,58));function g(E,C){const U=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(Number(((E-C*U)/C).toFixed(2))))}const y=ne(()=>{if(m.value<=0||isNaN(m.value)||m.value>Number.MAX_SAFE_INTEGER)return[];if(p.value<=0)return[];if(p.value===1)return[r.value];if(m.value<=p.value)return xi(m.value,v.value);const E=p.value%2===0,C=E?p.value/2:Math.floor(p.value/2),U=E?C:C+1,F=m.value-C;if(U-r.value>=0)return[...xi(Math.max(1,p.value-1),v.value),e.ellipsis,m.value];if(r.value-F>=(E?1:0)){const L=p.value-1,H=m.value-L+v.value;return[v.value,e.ellipsis,...xi(L,H)]}else{const L=Math.max(1,p.value-2),H=L===1?r.value:r.value-Math.ceil(L/2)+v.value;return[v.value,e.ellipsis,...xi(L,H),e.ellipsis,m.value]}});function w(E,C,U){E.preventDefault(),r.value=C,U&&a(U,C)}const{refs:b,updateRef:x}=OYe();wr({VPaginationBtn:{color:Xe(()=>e.color),border:Xe(()=>e.border),density:Xe(()=>e.density),size:Xe(()=>e.size),variant:Xe(()=>e.variant),rounded:Xe(()=>e.rounded),elevation:Xe(()=>e.elevation)}});const T=ne(()=>y.value.map((E,C)=>{const U=F=>x(F,C);if(typeof E=="string")return{isActive:!1,key:`ellipsis-${C}`,page:E,props:{ref:U,ellipsis:!0,icon:!0,disabled:!0}};{const F=E===r.value;return{isActive:F,key:E,page:o(E),props:{ref:U,ellipsis:!1,icon:!0,disabled:!!e.disabled||Number(e.length)<2,color:F?e.activeColor:e.color,"aria-current":F,"aria-label":s(F?e.currentPageAriaLabel:e.pageAriaLabel,E),onClick:L=>w(L,E)}}}})),D=ne(()=>{const E=!!e.disabled||r.value<=v.value,C=!!e.disabled||r.value>=v.value+m.value-1;return{first:e.showFirstLastPage?{icon:i.value?e.lastIcon:e.firstIcon,onClick:U=>w(U,v.value,"first"),disabled:E,"aria-label":s(e.firstAriaLabel),"aria-disabled":E}:void 0,prev:{icon:i.value?e.nextIcon:e.prevIcon,onClick:U=>w(U,r.value-1,"prev"),disabled:E,"aria-label":s(e.previousAriaLabel),"aria-disabled":E},next:{icon:i.value?e.prevIcon:e.nextIcon,onClick:U=>w(U,r.value+1,"next"),disabled:C,"aria-label":s(e.nextAriaLabel),"aria-disabled":C},last:e.showFirstLastPage?{icon:i.value?e.firstIcon:e.lastIcon,onClick:U=>w(U,v.value+m.value-1,"last"),disabled:C,"aria-label":s(e.lastAriaLabel),"aria-disabled":C}:void 0}});function k(){const E=r.value-v.value;b.value[E]?.$el.focus()}function S(E){E.key===bS.left&&!e.disabled&&r.value>Number(e.start)?(r.value=r.value-1,_n(k)):E.key===bS.right&&!e.disabled&&r.value<v.value+m.value-1&&(r.value=r.value+1,_n(k))}return St(()=>l(e.tag,{ref:f,class:ct(["v-pagination",c.value,e.class]),style:Ut(e.style),role:"navigation","aria-label":s(e.ariaLabel),onKeydown:S,"data-test":"v-pagination-root"},{default:()=>[h("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&h("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[n.first?n.first(D.value.first):l(Jn,Pe({_as:"VPaginationBtn"},D.value.first),null)]),h("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[n.prev?n.prev(D.value.prev):l(Jn,Pe({_as:"VPaginationBtn"},D.value.prev),null)]),T.value.map((E,C)=>h("li",{key:E.key,class:ct(["v-pagination__item",{"v-pagination__item--is-active":E.isActive}]),"data-test":"v-pagination-item"},[n.item?n.item(E):l(Jn,Pe({_as:"VPaginationBtn"},E.props),{default:()=>[E.page]})])),h("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[n.next?n.next(D.value.next):l(Jn,Pe({_as:"VPaginationBtn"},D.value.next),null)]),e.showFirstLastPage&&h("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[n.last?n.last(D.value.last):l(Jn,Pe({_as:"VPaginationBtn"},D.value.last),null)])])]})),{}}}),D4=lt({prevIcon:{type:cn,default:"$prev"},nextIcon:{type:cn,default:"$next"},firstIcon:{type:cn,default:"$first"},lastIcon:{type:cn,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),eg=gt()({name:"VDataTableFooter",props:D4(),setup(e,t){let{slots:n}=t;const{t:a}=Oa(),{page:r,pageCount:s,startIndex:o,stopIndex:i,itemsLength:c,itemsPerPage:A,setItemsPerPage:d}=FYe(),f=ne(()=>e.itemsPerPageOptions.map(m=>typeof m=="number"?{value:m,title:m===-1?a("$vuetify.dataFooter.itemsPerPageAll"):String(m)}:{...m,title:isNaN(Number(m.title))?a(m.title):m.title}));return St(()=>{const m=fB.filterProps(e);return h("div",{class:"v-data-table-footer"},[n.prepend?.(),h("div",{class:"v-data-table-footer__items-per-page"},[h("span",{"aria-label":a(e.itemsPerPageText)},[a(e.itemsPerPageText)]),l(C4,{items:f.value,modelValue:A.value,"onUpdate:modelValue":v=>d(Number(v)),density:"compact",variant:"outlined",hideDetails:!0},null)]),h("div",{class:"v-data-table-footer__info"},[h("div",null,[a(e.pageText,c.value?o.value+1:0,i.value,c.value)])]),h("div",{class:"v-data-table-footer__pagination"},[l(fB,Pe({modelValue:r.value,"onUpdate:modelValue":v=>r.value=v,density:"comfortable",firstAriaLabel:e.firstPageLabel,lastAriaLabel:e.lastPageLabel,length:s.value,nextAriaLabel:e.nextPageLabel,previousAriaLabel:e.prevPageLabel,rounded:!0,showFirstLastPage:!0,totalVisible:e.showCurrentPage?1:0,variant:"plain"},m),null)])])}),{}}}),F2=jte({align:{type:String,default:"start"},fixed:{type:[Boolean,String],default:!1},fixedOffset:[Number,String],fixedEndOffset:[Number,String],height:[Number,String],lastFixed:Boolean,firstFixedEnd:Boolean,noPadding:Boolean,tag:String,width:[Number,String],maxWidth:[Number,String],nowrap:Boolean},(e,t)=>{let{slots:n}=t;const a=e.tag??"td",r=typeof e.fixed=="string"?e.fixed:e.fixed?"start":"none";return l(a,{class:ct(["v-data-table__td",{"v-data-table-column--fixed":r==="start","v-data-table-column--fixed-end":r==="end","v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--first-fixed-end":e.firstFixedEnd,"v-data-table-column--no-padding":e.noPadding,"v-data-table-column--nowrap":e.nowrap},`v-data-table-column--align-${e.align}`]),style:{height:Kt(e.height),width:Kt(e.width),maxWidth:Kt(e.maxWidth),left:r==="start"?Kt(e.fixedOffset||null):void 0,right:r==="end"?Kt(e.fixedEndOffset||null):void 0}},{default:()=>[n.default?.()]})}),$Ye=lt({headers:Array},"DataTable-header"),z7=Symbol.for("vuetify:data-table-headers"),K7={title:"",sortable:!1},QYe={...K7,width:48};function GYe(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).map(n=>({element:n,priority:0}));return{enqueue:(n,a)=>{let r=!1;for(let s=0;s<t.length;s++)if(t[s].priority>a){t.splice(s,0,{element:n,priority:a}),r=!0;break}r||t.push({element:n,priority:a})},size:()=>t.length,count:()=>{let n=0;if(!t.length)return 0;const a=Math.floor(t[0].priority);for(let r=0;r<t.length;r++)Math.floor(t[r].priority)===a&&(n+=1);return n},dequeue:()=>t.shift()}}function mB(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!e.children)t.push(e);else for(const n of e.children)mB(n,t);return t}function W7(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set;for(const n of e)n.key&&t.add(n.key),n.children&&W7(n.children,t);return t}function zYe(e){if(e.key){if(e.key==="data-table-group")return K7;if(["data-table-expand","data-table-select"].includes(e.key))return QYe}}function U4(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.children?Math.max(t,...e.children.map(n=>U4(n,t+1))):t}function KYe(e){let t=!1;function n(s,o){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"none";if(s)if(i!=="none"&&(s.fixed=i),s.fixed===!0&&(s.fixed="start"),s.fixed===o)if(s.children)if(o==="start")for(let c=s.children.length-1;c>=0;c--)n(s.children[c],o,o);else for(let c=0;c<s.children.length;c++)n(s.children[c],o,o);else!t&&o==="start"?s.lastFixed=!0:!t&&o==="end"?s.firstFixedEnd=!0:isNaN(Number(s.width))?(`${s.key}`,void 0):s.minWidth=Math.max(Number(s.width)||0,Number(s.minWidth)||0),t=!0;else if(s.children)if(o==="start")for(let c=s.children.length-1;c>=0;c--)n(s.children[c],o);else for(let c=0;c<s.children.length;c++)n(s.children[c],o);else t=!1}for(let s=e.length-1;s>=0;s--)n(e[s],"start");for(let s=0;s<e.length;s++)n(e[s],"end");let a=0;for(let s=0;s<e.length;s++)a=j7(e[s],a);let r=0;for(let s=e.length-1;s>=0;s--)r=q7(e[s],r)}function j7(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e)return t;if(e.children){e.fixedOffset=t;for(const n of e.children)t=j7(n,t)}else e.fixed&&e.fixed!=="end"&&(e.fixedOffset=t,t+=parseFloat(e.width||"0")||0);return t}function q7(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e)return t;if(e.children){e.fixedEndOffset=t;for(const n of e.children)t=q7(n,t)}else e.fixed==="end"&&(e.fixedEndOffset=t,t+=parseFloat(e.width||"0")||0);return t}function WYe(e,t){const n=[];let a=0;const r=GYe(e);for(;r.size()>0;){let o=r.count();const i=[];let c=1;for(;o>0;){const{element:A,priority:d}=r.dequeue(),f=t-a-U4(A);if(i.push({...A,rowspan:f??1,colspan:A.children?mB(A).length:1}),A.children)for(const m of A.children){const v=d%1+c/Math.pow(10,a+2);r.enqueue(m,a+f+v)}c+=1,o-=1}a+=1,n.push(i)}return{columns:e.map(o=>mB(o)).flat(),headers:n}}function Y7(e){const t=[];for(const n of e){const a={...zYe(n),...n},r=a.key??(typeof a.value=="string"?a.value:null),s=a.value??r??null,o={...a,key:r,value:s,sortable:a.sortable??(a.key!=null||!!a.sort),children:a.children?Y7(a.children):void 0};t.push(o)}return t}function R4(e,t){const n=V([]),a=V([]),r=V({}),s=V({}),o=V({});_r(()=>{const A=(e.headers||Object.keys(e.items[0]??{}).map(g=>({key:g,title:Lu(g)}))).slice(),d=W7(A);t?.groupBy?.value.length&&!d.has("data-table-group")&&A.unshift({key:"data-table-group",title:"Group"}),t?.showSelect?.value&&!d.has("data-table-select")&&A.unshift({key:"data-table-select"}),t?.showExpand?.value&&!d.has("data-table-expand")&&A.push({key:"data-table-expand"});const f=Y7(A);KYe(f);const m=Math.max(...f.map(g=>U4(g)))+1,v=WYe(f,m);n.value=v.headers,a.value=v.columns;const p=v.headers.flat(1);for(const g of p)g.key&&(g.sortable&&(g.sort&&(r.value[g.key]=g.sort),g.sortRaw&&(s.value[g.key]=g.sortRaw)),g.filter&&(o.value[g.key]=g.filter))});const i={headers:n,columns:a,sortFunctions:r,sortRawFunctions:s,filterFunctions:o};return La(z7,i),i}function fb(){const e=Tn(z7);if(!e)throw new Error("Missing headers!");return e}const X7=lt({color:String,disableSort:Boolean,fixedHeader:Boolean,multiSort:Boolean,sortAscIcon:{type:cn,default:"$sortAsc"},sortDescIcon:{type:cn,default:"$sortDesc"},headerProps:{type:Object},sticky:Boolean,...Of(),...Xw()},"VDataTableHeaders"),If=gt()({name:"VDataTableHeaders",props:X7(),setup(e,t){let{slots:n}=t;const{t:a}=Oa(),{toggleSort:r,sortBy:s,isSorted:o}=G7(),{someSelected:i,allSelected:c,selectAll:A,showSelectAll:d}=cb(),{columns:f,headers:m}=fb(),{loaderClasses:v}=Ug(e);function p(C,U){if(!(e.sticky||e.fixedHeader)&&!C.fixed)return;const F=typeof C.fixed=="string"?C.fixed:C.fixed?"start":"none";return{position:"sticky",left:F==="start"?Kt(C.fixedOffset):void 0,right:F==="end"?Kt(C.fixedEndOffset):void 0,top:e.sticky||e.fixedHeader?`calc(var(--v-table-header-height) * ${U})`:void 0}}function g(C,U){C.key==="Enter"&&!e.disableSort&&r(U)}function y(C){const U=s.value.find(F=>F.key===C.key);return U?U.order==="asc"?e.sortAscIcon:e.sortDescIcon:e.sortAscIcon}const{backgroundColorClasses:w,backgroundColorStyles:b}=Fa(()=>e.color),{displayClasses:x,mobile:T}=rl(e),D=ne(()=>({headers:m.value,columns:f.value,toggleSort:r,isSorted:o,sortBy:s.value,someSelected:i.value,allSelected:c.value,selectAll:A,getSortIcon:y})),k=ne(()=>["v-data-table__th",{"v-data-table__th--sticky":e.sticky||e.fixedHeader},x.value,v.value]),S=C=>{let{column:U,x:F,y:L}=C;const H=U.key==="data-table-select"||U.key==="data-table-expand",ue=Pe(e.headerProps??{},U.headerProps??{});return l(F2,Pe({tag:"th",align:U.align,class:[{"v-data-table__th--sortable":U.sortable&&!e.disableSort,"v-data-table__th--sorted":o(U),"v-data-table__th--fixed":U.fixed},...k.value],style:{width:Kt(U.width),minWidth:Kt(U.minWidth),maxWidth:Kt(U.maxWidth),...p(U,L)},colspan:U.colspan,rowspan:U.rowspan,fixed:U.fixed,nowrap:U.nowrap,lastFixed:U.lastFixed,firstFixedEnd:U.firstFixedEnd,noPadding:H,tabindex:U.sortable?0:void 0,onClick:U.sortable?()=>r(U):void 0,onKeydown:U.sortable?ie=>g(ie,U):void 0},ue),{default:()=>{const ie=`header.${U.key}`,Q={column:U,selectAll:A,isSorted:o,toggleSort:r,sortBy:s.value,someSelected:i.value,allSelected:c.value,getSortIcon:y};return n[ie]?n[ie](Q):U.key==="data-table-select"?n["header.data-table-select"]?.(Q)??(d.value&&l(Ru,{modelValue:c.value,indeterminate:i.value&&!c.value,"onUpdate:modelValue":A},null)):h("div",{class:"v-data-table-header__content"},[h("span",null,[U.title]),U.sortable&&!e.disableSort&&l(Ea,{key:"icon",class:"v-data-table-header__sort-icon",icon:y(U)},null),e.multiSort&&o(U)&&h("div",{key:"badge",class:ct(["v-data-table-header__sort-badge",...w.value]),style:Ut(b.value)},[s.value.findIndex(X=>X.key===U.key)+1])])}})},E=()=>{const C=ne(()=>f.value.filter(F=>F?.sortable&&!e.disableSort)),U=ne(()=>{if(f.value.find(L=>L.key==="data-table-select")!=null)return c.value?"$checkboxOn":i.value?"$checkboxIndeterminate":"$checkboxOff"});return l(F2,Pe({tag:"th",class:[...k.value],colspan:m.value.length+1},e.headerProps),{default:()=>[h("div",{class:"v-data-table-header__content"},[l(C4,{chips:!0,class:"v-data-table__td-sort-select",clearable:!0,density:"default",items:C.value,label:a("$vuetify.dataTable.sortBy"),multiple:e.multiSort,variant:"underlined","onClick:clear":()=>s.value=[],appendIcon:U.value,"onClick:append":()=>A(!c.value)},{chip:F=>l(Eh,{onClick:F.item.raw?.sortable?()=>r(F.item.raw):void 0,onMousedown:L=>{L.preventDefault(),L.stopPropagation()}},{default:()=>[F.item.title,l(Ea,{class:ct(["v-data-table__td-sort-icon",o(F.item.raw)&&"v-data-table__td-sort-icon-active"]),icon:y(F.item.raw),size:"small"},null)]})})])]})};St(()=>T.value?h("tr",null,[l(E,null,null)]):h(Ke,null,[n.headers?n.headers(D.value):m.value.map((C,U)=>h("tr",null,[C.map((F,L)=>l(S,{column:F,x:L,y:U},null))])),e.loading&&h("tr",{class:"v-data-table-progress"},[h("th",{colspan:f.value.length},[l(Rg,{name:"v-data-table-progress",absolute:!0,active:!0,color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0},{default:n.loader})])])]))}}),jYe=lt({item:{type:Object,required:!0}},"VDataTableGroupHeaderRow"),qYe=gt()({name:"VDataTableGroupHeaderRow",props:jYe(),setup(e,t){let{slots:n}=t;const{isGroupOpen:a,toggleGroup:r,extractRows:s}=D7(),{isSelected:o,isSomeSelected:i,select:c}=cb(),{columns:A}=fb(),d=ne(()=>s([e.item]));return()=>h("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[A.value.map(f=>{if(f.key==="data-table-group"){const m=a(e.item)?"$expand":"$next",v=()=>r(e.item);return n["data-table-group"]?.({item:e.item,count:d.value.length,props:{icon:m,onClick:v}})??l(F2,{class:"v-data-table-group-header-row__column"},{default:()=>[l(Jn,{size:"small",variant:"text",icon:m,onClick:v},null),h("span",null,[e.item.value]),h("span",null,[O("("),d.value.length,O(")")])]})}if(f.key==="data-table-select"){const m=o(d.value),v=i(d.value)&&!m,p=g=>c(d.value,g);return n["data-table-select"]?.({props:{modelValue:m,indeterminate:v,"onUpdate:modelValue":p}})??h("td",null,[l(Ru,{modelValue:m,indeterminate:v,"onUpdate:modelValue":p},null)])}return h("td",null,null)})])}}),YYe=lt({index:Number,item:Object,cellProps:[Object,Function],onClick:Ds(),onContextmenu:Ds(),onDblclick:Ds(),...Of()},"VDataTableRow"),N4=gt()({name:"VDataTableRow",props:YYe(),setup(e,t){let{slots:n}=t;const{displayClasses:a,mobile:r}=rl(e,"v-data-table__tr"),{isSelected:s,toggleSelect:o,someSelected:i,allSelected:c,selectAll:A}=cb(),{isExpanded:d,toggleExpand:f}=F7(),{toggleSort:m,sortBy:v,isSorted:p}=G7(),{columns:g}=fb();St(()=>h("tr",{class:ct(["v-data-table__tr",{"v-data-table__tr--clickable":!!(e.onClick||e.onContextmenu||e.onDblclick)},a.value]),onClick:e.onClick,onContextmenu:e.onContextmenu,onDblclick:e.onDblclick},[e.item&&g.value.map((y,w)=>{const b=e.item,x=`item.${y.key}`,T=`header.${y.key}`,D={index:e.index,item:b.raw,internalItem:b,value:vf(b.columns,y.key),column:y,isSelected:s,toggleSelect:o,isExpanded:d,toggleExpand:f},k={column:y,selectAll:A,isSorted:p,toggleSort:m,sortBy:v.value,someSelected:i.value,allSelected:c.value,getSortIcon:()=>""},S=typeof e.cellProps=="function"?e.cellProps({index:D.index,item:D.item,internalItem:D.internalItem,value:D.value,column:y}):e.cellProps,E=typeof y.cellProps=="function"?y.cellProps({index:D.index,item:D.item,internalItem:D.internalItem,value:D.value}):y.cellProps;return l(F2,Pe({align:y.align,class:{"v-data-table__td--expanded-row":y.key==="data-table-expand","v-data-table__td--select-row":y.key==="data-table-select"},fixed:y.fixed,fixedOffset:y.fixedOffset,fixedEndOffset:y.fixedEndOffset,lastFixed:y.lastFixed,firstFixedEnd:y.firstFixedEnd,maxWidth:r.value?void 0:y.maxWidth,noPadding:y.key==="data-table-select"||y.key==="data-table-expand",nowrap:y.nowrap,width:r.value?void 0:y.width},S,E),{default:()=>{if(y.key==="data-table-select")return n["item.data-table-select"]?.({...D,props:{disabled:!b.selectable,modelValue:s([b]),onClick:vn(()=>o(b),["stop"])}})??l(Ru,{disabled:!b.selectable,modelValue:s([b]),onClick:vn(U=>o(b,e.index,U),["stop"])},null);if(y.key==="data-table-expand")return n["item.data-table-expand"]?.({...D,props:{icon:d(b)?"$collapse":"$expand",size:"small",variant:"text",onClick:vn(()=>f(b),["stop"])}})??l(Jn,{icon:d(b)?"$collapse":"$expand",size:"small",variant:"text",onClick:vn(()=>f(b),["stop"])},null);if(n[x]&&!r.value)return n[x](D);const C=K(D.value);return r.value?h(Ke,null,[h("div",{class:"v-data-table__td-title"},[n[T]?.(k)??y.title]),h("div",{class:"v-data-table__td-value"},[n[x]?.(D)??C])]):C}})})]))}}),J7=lt({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowProps:[Object,Function],cellProps:[Object,Function],...Of()},"VDataTableRows"),Ff=gt()({name:"VDataTableRows",inheritAttrs:!1,props:J7(),setup(e,t){let{attrs:n,slots:a}=t;const{columns:r}=fb(),{expandOnClick:s,toggleExpand:o,isExpanded:i}=F7(),{isSelected:c,toggleSelect:A}=cb(),{toggleGroup:d,isGroupOpen:f}=D7(),{t:m}=Oa(),{mobile:v}=rl(e);return St(()=>e.loading&&(!e.items.length||a.loading)?h("tr",{class:"v-data-table-rows-loading",key:"loading"},[h("td",{colspan:r.value.length},[a.loading?.()??m(e.loadingText)])]):!e.loading&&!e.items.length&&!e.hideNoData?h("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[h("td",{colspan:r.value.length},[a["no-data"]?.()??m(e.noDataText)])]):h(Ke,null,[e.items.map((p,g)=>{if(p.type==="group"){const b={index:g,item:p,columns:r.value,isExpanded:i,toggleExpand:o,isSelected:c,toggleSelect:A,toggleGroup:d,isGroupOpen:f};return a["group-header"]?a["group-header"](b):l(qYe,Pe({key:`group-header_${p.id}`,item:p},mD(n,":group-header",()=>b)),a)}const y={index:g,item:p.raw,internalItem:p,columns:r.value,isExpanded:i,toggleExpand:o,isSelected:c,toggleSelect:A},w={...y,props:Pe({key:`item_${p.key??p.index}`,onClick:s.value?()=>{o(p)}:void 0,index:g,item:p,cellProps:e.cellProps,mobile:v.value},mD(n,":row",()=>y),typeof e.rowProps=="function"?e.rowProps({item:y.item,index:y.index,internalItem:y.internalItem}):e.rowProps)};return h(Ke,{key:w.props.key},[a.item?a.item(w):l(N4,w.props,a),i(p)&&a["expanded-row"]?.(y)])})])),{}}}),Z7=lt({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,striped:{type:String,default:null,validator:e=>["even","odd"].includes(e)},...Jt(),...cs(),...Nn(),...ua()},"VTable"),Pf=gt()({name:"VTable",props:Z7(),setup(e,t){let{slots:n,emit:a}=t;const{themeClasses:r}=ka(e),{densityClasses:s}=So(e);return St(()=>{const o={VCheckboxBtn:{density:e.density}};return l(e.tag,{class:ct(["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!n.top,"v-table--has-bottom":!!n.bottom,"v-table--hover":e.hover,"v-table--striped-even":e.striped==="even","v-table--striped-odd":e.striped==="odd"},r.value,s.value,e.class]),style:Ut(e.style)},{default:()=>[n.top?.(),l(Vn,{defaults:o},{default:()=>[n.default?h("div",{class:"v-table__wrapper",style:{height:Kt(e.height)}},[h("table",null,[n.default()])]):n.wrapper?.()]}),n.bottom?.()]})}),{}}}),XYe=lt({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function JYe(e,t,n,a){const r=e.returnObject?t:Vr(t,e.itemValue),s=Vr(t,e.itemSelectable,!0),o=a.reduce((i,c)=>(c.key!=null&&(i[c.key]=Vr(t,c.value)),i),{});return{type:"item",key:e.returnObject?Vr(t,e.itemValue):r,index:n,value:r,selectable:s,columns:o,raw:t}}function ZYe(e,t,n){return t.map((a,r)=>JYe(e,a,r,n))}function V4(e,t){return{items:ne(()=>ZYe(e,e.items,t.value))}}const L4=lt({...J7(),hideDefaultBody:Boolean,hideDefaultFooter:Boolean,hideDefaultHeader:Boolean,width:[String,Number],search:String,...T7(),...B4(),...$Ye(),...XYe(),...O7(),...$7(),...X7(),...Z7()},"DataTable"),eXe=lt({...T4(),...L4(),...kh(),...D4()},"VDataTable"),tXe=gt()({name:"VDataTable",props:eXe(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const{groupBy:r}=k4(e),{sortBy:s,multiSort:o,mustSort:i}=db(e),{page:c,itemsPerPage:A}=I4(e),{disableSort:d}=Lf(e),{columns:f,headers:m,sortFunctions:v,sortRawFunctions:p,filterFunctions:g}=R4(e,{groupBy:r,showSelect:Xe(()=>e.showSelect),showExpand:Xe(()=>e.showExpand)}),{items:y}=V4(e,f),w=Xe(()=>e.search),{filteredItems:b}=Th(e,y,w,{transform:Y=>Y.columns,customKeyFilter:g}),{toggleSort:x}=Ab({sortBy:s,multiSort:o,mustSort:i,page:c}),{sortByWithGroups:T,opened:D,extractRows:k,isGroupOpen:S,toggleGroup:E}=ob({groupBy:r,sortBy:s,disableSort:d}),{sortedItems:C}=P4(e,b,T,{transform:Y=>({...Y.raw,...Y.columns}),sortFunctions:v,sortRawFunctions:p}),{flatItems:U}=ib(C,r,D),F=ne(()=>U.value.length),{startIndex:L,stopIndex:H,pageCount:ue,setItemsPerPage:ie}=F4({page:c,itemsPerPage:A,itemsLength:F}),{paginatedItems:Q}=V7({items:U,startIndex:L,stopIndex:H,itemsPerPage:A}),X=ne(()=>k(Q.value)),{isSelected:le,select:Z,selectAll:re,toggleSelect:q,someSelected:P,allSelected:G}=ub(e,{allItems:y,currentPage:X}),{isExpanded:J,toggleExpand:M}=sb(e);lb({page:c,itemsPerPage:A,sortBy:s,groupBy:r,search:w}),wr({VDataTableRows:{hideNoData:Xe(()=>e.hideNoData),noDataText:Xe(()=>e.noDataText),loading:Xe(()=>e.loading),loadingText:Xe(()=>e.loadingText)}});const te=ne(()=>({page:c.value,itemsPerPage:A.value,sortBy:s.value,pageCount:ue.value,toggleSort:x,setItemsPerPage:ie,someSelected:P.value,allSelected:G.value,isSelected:le,select:Z,selectAll:re,toggleSelect:q,isExpanded:J,toggleExpand:M,isGroupOpen:S,toggleGroup:E,items:X.value.map(Y=>Y.raw),internalItems:X.value,groupedItems:Q.value,columns:f.value,headers:m.value}));return St(()=>{const Y=eg.filterProps(e),W=If.filterProps(e),ee=Ff.filterProps(e),ae=Pf.filterProps(e);return l(Pf,Pe({class:["v-data-table",{"v-data-table--show-select":e.showSelect,"v-data-table--loading":e.loading},e.class],style:e.style},ae,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>a.top?.(te.value),default:()=>a.default?a.default(te.value):h(Ke,null,[a.colgroup?.(te.value),!e.hideDefaultHeader&&h("thead",{key:"thead"},[l(If,W,a)]),a.thead?.(te.value),!e.hideDefaultBody&&h("tbody",null,[a["body.prepend"]?.(te.value),a.body?a.body(te.value):l(Ff,Pe(n,ee,{items:Q.value}),a),a["body.append"]?.(te.value)]),a.tbody?.(te.value),a.tfoot?.(te.value)]),bottom:()=>a.bottom?a.bottom(te.value):!e.hideDefaultFooter&&h(Ke,null,[l(Ei,null,null),l(eg,Y,{prepend:a["footer.prepend"]})])})}),{}}}),nXe=lt({...Ma(L4(),["hideDefaultFooter"]),...B4(),...u7(),...kh()},"VDataTableVirtual"),aXe=gt()({name:"VDataTableVirtual",props:nXe(),emits:{"update:modelValue":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const{groupBy:r}=k4(e),{sortBy:s,multiSort:o,mustSort:i}=db(e),{disableSort:c}=Lf(e),{columns:A,headers:d,filterFunctions:f,sortFunctions:m,sortRawFunctions:v}=R4(e,{groupBy:r,showSelect:Xe(()=>e.showSelect),showExpand:Xe(()=>e.showExpand)}),{items:p}=V4(e,A),g=Xe(()=>e.search),{filteredItems:y}=Th(e,p,g,{transform:ae=>ae.columns,customKeyFilter:f}),{toggleSort:w}=Ab({sortBy:s,multiSort:o,mustSort:i}),{sortByWithGroups:b,opened:x,extractRows:T,isGroupOpen:D,toggleGroup:k}=ob({groupBy:r,sortBy:s,disableSort:c}),{sortedItems:S}=P4(e,y,b,{transform:ae=>({...ae.raw,...ae.columns}),sortFunctions:m,sortRawFunctions:v}),{flatItems:E}=ib(S,r,x),C=ne(()=>T(E.value)),{isSelected:U,select:F,selectAll:L,toggleSelect:H,someSelected:ue,allSelected:ie}=ub(e,{allItems:C,currentPage:C}),{isExpanded:Q,toggleExpand:X}=sb(e),{containerRef:le,markerRef:Z,paddingTop:re,paddingBottom:q,computedItems:P,handleItemResize:G,handleScroll:J,handleScrollend:M,calculateVisibleItems:te,scrollToIndex:Y}=c7(e,E),W=ne(()=>P.value.map(ae=>ae.raw));lb({sortBy:s,page:Ht(1),itemsPerPage:Ht(-1),groupBy:r,search:g}),wr({VDataTableRows:{hideNoData:Xe(()=>e.hideNoData),noDataText:Xe(()=>e.noDataText),loading:Xe(()=>e.loading),loadingText:Xe(()=>e.loadingText)}});const ee=ne(()=>({sortBy:s.value,toggleSort:w,someSelected:ue.value,allSelected:ie.value,isSelected:U,select:F,selectAll:L,toggleSelect:H,isExpanded:Q,toggleExpand:X,isGroupOpen:D,toggleGroup:k,items:C.value.map(ae=>ae.raw),internalItems:C.value,groupedItems:E.value,columns:A.value,headers:d.value}));return St(()=>{const ae=If.filterProps(e),oe=Ff.filterProps(e),j=Pf.filterProps(e);return l(Pf,Pe({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},j,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>a.top?.(ee.value),wrapper:()=>h("div",{ref:le,onScrollPassive:J,onScrollend:M,class:"v-table__wrapper",style:{height:Kt(e.height)}},[h("table",null,[a.colgroup?.(ee.value),!e.hideDefaultHeader&&h("thead",{key:"thead"},[l(If,ae,a)]),a.thead?.(ee.value),!e.hideDefaultBody&&h("tbody",{key:"tbody"},[h("tr",{ref:Z,style:{height:Kt(re.value),border:0}},[h("td",{colspan:A.value.length,style:{height:0,border:0}},null)]),a["body.prepend"]?.(ee.value),l(Ff,Pe(n,oe,{items:W.value}),{...a,item:ce=>l(l7,{key:ce.internalItem.index,renderless:!0,"onUpdate:height":de=>G(ce.internalItem.index,de)},{default:de=>{let{itemRef:_e}=de;return a.item?.({...ce,itemRef:_e})??l(N4,Pe(ce.props,{ref:_e,key:ce.internalItem.index,index:ce.internalItem.index}),a)}})}),a["body.append"]?.(ee.value),h("tr",{style:{height:Kt(q.value),border:0}},[h("td",{colspan:A.value.length,style:{height:0,border:0}},null)])]),a.tbody?.(ee.value),a.tfoot?.(ee.value)])]),bottom:()=>a.bottom?.(ee.value)})}),{calculateVisibleItems:te,scrollToIndex:Y}}}),rXe=lt({itemsLength:{type:[Number,String],required:!0},...T4(),...L4(),...D4()},"VDataTableServer"),sXe=gt()({name:"VDataTableServer",props:rXe(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:groupBy":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const{groupBy:r}=k4(e),{sortBy:s,multiSort:o,mustSort:i}=db(e),{page:c,itemsPerPage:A}=I4(e),{disableSort:d}=Lf(e),f=ne(()=>parseInt(e.itemsLength,10)),{columns:m,headers:v}=R4(e,{groupBy:r,showSelect:Xe(()=>e.showSelect),showExpand:Xe(()=>e.showExpand)}),{items:p}=V4(e,m),{toggleSort:g}=Ab({sortBy:s,multiSort:o,mustSort:i,page:c}),{opened:y,isGroupOpen:w,toggleGroup:b,extractRows:x}=ob({groupBy:r,sortBy:s,disableSort:d}),{pageCount:T,setItemsPerPage:D}=F4({page:c,itemsPerPage:A,itemsLength:f}),{flatItems:k}=ib(p,r,y),{isSelected:S,select:E,selectAll:C,toggleSelect:U,someSelected:F,allSelected:L}=ub(e,{allItems:p,currentPage:p}),{isExpanded:H,toggleExpand:ue}=sb(e),ie=ne(()=>x(p.value));lb({page:c,itemsPerPage:A,sortBy:s,groupBy:r,search:Xe(()=>e.search)}),La("v-data-table",{toggleSort:g,sortBy:s}),wr({VDataTableRows:{hideNoData:Xe(()=>e.hideNoData),noDataText:Xe(()=>e.noDataText),loading:Xe(()=>e.loading),loadingText:Xe(()=>e.loadingText)}});const Q=ne(()=>({page:c.value,itemsPerPage:A.value,sortBy:s.value,pageCount:T.value,toggleSort:g,setItemsPerPage:D,someSelected:F.value,allSelected:L.value,isSelected:S,select:E,selectAll:C,toggleSelect:U,isExpanded:H,toggleExpand:ue,isGroupOpen:w,toggleGroup:b,items:ie.value.map(X=>X.raw),internalItems:ie.value,groupedItems:k.value,columns:m.value,headers:v.value}));St(()=>{const X=eg.filterProps(e),le=If.filterProps(e),Z=Ff.filterProps(e),re=Pf.filterProps(e);return l(Pf,Pe({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},re,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>a.top?.(Q.value),default:()=>a.default?a.default(Q.value):h(Ke,null,[a.colgroup?.(Q.value),!e.hideDefaultHeader&&h("thead",{key:"thead",class:"v-data-table__thead",role:"rowgroup"},[l(If,le,a)]),a.thead?.(Q.value),!e.hideDefaultBody&&h("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[a["body.prepend"]?.(Q.value),a.body?a.body(Q.value):l(Ff,Pe(n,Z,{items:k.value}),a),a["body.append"]?.(Q.value)]),a.tbody?.(Q.value),a.tfoot?.(Q.value)]),bottom:()=>a.bottom?a.bottom(Q.value):!e.hideDefaultFooter&&h(Ke,null,[l(Ei,null,null),l(eg,X,{prepend:a["footer.prepend"]})])})})}}),oXe=lt({fluid:{type:Boolean,default:!1},...Jt(),...Mr(),...Nn()},"VContainer"),iXe=gt()({name:"VContainer",props:oXe(),setup(e,t){let{slots:n}=t;const{rtlClasses:a}=Xr(),{dimensionStyles:r}=Or(e);return St(()=>l(e.tag,{class:ct(["v-container",{"v-container--fluid":e.fluid},a.value,e.class]),style:Ut([r.value,e.style])},n)),{}}}),eG=ow.reduce((e,t)=>(e[t]={type:[Boolean,String,Number],default:!1},e),{}),tG=ow.reduce((e,t)=>{const n="offset"+Lu(t);return e[n]={type:[String,Number],default:null},e},{}),nG=ow.reduce((e,t)=>{const n="order"+Lu(t);return e[n]={type:[String,Number],default:null},e},{}),HN={col:Object.keys(eG),offset:Object.keys(tG),order:Object.keys(nG)};function lXe(e,t,n){let a=e;if(!(n==null||n===!1)){if(t){const r=t.replace(e,"");a+=`-${r}`}return e==="col"&&(a="v-"+a),e==="col"&&(n===""||n===!0)||(a+=`-${n}`),a.toLowerCase()}}const uXe=["auto","start","end","center","baseline","stretch"],cXe=lt({cols:{type:[Boolean,String,Number],default:!1},...eG,offset:{type:[String,Number],default:null},...tG,order:{type:[String,Number],default:null},...nG,alignSelf:{type:String,default:null,validator:e=>uXe.includes(e)},...Jt(),...Nn()},"VCol"),dXe=gt()({name:"VCol",props:cXe(),setup(e,t){let{slots:n}=t;const a=ne(()=>{const r=[];let s;for(s in HN)HN[s].forEach(i=>{const c=e[i],A=lXe(s,i,c);A&&r.push(A)});const o=r.some(i=>i.startsWith("v-col-"));return r.push({"v-col":!o||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),r});return()=>Zl(e.tag,{class:[a.value,e.class],style:e.style},n.default?.())}}),M4=["start","end","center"],aG=["space-between","space-around","space-evenly"];function O4(e,t){return ow.reduce((n,a)=>{const r=e+Lu(a);return n[r]=t(),n},{})}const AXe=[...M4,"baseline","stretch"],rG=e=>AXe.includes(e),sG=O4("align",()=>({type:String,default:null,validator:rG})),fXe=[...M4,...aG],oG=e=>fXe.includes(e),iG=O4("justify",()=>({type:String,default:null,validator:oG})),mXe=[...M4,...aG,"stretch"],lG=e=>mXe.includes(e),uG=O4("alignContent",()=>({type:String,default:null,validator:lG})),$N={align:Object.keys(sG),justify:Object.keys(iG),alignContent:Object.keys(uG)},vXe={align:"align",justify:"justify",alignContent:"align-content"};function hXe(e,t,n){let a=vXe[e];if(n!=null){if(t){const r=t.replace(e,"");a+=`-${r}`}return a+=`-${n}`,a.toLowerCase()}}const pXe=lt({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:rG},...sG,justify:{type:String,default:null,validator:oG},...iG,alignContent:{type:String,default:null,validator:lG},...uG,...Jt(),...Nn()},"VRow"),gXe=gt()({name:"VRow",props:pXe(),setup(e,t){let{slots:n}=t;const a=ne(()=>{const r=[];let s;for(s in $N)$N[s].forEach(o=>{const i=e[o],c=hXe(s,o,i);c&&r.push(c)});return r.push({"v-row--no-gutters":e.noGutters,"v-row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),r});return()=>Zl(e.tag,{class:["v-row",a.value,e.class],style:e.style},n.default?.())}}),cG=Oc("v-spacer","div","VSpacer"),dG=lt({active:{type:[String,Array],default:void 0},controlHeight:[Number,String],disabled:{type:[Boolean,String,Array],default:null},nextIcon:{type:cn,default:"$next"},prevIcon:{type:cn,default:"$prev"},modeIcon:{type:cn,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),vB=gt()({name:"VDatePickerControls",props:dG(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,t){let{emit:n}=t;const{t:a}=Oa(),r=ne(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),s=ne(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),o=ne(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),i=ne(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function c(){n("click:prev")}function A(){n("click:next")}function d(){n("click:year")}function f(){n("click:month")}return St(()=>h("div",{class:ct(["v-date-picker-controls"]),style:{"--v-date-picker-controls-height":Kt(e.controlHeight)}},[l(Jn,{class:"v-date-picker-controls__month-btn","data-testid":"month-btn",disabled:r.value,text:e.text,variant:"text",rounded:!0,onClick:f},null),l(Jn,{class:"v-date-picker-controls__mode-btn","data-testid":"year-btn",disabled:s.value,density:"comfortable",icon:e.modeIcon,variant:"text","aria-label":a("$vuetify.datePicker.ariaLabel.selectYear"),onClick:d},null),l(cG,null,null),h("div",{class:"v-date-picker-controls__month"},[l(Jn,{"data-testid":"prev-month",disabled:o.value,density:"comfortable",icon:e.prevIcon,variant:"text","aria-label":a("$vuetify.datePicker.ariaLabel.previousMonth"),onClick:c},null),l(Jn,{"data-testid":"next-month",disabled:i.value,icon:e.nextIcon,density:"comfortable",variant:"text","aria-label":a("$vuetify.datePicker.ariaLabel.nextMonth"),onClick:A},null)])])),{}}}),yXe=lt({appendIcon:cn,color:String,header:String,transition:String,onClick:Ds()},"VDatePickerHeader"),hB=gt()({name:"VDatePickerHeader",props:yXe(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,t){let{emit:n,slots:a}=t;const{backgroundColorClasses:r,backgroundColorStyles:s}=Fa(()=>e.color);function o(){n("click")}function i(){n("click:append")}return St(()=>{const c=!!(a.default||e.header),A=!!(a.append||e.appendIcon);return h("div",{class:ct(["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},r.value]),style:Ut(s.value),onClick:o},[a.prepend&&h("div",{key:"prepend",class:"v-date-picker-header__prepend"},[a.prepend()]),c&&l(ho,{key:"content",name:e.transition},{default:()=>[h("div",{key:e.header,class:"v-date-picker-header__content"},[a.default?.()??e.header])]}),A&&h("div",{class:"v-date-picker-header__append"},[a.append?l(Vn,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>[a.append?.()]}):l(Jn,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:i},null)])])}),{}}}),_Xe=lt({allowedDates:[Array,Function],disabled:{type:Boolean,default:null},displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]},weeksInMonth:{type:String,default:"dynamic"},firstDayOfWeek:{type:[Number,String],default:void 0},weekdayFormat:String},"calendar");function wXe(e){const t=dg(),n=ln(e,"modelValue",[],v=>gr(v).map(p=>t.date(p))),a=ne(()=>e.displayValue?t.date(e.displayValue):n.value.length>0?t.date(n.value[0]):e.min?t.date(e.min):Array.isArray(e.allowedDates)?t.date(e.allowedDates[0]):t.date()),r=ln(e,"year",void 0,v=>{const p=v!=null?Number(v):t.getYear(a.value);return t.startOfYear(t.setYear(t.date(),p))},v=>t.getYear(v)),s=ln(e,"month",void 0,v=>{const p=v!=null?Number(v):t.getMonth(a.value),g=t.setYear(t.startOfMonth(t.date()),t.getYear(r.value));return t.setMonth(g,p)},v=>t.getMonth(v)),o=ne(()=>{const v=t.toJsDate(t.startOfWeek(t.date(),e.firstDayOfWeek)).getDay();return t.getWeekdays(e.firstDayOfWeek,e.weekdayFormat).filter((p,g)=>e.weekdays.includes((g+v)%7))}),i=ne(()=>{const v=t.getWeekArray(s.value,e.firstDayOfWeek),p=v.flat(),g=42;if(e.weeksInMonth==="static"&&p.length<g){const y=p[p.length-1];let w=[];for(let b=1;b<=g-p.length;b++)w.push(t.addDays(y,b)),b%7===0&&(v.push(w),w=[])}return v});function c(v,p){return v.filter(g=>e.weekdays.includes(t.toJsDate(g).getDay())).map((g,y)=>{const w=t.toISO(g),b=!t.isSameMonth(g,s.value),x=t.isSameDay(g,t.startOfMonth(s.value)),T=t.isSameDay(g,t.endOfMonth(s.value)),D=t.isSameDay(g,s.value),k=e.weekdays.length;return{date:g,formatted:t.format(g,"keyboardDate"),isAdjacent:b,isDisabled:m(g),isEnd:T,isHidden:b&&!e.showAdjacentMonths,isSame:D,isSelected:n.value.some(S=>t.isSameDay(g,S)),isStart:x,isToday:t.isSameDay(g,p),isWeekEnd:y%k===k-1,isWeekStart:y%k===0,isoDate:w,localized:t.format(g,"dayOfMonth"),month:t.getMonth(g),year:t.getYear(g)}})}const A=ne(()=>{const v=t.startOfWeek(a.value,e.firstDayOfWeek),p=[];for(let y=0;y<=6;y++)p.push(t.addDays(v,y));const g=t.date();return c(p,g)}),d=ne(()=>{const v=i.value.flat(),p=t.date();return c(v,p)}),f=ne(()=>i.value.map(v=>v.length?t.getWeek(v[0],e.firstDayOfWeek):null));function m(v){if(e.disabled)return!0;const p=t.date(v);return e.min&&t.isBefore(t.endOfDay(p),t.date(e.min))||e.max&&t.isAfter(p,t.date(e.max))?!0:Array.isArray(e.allowedDates)&&e.allowedDates.length>0?!e.allowedDates.some(g=>t.isSameDay(t.date(g),p)):typeof e.allowedDates=="function"?!e.allowedDates(p):!1}return{displayValue:a,daysInMonth:d,daysInWeek:A,genDays:c,model:n,weeksInMonth:i,weekdayLabels:o,weekNumbers:f}}const AG=lt({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...Ma(_Xe(),["displayValue"])},"VDatePickerMonth"),pB=gt()({name:"VDatePickerMonth",props:AG(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const r=V(),{t:s}=Oa(),{daysInMonth:o,model:i,weekNumbers:c,weekdayLabels:A}=wXe(e),d=dg(),f=Ht(),m=Ht(),v=Ht(!1),p=Xe(()=>v.value?e.reverseTransition:e.transition);e.multiple==="range"&&i.value.length>0&&(f.value=i.value[0],i.value.length>1&&(m.value=i.value[i.value.length-1]));const g=ne(()=>{const T=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return i.value.length>=T});je(o,(T,D)=>{D&&(v.value=d.isBefore(T[0].date,D[0].date))});function y(T){const D=d.startOfDay(T);if(i.value.length===0?f.value=void 0:i.value.length===1&&(f.value=i.value[0],m.value=void 0),!f.value)f.value=D,i.value=[f.value];else if(m.value)f.value=T,m.value=void 0,i.value=[f.value];else{if(d.isSameDay(D,f.value)){f.value=void 0,i.value=[];return}else d.isBefore(D,f.value)?(m.value=d.endOfDay(f.value),f.value=D):m.value=d.endOfDay(D);i.value=Gne(d,f.value,m.value)}}function w(T){const D=d.format(T.date,"fullDateWithWeekday"),k=T.isToday?"currentDate":"selectDate";return s(`$vuetify.datePicker.ariaLabel.${k}`,D)}function b(T){const D=i.value.findIndex(k=>d.isSameDay(k,T));if(D===-1)i.value=[...i.value,T];else{const k=[...i.value];k.splice(D,1),i.value=k}}function x(T){e.multiple==="range"?y(T):e.multiple?b(T):i.value=[T]}St(()=>h("div",{class:"v-date-picker-month",style:{"--v-date-picker-days-in-week":e.weekdays.length}},[e.showWeek&&h("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&h("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[O("")]),c.value.map(T=>h("div",{class:ct(["v-date-picker-month__day","v-date-picker-month__day--adjacent"])},[T]))]),l(ho,{name:p.value},{default:()=>[h("div",{ref:r,key:o.value[0].date?.toString(),class:"v-date-picker-month__days"},[!e.hideWeekdays&&A.value.map(T=>h("div",{class:ct(["v-date-picker-month__day","v-date-picker-month__weekday"])},[T])),o.value.map((T,D)=>{const k={props:{class:"v-date-picker-month__day-btn",color:T.isSelected||T.isToday?e.color:void 0,disabled:T.isDisabled,icon:!0,ripple:!1,text:T.localized,variant:T.isSelected?"flat":T.isToday?"outlined":"text","aria-label":w(T),"aria-current":T.isToday?"date":void 0,onClick:()=>x(T.date)},item:T,i:D};return g.value&&!T.isSelected&&(T.isDisabled=!0),h("div",{class:ct(["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":T.isAdjacent,"v-date-picker-month__day--hide-adjacent":T.isHidden,"v-date-picker-month__day--selected":T.isSelected,"v-date-picker-month__day--week-end":T.isWeekEnd,"v-date-picker-month__day--week-start":T.isWeekStart}]),"data-v-date":T.isDisabled?void 0:T.isoDate},[(e.showAdjacentMonths||!T.isAdjacent)&&(a.day?.(k)??l(Jn,k.props,null))])})])]})]))}}),fG=lt({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number,allowedMonths:[Array,Function]},"VDatePickerMonths"),gB=gt()({name:"VDatePickerMonths",props:fG(),emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const r=dg(),s=ln(e,"modelValue"),o=ne(()=>{let c=r.startOfYear(r.date());return e.year&&(c=r.setYear(c,e.year)),xi(12).map(A=>{const d=r.format(c,"monthShort"),f=r.format(c,"month"),m=!!(!i(A)||e.min&&r.isAfter(r.startOfMonth(r.date(e.min)),c)||e.max&&r.isAfter(c,r.startOfMonth(r.date(e.max))));return c=r.getNextMonth(c),{isDisabled:m,text:d,label:f,value:A}})});_r(()=>{s.value=s.value??r.getMonth(r.date())});function i(c){return Array.isArray(e.allowedMonths)&&e.allowedMonths.length?e.allowedMonths.includes(c):typeof e.allowedMonths=="function"?e.allowedMonths(c):!0}return St(()=>h("div",{class:"v-date-picker-months",style:{height:Kt(e.height)}},[h("div",{class:"v-date-picker-months__content"},[o.value.map((c,A)=>{const d={active:s.value===A,ariaLabel:c.label,color:s.value===A?e.color:void 0,disabled:c.isDisabled,rounded:!0,text:c.text,variant:s.value===c.value?"flat":"text",onClick:()=>f(A)};function f(m){if(s.value===m){n("update:modelValue",s.value);return}s.value=m}return a.month?.({month:c,i:A,props:d})??l(Jn,Pe({key:"month"},d),null)})])])),{}}}),mG=lt({color:String,height:[String,Number],min:null,max:null,modelValue:Number,allowedYears:[Array,Function]},"VDatePickerYears"),yB=gt()({name:"VDatePickerYears",props:mG(),directives:{vIntersect:Wl},emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const r=dg(),s=ln(e,"modelValue"),o=ne(()=>{const d=r.getYear(r.date());let f=d-100,m=d+52;e.min&&(f=r.getYear(r.date(e.min))),e.max&&(m=r.getYear(r.date(e.max)));let v=r.startOfYear(r.date());return v=r.setYear(v,f),xi(m-f+1,f).map(p=>{const g=r.format(v,"year");return v=r.setYear(v,r.getYear(v)+1),{text:g,value:p,isDisabled:!A(p)}})});_r(()=>{s.value=s.value??r.getYear(r.date())});const i=B_();function c(){i.el?.focus(),i.el?.scrollIntoView({block:"center"})}function A(d){return Array.isArray(e.allowedYears)&&e.allowedYears.length?e.allowedYears.includes(d):typeof e.allowedYears=="function"?e.allowedYears(d):!0}return St(()=>ma(h("div",{class:"v-date-picker-years",style:{height:Kt(e.height)}},[h("div",{class:"v-date-picker-years__content"},[o.value.map((d,f)=>{const m={ref:s.value===d.value?i:void 0,active:s.value===d.value,color:s.value===d.value?e.color:void 0,rounded:!0,text:d.text,disabled:d.isDisabled,variant:s.value===d.value?"flat":"text",onClick:()=>{if(s.value===d.value){n("update:modelValue",s.value);return}s.value=d.value}};return a.year?.({year:d,i:f,props:m})??l(Jn,Pe({key:"month"},m),null)})])]),[[Wl,{handler:c},null,{once:!0}]])),{}}}),bXe=lt({header:{type:String,default:"$vuetify.datePicker.header"},headerColor:String,...dG(),...AG({weeksInMonth:"static"}),...Ma(fG(),["modelValue"]),...Ma(mG(),["modelValue"]),...rb({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),xXe=gt()({name:"VDatePicker",props:bXe(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const r=dg(),{t:s}=Oa(),{rtlClasses:o}=Xr(),i=ln(e,"modelValue",void 0,le=>gr(le).map(Z=>r.date(Z)),le=>e.multiple?le:le[0]),c=ln(e,"viewMode"),A=ne(()=>{const le=r.date(e.min);return e.min&&r.isValid(le)?le:null}),d=ne(()=>{const le=r.date(e.max);return e.max&&r.isValid(le)?le:null}),f=ne(()=>{const le=r.date();let Z=le;return i.value?.[0]?Z=r.date(i.value[0]):A.value&&r.isBefore(le,A.value)?Z=A.value:d.value&&r.isAfter(le,d.value)&&(Z=d.value),Z&&r.isValid(Z)?Z:le}),m=Xe(()=>e.headerColor??e.color),v=ln(e,"month"),p=ne({get:()=>Number(v.value??r.getMonth(r.startOfMonth(f.value))),set:le=>v.value=le}),g=ln(e,"year"),y=ne({get:()=>Number(g.value??r.getYear(r.startOfYear(r.setMonth(f.value,p.value)))),set:le=>g.value=le}),w=Ht(!1),b=ne(()=>e.multiple&&i.value.length>1?s("$vuetify.datePicker.itemsSelected",i.value.length):i.value[0]&&r.isValid(i.value[0])?r.format(r.date(i.value[0]),"normalDateWithWeekday"):s(e.header)),x=ne(()=>{let le=r.date();return le=r.setDate(le,1),le=r.setMonth(le,p.value),le=r.setYear(le,y.value),r.format(le,"monthAndYear")}),T=Xe(()=>`date-picker-header${w.value?"-reverse":""}-transition`),D=ne(()=>{if(e.disabled)return!0;const le=[];if(c.value!=="month")le.push("prev","next");else{let Z=r.date();if(Z=r.startOfMonth(Z),Z=r.setMonth(Z,p.value),Z=r.setYear(Z,y.value),A.value){const re=r.addDays(r.startOfMonth(Z),-1);r.isAfter(A.value,re)&&le.push("prev")}if(d.value){const re=r.addDays(r.endOfMonth(Z),1);r.isAfter(re,d.value)&&le.push("next")}}return le}),k=ne(()=>e.allowedYears||C),S=ne(()=>e.allowedMonths||U);function E(le,Z){const re=e.allowedDates;if(typeof re!="function")return!0;const q=r.getDiff(Z,le,"days");for(let P=0;P<q;P++)if(re(r.addDays(le,P)))return!0;return!1}function C(le){if(typeof e.allowedDates=="function"){const Z=r.parseISO(`${le}-01-01`);return E(Z,r.endOfYear(Z))}if(Array.isArray(e.allowedDates)&&e.allowedDates.length){for(const Z of e.allowedDates)if(r.getYear(r.date(Z))===le)return!0;return!1}return!0}function U(le){if(typeof e.allowedDates=="function"){const Z=String(le+1).padStart(2,"0"),re=r.parseISO(`${y.value}-${Z}-01`);return E(re,r.endOfMonth(re))}if(Array.isArray(e.allowedDates)&&e.allowedDates.length){for(const Z of e.allowedDates)if(r.getYear(r.date(Z))===y.value&&r.getMonth(r.date(Z))===le)return!0;return!1}return!0}function F(){p.value<11?p.value++:(y.value++,p.value=0,X()),Q()}function L(){p.value>0?p.value--:(y.value--,p.value=11,X()),Q()}function H(){c.value="month"}function ue(){c.value=c.value==="months"?"month":"months"}function ie(){c.value=c.value==="year"?"month":"year"}function Q(){c.value==="months"&&ue()}function X(){c.value==="year"&&ie()}return je(i,(le,Z)=>{const re=gr(Z),q=gr(le);if(!q.length)return;const P=r.date(re[re.length-1]),G=r.date(q[q.length-1]),J=r.getMonth(G),M=r.getYear(G);J!==p.value&&(p.value=J,Q()),M!==y.value&&(y.value=M,X()),w.value=r.isBefore(P,G)}),St(()=>{const le=Yv.filterProps(e),Z=vB.filterProps(e),re=hB.filterProps(e),q=pB.filterProps(e),P=Ma(gB.filterProps(e),["modelValue"]),G=Ma(yB.filterProps(e),["modelValue"]),J={color:m.value,header:b.value,transition:T.value};return l(Yv,Pe(le,{color:m.value,class:["v-date-picker",`v-date-picker--${c.value}`,{"v-date-picker--show-week":e.showWeek},o.value,e.class],style:e.style}),{title:()=>a.title?.()??h("div",{class:"v-date-picker__title"},[s(e.title)]),header:()=>a.header?l(Vn,{defaults:{VDatePickerHeader:{...J}}},{default:()=>[a.header?.(J)]}):l(hB,Pe({key:"header"},re,J,{onClick:c.value!=="month"?H:void 0}),{prepend:a.prepend,append:a.append}),default:()=>h(Ke,null,[l(vB,Pe(Z,{disabled:D.value,text:x.value,"onClick:next":F,"onClick:prev":L,"onClick:month":ue,"onClick:year":ie}),null),l(K0,{hideOnLeave:!0},{default:()=>[c.value==="months"?l(gB,Pe({key:"date-picker-months"},P,{modelValue:p.value,"onUpdate:modelValue":[M=>p.value=M,Q],min:A.value,max:d.value,year:y.value,allowedMonths:S.value}),{month:a.month}):c.value==="year"?l(yB,Pe({key:"date-picker-years"},G,{modelValue:y.value,"onUpdate:modelValue":[M=>y.value=M,X],min:A.value,max:d.value,allowedYears:k.value}),{year:a.year}):l(pB,Pe({key:"date-picker-month"},q,{modelValue:i.value,"onUpdate:modelValue":M=>i.value=M,month:p.value,"onUpdate:month":[M=>p.value=M,Q],year:y.value,"onUpdate:year":[M=>y.value=M,X],min:A.value,max:d.value}),{day:a.day})]})]),actions:a.actions})}),{}}}),CXe=lt({actionText:String,bgColor:String,color:String,icon:cn,image:String,justify:{type:String,default:"center"},headline:String,title:String,text:String,textWidth:{type:[Number,String],default:500},href:String,to:String,...Jt(),...Mr(),...Ku({size:void 0}),...ua()},"VEmptyState"),SXe=gt()({name:"VEmptyState",props:CXe(),emits:{"click:action":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const{themeClasses:r}=ka(e),{backgroundColorClasses:s,backgroundColorStyles:o}=Fa(()=>e.bgColor),{dimensionStyles:i}=Or(e),{displayClasses:c}=rl();function A(d){n("click:action",d)}return St(()=>{const d=!!(a.actions||e.actionText),f=!!(a.headline||e.headline),m=!!(a.title||e.title),v=!!(a.text||e.text),p=!!(a.media||e.image||e.icon),g=e.size||(e.image?200:96);return h("div",{class:ct(["v-empty-state",{[`v-empty-state--${e.justify}`]:!0},r.value,s.value,c.value,e.class]),style:Ut([o.value,i.value,e.style])},[p&&h("div",{key:"media",class:"v-empty-state__media"},[a.media?l(Vn,{key:"media-defaults",defaults:{VImg:{src:e.image,height:g},VIcon:{size:g,icon:e.icon}}},{default:()=>[a.media()]}):h(Ke,null,[e.image?l(Nc,{key:"image",src:e.image,height:g},null):e.icon?l(Ea,{key:"icon",color:e.color,size:g,icon:e.icon},null):void 0])]),f&&h("div",{key:"headline",class:"v-empty-state__headline"},[a.headline?.()??e.headline]),m&&h("div",{key:"title",class:"v-empty-state__title"},[a.title?.()??e.title]),v&&h("div",{key:"text",class:"v-empty-state__text",style:{maxWidth:Kt(e.textWidth)}},[a.text?.()??e.text]),a.default&&h("div",{key:"content",class:"v-empty-state__content"},[a.default()]),d&&h("div",{key:"actions",class:"v-empty-state__actions"},[l(Vn,{defaults:{VBtn:{class:"v-empty-state__action-btn",color:e.color??"surface-variant",href:e.href,text:e.actionText,to:e.to}}},{default:()=>[a.actions?.({props:{onClick:A}})??l(Jn,{onClick:A},null)]})])])}),{}}}),tg=Symbol.for("vuetify:v-expansion-panel"),vG=lt({...Jt(),..._4()},"VExpansionPanelText"),_B=gt()({name:"VExpansionPanelText",props:vG(),setup(e,t){let{slots:n}=t;const a=Tn(tg);if(!a)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:r,onAfterLeave:s}=w4(e,a.isSelected);return St(()=>l(qw,{onAfterLeave:s},{default:()=>[ma(h("div",{class:ct(["v-expansion-panel-text",e.class]),style:Ut(e.style)},[n.default&&r.value&&h("div",{class:"v-expansion-panel-text__wrapper"},[n.default?.()])]),[[ii,a.isSelected.value]])]})),{}}}),hG=lt({color:String,expandIcon:{type:cn,default:"$expand"},collapseIcon:{type:cn,default:"$collapse"},hideActions:Boolean,focusable:Boolean,static:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...Jt(),...Mr()},"VExpansionPanelTitle"),wB=gt()({name:"VExpansionPanelTitle",directives:{vRipple:xo},props:hG(),setup(e,t){let{slots:n}=t;const a=Tn(tg);if(!a)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:r,backgroundColorStyles:s}=Fa(()=>e.color),{dimensionStyles:o}=Or(e),i=ne(()=>({collapseIcon:e.collapseIcon,disabled:a.disabled.value,expanded:a.isSelected.value,expandIcon:e.expandIcon,readonly:e.readonly})),c=Xe(()=>a.isSelected.value?e.collapseIcon:e.expandIcon);return St(()=>ma(h("button",{class:ct(["v-expansion-panel-title",{"v-expansion-panel-title--active":a.isSelected.value,"v-expansion-panel-title--focusable":e.focusable,"v-expansion-panel-title--static":e.static},r.value,e.class]),style:Ut([s.value,o.value,e.style]),type:"button",tabindex:a.disabled.value?-1:void 0,disabled:a.disabled.value,"aria-expanded":a.isSelected.value,onClick:e.readonly?void 0:a.toggle},[h("span",{class:"v-expansion-panel-title__overlay"},null),n.default?.(i.value),!e.hideActions&&l(Vn,{defaults:{VIcon:{icon:c.value}}},{default:()=>[h("span",{class:"v-expansion-panel-title__icon"},[n.actions?.(i.value)??l(Ea,null,null)])]})]),[[xo,e.ripple]])),{}}}),pG=lt({title:String,text:String,bgColor:String,...Jr(),...tm(),...lr(),...Nn(),...hG(),...vG()},"VExpansionPanel"),EXe=gt()({name:"VExpansionPanel",props:pG(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const a=nm(e,tg),{backgroundColorClasses:r,backgroundColorStyles:s}=Fa(()=>e.bgColor),{elevationClasses:o}=xs(e),{roundedClasses:i}=xr(e),c=Xe(()=>a?.disabled.value||e.disabled),A=ne(()=>a.group.items.value.reduce((m,v,p)=>(a.group.selected.value.includes(v.id)&&m.push(p),m),[])),d=ne(()=>{const m=a.group.items.value.findIndex(v=>v.id===a.id);return!a.isSelected.value&&A.value.some(v=>v-m===1)}),f=ne(()=>{const m=a.group.items.value.findIndex(v=>v.id===a.id);return!a.isSelected.value&&A.value.some(v=>v-m===-1)});return La(tg,a),St(()=>{const m=!!(n.text||e.text),v=!!(n.title||e.title),p=wB.filterProps(e),g=_B.filterProps(e);return l(e.tag,{class:ct(["v-expansion-panel",{"v-expansion-panel--active":a.isSelected.value,"v-expansion-panel--before-active":d.value,"v-expansion-panel--after-active":f.value,"v-expansion-panel--disabled":c.value},i.value,r.value,e.class]),style:Ut([s.value,e.style])},{default:()=>[h("div",{class:ct(["v-expansion-panel__shadow",...o.value])},null),l(Vn,{defaults:{VExpansionPanelTitle:{...p},VExpansionPanelText:{...g}}},{default:()=>[v&&l(wB,{key:"title"},{default:()=>[n.title?n.title():e.title]}),m&&l(_B,{key:"text"},{default:()=>[n.text?n.text():e.text]}),n.default?.()]})]})}),{groupItem:a}}}),BXe=["default","accordion","inset","popout"],kXe=lt({flat:Boolean,...em(),...Mc(pG(),["bgColor","collapseIcon","color","eager","elevation","expandIcon","focusable","hideActions","readonly","ripple","rounded","tile","static"]),...ua(),...Jt(),...Nn(),variant:{type:String,default:"default",validator:e=>BXe.includes(e)}},"VExpansionPanels"),TXe=gt()({name:"VExpansionPanels",props:kXe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{next:a,prev:r}=oA(e,tg),{themeClasses:s}=ka(e),o=Xe(()=>e.variant&&`v-expansion-panels--variant-${e.variant}`);return wr({VExpansionPanel:{bgColor:Xe(()=>e.bgColor),collapseIcon:Xe(()=>e.collapseIcon),color:Xe(()=>e.color),eager:Xe(()=>e.eager),elevation:Xe(()=>e.elevation),expandIcon:Xe(()=>e.expandIcon),focusable:Xe(()=>e.focusable),hideActions:Xe(()=>e.hideActions),readonly:Xe(()=>e.readonly),ripple:Xe(()=>e.ripple),rounded:Xe(()=>e.rounded),static:Xe(()=>e.static)}}),St(()=>l(e.tag,{class:ct(["v-expansion-panels",{"v-expansion-panels--flat":e.flat,"v-expansion-panels--tile":e.tile},s.value,o.value,e.class]),style:Ut(e.style)},{default:()=>[n.default?.({prev:r,next:a})]})),{next:a,prev:r}}}),IXe=lt({app:Boolean,appear:Boolean,extended:Boolean,layout:Boolean,offset:Boolean,modelValue:{type:Boolean,default:!0},...Ma(Jw({active:!0}),["location"]),...Hf(),...Qc(),...ru({transition:"fab-transition"})},"VFab"),FXe=gt()({name:"VFab",props:IXe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=ln(e,"modelValue"),r=Ht(56),s=V(),{resizeRef:o}=$l(f=>{f.length&&(r.value=f[0].target.clientHeight)}),i=Xe(()=>e.app||e.absolute),c=ne(()=>i.value?e.location?.split(" ").shift()??"bottom":!1),A=ne(()=>i.value?e.location?.split(" ")[1]??"end":!1);go(()=>e.app,()=>{const f=$f({id:e.name,order:ne(()=>parseInt(e.order,10)),position:c,layoutSize:ne(()=>e.layout?r.value+24:0),elementSize:ne(()=>r.value+24),active:ne(()=>e.app&&a.value),absolute:Xe(()=>e.absolute)});_r(()=>{s.value=f.layoutItemStyles.value})});const d=V();return St(()=>{const f=Jn.filterProps(e);return h("div",{ref:d,class:ct(["v-fab",{"v-fab--absolute":e.absolute,"v-fab--app":!!e.app,"v-fab--extended":e.extended,"v-fab--offset":e.offset,[`v-fab--${c.value}`]:i.value,[`v-fab--${A.value}`]:i.value},e.class]),style:Ut([e.app?{...s.value}:{height:e.absolute?"100%":"inherit"},e.style])},[h("div",{class:"v-fab__container"},[l(ho,{appear:e.appear,transition:e.transition},{default:()=>[ma(l(Jn,Pe({ref:o},f,{active:void 0,location:void 0}),n),[[ii,e.active]])]})])])}),{}}});function PXe(){function e(n){return[...n.dataTransfer?.items??[]].filter(r=>r.kind==="file").map(r=>r.webkitGetAsEntry()).filter(Boolean).length>0||[...n.dataTransfer?.files??[]].length>0}async function t(n){const a=[],r=[...n.dataTransfer?.items??[]].filter(s=>s.kind==="file").map(s=>s.webkitGetAsEntry()).filter(Boolean);if(r.length)for(const s of r){const o=await gG(s,yG(".",s));a.push(...o.map(i=>i.file))}else a.push(...n.dataTransfer?.files??[]);return a}return{handleDrop:t,hasFilesOrFolders:e}}function gG(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new Promise((n,a)=>{e.isFile?e.file(s=>n([{file:s,path:t}]),a):e.isDirectory&&e.createReader().readEntries(async s=>{const o=[];for(const i of s)o.push(...await gG(i,yG(t,i)));n(o)})})}function yG(e,t){return t.isDirectory?`${e}/${t.name}`:e}const DXe=lt({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},...zc({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>gr(e).every(t=>t!=null&&typeof t=="object")},...Hg({clearable:!0})},"VFileInput"),UXe=gt()({name:"VFileInput",inheritAttrs:!1,props:DXe(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:r}=t;const{t:s}=Oa(),o=ln(e,"modelValue",e.modelValue,ie=>gr(ie),ie=>!e.multiple&&Array.isArray(ie)?ie[0]:ie),{isFocused:i,focus:c,blur:A}=Gc(e),d=ne(()=>typeof e.showSize!="boolean"?e.showSize:void 0),f=ne(()=>(o.value??[]).reduce((ie,Q)=>{let{size:X=0}=Q;return ie+X},0)),m=ne(()=>ZP(f.value,d.value)),v=ne(()=>(o.value??[]).map(ie=>{const{name:Q="",size:X=0}=ie;return e.showSize?`${Q} (${ZP(X,d.value)})`:Q})),p=ne(()=>{const ie=o.value?.length??0;return e.showSize?s(e.counterSizeString,ie,m.value):s(e.counterString,ie)}),g=V(),y=V(),w=V(),b=Xe(()=>i.value||e.active),x=ne(()=>["plain","underlined"].includes(e.variant)),T=Ht(!1),{handleDrop:D,hasFilesOrFolders:k}=PXe();function S(){w.value!==document.activeElement&&w.value?.focus(),i.value||c()}function E(ie){w.value?.click()}function C(ie){a("mousedown:control",ie)}function U(ie){w.value?.click(),a("click:control",ie)}function F(ie){ie.stopPropagation(),S(),_n(()=>{o.value=[],rw(e["onClick:clear"],ie)})}function L(ie){ie.preventDefault(),ie.stopImmediatePropagation(),T.value=!0}function H(ie){ie.preventDefault(),T.value=!1}async function ue(ie){if(ie.preventDefault(),ie.stopImmediatePropagation(),T.value=!1,!w.value||!k(ie))return;const Q=new DataTransfer;for(const X of await D(ie))Q.items.add(X);w.value.files=Q.files,w.value.dispatchEvent(new Event("change",{bubbles:!0}))}return je(o,ie=>{(!Array.isArray(ie)||!ie.length)&&w.value&&(w.value.value="")}),St(()=>{const ie=!!(r.counter||e.counter),Q=!!(ie||r.details),[X,le]=tA(n),{modelValue:Z,...re}=qs.filterProps(e),q={...Jd.filterProps(e),"onClick:clear":F};return l(qs,Pe({ref:g,modelValue:e.multiple?o.value:o.value[0],class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--dragging":T.value,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":x.value},e.class],style:e.style,"onClick:prepend":E},X,re,{centerAffix:!x.value,focused:i.value}),{...r,default:P=>{let{id:G,isDisabled:J,isDirty:M,isReadonly:te,isValid:Y,hasDetails:W}=P;return l(Jd,Pe({ref:y,prependIcon:e.prependIcon,onMousedown:C,onClick:U,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},q,{id:G.value,active:b.value||M.value,dirty:M.value||e.dirty,disabled:J.value,focused:i.value,details:W.value,error:Y.value===!1,onDragover:L,onDrop:ue}),{...r,default:ee=>{let{props:{class:ae,...oe}}=ee;return h(Ke,null,[h("input",Pe({ref:w,type:"file",readonly:te.value,disabled:J.value,multiple:e.multiple,name:e.name,onClick:j=>{j.stopPropagation(),te.value&&j.preventDefault(),S()},onChange:j=>{if(!j.target)return;const ce=j.target;o.value=[...ce.files??[]]},onDragleave:H,onFocus:S,onBlur:A},oe,le),null),h("div",{class:ct(ae)},[!!o.value?.length&&!e.hideInput&&(r.selection?r.selection({fileNames:v.value,totalBytes:f.value,totalBytesReadable:m.value}):e.chips?v.value.map(j=>l(Eh,{key:j,size:"small",text:j},null)):v.value.join(", "))])])}})},details:Q?P=>h(Ke,null,[r.details?.(P),ie&&h(Ke,null,[h("span",null,null),l(eb,{active:!!o.value?.length,value:p.value,disabled:e.disabled},r.counter)])]):void 0})}),Cs({},g,y,w)}}),RXe=lt({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...Ko(),...Jt(),...Jr(),...Hf(),...lr(),...Nn({tag:"footer"}),...ua()},"VFooter"),NXe=gt()({name:"VFooter",props:RXe(),setup(e,t){let{slots:n}=t;const a=V(),{themeClasses:r}=ka(e),{backgroundColorClasses:s,backgroundColorStyles:o}=Fa(()=>e.color),{borderClasses:i}=ci(e),{elevationClasses:c}=xs(e),{roundedClasses:A}=xr(e),d=Ht(32),{resizeRef:f}=$l(v=>{v.length&&(d.value=v[0].target.clientHeight)}),m=ne(()=>e.height==="auto"?d.value:parseInt(e.height,10));return go(()=>e.app,()=>{const v=$f({id:e.name,order:ne(()=>parseInt(e.order,10)),position:Xe(()=>"bottom"),layoutSize:m,elementSize:ne(()=>e.height==="auto"?void 0:m.value),active:Xe(()=>e.app),absolute:Xe(()=>e.absolute)});_r(()=>{a.value=v.layoutItemStyles.value})}),St(()=>l(e.tag,{ref:f,class:ct(["v-footer",r.value,s.value,i.value,c.value,A.value,e.class]),style:Ut([o.value,e.app?a.value:{height:Kt(e.height)},e.style])},n)),{}}}),VXe=lt({...Jt(),...WWe()},"VForm"),LXe=gt()({name:"VForm",props:VXe(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,t){let{slots:n,emit:a}=t;const r=jWe(e),s=V();function o(c){c.preventDefault(),r.reset()}function i(c){const A=c,d=r.validate();A.then=d.then.bind(d),A.catch=d.catch.bind(d),A.finally=d.finally.bind(d),a("submit",A),A.defaultPrevented||d.then(f=>{let{valid:m}=f;m&&s.value?.submit()}),A.preventDefault()}return St(()=>h("form",{ref:s,class:ct(["v-form",e.class]),style:Ut(e.style),novalidate:!0,onReset:o,onSubmit:i},[n.default?.(r)])),Cs(r,s)}}),MXe=lt({disabled:Boolean,modelValue:{type:Boolean,default:null},...g4()},"VHover"),OXe=gt()({name:"VHover",props:MXe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=ln(e,"modelValue"),{runOpenDelay:r,runCloseDelay:s}=y4(e,o=>!e.disabled&&(a.value=o));return()=>n.default?.({isHovering:a.value,props:{onMouseenter:r,onMouseleave:s}})}}),HXe=lt({color:String,direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},side:{type:String,default:"end",validator:e=>["start","end","both"].includes(e)},mode:{type:String,default:"intersect",validator:e=>["intersect","manual"].includes(e)},margin:[Number,String],loadMoreText:{type:String,default:"$vuetify.infiniteScroll.loadMore"},emptyText:{type:String,default:"$vuetify.infiniteScroll.empty"},...Mr(),...Nn()},"VInfiniteScroll"),QN=Fi({name:"VInfiniteScrollIntersect",props:{side:{type:String,required:!0},rootMargin:String},emits:{intersect:(e,t)=>!0},setup(e,t){let{emit:n}=t;const{intersectionRef:a,isIntersecting:r}=Dg();return je(r,async s=>{n("intersect",e.side,s)}),St(()=>h("div",{class:"v-infinite-scroll-intersect",style:{"--v-infinite-margin-size":e.rootMargin},ref:a},[O("")])),{}}}),$Xe=gt()({name:"VInfiniteScroll",props:HXe(),emits:{load:e=>!0},setup(e,t){let{slots:n,emit:a}=t;const r=V(),s=Ht("ok"),o=Ht("ok"),i=ne(()=>Kt(e.margin)),c=Ht(!1);function A(k){if(!r.value)return;const S=e.direction==="vertical"?"scrollTop":"scrollLeft";r.value[S]=k}function d(){if(!r.value)return 0;const k=e.direction==="vertical"?"scrollTop":"scrollLeft";return r.value[k]}function f(){if(!r.value)return 0;const k=e.direction==="vertical"?"scrollHeight":"scrollWidth";return r.value[k]}function m(){if(!r.value)return 0;const k=e.direction==="vertical"?"clientHeight":"clientWidth";return r.value[k]}dn(()=>{r.value&&(e.side==="start"?A(f()):e.side==="both"&&A(f()/2-m()/2))});function v(k,S){k==="start"?s.value=S:k==="end"?o.value=S:k==="both"&&(s.value=S,o.value=S)}function p(k){return k==="start"?s.value:o.value}let g=0;function y(k,S){c.value=S,c.value&&w(k)}function w(k){if(e.mode!=="manual"&&!c.value)return;const S=p(k);if(!r.value||["empty","loading"].includes(S))return;g=f(),v(k,"loading");function E(C){v(k,C),_n(()=>{C==="empty"||C==="error"||(C==="ok"&&k==="start"&&A(f()-g+d()),e.mode!=="manual"&&_n(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{w(k)})})})}))})}a("load",{side:k,done:E})}const{t:b}=Oa();function x(k,S){if(e.side!==k&&e.side!=="both")return;const E=()=>w(k),C={side:k,props:{onClick:E,color:e.color}};return S==="error"?n.error?.(C):S==="empty"?n.empty?.(C)??h("div",null,[b(e.emptyText)]):e.mode==="manual"?S==="loading"?n.loading?.(C)??l(Bf,{indeterminate:!0,color:e.color},null):n["load-more"]?.(C)??l(Jn,{variant:"outlined",color:e.color,onClick:E},{default:()=>[b(e.loadMoreText)]}):n.loading?.(C)??l(Bf,{indeterminate:!0,color:e.color},null)}const{dimensionStyles:T}=Or(e);St(()=>{const k=e.tag,S=e.side==="start"||e.side==="both",E=e.side==="end"||e.side==="both",C=e.mode==="intersect";return l(k,{ref:r,class:ct(["v-infinite-scroll",`v-infinite-scroll--${e.direction}`,{"v-infinite-scroll--start":S,"v-infinite-scroll--end":E}]),style:Ut(T.value)},{default:()=>[h("div",{class:"v-infinite-scroll__side"},[x("start",s.value)]),S&&C&&l(QN,{key:"start",side:"start",onIntersect:y,rootMargin:i.value},null),n.default?.(),E&&C&&l(QN,{key:"end",side:"end",onIntersect:y,rootMargin:i.value},null),h("div",{class:"v-infinite-scroll__side"},[x("end",o.value)])]})});function D(k){const S=k??e.side;v(S,"ok"),_n(()=>{A(f()-g+d()),e.mode!=="manual"&&_n(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{S==="both"?(w("start"),w("end")):w(S)})})})})})}return{reset:D}}}),_G=Symbol.for("vuetify:v-item-group"),QXe=lt({...Jt(),...em({selectedClass:"v-item--selected"}),...Nn(),...ua()},"VItemGroup"),GXe=gt()({name:"VItemGroup",props:QXe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:a}=ka(e),{isSelected:r,select:s,next:o,prev:i,selected:c}=oA(e,_G);return()=>l(e.tag,{class:ct(["v-item-group",a.value,e.class]),style:Ut(e.style)},{default:()=>[n.default?.({isSelected:r,select:s,next:o,prev:i,selected:c.value})]})}}),zXe=gt()({name:"VItem",props:tm(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const{isSelected:a,select:r,toggle:s,selectedClass:o,value:i,disabled:c}=nm(e,_G);return()=>n.default?.({isSelected:a.value,selectedClass:o.value,select:r,toggle:s,value:i.value,disabled:c.value})}}),KXe=lt({color:String,...Ko(),...Jt(),...lr(),...Nn({tag:"kbd"}),...ua(),...Jr()},"VKbd"),WXe=gt()({name:"VKbd",props:KXe(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=ka(e),{borderClasses:r}=ci(e),{roundedClasses:s}=xr(e),{backgroundColorClasses:o,backgroundColorStyles:i}=Fa(()=>e.color),{elevationClasses:c}=xs(e);return St(()=>l(e.tag,{class:ct(["v-kbd",a.value,o.value,r.value,c.value,s.value,e.class]),style:Ut([i.value,e.style])},n)),{}}}),jXe=lt({...Jt(),...Mr(),...g6()},"VLayout"),qXe=gt()({name:"VLayout",props:jXe(),setup(e,t){let{slots:n}=t;const{layoutClasses:a,layoutStyles:r,getLayoutItem:s,items:o,layoutRef:i}=_6(e),{dimensionStyles:c}=Or(e);return St(()=>h("div",{ref:i,class:ct([a.value,e.class]),style:Ut([c.value,r.value,e.style])},[n.default?.()])),{getLayoutItem:s,items:o}}}),YXe=lt({position:{type:String,required:!0},size:{type:[Number,String],default:300},modelValue:Boolean,...Jt(),...Hf()},"VLayoutItem"),XXe=gt()({name:"VLayoutItem",props:YXe(),setup(e,t){let{slots:n}=t;const{layoutItemStyles:a}=$f({id:e.name,order:ne(()=>parseInt(e.order,10)),position:Xe(()=>e.position),elementSize:Xe(()=>e.size),layoutSize:Xe(()=>e.size),active:Xe(()=>e.modelValue),absolute:Xe(()=>e.absolute)});return()=>h("div",{class:ct(["v-layout-item",e.class]),style:Ut([a.value,e.style])},[n.default?.()])}}),JXe=lt({modelValue:Boolean,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},...Jt(),...Mr(),...Nn(),...ru({transition:"fade-transition"})},"VLazy"),ZXe=gt()({name:"VLazy",directives:{vIntersect:Wl},props:JXe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{dimensionStyles:a}=Or(e),r=ln(e,"modelValue");function s(o){r.value||(r.value=o)}return St(()=>ma(l(e.tag,{class:ct(["v-lazy",e.class]),style:Ut([a.value,e.style])},{default:()=>[r.value&&l(ho,{transition:e.transition,appear:!0},{default:()=>[n.default?.()]})]}),[[Wl,{handler:s,options:e.options},null]])),{}}}),eJe=lt({locale:String,fallbackLocale:String,messages:Object,rtl:{type:Boolean,default:void 0},...Jt()},"VLocaleProvider"),tJe=gt()({name:"VLocaleProvider",props:eJe(),setup(e,t){let{slots:n}=t;const{rtlClasses:a}=sne(e);return St(()=>h("div",{class:ct(["v-locale-provider",a.value,e.class]),style:Ut(e.style)},[n.default?.()])),{}}}),nJe=lt({scrollable:Boolean,...Jt(),...Mr(),...Nn({tag:"main"})},"VMain"),aJe=gt()({name:"VMain",props:nJe(),setup(e,t){let{slots:n}=t;const{dimensionStyles:a}=Or(e),{mainStyles:r}=y6(),{ssrBootStyles:s}=Jf();return St(()=>l(e.tag,{class:ct(["v-main",{"v-main--scrollable":e.scrollable},e.class]),style:Ut([r.value,s.value,a.value,e.style])},{default:()=>[e.scrollable?h("div",{class:"v-main__scroller"},[n.default?.()]):n.default?.()]})),{}}});function rJe(e){let{rootEl:t,isSticky:n,layoutItemStyles:a}=e;const r=Ht(!1),s=Ht(0),o=ne(()=>{const A=typeof r.value=="boolean"?"top":r.value;return[n.value?{top:"auto",bottom:"auto",height:void 0}:void 0,r.value?{[A]:Kt(s.value)}:{top:a.value.top}]});dn(()=>{je(n,A=>{A?window.addEventListener("scroll",c,{passive:!0}):window.removeEventListener("scroll",c)},{immediate:!0})}),va(()=>{window.removeEventListener("scroll",c)});let i=0;function c(){const A=i>window.scrollY?"up":"down",d=t.value.getBoundingClientRect(),f=parseFloat(a.value.top??0),m=window.scrollY-Math.max(0,s.value-f),v=d.height+Math.max(s.value,f)-window.scrollY-window.innerHeight,p=parseFloat(getComputedStyle(t.value).getPropertyValue("--v-body-scroll-y"))||0;d.height<window.innerHeight-f?(r.value="top",s.value=f):A==="up"&&r.value==="bottom"||A==="down"&&r.value==="top"?(s.value=window.scrollY+d.top-p,r.value=!0):A==="down"&&v<=0?(s.value=0,r.value="bottom"):A==="up"&&m<=0&&(p?r.value!=="top"&&(s.value=-m+p+f,r.value="top"):(s.value=d.top+m,r.value="top")),i=window.scrollY}return{isStuck:r,stickyStyles:o}}const sJe=100,oJe=20;function GN(e){return(e<0?-1:1)*Math.sqrt(Math.abs(e))*1.41421356237}function zN(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let t=0;for(let n=e.length-1;n>0;n--){if(e[n].t===e[n-1].t)continue;const a=GN(t),r=(e[n].d-e[n-1].d)/(e[n].t-e[n-1].t);t+=(r-a)*Math.abs(r),n===e.length-1&&(t*=.5)}return GN(t)*1e3}function iJe(){const e={};function t(r){Array.from(r.changedTouches).forEach(s=>{(e[s.identifier]??(e[s.identifier]=new Q8(oJe))).push([r.timeStamp,s])})}function n(r){Array.from(r.changedTouches).forEach(s=>{delete e[s.identifier]})}function a(r){const s=e[r]?.values().reverse();if(!s)throw new Error(`No samples for touch id ${r}`);const o=s[0],i=[],c=[];for(const A of s){if(o[0]-A[0]>sJe)break;i.push({t:A[0],d:A[1].clientX}),c.push({t:A[0],d:A[1].clientY})}return{x:zN(i),y:zN(c),get direction(){const{x:A,y:d}=this,[f,m]=[Math.abs(A),Math.abs(d)];return f>m&&A>=0?"right":f>m&&A<=0?"left":m>f&&d>=0?"down":m>f&&d<=0?"up":lJe()}}}return{addMovement:t,endTouch:n,getVelocity:a}}function lJe(){throw new Error}function uJe(e){let{el:t,isActive:n,isTemporary:a,width:r,touchless:s,position:o}=e;dn(()=>{window.addEventListener("touchstart",b,{passive:!0}),window.addEventListener("touchmove",x,{passive:!1}),window.addEventListener("touchend",T,{passive:!0})}),va(()=>{window.removeEventListener("touchstart",b),window.removeEventListener("touchmove",x),window.removeEventListener("touchend",T)});const i=ne(()=>["left","right"].includes(o.value)),{addMovement:c,endTouch:A,getVelocity:d}=iJe();let f=!1;const m=Ht(!1),v=Ht(0),p=Ht(0);let g;function y(k,S){return(o.value==="left"?k:o.value==="right"?document.documentElement.clientWidth-k:o.value==="top"?k:o.value==="bottom"?document.documentElement.clientHeight-k:$m())-(S?r.value:0)}function w(k){let S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const E=o.value==="left"?(k-p.value)/r.value:o.value==="right"?(document.documentElement.clientWidth-k-p.value)/r.value:o.value==="top"?(k-p.value)/r.value:o.value==="bottom"?(document.documentElement.clientHeight-k-p.value)/r.value:$m();return S?Ja(E):E}function b(k){if(s.value)return;const S=k.changedTouches[0].clientX,E=k.changedTouches[0].clientY,C=25,U=o.value==="left"?S<C:o.value==="right"?S>document.documentElement.clientWidth-C:o.value==="top"?E<C:o.value==="bottom"?E>document.documentElement.clientHeight-C:$m(),F=n.value&&(o.value==="left"?S<r.value:o.value==="right"?S>document.documentElement.clientWidth-r.value:o.value==="top"?E<r.value:o.value==="bottom"?E>document.documentElement.clientHeight-r.value:$m());(U||F||n.value&&a.value)&&(g=[S,E],p.value=y(i.value?S:E,n.value),v.value=w(i.value?S:E),f=p.value>-20&&p.value<80,A(k),c(k))}function x(k){const S=k.changedTouches[0].clientX,E=k.changedTouches[0].clientY;if(f){if(!k.cancelable){f=!1;return}const U=Math.abs(S-g[0]),F=Math.abs(E-g[1]);(i.value?U>F&&U>3:F>U&&F>3)?(m.value=!0,f=!1):(i.value?F:U)>3&&(f=!1)}if(!m.value)return;k.preventDefault(),c(k);const C=w(i.value?S:E,!1);v.value=Math.max(0,Math.min(1,C)),C>1?p.value=y(i.value?S:E,!0):C<0&&(p.value=y(i.value?S:E,!1))}function T(k){if(f=!1,!m.value)return;c(k),m.value=!1;const S=d(k.changedTouches[0].identifier),E=Math.abs(S.x),C=Math.abs(S.y);(i.value?E>C&&E>400:C>E&&C>3)?n.value=S.direction===({left:"right",right:"left",top:"down",bottom:"up"}[o.value]||$m()):n.value=v.value>.5}const D=ne(()=>m.value?{transform:o.value==="left"?`translateX(calc(-100% + ${v.value*r.value}px))`:o.value==="right"?`translateX(calc(100% - ${v.value*r.value}px))`:o.value==="top"?`translateY(calc(-100% + ${v.value*r.value}px))`:o.value==="bottom"?`translateY(calc(100% - ${v.value*r.value}px))`:$m(),transition:"none"}:void 0);return go(m,()=>{const k=t.value?.style.transform??null,S=t.value?.style.transition??null;_r(()=>{t.value?.style.setProperty("transform",D.value?.transform||"none"),t.value?.style.setProperty("transition",D.value?.transition||null)}),us(()=>{t.value?.style.setProperty("transform",k),t.value?.style.setProperty("transition",S)})}),{isDragging:m,dragProgress:v,dragStyles:D}}function $m(){throw new Error}const cJe=["start","end","left","right","top","bottom"],dJe=lt({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>cJe.includes(e)},sticky:Boolean,...Ko(),...Jt(),...g4(),...Of({mobile:null}),...Jr(),...Hf(),...lr(),...Nn({tag:"nav"}),...ua()},"VNavigationDrawer"),AJe=gt()({name:"VNavigationDrawer",props:dJe(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:r}=t;const{isRtl:s}=Xr(),{themeClasses:o}=ka(e),{borderClasses:i}=ci(e),{backgroundColorClasses:c,backgroundColorStyles:A}=Fa(()=>e.color),{elevationClasses:d}=xs(e),{displayClasses:f,mobile:m}=rl(e),{roundedClasses:v}=xr(e),p=fQ(),g=ln(e,"modelValue",null,re=>!!re),{ssrBootStyles:y}=Jf(),{scopeId:w}=rm(),b=V(),x=Ht(!1),{runOpenDelay:T,runCloseDelay:D}=y4(e,re=>{x.value=re}),k=ne(()=>e.rail&&e.expandOnHover&&x.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),S=ne(()=>ES(e.location,s.value)),E=Xe(()=>e.persistent),C=ne(()=>!e.permanent&&(m.value||e.temporary)),U=ne(()=>e.sticky&&!C.value&&S.value!=="bottom");go(()=>e.expandOnHover&&e.rail!=null,()=>{je(x,re=>a("update:rail",!re))}),go(()=>!e.disableResizeWatcher,()=>{je(C,re=>!e.permanent&&_n(()=>g.value=!re))}),go(()=>!e.disableRouteWatcher&&!!p,()=>{je(p.currentRoute,()=>C.value&&(g.value=!1))}),je(()=>e.permanent,re=>{re&&(g.value=!0)}),e.modelValue==null&&!C.value&&(g.value=e.permanent||!m.value);const{isDragging:F,dragProgress:L}=uJe({el:b,isActive:g,isTemporary:C,width:k,touchless:Xe(()=>e.touchless),position:S}),H=ne(()=>{const re=C.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):k.value;return F.value?re*L.value:re}),{layoutItemStyles:ue,layoutItemScrimStyles:ie}=$f({id:e.name,order:ne(()=>parseInt(e.order,10)),position:S,layoutSize:H,elementSize:k,active:th(g),disableTransitions:Xe(()=>F.value),absolute:ne(()=>e.absolute||U.value&&typeof Q.value!="string")}),{isStuck:Q,stickyStyles:X}=rJe({rootEl:b,isSticky:U,layoutItemStyles:ue}),le=Fa(()=>typeof e.scrim=="string"?e.scrim:null),Z=ne(()=>({...F.value?{opacity:L.value*.2,transition:"none"}:void 0,...ie.value}));return wr({VList:{bgColor:"transparent"}}),St(()=>{const re=r.image||e.image;return h(Ke,null,[l(e.tag,Pe({ref:b,onMouseenter:T,onMouseleave:D,class:["v-navigation-drawer",`v-navigation-drawer--${S.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":x.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":C.value,"v-navigation-drawer--persistent":E.value,"v-navigation-drawer--active":g.value,"v-navigation-drawer--sticky":U.value},o.value,c.value,i.value,f.value,d.value,v.value,e.class],style:[A.value,ue.value,y.value,X.value,e.style]},w,n),{default:()=>[re&&h("div",{key:"image",class:"v-navigation-drawer__img"},[r.image?l(Vn,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},r.image):l(Nc,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),r.prepend&&h("div",{class:"v-navigation-drawer__prepend"},[r.prepend?.()]),h("div",{class:"v-navigation-drawer__content"},[r.default?.()]),r.append&&h("div",{class:"v-navigation-drawer__append"},[r.append?.()])]}),l(Md,{name:"fade-transition"},{default:()=>[C.value&&(F.value||g.value)&&!!e.scrim&&h("div",Pe({class:["v-navigation-drawer__scrim",le.backgroundColorClasses.value],style:[Z.value,le.backgroundColorStyles.value],onClick:()=>{E.value||(g.value=!1)}},w),null)]})])}),{isStuck:Q}}}),fJe=Fi({name:"VNoSsr",setup(e,t){let{slots:n}=t;const a=a7();return()=>a.value&&n.default?.()}}),mJe=50,vJe=500;function hJe(e){let{toggleUpDown:t}=e,n=-1,a=-1;us(s);function r(i){s(),o(i),window.addEventListener("pointerup",s),document.addEventListener("blur",s),n=window.setTimeout(()=>{a=window.setInterval(()=>o(i),mJe)},vJe)}function s(){window.clearTimeout(n),window.clearInterval(a),window.removeEventListener("pointerup",s),document.removeEventListener("blur",s)}function o(i){t(i==="up")}return{holdStart:r,holdStop:s}}const pJe=lt({controlVariant:{type:String,default:"default"},inset:Boolean,hideInput:Boolean,modelValue:{type:Number,default:null},min:{type:Number,default:Number.MIN_SAFE_INTEGER},max:{type:Number,default:Number.MAX_SAFE_INTEGER},step:{type:Number,default:1},precision:{type:Number,default:0},minFractionDigits:{type:Number,default:null},decimalSeparator:{type:String,validator:e=>!e||e.length===1},...Ma($g(),["modelValue","validationValue"])},"VNumberInput"),gJe=gt()({name:"VNumberInput",props:{...pJe()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=V(),{holdStart:r,holdStop:s}=hJe({toggleUpDown:C}),o=Mg(e),i=ne(()=>o.isDisabled.value||o.isReadonly.value),c=Ht(e.focused),{decimalSeparator:A}=Oa(),d=ne(()=>e.decimalSeparator?.[0]||A.value);function f(q){let P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.precision,G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const J=P==null?String(q):q.toFixed(P);if(c.value&&G)return Number(J).toString().replace(".",d.value);if(e.minFractionDigits===null||P!==null&&P<e.minFractionDigits)return J.replace(".",d.value);let[M,te]=J.split(".");return te=(te??"").padEnd(e.minFractionDigits,"0").replace(new RegExp(`(?<=\\d{${e.minFractionDigits}})0+$`,"g"),""),[M,te].filter(Boolean).join(d.value)}const m=ln(e,"modelValue",null,q=>q??null,q=>q==null?q??null:Ja(Number(q),e.min,e.max)),v=Ht(null);_r(()=>{c.value&&!i.value||(m.value==null?v.value=null:isNaN(m.value)||(v.value=f(m.value)))});const p=ne({get:()=>v.value,set(q){if(q===null||q===""){m.value=null,v.value=null;return}const P=Number(q.replace(d.value,"."));!isNaN(P)&&P<=e.max&&P>=e.min&&(m.value=P,v.value=q)}}),g=ne(()=>i.value?!1:(m.value??0)+e.step<=e.max),y=ne(()=>i.value?!1:(m.value??0)-e.step>=e.min),w=ne(()=>e.hideInput?"stacked":e.controlVariant),b=Xe(()=>w.value==="split"?"$plus":"$collapse"),x=Xe(()=>w.value==="split"?"$minus":"$expand"),T=Xe(()=>w.value==="split"?"default":"small"),D=Xe(()=>w.value==="stacked"?"auto":"100%"),k={props:{onClick:L,onPointerup:H,onPointerdown:ue,onPointercancel:H}},S={props:{onClick:L,onPointerup:H,onPointerdown:ie,onPointercancel:H}};je(()=>e.precision,()=>X()),je(()=>e.minFractionDigits,()=>X()),dn(()=>{Q()});function E(q){if(q==null)return 0;const P=q.toString(),G=P.indexOf(".");return~G?P.length-G:0}function C(){let q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(i.value)return;if(m.value==null){p.value=f(Ja(0,e.min,e.max));return}let P=Math.max(E(m.value),E(e.step));e.precision!=null&&(P=Math.max(P,e.precision)),q?g.value&&(p.value=f(m.value+e.step,P)):y.value&&(p.value=f(m.value-e.step,P))}function U(q){if(!q.data)return;const P=q.target,{value:G,selectionStart:J,selectionEnd:M}=P??{},te=G?G.slice(0,J)+q.data+G.slice(M):q.data,Y=pte(te,e.precision,d.value);if(new RegExp(`^-?\\d*${k_(d.value)}?\\d*$`).test(te)||(q.preventDefault(),P.value=Y),e.precision!=null){if(te.split(d.value)[1]?.length>e.precision){q.preventDefault(),P.value=Y;const W=(J??0)+q.data.length;P.setSelectionRange(W,W)}e.precision===0&&te.includes(d.value)&&(q.preventDefault(),P.value=Y)}}async function F(q){["Enter","ArrowLeft","ArrowRight","Backspace","Delete","Tab"].includes(q.key)||q.ctrlKey||["ArrowDown","ArrowUp"].includes(q.key)&&(q.preventDefault(),q.stopPropagation(),Q(),await _n(),q.key==="ArrowDown"?C(!1):C())}function L(q){q.stopPropagation()}function H(q){q.currentTarget?.releasePointerCapture(q.pointerId),q.preventDefault(),s()}function ue(q){q.currentTarget?.setPointerCapture(q.pointerId),q.preventDefault(),q.stopPropagation(),r("up")}function ie(q){q.currentTarget?.setPointerCapture(q.pointerId),q.preventDefault(),q.stopPropagation(),r("down")}function Q(){if(i.value||!a.value)return;const q=a.value.value,P=Number(q.replace(d.value,"."));q&&!isNaN(P)?p.value=f(Ja(P,e.min,e.max)):p.value=null}function X(){i.value||(p.value=m.value!==null&&!isNaN(m.value)?f(m.value,e.precision,!1):null)}function le(){if(!i.value){if(m.value===null||isNaN(m.value)){p.value=null;return}p.value=m.value.toString().replace(".",d.value)}}function Z(){le()}function re(){Q()}return St(()=>{const{modelValue:q,...P}=Vc.filterProps(e);function G(){return n.increment?l(Vn,{key:"increment-defaults",defaults:{VBtn:{disabled:!g.value,height:D.value,size:T.value,icon:b.value,variant:"text"}}},{default:()=>[n.increment(k)]}):l(Jn,{"aria-hidden":"true","data-testid":"increment",disabled:!g.value,height:D.value,icon:b.value,key:"increment-btn",onClick:L,onPointerdown:ue,onPointerup:H,onPointercancel:H,size:T.value,variant:"text",tabindex:"-1"},null)}function J(){return n.decrement?l(Vn,{key:"decrement-defaults",defaults:{VBtn:{disabled:!y.value,height:D.value,size:T.value,icon:x.value,variant:"text"}}},{default:()=>[n.decrement(S)]}):l(Jn,{"aria-hidden":"true","data-testid":"decrement",disabled:!y.value,height:D.value,icon:x.value,key:"decrement-btn",onClick:L,onPointerdown:ie,onPointerup:H,onPointercancel:H,size:T.value,variant:"text",tabindex:"-1"},null)}function M(){return h("div",{class:"v-number-input__control"},[J(),l(Ei,{vertical:w.value!=="stacked"},null),G()])}function te(){return!e.hideInput&&!e.inset?l(Ei,{vertical:!0},null):void 0}const Y=w.value==="split"?h("div",{class:"v-number-input__control"},[l(Ei,{vertical:!0},null),G()]):e.reverse||w.value==="hidden"?void 0:h(Ke,null,[te(),M()]),W=n["append-inner"]||Y,ee=w.value==="split"?h("div",{class:"v-number-input__control"},[J(),l(Ei,{vertical:!0},null)]):e.reverse&&w.value!=="hidden"?h(Ke,null,[M(),te()]):void 0,ae=n["prepend-inner"]||ee;return l(Vc,Pe({ref:a},P,{modelValue:p.value,"onUpdate:modelValue":oe=>p.value=oe,focused:c.value,"onUpdate:focused":oe=>c.value=oe,validationValue:m.value,onBeforeinput:U,onFocus:Z,onBlur:re,onKeydown:F,class:["v-number-input",{"v-number-input--default":w.value==="default","v-number-input--hide-input":e.hideInput,"v-number-input--inset":e.inset,"v-number-input--reverse":e.reverse,"v-number-input--split":w.value==="split","v-number-input--stacked":w.value==="stacked"},e.class],style:e.style,inputmode:"decimal"}),{...n,"append-inner":W?function(){for(var oe=arguments.length,j=new Array(oe),ce=0;ce<oe;ce++)j[ce]=arguments[ce];return h(Ke,null,[n["append-inner"]?.(...j),Y])}:void 0,"prepend-inner":ae?function(){for(var oe=arguments.length,j=new Array(oe),ce=0;ce<oe;ce++)j[ce]=arguments[ce];return h(Ke,null,[ee,n["prepend-inner"]?.(...j)])}:void 0})}),Cs({},a)}}),yJe=lt({autofocus:Boolean,divider:String,focusAll:Boolean,label:{type:String,default:"$vuetify.input.otp"},length:{type:[Number,String],default:6},modelValue:{type:[Number,String],default:void 0},placeholder:String,type:{type:String,default:"number"},...Mr(),...Lg(),...Mc(Hg({variant:"outlined"}),["baseColor","bgColor","class","color","disabled","error","loading","rounded","style","theme","variant"])},"VOtpInput"),_Je=gt()({name:"VOtpInput",props:yJe(),emits:{finish:e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:r}=t;const{dimensionStyles:s}=Or(e),{isFocused:o,focus:i,blur:c}=Gc(e),A=ln(e,"modelValue","",U=>U==null?[]:String(U).split(""),U=>U.join("")),{t:d}=Oa(),f=ne(()=>Number(e.length)),m=ne(()=>Array(f.value).fill(0)),v=V(-1),p=V(),g=V([]),y=ne(()=>g.value[v.value]);let w=!1;go(()=>e.autofocus,()=>{const U=Rd();U.run(()=>{const{intersectionRef:F,isIntersecting:L}=Dg();_r(()=>{F.value=g.value[0]}),je(L,H=>{H&&(F.value?.focus(),U.stop())})})});function b(){if(C(y.value.value)){y.value.value="";return}if(w)return;const U=A.value.slice(),F=y.value.value;U[v.value]=F;let L=null;v.value>A.value.length?L=A.value.length+1:v.value+1!==f.value&&(L="next"),A.value=U,L&&nf(p.value,L)}function x(){w=!1,b()}function T(U){const F=A.value.slice(),L=v.value;let H=null;["ArrowLeft","ArrowRight","Backspace","Delete"].includes(U.key)&&(U.preventDefault(),U.key==="ArrowLeft"?H="prev":U.key==="ArrowRight"?H="next":["Backspace","Delete"].includes(U.key)&&(F[v.value]="",A.value=F,v.value>0&&U.key==="Backspace"?H="prev":requestAnimationFrame(()=>{g.value[L]?.select()})),requestAnimationFrame(()=>{H!=null&&nf(p.value,H)}))}function D(U,F){F.preventDefault(),F.stopPropagation();const L=F?.clipboardData?.getData("Text").trim().slice(0,f.value)??"",H=L.length-1===-1?U:L.length-1;C(L)||(A.value=L.split(""),v.value=H)}function k(){A.value=[]}function S(U,F){i(),v.value=F}function E(){c(),v.value=-1}function C(U){return e.type==="number"&&/[^0-9]/g.test(U)}return wr({VField:{color:Xe(()=>e.color),bgColor:Xe(()=>e.color),baseColor:Xe(()=>e.baseColor),disabled:Xe(()=>e.disabled),error:Xe(()=>e.error),variant:Xe(()=>e.variant)}},{scoped:!0}),je(A,U=>{U.length===f.value&&a("finish",U.join(""))},{deep:!0}),je(v,U=>{U<0||_n(()=>{g.value[U]?.select()})}),St(()=>{const[U,F]=tA(n);return h("div",Pe({class:["v-otp-input",{"v-otp-input--divided":!!e.divider},e.class],style:[e.style]},U),[h("div",{ref:p,class:"v-otp-input__content",style:Ut([s.value])},[m.value.map((L,H)=>h(Ke,null,[e.divider&&H!==0&&h("span",{class:"v-otp-input__divider"},[e.divider]),l(Jd,{focused:o.value&&e.focusAll||v.value===H,key:H},{...r,loader:void 0,default:()=>h("input",{ref:ue=>g.value[H]=ue,"aria-label":d(e.label,H+1),autofocus:H===0&&e.autofocus,autocomplete:"one-time-code",class:ct(["v-otp-input__field"]),disabled:e.disabled,inputmode:e.type==="number"?"numeric":"text",min:e.type==="number"?0:void 0,maxlength:H===0?f.value:"1",placeholder:e.placeholder,type:e.type==="number"?"text":e.type,value:A.value[H],onInput:b,onFocus:ue=>S(ue,H),onBlur:E,onKeydown:T,onCompositionstart:()=>w=!0,onCompositionend:x,onPaste:ue=>D(H,ue)},null)})])),h("input",Pe({class:"v-otp-input-input",type:"hidden"},F,{value:A.value.join("")}),null),l(Nu,{contained:!0,contentClass:"v-otp-input__loader",modelValue:!!e.loading,persistent:!0},{default:()=>[r.loader?.()??l(Bf,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,size:"24",width:"2"},null)]}),r.default?.()])])}),{blur:()=>{g.value?.some(U=>U.blur())},focus:()=>{g.value?.[0].focus()},reset:k,isFocused:o}}});function wJe(e){return Math.floor(Math.abs(e))*Math.sign(e)}const bJe=lt({scale:{type:[Number,String],default:.5},...Jt()},"VParallax"),xJe=gt()({name:"VParallax",props:bJe(),setup(e,t){let{slots:n}=t;const{intersectionRef:a,isIntersecting:r}=Dg(),{resizeRef:s,contentRect:o}=$l(),{height:i}=rl(),c=V();_r(()=>{a.value=s.value=c.value?.$el});let A;je(r,v=>{v?(A=gk(a.value),A=A===document.scrollingElement?document:A,A.addEventListener("scroll",m,{passive:!0}),m()):A.removeEventListener("scroll",m)}),va(()=>{A?.removeEventListener("scroll",m)}),je(i,m),je(()=>o.value?.height,m);const d=ne(()=>1-Ja(Number(e.scale)));let f=-1;function m(){r.value&&(cancelAnimationFrame(f),f=requestAnimationFrame(()=>{const v=(c.value?.$el).querySelector(".v-img__img");if(!v)return;const p=A instanceof Document?document.documentElement.clientHeight:A.clientHeight,g=A instanceof Document?window.scrollY:A.scrollTop,y=a.value.getBoundingClientRect().top+g,w=o.value.height,b=y+(w-p)/2,x=wJe((g-b)*d.value),T=Math.max(1,(d.value*(p-w)+w)/w);v.style.setProperty("transform",`translateY(${x}px) scale(${T})`)}))}return St(()=>l(Nc,{class:ct(["v-parallax",{"v-parallax--active":r.value},e.class]),style:Ut(e.style),ref:c,cover:!0,onLoadstart:m,onLoad:m},n)),{}}}),CJe=lt({...Zw({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),SJe=gt()({name:"VRadio",props:CJe(),setup(e,t){let{slots:n}=t;return St(()=>{const a=Xd.filterProps(e);return l(Xd,Pe(a,{class:["v-radio",e.class],style:e.style,type:"radio"}),n)}),{}}}),EJe=lt({height:{type:[Number,String],default:"auto"},...zc(),...Ma(A4(),["multiple"]),trueIcon:{type:cn,default:"$radioOn"},falseIcon:{type:cn,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),BJe=gt()({name:"VRadioGroup",inheritAttrs:!1,props:EJe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const r=zo(),s=ne(()=>e.id||`radio-group-${r}`),o=ln(e,"modelValue"),i=V();return St(()=>{const[c,A]=tA(n),d=qs.filterProps(e),f=Xd.filterProps(e),m=a.label?a.label({label:e.label,props:{for:s.value}}):e.label;return l(qs,Pe({ref:i,class:["v-radio-group",e.class],style:e.style},c,d,{modelValue:o.value,"onUpdate:modelValue":v=>o.value=v,id:s.value}),{...a,default:v=>{let{id:p,messagesId:g,isDisabled:y,isReadonly:w}=v;return h(Ke,null,[m&&l(Sh,{id:p.value},{default:()=>[m]}),l(xQ,Pe(f,{id:p.value,"aria-describedby":g.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:y.value,readonly:w.value,"aria-labelledby":m?p.value:void 0,multiple:!1},A,{modelValue:o.value,"onUpdate:modelValue":b=>o.value=b}),a)])}})}),Cs({},i)}}),kJe=lt({...Lg(),...zc(),...S7(),strict:Boolean,modelValue:{type:Array,default:()=>[0,0]}},"VRangeSlider"),TJe=gt()({name:"VRangeSlider",props:kJe(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,end:e=>!0,start:e=>!0},setup(e,t){let{slots:n,emit:a}=t;const r=V(),s=V(),o=V(),{rtlClasses:i}=Xr();function c(U){if(!r.value||!s.value)return;const F=cB(U,r.value.$el,e.direction),L=cB(U,s.value.$el,e.direction),H=Math.abs(F),ue=Math.abs(L);return H<ue||H===ue&&F<0?r.value.$el:s.value.$el}const A=E7(e),d=ln(e,"modelValue",void 0,U=>U?.length?U.map(F=>A.roundValue(F)):[0,0]),{activeThumbRef:f,hasLabels:m,max:v,min:p,mousePressed:g,onSliderMousedown:y,onSliderTouchstart:w,position:b,trackContainerRef:x,readonly:T}=B7({props:e,steps:A,onSliderStart:()=>{a("start",d.value)},onSliderEnd:U=>{let{value:F}=U;const L=f.value===r.value?.$el?[F,d.value[1]]:[d.value[0],F];!e.strict&&L[0]<L[1]&&(d.value=L),a("end",d.value)},onSliderMove:U=>{let{value:F}=U;const[L,H]=d.value;!e.strict&&L===H&&L!==p.value&&(f.value=F>L?s.value?.$el:r.value?.$el,f.value?.focus()),f.value===r.value?.$el?d.value=[Math.min(F,H),H]:d.value=[L,Math.max(L,F)]},getActiveThumb:c}),{isFocused:D,focus:k,blur:S}=Gc(e),E=ne(()=>b(d.value[0])),C=ne(()=>b(d.value[1]));return St(()=>{const U=qs.filterProps(e),F=!!(e.label||n.label||n.prepend);return l(qs,Pe({class:["v-slider","v-range-slider",{"v-slider--has-labels":!!n["tick-label"]||m.value,"v-slider--focused":D.value,"v-slider--pressed":g.value,"v-slider--disabled":e.disabled},i.value,e.class],style:e.style,ref:o},U,{focused:D.value}),{...n,prepend:F?L=>h(Ke,null,[n.label?.(L)??(e.label?l(Sh,{class:"v-slider__label",text:e.label},null):void 0),n.prepend?.(L)]):void 0,default:L=>{let{id:H,messagesId:ue}=L;return h("div",{class:"v-slider__container",onMousedown:T.value?void 0:y,onTouchstartPassive:T.value?void 0:w},[h("input",{id:`${H.value}_start`,name:e.name||H.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:d.value[0]},null),h("input",{id:`${H.value}_stop`,name:e.name||H.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:d.value[1]},null),l(k7,{ref:x,start:E.value,stop:C.value},{"tick-label":n["tick-label"]}),l(dB,{ref:r,"aria-describedby":ue.value,focused:D&&f.value===r.value?.$el,modelValue:d.value[0],"onUpdate:modelValue":ie=>d.value=[ie,d.value[1]],onFocus:ie=>{k(),f.value=r.value?.$el,v.value!==p.value&&d.value[0]===d.value[1]&&d.value[1]===p.value&&ie.relatedTarget!==s.value?.$el&&(r.value?.$el.blur(),s.value?.$el.focus())},onBlur:()=>{S(),f.value=void 0},min:p.value,max:d.value[1],position:E.value,ripple:e.ripple},{"thumb-label":n["thumb-label"]}),l(dB,{ref:s,"aria-describedby":ue.value,focused:D&&f.value===s.value?.$el,modelValue:d.value[1],"onUpdate:modelValue":ie=>d.value=[d.value[0],ie],onFocus:ie=>{k(),f.value=s.value?.$el,v.value!==p.value&&d.value[0]===d.value[1]&&d.value[0]===v.value&&ie.relatedTarget!==r.value?.$el&&(s.value?.$el.blur(),r.value?.$el.focus())},onBlur:()=>{S(),f.value=void 0},min:d.value[0],max:v.value,position:C.value,ripple:e.ripple},{"thumb-label":n["thumb-label"]})])}})}),Cs({focus:()=>r.value?.$el.focus()},o)}}),IJe=lt({name:String,itemAriaLabel:{type:String,default:"$vuetify.rating.ariaLabel.item"},activeColor:String,color:String,clearable:Boolean,disabled:Boolean,emptyIcon:{type:cn,default:"$ratingEmpty"},fullIcon:{type:cn,default:"$ratingFull"},halfIncrements:Boolean,hover:Boolean,length:{type:[Number,String],default:5},readonly:Boolean,modelValue:{type:[Number,String],default:0},itemLabels:Array,itemLabelPosition:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},ripple:Boolean,...Jt(),...cs(),...Ku(),...Nn(),...ua()},"VRating"),FJe=gt()({name:"VRating",props:IJe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{t:a}=Oa(),{themeClasses:r}=ka(e),s=ln(e,"modelValue"),o=ne(()=>Ja(parseFloat(s.value),0,Number(e.length))),i=ne(()=>xi(Number(e.length),1)),c=ne(()=>i.value.flatMap(y=>e.halfIncrements?[y-.5,y]:[y])),A=Ht(-1),d=ne(()=>c.value.map(y=>{const w=e.hover&&A.value>-1,b=o.value>=y,x=A.value>=y,D=(w?x:b)?e.fullIcon:e.emptyIcon,k=e.activeColor??e.color,S=b||x?k:e.color;return{isFilled:b,isHovered:x,icon:D,color:S}})),f=ne(()=>[0,...c.value].map(y=>{function w(){A.value=y}function b(){A.value=-1}function x(){e.disabled||e.readonly||(s.value=o.value===y&&e.clearable?0:y)}return{onMouseenter:e.hover?w:void 0,onMouseleave:e.hover?b:void 0,onClick:x}})),m=zo(),v=ne(()=>e.name??`v-rating-${m}`);function p(y){let{value:w,index:b,showStar:x=!0}=y;const{onMouseenter:T,onMouseleave:D,onClick:k}=f.value[b+1],S=`${v.value}-${String(w).replace(".","-")}`,E={color:d.value[b]?.color,density:e.density,disabled:e.disabled,icon:d.value[b]?.icon,ripple:e.ripple,size:e.size,variant:"plain"};return h(Ke,null,[h("label",{for:S,class:ct({"v-rating__item--half":e.halfIncrements&&w%1>0,"v-rating__item--full":e.halfIncrements&&w%1===0}),onMouseenter:T,onMouseleave:D,onClick:k},[h("span",{class:"v-rating__hidden"},[a(e.itemAriaLabel,w,e.length)]),x?n.item?n.item({...d.value[b],props:E,value:w,index:b,rating:o.value}):l(Jn,Pe({"aria-label":a(e.itemAriaLabel,w,e.length)},E),null):void 0]),h("input",{class:"v-rating__hidden",name:v.value,id:S,type:"radio",value:w,checked:o.value===w,tabindex:-1,readonly:e.readonly,disabled:e.disabled},null)])}function g(y){return n["item-label"]?n["item-label"](y):y.label?h("span",null,[y.label]):h("span",null,[O("")])}return St(()=>{const y=!!e.itemLabels?.length||n["item-label"];return l(e.tag,{class:ct(["v-rating",{"v-rating--hover":e.hover,"v-rating--readonly":e.readonly},r.value,e.class]),style:Ut(e.style)},{default:()=>[l(p,{value:0,index:-1,showStar:!1},null),i.value.map((w,b)=>h("div",{class:"v-rating__wrapper"},[y&&e.itemLabelPosition==="top"?g({value:w,index:b,label:e.itemLabels?.[b]}):void 0,h("div",{class:"v-rating__item"},[e.halfIncrements?h(Ke,null,[l(p,{value:w-.5,index:b*2},null),l(p,{value:w,index:b*2+1},null)]):l(p,{value:w,index:b},null)]),y&&e.itemLabelPosition==="bottom"?g({value:w,index:b,label:e.itemLabels?.[b]}):void 0]))]})}),{}}}),PJe={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function DJe(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return h("div",{class:ct(["v-skeleton-loader__bone",`v-skeleton-loader__${e}`])},[t])}function KN(e){const[t,n]=e.split("@");return Array.from({length:n}).map(()=>mb(t))}function mb(e){let t=[];if(!e)return t;const n=PJe[e];if(e!==n){if(e.includes(","))return WN(e);if(e.includes("@"))return KN(e);n.includes(",")?t=WN(n):n.includes("@")?t=KN(n):n&&t.push(mb(n))}return[DJe(e,t)]}function WN(e){return e.replace(/\s/g,"").split(",").map(mb)}const UJe=lt({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...Mr(),...Jr(),...ua()},"VSkeletonLoader"),RJe=gt()({name:"VSkeletonLoader",props:UJe(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:a,backgroundColorStyles:r}=Fa(()=>e.color),{dimensionStyles:s}=Or(e),{elevationClasses:o}=xs(e),{themeClasses:i}=ka(e),{t:c}=Oa(),A=ne(()=>mb(gr(e.type).join(",")));return St(()=>{const d=!n.default||e.loading,f=e.boilerplate||!d?{}:{ariaLive:"polite",ariaLabel:c(e.loadingText),role:"alert"};return h("div",Pe({class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":e.boilerplate},i.value,a.value,o.value],style:[r.value,d?s.value:{}]},f),[d?A.value:n.default?.()])}),{}}}),NJe=gt()({name:"VSlideGroupItem",props:tm(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const a=nm(e,PQ);return()=>n.default?.({isSelected:a.isSelected.value,select:a.select,toggle:a.toggle,selectedClass:a.selectedClass.value})}});function VJe(e){const t=Ht(e());let n=-1;function a(){clearInterval(n)}function r(){a(),_n(()=>t.value=e())}function s(o){const i=o?getComputedStyle(o):{transitionDuration:.2},c=parseFloat(i.transitionDuration)*1e3||200;if(a(),t.value<=0)return;const A=performance.now();n=window.setInterval(()=>{const d=performance.now()-A+c;t.value=Math.max(e()-d,0),t.value<=0&&a()},c)}return us(a),{clear:a,time:t,start:s,reset:r}}const wG=lt({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...Qc({location:"bottom"}),...xh(),...lr(),...il(),...ua(),...Ma(Og({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),bB=gt()({name:"VSnackbar",props:wG(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=ln(e,"modelValue"),{positionClasses:r}=Ch(e),{scopeId:s}=rm(),{themeClasses:o}=ka(e),{colorClasses:i,colorStyles:c,variantClasses:A}=Zf(e),{roundedClasses:d}=xr(e),f=VJe(()=>Number(e.timeout)),m=V(),v=V(),p=Ht(!1),g=Ht(0),y=V(),w=Tn(C0,void 0);go(()=>!!w,()=>{const F=y6();_r(()=>{y.value=F.mainStyles.value})}),je(a,x),je(()=>e.timeout,x),dn(()=>{a.value&&x()});let b=-1;function x(){f.reset(),window.clearTimeout(b);const F=Number(e.timeout);if(!a.value||F===-1)return;const L=dk(v.value);f.start(L),b=window.setTimeout(()=>{a.value=!1},F)}function T(){f.reset(),window.clearTimeout(b)}function D(){p.value=!0,T()}function k(){p.value=!1,x()}function S(F){g.value=F.touches[0].clientY}function E(F){Math.abs(g.value-F.changedTouches[0].clientY)>50&&(a.value=!1)}function C(){p.value&&k()}const U=ne(()=>e.location.split(" ").reduce((F,L)=>(F[`v-snackbar--${L}`]=!0,F),{}));return St(()=>{const F=Nu.filterProps(e),L=!!(n.default||n.text||e.text);return l(Nu,Pe({ref:m,class:["v-snackbar",{"v-snackbar--active":a.value,"v-snackbar--multi-line":e.multiLine&&!e.vertical,"v-snackbar--timer":!!e.timer,"v-snackbar--vertical":e.vertical},U.value,r.value,e.class],style:[y.value,e.style]},F,{modelValue:a.value,"onUpdate:modelValue":H=>a.value=H,contentProps:Pe({class:["v-snackbar__wrapper",o.value,i.value,d.value,A.value],style:[c.value],onPointerenter:D,onPointerleave:k},F.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:S,onTouchend:E,onAfterLeave:C},s),{default:()=>[sA(!1,"v-snackbar"),e.timer&&!p.value&&h("div",{key:"timer",class:"v-snackbar__timer"},[l(Yw,{ref:v,color:typeof e.timer=="string"?e.timer:"info",max:e.timeout,modelValue:f.time.value},null)]),L&&h("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[n.text?.()??e.text,n.default?.()]),n.actions&&l(Vn,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[h("div",{class:"v-snackbar__actions"},[n.actions({isActive:a})])]})],activator:n.activator})}),Cs({},m)}}),LJe=lt({closable:[Boolean,String],closeText:{type:String,default:"$vuetify.dismiss"},modelValue:{type:Array,default:()=>[]},...Ma(wG(),["modelValue"])},"VSnackbarQueue"),MJe=gt()({name:"VSnackbarQueue",props:LJe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const{t:r}=Oa(),s=Ht(!1),o=Ht(!1),i=Ht();je(()=>e.modelValue.length,(m,v)=>{!o.value&&m>v&&A()}),je(s,m=>{m&&(o.value=!0)});function c(){e.modelValue.length?A():(i.value=void 0,o.value=!1)}function A(){const[m,...v]=e.modelValue;n("update:modelValue",v),i.value=typeof m=="string"?{text:m}:m,_n(()=>{s.value=!0})}function d(){s.value=!1}const f=ne(()=>({color:typeof e.closable=="string"?e.closable:void 0,text:r(e.closeText)}));St(()=>{const m=!!(e.closable||a.actions),{modelValue:v,...p}=bB.filterProps(e);return h(Ke,null,[o.value&&!!i.value&&(a.default?l(Vn,{defaults:{VSnackbar:i.value}},{default:()=>[a.default({item:i.value})]}):l(bB,Pe(p,i.value,{modelValue:s.value,"onUpdate:modelValue":g=>s.value=g,onAfterLeave:c}),{text:a.text?()=>a.text?.({item:i.value}):void 0,actions:m?()=>h(Ke,null,[a.actions?l(Vn,{defaults:{VBtn:f.value}},{default:()=>[a.actions({item:i.value,props:{onClick:d}})]}):l(Jn,Pe(f.value,{onClick:d}),null)]):void 0}))])})}}),bG=lt({autoDraw:Boolean,autoDrawDuration:[Number,String],autoDrawEasing:{type:String,default:"ease"},color:String,gradient:{type:Array,default:()=>[]},gradientDirection:{type:String,validator:e=>["top","bottom","left","right"].includes(e),default:"top"},height:{type:[String,Number],default:75},labels:{type:Array,default:()=>[]},labelSize:{type:[Number,String],default:7},lineWidth:{type:[String,Number],default:4},id:String,itemValue:{type:String,default:"value"},modelValue:{type:Array,default:()=>[]},min:[String,Number],max:[String,Number],padding:{type:[String,Number],default:8},showLabels:Boolean,smooth:[Boolean,String,Number],width:{type:[Number,String],default:300}},"Line"),xG=lt({autoLineWidth:Boolean,...bG()},"VBarline"),jN=gt()({name:"VBarline",props:xG(),setup(e,t){let{slots:n}=t;const a=zo(),r=ne(()=>e.id||`barline-${a}`),s=ne(()=>Number(e.autoDrawDuration)||500),o=ne(()=>!!(e.showLabels||e.labels.length>0||n?.label)),i=ne(()=>parseFloat(e.lineWidth)||4),c=ne(()=>Math.max(e.modelValue.length*i.value,Number(e.width))),A=ne(()=>({minX:0,maxX:c.value,minY:0,maxY:parseInt(e.height,10)})),d=ne(()=>e.modelValue.map(y=>Vr(y,e.itemValue,y)));function f(y,w){const{minX:b,maxX:x,minY:T,maxY:D}=w,k=y.length;let S=e.max!=null?Number(e.max):Math.max(...y),E=e.min!=null?Number(e.min):Math.min(...y);E>0&&e.min==null&&(E=0),S<0&&e.max==null&&(S=0);const C=x/(k===1?2:k),U=(D-T)/(S-E||1),F=D-Math.abs(E*U);return y.map((L,H)=>{const ue=Math.abs(U*L);return{x:b+H*C,y:F-ue+ +(L<0)*ue,height:ue,value:L}})}const m=ne(()=>{const y=[],w=f(d.value,A.value),b=w.length;for(let x=0;y.length<b;x++){const T=w[x];let D=e.labels[x];D||(D=typeof T=="object"?T.value:T),y.push({x:T.x,value:String(D)})}return y}),v=ne(()=>f(d.value,A.value)),p=ne(()=>v.value.length===1?(A.value.maxX-i.value)/2:(Math.abs(v.value[0].x-v.value[1].x)-i.value)/2),g=ne(()=>typeof e.smooth=="boolean"?e.smooth?2:0:Number(e.smooth));St(()=>{const y=e.gradient.slice().length?e.gradient.slice().reverse():[""];return h("svg",{display:"block"},[h("defs",null,[h("linearGradient",{id:r.value,gradientUnits:"userSpaceOnUse",x1:e.gradientDirection==="left"?"100%":"0",y1:e.gradientDirection==="top"?"100%":"0",x2:e.gradientDirection==="right"?"100%":"0",y2:e.gradientDirection==="bottom"?"100%":"0"},[y.map((w,b)=>h("stop",{offset:b/Math.max(y.length-1,1),"stop-color":w||"currentColor"},null))])]),h("clipPath",{id:`${r.value}-clip`},[v.value.map(w=>h("rect",{x:w.x+p.value,y:w.y,width:i.value,height:w.height,rx:g.value,ry:g.value},[e.autoDraw&&h(Ke,null,[h("animate",{attributeName:"y",from:w.y+w.height,to:w.y,dur:`${s.value}ms`,fill:"freeze"},null),h("animate",{attributeName:"height",from:"0",to:w.height,dur:`${s.value}ms`,fill:"freeze"},null)])]))]),o.value&&h("g",{key:"labels",style:{textAnchor:"middle",dominantBaseline:"mathematical",fill:"currentColor"}},[m.value.map((w,b)=>h("text",{x:w.x+p.value+i.value/2,y:parseInt(e.height,10)-2+(parseInt(e.labelSize,10)||7*.75),"font-size":Number(e.labelSize)||7},[n.label?.({index:b,value:w.value})??w.value]))]),h("g",{"clip-path":`url(#${r.value}-clip)`,fill:`url(#${r.value})`},[h("rect",{x:0,y:0,width:Math.max(e.modelValue.length*i.value,Number(e.width)),height:e.height},null)])])})}});function OJe(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:75;if(e.length===0)return"";const r=e.shift(),s=e[e.length-1];return(n?`M${r.x} ${a-r.x+2} L${r.x} ${r.y}`:`M${r.x} ${r.y}`)+e.map((o,i)=>{const c=e[i+1],A=e[i-1]||r,d=c&&HJe(c,o,A);if(!c||d)return`L${o.x} ${o.y}`;const f=Math.min(qN(A,o),qN(c,o)),v=f/2<t?f/2:t,p=YN(A,o,v),g=YN(c,o,v);return`L${p.x} ${p.y}S${o.x} ${o.y} ${g.x} ${g.y}`}).join("")+(n?`L${s.x} ${a-r.x+2} Z`:"")}function Dy(e){return parseInt(e,10)}function HJe(e,t,n){return Dy(e.x+n.x)===Dy(2*t.x)&&Dy(e.y+n.y)===Dy(2*t.y)}function qN(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function YN(e,t,n){const a={x:e.x-t.x,y:e.y-t.y},r=Math.sqrt(a.x*a.x+a.y*a.y),s={x:a.x/r,y:a.y/r};return{x:t.x+s.x*n,y:t.y+s.y*n}}const CG=lt({fill:Boolean,...bG()},"VTrendline"),XN=gt()({name:"VTrendline",props:CG(),setup(e,t){let{slots:n}=t;const a=zo(),r=ne(()=>e.id||`trendline-${a}`),s=ne(()=>Number(e.autoDrawDuration)||(e.fill?500:2e3)),o=V(0),i=V(null);function c(y,w){const{minX:b,maxX:x,minY:T,maxY:D}=w;y.length===1&&(y=[y[0],y[0]]);const k=y.length,S=e.max!=null?Number(e.max):Math.max(...y),E=e.min!=null?Number(e.min):Math.min(...y),C=(x-b)/(k-1),U=(D-T)/(S-E||1);return y.map((F,L)=>({x:b+L*C,y:D-(F-E)*U,value:F}))}const A=ne(()=>!!(e.showLabels||e.labels.length>0||n?.label)),d=ne(()=>parseFloat(e.lineWidth)||4),f=ne(()=>Number(e.width)),m=ne(()=>{const y=Number(e.padding);return{minX:y,maxX:f.value-y,minY:y,maxY:parseInt(e.height,10)-y}}),v=ne(()=>e.modelValue.map(y=>Vr(y,e.itemValue,y))),p=ne(()=>{const y=[],w=c(v.value,m.value),b=w.length;for(let x=0;y.length<b;x++){const T=w[x];let D=e.labels[x];D||(D=typeof T=="object"?T.value:T),y.push({x:T.x,value:String(D)})}return y});je(()=>e.modelValue,async()=>{if(await _n(),!e.autoDraw||!i.value)return;const y=i.value,w=y.getTotalLength();e.fill?(y.style.transformOrigin="bottom center",y.style.transition="none",y.style.transform="scaleY(0)",y.getBoundingClientRect(),y.style.transition=`transform ${s.value}ms ${e.autoDrawEasing}`,y.style.transform="scaleY(1)"):(y.style.strokeDasharray=`${w}`,y.style.strokeDashoffset=`${w}`,y.getBoundingClientRect(),y.style.transition=`stroke-dashoffset ${s.value}ms ${e.autoDrawEasing}`,y.style.strokeDashoffset="0"),o.value=w},{immediate:!0});function g(y){const w=typeof e.smooth=="boolean"?e.smooth?8:0:Number(e.smooth);return OJe(c(v.value,m.value),w,y,parseInt(e.height,10))}St(()=>{const y=e.gradient.slice().length?e.gradient.slice().reverse():[""];return h("svg",{display:"block","stroke-width":parseFloat(e.lineWidth)??4},[h("defs",null,[h("linearGradient",{id:r.value,gradientUnits:"userSpaceOnUse",x1:e.gradientDirection==="left"?"100%":"0",y1:e.gradientDirection==="top"?"100%":"0",x2:e.gradientDirection==="right"?"100%":"0",y2:e.gradientDirection==="bottom"?"100%":"0"},[y.map((w,b)=>h("stop",{offset:b/Math.max(y.length-1,1),"stop-color":w||"currentColor"},null))])]),A.value&&h("g",{key:"labels",style:{textAnchor:"middle",dominantBaseline:"mathematical",fill:"currentColor"}},[p.value.map((w,b)=>h("text",{x:w.x+d.value/2+d.value/2,y:parseInt(e.height,10)-4+(parseInt(e.labelSize,10)||7*.75),"font-size":Number(e.labelSize)||7},[n.label?.({index:b,value:w.value})??w.value]))]),h("path",{ref:i,d:g(e.fill),fill:e.fill?`url(#${r.value})`:"none",stroke:e.fill?"none":`url(#${r.value})`},null),e.fill&&h("path",{d:g(!1),fill:"none",stroke:e.color??e.gradient?.[0]},null)])})}}),$Je=lt({type:{type:String,default:"trend"},...xG(),...CG()},"VSparkline"),QJe=gt()({name:"VSparkline",props:$Je(),setup(e,t){let{slots:n}=t;const{textColorClasses:a,textColorStyles:r}=Rs(()=>e.color),s=ne(()=>!!(e.showLabels||e.labels.length>0||n?.label)),o=ne(()=>{let i=parseInt(e.height,10);return s.value&&(i+=parseInt(e.labelSize,10)*1.5),i});St(()=>{const i=e.type==="trend"?XN:jN,c=e.type==="trend"?XN.filterProps(e):jN.filterProps(e);return l(i,Pe({key:e.type,class:a.value,style:r.value,viewBox:`0 0 ${e.width} ${parseInt(o.value,10)}`},c),n)})}}),GJe=lt({...Jt(),...o7({offset:8,minWidth:0,openDelay:0,closeDelay:100,location:"top center",transition:"scale-transition"})},"VSpeedDial"),zJe=gt()({name:"VSpeedDial",props:GJe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=ln(e,"modelValue"),r=V(),s=ne(()=>{const[i,c="center"]=e.location?.split(" ")??[];return`${i} ${c}`}),o=ne(()=>({[`v-speed-dial__content--${s.value.replace(" ","-")}`]:!0}));return St(()=>{const i=qv.filterProps(e);return l(qv,Pe(i,{modelValue:a.value,"onUpdate:modelValue":c=>a.value=c,class:e.class,style:e.style,contentClass:["v-speed-dial__content",o.value,e.contentClass],location:s.value,ref:r,transition:"fade-transition"}),{...n,default:c=>l(Vn,{defaults:{VBtn:{size:"small"}}},{default:()=>[l(ho,{appear:!0,group:!0,transition:e.transition},{default:()=>[n.default?.(c)]})]})})}),{}}}),H4=Symbol.for("vuetify:v-stepper"),SG=lt({color:String,disabled:{type:[Boolean,String],default:!1},prevText:{type:String,default:"$vuetify.stepper.prev"},nextText:{type:String,default:"$vuetify.stepper.next"}},"VStepperActions"),EG=gt()({name:"VStepperActions",props:SG(),emits:{"click:prev":()=>!0,"click:next":()=>!0},setup(e,t){let{emit:n,slots:a}=t;const{t:r}=Oa();function s(){n("click:prev")}function o(){n("click:next")}return St(()=>{const i={onClick:s},c={onClick:o};return h("div",{class:"v-stepper-actions"},[l(Vn,{defaults:{VBtn:{disabled:["prev",!0].includes(e.disabled),text:r(e.prevText),variant:"text"}}},{default:()=>[a.prev?.({props:i})??l(Jn,i,null)]}),l(Vn,{defaults:{VBtn:{color:e.color,disabled:["next",!0].includes(e.disabled),text:r(e.nextText),variant:"tonal"}}},{default:()=>[a.next?.({props:c})??l(Jn,c,null)]})])}),{}}}),BG=Oc("v-stepper-header"),KJe=lt({color:String,title:String,subtitle:String,complete:Boolean,completeIcon:{type:cn,default:"$complete"},editable:Boolean,editIcon:{type:cn,default:"$edit"},error:Boolean,errorIcon:{type:cn,default:"$error"},icon:cn,ripple:{type:[Boolean,Object],default:!0},rules:{type:Array,default:()=>[]}},"StepperItem"),WJe=lt({...KJe(),...tm()},"VStepperItem"),kG=gt()({name:"VStepperItem",directives:{vRipple:xo},props:WJe(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const a=nm(e,H4,!0),r=ne(()=>a?.value.value??e.value),s=ne(()=>e.rules.every(m=>m()===!0)),o=ne(()=>!e.disabled&&e.editable),i=ne(()=>!e.disabled&&e.editable),c=ne(()=>e.error||!s.value),A=ne(()=>e.complete||e.rules.length>0&&s.value),d=ne(()=>c.value?e.errorIcon:A.value?e.completeIcon:a.isSelected.value&&e.editable?e.editIcon:e.icon),f=ne(()=>({canEdit:i.value,hasError:c.value,hasCompleted:A.value,title:e.title,subtitle:e.subtitle,step:r.value,value:e.value}));return St(()=>{const m=(!a||a.isSelected.value||A.value||i.value)&&!c.value&&!e.disabled,v=!!(e.title!=null||n.title),p=!!(e.subtitle!=null||n.subtitle);function g(){a?.toggle()}return ma(h("button",{class:ct(["v-stepper-item",{"v-stepper-item--complete":A.value,"v-stepper-item--disabled":e.disabled,"v-stepper-item--error":c.value},a?.selectedClass.value]),disabled:!e.editable,type:"button",onClick:g},[o.value&&sA(!0,"v-stepper-item"),l(nl,{key:"stepper-avatar",class:"v-stepper-item__avatar",color:m?e.color:void 0,size:24},{default:()=>[n.icon?.(f.value)??(d.value?l(Ea,{icon:d.value},null):r.value)]}),h("div",{class:"v-stepper-item__content"},[v&&h("div",{key:"title",class:"v-stepper-item__title"},[n.title?.(f.value)??e.title]),p&&h("div",{key:"subtitle",class:"v-stepper-item__subtitle"},[n.subtitle?.(f.value)??e.subtitle]),n.default?.(f.value)])]),[[xo,e.editable&&e.ripple,null]])}),{}}}),jJe=lt({...Ma(nb(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VStepperWindow"),TG=gt()({name:"VStepperWindow",props:jJe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=Tn(H4,null),r=ln(e,"modelValue"),s=ne({get(){return r.value!=null||!a?r.value:a.items.value.find(o=>a.selected.value.includes(o.id))?.value},set(o){r.value=o}});return St(()=>{const o=kf.filterProps(e);return l(kf,Pe({_as:"VStepperWindow"},o,{modelValue:s.value,"onUpdate:modelValue":i=>s.value=i,class:["v-stepper-window",e.class],style:e.style,mandatory:!1,touch:!1}),n)}),{}}}),qJe=lt({...ab()},"VStepperWindowItem"),IG=gt()({name:"VStepperWindowItem",props:qJe(),setup(e,t){let{slots:n}=t;return St(()=>{const a=Tf.filterProps(e);return l(Tf,Pe({_as:"VStepperWindowItem"},a,{class:["v-stepper-window-item",e.class],style:e.style}),n)}),{}}}),YJe=lt({altLabels:Boolean,bgColor:String,completeIcon:cn,editIcon:cn,editable:Boolean,errorIcon:cn,hideActions:Boolean,items:{type:Array,default:()=>[]},itemTitle:{type:String,default:"title"},itemValue:{type:String,default:"value"},nonLinear:Boolean,flat:Boolean,...Of()},"Stepper"),XJe=lt({...YJe(),...em({mandatory:"force",selectedClass:"v-stepper-item--selected"}),...E4(),...Mc(SG(),["prevText","nextText"])},"VStepper"),JJe=gt()({name:"VStepper",props:XJe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{items:a,next:r,prev:s,selected:o}=oA(e,H4),{displayClasses:i,mobile:c}=rl(e),{completeIcon:A,editIcon:d,errorIcon:f,color:m,editable:v,prevText:p,nextText:g}=Lf(e),y=ne(()=>e.items.map((x,T)=>{const D=Vr(x,e.itemTitle,x),k=Vr(x,e.itemValue,T+1);return{title:D,value:k,raw:x}})),w=ne(()=>a.value.findIndex(x=>o.value.includes(x.id))),b=ne(()=>e.disabled?e.disabled:w.value===0?"prev":w.value===a.value.length-1?"next":!1);return wr({VStepperItem:{editable:v,errorIcon:f,completeIcon:A,editIcon:d,prevText:p,nextText:g},VStepperActions:{color:m,disabled:b,prevText:p,nextText:g}}),St(()=>{const x=Z0.filterProps(e),T=!!(n.header||e.items.length),D=e.items.length>0,k=!e.hideActions&&!!(D||n.actions);return l(Z0,Pe(x,{color:e.bgColor,class:["v-stepper",{"v-stepper--alt-labels":e.altLabels,"v-stepper--flat":e.flat,"v-stepper--non-linear":e.nonLinear,"v-stepper--mobile":c.value},i.value,e.class],style:e.style}),{default:()=>[T&&l(BG,{key:"stepper-header"},{default:()=>[y.value.map((S,E)=>{let{raw:C,...U}=S;return h(Ke,null,[!!E&&l(Ei,null,null),l(kG,U,{default:n[`header-item.${U.value}`]??n.header,icon:n.icon,title:n.title,subtitle:n.subtitle})])})]}),D&&l(TG,{key:"stepper-window"},{default:()=>[y.value.map(S=>l(IG,{value:S.value},{default:()=>n[`item.${S.value}`]?.(S)??n.item?.(S)}))]}),n.default?.({prev:s,next:r}),k&&(n.actions?.({next:r,prev:s})??l(EG,{key:"stepper-actions","onClick:prev":s,"onClick:next":r},n))]})}),{prev:s,next:r}}}),ZJe=lt({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...zc(),...Zw()},"VSwitch"),eZe=gt()({name:"VSwitch",inheritAttrs:!1,props:ZJe(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const r=ln(e,"indeterminate"),s=ln(e,"modelValue"),{loaderClasses:o}=Ug(e),{isFocused:i,focus:c,blur:A}=Gc(e),d=V(),f=V(),m=Ba&&window.matchMedia("(forced-colors: active)").matches,v=Xe(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),p=zo(),g=Xe(()=>e.id||`switch-${p}`);function y(){r.value&&(r.value=!1)}function w(b){b.stopPropagation(),b.preventDefault(),d.value?.input?.click()}return St(()=>{const[b,x]=tA(n),T=qs.filterProps(e),D=Xd.filterProps(e);return l(qs,Pe({ref:f,class:["v-switch",{"v-switch--flat":e.flat},{"v-switch--inset":e.inset},{"v-switch--indeterminate":r.value},o.value,e.class]},b,T,{modelValue:s.value,"onUpdate:modelValue":k=>s.value=k,id:g.value,focused:i.value,style:e.style}),{...a,default:k=>{let{id:S,messagesId:E,isDisabled:C,isReadonly:U,isValid:F}=k;const L={model:s,isValid:F};return l(Xd,Pe({ref:d},D,{modelValue:s.value,"onUpdate:modelValue":[H=>s.value=H,y],id:S.value,"aria-describedby":E.value,type:"checkbox","aria-checked":r.value?"mixed":void 0,disabled:C.value,readonly:U.value,onFocus:c,onBlur:A},x),{...a,default:H=>{let{backgroundColorClasses:ue,backgroundColorStyles:ie}=H;return h("div",{class:ct(["v-switch__track",m?void 0:ue.value]),style:Ut(ie.value),onClick:w},[a["track-true"]&&h("div",{key:"prepend",class:"v-switch__track-true"},[a["track-true"](L)]),a["track-false"]&&h("div",{key:"append",class:"v-switch__track-false"},[a["track-false"](L)])])},input:H=>{let{inputNode:ue,icon:ie,backgroundColorClasses:Q,backgroundColorStyles:X}=H;return h(Ke,null,[ue,h("div",{class:ct(["v-switch__thumb",{"v-switch__thumb--filled":ie||e.loading},e.inset||m?void 0:Q.value]),style:Ut(e.inset?void 0:X.value)},[a.thumb?l(Vn,{defaults:{VIcon:{icon:ie,size:"x-small"}}},{default:()=>[a.thumb({...L,icon:ie})]}):l(i4,null,{default:()=>[e.loading?l(Rg,{name:"v-switch",active:!0,color:F.value===!1?void 0:v.value},{default:le=>a.loader?a.loader(le):l(Bf,{active:le.isActive,color:le.color,indeterminate:!0,size:"16",width:"2"},null)}):ie&&l(Ea,{key:String(ie),icon:ie,size:"x-small"},null)]})])])}})}})}),Cs({},f)}}),tZe=lt({color:String,height:[Number,String],window:Boolean,...Jt(),...Jr(),...Hf(),...lr(),...Nn(),...ua()},"VSystemBar"),nZe=gt()({name:"VSystemBar",props:tZe(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=ka(e),{backgroundColorClasses:r,backgroundColorStyles:s}=Fa(()=>e.color),{elevationClasses:o}=xs(e),{roundedClasses:i}=xr(e),{ssrBootStyles:c}=Jf(),A=ne(()=>e.height??(e.window?32:24)),{layoutItemStyles:d}=$f({id:e.name,order:ne(()=>parseInt(e.order,10)),position:Ht("top"),layoutSize:A,elementSize:A,active:ne(()=>!0),absolute:Xe(()=>e.absolute)});return St(()=>l(e.tag,{class:ct(["v-system-bar",{"v-system-bar--window":e.window},a.value,r.value,o.value,i.value,e.class]),style:Ut([s.value,d.value,c.value,e.style])},n)),{}}}),$4=Symbol.for("vuetify:v-tabs"),aZe=lt({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...Ma(Jw({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),FG=gt()({name:"VTab",props:aZe(),setup(e,t){let{slots:n,attrs:a}=t;const{textColorClasses:r,textColorStyles:s}=Rs(()=>e.sliderColor),o=V(),i=V(),c=ne(()=>e.direction==="horizontal"),A=ne(()=>o.value?.group?.isSelected.value??!1);function d(f){let{value:m}=f;if(m){const v=o.value?.$el.parentElement?.querySelector(".v-tab--selected .v-tab__slider"),p=i.value;if(!v||!p)return;const g=getComputedStyle(v).color,y=v.getBoundingClientRect(),w=p.getBoundingClientRect(),b=c.value?"x":"y",x=c.value?"X":"Y",T=c.value?"right":"bottom",D=c.value?"width":"height",k=y[b],S=w[b],E=k>S?y[T]-w[T]:y[b]-w[b],C=Math.sign(E)>0?c.value?"right":"bottom":Math.sign(E)<0?c.value?"left":"top":"center",F=(Math.abs(E)+(Math.sign(E)<0?y[D]:w[D]))/Math.max(y[D],w[D])||0,L=y[D]/w[D]||0,H=1.5;zA(p,{backgroundColor:[g,"currentcolor"],transform:[`translate${x}(${E}px) scale${x}(${L})`,`translate${x}(${E/H}px) scale${x}(${(F-1)/H+1})`,"none"],transformOrigin:Array(3).fill(C)},{duration:225,easing:b0})}}return St(()=>{const f=Jn.filterProps(e);return l(Jn,Pe({symbol:$4,ref:o,class:["v-tab",e.class],style:e.style,tabindex:A.value?0:-1,role:"tab","aria-selected":String(A.value),active:!1},f,a,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":d}),{...n,default:()=>h(Ke,null,[n.default?.()??e.text,!e.hideSlider&&h("div",{ref:i,class:ct(["v-tab__slider",r.value]),style:Ut(s.value)},null)])})}),Cs({},o)}}),rZe=lt({...Ma(nb(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),PG=gt()({name:"VTabsWindow",props:rZe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=Tn($4,null),r=ln(e,"modelValue"),s=ne({get(){return r.value!=null||!a?r.value:a.items.value.find(o=>a.selected.value.includes(o.id))?.value},set(o){r.value=o}});return St(()=>{const o=kf.filterProps(e);return l(kf,Pe({_as:"VTabsWindow"},o,{modelValue:s.value,"onUpdate:modelValue":i=>s.value=i,class:["v-tabs-window",e.class],style:e.style,mandatory:!1,touch:!1}),n)}),{}}}),sZe=lt({...ab()},"VTabsWindowItem"),DG=gt()({name:"VTabsWindowItem",props:sZe(),setup(e,t){let{slots:n}=t;return St(()=>{const a=Tf.filterProps(e);return l(Tf,Pe({_as:"VTabsWindowItem"},a,{class:["v-tabs-window-item",e.class],style:e.style}),n)}),{}}});function oZe(e){return e?e.map(t=>_0(t)?t:{text:t,value:t}):[]}const iZe=lt({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...f4({mandatory:"force",selectedClass:"v-tab-item--selected"}),...cs(),...Nn()},"VTabs"),lZe=gt()({name:"VTabs",props:iZe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const r=ln(e,"modelValue"),s=ne(()=>oZe(e.items)),{densityClasses:o}=So(e),{backgroundColorClasses:i,backgroundColorStyles:c}=Fa(()=>e.bgColor),{scopeId:A}=rm();return wr({VTab:{color:Xe(()=>e.color),direction:Xe(()=>e.direction),stacked:Xe(()=>e.stacked),fixed:Xe(()=>e.fixedTabs),sliderColor:Xe(()=>e.sliderColor),hideSlider:Xe(()=>e.hideSlider)}}),St(()=>{const d=Y0.filterProps(e),f=!!(a.window||e.items.length>0);return h(Ke,null,[l(Y0,Pe(d,{modelValue:r.value,"onUpdate:modelValue":m=>r.value=m,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},o.value,i.value,e.class],style:[{"--v-tabs-height":Kt(e.height)},c.value,e.style],role:"tablist",symbol:$4},A,n),{default:()=>[a.default?.()??s.value.map(m=>a.tab?.({item:m})??l(FG,Pe(m,{key:m.text,value:m.value}),{default:a[`tab.${m.value}`]?()=>a[`tab.${m.value}`]?.({item:m}):void 0}))]}),f&&l(PG,Pe({modelValue:r.value,"onUpdate:modelValue":m=>r.value=m,key:"tabs-window"},A),{default:()=>[s.value.map(m=>a.item?.({item:m})??l(DG,{value:m.value},{default:()=>a[`item.${m.value}`]?.({item:m})})),a.window?.()]})])}),{}}}),uZe=lt({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...zc(),...Hg()},"VTextarea"),cZe=gt()({name:"VTextarea",directives:{vIntersect:Wl},inheritAttrs:!1,props:uZe(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0,"update:rows":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:r}=t;const s=ln(e,"modelValue"),{isFocused:o,focus:i,blur:c}=Gc(e),{onIntersect:A}=i7(e),d=ne(()=>typeof e.counterValue=="function"?e.counterValue(s.value):(s.value||"").toString().length),f=ne(()=>{if(n.maxlength)return n.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),m=V(),v=V(),p=Ht(""),g=V(),y=ne(()=>e.persistentPlaceholder||o.value||e.active);function w(){g.value!==document.activeElement&&g.value?.focus(),o.value||i()}function b(F){w(),a("click:control",F)}function x(F){a("mousedown:control",F)}function T(F){F.stopPropagation(),w(),_n(()=>{s.value="",rw(e["onClick:clear"],F)})}function D(F){const L=F.target;if(s.value=L.value,e.modelModifiers?.trim){const H=[L.selectionStart,L.selectionEnd];_n(()=>{L.selectionStart=H[0],L.selectionEnd=H[1]})}}const k=V(),S=V(Number(e.rows)),E=ne(()=>["plain","underlined"].includes(e.variant));_r(()=>{e.autoGrow||(S.value=Number(e.rows))});function C(){e.autoGrow&&_n(()=>{if(!k.value||!v.value)return;const F=getComputedStyle(k.value),L=getComputedStyle(v.value.$el),H=parseFloat(F.getPropertyValue("--v-field-padding-top"))+parseFloat(F.getPropertyValue("--v-input-padding-top"))+parseFloat(F.getPropertyValue("--v-field-padding-bottom")),ue=k.value.scrollHeight,ie=parseFloat(F.lineHeight),Q=Math.max(parseFloat(e.rows)*ie+H,parseFloat(L.getPropertyValue("--v-input-control-height"))),X=parseFloat(e.maxRows)*ie+H||1/0,le=Ja(ue??0,Q,X);S.value=Math.floor((le-H)/ie),p.value=Kt(le)})}dn(C),je(s,C),je(()=>e.rows,C),je(()=>e.maxRows,C),je(()=>e.density,C),je(S,F=>{a("update:rows",F)});let U;return je(k,F=>{F?(U=new ResizeObserver(C),U.observe(k.value)):U?.disconnect()}),va(()=>{U?.disconnect()}),St(()=>{const F=!!(r.counter||e.counter||e.counterValue),L=!!(F||r.details),[H,ue]=tA(n),{modelValue:ie,...Q}=qs.filterProps(e),X={...Jd.filterProps(e),"onClick:clear":T};return l(qs,Pe({ref:m,modelValue:s.value,"onUpdate:modelValue":le=>s.value=le,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":E.value},e.class],style:e.style},H,Q,{centerAffix:S.value===1&&!E.value,focused:o.value}),{...r,default:le=>{let{id:Z,isDisabled:re,isDirty:q,isReadonly:P,isValid:G,hasDetails:J}=le;return l(Jd,Pe({ref:v,style:{"--v-textarea-control-height":p.value},onClick:b,onMousedown:x,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},X,{id:Z.value,active:y.value||q.value,centerAffix:S.value===1&&!E.value,dirty:q.value||e.dirty,disabled:re.value,focused:o.value,details:J.value,error:G.value===!1}),{...r,default:M=>{let{props:{class:te,...Y}}=M;return h(Ke,null,[e.prefix&&h("span",{class:"v-text-field__prefix"},[e.prefix]),ma(h("textarea",Pe({ref:g,class:te,value:s.value,onInput:D,autofocus:e.autofocus,readonly:P.value,disabled:re.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:w,onBlur:c},Y,ue),null),[[Wl,{handler:A},null,{once:!0}]]),e.autoGrow&&ma(h("textarea",{class:ct([te,"v-textarea__sizer"]),id:`${Y.id}-sizer`,"onUpdate:modelValue":W=>s.value=W,ref:k,readonly:!0,"aria-hidden":"true"},null),[[QA,s.value]]),e.suffix&&h("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:L?le=>h(Ke,null,[r.details?.(le),F&&h(Ke,null,[h("span",null,null),l(eb,{active:e.persistentCounter||o.value,value:d.value,max:f.value,disabled:e.disabled},r.counter)])]):void 0})}),Cs({},m,v,g)}}),dZe=lt({withBackground:Boolean,...Jt(),...ua(),...Nn()},"VThemeProvider"),AZe=gt()({name:"VThemeProvider",props:dZe(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=ka(e);return()=>e.withBackground?l(e.tag,{class:ct(["v-theme-provider",a.value,e.class]),style:Ut(e.style)},{default:()=>[n.default?.()]}):n.default?.()}}),fZe=lt({dotColor:String,fillDot:Boolean,hideDot:Boolean,icon:cn,iconColor:String,lineColor:String,...Jt(),...lr(),...Ku(),...Jr()},"VTimelineDivider"),mZe=gt()({name:"VTimelineDivider",props:fZe(),setup(e,t){let{slots:n}=t;const{sizeClasses:a,sizeStyles:r}=bh(e,"v-timeline-divider__dot"),{backgroundColorStyles:s,backgroundColorClasses:o}=Fa(()=>e.dotColor),{roundedClasses:i}=xr(e,"v-timeline-divider__dot"),{elevationClasses:c}=xs(e),{backgroundColorClasses:A,backgroundColorStyles:d}=Fa(()=>e.lineColor);return St(()=>h("div",{class:ct(["v-timeline-divider",{"v-timeline-divider--fill-dot":e.fillDot},e.class]),style:Ut(e.style)},[h("div",{class:ct(["v-timeline-divider__before",A.value]),style:Ut(d.value)},null),!e.hideDot&&h("div",{key:"dot",class:ct(["v-timeline-divider__dot",c.value,i.value,a.value]),style:Ut(r.value)},[h("div",{class:ct(["v-timeline-divider__inner-dot",o.value,i.value]),style:Ut(s.value)},[n.default?l(Vn,{key:"icon-defaults",disabled:!e.icon,defaults:{VIcon:{color:e.iconColor,icon:e.icon,size:e.size}}},n.default):l(Ea,{key:"icon",color:e.iconColor,icon:e.icon,size:e.size},null)])]),h("div",{class:ct(["v-timeline-divider__after",A.value]),style:Ut(d.value)},null)])),{}}}),UG=lt({density:String,dotColor:String,fillDot:Boolean,hideDot:Boolean,hideOpposite:{type:Boolean,default:void 0},icon:cn,iconColor:String,lineInset:[Number,String],side:{type:String,validator:e=>e==null||["start","end"].includes(e)},...Jt(),...Mr(),...Jr(),...lr(),...Ku(),...Nn()},"VTimelineItem"),vZe=gt()({name:"VTimelineItem",props:UG(),setup(e,t){let{slots:n}=t;const{dimensionStyles:a}=Or(e),r=Ht(0),s=V();return je(s,o=>{o&&(r.value=o.$el.querySelector(".v-timeline-divider__dot")?.getBoundingClientRect().width??0)},{flush:"post"}),St(()=>h("div",{class:ct(["v-timeline-item",{"v-timeline-item--fill-dot":e.fillDot,"v-timeline-item--side-start":e.side==="start","v-timeline-item--side-end":e.side==="end"},e.class]),style:Ut([{"--v-timeline-dot-size":Kt(r.value),"--v-timeline-line-inset":e.lineInset?`calc(var(--v-timeline-dot-size) / 2 + ${Kt(e.lineInset)})`:Kt(0)},e.style])},[h("div",{class:"v-timeline-item__body",style:Ut(a.value)},[n.default?.()]),l(mZe,{ref:s,hideDot:e.hideDot,icon:e.icon,iconColor:e.iconColor,size:e.size,elevation:e.elevation,dotColor:e.dotColor,fillDot:e.fillDot,rounded:e.rounded},{default:n.icon}),e.density!=="compact"&&h("div",{class:"v-timeline-item__opposite"},[!e.hideOpposite&&n.opposite?.()])])),{}}}),hZe=lt({align:{type:String,default:"center",validator:e=>["center","start"].includes(e)},direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},justify:{type:String,default:"auto",validator:e=>["auto","center"].includes(e)},side:{type:String,validator:e=>e==null||["start","end"].includes(e)},lineThickness:{type:[String,Number],default:2},lineColor:String,truncateLine:{type:String,validator:e=>["start","end","both"].includes(e)},...Mc(UG({lineInset:0}),["dotColor","fillDot","hideOpposite","iconColor","lineInset","size"]),...Jt(),...cs(),...Nn(),...ua()},"VTimeline"),pZe=gt()({name:"VTimeline",props:hZe(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=ka(e),{densityClasses:r}=So(e),{rtlClasses:s}=Xr();wr({VTimelineDivider:{lineColor:Xe(()=>e.lineColor)},VTimelineItem:{density:Xe(()=>e.density),dotColor:Xe(()=>e.dotColor),fillDot:Xe(()=>e.fillDot),hideOpposite:Xe(()=>e.hideOpposite),iconColor:Xe(()=>e.iconColor),lineColor:Xe(()=>e.lineColor),lineInset:Xe(()=>e.lineInset),size:Xe(()=>e.size)}});const o=ne(()=>{const c=e.side?e.side:e.density!=="default"?"end":null;return c&&`v-timeline--side-${c}`}),i=ne(()=>{const c=["v-timeline--truncate-line-start","v-timeline--truncate-line-end"];switch(e.truncateLine){case"both":return c;case"start":return c[0];case"end":return c[1];default:return null}});return St(()=>l(e.tag,{class:ct(["v-timeline",`v-timeline--${e.direction}`,`v-timeline--align-${e.align}`,`v-timeline--justify-${e.justify}`,i.value,{"v-timeline--inset-line":!!e.lineInset},a.value,r.value,o.value,s.value,e.class]),style:Ut([{"--v-timeline-line-thickness":Kt(e.lineThickness)},e.style])},n)),{}}});function YA(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return String(e).padStart(t,"0")}const gZe=lt({allowedValues:Function,ampm:Boolean,color:String,disabled:Boolean,displayedValue:null,double:Boolean,format:{type:Function,default:e=>e},max:{type:Number,required:!0},min:{type:Number,required:!0},scrollable:Boolean,readonly:Boolean,rotate:{type:Number,default:0},step:{type:Number,default:1},modelValue:{type:Number}},"VTimePickerClock"),xB=gt()({name:"VTimePickerClock",props:gZe(),emits:{change:e=>!0,input:e=>!0},setup(e,t){let{emit:n}=t;const a=V(null),r=V(null),s=V(void 0),o=V(!1),i=V(null),c=V(null),A=H8(Z=>n("change",Z),750),{textColorClasses:d,textColorStyles:f}=Rs(()=>e.color),{backgroundColorClasses:m,backgroundColorStyles:v}=Fa(()=>e.color),p=ne(()=>e.max-e.min+1),g=ne(()=>e.double?p.value/2:p.value),y=ne(()=>360/g.value),w=ne(()=>y.value*Math.PI/180),b=ne(()=>e.modelValue==null?e.min:e.modelValue),x=ne(()=>.62),T=ne(()=>{const Z=[];for(let re=e.min;re<=e.max;re=re+e.step)Z.push(re);return Z});je(()=>e.modelValue,Z=>{s.value=Z});function D(Z){s.value!==Z&&(s.value=Z),n("input",Z)}function k(Z){return!e.allowedValues||e.allowedValues(Z)}function S(Z){if(!e.scrollable||e.disabled)return;Z.preventDefault();const re=Math.sign(-Z.deltaY||1);let q=b.value;do q=q+re,q=(q-e.min+p.value)%p.value+e.min;while(!k(q)&&q!==b.value);q!==e.displayedValue&&D(q),A(q)}function E(Z){return e.double&&Z-e.min>=g.value}function C(Z){return E(Z)?x.value:1}function U(Z){const re=e.rotate*Math.PI/180;return{x:Math.sin((Z-e.min)*w.value+re)*C(Z),y:-Math.cos((Z-e.min)*w.value+re)*C(Z)}}function F(Z,re){const q=(Math.round(Z/y.value)+(re?g.value:0))%p.value+e.min;return Z<360-y.value/2?q:re?e.max-g.value+1:e.min}function L(Z){const{x:re,y:q}=U(Z);return{left:`${Math.round(50+re*50)}%`,top:`${Math.round(50+q*50)}%`}}function H(Z,re){const q=re.x-Z.x,P=re.y-Z.y;return Math.sqrt(q*q+P*P)}function ue(Z,re){const q=2*Math.atan2(re.y-Z.y-H(Z,re),re.x-Z.x);return Math.abs(q*180/Math.PI)}function ie(Z){i.value===null&&(i.value=Z),c.value=Z,D(Z)}function Q(Z){if(Z.preventDefault(),!o.value&&Z.type!=="click"||!a.value)return;const{width:re,top:q,left:P}=a.value?.getBoundingClientRect(),{width:G}=r.value?.getBoundingClientRect()??{width:0},{clientX:J,clientY:M}="touches"in Z?Z.touches[0]:Z,te={x:re/2,y:-re/2},Y={x:J-P,y:q-M},W=Math.round(ue(te,Y)-e.rotate+360)%360,ee=e.double&&H(te,Y)<(G+G*x.value)/4,ae=Math.ceil(15/y.value);let oe;for(let j=0;j<ae;j++)if(oe=F(W+j*y.value,ee),k(oe)||(oe=F(W-j*y.value,ee),k(oe)))return ie(oe)}function X(Z){e.disabled||(Z.preventDefault(),window.addEventListener("mousemove",Q),window.addEventListener("touchmove",Q),window.addEventListener("mouseup",le),window.addEventListener("touchend",le),i.value=null,c.value=null,o.value=!0,Q(Z))}function le(Z){Z.stopPropagation(),window.removeEventListener("mousemove",Q),window.removeEventListener("touchmove",Q),window.removeEventListener("mouseup",le),window.removeEventListener("touchend",le),o.value=!1,c.value!==null&&k(c.value)&&n("change",c.value)}St(()=>h("div",{class:ct([{"v-time-picker-clock":!0,"v-time-picker-clock--indeterminate":e.modelValue==null,"v-time-picker-clock--readonly":e.readonly}]),onMousedown:X,onTouchstart:X,onWheel:S,ref:a},[h("div",{class:"v-time-picker-clock__inner",ref:r},[h("div",{class:ct([{"v-time-picker-clock__hand":!0,"v-time-picker-clock__hand--inner":E(e.modelValue)},d.value]),style:Ut([{transform:`rotate(${e.rotate+y.value*(b.value-e.min)}deg) scaleY(${C(b.value)})`},f.value])},null),T.value.map(Z=>{const re=Z===b.value;return h("div",{class:ct([{"v-time-picker-clock__item":!0,"v-time-picker-clock__item--active":re,"v-time-picker-clock__item--disabled":e.disabled||!k(Z)},re&&m.value]),style:Ut([L(Z),re&&v.value])},[h("span",null,[e.format(Z)])])})])]))}}),yZe=lt({ampm:Boolean,color:String,disabled:Boolean,hour:Number,minute:Number,second:Number,period:String,readonly:Boolean,useSeconds:Boolean,value:Number,viewMode:String},"VTimePickerControls"),CB=gt()({name:"VTimePickerControls",props:yZe(),emits:{"update:period":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const{t:r}=Oa();return St(()=>{let s=e.hour;return e.ampm&&(s=s?(s-1)%12+1:12),h("div",{class:"v-time-picker-controls"},[h("div",{class:ct({"v-time-picker-controls__time":!0,"v-time-picker-controls__time--with-seconds":e.useSeconds})},[l(Jn,{active:e.viewMode==="hour",color:e.viewMode==="hour"?e.color:void 0,disabled:e.disabled,variant:"tonal",class:ct({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time--with-ampm__btn":e.ampm,"v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),text:e.hour==null?"--":YA(`${s}`),onClick:()=>n("update:viewMode","hour")},null),h("span",{class:ct(["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":e.useSeconds}])},[O(":")]),l(Jn,{active:e.viewMode==="minute",color:e.viewMode==="minute"?e.color:void 0,class:ct({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":e.viewMode==="minute","v-time-picker-controls__time--with-ampm__btn":e.ampm,"v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),disabled:e.disabled,variant:"tonal",text:e.minute==null?"--":YA(e.minute),onClick:()=>n("update:viewMode","minute")},null),e.useSeconds&&h("span",{class:ct(["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":e.useSeconds}]),key:"secondsDivider"},[O(":")]),e.useSeconds&&l(Jn,{key:"secondsVal",active:e.viewMode==="second",color:e.viewMode==="second"?e.color:void 0,variant:"tonal",onClick:()=>n("update:viewMode","second"),class:ct({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":e.viewMode==="second","v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),disabled:e.disabled,text:e.second==null?"--":YA(e.second)},null),e.ampm&&h("div",{class:"v-time-picker-controls__ampm"},[l(Jn,{active:e.period==="am",color:e.period==="am"?e.color:void 0,class:ct({"v-time-picker-controls__ampm__am":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":e.period==="am"}),disabled:e.disabled,text:r("$vuetify.timePicker.am"),variant:e.disabled&&e.period==="am"?"elevated":"tonal",onClick:()=>e.period!=="am"?n("update:period","am"):null},null),l(Jn,{active:e.period==="pm",color:e.period==="pm"?e.color:void 0,class:ct({"v-time-picker-controls__ampm__pm":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":e.period==="pm"}),disabled:e.disabled,text:r("$vuetify.timePicker.pm"),variant:e.disabled&&e.period==="pm"?"elevated":"tonal",onClick:()=>e.period!=="pm"?n("update:period","pm"):null},null)])])])}),{}}}),_Ze=xi(24),RG=xi(12),wZe=RG.map(e=>e+12);xi(60);const bZe=lt({allowedHours:[Function,Array],allowedMinutes:[Function,Array],allowedSeconds:[Function,Array],disabled:Boolean,format:{type:String,default:"ampm"},max:String,min:String,viewMode:{type:String,default:"hour"},modelValue:null,readonly:Boolean,scrollable:Boolean,useSeconds:Boolean,...Ma(rb({title:"$vuetify.timePicker.title"}),["landscape"])},"VTimePicker"),xZe=gt()({name:"VTimePicker",props:bZe(),emits:{"update:hour":e=>!0,"update:minute":e=>!0,"update:period":e=>!0,"update:second":e=>!0,"update:modelValue":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const{t:r}=Oa(),s=V(null),o=V(null),i=V(null),c=V(null),A=V(null),d=V(null),f=V("am"),m=ln(e,"viewMode","hour"),v=V(null),p=V(null),g=ne(()=>{let L;if(e.allowedHours instanceof Array?L=ie=>e.allowedHours.includes(ie):L=e.allowedHours,!e.min&&!e.max)return L;const H=e.min?Number(e.min.split(":")[0]):0,ue=e.max?Number(e.max.split(":")[0]):23;return ie=>ie>=Number(H)&&ie<=Number(ue)&&(!L||L(ie))}),y=ne(()=>{let L;const H=!g.value||s.value===null||g.value(s.value);if(e.allowedMinutes instanceof Array?L=re=>e.allowedMinutes.includes(re):L=e.allowedMinutes,!e.min&&!e.max)return H?L:()=>!1;const[ue,ie]=e.min?e.min.split(":").map(Number):[0,0],[Q,X]=e.max?e.max.split(":").map(Number):[23,59],le=ue*60+Number(ie),Z=Q*60+Number(X);return re=>{const q=60*s.value+re;return q>=le&&q<=Z&&H&&(!L||L(re))}}),w=ne(()=>{let L;const ue=(!g.value||s.value===null||g.value(s.value))&&(!y.value||o.value===null||y.value(o.value));if(e.allowedSeconds instanceof Array?L=G=>e.allowedSeconds.includes(G):L=e.allowedSeconds,!e.min&&!e.max)return ue?L:()=>!1;const[ie,Q,X]=e.min?e.min.split(":").map(Number):[0,0,0],[le,Z,re]=e.max?e.max.split(":").map(Number):[23,59,59],q=ie*3600+Q*60+Number(X||0),P=le*3600+Z*60+Number(re||0);return G=>{const J=3600*s.value+60*o.value+G;return J>=q&&J<=P&&ue&&(!L||L(G))}}),b=ne(()=>e.format==="ampm");je(()=>e.modelValue,L=>S(L)),dn(()=>{S(e.modelValue)});function x(){return s.value!=null&&o.value!=null&&(!e.useSeconds||i.value!=null)?`${YA(s.value)}:${YA(o.value)}`+(e.useSeconds?`:${YA(i.value)}`:""):null}function T(){const L=x();L!==null&&n("update:modelValue",L)}function D(L){return L?(L-1)%12+1:12}function k(L,H){return L%12+(H==="pm"?12:0)}function S(L){if(L==null||L==="")s.value=null,o.value=null,i.value=null;else if(L instanceof Date)s.value=L.getHours(),o.value=L.getMinutes(),i.value=L.getSeconds();else{const[H,,ue,,ie,Q]=L.trim().toLowerCase().match(/^(\d+):(\d+)(:(\d+))?([ap]m)?$/)||new Array(6);s.value=Q?k(parseInt(H,10),Q):parseInt(H,10),o.value=parseInt(ue,10),i.value=parseInt(ie||0,10)}f.value=s.value==null||s.value<12?"am":"pm"}function E(L,H){const ue=g.value;if(!ue)return H;const ie=b.value?H<12?RG:wZe:_Ze;return((ie.find(X=>ue((X+H)%ie.length+ie[0]))||0)+H)%ie.length+ie[0]}function C(L){if(f.value=L,s.value!=null){const H=s.value+(f.value==="am"?-12:12);s.value=E("hour",H)}return n("update:period",L),T(),!0}function U(L){m.value==="hour"?s.value=b.value?k(L,f.value):L:m.value==="minute"?o.value=L:i.value=L}function F(L){switch(m.value||"hour"){case"hour":n("update:hour",L);break;case"minute":n("update:minute",L);break;case"second":n("update:second",L);break}const H=s.value!==null&&o.value!==null&&(e.useSeconds?i.value!==null:!0);m.value==="hour"?m.value="minute":e.useSeconds&&m.value==="minute"&&(m.value="second"),!(s.value===c.value&&o.value===A.value&&(!e.useSeconds||i.value===d.value)||x()===null)&&(c.value=s.value,A.value=o.value,e.useSeconds&&(d.value=i.value),H&&T())}St(()=>{const L=Yv.filterProps(e),H=CB.filterProps(e),ue=xB.filterProps(Ma(e,["format","modelValue","min","max"]));return l(Yv,Pe(L,{color:void 0,class:["v-time-picker",e.class],style:e.style}),{title:()=>a.title?.()??h("div",{class:"v-time-picker__title"},[r(e.title)]),header:()=>l(CB,Pe(H,{ampm:b.value,hour:s.value,minute:o.value,period:f.value,second:i.value,viewMode:m.value,"onUpdate:period":ie=>C(ie),"onUpdate:viewMode":ie=>m.value=ie,ref:v}),null),default:()=>l(xB,Pe(ue,{allowedValues:m.value==="hour"?g.value:m.value==="minute"?y.value:w.value,double:m.value==="hour"&&!b.value,format:m.value==="hour"?b.value?D:ie=>ie:ie=>YA(ie,2),max:m.value==="hour"?b.value&&f.value==="am"?11:23:59,min:m.value==="hour"&&b.value&&f.value==="pm"?12:0,size:20,step:m.value==="hour"?1:5,modelValue:m.value==="hour"?s.value:m.value==="minute"?o.value:i.value,onChange:F,onInput:U,ref:p}),null),actions:a.actions})})}}),CZe=lt({...Jt(),...il({variant:"text"})},"VToolbarItems"),SZe=gt()({name:"VToolbarItems",props:CZe(),setup(e,t){let{slots:n}=t;return wr({VBtn:{color:Xe(()=>e.color),height:"inherit",variant:Xe(()=>e.variant)}}),St(()=>h("div",{class:ct(["v-toolbar-items",e.class]),style:Ut(e.style)},[n.default?.()])),{}}}),EZe=lt({id:String,interactive:Boolean,text:String,...Ma(Og({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:null}),["absolute","persistent"])},"VTooltip"),NG=gt()({name:"VTooltip",props:EZe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=ln(e,"modelValue"),{scopeId:r}=rm(),s=zo(),o=Xe(()=>e.id||`v-tooltip-${s}`),i=V(),c=ne(()=>e.location.split(" ").length>1?e.location:e.location+" center"),A=ne(()=>e.origin==="auto"||e.origin==="overlap"||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),d=Xe(()=>e.transition!=null?e.transition:a.value?"scale-transition":"fade-transition"),f=ne(()=>Pe({"aria-describedby":o.value},e.activatorProps));return St(()=>{const m=Nu.filterProps(e);return l(Nu,Pe({ref:i,class:["v-tooltip",{"v-tooltip--interactive":e.interactive},e.class],style:e.style,id:o.value},m,{modelValue:a.value,"onUpdate:modelValue":v=>a.value=v,transition:d.value,absolute:!0,location:c.value,origin:A.value,persistent:!0,role:"tooltip",activatorProps:f.value,_disableGlobalStack:!0},r),{activator:n.activator,default:function(){for(var v=arguments.length,p=new Array(v),g=0;g<v;g++)p[g]=arguments[g];return n.default?.(...p)??e.text}})}),Cs({},i)}}),BZe=lt({...Ma($Q({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand"}),["subgroup"])},"VTreeviewGroup"),SB=gt()({name:"VTreeviewGroup",props:BZe(),setup(e,t){let{slots:n}=t;const a=V(),r=ne(()=>a.value?.isOpen?e.collapseIcon:e.expandIcon),s=ne(()=>({VTreeviewItem:{prependIcon:void 0,appendIcon:void 0,toggleIcon:r.value}}));return St(()=>{const o=J0.filterProps(e);return l(J0,Pe(o,{ref:a,class:["v-treeview-group",e.class],subgroup:!0}),{...n,activator:n.activator?i=>h(Ke,null,[l(Vn,{defaults:s.value},{default:()=>[n.activator?.(i)]})]):void 0})}),{}}}),VG=Symbol.for("vuetify:v-treeview"),LG=lt({loading:Boolean,hideActions:Boolean,indentLines:Array,toggleIcon:cn,...zQ({slim:!0})},"VTreeviewItem"),EB=gt()({name:"VTreeviewItem",props:LG(),emits:{toggleExpand:e=>!0},setup(e,t){let{slots:n,emit:a}=t;const r=Tn(VG,{visibleIds:V()}).visibleIds,s=V(),o=ne(()=>s.value?.root.activatable.value&&s.value?.isGroupActivator),i=ne(()=>s.value?.link.isClickable.value||e.value!=null&&!!s.value?.list),c=ne(()=>!e.disabled&&e.link!==!1&&(e.link||i.value||o.value)),A=ne(()=>r.value&&!r.value.has(wn(s.value?.id)));function d(m){c.value&&o.value&&s.value?.activate(!s.value?.isActivated,m)}function f(m){m.preventDefault(),m.stopPropagation(),a("toggleExpand",m)}return St(()=>{const m=jl.filterProps(e),v=n.prepend||e.toggleIcon||e.indentLines;return l(jl,Pe({ref:s},m,{active:s.value?.isActivated||void 0,class:["v-treeview-item",{"v-treeview-item--activatable-group-activator":o.value,"v-treeview-item--filtered":A.value},e.class],ripple:!1,onClick:d}),{...n,prepend:v?p=>h(Ke,null,[e.indentLines&&e.indentLines.length>0?h("div",{key:"indent-lines",class:"v-treeview-indent-lines",style:{"--v-indent-parts":e.indentLines.length}},[e.indentLines.map(g=>h("div",{class:ct(`v-treeview-indent-line v-treeview-indent-line--${g}`)},null))]):"",!e.hideActions&&l(JQ,{start:!0},{default:()=>[e.toggleIcon?l(Jn,{density:"compact",icon:e.toggleIcon,loading:e.loading,variant:"text",onClick:f},{loader:()=>l(Bf,{indeterminate:"disable-shrink",size:"20",width:"2"},null)}):h("div",{class:"v-treeview-item__level"},null)]}),n.prepend?.(p)]):void 0})}),Cs({},s)}}),MG=lt({fluid:Boolean,disabled:Boolean,loadChildren:Function,loadingIcon:{type:String,default:"$loading"},items:Array,openOnClick:{type:Boolean,default:void 0},indeterminateIcon:{type:cn,default:"$checkboxIndeterminate"},falseIcon:cn,trueIcon:cn,returnObject:Boolean,activatable:Boolean,selectable:Boolean,selectedColor:String,selectStrategy:[String,Function,Object],index:Number,isLastGroup:Boolean,separateRoots:Boolean,parentIndentLines:Array,indentLinesVariant:String,path:{type:Array,default:()=>[]},...Mc(LG(),["hideActions"]),...cs()},"VTreeviewChildren"),P2=gt()({name:"VTreeviewChildren",props:MG(),setup(e,t){let{slots:n}=t;const a=os(new Set),r=V([]),s=ne(()=>!e.disabled&&(e.openOnClick!=null?e.openOnClick:e.selectable&&!e.activatable));async function o(c){try{if(!e.items?.length||!e.loadChildren)return;c?.children?.length===0&&(a.add(c.value),await e.loadChildren(c.raw))}finally{a.delete(c.value)}}function i(c,A){e.selectable&&c(A)}return()=>n.default?.()??e.items?.map((c,A,d)=>{const{children:f,props:m}=c,v=a.has(c.value),p=!!d.at(A+1)?.children,g=e.path?.length??0,y=d.length-1===A,w={index:A,depth:g,isFirst:A===0,isLast:y,path:[...e.path,A],hideAction:e.hideActions},b=Zte({depth:g,isLast:y,isLastGroup:e.isLastGroup,leafLinks:!e.hideActions&&!e.fluid,separateRoots:e.separateRoots,parentIndentLines:e.parentIndentLines,variant:e.indentLinesVariant}),x={prepend:k=>h(Ke,null,[e.selectable&&(!f||f&&!["leaf","single-leaf"].includes(e.selectStrategy))&&h("div",null,[l(Ru,{key:c.value,modelValue:k.isSelected,disabled:e.disabled,loading:v,color:e.selectedColor,density:e.density,indeterminate:k.isIndeterminate,indeterminateIcon:e.indeterminateIcon,falseIcon:e.falseIcon,trueIcon:e.trueIcon,"onUpdate:modelValue":S=>i(k.select,S),onClick:S=>S.stopPropagation(),onKeydown:S=>{["Enter","Space"].includes(S.key)&&(S.stopPropagation(),i(k.select,k.isSelected))}},null)]),n.prepend?.({...k,...w,item:c.raw,internalItem:c})]),append:n.append?k=>n.append?.({...k,...w,item:c.raw,internalItem:c}):void 0,title:n.title?k=>n.title?.({...k,item:c.raw,internalItem:c}):void 0,subtitle:n.subtitle?k=>n.subtitle?.({...k,item:c.raw,internalItem:c}):void 0},T=SB.filterProps(m),D=P2.filterProps({...e,...w});return f?l(SB,Pe(T,{value:e.returnObject?c.raw:T?.value,rawId:T?.value}),{activator:k=>{let{props:S}=k;const E={...m,...S,value:m?.value,onToggleExpand:[()=>o(c),S.onClick],onClick:s.value?[()=>o(c),S.onClick]:()=>i(r.value[A]?.select,!r.value[A]?.isSelected)};return l(EB,Pe({ref:C=>r.value[A]=C},E,{hideActions:e.hideActions,indentLines:b.node,value:e.returnObject?c.raw:m.value,loading:v}),x)},default:()=>l(P2,Pe(D,{items:f,indentLinesVariant:e.indentLinesVariant,parentIndentLines:b.children,isLastGroup:p,returnObject:e.returnObject}),n)}):Tx(n.item,{props:m,item:c.raw,internalItem:c},()=>c.type==="divider"?Tx(n.divider,{props:c.raw},()=>l(Ei,c.props,null)):c.type==="subheader"?Tx(n.subheader,{props:c.raw},()=>l(Bh,c.props,null)):l(EB,Pe(m,{hideActions:e.hideActions,indentLines:b.leaf,value:e.returnObject?wn(c.raw):m.value}),x))})}});function OG(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];for(const n of e)t.push(n),n.children&&OG(n.children,t);return t}const kZe=lt({openAll:Boolean,indentLines:[Boolean,String],search:String,...kh({filterKeys:["title"]}),...Ma(MG(),["index","path","indentLinesVariant","parentIndentLines","isLastGroup"]),...Ma(XQ({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand",slim:!0}),["nav","openStrategy"]),modelValue:Array},"VTreeview"),TZe=gt()({name:"VTreeview",props:kZe(),emits:{"update:opened":e=>!0,"update:activated":e=>!0,"update:selected":e=>!0,"update:modelValue":e=>!0,"click:open":e=>!0,"click:select":e=>!0},setup(e,t){let{slots:n,emit:a}=t;const{items:r}=YQ(e),s=Xe(()=>e.activeColor),o=Xe(()=>e.baseColor),i=Xe(()=>e.color),c=ln(e,"activated"),A=ln(e,"selected"),d=ne({get:()=>e.modelValue??A.value,set(x){A.value=x,a("update:modelValue",x)}}),f=V(),m=ne(()=>e.openAll?b(r.value):e.opened),v=ne(()=>OG(r.value)),p=Xe(()=>e.search),{filteredItems:g}=Th(e,v,p),y=ne(()=>{if(!p.value)return null;const x=f.value?.getPath;return x?new Set(g.value.flatMap(T=>{const D=e.returnObject?T.raw:T.props.value;return[...x(D),...w(D)].map(wn)})):null});function w(x){const T=[],D=(f.value?.children.get(x)??[]).slice();for(;D.length;){const k=D.shift();k&&(T.push(k),D.push(...(f.value?.children.get(k)??[]).slice()))}return T}function b(x){let T=[];for(const D of x)D.children&&(T.push(e.returnObject?wn(D.raw):D.value),D.children&&(T=T.concat(b(D.children))));return T}return La(VG,{visibleIds:y}),wr({VTreeviewGroup:{activeColor:s,baseColor:o,color:i,collapseIcon:Xe(()=>e.collapseIcon),expandIcon:Xe(()=>e.expandIcon)},VTreeviewItem:{activeClass:Xe(()=>e.activeClass),activeColor:s,baseColor:o,color:i,density:Xe(()=>e.density),disabled:Xe(()=>e.disabled),lines:Xe(()=>e.lines),variant:Xe(()=>e.variant)}}),St(()=>{const x=jv.filterProps(e),T=P2.filterProps(e),D=typeof e.indentLines=="boolean"?"default":e.indentLines;return l(jv,Pe({ref:f},x,{class:["v-treeview",{"v-treeview--fluid":e.fluid},e.class],openStrategy:"multiple",style:e.style,opened:m.value,activated:c.value,"onUpdate:activated":k=>c.value=k,selected:d.value,"onUpdate:selected":k=>d.value=k}),{default:()=>[l(P2,Pe(T,{density:e.density,returnObject:e.returnObject,items:r.value,parentIndentLines:e.indentLines?[]:void 0,indentLinesVariant:D}),n)]})}),{}}}),IZe=gt()({name:"VValidation",props:kQ(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=TQ(e,"validation");return()=>n.default?.(a)}}),FZe=Object.freeze(Object.defineProperty({__proto__:null,VAlert:HWe,VAlertTitle:wQ,VApp:jKe,VAppBar:mWe,VAppBarNavIcon:RWe,VAppBarTitle:NWe,VAutocomplete:oqe,VAvatar:nl,VBadge:lqe,VBanner:dqe,VBannerActions:A7,VBannerText:f7,VBottomNavigation:fqe,VBottomSheet:vqe,VBreadcrumbs:yqe,VBreadcrumbsDivider:v7,VBreadcrumbsItem:h7,VBtn:Jn,VBtnGroup:ZE,VBtnToggle:_We,VCard:Cqe,VCardActions:p7,VCardItem:_7,VCardSubtitle:g7,VCardText:w7,VCardTitle:y7,VCarousel:Dqe,VCarouselItem:Rqe,VCheckbox:JWe,VCheckboxBtn:Ru,VChip:Eh,VChipGroup:aje,VClassIcon:xk,VCode:Nqe,VCol:dXe,VColorPicker:SYe,VCombobox:BYe,VComponentIcon:RS,VConfirmEdit:TYe,VContainer:iXe,VCounter:eb,VDataIterator:MYe,VDataTable:tXe,VDataTableFooter:eg,VDataTableHeaders:If,VDataTableRow:N4,VDataTableRows:Ff,VDataTableServer:sXe,VDataTableVirtual:aXe,VDatePicker:xXe,VDatePickerControls:vB,VDatePickerHeader:hB,VDatePickerMonth:pB,VDatePickerMonths:gB,VDatePickerYears:yB,VDefaultsProvider:Vn,VDialog:iB,VDialogBottomTransition:JKe,VDialogTopTransition:ZKe,VDialogTransition:jw,VDivider:Ei,VEmptyState:SXe,VExpandTransition:qw,VExpandXTransition:u4,VExpansionPanel:EXe,VExpansionPanelText:_B,VExpansionPanelTitle:wB,VExpansionPanels:TXe,VFab:FXe,VFabTransition:XKe,VFadeTransition:K0,VField:Jd,VFieldLabel:Dp,VFileInput:UXe,VFooter:NXe,VForm:LXe,VHover:OXe,VIcon:Ea,VImg:Nc,VInfiniteScroll:$Xe,VInput:qs,VItem:zXe,VItemGroup:GXe,VKbd:WXe,VLabel:Sh,VLayout:qXe,VLayoutItem:XXe,VLazy:ZXe,VLigatureIcon:Zne,VList:jv,VListGroup:J0,VListImg:xje,VListItem:jl,VListItemAction:JQ,VListItemMedia:Eje,VListItemSubtitle:QQ,VListItemTitle:GQ,VListSubheader:Bh,VLocaleProvider:tJe,VMain:aJe,VMenu:qv,VMessages:EQ,VNavigationDrawer:AJe,VNoSsr:fJe,VNumberInput:gJe,VOtpInput:_Je,VOverlay:Nu,VPagination:fB,VParallax:xJe,VProgressCircular:Bf,VProgressLinear:Yw,VRadio:SJe,VRadioGroup:BJe,VRangeSlider:TJe,VRating:FJe,VResponsive:XE,VRow:gXe,VScaleTransition:i4,VScrollXReverseTransition:tWe,VScrollXTransition:eWe,VScrollYReverseTransition:aWe,VScrollYTransition:nWe,VSelect:C4,VSelectionControl:Xd,VSelectionControlGroup:xQ,VSheet:Z0,VSkeletonLoader:RJe,VSlideGroup:Y0,VSlideGroupItem:NJe,VSlideXReverseTransition:sWe,VSlideXTransition:rWe,VSlideYReverseTransition:oWe,VSlideYTransition:l4,VSlider:AB,VSnackbar:bB,VSnackbarQueue:MJe,VSpacer:cG,VSparkline:QJe,VSpeedDial:zJe,VStepper:JJe,VStepperActions:EG,VStepperHeader:BG,VStepperItem:kG,VStepperWindow:TG,VStepperWindowItem:IG,VSvgIcon:bk,VSwitch:eZe,VSystemBar:nZe,VTab:FG,VTable:Pf,VTabs:lZe,VTabsWindow:PG,VTabsWindowItem:DG,VTextField:Vc,VTextarea:cZe,VThemeProvider:AZe,VTimePicker:xZe,VTimePickerClock:xB,VTimePickerControls:CB,VTimeline:pZe,VTimelineItem:vZe,VToolbar:JE,VToolbarItems:SZe,VToolbarTitle:o4,VTooltip:NG,VTreeview:TZe,VTreeviewGroup:SB,VTreeviewItem:EB,VValidation:IZe,VVirtualScroll:tb,VWindow:kf,VWindowItem:Tf},Symbol.toStringTag,{value:"Module"}));function PZe(e,t){const n=t.modifiers||{},a=t.value,{once:r,immediate:s,...o}=n,i=!Object.keys(o).length,{handler:c,options:A}=typeof a=="object"?a:{handler:a,options:{attributes:o?.attr??i,characterData:o?.char??i,childList:o?.child??i,subtree:o?.sub??i}},d=new MutationObserver(function(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],m=arguments.length>1?arguments[1]:void 0;c?.(f,m),r&&HG(e,t)});s&&c?.([],d),e._mutate=Object(e._mutate),e._mutate[t.instance.$.uid]={observer:d},d.observe(e,A)}function HG(e,t){e._mutate?.[t.instance.$.uid]&&(e._mutate[t.instance.$.uid].observer.disconnect(),delete e._mutate[t.instance.$.uid])}const DZe={mounted:PZe,unmounted:HG};function UZe(e,t){const n=t.value,a={passive:!t.modifiers?.active};window.addEventListener("resize",n,a),e._onResize=Object(e._onResize),e._onResize[t.instance.$.uid]={handler:n,options:a},t.modifiers?.quiet||n()}function RZe(e,t){if(!e._onResize?.[t.instance.$.uid])return;const{handler:n,options:a}=e._onResize[t.instance.$.uid];window.removeEventListener("resize",n,a),delete e._onResize[t.instance.$.uid]}const NZe={mounted:UZe,unmounted:RZe};function $G(e,t){const{self:n=!1}=t.modifiers??{},a=t.value,r=typeof a=="object"&&a.options||{passive:!0},s=typeof a=="function"||"handleEvent"in a?a:a.handler,o=n?e:t.arg?document.querySelector(t.arg):window;o&&(o.addEventListener("scroll",s,r),e._onScroll=Object(e._onScroll),e._onScroll[t.instance.$.uid]={handler:s,options:r,target:n?void 0:o})}function QG(e,t){if(!e._onScroll?.[t.instance.$.uid])return;const{handler:n,options:a,target:r=e}=e._onScroll[t.instance.$.uid];r.removeEventListener("scroll",n,a),delete e._onScroll[t.instance.$.uid]}function VZe(e,t){t.value!==t.oldValue&&(QG(e,t),$G(e,t))}const LZe={mounted:$G,unmounted:QG,updated:VZe};function MZe(e,t){const n=typeof e=="string"?I(e):e,a=OZe(n,t);return{mounted:a,updated:a,unmounted(r){N8(null,r)}}}function OZe(e,t){return function(n,a,r){const s=typeof t=="function"?t(a):t,o=a.value?.text??a.value??s?.text,i=_0(a.value)?a.value:{},c=()=>o??n.textContent,A=(r.ctx===a.instance.$?HZe(r,a.instance.$)?.provides:r.ctx?.provides)??a.instance.$.provides,d=Zl(e,Pe(s,i),c);d.appContext=Object.assign(Object.create(null),a.instance.$.appContext,{provides:A}),N8(d,n)}}function HZe(e,t){const n=new Set,a=s=>{for(const o of s){if(!o)continue;if(o===e||o.el&&e.el&&o.el===e.el)return!0;n.add(o);let i;if(o.suspense?i=a([o.ssContent]):Array.isArray(o.children)?i=a(o.children):o.component?.vnode&&(i=a([o.component?.subTree])),i)return i;n.delete(o)}return!1};if(!a([t.subTree]))return t;const r=Array.from(n).reverse();for(const s of r)if(s.component)return s.component;return t}const $Ze=MZe(NG,e=>({activator:"parent",location:e.arg?.replace("-"," "),text:typeof e.value=="boolean"?void 0:e.value})),QZe=Object.freeze(Object.defineProperty({__proto__:null,ClickOutside:oB,Intersect:Wl,Mutate:DZe,Resize:NZe,Ripple:xo,Scroll:LZe,Tooltip:$Ze,Touch:I2},Symbol.toStringTag,{value:"Module"}));const GZe=new Map,zZe={activated:!1,tokenObservers:[]};function ql(e){return GZe.get(e)||Object.assign({},zZe)}const JN={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3};class KZe{constructor(t,n,a,r,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=a,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new B0,this.pending.promise.catch(n=>{}),await WZe(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new B0,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function WZe(e){return new Promise(t=>{setTimeout(t,e)})}const jZe={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},D2=new oh("appCheck","AppCheck",jZe);function GG(e){if(!ql(e).activated)throw D2.create("use-before-activation",{appName:e.name})}const qZe="firebase-app-check-database",YZe=1,BB="firebase-app-check-store";let Uy=null;function XZe(){return Uy||(Uy=new Promise((e,t)=>{try{const n=indexedDB.open(qZe,YZe);n.onsuccess=a=>{e(a.target.result)},n.onerror=a=>{var r;t(D2.create("storage-open",{originalErrorMessage:(r=a.target.error)===null||r===void 0?void 0:r.message}))},n.onupgradeneeded=a=>{const r=a.target.result;switch(a.oldVersion){case 0:r.createObjectStore(BB,{keyPath:"compositeKey"})}}}catch(n){t(D2.create("storage-open",{originalErrorMessage:n?.message}))}}),Uy)}function JZe(e,t){return ZZe(eet(e),t)}async function ZZe(e,t){const a=(await XZe()).transaction(BB,"readwrite"),s=a.objectStore(BB).put({compositeKey:e,value:t});return new Promise((o,i)=>{s.onsuccess=c=>{o()},a.onerror=c=>{var A;i(D2.create("storage-set",{originalErrorMessage:(A=c.target.error)===null||A===void 0?void 0:A.message}))}})}function eet(e){return`${e.options.appId}-${e.name}`}const kB=new hg("@firebase/app-check");function ZN(e,t){return x5()?JZe(e,t).catch(n=>{kB.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}const tet={error:"UNKNOWN_ERROR"};function net(e){return hw.encodeString(JSON.stringify(e),!1)}async function TB(e,t=!1,n=!1){const a=e.app;GG(a);const r=ql(a);let s=r.token,o;if(s&&!Up(s)&&(r.token=void 0,s=void 0),!s){const A=await r.cachedTokenPromise;A&&(Up(A)?s=A:await ZN(a,void 0))}if(!t&&s&&Up(s))return{token:s.token};let i=!1;try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),i=!0),s=await ql(a).exchangeTokenPromise}catch(A){A.code==="appCheck/throttled"||A.code==="appCheck/initial-throttle"?kB.warn(A.message):n&&kB.error(A),o=A}let c;return s?o?Up(s)?c={token:s.token,internalError:o}:c=tV(o):(c={token:s.token},r.token=s,await ZN(a,s)):c=tV(o),i&&oet(a,c),c}async function aet(e){const t=e.app;GG(t);const{provider:n}=ql(t);{const{token:a}=await n.getToken();return{token:a}}}function ret(e,t,n,a){const{app:r}=e,s=ql(r),o={next:n,error:a,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Up(s.token)){const i=s.token;Promise.resolve().then(()=>{n({token:i.token}),eV(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>eV(e))}function zG(e,t){const n=ql(e),a=n.tokenObservers.filter(r=>r.next!==t);a.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=a}function eV(e){const{app:t}=e,n=ql(t);let a=n.tokenRefresher;a||(a=set(e),n.tokenRefresher=a),!a.isRunning()&&n.isTokenAutoRefreshEnabled&&a.start()}function set(e){const{app:t}=e;return new KZe(async()=>{const n=ql(t);let a;if(n.token?a=await TB(e,!0):a=await TB(e),a.error)throw a.error;if(a.internalError)throw a.internalError},()=>!0,()=>{const n=ql(t);if(n.token){let a=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const r=n.token.expireTimeMillis-300*1e3;return a=Math.min(a,r),Math.max(0,a-Date.now())}else return 0},JN.RETRIAL_MIN_WAIT,JN.RETRIAL_MAX_WAIT)}function oet(e,t){const n=ql(e).tokenObservers;for(const a of n)try{a.type==="EXTERNAL"&&t.error!=null?a.error(t.error):a.next(t)}catch{}}function Up(e){return e.expireTimeMillis-Date.now()>0}function tV(e){return{token:net(tet),error:e}}class iet{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=ql(this.app);for(const n of t)zG(this.app,n.next);return Promise.resolve()}}function uet(e,t){return new iet(e,t)}function cet(e){return{getToken:t=>TB(e,t),getLimitedUseToken:()=>aet(e),addTokenListener:t=>ret(e,"INTERNAL",t),removeTokenListener:t=>zG(e.app,t)}}const det="@firebase/app-check",Aet="0.10.1",fet="app-check",nV="app-check-internal";function met(){Pu(new Gl(fet,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return uet(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(nV).initialize()})),Pu(new Gl(nV,e=>{const t=e.getProvider("app-check").getImmediate();return cet(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),Bi(det,Aet)}met();const KG=Symbol("firebaseApp");function vet(e){return Mf()&&Tn(KG,null)||T5(e)}const Ry=new WeakMap;function het(e,t){if(!Ry.has(e)){const n=Rd(!0);Ry.set(e,n);const{unmount:a}=t;t.unmount=()=>{a.call(t),n.stop(),Ry.delete(e)}}return Ry.get(e)}const pet=new WeakMap,Ny=new WeakMap;function get(e){const t=vet(e);if(!Ny.has(t)){let n;const r=[new Promise(s=>{n=s}),s=>{Ny.set(t,s),n(s.value)}];Ny.set(t,r)}return Ny.get(t)}function yet(e,t){tM(t,n=>{const a=get();e.value=n,Array.isArray(a)&&a[1](e)})}var aV={};const rV="@firebase/database",sV="1.0.20";let WG="";function _et(e){WG=e}class wet{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Qs(n))}get(t){const n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:k0(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class bet{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return Hc(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const jG=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new wet(t)}}catch{}return new bet},XA=jG("localStorage"),xet=jG("sessionStorage");const xv=new hg("@firebase/database"),Cet=(function(){let e=1;return function(){return e++}})(),qG=function(e){const t=joe(e),n=new Qoe;n.update(t);const a=n.digest();return hw.encodeByteArray(a)},Qg=function(...e){let t="";for(let n=0;n<e.length;n++){const a=e[n];Array.isArray(a)||a&&typeof a=="object"&&typeof a.length=="number"?t+=Qg.apply(null,a):typeof a=="object"?t+=Qs(a):t+=a,t+=" "}return t};let i0=null,oV=!0;const Eet=function(e,t){on(!0,"Can't turn on custom loggers persistently."),xv.logLevel=ja.VERBOSE,i0=xv.log.bind(xv)},lo=function(...e){if(oV===!0&&(oV=!1,i0===null&&xet.get("logging_enabled")===!0&&Eet()),i0){const t=Qg.apply(null,e);i0(t)}},Gg=function(e){return function(...t){lo(e,...t)}},IB=function(...e){const t="FIREBASE INTERNAL ERROR: "+Qg(...e);xv.error(t)},Df=function(...e){const t=`FIREBASE FATAL ERROR: ${Qg(...e)}`;throw xv.error(t),new Error(t)},ki=function(...e){const t="FIREBASE WARNING: "+Qg(...e);xv.warn(t)},Bet=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ki("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},YG=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},ket=function(e){if(document.readyState==="complete")e();else{let t=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Xv="[MIN_NAME]",Uf="[MAX_NAME]",Ih=function(e,t){if(e===t)return 0;if(e===Xv||t===Uf)return-1;if(t===Xv||e===Uf)return 1;{const n=iV(e),a=iV(t);return n!==null?a!==null?n-a===0?e.length-t.length:n-a:-1:a!==null?1:e<t?-1:1}},Tet=function(e,t){return e===t?0:e<t?-1:1},mp=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Qs(t))},Q4=function(e){if(typeof e!="object"||e===null)return Qs(e);const t=[];for(const a in e)t.push(a);t.sort();let n="{";for(let a=0;a<t.length;a++)a!==0&&(n+=","),n+=Qs(t[a]),n+=":",n+=Q4(e[t[a]]);return n+="}",n},XG=function(e,t){const n=e.length;if(n<=t)return[e];const a=[];for(let r=0;r<n;r+=t)r+t>n?a.push(e.substring(r,n)):a.push(e.substring(r,r+t));return a};function al(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const JG=function(e){on(!YG(e),"Invalid JSON number");const t=11,n=52,a=(1<<t-1)-1;let r,s,o,i,c;e===0?(s=0,o=0,r=1/e===-1/0?1:0):(r=e<0,e=Math.abs(e),e>=Math.pow(2,1-a)?(i=Math.min(Math.floor(Math.log(e)/Math.LN2),a),s=i+a,o=Math.round(e*Math.pow(2,n-i)-Math.pow(2,n))):(s=0,o=Math.round(e/Math.pow(2,1-a-n))));const A=[];for(c=n;c;c-=1)A.push(o%2?1:0),o=Math.floor(o/2);for(c=t;c;c-=1)A.push(s%2?1:0),s=Math.floor(s/2);A.push(r?1:0),A.reverse();const d=A.join("");let f="";for(c=0;c<64;c+=8){let m=parseInt(d.substr(c,8),2).toString(16);m.length===1&&(m="0"+m),f=f+m}return f.toLowerCase()},Iet=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Fet=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},Pet=new RegExp("^-?(0*)\\d{1,10}$"),Det=-2147483648,Uet=2147483647,iV=function(e){if(Pet.test(e)){const t=Number(e);if(t>=Det&&t<=Uet)return t}return null},zg=function(e){try{e()}catch(t){setTimeout(()=>{const n=t.stack||"";throw ki("Exception was thrown by user callback.",n),t},Math.floor(0))}},Ret=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},l0=function(e,t){const n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};class Net{constructor(t,n){this.appCheckProvider=n,this.appName=t.name,ji(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(a=>this.appCheck=a)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((n,a)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,a):n(null)},0)})}addTokenChangeListener(t){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(a=>a.addTokenListener(t))}notifyForInvalidToken(){ki(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Vet{constructor(t,n,a){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=a,this.auth_=null,this.auth_=a.getImmediate({optional:!0}),this.auth_||a.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(lo("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,a)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,a):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ki(t)}}const G4="5",ZG="v",ez="s",tz="r",nz="f",az=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,rz="ls",sz="p",FB="ac",oz="websocket",iz="long_polling";class Let{constructor(t,n,a,r,s=!1,o="",i=!1,c=!1,A=null){this.secure=n,this.namespace=a,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=i,this.isUsingEmulator=c,this.emulatorOptions=A,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=XA.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&XA.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}}function Met(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function lz(e,t,n){on(typeof t=="string","typeof type must == string"),on(typeof n=="object","typeof params must == object");let a;if(t===oz)a=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===iz)a=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);Met(e)&&(n.ns=e.namespace);const r=[];return al(n,(s,o)=>{r.push(s+"="+o)}),a+r.join("&")}class Oet{constructor(){this.counters_={}}incrementCounter(t,n=1){Hc(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return boe(this.counters_)}}const XC={},JC={};function z4(e){const t=e.toString();return XC[t]||(XC[t]=new Oet),XC[t]}function Het(e,t){const n=e.toString();return JC[n]||(JC[n]=t()),JC[n]}class $et{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){const a=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<a.length;++r)a[r]&&zg(()=>{this.onMessage_(a[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const lV="start",Qet="close",Get="pLPCommand",zet="pRTLPCB",uz="id",cz="pw",dz="ser",Ket="cb",Wet="seg",jet="ts",qet="d",Yet="dframe",Az=1870,fz=30,Xet=Az-fz,Jet=25e3,Zet=3e4;class av{constructor(t,n,a,r,s,o,i){this.connId=t,this.repoInfo=n,this.applicationId=a,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Gg(t),this.stats_=z4(n),this.urlFn=c=>(this.appCheckToken&&(c[FB]=this.appCheckToken),lz(n,iz,c))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new $et(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Zet)),ket(()=>{if(this.isClosed_)return;this.scriptTagHolder=new K4((...s)=>{const[o,i,c,A,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===lV)this.id=i,this.password=c;else if(o===Qet)i?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(i,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,i]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,i)},()=>{this.onClosed_()},this.urlFn);const a={};a[lV]="t",a[dz]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(a[Ket]=this.scriptTagHolder.uniqueCallbackIdentifier),a[ZG]=G4,this.transportSessionId&&(a[ez]=this.transportSessionId),this.lastSessionId&&(a[rz]=this.lastSessionId),this.applicationId&&(a[sz]=this.applicationId),this.appCheckToken&&(a[FB]=this.appCheckToken),typeof location<"u"&&location.hostname&&az.test(location.hostname)&&(a[tz]=nz);const r=this.urlFn(a);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){av.forceAllow_=!0}static forceDisallow(){av.forceDisallow_=!0}static isAvailable(){return av.forceAllow_?!0:!av.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Iet()&&!Fet()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const n=Qs(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const a=p5(n),r=XG(a,Xet);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(t,n){this.myDisconnFrame=document.createElement("iframe");const a={};a[Yet]="t",a[uz]=t,a[cz]=n,this.myDisconnFrame.src=this.urlFn(a),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const n=Qs(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class K4{constructor(t,n,a,r){this.onDisconnect=a,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Cet(),window[Get+this.uniqueCallbackIdentifier]=t,window[zet+this.uniqueCallbackIdentifier]=n,this.myIFrame=K4.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(i){lo("frame writing exception"),i.stack&&lo(i.stack),lo(i)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||lo("No IE domain setting required")}catch{const a=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+a+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[uz]=this.myID,t[cz]=this.myPW,t[dz]=this.currentSerial;let n=this.urlFn(t),a="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+fz+a.length<=Az;){const o=this.pendingSegs.shift();a=a+"&"+Wet+r+"="+o.seg+"&"+jet+r+"="+o.ts+"&"+qet+r+"="+o.d,r++}return n=n+a,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,a){this.pendingSegs.push({seg:t,ts:n,d:a}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);const a=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(a,Math.floor(Jet)),s=()=>{clearTimeout(r),a()};this.addTag(t,s)}addTag(t,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const a=this.myIFrame.doc.createElement("script");a.type="text/javascript",a.async=!0,a.src=t,a.onload=a.onreadystatechange=function(){const r=a.readyState;(!r||r==="loaded"||r==="complete")&&(a.onload=a.onreadystatechange=null,a.parentNode&&a.parentNode.removeChild(a),n())},a.onerror=()=>{lo("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(a)}catch{}},Math.floor(1))}}const ett=16384,ttt=45e3;let U2=null;typeof MozWebSocket<"u"?U2=MozWebSocket:typeof WebSocket<"u"&&(U2=WebSocket);class Bl{constructor(t,n,a,r,s,o,i){this.connId=t,this.applicationId=a,this.appCheckToken=r,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Gg(this.connId),this.stats_=z4(n),this.connURL=Bl.connectionURL_(n,o,i,r,a),this.nodeAdmin=n.nodeAdmin}static connectionURL_(t,n,a,r,s){const o={};return o[ZG]=G4,typeof location<"u"&&location.hostname&&az.test(location.hostname)&&(o[tz]=nz),n&&(o[ez]=n),a&&(o[rz]=a),r&&(o[FB]=r),s&&(o[sz]=s),lz(t,oz,o)}open(t,n){this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,XA.set("previous_websocket_failure",!0);try{let a;Noe(),this.mySock=new U2(this.connURL,[],a)}catch(a){this.log_("Error instantiating WebSocket.");const r=a.message||a.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=a=>{this.handleIncomingFrame(a)},this.mySock.onerror=a=>{this.log_("WebSocket error.  Closing connection.");const r=a.message||a.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){Bl.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,a=navigator.userAgent.match(n);a&&a.length>1&&parseFloat(a[1])<4.4&&(t=!0)}return!t&&U2!==null&&!Bl.forceDisallow_}static previouslyFailed(){return XA.isInMemoryStorage||XA.get("previous_websocket_failure")===!0}markConnectionHealthy(){XA.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const a=k0(n);this.onMessage(a)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(on(this.frames===null,"We already have a frame buffer"),t.length<=6){const n=Number(t);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const n=t.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const a=this.extractFrameCount_(n);a!==null&&this.appendFrame_(a)}}send(t){this.resetKeepAlive();const n=Qs(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const a=XG(n,ett);a.length>1&&this.sendString_(String(a.length));for(let r=0;r<a.length;r++)this.sendString_(a[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(ttt))}sendString_(t){try{this.mySock.send(t)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Bl.responsesRequiredToBeHealthy=2;Bl.healthyTimeout=3e4;class ng{static get ALL_TRANSPORTS(){return[av,Bl]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const n=Bl&&Bl.isAvailable();let a=n&&!Bl.previouslyFailed();if(t.webSocketOnly&&(n||ki("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),a=!0),a)this.transports_=[Bl];else{const r=this.transports_=[];for(const s of ng.ALL_TRANSPORTS)s&&s.isAvailable()&&r.push(s);ng.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ng.globalTransportInitialized_=!1;const ntt=6e4,att=5e3,rtt=10*1024,stt=100*1024,ZC="t",uV="d",ott="s",cV="r",itt="e",dV="o",AV="a",fV="n",mV="p",ltt="h";class utt{constructor(t,n,a,r,s,o,i,c,A,d){this.id=t,this.repoInfo_=n,this.applicationId_=a,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=i,this.onDisconnect_=c,this.onKill_=A,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Gg("c:"+this.id+":"),this.transportManager_=new ng(n),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),a=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,a)},Math.floor(0));const r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=l0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>stt?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>rtt?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){const n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(ZC in t){const n=t[ZC];n===AV?this.upgradeIfSecondaryHealthy_():n===cV?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===dV&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const n=mp("t",t),a=mp("d",t);if(n==="c")this.onSecondaryControl_(a);else if(n==="d")this.pendingDataMessages.push(a);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:mV,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:AV,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:fV,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const n=mp("t",t),a=mp("d",t);n==="c"?this.onControl_(a):n==="d"&&this.onDataMessage_(a)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const n=mp(ZC,t);if(uV in t){const a=t[uV];if(n===ltt){const r=Object.assign({},a);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===fV){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===ott?this.onConnectionShutdown_(a):n===cV?this.onReset_(a):n===itt?IB("Server Error: "+a):n===dV?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):IB("Unknown control packet command: "+n)}}onHandshake_(t){const n=t.ts,a=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),G4!==a&&ki("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),a=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,a),l0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(ntt))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):l0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(att))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:mV,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(XA.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class mz{put(t,n,a,r){}merge(t,n,a,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,a){}onDisconnectMerge(t,n,a){}onDisconnectCancel(t,n){}reportStats(t){}}class vz{constructor(t){this.allowedEvents_=t,this.listeners_={},on(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){const a=[...this.listeners_[t]];for(let r=0;r<a.length;r++)a[r].callback.apply(a[r].context,n)}}on(t,n,a){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:a});const r=this.getInitialEvent(t);r&&n.apply(a,r)}off(t,n,a){this.validateEventType_(t);const r=this.listeners_[t]||[];for(let s=0;s<r.length;s++)if(r[s].callback===n&&(!a||a===r[s].context)){r.splice(s,1);return}}validateEventType_(t){on(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}}class R2 extends vz{static getInstance(){return new R2}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Nk()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return on(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}const vV=32,hV=768;class br{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let a=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[a]=this.pieces_[r],a++);this.pieces_.length=a,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}}function nr(){return new br("")}function xa(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Zd(e){return e.pieces_.length-e.pieceNum_}function pr(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new br(e.pieces_,t)}function hz(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function ctt(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function pz(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function gz(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new br(t,0)}function Ps(e,t){const n=[];for(let a=e.pieceNum_;a<e.pieces_.length;a++)n.push(e.pieces_[a]);if(t instanceof br)for(let a=t.pieceNum_;a<t.pieces_.length;a++)n.push(t.pieces_[a]);else{const a=t.split("/");for(let r=0;r<a.length;r++)a[r].length>0&&n.push(a[r])}return new br(n,0)}function ga(e){return e.pieceNum_>=e.pieces_.length}function Ji(e,t){const n=xa(e),a=xa(t);if(n===null)return t;if(n===a)return Ji(pr(e),pr(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function yz(e,t){if(Zd(e)!==Zd(t))return!1;for(let n=e.pieceNum_,a=t.pieceNum_;n<=e.pieces_.length;n++,a++)if(e.pieces_[n]!==t.pieces_[a])return!1;return!0}function Pl(e,t){let n=e.pieceNum_,a=t.pieceNum_;if(Zd(e)>Zd(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[a])return!1;++n,++a}return!0}class dtt{constructor(t,n){this.errorPrefix_=n,this.parts_=pz(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let a=0;a<this.parts_.length;a++)this.byteLength_+=gw(this.parts_[a]);_z(this)}}function Att(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=gw(t),_z(e)}function ftt(e){const t=e.parts_.pop();e.byteLength_-=gw(t),e.parts_.length>0&&(e.byteLength_-=1)}function _z(e){if(e.byteLength_>hV)throw new Error(e.errorPrefix_+"has a key path longer than "+hV+" bytes ("+e.byteLength_+").");if(e.parts_.length>vV)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+vV+") or object contains a cycle "+MA(e))}function MA(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}class W4 extends vz{static getInstance(){return new W4}constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const a=!document[t];a!==this.visible_&&(this.visible_=a,this.trigger("visible",a))},!1)}getInitialEvent(t){return on(t==="visible","Unknown event type: "+t),[this.visible_]}}const vp=1e3,mtt=300*1e3,pV=30*1e3,vtt=1.3,htt=3e4,ptt="server_kill",gV=3;class Ec extends mz{constructor(t,n,a,r,s,o,i,c){if(super(),this.repoInfo_=t,this.applicationId_=n,this.onDataUpdate_=a,this.onConnectStatus_=r,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=i,this.authOverride_=c,this.id=Ec.nextPersistentConnectionId_++,this.log_=Gg("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=vp,this.maxReconnectDelay_=mtt,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");W4.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&R2.getInstance().on("online",this.onOnline_,this)}sendRequest(t,n,a){const r=++this.requestNumber_,s={r,a:t,b:n};this.log_(Qs(s)),on(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),a&&(this.requestCBHash_[r]=a)}get(t){this.initConnection_();const n=new B0,r={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:o=>{const i=o.d;o.s==="ok"?n.resolve(i):n.reject(i)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(t,n,a,r){this.initConnection_();const s=t._queryIdentifier,o=t._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),on(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),on(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const i={onComplete:r,hashFn:n,query:t,tag:a};this.listens.get(o).set(s,i),this.connected_&&this.sendListen_(i)}sendGet_(t){const n=this.outstandingGets_[t];this.sendRequest("g",n.request,a=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(a)})}sendListen_(t){const n=t.query,a=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+a+" for "+r);const s={p:a},o="q";t.tag&&(s.q=n._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest(o,s,i=>{const c=i.d,A=i.s;Ec.warnOnListenWarnings_(c,n),(this.listens.get(a)&&this.listens.get(a).get(r))===t&&(this.log_("listen response",i),A!=="ok"&&this.removeListen_(a,r),t.onComplete&&t.onComplete(A,c))})}static warnOnListenWarnings_(t,n){if(t&&typeof t=="object"&&Hc(t,"w")){const a=Vv(t,"w");if(Array.isArray(a)&&~a.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();ki(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||$oe(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=pV)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,n=Hoe(t)?"auth":"gauth",a={cred:t};this.authOverride_===null?a.noauth=!0:typeof this.authOverride_=="object"&&(a.authvar=this.authOverride_),this.sendRequest(n,a,r=>{const s=r.s,o=r.d||"error";this.authToken_===t&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const n=t.s,a=t.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,a)})}unlisten(t,n){const a=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+a+" "+r),on(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(a,r)&&this.connected_&&this.sendUnlisten_(a,r,t._queryObject,n)}sendUnlisten_(t,n,a,r){this.log_("Unlisten on "+t+" for "+n);const s={p:t},o="n";r&&(s.q=a,s.t=r),this.sendRequest(o,s)}onDisconnectPut(t,n,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,n,a):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:n,onComplete:a})}onDisconnectMerge(t,n,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,n,a):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:n,onComplete:a})}onDisconnectCancel(t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(t,n,a,r){const s={p:n,d:a};this.log_("onDisconnect "+t,s),this.sendRequest(t,s,o=>{r&&setTimeout(()=>{r(o.s,o.d)},Math.floor(0))})}put(t,n,a,r){this.putInternal("p",t,n,a,r)}merge(t,n,a,r){this.putInternal("m",t,n,a,r)}putInternal(t,n,a,r,s){this.initConnection_();const o={p:n,d:a};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;const i=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(i):this.log_("Buffering put: "+n)}sendPut_(t){const n=this.outstandingPuts_[t].action,a=this.outstandingPuts_[t].request,r=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,a,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(s.s,s.d)})}reportStats(t){if(this.connected_){const n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,a=>{if(a.s!=="ok"){const s=a.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Qs(t));const n=t.r,a=this.requestCBHash_[n];a&&(delete this.requestCBHash_[n],a(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,n){this.log_("handleServerMessage",t,n),t==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):t==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):t==="c"?this.onListenRevoked_(n.p,n.q):t==="ac"?this.onAuthRevoked_(n.s,n.d):t==="apc"?this.onAppCheckRevoked_(n.s,n.d):t==="sd"?this.onSecurityDebugPacket_(n):IB("Unrecognized action received from server: "+Qs(t)+`
Are you using the latest client?`)}onReady_(t,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){on(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=vp,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=vp,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>htt&&(this.reconnectDelay_=vp),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-t);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*vtt)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),a=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Ec.nextConnectionId_++,s=this.lastSessionId;let o=!1,i=null;const c=function(){i?i.close():(o=!0,a())},A=function(f){on(i,"sendRequest call when we're not connected not allowed."),i.sendRequest(f)};this.realtime_={close:c,sendRequest:A};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[f,m]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?lo("getToken() completed but was canceled"):(lo("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=m&&m.token,i=new utt(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,a,v=>{ki(v+" ("+this.repoInfo_.toString()+")"),this.interrupt(ptt)},s))}catch(f){this.log_("Failed to get token: "+f),o||(this.repoInfo_.nodeAdmin&&ki(f),c())}}}interrupt(t){lo("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){lo("Resuming connection for reason: "+t),delete this.interruptReasons_[t],zS(this.interruptReasons_)&&(this.reconnectDelay_=vp,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const n=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const n=this.outstandingPuts_[t];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,n){let a;n?a=n.map(s=>Q4(s)).join("$"):a="default";const r=this.removeListen_(t,a);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(t,n){const a=new br(t).toString();let r;if(this.listens.has(a)){const s=this.listens.get(a);r=s.get(n),s.delete(n),s.size===0&&this.listens.delete(a)}else r=void 0;return r}onAuthRevoked_(t,n){lo("Auth token revoked: "+t+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=gV&&(this.reconnectDelay_=pV,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,n){lo("App check token revoked: "+t+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=gV&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const n of t.values())this.sendListen_(n);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let n="js";t["sdk."+n+"."+WG.replace(/\./g,"-")]=1,Nk()?t["framework.cordova"]=1:b5()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=R2.getInstance().currentlyOnline();return zS(this.interruptReasons_)&&t}}Ec.nextPersistentConnectionId_=0;Ec.nextConnectionId_=0;class Ca{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new Ca(t,n)}}class vb{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){const a=new Ca(Xv,t),r=new Ca(Xv,n);return this.compare(a,r)!==0}minPost(){return Ca.MIN}}let Vy;class wz extends vb{static get __EMPTY_NODE(){return Vy}static set __EMPTY_NODE(t){Vy=t}compare(t,n){return Ih(t.name,n.name)}isDefinedOn(t){throw sh("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return Ca.MIN}maxPost(){return new Ca(Uf,Vy)}makePost(t,n){return on(typeof t=="string","KeyIndex indexValue must always be a string."),new Ca(t,Vy)}toString(){return".key"}}const Cv=new wz;class Ly{constructor(t,n,a,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!t.isEmpty();)if(t=t,o=n?a(t.key,n):1,r&&(o*=-1),o<0)this.isReverse_?t=t.left:t=t.right;else if(o===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class Fs{constructor(t,n,a,r,s){this.key=t,this.value=n,this.color=a??Fs.RED,this.left=r??ri.EMPTY_NODE,this.right=s??ri.EMPTY_NODE}copy(t,n,a,r,s){return new Fs(t??this.key,n??this.value,a??this.color,r??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,a){let r=this;const s=a(t,r.key);return s<0?r=r.copy(null,null,null,r.left.insert(t,n,a),null):s===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(t,n,a)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return ri.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,n){let a,r;if(a=this,n(t,a.key)<0)!a.left.isEmpty()&&!a.left.isRed_()&&!a.left.left.isRed_()&&(a=a.moveRedLeft_()),a=a.copy(null,null,null,a.left.remove(t,n),null);else{if(a.left.isRed_()&&(a=a.rotateRight_()),!a.right.isEmpty()&&!a.right.isRed_()&&!a.right.left.isRed_()&&(a=a.moveRedRight_()),n(t,a.key)===0){if(a.right.isEmpty())return ri.EMPTY_NODE;r=a.right.min_(),a=a.copy(r.key,r.value,null,null,a.right.removeMin_())}a=a.copy(null,null,null,null,a.right.remove(t,n))}return a.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,Fs.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,Fs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}Fs.RED=!0;Fs.BLACK=!1;class gtt{copy(t,n,a,r,s){return this}insert(t,n,a){return new Fs(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ri{constructor(t,n=ri.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new ri(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Fs.BLACK,null,null))}remove(t){return new ri(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Fs.BLACK,null,null))}get(t){let n,a=this.root_;for(;!a.isEmpty();){if(n=this.comparator_(t,a.key),n===0)return a.value;n<0?a=a.left:n>0&&(a=a.right)}return null}getPredecessorKey(t){let n,a=this.root_,r=null;for(;!a.isEmpty();)if(n=this.comparator_(t,a.key),n===0){if(a.left.isEmpty())return r?r.key:null;for(a=a.left;!a.right.isEmpty();)a=a.right;return a.key}else n<0?a=a.left:n>0&&(r=a,a=a.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Ly(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new Ly(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new Ly(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new Ly(this.root_,null,this.comparator_,!0,t)}}ri.EMPTY_NODE=new gtt;function ytt(e,t){return Ih(e.name,t.name)}function j4(e,t){return Ih(e,t)}let PB;function _tt(e){PB=e}const bz=function(e){return typeof e=="number"?"number:"+JG(e):"string:"+e},xz=function(e){if(e.isLeafNode()){const t=e.val();on(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Hc(t,".sv"),"Priority must be a string or number.")}else on(e===PB||e.isEmpty(),"priority of unexpected type.");on(e===PB||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let yV;class Ts{static set __childrenNodeConstructor(t){yV=t}static get __childrenNodeConstructor(){return yV}constructor(t,n=Ts.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=n,this.lazyHash_=null,on(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),xz(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new Ts(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:Ts.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return ga(t)?this:xa(t)===".priority"?this.priorityNode_:Ts.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,n){return null}updateImmediateChild(t,n){return t===".priority"?this.updatePriority(n):n.isEmpty()&&t!==".priority"?this:Ts.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}updateChild(t,n){const a=xa(t);return a===null?n:n.isEmpty()&&a!==".priority"?this:(on(a!==".priority"||Zd(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(a,Ts.__childrenNodeConstructor.EMPTY_NODE.updateChild(pr(t),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,n){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+bz(this.priorityNode_.val())+":");const n=typeof this.value_;t+=n+":",n==="number"?t+=JG(this.value_):t+=this.value_,this.lazyHash_=qG(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===Ts.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Ts.__childrenNodeConstructor?-1:(on(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const n=typeof t.value_,a=typeof this.value_,r=Ts.VALUE_TYPE_ORDER.indexOf(n),s=Ts.VALUE_TYPE_ORDER.indexOf(a);return on(r>=0,"Unknown leaf type: "+n),on(s>=0,"Unknown leaf type: "+a),r===s?a==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:s-r}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const n=t;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Ts.VALUE_TYPE_ORDER=["object","boolean","number","string"];let Cz,Sz;function wtt(e){Cz=e}function btt(e){Sz=e}class xtt extends vb{compare(t,n){const a=t.node.getPriority(),r=n.node.getPriority(),s=a.compareTo(r);return s===0?Ih(t.name,n.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return Ca.MIN}maxPost(){return new Ca(Uf,new Ts("[PRIORITY-POST]",Sz))}makePost(t,n){const a=Cz(t);return new Ca(n,new Ts("[PRIORITY-POST]",a))}toString(){return".priority"}}const po=new xtt;const Ctt=Math.log(2);class Stt{constructor(t){const n=s=>parseInt(Math.log(s)/Ctt,10),a=s=>parseInt(Array(s+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;const r=a(this.count);this.bits_=t+1&r}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const N2=function(e,t,n,a){e.sort(t);const r=function(c,A){const d=A-c;let f,m;if(d===0)return null;if(d===1)return f=e[c],m=n?n(f):f,new Fs(m,f.node,Fs.BLACK,null,null);{const v=parseInt(d/2,10)+c,p=r(c,v),g=r(v+1,A);return f=e[v],m=n?n(f):f,new Fs(m,f.node,Fs.BLACK,p,g)}},s=function(c){let A=null,d=null,f=e.length;const m=function(p,g){const y=f-p,w=f;f-=p;const b=r(y+1,w),x=e[y],T=n?n(x):x;v(new Fs(T,x.node,g,null,b))},v=function(p){A?(A.left=p,A=p):(d=p,A=p)};for(let p=0;p<c.count;++p){const g=c.nextBitIsOne(),y=Math.pow(2,c.count-(p+1));g?m(y,Fs.BLACK):(m(y,Fs.BLACK),m(y,Fs.RED))}return d},o=new Stt(e.length),i=s(o);return new ri(a||t,i)};let eS;const Qm={};class bc{static get Default(){return on(Qm&&po,"ChildrenNode.ts has not been loaded"),eS=eS||new bc({".priority":Qm},{".priority":po}),eS}constructor(t,n){this.indexes_=t,this.indexSet_=n}get(t){const n=Vv(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof ri?n:null}hasIndex(t){return Hc(this.indexSet_,t.toString())}addIndex(t,n){on(t!==Cv,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const a=[];let r=!1;const s=n.getIterator(Ca.Wrap);let o=s.getNext();for(;o;)r=r||t.isDefinedOn(o.node),a.push(o),o=s.getNext();let i;r?i=N2(a,t.getCompare()):i=Qm;const c=t.toString(),A=Object.assign({},this.indexSet_);A[c]=t;const d=Object.assign({},this.indexes_);return d[c]=i,new bc(d,A)}addToIndexes(t,n){const a=N_(this.indexes_,(r,s)=>{const o=Vv(this.indexSet_,s);if(on(o,"Missing index implementation for "+s),r===Qm)if(o.isDefinedOn(t.node)){const i=[],c=n.getIterator(Ca.Wrap);let A=c.getNext();for(;A;)A.name!==t.name&&i.push(A),A=c.getNext();return i.push(t),N2(i,o.getCompare())}else return Qm;else{const i=n.get(t.name);let c=r;return i&&(c=c.remove(new Ca(t.name,i))),c.insert(t,t.node)}});return new bc(a,this.indexSet_)}removeFromIndexes(t,n){const a=N_(this.indexes_,r=>{if(r===Qm)return r;{const s=n.get(t.name);return s?r.remove(new Ca(t.name,s)):r}});return new bc(a,this.indexSet_)}}let hp;class qa{static get EMPTY_NODE(){return hp||(hp=new qa(new ri(j4),null,bc.Default))}constructor(t,n,a){this.children_=t,this.priorityNode_=n,this.indexMap_=a,this.lazyHash_=null,this.priorityNode_&&xz(this.priorityNode_),this.children_.isEmpty()&&on(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||hp}updatePriority(t){return this.children_.isEmpty()?this:new qa(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const n=this.children_.get(t);return n===null?hp:n}}getChild(t){const n=xa(t);return n===null?this:this.getImmediateChild(n).getChild(pr(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,n){if(on(n,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(n);{const a=new Ca(t,n);let r,s;n.isEmpty()?(r=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),s=this.indexMap_.addToIndexes(a,this.children_));const o=r.isEmpty()?hp:this.priorityNode_;return new qa(r,o,s)}}updateChild(t,n){const a=xa(t);if(a===null)return n;{on(xa(t)!==".priority"||Zd(t)===1,".priority must be the last token in a path");const r=this.getImmediateChild(a).updateChild(pr(t),n);return this.updateImmediateChild(a,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const n={};let a=0,r=0,s=!0;if(this.forEachChild(po,(o,i)=>{n[o]=i.val(t),a++,s&&qa.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):s=!1}),!t&&s&&r<2*a){const o=[];for(const i in n)o[i]=n[i];return o}else return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+bz(this.getPriority().val())+":"),this.forEachChild(po,(n,a)=>{const r=a.hash();r!==""&&(t+=":"+n+":"+r)}),this.lazyHash_=t===""?"":qG(t)}return this.lazyHash_}getPredecessorChildName(t,n,a){const r=this.resolveIndex_(a);if(r){const s=r.getPredecessorKey(new Ca(t,n));return s?s.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const n=this.resolveIndex_(t);if(n){const a=n.minKey();return a&&a.name}else return this.children_.minKey()}getFirstChild(t){const n=this.getFirstChildName(t);return n?new Ca(n,this.children_.get(n)):null}getLastChildName(t){const n=this.resolveIndex_(t);if(n){const a=n.maxKey();return a&&a.name}else return this.children_.maxKey()}getLastChild(t){const n=this.getLastChildName(t);return n?new Ca(n,this.children_.get(n)):null}forEachChild(t,n){const a=this.resolveIndex_(t);return a?a.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,n){const a=this.resolveIndex_(n);if(a)return a.getIteratorFrom(t,r=>r);{const r=this.children_.getIteratorFrom(t.name,Ca.Wrap);let s=r.peek();for(;s!=null&&n.compare(s,t)<0;)r.getNext(),s=r.peek();return r}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,n){const a=this.resolveIndex_(n);if(a)return a.getReverseIteratorFrom(t,r=>r);{const r=this.children_.getReverseIteratorFrom(t.name,Ca.Wrap);let s=r.peek();for(;s!=null&&n.compare(s,t)>0;)r.getNext(),s=r.peek();return r}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Kg?-1:0}withIndex(t){if(t===Cv||this.indexMap_.hasIndex(t))return this;{const n=this.indexMap_.addIndex(t,this.children_);return new qa(this.children_,this.priorityNode_,n)}}isIndexed(t){return t===Cv||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const n=t;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const a=this.getIterator(po),r=n.getIterator(po);let s=a.getNext(),o=r.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=a.getNext(),o=r.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(t){return t===Cv?null:this.indexMap_.get(t.toString())}}qa.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Ett extends qa{constructor(){super(new ri(j4),qa.EMPTY_NODE,bc.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return qa.EMPTY_NODE}isEmpty(){return!1}}const Kg=new Ett;Object.defineProperties(Ca,{MIN:{value:new Ca(Xv,qa.EMPTY_NODE)},MAX:{value:new Ca(Uf,Kg)}});wz.__EMPTY_NODE=qa.EMPTY_NODE;Ts.__childrenNodeConstructor=qa;_tt(Kg);btt(Kg);const Btt=!0;function uo(e,t=null){if(e===null)return qa.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),on(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){const n=e;return new Ts(n,uo(t))}if(!(e instanceof Array)&&Btt){const n=[];let a=!1;if(al(e,(o,i)=>{if(o.substring(0,1)!=="."){const c=uo(i);c.isEmpty()||(a=a||!c.getPriority().isEmpty(),n.push(new Ca(o,c)))}}),n.length===0)return qa.EMPTY_NODE;const s=N2(n,ytt,o=>o.name,j4);if(a){const o=N2(n,po.getCompare());return new qa(s,uo(t),new bc({".priority":o},{".priority":po}))}else return new qa(s,uo(t),bc.Default)}else{let n=qa.EMPTY_NODE;return al(e,(a,r)=>{if(Hc(e,a)&&a.substring(0,1)!=="."){const s=uo(r);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(a,s))}}),n.updatePriority(uo(t))}}wtt(uo);class ktt extends vb{constructor(t){super(),this.indexPath_=t,on(!ga(t)&&xa(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){const a=this.extractChild(t.node),r=this.extractChild(n.node),s=a.compareTo(r);return s===0?Ih(t.name,n.name):s}makePost(t,n){const a=uo(t),r=qa.EMPTY_NODE.updateChild(this.indexPath_,a);return new Ca(n,r)}maxPost(){const t=qa.EMPTY_NODE.updateChild(this.indexPath_,Kg);return new Ca(Uf,t)}toString(){return pz(this.indexPath_,0).join("/")}}class Ttt extends vb{compare(t,n){const a=t.node.compareTo(n.node);return a===0?Ih(t.name,n.name):a}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return Ca.MIN}maxPost(){return Ca.MAX}makePost(t,n){const a=uo(t);return new Ca(n,a)}toString(){return".value"}}const Itt=new Ttt;function Ftt(e){return{type:"value",snapshotNode:e}}function Ptt(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Dtt(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function _V(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function Utt(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}class q4{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=po}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return on(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return on(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Xv}hasEnd(){return this.endSet_}getIndexEndValue(){return on(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return on(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Uf}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return on(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===po}copy(){const t=new q4;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function wV(e){const t={};if(e.isDefault())return t;let n;if(e.index_===po?n="$priority":e.index_===Itt?n="$value":e.index_===Cv?n="$key":(on(e.index_ instanceof ktt,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Qs(n),e.startSet_){const a=e.startAfterSet_?"startAfter":"startAt";t[a]=Qs(e.indexStartValue_),e.startNameSet_&&(t[a]+=","+Qs(e.indexStartName_))}if(e.endSet_){const a=e.endBeforeSet_?"endBefore":"endAt";t[a]=Qs(e.indexEndValue_),e.endNameSet_&&(t[a]+=","+Qs(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function bV(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==po&&(t.i=e.index_.toString()),t}class V2 extends mz{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(on(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,n,a,r){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=a,this.appCheckTokenProvider_=r,this.log_=Gg("p:rest:"),this.listens_={}}listen(t,n,a,r){const s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);const o=V2.getListenId_(t,a),i={};this.listens_[o]=i;const c=wV(t._queryParams);this.restRequest_(s+".json",c,(A,d)=>{let f=d;if(A===404&&(f=null,A=null),A===null&&this.onDataUpdate_(s,f,!1,a),Vv(this.listens_,o)===i){let m;A?A===401?m="permission_denied":m="rest_error:"+A:m="ok",r(m,null)}})}unlisten(t,n){const a=V2.getListenId_(t,n);delete this.listens_[a]}get(t){const n=wV(t._queryParams),a=t._path.toString(),r=new B0;return this.restRequest_(a+".json",n,(s,o)=>{let i=o;s===404&&(i=null,s=null),s===null?(this.onDataUpdate_(a,i,!1,null),r.resolve(i)):r.reject(new Error(i))}),r.promise}refreshAuthToken(t){}restRequest_(t,n={},a){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(n.auth=r.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+ih(n);this.log_("Sending REST request for "+o);const i=new XMLHttpRequest;i.onreadystatechange=()=>{if(a&&i.readyState===4){this.log_("REST Response for "+o+" received. status:",i.status,"response:",i.responseText);let c=null;if(i.status>=200&&i.status<300){try{c=k0(i.responseText)}catch{ki("Failed to parse JSON response for "+o+": "+i.responseText)}a(null,c)}else i.status!==401&&i.status!==404&&ki("Got unsuccessful REST response for "+o+" Status: "+i.status),a(i.status);a=null}},i.open("GET",o,!0),i.send()})}}class Rtt{constructor(){this.rootNode_=qa.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}}function L2(){return{value:null,children:new Map}}function Ez(e,t,n){if(ga(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{const a=xa(t);e.children.has(a)||e.children.set(a,L2());const r=e.children.get(a);t=pr(t),Ez(r,t,n)}}function DB(e,t,n){e.value!==null?n(t,e.value):Ntt(e,(a,r)=>{const s=new br(t.toString()+"/"+a);DB(r,s,n)})}function Ntt(e,t){e.children.forEach((n,a)=>{t(a,n)})}class Vtt{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),n=Object.assign({},t);return this.last_&&al(this.last_,(a,r)=>{n[a]=n[a]-r}),this.last_=t,n}}const xV=10*1e3,Ltt=30*1e3,Mtt=300*1e3;class Ott{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Vtt(t);const a=xV+(Ltt-xV)*Math.random();l0(this.reportStats_.bind(this),Math.floor(a))}reportStats_(){const t=this.statsListener_.get(),n={};let a=!1;al(t,(r,s)=>{s>0&&Hc(this.statsToReport_,r)&&(n[r]=s,a=!0)}),a&&this.server_.reportStats(n),l0(this.reportStats_.bind(this),Math.floor(Math.random()*2*Mtt))}}var xu;(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(xu||(xu={}));function Bz(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function kz(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Tz(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}class M2{constructor(t,n,a){this.path=t,this.affectedTree=n,this.revert=a,this.type=xu.ACK_USER_WRITE,this.source=Bz()}operationForChild(t){if(ga(this.path)){if(this.affectedTree.value!=null)return on(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new br(t));return new M2(nr(),n,this.revert)}}else return on(xa(this.path)===t,"operationForChild called for unrelated child."),new M2(pr(this.path),this.affectedTree,this.revert)}}class Rf{constructor(t,n,a){this.source=t,this.path=n,this.snap=a,this.type=xu.OVERWRITE}operationForChild(t){return ga(this.path)?new Rf(this.source,nr(),this.snap.getImmediateChild(t)):new Rf(this.source,pr(this.path),this.snap)}}class ag{constructor(t,n,a){this.source=t,this.path=n,this.children=a,this.type=xu.MERGE}operationForChild(t){if(ga(this.path)){const n=this.children.subtree(new br(t));return n.isEmpty()?null:n.value?new Rf(this.source,nr(),n.value):new ag(this.source,nr(),n)}else return on(xa(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new ag(this.source,pr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Y4{constructor(t,n,a){this.node_=t,this.fullyInitialized_=n,this.filtered_=a}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(ga(t))return this.isFullyInitialized()&&!this.filtered_;const n=xa(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}function Htt(e,t,n,a){const r=[],s=[];return t.forEach(o=>{o.type==="child_changed"&&e.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(Utt(o.childName,o.snapshotNode))}),pp(e,r,"child_removed",t,a,n),pp(e,r,"child_added",t,a,n),pp(e,r,"child_moved",s,a,n),pp(e,r,"child_changed",t,a,n),pp(e,r,"value",t,a,n),r}function pp(e,t,n,a,r,s){const o=a.filter(i=>i.type===n);o.sort((i,c)=>Qtt(e,i,c)),o.forEach(i=>{const c=$tt(e,i,s);r.forEach(A=>{A.respondsTo(i.type)&&t.push(A.createEvent(c,e.query_))})})}function $tt(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function Qtt(e,t,n){if(t.childName==null||n.childName==null)throw sh("Should only compare child_ events.");const a=new Ca(t.childName,t.snapshotNode),r=new Ca(n.childName,n.snapshotNode);return e.index_.compare(a,r)}function Iz(e,t){return{eventCache:e,serverCache:t}}function u0(e,t,n,a){return Iz(new Y4(t,n,a),e.serverCache)}function Fz(e,t,n,a){return Iz(e.eventCache,new Y4(t,n,a))}function UB(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Nf(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let tS;const Gtt=()=>(tS||(tS=new ri(Tet)),tS);class hr{static fromObject(t){let n=new hr(null);return al(t,(a,r)=>{n=n.set(new br(a),r)}),n}constructor(t,n=Gtt()){this.value=t,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:nr(),value:this.value};if(ga(t))return null;{const a=xa(t),r=this.children.get(a);if(r!==null){const s=r.findRootMostMatchingPathAndValue(pr(t),n);return s!=null?{path:Ps(new br(a),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(ga(t))return this;{const n=xa(t),a=this.children.get(n);return a!==null?a.subtree(pr(t)):new hr(null)}}set(t,n){if(ga(t))return new hr(n,this.children);{const a=xa(t),s=(this.children.get(a)||new hr(null)).set(pr(t),n),o=this.children.insert(a,s);return new hr(this.value,o)}}remove(t){if(ga(t))return this.children.isEmpty()?new hr(null):new hr(null,this.children);{const n=xa(t),a=this.children.get(n);if(a){const r=a.remove(pr(t));let s;return r.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,r),this.value===null&&s.isEmpty()?new hr(null):new hr(this.value,s)}else return this}}get(t){if(ga(t))return this.value;{const n=xa(t),a=this.children.get(n);return a?a.get(pr(t)):null}}setTree(t,n){if(ga(t))return n;{const a=xa(t),s=(this.children.get(a)||new hr(null)).setTree(pr(t),n);let o;return s.isEmpty()?o=this.children.remove(a):o=this.children.insert(a,s),new hr(this.value,o)}}fold(t){return this.fold_(nr(),t)}fold_(t,n){const a={};return this.children.inorderTraversal((r,s)=>{a[r]=s.fold_(Ps(t,r),n)}),n(t,this.value,a)}findOnPath(t,n){return this.findOnPath_(t,nr(),n)}findOnPath_(t,n,a){const r=this.value?a(n,this.value):!1;if(r)return r;if(ga(t))return null;{const s=xa(t),o=this.children.get(s);return o?o.findOnPath_(pr(t),Ps(n,s),a):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,nr(),n)}foreachOnPath_(t,n,a){if(ga(t))return this;{this.value&&a(n,this.value);const r=xa(t),s=this.children.get(r);return s?s.foreachOnPath_(pr(t),Ps(n,r),a):new hr(null)}}foreach(t){this.foreach_(nr(),t)}foreach_(t,n){this.children.inorderTraversal((a,r)=>{r.foreach_(Ps(t,a),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,a)=>{a.value&&t(n,a.value)})}}class Ll{constructor(t){this.writeTree_=t}static empty(){return new Ll(new hr(null))}}function c0(e,t,n){if(ga(t))return new Ll(new hr(n));{const a=e.writeTree_.findRootMostValueAndPath(t);if(a!=null){const r=a.path;let s=a.value;const o=Ji(r,t);return s=s.updateChild(o,n),new Ll(e.writeTree_.set(r,s))}else{const r=new hr(n),s=e.writeTree_.setTree(t,r);return new Ll(s)}}}function CV(e,t,n){let a=e;return al(n,(r,s)=>{a=c0(a,Ps(t,r),s)}),a}function SV(e,t){if(ga(t))return Ll.empty();{const n=e.writeTree_.setTree(t,new hr(null));return new Ll(n)}}function RB(e,t){return sm(e,t)!=null}function sm(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(Ji(n.path,t)):null}function EV(e){const t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(po,(a,r)=>{t.push(new Ca(a,r))}):e.writeTree_.children.inorderTraversal((a,r)=>{r.value!=null&&t.push(new Ca(a,r.value))}),t}function Ud(e,t){if(ga(t))return e;{const n=sm(e,t);return n!=null?new Ll(new hr(n)):new Ll(e.writeTree_.subtree(t))}}function NB(e){return e.writeTree_.isEmpty()}function Jv(e,t){return Pz(nr(),e.writeTree_,t)}function Pz(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let a=null;return t.children.inorderTraversal((r,s)=>{r===".priority"?(on(s.value!==null,"Priority writes must always be leaf nodes"),a=s.value):n=Pz(Ps(e,r),s,n)}),!n.getChild(e).isEmpty()&&a!==null&&(n=n.updateChild(Ps(e,".priority"),a)),n}}function Dz(e,t){return Lz(t,e)}function ztt(e,t,n,a,r){on(a>e.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),e.allWrites.push({path:t,snap:n,writeId:a,visible:r}),r&&(e.visibleWrites=c0(e.visibleWrites,t,n)),e.lastWriteId=a}function Ktt(e,t){for(let n=0;n<e.allWrites.length;n++){const a=e.allWrites[n];if(a.writeId===t)return a}return null}function Wtt(e,t){const n=e.allWrites.findIndex(i=>i.writeId===t);on(n>=0,"removeWrite called with nonexistent writeId.");const a=e.allWrites[n];e.allWrites.splice(n,1);let r=a.visible,s=!1,o=e.allWrites.length-1;for(;r&&o>=0;){const i=e.allWrites[o];i.visible&&(o>=n&&jtt(i,a.path)?r=!1:Pl(a.path,i.path)&&(s=!0)),o--}if(r){if(s)return qtt(e),!0;if(a.snap)e.visibleWrites=SV(e.visibleWrites,a.path);else{const i=a.children;al(i,c=>{e.visibleWrites=SV(e.visibleWrites,Ps(a.path,c))})}return!0}else return!1}function jtt(e,t){if(e.snap)return Pl(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Pl(Ps(e.path,n),t))return!0;return!1}function qtt(e){e.visibleWrites=Uz(e.allWrites,Ytt,nr()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function Ytt(e){return e.visible}function Uz(e,t,n){let a=Ll.empty();for(let r=0;r<e.length;++r){const s=e[r];if(t(s)){const o=s.path;let i;if(s.snap)Pl(n,o)?(i=Ji(n,o),a=c0(a,i,s.snap)):Pl(o,n)&&(i=Ji(o,n),a=c0(a,nr(),s.snap.getChild(i)));else if(s.children){if(Pl(n,o))i=Ji(n,o),a=CV(a,i,s.children);else if(Pl(o,n))if(i=Ji(o,n),ga(i))a=CV(a,nr(),s.children);else{const c=Vv(s.children,xa(i));if(c){const A=c.getChild(pr(i));a=c0(a,nr(),A)}}}else throw sh("WriteRecord should have .snap or .children")}}return a}function Rz(e,t,n,a,r){if(!a&&!r){const s=sm(e.visibleWrites,t);if(s!=null)return s;{const o=Ud(e.visibleWrites,t);if(NB(o))return n;if(n==null&&!RB(o,nr()))return null;{const i=n||qa.EMPTY_NODE;return Jv(o,i)}}}else{const s=Ud(e.visibleWrites,t);if(!r&&NB(s))return n;if(!r&&n==null&&!RB(s,nr()))return null;{const o=function(A){return(A.visible||r)&&(!a||!~a.indexOf(A.writeId))&&(Pl(A.path,t)||Pl(t,A.path))},i=Uz(e.allWrites,o,t),c=n||qa.EMPTY_NODE;return Jv(i,c)}}}function Xtt(e,t,n){let a=qa.EMPTY_NODE;const r=sm(e.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(po,(s,o)=>{a=a.updateImmediateChild(s,o)}),a;if(n){const s=Ud(e.visibleWrites,t);return n.forEachChild(po,(o,i)=>{const c=Jv(Ud(s,new br(o)),i);a=a.updateImmediateChild(o,c)}),EV(s).forEach(o=>{a=a.updateImmediateChild(o.name,o.node)}),a}else{const s=Ud(e.visibleWrites,t);return EV(s).forEach(o=>{a=a.updateImmediateChild(o.name,o.node)}),a}}function Jtt(e,t,n,a,r){on(a||r,"Either existingEventSnap or existingServerSnap must exist");const s=Ps(t,n);if(RB(e.visibleWrites,s))return null;{const o=Ud(e.visibleWrites,s);return NB(o)?r.getChild(n):Jv(o,r.getChild(n))}}function Ztt(e,t,n,a){const r=Ps(t,n),s=sm(e.visibleWrites,r);if(s!=null)return s;if(a.isCompleteForChild(n)){const o=Ud(e.visibleWrites,r);return Jv(o,a.getNode().getImmediateChild(n))}else return null}function ent(e,t){return sm(e.visibleWrites,t)}function tnt(e,t,n,a,r,s,o){let i;const c=Ud(e.visibleWrites,t),A=sm(c,nr());if(A!=null)i=A;else if(n!=null)i=Jv(c,n);else return[];if(i=i.withIndex(o),!i.isEmpty()&&!i.isLeafNode()){const d=[],f=o.getCompare(),m=s?i.getReverseIteratorFrom(a,o):i.getIteratorFrom(a,o);let v=m.getNext();for(;v&&d.length<r;)f(v,a)!==0&&d.push(v),v=m.getNext();return d}else return[]}function nnt(){return{visibleWrites:Ll.empty(),allWrites:[],lastWriteId:-1}}function VB(e,t,n,a){return Rz(e.writeTree,e.treePath,t,n,a)}function Nz(e,t){return Xtt(e.writeTree,e.treePath,t)}function BV(e,t,n,a){return Jtt(e.writeTree,e.treePath,t,n,a)}function O2(e,t){return ent(e.writeTree,Ps(e.treePath,t))}function ant(e,t,n,a,r,s){return tnt(e.writeTree,e.treePath,t,n,a,r,s)}function X4(e,t,n){return Ztt(e.writeTree,e.treePath,t,n)}function Vz(e,t){return Lz(Ps(e.treePath,t),e.writeTree)}function Lz(e,t){return{treePath:e,writeTree:t}}class rnt{constructor(){this.changeMap=new Map}trackChildChange(t){const n=t.type,a=t.childName;on(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),on(a!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(a);if(r){const s=r.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(a,_V(a,t.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(a);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(a,Dtt(a,r.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(a,Ptt(a,t.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(a,_V(a,t.snapshotNode,r.oldSnap));else throw sh("Illegal combination of changes: "+t+" occurred after "+r)}else this.changeMap.set(a,t)}getChanges(){return Array.from(this.changeMap.values())}}class snt{getCompleteChild(t){return null}getChildAfterChild(t,n,a){return null}}const Mz=new snt;class J4{constructor(t,n,a=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=a}getCompleteChild(t){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{const a=this.optCompleteServerCache_!=null?new Y4(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return X4(this.writes_,t,a)}}getChildAfterChild(t,n,a){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Nf(this.viewCache_),s=ant(this.writes_,r,n,1,a,t);return s.length===0?null:s[0]}}function ont(e,t){on(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),on(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function int(e,t,n,a,r){const s=new rnt;let o,i;if(n.type===xu.OVERWRITE){const A=n;A.source.fromUser?o=LB(e,t,A.path,A.snap,a,r,s):(on(A.source.fromServer,"Unknown source."),i=A.source.tagged||t.serverCache.isFiltered()&&!ga(A.path),o=H2(e,t,A.path,A.snap,a,r,i,s))}else if(n.type===xu.MERGE){const A=n;A.source.fromUser?o=unt(e,t,A.path,A.children,a,r,s):(on(A.source.fromServer,"Unknown source."),i=A.source.tagged||t.serverCache.isFiltered(),o=MB(e,t,A.path,A.children,a,r,i,s))}else if(n.type===xu.ACK_USER_WRITE){const A=n;A.revert?o=Ant(e,t,A.path,a,r,s):o=cnt(e,t,A.path,A.affectedTree,a,r,s)}else if(n.type===xu.LISTEN_COMPLETE)o=dnt(e,t,n.path,a,s);else throw sh("Unknown operation type: "+n.type);const c=s.getChanges();return lnt(t,o,c),{viewCache:o,changes:c}}function lnt(e,t,n){const a=t.eventCache;if(a.isFullyInitialized()){const r=a.getNode().isLeafNode()||a.getNode().isEmpty(),s=UB(e);(n.length>0||!e.eventCache.isFullyInitialized()||r&&!a.getNode().equals(s)||!a.getNode().getPriority().equals(s.getPriority()))&&n.push(Ftt(UB(t)))}}function Oz(e,t,n,a,r,s){const o=t.eventCache;if(O2(a,n)!=null)return t;{let i,c;if(ga(n))if(on(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const A=Nf(t),d=A instanceof qa?A:qa.EMPTY_NODE,f=Nz(a,d);i=e.filter.updateFullNode(t.eventCache.getNode(),f,s)}else{const A=VB(a,Nf(t));i=e.filter.updateFullNode(t.eventCache.getNode(),A,s)}else{const A=xa(n);if(A===".priority"){on(Zd(n)===1,"Can't have a priority with additional path components");const d=o.getNode();c=t.serverCache.getNode();const f=BV(a,n,d,c);f!=null?i=e.filter.updatePriority(d,f):i=o.getNode()}else{const d=pr(n);let f;if(o.isCompleteForChild(A)){c=t.serverCache.getNode();const m=BV(a,n,o.getNode(),c);m!=null?f=o.getNode().getImmediateChild(A).updateChild(d,m):f=o.getNode().getImmediateChild(A)}else f=X4(a,A,t.serverCache);f!=null?i=e.filter.updateChild(o.getNode(),A,f,d,r,s):i=o.getNode()}}return u0(t,i,o.isFullyInitialized()||ga(n),e.filter.filtersNodes())}}function H2(e,t,n,a,r,s,o,i){const c=t.serverCache;let A;const d=o?e.filter:e.filter.getIndexedFilter();if(ga(n))A=d.updateFullNode(c.getNode(),a,null);else if(d.filtersNodes()&&!c.isFiltered()){const v=c.getNode().updateChild(n,a);A=d.updateFullNode(c.getNode(),v,null)}else{const v=xa(n);if(!c.isCompleteForPath(n)&&Zd(n)>1)return t;const p=pr(n),y=c.getNode().getImmediateChild(v).updateChild(p,a);v===".priority"?A=d.updatePriority(c.getNode(),y):A=d.updateChild(c.getNode(),v,y,p,Mz,null)}const f=Fz(t,A,c.isFullyInitialized()||ga(n),d.filtersNodes()),m=new J4(r,f,s);return Oz(e,f,n,r,m,i)}function LB(e,t,n,a,r,s,o){const i=t.eventCache;let c,A;const d=new J4(r,t,s);if(ga(n))A=e.filter.updateFullNode(t.eventCache.getNode(),a,o),c=u0(t,A,!0,e.filter.filtersNodes());else{const f=xa(n);if(f===".priority")A=e.filter.updatePriority(t.eventCache.getNode(),a),c=u0(t,A,i.isFullyInitialized(),i.isFiltered());else{const m=pr(n),v=i.getNode().getImmediateChild(f);let p;if(ga(m))p=a;else{const g=d.getCompleteChild(f);g!=null?hz(m)===".priority"&&g.getChild(gz(m)).isEmpty()?p=g:p=g.updateChild(m,a):p=qa.EMPTY_NODE}if(v.equals(p))c=t;else{const g=e.filter.updateChild(i.getNode(),f,p,m,d,o);c=u0(t,g,i.isFullyInitialized(),e.filter.filtersNodes())}}}return c}function kV(e,t){return e.eventCache.isCompleteForChild(t)}function unt(e,t,n,a,r,s,o){let i=t;return a.foreach((c,A)=>{const d=Ps(n,c);kV(t,xa(d))&&(i=LB(e,i,d,A,r,s,o))}),a.foreach((c,A)=>{const d=Ps(n,c);kV(t,xa(d))||(i=LB(e,i,d,A,r,s,o))}),i}function TV(e,t,n){return n.foreach((a,r)=>{t=t.updateChild(a,r)}),t}function MB(e,t,n,a,r,s,o,i){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c=t,A;ga(n)?A=a:A=new hr(null).setTree(n,a);const d=t.serverCache.getNode();return A.children.inorderTraversal((f,m)=>{if(d.hasChild(f)){const v=t.serverCache.getNode().getImmediateChild(f),p=TV(e,v,m);c=H2(e,c,new br(f),p,r,s,o,i)}}),A.children.inorderTraversal((f,m)=>{const v=!t.serverCache.isCompleteForChild(f)&&m.value===null;if(!d.hasChild(f)&&!v){const p=t.serverCache.getNode().getImmediateChild(f),g=TV(e,p,m);c=H2(e,c,new br(f),g,r,s,o,i)}}),c}function cnt(e,t,n,a,r,s,o){if(O2(r,n)!=null)return t;const i=t.serverCache.isFiltered(),c=t.serverCache;if(a.value!=null){if(ga(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return H2(e,t,n,c.getNode().getChild(n),r,s,i,o);if(ga(n)){let A=new hr(null);return c.getNode().forEachChild(Cv,(d,f)=>{A=A.set(new br(d),f)}),MB(e,t,n,A,r,s,i,o)}else return t}else{let A=new hr(null);return a.foreach((d,f)=>{const m=Ps(n,d);c.isCompleteForPath(m)&&(A=A.set(d,c.getNode().getChild(m)))}),MB(e,t,n,A,r,s,i,o)}}function dnt(e,t,n,a,r){const s=t.serverCache,o=Fz(t,s.getNode(),s.isFullyInitialized()||ga(n),s.isFiltered());return Oz(e,o,n,a,Mz,r)}function Ant(e,t,n,a,r,s){let o;if(O2(a,n)!=null)return t;{const i=new J4(a,t,r),c=t.eventCache.getNode();let A;if(ga(n)||xa(n)===".priority"){let d;if(t.serverCache.isFullyInitialized())d=VB(a,Nf(t));else{const f=t.serverCache.getNode();on(f instanceof qa,"serverChildren would be complete if leaf node"),d=Nz(a,f)}d=d,A=e.filter.updateFullNode(c,d,s)}else{const d=xa(n);let f=X4(a,d,t.serverCache);f==null&&t.serverCache.isCompleteForChild(d)&&(f=c.getImmediateChild(d)),f!=null?A=e.filter.updateChild(c,d,f,pr(n),i,s):t.eventCache.getNode().hasChild(d)?A=e.filter.updateChild(c,d,qa.EMPTY_NODE,pr(n),i,s):A=c,A.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=VB(a,Nf(t)),o.isLeafNode()&&(A=e.filter.updateFullNode(A,o,s)))}return o=t.serverCache.isFullyInitialized()||O2(a,nr())!=null,u0(t,A,o,e.filter.filtersNodes())}}function fnt(e,t){const n=Nf(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!ga(t)&&!n.getImmediateChild(xa(t)).isEmpty())?n.getChild(t):null}function IV(e,t,n,a){t.type===xu.MERGE&&t.source.queryId!==null&&(on(Nf(e.viewCache_),"We should always have a full cache before handling merges"),on(UB(e.viewCache_),"Missing event cache, even though we have a server cache"));const r=e.viewCache_,s=int(e.processor_,r,t,n,a);return ont(e.processor_,s.viewCache),on(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,mnt(e,s.changes,s.viewCache.eventCache.getNode())}function mnt(e,t,n,a){const r=e.eventRegistrations_;return Htt(e.eventGenerator_,t,n,r)}let FV;function vnt(e){on(!FV,"__referenceConstructor has already been defined"),FV=e}function Z4(e,t,n,a){const r=t.source.queryId;if(r!==null){const s=e.views.get(r);return on(s!=null,"SyncTree gave us an op for an invalid query."),IV(s,t,n,a)}else{let s=[];for(const o of e.views.values())s=s.concat(IV(o,t,n,a));return s}}function eI(e,t){let n=null;for(const a of e.views.values())n=n||fnt(a,t);return n}let PV;function hnt(e){on(!PV,"__referenceConstructor has already been defined"),PV=e}class DV{constructor(t){this.listenProvider_=t,this.syncPointTree_=new hr(null),this.pendingWriteTree_=nnt(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function pnt(e,t,n,a,r){return ztt(e.pendingWriteTree_,t,n,a,r),r?pb(e,new Rf(Bz(),t,n)):[]}function rv(e,t,n=!1){const a=Ktt(e.pendingWriteTree_,t);if(Wtt(e.pendingWriteTree_,t)){let s=new hr(null);return a.snap!=null?s=s.set(nr(),!0):al(a.children,o=>{s=s.set(new br(o),!0)}),pb(e,new M2(a.path,s,n))}else return[]}function hb(e,t,n){return pb(e,new Rf(kz(),t,n))}function gnt(e,t,n){const a=hr.fromObject(n);return pb(e,new ag(kz(),t,a))}function ynt(e,t,n,a){const r=Gz(e,a);if(r!=null){const s=zz(r),o=s.path,i=s.queryId,c=Ji(o,t),A=new Rf(Tz(i),c,n);return Kz(e,o,A)}else return[]}function _nt(e,t,n,a){const r=Gz(e,a);if(r){const s=zz(r),o=s.path,i=s.queryId,c=Ji(o,t),A=hr.fromObject(n),d=new ag(Tz(i),c,A);return Kz(e,o,d)}else return[]}function Hz(e,t,n){const r=e.pendingWriteTree_,s=e.syncPointTree_.findOnPath(t,(o,i)=>{const c=Ji(o,t),A=eI(i,c);if(A)return A});return Rz(r,t,s,n,!0)}function pb(e,t){return $z(t,e.syncPointTree_,null,Dz(e.pendingWriteTree_,nr()))}function $z(e,t,n,a){if(ga(e.path))return Qz(e,t,n,a);{const r=t.get(nr());n==null&&r!=null&&(n=eI(r,nr()));let s=[];const o=xa(e.path),i=e.operationForChild(o),c=t.children.get(o);if(c&&i){const A=n?n.getImmediateChild(o):null,d=Vz(a,o);s=s.concat($z(i,c,A,d))}return r&&(s=s.concat(Z4(r,e,a,n))),s}}function Qz(e,t,n,a){const r=t.get(nr());n==null&&r!=null&&(n=eI(r,nr()));let s=[];return t.children.inorderTraversal((o,i)=>{const c=n?n.getImmediateChild(o):null,A=Vz(a,o),d=e.operationForChild(o);d&&(s=s.concat(Qz(d,i,c,A)))}),r&&(s=s.concat(Z4(r,e,a,n))),s}function Gz(e,t){return e.tagToQueryMap.get(t)}function zz(e){const t=e.indexOf("$");return on(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new br(e.substr(0,t))}}function Kz(e,t,n){const a=e.syncPointTree_.get(t);on(a,"Missing sync point for query tag that we're tracking");const r=Dz(e.pendingWriteTree_,t);return Z4(a,n,r,null)}class tI{constructor(t){this.node_=t}getImmediateChild(t){const n=this.node_.getImmediateChild(t);return new tI(n)}node(){return this.node_}}class nI{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){const n=Ps(this.path_,t);return new nI(this.syncTree_,n)}node(){return Hz(this.syncTree_,this.path_)}}const wnt=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},UV=function(e,t,n){if(!e||typeof e!="object")return e;if(on(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return bnt(e[".sv"],t,n);if(typeof e[".sv"]=="object")return xnt(e[".sv"],t);on(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},bnt=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:on(!1,"Unexpected server value: "+e)}},xnt=function(e,t,n){e.hasOwnProperty("increment")||on(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const a=e.increment;typeof a!="number"&&on(!1,"Unexpected increment value: "+a);const r=t.node();if(on(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return a;const o=r.getValue();return typeof o!="number"?a:o+a},Cnt=function(e,t,n,a){return aI(t,new nI(n,e),a)},Snt=function(e,t,n){return aI(e,new tI(t),n)};function aI(e,t,n){const a=e.getPriority().val(),r=UV(a,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const o=e,i=UV(o.getValue(),t,n);return i!==o.getValue()||r!==o.getPriority().val()?new Ts(i,uo(r)):e}else{const o=e;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new Ts(r))),o.forEachChild(po,(i,c)=>{const A=aI(c,t.getImmediateChild(i),n);A!==c&&(s=s.updateImmediateChild(i,A))}),s}}class rI{constructor(t="",n=null,a={children:{},childCount:0}){this.name=t,this.parent=n,this.node=a}}function sI(e,t){let n=t instanceof br?t:new br(t),a=e,r=xa(n);for(;r!==null;){const s=Vv(a.node.children,r)||{children:{},childCount:0};a=new rI(r,a,s),n=pr(n),r=xa(n)}return a}function Fh(e){return e.node.value}function Wz(e,t){e.node.value=t,OB(e)}function jz(e){return e.node.childCount>0}function Ent(e){return Fh(e)===void 0&&!jz(e)}function gb(e,t){al(e.node.children,(n,a)=>{t(new rI(n,e,a))})}function qz(e,t,n,a){n&&t(e),gb(e,r=>{qz(r,t,!0)})}function Bnt(e,t,n){let a=e.parent;for(;a!==null;){if(t(a))return!0;a=a.parent}return!1}function Wg(e){return new br(e.parent===null?e.name:Wg(e.parent)+"/"+e.name)}function OB(e){e.parent!==null&&knt(e.parent,e.name,e)}function knt(e,t,n){const a=Ent(n),r=Hc(e.node.children,t);a&&r?(delete e.node.children[t],e.node.childCount--,OB(e)):!a&&!r&&(e.node.children[t]=n.node,e.node.childCount++,OB(e))}const Tnt=/[\[\].#$\/\u0000-\u001F\u007F]/,Int=/[\[\].#$\u0000-\u001F\u007F]/,nS=10*1024*1024,Yz=function(e){return typeof e=="string"&&e.length!==0&&!Tnt.test(e)},Fnt=function(e){return typeof e=="string"&&e.length!==0&&!Int.test(e)},Pnt=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Fnt(e)},Xz=function(e,t,n){const a=n instanceof br?new dtt(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+MA(a));if(typeof t=="function")throw new Error(e+"contains a function "+MA(a)+" with contents = "+t.toString());if(YG(t))throw new Error(e+"contains "+t.toString()+" "+MA(a));if(typeof t=="string"&&t.length>nS/3&&gw(t)>nS)throw new Error(e+"contains a string greater than "+nS+" utf8 bytes "+MA(a)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let r=!1,s=!1;if(al(t,(o,i)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Yz(o)))throw new Error(e+" contains an invalid key ("+o+") "+MA(a)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Att(a,o),Xz(e,i,a),ftt(a)}),r&&s)throw new Error(e+' contains ".value" child '+MA(a)+" in addition to actual children.")}},Dnt=function(e,t){const n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!Yz(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Pnt(n))throw new Error(Woe(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};class Unt{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Rnt(e,t){let n=null;for(let a=0;a<t.length;a++){const r=t[a],s=r.getPath();n!==null&&!yz(s,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(r)}n&&e.eventLists_.push(n)}function om(e,t,n){Rnt(e,n),Nnt(e,a=>Pl(a,t)||Pl(t,a))}function Nnt(e,t){e.recursionDepth_++;let n=!0;for(let a=0;a<e.eventLists_.length;a++){const r=e.eventLists_[a];if(r){const s=r.path;t(s)?(Vnt(e.eventLists_[a]),e.eventLists_[a]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function Vnt(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(n!==null){e.events[t]=null;const a=n.getEventRunner();i0&&lo("event: "+n.toString()),zg(a)}}}const Lnt="repo_interrupt",Mnt=25;class Ont{constructor(t,n,a,r){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=a,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Unt,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=L2(),this.transactionQueueTree_=new rI,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Hnt(e,t,n){if(e.stats_=z4(e.repoInfo_),e.forceRestClient_||Ret())e.server_=new V2(e.repoInfo_,(a,r,s,o)=>{RV(e,a,r,s,o)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>NV(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Qs(n)}catch(a){throw new Error("Invalid authOverride provided: "+a)}}e.persistentConnection_=new Ec(e.repoInfo_,t,(a,r,s,o)=>{RV(e,a,r,s,o)},a=>{NV(e,a)},a=>{Qnt(e,a)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(a=>{e.server_.refreshAuthToken(a)}),e.appCheckProvider_.addTokenChangeListener(a=>{e.server_.refreshAppCheckToken(a.token)}),e.statsReporter_=Het(e.repoInfo_,()=>new Ott(e.stats_,e.server_)),e.infoData_=new Rtt,e.infoSyncTree_=new DV({startListening:(a,r,s,o)=>{let i=[];const c=e.infoData_.getNode(a._path);return c.isEmpty()||(i=hb(e.infoSyncTree_,a._path,c),setTimeout(()=>{o("ok")},0)),i},stopListening:()=>{}}),oI(e,"connected",!1),e.serverSyncTree_=new DV({startListening:(a,r,s,o)=>(e.server_.listen(a,s,r,(i,c)=>{const A=o(i,c);om(e.eventQueue_,a._path,A)}),[]),stopListening:(a,r)=>{e.server_.unlisten(a,r)}})}function $nt(e){const n=e.infoData_.getNode(new br(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Jz(e){return wnt({timestamp:$nt(e)})}function RV(e,t,n,a,r){e.dataUpdateCount++;const s=new br(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(r)if(a){const c=N_(n,A=>uo(A));o=_nt(e.serverSyncTree_,s,c,r)}else{const c=uo(n);o=ynt(e.serverSyncTree_,s,c,r)}else if(a){const c=N_(n,A=>uo(A));o=gnt(e.serverSyncTree_,s,c)}else{const c=uo(n);o=hb(e.serverSyncTree_,s,c)}let i=s;o.length>0&&(i=lI(e,s)),om(e.eventQueue_,i,o)}function NV(e,t){oI(e,"connected",t),t===!1&&znt(e)}function Qnt(e,t){al(t,(n,a)=>{oI(e,n,a)})}function oI(e,t,n){const a=new br("/.info/"+t),r=uo(n);e.infoData_.updateSnapshot(a,r);const s=hb(e.infoSyncTree_,a,r);om(e.eventQueue_,a,s)}function Gnt(e){return e.nextWriteId_++}function znt(e){Zz(e,"onDisconnectEvents");const t=Jz(e),n=L2();DB(e.onDisconnect_,nr(),(r,s)=>{const o=Cnt(r,s,e.serverSyncTree_,t);Ez(n,r,o)});let a=[];DB(n,nr(),(r,s)=>{a=a.concat(hb(e.serverSyncTree_,r,s));const o=qnt(e,r);lI(e,o)}),e.onDisconnect_=L2(),om(e.eventQueue_,nr(),a)}function Knt(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Lnt)}function Zz(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),lo(n,...t)}function eK(e,t,n){return Hz(e.serverSyncTree_,t,n)||qa.EMPTY_NODE}function iI(e,t=e.transactionQueueTree_){if(t||yb(e,t),Fh(t)){const n=nK(e,t);on(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&Wnt(e,Wg(t),n)}else jz(t)&&gb(t,n=>{iI(e,n)})}function Wnt(e,t,n){const a=n.map(A=>A.currentWriteId),r=eK(e,t,a);let s=r;const o=r.hash();for(let A=0;A<n.length;A++){const d=n[A];on(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const f=Ji(t,d.path);s=s.updateChild(f,d.currentOutputSnapshotRaw)}const i=s.val(!0),c=t;e.server_.put(c.toString(),i,A=>{Zz(e,"transaction put response",{path:c.toString(),status:A});let d=[];if(A==="ok"){const f=[];for(let m=0;m<n.length;m++)n[m].status=2,d=d.concat(rv(e.serverSyncTree_,n[m].currentWriteId)),n[m].onComplete&&f.push(()=>n[m].onComplete(null,!0,n[m].currentOutputSnapshotResolved)),n[m].unwatcher();yb(e,sI(e.transactionQueueTree_,t)),iI(e,e.transactionQueueTree_),om(e.eventQueue_,t,d);for(let m=0;m<f.length;m++)zg(f[m])}else{if(A==="datastale")for(let f=0;f<n.length;f++)n[f].status===3?n[f].status=4:n[f].status=0;else{ki("transaction at "+c.toString()+" failed: "+A);for(let f=0;f<n.length;f++)n[f].status=4,n[f].abortReason=A}lI(e,t)}},o)}function lI(e,t){const n=tK(e,t),a=Wg(n),r=nK(e,n);return jnt(e,r,a),a}function jnt(e,t,n){if(t.length===0)return;const a=[];let r=[];const o=t.filter(i=>i.status===0).map(i=>i.currentWriteId);for(let i=0;i<t.length;i++){const c=t[i],A=Ji(n,c.path);let d=!1,f;if(on(A!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,f=c.abortReason,r=r.concat(rv(e.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=Mnt)d=!0,f="maxretry",r=r.concat(rv(e.serverSyncTree_,c.currentWriteId,!0));else{const m=eK(e,c.path,o);c.currentInputSnapshot=m;const v=t[i].update(m.val());if(v!==void 0){Xz("transaction failed: Data returned ",v,c.path);let p=uo(v);typeof v=="object"&&v!=null&&Hc(v,".priority")||(p=p.updatePriority(m.getPriority()));const y=c.currentWriteId,w=Jz(e),b=Snt(p,m,w);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=b,c.currentWriteId=Gnt(e),o.splice(o.indexOf(y),1),r=r.concat(pnt(e.serverSyncTree_,c.path,b,c.currentWriteId,c.applyLocally)),r=r.concat(rv(e.serverSyncTree_,y,!0))}else d=!0,f="nodata",r=r.concat(rv(e.serverSyncTree_,c.currentWriteId,!0))}om(e.eventQueue_,n,r),r=[],d&&(t[i].status=2,(function(m){setTimeout(m,Math.floor(0))})(t[i].unwatcher),t[i].onComplete&&(f==="nodata"?a.push(()=>t[i].onComplete(null,!1,t[i].currentInputSnapshot)):a.push(()=>t[i].onComplete(new Error(f),!1,null))))}yb(e,e.transactionQueueTree_);for(let i=0;i<a.length;i++)zg(a[i]);iI(e,e.transactionQueueTree_)}function tK(e,t){let n,a=e.transactionQueueTree_;for(n=xa(t);n!==null&&Fh(a)===void 0;)a=sI(a,n),t=pr(t),n=xa(t);return a}function nK(e,t){const n=[];return aK(e,t,n),n.sort((a,r)=>a.order-r.order),n}function aK(e,t,n){const a=Fh(t);if(a)for(let r=0;r<a.length;r++)n.push(a[r]);gb(t,r=>{aK(e,r,n)})}function yb(e,t){const n=Fh(t);if(n){let a=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[a]=n[r],a++);n.length=a,Wz(t,n.length>0?n:void 0)}gb(t,a=>{yb(e,a)})}function qnt(e,t){const n=Wg(tK(e,t)),a=sI(e.transactionQueueTree_,t);return Bnt(a,r=>{aS(e,r)}),aS(e,a),qz(a,r=>{aS(e,r)}),n}function aS(e,t){const n=Fh(t);if(n){const a=[];let r=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(on(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(on(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),r=r.concat(rv(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&a.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Wz(t,void 0):n.length=s+1,om(e.eventQueue_,Wg(t),r);for(let o=0;o<a.length;o++)zg(a[o])}}function Ynt(e){let t="";const n=e.split("/");for(let a=0;a<n.length;a++)if(n[a].length>0){let r=n[a];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}function Xnt(e){const t={};e.charAt(0)==="?"&&(e=e.substring(1));for(const n of e.split("&")){if(n.length===0)continue;const a=n.split("=");a.length===2?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):ki(`Invalid query segment '${n}' in query '${e}'`)}return t}const VV=function(e,t){const n=Jnt(e),a=n.namespace;n.domain==="firebase.com"&&Df(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!a||a==="undefined")&&n.domain!=="localhost"&&Df("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Bet();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Let(n.host,n.secure,a,r,t,"",a!==n.subdomain),path:new br(n.pathString)}},Jnt=function(e){let t="",n="",a="",r="",s="",o=!0,i="https",c=443;if(typeof e=="string"){let A=e.indexOf("//");A>=0&&(i=e.substring(0,A-1),e=e.substring(A+2));let d=e.indexOf("/");d===-1&&(d=e.length);let f=e.indexOf("?");f===-1&&(f=e.length),t=e.substring(0,Math.min(d,f)),d<f&&(r=Ynt(e.substring(d,f)));const m=Xnt(e.substring(Math.min(e.length,f)));A=t.indexOf(":"),A>=0?(o=i==="https"||i==="wss",c=parseInt(t.substring(A+1),10)):A=t.length;const v=t.slice(0,A);if(v.toLowerCase()==="localhost")n="localhost";else if(v.split(".").length<=2)n=v;else{const p=t.indexOf(".");a=t.substring(0,p).toLowerCase(),n=t.substring(p+1),s=a}"ns"in m&&(s=m.ns)}return{host:t,port:c,domain:n,subdomain:a,secure:o,scheme:i,pathString:r,namespace:s}};class uI{constructor(t,n,a,r){this._repo=t,this._path=n,this._queryParams=a,this._orderByCalled=r}get key(){return ga(this._path)?null:hz(this._path)}get ref(){return new Ph(this._repo,this._path)}get _queryIdentifier(){const t=bV(this._queryParams),n=Q4(t);return n==="{}"?"default":n}get _queryObject(){return bV(this._queryParams)}isEqual(t){if(t=Hu(t),!(t instanceof uI))return!1;const n=this._repo===t._repo,a=yz(this._path,t._path),r=this._queryIdentifier===t._queryIdentifier;return n&&a&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+ctt(this._path)}}class Ph extends uI{constructor(t,n){super(t,n,new q4,!1)}get parent(){const t=gz(this._path);return t===null?null:new Ph(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}vnt(Ph);hnt(Ph);const Znt="FIREBASE_DATABASE_EMULATOR_HOST",HB={};let eat=!1;function tat(e,t,n,a,r){let s=a||e.options.databaseURL;s===void 0&&(e.options.projectId||Df("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),lo("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o=VV(s,r),i=o.repoInfo,c;typeof process<"u"&&aV&&(c=aV[Znt]),c?(s=`http://${c}?ns=${i.namespace}`,o=VV(s,r),i=o.repoInfo):o.repoInfo.secure;const A=new Vet(e.name,e.options,t);Dnt("Invalid Firebase Database URL",o),ga(o.path)||Df("Database URL must point to the root of a Firebase Database (not including a child path).");const d=aat(i,e,A,new Net(e,n));return new rat(d,e)}function nat(e,t){const n=HB[t];(!n||n[e.key]!==e)&&Df(`Database ${t}(${e.repoInfo_}) has already been deleted.`),Knt(e),delete n[e.key]}function aat(e,t,n,a){let r=HB[t.name];r||(r={},HB[t.name]=r);let s=r[e.toURLString()];return s&&Df("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Ont(e,eat,n,a),r[e.toURLString()]=s,s}class rat{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Hnt(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ph(this._repo,nr())),this._rootInternal}_delete(){return this._rootInternal!==null&&(nat(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Df("Cannot call "+t+" on a deleted database.")}}function sat(e){_et(nA),Pu(new Gl("database",(t,{instanceIdentifier:n})=>{const a=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return tat(a,r,s,n)},"PUBLIC").setMultipleInstances(!0)),Bi(rV,sV,e),Bi(rV,sV,"esm2017")}Ec.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};Ec.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};sat();var LV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var cI;(function(){var e;function t(S,E){function C(){}C.prototype=E.prototype,S.D=E.prototype,S.prototype=new C,S.prototype.constructor=S,S.C=function(U,F,L){for(var H=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)H[ue-2]=arguments[ue];return E.prototype[F].apply(U,H)}}function n(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(a,n),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(S,E,C){C||(C=0);var U=Array(16);if(typeof E=="string")for(var F=0;16>F;++F)U[F]=E.charCodeAt(C++)|E.charCodeAt(C++)<<8|E.charCodeAt(C++)<<16|E.charCodeAt(C++)<<24;else for(F=0;16>F;++F)U[F]=E[C++]|E[C++]<<8|E[C++]<<16|E[C++]<<24;E=S.g[0],C=S.g[1],F=S.g[2];var L=S.g[3],H=E+(L^C&(F^L))+U[0]+3614090360&4294967295;E=C+(H<<7&4294967295|H>>>25),H=L+(F^E&(C^F))+U[1]+3905402710&4294967295,L=E+(H<<12&4294967295|H>>>20),H=F+(C^L&(E^C))+U[2]+606105819&4294967295,F=L+(H<<17&4294967295|H>>>15),H=C+(E^F&(L^E))+U[3]+3250441966&4294967295,C=F+(H<<22&4294967295|H>>>10),H=E+(L^C&(F^L))+U[4]+4118548399&4294967295,E=C+(H<<7&4294967295|H>>>25),H=L+(F^E&(C^F))+U[5]+1200080426&4294967295,L=E+(H<<12&4294967295|H>>>20),H=F+(C^L&(E^C))+U[6]+2821735955&4294967295,F=L+(H<<17&4294967295|H>>>15),H=C+(E^F&(L^E))+U[7]+4249261313&4294967295,C=F+(H<<22&4294967295|H>>>10),H=E+(L^C&(F^L))+U[8]+1770035416&4294967295,E=C+(H<<7&4294967295|H>>>25),H=L+(F^E&(C^F))+U[9]+2336552879&4294967295,L=E+(H<<12&4294967295|H>>>20),H=F+(C^L&(E^C))+U[10]+4294925233&4294967295,F=L+(H<<17&4294967295|H>>>15),H=C+(E^F&(L^E))+U[11]+2304563134&4294967295,C=F+(H<<22&4294967295|H>>>10),H=E+(L^C&(F^L))+U[12]+1804603682&4294967295,E=C+(H<<7&4294967295|H>>>25),H=L+(F^E&(C^F))+U[13]+4254626195&4294967295,L=E+(H<<12&4294967295|H>>>20),H=F+(C^L&(E^C))+U[14]+2792965006&4294967295,F=L+(H<<17&4294967295|H>>>15),H=C+(E^F&(L^E))+U[15]+1236535329&4294967295,C=F+(H<<22&4294967295|H>>>10),H=E+(F^L&(C^F))+U[1]+4129170786&4294967295,E=C+(H<<5&4294967295|H>>>27),H=L+(C^F&(E^C))+U[6]+3225465664&4294967295,L=E+(H<<9&4294967295|H>>>23),H=F+(E^C&(L^E))+U[11]+643717713&4294967295,F=L+(H<<14&4294967295|H>>>18),H=C+(L^E&(F^L))+U[0]+3921069994&4294967295,C=F+(H<<20&4294967295|H>>>12),H=E+(F^L&(C^F))+U[5]+3593408605&4294967295,E=C+(H<<5&4294967295|H>>>27),H=L+(C^F&(E^C))+U[10]+38016083&4294967295,L=E+(H<<9&4294967295|H>>>23),H=F+(E^C&(L^E))+U[15]+3634488961&4294967295,F=L+(H<<14&4294967295|H>>>18),H=C+(L^E&(F^L))+U[4]+3889429448&4294967295,C=F+(H<<20&4294967295|H>>>12),H=E+(F^L&(C^F))+U[9]+568446438&4294967295,E=C+(H<<5&4294967295|H>>>27),H=L+(C^F&(E^C))+U[14]+3275163606&4294967295,L=E+(H<<9&4294967295|H>>>23),H=F+(E^C&(L^E))+U[3]+4107603335&4294967295,F=L+(H<<14&4294967295|H>>>18),H=C+(L^E&(F^L))+U[8]+1163531501&4294967295,C=F+(H<<20&4294967295|H>>>12),H=E+(F^L&(C^F))+U[13]+2850285829&4294967295,E=C+(H<<5&4294967295|H>>>27),H=L+(C^F&(E^C))+U[2]+4243563512&4294967295,L=E+(H<<9&4294967295|H>>>23),H=F+(E^C&(L^E))+U[7]+1735328473&4294967295,F=L+(H<<14&4294967295|H>>>18),H=C+(L^E&(F^L))+U[12]+2368359562&4294967295,C=F+(H<<20&4294967295|H>>>12),H=E+(C^F^L)+U[5]+4294588738&4294967295,E=C+(H<<4&4294967295|H>>>28),H=L+(E^C^F)+U[8]+2272392833&4294967295,L=E+(H<<11&4294967295|H>>>21),H=F+(L^E^C)+U[11]+1839030562&4294967295,F=L+(H<<16&4294967295|H>>>16),H=C+(F^L^E)+U[14]+4259657740&4294967295,C=F+(H<<23&4294967295|H>>>9),H=E+(C^F^L)+U[1]+2763975236&4294967295,E=C+(H<<4&4294967295|H>>>28),H=L+(E^C^F)+U[4]+1272893353&4294967295,L=E+(H<<11&4294967295|H>>>21),H=F+(L^E^C)+U[7]+4139469664&4294967295,F=L+(H<<16&4294967295|H>>>16),H=C+(F^L^E)+U[10]+3200236656&4294967295,C=F+(H<<23&4294967295|H>>>9),H=E+(C^F^L)+U[13]+681279174&4294967295,E=C+(H<<4&4294967295|H>>>28),H=L+(E^C^F)+U[0]+3936430074&4294967295,L=E+(H<<11&4294967295|H>>>21),H=F+(L^E^C)+U[3]+3572445317&4294967295,F=L+(H<<16&4294967295|H>>>16),H=C+(F^L^E)+U[6]+76029189&4294967295,C=F+(H<<23&4294967295|H>>>9),H=E+(C^F^L)+U[9]+3654602809&4294967295,E=C+(H<<4&4294967295|H>>>28),H=L+(E^C^F)+U[12]+3873151461&4294967295,L=E+(H<<11&4294967295|H>>>21),H=F+(L^E^C)+U[15]+530742520&4294967295,F=L+(H<<16&4294967295|H>>>16),H=C+(F^L^E)+U[2]+3299628645&4294967295,C=F+(H<<23&4294967295|H>>>9),H=E+(F^(C|~L))+U[0]+4096336452&4294967295,E=C+(H<<6&4294967295|H>>>26),H=L+(C^(E|~F))+U[7]+1126891415&4294967295,L=E+(H<<10&4294967295|H>>>22),H=F+(E^(L|~C))+U[14]+2878612391&4294967295,F=L+(H<<15&4294967295|H>>>17),H=C+(L^(F|~E))+U[5]+4237533241&4294967295,C=F+(H<<21&4294967295|H>>>11),H=E+(F^(C|~L))+U[12]+1700485571&4294967295,E=C+(H<<6&4294967295|H>>>26),H=L+(C^(E|~F))+U[3]+2399980690&4294967295,L=E+(H<<10&4294967295|H>>>22),H=F+(E^(L|~C))+U[10]+4293915773&4294967295,F=L+(H<<15&4294967295|H>>>17),H=C+(L^(F|~E))+U[1]+2240044497&4294967295,C=F+(H<<21&4294967295|H>>>11),H=E+(F^(C|~L))+U[8]+1873313359&4294967295,E=C+(H<<6&4294967295|H>>>26),H=L+(C^(E|~F))+U[15]+4264355552&4294967295,L=E+(H<<10&4294967295|H>>>22),H=F+(E^(L|~C))+U[6]+2734768916&4294967295,F=L+(H<<15&4294967295|H>>>17),H=C+(L^(F|~E))+U[13]+1309151649&4294967295,C=F+(H<<21&4294967295|H>>>11),H=E+(F^(C|~L))+U[4]+4149444226&4294967295,E=C+(H<<6&4294967295|H>>>26),H=L+(C^(E|~F))+U[11]+3174756917&4294967295,L=E+(H<<10&4294967295|H>>>22),H=F+(E^(L|~C))+U[2]+718787259&4294967295,F=L+(H<<15&4294967295|H>>>17),H=C+(L^(F|~E))+U[9]+3951481745&4294967295,S.g[0]=S.g[0]+E&4294967295,S.g[1]=S.g[1]+(F+(H<<21&4294967295|H>>>11))&4294967295,S.g[2]=S.g[2]+F&4294967295,S.g[3]=S.g[3]+L&4294967295}a.prototype.u=function(S,E){E===void 0&&(E=S.length);for(var C=E-this.blockSize,U=this.B,F=this.h,L=0;L<E;){if(F==0)for(;L<=C;)r(this,S,L),L+=this.blockSize;if(typeof S=="string"){for(;L<E;)if(U[F++]=S.charCodeAt(L++),F==this.blockSize){r(this,U),F=0;break}}else for(;L<E;)if(U[F++]=S[L++],F==this.blockSize){r(this,U),F=0;break}}this.h=F,this.o+=E},a.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var E=1;E<S.length-8;++E)S[E]=0;var C=8*this.o;for(E=S.length-8;E<S.length;++E)S[E]=C&255,C/=256;for(this.u(S),S=Array(16),E=C=0;4>E;++E)for(var U=0;32>U;U+=8)S[C++]=this.g[E]>>>U&255;return S};function s(S,E){var C=i;return Object.prototype.hasOwnProperty.call(C,S)?C[S]:C[S]=E(S)}function o(S,E){this.h=E;for(var C=[],U=!0,F=S.length-1;0<=F;F--){var L=S[F]|0;U&&L==E||(C[F]=L,U=!1)}this.g=C}var i={};function c(S){return-128<=S&&128>S?s(S,function(E){return new o([E|0],0>E?-1:0)}):new o([S|0],0>S?-1:0)}function A(S){if(isNaN(S)||!isFinite(S))return f;if(0>S)return y(A(-S));for(var E=[],C=1,U=0;S>=C;U++)E[U]=S/C|0,C*=4294967296;return new o(E,0)}function d(S,E){if(S.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(S.charAt(0)=="-")return y(d(S.substring(1),E));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=A(Math.pow(E,8)),U=f,F=0;F<S.length;F+=8){var L=Math.min(8,S.length-F),H=parseInt(S.substring(F,F+L),E);8>L?(L=A(Math.pow(E,L)),U=U.j(L).add(A(H))):(U=U.j(C),U=U.add(A(H)))}return U}var f=c(0),m=c(1),v=c(16777216);e=o.prototype,e.m=function(){if(g(this))return-y(this).m();for(var S=0,E=1,C=0;C<this.g.length;C++){var U=this.i(C);S+=(0<=U?U:4294967296+U)*E,E*=4294967296}return S},e.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(p(this))return"0";if(g(this))return"-"+y(this).toString(S);for(var E=A(Math.pow(S,6)),C=this,U="";;){var F=T(C,E).g;C=w(C,F.j(E));var L=((0<C.g.length?C.g[0]:C.h)>>>0).toString(S);if(C=F,p(C))return L+U;for(;6>L.length;)L="0"+L;U=L+U}},e.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function p(S){if(S.h!=0)return!1;for(var E=0;E<S.g.length;E++)if(S.g[E]!=0)return!1;return!0}function g(S){return S.h==-1}e.l=function(S){return S=w(this,S),g(S)?-1:p(S)?0:1};function y(S){for(var E=S.g.length,C=[],U=0;U<E;U++)C[U]=~S.g[U];return new o(C,~S.h).add(m)}e.abs=function(){return g(this)?y(this):this},e.add=function(S){for(var E=Math.max(this.g.length,S.g.length),C=[],U=0,F=0;F<=E;F++){var L=U+(this.i(F)&65535)+(S.i(F)&65535),H=(L>>>16)+(this.i(F)>>>16)+(S.i(F)>>>16);U=H>>>16,L&=65535,H&=65535,C[F]=H<<16|L}return new o(C,C[C.length-1]&-2147483648?-1:0)};function w(S,E){return S.add(y(E))}e.j=function(S){if(p(this)||p(S))return f;if(g(this))return g(S)?y(this).j(y(S)):y(y(this).j(S));if(g(S))return y(this.j(y(S)));if(0>this.l(v)&&0>S.l(v))return A(this.m()*S.m());for(var E=this.g.length+S.g.length,C=[],U=0;U<2*E;U++)C[U]=0;for(U=0;U<this.g.length;U++)for(var F=0;F<S.g.length;F++){var L=this.i(U)>>>16,H=this.i(U)&65535,ue=S.i(F)>>>16,ie=S.i(F)&65535;C[2*U+2*F]+=H*ie,b(C,2*U+2*F),C[2*U+2*F+1]+=L*ie,b(C,2*U+2*F+1),C[2*U+2*F+1]+=H*ue,b(C,2*U+2*F+1),C[2*U+2*F+2]+=L*ue,b(C,2*U+2*F+2)}for(U=0;U<E;U++)C[U]=C[2*U+1]<<16|C[2*U];for(U=E;U<2*E;U++)C[U]=0;return new o(C,0)};function b(S,E){for(;(S[E]&65535)!=S[E];)S[E+1]+=S[E]>>>16,S[E]&=65535,E++}function x(S,E){this.g=S,this.h=E}function T(S,E){if(p(E))throw Error("division by zero");if(p(S))return new x(f,f);if(g(S))return E=T(y(S),E),new x(y(E.g),y(E.h));if(g(E))return E=T(S,y(E)),new x(y(E.g),E.h);if(30<S.g.length){if(g(S)||g(E))throw Error("slowDivide_ only works with positive integers.");for(var C=m,U=E;0>=U.l(S);)C=D(C),U=D(U);var F=k(C,1),L=k(U,1);for(U=k(U,2),C=k(C,2);!p(U);){var H=L.add(U);0>=H.l(S)&&(F=F.add(C),L=H),U=k(U,1),C=k(C,1)}return E=w(S,F.j(E)),new x(F,E)}for(F=f;0<=S.l(E);){for(C=Math.max(1,Math.floor(S.m()/E.m())),U=Math.ceil(Math.log(C)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),L=A(C),H=L.j(E);g(H)||0<H.l(S);)C-=U,L=A(C),H=L.j(E);p(L)&&(L=m),F=F.add(L),S=w(S,H)}return new x(F,S)}e.A=function(S){return T(this,S).h},e.and=function(S){for(var E=Math.max(this.g.length,S.g.length),C=[],U=0;U<E;U++)C[U]=this.i(U)&S.i(U);return new o(C,this.h&S.h)},e.or=function(S){for(var E=Math.max(this.g.length,S.g.length),C=[],U=0;U<E;U++)C[U]=this.i(U)|S.i(U);return new o(C,this.h|S.h)},e.xor=function(S){for(var E=Math.max(this.g.length,S.g.length),C=[],U=0;U<E;U++)C[U]=this.i(U)^S.i(U);return new o(C,this.h^S.h)};function D(S){for(var E=S.g.length+1,C=[],U=0;U<E;U++)C[U]=S.i(U)<<1|S.i(U-1)>>>31;return new o(C,S.h)}function k(S,E){var C=E>>5;E%=32;for(var U=S.g.length-C,F=[],L=0;L<U;L++)F[L]=0<E?S.i(L+C)>>>E|S.i(L+C+1)<<32-E:S.i(L+C);return new o(F,S.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=A,o.fromString=d,cI=o}).apply(typeof LV<"u"?LV:typeof self<"u"?self:typeof window<"u"?window:{});var My=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(N,fe,we){return N==Array.prototype||N==Object.prototype||(N[fe]=we.value),N};function n(N){N=[typeof globalThis=="object"&&globalThis,N,typeof window=="object"&&window,typeof self=="object"&&self,typeof My=="object"&&My];for(var fe=0;fe<N.length;++fe){var we=N[fe];if(we&&we.Math==Math)return we}throw Error("Cannot find global object")}var a=n(this);function r(N,fe){if(fe)e:{var we=a;N=N.split(".");for(var Ne=0;Ne<N.length-1;Ne++){var pt=N[Ne];if(!(pt in we))break e;we=we[pt]}N=N[N.length-1],Ne=we[N],fe=fe(Ne),fe!=Ne&&fe!=null&&t(we,N,{configurable:!0,writable:!0,value:fe})}}function s(N,fe){N instanceof String&&(N+="");var we=0,Ne=!1,pt={next:function(){if(!Ne&&we<N.length){var Bt=we++;return{value:fe(Bt,N[Bt]),done:!1}}return Ne=!0,{done:!0,value:void 0}}};return pt[Symbol.iterator]=function(){return pt},pt}r("Array.prototype.values",function(N){return N||function(){return s(this,function(fe,we){return we})}});var o=o||{},i=this||self;function c(N){var fe=typeof N;return fe=fe!="object"?fe:N?Array.isArray(N)?"array":fe:"null",fe=="array"||fe=="object"&&typeof N.length=="number"}function A(N){var fe=typeof N;return fe=="object"&&N!=null||fe=="function"}function d(N,fe,we){return N.call.apply(N.bind,arguments)}function f(N,fe,we){if(!N)throw Error();if(2<arguments.length){var Ne=Array.prototype.slice.call(arguments,2);return function(){var pt=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(pt,Ne),N.apply(fe,pt)}}return function(){return N.apply(fe,arguments)}}function m(N,fe,we){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function v(N,fe){var we=Array.prototype.slice.call(arguments,1);return function(){var Ne=we.slice();return Ne.push.apply(Ne,arguments),N.apply(this,Ne)}}function p(N,fe){function we(){}we.prototype=fe.prototype,N.aa=fe.prototype,N.prototype=new we,N.prototype.constructor=N,N.Qb=function(Ne,pt,Bt){for(var Zt=Array(arguments.length-2),Da=2;Da<arguments.length;Da++)Zt[Da-2]=arguments[Da];return fe.prototype[pt].apply(Ne,Zt)}}function g(N){const fe=N.length;if(0<fe){const we=Array(fe);for(let Ne=0;Ne<fe;Ne++)we[Ne]=N[Ne];return we}return[]}function y(N,fe){for(let we=1;we<arguments.length;we++){const Ne=arguments[we];if(c(Ne)){const pt=N.length||0,Bt=Ne.length||0;N.length=pt+Bt;for(let Zt=0;Zt<Bt;Zt++)N[pt+Zt]=Ne[Zt]}else N.push(Ne)}}class w{constructor(fe,we){this.i=fe,this.j=we,this.h=0,this.g=null}get(){let fe;return 0<this.h?(this.h--,fe=this.g,this.g=fe.next,fe.next=null):fe=this.i(),fe}}function b(N){return/^[\s\xa0]*$/.test(N)}function x(){var N=i.navigator;return N&&(N=N.userAgent)?N:""}function T(N){return T[" "](N),N}T[" "]=function(){};var D=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function k(N,fe,we){for(const Ne in N)fe.call(we,N[Ne],Ne,N)}function S(N,fe){for(const we in N)fe.call(void 0,N[we],we,N)}function E(N){const fe={};for(const we in N)fe[we]=N[we];return fe}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(N,fe){let we,Ne;for(let pt=1;pt<arguments.length;pt++){Ne=arguments[pt];for(we in Ne)N[we]=Ne[we];for(let Bt=0;Bt<C.length;Bt++)we=C[Bt],Object.prototype.hasOwnProperty.call(Ne,we)&&(N[we]=Ne[we])}}function F(N){var fe=1;N=N.split(":");const we=[];for(;0<fe&&N.length;)we.push(N.shift()),fe--;return N.length&&we.push(N.join(":")),we}function L(N){i.setTimeout(()=>{throw N},0)}function H(){var N=Z;let fe=null;return N.g&&(fe=N.g,N.g=N.g.next,N.g||(N.h=null),fe.next=null),fe}class ue{constructor(){this.h=this.g=null}add(fe,we){const Ne=ie.get();Ne.set(fe,we),this.h?this.h.next=Ne:this.g=Ne,this.h=Ne}}var ie=new w(()=>new Q,N=>N.reset());class Q{constructor(){this.next=this.g=this.h=null}set(fe,we){this.h=fe,this.g=we,this.next=null}reset(){this.next=this.g=this.h=null}}let X,le=!1,Z=new ue,re=()=>{const N=i.Promise.resolve(void 0);X=()=>{N.then(q)}};var q=()=>{for(var N;N=H();){try{N.h.call(N.g)}catch(we){L(we)}var fe=ie;fe.j(N),100>fe.h&&(fe.h++,N.next=fe.g,fe.g=N)}le=!1};function P(){this.s=this.s,this.C=this.C}P.prototype.s=!1,P.prototype.ma=function(){this.s||(this.s=!0,this.N())},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function G(N,fe){this.type=N,this.g=this.target=fe,this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};var J=(function(){if(!i.addEventListener||!Object.defineProperty)return!1;var N=!1,fe=Object.defineProperty({},"passive",{get:function(){N=!0}});try{const we=()=>{};i.addEventListener("test",we,fe),i.removeEventListener("test",we,fe)}catch{}return N})();function M(N,fe){if(G.call(this,N?N.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,N){var we=this.type=N.type,Ne=N.changedTouches&&N.changedTouches.length?N.changedTouches[0]:null;if(this.target=N.target||N.srcElement,this.g=fe,fe=N.relatedTarget){if(D){e:{try{T(fe.nodeName);var pt=!0;break e}catch{}pt=!1}pt||(fe=null)}}else we=="mouseover"?fe=N.fromElement:we=="mouseout"&&(fe=N.toElement);this.relatedTarget=fe,Ne?(this.clientX=Ne.clientX!==void 0?Ne.clientX:Ne.pageX,this.clientY=Ne.clientY!==void 0?Ne.clientY:Ne.pageY,this.screenX=Ne.screenX||0,this.screenY=Ne.screenY||0):(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0),this.button=N.button,this.key=N.key||"",this.ctrlKey=N.ctrlKey,this.altKey=N.altKey,this.shiftKey=N.shiftKey,this.metaKey=N.metaKey,this.pointerId=N.pointerId||0,this.pointerType=typeof N.pointerType=="string"?N.pointerType:te[N.pointerType]||"",this.state=N.state,this.i=N,N.defaultPrevented&&M.aa.h.call(this)}}p(M,G);var te={2:"touch",3:"pen",4:"mouse"};M.prototype.h=function(){M.aa.h.call(this);var N=this.i;N.preventDefault?N.preventDefault():N.returnValue=!1};var Y="closure_listenable_"+(1e6*Math.random()|0),W=0;function ee(N,fe,we,Ne,pt){this.listener=N,this.proxy=null,this.src=fe,this.type=we,this.capture=!!Ne,this.ha=pt,this.key=++W,this.da=this.fa=!1}function ae(N){N.da=!0,N.listener=null,N.proxy=null,N.src=null,N.ha=null}function oe(N){this.src=N,this.g={},this.h=0}oe.prototype.add=function(N,fe,we,Ne,pt){var Bt=N.toString();N=this.g[Bt],N||(N=this.g[Bt]=[],this.h++);var Zt=ce(N,fe,Ne,pt);return-1<Zt?(fe=N[Zt],we||(fe.fa=!1)):(fe=new ee(fe,this.src,Bt,!!Ne,pt),fe.fa=we,N.push(fe)),fe};function j(N,fe){var we=fe.type;if(we in N.g){var Ne=N.g[we],pt=Array.prototype.indexOf.call(Ne,fe,void 0),Bt;(Bt=0<=pt)&&Array.prototype.splice.call(Ne,pt,1),Bt&&(ae(fe),N.g[we].length==0&&(delete N.g[we],N.h--))}}function ce(N,fe,we,Ne){for(var pt=0;pt<N.length;++pt){var Bt=N[pt];if(!Bt.da&&Bt.listener==fe&&Bt.capture==!!we&&Bt.ha==Ne)return pt}return-1}var de="closure_lm_"+(1e6*Math.random()|0),_e={};function Re(N,fe,we,Ne,pt){if(Array.isArray(fe)){for(var Bt=0;Bt<fe.length;Bt++)Re(N,fe[Bt],we,Ne,pt);return null}return we=ut(we),N&&N[Y]?N.K(fe,we,A(Ne)?!!Ne.capture:!1,pt):be(N,fe,we,!1,Ne,pt)}function be(N,fe,we,Ne,pt,Bt){if(!fe)throw Error("Invalid event type");var Zt=A(pt)?!!pt.capture:!!pt,Da=Me(N);if(Da||(N[de]=Da=new oe(N)),we=Da.add(fe,we,Ne,Zt,Bt),we.proxy)return we;if(Ne=Ee(),we.proxy=Ne,Ne.src=N,Ne.listener=we,N.addEventListener)J||(pt=Zt),pt===void 0&&(pt=!1),N.addEventListener(fe.toString(),Ne,pt);else if(N.attachEvent)N.attachEvent(Te(fe.toString()),Ne);else if(N.addListener&&N.removeListener)N.addListener(Ne);else throw Error("addEventListener and attachEvent are unavailable.");return we}function Ee(){function N(we){return fe.call(N.src,N.listener,we)}const fe=Oe;return N}function Ce(N,fe,we,Ne,pt){if(Array.isArray(fe))for(var Bt=0;Bt<fe.length;Bt++)Ce(N,fe[Bt],we,Ne,pt);else Ne=A(Ne)?!!Ne.capture:!!Ne,we=ut(we),N&&N[Y]?(N=N.i,fe=String(fe).toString(),fe in N.g&&(Bt=N.g[fe],we=ce(Bt,we,Ne,pt),-1<we&&(ae(Bt[we]),Array.prototype.splice.call(Bt,we,1),Bt.length==0&&(delete N.g[fe],N.h--)))):N&&(N=Me(N))&&(fe=N.g[fe.toString()],N=-1,fe&&(N=ce(fe,we,Ne,pt)),(we=-1<N?fe[N]:null)&&Be(we))}function Be(N){if(typeof N!="number"&&N&&!N.da){var fe=N.src;if(fe&&fe[Y])j(fe.i,N);else{var we=N.type,Ne=N.proxy;fe.removeEventListener?fe.removeEventListener(we,Ne,N.capture):fe.detachEvent?fe.detachEvent(Te(we),Ne):fe.addListener&&fe.removeListener&&fe.removeListener(Ne),(we=Me(fe))?(j(we,N),we.h==0&&(we.src=null,fe[de]=null)):ae(N)}}}function Te(N){return N in _e?_e[N]:_e[N]="on"+N}function Oe(N,fe){if(N.da)N=!0;else{fe=new M(fe,this);var we=N.listener,Ne=N.ha||N.src;N.fa&&Be(N),N=we.call(Ne,fe)}return N}function Me(N){return N=N[de],N instanceof oe?N:null}var rt="__closure_events_fn_"+(1e9*Math.random()>>>0);function ut(N){return typeof N=="function"?N:(N[rt]||(N[rt]=function(fe){return N.handleEvent(fe)}),N[rt])}function Ie(){P.call(this),this.i=new oe(this),this.M=this,this.F=null}p(Ie,P),Ie.prototype[Y]=!0,Ie.prototype.removeEventListener=function(N,fe,we,Ne){Ce(this,N,fe,we,Ne)};function Ue(N,fe){var we,Ne=N.F;if(Ne)for(we=[];Ne;Ne=Ne.F)we.push(Ne);if(N=N.M,Ne=fe.type||fe,typeof fe=="string")fe=new G(fe,N);else if(fe instanceof G)fe.target=fe.target||N;else{var pt=fe;fe=new G(Ne,N),U(fe,pt)}if(pt=!0,we)for(var Bt=we.length-1;0<=Bt;Bt--){var Zt=fe.g=we[Bt];pt=dt(Zt,Ne,!0,fe)&&pt}if(Zt=fe.g=N,pt=dt(Zt,Ne,!0,fe)&&pt,pt=dt(Zt,Ne,!1,fe)&&pt,we)for(Bt=0;Bt<we.length;Bt++)Zt=fe.g=we[Bt],pt=dt(Zt,Ne,!1,fe)&&pt}Ie.prototype.N=function(){if(Ie.aa.N.call(this),this.i){var N=this.i,fe;for(fe in N.g){for(var we=N.g[fe],Ne=0;Ne<we.length;Ne++)ae(we[Ne]);delete N.g[fe],N.h--}}this.F=null},Ie.prototype.K=function(N,fe,we,Ne){return this.i.add(String(N),fe,!1,we,Ne)},Ie.prototype.L=function(N,fe,we,Ne){return this.i.add(String(N),fe,!0,we,Ne)};function dt(N,fe,we,Ne){if(fe=N.i.g[String(fe)],!fe)return!0;fe=fe.concat();for(var pt=!0,Bt=0;Bt<fe.length;++Bt){var Zt=fe[Bt];if(Zt&&!Zt.da&&Zt.capture==we){var Da=Zt.listener,$r=Zt.ha||Zt.src;Zt.fa&&j(N.i,Zt),pt=Da.call($r,Ne)!==!1&&pt}}return pt&&!Ne.defaultPrevented}function Ft(N,fe,we){if(typeof N=="function")we&&(N=m(N,we));else if(N&&typeof N.handleEvent=="function")N=m(N.handleEvent,N);else throw Error("Invalid listener argument");return 2147483647<Number(fe)?-1:i.setTimeout(N,fe||0)}function it(N){N.g=Ft(()=>{N.g=null,N.i&&(N.i=!1,it(N))},N.l);const fe=N.h;N.h=null,N.m.apply(null,fe)}class qe extends P{constructor(fe,we){super(),this.m=fe,this.l=we,this.h=null,this.i=!1,this.g=null}j(fe){this.h=arguments,this.g?this.i=!0:it(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yt(N){P.call(this),this.h=N,this.g={}}p(yt,P);var mt=[];function xt(N){k(N.g,function(fe,we){this.g.hasOwnProperty(we)&&Be(fe)},N),N.g={}}yt.prototype.N=function(){yt.aa.N.call(this),xt(this)},yt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var an=i.JSON.stringify,Cn=i.JSON.parse,oa=class{stringify(N){return i.JSON.stringify(N,void 0)}parse(N){return i.JSON.parse(N,void 0)}};function Vt(){}Vt.prototype.h=null;function kt(N){return N.h||(N.h=N.i())}function at(){}var bt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function en(){G.call(this,"d")}p(en,G);function Ye(){G.call(this,"c")}p(Ye,G);var We={},_t=null;function Rt(){return _t=_t||new Ie}We.La="serverreachability";function zt(N){G.call(this,We.La,N)}p(zt,G);function Pt(N){const fe=Rt();Ue(fe,new zt(fe))}We.STAT_EVENT="statevent";function Wt(N,fe){G.call(this,We.STAT_EVENT,N),this.stat=fe}p(Wt,G);function Lt(N){const fe=Rt();Ue(fe,new Wt(fe,N))}We.Ma="timingevent";function ia(N,fe){G.call(this,We.Ma,N),this.size=fe}p(ia,G);function Ln(N,fe){if(typeof N!="function")throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){N()},fe)}function zn(){this.g=!0}zn.prototype.xa=function(){this.g=!1};function Yt(N,fe,we,Ne,pt,Bt){N.info(function(){if(N.g)if(Bt)for(var Zt="",Da=Bt.split("&"),$r=0;$r<Da.length;$r++){var _a=Da[$r].split("=");if(1<_a.length){var ds=_a[0];_a=_a[1];var Qa=ds.split("_");Zt=2<=Qa.length&&Qa[1]=="type"?Zt+(ds+"="+_a+"&"):Zt+(ds+"=redacted&")}}else Zt=null;else Zt=Bt;return"XMLHTTP REQ ("+Ne+") [attempt "+pt+"]: "+fe+`
`+we+`
`+Zt})}function Bn(N,fe,we,Ne,pt,Bt,Zt){N.info(function(){return"XMLHTTP RESP ("+Ne+") [ attempt "+pt+"]: "+fe+`
`+we+`
`+Bt+" "+Zt})}function ke(N,fe,we,Ne){N.info(function(){return"XMLHTTP TEXT ("+fe+"): "+Fe(N,we)+(Ne?" "+Ne:"")})}function ze(N,fe){N.info(function(){return"TIMEOUT: "+fe})}zn.prototype.info=function(){};function Fe(N,fe){if(!N.g)return fe;if(!fe)return null;try{var we=JSON.parse(fe);if(we){for(N=0;N<we.length;N++)if(Array.isArray(we[N])){var Ne=we[N];if(!(2>Ne.length)){var pt=Ne[1];if(Array.isArray(pt)&&!(1>pt.length)){var Bt=pt[0];if(Bt!="noop"&&Bt!="stop"&&Bt!="close")for(var Zt=1;Zt<pt.length;Zt++)pt[Zt]=""}}}}return an(we)}catch{return fe}}var Le={NO_ERROR:0,TIMEOUT:8},Ge={},he;function se(){}p(se,Vt),se.prototype.g=function(){return new XMLHttpRequest},se.prototype.i=function(){return{}},he=new se;function ge(N,fe,we,Ne){this.j=N,this.i=fe,this.l=we,this.R=Ne||1,this.U=new yt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xe}function xe(){this.i=null,this.g="",this.h=!1}var He={},tt={};function nt(N,fe,we){N.L=1,N.v=su(pn(fe)),N.m=we,N.P=!0,et(N,null)}function et(N,fe){N.F=Date.now(),It(N),N.A=pn(N.v);var we=N.A,Ne=N.R;Array.isArray(Ne)||(Ne=[String(Ne)]),$n(we.i,"t",Ne),N.C=0,we=N.j.J,N.h=new xe,N.g=Zg(N.j,we?fe:null,!N.m),0<N.O&&(N.M=new qe(m(N.Y,N,N.g),N.O)),fe=N.U,we=N.g,Ne=N.ca;var pt="readystatechange";Array.isArray(pt)||(pt&&(mt[0]=pt.toString()),pt=mt);for(var Bt=0;Bt<pt.length;Bt++){var Zt=Re(we,pt[Bt],Ne||fe.handleEvent,!1,fe.h||fe);if(!Zt)break;fe.g[Zt.key]=Zt}fe=N.H?E(N.H):{},N.m?(N.u||(N.u="POST"),fe["Content-Type"]="application/x-www-form-urlencoded",N.g.ea(N.A,N.u,N.m,fe)):(N.u="GET",N.g.ea(N.A,N.u,null,fe)),Pt(),Yt(N.i,N.u,N.A,N.l,N.R,N.m)}ge.prototype.ca=function(N){N=N.target;const fe=this.M;fe&&es(N)==3?fe.j():this.Y(N)},ge.prototype.Y=function(N){try{if(N==this.g)e:{const Qa=es(this.g);var fe=this.g.Ba();const iu=this.g.Z();if(!(3>Qa)&&(Qa!=3||this.g&&(this.h.h||this.g.oa()||dA(this.g)))){this.J||Qa!=4||fe==7||(fe==8||0>=iu?Pt(3):Pt(2)),kn(this);var we=this.g.Z();this.X=we;t:if(st(this)){var Ne=dA(this.g);N="";var pt=Ne.length,Bt=es(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Sn(this),hn(this);var Zt="";break t}this.h.i=new i.TextDecoder}for(fe=0;fe<pt;fe++)this.h.h=!0,N+=this.h.i.decode(Ne[fe],{stream:!(Bt&&fe==pt-1)});Ne.length=0,this.h.g+=N,this.C=0,Zt=this.h.g}else Zt=this.g.oa();if(this.o=we==200,Bn(this.i,this.u,this.A,this.l,this.R,Qa,we),this.o){if(this.T&&!this.K){t:{if(this.g){var Da,$r=this.g;if((Da=$r.g?$r.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(Da)){var _a=Da;break t}}_a=null}if(we=_a)ke(this.i,this.l,we,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pa(this,we);else{this.o=!1,this.s=3,Lt(12),Sn(this),hn(this);break e}}if(this.P){we=!0;let Ns;for(;!this.J&&this.C<Zt.length;)if(Ns=wt(this,Zt),Ns==tt){Qa==4&&(this.s=4,Lt(14),we=!1),ke(this.i,this.l,null,"[Incomplete Response]");break}else if(Ns==He){this.s=4,Lt(15),ke(this.i,this.l,Zt,"[Invalid Chunk]"),we=!1;break}else ke(this.i,this.l,Ns,null),Pa(this,Ns);if(st(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qa!=4||Zt.length!=0||this.h.h||(this.s=1,Lt(16),we=!1),this.o=this.o&&we,!we)ke(this.i,this.l,Zt,"[Invalid Chunked Response]"),Sn(this),hn(this);else if(0<Zt.length&&!this.W){this.W=!0;var ds=this.j;ds.g==this&&ds.ba&&!ds.M&&(ds.j.info("Great, no buffering proxy detected. Bytes received: "+Zt.length),Ui(ds),ds.M=!0,Lt(11))}}else ke(this.i,this.l,Zt,null),Pa(this,Zt);Qa==4&&Sn(this),this.o&&!this.J&&(Qa==4?rr(this.j,this):(this.o=!1,It(this)))}else Ze(this.g),we==400&&0<Zt.indexOf("Unknown SID")?(this.s=3,Lt(12)):(this.s=0,Lt(13)),Sn(this),hn(this)}}}catch{}finally{}};function st(N){return N.g?N.u=="GET"&&N.L!=2&&N.j.Ca:!1}function wt(N,fe){var we=N.C,Ne=fe.indexOf(`
`,we);return Ne==-1?tt:(we=Number(fe.substring(we,Ne)),isNaN(we)?He:(Ne+=1,Ne+we>fe.length?tt:(fe=fe.slice(Ne,Ne+we),N.C=Ne+we,fe)))}ge.prototype.cancel=function(){this.J=!0,Sn(this)};function It(N){N.S=Date.now()+N.I,tn(N,N.I)}function tn(N,fe){if(N.B!=null)throw Error("WatchDog timer not null");N.B=Ln(m(N.ba,N),fe)}function kn(N){N.B&&(i.clearTimeout(N.B),N.B=null)}ge.prototype.ba=function(){this.B=null;const N=Date.now();0<=N-this.S?(ze(this.i,this.A),this.L!=2&&(Pt(),Lt(17)),Sn(this),this.s=2,hn(this)):tn(this,this.S-N)};function hn(N){N.j.G==0||N.J||rr(N.j,N)}function Sn(N){kn(N);var fe=N.M;fe&&typeof fe.ma=="function"&&fe.ma(),N.M=null,xt(N.U),N.g&&(fe=N.g,N.g=null,fe.abort(),fe.ma())}function Pa(N,fe){try{var we=N.j;if(we.G!=0&&(we.g==N||Za(we.h,N))){if(!N.K&&Za(we.h,N)&&we.G==3){try{var Ne=we.Da.g.parse(fe)}catch{Ne=null}if(Array.isArray(Ne)&&Ne.length==3){var pt=Ne;if(pt[0]==0){e:if(!we.u){if(we.g)if(we.g.F+3e3<N.F)Wc(we),AA(we);else break e;cm(we),Lt(18)}}else we.za=pt[1],0<we.za-we.T&&37500>pt[2]&&we.F&&we.v==0&&!we.C&&(we.C=Ln(m(we.Za,we),6e3));if(1>=Wo(we.h)&&we.ca){try{we.ca()}catch{}we.ca=void 0}}else Al(we,11)}else if((N.K||we.g==N)&&Wc(we),!b(fe))for(pt=we.Da.g.parse(fe),fe=0;fe<pt.length;fe++){let _a=pt[fe];if(we.T=_a[0],_a=_a[1],we.G==2)if(_a[0]=="c"){we.K=_a[1],we.ia=_a[2];const ds=_a[3];ds!=null&&(we.la=ds,we.j.info("VER="+we.la));const Qa=_a[4];Qa!=null&&(we.Aa=Qa,we.j.info("SVER="+we.Aa));const iu=_a[5];iu!=null&&typeof iu=="number"&&0<iu&&(Ne=1.5*iu,we.L=Ne,we.j.info("backChannelRequestTimeoutMs_="+Ne)),Ne=we;const Ns=N.g;if(Ns){const pA=Ns.g?Ns.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pA){var Bt=Ne.h;Bt.g||pA.indexOf("spdy")==-1&&pA.indexOf("quic")==-1&&pA.indexOf("h2")==-1||(Bt.j=Bt.l,Bt.g=new Set,Bt.h&&(jo(Bt,Bt.h),Bt.h=null))}if(Ne.D){const Am=Ns.g?Ns.g.getResponseHeader("X-HTTP-Session-Id"):null;Am&&(Ne.ya=Am,Ha(Ne.I,Ne.D,Am))}}we.G=3,we.l&&we.l.ua(),we.ba&&(we.R=Date.now()-N.F,we.j.info("Handshake RTT: "+we.R+"ms")),Ne=we;var Zt=N;if(Ne.qa=dm(Ne,Ne.J?Ne.ia:null,Ne.W),Zt.K){Es(Ne.h,Zt);var Da=Zt,$r=Ne.L;$r&&(Da.I=$r),Da.B&&(kn(Da),It(Da)),Ne.g=Zt}else Xg(Ne);0<we.i.length&&fA(we)}else _a[0]!="stop"&&_a[0]!="close"||Al(we,7);else we.G==3&&(_a[0]=="stop"||_a[0]=="close"?_a[0]=="stop"?Al(we,7):um(we):_a[0]!="noop"&&we.l&&we.l.ta(_a),we.v=0)}}Pt(4)}catch{}}var Er=class{constructor(N,fe){this.g=N,this.map=fe}};function Zr(N){this.l=N||10,i.PerformanceNavigationTiming?(N=i.performance.getEntriesByType("navigation"),N=0<N.length&&(N[0].nextHopProtocol=="hq"||N[0].nextHopProtocol=="h2")):N=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=N?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ss(N){return N.h?!0:N.g?N.g.size>=N.j:!1}function Wo(N){return N.h?1:N.g?N.g.size:0}function Za(N,fe){return N.h?N.h==fe:N.g?N.g.has(fe):!1}function jo(N,fe){N.g?N.g.add(fe):N.h=fe}function Es(N,fe){N.h&&N.h==fe?N.h=null:N.g&&N.g.has(fe)&&N.g.delete(fe)}Zr.prototype.cancel=function(){if(this.i=Nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const N of this.g.values())N.cancel();this.g.clear()}};function Nt(N){if(N.h!=null)return N.i.concat(N.h.D);if(N.g!=null&&N.g.size!==0){let fe=N.i;for(const we of N.g.values())fe=fe.concat(we.D);return fe}return g(N.i)}function Dr(N){if(N.V&&typeof N.V=="function")return N.V();if(typeof Map<"u"&&N instanceof Map||typeof Set<"u"&&N instanceof Set)return Array.from(N.values());if(typeof N=="string")return N.split("");if(c(N)){for(var fe=[],we=N.length,Ne=0;Ne<we;Ne++)fe.push(N[Ne]);return fe}fe=[],we=0;for(Ne in N)fe[we++]=N[Ne];return fe}function Mn(N){if(N.na&&typeof N.na=="function")return N.na();if(!N.V||typeof N.V!="function"){if(typeof Map<"u"&&N instanceof Map)return Array.from(N.keys());if(!(typeof Set<"u"&&N instanceof Set)){if(c(N)||typeof N=="string"){var fe=[];N=N.length;for(var we=0;we<N;we++)fe.push(we);return fe}fe=[],we=0;for(const Ne in N)fe[we++]=Ne;return fe}}}function Eo(N,fe){if(N.forEach&&typeof N.forEach=="function")N.forEach(fe,void 0);else if(c(N)||typeof N=="string")Array.prototype.forEach.call(N,fe,void 0);else for(var we=Mn(N),Ne=Dr(N),pt=Ne.length,Bt=0;Bt<pt;Bt++)fe.call(void 0,Ne[Bt],we&&we[Bt],N)}var Ys=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kc(N,fe){if(N){N=N.split("&");for(var we=0;we<N.length;we++){var Ne=N[we].indexOf("="),pt=null;if(0<=Ne){var Bt=N[we].substring(0,Ne);pt=N[we].substring(Ne+1)}else Bt=N[we];fe(Bt,pt?decodeURIComponent(pt.replace(/\+/g," ")):"")}}}function vt(N){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,N instanceof vt){this.h=N.h,In(this,N.j),this.o=N.o,this.g=N.g,ya(this,N.s),this.l=N.l;var fe=N.i,we=new nn;we.i=fe.i,fe.g&&(we.g=new Map(fe.g),we.h=fe.h),ju(this,we),this.m=N.m}else N&&(fe=String(N).match(Ys))?(this.h=!1,In(this,fe[1]||"",!0),this.o=ll(fe[2]||""),this.g=ll(fe[3]||"",!0),ya(this,fe[4]),this.l=ll(fe[5]||"",!0),ju(this,fe[6]||"",!0),this.m=ll(fe[7]||"")):(this.h=!1,this.i=new nn(null,this.h))}vt.prototype.toString=function(){var N=[],fe=this.j;fe&&N.push(Bo(fe,iA,!0),":");var we=this.g;return(we||fe=="file")&&(N.push("//"),(fe=this.o)&&N.push(Bo(fe,iA,!0),"@"),N.push(encodeURIComponent(String(we)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),we=this.s,we!=null&&N.push(":",String(we))),(we=this.l)&&(this.g&&we.charAt(0)!="/"&&N.push("/"),N.push(Bo(we,we.charAt(0)=="/"?$e:Dh,!0))),(we=this.i.toString())&&N.push("?",we),(we=this.m)&&N.push("#",Bo(we,jt)),N.join("")};function pn(N){return new vt(N)}function In(N,fe,we){N.j=we?ll(fe,!0):fe,N.j&&(N.j=N.j.replace(/:$/,""))}function ya(N,fe){if(fe){if(fe=Number(fe),isNaN(fe)||0>fe)throw Error("Bad port number "+fe);N.s=fe}else N.s=null}function ju(N,fe,we){fe instanceof nn?(N.i=fe,Ur(N.i,N.h)):(we||(fe=Bo(fe,pe)),N.i=new nn(fe,N.h))}function Ha(N,fe,we){N.i.set(fe,we)}function su(N){return Ha(N,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),N}function ll(N,fe){return N?fe?decodeURI(N.replace(/%25/g,"%2525")):decodeURIComponent(N):""}function Bo(N,fe,we){return typeof N=="string"?(N=encodeURI(N).replace(fe,im),we&&(N=N.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N):null}function im(N){return N=N.charCodeAt(0),"%"+(N>>4&15).toString(16)+(N&15).toString(16)}var iA=/[#\/\?@]/g,Dh=/[#\?:]/g,$e=/[#\?]/g,pe=/[#\?@]/g,jt=/#/g;function nn(N,fe){this.h=this.g=null,this.i=N||null,this.j=!!fe}function Tt(N){N.g||(N.g=new Map,N.h=0,N.i&&Kc(N.i,function(fe,we){N.add(decodeURIComponent(fe.replace(/\+/g," ")),we)}))}e=nn.prototype,e.add=function(N,fe){Tt(this),this.i=null,N=gn(this,N);var we=this.g.get(N);return we||this.g.set(N,we=[]),we.push(fe),this.h+=1,this};function fn(N,fe){Tt(N),fe=gn(N,fe),N.g.has(fe)&&(N.i=null,N.h-=N.g.get(fe).length,N.g.delete(fe))}function rn(N,fe){return Tt(N),fe=gn(N,fe),N.g.has(fe)}e.forEach=function(N,fe){Tt(this),this.g.forEach(function(we,Ne){we.forEach(function(pt){N.call(fe,pt,Ne,this)},this)},this)},e.na=function(){Tt(this);const N=Array.from(this.g.values()),fe=Array.from(this.g.keys()),we=[];for(let Ne=0;Ne<fe.length;Ne++){const pt=N[Ne];for(let Bt=0;Bt<pt.length;Bt++)we.push(fe[Ne])}return we},e.V=function(N){Tt(this);let fe=[];if(typeof N=="string")rn(this,N)&&(fe=fe.concat(this.g.get(gn(this,N))));else{N=Array.from(this.g.values());for(let we=0;we<N.length;we++)fe=fe.concat(N[we])}return fe},e.set=function(N,fe){return Tt(this),this.i=null,N=gn(this,N),rn(this,N)&&(this.h-=this.g.get(N).length),this.g.set(N,[fe]),this.h+=1,this},e.get=function(N,fe){return N?(N=this.V(N),0<N.length?String(N[0]):fe):fe};function $n(N,fe,we){fn(N,fe),0<we.length&&(N.i=null,N.g.set(gn(N,fe),g(we)),N.h+=we.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const N=[],fe=Array.from(this.g.keys());for(var we=0;we<fe.length;we++){var Ne=fe[we];const Bt=encodeURIComponent(String(Ne)),Zt=this.V(Ne);for(Ne=0;Ne<Zt.length;Ne++){var pt=Bt;Zt[Ne]!==""&&(pt+="="+encodeURIComponent(String(Zt[Ne]))),N.push(pt)}}return this.i=N.join("&")};function gn(N,fe){return fe=String(fe),N.j&&(fe=fe.toLowerCase()),fe}function Ur(N,fe){fe&&!N.j&&(Tt(N),N.i=null,N.g.forEach(function(we,Ne){var pt=Ne.toLowerCase();Ne!=pt&&(fn(this,Ne),$n(this,pt,we))},N)),N.j=fe}function Ta(N,fe){const we=new zn;if(i.Image){const Ne=new Image;Ne.onload=v(ko,we,"TestLoadImage: loaded",!0,fe,Ne),Ne.onerror=v(ko,we,"TestLoadImage: error",!1,fe,Ne),Ne.onabort=v(ko,we,"TestLoadImage: abort",!1,fe,Ne),Ne.ontimeout=v(ko,we,"TestLoadImage: timeout",!1,fe,Ne),i.setTimeout(function(){Ne.ontimeout&&Ne.ontimeout()},1e4),Ne.src=N}else fe(!1)}function lA(N,fe){const we=new zn,Ne=new AbortController,pt=setTimeout(()=>{Ne.abort(),ko(we,"TestPingServer: timeout",!1,fe)},1e4);fetch(N,{signal:Ne.signal}).then(Bt=>{clearTimeout(pt),Bt.ok?ko(we,"TestPingServer: ok",!0,fe):ko(we,"TestPingServer: server error",!1,fe)}).catch(()=>{clearTimeout(pt),ko(we,"TestPingServer: error",!1,fe)})}function ko(N,fe,we,Ne,pt){try{pt&&(pt.onload=null,pt.onerror=null,pt.onabort=null,pt.ontimeout=null),Ne(we)}catch{}}function Uh(){this.g=new oa}function vr(N,fe,we){const Ne=we||"";try{Eo(N,function(pt,Bt){let Zt=pt;A(pt)&&(Zt=an(pt)),fe.push(Ne+Bt+"="+encodeURIComponent(Zt))})}catch(pt){throw fe.push(Ne+"type="+encodeURIComponent("_badmap")),pt}}function qu(N){this.l=N.Ub||null,this.j=N.eb||!1}p(qu,Vt),qu.prototype.g=function(){return new Yu(this.l,this.j)},qu.prototype.i=(function(N){return function(){return N}})({});function Yu(N,fe){Ie.call(this),this.D=N,this.o=fe,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(Yu,Ie),e=Yu.prototype,e.open=function(N,fe){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=N,this.A=fe,this.readyState=1,Wn(this)},e.send=function(N){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const fe={headers:this.u,method:this.B,credentials:this.m,cache:void 0};N&&(fe.body=N),(this.D||i).fetch(new Request(this.A,fe)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,na(this)),this.readyState=0},e.Sa=function(N){if(this.g&&(this.l=N,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=N.headers,this.readyState=2,Wn(this)),this.g&&(this.readyState=3,Wn(this),this.g)))if(this.responseType==="arraybuffer")N.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof i.ReadableStream<"u"&&"body"in N){if(this.j=N.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ul(this)}else N.text().then(this.Ra.bind(this),this.ga.bind(this))};function ul(N){N.j.read().then(N.Pa.bind(N)).catch(N.ga.bind(N))}e.Pa=function(N){if(this.g){if(this.o&&N.value)this.response.push(N.value);else if(!this.o){var fe=N.value?N.value:new Uint8Array(0);(fe=this.v.decode(fe,{stream:!N.done}))&&(this.response=this.responseText+=fe)}N.done?na(this):Wn(this),this.readyState==3&&ul(this)}},e.Ra=function(N){this.g&&(this.response=this.responseText=N,na(this))},e.Qa=function(N){this.g&&(this.response=N,na(this))},e.ga=function(){this.g&&na(this)};function na(N){N.readyState=4,N.l=null,N.j=null,N.v=null,Wn(N)}e.setRequestHeader=function(N,fe){this.u.append(N,fe)},e.getResponseHeader=function(N){return this.h&&this.h.get(N.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const N=[],fe=this.h.entries();for(var we=fe.next();!we.done;)we=we.value,N.push(we[0]+": "+we[1]),we=fe.next();return N.join(`\r
`)};function Wn(N){N.onreadystatechange&&N.onreadystatechange.call(N)}Object.defineProperty(Yu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(N){this.m=N?"include":"same-origin"}});function Hr(N){let fe="";return k(N,function(we,Ne){fe+=Ne,fe+=":",fe+=we,fe+=`\r
`}),fe}function uA(N,fe,we){e:{for(Ne in we){var Ne=!1;break e}Ne=!0}Ne||(we=Hr(we),typeof N=="string"?we!=null&&encodeURIComponent(String(we)):Ha(N,fe,we))}function ur(N){Ie.call(this),this.headers=new Map,this.o=N||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(ur,Ie);var ou=/^https?$/i,di=["POST","PUT"];e=ur.prototype,e.Ha=function(N){this.J=N},e.ea=function(N,fe,we,Ne){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+N);fe=fe?fe.toUpperCase():"GET",this.D=N,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():he.g(),this.v=this.o?kt(this.o):kt(he),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(fe,String(N),!0),this.B=!1}catch(Bt){Xs(this,Bt);return}if(N=we||"",we=new Map(this.headers),Ne)if(Object.getPrototypeOf(Ne)===Object.prototype)for(var pt in Ne)we.set(pt,Ne[pt]);else if(typeof Ne.keys=="function"&&typeof Ne.get=="function")for(const Bt of Ne.keys())we.set(Bt,Ne.get(Bt));else throw Error("Unknown input type for opt_headers: "+String(Ne));Ne=Array.from(we.keys()).find(Bt=>Bt.toLowerCase()=="content-type"),pt=i.FormData&&N instanceof i.FormData,!(0<=Array.prototype.indexOf.call(di,fe,void 0))||Ne||pt||we.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Bt,Zt]of we)this.g.setRequestHeader(Bt,Zt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Di(this),this.u=!0,this.g.send(N),this.u=!1}catch(Bt){Xs(this,Bt)}};function Xs(N,fe){N.h=!1,N.g&&(N.j=!0,N.g.abort(),N.j=!1),N.l=fe,N.m=5,cA(N),$a(N)}function cA(N){N.A||(N.A=!0,Ue(N,"complete"),Ue(N,"error"))}e.abort=function(N){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=N||7,Ue(this,"complete"),Ue(this,"abort"),$a(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$a(this,!0)),ur.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?lm(this):this.bb())},e.bb=function(){lm(this)};function lm(N){if(N.h&&typeof o<"u"&&(!N.v[1]||es(N)!=4||N.Z()!=2)){if(N.u&&es(N)==4)Ft(N.Ea,0,N);else if(Ue(N,"readystatechange"),es(N)==4){N.h=!1;try{const Zt=N.Z();e:switch(Zt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var fe=!0;break e;default:fe=!1}var we;if(!(we=fe)){var Ne;if(Ne=Zt===0){var pt=String(N.D).match(Ys)[1]||null;!pt&&i.self&&i.self.location&&(pt=i.self.location.protocol.slice(0,-1)),Ne=!ou.test(pt?pt.toLowerCase():"")}we=Ne}if(we)Ue(N,"complete"),Ue(N,"success");else{N.m=6;try{var Bt=2<es(N)?N.g.statusText:""}catch{Bt=""}N.l=Bt+" ["+N.Z()+"]",cA(N)}}finally{$a(N)}}}}function $a(N,fe){if(N.g){Di(N);const we=N.g,Ne=N.v[0]?()=>{}:null;N.g=null,N.v=null,fe||Ue(N,"ready");try{we.onreadystatechange=Ne}catch{}}}function Di(N){N.I&&(i.clearTimeout(N.I),N.I=null)}e.isActive=function(){return!!this.g};function es(N){return N.g?N.g.readyState:0}e.Z=function(){try{return 2<es(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(N){if(this.g){var fe=this.g.responseText;return N&&fe.indexOf(N)==0&&(fe=fe.substring(N.length)),Cn(fe)}};function dA(N){try{if(!N.g)return null;if("response"in N.g)return N.g.response;switch(N.H){case"":case"text":return N.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in N.g)return N.g.mozResponseArrayBuffer}return null}catch{return null}}function Ze(N){const fe={};N=(N.g&&2<=es(N)&&N.g.getAllResponseHeaders()||"").split(`\r
`);for(let Ne=0;Ne<N.length;Ne++){if(b(N[Ne]))continue;var we=F(N[Ne]);const pt=we[0];if(we=we[1],typeof we!="string")continue;we=we.trim();const Bt=fe[pt]||[];fe[pt]=Bt,Bt.push(we)}S(fe,function(Ne){return Ne.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yn(N,fe,we){return we&&we.internalChannelParams&&we.internalChannelParams[N]||fe}function cl(N){this.Aa=0,this.i=[],this.j=new zn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Yn("failFast",!1,N),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Yn("baseRetryDelayMs",5e3,N),this.cb=Yn("retryDelaySeedMs",1e4,N),this.Wa=Yn("forwardChannelMaxRetries",2,N),this.wa=Yn("forwardChannelRequestTimeoutMs",2e4,N),this.pa=N&&N.xmlHttpFactory||void 0,this.Xa=N&&N.Tb||void 0,this.Ca=N&&N.useFetchStreams||!1,this.L=void 0,this.J=N&&N.supportsCrossDomainXhr||!1,this.K="",this.h=new Zr(N&&N.concurrentRequestLimit),this.Da=new Uh,this.P=N&&N.fastHandshake||!1,this.O=N&&N.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=N&&N.Rb||!1,N&&N.xa&&this.j.xa(),N&&N.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&N&&N.detectBufferingProxy||!1,this.ja=void 0,N&&N.longPollingTimeout&&0<N.longPollingTimeout&&(this.ja=N.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=cl.prototype,e.la=8,e.G=1,e.connect=function(N,fe,we,Ne){Lt(0),this.W=N,this.H=fe||{},we&&Ne!==void 0&&(this.H.OSID=we,this.H.OAID=Ne),this.F=this.X,this.I=dm(this,null,this.W),fA(this)};function um(N){if(Rh(N),N.G==3){var fe=N.U++,we=pn(N.I);if(Ha(we,"SID",N.K),Ha(we,"RID",fe),Ha(we,"TYPE","terminate"),mA(N,we),fe=new ge(N,N.j,fe),fe.L=2,fe.v=su(pn(we)),we=!1,i.navigator&&i.navigator.sendBeacon)try{we=i.navigator.sendBeacon(fe.v.toString(),"")}catch{}!we&&i.Image&&(new Image().src=fe.v,we=!0),we||(fe.g=Zg(fe.j,null),fe.g.ea(fe.v)),fe.F=Date.now(),It(fe)}Jg(N)}function AA(N){N.g&&(Ui(N),N.g.cancel(),N.g=null)}function Rh(N){AA(N),N.u&&(i.clearTimeout(N.u),N.u=null),Wc(N),N.h.cancel(),N.s&&(typeof N.s=="number"&&i.clearTimeout(N.s),N.s=null)}function fA(N){if(!Ss(N.h)&&!N.s){N.s=!0;var fe=N.Ga;X||re(),le||(X(),le=!0),Z.add(fe,N),N.B=0}}function Yg(N,fe){return Wo(N.h)>=N.h.j-(N.s?1:0)?!1:N.s?(N.i=fe.D.concat(N.i),!0):N.G==1||N.G==2||N.B>=(N.Va?0:N.Wa)?!1:(N.s=Ln(m(N.Ga,N,fe),dl(N,N.B)),N.B++,!0)}e.Ga=function(N){if(this.s)if(this.s=null,this.G==1){if(!N){this.U=Math.floor(1e5*Math.random()),N=this.U++;const pt=new ge(this,this.j,N);let Bt=this.o;if(this.S&&(Bt?(Bt=E(Bt),U(Bt,this.S)):Bt=this.S),this.m!==null||this.O||(pt.H=Bt,Bt=null),this.P)e:{for(var fe=0,we=0;we<this.i.length;we++){t:{var Ne=this.i[we];if("__data__"in Ne.map&&(Ne=Ne.map.__data__,typeof Ne=="string")){Ne=Ne.length;break t}Ne=void 0}if(Ne===void 0)break;if(fe+=Ne,4096<fe){fe=we;break e}if(fe===4096||we===this.i.length-1){fe=we+1;break e}}fe=1e3}else fe=1e3;fe=To(this,pt,fe),we=pn(this.I),Ha(we,"RID",N),Ha(we,"CVER",22),this.D&&Ha(we,"X-HTTP-Session-Id",this.D),mA(this,we),Bt&&(this.O?fe="headers="+encodeURIComponent(String(Hr(Bt)))+"&"+fe:this.m&&uA(we,this.m,Bt)),jo(this.h,pt),this.Ua&&Ha(we,"TYPE","init"),this.P?(Ha(we,"$req",fe),Ha(we,"SID","null"),pt.T=!0,nt(pt,we,null)):nt(pt,we,fe),this.G=2}}else this.G==3&&(N?Js(this,N):this.i.length==0||Ss(this.h)||Js(this))};function Js(N,fe){var we;fe?we=fe.l:we=N.U++;const Ne=pn(N.I);Ha(Ne,"SID",N.K),Ha(Ne,"RID",we),Ha(Ne,"AID",N.T),mA(N,Ne),N.m&&N.o&&uA(Ne,N.m,N.o),we=new ge(N,N.j,we,N.B+1),N.m===null&&(we.H=N.o),fe&&(N.i=fe.D.concat(N.i)),fe=To(N,we,1e3),we.I=Math.round(.5*N.wa)+Math.round(.5*N.wa*Math.random()),jo(N.h,we),nt(we,Ne,fe)}function mA(N,fe){N.H&&k(N.H,function(we,Ne){Ha(fe,Ne,we)}),N.l&&Eo({},function(we,Ne){Ha(fe,Ne,we)})}function To(N,fe,we){we=Math.min(N.i.length,we);var Ne=N.l?m(N.l.Na,N.l,N):null;e:{var pt=N.i;let Bt=-1;for(;;){const Zt=["count="+we];Bt==-1?0<we?(Bt=pt[0].g,Zt.push("ofs="+Bt)):Bt=0:Zt.push("ofs="+Bt);let Da=!0;for(let $r=0;$r<we;$r++){let _a=pt[$r].g;const ds=pt[$r].map;if(_a-=Bt,0>_a)Bt=Math.max(0,pt[$r].g-100),Da=!1;else try{vr(ds,Zt,"req"+_a+"_")}catch{Ne&&Ne(ds)}}if(Da){Ne=Zt.join("&");break e}}}return N=N.i.splice(0,we),fe.D=N,Ne}function Xg(N){if(!N.g&&!N.u){N.Y=1;var fe=N.Fa;X||re(),le||(X(),le=!0),Z.add(fe,N),N.v=0}}function cm(N){return N.g||N.u||3<=N.v?!1:(N.Y++,N.u=Ln(m(N.Fa,N),dl(N,N.v)),N.v++,!0)}e.Fa=function(){if(this.u=null,vA(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var N=2*this.R;this.j.info("BP detection timer enabled: "+N),this.A=Ln(m(this.ab,this),N)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Lt(10),AA(this),vA(this))};function Ui(N){N.A!=null&&(i.clearTimeout(N.A),N.A=null)}function vA(N){N.g=new ge(N,N.j,"rpc",N.Y),N.m===null&&(N.g.H=N.o),N.g.O=0;var fe=pn(N.qa);Ha(fe,"RID","rpc"),Ha(fe,"SID",N.K),Ha(fe,"AID",N.T),Ha(fe,"CI",N.F?"0":"1"),!N.F&&N.ja&&Ha(fe,"TO",N.ja),Ha(fe,"TYPE","xmlhttp"),mA(N,fe),N.m&&N.o&&uA(fe,N.m,N.o),N.L&&(N.g.I=N.L);var we=N.g;N=N.ia,we.L=1,we.v=su(pn(fe)),we.m=null,we.P=!0,et(we,N)}e.Za=function(){this.C!=null&&(this.C=null,AA(this),cm(this),Lt(19))};function Wc(N){N.C!=null&&(i.clearTimeout(N.C),N.C=null)}function rr(N,fe){var we=null;if(N.g==fe){Wc(N),Ui(N),N.g=null;var Ne=2}else if(Za(N.h,fe))we=fe.D,Es(N.h,fe),Ne=1;else return;if(N.G!=0){if(fe.o)if(Ne==1){we=fe.m?fe.m.length:0,fe=Date.now()-fe.F;var pt=N.B;Ne=Rt(),Ue(Ne,new ia(Ne,we)),fA(N)}else Xg(N);else if(pt=fe.s,pt==3||pt==0&&0<fe.X||!(Ne==1&&Yg(N,fe)||Ne==2&&cm(N)))switch(we&&0<we.length&&(fe=N.h,fe.i=fe.i.concat(we)),pt){case 1:Al(N,5);break;case 4:Al(N,10);break;case 3:Al(N,6);break;default:Al(N,2)}}}function dl(N,fe){let we=N.Ta+Math.floor(Math.random()*N.cb);return N.isActive()||(we*=2),we*fe}function Al(N,fe){if(N.j.info("Error code "+fe),fe==2){var we=m(N.fb,N),Ne=N.Xa;const pt=!Ne;Ne=new vt(Ne||"//www.google.com/images/cleardot.gif"),i.location&&i.location.protocol=="http"||In(Ne,"https"),su(Ne),pt?Ta(Ne.toString(),we):lA(Ne.toString(),we)}else Lt(2);N.G=0,N.l&&N.l.sa(fe),Jg(N),Rh(N)}e.fb=function(N){N?(this.j.info("Successfully pinged google.com"),Lt(2)):(this.j.info("Failed to ping google.com"),Lt(1))};function Jg(N){if(N.G=0,N.ka=[],N.l){const fe=Nt(N.h);(fe.length!=0||N.i.length!=0)&&(y(N.ka,fe),y(N.ka,N.i),N.h.i.length=0,g(N.i),N.i.length=0),N.l.ra()}}function dm(N,fe,we){var Ne=we instanceof vt?pn(we):new vt(we);if(Ne.g!="")fe&&(Ne.g=fe+"."+Ne.g),ya(Ne,Ne.s);else{var pt=i.location;Ne=pt.protocol,fe=fe?fe+"."+pt.hostname:pt.hostname,pt=+pt.port;var Bt=new vt(null);Ne&&In(Bt,Ne),fe&&(Bt.g=fe),pt&&ya(Bt,pt),we&&(Bt.l=we),Ne=Bt}return we=N.D,fe=N.ya,we&&fe&&Ha(Ne,we,fe),Ha(Ne,"VER",N.la),mA(N,Ne),Ne}function Zg(N,fe,we){if(fe&&!N.J)throw Error("Can't create secondary domain capable XhrIo object.");return fe=N.Ca&&!N.pa?new ur(new qu({eb:we})):new ur(N.pa),fe.Ha(N.J),fe}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function e1(){}e=e1.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function qo(N,fe){Ie.call(this),this.g=new cl(fe),this.l=N,this.h=fe&&fe.messageUrlParams||null,N=fe&&fe.messageHeaders||null,fe&&fe.clientProtocolHeaderRequired&&(N?N["X-Client-Protocol"]="webchannel":N={"X-Client-Protocol":"webchannel"}),this.g.o=N,N=fe&&fe.initMessageHeaders||null,fe&&fe.messageContentType&&(N?N["X-WebChannel-Content-Type"]=fe.messageContentType:N={"X-WebChannel-Content-Type":fe.messageContentType}),fe&&fe.va&&(N?N["X-WebChannel-Client-Profile"]=fe.va:N={"X-WebChannel-Client-Profile":fe.va}),this.g.S=N,(N=fe&&fe.Sb)&&!b(N)&&(this.g.m=N),this.v=fe&&fe.supportsCrossDomainXhr||!1,this.u=fe&&fe.sendRawJson||!1,(fe=fe&&fe.httpSessionIdParam)&&!b(fe)&&(this.g.D=fe,N=this.h,N!==null&&fe in N&&(N=this.h,fe in N&&delete N[fe])),this.j=new Ai(this)}p(qo,Ie),qo.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qo.prototype.close=function(){um(this.g)},qo.prototype.o=function(N){var fe=this.g;if(typeof N=="string"){var we={};we.__data__=N,N=we}else this.u&&(we={},we.__data__=an(N),N=we);fe.i.push(new Er(fe.Ya++,N)),fe.G==3&&fA(fe)},qo.prototype.N=function(){this.g.l=null,delete this.j,um(this.g),delete this.g,qo.aa.N.call(this)};function Nh(N){en.call(this),N.__headers__&&(this.headers=N.__headers__,this.statusCode=N.__status__,delete N.__headers__,delete N.__status__);var fe=N.__sm__;if(fe){e:{for(const we in fe){N=we;break e}N=void 0}(this.i=N)&&(N=this.i,fe=fe!==null&&N in fe?fe[N]:void 0),this.data=fe}else this.data=N}p(Nh,en);function hA(){Ye.call(this),this.status=1}p(hA,Ye);function Ai(N){this.g=N}p(Ai,e1),Ai.prototype.ua=function(){Ue(this.g,"a")},Ai.prototype.ta=function(N){Ue(this.g,new Nh(N))},Ai.prototype.sa=function(N){Ue(this.g,new hA)},Ai.prototype.ra=function(){Ue(this.g,"b")},qo.prototype.send=qo.prototype.o,qo.prototype.open=qo.prototype.m,qo.prototype.close=qo.prototype.close,Le.NO_ERROR=0,Le.TIMEOUT=8,Le.HTTP_ERROR=6,Ge.COMPLETE="complete",at.EventType=bt,bt.OPEN="a",bt.CLOSE="b",bt.ERROR="c",bt.MESSAGE="d",Ie.prototype.listen=Ie.prototype.K,ur.prototype.listenOnce=ur.prototype.L,ur.prototype.getLastError=ur.prototype.Ka,ur.prototype.getLastErrorCode=ur.prototype.Ba,ur.prototype.getStatus=ur.prototype.Z,ur.prototype.getResponseJson=ur.prototype.Oa,ur.prototype.getResponseText=ur.prototype.oa,ur.prototype.send=ur.prototype.ea,ur.prototype.setWithCredentials=ur.prototype.Ha}).apply(typeof My<"u"?My:typeof self<"u"?self:typeof window<"u"?window:{});const MV="@firebase/firestore",OV="4.8.0";class yi{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}yi.UNAUTHENTICATED=new yi(null),yi.GOOGLE_CREDENTIALS=new yi("google-credentials-uid"),yi.FIRST_PARTY=new yi("first-party-uid"),yi.MOCK_USER=new yi("mock-user");let _b="11.10.0";const $2=new hg("@firebase/firestore");function Dl(e,...t){if($2.logLevel<=ja.DEBUG){const n=t.map(sK);$2.debug(`Firestore (${_b}): ${e}`,...n)}}function rK(e,...t){if($2.logLevel<=ja.ERROR){const n=t.map(sK);$2.error(`Firestore (${_b}): ${e}`,...n)}}function sK(e){if(typeof e=="string")return e;try{return(function(n){return JSON.stringify(n)})(e)}catch{return e}}function Q2(e,t,n){let a="Unexpected state";typeof t=="string"?a=t:n=t,oK(e,a,n)}function oK(e,t,n){let a=`FIRESTORE (${_b}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{a+=" CONTEXT: "+JSON.stringify(n)}catch{a+=" CONTEXT: "+n}throw rK(a),new Error(a)}function d0(e,t,n,a){let r="Unexpected state";typeof n=="string"?r=n:a=n,e||oK(t,r,a)}const Na={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};class Va extends Ou{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class A0{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}class oat{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class iat{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(yi.UNAUTHENTICATED)))}shutdown(){}}class lat{constructor(t){this.t=t,this.currentUser=yi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){d0(this.o===void 0,42304);let a=this.i;const r=c=>this.i!==a?(a=this.i,n(c)):Promise.resolve();let s=new A0;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new A0,t.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const c=s;t.enqueueRetryable((async()=>{await c.promise,await r(this.currentUser)}))},i=c=>{Dl("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((c=>i(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?i(c):(Dl("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new A0)}}),0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((a=>this.i!==t?(Dl("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(d0(typeof a.accessToken=="string",31837,{l:a}),new oat(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return d0(t===null||typeof t=="string",2055,{h:t}),new yi(t)}}class uat{constructor(t,n,a){this.P=t,this.T=n,this.I=a,this.type="FirstParty",this.user=yi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class cat{constructor(t,n,a){this.P=t,this.T=n,this.I=a}getToken(){return Promise.resolve(new uat(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(yi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class HV{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dat{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ji(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){d0(this.o===void 0,3512);const a=s=>{s.error!=null&&Dl("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,Dl("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable((()=>a(s)))};const r=s=>{Dl("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>r(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):Dl("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new HV(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(d0(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new HV(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Aat(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let a=0;a<e;a++)n[a]=Math.floor(256*Math.random());return n}function fat(){return new TextEncoder}class mat{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const r=Aat(40);for(let s=0;s<r.length;++s)a.length<20&&r[s]<n&&(a+=t.charAt(r[s]%62))}return a}}function Ml(e,t){return e<t?-1:e>t?1:0}function vat(e,t){let n=0;for(;n<e.length&&n<t.length;){const a=e.codePointAt(n),r=t.codePointAt(n);if(a!==r){if(a<128&&r<128)return Ml(a,r);{const s=fat(),o=hat(s.encode($V(e,n)),s.encode($V(t,n)));return o!==0?o:Ml(a,r)}}n+=a>65535?2:1}return Ml(e.length,t.length)}function $V(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function hat(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Ml(e[n],t[n]);return Ml(e.length,t.length)}const QV="__name__";class gu{constructor(t,n,a){n===void 0?n=0:n>t.length&&Q2(637,{offset:n,range:t.length}),a===void 0?a=t.length-n:a>t.length-n&&Q2(1746,{length:a,range:t.length-n}),this.segments=t,this.offset=n,this.len=a}get length(){return this.len}isEqual(t){return gu.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof gu?t.forEach((a=>{n.push(a)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,a=this.limit();n<a;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const a=Math.min(t.length,n.length);for(let r=0;r<a;r++){const s=gu.compareSegments(t.get(r),n.get(r));if(s!==0)return s}return Ml(t.length,n.length)}static compareSegments(t,n){const a=gu.isNumericId(t),r=gu.isNumericId(n);return a&&!r?-1:!a&&r?1:a&&r?gu.extractNumericId(t).compare(gu.extractNumericId(n)):vat(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return cI.fromString(t.substring(4,t.length-2))}}class xl extends gu{construct(t,n,a){return new xl(t,n,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const a of t){if(a.indexOf("//")>=0)throw new Va(Na.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);n.push(...a.split("/").filter((r=>r.length>0)))}return new xl(n)}static emptyPath(){return new xl([])}}const pat=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $A extends gu{construct(t,n,a){return new $A(t,n,a)}static isValidIdentifier(t){return pat.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$A.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===QV}static keyField(){return new $A([QV])}static fromServerFormat(t){const n=[];let a="",r=0;const s=()=>{if(a.length===0)throw new Va(Na.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(a),a=""};let o=!1;for(;r<t.length;){const i=t[r];if(i==="\\"){if(r+1===t.length)throw new Va(Na.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Va(Na.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);a+=c,r+=2}else i==="`"?(o=!o,r++):i!=="."||o?(a+=i,r++):(s(),r++)}if(s(),o)throw new Va(Na.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new $A(n)}static emptyPath(){return new $A([])}}class JA{constructor(t){this.path=t}static fromPath(t){return new JA(xl.fromString(t))}static fromName(t){return new JA(xl.fromString(t).popFirst(5))}static empty(){return new JA(xl.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&xl.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return xl.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new JA(new xl(t.slice()))}}function gat(e,t,n,a){if(t===!0&&a===!0)throw new Va(Na.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function yat(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function ls(e,t){const n={typeString:e};return t&&(n.value=t),n}function jg(e,t){if(!yat(e))throw new Va(Na.INVALID_ARGUMENT,"JSON must be an object");let n;for(const a in t)if(t[a]){const r=t[a].typeString,s="value"in t[a]?{value:t[a].value}:void 0;if(!(a in e)){n=`JSON missing required field: '${a}'`;break}const o=e[a];if(r&&typeof o!==r){n=`JSON field '${a}' must be a ${r}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${a}' field to equal '${s.value}'`;break}}if(n)throw new Va(Na.INVALID_ARGUMENT,n);return!0}const GV=-62135596800,zV=1e6;class _u{static now(){return _u.fromMillis(Date.now())}static fromDate(t){return _u.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),a=Math.floor((t-1e3*n)*zV);return new _u(n,a)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Va(Na.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Va(Na.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<GV)throw new Va(Na.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Va(Na.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/zV}_compareTo(t){return this.seconds===t.seconds?Ml(this.nanoseconds,t.nanoseconds):Ml(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:_u._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(jg(t,_u._jsonSchema))return new _u(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-GV;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}_u._jsonSchemaVersion="firestore/timestamp/1.0",_u._jsonSchema={type:ls("string",_u._jsonSchemaVersion),seconds:ls("number"),nanoseconds:ls("number")};function _at(e){return e.name==="IndexedDbTransactionError"}class wat extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Vf{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new wat("Invalid base64 string: "+s):s}})(t);return new Vf(n)}static fromUint8Array(t){const n=(function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s})(t);return new Vf(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const a=new Uint8Array(n.length);for(let r=0;r<n.length;r++)a[r]=n.charCodeAt(r);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ml(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Vf.EMPTY_BYTE_STRING=new Vf("");const KV="(default)";class G2{constructor(t,n){this.projectId=t,this.database=n||KV}static empty(){return new G2("","")}get isDefaultDatabase(){return this.database===KV}isEqual(t){return t instanceof G2&&t.projectId===this.projectId&&t.database===this.database}}class bat{constructor(t,n=null,a=[],r=[],s=null,o="F",i=null,c=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=a,this.filters=r,this.limit=s,this.limitType=o,this.startAt=i,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function xat(e){return new bat(e)}var WV,wa;(wa=WV||(WV={}))[wa.OK=0]="OK",wa[wa.CANCELLED=1]="CANCELLED",wa[wa.UNKNOWN=2]="UNKNOWN",wa[wa.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wa[wa.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wa[wa.NOT_FOUND=5]="NOT_FOUND",wa[wa.ALREADY_EXISTS=6]="ALREADY_EXISTS",wa[wa.PERMISSION_DENIED=7]="PERMISSION_DENIED",wa[wa.UNAUTHENTICATED=16]="UNAUTHENTICATED",wa[wa.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wa[wa.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wa[wa.ABORTED=10]="ABORTED",wa[wa.OUT_OF_RANGE=11]="OUT_OF_RANGE",wa[wa.UNIMPLEMENTED=12]="UNIMPLEMENTED",wa[wa.INTERNAL=13]="INTERNAL",wa[wa.UNAVAILABLE=14]="UNAVAILABLE",wa[wa.DATA_LOSS=15]="DATA_LOSS";new cI([4294967295,4294967295],0);const Cat=41943040;const Sat=1048576;function rS(){return typeof document<"u"?document:null}class Eat{constructor(t,n,a=1e3,r=1.5,s=6e4){this.Fi=t,this.timerId=n,this.d_=a,this.E_=r,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(t){this.cancel();const n=Math.floor(this.R_+this.p_()),a=Math.max(0,Date.now()-this.m_),r=Math.max(0,n-a);r>0&&Dl("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${a} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,(()=>(this.m_=Date.now(),t()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}class dI{constructor(t,n,a,r,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=a,this.op=r,this.removalCallback=s,this.deferred=new A0,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,a,r,s){const o=Date.now()+a,i=new dI(t,n,o,r,s);return i.start(a),i}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Va(Na.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var jV,qV;(qV=jV||(jV={})).Fa="default",qV.Cache="cache";function Bat(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}const YV=new Map;const kat="firestore.googleapis.com",XV=!0;class JV{constructor(t){var n,a;if(t.host===void 0){if(t.ssl!==void 0)throw new Va(Na.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=kat,this.ssl=XV}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:XV;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Cat;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Sat)throw new Va(Na.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}gat("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Bat((a=t.experimentalLongPollingOptions)!==null&&a!==void 0?a:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Va(Na.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Va(Na.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Va(Na.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(a,r){return a.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Tat{constructor(t,n,a,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=a,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new JV({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Va(Na.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Va(Na.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new JV(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new iat;switch(a.type){case"firstParty":return new cat(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Va(Na.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const a=YV.get(n);a&&(Dl("ComponentProvider","Removing Datastore"),YV.delete(n),a.terminate())})(this),Promise.resolve()}}class AI{constructor(t,n,a){this.converter=n,this._query=a,this.type="query",this.firestore=t}withConverter(t){return new AI(this.firestore,t,this._query)}}class Cu{constructor(t,n,a){this.converter=n,this._key=a,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fI(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Cu(this.firestore,t,this._key)}toJSON(){return{type:Cu._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,a){if(jg(n,Cu._jsonSchema))return new Cu(t,a||null,new JA(xl.fromString(n.referencePath)))}}Cu._jsonSchemaVersion="firestore/documentReference/1.0",Cu._jsonSchema={type:ls("string",Cu._jsonSchemaVersion),referencePath:ls("string")};class fI extends AI{constructor(t,n,a){super(t,n,xat(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Cu(this.firestore,null,new JA(t))}withConverter(t){return new fI(this.firestore,t,this._path)}}const ZV="AsyncQueue";class eL{constructor(t=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Eat(this,"async_queue_retry"),this.oc=()=>{const a=rS();a&&Dl(ZV,"Visibility state changed to "+a.visibilityState),this.F_.y_()},this._c=t;const n=rS();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ac(),this.uc(t)}enterRestrictedMode(t){if(!this.Xu){this.Xu=!0,this.rc=t||!1;const n=rS();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(t){if(this.ac(),this.Xu)return new Promise((()=>{}));const n=new A0;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Zu.push(t),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(t){if(!_at(t))throw t;Dl(ZV,"Operation failed with retryable error: "+t)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(t){const n=this._c.then((()=>(this.nc=!0,t().catch((a=>{throw this.tc=a,this.nc=!1,rK("INTERNAL UNHANDLED ERROR: ",tL(a)),a})).then((a=>(this.nc=!1,a))))));return this._c=n,n}enqueueAfterDelay(t,n,a){this.ac(),this.sc.indexOf(t)>-1&&(n=0);const r=dI.createAndSchedule(this,t,n,a,(s=>this.lc(s)));return this.ec.push(r),r}ac(){this.tc&&Q2(47125,{hc:tL(this.tc)})}verifyOperationInProgress(){}async Pc(){let t;do t=this._c,await t;while(t!==this._c)}Tc(t){for(const n of this.ec)if(n.timerId===t)return!0;return!1}Ic(t){return this.Pc().then((()=>{this.ec.sort(((n,a)=>n.targetTimeMs-a.targetTimeMs));for(const n of this.ec)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Pc()}))}dc(t){this.sc.push(t)}lc(t){const n=this.ec.indexOf(t);this.ec.splice(n,1)}}function tL(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class Iat extends Tat{constructor(t,n,a,r){super(t,n,a,r),this.type="firestore",this._queue=new eL,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new eL(t),this._firestoreClient=void 0,await t}}}class hc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new hc(Vf.fromBase64String(t))}catch(n){throw new Va(Na.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new hc(Vf.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:hc._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(jg(t,hc._jsonSchema))return hc.fromBase64String(t.bytes)}}hc._jsonSchemaVersion="firestore/bytes/1.0",hc._jsonSchema={type:ls("string",hc._jsonSchemaVersion),bytes:ls("string")};class iK{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Va(Na.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $A(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Af{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Va(Na.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Va(Na.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Ml(this._lat,t._lat)||Ml(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Af._jsonSchemaVersion}}static fromJSON(t){if(jg(t,Af._jsonSchema))return new Af(t.latitude,t.longitude)}}Af._jsonSchemaVersion="firestore/geoPoint/1.0",Af._jsonSchema={type:ls("string",Af._jsonSchemaVersion),latitude:ls("number"),longitude:ls("number")};class ff{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(a,r){if(a.length!==r.length)return!1;for(let s=0;s<a.length;++s)if(a[s]!==r[s])return!1;return!0})(this._values,t._values)}toJSON(){return{type:ff._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(jg(t,ff._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new ff(t.vectorValues);throw new Va(Na.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ff._jsonSchemaVersion="firestore/vectorValue/1.0",ff._jsonSchema={type:ls("string",ff._jsonSchemaVersion),vectorValues:ls("object")};const Fat=new RegExp("[~\\*/\\[\\]]");function Pat(e,t,n){if(t.search(Fat)>=0)throw nL(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e);try{return new iK(...t.split("."))._internalPath}catch{throw nL(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e)}}function nL(e,t,n,a,r){let s=`Function ${t}() called with invalid data`;s+=". ";let o="";return new Va(Na.INVALID_ARGUMENT,s+e+o)}class lK{constructor(t,n,a,r,s){this._firestore=t,this._userDataWriter=n,this._key=a,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Cu(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Dat(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(uK("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Dat extends lK{data(){return super.data()}}function uK(e,t){return typeof t=="string"?Pat(e,t):t instanceof iK?t._internalPath:t._delegate._internalPath}class Oy{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Sv extends lK{constructor(t,n,a,r,s,o){super(t,n,a,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new c_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const a=this._document.data.field(uK("DocumentSnapshot.get",t));if(a!==null)return this._userDataWriter.convertValue(a,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Va(Na.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Sv._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Sv._jsonSchemaVersion="firestore/documentSnapshot/1.0",Sv._jsonSchema={type:ls("string",Sv._jsonSchemaVersion),bundleSource:ls("string","DocumentSnapshot"),bundleName:ls("string"),bundle:ls("string")};class c_ extends Sv{data(t={}){return super.data(t)}}class f0{constructor(t,n,a,r){this._firestore=t,this._userDataWriter=n,this._snapshot=r,this.metadata=new Oy(r.hasPendingWrites,r.fromCache),this.query=a}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((a=>{t.call(n,new c_(this._firestore,this._userDataWriter,a.key,a,new Oy(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Va(Na.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map((i=>{const c=new c_(r._firestore,r._userDataWriter,i.doc.key,i.doc,new Oy(r._snapshot.mutatedKeys.has(i.doc.key),r._snapshot.fromCache),r.query.converter);return i.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((i=>s||i.type!==3)).map((i=>{const c=new c_(r._firestore,r._userDataWriter,i.doc.key,i.doc,new Oy(r._snapshot.mutatedKeys.has(i.doc.key),r._snapshot.fromCache),r.query.converter);let A=-1,d=-1;return i.type!==0&&(A=o.indexOf(i.doc.key),o=o.delete(i.doc.key)),i.type!==1&&(o=o.add(i.doc),d=o.indexOf(i.doc.key)),{type:Uat(i.type),doc:c,oldIndex:A,newIndex:d}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Va(Na.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=f0._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=mat.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],a=[],r=[];return this.docs.forEach((s=>{s._document!==null&&(n.push(s._document),a.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function Uat(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q2(61501,{type:e})}}f0._jsonSchemaVersion="firestore/querySnapshot/1.0",f0._jsonSchema={type:ls("string",f0._jsonSchemaVersion),bundleSource:ls("string","QuerySnapshot"),bundleName:ls("string"),bundle:ls("string")};(function(t,n=!0){(function(r){_b=r})(nA),Pu(new Gl("firestore",((a,{instanceIdentifier:r,options:s})=>{const o=a.getProvider("app").getImmediate(),i=new Iat(new lat(a.getProvider("auth-internal")),new dat(o,a.getProvider("app-check-internal")),(function(A,d){if(!Object.prototype.hasOwnProperty.apply(A.options,["projectId"]))throw new Va(Na.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new G2(A.options.projectId,d)})(o,r),o);return s=Object.assign({useFetchStreams:n},s),i._setSettings(s),i}),"PUBLIC").setMultipleInstances(!0)),Bi(MV,OV,t),Bi(MV,OV,"esm2017")})();const cK="firebasestorage.googleapis.com",Rat="storageBucket",Nat=120*1e3,Vat=600*1e3;class Wu extends Ou{constructor(t,n,a=0){super(sS(t),`Firebase Storage: ${n} (${sS(t)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Wu.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return sS(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Vu;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Vu||(Vu={}));function sS(e){return"storage/"+e}function Lat(){const e="An unknown error occurred, please check the error payload for server response.";return new Wu(Vu.UNKNOWN,e)}function Mat(){return new Wu(Vu.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Oat(){return new Wu(Vu.CANCELED,"User canceled the upload/download.")}function Hat(e){return new Wu(Vu.INVALID_URL,"Invalid URL '"+e+"'.")}function $at(e){return new Wu(Vu.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function aL(e){return new Wu(Vu.INVALID_ARGUMENT,e)}function dK(){return new Wu(Vu.APP_DELETED,"The Firebase app was deleted.")}function Qat(e){return new Wu(Vu.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class Ul{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let a;try{a=Ul.makeFromUrl(t,n)}catch{return new Ul(t,"")}if(a.path==="")return a;throw $at(t)}static makeFromUrl(t,n){let a=null;const r="([A-Za-z0-9.\\-_]+)";function s(T){T.path.charAt(T.path.length-1)==="/"&&(T.path_=T.path_.slice(0,-1))}const o="(/(.*))?$",i=new RegExp("^gs://"+r+o,"i"),c={bucket:1,path:3};function A(T){T.path_=decodeURIComponent(T.path)}const d="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",v=new RegExp(`^https?://${f}/${d}/b/${r}/o${m}`,"i"),p={bucket:1,path:3},g=n===cK?"(?:storage.googleapis.com|storage.cloud.google.com)":n,y="([^?#]*)",w=new RegExp(`^https?://${g}/${r}/${y}`,"i"),x=[{regex:i,indices:c,postModify:s},{regex:v,indices:p,postModify:A},{regex:w,indices:{bucket:1,path:2},postModify:A}];for(let T=0;T<x.length;T++){const D=x[T],k=D.regex.exec(t);if(k){const S=k[D.indices.bucket];let E=k[D.indices.path];E||(E=""),a=new Ul(S,E),D.postModify(a);break}}if(a==null)throw Hat(t);return a}}class Gat{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function zat(e,t,n){let a=1,r=null,s=null,o=!1,i=0;function c(){return i===2}let A=!1;function d(...y){A||(A=!0,t.apply(null,y))}function f(y){r=setTimeout(()=>{r=null,e(v,c())},y)}function m(){s&&clearTimeout(s)}function v(y,...w){if(A){m();return}if(y){m(),d.call(null,y,...w);return}if(c()||o){m(),d.call(null,y,...w);return}a<64&&(a*=2);let x;i===1?(i=2,x=0):x=(a+Math.random())*1e3,f(x)}let p=!1;function g(y){p||(p=!0,m(),!A&&(r!==null?(y||(i=2),clearTimeout(r),f(0)):y||(i=1)))}return f(0),s=setTimeout(()=>{o=!0,g(!0)},n),g}function Kat(e){e(!1)}function Wat(e){return e!==void 0}function rL(e,t,n,a){if(a<t)throw aL(`Invalid value for '${e}'. Expected ${t} or greater.`);if(a>n)throw aL(`Invalid value for '${e}'. Expected ${n} or less.`)}function jat(e){const t=encodeURIComponent;let n="?";for(const a in e)if(e.hasOwnProperty(a)){const r=t(a)+"="+t(e[a]);n=n+r+"&"}return n=n.slice(0,-1),n}var z2;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(z2||(z2={}));function qat(e,t){const n=e>=500&&e<600,r=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||r||s}class Yat{constructor(t,n,a,r,s,o,i,c,A,d,f,m=!0,v=!1){this.url_=t,this.method_=n,this.headers_=a,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=i,this.errorCallback_=c,this.timeout_=A,this.progressCallback_=d,this.connectionFactory_=f,this.retry=m,this.isUsingEmulator=v,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,g)=>{this.resolve_=p,this.reject_=g,this.start_()})}start_(){const t=(a,r)=>{if(r){a(!1,new Hy(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=i=>{const c=i.loaded,A=i.lengthComputable?i.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,A)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const i=s.getErrorCode()===z2.NO_ERROR,c=s.getStatus();if(!i||qat(c,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===z2.ABORT;a(!1,new Hy(!1,null,d));return}const A=this.successCodes_.indexOf(c)!==-1;a(!0,new Hy(A,s))})},n=(a,r)=>{const s=this.resolve_,o=this.reject_,i=r.connection;if(r.wasSuccessCode)try{const c=this.callback_(i,i.getResponse());Wat(c)?s(c):s()}catch(c){o(c)}else if(i!==null){const c=Lat();c.serverResponse=i.getErrorText(),this.errorCallback_?o(this.errorCallback_(i,c)):o(c)}else if(r.canceled){const c=this.appDelete_?dK():Oat();o(c)}else{const c=Mat();o(c)}};this.canceled_?n(!1,new Hy(!1,null,!0)):this.backoffId_=zat(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&Kat(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Hy{constructor(t,n,a){this.wasSuccessCode=t,this.connection=n,this.canceled=!!a}}function Xat(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function Jat(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function Zat(e,t){t&&(e["X-Firebase-GMPID"]=t)}function ert(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function trt(e,t,n,a,r,s,o=!0,i=!1){const c=jat(e.urlParams),A=e.url+c,d=Object.assign({},e.headers);return Zat(d,t),Xat(d,n),Jat(d,s),ert(d,a),new Yat(A,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r,o,i)}function nrt(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function art(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}class K2{constructor(t,n){this._service=t,n instanceof Ul?this._location=n:this._location=Ul.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new K2(t,n)}get root(){const t=new Ul(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return art(this._location.path)}get storage(){return this._service}get parent(){const t=nrt(this._location.path);if(t===null)return null;const n=new Ul(this._location.bucket,t);return new K2(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw Qat(t)}}function sL(e,t){const n=t?.[Rat];return n==null?null:Ul.makeFromBucketSpec(n,e)}class rrt{constructor(t,n,a,r,s,o=!1){this.app=t,this._authProvider=n,this._appCheckProvider=a,this._url=r,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=cK,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Nat,this._maxUploadRetryTime=Vat,this._requests=new Set,r!=null?this._bucket=Ul.makeFromBucketSpec(r,this._host):this._bucket=sL(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Ul.makeFromBucketSpec(this._url,t):this._bucket=sL(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){rL("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){rL("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(ji(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new K2(this,t)}_makeRequest(t,n,a,r,s=!0){if(this._deleted)return new Gat(dK());{const o=trt(t,this._appId,a,r,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[a,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,a,r).getPromise()}}const oL="@firebase/storage",iL="0.13.14";const srt="storage";function ort(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),a=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return new rrt(n,a,r,t,nA)}function irt(){Pu(new Gl(srt,ort,"PUBLIC").setMultipleInstances(!0)),Bi(oL,iL,""),Bi(oL,iL,"esm2017")}irt();function lrt(e){return crt({initialUser:e,dependencies:{popupRedirectResolver:AM,persistence:[uM,zk,Kk]}})}const urt=Symbol("VueFireAuth");function crt({dependencies:e,initialUser:t}){return(n,a)=>{const[r,s]=drt(n,a,t,e);yet(r,s)}}function drt(e,t,n,a,r=q5(e,a)){const s=het(e,t).run(()=>V(n));return pet.set(e,s),t.provide(urt,r),[s,r]}function Art(e,{firebaseApp:t,modules:n=[]}){e.provide(KG,t);for(const a of n)a(t,e)}const frt=()=>{console.log(" Clearing desktop session on app startup - passcode will be required"),localStorage.removeItem("desktopSessionToken"),localStorage.removeItem("desktopPermissions"),localStorage.removeItem("desktopIsAdmin"),localStorage.removeItem("desktopUserName"),localStorage.removeItem("desktopUserId"),localStorage.removeItem("desktopFeatures")};frt();window.addEventListener("unhandledrejection",e=>{e.reason&&typeof e.reason.code=="string"&&e.reason.code.startsWith("auth/")&&(console.warn("Unhandled Firebase Auth error (suppressed):",e.reason.code,e.reason.message),e.preventDefault())});console.log("Vue app starting in environment:",Ra()?"Electron":"Web");if(Ra())try{const{ipcRenderer:e}=window.electron||window.require("electron");e.on("server-ready",(t,n)=>{console.log("Server ready event received");const{localIP:a}=n||{};if(a&&Ra()){const r=kr(a).api.https;Ov(r),console.log("Local IP:",a)}}),e.on("server-error",(t,n)=>{console.error("Server error received:",n)})}catch(e){console.error("Failed to set up IPC listeners:",e)}const mrt={dark:!1,colors:{primary:"#133665",surfaceTint:"#415F91",onPrimary:"#FFFFFF",primaryContainer:"#506DA0",onPrimaryContainer:"#FFFFFF",secondary:"#2E3647",onSecondary:"#FFFFFF",secondaryContainer:"#646D80",onSecondaryContainer:"#FFFFFF",tertiary:"#452E4A",onTertiary:"#FFFFFF",tertiaryContainer:"#7F6484",onTertiaryContainer:"#FFFFFF",error:"#740006",onError:"#FFFFFF",errorContainer:"#CF2C27",onErrorContainer:"#FFFFFF",background:"#F9F9FF",onBackground:"#191C20",surface:"#F9F9FF",onSurface:"#0F1116",surfaceVariant:"#E0E2EC",onSurfaceVariant:"#33363E",outline:"#4F525A",outlineVariant:"#6A6D75",shadow:"#000000",scrim:"#000000",inverseSurface:"#2E3036",inverseOnSurface:"#F0F0F7",inversePrimary:"#AAC7FF",primaryFixed:"#506DA0",onPrimaryFixed:"#FFFFFF",primaryFixedDim:"#375586",onPrimaryFixedVariant:"#FFFFFF",secondaryFixed:"#646D80",onSecondaryFixed:"#FFFFFF",secondaryFixedDim:"#4C5567",onSecondaryFixedVariant:"#FFFFFF",tertiaryFixed:"#7F6484",onTertiaryFixed:"#FFFFFF",tertiaryFixedDim:"#654C6B",onTertiaryFixedVariant:"#FFFFFF",surfaceDim:"#C5C6CD",surfaceBright:"#F9F9FF",surfaceContainerLowest:"#FFFFFF",surfaceContainerLow:"#F3F3FA",surfaceContainer:"#E7E8EE",surfaceContainerHigh:"#DCDCE3",surfaceContainerHighest:"#D1D1D8"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#F5F5F5","theme-on-code":"#000000"}},vrt=w6({components:FZe,directives:QZe,theme:{defaultTheme:"myCustomLightTheme",themes:{myCustomLightTheme:mrt}},defaults:{VBtn:{color:"primary",rounded:"sm",size:"small"},VSnackbar:{timeout:3e3},VSheet:{rounded:"sm",colour:"surface"},VTextField:{density:"compact"},VTooltip:{location:"top",openDelay:1e3}}}),qg=rte(kfe);qg.use(Ls);qg.use(vrt);qg.use(Si);Ra()&&qg.use(Art,{firebaseApp:e_,modules:[lrt()]});let sv=!1;const Gm=()=>{if(!sv){console.log("Mounting app");try{qg.mount("#app"),sv=!0,console.log("App mounted successfully")}catch(e){console.error("Error mounting app:",e)}}},hrt=async()=>{try{console.log("Starting app initialization..."),console.log("Environment:",Ra()?"Electron":"Web"),console.log("Initializing API client...");try{await mM(),console.log("API client initialized with URL parameters")}catch(e){console.warn("API client initialization failed:",e)}console.log("Initializing network API...");try{const e=await ZH();console.log("Network API initialized:",e)}catch(e){console.warn("Network API initialization failed:",e)}if(Ra()){console.log("Testing Firebase Auth..."),console.log("Auth object:",$s),console.log("Auth app:",$s?.app),console.log("Auth currentUser:",$s?.currentUser),console.log("Setting up auth state listener...");try{const e=$s.onAuthStateChanged(n=>{console.log(" Auth state changed!"),console.log("Initial auth state:",n?"User logged in":"No user"),console.log("User object:",n),Si.commit("auth/SET_USER",n),Gm(),setTimeout(()=>{sv&&Ls.currentRoute.value.path==="/"&&(n?!!localStorage.getItem("desktopSessionToken")?(console.log("Authenticated user with valid desktop session, navigating to home"),Ls.push("/home")):(console.log("Google auth detected, but passcode required - navigating to passcode page"),Ls.push("/desktop/passcode")):(console.log("No authenticated user, navigating to login"),Ls.push("/login")))},100)},n=>{console.error("Auth state change error:",n),n.code==="auth/network-request-failed"&&console.warn("Network request failed - this is common in Electron. Continuing with offline mode."),Gm(),setTimeout(()=>{sv&&Ls.currentRoute.value.path==="/"&&Ls.push("/login")},100)});console.log("Auth state listener set up successfully, unsubscribe function:",typeof e);const t=setTimeout(()=>{sv||(console.log("Auth state listener timeout - mounting app with current user"),Si.commit("auth/SET_USER",$s.currentUser),Gm(),_n(()=>{try{Ls.currentRoute.value.path==="/"&&($s.currentUser?!!localStorage.getItem("desktopSessionToken")?(console.log("Timeout: Authenticated user with desktop session, navigating to home"),Ls.push("/home")):(console.log("Timeout: Google auth detected, passcode required - navigating to passcode page"),Ls.push("/desktop/passcode")):(console.log("Timeout: No authenticated user, navigating to login"),Ls.push("/login")))}catch(n){console.error("Navigation error during timeout:",n)}}))},3e3);window.backupTimeout=t}catch(e){console.error("Failed to set up auth state listener:",e),Si.commit("auth/SET_USER",null),Gm()}}else console.log("Web mode: Checking web session..."),pM(),console.log("Web mode: Session interceptors set up"),Gm(),setTimeout(async()=>{if(sv){const e=Ls.currentRoute.value.path,t=zf();if(console.log("Web mode initialization - current route:",e),console.log("Session token exists:",!!t.sessionToken.value),t.sessionToken.value)try{if(console.log("Verifying existing session token..."),(await t.verifySession()).valid)console.log("Web session valid"),e==="/"&&Ls.push("/home");else if(console.log("Web session invalid, clearing session"),t.clearSession(),e!=="/web/login"){const r=new URLSearchParams(window.location.search).get("endpoint"),s=r?`/web/login?endpoint=${encodeURIComponent(r)}`:"/web/login";Ls.push(s)}}catch(n){if(console.warn("Session verification failed:",n),t.clearSession(),e!=="/web/login"&&e!=="/"){const r=new URLSearchParams(window.location.search).get("endpoint"),s=r?`/web/login?endpoint=${encodeURIComponent(r)}`:"/web/login";Ls.push(s)}}else if(e==="/"){console.log("No web session, navigating to web login");const a=new URLSearchParams(window.location.search).get("endpoint"),r=a?`/web/login?endpoint=${encodeURIComponent(a)}`:"/web/login";Ls.push(r)}}},100)}catch(e){console.error("Error initializing app:",e),Si.commit("auth/SET_USER",null),Gm()}};console.log("Starting Vue app initialization...");hrt();export{At as a,J1 as c,_o as f,_M as g,dh as p};
