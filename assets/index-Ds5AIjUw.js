(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function HB(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Za={},jm=[],yu=()=>{},tL=()=>!1,$2=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),$B=e=>e.startsWith("onUpdate:"),vs=Object.assign,QB=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},CJ=Object.prototype.hasOwnProperty,La=(e,t)=>CJ.call(e,t),wn=Array.isArray,qm=e=>Hh(e)==="[object Map]",Q2=e=>Hh(e)==="[object Set]",tP=e=>Hh(e)==="[object Date]",SJ=e=>Hh(e)==="[object RegExp]",Mn=e=>typeof e=="function",dr=e=>typeof e=="string",Dl=e=>typeof e=="symbol",qa=e=>e!==null&&typeof e=="object",nL=e=>(qa(e)||Mn(e))&&Mn(e.then)&&Mn(e.catch),aL=Object.prototype.toString,Hh=e=>aL.call(e),EJ=e=>Hh(e).slice(8,-1),rL=e=>Hh(e)==="[object Object]",GB=e=>dr(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,kp=HB(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),G2=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},BJ=/-\w/g,Lo=G2(e=>e.replace(BJ,t=>t.slice(1).toUpperCase())),kJ=/\B([A-Z])/g,Kd=G2(e=>e.replace(kJ,"-$1").toLowerCase()),Pu=G2(e=>e.charAt(0).toUpperCase()+e.slice(1)),vx=G2(e=>e?`on${Pu(e)}`:""),yd=(e,t)=>!Object.is(e,t),Ym=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},sL=(e,t,n,a=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:a,value:n})},s_=e=>{const t=parseFloat(e);return isNaN(t)?e:t},oL=e=>{const t=dr(e)?Number(e):NaN;return isNaN(t)?e:t};let nP;const z2=()=>nP||(nP=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Rt(e){if(wn(e)){const t={};for(let n=0;n<e.length;n++){const a=e[n],r=dr(a)?PJ(a):Rt(a);if(r)for(const s in r)t[s]=r[s]}return t}else if(dr(e)||qa(e))return e}const TJ=/;(?![^(]*\))/g,IJ=/:([^]+)/,FJ=/\/\*[^]*?\*\//g;function PJ(e){const t={};return e.replace(FJ,"").split(TJ).forEach(n=>{if(n){const a=n.split(IJ);a.length>1&&(t[a[0].trim()]=a[1].trim())}}),t}function ct(e){let t="";if(dr(e))t=e;else if(wn(e))for(let n=0;n<e.length;n++){const a=ct(e[n]);a&&(t+=a+" ")}else if(qa(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function Ql(e){if(!e)return null;let{class:t,style:n}=e;return t&&!dr(t)&&(e.class=ct(t)),n&&(e.style=Rt(n)),e}const DJ="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",UJ=HB(DJ);function iL(e){return!!e||e===""}function RJ(e,t){if(e.length!==t.length)return!1;let n=!0;for(let a=0;n&&a<e.length;a++)n=K2(e[a],t[a]);return n}function K2(e,t){if(e===t)return!0;let n=tP(e),a=tP(t);if(n||a)return n&&a?e.getTime()===t.getTime():!1;if(n=Dl(e),a=Dl(t),n||a)return e===t;if(n=wn(e),a=wn(t),n||a)return n&&a?RJ(e,t):!1;if(n=qa(e),a=qa(t),n||a){if(!n||!a)return!1;const r=Object.keys(e).length,s=Object.keys(t).length;if(r!==s)return!1;for(const o in e){const i=e.hasOwnProperty(o),c=t.hasOwnProperty(o);if(i&&!c||!i&&c||!K2(e[o],t[o]))return!1}}return String(e)===String(t)}function NJ(e,t){return e.findIndex(n=>K2(n,t))}const lL=e=>!!(e&&e.__v_isRef===!0),q=e=>dr(e)?e:e==null?"":wn(e)||qa(e)&&(e.toString===aL||!Mn(e.toString))?lL(e)?q(e.value):JSON.stringify(e,uL,2):String(e),uL=(e,t)=>lL(t)?uL(e,t.value):qm(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[a,r],s)=>(n[px(a,s)+" =>"]=r,n),{})}:Q2(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>px(n))}:Dl(t)?px(t):qa(t)&&!wn(t)&&!rL(t)?String(t):t,px=(e,t="")=>{var n;return Dl(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};let no;class cL{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=no,!t&&no&&(this.index=(no.scopes||(no.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=no;try{return no=this,t()}finally{no=n}}}on(){++this._on===1&&(this.prevScope=no,no=this)}off(){this._on>0&&--this._on===0&&(no=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,a;for(n=0,a=this.effects.length;n<a;n++)this.effects[n].stop();for(this.effects.length=0,n=0,a=this.cleanups.length;n<a;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,a=this.scopes.length;n<a;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function Ed(e){return new cL(e)}function dL(){return no}function as(e,t=!1){no&&no.cleanups.push(e)}let nr;const gx=new WeakSet;class AL{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,no&&no.active&&no.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,gx.has(this)&&(gx.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||mL(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,aP(this),hL(this);const t=nr,n=kl;nr=this,kl=!0;try{return this.fn()}finally{vL(this),nr=t,kl=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)WB(t);this.deps=this.depsTail=void 0,aP(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?gx.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){oS(this)&&this.run()}get dirty(){return oS(this)}}let fL=0,Tp,Ip;function mL(e,t=!1){if(e.flags|=8,t){e.next=Ip,Ip=e;return}e.next=Tp,Tp=e}function zB(){fL++}function KB(){if(--fL>0)return;if(Ip){let t=Ip;for(Ip=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Tp;){let t=Tp;for(Tp=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(a){e||(e=a)}t=n}}if(e)throw e}function hL(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function vL(e){let t,n=e.depsTail,a=n;for(;a;){const r=a.prevDep;a.version===-1?(a===n&&(n=r),WB(a),VJ(a)):t=a,a.dep.activeLink=a.prevActiveLink,a.prevActiveLink=void 0,a=r}e.deps=t,e.depsTail=n}function oS(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(pL(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function pL(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===i0)||(e.globalVersion=i0,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!oS(e))))return;e.flags|=2;const t=e.dep,n=nr,a=kl;nr=e,kl=!0;try{hL(e);const r=e.fn(e._value);(t.version===0||yd(r,e._value))&&(e.flags|=128,e._value=r,t.version++)}catch(r){throw t.version++,r}finally{nr=n,kl=a,vL(e),e.flags&=-3}}function WB(e,t=!1){const{dep:n,prevSub:a,nextSub:r}=e;if(a&&(a.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=a,e.nextSub=void 0),n.subs===e&&(n.subs=a,!a&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)WB(s,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function VJ(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let kl=!0;const gL=[];function yc(){gL.push(kl),kl=!1}function _c(){const e=gL.pop();kl=e===void 0?!0:e}function aP(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=nr;nr=void 0;try{t()}finally{nr=n}}}let i0=0;class LJ{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class jB{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!nr||!kl||nr===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==nr)n=this.activeLink=new LJ(nr,this),nr.deps?(n.prevDep=nr.depsTail,nr.depsTail.nextDep=n,nr.depsTail=n):nr.deps=nr.depsTail=n,yL(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const a=n.nextDep;a.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=a),n.prevDep=nr.depsTail,n.nextDep=void 0,nr.depsTail.nextDep=n,nr.depsTail=n,nr.deps===n&&(nr.deps=a)}return n}trigger(t){this.version++,i0++,this.notify(t)}notify(t){zB();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{KB()}}}function yL(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let a=t.deps;a;a=a.nextDep)yL(a)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const o_=new WeakMap,QA=Symbol(""),iS=Symbol(""),l0=Symbol("");function so(e,t,n){if(kl&&nr){let a=o_.get(e);a||o_.set(e,a=new Map);let r=a.get(n);r||(a.set(n,r=new jB),r.map=a,r.key=n),r.track()}}function sc(e,t,n,a,r,s){const o=o_.get(e);if(!o){i0++;return}const i=c=>{c&&c.trigger()};if(zB(),t==="clear")o.forEach(i);else{const c=wn(e),A=c&&GB(n);if(c&&n==="length"){const d=Number(a);o.forEach((f,m)=>{(m==="length"||m===l0||!Dl(m)&&m>=d)&&i(f)})}else switch((n!==void 0||o.has(void 0))&&i(o.get(n)),A&&i(o.get(l0)),t){case"add":c?A&&i(o.get("length")):(i(o.get(QA)),qm(e)&&i(o.get(iS)));break;case"delete":c||(i(o.get(QA)),qm(e)&&i(o.get(iS)));break;case"set":qm(e)&&i(o.get(QA));break}}KB()}function MJ(e,t){const n=o_.get(e);return n&&n.get(t)}function fm(e){const t=gn(e);return t===e?t:(so(t,"iterate",l0),ji(e)?t:t.map(Ms))}function W2(e){return so(e=gn(e),"iterate",l0),e}const OJ={__proto__:null,[Symbol.iterator](){return yx(this,Symbol.iterator,Ms)},concat(...e){return fm(this).concat(...e.map(t=>wn(t)?fm(t):t))},entries(){return yx(this,"entries",e=>(e[1]=Ms(e[1]),e))},every(e,t){return Ju(this,"every",e,t,void 0,arguments)},filter(e,t){return Ju(this,"filter",e,t,n=>n.map(Ms),arguments)},find(e,t){return Ju(this,"find",e,t,Ms,arguments)},findIndex(e,t){return Ju(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Ju(this,"findLast",e,t,Ms,arguments)},findLastIndex(e,t){return Ju(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Ju(this,"forEach",e,t,void 0,arguments)},includes(...e){return _x(this,"includes",e)},indexOf(...e){return _x(this,"indexOf",e)},join(e){return fm(this).join(e)},lastIndexOf(...e){return _x(this,"lastIndexOf",e)},map(e,t){return Ju(this,"map",e,t,void 0,arguments)},pop(){return Gv(this,"pop")},push(...e){return Gv(this,"push",e)},reduce(e,...t){return rP(this,"reduce",e,t)},reduceRight(e,...t){return rP(this,"reduceRight",e,t)},shift(){return Gv(this,"shift")},some(e,t){return Ju(this,"some",e,t,void 0,arguments)},splice(...e){return Gv(this,"splice",e)},toReversed(){return fm(this).toReversed()},toSorted(e){return fm(this).toSorted(e)},toSpliced(...e){return fm(this).toSpliced(...e)},unshift(...e){return Gv(this,"unshift",e)},values(){return yx(this,"values",Ms)}};function yx(e,t,n){const a=W2(e),r=a[t]();return a!==e&&!ji(e)&&(r._next=r.next,r.next=()=>{const s=r._next();return s.value&&(s.value=n(s.value)),s}),r}const HJ=Array.prototype;function Ju(e,t,n,a,r,s){const o=W2(e),i=o!==e&&!ji(e),c=o[t];if(c!==HJ[t]){const f=c.apply(e,s);return i?Ms(f):f}let A=n;o!==e&&(i?A=function(f,m){return n.call(this,Ms(f),m,e)}:n.length>2&&(A=function(f,m){return n.call(this,f,m,e)}));const d=c.call(o,A,a);return i&&r?r(d):d}function rP(e,t,n,a){const r=W2(e);let s=n;return r!==e&&(ji(e)?n.length>3&&(s=function(o,i,c){return n.call(this,o,i,c,e)}):s=function(o,i,c){return n.call(this,o,Ms(i),c,e)}),r[t](s,...a)}function _x(e,t,n){const a=gn(e);so(a,"iterate",l0);const r=a[t](...n);return(r===-1||r===!1)&&XB(n[0])?(n[0]=gn(n[0]),a[t](...n)):r}function Gv(e,t,n=[]){yc(),zB();const a=gn(e)[t].apply(e,n);return KB(),_c(),a}const $J=HB("__proto__,__v_isRef,__isVue"),_L=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Dl));function QJ(e){Dl(e)||(e=String(e));const t=gn(this);return so(t,"has",e),t.hasOwnProperty(e)}class wL{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,a){if(n==="__v_skip")return t.__v_skip;const r=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return s;if(n==="__v_raw")return a===(r?s?ZJ:SL:s?CL:xL).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(a)?t:void 0;const o=wn(t);if(!r){let c;if(o&&(c=OJ[n]))return c;if(n==="hasOwnProperty")return QJ}const i=Reflect.get(t,n,zr(t)?t:a);return(Dl(n)?_L.has(n):$J(n))||(r||so(t,"get",n),s)?i:zr(i)?o&&GB(n)?i:i.value:qa(i)?r?$h(i):es(i):i}}class bL extends wL{constructor(t=!1){super(!1,t)}set(t,n,a,r){let s=t[n];if(!this._isShallow){const c=Bd(s);if(!ji(a)&&!Bd(a)&&(s=gn(s),a=gn(a)),!wn(t)&&zr(s)&&!zr(a))return c||(s.value=a),!0}const o=wn(t)&&GB(n)?Number(n)<t.length:La(t,n),i=Reflect.set(t,n,a,zr(t)?t:r);return t===gn(r)&&(o?yd(a,s)&&sc(t,"set",n,a):sc(t,"add",n,a)),i}deleteProperty(t,n){const a=La(t,n);t[n];const r=Reflect.deleteProperty(t,n);return r&&a&&sc(t,"delete",n,void 0),r}has(t,n){const a=Reflect.has(t,n);return(!Dl(n)||!_L.has(n))&&so(t,"has",n),a}ownKeys(t){return so(t,"iterate",wn(t)?"length":QA),Reflect.ownKeys(t)}}class GJ extends wL{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const zJ=new bL,KJ=new GJ,WJ=new bL(!0);const lS=e=>e,D1=e=>Reflect.getPrototypeOf(e);function jJ(e,t,n){return function(...a){const r=this.__v_raw,s=gn(r),o=qm(s),i=e==="entries"||e===Symbol.iterator&&o,c=e==="keys"&&o,A=r[e](...a),d=n?lS:t?l_:Ms;return!t&&so(s,"iterate",c?iS:QA),{next(){const{value:f,done:m}=A.next();return m?{value:f,done:m}:{value:i?[d(f[0]),d(f[1])]:d(f),done:m}},[Symbol.iterator](){return this}}}}function U1(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function qJ(e,t){const n={get(r){const s=this.__v_raw,o=gn(s),i=gn(r);e||(yd(r,i)&&so(o,"get",r),so(o,"get",i));const{has:c}=D1(o),A=t?lS:e?l_:Ms;if(c.call(o,r))return A(s.get(r));if(c.call(o,i))return A(s.get(i));s!==o&&s.get(r)},get size(){const r=this.__v_raw;return!e&&so(gn(r),"iterate",QA),r.size},has(r){const s=this.__v_raw,o=gn(s),i=gn(r);return e||(yd(r,i)&&so(o,"has",r),so(o,"has",i)),r===i?s.has(r):s.has(r)||s.has(i)},forEach(r,s){const o=this,i=o.__v_raw,c=gn(i),A=t?lS:e?l_:Ms;return!e&&so(c,"iterate",QA),i.forEach((d,f)=>r.call(s,A(d),A(f),o))}};return vs(n,e?{add:U1("add"),set:U1("set"),delete:U1("delete"),clear:U1("clear")}:{add(r){!t&&!ji(r)&&!Bd(r)&&(r=gn(r));const s=gn(this);return D1(s).has.call(s,r)||(s.add(r),sc(s,"add",r,r)),this},set(r,s){!t&&!ji(s)&&!Bd(s)&&(s=gn(s));const o=gn(this),{has:i,get:c}=D1(o);let A=i.call(o,r);A||(r=gn(r),A=i.call(o,r));const d=c.call(o,r);return o.set(r,s),A?yd(s,d)&&sc(o,"set",r,s):sc(o,"add",r,s),this},delete(r){const s=gn(this),{has:o,get:i}=D1(s);let c=o.call(s,r);c||(r=gn(r),c=o.call(s,r)),i&&i.call(s,r);const A=s.delete(r);return c&&sc(s,"delete",r,void 0),A},clear(){const r=gn(this),s=r.size!==0,o=r.clear();return s&&sc(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=jJ(r,e,t)}),n}function qB(e,t){const n=qJ(e,t);return(a,r,s)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?a:Reflect.get(La(n,r)&&r in a?n:a,r,s)}const YJ={get:qB(!1,!1)},XJ={get:qB(!1,!0)},JJ={get:qB(!0,!1)};const xL=new WeakMap,CL=new WeakMap,SL=new WeakMap,ZJ=new WeakMap;function eZ(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function tZ(e){return e.__v_skip||!Object.isExtensible(e)?0:eZ(EJ(e))}function es(e){return Bd(e)?e:YB(e,!1,zJ,YJ,xL)}function EL(e){return YB(e,!1,WJ,XJ,CL)}function $h(e){return YB(e,!0,KJ,JJ,SL)}function YB(e,t,n,a,r){if(!qa(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=tZ(e);if(s===0)return e;const o=r.get(e);if(o)return o;const i=new Proxy(e,s===2?a:n);return r.set(e,i),i}function Xm(e){return Bd(e)?Xm(e.__v_raw):!!(e&&e.__v_isReactive)}function Bd(e){return!!(e&&e.__v_isReadonly)}function ji(e){return!!(e&&e.__v_isShallow)}function XB(e){return e?!!e.__v_raw:!1}function gn(e){const t=e&&e.__v_raw;return t?gn(t):e}function i_(e){return!La(e,"__v_skip")&&Object.isExtensible(e)&&sL(e,"__v_skip",!0),e}const Ms=e=>qa(e)?es(e):e,l_=e=>qa(e)?$h(e):e;function zr(e){return e?e.__v_isRef===!0:!1}function M(e){return BL(e,!1)}function Ht(e){return BL(e,!0)}function BL(e,t){return zr(e)?e:new nZ(e,t)}class nZ{constructor(t,n){this.dep=new jB,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:gn(t),this._value=n?t:Ms(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,a=this.__v_isShallow||ji(t)||Bd(t);t=a?t:gn(t),yd(t,n)&&(this._rawValue=t,this._value=a?t:Ms(t),this.dep.trigger())}}function Oe(e){return zr(e)?e.value:e}function xu(e){return Mn(e)?e():Oe(e)}const aZ={get:(e,t,n)=>t==="__v_raw"?e:Oe(Reflect.get(e,t,n)),set:(e,t,n,a)=>{const r=e[t];return zr(r)&&!zr(n)?(r.value=n,!0):Reflect.set(e,t,n,a)}};function kL(e){return Xm(e)?e:new Proxy(e,aZ)}function Ef(e){const t=wn(e)?new Array(e.length):{};for(const n in e)t[n]=TL(e,n);return t}class rZ{constructor(t,n,a){this._object=t,this._key=n,this._defaultValue=a,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return MJ(gn(this._object),this._key)}}class sZ{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function qe(e,t,n){return zr(e)?e:Mn(e)?new sZ(e):qa(e)&&arguments.length>1?TL(e,t,n):M(e)}function TL(e,t,n){const a=e[t];return zr(a)?a:new rZ(e,t,n)}class oZ{constructor(t,n,a){this.fn=t,this.setter=n,this._value=void 0,this.dep=new jB(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=i0-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=a}notify(){if(this.flags|=16,!(this.flags&8)&&nr!==this)return mL(this,!0),!0}get value(){const t=this.dep.track();return pL(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function iZ(e,t,n=!1){let a,r;return Mn(e)?a=e:(a=e.get,r=e.set),new oZ(a,r,n)}const R1={},u_=new WeakMap;let EA;function lZ(e,t=!1,n=EA){if(n){let a=u_.get(n);a||u_.set(n,a=[]),a.push(e)}}function uZ(e,t,n=Za){const{immediate:a,deep:r,once:s,scheduler:o,augmentJob:i,call:c}=n,A=T=>r?T:ji(T)||r===!1||r===0?oc(T,1):oc(T);let d,f,m,h,v=!1,y=!1;if(zr(e)?(f=()=>e.value,v=ji(e)):Xm(e)?(f=()=>A(e),v=!0):wn(e)?(y=!0,v=e.some(T=>Xm(T)||ji(T)),f=()=>e.map(T=>{if(zr(T))return T.value;if(Xm(T))return A(T);if(Mn(T))return c?c(T,2):T()})):Mn(e)?t?f=c?()=>c(e,2):e:f=()=>{if(m){yc();try{m()}finally{_c()}}const T=EA;EA=d;try{return c?c(e,3,[h]):e(h)}finally{EA=T}}:f=yu,t&&r){const T=f,U=r===!0?1/0:r;f=()=>oc(T(),U)}const g=dL(),w=()=>{d.stop(),g&&g.active&&QB(g.effects,d)};if(s&&t){const T=t;t=(...U)=>{T(...U),w()}}let b=y?new Array(e.length).fill(R1):R1;const x=T=>{if(!(!(d.flags&1)||!d.dirty&&!T))if(t){const U=d.run();if(r||v||(y?U.some((k,S)=>yd(k,b[S])):yd(U,b))){m&&m();const k=EA;EA=d;try{const S=[U,b===R1?void 0:y&&b[0]===R1?[]:b,h];b=U,c?c(t,3,S):t(...S)}finally{EA=k}}}else d.run()};return i&&i(x),d=new AL(f),d.scheduler=o?()=>o(x,!1):x,h=T=>lZ(T,!1,d),m=d.onStop=()=>{const T=u_.get(d);if(T){if(c)c(T,4);else for(const U of T)U();u_.delete(d)}},t?a?x(!0):b=d.run():o?o(x.bind(null,!0),!0):d.run(),w.pause=d.pause.bind(d),w.resume=d.resume.bind(d),w.stop=w,w}function oc(e,t=1/0,n){if(t<=0||!qa(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,zr(e))oc(e.value,t,n);else if(wn(e))for(let a=0;a<e.length;a++)oc(e[a],t,n);else if(Q2(e)||qm(e))e.forEach(a=>{oc(a,t,n)});else if(rL(e)){for(const a in e)oc(e[a],t,n);for(const a of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,a)&&oc(e[a],t,n)}return e}function X0(e,t,n,a){try{return a?e(...a):e()}catch(r){J0(r,t,n)}}function Ul(e,t,n,a){if(Mn(e)){const r=X0(e,t,n,a);return r&&nL(r)&&r.catch(s=>{J0(s,t,n)}),r}if(wn(e)){const r=[];for(let s=0;s<e.length;s++)r.push(Ul(e[s],t,n,a));return r}}function J0(e,t,n,a=!0){const r=t?t.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||Za;if(t){let i=t.parent;const c=t.proxy,A=`https://vuejs.org/error-reference/#runtime-${n}`;for(;i;){const d=i.ec;if(d){for(let f=0;f<d.length;f++)if(d[f](e,c,A)===!1)return}i=i.parent}if(s){yc(),X0(s,null,10,[e,c,A]),_c();return}}cZ(e,n,r,a,o)}function cZ(e,t,n,a=!0,r=!1){if(r)throw e;console.error(e)}const Do=[];let du=-1;const Jm=[];let nd=null,Dm=0;const IL=Promise.resolve();let c_=null;function bn(e){const t=c_||IL;return e?t.then(this?e.bind(this):e):t}function dZ(e){let t=du+1,n=Do.length;for(;t<n;){const a=t+n>>>1,r=Do[a],s=u0(r);s<e||s===e&&r.flags&2?t=a+1:n=a}return t}function JB(e){if(!(e.flags&1)){const t=u0(e),n=Do[Do.length-1];!n||!(e.flags&2)&&t>=u0(n)?Do.push(e):Do.splice(dZ(t),0,e),e.flags|=1,FL()}}function FL(){c_||(c_=IL.then(DL))}function uS(e){wn(e)?Jm.push(...e):nd&&e.id===-1?nd.splice(Dm+1,0,e):e.flags&1||(Jm.push(e),e.flags|=1),FL()}function sP(e,t,n=du+1){for(;n<Do.length;n++){const a=Do[n];if(a&&a.flags&2){if(e&&a.id!==e.uid)continue;Do.splice(n,1),n--,a.flags&4&&(a.flags&=-2),a(),a.flags&4||(a.flags&=-2)}}}function PL(e){if(Jm.length){const t=[...new Set(Jm)].sort((n,a)=>u0(n)-u0(a));if(Jm.length=0,nd){nd.push(...t);return}for(nd=t,Dm=0;Dm<nd.length;Dm++){const n=nd[Dm];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}nd=null,Dm=0}}const u0=e=>e.id==null?e.flags&2?-1:1/0:e.id;function DL(e){try{for(du=0;du<Do.length;du++){const t=Do[du];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),X0(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;du<Do.length;du++){const t=Do[du];t&&(t.flags&=-2)}du=-1,Do.length=0,PL(),c_=null,(Do.length||Jm.length)&&DL()}}let $s=null,UL=null;function d_(e){const t=$s;return $s=e,UL=e&&e.type.__scopeId||null,t}function u(e,t=$s,n){if(!t||e._n)return e;const a=(...r)=>{a._d&&v_(-1);const s=d_(t);let o;try{o=e(...r)}finally{d_(s),a._d&&v_(1)}return o};return a._n=!0,a._c=!0,a._d=!0,a}function Aa(e,t){if($s===null)return e;const n=ew($s),a=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[s,o,i,c=Za]=t[r];s&&(Mn(s)&&(s={mounted:s,updated:s}),s.deep&&oc(o),a.push({dir:s,instance:n,value:o,oldValue:void 0,arg:i,modifiers:c}))}return e}function vA(e,t,n,a){const r=e.dirs,s=t&&t.dirs;for(let o=0;o<r.length;o++){const i=r[o];s&&(i.oldValue=s[o].value);let c=i.dir[a];c&&(yc(),Ul(c,n,8,[e.el,i,e,t]),_c())}}const RL=Symbol("_vte"),NL=e=>e.__isTeleport,Fp=e=>e&&(e.disabled||e.disabled===""),oP=e=>e&&(e.defer||e.defer===""),iP=e=>typeof SVGElement<"u"&&e instanceof SVGElement,lP=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,cS=(e,t)=>{const n=e&&e.to;return dr(n)?t?t(n):null:n},VL={name:"Teleport",__isTeleport:!0,process(e,t,n,a,r,s,o,i,c,A){const{mc:d,pc:f,pbc:m,o:{insert:h,querySelector:v,createText:y,createComment:g}}=A,w=Fp(t.props);let{shapeFlag:b,children:x,dynamicChildren:T}=t;if(e==null){const U=t.el=y(""),k=t.anchor=y("");h(U,n,a),h(k,n,a);const S=(C,P)=>{b&16&&(r&&r.isCE&&(r.ce._teleportTarget=C),d(x,C,P,r,s,o,i,c))},E=()=>{const C=t.target=cS(t.props,v),P=LL(C,t,y,h);C&&(o!=="svg"&&iP(C)?o="svg":o!=="mathml"&&lP(C)&&(o="mathml"),w||(S(C,P),Ny(t,!1)))};w&&(S(n,k),Ny(t,!0)),oP(t.props)?(t.el.__isMounted=!1,us(()=>{E(),delete t.el.__isMounted},s)):E()}else{if(oP(t.props)&&e.el.__isMounted===!1){us(()=>{VL.process(e,t,n,a,r,s,o,i,c,A)},s);return}t.el=e.el,t.targetStart=e.targetStart;const U=t.anchor=e.anchor,k=t.target=e.target,S=t.targetAnchor=e.targetAnchor,E=Fp(e.props),C=E?n:k,P=E?U:S;if(o==="svg"||iP(k)?o="svg":(o==="mathml"||lP(k))&&(o="mathml"),T?(m(e.dynamicChildren,T,C,r,s,o,i),ak(e,t,!0)):c||f(e,t,C,P,r,s,o,i,!1),w)E?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):N1(t,n,U,A,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const F=t.target=cS(t.props,v);F&&N1(t,F,null,A,0)}else E&&N1(t,k,S,A,1);Ny(t,w)}},remove(e,t,n,{um:a,o:{remove:r}},s){const{shapeFlag:o,children:i,anchor:c,targetStart:A,targetAnchor:d,target:f,props:m}=e;if(f&&(r(A),r(d)),s&&r(c),o&16){const h=s||!Fp(m);for(let v=0;v<i.length;v++){const y=i[v];a(y,t,n,h,!!y.dynamicChildren)}}},move:N1,hydrate:AZ};function N1(e,t,n,{o:{insert:a},m:r},s=2){s===0&&a(e.targetAnchor,t,n);const{el:o,anchor:i,shapeFlag:c,children:A,props:d}=e,f=s===2;if(f&&a(o,t,n),(!f||Fp(d))&&c&16)for(let m=0;m<A.length;m++)r(A[m],t,n,2);f&&a(i,t,n)}function AZ(e,t,n,a,r,s,{o:{nextSibling:o,parentNode:i,querySelector:c,insert:A,createText:d}},f){function m(y,g,w,b){g.anchor=f(o(y),g,i(y),n,a,r,s),g.targetStart=w,g.targetAnchor=b}const h=t.target=cS(t.props,c),v=Fp(t.props);if(h){const y=h._lpa||h.firstChild;if(t.shapeFlag&16)if(v)m(e,t,y,y&&o(y));else{t.anchor=o(e);let g=y;for(;g;){if(g&&g.nodeType===8){if(g.data==="teleport start anchor")t.targetStart=g;else if(g.data==="teleport anchor"){t.targetAnchor=g,h._lpa=t.targetAnchor&&o(t.targetAnchor);break}}g=o(g)}t.targetAnchor||LL(h,t,d,A),f(y&&o(y),t,h,n,a,r,s)}Ny(t,v)}else v&&t.shapeFlag&16&&m(e,t,e,o(e));return t.anchor&&o(t.anchor)}const fZ=VL;function Ny(e,t){const n=e.ctx;if(n&&n.ut){let a,r;for(t?(a=e.el,r=e.anchor):(a=e.targetStart,r=e.targetAnchor);a&&a!==r;)a.nodeType===1&&a.setAttribute("data-v-owner",n.uid),a=a.nextSibling;n.ut()}}function LL(e,t,n,a){const r=t.targetStart=n(""),s=t.targetAnchor=n("");return r[RL]=s,e&&(a(r,e),a(s,e)),s}const rc=Symbol("_leaveCb"),V1=Symbol("_enterCb");function ML(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return cn(()=>{e.isMounted=!0}),la(()=>{e.isUnmounting=!0}),e}const Ni=[Function,Array],OL={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ni,onEnter:Ni,onAfterEnter:Ni,onEnterCancelled:Ni,onBeforeLeave:Ni,onLeave:Ni,onAfterLeave:Ni,onLeaveCancelled:Ni,onBeforeAppear:Ni,onAppear:Ni,onAfterAppear:Ni,onAppearCancelled:Ni},HL=e=>{const t=e.subTree;return t.component?HL(t.component):t},mZ={name:"BaseTransition",props:OL,setup(e,{slots:t}){const n=Bf(),a=ML();return()=>{const r=t.default&&ZB(t.default(),!0);if(!r||!r.length)return;const s=$L(r),o=gn(e),{mode:i}=o;if(a.isLeaving)return wx(s);const c=uP(s);if(!c)return wx(s);let A=c0(c,o,a,n,f=>A=f);c.type!==ts&&kd(c,A);let d=n.subTree&&uP(n.subTree);if(d&&d.type!==ts&&!pl(d,c)&&HL(n).type!==ts){let f=c0(d,o,a,n);if(kd(d,f),i==="out-in"&&c.type!==ts)return a.isLeaving=!0,f.afterLeave=()=>{a.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,d=void 0},wx(s);i==="in-out"&&c.type!==ts?f.delayLeave=(m,h,v)=>{const y=QL(a,d);y[String(d.key)]=d,m[rc]=()=>{h(),m[rc]=void 0,delete A.delayedLeave,d=void 0},A.delayedLeave=()=>{v(),delete A.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return s}}};function $L(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==ts){t=n;break}}return t}const hZ=mZ;function QL(e,t){const{leavingVNodes:n}=e;let a=n.get(t.type);return a||(a=Object.create(null),n.set(t.type,a)),a}function c0(e,t,n,a,r){const{appear:s,mode:o,persisted:i=!1,onBeforeEnter:c,onEnter:A,onAfterEnter:d,onEnterCancelled:f,onBeforeLeave:m,onLeave:h,onAfterLeave:v,onLeaveCancelled:y,onBeforeAppear:g,onAppear:w,onAfterAppear:b,onAppearCancelled:x}=t,T=String(e.key),U=QL(n,e),k=(C,P)=>{C&&Ul(C,a,9,P)},S=(C,P)=>{const F=P[1];k(C,P),wn(C)?C.every(N=>N.length<=1)&&F():C.length<=1&&F()},E={mode:o,persisted:i,beforeEnter(C){let P=c;if(!n.isMounted)if(s)P=g||c;else return;C[rc]&&C[rc](!0);const F=U[T];F&&pl(e,F)&&F.el[rc]&&F.el[rc](),k(P,[C])},enter(C){let P=A,F=d,N=f;if(!n.isMounted)if(s)P=w||A,F=b||d,N=x||f;else return;let L=!1;const ie=C[V1]=le=>{L||(L=!0,le?k(N,[C]):k(F,[C]),E.delayedLeave&&E.delayedLeave(),C[V1]=void 0)};P?S(P,[C,ie]):ie()},leave(C,P){const F=String(e.key);if(C[V1]&&C[V1](!0),n.isUnmounting)return P();k(m,[C]);let N=!1;const L=C[rc]=ie=>{N||(N=!0,P(),ie?k(y,[C]):k(v,[C]),C[rc]=void 0,U[F]===e&&delete U[F])};U[F]=e,h?S(h,[C,L]):L()},clone(C){const P=c0(C,t,n,a,r);return r&&r(P),P}};return E}function wx(e){if(j2(e))return e=Cu(e),e.children=null,e}function uP(e){if(!j2(e))return NL(e.type)&&e.children?$L(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&Mn(n.default))return n.default()}}function kd(e,t){e.shapeFlag&6&&e.component?(e.transition=t,kd(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function ZB(e,t=!1,n){let a=[],r=0;for(let s=0;s<e.length;s++){let o=e[s];const i=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===ze?(o.patchFlag&128&&r++,a=a.concat(ZB(o.children,t,i))):(t||o.type!==ts)&&a.push(i!=null?Cu(o,{key:i}):o)}if(r>1)for(let s=0;s<a.length;s++)a[s].patchFlag=-2;return a}function ek(e,t){return Mn(e)?vs({name:e.name},t,{setup:e}):e}function Ho(){const e=Bf();return e?(e.appContext.config.idPrefix||"v")+"-"+e.ids[0]+e.ids[1]++:""}function GL(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const A_=new WeakMap;function Pp(e,t,n,a,r=!1){if(wn(e)){e.forEach((v,y)=>Pp(v,t&&(wn(t)?t[y]:t),n,a,r));return}if(GA(a)&&!r){a.shapeFlag&512&&a.type.__asyncResolved&&a.component.subTree.component&&Pp(e,t,n,a.component.subTree);return}const s=a.shapeFlag&4?ew(a.component):a.el,o=r?null:s,{i,r:c}=e,A=t&&t.r,d=i.refs===Za?i.refs={}:i.refs,f=i.setupState,m=gn(f),h=f===Za?tL:v=>La(m,v);if(A!=null&&A!==c){if(cP(t),dr(A))d[A]=null,h(A)&&(f[A]=null);else if(zr(A)){A.value=null;const v=t;v.k&&(d[v.k]=null)}}if(Mn(c))X0(c,i,12,[o,d]);else{const v=dr(c),y=zr(c);if(v||y){const g=()=>{if(e.f){const w=v?h(c)?f[c]:d[c]:c.value;if(r)wn(w)&&QB(w,s);else if(wn(w))w.includes(s)||w.push(s);else if(v)d[c]=[s],h(c)&&(f[c]=d[c]);else{const b=[s];c.value=b,e.k&&(d[e.k]=b)}}else v?(d[c]=o,h(c)&&(f[c]=o)):y&&(c.value=o,e.k&&(d[e.k]=o))};if(o){const w=()=>{g(),A_.delete(e)};w.id=-1,A_.set(e,w),us(w,n)}else cP(e),g()}}}function cP(e){const t=A_.get(e);t&&(t.flags|=8,A_.delete(e))}z2().requestIdleCallback;z2().cancelIdleCallback;const GA=e=>!!e.type.__asyncLoader,j2=e=>e.type.__isKeepAlive,vZ={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=Bf(),a=n.ctx;if(!a.renderer)return()=>{const b=t.default&&t.default();return b&&b.length===1?b[0]:b};const r=new Map,s=new Set;let o=null;const i=n.suspense,{renderer:{p:c,m:A,um:d,o:{createElement:f}}}=a,m=f("div");a.activate=(b,x,T,U,k)=>{const S=b.component;A(b,x,T,0,i),c(S.vnode,b,x,T,S,i,U,b.slotScopeIds,k),us(()=>{S.isDeactivated=!1,S.a&&Ym(S.a);const E=b.props&&b.props.onVnodeMounted;E&&Mi(E,S.parent,b)},i)},a.deactivate=b=>{const x=b.component;m_(x.m),m_(x.a),A(b,m,null,1,i),us(()=>{x.da&&Ym(x.da);const T=b.props&&b.props.onVnodeUnmounted;T&&Mi(T,x.parent,b),x.isDeactivated=!0},i)};function h(b){bx(b),d(b,n,i,!0)}function v(b){r.forEach((x,T)=>{const U=yS(x.type);U&&!b(U)&&y(T)})}function y(b){const x=r.get(b);x&&(!o||!pl(x,o))?h(x):o&&bx(o),r.delete(b),s.delete(b)}We(()=>[e.include,e.exclude],([b,x])=>{b&&v(T=>dp(b,T)),x&&v(T=>!dp(x,T))},{flush:"post",deep:!0});let g=null;const w=()=>{g!=null&&(h_(n.subTree.type)?us(()=>{r.set(g,L1(n.subTree))},n.subTree.suspense):r.set(g,L1(n.subTree)))};return cn(w),X2(w),la(()=>{r.forEach(b=>{const{subTree:x,suspense:T}=n,U=L1(x);if(b.type===U.type&&b.key===U.key){bx(U);const k=U.component.da;k&&us(k,T);return}h(b)})}),()=>{if(g=null,!t.default)return o=null;const b=t.default(),x=b[0];if(b.length>1)return o=null,b;if(!Td(x)||!(x.shapeFlag&4)&&!(x.shapeFlag&128))return o=null,x;let T=L1(x);if(T.type===ts)return o=null,T;const U=T.type,k=yS(GA(T)?T.type.__asyncResolved||{}:U),{include:S,exclude:E,max:C}=e;if(S&&(!k||!dp(S,k))||E&&k&&dp(E,k))return T.shapeFlag&=-257,o=T,x;const P=T.key==null?U:T.key,F=r.get(P);return T.el&&(T=Cu(T),x.shapeFlag&128&&(x.ssContent=T)),g=P,F?(T.el=F.el,T.component=F.component,T.transition&&kd(T,T.transition),T.shapeFlag|=512,s.delete(P),s.add(P)):(s.add(P),C&&s.size>parseInt(C,10)&&y(s.values().next().value)),T.shapeFlag|=256,o=T,h_(x.type)?x:T}}},pZ=vZ;function dp(e,t){return wn(e)?e.some(n=>dp(n,t)):dr(e)?e.split(",").includes(t):SJ(e)?(e.lastIndex=0,e.test(t)):!1}function Z0(e,t){zL(e,"a",t)}function q2(e,t){zL(e,"da",t)}function zL(e,t,n=lo){const a=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(Y2(t,a,n),n){let r=n.parent;for(;r&&r.parent;)j2(r.parent.vnode)&&gZ(a,t,n,r),r=r.parent}}function gZ(e,t,n,a){const r=Y2(t,e,a,!0);zl(()=>{QB(a[t],r)},n)}function bx(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function L1(e){return e.shapeFlag&128?e.ssContent:e}function Y2(e,t,n=lo,a=!1){if(n){const r=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...o)=>{yc();const i=tg(n),c=Ul(t,n,e,o);return i(),_c(),c});return a?r.unshift(s):r.push(s),s}}const Fc=e=>(t,n=lo)=>{(!A0||e==="sp")&&Y2(e,(...a)=>t(...a),n)},Gl=Fc("bm"),cn=Fc("m"),KL=Fc("bu"),X2=Fc("u"),la=Fc("bum"),zl=Fc("um"),yZ=Fc("sp"),_Z=Fc("rtg"),wZ=Fc("rtc");function bZ(e,t=lo){Y2("ec",e,t)}const WL="components";function I(e,t){return qL(WL,e,!0,t)||e}const jL=Symbol.for("v-ndc");function J2(e){return dr(e)?qL(WL,e,!1)||e:e||jL}function qL(e,t,n=!0,a=!1){const r=$s||lo;if(r){const s=r.type;{const i=yS(s,!1);if(i&&(i===t||i===Lo(t)||i===Pu(Lo(t))))return s}const o=dP(r[e]||s[e],t)||dP(r.appContext[e],t);return!o&&a?s:o}}function dP(e,t){return e&&(e[t]||e[Lo(t)]||e[Pu(Lo(t))])}function Wt(e,t,n,a){let r;const s=n,o=wn(e);if(o||dr(e)){const i=o&&Xm(e);let c=!1,A=!1;i&&(c=!ji(e),A=Bd(e),e=W2(e)),r=new Array(e.length);for(let d=0,f=e.length;d<f;d++)r[d]=t(c?A?l_(Ms(e[d])):Ms(e[d]):e[d],d,void 0,s)}else if(typeof e=="number"){r=new Array(e);for(let i=0;i<e;i++)r[i]=t(i+1,i,void 0,s)}else if(qa(e))if(e[Symbol.iterator])r=Array.from(e,(i,c)=>t(i,c,void 0,s));else{const i=Object.keys(e);r=new Array(i.length);for(let c=0,A=i.length;c<A;c++){const d=i[c];r[c]=t(e[d],d,c,s)}}else r=[];return r}function hh(e,t){for(let n=0;n<t.length;n++){const a=t[n];if(wn(a))for(let r=0;r<a.length;r++)e[a[r].name]=a[r].fn;else a&&(e[a.name]=a.key?(...r)=>{const s=a.fn(...r);return s&&(s.key=a.key),s}:a.fn)}return e}function xZ(e,t,n={},a,r){if($s.ce||$s.parent&&GA($s.parent)&&$s.parent.ce)return R(),ve(ze,null,[l("slot",n,a)],64);let s=e[t];s&&s._c&&(s._d=!1),R();const o=s&&YL(s(n)),i=n.key||o&&o.key,c=ve(ze,{key:(i&&!Dl(i)?i:`_${t}`)+(!o&&a?"_fb":"")},o||[],o&&e._===1?64:-2);return s&&s._c&&(s._d=!0),c}function YL(e){return e.some(t=>Td(t)?!(t.type===ts||t.type===ze&&!YL(t.children)):!0)?e:null}const dS=e=>e?h8(e)?ew(e):dS(e.parent):null,Dp=vs(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>dS(e.parent),$root:e=>dS(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>JL(e),$forceUpdate:e=>e.f||(e.f=()=>{JB(e.update)}),$nextTick:e=>e.n||(e.n=bn.bind(e.proxy)),$watch:e=>GZ.bind(e)}),xx=(e,t)=>e!==Za&&!e.__isScriptSetup&&La(e,t),CZ={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:a,data:r,props:s,accessCache:o,type:i,appContext:c}=e;let A;if(t[0]!=="$"){const h=o[t];if(h!==void 0)switch(h){case 1:return a[t];case 2:return r[t];case 4:return n[t];case 3:return s[t]}else{if(xx(a,t))return o[t]=1,a[t];if(r!==Za&&La(r,t))return o[t]=2,r[t];if((A=e.propsOptions[0])&&La(A,t))return o[t]=3,s[t];if(n!==Za&&La(n,t))return o[t]=4,n[t];AS&&(o[t]=0)}}const d=Dp[t];let f,m;if(d)return t==="$attrs"&&so(e.attrs,"get",""),d(e);if((f=i.__cssModules)&&(f=f[t]))return f;if(n!==Za&&La(n,t))return o[t]=4,n[t];if(m=c.config.globalProperties,La(m,t))return m[t]},set({_:e},t,n){const{data:a,setupState:r,ctx:s}=e;return xx(r,t)?(r[t]=n,!0):a!==Za&&La(a,t)?(a[t]=n,!0):La(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:a,appContext:r,propsOptions:s,type:o}},i){let c,A;return!!(n[i]||e!==Za&&i[0]!=="$"&&La(e,i)||xx(t,i)||(c=s[0])&&La(c,i)||La(a,i)||La(Dp,i)||La(r.config.globalProperties,i)||(A=o.__cssModules)&&A[i])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:La(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function AP(e){return wn(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let AS=!0;function SZ(e){const t=JL(e),n=e.proxy,a=e.ctx;AS=!1,t.beforeCreate&&fP(t.beforeCreate,e,"bc");const{data:r,computed:s,methods:o,watch:i,provide:c,inject:A,created:d,beforeMount:f,mounted:m,beforeUpdate:h,updated:v,activated:y,deactivated:g,beforeDestroy:w,beforeUnmount:b,destroyed:x,unmounted:T,render:U,renderTracked:k,renderTriggered:S,errorCaptured:E,serverPrefetch:C,expose:P,inheritAttrs:F,components:N,directives:L,filters:ie}=t;if(A&&EZ(A,a,null),o)for(const Z in o){const ce=o[Z];Mn(ce)&&(a[Z]=ce.bind(n))}if(r){const Z=r.call(n,n);qa(Z)&&(e.data=es(Z))}if(AS=!0,s)for(const Z in s){const ce=s[Z],J=Mn(ce)?ce.bind(n,n):Mn(ce.get)?ce.get.bind(n,n):yu,se=!Mn(ce)&&Mn(ce.set)?ce.set.bind(n):yu,G=ee({get:J,set:se});Object.defineProperty(a,Z,{enumerable:!0,configurable:!0,get:()=>G.value,set:D=>G.value=D})}if(i)for(const Z in i)XL(i[Z],a,n,Z);if(c){const Z=Mn(c)?c.call(n):c;Reflect.ownKeys(Z).forEach(ce=>{Ia(ce,Z[ce])})}d&&fP(d,e,"c");function Q(Z,ce){wn(ce)?ce.forEach(J=>Z(J.bind(n))):ce&&Z(ce.bind(n))}if(Q(Gl,f),Q(cn,m),Q(KL,h),Q(X2,v),Q(Z0,y),Q(q2,g),Q(bZ,E),Q(wZ,k),Q(_Z,S),Q(la,b),Q(zl,T),Q(yZ,C),wn(P))if(P.length){const Z=e.exposed||(e.exposed={});P.forEach(ce=>{Object.defineProperty(Z,ce,{get:()=>n[ce],set:J=>n[ce]=J,enumerable:!0})})}else e.exposed||(e.exposed={});U&&e.render===yu&&(e.render=U),F!=null&&(e.inheritAttrs=F),N&&(e.components=N),L&&(e.directives=L),C&&GL(e)}function EZ(e,t,n=yu){wn(e)&&(e=fS(e));for(const a in e){const r=e[a];let s;qa(r)?"default"in r?s=Sn(r.from||a,r.default,!0):s=Sn(r.from||a):s=Sn(r),zr(s)?Object.defineProperty(t,a,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):t[a]=s}}function fP(e,t,n){Ul(wn(e)?e.map(a=>a.bind(t.proxy)):e.bind(t.proxy),t,n)}function XL(e,t,n,a){let r=a.includes(".")?u8(n,a):()=>n[a];if(dr(e)){const s=t[e];Mn(s)&&We(r,s)}else if(Mn(e))We(r,e.bind(n));else if(qa(e))if(wn(e))e.forEach(s=>XL(s,t,n,a));else{const s=Mn(e.handler)?e.handler.bind(n):t[e.handler];Mn(s)&&We(r,s,e)}}function JL(e){const t=e.type,{mixins:n,extends:a}=t,{mixins:r,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,i=s.get(t);let c;return i?c=i:!r.length&&!n&&!a?c=t:(c={},r.length&&r.forEach(A=>f_(c,A,o,!0)),f_(c,t,o)),qa(t)&&s.set(t,c),c}function f_(e,t,n,a=!1){const{mixins:r,extends:s}=t;s&&f_(e,s,n,!0),r&&r.forEach(o=>f_(e,o,n,!0));for(const o in t)if(!(a&&o==="expose")){const i=BZ[o]||n&&n[o];e[o]=i?i(e[o],t[o]):t[o]}return e}const BZ={data:mP,props:hP,emits:hP,methods:Ap,computed:Ap,beforeCreate:To,created:To,beforeMount:To,mounted:To,beforeUpdate:To,updated:To,beforeDestroy:To,beforeUnmount:To,destroyed:To,unmounted:To,activated:To,deactivated:To,errorCaptured:To,serverPrefetch:To,components:Ap,directives:Ap,watch:TZ,provide:mP,inject:kZ};function mP(e,t){return t?e?function(){return vs(Mn(e)?e.call(this,this):e,Mn(t)?t.call(this,this):t)}:t:e}function kZ(e,t){return Ap(fS(e),fS(t))}function fS(e){if(wn(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function To(e,t){return e?[...new Set([].concat(e,t))]:t}function Ap(e,t){return e?vs(Object.create(null),e,t):t}function hP(e,t){return e?wn(e)&&wn(t)?[...new Set([...e,...t])]:vs(Object.create(null),AP(e),AP(t??{})):t}function TZ(e,t){if(!e)return t;if(!t)return e;const n=vs(Object.create(null),e);for(const a in t)n[a]=To(e[a],t[a]);return n}function ZL(){return{app:null,config:{isNativeTag:tL,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let IZ=0;function FZ(e,t){return function(a,r=null){Mn(a)||(a=vs({},a)),r!=null&&!qa(r)&&(r=null);const s=ZL(),o=new WeakSet,i=[];let c=!1;const A=s.app={_uid:IZ++,_component:a,_props:r,_container:null,_context:s,_instance:null,version:mee,get config(){return s.config},set config(d){},use(d,...f){return o.has(d)||(d&&Mn(d.install)?(o.add(d),d.install(A,...f)):Mn(d)&&(o.add(d),d(A,...f))),A},mixin(d){return s.mixins.includes(d)||s.mixins.push(d),A},component(d,f){return f?(s.components[d]=f,A):s.components[d]},directive(d,f){return f?(s.directives[d]=f,A):s.directives[d]},mount(d,f,m){if(!c){const h=A._ceVNode||l(a,r);return h.appContext=s,m===!0?m="svg":m===!1&&(m=void 0),e(h,d,m),c=!0,A._container=d,d.__vue_app__=A,ew(h.component)}},onUnmount(d){i.push(d)},unmount(){c&&(Ul(i,A._instance,16),e(null,A._container),delete A._container.__vue_app__)},provide(d,f){return s.provides[d]=f,A},runWithContext(d){const f=Zm;Zm=A;try{return d()}finally{Zm=f}}};return A}}let Zm=null;function Ia(e,t){if(lo){let n=lo.provides;const a=lo.parent&&lo.parent.provides;a===n&&(n=lo.provides=Object.create(a)),n[e]=t}}function Sn(e,t,n=!1){const a=Bf();if(a||Zm){let r=Zm?Zm._context.provides:a?a.parent==null||a.ce?a.vnode.appContext&&a.vnode.appContext.provides:a.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return n&&Mn(t)?t.call(a&&a.proxy):t}}const e8={},t8=()=>Object.create(e8),n8=e=>Object.getPrototypeOf(e)===e8;function PZ(e,t,n,a=!1){const r={},s=t8();e.propsDefaults=Object.create(null),a8(e,t,r,s);for(const o in e.propsOptions[0])o in r||(r[o]=void 0);n?e.props=a?r:EL(r):e.type.props?e.props=r:e.props=s,e.attrs=s}function DZ(e,t,n,a){const{props:r,attrs:s,vnode:{patchFlag:o}}=e,i=gn(r),[c]=e.propsOptions;let A=!1;if((a||o>0)&&!(o&16)){if(o&8){const d=e.vnode.dynamicProps;for(let f=0;f<d.length;f++){let m=d[f];if(Z2(e.emitsOptions,m))continue;const h=t[m];if(c)if(La(s,m))h!==s[m]&&(s[m]=h,A=!0);else{const v=Lo(m);r[v]=mS(c,i,v,h,e,!1)}else h!==s[m]&&(s[m]=h,A=!0)}}}else{a8(e,t,r,s)&&(A=!0);let d;for(const f in i)(!t||!La(t,f)&&((d=Kd(f))===f||!La(t,d)))&&(c?n&&(n[f]!==void 0||n[d]!==void 0)&&(r[f]=mS(c,i,f,void 0,e,!0)):delete r[f]);if(s!==i)for(const f in s)(!t||!La(t,f))&&(delete s[f],A=!0)}A&&sc(e.attrs,"set","")}function a8(e,t,n,a){const[r,s]=e.propsOptions;let o=!1,i;if(t)for(let c in t){if(kp(c))continue;const A=t[c];let d;r&&La(r,d=Lo(c))?!s||!s.includes(d)?n[d]=A:(i||(i={}))[d]=A:Z2(e.emitsOptions,c)||(!(c in a)||A!==a[c])&&(a[c]=A,o=!0)}if(s){const c=gn(n),A=i||Za;for(let d=0;d<s.length;d++){const f=s[d];n[f]=mS(r,c,f,A[f],e,!La(A,f))}}return o}function mS(e,t,n,a,r,s){const o=e[n];if(o!=null){const i=La(o,"default");if(i&&a===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Mn(c)){const{propsDefaults:A}=r;if(n in A)a=A[n];else{const d=tg(r);a=A[n]=c.call(null,t),d()}}else a=c;r.ce&&r.ce._setProp(n,a)}o[0]&&(s&&!i?a=!1:o[1]&&(a===""||a===Kd(n))&&(a=!0))}return a}const UZ=new WeakMap;function r8(e,t,n=!1){const a=n?UZ:t.propsCache,r=a.get(e);if(r)return r;const s=e.props,o={},i=[];let c=!1;if(!Mn(e)){const d=f=>{c=!0;const[m,h]=r8(f,t,!0);vs(o,m),h&&i.push(...h)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!s&&!c)return qa(e)&&a.set(e,jm),jm;if(wn(s))for(let d=0;d<s.length;d++){const f=Lo(s[d]);vP(f)&&(o[f]=Za)}else if(s)for(const d in s){const f=Lo(d);if(vP(f)){const m=s[d],h=o[f]=wn(m)||Mn(m)?{type:m}:vs({},m),v=h.type;let y=!1,g=!0;if(wn(v))for(let w=0;w<v.length;++w){const b=v[w],x=Mn(b)&&b.name;if(x==="Boolean"){y=!0;break}else x==="String"&&(g=!1)}else y=Mn(v)&&v.name==="Boolean";h[0]=y,h[1]=g,(y||La(h,"default"))&&i.push(f)}}const A=[o,i];return qa(e)&&a.set(e,A),A}function vP(e){return e[0]!=="$"&&!kp(e)}const tk=e=>e==="_"||e==="_ctx"||e==="$stable",nk=e=>wn(e)?e.map(hl):[hl(e)],RZ=(e,t,n)=>{if(t._n)return t;const a=u((...r)=>nk(t(...r)),n);return a._c=!1,a},s8=(e,t,n)=>{const a=e._ctx;for(const r in e){if(tk(r))continue;const s=e[r];if(Mn(s))t[r]=RZ(r,s,a);else if(s!=null){const o=nk(s);t[r]=()=>o}}},o8=(e,t)=>{const n=nk(t);e.slots.default=()=>n},i8=(e,t,n)=>{for(const a in t)(n||!tk(a))&&(e[a]=t[a])},NZ=(e,t,n)=>{const a=e.slots=t8();if(e.vnode.shapeFlag&32){const r=t._;r?(i8(a,t,n),n&&sL(a,"_",r,!0)):s8(t,a)}else t&&o8(e,t)},VZ=(e,t,n)=>{const{vnode:a,slots:r}=e;let s=!0,o=Za;if(a.shapeFlag&32){const i=t._;i?n&&i===1?s=!1:i8(r,t,n):(s=!t.$stable,s8(t,r)),o=t}else t&&(o8(e,t),o={default:1});if(s)for(const i in r)!tk(i)&&o[i]==null&&delete r[i]},us=aee;function LZ(e){return MZ(e)}function MZ(e,t){const n=z2();n.__VUE__=!0;const{insert:a,remove:r,patchProp:s,createElement:o,createText:i,createComment:c,setText:A,setElementText:d,parentNode:f,nextSibling:m,setScopeId:h=yu,insertStaticContent:v}=e,y=(W,de,Ae,Ce=null,De=null,xe=null,ke=void 0,Ee=null,ye=!!de.dynamicChildren)=>{if(W===de)return;W&&!pl(W,de)&&(Ce=Y(W),D(W,De,xe,!0),W=null),de.patchFlag===-2&&(ye=!1,de.dynamicChildren=null);const{type:we,ref:at,shapeFlag:Je}=de;switch(we){case eg:g(W,de,Ae,Ce);break;case ts:w(W,de,Ae,Ce);break;case Sx:W==null&&b(de,Ae,Ce,ke);break;case ze:N(W,de,Ae,Ce,De,xe,ke,Ee,ye);break;default:Je&1?U(W,de,Ae,Ce,De,xe,ke,Ee,ye):Je&6?L(W,de,Ae,Ce,De,xe,ke,Ee,ye):(Je&64||Je&128)&&we.process(W,de,Ae,Ce,De,xe,ke,Ee,ye,ae)}at!=null&&De?Pp(at,W&&W.ref,xe,de||W,!de):at==null&&W&&W.ref!=null&&Pp(W.ref,null,xe,W,!0)},g=(W,de,Ae,Ce)=>{if(W==null)a(de.el=i(de.children),Ae,Ce);else{const De=de.el=W.el;de.children!==W.children&&A(De,de.children)}},w=(W,de,Ae,Ce)=>{W==null?a(de.el=c(de.children||""),Ae,Ce):de.el=W.el},b=(W,de,Ae,Ce)=>{[W.el,W.anchor]=v(W.children,de,Ae,Ce,W.el,W.anchor)},x=({el:W,anchor:de},Ae,Ce)=>{let De;for(;W&&W!==de;)De=m(W),a(W,Ae,Ce),W=De;a(de,Ae,Ce)},T=({el:W,anchor:de})=>{let Ae;for(;W&&W!==de;)Ae=m(W),r(W),W=Ae;r(de)},U=(W,de,Ae,Ce,De,xe,ke,Ee,ye)=>{de.type==="svg"?ke="svg":de.type==="math"&&(ke="mathml"),W==null?k(de,Ae,Ce,De,xe,ke,Ee,ye):C(W,de,De,xe,ke,Ee,ye)},k=(W,de,Ae,Ce,De,xe,ke,Ee)=>{let ye,we;const{props:at,shapeFlag:Je,transition:rt,dirs:it}=W;if(ye=W.el=o(W.type,xe,at&&at.is,at),Je&8?d(ye,W.children):Je&16&&E(W.children,ye,null,Ce,De,Cx(W,xe),ke,Ee),it&&vA(W,null,Ce,"created"),S(ye,W,W.scopeId,ke,Ce),at){for(const Ve in at)Ve!=="value"&&!kp(Ve)&&s(ye,Ve,null,at[Ve],xe,Ce);"value"in at&&s(ye,"value",null,at.value,xe),(we=at.onVnodeBeforeMount)&&Mi(we,Ce,W)}it&&vA(W,null,Ce,"beforeMount");const Ie=OZ(De,rt);Ie&&rt.beforeEnter(ye),a(ye,de,Ae),((we=at&&at.onVnodeMounted)||Ie||it)&&us(()=>{we&&Mi(we,Ce,W),Ie&&rt.enter(ye),it&&vA(W,null,Ce,"mounted")},De)},S=(W,de,Ae,Ce,De)=>{if(Ae&&h(W,Ae),Ce)for(let xe=0;xe<Ce.length;xe++)h(W,Ce[xe]);if(De){let xe=De.subTree;if(de===xe||h_(xe.type)&&(xe.ssContent===de||xe.ssFallback===de)){const ke=De.vnode;S(W,ke,ke.scopeId,ke.slotScopeIds,De.parent)}}},E=(W,de,Ae,Ce,De,xe,ke,Ee,ye=0)=>{for(let we=ye;we<W.length;we++){const at=W[we]=Ee?ad(W[we]):hl(W[we]);y(null,at,de,Ae,Ce,De,xe,ke,Ee)}},C=(W,de,Ae,Ce,De,xe,ke)=>{const Ee=de.el=W.el;let{patchFlag:ye,dynamicChildren:we,dirs:at}=de;ye|=W.patchFlag&16;const Je=W.props||Za,rt=de.props||Za;let it;if(Ae&&pA(Ae,!1),(it=rt.onVnodeBeforeUpdate)&&Mi(it,Ae,de,W),at&&vA(de,W,Ae,"beforeUpdate"),Ae&&pA(Ae,!0),(Je.innerHTML&&rt.innerHTML==null||Je.textContent&&rt.textContent==null)&&d(Ee,""),we?P(W.dynamicChildren,we,Ee,Ae,Ce,Cx(de,De),xe):ke||ce(W,de,Ee,null,Ae,Ce,Cx(de,De),xe,!1),ye>0){if(ye&16)F(Ee,Je,rt,Ae,De);else if(ye&2&&Je.class!==rt.class&&s(Ee,"class",null,rt.class,De),ye&4&&s(Ee,"style",Je.style,rt.style,De),ye&8){const Ie=de.dynamicProps;for(let Ve=0;Ve<Ie.length;Ve++){const ft=Ie[Ve],Ft=Je[ft],tt=rt[ft];(tt!==Ft||ft==="value")&&s(Ee,ft,Ft,tt,De,Ae)}}ye&1&&W.children!==de.children&&d(Ee,de.children)}else!ke&&we==null&&F(Ee,Je,rt,Ae,De);((it=rt.onVnodeUpdated)||at)&&us(()=>{it&&Mi(it,Ae,de,W),at&&vA(de,W,Ae,"updated")},Ce)},P=(W,de,Ae,Ce,De,xe,ke)=>{for(let Ee=0;Ee<de.length;Ee++){const ye=W[Ee],we=de[Ee],at=ye.el&&(ye.type===ze||!pl(ye,we)||ye.shapeFlag&198)?f(ye.el):Ae;y(ye,we,at,null,Ce,De,xe,ke,!0)}},F=(W,de,Ae,Ce,De)=>{if(de!==Ae){if(de!==Za)for(const xe in de)!kp(xe)&&!(xe in Ae)&&s(W,xe,de[xe],null,De,Ce);for(const xe in Ae){if(kp(xe))continue;const ke=Ae[xe],Ee=de[xe];ke!==Ee&&xe!=="value"&&s(W,xe,Ee,ke,De,Ce)}"value"in Ae&&s(W,"value",de.value,Ae.value,De)}},N=(W,de,Ae,Ce,De,xe,ke,Ee,ye)=>{const we=de.el=W?W.el:i(""),at=de.anchor=W?W.anchor:i("");let{patchFlag:Je,dynamicChildren:rt,slotScopeIds:it}=de;it&&(Ee=Ee?Ee.concat(it):it),W==null?(a(we,Ae,Ce),a(at,Ae,Ce),E(de.children||[],Ae,at,De,xe,ke,Ee,ye)):Je>0&&Je&64&&rt&&W.dynamicChildren?(P(W.dynamicChildren,rt,Ae,De,xe,ke,Ee),(de.key!=null||De&&de===De.subTree)&&ak(W,de,!0)):ce(W,de,Ae,at,De,xe,ke,Ee,ye)},L=(W,de,Ae,Ce,De,xe,ke,Ee,ye)=>{de.slotScopeIds=Ee,W==null?de.shapeFlag&512?De.ctx.activate(de,Ae,Ce,ke,ye):ie(de,Ae,Ce,De,xe,ke,ye):le(W,de,ye)},ie=(W,de,Ae,Ce,De,xe,ke)=>{const Ee=W.component=lee(W,Ce,De);if(j2(W)&&(Ee.ctx.renderer=ae),uee(Ee,!1,ke),Ee.asyncDep){if(De&&De.registerDep(Ee,Q,ke),!W.el){const ye=Ee.subTree=l(ts);w(null,ye,de,Ae),W.placeholder=ye.el}}else Q(Ee,W,de,Ae,De,xe,ke)},le=(W,de,Ae)=>{const Ce=de.component=W.component;if(XZ(W,de,Ae))if(Ce.asyncDep&&!Ce.asyncResolved){Z(Ce,de,Ae);return}else Ce.next=de,Ce.update();else de.el=W.el,Ce.vnode=de},Q=(W,de,Ae,Ce,De,xe,ke)=>{const Ee=()=>{if(W.isMounted){let{next:Je,bu:rt,u:it,parent:Ie,vnode:Ve}=W;{const pt=l8(W);if(pt){Je&&(Je.el=Ve.el,Z(W,Je,ke)),pt.asyncDep.then(()=>{W.isUnmounted||Ee()});return}}let ft=Je,Ft;pA(W,!1),Je?(Je.el=Ve.el,Z(W,Je,ke)):Je=Ve,rt&&Ym(rt),(Ft=Je.props&&Je.props.onVnodeBeforeUpdate)&&Mi(Ft,Ie,Je,Ve),pA(W,!0);const tt=pP(W),Ge=W.subTree;W.subTree=tt,y(Ge,tt,f(Ge.el),Y(Ge),W,De,xe),Je.el=tt.el,ft===null&&sk(W,tt.el),it&&us(it,De),(Ft=Je.props&&Je.props.onVnodeUpdated)&&us(()=>Mi(Ft,Ie,Je,Ve),De)}else{let Je;const{el:rt,props:it}=de,{bm:Ie,m:Ve,parent:ft,root:Ft,type:tt}=W,Ge=GA(de);pA(W,!1),Ie&&Ym(Ie),!Ge&&(Je=it&&it.onVnodeBeforeMount)&&Mi(Je,ft,de),pA(W,!0);{Ft.ce&&Ft.ce._def.shadowRoot!==!1&&Ft.ce._injectChildStyle(tt);const pt=W.subTree=pP(W);y(null,pt,Ae,Ce,W,De,xe),de.el=pt.el}if(Ve&&us(Ve,De),!Ge&&(Je=it&&it.onVnodeMounted)){const pt=de;us(()=>Mi(Je,ft,pt),De)}(de.shapeFlag&256||ft&&GA(ft.vnode)&&ft.vnode.shapeFlag&256)&&W.a&&us(W.a,De),W.isMounted=!0,de=Ae=Ce=null}};W.scope.on();const ye=W.effect=new AL(Ee);W.scope.off();const we=W.update=ye.run.bind(ye),at=W.job=ye.runIfDirty.bind(ye);at.i=W,at.id=W.uid,ye.scheduler=()=>JB(at),pA(W,!0),we()},Z=(W,de,Ae)=>{de.component=W;const Ce=W.vnode.props;W.vnode=de,W.next=null,DZ(W,de.props,Ce,Ae),VZ(W,de.children,Ae),yc(),sP(W),_c()},ce=(W,de,Ae,Ce,De,xe,ke,Ee,ye=!1)=>{const we=W&&W.children,at=W?W.shapeFlag:0,Je=de.children,{patchFlag:rt,shapeFlag:it}=de;if(rt>0){if(rt&128){se(we,Je,Ae,Ce,De,xe,ke,Ee,ye);return}else if(rt&256){J(we,Je,Ae,Ce,De,xe,ke,Ee,ye);return}}it&8?(at&16&&te(we,De,xe),Je!==we&&d(Ae,Je)):at&16?it&16?se(we,Je,Ae,Ce,De,xe,ke,Ee,ye):te(we,De,xe,!0):(at&8&&d(Ae,""),it&16&&E(Je,Ae,Ce,De,xe,ke,Ee,ye))},J=(W,de,Ae,Ce,De,xe,ke,Ee,ye)=>{W=W||jm,de=de||jm;const we=W.length,at=de.length,Je=Math.min(we,at);let rt;for(rt=0;rt<Je;rt++){const it=de[rt]=ye?ad(de[rt]):hl(de[rt]);y(W[rt],it,Ae,null,De,xe,ke,Ee,ye)}we>at?te(W,De,xe,!0,!1,Je):E(de,Ae,Ce,De,xe,ke,Ee,ye,Je)},se=(W,de,Ae,Ce,De,xe,ke,Ee,ye)=>{let we=0;const at=de.length;let Je=W.length-1,rt=at-1;for(;we<=Je&&we<=rt;){const it=W[we],Ie=de[we]=ye?ad(de[we]):hl(de[we]);if(pl(it,Ie))y(it,Ie,Ae,null,De,xe,ke,Ee,ye);else break;we++}for(;we<=Je&&we<=rt;){const it=W[Je],Ie=de[rt]=ye?ad(de[rt]):hl(de[rt]);if(pl(it,Ie))y(it,Ie,Ae,null,De,xe,ke,Ee,ye);else break;Je--,rt--}if(we>Je){if(we<=rt){const it=rt+1,Ie=it<at?de[it].el:Ce;for(;we<=rt;)y(null,de[we]=ye?ad(de[we]):hl(de[we]),Ae,Ie,De,xe,ke,Ee,ye),we++}}else if(we>rt)for(;we<=Je;)D(W[we],De,xe,!0),we++;else{const it=we,Ie=we,Ve=new Map;for(we=Ie;we<=rt;we++){const nn=de[we]=ye?ad(de[we]):hl(de[we]);nn.key!=null&&Ve.set(nn.key,we)}let ft,Ft=0;const tt=rt-Ie+1;let Ge=!1,pt=0;const ht=new Array(tt);for(we=0;we<tt;we++)ht[we]=0;for(we=it;we<=Je;we++){const nn=W[we];if(Ft>=tt){D(nn,De,xe,!0);continue}let yn;if(nn.key!=null)yn=Ve.get(nn.key);else for(ft=Ie;ft<=rt;ft++)if(ht[ft-Ie]===0&&pl(nn,de[ft])){yn=ft;break}yn===void 0?D(nn,De,xe,!0):(ht[yn-Ie]=we+1,yn>=pt?pt=yn:Ge=!0,y(nn,de[yn],Ae,null,De,xe,ke,Ee,ye),Ft++)}const Nt=Ge?HZ(ht):jm;for(ft=Nt.length-1,we=tt-1;we>=0;we--){const nn=Ie+we,yn=de[nn],qn=de[nn+1],$t=nn+1<at?qn.el||qn.placeholder:Ce;ht[we]===0?y(null,yn,Ae,$t,De,xe,ke,Ee,ye):Ge&&(ft<0||we!==Nt[ft]?G(yn,Ae,$t,2):ft--)}}},G=(W,de,Ae,Ce,De=null)=>{const{el:xe,type:ke,transition:Ee,children:ye,shapeFlag:we}=W;if(we&6){G(W.component.subTree,de,Ae,Ce);return}if(we&128){W.suspense.move(de,Ae,Ce);return}if(we&64){ke.move(W,de,Ae,ae);return}if(ke===ze){a(xe,de,Ae);for(let Je=0;Je<ye.length;Je++)G(ye[Je],de,Ae,Ce);a(W.anchor,de,Ae);return}if(ke===Sx){x(W,de,Ae);return}if(Ce!==2&&we&1&&Ee)if(Ce===0)Ee.beforeEnter(xe),a(xe,de,Ae),us(()=>Ee.enter(xe),De);else{const{leave:Je,delayLeave:rt,afterLeave:it}=Ee,Ie=()=>{W.ctx.isUnmounted?r(xe):a(xe,de,Ae)},Ve=()=>{xe._isLeaving&&xe[rc](!0),Je(xe,()=>{Ie(),it&&it()})};rt?rt(xe,Ie,Ve):Ve()}else a(xe,de,Ae)},D=(W,de,Ae,Ce=!1,De=!1)=>{const{type:xe,props:ke,ref:Ee,children:ye,dynamicChildren:we,shapeFlag:at,patchFlag:Je,dirs:rt,cacheIndex:it}=W;if(Je===-2&&(De=!1),Ee!=null&&(yc(),Pp(Ee,null,Ae,W,!0),_c()),it!=null&&(de.renderCache[it]=void 0),at&256){de.ctx.deactivate(W);return}const Ie=at&1&&rt,Ve=!GA(W);let ft;if(Ve&&(ft=ke&&ke.onVnodeBeforeUnmount)&&Mi(ft,de,W),at&6)H(W.component,Ae,Ce);else{if(at&128){W.suspense.unmount(Ae,Ce);return}Ie&&vA(W,null,de,"beforeUnmount"),at&64?W.type.remove(W,de,Ae,ae,Ce):we&&!we.hasOnce&&(xe!==ze||Je>0&&Je&64)?te(we,de,Ae,!1,!0):(xe===ze&&Je&384||!De&&at&16)&&te(ye,de,Ae),Ce&&j(W)}(Ve&&(ft=ke&&ke.onVnodeUnmounted)||Ie)&&us(()=>{ft&&Mi(ft,de,W),Ie&&vA(W,null,de,"unmounted")},Ae)},j=W=>{const{type:de,el:Ae,anchor:Ce,transition:De}=W;if(de===ze){ne(Ae,Ce);return}if(de===Sx){T(W);return}const xe=()=>{r(Ae),De&&!De.persisted&&De.afterLeave&&De.afterLeave()};if(W.shapeFlag&1&&De&&!De.persisted){const{leave:ke,delayLeave:Ee}=De,ye=()=>ke(Ae,xe);Ee?Ee(W.el,xe,ye):ye()}else xe()},ne=(W,de)=>{let Ae;for(;W!==de;)Ae=m(W),r(W),W=Ae;r(de)},H=(W,de,Ae)=>{const{bum:Ce,scope:De,job:xe,subTree:ke,um:Ee,m:ye,a:we}=W;m_(ye),m_(we),Ce&&Ym(Ce),De.stop(),xe&&(xe.flags|=8,D(ke,W,de,Ae)),Ee&&us(Ee,de),us(()=>{W.isUnmounted=!0},de)},te=(W,de,Ae,Ce=!1,De=!1,xe=0)=>{for(let ke=xe;ke<W.length;ke++)D(W[ke],de,Ae,Ce,De)},Y=W=>{if(W.shapeFlag&6)return Y(W.component.subTree);if(W.shapeFlag&128)return W.suspense.next();const de=m(W.anchor||W.el),Ae=de&&de[RL];return Ae?m(Ae):de};let K=!1;const X=(W,de,Ae)=>{W==null?de._vnode&&D(de._vnode,null,null,!0):y(de._vnode||null,W,de,null,null,null,Ae),de._vnode=W,K||(K=!0,sP(),PL(),K=!1)},ae={p:y,um:D,m:G,r:j,mt:ie,mc:E,pc:ce,pbc:P,n:Y,o:e};return{render:X,hydrate:void 0,createApp:FZ(X)}}function Cx({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function pA({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function OZ(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function ak(e,t,n=!1){const a=e.children,r=t.children;if(wn(a)&&wn(r))for(let s=0;s<a.length;s++){const o=a[s];let i=r[s];i.shapeFlag&1&&!i.dynamicChildren&&((i.patchFlag<=0||i.patchFlag===32)&&(i=r[s]=ad(r[s]),i.el=o.el),!n&&i.patchFlag!==-2&&ak(o,i)),i.type===eg&&i.patchFlag!==-1&&(i.el=o.el),i.type===ts&&!i.el&&(i.el=o.el)}}function HZ(e){const t=e.slice(),n=[0];let a,r,s,o,i;const c=e.length;for(a=0;a<c;a++){const A=e[a];if(A!==0){if(r=n[n.length-1],e[r]<A){t[a]=r,n.push(a);continue}for(s=0,o=n.length-1;s<o;)i=s+o>>1,e[n[i]]<A?s=i+1:o=i;A<e[n[s]]&&(s>0&&(t[a]=n[s-1]),n[s]=a)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=t[o];return n}function l8(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:l8(t)}function m_(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const $Z=Symbol.for("v-scx"),QZ=()=>Sn($Z);function Ar(e,t){return rk(e,null,t)}function We(e,t,n){return rk(e,t,n)}function rk(e,t,n=Za){const{immediate:a,deep:r,flush:s,once:o}=n,i=vs({},n),c=t&&a||!t&&s!=="post";let A;if(A0){if(s==="sync"){const h=QZ();A=h.__watcherHandles||(h.__watcherHandles=[])}else if(!c){const h=()=>{};return h.stop=yu,h.resume=yu,h.pause=yu,h}}const d=lo;i.call=(h,v,y)=>Ul(h,d,v,y);let f=!1;s==="post"?i.scheduler=h=>{us(h,d&&d.suspense)}:s!=="sync"&&(f=!0,i.scheduler=(h,v)=>{v?h():JB(h)}),i.augmentJob=h=>{t&&(h.flags|=4),f&&(h.flags|=2,d&&(h.id=d.uid,h.i=d))};const m=uZ(e,t,i);return A0&&(A?A.push(m):c&&m()),m}function GZ(e,t,n){const a=this.proxy,r=dr(e)?e.includes(".")?u8(a,e):()=>a[e]:e.bind(a,a);let s;Mn(t)?s=t:(s=t.handler,n=t);const o=tg(this),i=rk(r,s.bind(a),n);return o(),i}function u8(e,t){const n=t.split(".");return()=>{let a=e;for(let r=0;r<n.length&&a;r++)a=a[n[r]];return a}}const zZ=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Lo(t)}Modifiers`]||e[`${Kd(t)}Modifiers`];function KZ(e,t,...n){if(e.isUnmounted)return;const a=e.vnode.props||Za;let r=n;const s=t.startsWith("update:"),o=s&&zZ(a,t.slice(7));o&&(o.trim&&(r=n.map(d=>dr(d)?d.trim():d)),o.number&&(r=n.map(s_)));let i,c=a[i=vx(t)]||a[i=vx(Lo(t))];!c&&s&&(c=a[i=vx(Kd(t))]),c&&Ul(c,e,6,r);const A=a[i+"Once"];if(A){if(!e.emitted)e.emitted={};else if(e.emitted[i])return;e.emitted[i]=!0,Ul(A,e,6,r)}}const WZ=new WeakMap;function c8(e,t,n=!1){const a=n?WZ:t.emitsCache,r=a.get(e);if(r!==void 0)return r;const s=e.emits;let o={},i=!1;if(!Mn(e)){const c=A=>{const d=c8(A,t,!0);d&&(i=!0,vs(o,d))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!s&&!i?(qa(e)&&a.set(e,null),null):(wn(s)?s.forEach(c=>o[c]=null):vs(o,s),qa(e)&&a.set(e,o),o)}function Z2(e,t){return!e||!$2(t)?!1:(t=t.slice(2).replace(/Once$/,""),La(e,t[0].toLowerCase()+t.slice(1))||La(e,Kd(t))||La(e,t))}function pP(e){const{type:t,vnode:n,proxy:a,withProxy:r,propsOptions:[s],slots:o,attrs:i,emit:c,render:A,renderCache:d,props:f,data:m,setupState:h,ctx:v,inheritAttrs:y}=e,g=d_(e);let w,b;try{if(n.shapeFlag&4){const T=r||a,U=T;w=hl(A.call(U,T,d,f,h,m,v)),b=i}else{const T=t;w=hl(T.length>1?T(f,{attrs:i,slots:o,emit:c}):T(f,null)),b=t.props?i:qZ(i)}}catch(T){Up.length=0,J0(T,e,1),w=l(ts)}let x=w;if(b&&y!==!1){const T=Object.keys(b),{shapeFlag:U}=x;T.length&&U&7&&(s&&T.some($B)&&(b=YZ(b,s)),x=Cu(x,b,!1,!0))}return n.dirs&&(x=Cu(x,null,!1,!0),x.dirs=x.dirs?x.dirs.concat(n.dirs):n.dirs),n.transition&&kd(x,n.transition),w=x,d_(g),w}function jZ(e,t=!0){let n;for(let a=0;a<e.length;a++){const r=e[a];if(Td(r)){if(r.type!==ts||r.children==="v-if"){if(n)return;n=r}}else return}return n}const qZ=e=>{let t;for(const n in e)(n==="class"||n==="style"||$2(n))&&((t||(t={}))[n]=e[n]);return t},YZ=(e,t)=>{const n={};for(const a in e)(!$B(a)||!(a.slice(9)in t))&&(n[a]=e[a]);return n};function XZ(e,t,n){const{props:a,children:r,component:s}=e,{props:o,children:i,patchFlag:c}=t,A=s.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return a?gP(a,o,A):!!o;if(c&8){const d=t.dynamicProps;for(let f=0;f<d.length;f++){const m=d[f];if(o[m]!==a[m]&&!Z2(A,m))return!0}}}else return(r||i)&&(!i||!i.$stable)?!0:a===o?!1:a?o?gP(a,o,A):!0:!!o;return!1}function gP(e,t,n){const a=Object.keys(t);if(a.length!==Object.keys(e).length)return!0;for(let r=0;r<a.length;r++){const s=a[r];if(t[s]!==e[s]&&!Z2(n,s))return!0}return!1}function sk({vnode:e,parent:t},n){for(;t;){const a=t.subTree;if(a.suspense&&a.suspense.activeBranch===e&&(a.el=e.el),a===e)(e=t.vnode).el=n,t=t.parent;else break}}const h_=e=>e.__isSuspense;let hS=0;const JZ={name:"Suspense",__isSuspense:!0,process(e,t,n,a,r,s,o,i,c,A){if(e==null)ZZ(t,n,a,r,s,o,i,c,A);else{if(s&&s.deps>0&&!e.suspense.isInFallback){t.suspense=e.suspense,t.suspense.vnode=t,t.el=e.el;return}eee(e,t,n,a,r,o,i,c,A)}},hydrate:tee,normalize:nee},vS=JZ;function d0(e,t){const n=e.props&&e.props[t];Mn(n)&&n()}function ZZ(e,t,n,a,r,s,o,i,c){const{p:A,o:{createElement:d}}=c,f=d("div"),m=e.suspense=d8(e,r,a,t,f,n,s,o,i,c);A(null,m.pendingBranch=e.ssContent,f,null,a,m,s,o),m.deps>0?(d0(e,"onPending"),d0(e,"onFallback"),A(null,e.ssFallback,t,n,a,null,s,o),eh(m,e.ssFallback)):m.resolve(!1,!0)}function eee(e,t,n,a,r,s,o,i,{p:c,um:A,o:{createElement:d}}){const f=t.suspense=e.suspense;f.vnode=t,t.el=e.el;const m=t.ssContent,h=t.ssFallback,{activeBranch:v,pendingBranch:y,isInFallback:g,isHydrating:w}=f;if(y)f.pendingBranch=m,pl(y,m)?(c(y,m,f.hiddenContainer,null,r,f,s,o,i),f.deps<=0?f.resolve():g&&(w||(c(v,h,n,a,r,null,s,o,i),eh(f,h)))):(f.pendingId=hS++,w?(f.isHydrating=!1,f.activeBranch=y):A(y,r,f),f.deps=0,f.effects.length=0,f.hiddenContainer=d("div"),g?(c(null,m,f.hiddenContainer,null,r,f,s,o,i),f.deps<=0?f.resolve():(c(v,h,n,a,r,null,s,o,i),eh(f,h))):v&&pl(v,m)?(c(v,m,n,a,r,f,s,o,i),f.resolve(!0)):(c(null,m,f.hiddenContainer,null,r,f,s,o,i),f.deps<=0&&f.resolve()));else if(v&&pl(v,m))c(v,m,n,a,r,f,s,o,i),eh(f,m);else if(d0(t,"onPending"),f.pendingBranch=m,m.shapeFlag&512?f.pendingId=m.component.suspenseId:f.pendingId=hS++,c(null,m,f.hiddenContainer,null,r,f,s,o,i),f.deps<=0)f.resolve();else{const{timeout:b,pendingId:x}=f;b>0?setTimeout(()=>{f.pendingId===x&&f.fallback(h)},b):b===0&&f.fallback(h)}}function d8(e,t,n,a,r,s,o,i,c,A,d=!1){const{p:f,m,um:h,n:v,o:{parentNode:y,remove:g}}=A;let w;const b=ree(e);b&&t&&t.pendingBranch&&(w=t.pendingId,t.deps++);const x=e.props?oL(e.props.timeout):void 0,T=s,U={vnode:e,parent:t,parentComponent:n,namespace:o,container:a,hiddenContainer:r,deps:0,pendingId:hS++,timeout:typeof x=="number"?x:-1,activeBranch:null,pendingBranch:null,isInFallback:!d,isHydrating:d,isUnmounted:!1,effects:[],resolve(k=!1,S=!1){const{vnode:E,activeBranch:C,pendingBranch:P,pendingId:F,effects:N,parentComponent:L,container:ie}=U;let le=!1;U.isHydrating?U.isHydrating=!1:k||(le=C&&P.transition&&P.transition.mode==="out-in",le&&(C.transition.afterLeave=()=>{F===U.pendingId&&(m(P,ie,s===T?v(C):s,0),uS(N))}),C&&(y(C.el)===ie&&(s=v(C)),h(C,L,U,!0)),le||m(P,ie,s,0)),eh(U,P),U.pendingBranch=null,U.isInFallback=!1;let Q=U.parent,Z=!1;for(;Q;){if(Q.pendingBranch){Q.effects.push(...N),Z=!0;break}Q=Q.parent}!Z&&!le&&uS(N),U.effects=[],b&&t&&t.pendingBranch&&w===t.pendingId&&(t.deps--,t.deps===0&&!S&&t.resolve()),d0(E,"onResolve")},fallback(k){if(!U.pendingBranch)return;const{vnode:S,activeBranch:E,parentComponent:C,container:P,namespace:F}=U;d0(S,"onFallback");const N=v(E),L=()=>{U.isInFallback&&(f(null,k,P,N,C,null,F,i,c),eh(U,k))},ie=k.transition&&k.transition.mode==="out-in";ie&&(E.transition.afterLeave=L),U.isInFallback=!0,h(E,C,null,!0),ie||L()},move(k,S,E){U.activeBranch&&m(U.activeBranch,k,S,E),U.container=k},next(){return U.activeBranch&&v(U.activeBranch)},registerDep(k,S,E){const C=!!U.pendingBranch;C&&U.deps++;const P=k.vnode.el;k.asyncDep.catch(F=>{J0(F,k,0)}).then(F=>{if(k.isUnmounted||U.isUnmounted||U.pendingId!==k.suspenseId)return;k.asyncResolved=!0;const{vnode:N}=k;gS(k,F),P&&(N.el=P);const L=!P&&k.subTree.el;S(k,N,y(P||k.subTree.el),P?null:v(k.subTree),U,o,E),L&&g(L),sk(k,N.el),C&&--U.deps===0&&U.resolve()})},unmount(k,S){U.isUnmounted=!0,U.activeBranch&&h(U.activeBranch,n,k,S),U.pendingBranch&&h(U.pendingBranch,n,k,S)}};return U}function tee(e,t,n,a,r,s,o,i,c){const A=t.suspense=d8(t,a,n,e.parentNode,document.createElement("div"),null,r,s,o,i,!0),d=c(e,A.pendingBranch=t.ssContent,n,A,s,o);return A.deps===0&&A.resolve(!1,!0),d}function nee(e){const{shapeFlag:t,children:n}=e,a=t&32;e.ssContent=yP(a?n.default:n),e.ssFallback=a?yP(n.fallback):l(ts)}function yP(e){let t;if(Mn(e)){const n=vh&&e._c;n&&(e._d=!1,R()),e=e(),n&&(e._d=!0,t=Zo,A8())}return wn(e)&&(e=jZ(e)),e=hl(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(n=>n!==e)),e}function aee(e,t){t&&t.pendingBranch?wn(e)?t.effects.push(...e):t.effects.push(e):uS(e)}function eh(e,t){e.activeBranch=t;const{vnode:n,parentComponent:a}=e;let r=t.el;for(;!r&&t.component;)t=t.component.subTree,r=t.el;n.el=r,a&&a.subTree===n&&(a.vnode.el=r,sk(a,r))}function ree(e){const t=e.props&&e.props.suspensible;return t!=null&&t!==!1}const ze=Symbol.for("v-fgt"),eg=Symbol.for("v-txt"),ts=Symbol.for("v-cmt"),Sx=Symbol.for("v-stc"),Up=[];let Zo=null;function R(e=!1){Up.push(Zo=e?null:[])}function A8(){Up.pop(),Zo=Up[Up.length-1]||null}let vh=1;function v_(e,t=!1){vh+=e,e<0&&Zo&&t&&(Zo.hasOnce=!0)}function f8(e){return e.dynamicChildren=vh>0?Zo||jm:null,A8(),vh>0&&Zo&&Zo.push(e),e}function me(e,t,n,a,r,s){return f8(p(e,t,n,a,r,s,!0))}function ve(e,t,n,a,r){return f8(l(e,t,n,a,r,!0))}function Td(e){return e?e.__v_isVNode===!0:!1}function pl(e,t){return e.type===t.type&&e.key===t.key}const m8=({key:e})=>e??null,Vy=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?dr(e)||zr(e)||Mn(e)?{i:$s,r:e,k:t,f:!!n}:e:null);function p(e,t=null,n=null,a=0,r=null,s=e===ze?0:1,o=!1,i=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&m8(t),ref:t&&Vy(t),scopeId:UL,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:a,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:$s};return i?(ok(c,n),s&128&&e.normalize(c)):n&&(c.shapeFlag|=dr(n)?8:16),vh>0&&!o&&Zo&&(c.patchFlag>0||s&6)&&c.patchFlag!==32&&Zo.push(c),c}const l=see;function see(e,t=null,n=null,a=0,r=null,s=!1){if((!e||e===jL)&&(e=ts),Td(e)){const i=Cu(e,t,!0);return n&&ok(i,n),vh>0&&!s&&Zo&&(i.shapeFlag&6?Zo[Zo.indexOf(e)]=i:Zo.push(i)),i.patchFlag=-2,i}if(fee(e)&&(e=e.__vccOpts),t){t=Kl(t);let{class:i,style:c}=t;i&&!dr(i)&&(t.class=ct(i)),qa(c)&&(XB(c)&&!wn(c)&&(c=vs({},c)),t.style=Rt(c))}const o=dr(e)?1:h_(e)?128:NL(e)?64:qa(e)?4:Mn(e)?2:0;return p(e,t,n,a,r,o,s,!0)}function Kl(e){return e?XB(e)||n8(e)?vs({},e):e:null}function Cu(e,t,n=!1,a=!1){const{props:r,ref:s,patchFlag:o,children:i,transition:c}=e,A=t?Fe(r||{},t):r,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:A,key:A&&m8(A),ref:t&&t.ref?n&&s?wn(s)?s.concat(Vy(t)):[s,Vy(t)]:Vy(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ze?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Cu(e.ssContent),ssFallback:e.ssFallback&&Cu(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&a&&kd(d,c.clone(d)),d}function O(e=" ",t=0){return l(eg,null,e,t)}function _e(e="",t=!1){return t?(R(),ve(ts,null,e)):l(ts,null,e)}function hl(e){return e==null||typeof e=="boolean"?l(ts):wn(e)?l(ze,null,e.slice()):Td(e)?ad(e):l(eg,null,String(e))}function ad(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Cu(e)}function ok(e,t){let n=0;const{shapeFlag:a}=e;if(t==null)t=null;else if(wn(t))n=16;else if(typeof t=="object")if(a&65){const r=t.default;r&&(r._c&&(r._d=!1),ok(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!n8(t)?t._ctx=$s:r===3&&$s&&($s.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Mn(t)?(t={default:t,_ctx:$s},n=32):(t=String(t),a&64?(n=16,t=[O(t)]):n=8);e.children=t,e.shapeFlag|=n}function Fe(...e){const t={};for(let n=0;n<e.length;n++){const a=e[n];for(const r in a)if(r==="class")t.class!==a.class&&(t.class=ct([t.class,a.class]));else if(r==="style")t.style=Rt([t.style,a.style]);else if($2(r)){const s=t[r],o=a[r];o&&s!==o&&!(wn(s)&&s.includes(o))&&(t[r]=s?[].concat(s,o):o)}else r!==""&&(t[r]=a[r])}return t}function Mi(e,t,n,a=null){Ul(e,t,7,[n,a])}const oee=ZL();let iee=0;function lee(e,t,n){const a=e.type,r=(t?t.appContext:e.appContext)||oee,s={uid:iee++,vnode:e,type:a,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new cL(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:r8(a,r),emitsOptions:c8(a,r),emit:null,emitted:null,propsDefaults:Za,inheritAttrs:a.inheritAttrs,ctx:Za,data:Za,props:Za,attrs:Za,slots:Za,refs:Za,setupState:Za,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=KZ.bind(null,s),e.ce&&e.ce(s),s}let lo=null;const Bf=()=>lo||$s;let p_,pS;{const e=z2(),t=(n,a)=>{let r;return(r=e[n])||(r=e[n]=[]),r.push(a),s=>{r.length>1?r.forEach(o=>o(s)):r[0](s)}};p_=t("__VUE_INSTANCE_SETTERS__",n=>lo=n),pS=t("__VUE_SSR_SETTERS__",n=>A0=n)}const tg=e=>{const t=lo;return p_(e),e.scope.on(),()=>{e.scope.off(),p_(t)}},_P=()=>{lo&&lo.scope.off(),p_(null)};function h8(e){return e.vnode.shapeFlag&4}let A0=!1;function uee(e,t=!1,n=!1){t&&pS(t);const{props:a,children:r}=e.vnode,s=h8(e);PZ(e,a,s,t),NZ(e,r,n||t);const o=s?cee(e,t):void 0;return t&&pS(!1),o}function cee(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,CZ);const{setup:a}=n;if(a){yc();const r=e.setupContext=a.length>1?Aee(e):null,s=tg(e),o=X0(a,e,0,[e.props,r]),i=nL(o);if(_c(),s(),(i||e.sp)&&!GA(e)&&GL(e),i){if(o.then(_P,_P),t)return o.then(c=>{gS(e,c)}).catch(c=>{J0(c,e,0)});e.asyncDep=o}else gS(e,o)}else v8(e)}function gS(e,t,n){Mn(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:qa(t)&&(e.setupState=kL(t)),v8(e)}function v8(e,t,n){const a=e.type;e.render||(e.render=a.render||yu);{const r=tg(e);yc();try{SZ(e)}finally{_c(),r()}}}const dee={get(e,t){return so(e,"get",""),e[t]}};function Aee(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,dee),slots:e.slots,emit:e.emit,expose:t}}function ew(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(kL(i_(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Dp)return Dp[n](e)},has(t,n){return n in t||n in Dp}})):e.proxy}function yS(e,t=!0){return Mn(e)?e.displayName||e.name:e.name||t&&e.__name}function fee(e){return Mn(e)&&"__vccOpts"in e}const ee=(e,t)=>iZ(e,t,A0);function Wl(e,t,n){const a=(s,o,i)=>{v_(-1);try{return l(s,o,i)}finally{v_(1)}},r=arguments.length;return r===2?qa(t)&&!wn(t)?Td(t)?a(e,null,[t]):a(e,t):a(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Td(n)&&(n=[n]),a(e,t,n))}const mee="3.5.21";let _S;const wP=typeof window<"u"&&window.trustedTypes;if(wP)try{_S=wP.createPolicy("vue",{createHTML:e=>e})}catch{}const p8=_S?e=>_S.createHTML(e):e=>e,hee="http://www.w3.org/2000/svg",vee="http://www.w3.org/1998/Math/MathML",ac=typeof document<"u"?document:null,bP=ac&&ac.createElement("template"),pee={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,a)=>{const r=t==="svg"?ac.createElementNS(hee,e):t==="mathml"?ac.createElementNS(vee,e):n?ac.createElement(e,{is:n}):ac.createElement(e);return e==="select"&&a&&a.multiple!=null&&r.setAttribute("multiple",a.multiple),r},createText:e=>ac.createTextNode(e),createComment:e=>ac.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ac.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,a,r,s){const o=n?n.previousSibling:t.lastChild;if(r&&(r===s||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===s||!(r=r.nextSibling)););else{bP.innerHTML=p8(a==="svg"?`<svg>${e}</svg>`:a==="mathml"?`<math>${e}</math>`:e);const i=bP.content;if(a==="svg"||a==="mathml"){const c=i.firstChild;for(;c.firstChild;)i.appendChild(c.firstChild);i.removeChild(c)}t.insertBefore(i,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Wc="transition",zv="animation",ph=Symbol("_vtc"),g8={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},y8=vs({},OL,g8),gee=e=>(e.displayName="Transition",e.props=y8,e),Id=gee((e,{slots:t})=>Wl(hZ,_8(e),t)),gA=(e,t=[])=>{wn(e)?e.forEach(n=>n(...t)):e&&e(...t)},xP=e=>e?wn(e)?e.some(t=>t.length>1):e.length>1:!1;function _8(e){const t={};for(const N in e)N in g8||(t[N]=e[N]);if(e.css===!1)return t;const{name:n="v",type:a,duration:r,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:i=`${n}-enter-to`,appearFromClass:c=s,appearActiveClass:A=o,appearToClass:d=i,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:m=`${n}-leave-active`,leaveToClass:h=`${n}-leave-to`}=e,v=yee(r),y=v&&v[0],g=v&&v[1],{onBeforeEnter:w,onEnter:b,onEnterCancelled:x,onLeave:T,onLeaveCancelled:U,onBeforeAppear:k=w,onAppear:S=b,onAppearCancelled:E=x}=t,C=(N,L,ie,le)=>{N._enterCancelled=le,Zc(N,L?d:i),Zc(N,L?A:o),ie&&ie()},P=(N,L)=>{N._isLeaving=!1,Zc(N,f),Zc(N,h),Zc(N,m),L&&L()},F=N=>(L,ie)=>{const le=N?S:b,Q=()=>C(L,N,ie);gA(le,[L,Q]),CP(()=>{Zc(L,N?c:s),uu(L,N?d:i),xP(le)||SP(L,a,y,Q)})};return vs(t,{onBeforeEnter(N){gA(w,[N]),uu(N,s),uu(N,o)},onBeforeAppear(N){gA(k,[N]),uu(N,c),uu(N,A)},onEnter:F(!1),onAppear:F(!0),onLeave(N,L){N._isLeaving=!0;const ie=()=>P(N,L);uu(N,f),N._enterCancelled?(uu(N,m),wS()):(wS(),uu(N,m)),CP(()=>{N._isLeaving&&(Zc(N,f),uu(N,h),xP(T)||SP(N,a,g,ie))}),gA(T,[N,ie])},onEnterCancelled(N){C(N,!1,void 0,!0),gA(x,[N])},onAppearCancelled(N){C(N,!0,void 0,!0),gA(E,[N])},onLeaveCancelled(N){P(N),gA(U,[N])}})}function yee(e){if(e==null)return null;if(qa(e))return[Ex(e.enter),Ex(e.leave)];{const t=Ex(e);return[t,t]}}function Ex(e){return oL(e)}function uu(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[ph]||(e[ph]=new Set)).add(t)}function Zc(e,t){t.split(/\s+/).forEach(a=>a&&e.classList.remove(a));const n=e[ph];n&&(n.delete(t),n.size||(e[ph]=void 0))}function CP(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let _ee=0;function SP(e,t,n,a){const r=e._endId=++_ee,s=()=>{r===e._endId&&a()};if(n!=null)return setTimeout(s,n);const{type:o,timeout:i,propCount:c}=w8(e,t);if(!o)return a();const A=o+"end";let d=0;const f=()=>{e.removeEventListener(A,m),s()},m=h=>{h.target===e&&++d>=c&&f()};setTimeout(()=>{d<c&&f()},i+1),e.addEventListener(A,m)}function w8(e,t){const n=window.getComputedStyle(e),a=v=>(n[v]||"").split(", "),r=a(`${Wc}Delay`),s=a(`${Wc}Duration`),o=EP(r,s),i=a(`${zv}Delay`),c=a(`${zv}Duration`),A=EP(i,c);let d=null,f=0,m=0;t===Wc?o>0&&(d=Wc,f=o,m=s.length):t===zv?A>0&&(d=zv,f=A,m=c.length):(f=Math.max(o,A),d=f>0?o>A?Wc:zv:null,m=d?d===Wc?s.length:c.length:0);const h=d===Wc&&/\b(?:transform|all)(?:,|$)/.test(a(`${Wc}Property`).toString());return{type:d,timeout:f,propCount:m,hasTransform:h}}function EP(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,a)=>BP(n)+BP(e[a])))}function BP(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function wS(){return document.body.offsetHeight}function wee(e,t,n){const a=e[ph];a&&(t=(t?[t,...a]:[...a]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const g_=Symbol("_vod"),b8=Symbol("_vsh"),ai={name:"show",beforeMount(e,{value:t},{transition:n}){e[g_]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Kv(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:a}){!t!=!n&&(a?t?(a.beforeEnter(e),Kv(e,!0),a.enter(e)):a.leave(e,()=>{Kv(e,!1)}):Kv(e,t))},beforeUnmount(e,{value:t}){Kv(e,t)}};function Kv(e,t){e.style.display=t?e[g_]:"none",e[b8]=!t}const bee=Symbol(""),xee=/(?:^|;)\s*display\s*:/;function Cee(e,t,n){const a=e.style,r=dr(n);let s=!1;if(n&&!r){if(t)if(dr(t))for(const o of t.split(";")){const i=o.slice(0,o.indexOf(":")).trim();n[i]==null&&Ly(a,i,"")}else for(const o in t)n[o]==null&&Ly(a,o,"");for(const o in n)o==="display"&&(s=!0),Ly(a,o,n[o])}else if(r){if(t!==n){const o=a[bee];o&&(n+=";"+o),a.cssText=n,s=xee.test(n)}}else t&&e.removeAttribute("style");g_ in e&&(e[g_]=s?a.display:"",e[b8]&&(a.display="none"))}const kP=/\s*!important$/;function Ly(e,t,n){if(wn(n))n.forEach(a=>Ly(e,t,a));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const a=See(e,t);kP.test(n)?e.setProperty(Kd(a),n.replace(kP,""),"important"):e[a]=n}}const TP=["Webkit","Moz","ms"],Bx={};function See(e,t){const n=Bx[t];if(n)return n;let a=Lo(t);if(a!=="filter"&&a in e)return Bx[t]=a;a=Pu(a);for(let r=0;r<TP.length;r++){const s=TP[r]+a;if(s in e)return Bx[t]=s}return t}const IP="http://www.w3.org/1999/xlink";function FP(e,t,n,a,r,s=UJ(t)){a&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(IP,t.slice(6,t.length)):e.setAttributeNS(IP,t,n):n==null||s&&!iL(n)?e.removeAttribute(t):e.setAttribute(t,s?"":Dl(n)?String(n):n)}function PP(e,t,n,a,r){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?p8(n):n);return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const i=s==="OPTION"?e.getAttribute("value")||"":e.value,c=n==null?e.type==="checkbox"?"on":"":String(n);(i!==c||!("_value"in e))&&(e.value=c),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const i=typeof e[t];i==="boolean"?n=iL(n):n==null&&i==="string"?(n="",o=!0):i==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(r||t)}function IA(e,t,n,a){e.addEventListener(t,n,a)}function Eee(e,t,n,a){e.removeEventListener(t,n,a)}const DP=Symbol("_vei");function Bee(e,t,n,a,r=null){const s=e[DP]||(e[DP]={}),o=s[t];if(a&&o)o.value=a;else{const[i,c]=kee(t);if(a){const A=s[t]=Fee(a,r);IA(e,i,A,c)}else o&&(Eee(e,i,o,c),s[t]=void 0)}}const UP=/(?:Once|Passive|Capture)$/;function kee(e){let t;if(UP.test(e)){t={};let a;for(;a=e.match(UP);)e=e.slice(0,e.length-a[0].length),t[a[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Kd(e.slice(2)),t]}let kx=0;const Tee=Promise.resolve(),Iee=()=>kx||(Tee.then(()=>kx=0),kx=Date.now());function Fee(e,t){const n=a=>{if(!a._vts)a._vts=Date.now();else if(a._vts<=n.attached)return;Ul(Pee(a,n.value),t,5,[a])};return n.value=e,n.attached=Iee(),n}function Pee(e,t){if(wn(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(a=>r=>!r._stopped&&a&&a(r))}else return t}const RP=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Dee=(e,t,n,a,r,s)=>{const o=r==="svg";t==="class"?wee(e,a,o):t==="style"?Cee(e,n,a):$2(t)?$B(t)||Bee(e,t,n,a,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Uee(e,t,a,o))?(PP(e,t,a),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&FP(e,t,a,o,s,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!dr(a))?PP(e,Lo(t),a,s,t):(t==="true-value"?e._trueValue=a:t==="false-value"&&(e._falseValue=a),FP(e,t,a,o))};function Uee(e,t,n,a){if(a)return!!(t==="innerHTML"||t==="textContent"||t in e&&RP(t)&&Mn(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return RP(t)&&dr(n)?!1:t in e}const x8=new WeakMap,C8=new WeakMap,y_=Symbol("_moveCb"),NP=Symbol("_enterCb"),Ree=e=>(delete e.props.mode,e),Nee=Ree({name:"TransitionGroup",props:vs({},y8,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=Bf(),a=ML();let r,s;return X2(()=>{if(!r.length)return;const o=e.moveClass||`${e.name||"v"}-move`;if(!Oee(r[0].el,n.vnode.el,o)){r=[];return}r.forEach(Vee),r.forEach(Lee);const i=r.filter(Mee);wS(),i.forEach(c=>{const A=c.el,d=A.style;uu(A,o),d.transform=d.webkitTransform=d.transitionDuration="";const f=A[y_]=m=>{m&&m.target!==A||(!m||m.propertyName.endsWith("transform"))&&(A.removeEventListener("transitionend",f),A[y_]=null,Zc(A,o))};A.addEventListener("transitionend",f)}),r=[]}),()=>{const o=gn(e),i=_8(o);let c=o.tag||ze;if(r=[],s)for(let A=0;A<s.length;A++){const d=s[A];d.el&&d.el instanceof Element&&(r.push(d),kd(d,c0(d,i,a,n)),x8.set(d,d.el.getBoundingClientRect()))}s=t.default?ZB(t.default()):[];for(let A=0;A<s.length;A++){const d=s[A];d.key!=null&&kd(d,c0(d,i,a,n))}return l(c,null,s)}}}),ik=Nee;function Vee(e){const t=e.el;t[y_]&&t[y_](),t[NP]&&t[NP]()}function Lee(e){C8.set(e,e.el.getBoundingClientRect())}function Mee(e){const t=x8.get(e),n=C8.get(e),a=t.left-n.left,r=t.top-n.top;if(a||r){const s=e.el.style;return s.transform=s.webkitTransform=`translate(${a}px,${r}px)`,s.transitionDuration="0s",e}}function Oee(e,t,n){const a=e.cloneNode(),r=e[ph];r&&r.forEach(i=>{i.split(/\s+/).forEach(c=>c&&a.classList.remove(c))}),n.split(/\s+/).forEach(i=>i&&a.classList.add(i)),a.style.display="none";const s=t.nodeType===1?t:t.parentNode;s.appendChild(a);const{hasTransform:o}=w8(a);return s.removeChild(a),o}const __=e=>{const t=e.props["onUpdate:modelValue"]||!1;return wn(t)?n=>Ym(t,n):t};function Hee(e){e.target.composing=!0}function VP(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const th=Symbol("_assign"),nh={created(e,{modifiers:{lazy:t,trim:n,number:a}},r){e[th]=__(r);const s=a||r.props&&r.props.type==="number";IA(e,t?"change":"input",o=>{if(o.target.composing)return;let i=e.value;n&&(i=i.trim()),s&&(i=s_(i)),e[th](i)}),n&&IA(e,"change",()=>{e.value=e.value.trim()}),t||(IA(e,"compositionstart",Hee),IA(e,"compositionend",VP),IA(e,"change",VP))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:a,trim:r,number:s}},o){if(e[th]=__(o),e.composing)return;const i=(s||e.type==="number")&&!/^0\d/.test(e.value)?s_(e.value):e.value,c=t??"";i!==c&&(document.activeElement===e&&e.type!=="range"&&(a&&t===n||r&&e.value.trim()===c)||(e.value=c))}},$ee={deep:!0,created(e,{value:t,modifiers:{number:n}},a){const r=Q2(t);IA(e,"change",()=>{const s=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>n?s_(w_(o)):w_(o));e[th](e.multiple?r?new Set(s):s:s[0]),e._assigning=!0,bn(()=>{e._assigning=!1})}),e[th]=__(a)},mounted(e,{value:t}){LP(e,t)},beforeUpdate(e,t,n){e[th]=__(n)},updated(e,{value:t}){e._assigning||LP(e,t)}};function LP(e,t){const n=e.multiple,a=wn(t);if(!(n&&!a&&!Q2(t))){for(let r=0,s=e.options.length;r<s;r++){const o=e.options[r],i=w_(o);if(n)if(a){const c=typeof i;c==="string"||c==="number"?o.selected=t.some(A=>String(A)===String(i)):o.selected=NJ(t,i)>-1}else o.selected=t.has(i);else if(K2(w_(o),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function w_(e){return"_value"in e?e._value:e.value}const Qee=["ctrl","shift","alt","meta"],Gee={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Qee.some(n=>e[`${n}Key`]&&!t.includes(n))},mn=(e,t)=>{const n=e._withMods||(e._withMods={}),a=t.join(".");return n[a]||(n[a]=((r,...s)=>{for(let o=0;o<t.length;o++){const i=Gee[t[o]];if(i&&i(r,t))return}return e(r,...s)}))},zee={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},MP=(e,t)=>{const n=e._withKeys||(e._withKeys={}),a=t.join(".");return n[a]||(n[a]=(r=>{if(!("key"in r))return;const s=Kd(r.key);if(t.some(o=>o===s||zee[o]===s))return e(r)}))},Kee=vs({patchProp:Dee},pee);let OP;function S8(){return OP||(OP=LZ(Kee))}const E8=((...e)=>{S8().render(...e)}),Wee=((...e)=>{const t=S8().createApp(...e),{mount:n}=t;return t.mount=a=>{const r=qee(a);if(!r)return;const s=t._component;!Mn(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,jee(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},t});function jee(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function qee(e){return dr(e)?document.querySelector(e):e}function vo(e,t){let n;function a(){n=Ed(),n.run(()=>t.length?t(()=>{n?.stop(),a()}):t())}We(e,r=>{r&&!n?a():r||(n?.stop(),n=void 0)},{immediate:!0}),as(()=>{n?.stop()})}const _a=typeof window<"u",lk=_a&&"IntersectionObserver"in window,Yee=_a&&("ontouchstart"in window||window.navigator.maxTouchPoints>0),HP=_a&&"EyeDropper"in window,Xee=_a&&"matchMedia"in window&&typeof window.matchMedia=="function";function $P(e,t,n){Jee(e,t),t.set(e,n)}function Jee(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function QP(e,t,n){return e.set(B8(e,t),n),n}function Zu(e,t){return e.get(B8(e,t))}function B8(e,t,n){if(typeof e=="function"?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function k8(e,t,n){const a=t.length-1;if(a<0)return e===void 0?n:e;for(let r=0;r<a;r++){if(e==null)return n;e=e[t[r]]}return e==null||e[t[a]]===void 0?n:e[t[a]]}function ms(e,t){if(e===t)return!0;if(e instanceof Date&&t instanceof Date&&e.getTime()!==t.getTime()||e!==Object(e)||t!==Object(t))return!1;const n=Object.keys(e);return n.length!==Object.keys(t).length?!1:n.every(a=>ms(e[a],t[a]))}function rf(e,t,n){return e==null||!t||typeof t!="string"?n:e[t]!==void 0?e[t]:(t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,""),k8(e,t.split("."),n))}function Fr(e,t,n){if(t===!0)return e===void 0?n:e;if(t==null||typeof t=="boolean")return n;if(e!==Object(e)){if(typeof t!="function")return n;const r=t(e,n);return typeof r>"u"?n:r}if(typeof t=="string")return rf(e,t,n);if(Array.isArray(t))return k8(e,t,n);if(typeof t!="function")return n;const a=t(e,n);return typeof a>"u"?n:a}function yi(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.from({length:e},(n,a)=>t+a)}function jt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"px";if(e==null||e==="")return;const n=Number(e);return isNaN(n)?String(e):isFinite(n)?`${n}${t}`:void 0}function f0(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function GP(e){let t;return e!==null&&typeof e=="object"&&((t=Object.getPrototypeOf(e))===Object.prototype||t===null)}function uk(e){if(e&&"$el"in e){const t=e.$el;return t?.nodeType===Node.TEXT_NODE?t.nextElementSibling:t}return e}const bS=Object.freeze({enter:"Enter",tab:"Tab",delete:"Delete",esc:"Escape",space:"Space",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",end:"End",home:"Home",del:"Delete",backspace:"Backspace",insert:"Insert",pageup:"PageUp",pagedown:"PageDown",shift:"Shift"});function T8(e){return Object.keys(e)}function UA(e,t){return t.every(n=>e.hasOwnProperty(n))}function Pc(e,t){const n={};for(const a of t)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function xS(e,t,n){const a=Object.create(null),r=Object.create(null);for(const s in e)t.some(o=>o instanceof RegExp?o.test(s):o===s)?a[s]=e[s]:r[s]=e[s];return[a,r]}function Fa(e,t){const n={...e};return t.forEach(a=>delete n[a]),n}const I8=/^on[^a-z]/,ck=e=>I8.test(e),Zee=["onAfterscriptexecute","onAnimationcancel","onAnimationend","onAnimationiteration","onAnimationstart","onAuxclick","onBeforeinput","onBeforescriptexecute","onChange","onClick","onCompositionend","onCompositionstart","onCompositionupdate","onContextmenu","onCopy","onCut","onDblclick","onFocusin","onFocusout","onFullscreenchange","onFullscreenerror","onGesturechange","onGestureend","onGesturestart","onGotpointercapture","onInput","onKeydown","onKeypress","onKeyup","onLostpointercapture","onMousedown","onMousemove","onMouseout","onMouseover","onMouseup","onMousewheel","onPaste","onPointercancel","onPointerdown","onPointerenter","onPointerleave","onPointermove","onPointerout","onPointerover","onPointerup","onReset","onSelect","onSubmit","onTouchcancel","onTouchend","onTouchmove","onTouchstart","onTransitioncancel","onTransitionend","onTransitionrun","onTransitionstart","onWheel"],ete=["ArrowUp","ArrowDown","ArrowRight","ArrowLeft","Enter","Escape","Tab"," "];function tte(e){return e.isComposing&&ete.includes(e.key)}function Wd(e){const[t,n]=xS(e,[I8]),a=Fa(t,Zee),[r,s]=xS(n,["class","style","id",/^data-/]);return Object.assign(r,t),Object.assign(s,a),[r,s]}function cr(e){return e==null?[]:Array.isArray(e)?e:[e]}function F8(e,t){let n=0;const a=function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];clearTimeout(n),n=setTimeout(()=>e(...s),Oe(t))};return a.clear=()=>{clearTimeout(n)},a.immediate=e,a}function Qa(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.max(t,Math.min(n,e))}function zP(e){const t=e.toString().trim();return t.includes(".")?t.length-t.indexOf(".")-1:0}function KP(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0";return e+n.repeat(Math.max(0,t-e.length))}function WP(e,t){return(arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0").repeat(Math.max(0,t-e.length))+e}function nte(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const n=[];let a=0;for(;a<e.length;)n.push(e.substr(a,t)),a+=t;return n}function jP(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;if(e<t)return`${e} B`;const n=t===1024?["Ki","Mi","Gi"]:["k","M","G"];let a=-1;for(;Math.abs(e)>=t&&a<n.length-1;)e/=t,++a;return`${e.toFixed(1)} ${n[a]}B`}function Ao(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const a={};for(const r in e)a[r]=e[r];for(const r in t){const s=e[r],o=t[r];if(GP(s)&&GP(o)){a[r]=Ao(s,o,n);continue}if(n&&Array.isArray(s)&&Array.isArray(o)){a[r]=n(s,o);continue}a[r]=o}return a}function P8(e){return e.map(t=>t.type===ze?P8(t.children):t).flat()}function zA(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(zA.cache.has(e))return zA.cache.get(e);const t=e.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase();return zA.cache.set(e,t),t}zA.cache=new Map;function Lm(e,t){if(!t||typeof t!="object")return[];if(Array.isArray(t))return t.map(n=>Lm(e,n)).flat(1);if(t.suspense)return Lm(e,t.ssContent);if(Array.isArray(t.children))return t.children.map(n=>Lm(e,n)).flat(1);if(t.component){if(Object.getOwnPropertySymbols(t.component.provides).includes(e))return[t.component];if(t.component.subTree)return Lm(e,t.component.subTree).flat(1)}return[]}var mm=new WeakMap,yA=new WeakMap;class D8{constructor(t){$P(this,mm,[]),$P(this,yA,0),this.size=t}get isFull(){return Zu(mm,this).length===this.size}push(t){Zu(mm,this)[Zu(yA,this)]=t,QP(yA,this,(Zu(yA,this)+1)%this.size)}values(){return Zu(mm,this).slice(Zu(yA,this)).concat(Zu(mm,this).slice(0,Zu(yA,this)))}clear(){Zu(mm,this).length=0,QP(yA,this,0)}}function ate(e){return"touches"in e?{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}:{clientX:e.clientX,clientY:e.clientY}}function dk(e){const t=es({});Ar(()=>{const a=e();for(const r in a)t[r]=a[r]},{flush:"sync"});const n={};for(const a in t)n[a]=qe(()=>t[a]);return n}function b_(e,t){return e.includes(t)}function U8(e){return e[2].toLowerCase()+e.slice(3)}const Ts=()=>[Function,Array];function qP(e,t){return t="on"+Pu(t),!!(e[t]||e[`${t}Once`]||e[`${t}Capture`]||e[`${t}OnceCapture`]||e[`${t}CaptureOnce`])}function tw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];if(Array.isArray(e))for(const r of e)r(...n);else typeof e=="function"&&e(...n)}function m0(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=["button","[href]",'input:not([type="hidden"])',"select","textarea","[tabindex]"].map(a=>`${a}${t?':not([tabindex="-1"])':""}:not([disabled])`).join(", ");return[...e.querySelectorAll(n)]}function R8(e,t,n){let a,r=e.indexOf(document.activeElement);const s=t==="next"?1:-1;do r+=s,a=e[r];while((!a||a.offsetParent==null||!(n?.(a)??!0))&&r<e.length&&r>=0);return a}function KA(e,t){const n=m0(e);if(t==null)(e===document.activeElement||!e.contains(document.activeElement))&&n[0]?.focus();else if(t==="first")n[0]?.focus();else if(t==="last")n.at(-1)?.focus();else if(typeof t=="number")n[t]?.focus();else{const a=R8(n,t);a?a.focus():KA(e,t==="next"?"first":"last")}}function M1(e){return e==null||typeof e=="string"&&e.trim()===""}function N8(){}function gh(e,t){if(!(_a&&typeof CSS<"u"&&typeof CSS.supports<"u"&&CSS.supports(`selector(${t})`)))return null;try{return!!e&&e.matches(t)}catch{return null}}function nw(e){return e.some(t=>Td(t)?t.type===ts?!1:t.type!==ze||nw(t.children):!0)?e:null}function Tx(e,t,n){return e?.(t)??n?.(t)}function rte(e,t){if(!_a||e===0)return t(),()=>{};const n=window.setTimeout(t,e);return()=>window.clearTimeout(n)}function ste(e,t){const n=e.clientX,a=e.clientY,r=t.getBoundingClientRect(),s=r.left,o=r.top,i=r.right,c=r.bottom;return n>=s&&n<=i&&a>=o&&a<=c}function x_(){const e=Ht(),t=n=>{e.value=n};return Object.defineProperty(t,"value",{enumerable:!0,get:()=>e.value,set:n=>e.value=n}),Object.defineProperty(t,"el",{enumerable:!0,get:()=>uk(e.value)}),t}function yh(e){const t=e.key.length===1,n=!e.ctrlKey&&!e.metaKey&&!e.altKey;return t&&n}function CS(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="bigint"}function C_(e){return"\\^$*+?.()|{}[]".includes(e)?`\\${e}`:e}function ote(e,t,n){const a=new RegExp(`[\\d\\-${C_(n)}]`),r=e.split("").filter(o=>a.test(o)).filter((o,i,c)=>i===0&&/[-]/.test(o)||o===n&&i===c.indexOf(o)||/\d/.test(o)).join("");if(t===0)return r.split(n)[0];const s=new RegExp(`${C_(n)}\\d`);if(t!==null&&s.test(r)){const o=r.split(n);return[o[0],o[1].substring(0,t)].join(n)}return r}function ite(e){const t={};for(const n in e)t[Lo(n)]=e[n];return t}function lte(e){const t=["checked","disabled"];return Object.fromEntries(Object.entries(e).filter(n=>{let[a,r]=n;return t.includes(a)?!!r:r!==void 0}))}const V8=["top","bottom"],ute=["start","end","left","right"];function SS(e,t){let[n,a]=e.split(" ");return a||(a=b_(V8,n)?"start":b_(ute,n)?"top":"center"),{side:ES(n,t),align:ES(a,t)}}function ES(e,t){return e==="start"?t?"right":"left":e==="end"?t?"left":"right":e}function Ix(e){return{side:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.side],align:e.align}}function Fx(e){return{side:e.side,align:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.align]}}function YP(e){return{side:e.align,align:e.side}}function XP(e){return b_(V8,e.side)?"y":"x"}class _u{constructor(t){let{x:n,y:a,width:r,height:s}=t;this.x=n,this.y=a,this.width=r,this.height=s}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function JP(e,t){return{x:{before:Math.max(0,t.left-e.left),after:Math.max(0,e.right-t.right)},y:{before:Math.max(0,t.top-e.top),after:Math.max(0,e.bottom-t.bottom)}}}function L8(e){return Array.isArray(e)?new _u({x:e[0],y:e[1],width:0,height:0}):e.getBoundingClientRect()}function cte(e){if(e===document.documentElement)return visualViewport?new _u({x:visualViewport.scale>1?0:visualViewport.offsetLeft,y:visualViewport.scale>1?0:visualViewport.offsetTop,width:visualViewport.width*visualViewport.scale,height:visualViewport.height*visualViewport.scale}):new _u({x:0,y:0,width:document.documentElement.clientWidth,height:document.documentElement.clientHeight});{const t=e.getBoundingClientRect();return new _u({x:t.x,y:t.y,width:e.clientWidth,height:e.clientHeight})}}function Ak(e){const t=e.getBoundingClientRect(),n=getComputedStyle(e),a=n.transform;if(a){let r,s,o,i,c;if(a.startsWith("matrix3d("))r=a.slice(9,-1).split(/, /),s=Number(r[0]),o=Number(r[5]),i=Number(r[12]),c=Number(r[13]);else if(a.startsWith("matrix("))r=a.slice(7,-1).split(/, /),s=Number(r[0]),o=Number(r[3]),i=Number(r[4]),c=Number(r[5]);else return new _u(t);const A=n.transformOrigin,d=t.x-i-(1-s)*parseFloat(A),f=t.y-c-(1-o)*parseFloat(A.slice(A.indexOf(" ")+1)),m=s?t.width/s:e.offsetWidth+1,h=o?t.height/o:e.offsetHeight+1;return new _u({x:d,y:f,width:m,height:h})}else return new _u(t)}function RA(e,t,n){if(typeof e.animate>"u")return{finished:Promise.resolve()};let a;try{a=e.animate(t,n)}catch{return{finished:Promise.resolve()}}return typeof a.finished>"u"&&(a.finished=new Promise(r=>{a.onfinish=()=>{r(a)}})),a}const My=new WeakMap;function dte(e,t){Object.keys(t).forEach(n=>{if(ck(n)){const a=U8(n),r=My.get(e);if(t[n]==null)r?.forEach(s=>{const[o,i]=s;o===a&&(e.removeEventListener(a,i),r.delete(s))});else if(!r||![...r].some(s=>s[0]===a&&s[1]===t[n])){e.addEventListener(a,t[n]);const s=r||new Set;s.add([a,t[n]]),My.has(e)||My.set(e,s)}}else t[n]==null?e.removeAttribute(n):e.setAttribute(n,t[n])})}function Ate(e,t){Object.keys(t).forEach(n=>{if(ck(n)){const a=U8(n),r=My.get(e);r?.forEach(s=>{const[o,i]=s;o===a&&(e.removeEventListener(a,i),r.delete(s))})}else e.removeAttribute(n)})}const hm=2.4,ZP=.2126729,eD=.7151522,tD=.072175,fte=.55,mte=.58,hte=.57,vte=.62,O1=.03,nD=1.45,pte=5e-4,gte=1.25,yte=1.25,aD=.078,rD=12.82051282051282,H1=.06,sD=.001;function oD(e,t){const n=(e.r/255)**hm,a=(e.g/255)**hm,r=(e.b/255)**hm,s=(t.r/255)**hm,o=(t.g/255)**hm,i=(t.b/255)**hm;let c=n*ZP+a*eD+r*tD,A=s*ZP+o*eD+i*tD;if(c<=O1&&(c+=(O1-c)**nD),A<=O1&&(A+=(O1-A)**nD),Math.abs(A-c)<pte)return 0;let d;if(A>c){const f=(A**fte-c**mte)*gte;d=f<sD?0:f<aD?f-f*rD*H1:f-H1}else{const f=(A**vte-c**hte)*yte;d=f>-sD?0:f>-aD?f-f*rD*H1:f+H1}return d*100}function M8(e,t){t=Array.isArray(t)?t.slice(0,-1).map(n=>`'${n}'`).join(", ")+` or '${t.at(-1)}'`:`'${t}'`}const S_=.20689655172413793,_te=e=>e>S_**3?Math.cbrt(e):e/(3*S_**2)+4/29,wte=e=>e>S_?e**3:3*S_**2*(e-4/29);function O8(e){const t=_te,n=t(e[1]);return[116*n-16,500*(t(e[0]/.95047)-n),200*(n-t(e[2]/1.08883))]}function H8(e){const t=wte,n=(e[0]+16)/116;return[t(n+e[1]/500)*.95047,t(n),t(n-e[2]/200)*1.08883]}const bte=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],xte=e=>e<=.0031308?e*12.92:1.055*e**(1/2.4)-.055,Cte=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],Ste=e=>e<=.04045?e/12.92:((e+.055)/1.055)**2.4;function $8(e){const t=Array(3),n=xte,a=bte;for(let r=0;r<3;++r)t[r]=Math.round(Qa(n(a[r][0]*e[0]+a[r][1]*e[1]+a[r][2]*e[2]))*255);return{r:t[0],g:t[1],b:t[2]}}function fk(e){let{r:t,g:n,b:a}=e;const r=[0,0,0],s=Ste,o=Cte;t=s(t/255),n=s(n/255),a=s(a/255);for(let i=0;i<3;++i)r[i]=o[i][0]*t+o[i][1]*n+o[i][2]*a;return r}function BS(e){return!!e&&/^(#|var\(--|(rgb|hsl)a?\()/.test(e)}function Ete(e){return BS(e)&&!/^((rgb|hsl)a?\()?var\(--/.test(e)}const iD=/^(?<fn>(?:rgb|hsl)a?)\((?<values>.+)\)/,Bte={rgb:(e,t,n,a)=>({r:e,g:t,b:n,a}),rgba:(e,t,n,a)=>({r:e,g:t,b:n,a}),hsl:(e,t,n,a)=>lD({h:e,s:t,l:n,a}),hsla:(e,t,n,a)=>lD({h:e,s:t,l:n,a}),hsv:(e,t,n,a)=>Su({h:e,s:t,v:n,a}),hsva:(e,t,n,a)=>Su({h:e,s:t,v:n,a})};function _i(e){if(typeof e=="number")return{r:(e&16711680)>>16,g:(e&65280)>>8,b:e&255};if(typeof e=="string"&&iD.test(e)){const{groups:t}=e.match(iD),{fn:n,values:a}=t,r=a.split(/,\s*|\s*\/\s*|\s+/).map((s,o)=>s.endsWith("%")||o>0&&o<3&&["hsl","hsla","hsv","hsva"].includes(n)?parseFloat(s)/100:parseFloat(s));return Bte[n](...r)}else if(typeof e=="string"){let t=e.startsWith("#")?e.slice(1):e;return[3,4].includes(t.length)?t=t.split("").map(n=>n+n).join(""):[6,8].includes(t.length),K8(t)}else if(typeof e=="object"){if(UA(e,["r","g","b"]))return e;if(UA(e,["h","s","l"]))return Su(mk(e));if(UA(e,["h","s","v"]))return Su(e)}throw new TypeError(`Invalid color: ${e==null?e:String(e)||e.constructor.name}
Expected #hex, #hexa, rgb(), rgba(), hsl(), hsla(), object or number`)}function Su(e){const{h:t,s:n,v:a,a:r}=e,s=i=>{const c=(i+t/60)%6;return a-a*n*Math.max(Math.min(c,4-c,1),0)},o=[s(5),s(3),s(1)].map(i=>Math.round(i*255));return{r:o[0],g:o[1],b:o[2],a:r}}function lD(e){return Su(mk(e))}function ng(e){if(!e)return{h:0,s:1,v:1,a:1};const t=e.r/255,n=e.g/255,a=e.b/255,r=Math.max(t,n,a),s=Math.min(t,n,a);let o=0;r!==s&&(r===t?o=60*(0+(n-a)/(r-s)):r===n?o=60*(2+(a-t)/(r-s)):r===a&&(o=60*(4+(t-n)/(r-s)))),o<0&&(o=o+360);const i=r===0?0:(r-s)/r,c=[o,i,r];return{h:c[0],s:c[1],v:c[2],a:e.a}}function kS(e){const{h:t,s:n,v:a,a:r}=e,s=a-a*n/2,o=s===1||s===0?0:(a-s)/Math.min(s,1-s);return{h:t,s:o,l:s,a:r}}function mk(e){const{h:t,s:n,l:a,a:r}=e,s=a+n*Math.min(a,1-a),o=s===0?0:2-2*a/s;return{h:t,s:o,v:s,a:r}}function Q8(e){let{r:t,g:n,b:a,a:r}=e;return r===void 0?`rgb(${t}, ${n}, ${a})`:`rgba(${t}, ${n}, ${a}, ${r})`}function G8(e){return Q8(Su(e))}function $1(e){const t=Math.round(e).toString(16);return("00".substr(0,2-t.length)+t).toUpperCase()}function z8(e){let{r:t,g:n,b:a,a:r}=e;return`#${[$1(t),$1(n),$1(a),r!==void 0?$1(Math.round(r*255)):""].join("")}`}function K8(e){e=Tte(e);let[t,n,a,r]=nte(e,2).map(s=>parseInt(s,16));return r=r===void 0?r:r/255,{r:t,g:n,b:a,a:r}}function kte(e){const t=K8(e);return ng(t)}function W8(e){return z8(Su(e))}function Tte(e){return e.startsWith("#")&&(e=e.slice(1)),e=e.replace(/([^0-9a-f])/gi,"F"),(e.length===3||e.length===4)&&(e=e.split("").map(t=>t+t).join("")),e.length!==6&&(e=KP(KP(e,6),8,"F")),e}function Ite(e,t){const n=O8(fk(e));return n[0]=n[0]+t*10,$8(H8(n))}function Fte(e,t){const n=O8(fk(e));return n[0]=n[0]-t*10,$8(H8(n))}function TS(e){const t=_i(e);return fk(t)[1]}function Pte(e,t){const n=TS(e),a=TS(t),r=Math.max(n,a),s=Math.min(n,a);return(r+.05)/(s+.05)}function j8(e){const t=Math.abs(oD(_i(0),_i(e)));return Math.abs(oD(_i(16777215),_i(e)))>Math.min(t,50)?"#fff":"#000"}function ot(e,t){return n=>Object.keys(e).reduce((a,r)=>{const o=typeof e[r]=="object"&&e[r]!=null&&!Array.isArray(e[r])?e[r]:{type:e[r]};return n&&r in n?a[r]={...o,default:n[r]}:a[r]=o,t&&!a[r].source&&(a[r].source=t),a},{})}const en=ot({class:[String,Array,Object],style:{type:[String,Array,Object],default:null}},"component");function Er(e,t){const n=Bf();if(!n)throw new Error(`[Vuetify] ${e} must be called from inside a setup function`);return n}function Du(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"composables";const t=Er(e).type;return zA(t?.aliasName||t?.name)}function Dte(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Er("injectSelf");const{provides:n}=t;if(n&&e in n)return n[e]}const _h=Symbol.for("vuetify:defaults");function Ute(e){return M(e)}function hk(){const e=Sn(_h);if(!e)throw new Error("[Vuetify] Could not find defaults instance");return e}function fr(e,t){const n=hk(),a=M(e),r=ee(()=>{if(Oe(t?.disabled))return n.value;const o=Oe(t?.scoped),i=Oe(t?.reset),c=Oe(t?.root);if(a.value==null&&!(o||i||c))return n.value;let A=Ao(a.value,{prev:n.value});if(o)return A;if(i||c){const d=Number(i||1/0);for(let f=0;f<=d&&!(!A||!("prev"in A));f++)A=A.prev;return A&&typeof c=="string"&&c in A&&(A=Ao(Ao(A,{prev:A}),A[c])),A}return A.prev?Ao(A.prev,A):A});return Ia(_h,r),r}function Rte(e,t){return e.props&&(typeof e.props[t]<"u"||typeof e.props[zA(t)]<"u")}function Nte(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:hk();const a=Er("useDefaults");if(t=t??a.type.name??a.type.__name,!t)throw new Error("[Vuetify] Could not determine component name");const r=ee(()=>n.value?.[e._as??t]),s=new Proxy(e,{get(c,A){const d=Reflect.get(c,A);if(A==="class"||A==="style")return[r.value?.[A],d].filter(h=>h!=null);if(Rte(a.vnode,A))return d;const f=r.value?.[A];if(f!==void 0)return f;const m=n.value?.global?.[A];return m!==void 0?m:d}}),o=Ht();Ar(()=>{if(r.value){const c=Object.entries(r.value).filter(A=>{let[d]=A;return d.startsWith(d[0].toUpperCase())});o.value=c.length?Object.fromEntries(c):void 0}else o.value=void 0});function i(){const c=Dte(_h,a);Ia(_h,ee(()=>o.value?Ao(c?.value??{},o.value):c?.value))}return{props:s,provideSubDefaults:i}}function Ei(e){if(e._setup=e._setup??e.setup,!e.name)return e;if(e._setup){e.props=ot(e.props??{},e.name)();const t=Object.keys(e.props).filter(n=>n!=="class"&&n!=="style");e.filterProps=function(a){return Pc(a,t)},e.props._as=String,e.setup=function(a,r){const s=hk();if(!s.value)return e._setup(a,r);const{props:o,provideSubDefaults:i}=Nte(a,a._as??e.name,s),c=e._setup(o,r);return i(),c}}return e}function yt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return t=>(e?Ei:ek)(t)}function Vte(e,t){return t.props=e,t}function Dc(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",n=arguments.length>2?arguments[2]:void 0;return yt()({name:n??Pu(Lo(e.replace(/__/g,"-"))),props:{tag:{type:String,default:t},...en()},setup(a,r){let{slots:s}=r;return()=>Wl(a.tag,{class:[e,a.class],style:a.style},s.default?.())}})}function q8(e){if(typeof e.getRootNode!="function"){for(;e.parentNode;)e=e.parentNode;return e!==document?null:document}const t=e.getRootNode();return t!==document&&t.getRootNode({composed:!0})!==document?null:t}const h0="cubic-bezier(0.4, 0, 0.2, 1)",Lte="cubic-bezier(0.0, 0, 0.2, 1)",Mte="cubic-bezier(0.4, 0, 1, 1)",Ote={linear:e=>e,easeInQuad:e=>e**2,easeOutQuad:e=>e*(2-e),easeInOutQuad:e=>e<.5?2*e**2:-1+(4-2*e)*e,easeInCubic:e=>e**3,easeOutCubic:e=>--e**3+1,easeInOutCubic:e=>e<.5?4*e**3:(e-1)*(2*e-2)*(2*e-2)+1,easeInQuart:e=>e**4,easeOutQuart:e=>1- --e**4,easeInOutQuart:e=>e<.5?8*e**4:1-8*--e**4,easeInQuint:e=>e**5,easeOutQuint:e=>1+--e**5,easeInOutQuint:e=>e<.5?16*e**5:1+16*--e**5};function uD(e,t,n){return Object.keys(e).filter(a=>ck(a)&&a.endsWith(t)).reduce((a,r)=>(a[r.slice(0,-t.length)]=s=>e[r](s,n(s)),a),{})}function vk(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(;e;){if(t?Hte(e):pk(e))return e;e=e.parentElement}return document.scrollingElement}function E_(e,t){const n=[];if(t&&e&&!t.contains(e))return n;for(;e&&(pk(e)&&n.push(e),e!==t);)e=e.parentElement;return n}function pk(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e),n=t.overflowY==="scroll"||t.overflowY==="auto"&&e.scrollHeight>e.clientHeight,a=t.overflowX==="scroll"||t.overflowX==="auto"&&e.scrollWidth>e.clientWidth;return n||a}function Hte(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e);return["scroll","auto"].includes(t.overflowY)}function $te(e){let{depth:t,isLast:n,isLastGroup:a,leafLinks:r,separateRoots:s,parentIndentLines:o,variant:i}=e;if(!o||!t)return{leaf:void 0,node:void 0,children:o};if(i==="simple")return{leaf:[...o,"line"],node:[...o,"line"],children:[...o,"line"]};const c=n&&(!a||s||t>1);return{leaf:[...o,c?"last-leaf":"leaf",...r?["leaf-link"]:[]],node:[...o,c?"last-leaf":"leaf"],children:[...o,c?"none":"line"]}}function Qte(e){for(;e;){if(window.getComputedStyle(e).position==="fixed")return!0;e=e.offsetParent}return!1}function St(e){const t=Er("useRender");t.render=e}function on(e,t,n){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:f=>f,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:f=>f;const s=Er("useProxiedModel"),o=M(e[t]!==void 0?e[t]:n),i=zA(t),A=ee(i!==t?()=>(e[t],!!((s.vnode.props?.hasOwnProperty(t)||s.vnode.props?.hasOwnProperty(i))&&(s.vnode.props?.hasOwnProperty(`onUpdate:${t}`)||s.vnode.props?.hasOwnProperty(`onUpdate:${i}`)))):()=>(e[t],!!(s.vnode.props?.hasOwnProperty(t)&&s.vnode.props?.hasOwnProperty(`onUpdate:${t}`))));vo(()=>!A.value,()=>{We(()=>e[t],f=>{o.value=f})});const d=ee({get(){const f=e[t];return a(A.value?f:o.value)},set(f){const m=r(f),h=gn(A.value?e[t]:o.value);h===m||a(h)===f||(o.value=m,s?.emit(`update:${t}`,m))}});return Object.defineProperty(d,"externalValue",{get:()=>A.value?e[t]:o.value}),d}const Gte={badge:"Badge",open:"Open",close:"Close",dismiss:"Dismiss",confirmEdit:{ok:"OK",cancel:"Cancel"},dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},dateRangeInput:{divider:"to"},datePicker:{itemsSelected:"{0} selected",range:{title:"Select dates",header:"Enter dates"},title:"Select date",header:"Enter date",input:{placeholder:"Enter date"},ariaLabel:{previousMonth:"Previous month",nextMonth:"Next month",selectYear:"Select year",selectDate:"{0}",currentDate:"Today, {0}"}},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more",today:"Today"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action",otp:"Please enter OTP character {0}"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},fileUpload:{title:"Drag and drop files here",divider:"or",browse:"Browse Files"},timePicker:{am:"AM",pm:"PM",title:"Select Time"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Go to page {0}",currentPage:"Page {0}, Current page",first:"First page",last:"Last page"}},stepper:{next:"Next",prev:"Previous"},rating:{ariaLabel:{item:"Rating {0} of {1}"}},loading:"Loading...",infiniteScroll:{loadMore:"Load more",empty:"No more"},rules:{required:"This field is required",email:"Please enter a valid email",number:"This field can only contain numbers",integer:"This field can only contain integer values",capital:"This field can only contain uppercase letters",maxLength:"You must enter a maximum of {0} characters",minLength:"You must enter a minimum of {0} characters",strictLength:"The length of the entered field is invalid",exclude:"The {0} character is not allowed",notEmpty:"Please choose at least one value",pattern:"Invalid format"},hotkey:{then:"then",ctrl:"Ctrl",command:"Command",space:"Space",shift:"Shift",alt:"Alt",enter:"Enter",escape:"Escape",upArrow:"Up Arrow",downArrow:"Down Arrow",leftArrow:"Left Arrow",rightArrow:"Right Arrow",backspace:"Backspace",option:"Option",plus:"plus",shortcut:"Keyboard shortcut: {0}"},video:{play:"Play",pause:"Pause",seek:"Seek",volume:"Volume",showVolume:"Show volume control",mute:"Mute",unmute:"Unmute",enterFullscreen:"Full screen",exitFullscreen:"Exit full screen"},colorPicker:{ariaLabel:{eyedropper:"Select color with eyedropper",hueSlider:"Hue",alphaSlider:"Alpha",redInput:"Red value",greenInput:"Green value",blueInput:"Blue value",alphaInput:"Alpha value",hueInput:"Hue value",saturationInput:"Saturation value",lightnessInput:"Lightness value",hexInput:"HEX value",hexaInput:"HEX with alpha value",changeFormat:"Change color format"}}},cD="$vuetify.",dD=(e,t)=>e.replace(/\{(\d+)\}/g,(n,a)=>String(t[Number(a)])),Y8=(e,t,n)=>function(a){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];if(!a.startsWith(cD))return dD(a,s);const i=a.replace(cD,""),c=e.value&&n.value[e.value],A=t.value&&n.value[t.value];let d=rf(c,i,null);return d||(`${a}${e.value}`,d=rf(A,i,null)),d||(d=a),typeof d!="string"&&(d=a),dD(d,s)};function gk(e,t){return(n,a)=>new Intl.NumberFormat([e.value,t.value],a).format(n)}function X8(e,t){return gk(e,t)(.1).includes(",")?",":"."}function Px(e,t,n){const a=on(e,t,e[t]??n.value);return a.value=e[t]??n.value,We(n,r=>{e[t]==null&&(a.value=n.value)}),a}function J8(e){return t=>{const n=Px(t,"locale",e.current),a=Px(t,"fallback",e.fallback),r=Px(t,"messages",e.messages);return{name:"vuetify",current:n,fallback:a,messages:r,decimalSeparator:qe(()=>X8(n,a)),t:Y8(n,a,r),n:gk(n,a),provide:J8({current:n,fallback:a,messages:r})}}}function zte(e){const t=Ht(e?.locale??"en"),n=Ht(e?.fallback??"en"),a=M({en:Gte,...e?.messages});return{name:"vuetify",current:t,fallback:n,messages:a,decimalSeparator:qe(()=>e?.decimalSeparator??X8(t,n)),t:Y8(t,n,a),n:gk(t,n),provide:J8({current:t,fallback:n,messages:a})}}const wh=Symbol.for("vuetify:locale");function Kte(e){return e.name!=null}function Wte(e){const t=e?.adapter&&Kte(e?.adapter)?e?.adapter:zte(e),n=Yte(t,e);return{...t,...n}}function Pa(){const e=Sn(wh);if(!e)throw new Error("[Vuetify] Could not find injected locale instance");return e}function jte(e){const t=Sn(wh);if(!t)throw new Error("[Vuetify] Could not find injected locale instance");const n=t.provide(e),a=Xte(n,t.rtl,e),r={...n,...a};return Ia(wh,r),r}function qte(){return{af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!0,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,km:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1}}function Yte(e,t){const n=M(t?.rtl??qte()),a=ee(()=>n.value[e.current.value]??!1);return{isRtl:a,rtl:n,rtlClasses:qe(()=>`v-locale--is-${a.value?"rtl":"ltr"}`)}}function Xte(e,t,n){const a=ee(()=>n.rtl??t.value[e.current.value]??!1);return{isRtl:a,rtl:t,rtlClasses:qe(()=>`v-locale--is-${a.value?"rtl":"ltr"}`)}}function Kr(){const e=Sn(wh);if(!e)throw new Error("[Vuetify] Could not find injected rtl instance");return{isRtl:e.isRtl,rtlClasses:e.rtlClasses}}function ag(e){const t=e.slice(-2).toUpperCase();switch(!0){case e==="GB-alt-variant":return{firstDay:0,firstWeekSize:4};case e==="001":return{firstDay:1,firstWeekSize:1};case`AG AS BD BR BS BT BW BZ CA CO DM DO ET GT GU HK HN ID IL IN JM JP KE
    KH KR LA MH MM MO MT MX MZ NI NP PA PE PH PK PR PY SA SG SV TH TT TW UM US
    VE VI WS YE ZA ZW`.includes(t):return{firstDay:0,firstWeekSize:1};case`AI AL AM AR AU AZ BA BM BN BY CL CM CN CR CY EC GE HR KG KZ LB LK LV
    MD ME MK MN MY NZ RO RS SI TJ TM TR UA UY UZ VN XK`.includes(t):return{firstDay:1,firstWeekSize:1};case`AD AN AT AX BE BG CH CZ DE DK EE ES FI FJ FO FR GB GF GP GR HU IE IS
    IT LI LT LU MC MQ NL NO PL RE RU SE SK SM VA`.includes(t):return{firstDay:1,firstWeekSize:4};case"AE AF BH DJ DZ EG IQ IR JO KW LY OM QA SD SY".includes(t):return{firstDay:6,firstWeekSize:1};case t==="MV":return{firstDay:5,firstWeekSize:1};case t==="PT":return{firstDay:0,firstWeekSize:4};default:return null}}function Jte(e,t,n){const a=[];let r=[];const s=Z8(e),o=e6(e),i=n??ag(t)?.firstDay??0,c=(s.getDay()-i+7)%7,A=(o.getDay()-i+7)%7;for(let d=0;d<c;d++){const f=new Date(s);f.setDate(f.getDate()-(c-d)),r.push(f)}for(let d=1;d<=o.getDate();d++){const f=new Date(e.getFullYear(),e.getMonth(),d);r.push(f),r.length===7&&(a.push(r),r=[])}for(let d=1;d<7-A;d++){const f=new Date(o);f.setDate(f.getDate()+d),r.push(f)}return r.length>0&&a.push(r),a}function IS(e,t,n){let a=(n??ag(t)?.firstDay??0)%7;[0,1,2,3,4,5,6].includes(a)||(a=0);const r=new Date(e);for(;r.getDay()!==a;)r.setDate(r.getDate()-1);return r}function Zte(e,t){const n=new Date(e),a=((ag(t)?.firstDay??0)+6)%7;for(;n.getDay()!==a;)n.setDate(n.getDate()+1);return n}function Z8(e){return new Date(e.getFullYear(),e.getMonth(),1)}function e6(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}function ene(e){const t=e.split("-").map(Number);return new Date(t[0],t[1]-1,t[2])}const tne=/^([12]\d{3}-([1-9]|0[1-9]|1[0-2])-([1-9]|0[1-9]|[12]\d|3[01]))$/;function t6(e){if(e==null)return new Date;if(e instanceof Date)return e;if(typeof e=="string"){let t;if(tne.test(e))return ene(e);if(t=Date.parse(e),!isNaN(t))return new Date(t)}return null}const AD=new Date(2e3,0,2);function nne(e,t,n){const a=t??ag(e)?.firstDay??0;return yi(7).map(r=>{const s=new Date(AD);return s.setDate(AD.getDate()+a+r),new Intl.DateTimeFormat(e,{weekday:n??"narrow"}).format(s)})}function ane(e,t,n,a){const r=t6(e)??new Date,s=a?.[t];if(typeof s=="function")return s(r,t,n);let o={};switch(t){case"fullDate":o={year:"numeric",month:"short",day:"numeric"};break;case"fullDateWithWeekday":o={weekday:"long",year:"numeric",month:"long",day:"numeric"};break;case"normalDate":const i=r.getDate(),c=new Intl.DateTimeFormat(n,{month:"long"}).format(r);return`${i} ${c}`;case"normalDateWithWeekday":o={weekday:"short",day:"numeric",month:"short"};break;case"shortDate":o={month:"short",day:"numeric"};break;case"year":o={year:"numeric"};break;case"month":o={month:"long"};break;case"monthShort":o={month:"short"};break;case"monthAndYear":o={month:"long",year:"numeric"};break;case"monthAndDate":o={month:"long",day:"numeric"};break;case"weekday":o={weekday:"long"};break;case"weekdayShort":o={weekday:"short"};break;case"dayOfMonth":return new Intl.NumberFormat(n).format(r.getDate());case"hours12h":o={hour:"numeric",hour12:!0};break;case"hours24h":o={hour:"numeric",hour12:!1};break;case"minutes":o={minute:"numeric"};break;case"seconds":o={second:"numeric"};break;case"fullTime":o={hour:"numeric",minute:"numeric"};break;case"fullTime12h":o={hour:"numeric",minute:"numeric",hour12:!0};break;case"fullTime24h":o={hour:"numeric",minute:"numeric",hour12:!1};break;case"fullDateTime":o={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"};break;case"fullDateTime12h":o={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0};break;case"fullDateTime24h":o={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1};break;case"keyboardDate":o={year:"numeric",month:"2-digit",day:"2-digit"};break;case"keyboardDateTime":return o={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric"},new Intl.DateTimeFormat(n,o).format(r).replace(/, /g," ");case"keyboardDateTime12h":return o={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!0},new Intl.DateTimeFormat(n,o).format(r).replace(/, /g," ");case"keyboardDateTime24h":return o={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!1},new Intl.DateTimeFormat(n,o).format(r).replace(/, /g," ");default:o=s??{timeZone:"UTC",timeZoneName:"short"}}return new Intl.DateTimeFormat(n,o).format(r)}function rne(e,t){const n=e.toJsDate(t),a=n.getFullYear(),r=WP(String(n.getMonth()+1),2,"0"),s=WP(String(n.getDate()),2,"0");return`${a}-${r}-${s}`}function sne(e){const[t,n,a]=e.split("-").map(Number);return new Date(t,n-1,a)}function one(e,t){const n=new Date(e);return n.setMinutes(n.getMinutes()+t),n}function ine(e,t){const n=new Date(e);return n.setHours(n.getHours()+t),n}function Oy(e,t){const n=new Date(e);return n.setDate(n.getDate()+t),n}function lne(e,t){const n=new Date(e);return n.setDate(n.getDate()+t*7),n}function une(e,t){const n=new Date(e);return n.setDate(1),n.setMonth(n.getMonth()+t),n}function FS(e){return e.getFullYear()}function cne(e){return e.getMonth()}function dne(e,t,n,a){const r=ag(t),s=n??r?.firstDay??0,o=a??r?.firstWeekSize??1;function i(h){const v=new Date(h,0,1);return 7-PS(v,IS(v,t,s),"days")}let c=FS(e);const A=Oy(IS(e,t,s),6);c<FS(A)&&i(c+1)>=o&&c++;const d=new Date(c,0,1),f=i(c),m=f>=o?Oy(d,f-7):Oy(d,f);return 1+PS(n6(e),k_(m),"weeks")}function Ane(e){return e.getDate()}function fne(e){return new Date(e.getFullYear(),e.getMonth()+1,1)}function mne(e){return new Date(e.getFullYear(),e.getMonth()-1,1)}function hne(e){return e.getHours()}function vne(e){return e.getMinutes()}function pne(e){return new Date(e.getFullYear(),0,1)}function gne(e){return new Date(e.getFullYear(),11,31)}function yne(e,t){return B_(e,t[0])&&bne(e,t[1])}function _ne(e){const t=new Date(e);return t instanceof Date&&!isNaN(t.getTime())}function B_(e,t){return e.getTime()>t.getTime()}function wne(e,t){return B_(k_(e),k_(t))}function bne(e,t){return e.getTime()<t.getTime()}function fD(e,t){return e.getTime()===t.getTime()}function xne(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function Cne(e,t){return e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function Sne(e,t){return e.getFullYear()===t.getFullYear()}function PS(e,t,n){const a=new Date(e),r=new Date(t);switch(n){case"years":return a.getFullYear()-r.getFullYear();case"quarters":return Math.floor((a.getMonth()-r.getMonth()+(a.getFullYear()-r.getFullYear())*12)/4);case"months":return a.getMonth()-r.getMonth()+(a.getFullYear()-r.getFullYear())*12;case"weeks":return Math.floor((a.getTime()-r.getTime())/(1e3*60*60*24*7));case"days":return Math.floor((a.getTime()-r.getTime())/(1e3*60*60*24));case"hours":return Math.floor((a.getTime()-r.getTime())/(1e3*60*60));case"minutes":return Math.floor((a.getTime()-r.getTime())/(1e3*60));case"seconds":return Math.floor((a.getTime()-r.getTime())/1e3);default:return a.getTime()-r.getTime()}}function Ene(e,t){const n=new Date(e);return n.setHours(t),n}function Bne(e,t){const n=new Date(e);return n.setMinutes(t),n}function kne(e,t){const n=new Date(e);return n.setMonth(t),n}function Tne(e,t){const n=new Date(e);return n.setDate(t),n}function Ine(e,t){const n=new Date(e);return n.setFullYear(t),n}function k_(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0)}function n6(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,59,999)}class Fne{constructor(t){this.locale=t.locale,this.formats=t.formats}date(t){return t6(t)}toJsDate(t){return t}toISO(t){return rne(this,t)}parseISO(t){return sne(t)}addMinutes(t,n){return one(t,n)}addHours(t,n){return ine(t,n)}addDays(t,n){return Oy(t,n)}addWeeks(t,n){return lne(t,n)}addMonths(t,n){return une(t,n)}getWeekArray(t,n){const a=n!==void 0?Number(n):void 0;return Jte(t,this.locale,a)}startOfWeek(t,n){const a=n!==void 0?Number(n):void 0;return IS(t,this.locale,a)}endOfWeek(t){return Zte(t,this.locale)}startOfMonth(t){return Z8(t)}endOfMonth(t){return e6(t)}format(t,n){return ane(t,n,this.locale,this.formats)}isEqual(t,n){return fD(t,n)}isValid(t){return _ne(t)}isWithinRange(t,n){return yne(t,n)}isAfter(t,n){return B_(t,n)}isAfterDay(t,n){return wne(t,n)}isBefore(t,n){return!B_(t,n)&&!fD(t,n)}isSameDay(t,n){return xne(t,n)}isSameMonth(t,n){return Cne(t,n)}isSameYear(t,n){return Sne(t,n)}setMinutes(t,n){return Bne(t,n)}setHours(t,n){return Ene(t,n)}setMonth(t,n){return kne(t,n)}setDate(t,n){return Tne(t,n)}setYear(t,n){return Ine(t,n)}getDiff(t,n,a){return PS(t,n,a)}getWeekdays(t,n){const a=t!==void 0?Number(t):void 0;return nne(this.locale,a,n)}getYear(t){return FS(t)}getMonth(t){return cne(t)}getWeek(t,n,a){const r=n!==void 0?Number(n):void 0;return dne(t,this.locale,r,a)}getDate(t){return Ane(t)}getNextMonth(t){return fne(t)}getPreviousMonth(t){return mne(t)}getHours(t){return hne(t)}getMinutes(t){return vne(t)}startOfDay(t){return k_(t)}endOfDay(t){return n6(t)}startOfYear(t){return pne(t)}endOfYear(t){return gne(t)}}const a6=Symbol.for("vuetify:date-options"),mD=Symbol.for("vuetify:date-adapter");function Pne(e,t){const n=Ao({adapter:Fne,locale:{af:"af-ZA",bg:"bg-BG",ca:"ca-ES",ckb:"",cs:"cs-CZ",de:"de-DE",el:"el-GR",en:"en-US",et:"et-EE",fa:"fa-IR",fi:"fi-FI",hr:"hr-HR",hu:"hu-HU",he:"he-IL",id:"id-ID",it:"it-IT",ja:"ja-JP",ko:"ko-KR",lv:"lv-LV",lt:"lt-LT",nl:"nl-NL",no:"no-NO",pl:"pl-PL",pt:"pt-PT",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",srCyrl:"sr-SP",srLatn:"sr-SP",sv:"sv-SE",th:"th-TH",tr:"tr-TR",az:"az-AZ",uk:"uk-UA",vi:"vi-VN",zhHans:"zh-CN",zhHant:"zh-TW"}},e);return{options:n,instance:r6(n,t)}}function Dne(e,t,n){const a=e.getDiff(e.endOfDay(n??t),e.startOfDay(t),"days"),r=[t];for(let s=1;s<a;s++){const o=e.addDays(t,s);r.push(o)}return n&&r.push(e.endOfDay(n)),r}function r6(e,t){const n=es(typeof e.adapter=="function"?new e.adapter({locale:e.locale[t.current.value]??t.current.value,formats:e.formats}):e.adapter);return We(t.current,a=>{n.locale=e.locale[a]??a??n.locale}),n}function rg(){const e=Sn(a6);if(!e)throw new Error("[Vuetify] Could not find injected date options");const t=Pa();return r6(e,t)}const aw=["sm","md","lg","xl","xxl"],DS=Symbol.for("vuetify:display"),hD={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},Une=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:hD;return Ao(hD,e)};function vD(e){return _a&&!e?window.innerWidth:typeof e=="object"&&e.clientWidth||0}function pD(e){return _a&&!e?window.innerHeight:typeof e=="object"&&e.clientHeight||0}function gD(e){const t=_a&&!e?window.navigator.userAgent:"ssr";function n(v){return!!t.match(v)}const a=n(/android/i),r=n(/iphone|ipad|ipod/i),s=n(/cordova/i),o=n(/electron/i),i=n(/chrome/i),c=n(/edge/i),A=n(/firefox/i),d=n(/opera/i),f=n(/win/i),m=n(/mac/i),h=n(/linux/i);return{android:a,ios:r,cordova:s,electron:o,chrome:i,edge:c,firefox:A,opera:d,win:f,mac:m,linux:h,touch:Yee,ssr:t==="ssr"}}function Rne(e,t){const{thresholds:n,mobileBreakpoint:a}=Une(e),r=Ht(pD(t)),s=Ht(gD(t)),o=es({}),i=Ht(vD(t));function c(){r.value=pD(),i.value=vD()}function A(){c(),s.value=gD()}return Ar(()=>{const d=i.value<n.sm,f=i.value<n.md&&!d,m=i.value<n.lg&&!(f||d),h=i.value<n.xl&&!(m||f||d),v=i.value<n.xxl&&!(h||m||f||d),y=i.value>=n.xxl,g=d?"xs":f?"sm":m?"md":h?"lg":v?"xl":"xxl",w=typeof a=="number"?a:n[a],b=i.value<w;o.xs=d,o.sm=f,o.md=m,o.lg=h,o.xl=v,o.xxl=y,o.smAndUp=!d,o.mdAndUp=!(d||f),o.lgAndUp=!(d||f||m),o.xlAndUp=!(d||f||m||h),o.smAndDown=!(m||h||v||y),o.mdAndDown=!(h||v||y),o.lgAndDown=!(v||y),o.xlAndDown=!y,o.name=g,o.height=r.value,o.width=i.value,o.mobile=b,o.mobileBreakpoint=a,o.platform=s.value,o.thresholds=n}),_a&&(window.addEventListener("resize",c,{passive:!0}),as(()=>{window.removeEventListener("resize",c)},!0)),{...Ef(o),update:A,ssr:!!t}}const kf=ot({mobile:{type:Boolean,default:!1},mobileBreakpoint:[Number,String]},"display");function Ji(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{mobile:null},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Du();const n=Sn(DS);if(!n)throw new Error("Could not find Vuetify display injection");const a=ee(()=>e.mobile?!0:typeof e.mobileBreakpoint=="number"?n.width.value<e.mobileBreakpoint:e.mobileBreakpoint?n.width.value<n.thresholds.value[e.mobileBreakpoint]:e.mobile===null?n.mobile.value:!1),r=qe(()=>t?{[`${t}--mobile`]:a.value}:{});return{...n,displayClasses:r,mobile:a}}const s6=Symbol.for("vuetify:goto");function o6(){return{container:void 0,duration:300,layout:!1,offset:0,easing:"easeInOutCubic",patterns:Ote}}function Nne(e){return yk(e)??(document.scrollingElement||document.body)}function yk(e){return typeof e=="string"?document.querySelector(e):uk(e)}function Dx(e,t,n){if(typeof e=="number")return t&&n?-e:e;let a=yk(e),r=0;for(;a;)r+=t?a.offsetLeft:a.offsetTop,a=a.offsetParent;return r}function Vne(e,t){return{rtl:t.isRtl,options:Ao(o6(),e)}}async function yD(e,t,n,a){const r=n?"scrollLeft":"scrollTop",s=Ao(a?.options??o6(),t),o=a?.rtl.value,i=(typeof e=="number"?e:yk(e))??0,c=s.container==="parent"&&i instanceof HTMLElement?i.parentElement:Nne(s.container),A=typeof s.easing=="function"?s.easing:s.patterns[s.easing];if(!A)throw new TypeError(`Easing function "${s.easing}" not found.`);let d;if(typeof i=="number")d=Dx(i,n,o);else if(d=Dx(i,n,o)-Dx(c,n,o),s.layout){const v=window.getComputedStyle(i).getPropertyValue("--v-layout-top");v&&(d-=parseInt(v,10))}d+=s.offset,d=Mne(c,d,!!o,!!n);const f=c[r]??0;if(d===f)return Promise.resolve(d);const m=performance.now();return new Promise(h=>requestAnimationFrame(function v(y){const w=(y-m)/s.duration,b=Math.floor(f+(d-f)*A(Qa(w,0,1)));if(c[r]=b,w>=1&&Math.abs(b-c[r])<10)return h(d);if(w>2)return h(c[r]);requestAnimationFrame(v)}))}function Lne(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=Sn(s6),{isRtl:n}=Kr();if(!t)throw new Error("[Vuetify] Could not find injected goto instance");const a={...t,rtl:qe(()=>t.rtl.value||n.value)};async function r(s,o){return yD(s,Ao(e,o),!1,a)}return r.horizontal=async(s,o)=>yD(s,Ao(e,o),!0,a),r}function Mne(e,t,n,a){const{scrollWidth:r,scrollHeight:s}=e,[o,i]=e===document.scrollingElement?[window.innerWidth,window.innerHeight]:[e.offsetWidth,e.offsetHeight];let c,A;return a?n?(c=-(r-o),A=0):(c=0,A=r-o):(c=0,A=s+-i),Qa(t,c,A)}const One={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sortAsc:"mdi-arrow-up",sortDesc:"mdi-arrow-down",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus",calendar:"mdi-calendar",treeviewCollapse:"mdi-menu-down",treeviewExpand:"mdi-menu-right",eyeDropper:"mdi-eyedropper",upload:"mdi-cloud-upload",color:"mdi-palette",command:"mdi-apple-keyboard-command",ctrl:"mdi-apple-keyboard-control",space:"mdi-keyboard-space",shift:"mdi-apple-keyboard-shift",alt:"mdi-apple-keyboard-option",enter:"mdi-keyboard-return",arrowup:"mdi-arrow-up",arrowdown:"mdi-arrow-down",arrowleft:"mdi-arrow-left",arrowright:"mdi-arrow-right",backspace:"mdi-backspace",play:"mdi-play",pause:"mdi-pause",fullscreen:"mdi-fullscreen",fullscreenExit:"mdi-fullscreen-exit",volumeHigh:"mdi-volume-high",volumeMedium:"mdi-volume-medium",volumeLow:"mdi-volume-low",volumeOff:"mdi-volume-variant-off"},Hne={component:e=>Wl(wk,{...e,class:"mdi"})},un=[String,Function,Object,Array],US=Symbol.for("vuetify:icons"),rw=ot({icon:{type:un},tag:{type:[String,Object,Function],required:!0}},"icon"),RS=yt()({name:"VComponentIcon",props:rw(),setup(e,t){let{slots:n}=t;return()=>{const a=e.icon;return l(e.tag,null,{default:()=>[e.icon?l(a,null,null):n.default?.()]})}}}),_k=Ei({name:"VSvgIcon",inheritAttrs:!1,props:rw(),setup(e,t){let{attrs:n}=t;return()=>l(e.tag,Fe(n,{style:null}),{default:()=>[p("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[Array.isArray(e.icon)?e.icon.map(a=>Array.isArray(a)?p("path",{d:a[0],"fill-opacity":a[1]},null):p("path",{d:a},null)):p("path",{d:e.icon},null)])]})}}),$ne=Ei({name:"VLigatureIcon",props:rw(),setup(e){return()=>l(e.tag,null,{default:()=>[e.icon]})}}),wk=Ei({name:"VClassIcon",props:rw(),setup(e){return()=>l(e.tag,{class:ct(e.icon)},null)}});function Qne(){return{svg:{component:_k},class:{component:wk}}}function Gne(e){const t=Qne(),n=e?.defaultSet??"mdi";return n==="mdi"&&!t.mdi&&(t.mdi=Hne),Ao({defaultSet:n,sets:t,aliases:{...One,vuetify:["M8.2241 14.2009L12 21L22 3H14.4459L8.2241 14.2009Z",["M7.26303 12.4733L7.00113 12L2 3H12.5261C12.5261 3 12.5261 3 12.5261 3L7.26303 12.4733Z",.6]],"vuetify-outline":"svg:M7.26 12.47 12.53 3H2L7.26 12.47ZM14.45 3 8.22 14.2 12 21 22 3H14.45ZM18.6 5 12 16.88 10.51 14.2 15.62 5ZM7.26 8.35 5.4 5H9.13L7.26 8.35Z","vuetify-play":["m6.376 13.184-4.11-7.192C1.505 4.66 2.467 3 4.003 3h8.532l-.953 1.576-.006.01-.396.677c-.429.732-.214 1.507.194 2.015.404.503 1.092.878 1.869.806a3.72 3.72 0 0 1 1.005.022c.276.053.434.143.523.237.138.146.38.635-.25 2.09-.893 1.63-1.553 1.722-1.847 1.677-.213-.033-.468-.158-.756-.406a4.95 4.95 0 0 1-.8-.927c-.39-.564-1.04-.84-1.66-.846-.625-.006-1.316.27-1.693.921l-.478.826-.911 1.506Z",["M9.093 11.552c.046-.079.144-.15.32-.148a.53.53 0 0 1 .43.207c.285.414.636.847 1.046 1.2.405.35.914.662 1.516.754 1.334.205 2.502-.698 3.48-2.495l.014-.028.013-.03c.687-1.574.774-2.852-.005-3.675-.37-.391-.861-.586-1.333-.676a5.243 5.243 0 0 0-1.447-.044c-.173.016-.393-.073-.54-.257-.145-.18-.127-.316-.082-.392l.393-.672L14.287 3h5.71c1.536 0 2.499 1.659 1.737 2.992l-7.997 13.996c-.768 1.344-2.706 1.344-3.473 0l-3.037-5.314 1.377-2.278.004-.006.004-.007.481-.831Z",.6]]}},e)}const zne=e=>{const t=Sn(US);if(!t)throw new Error("Missing Vuetify Icons provide!");return{iconData:ee(()=>{const a=xu(e);if(!a)return{component:RS};let r=a;if(typeof r=="string"&&(r=r.trim(),r.startsWith("$")&&(r=t.aliases?.[r.slice(1)])),Array.isArray(r))return{component:_k,icon:r};if(typeof r!="string")return{component:RS,icon:r};const s=Object.keys(t.sets).find(c=>typeof r=="string"&&r.startsWith(`${c}:`)),o=s?r.slice(s.length+1):r;return{component:t.sets[s??t.defaultSet].component,icon:o}})}},v0=Symbol.for("vuetify:theme"),aa=ot({theme:String},"theme");function _D(){return{defaultTheme:"light",prefix:"v-",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-bright":"#FFFFFF","surface-light":"#EEEEEE","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#1867C0","primary-darken-1":"#1F5592",secondary:"#48A9A6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#EEEEEE","theme-on-kbd":"#000000","theme-code":"#F5F5F5","theme-on-code":"#000000"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-bright":"#ccbfd6","surface-light":"#424242","surface-variant":"#c8c8c8","on-surface-variant":"#000000",primary:"#2196F3","primary-darken-1":"#277CC1",secondary:"#54B6B2","secondary-darken-1":"#48A9A6",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":1,"medium-emphasis-opacity":.7,"disabled-opacity":.5,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"theme-kbd":"#424242","theme-on-kbd":"#FFFFFF","theme-code":"#343434","theme-on-code":"#CCCCCC"}}},stylesheetId:"vuetify-theme-stylesheet",scoped:!1,unimportant:!1,utilities:!0}}function Kne(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_D();const t=_D();if(!e)return{...t,isDisabled:!0};const n={};for(const[a,r]of Object.entries(e.themes??{})){const s=r.dark||a==="dark"?t.themes?.dark:t.themes?.light;n[a]=Ao(s,r)}return Ao(t,{...e,themes:n})}function _A(e,t,n,a){e.push(`${Yne(t,a)} {
`,...n.map(r=>`  ${r};
`),`}
`)}function wD(e,t){const n=e.dark?2:1,a=e.dark?1:2,r=[];for(const[s,o]of Object.entries(e.colors)){const i=_i(o);r.push(`--${t}theme-${s}: ${i.r},${i.g},${i.b}`),s.startsWith("on-")||r.push(`--${t}theme-${s}-overlay-multiplier: ${TS(o)>.18?n:a}`)}for(const[s,o]of Object.entries(e.variables)){const i=typeof o=="string"&&o.startsWith("#")?_i(o):void 0,c=i?`${i.r}, ${i.g}, ${i.b}`:void 0;r.push(`--${t}${s}: ${c??o}`)}return r}function Wne(e,t,n){const a={};if(n)for(const r of["lighten","darken"]){const s=r==="lighten"?Ite:Fte;for(const o of yi(n[r],1))a[`${e}-${r}-${o}`]=z8(s(_i(t),o))}return a}function jne(e,t){if(!t)return{};let n={};for(const a of t.colors){const r=e[a];r&&(n={...n,...Wne(a,r,t)})}return n}function qne(e){const t={};for(const n of Object.keys(e)){if(n.startsWith("on-")||e[`on-${n}`])continue;const a=`on-${n}`,r=_i(e[n]);t[a]=j8(r)}return t}function Yne(e,t){if(!t)return e;const n=`:where(${t})`;return e===":root"?n:`${n} ${e}`}function Xne(e,t,n){const a=Jne(e,t);a&&(a.innerHTML=n)}function Jne(e,t){if(!_a)return null;let n=document.getElementById(e);return n||(n=document.createElement("style"),n.id=e,n.type="text/css",t&&n.setAttribute("nonce",t),document.head.appendChild(n)),n}function Zne(e){const t=Kne(e),n=Ht(t.defaultTheme),a=M(t.themes),r=Ht("light"),s=ee({get(){return n.value==="system"?r.value:n.value},set(w){n.value=w}}),o=ee(()=>{const w={};for(const[b,x]of Object.entries(a.value)){const T={...x.colors,...jne(x.colors,t.variations)};w[b]={...x,colors:{...T,...qne(T)}}}return w}),i=qe(()=>o.value[s.value]),c=qe(()=>n.value==="system"),A=ee(()=>{const w=[],b=t.unimportant?"":" !important",x=t.scoped?t.prefix:"";i.value?.dark&&_A(w,":root",["color-scheme: dark"],t.scope),_A(w,":root",wD(i.value,t.prefix),t.scope);for(const[T,U]of Object.entries(o.value))_A(w,`.${t.prefix}theme--${T}`,[`color-scheme: ${U.dark?"dark":"normal"}`,...wD(U,t.prefix)],t.scope);if(t.utilities){const T=[],U=[],k=new Set(Object.values(o.value).flatMap(S=>Object.keys(S.colors)));for(const S of k)S.startsWith("on-")?_A(U,`.${S}`,[`color: rgb(var(--${t.prefix}theme-${S}))${b}`],t.scope):(_A(T,`.${x}bg-${S}`,[`--${t.prefix}theme-overlay-multiplier: var(--${t.prefix}theme-${S}-overlay-multiplier)`,`background-color: rgb(var(--${t.prefix}theme-${S}))${b}`,`color: rgb(var(--${t.prefix}theme-on-${S}))${b}`],t.scope),_A(U,`.${x}text-${S}`,[`color: rgb(var(--${t.prefix}theme-${S}))${b}`],t.scope),_A(U,`.${x}border-${S}`,[`--${t.prefix}border-color: var(--${t.prefix}theme-${S})`],t.scope));w.push(...T,...U)}return w.map((T,U)=>U===0?T:`    ${T}`).join("")}),d=qe(()=>t.isDisabled?void 0:`${t.prefix}theme--${s.value}`),f=qe(()=>Object.keys(o.value));if(Xee){let b=function(){r.value=w.matches?"dark":"light"};const w=window.matchMedia("(prefers-color-scheme: dark)");b(),w.addEventListener("change",b,{passive:!0}),dL()&&as(()=>{w.removeEventListener("change",b)})}function m(w){if(t.isDisabled)return;const b=w._context.provides.usehead;if(b){let x=function(){return{style:[{textContent:A.value,id:t.stylesheetId,nonce:t.cspNonce||!1}]}};if(b.push){const T=b.push(x);_a&&We(A,()=>{T.patch(x)})}else _a?(b.addHeadObjs(qe(x)),Ar(()=>b.updateDOM())):b.addHeadObjs(x())}else{let x=function(){Xne(t.stylesheetId,t.cspNonce,A.value)};_a?We(A,x,{immediate:!0}):x()}}function h(w){w!=="system"&&!f.value.includes(w)||(s.value=w)}function v(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:f.value;const b=w.indexOf(s.value),x=b===-1?0:(b+1)%w.length;h(w[x])}function y(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["light","dark"];v(w)}const g=new Proxy(s,{get(w,b){return Reflect.get(w,b)},set(w,b,x){return b==="value"&&M8(`theme.global.name.value = ${x}`,`theme.change('${x}')`),Reflect.set(w,b,x)}});return{install:m,change:h,cycle:v,toggle:y,isDisabled:t.isDisabled,isSystem:c,name:s,themes:a,current:i,computedThemes:o,prefix:t.prefix,themeClasses:d,styles:A,global:{name:g,current:i}}}function wa(e){Er("provideTheme");const t=Sn(v0,null);if(!t)throw new Error("Could not find Vuetify theme injection");const n=qe(()=>e.theme??t.name.value),a=qe(()=>t.themes.value[n.value]),r=qe(()=>t.isDisabled?void 0:`${t.prefix}theme--${n.value}`),s={...t,name:n,current:a,themeClasses:r};return Ia(v0,s),s}function bk(){Er("useTheme");const e=Sn(v0,null);if(!e)throw new Error("Could not find Vuetify theme injection");return e}function Rl(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"content";const n=x_(),a=M();if(_a){const r=new ResizeObserver(s=>{e?.(s,r),s.length&&(t==="content"?a.value=s[0].contentRect:a.value=s[0].target.getBoundingClientRect())});la(()=>{r.disconnect()}),We(()=>n.el,(s,o)=>{o&&(r.unobserve(o),a.value=void 0),s&&r.observe(s)},{flush:"post"})}return{resizeRef:n,contentRect:$h(a)}}const p0=Symbol.for("vuetify:layout"),i6=Symbol.for("vuetify:layout-item"),bD=1e3,l6=ot({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),Tf=ot({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function u6(){const e=Sn(p0);if(!e)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:e.getLayoutItem,mainRect:e.mainRect,mainStyles:e.mainStyles}}function If(e){const t=Sn(p0);if(!t)throw new Error("[Vuetify] Could not find injected layout");const n=e.id??`layout-item-${Ho()}`,a=Er("useLayoutItem");Ia(i6,{id:n});const r=Ht(!1);q2(()=>r.value=!0),Z0(()=>r.value=!1);const{layoutItemStyles:s,layoutItemScrimStyles:o}=t.register(a,{...e,active:ee(()=>r.value?!1:e.active.value),id:n});return la(()=>t.unregister(n)),{layoutItemStyles:s,layoutRect:t.layoutRect,layoutItemScrimStyles:o}}const eae=(e,t,n,a)=>{let r={top:0,left:0,right:0,bottom:0};const s=[{id:"",layer:{...r}}];for(const o of e){const i=t.get(o),c=n.get(o),A=a.get(o);if(!i||!c||!A)continue;const d={...r,[i.value]:parseInt(r[i.value],10)+(A.value?parseInt(c.value,10):0)};s.push({id:o,layer:d}),r=d}return s};function c6(e){const t=Sn(p0,null),n=ee(()=>t?t.rootZIndex.value-100:bD),a=M([]),r=es(new Map),s=es(new Map),o=es(new Map),i=es(new Map),c=es(new Map),{resizeRef:A,contentRect:d}=Rl(),f=ee(()=>{const k=new Map,S=e.overlaps??[];for(const E of S.filter(C=>C.includes(":"))){const[C,P]=E.split(":");if(!a.value.includes(C)||!a.value.includes(P))continue;const F=r.get(C),N=r.get(P),L=s.get(C),ie=s.get(P);!F||!N||!L||!ie||(k.set(P,{position:F.value,amount:parseInt(L.value,10)}),k.set(C,{position:N.value,amount:-parseInt(ie.value,10)}))}return k}),m=ee(()=>{const k=[...new Set([...o.values()].map(E=>E.value))].sort((E,C)=>E-C),S=[];for(const E of k){const C=a.value.filter(P=>o.get(P)?.value===E);S.push(...C)}return eae(S,r,s,i)}),h=ee(()=>!Array.from(c.values()).some(k=>k.value)),v=ee(()=>m.value[m.value.length-1].layer),y=qe(()=>({"--v-layout-left":jt(v.value.left),"--v-layout-right":jt(v.value.right),"--v-layout-top":jt(v.value.top),"--v-layout-bottom":jt(v.value.bottom),...h.value?void 0:{transition:"none"}})),g=ee(()=>m.value.slice(1).map((k,S)=>{let{id:E}=k;const{layer:C}=m.value[S],P=s.get(E),F=r.get(E);return{id:E,...C,size:Number(P.value),position:F.value}})),w=k=>g.value.find(S=>S.id===k),b=Er("createLayout"),x=Ht(!1);cn(()=>{x.value=!0}),Ia(p0,{register:(k,S)=>{let{id:E,order:C,position:P,layoutSize:F,elementSize:N,active:L,disableTransitions:ie,absolute:le}=S;o.set(E,C),r.set(E,P),s.set(E,F),i.set(E,L),ie&&c.set(E,ie);const Z=Lm(i6,b?.vnode).indexOf(k);Z>-1?a.value.splice(Z,0,E):a.value.push(E);const ce=ee(()=>g.value.findIndex(D=>D.id===E)),J=ee(()=>n.value+m.value.length*2-ce.value*2),se=ee(()=>{const D=P.value==="left"||P.value==="right",j=P.value==="right",ne=P.value==="bottom",H=N.value??F.value,te=H===0?"%":"px",Y={[P.value]:0,zIndex:J.value,transform:`translate${D?"X":"Y"}(${(L.value?0:-(H===0?100:H))*(j||ne?-1:1)}${te})`,position:le.value||n.value!==bD?"absolute":"fixed",...h.value?void 0:{transition:"none"}};if(!x.value)return Y;const K=g.value[ce.value],X=f.value.get(E);return X&&(K[X.position]+=X.amount),{...Y,height:D?`calc(100% - ${K.top}px - ${K.bottom}px)`:N.value?`${N.value}px`:void 0,left:j?void 0:`${K.left}px`,right:j?`${K.right}px`:void 0,top:P.value!=="bottom"?`${K.top}px`:void 0,bottom:P.value!=="top"?`${K.bottom}px`:void 0,width:D?N.value?`${N.value}px`:void 0:`calc(100% - ${K.left}px - ${K.right}px)`}}),G=ee(()=>({zIndex:J.value-1}));return{layoutItemStyles:se,layoutItemScrimStyles:G,zIndex:J}},unregister:k=>{o.delete(k),r.delete(k),s.delete(k),i.delete(k),c.delete(k),a.value=a.value.filter(S=>S!==k)},mainRect:v,mainStyles:y,getLayoutItem:w,items:g,layoutRect:d,rootZIndex:n});const T=qe(()=>["v-layout",{"v-layout--full-height":e.fullHeight}]),U=qe(()=>({zIndex:t?n.value:void 0,position:t?"relative":void 0,overflow:t?"hidden":void 0}));return{layoutClasses:T,layoutStyles:U,getLayoutItem:w,items:g,layoutRect:d,layoutRef:A}}function d6(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:t,...n}=e,a=Ao(t,n),{aliases:r={},components:s={},directives:o={}}=a,i=Ed();return i.run(()=>{const c=Ute(a.defaults),A=Rne(a.display,a.ssr),d=Zne(a.theme),f=Gne(a.icons),m=Wte(a.locale),h=Pne(a.date,m),v=Vne(a.goTo,m);function y(w){for(const x in o)w.directive(x,o[x]);for(const x in s)w.component(x,s[x]);for(const x in r)w.component(x,Ei({...r[x],name:x,aliasName:r[x].name}));const b=Ed();if(b.run(()=>{d.install(w)}),w.onUnmount(()=>b.stop()),w.provide(_h,c),w.provide(DS,A),w.provide(v0,d),w.provide(US,f),w.provide(wh,m),w.provide(a6,h.options),w.provide(mD,h.instance),w.provide(s6,v),_a&&a.ssr)if(w.$nuxt)w.$nuxt.hook("app:suspense:resolve",()=>{A.update()});else{const{mount:x}=w;w.mount=function(){const T=x(...arguments);return bn(()=>A.update()),w.mount=x,T}}w.mixin({computed:{$vuetify(){return es({defaults:vm.call(this,_h),display:vm.call(this,DS),theme:vm.call(this,v0),icons:vm.call(this,US),locale:vm.call(this,wh),date:vm.call(this,mD)})}}})}function g(){i.stop()}return{install:y,unmount:g,defaults:c,display:A,theme:d,icons:f,locale:m,date:h,goTo:v}})}const tae="3.9.7";d6.version=tae;function vm(e){const t=this.$,n=t.parent?.provides??t.vnode.appContext?.provides;if(n&&e in n)return n[e]}function nae(){return A6().__VUE_DEVTOOLS_GLOBAL_HOOK__}function A6(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const aae=typeof Proxy=="function",rae="devtools-plugin:setup",sae="plugin:settings:set";let pm,NS;function oae(){var e;return pm!==void 0||(typeof window<"u"&&window.performance?(pm=!0,NS=window.performance):typeof globalThis<"u"&&(!((e=globalThis.perf_hooks)===null||e===void 0)&&e.performance)?(pm=!0,NS=globalThis.perf_hooks.performance):pm=!1),pm}function iae(){return oae()?NS.now():Date.now()}class lae{constructor(t,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=n;const a={};if(t.settings)for(const o in t.settings){const i=t.settings[o];a[o]=i.defaultValue}const r=`__vue-devtools-plugin-settings__${t.id}`;let s=Object.assign({},a);try{const o=localStorage.getItem(r),i=JSON.parse(o);Object.assign(s,i)}catch{}this.fallbacks={getSettings(){return s},setSettings(o){try{localStorage.setItem(r,JSON.stringify(o))}catch{}s=o},now(){return iae()}},n&&n.on(sae,(o,i)=>{o===this.plugin.id&&this.fallbacks.setSettings(i)}),this.proxiedOn=new Proxy({},{get:(o,i)=>this.target?this.target.on[i]:(...c)=>{this.onQueue.push({method:i,args:c})}}),this.proxiedTarget=new Proxy({},{get:(o,i)=>this.target?this.target[i]:i==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(i)?(...c)=>(this.targetQueue.push({method:i,args:c,resolve:()=>{}}),this.fallbacks[i](...c)):(...c)=>new Promise(A=>{this.targetQueue.push({method:i,args:c,resolve:A})})})}async setRealTarget(t){this.target=t;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function uae(e,t){const n=e,a=A6(),r=nae(),s=aae&&n.enableEarlyProxy;if(r&&(a.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!s))r.emit(rae,e,t);else{const o=s?new lae(n,r):null;(a.__VUE_DEVTOOLS_PLUGINS__=a.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:t,proxy:o}),o&&t(o.proxiedTarget)}}var f6="store";function ea(e){return e===void 0&&(e=null),Sn(e!==null?e:f6)}function Qh(e,t){Object.keys(e).forEach(function(n){return t(e[n],n)})}function cae(e){return e!==null&&typeof e=="object"}function dae(e){return e&&typeof e.then=="function"}function Aae(e,t){return function(){return e(t)}}function m6(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var a=t.indexOf(e);a>-1&&t.splice(a,1)}}function h6(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;sw(e,n,[],e._modules.root,!0),xk(e,n,t)}function xk(e,t,n){var a=e._state,r=e._scope;e.getters={},e._makeLocalGettersCache=Object.create(null);var s=e._wrappedGetters,o={},i={},c=Ed(!0);c.run(function(){Qh(s,function(A,d){o[d]=Aae(A,e),i[d]=ee(function(){return o[d]()}),Object.defineProperty(e.getters,d,{get:function(){return i[d].value},enumerable:!0})})}),e._state=es({data:t}),e._scope=c,e.strict&&pae(e),a&&n&&e._withCommit(function(){a.data=null}),r&&r.stop()}function sw(e,t,n,a,r){var s=!n.length,o=e._modules.getNamespace(n);if(a.namespaced&&(e._modulesNamespaceMap[o],e._modulesNamespaceMap[o]=a),!s&&!r){var i=Ck(t,n.slice(0,-1)),c=n[n.length-1];e._withCommit(function(){i[c]=a.state})}var A=a.context=fae(e,o,n);a.forEachMutation(function(d,f){var m=o+f;mae(e,m,d,A)}),a.forEachAction(function(d,f){var m=d.root?f:o+f,h=d.handler||d;hae(e,m,h,A)}),a.forEachGetter(function(d,f){var m=o+f;vae(e,m,d,A)}),a.forEachChild(function(d,f){sw(e,t,n.concat(f),d,r)})}function fae(e,t,n){var a=t==="",r={dispatch:a?e.dispatch:function(s,o,i){var c=T_(s,o,i),A=c.payload,d=c.options,f=c.type;return(!d||!d.root)&&(f=t+f),e.dispatch(f,A)},commit:a?e.commit:function(s,o,i){var c=T_(s,o,i),A=c.payload,d=c.options,f=c.type;(!d||!d.root)&&(f=t+f),e.commit(f,A,d)}};return Object.defineProperties(r,{getters:{get:a?function(){return e.getters}:function(){return v6(e,t)}},state:{get:function(){return Ck(e.state,n)}}}),r}function v6(e,t){if(!e._makeLocalGettersCache[t]){var n={},a=t.length;Object.keys(e.getters).forEach(function(r){if(r.slice(0,a)===t){var s=r.slice(a);Object.defineProperty(n,s,{get:function(){return e.getters[r]},enumerable:!0})}}),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}function mae(e,t,n,a){var r=e._mutations[t]||(e._mutations[t]=[]);r.push(function(o){n.call(e,a.state,o)})}function hae(e,t,n,a){var r=e._actions[t]||(e._actions[t]=[]);r.push(function(o){var i=n.call(e,{dispatch:a.dispatch,commit:a.commit,getters:a.getters,state:a.state,rootGetters:e.getters,rootState:e.state},o);return dae(i)||(i=Promise.resolve(i)),e._devtoolHook?i.catch(function(c){throw e._devtoolHook.emit("vuex:error",c),c}):i})}function vae(e,t,n,a){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(s){return n(a.state,a.getters,s.state,s.getters)})}function pae(e){We(function(){return e._state.data},function(){},{deep:!0,flush:"sync"})}function Ck(e,t){return t.reduce(function(n,a){return n[a]},e)}function T_(e,t,n){return cae(e)&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}var gae="vuex bindings",xD="vuex:mutations",Ux="vuex:actions",gm="vuex",yae=0;function _ae(e,t){uae({id:"org.vuejs.vuex",app:e,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[gae]},function(n){n.addTimelineLayer({id:xD,label:"Vuex Mutations",color:CD}),n.addTimelineLayer({id:Ux,label:"Vuex Actions",color:CD}),n.addInspector({id:gm,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(a){if(a.app===e&&a.inspectorId===gm)if(a.filter){var r=[];_6(r,t._modules.root,a.filter,""),a.rootNodes=r}else a.rootNodes=[y6(t._modules.root,"")]}),n.on.getInspectorState(function(a){if(a.app===e&&a.inspectorId===gm){var r=a.nodeId;v6(t,r),a.state=xae(Sae(t._modules,r),r==="root"?t.getters:t._makeLocalGettersCache,r)}}),n.on.editInspectorState(function(a){if(a.app===e&&a.inspectorId===gm){var r=a.nodeId,s=a.path;r!=="root"&&(s=r.split("/").filter(Boolean).concat(s)),t._withCommit(function(){a.set(t._state.data,s,a.state.value)})}}),t.subscribe(function(a,r){var s={};a.payload&&(s.payload=a.payload),s.state=r,n.notifyComponentUpdate(),n.sendInspectorTree(gm),n.sendInspectorState(gm),n.addTimelineEvent({layerId:xD,event:{time:Date.now(),title:a.type,data:s}})}),t.subscribeAction({before:function(a,r){var s={};a.payload&&(s.payload=a.payload),a._id=yae++,a._time=Date.now(),s.state=r,n.addTimelineEvent({layerId:Ux,event:{time:a._time,title:a.type,groupId:a._id,subtitle:"start",data:s}})},after:function(a,r){var s={},o=Date.now()-a._time;s.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},a.payload&&(s.payload=a.payload),s.state=r,n.addTimelineEvent({layerId:Ux,event:{time:Date.now(),title:a.type,groupId:a._id,subtitle:"end",data:s}})}})})}var CD=8702998,wae=6710886,bae=16777215,p6={label:"namespaced",textColor:bae,backgroundColor:wae};function g6(e){return e&&e!=="root"?e.split("/").slice(-2,-1)[0]:"Root"}function y6(e,t){return{id:t||"root",label:g6(t),tags:e.namespaced?[p6]:[],children:Object.keys(e._children).map(function(n){return y6(e._children[n],t+n+"/")})}}function _6(e,t,n,a){a.includes(n)&&e.push({id:a||"root",label:a.endsWith("/")?a.slice(0,a.length-1):a||"Root",tags:t.namespaced?[p6]:[]}),Object.keys(t._children).forEach(function(r){_6(e,t._children[r],n,a+r+"/")})}function xae(e,t,n){t=n==="root"?t:t[n];var a=Object.keys(t),r={state:Object.keys(e.state).map(function(o){return{key:o,editable:!0,value:e.state[o]}})};if(a.length){var s=Cae(t);r.getters=Object.keys(s).map(function(o){return{key:o.endsWith("/")?g6(o):o,editable:!1,value:VS(function(){return s[o]})}})}return r}function Cae(e){var t={};return Object.keys(e).forEach(function(n){var a=n.split("/");if(a.length>1){var r=t,s=a.pop();a.forEach(function(o){r[o]||(r[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),r=r[o]._custom.value}),r[s]=VS(function(){return e[n]})}else t[n]=VS(function(){return e[n]})}),t}function Sae(e,t){var n=t.split("/").filter(function(a){return a});return n.reduce(function(a,r,s){var o=a[r];if(!o)throw new Error('Missing module "'+r+'" for path "'+t+'".');return s===n.length-1?o:o._children},t==="root"?e:e.root._children)}function VS(e){try{return e()}catch(t){return t}}var jl=function(t,n){this.runtime=n,this._children=Object.create(null),this._rawModule=t;var a=t.state;this.state=(typeof a=="function"?a():a)||{}},w6={namespaced:{configurable:!0}};w6.namespaced.get=function(){return!!this._rawModule.namespaced};jl.prototype.addChild=function(t,n){this._children[t]=n};jl.prototype.removeChild=function(t){delete this._children[t]};jl.prototype.getChild=function(t){return this._children[t]};jl.prototype.hasChild=function(t){return t in this._children};jl.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)};jl.prototype.forEachChild=function(t){Qh(this._children,t)};jl.prototype.forEachGetter=function(t){this._rawModule.getters&&Qh(this._rawModule.getters,t)};jl.prototype.forEachAction=function(t){this._rawModule.actions&&Qh(this._rawModule.actions,t)};jl.prototype.forEachMutation=function(t){this._rawModule.mutations&&Qh(this._rawModule.mutations,t)};Object.defineProperties(jl.prototype,w6);var Ff=function(t){this.register([],t,!1)};Ff.prototype.get=function(t){return t.reduce(function(n,a){return n.getChild(a)},this.root)};Ff.prototype.getNamespace=function(t){var n=this.root;return t.reduce(function(a,r){return n=n.getChild(r),a+(n.namespaced?r+"/":"")},"")};Ff.prototype.update=function(t){b6([],this.root,t)};Ff.prototype.register=function(t,n,a){var r=this;a===void 0&&(a=!0);var s=new jl(n,a);if(t.length===0)this.root=s;else{var o=this.get(t.slice(0,-1));o.addChild(t[t.length-1],s)}n.modules&&Qh(n.modules,function(i,c){r.register(t.concat(c),i,a)})};Ff.prototype.unregister=function(t){var n=this.get(t.slice(0,-1)),a=t[t.length-1],r=n.getChild(a);r&&r.runtime&&n.removeChild(a)};Ff.prototype.isRegistered=function(t){var n=this.get(t.slice(0,-1)),a=t[t.length-1];return n?n.hasChild(a):!1};function b6(e,t,n){if(t.update(n),n.modules)for(var a in n.modules){if(!t.getChild(a))return;b6(e.concat(a),t.getChild(a),n.modules[a])}}function Eae(e){return new si(e)}var si=function(t){var n=this;t===void 0&&(t={});var a=t.plugins;a===void 0&&(a=[]);var r=t.strict;r===void 0&&(r=!1);var s=t.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new Ff(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=s;var o=this,i=this,c=i.dispatch,A=i.commit;this.dispatch=function(m,h){return c.call(o,m,h)},this.commit=function(m,h,v){return A.call(o,m,h,v)},this.strict=r;var d=this._modules.root.state;sw(this,d,[],this._modules.root),xk(this,d),a.forEach(function(f){return f(n)})},Sk={state:{configurable:!0}};si.prototype.install=function(t,n){t.provide(n||f6,this),t.config.globalProperties.$store=this;var a=this._devtools!==void 0?this._devtools:!1;a&&_ae(t,this)};Sk.state.get=function(){return this._state.data};Sk.state.set=function(e){};si.prototype.commit=function(t,n,a){var r=this,s=T_(t,n,a),o=s.type,i=s.payload,c={type:o,payload:i},A=this._mutations[o];A&&(this._withCommit(function(){A.forEach(function(f){f(i)})}),this._subscribers.slice().forEach(function(d){return d(c,r.state)}))};si.prototype.dispatch=function(t,n){var a=this,r=T_(t,n),s=r.type,o=r.payload,i={type:s,payload:o},c=this._actions[s];if(c){try{this._actionSubscribers.slice().filter(function(d){return d.before}).forEach(function(d){return d.before(i,a.state)})}catch{}var A=c.length>1?Promise.all(c.map(function(d){return d(o)})):c[0](o);return new Promise(function(d,f){A.then(function(m){try{a._actionSubscribers.filter(function(h){return h.after}).forEach(function(h){return h.after(i,a.state)})}catch{}d(m)},function(m){try{a._actionSubscribers.filter(function(h){return h.error}).forEach(function(h){return h.error(i,a.state,m)})}catch{}f(m)})})}};si.prototype.subscribe=function(t,n){return m6(t,this._subscribers,n)};si.prototype.subscribeAction=function(t,n){var a=typeof t=="function"?{before:t}:t;return m6(a,this._actionSubscribers,n)};si.prototype.watch=function(t,n,a){var r=this;return We(function(){return t(r.state,r.getters)},n,Object.assign({},a))};si.prototype.replaceState=function(t){var n=this;this._withCommit(function(){n._state.data=t})};si.prototype.registerModule=function(t,n,a){a===void 0&&(a={}),typeof t=="string"&&(t=[t]),this._modules.register(t,n),sw(this,this.state,t,this._modules.get(t),a.preserveState),xk(this,this.state)};si.prototype.unregisterModule=function(t){var n=this;typeof t=="string"&&(t=[t]),this._modules.unregister(t),this._withCommit(function(){var a=Ck(n.state,t.slice(0,-1));delete a[t[t.length-1]]}),h6(this)};si.prototype.hasModule=function(t){return typeof t=="string"&&(t=[t]),this._modules.isRegistered(t)};si.prototype.hotUpdate=function(t){this._modules.update(t),h6(this,!0)};si.prototype._withCommit=function(t){var n=this._committing;this._committing=!0,t(),this._committing=n};Object.defineProperties(si.prototype,Sk);const Um=typeof document<"u";function x6(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Bae(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&x6(e.default)}const Va=Object.assign;function Rx(e,t){const n={};for(const a in t){const r=t[a];n[a]=Nl(r)?r.map(e):e(r)}return n}const Rp=()=>{},Nl=Array.isArray,C6=/#/g,kae=/&/g,Tae=/\//g,Iae=/=/g,Fae=/\?/g,S6=/\+/g,Pae=/%5B/g,Dae=/%5D/g,E6=/%5E/g,Uae=/%60/g,B6=/%7B/g,Rae=/%7C/g,k6=/%7D/g,Nae=/%20/g;function Ek(e){return encodeURI(""+e).replace(Rae,"|").replace(Pae,"[").replace(Dae,"]")}function Vae(e){return Ek(e).replace(B6,"{").replace(k6,"}").replace(E6,"^")}function LS(e){return Ek(e).replace(S6,"%2B").replace(Nae,"+").replace(C6,"%23").replace(kae,"%26").replace(Uae,"`").replace(B6,"{").replace(k6,"}").replace(E6,"^")}function Lae(e){return LS(e).replace(Iae,"%3D")}function Mae(e){return Ek(e).replace(C6,"%23").replace(Fae,"%3F")}function Oae(e){return e==null?"":Mae(e).replace(Tae,"%2F")}function g0(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const Hae=/\/$/,$ae=e=>e.replace(Hae,"");function Nx(e,t,n="/"){let a,r={},s="",o="";const i=t.indexOf("#");let c=t.indexOf("?");return i<c&&i>=0&&(c=-1),c>-1&&(a=t.slice(0,c),s=t.slice(c+1,i>-1?i:t.length),r=e(s)),i>-1&&(a=a||t.slice(0,i),o=t.slice(i,t.length)),a=Kae(a??t,n),{fullPath:a+(s&&"?")+s+o,path:a,query:r,hash:g0(o)}}function Qae(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function SD(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Gae(e,t,n){const a=t.matched.length-1,r=n.matched.length-1;return a>-1&&a===r&&bh(t.matched[a],n.matched[r])&&T6(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function bh(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function T6(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!zae(e[n],t[n]))return!1;return!0}function zae(e,t){return Nl(e)?ED(e,t):Nl(t)?ED(t,e):e===t}function ED(e,t){return Nl(t)?e.length===t.length&&e.every((n,a)=>n===t[a]):e.length===1&&e[0]===t}function Kae(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),a=e.split("/"),r=a[a.length-1];(r===".."||r===".")&&a.push("");let s=n.length-1,o,i;for(o=0;o<a.length;o++)if(i=a[o],i!==".")if(i==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+a.slice(o).join("/")}const jc={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var y0;(function(e){e.pop="pop",e.push="push"})(y0||(y0={}));var Np;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Np||(Np={}));function Wae(e){if(!e)if(Um){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),$ae(e)}const jae=/^[^#]+#/;function qae(e,t){return e.replace(jae,"#")+t}function Yae(e,t){const n=document.documentElement.getBoundingClientRect(),a=e.getBoundingClientRect();return{behavior:t.behavior,left:a.left-n.left-(t.left||0),top:a.top-n.top-(t.top||0)}}const ow=()=>({left:window.scrollX,top:window.scrollY});function Xae(e){let t;if("el"in e){const n=e.el,a=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?a?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;t=Yae(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function BD(e,t){return(history.state?history.state.position-t:-1)+e}const MS=new Map;function Jae(e,t){MS.set(e,t)}function Zae(e){const t=MS.get(e);return MS.delete(e),t}let ere=()=>location.protocol+"//"+location.host;function I6(e,t){const{pathname:n,search:a,hash:r}=t,s=e.indexOf("#");if(s>-1){let i=r.includes(e.slice(s))?e.slice(s).length:1,c=r.slice(i);return c[0]!=="/"&&(c="/"+c),SD(c,"")}return SD(n,e)+a+r}function tre(e,t,n,a){let r=[],s=[],o=null;const i=({state:m})=>{const h=I6(e,location),v=n.value,y=t.value;let g=0;if(m){if(n.value=h,t.value=m,o&&o===v){o=null;return}g=y?m.position-y.position:0}else a(h);r.forEach(w=>{w(n.value,v,{delta:g,type:y0.pop,direction:g?g>0?Np.forward:Np.back:Np.unknown})})};function c(){o=n.value}function A(m){r.push(m);const h=()=>{const v=r.indexOf(m);v>-1&&r.splice(v,1)};return s.push(h),h}function d(){const{history:m}=window;m.state&&m.replaceState(Va({},m.state,{scroll:ow()}),"")}function f(){for(const m of s)m();s=[],window.removeEventListener("popstate",i),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",i),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:c,listen:A,destroy:f}}function kD(e,t,n,a=!1,r=!1){return{back:e,current:t,forward:n,replaced:a,position:window.history.length,scroll:r?ow():null}}function nre(e){const{history:t,location:n}=window,a={value:I6(e,n)},r={value:t.state};r.value||s(a.value,{back:null,current:a.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function s(c,A,d){const f=e.indexOf("#"),m=f>-1?(n.host&&document.querySelector("base")?e:e.slice(f))+c:ere()+e+c;try{t[d?"replaceState":"pushState"](A,"",m),r.value=A}catch(h){console.error(h),n[d?"replace":"assign"](m)}}function o(c,A){const d=Va({},t.state,kD(r.value.back,c,r.value.forward,!0),A,{position:r.value.position});s(c,d,!0),a.value=c}function i(c,A){const d=Va({},r.value,t.state,{forward:c,scroll:ow()});s(d.current,d,!0);const f=Va({},kD(a.value,c,null),{position:d.position+1},A);s(c,f,!1),a.value=c}return{location:a,state:r,push:i,replace:o}}function are(e){e=Wae(e);const t=nre(e),n=tre(e,t.state,t.location,t.replace);function a(s,o=!0){o||n.pauseListeners(),history.go(s)}const r=Va({location:"",base:e,go:a,createHref:qae.bind(null,e)},t,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function rre(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),are(e)}function sre(e){return typeof e=="string"||e&&typeof e=="object"}function F6(e){return typeof e=="string"||typeof e=="symbol"}const P6=Symbol("");var TD;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(TD||(TD={}));function xh(e,t){return Va(new Error,{type:e,[P6]:!0},t)}function ec(e,t){return e instanceof Error&&P6 in e&&(t==null||!!(e.type&t))}const ID="[^/]+?",ore={sensitive:!1,strict:!1,start:!0,end:!0},ire=/[.+*?^${}()[\]/\\]/g;function lre(e,t){const n=Va({},ore,t),a=[];let r=n.start?"^":"";const s=[];for(const A of e){const d=A.length?[]:[90];n.strict&&!A.length&&(r+="/");for(let f=0;f<A.length;f++){const m=A[f];let h=40+(n.sensitive?.25:0);if(m.type===0)f||(r+="/"),r+=m.value.replace(ire,"\\$&"),h+=40;else if(m.type===1){const{value:v,repeatable:y,optional:g,regexp:w}=m;s.push({name:v,repeatable:y,optional:g});const b=w||ID;if(b!==ID){h+=10;try{new RegExp(`(${b})`)}catch(T){throw new Error(`Invalid custom RegExp for param "${v}" (${b}): `+T.message)}}let x=y?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;f||(x=g&&A.length<2?`(?:/${x})`:"/"+x),g&&(x+="?"),r+=x,h+=20,g&&(h+=-8),y&&(h+=-20),b===".*"&&(h+=-50)}d.push(h)}a.push(d)}if(n.strict&&n.end){const A=a.length-1;a[A][a[A].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function i(A){const d=A.match(o),f={};if(!d)return null;for(let m=1;m<d.length;m++){const h=d[m]||"",v=s[m-1];f[v.name]=h&&v.repeatable?h.split("/"):h}return f}function c(A){let d="",f=!1;for(const m of e){(!f||!d.endsWith("/"))&&(d+="/"),f=!1;for(const h of m)if(h.type===0)d+=h.value;else if(h.type===1){const{value:v,repeatable:y,optional:g}=h,w=v in A?A[v]:"";if(Nl(w)&&!y)throw new Error(`Provided param "${v}" is an array but it is not repeatable (* or + modifiers)`);const b=Nl(w)?w.join("/"):w;if(!b)if(g)m.length<2&&(d.endsWith("/")?d=d.slice(0,-1):f=!0);else throw new Error(`Missing required param "${v}"`);d+=b}}return d||"/"}return{re:o,score:a,keys:s,parse:i,stringify:c}}function ure(e,t){let n=0;for(;n<e.length&&n<t.length;){const a=t[n]-e[n];if(a)return a;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function D6(e,t){let n=0;const a=e.score,r=t.score;for(;n<a.length&&n<r.length;){const s=ure(a[n],r[n]);if(s)return s;n++}if(Math.abs(r.length-a.length)===1){if(FD(a))return 1;if(FD(r))return-1}return r.length-a.length}function FD(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const cre={type:0,value:""},dre=/[a-zA-Z0-9_]/;function Are(e){if(!e)return[[]];if(e==="/")return[[cre]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(h){throw new Error(`ERR (${n})/"${A}": ${h}`)}let n=0,a=n;const r=[];let s;function o(){s&&r.push(s),s=[]}let i=0,c,A="",d="";function f(){A&&(n===0?s.push({type:0,value:A}):n===1||n===2||n===3?(s.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${A}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:A,regexp:d,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),A="")}function m(){A+=c}for(;i<e.length;){if(c=e[i++],c==="\\"&&n!==2){a=n,n=4;continue}switch(n){case 0:c==="/"?(A&&f(),o()):c===":"?(f(),n=1):m();break;case 4:m(),n=a;break;case 1:c==="("?n=2:dre.test(c)?m():(f(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&i--);break;case 2:c===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+c:n=3:d+=c;break;case 3:f(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&i--,d="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${A}"`),f(),o(),r}function fre(e,t,n){const a=lre(Are(e.path),n),r=Va(a,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function mre(e,t){const n=[],a=new Map;t=RD({strict:!1,end:!0,sensitive:!1},t);function r(f){return a.get(f)}function s(f,m,h){const v=!h,y=DD(f);y.aliasOf=h&&h.record;const g=RD(t,f),w=[y];if("alias"in f){const T=typeof f.alias=="string"?[f.alias]:f.alias;for(const U of T)w.push(DD(Va({},y,{components:h?h.record.components:y.components,path:U,aliasOf:h?h.record:y})))}let b,x;for(const T of w){const{path:U}=T;if(m&&U[0]!=="/"){const k=m.record.path,S=k[k.length-1]==="/"?"":"/";T.path=m.record.path+(U&&S+U)}if(b=fre(T,m,g),h?h.alias.push(b):(x=x||b,x!==b&&x.alias.push(b),v&&f.name&&!UD(b)&&o(f.name)),U6(b)&&c(b),y.children){const k=y.children;for(let S=0;S<k.length;S++)s(k[S],b,h&&h.children[S])}h=h||b}return x?()=>{o(x)}:Rp}function o(f){if(F6(f)){const m=a.get(f);m&&(a.delete(f),n.splice(n.indexOf(m),1),m.children.forEach(o),m.alias.forEach(o))}else{const m=n.indexOf(f);m>-1&&(n.splice(m,1),f.record.name&&a.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function i(){return n}function c(f){const m=pre(f,n);n.splice(m,0,f),f.record.name&&!UD(f)&&a.set(f.record.name,f)}function A(f,m){let h,v={},y,g;if("name"in f&&f.name){if(h=a.get(f.name),!h)throw xh(1,{location:f});g=h.record.name,v=Va(PD(m.params,h.keys.filter(x=>!x.optional).concat(h.parent?h.parent.keys.filter(x=>x.optional):[]).map(x=>x.name)),f.params&&PD(f.params,h.keys.map(x=>x.name))),y=h.stringify(v)}else if(f.path!=null)y=f.path,h=n.find(x=>x.re.test(y)),h&&(v=h.parse(y),g=h.record.name);else{if(h=m.name?a.get(m.name):n.find(x=>x.re.test(m.path)),!h)throw xh(1,{location:f,currentLocation:m});g=h.record.name,v=Va({},m.params,f.params),y=h.stringify(v)}const w=[];let b=h;for(;b;)w.unshift(b.record),b=b.parent;return{name:g,path:y,params:v,matched:w,meta:vre(w)}}e.forEach(f=>s(f));function d(){n.length=0,a.clear()}return{addRoute:s,resolve:A,removeRoute:o,clearRoutes:d,getRoutes:i,getRecordMatcher:r}}function PD(e,t){const n={};for(const a of t)a in e&&(n[a]=e[a]);return n}function DD(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:hre(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function hre(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const a in e.components)t[a]=typeof n=="object"?n[a]:n;return t}function UD(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function vre(e){return e.reduce((t,n)=>Va(t,n.meta),{})}function RD(e,t){const n={};for(const a in e)n[a]=a in t?t[a]:e[a];return n}function pre(e,t){let n=0,a=t.length;for(;n!==a;){const s=n+a>>1;D6(e,t[s])<0?a=s:n=s+1}const r=gre(e);return r&&(a=t.lastIndexOf(r,a-1)),a}function gre(e){let t=e;for(;t=t.parent;)if(U6(t)&&D6(e,t)===0)return t}function U6({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function yre(e){const t={};if(e===""||e==="?")return t;const a=(e[0]==="?"?e.slice(1):e).split("&");for(let r=0;r<a.length;++r){const s=a[r].replace(S6," "),o=s.indexOf("="),i=g0(o<0?s:s.slice(0,o)),c=o<0?null:g0(s.slice(o+1));if(i in t){let A=t[i];Nl(A)||(A=t[i]=[A]),A.push(c)}else t[i]=c}return t}function ND(e){let t="";for(let n in e){const a=e[n];if(n=Lae(n),a==null){a!==void 0&&(t+=(t.length?"&":"")+n);continue}(Nl(a)?a.map(s=>s&&LS(s)):[a&&LS(a)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+n,s!=null&&(t+="="+s))})}return t}function _re(e){const t={};for(const n in e){const a=e[n];a!==void 0&&(t[n]=Nl(a)?a.map(r=>r==null?null:""+r):a==null?a:""+a)}return t}const wre=Symbol(""),VD=Symbol(""),iw=Symbol(""),Bk=Symbol(""),OS=Symbol("");function Wv(){let e=[];function t(a){return e.push(a),()=>{const r=e.indexOf(a);r>-1&&e.splice(r,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function rd(e,t,n,a,r,s=o=>o()){const o=a&&(a.enterCallbacks[r]=a.enterCallbacks[r]||[]);return()=>new Promise((i,c)=>{const A=m=>{m===!1?c(xh(4,{from:n,to:t})):m instanceof Error?c(m):sre(m)?c(xh(2,{from:t,to:m})):(o&&a.enterCallbacks[r]===o&&typeof m=="function"&&o.push(m),i())},d=s(()=>e.call(a&&a.instances[r],t,n,A));let f=Promise.resolve(d);e.length<3&&(f=f.then(A)),f.catch(m=>c(m))})}function Vx(e,t,n,a,r=s=>s()){const s=[];for(const o of e)for(const i in o.components){let c=o.components[i];if(!(t!=="beforeRouteEnter"&&!o.instances[i]))if(x6(c)){const d=(c.__vccOpts||c)[t];d&&s.push(rd(d,n,a,o,i,r))}else{let A=c();s.push(()=>A.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${i}" at "${o.path}"`);const f=Bae(d)?d.default:d;o.mods[i]=d,o.components[i]=f;const h=(f.__vccOpts||f)[t];return h&&rd(h,n,a,o,i,r)()}))}}return s}function LD(e){const t=Sn(iw),n=Sn(Bk),a=ee(()=>{const c=Oe(e.to);return t.resolve(c)}),r=ee(()=>{const{matched:c}=a.value,{length:A}=c,d=c[A-1],f=n.matched;if(!d||!f.length)return-1;const m=f.findIndex(bh.bind(null,d));if(m>-1)return m;const h=MD(c[A-2]);return A>1&&MD(d)===h&&f[f.length-1].path!==h?f.findIndex(bh.bind(null,c[A-2])):m}),s=ee(()=>r.value>-1&&Ere(n.params,a.value.params)),o=ee(()=>r.value>-1&&r.value===n.matched.length-1&&T6(n.params,a.value.params));function i(c={}){if(Sre(c)){const A=t[Oe(e.replace)?"replace":"push"](Oe(e.to)).catch(Rp);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>A),A}return Promise.resolve()}return{route:a,href:ee(()=>a.value.href),isActive:s,isExactActive:o,navigate:i}}function bre(e){return e.length===1?e[0]:e}const xre=ek({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:LD,setup(e,{slots:t}){const n=es(LD(e)),{options:a}=Sn(iw),r=ee(()=>({[OD(e.activeClass,a.linkActiveClass,"router-link-active")]:n.isActive,[OD(e.exactActiveClass,a.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=t.default&&bre(t.default(n));return e.custom?s:Wl("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},s)}}}),Cre=xre;function Sre(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Ere(e,t){for(const n in t){const a=t[n],r=e[n];if(typeof a=="string"){if(a!==r)return!1}else if(!Nl(r)||r.length!==a.length||a.some((s,o)=>s!==r[o]))return!1}return!0}function MD(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const OD=(e,t,n)=>e??t??n,Bre=ek({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const a=Sn(OS),r=ee(()=>e.route||a.value),s=Sn(VD,0),o=ee(()=>{let A=Oe(s);const{matched:d}=r.value;let f;for(;(f=d[A])&&!f.components;)A++;return A}),i=ee(()=>r.value.matched[o.value]);Ia(VD,ee(()=>o.value+1)),Ia(wre,i),Ia(OS,r);const c=M();return We(()=>[c.value,i.value,e.name],([A,d,f],[m,h,v])=>{d&&(d.instances[f]=A,h&&h!==d&&A&&A===m&&(d.leaveGuards.size||(d.leaveGuards=h.leaveGuards),d.updateGuards.size||(d.updateGuards=h.updateGuards))),A&&d&&(!h||!bh(d,h)||!m)&&(d.enterCallbacks[f]||[]).forEach(y=>y(A))},{flush:"post"}),()=>{const A=r.value,d=e.name,f=i.value,m=f&&f.components[d];if(!m)return HD(n.default,{Component:m,route:A});const h=f.props[d],v=h?h===!0?A.params:typeof h=="function"?h(A):h:null,g=Wl(m,Va({},v,t,{onVnodeUnmounted:w=>{w.component.isUnmounted&&(f.instances[d]=null)},ref:c}));return HD(n.default,{Component:g,route:A})||g}}});function HD(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const kre=Bre;function Tre(e){const t=mre(e.routes,e),n=e.parseQuery||yre,a=e.stringifyQuery||ND,r=e.history,s=Wv(),o=Wv(),i=Wv(),c=Ht(jc);let A=jc;Um&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=Rx.bind(null,Y=>""+Y),f=Rx.bind(null,Oae),m=Rx.bind(null,g0);function h(Y,K){let X,ae;return F6(Y)?(X=t.getRecordMatcher(Y),ae=K):ae=Y,t.addRoute(ae,X)}function v(Y){const K=t.getRecordMatcher(Y);K&&t.removeRoute(K)}function y(){return t.getRoutes().map(Y=>Y.record)}function g(Y){return!!t.getRecordMatcher(Y)}function w(Y,K){if(K=Va({},K||c.value),typeof Y=="string"){const Ae=Nx(n,Y,K.path),Ce=t.resolve({path:Ae.path},K),De=r.createHref(Ae.fullPath);return Va(Ae,Ce,{params:m(Ce.params),hash:g0(Ae.hash),redirectedFrom:void 0,href:De})}let X;if(Y.path!=null)X=Va({},Y,{path:Nx(n,Y.path,K.path).path});else{const Ae=Va({},Y.params);for(const Ce in Ae)Ae[Ce]==null&&delete Ae[Ce];X=Va({},Y,{params:f(Ae)}),K.params=f(K.params)}const ae=t.resolve(X,K),oe=Y.hash||"";ae.params=d(m(ae.params));const W=Qae(a,Va({},Y,{hash:Vae(oe),path:ae.path})),de=r.createHref(W);return Va({fullPath:W,hash:oe,query:a===ND?_re(Y.query):Y.query||{}},ae,{redirectedFrom:void 0,href:de})}function b(Y){return typeof Y=="string"?Nx(n,Y,c.value.path):Va({},Y)}function x(Y,K){if(A!==Y)return xh(8,{from:K,to:Y})}function T(Y){return S(Y)}function U(Y){return T(Va(b(Y),{replace:!0}))}function k(Y){const K=Y.matched[Y.matched.length-1];if(K&&K.redirect){const{redirect:X}=K;let ae=typeof X=="function"?X(Y):X;return typeof ae=="string"&&(ae=ae.includes("?")||ae.includes("#")?ae=b(ae):{path:ae},ae.params={}),Va({query:Y.query,hash:Y.hash,params:ae.path!=null?{}:Y.params},ae)}}function S(Y,K){const X=A=w(Y),ae=c.value,oe=Y.state,W=Y.force,de=Y.replace===!0,Ae=k(X);if(Ae)return S(Va(b(Ae),{state:typeof Ae=="object"?Va({},oe,Ae.state):oe,force:W,replace:de}),K||X);const Ce=X;Ce.redirectedFrom=K;let De;return!W&&Gae(a,ae,X)&&(De=xh(16,{to:Ce,from:ae}),G(ae,ae,!0,!1)),(De?Promise.resolve(De):P(Ce,ae)).catch(xe=>ec(xe)?ec(xe,2)?xe:se(xe):ce(xe,Ce,ae)).then(xe=>{if(xe){if(ec(xe,2))return S(Va({replace:de},b(xe.to),{state:typeof xe.to=="object"?Va({},oe,xe.to.state):oe,force:W}),K||Ce)}else xe=N(Ce,ae,!0,de,oe);return F(Ce,ae,xe),xe})}function E(Y,K){const X=x(Y,K);return X?Promise.reject(X):Promise.resolve()}function C(Y){const K=ne.values().next().value;return K&&typeof K.runWithContext=="function"?K.runWithContext(Y):Y()}function P(Y,K){let X;const[ae,oe,W]=Ire(Y,K);X=Vx(ae.reverse(),"beforeRouteLeave",Y,K);for(const Ae of ae)Ae.leaveGuards.forEach(Ce=>{X.push(rd(Ce,Y,K))});const de=E.bind(null,Y,K);return X.push(de),te(X).then(()=>{X=[];for(const Ae of s.list())X.push(rd(Ae,Y,K));return X.push(de),te(X)}).then(()=>{X=Vx(oe,"beforeRouteUpdate",Y,K);for(const Ae of oe)Ae.updateGuards.forEach(Ce=>{X.push(rd(Ce,Y,K))});return X.push(de),te(X)}).then(()=>{X=[];for(const Ae of W)if(Ae.beforeEnter)if(Nl(Ae.beforeEnter))for(const Ce of Ae.beforeEnter)X.push(rd(Ce,Y,K));else X.push(rd(Ae.beforeEnter,Y,K));return X.push(de),te(X)}).then(()=>(Y.matched.forEach(Ae=>Ae.enterCallbacks={}),X=Vx(W,"beforeRouteEnter",Y,K,C),X.push(de),te(X))).then(()=>{X=[];for(const Ae of o.list())X.push(rd(Ae,Y,K));return X.push(de),te(X)}).catch(Ae=>ec(Ae,8)?Ae:Promise.reject(Ae))}function F(Y,K,X){i.list().forEach(ae=>C(()=>ae(Y,K,X)))}function N(Y,K,X,ae,oe){const W=x(Y,K);if(W)return W;const de=K===jc,Ae=Um?history.state:{};X&&(ae||de?r.replace(Y.fullPath,Va({scroll:de&&Ae&&Ae.scroll},oe)):r.push(Y.fullPath,oe)),c.value=Y,G(Y,K,X,de),se()}let L;function ie(){L||(L=r.listen((Y,K,X)=>{if(!H.listening)return;const ae=w(Y),oe=k(ae);if(oe){S(Va(oe,{replace:!0,force:!0}),ae).catch(Rp);return}A=ae;const W=c.value;Um&&Jae(BD(W.fullPath,X.delta),ow()),P(ae,W).catch(de=>ec(de,12)?de:ec(de,2)?(S(Va(b(de.to),{force:!0}),ae).then(Ae=>{ec(Ae,20)&&!X.delta&&X.type===y0.pop&&r.go(-1,!1)}).catch(Rp),Promise.reject()):(X.delta&&r.go(-X.delta,!1),ce(de,ae,W))).then(de=>{de=de||N(ae,W,!1),de&&(X.delta&&!ec(de,8)?r.go(-X.delta,!1):X.type===y0.pop&&ec(de,20)&&r.go(-1,!1)),F(ae,W,de)}).catch(Rp)}))}let le=Wv(),Q=Wv(),Z;function ce(Y,K,X){se(Y);const ae=Q.list();return ae.length?ae.forEach(oe=>oe(Y,K,X)):console.error(Y),Promise.reject(Y)}function J(){return Z&&c.value!==jc?Promise.resolve():new Promise((Y,K)=>{le.add([Y,K])})}function se(Y){return Z||(Z=!Y,ie(),le.list().forEach(([K,X])=>Y?X(Y):K()),le.reset()),Y}function G(Y,K,X,ae){const{scrollBehavior:oe}=e;if(!Um||!oe)return Promise.resolve();const W=!X&&Zae(BD(Y.fullPath,0))||(ae||!X)&&history.state&&history.state.scroll||null;return bn().then(()=>oe(Y,K,W)).then(de=>de&&Xae(de)).catch(de=>ce(de,Y,K))}const D=Y=>r.go(Y);let j;const ne=new Set,H={currentRoute:c,listening:!0,addRoute:h,removeRoute:v,clearRoutes:t.clearRoutes,hasRoute:g,getRoutes:y,resolve:w,options:e,push:T,replace:U,go:D,back:()=>D(-1),forward:()=>D(1),beforeEach:s.add,beforeResolve:o.add,afterEach:i.add,onError:Q.add,isReady:J,install(Y){const K=this;Y.component("RouterLink",Cre),Y.component("RouterView",kre),Y.config.globalProperties.$router=K,Object.defineProperty(Y.config.globalProperties,"$route",{enumerable:!0,get:()=>Oe(c)}),Um&&!j&&c.value===jc&&(j=!0,T(r.location).catch(oe=>{}));const X={};for(const oe in jc)Object.defineProperty(X,oe,{get:()=>c.value[oe],enumerable:!0});Y.provide(iw,K),Y.provide(Bk,EL(X)),Y.provide(OS,c);const ae=Y.unmount;ne.add(Y),Y.unmount=function(){ne.delete(Y),ne.size<1&&(A=jc,L&&L(),L=null,c.value=jc,j=!1,Z=!1),ae()}}};function te(Y){return Y.reduce((K,X)=>K.then(()=>C(X)),Promise.resolve())}return H}function Ire(e,t){const n=[],a=[],r=[],s=Math.max(t.matched.length,e.matched.length);for(let o=0;o<s;o++){const i=t.matched[o];i&&(e.matched.find(A=>bh(A,i))?a.push(i):n.push(i));const c=e.matched[o];c&&(t.matched.find(A=>bh(A,c))||r.push(c))}return[n,a,r]}function Zi(){return Sn(iw)}function Gh(e){return Sn(Bk)}function ra(){const e=ea(),t=ee(()=>e.getters["snackbar/snackbar"]),n=ee(()=>e.getters["snackbar/isSnackbarVisible"]),a=m=>{e.dispatch("snackbar/showSnackbar",m)},r=()=>{e.dispatch("snackbar/hideSnackbar")},s=m=>{e.dispatch("snackbar/setSnackbarVisibility",m)},o=m=>{e.dispatch("snackbar/showSuccess",m)},i=m=>{e.dispatch("snackbar/showError",m)};return{snackbar:t,isVisible:n,showSnackbar:a,hideSnackbar:r,setVisibility:s,showSuccess:o,showError:i,showWarning:m=>{e.dispatch("snackbar/showWarning",m)},showInfo:m=>{e.dispatch("snackbar/showInfo",m)},handleApiResponse:(m,h=null)=>{if(m.success){const v=h||m.message||"Operation successful";o(v)}else{const v=m.error||m.message||"An error occurred";i(v)}},handleApiError:(m,h="An error occurred")=>{let v=h;m.response?.data?.error?v=m.response.data.error:m.response?.data?.message?v=m.response.data.message:m.message&&(v=m.message),i(v)}}}const su={HTTPS_SERVER:29200,HTTP_SERVER:29201,WEBSOCKET:29200,HEALTH_ENDPOINTS:{HTTPS:"/health",HTTP:"/health"}},Pr=(e="localhost")=>({https:`https://${e}:${su.HTTPS_SERVER}`,http:`http://${e}:${su.HTTP_SERVER}`,api:{https:`https://${e}:${su.HTTPS_SERVER}/api`,http:`http://${e}:${su.HTTP_SERVER}/api`},websocket:{wss:`wss://${e}:${su.WEBSOCKET}`,ws:`ws://${e}:${su.HTTP_SERVER}`},health:{https:`https://${e}:${su.HTTPS_SERVER}${su.HEALTH_ENDPOINTS.HTTPS}`,http:`http://${e}:${su.HTTP_SERVER}${su.HEALTH_ENDPOINTS.HTTP}`}}),$D=async(e="localhost",t="/ws/transcribe")=>{const n=Pr(e);try{console.log(` Testing WSS connection: ${n.websocket.wss}${t}`);const a=new WebSocket(`${n.websocket.wss}${t}`);return await new Promise((s,o)=>{const i=setTimeout(()=>{o(new Error("WSS connection timeout"))},3e3);a.onopen=()=>{clearTimeout(i),a.close(),s(n.websocket.wss)},a.onerror=()=>{clearTimeout(i),o(new Error("WSS connection failed"))}}),console.log(` WSS connection successful: ${n.websocket.wss}${t}`),`${n.websocket.wss}${t}`}catch(a){console.log(` WSS failed, trying WS fallback: ${a.message}`);try{console.log(` Testing WS fallback: ${n.websocket.ws}${t}`);const r=new WebSocket(`${n.websocket.ws}${t}`);return await new Promise((o,i)=>{const c=setTimeout(()=>{i(new Error("WS connection timeout"))},3e3);r.onopen=()=>{clearTimeout(c),r.close(),o(n.websocket.ws)},r.onerror=()=>{clearTimeout(c),i(new Error("WS connection failed"))}}),console.log(` WS fallback successful: ${n.websocket.ws}${t}`),`${n.websocket.ws}${t}`}catch(r){return console.error(" Both WSS and WS failed:",r.message),`${n.websocket.wss}${t}`}}},Ka=()=>typeof window<"u"&&window.process&&window.process.type==="renderer",Fre=()=>{try{let e=null;if(window.location.search&&(e=new URLSearchParams(window.location.search).get("endpoint"),e))return console.log("[environment] Retrieved endpoint from URL search params:",e),e;try{if(e=new URL(window.location.href).searchParams.get("endpoint"),e)return console.log("[environment] Retrieved endpoint from URL object:",e),e}catch(t){console.warn("[environment] Failed to parse URL from window.location.href:",t)}if(window.location.hash&&window.location.hash.includes("?")){const t=window.location.hash.split("?");if(t.length>1&&(e=new URLSearchParams("?"+t[1]).get("endpoint"),e))return console.log("[environment] Retrieved endpoint from hash params:",e),e}return null}catch(e){return console.warn("[environment] Failed to extract endpoint from URL:",e),null}},Pre=()=>{if(Ka()){const a=Pr("localhost").api.http;return console.log("[environment] Electron mode - using base URL:",a),a}const e=Fre();if(!e){const a="Web mode requires an endpoint parameter in the URL. Please add ?endpoint=https://your-api-server.com to the URL.";throw console.error("[environment]",a),new Error(a)}if(e.includes("localhost")||e.includes("127.0.0.1")){const a="Web mode requires a remote endpoint URL, not localhost. Please provide a valid remote server endpoint.";throw console.error("[environment]",a),new Error(a)}if(!e.startsWith("http://")&&!e.startsWith("https://")){const a="Web mode requires a full endpoint URL (http:// or https://).";throw console.error("[environment]",a),new Error(a)}const t=e.replace(/\/$/,""),n=t.endsWith("/api")?t:t+"/api";return console.log("[environment] Web mode - using base URL:",n),n};function R6(e,t){return function(){return e.apply(t,arguments)}}const{toString:Dre}=Object.prototype,{getPrototypeOf:kk}=Object,{iterator:lw,toStringTag:N6}=Symbol,uw=(e=>t=>{const n=Dre.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ql=e=>(e=e.toLowerCase(),t=>uw(t)===e),cw=e=>t=>typeof t===e,{isArray:zh}=Array,Ch=cw("undefined");function sg(e){return e!==null&&!Ch(e)&&e.constructor!==null&&!Ch(e.constructor)&&ti(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const V6=ql("ArrayBuffer");function Ure(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&V6(e.buffer),t}const Rre=cw("string"),ti=cw("function"),L6=cw("number"),og=e=>e!==null&&typeof e=="object",Nre=e=>e===!0||e===!1,Hy=e=>{if(uw(e)!=="object")return!1;const t=kk(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(N6 in e)&&!(lw in e)},Vre=e=>{if(!og(e)||sg(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Lre=ql("Date"),Mre=ql("File"),Ore=ql("Blob"),Hre=ql("FileList"),$re=e=>og(e)&&ti(e.pipe),Qre=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ti(e.append)&&((t=uw(e))==="formdata"||t==="object"&&ti(e.toString)&&e.toString()==="[object FormData]"))},Gre=ql("URLSearchParams"),[zre,Kre,Wre,jre]=["ReadableStream","Request","Response","Headers"].map(ql),qre=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ig(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let a,r;if(typeof e!="object"&&(e=[e]),zh(e))for(a=0,r=e.length;a<r;a++)t.call(null,e[a],a,e);else{if(sg(e))return;const s=n?Object.getOwnPropertyNames(e):Object.keys(e),o=s.length;let i;for(a=0;a<o;a++)i=s[a],t.call(null,e[i],i,e)}}function M6(e,t){if(sg(e))return null;t=t.toLowerCase();const n=Object.keys(e);let a=n.length,r;for(;a-- >0;)if(r=n[a],t===r.toLowerCase())return r;return null}const NA=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,O6=e=>!Ch(e)&&e!==NA;function HS(){const{caseless:e,skipUndefined:t}=O6(this)&&this||{},n={},a=(r,s)=>{const o=e&&M6(n,s)||s;Hy(n[o])&&Hy(r)?n[o]=HS(n[o],r):Hy(r)?n[o]=HS({},r):zh(r)?n[o]=r.slice():(!t||!Ch(r))&&(n[o]=r)};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&ig(arguments[r],a);return n}const Yre=(e,t,n,{allOwnKeys:a}={})=>(ig(t,(r,s)=>{n&&ti(r)?e[s]=R6(r,n):e[s]=r},{allOwnKeys:a}),e),Xre=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Jre=(e,t,n,a)=>{e.prototype=Object.create(t.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Zre=(e,t,n,a)=>{let r,s,o;const i={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),s=r.length;s-- >0;)o=r[s],(!a||a(o,e,t))&&!i[o]&&(t[o]=e[o],i[o]=!0);e=n!==!1&&kk(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},ese=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const a=e.indexOf(t,n);return a!==-1&&a===n},tse=e=>{if(!e)return null;if(zh(e))return e;let t=e.length;if(!L6(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},nse=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&kk(Uint8Array)),ase=(e,t)=>{const a=(e&&e[lw]).call(e);let r;for(;(r=a.next())&&!r.done;){const s=r.value;t.call(e,s[0],s[1])}},rse=(e,t)=>{let n;const a=[];for(;(n=e.exec(t))!==null;)a.push(n);return a},sse=ql("HTMLFormElement"),ose=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,a,r){return a.toUpperCase()+r}),QD=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),ise=ql("RegExp"),H6=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),a={};ig(n,(r,s)=>{let o;(o=t(r,s,e))!==!1&&(a[s]=o||r)}),Object.defineProperties(e,a)},lse=e=>{H6(e,(t,n)=>{if(ti(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const a=e[n];if(ti(a)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},use=(e,t)=>{const n={},a=r=>{r.forEach(s=>{n[s]=!0})};return zh(e)?a(e):a(String(e).split(t)),n},cse=()=>{},dse=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Ase(e){return!!(e&&ti(e.append)&&e[N6]==="FormData"&&e[lw])}const fse=e=>{const t=new Array(10),n=(a,r)=>{if(og(a)){if(t.indexOf(a)>=0)return;if(sg(a))return a;if(!("toJSON"in a)){t[r]=a;const s=zh(a)?[]:{};return ig(a,(o,i)=>{const c=n(o,r+1);!Ch(c)&&(s[i]=c)}),t[r]=void 0,s}}return a};return n(e,0)},mse=ql("AsyncFunction"),hse=e=>e&&(og(e)||ti(e))&&ti(e.then)&&ti(e.catch),$6=((e,t)=>e?setImmediate:t?((n,a)=>(NA.addEventListener("message",({source:r,data:s})=>{r===NA&&s===n&&a.length&&a.shift()()},!1),r=>{a.push(r),NA.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",ti(NA.postMessage)),vse=typeof queueMicrotask<"u"?queueMicrotask.bind(NA):typeof process<"u"&&process.nextTick||$6,pse=e=>e!=null&&ti(e[lw]),Ct={isArray:zh,isArrayBuffer:V6,isBuffer:sg,isFormData:Qre,isArrayBufferView:Ure,isString:Rre,isNumber:L6,isBoolean:Nre,isObject:og,isPlainObject:Hy,isEmptyObject:Vre,isReadableStream:zre,isRequest:Kre,isResponse:Wre,isHeaders:jre,isUndefined:Ch,isDate:Lre,isFile:Mre,isBlob:Ore,isRegExp:ise,isFunction:ti,isStream:$re,isURLSearchParams:Gre,isTypedArray:nse,isFileList:Hre,forEach:ig,merge:HS,extend:Yre,trim:qre,stripBOM:Xre,inherits:Jre,toFlatObject:Zre,kindOf:uw,kindOfTest:ql,endsWith:ese,toArray:tse,forEachEntry:ase,matchAll:rse,isHTMLForm:sse,hasOwnProperty:QD,hasOwnProp:QD,reduceDescriptors:H6,freezeMethods:lse,toObjectSet:use,toCamelCase:ose,noop:cse,toFiniteNumber:dse,findKey:M6,global:NA,isContextDefined:O6,isSpecCompliantForm:Ase,toJSONObject:fse,isAsyncFn:mse,isThenable:hse,setImmediate:$6,asap:vse,isIterable:pse};function Jn(e,t,n,a,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),a&&(this.request=a),r&&(this.response=r,this.status=r.status?r.status:null)}Ct.inherits(Jn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ct.toJSONObject(this.config),code:this.code,status:this.status}}});const Q6=Jn.prototype,G6={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{G6[e]={value:e}});Object.defineProperties(Jn,G6);Object.defineProperty(Q6,"isAxiosError",{value:!0});Jn.from=(e,t,n,a,r,s)=>{const o=Object.create(Q6);Ct.toFlatObject(e,o,function(d){return d!==Error.prototype},A=>A!=="isAxiosError");const i=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return Jn.call(o,i,c,n,a,r),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",s&&Object.assign(o,s),o};const gse=null;function $S(e){return Ct.isPlainObject(e)||Ct.isArray(e)}function z6(e){return Ct.endsWith(e,"[]")?e.slice(0,-2):e}function GD(e,t,n){return e?e.concat(t).map(function(r,s){return r=z6(r),!n&&s?"["+r+"]":r}).join(n?".":""):t}function yse(e){return Ct.isArray(e)&&!e.some($S)}const _se=Ct.toFlatObject(Ct,{},null,function(t){return/^is[A-Z]/.test(t)});function dw(e,t,n){if(!Ct.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=Ct.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,g){return!Ct.isUndefined(g[y])});const a=n.metaTokens,r=n.visitor||d,s=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&Ct.isSpecCompliantForm(t);if(!Ct.isFunction(r))throw new TypeError("visitor must be a function");function A(v){if(v===null)return"";if(Ct.isDate(v))return v.toISOString();if(Ct.isBoolean(v))return v.toString();if(!c&&Ct.isBlob(v))throw new Jn("Blob is not supported. Use a Buffer instead.");return Ct.isArrayBuffer(v)||Ct.isTypedArray(v)?c&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function d(v,y,g){let w=v;if(v&&!g&&typeof v=="object"){if(Ct.endsWith(y,"{}"))y=a?y:y.slice(0,-2),v=JSON.stringify(v);else if(Ct.isArray(v)&&yse(v)||(Ct.isFileList(v)||Ct.endsWith(y,"[]"))&&(w=Ct.toArray(v)))return y=z6(y),w.forEach(function(x,T){!(Ct.isUndefined(x)||x===null)&&t.append(o===!0?GD([y],T,s):o===null?y:y+"[]",A(x))}),!1}return $S(v)?!0:(t.append(GD(g,y,s),A(v)),!1)}const f=[],m=Object.assign(_se,{defaultVisitor:d,convertValue:A,isVisitable:$S});function h(v,y){if(!Ct.isUndefined(v)){if(f.indexOf(v)!==-1)throw Error("Circular reference detected in "+y.join("."));f.push(v),Ct.forEach(v,function(w,b){(!(Ct.isUndefined(w)||w===null)&&r.call(t,w,Ct.isString(b)?b.trim():b,y,m))===!0&&h(w,y?y.concat(b):[b])}),f.pop()}}if(!Ct.isObject(e))throw new TypeError("data must be an object");return h(e),t}function zD(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(a){return t[a]})}function Tk(e,t){this._pairs=[],e&&dw(e,this,t)}const K6=Tk.prototype;K6.append=function(t,n){this._pairs.push([t,n])};K6.toString=function(t){const n=t?function(a){return t.call(this,a,zD)}:zD;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function wse(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function W6(e,t,n){if(!t)return e;const a=n&&n.encode||wse;Ct.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let s;if(r?s=r(t,n):s=Ct.isURLSearchParams(t)?t.toString():new Tk(t,n).toString(a),s){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class KD{constructor(){this.handlers=[]}use(t,n,a){return this.handlers.push({fulfilled:t,rejected:n,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Ct.forEach(this.handlers,function(a){a!==null&&t(a)})}}const j6={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},bse=typeof URLSearchParams<"u"?URLSearchParams:Tk,xse=typeof FormData<"u"?FormData:null,Cse=typeof Blob<"u"?Blob:null,Sse={isBrowser:!0,classes:{URLSearchParams:bse,FormData:xse,Blob:Cse},protocols:["http","https","file","blob","url","data"]},Ik=typeof window<"u"&&typeof document<"u",QS=typeof navigator=="object"&&navigator||void 0,Ese=Ik&&(!QS||["ReactNative","NativeScript","NS"].indexOf(QS.product)<0),Bse=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",kse=Ik&&window.location.href||"http://localhost",Tse=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ik,hasStandardBrowserEnv:Ese,hasStandardBrowserWebWorkerEnv:Bse,navigator:QS,origin:kse},Symbol.toStringTag,{value:"Module"})),uo={...Tse,...Sse};function Ise(e,t){return dw(e,new uo.classes.URLSearchParams,{visitor:function(n,a,r,s){return uo.isNode&&Ct.isBuffer(n)?(this.append(a,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...t})}function Fse(e){return Ct.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Pse(e){const t={},n=Object.keys(e);let a;const r=n.length;let s;for(a=0;a<r;a++)s=n[a],t[s]=e[s];return t}function q6(e){function t(n,a,r,s){let o=n[s++];if(o==="__proto__")return!0;const i=Number.isFinite(+o),c=s>=n.length;return o=!o&&Ct.isArray(r)?r.length:o,c?(Ct.hasOwnProp(r,o)?r[o]=[r[o],a]:r[o]=a,!i):((!r[o]||!Ct.isObject(r[o]))&&(r[o]=[]),t(n,a,r[o],s)&&Ct.isArray(r[o])&&(r[o]=Pse(r[o])),!i)}if(Ct.isFormData(e)&&Ct.isFunction(e.entries)){const n={};return Ct.forEachEntry(e,(a,r)=>{t(Fse(a),r,n,0)}),n}return null}function Dse(e,t,n){if(Ct.isString(e))try{return(t||JSON.parse)(e),Ct.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(n||JSON.stringify)(e)}const lg={transitional:j6,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const a=n.getContentType()||"",r=a.indexOf("application/json")>-1,s=Ct.isObject(t);if(s&&Ct.isHTMLForm(t)&&(t=new FormData(t)),Ct.isFormData(t))return r?JSON.stringify(q6(t)):t;if(Ct.isArrayBuffer(t)||Ct.isBuffer(t)||Ct.isStream(t)||Ct.isFile(t)||Ct.isBlob(t)||Ct.isReadableStream(t))return t;if(Ct.isArrayBufferView(t))return t.buffer;if(Ct.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let i;if(s){if(a.indexOf("application/x-www-form-urlencoded")>-1)return Ise(t,this.formSerializer).toString();if((i=Ct.isFileList(t))||a.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return dw(i?{"files[]":t}:t,c&&new c,this.formSerializer)}}return s||r?(n.setContentType("application/json",!1),Dse(t)):t}],transformResponse:[function(t){const n=this.transitional||lg.transitional,a=n&&n.forcedJSONParsing,r=this.responseType==="json";if(Ct.isResponse(t)||Ct.isReadableStream(t))return t;if(t&&Ct.isString(t)&&(a&&!this.responseType||r)){const o=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(t,this.parseReviver)}catch(i){if(o)throw i.name==="SyntaxError"?Jn.from(i,Jn.ERR_BAD_RESPONSE,this,null,this.response):i}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:uo.classes.FormData,Blob:uo.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ct.forEach(["delete","get","head","post","put","patch"],e=>{lg.headers[e]={}});const Use=Ct.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Rse=e=>{const t={};let n,a,r;return e&&e.split(`
`).forEach(function(o){r=o.indexOf(":"),n=o.substring(0,r).trim().toLowerCase(),a=o.substring(r+1).trim(),!(!n||t[n]&&Use[n])&&(n==="set-cookie"?t[n]?t[n].push(a):t[n]=[a]:t[n]=t[n]?t[n]+", "+a:a)}),t},WD=Symbol("internals");function jv(e){return e&&String(e).trim().toLowerCase()}function $y(e){return e===!1||e==null?e:Ct.isArray(e)?e.map($y):String(e)}function Nse(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=n.exec(e);)t[a[1]]=a[2];return t}const Vse=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Lx(e,t,n,a,r){if(Ct.isFunction(a))return a.call(this,t,n);if(r&&(t=n),!!Ct.isString(t)){if(Ct.isString(a))return t.indexOf(a)!==-1;if(Ct.isRegExp(a))return a.test(t)}}function Lse(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,a)=>n.toUpperCase()+a)}function Mse(e,t){const n=Ct.toCamelCase(" "+t);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+n,{value:function(r,s,o){return this[a].call(this,t,r,s,o)},configurable:!0})})}let ni=class{constructor(t){t&&this.set(t)}set(t,n,a){const r=this;function s(i,c,A){const d=jv(c);if(!d)throw new Error("header name must be a non-empty string");const f=Ct.findKey(r,d);(!f||r[f]===void 0||A===!0||A===void 0&&r[f]!==!1)&&(r[f||c]=$y(i))}const o=(i,c)=>Ct.forEach(i,(A,d)=>s(A,d,c));if(Ct.isPlainObject(t)||t instanceof this.constructor)o(t,n);else if(Ct.isString(t)&&(t=t.trim())&&!Vse(t))o(Rse(t),n);else if(Ct.isObject(t)&&Ct.isIterable(t)){let i={},c,A;for(const d of t){if(!Ct.isArray(d))throw TypeError("Object iterator must return a key-value pair");i[A=d[0]]=(c=i[A])?Ct.isArray(c)?[...c,d[1]]:[c,d[1]]:d[1]}o(i,n)}else t!=null&&s(n,t,a);return this}get(t,n){if(t=jv(t),t){const a=Ct.findKey(this,t);if(a){const r=this[a];if(!n)return r;if(n===!0)return Nse(r);if(Ct.isFunction(n))return n.call(this,r,a);if(Ct.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=jv(t),t){const a=Ct.findKey(this,t);return!!(a&&this[a]!==void 0&&(!n||Lx(this,this[a],a,n)))}return!1}delete(t,n){const a=this;let r=!1;function s(o){if(o=jv(o),o){const i=Ct.findKey(a,o);i&&(!n||Lx(a,a[i],i,n))&&(delete a[i],r=!0)}}return Ct.isArray(t)?t.forEach(s):s(t),r}clear(t){const n=Object.keys(this);let a=n.length,r=!1;for(;a--;){const s=n[a];(!t||Lx(this,this[s],s,t,!0))&&(delete this[s],r=!0)}return r}normalize(t){const n=this,a={};return Ct.forEach(this,(r,s)=>{const o=Ct.findKey(a,s);if(o){n[o]=$y(r),delete n[s];return}const i=t?Lse(s):String(s).trim();i!==s&&delete n[s],n[i]=$y(r),a[i]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return Ct.forEach(this,(a,r)=>{a!=null&&a!==!1&&(n[r]=t&&Ct.isArray(a)?a.join(", "):a)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const a=new this(t);return n.forEach(r=>a.set(r)),a}static accessor(t){const a=(this[WD]=this[WD]={accessors:{}}).accessors,r=this.prototype;function s(o){const i=jv(o);a[i]||(Mse(r,o),a[i]=!0)}return Ct.isArray(t)?t.forEach(s):s(t),this}};ni.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ct.reduceDescriptors(ni.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(a){this[n]=a}}});Ct.freezeMethods(ni);function Mx(e,t){const n=this||lg,a=t||n,r=ni.from(a.headers);let s=a.data;return Ct.forEach(e,function(i){s=i.call(n,s,r.normalize(),t?t.status:void 0)}),r.normalize(),s}function Y6(e){return!!(e&&e.__CANCEL__)}function Kh(e,t,n){Jn.call(this,e??"canceled",Jn.ERR_CANCELED,t,n),this.name="CanceledError"}Ct.inherits(Kh,Jn,{__CANCEL__:!0});function X6(e,t,n){const a=n.config.validateStatus;!n.status||!a||a(n.status)?e(n):t(new Jn("Request failed with status code "+n.status,[Jn.ERR_BAD_REQUEST,Jn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Ose(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Hse(e,t){e=e||10;const n=new Array(e),a=new Array(e);let r=0,s=0,o;return t=t!==void 0?t:1e3,function(c){const A=Date.now(),d=a[s];o||(o=A),n[r]=c,a[r]=A;let f=s,m=0;for(;f!==r;)m+=n[f++],f=f%e;if(r=(r+1)%e,r===s&&(s=(s+1)%e),A-o<t)return;const h=d&&A-d;return h?Math.round(m*1e3/h):void 0}}function $se(e,t){let n=0,a=1e3/t,r,s;const o=(A,d=Date.now())=>{n=d,r=null,s&&(clearTimeout(s),s=null),e(...A)};return[(...A)=>{const d=Date.now(),f=d-n;f>=a?o(A,d):(r=A,s||(s=setTimeout(()=>{s=null,o(r)},a-f)))},()=>r&&o(r)]}const I_=(e,t,n=3)=>{let a=0;const r=Hse(50,250);return $se(s=>{const o=s.loaded,i=s.lengthComputable?s.total:void 0,c=o-a,A=r(c),d=o<=i;a=o;const f={loaded:o,total:i,progress:i?o/i:void 0,bytes:c,rate:A||void 0,estimated:A&&i&&d?(i-o)/A:void 0,event:s,lengthComputable:i!=null,[t?"download":"upload"]:!0};e(f)},n)},jD=(e,t)=>{const n=e!=null;return[a=>t[0]({lengthComputable:n,total:e,loaded:a}),t[1]]},qD=e=>(...t)=>Ct.asap(()=>e(...t)),Qse=uo.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,uo.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(uo.origin),uo.navigator&&/(msie|trident)/i.test(uo.navigator.userAgent)):()=>!0,Gse=uo.hasStandardBrowserEnv?{write(e,t,n,a,r,s,o){if(typeof document>"u")return;const i=[`${e}=${encodeURIComponent(t)}`];Ct.isNumber(n)&&i.push(`expires=${new Date(n).toUTCString()}`),Ct.isString(a)&&i.push(`path=${a}`),Ct.isString(r)&&i.push(`domain=${r}`),s===!0&&i.push("secure"),Ct.isString(o)&&i.push(`SameSite=${o}`),document.cookie=i.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function zse(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Kse(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function J6(e,t,n){let a=!zse(t);return e&&(a||n==!1)?Kse(e,t):t}const YD=e=>e instanceof ni?{...e}:e;function sf(e,t){t=t||{};const n={};function a(A,d,f,m){return Ct.isPlainObject(A)&&Ct.isPlainObject(d)?Ct.merge.call({caseless:m},A,d):Ct.isPlainObject(d)?Ct.merge({},d):Ct.isArray(d)?d.slice():d}function r(A,d,f,m){if(Ct.isUndefined(d)){if(!Ct.isUndefined(A))return a(void 0,A,f,m)}else return a(A,d,f,m)}function s(A,d){if(!Ct.isUndefined(d))return a(void 0,d)}function o(A,d){if(Ct.isUndefined(d)){if(!Ct.isUndefined(A))return a(void 0,A)}else return a(void 0,d)}function i(A,d,f){if(f in t)return a(A,d);if(f in e)return a(void 0,A)}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:i,headers:(A,d,f)=>r(YD(A),YD(d),f,!0)};return Ct.forEach(Object.keys({...e,...t}),function(d){const f=c[d]||r,m=f(e[d],t[d],d);Ct.isUndefined(m)&&f!==i||(n[d]=m)}),n}const Z6=e=>{const t=sf({},e);let{data:n,withXSRFToken:a,xsrfHeaderName:r,xsrfCookieName:s,headers:o,auth:i}=t;if(t.headers=o=ni.from(o),t.url=W6(J6(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),i&&o.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):""))),Ct.isFormData(n)){if(uo.hasStandardBrowserEnv||uo.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(Ct.isFunction(n.getHeaders)){const c=n.getHeaders(),A=["content-type","content-length"];Object.entries(c).forEach(([d,f])=>{A.includes(d.toLowerCase())&&o.set(d,f)})}}if(uo.hasStandardBrowserEnv&&(a&&Ct.isFunction(a)&&(a=a(t)),a||a!==!1&&Qse(t.url))){const c=r&&s&&Gse.read(s);c&&o.set(r,c)}return t},Wse=typeof XMLHttpRequest<"u",jse=Wse&&function(e){return new Promise(function(n,a){const r=Z6(e);let s=r.data;const o=ni.from(r.headers).normalize();let{responseType:i,onUploadProgress:c,onDownloadProgress:A}=r,d,f,m,h,v;function y(){h&&h(),v&&v(),r.cancelToken&&r.cancelToken.unsubscribe(d),r.signal&&r.signal.removeEventListener("abort",d)}let g=new XMLHttpRequest;g.open(r.method.toUpperCase(),r.url,!0),g.timeout=r.timeout;function w(){if(!g)return;const x=ni.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),U={data:!i||i==="text"||i==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:x,config:e,request:g};X6(function(S){n(S),y()},function(S){a(S),y()},U),g=null}"onloadend"in g?g.onloadend=w:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(w)},g.onabort=function(){g&&(a(new Jn("Request aborted",Jn.ECONNABORTED,e,g)),g=null)},g.onerror=function(T){const U=T&&T.message?T.message:"Network Error",k=new Jn(U,Jn.ERR_NETWORK,e,g);k.event=T||null,a(k),g=null},g.ontimeout=function(){let T=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const U=r.transitional||j6;r.timeoutErrorMessage&&(T=r.timeoutErrorMessage),a(new Jn(T,U.clarifyTimeoutError?Jn.ETIMEDOUT:Jn.ECONNABORTED,e,g)),g=null},s===void 0&&o.setContentType(null),"setRequestHeader"in g&&Ct.forEach(o.toJSON(),function(T,U){g.setRequestHeader(U,T)}),Ct.isUndefined(r.withCredentials)||(g.withCredentials=!!r.withCredentials),i&&i!=="json"&&(g.responseType=r.responseType),A&&([m,v]=I_(A,!0),g.addEventListener("progress",m)),c&&g.upload&&([f,h]=I_(c),g.upload.addEventListener("progress",f),g.upload.addEventListener("loadend",h)),(r.cancelToken||r.signal)&&(d=x=>{g&&(a(!x||x.type?new Kh(null,e,g):x),g.abort(),g=null)},r.cancelToken&&r.cancelToken.subscribe(d),r.signal&&(r.signal.aborted?d():r.signal.addEventListener("abort",d)));const b=Ose(r.url);if(b&&uo.protocols.indexOf(b)===-1){a(new Jn("Unsupported protocol "+b+":",Jn.ERR_BAD_REQUEST,e));return}g.send(s||null)})},qse=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let a=new AbortController,r;const s=function(A){if(!r){r=!0,i();const d=A instanceof Error?A:this.reason;a.abort(d instanceof Jn?d:new Kh(d instanceof Error?d.message:d))}};let o=t&&setTimeout(()=>{o=null,s(new Jn(`timeout ${t} of ms exceeded`,Jn.ETIMEDOUT))},t);const i=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(A=>{A.unsubscribe?A.unsubscribe(s):A.removeEventListener("abort",s)}),e=null)};e.forEach(A=>A.addEventListener("abort",s));const{signal:c}=a;return c.unsubscribe=()=>Ct.asap(i),c}},Yse=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let a=0,r;for(;a<n;)r=a+t,yield e.slice(a,r),a=r},Xse=async function*(e,t){for await(const n of Jse(e))yield*Yse(n,t)},Jse=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:a}=await t.read();if(n)break;yield a}}finally{await t.cancel()}},XD=(e,t,n,a)=>{const r=Xse(e,t);let s=0,o,i=c=>{o||(o=!0,a&&a(c))};return new ReadableStream({async pull(c){try{const{done:A,value:d}=await r.next();if(A){i(),c.close();return}let f=d.byteLength;if(n){let m=s+=f;n(m)}c.enqueue(new Uint8Array(d))}catch(A){throw i(A),A}},cancel(c){return i(c),r.return()}},{highWaterMark:2})},JD=64*1024,{isFunction:Q1}=Ct,Zse=(({Request:e,Response:t})=>({Request:e,Response:t}))(Ct.global),{ReadableStream:ZD,TextEncoder:e3}=Ct.global,t3=(e,...t)=>{try{return!!e(...t)}catch{return!1}},eoe=e=>{e=Ct.merge.call({skipUndefined:!0},Zse,e);const{fetch:t,Request:n,Response:a}=e,r=t?Q1(t):typeof fetch=="function",s=Q1(n),o=Q1(a);if(!r)return!1;const i=r&&Q1(ZD),c=r&&(typeof e3=="function"?(v=>y=>v.encode(y))(new e3):async v=>new Uint8Array(await new n(v).arrayBuffer())),A=s&&i&&t3(()=>{let v=!1;const y=new n(uo.origin,{body:new ZD,method:"POST",get duplex(){return v=!0,"half"}}).headers.has("Content-Type");return v&&!y}),d=o&&i&&t3(()=>Ct.isReadableStream(new a("").body)),f={stream:d&&(v=>v.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(v=>{!f[v]&&(f[v]=(y,g)=>{let w=y&&y[v];if(w)return w.call(y);throw new Jn(`Response type '${v}' is not supported`,Jn.ERR_NOT_SUPPORT,g)})});const m=async v=>{if(v==null)return 0;if(Ct.isBlob(v))return v.size;if(Ct.isSpecCompliantForm(v))return(await new n(uo.origin,{method:"POST",body:v}).arrayBuffer()).byteLength;if(Ct.isArrayBufferView(v)||Ct.isArrayBuffer(v))return v.byteLength;if(Ct.isURLSearchParams(v)&&(v=v+""),Ct.isString(v))return(await c(v)).byteLength},h=async(v,y)=>{const g=Ct.toFiniteNumber(v.getContentLength());return g??m(y)};return async v=>{let{url:y,method:g,data:w,signal:b,cancelToken:x,timeout:T,onDownloadProgress:U,onUploadProgress:k,responseType:S,headers:E,withCredentials:C="same-origin",fetchOptions:P}=Z6(v),F=t||fetch;S=S?(S+"").toLowerCase():"text";let N=qse([b,x&&x.toAbortSignal()],T),L=null;const ie=N&&N.unsubscribe&&(()=>{N.unsubscribe()});let le;try{if(k&&A&&g!=="get"&&g!=="head"&&(le=await h(E,w))!==0){let G=new n(y,{method:"POST",body:w,duplex:"half"}),D;if(Ct.isFormData(w)&&(D=G.headers.get("content-type"))&&E.setContentType(D),G.body){const[j,ne]=jD(le,I_(qD(k)));w=XD(G.body,JD,j,ne)}}Ct.isString(C)||(C=C?"include":"omit");const Q=s&&"credentials"in n.prototype,Z={...P,signal:N,method:g.toUpperCase(),headers:E.normalize().toJSON(),body:w,duplex:"half",credentials:Q?C:void 0};L=s&&new n(y,Z);let ce=await(s?F(L,P):F(y,Z));const J=d&&(S==="stream"||S==="response");if(d&&(U||J&&ie)){const G={};["status","statusText","headers"].forEach(H=>{G[H]=ce[H]});const D=Ct.toFiniteNumber(ce.headers.get("content-length")),[j,ne]=U&&jD(D,I_(qD(U),!0))||[];ce=new a(XD(ce.body,JD,j,()=>{ne&&ne(),ie&&ie()}),G)}S=S||"text";let se=await f[Ct.findKey(f,S)||"text"](ce,v);return!J&&ie&&ie(),await new Promise((G,D)=>{X6(G,D,{data:se,headers:ni.from(ce.headers),status:ce.status,statusText:ce.statusText,config:v,request:L})})}catch(Q){throw ie&&ie(),Q&&Q.name==="TypeError"&&/Load failed|fetch/i.test(Q.message)?Object.assign(new Jn("Network Error",Jn.ERR_NETWORK,v,L),{cause:Q.cause||Q}):Jn.from(Q,Q&&Q.code,v,L)}}},toe=new Map,e5=e=>{let t=e&&e.env||{};const{fetch:n,Request:a,Response:r}=t,s=[a,r,n];let o=s.length,i=o,c,A,d=toe;for(;i--;)c=s[i],A=d.get(c),A===void 0&&d.set(c,A=i?new Map:eoe(t)),d=A;return A};e5();const Fk={http:gse,xhr:jse,fetch:{get:e5}};Ct.forEach(Fk,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const n3=e=>`- ${e}`,noe=e=>Ct.isFunction(e)||e===null||e===!1;function aoe(e,t){e=Ct.isArray(e)?e:[e];const{length:n}=e;let a,r;const s={};for(let o=0;o<n;o++){a=e[o];let i;if(r=a,!noe(a)&&(r=Fk[(i=String(a)).toLowerCase()],r===void 0))throw new Jn(`Unknown adapter '${i}'`);if(r&&(Ct.isFunction(r)||(r=r.get(t))))break;s[i||"#"+o]=r}if(!r){const o=Object.entries(s).map(([c,A])=>`adapter ${c} `+(A===!1?"is not supported by the environment":"is not available in the build"));let i=n?o.length>1?`since :
`+o.map(n3).join(`
`):" "+n3(o[0]):"as no adapter specified";throw new Jn("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return r}const t5={getAdapter:aoe,adapters:Fk};function Ox(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Kh(null,e)}function a3(e){return Ox(e),e.headers=ni.from(e.headers),e.data=Mx.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),t5.getAdapter(e.adapter||lg.adapter,e)(e).then(function(a){return Ox(e),a.data=Mx.call(e,e.transformResponse,a),a.headers=ni.from(a.headers),a},function(a){return Y6(a)||(Ox(e),a&&a.response&&(a.response.data=Mx.call(e,e.transformResponse,a.response),a.response.headers=ni.from(a.response.headers))),Promise.reject(a)})}const n5="1.13.2",Aw={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Aw[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});const r3={};Aw.transitional=function(t,n,a){function r(s,o){return"[Axios v"+n5+"] Transitional option '"+s+"'"+o+(a?". "+a:"")}return(s,o,i)=>{if(t===!1)throw new Jn(r(o," has been removed"+(n?" in "+n:"")),Jn.ERR_DEPRECATED);return n&&!r3[o]&&(r3[o]=!0,console.warn(r(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,o,i):!0}};Aw.spelling=function(t){return(n,a)=>(console.warn(`${a} is likely a misspelling of ${t}`),!0)};function roe(e,t,n){if(typeof e!="object")throw new Jn("options must be an object",Jn.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let r=a.length;for(;r-- >0;){const s=a[r],o=t[s];if(o){const i=e[s],c=i===void 0||o(i,s,e);if(c!==!0)throw new Jn("option "+s+" must be "+c,Jn.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Jn("Unknown option "+s,Jn.ERR_BAD_OPTION)}}const Qy={assertOptions:roe,validators:Aw},ou=Qy.validators;let WA=class{constructor(t){this.defaults=t||{},this.interceptors={request:new KD,response:new KD}}async request(t,n){try{return await this._request(t,n)}catch(a){if(a instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const s=r.stack?r.stack.replace(/^.+\n/,""):"";try{a.stack?s&&!String(a.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+s):a.stack=s}catch{}}throw a}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=sf(this.defaults,n);const{transitional:a,paramsSerializer:r,headers:s}=n;a!==void 0&&Qy.assertOptions(a,{silentJSONParsing:ou.transitional(ou.boolean),forcedJSONParsing:ou.transitional(ou.boolean),clarifyTimeoutError:ou.transitional(ou.boolean)},!1),r!=null&&(Ct.isFunction(r)?n.paramsSerializer={serialize:r}:Qy.assertOptions(r,{encode:ou.function,serialize:ou.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Qy.assertOptions(n,{baseUrl:ou.spelling("baseURL"),withXsrfToken:ou.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&Ct.merge(s.common,s[n.method]);s&&Ct.forEach(["delete","get","head","post","put","patch","common"],v=>{delete s[v]}),n.headers=ni.concat(o,s);const i=[];let c=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(n)===!1||(c=c&&y.synchronous,i.unshift(y.fulfilled,y.rejected))});const A=[];this.interceptors.response.forEach(function(y){A.push(y.fulfilled,y.rejected)});let d,f=0,m;if(!c){const v=[a3.bind(this),void 0];for(v.unshift(...i),v.push(...A),m=v.length,d=Promise.resolve(n);f<m;)d=d.then(v[f++],v[f++]);return d}m=i.length;let h=n;for(;f<m;){const v=i[f++],y=i[f++];try{h=v(h)}catch(g){y.call(this,g);break}}try{d=a3.call(this,h)}catch(v){return Promise.reject(v)}for(f=0,m=A.length;f<m;)d=d.then(A[f++],A[f++]);return d}getUri(t){t=sf(this.defaults,t);const n=J6(t.baseURL,t.url,t.allowAbsoluteUrls);return W6(n,t.params,t.paramsSerializer)}};Ct.forEach(["delete","get","head","options"],function(t){WA.prototype[t]=function(n,a){return this.request(sf(a||{},{method:t,url:n,data:(a||{}).data}))}});Ct.forEach(["post","put","patch"],function(t){function n(a){return function(s,o,i){return this.request(sf(i||{},{method:t,headers:a?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}WA.prototype[t]=n(),WA.prototype[t+"Form"]=n(!0)});let soe=class a5{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const a=this;this.promise.then(r=>{if(!a._listeners)return;let s=a._listeners.length;for(;s-- >0;)a._listeners[s](r);a._listeners=null}),this.promise.then=r=>{let s;const o=new Promise(i=>{a.subscribe(i),s=i}).then(r);return o.cancel=function(){a.unsubscribe(s)},o},t(function(s,o,i){a.reason||(a.reason=new Kh(s,o,i),n(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=a=>{t.abort(a)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new a5(function(r){t=r}),cancel:t}}};function ooe(e){return function(n){return e.apply(null,n)}}function ioe(e){return Ct.isObject(e)&&e.isAxiosError===!0}const GS={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(GS).forEach(([e,t])=>{GS[t]=e});function r5(e){const t=new WA(e),n=R6(WA.prototype.request,t);return Ct.extend(n,WA.prototype,t,{allOwnKeys:!0}),Ct.extend(n,t,null,{allOwnKeys:!0}),n.create=function(r){return r5(sf(e,r))},n}const Cr=r5(lg);Cr.Axios=WA;Cr.CanceledError=Kh;Cr.CancelToken=soe;Cr.isCancel=Y6;Cr.VERSION=n5;Cr.toFormData=dw;Cr.AxiosError=Jn;Cr.Cancel=Cr.CanceledError;Cr.all=function(t){return Promise.all(t)};Cr.spread=ooe;Cr.isAxiosError=ioe;Cr.mergeConfig=sf;Cr.AxiosHeaders=ni;Cr.formToJSON=e=>q6(Ct.isHTMLForm(e)?new FormData(e):e);Cr.getAdapter=t5.getAdapter;Cr.HttpStatusCode=GS;Cr.default=Cr;const{Axios:zat,AxiosError:Kat,CanceledError:Wat,isCancel:jat,CancelToken:qat,VERSION:Yat,all:Xat,Cancel:Jat,isAxiosError:Zat,spread:ert,toFormData:trt,AxiosHeaders:nrt,HttpStatusCode:art,formToJSON:rrt,getAdapter:srt,mergeConfig:ort}=Cr,loe=()=>{};var s3={};const s5={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};const sn=function(e,t){if(!e)throw Wh(t)},Wh=function(e){return new Error("Firebase Database ("+s5.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};const o5=function(e){const t=[];let n=0;for(let a=0;a<e.length;a++){let r=e.charCodeAt(a);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&a+1<e.length&&(e.charCodeAt(a+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++a)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},uoe=function(e){const t=[];let n=0,a=0;for(;n<e.length;){const r=e[n++];if(r<128)t[a++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[a++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=e[n++],o=e[n++],i=e[n++],c=((r&7)<<18|(s&63)<<12|(o&63)<<6|i&63)-65536;t[a++]=String.fromCharCode(55296+(c>>10)),t[a++]=String.fromCharCode(56320+(c&1023))}else{const s=e[n++],o=e[n++];t[a++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return t.join("")},fw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let r=0;r<e.length;r+=3){const s=e[r],o=r+1<e.length,i=o?e[r+1]:0,c=r+2<e.length,A=c?e[r+2]:0,d=s>>2,f=(s&3)<<4|i>>4;let m=(i&15)<<2|A>>6,h=A&63;c||(h=64,o||(m=64)),a.push(n[d],n[f],n[m],n[h])}return a.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(o5(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):uoe(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let r=0;r<e.length;){const s=n[e.charAt(r++)],i=r<e.length?n[e.charAt(r)]:0;++r;const A=r<e.length?n[e.charAt(r)]:64;++r;const f=r<e.length?n[e.charAt(r)]:64;if(++r,s==null||i==null||A==null||f==null)throw new coe;const m=s<<2|i>>4;if(a.push(m),A!==64){const h=i<<4&240|A>>2;if(a.push(h),f!==64){const v=A<<6&192|f;a.push(v)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class coe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const i5=function(e){const t=o5(e);return fw.encodeByteArray(t,!0)},l5=function(e){return i5(e).replace(/\./g,"")},F_=function(e){try{return fw.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function doe(e){return u5(void 0,e)}function u5(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)!t.hasOwnProperty(n)||!Aoe(n)||(e[n]=u5(e[n],t[n]));return e}function Aoe(e){return e!=="__proto__"}function foe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const moe=()=>foe().__FIREBASE_DEFAULTS__,hoe=()=>{if(typeof process>"u"||typeof s3>"u")return;const e=s3.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},voe=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&F_(e[1]);return t&&JSON.parse(t)},Pk=()=>{try{return loe()||moe()||hoe()||voe()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},poe=e=>{var t,n;return(n=(t=Pk())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},c5=()=>{var e;return(e=Pk())===null||e===void 0?void 0:e.config},d5=e=>{var t;return(t=Pk())===null||t===void 0?void 0:t[`_${e}`]};class _0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,a)=>{n?this.reject(n):this.resolve(a),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,a))}}}function mw(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function goe(e){return(await fetch(e,{credentials:"include"})).ok}const Vp={};function yoe(){const e={prod:[],emulator:[]};for(const t of Object.keys(Vp))Vp[t]?e.emulator.push(t):e.prod.push(t);return e}function _oe(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let o3=!1;function woe(e,t){if(typeof window>"u"||typeof document>"u"||!mw(window.location.host)||Vp[e]===t||Vp[e]||o3)return;Vp[e]=t;function n(m){return`__firebase__banner__${m}`}const a="__firebase__banner",s=yoe().prod.length>0;function o(){const m=document.getElementById(a);m&&m.remove()}function i(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,h){m.setAttribute("width","24"),m.setAttribute("id",h),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function A(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{o3=!0,o()},m}function d(m,h){m.setAttribute("id",h),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=_oe(a),h=n("text"),v=document.getElementById(h)||document.createElement("span"),y=n("learnmore"),g=document.getElementById(y)||document.createElement("a"),w=n("preprendIcon"),b=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const x=m.element;i(x),d(g,y);const T=A();c(b,w),x.append(b,v,g,T),document.body.appendChild(x)}s?(v.innerText="Preview backend disconnected.",b.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(b.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",h)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}function Mo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Dk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mo())}function boe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xoe(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function A5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Coe(){const e=Mo();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Soe(){return s5.NODE_ADMIN===!0}function f5(){try{return typeof indexedDB=="object"}catch{return!1}}function Eoe(){return new Promise((e,t)=>{try{let n=!0;const a="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(a);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(a),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;t(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}const Boe="FirebaseError";class Uu extends Error{constructor(t,n,a){super(n),this.code=t,this.customData=a,this.name=Boe,Object.setPrototypeOf(this,Uu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jh.prototype.create)}}class jh{constructor(t,n,a){this.service=t,this.serviceName=n,this.errors=a}create(t,...n){const a=n[0]||{},r=`${this.service}/${t}`,s=this.errors[t],o=s?koe(s,a):"Error",i=`${this.serviceName}: ${o} (${r}).`;return new Uu(r,i,a)}}function koe(e,t){return e.replace(Toe,(n,a)=>{const r=t[a];return r!=null?String(r):`<${a}?>`})}const Toe=/\{\$([^}]+)}/g;function w0(e){return JSON.parse(e)}function Hs(e){return JSON.stringify(e)}const m5=function(e){let t={},n={},a={},r="";try{const s=e.split(".");t=w0(F_(s[0])||""),n=w0(F_(s[1])||""),r=s[2],a=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:a,signature:r}},Ioe=function(e){const t=m5(e),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Foe=function(e){const t=m5(e).claims;return typeof t=="object"&&t.admin===!0};function Uc(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Sh(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function zS(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function P_(e,t,n){const a={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=t.call(n,e[r],r,e));return a}function Eh(e,t){if(e===t)return!0;const n=Object.keys(e),a=Object.keys(t);for(const r of n){if(!a.includes(r))return!1;const s=e[r],o=t[r];if(i3(s)&&i3(o)){if(!Eh(s,o))return!1}else if(s!==o)return!1}for(const r of a)if(!n.includes(r))return!1;return!0}function i3(e){return e!==null&&typeof e=="object"}function qh(e){const t=[];for(const[n,a]of Object.entries(e))Array.isArray(a)?a.forEach(r=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a));return t.length?"&"+t.join("&"):""}class Poe{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n||(n=0);const a=this.W_;if(typeof t=="string")for(let f=0;f<16;f++)a[f]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let f=0;f<16;f++)a[f]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let f=16;f<80;f++){const m=a[f-3]^a[f-8]^a[f-14]^a[f-16];a[f]=(m<<1|m>>>31)&4294967295}let r=this.chain_[0],s=this.chain_[1],o=this.chain_[2],i=this.chain_[3],c=this.chain_[4],A,d;for(let f=0;f<80;f++){f<40?f<20?(A=i^s&(o^i),d=1518500249):(A=s^o^i,d=1859775393):f<60?(A=s&o|i&(s|o),d=2400959708):(A=s^o^i,d=3395469782);const m=(r<<5|r>>>27)+A+c+d+a[f]&4294967295;c=i,i=o,o=(s<<30|s>>>2)&4294967295,s=r,r=m}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+i&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(t,n){if(t==null)return;n===void 0&&(n=t.length);const a=n-this.blockSize;let r=0;const s=this.buf_;let o=this.inbuf_;for(;r<n;){if(o===0)for(;r<=a;)this.compress_(t,r),r+=this.blockSize;if(typeof t=="string"){for(;r<n;)if(s[o]=t.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}else for(;r<n;)if(s[o]=t[r],++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const t=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let a=0;for(let r=0;r<5;r++)for(let s=24;s>=0;s-=8)t[a]=this.chain_[r]>>s&255,++a;return t}}function Doe(e,t){const n=new Uoe(e,t);return n.subscribe.bind(n)}class Uoe{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(a=>{this.error(a)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,a){let r;if(t===void 0&&n===void 0&&a===void 0)throw new Error("Missing Observer.");Roe(t,["next","error","complete"])?r=t:r={next:t,error:n,complete:a},r.next===void 0&&(r.next=Hx),r.error===void 0&&(r.error=Hx),r.complete===void 0&&(r.complete=Hx);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Roe(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Hx(){}function Noe(e,t){return`${e} failed: ${t} argument `}const Voe=function(e){const t=[];let n=0;for(let a=0;a<e.length;a++){let r=e.charCodeAt(a);if(r>=55296&&r<=56319){const s=r-55296;a++,sn(a<e.length,"Surrogate pair missing trail surrogate.");const o=e.charCodeAt(a)-56320;r=65536+(s<<10)+o}r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):r<65536?(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},hw=function(e){let t=0;for(let n=0;n<e.length;n++){const a=e.charCodeAt(n);a<128?t++:a<2048?t+=2:a>=55296&&a<=56319?(t+=4,n++):t+=3}return t};function Ru(e){return e&&e._delegate?e._delegate:e}class Vl{constructor(t,n,a){this.name=t,this.instanceFactory=n,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const BA="[DEFAULT]";class Loe{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const a=new _0;if(this.instancesDeferred.set(n,a),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&a.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const a=this.normalizeInstanceIdentifier(t?.identifier),r=(n=t?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Ooe(t))try{this.getOrInitializeService({instanceIdentifier:BA})}catch{}for(const[n,a]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});a.resolve(s)}catch{}}}}clearInstance(t=BA){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=BA){return this.instances.has(t)}getOptions(t=BA){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:a,options:n});for(const[s,o]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(s);a===i&&o.resolve(r)}return r}onInit(t,n){var a;const r=this.normalizeInstanceIdentifier(n),s=(a=this.onInitCallbacks.get(r))!==null&&a!==void 0?a:new Set;s.add(t),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&t(o,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const a=this.onInitCallbacks.get(n);if(a)for(const r of a)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let a=this.instances.get(t);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:Moe(t),options:n}),this.instances.set(t,a),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(a,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,a)}catch{}return a||null}normalizeInstanceIdentifier(t=BA){return this.component?this.component.multipleInstances?t:BA:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Moe(e){return e===BA?void 0:e}function Ooe(e){return e.instantiationMode==="EAGER"}class Hoe{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Loe(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}var Ma;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Ma||(Ma={}));const $oe={debug:Ma.DEBUG,verbose:Ma.VERBOSE,info:Ma.INFO,warn:Ma.WARN,error:Ma.ERROR,silent:Ma.SILENT},Qoe=Ma.INFO,Goe={[Ma.DEBUG]:"log",[Ma.VERBOSE]:"log",[Ma.INFO]:"info",[Ma.WARN]:"warn",[Ma.ERROR]:"error"},zoe=(e,t,...n)=>{if(t<e.logLevel)return;const a=new Date().toISOString(),r=Goe[t];if(r)console[r](`[${a}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};let ug=class{constructor(t){this.name=t,this._logLevel=Qoe,this._logHandler=zoe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ma))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?$oe[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ma.DEBUG,...t),this._logHandler(this,Ma.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ma.VERBOSE,...t),this._logHandler(this,Ma.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ma.INFO,...t),this._logHandler(this,Ma.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ma.WARN,...t),this._logHandler(this,Ma.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ma.ERROR,...t),this._logHandler(this,Ma.ERROR,...t)}};const Koe=(e,t)=>t.some(n=>e instanceof n);let l3,u3;function Woe(){return l3||(l3=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function joe(){return u3||(u3=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const h5=new WeakMap,KS=new WeakMap,v5=new WeakMap,$x=new WeakMap,Uk=new WeakMap;function qoe(e){const t=new Promise((n,a)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(_d(e.result)),r()},o=()=>{a(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&h5.set(n,e)}).catch(()=>{}),Uk.set(t,e),t}function Yoe(e){if(KS.has(e))return;const t=new Promise((n,a)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{a(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});KS.set(e,t)}let WS={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return KS.get(e);if(t==="objectStoreNames")return e.objectStoreNames||v5.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _d(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Xoe(e){WS=e(WS)}function Joe(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const a=e.call(Qx(this),t,...n);return v5.set(a,t.sort?t.sort():[t]),_d(a)}:joe().includes(e)?function(...t){return e.apply(Qx(this),t),_d(h5.get(this))}:function(...t){return _d(e.apply(Qx(this),t))}}function Zoe(e){return typeof e=="function"?Joe(e):(e instanceof IDBTransaction&&Yoe(e),Koe(e,Woe())?new Proxy(e,WS):e)}function _d(e){if(e instanceof IDBRequest)return qoe(e);if($x.has(e))return $x.get(e);const t=Zoe(e);return t!==e&&($x.set(e,t),Uk.set(t,e)),t}const Qx=e=>Uk.get(e);function eie(e,t,{blocked:n,upgrade:a,blocking:r,terminated:s}={}){const o=indexedDB.open(e,t),i=_d(o);return a&&o.addEventListener("upgradeneeded",c=>{a(_d(o.result),c.oldVersion,c.newVersion,_d(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),i.then(c=>{s&&c.addEventListener("close",()=>s()),r&&c.addEventListener("versionchange",A=>r(A.oldVersion,A.newVersion,A))}).catch(()=>{}),i}const tie=["get","getKey","getAll","getAllKeys","count"],nie=["put","add","delete","clear"],Gx=new Map;function c3(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Gx.get(t))return Gx.get(t);const n=t.replace(/FromIndex$/,""),a=t!==n,r=nie.includes(n);if(!(n in(a?IDBIndex:IDBObjectStore).prototype)||!(r||tie.includes(n)))return;const s=async function(o,...i){const c=this.transaction(o,r?"readwrite":"readonly");let A=c.store;return a&&(A=A.index(i.shift())),(await Promise.all([A[n](...i),r&&c.done]))[0]};return Gx.set(t,s),s}Xoe(e=>({...e,get:(t,n,a)=>c3(t,n)||e.get(t,n,a),has:(t,n)=>!!c3(t,n)||e.has(t,n)}));class aie{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(rie(n)){const a=n.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(n=>n).join(" ")}}function rie(e){const t=e.getComponent();return t?.type==="VERSION"}const jS="@firebase/app",d3="0.13.2";const wc=new ug("@firebase/app"),sie="@firebase/app-compat",oie="@firebase/analytics-compat",iie="@firebase/analytics",lie="@firebase/app-check-compat",uie="@firebase/app-check",cie="@firebase/auth",die="@firebase/auth-compat",Aie="@firebase/database",fie="@firebase/data-connect",mie="@firebase/database-compat",hie="@firebase/functions",vie="@firebase/functions-compat",pie="@firebase/installations",gie="@firebase/installations-compat",yie="@firebase/messaging",_ie="@firebase/messaging-compat",wie="@firebase/performance",bie="@firebase/performance-compat",xie="@firebase/remote-config",Cie="@firebase/remote-config-compat",Sie="@firebase/storage",Eie="@firebase/storage-compat",Bie="@firebase/firestore",kie="@firebase/ai",Tie="@firebase/firestore-compat",Iie="firebase",Fie="11.10.0";const qS="[DEFAULT]",Pie={[jS]:"fire-core",[sie]:"fire-core-compat",[iie]:"fire-analytics",[oie]:"fire-analytics-compat",[uie]:"fire-app-check",[lie]:"fire-app-check-compat",[cie]:"fire-auth",[die]:"fire-auth-compat",[Aie]:"fire-rtdb",[fie]:"fire-data-connect",[mie]:"fire-rtdb-compat",[hie]:"fire-fn",[vie]:"fire-fn-compat",[pie]:"fire-iid",[gie]:"fire-iid-compat",[yie]:"fire-fcm",[_ie]:"fire-fcm-compat",[wie]:"fire-perf",[bie]:"fire-perf-compat",[xie]:"fire-rc",[Cie]:"fire-rc-compat",[Sie]:"fire-gcs",[Eie]:"fire-gcs-compat",[Bie]:"fire-fst",[Tie]:"fire-fst-compat",[kie]:"fire-vertex","fire-js":"fire-js",[Iie]:"fire-js-all"};const D_=new Map,Die=new Map,YS=new Map;function A3(e,t){try{e.container.addComponent(t)}catch(n){wc.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Eu(e){const t=e.name;if(YS.has(t))return wc.debug(`There were multiple attempts to register component ${t}.`),!1;YS.set(t,e);for(const n of D_.values())A3(n,e);for(const n of Die.values())A3(n,e);return!0}function p5(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Qi(e){return e==null?!1:e.settings!==void 0}const Uie={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wd=new jh("app","Firebase",Uie);class Rie{constructor(t,n,a){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Vl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw wd.create("app-deleted",{appName:this._name})}}const jd=Fie;function g5(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const a=Object.assign({name:qS,automaticDataCollectionEnabled:!0},t),r=a.name;if(typeof r!="string"||!r)throw wd.create("bad-app-name",{appName:String(r)});if(n||(n=c5()),!n)throw wd.create("no-options");const s=D_.get(r);if(s){if(Eh(n,s.options)&&Eh(a,s.config))return s;throw wd.create("duplicate-app",{appName:r})}const o=new Hoe(r);for(const c of YS.values())o.addComponent(c);const i=new Rie(n,a,o);return D_.set(r,i),i}function y5(e=qS){const t=D_.get(e);if(!t&&e===qS&&c5())return g5();if(!t)throw wd.create("no-app",{appName:e});return t}function xi(e,t,n){var a;let r=(a=Pie[e])!==null&&a!==void 0?a:e;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const i=[`Unable to register library "${r}" with version "${t}":`];s&&i.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&i.push("and"),o&&i.push(`version name "${t}" contains illegal characters (whitespace or "/")`),wc.warn(i.join(" "));return}Eu(new Vl(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}const Nie="firebase-heartbeat-database",Vie=1,b0="firebase-heartbeat-store";let zx=null;function _5(){return zx||(zx=eie(Nie,Vie,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(b0)}catch(n){console.warn(n)}}}}).catch(e=>{throw wd.create("idb-open",{originalErrorMessage:e.message})})),zx}async function Lie(e){try{const n=(await _5()).transaction(b0),a=await n.objectStore(b0).get(w5(e));return await n.done,a}catch(t){if(t instanceof Uu)wc.warn(t.message);else{const n=wd.create("idb-get",{originalErrorMessage:t?.message});wc.warn(n.message)}}}async function f3(e,t){try{const a=(await _5()).transaction(b0,"readwrite");await a.objectStore(b0).put(t,w5(e)),await a.done}catch(n){if(n instanceof Uu)wc.warn(n.message);else{const a=wd.create("idb-set",{originalErrorMessage:n?.message});wc.warn(a.message)}}}function w5(e){return`${e.name}!${e.options.appId}`}const Mie=1024,Oie=30;class Hie{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Qie(n),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var t,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=m3();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>Oie){const o=Gie(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){wc.warn(a)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=m3(),{heartbeatsToSend:a,unsentEntries:r}=$ie(this._heartbeatsCache.heartbeats),s=l5(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return wc.warn(n),""}}}function m3(){return new Date().toISOString().substring(0,10)}function $ie(e,t=Mie){const n=[];let a=e.slice();for(const r of e){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),h3(n)>t){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),h3(n)>t){n.pop();break}a=a.slice(1)}return{heartbeatsToSend:n,unsentEntries:a}}class Qie{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return f5()?Eoe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Lie(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return f3(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return f3(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function h3(e){return l5(JSON.stringify({version:2,heartbeats:e})).length}function Gie(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let a=1;a<e.length;a++)e[a].date<n&&(n=e[a].date,t=a);return t}function zie(e){Eu(new Vl("platform-logger",t=>new aie(t),"PRIVATE")),Eu(new Vl("heartbeat",t=>new Hie(t),"PRIVATE")),xi(jS,d3,e),xi(jS,d3,"esm2017"),xi("fire-js","")}zie("");var Kie="firebase",Wie="11.10.0";xi(Kie,Wie,"app");function Rk(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n}function b5(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jie=b5,x5=new jh("auth","Firebase",b5());const U_=new ug("@firebase/auth");function qie(e,...t){U_.logLevel<=Ma.WARN&&U_.warn(`Auth (${jd}): ${e}`,...t)}function Gy(e,...t){U_.logLevel<=Ma.ERROR&&U_.error(`Auth (${jd}): ${e}`,...t)}function bc(e,...t){throw Nk(e,...t)}function wu(e,...t){return Nk(e,...t)}function C5(e,t,n){const a=Object.assign(Object.assign({},jie()),{[t]:n});return new jh("auth","Firebase",a).create(t,{appName:e.name})}function jA(e){return C5(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Nk(e,...t){if(typeof e!="string"){const n=t[0],a=[...t.slice(1)];return a[0]&&(a[0].appName=e.name),e._errorFactory.create(n,...a)}return x5.create(e,...t)}function $n(e,t,...n){if(!e)throw Nk(t,...n)}function lc(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Gy(t),new Error(t)}function xc(e,t){e||lc(t)}function XS(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function Yie(){return v3()==="http:"||v3()==="https:"}function v3(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}function Xie(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Yie()||xoe()||"connection"in navigator)?navigator.onLine:!0}function Jie(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}class cg{constructor(t,n){this.shortDelay=t,this.longDelay=n,xc(n>t,"Short delay should be less than long delay!"),this.isMobile=Dk()||A5()}get(){return Xie()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Vk(e,t){xc(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class S5{static initialize(t,n,a){this.fetchImpl=t,n&&(this.headersImpl=n),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;lc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;lc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;lc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Zie={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const ele=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tle=new cg(3e4,6e4);function Lk(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Yh(e,t,n,a,r={}){return E5(e,r,async()=>{let s={},o={};a&&(t==="GET"?o=a:s={body:JSON.stringify(a)});const i=qh(Object.assign({key:e.config.apiKey},o)).slice(1),c=await e._getAdditionalHeaders();c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode);const A=Object.assign({method:t,headers:c},s);return boe()||(A.referrerPolicy="no-referrer"),e.emulatorConfig&&mw(e.emulatorConfig.host)&&(A.credentials="include"),S5.fetch()(await B5(e,e.config.apiHost,n,i),A)})}async function E5(e,t,n){e._canInitEmulator=!1;const a=Object.assign(Object.assign({},Zie),t);try{const r=new ale(e),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw G1(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const i=s.ok?o.errorMessage:o.error.message,[c,A]=i.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw G1(e,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw G1(e,"email-already-in-use",o);if(c==="USER_DISABLED")throw G1(e,"user-disabled",o);const d=a[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(A)throw C5(e,d,A);bc(e,d)}}catch(r){if(r instanceof Uu)throw r;bc(e,"network-request-failed",{message:String(r)})}}async function nle(e,t,n,a,r={}){const s=await Yh(e,t,n,a,r);return"mfaPendingCredential"in s&&bc(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function B5(e,t,n,a){const r=`${t}${n}?${a}`,s=e,o=s.config.emulator?Vk(e.config,r):`${e.config.apiScheme}://${r}`;return ele.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}class ale{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,a)=>{this.timer=setTimeout(()=>a(wu(this.auth,"network-request-failed")),tle.get())})}}function G1(e,t,n){const a={appName:e.name};n.email&&(a.email=n.email),n.phoneNumber&&(a.phoneNumber=n.phoneNumber);const r=wu(e,t,a);return r.customData._tokenResponse=n,r}async function rle(e,t){return Yh(e,"POST","/v1/accounts:delete",t)}async function R_(e,t){return Yh(e,"POST","/v1/accounts:lookup",t)}function Lp(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function sle(e,t=!1){const n=Ru(e),a=await n.getIdToken(t),r=Mk(a);$n(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:a,authTime:Lp(Kx(r.auth_time)),issuedAtTime:Lp(Kx(r.iat)),expirationTime:Lp(Kx(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function Kx(e){return Number(e)*1e3}function Mk(e){const[t,n,a]=e.split(".");if(t===void 0||n===void 0||a===void 0)return Gy("JWT malformed, contained fewer than 3 sections"),null;try{const r=F_(n);return r?JSON.parse(r):(Gy("Failed to decode base64 JWT payload"),null)}catch(r){return Gy("Caught error parsing JWT payload as JSON",r?.toString()),null}}function p3(e){const t=Mk(e);return $n(t,"internal-error"),$n(typeof t.exp<"u","internal-error"),$n(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function x0(e,t,n=!1){if(n)return t;try{return await t}catch(a){throw a instanceof Uu&&ole(a)&&e.auth.currentUser===e&&await e.auth.signOut(),a}}function ole({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}class ile{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const a=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),a}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class JS{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lp(this.lastLoginAt),this.creationTime=Lp(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function N_(e){var t;const n=e.auth,a=await e.getIdToken(),r=await x0(e,R_(n,{idToken:a}));$n(r?.users.length,n,"internal-error");const s=r.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?k5(s.providerUserInfo):[],i=ule(e.providerData,o),c=e.isAnonymous,A=!(e.email&&s.passwordHash)&&!i?.length,d=c?A:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new JS(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}async function lle(e){const t=Ru(e);await N_(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function ule(e,t){return[...e.filter(a=>!t.some(r=>r.providerId===a.providerId)),...t]}function k5(e){return e.map(t=>{var{providerId:n}=t,a=Rk(t,["providerId"]);return{providerId:n,uid:a.rawId||"",displayName:a.displayName||null,email:a.email||null,phoneNumber:a.phoneNumber||null,photoURL:a.photoUrl||null}})}async function cle(e,t){const n=await E5(e,{},async()=>{const a=qh({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,o=await B5(e,r,"/v1/token",`key=${s}`),i=await e._getAdditionalHeaders();i["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:i,body:a};return e.emulatorConfig&&mw(e.emulatorConfig.host)&&(c.credentials="include"),S5.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function dle(e,t){return Yh(e,"POST","/v2/accounts:revokeToken",Lk(e,t))}class ah{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){$n(t.idToken,"internal-error"),$n(typeof t.idToken<"u","internal-error"),$n(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):p3(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){$n(t.length!==0,"internal-error");const n=p3(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:($n(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:a,refreshToken:r,expiresIn:s}=await cle(t,n);this.updateTokensAndExpiration(a,r,Number(s))}updateTokensAndExpiration(t,n,a){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(t,n){const{refreshToken:a,accessToken:r,expirationTime:s}=n,o=new ah;return a&&($n(typeof a=="string","internal-error",{appName:t}),o.refreshToken=a),r&&($n(typeof r=="string","internal-error",{appName:t}),o.accessToken=r),s&&($n(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new ah,this.toJSON())}_performRefresh(){return lc("not implemented")}}function qc(e,t){$n(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class wl{constructor(t){var{uid:n,auth:a,stsTokenManager:r}=t,s=Rk(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ile(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=a,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new JS(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await x0(this,this.stsTokenManager.getToken(this.auth,t));return $n(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return sle(this,t)}reload(){return lle(this)}_assign(t){this!==t&&($n(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new wl(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){$n(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let a=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),a=!0),n&&await N_(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qi(this.auth.app))return Promise.reject(jA(this.auth));const t=await this.getIdToken();return await x0(this,rle(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var a,r,s,o,i,c,A,d;const f=(a=n.displayName)!==null&&a!==void 0?a:void 0,m=(r=n.email)!==null&&r!==void 0?r:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,v=(o=n.photoURL)!==null&&o!==void 0?o:void 0,y=(i=n.tenantId)!==null&&i!==void 0?i:void 0,g=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,w=(A=n.createdAt)!==null&&A!==void 0?A:void 0,b=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:x,emailVerified:T,isAnonymous:U,providerData:k,stsTokenManager:S}=n;$n(x&&S,t,"internal-error");const E=ah.fromJSON(this.name,S);$n(typeof x=="string",t,"internal-error"),qc(f,t.name),qc(m,t.name),$n(typeof T=="boolean",t,"internal-error"),$n(typeof U=="boolean",t,"internal-error"),qc(h,t.name),qc(v,t.name),qc(y,t.name),qc(g,t.name),qc(w,t.name),qc(b,t.name);const C=new wl({uid:x,auth:t,email:m,emailVerified:T,displayName:f,isAnonymous:U,photoURL:v,phoneNumber:h,tenantId:y,stsTokenManager:E,createdAt:w,lastLoginAt:b});return k&&Array.isArray(k)&&(C.providerData=k.map(P=>Object.assign({},P))),g&&(C._redirectEventId=g),C}static async _fromIdTokenResponse(t,n,a=!1){const r=new ah;r.updateFromServerResponse(n);const s=new wl({uid:n.localId,auth:t,stsTokenManager:r,isAnonymous:a});return await N_(s),s}static async _fromGetAccountInfoResponse(t,n,a){const r=n.users[0];$n(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?k5(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,i=new ah;i.updateFromIdToken(a);const c=new wl({uid:r.localId,auth:t,stsTokenManager:i,isAnonymous:o}),A={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new JS(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(c,A),c}}const g3=new Map;function uc(e){xc(e instanceof Function,"Expected a class definition");let t=g3.get(e);return t?(xc(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,g3.set(e,t),t)}class T5{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}T5.type="NONE";const y3=T5;function zy(e,t,n){return`firebase:${e}:${t}:${n}`}class rh{constructor(t,n,a){this.persistence=t,this.auth=n,this.userKey=a;const{config:r,name:s}=this.auth;this.fullUserKey=zy(this.userKey,r.apiKey,s),this.fullPersistenceKey=zy("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await R_(this.auth,{idToken:t}).catch(()=>{});return n?wl._fromGetAccountInfoResponse(this.auth,n,t):null}return wl._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,a="authUser"){if(!n.length)return new rh(uc(y3),t,a);const r=(await Promise.all(n.map(async A=>{if(await A._isAvailable())return A}))).filter(A=>A);let s=r[0]||uc(y3);const o=zy(a,t.config.apiKey,t.name);let i=null;for(const A of n)try{const d=await A._get(o);if(d){let f;if(typeof d=="string"){const m=await R_(t,{idToken:d}).catch(()=>{});if(!m)break;f=await wl._fromGetAccountInfoResponse(t,m,d)}else f=wl._fromJSON(t,d);A!==s&&(i=f),s=A;break}}catch{}const c=r.filter(A=>A._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new rh(s,t,a):(s=c[0],i&&await s._set(o,i.toJSON()),await Promise.all(n.map(async A=>{if(A!==s)try{await A._remove(o)}catch{}})),new rh(s,t,a))}}function _3(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(D5(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(I5(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(R5(t))return"Blackberry";if(N5(t))return"Webos";if(F5(t))return"Safari";if((t.includes("chrome/")||P5(t))&&!t.includes("edge/"))return"Chrome";if(U5(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=e.match(n);if(a?.length===2)return a[1]}return"Other"}function I5(e=Mo()){return/firefox\//i.test(e)}function F5(e=Mo()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function P5(e=Mo()){return/crios\//i.test(e)}function D5(e=Mo()){return/iemobile/i.test(e)}function U5(e=Mo()){return/android/i.test(e)}function R5(e=Mo()){return/blackberry/i.test(e)}function N5(e=Mo()){return/webos/i.test(e)}function Ok(e=Mo()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Ale(e=Mo()){var t;return Ok(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function fle(){return Coe()&&document.documentMode===10}function V5(e=Mo()){return Ok(e)||U5(e)||N5(e)||R5(e)||/windows phone/i.test(e)||D5(e)}function L5(e,t=[]){let n;switch(e){case"Browser":n=_3(Mo());break;case"Worker":n=`${_3(Mo())}-${e}`;break;default:n=e}const a=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${jd}/${a}`}class mle{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const a=s=>new Promise((o,i)=>{try{const c=t(s);o(c)}catch(c){i(c)}});a.onAbort=n,this.queue.push(a);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const a of this.queue)await a(t),a.onAbort&&n.push(a.onAbort)}catch(a){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a?.message})}}}async function hle(e,t={}){return Yh(e,"GET","/v2/passwordPolicy",Lk(e,t))}const vle=6;class ple{constructor(t){var n,a,r,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:vle,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(a=t.allowedNonAlphanumericCharacters)===null||a===void 0?void 0:a.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,a,r,s,o,i;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,c),this.validatePasswordCharacterOptions(t,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(a=c.meetsMaxPasswordLength)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(i=c.containsNonAlphanumericCharacter)!==null&&i!==void 0?i:!0),c}validatePasswordLengthOptions(t,n){const a=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;a&&(n.meetsMinPasswordLength=t.length>=a),r&&(n.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let a;for(let r=0;r<t.length;r++)a=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(t,n,a,r,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}class gle{constructor(t,n,a,r){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=a,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new w3(this),this.idTokenSubscription=new w3(this),this.beforeStateQueue=new mle(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=x5,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=uc(n)),this._initializationPromise=this.queue(async()=>{var a,r,s;if(!this._deleted&&(this.persistenceManager=await rh.create(this,t),(a=this._resolvePersistenceManagerAvailable)===null||a===void 0||a.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await R_(this,{idToken:t}),a=await wl._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(a)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(Qi(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(i=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(i,i))}):this.directlySetCurrentUser(null)}const a=await this.assertedPersistence.getCurrentUser();let r=a,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,i=r?._redirectEventId,c=await this.tryRedirectSignIn(t);(!o||o===i)&&c?.user&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=a,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return $n(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await N_(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Jie()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Qi(this.app))return Promise.reject(jA(this));const n=t?Ru(t):null;return n&&$n(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&$n(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Qi(this.app)?Promise.reject(jA(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Qi(this.app)?Promise.reject(jA(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(uc(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await hle(this),n=new ple(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new jh("auth","Firebase",t())}onAuthStateChanged(t,n,a){return this.registerStateListener(this.authStateSubscription,t,n,a)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,a){return this.registerStateListener(this.idTokenSubscription,t,n,a)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const a=this.onAuthStateChanged(()=>{a(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(a.tenantId=this.tenantId),await dle(this,a)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const a=await this.getOrInitRedirectPersistenceManager(n);return t===null?a.removeCurrentUser():a.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&uc(t)||this._popupRedirectResolver;$n(n,this,"argument-error"),this.redirectPersistenceManager=await rh.create(this,[uc(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,a;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((a=this.redirectUser)===null||a===void 0?void 0:a._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const a=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==a&&(this.lastNotifiedUid=a,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,a,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const i=this._isInitialized?Promise.resolve():this._initializationPromise;if($n(i,this,"internal-error"),i.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const c=t.addObserver(n,a,r);return()=>{o=!0,c()}}else{const c=t.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return $n(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=L5(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const a=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());a&&(n["X-Firebase-Client"]=a);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var t;if(Qi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n?.error&&qie(`Error while retrieving App Check token: ${n.error}`),n?.token}}function vw(e){return Ru(e)}class w3{constructor(t){this.auth=t,this.observer=null,this.addObserver=Doe(n=>this.observer=n)}get next(){return $n(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Hk={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yle(e){Hk=e}function _le(e){return Hk.loadJS(e)}function wle(){return Hk.gapiScript}function ble(e){return`__${e}${Math.floor(Math.random()*1e6)}`}function M5(e,t){const n=p5(e,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(Eh(s,t??{}))return r;bc(r,"already-initialized")}return n.initialize({options:t})}function xle(e,t){const n=t?.persistence||[],a=(Array.isArray(n)?n:[n]).map(uc);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(a,t?.popupRedirectResolver)}function Cle(e,t,n){const a=vw(e);$n(/^https?:\/\//.test(t),a,"invalid-emulator-scheme");const r=!1,s=O5(t),{host:o,port:i}=Sle(t),c=i===null?"":`:${i}`,A={url:`${s}//${o}${c}/`},d=Object.freeze({host:o,port:i,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!a._canInitEmulator){$n(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),$n(Eh(A,a.config.emulator)&&Eh(d,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=A,a.emulatorConfig=d,a.settings.appVerificationDisabledForTesting=!0,mw(o)?(goe(`${s}//${o}${c}`),woe("Auth",!0)):Ele()}function O5(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Sle(e){const t=O5(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const a=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(a);if(r){const s=r[1];return{host:s,port:b3(a.substr(s.length+1))}}else{const[s,o]=a.split(":");return{host:s,port:b3(o)}}}function b3(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function Ele(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}class H5{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return lc("not implemented")}_getIdTokenResponse(t){return lc("not implemented")}_linkToIdToken(t,n){return lc("not implemented")}_getReauthenticationResolver(t){return lc("not implemented")}}async function sh(e,t){return nle(e,"POST","/v1/accounts:signInWithIdp",Lk(e,t))}const Ble="http://localhost";class of extends H5{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new of(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):bc("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:a,signInMethod:r}=n,s=Rk(n,["providerId","signInMethod"]);if(!a||!r)return null;const o=new of(a,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return sh(t,n)}_linkToIdToken(t,n){const a=this.buildRequest();return a.idToken=n,sh(t,a)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,sh(t,n)}buildRequest(){const t={requestUri:Ble,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=qh(n)}return t}}class $5{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class dg extends $5{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class id extends dg{constructor(){super("facebook.com")}static credential(t){return of._fromParams({providerId:id.PROVIDER_ID,signInMethod:id.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return id.credentialFromTaggedObject(t)}static credentialFromError(t){return id.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return id.credential(t.oauthAccessToken)}catch{return null}}}id.FACEBOOK_SIGN_IN_METHOD="facebook.com";id.PROVIDER_ID="facebook.com";class hu extends dg{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return of._fromParams({providerId:hu.PROVIDER_ID,signInMethod:hu.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return hu.credentialFromTaggedObject(t)}static credentialFromError(t){return hu.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:a}=t;if(!n&&!a)return null;try{return hu.credential(n,a)}catch{return null}}}hu.GOOGLE_SIGN_IN_METHOD="google.com";hu.PROVIDER_ID="google.com";class ld extends dg{constructor(){super("github.com")}static credential(t){return of._fromParams({providerId:ld.PROVIDER_ID,signInMethod:ld.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ld.credentialFromTaggedObject(t)}static credentialFromError(t){return ld.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ld.credential(t.oauthAccessToken)}catch{return null}}}ld.GITHUB_SIGN_IN_METHOD="github.com";ld.PROVIDER_ID="github.com";class ud extends dg{constructor(){super("twitter.com")}static credential(t,n){return of._fromParams({providerId:ud.PROVIDER_ID,signInMethod:ud.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return ud.credentialFromTaggedObject(t)}static credentialFromError(t){return ud.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:a}=t;if(!n||!a)return null;try{return ud.credential(n,a)}catch{return null}}}ud.TWITTER_SIGN_IN_METHOD="twitter.com";ud.PROVIDER_ID="twitter.com";class Bh{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,a,r=!1){const s=await wl._fromIdTokenResponse(t,a,r),o=x3(a);return new Bh({user:s,providerId:o,_tokenResponse:a,operationType:n})}static async _forOperation(t,n,a){await t._updateTokensIfNecessary(a,!0);const r=x3(a);return new Bh({user:t,providerId:r,_tokenResponse:a,operationType:n})}}function x3(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class V_ extends Uu{constructor(t,n,a,r){var s;super(n.code,n.message),this.operationType=a,this.user=r,Object.setPrototypeOf(this,V_.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(t,n,a,r){return new V_(t,n,a,r)}}function Q5(e,t,n,a){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?V_._fromErrorAndOperation(e,s,t,a):s})}async function kle(e,t,n=!1){const a=await x0(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Bh._forOperation(e,"link",a)}async function Tle(e,t,n=!1){const{auth:a}=e;if(Qi(a.app))return Promise.reject(jA(a));const r="reauthenticate";try{const s=await x0(e,Q5(a,r,t,e),n);$n(s.idToken,a,"internal-error");const o=Mk(s.idToken);$n(o,a,"internal-error");const{sub:i}=o;return $n(e.uid===i,a,"user-mismatch"),Bh._forOperation(e,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&bc(a,"user-mismatch"),s}}async function G5(e,t,n=!1){if(Qi(e.app))return Promise.reject(jA(e));const a="signIn",r=await Q5(e,a,t),s=await Bh._fromIdTokenResponse(e,a,r);return n||await e._updateCurrentUser(s.user),s}async function Ile(e,t){return G5(vw(e),t)}function Fle(e,t){return Ru(e).setPersistence(t)}function z5(e,t,n,a){return Ru(e).onIdTokenChanged(t,n,a)}function Ple(e,t,n){return Ru(e).beforeAuthStateChanged(t,n)}function Dle(e,t,n,a){return Ru(e).onAuthStateChanged(t,n,a)}function Ule(e){return Ru(e).signOut()}const L_="__sak";class K5{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(L_,"1"),this.storage.removeItem(L_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const Rle=1e3,Nle=10;class W5 extends K5{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=V5(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const a=this.storage.getItem(n),r=this.localCache[n];a!==r&&t(n,r,a)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,i,c)=>{this.notifyListeners(o,c)});return}const a=t.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(a);!n&&this.localCache[a]===o||this.notifyListeners(a,o)},s=this.storage.getItem(a);fle()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,Nle):r()}notifyListeners(t,n){this.localCache[t]=n;const a=this.listeners[t];if(a)for(const r of Array.from(a))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:a}),!0)})},Rle)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}W5.type="LOCAL";const $k=W5;class j5 extends K5{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}j5.type="SESSION";const Qk=j5;function Vle(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}class pw{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(r=>r.isListeningto(t));if(n)return n;const a=new pw(t);return this.receivers.push(a),a}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:a,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:a,eventType:r});const i=Array.from(o).map(async A=>A(n.origin,s)),c=await Vle(i);n.ports[0].postMessage({status:"done",eventId:a,eventType:r,response:c})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pw.receivers=[];function Gk(e="",t=10){let n="";for(let a=0;a<t;a++)n+=Math.floor(Math.random()*10);return e+n}class Lle{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,a=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((i,c)=>{const A=Gk("",20);r.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},a);o={messageChannel:r,onMessage(f){const m=f;if(m.data.eventId===A)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),i(m.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:A,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function bu(){return window}function Mle(e){bu().location.href=e}function q5(){return typeof bu().WorkerGlobalScope<"u"&&typeof bu().importScripts=="function"}async function Ole(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Hle(){var e;return((e=navigator?.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function $le(){return q5()?self:null}const Y5="firebaseLocalStorageDb",Qle=1,M_="firebaseLocalStorage",X5="fbase_key";class Ag{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function gw(e,t){return e.transaction([M_],t?"readwrite":"readonly").objectStore(M_)}function Gle(){const e=indexedDB.deleteDatabase(Y5);return new Ag(e).toPromise()}function ZS(){const e=indexedDB.open(Y5,Qle);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const a=e.result;try{a.createObjectStore(M_,{keyPath:X5})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const a=e.result;a.objectStoreNames.contains(M_)?t(a):(a.close(),await Gle(),t(await ZS()))})})}async function C3(e,t,n){const a=gw(e,!0).put({[X5]:t,value:n});return new Ag(a).toPromise()}async function zle(e,t){const n=gw(e,!1).get(t),a=await new Ag(n).toPromise();return a===void 0?null:a.value}function S3(e,t){const n=gw(e,!0).delete(t);return new Ag(n).toPromise()}const Kle=800,Wle=3;class J5{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ZS(),this.db)}async _withRetries(t){let n=0;for(;;)try{const a=await this._openDb();return await t(a)}catch(a){if(n++>Wle)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return q5()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pw._getInstance($le()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await Ole(),!this.activeServiceWorker)return;this.sender=new Lle(this.activeServiceWorker);const a=await this.sender._send("ping",{},800);a&&!((t=a[0])===null||t===void 0)&&t.fulfilled&&!((n=a[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Hle()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await ZS();return await C3(t,L_,"1"),await S3(t,L_),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(a=>C3(a,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(a=>zle(a,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>S3(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const s=gw(r,!1).getAll();return new Ag(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],a=new Set;if(t.length!==0)for(const{fbase_key:r,value:s}of t)a.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!a.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(t,n){this.localCache[t]=n;const a=this.listeners[t];if(a)for(const r of Array.from(a))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Kle)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}J5.type="LOCAL";const Z5=J5;new cg(3e4,6e4);function jle(e,t){return t?uc(t):($n(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}class zk extends H5{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return sh(t,this._buildIdpRequest())}_linkToIdToken(t,n){return sh(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return sh(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function qle(e){return G5(e.auth,new zk(e),e.bypassAuthState)}function Yle(e){const{auth:t,user:n}=e;return $n(n,t,"internal-error"),Tle(n,new zk(e),e.bypassAuthState)}async function Xle(e){const{auth:t,user:n}=e;return $n(n,t,"internal-error"),kle(n,new zk(e),e.bypassAuthState)}class eM{constructor(t,n,a,r,s=!1){this.auth=t,this.resolver=a,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:a,postBody:r,tenantId:s,error:o,type:i}=t;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:a,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(i)(c))}catch(A){this.reject(A)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return qle;case"linkViaPopup":case"linkViaRedirect":return Xle;case"reauthViaPopup":case"reauthViaRedirect":return Yle;default:bc(this.auth,"internal-error")}}resolve(t){xc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){xc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Jle=new cg(2e3,1e4);class Mm extends eM{constructor(t,n,a,r,s){super(t,n,r,s),this.provider=a,this.authWindow=null,this.pollId=null,Mm.currentPopupAction&&Mm.currentPopupAction.cancel(),Mm.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return $n(t,this.auth,"internal-error"),t}async onExecution(){xc(this.filter.length===1,"Popup operations only handle one event");const t=Gk();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(wu(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(wu(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Mm.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,a;if(!((a=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||a===void 0)&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(wu(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Jle.get())};t()}}Mm.currentPopupAction=null;const Zle="pendingRedirect",Ky=new Map;class eue extends eM{constructor(t,n,a=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,a),this.eventId=null}async execute(){let t=Ky.get(this.auth._key());if(!t){try{const a=await tue(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(a)}catch(n){t=()=>Promise.reject(n)}Ky.set(this.auth._key(),t)}return this.bypassAuthState||Ky.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function tue(e,t){const n=rue(t),a=aue(e);if(!await a._isAvailable())return!1;const r=await a._get(n)==="true";return await a._remove(n),r}function nue(e,t){Ky.set(e._key(),t)}function aue(e){return uc(e._redirectPersistence)}function rue(e){return zy(Zle,e.config.apiKey,e.name)}async function sue(e,t,n=!1){if(Qi(e.app))return Promise.reject(jA(e));const a=vw(e),r=jle(a,t),o=await new eue(a,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await a._persistUserIfCurrent(o.user),await a._setRedirectUser(null,t)),o}const oue=600*1e3;class iue{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(t,a)&&(n=!0,this.sendToConsumer(t,a),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!lue(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var a;if(t.error&&!tM(t)){const r=((a=t.error.code)===null||a===void 0?void 0:a.split("auth/")[1])||"internal-error";n.onError(wu(this.auth,r))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const a=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&a}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=oue&&this.cachedEventUids.clear(),this.cachedEventUids.has(E3(t))}saveEventToCache(t){this.cachedEventUids.add(E3(t)),this.lastProcessedEventTime=Date.now()}}function E3(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function tM({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function lue(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tM(e);default:return!1}}async function uue(e,t={}){return Yh(e,"GET","/v1/projects",t)}const cue=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,due=/^https?/;async function Aue(e){if(e.config.emulator)return;const{authorizedDomains:t}=await uue(e);for(const n of t)try{if(fue(n))return}catch{}bc(e,"unauthorized-domain")}function fue(e){const t=XS(),{protocol:n,hostname:a}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&a===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===a}if(!due.test(n))return!1;if(cue.test(e))return a===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(a)}const mue=new cg(3e4,6e4);function B3(){const e=bu().___jsl;if(e?.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function hue(e){return new Promise((t,n)=>{var a,r,s;function o(){B3(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{B3(),n(wu(e,"network-request-failed"))},timeout:mue.get()})}if(!((r=(a=bu().gapi)===null||a===void 0?void 0:a.iframes)===null||r===void 0)&&r.Iframe)t(gapi.iframes.getContext());else if(!((s=bu().gapi)===null||s===void 0)&&s.load)o();else{const i=ble("iframefcb");return bu()[i]=()=>{gapi.load?o():n(wu(e,"network-request-failed"))},_le(`${wle()}?onload=${i}`).catch(c=>n(c))}}).catch(t=>{throw Wy=null,t})}let Wy=null;function vue(e){return Wy=Wy||hue(e),Wy}const pue=new cg(5e3,15e3),gue="__/auth/iframe",yue="emulator/auth/iframe",_ue={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wue=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bue(e){const t=e.config;$n(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Vk(t,yue):`https://${e.config.authDomain}/${gue}`,a={apiKey:t.apiKey,appName:e.name,v:jd},r=wue.get(e.config.apiHost);r&&(a.eid=r);const s=e._getFrameworks();return s.length&&(a.fw=s.join(",")),`${n}?${qh(a).slice(1)}`}async function xue(e){const t=await vue(e),n=bu().gapi;return $n(n,e,"internal-error"),t.open({where:document.body,url:bue(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_ue,dontclear:!0},a=>new Promise(async(r,s)=>{await a.restyle({setHideOnLeave:!1});const o=wu(e,"network-request-failed"),i=bu().setTimeout(()=>{s(o)},pue.get());function c(){bu().clearTimeout(i),r(a)}a.ping(c).then(c,()=>{s(o)})}))}const Cue={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Sue=500,Eue=600,Bue="_blank",kue="http://localhost";class k3{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Tue(e,t,n,a=Sue,r=Eue){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-a)/2,0).toString();let i="";const c=Object.assign(Object.assign({},Cue),{width:a.toString(),height:r.toString(),top:s,left:o}),A=Mo().toLowerCase();n&&(i=P5(A)?Bue:n),I5(A)&&(t=t||kue,c.scrollbars="yes");const d=Object.entries(c).reduce((m,[h,v])=>`${m}${h}=${v},`,"");if(Ale(A)&&i!=="_self")return Iue(t||"",i),new k3(null);const f=window.open(t||"",i,d);$n(f,e,"popup-blocked");try{f.focus()}catch{}return new k3(f)}function Iue(e,t){const n=document.createElement("a");n.href=e,n.target=t;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(a)}const Fue="__/auth/handler",Pue="emulator/auth/handler",Due=encodeURIComponent("fac");async function T3(e,t,n,a,r,s){$n(e.config.authDomain,e,"auth-domain-config-required"),$n(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:a,v:jd,eventId:r};if(t instanceof $5){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",zS(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,f]of Object.entries({}))o[d]=f}if(t instanceof dg){const d=t.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);const i=o;for(const d of Object.keys(i))i[d]===void 0&&delete i[d];const c=await e._getAppCheckToken(),A=c?`#${Due}=${encodeURIComponent(c)}`:"";return`${Uue(e)}?${qh(i).slice(1)}${A}`}function Uue({config:e}){return e.emulator?Vk(e,Pue):`https://${e.authDomain}/${Fue}`}const Wx="webStorageSupport";class Rue{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qk,this._completeRedirectFn=sue,this._overrideRedirectResult=nue}async _openPopup(t,n,a,r){var s;xc((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await T3(t,n,a,XS(),r);return Tue(t,o,Gk())}async _openRedirect(t,n,a,r){await this._originValidation(t);const s=await T3(t,n,a,XS(),r);return Mle(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(xc(s,"If manager is not set, promise should be"),s)}const a=this.initAndGetManager(t);return this.eventManagers[n]={promise:a},a.catch(()=>{delete this.eventManagers[n]}),a}async initAndGetManager(t){const n=await xue(t),a=new iue(t);return n.register("authEvent",r=>($n(r?.authEvent,t,"invalid-auth-event"),{status:a.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:a},this.iframes[t._key()]=n,a}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Wx,{type:Wx},r=>{var s;const o=(s=r?.[0])===null||s===void 0?void 0:s[Wx];o!==void 0&&n(!!o),bc(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Aue(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return V5()||F5()||Ok()}}const nM=Rue;var I3="@firebase/auth",F3="1.10.8";class Nue{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(a=>{t(a?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){$n(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Vue(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Lue(e){Eu(new Vl("auth",(t,{options:n})=>{const a=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:i}=a.options;$n(o&&!o.includes(":"),"invalid-api-key",{appName:a.name});const c={apiKey:o,authDomain:i,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:L5(e)},A=new gle(a,r,s,c);return xle(A,n),A},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,a)=>{t.getProvider("auth-internal").initialize()})),Eu(new Vl("auth-internal",t=>{const n=vw(t.getProvider("auth").getImmediate());return(a=>new Nue(a))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),xi(I3,F3,Vue(e)),xi(I3,F3,"esm2017")}const Mue=300,Oue=d5("authIdTokenMaxAge")||Mue;let P3=null;const Hue=e=>async t=>{const n=t&&await t.getIdTokenResult(),a=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(a&&a>Oue)return;const r=n?.token;P3!==r&&(P3=r,await fetch(e,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function $ue(e=y5()){const t=p5(e,"auth");if(t.isInitialized())return t.getImmediate();const n=M5(e,{popupRedirectResolver:nM,persistence:[Z5,$k,Qk]}),a=d5("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(a,location.origin);if(location.origin===s.origin){const o=Hue(s.toString());Ple(n,o,()=>o(n.currentUser)),z5(n,i=>o(i))}}const r=poe("auth");return r&&Cle(n,`http://${r}`),n}function Que(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}yle({loadJS(e){return new Promise((t,n)=>{const a=document.createElement("script");a.setAttribute("src",e),a.onload=t,a.onerror=r=>{const s=wu("internal-error");s.customData=r,n(s)},a.type="text/javascript",a.charset="UTF-8",Que().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Lue("Browser");const Gue={apiKey:"AIzaSyB8g1LkpQ-pkRyoMT02e7Y-AkSgBt21tVI",authDomain:"origami-clinic.firebaseapp.com",projectId:"origami-clinic",storageBucket:"origami-clinic.firebasestorage.app",messagingSenderId:"1062163572761",appId:"1:1062163572761:web:c3c03832110d86365b2288",measurementId:"G-HSMXCJSMKS"};console.log("Initializing Firebase for Electron...");let jy,Os,z1,jx=!1;try{jy=g5(Gue),console.log("Firebase app initialized successfully"),Os=$ue(jy),console.log("Firebase auth initialized successfully"),jx=()=>typeof window<"u"&&window.process&&window.process.type==="renderer",console.log("Running in Electron:",jx()),z1=new hu,z1.setCustomParameters({prompt:"select_account",include_granted_scopes:"true",access_type:"online"}),z1.addScope("email"),z1.addScope("profile"),console.log("Firebase initialized:",{app:!!jy,auth:!!Os,isElectron:jx()}),(async()=>{try{await Fle(Os,$k),console.log("Firebase auth persistence set to LOCAL"),Os.onAuthStateChanged(t=>{console.log("Auth state changed in firebase.js:",!!t)})}catch(t){console.error("Error setting Firebase auth persistence:",t)}})()}catch(e){throw console.error("Failed to initialize Firebase:",e),e}function zue(){const e=new Uint8Array(16);return crypto.getRandomValues(e),Array.from(e,t=>t.toString(16).padStart(2,"0")).join("")}function Kue(e){const{clientId:t,redirectUri:n,scope:a="email profile openid",responseType:r="token id_token",prompt:s="select_account",nonce:o}=e;return`https://accounts.google.com/o/oauth2/v2/auth?${new URLSearchParams({client_id:t,redirect_uri:n,scope:a,response_type:r,include_granted_scopes:"true",prompt:s,nonce:o}).toString()}`}function Wue(){return Os.app.options}function jue(){return"1062163572761-ic92tedsm74d5pqrujo13c84u0u1g6ao.apps.googleusercontent.com"}function que(){return"https://login.evamed.in/auth-callback.html"}function Yue(e){try{const t=e.split(".");if(t.length!==3)throw new Error("Invalid JWT format");const n=t[1],a=atob(n.replace(/-/g,"+").replace(/_/g,"/"));return JSON.parse(a)}catch(t){return console.error("Error decoding JWT:",t),null}}const Xue={namespaced:!0,state:{user:null,loading:!1,error:null,isFirstTimeSignIn:!1,redirectInProgress:!1},mutations:{SET_USER(e,t){if(e.user=t,t){const n=t.metadata;e.isFirstTimeSignIn=n.creationTime===n.lastSignInTime}else e.isFirstTimeSignIn=!1},SET_LOADING(e,t){e.loading=t},SET_ERROR(e,t){e.error=t},SET_REDIRECT_IN_PROGRESS(e,t){e.redirectInProgress=t}},actions:{async signInWithGoogle({commit:e}){try{if(e("SET_LOADING",!0),e("SET_ERROR",null),e("SET_REDIRECT_IN_PROGRESS",!0),console.log("Starting Google sign in with dynamic OAuth URL..."),window.process&&window.process.type==="renderer"){console.log("Running in Electron environment");const{ipcRenderer:n}=window.require("electron");n.removeAllListeners("auth-redirect");const a=zue(),r={clientId:jue(),redirectUri:que(),scope:"email profile openid",responseType:"token id_token",prompt:"select_account",nonce:a},s=Kue(r);console.log("Firebase config:",Wue()),console.log("Using client ID:",r.clientId),console.log("Using redirect URI:",r.redirectUri),console.log("Generated nonce:",a),console.log("Generated OAuth URL:",s);const{shell:o}=window.require("electron");return await o.openExternal(s),console.log("Opened authentication URL in default browser"),console.log("Waiting for OAuth callback via custom protocol..."),new Promise((i,c)=>{const A=setTimeout(()=>{n.removeAllListeners("auth-redirect"),e("SET_REDIRECT_IN_PROGRESS",!1),e("SET_LOADING",!1),c(new Error("Authentication timeout"))},12e4);n.once("auth-redirect",async(d,f)=>{console.log("Received auth redirect in renderer:",f),clearTimeout(A),n.removeAllListeners("auth-redirect");try{const m=new URL(f),h=new URLSearchParams(m.search),v=h.get("access_token"),y=h.get("id_token"),g=h.get("error");if(g)throw new Error(`OAuth error: ${g}`);if(v&&y){const w=Yue(y);w&&(console.log("ID Token payload:",w),w.nonce&&w.nonce!==a&&console.warn("Nonce mismatch in ID token"));const b=hu.credential(y,v),x=await Ile(Os,b);console.log("Authentication successful:",x.user),e("SET_USER",x.user),e("SET_REDIRECT_IN_PROGRESS",!1);const T=x.user.metadata.creationTime===x.user.metadata.lastSignInTime;i(T)}else throw new Error("No valid authentication tokens received")}catch(m){console.error("Error processing auth redirect:",m),e("SET_ERROR","Authentication failed. Please close the app, check your internet connection and retry."),e("SET_REDIRECT_IN_PROGRESS",!1),c(m)}})})}else throw new Error("Browser-based authentication not implemented for web environment")}catch(t){throw console.error("Sign in error:",t),e("SET_REDIRECT_IN_PROGRESS",!1),t.code==="auth/network-request-failed"?e("SET_ERROR","Authentication failed. Please close the app, check your internet connection and retry."):e("SET_ERROR",t.message||"Authentication failed. Please close the app, check your internet connection and retry."),t}finally{e("SET_LOADING",!1)}},async signOut({commit:e}){try{e("SET_LOADING",!0),e("SET_ERROR",null),await Ule(Os),e("SET_USER",null),e("SET_REDIRECT_IN_PROGRESS",!1)}catch(t){throw e("SET_ERROR",t.message),t}finally{e("SET_LOADING",!1)}},initAuthState({commit:e}){return new Promise(t=>Dle(Os,a=>{console.log("Auth state changed:",a),e("SET_USER",a),a&&this.state.auth.redirectInProgress&&e("SET_REDIRECT_IN_PROGRESS",!1),t(a)},a=>{console.error("Auth state change error:",a),e("SET_ERROR",a.message),e("SET_REDIRECT_IN_PROGRESS",!1),t(null)}))}},getters:{isAuthenticated:e=>!!e.user,currentUser:e=>e.user,isLoading:e=>e.loading,error:e=>e.error,isFirstTimeSignIn:e=>e.isFirstTimeSignIn,redirectInProgress:e=>e.redirectInProgress}},eE=async()=>{try{return{data:(await dt.get("/doctor/")).data.data.doctors,error:null}}catch(e){return console.error("There was an error fetching the doctors:",e?.response||e),{data:[],error:e}}},Jue=async e=>{try{return await dt.post(`/print/${e.doctorId}`,e),{error:null}}catch(t){return console.error("There was an error creating print config:",t),{error:t}}},Zue=async e=>{try{const a=(await dt.post("/doctor/",e)).data.data.id;console.log("Doctor created successfully, ID:",a);const r={doctorId:a,doctorName:e.doctorName||"",doctorDegrees:e.doctorDegrees||"",doctorRegistrationNumber:e.doctorRegistrationNumber||"",email:"",clinicAddress:"-",contactNumber:"",useHeader:!0,pageSize:"A4"},s=await Jue(r);return s.error?console.warn("Doctor created successfully but print config creation failed:",s.error):console.log("Print configuration created successfully for doctor ID:",a),{error:null}}catch(t){return console.error("There was an error adding the doctor:",t),{error:t}}},ece=async e=>{try{return await dt.put(`/doctor/${e.id}`,e),{error:null}}catch(t){return console.error("There was an error editing the doctor:",t),{error:t}}},tce={namespaced:!0,state:()=>({doctors:[],doctorId:1,initialized:!1}),getters:{allDoctors:e=>e.doctors,currentDoctorId:e=>e.doctorId,currentDoctor:e=>e.doctors.find(t=>t.id===e.doctorId),isInitialized:e=>e.initialized,isProcedurePrimary:e=>e.doctors.find(n=>n.id===e.doctorId)?.procedurePrimary||!1,isGSTRegistered:e=>e.doctors.find(n=>n.id===e.doctorId)?.isGST||!1,gstIdentifier:e=>e.doctors.find(n=>n.id===e.doctorId)?.gstIdentifier||"",isPharmacyEnabled:e=>e.doctors.find(n=>n.id===e.doctorId)?.isPharmacy||!1},mutations:{setDoctors(e,t){e.doctors=t},setDoctorId(e,t){e.doctorId=t},setInitialized(e,t){e.initialized=t}},actions:{async fetchDoctors({commit:e}){const t=await eE();return e("setDoctors",t.data),t},async initializeDoctors({dispatch:e,commit:t,state:n}){if(!n.initialized)try{const a=await e("fetchDoctors");if(a.error){console.warn("Failed to fetch doctors due to API error:",a.error),t("setDoctorId",1),t("setInitialized",!0);return}a.data&&a.data.length>0?(console.log(`Found ${a.data.length} doctors, setting first as active`),t("setDoctorId",a.data[0].id)):(console.warn("No doctors found - using fallback ID 1"),t("setDoctorId",1)),t("setInitialized",!0)}catch(a){console.error("Error initializing doctors:",a),t("setDoctorId",1),t("setInitialized",!0)}}}},aM=async()=>{try{return{data:(await dt.get("/clinic/")).data.data.clinics,error:null}}catch(e){return console.error("There was an error fetching the doctors:",e?.response||e),{data:[],error:e}}},nce=async e=>{try{return await dt.post("/clinic/",e),{error:null}}catch(t){return console.error("There was an error adding the clinic:",t),{error:t}}},ace=async e=>{try{return await dt.put(`/clinic/${e.id}`,e),{error:null}}catch(t){return console.error("There was an error editing the doctor:",t),{error:t}}},rce={namespaced:!0,state:()=>({clinics:[],clinicId:1,initialized:!1}),getters:{allClinics:e=>e.clinics,currentClinicId:e=>e.clinicId,currentClinic:e=>e.clinics.find(t=>t.id===e.clinicId),isInitialized:e=>e.initialized},mutations:{setClinics(e,t){e.clinics=t},setClinicId(e,t){e.clinicId=t},setInitialized(e,t){e.initialized=t}},actions:{async fetchClinics({commit:e}){const t=await aM();return e("setClinics",t.data),t},async initializeClinics({dispatch:e,commit:t,state:n}){if(!n.initialized)try{const a=await e("fetchClinics");if(a.error){console.warn("Failed to fetch clinics due to API error:",a.error),t("setClinicId",1),t("setInitialized",!0);return}a.data&&a.data.length>0?(console.log(`Found ${a.data.length} clinics, setting first as active`),t("setClinicId",a.data[0].id)):(console.warn("No clinics found - using fallback ID 1"),t("setClinicId",1)),t("setInitialized",!0)}catch(a){console.error("Error initializing clinics:",a),t("setClinicId",1),t("setInitialized",!0)}}}},sce={extensionContent:null},oce={SET_EXTENSION_CONTENT(e,t){e.extensionContent=t},CLEAR_EXTENSION_CONTENT(e){e.extensionContent=null}},ice={setExtensionContent({commit:e},t){e("SET_EXTENSION_CONTENT",t)},clearExtensionContent({commit:e}){e("CLEAR_EXTENSION_CONTENT")}},lce={extensionContent:e=>e.extensionContent},uce={namespaced:!0,state:sce,mutations:oce,actions:ice,getters:lce},cce={show:!1,message:"",color:"info",timeout:4e3},dce={SHOW_SNACKBAR(e,{message:t,color:n="info",timeout:a=4e3}){e.show=!0,e.message=t,e.color=n,e.timeout=a},HIDE_SNACKBAR(e){e.show=!1,e.message=""},SET_SNACKBAR_VISIBILITY(e,t){e.show=t}},Ace={showSnackbar({commit:e},t){e("SHOW_SNACKBAR",t)},hideSnackbar({commit:e}){e("HIDE_SNACKBAR")},setSnackbarVisibility({commit:e},t){e("SET_SNACKBAR_VISIBILITY",t)},showSuccess({commit:e},t){e("SHOW_SNACKBAR",{message:t,color:"success"})},showError({commit:e},t){e("SHOW_SNACKBAR",{message:t,color:"error"})},showWarning({commit:e},t){e("SHOW_SNACKBAR",{message:t,color:"warning"})},showInfo({commit:e},t){e("SHOW_SNACKBAR",{message:t,color:"info"})}},fce={snackbar:e=>e,isSnackbarVisible:e=>e.show,snackbarMessage:e=>e.message,snackbarColor:e=>e.color},mce={namespaced:!0,state:cce,mutations:dce,actions:Ace,getters:fce},hce="modulepreload",vce=function(e,t){return new URL(e,t).href},D3={},xr=function(t,n,a){let r=Promise.resolve();if(n&&n.length>0){let A=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};const o=document.getElementsByTagName("link"),i=document.querySelector("meta[property=csp-nonce]"),c=i?.nonce||i?.getAttribute("nonce");r=A(n.map(d=>{if(d=vce(d,a),d in D3)return;D3[d]=!0;const f=d.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(a)for(let v=o.length-1;v>=0;v--){const y=o[v];if(y.href===d&&(!f||y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${m}`))return;const h=document.createElement("link");if(h.rel=f?"stylesheet":hce,f||(h.as="script"),h.crossOrigin="",h.href=d,c&&h.setAttribute("nonce",c),document.head.appendChild(h),f)return new Promise((v,y)=>{h.addEventListener("load",v),h.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(o){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=o,window.dispatchEvent(i),!i.defaultPrevented)throw o}return r.then(o=>{for(const i of o||[])i.status==="rejected"&&s(i.reason);return t().catch(s)})},pce={namespaced:!0,state:{filters:{diagnosis:null,medicine:null,dateFrom:"",dateTo:"",patientName:"",gender:"",ageGreaterThan:"",ageLessThan:""},searchResults:[],isLoading:!1,hasSearched:!1,lastSearchTime:null,totalResults:0,searchError:null,currentPage:1,resultsPerPage:20},getters:{hasActiveFilters:e=>!!(e.filters.diagnosis||e.filters.medicine||e.filters.dateFrom||e.filters.dateTo||e.filters.patientName?.trim()||e.filters.gender||e.filters.ageGreaterThan||e.filters.ageLessThan),searchSummary:e=>e.hasSearched?{totalResults:e.totalResults,filters:{...e.filters},searchTime:e.lastSearchTime,hasResults:e.searchResults.length>0}:null,activeFiltersText:(e,t,n)=>{if(!t.hasActiveFilters)return"";const a=e.filters,r=[];a.diagnosis&&typeof a.diagnosis=="string"&&a.diagnosis.trim()&&r.push(`Diagnosis: ${a.diagnosis}`),a.medicine&&typeof a.medicine=="string"&&a.medicine.trim()&&r.push(`Medicine: ${a.medicine}`),a.dateFrom&&a.dateTo?r.push(`Date: ${a.dateFrom} to ${a.dateTo}`):a.dateFrom?r.push(`From: ${a.dateFrom}`):a.dateTo&&r.push(`Until: ${a.dateTo}`),a.patientName?.trim()&&r.push(`Patient: ${a.patientName.trim()}`),a.gender?.trim()&&r.push(`Gender: ${a.gender.trim()}`),(a.ageGreaterThan||a.ageLessThan)&&(a.ageGreaterThan&&a.ageLessThan?r.push(`Age: ${a.ageGreaterThan}-${a.ageLessThan} years`):a.ageGreaterThan?r.push(`Age: Over ${a.ageGreaterThan} years`):a.ageLessThan&&r.push(`Age: Under ${a.ageLessThan} years`));const s=n.doctorModule?.doctorId,i=n.doctorModule?.doctors?.find(c=>c.id===s)?.doctorName;return i&&r.push(`Doctor: ${i}`),r.join("  ")}},mutations:{SET_FILTERS(e,t){e.filters={...e.filters,...t}},SET_SEARCH_RESULTS(e,{results:t,total:n}){e.searchResults=t||[],e.totalResults=n||0,e.hasSearched=!0,e.lastSearchTime=new Date().toISOString(),e.searchError=null},SET_LOADING(e,t){e.isLoading=!!t},SET_ERROR(e,t){e.searchError=t,e.isLoading=!1},CLEAR_SEARCH(e){e.searchResults=[],e.hasSearched=!1,e.totalResults=0,e.lastSearchTime=null,e.searchError=null},RESET_FILTERS(e){e.filters={diagnosis:null,medicine:null,dateFrom:"",dateTo:"",patientName:"",gender:"",ageGreaterThan:"",ageLessThan:""}},CLEAR_ALL(e){e.filters={diagnosis:null,medicine:null,dateFrom:"",dateTo:"",patientName:"",gender:"",ageGreaterThan:"",ageLessThan:""},e.searchResults=[],e.hasSearched=!1,e.totalResults=0,e.lastSearchTime=null,e.searchError=null,e.isLoading=!1}},actions:{async performSearch({commit:e,state:t,rootState:n}){const{fetchResearchData:a}=await xr(async()=>{const{fetchResearchData:r}=await import("./researchUtils-D5g2gsLg.js");return{fetchResearchData:r}},[],import.meta.url);e("SET_LOADING",!0),e("SET_ERROR",null);try{const r=n.doctorModule?.doctorId;if(!r)throw new Error("No doctor selected. Please select a doctor first.");const s={...t.filters,doctor_id:r};console.log(" Performing research search with filters (including current doctor):",s);const o=await a(s);if(o.error)throw new Error(`Search failed: ${o.error.message||"Unknown error"}`);const i=Array.isArray(o.data)?o.data:[];return e("SET_SEARCH_RESULTS",{results:i,total:i.length}),console.log(" Research search completed:",i.length,"results"),{data:i,error:null,success:!0}}catch(r){return console.error(" Research search failed:",r),e("SET_ERROR",r.message||"Failed to search research data"),{data:[],error:r,success:!1}}finally{e("SET_LOADING",!1)}},async updateFilters({commit:e,dispatch:t,getters:n},{filters:a,autoSearch:r=!1}){return e("SET_FILTERS",a),r&&n.hasActiveFilters?await t("performSearch"):{success:!0}},clearSearch({commit:e}){e("CLEAR_SEARCH")},clearFilters({commit:e}){e("RESET_FILTERS")},clearAll({commit:e}){e("CLEAR_ALL")}}},gce={namespaced:!0,state:{filters:{procedureName:"",dateFrom:"",dateTo:"",gender:"",ageGreaterThan:"",ageLessThan:""},searchResults:[],isLoading:!1,hasSearched:!1,lastSearchTime:null,totalResults:0,searchError:null,currentPage:1,resultsPerPage:20},getters:{hasActiveFilters:e=>!!(e.filters.procedureName?.trim()||e.filters.dateFrom||e.filters.dateTo||e.filters.gender||e.filters.ageGreaterThan||e.filters.ageLessThan),searchSummary:e=>e.hasSearched?{totalResults:e.totalResults,filters:{...e.filters},searchTime:e.lastSearchTime,hasResults:e.searchResults.length>0}:null,activeFiltersText:(e,t,n)=>{if(!t.hasActiveFilters)return"";const a=e.filters,r=[];a.procedureName?.trim()&&r.push(`Procedure: ${a.procedureName.trim()}`),a.dateFrom&&a.dateTo?r.push(`Date: ${a.dateFrom} to ${a.dateTo}`):a.dateFrom?r.push(`From: ${a.dateFrom}`):a.dateTo&&r.push(`Until: ${a.dateTo}`),a.gender?.trim()&&r.push(`Gender: ${a.gender.trim()}`),(a.ageGreaterThan||a.ageLessThan)&&(a.ageGreaterThan&&a.ageLessThan?r.push(`Age: ${a.ageGreaterThan}-${a.ageLessThan} years`):a.ageGreaterThan?r.push(`Age: Over ${a.ageGreaterThan} years`):a.ageLessThan&&r.push(`Age: Under ${a.ageLessThan} years`));const s=n.doctorModule?.doctorId,i=n.doctorModule?.doctors?.find(c=>c.id===s)?.doctorName;return i&&r.push(`Doctor: ${i}`),r.join("  ")}},mutations:{SET_FILTERS(e,t){e.filters={...e.filters,...t}},SET_SEARCH_RESULTS(e,{results:t,total:n}){e.searchResults=t||[],e.totalResults=n||0,e.hasSearched=!0,e.lastSearchTime=new Date().toISOString(),e.searchError=null},SET_LOADING(e,t){e.isLoading=!!t},SET_ERROR(e,t){e.searchError=t,e.isLoading=!1},CLEAR_SEARCH(e){e.searchResults=[],e.hasSearched=!1,e.totalResults=0,e.lastSearchTime=null,e.searchError=null},RESET_FILTERS(e){e.filters={procedureName:"",dateFrom:"",dateTo:"",gender:"",ageGreaterThan:"",ageLessThan:""}},CLEAR_ALL(e){e.filters={procedureName:"",dateFrom:"",dateTo:"",gender:"",ageGreaterThan:"",ageLessThan:""},e.searchResults=[],e.hasSearched=!1,e.totalResults=0,e.lastSearchTime=null,e.searchError=null,e.isLoading=!1}},actions:{async performSearch({commit:e,state:t,rootState:n}){const{searchProcedureResearch:a}=await xr(async()=>{const{searchProcedureResearch:r}=await Promise.resolve().then(()=>khe);return{searchProcedureResearch:r}},void 0,import.meta.url);e("SET_LOADING",!0),e("SET_ERROR",null);try{const r=n.doctorModule?.doctorId;if(!r)throw new Error("No doctor selected. Please select a doctor first.");const s={...t.filters,doctor_id:r};console.log(" Performing procedure research search with filters:",s);const o=await a(s);if(o.error)throw new Error(`Search failed: ${o.error.message||"Unknown error"}`);const i=Array.isArray(o.data)?o.data:[];return e("SET_SEARCH_RESULTS",{results:i,total:i.length}),console.log(" Procedure research search completed:",i.length,"results"),{data:i,error:null,success:!0}}catch(r){return console.error(" Procedure research search failed:",r),e("SET_ERROR",r.message||"Failed to search procedure research data"),{data:[],error:r,success:!1}}finally{e("SET_LOADING",!1)}},async updateFilters({commit:e,dispatch:t,getters:n},{filters:a,autoSearch:r=!1}){return e("SET_FILTERS",a),r&&n.hasActiveFilters?await t("performSearch"):{success:!0}},clearSearch({commit:e}){e("CLEAR_SEARCH")},clearFilters({commit:e}){e("RESET_FILTERS")},clearAll({commit:e}){e("CLEAR_ALL")}}},yce={filters:{reminderType:"",reminderStatus:"",patientName:"",dateFrom:"",dateTo:""},searchResults:[],rawResults:{appointments:[],consultations:[],treatmentPlans:[]},isLoading:!1,hasSearched:!1,searchError:null,partialErrors:[],lastSearchTime:null,totalResults:0},_ce={hasActiveFilters:e=>!!(e.filters.reminderType&&e.filters.reminderType!==""||e.filters.reminderStatus&&e.filters.reminderStatus!==""||e.filters.patientName?.trim()||e.filters.dateFrom||e.filters.dateTo),searchSummary:e=>e.hasSearched?{totalResults:e.totalResults,filters:{...e.filters},searchTime:e.lastSearchTime,hasResults:e.searchResults.length>0,hasPartialErrors:e.partialErrors.length>0}:null,activeFiltersText:(e,t,n)=>{if(!t.hasActiveFilters)return"";const a=e.filters,r=[];if(a.reminderType&&a.reminderType!==""){const c={appointment:"Appointments",consultation:"Consultations",procedures:"Treatment Plans"};r.push(`Type: ${c[a.reminderType]||a.reminderType}`)}if(a.reminderStatus&&a.reminderStatus!==""){const c={pending:"Pending",completed:"Completed"};r.push(`Status: ${c[a.reminderStatus]||a.reminderStatus}`)}a.patientName?.trim()&&r.push(`Patient: ${a.patientName.trim()}`),a.dateFrom&&a.dateTo?r.push(`Date: ${a.dateFrom} to ${a.dateTo}`):a.dateFrom?r.push(`From: ${a.dateFrom}`):a.dateTo&&r.push(`Until: ${a.dateTo}`);const s=n.doctorModule?.doctorId,i=n.doctorModule?.doctors?.find(c=>c.id===s)?.doctorName;return i&&r.push(`Doctor: ${i}`),r.join("  ")},uniquePatientsCount:e=>e.searchResults.length?new Set(e.searchResults.map(n=>n.patientId)).size:0,pendingRemindersCount:e=>e.searchResults.filter(t=>t.status==="pending").length,completedRemindersCount:e=>e.searchResults.filter(t=>t.status==="completed").length,appointmentReminders:e=>e.searchResults.filter(t=>t.type==="appointment"),consultationReminders:e=>e.searchResults.filter(t=>t.type==="consultation"),treatmentPlanReminders:e=>e.searchResults.filter(t=>t.type==="procedures")},wce={SET_FILTERS(e,t){e.filters={...e.filters,...t}},SET_SEARCH_RESULTS(e,{results:t,rawResults:n,total:a,partialErrors:r}){e.searchResults=t||[],e.rawResults=n||{appointments:[],consultations:[],treatmentPlans:[]},e.totalResults=a||0,e.partialErrors=r||[],e.hasSearched=!0,e.lastSearchTime=new Date().toISOString(),e.searchError=null},SET_LOADING(e,t){e.isLoading=!!t},SET_ERROR(e,t){e.searchError=t,e.isLoading=!1},CLEAR_SEARCH(e){e.searchResults=[],e.rawResults={appointments:[],consultations:[],treatmentPlans:[]},e.hasSearched=!1,e.totalResults=0,e.lastSearchTime=null,e.searchError=null,e.partialErrors=[]},RESET_FILTERS(e){e.filters={reminderType:"",reminderStatus:"",patientName:"",dateFrom:"",dateTo:""}},CLEAR_ALL(e){e.filters={reminderType:"",reminderStatus:"",patientName:"",dateFrom:"",dateTo:""},e.searchResults=[],e.rawResults={appointments:[],consultations:[],treatmentPlans:[]},e.hasSearched=!1,e.totalResults=0,e.lastSearchTime=null,e.searchError=null,e.partialErrors=[],e.isLoading=!1},UPDATE_REMINDER_STATUS(e,{id:t,isReminded:n}){const a=e.searchResults.find(r=>r.id===t);a&&(a.status=n?"completed":"pending",a.details.isReminded=n)}},bce={async performSearch({commit:e,state:t,rootState:n}){const{fetchAllReminders:a}=await xr(async()=>{const{fetchAllReminders:r}=await import("./reminderUtils-DVxT-X-S.js");return{fetchAllReminders:r}},[],import.meta.url);e("SET_LOADING",!0),e("SET_ERROR",null);try{const r=n.doctorModule?.doctorId;if(!r)throw new Error("No doctor selected. Please select a doctor first.");const s={...t.filters,doctor_id:r};t.filters.reminderStatus==="pending"?s.reminded=!1:t.filters.reminderStatus==="completed"&&(s.reminded=!0),console.log(" Performing reminder search with filters (including current doctor):",s);const o=await a(s);if(o.error&&o.data.length===0)throw new Error(o.error);const i=o.data||[];return e("SET_SEARCH_RESULTS",{results:i,rawResults:o.rawResults||{},total:i.length,partialErrors:o.partialErrors||[]}),console.log(" Reminder search completed:",i.length,"results"),o.partialErrors?.length>0&&console.warn(" Search completed with partial errors:",o.partialErrors),{data:i,error:null,success:!0,partialErrors:o.partialErrors}}catch(r){return console.error(" Reminder search failed:",r),e("SET_ERROR",r.message||"Failed to search reminders"),{data:[],error:r,success:!1,partialErrors:[]}}finally{e("SET_LOADING",!1)}},async updateFilters({commit:e,dispatch:t,getters:n},{filters:a,autoSearch:r=!1}){return e("SET_FILTERS",a),console.log(" Reminder filters updated:",a),r&&n.hasActiveFilters?await t("performSearch"):{success:!0}},clearSearch({commit:e}){return e("CLEAR_SEARCH"),console.log(" Reminder search results cleared"),{success:!0}},resetFilters({commit:e}){return e("RESET_FILTERS"),console.log(" Reminder filters reset"),{success:!0}},clearAll({commit:e}){return e("CLEAR_ALL"),console.log(" All reminder filters and results cleared"),{success:!0}},async markAsReminded({commit:e,rootState:t},{reminder:n,isReminded:a}){try{const{updateReminderStatus:r}=await xr(async()=>{const{updateReminderStatus:d}=await import("./reminderUtils-DVxT-X-S.js");return{updateReminderStatus:d}},[],import.meta.url),s=n.details.reminderType,o=n.originalId,i=n.details,c=t.clinicModule?.clinicId;c&&!i.clinicId&&!i.clinic_id&&(i.clinic_id=c),console.log(` Marking ${s} reminder as ${a?"reminded":"not reminded"}:`,o),console.log(" Original data:",i);const A=await r(s,o,a,i);if(A.success)return e("UPDATE_REMINDER_STATUS",{id:n.id,isReminded:a}),console.log(" Reminder status updated successfully"),{success:!0,error:null};throw new Error(A.error||"Failed to update reminder status")}catch(r){return console.error(" Failed to update reminder status:",r),{success:!1,error:r.message||"Failed to update reminder status"}}}},xce={namespaced:!0,state:yce,getters:_ce,mutations:wce,actions:bce},Cce=async(e,t=null,n=null)=>{try{const a={clinic_id:e};t&&(a.type=t);const r=n?{signal:n,params:a}:{params:a};return{data:(await dt.get("/resource/entities",r)).data.data.entities,error:null}}catch(a){return a.name==="AbortError"?{data:[],error:null}:(console.error("Error fetching resource entities:",a),{data:[],error:a})}},Sce=async e=>{try{return{data:(await dt.post("/resource/entities",e)).data.data.entity,error:null}}catch(t){return console.error("Error creating resource entity:",t),{data:null,error:t}}},Ece=async(e,t)=>{try{return{data:(await dt.put(`/resource/entities/${e}`,t)).data.data.entity,error:null}}catch(n){return console.error("Error updating resource entity:",n),{data:null,error:n}}},Bce=async e=>{try{return{data:(await dt.delete(`/resource/entities/${e}`)).data.data,error:null}}catch(t){return console.error("Error deleting resource entity:",t),{data:null,error:t}}},kce=async(e,t=null)=>{try{const n=t?{signal:t,params:e}:{params:e};return{data:(await dt.get("/resource/bookings",n)).data.data.bookings,error:null}}catch(n){return n.name==="AbortError"?{data:[],error:null}:(console.error("Error fetching resource bookings:",n),{data:[],error:n})}},Tce=async e=>{try{const t=await dt.post("/resource/bookings",e);return{data:t.data.data.booking,error:null,hasConflicts:t.data.data.hasConflicts}}catch(t){return console.error("Error creating resource booking:",t),{data:null,error:t,hasConflicts:!1}}},Ice=async(e,t)=>{try{const n=await dt.put(`/resource/bookings/${e}`,t);return{data:n.data.data.booking,error:null,hasConflicts:n.data.data.hasConflicts}}catch(n){return console.error("Error updating resource booking:",n),{data:null,error:n,hasConflicts:!1}}},Fce=async e=>{try{return{data:(await dt.delete(`/resource/bookings/${e}`)).data.data,error:null}}catch(t){return console.error("Error deleting resource booking:",t),{data:null,error:t}}},Pce=async(e,t,n,a=null,r=null)=>{try{const s={entity_id:e,start_date_time:t,end_date_time:n};a&&(s.exclude_id=a);const o=r?{signal:r,params:s}:{params:s};return{data:(await dt.get("/resource/bookings/conflicts",o)).data.data,error:null}}catch(s){return s.name==="AbortError"?{data:{conflicts:[],hasConflicts:!1},error:null}:(console.error("Error checking booking conflicts:",s),{data:{conflicts:[],hasConflicts:!1},error:s})}},Dce=()=>{try{const e=localStorage.getItem("resourceBookingState");if(e){const t=JSON.parse(e);return{selectedDate:t.selectedDate||null,selectedEntity:t.selectedEntity||null,entitySearchQuery:t.entitySearchQuery||""}}}catch(e){console.error("Error loading persisted resource booking state:",e)}return{selectedDate:null,selectedEntity:null,entitySearchQuery:""}},qx=Dce(),Uce={namespaced:!0,state:{entities:[],bookings:[],selectedDate:qx.selectedDate,selectedEntity:qx.selectedEntity,entitySearchQuery:qx.entitySearchQuery,isLoading:!1,isRefreshing:!1,error:null},getters:{filteredEntities:e=>{if(!e.entitySearchQuery||e.entitySearchQuery.trim()==="")return[...e.entities].sort((n,a)=>n.name.localeCompare(a.name));const t=e.entitySearchQuery.toLowerCase().trim();return e.entities.filter(n=>n.name.toLowerCase().includes(t)).sort((n,a)=>n.name.localeCompare(a.name))},bookingsByDate:e=>e.selectedDate?e.bookings.filter(t=>!0):[],bookingsByEntity:(e,t)=>{const n=t.bookingsByDate,a={};return n.forEach(r=>{const s=r.entityId||r.entity?.id;a[s]||(a[s]=[]),a[s].push(r)}),a},conflicts:e=>{const t=[],n=e.bookings;for(let a=0;a<n.length;a++)for(let r=a+1;r<n.length;r++){const s=n[a],o=n[r];if(s.entityId===o.entityId||s.entity?.id===o.entity?.id){const i=s.startDateTime,c=s.endDateTime,A=o.startDateTime,d=o.endDateTime;i<d&&c>A&&t.push({booking1:s,booking2:o})}}return t}},mutations:{setEntities(e,t){e.entities=t},addEntity(e,t){e.entities.push(t)},updateEntity(e,t){const n=e.entities.findIndex(a=>a.id===t.id);n!==-1&&(e.entities[n]=t)},removeEntity(e,t){e.entities=e.entities.filter(n=>n.id!==t)},setBookings(e,t){e.bookings=t},addBooking(e,t){e.bookings.push(t)},updateBooking(e,t){const n=e.bookings.findIndex(a=>a.id===t.id);n!==-1&&(e.bookings[n]=t)},removeBooking(e,t){e.bookings=e.bookings.filter(n=>n.id!==t)},setSelectedDate(e,t){e.selectedDate=t;try{const n=JSON.parse(localStorage.getItem("resourceBookingState")||"{}");n.selectedDate=t,localStorage.setItem("resourceBookingState",JSON.stringify(n))}catch(n){console.error("Error persisting selectedDate:",n)}},setSelectedEntity(e,t){e.selectedEntity=t;try{const n=JSON.parse(localStorage.getItem("resourceBookingState")||"{}");n.selectedEntity=t,localStorage.setItem("resourceBookingState",JSON.stringify(n))}catch(n){console.error("Error persisting selectedEntity:",n)}},setEntitySearchQuery(e,t){e.entitySearchQuery=t;try{const n=JSON.parse(localStorage.getItem("resourceBookingState")||"{}");n.entitySearchQuery=t,localStorage.setItem("resourceBookingState",JSON.stringify(n))}catch(n){console.error("Error persisting entitySearchQuery:",n)}},setLoading(e,t){e.isLoading=t},setRefreshing(e,t){e.isRefreshing=t},setError(e,t){e.error=t},clearOldBookings(e){e.bookings=[]}},actions:{async fetchEntities({commit:e,rootState:t},{type:n=null,signal:a=null}={}){try{e("setLoading",!0),e("setError",null);const r=t.clinicId||t.clinicModule?.clinicId||1,s=await Cce(r,n,a);if(s.error)throw s.error;return e("setEntities",s.data||[]),{data:s.data,error:null}}catch(r){return e("setError",r),{data:[],error:r}}finally{e("setLoading",!1)}},async createEntity({commit:e,dispatch:t},n){try{e("setError",null);const a=await Sce(n);if(a.error)throw a.error;return e("addEntity",a.data),await t("fetchEntities"),{data:a.data,error:null}}catch(a){return e("setError",a),{data:null,error:a}}},async updateEntity({commit:e,dispatch:t},{id:n,entityData:a}){try{e("setError",null);const r=await Ece(n,a);if(r.error)throw r.error;return e("updateEntity",r.data),await t("fetchEntities"),{data:r.data,error:null}}catch(r){return e("setError",r),{data:null,error:r}}},async deleteEntity({commit:e,dispatch:t},n){try{e("setError",null);const a=await Bce(n);if(a.error)throw a.error;return e("removeEntity",n),await t("fetchEntities"),{data:a.data,error:null}}catch(a){return e("setError",a),{data:null,error:a}}},async fetchBookings({commit:e,rootState:t,state:n},{date:a=null,entityId:r=null,signal:s=null}={}){try{e("setLoading",!0),e("setError",null);const o=t.clinicId||t.clinicModule?.clinicId||1,i=a||n.selectedDate;if(!i)return e("setBookings",[]),{data:[],error:null};const c={clinic_id:o,date:i};r&&(c.entity_id=r);const A=await kce(c,s);if(A.error)throw A.error;return e("setBookings",A.data||[]),{data:A.data,error:null}}catch(o){return o.name!=="AbortError"&&e("setError",o),{data:[],error:o}}finally{e("setLoading",!1)}},async createBooking({commit:e,dispatch:t},n){try{e("setError",null);const a=await Tce(n);if(a.error)throw a.error;return e("addBooking",a.data),await t("fetchBookings"),{data:a.data,error:null,hasConflicts:a.hasConflicts}}catch(a){return e("setError",a),{data:null,error:a,hasConflicts:!1}}},async updateBooking({commit:e,dispatch:t},{id:n,bookingData:a}){try{e("setError",null);const r=await Ice(n,a);if(r.error)throw r.error;return e("updateBooking",r.data),await t("fetchBookings"),{data:r.data,error:null,hasConflicts:r.hasConflicts}}catch(r){return e("setError",r),{data:null,error:r,hasConflicts:!1}}},async deleteBooking({commit:e,dispatch:t},n){try{e("setError",null);const a=await Fce(n);if(a.error)throw a.error;return e("removeBooking",n),await t("fetchBookings"),{data:a.data,error:null}}catch(a){return e("setError",a),{data:null,error:a}}},async refreshBookings({commit:e,dispatch:t,state:n}){try{return e("setRefreshing",!0),e("setError",null),await Promise.all([t("fetchEntities"),t("fetchBookings",{date:n.selectedDate})]),{error:null}}catch(a){return e("setError",a),{error:a}}finally{e("setRefreshing",!1)}},async checkConflicts({commit:e},{entityId:t,startDateTime:n,endDateTime:a,excludeId:r=null,signal:s=null}){try{const o=await Pce(t,n,a,r,s);if(o.error)throw o.error;return{data:o.data,error:null}}catch(o){return o.name!=="AbortError"&&e("setError",o),{data:{conflicts:[],hasConflicts:!1},error:o}}}}},Rce=()=>localStorage.getItem("selectedTranslationLanguage")||"none",Nce=()=>{const e=localStorage.getItem("selectedHeaderSize");return e?parseInt(e,10):130},wi=Eae({state:{doctorId:1,clinicId:1,appInitialized:!1,appInitializing:!0,selectedTranslationLanguage:Rce(),selectedHeaderSize:Nce()},getters:{isAppInitialized:e=>e.appInitialized,isAppInitializing:e=>e.appInitializing,getCurrentDoctorId:e=>e.doctorId,getCurrentClinicId:e=>e.clinicId,getSelectedTranslationLanguage:e=>e.selectedTranslationLanguage,getSelectedHeaderSize:e=>e.selectedHeaderSize},mutations:{setDoctorId(e,t){e.doctorId=t},setClinicId(e,t){e.clinicId=t},setAppInitialized(e,t){e.appInitialized=t},setAppInitializing(e,t){e.appInitializing=t},setSelectedTranslationLanguage(e,t){e.selectedTranslationLanguage=t,t&&t!=="none"?localStorage.setItem("selectedTranslationLanguage",t):localStorage.removeItem("selectedTranslationLanguage")},setSelectedHeaderSize(e,t){const n=Math.max(50,Math.min(200,parseInt(t,10)||130));e.selectedHeaderSize=n,localStorage.setItem("selectedHeaderSize",n.toString())}},actions:{updateDoctorId({commit:e},t){e("setDoctorId",t)},updateClinicId({commit:e},t){e("setClinicId",t)},updateSelectedTranslationLanguage({commit:e},t){e("setSelectedTranslationLanguage",t)},updateSelectedHeaderSize({commit:e},t){e("setSelectedHeaderSize",t)}},modules:{auth:Xue,doctorModule:tce,clinicModule:rce,appBar:uce,snackbar:mce,researchModule:pce,procedureResearchModule:gce,reminderModule:xce,resourceBookingModule:Uce}});let tE=null;const dt=Cr.create({baseURL:"",headers:{"Content-Type":"application/json"},timeout:3e5,withCredentials:!1}),kh=e=>{console.log("[api/client] Base URL updated to:",e),tE=e,dt.defaults.baseURL=e},rM=async()=>{console.log("[api/client] Initializing API client..."),console.log("[api/client] Environment:",Ka()?"Electron":"Web"),console.log("[api/client] Current URL:",window.location.href);try{const e=Pre();kh(e),console.log("[api/client] API client initialized with base URL:",e)}catch(e){throw console.error("[api/client] Failed to initialize API client:",e.message),e}},Vce=e=>{const t=Pr("localhost");return e.replace(t.api.https,t.api.http)},U3=e=>!e||!Ka()?!1:e.includes("localhost")||e.includes("127.0.0.1")||e.includes("192.168.");dt.interceptors.request.use(async e=>{if(Ka())try{const t=Os.currentUser;if(t){const n=await t.getIdToken();e.headers.Authorization=`Bearer ${n}`}}catch(t){console.warn("Failed to get Firebase auth token:",t)}return e},e=>Promise.reject(e));dt.interceptors.response.use(e=>{if(e.data){const{success:t,message:n}=e.data,a=e.config.headers["X-Skip-Messages"]==="true";if(t&&n&&e.config.method!=="get"&&!a&&wi.dispatch("snackbar/showSuccess",n),!t&&(n||e.data.error)&&!a){const r=e.data.error||n;wi.dispatch("snackbar/showError",r)}}return e},async e=>{if(e.config&&!e.config.__isRetry&&Ka()){const a=e.config.baseURL||tE,r=!e.response,s=e.code==="CERT_AUTHORITY_INVALID"||e.code==="CERT_COMMON_NAME_INVALID"||e.code==="CERT_UNTRUSTED"||e.code==="ERR_CERT_AUTHORITY_INVALID"||e.code==="ERR_CERT_COMMON_NAME_INVALID"||e.code==="ERR_INSECURE_RESPONSE"||e.message?.includes("certificate")||e.message?.includes("SSL")||e.message?.includes("HTTPS")||e.message?.includes("self signed")||e.message?.includes("CERT_")||e.message?.includes("ERR_"),o=e.code==="ECONNREFUSED"||e.code==="ECONNRESET"||e.code==="ENOTFOUND"||e.code==="ETIMEDOUT";if(U3(a)&&a.startsWith("https://")&&(r||s||o||e.response?.status>=400)){console.log(" HTTPS failed for localhost (Electron mode), trying HTTP fallback..."),console.log("Error details:",{code:e.code,message:e.message,isNetworkError:r,isCertError:s,isConnectionError:o,originalUrl:a});try{const c=Vce(a);console.log(`Attempting HTTP fallback: ${c}`),kh(c),e.config.__isRetry=!0,e.config.baseURL=c;const A=await dt.request(e.config);return console.log(" HTTP fallback successful"),A}catch(c){console.error(" HTTP fallback also failed:",c)}}}let t="An error occurred";return e.response?(console.error("Response error:",e.response.data),e.response.data?.error?t=e.response.data.error:e.response.data?.message?t=e.response.data.message:e.response.status===401?t="Authentication required":e.response.status===403?t="Access forbidden":e.response.status===404?t="Resource not found":e.response.status>=500&&(t="Server error occurred")):e.request?(console.error("Request error:",e.request),Ka()&&U3(tE)?t="Cannot connect to local server - please ensure the server is running":t="Network error - please check your connection"):(console.error("Error:",e.message),t=e.message||"Request failed"),e.config?.headers?.["X-Skip-Messages"]==="true"||wi.dispatch("snackbar/showError",t),Promise.reject(e)});const sM=e=>({...e,headers:{...e.headers,"X-Skip-Messages":"true"}}),oM=Object.freeze(Object.defineProperty({__proto__:null,createSilentRequest:sM,default:dt,initializeAPIClient:rM,updateBaseURL:kh},Symbol.toStringTag,{value:"Module"})),Gr=M(localStorage.getItem("sessionToken")||null),Fd=M(JSON.parse(localStorage.getItem("permissions")||"[]")),Pd=M(localStorage.getItem("isAdmin")==="true"),Dd=M(localStorage.getItem("userName")||null),Ud=M(localStorage.getItem("userId")?parseInt(localStorage.getItem("userId")):null),Rd=M(JSON.parse(localStorage.getItem("features")||"[]")),Lce=ee(()=>!!Gr.value),oh=M(!1),O_=M(null);We([Gr,Fd,Pd,Dd,Ud,Rd],()=>{if(Gr.value){localStorage.setItem("sessionToken",Gr.value),localStorage.setItem("permissions",JSON.stringify(Fd.value)),localStorage.setItem("isAdmin",Pd.value.toString()),localStorage.setItem("userName",Dd.value||"");const e=Ud.value;localStorage.setItem("userId",e!=null?String(e):""),localStorage.setItem("features",JSON.stringify(Rd.value))}else localStorage.removeItem("sessionToken"),localStorage.removeItem("permissions"),localStorage.removeItem("isAdmin"),localStorage.removeItem("userName"),localStorage.removeItem("userId"),localStorage.removeItem("features")},{deep:!0});let Yx=!1,nE=[];const Xx=(e,t=null)=>{nE.forEach(n=>{e?n.reject(e):n.resolve(t)}),nE=[]};function iM(e=dt){e.interceptors.request.use(t=>{const n=t.url?.includes("/web/auth/login")||t.url?.includes("/web/auth/refresh");return Gr.value&&!n&&(t.headers["x-session-token"]=Gr.value),t},t=>Promise.reject(t)),e.interceptors.response.use(t=>t,async t=>{const n=t.config;if(t.response?.status===419)return console.warn("[useWebSession] Session invalidated - permissions may have been updated"),cc(),window.location.reload(),Promise.reject(t);if(t.response?.status===401&&Gr.value){if(n.url?.includes("/web/auth/"))return console.log("[useWebSession] 401 on auth endpoint, clearing session"),cc(),Promise.reject(t);if(Yx)return new Promise((a,r)=>{nE.push({resolve:a,reject:r})}).then(a=>(n.headers["x-session-token"]=a,dt(n))).catch(a=>Promise.reject(a));Yx=!0;try{return console.log("[useWebSession] Session expired (401), attempting automatic refresh..."),await lM()&&Gr.value?(console.log("[useWebSession] Session refreshed successfully, retrying original request"),n.headers["x-session-token"]=Gr.value,Xx(null,Gr.value),dt(n)):(console.warn("[useWebSession] Session refresh failed, clearing session"),cc(),Xx(t,null),Promise.reject(t))}catch(a){return console.error("[useWebSession] Session refresh error:",a),cc(),Xx(a,null),Promise.reject(a)}finally{Yx=!1}}return Promise.reject(t)})}async function Mce(e,t=null){oh.value=!0,O_.value=null;try{const n=await dt.post("/web/auth/login",{passcode:e,userId:t});if(n.data.success){Gr.value=n.data.sessionToken,Fd.value=n.data.permissions||[],Pd.value=n.data.isAdmin||!1,Dd.value=n.data.userName||null;const a=n.data.userId;return Ud.value=a!=null?typeof a=="number"?a:parseInt(a,10):null,Rd.value=n.data.features||[],{success:!0,isAdmin:n.data.isAdmin,userName:n.data.userName}}else throw new Error(n.data.error||"Login failed")}catch(n){throw O_.value=n.response?.data?.error||n.message||"Login failed",n}finally{oh.value=!1}}async function Oce(){try{Gr.value&&await dt.post("/web/auth/logout",{},{headers:{"x-session-token":Gr.value}})}catch(e){console.error("Logout error:",e)}finally{cc()}}async function Hce(){if(!Gr.value)return{valid:!1};oh.value=!0;try{const e=dt.defaults.baseURL;if(!e)return console.error("[useWebSession] API client base URL not set! Cannot verify session."),oh.value=!1,{valid:!1,error:"API client not initialized"};console.log("[useWebSession] Verifying session with base URL:",e),console.log("[useWebSession] Full URL will be:",`${e}/web/auth/verify`),console.log("[useWebSession] Session token exists:",!!Gr.value);const t=await dt.get("/web/auth/verify");if(t.data.valid){Fd.value=t.data.permissions||[],Pd.value=t.data.isAdmin||!1,Dd.value=t.data.userName||null;const n=t.data.userId;return Ud.value=n!=null?typeof n=="number"?n:parseInt(n,10):null,Rd.value=t.data.features||[],{valid:!0,...t.data}}else return cc(),{valid:!1}}catch(e){return console.error("[useWebSession] Session verification failed:",e),(e.code==="ERR_NETWORK"||e.message?.includes("CORS")||e.message?.includes("Network Error")||!e.response)&&(console.error("[useWebSession] CORS or network error detected. Base URL:",dt.defaults.baseURL),console.error("[useWebSession] This usually means the endpoint URL is incorrect or the server is not configured for CORS.")),e.response?.status===401&&cc(),{valid:!1,error:e.message}}finally{oh.value=!1}}async function lM(){if(!Gr.value)return console.warn("[useWebSession] Cannot refresh session - no session token"),!1;try{console.log("[useWebSession] Refreshing session...");const e=await dt.post("/web/auth/refresh",{},{headers:{"x-session-token":Gr.value}});if(e.data.success){if(e.data.sessionToken&&(Gr.value=e.data.sessionToken,console.log("[useWebSession] Session token updated after refresh")),e.data.permissions&&(Fd.value=e.data.permissions),e.data.isAdmin!==void 0&&(Pd.value=e.data.isAdmin),e.data.userName&&(Dd.value=e.data.userName),e.data.userId!==void 0){const t=e.data.userId;Ud.value=t!=null?typeof t=="number"?t:parseInt(t,10):null}return e.data.features&&(Rd.value=e.data.features),console.log("[useWebSession] Session refreshed successfully"),!0}return!1}catch(e){return console.error("[useWebSession] Session refresh error:",e),e.response?.status===401&&(console.warn("[useWebSession] Refresh endpoint returned 401 - session truly expired"),cc()),!1}}function cc(){Gr.value=null,Fd.value=[],Pd.value=!1,Dd.value=null,Ud.value=null,Rd.value=[],O_.value=null}function $ce(e){Gr.value=e.sessionToken,Fd.value=e.permissions||[],Pd.value=e.isAdmin||!1,Dd.value=e.userName||null;const t=e.userId;Ud.value=t!=null?typeof t=="number"?t:parseInt(t,10):null,Rd.value=e.features||[]}function Xh(){return{sessionToken:ee(()=>Gr.value),permissions:ee(()=>Fd.value),isAdmin:ee(()=>Pd.value),userName:ee(()=>Dd.value),userId:ee(()=>Ud.value),features:ee(()=>Rd.value),isAuthenticated:Lce,sessionLoading:ee(()=>oh.value),sessionError:ee(()=>O_.value),login:Mce,logout:Oce,verifySession:Hce,refreshSession:lM,clearSession:cc,setSession:$ce,setupSessionInterceptors:iM}}const Qce="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M10%204A4%204%200%200%200%206%208A4%204%200%200%200%2010%2012A4%204%200%200%200%2014%208A4%204%200%200%200%2010%204M17.5%2013C15%2013%2013%2015%2013%2017.5C13%2020%2015%2022%2017.5%2022C20%2022%2022%2020%2022%2017.5C22%2015%2020%2013%2017.5%2013M10%2014C5.58%2014%202%2015.79%202%2018V20H11.5A6.5%206.5%200%200%201%2011%2017.5A6.5%206.5%200%200%201%2011.95%2014.14C11.32%2014.06%2010.68%2014%2010%2014M17.5%2014.5C19.16%2014.5%2020.5%2015.84%2020.5%2017.5C20.5%2018.06%2020.35%2018.58%2020.08%2019L16%2014.92C16.42%2014.65%2016.94%2014.5%2017.5%2014.5M14.92%2016L19%2020.08C18.58%2020.35%2018.06%2020.5%2017.5%2020.5C15.84%2020.5%2014.5%2019.16%2014.5%2017.5C14.5%2016.94%2014.65%2016.42%2014.92%2016Z'%20/%3e%3c/svg%3e",Gce="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M21.1,12.5L22.5,13.91L15.97,20.5L12.5,17L13.9,15.59L15.97,17.67L21.1,12.5M10,17L13,20H3V18C3,15.79%206.58,14%2011,14L12.89,14.11L10,17M11,4A4,4%200%200,1%2015,8A4,4%200%200,1%2011,12A4,4%200%200,1%207,8A4,4%200%200,1%2011,4Z'%20/%3e%3c/svg%3e",zce="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M10.63,14.1C12.23,10.58%2016.38,9.03%2019.9,10.63C23.42,12.23%2024.97,16.38%2023.37,19.9C22.24,22.4%2019.75,24%2017,24C14.3,24%2011.83,22.44%2010.67,20H1V18C1.06,16.86%201.84,15.93%203.34,15.18C4.84,14.43%206.72,14.04%209,14C9.57,14%2010.11,14.05%2010.63,14.1V14.1M9,4C10.12,4.03%2011.06,4.42%2011.81,5.17C12.56,5.92%2012.93,6.86%2012.93,8C12.93,9.14%2012.56,10.08%2011.81,10.83C11.06,11.58%2010.12,11.95%209,11.95C7.88,11.95%206.94,11.58%206.19,10.83C5.44,10.08%205.07,9.14%205.07,8C5.07,6.86%205.44,5.92%206.19,5.17C6.94,4.42%207.88,4.03%209,4M17,22A5,5%200%200,0%2022,17A5,5%200%200,0%2017,12A5,5%200%200,0%2012,17A5,5%200%200,0%2017,22M16,14H17.5V16.82L19.94,18.23L19.19,19.53L16,17.69V14Z'%20/%3e%3c/svg%3e",Kce="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M10%204A4%204%200%200%200%206%208A4%204%200%200%200%2010%2012A4%204%200%200%200%2014%208A4%204%200%200%200%2010%204M17%2012C16.87%2012%2016.76%2012.09%2016.74%2012.21L16.55%2013.53C16.25%2013.66%2015.96%2013.82%2015.7%2014L14.46%2013.5C14.35%2013.5%2014.22%2013.5%2014.15%2013.63L13.15%2015.36C13.09%2015.47%2013.11%2015.6%2013.21%2015.68L14.27%2016.5C14.25%2016.67%2014.24%2016.83%2014.24%2017C14.24%2017.17%2014.25%2017.33%2014.27%2017.5L13.21%2018.32C13.12%2018.4%2013.09%2018.53%2013.15%2018.64L14.15%2020.37C14.21%2020.5%2014.34%2020.5%2014.46%2020.5L15.7%2020C15.96%2020.18%2016.24%2020.35%2016.55%2020.47L16.74%2021.79C16.76%2021.91%2016.86%2022%2017%2022H19C19.11%2022%2019.22%2021.91%2019.24%2021.79L19.43%2020.47C19.73%2020.34%2020%2020.18%2020.27%2020L21.5%2020.5C21.63%2020.5%2021.76%2020.5%2021.83%2020.37L22.83%2018.64C22.89%2018.53%2022.86%2018.4%2022.77%2018.32L21.7%2017.5C21.72%2017.33%2021.74%2017.17%2021.74%2017C21.74%2016.83%2021.73%2016.67%2021.7%2016.5L22.76%2015.68C22.85%2015.6%2022.88%2015.47%2022.82%2015.36L21.82%2013.63C21.76%2013.5%2021.63%2013.5%2021.5%2013.5L20.27%2014C20%2013.82%2019.73%2013.65%2019.42%2013.53L19.23%2012.21C19.22%2012.09%2019.11%2012%2019%2012H17M10%2014C5.58%2014%202%2015.79%202%2018V20H11.68A7%207%200%200%201%2011%2017A7%207%200%200%201%2011.64%2014.09C11.11%2014.03%2010.56%2014%2010%2014M18%2015.5C18.83%2015.5%2019.5%2016.17%2019.5%2017C19.5%2017.83%2018.83%2018.5%2018%2018.5C17.16%2018.5%2016.5%2017.83%2016.5%2017C16.5%2016.17%2017.17%2015.5%2018%2015.5Z'%20/%3e%3c/svg%3e",Wce="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M16%2017V19H2V17S2%2013%209%2013%2016%2017%2016%2017M12.5%207.5A3.5%203.5%200%201%200%209%2011A3.5%203.5%200%200%200%2012.5%207.5M15.94%2013A5.32%205.32%200%200%201%2018%2017V19H22V17S22%2013.37%2015.94%2013M15%204A3.39%203.39%200%200%200%2013.07%204.59A5%205%200%200%201%2013.07%2010.41A3.39%203.39%200%200%200%2015%2011A3.5%203.5%200%200%200%2015%204Z'%20/%3e%3c/svg%3e",jce="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M12,4A4,4%200%200,1%2016,8A4,4%200%200,1%2012,12A4,4%200%200,1%208,8A4,4%200%200,1%2012,4M12,14C16.42,14%2020,15.79%2020,18V20H4V18C4,15.79%207.58,14%2012,14Z'%20/%3e%3c/svg%3e",qce="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M23%207V13H21V7M21%2015H23V17H21M12%202A2%202%200%200%200%2010%204A2%202%200%200%200%2010%204.29C7.12%205.14%205%207.82%205%2011V17L3%2019V20H21V19L19%2017V11C19%207.82%2016.88%205.14%2014%204.29A2%202%200%200%200%2014%204A2%202%200%200%200%2012%202M10%2021A2%202%200%200%200%2012%2023A2%202%200%200%200%2014%2021Z'%20/%3e%3c/svg%3e",Yce="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17.75%2021.16L15%2018.16L16.16%2017L17.75%2018.59L21.34%2015L22.5%2016.41L17.75%2021.16M3%2020V19L5%2017V11C5%207.9%207.03%205.18%2010%204.29V4C10%202.9%2010.9%202%2012%202C13.11%202%2014%202.9%2014%204V4.29C16.97%205.18%2019%207.9%2019%2011V12.08L18%2012C14.69%2012%2012%2014.69%2012%2018C12%2018.7%2012.12%2019.37%2012.34%2020H3M12%2023C10.9%2023%2010%2022.11%2010%2021H12.8C13.04%2021.41%2013.33%2021.79%2013.65%2022.13C13.29%2022.66%2012.69%2023%2012%2023Z'%20/%3e%3c/svg%3e",Xce="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19%202L14%206.5V17.5L19%2013V2M6.5%205C4.55%205%202.45%205.4%201%206.5V21.16C1%2021.41%201.25%2021.66%201.5%2021.66C1.6%2021.66%201.65%2021.59%201.75%2021.59C3.1%2020.94%205.05%2020.5%206.5%2020.5C8.45%2020.5%2010.55%2020.9%2012%2022C13.35%2021.15%2015.8%2020.5%2017.5%2020.5C19.15%2020.5%2020.85%2020.81%2022.25%2021.56C22.35%2021.61%2022.4%2021.59%2022.5%2021.59C22.75%2021.59%2023%2021.34%2023%2021.09V6.5C22.4%206.05%2021.75%205.75%2021%205.5V19C19.9%2018.65%2018.7%2018.5%2017.5%2018.5C15.8%2018.5%2013.35%2019.15%2012%2020V6.5C10.55%205.4%208.45%205%206.5%205Z'%20/%3e%3c/svg%3e",Jce="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M7,2H17A2,2%200%200,1%2019,4V20A2,2%200%200,1%2017,22H7A2,2%200%200,1%205,20V4A2,2%200%200,1%207,2M7,4V8H17V4H7M7,10V12H9V10H7M11,10V12H13V10H11M15,10V12H17V10H15M7,14V16H9V14H7M11,14V16H13V14H11M15,14V16H17V14H15M7,18V20H9V18H7M11,18V20H13V18H11M15,18V20H17V18H15Z'%20/%3e%3c/svg%3e",Zce="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17,19H7V5H17M17,1H7C5.89,1%205,1.89%205,3V21A2,2%200%200,0%207,23H17A2,2%200%200,0%2019,21V3C19,1.89%2018.1,1%2017,1Z'%20/%3e%3c/svg%3e",ede="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='currentColor'%20d='M16,11.78L20.24,4.45L21.97,5.45L16.74,14.5L10.23,10.75L5.46,19H22V21H2V3H4V17.54L9.5,8L16,11.78Z'%20/%3e%3c/svg%3e",tde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M22,12A10,10%200%200,1%2012,22A10,10%200%200,1%202,12A10,10%200%200,1%2012,2A10,10%200%200,1%2022,12M15.4,16.6L10.8,12L15.4,7.4L14,6L8,12L14,18L15.4,16.6Z'%20/%3e%3c/svg%3e",nde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M22,12A10,10%200%200,1%2012,22A10,10%200%200,1%202,12A10,10%200%200,1%2012,2A10,10%200%200,1%2022,12M10,18L16,12L10,6L8.6,7.4L13.2,12L8.6,16.6L10,18Z'%20/%3e%3c/svg%3e",ade="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,3H14.82C14.4,1.84%2013.3,1%2012,1C10.7,1%209.6,1.84%209.18,3H5A2,2%200%200,0%203,5V19A2,2%200%200,0%205,21H19A2,2%200%200,0%2021,19V5A2,2%200%200,0%2019,3M12,3A1,1%200%200,1%2013,4A1,1%200%200,1%2012,5A1,1%200%200,1%2011,4A1,1%200%200,1%2012,3M5,13.46H7.17L10.5,7.08L11.44,14.05L13.93,10.86L16.53,13.46H19V15H15.89L14.07,13.21L10.38,17.92L9.62,12.15L8.11,15H5V13.46Z'%20/%3e%3c/svg%3e",rde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17,9H7V7H17M17,13H7V11H17M14,17H7V15H14M12,3A1,1%200%200,1%2013,4A1,1%200%200,1%2012,5A1,1%200%200,1%2011,4A1,1%200%200,1%2012,3M19,3H14.82C14.4,1.84%2013.3,1%2012,1C10.7,1%209.6,1.84%209.18,3H5A2,2%200%200,0%203,5V19A2,2%200%200,0%205,21H19A2,2%200%200,0%2021,19V5A2,2%200%200,0%2019,3Z'%20/%3e%3c/svg%3e",sde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M20%206.91L17.09%204L12%209.09L6.91%204L4%206.91L9.09%2012L4%2017.09L6.91%2020L12%2014.91L17.09%2020L20%2017.09L14.91%2012L20%206.91Z'%20/%3e%3c/svg%3e",ode="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z'%20/%3e%3c/svg%3e",ide="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M13%2019C13%2019.34%2013.04%2019.67%2013.09%2020H6.5C5%2020%203.69%2019.5%202.61%2018.43C1.54%2017.38%201%2016.09%201%2014.58C1%2013.28%201.39%2012.12%202.17%2011.1S4%209.43%205.25%209.15C5.67%207.62%206.5%206.38%207.75%205.43S10.42%204%2012%204C13.95%204%2015.6%204.68%2016.96%206.04C18.32%207.4%2019%209.05%2019%2011C20.15%2011.13%2021.1%2011.63%2021.86%2012.5C22.37%2013.07%2022.7%2013.71%2022.86%2014.42C21.82%2013.54%2020.5%2013%2019%2013C15.69%2013%2013%2015.69%2013%2019M20%2016H18V20H16L19%2023L22%2020H20V16Z'%20/%3e%3c/svg%3e",lde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,21H8V7H19M19,5H8A2,2%200%200,0%206,7V21A2,2%200%200,0%208,23H19A2,2%200%200,0%2021,21V7A2,2%200%200,0%2019,5M16,1H4A2,2%200%200,0%202,3V17H4V3H16V1Z'%20/%3e%3c/svg%3e",ude="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2%200%200,0%208,21H16A2,2%200%200,0%2018,19V7H6V19Z'%20/%3e%3c/svg%3e",cde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M20%204H4c-1.1%200-1.99.9-1.99%202L2%2018c0%201.1.9%202%202%202h16c1.1%200%202-.9%202-2V6c0-1.1-.9-2-2-2zm0%204l-8%205-8-5V6l8%205%208-5v2z'%20fill='currentColor'/%3e%3c/svg%3e",dde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19%2013C19.34%2013%2019.67%2013.04%2020%2013.09V8L14%202H6C4.89%202%204%202.89%204%204V20C4%2021.11%204.89%2022%206%2022H13.81C13.3%2021.12%2013%2020.1%2013%2019C13%2015.69%2015.69%2013%2019%2013M13%203.5L18.5%209H13V3.5M23.5%2020L21%2023L18.5%2020H20V16H22V20H23.5M19.5%2018H18V22H16V18H14.5L17%2015L19.5%2018Z'%20/%3e%3c/svg%3e",Ade="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M14,8H10V6H14V8M20,4V20C20,21.11%2019.11,22%2018,22H6C4.89,22%204,21.11%204,20V4A2,2%200%200,1%206,2H18C19.11,2%2020,2.9%2020,4M18,13H6V20H18V13M18,4H6V11H18V4M14,15H10V17H14V15Z'%20/%3e%3c/svg%3e",fde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M8,12H16V14H8V12M10,20H6V4H13V9H18V12.1L20,10.1V8L14,2H6A2,2%200%200,0%204,4V20A2,2%200%200,0%206,22H10V20M8,18H12.1L13,17.1V16H8V18M20.2,13C20.3,13%2020.5,13.1%2020.6,13.2L21.9,14.5C22.1,14.7%2022.1,15.1%2021.9,15.3L20.9,16.3L18.8,14.2L19.8,13.2C19.9,13.1%2020,13%2020.2,13M20.2,16.9L14.1,23H12V20.9L18.1,14.8L20.2,16.9Z'%20/%3e%3c/svg%3e",mde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M14%202H6C4.89%202%204%202.89%204%204V20C4%2021.11%204.89%2022%206%2022H13.81C13.28%2021.09%2013%2020.05%2013%2019C13%2018.67%2013.03%2018.33%2013.08%2018H6V16H13.81C14.27%2015.2%2014.91%2014.5%2015.68%2014H6V12H18V13.08C18.33%2013.03%2018.67%2013%2019%2013S19.67%2013.03%2020%2013.08V8L14%202M13%209V3.5L18.5%209H13M18%2015V18H15V20H18V23H20V20H23V18H20V15H18Z'%20/%3e%3c/svg%3e",hde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M14,2H6A2,2%200%200,0%204,4V20A2,2%200%200,0%206,22H18A2,2%200%200,0%2020,20V8L14,2M13.5,16V19H10.5V16H8L12,12L16,16H13.5M13,9V3.5L18.5,9H13Z'%20/%3e%3c/svg%3e",vde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M6.1,10L4,18V8H21A2,2%200%200,0%2019,6H12L10,4H4A2,2%200%200,0%202,6V18A2,2%200%200,0%204,20H19C19.9,20%2020.7,19.4%2020.9,18.5L23.2,10H6.1M19,18H6L7.6,12H20.6L19,18Z'%20/%3e%3c/svg%3e",pde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M14,14H19V16H16V19H14V14M5,14H10V19H8V16H5V14M8,5H10V10H5V8H8V5M19,8V10H14V5H16V8H19Z'%20/%3e%3c/svg%3e",gde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17V19H5V14H7V17H10Z'%20/%3e%3c/svg%3e",yde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z'%20/%3e%3c/svg%3e",_de="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M5%206C3.9%206%203%206.9%203%208S3.9%2010%205%2010%207%209.11%207%208%206.11%206%205%206M12%204C10.9%204%2010%204.89%2010%206S10.9%208%2012%208%2014%207.11%2014%206%2013.11%204%2012%204M19%202C17.9%202%2017%202.9%2017%204S17.9%206%2019%206%2021%205.11%2021%204%2020.11%202%2019%202M3.5%2011C2.67%2011%202%2011.67%202%2012.5V17H3V22H7V17H8V12.5C8%2011.67%207.33%2011%206.5%2011H3.5M10.5%209C9.67%209%209%209.67%209%2010.5V15H10V20H14V15H15V10.5C15%209.67%2014.33%209%2013.5%209H10.5M17.5%207C16.67%207%2016%207.67%2016%208.5V13H17V18H21V13H22V8.5C22%207.67%2021.33%207%2020.5%207H17.5Z'%20/%3e%3c/svg%3e",wde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M21,17H7V3H21M21,1H7A2,2%200%200,0%205,3V17A2,2%200%200,0%207,19H21A2,2%200%200,0%2023,17V3A2,2%200%200,0%2021,1M3,5H1V21A2,2%200%200,0%203,23H19V21H3M15.96,10.29L13.21,13.83L11.25,11.47L8.5,15H19.5L15.96,10.29Z'%20/%3e%3c/svg%3e",bde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M4,6H20V16H4M20,18A2,2%200%200,0%2022,16V6C22,4.89%2021.1,4%2020,4H4C2.89,4%202,4.89%202,6V16A2,2%200%200,0%204,18H0V20H24V18H20Z'%20/%3e%3c/svg%3e",xde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19%203H5C3.9%203%203%203.9%203%205V19C3%2020.1%203.9%2021%205%2021H19C20.1%2021%2021%2020.1%2021%2019V5C21%203.9%2020.1%203%2019%203M7%207H9V9H7V7M7%2011H9V13H7V11M7%2015H9V17H7V15M17%2017H11V15H17V17M17%2013H11V11H17V13M17%209H11V7H17V9Z'%20/%3e%3c/svg%3e",Cde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17%207L15.59%208.41L18.17%2011H8V13H18.17L15.59%2015.58L17%2017L22%2012M4%205H12V3H4C2.9%203%202%203.9%202%205V19C2%2020.1%202.9%2021%204%2021H12V19H4V5Z'%20/%3e%3c/svg%3e",Sde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M9,2A7,7%200%200,1%2016,9C16,10.57%2015.5,12%2014.61,13.19L15.41,14H16L22,20L20,22L14,16V15.41L13.19,14.61C12,15.5%2010.57,16%209,16A7,7%200%200,1%202,9A7,7%200%200,1%209,2M5,8V10H13V8H5Z'%20/%3e%3c/svg%3e",Ede="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M9,2A7,7%200%200,1%2016,9C16,10.57%2015.5,12%2014.61,13.19L15.41,14H16L22,20L20,22L14,16V15.41L13.19,14.61C12,15.5%2010.57,16%209,16A7,7%200%200,1%202,9A7,7%200%200,1%209,2M8,5V8H5V10H8V13H10V10H13V8H10V5H8Z'%20/%3e%3c/svg%3e",Bde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M9.5,3A6.5,6.5%200%200,1%2016,9.5C16,11.11%2015.41,12.59%2014.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41%2011.11,16%209.5,16A6.5,6.5%200%200,1%203,9.5A6.5,6.5%200%200,1%209.5,3M9.5,5C7,5%205,7%205,9.5C5,12%207,14%209.5,14C12,14%2014,12%2014,9.5C14,7%2012,5%209.5,5Z'%20/%3e%3c/svg%3e",kde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z'%20/%3e%3c/svg%3e",Tde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,11C19,12.19%2018.66,13.3%2018.1,14.28L16.87,13.05C17.14,12.43%2017.3,11.74%2017.3,11H19M15,11.16L9,5.18V5A3,3%200%200,1%2012,2A3,3%200%200,1%2015,5V11L15,11.16M4.27,3L21,19.73L19.73,21L15.54,16.81C14.77,17.27%2013.91,17.58%2013,17.72V21H11V17.72C7.72,17.23%205,14.41%205,11H6.7C6.7,14%209.24,16.1%2012,16.1C12.81,16.1%2013.6,15.91%2014.31,15.58L12.65,13.92L12,14A3,3%200%200,1%209,11V10.28L3,4.27L4.27,3Z'%20/%3e%3c/svg%3e",Ide="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M12,2A3,3%200%200,1%2015,5V11A3,3%200%200,1%2012,14A3,3%200%200,1%209,11V5A3,3%200%200,1%2012,2M19,11C19,14.53%2016.39,17.44%2013,17.93V21H11V17.93C7.61,17.44%205,14.53%205,11H7A5,5%200%200,0%2012,16A5,5%200%200,0%2017,11H19Z'%20/%3e%3c/svg%3e",Fde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M11.15,15.18L9.73,13.77L11.15,12.35L12.56,13.77L13.97,12.35L12.56,10.94L13.97,9.53L15.39,10.94L16.8,9.53L13.97,6.7L6.9,13.77L9.73,16.6L11.15,15.18M3.08,19L6.2,15.89L4.08,13.77L13.97,3.87L16.1,6L17.5,4.58L16.1,3.16L17.5,1.75L21.75,6L20.34,7.4L18.92,6L17.5,7.4L19.63,9.53L9.73,19.42L7.61,17.3L3.08,21.84V19Z'%20/%3e%3c/svg%3e",Pde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M20.71,7.04C21.1,6.65%2021.1,6%2020.71,5.63L18.37,3.29C18,2.9%2017.35,2.9%2016.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z'%20/%3e%3c/svg%3e",Dde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z'%20/%3e%3c/svg%3e",Ude="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M4,4V10L4,14H6V10H8L13.41,15.41L9.83,19L11.24,20.41L14.83,16.83L18.41,20.41L19.82,19L16.24,15.41L19.82,11.83L18.41,10.41L14.83,14L10.83,10H11A3,3%200%200,0%2014,7A3,3%200%200,0%2011,4H4M6,6H11A1,1%200%200,1%2012,7A1,1%200%200,1%2011,8H6V6Z'%20/%3e%3c/svg%3e",Rde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M18,3H6V7H18M19,12A1,1%200%200,1%2018,11A1,1%200%200,1%2019,10A1,1%200%200,1%2020,11A1,1%200%200,1%2019,12M16,19H8V14H16M19,8H5A3,3%200%200,0%202,11V17H6V21H18V17H22V11A3,3%200%200,0%2019,8Z'%20/%3e%3c/svg%3e",Nde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17.65,6.35C16.2,4.9%2014.21,4%2012,4A8,8%200%200,0%204,12A8,8%200%200,0%2012,20C15.73,20%2018.84,17.45%2019.73,14H17.65C16.83,16.33%2014.61,18%2012,18A6,6%200%200,1%206,12A6,6%200%200,1%2012,6C13.66,6%2015.14,6.69%2016.22,7.78L13,11H20V4L17.65,6.35Z'%20/%3e%3c/svg%3e",Vde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M4,1H20A1,1%200%200,1%2021,2V6A1,1%200%200,1%2020,7H4A1,1%200%200,1%203,6V2A1,1%200%200,1%204,1M4,9H20A1,1%200%200,1%2021,10V14A1,1%200%200,1%2020,15H4A1,1%200%200,1%203,14V10A1,1%200%200,1%204,9M4,17H20A1,1%200%200,1%2021,18V22A1,1%200%200,1%2020,23H4A1,1%200%200,1%203,22V18A1,1%200%200,1%204,17M9,5H10V3H9V5M9,13H10V11H9V13M9,21H10V19H9V21M5,3V5H7V3H5M5,11V13H7V11H5M5,19V21H7V19H5Z'%20/%3e%3c/svg%3e",Lde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M18,16.08C17.24,16.08%2016.56,16.38%2016.04,16.85L8.91,12.7C8.96,12.47%209,12.24%209,12C9,11.76%208.96,11.53%208.91,11.3L15.96,7.19C16.5,7.69%2017.21,8%2018,8A3,3%200%200,0%2021,5A3,3%200%200,0%2018,2A3,3%200%200,0%2015,5C15,5.24%2015.04,5.47%2015.09,5.7L8.04,9.81C7.5,9.31%206.79,9%206,9A3,3%200%200,0%203,12A3,3%200%200,0%206,15C6.79,15%207.5,14.69%208.04,14.19L15.16,18.34C15.11,18.55%2015.08,18.77%2015.08,19C15.08,20.61%2016.39,21.91%2018,21.91C19.61,21.91%2020.92,20.61%2020.92,19A2.92,2.92%200%200,0%2018,16.08Z'%20/%3e%3c/svg%3e",Mde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z'%20/%3e%3c/svg%3e",Ode="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17,10.5V7A1,1%200%200,0%2016,6H4A1,1%200%200,0%203,7V17A1,1%200%200,0%204,18H16A1,1%200%200,0%2017,17V13.5L21,17.5V6.5L17,10.5M14,13H11V16H9V13H6V11H9V8H11V11H14V13Z'%20/%3e%3c/svg%3e",Hde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M6,19A5,5%200%200,1%201,14A5,5%200%200,1%206,9C7,6.65%209.3,5%2012,5C15.43,5%2018.24,7.66%2018.5,11.03L19,11A4,4%200%200,1%2023,15A4,4%200%200,1%2019,19H6M19,13H17V12A5,5%200%200,0%2012,7C9.5,7%207.45,8.82%207.06,11.19C6.73,11.07%206.37,11%206,11A3,3%200%200,0%203,14A3,3%200%200,0%206,17H19A2,2%200%200,0%2021,15A2,2%200%200,0%2019,13Z'%20/%3e%3c/svg%3e",$de="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M16.36,14C16.44,13.34%2016.5,12.68%2016.5,12C16.5,11.32%2016.44,10.66%2016.36,10H19.74C19.9,10.64%2020,11.31%2020,12C20,12.69%2019.9,13.36%2019.74,14M14.59,19.56C15.19,18.45%2015.65,17.25%2015.97,16H18.92C17.96,17.65%2016.43,18.93%2014.59,19.56M14.34,14H9.66C9.56,13.34%209.5,12.68%209.5,12C9.5,11.32%209.56,10.65%209.66,10H14.34C14.43,10.65%2014.5,11.32%2014.5,12C14.5,12.68%2014.43,13.34%2014.34,14M12,19.96C11.17,18.76%2010.5,17.43%2010.09,16H13.91C13.5,17.43%2012.83,18.76%2012,19.96M8,8H5.08C6.03,6.34%207.57,5.06%209.4,4.44C8.8,5.55%208.35,6.75%208,8M5.08,16H8C8.35,17.25%208.8,18.45%209.4,19.56C7.57,18.93%206.03,17.65%205.08,16M4.26,14C4.1,13.36%204,12.69%204,12C4,11.31%204.1,10.64%204.26,10H7.64C7.56,10.66%207.5,11.32%207.5,12C7.5,12.68%207.56,13.34%207.64,14M12,4.03C12.83,5.23%2013.5,6.57%2013.91,8H10.09C10.5,6.57%2011.17,5.23%2012,4.03M18.92,8H15.97C15.65,6.75%2015.19,5.55%2014.59,4.44C16.43,5.07%2017.96,6.34%2018.92,8M12,2C6.47,2%202,6.5%202,12A10,10%200%200,0%2012,22A10,10%200%200,0%2022,12A10,10%200%200,0%2012,2Z'%20/%3e%3c/svg%3e",Qde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M12.04%202C6.58%202%202.13%206.45%202.13%2011.91C2.13%2013.66%202.59%2015.36%203.45%2016.86L2.05%2022L7.3%2020.62C8.75%2021.41%2010.38%2021.83%2012.04%2021.83C17.5%2021.83%2021.95%2017.38%2021.95%2011.92C21.95%209.27%2020.92%206.78%2019.05%204.91C17.18%203.03%2014.69%202%2012.04%202M12.05%203.67C14.25%203.67%2016.31%204.53%2017.87%206.09C19.42%207.65%2020.28%209.72%2020.28%2011.92C20.28%2016.46%2016.58%2020.15%2012.04%2020.15C10.56%2020.15%209.11%2019.76%207.85%2019L7.55%2018.83L4.43%2019.65L5.26%2016.61L5.06%2016.29C4.24%2015%203.8%2013.47%203.8%2011.91C3.81%207.37%207.5%203.67%2012.05%203.67M8.53%207.33C8.37%207.33%208.1%207.39%207.87%207.64C7.65%207.89%207%208.5%207%209.71C7%2010.93%207.89%2012.1%208%2012.27C8.14%2012.44%209.76%2014.94%2012.25%2016C12.84%2016.27%2013.3%2016.42%2013.66%2016.53C14.25%2016.72%2014.79%2016.69%2015.22%2016.63C15.7%2016.56%2016.68%2016.03%2016.89%2015.45C17.1%2014.87%2017.1%2014.38%2017.04%2014.27C16.97%2014.17%2016.81%2014.11%2016.56%2014C16.31%2013.86%2015.09%2013.26%2014.87%2013.18C14.64%2013.1%2014.5%2013.06%2014.31%2013.3C14.15%2013.55%2013.67%2014.11%2013.53%2014.27C13.38%2014.44%2013.24%2014.46%2013%2014.34C12.74%2014.21%2011.94%2013.95%2011%2013.11C10.26%2012.45%209.77%2011.64%209.62%2011.39C9.5%2011.15%209.61%2011%209.73%2010.89C9.84%2010.78%2010%2010.6%2010.1%2010.45C10.23%2010.31%2010.27%2010.2%2010.35%2010.04C10.43%209.87%2010.39%209.73%2010.33%209.61C10.27%209.5%209.77%208.26%209.56%207.77C9.36%207.29%209.16%207.35%209%207.34C8.86%207.34%208.7%207.33%208.53%207.33Z'%20/%3e%3c/svg%3e",Gde="5.2.18",uM={version:Gde},zde=""+new URL("images/nav_drawer_banner-B2zCGthx.png",import.meta.url).href,H_=""+new URL("images/logo-Du9HqkeA.png",import.meta.url).href,No=M(localStorage.getItem("desktopSessionToken")||null),Ll=M(JSON.parse(localStorage.getItem("desktopPermissions")||"[]")),Ml=M(localStorage.getItem("desktopIsAdmin")==="true"),lf=M(localStorage.getItem("desktopUserName")||null),uf=M(localStorage.getItem("desktopUserId")?parseInt(localStorage.getItem("desktopUserId")):null),cf=M(JSON.parse(localStorage.getItem("desktopFeatures")||"[]")),Nd=M(localStorage.getItem("googleVerified")==="true"),Th=M(localStorage.getItem("googleUserId")?parseInt(localStorage.getItem("googleUserId")):null),C0=M(localStorage.getItem("googleUserName")||null),Kde=ee(()=>!!No.value);ee(()=>Nd.value);const Wde=ee(()=>Nd.value?No.value?"complete":"passcode":"google"),Cc=M(!1),Vd=M(null);We([No,Ll,Ml,lf,uf,cf,Nd,Th,C0],()=>{No.value?(localStorage.setItem("desktopSessionToken",No.value),localStorage.setItem("desktopPermissions",JSON.stringify(Ll.value)),localStorage.setItem("desktopIsAdmin",Ml.value.toString()),localStorage.setItem("desktopUserName",lf.value||""),localStorage.setItem("desktopUserId",uf.value?.toString()||""),localStorage.setItem("desktopFeatures",JSON.stringify(cf.value))):(localStorage.removeItem("desktopSessionToken"),localStorage.removeItem("desktopPermissions"),localStorage.removeItem("desktopIsAdmin"),localStorage.removeItem("desktopUserName"),localStorage.removeItem("desktopUserId"),localStorage.removeItem("desktopFeatures")),Nd.value?(localStorage.setItem("googleVerified","true"),localStorage.setItem("googleUserId",Th.value?.toString()||""),localStorage.setItem("googleUserName",C0.value||"")):(localStorage.removeItem("googleVerified"),localStorage.removeItem("googleUserId"),localStorage.removeItem("googleUserName"))},{deep:!0});let R3=!1;function $_(e=dt){R3||(R3=!0,e.interceptors.request.use(t=>(No.value&&(t.headers["x-session-token"]=No.value),t),t=>Promise.reject(t)),e.interceptors.response.use(t=>t,t=>{if(t.response?.status===419){console.warn("Desktop session invalidated - permissions may have been updated");const n=t.response?.data?.message||"Your permissions have been updated. Please log in again.";alert(n),Ih()}return Promise.reject(t)}))}async function jde(e){Cc.value=!0,Vd.value=null;try{const t=await e.dispatch("auth/signInWithGoogle"),n=e.getters["auth/currentUser"];if(!n||!n.email)throw new Error("Google sign-in succeeded but no email returned");return{success:!0,email:n.email,displayName:n.displayName,isFirstTime:t}}catch(t){throw Vd.value=t.message||"Google sign-in failed",t}finally{Cc.value=!1}}async function qde(e,t=null){Cc.value=!0,Vd.value=null;try{const n=await dt.post("/desktop/auth/verify-google",{email:e,idToken:t});return n.data.success&&n.data.requiresPasscode?(Nd.value=!0,Th.value=n.data.userId,C0.value=n.data.userName,{success:!0,requiresPasscode:!0,userId:n.data.userId,userName:n.data.userName}):n.data}catch(n){const a=n.response?.data?.message||n.response?.data?.error||n.message;if(Vd.value=a,n.response?.status===404)return{success:!1,requiresPasscode:!1,error:a};throw n}finally{Cc.value=!1}}async function Yde(e,t=null){Cc.value=!0,Vd.value=null;const n=t||Th.value;try{const a=await dt.post("/desktop/auth/login",{passcode:e,userId:n});if(a.data.success)return No.value=a.data.sessionToken,Ll.value=a.data.permissions||[],Ml.value=a.data.isAdmin||!1,lf.value=a.data.userName||null,uf.value=a.data.userId||null,cf.value=a.data.features||[],{success:!0,isAdmin:a.data.isAdmin,userName:a.data.userName,permissions:a.data.permissions};throw new Error(a.data.error||"Login failed")}catch(a){throw Vd.value=a.response?.data?.error||a.message||"Login failed",a}finally{Cc.value=!1}}async function Xde(){if(!No.value)return{valid:!1};Cc.value=!0;try{const e=await dt.get("/desktop/auth/session",{headers:{"x-session-token":No.value}});return e.data.valid?(Ll.value=e.data.permissions||[],Ml.value=e.data.isAdmin||!1,lf.value=e.data.userName||null,uf.value=e.data.userId||null,cf.value=e.data.features||[],{valid:!0,...e.data}):(Ih(),{valid:!1})}catch(e){return e.response?.status===401&&Ih(),{valid:!1,error:e.message}}finally{Cc.value=!1}}async function Jde(e,t=!0){try{No.value&&await dt.post("/desktop/auth/logout",{},{headers:{"x-session-token":No.value}})}catch(n){console.error("Desktop logout error:",n)}finally{if(Ih(),Kk(),t&&e)try{await e.dispatch("auth/signOut")}catch(n){console.error("Google sign-out error:",n)}}}function Ih(){No.value=null,Ll.value=[],Ml.value=!1,lf.value=null,uf.value=null,cf.value=[],Vd.value=null}function Kk(){Nd.value=!1,Th.value=null,C0.value=null}function Zde(){Ih(),Kk()}function eAe(e){No.value=e.sessionToken,Ll.value=e.permissions||[],Ml.value=e.isAdmin||!1,lf.value=e.userName||null,uf.value=e.userId||null,cf.value=e.features||[],e.googleVerified!==void 0&&(Nd.value=e.googleVerified)}function N3(e){return Ml.value?!0:Ll.value.includes(e)}function V3(e){return Ml.value?!0:e.some(t=>Ll.value.includes(t))}function L3(e){return Ml.value?!0:e.every(t=>Ll.value.includes(t))}function M3(e){if(Ml.value)return!0;const t=`${e}.`;return Ll.value.some(n=>!n||typeof n!="string"?!1:n===e?!0:n.startsWith(t))}function Jh(){const e=ea(),t=ee(()=>e?.getters["auth/currentUser"]),n=ee(()=>e?.getters["auth/isLoading"]),a=ee(()=>e?.getters["auth/redirectInProgress"]),r=ee(()=>e?.getters["auth/isAuthenticated"]);return $_(),{sessionToken:ee(()=>No.value),permissions:ee(()=>Ll.value),isAdmin:ee(()=>Ml.value),userName:ee(()=>lf.value),userId:ee(()=>uf.value),features:ee(()=>cf.value),isAuthenticated:Kde,googleUser:t,googleLoading:n,googleRedirectInProgress:a,isGoogleSignedIn:r,isGoogleVerified:ee(()=>Nd.value),googleVerifiedUserId:ee(()=>Th.value),googleVerifiedUserName:ee(()=>C0.value),authStep:Wde,sessionLoading:ee(()=>Cc.value),sessionError:ee(()=>Vd.value),signInWithGoogle:()=>jde(e),verifyGoogleUser:(s,o)=>qde(s,o),loginWithPasscode:(s,o)=>Yde(s,o),verifyDesktopSession:()=>Xde(),logoutDesktop:(s=!0)=>Jde(e,s),clearDesktopSession:Ih,clearGoogleVerification:Kk,resetAllAuthState:Zde,setDesktopSession:eAe,hasPermission:s=>ee(()=>N3(s)),hasAnyPermission:s=>ee(()=>V3(s)),hasAllPermissions:s=>ee(()=>L3(s)),hasFeatureAccess:s=>ee(()=>M3(s)),checkPermission:N3,checkAnyPermission:V3,checkAllPermissions:L3,checkFeatureAccess:M3,setupDesktopSessionInterceptors:$_,store:e}}function Zh(){const e=Ka(),t=e?Jh():null,n=e?null:Xh(),a=ee(()=>e&&t?t.permissions.value||[]:!e&&n?n.permissions.value||[]:[]),r=ee(()=>e&&t?t.isAdmin.value||!1:!e&&n&&n.isAdmin.value||!1),s=ee(()=>e&&t?t.features.value||[]:!e&&n?n.features.value||[]:[]),o=g=>ee(()=>r.value?!0:a.value.includes(g)),i=g=>ee(()=>r.value||!g||g.length===0?!0:g.some(w=>a.value.includes(w))),c=g=>ee(()=>r.value||!g||g.length===0?!0:g.every(w=>a.value.includes(w))),A=g=>ee(()=>{if(!g)return!1;const w=s.value.find(x=>x&&x.id===g);return w&&w.adminOnly?r.value:r.value?!0:!a.value||!Array.isArray(a.value)?!1:a.value.some(x=>!x||typeof x!="string"?!1:x===g?!0:x.startsWith(`${g}.`))}),d=ee(()=>{if(r.value)return s.value.map(w=>w.id);const g=new Set;return a.value.forEach(w=>{const[b]=w.split(".");g.add(b)}),Array.from(g)});return{permissions:a,isAdmin:r,features:s,accessibleFeatures:d,hasPermission:o,hasAnyPermission:i,hasAllPermissions:c,hasFeatureAccess:A,getFeatureActions:g=>ee(()=>{if(r.value){const w=s.value.find(b=>b.id===g);return w?w.actions.map(b=>b.action):[]}return a.value.filter(w=>w.startsWith(`${g}.`)).map(w=>w.split(".")[1])}),canPerformAction:(g,w)=>ee(()=>r.value?!0:a.value.includes(`${g}.${w}`)),checkPermission:g=>r.value?!0:a.value.includes(g),checkAnyPermission:g=>r.value||!g||g.length===0?!0:g.some(w=>a.value.includes(w)),checkFeatureAccess:g=>{if(!a.value||!Array.isArray(a.value))return!1;const w=s.value.find(x=>x&&x.id===g);return w&&w.adminOnly?r.value:r.value?!0:a.value.some(x=>!x||typeof x!="string"?!1:x===g?!0:x.startsWith(`${g}.`))}}}const Xt=(e,t)=>{const n=e.__vccOpts||e;for(const[a,r]of t)n[a]=r;return n},tAe={class:"nav-icon-container"},nAe=["src"],aAe={class:"nav-icon-container"},rAe=["src"],sAe={class:"nav-footer"},oAe={class:"version-display"},iAe={__name:"side-nav",props:{collapsed:{type:Boolean,default:!1}},setup(e){const n=Ef(e).collapsed,a=uM.version,{isAdmin:r,permissions:s,features:o}=Zh(),i=Ka(),c=i?Jh():null,A=i?null:Xh();We([s,r],([v,y])=>{},{immediate:!0,deep:!0}),cn(async()=>{if(i&&c&&c.sessionToken.value)try{await c.verifyDesktopSession(),console.log("[SideNav] Desktop session verified, permissions updated")}catch(v){console.error("[SideNav] Failed to verify desktop session:",v)}else if(!i&&A&&A.sessionToken.value)try{await A.verifySession(),console.log("[SideNav] Web session verified, permissions updated")}catch(v){console.error("[SideNav] Failed to verify web session:",v)}});const d=[{type:"divider"},{type:"subheader",title:"Clinic"},{title:"Home",value:1,icon:"custom-home",route:"/home",feature:"home"},{title:"Patients",value:2,icon:"custom-account-multiple",route:"/patients",feature:"patients"},{title:"Tasks",value:6,icon:"custom-list-box",route:"/tasks",feature:"tasks"},{title:"Research",value:5,icon:"custom-book-open-page-variant",route:"/research",feature:"research"},{title:"Reports",value:8,icon:"mdi-chart-line",route:"/reports",feature:"reports"},{type:"divider"},{type:"subheader",title:"Finances"},{title:"Payments",value:7,icon:"mdi-currency-inr",route:"/payments",feature:"billing"},{type:"divider"},{type:"subheader",title:"Pharmacy"},{title:"Queue",value:9,icon:"mdi-pill",route:"/pharmacy/queue",feature:"pharmacy.queue"},{title:"Inventory",value:10,icon:"mdi-package-variant",route:"/pharmacy/inventory",feature:"pharmacy.inventory"},{title:"Purchase",value:12,icon:"mdi-cart",route:"/pharmacy/purchase",feature:"pharmacy.purchase"},{title:"Reports",value:11,icon:"mdi-chart-line",route:"/pharmacy/reports",feature:"pharmacy.reports"},{type:"divider"},{type:"subheader",title:"Setup"},{title:"Admin",value:3,icon:"custom-account-cog",route:"/admin",requiresAdmin:!0},{title:"Data",value:4,icon:"custom-file-arrow-up-down",route:"/data",feature:"data"}],f=ee(()=>{const v=s.value||[],y=r.value,g=o.value||[],w=()=>y?!0:!v||!Array.isArray(v)?!1:v.some(S=>S&&typeof S=="string"&&S.startsWith("admin.")),b=S=>{const E=g.find(C=>C&&C.id===S);return E&&E.adminOnly?y:y?!0:!v||!Array.isArray(v)?!1:v.some(C=>!C||typeof C!="string"?!1:C===S?!0:C.startsWith(`${S}.`))},x=S=>S.type==="divider"||S.type==="subheader"?!1:S.requiresAdmin?S.route==="/admin"?w():y:S.permission?y?!0:v.includes(S.permission):S.feature?b(S.feature):!0,T=[];let U={divider:null,subheader:null,items:[]};for(let S=0;S<d.length;S++){const E=d[S];E.type==="divider"?(U.items.some(x)&&(U.divider&&T.push(U.divider),U.subheader&&T.push(U.subheader),U.items.forEach(P=>{x(P)&&T.push(P)})),U={divider:E,subheader:null,items:[]}):E.type==="subheader"?U.subheader=E:U.items.push(E)}return U.items.some(x)&&(U.divider&&T.push(U.divider),U.subheader&&T.push(U.subheader),U.items.forEach(S=>{x(S)&&T.push(S)})),T}),m=v=>{console.log("Navigation item clicked:",v.title);const y=event.currentTarget;y&&(y.classList.add("nav-ripple"),setTimeout(()=>{y.classList.remove("nav-ripple")},600))},h=v=>{const y=v.replace("custom-","");try{return new URL(Object.assign({"../assets/icons/account-cancel.svg":Qce,"../assets/icons/account-check.svg":Gce,"../assets/icons/account-clock.svg":zce,"../assets/icons/account-cog.svg":Kce,"../assets/icons/account-multiple.svg":Wce,"../assets/icons/account.svg":jce,"../assets/icons/bell-alert.svg":qce,"../assets/icons/bell-check.svg":Yce,"../assets/icons/book-open-page-variant.svg":Xce,"../assets/icons/calculator-variant.svg":Jce,"../assets/icons/cellphone.svg":Zce,"../assets/icons/chart-line-variant.svg":ede,"../assets/icons/chevron-left-circle.svg":tde,"../assets/icons/chevron-right-circle.svg":nde,"../assets/icons/clipboard-pulse.svg":ade,"../assets/icons/clipboard-text-outline.svg":rde,"../assets/icons/close-thick.svg":sde,"../assets/icons/close.svg":ode,"../assets/icons/cloud-arrow-down.svg":ide,"../assets/icons/content-copy.svg":lde,"../assets/icons/delete.svg":ude,"../assets/icons/email.svg":cde,"../assets/icons/file-arrow-up-down.svg":dde,"../assets/icons/file-cabinet.svg":Ade,"../assets/icons/file-document-edit-outline.svg":fde,"../assets/icons/file-document-plus.svg":mde,"../assets/icons/file-upload.svg":hde,"../assets/icons/folder-open-outline.svg":vde,"../assets/icons/fullscreen-exit.svg":pde,"../assets/icons/fullscreen.svg":gde,"../assets/icons/home.svg":yde,"../assets/icons/human-queue.svg":_de,"../assets/icons/image-multiple-outline.svg":wde,"../assets/icons/laptop.svg":bde,"../assets/icons/list-box.svg":xde,"../assets/icons/logout.svg":Cde,"../assets/icons/magnify-minus.svg":Sde,"../assets/icons/magnify-plus.svg":Ede,"../assets/icons/magnify.svg":Bde,"../assets/icons/menu.svg":kde,"../assets/icons/microphone-off.svg":Tde,"../assets/icons/microphone.svg":Ide,"../assets/icons/needle.svg":Fde,"../assets/icons/pencil.svg":Pde,"../assets/icons/plus.svg":Dde,"../assets/icons/prescription.svg":Ude,"../assets/icons/printer.svg":Rde,"../assets/icons/refresh.svg":Nde,"../assets/icons/server.svg":Vde,"../assets/icons/share-variant.svg":Lde,"../assets/icons/upload.svg":Mde,"../assets/icons/video-plus.svg":Ode,"../assets/icons/weather-cloudy.svg":Hde,"../assets/icons/web.svg":$de,"../assets/icons/whatsapp.svg":Qde})[`../assets/icons/${y}.svg`],import.meta.url).href}catch(g){return console.warn(`Failed to load icon: ${y}.svg`,g),""}};return(v,y)=>{const g=I("v-img"),w=I("v-divider"),b=I("v-list-subheader"),x=I("v-icon"),T=I("v-list-item-title"),U=I("v-list-item"),k=I("v-tooltip"),S=I("v-list"),E=I("v-navigation-drawer");return R(),ve(E,{elevation:1,width:150,rail:Oe(n),"rail-width":80,permanent:"",image:Oe(zde),app:"",class:"nav-drawer-with-opacity"},hh({append:u(()=>[p("div",sAe,[p("div",oAe," v"+q(Oe(a)),1)])]),default:u(()=>[l(S,{density:"compact",nav:"",lines:!1,class:"interactive-nav-list"},{default:u(()=>[(R(!0),me(ze,null,Wt(f.value,C=>(R(),me(ze,{key:C.value||C.title},[C.type==="divider"?(R(),ve(w,{key:0,divider:"",class:"nav-divider"})):_e("",!0),C.type==="subheader"?(R(),ve(b,{key:1,class:"nav-subheader"},{default:u(()=>[O(q(C.title),1)]),_:2},1024)):_e("",!0),C.type!=="divider"&&C.type!=="subheader"?(R(),me(ze,{key:2},[Oe(n)?(R(),ve(k,{key:0,location:"right","open-delay":200},{activator:u(({props:P})=>[l(U,Fe({ref_for:!0},P,{to:C.route,class:"nav-item-interactive",onClick:F=>m(C)}),{prepend:u(()=>[p("div",tAe,[C.icon.startsWith("custom-")?(R(),ve(x,{key:1,size:"large",class:"nav-icon"},{default:u(()=>[p("img",{src:h(C.icon),alt:""},null,8,nAe)]),_:2},1024)):(R(),ve(x,{key:0,size:"large",icon:C.icon,class:"nav-icon"},null,8,["icon"]))])]),default:u(()=>[l(T,{class:"font-weight-bold nav-title"},{default:u(()=>[O(q(C.title),1)]),_:2},1024)]),_:2},1040,["to","onClick"])]),default:u(()=>[p("span",null,q(C.title),1)]),_:2},1024)):(R(),ve(U,{key:1,to:C.route,class:"nav-item-interactive",onClick:P=>m(C)},{prepend:u(()=>[p("div",aAe,[C.icon.startsWith("custom-")?(R(),ve(x,{key:1,size:"large",class:"nav-icon"},{default:u(()=>[p("img",{src:h(C.icon),alt:""},null,8,rAe)]),_:2},1024)):(R(),ve(x,{key:0,size:"large",icon:C.icon,class:"nav-icon"},null,8,["icon"]))])]),default:u(()=>[l(T,{class:"font-weight-bold nav-title"},{default:u(()=>[O(q(C.title),1)]),_:2},1024)]),_:2},1032,["to","onClick"]))],64)):_e("",!0)],64))),128))]),_:1})]),_:2},[Oe(n)?{name:"prepend",fn:u(()=>[l(g,{src:Oe(H_),class:"mb-2 mt-4",height:50,contain:""},null,8,["src"])]),key:"1"}:{name:"prepend",fn:u(()=>[l(g,{src:Oe(H_),class:"mb-0 mt-3",height:60,contain:""},null,8,["src"])]),key:"0"}]),1032,["rail","image"])}}},lAe=Xt(iAe,[["__scopeId","data-v-90958e56"]]),uAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17,10.5V7A1,1%200%200,0%2016,6H4A1,1%200%200,0%203,7V17A1,1%200%200,0%204,18H16A1,1%200%200,0%2017,17V13.5L21,17.5V6.5L17,10.5M14,13H11V16H9V13H6V11H9V8H11V11H14V13Z'%20/%3e%3c/svg%3e",cAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M9,2A7,7%200%200,1%2016,9C16,10.57%2015.5,12%2014.61,13.19L15.41,14H16L22,20L20,22L14,16V15.41L13.19,14.61C12,15.5%2010.57,16%209,16A7,7%200%200,1%202,9A7,7%200%200,1%209,2M5,8V10H13V8H5Z'%20/%3e%3c/svg%3e",dAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M9,2A7,7%200%200,1%2016,9C16,10.57%2015.5,12%2014.61,13.19L15.41,14H16L22,20L20,22L14,16V15.41L13.19,14.61C12,15.5%2010.57,16%209,16A7,7%200%200,1%202,9A7,7%200%200,1%209,2M8,5V8H5V10H8V13H10V10H13V8H10V5H8Z'%20/%3e%3c/svg%3e",AAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M14,14H19V16H16V19H14V14M5,14H10V19H8V16H5V14M8,5H10V10H5V8H8V5M19,8V10H14V5H16V8H19Z'%20/%3e%3c/svg%3e",fAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17V19H5V14H7V17H10Z'%20/%3e%3c/svg%3e",mAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M20%206.91L17.09%204L12%209.09L6.91%204L4%206.91L9.09%2012L4%2017.09L6.91%2020L12%2014.91L17.09%2020L20%2017.09L14.91%2012L20%206.91Z'%20/%3e%3c/svg%3e",hAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17%207L15.59%208.41L18.17%2011H8V13H18.17L15.59%2015.58L17%2017L22%2012M4%205H12V3H4C2.9%203%202%203.9%202%205V19C2%2020.1%202.9%2021%204%2021H12V19H4V5Z'%20/%3e%3c/svg%3e";var K1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cM(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Jx,O3;function vAe(){if(O3)return Jx;O3=1;const e=new Set(["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH"]);return Jx=t=>!e.has(t&&t.code),Jx}var pAe=vAe();const gAe=cM(pAe),Wk="axios-retry";function dM(e){const t=["ERR_CANCELED","ECONNABORTED"];return e.response||!e.code||t.includes(e.code)?!1:gAe(e)}const AM=["get","head","options"],yAe=AM.concat(["put","delete"]);function jk(e){return e.code!=="ECONNABORTED"&&(!e.response||e.response.status===429||e.response.status>=500&&e.response.status<=599)}function _Ae(e){return e.config?.method?jk(e)&&AM.indexOf(e.config.method)!==-1:!1}function fM(e){return e.config?.method?jk(e)&&yAe.indexOf(e.config.method)!==-1:!1}function mM(e){return dM(e)||fM(e)}function qk(e=void 0){const t=e?.response?.headers["retry-after"];if(!t)return 0;let n=(Number(t)||0)*1e3;return n===0&&(n=(new Date(t).valueOf()||0)-Date.now()),Math.max(0,n)}function wAe(e=0,t=void 0){return Math.max(0,qk(t))}function bAe(e=0,t=void 0,n=100){const a=2**e*n,r=Math.max(a,qk(t)),s=r*.2*Math.random();return r+s}function xAe(e=100){return(t=0,n=void 0)=>{const a=t*e;return Math.max(a,qk(n))}}const CAe={retries:3,retryCondition:mM,retryDelay:wAe,shouldResetTimeout:!1,onRetry:()=>{},onMaxRetryTimesExceeded:()=>{},validateResponse:null};function SAe(e,t){return{...CAe,...t,...e[Wk]}}function H3(e,t,n=!1){const a=SAe(e,t||{});return a.retryCount=a.retryCount||0,(!a.lastRequestTime||n)&&(a.lastRequestTime=Date.now()),e[Wk]=a,a}function EAe(e,t){e.defaults.agent===t.agent&&delete t.agent,e.defaults.httpAgent===t.httpAgent&&delete t.httpAgent,e.defaults.httpsAgent===t.httpsAgent&&delete t.httpsAgent}async function BAe(e,t){const{retries:n,retryCondition:a}=e,r=(e.retryCount||0)<n&&a(t);if(typeof r=="object")try{return await r!==!1}catch{return!1}return r}async function kAe(e,t,n,a){t.retryCount+=1;const{retryDelay:r,shouldResetTimeout:s,onRetry:o}=t,i=r(t.retryCount,n);if(EAe(e,a),!s&&a.timeout&&t.lastRequestTime){const c=Date.now()-t.lastRequestTime,A=a.timeout-c-i;if(A<=0)return Promise.reject(n);a.timeout=A}return a.transformRequest=[c=>c],await o(t.retryCount,n,a),a.signal?.aborted?Promise.resolve(e(a)):new Promise(c=>{const A=()=>{clearTimeout(d),c(e(a))},d=setTimeout(()=>{c(e(a)),a.signal?.removeEventListener&&a.signal.removeEventListener("abort",A)},i);a.signal?.addEventListener&&a.signal.addEventListener("abort",A,{once:!0})})}async function TAe(e,t){e.retryCount>=e.retries&&await e.onMaxRetryTimesExceeded(t,e.retryCount)}const Sc=(e,t)=>{const n=e.interceptors.request.use(r=>(H3(r,t,!0),r[Wk]?.validateResponse&&(r.validateStatus=()=>!1),r)),a=e.interceptors.response.use(null,async r=>{const{config:s}=r;if(!s)return Promise.reject(r);const o=H3(s,t);return r.response&&o.validateResponse?.(r.response)?r.response:await BAe(o,r)?kAe(e,o,r,s):(await TAe(o,r),Promise.reject(r))});return{requestInterceptorId:n,responseInterceptorId:a}};Sc.isNetworkError=dM;Sc.isSafeRequestError=_Ae;Sc.isIdempotentRequestError=fM;Sc.isNetworkOrIdempotentRequestError=mM;Sc.exponentialDelay=bAe;Sc.linearDelay=xAe;Sc.isRetryableError=jk;const hM=Cr.create({timeout:15e3,headers:{"Content-Type":"application/json"}});Sc(hM,{retries:3,retryDelay:e=>{const t=Math.pow(2,e-1)*1e3;return console.log(` Tunnel health check retry ${e}, waiting ${t}ms...`),t},retryCondition:e=>{const t=Sc.isNetworkOrIdempotentRequestError(e)||e.code==="ECONNABORTED"||e.response?.status===404||e.response?.status>=500;return t&&console.log(` Will retry due to: ${e.message||e.response?.status}`),t},onRetry:(e,t,n)=>{console.log(` Tunnel health retry attempt ${e} for ${n.url}`)}});const Yc=M("checking"),fi=M("checking"),Zs=M("checking"),Zx=M(!1),cl=M(!1);let ym=null,_m=null,wm=null,wA=null,bA=null,qv=null;function vM(){const{showSnackbar:e}=ra(),t=async(g=0)=>{if(!Ka())return console.log("[connectionStatus] Web mode: Skipping server health check"),Yc.value="connected",!0;const w=Pr("localhost"),b=[w.health.https,w.health.http];for(const x of b)try{console.log(` Checking server: ${x}`);const T=await fetch(x,{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(5e3)});if(!T.ok)throw new Error(`HTTP ${T.status}`);const U=await T.json();if(U.success&&U.status==="ok"&&U.database==="connected")return console.log(" Server connected"),Yc.value="connected",!0}catch(T){if(console.warn(`Server check failed for ${x}:`,T.message),x===b[b.length-1]&&g<3&&T.message.includes("ERR_CONNECTION_REFUSED"))return Yc.value="checking",await new Promise(U=>setTimeout(U,1e3*Math.pow(2,g))),t(g+1)}return Yc.value="disconnected",!1},n=async()=>{if(!Ka())return navigator.onLine?(console.log("[connectionStatus] Web mode: Internet status (navigator.onLine):",navigator.onLine),fi.value="connected",!0):(console.log("[connectionStatus] Web mode: Navigator reports offline"),fi.value="disconnected",!1);if(!navigator.onLine)return console.log(" Navigator reports offline"),fi.value="disconnected",!1;try{if((await fetch("https://www.google.com/favicon.ico",{method:"GET",cache:"no-cache",signal:AbortSignal.timeout(3e3)})).ok)return console.log(" Internet connected"),fi.value="connected",!0}catch(g){console.warn(" Internet check failed:",g.message)}return fi.value="disconnected",!1};let a=0;const r=3,s=async()=>{if(!Ka())return console.log("[connectionStatus] Web mode: Skipping remote access health check"),Zs.value="connected",!0;if(cl.value)return console.log(" Skipping remote check - reconnecting"),!1;const g=Pr("localhost");let w=null,b=!1;try{for(const x of[g.health.https,g.health.http])try{const T=await fetch(x,{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(3e3)});if(T.ok){const U=await T.json();w=U.ngrok?.tunnelUrl,b=U.ngrok?.isReconnecting||!1;break}}catch{}}catch{}if(!w&&qv&&(w=qv),b)return Zs.value="reconnecting",!1;if(!w)return console.log(" No tunnel URL available"),Zs.value="disconnected",a=0,!1;try{console.log(" Checking tunnel health:",w);const x=await hM.get(`${w}/health`);if(x.status===200&&x.data?.success)return console.log(" Remote access connected"),qv=w,Zs.value="connected",a=0,!0;console.warn(" Tunnel health check returned unexpected response:",x.status,x.data)}catch(x){console.warn(" Tunnel health check failed after retries:",x.message)}return a++,console.log(` Health check failed (${a}/${r} failures)`),a>=r?(Zs.value="disconnected",fi.value==="connected"&&!cl.value&&(console.log(` ${r} consecutive failures detected, waiting 5 seconds before auto-reconnect...`),a=0,setTimeout(()=>{!cl.value&&fi.value==="connected"&&(console.log(" Starting auto-reconnect after delay..."),o())},5e3))):console.log(` Possible transient failure (${a}/${r}), will retry on next poll`),!1},o=async()=>{if(!Ka())return console.log("[connectionStatus] Web mode: Skipping auto-reconnect"),!1;if(cl.value)return console.log(" Auto-reconnect already in progress"),!1;if(fi.value!=="connected")return console.log(" No internet - cannot auto-reconnect"),!1;cl.value=!0,Zs.value="reconnecting",console.log(" Auto-reconnecting...");try{const g=Pr("localhost"),w=g.api?.https||`https://localhost:${g.ports?.https||3443}/api`,b=await fetch(`${w}/ngrok/reconnect`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({}),signal:AbortSignal.timeout(5e4)}),x=await b.json();return b.ok&&x.success?(console.log(" Auto-reconnect successful:",x.data?.ngrokTunnelUrl),qv=x.data?.ngrokTunnelUrl,Zs.value="connected",!0):(console.warn(" Auto-reconnect failed:",x.userMessage||x.error),Zs.value="disconnected",e({message:x.userMessage||x.error||"Auto-reconnection failed",color:"error",timeout:8e3}),!1)}catch(g){return console.error(" Auto-reconnect error:",g.message),Zs.value="disconnected",e({message:"Auto-reconnection failed. Please try manually.",color:"error",timeout:6e3}),!1}finally{cl.value=!1}},i=async()=>{if(!Ka())return console.log("[connectionStatus] Web mode: Skipping manual reconnect"),{success:!1,userMessage:"Reconnection not available in web mode"};if(cl.value)return{success:!1,userMessage:"Reconnection already in progress"};cl.value=!0,Zs.value="reconnecting",console.log(" Manual reconnect started");try{const g=Pr("localhost"),w=g.api?.https||`https://localhost:${g.ports?.https||3443}/api`,b=await fetch(`${w}/ngrok/reconnect`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({}),signal:AbortSignal.timeout(5e4)}),x=await b.json();return b.ok&&x.success?(console.log(" Manual reconnect successful:",x.data?.ngrokTunnelUrl),qv=x.data?.ngrokTunnelUrl,Zs.value="connected",{success:!0,tunnelUrl:x.data?.ngrokTunnelUrl,userMessage:x.message}):(console.warn(" Manual reconnect failed:",x.userMessage||x.error),Zs.value="disconnected",{success:!1,error:x.error,userMessage:x.userMessage||"Reconnection failed"})}catch(g){return console.error(" Manual reconnect error:",g.message),Zs.value="disconnected",{success:!1,error:g.message,userMessage:"Connection error. Please try again."}}finally{cl.value=!1}},c=()=>{ym&&clearInterval(ym),n(),wA&&window.removeEventListener("online",wA),bA&&window.removeEventListener("offline",bA),wA=()=>{console.log(" Online event"),n()},bA=()=>{console.log(" Offline event"),fi.value="disconnected"},window.addEventListener("online",wA),window.addEventListener("offline",bA),ym=setInterval(()=>{navigator.onLine&&fi.value==="disconnected"&&n()},3e4)},A=()=>{ym&&(clearInterval(ym),ym=null),wA&&(window.removeEventListener("online",wA),wA=null),bA&&(window.removeEventListener("offline",bA),bA=null)},d=()=>{if(!Ka()){console.log("[connectionStatus] Web mode: Skipping server monitoring"),Yc.value="connected";return}_m&&clearInterval(_m),t(),_m=setInterval(()=>{t()},3e4)};return{serverStatus:Yc,internetStatus:fi,remoteAccessStatus:Zs,isChecking:Zx,isReconnecting:cl,checkAllConnections:async()=>(Zx.value=!0,Yc.value="checking",fi.value="checking",d(),c(),Zx.value=!1,{server:Yc.value==="connected",internet:fi.value==="connected"}),checkServerConnection:t,checkInternetConnection:n,checkRemoteAccessStatus:s,startInternetMonitoring:c,stopInternetMonitoring:A,startServerMonitoring:d,stopServerMonitoring:()=>{_m&&(clearInterval(_m),_m=null)},startRemoteAccessMonitoring:()=>{if(!Ka()){console.log("[connectionStatus] Web mode: Skipping remote access monitoring"),Zs.value="connected";return}wm&&clearTimeout(wm),Zs.value="checking",s();const g=()=>{const w=cl.value?5e3:15e3;wm=setTimeout(async()=>{await s(),g()},w)};g()},stopRemoteAccessMonitoring:()=>{wm&&(clearTimeout(wm),wm=null)},attemptAutoReconnect:o,manualReconnect:i,getNetworkDetails:()=>{try{return{platform:window.process?.type==="renderer"?"electron":"browser",navigator_online:navigator.onLine,connection_type:navigator.connection?.effectiveType||"unknown",user_agent:navigator.userAgent}}catch(g){return{error:g.message}}}}}const IAe={class:"d-flex align-center gap-2"},FAe={class:"chip-text"},PAe={class:"chip-text"},DAe={__name:"SelectorExtension",setup(e){const t=ea(),n=ee(()=>t.state.doctorModule.doctors),a=ee(()=>t.state.clinicModule.clinics),r=M(null),s=M(null),o=async()=>{await t.dispatch("doctorModule/fetchDoctors"),r.value=n.value.find(d=>d.id===t.state.doctorModule.doctorId)||null},i=async()=>{await t.dispatch("clinicModule/fetchClinics"),s.value=a.value.find(d=>d.id===t.state.clinicModule.clinicId)||null};Gl(async()=>{await o(),await i()}),cn(()=>{window.addEventListener("doctor-list-updated",o),window.addEventListener("clinic-list-updated",i)}),zl(()=>{window.removeEventListener("doctor-list-updated",o),window.removeEventListener("clinic-list-updated",i)});const c=d=>{r.value=d,t.commit("doctorModule/setDoctorId",d.id),console.log("Selected doctor:",d.doctorName),window.dispatchEvent(new CustomEvent("doctor-selection-changed",{detail:{doctorId:d.id,doctorName:d.doctorName}}))},A=d=>{s.value=d,t.commit("clinicModule/setClinicId",d.id),console.log("Selected clinic:",d.clinicName),window.dispatchEvent(new CustomEvent("clinic-selection-changed",{detail:{clinicId:d.id,clinicName:d.clinicName}}))};return We(()=>t.state.doctorModule.doctorId,d=>{r.value=n.value.find(f=>f.id===d)||null}),We(()=>t.state.clinicModule.clinicId,d=>{s.value=a.value.find(f=>f.id===d)||null}),We(n,d=>{d&&d.length>0&&(r.value=d.find(f=>f.id===t.state.doctorModule.doctorId)||null)},{deep:!0}),We(a,d=>{d&&d.length>0&&(s.value=d.find(f=>f.id===t.state.clinicModule.clinicId)||null)},{deep:!0}),(d,f)=>{const m=I("v-icon"),h=I("v-chip"),v=I("v-list-item-title"),y=I("v-list-item-subtitle"),g=I("v-list-item"),w=I("v-list"),b=I("v-menu");return R(),me("div",IAe,[l(b,{"offset-y":""},{activator:u(({props:x})=>[l(h,Fe(x,{variant:"outlined",size:"small",class:"selector-chip doctor-chip","prepend-icon":"mdi-stethoscope",color:r.value?"primary":"surface"}),{append:u(()=>[l(m,{size:"small"},{default:u(()=>[...f[0]||(f[0]=[O("mdi-chevron-down",-1)])]),_:1})]),default:u(()=>[p("span",FAe,q(r.value?r.value.doctorName:"Select Doctor"),1)]),_:1},16,["color"])]),default:u(()=>[l(w,{density:"compact","max-width":"300"},{default:u(()=>[(R(!0),me(ze,null,Wt(n.value,x=>(R(),ve(g,{key:x.id,onClick:T=>c(x),class:ct({"bg-primary":r.value&&x.id===r.value.id})},{prepend:u(()=>[l(m,{size:"small"},{default:u(()=>[...f[1]||(f[1]=[O("mdi-stethoscope",-1)])]),_:1})]),default:u(()=>[l(v,null,{default:u(()=>[O(q(x.doctorName),1)]),_:2},1024),l(y,null,{default:u(()=>[O(q(x.doctorSpecialization),1)]),_:2},1024)]),_:2},1032,["onClick","class"]))),128))]),_:1})]),_:1}),l(b,{"offset-y":""},{activator:u(({props:x})=>[l(h,Fe(x,{variant:"outlined",size:"small",class:"selector-chip clinic-chip","prepend-icon":"mdi-hospital-marker",color:s.value?"primary":"surface"}),{append:u(()=>[l(m,{size:"small"},{default:u(()=>[...f[2]||(f[2]=[O("mdi-chevron-down",-1)])]),_:1})]),default:u(()=>[p("span",PAe,q(s.value?s.value.clinicName:"Select Clinic"),1)]),_:1},16,["color"])]),default:u(()=>[l(w,{density:"compact","max-width":"300"},{default:u(()=>[(R(!0),me(ze,null,Wt(a.value,x=>(R(),ve(g,{key:x.id,onClick:T=>A(x),class:ct({"bg-primary":s.value&&x.id===s.value.id})},{prepend:u(()=>[l(m,{size:"small"},{default:u(()=>[...f[3]||(f[3]=[O("mdi-hospital-marker",-1)])]),_:1})]),default:u(()=>[l(v,null,{default:u(()=>[O(q(x.clinicName),1)]),_:2},1024),l(y,null,{default:u(()=>[O(q(x.clinicAddress),1)]),_:2},1024)]),_:2},1032,["onClick","class"]))),128))]),_:1})]),_:1})])}}},UAe=Xt(DAe,[["__scopeId","data-v-07416910"]]),RAe={class:"d-flex align-center"},NAe={__name:"ConnectionStatusIndicator",setup(e){const{serverStatus:t,internetStatus:n,remoteAccessStatus:a,checkAllConnections:r,stopInternetMonitoring:s,startRemoteAccessMonitoring:o,stopRemoteAccessMonitoring:i,getNetworkDetails:c}=vM(),A=M(null),d=ee(()=>({"status-icon--checking":t.value==="checking","status-icon--connected":t.value==="connected","status-icon--disconnected":t.value==="disconnected"})),f=ee(()=>{switch(t.value){case"checking":return"Checking database connection...";case"connected":return"Database connected ";case"disconnected":return"Database disconnected ";default:return"Database status unknown"}}),m=ee(()=>({"status-icon--checking":n.value==="checking","status-icon--connected":n.value==="connected","status-icon--disconnected":n.value==="disconnected"})),h=ee(()=>{switch(n.value){case"checking":return"Checking internet...";case"connected":return"Internet connected ";case"disconnected":return"No internet ";default:return"Internet status unknown"}}),v=ee(()=>({"status-icon--checking":a.value==="checking","status-icon--connected":a.value==="connected","status-icon--disconnected":a.value==="disconnected","status-icon--reconnecting":a.value==="reconnecting","status-icon--error":a.value==="error"})),y=ee(()=>{switch(a.value){case"checking":return"Checking Remote Access Link status...";case"connected":return"Remote Access Link Operational ";case"disconnected":return"Remote Access Link Unavailable ";case"reconnecting":return"Reconnecting...";case"error":return"Remote Access Link Error - Click Reconnect ";default:return"Remote Access Link status unknown"}});return cn(()=>{A.value=c(),console.log("Network details:",A.value),r(),o()}),la(()=>{s(),i()}),(g,w)=>{const b=I("v-icon"),x=I("v-tooltip");return R(),me("div",RAe,[l(x,{text:f.value,location:"bottom"},{activator:u(({props:T})=>[p("div",Fe({class:"mr-3"},T),[l(b,{size:"20",class:ct(d.value)},{default:u(()=>[...w[0]||(w[0]=[O("mdi-database",-1)])]),_:1},8,["class"])],16)]),_:1},8,["text"]),l(x,{text:h.value,location:"bottom"},{activator:u(({props:T})=>[p("div",Fe({class:"mr-3"},T),[l(b,{size:"20",class:ct(m.value)},{default:u(()=>[...w[1]||(w[1]=[O("mdi-wifi",-1)])]),_:1},8,["class"])],16)]),_:1},8,["text"]),l(x,{text:y.value,location:"bottom"},{activator:u(({props:T})=>[p("div",Ql(Kl(T)),[l(b,{size:"20",class:ct(v.value)},{default:u(()=>[...w[2]||(w[2]=[O("mdi-link-variant",-1)])]),_:1},8,["class"])],16)]),_:1},8,["text"])])}}},VAe=Xt(NAe,[["__scopeId","data-v-a12df52e"]]),LAe=async(e,t="both",n=null)=>{try{const a={type:t};n&&(a.doctorId=n);const r=await dt.get(`/upload/patient/${e}/images`,{params:a});if(r.data.success)return{success:!0,data:r.data.data,message:r.data.message};throw new Error(r.data.error||"Failed to fetch patient images")}catch(a){return console.error("Patient images fetch error:",a),{success:!1,error:a.response?.data?.error||a.message||"Failed to fetch patient images"}}},MAe=async(e,t=null)=>{try{const n={};t&&(n.doctorId=t);const a=await dt.get(`/upload/patient/${e}/all`,{params:n});if(a.data.success)return{success:!0,data:a.data.data,message:a.data.message};throw new Error(a.data.error||"Failed to fetch patient uploads")}catch(n){return console.error("Patient uploads fetch error:",n),{success:!1,error:n.response?.data?.error||n.message||"Failed to fetch patient uploads"}}},$3=async(e,t)=>{try{const n=await dt.post("/upload/upload-pdf",{pdfBase64:e,filename:t});if(n.data.success)return{success:!0,data:n.data.data,message:n.data.message};throw new Error(n.data.error||"Upload failed")}catch(n){return console.error("PDF upload error:",n),{success:!1,error:n.response?.data?.error||n.message||"Failed to upload PDF"}}},OAe=async()=>{try{const e=await dt.get("/print/qr");if(e.data.success)return{success:!0,data:e.data.data,message:e.data.message};throw new Error(e.data.error||"Failed to fetch QR code data")}catch(e){return console.error("QR code data fetch error:",e),{success:!1,error:e.response?.data?.error||e.message||"Failed to fetch QR code data"}}},HAe=async()=>{try{const e=await dt.post("/ngrok/regenerate");if(e.data.success)return{success:!0,data:e.data.data,message:e.data.message||"Ngrok tunnel regenerated successfully"};throw new Error(e.data.error||"Failed to regenerate ngrok tunnel")}catch(e){return console.error("Ngrok tunnel regeneration error:",e),{success:!1,error:e.response?.data?.error||e.message||"Failed to regenerate ngrok tunnel"}}},$Ae=async e=>{try{const t=await dt.delete(`/upload/${e}`);if(t.data.success)return{success:!0,message:t.data.message||"Upload deleted successfully"};throw new Error(t.data.error||"Failed to delete upload")}catch(t){return console.error("Upload delete error:",t),{success:!1,error:t.response?.data?.error||t.message||"Failed to delete upload"}}},QAe=async(e,t)=>{console.log(" [UploadUtils] Starting support logs upload..."),console.log(` [UploadUtils] Filename: ${t}`),console.log(` [UploadUtils] Base64 data length: ${e.length} characters`),console.log(` [UploadUtils] Estimated file size: ${Math.round(e.length*.75/1024)} KB`);try{console.log(" [UploadUtils] Calling API: POST /upload/support-logs-upload");const n=await dt.post("/upload/support-logs-upload",{logsBase64:e,filename:t});if(console.log(" [UploadUtils] API response received:",{status:n.status,success:n.data.success,hasFileUrl:!!n.data.data?.file_url}),n.data.success)return console.log(" [UploadUtils] Upload successful!"),console.log(` [UploadUtils] File URL: ${n.data.data.file_url}`),{success:!0,data:n.data.data,message:n.data.message};throw console.error(" [UploadUtils] Upload failed:",n.data.error),new Error(n.data.error||"Upload failed")}catch(n){return console.error(" [UploadUtils] Support logs upload error:",n),console.error(" [UploadUtils] Error details:",{message:n.message,status:n.response?.status,statusText:n.response?.statusText,responseData:n.response?.data}),{success:!1,error:n.response?.data?.error||n.message||"Failed to upload support logs"}}},GAe={key:0,class:"mb-4"},zAe={class:"text-caption text-center mt-2 text-medium-emphasis"},KAe={__name:"support-dialog",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,a=t,r=ee({get:()=>n.modelValue,set:b=>a("update:modelValue",b)}),s=M(null),o=M(!1),i=M(""),c=M(""),A=M(!1),d=M(0),f=M(""),m=M(""),h={required:b=>!!b?.trim()||"This field is required",maxLength50:b=>!b||b.length<=50||"Maximum 50 characters allowed",maxLength1000:b=>!b||b.length<=1e3||"Maximum 1000 characters allowed"};We(r,b=>{b&&v()});const v=()=>{i.value="",c.value="",d.value=0,f.value="",m.value="",A.value=!1,s.value&&s.value.resetValidation()},y=()=>{A.value||(r.value=!1)},g=async()=>{console.log(" [Support] Submit support request initiated");const{valid:b}=await s.value.validate();if(!b){console.warn(" [Support] Form validation failed");return}console.log(" [Support] Form validated successfully"),console.log(" [Support] Error Title:",i.value),console.log(" [Support] Description length:",c.value.length,"characters"),A.value=!0,m.value="";try{console.log(" [Support] Step 1: Collecting application logs..."),d.value=20,f.value="Collecting application logs...";let x="",T=!1;try{if(window.require){console.log(" [Support] Electron IPC available, invoking get-support-logs...");const{ipcRenderer:k}=window.require("electron"),S=await k.invoke("get-support-logs");console.log(" [Support] IPC response received:",{success:S.success,fileCount:S.fileCount,compressedSize:S.compressedSize,dataLength:S.data?.length||0,error:S.error}),S.success&&S.data?(x=S.data,T=!0,console.log(" [Support] Logs collected successfully"),console.log(` [Support] Files: ${S.fileCount}, Size: ${Math.round(S.compressedSize/1024)} KB`)):console.warn(" [Support] Could not collect logs:",S.error)}else console.warn(" [Support] Electron IPC not available (running in browser?)")}catch(k){console.error(" [Support] Failed to collect logs:",k)}let U="";if(T&&x){console.log(" [Support] Step 2: Uploading support package..."),d.value=50,f.value="Uploading support package...";const S=`evamed-support-logs-${new Date().toISOString().replace(/[:.]/g,"-")}.zip`;console.log(` [Support] Filename: ${S}`),console.log(` [Support] Base64 data length: ${x.length} characters`);const E=await QAe(x,S);console.log(" [Support] Upload response:",{success:E.success,fileUrl:E.data?.file_url,error:E.error}),E.success?(U=E.data.file_url,console.log(" [Support] Logs uploaded successfully:",U)):console.warn(" [Support] Failed to upload logs:",E.error)}else console.log(" [Support] Skipping upload (no logs available)");console.log(" [Support] Step 3: Opening email client..."),d.value=80,f.value="Opening email client...",await w(U),console.log(" [Support] Step 4: Support request completed successfully"),d.value=100,f.value="Email client opened successfully!",setTimeout(()=>{console.log(" [Support] Closing dialog"),y()},1e3)}catch(x){console.error(" [Support] Support submission error:",x),console.error(" [Support] Error stack:",x.stack),m.value=x.message||"Failed to submit support request. Please try again."}finally{A.value=!1}},w=async b=>{console.log(" [Support] Building email content...");const x=uM.version,T=new Date().toISOString(),U=new Date().toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),k=`[EVAMED Support] ${i.value.trim()} - ${U}`;console.log(" [Support] Email subject:",k);let S=`Support Request from EVAMED Desktop Application

Error Title: ${i.value.trim()}

Description:
${c.value.trim()}

---`;b?(console.log(" [Support] Including support package URL in email"),S+=`
Support Package: ${b}
(Log files attached - available for 24 hours)
`):(console.log(" [Support] No support package URL available"),S+=`
Note: Log files could not be attached automatically.
`),S+=`
App Version: ${x}
Timestamp: ${T}

---
This support request was generated automatically by the EVAMED Desktop Application.`;const E=`mailto:support@evamed.in?subject=${encodeURIComponent(k)}&body=${encodeURIComponent(S)}`;console.log(" [Support] Mailto URL length:",E.length,"characters");try{if(window.require){console.log(" [Support] Using Electron IPC to open email client...");const{ipcRenderer:C}=window.require("electron"),P=await C.invoke("open-external",E);P.success?console.log(" [Support] Successfully opened email client via IPC"):(console.error(" [Support] Failed to open email client via IPC:",P.error),console.log(" [Support] Falling back to window.open..."),window.open(E,"_blank","noopener,noreferrer"))}else console.log(" [Support] Using window.open (no Electron IPC)..."),window.open(E,"_blank","noopener,noreferrer")}catch(C){console.error(" [Support] Failed to use Electron IPC:",C),console.log(" [Support] Falling back to window.open..."),window.open(E,"_blank","noopener,noreferrer")}};return(b,x)=>{const T=I("v-icon"),U=I("v-card-title"),k=I("v-col"),S=I("v-btn"),E=I("v-row"),C=I("v-card"),P=I("v-text-field"),F=I("v-textarea"),N=I("v-alert"),L=I("v-progress-linear"),ie=I("v-expand-transition"),le=I("v-form"),Q=I("v-card-text"),Z=I("v-divider"),ce=I("v-spacer"),J=I("v-card-actions"),se=I("v-dialog");return R(),ve(se,{modelValue:r.value,"onUpdate:modelValue":x[4]||(x[4]=G=>r.value=G),"max-width":"600",persistent:""},{default:u(()=>[l(C,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[l(C,{rounded:"0",class:"pa-3",color:"surfaceContainerHigh"},{default:u(()=>[l(E,{"no-gutters":"",align:"center"},{default:u(()=>[l(k,{cols:"10"},{default:u(()=>[l(U,{class:"pa-0 d-flex align-center"},{default:u(()=>[l(T,{class:"mr-2",color:"primary"},{default:u(()=>[...x[5]||(x[5]=[O("mdi-headset",-1)])]),_:1}),x[6]||(x[6]=O(" Contact Support ",-1))]),_:1})]),_:1}),l(k,{cols:"2",class:"d-flex justify-end"},{default:u(()=>[l(S,{icon:"",size:"small",onClick:y,disabled:A.value,variant:"text"},{default:u(()=>[l(T,null,{default:u(()=>[...x[7]||(x[7]=[O("mdi-close",-1)])]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),l(Q,{class:"pa-4"},{default:u(()=>[l(le,{ref_key:"formRef",ref:s,modelValue:o.value,"onUpdate:modelValue":x[3]||(x[3]=G=>o.value=G),onSubmit:mn(g,["prevent"])},{default:u(()=>[l(P,{modelValue:i.value,"onUpdate:modelValue":x[0]||(x[0]=G=>i.value=G),label:"Error Title",placeholder:"Brief description of the issue",variant:"outlined",density:"comfortable",rules:[h.required,h.maxLength50],disabled:A.value,counter:"50",maxlength:"50",class:"mb-3"},{"prepend-inner":u(()=>[l(T,{size:"small",color:"error"},{default:u(()=>[...x[8]||(x[8]=[O("mdi-alert-circle-outline",-1)])]),_:1})]),_:1},8,["modelValue","rules","disabled"]),l(F,{modelValue:c.value,"onUpdate:modelValue":x[1]||(x[1]=G=>c.value=G),label:"Issue Description",placeholder:"Please describe the issue you are facing in detail. Include any steps to reproduce the problem.",variant:"outlined",density:"comfortable",rules:[h.required,h.maxLength1000],disabled:A.value,counter:"1000",maxlength:"1000",rows:"6","auto-grow":"",class:"mb-3"},{"prepend-inner":u(()=>[l(T,{size:"small",color:"info"},{default:u(()=>[...x[9]||(x[9]=[O("mdi-text-box-outline",-1)])]),_:1})]),_:1},8,["modelValue","rules","disabled"]),l(N,{type:"info",variant:"tonal",density:"compact",class:"mb-4"},{prepend:u(()=>[l(T,{size:"small"},{default:u(()=>[...x[10]||(x[10]=[O("mdi-information-outline",-1)])]),_:1})]),default:u(()=>[x[11]||(x[11]=p("span",{class:"text-caption"}," Application logs will be automatically attached to help our support team diagnose the issue. ",-1))]),_:1}),l(ie,null,{default:u(()=>[A.value?(R(),me("div",GAe,[l(L,{"model-value":d.value,color:"primary",height:"6",rounded:""},null,8,["model-value"]),p("p",zAe,q(f.value),1)])):_e("",!0)]),_:1}),m.value?(R(),ve(N,{key:0,type:"error",variant:"tonal",density:"compact",class:"mb-4",closable:"","onClick:close":x[2]||(x[2]=G=>m.value="")},{default:u(()=>[O(q(m.value),1)]),_:1})):_e("",!0)]),_:1},8,["modelValue"])]),_:1}),l(Z),l(J,{class:"pa-4"},{default:u(()=>[l(ce),l(S,{variant:"outlined",onClick:y,disabled:A.value,class:"mr-2"},{default:u(()=>[...x[12]||(x[12]=[O(" Cancel ",-1)])]),_:1},8,["disabled"]),l(S,{variant:"elevated",color:"primary",onClick:g,loading:A.value,disabled:!o.value||A.value},{default:u(()=>[l(T,{start:""},{default:u(()=>[...x[13]||(x[13]=[O("mdi-send",-1)])]),_:1}),x[14]||(x[14]=O(" Submit Support Request ",-1))]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},WAe=Xt(KAe,[["__scopeId","data-v-4d5ca3d9"]]),jAe={class:"d-flex align-center user-section"},qAe={class:"mx-3"},YAe={class:"d-flex align-center mx-3"},XAe={key:1,class:"d-flex align-center mx-3"},JAe={key:3,class:"mx-3 window-controls-container d-flex align-center pa-2"},ZAe={key:0,src:AAe,alt:"Exit Fullscreen"},efe={key:1,src:fAe,alt:"Enter Fullscreen"},tfe={key:0,class:"extension-content"},nfe={class:"d-flex align-center justify-center pa-2"},afe={__name:"app-bar",setup(e){const t=ea(),n=Zi(),{showSuccess:a,showError:r,showSnackbar:s,showInfo:o}=ra(),{remoteAccessStatus:i,isReconnecting:c,manualReconnect:A}=vM(),d=M(null),f=M(!1),m=M(!1),h=M(!1),v=M(!1),y=M(0),g=M(!1),w=M(!1),b=ee(()=>c.value?!1:i.value==="disconnected"||i.value==="error"),x=async()=>{if(c.value){console.log(" Manual reconnect blocked - auto-reconnect in progress"),o("Auto-reconnection is already in progress. Please wait...");return}if(w.value){console.log("Reconnect already in progress");return}w.value=!0,console.log(" Manual reconnect initiated from app bar");try{const ye=await A();if(ye.success)a(ye.userMessage||"Link reconnected successfully"),console.log(" Manual reconnect successful:",ye.tunnelUrl);else{const we=ye.userMessage||ye.error||"Failed to reconnect";s({message:we,color:"error",timeout:8e3}),console.warn(" Manual reconnect failed:",{error:ye.error,userMessage:ye.userMessage})}}catch(ye){console.error(" Manual reconnect error:",ye),r("Connection error. Please try again.")}finally{w.value=!1}},T=M(0),U=M(100),k=M(!0),S=M(0),E=M(-1),C=M(1),P=ee(()=>h.value||T.value>=C.value),F=ee(()=>h.value||T.value<=E.value),N=M(!1),L=M(""),ie=M("info"),le=M(4e3),Q=M(""),Z=M(navigator.onLine),ce=(ye,we="Unknown")=>{console.error(`App Bar Error (${we}):`,ye),ye?.code==="NETWORK_ERROR"||ye?.response?.status>=500||!ye?.response?d.value=`${we} error. Please refresh the page or contact support.`:(N.value=!0,L.value=`${we}: ${ye?.message||"Unknown error occurred"}`,ie.value="warning")},J=ee(()=>{try{return t.getters["appBar/extensionContent"]}catch(ye){return ce(ye,"Extension content loading"),null}}),se=ee(()=>{if(!J.value)return null;try{if(typeof J.value!="object")throw new Error("Invalid extension content format");return J.value.component?{component:J.value.component,props:J.value.props||{}}:(console.warn("Extension content missing component"),null)}catch(ye){return ce(ye,"Extension validation"),null}}),G=async()=>{try{const ye=await xr(()=>import("./app_bar-DVGh_H18.js"),[],import.meta.url);Q.value=ye.default||ye}catch{console.warn("App bar image not found, using fallback"),Q.value=""}},D=()=>{console.log("Video button clicked - navigating to Appointments/Teleconsult");try{const ye=n.currentRoute.value;ye.name==="HomePage"||ye.path==="/"?(n.replace({name:"HomePage",params:{tab:"1"}}),a("Navigated to Teleconsultations")):(n.push({name:"HomePage",params:{tab:"1"}}),a("Navigated to Teleconsultations"))}catch(ye){console.error("Error navigating to video section:",ye),ce(ye,"Navigation failed")}},j=()=>{console.log("Testing welcome dialog - navigating to /welcome"),n.push("/welcome")},ne=async()=>{if(f.value){console.warn("Logout already in progress");return}try{f.value=!0,console.log("Starting logout process...");const ye=t.dispatch("auth/signOut"),we=new Promise((at,Je)=>setTimeout(()=>Je(new Error("Logout timeout")),1e4));await Promise.race([ye,we]),console.log("Logout successful"),a("Logged out successfully"),setTimeout(()=>{n.push("/login")},1e3)}catch(ye){console.error("Logout failed:",ye),ce(ye,"Logout failed"),(ye.message==="Logout timeout"||ye?.response?.status>=500)&&(console.warn("Force redirecting due to logout failure"),n.push("/login"))}finally{f.value=!1}},H=async()=>{if(!v.value)try{if(v.value=!0,N.value=!0,L.value="Checking for updates...",ie.value="info",le.value=5e3,window.require){const{ipcRenderer:ye}=window.require("electron"),we=(it,Ie)=>{console.log(" App-bar received update-available event:",Ie),L.value=`Update available: v${Ie.version}`,ie.value="info",v.value=!1,ye.removeListener("update-available",we),ye.removeListener("update-not-available",at),ye.removeListener("update-error",Je)},at=(it,Ie)=>{console.log(" App-bar received update-not-available event:",Ie),L.value="Already up to date",ie.value="success",v.value=!1,ye.removeListener("update-available",we),ye.removeListener("update-not-available",at),ye.removeListener("update-error",Je)},Je=(it,Ie)=>{console.log(" App-bar received update-error event:",Ie),L.value="Failed to check for updates",ie.value="error",v.value=!1,ye.removeListener("update-available",we),ye.removeListener("update-not-available",at),ye.removeListener("update-error",Je)};ye.on("update-available",we),ye.on("update-not-available",at),ye.on("update-error",Je),console.log(" App-bar initiating update check via IPC...");const rt=await ye.invoke("check-for-updates");console.log(" App-bar received IPC result:",rt),setTimeout(()=>{v.value&&(L.value="Update check timed out",ie.value="warning",v.value=!1,ye.removeListener("update-available",we),ye.removeListener("update-not-available",at),ye.removeListener("update-error",Je))},3e4)}else L.value="Update check not available",ie.value="warning",v.value=!1}catch(ye){console.error("Update check failed:",ye),L.value="Failed to check for updates",ie.value="error",v.value=!1}},te=async()=>{if(!h.value)try{if(h.value=!0,window.require){const{ipcRenderer:ye}=window.require("electron"),we=await ye.invoke("toggle-fullscreen");if(we.success){k.value=we.isFullscreen;const at=we.isFullscreen?"Entered fullscreen mode":"Exited fullscreen mode";a(at),console.log(`Fullscreen toggled: ${we.wasFullscreen}  ${we.isFullscreen}`),we.isFullscreen||setTimeout(()=>{a("You can now minimize using the window controls")},2e3)}else throw new Error(we.error||"Failed to toggle fullscreen")}else throw new Error("Electron IPC not available")}catch(ye){console.error("Failed to toggle fullscreen:",ye),ce(ye,"Fullscreen toggle failed")}finally{h.value=!1}},Y=async()=>{if(!h.value)try{if(h.value=!0,window.require){const{ipcRenderer:ye}=window.require("electron"),we=await ye.invoke("window-close");if(we.success)console.log("Window close initiated");else throw new Error(we.error||"Failed to close window")}else throw new Error("Electron IPC not available")}catch(ye){console.error("Failed to close window:",ye),ce(ye,"Close failed")}finally{h.value=!1}},K=async()=>{if(!(h.value||T.value>=C.value))try{if(h.value=!0,window.require){const{ipcRenderer:ye}=window.require("electron"),we=await ye.invoke("zoom-in");if(we.success)T.value=we.zoomLevel,U.value=we.zoomFactor,a(`Zoomed in to ${we.zoomFactor}%`),console.log(`Zoom in successful: ${we.zoomFactor}%`);else throw new Error(we.error||"Failed to zoom in")}else throw new Error("Electron IPC not available")}catch(ye){console.error("Failed to zoom in:",ye),ce(ye,"Zoom in failed")}finally{h.value=!1}},X=async()=>{if(!(h.value||T.value<=E.value))try{if(h.value=!0,window.require){const{ipcRenderer:ye}=window.require("electron"),we=await ye.invoke("zoom-out");if(we.success)T.value=we.zoomLevel,U.value=we.zoomFactor,a(`Zoomed out to ${we.zoomFactor}%`),console.log(`Zoom out successful: ${we.zoomFactor}%`);else throw new Error(we.error||"Failed to zoom out")}else throw new Error("Electron IPC not available")}catch(ye){console.error("Failed to zoom out:",ye),ce(ye,"Zoom out failed")}finally{h.value=!1}},ae=async()=>{try{if(window.require){const{ipcRenderer:ye}=window.require("electron"),we=await ye.invoke("get-zoom-level");we.success&&(T.value=we.zoomLevel,U.value=we.zoomFactor,S.value=we.zoomLevel,E.value=S.value-1,C.value=S.value+1,console.log(`Initial zoom state: level ${we.zoomLevel} (${we.zoomFactor}%)`),console.log(`Zoom limits: ${E.value} to ${C.value}`));const at=await ye.invoke("get-fullscreen-status");at.success&&(k.value=at.isFullscreen)}}catch(ye){console.warn("Failed to get initial window state:",ye)}},oe=()=>{Z.value=!0,d.value?.includes("network")&&(d.value=null,a("Connection restored"))},W=()=>{Z.value=!1,N.value=!0,L.value="You are currently offline. Some features may not work.",ie.value="warning",le.value=0},de=ye=>{xe(ye,"selector"),setTimeout(()=>{De.value.has("selector")&&(console.log("Auto-retrying selector component..."),ke("selector"))},3e3)},Ae=ye=>{xe(ye,"extension")},Ce=ye=>{console.warn("Logout icon failed to load:",ye)},De=M(new Set),xe=(ye,we)=>{console.error(`Child component error in ${we}:`,ye),De.value.add(we),De.value.size>2?d.value="Multiple component failures detected. Please refresh the page.":ce(ye,we)},ke=ye=>{De.value.delete(ye),y.value+=1},Ee=M(null);return cn(async()=>{try{await G(),await ae(),window.addEventListener("online",oe),window.addEventListener("offline",W),Ee.value=t.watch(ye=>ye.errors,ye=>{ye?.appBar&&(ce(ye.appBar,"Store error"),t.commit("clearError","appBar"))},{deep:!0}),console.log("App bar initialized successfully")}catch(ye){ce(ye,"App bar initialization")}}),la(()=>{try{window.removeEventListener("online",oe),window.removeEventListener("offline",W),Ee.value&&Ee.value(),f.value=!1,v.value=!1,N.value=!1,d.value=null,console.log("App bar cleanup completed")}catch(ye){console.error("App bar cleanup error:",ye)}}),We(()=>n.currentRoute.value.path,()=>{d.value&&!d.value.includes("contact support")&&(d.value=null)}),(ye,we)=>{const at=I("v-alert"),Je=I("v-spacer"),rt=I("v-btn"),it=I("v-icon"),Ie=I("v-tooltip"),Ve=I("v-progress-circular"),ft=I("v-chip"),Ft=I("v-card"),tt=I("v-app-bar"),Ge=I("v-snackbar");return R(),me("div",null,[d.value?(R(),ve(at,{key:0,type:"error",variant:"tonal",closable:"","onClick:close":we[0]||(we[0]=pt=>d.value=null),class:"ma-2",density:"compact"},{default:u(()=>[O(q(d.value),1)]),_:1})):_e("",!0),l(tt,{elevation:"1",app:"",extended:!!se.value,density:"compact",class:"professional-app-bar",image:Q.value},{default:u(()=>[l(Je),Aa(l(rt,{variant:"outlined",color:"warning",size:"small",onClick:j,class:"mx-2","prepend-icon":"mdi-test-tube"},{default:u(()=>[...we[6]||(we[6]=[O(" Test Welcome ",-1)])]),_:1},512),[[ai,!1]]),p("div",jAe,[l(Ie,{text:"Start teleconsultation",location:"bottom"},{activator:u(({props:pt})=>[l(rt,Fe({icon:"",onClick:D},pt,{class:"video-btn mx-3",variant:"text",size:"small",disabled:m.value,loading:m.value,"aria-label":"Open Appointments and Teleconsult page"}),{default:u(()=>[l(it,{size:"24"},{default:u(()=>[p("img",{src:uAe,alt:"Video Consultation",class:"video-icon",onError:Ce},null,32)]),_:1})]),_:1},16,["disabled","loading"])]),_:1}),De.value.has("selector")?(R(),me("div",XAe,[l(ft,{variant:"outlined",size:"small",color:"warning",class:"mr-2"},{default:u(()=>[...we[8]||(we[8]=[O(" Selection unavailable ",-1)])]),_:1}),l(rt,{size:"x-small",variant:"text",onClick:we[1]||(we[1]=pt=>ke("selector")),class:"text-caption"},{default:u(()=>[...we[9]||(we[9]=[O(" Retry ",-1)])]),_:1})])):(R(),ve(vS,{key:0},{default:u(()=>[p("div",qAe,[(R(),ve(UAe,{onError:de,key:y.value}))])]),fallback:u(()=>[p("div",YAe,[l(Ve,{indeterminate:"",size:"20",width:"2",color:"primary"}),we[7]||(we[7]=p("span",{class:"ml-2 text-caption"},"Loading...",-1))])]),_:1})),Oe(Ka)()?(R(),ve(Ft,{key:2,variant:"outlined",class:"mx-3 status-indicators-container d-flex align-center pa-2",density:"compact",style:{"border-color":"rgba(0, 0, 0, 0.15) !important"}},{default:u(()=>[l(VAe),l(Ie,{text:w.value?"Reconnecting...":"Reconnect Link",location:"bottom"},{activator:u(({props:pt})=>[b.value?(R(),ve(rt,Fe({key:0},pt,{size:"x-small",variant:"outlined",color:w.value?"warning":"error",class:"ml-2 reconnect-btn",loading:w.value,disabled:w.value,onClick:x}),{default:u(()=>[l(it,{size:"14",class:"mr-1"},{default:u(()=>[...we[10]||(we[10]=[O("mdi-refresh",-1)])]),_:1}),O(" "+q(w.value?"":"Reconnect"),1)]),_:1},16,["color","loading","disabled"])):_e("",!0)]),_:1},8,["text"])]),_:1})):_e("",!0),Oe(Ka)()?(R(),me("div",JAe,[l(Ie,{text:"Zoom Out",location:"bottom"},{activator:u(({props:pt})=>[l(rt,Fe(pt,{icon:"",size:"small",variant:"text",class:"control-btn mx-1",onClick:X,disabled:F.value}),{default:u(()=>[l(it,{class:"control-icon"},{default:u(()=>[...we[11]||(we[11]=[p("img",{src:cAe,alt:"Zoom Out"},null,-1)])]),_:1})]),_:1},16,["disabled"])]),_:1}),l(Ie,{text:"Zoom In",location:"bottom"},{activator:u(({props:pt})=>[l(rt,Fe(pt,{icon:"",size:"small",variant:"text",class:"control-btn mx-1",onClick:K,disabled:P.value}),{default:u(()=>[l(it,{class:"control-icon"},{default:u(()=>[...we[12]||(we[12]=[p("img",{src:dAe,alt:"Zoom In"},null,-1)])]),_:1})]),_:1},16,["disabled"])]),_:1}),l(Ie,{text:k.value?"Exit Fullscreen":"Enter Fullscreen",location:"bottom"},{activator:u(({props:pt})=>[l(rt,Fe(pt,{icon:"",size:"small",variant:"text",class:"control-btn mx-1",onClick:te,disabled:h.value}),{default:u(()=>[l(it,{class:"control-icon"},{default:u(()=>[k.value?(R(),me("img",ZAe)):(R(),me("img",efe))]),_:1})]),_:1},16,["disabled"])]),_:1},8,["text"]),we[14]||(we[14]=p("div",{class:"mx-3"},null,-1)),l(Ie,{text:"Close",location:"bottom"},{activator:u(({props:pt})=>[l(rt,Fe(pt,{icon:"",size:"small",variant:"text",class:"control-btn close-btn",onClick:Y,disabled:h.value}),{default:u(()=>[l(it,{class:"control-icon close-icon"},{default:u(()=>[...we[13]||(we[13]=[p("img",{src:mAe,alt:"Close"},null,-1)])]),_:1})]),_:1},16,["disabled"])]),_:1})])):_e("",!0),l(Ie,{text:"Contact Support",location:"bottom"},{activator:u(({props:pt})=>[l(rt,Fe({icon:"",onClick:we[2]||(we[2]=ht=>g.value=!0)},pt,{class:"support-btn mx-3",variant:"text",size:"small","aria-label":"Contact support"}),{default:u(()=>[l(it,{size:"20",class:"support-icon"},{default:u(()=>[...we[15]||(we[15]=[O("mdi-headset",-1)])]),_:1})]),_:1},16)]),_:1}),Oe(Ka)()?(R(),ve(Ie,{key:4,text:"Check for Updates",location:"bottom"},{activator:u(({props:pt})=>[l(rt,Fe({icon:"",onClick:H},pt,{class:"updates-btn mx-3",variant:"text",size:"small",disabled:v.value,loading:v.value,"aria-label":"Check for application updates"}),{default:u(()=>[l(it,{size:"20",class:"updates-icon"},{default:u(()=>[...we[16]||(we[16]=[O("mdi-package-variant",-1)])]),_:1})]),_:1},16,["disabled","loading"])]),_:1})):_e("",!0),Oe(Ka)()?(R(),ve(Ie,{key:5,text:"Logout",location:"bottom"},{activator:u(({props:pt})=>[l(rt,Fe({icon:"",onClick:ne},pt,{class:"logout-btn mx-3",variant:"text",size:"small",disabled:f.value,loading:f.value,"aria-label":"Logout from application"}),{default:u(()=>[l(it,{size:"20"},{default:u(()=>[p("img",{src:hAe,alt:"Logout",class:"logout-icon",onError:Ce},null,32)]),_:1})]),_:1},16,["disabled","loading"])]),_:1})):_e("",!0)])]),extension:u(()=>[se.value?(R(),me("div",tfe,[(R(),ve(vS,null,{default:u(()=>[(R(),ve(J2(se.value.component),Fe(se.value.props||{},{onError:Ae}),null,16))]),fallback:u(()=>[p("div",nfe,[l(Ve,{indeterminate:"",size:"16",width:"2",color:"primary"}),we[17]||(we[17]=p("span",{class:"ml-2 text-caption"},"Loading extension...",-1))])]),_:1}))])):_e("",!0)]),_:1},8,["extended","image"]),l(Ge,{modelValue:N.value,"onUpdate:modelValue":we[4]||(we[4]=pt=>N.value=pt),color:ie.value,timeout:le.value,location:"top"},{actions:u(()=>[l(rt,{variant:"text",onClick:we[3]||(we[3]=pt=>N.value=!1)},{default:u(()=>[...we[18]||(we[18]=[O(" Close ",-1)])]),_:1})]),default:u(()=>[O(q(L.value)+" ",1)]),_:1},8,["modelValue","color","timeout"]),l(WAe,{modelValue:g.value,"onUpdate:modelValue":we[5]||(we[5]=pt=>g.value=pt)},null,8,["modelValue"])])}}},rfe=Xt(afe,[["__scopeId","data-v-503a6310"]]),sfe={name:"UpdateNotification",data(){return{updateAvailable:!1,downloadInProgress:!1,readyToInstall:!1,showError:!1,showSuccess:!1,errorMessage:"",successMessage:"",updateInfo:null,downloadProgress:0,downloadSpeed:0,downloadTransferred:0,downloadTotal:0,isDownloading:!1,isCheckingUpdate:!1,isDevelopment:!1,autoRestartEnabled:!0,canRetry:!1,retryCount:0,lastUpdateCheck:null,currentVersion:"Loading...",showUpdateStatusDialog:!1}},mounted(){this.setupUpdateListeners(),this.loadCurrentVersion()},beforeUnmount(){this.removeUpdateListeners()},computed:{},methods:{setupUpdateListeners(){if(!window.require)return;const{ipcRenderer:e}=window.require("electron");e.on("update-checking",this.onUpdateChecking),e.on("update-available",this.onUpdateAvailable),e.on("update-not-available",this.onUpdateNotAvailable),e.on("download-progress",this.onDownloadProgress),e.on("update-downloaded",this.onUpdateDownloaded),e.on("update-error",this.onUpdateError),e.on("server-ready",this.onServerReady),e.on("download-cancelled",this.onDownloadCancelled)},removeUpdateListeners(){if(!window.require)return;const{ipcRenderer:e}=window.require("electron");e.removeListener("update-checking",this.onUpdateChecking),e.removeListener("update-available",this.onUpdateAvailable),e.removeListener("update-not-available",this.onUpdateNotAvailable),e.removeListener("download-progress",this.onDownloadProgress),e.removeListener("update-downloaded",this.onUpdateDownloaded),e.removeListener("update-error",this.onUpdateError),e.removeListener("server-ready",this.onServerReady),e.removeListener("download-cancelled",this.onDownloadCancelled)},onUpdateChecking(){console.log("Checking for updates..."),this.lastUpdateCheck=new Date,this.isCheckingUpdate||(this.isCheckingUpdate=!0)},onUpdateAvailable(e,t){console.log("Update available:",t),this.updateInfo=t,this.updateAvailable=!0,this.isCheckingUpdate=!1},onUpdateNotAvailable(e,t){console.log("No updates available",t),this.isCheckingUpdate=!1,this.showUpdateStatusDialog=!0},onDownloadProgress(e,t){console.log("Download progress:",t),this.downloadProgress=t.percent||0,this.downloadSpeed=t.bytesPerSecond||0,this.downloadTransferred=t.transferred||0,this.downloadTotal=t.total||0,!this.downloadInProgress&&this.isDownloading&&(console.log("Showing download progress dialog"),this.downloadInProgress=!0,this.updateAvailable=!1),this.downloadProgress>0&&this.downloadProgress%25===0&&console.log(`Download ${Math.round(this.downloadProgress)}% complete`)},async onUpdateDownloaded(e,t){console.log("Update downloaded:",t),this.downloadInProgress=!1,this.isDownloading=!1,this.autoRestartEnabled?(this.successMessage=`Update ${t.version} downloaded successfully! Restarting application...`,this.showSuccess=!0,setTimeout(async()=>{console.log("Auto-restarting application to install update..."),await this.installNow()},2e3)):(this.readyToInstall=!0,this.successMessage=`Update ${t.version} downloaded successfully!`,this.showSuccess=!0)},onUpdateError(e,t){console.error("Update error:",t),this.showError=!0,t.errorType==="checksum_mismatch"||t.code==="ERR_CHECKSUM_MISMATCH"?(this.errorMessage=t.message||"Download verification failed. The file may be corrupted. Please try downloading again.",this.canRetry=t.canRetry!==!1,this.retryCount=t.retryCount||0):(this.errorMessage=`Update failed: ${t.message}`,this.canRetry=!1),this.isDownloading=!1,this.isCheckingUpdate=!1,this.downloadInProgress=!1,this.downloadProgress=0,this.downloadSpeed=0,this.downloadTransferred=0,this.downloadTotal=0},onServerReady(){console.log("Server is ready")},onDownloadCancelled(){console.log("Download was cancelled by main process"),this.downloadInProgress=!1,this.isDownloading=!1,this.downloadProgress=0,this.downloadSpeed=0,this.downloadTransferred=0,this.downloadTotal=0},async loadCurrentVersion(){try{if(!window.require)return;const{ipcRenderer:e}=window.require("electron"),t=await e.invoke("get-app-config");this.currentVersion=t.version||"Unknown"}catch(e){console.error("Failed to load current version:",e),this.currentVersion="Unknown"}},async checkForUpdates(){if(!window.require)return;const{ipcRenderer:e}=window.require("electron");try{this.isCheckingUpdate=!0,this.lastUpdateCheck=new Date;const t=await e.invoke("check-for-updates");console.log("Update check result:",t),setTimeout(()=>{this.isCheckingUpdate&&(this.isCheckingUpdate=!1,this.updateAvailable)},2e3)}catch(t){console.error("Failed to check for updates:",t),this.showError=!0,this.errorMessage="Failed to check for updates",this.isCheckingUpdate=!1}},async downloadUpdate(){if(!window.require)return;const{ipcRenderer:e}=window.require("electron");try{this.isDownloading=!0,this.errorMessage="",this.showError=!1,console.log("Starting update download...");const t=await e.invoke("download-update");if(t.success)console.log("Download started successfully");else throw new Error(t.error||"Failed to start download")}catch(t){console.error("Failed to start download:",t),this.showError=!0,this.errorMessage=`Failed to start download: ${t.message}`,this.isDownloading=!1}},dismissUpdate(){this.updateAvailable=!1,this.updateInfo=null},async installNow(){if(!window.require){console.error("Electron IPC not available"),this.showError=!0,this.errorMessage="Cannot restart application - Electron IPC not available";return}const{ipcRenderer:e}=window.require("electron");try{console.log("Requesting application restart and update installation..."),await e.invoke("quit-and-install"),console.warn("Application did not quit as expected")}catch(t){console.error("Failed to install update:",t),this.showError=!0,this.errorMessage=`Failed to install update: ${t.message}`,this.readyToInstall=!0}},installLater(){this.readyToInstall=!1},formatReleaseNotes(e){return e?e.replace(/\n/g,"<br>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/- (.*?)(<br>|$)/g," $1$2"):""},formatDate(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})},formatBytes(e){if(e===0)return"0 B";const t=1024,n=["B","KB","MB","GB"],a=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,a)).toFixed(1))+" "+n[a]},formatTimeRemaining(){if(this.downloadSpeed===0||this.downloadProgress===0||this.downloadProgress===100)return"Calculating...";const t=(this.downloadTotal-this.downloadTransferred)*1e3/(this.downloadSpeed*1e3),n=Math.floor(t/3600),a=Math.floor(t%3600/60),r=Math.floor(t%60);return`${n.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`},async cancelDownload(){try{if(this.downloadInProgress=!1,this.isDownloading=!1,this.downloadProgress=0,this.downloadSpeed=0,this.downloadTransferred=0,this.downloadTotal=0,window.require){const{ipcRenderer:e}=window.require("electron");await e.invoke("cancel-update-download"),console.log("Download cancelled successfully"),this.successMessage="Download cancelled successfully",this.showSuccess=!0}}catch(e){console.error("Failed to cancel download:",e),this.showError=!0,this.errorMessage="Failed to cancel download"}},async retryDownload(){if(!window.require)return;const{ipcRenderer:e}=window.require("electron");try{this.showError=!1,this.errorMessage="",console.log("Cleaning up corrupted download files...");const t=await e.invoke("cleanup-corrupted-download");t.success?console.log("Download cache cleared successfully"):console.warn("Failed to cleanup download cache:",t.error),await new Promise(n=>setTimeout(n,1e3)),await this.downloadUpdate()}catch(t){console.error("Failed to retry download:",t),this.showError=!0,this.errorMessage="Failed to retry download. Please try again."}},handleUpdateCheckEvent(){console.log("Updates check triggered from external source"),this.checkForUpdates()},formatLastCheckTime(e){if(!e)return"Never";const n=new Date-e,a=Math.floor(n/6e4),r=Math.floor(n/36e5),s=Math.floor(n/864e5);return s>0?`${s} day${s>1?"s":""} ago`:r>0?`${r} hour${r>1?"s":""} ago`:a>0?`${a} minute${a>1?"s":""} ago`:"Just now"}}},ofe={key:0},ife={class:"mb-3"},lfe={key:0,class:"mb-3"},ufe=["innerHTML"],cfe={key:1,class:"mb-2"},dfe={class:"text--secondary"},Afe={key:2,class:"mb-2"},ffe={class:"text--secondary"},mfe={class:"text-center mb-3"},hfe={class:"mt-3 text-center text--secondary"},vfe={key:0};function pfe(e,t,n,a,r,s){const o=I("v-icon"),i=I("v-card-title"),c=I("v-card-text"),A=I("v-spacer"),d=I("v-btn"),f=I("v-card-actions"),m=I("v-card"),h=I("v-dialog"),v=I("v-progress-circular"),y=I("v-progress-linear"),g=I("v-snackbar");return R(),me("div",null,[l(h,{modelValue:r.updateAvailable,"onUpdate:modelValue":t[0]||(t[0]=w=>r.updateAvailable=w),"max-width":"500",persistent:""},{default:u(()=>[l(m,null,{default:u(()=>[l(i,{class:"text-h5 primary white--text"},{default:u(()=>[l(o,{left:"",color:"white"},{default:u(()=>[...t[7]||(t[7]=[O("mdi-download",-1)])]),_:1}),t[8]||(t[8]=O(" Update Available ",-1))]),_:1}),l(c,{class:"pt-4"},{default:u(()=>[r.updateInfo?(R(),me("div",ofe,[p("p",ife,[p("strong",null,"Version "+q(r.updateInfo.version),1),t[9]||(t[9]=O(" is now available! ",-1))]),r.updateInfo.releaseNotes?(R(),me("div",lfe,[t[10]||(t[10]=p("h4",{class:"mb-2"},"What's New:",-1)),p("div",{class:"release-notes",innerHTML:s.formatReleaseNotes(r.updateInfo.releaseNotes)},null,8,ufe)])):_e("",!0),r.updateInfo.releaseDate?(R(),me("div",cfe,[p("small",dfe," Released: "+q(s.formatDate(r.updateInfo.releaseDate)),1)])):_e("",!0),r.updateInfo.files&&r.updateInfo.files.length>0?(R(),me("div",Afe,[p("small",ffe," Size: "+q(s.formatBytes(r.updateInfo.files[0].size||0)),1)])):_e("",!0)])):_e("",!0),t[11]||(t[11]=p("p",{class:"mb-0"}," Would you like to download and install the update now? ",-1))]),_:1}),l(f,null,{default:u(()=>[l(A),l(d,{text:"",onClick:s.dismissUpdate,class:"btn-hover-base"},{default:u(()=>[...t[12]||(t[12]=[O(" Later ",-1)])]),_:1},8,["onClick"]),l(d,{color:"primary",onClick:s.downloadUpdate,loading:r.isDownloading,class:"btn-hover-enhanced"},{default:u(()=>[...t[13]||(t[13]=[O(" Download & Install ",-1)])]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(h,{modelValue:r.downloadInProgress,"onUpdate:modelValue":t[1]||(t[1]=w=>r.downloadInProgress=w),"max-width":"400",persistent:""},{default:u(()=>[l(m,null,{default:u(()=>[l(i,{class:"text-h6"},{default:u(()=>[l(o,{left:""},{default:u(()=>[...t[14]||(t[14]=[O("mdi-download",-1)])]),_:1}),t[15]||(t[15]=O(" Downloading Update ",-1))]),_:1}),l(c,null,{default:u(()=>[p("div",mfe,[l(v,{value:r.downloadProgress,size:"80",width:"8",color:"primary"},{default:u(()=>[O(q(Math.round(r.downloadProgress))+"% ",1)]),_:1},8,["value"])]),l(y,{value:r.downloadProgress,color:"primary",height:"6",rounded:""},null,8,["value"]),p("div",hfe,[p("small",null,[O(q(s.formatBytes(r.downloadTransferred))+" / "+q(s.formatBytes(r.downloadTotal))+" ",1),t[16]||(t[16]=p("br",null,null,-1)),O(" Speed: "+q(s.formatBytes(r.downloadSpeed))+"/s ",1),t[17]||(t[17]=p("br",null,null,-1)),r.downloadSpeed>0?(R(),me("span",vfe," ETA: "+q(s.formatTimeRemaining()),1)):_e("",!0)])])]),_:1}),l(f,null,{default:u(()=>[l(A),l(d,{text:"",onClick:s.cancelDownload,disabled:r.downloadProgress>90},{default:u(()=>[...t[18]||(t[18]=[O(" Cancel ",-1)])]),_:1},8,["onClick","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(h,{modelValue:r.readyToInstall,"onUpdate:modelValue":t[2]||(t[2]=w=>r.readyToInstall=w),"max-width":"400",persistent:""},{default:u(()=>[l(m,null,{default:u(()=>[l(i,{class:"text-h5 success white--text"},{default:u(()=>[l(o,{left:"",color:"white"},{default:u(()=>[...t[19]||(t[19]=[O("mdi-check-circle",-1)])]),_:1}),t[20]||(t[20]=O(" Update Ready ",-1))]),_:1}),l(c,{class:"pt-4"},{default:u(()=>[...t[21]||(t[21]=[p("p",null," The update has been downloaded successfully. The application will restart to apply the update. ",-1),p("p",{class:"mb-0"},[p("strong",null,"Note:"),O(" Any unsaved work will be lost. ")],-1)])]),_:1}),l(f,null,{default:u(()=>[l(A),l(d,{text:"",onClick:s.installLater},{default:u(()=>[...t[22]||(t[22]=[O(" Restart Later ",-1)])]),_:1},8,["onClick"]),l(d,{color:"success",onClick:s.installNow},{default:u(()=>[...t[23]||(t[23]=[O(" Restart Now ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(g,{modelValue:r.showError,"onUpdate:modelValue":t[4]||(t[4]=w=>r.showError=w),color:"error",timeout:"0",top:""},{action:u(({attrs:w})=>[r.canRetry?(R(),ve(d,Fe({key:0,text:""},w,{onClick:s.retryDownload}),{default:u(()=>[...t[25]||(t[25]=[O(" Retry ",-1)])]),_:1},16,["onClick"])):_e("",!0),l(d,Fe({text:""},w,{onClick:t[3]||(t[3]=b=>r.showError=!1)}),{default:u(()=>[...t[26]||(t[26]=[O(" Close ",-1)])]),_:1},16)]),default:u(()=>[l(o,{left:""},{default:u(()=>[...t[24]||(t[24]=[O("mdi-alert",-1)])]),_:1}),O(" "+q(r.errorMessage)+" ",1)]),_:1},8,["modelValue"]),l(g,{modelValue:r.showSuccess,"onUpdate:modelValue":t[6]||(t[6]=w=>r.showSuccess=w),color:"success",timeout:"4000",top:""},{action:u(({attrs:w})=>[l(d,Fe({text:""},w,{onClick:t[5]||(t[5]=b=>r.showSuccess=!1)}),{default:u(()=>[...t[28]||(t[28]=[O(" Close ",-1)])]),_:1},16)]),default:u(()=>[l(o,{left:""},{default:u(()=>[...t[27]||(t[27]=[O("mdi-check-circle",-1)])]),_:1}),O(" "+q(r.successMessage)+" ",1)]),_:1},8,["modelValue"])])}const gfe=Xt(sfe,[["render",pfe],["__scopeId","data-v-b62dff2a"]]),yfe={__name:"App",setup(e){const t=ea(),n=Zi(),{snackbar:a}=ra(),r=M(!1),s=Ka(),o=ee(()=>t.getters["auth/isAuthenticated"]),i=M(!!localStorage.getItem("desktopSessionToken")),c=Xh(),A=ee(()=>{const v=!!localStorage.getItem("sessionToken"),y=c.isAuthenticated.value;return v&&y}),d=ee(()=>{if(s)return o.value&&i.value;{const v=A.value;return console.log("[App.vue] Web authentication check:",{hasToken:!!localStorage.getItem("sessionToken"),computedAuth:c.isAuthenticated.value,isFullyAuthenticated:v}),v}});s&&window.addEventListener("storage",v=>{v.key==="desktopSessionToken"&&(i.value=!!v.newValue)}),n.afterEach(()=>{s&&(i.value=!!localStorage.getItem("desktopSessionToken"))});const f=ee(()=>{const v=n.currentRoute.value.path,y=["/","/login","/desktop/passcode","/web/login"],g=d.value&&!y.includes(v);return console.log("[App.vue] showNavigation check:",{currentPath:v,isFullyAuthenticated:d.value,isExcluded:y.includes(v),shouldShow:g}),g});window.addEventListener("collapse-side-nav",v=>m(v.detail)),cn(async()=>{console.log("App mounted")});const m=v=>{r.value=v},h=v=>{t.dispatch("snackbar/showSnackbar",v)};return(v,y)=>{const g=I("router-view"),w=I("v-btn"),b=I("v-snackbar"),x=I("v-app");return R(),ve(x,null,{default:u(()=>[f.value?(R(),ve(lAe,{key:0,collapsed:r.value},null,8,["collapsed"])):_e("",!0),f.value?(R(),ve(rfe,{key:1})):_e("",!0),l(g,null,{default:u(({Component:T})=>[(R(),ve(pZ,null,[(R(),ve(J2(T),{key:v.$route.path}))],1024))]),_:1}),l(gfe,{onShowSnackbar:h}),l(b,{modelValue:Oe(a).show,"onUpdate:modelValue":y[1]||(y[1]=T=>Oe(a).show=T),color:Oe(a).color,timeout:Oe(a).timeout,top:"",right:""},{action:u(({attrs:T})=>[l(w,Fe({text:""},T,{onClick:y[0]||(y[0]=U=>Oe(t).dispatch("snackbar/hideSnackbar"))}),{default:u(()=>[...y[2]||(y[2]=[O(" Close ",-1)])]),_:1},16)]),default:u(()=>[O(q(Oe(a).message)+" ",1)]),_:1},8,["modelValue","color","timeout"])]),_:1})}}},fg="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17.65,6.35C16.2,4.9%2014.21,4%2012,4A8,8%200%200,0%204,12A8,8%200%200,0%2012,20C15.73,20%2018.84,17.45%2019.73,14H17.65C16.83,16.33%2014.61,18%2012,18A6,6%200%200,1%206,12A6,6%200%200,1%2012,6C13.66,6%2015.14,6.69%2016.22,7.78L13,11H20V4L17.65,6.35Z'%20/%3e%3c/svg%3e",_fe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M5%206C3.9%206%203%206.9%203%208S3.9%2010%205%2010%207%209.11%207%208%206.11%206%205%206M12%204C10.9%204%2010%204.89%2010%206S10.9%208%2012%208%2014%207.11%2014%206%2013.11%204%2012%204M19%202C17.9%202%2017%202.9%2017%204S17.9%206%2019%206%2021%205.11%2021%204%2020.11%202%2019%202M3.5%2011C2.67%2011%202%2011.67%202%2012.5V17H3V22H7V17H8V12.5C8%2011.67%207.33%2011%206.5%2011H3.5M10.5%209C9.67%209%209%209.67%209%2010.5V15H10V20H14V15H15V10.5C15%209.67%2014.33%209%2013.5%209H10.5M17.5%207C16.67%207%2016%207.67%2016%208.5V13H17V18H21V13H22V8.5C22%207.67%2021.33%207%2020.5%207H17.5Z'%20/%3e%3c/svg%3e",wfe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M21.1,12.5L22.5,13.91L15.97,20.5L12.5,17L13.9,15.59L15.97,17.67L21.1,12.5M10,17L13,20H3V18C3,15.79%206.58,14%2011,14L12.89,14.11L10,17M11,4A4,4%200%200,1%2015,8A4,4%200%200,1%2011,12A4,4%200%200,1%207,8A4,4%200%200,1%2011,4Z'%20/%3e%3c/svg%3e",bfe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M10%204A4%204%200%200%200%206%208A4%204%200%200%200%2010%2012A4%204%200%200%200%2014%208A4%204%200%200%200%2010%204M17.5%2013C15%2013%2013%2015%2013%2017.5C13%2020%2015%2022%2017.5%2022C20%2022%2022%2020%2022%2017.5C22%2015%2020%2013%2017.5%2013M10%2014C5.58%2014%202%2015.79%202%2018V20H11.5A6.5%206.5%200%200%201%2011%2017.5A6.5%206.5%200%200%201%2011.95%2014.14C11.32%2014.06%2010.68%2014%2010%2014M17.5%2014.5C19.16%2014.5%2020.5%2015.84%2020.5%2017.5C20.5%2018.06%2020.35%2018.58%2020.08%2019L16%2014.92C16.42%2014.65%2016.94%2014.5%2017.5%2014.5M14.92%2016L19%2020.08C18.58%2020.35%2018.06%2020.5%2017.5%2020.5C15.84%2020.5%2014.5%2019.16%2014.5%2017.5C14.5%2016.94%2014.65%2016.42%2014.92%2016Z'%20/%3e%3c/svg%3e",xfe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M10.63,14.1C12.23,10.58%2016.38,9.03%2019.9,10.63C23.42,12.23%2024.97,16.38%2023.37,19.9C22.24,22.4%2019.75,24%2017,24C14.3,24%2011.83,22.44%2010.67,20H1V18C1.06,16.86%201.84,15.93%203.34,15.18C4.84,14.43%206.72,14.04%209,14C9.57,14%2010.11,14.05%2010.63,14.1V14.1M9,4C10.12,4.03%2011.06,4.42%2011.81,5.17C12.56,5.92%2012.93,6.86%2012.93,8C12.93,9.14%2012.56,10.08%2011.81,10.83C11.06,11.58%2010.12,11.95%209,11.95C7.88,11.95%206.94,11.58%206.19,10.83C5.44,10.08%205.07,9.14%205.07,8C5.07,6.86%205.44,5.92%206.19,5.17C6.94,4.42%207.88,4.03%209,4M17,22A5,5%200%200,0%2022,17A5,5%200%200,0%2017,12A5,5%200%200,0%2012,17A5,5%200%200,0%2017,22M16,14H17.5V16.82L19.94,18.23L19.19,19.53L16,17.69V14Z'%20/%3e%3c/svg%3e",eC="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M11.15,15.18L9.73,13.77L11.15,12.35L12.56,13.77L13.97,12.35L12.56,10.94L13.97,9.53L15.39,10.94L16.8,9.53L13.97,6.7L6.9,13.77L9.73,16.6L11.15,15.18M3.08,19L6.2,15.89L4.08,13.77L13.97,3.87L16.1,6L17.5,4.58L16.1,3.16L17.5,1.75L21.75,6L20.34,7.4L18.92,6L17.5,7.4L19.63,9.53L9.73,19.42L7.61,17.3L3.08,21.84V19Z'%20/%3e%3c/svg%3e",qA="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M20.71,7.04C21.1,6.65%2021.1,6%2020.71,5.63L18.37,3.29C18,2.9%2017.35,2.9%2016.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z'%20/%3e%3c/svg%3e",mc="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2%200%200,0%208,21H16A2,2%200%200,0%2018,19V7H6V19Z'%20/%3e%3c/svg%3e",tC="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M8,12H16V14H8V12M10,20H6V4H13V9H18V12.1L20,10.1V8L14,2H6A2,2%200%200,0%204,4V20A2,2%200%200,0%206,22H10V20M8,18H12.1L13,17.1V16H8V18M20.2,13C20.3,13%2020.5,13.1%2020.6,13.2L21.9,14.5C22.1,14.7%2022.1,15.1%2021.9,15.3L20.9,16.3L18.8,14.2L19.8,13.2C19.9,13.1%2020,13%2020.2,13M20.2,16.9L14.1,23H12V20.9L18.1,14.8L20.2,16.9Z'%20/%3e%3c/svg%3e",Yl="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z'%20/%3e%3c/svg%3e";var fp={exports:{}};var Cfe=fp.exports,Q3;function Sfe(){return Q3||(Q3=1,(function(e,t){(function(){var n,a="4.17.21",r=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",i="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",A=500,d="__lodash_placeholder__",f=1,m=2,h=4,v=1,y=2,g=1,w=2,b=4,x=8,T=16,U=32,k=64,S=128,E=256,C=512,P=30,F="...",N=800,L=16,ie=1,le=2,Q=3,Z=1/0,ce=9007199254740991,J=17976931348623157e292,se=NaN,G=4294967295,D=G-1,j=G>>>1,ne=[["ary",S],["bind",g],["bindKey",w],["curry",x],["curryRight",T],["flip",C],["partial",U],["partialRight",k],["rearg",E]],H="[object Arguments]",te="[object Array]",Y="[object AsyncFunction]",K="[object Boolean]",X="[object Date]",ae="[object DOMException]",oe="[object Error]",W="[object Function]",de="[object GeneratorFunction]",Ae="[object Map]",Ce="[object Number]",De="[object Null]",xe="[object Object]",ke="[object Promise]",Ee="[object Proxy]",ye="[object RegExp]",we="[object Set]",at="[object String]",Je="[object Symbol]",rt="[object Undefined]",it="[object WeakMap]",Ie="[object WeakSet]",Ve="[object ArrayBuffer]",ft="[object DataView]",Ft="[object Float32Array]",tt="[object Float64Array]",Ge="[object Int8Array]",pt="[object Int16Array]",ht="[object Int32Array]",Nt="[object Uint8Array]",nn="[object Uint8ClampedArray]",yn="[object Uint16Array]",qn="[object Uint32Array]",$t=/\b__p \+= '';/g,Tt=/\b(__p \+=) '' \+/g,ut=/(__e\(.*?\)|\b__t\)) \+\n'';/g,kt=/&(?:amp|lt|gt|quot|#39);/g,Zt=/[&<>"']/g,je=RegExp(kt.source),Ke=RegExp(Zt.source),wt=/<%-([\s\S]+?)%>/g,Vt=/<%([\s\S]+?)%>/g,qt=/<%=([\s\S]+?)%>/g,vt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Kt=/^\w*$/,Pt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Gn=/[\\^$.*+?()[\]{}|]/g,Nn=RegExp(Gn.source),On=/^\s+/,Yt=/\s/,Tn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Te=/\{\n\/\* \[wrapped with (.+)\] \*/,He=/,? & /,Ue=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Le=/[()=,{}\[\]\/\s]/,Qe=/\\(\\)?/g,pe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,re=/\w*$/,ge=/^[-+]0x[0-9a-f]+$/i,Se=/^0b[01]+$/i,Me=/^\[object .+?Constructor\]$/,Ze=/^0o[0-7]+$/i,nt=/^(?:0|[1-9]\d*)$/,et=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,lt=/($^)/,bt=/['\n\r\u2028\u2029\\]/g,It="\\ud800-\\udfff",an="\\u0300-\\u036f",En="\\ufe20-\\ufe2f",hn="\\u20d0-\\u20ff",Cn=an+En+hn,Da="\\u2700-\\u27bf",Nr="a-z\\xdf-\\xf6\\xf8-\\xff",jr="\\xac\\xb1\\xd7\\xf7",ys="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",_s="\\u2000-\\u206f",Ga=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Qo="A-Z\\xc0-\\xd6\\xd8-\\xde",ws="\\ufe0e\\ufe0f",Lt=jr+ys+_s+Ga,Br="[']",Vn="["+It+"]",Co="["+Lt+"]",js="["+Cn+"]",$e="\\d+",ue="["+Da+"]",xt="["+Nr+"]",Ut="[^"+It+Lt+$e+Da+Nr+Qo+"]",_t="\\ud83c[\\udffb-\\udfff]",dn="(?:"+js+"|"+_t+")",zt="[^"+It+"]",In="(?:\\ud83c[\\udde6-\\uddff]){2}",vn="[\\ud800-\\udbff][\\udc00-\\udfff]",Ya="["+Qo+"]",Sa="\\u200d",$u="(?:"+xt+"|"+Ut+")",Wf="(?:"+Ya+"|"+Ut+")",jf="(?:"+Br+"(?:d|ll|m|re|s|t|ve))?",ir="(?:"+Br+"(?:D|LL|M|RE|S|T|VE))?",Zd=dn+"?",nl="["+ws+"]?",Ps="(?:"+Sa+"(?:"+[zt,In,vn].join("|")+")"+nl+Zd+")*",Go="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",qs="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",_r=nl+Zd+Ps,Zl="(?:"+[ue,In,vn].join("|")+")"+_r,qf="(?:"+[zt+js+"?",js,In,vn,Vn].join("|")+")",eu=RegExp(Br,"g"),ki=RegExp(js,"g"),vr=RegExp(_t+"(?="+_t+")|"+qf+_r,"g"),bv=RegExp([Ya+"?"+xt+"+"+jf+"(?="+[Co,Ya,"$"].join("|")+")",Wf+"+"+ir+"(?="+[Co,Ya+$u,"$"].join("|")+")",Ya+"?"+$u+"+"+jf,Ya+"+"+ir,qs,Go,$e,Zl].join("|"),"g"),xv=RegExp("["+Sa+It+Cn+ws+"]"),ii=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,al=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],eA=-1,ba={};ba[Ft]=ba[tt]=ba[Ge]=ba[pt]=ba[ht]=ba[Nt]=ba[nn]=ba[yn]=ba[qn]=!0,ba[H]=ba[te]=ba[Ve]=ba[K]=ba[ft]=ba[X]=ba[oe]=ba[W]=ba[Ae]=ba[Ce]=ba[xe]=ba[ye]=ba[we]=ba[at]=ba[it]=!1;var Ye={};Ye[H]=Ye[te]=Ye[Ve]=Ye[ft]=Ye[K]=Ye[X]=Ye[Ft]=Ye[tt]=Ye[Ge]=Ye[pt]=Ye[ht]=Ye[Ae]=Ye[Ce]=Ye[xe]=Ye[ye]=Ye[we]=Ye[at]=Ye[Je]=Ye[Nt]=Ye[nn]=Ye[yn]=Ye[qn]=!0,Ye[oe]=Ye[W]=Ye[it]=!1;var pr={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},tA={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},wr={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},yb={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},_b=parseFloat,Qg=parseInt,Cv=typeof K1=="object"&&K1&&K1.Object===Object&&K1,Gg=typeof self=="object"&&self&&self.Object===Object&&self,kr=Cv||Gg||Function("return this")(),Yf=t&&!t.nodeType&&t,Ds=Yf&&!0&&e&&!e.nodeType&&e,Sv=Ds&&Ds.exports===Yf,Ev=Sv&&Cv.process,bs=(function(){try{var At=Ds&&Ds.require&&Ds.require("util").types;return At||Ev&&Ev.binding&&Ev.binding("util")}catch{}})(),Bv=bs&&bs.isArrayBuffer,Xf=bs&&bs.isDate,nA=bs&&bs.isMap,kv=bs&&bs.isRegExp,aA=bs&&bs.isSet,zg=bs&&bs.isTypedArray;function Ys(At,Dt,Et){switch(Et.length){case 0:return At.call(Dt);case 1:return At.call(Dt,Et[0]);case 2:return At.call(Dt,Et[0],Et[1]);case 3:return At.call(Dt,Et[0],Et[1],Et[2])}return At.apply(Dt,Et)}function rA(At,Dt,Et,fn){for(var zn=-1,Ba=At==null?0:At.length;++zn<Ba;){var os=At[zn];Dt(fn,os,Et(os),At)}return fn}function So(At,Dt){for(var Et=-1,fn=At==null?0:At.length;++Et<fn&&Dt(At[Et],Et,At)!==!1;);return At}function Kg(At,Dt){for(var Et=At==null?0:At.length;Et--&&Dt(At[Et],Et,At)!==!1;);return At}function Jf(At,Dt){for(var Et=-1,fn=At==null?0:At.length;++Et<fn;)if(!Dt(At[Et],Et,At))return!1;return!0}function Ti(At,Dt){for(var Et=-1,fn=At==null?0:At.length,zn=0,Ba=[];++Et<fn;){var os=At[Et];Dt(os,Et,At)&&(Ba[zn++]=os)}return Ba}function sA(At,Dt){var Et=At==null?0:At.length;return!!Et&&li(At,Dt,0)>-1}function Mc(At,Dt,Et){for(var fn=-1,zn=At==null?0:At.length;++fn<zn;)if(Et(Dt,At[fn]))return!0;return!1}function Xa(At,Dt){for(var Et=-1,fn=At==null?0:At.length,zn=Array(fn);++Et<fn;)zn[Et]=Dt(At[Et],Et,At);return zn}function rl(At,Dt){for(var Et=-1,fn=Dt.length,zn=At.length;++Et<fn;)At[zn+Et]=Dt[Et];return At}function sl(At,Dt,Et,fn){var zn=-1,Ba=At==null?0:At.length;for(fn&&Ba&&(Et=At[++zn]);++zn<Ba;)Et=Dt(Et,At[zn],zn,At);return Et}function Wg(At,Dt,Et,fn){var zn=At==null?0:At.length;for(fn&&zn&&(Et=At[--zn]);zn--;)Et=Dt(Et,At[zn],zn,At);return Et}function Zf(At,Dt){for(var Et=-1,fn=At==null?0:At.length;++Et<fn;)if(Dt(At[Et],Et,At))return!0;return!1}var jg=Re("length");function qg(At){return At.split("")}function zo(At){return At.match(Ue)||[]}function Tv(At,Dt,Et){var fn;return Et(At,function(zn,Ba,os){if(Dt(zn,Ba,os))return fn=Ba,!1}),fn}function oA(At,Dt,Et,fn){for(var zn=At.length,Ba=Et+(fn?1:-1);fn?Ba--:++Ba<zn;)if(Dt(At[Ba],Ba,At))return Ba;return-1}function li(At,Dt,Et){return Dt===Dt?cK(At,Dt,Et):oA(At,fe,Et)}function V(At,Dt,Et,fn){for(var zn=Et-1,Ba=At.length;++zn<Ba;)if(fn(At[zn],Dt))return zn;return-1}function fe(At){return At!==At}function be(At,Dt){var Et=At==null?0:At.length;return Et?Ea(At,Dt)/Et:se}function Re(At){return function(Dt){return Dt==null?n:Dt[At]}}function gt(At){return function(Dt){return At==null?n:At[Dt]}}function Bt(At,Dt,Et,fn,zn){return zn(At,function(Ba,os,Ja){Et=fn?(fn=!1,Ba):Dt(Et,Ba,os,Ja)}),Et}function tn(At,Dt){var Et=At.length;for(At.sort(Dt);Et--;)At[Et]=At[Et].value;return At}function Ea(At,Dt){for(var Et,fn=-1,zn=At.length;++fn<zn;){var Ba=Dt(At[fn]);Ba!==n&&(Et=Et===n?Ba:Et+Ba)}return Et}function Vr(At,Dt){for(var Et=-1,fn=Array(At);++Et<At;)fn[Et]=Dt(Et);return fn}function fa(At,Dt){return Xa(Dt,function(Et){return[Et,At[Et]]})}function ss(At){return At&&At.slice(0,dI(At)+1).replace(On,"")}function Ua(At){return function(Dt){return At(Dt)}}function tu(At,Dt){return Xa(Dt,function(Et){return At[Et]})}function Us(At,Dt){return At.has(Dt)}function iA(At,Dt){for(var Et=-1,fn=At.length;++Et<fn&&li(Dt,At[Et],0)>-1;);return Et}function em(At,Dt){for(var Et=At.length;Et--&&li(Dt,At[Et],0)>-1;);return Et}function nK(At,Dt){for(var Et=At.length,fn=0;Et--;)At[Et]===Dt&&++fn;return fn}var aK=gt(pr),rK=gt(tA);function sK(At){return"\\"+yb[At]}function oK(At,Dt){return At==null?n:At[Dt]}function tm(At){return xv.test(At)}function iK(At){return ii.test(At)}function lK(At){for(var Dt,Et=[];!(Dt=At.next()).done;)Et.push(Dt.value);return Et}function wb(At){var Dt=-1,Et=Array(At.size);return At.forEach(function(fn,zn){Et[++Dt]=[zn,fn]}),Et}function cI(At,Dt){return function(Et){return At(Dt(Et))}}function Oc(At,Dt){for(var Et=-1,fn=At.length,zn=0,Ba=[];++Et<fn;){var os=At[Et];(os===Dt||os===d)&&(At[Et]=d,Ba[zn++]=Et)}return Ba}function Yg(At){var Dt=-1,Et=Array(At.size);return At.forEach(function(fn){Et[++Dt]=fn}),Et}function uK(At){var Dt=-1,Et=Array(At.size);return At.forEach(function(fn){Et[++Dt]=[fn,fn]}),Et}function cK(At,Dt,Et){for(var fn=Et-1,zn=At.length;++fn<zn;)if(At[fn]===Dt)return fn;return-1}function dK(At,Dt,Et){for(var fn=Et+1;fn--;)if(At[fn]===Dt)return fn;return fn}function nm(At){return tm(At)?fK(At):jg(At)}function ol(At){return tm(At)?mK(At):qg(At)}function dI(At){for(var Dt=At.length;Dt--&&Yt.test(At.charAt(Dt)););return Dt}var AK=gt(wr);function fK(At){for(var Dt=vr.lastIndex=0;vr.test(At);)++Dt;return Dt}function mK(At){return At.match(vr)||[]}function hK(At){return At.match(bv)||[]}var vK=(function At(Dt){Dt=Dt==null?kr:am.defaults(kr.Object(),Dt,am.pick(kr,al));var Et=Dt.Array,fn=Dt.Date,zn=Dt.Error,Ba=Dt.Function,os=Dt.Math,Ja=Dt.Object,bb=Dt.RegExp,pK=Dt.String,Ii=Dt.TypeError,Xg=Et.prototype,gK=Ba.prototype,rm=Ja.prototype,Jg=Dt["__core-js_shared__"],Zg=gK.toString,Ha=rm.hasOwnProperty,yK=0,AI=(function(){var _=/[^.]+$/.exec(Jg&&Jg.keys&&Jg.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""})(),e1=rm.toString,_K=Zg.call(Ja),wK=kr._,bK=bb("^"+Zg.call(Ha).replace(Gn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),t1=Sv?Dt.Buffer:n,Hc=Dt.Symbol,n1=Dt.Uint8Array,fI=t1?t1.allocUnsafe:n,a1=cI(Ja.getPrototypeOf,Ja),mI=Ja.create,hI=rm.propertyIsEnumerable,r1=Xg.splice,vI=Hc?Hc.isConcatSpreadable:n,Iv=Hc?Hc.iterator:n,lA=Hc?Hc.toStringTag:n,s1=(function(){try{var _=fA(Ja,"defineProperty");return _({},"",{}),_}catch{}})(),xK=Dt.clearTimeout!==kr.clearTimeout&&Dt.clearTimeout,CK=fn&&fn.now!==kr.Date.now&&fn.now,SK=Dt.setTimeout!==kr.setTimeout&&Dt.setTimeout,o1=os.ceil,i1=os.floor,xb=Ja.getOwnPropertySymbols,EK=t1?t1.isBuffer:n,pI=Dt.isFinite,BK=Xg.join,kK=cI(Ja.keys,Ja),is=os.max,Xs=os.min,TK=fn.now,IK=Dt.parseInt,gI=os.random,FK=Xg.reverse,Cb=fA(Dt,"DataView"),Fv=fA(Dt,"Map"),Sb=fA(Dt,"Promise"),sm=fA(Dt,"Set"),Pv=fA(Dt,"WeakMap"),Dv=fA(Ja,"create"),l1=Pv&&new Pv,om={},PK=mA(Cb),DK=mA(Fv),UK=mA(Sb),RK=mA(sm),NK=mA(Pv),u1=Hc?Hc.prototype:n,Uv=u1?u1.valueOf:n,yI=u1?u1.toString:n;function Pe(_){if(Tr(_)&&!Wn(_)&&!(_ instanceof oa)){if(_ instanceof Fi)return _;if(Ha.call(_,"__wrapped__"))return _F(_)}return new Fi(_)}var im=(function(){function _(){}return function(B){if(!br(B))return{};if(mI)return mI(B);_.prototype=B;var z=new _;return _.prototype=n,z}})();function c1(){}function Fi(_,B){this.__wrapped__=_,this.__actions__=[],this.__chain__=!!B,this.__index__=0,this.__values__=n}Pe.templateSettings={escape:wt,evaluate:Vt,interpolate:qt,variable:"",imports:{_:Pe}},Pe.prototype=c1.prototype,Pe.prototype.constructor=Pe,Fi.prototype=im(c1.prototype),Fi.prototype.constructor=Fi;function oa(_){this.__wrapped__=_,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=G,this.__views__=[]}function VK(){var _=new oa(this.__wrapped__);return _.__actions__=Ko(this.__actions__),_.__dir__=this.__dir__,_.__filtered__=this.__filtered__,_.__iteratees__=Ko(this.__iteratees__),_.__takeCount__=this.__takeCount__,_.__views__=Ko(this.__views__),_}function LK(){if(this.__filtered__){var _=new oa(this);_.__dir__=-1,_.__filtered__=!0}else _=this.clone(),_.__dir__*=-1;return _}function MK(){var _=this.__wrapped__.value(),B=this.__dir__,z=Wn(_),he=B<0,Be=z?_.length:0,Ne=XW(0,Be,this.__views__),Xe=Ne.start,st=Ne.end,mt=st-Xe,Mt=he?st:Xe-1,Ot=this.__iteratees__,Gt=Ot.length,rn=0,pn=Xs(mt,this.__takeCount__);if(!z||!he&&Be==mt&&pn==mt)return QI(_,this.__actions__);var Fn=[];e:for(;mt--&&rn<pn;){Mt+=B;for(var ta=-1,Pn=_[Mt];++ta<Gt;){var sa=Ot[ta],ua=sa.iteratee,di=sa.type,ko=ua(Pn);if(di==le)Pn=ko;else if(!ko){if(di==ie)continue e;break e}}Fn[rn++]=Pn}return Fn}oa.prototype=im(c1.prototype),oa.prototype.constructor=oa;function uA(_){var B=-1,z=_==null?0:_.length;for(this.clear();++B<z;){var he=_[B];this.set(he[0],he[1])}}function OK(){this.__data__=Dv?Dv(null):{},this.size=0}function HK(_){var B=this.has(_)&&delete this.__data__[_];return this.size-=B?1:0,B}function $K(_){var B=this.__data__;if(Dv){var z=B[_];return z===c?n:z}return Ha.call(B,_)?B[_]:n}function QK(_){var B=this.__data__;return Dv?B[_]!==n:Ha.call(B,_)}function GK(_,B){var z=this.__data__;return this.size+=this.has(_)?0:1,z[_]=Dv&&B===n?c:B,this}uA.prototype.clear=OK,uA.prototype.delete=HK,uA.prototype.get=$K,uA.prototype.has=QK,uA.prototype.set=GK;function Qu(_){var B=-1,z=_==null?0:_.length;for(this.clear();++B<z;){var he=_[B];this.set(he[0],he[1])}}function zK(){this.__data__=[],this.size=0}function KK(_){var B=this.__data__,z=d1(B,_);if(z<0)return!1;var he=B.length-1;return z==he?B.pop():r1.call(B,z,1),--this.size,!0}function WK(_){var B=this.__data__,z=d1(B,_);return z<0?n:B[z][1]}function jK(_){return d1(this.__data__,_)>-1}function qK(_,B){var z=this.__data__,he=d1(z,_);return he<0?(++this.size,z.push([_,B])):z[he][1]=B,this}Qu.prototype.clear=zK,Qu.prototype.delete=KK,Qu.prototype.get=WK,Qu.prototype.has=jK,Qu.prototype.set=qK;function Gu(_){var B=-1,z=_==null?0:_.length;for(this.clear();++B<z;){var he=_[B];this.set(he[0],he[1])}}function YK(){this.size=0,this.__data__={hash:new uA,map:new(Fv||Qu),string:new uA}}function XK(_){var B=x1(this,_).delete(_);return this.size-=B?1:0,B}function JK(_){return x1(this,_).get(_)}function ZK(_){return x1(this,_).has(_)}function eW(_,B){var z=x1(this,_),he=z.size;return z.set(_,B),this.size+=z.size==he?0:1,this}Gu.prototype.clear=YK,Gu.prototype.delete=XK,Gu.prototype.get=JK,Gu.prototype.has=ZK,Gu.prototype.set=eW;function cA(_){var B=-1,z=_==null?0:_.length;for(this.__data__=new Gu;++B<z;)this.add(_[B])}function tW(_){return this.__data__.set(_,c),this}function nW(_){return this.__data__.has(_)}cA.prototype.add=cA.prototype.push=tW,cA.prototype.has=nW;function il(_){var B=this.__data__=new Qu(_);this.size=B.size}function aW(){this.__data__=new Qu,this.size=0}function rW(_){var B=this.__data__,z=B.delete(_);return this.size=B.size,z}function sW(_){return this.__data__.get(_)}function oW(_){return this.__data__.has(_)}function iW(_,B){var z=this.__data__;if(z instanceof Qu){var he=z.__data__;if(!Fv||he.length<r-1)return he.push([_,B]),this.size=++z.size,this;z=this.__data__=new Gu(he)}return z.set(_,B),this.size=z.size,this}il.prototype.clear=aW,il.prototype.delete=rW,il.prototype.get=sW,il.prototype.has=oW,il.prototype.set=iW;function _I(_,B){var z=Wn(_),he=!z&&hA(_),Be=!z&&!he&&Kc(_),Ne=!z&&!he&&!Be&&dm(_),Xe=z||he||Be||Ne,st=Xe?Vr(_.length,pK):[],mt=st.length;for(var Mt in _)(B||Ha.call(_,Mt))&&!(Xe&&(Mt=="length"||Be&&(Mt=="offset"||Mt=="parent")||Ne&&(Mt=="buffer"||Mt=="byteLength"||Mt=="byteOffset")||ju(Mt,mt)))&&st.push(Mt);return st}function wI(_){var B=_.length;return B?_[Nb(0,B-1)]:n}function lW(_,B){return C1(Ko(_),dA(B,0,_.length))}function uW(_){return C1(Ko(_))}function Eb(_,B,z){(z!==n&&!ll(_[B],z)||z===n&&!(B in _))&&zu(_,B,z)}function Rv(_,B,z){var he=_[B];(!(Ha.call(_,B)&&ll(he,z))||z===n&&!(B in _))&&zu(_,B,z)}function d1(_,B){for(var z=_.length;z--;)if(ll(_[z][0],B))return z;return-1}function cW(_,B,z,he){return $c(_,function(Be,Ne,Xe){B(he,Be,z(Be),Xe)}),he}function bI(_,B){return _&&au(B,xs(B),_)}function dW(_,B){return _&&au(B,jo(B),_)}function zu(_,B,z){B=="__proto__"&&s1?s1(_,B,{configurable:!0,enumerable:!0,value:z,writable:!0}):_[B]=z}function Bb(_,B){for(var z=-1,he=B.length,Be=Et(he),Ne=_==null;++z<he;)Be[z]=Ne?n:ix(_,B[z]);return Be}function dA(_,B,z){return _===_&&(z!==n&&(_=_<=z?_:z),B!==n&&(_=_>=B?_:B)),_}function Pi(_,B,z,he,Be,Ne){var Xe,st=B&f,mt=B&m,Mt=B&h;if(z&&(Xe=Be?z(_,he,Be,Ne):z(_)),Xe!==n)return Xe;if(!br(_))return _;var Ot=Wn(_);if(Ot){if(Xe=ZW(_),!st)return Ko(_,Xe)}else{var Gt=Js(_),rn=Gt==W||Gt==de;if(Kc(_))return KI(_,st);if(Gt==xe||Gt==H||rn&&!Be){if(Xe=mt||rn?{}:dF(_),!st)return mt?$W(_,dW(Xe,_)):HW(_,bI(Xe,_))}else{if(!Ye[Gt])return Be?_:{};Xe=ej(_,Gt,st)}}Ne||(Ne=new il);var pn=Ne.get(_);if(pn)return pn;Ne.set(_,Xe),OF(_)?_.forEach(function(Pn){Xe.add(Pi(Pn,B,z,Pn,_,Ne))}):LF(_)&&_.forEach(function(Pn,sa){Xe.set(sa,Pi(Pn,B,z,sa,_,Ne))});var Fn=Mt?mt?Wb:Kb:mt?jo:xs,ta=Ot?n:Fn(_);return So(ta||_,function(Pn,sa){ta&&(sa=Pn,Pn=_[sa]),Rv(Xe,sa,Pi(Pn,B,z,sa,_,Ne))}),Xe}function AW(_){var B=xs(_);return function(z){return xI(z,_,B)}}function xI(_,B,z){var he=z.length;if(_==null)return!he;for(_=Ja(_);he--;){var Be=z[he],Ne=B[Be],Xe=_[Be];if(Xe===n&&!(Be in _)||!Ne(Xe))return!1}return!0}function CI(_,B,z){if(typeof _!="function")throw new Ii(o);return $v(function(){_.apply(n,z)},B)}function Nv(_,B,z,he){var Be=-1,Ne=sA,Xe=!0,st=_.length,mt=[],Mt=B.length;if(!st)return mt;z&&(B=Xa(B,Ua(z))),he?(Ne=Mc,Xe=!1):B.length>=r&&(Ne=Us,Xe=!1,B=new cA(B));e:for(;++Be<st;){var Ot=_[Be],Gt=z==null?Ot:z(Ot);if(Ot=he||Ot!==0?Ot:0,Xe&&Gt===Gt){for(var rn=Mt;rn--;)if(B[rn]===Gt)continue e;mt.push(Ot)}else Ne(B,Gt,he)||mt.push(Ot)}return mt}var $c=XI(nu),SI=XI(Tb,!0);function fW(_,B){var z=!0;return $c(_,function(he,Be,Ne){return z=!!B(he,Be,Ne),z}),z}function A1(_,B,z){for(var he=-1,Be=_.length;++he<Be;){var Ne=_[he],Xe=B(Ne);if(Xe!=null&&(st===n?Xe===Xe&&!ci(Xe):z(Xe,st)))var st=Xe,mt=Ne}return mt}function mW(_,B,z,he){var Be=_.length;for(z=Zn(z),z<0&&(z=-z>Be?0:Be+z),he=he===n||he>Be?Be:Zn(he),he<0&&(he+=Be),he=z>he?0:$F(he);z<he;)_[z++]=B;return _}function EI(_,B){var z=[];return $c(_,function(he,Be,Ne){B(he,Be,Ne)&&z.push(he)}),z}function Rs(_,B,z,he,Be){var Ne=-1,Xe=_.length;for(z||(z=nj),Be||(Be=[]);++Ne<Xe;){var st=_[Ne];B>0&&z(st)?B>1?Rs(st,B-1,z,he,Be):rl(Be,st):he||(Be[Be.length]=st)}return Be}var kb=JI(),BI=JI(!0);function nu(_,B){return _&&kb(_,B,xs)}function Tb(_,B){return _&&BI(_,B,xs)}function f1(_,B){return Ti(B,function(z){return qu(_[z])})}function AA(_,B){B=Gc(B,_);for(var z=0,he=B.length;_!=null&&z<he;)_=_[ru(B[z++])];return z&&z==he?_:n}function kI(_,B,z){var he=B(_);return Wn(_)?he:rl(he,z(_))}function Eo(_){return _==null?_===n?rt:De:lA&&lA in Ja(_)?YW(_):uj(_)}function Ib(_,B){return _>B}function hW(_,B){return _!=null&&Ha.call(_,B)}function vW(_,B){return _!=null&&B in Ja(_)}function pW(_,B,z){return _>=Xs(B,z)&&_<is(B,z)}function Fb(_,B,z){for(var he=z?Mc:sA,Be=_[0].length,Ne=_.length,Xe=Ne,st=Et(Ne),mt=1/0,Mt=[];Xe--;){var Ot=_[Xe];Xe&&B&&(Ot=Xa(Ot,Ua(B))),mt=Xs(Ot.length,mt),st[Xe]=!z&&(B||Be>=120&&Ot.length>=120)?new cA(Xe&&Ot):n}Ot=_[0];var Gt=-1,rn=st[0];e:for(;++Gt<Be&&Mt.length<mt;){var pn=Ot[Gt],Fn=B?B(pn):pn;if(pn=z||pn!==0?pn:0,!(rn?Us(rn,Fn):he(Mt,Fn,z))){for(Xe=Ne;--Xe;){var ta=st[Xe];if(!(ta?Us(ta,Fn):he(_[Xe],Fn,z)))continue e}rn&&rn.push(Fn),Mt.push(pn)}}return Mt}function gW(_,B,z,he){return nu(_,function(Be,Ne,Xe){B(he,z(Be),Ne,Xe)}),he}function Vv(_,B,z){B=Gc(B,_),_=hF(_,B);var he=_==null?_:_[ru(Ui(B))];return he==null?n:Ys(he,_,z)}function TI(_){return Tr(_)&&Eo(_)==H}function yW(_){return Tr(_)&&Eo(_)==Ve}function _W(_){return Tr(_)&&Eo(_)==X}function Lv(_,B,z,he,Be){return _===B?!0:_==null||B==null||!Tr(_)&&!Tr(B)?_!==_&&B!==B:wW(_,B,z,he,Lv,Be)}function wW(_,B,z,he,Be,Ne){var Xe=Wn(_),st=Wn(B),mt=Xe?te:Js(_),Mt=st?te:Js(B);mt=mt==H?xe:mt,Mt=Mt==H?xe:Mt;var Ot=mt==xe,Gt=Mt==xe,rn=mt==Mt;if(rn&&Kc(_)){if(!Kc(B))return!1;Xe=!0,Ot=!1}if(rn&&!Ot)return Ne||(Ne=new il),Xe||dm(_)?lF(_,B,z,he,Be,Ne):jW(_,B,mt,z,he,Be,Ne);if(!(z&v)){var pn=Ot&&Ha.call(_,"__wrapped__"),Fn=Gt&&Ha.call(B,"__wrapped__");if(pn||Fn){var ta=pn?_.value():_,Pn=Fn?B.value():B;return Ne||(Ne=new il),Be(ta,Pn,z,he,Ne)}}return rn?(Ne||(Ne=new il),qW(_,B,z,he,Be,Ne)):!1}function bW(_){return Tr(_)&&Js(_)==Ae}function Pb(_,B,z,he){var Be=z.length,Ne=Be,Xe=!he;if(_==null)return!Ne;for(_=Ja(_);Be--;){var st=z[Be];if(Xe&&st[2]?st[1]!==_[st[0]]:!(st[0]in _))return!1}for(;++Be<Ne;){st=z[Be];var mt=st[0],Mt=_[mt],Ot=st[1];if(Xe&&st[2]){if(Mt===n&&!(mt in _))return!1}else{var Gt=new il;if(he)var rn=he(Mt,Ot,mt,_,B,Gt);if(!(rn===n?Lv(Ot,Mt,v|y,he,Gt):rn))return!1}}return!0}function II(_){if(!br(_)||rj(_))return!1;var B=qu(_)?bK:Me;return B.test(mA(_))}function xW(_){return Tr(_)&&Eo(_)==ye}function CW(_){return Tr(_)&&Js(_)==we}function SW(_){return Tr(_)&&I1(_.length)&&!!ba[Eo(_)]}function FI(_){return typeof _=="function"?_:_==null?qo:typeof _=="object"?Wn(_)?UI(_[0],_[1]):DI(_):ZF(_)}function Db(_){if(!Hv(_))return kK(_);var B=[];for(var z in Ja(_))Ha.call(_,z)&&z!="constructor"&&B.push(z);return B}function EW(_){if(!br(_))return lj(_);var B=Hv(_),z=[];for(var he in _)he=="constructor"&&(B||!Ha.call(_,he))||z.push(he);return z}function Ub(_,B){return _<B}function PI(_,B){var z=-1,he=Wo(_)?Et(_.length):[];return $c(_,function(Be,Ne,Xe){he[++z]=B(Be,Ne,Xe)}),he}function DI(_){var B=qb(_);return B.length==1&&B[0][2]?fF(B[0][0],B[0][1]):function(z){return z===_||Pb(z,_,B)}}function UI(_,B){return Xb(_)&&AF(B)?fF(ru(_),B):function(z){var he=ix(z,_);return he===n&&he===B?lx(z,_):Lv(B,he,v|y)}}function m1(_,B,z,he,Be){_!==B&&kb(B,function(Ne,Xe){if(Be||(Be=new il),br(Ne))BW(_,B,Xe,z,m1,he,Be);else{var st=he?he(Zb(_,Xe),Ne,Xe+"",_,B,Be):n;st===n&&(st=Ne),Eb(_,Xe,st)}},jo)}function BW(_,B,z,he,Be,Ne,Xe){var st=Zb(_,z),mt=Zb(B,z),Mt=Xe.get(mt);if(Mt){Eb(_,z,Mt);return}var Ot=Ne?Ne(st,mt,z+"",_,B,Xe):n,Gt=Ot===n;if(Gt){var rn=Wn(mt),pn=!rn&&Kc(mt),Fn=!rn&&!pn&&dm(mt);Ot=mt,rn||pn||Fn?Wn(st)?Ot=st:Lr(st)?Ot=Ko(st):pn?(Gt=!1,Ot=KI(mt,!0)):Fn?(Gt=!1,Ot=WI(mt,!0)):Ot=[]:Qv(mt)||hA(mt)?(Ot=st,hA(st)?Ot=QF(st):(!br(st)||qu(st))&&(Ot=dF(mt))):Gt=!1}Gt&&(Xe.set(mt,Ot),Be(Ot,mt,he,Ne,Xe),Xe.delete(mt)),Eb(_,z,Ot)}function RI(_,B){var z=_.length;if(z)return B+=B<0?z:0,ju(B,z)?_[B]:n}function NI(_,B,z){B.length?B=Xa(B,function(Ne){return Wn(Ne)?function(Xe){return AA(Xe,Ne.length===1?Ne[0]:Ne)}:Ne}):B=[qo];var he=-1;B=Xa(B,Ua(Bn()));var Be=PI(_,function(Ne,Xe,st){var mt=Xa(B,function(Mt){return Mt(Ne)});return{criteria:mt,index:++he,value:Ne}});return tn(Be,function(Ne,Xe){return OW(Ne,Xe,z)})}function kW(_,B){return VI(_,B,function(z,he){return lx(_,he)})}function VI(_,B,z){for(var he=-1,Be=B.length,Ne={};++he<Be;){var Xe=B[he],st=AA(_,Xe);z(st,Xe)&&Mv(Ne,Gc(Xe,_),st)}return Ne}function TW(_){return function(B){return AA(B,_)}}function Rb(_,B,z,he){var Be=he?V:li,Ne=-1,Xe=B.length,st=_;for(_===B&&(B=Ko(B)),z&&(st=Xa(_,Ua(z)));++Ne<Xe;)for(var mt=0,Mt=B[Ne],Ot=z?z(Mt):Mt;(mt=Be(st,Ot,mt,he))>-1;)st!==_&&r1.call(st,mt,1),r1.call(_,mt,1);return _}function LI(_,B){for(var z=_?B.length:0,he=z-1;z--;){var Be=B[z];if(z==he||Be!==Ne){var Ne=Be;ju(Be)?r1.call(_,Be,1):Mb(_,Be)}}return _}function Nb(_,B){return _+i1(gI()*(B-_+1))}function IW(_,B,z,he){for(var Be=-1,Ne=is(o1((B-_)/(z||1)),0),Xe=Et(Ne);Ne--;)Xe[he?Ne:++Be]=_,_+=z;return Xe}function Vb(_,B){var z="";if(!_||B<1||B>ce)return z;do B%2&&(z+=_),B=i1(B/2),B&&(_+=_);while(B);return z}function na(_,B){return ex(mF(_,B,qo),_+"")}function FW(_){return wI(Am(_))}function PW(_,B){var z=Am(_);return C1(z,dA(B,0,z.length))}function Mv(_,B,z,he){if(!br(_))return _;B=Gc(B,_);for(var Be=-1,Ne=B.length,Xe=Ne-1,st=_;st!=null&&++Be<Ne;){var mt=ru(B[Be]),Mt=z;if(mt==="__proto__"||mt==="constructor"||mt==="prototype")return _;if(Be!=Xe){var Ot=st[mt];Mt=he?he(Ot,mt,st):n,Mt===n&&(Mt=br(Ot)?Ot:ju(B[Be+1])?[]:{})}Rv(st,mt,Mt),st=st[mt]}return _}var MI=l1?function(_,B){return l1.set(_,B),_}:qo,DW=s1?function(_,B){return s1(_,"toString",{configurable:!0,enumerable:!1,value:cx(B),writable:!0})}:qo;function UW(_){return C1(Am(_))}function Di(_,B,z){var he=-1,Be=_.length;B<0&&(B=-B>Be?0:Be+B),z=z>Be?Be:z,z<0&&(z+=Be),Be=B>z?0:z-B>>>0,B>>>=0;for(var Ne=Et(Be);++he<Be;)Ne[he]=_[he+B];return Ne}function RW(_,B){var z;return $c(_,function(he,Be,Ne){return z=B(he,Be,Ne),!z}),!!z}function h1(_,B,z){var he=0,Be=_==null?he:_.length;if(typeof B=="number"&&B===B&&Be<=j){for(;he<Be;){var Ne=he+Be>>>1,Xe=_[Ne];Xe!==null&&!ci(Xe)&&(z?Xe<=B:Xe<B)?he=Ne+1:Be=Ne}return Be}return Lb(_,B,qo,z)}function Lb(_,B,z,he){var Be=0,Ne=_==null?0:_.length;if(Ne===0)return 0;B=z(B);for(var Xe=B!==B,st=B===null,mt=ci(B),Mt=B===n;Be<Ne;){var Ot=i1((Be+Ne)/2),Gt=z(_[Ot]),rn=Gt!==n,pn=Gt===null,Fn=Gt===Gt,ta=ci(Gt);if(Xe)var Pn=he||Fn;else Mt?Pn=Fn&&(he||rn):st?Pn=Fn&&rn&&(he||!pn):mt?Pn=Fn&&rn&&!pn&&(he||!ta):pn||ta?Pn=!1:Pn=he?Gt<=B:Gt<B;Pn?Be=Ot+1:Ne=Ot}return Xs(Ne,D)}function OI(_,B){for(var z=-1,he=_.length,Be=0,Ne=[];++z<he;){var Xe=_[z],st=B?B(Xe):Xe;if(!z||!ll(st,mt)){var mt=st;Ne[Be++]=Xe===0?0:Xe}}return Ne}function HI(_){return typeof _=="number"?_:ci(_)?se:+_}function ui(_){if(typeof _=="string")return _;if(Wn(_))return Xa(_,ui)+"";if(ci(_))return yI?yI.call(_):"";var B=_+"";return B=="0"&&1/_==-Z?"-0":B}function Qc(_,B,z){var he=-1,Be=sA,Ne=_.length,Xe=!0,st=[],mt=st;if(z)Xe=!1,Be=Mc;else if(Ne>=r){var Mt=B?null:KW(_);if(Mt)return Yg(Mt);Xe=!1,Be=Us,mt=new cA}else mt=B?[]:st;e:for(;++he<Ne;){var Ot=_[he],Gt=B?B(Ot):Ot;if(Ot=z||Ot!==0?Ot:0,Xe&&Gt===Gt){for(var rn=mt.length;rn--;)if(mt[rn]===Gt)continue e;B&&mt.push(Gt),st.push(Ot)}else Be(mt,Gt,z)||(mt!==st&&mt.push(Gt),st.push(Ot))}return st}function Mb(_,B){return B=Gc(B,_),_=hF(_,B),_==null||delete _[ru(Ui(B))]}function $I(_,B,z,he){return Mv(_,B,z(AA(_,B)),he)}function v1(_,B,z,he){for(var Be=_.length,Ne=he?Be:-1;(he?Ne--:++Ne<Be)&&B(_[Ne],Ne,_););return z?Di(_,he?0:Ne,he?Ne+1:Be):Di(_,he?Ne+1:0,he?Be:Ne)}function QI(_,B){var z=_;return z instanceof oa&&(z=z.value()),sl(B,function(he,Be){return Be.func.apply(Be.thisArg,rl([he],Be.args))},z)}function Ob(_,B,z){var he=_.length;if(he<2)return he?Qc(_[0]):[];for(var Be=-1,Ne=Et(he);++Be<he;)for(var Xe=_[Be],st=-1;++st<he;)st!=Be&&(Ne[Be]=Nv(Ne[Be]||Xe,_[st],B,z));return Qc(Rs(Ne,1),B,z)}function GI(_,B,z){for(var he=-1,Be=_.length,Ne=B.length,Xe={};++he<Be;){var st=he<Ne?B[he]:n;z(Xe,_[he],st)}return Xe}function Hb(_){return Lr(_)?_:[]}function $b(_){return typeof _=="function"?_:qo}function Gc(_,B){return Wn(_)?_:Xb(_,B)?[_]:yF(Ra(_))}var NW=na;function zc(_,B,z){var he=_.length;return z=z===n?he:z,!B&&z>=he?_:Di(_,B,z)}var zI=xK||function(_){return kr.clearTimeout(_)};function KI(_,B){if(B)return _.slice();var z=_.length,he=fI?fI(z):new _.constructor(z);return _.copy(he),he}function Qb(_){var B=new _.constructor(_.byteLength);return new n1(B).set(new n1(_)),B}function VW(_,B){var z=B?Qb(_.buffer):_.buffer;return new _.constructor(z,_.byteOffset,_.byteLength)}function LW(_){var B=new _.constructor(_.source,re.exec(_));return B.lastIndex=_.lastIndex,B}function MW(_){return Uv?Ja(Uv.call(_)):{}}function WI(_,B){var z=B?Qb(_.buffer):_.buffer;return new _.constructor(z,_.byteOffset,_.length)}function jI(_,B){if(_!==B){var z=_!==n,he=_===null,Be=_===_,Ne=ci(_),Xe=B!==n,st=B===null,mt=B===B,Mt=ci(B);if(!st&&!Mt&&!Ne&&_>B||Ne&&Xe&&mt&&!st&&!Mt||he&&Xe&&mt||!z&&mt||!Be)return 1;if(!he&&!Ne&&!Mt&&_<B||Mt&&z&&Be&&!he&&!Ne||st&&z&&Be||!Xe&&Be||!mt)return-1}return 0}function OW(_,B,z){for(var he=-1,Be=_.criteria,Ne=B.criteria,Xe=Be.length,st=z.length;++he<Xe;){var mt=jI(Be[he],Ne[he]);if(mt){if(he>=st)return mt;var Mt=z[he];return mt*(Mt=="desc"?-1:1)}}return _.index-B.index}function qI(_,B,z,he){for(var Be=-1,Ne=_.length,Xe=z.length,st=-1,mt=B.length,Mt=is(Ne-Xe,0),Ot=Et(mt+Mt),Gt=!he;++st<mt;)Ot[st]=B[st];for(;++Be<Xe;)(Gt||Be<Ne)&&(Ot[z[Be]]=_[Be]);for(;Mt--;)Ot[st++]=_[Be++];return Ot}function YI(_,B,z,he){for(var Be=-1,Ne=_.length,Xe=-1,st=z.length,mt=-1,Mt=B.length,Ot=is(Ne-st,0),Gt=Et(Ot+Mt),rn=!he;++Be<Ot;)Gt[Be]=_[Be];for(var pn=Be;++mt<Mt;)Gt[pn+mt]=B[mt];for(;++Xe<st;)(rn||Be<Ne)&&(Gt[pn+z[Xe]]=_[Be++]);return Gt}function Ko(_,B){var z=-1,he=_.length;for(B||(B=Et(he));++z<he;)B[z]=_[z];return B}function au(_,B,z,he){var Be=!z;z||(z={});for(var Ne=-1,Xe=B.length;++Ne<Xe;){var st=B[Ne],mt=he?he(z[st],_[st],st,z,_):n;mt===n&&(mt=_[st]),Be?zu(z,st,mt):Rv(z,st,mt)}return z}function HW(_,B){return au(_,Yb(_),B)}function $W(_,B){return au(_,uF(_),B)}function p1(_,B){return function(z,he){var Be=Wn(z)?rA:cW,Ne=B?B():{};return Be(z,_,Bn(he,2),Ne)}}function lm(_){return na(function(B,z){var he=-1,Be=z.length,Ne=Be>1?z[Be-1]:n,Xe=Be>2?z[2]:n;for(Ne=_.length>3&&typeof Ne=="function"?(Be--,Ne):n,Xe&&Bo(z[0],z[1],Xe)&&(Ne=Be<3?n:Ne,Be=1),B=Ja(B);++he<Be;){var st=z[he];st&&_(B,st,he,Ne)}return B})}function XI(_,B){return function(z,he){if(z==null)return z;if(!Wo(z))return _(z,he);for(var Be=z.length,Ne=B?Be:-1,Xe=Ja(z);(B?Ne--:++Ne<Be)&&he(Xe[Ne],Ne,Xe)!==!1;);return z}}function JI(_){return function(B,z,he){for(var Be=-1,Ne=Ja(B),Xe=he(B),st=Xe.length;st--;){var mt=Xe[_?st:++Be];if(z(Ne[mt],mt,Ne)===!1)break}return B}}function QW(_,B,z){var he=B&g,Be=Ov(_);function Ne(){var Xe=this&&this!==kr&&this instanceof Ne?Be:_;return Xe.apply(he?z:this,arguments)}return Ne}function ZI(_){return function(B){B=Ra(B);var z=tm(B)?ol(B):n,he=z?z[0]:B.charAt(0),Be=z?zc(z,1).join(""):B.slice(1);return he[_]()+Be}}function um(_){return function(B){return sl(XF(YF(B).replace(eu,"")),_,"")}}function Ov(_){return function(){var B=arguments;switch(B.length){case 0:return new _;case 1:return new _(B[0]);case 2:return new _(B[0],B[1]);case 3:return new _(B[0],B[1],B[2]);case 4:return new _(B[0],B[1],B[2],B[3]);case 5:return new _(B[0],B[1],B[2],B[3],B[4]);case 6:return new _(B[0],B[1],B[2],B[3],B[4],B[5]);case 7:return new _(B[0],B[1],B[2],B[3],B[4],B[5],B[6])}var z=im(_.prototype),he=_.apply(z,B);return br(he)?he:z}}function GW(_,B,z){var he=Ov(_);function Be(){for(var Ne=arguments.length,Xe=Et(Ne),st=Ne,mt=cm(Be);st--;)Xe[st]=arguments[st];var Mt=Ne<3&&Xe[0]!==mt&&Xe[Ne-1]!==mt?[]:Oc(Xe,mt);if(Ne-=Mt.length,Ne<z)return rF(_,B,g1,Be.placeholder,n,Xe,Mt,n,n,z-Ne);var Ot=this&&this!==kr&&this instanceof Be?he:_;return Ys(Ot,this,Xe)}return Be}function eF(_){return function(B,z,he){var Be=Ja(B);if(!Wo(B)){var Ne=Bn(z,3);B=xs(B),z=function(st){return Ne(Be[st],st,Be)}}var Xe=_(B,z,he);return Xe>-1?Be[Ne?B[Xe]:Xe]:n}}function tF(_){return Wu(function(B){var z=B.length,he=z,Be=Fi.prototype.thru;for(_&&B.reverse();he--;){var Ne=B[he];if(typeof Ne!="function")throw new Ii(o);if(Be&&!Xe&&b1(Ne)=="wrapper")var Xe=new Fi([],!0)}for(he=Xe?he:z;++he<z;){Ne=B[he];var st=b1(Ne),mt=st=="wrapper"?jb(Ne):n;mt&&Jb(mt[0])&&mt[1]==(S|x|U|E)&&!mt[4].length&&mt[9]==1?Xe=Xe[b1(mt[0])].apply(Xe,mt[3]):Xe=Ne.length==1&&Jb(Ne)?Xe[st]():Xe.thru(Ne)}return function(){var Mt=arguments,Ot=Mt[0];if(Xe&&Mt.length==1&&Wn(Ot))return Xe.plant(Ot).value();for(var Gt=0,rn=z?B[Gt].apply(this,Mt):Ot;++Gt<z;)rn=B[Gt].call(this,rn);return rn}})}function g1(_,B,z,he,Be,Ne,Xe,st,mt,Mt){var Ot=B&S,Gt=B&g,rn=B&w,pn=B&(x|T),Fn=B&C,ta=rn?n:Ov(_);function Pn(){for(var sa=arguments.length,ua=Et(sa),di=sa;di--;)ua[di]=arguments[di];if(pn)var ko=cm(Pn),Ai=nK(ua,ko);if(he&&(ua=qI(ua,he,Be,pn)),Ne&&(ua=YI(ua,Ne,Xe,pn)),sa-=Ai,pn&&sa<Mt){var Mr=Oc(ua,ko);return rF(_,B,g1,Pn.placeholder,z,ua,Mr,st,mt,Mt-sa)}var ul=Gt?z:this,Xu=rn?ul[_]:_;return sa=ua.length,st?ua=cj(ua,st):Fn&&sa>1&&ua.reverse(),Ot&&mt<sa&&(ua.length=mt),this&&this!==kr&&this instanceof Pn&&(Xu=ta||Ov(Xu)),Xu.apply(ul,ua)}return Pn}function nF(_,B){return function(z,he){return gW(z,_,B(he),{})}}function y1(_,B){return function(z,he){var Be;if(z===n&&he===n)return B;if(z!==n&&(Be=z),he!==n){if(Be===n)return he;typeof z=="string"||typeof he=="string"?(z=ui(z),he=ui(he)):(z=HI(z),he=HI(he)),Be=_(z,he)}return Be}}function Gb(_){return Wu(function(B){return B=Xa(B,Ua(Bn())),na(function(z){var he=this;return _(B,function(Be){return Ys(Be,he,z)})})})}function _1(_,B){B=B===n?" ":ui(B);var z=B.length;if(z<2)return z?Vb(B,_):B;var he=Vb(B,o1(_/nm(B)));return tm(B)?zc(ol(he),0,_).join(""):he.slice(0,_)}function zW(_,B,z,he){var Be=B&g,Ne=Ov(_);function Xe(){for(var st=-1,mt=arguments.length,Mt=-1,Ot=he.length,Gt=Et(Ot+mt),rn=this&&this!==kr&&this instanceof Xe?Ne:_;++Mt<Ot;)Gt[Mt]=he[Mt];for(;mt--;)Gt[Mt++]=arguments[++st];return Ys(rn,Be?z:this,Gt)}return Xe}function aF(_){return function(B,z,he){return he&&typeof he!="number"&&Bo(B,z,he)&&(z=he=n),B=Yu(B),z===n?(z=B,B=0):z=Yu(z),he=he===n?B<z?1:-1:Yu(he),IW(B,z,he,_)}}function w1(_){return function(B,z){return typeof B=="string"&&typeof z=="string"||(B=Ri(B),z=Ri(z)),_(B,z)}}function rF(_,B,z,he,Be,Ne,Xe,st,mt,Mt){var Ot=B&x,Gt=Ot?Xe:n,rn=Ot?n:Xe,pn=Ot?Ne:n,Fn=Ot?n:Ne;B|=Ot?U:k,B&=~(Ot?k:U),B&b||(B&=-4);var ta=[_,B,Be,pn,Gt,Fn,rn,st,mt,Mt],Pn=z.apply(n,ta);return Jb(_)&&vF(Pn,ta),Pn.placeholder=he,pF(Pn,_,B)}function zb(_){var B=os[_];return function(z,he){if(z=Ri(z),he=he==null?0:Xs(Zn(he),292),he&&pI(z)){var Be=(Ra(z)+"e").split("e"),Ne=B(Be[0]+"e"+(+Be[1]+he));return Be=(Ra(Ne)+"e").split("e"),+(Be[0]+"e"+(+Be[1]-he))}return B(z)}}var KW=sm&&1/Yg(new sm([,-0]))[1]==Z?function(_){return new sm(_)}:fx;function sF(_){return function(B){var z=Js(B);return z==Ae?wb(B):z==we?uK(B):fa(B,_(B))}}function Ku(_,B,z,he,Be,Ne,Xe,st){var mt=B&w;if(!mt&&typeof _!="function")throw new Ii(o);var Mt=he?he.length:0;if(Mt||(B&=-97,he=Be=n),Xe=Xe===n?Xe:is(Zn(Xe),0),st=st===n?st:Zn(st),Mt-=Be?Be.length:0,B&k){var Ot=he,Gt=Be;he=Be=n}var rn=mt?n:jb(_),pn=[_,B,z,he,Be,Ot,Gt,Ne,Xe,st];if(rn&&ij(pn,rn),_=pn[0],B=pn[1],z=pn[2],he=pn[3],Be=pn[4],st=pn[9]=pn[9]===n?mt?0:_.length:is(pn[9]-Mt,0),!st&&B&(x|T)&&(B&=-25),!B||B==g)var Fn=QW(_,B,z);else B==x||B==T?Fn=GW(_,B,st):(B==U||B==(g|U))&&!Be.length?Fn=zW(_,B,z,he):Fn=g1.apply(n,pn);var ta=rn?MI:vF;return pF(ta(Fn,pn),_,B)}function oF(_,B,z,he){return _===n||ll(_,rm[z])&&!Ha.call(he,z)?B:_}function iF(_,B,z,he,Be,Ne){return br(_)&&br(B)&&(Ne.set(B,_),m1(_,B,n,iF,Ne),Ne.delete(B)),_}function WW(_){return Qv(_)?n:_}function lF(_,B,z,he,Be,Ne){var Xe=z&v,st=_.length,mt=B.length;if(st!=mt&&!(Xe&&mt>st))return!1;var Mt=Ne.get(_),Ot=Ne.get(B);if(Mt&&Ot)return Mt==B&&Ot==_;var Gt=-1,rn=!0,pn=z&y?new cA:n;for(Ne.set(_,B),Ne.set(B,_);++Gt<st;){var Fn=_[Gt],ta=B[Gt];if(he)var Pn=Xe?he(ta,Fn,Gt,B,_,Ne):he(Fn,ta,Gt,_,B,Ne);if(Pn!==n){if(Pn)continue;rn=!1;break}if(pn){if(!Zf(B,function(sa,ua){if(!Us(pn,ua)&&(Fn===sa||Be(Fn,sa,z,he,Ne)))return pn.push(ua)})){rn=!1;break}}else if(!(Fn===ta||Be(Fn,ta,z,he,Ne))){rn=!1;break}}return Ne.delete(_),Ne.delete(B),rn}function jW(_,B,z,he,Be,Ne,Xe){switch(z){case ft:if(_.byteLength!=B.byteLength||_.byteOffset!=B.byteOffset)return!1;_=_.buffer,B=B.buffer;case Ve:return!(_.byteLength!=B.byteLength||!Ne(new n1(_),new n1(B)));case K:case X:case Ce:return ll(+_,+B);case oe:return _.name==B.name&&_.message==B.message;case ye:case at:return _==B+"";case Ae:var st=wb;case we:var mt=he&v;if(st||(st=Yg),_.size!=B.size&&!mt)return!1;var Mt=Xe.get(_);if(Mt)return Mt==B;he|=y,Xe.set(_,B);var Ot=lF(st(_),st(B),he,Be,Ne,Xe);return Xe.delete(_),Ot;case Je:if(Uv)return Uv.call(_)==Uv.call(B)}return!1}function qW(_,B,z,he,Be,Ne){var Xe=z&v,st=Kb(_),mt=st.length,Mt=Kb(B),Ot=Mt.length;if(mt!=Ot&&!Xe)return!1;for(var Gt=mt;Gt--;){var rn=st[Gt];if(!(Xe?rn in B:Ha.call(B,rn)))return!1}var pn=Ne.get(_),Fn=Ne.get(B);if(pn&&Fn)return pn==B&&Fn==_;var ta=!0;Ne.set(_,B),Ne.set(B,_);for(var Pn=Xe;++Gt<mt;){rn=st[Gt];var sa=_[rn],ua=B[rn];if(he)var di=Xe?he(ua,sa,rn,B,_,Ne):he(sa,ua,rn,_,B,Ne);if(!(di===n?sa===ua||Be(sa,ua,z,he,Ne):di)){ta=!1;break}Pn||(Pn=rn=="constructor")}if(ta&&!Pn){var ko=_.constructor,Ai=B.constructor;ko!=Ai&&"constructor"in _&&"constructor"in B&&!(typeof ko=="function"&&ko instanceof ko&&typeof Ai=="function"&&Ai instanceof Ai)&&(ta=!1)}return Ne.delete(_),Ne.delete(B),ta}function Wu(_){return ex(mF(_,n,xF),_+"")}function Kb(_){return kI(_,xs,Yb)}function Wb(_){return kI(_,jo,uF)}var jb=l1?function(_){return l1.get(_)}:fx;function b1(_){for(var B=_.name+"",z=om[B],he=Ha.call(om,B)?z.length:0;he--;){var Be=z[he],Ne=Be.func;if(Ne==null||Ne==_)return Be.name}return B}function cm(_){var B=Ha.call(Pe,"placeholder")?Pe:_;return B.placeholder}function Bn(){var _=Pe.iteratee||dx;return _=_===dx?FI:_,arguments.length?_(arguments[0],arguments[1]):_}function x1(_,B){var z=_.__data__;return aj(B)?z[typeof B=="string"?"string":"hash"]:z.map}function qb(_){for(var B=xs(_),z=B.length;z--;){var he=B[z],Be=_[he];B[z]=[he,Be,AF(Be)]}return B}function fA(_,B){var z=oK(_,B);return II(z)?z:n}function YW(_){var B=Ha.call(_,lA),z=_[lA];try{_[lA]=n;var he=!0}catch{}var Be=e1.call(_);return he&&(B?_[lA]=z:delete _[lA]),Be}var Yb=xb?function(_){return _==null?[]:(_=Ja(_),Ti(xb(_),function(B){return hI.call(_,B)}))}:mx,uF=xb?function(_){for(var B=[];_;)rl(B,Yb(_)),_=a1(_);return B}:mx,Js=Eo;(Cb&&Js(new Cb(new ArrayBuffer(1)))!=ft||Fv&&Js(new Fv)!=Ae||Sb&&Js(Sb.resolve())!=ke||sm&&Js(new sm)!=we||Pv&&Js(new Pv)!=it)&&(Js=function(_){var B=Eo(_),z=B==xe?_.constructor:n,he=z?mA(z):"";if(he)switch(he){case PK:return ft;case DK:return Ae;case UK:return ke;case RK:return we;case NK:return it}return B});function XW(_,B,z){for(var he=-1,Be=z.length;++he<Be;){var Ne=z[he],Xe=Ne.size;switch(Ne.type){case"drop":_+=Xe;break;case"dropRight":B-=Xe;break;case"take":B=Xs(B,_+Xe);break;case"takeRight":_=is(_,B-Xe);break}}return{start:_,end:B}}function JW(_){var B=_.match(Te);return B?B[1].split(He):[]}function cF(_,B,z){B=Gc(B,_);for(var he=-1,Be=B.length,Ne=!1;++he<Be;){var Xe=ru(B[he]);if(!(Ne=_!=null&&z(_,Xe)))break;_=_[Xe]}return Ne||++he!=Be?Ne:(Be=_==null?0:_.length,!!Be&&I1(Be)&&ju(Xe,Be)&&(Wn(_)||hA(_)))}function ZW(_){var B=_.length,z=new _.constructor(B);return B&&typeof _[0]=="string"&&Ha.call(_,"index")&&(z.index=_.index,z.input=_.input),z}function dF(_){return typeof _.constructor=="function"&&!Hv(_)?im(a1(_)):{}}function ej(_,B,z){var he=_.constructor;switch(B){case Ve:return Qb(_);case K:case X:return new he(+_);case ft:return VW(_,z);case Ft:case tt:case Ge:case pt:case ht:case Nt:case nn:case yn:case qn:return WI(_,z);case Ae:return new he;case Ce:case at:return new he(_);case ye:return LW(_);case we:return new he;case Je:return MW(_)}}function tj(_,B){var z=B.length;if(!z)return _;var he=z-1;return B[he]=(z>1?"& ":"")+B[he],B=B.join(z>2?", ":" "),_.replace(Tn,`{
/* [wrapped with `+B+`] */
`)}function nj(_){return Wn(_)||hA(_)||!!(vI&&_&&_[vI])}function ju(_,B){var z=typeof _;return B=B??ce,!!B&&(z=="number"||z!="symbol"&&nt.test(_))&&_>-1&&_%1==0&&_<B}function Bo(_,B,z){if(!br(z))return!1;var he=typeof B;return(he=="number"?Wo(z)&&ju(B,z.length):he=="string"&&B in z)?ll(z[B],_):!1}function Xb(_,B){if(Wn(_))return!1;var z=typeof _;return z=="number"||z=="symbol"||z=="boolean"||_==null||ci(_)?!0:Kt.test(_)||!vt.test(_)||B!=null&&_ in Ja(B)}function aj(_){var B=typeof _;return B=="string"||B=="number"||B=="symbol"||B=="boolean"?_!=="__proto__":_===null}function Jb(_){var B=b1(_),z=Pe[B];if(typeof z!="function"||!(B in oa.prototype))return!1;if(_===z)return!0;var he=jb(z);return!!he&&_===he[0]}function rj(_){return!!AI&&AI in _}var sj=Jg?qu:hx;function Hv(_){var B=_&&_.constructor,z=typeof B=="function"&&B.prototype||rm;return _===z}function AF(_){return _===_&&!br(_)}function fF(_,B){return function(z){return z==null?!1:z[_]===B&&(B!==n||_ in Ja(z))}}function oj(_){var B=k1(_,function(he){return z.size===A&&z.clear(),he}),z=B.cache;return B}function ij(_,B){var z=_[1],he=B[1],Be=z|he,Ne=Be<(g|w|S),Xe=he==S&&z==x||he==S&&z==E&&_[7].length<=B[8]||he==(S|E)&&B[7].length<=B[8]&&z==x;if(!(Ne||Xe))return _;he&g&&(_[2]=B[2],Be|=z&g?0:b);var st=B[3];if(st){var mt=_[3];_[3]=mt?qI(mt,st,B[4]):st,_[4]=mt?Oc(_[3],d):B[4]}return st=B[5],st&&(mt=_[5],_[5]=mt?YI(mt,st,B[6]):st,_[6]=mt?Oc(_[5],d):B[6]),st=B[7],st&&(_[7]=st),he&S&&(_[8]=_[8]==null?B[8]:Xs(_[8],B[8])),_[9]==null&&(_[9]=B[9]),_[0]=B[0],_[1]=Be,_}function lj(_){var B=[];if(_!=null)for(var z in Ja(_))B.push(z);return B}function uj(_){return e1.call(_)}function mF(_,B,z){return B=is(B===n?_.length-1:B,0),function(){for(var he=arguments,Be=-1,Ne=is(he.length-B,0),Xe=Et(Ne);++Be<Ne;)Xe[Be]=he[B+Be];Be=-1;for(var st=Et(B+1);++Be<B;)st[Be]=he[Be];return st[B]=z(Xe),Ys(_,this,st)}}function hF(_,B){return B.length<2?_:AA(_,Di(B,0,-1))}function cj(_,B){for(var z=_.length,he=Xs(B.length,z),Be=Ko(_);he--;){var Ne=B[he];_[he]=ju(Ne,z)?Be[Ne]:n}return _}function Zb(_,B){if(!(B==="constructor"&&typeof _[B]=="function")&&B!="__proto__")return _[B]}var vF=gF(MI),$v=SK||function(_,B){return kr.setTimeout(_,B)},ex=gF(DW);function pF(_,B,z){var he=B+"";return ex(_,tj(he,dj(JW(he),z)))}function gF(_){var B=0,z=0;return function(){var he=TK(),Be=L-(he-z);if(z=he,Be>0){if(++B>=N)return arguments[0]}else B=0;return _.apply(n,arguments)}}function C1(_,B){var z=-1,he=_.length,Be=he-1;for(B=B===n?he:B;++z<B;){var Ne=Nb(z,Be),Xe=_[Ne];_[Ne]=_[z],_[z]=Xe}return _.length=B,_}var yF=oj(function(_){var B=[];return _.charCodeAt(0)===46&&B.push(""),_.replace(Pt,function(z,he,Be,Ne){B.push(Be?Ne.replace(Qe,"$1"):he||z)}),B});function ru(_){if(typeof _=="string"||ci(_))return _;var B=_+"";return B=="0"&&1/_==-Z?"-0":B}function mA(_){if(_!=null){try{return Zg.call(_)}catch{}try{return _+""}catch{}}return""}function dj(_,B){return So(ne,function(z){var he="_."+z[0];B&z[1]&&!sA(_,he)&&_.push(he)}),_.sort()}function _F(_){if(_ instanceof oa)return _.clone();var B=new Fi(_.__wrapped__,_.__chain__);return B.__actions__=Ko(_.__actions__),B.__index__=_.__index__,B.__values__=_.__values__,B}function Aj(_,B,z){(z?Bo(_,B,z):B===n)?B=1:B=is(Zn(B),0);var he=_==null?0:_.length;if(!he||B<1)return[];for(var Be=0,Ne=0,Xe=Et(o1(he/B));Be<he;)Xe[Ne++]=Di(_,Be,Be+=B);return Xe}function fj(_){for(var B=-1,z=_==null?0:_.length,he=0,Be=[];++B<z;){var Ne=_[B];Ne&&(Be[he++]=Ne)}return Be}function mj(){var _=arguments.length;if(!_)return[];for(var B=Et(_-1),z=arguments[0],he=_;he--;)B[he-1]=arguments[he];return rl(Wn(z)?Ko(z):[z],Rs(B,1))}var hj=na(function(_,B){return Lr(_)?Nv(_,Rs(B,1,Lr,!0)):[]}),vj=na(function(_,B){var z=Ui(B);return Lr(z)&&(z=n),Lr(_)?Nv(_,Rs(B,1,Lr,!0),Bn(z,2)):[]}),pj=na(function(_,B){var z=Ui(B);return Lr(z)&&(z=n),Lr(_)?Nv(_,Rs(B,1,Lr,!0),n,z):[]});function gj(_,B,z){var he=_==null?0:_.length;return he?(B=z||B===n?1:Zn(B),Di(_,B<0?0:B,he)):[]}function yj(_,B,z){var he=_==null?0:_.length;return he?(B=z||B===n?1:Zn(B),B=he-B,Di(_,0,B<0?0:B)):[]}function _j(_,B){return _&&_.length?v1(_,Bn(B,3),!0,!0):[]}function wj(_,B){return _&&_.length?v1(_,Bn(B,3),!0):[]}function bj(_,B,z,he){var Be=_==null?0:_.length;return Be?(z&&typeof z!="number"&&Bo(_,B,z)&&(z=0,he=Be),mW(_,B,z,he)):[]}function wF(_,B,z){var he=_==null?0:_.length;if(!he)return-1;var Be=z==null?0:Zn(z);return Be<0&&(Be=is(he+Be,0)),oA(_,Bn(B,3),Be)}function bF(_,B,z){var he=_==null?0:_.length;if(!he)return-1;var Be=he-1;return z!==n&&(Be=Zn(z),Be=z<0?is(he+Be,0):Xs(Be,he-1)),oA(_,Bn(B,3),Be,!0)}function xF(_){var B=_==null?0:_.length;return B?Rs(_,1):[]}function xj(_){var B=_==null?0:_.length;return B?Rs(_,Z):[]}function Cj(_,B){var z=_==null?0:_.length;return z?(B=B===n?1:Zn(B),Rs(_,B)):[]}function Sj(_){for(var B=-1,z=_==null?0:_.length,he={};++B<z;){var Be=_[B];he[Be[0]]=Be[1]}return he}function CF(_){return _&&_.length?_[0]:n}function Ej(_,B,z){var he=_==null?0:_.length;if(!he)return-1;var Be=z==null?0:Zn(z);return Be<0&&(Be=is(he+Be,0)),li(_,B,Be)}function Bj(_){var B=_==null?0:_.length;return B?Di(_,0,-1):[]}var kj=na(function(_){var B=Xa(_,Hb);return B.length&&B[0]===_[0]?Fb(B):[]}),Tj=na(function(_){var B=Ui(_),z=Xa(_,Hb);return B===Ui(z)?B=n:z.pop(),z.length&&z[0]===_[0]?Fb(z,Bn(B,2)):[]}),Ij=na(function(_){var B=Ui(_),z=Xa(_,Hb);return B=typeof B=="function"?B:n,B&&z.pop(),z.length&&z[0]===_[0]?Fb(z,n,B):[]});function Fj(_,B){return _==null?"":BK.call(_,B)}function Ui(_){var B=_==null?0:_.length;return B?_[B-1]:n}function Pj(_,B,z){var he=_==null?0:_.length;if(!he)return-1;var Be=he;return z!==n&&(Be=Zn(z),Be=Be<0?is(he+Be,0):Xs(Be,he-1)),B===B?dK(_,B,Be):oA(_,fe,Be,!0)}function Dj(_,B){return _&&_.length?RI(_,Zn(B)):n}var Uj=na(SF);function SF(_,B){return _&&_.length&&B&&B.length?Rb(_,B):_}function Rj(_,B,z){return _&&_.length&&B&&B.length?Rb(_,B,Bn(z,2)):_}function Nj(_,B,z){return _&&_.length&&B&&B.length?Rb(_,B,n,z):_}var Vj=Wu(function(_,B){var z=_==null?0:_.length,he=Bb(_,B);return LI(_,Xa(B,function(Be){return ju(Be,z)?+Be:Be}).sort(jI)),he});function Lj(_,B){var z=[];if(!(_&&_.length))return z;var he=-1,Be=[],Ne=_.length;for(B=Bn(B,3);++he<Ne;){var Xe=_[he];B(Xe,he,_)&&(z.push(Xe),Be.push(he))}return LI(_,Be),z}function tx(_){return _==null?_:FK.call(_)}function Mj(_,B,z){var he=_==null?0:_.length;return he?(z&&typeof z!="number"&&Bo(_,B,z)?(B=0,z=he):(B=B==null?0:Zn(B),z=z===n?he:Zn(z)),Di(_,B,z)):[]}function Oj(_,B){return h1(_,B)}function Hj(_,B,z){return Lb(_,B,Bn(z,2))}function $j(_,B){var z=_==null?0:_.length;if(z){var he=h1(_,B);if(he<z&&ll(_[he],B))return he}return-1}function Qj(_,B){return h1(_,B,!0)}function Gj(_,B,z){return Lb(_,B,Bn(z,2),!0)}function zj(_,B){var z=_==null?0:_.length;if(z){var he=h1(_,B,!0)-1;if(ll(_[he],B))return he}return-1}function Kj(_){return _&&_.length?OI(_):[]}function Wj(_,B){return _&&_.length?OI(_,Bn(B,2)):[]}function jj(_){var B=_==null?0:_.length;return B?Di(_,1,B):[]}function qj(_,B,z){return _&&_.length?(B=z||B===n?1:Zn(B),Di(_,0,B<0?0:B)):[]}function Yj(_,B,z){var he=_==null?0:_.length;return he?(B=z||B===n?1:Zn(B),B=he-B,Di(_,B<0?0:B,he)):[]}function Xj(_,B){return _&&_.length?v1(_,Bn(B,3),!1,!0):[]}function Jj(_,B){return _&&_.length?v1(_,Bn(B,3)):[]}var Zj=na(function(_){return Qc(Rs(_,1,Lr,!0))}),eq=na(function(_){var B=Ui(_);return Lr(B)&&(B=n),Qc(Rs(_,1,Lr,!0),Bn(B,2))}),tq=na(function(_){var B=Ui(_);return B=typeof B=="function"?B:n,Qc(Rs(_,1,Lr,!0),n,B)});function nq(_){return _&&_.length?Qc(_):[]}function aq(_,B){return _&&_.length?Qc(_,Bn(B,2)):[]}function rq(_,B){return B=typeof B=="function"?B:n,_&&_.length?Qc(_,n,B):[]}function nx(_){if(!(_&&_.length))return[];var B=0;return _=Ti(_,function(z){if(Lr(z))return B=is(z.length,B),!0}),Vr(B,function(z){return Xa(_,Re(z))})}function EF(_,B){if(!(_&&_.length))return[];var z=nx(_);return B==null?z:Xa(z,function(he){return Ys(B,n,he)})}var sq=na(function(_,B){return Lr(_)?Nv(_,B):[]}),oq=na(function(_){return Ob(Ti(_,Lr))}),iq=na(function(_){var B=Ui(_);return Lr(B)&&(B=n),Ob(Ti(_,Lr),Bn(B,2))}),lq=na(function(_){var B=Ui(_);return B=typeof B=="function"?B:n,Ob(Ti(_,Lr),n,B)}),uq=na(nx);function cq(_,B){return GI(_||[],B||[],Rv)}function dq(_,B){return GI(_||[],B||[],Mv)}var Aq=na(function(_){var B=_.length,z=B>1?_[B-1]:n;return z=typeof z=="function"?(_.pop(),z):n,EF(_,z)});function BF(_){var B=Pe(_);return B.__chain__=!0,B}function fq(_,B){return B(_),_}function S1(_,B){return B(_)}var mq=Wu(function(_){var B=_.length,z=B?_[0]:0,he=this.__wrapped__,Be=function(Ne){return Bb(Ne,_)};return B>1||this.__actions__.length||!(he instanceof oa)||!ju(z)?this.thru(Be):(he=he.slice(z,+z+(B?1:0)),he.__actions__.push({func:S1,args:[Be],thisArg:n}),new Fi(he,this.__chain__).thru(function(Ne){return B&&!Ne.length&&Ne.push(n),Ne}))});function hq(){return BF(this)}function vq(){return new Fi(this.value(),this.__chain__)}function pq(){this.__values__===n&&(this.__values__=HF(this.value()));var _=this.__index__>=this.__values__.length,B=_?n:this.__values__[this.__index__++];return{done:_,value:B}}function gq(){return this}function yq(_){for(var B,z=this;z instanceof c1;){var he=_F(z);he.__index__=0,he.__values__=n,B?Be.__wrapped__=he:B=he;var Be=he;z=z.__wrapped__}return Be.__wrapped__=_,B}function _q(){var _=this.__wrapped__;if(_ instanceof oa){var B=_;return this.__actions__.length&&(B=new oa(this)),B=B.reverse(),B.__actions__.push({func:S1,args:[tx],thisArg:n}),new Fi(B,this.__chain__)}return this.thru(tx)}function wq(){return QI(this.__wrapped__,this.__actions__)}var bq=p1(function(_,B,z){Ha.call(_,z)?++_[z]:zu(_,z,1)});function xq(_,B,z){var he=Wn(_)?Jf:fW;return z&&Bo(_,B,z)&&(B=n),he(_,Bn(B,3))}function Cq(_,B){var z=Wn(_)?Ti:EI;return z(_,Bn(B,3))}var Sq=eF(wF),Eq=eF(bF);function Bq(_,B){return Rs(E1(_,B),1)}function kq(_,B){return Rs(E1(_,B),Z)}function Tq(_,B,z){return z=z===n?1:Zn(z),Rs(E1(_,B),z)}function kF(_,B){var z=Wn(_)?So:$c;return z(_,Bn(B,3))}function TF(_,B){var z=Wn(_)?Kg:SI;return z(_,Bn(B,3))}var Iq=p1(function(_,B,z){Ha.call(_,z)?_[z].push(B):zu(_,z,[B])});function Fq(_,B,z,he){_=Wo(_)?_:Am(_),z=z&&!he?Zn(z):0;var Be=_.length;return z<0&&(z=is(Be+z,0)),F1(_)?z<=Be&&_.indexOf(B,z)>-1:!!Be&&li(_,B,z)>-1}var Pq=na(function(_,B,z){var he=-1,Be=typeof B=="function",Ne=Wo(_)?Et(_.length):[];return $c(_,function(Xe){Ne[++he]=Be?Ys(B,Xe,z):Vv(Xe,B,z)}),Ne}),Dq=p1(function(_,B,z){zu(_,z,B)});function E1(_,B){var z=Wn(_)?Xa:PI;return z(_,Bn(B,3))}function Uq(_,B,z,he){return _==null?[]:(Wn(B)||(B=B==null?[]:[B]),z=he?n:z,Wn(z)||(z=z==null?[]:[z]),NI(_,B,z))}var Rq=p1(function(_,B,z){_[z?0:1].push(B)},function(){return[[],[]]});function Nq(_,B,z){var he=Wn(_)?sl:Bt,Be=arguments.length<3;return he(_,Bn(B,4),z,Be,$c)}function Vq(_,B,z){var he=Wn(_)?Wg:Bt,Be=arguments.length<3;return he(_,Bn(B,4),z,Be,SI)}function Lq(_,B){var z=Wn(_)?Ti:EI;return z(_,T1(Bn(B,3)))}function Mq(_){var B=Wn(_)?wI:FW;return B(_)}function Oq(_,B,z){(z?Bo(_,B,z):B===n)?B=1:B=Zn(B);var he=Wn(_)?lW:PW;return he(_,B)}function Hq(_){var B=Wn(_)?uW:UW;return B(_)}function $q(_){if(_==null)return 0;if(Wo(_))return F1(_)?nm(_):_.length;var B=Js(_);return B==Ae||B==we?_.size:Db(_).length}function Qq(_,B,z){var he=Wn(_)?Zf:RW;return z&&Bo(_,B,z)&&(B=n),he(_,Bn(B,3))}var Gq=na(function(_,B){if(_==null)return[];var z=B.length;return z>1&&Bo(_,B[0],B[1])?B=[]:z>2&&Bo(B[0],B[1],B[2])&&(B=[B[0]]),NI(_,Rs(B,1),[])}),B1=CK||function(){return kr.Date.now()};function zq(_,B){if(typeof B!="function")throw new Ii(o);return _=Zn(_),function(){if(--_<1)return B.apply(this,arguments)}}function IF(_,B,z){return B=z?n:B,B=_&&B==null?_.length:B,Ku(_,S,n,n,n,n,B)}function FF(_,B){var z;if(typeof B!="function")throw new Ii(o);return _=Zn(_),function(){return--_>0&&(z=B.apply(this,arguments)),_<=1&&(B=n),z}}var ax=na(function(_,B,z){var he=g;if(z.length){var Be=Oc(z,cm(ax));he|=U}return Ku(_,he,B,z,Be)}),PF=na(function(_,B,z){var he=g|w;if(z.length){var Be=Oc(z,cm(PF));he|=U}return Ku(B,he,_,z,Be)});function DF(_,B,z){B=z?n:B;var he=Ku(_,x,n,n,n,n,n,B);return he.placeholder=DF.placeholder,he}function UF(_,B,z){B=z?n:B;var he=Ku(_,T,n,n,n,n,n,B);return he.placeholder=UF.placeholder,he}function RF(_,B,z){var he,Be,Ne,Xe,st,mt,Mt=0,Ot=!1,Gt=!1,rn=!0;if(typeof _!="function")throw new Ii(o);B=Ri(B)||0,br(z)&&(Ot=!!z.leading,Gt="maxWait"in z,Ne=Gt?is(Ri(z.maxWait)||0,B):Ne,rn="trailing"in z?!!z.trailing:rn);function pn(Mr){var ul=he,Xu=Be;return he=Be=n,Mt=Mr,Xe=_.apply(Xu,ul),Xe}function Fn(Mr){return Mt=Mr,st=$v(sa,B),Ot?pn(Mr):Xe}function ta(Mr){var ul=Mr-mt,Xu=Mr-Mt,eP=B-ul;return Gt?Xs(eP,Ne-Xu):eP}function Pn(Mr){var ul=Mr-mt,Xu=Mr-Mt;return mt===n||ul>=B||ul<0||Gt&&Xu>=Ne}function sa(){var Mr=B1();if(Pn(Mr))return ua(Mr);st=$v(sa,ta(Mr))}function ua(Mr){return st=n,rn&&he?pn(Mr):(he=Be=n,Xe)}function di(){st!==n&&zI(st),Mt=0,he=mt=Be=st=n}function ko(){return st===n?Xe:ua(B1())}function Ai(){var Mr=B1(),ul=Pn(Mr);if(he=arguments,Be=this,mt=Mr,ul){if(st===n)return Fn(mt);if(Gt)return zI(st),st=$v(sa,B),pn(mt)}return st===n&&(st=$v(sa,B)),Xe}return Ai.cancel=di,Ai.flush=ko,Ai}var Kq=na(function(_,B){return CI(_,1,B)}),Wq=na(function(_,B,z){return CI(_,Ri(B)||0,z)});function jq(_){return Ku(_,C)}function k1(_,B){if(typeof _!="function"||B!=null&&typeof B!="function")throw new Ii(o);var z=function(){var he=arguments,Be=B?B.apply(this,he):he[0],Ne=z.cache;if(Ne.has(Be))return Ne.get(Be);var Xe=_.apply(this,he);return z.cache=Ne.set(Be,Xe)||Ne,Xe};return z.cache=new(k1.Cache||Gu),z}k1.Cache=Gu;function T1(_){if(typeof _!="function")throw new Ii(o);return function(){var B=arguments;switch(B.length){case 0:return!_.call(this);case 1:return!_.call(this,B[0]);case 2:return!_.call(this,B[0],B[1]);case 3:return!_.call(this,B[0],B[1],B[2])}return!_.apply(this,B)}}function qq(_){return FF(2,_)}var Yq=NW(function(_,B){B=B.length==1&&Wn(B[0])?Xa(B[0],Ua(Bn())):Xa(Rs(B,1),Ua(Bn()));var z=B.length;return na(function(he){for(var Be=-1,Ne=Xs(he.length,z);++Be<Ne;)he[Be]=B[Be].call(this,he[Be]);return Ys(_,this,he)})}),rx=na(function(_,B){var z=Oc(B,cm(rx));return Ku(_,U,n,B,z)}),NF=na(function(_,B){var z=Oc(B,cm(NF));return Ku(_,k,n,B,z)}),Xq=Wu(function(_,B){return Ku(_,E,n,n,n,B)});function Jq(_,B){if(typeof _!="function")throw new Ii(o);return B=B===n?B:Zn(B),na(_,B)}function Zq(_,B){if(typeof _!="function")throw new Ii(o);return B=B==null?0:is(Zn(B),0),na(function(z){var he=z[B],Be=zc(z,0,B);return he&&rl(Be,he),Ys(_,this,Be)})}function eY(_,B,z){var he=!0,Be=!0;if(typeof _!="function")throw new Ii(o);return br(z)&&(he="leading"in z?!!z.leading:he,Be="trailing"in z?!!z.trailing:Be),RF(_,B,{leading:he,maxWait:B,trailing:Be})}function tY(_){return IF(_,1)}function nY(_,B){return rx($b(B),_)}function aY(){if(!arguments.length)return[];var _=arguments[0];return Wn(_)?_:[_]}function rY(_){return Pi(_,h)}function sY(_,B){return B=typeof B=="function"?B:n,Pi(_,h,B)}function oY(_){return Pi(_,f|h)}function iY(_,B){return B=typeof B=="function"?B:n,Pi(_,f|h,B)}function lY(_,B){return B==null||xI(_,B,xs(B))}function ll(_,B){return _===B||_!==_&&B!==B}var uY=w1(Ib),cY=w1(function(_,B){return _>=B}),hA=TI((function(){return arguments})())?TI:function(_){return Tr(_)&&Ha.call(_,"callee")&&!hI.call(_,"callee")},Wn=Et.isArray,dY=Bv?Ua(Bv):yW;function Wo(_){return _!=null&&I1(_.length)&&!qu(_)}function Lr(_){return Tr(_)&&Wo(_)}function AY(_){return _===!0||_===!1||Tr(_)&&Eo(_)==K}var Kc=EK||hx,fY=Xf?Ua(Xf):_W;function mY(_){return Tr(_)&&_.nodeType===1&&!Qv(_)}function hY(_){if(_==null)return!0;if(Wo(_)&&(Wn(_)||typeof _=="string"||typeof _.splice=="function"||Kc(_)||dm(_)||hA(_)))return!_.length;var B=Js(_);if(B==Ae||B==we)return!_.size;if(Hv(_))return!Db(_).length;for(var z in _)if(Ha.call(_,z))return!1;return!0}function vY(_,B){return Lv(_,B)}function pY(_,B,z){z=typeof z=="function"?z:n;var he=z?z(_,B):n;return he===n?Lv(_,B,n,z):!!he}function sx(_){if(!Tr(_))return!1;var B=Eo(_);return B==oe||B==ae||typeof _.message=="string"&&typeof _.name=="string"&&!Qv(_)}function gY(_){return typeof _=="number"&&pI(_)}function qu(_){if(!br(_))return!1;var B=Eo(_);return B==W||B==de||B==Y||B==Ee}function VF(_){return typeof _=="number"&&_==Zn(_)}function I1(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=ce}function br(_){var B=typeof _;return _!=null&&(B=="object"||B=="function")}function Tr(_){return _!=null&&typeof _=="object"}var LF=nA?Ua(nA):bW;function yY(_,B){return _===B||Pb(_,B,qb(B))}function _Y(_,B,z){return z=typeof z=="function"?z:n,Pb(_,B,qb(B),z)}function wY(_){return MF(_)&&_!=+_}function bY(_){if(sj(_))throw new zn(s);return II(_)}function xY(_){return _===null}function CY(_){return _==null}function MF(_){return typeof _=="number"||Tr(_)&&Eo(_)==Ce}function Qv(_){if(!Tr(_)||Eo(_)!=xe)return!1;var B=a1(_);if(B===null)return!0;var z=Ha.call(B,"constructor")&&B.constructor;return typeof z=="function"&&z instanceof z&&Zg.call(z)==_K}var ox=kv?Ua(kv):xW;function SY(_){return VF(_)&&_>=-ce&&_<=ce}var OF=aA?Ua(aA):CW;function F1(_){return typeof _=="string"||!Wn(_)&&Tr(_)&&Eo(_)==at}function ci(_){return typeof _=="symbol"||Tr(_)&&Eo(_)==Je}var dm=zg?Ua(zg):SW;function EY(_){return _===n}function BY(_){return Tr(_)&&Js(_)==it}function kY(_){return Tr(_)&&Eo(_)==Ie}var TY=w1(Ub),IY=w1(function(_,B){return _<=B});function HF(_){if(!_)return[];if(Wo(_))return F1(_)?ol(_):Ko(_);if(Iv&&_[Iv])return lK(_[Iv]());var B=Js(_),z=B==Ae?wb:B==we?Yg:Am;return z(_)}function Yu(_){if(!_)return _===0?_:0;if(_=Ri(_),_===Z||_===-Z){var B=_<0?-1:1;return B*J}return _===_?_:0}function Zn(_){var B=Yu(_),z=B%1;return B===B?z?B-z:B:0}function $F(_){return _?dA(Zn(_),0,G):0}function Ri(_){if(typeof _=="number")return _;if(ci(_))return se;if(br(_)){var B=typeof _.valueOf=="function"?_.valueOf():_;_=br(B)?B+"":B}if(typeof _!="string")return _===0?_:+_;_=ss(_);var z=Se.test(_);return z||Ze.test(_)?Qg(_.slice(2),z?2:8):ge.test(_)?se:+_}function QF(_){return au(_,jo(_))}function FY(_){return _?dA(Zn(_),-ce,ce):_===0?_:0}function Ra(_){return _==null?"":ui(_)}var PY=lm(function(_,B){if(Hv(B)||Wo(B)){au(B,xs(B),_);return}for(var z in B)Ha.call(B,z)&&Rv(_,z,B[z])}),GF=lm(function(_,B){au(B,jo(B),_)}),P1=lm(function(_,B,z,he){au(B,jo(B),_,he)}),DY=lm(function(_,B,z,he){au(B,xs(B),_,he)}),UY=Wu(Bb);function RY(_,B){var z=im(_);return B==null?z:bI(z,B)}var NY=na(function(_,B){_=Ja(_);var z=-1,he=B.length,Be=he>2?B[2]:n;for(Be&&Bo(B[0],B[1],Be)&&(he=1);++z<he;)for(var Ne=B[z],Xe=jo(Ne),st=-1,mt=Xe.length;++st<mt;){var Mt=Xe[st],Ot=_[Mt];(Ot===n||ll(Ot,rm[Mt])&&!Ha.call(_,Mt))&&(_[Mt]=Ne[Mt])}return _}),VY=na(function(_){return _.push(n,iF),Ys(zF,n,_)});function LY(_,B){return Tv(_,Bn(B,3),nu)}function MY(_,B){return Tv(_,Bn(B,3),Tb)}function OY(_,B){return _==null?_:kb(_,Bn(B,3),jo)}function HY(_,B){return _==null?_:BI(_,Bn(B,3),jo)}function $Y(_,B){return _&&nu(_,Bn(B,3))}function QY(_,B){return _&&Tb(_,Bn(B,3))}function GY(_){return _==null?[]:f1(_,xs(_))}function zY(_){return _==null?[]:f1(_,jo(_))}function ix(_,B,z){var he=_==null?n:AA(_,B);return he===n?z:he}function KY(_,B){return _!=null&&cF(_,B,hW)}function lx(_,B){return _!=null&&cF(_,B,vW)}var WY=nF(function(_,B,z){B!=null&&typeof B.toString!="function"&&(B=e1.call(B)),_[B]=z},cx(qo)),jY=nF(function(_,B,z){B!=null&&typeof B.toString!="function"&&(B=e1.call(B)),Ha.call(_,B)?_[B].push(z):_[B]=[z]},Bn),qY=na(Vv);function xs(_){return Wo(_)?_I(_):Db(_)}function jo(_){return Wo(_)?_I(_,!0):EW(_)}function YY(_,B){var z={};return B=Bn(B,3),nu(_,function(he,Be,Ne){zu(z,B(he,Be,Ne),he)}),z}function XY(_,B){var z={};return B=Bn(B,3),nu(_,function(he,Be,Ne){zu(z,Be,B(he,Be,Ne))}),z}var JY=lm(function(_,B,z){m1(_,B,z)}),zF=lm(function(_,B,z,he){m1(_,B,z,he)}),ZY=Wu(function(_,B){var z={};if(_==null)return z;var he=!1;B=Xa(B,function(Ne){return Ne=Gc(Ne,_),he||(he=Ne.length>1),Ne}),au(_,Wb(_),z),he&&(z=Pi(z,f|m|h,WW));for(var Be=B.length;Be--;)Mb(z,B[Be]);return z});function eX(_,B){return KF(_,T1(Bn(B)))}var tX=Wu(function(_,B){return _==null?{}:kW(_,B)});function KF(_,B){if(_==null)return{};var z=Xa(Wb(_),function(he){return[he]});return B=Bn(B),VI(_,z,function(he,Be){return B(he,Be[0])})}function nX(_,B,z){B=Gc(B,_);var he=-1,Be=B.length;for(Be||(Be=1,_=n);++he<Be;){var Ne=_==null?n:_[ru(B[he])];Ne===n&&(he=Be,Ne=z),_=qu(Ne)?Ne.call(_):Ne}return _}function aX(_,B,z){return _==null?_:Mv(_,B,z)}function rX(_,B,z,he){return he=typeof he=="function"?he:n,_==null?_:Mv(_,B,z,he)}var WF=sF(xs),jF=sF(jo);function sX(_,B,z){var he=Wn(_),Be=he||Kc(_)||dm(_);if(B=Bn(B,4),z==null){var Ne=_&&_.constructor;Be?z=he?new Ne:[]:br(_)?z=qu(Ne)?im(a1(_)):{}:z={}}return(Be?So:nu)(_,function(Xe,st,mt){return B(z,Xe,st,mt)}),z}function oX(_,B){return _==null?!0:Mb(_,B)}function iX(_,B,z){return _==null?_:$I(_,B,$b(z))}function lX(_,B,z,he){return he=typeof he=="function"?he:n,_==null?_:$I(_,B,$b(z),he)}function Am(_){return _==null?[]:tu(_,xs(_))}function uX(_){return _==null?[]:tu(_,jo(_))}function cX(_,B,z){return z===n&&(z=B,B=n),z!==n&&(z=Ri(z),z=z===z?z:0),B!==n&&(B=Ri(B),B=B===B?B:0),dA(Ri(_),B,z)}function dX(_,B,z){return B=Yu(B),z===n?(z=B,B=0):z=Yu(z),_=Ri(_),pW(_,B,z)}function AX(_,B,z){if(z&&typeof z!="boolean"&&Bo(_,B,z)&&(B=z=n),z===n&&(typeof B=="boolean"?(z=B,B=n):typeof _=="boolean"&&(z=_,_=n)),_===n&&B===n?(_=0,B=1):(_=Yu(_),B===n?(B=_,_=0):B=Yu(B)),_>B){var he=_;_=B,B=he}if(z||_%1||B%1){var Be=gI();return Xs(_+Be*(B-_+_b("1e-"+((Be+"").length-1))),B)}return Nb(_,B)}var fX=um(function(_,B,z){return B=B.toLowerCase(),_+(z?qF(B):B)});function qF(_){return ux(Ra(_).toLowerCase())}function YF(_){return _=Ra(_),_&&_.replace(et,aK).replace(ki,"")}function mX(_,B,z){_=Ra(_),B=ui(B);var he=_.length;z=z===n?he:dA(Zn(z),0,he);var Be=z;return z-=B.length,z>=0&&_.slice(z,Be)==B}function hX(_){return _=Ra(_),_&&Ke.test(_)?_.replace(Zt,rK):_}function vX(_){return _=Ra(_),_&&Nn.test(_)?_.replace(Gn,"\\$&"):_}var pX=um(function(_,B,z){return _+(z?"-":"")+B.toLowerCase()}),gX=um(function(_,B,z){return _+(z?" ":"")+B.toLowerCase()}),yX=ZI("toLowerCase");function _X(_,B,z){_=Ra(_),B=Zn(B);var he=B?nm(_):0;if(!B||he>=B)return _;var Be=(B-he)/2;return _1(i1(Be),z)+_+_1(o1(Be),z)}function wX(_,B,z){_=Ra(_),B=Zn(B);var he=B?nm(_):0;return B&&he<B?_+_1(B-he,z):_}function bX(_,B,z){_=Ra(_),B=Zn(B);var he=B?nm(_):0;return B&&he<B?_1(B-he,z)+_:_}function xX(_,B,z){return z||B==null?B=0:B&&(B=+B),IK(Ra(_).replace(On,""),B||0)}function CX(_,B,z){return(z?Bo(_,B,z):B===n)?B=1:B=Zn(B),Vb(Ra(_),B)}function SX(){var _=arguments,B=Ra(_[0]);return _.length<3?B:B.replace(_[1],_[2])}var EX=um(function(_,B,z){return _+(z?"_":"")+B.toLowerCase()});function BX(_,B,z){return z&&typeof z!="number"&&Bo(_,B,z)&&(B=z=n),z=z===n?G:z>>>0,z?(_=Ra(_),_&&(typeof B=="string"||B!=null&&!ox(B))&&(B=ui(B),!B&&tm(_))?zc(ol(_),0,z):_.split(B,z)):[]}var kX=um(function(_,B,z){return _+(z?" ":"")+ux(B)});function TX(_,B,z){return _=Ra(_),z=z==null?0:dA(Zn(z),0,_.length),B=ui(B),_.slice(z,z+B.length)==B}function IX(_,B,z){var he=Pe.templateSettings;z&&Bo(_,B,z)&&(B=n),_=Ra(_),B=P1({},B,he,oF);var Be=P1({},B.imports,he.imports,oF),Ne=xs(Be),Xe=tu(Be,Ne),st,mt,Mt=0,Ot=B.interpolate||lt,Gt="__p += '",rn=bb((B.escape||lt).source+"|"+Ot.source+"|"+(Ot===qt?pe:lt).source+"|"+(B.evaluate||lt).source+"|$","g"),pn="//# sourceURL="+(Ha.call(B,"sourceURL")?(B.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++eA+"]")+`
`;_.replace(rn,function(Pn,sa,ua,di,ko,Ai){return ua||(ua=di),Gt+=_.slice(Mt,Ai).replace(bt,sK),sa&&(st=!0,Gt+=`' +
__e(`+sa+`) +
'`),ko&&(mt=!0,Gt+=`';
`+ko+`;
__p += '`),ua&&(Gt+=`' +
((__t = (`+ua+`)) == null ? '' : __t) +
'`),Mt=Ai+Pn.length,Pn}),Gt+=`';
`;var Fn=Ha.call(B,"variable")&&B.variable;if(!Fn)Gt=`with (obj) {
`+Gt+`
}
`;else if(Le.test(Fn))throw new zn(i);Gt=(mt?Gt.replace($t,""):Gt).replace(Tt,"$1").replace(ut,"$1;"),Gt="function("+(Fn||"obj")+`) {
`+(Fn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(st?", __e = _.escape":"")+(mt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Gt+`return __p
}`;var ta=JF(function(){return Ba(Ne,pn+"return "+Gt).apply(n,Xe)});if(ta.source=Gt,sx(ta))throw ta;return ta}function FX(_){return Ra(_).toLowerCase()}function PX(_){return Ra(_).toUpperCase()}function DX(_,B,z){if(_=Ra(_),_&&(z||B===n))return ss(_);if(!_||!(B=ui(B)))return _;var he=ol(_),Be=ol(B),Ne=iA(he,Be),Xe=em(he,Be)+1;return zc(he,Ne,Xe).join("")}function UX(_,B,z){if(_=Ra(_),_&&(z||B===n))return _.slice(0,dI(_)+1);if(!_||!(B=ui(B)))return _;var he=ol(_),Be=em(he,ol(B))+1;return zc(he,0,Be).join("")}function RX(_,B,z){if(_=Ra(_),_&&(z||B===n))return _.replace(On,"");if(!_||!(B=ui(B)))return _;var he=ol(_),Be=iA(he,ol(B));return zc(he,Be).join("")}function NX(_,B){var z=P,he=F;if(br(B)){var Be="separator"in B?B.separator:Be;z="length"in B?Zn(B.length):z,he="omission"in B?ui(B.omission):he}_=Ra(_);var Ne=_.length;if(tm(_)){var Xe=ol(_);Ne=Xe.length}if(z>=Ne)return _;var st=z-nm(he);if(st<1)return he;var mt=Xe?zc(Xe,0,st).join(""):_.slice(0,st);if(Be===n)return mt+he;if(Xe&&(st+=mt.length-st),ox(Be)){if(_.slice(st).search(Be)){var Mt,Ot=mt;for(Be.global||(Be=bb(Be.source,Ra(re.exec(Be))+"g")),Be.lastIndex=0;Mt=Be.exec(Ot);)var Gt=Mt.index;mt=mt.slice(0,Gt===n?st:Gt)}}else if(_.indexOf(ui(Be),st)!=st){var rn=mt.lastIndexOf(Be);rn>-1&&(mt=mt.slice(0,rn))}return mt+he}function VX(_){return _=Ra(_),_&&je.test(_)?_.replace(kt,AK):_}var LX=um(function(_,B,z){return _+(z?" ":"")+B.toUpperCase()}),ux=ZI("toUpperCase");function XF(_,B,z){return _=Ra(_),B=z?n:B,B===n?iK(_)?hK(_):zo(_):_.match(B)||[]}var JF=na(function(_,B){try{return Ys(_,n,B)}catch(z){return sx(z)?z:new zn(z)}}),MX=Wu(function(_,B){return So(B,function(z){z=ru(z),zu(_,z,ax(_[z],_))}),_});function OX(_){var B=_==null?0:_.length,z=Bn();return _=B?Xa(_,function(he){if(typeof he[1]!="function")throw new Ii(o);return[z(he[0]),he[1]]}):[],na(function(he){for(var Be=-1;++Be<B;){var Ne=_[Be];if(Ys(Ne[0],this,he))return Ys(Ne[1],this,he)}})}function HX(_){return AW(Pi(_,f))}function cx(_){return function(){return _}}function $X(_,B){return _==null||_!==_?B:_}var QX=tF(),GX=tF(!0);function qo(_){return _}function dx(_){return FI(typeof _=="function"?_:Pi(_,f))}function zX(_){return DI(Pi(_,f))}function KX(_,B){return UI(_,Pi(B,f))}var WX=na(function(_,B){return function(z){return Vv(z,_,B)}}),jX=na(function(_,B){return function(z){return Vv(_,z,B)}});function Ax(_,B,z){var he=xs(B),Be=f1(B,he);z==null&&!(br(B)&&(Be.length||!he.length))&&(z=B,B=_,_=this,Be=f1(B,xs(B)));var Ne=!(br(z)&&"chain"in z)||!!z.chain,Xe=qu(_);return So(Be,function(st){var mt=B[st];_[st]=mt,Xe&&(_.prototype[st]=function(){var Mt=this.__chain__;if(Ne||Mt){var Ot=_(this.__wrapped__),Gt=Ot.__actions__=Ko(this.__actions__);return Gt.push({func:mt,args:arguments,thisArg:_}),Ot.__chain__=Mt,Ot}return mt.apply(_,rl([this.value()],arguments))})}),_}function qX(){return kr._===this&&(kr._=wK),this}function fx(){}function YX(_){return _=Zn(_),na(function(B){return RI(B,_)})}var XX=Gb(Xa),JX=Gb(Jf),ZX=Gb(Zf);function ZF(_){return Xb(_)?Re(ru(_)):TW(_)}function eJ(_){return function(B){return _==null?n:AA(_,B)}}var tJ=aF(),nJ=aF(!0);function mx(){return[]}function hx(){return!1}function aJ(){return{}}function rJ(){return""}function sJ(){return!0}function oJ(_,B){if(_=Zn(_),_<1||_>ce)return[];var z=G,he=Xs(_,G);B=Bn(B),_-=G;for(var Be=Vr(he,B);++z<_;)B(z);return Be}function iJ(_){return Wn(_)?Xa(_,ru):ci(_)?[_]:Ko(yF(Ra(_)))}function lJ(_){var B=++yK;return Ra(_)+B}var uJ=y1(function(_,B){return _+B},0),cJ=zb("ceil"),dJ=y1(function(_,B){return _/B},1),AJ=zb("floor");function fJ(_){return _&&_.length?A1(_,qo,Ib):n}function mJ(_,B){return _&&_.length?A1(_,Bn(B,2),Ib):n}function hJ(_){return be(_,qo)}function vJ(_,B){return be(_,Bn(B,2))}function pJ(_){return _&&_.length?A1(_,qo,Ub):n}function gJ(_,B){return _&&_.length?A1(_,Bn(B,2),Ub):n}var yJ=y1(function(_,B){return _*B},1),_J=zb("round"),wJ=y1(function(_,B){return _-B},0);function bJ(_){return _&&_.length?Ea(_,qo):0}function xJ(_,B){return _&&_.length?Ea(_,Bn(B,2)):0}return Pe.after=zq,Pe.ary=IF,Pe.assign=PY,Pe.assignIn=GF,Pe.assignInWith=P1,Pe.assignWith=DY,Pe.at=UY,Pe.before=FF,Pe.bind=ax,Pe.bindAll=MX,Pe.bindKey=PF,Pe.castArray=aY,Pe.chain=BF,Pe.chunk=Aj,Pe.compact=fj,Pe.concat=mj,Pe.cond=OX,Pe.conforms=HX,Pe.constant=cx,Pe.countBy=bq,Pe.create=RY,Pe.curry=DF,Pe.curryRight=UF,Pe.debounce=RF,Pe.defaults=NY,Pe.defaultsDeep=VY,Pe.defer=Kq,Pe.delay=Wq,Pe.difference=hj,Pe.differenceBy=vj,Pe.differenceWith=pj,Pe.drop=gj,Pe.dropRight=yj,Pe.dropRightWhile=_j,Pe.dropWhile=wj,Pe.fill=bj,Pe.filter=Cq,Pe.flatMap=Bq,Pe.flatMapDeep=kq,Pe.flatMapDepth=Tq,Pe.flatten=xF,Pe.flattenDeep=xj,Pe.flattenDepth=Cj,Pe.flip=jq,Pe.flow=QX,Pe.flowRight=GX,Pe.fromPairs=Sj,Pe.functions=GY,Pe.functionsIn=zY,Pe.groupBy=Iq,Pe.initial=Bj,Pe.intersection=kj,Pe.intersectionBy=Tj,Pe.intersectionWith=Ij,Pe.invert=WY,Pe.invertBy=jY,Pe.invokeMap=Pq,Pe.iteratee=dx,Pe.keyBy=Dq,Pe.keys=xs,Pe.keysIn=jo,Pe.map=E1,Pe.mapKeys=YY,Pe.mapValues=XY,Pe.matches=zX,Pe.matchesProperty=KX,Pe.memoize=k1,Pe.merge=JY,Pe.mergeWith=zF,Pe.method=WX,Pe.methodOf=jX,Pe.mixin=Ax,Pe.negate=T1,Pe.nthArg=YX,Pe.omit=ZY,Pe.omitBy=eX,Pe.once=qq,Pe.orderBy=Uq,Pe.over=XX,Pe.overArgs=Yq,Pe.overEvery=JX,Pe.overSome=ZX,Pe.partial=rx,Pe.partialRight=NF,Pe.partition=Rq,Pe.pick=tX,Pe.pickBy=KF,Pe.property=ZF,Pe.propertyOf=eJ,Pe.pull=Uj,Pe.pullAll=SF,Pe.pullAllBy=Rj,Pe.pullAllWith=Nj,Pe.pullAt=Vj,Pe.range=tJ,Pe.rangeRight=nJ,Pe.rearg=Xq,Pe.reject=Lq,Pe.remove=Lj,Pe.rest=Jq,Pe.reverse=tx,Pe.sampleSize=Oq,Pe.set=aX,Pe.setWith=rX,Pe.shuffle=Hq,Pe.slice=Mj,Pe.sortBy=Gq,Pe.sortedUniq=Kj,Pe.sortedUniqBy=Wj,Pe.split=BX,Pe.spread=Zq,Pe.tail=jj,Pe.take=qj,Pe.takeRight=Yj,Pe.takeRightWhile=Xj,Pe.takeWhile=Jj,Pe.tap=fq,Pe.throttle=eY,Pe.thru=S1,Pe.toArray=HF,Pe.toPairs=WF,Pe.toPairsIn=jF,Pe.toPath=iJ,Pe.toPlainObject=QF,Pe.transform=sX,Pe.unary=tY,Pe.union=Zj,Pe.unionBy=eq,Pe.unionWith=tq,Pe.uniq=nq,Pe.uniqBy=aq,Pe.uniqWith=rq,Pe.unset=oX,Pe.unzip=nx,Pe.unzipWith=EF,Pe.update=iX,Pe.updateWith=lX,Pe.values=Am,Pe.valuesIn=uX,Pe.without=sq,Pe.words=XF,Pe.wrap=nY,Pe.xor=oq,Pe.xorBy=iq,Pe.xorWith=lq,Pe.zip=uq,Pe.zipObject=cq,Pe.zipObjectDeep=dq,Pe.zipWith=Aq,Pe.entries=WF,Pe.entriesIn=jF,Pe.extend=GF,Pe.extendWith=P1,Ax(Pe,Pe),Pe.add=uJ,Pe.attempt=JF,Pe.camelCase=fX,Pe.capitalize=qF,Pe.ceil=cJ,Pe.clamp=cX,Pe.clone=rY,Pe.cloneDeep=oY,Pe.cloneDeepWith=iY,Pe.cloneWith=sY,Pe.conformsTo=lY,Pe.deburr=YF,Pe.defaultTo=$X,Pe.divide=dJ,Pe.endsWith=mX,Pe.eq=ll,Pe.escape=hX,Pe.escapeRegExp=vX,Pe.every=xq,Pe.find=Sq,Pe.findIndex=wF,Pe.findKey=LY,Pe.findLast=Eq,Pe.findLastIndex=bF,Pe.findLastKey=MY,Pe.floor=AJ,Pe.forEach=kF,Pe.forEachRight=TF,Pe.forIn=OY,Pe.forInRight=HY,Pe.forOwn=$Y,Pe.forOwnRight=QY,Pe.get=ix,Pe.gt=uY,Pe.gte=cY,Pe.has=KY,Pe.hasIn=lx,Pe.head=CF,Pe.identity=qo,Pe.includes=Fq,Pe.indexOf=Ej,Pe.inRange=dX,Pe.invoke=qY,Pe.isArguments=hA,Pe.isArray=Wn,Pe.isArrayBuffer=dY,Pe.isArrayLike=Wo,Pe.isArrayLikeObject=Lr,Pe.isBoolean=AY,Pe.isBuffer=Kc,Pe.isDate=fY,Pe.isElement=mY,Pe.isEmpty=hY,Pe.isEqual=vY,Pe.isEqualWith=pY,Pe.isError=sx,Pe.isFinite=gY,Pe.isFunction=qu,Pe.isInteger=VF,Pe.isLength=I1,Pe.isMap=LF,Pe.isMatch=yY,Pe.isMatchWith=_Y,Pe.isNaN=wY,Pe.isNative=bY,Pe.isNil=CY,Pe.isNull=xY,Pe.isNumber=MF,Pe.isObject=br,Pe.isObjectLike=Tr,Pe.isPlainObject=Qv,Pe.isRegExp=ox,Pe.isSafeInteger=SY,Pe.isSet=OF,Pe.isString=F1,Pe.isSymbol=ci,Pe.isTypedArray=dm,Pe.isUndefined=EY,Pe.isWeakMap=BY,Pe.isWeakSet=kY,Pe.join=Fj,Pe.kebabCase=pX,Pe.last=Ui,Pe.lastIndexOf=Pj,Pe.lowerCase=gX,Pe.lowerFirst=yX,Pe.lt=TY,Pe.lte=IY,Pe.max=fJ,Pe.maxBy=mJ,Pe.mean=hJ,Pe.meanBy=vJ,Pe.min=pJ,Pe.minBy=gJ,Pe.stubArray=mx,Pe.stubFalse=hx,Pe.stubObject=aJ,Pe.stubString=rJ,Pe.stubTrue=sJ,Pe.multiply=yJ,Pe.nth=Dj,Pe.noConflict=qX,Pe.noop=fx,Pe.now=B1,Pe.pad=_X,Pe.padEnd=wX,Pe.padStart=bX,Pe.parseInt=xX,Pe.random=AX,Pe.reduce=Nq,Pe.reduceRight=Vq,Pe.repeat=CX,Pe.replace=SX,Pe.result=nX,Pe.round=_J,Pe.runInContext=At,Pe.sample=Mq,Pe.size=$q,Pe.snakeCase=EX,Pe.some=Qq,Pe.sortedIndex=Oj,Pe.sortedIndexBy=Hj,Pe.sortedIndexOf=$j,Pe.sortedLastIndex=Qj,Pe.sortedLastIndexBy=Gj,Pe.sortedLastIndexOf=zj,Pe.startCase=kX,Pe.startsWith=TX,Pe.subtract=wJ,Pe.sum=bJ,Pe.sumBy=xJ,Pe.template=IX,Pe.times=oJ,Pe.toFinite=Yu,Pe.toInteger=Zn,Pe.toLength=$F,Pe.toLower=FX,Pe.toNumber=Ri,Pe.toSafeInteger=FY,Pe.toString=Ra,Pe.toUpper=PX,Pe.trim=DX,Pe.trimEnd=UX,Pe.trimStart=RX,Pe.truncate=NX,Pe.unescape=VX,Pe.uniqueId=lJ,Pe.upperCase=LX,Pe.upperFirst=ux,Pe.each=kF,Pe.eachRight=TF,Pe.first=CF,Ax(Pe,(function(){var _={};return nu(Pe,function(B,z){Ha.call(Pe.prototype,z)||(_[z]=B)}),_})(),{chain:!1}),Pe.VERSION=a,So(["bind","bindKey","curry","curryRight","partial","partialRight"],function(_){Pe[_].placeholder=Pe}),So(["drop","take"],function(_,B){oa.prototype[_]=function(z){z=z===n?1:is(Zn(z),0);var he=this.__filtered__&&!B?new oa(this):this.clone();return he.__filtered__?he.__takeCount__=Xs(z,he.__takeCount__):he.__views__.push({size:Xs(z,G),type:_+(he.__dir__<0?"Right":"")}),he},oa.prototype[_+"Right"]=function(z){return this.reverse()[_](z).reverse()}}),So(["filter","map","takeWhile"],function(_,B){var z=B+1,he=z==ie||z==Q;oa.prototype[_]=function(Be){var Ne=this.clone();return Ne.__iteratees__.push({iteratee:Bn(Be,3),type:z}),Ne.__filtered__=Ne.__filtered__||he,Ne}}),So(["head","last"],function(_,B){var z="take"+(B?"Right":"");oa.prototype[_]=function(){return this[z](1).value()[0]}}),So(["initial","tail"],function(_,B){var z="drop"+(B?"":"Right");oa.prototype[_]=function(){return this.__filtered__?new oa(this):this[z](1)}}),oa.prototype.compact=function(){return this.filter(qo)},oa.prototype.find=function(_){return this.filter(_).head()},oa.prototype.findLast=function(_){return this.reverse().find(_)},oa.prototype.invokeMap=na(function(_,B){return typeof _=="function"?new oa(this):this.map(function(z){return Vv(z,_,B)})}),oa.prototype.reject=function(_){return this.filter(T1(Bn(_)))},oa.prototype.slice=function(_,B){_=Zn(_);var z=this;return z.__filtered__&&(_>0||B<0)?new oa(z):(_<0?z=z.takeRight(-_):_&&(z=z.drop(_)),B!==n&&(B=Zn(B),z=B<0?z.dropRight(-B):z.take(B-_)),z)},oa.prototype.takeRightWhile=function(_){return this.reverse().takeWhile(_).reverse()},oa.prototype.toArray=function(){return this.take(G)},nu(oa.prototype,function(_,B){var z=/^(?:filter|find|map|reject)|While$/.test(B),he=/^(?:head|last)$/.test(B),Be=Pe[he?"take"+(B=="last"?"Right":""):B],Ne=he||/^find/.test(B);Be&&(Pe.prototype[B]=function(){var Xe=this.__wrapped__,st=he?[1]:arguments,mt=Xe instanceof oa,Mt=st[0],Ot=mt||Wn(Xe),Gt=function(sa){var ua=Be.apply(Pe,rl([sa],st));return he&&rn?ua[0]:ua};Ot&&z&&typeof Mt=="function"&&Mt.length!=1&&(mt=Ot=!1);var rn=this.__chain__,pn=!!this.__actions__.length,Fn=Ne&&!rn,ta=mt&&!pn;if(!Ne&&Ot){Xe=ta?Xe:new oa(this);var Pn=_.apply(Xe,st);return Pn.__actions__.push({func:S1,args:[Gt],thisArg:n}),new Fi(Pn,rn)}return Fn&&ta?_.apply(this,st):(Pn=this.thru(Gt),Fn?he?Pn.value()[0]:Pn.value():Pn)})}),So(["pop","push","shift","sort","splice","unshift"],function(_){var B=Xg[_],z=/^(?:push|sort|unshift)$/.test(_)?"tap":"thru",he=/^(?:pop|shift)$/.test(_);Pe.prototype[_]=function(){var Be=arguments;if(he&&!this.__chain__){var Ne=this.value();return B.apply(Wn(Ne)?Ne:[],Be)}return this[z](function(Xe){return B.apply(Wn(Xe)?Xe:[],Be)})}}),nu(oa.prototype,function(_,B){var z=Pe[B];if(z){var he=z.name+"";Ha.call(om,he)||(om[he]=[]),om[he].push({name:B,func:z})}}),om[g1(n,w).name]=[{name:"wrapper",func:n}],oa.prototype.clone=VK,oa.prototype.reverse=LK,oa.prototype.value=MK,Pe.prototype.at=mq,Pe.prototype.chain=hq,Pe.prototype.commit=vq,Pe.prototype.next=pq,Pe.prototype.plant=yq,Pe.prototype.reverse=_q,Pe.prototype.toJSON=Pe.prototype.valueOf=Pe.prototype.value=wq,Pe.prototype.first=Pe.prototype.head,Iv&&(Pe.prototype[Iv]=gq),Pe}),am=vK();Ds?((Ds.exports=am)._=am,Yf._=am):kr._=am}).call(Cfe)})(fp,fp.exports)),fp.exports}var Efe=Sfe();const Hn=cM(Efe),pM=6048e5,Bfe=864e5,gM=6e4,yM=36e5,G3=Symbol.for("constructDateFrom");function Ec(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&G3 in e?e[G3](t):e instanceof Date?new e.constructor(t):new Date(t)}function Sr(e,t){return Ec(t||e,e)}let kfe={};function yw(){return kfe}function S0(e,t){const n=yw(),a=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,r=Sr(e,t?.in),s=r.getDay(),o=(s<a?7:0)+s-a;return r.setDate(r.getDate()-o),r.setHours(0,0,0,0),r}function Q_(e,t){return S0(e,{...t,weekStartsOn:1})}function _M(e,t){const n=Sr(e,t?.in),a=n.getFullYear(),r=Ec(n,0);r.setFullYear(a+1,0,4),r.setHours(0,0,0,0);const s=Q_(r),o=Ec(n,0);o.setFullYear(a,0,4),o.setHours(0,0,0,0);const i=Q_(o);return n.getTime()>=s.getTime()?a+1:n.getTime()>=i.getTime()?a:a-1}function z3(e){const t=Sr(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function _w(e,...t){const n=Ec.bind(null,t.find(a=>typeof a=="object"));return t.map(n)}function G_(e,t){const n=Sr(e,t?.in);return n.setHours(0,0,0,0),n}function Tfe(e,t,n){const[a,r]=_w(n?.in,e,t),s=G_(a),o=G_(r),i=+s-z3(s),c=+o-z3(o);return Math.round((i-c)/Bfe)}function Ife(e,t){const n=_M(e,t),a=Ec(e,0);return a.setFullYear(n,0,4),a.setHours(0,0,0,0),Q_(a)}function K3(e,t){const n=+Sr(e)-+Sr(t);return n<0?-1:n>0?1:n}function Ffe(e,t,n){const[a,r]=_w(n?.in,e,t);return+G_(a)==+G_(r)}function Pfe(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Dfe(e){return!(!Pfe(e)&&typeof e!="number"||isNaN(+Sr(e)))}function Ufe(e,t,n){const[a,r]=_w(n?.in,e,t);return a.getFullYear()-r.getFullYear()}function wM(e,t,n){const[a,r]=_w(n?.in,e,t),s=K3(a,r),o=Math.abs(Ufe(a,r));a.setFullYear(1584),r.setFullYear(1584);const i=K3(a,r)===-s,c=s*(o-+i);return c===0?0:c}function Rfe(e,t){const n=Sr(e,t?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Nfe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Vfe=(e,t,n)=>{let a;const r=Nfe[e];return typeof r=="string"?a=r:t===1?a=r.one:a=r.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a};function nC(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Lfe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Mfe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ofe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Hfe={date:nC({formats:Lfe,defaultWidth:"full"}),time:nC({formats:Mfe,defaultWidth:"full"}),dateTime:nC({formats:Ofe,defaultWidth:"full"})},$fe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Qfe=(e,t,n,a)=>$fe[e];function Yv(e){return(t,n)=>{const a=n?.context?String(n.context):"standalone";let r;if(a==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,i=n?.width?String(n.width):o;r=e.formattingValues[i]||e.formattingValues[o]}else{const o=e.defaultWidth,i=n?.width?String(n.width):e.defaultWidth;r=e.values[i]||e.values[o]}const s=e.argumentCallback?e.argumentCallback(t):t;return r[s]}}const Gfe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},zfe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Kfe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Wfe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},jfe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},qfe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Yfe=(e,t)=>{const n=Number(e),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Xfe={ordinalNumber:Yfe,era:Yv({values:Gfe,defaultWidth:"wide"}),quarter:Yv({values:zfe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Yv({values:Kfe,defaultWidth:"wide"}),day:Yv({values:Wfe,defaultWidth:"wide"}),dayPeriod:Yv({values:jfe,defaultWidth:"wide",formattingValues:qfe,defaultFormattingWidth:"wide"})};function Xv(e){return(t,n={})=>{const a=n.width,r=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],s=t.match(r);if(!s)return null;const o=s[0],i=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(i)?Zfe(i,f=>f.test(o)):Jfe(i,f=>f.test(o));let A;A=e.valueCallback?e.valueCallback(c):c,A=n.valueCallback?n.valueCallback(A):A;const d=t.slice(o.length);return{value:A,rest:d}}}function Jfe(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function Zfe(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function eme(e){return(t,n={})=>{const a=t.match(e.matchPattern);if(!a)return null;const r=a[0],s=t.match(e.parsePattern);if(!s)return null;let o=e.valueCallback?e.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const i=t.slice(r.length);return{value:o,rest:i}}}const tme=/^(\d+)(th|st|nd|rd)?/i,nme=/\d+/i,ame={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},rme={any:[/^b/i,/^(a|c)/i]},sme={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ome={any:[/1/i,/2/i,/3/i,/4/i]},ime={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},lme={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ume={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},cme={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},dme={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ame={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},fme={ordinalNumber:eme({matchPattern:tme,parsePattern:nme,valueCallback:e=>parseInt(e,10)}),era:Xv({matchPatterns:ame,defaultMatchWidth:"wide",parsePatterns:rme,defaultParseWidth:"any"}),quarter:Xv({matchPatterns:sme,defaultMatchWidth:"wide",parsePatterns:ome,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Xv({matchPatterns:ime,defaultMatchWidth:"wide",parsePatterns:lme,defaultParseWidth:"any"}),day:Xv({matchPatterns:ume,defaultMatchWidth:"wide",parsePatterns:cme,defaultParseWidth:"any"}),dayPeriod:Xv({matchPatterns:dme,defaultMatchWidth:"any",parsePatterns:Ame,defaultParseWidth:"any"})},mme={code:"en-US",formatDistance:Vfe,formatLong:Hfe,formatRelative:Qfe,localize:Xfe,match:fme,options:{weekStartsOn:0,firstWeekContainsDate:1}};function hme(e,t){const n=Sr(e,t?.in);return Tfe(n,Rfe(n))+1}function vme(e,t){const n=Sr(e,t?.in),a=+Q_(n)-+Ife(n);return Math.round(a/pM)+1}function bM(e,t){const n=Sr(e,t?.in),a=n.getFullYear(),r=yw(),s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,o=Ec(t?.in||e,0);o.setFullYear(a+1,0,s),o.setHours(0,0,0,0);const i=S0(o,t),c=Ec(t?.in||e,0);c.setFullYear(a,0,s),c.setHours(0,0,0,0);const A=S0(c,t);return+n>=+i?a+1:+n>=+A?a:a-1}function pme(e,t){const n=yw(),a=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,r=bM(e,t),s=Ec(t?.in||e,0);return s.setFullYear(r,0,a),s.setHours(0,0,0,0),S0(s,t)}function gme(e,t){const n=Sr(e,t?.in),a=+S0(n,t)-+pme(n,t);return Math.round(a/pM)+1}function $a(e,t){const n=e<0?"-":"",a=Math.abs(e).toString().padStart(t,"0");return n+a}const Xc={y(e,t){const n=e.getFullYear(),a=n>0?n:1-n;return $a(t==="yy"?a%100:a,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):$a(n+1,2)},d(e,t){return $a(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return $a(e.getHours()%12||12,t.length)},H(e,t){return $a(e.getHours(),t.length)},m(e,t){return $a(e.getMinutes(),t.length)},s(e,t){return $a(e.getSeconds(),t.length)},S(e,t){const n=t.length,a=e.getMilliseconds(),r=Math.trunc(a*Math.pow(10,n-3));return $a(r,t.length)}},bm={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},W3={G:function(e,t,n){const a=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});case"GGGG":default:return n.era(a,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const a=e.getFullYear(),r=a>0?a:1-a;return n.ordinalNumber(r,{unit:"year"})}return Xc.y(e,t)},Y:function(e,t,n,a){const r=bM(e,a),s=r>0?r:1-r;if(t==="YY"){const o=s%100;return $a(o,2)}return t==="Yo"?n.ordinalNumber(s,{unit:"year"}):$a(s,t.length)},R:function(e,t){const n=_M(e);return $a(n,t.length)},u:function(e,t){const n=e.getFullYear();return $a(n,t.length)},Q:function(e,t,n){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return $a(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,n){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return $a(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,n){const a=e.getMonth();switch(t){case"M":case"MM":return Xc.M(e,t);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,n){const a=e.getMonth();switch(t){case"L":return String(a+1);case"LL":return $a(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,n,a){const r=gme(e,a);return t==="wo"?n.ordinalNumber(r,{unit:"week"}):$a(r,t.length)},I:function(e,t,n){const a=vme(e);return t==="Io"?n.ordinalNumber(a,{unit:"week"}):$a(a,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Xc.d(e,t)},D:function(e,t,n){const a=hme(e);return t==="Do"?n.ordinalNumber(a,{unit:"dayOfYear"}):$a(a,t.length)},E:function(e,t,n){const a=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});case"EEEE":default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,n,a){const r=e.getDay(),s=(r-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return $a(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});case"eeee":default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(e,t,n,a){const r=e.getDay(),s=(r-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return $a(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});case"cccc":default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(e,t,n){const a=e.getDay(),r=a===0?7:a;switch(t){case"i":return String(r);case"ii":return $a(r,t.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});case"iiii":default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,n){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){const a=e.getHours();let r;switch(a===12?r=bm.noon:a===0?r=bm.midnight:r=a/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){const a=e.getHours();let r;switch(a>=17?r=bm.evening:a>=12?r=bm.afternoon:a>=4?r=bm.morning:r=bm.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let a=e.getHours()%12;return a===0&&(a=12),n.ordinalNumber(a,{unit:"hour"})}return Xc.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Xc.H(e,t)},K:function(e,t,n){const a=e.getHours()%12;return t==="Ko"?n.ordinalNumber(a,{unit:"hour"}):$a(a,t.length)},k:function(e,t,n){let a=e.getHours();return a===0&&(a=24),t==="ko"?n.ordinalNumber(a,{unit:"hour"}):$a(a,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Xc.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Xc.s(e,t)},S:function(e,t){return Xc.S(e,t)},X:function(e,t,n){const a=e.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return q3(a);case"XXXX":case"XX":return kA(a);case"XXXXX":case"XXX":default:return kA(a,":")}},x:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"x":return q3(a);case"xxxx":case"xx":return kA(a);case"xxxxx":case"xxx":default:return kA(a,":")}},O:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+j3(a,":");case"OOOO":default:return"GMT"+kA(a,":")}},z:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+j3(a,":");case"zzzz":default:return"GMT"+kA(a,":")}},t:function(e,t,n){const a=Math.trunc(+e/1e3);return $a(a,t.length)},T:function(e,t,n){return $a(+e,t.length)}};function j3(e,t=""){const n=e>0?"-":"+",a=Math.abs(e),r=Math.trunc(a/60),s=a%60;return s===0?n+String(r):n+String(r)+t+$a(s,2)}function q3(e,t){return e%60===0?(e>0?"-":"+")+$a(Math.abs(e)/60,2):kA(e,t)}function kA(e,t=""){const n=e>0?"-":"+",a=Math.abs(e),r=$a(Math.trunc(a/60),2),s=$a(a%60,2);return n+r+t+s}const Y3=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},xM=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},yme=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],a=n[1],r=n[2];if(!r)return Y3(e,t);let s;switch(a){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",Y3(a,t)).replace("{{time}}",xM(r,t))},_me={p:xM,P:yme},wme=/^D+$/,bme=/^Y+$/,xme=["D","DD","YY","YYYY"];function Cme(e){return wme.test(e)}function Sme(e){return bme.test(e)}function Eme(e,t,n){const a=Bme(e,t,n);if(console.warn(a),xme.includes(e))throw new RangeError(a)}function Bme(e,t,n){const a=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${a} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const kme=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Tme=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ime=/^'([^]*?)'?$/,Fme=/''/g,Pme=/[a-zA-Z]/;function go(e,t,n){const a=yw(),r=a.locale??mme,s=a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,o=a.weekStartsOn??a.locale?.options?.weekStartsOn??0,i=Sr(e,n?.in);if(!Dfe(i))throw new RangeError("Invalid time value");let c=t.match(Tme).map(d=>{const f=d[0];if(f==="p"||f==="P"){const m=_me[f];return m(d,r.formatLong)}return d}).join("").match(kme).map(d=>{if(d==="''")return{isToken:!1,value:"'"};const f=d[0];if(f==="'")return{isToken:!1,value:Dme(d)};if(W3[f])return{isToken:!0,value:d};if(f.match(Pme))throw new RangeError("Format string contains an unescaped latin alphabet character `"+f+"`");return{isToken:!1,value:d}});r.localize.preprocessor&&(c=r.localize.preprocessor(i,c));const A={firstWeekContainsDate:s,weekStartsOn:o,locale:r};return c.map(d=>{if(!d.isToken)return d.value;const f=d.value;(Sme(f)||Cme(f))&&Eme(f,t,String(e));const m=W3[f[0]];return m(i,f,r.localize,A)}).join("")}function Dme(e){const t=e.match(Ime);return t?t[1].replace(Fme,"'"):e}function X3(e,t){return Sr(e*1e3,t?.in)}function Ume(e){return Math.trunc(+Sr(e)/1e3)}function Rme(e,t){return+Sr(e)>+Sr(t)}function ev(e,t){const n=()=>Ec(t?.in,NaN),r=Mme(e);let s;if(r.date){const A=Ome(r.date,2);s=Hme(A.restDateString,A.year)}if(!s||isNaN(+s))return n();const o=+s;let i=0,c;if(r.time&&(i=$me(r.time),isNaN(i)))return n();if(r.timezone){if(c=Qme(r.timezone),isNaN(c))return n()}else{const A=new Date(o+i),d=Sr(0,t?.in);return d.setFullYear(A.getUTCFullYear(),A.getUTCMonth(),A.getUTCDate()),d.setHours(A.getUTCHours(),A.getUTCMinutes(),A.getUTCSeconds(),A.getUTCMilliseconds()),d}return Sr(o+i+c,t?.in)}const W1={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Nme=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Vme=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Lme=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Mme(e){const t={},n=e.split(W1.dateTimeDelimiter);let a;if(n.length>2)return t;if(/:/.test(n[0])?a=n[0]:(t.date=n[0],a=n[1],W1.timeZoneDelimiter.test(t.date)&&(t.date=e.split(W1.timeZoneDelimiter)[0],a=e.substr(t.date.length,e.length))),a){const r=W1.timezone.exec(a);r?(t.time=a.replace(r[1],""),t.timezone=r[1]):t.time=a}return t}function Ome(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),a=e.match(n);if(!a)return{year:NaN,restDateString:""};const r=a[1]?parseInt(a[1]):null,s=a[2]?parseInt(a[2]):null;return{year:s===null?r:s*100,restDateString:e.slice((a[1]||a[2]).length)}}function Hme(e,t){if(t===null)return new Date(NaN);const n=e.match(Nme);if(!n)return new Date(NaN);const a=!!n[4],r=Jv(n[1]),s=Jv(n[2])-1,o=Jv(n[3]),i=Jv(n[4]),c=Jv(n[5])-1;if(a)return jme(t,i,c)?Gme(t,i,c):new Date(NaN);{const A=new Date(0);return!Kme(t,s,o)||!Wme(t,r)?new Date(NaN):(A.setUTCFullYear(t,s,Math.max(r,o)),A)}}function Jv(e){return e?parseInt(e):1}function $me(e){const t=e.match(Vme);if(!t)return NaN;const n=aC(t[1]),a=aC(t[2]),r=aC(t[3]);return qme(n,a,r)?n*yM+a*gM+r*1e3:NaN}function aC(e){return e&&parseFloat(e.replace(",","."))||0}function Qme(e){if(e==="Z")return 0;const t=e.match(Lme);if(!t)return 0;const n=t[1]==="+"?-1:1,a=parseInt(t[2]),r=t[3]&&parseInt(t[3])||0;return Yme(a,r)?n*(a*yM+r*gM):NaN}function Gme(e,t,n){const a=new Date(0);a.setUTCFullYear(e,0,4);const r=a.getUTCDay()||7,s=(t-1)*7+n+1-r;return a.setUTCDate(a.getUTCDate()+s),a}const zme=[31,null,31,30,31,30,31,31,30,31,30,31];function CM(e){return e%400===0||e%4===0&&e%100!==0}function Kme(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(zme[t]||(CM(e)?29:28))}function Wme(e,t){return t>=1&&t<=(CM(e)?366:365)}function jme(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function qme(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function Yme(e,t){return t>=0&&t<=59}function SM(e,t,n){const a=Sr(e,n?.in);return a.setHours(t),a}function Xme(e,t,n){const a=Sr(e,n?.in);return a.setMilliseconds(t),a}function EM(e,t,n){const a=Sr(e,n?.in);return a.setMinutes(t),a}function Jme(e,t,n){const a=Sr(e,n?.in);return a.setSeconds(t),a}const Yk=async(e,t,n=null)=>{try{const a=n||go(new Date,"yyyy-MM-dd");return{data:{consultation_id:(await dt.post("/consultation/",{patient_id:e,doctor_id:t,consultation_date:a})).data?.data?.consultation_id||null},error:null}}catch(a){return console.error("There was an error adding the consultation:",a),{data:null,error:a}}},J3=async e=>{try{const t=await dt.get(`/consultation/${e}`),n=Hn.cloneDeep(t.data.data.consultation),a=await kM(n.id);return n.medicines=a.data,{data:n,error:null}}catch(t){return console.error("Error updating consultation:",t),{data:[],error:t}}},BM=async e=>{try{return await dt.put(`/consultation/${e.id}`,e),{error:null}}catch(t){return console.error("Error updating consultation:",t),{error:t}}};let j1={value:[]};const kM=async e=>{try{return{data:(await dt.get(`/consultation/consultation_medicines/${e}`)).data.data.medicines,error:null}}catch(t){return console.error("Error fetching medicines:",t),{data:[],error:t}}},qy=async(e,t=null)=>{try{if(!e)throw new Error("patient_id is required");let n="";t?n=`?doctor_id=${t}`:console.warn(" fetchConsultations called without doctor_id - this will return ALL consultations for patient"),console.log(" Fetching consultations from:",`/consultation/consultations/${e}${n}`);const a=await dt.get(`/consultation/consultations/${e}${n}`);j1=Hn.cloneDeep(a.data.data.consultations),console.log(" Raw consultations from API:",j1.length,"items");for(const r of j1){const s=await kM(r.id);r.medicines=s.data}return{data:j1,error:null}}catch(n){return console.error("Error fetching consultations from API:",n),{data:[],error:n}}},Zme=async e=>{try{console.log(`[Summary] Triggering summary generation for patient: ${e}`);const t=await dt(sM({method:"post",url:`/consultation/generate-summary/${e}`}));return console.log(`[Summary] Summary generation queued successfully for patient: ${e}`),t}catch(t){return console.error(`[Summary] Failed to trigger summary generation for patient ${e}:`,t),{success:!1,error:t}}},TM=async e=>{try{return{data:(await dt.post("/patient/create",e)).data.data.newPatient,error:null}}catch(t){return console.error("There was an error adding the patient:",t),{data:null,error:t}}},ehe=async e=>{try{return console.log(`DEBUG bulkCreatePatients - Sending ${e.length} patients to API`),e.forEach((n,a)=>{console.log(`DEBUG bulkCreatePatients PATIENT ${a} - Gender: ${JSON.stringify(n.gender)}, Type: ${typeof n.gender}`),a<3&&console.log(`DEBUG bulkCreatePatients PATIENT ${a} - Full data:`,JSON.stringify(n,null,2))}),{data:(await dt.post("/patient/bulk-create",{patients:e})).data.data,error:null}}catch(t){return console.error("There was an error in bulk patient creation:",t),{data:null,error:t}}},Xk=async e=>{try{return{data:(await dt.get(`/patient/${e}`)).data.data.patient,error:null}}catch(t){return console.error("Error fetching patient details from API:",t),{data:null,error:t}}},the=async(e,t,n)=>{try{return{data:(await dt.get("/patient/patients",{params:{name:e,phone:t,date:n}})).data.data.patients,error:null}}catch(a){return console.error("Error fetching patients from API:",a),{data:[],error:a}}},nhe=async e=>{try{return await dt.put(`/patient/${e.id}`,e),{error:null}}catch(t){return{error:t}}},Jk=async e=>{try{return{data:(await dt.get(`/patient/search/${e}`)).data.data.patients,error:null}}catch(t){return console.error("Error fetching patient details from API:",t),{data:[],error:t}}},rC=e=>{if(!e)return"";try{const[t,n]=e.split(":");if(!t||!n)return e;let a=new Date;return a=SM(a,parseInt(t)),a=EM(a,parseInt(n)),a=Jme(a,0),a=Xme(a,0),go(a,"hh:mm a")}catch(t){return console.error("Error formatting time:",e,t),e}},Zk=e=>{if(!e)return null;try{const t=typeof e=="string"?ev(e):new Date(e);return wM(new Date,t)}catch(t){return console.error("Error calculating age:",e,t),null}};function IM(e){const t=new Date;t.setHours(0,0,0,0);const n=new Date(e);return n.setHours(0,0,0,0),Ffe(n,t)||Rme(n,t)}const za=e=>{if(!e)return"";try{let t;if(typeof e=="string"){const n=e.replace(" ","T")+"Z";t=ev(n)}else t=new Date(e);return go(t,"MMMM d")}catch(t){return console.error("Error formatting date:",e,t),""}},sC=go(new Date,"MMMM d"),Dn=()=>{const e=new Date,t=5.5*60*60*1e3,n=new Date(e.getTime()+t),a=n.getUTCFullYear(),r=String(n.getUTCMonth()+1).padStart(2,"0"),s=String(n.getUTCDate()).padStart(2,"0");return`${a}-${r}-${s}`},bl=e=>{if(!e)return"";try{const t=typeof e=="string"?ev(e):new Date(e);return go(t,"MMM d, yyyy")}catch(t){return console.error("Error formatting date for chip:",e,t),e}},cd=e=>{if(!e)return null;try{const t=ev(e);return Ume(t)}catch(t){return console.error("Error converting date to timestamp:",e,t),null}},ahe=e=>{if(!e||e<946684800)return"";try{const t=new Date(e*1e3);return go(t,"yyyy-MM-dd")}catch(t){return console.error("Error converting timestamp to date:",e,t),""}},sr=[e=>e?!0:"this information is required"],tv=[e=>{if(!e)return"this information is required";const t=e.toString().replace(/\s+/g,"");return/^\d+$/.test(t)?t.length!==10?"Contact number must be exactly 10 digits.":/^0+$/.test(t)||/^(.)\1{9}$/.test(t)?"Please enter a valid phone number.":!0:"Contact number must contain only digits."}],FM=[e=>e?!0:"this information is required"],eT=[e=>{if(!e)return"this information is required.";const t=parseInt(e,10);return isNaN(t)||t<0||t>120?"Age must be a valid number between 0 and 120.":!0}],tT=[e=>{if(!e)return"this information is required.";const t=new Date(e);return IM(t)?"Birth date cannot be today or in the future.":!0}],nT=[e=>e?!0:"this information is required."],aE=[e=>{if(!e)return"this information is required.";const t=new Date(e);return IM(t)?!0:"Appointment date cannot be in the past."}],mg=[e=>!e||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)||"Please enter a valid email address"],rhe=[e=>{if(!e)return"this information is required";const t=e.toString().replace(/\s+/g,"");return/^\d+$/.test(t)?t.length!==6?"Pincode must be exactly 6 digits.":!0:"Pincode must contain only digits."}],PM=""+new URL("images/add_patient-CvgE6aXm.png",import.meta.url).href,she={class:"w-100",style:{"white-space":"normal",overflow:"visible","text-overflow":"unset"}},ohe={class:"text-subtitle-2 mb-1",style:{"white-space":"normal","line-height":"1.3",overflow:"visible","text-overflow":"unset"}},ihe={class:"text-caption",style:{opacity:"0.7"}},lhe={class:"d-flex justify-center"},uhe={class:"d-flex age-dob-container",style:{gap:"8px"}},che={class:"d-flex justify-center"},dhe={__name:"add-appointment",props:{doctorId:{type:[String,Number],required:!0},clinicId:{type:[String,Number],required:!0},selectedDate:{type:String,default:()=>Dn()}},emits:["close","appointment-created","error"],setup(e,{emit:t}){const n=e,a=ea(),r=t;let s=null,o=null;const i=M(!1),c=M([]),A=M(""),d=M([]),f=M(!1),m=M(!1),h=M("dob"),v=M(""),y=M({name:"",contact_number:"",age:"",birthDate:"",gender:"",email:""}),g=M(n.selectedDate),w=M(new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Kolkata"})),b=M("walkin"),x=M(n.selectedDate),T=M(new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Kolkata"})),U=M("walkin"),k=ee(()=>n.doctorId),S=ee(()=>n.clinicId),E=ee(()=>a.getters["doctorModule/isProcedurePrimary"]),C=()=>E.value?"procedure":"consultation",P=M(C()),F=M(C()),N=te=>te?`${te.name||""} (${te.contactNumber||te.contact_number||""})`:"",L=(te,Y=0,K=!1)=>{if(Y===0)return"First time patient";if(K&&Y>1)return te?`Has appointment today  Last visit: ${bl(te)}`:"Has appointment today";if(K&&Y===1)return"First visit today";if(te){const X=Dn(),ae=te;if(ae<X)return`Last visit: ${bl(ae)}`;if(ae>X)return`Next visit: ${bl(ae)}`}return"No previous visits"},ie=ee(()=>!A.value||A.value.length<1?"Start typing to search for patients":f.value?`No patients found matching "${A.value}"`:""),le=M(!1),Q=M(!1),Z=te=>{const Y=te.target.value.replace(/[^0-9]/g,"").slice(0,10);y.value.contact_number=Y},ce=te=>{if(h.value==="dob")if(te){v.value=te;const Y=Zk(te);Y!==null&&(y.value.age=Y.toString())}else v.value=""};We(h,te=>{te==="age"?(y.value.birthDate&&(v.value=y.value.birthDate),y.value.birthDate=""):v.value&&(y.value.birthDate=v.value)});const J=async te=>{if(!te||te.length<1){c.value=[],f.value=!1;return}o&&o.abort(),o=new AbortController,i.value=!0,f.value=!1;try{const Y=await Jk(te,{signal:o.signal});o.signal.aborted||(c.value=Y.data,(!c.value||c.value.length===0)&&(f.value=!0))}catch(Y){Y.name!=="AbortError"&&(console.error("Error fetching patients:",Y),f.value=!0)}finally{o?.signal.aborted||(i.value=!1)}};We(A,te=>{s&&clearTimeout(s),f.value=!1,s=setTimeout(()=>{J(te)},300)}),We(E,(te,Y)=>{if(te===Y)return;const K=te?"procedure":"consultation",X=Y?"procedure":"consultation";P.value===X&&(P.value=K),F.value===X&&(F.value=K)},{immediate:!1});const se=()=>{m.value=!m.value,m.value&&(h.value="dob",v.value="",y.value={name:"",contact_number:"",age:"",birthDate:"",gender:"",email:""})},G=async()=>{const te={...y.value};if(h.value==="dob"&&te.birthDate){const X=cd(te.birthDate);X!==null?te.birthDate=X.toString():te.birthDate=""}else delete te.birthDate;const Y=await TM(te),K=Y.data.id;Y.error?console.error("There was an error adding the patient:",Y.error):j(K,k.value,S.value)},D=async(te,Y,K)=>{const X={patientId:te,clinicId:K,doctorId:Y,appointmentDate:g.value,appointmentTime:w.value,status:"waiting",category:b.value,type:P.value};try{await dt.post("/appointment/",X),E.value||await ne(te,k.value,g.value),r("appointment-created",{success:!0,message:"Appointment created successfully"}),H()}catch(ae){console.error("There was an error creating new appointment:",ae),ae.response?.status===409?r("error",{title:"Appointment Already Exists",message:"An appointment for this patient with the same doctor, clinic, and date already exists. Please choose a different date.",type:"warning"}):ae.response?.status===404?r("error",{title:"Patient Not Found",message:"The selected patient could not be found. Please try searching again.",type:"error"}):ae.response?.status===400?r("error",{title:"Invalid Data",message:ae.response.data?.error||"Please check your appointment details and try again.",type:"error"}):r("error",{title:"Error Creating Appointment",message:"An unexpected error occurred while creating the appointment. Please try again.",type:"error"})}},j=async(te,Y,K)=>{const X={patientId:te,clinicId:K,doctorId:Y,appointmentDate:x.value,appointmentTime:T.value,status:"waiting",category:U.value,type:F.value};try{await dt.post("/appointment/",X),E.value||await ne(te,k.value,x.value),r("appointment-created",{success:!0,message:"Patient and appointment created successfully"}),H()}catch(ae){console.error("There was an error creating new appointment:",ae),ae.response?.status===409?r("error",{title:"Appointment Already Exists",message:"An appointment for this patient with the same doctor, clinic, and date already exists. Please choose a different date.",type:"warning"}):ae.response?.status===404?r("error",{title:"Patient Not Found",message:"The selected patient could not be found. Please try searching again.",type:"error"}):ae.response?.status===400?r("error",{title:"Invalid Data",message:ae.response.data?.error||"Please check your appointment details and try again.",type:"error"}):r("error",{title:"Error Creating Appointment",message:"An unexpected error occurred while creating the appointment. Please try again.",type:"error"})}},ne=async(te,Y,K=null)=>{await Yk(te,Y,K)},H=()=>{r("close")};return la(()=>{s&&(clearTimeout(s),s=null),o&&(o.abort(),o=null)}),(te,Y)=>{const K=I("v-card-title"),X=I("v-col"),ae=I("v-icon"),oe=I("v-btn"),W=I("v-row"),de=I("v-card"),Ae=I("v-list-item"),Ce=I("v-divider"),De=I("v-card-subtitle"),xe=I("v-list"),ke=I("v-autocomplete"),Ee=I("v-card-text"),ye=I("v-text-field"),we=I("v-select"),at=I("v-form"),Je=I("v-btn-toggle"),rt=I("v-empty-state");return R(),ve(de,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[l(W,{"no-gutters":""},{default:u(()=>[l(X,{cols:"12"},{default:u(()=>[l(de,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(W,{"no-gutters":""},{default:u(()=>[l(X,{cols:"11"},{default:u(()=>[l(K,{class:"pa-0 pl-2"},{default:u(()=>[...Y[25]||(Y[25]=[O("Add patient to queue",-1)])]),_:1})]),_:1}),l(X,{cols:"1"},{default:u(()=>[l(oe,{icon:"",size:"x-small",onClick:H,tabindex:"-1"},{default:u(()=>[l(ae,null,{default:u(()=>[...Y[26]||(Y[26]=[p("img",{src:Yl,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(W,{"no-gutters":""},{default:u(()=>[l(X,{cols:"12"},{default:u(()=>[l(de,{flat:"",class:"d-flex justify-center ma-2",color:"surfaceContainer"},{default:u(()=>[l(ke,{ref:"searchRef",density:"compact",placeholder:"Search by name or phone",style:{width:"90%","max-width":"700px"},theme:"light",variant:"solo",rounded:"l",items:c.value,search:A.value,"onUpdate:search":Y[2]||(Y[2]=it=>A.value=it),loading:i.value,"item-title":N,"item-value":"id","return-object":"",modelValue:d.value,"onUpdate:modelValue":Y[3]||(Y[3]=it=>d.value=it),chips:"",clearable:"","prepend-inner-icon":"mdi-magnify","no-data-text":ie.value,"menu-props":{maxHeight:"400px",closeOnContentClick:!1}},{item:u(({props:it,item:Ie,index:Ve})=>[l(xe,{density:"compact",class:"pa-0 py-1"},{default:u(()=>[l(Ae,Fe(it,{class:"py-0 my-0",style:{"min-height":"60px"}}),{default:u(()=>[p("div",she,[p("div",ohe," ID: "+q(Ie.raw.id)+"  "+q(Ie.raw.gender)+", "+q(Ie.raw.age)+" yrs  Added On: "+q(Oe(bl)(Ie.raw.createdAt))+q(Ie.raw.importID?`  Import ID:
                      ${Ie.raw.importID}`:""),1),p("div",ihe,q(L(Ie.raw.lastAppointmentDate,Ie.raw.totalAppointments,Ie.raw.hasAppointmentToday)),1)])]),_:2},1040),Ve===c.value.length-1?(R(),me(ze,{key:0},[l(Ce),l(de,{flat:"",class:"pt-1"},{default:u(()=>[l(De,null,{default:u(()=>[...Y[27]||(Y[27]=[O("Patient not in list ?",-1)])]),_:1}),l(oe,{class:"ml-3",variant:"outlined",onClick:Y[0]||(Y[0]=ft=>{te.$refs.searchRef.blur(),se()})},{default:u(()=>[...Y[28]||(Y[28]=[O("Add New",-1)])]),_:1})]),_:1})],64)):_e("",!0)]),_:2},1024)]),"no-data":u(()=>[l(xe,{density:"compact"},{default:u(()=>[l(Ae,null,{default:u(()=>[l(De,null,{default:u(()=>[O(q(ie.value),1)]),_:1})]),_:1}),f.value&&A.value&&A.value.length>=1?(R(),me(ze,{key:0},[l(Ce),l(de,{flat:"",class:"pt-1"},{default:u(()=>[l(De,null,{default:u(()=>[...Y[29]||(Y[29]=[O("Patient not in list ?",-1)])]),_:1}),l(oe,{class:"ml-3",variant:"outlined",onClick:Y[1]||(Y[1]=it=>{te.$refs.searchRef.blur(),se()})},{default:u(()=>[...Y[30]||(Y[30]=[O("Add New",-1)])]),_:1})]),_:1})],64)):_e("",!0)]),_:1})]),append:u(()=>[l(oe,{variant:"elevated",icon:m.value?"mdi-close":"mdi-plus",onClick:se,rounded:"xl"},null,8,["icon"])]),_:1},8,["items","search","loading","modelValue","no-data-text"])]),_:1})]),_:1})]),_:1}),l(W,{"no-gutters":""},{default:u(()=>[l(X,{cols:"12",class:"scroll-element"},{default:u(()=>[l(de,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[d.value&&d.value.id?(R(),me(ze,{key:0},[l(de,{flat:"",class:"text-left",variant:"text"},{default:u(()=>[l(Ee,{class:"ma-0 pa-0 pl-4 mb-1"},{default:u(()=>[l(W,{"no-gutters":""},{default:u(()=>[l(X,{cols:"6"},{default:u(()=>[O(q(`Name: ${d.value.name}`),1)]),_:1}),l(X,{cols:"6"},{default:u(()=>[O(q(`Gender: ${d.value.gender}`),1)]),_:1})]),_:1}),l(W,{"no-gutters":""},{default:u(()=>[l(X,{cols:"6"},{default:u(()=>[O(q(`Contact: ${d.value.contactNumber}`),1)]),_:1}),l(X,{cols:"6"},{default:u(()=>[O(q(d.value.age!==null?`Age: ${d.value.age} yrs`:""),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(de,{flat:"",class:"text-left",variant:"text"},{default:u(()=>[l(at,{modelValue:le.value,"onUpdate:modelValue":Y[10]||(Y[10]=it=>le.value=it),"validate-on":"input"},{default:u(()=>[l(W,{"no-gutters":""},{default:u(()=>[l(X,{cols:"12"},{default:u(()=>[l(ye,{label:"Appointment Date *",modelValue:g.value,"onUpdate:modelValue":Y[4]||(Y[4]=it=>g.value=it),type:"date",density:"compact",rules:Oe(aE),class:"date-input",onClick:Y[5]||(Y[5]=it=>it.target.showPicker&&it.target.showPicker())},null,8,["modelValue","rules"])]),_:1}),l(X,{cols:"12"},{default:u(()=>[l(ye,{label:"Appointment Time",modelValue:w.value,"onUpdate:modelValue":Y[6]||(Y[6]=it=>w.value=it),type:"time",density:"compact"},null,8,["modelValue"])]),_:1}),l(X,{cols:"12"},{default:u(()=>[l(we,{modelValue:P.value,"onUpdate:modelValue":Y[7]||(Y[7]=it=>P.value=it),items:["consultation","followup","procedure"],label:"Appointment Type"},null,8,["modelValue"])]),_:1}),l(X,{cols:"12"},{default:u(()=>[l(we,{modelValue:b.value,"onUpdate:modelValue":Y[8]||(Y[8]=it=>b.value=it),items:["walkin","scheduled"],label:"Appointment Category"},null,8,["modelValue"])]),_:1}),l(X,{cols:"12"},{default:u(()=>[l(Ce,{class:"mb-2"}),p("div",lhe,[l(oe,{variant:"outlined",onClick:Y[9]||(Y[9]=it=>D(d.value.id,k.value,S.value)),disabled:!le.value},{default:u(()=>[...Y[31]||(Y[31]=[O("Add to Queue",-1)])]),_:1},8,["disabled"])])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)):m.value?(R(),ve(de,{key:1,flat:"",class:"text-left",variant:"text"},{default:u(()=>[l(at,{modelValue:Q.value,"onUpdate:modelValue":Y[24]||(Y[24]=it=>Q.value=it),"validate-on":"input"},{default:u(()=>[l(W,{"no-gutters":"",class:"mt-0 mb-4"},{default:u(()=>[l(X,{cols:"6",class:"pr-2"},{default:u(()=>[l(ye,{label:"Name *",modelValue:y.value.name,"onUpdate:modelValue":Y[11]||(Y[11]=it=>y.value.name=it),clearable:"",rules:Oe(sr),density:"compact","hide-details":"auto"},null,8,["modelValue","rules"])]),_:1}),l(X,{cols:"6",class:"pl-2"},{default:u(()=>[l(ye,{label:"Phone Number *",modelValue:y.value.contact_number,"onUpdate:modelValue":Y[12]||(Y[12]=it=>y.value.contact_number=it),type:"tel",rules:Oe(tv),clearable:"",density:"compact",maxlength:"10",onInput:Z,"hide-details":"auto"},null,8,["modelValue","rules"])]),_:1})]),_:1}),l(W,{"no-gutters":"",class:"my-4"},{default:u(()=>[l(X,{cols:"6",class:"pr-2"},{default:u(()=>[p("div",uhe,[l(Je,{modelValue:h.value,"onUpdate:modelValue":Y[13]||(Y[13]=it=>h.value=it),mandatory:"",density:"compact",variant:"outlined",divided:"",class:"age-dob-toggle"},{default:u(()=>[l(oe,{value:"dob",size:"small"},{default:u(()=>[...Y[32]||(Y[32]=[O("DOB",-1)])]),_:1}),l(oe,{value:"age",size:"small"},{default:u(()=>[...Y[33]||(Y[33]=[O("Age",-1)])]),_:1})]),_:1},8,["modelValue"]),h.value==="age"?(R(),ve(ye,{key:0,label:"Age (yrs) *",modelValue:y.value.age,"onUpdate:modelValue":Y[14]||(Y[14]=it=>y.value.age=it),clearable:"",density:"compact",rules:Oe(eT),disabled:!!y.value.birthDate||!!v.value,class:"flex-grow-1","hide-details":"auto"},null,8,["modelValue","rules","disabled"])):(R(),ve(ye,{key:1,label:"Date of Birth *",modelValue:y.value.birthDate,"onUpdate:modelValue":[Y[15]||(Y[15]=it=>y.value.birthDate=it),ce],type:"date",clearable:"",density:"compact",rules:Oe(tT),class:"flex-grow-1 date-input","hide-details":"auto",onClick:Y[16]||(Y[16]=it=>it.target.showPicker&&it.target.showPicker())},null,8,["modelValue","rules"]))])]),_:1}),l(X,{cols:"6",class:"pl-2"},{default:u(()=>[l(we,{modelValue:y.value.gender,"onUpdate:modelValue":Y[17]||(Y[17]=it=>y.value.gender=it),items:["Male","Female"],label:"Gender *",clearable:"",density:"compact",rules:Oe(nT),"hide-details":"auto"},null,8,["modelValue","rules"])]),_:1})]),_:1}),l(W,{"no-gutters":"",class:"my-4"},{default:u(()=>[l(X,{cols:"12"},{default:u(()=>[l(ye,{label:"Email (optional)",modelValue:y.value.email,"onUpdate:modelValue":Y[18]||(Y[18]=it=>y.value.email=it),type:"email",clearable:"",density:"compact",rules:Oe(mg),"hide-details":"auto"},null,8,["modelValue","rules"])]),_:1})]),_:1}),l(W,{"no-gutters":"",class:"my-4"},{default:u(()=>[l(X,{cols:"6",class:"pr-2"},{default:u(()=>[l(ye,{label:"Appointment Date *",modelValue:x.value,"onUpdate:modelValue":Y[19]||(Y[19]=it=>x.value=it),type:"date",density:"compact",rules:Oe(aE),class:"date-input",onClick:Y[20]||(Y[20]=it=>it.target.showPicker&&it.target.showPicker()),"hide-details":"auto"},null,8,["modelValue","rules"])]),_:1}),l(X,{cols:"6",class:"pl-2"},{default:u(()=>[l(ye,{label:"Appointment Time",modelValue:T.value,"onUpdate:modelValue":Y[21]||(Y[21]=it=>T.value=it),type:"time",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1})]),_:1}),l(W,{"no-gutters":"",class:"my-4"},{default:u(()=>[l(X,{cols:"6",class:"pr-2"},{default:u(()=>[l(we,{modelValue:F.value,"onUpdate:modelValue":Y[22]||(Y[22]=it=>F.value=it),items:["consultation","followup","procedure"],label:"Appointment Type",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1}),l(X,{cols:"6",class:"pl-2"},{default:u(()=>[l(we,{modelValue:U.value,"onUpdate:modelValue":Y[23]||(Y[23]=it=>U.value=it),items:["walkin","scheduled"],label:"Appointment Category",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1})]),_:1}),l(W,{"no-gutters":""},{default:u(()=>[l(X,{cols:"12"},{default:u(()=>[l(Ce,{class:"mb-2"}),p("div",che,[l(oe,{variant:"outlined",disabled:!Q.value,onClick:G},{default:u(()=>[...Y[34]||(Y[34]=[O("Create and Add to Queue ",-1)])]),_:1},8,["disabled"])])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})):(R(),ve(rt,{key:2,image:Oe(PM)},{title:u(()=>[...Y[35]||(Y[35]=[p("div",{class:"text-subtitle-2 mt-8"}," Search for old patients or add a new patient above ",-1)])]),text:u(()=>[...Y[36]||(Y[36]=[p("div",{class:"text-caption"},null,-1)])]),_:1},8,["image"]))]),_:1})]),_:1})]),_:1})]),_:1})}}},Z3=Xt(dhe,[["__scopeId","data-v-944161e8"]]),Ahe=async(e,t,n=null)=>{try{console.log("fetchAppointments called with params:",{doctor_id:e,clinic_id:t,date:n});const a={doctor_id:e,clinic_id:t};return n?(a.date=n,console.log("Adding date to params:",n)):console.log("No date provided, will use server default (today)"),console.log("Final API params:",a),{data:(await dt.get("/appointment/",{params:a})).data.data.appointments,error:null}}catch(a){return console.error("There was an error fetching the patients:",a?.response||a),{data:[],error:a}}},fhe=async(e="",t="")=>{try{const n={};e&&e.trim()!==""&&(n.doctor=e.trim()),t&&t.trim()!==""&&(n.fromdate=t.trim());const a=await dt.get("/appointment/completed",{params:n});return{data:a.data.data.appointments||[],total:a.data.data.total||0,filters:a.data.data.filters||{},error:null}}catch(n){return console.error("There was an error fetching completed appointments:",n?.response||n),{data:[],total:0,filters:{},error:n}}},DM=async e=>{try{return await dt.put(`/appointment/${e.id}`,e),{error:null}}catch(t){return console.error("Error updating consultation:",t),{error:t}}},mhe=async e=>{try{return await dt.delete(`/appointment/${e}`),{error:null}}catch(t){return console.error("Error deleting appointment:",t),{error:t}}},hhe={class:"d-flex justify-center"},eU={__name:"edit-appointment",props:{appointment:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const r=M((d=>{console.log("Edit appointment - original appointment:",d);const f={...d};if(f.appointmentDate){console.log("Original appointmentDate:",f.appointmentDate);let m=f.appointmentDate;if(m.includes("T")?m=m.split("T")[0]:m.length>10&&(m=m.split(" ")[0]),/^\d{4}-\d{2}-\d{2}$/.test(m))f.appointmentDate=m;else try{const v=new Date(m);if(!isNaN(v.getTime())){const y=v.getFullYear(),g=String(v.getMonth()+1).padStart(2,"0"),w=String(v.getDate()).padStart(2,"0");f.appointmentDate=`${y}-${g}-${w}`}}catch(v){console.error("Error parsing appointment date:",m,v)}console.log("Formatted appointmentDate:",f.appointmentDate)}return f.category||(f.category="scheduled"),f.status||(f.status="waiting"),f})(e.appointment)),s=t,o=M(!1),i=()=>{s("close")},c=async()=>{await A(r.value),console.log("close modal",r.value),s("close")},A=async d=>{(await DM(d)).error?console.error("Error updating consultation:"):console.log("Appointment updated successfully")};return(d,f)=>{const m=I("v-card-title"),h=I("v-col"),v=I("v-icon"),y=I("v-btn"),g=I("v-row"),w=I("v-card"),b=I("v-text-field"),x=I("v-select"),T=I("v-divider"),U=I("v-form");return R(),ve(w,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[l(g,{"no-gutters":""},{default:u(()=>[l(h,{cols:"12"},{default:u(()=>[l(w,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(g,{"no-gutters":""},{default:u(()=>[l(h,{cols:"11"},{default:u(()=>[l(m,{class:"pa-0 pl-2"},{default:u(()=>[...f[7]||(f[7]=[O("Edit appointment details",-1)])]),_:1})]),_:1}),l(h,{cols:"1"},{default:u(()=>[l(y,{icon:"",size:"x-small",onClick:i},{default:u(()=>[l(v,null,{default:u(()=>[...f[8]||(f[8]=[p("img",{src:Yl,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(g,{"no-gutters":""},{default:u(()=>[l(h,{cols:"12"},{default:u(()=>[l(w,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(U,{modelValue:o.value,"onUpdate:modelValue":f[6]||(f[6]=k=>o.value=k),"validate-on":"blur"},{default:u(()=>[l(g,{"no-gutters":""},{default:u(()=>[l(h,{cols:"12"},{default:u(()=>[l(b,{label:"Appointment Date *",modelValue:r.value.appointmentDate,"onUpdate:modelValue":f[0]||(f[0]=k=>r.value.appointmentDate=k),type:"date",rules:Oe(aE)},null,8,["modelValue","rules"])]),_:1}),l(h,{cols:"12"},{default:u(()=>[l(b,{label:"Appointment Time",modelValue:r.value.appointmentTime,"onUpdate:modelValue":f[1]||(f[1]=k=>r.value.appointmentTime=k),type:"time"},null,8,["modelValue"])]),_:1}),l(h,{cols:"12"},{default:u(()=>[l(x,{modelValue:r.value.type,"onUpdate:modelValue":f[2]||(f[2]=k=>r.value.type=k),items:["consultation","followup","procedure"],label:"Appointment Type"},null,8,["modelValue"])]),_:1}),l(h,{cols:"12"},{default:u(()=>[l(x,{modelValue:r.value.category,"onUpdate:modelValue":f[3]||(f[3]=k=>r.value.category=k),items:["walkin","scheduled"],label:"Appointment Category"},null,8,["modelValue"])]),_:1}),l(h,{cols:"12"},{default:u(()=>[l(x,{modelValue:r.value.status,"onUpdate:modelValue":f[4]||(f[4]=k=>r.value.status=k),items:[{title:"waiting",value:"waiting"},{title:"confirmed",value:"confirmed"},{title:"completed",value:"completed"},{title:"cancelled",value:"cancelled"}],label:"Appointment Status","item-title":"title","item-value":"value"},null,8,["modelValue"])]),_:1}),l(h,{cols:"12"},{default:u(()=>[l(T,{class:"mb-2"}),p("div",hhe,[l(y,{variant:"outlined",onClick:f[5]||(f[5]=k=>c()),disabled:!o.value},{default:u(()=>[...f[9]||(f[9]=[O("Update Appointment",-1)])]),_:1},8,["disabled"])])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},vhe=async e=>{try{return!e||e.trim().length===0?{data:{services:[]},error:null}:{data:(await dt.get(`/services/search_services/${encodeURIComponent(e)}`)).data.data,error:null}}catch(t){return console.error("Error searching services:",t),{data:null,error:t}}},phe=async()=>{try{return{data:(await dt.get("/services/all")).data.data,error:null}}catch(e){return console.error("Error fetching all services:",e),{data:null,error:e}}},ghe=async e=>{try{if(!e)throw new Error("Doctor ID is required");return{data:(await dt.get(`/paymentreceipt/next-identifier/${e}`)).data.data,error:null}}catch(t){return console.error("Error getting next receipt identifier:",t),t.response?.status===400&&t.response?.data?.error?.includes("No receipt series found")?{data:null,error:{message:"No receipt series found. Please create a receipt series first in Admin Settings  Payment Receipt Series Configuration.",needsSeries:!0}}:{data:null,error:t}}},UM=async e=>{try{if(!e.doctorId)throw new Error("Doctor ID is required");if(!e.appointmentId&&!e.billId)throw new Error("Either Appointment ID or Bill ID is required");if(!e.billId&&(!e.services||!Array.isArray(e.services)||e.services.length===0))throw new Error("At least one service is required when Bill ID is not provided");return{data:(await dt.post("/paymentreceipt/with-services",e)).data.data,error:null}}catch(t){if(console.error("Error creating receipt with services:",t),t.response?.status===500){const n=t.response?.data?.error||t.message||"";if(n.includes("No receipt series found")||n.includes("receipt series")||t.response?.data&&JSON.stringify(t.response.data).includes("receipt series"))return{data:null,error:{message:"No receipt series found. Please create a receipt series first in Admin Settings  Payment Receipt Series Configuration.",needsSeries:!0}}}return t.response?.status===400&&t.response?.data?.error?.includes("No receipt series found")?{data:null,error:{message:"No receipt series found. Please create a receipt series first in Admin Settings  Payment Receipt Series Configuration.",needsSeries:!0}}:{data:null,error:t}}},RM=async e=>{try{if(!e)throw new Error("Receipt ID is required");return{data:(await dt.get(`/paymentreceipt/${e}/with-services`)).data.data,error:null}}catch(t){return console.error("Error getting receipt with services:",t),{data:null,error:t}}},yhe=async(e,t)=>{try{if(!e)throw new Error("Receipt ID is required");if(!t.services||!Array.isArray(t.services)||t.services.length===0)throw new Error("At least one service is required");return{data:(await dt.put(`/paymentreceipt/${e}/with-services`,t)).data.data,error:null}}catch(n){return console.error("Error updating receipt with services:",n),{data:null,error:n}}},_he=async(e,t)=>{try{if(!e)throw new Error("Receipt ID is required");console.log(`Updating payment receipt ${e} with data:`,t);const n=await dt.put(`/paymentreceipt/${e}`,t);return console.log("Payment receipt updated successfully via basic endpoint"),{data:n.data.data,error:null}}catch(n){return console.error("Error updating payment receipt:",n),n.response&&console.error("API Error Response:",n.response.status,n.response.data),{data:null,error:n}}},whe={class:"service-name-truncate"},bhe={class:"text-caption"},xhe={class:"ml-3"},Che={key:0,class:"ml-3"},She={__name:"search-service",props:{modelValue:{type:String,default:""}},emits:["update:modelValue","serviceSelected"],setup(e,{emit:t}){const n=e,a=t,r=M(!1),s=M([]),o=M([]),i=M(!1),c=M(""),A=M(""),d=M(!1);let f=null;const m=b=>{c.value=b,i.value&&o.value.length>0?y(b):i.value||h()},h=async()=>{i.value?(!c.value||c.value.length===0)&&(s.value=o.value,d.value=!1):await v()};We(A,b=>{typeof b=="string"?(a("update:modelValue",b),a("serviceSelected",{serviceDescription:b,isUserTyped:!0,isFromHistory:!1})):b&&typeof b=="object"?(a("update:modelValue",b.serviceDescription),a("serviceSelected",b)):b||(a("update:modelValue",""),a("serviceSelected",null))}),We(c,b=>{if(f&&clearTimeout(f),d.value=!1,i.value&&o.value.length>0){if(!b||b.length<1){s.value=o.value,r.value=!1;return}y(b);return}if(!b||b.length<1){r.value=!1,s.value=[];return}f=setTimeout(()=>{g(b)},300)}),We(()=>n.modelValue,b=>{b!==A.value&&(A.value=b)},{immediate:!0});const v=async()=>{if(!i.value){r.value=!0,d.value=!1;try{const b=await phe();if(b.error){console.error("Error fetching all services:",b.error),d.value=!0;return}o.value=(b.data.services||[]).filter(x=>x.serviceDescription&&x.serviceDescription.trim().length>0),i.value=!0,s.value=o.value,c.value&&c.value.length>0&&y(c.value)}catch(b){console.error("Error fetching all services:",b),d.value=!0}finally{r.value=!1}}},y=b=>{if(!b||b.trim().length===0){s.value=o.value,d.value=!1;return}const x=b.toLowerCase().trim(),T=o.value.filter(U=>(U.serviceDescription||"").toLowerCase().includes(x));s.value=T,d.value=T.length===0},g=async b=>{if(!(!b||b.length<1)){r.value=!0,d.value=!1;try{const x=await vhe(b);if(x.error){console.error("Error fetching services:",x.error),d.value=!0;return}s.value=x.data.services.filter(T=>T.serviceDescription&&T.serviceDescription.trim().length>0),(!s.value||s.value.length===0)&&(d.value=!0)}catch(x){console.error("Error fetching services:",x),d.value=!0}finally{r.value=!1}}},w=ee(()=>r.value?i.value?"Filtering services...":"Loading services...":d.value?"No matching services found. You can create a new service by typing the description.":!c.value||c.value.length<1?i.value&&o.value.length>0?`Showing all ${o.value.length} services. Type to filter...`:"Click to view all services or type to search...":"");return(b,x)=>{const T=I("v-list-item"),U=I("v-card-subtitle"),k=I("v-card"),S=I("v-combobox");return R(),ve(S,{modelValue:A.value,"onUpdate:modelValue":x[0]||(x[0]=E=>A.value=E),items:s.value,search:c.value,"onUpdate:search":m,"onClick:clear":h,onFocus:h,onClick:h,"item-title":"serviceDescription","item-value":"serviceDescription",placeholder:"Type service description...",variant:"underlined",loading:r.value,"no-data-text":w.value,clearable:"","hide-no-data":"","auto-select-first":"",density:"compact",class:"service-combobox"},{item:u(({props:E,item:C,index:P})=>[(R(),ve(T,Fe({...E,title:void 0,value:C.raw.id||`service-${P}`},{key:C.raw.id||`service-temp-${P}`,density:"compact"}),{title:u(()=>[p("span",whe,q(C.raw.serviceDescription),1)]),subtitle:u(()=>[p("div",bhe,[p("span",null,"Base Cost: "+q(C.raw.baseCost),1),p("span",xhe,"GST: "+q(C.raw.gstPercent||0)+"%",1),C.raw.hsnSacCode?(R(),me("span",Che,"HSN/SAC: "+q(C.raw.hsnSacCode),1)):_e("",!0)])]),_:2},1040))]),"no-data":u(()=>[l(k,{flat:"",class:"pa-4 text-center"},{default:u(()=>[l(U,null,{default:u(()=>[O(q(w.value),1)]),_:1})]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},ww=Xt(She,[["__scopeId","data-v-62266e1f"]]),nv=async e=>{try{return console.log("Creating payment with data:",e),{success:!0,data:(await dt.post("/payment",e)).data.data,message:"Payment created successfully"}}catch(t){return console.error("Error creating payment:",t),{success:!1,error:{message:t.response?.data?.error||t.message||"Failed to create payment",status:t.response?.status||500}}}},hg=async e=>{try{console.log("Fetching payments for receipt ID:",e);const t=await dt.get(`/payment?paymentReceiptId=${e}`);return console.log("Raw API response:",t.data),{success:!0,data:t.data.data.payments,message:"Payments fetched successfully"}}catch(t){return console.error("Error fetching payments by receipt:",t),{success:!1,error:{message:t.response?.data?.error||t.message||"Failed to fetch payments",status:t.response?.status||500}}}},aT=async e=>{try{return console.log("Deleting payment with ID:",e),{success:!0,data:(await dt.delete(`/payment/${e}`)).data.data,message:"Payment deleted successfully"}}catch(t){return console.error("Error deleting payment:",t),{success:!1,error:{message:t.response?.data?.error||t.message||"Failed to delete payment",status:t.response?.status||500}}}},NM=async(e="",t=null,n=null)=>{try{console.log("Fetching payment receipts with filters:",{paymentReceiptDate:e,doctorId:t,treatmentPlanId:n});const a=new URLSearchParams;e&&a.append("paymentReceiptDate",e),t&&a.append("doctor_id",t.toString()),n&&a.append("treatmentPlanId",n.toString());const r=a.toString()?`/paymentreceipt?${a.toString()}`:"/paymentreceipt";return{success:!0,data:(await dt.get(r)).data.data,message:"Payment receipts fetched successfully"}}catch(a){return console.error("Error fetching payment receipts:",a),{success:!1,error:{message:a.response?.data?.error||a.message||"Failed to fetch payment receipts",status:a.response?.status||500}}}},VM=async(e,t,n,a=null)=>{try{const r=e.state.doctorModule?.doctorId;if(!r)throw new Error("No doctor selected. Please select a doctor first.");return console.log("Fetching payment receipts for date range:",{startDate:t,endDate:n,doctorId:r,treatmentPlanId:a}),await LM(t,n,r,a)}catch(r){return console.error("Error fetching payment receipts for date range:",r),{success:!1,error:{message:r.message||"Failed to fetch payment receipts for date range",status:500}}}},LM=async(e,t,n=null,a=null)=>{try{console.log("Fetching payment receipts for date range with filters:",{startDate:e,endDate:t,doctorId:n,treatmentPlanId:a});const r=new URLSearchParams;e&&r.append("startDate",e),t&&r.append("endDate",t),n&&r.append("doctor_id",n.toString()),a&&r.append("treatmentPlanId",a.toString());const s=`/paymentreceipt?${r.toString()}`;return{success:!0,data:(await dt.get(s)).data.data,message:"Payment receipts fetched successfully for date range"}}catch(r){return console.error("Error fetching payment receipts for date range:",r),{success:!1,error:{message:r.response?.data?.error||r.message||"Failed to fetch payment receipts for date range",status:r.response?.status||500}}}},bw=async(e,t="",n=null)=>{try{const a=e.state.doctorModule?.doctorId;if(!a)throw new Error("No doctor selected. Please select a doctor first.");return console.log("Fetching payment receipts for current doctor:",a,"treatmentPlanId:",n),await NM(t,a,n)}catch(a){return console.error("Error fetching payment receipts for current doctor:",a),{success:!1,error:{message:a.message||"Failed to fetch payment receipts for current doctor",status:500}}}},av=["Cash","Card","UPI","Bank Transfer","Cheque","Online","Other"],ar=e=>!e&&e!==0?"0":`${Number(e).toLocaleString("en-IN")}`,Ehe=Object.freeze(Object.defineProperty({__proto__:null,PAYMENT_MODES:av,createPayment:nv,deletePayment:aT,fetchAllPaymentReceipts:NM,fetchAllPaymentReceiptsForDateRange:LM,fetchPaymentReceiptsForCurrentDoctor:bw,fetchPaymentReceiptsForDateRange:VM,formatPaymentAmount:ar,getPaymentsByReceipt:hg},Symbol.toStringTag,{value:"Module"})),rE=async(e,t,n,a="",r="",s="",o=0)=>{try{return{data:(await dt.post("/treatmentplan/",{patient_id:e,doctor_id:t,treatmentplan_name:n,start_date:a,end_date:r,notes:s,amount_paid:o})).data.data,error:null}}catch(i){return console.error("There was an error creating the treatment plan:",i),{data:null,error:i}}},rT=async(e,t)=>{try{if(!e)throw new Error("patient_id is required");if(!t)throw new Error("doctor_id is required");console.log(" Making API call to:",`/treatmentplan/patient/${e}/doctor/${t}`);const n=await dt.get(`/treatmentplan/patient/${e}/doctor/${t}`);return console.log(" API Response status:",n.status),console.log(" API Response treatment plans count:",n.data?.data?.length||0),{data:Hn.cloneDeep(n.data.data),error:null}}catch(n){if(console.error(" Error fetching treatment plans:",n),console.error(" Error details:",{message:n.message,status:n.response?.status,statusText:n.response?.statusText,data:n.response?.data,url:n.config?.url,sqlError:n.response?.data?.error,sqlMessage:n.response?.data?.message}),n.response?.status===500){const a=n.response?.data?.message||n.response?.data?.error||n.message;if(a.includes("treatmentplan")&&(a.includes("table")||a.includes("relation")||a.includes("does not exist")))return console.error(" Database table 'treatmentplan' might not exist or have incorrect schema"),{data:[],error:{...n,message:"Treatment plans table not found or has incorrect schema. Please check database setup.",type:"DATABASE_TABLE_ERROR"}}}return{data:[],error:n}}},df=async e=>{try{const t=await dt.get(`/treatmentplan/${e}`);return{data:Hn.cloneDeep(t.data.data),error:null}}catch(t){return console.error("Error fetching treatment plan details:",t),{data:null,error:t}}},MM=async e=>{try{return await dt.delete(`/treatmentplan/${e}`),{error:null}}catch(t){return console.error("Error deleting treatment plan:",t),{error:t}}},OM=async(e="",t)=>{try{if(!t)throw new Error("Doctor ID is required");const n=new URLSearchParams;e&&n.append("search",e),n.append("doctor_id",t);const a=`/procedure/?${n.toString()}`,r=await dt.get(a);return{data:Hn.cloneDeep(r.data.data),error:null}}catch(n){return console.error("Error fetching procedures:",n),{data:[],error:n}}},sT=async(e,t=0,n="",a=!0,r="",s="",o)=>{try{if(!o)throw new Error("Doctor ID is required");const i=new URLSearchParams;return i.append("doctor_id",o),{data:(await dt.post(`/procedure/?${i.toString()}`,{procedure_name:e,cost:t,description:n,isLocal:a,procedureId:r,identifier:s})).data.data,error:null}}catch(i){return console.error("There was an error creating the procedure:",i),{data:null,error:i}}},HM=async(e,t,n)=>{try{if(!n)throw new Error("Doctor ID is required");const a=new URLSearchParams;a.append("doctor_id",n);const r=await dt.put(`/procedure/${e}?${a.toString()}`,t);return{data:Hn.cloneDeep(r.data.data),error:null}}catch(a){return console.error("Error updating procedure:",a),{data:null,error:a}}},mp=async(e,t,n=0,a="",r="",s="")=>{try{return{data:(await dt.post(`/treatmentplan/${e}/procedure`,{procedure_id:t,cost_estimate:n,notes:a,location:r,option:s})).data.data,error:null}}catch(o){return console.error("There was an error creating the treatment plan-procedure mapping:",o),{data:null,error:o}}},sE=async(e,t,n)=>{try{return{data:(await dt.put(`/treatmentplan/${e}/procedure-treatment/${t}`,n)).data.data,error:null}}catch(a){return console.error("There was an error updating the treatment plan-procedure mapping:",a),{data:null,error:a}}},$M=async(e,t)=>{try{return await dt.delete(`/treatmentplan/${e}/procedure-treatment/${t}`),{error:null}}catch(n){return console.error("There was an error deleting the treatment plan-procedure mapping:",n),{error:n}}},Bhe=async e=>{try{if(!e.doctor_id)throw new Error("doctor_id is required");const t=new URLSearchParams;e.procedureName?.trim()&&t.append("procedure_name",e.procedureName.trim()),e.dateFrom&&t.append("date_from",e.dateFrom),e.dateTo&&t.append("date_to",e.dateTo),e.gender?.trim()&&t.append("gender",e.gender.trim()),e.ageGreaterThan&&t.append("age_greater_than",e.ageGreaterThan),e.ageLessThan&&t.append("age_less_than",e.ageLessThan),t.append("doctor_id",e.doctor_id);const n=t.toString(),a=`/procedure/research${n?`?${n}`:""}`;console.log(" Making procedure research API call to:",a);const r=await dt.get(a);return console.log(" API Response status:",r.status),console.log(" API Response procedure research results count:",r.data?.data?.length||0),{data:Hn.cloneDeep(r.data.data),error:null}}catch(t){if(console.error(" Error searching procedure research data:",t),console.error(" Error details:",{message:t.message,status:t.response?.status,statusText:t.response?.statusText,data:t.response?.data,url:t.config?.url,sqlError:t.response?.data?.error,sqlMessage:t.response?.data?.message}),t.response?.status===500){const n=t.response?.data?.message||t.response?.data?.error||t.message;if(n.includes("procedure")&&(n.includes("table")||n.includes("relation")||n.includes("does not exist")))return console.error(" Database table for procedure research might not exist or have incorrect schema"),{data:[],error:{...t,message:"Procedure research tables not found or have incorrect schema. Please check database setup.",type:"DATABASE_TABLE_ERROR"}}}return{data:[],error:t}}},vg=async(e,t)=>{try{const n=await rT(e,t);if(n.error)return n;const a=n.data.filter(r=>r.status!=="Cancelled"&&!r.isTemplate);return console.log(" Filtered treatment plans for receipt linking:",{total:n.data.length,filtered:a.length,excluded:n.data.length-a.length}),{data:a,error:null}}catch(n){return console.error(" Error fetching treatment plans for receipt:",n),{data:[],error:n}}},QM=async(e,t,n)=>{try{if(!n)throw new Error("Doctor ID is required");const a=new URLSearchParams;a.append("doctor_id",n);const r=await dt.put(`/procedure/${e}?${a.toString()}`,{description:t});return{data:Hn.cloneDeep(r.data.data),error:null}}catch(a){return console.error("Error updating procedure description:",a),{data:null,error:a}}},GM=async(e="",t)=>{try{if(!t)throw new Error("Doctor ID is required");const n=new URLSearchParams;n.append("doctor_id",t);const a=e&&e.trim()?e.trim():"all",r=`/treatmentplan/template/search/${encodeURIComponent(a)}?${n.toString()}`,s=await dt.get(r);return{data:Hn.cloneDeep(s.data.data.templates||[]),error:null}}catch(n){return console.error("Error searching treatment plan templates:",n),{data:[],error:n}}},zM=async e=>{try{const t=await dt.post("/treatmentplan/template",e);return{data:Hn.cloneDeep(t.data.data),error:null}}catch(t){return console.error("Error creating treatment plan template:",t),{data:null,error:t}}},KM=async(e,t)=>{try{const n=await dt.put(`/treatmentplan/template/${e}`,t);return{data:Hn.cloneDeep(n.data.data),error:null}}catch(n){return console.error("Error updating treatment plan template:",n),{data:null,error:n}}},WM=async e=>{try{const t=await dt.get(`/treatmentplan/template/${e}`);return{data:Hn.cloneDeep(t.data.data),error:null}}catch(t){return console.error("Error fetching treatment plan template:",t),{data:null,error:t}}},jM=async e=>{try{if(!e)throw new Error("Doctor ID is required");const t=new URLSearchParams;t.append("doctor_id",e);const n=`/treatmentplan/template/search/all?${t.toString()}`,a=await dt.get(n);return{data:Hn.cloneDeep(a.data.data||[]),error:null}}catch(t){return console.error("Error fetching all treatment plan templates:",t),{data:[],error:t}}},khe=Object.freeze(Object.defineProperty({__proto__:null,createProcedure:sT,createProcedureTreatment:mp,createTreatmentPlan:rE,createTreatmentPlanTemplate:zM,deleteProcedureTreatment:$M,deleteTreatmentPlan:MM,fetchProcedureDetails:df,fetchProcedures:OM,fetchTreatmentPlans:rT,fetchTreatmentPlansForReceipt:vg,getAllTreatmentPlanTemplates:jM,getTreatmentPlanTemplate:WM,searchProcedureResearch:Bhe,searchTreatmentPlanTemplates:GM,updateProcedure:HM,updateProcedureDescription:QM,updateProcedureTreatment:sE,updateTreatmentPlanTemplate:KM},Symbol.toStringTag,{value:"Module"}));function oT(e,t){const n=A=>{const d=parseFloat(A.baseCost)||0,f=parseInt(A.quantity)||1,m=parseFloat(A.discountAmount)||0;return Math.max(0,d-m)*f},a=ee(()=>e.value.map(A=>({...A,total:n(A)}))),r=ee(()=>e.value.reduce((A,d)=>{const f=parseFloat(d.baseCost)||0,m=parseInt(d.quantity)||1;return A+f*m},0)),s=ee(()=>e.value.reduce((A,d)=>{const f=parseFloat(d.discountAmount)||0,m=parseInt(d.quantity)||1;return A+f*m},0)),o=ee(()=>{const A=s.value,d=parseFloat(t.value)||0;return A+d}),i=ee(()=>{const A=r.value,d=o.value;return Math.max(0,A-d)}),c=ee(()=>e.value.some(A=>A.serviceDescription&&A.serviceDescription.trim().length>0&&parseFloat(A.baseCost)>0));return{servicesWithTotals:a,subtotal:r,totalLineDiscount:s,totalAllDiscounts:o,finalGrandTotal:i,hasValidService:c,calculateServiceTotal:n}}const The={class:"pa-1"},Ihe={class:"text-body-1 font-weight-medium"},Fhe={class:"text-body-2 text-medium-emphasis"},Phe={class:"pa-1"},Dhe={class:"text-body-1 font-weight-medium"},Uhe={class:"text-body-2 text-medium-emphasis"},Rhe={class:"pa-1"},Nhe={class:"text-body-2 text-medium-emphasis"},Vhe={class:"d-flex flex-column py-1"},Lhe={class:"text-body-2 font-weight-medium"},Mhe={class:"text-caption text-medium-emphasis"},Ohe={key:0},Hhe={class:"text-caption"},$he={key:0,class:"ml-2"},Qhe={class:"font-weight-bold"},Ghe={key:0,class:"text-body-2 mb-1"},zhe={class:"text-body-2 mb-1"},Khe={class:"text-body-2 mb-1"},Whe={key:0,class:"text-body-2 mb-1"},jhe={class:"text-subtitle-1 font-weight-bold"},qhe={__name:"payment-receipt-create",props:{appointment:{type:Object,required:!0}},emits:["close","receiptCreated","view-receipt"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ra(),o=ea(),i=ee(()=>o.state.doctorModule.doctorId),c=ee(()=>o.getters["doctorModule/currentDoctor"]),A=ee(()=>c.value?.doctorName||"Unknown Doctor"),d=M({patientName:n.appointment?.patient_name||"",patientId:n.appointment?.patientId||"",appointmentDate:n.appointment?.appointmentDate||"",receiptDate:Dn(),appointmentId:n.appointment?.id||null,doctorId:i.value,additionalDiscount:0}),f=M([{serviceDescription:"",baseCost:0,discountAmount:0,quantity:1,total:0,isFromHistory:!1}]),m=M(!1),h=M(null),v=M([]),y=M(!1);ee(()=>h.value?v.value.find(K=>K.id===h.value):null);const g=M(!1),w=oT(f,ee(()=>d.value.additionalDiscount)),{servicesWithTotals:b,subtotal:x,totalLineDiscount:T,finalGrandTotal:U,hasValidService:k}=w;M(null);const S=av,E=M([{amount:null,mode:"Cash",paymentDate:Dn(),datePickerMenu:!1}]),C=[K=>!!K||"Amount is required",K=>K>0||"Amount must be greater than 0",K=>Number.isInteger(Number(K))||"Amount must be a whole number"],P=[K=>!!K||"Payment mode is required"],F=[K=>!!K||"Payment date is required"],N=()=>{f.value.push({serviceDescription:"",baseCost:0,discountAmount:0,quantity:1,total:0,isFromHistory:!1})},L=K=>{f.value.length>1?f.value.splice(K,1):f.value[0]={serviceDescription:"",baseCost:0,discountAmount:0,quantity:1,total:0,isFromHistory:!1}},ie=(K,X)=>{f.value[K]&&(f.value[K].serviceDescription=X)},le=(K,X)=>{console.log("Service selected:",X),X&&typeof X=="object"&&!X.isUserTyped?f.value[K]={...f.value[K],serviceDescription:X.serviceDescription,baseCost:X.baseCost||0,isFromHistory:!1}:X===null&&(f.value[K]={...f.value[K],serviceDescription:"",baseCost:0,isFromHistory:!1})},Q=async()=>{if(!d.value.patientId||!d.value.doctorId){console.log("Missing patient or doctor ID for loading treatment plans");return}y.value=!0;try{console.log("Loading treatment plans for patient:",d.value.patientId,"doctor:",d.value.doctorId);const K=await vg(d.value.patientId,d.value.doctorId);if(K.error)throw new Error(K.error.message||"Failed to load treatment plans");v.value=K.data||[],console.log("Loaded treatment plans:",v.value.length)}catch(K){console.error("Error loading treatment plans:",K),s("Failed to load treatment plans: "+(K.message||"Unknown error")),v.value=[]}finally{y.value=!1}},Z=ee(()=>E.value.reduce((K,X)=>K+(parseFloat(X.amount)||0),0));ee(()=>U.value-Z.value);const ce=K=>{if(!K)return"";try{return new Date(K).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return K}},J=ee(()=>{const K=k.value,X=d.value.doctorId&&d.value.appointmentId;return console.log("Validation check:",{hasValidService:K,hasValidAppointment:X,services:f.value,receiptData:d.value}),K&&X}),se=()=>{E.value.push({amount:null,mode:"Cash",paymentDate:Dn(),datePickerMenu:!1})},G=K=>{E.value.length>1?E.value.splice(K,1):E.value[0]={amount:null,mode:"Cash",paymentDate:Dn(),datePickerMenu:!1}},D=K=>{if(!K)return null;try{if(typeof K=="string")return K.includes("T")?K.split("T")[0]:K;if(K instanceof Date){const X=K.getFullYear(),ae=String(K.getMonth()+1).padStart(2,"0"),oe=String(K.getDate()).padStart(2,"0");return`${X}-${ae}-${oe}`}return null}catch(X){return console.error("Error parsing payment date:",X),null}},j=(K,X)=>{if(K)if(K instanceof Date){const ae=K.getFullYear(),oe=String(K.getMonth()+1).padStart(2,"0"),W=String(K.getDate()).padStart(2,"0");X.paymentDate=`${ae}-${oe}-${W}`}else typeof K=="string"&&(X.paymentDate=K);else X.paymentDate="";X.datePickerMenu=!1},ne=()=>{},H=async()=>{if(!J.value){s("Please add at least one valid service with description and cost");return}g.value=!0;try{const{data:K,error:X}=await ghe(d.value.doctorId);if(X){if(X.needsSeries){s("No receipt series found. Please create a receipt series first in Admin Settings  Payment Receipt Series Configuration.");return}throw new Error(X.message||"Failed to get next receipt identifier")}console.log("Next receipt identifier:",K);const ae=f.value.filter(Ae=>Ae.serviceDescription&&Ae.serviceDescription.trim().length>0).map(Ae=>({serviceDescription:Ae.serviceDescription.trim(),baseCost:parseFloat(Ae.baseCost)||0,gstPercent:0,quantity:parseInt(Ae.quantity)||1,discountAmount:parseFloat(Ae.discountAmount)||0})),oe={doctorId:d.value.doctorId,appointmentId:d.value.appointmentId,paymentReceiptDate:d.value.receiptDate,additionalDiscount:parseFloat(d.value.additionalDiscount)||0,isThreeC:!0,treatmentPlanId:m.value?h.value:null,services:ae};console.log("Creating receipt with payload:",oe);const W=await UM(oe);if(W.error){s(W.error.message||"Failed to create receipt");return}console.log("Receipt created successfully:",W.data),r(`Receipt ${W.data.identifier} created successfully!`),E.value.some(Ae=>Ae.amount&&parseFloat(Ae.amount)>0&&Ae.mode&&Ae.paymentDate)&&await te(W.data.id),a("receiptCreated",W.data),a("view-receipt",W.data.id)}catch(K){console.error("Error generating receipt:",K),s("Failed to generate receipt. Please try again.")}finally{g.value=!1}},te=async K=>{if(!K||E.value.length===0){console.log("No payment entries to create or no receipt ID");return}console.log("Creating payment entries for receipt:",K);try{const X=E.value.filter(ae=>ae.amount&&parseFloat(ae.amount)>0&&ae.mode&&ae.paymentDate);console.log("Valid payments to create:",X);for(const ae of X){const oe={amount:Number(ae.amount),mode:ae.mode,paymentDate:ae.paymentDate,paymentReceiptId:K,appointmentId:d.value.appointmentId};console.log("Creating payment with payload:",oe);const W=await nv(oe);W.success?console.log("Payment created successfully:",W.data):(console.error("Error creating payment entry:",W.error),s(`Failed to create payment: ${W.error?.message||"Unknown error"}`))}E.value=[{amount:null,mode:"Cash",paymentDate:Dn()}],console.log("Payment entries cleared")}catch(X){console.error("Error creating payment entries:",X)}},Y=()=>{g.value=!1,f.value=[{serviceDescription:"",baseCost:0,discountAmount:0,quantity:1,total:0,isFromHistory:!1}],d.value={patientName:n.appointment?.patient_name||"",patientId:n.appointment?.patientId||"",appointmentDate:n.appointment?.appointmentDate||"",receiptDate:Dn(),appointmentId:n.appointment?.id||null,doctorId:i.value,additionalDiscount:0},E.value=[{amount:null,mode:"Cash",paymentDate:Dn(),datePickerMenu:!1}],a("close")};return We(m,K=>{K&&v.value.length===0?Q():K||(h.value=null)}),(K,X)=>{const ae=I("v-icon"),oe=I("v-btn"),W=I("v-card-title"),de=I("v-col"),Ae=I("v-row"),Ce=I("v-label"),De=I("v-card-text"),xe=I("v-card"),ke=I("v-switch"),Ee=I("v-list-item"),ye=I("v-select"),we=I("v-text-field"),at=I("v-table"),Je=I("v-divider"),rt=I("v-date-picker"),it=I("v-menu"),Ie=I("v-container");return R(),ve(xe,{rounded:"lg",color:"surfaceContainer",flat:"",ripple:!1},{default:u(()=>[l(Ae,{"no-gutters":""},{default:u(()=>[l(de,{cols:"12"},{default:u(()=>[l(W,{class:"d-flex align-center justify-space-between"},{default:u(()=>[X[4]||(X[4]=p("span",null,"Payment Receipt - Generate Receipt",-1)),l(oe,{onClick:Y,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(ae,{size:"18"},{default:u(()=>[...X[3]||(X[3]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),X[23]||(X[23]=O()),l(Ae,{"no-gutters":""},{default:u(()=>[l(de,{cols:"12",class:"scroll-element"},{default:u(()=>[l(Ie,{fluid:"",class:"pa-3"},{default:u(()=>[l(xe,{flat:"",color:"surfaceContainerHigh",class:"mb-4 card-enhanced"},{default:u(()=>[l(De,{class:"pb-1 pt-2"},{default:u(()=>[l(Ae,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(de,{cols:"4"},{default:u(()=>[p("div",The,[l(Ce,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...X[5]||(X[5]=[O("Patient Information",-1)])]),_:1}),p("div",Ihe,q(d.value.patientName),1),p("div",Fhe,"ID: "+q(d.value.patientId),1)])]),_:1}),l(de,{cols:"4"},{default:u(()=>[p("div",Phe,[l(Ce,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...X[6]||(X[6]=[O("Appointment Details",-1)])]),_:1}),p("div",Dhe,"Dr. "+q(A.value),1),p("div",Uhe,"Date: "+q(ce(d.value.appointmentDate)),1)])]),_:1}),l(de,{cols:"4"},{default:u(()=>[p("div",Rhe,[l(Ce,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...X[7]||(X[7]=[O("Receipt Information",-1)])]),_:1}),X[8]||(X[8]=p("div",{class:"text-body-1 font-weight-medium"},"New Receipt",-1)),p("div",Nhe,"Date: "+q(ce(d.value.receiptDate)),1)])]),_:1})]),_:1})]),_:1})]),_:1}),l(xe,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(De,{class:"pb-2"},{default:u(()=>[l(Ae,{"no-gutters":"",align:"center",class:"mb-3"},{default:u(()=>[l(de,{cols:"2",class:"d-flex align-center"},{default:u(()=>[...X[9]||(X[9]=[p("div",{class:"text-subtitle-1"},"Treatment Plan",-1)])]),_:1}),l(de,{cols:"3",class:"d-flex align-center"},{default:u(()=>[l(ke,{modelValue:m.value,"onUpdate:modelValue":X[0]||(X[0]=Ve=>m.value=Ve),label:"Link to treatment plan",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),m.value?(R(),ve(de,{key:0,cols:"7"},{default:u(()=>[l(ye,{modelValue:h.value,"onUpdate:modelValue":X[1]||(X[1]=Ve=>h.value=Ve),items:v.value,"item-title":"treatmentPlanName","item-value":"id",label:"Select Treatment Plan",variant:"outlined",density:"compact",loading:y.value,disabled:y.value,clearable:"","hide-details":""},{selection:u(({item:Ve})=>[p("div",Vhe,[p("div",Lhe,q(Ve.raw.treatmentPlanName),1),p("div",Mhe,[O(" Status: "+q(Ve.raw.status)+"  Created: "+q(ce(Ve.raw.createdAt))+" ",1),Ve.raw.notes?(R(),me("span",Ohe,"  "+q(Ve.raw.notes.substring(0,30))+"...",1)):_e("",!0)])])]),item:u(({props:Ve,item:ft})=>[l(Ee,Ql(Kl(Ve)),{title:u(()=>[O(q(ft.raw.treatmentPlanName),1)]),subtitle:u(()=>[p("div",Hhe,[O(" Status: "+q(ft.raw.status)+"  Created: "+q(ce(ft.raw.createdAt))+" ",1),ft.raw.notes?(R(),me("span",$he," "+q(ft.raw.notes.substring(0,50))+"...",1)):_e("",!0)])]),_:2},1040)]),_:1},8,["modelValue","items","loading","disabled"])]),_:1})):_e("",!0)]),_:1})]),_:1})]),_:1}),l(xe,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(De,{class:"pb-2"},{default:u(()=>[X[16]||(X[16]=p("div",{class:"text-subtitle-1 mb-3"},"Item Details",-1)),l(at,{density:"compact",class:"mb-3"},{default:u(()=>[X[11]||(X[11]=p("thead",null,[p("tr",null,[p("th",{class:"text-left",style:{width:"60px"}},"Sr. No"),p("th",{class:"text-left",style:{width:"300px"}},"Description"),p("th",{class:"text-left",style:{width:"120px"}},"Base Cost per unit ()"),p("th",{class:"text-left",style:{width:"120px"}},"Discount per unit ()"),p("th",{class:"text-left",style:{width:"100px"}},"Quantity"),p("th",{class:"text-left",style:{width:"120px"}},"Total ()"),p("th",{class:"text-left",style:{width:"80px"}},"Actions")])],-1)),p("tbody",null,[(R(!0),me(ze,null,Wt(Oe(b),(Ve,ft)=>(R(),me("tr",{key:ft},[p("td",null,q(ft+1),1),p("td",null,[l(ww,{"model-value":Ve.serviceDescription,"onUpdate:modelValue":Ft=>ie(ft,Ft),onServiceSelected:Ft=>le(ft,Ft),"doctor-id":i.value,density:"compact"},null,8,["model-value","onUpdate:modelValue","onServiceSelected","doctor-id"])]),p("td",null,[l(we,{modelValue:f.value[ft].baseCost,"onUpdate:modelValue":Ft=>f.value[ft].baseCost=Ft,modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"underlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),p("td",null,[l(we,{modelValue:f.value[ft].discountAmount,"onUpdate:modelValue":Ft=>f.value[ft].discountAmount=Ft,modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"underlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),p("td",null,[l(we,{modelValue:f.value[ft].quantity,"onUpdate:modelValue":Ft=>f.value[ft].quantity=Ft,modelModifiers:{number:!0},type:"number",density:"compact",variant:"underlined","hide-details":"",min:"1"},null,8,["modelValue","onUpdate:modelValue"])]),p("td",null,[p("span",Qhe,""+q(Ve.total||0),1)]),p("td",null,[l(oe,{icon:"",size:"small",color:"error",variant:"text",onClick:Ft=>L(ft)},{default:u(()=>[l(ae,null,{default:u(()=>[...X[10]||(X[10]=[O("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])]))),128))])]),_:1}),l(Ae,{"no-gutters":"",class:"align-center"},{default:u(()=>[l(de,{cols:"auto"},{default:u(()=>[l(oe,{variant:"outlined",color:"primary",onClick:N,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...X[12]||(X[12]=[O(" Add Service ",-1)])]),_:1})]),_:1}),l(de),l(de,{cols:"3"},{default:u(()=>[l(we,{label:"Additional Discount",modelValue:d.value.additionalDiscount,"onUpdate:modelValue":X[2]||(X[2]=Ve=>d.value.additionalDiscount=Ve),modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),l(Je,{class:"mb-3"}),l(Ae,{"no-gutters":""},{default:u(()=>[l(de,{cols:"8",class:"text-right"},{default:u(()=>[X[13]||(X[13]=p("div",{class:"text-body-2 mb-1"},"Subtotal:",-1)),X[14]||(X[14]=p("div",{class:"text-body-2 mb-1"},"Line Discounts:",-1)),d.value.additionalDiscount>0?(R(),me("div",Ghe,"Additional Discount:")):_e("",!0),X[15]||(X[15]=p("div",{class:"text-subtitle-1 font-weight-bold"},"Grand Total:",-1))]),_:1}),l(de,{cols:"4",class:"text-right"},{default:u(()=>[p("div",zhe,q(Oe(ar)(Oe(x))),1),p("div",Khe,"-"+q(Oe(ar)(Oe(T))),1),d.value.additionalDiscount>0?(R(),me("div",Whe,"-"+q(Oe(ar)(d.value.additionalDiscount)),1)):_e("",!0),p("div",jhe,q(Oe(ar)(Oe(U))),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(xe,{flat:"",class:"mb-3 card-enhanced",color:"surfaceContainerHigh"},{default:u(()=>[l(De,{class:"pb-2"},{default:u(()=>[X[21]||(X[21]=p("div",{class:"text-subtitle-1 mb-3"},"Payment Information",-1)),l(at,{density:"compact",class:"mb-3"},{default:u(()=>[X[19]||(X[19]=p("thead",null,[p("tr",null,[p("th",{class:"text-left",style:{width:"60px"}},"Sr. No"),p("th",{class:"text-left",style:{width:"150px"}},"Amount ()"),p("th",{class:"text-left",style:{width:"150px"}},"Payment Mode"),p("th",{class:"text-left",style:{width:"150px"}},"Payment Date"),p("th",{class:"text-left",style:{width:"80px"}},"Actions")])],-1)),p("tbody",null,[(R(!0),me(ze,null,Wt(E.value,(Ve,ft)=>(R(),me("tr",{key:ft},[p("td",null,q(ft+1),1),p("td",null,[l(we,{modelValue:Ve.amount,"onUpdate:modelValue":Ft=>Ve.amount=Ft,modelModifiers:{number:!0},type:"number",prefix:"",min:"1",density:"compact",variant:"underlined","hide-details":"",rules:C,onInput:ne},null,8,["modelValue","onUpdate:modelValue"])]),p("td",null,[l(ye,{modelValue:Ve.mode,"onUpdate:modelValue":Ft=>Ve.mode=Ft,items:Oe(S),density:"compact",variant:"underlined","hide-details":"",rules:P},null,8,["modelValue","onUpdate:modelValue","items"])]),p("td",null,[l(it,{modelValue:Ve.datePickerMenu,"onUpdate:modelValue":Ft=>Ve.datePickerMenu=Ft,"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},{activator:u(({props:Ft})=>[l(we,Fe({modelValue:Ve.paymentDate,"onUpdate:modelValue":tt=>Ve.paymentDate=tt,density:"compact",variant:"underlined","hide-details":"",rules:F,readonly:""},{ref_for:!0},Ft),{"append-inner":u(()=>[l(ae,{class:"text-medium-emphasis"},{default:u(()=>[...X[17]||(X[17]=[O("mdi-calendar",-1)])]),_:1})]),_:1},16,["modelValue","onUpdate:modelValue"])]),default:u(()=>[l(rt,{"model-value":D(Ve.paymentDate),"onUpdate:modelValue":Ft=>j(Ft,Ve),color:"primary",locale:"en-IN"},null,8,["model-value","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),p("td",null,[l(oe,{icon:"",size:"small",color:"error",variant:"text",onClick:Ft=>G(ft)},{default:u(()=>[l(ae,null,{default:u(()=>[...X[18]||(X[18]=[O("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])]))),128))])]),_:1}),l(Ae,{"no-gutters":"",class:"align-center"},{default:u(()=>[l(de,{cols:"auto"},{default:u(()=>[l(oe,{variant:"outlined",color:"secondary",onClick:se,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...X[20]||(X[20]=[O(" Add Payment ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(xe,{flat:"",color:"surfaceContainerHigh",class:"card-enhanced"},{default:u(()=>[l(De,{class:"d-flex justify-center pb-2"},{default:u(()=>[l(oe,{color:"primary",onClick:H,loading:g.value,disabled:!J.value,"prepend-icon":"mdi-receipt",class:"btn-hover-base"},{default:u(()=>[...X[22]||(X[22]=[O(" Generate Receipt ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),_e("",!0)]),_:1})]),_:1})]),_:1})]),_:1})}}},Yhe=Xt(qhe,[["__scopeId","data-v-57a37952"]]);function Xhe(e){const t=M([]),n=M(!1),a=M([]),r=M(!1),s=(f=1e4)=>new Promise((m,h)=>setTimeout(()=>h(new Error("API_TIMEOUT")),f)),o=async()=>{if(!e.value){console.log("No receipt ID available for loading payments"),t.value=[];return}if(n.value){console.log("Already loading payments, skipping duplicate call");return}n.value=!0,console.log("Loading payments for receipt ID:",e.value);try{const f=await Promise.race([hg(e.value),s(1e4)]);console.log("Full API response:",f),f.success?(t.value=Array.isArray(f.data)?f.data:[],console.log(" Payments loaded successfully:",t.value.length)):(console.error(" API Error loading payments:",f.error),t.value=[])}catch(f){f.message==="API_TIMEOUT"?console.error(" Payment loading timed out"):console.error(" Exception loading receipt payments:",f),t.value=[]}finally{n.value=!1}},i=async f=>{if(!e.value)throw new Error("No receipt ID available for payment creation");r.value=!0;try{const m={...f,amount:Number(f.amount),paymentReceiptId:e.value};console.log("Creating payment with payload:",m);const h=await Promise.race([nv(m),s(15e3)]);if(!h.success)throw new Error(h.error?.message||"Failed to create payment");return console.log("Payment created successfully:",h.data),await o(),h}catch(m){throw m.message==="API_TIMEOUT"?new Error("Payment creation timed out. Please try again."):m}finally{r.value=!1}},c=async f=>{if(f){if(a.value.includes(f)){console.log("Payment already being deleted:",f);return}a.value.push(f);try{const m=await Promise.race([aT(f),s(1e4)]);if(!m.success)throw new Error(m.error?.message||"Failed to delete payment");return console.log("Payment deleted successfully:",f),await o(),m}catch(m){throw m.message==="API_TIMEOUT"?new Error("Payment deletion timed out. Please try again."):m}finally{a.value=a.value.filter(m=>m!==f)}}},A=ee(()=>Array.isArray(t.value)?t.value.reduce((f,m)=>f+(parseFloat(m.amount)||0),0):0);let d=null;return We(e,async(f,m)=>{if(console.log("Receipt ID watcher triggered:",{newReceiptId:f||"null",oldReceiptId:m||"null",lastReceiptId:d||"null"}),f===d){console.log("Receipt ID unchanged, skipping reload");return}d=f,f?(console.log("Receipt ID changed, loading payments for:",f),await o()):(console.log("No receipt ID, clearing payments"),t.value=[])},{immediate:!0}),{receiptPayments:t,isLoadingPayments:n,deletingPayments:a,isSubmittingPayment:r,totalPaymentsMade:A,loadReceiptPayments:o,createNewPayment:i,deletePayment:c,formatPaymentAmount:ar}}const Jhe={class:"text-center"},Zhe={class:"text-center"},eve={class:"text-body-2 text-medium-emphasis mb-4"},tve={class:"pa-1"},nve={class:"text-body-1 font-weight-medium"},ave={class:"text-body-2 text-medium-emphasis"},rve={class:"pa-1"},sve={class:"text-body-1 font-weight-medium"},ove={class:"text-body-2 text-medium-emphasis"},ive={class:"pa-1"},lve={class:"text-body-1 font-weight-medium"},uve={class:"text-body-2 text-medium-emphasis"},cve={class:"text-caption text-medium-emphasis mt-1"},dve={class:"d-flex flex-column py-1"},Ave={class:"text-body-2 font-weight-medium"},fve={class:"text-caption text-medium-emphasis"},mve={key:0},hve={class:"text-caption"},vve={key:0,class:"ml-2"},pve={key:2,class:"text-body-2 text-medium-emphasis"},gve={key:0,class:"text-body-2 font-weight-medium"},yve={key:0,class:"text-body-2 font-weight-medium"},_ve={key:0,class:"text-body-2 font-weight-medium"},wve={key:0,class:"text-body-2 font-weight-medium"},bve={class:"font-weight-bold"},xve={key:0,class:"text-body-2 mb-1"},Cve={class:"text-body-2 mb-1"},Sve={class:"text-body-2 mb-1"},Eve={key:0,class:"text-body-2 mb-1"},Bve={class:"text-subtitle-1 font-weight-bold"},kve={class:"text-h6"},Tve={class:"text-h6 text-success"},Ive={key:0,class:"text-center pa-4"},Fve={class:"font-weight-bold"},Pve={__name:"payment-receipt-edit",props:{receiptId:{type:[String,Number],required:!0}},emits:["close","receipt-updated"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ra(),o=ea(),i=ee(()=>o.state.doctorModule.doctorId),c=ee(()=>o.getters["doctorModule/currentDoctor"]),A=ee(()=>c.value?.doctorName||"Unknown Doctor"),d=M(!1),f=M(!1),m=M(null),h=M(null),v=M([]),y=M(!1),g=M(null),w=M([]),b=M(!1),x=M(null);ee(()=>g.value?w.value.find(ye=>ye.id===g.value):null);const T=oT(v,ee(()=>h.value?.additionalDiscount||0)),{servicesWithTotals:U,subtotal:k,totalLineDiscount:S,finalGrandTotal:E,hasValidService:C}=T,P=M(null),F=Xhe(P),{receiptPayments:N,isLoadingPayments:L,deletingPayments:ie,totalPaymentsMade:le,loadReceiptPayments:Q,deletePayment:Z}=F;M([]),M([]);const ce=av,J=M([]),se=[ye=>!!ye||"Amount is required",ye=>ye>0||"Amount must be greater than 0",ye=>Number.isInteger(Number(ye))||"Amount must be a whole number"],G=[ye=>!!ye||"Payment mode is required"],D=[ye=>!!ye||"Payment date is required"],j=()=>{v.value.push({serviceDescription:"",baseCost:0,discountAmount:0,quantity:1,isFromHistory:!1,isPrepopulated:!1})},ne=ye=>{v.value.length>1?v.value.splice(ye,1):v.value[0]={serviceDescription:"",baseCost:0,discountAmount:0,quantity:1,isFromHistory:!1,isPrepopulated:!1}},H=(ye,we)=>{v.value[ye]&&(v.value[ye].serviceDescription=we)},te=(ye,we)=>{console.log("Service selected:",we),we&&typeof we=="object"&&!we.isUserTyped?v.value[ye]={...v.value[ye],serviceDescription:we.serviceDescription,baseCost:we.baseCost||0,isFromHistory:!1,isPrepopulated:v.value[ye].isPrepopulated===!0}:we===null&&(v.value[ye]={...v.value[ye],serviceDescription:"",baseCost:0,isFromHistory:!1,isPrepopulated:v.value[ye].isPrepopulated===!0})},Y=async()=>{if(!h.value?.patientId||!h.value?.doctorId){console.log("Missing patient or doctor ID for loading treatment plans");return}b.value=!0;try{console.log("Loading treatment plans for patient:",h.value.patientId,"doctor:",h.value.doctorId);const ye=await vg(h.value.patientId,h.value.doctorId);if(ye.error)throw new Error(ye.error.message||"Failed to load treatment plans");w.value=ye.data||[],console.log("Loaded treatment plans:",w.value.length)}catch(ye){console.error("Error loading treatment plans:",ye),s("Failed to load treatment plans: "+(ye.message||"Unknown error")),w.value=[]}finally{b.value=!1}},K=ee(()=>Array.isArray(J.value)?J.value.reduce((ye,we)=>ye+(parseFloat(we.amount)||0),0):0),X=ee(()=>{const ye=le.value,we=K.value;return Math.max(0,E.value-ye-we)}),ae=ee(()=>{const ye=C.value,we=h.value?.patientName;return ye&&we});ee(()=>J.value.length>0&&J.value.every(ye=>ye.amount&&parseFloat(ye.amount)>0&&ye.mode&&ye.paymentDate));const oe=()=>{J.value.push({amount:null,mode:"Cash",paymentDate:new Date().toISOString().split("T")[0],datePickerMenu:!1})},W=ye=>{J.value.splice(ye,1)},de=ye=>{if(!ye)return null;try{if(typeof ye=="string")return ye.includes("T")?ye.split("T")[0]:ye;if(ye instanceof Date){const we=ye.getFullYear(),at=String(ye.getMonth()+1).padStart(2,"0"),Je=String(ye.getDate()).padStart(2,"0");return`${we}-${at}-${Je}`}return null}catch(we){return console.error("Error parsing payment date:",we),null}},Ae=(ye,we)=>{if(ye)if(ye instanceof Date){const at=ye.getFullYear(),Je=String(ye.getMonth()+1).padStart(2,"0"),rt=String(ye.getDate()).padStart(2,"0");we.paymentDate=`${at}-${Je}-${rt}`}else typeof ye=="string"&&(we.paymentDate=ye);else we.paymentDate="";we.datePickerMenu=!1},Ce=async()=>{if(!n.receiptId){m.value="No receipt ID provided";return}d.value=!0,m.value=null;try{console.log("Loading receipt data for editing, ID:",n.receiptId);const ye=await RM(n.receiptId);if(ye.error)throw new Error(ye.error.message||"Failed to load receipt");const we=ye.data;if(h.value={identifier:we.identifier,patientName:we.patientName,patientId:we.patientId,appointmentDate:we.appointmentDate,paymentReceiptDate:we.paymentReceiptDate||we.receiptDate,appointmentId:we.appointmentId,doctorId:we.doctorId,additionalDiscount:we.additionalDiscount||0},we.services&&we.services.length>0?v.value=we.services.map(at=>({serviceDescription:at.serviceDescription,baseCost:at.baseCost,discountAmount:at.discountAmount,quantity:at.quantity,isFromHistory:!1,isPrepopulated:!0})):v.value=[{serviceDescription:"",baseCost:0,discountAmount:0,quantity:1,isFromHistory:!1,isPrepopulated:!1}],console.log("Receipt data loaded for editing:",h.value),console.log("Services loaded:",v.value),we.treatmentPlanId){y.value=!0,g.value=we.treatmentPlanId,await Y();try{const at=await df(we.treatmentPlanId);x.value=at}catch(at){console.error("Error loading original treatment plan data:",at)}}await Q()}catch(ye){console.error("Error loading receipt data:",ye),m.value=ye.message||"Failed to load receipt data",s(m.value)}finally{d.value=!1}},De=async()=>{if(!ae.value){s("Please add at least one valid service with description and cost");return}f.value=!0;try{const ye=v.value.filter(Je=>Je.serviceDescription&&Je.serviceDescription.trim().length>0).map(Je=>({serviceDescription:Je.serviceDescription,baseCost:parseFloat(Je.baseCost)||0,gstPercent:0,discountAmount:parseFloat(Je.discountAmount)||0,quantity:parseInt(Je.quantity)||1})),we={patientName:h.value.patientName,paymentReceiptDate:h.value.paymentReceiptDate,appointmentDate:h.value.appointmentDate,additionalDiscount:parseFloat(h.value.additionalDiscount)||0,treatmentPlanId:y.value?g.value:null,services:ye};console.log("Updating receipt with payload:",we);const at=await yhe(n.receiptId,we);if(at.error)throw new Error(at.error.message||"Failed to update receipt");console.log("Receipt updated successfully:",at.data),await xe(),r(`Receipt ${at.data.identifier} updated successfully!`),a("receipt-updated",at.data)}catch(ye){console.error("Error updating receipt:",ye),s("Failed to update receipt. Please try again.")}finally{f.value=!1}},xe=async()=>{if(J.value.length===0){console.log("No new payment entries to create");return}console.log("Creating new payment entries:",J.value);try{const ye=J.value.filter(we=>we.amount&&parseFloat(we.amount)>0&&we.mode&&we.paymentDate);console.log("Valid payments to create:",ye);for(const we of ye){const at={amount:parseFloat(we.amount),mode:we.mode,paymentDate:we.paymentDate,paymentReceiptId:n.receiptId};console.log("Creating payment with payload:",at);const Je=await nv(at);Je.success?console.log("Payment created successfully:",Je.data):(console.error("Error creating payment entry:",Je.error),s(`Failed to create payment: ${Je.error?.message||"Unknown error"}`))}J.value=[],console.log("New payment entries cleared"),await Q()}catch(ye){console.error("Error creating payment entries:",ye),s("Failed to create some payments. Please try again.")}},ke=ye=>{if(!ye)return"";try{return new Date(ye).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return ye}},Ee=()=>{a("close")};return We(()=>n.receiptId,ye=>{P.value=ye},{immediate:!0}),We(y,ye=>{ye&&w.value.length===0?Y():ye||(g.value=null)}),cn(()=>{Ce()}),(ye,we)=>{const at=I("v-icon"),Je=I("v-btn"),rt=I("v-card-title"),it=I("v-col"),Ie=I("v-row"),Ve=I("v-progress-circular"),ft=I("v-label"),Ft=I("v-card-text"),tt=I("v-card"),Ge=I("v-switch"),pt=I("v-chip"),ht=I("v-list-item"),Nt=I("v-select"),nn=I("v-text-field"),yn=I("v-table"),qn=I("v-divider"),$t=I("v-date-picker"),Tt=I("v-menu"),ut=I("v-container");return R(),ve(tt,{rounded:"lg",color:"surfaceContainer",flat:"",ripple:!1},{default:u(()=>[l(Ie,{"no-gutters":""},{default:u(()=>[l(it,{cols:"12"},{default:u(()=>[l(rt,{class:"d-flex align-center justify-space-between"},{default:u(()=>[we[4]||(we[4]=p("span",null,"Edit Payment Receipt",-1)),l(Je,{onClick:Ee,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(at,{size:"18"},{default:u(()=>[...we[3]||(we[3]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(Ie,{"no-gutters":""},{default:u(()=>[l(it,{cols:"12",class:"scroll-element"},{default:u(()=>[d.value?(R(),ve(Ie,{key:0,"no-gutters":""},{default:u(()=>[l(it,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[p("div",Jhe,[l(Ve,{indeterminate:"",color:"primary",size:"64"}),we[5]||(we[5]=p("div",{class:"mt-4 text-subtitle-1"},"Loading receipt...",-1))])]),_:1})]),_:1})):m.value?(R(),ve(Ie,{key:1,"no-gutters":""},{default:u(()=>[l(it,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[p("div",Zhe,[l(at,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...we[6]||(we[6]=[O("mdi-alert-circle",-1)])]),_:1}),we[8]||(we[8]=p("div",{class:"text-h6 mb-2"},"Failed to Load Receipt",-1)),p("div",eve,q(m.value),1),l(Je,{color:"primary",onClick:Ce,"prepend-icon":"mdi-refresh"},{default:u(()=>[...we[7]||(we[7]=[O(" Try Again ",-1)])]),_:1})])]),_:1})]),_:1})):h.value?(R(),ve(ut,{key:2,fluid:"",class:"pa-3"},{default:u(()=>[l(tt,{flat:"",color:"surfaceContainerHigh",class:"mb-4 card-enhanced"},{default:u(()=>[l(Ft,{class:"pb-1 pt-2"},{default:u(()=>[l(Ie,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(it,{cols:"4"},{default:u(()=>[p("div",tve,[l(ft,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...we[9]||(we[9]=[O("Patient Information",-1)])]),_:1}),p("div",nve,q(h.value.patientName||"Unknown Patient"),1),p("div",ave,"ID: "+q(h.value.patientId||"N/A"),1)])]),_:1}),l(it,{cols:"4"},{default:u(()=>[p("div",rve,[l(ft,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...we[10]||(we[10]=[O("Appointment Details",-1)])]),_:1}),p("div",sve,"Dr. "+q(A.value),1),p("div",ove,"Date: "+q(ke(h.value.appointmentDate)),1)])]),_:1}),l(it,{cols:"4"},{default:u(()=>[p("div",ive,[l(ft,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...we[11]||(we[11]=[O("Receipt Information",-1)])]),_:1}),p("div",lve,q(h.value.identifier),1),p("div",uve,"Date: "+q(ke(h.value.paymentReceiptDate)),1)])]),_:1})]),_:1})]),_:1})]),_:1}),l(tt,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(Ft,{class:"pb-2"},{default:u(()=>[l(Ie,{"no-gutters":"",align:"center",class:"mb-3"},{default:u(()=>[l(it,{cols:"2",class:"d-flex align-center"},{default:u(()=>[...we[12]||(we[12]=[p("div",{class:"text-subtitle-1"},"Treatment Plan",-1)])]),_:1}),l(it,{cols:"3",class:"d-flex align-center"},{default:u(()=>[l(Ge,{modelValue:y.value,"onUpdate:modelValue":we[0]||(we[0]=kt=>y.value=kt),label:"Link to treatment plan",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),l(it,{cols:"7"},{default:u(()=>[!y.value&&x.value?(R(),me(ze,{key:0},[l(pt,{color:"secondary",variant:"outlined","prepend-icon":"mdi-link-variant",class:"mr-2"},{default:u(()=>[O(q(x.value.treatmentPlanName),1)]),_:1}),p("div",cve," Status: "+q(x.value.status)+"  Created: "+q(ke(x.value.createdAt)),1)],64)):y.value?(R(),ve(Nt,{key:1,modelValue:g.value,"onUpdate:modelValue":we[1]||(we[1]=kt=>g.value=kt),items:w.value,"item-title":"treatmentPlanName","item-value":"id",label:"Select Treatment Plan",variant:"outlined",density:"compact",loading:b.value,disabled:b.value,clearable:"","hide-details":""},{selection:u(({item:kt})=>[p("div",dve,[p("div",Ave,q(kt.raw.treatmentPlanName),1),p("div",fve,[O(" Status: "+q(kt.raw.status)+"  Created: "+q(ke(kt.raw.createdAt))+" ",1),kt.raw.notes?(R(),me("span",mve,"  "+q(kt.raw.notes.substring(0,30))+"...",1)):_e("",!0)])])]),item:u(({props:kt,item:Zt})=>[l(ht,Ql(Kl(kt)),{title:u(()=>[O(q(Zt.raw.treatmentPlanName),1)]),subtitle:u(()=>[p("div",hve,[O(" Status: "+q(Zt.raw.status)+"  Created: "+q(ke(Zt.raw.createdAt))+" ",1),Zt.raw.notes?(R(),me("span",vve," "+q(Zt.raw.notes.substring(0,50))+"...",1)):_e("",!0)])]),_:2},1040)]),_:1},8,["modelValue","items","loading","disabled"])):(R(),me("div",pve," No treatment plan linked "))]),_:1})]),_:1})]),_:1})]),_:1}),l(tt,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(Ft,{class:"pb-2"},{default:u(()=>[we[19]||(we[19]=p("div",{class:"text-subtitle-1 mb-3"},"Item Details",-1)),l(yn,{density:"compact",class:"mb-3"},{default:u(()=>[we[14]||(we[14]=p("thead",null,[p("tr",null,[p("th",{class:"text-left",style:{width:"60px"}},"Sr. No"),p("th",{class:"text-left",style:{width:"300px"}},"Description"),p("th",{class:"text-left",style:{width:"120px"}},"Base Cost per unit ()"),p("th",{class:"text-left",style:{width:"120px"}},"Discount per unit ()"),p("th",{class:"text-left",style:{width:"100px"}},"Quantity"),p("th",{class:"text-left",style:{width:"120px"}},"Total ()"),p("th",{class:"text-left",style:{width:"80px"}},"Actions")])],-1)),p("tbody",null,[(R(!0),me(ze,null,Wt(Oe(U),(kt,Zt)=>(R(),me("tr",{key:Zt,class:ct(kt.isPrepopulated?"prepopulated-service":"")},[p("td",null,q(Zt+1),1),p("td",null,[kt.isPrepopulated?(R(),me("span",gve,q(kt.serviceDescription),1)):(R(),ve(ww,{key:1,"model-value":kt.serviceDescription,"onUpdate:modelValue":je=>H(Zt,je),onServiceSelected:je=>te(Zt,je),"doctor-id":i.value,density:"compact"},null,8,["model-value","onUpdate:modelValue","onServiceSelected","doctor-id"]))]),p("td",null,[kt.isPrepopulated?(R(),me("span",yve,""+q(kt.baseCost?.toLocaleString()||0),1)):(R(),ve(nn,{key:1,modelValue:v.value[Zt].baseCost,"onUpdate:modelValue":je=>v.value[Zt].baseCost=je,modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"underlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"]))]),p("td",null,[kt.isPrepopulated?(R(),me("span",_ve,""+q(kt.discountAmount?.toLocaleString()||0),1)):(R(),ve(nn,{key:1,modelValue:v.value[Zt].discountAmount,"onUpdate:modelValue":je=>v.value[Zt].discountAmount=je,modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"underlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"]))]),p("td",null,[kt.isPrepopulated?(R(),me("span",wve,q(kt.quantity||1),1)):(R(),ve(nn,{key:1,modelValue:v.value[Zt].quantity,"onUpdate:modelValue":je=>v.value[Zt].quantity=je,modelModifiers:{number:!0},type:"number",density:"compact",variant:"underlined","hide-details":"",min:"1"},null,8,["modelValue","onUpdate:modelValue"]))]),p("td",null,[p("span",bve,""+q(kt.total||0),1)]),p("td",null,[l(Je,{icon:"",size:"small",color:"error",variant:"text",onClick:je=>ne(Zt),title:kt.isPrepopulated?"Delete existing service":"Delete new service"},{default:u(()=>[l(at,null,{default:u(()=>[...we[13]||(we[13]=[O("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick","title"])])],2))),128))])]),_:1}),l(Ie,{"no-gutters":"",class:"align-center"},{default:u(()=>[l(it,{cols:"auto"},{default:u(()=>[l(Je,{variant:"outlined",color:"primary",onClick:j,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...we[15]||(we[15]=[O(" Add Service ",-1)])]),_:1})]),_:1}),l(it),l(it,{cols:"3"},{default:u(()=>[l(nn,{label:"Additional Discount",modelValue:h.value.additionalDiscount,"onUpdate:modelValue":we[2]||(we[2]=kt=>h.value.additionalDiscount=kt),modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),l(qn,{class:"mb-3"}),l(Ie,{"no-gutters":""},{default:u(()=>[l(it,{cols:"8",class:"text-right"},{default:u(()=>[we[16]||(we[16]=p("div",{class:"text-body-2 mb-1"},"Subtotal:",-1)),we[17]||(we[17]=p("div",{class:"text-body-2 mb-1"},"Line Discounts:",-1)),h.value.additionalDiscount>0?(R(),me("div",xve,"Additional Discount:")):_e("",!0),we[18]||(we[18]=p("div",{class:"text-subtitle-1 font-weight-bold"},"Grand Total:",-1))]),_:1}),l(it,{cols:"4",class:"text-right"},{default:u(()=>[p("div",Cve,q(Oe(ar)(Oe(k))),1),p("div",Sve,"-"+q(Oe(ar)(Oe(S))),1),h.value.additionalDiscount>0?(R(),me("div",Eve,"-"+q(Oe(ar)(h.value.additionalDiscount)),1)):_e("",!0),p("div",Bve,q(Oe(ar)(Oe(E))),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(tt,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(Ft,{class:"pb-2"},{default:u(()=>[we[30]||(we[30]=p("div",{class:"text-subtitle-1 mb-3"},"Payment Information",-1)),l(Ie,{"no-gutters":"",class:"mb-3"},{default:u(()=>[l(it,{cols:"4"},{default:u(()=>[we[20]||(we[20]=p("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Total Amount",-1)),p("div",kve,q(Oe(ar)(Oe(E))),1)]),_:1}),l(it,{cols:"4"},{default:u(()=>[we[21]||(we[21]=p("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Paid Amount",-1)),p("div",Tve,q(Oe(ar)(Oe(le)+K.value)),1)]),_:1}),l(it,{cols:"4"},{default:u(()=>[we[22]||(we[22]=p("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Balance Due",-1)),p("div",{class:ct(["text-h6",X.value>0?"text-error":"text-success"])},q(Oe(ar)(X.value)),3)]),_:1})]),_:1}),Oe(L)?(R(),me("div",Ive,[l(Ve,{indeterminate:"",size:"32",color:"primary"}),we[23]||(we[23]=p("div",{class:"text-body-2 mt-2"},"Loading payments...",-1))])):(R(),me(ze,{key:1},[l(qn,{class:"mb-3"}),we[29]||(we[29]=p("div",{class:"text-subtitle-2 mb-2"},"Payments",-1)),l(yn,{density:"compact",class:"mb-3"},{default:u(()=>[we[27]||(we[27]=p("thead",null,[p("tr",null,[p("th",{class:"text-left",style:{width:"60px"}},"Sr. No"),p("th",{class:"text-left",style:{width:"150px"}},"Amount ()"),p("th",{class:"text-left",style:{width:"150px"}},"Payment Mode"),p("th",{class:"text-left",style:{width:"150px"}},"Payment Date"),p("th",{class:"text-left",style:{width:"80px"}},"Actions")])],-1)),p("tbody",null,[(R(!0),me(ze,null,Wt(Oe(N),(kt,Zt)=>(R(),me("tr",{key:`existing-${kt.id}`},[p("td",null,q(Zt+1),1),p("td",Fve,""+q(kt.amount.toLocaleString()),1),p("td",null,q(kt.mode),1),p("td",null,q(ke(kt.paymentDate)),1),p("td",null,[l(Je,{icon:"",size:"small",color:"error",variant:"text",onClick:je=>Oe(Z)(kt.id),loading:Oe(ie).includes(kt.id)},{default:u(()=>[l(at,null,{default:u(()=>[...we[24]||(we[24]=[O("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick","loading"])])]))),128)),(R(!0),me(ze,null,Wt(J.value,(kt,Zt)=>(R(),me("tr",{key:`new-${Zt}`},[p("td",null,q(Oe(N).length+Zt+1),1),p("td",null,[l(nn,{modelValue:kt.amount,"onUpdate:modelValue":je=>kt.amount=je,modelModifiers:{number:!0},type:"number",prefix:"",min:"1",density:"compact",variant:"underlined","hide-details":"",rules:se},null,8,["modelValue","onUpdate:modelValue"])]),p("td",null,[l(Nt,{modelValue:kt.mode,"onUpdate:modelValue":je=>kt.mode=je,items:Oe(ce),density:"compact",variant:"underlined","hide-details":"",rules:G},null,8,["modelValue","onUpdate:modelValue","items"])]),p("td",null,[l(Tt,{modelValue:kt.datePickerMenu,"onUpdate:modelValue":je=>kt.datePickerMenu=je,"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},{activator:u(({props:je})=>[l(nn,Fe({modelValue:kt.paymentDate,"onUpdate:modelValue":Ke=>kt.paymentDate=Ke,density:"compact",variant:"underlined","hide-details":"",rules:D,readonly:""},{ref_for:!0},je),{"append-inner":u(()=>[l(at,{class:"text-medium-emphasis"},{default:u(()=>[...we[25]||(we[25]=[O("mdi-calendar",-1)])]),_:1})]),_:1},16,["modelValue","onUpdate:modelValue"])]),default:u(()=>[l($t,{"model-value":de(kt.paymentDate),"onUpdate:modelValue":je=>Ae(je,kt),color:"primary",locale:"en-IN"},null,8,["model-value","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),p("td",null,[l(Je,{icon:"",size:"small",color:"error",variant:"text",onClick:je=>W(Zt)},{default:u(()=>[l(at,null,{default:u(()=>[...we[26]||(we[26]=[O("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])]))),128))])]),_:1}),l(Ie,{"no-gutters":"",class:"align-center"},{default:u(()=>[l(it,{cols:"auto"},{default:u(()=>[l(Je,{variant:"outlined",color:"secondary",onClick:oe,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...we[28]||(we[28]=[O(" Add Payment ",-1)])]),_:1})]),_:1})]),_:1})],64))]),_:1})]),_:1}),l(tt,{flat:"",color:"surfaceContainerHigh",class:"card-enhanced"},{default:u(()=>[l(Ft,{class:"d-flex justify-center pb-2"},{default:u(()=>[l(Je,{color:"primary",onClick:De,loading:f.value,disabled:!ae.value,"prepend-icon":"mdi-content-save",class:"btn-hover-base"},{default:u(()=>[...we[31]||(we[31]=[O(" Update Receipt ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})):_e("",!0)]),_:1})]),_:1})]),_:1})}}},qM=Xt(Pve,[["__scopeId","data-v-c427f5d3"]]),z_="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M12.04%202C6.58%202%202.13%206.45%202.13%2011.91C2.13%2013.66%202.59%2015.36%203.45%2016.86L2.05%2022L7.3%2020.62C8.75%2021.41%2010.38%2021.83%2012.04%2021.83C17.5%2021.83%2021.95%2017.38%2021.95%2011.92C21.95%209.27%2020.92%206.78%2019.05%204.91C17.18%203.03%2014.69%202%2012.04%202M12.05%203.67C14.25%203.67%2016.31%204.53%2017.87%206.09C19.42%207.65%2020.28%209.72%2020.28%2011.92C20.28%2016.46%2016.58%2020.15%2012.04%2020.15C10.56%2020.15%209.11%2019.76%207.85%2019L7.55%2018.83L4.43%2019.65L5.26%2016.61L5.06%2016.29C4.24%2015%203.8%2013.47%203.8%2011.91C3.81%207.37%207.5%203.67%2012.05%203.67M8.53%207.33C8.37%207.33%208.1%207.39%207.87%207.64C7.65%207.89%207%208.5%207%209.71C7%2010.93%207.89%2012.1%208%2012.27C8.14%2012.44%209.76%2014.94%2012.25%2016C12.84%2016.27%2013.3%2016.42%2013.66%2016.53C14.25%2016.72%2014.79%2016.69%2015.22%2016.63C15.7%2016.56%2016.68%2016.03%2016.89%2015.45C17.1%2014.87%2017.1%2014.38%2017.04%2014.27C16.97%2014.17%2016.81%2014.11%2016.56%2014C16.31%2013.86%2015.09%2013.26%2014.87%2013.18C14.64%2013.1%2014.5%2013.06%2014.31%2013.3C14.15%2013.55%2013.67%2014.11%2013.53%2014.27C13.38%2014.44%2013.24%2014.46%2013%2014.34C12.74%2014.21%2011.94%2013.95%2011%2013.11C10.26%2012.45%209.77%2011.64%209.62%2011.39C9.5%2011.15%209.61%2011%209.73%2010.89C9.84%2010.78%2010%2010.6%2010.1%2010.45C10.23%2010.31%2010.27%2010.2%2010.35%2010.04C10.43%209.87%2010.39%209.73%2010.33%209.61C10.27%209.5%209.77%208.26%209.56%207.77C9.36%207.29%209.16%207.35%209%207.34C8.86%207.34%208.7%207.33%208.53%207.33Z'%20/%3e%3c/svg%3e",Dve="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M20%204H4c-1.1%200-1.99.9-1.99%202L2%2018c0%201.1.9%202%202%202h16c1.1%200%202-.9%202-2V6c0-1.1-.9-2-2-2zm0%204l-8%205-8-5V6l8%205%208-5v2z'%20fill='currentColor'/%3e%3c/svg%3e";var oE=function(e,t){return oE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(n[r]=a[r])},oE(e,t)};function Xl(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");oE(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var iE=function(){return iE=Object.assign||function(t){for(var n,a=1,r=arguments.length;a<r;a++){n=arguments[a];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},iE.apply(this,arguments)};function Io(e,t,n,a){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function i(d){try{A(a.next(d))}catch(f){o(f)}}function c(d){try{A(a.throw(d))}catch(f){o(f)}}function A(d){d.done?s(d.value):r(d.value).then(i,c)}A((a=a.apply(e,[])).next())})}function to(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},a,r,s,o;return o={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function i(A){return function(d){return c([A,d])}}function c(A){if(a)throw new TypeError("Generator is already executing.");for(;n;)try{if(a=1,r&&(s=A[0]&2?r.return:A[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,A[1])).done)return s;switch(r=0,s&&(A=[A[0]&2,s.value]),A[0]){case 0:case 1:s=A;break;case 4:return n.label++,{value:A[1],done:!1};case 5:n.label++,r=A[1],A=[0];continue;case 7:A=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(A[0]===6||A[0]===2)){n=0;continue}if(A[0]===3&&(!s||A[1]>s[0]&&A[1]<s[3])){n.label=A[1];break}if(A[0]===6&&n.label<s[1]){n.label=s[1],s=A;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(A);break}s[2]&&n.ops.pop(),n.trys.pop();continue}A=t.call(e,n)}catch(d){A=[6,d],r=0}finally{a=s=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}}function q1(e,t,n){if(arguments.length===2)for(var a=0,r=t.length,s;a<r;a++)(s||!(a in t))&&(s||(s=Array.prototype.slice.call(t,0,a)),s[a]=t[a]);return e.concat(s||t)}var Bc=(function(){function e(t,n,a,r){this.left=t,this.top=n,this.width=a,this.height=r}return e.prototype.add=function(t,n,a,r){return new e(this.left+t,this.top+n,this.width+a,this.height+r)},e.fromClientRect=function(t,n){return new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height)},e.fromDOMRectList=function(t,n){var a=Array.from(n).find(function(r){return r.width!==0});return a?new e(a.left+t.windowBounds.left,a.top+t.windowBounds.top,a.width,a.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e})(),xw=function(e,t){return Bc.fromClientRect(e,t.getBoundingClientRect())},Uve=function(e){var t=e.body,n=e.documentElement;if(!t||!n)throw new Error("Unable to get document size");var a=Math.max(Math.max(t.scrollWidth,n.scrollWidth),Math.max(t.offsetWidth,n.offsetWidth),Math.max(t.clientWidth,n.clientWidth)),r=Math.max(Math.max(t.scrollHeight,n.scrollHeight),Math.max(t.offsetHeight,n.offsetHeight),Math.max(t.clientHeight,n.clientHeight));return new Bc(0,0,a,r)},Cw=function(e){for(var t=[],n=0,a=e.length;n<a;){var r=e.charCodeAt(n++);if(r>=55296&&r<=56319&&n<a){var s=e.charCodeAt(n++);(s&64512)===56320?t.push(((r&1023)<<10)+(s&1023)+65536):(t.push(r),n--)}else t.push(r)}return t},$r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var a=[],r=-1,s="";++r<n;){var o=e[r];o<=65535?a.push(o):(o-=65536,a.push((o>>10)+55296,o%1024+56320)),(r+1===n||a.length>16384)&&(s+=String.fromCharCode.apply(String,a),a.length=0)}return s},tU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Rve=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Y1=0;Y1<tU.length;Y1++)Rve[tU.charCodeAt(Y1)]=Y1;var nU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",hp=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var X1=0;X1<nU.length;X1++)hp[nU.charCodeAt(X1)]=X1;var Nve=function(e){var t=e.length*.75,n=e.length,a,r=0,s,o,i,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var A=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(A)?A:new Uint8Array(A);for(a=0;a<n;a+=4)s=hp[e.charCodeAt(a)],o=hp[e.charCodeAt(a+1)],i=hp[e.charCodeAt(a+2)],c=hp[e.charCodeAt(a+3)],d[r++]=s<<2|o>>4,d[r++]=(o&15)<<4|i>>2,d[r++]=(i&3)<<6|c&63;return A},Vve=function(e){for(var t=e.length,n=[],a=0;a<t;a+=2)n.push(e[a+1]<<8|e[a]);return n},Lve=function(e){for(var t=e.length,n=[],a=0;a<t;a+=4)n.push(e[a+3]<<24|e[a+2]<<16|e[a+1]<<8|e[a]);return n},YA=5,iT=11,oC=2,Mve=iT-YA,YM=65536>>YA,Ove=1<<YA,iC=Ove-1,Hve=1024>>YA,$ve=YM+Hve,Qve=$ve,Gve=32,zve=Qve+Gve,Kve=65536>>iT,Wve=1<<Mve,jve=Wve-1,aU=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},qve=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},Yve=function(e,t){var n=Nve(e),a=Array.isArray(n)?Lve(n):new Uint32Array(n),r=Array.isArray(n)?Vve(n):new Uint16Array(n),s=24,o=aU(r,s/2,a[4]/2),i=a[5]===2?aU(r,(s+a[4])/2):qve(a,Math.ceil((s+a[4])/4));return new Xve(a[0],a[1],a[2],a[3],o,i)},Xve=(function(){function e(t,n,a,r,s,o){this.initialValue=t,this.errorValue=n,this.highStart=a,this.highValueIndex=r,this.index=s,this.data=o}return e.prototype.get=function(t){var n;if(t>=0){if(t<55296||t>56319&&t<=65535)return n=this.index[t>>YA],n=(n<<oC)+(t&iC),this.data[n];if(t<=65535)return n=this.index[YM+(t-55296>>YA)],n=(n<<oC)+(t&iC),this.data[n];if(t<this.highStart)return n=zve-Kve+(t>>iT),n=this.index[n],n+=t>>YA&jve,n=this.index[n],n=(n<<oC)+(t&iC),this.data[n];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e})(),rU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Jve=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var J1=0;J1<rU.length;J1++)Jve[rU.charCodeAt(J1)]=J1;var Zve="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",sU=50,epe=1,XM=2,JM=3,tpe=4,npe=5,oU=7,ZM=8,iU=9,fd=10,lE=11,lU=12,uE=13,ape=14,vp=15,cE=16,Z1=17,Zv=18,rpe=19,uU=20,dE=21,ep=22,lC=23,xm=24,mi=25,pp=26,gp=27,Cm=28,spe=29,FA=30,ope=31,ey=32,ty=33,AE=34,fE=35,mE=36,E0=37,hE=38,Yy=39,Xy=40,uC=41,eO=42,ipe=43,lpe=[9001,65288],tO="!",ia="",ny="",vE=Yve(Zve),tc=[FA,mE],pE=[epe,XM,JM,npe],nO=[fd,ZM],cU=[gp,pp],upe=pE.concat(nO),dU=[hE,Yy,Xy,AE,fE],cpe=[vp,uE],dpe=function(e,t){t===void 0&&(t="strict");var n=[],a=[],r=[];return e.forEach(function(s,o){var i=vE.get(s);if(i>sU?(r.push(!0),i-=sU):r.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return a.push(o),n.push(cE);if(i===tpe||i===lE){if(o===0)return a.push(o),n.push(FA);var c=n[o-1];return upe.indexOf(c)===-1?(a.push(a[o-1]),n.push(c)):(a.push(o),n.push(FA))}if(a.push(o),i===ope)return n.push(t==="strict"?dE:E0);if(i===eO||i===spe)return n.push(FA);if(i===ipe)return s>=131072&&s<=196605||s>=196608&&s<=262141?n.push(E0):n.push(FA);n.push(i)}),[a,n,r]},cC=function(e,t,n,a){var r=a[n];if(Array.isArray(e)?e.indexOf(r)!==-1:e===r)for(var s=n;s<=a.length;){s++;var o=a[s];if(o===t)return!0;if(o!==fd)break}if(r===fd)for(var s=n;s>0;){s--;var i=a[s];if(Array.isArray(e)?e.indexOf(i)!==-1:e===i)for(var c=n;c<=a.length;){c++;var o=a[c];if(o===t)return!0;if(o!==fd)break}if(i!==fd)break}return!1},AU=function(e,t){for(var n=e;n>=0;){var a=t[n];if(a===fd)n--;else return a}return 0},Ape=function(e,t,n,a,r){if(n[a]===0)return ia;var s=a-1;if(Array.isArray(r)&&r[s]===!0)return ia;var o=s-1,i=s+1,c=t[s],A=o>=0?t[o]:0,d=t[i];if(c===XM&&d===JM)return ia;if(pE.indexOf(c)!==-1)return tO;if(pE.indexOf(d)!==-1||nO.indexOf(d)!==-1)return ia;if(AU(s,t)===ZM)return ny;if(vE.get(e[s])===lE||(c===ey||c===ty)&&vE.get(e[i])===lE||c===oU||d===oU||c===iU||[fd,uE,vp].indexOf(c)===-1&&d===iU||[Z1,Zv,rpe,xm,Cm].indexOf(d)!==-1||AU(s,t)===ep||cC(lC,ep,s,t)||cC([Z1,Zv],dE,s,t)||cC(lU,lU,s,t))return ia;if(c===fd)return ny;if(c===lC||d===lC)return ia;if(d===cE||c===cE)return ny;if([uE,vp,dE].indexOf(d)!==-1||c===ape||A===mE&&cpe.indexOf(c)!==-1||c===Cm&&d===mE||d===uU||tc.indexOf(d)!==-1&&c===mi||tc.indexOf(c)!==-1&&d===mi||c===gp&&[E0,ey,ty].indexOf(d)!==-1||[E0,ey,ty].indexOf(c)!==-1&&d===pp||tc.indexOf(c)!==-1&&cU.indexOf(d)!==-1||cU.indexOf(c)!==-1&&tc.indexOf(d)!==-1||[gp,pp].indexOf(c)!==-1&&(d===mi||[ep,vp].indexOf(d)!==-1&&t[i+1]===mi)||[ep,vp].indexOf(c)!==-1&&d===mi||c===mi&&[mi,Cm,xm].indexOf(d)!==-1)return ia;if([mi,Cm,xm,Z1,Zv].indexOf(d)!==-1)for(var f=s;f>=0;){var m=t[f];if(m===mi)return ia;if([Cm,xm].indexOf(m)!==-1)f--;else break}if([gp,pp].indexOf(d)!==-1)for(var f=[Z1,Zv].indexOf(c)!==-1?o:s;f>=0;){var m=t[f];if(m===mi)return ia;if([Cm,xm].indexOf(m)!==-1)f--;else break}if(hE===c&&[hE,Yy,AE,fE].indexOf(d)!==-1||[Yy,AE].indexOf(c)!==-1&&[Yy,Xy].indexOf(d)!==-1||[Xy,fE].indexOf(c)!==-1&&d===Xy||dU.indexOf(c)!==-1&&[uU,pp].indexOf(d)!==-1||dU.indexOf(d)!==-1&&c===gp||tc.indexOf(c)!==-1&&tc.indexOf(d)!==-1||c===xm&&tc.indexOf(d)!==-1||tc.concat(mi).indexOf(c)!==-1&&d===ep&&lpe.indexOf(e[i])===-1||tc.concat(mi).indexOf(d)!==-1&&c===Zv)return ia;if(c===uC&&d===uC){for(var h=n[s],v=1;h>0&&(h--,t[h]===uC);)v++;if(v%2!==0)return ia}return c===ey&&d===ty?ia:ny},fpe=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var n=dpe(e,t.lineBreak),a=n[0],r=n[1],s=n[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(r=r.map(function(i){return[mi,FA,eO].indexOf(i)!==-1?E0:i}));var o=t.wordBreak==="keep-all"?s.map(function(i,c){return i&&e[c]>=19968&&e[c]<=40959}):void 0;return[a,r,o]},mpe=(function(){function e(t,n,a,r){this.codePoints=t,this.required=n===tO,this.start=a,this.end=r}return e.prototype.slice=function(){return $r.apply(void 0,this.codePoints.slice(this.start,this.end))},e})(),hpe=function(e,t){var n=Cw(e),a=fpe(n,t),r=a[0],s=a[1],o=a[2],i=n.length,c=0,A=0;return{next:function(){if(A>=i)return{done:!0,value:null};for(var d=ia;A<i&&(d=Ape(n,s,r,++A,o))===ia;);if(d!==ia||A===i){var f=new mpe(n,d,c,A);return c=A,{value:f,done:!1}}return{done:!0,value:null}}}},vpe=1,ppe=2,pg=4,fU=8,K_=10,mU=47,Mp=92,gpe=9,ype=32,ay=34,tp=61,_pe=35,wpe=36,bpe=37,ry=39,sy=40,np=41,xpe=95,Xo=45,Cpe=33,Spe=60,Epe=62,Bpe=64,kpe=91,Tpe=93,Ipe=61,Fpe=123,oy=63,Ppe=125,hU=124,Dpe=126,Upe=128,vU=65533,dC=42,VA=43,Rpe=44,Npe=58,Vpe=59,B0=46,Lpe=0,Mpe=8,Ope=11,Hpe=14,$pe=31,Qpe=127,iu=-1,aO=48,rO=97,sO=101,Gpe=102,zpe=117,Kpe=122,oO=65,iO=69,lO=70,Wpe=85,jpe=90,ao=function(e){return e>=aO&&e<=57},qpe=function(e){return e>=55296&&e<=57343},Sm=function(e){return ao(e)||e>=oO&&e<=lO||e>=rO&&e<=Gpe},Ype=function(e){return e>=rO&&e<=Kpe},Xpe=function(e){return e>=oO&&e<=jpe},Jpe=function(e){return Ype(e)||Xpe(e)},Zpe=function(e){return e>=Upe},iy=function(e){return e===K_||e===gpe||e===ype},W_=function(e){return Jpe(e)||Zpe(e)||e===xpe},pU=function(e){return W_(e)||ao(e)||e===Xo},e0e=function(e){return e>=Lpe&&e<=Mpe||e===Ope||e>=Hpe&&e<=$pe||e===Qpe},sd=function(e,t){return e!==Mp?!1:t!==K_},ly=function(e,t,n){return e===Xo?W_(t)||sd(t,n):W_(e)?!0:!!(e===Mp&&sd(e,t))},AC=function(e,t,n){return e===VA||e===Xo?ao(t)?!0:t===B0&&ao(n):ao(e===B0?t:e)},t0e=function(e){var t=0,n=1;(e[t]===VA||e[t]===Xo)&&(e[t]===Xo&&(n=-1),t++);for(var a=[];ao(e[t]);)a.push(e[t++]);var r=a.length?parseInt($r.apply(void 0,a),10):0;e[t]===B0&&t++;for(var s=[];ao(e[t]);)s.push(e[t++]);var o=s.length,i=o?parseInt($r.apply(void 0,s),10):0;(e[t]===iO||e[t]===sO)&&t++;var c=1;(e[t]===VA||e[t]===Xo)&&(e[t]===Xo&&(c=-1),t++);for(var A=[];ao(e[t]);)A.push(e[t++]);var d=A.length?parseInt($r.apply(void 0,A),10):0;return n*(r+i*Math.pow(10,-o))*Math.pow(10,c*d)},n0e={type:2},a0e={type:3},r0e={type:4},s0e={type:13},o0e={type:8},i0e={type:21},l0e={type:9},u0e={type:10},c0e={type:11},d0e={type:12},A0e={type:14},uy={type:23},f0e={type:1},m0e={type:25},h0e={type:24},v0e={type:26},p0e={type:27},g0e={type:28},y0e={type:29},_0e={type:31},gE={type:32},uO=(function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(Cw(t))},e.prototype.read=function(){for(var t=[],n=this.consumeToken();n!==gE;)t.push(n),n=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case ay:return this.consumeStringToken(ay);case _pe:var n=this.peekCodePoint(0),a=this.peekCodePoint(1),r=this.peekCodePoint(2);if(pU(n)||sd(a,r)){var s=ly(n,a,r)?ppe:vpe,o=this.consumeName();return{type:5,value:o,flags:s}}break;case wpe:if(this.peekCodePoint(0)===tp)return this.consumeCodePoint(),s0e;break;case ry:return this.consumeStringToken(ry);case sy:return n0e;case np:return a0e;case dC:if(this.peekCodePoint(0)===tp)return this.consumeCodePoint(),A0e;break;case VA:if(AC(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case Rpe:return r0e;case Xo:var i=t,c=this.peekCodePoint(0),A=this.peekCodePoint(1);if(AC(i,c,A))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(ly(i,c,A))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(c===Xo&&A===Epe)return this.consumeCodePoint(),this.consumeCodePoint(),h0e;break;case B0:if(AC(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case mU:if(this.peekCodePoint(0)===dC)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===dC&&(d=this.consumeCodePoint(),d===mU))return this.consumeToken();if(d===iu)return this.consumeToken()}break;case Npe:return v0e;case Vpe:return p0e;case Spe:if(this.peekCodePoint(0)===Cpe&&this.peekCodePoint(1)===Xo&&this.peekCodePoint(2)===Xo)return this.consumeCodePoint(),this.consumeCodePoint(),m0e;break;case Bpe:var f=this.peekCodePoint(0),m=this.peekCodePoint(1),h=this.peekCodePoint(2);if(ly(f,m,h)){var o=this.consumeName();return{type:7,value:o}}break;case kpe:return g0e;case Mp:if(sd(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case Tpe:return y0e;case Ipe:if(this.peekCodePoint(0)===tp)return this.consumeCodePoint(),o0e;break;case Fpe:return c0e;case Ppe:return d0e;case zpe:case Wpe:var v=this.peekCodePoint(0),y=this.peekCodePoint(1);return v===VA&&(Sm(y)||y===oy)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case hU:if(this.peekCodePoint(0)===tp)return this.consumeCodePoint(),l0e;if(this.peekCodePoint(0)===hU)return this.consumeCodePoint(),i0e;break;case Dpe:if(this.peekCodePoint(0)===tp)return this.consumeCodePoint(),u0e;break;case iu:return gE}return iy(t)?(this.consumeWhiteSpace(),_0e):ao(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):W_(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:$r(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],n=this.consumeCodePoint();Sm(n)&&t.length<6;)t.push(n),n=this.consumeCodePoint();for(var a=!1;n===oy&&t.length<6;)t.push(n),n=this.consumeCodePoint(),a=!0;if(a){var r=parseInt($r.apply(void 0,t.map(function(c){return c===oy?aO:c})),16),s=parseInt($r.apply(void 0,t.map(function(c){return c===oy?lO:c})),16);return{type:30,start:r,end:s}}var o=parseInt($r.apply(void 0,t),16);if(this.peekCodePoint(0)===Xo&&Sm(this.peekCodePoint(1))){this.consumeCodePoint(),n=this.consumeCodePoint();for(var i=[];Sm(n)&&i.length<6;)i.push(n),n=this.consumeCodePoint();var s=parseInt($r.apply(void 0,i),16);return{type:30,start:o,end:s}}else return{type:30,start:o,end:o}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===sy?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===sy?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===iu)return{type:22,value:""};var n=this.peekCodePoint(0);if(n===ry||n===ay){var a=this.consumeStringToken(this.consumeCodePoint());return a.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===iu||this.peekCodePoint(0)===np)?(this.consumeCodePoint(),{type:22,value:a.value}):(this.consumeBadUrlRemnants(),uy)}for(;;){var r=this.consumeCodePoint();if(r===iu||r===np)return{type:22,value:$r.apply(void 0,t)};if(iy(r))return this.consumeWhiteSpace(),this.peekCodePoint(0)===iu||this.peekCodePoint(0)===np?(this.consumeCodePoint(),{type:22,value:$r.apply(void 0,t)}):(this.consumeBadUrlRemnants(),uy);if(r===ay||r===ry||r===sy||e0e(r))return this.consumeBadUrlRemnants(),uy;if(r===Mp)if(sd(r,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),uy;else t.push(r)}},e.prototype.consumeWhiteSpace=function(){for(;iy(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===np||t===iu)return;sd(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var n=5e4,a="";t>0;){var r=Math.min(n,t);a+=$r.apply(void 0,this._value.splice(0,r)),t-=r}return this._value.shift(),a},e.prototype.consumeStringToken=function(t){var n="",a=0;do{var r=this._value[a];if(r===iu||r===void 0||r===t)return n+=this.consumeStringSlice(a),{type:0,value:n};if(r===K_)return this._value.splice(0,a),f0e;if(r===Mp){var s=this._value[a+1];s!==iu&&s!==void 0&&(s===K_?(n+=this.consumeStringSlice(a),a=-1,this._value.shift()):sd(r,s)&&(n+=this.consumeStringSlice(a),n+=$r(this.consumeEscapedCodePoint()),a=-1))}a++}while(!0)},e.prototype.consumeNumber=function(){var t=[],n=pg,a=this.peekCodePoint(0);for((a===VA||a===Xo)&&t.push(this.consumeCodePoint());ao(this.peekCodePoint(0));)t.push(this.consumeCodePoint());a=this.peekCodePoint(0);var r=this.peekCodePoint(1);if(a===B0&&ao(r))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),n=fU;ao(this.peekCodePoint(0));)t.push(this.consumeCodePoint());a=this.peekCodePoint(0),r=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((a===iO||a===sO)&&((r===VA||r===Xo)&&ao(s)||ao(r)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),n=fU;ao(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[t0e(t),n]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),n=t[0],a=t[1],r=this.peekCodePoint(0),s=this.peekCodePoint(1),o=this.peekCodePoint(2);if(ly(r,s,o)){var i=this.consumeName();return{type:15,number:n,flags:a,unit:i}}return r===bpe?(this.consumeCodePoint(),{type:16,number:n,flags:a}):{type:17,number:n,flags:a}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(Sm(t)){for(var n=$r(t);Sm(this.peekCodePoint(0))&&n.length<6;)n+=$r(this.consumeCodePoint());iy(this.peekCodePoint(0))&&this.consumeCodePoint();var a=parseInt(n,16);return a===0||qpe(a)||a>1114111?vU:a}return t===iu?vU:t},e.prototype.consumeName=function(){for(var t="";;){var n=this.consumeCodePoint();if(pU(n))t+=$r(n);else if(sd(n,this.peekCodePoint(0)))t+=$r(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(n),t}},e})(),cO=(function(){function e(t){this._tokens=t}return e.create=function(t){var n=new uO;return n.write(t),new e(n.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var n=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return n;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var n=this.consumeComponentValue();if(n.type===32)return t;t.push(n),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var n={type:t,values:[]},a=this.consumeToken();;){if(a.type===32||b0e(a,t))return n;this.reconsumeToken(a),n.values.push(this.consumeComponentValue()),a=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var n={name:t.value,values:[],type:18};;){var a=this.consumeToken();if(a.type===32||a.type===3)return n;this.reconsumeToken(a),n.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?gE:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e})(),gg=function(e){return e.type===15},rv=function(e){return e.type===17},Wa=function(e){return e.type===20},w0e=function(e){return e.type===0},yE=function(e,t){return Wa(e)&&e.value===t},dO=function(e){return e.type!==31},Fh=function(e){return e.type!==31&&e.type!==4},Nu=function(e){var t=[],n=[];return e.forEach(function(a){if(a.type===4){if(n.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(n),n=[];return}a.type!==31&&n.push(a)}),n.length&&t.push(n),t},b0e=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},Ld=function(e){return e.type===17||e.type===15},Zr=function(e){return e.type===16||Ld(e)},AO=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},Qs={type:17,number:0,flags:pg},lT={type:16,number:50,flags:pg},md={type:16,number:100,flags:pg},yp=function(e,t,n){var a=e[0],r=e[1];return[rr(a,t),rr(typeof r<"u"?r:a,n)]},rr=function(e,t){if(e.type===16)return e.number/100*t;if(gg(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},fO="deg",mO="grad",hO="rad",vO="turn",Sw={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case fO:return Math.PI*t.number/180;case mO:return Math.PI/200*t.number;case hO:return t.number;case vO:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},pO=function(e){return e.type===15&&(e.unit===fO||e.unit===mO||e.unit===hO||e.unit===vO)},gO=function(e){var t=e.filter(Wa).map(function(n){return n.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Qs,Qs];case"to top":case"bottom":return zi(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Qs,md];case"to right":case"left":return zi(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[md,md];case"to bottom":case"top":return zi(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[md,Qs];case"to left":case"right":return zi(270)}return 0},zi=function(e){return Math.PI*e/180},bd={name:"color",parse:function(e,t){if(t.type===18){var n=x0e[t.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return n(e,t.values)}if(t.type===5){if(t.value.length===3){var a=t.value.substring(0,1),r=t.value.substring(1,2),s=t.value.substring(2,3);return hd(parseInt(a+a,16),parseInt(r+r,16),parseInt(s+s,16),1)}if(t.value.length===4){var a=t.value.substring(0,1),r=t.value.substring(1,2),s=t.value.substring(2,3),o=t.value.substring(3,4);return hd(parseInt(a+a,16),parseInt(r+r,16),parseInt(s+s,16),parseInt(o+o,16)/255)}if(t.value.length===6){var a=t.value.substring(0,2),r=t.value.substring(2,4),s=t.value.substring(4,6);return hd(parseInt(a,16),parseInt(r,16),parseInt(s,16),1)}if(t.value.length===8){var a=t.value.substring(0,2),r=t.value.substring(2,4),s=t.value.substring(4,6),o=t.value.substring(6,8);return hd(parseInt(a,16),parseInt(r,16),parseInt(s,16),parseInt(o,16)/255)}}if(t.type===20){var i=hc[t.value.toUpperCase()];if(typeof i<"u")return i}return hc.TRANSPARENT}},xd=function(e){return(255&e)===0},Cs=function(e){var t=255&e,n=255&e>>8,a=255&e>>16,r=255&e>>24;return t<255?"rgba("+r+","+a+","+n+","+t/255+")":"rgb("+r+","+a+","+n+")"},hd=function(e,t,n,a){return(e<<24|t<<16|n<<8|Math.round(a*255)<<0)>>>0},gU=function(e,t){if(e.type===17)return e.number;if(e.type===16){var n=t===3?1:255;return t===3?e.number/100*n:Math.round(e.number/100*n)}return 0},yU=function(e,t){var n=t.filter(Fh);if(n.length===3){var a=n.map(gU),r=a[0],s=a[1],o=a[2];return hd(r,s,o,1)}if(n.length===4){var i=n.map(gU),r=i[0],s=i[1],o=i[2],c=i[3];return hd(r,s,o,c)}return 0};function fC(e,t,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(t-e)*n*6+e:n<1/2?t:n<2/3?(t-e)*6*(2/3-n)+e:e}var _U=function(e,t){var n=t.filter(Fh),a=n[0],r=n[1],s=n[2],o=n[3],i=(a.type===17?zi(a.number):Sw.parse(e,a))/(Math.PI*2),c=Zr(r)?r.number/100:0,A=Zr(s)?s.number/100:0,d=typeof o<"u"&&Zr(o)?rr(o,1):1;if(c===0)return hd(A*255,A*255,A*255,1);var f=A<=.5?A*(c+1):A+c-A*c,m=A*2-f,h=fC(m,f,i+1/3),v=fC(m,f,i),y=fC(m,f,i-1/3);return hd(h*255,v*255,y*255,d)},x0e={hsl:_U,hsla:_U,rgb:yU,rgba:yU},Op=function(e,t){return bd.parse(e,cO.create(t).parseComponentValue())},hc={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},C0e={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(n){if(Wa(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},S0e={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ew=function(e,t){var n=bd.parse(e,t[0]),a=t[1];return a&&Zr(a)?{color:n,stop:a}:{color:n,stop:null}},wU=function(e,t){var n=e[0],a=e[e.length-1];n.stop===null&&(n.stop=Qs),a.stop===null&&(a.stop=md);for(var r=[],s=0,o=0;o<e.length;o++){var i=e[o].stop;if(i!==null){var c=rr(i,t);c>s?r.push(c):r.push(s),s=c}else r.push(null)}for(var A=null,o=0;o<r.length;o++){var d=r[o];if(d===null)A===null&&(A=o);else if(A!==null){for(var f=o-A,m=r[A-1],h=(d-m)/(f+1),v=1;v<=f;v++)r[A+v-1]=h*v;A=null}}return e.map(function(y,g){var w=y.color;return{color:w,stop:Math.max(Math.min(1,r[g]/t),0)}})},E0e=function(e,t,n){var a=t/2,r=n/2,s=rr(e[0],t)-a,o=r-rr(e[1],n);return(Math.atan2(o,s)+Math.PI*2)%(Math.PI*2)},B0e=function(e,t,n){var a=typeof e=="number"?e:E0e(e,t,n),r=Math.abs(t*Math.sin(a))+Math.abs(n*Math.cos(a)),s=t/2,o=n/2,i=r/2,c=Math.sin(a-Math.PI/2)*i,A=Math.cos(a-Math.PI/2)*i;return[r,s-A,s+A,o-c,o+c]},fl=function(e,t){return Math.sqrt(e*e+t*t)},bU=function(e,t,n,a,r){var s=[[0,0],[0,t],[e,0],[e,t]];return s.reduce(function(o,i){var c=i[0],A=i[1],d=fl(n-c,a-A);return(r?d<o.optimumDistance:d>o.optimumDistance)?{optimumCorner:i,optimumDistance:d}:o},{optimumDistance:r?1/0:-1/0,optimumCorner:null}).optimumCorner},k0e=function(e,t,n,a,r){var s=0,o=0;switch(e.size){case 0:e.shape===0?s=o=Math.min(Math.abs(t),Math.abs(t-a),Math.abs(n),Math.abs(n-r)):e.shape===1&&(s=Math.min(Math.abs(t),Math.abs(t-a)),o=Math.min(Math.abs(n),Math.abs(n-r)));break;case 2:if(e.shape===0)s=o=Math.min(fl(t,n),fl(t,n-r),fl(t-a,n),fl(t-a,n-r));else if(e.shape===1){var i=Math.min(Math.abs(n),Math.abs(n-r))/Math.min(Math.abs(t),Math.abs(t-a)),c=bU(a,r,t,n,!0),A=c[0],d=c[1];s=fl(A-t,(d-n)/i),o=i*s}break;case 1:e.shape===0?s=o=Math.max(Math.abs(t),Math.abs(t-a),Math.abs(n),Math.abs(n-r)):e.shape===1&&(s=Math.max(Math.abs(t),Math.abs(t-a)),o=Math.max(Math.abs(n),Math.abs(n-r)));break;case 3:if(e.shape===0)s=o=Math.max(fl(t,n),fl(t,n-r),fl(t-a,n),fl(t-a,n-r));else if(e.shape===1){var i=Math.max(Math.abs(n),Math.abs(n-r))/Math.max(Math.abs(t),Math.abs(t-a)),f=bU(a,r,t,n,!1),A=f[0],d=f[1];s=fl(A-t,(d-n)/i),o=i*s}break}return Array.isArray(e.size)&&(s=rr(e.size[0],a),o=e.size.length===2?rr(e.size[1],r):s),[s,o]},T0e=function(e,t){var n=zi(180),a=[];return Nu(t).forEach(function(r,s){if(s===0){var o=r[0];if(o.type===20&&o.value==="to"){n=gO(r);return}else if(pO(o)){n=Sw.parse(e,o);return}}var i=Ew(e,r);a.push(i)}),{angle:n,stops:a,type:1}},cy=function(e,t){var n=zi(180),a=[];return Nu(t).forEach(function(r,s){if(s===0){var o=r[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){n=gO(r);return}else if(pO(o)){n=(Sw.parse(e,o)+zi(270))%zi(360);return}}var i=Ew(e,r);a.push(i)}),{angle:n,stops:a,type:1}},I0e=function(e,t){var n=zi(180),a=[],r=1,s=0,o=3,i=[];return Nu(t).forEach(function(c,A){var d=c[0];if(A===0){if(Wa(d)&&d.value==="linear"){r=1;return}else if(Wa(d)&&d.value==="radial"){r=2;return}}if(d.type===18){if(d.name==="from"){var f=bd.parse(e,d.values[0]);a.push({stop:Qs,color:f})}else if(d.name==="to"){var f=bd.parse(e,d.values[0]);a.push({stop:md,color:f})}else if(d.name==="color-stop"){var m=d.values.filter(Fh);if(m.length===2){var f=bd.parse(e,m[1]),h=m[0];rv(h)&&a.push({stop:{type:16,number:h.number*100,flags:h.flags},color:f})}}}}),r===1?{angle:(n+zi(180))%zi(360),stops:a,type:r}:{size:o,shape:s,stops:a,position:i,type:r}},yO="closest-side",_O="farthest-side",wO="closest-corner",bO="farthest-corner",xO="circle",CO="ellipse",SO="cover",EO="contain",F0e=function(e,t){var n=0,a=3,r=[],s=[];return Nu(t).forEach(function(o,i){var c=!0;if(i===0){var A=!1;c=o.reduce(function(f,m){if(A)if(Wa(m))switch(m.value){case"center":return s.push(lT),f;case"top":case"left":return s.push(Qs),f;case"right":case"bottom":return s.push(md),f}else(Zr(m)||Ld(m))&&s.push(m);else if(Wa(m))switch(m.value){case xO:return n=0,!1;case CO:return n=1,!1;case"at":return A=!0,!1;case yO:return a=0,!1;case SO:case _O:return a=1,!1;case EO:case wO:return a=2,!1;case bO:return a=3,!1}else if(Ld(m)||Zr(m))return Array.isArray(a)||(a=[]),a.push(m),!1;return f},c)}if(c){var d=Ew(e,o);r.push(d)}}),{size:a,shape:n,stops:r,position:s,type:2}},dy=function(e,t){var n=0,a=3,r=[],s=[];return Nu(t).forEach(function(o,i){var c=!0;if(i===0?c=o.reduce(function(d,f){if(Wa(f))switch(f.value){case"center":return s.push(lT),!1;case"top":case"left":return s.push(Qs),!1;case"right":case"bottom":return s.push(md),!1}else if(Zr(f)||Ld(f))return s.push(f),!1;return d},c):i===1&&(c=o.reduce(function(d,f){if(Wa(f))switch(f.value){case xO:return n=0,!1;case CO:return n=1,!1;case EO:case yO:return a=0,!1;case _O:return a=1,!1;case wO:return a=2,!1;case SO:case bO:return a=3,!1}else if(Ld(f)||Zr(f))return Array.isArray(a)||(a=[]),a.push(f),!1;return d},c)),c){var A=Ew(e,o);r.push(A)}}),{size:a,shape:n,stops:r,position:s,type:2}},P0e=function(e){return e.type===1},D0e=function(e){return e.type===2},uT={name:"image",parse:function(e,t){if(t.type===22){var n={url:t.value,type:0};return e.cache.addImage(t.value),n}if(t.type===18){var a=BO[t.name];if(typeof a>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return a(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function U0e(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!BO[e.name])}var BO={"linear-gradient":T0e,"-moz-linear-gradient":cy,"-ms-linear-gradient":cy,"-o-linear-gradient":cy,"-webkit-linear-gradient":cy,"radial-gradient":F0e,"-moz-radial-gradient":dy,"-ms-radial-gradient":dy,"-o-radial-gradient":dy,"-webkit-radial-gradient":dy,"-webkit-gradient":I0e},R0e={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var n=t[0];return n.type===20&&n.value==="none"?[]:t.filter(function(a){return Fh(a)&&U0e(a)}).map(function(a){return uT.parse(e,a)})}},N0e={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(n){if(Wa(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},V0e={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return Nu(t).map(function(n){return n.filter(Zr)}).map(AO)}},L0e={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return Nu(t).map(function(n){return n.filter(Wa).map(function(a){return a.value}).join(" ")}).map(M0e)}},M0e=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},ih;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(ih||(ih={}));var O0e={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return Nu(t).map(function(n){return n.filter(H0e)})}},H0e=function(e){return Wa(e)||Zr(e)},Bw=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},$0e=Bw("top"),Q0e=Bw("right"),G0e=Bw("bottom"),z0e=Bw("left"),kw=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,n){return AO(n.filter(Zr))}}},K0e=kw("top-left"),W0e=kw("top-right"),j0e=kw("bottom-right"),q0e=kw("bottom-left"),Tw=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,n){switch(n){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},Y0e=Tw("top"),X0e=Tw("right"),J0e=Tw("bottom"),Z0e=Tw("left"),Iw=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,n){return gg(n)?n.number:0}}},ege=Iw("top"),tge=Iw("right"),nge=Iw("bottom"),age=Iw("left"),rge={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},sge={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},oge={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(Wa).reduce(function(n,a){return n|ige(a.value)},0)}},ige=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},lge={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},uge={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},j_;(function(e){e.NORMAL="normal",e.STRICT="strict"})(j_||(j_={}));var cge={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return j_.STRICT;case"normal":default:return j_.NORMAL}}},dge={name:"line-height",initialValue:"normal",prefix:!1,type:4},xU=function(e,t){return Wa(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:Zr(e)?rr(e,t):t},Age={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:uT.parse(e,t)}},fge={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},_E={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Fw=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},mge=Fw("top"),hge=Fw("right"),vge=Fw("bottom"),pge=Fw("left"),gge={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(Wa).map(function(n){switch(n.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},yge={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},Pw=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},_ge=Pw("top"),wge=Pw("right"),bge=Pw("bottom"),xge=Pw("left"),Cge={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Sge={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Ege={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&yE(t[0],"none")?[]:Nu(t).map(function(n){for(var a={color:hc.TRANSPARENT,offsetX:Qs,offsetY:Qs,blur:Qs},r=0,s=0;s<n.length;s++){var o=n[s];Ld(o)?(r===0?a.offsetX=o:r===1?a.offsetY=o:a.blur=o,r++):a.color=bd.parse(e,o)}return a})}},Bge={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},kge={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var n=Fge[t.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return n(t.values)}return null}},Tge=function(e){var t=e.filter(function(n){return n.type===17}).map(function(n){return n.number});return t.length===6?t:null},Ige=function(e){var t=e.filter(function(c){return c.type===17}).map(function(c){return c.number}),n=t[0],a=t[1];t[2],t[3];var r=t[4],s=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var o=t[12],i=t[13];return t[14],t[15],t.length===16?[n,a,r,s,o,i]:null},Fge={matrix:Tge,matrix3d:Ige},CU={type:16,number:50,flags:pg},Pge=[CU,CU],Dge={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var n=t.filter(Zr);return n.length!==2?Pge:[n[0],n[1]]}},Uge={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Hp;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(Hp||(Hp={}));var Rge={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return Hp.BREAK_ALL;case"keep-all":return Hp.KEEP_ALL;case"normal":default:return Hp.NORMAL}}},Nge={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(rv(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},kO={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},Vge={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return rv(t)?t.number:1}},Lge={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Mge={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(Wa).map(function(n){switch(n.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(n){return n!==0})}},Oge={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var n=[],a=[];return t.forEach(function(r){switch(r.type){case 20:case 0:n.push(r.value);break;case 17:n.push(r.number.toString());break;case 4:a.push(n.join(" ")),n.length=0;break}}),n.length&&a.push(n.join(" ")),a.map(function(r){return r.indexOf(" ")===-1?r:"'"+r+"'"})}},Hge={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},$ge={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(rv(t))return t.number;if(Wa(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},Qge={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(Wa).map(function(n){return n.value})}},Gge={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},As=function(e,t){return(e&t)!==0},zge={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var n=t[0];return n.type===20&&n.value==="none"?[]:t}},Kge={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var n=t[0];if(n.type===20&&n.value==="none")return null;for(var a=[],r=t.filter(dO),s=0;s<r.length;s++){var o=r[s],i=r[s+1];if(o.type===20){var c=i&&rv(i)?i.number:1;a.push({counter:o.value,increment:c})}}return a}},Wge={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var n=[],a=t.filter(dO),r=0;r<a.length;r++){var s=a[r],o=a[r+1];if(Wa(s)&&s.value!=="none"){var i=o&&rv(o)?o.number:0;n.push({counter:s.value,reset:i})}}return n}},jge={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(gg).map(function(n){return kO.parse(e,n)})}},qge={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var n=t[0];if(n.type===20&&n.value==="none")return null;var a=[],r=t.filter(w0e);if(r.length%2!==0)return null;for(var s=0;s<r.length;s+=2){var o=r[s].value,i=r[s+1].value;a.push({open:o,close:i})}return a}},SU=function(e,t,n){if(!e)return"";var a=e[Math.min(t,e.length-1)];return a?n?a.open:a.close:""},Yge={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&yE(t[0],"none")?[]:Nu(t).map(function(n){for(var a={color:255,offsetX:Qs,offsetY:Qs,blur:Qs,spread:Qs,inset:!1},r=0,s=0;s<n.length;s++){var o=n[s];yE(o,"inset")?a.inset=!0:Ld(o)?(r===0?a.offsetX=o:r===1?a.offsetY=o:r===2?a.blur=o:a.spread=o,r++):a.color=bd.parse(e,o)}return a})}},Xge={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var n=[0,1,2],a=[];return t.filter(Wa).forEach(function(r){switch(r.value){case"stroke":a.push(1);break;case"fill":a.push(0);break;case"markers":a.push(2);break}}),n.forEach(function(r){a.indexOf(r)===-1&&a.push(r)}),a}},Jge={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Zge={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return gg(t)?t.number:0}},e1e=(function(){function e(t,n){var a,r;this.animationDuration=An(t,jge,n.animationDuration),this.backgroundClip=An(t,C0e,n.backgroundClip),this.backgroundColor=An(t,S0e,n.backgroundColor),this.backgroundImage=An(t,R0e,n.backgroundImage),this.backgroundOrigin=An(t,N0e,n.backgroundOrigin),this.backgroundPosition=An(t,V0e,n.backgroundPosition),this.backgroundRepeat=An(t,L0e,n.backgroundRepeat),this.backgroundSize=An(t,O0e,n.backgroundSize),this.borderTopColor=An(t,$0e,n.borderTopColor),this.borderRightColor=An(t,Q0e,n.borderRightColor),this.borderBottomColor=An(t,G0e,n.borderBottomColor),this.borderLeftColor=An(t,z0e,n.borderLeftColor),this.borderTopLeftRadius=An(t,K0e,n.borderTopLeftRadius),this.borderTopRightRadius=An(t,W0e,n.borderTopRightRadius),this.borderBottomRightRadius=An(t,j0e,n.borderBottomRightRadius),this.borderBottomLeftRadius=An(t,q0e,n.borderBottomLeftRadius),this.borderTopStyle=An(t,Y0e,n.borderTopStyle),this.borderRightStyle=An(t,X0e,n.borderRightStyle),this.borderBottomStyle=An(t,J0e,n.borderBottomStyle),this.borderLeftStyle=An(t,Z0e,n.borderLeftStyle),this.borderTopWidth=An(t,ege,n.borderTopWidth),this.borderRightWidth=An(t,tge,n.borderRightWidth),this.borderBottomWidth=An(t,nge,n.borderBottomWidth),this.borderLeftWidth=An(t,age,n.borderLeftWidth),this.boxShadow=An(t,Yge,n.boxShadow),this.color=An(t,rge,n.color),this.direction=An(t,sge,n.direction),this.display=An(t,oge,n.display),this.float=An(t,lge,n.cssFloat),this.fontFamily=An(t,Oge,n.fontFamily),this.fontSize=An(t,Hge,n.fontSize),this.fontStyle=An(t,Gge,n.fontStyle),this.fontVariant=An(t,Qge,n.fontVariant),this.fontWeight=An(t,$ge,n.fontWeight),this.letterSpacing=An(t,uge,n.letterSpacing),this.lineBreak=An(t,cge,n.lineBreak),this.lineHeight=An(t,dge,n.lineHeight),this.listStyleImage=An(t,Age,n.listStyleImage),this.listStylePosition=An(t,fge,n.listStylePosition),this.listStyleType=An(t,_E,n.listStyleType),this.marginTop=An(t,mge,n.marginTop),this.marginRight=An(t,hge,n.marginRight),this.marginBottom=An(t,vge,n.marginBottom),this.marginLeft=An(t,pge,n.marginLeft),this.opacity=An(t,Vge,n.opacity);var s=An(t,gge,n.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=An(t,yge,n.overflowWrap),this.paddingTop=An(t,_ge,n.paddingTop),this.paddingRight=An(t,wge,n.paddingRight),this.paddingBottom=An(t,bge,n.paddingBottom),this.paddingLeft=An(t,xge,n.paddingLeft),this.paintOrder=An(t,Xge,n.paintOrder),this.position=An(t,Sge,n.position),this.textAlign=An(t,Cge,n.textAlign),this.textDecorationColor=An(t,Lge,(a=n.textDecorationColor)!==null&&a!==void 0?a:n.color),this.textDecorationLine=An(t,Mge,(r=n.textDecorationLine)!==null&&r!==void 0?r:n.textDecoration),this.textShadow=An(t,Ege,n.textShadow),this.textTransform=An(t,Bge,n.textTransform),this.transform=An(t,kge,n.transform),this.transformOrigin=An(t,Dge,n.transformOrigin),this.visibility=An(t,Uge,n.visibility),this.webkitTextStrokeColor=An(t,Jge,n.webkitTextStrokeColor),this.webkitTextStrokeWidth=An(t,Zge,n.webkitTextStrokeWidth),this.wordBreak=An(t,Rge,n.wordBreak),this.zIndex=An(t,Nge,n.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return xd(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return As(this.display,4)||As(this.display,33554432)||As(this.display,268435456)||As(this.display,536870912)||As(this.display,67108864)||As(this.display,134217728)},e})(),t1e=(function(){function e(t,n){this.content=An(t,zge,n.content),this.quotes=An(t,qge,n.quotes)}return e})(),EU=(function(){function e(t,n){this.counterIncrement=An(t,Kge,n.counterIncrement),this.counterReset=An(t,Wge,n.counterReset)}return e})(),An=function(e,t,n){var a=new uO,r=n!==null&&typeof n<"u"?n.toString():t.initialValue;a.write(r);var s=new cO(a.read());switch(t.type){case 2:var o=s.parseComponentValue();return t.parse(e,Wa(o)?o.value:t.initialValue);case 0:return t.parse(e,s.parseComponentValue());case 1:return t.parse(e,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(t.format){case"angle":return Sw.parse(e,s.parseComponentValue());case"color":return bd.parse(e,s.parseComponentValue());case"image":return uT.parse(e,s.parseComponentValue());case"length":var i=s.parseComponentValue();return Ld(i)?i:Qs;case"length-percentage":var c=s.parseComponentValue();return Zr(c)?c:Qs;case"time":return kO.parse(e,s.parseComponentValue())}break}},n1e="data-html2canvas-debug",a1e=function(e){var t=e.getAttribute(n1e);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},wE=function(e,t){var n=a1e(e);return n===1||t===n},Vu=(function(){function e(t,n){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,wE(n,3))debugger;this.styles=new e1e(t,window.getComputedStyle(n,null)),CE(n)&&(this.styles.animationDuration.some(function(a){return a>0})&&(n.style.animationDuration="0s"),this.styles.transform!==null&&(n.style.transform="none")),this.bounds=xw(this.context,n),wE(n,4)&&(this.flags|=16)}return e})(),r1e="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",BU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_p=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ay=0;Ay<BU.length;Ay++)_p[BU.charCodeAt(Ay)]=Ay;var s1e=function(e){var t=e.length*.75,n=e.length,a,r=0,s,o,i,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var A=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(A)?A:new Uint8Array(A);for(a=0;a<n;a+=4)s=_p[e.charCodeAt(a)],o=_p[e.charCodeAt(a+1)],i=_p[e.charCodeAt(a+2)],c=_p[e.charCodeAt(a+3)],d[r++]=s<<2|o>>4,d[r++]=(o&15)<<4|i>>2,d[r++]=(i&3)<<6|c&63;return A},o1e=function(e){for(var t=e.length,n=[],a=0;a<t;a+=2)n.push(e[a+1]<<8|e[a]);return n},i1e=function(e){for(var t=e.length,n=[],a=0;a<t;a+=4)n.push(e[a+3]<<24|e[a+2]<<16|e[a+1]<<8|e[a]);return n},XA=5,cT=11,mC=2,l1e=cT-XA,TO=65536>>XA,u1e=1<<XA,hC=u1e-1,c1e=1024>>XA,d1e=TO+c1e,A1e=d1e,f1e=32,m1e=A1e+f1e,h1e=65536>>cT,v1e=1<<l1e,p1e=v1e-1,kU=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},g1e=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},y1e=function(e,t){var n=s1e(e),a=Array.isArray(n)?i1e(n):new Uint32Array(n),r=Array.isArray(n)?o1e(n):new Uint16Array(n),s=24,o=kU(r,s/2,a[4]/2),i=a[5]===2?kU(r,(s+a[4])/2):g1e(a,Math.ceil((s+a[4])/4));return new _1e(a[0],a[1],a[2],a[3],o,i)},_1e=(function(){function e(t,n,a,r,s,o){this.initialValue=t,this.errorValue=n,this.highStart=a,this.highValueIndex=r,this.index=s,this.data=o}return e.prototype.get=function(t){var n;if(t>=0){if(t<55296||t>56319&&t<=65535)return n=this.index[t>>XA],n=(n<<mC)+(t&hC),this.data[n];if(t<=65535)return n=this.index[TO+(t-55296>>XA)],n=(n<<mC)+(t&hC),this.data[n];if(t<this.highStart)return n=m1e-h1e+(t>>cT),n=this.index[n],n+=t>>XA&p1e,n=this.index[n],n=(n<<mC)+(t&hC),this.data[n];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e})(),TU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w1e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var fy=0;fy<TU.length;fy++)w1e[TU.charCodeAt(fy)]=fy;var b1e=1,vC=2,pC=3,IU=4,FU=5,x1e=7,PU=8,gC=9,yC=10,DU=11,UU=12,RU=13,NU=14,_C=15,C1e=function(e){for(var t=[],n=0,a=e.length;n<a;){var r=e.charCodeAt(n++);if(r>=55296&&r<=56319&&n<a){var s=e.charCodeAt(n++);(s&64512)===56320?t.push(((r&1023)<<10)+(s&1023)+65536):(t.push(r),n--)}else t.push(r)}return t},S1e=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var a=[],r=-1,s="";++r<n;){var o=e[r];o<=65535?a.push(o):(o-=65536,a.push((o>>10)+55296,o%1024+56320)),(r+1===n||a.length>16384)&&(s+=String.fromCharCode.apply(String,a),a.length=0)}return s},E1e=y1e(r1e),Oi="",wC="",B1e=function(e){return E1e.get(e)},k1e=function(e,t,n){var a=n-2,r=t[a],s=t[n-1],o=t[n];if(s===vC&&o===pC)return Oi;if(s===vC||s===pC||s===IU||o===vC||o===pC||o===IU)return wC;if(s===PU&&[PU,gC,DU,UU].indexOf(o)!==-1||(s===DU||s===gC)&&(o===gC||o===yC)||(s===UU||s===yC)&&o===yC||o===RU||o===FU||o===x1e||s===b1e)return Oi;if(s===RU&&o===NU){for(;r===FU;)r=t[--a];if(r===NU)return Oi}if(s===_C&&o===_C){for(var i=0;r===_C;)i++,r=t[--a];if(i%2===0)return Oi}return wC},T1e=function(e){var t=C1e(e),n=t.length,a=0,r=0,s=t.map(B1e);return{next:function(){if(a>=n)return{done:!0,value:null};for(var o=Oi;a<n&&(o=k1e(t,s,++a))===Oi;);if(o!==Oi||a===n){var i=S1e.apply(null,t.slice(r,a));return r=a,{value:i,done:!1}}return{done:!0,value:null}}}},I1e=function(e){for(var t=T1e(e),n=[],a;!(a=t.next()).done;)a.value&&n.push(a.value.slice());return n},F1e=function(e){var t=123;if(e.createRange){var n=e.createRange();if(n.getBoundingClientRect){var a=e.createElement("boundtest");a.style.height=t+"px",a.style.display="block",e.body.appendChild(a),n.selectNode(a);var r=n.getBoundingClientRect(),s=Math.round(r.height);if(e.body.removeChild(a),s===t)return!0}}return!1},P1e=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var n=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var a=t.firstChild,r=Cw(a.data).map(function(c){return $r(c)}),s=0,o={},i=r.every(function(c,A){n.setStart(a,s),n.setEnd(a,s+c.length);var d=n.getBoundingClientRect();s+=c.length;var f=d.x>o.x||d.y>o.y;return o=d,A===0?!0:f});return e.body.removeChild(t),i},D1e=function(){return typeof new Image().crossOrigin<"u"},U1e=function(){return typeof new XMLHttpRequest().responseType=="string"},R1e=function(e){var t=new Image,n=e.createElement("canvas"),a=n.getContext("2d");if(!a)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{a.drawImage(t,0,0),n.toDataURL()}catch{return!1}return!0},VU=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},N1e=function(e){var t=e.createElement("canvas"),n=100;t.width=n,t.height=n;var a=t.getContext("2d");if(!a)return Promise.reject(!1);a.fillStyle="rgb(0, 255, 0)",a.fillRect(0,0,n,n);var r=new Image,s=t.toDataURL();r.src=s;var o=bE(n,n,0,0,r);return a.fillStyle="red",a.fillRect(0,0,n,n),LU(o).then(function(i){a.drawImage(i,0,0);var c=a.getImageData(0,0,n,n).data;a.fillStyle="red",a.fillRect(0,0,n,n);var A=e.createElement("div");return A.style.backgroundImage="url("+s+")",A.style.height=n+"px",VU(c)?LU(bE(n,n,0,0,A)):Promise.reject(!1)}).then(function(i){return a.drawImage(i,0,0),VU(a.getImageData(0,0,n,n).data)}).catch(function(){return!1})},bE=function(e,t,n,a,r){var s="http://www.w3.org/2000/svg",o=document.createElementNS(s,"svg"),i=document.createElementNS(s,"foreignObject");return o.setAttributeNS(null,"width",e.toString()),o.setAttributeNS(null,"height",t.toString()),i.setAttributeNS(null,"width","100%"),i.setAttributeNS(null,"height","100%"),i.setAttributeNS(null,"x",n.toString()),i.setAttributeNS(null,"y",a.toString()),i.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(i),i.appendChild(r),o},LU=function(e){return new Promise(function(t,n){var a=new Image;a.onload=function(){return t(a)},a.onerror=n,a.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},Vs={get SUPPORT_RANGE_BOUNDS(){var e=F1e(document);return Object.defineProperty(Vs,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=Vs.SUPPORT_RANGE_BOUNDS&&P1e(document);return Object.defineProperty(Vs,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=R1e(document);return Object.defineProperty(Vs,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?N1e(document):Promise.resolve(!1);return Object.defineProperty(Vs,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=D1e();return Object.defineProperty(Vs,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=U1e();return Object.defineProperty(Vs,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Vs,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Vs,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},$p=(function(){function e(t,n){this.text=t,this.bounds=n}return e})(),V1e=function(e,t,n,a){var r=O1e(t,n),s=[],o=0;return r.forEach(function(i){if(n.textDecorationLine.length||i.trim().length>0)if(Vs.SUPPORT_RANGE_BOUNDS){var c=MU(a,o,i.length).getClientRects();if(c.length>1){var A=dT(i),d=0;A.forEach(function(m){s.push(new $p(m,Bc.fromDOMRectList(e,MU(a,d+o,m.length).getClientRects()))),d+=m.length})}else s.push(new $p(i,Bc.fromDOMRectList(e,c)))}else{var f=a.splitText(i.length);s.push(new $p(i,L1e(e,a))),a=f}else Vs.SUPPORT_RANGE_BOUNDS||(a=a.splitText(i.length));o+=i.length}),s},L1e=function(e,t){var n=t.ownerDocument;if(n){var a=n.createElement("html2canvaswrapper");a.appendChild(t.cloneNode(!0));var r=t.parentNode;if(r){r.replaceChild(a,t);var s=xw(e,a);return a.firstChild&&r.replaceChild(a.firstChild,a),s}}return Bc.EMPTY},MU=function(e,t,n){var a=e.ownerDocument;if(!a)throw new Error("Node has no owner document");var r=a.createRange();return r.setStart(e,t),r.setEnd(e,t+n),r},dT=function(e){if(Vs.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(n){return n.segment})}return I1e(e)},M1e=function(e,t){if(Vs.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(e)).map(function(a){return a.segment})}return $1e(e,t)},O1e=function(e,t){return t.letterSpacing!==0?dT(e):M1e(e,t)},H1e=[32,160,4961,65792,65793,4153,4241],$1e=function(e,t){for(var n=hpe(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),a=[],r,s=function(){if(r.value){var o=r.value.slice(),i=Cw(o),c="";i.forEach(function(A){H1e.indexOf(A)===-1?c+=$r(A):(c.length&&a.push(c),a.push($r(A)),c="")}),c.length&&a.push(c)}};!(r=n.next()).done;)s();return a},Q1e=(function(){function e(t,n,a){this.text=G1e(n.data,a.textTransform),this.textBounds=V1e(t,this.text,a,n)}return e})(),G1e=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(z1e,K1e);case 2:return e.toUpperCase();default:return e}},z1e=/(^|\s|:|-|\(|\))([a-z])/g,K1e=function(e,t,n){return e.length>0?t+n.toUpperCase():e},IO=(function(e){Xl(t,e);function t(n,a){var r=e.call(this,n,a)||this;return r.src=a.currentSrc||a.src,r.intrinsicWidth=a.naturalWidth,r.intrinsicHeight=a.naturalHeight,r.context.cache.addImage(r.src),r}return t})(Vu),FO=(function(e){Xl(t,e);function t(n,a){var r=e.call(this,n,a)||this;return r.canvas=a,r.intrinsicWidth=a.width,r.intrinsicHeight=a.height,r}return t})(Vu),PO=(function(e){Xl(t,e);function t(n,a){var r=e.call(this,n,a)||this,s=new XMLSerializer,o=xw(n,a);return a.setAttribute("width",o.width+"px"),a.setAttribute("height",o.height+"px"),r.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(a)),r.intrinsicWidth=a.width.baseVal.value,r.intrinsicHeight=a.height.baseVal.value,r.context.cache.addImage(r.svg),r}return t})(Vu),DO=(function(e){Xl(t,e);function t(n,a){var r=e.call(this,n,a)||this;return r.value=a.value,r}return t})(Vu),xE=(function(e){Xl(t,e);function t(n,a){var r=e.call(this,n,a)||this;return r.start=a.start,r.reversed=typeof a.reversed=="boolean"&&a.reversed===!0,r}return t})(Vu),W1e=[{type:15,flags:0,unit:"px",number:3}],j1e=[{type:16,flags:0,number:50}],q1e=function(e){return e.width>e.height?new Bc(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new Bc(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},Y1e=function(e){var t=e.type===X1e?new Array(e.value.length+1).join(""):e.value;return t.length===0?e.placeholder||"":t},q_="checkbox",Y_="radio",X1e="password",OU=707406591,AT=(function(e){Xl(t,e);function t(n,a){var r=e.call(this,n,a)||this;switch(r.type=a.type.toLowerCase(),r.checked=a.checked,r.value=Y1e(a),(r.type===q_||r.type===Y_)&&(r.styles.backgroundColor=3739148031,r.styles.borderTopColor=r.styles.borderRightColor=r.styles.borderBottomColor=r.styles.borderLeftColor=2779096575,r.styles.borderTopWidth=r.styles.borderRightWidth=r.styles.borderBottomWidth=r.styles.borderLeftWidth=1,r.styles.borderTopStyle=r.styles.borderRightStyle=r.styles.borderBottomStyle=r.styles.borderLeftStyle=1,r.styles.backgroundClip=[0],r.styles.backgroundOrigin=[0],r.bounds=q1e(r.bounds)),r.type){case q_:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=W1e;break;case Y_:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=j1e;break}return r}return t})(Vu),UO=(function(e){Xl(t,e);function t(n,a){var r=e.call(this,n,a)||this,s=a.options[a.selectedIndex||0];return r.value=s&&s.text||"",r}return t})(Vu),RO=(function(e){Xl(t,e);function t(n,a){var r=e.call(this,n,a)||this;return r.value=a.value,r}return t})(Vu),NO=(function(e){Xl(t,e);function t(n,a){var r=e.call(this,n,a)||this;r.src=a.src,r.width=parseInt(a.width,10)||0,r.height=parseInt(a.height,10)||0,r.backgroundColor=r.styles.backgroundColor;try{if(a.contentWindow&&a.contentWindow.document&&a.contentWindow.document.documentElement){r.tree=LO(n,a.contentWindow.document.documentElement);var s=a.contentWindow.document.documentElement?Op(n,getComputedStyle(a.contentWindow.document.documentElement).backgroundColor):hc.TRANSPARENT,o=a.contentWindow.document.body?Op(n,getComputedStyle(a.contentWindow.document.body).backgroundColor):hc.TRANSPARENT;r.backgroundColor=xd(s)?xd(o)?r.styles.backgroundColor:o:s}}catch{}return r}return t})(Vu),J1e=["OL","UL","MENU"],Jy=function(e,t,n,a){for(var r=t.firstChild,s=void 0;r;r=s)if(s=r.nextSibling,MO(r)&&r.data.trim().length>0)n.textNodes.push(new Q1e(e,r,n.styles));else if(Om(r))if(QO(r)&&r.assignedNodes)r.assignedNodes().forEach(function(i){return Jy(e,i,n,a)});else{var o=VO(e,r);o.styles.isVisible()&&(Z1e(r,o,a)?o.flags|=4:eye(o.styles)&&(o.flags|=2),J1e.indexOf(r.tagName)!==-1&&(o.flags|=8),n.elements.push(o),r.slot,r.shadowRoot?Jy(e,r.shadowRoot,o,a):!X_(r)&&!OO(r)&&!J_(r)&&Jy(e,r,o,a))}},VO=function(e,t){return SE(t)?new IO(e,t):HO(t)?new FO(e,t):OO(t)?new PO(e,t):tye(t)?new DO(e,t):nye(t)?new xE(e,t):aye(t)?new AT(e,t):J_(t)?new UO(e,t):X_(t)?new RO(e,t):$O(t)?new NO(e,t):new Vu(e,t)},LO=function(e,t){var n=VO(e,t);return n.flags|=4,Jy(e,t,n,n),n},Z1e=function(e,t,n){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||fT(e)&&n.styles.isTransparent()},eye=function(e){return e.isPositioned()||e.isFloating()},MO=function(e){return e.nodeType===Node.TEXT_NODE},Om=function(e){return e.nodeType===Node.ELEMENT_NODE},CE=function(e){return Om(e)&&typeof e.style<"u"&&!Zy(e)},Zy=function(e){return typeof e.className=="object"},tye=function(e){return e.tagName==="LI"},nye=function(e){return e.tagName==="OL"},aye=function(e){return e.tagName==="INPUT"},rye=function(e){return e.tagName==="HTML"},OO=function(e){return e.tagName==="svg"},fT=function(e){return e.tagName==="BODY"},HO=function(e){return e.tagName==="CANVAS"},HU=function(e){return e.tagName==="VIDEO"},SE=function(e){return e.tagName==="IMG"},$O=function(e){return e.tagName==="IFRAME"},$U=function(e){return e.tagName==="STYLE"},sye=function(e){return e.tagName==="SCRIPT"},X_=function(e){return e.tagName==="TEXTAREA"},J_=function(e){return e.tagName==="SELECT"},QO=function(e){return e.tagName==="SLOT"},QU=function(e){return e.tagName.indexOf("-")>0},oye=(function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var n=this.counters[t];return n&&n.length?n[n.length-1]:1},e.prototype.getCounterValues=function(t){var n=this.counters[t];return n||[]},e.prototype.pop=function(t){var n=this;t.forEach(function(a){return n.counters[a].pop()})},e.prototype.parse=function(t){var n=this,a=t.counterIncrement,r=t.counterReset,s=!0;a!==null&&a.forEach(function(i){var c=n.counters[i.counter];c&&i.increment!==0&&(s=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=i.increment)});var o=[];return s&&r.forEach(function(i){var c=n.counters[i.counter];o.push(i.counter),c||(c=n.counters[i.counter]=[]),c.push(i.reset)}),o},e})(),GU={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},zU={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},iye={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},lye={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Em=function(e,t,n,a,r,s){return e<t||e>n?k0(e,r,s.length>0):a.integers.reduce(function(o,i,c){for(;e>=i;)e-=i,o+=a.values[c];return o},"")+s},GO=function(e,t,n,a){var r="";do n||e--,r=a(e)+r,e/=t;while(e*t>=t);return r},Or=function(e,t,n,a,r){var s=n-t+1;return(e<0?"-":"")+(GO(Math.abs(e),s,a,function(o){return $r(Math.floor(o%s)+t)})+r)},xA=function(e,t,n){n===void 0&&(n=". ");var a=t.length;return GO(Math.abs(e),a,!1,function(r){return t[Math.floor(r%a)]})+n},Rm=1,ed=2,td=4,wp=8,nc=function(e,t,n,a,r,s){if(e<-9999||e>9999)return k0(e,4,r.length>0);var o=Math.abs(e),i=r;if(o===0)return t[0]+i;for(var c=0;o>0&&c<=4;c++){var A=o%10;A===0&&As(s,Rm)&&i!==""?i=t[A]+i:A>1||A===1&&c===0||A===1&&c===1&&As(s,ed)||A===1&&c===1&&As(s,td)&&e>100||A===1&&c>1&&As(s,wp)?i=t[A]+(c>0?n[c-1]:"")+i:A===1&&c>0&&(i=n[c-1]+i),o=Math.floor(o/10)}return(e<0?a:"")+i},KU="",WU="",jU="",bC="",k0=function(e,t,n){var a=n?". ":"",r=n?"":"",s=n?", ":"",o=n?" ":"";switch(t){case 0:return""+o;case 1:return""+o;case 2:return""+o;case 5:var i=Or(e,48,57,!0,a);return i.length<4?"0"+i:i;case 4:return xA(e,"",r);case 6:return Em(e,1,3999,GU,3,a).toLowerCase();case 7:return Em(e,1,3999,GU,3,a);case 8:return Or(e,945,969,!1,a);case 9:return Or(e,97,122,!1,a);case 10:return Or(e,65,90,!1,a);case 11:return Or(e,1632,1641,!0,a);case 12:case 49:return Em(e,1,9999,zU,3,a);case 35:return Em(e,1,9999,zU,3,a).toLowerCase();case 13:return Or(e,2534,2543,!0,a);case 14:case 30:return Or(e,6112,6121,!0,a);case 15:return xA(e,"",r);case 16:return xA(e,"",r);case 17:case 48:return nc(e,"",KU,"",r,ed|td|wp);case 47:return nc(e,"",WU,"",r,Rm|ed|td|wp);case 42:return nc(e,"",KU,"",r,ed|td|wp);case 41:return nc(e,"",WU,"",r,Rm|ed|td|wp);case 26:return nc(e,"","",jU,r,0);case 25:return nc(e,"","",jU,r,Rm|ed|td);case 31:return nc(e,"","",bC,s,Rm|ed|td);case 33:return nc(e,"","",bC,s,0);case 32:return nc(e,"","",bC,s,Rm|ed|td);case 18:return Or(e,2406,2415,!0,a);case 20:return Em(e,1,19999,lye,3,a);case 21:return Or(e,2790,2799,!0,a);case 22:return Or(e,2662,2671,!0,a);case 22:return Em(e,1,10999,iye,3,a);case 23:return xA(e,"");case 24:return xA(e,"");case 27:return Or(e,3302,3311,!0,a);case 28:return xA(e,"",r);case 29:return xA(e,"",r);case 34:return Or(e,3792,3801,!0,a);case 37:return Or(e,6160,6169,!0,a);case 38:return Or(e,4160,4169,!0,a);case 39:return Or(e,2918,2927,!0,a);case 40:return Or(e,1776,1785,!0,a);case 43:return Or(e,3046,3055,!0,a);case 44:return Or(e,3174,3183,!0,a);case 45:return Or(e,3664,3673,!0,a);case 46:return Or(e,3872,3881,!0,a);case 3:default:return Or(e,48,57,!0,a)}},zO="data-html2canvas-ignore",qU=(function(){function e(t,n,a){if(this.context=t,this.options=a,this.scrolledElements=[],this.referenceElement=n,this.counters=new oye,this.quoteDepth=0,!n.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(n.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,n){var a=this,r=uye(t,n);if(!r.contentWindow)return Promise.reject("Unable to find iframe window");var s=t.defaultView.pageXOffset,o=t.defaultView.pageYOffset,i=r.contentWindow,c=i.document,A=Aye(r).then(function(){return Io(a,void 0,void 0,function(){var d,f;return to(this,function(m){switch(m.label){case 0:return this.scrolledElements.forEach(vye),i&&(i.scrollTo(n.left,n.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(i.scrollY!==n.top||i.scrollX!==n.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(i.scrollX-n.left,i.scrollY-n.top,0,0))),d=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:m.sent(),m.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,dye(c)]:[3,4];case 3:m.sent(),m.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(c,f)}).then(function(){return r})]:[2,r]}})})});return c.open(),c.write(mye(document.doctype)+"<html></html>"),hye(this.referenceElement.ownerDocument,s,o),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),A},e.prototype.createElementClone=function(t){if(wE(t,2))debugger;if(HO(t))return this.createCanvasClone(t);if(HU(t))return this.createVideoClone(t);if($U(t))return this.createStyleClone(t);var n=t.cloneNode(!1);return SE(n)&&(SE(t)&&t.currentSrc&&t.currentSrc!==t.src&&(n.src=t.currentSrc,n.srcset=""),n.loading==="lazy"&&(n.loading="eager")),QU(n)?this.createCustomElementClone(n):n},e.prototype.createCustomElementClone=function(t){var n=document.createElement("html2canvascustomelement");return xC(t.style,n),n},e.prototype.createStyleClone=function(t){try{var n=t.sheet;if(n&&n.cssRules){var a=[].slice.call(n.cssRules,0).reduce(function(s,o){return o&&typeof o.cssText=="string"?s+o.cssText:s},""),r=t.cloneNode(!1);return r.textContent=a,r}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var n;if(this.options.inlineImages&&t.ownerDocument){var a=t.ownerDocument.createElement("img");try{return a.src=t.toDataURL(),a}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var r=t.cloneNode(!1);try{r.width=t.width,r.height=t.height;var s=t.getContext("2d"),o=r.getContext("2d");if(o)if(!this.options.allowTaint&&s)o.putImageData(s.getImageData(0,0,t.width,t.height),0,0);else{var i=(n=t.getContext("webgl2"))!==null&&n!==void 0?n:t.getContext("webgl");if(i){var c=i.getContextAttributes();c?.preserveDrawingBuffer===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}o.drawImage(t,0,0)}return r}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return r},e.prototype.createVideoClone=function(t){var n=t.ownerDocument.createElement("canvas");n.width=t.offsetWidth,n.height=t.offsetHeight;var a=n.getContext("2d");try{return a&&(a.drawImage(t,0,0,n.width,n.height),this.options.allowTaint||a.getImageData(0,0,n.width,n.height)),n}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var r=t.ownerDocument.createElement("canvas");return r.width=t.offsetWidth,r.height=t.offsetHeight,r},e.prototype.appendChildNode=function(t,n,a){(!Om(n)||!sye(n)&&!n.hasAttribute(zO)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(n)))&&(!this.options.copyStyles||!Om(n)||!$U(n))&&t.appendChild(this.cloneNode(n,a))},e.prototype.cloneChildNodes=function(t,n,a){for(var r=this,s=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;s;s=s.nextSibling)if(Om(s)&&QO(s)&&typeof s.assignedNodes=="function"){var o=s.assignedNodes();o.length&&o.forEach(function(i){return r.appendChildNode(n,i,a)})}else this.appendChildNode(n,s,a)},e.prototype.cloneNode=function(t,n){if(MO(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var a=t.ownerDocument.defaultView;if(a&&Om(t)&&(CE(t)||Zy(t))){var r=this.createElementClone(t);r.style.transitionProperty="none";var s=a.getComputedStyle(t),o=a.getComputedStyle(t,":before"),i=a.getComputedStyle(t,":after");this.referenceElement===t&&CE(r)&&(this.clonedReferenceElement=r),fT(r)&&yye(r);var c=this.counters.parse(new EU(this.context,s)),A=this.resolvePseudoContent(t,r,o,Qp.BEFORE);QU(t)&&(n=!0),HU(t)||this.cloneChildNodes(t,r,n),A&&r.insertBefore(A,r.firstChild);var d=this.resolvePseudoContent(t,r,i,Qp.AFTER);return d&&r.appendChild(d),this.counters.pop(c),(s&&(this.options.copyStyles||Zy(t))&&!$O(t)||n)&&xC(s,r),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([r,t.scrollLeft,t.scrollTop]),(X_(t)||J_(t))&&(X_(r)||J_(r))&&(r.value=t.value),r}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,n,a,r){var s=this;if(a){var o=a.content,i=n.ownerDocument;if(!(!i||!o||o==="none"||o==="-moz-alt-content"||a.display==="none")){this.counters.parse(new EU(this.context,a));var c=new t1e(this.context,a),A=i.createElement("html2canvaspseudoelement");xC(a,A),c.content.forEach(function(f){if(f.type===0)A.appendChild(i.createTextNode(f.value));else if(f.type===22){var m=i.createElement("img");m.src=f.value,m.style.opacity="1",A.appendChild(m)}else if(f.type===18){if(f.name==="attr"){var h=f.values.filter(Wa);h.length&&A.appendChild(i.createTextNode(t.getAttribute(h[0].value)||""))}else if(f.name==="counter"){var v=f.values.filter(Fh),y=v[0],g=v[1];if(y&&Wa(y)){var w=s.counters.getCounterValue(y.value),b=g&&Wa(g)?_E.parse(s.context,g.value):3;A.appendChild(i.createTextNode(k0(w,b,!1)))}}else if(f.name==="counters"){var x=f.values.filter(Fh),y=x[0],T=x[1],g=x[2];if(y&&Wa(y)){var U=s.counters.getCounterValues(y.value),k=g&&Wa(g)?_E.parse(s.context,g.value):3,S=T&&T.type===0?T.value:"",E=U.map(function(F){return k0(F,k,!1)}).join(S);A.appendChild(i.createTextNode(E))}}}else if(f.type===20)switch(f.value){case"open-quote":A.appendChild(i.createTextNode(SU(c.quotes,s.quoteDepth++,!0)));break;case"close-quote":A.appendChild(i.createTextNode(SU(c.quotes,--s.quoteDepth,!1)));break;default:A.appendChild(i.createTextNode(f.value))}}),A.className=EE+" "+BE;var d=r===Qp.BEFORE?" "+EE:" "+BE;return Zy(n)?n.className.baseValue+=d:n.className+=d,A}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e})(),Qp;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(Qp||(Qp={}));var uye=function(e,t){var n=e.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=t.width.toString(),n.height=t.height.toString(),n.scrolling="no",n.setAttribute(zO,"true"),e.body.appendChild(n),n},cye=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},dye=function(e){return Promise.all([].slice.call(e.images,0).map(cye))},Aye=function(e){return new Promise(function(t,n){var a=e.contentWindow;if(!a)return n("No window assigned for iframe");var r=a.document;a.onload=e.onload=function(){a.onload=e.onload=null;var s=setInterval(function(){r.body.childNodes.length>0&&r.readyState==="complete"&&(clearInterval(s),t(e))},50)}})},fye=["all","d","content"],xC=function(e,t){for(var n=e.length-1;n>=0;n--){var a=e.item(n);fye.indexOf(a)===-1&&t.style.setProperty(a,e.getPropertyValue(a))}return t},mye=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},hye=function(e,t,n){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||n!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,n)},vye=function(e){var t=e[0],n=e[1],a=e[2];t.scrollLeft=n,t.scrollTop=a},pye=":before",gye=":after",EE="___html2canvas___pseudoelement_before",BE="___html2canvas___pseudoelement_after",YU=`{
    content: "" !important;
    display: none !important;
}`,yye=function(e){_ye(e,"."+EE+pye+YU+`
         .`+BE+gye+YU)},_ye=function(e,t){var n=e.ownerDocument;if(n){var a=n.createElement("style");a.textContent=t,e.appendChild(a)}},KO=(function(){function e(){}return e.getOrigin=function(t){var n=e._link;return n?(n.href=t,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e})(),wye=(function(){function e(t,n){this.context=t,this._options=n,this._cache={}}return e.prototype.addImage=function(t){var n=Promise.resolve();return this.has(t)||(SC(t)||Sye(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),n},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return Io(this,void 0,void 0,function(){var n,a,r,s,o=this;return to(this,function(i){switch(i.label){case 0:return n=KO.isSameOrigin(t),a=!CC(t)&&this._options.useCORS===!0&&Vs.SUPPORT_CORS_IMAGES&&!n,r=!CC(t)&&!n&&!SC(t)&&typeof this._options.proxy=="string"&&Vs.SUPPORT_CORS_XHR&&!a,!n&&this._options.allowTaint===!1&&!CC(t)&&!SC(t)&&!r&&!a?[2]:(s=t,r?[4,this.proxy(s)]:[3,2]);case 1:s=i.sent(),i.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(c,A){var d=new Image;d.onload=function(){return c(d)},d.onerror=A,(Eye(s)||a)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return c(d)},500),o._options.imageTimeout>0&&setTimeout(function(){return A("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,i.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var n=this,a=this._options.proxy;if(!a)throw new Error("No proxy defined");var r=t.substring(0,256);return new Promise(function(s,o){var i=Vs.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(i==="text")s(c.response);else{var f=new FileReader;f.addEventListener("load",function(){return s(f.result)},!1),f.addEventListener("error",function(m){return o(m)},!1),f.readAsDataURL(c.response)}else o("Failed to proxy resource "+r+" with status code "+c.status)},c.onerror=o;var A=a.indexOf("?")>-1?"&":"?";if(c.open("GET",""+a+A+"url="+encodeURIComponent(t)+"&responseType="+i),i!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=i),n._options.imageTimeout){var d=n._options.imageTimeout;c.timeout=d,c.ontimeout=function(){return o("Timed out ("+d+"ms) proxying "+r)}}c.send()})},e})(),bye=/^data:image\/svg\+xml/i,xye=/^data:image\/.*;base64,/i,Cye=/^data:image\/.*/i,Sye=function(e){return Vs.SUPPORT_SVG_DRAWING||!Bye(e)},CC=function(e){return Cye.test(e)},Eye=function(e){return xye.test(e)},SC=function(e){return e.substr(0,4)==="blob"},Bye=function(e){return e.substr(-3).toLowerCase()==="svg"||bye.test(e)},ln=(function(){function e(t,n){this.type=0,this.x=t,this.y=n}return e.prototype.add=function(t,n){return new e(this.x+t,this.y+n)},e})(),Bm=function(e,t,n){return new ln(e.x+(t.x-e.x)*n,e.y+(t.y-e.y)*n)},my=(function(){function e(t,n,a,r){this.type=1,this.start=t,this.startControl=n,this.endControl=a,this.end=r}return e.prototype.subdivide=function(t,n){var a=Bm(this.start,this.startControl,t),r=Bm(this.startControl,this.endControl,t),s=Bm(this.endControl,this.end,t),o=Bm(a,r,t),i=Bm(r,s,t),c=Bm(o,i,t);return n?new e(this.start,a,o,c):new e(c,i,s,this.end)},e.prototype.add=function(t,n){return new e(this.start.add(t,n),this.startControl.add(t,n),this.endControl.add(t,n),this.end.add(t,n))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e})(),$i=function(e){return e.type===1},kye=(function(){function e(t){var n=t.styles,a=t.bounds,r=yp(n.borderTopLeftRadius,a.width,a.height),s=r[0],o=r[1],i=yp(n.borderTopRightRadius,a.width,a.height),c=i[0],A=i[1],d=yp(n.borderBottomRightRadius,a.width,a.height),f=d[0],m=d[1],h=yp(n.borderBottomLeftRadius,a.width,a.height),v=h[0],y=h[1],g=[];g.push((s+c)/a.width),g.push((v+f)/a.width),g.push((o+y)/a.height),g.push((A+m)/a.height);var w=Math.max.apply(Math,g);w>1&&(s/=w,o/=w,c/=w,A/=w,f/=w,m/=w,v/=w,y/=w);var b=a.width-c,x=a.height-m,T=a.width-f,U=a.height-y,k=n.borderTopWidth,S=n.borderRightWidth,E=n.borderBottomWidth,C=n.borderLeftWidth,P=rr(n.paddingTop,t.bounds.width),F=rr(n.paddingRight,t.bounds.width),N=rr(n.paddingBottom,t.bounds.width),L=rr(n.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||o>0?gr(a.left+C/3,a.top+k/3,s-C/3,o-k/3,Na.TOP_LEFT):new ln(a.left+C/3,a.top+k/3),this.topRightBorderDoubleOuterBox=s>0||o>0?gr(a.left+b,a.top+k/3,c-S/3,A-k/3,Na.TOP_RIGHT):new ln(a.left+a.width-S/3,a.top+k/3),this.bottomRightBorderDoubleOuterBox=f>0||m>0?gr(a.left+T,a.top+x,f-S/3,m-E/3,Na.BOTTOM_RIGHT):new ln(a.left+a.width-S/3,a.top+a.height-E/3),this.bottomLeftBorderDoubleOuterBox=v>0||y>0?gr(a.left+C/3,a.top+U,v-C/3,y-E/3,Na.BOTTOM_LEFT):new ln(a.left+C/3,a.top+a.height-E/3),this.topLeftBorderDoubleInnerBox=s>0||o>0?gr(a.left+C*2/3,a.top+k*2/3,s-C*2/3,o-k*2/3,Na.TOP_LEFT):new ln(a.left+C*2/3,a.top+k*2/3),this.topRightBorderDoubleInnerBox=s>0||o>0?gr(a.left+b,a.top+k*2/3,c-S*2/3,A-k*2/3,Na.TOP_RIGHT):new ln(a.left+a.width-S*2/3,a.top+k*2/3),this.bottomRightBorderDoubleInnerBox=f>0||m>0?gr(a.left+T,a.top+x,f-S*2/3,m-E*2/3,Na.BOTTOM_RIGHT):new ln(a.left+a.width-S*2/3,a.top+a.height-E*2/3),this.bottomLeftBorderDoubleInnerBox=v>0||y>0?gr(a.left+C*2/3,a.top+U,v-C*2/3,y-E*2/3,Na.BOTTOM_LEFT):new ln(a.left+C*2/3,a.top+a.height-E*2/3),this.topLeftBorderStroke=s>0||o>0?gr(a.left+C/2,a.top+k/2,s-C/2,o-k/2,Na.TOP_LEFT):new ln(a.left+C/2,a.top+k/2),this.topRightBorderStroke=s>0||o>0?gr(a.left+b,a.top+k/2,c-S/2,A-k/2,Na.TOP_RIGHT):new ln(a.left+a.width-S/2,a.top+k/2),this.bottomRightBorderStroke=f>0||m>0?gr(a.left+T,a.top+x,f-S/2,m-E/2,Na.BOTTOM_RIGHT):new ln(a.left+a.width-S/2,a.top+a.height-E/2),this.bottomLeftBorderStroke=v>0||y>0?gr(a.left+C/2,a.top+U,v-C/2,y-E/2,Na.BOTTOM_LEFT):new ln(a.left+C/2,a.top+a.height-E/2),this.topLeftBorderBox=s>0||o>0?gr(a.left,a.top,s,o,Na.TOP_LEFT):new ln(a.left,a.top),this.topRightBorderBox=c>0||A>0?gr(a.left+b,a.top,c,A,Na.TOP_RIGHT):new ln(a.left+a.width,a.top),this.bottomRightBorderBox=f>0||m>0?gr(a.left+T,a.top+x,f,m,Na.BOTTOM_RIGHT):new ln(a.left+a.width,a.top+a.height),this.bottomLeftBorderBox=v>0||y>0?gr(a.left,a.top+U,v,y,Na.BOTTOM_LEFT):new ln(a.left,a.top+a.height),this.topLeftPaddingBox=s>0||o>0?gr(a.left+C,a.top+k,Math.max(0,s-C),Math.max(0,o-k),Na.TOP_LEFT):new ln(a.left+C,a.top+k),this.topRightPaddingBox=c>0||A>0?gr(a.left+Math.min(b,a.width-S),a.top+k,b>a.width+S?0:Math.max(0,c-S),Math.max(0,A-k),Na.TOP_RIGHT):new ln(a.left+a.width-S,a.top+k),this.bottomRightPaddingBox=f>0||m>0?gr(a.left+Math.min(T,a.width-C),a.top+Math.min(x,a.height-E),Math.max(0,f-S),Math.max(0,m-E),Na.BOTTOM_RIGHT):new ln(a.left+a.width-S,a.top+a.height-E),this.bottomLeftPaddingBox=v>0||y>0?gr(a.left+C,a.top+Math.min(U,a.height-E),Math.max(0,v-C),Math.max(0,y-E),Na.BOTTOM_LEFT):new ln(a.left+C,a.top+a.height-E),this.topLeftContentBox=s>0||o>0?gr(a.left+C+L,a.top+k+P,Math.max(0,s-(C+L)),Math.max(0,o-(k+P)),Na.TOP_LEFT):new ln(a.left+C+L,a.top+k+P),this.topRightContentBox=c>0||A>0?gr(a.left+Math.min(b,a.width+C+L),a.top+k+P,b>a.width+C+L?0:c-C+L,A-(k+P),Na.TOP_RIGHT):new ln(a.left+a.width-(S+F),a.top+k+P),this.bottomRightContentBox=f>0||m>0?gr(a.left+Math.min(T,a.width-(C+L)),a.top+Math.min(x,a.height+k+P),Math.max(0,f-(S+F)),m-(E+N),Na.BOTTOM_RIGHT):new ln(a.left+a.width-(S+F),a.top+a.height-(E+N)),this.bottomLeftContentBox=v>0||y>0?gr(a.left+C+L,a.top+U,Math.max(0,v-(C+L)),y-(E+N),Na.BOTTOM_LEFT):new ln(a.left+C+L,a.top+a.height-(E+N))}return e})(),Na;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Na||(Na={}));var gr=function(e,t,n,a,r){var s=4*((Math.sqrt(2)-1)/3),o=n*s,i=a*s,c=e+n,A=t+a;switch(r){case Na.TOP_LEFT:return new my(new ln(e,A),new ln(e,A-i),new ln(c-o,t),new ln(c,t));case Na.TOP_RIGHT:return new my(new ln(e,t),new ln(e+o,t),new ln(c,A-i),new ln(c,A));case Na.BOTTOM_RIGHT:return new my(new ln(c,t),new ln(c,t+i),new ln(e+o,A),new ln(e,A));case Na.BOTTOM_LEFT:default:return new my(new ln(c,A),new ln(c-o,A),new ln(e,t+i),new ln(e,t))}},Z_=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},Tye=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},e2=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},Iye=(function(){function e(t,n,a){this.offsetX=t,this.offsetY=n,this.matrix=a,this.type=0,this.target=6}return e})(),hy=(function(){function e(t,n){this.path=t,this.target=n,this.type=1}return e})(),Fye=(function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e})(),Pye=function(e){return e.type===0},WO=function(e){return e.type===1},Dye=function(e){return e.type===2},XU=function(e,t){return e.length===t.length?e.some(function(n,a){return n===t[a]}):!1},Uye=function(e,t,n,a,r){return e.map(function(s,o){switch(o){case 0:return s.add(t,n);case 1:return s.add(t+a,n);case 2:return s.add(t+a,n+r);case 3:return s.add(t,n+r)}return s})},jO=(function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e})(),qO=(function(){function e(t,n){if(this.container=t,this.parent=n,this.effects=[],this.curves=new kye(this.container),this.container.styles.opacity<1&&this.effects.push(new Fye(this.container.styles.opacity)),this.container.styles.transform!==null){var a=this.container.bounds.left+this.container.styles.transformOrigin[0].number,r=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new Iye(a,r,s))}if(this.container.styles.overflowX!==0){var o=Z_(this.curves),i=e2(this.curves);XU(o,i)?this.effects.push(new hy(o,6)):(this.effects.push(new hy(o,2)),this.effects.push(new hy(i,4)))}}return e.prototype.getEffects=function(t){for(var n=[2,3].indexOf(this.container.styles.position)===-1,a=this.parent,r=this.effects.slice(0);a;){var s=a.effects.filter(function(c){return!WO(c)});if(n||a.container.styles.position!==0||!a.parent){if(r.unshift.apply(r,s),n=[2,3].indexOf(a.container.styles.position)===-1,a.container.styles.overflowX!==0){var o=Z_(a.curves),i=e2(a.curves);XU(o,i)||r.unshift(new hy(i,6))}}else r.unshift.apply(r,s);a=a.parent}return r.filter(function(c){return As(c.target,t)})},e})(),kE=function(e,t,n,a){e.container.elements.forEach(function(r){var s=As(r.flags,4),o=As(r.flags,2),i=new qO(r,e);As(r.styles.display,2048)&&a.push(i);var c=As(r.flags,8)?[]:a;if(s||o){var A=s||r.styles.isPositioned()?n:t,d=new jO(i);if(r.styles.isPositioned()||r.styles.opacity<1||r.styles.isTransformed()){var f=r.styles.zIndex.order;if(f<0){var m=0;A.negativeZIndex.some(function(v,y){return f>v.element.container.styles.zIndex.order?(m=y,!1):m>0}),A.negativeZIndex.splice(m,0,d)}else if(f>0){var h=0;A.positiveZIndex.some(function(v,y){return f>=v.element.container.styles.zIndex.order?(h=y+1,!1):h>0}),A.positiveZIndex.splice(h,0,d)}else A.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else r.styles.isFloating()?A.nonPositionedFloats.push(d):A.nonPositionedInlineLevel.push(d);kE(i,d,s?d:n,c)}else r.styles.isInlineLevel()?t.inlineLevel.push(i):t.nonInlineLevel.push(i),kE(i,t,n,c);As(r.flags,8)&&YO(r,c)})},YO=function(e,t){for(var n=e instanceof xE?e.start:1,a=e instanceof xE?e.reversed:!1,r=0;r<t.length;r++){var s=t[r];s.container instanceof DO&&typeof s.container.value=="number"&&s.container.value!==0&&(n=s.container.value),s.listValue=k0(n,s.container.styles.listStyleType,!0),n+=a?-1:1}},Rye=function(e){var t=new qO(e,null),n=new jO(t),a=[];return kE(t,n,n,a),YO(t.container,a),n},JU=function(e,t){switch(t){case 0:return Ki(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return Ki(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return Ki(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return Ki(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},Nye=function(e,t){switch(t){case 0:return Ki(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return Ki(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return Ki(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return Ki(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},Vye=function(e,t){switch(t){case 0:return Ki(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return Ki(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return Ki(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return Ki(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},Lye=function(e,t){switch(t){case 0:return vy(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return vy(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return vy(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return vy(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},vy=function(e,t){var n=[];return $i(e)?n.push(e.subdivide(.5,!1)):n.push(e),$i(t)?n.push(t.subdivide(.5,!0)):n.push(t),n},Ki=function(e,t,n,a){var r=[];return $i(e)?r.push(e.subdivide(.5,!1)):r.push(e),$i(n)?r.push(n.subdivide(.5,!0)):r.push(n),$i(a)?r.push(a.subdivide(.5,!0).reverse()):r.push(a),$i(t)?r.push(t.subdivide(.5,!1).reverse()):r.push(t),r},XO=function(e){var t=e.bounds,n=e.styles;return t.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},t2=function(e){var t=e.styles,n=e.bounds,a=rr(t.paddingLeft,n.width),r=rr(t.paddingRight,n.width),s=rr(t.paddingTop,n.width),o=rr(t.paddingBottom,n.width);return n.add(a+t.borderLeftWidth,s+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+a+r),-(t.borderTopWidth+t.borderBottomWidth+s+o))},Mye=function(e,t){return e===0?t.bounds:e===2?t2(t):XO(t)},Oye=function(e,t){return e===0?t.bounds:e===2?t2(t):XO(t)},EC=function(e,t,n){var a=Mye(Nm(e.styles.backgroundOrigin,t),e),r=Oye(Nm(e.styles.backgroundClip,t),e),s=Hye(Nm(e.styles.backgroundSize,t),n,a),o=s[0],i=s[1],c=yp(Nm(e.styles.backgroundPosition,t),a.width-o,a.height-i),A=$ye(Nm(e.styles.backgroundRepeat,t),c,s,a,r),d=Math.round(a.left+c[0]),f=Math.round(a.top+c[1]);return[A,d,f,o,i]},km=function(e){return Wa(e)&&e.value===ih.AUTO},py=function(e){return typeof e=="number"},Hye=function(e,t,n){var a=t[0],r=t[1],s=t[2],o=e[0],i=e[1];if(!o)return[0,0];if(Zr(o)&&i&&Zr(i))return[rr(o,n.width),rr(i,n.height)];var c=py(s);if(Wa(o)&&(o.value===ih.CONTAIN||o.value===ih.COVER)){if(py(s)){var A=n.width/n.height;return A<s!=(o.value===ih.COVER)?[n.width,n.width/s]:[n.height*s,n.height]}return[n.width,n.height]}var d=py(a),f=py(r),m=d||f;if(km(o)&&(!i||km(i))){if(d&&f)return[a,r];if(!c&&!m)return[n.width,n.height];if(m&&c){var h=d?a:r*s,v=f?r:a/s;return[h,v]}var y=d?a:n.width,g=f?r:n.height;return[y,g]}if(c){var w=0,b=0;return Zr(o)?w=rr(o,n.width):Zr(i)&&(b=rr(i,n.height)),km(o)?w=b*s:(!i||km(i))&&(b=w/s),[w,b]}var x=null,T=null;if(Zr(o)?x=rr(o,n.width):i&&Zr(i)&&(T=rr(i,n.height)),x!==null&&(!i||km(i))&&(T=d&&f?x/a*r:n.height),T!==null&&km(o)&&(x=d&&f?T/r*a:n.width),x!==null&&T!==null)return[x,T];throw new Error("Unable to calculate background-size for element")},Nm=function(e,t){var n=e[t];return typeof n>"u"?e[0]:n},$ye=function(e,t,n,a,r){var s=t[0],o=t[1],i=n[0],c=n[1];switch(e){case 2:return[new ln(Math.round(a.left),Math.round(a.top+o)),new ln(Math.round(a.left+a.width),Math.round(a.top+o)),new ln(Math.round(a.left+a.width),Math.round(c+a.top+o)),new ln(Math.round(a.left),Math.round(c+a.top+o))];case 3:return[new ln(Math.round(a.left+s),Math.round(a.top)),new ln(Math.round(a.left+s+i),Math.round(a.top)),new ln(Math.round(a.left+s+i),Math.round(a.height+a.top)),new ln(Math.round(a.left+s),Math.round(a.height+a.top))];case 1:return[new ln(Math.round(a.left+s),Math.round(a.top+o)),new ln(Math.round(a.left+s+i),Math.round(a.top+o)),new ln(Math.round(a.left+s+i),Math.round(a.top+o+c)),new ln(Math.round(a.left+s),Math.round(a.top+o+c))];default:return[new ln(Math.round(r.left),Math.round(r.top)),new ln(Math.round(r.left+r.width),Math.round(r.top)),new ln(Math.round(r.left+r.width),Math.round(r.height+r.top)),new ln(Math.round(r.left),Math.round(r.height+r.top))]}},Qye="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",ZU="Hidden Text",Gye=(function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,n){var a=this._document.createElement("div"),r=this._document.createElement("img"),s=this._document.createElement("span"),o=this._document.body;a.style.visibility="hidden",a.style.fontFamily=t,a.style.fontSize=n,a.style.margin="0",a.style.padding="0",a.style.whiteSpace="nowrap",o.appendChild(a),r.src=Qye,r.width=1,r.height=1,r.style.margin="0",r.style.padding="0",r.style.verticalAlign="baseline",s.style.fontFamily=t,s.style.fontSize=n,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(ZU)),a.appendChild(s),a.appendChild(r);var i=r.offsetTop-s.offsetTop+2;a.removeChild(s),a.appendChild(this._document.createTextNode(ZU)),a.style.lineHeight="normal",r.style.verticalAlign="super";var c=r.offsetTop-a.offsetTop+2;return o.removeChild(a),{baseline:i,middle:c}},e.prototype.getMetrics=function(t,n){var a=t+" "+n;return typeof this._data[a]>"u"&&(this._data[a]=this.parseMetrics(t,n)),this._data[a]},e})(),JO=(function(){function e(t,n){this.context=t,this.options=n}return e})(),zye=1e4,Kye=(function(e){Xl(t,e);function t(n,a){var r=e.call(this,n,a)||this;return r._activeEffects=[],r.canvas=a.canvas?a.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),a.canvas||(r.canvas.width=Math.floor(a.width*a.scale),r.canvas.height=Math.floor(a.height*a.scale),r.canvas.style.width=a.width+"px",r.canvas.style.height=a.height+"px"),r.fontMetrics=new Gye(document),r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-a.x,-a.y),r.ctx.textBaseline="bottom",r._activeEffects=[],r.context.logger.debug("Canvas renderer initialized ("+a.width+"x"+a.height+") with scale "+a.scale),r}return t.prototype.applyEffects=function(n){for(var a=this;this._activeEffects.length;)this.popEffect();n.forEach(function(r){return a.applyEffect(r)})},t.prototype.applyEffect=function(n){this.ctx.save(),Dye(n)&&(this.ctx.globalAlpha=n.opacity),Pye(n)&&(this.ctx.translate(n.offsetX,n.offsetY),this.ctx.transform(n.matrix[0],n.matrix[1],n.matrix[2],n.matrix[3],n.matrix[4],n.matrix[5]),this.ctx.translate(-n.offsetX,-n.offsetY)),WO(n)&&(this.path(n.path),this.ctx.clip()),this._activeEffects.push(n)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(n){return Io(this,void 0,void 0,function(){var a;return to(this,function(r){switch(r.label){case 0:return a=n.element.container.styles,a.isVisible()?[4,this.renderStackContent(n)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(n){return Io(this,void 0,void 0,function(){return to(this,function(a){switch(a.label){case 0:if(As(n.container.flags,16))debugger;return n.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(n)]:[3,3];case 1:return a.sent(),[4,this.renderNodeContent(n)];case 2:a.sent(),a.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(n,a,r){var s=this;if(a===0)this.ctx.fillText(n.text,n.bounds.left,n.bounds.top+r);else{var o=dT(n.text);o.reduce(function(i,c){return s.ctx.fillText(c,i,n.bounds.top+r),i+s.ctx.measureText(c).width},n.bounds.left)}},t.prototype.createFontStyle=function(n){var a=n.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),r=Xye(n.fontFamily).join(", "),s=gg(n.fontSize)?""+n.fontSize.number+n.fontSize.unit:n.fontSize.number+"px";return[[n.fontStyle,a,n.fontWeight,s,r].join(" "),r,s]},t.prototype.renderTextNode=function(n,a){return Io(this,void 0,void 0,function(){var r,s,o,i,c,A,d,f,m=this;return to(this,function(h){return r=this.createFontStyle(a),s=r[0],o=r[1],i=r[2],this.ctx.font=s,this.ctx.direction=a.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(o,i),A=c.baseline,d=c.middle,f=a.paintOrder,n.textBounds.forEach(function(v){f.forEach(function(y){switch(y){case 0:m.ctx.fillStyle=Cs(a.color),m.renderTextWithLetterSpacing(v,a.letterSpacing,A);var g=a.textShadow;g.length&&v.text.trim().length&&(g.slice(0).reverse().forEach(function(w){m.ctx.shadowColor=Cs(w.color),m.ctx.shadowOffsetX=w.offsetX.number*m.options.scale,m.ctx.shadowOffsetY=w.offsetY.number*m.options.scale,m.ctx.shadowBlur=w.blur.number,m.renderTextWithLetterSpacing(v,a.letterSpacing,A)}),m.ctx.shadowColor="",m.ctx.shadowOffsetX=0,m.ctx.shadowOffsetY=0,m.ctx.shadowBlur=0),a.textDecorationLine.length&&(m.ctx.fillStyle=Cs(a.textDecorationColor||a.color),a.textDecorationLine.forEach(function(w){switch(w){case 1:m.ctx.fillRect(v.bounds.left,Math.round(v.bounds.top+A),v.bounds.width,1);break;case 2:m.ctx.fillRect(v.bounds.left,Math.round(v.bounds.top),v.bounds.width,1);break;case 3:m.ctx.fillRect(v.bounds.left,Math.ceil(v.bounds.top+d),v.bounds.width,1);break}}));break;case 1:a.webkitTextStrokeWidth&&v.text.trim().length&&(m.ctx.strokeStyle=Cs(a.webkitTextStrokeColor),m.ctx.lineWidth=a.webkitTextStrokeWidth,m.ctx.lineJoin=window.chrome?"miter":"round",m.ctx.strokeText(v.text,v.bounds.left,v.bounds.top+A)),m.ctx.strokeStyle="",m.ctx.lineWidth=0,m.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(n,a,r){if(r&&n.intrinsicWidth>0&&n.intrinsicHeight>0){var s=t2(n),o=e2(a);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(r,0,0,n.intrinsicWidth,n.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(n){return Io(this,void 0,void 0,function(){var a,r,s,o,i,c,b,b,A,d,f,m,T,h,v,U,y,g,w,b,x,T,U;return to(this,function(k){switch(k.label){case 0:this.applyEffects(n.getEffects(4)),a=n.container,r=n.curves,s=a.styles,o=0,i=a.textNodes,k.label=1;case 1:return o<i.length?(c=i[o],[4,this.renderTextNode(c,s)]):[3,4];case 2:k.sent(),k.label=3;case 3:return o++,[3,1];case 4:if(!(a instanceof IO))return[3,8];k.label=5;case 5:return k.trys.push([5,7,,8]),[4,this.context.cache.match(a.src)];case 6:return b=k.sent(),this.renderReplacedElement(a,r,b),[3,8];case 7:return k.sent(),this.context.logger.error("Error loading image "+a.src),[3,8];case 8:if(a instanceof FO&&this.renderReplacedElement(a,r,a.canvas),!(a instanceof PO))return[3,12];k.label=9;case 9:return k.trys.push([9,11,,12]),[4,this.context.cache.match(a.svg)];case 10:return b=k.sent(),this.renderReplacedElement(a,r,b),[3,12];case 11:return k.sent(),this.context.logger.error("Error loading svg "+a.svg.substring(0,255)),[3,12];case 12:return a instanceof NO&&a.tree?(A=new t(this.context,{scale:this.options.scale,backgroundColor:a.backgroundColor,x:0,y:0,width:a.width,height:a.height}),[4,A.render(a.tree)]):[3,14];case 13:d=k.sent(),a.width&&a.height&&this.ctx.drawImage(d,0,0,a.width,a.height,a.bounds.left,a.bounds.top,a.bounds.width,a.bounds.height),k.label=14;case 14:if(a instanceof AT&&(f=Math.min(a.bounds.width,a.bounds.height),a.type===q_?a.checked&&(this.ctx.save(),this.path([new ln(a.bounds.left+f*.39363,a.bounds.top+f*.79),new ln(a.bounds.left+f*.16,a.bounds.top+f*.5549),new ln(a.bounds.left+f*.27347,a.bounds.top+f*.44071),new ln(a.bounds.left+f*.39694,a.bounds.top+f*.5649),new ln(a.bounds.left+f*.72983,a.bounds.top+f*.23),new ln(a.bounds.left+f*.84,a.bounds.top+f*.34085),new ln(a.bounds.left+f*.39363,a.bounds.top+f*.79)]),this.ctx.fillStyle=Cs(OU),this.ctx.fill(),this.ctx.restore()):a.type===Y_&&a.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(a.bounds.left+f/2,a.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=Cs(OU),this.ctx.fill(),this.ctx.restore())),Wye(a)&&a.value.length){switch(m=this.createFontStyle(s),T=m[0],h=m[1],v=this.fontMetrics.getMetrics(T,h).baseline,this.ctx.font=T,this.ctx.fillStyle=Cs(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=qye(a.styles.textAlign),U=t2(a),y=0,a.styles.textAlign){case 1:y+=U.width/2;break;case 2:y+=U.width;break}g=U.add(y,0,0,-U.height/2+1),this.ctx.save(),this.path([new ln(U.left,U.top),new ln(U.left+U.width,U.top),new ln(U.left+U.width,U.top+U.height),new ln(U.left,U.top+U.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new $p(a.value,g),s.letterSpacing,v),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!As(a.styles.display,2048))return[3,20];if(a.styles.listStyleImage===null)return[3,19];if(w=a.styles.listStyleImage,w.type!==0)return[3,18];b=void 0,x=w.url,k.label=15;case 15:return k.trys.push([15,17,,18]),[4,this.context.cache.match(x)];case 16:return b=k.sent(),this.ctx.drawImage(b,a.bounds.left-(b.width+10),a.bounds.top),[3,18];case 17:return k.sent(),this.context.logger.error("Error loading list-style-image "+x),[3,18];case 18:return[3,20];case 19:n.listValue&&a.styles.listStyleType!==-1&&(T=this.createFontStyle(s)[0],this.ctx.font=T,this.ctx.fillStyle=Cs(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",U=new Bc(a.bounds.left,a.bounds.top+rr(a.styles.paddingTop,a.bounds.width),a.bounds.width,xU(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new $p(n.listValue,U),s.letterSpacing,xU(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),k.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(n){return Io(this,void 0,void 0,function(){var a,r,w,s,o,w,i,c,w,A,d,w,f,m,w,h,v,w,y,g,w;return to(this,function(b){switch(b.label){case 0:if(As(n.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(n.element)];case 1:b.sent(),a=0,r=n.negativeZIndex,b.label=2;case 2:return a<r.length?(w=r[a],[4,this.renderStack(w)]):[3,5];case 3:b.sent(),b.label=4;case 4:return a++,[3,2];case 5:return[4,this.renderNodeContent(n.element)];case 6:b.sent(),s=0,o=n.nonInlineLevel,b.label=7;case 7:return s<o.length?(w=o[s],[4,this.renderNode(w)]):[3,10];case 8:b.sent(),b.label=9;case 9:return s++,[3,7];case 10:i=0,c=n.nonPositionedFloats,b.label=11;case 11:return i<c.length?(w=c[i],[4,this.renderStack(w)]):[3,14];case 12:b.sent(),b.label=13;case 13:return i++,[3,11];case 14:A=0,d=n.nonPositionedInlineLevel,b.label=15;case 15:return A<d.length?(w=d[A],[4,this.renderStack(w)]):[3,18];case 16:b.sent(),b.label=17;case 17:return A++,[3,15];case 18:f=0,m=n.inlineLevel,b.label=19;case 19:return f<m.length?(w=m[f],[4,this.renderNode(w)]):[3,22];case 20:b.sent(),b.label=21;case 21:return f++,[3,19];case 22:h=0,v=n.zeroOrAutoZIndexOrTransformedOrOpacity,b.label=23;case 23:return h<v.length?(w=v[h],[4,this.renderStack(w)]):[3,26];case 24:b.sent(),b.label=25;case 25:return h++,[3,23];case 26:y=0,g=n.positiveZIndex,b.label=27;case 27:return y<g.length?(w=g[y],[4,this.renderStack(w)]):[3,30];case 28:b.sent(),b.label=29;case 29:return y++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(n){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(n.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(n){this.ctx.beginPath(),this.formatPath(n),this.ctx.closePath()},t.prototype.formatPath=function(n){var a=this;n.forEach(function(r,s){var o=$i(r)?r.start:r;s===0?a.ctx.moveTo(o.x,o.y):a.ctx.lineTo(o.x,o.y),$i(r)&&a.ctx.bezierCurveTo(r.startControl.x,r.startControl.y,r.endControl.x,r.endControl.y,r.end.x,r.end.y)})},t.prototype.renderRepeat=function(n,a,r,s){this.path(n),this.ctx.fillStyle=a,this.ctx.translate(r,s),this.ctx.fill(),this.ctx.translate(-r,-s)},t.prototype.resizeImage=function(n,a,r){var s;if(n.width===a&&n.height===r)return n;var o=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,i=o.createElement("canvas");i.width=Math.max(1,a),i.height=Math.max(1,r);var c=i.getContext("2d");return c.drawImage(n,0,0,n.width,n.height,0,0,a,r),i},t.prototype.renderBackgroundImage=function(n){return Io(this,void 0,void 0,function(){var a,r,s,o,i,c;return to(this,function(A){switch(A.label){case 0:a=n.styles.backgroundImage.length-1,r=function(d){var f,m,h,P,Q,Z,L,ie,E,v,P,Q,Z,L,ie,y,g,w,b,x,T,U,k,S,E,C,P,F,N,L,ie,le,Q,Z,ce,J,se,G,D,j,ne,H;return to(this,function(te){switch(te.label){case 0:if(d.type!==0)return[3,5];f=void 0,m=d.url,te.label=1;case 1:return te.trys.push([1,3,,4]),[4,s.context.cache.match(m)];case 2:return f=te.sent(),[3,4];case 3:return te.sent(),s.context.logger.error("Error loading background-image "+m),[3,4];case 4:return f&&(h=EC(n,a,[f.width,f.height,f.width/f.height]),P=h[0],Q=h[1],Z=h[2],L=h[3],ie=h[4],E=s.ctx.createPattern(s.resizeImage(f,L,ie),"repeat"),s.renderRepeat(P,E,Q,Z)),[3,6];case 5:P0e(d)?(v=EC(n,a,[null,null,null]),P=v[0],Q=v[1],Z=v[2],L=v[3],ie=v[4],y=B0e(d.angle,L,ie),g=y[0],w=y[1],b=y[2],x=y[3],T=y[4],U=document.createElement("canvas"),U.width=L,U.height=ie,k=U.getContext("2d"),S=k.createLinearGradient(w,x,b,T),wU(d.stops,g).forEach(function(Y){return S.addColorStop(Y.stop,Cs(Y.color))}),k.fillStyle=S,k.fillRect(0,0,L,ie),L>0&&ie>0&&(E=s.ctx.createPattern(U,"repeat"),s.renderRepeat(P,E,Q,Z))):D0e(d)&&(C=EC(n,a,[null,null,null]),P=C[0],F=C[1],N=C[2],L=C[3],ie=C[4],le=d.position.length===0?[lT]:d.position,Q=rr(le[0],L),Z=rr(le[le.length-1],ie),ce=k0e(d,Q,Z,L,ie),J=ce[0],se=ce[1],J>0&&se>0&&(G=s.ctx.createRadialGradient(F+Q,N+Z,0,F+Q,N+Z,J),wU(d.stops,J*2).forEach(function(Y){return G.addColorStop(Y.stop,Cs(Y.color))}),s.path(P),s.ctx.fillStyle=G,J!==se?(D=n.bounds.left+.5*n.bounds.width,j=n.bounds.top+.5*n.bounds.height,ne=se/J,H=1/ne,s.ctx.save(),s.ctx.translate(D,j),s.ctx.transform(1,0,0,ne,0,0),s.ctx.translate(-D,-j),s.ctx.fillRect(F,H*(N-j)+j,L,ie*H),s.ctx.restore()):s.ctx.fill())),te.label=6;case 6:return a--,[2]}})},s=this,o=0,i=n.styles.backgroundImage.slice(0).reverse(),A.label=1;case 1:return o<i.length?(c=i[o],[5,r(c)]):[3,4];case 2:A.sent(),A.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(n,a,r){return Io(this,void 0,void 0,function(){return to(this,function(s){return this.path(JU(r,a)),this.ctx.fillStyle=Cs(n),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(n,a,r,s){return Io(this,void 0,void 0,function(){var o,i;return to(this,function(c){switch(c.label){case 0:return a<3?[4,this.renderSolidBorder(n,r,s)]:[3,2];case 1:return c.sent(),[2];case 2:return o=Nye(s,r),this.path(o),this.ctx.fillStyle=Cs(n),this.ctx.fill(),i=Vye(s,r),this.path(i),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(n){return Io(this,void 0,void 0,function(){var a,r,s,o,i,c,A,d,f=this;return to(this,function(m){switch(m.label){case 0:return this.applyEffects(n.getEffects(2)),a=n.container.styles,r=!xd(a.backgroundColor)||a.backgroundImage.length,s=[{style:a.borderTopStyle,color:a.borderTopColor,width:a.borderTopWidth},{style:a.borderRightStyle,color:a.borderRightColor,width:a.borderRightWidth},{style:a.borderBottomStyle,color:a.borderBottomColor,width:a.borderBottomWidth},{style:a.borderLeftStyle,color:a.borderLeftColor,width:a.borderLeftWidth}],o=jye(Nm(a.backgroundClip,0),n.curves),r||a.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),xd(a.backgroundColor)||(this.ctx.fillStyle=Cs(a.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(n.container)]):[3,2];case 1:m.sent(),this.ctx.restore(),a.boxShadow.slice(0).reverse().forEach(function(h){f.ctx.save();var v=Z_(n.curves),y=h.inset?0:zye,g=Uye(v,-y+(h.inset?1:-1)*h.spread.number,(h.inset?1:-1)*h.spread.number,h.spread.number*(h.inset?-2:2),h.spread.number*(h.inset?-2:2));h.inset?(f.path(v),f.ctx.clip(),f.mask(g)):(f.mask(v),f.ctx.clip(),f.path(g)),f.ctx.shadowOffsetX=h.offsetX.number+y,f.ctx.shadowOffsetY=h.offsetY.number,f.ctx.shadowColor=Cs(h.color),f.ctx.shadowBlur=h.blur.number,f.ctx.fillStyle=h.inset?Cs(h.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),m.label=2;case 2:i=0,c=0,A=s,m.label=3;case 3:return c<A.length?(d=A[c],d.style!==0&&!xd(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,i,n.curves,2)]:[3,11]):[3,13];case 4:return m.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,i,n.curves,3)];case 6:return m.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,i,n.curves)];case 8:return m.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,i,n.curves)];case 10:m.sent(),m.label=11;case 11:i++,m.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(n,a,r,s,o){return Io(this,void 0,void 0,function(){var i,c,A,d,f,m,h,v,y,g,w,b,x,T,U,k,U,k;return to(this,function(S){return this.ctx.save(),i=Lye(s,r),c=JU(s,r),o===2&&(this.path(c),this.ctx.clip()),$i(c[0])?(A=c[0].start.x,d=c[0].start.y):(A=c[0].x,d=c[0].y),$i(c[1])?(f=c[1].end.x,m=c[1].end.y):(f=c[1].x,m=c[1].y),r===0||r===2?h=Math.abs(A-f):h=Math.abs(d-m),this.ctx.beginPath(),o===3?this.formatPath(i):this.formatPath(c.slice(0,2)),v=a<3?a*3:a*2,y=a<3?a*2:a,o===3&&(v=a,y=a),g=!0,h<=v*2?g=!1:h<=v*2+y?(w=h/(2*v+y),v*=w,y*=w):(b=Math.floor((h+y)/(v+y)),x=(h-b*v)/(b-1),T=(h-(b+1)*v)/b,y=T<=0||Math.abs(y-x)<Math.abs(y-T)?x:T),g&&(o===3?this.ctx.setLineDash([0,v+y]):this.ctx.setLineDash([v,y])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=a):this.ctx.lineWidth=a*2+1.1,this.ctx.strokeStyle=Cs(n),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&($i(c[0])&&(U=c[3],k=c[0],this.ctx.beginPath(),this.formatPath([new ln(U.end.x,U.end.y),new ln(k.start.x,k.start.y)]),this.ctx.stroke()),$i(c[1])&&(U=c[1],k=c[2],this.ctx.beginPath(),this.formatPath([new ln(U.end.x,U.end.y),new ln(k.start.x,k.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(n){return Io(this,void 0,void 0,function(){var a;return to(this,function(r){switch(r.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Cs(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),a=Rye(n),[4,this.renderStack(a)];case 1:return r.sent(),this.applyEffects([]),[2,this.canvas]}})})},t})(JO),Wye=function(e){return e instanceof RO||e instanceof UO?!0:e instanceof AT&&e.type!==Y_&&e.type!==q_},jye=function(e,t){switch(e){case 0:return Z_(t);case 2:return Tye(t);case 1:default:return e2(t)}},qye=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},Yye=["-apple-system","system-ui"],Xye=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return Yye.indexOf(t)===-1}):e},Jye=(function(e){Xl(t,e);function t(n,a){var r=e.call(this,n,a)||this;return r.canvas=a.canvas?a.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),r.options=a,r.canvas.width=Math.floor(a.width*a.scale),r.canvas.height=Math.floor(a.height*a.scale),r.canvas.style.width=a.width+"px",r.canvas.style.height=a.height+"px",r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-a.x,-a.y),r.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+a.width+"x"+a.height+" at "+a.x+","+a.y+") with scale "+a.scale),r}return t.prototype.render=function(n){return Io(this,void 0,void 0,function(){var a,r;return to(this,function(s){switch(s.label){case 0:return a=bE(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,n),[4,Zye(a)];case 1:return r=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Cs(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(r,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t})(JO),Zye=function(e){return new Promise(function(t,n){var a=new Image;a.onload=function(){t(a)},a.onerror=n,a.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},e_e=(function(){function e(t){var n=t.id,a=t.enabled;this.id=n,this.enabled=a,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,q1([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,q1([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,q1([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,q1([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e})(),t_e=(function(){function e(t,n){var a;this.windowBounds=n,this.instanceName="#"+e.instanceCount++,this.logger=new e_e({id:this.instanceName,enabled:t.logging}),this.cache=(a=t.cache)!==null&&a!==void 0?a:new wye(this,t)}return e.instanceCount=1,e})(),n_e=function(e,t){return t===void 0&&(t={}),a_e(e,t)};typeof window<"u"&&KO.setContext(window);var a_e=function(e,t){return Io(void 0,void 0,void 0,function(){var n,a,r,s,o,i,c,A,d,f,m,h,v,y,g,w,b,x,T,U,S,k,S,E,C,P,F,N,L,ie,le,Q,Z,ce,J,se,G,D,j,ne;return to(this,function(H){switch(H.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(n=e.ownerDocument,!n)throw new Error("Element is not attached to a Document");if(a=n.defaultView,!a)throw new Error("Document is not attached to a Window");return r={allowTaint:(E=t.allowTaint)!==null&&E!==void 0?E:!1,imageTimeout:(C=t.imageTimeout)!==null&&C!==void 0?C:15e3,proxy:t.proxy,useCORS:(P=t.useCORS)!==null&&P!==void 0?P:!1},s=iE({logging:(F=t.logging)!==null&&F!==void 0?F:!0,cache:t.cache},r),o={windowWidth:(N=t.windowWidth)!==null&&N!==void 0?N:a.innerWidth,windowHeight:(L=t.windowHeight)!==null&&L!==void 0?L:a.innerHeight,scrollX:(ie=t.scrollX)!==null&&ie!==void 0?ie:a.pageXOffset,scrollY:(le=t.scrollY)!==null&&le!==void 0?le:a.pageYOffset},i=new Bc(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),c=new t_e(s,i),A=(Q=t.foreignObjectRendering)!==null&&Q!==void 0?Q:!1,d={allowTaint:(Z=t.allowTaint)!==null&&Z!==void 0?Z:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:A,copyStyles:A},c.logger.debug("Starting document clone with size "+i.width+"x"+i.height+" scrolled to "+-i.left+","+-i.top),f=new qU(c,e,d),m=f.clonedReferenceElement,m?[4,f.toIFrame(n,i)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return h=H.sent(),v=fT(m)||rye(m)?Uve(m.ownerDocument):xw(c,m),y=v.width,g=v.height,w=v.left,b=v.top,x=r_e(c,m,t.backgroundColor),T={canvas:t.canvas,backgroundColor:x,scale:(J=(ce=t.scale)!==null&&ce!==void 0?ce:a.devicePixelRatio)!==null&&J!==void 0?J:1,x:((se=t.x)!==null&&se!==void 0?se:0)+w,y:((G=t.y)!==null&&G!==void 0?G:0)+b,width:(D=t.width)!==null&&D!==void 0?D:Math.ceil(y),height:(j=t.height)!==null&&j!==void 0?j:Math.ceil(g)},A?(c.logger.debug("Document cloned, using foreign object rendering"),S=new Jye(c,T),[4,S.render(m)]):[3,3];case 2:return U=H.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+w+","+b+" with size "+y+"x"+g+" using computed rendering"),c.logger.debug("Starting DOM parsing"),k=LO(c,m),x===k.styles.backgroundColor&&(k.styles.backgroundColor=hc.TRANSPARENT),c.logger.debug("Starting renderer for element at "+T.x+","+T.y+" with size "+T.width+"x"+T.height),S=new Kye(c,T),[4,S.render(k)];case 4:U=H.sent(),H.label=5;case 5:return(!((ne=t.removeContainer)!==null&&ne!==void 0)||ne)&&(qU.destroy(h)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,U]}})})},r_e=function(e,t,n){var a=t.ownerDocument,r=a.documentElement?Op(e,getComputedStyle(a.documentElement).backgroundColor):hc.TRANSPARENT,s=a.body?Op(e,getComputedStyle(a.body).backgroundColor):hc.TRANSPARENT,o=typeof n=="string"?Op(e,n):n===null?hc.TRANSPARENT:4294967295;return t===a.documentElement?xd(r)?xd(s)?o:s:r:o};class s_e{constructor(){this.languagePatterns={gujarati:/[\u0A80-\u0AFF]/,devanagari:/[\u0900-\u097F]/,kannada:/[\u0C80-\u0CFF]/,malayalam:/[\u0D00-\u0D7F]/,telugu:/[\u0C00-\u0C7F]/,tamil:/[\u0B80-\u0BFF]/,english:/^[A-Za-z0-9\s.,;:!?\-'"()]+$/},this.languageFonts={gujarati:'"Noto Sans Gujarati", "Shruti", "Gujarati Sangam MN", sans-serif',hindi:'"Noto Sans Devanagari", "Mangal", "Devanagari Sangam MN", sans-serif',marathi:'"Noto Sans Devanagari", "Mangal", "Devanagari Sangam MN", sans-serif',devanagari:'"Noto Sans Devanagari", "Mangal", "Devanagari Sangam MN", sans-serif',kannada:'"Noto Sans Kannada", "Tunga", "Kannada Sangam MN", sans-serif',malayalam:'"Noto Sans Malayalam", "Kartika", "Malayalam Sangam MN", sans-serif',telugu:'"Noto Sans Telugu", "Gautami", "Telugu Sangam MN", sans-serif',tamil:'"Noto Sans Tamil", "Latha", "Tamil Sangam MN", sans-serif'}}detectLanguage(t){return!t||typeof t!="string"?null:this.languagePatterns.gujarati.test(t)?"gujarati":this.languagePatterns.kannada.test(t)?"kannada":this.languagePatterns.malayalam.test(t)?"malayalam":this.languagePatterns.telugu.test(t)?"telugu":this.languagePatterns.tamil.test(t)?"tamil":this.languagePatterns.devanagari.test(t)?"hindi":(this.languagePatterns.english.test(t),"english")}getFixedContainerDimensions(t){switch(t?.toLowerCase()){case"letter":case"legal":return{width:580,minHeight:45,fontSize:17};case"a4":default:return{width:520,minHeight:40,fontSize:16}}}getMaxWidthForPageSize(t){switch(t?.toLowerCase()){case"letter":return 530;case"legal":return 530;case"a4":default:return 480}}createHtmlTemplate(t,n,a={},r="A4"){const s=this.getFixedContainerDimensions(r),o=a.fontSize||s.fontSize,i=a.color||"#2d3748",c=this.languageFonts[n]||this.languageFonts.devanagari,A=a.lineHeight||1.4,d=a.textAlign||"left",f=a.padding||3;return`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="UTF-8">
        <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Gujarati:wght@400;500&family=Noto+Sans+Devanagari:wght@400;500&family=Noto+Sans+Kannada:wght@400;500&family=Noto+Sans+Malayalam:wght@400;500&family=Noto+Sans+Telugu:wght@400;500&family=Noto+Sans+Tamil:wght@400;500&display=swap" rel="stylesheet">
        <style>
          * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
          }
          
          body {
            font-family: ${c};
            font-size: ${o}px;
            color: ${i};
            line-height: ${A};
            text-align: ${d};
            background: white;
            -webkit-font-smoothing: antialiased;
            text-rendering: optimizeLegibility;
            padding: ${f}px;
            width: ${s.width}px; /* Fixed width for consistency */
            min-height: ${s.minHeight}px; /* Minimum height for consistency */
            /* Remove fixed height and overflow hidden to allow dynamic content */
            display: flex;
            align-items: flex-start; /* Align content to top instead of center */
          }
          
          .text-content {
            word-wrap: break-word;
            overflow-wrap: break-word;
            width: 100%;
            /* Remove text-overflow ellipsis to show all content */
          }
        </style>
      </head>
      <body>
        <div class="text-content">${t.replace(/\n/g,"<br>")}</div>
      </body>
      </html>
    `}async renderTextAsImage(t,n,a={},r="A4"){return new Promise((s,o)=>{try{const i=document.createElement("iframe");i.style.cssText=`
          position: absolute;
          top: -10000px;
          left: -10000px;
          width: 800px;
          height: 600px;
          border: none;
          visibility: hidden;
        `,document.body.appendChild(i);const c=i.contentDocument||i.contentWindow.document,A=this.createHtmlTemplate(t,n,a,r);c.open(),c.write(A),c.close(),this.waitForFontsToLoad(c).then(()=>{try{const d=this.getFixedContainerDimensions(r),f=c.body,m=d.width,v=Math.max(f.offsetHeight,d.minHeight),y=a.scale||2;n_e(c.body,{width:m,height:v,scale:y,useCORS:!0,allowTaint:!1,backgroundColor:"white"}).then(g=>{const w=g.toDataURL("image/png");document.body.removeChild(i),s(w)}).catch(g=>{console.error("Canvas rendering failed:",g),document.body.removeChild(i),s(null)})}catch(d){console.error("Text rendering failed:",d),document.body.removeChild(i),s(null)}})}catch(i){console.error("Error in renderTextAsImage:",i),o(i)}})}waitForFontsToLoad(t){return new Promise(n=>{t.fonts&&t.fonts.ready?t.fonts.ready.then(()=>{setTimeout(n,100)}):setTimeout(n,500)})}async processTextForPdf(t,n={},a="A4",r=!1){if(!t)return{content:{text:"",style:n},success:!0,isRegional:!1};const s=this.detectLanguage(t);if(r||!["gujarati","hindi","marathi","kannada","malayalam","telugu","tamil"].includes(s))return{content:{text:t,style:n},success:!0,isRegional:!1};try{const o=await this.renderTextAsImage(t,s,{fontSize:n.fontSize||8,color:n.color||"#2d3748",lineHeight:n.lineHeight||1.4},a);return o?{content:{image:o,margin:n.margin||[0,0,0,0]},success:!0,isRegional:!0}:{content:{text:t,style:n},success:!1,isRegional:!1,error:"Regional text rendering failed"}}catch(o){return console.error("Regional text processing failed:",o),{content:{text:t,style:n},success:!1,isRegional:!1,error:o.message}}}}const ap=async e=>{try{const n=await(await fetch(e)).blob();return new Promise((a,r)=>{const s=new FileReader;s.readAsDataURL(n),s.onload=()=>a(s.result),s.onerror=o=>r(o)})}catch(t){throw console.error("Error converting URL to base64:",t),t}},sv=async e=>{try{return{data:(await dt.get(`/print/${e}`)).data.data.config,error:null}}catch(t){return t?.response?.status===404?(console.log("No print configurations found for doctor ID:",e,"- this is normal for new users"),{data:null,error:null,isNewUser:!0}):(console.error("Error fetching print details:",t),{data:null,error:t,isNewUser:!1})}},Fo=typeof navigator<"u"&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),ZO=async(e,t)=>{try{const n=new FormData;return n.append("file",t),{data:(await dt.post(`/print/${e}/header-image`,n,{transformRequest:[(r,s)=>(delete s["Content-Type"],r)]})).data.data,error:null}}catch(n){return console.error("Error uploading header image:",n),{data:null,error:n}}},dd=async(e,t=null)=>{if(t){const{createFileURL:r}=await xr(async()=>{const{createFileURL:o}=await Promise.resolve().then(()=>sR);return{createFileURL:o}},void 0,import.meta.url),s=`doctorHeaderImages/${t}`;return await r(s,"/api/print/header-image-file")}const{getCurrentServerURL:n}=await xr(async()=>{const{getCurrentServerURL:r}=await Promise.resolve().then(()=>sR);return{getCurrentServerURL:r}},void 0,import.meta.url);return`${await n()}/api/print/${e}/header-image`},eH=async e=>{try{return{data:(await dt.delete(`/print/${e}/header-image`)).data,error:null}}catch(t){return console.error("Error deleting header image:",t),{data:null,error:t}}},o_e=Object.freeze(Object.defineProperty({__proto__:null,deletePrescriptionHeaderImage:eH,fetchPrintConfigs:sv,getPrescriptionHeaderImageUrl:dd,isMobile:Fo,uploadPrescriptionHeaderImage:ZO},Symbol.toStringTag,{value:"Module"}));let ls;const CA=async()=>{if(!ls)try{const[e,t]=await Promise.all([xr(()=>import("./pdfmake-Bi4Iny7u.js").then(a=>a.p),[],import.meta.url),xr(()=>import("./vfs_fonts-DjCR6HxT.js").then(a=>a.v),[],import.meta.url)]);ls=e.default||e;const n=t.default||t;n.pdfMake&&n.pdfMake.vfs?ls.vfs=n.pdfMake.vfs:n.vfs?ls.vfs=n.vfs:(typeof n=="object"&&n["Roboto-Regular.ttf"],ls.vfs=n),console.log("PDFMake initialized successfully with VFS fonts")}catch(e){throw console.error("Failed to initialize PDFMake:",e),new Error("PDFMake initialization failed")}};class i_e{constructor(){this.regionalTextRenderer=new s_e,this.styles={clinicHeader:{fontSize:24,color:"#1a472a",alignment:"center",margin:[0,0,0,5]},doctorName:{fontSize:20,color:"#2d5aa0",margin:[0,0,0,3]},doctorCredentials:{fontSize:14,color:"#4a5568",margin:[0,0,0,2]},registrationInfo:{fontSize:12,color:"#718096",margin:[0,0,0,8]},prescriptionHeader:{fontSize:28,color:"#1a202c",alignment:"center",margin:[0,0,0,25]},patientSectionTitle:{fontSize:12,color:"#2d5aa0",margin:[12,3,12,3],padding:[8,4,8,4],alignment:"left"},patientLabel:{fontSize:11,color:"#4a5568"},patientValue:{fontSize:12,color:"#1a202c",margin:[0,2,0,0]},patientInlineInfo:{fontSize:11,color:"#4a5568",lineHeight:1.3,margin:[0,0,0,0]},medicalSectionTitle:{fontSize:12,color:"#2d5aa0",margin:[12,3,12,3],padding:[8,4,8,4],alignment:"left"},vitalLabel:{fontSize:12,color:"#2b6cb0"},vitalValue:{fontSize:12,color:"#1a202c",margin:[0,1,0,2]},diagnosisText:{fontSize:12,color:"#2d3748",lineHeight:1.2,margin:[0,0,0,0]},clinicalNotesText:{fontSize:12,color:"#2d3748",lineHeight:1.2,margin:[0,0,0,0]},prescriptionTableHeader:{fontSize:11,color:"#2d3748",margin:[8,8,8,8]},medicineNumber:{fontSize:18,color:"#2b6cb0",margin:[5,5,5,5]},cleanMedicineName:{fontSize:12,color:"#1a202c",margin:[0,0,0,4]},saltComposition:{fontSize:11,color:"#1a202c",margin:[0,0,0,4]},cleanMedicineDetails:{fontSize:12,color:"#4a5568",margin:[0,0,0,0]},cleanFieldLabel:{fontSize:12,color:"#2b6cb0",margin:[0,0,0,2]},cleanFieldValue:{fontSize:11,color:"#2d3748",margin:[0,0,0,0]},dosageInstructionsTitle:{fontSize:12,color:"#4a5568",margin:[0,3,0,5]},cleanDosageItem:{fontSize:12,color:"#2d3748",margin:[0,3,0,3],lineHeight:1.3},medicineName:{fontSize:14,color:"#1a202c",margin:[0,2,0,2]},medicineStrength:{fontSize:12,color:"#2b6cb0",margin:[0,1,0,2]},medicineComposition:{fontSize:10,color:"#718096",margin:[0,0,0,5]},dosageInstruction:{fontSize:11,color:"#2d3748",margin:[3,2,3,2],border:[!0,!0,!0,!0],borderColor:["#e2e8f0","#e2e8f0","#e2e8f0","#e2e8f0"],padding:[4,2,4,2]},durationText:{fontSize:9,color:"#c53030",alignment:"center",margin:[3,4,3,4],fillColor:"#fed7d7",border:[!0,!0,!0,!0],borderColor:["#fc8181","#fc8181","#fc8181","#fc8181"],borderWidth:[1,1,1,1]},instructionsText:{fontSize:11,color:"#4a5568",margin:[5,5,5,5]},medicalAdviceTitle:{fontSize:12,color:"#2d5aa0",margin:[12,3,12,3],padding:[8,4,8,4],alignment:"left"},adviceText:{fontSize:12,color:"#2d3748",lineHeight:1.2,margin:[0,0,0,0]},followupTitle:{fontSize:12,color:"#4a5568",margin:[0,3,0,3]},followupText:{fontSize:12,color:"#4a5568",margin:[0,2,0,0]},translationTitle:{fontSize:12,color:"#4a5568",margin:[15,5,15,3]},translatedText:{fontSize:12,color:"#4a5568",lineHeight:1.3,margin:[15,0,15,8]},medicalFooter:{fontSize:9,color:"#718096",alignment:"center",margin:[0,10,0,0]},disclaimer:{fontSize:9,color:"#6b7280",alignment:"center",lineHeight:1.3,margin:[0,3,0,3]},receiptTitle:{fontSize:20,color:"#2d5aa0",alignment:"center",margin:[0,5,0,10]},sectionHeader:{fontSize:12,color:"#2d5aa0",margin:[0,5,0,5],bold:!0},patientInfo:{fontSize:11,color:"#1a202c",margin:[5,2,5,2]},receiptInfo:{fontSize:11,color:"#1a202c",margin:[5,2,5,2]},tableHeader:{fontSize:11,color:"#2d3748",bold:!0,margin:[5,5,5,5]},tableCell:{fontSize:10,color:"#1a202c",margin:[5,3,5,3]},summaryLabel:{fontSize:11,color:"#4a5568",margin:[5,2,5,2]},summaryValue:{fontSize:11,color:"#1a202c",margin:[5,2,5,2]},summaryLabelBold:{fontSize:12,color:"#2d3748",bold:!0,margin:[5,3,5,3]},summaryValueBold:{fontSize:12,color:"#1a202c",bold:!0,margin:[5,3,5,3]},summaryValuePaid:{fontSize:11,color:"#1a202c",margin:[5,2,5,2]},summaryValueDue:{fontSize:11,color:"#1a202c",margin:[5,2,5,2]},noDataText:{fontSize:11,color:"#6b7280",alignment:"center",margin:[0,10,0,10]}}}async processRegionalText(t,n={},a="A4",r=!1){return(await this.regionalTextRenderer.processTextForPdf(t,n,a,r)).content}getRegionalImageWidth(t){switch(t?.toLowerCase()){case"letter":case"legal":return 460;case"a4":default:return 450}}async applyLanguageFont(t,n={},a="A4",r=!1){const s=this.regionalTextRenderer.detectLanguage(t);if(["gujarati","hindi","marathi","kannada","malayalam","telugu","tamil"].includes(s)&&!r){const o=this.regionalTextRenderer.getFixedContainerDimensions(a),i=this.getRegionalImageWidth(a);return{image:await this.regionalTextRenderer.renderTextAsImage(t,s,{fontSize:o.fontSize,color:n.color||"#2d3748",fontFamily:s==="gujarati"?"Noto Sans Gujarati":s==="kannada"?"Noto Sans Kannada":s==="malayalam"?"Noto Sans Malayalam":s==="telugu"?"Noto Sans Telugu":s==="tamil"?"Noto Sans Tamil":"Noto Sans Devanagari",padding:5},a),width:i,margin:[0,2,15,2],alignment:n.alignment||"left"}}return{text:t,...n}}async generateConsultationPDF(t,n){ls||await CA();let a=null;if(t.printConfigurations?.headerImagePath&&t.printConfigurations?.doctorId)try{const o=await dd(t.printConfigurations.doctorId,t.printConfigurations.headerImagePath);a=await ap(o)}catch(o){console.error("Failed to load header image for PDF:",o)}let r=null;t.printConfigurations?.headerSize!==void 0&&t.printConfigurations?.headerSize!==null?r=Math.round(t.printConfigurations.headerSize*72):t.headerSize!==void 0&&(r=t.headerSize);const s={pageSize:this.getPageSize(t.printConfigurations?.pageSize),pageMargins:this.getPageMargins(t.printConfigurations?.pageSize,r),defaultStyle:{fontSize:10,columnGap:20},header:()=>t.printConfigurations?.useHeader?this.createProfessionalMedicalHeader(t.printConfigurations,t.printConfigurations?.pageSize,a,r):null,footer:(o,i)=>t.printConfigurations?.useFooter?this.createMedicalFooter(o,i,t.printConfigurations):null,content:[this.createProfessionalPatientCard(n,t.consultation),...this.hasVitals(t.vitals)?[this.createProfessionalVitalsCard(t.vitals)]:[],await this.createClinicalFindingsSection(t.consultation,t.printConfigurations?.pageSize),await this.createProfessionalPrescriptionSection(t.medicines||[],t.translationLanguage,t.printConfigurations?.pageSize,t.translationFailed),await this.createMedicalAdviceSection(t.consultation,t.translatedPatientNotes,t.printConfigurations?.pageSize,t.translationFailed)],styles:this.styles,pageBreakBefore:function(o,i,c){return o.style==="prescriptionTableHeader"&&o.pageNumbers.length>1?!0:(i&&i.length===0&&c&&c.length<2,!1)},info:{title:"Medical Prescription",author:"Professional Medical System",subject:"Patient Prescription and Medical Advice"},compress:!1};return ls.createPdf(s)}createProfessionalMedicalHeader(t,n="A4",a=null,r=null){const s=this.getHeaderMargins(n,r),i=this.getPageWidth(n)-(s[0]+s[2]);return a?{table:{headerRows:0,widths:["*"],body:[[{stack:[{image:a,width:i,height:80,alignment:"center",margin:[0,0,0,0]},{canvas:[{type:"line",x1:0,y1:4,x2:500,y2:4,lineWidth:2,lineColor:"#2b6cb0"},{type:"line",x1:0,y1:8,x2:500,y2:8,lineWidth:1,lineColor:"#4a5568"}],margin:[0,10,0,0],alignment:"center"}],margin:[0,0,0,0]}]]},layout:"noBorders",margin:[s[0],s[1],s[2],s[3]]}:{table:{headerRows:0,widths:["*"],body:[[{stack:[{columns:[{width:"40%",stack:[{text:`Dr. ${t.doctorName}`,style:"doctorName"},{text:t.doctorDegrees||"MBBS",style:"doctorCredentials"},{text:`Reg. No: ${t.doctorRegistrationNumber}`,style:"registrationInfo"}]},{width:"60%",stack:[...t.clinicAddress?[{stack:t.clinicAddress.split(/\r?\n|\r/).map(c=>({text:c.trim(),fontSize:10,color:"#4a5568",alignment:"right",margin:[0,1,0,1]})),margin:[0,5,0,2]}]:[],...t.contactNumber?[{text:` ${t.contactNumber}`,fontSize:10,color:"#4a5568",alignment:"right"}]:[],...t.email?[{text:`Email: ${t.email}`,fontSize:10,color:"#4a5568",alignment:"right"}]:[]]}]},{canvas:[{type:"line",x1:0,y1:4,x2:500,y2:4,lineWidth:2,lineColor:"#2b6cb0"},{type:"line",x1:0,y1:8,x2:500,y2:8,lineWidth:1,lineColor:"#4a5568"}],margin:[0,10,0,0],alignment:"center"}],margin:s}]]},layout:"noBorders",margin:[0,0,0,20]}}createProfessionalPatientCard(t,n){const a=[`Patient Name - ${t.name||t.patientName||"N/A"}`,`${t.age||"N/A"} yrs/${t.gender||"N/A"}`,`ID - ${t.id||t.patientId||"N/A"}`,`Contact - ${t.contactNumber||t.phoneNumber||"N/A"}`].join(" | ");return{table:{headerRows:0,widths:["*","auto"],body:[[{text:a,style:"patientInlineInfo",margin:[6,3,15,3]},{text:(s=>{const o=new Date(s),c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][o.getMonth()],A=o.getDate(),d=o.getFullYear().toString().slice(-2);return`${A} ${c}' ${d}`})(n.consultationDate||n.createdAt),fontSize:11,color:"#4a5568",lineHeight:1.3,alignment:"right",margin:[15,3,12,3]}]]},layout:"noBorders",margin:[0,0,0,3],alignment:"left"}}createProfessionalVitalsCard(t){const n=[];if(t.pulse&&n.push(`Pulse Rate: ${t.pulse}bpm`),t.systolicBP&&t.diastolicBP&&n.push(`Blood Pressure: ${t.systolicBP}/${t.diastolicBP}mmHg`),t.temperature&&n.push(`Temperature: ${t.temperature}C`),t.respiratoryRate&&n.push(`Respiratory Rate: ${t.respiratoryRate}/min`),t.weight&&n.push(`Weight: ${t.weight}kg`),t.height){const a=t.weight&&t.height?(t.weight/(t.height/100*(t.height/100))).toFixed(1):null;n.push(`Height: ${t.height}cm${a?` (BMI: ${a})`:""}`)}return{table:{headerRows:0,widths:["*"],body:[[{text:[{text:"VITAL SIGNS: ",style:"patientSectionTitle"},{text:n.join(", "),style:"vitalValue"}],margin:[6,3,15,5]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,0,0,5],alignment:"left"}}async createClinicalFindingsSection(t,n="A4"){const a=[];if(t.diagnosis){const r=await this.applyLanguageFont(t.diagnosis,{style:"diagnosisText",margin:[0,0,0,0]},n,!1);a.push([{text:[{text:"DIAGNOSIS: ",style:"medicalAdviceTitle"},r.text?r:{text:t.diagnosis,style:"diagnosisText"}],margin:[6,3,15,1]}])}if(t.clinicalNotes?.trim()){const r=await this.applyLanguageFont(t.clinicalNotes,{style:"clinicalNotesText",margin:[0,0,0,0]},n,!1);a.push([{text:[{text:"CLINICAL NOTES: ",style:"medicalAdviceTitle"},r.text?r:{text:t.clinicalNotes,style:"clinicalNotesText"}],margin:[6,0,15,3]}])}return a.length===0?[]:[{table:{headerRows:0,widths:["*"],body:a},layout:{hLineWidth:(r,s)=>r===0||r===s.table.body.length?1:0,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,0,0,5],alignment:"left"}]}async createProfessionalPrescriptionSection(t,n="none",a="A4",r=!1){const s=t.filter(i=>i.isSelected!==!1);if(s.length===0)return{text:""};const o=[];for(const i of s){const A=this.createSimpleDosageText(i)||"As directed",d=i.duration||"As directed",f=i.instructions||"";let m=`Schedule: ${A}   Duration: ${d}`;f.trim()&&(m+=`   ${f}`);let h=i.productName||"";if(i.productForm||i.quantityUnits!==null&&i.quantityUnits!==void 0){const y=[];i.productForm&&y.push(i.productForm),i.quantityUnits!==null&&i.quantityUnits!==void 0&&y.push(`Qty:${i.quantityUnits}`),h+=` (${y.join(",")})`}const v=i.saltComposition?` - ${i.saltComposition.toUpperCase()}`:"";if(o.push({text:[{text:h,style:"cleanMedicineName",bold:!0},{text:v,fontSize:10,color:"#1a202c"}],margin:[0,0,0,0]}),o.push({text:m,style:"cleanFieldValue",margin:[0,0,0,n&&n!=="none"?0:4]}),n&&n!=="none")try{const y=[];if(A&&A!=="As directed"&&y.push(A),d&&d!=="As directed"&&y.push(d),f.trim()&&y.push(f),y.length>0){const g=y.map(T=>this.translateMedicineText(T,n)),w=await Promise.all(g);let b="",x=0;if(A&&A!=="As directed"){const T=w[x];T&&T.trim()&&(b+=T),x++}if(d&&d!=="As directed"){const T=w[x];T&&T.trim()&&(b&&(b+="   "),b+=T),x++}if(f.trim()){const T=w[x];T&&T.trim()&&(b&&(b+="   "),b+=T)}if(b&&b.trim()&&!r){const T=await this.applyLanguageFont(b,{style:"translatedText"},a,!1);o.push({...T,margin:[-6,1,0,2]})}}}catch(y){console.error("Error translating medicine text:",y)}}return[{table:{headerRows:0,widths:["*"],body:[[{text:"PRESCRIPTION (Rx)",style:"medicalAdviceTitle",margin:[6,3,15,1]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,0,0,2],alignment:"left"},{table:{headerRows:0,widths:["*"],body:[[{stack:o,margin:[6,3,6,1]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,0,0,5],alignment:"left"}]}createSimpleDosageText(t){return t?.dosage_schedule||"As directed"}async translateMedicineText(t,n){if(!t||!n||n==="none")return"";try{const{translationLanguages:a}=await xr(async()=>{const{translationLanguages:c}=await Promise.resolve().then(()=>TE);return{translationLanguages:c}},void 0,import.meta.url),s=a.find(c=>c.value===n)?.label||n,{translateText:o}=await xr(async()=>{const{translateText:c}=await import("./translationUtils-CEYWmmQU.js");return{translateText:c}},[],import.meta.url);return await o(t,s)||t}catch(a){return console.error("Translation failed for medicine text:",a),t}}async createMedicalAdviceSection(t,n,a="A4",r=!1){const s=[];if(t.investigations?.trim()){const o=await this.applyLanguageFont(t.investigations,{style:"adviceText",margin:[0,0,0,0]},a,!1);s.push({stack:[{table:{headerRows:0,widths:["*"],body:[[{text:[{text:"INVESTIGATIONS ADVISED: ",style:"medicalAdviceTitle"},o.text?o:{text:t.investigations,style:"adviceText"}],margin:[6,3,15,1]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"}}],margin:[0,0,0,5],alignment:"left"})}if(t.followupDate){const o=i=>{const c=new Date(i),d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][c.getMonth()],f=c.getDate(),m=c.getFullYear().toString().slice(-2);return`${f} ${d}' ${m}`};s.push({stack:[{table:{headerRows:0,widths:["*"],body:[[{text:[{text:"FOLLOW-UP APPOINTMENT: ",style:"medicalAdviceTitle"},{text:o(t.followupDate),style:"followupText"}],margin:[6,3,15,5]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"}}],margin:[0,0,0,8],alignment:"left"})}if(t.patientNotes?.trim()){const o=await this.applyLanguageFont(t.patientNotes,{style:"adviceText",margin:[0,0,0,0]},a,!1),c=[{text:[{text:"PATIENT ADVICE: ",style:"medicalAdviceTitle"},o.text?o:{text:t.patientNotes,style:"adviceText"}],margin:[0,0,0,0]}];if(n&&!r){const A=await this.applyLanguageFont(n,{style:"translatedText"},a,!1);c.push({...A,margin:[-6,2,0,0]})}s.push({stack:[{table:{headerRows:0,widths:["*"],body:[[{stack:c,margin:[6,3,15,1]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"}}],margin:[0,0,0,5],alignment:"left"})}return s}createMedicalDisclaimer(){return{stack:[{table:{headerRows:0,widths:["*"],body:[[{stack:[{text:" IMPORTANT MEDICAL NOTICE",style:"medicalAdviceTitle",alignment:"center"},{text:[` Take medications exactly as prescribed
`,` Do not stop medication without consulting your doctor
`,` Contact your doctor immediately if you experience any adverse reactions
`,` Keep all medications out of reach of children
`," This prescription is valid for 30 days from date of issue"].join(""),style:"disclaimer",margin:[15,5,15,10]}]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#fed7d7",vLineColor:()=>"#fed7d7",fillColor:()=>"#fffbf5"}}],unbreakable:!0,margin:[0,15,0,0],alignment:"left",pageBreakBefore:function(t,n,a,r){return 842-(r?r.length*30:0)<120&&n.length===0}}}createMedicalFooter(t,n,a){return{columns:[{width:"*",text:`Dr. ${a?.doctorName||"Doctor"} - Reg. No: ${a?.doctorRegistrationNumber||"REG001"} | This is a computer-generated prescription.`,style:"medicalFooter"},{width:"auto",text:`Page ${t} of ${n}`,style:"medicalFooter"}],margin:[40,5,40,5],alignment:"left"}}createReceiptFooter(t,n,a){return{columns:[{width:"*",text:`Dr. ${a?.doctorName||"Doctor"} - Reg. No: ${a?.doctorRegistrationNumber||"REG001"} | This is a computer-generated receipt.`,style:"medicalFooter"},{width:"auto",text:`Page ${t} of ${n}`,style:"medicalFooter"}],margin:[40,5,40,5],alignment:"left"}}createTreatmentPlanFooter(t,n,a){return{columns:[{width:"*",text:`Dr. ${a?.doctorName||"Doctor"} - Reg. No: ${a?.doctorRegistrationNumber||"REG001"} | Charges are indicative`,style:"medicalFooter"},{width:"auto",text:`Page ${t} of ${n}`,style:"medicalFooter"}],margin:[40,5,40,5],alignment:"left"}}createPatientField(t,n){return{columns:[{width:"35%",text:t,style:"patientLabel"},{width:"*",text:n,style:"patientValue"}],margin:[0,0,0,1]}}createVitalField(t,n){return{text:`${t}: ${n}`,style:"vitalValue",margin:[8,3,8,3]}}createCleanDosageSchedule(t){return t?.dosage_schedule?[{text:t.dosage_schedule,style:"cleanDosageItem",alignment:"left",color:"#2d3748"}]:[{text:"Take as directed by your physician",style:"cleanDosageItem",alignment:"center",italics:!0,color:"#4a5568"}]}createDosageSchedule(t){return t?.dosage_schedule?[{text:t.dosage_schedule,style:"dosageInstruction",alignment:"left"}]:[{text:"Take as directed by physician",style:"dosageInstruction"}]}getBPStatus(t,n){return t>140||n>90?" High":t<90||n<60?" Low":" Normal"}async generateTreatmentPlanPDF(t,n){ls||await CA();let a=null;if(t.printConfigurations?.headerImagePath&&t.printConfigurations?.doctorId)try{const o=await dd(t.printConfigurations.doctorId,t.printConfigurations.headerImagePath);a=await ap(o)}catch(o){console.error("Failed to load header image for PDF:",o)}let r=null;t.printConfigurations?.headerSize!==void 0&&t.printConfigurations?.headerSize!==null?r=Math.round(t.printConfigurations.headerSize*72):t.headerSize!==void 0&&(r=t.headerSize);const s={pageSize:this.getPageSize(t.printConfigurations?.pageSize),pageMargins:this.getPageMargins(t.printConfigurations?.pageSize,r),defaultStyle:{fontSize:10,columnGap:20},header:()=>t.printConfigurations?.useHeader?this.createProfessionalMedicalHeader(t.printConfigurations,t.printConfigurations?.pageSize,a,r):null,footer:(o,i)=>t.printConfigurations?.useFooter?this.createTreatmentPlanFooter(o,i,t.printConfigurations):null,content:[this.createProfessionalPatientCard(n,{createdAt:new Date}),this.createTreatmentPlanDetailsSection(t.treatmentPlan),...this.getCompletedProcedures(t.procedureTreatments).length>0?[this.createProceduresSection("COMPLETED PROCEDURES",this.getCompletedProcedures(t.procedureTreatments))]:[],...this.createPendingProceduresSections(t.procedureTreatments),...t.paymentReceipts&&t.paymentReceipts.length>0?[this.createPaymentDetailsSection(t.paymentReceipts)]:[],...this.hasMultipleOptions(t.procedureTreatments)?[]:[this.createCostSummarySection(t.procedureTreatments,t.paymentReceipts)],this.createPaymentSummarySection(t.procedureTreatments,t.paymentReceipts)],styles:this.styles,pageBreakBefore:function(o,i,c){return i&&i.length===0&&c&&c.length<2,!1},info:{title:"Treatment Plan",author:"Professional Medical System",subject:"Patient Treatment Plan"},compress:!1};return ls.createPdf(s)}createTreatmentPlanDetailsSection(t){const n=t?.treatmentPlanName;return!n||n.startsWith("New Treatment Plan")?null:{stack:[{table:{headerRows:0,widths:["*"],body:[[{text:[{text:"TREATMENT PLAN: ",style:"medicalAdviceTitle"},{text:n,style:"patientValue"}],margin:[6,3,15,5]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"}}],unbreakable:!0,margin:[0,0,0,8],alignment:"left",pageBreakBefore:function(a,r){return r.length===0}}}getCompletedProcedures(t){return t?t.filter(n=>n.status?.toLowerCase()==="completed"&&n.isSelected!==!1&&n.status?.toLowerCase()!=="cancelled"):[]}getPendingProcedures(t){return t?t.filter(n=>n.status?.toLowerCase()!=="completed"&&n.isSelected!==!1&&n.status?.toLowerCase()!=="cancelled"):[]}hasMultipleOptions(t){if(!t)return!1;const n=t.filter(r=>r.status?.toLowerCase()!=="completed"&&r.isSelected!==!1&&r.status?.toLowerCase()!=="cancelled"),a=new Set;return n.forEach(r=>{const s=(r.option||r.options||"").trim();s&&a.add(s)}),a.size>=2}groupPendingProceduresByOption(t){const n=this.getPendingProcedures(t),a={};return n.forEach(r=>{const o=(r.option||r.options||"").trim()||"no-option";a[o]||(a[o]=[]),a[o].push(r)}),a}calculateGroupTotal(t){return t.reduce((n,a)=>{const r=a.costEstimate||a.procedureCost||0;return n+r},0)}createPendingProceduresSections(t){const n=this.getPendingProcedures(t);if(n.length===0)return[];if(this.hasMultipleOptions(t)){const a=this.groupPendingProceduresByOption(t),r=[];return a["no-option"]&&r.push(this.createProceduresSection("PENDING PROCEDURES",a["no-option"])),Object.keys(a).filter(o=>o!=="no-option").sort((o,i)=>o.localeCompare(i)).forEach(o=>{const i=a[o],c=this.calculateGroupTotal(i);r.push(this.createProceduresWithTotalSection(`OPTION ${o.toUpperCase()}`,i,c))}),r}else return[this.createProceduresSection("PENDING PROCEDURES",n)]}createProceduresWithTotalSection(t,n,a){if(!n||n.length===0)return null;const r={table:{headerRows:1,widths:["70%","30%"],body:[[{text:"PROCEDURE",style:"prescriptionTableHeader"},{text:"COST",style:"prescriptionTableHeader",alignment:"center"}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,2,0,8]};return n.forEach(s=>{const o=s.procedure?.procedure_name||s.procedureName||"Unknown Procedure",i=s.location&&s.location.trim()?`${o} (${s.location.trim()})`:o,c=s.procedure?.description||s.description||"",A=s.procedureCost||0,d=s.costEstimate||s.procedureCost||0,f=A-d;let m=`${d.toLocaleString()}`;f>0&&(m+=` (${f.toLocaleString()} discount)`),r.table.body.push([{stack:[{text:i,style:"cleanMedicineName"},...c?[{text:c,style:"cleanMedicineDetails"}]:[]]},{text:m,style:"cleanFieldValue",alignment:"center"}])}),r.table.body.push([{text:`${t} Total:`,style:"cleanMedicineName",bold:!0,alignment:"right"},{text:`${a.toLocaleString()}`,style:"cleanMedicineName",bold:!0,alignment:"center"}]),[{table:{headerRows:0,widths:["*"],body:[[{text:t,style:"medicalSectionTitle"}]]},layout:"noBorders",margin:[0,0,0,2]},r]}createProceduresSection(t,n){if(!n||n.length===0)return null;const a={table:{headerRows:1,widths:["70%","30%"],body:[[{text:"PROCEDURE",style:"prescriptionTableHeader"},{text:"COST",style:"prescriptionTableHeader",alignment:"center"}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,2,0,8]};return n.forEach(r=>{const s=r.procedure?.procedure_name||r.procedureName||"Unknown Procedure",o=r.location&&r.location.trim()?`${s} (${r.location.trim()})`:s,i=r.procedure?.description||r.description||"",c=r.procedureCost||0,A=r.costEstimate||r.procedureCost||0,d=c-A;let f=`${A.toLocaleString()}`;d>0&&(f+=` (${d.toLocaleString()} discount)`),a.table.body.push([{stack:[{text:o,style:"cleanMedicineName"},...i?[{text:i,style:"cleanMedicineDetails"}]:[]]},{text:f,style:"cleanFieldValue",alignment:"center"}])}),[{table:{headerRows:0,widths:["*"],body:[[{text:t,style:"medicalSectionTitle"}]]},layout:"noBorders",margin:[0,0,0,2]},a]}createPaymentDetailsSection(t){if(!t||t.length===0)return null;const n={table:{headerRows:1,widths:["25%","20%","18%","18%","19%"],body:[[{text:"RECEIPT ID",style:"prescriptionTableHeader"},{text:"DATE",style:"prescriptionTableHeader",alignment:"center"},{text:"TOTAL",style:"prescriptionTableHeader",alignment:"center"},{text:"PAID",style:"prescriptionTableHeader",alignment:"center"},{text:"BALANCE",style:"prescriptionTableHeader",alignment:"center"}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,2,0,8]};return t.forEach(a=>{n.table.body.push([{text:a.identifier||"N/A",style:"cleanFieldValue"},{text:za(a.paymentReceiptDate),style:"cleanFieldValue",alignment:"center"},{text:`${(a.totalAmount||0).toLocaleString()}`,style:"cleanFieldValue",alignment:"center"},{text:`${(a.totalPaid||0).toLocaleString()}`,style:"cleanFieldValue",alignment:"center"},{text:`${(a.balanceDue||0).toLocaleString()}`,style:"cleanFieldValue",alignment:"center"}])}),[{table:{headerRows:0,widths:["*"],body:[[{text:"PAYMENT INFORMATION",style:"medicalSectionTitle"}]]},layout:"noBorders",margin:[0,0,0,2]},n]}createCostSummarySection(t,n){const a=t?.filter(d=>d.isSelected!==!1&&d.status?.toLowerCase()!=="cancelled")||[],r=a.reduce((d,f)=>d+(f.procedureCost||0),0),s=a.reduce((d,f)=>d+(f.costEstimate||f.procedureCost||0),0),o=r-s;let i=`${s.toLocaleString()}`;o>0&&(i+=` (${o.toLocaleString()} total discount)`);const A={table:{headerRows:0,widths:["60%","40%"],body:[["Total Cost:",i]].map(([d,f])=>[{text:d,fontSize:12,color:"#000000",bold:!0,margin:[5,2,5,2]},{text:f,style:"cleanFieldValue",alignment:"right",margin:[5,2,5,2]}])},layout:{hLineWidth:(d,f)=>d===0||d===f.table.body.length?1:0,vLineWidth:(d,f)=>d===0||d===f.table.widths.length?1:0,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,2,0,8]};return[{table:{headerRows:0,widths:["*"],body:[[{text:"COST SUMMARY",style:"medicalSectionTitle"}]]},layout:"noBorders",margin:[0,0,0,2]},A]}createPaymentSummarySection(t,n){const a=t?.filter(A=>A.isSelected!==!1&&A.status?.toLowerCase()==="completed"&&A.status?.toLowerCase()!=="cancelled")||[],r=n?.reduce((A,d)=>A+(d.totalPaid||0),0)||0,s=a.reduce((A,d)=>{const f=d.costEstimate||d.cost_estimate,m=d.procedureCost||0;return A+(f!==void 0?f:m)},0),o=Math.max(0,s-r),i=[["Amount Due:",`${s.toLocaleString()}`],["Amount Paid:",`${r.toLocaleString()}`],["Amount Pending:",`${o.toLocaleString()}`]],c={table:{headerRows:0,widths:["60%","40%"],body:i.map(([A,d])=>[{text:A,fontSize:12,color:"#000000",bold:!0,margin:[5,2,5,2]},{text:d,style:"cleanFieldValue",alignment:"right",margin:[5,2,5,2]}])},layout:{hLineWidth:(A,d)=>A===0||A===d.table.body.length?1:0,vLineWidth:(A,d)=>A===0||A===d.table.widths.length?1:0,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,2,0,8]};return[{table:{headerRows:0,widths:["*"],body:[[{text:"PAYMENT SUMMARY",style:"medicalSectionTitle"}]]},layout:"noBorders",margin:[0,0,0,2]},c]}getLanguageDisplayName(t){return{hi:"Hindi",bn:"Bengali",te:"Telugu",mr:"Marathi",ta:"Tamil",gu:"Gujarati",ur:"Urdu",ml:"Malayalam",kn:"Kannada",or:"Odia",pa:"Punjabi",as:"Assamese",hindi:"Hindi",marathi:"Marathi",gujarati:"Gujarati",kannada:"Kannada",malayalam:"Malayalam",telugu:"Telugu",tamil:"Tamil"}[t]||(t?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase():"Translation")}getPageSize(t){switch(t?.toLowerCase()){case"letter":return"LETTER";case"legal":return"LEGAL";case"a4":default:return"A4"}}getPageMargins(t,n=null){const a=n??130;switch(t?.toLowerCase()){case"letter":return[45,a,45,45];case"legal":return[35,a,35,55];case"a4":default:return[40,a,40,40]}}getHeaderMargins(t,n=null){const a=this.getPageMargins(t,n);return[a[0],20,a[2],15]}getPageWidth(t){switch(t?.toLowerCase()){case"letter":return 612;case"legal":return 612;case"a4":default:return 595}}hasVitals(t){return t?!!(t.pulse||t.systolicBP||t.diastolicBP||t.respiratoryRate||t.temperature||t.weight||t.height):!1}async generateBillPDF(t,n){ls||await CA();const a=t.headerSize!==void 0?t.headerSize:null,r={pageSize:this.getPageSize(t.printConfigurations?.pageSize),pageMargins:this.getPageMargins(t.printConfigurations?.pageSize,a),defaultStyle:{fontSize:10,columnGap:20},header:()=>this.createProfessionalBillHeader(t.printConfigurations,t.printConfigurations?.pageSize,t.doctor,a),footer:(s,o)=>this.createBillFooter(s,o,t.printConfigurations),content:[this.createBillTitle(),this.createBillPatientInfo(n,t.consultation,t.printConfigurations,t.doctor),this.createBillServicesTable(t.consultation),...t.consultation.associatedReceipt?[this.createAssociatedReceiptSection(t.consultation.associatedReceipt,t.consultation.payments)]:[]],styles:this.styles,pageBreakBefore:function(s,o,i){return!!(s.table&&s.table.body&&s.table.body.length>15)},info:{title:"Tax Invoice cum Bill of Supply",author:"Professional Medical System",subject:"Patient Bill and Tax Invoice"},compress:!1};return ls.createPdf(r)}async generatePharmacyBillPDF(t,n){ls||await CA();const a=t.pharmacyBill,r=t.pharmacyConfigurations||{},s={pageSize:"A4",pageOrientation:"landscape",pageMargins:[40,60,40,40],defaultStyle:{fontSize:10,columnGap:20},header:()=>r.useHeader?this.createPharmacyBillHeader(r):null,footer:()=>null,content:[this.createPharmacyBillTitle(n,a,r),this.createPharmacyBillItemsTable(a),this.createPharmacyBillBottomSection(a)],styles:this.styles,pageBreakBefore:function(o,i,c){return!!(o.table&&o.table.body&&o.table.body.length>15)},info:{title:"Pharmacy Bill",author:"Professional Medical System",subject:"Pharmacy Bill"},compress:!1};return ls.createPdf(s)}async generateMedicalFitnessCertificatePDF(t,n,a){ls||await CA();const r=a?.pageSize||"A4";let s=null;if(a?.headerImagePath&&a?.doctorId)try{const g=await dd(a.doctorId,a.headerImagePath);s=await ap(g)}catch(g){console.error("Failed to load header image for PDF:",g)}let o=null;a?.headerSize!==void 0&&a?.headerSize!==null&&(o=Math.round(a.headerSize*72));const i=g=>{if(!g)return"";try{const w=new Date(g+"T12:00:00"),b=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],x=w.getDate(),T=b[w.getMonth()],U=w.getFullYear();return`${x} ${T} ${U}`}catch{return g}},c=t.patientName||n.name||"N/A",A=t.patientAge||n.age||"N/A",d=t.purpose||"",f=t.validityPeriod||"",m=t.additionalNotes||"";i(t.certificateDate);let h=`This is to certify that ${c}, aged ${A} years, is medically fit for ${d}. This certificate is valid for ${f}.`;m&&(h+=` ${m}`);const v={consultationDate:t.certificateDate,createdAt:t.certificateDate},y={pageSize:this.getPageSize(r),pageMargins:this.getPageMargins(r,o),defaultStyle:{fontSize:10,columnGap:20},header:()=>a?.useHeader?this.createProfessionalMedicalHeader(a,r,s,o):null,footer:(g,w)=>a?.useFooter?this.createMedicalFooter(g,w,a):null,content:[this.createProfessionalPatientCard(n,v),{text:"MEDICAL FITNESS CERTIFICATE",style:"prescriptionHeader",margin:[0,20,0,20]},{table:{headerRows:0,widths:["*"],body:[[{stack:[{text:h,style:"adviceText",margin:[0,0,0,20]}],margin:[12,0,12,0]}]]},layout:"noBorders",margin:[0,0,0,30]},{table:{headerRows:0,widths:["*"],body:[[{stack:[{canvas:[{type:"line",x1:0,y1:0,x2:200,y2:0,lineWidth:1,lineColor:"#1a202c"}],margin:[0,0,0,5]},{text:t.doctorName||a?.doctorName||"Dr. [Doctor Name]",fontSize:12,color:"#1a202c",margin:[0,0,0,3]},{text:i(t.certificateDate),fontSize:10,color:"#4a5568",margin:[0,0,0,3]},...a?.doctorRegistrationNumber?[{text:`Reg. No: ${a.doctorRegistrationNumber}`,fontSize:10,color:"#4a5568",margin:[0,0,0,0]}]:[]],margin:[12,0,12,0]}]]},layout:"noBorders",margin:[0,30,0,0]}],styles:this.styles,pageBreakBefore:function(g,w,b){return!1},info:{title:"Medical Fitness Certificate",author:"Professional Medical System",subject:"Medical Fitness Certificate"},compress:!1};return ls.createPdf(y)}async generateLeaveOfAbsencePDF(t,n,a){ls||await CA();const r=a?.pageSize||"A4";let s=null;if(a?.headerImagePath&&a?.doctorId)try{const b=await dd(a.doctorId,a.headerImagePath);s=await ap(b)}catch(b){console.error("Failed to load header image for PDF:",b)}let o=null;a?.headerSize!==void 0&&a?.headerSize!==null&&(o=Math.round(a.headerSize*72));const i=b=>{if(!b)return"";try{const x=new Date(b+"T12:00:00"),T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],U=x.getDate(),k=T[x.getMonth()],S=x.getFullYear();return`${U} ${k} ${S}`}catch{return b}},c=t.patientName||n.name||"N/A",A=t.patientAge||n.age||"N/A",d=t.activity||"",f=t.reason||"",m=i(t.tillDate),h=t.additionalNotes||"",v=i(t.certificateDate);let y=`This is to certify that ${c}, aged ${A} years, should be granted leave of absence from ${d}`;m&&(y+=` till ${m}`),y+=` for the reason ${f}.`,h&&(y+=` ${h}`);const g={consultationDate:t.certificateDate,createdAt:t.certificateDate},w={pageSize:this.getPageSize(r),pageMargins:this.getPageMargins(r,o),defaultStyle:{fontSize:10,columnGap:20},header:()=>a?.useHeader?this.createProfessionalMedicalHeader(a,r,s,o):null,footer:(b,x)=>a?.useFooter?this.createMedicalFooter(b,x,a):null,content:[this.createProfessionalPatientCard(n,g),{text:"LEAVE OF ABSENCE CERTIFICATE",style:"prescriptionHeader",margin:[0,20,0,20]},{table:{headerRows:0,widths:["*"],body:[[{stack:[{text:y,style:"adviceText",margin:[0,0,0,20]}],margin:[12,0,12,0]}]]},layout:"noBorders",margin:[0,0,0,30]},{table:{headerRows:0,widths:["*"],body:[[{stack:[{canvas:[{type:"line",x1:0,y1:0,x2:200,y2:0,lineWidth:1,lineColor:"#1a202c"}],margin:[0,0,0,5]},{text:t.doctorName||a?.doctorName||"Dr. [Doctor Name]",fontSize:12,color:"#1a202c",margin:[0,0,0,3]},{text:v,fontSize:10,color:"#4a5568",margin:[0,0,0,3]},...a?.doctorRegistrationNumber?[{text:`Reg. No: ${a.doctorRegistrationNumber}`,fontSize:10,color:"#4a5568",margin:[0,0,0,0]}]:[]],margin:[12,0,12,0]}]]},layout:"noBorders",margin:[0,30,0,0]}],styles:this.styles,pageBreakBefore:function(b,x,T){return!1},info:{title:"Leave of Absence Certificate",author:"Professional Medical System",subject:"Leave of Absence Certificate"},compress:!1};return ls.createPdf(w)}async generateReceiptPDF(t,n){await CA(),console.log("Generating receipt PDF with data:",t);const a=t.consultation,r=t.printConfigurations||{},s=r.pageSize||"A4";let o=null;if(r?.headerImagePath&&r?.doctorId)try{const A=await dd(r.doctorId,r.headerImagePath);o=await ap(A)}catch(A){console.error("Failed to load header image for PDF:",A)}let i=null;r?.headerSize!==void 0&&r?.headerSize!==null?i=Math.round(r.headerSize*72):t?.headerSize!==void 0&&(i=t.headerSize);const c={pageSize:this.getPageSize(s),pageMargins:this.getPageMargins(s,i),header:()=>r?.useHeader?this.createProfessionalMedicalHeader(r,s,o,i):null,footer:(A,d)=>r?.useFooter?this.createReceiptFooter(A,d,r):null,content:[this.createReceiptTitle(),this.createReceiptPatientInfo(n,a,t),this.createReceiptServicesTable(a),...this.createReceiptPaymentSection(a)],styles:this.styles,info:{title:"Payment Receipt",author:"Professional Medical System",subject:"Patient Payment Receipt"}};return ls.createPdf(c)}createReceiptTitle(){return{text:"PAYMENT RECEIPT",style:"receiptTitle",alignment:"center",margin:[0,0,0,15]}}createReceiptPatientInfo(t,n,a={}){return{table:{headerRows:0,widths:["33%","33%","34%"],body:[[{stack:[{text:"Patient Information",style:"sectionHeader",margin:[0,0,0,3]},{text:n.patientName||t.name||t.patientName||"Unknown Patient",style:"patientInfo"},{text:`ID: ${n.patientId||t.patientId||"N/A"}`,style:"patientInfo"}],margin:[6,3,6,3]},{stack:[{text:"Appointment Details",style:"sectionHeader",margin:[0,0,0,3]},{text:`Dr. ${n.doctorName||a?.doctor?.doctorName||"Unknown Doctor"}`,style:"patientInfo"},{text:`Date: ${this.formatReceiptDate(n.appointmentDate)}`,style:"patientInfo"}],margin:[6,3,6,3]},{stack:[{text:"Receipt Information",style:"sectionHeader",margin:[0,0,0,3]},{text:n.receiptNumber||n.identifier||"N/A",style:"patientInfo"},{text:`Date: ${this.formatReceiptDate(n.receiptDate||n.paymentReceiptDate)}`,style:"patientInfo"}],margin:[6,3,6,3]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,0,0,10]}}createReceiptServicesTable(t){const n=t.services||[];if(n.length===0)return{text:"No services recorded",style:"noDataText",margin:[0,10]};const a=n.some(i=>parseFloat(i.discountAmount)>0);let r,s;a?(r=[{text:"Description",style:"tableHeader"},{text:"Base Cost per unit",style:"tableHeader",alignment:"right"},{text:"Discount per unit",style:"tableHeader",alignment:"right"},{text:"Quantity",style:"tableHeader",alignment:"center"},{text:"Total",style:"tableHeader",alignment:"right"}],s=["35%","20%","20%","10%","15%"]):(r=[{text:"Description",style:"tableHeader"},{text:"Base Cost per unit",style:"tableHeader",alignment:"right"},{text:"Quantity",style:"tableHeader",alignment:"center"},{text:"Total",style:"tableHeader",alignment:"right"}],s=["45%","25%","15%","15%"]);const o=[r];return n.forEach(i=>{const c=parseFloat(i.baseCost)||0,A=parseFloat(i.discountAmount)||0,d=parseInt(i.quantity)||1,f=(c-A)*d;let m;a?m=[{text:i.serviceDescription||"Service",style:"tableCell"},{text:this.formatAmount(c),style:"tableCell",alignment:"right"},{text:this.formatAmount(A),style:"tableCell",alignment:"right"},{text:d.toString(),style:"tableCell",alignment:"center"},{text:this.formatAmount(f),style:"tableCell",alignment:"right"}]:m=[{text:i.serviceDescription||"Service",style:"tableCell"},{text:this.formatAmount(c),style:"tableCell",alignment:"right"},{text:d.toString(),style:"tableCell",alignment:"center"},{text:this.formatAmount(f),style:"tableCell",alignment:"right"}],o.push(m)}),[{table:{headerRows:0,widths:["*"],body:[[{text:"Item Details",style:"sectionHeader",margin:[6,3,6,3]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,0,0,2]},{table:{headerRows:1,widths:s,body:o},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0",fillColor:function(i){return i===0?"#f8f9fa":null}},margin:[0,0,0,5]},this.createReceiptSummary(t,a)]}createReceiptSummary(t,n){const a=t.subtotal||0,r=t.totalLineDiscount||0,s=parseFloat(t.additionalDiscount)||0,o=t.grandTotal||0,i=[];return i.push(["Subtotal:",this.formatAmount(a)]),n&&r>0&&i.push(["Line Discounts:",`-${this.formatAmount(r)}`]),s>0&&i.push(["Additional Discount:",`-${this.formatAmount(s)}`]),i.push(["Grand Total:",this.formatAmount(o)]),{table:{headerRows:0,widths:["70%","30%"],body:i.map(([c,A])=>[{text:c,style:c==="Grand Total:"?"summaryLabelBold":"summaryLabel",alignment:"right",margin:[5,2,5,2]},{text:A,style:c==="Grand Total:"?"summaryValueBold":"summaryValue",alignment:"right",margin:[5,2,5,2]}])},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,2,0,10]}}createReceiptPaymentSection(t){const n=t.grandTotal||0,a=t.totalPaid||0,r=t.balanceDue||0,s=t.payments||[],o=[];if(o.push({table:{headerRows:0,widths:["*"],body:[[{text:"Payment Information",style:"sectionHeader",margin:[6,3,6,3]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,0,0,2]}),o.push({table:{headerRows:0,widths:["33%","33%","34%"],body:[[{stack:[{text:"Total Amount",style:"summaryLabel",margin:[0,0,0,2]},{text:this.formatAmount(n),style:"summaryValueBold"}],margin:[6,8,6,8]},{stack:[{text:"Paid Amount",style:"summaryLabel",margin:[0,0,0,2]},{text:this.formatAmount(a),style:"summaryValuePaid"}],margin:[6,8,6,8]},{stack:[{text:"Balance Due",style:"summaryLabel",margin:[0,0,0,2]},{text:this.formatAmount(r),style:r>0?"summaryValueDue":"summaryValuePaid"}],margin:[6,8,6,8]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,0,0,10]}),s&&s.length>0){o.push({text:"Payment History",style:"summaryLabel",margin:[6,5,6,5]});const i=[[{text:"Date",style:"tableHeader"},{text:"Mode",style:"tableHeader"},{text:"Amount",style:"tableHeader",alignment:"right"}]];s.forEach(c=>{i.push([{text:this.formatReceiptDate(c.paymentDate),style:"tableCell"},{text:c.mode||"Cash",style:"tableCell"},{text:this.formatAmount(c.amount),style:"tableCell",alignment:"right"}])}),o.push({table:{headerRows:1,widths:["40%","30%","30%"],body:i},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0",fillColor:function(c){return c===0?"#f8f9fa":null}},margin:[0,0,0,10]})}else o.push({stack:[{text:"Payment History",style:"summaryLabel",margin:[6,5,6,2]},{text:"No payments recorded",style:"noDataText",margin:[0,5,0,5]}]});return o}formatAmount(t){if(t==null)return"0.00";const n=parseFloat(t)||0;return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(n)}formatReceiptDate(t){if(!t)return"N/A";try{return new Date(t).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return t}}formatDateTime(t){if(!t)return"N/A";try{return new Date(t*1e3).toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return t}}createBillTitle(){return{text:"Tax Invoice cum Bill of Supply",style:"receiptTitle",alignment:"center",margin:[0,10,0,15]}}createProfessionalBillHeader(t,n="A4",a=null,r=null){const s=this.getHeaderMargins(n,r);return{table:{headerRows:0,widths:["*"],body:[[{stack:[{columns:[{width:"40%",stack:[{text:`Dr. ${t.doctorName}`,style:"doctorName"},{text:t.doctorDegrees||"MBBS",style:"doctorCredentials"},{text:`Reg. No: ${t.doctorRegistrationNumber}`,style:"registrationInfo"}]},{width:"60%",stack:[...t.clinicAddress?[{stack:t.clinicAddress.split(/\r?\n|\r/).map(o=>({text:o.trim(),fontSize:10,color:"#4a5568",alignment:"right",margin:[0,1,0,1]})),margin:[0,5,0,2]}]:[],...t.contactNumber?[{text:` ${t.contactNumber}`,fontSize:10,color:"#4a5568",alignment:"right"}]:[],...t.email?[{text:`Email: ${t.email}`,fontSize:10,color:"#4a5568",alignment:"right"}]:[]]}]},{canvas:[{type:"line",x1:0,y1:4,x2:500,y2:4,lineWidth:2,lineColor:"#2b6cb0"},{type:"line",x1:0,y1:8,x2:500,y2:8,lineWidth:1,lineColor:"#4a5568"}],margin:[0,10,0,0],alignment:"center"}],margin:s}]]},layout:"noBorders",margin:[0,0,0,20]}}createBillPatientInfo(t,n,a,r=null){return{table:{headerRows:0,widths:["50%","50%"],body:[[{stack:[{text:"BILL TO:",style:"sectionHeader",alignment:"left"},{text:t.patientName||t.name||"Unknown Patient",style:"patientInfo"},{text:`Patient ID: ${t.patientId||"N/A"} | Age: ${n.patientAge||t.age||"N/A"}`,style:"patientInfo"}],margin:[12,8,12,8]},{stack:[{text:`Invoice No: ${n.billNumber}`,style:"patientInfo"},{text:`Date: ${this.formatReceiptDate(n.billDate)}`,style:"patientInfo"},{text:`Appointment Date: ${this.formatReceiptDate(n.appointmentDate)}`,style:"patientInfo"},...r?.isGST&&r?.gstIdentifier?[{text:`GST No: ${r.gstIdentifier}`,style:"patientInfo",bold:!0}]:[]],margin:[12,8,12,8],alignment:"left"}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,0,0,15]}}createBillServicesTable(t){const n=t.services||[];if(n.length===0)return{text:"No services found",style:"noDataText"};const a=n.some(c=>parseFloat(c.discountAmount)>0);let r,s;a?(r=[{text:"Sr.",style:"tableHeader",fontSize:9},{text:"Description",style:"tableHeader",fontSize:9},{text:"HSN/SAC Code",style:"tableHeader",fontSize:9},{text:"Base Cost per unit (incl. GST)",style:"tableHeader",fontSize:9},{text:"Discount per unit",style:"tableHeader",fontSize:9},{text:"GST%",style:"tableHeader",fontSize:9},{text:"Taxable Value",style:"tableHeader",fontSize:9},{text:"GST Amount",style:"tableHeader",fontSize:9},{text:"Quantity",style:"tableHeader",fontSize:9},{text:"Total",style:"tableHeader",fontSize:9}],s=["4%","16%","9%","11%","10%","7%","11%","10%","8%","14%"]):(r=[{text:"Sr.",style:"tableHeader",fontSize:9},{text:"Description",style:"tableHeader",fontSize:9},{text:"HSN/SAC Code",style:"tableHeader",fontSize:9},{text:"Base Cost per unit (incl. GST)",style:"tableHeader",fontSize:9},{text:"GST%",style:"tableHeader",fontSize:9},{text:"Taxable Value",style:"tableHeader",fontSize:9},{text:"GST Amount",style:"tableHeader",fontSize:9},{text:"Quantity",style:"tableHeader",fontSize:9},{text:"Total",style:"tableHeader",fontSize:9}],s=["4%","19%","11%","13%","8%","12%","12%","9%","12%"]);const o=[r];n.forEach((c,A)=>{let d;a?d=[{text:(A+1).toString(),style:"tableCell"},{text:c.serviceDescription||"N/A",style:"tableCell"},{text:c.hsnSacCode||"N/A",style:"tableCell",alignment:"center"},{text:this.formatAmount(c.baseCost),style:"tableCell",alignment:"right"},{text:this.formatAmount(c.discountAmount),style:"tableCell",alignment:"right"},{text:`${c.gstPercent||0}%`,style:"tableCell",alignment:"center"},{text:this.formatAmount(c.gstExclusiveAmount||0),style:"tableCell",alignment:"right"},{text:this.formatAmount(c.gstAmount),style:"tableCell",alignment:"right"},{text:c.quantity?.toString()||"1",style:"tableCell",alignment:"center"},{text:this.formatAmount(c.totalWithGst),style:"tableCell",alignment:"right",bold:!0}]:d=[{text:(A+1).toString(),style:"tableCell"},{text:c.serviceDescription||"N/A",style:"tableCell"},{text:c.hsnSacCode||"N/A",style:"tableCell",alignment:"center"},{text:this.formatAmount(c.baseCost),style:"tableCell",alignment:"right"},{text:`${c.gstPercent||0}%`,style:"tableCell",alignment:"center"},{text:this.formatAmount(c.gstExclusiveAmount||0),style:"tableCell",alignment:"right"},{text:this.formatAmount(c.gstAmount),style:"tableCell",alignment:"right"},{text:c.quantity?.toString()||"1",style:"tableCell",alignment:"center"},{text:this.formatAmount(c.totalWithGst),style:"tableCell",alignment:"right",bold:!0}],o.push(d)});const i=[];return a&&i.push([{text:"Base Cost Total (incl. GST):",style:"summaryLabel",fontSize:9,alignment:"right"},{text:this.formatAmount(t.baseSubtotal),style:"summaryValue",fontSize:9,alignment:"right"}],[{text:"Line Item Discounts:",style:"summaryLabel",fontSize:9,alignment:"right"},{text:`-${this.formatAmount(t.totalLineDiscount)}`,style:"summaryValue",fontSize:9,alignment:"right"}],[{text:"Subtotal after Discounts (incl. GST):",style:"summaryLabel",fontSize:9,alignment:"right"},{text:this.formatAmount(t.baseSubtotal-t.totalLineDiscount),style:"summaryValue",fontSize:9,alignment:"right"}]),i.push([{text:"Taxable Value Total:",style:"summaryLabel",fontSize:9,alignment:"right"},{text:this.formatAmount(t.totalTaxableValue||0),style:"summaryValue",fontSize:9,alignment:"right"}],[{text:"GST Amount:",style:"summaryLabel",fontSize:9,alignment:"right"},{text:this.formatAmount(t.totalGSTAmount),style:"summaryValue",fontSize:9,alignment:"right"}]),t.additionalDiscount>0&&i.push([{text:"Additional Discount:",style:"summaryLabel",fontSize:9,alignment:"right"},{text:`-${this.formatAmount(t.additionalDiscount)}`,style:"summaryValue",fontSize:9,alignment:"right"}]),i.push([{text:"Grand Total (incl. GST):",style:"summaryLabelBold",fontSize:10,alignment:"right"},{text:this.formatAmount(t.grandTotal),style:"summaryValueBold",fontSize:10,alignment:"right"}]),[{table:{headerRows:1,widths:s,body:o},layout:{hLineWidth:(c,A)=>c===0||c===1?2:1,vLineWidth:()=>1,hLineColor:()=>"#2b6cb0",vLineColor:()=>"#e2e8f0",fillColor:c=>c===0?"#f8fafc":null},margin:[0,0,0,10]},{table:{headerRows:0,widths:["70%","30%"],body:i},layout:{hLineWidth:(c,A)=>c===A.table.body.length-1?2:0,vLineWidth:()=>0,hLineColor:()=>"#2b6cb0",fillColor:(c,A)=>c===A.table.body.length-1?"#f1f5f9":null},margin:[0,5,0,15]}]}createAssociatedReceiptSection(t,n=[]){const a=[{text:"ASSOCIATED PAYMENT RECEIPT",style:"sectionHeader",margin:[0,15,0,10]}];if(t){if(a.push({table:{headerRows:0,widths:["50%","50%"],body:[[{stack:[{text:"Receipt Information:",style:"summaryLabel"},{text:`Receipt No: ${t.identifier}`,style:"receiptInfo"},{text:`Receipt Date: ${this.formatReceiptDate(t.paymentReceiptDate)}`,style:"receiptInfo"}],margin:[8,8,8,8]},{stack:[{text:"Payment Summary:",style:"summaryLabel"},{text:`Total Paid: ${this.formatAmount(n.reduce((r,s)=>r+(parseFloat(s.amount)||0),0))}`,style:"summaryValuePaid"},{text:`Balance Due: ${this.formatAmount(Math.max(0,t.balanceDue||0))}`,style:t.balanceDue>0?"summaryValueDue":"summaryValuePaid"}],margin:[8,8,8,8]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,0,0,10]}),n&&n.length>0){const r=[[{text:"Date",style:"tableHeader"},{text:"Method",style:"tableHeader"},{text:"Amount",style:"tableHeader"}]];n.forEach(s=>{r.push([{text:s.paymentDate||this.formatReceiptDate(s.paymentDate)||"N/A",style:"tableCell"},{text:s.paymentMethod||s.mode||"N/A",style:"tableCell"},{text:this.formatAmount(s.amount),style:"tableCell",alignment:"right"}])}),a.push({table:{headerRows:1,widths:["35%","30%","35%"],body:r},layout:{hLineWidth:s=>s===0||s===1?2:1,vLineWidth:()=>1,hLineColor:()=>"#2b6cb0",vLineColor:()=>"#e2e8f0",fillColor:s=>s===0?"#f8fafc":null},margin:[0,0,0,10]})}}else a.push({text:"No associated payment receipt found",style:"noDataText"});return a}createPharmacyBillTitle(t,n,a){const r=n.patientId||t.patientId||"N/A",s=n.patientName||t.name||t.patientName||"Unknown Patient";return{columns:[{width:"40%",text:"Tax Invoice cum Bill of Supply",style:"receiptTitle",fontSize:16,alignment:"left"},{width:"60%",table:{headerRows:0,widths:["50%","50%"],body:[[{text:`Patient: ${s} (ID${r})`,style:"patientInfo",fontSize:9,margin:[0,0,0,0]},{text:`Doctor: ${n.doctorName||"Unknown"}`,style:"patientInfo",fontSize:9,alignment:"right",margin:[0,0,0,0]}],[{text:`Invoice No.: ${n.identifier||"N/A"}`,style:"patientInfo",fontSize:9,margin:[0,1,0,0]},{text:`Date: ${this.formatReceiptDate(n.billDate)}`,style:"patientInfo",fontSize:9,alignment:"right",margin:[0,1,0,0]}]]},layout:"noBorders",alignment:"right"}],margin:[0,3,0,3]}}createPharmacyBillHeader(t){const n=t.header||"";return{table:{headerRows:0,widths:["*"],body:[[{stack:[{columns:[{width:"*",stack:n?n.split(/\r?\n|\r/).map(a=>a.trim()).filter(a=>a).map((a,r,s)=>({text:a,fontSize:r===0?14:12,color:r===0?"#1a202c":"#4a5568",alignment:"left",margin:[0,r===0?3:1,0,r===s.length-1?0:.5]})):[{text:"",fontSize:10}]},{width:"auto",stack:t.gstNumber?[{text:`GSTIN: ${t.gstNumber}`,fontSize:10,color:"#4a5568",alignment:"right",margin:[0,3,0,0]}]:[]}],margin:[0,0,0,0]},{canvas:[{type:"line",x1:0,y1:4,x2:762,y2:4,lineWidth:2,lineColor:"#2b6cb0"},{type:"line",x1:0,y1:8,x2:762,y2:8,lineWidth:1,lineColor:"#4a5568"}],margin:[0,3,0,0],alignment:"center"}],margin:[40,10,40,8]}]]},layout:"noBorders",margin:[0,0,0,3]}}createPharmacyBillPatientInfo(t,n,a){const r=n.patientId||t.patientId||"N/A",s=n.patientName||t.name||t.patientName||"Unknown Patient";return{table:{headerRows:0,widths:["35%","30%","35%"],body:[[{stack:[{text:`Patient: ${s} (ID${r})`,style:"patientInfo"},...n.patientPhone?[{text:`Phone: ${n.patientPhone}`,style:"patientInfo",margin:[0,2,0,0]}]:[]],margin:[6,2,6,2]},{stack:[{text:`Doctor: ${n.doctorName||"Unknown"}`,style:"patientInfo"}],margin:[6,2,6,2]},{columns:[{width:"auto",text:`Invoice No.: ${n.identifier||"N/A"}`,style:"patientInfo"},{width:"*",text:`Date: ${this.formatReceiptDate(n.billDate)}`,style:"patientInfo",alignment:"right"}],margin:[6,2,6,2]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,0,0,8]}}createPharmacyBillItemsTable(t){const n=t.items||[];if(n.length===0)return{text:"No items found",style:"noDataText",margin:[0,10]};const a=[{text:"Item",style:"tableHeader",fontSize:9},{text:"HSN",style:"tableHeader",alignment:"center",fontSize:9},{text:"Batch",style:"tableHeader",fontSize:9},{text:"Expiry",style:"tableHeader",fontSize:9},{text:"MRP/Unit",style:"tableHeader",alignment:"right",fontSize:8},{text:"Discount",style:"tableHeader",alignment:"right",fontSize:9},{text:"Taxable/Unit",style:"tableHeader",alignment:"right",fontSize:8},{text:"GST",style:"tableHeader",alignment:"right",fontSize:9},{text:"Final/Unit",style:"tableHeader",alignment:"right",fontSize:9},{text:"Qty",style:"tableHeader",alignment:"right",fontSize:9},{text:"Total",style:"tableHeader",alignment:"right",fontSize:9}],r=["24%","7%","8%","8%","8%","9%","9%","5%","9%","5%","8%"],s=[a];return n.forEach((o,i)=>{const c=o.taxableValuePerUnit!==void 0?o.taxableValuePerUnit:this.calculatePharmacyTaxableValuePerUnit(o),A=o.finalValuePerUnit!==void 0?o.finalValuePerUnit:this.calculatePharmacyFinalValuePerUnit(o),d=o.itemTotal!==void 0?o.itemTotal:this.calculatePharmacyItemTotal(o);let f="N/A",m=!1;if(o.expiryDate){const b=typeof o.expiryDate=="number"?new Date(o.expiryDate*1e3):new Date(o.expiryDate);if(!isNaN(b.getTime())){f=this.formatReceiptDate(o.expiryDate);const x=new Date;x.setHours(0,0,0,0),b.setHours(0,0,0,0),m=b<x}}const v=[{text:o.medicineName||"N/A",fontSize:9,bold:!0}];o.marketer&&v.push({text:"  ",fontSize:9,bold:!0},{text:o.marketer,fontSize:9});const y=o.batchNumber||"N/A",g=o.mrp&&o.unitsPerPack&&o.unitsPerPack>0?o.mrp/o.unitsPerPack:0,w=[{text:v,style:"tableCell",fontSize:9},{text:o.hsnCode||"N/A",style:"tableCell",fontSize:9,alignment:"center"},{text:y,style:"tableCell",fontSize:9},{text:f,style:"tableCell",fontSize:9,color:m?"#c53030":"#1a202c"},{text:this.formatAmount(g),style:"tableCell",fontSize:9,alignment:"right"},{text:`${o.discountPercentage||0}%`,style:"tableCell",fontSize:9,alignment:"right"},{text:this.formatAmount(c),style:"tableCell",fontSize:9,alignment:"right"},{text:`${o.gstPercentage||0}%`,style:"tableCell",fontSize:9,alignment:"right"},{text:this.formatAmount(A),style:"tableCell",fontSize:9,alignment:"right"},{text:(o.quantityUnits||0).toString(),style:"tableCell",fontSize:9,alignment:"right"},{text:this.formatAmount(d),style:"tableCell",fontSize:9,alignment:"right",bold:!0}];s.push(w)}),{table:{headerRows:1,widths:r,body:s},layout:{hLineWidth:(o,i)=>o===0||o===1?2:1,vLineWidth:()=>1,hLineColor:()=>"#2b6cb0",vLineColor:()=>"#e2e8f0"},margin:[0,0,0,3]}}calculatePharmacyTaxableValuePerUnit(t){if(!t.mrp||!t.unitsPerPack||t.unitsPerPack<=0)return 0;const n=parseFloat(t.mrp)||0,a=parseFloat(t.unitsPerPack)||1,r=parseFloat(t.gstPercentage)||0,s=parseFloat(t.discountPercentage)||0,o=n/a,i=1+r/100,c=o/i,A=1-s/100;return c*A}calculatePharmacyFinalValuePerUnit(t){if(!t.mrp||!t.unitsPerPack||t.unitsPerPack<=0)return 0;const n=this.calculatePharmacyTaxableValuePerUnit(t),r=1+(parseFloat(t.gstPercentage)||0)/100;return n*r}calculatePharmacyItemTotal(t){if(!t.mrp||!t.unitsPerPack||t.unitsPerPack<=0)return 0;const n=this.calculatePharmacyFinalValuePerUnit(t),a=parseFloat(t.quantityUnits)||0;return n*a}createPharmacyBillSummary(t){const n=[],a=(c,A,d=!1,f=9)=>{const m=d?{text:c,fontSize:f,bold:!0}:{text:c,fontSize:f},h=d?{text:A,fontSize:f,bold:!0}:{text:A,fontSize:f};n.push({columns:[{text:m.text,fontSize:m.fontSize,bold:m.bold,alignment:"right"},{text:h.text,fontSize:h.fontSize,bold:h.bold,alignment:"right",margin:[8,0,0,0]}],margin:[0,.5,0,.5]})};a("Total MRP:",this.formatAmount(t.totalMrp||0)),a("Total Discount:",`-${this.formatAmount(t.totalDiscount||0)}`);const r=this.formatAmount(t.totalGst||0);a("Total GST:",r);const s=this.formatAmount(t.totalCgst||0),o=this.formatAmount(t.totalSgst||0);n.push({columns:[{width:"*",text:"",fontSize:9},{width:"auto",text:`(CGST: ${s}, SGST: ${o})`,fontSize:9,alignment:"right"}],margin:[0,.5,0,.5]}),t.additionalDiscountAmount>0&&a("Additional Discount:",`-${this.formatAmount(t.additionalDiscountAmount)}`,!1),a("Net Amount:",this.formatAmount(t.netAmount||0),!0);const i=t.roundOff||0;return a("Round Off:",`${i>0?"+":""}${this.formatAmount(i)}`),a("Final Amount:",this.formatAmount(t.finalAmount||0),!0),{stack:n,margin:[0,0,0,8],alignment:"right"}}createPharmacyBillBottomSection(t){const n=[];t.payments&&t.payments.length>0?(n.push({text:"Payment Information",style:"sectionHeader",margin:[0,0,0,5]}),t.payments.forEach(s=>{const o=this.formatAmount(s.amount),i=s.mode||"Cash";n.push({text:`${o} - ${i}`,fontSize:9,margin:[0,2,0,2]})})):(n.push({text:"Payment Information",style:"sectionHeader",margin:[0,0,0,5]}),n.push({text:"No payments recorded",fontSize:9,color:"#718096",margin:[0,2,0,2]}));const a={stack:[{text:"",fontSize:10},{text:"Sign",style:"sectionHeader",alignment:"center",margin:[0,0,0,0]}],margin:[10,0,10,0]},r=this.createPharmacyBillSummary(t);return{columns:[{width:"33%",stack:n,margin:[0,5,10,0]},{width:"33%",stack:[a],margin:[10,5,10,0]},{width:"34%",stack:[r],margin:[10,5,0,0]}],margin:[0,10,0,0]}}createPharmacyBillFooter(t,n,a){return{margin:[40,5,40,15],table:{widths:["*"],body:[[{stack:[{text:"This is a computer generated bill",style:"disclaimer"}],border:[!1,!0,!1,!1],borderColor:["","#e2e8f0","",""]}]]},layout:"noBorders"}}createBillFooter(t,n,a){return{margin:[40,10,40,20],table:{widths:["*"],body:[[{stack:[{text:"Tax Invoice cum Bill of Supply - Computer Generated",style:"disclaimer"},{text:"This is a system generated bill and does not require physical signature.",style:"disclaimer"},...a?.clinicName?[{text:`${a.clinicName} - Professional Medical Services`,style:"medicalFooter"}]:[],{text:`Page ${t} of ${n}`,style:"medicalFooter"}],border:[!1,!0,!1,!1],borderColor:["","#e2e8f0","",""]}]]},layout:"noBorders"}}}const SA=new i_e,Dw=["Dermatology","Cardiology","Dentistry","Endocrinology","Neurology","Pediatrics","Orthopedics","Psychiatry","Ophthalmology","Gynecology"],mT=["Tablet","Capsule","Chewable Tablet","Effervescent Tablet","Sublingual Tablet","Gelatin coated Tablet","Soft Gelatin Capsule","Soft Gelatine Capsule","Capsule ER","Capsule XR","Eye Capsule","Vaginal Capsule","Capsule Combipack","TabCap","RotaCap","Instacap","TransCap","AliCap","RediCap","RespiCap","NexCap","OxyCap","Vegicap","Captab","Caplet","Pellet","Softule","Opticops","Diskette","Grain","Powder","Powder for Injection","Powder for Oral Suspension","Powder for Inhalation","Powder for Infusion","Powder for Oral Solution","Dusting Powder","Dry Syrup","Dry Suspension","Syrup","Solution","Suspension","Lotion","Liquid","Oral Solution","Oral Suspension","Solution for Injection","Solution for Infusion","Solution for Inhalation","Suspension for Injection","Nasal Solution","Ophthalmic Solution","Ophthalmic Suspension","Redimix Suspension","Rediuse Suspension","Oral Liquid","Oral Emulsion","Emulsion","Ophthalmic Emulsion","Elixir","Tonic","Linctus","Mouth Wash","Mouthwash","Expectorant","Cream","Ointment","Gel","Eye Gel","Eye Ointment","Ophthalmic Gel","Oral Gel","Dental Gel","Vaginal Gel","Rectal Gel","Rectal Ointment","Rectal Cream","Vaginal Cream","Eye Cream","Paste","Oral Paste","Gum Paint","Mouth Paint","Paint","Toothpaste","Serum","Oil","Moisturiser","Shampoo","Conditioner","Face Wash","Soap","Scrub","Cleanser","Liniment","Foam","Drop","Eye Drop","Ear Drop","Oral Drop","Nasal Drop","Eye/Ear Drop","Spray","Nasal Spray","Mouth Spray","Vaginal Spray","Intranasal Spray","Inhaler","Respule","Autohaler","Multihaler","Transihaler","Transpule","Oxipule","Nebuliser","Aerosol","Injection","Infusion","Prefilled Syringe","Water for Injection","Solvent for Injection","Ampule","Ampoule","Vial","Patch","Transdermal Patch","Vaginal Suppository","Suppository","Pessary","Enema","Lozenge","Pastille","Chewing Gum","Gummy","Gum","Bio-Adhesive","Disintegrating Strip","Strip","Film","Gargle","Oral Jelly","Jelly","Nail Lacquer","Intrauterine system","Wipe","Kit","Combo Pack","Tablet Combikit","Sachet","Bottle","Pen","Disposable Pen","Pre-filled Pen","Cartridge","Tube","Jar","Pouch","Bar","Box","Toothbrush","Vaccine","Granule","Particle","Husk","Various","Unit"],Uw=["Strip","Bottle","Box","Sachet","Tube","Vial","Ampoule","Ampule","Cartridge","Pouch","Jar","Kit","Combo Pack","Unit","Bag","Can","Dose","Pack"],tH=[{label:"No Translation",value:"none"},{label:"Gujarati",value:"gujarati"},{label:"Marathi",value:"marathi"},{label:"Hindi",value:"hindi"},{label:"Kannada",value:"kannada"},{label:"Malayalam",value:"malayalam"},{label:"Telugu",value:"telugu"},{label:"Tamil",value:"tamil"}],nH=[{name:"Practo",value:"practo"},{name:"Eka.Care",value:"ekacare"},{name:"Healthplix",value:"healthplix"},{name:"Evamed Custom Template",value:"evamed-custom"},{name:"TatvaCare",value:"tatvacare"}],aH=[{name:"Patient Records",value:"patients",disabled:!1}],hT=["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal","Andaman and Nicobar Islands","Chandigarh","Dadra and Nagar Haveli and Daman and Diu","Delhi","Jammu and Kashmir","Ladakh","Lakshadweep","Puducherry"],TE=Object.freeze(Object.defineProperty({__proto__:null,dataImportTypes:aH,doctorSpecialization:Dw,emrSystems:nH,indianStates:hT,packTypeOptions:Uw,productPhysicalForm:mT,translationLanguages:tH},Symbol.toStringTag,{value:"Module"})),l_e={class:"d-flex align-center"},u_e={key:0,class:"d-flex justify-center align-center pdf-loading"},c_e={key:1,class:"pdf-viewer"},d_e=["src"],A_e={key:2,class:"d-flex justify-center align-center pdf-error"},f_e={__name:"pdf-share-component",props:{contentType:{type:String,required:!0,validator:e=>["consultation","treatment-plan","receipt","bill","pharmacy-bill","certificate","leave-of-absence"].includes(e)},data:{type:Object,required:!0},patient:{type:Object,required:!0}},emits:["pdfGenerated"],setup(e,{emit:t}){const n=e,a=t,r=ea(),s=ee(()=>r.getters["doctorModule/currentDoctor"]),{showWarning:o}=ra(),i=ee({get:()=>r.state.selectedTranslationLanguage,set:J=>r.dispatch("updateSelectedTranslationLanguage",J)}),c=ee(()=>{const J=n.data?.printConfigurations?.headerSize;return J!=null?Math.round(J*72):130}),A=M(!1),d=M(!1),f=M(null),m=M(null),h=M(null),v=M(!1),y=M(!1),g=M(!1);let w=null;const b={consultation:{title:"Prescription PDF",filenamePrefix:"prescription"},"treatment-plan":{title:"Treatment Plan PDF",filenamePrefix:"treatment-plan"},receipt:{title:"Payment Receipt PDF",filenamePrefix:"receipt"},bill:{title:"Tax Invoice cum Bill of Supply PDF",filenamePrefix:"bill"},"pharmacy-bill":{title:"Pharmacy Bill PDF",filenamePrefix:"pharmacy-bill"},certificate:{title:"Medical Fitness Certificate PDF",filenamePrefix:"certificate"},"leave-of-absence":{title:"Leave of Absence PDF",filenamePrefix:"leave-of-absence"}},x=ee(()=>b[n.contentType]);ee(()=>x.value.title);const T=ee(()=>{const J=n.patient.name||n.patient.patientName||"patient",se=new Date().toISOString().split("T")[0];return`${x.value.filenamePrefix}-${J}-${se}.pdf`}),U=M(""),k=M(!1),S=ee(()=>{const J=n.data.printConfigurations,se={...n.data,translatedPatientNotes:U.value,translationLanguage:i.value,translationFailed:i.value&&i.value!=="none"&&n.data.consultation?.patientNotes?.trim()&&E(n.data.consultation.patientNotes)&&!U.value};if(n.contentType!=="pharmacy-bill"&&n.contentType!=="certificate"&&n.contentType!=="leave-of-absence"&&(se.headerSize=c.value),(n.contentType==="certificate"||n.contentType==="leave-of-absence")&&(se.printConfigurations=J||{}),J&&J.doctorName)return se;const G=s.value,D={doctorName:G?.doctorName||"Doctor",doctorDegrees:G?.doctorDegrees||"MBBS",doctorRegistrationNumber:G?.doctorRegistrationNumber||"REG001",email:G?.email||"",clinicAddress:G?.clinicAddress||`Medical Center
Healthcare District`,contactNumber:G?.contactNumber||"+1-234-567-8900",useHeader:!0,pageSize:"A4",doctorId:G?.id||1};return{...se,printConfigurations:D}}),E=J=>{if(!J||!J.trim())return!1;const se=J.trim();return se.length<3?!1:![/^[-_.\/\\]+$/,/^[nN][aA]$/,/^[nN]\/[aA]$/,/^[nN][iI][lL]$/,/^[nN][oO][nN][eE]$/,/^[nN][oO][tT]\s+[aA][pP][pP][lL][iI][cC][aA][bB][lL][eE]$/i,/^[\s\-\.\,\;\:]*$/].some(D=>D.test(se))},C=async()=>{if(n.contentType!=="consultation"||!n.data.consultation?.patientNotes?.trim()||!i.value||i.value==="none"||!E(n.data.consultation.patientNotes)){U.value="";return}try{k.value=!0;const{translationLanguages:J}=await xr(async()=>{const{translationLanguages:ne}=await Promise.resolve().then(()=>TE);return{translationLanguages:ne}},void 0,import.meta.url),G=J.find(ne=>ne.value===i.value)?.label||i.value,{translateText:D}=await xr(async()=>{const{translateText:ne}=await import("./translationUtils-CEYWmmQU.js");return{translateText:ne}},[],import.meta.url),j=await D(n.data.consultation.patientNotes,G);if(!j||j.trim()===""||j===n.data.consultation.patientNotes){o(`Translation to ${G} temporarily unavailable - showing original text`),U.value="";return}U.value=j}catch(J){console.error("Error translating patient notes:",J);const{translationLanguages:se}=await xr(async()=>{const{translationLanguages:j}=await Promise.resolve().then(()=>TE);return{translationLanguages:j}},void 0,import.meta.url),D=se.find(j=>j.value===i.value)?.label||i.value;o(`Translation to ${D} temporarily unavailable - showing original text`),U.value=""}finally{k.value=!1}};We(()=>[n.data,n.patient],async()=>{g.value||(n.contentType==="consultation"&&i.value&&i.value!=="none"&&n.data.consultation?.patientNotes?.trim()?await C():U.value="",await new Promise(J=>setTimeout(J,100)),F())});const P=async(J,se)=>{w&&(clearTimeout(w),w=null),w=setTimeout(async()=>{J!==se&&n.data&&n.patient&&!g.value&&(n.contentType==="consultation"&&J&&J!=="none"&&n.data.consultation?.patientNotes?.trim()?await C():U.value="",await new Promise(G=>setTimeout(G,100)),F()),w=null},400)};We(i,(J,se)=>{P(J,se)}),cn(async()=>{n.contentType==="consultation"&&i.value&&i.value!=="none"&&n.data.consultation?.patientNotes?.trim()&&await C(),await new Promise(J=>setTimeout(J,200)),F()});const F=async()=>{if(g.value){console.log("PDF generation already in progress, skipping...");return}try{g.value=!0,console.log(`Generating ${n.contentType} PDF with Professional PDFMake...`),console.log("Data:",S.value),console.log("Patient:",n.patient),A.value=!0,m.value=null,d.value=!1,f.value=null;let J;if(n.contentType==="consultation"?J=await SA.generateConsultationPDF(S.value,n.patient):n.contentType==="treatment-plan"?J=await SA.generateTreatmentPlanPDF(S.value,n.patient):n.contentType==="receipt"?J=await SA.generateReceiptPDF(S.value,n.patient):n.contentType==="bill"?J=await SA.generateBillPDF(S.value,n.patient):n.contentType==="pharmacy-bill"?J=await SA.generatePharmacyBillPDF(S.value,n.patient):(n.contentType==="certificate"||n.contentType==="leave-of-absence")&&((S.value.documentData?.documentType||(n.contentType==="leave-of-absence"?"leave-of-absence":"medical-fitness-certificate"))==="leave-of-absence"?J=await SA.generateLeaveOfAbsencePDF(S.value.documentData,n.patient,S.value.printConfigurations):J=await SA.generateMedicalFitnessCertificatePDF(S.value.documentData,n.patient,S.value.printConfigurations)),!J)throw new Error(`PDF generation not supported for content type: ${n.contentType}`);J.getBlob(se=>{A.value=!1,g.value=!1,d.value=!0,h.value=se;const G=URL.createObjectURL(se);f.value=G,a("pdfGenerated",se),console.log("Professional PDF generation with PDFMake completed successfully")})}catch(J){console.error("Error generating Professional PDF with PDFMake:",J),m.value="Failed to generate PDF. Please try again.",A.value=!1,g.value=!1}},N=async()=>{f.value&&(URL.revokeObjectURL(f.value),f.value=null),h.value=null,await F()},L=async()=>{if(!h.value){console.error("No PDF to share");return}try{v.value=!0;const J=await Z(h.value),se=await $3(J,T.value);if(se.success){const G=se.data.file_url;await ie(G),alert("Please check the browser window to complete sharing PDF via WhatsApp.")}else throw new Error(`Failed to upload PDF: ${se.error}`)}catch(J){console.error("Error sharing PDF:",J),alert(`Failed to share PDF: ${J.message}`)}finally{v.value=!1}},ie=async J=>{const se=s.value?.doctorName||"Your Doctor",G=n.patient.name||n.patient.patientName||"Patient",D=n.patient.contactNumber||n.patient.phoneNumber;let j;if(n.contentType==="consultation"){const H=za(S.value.consultation.consultationDate),te=S.value.consultation.followupDate?za(S.value.consultation.followupDate):"Not scheduled";j=`Hi ${G},

Your prescription from Dr.${se} for consultation on ${H} is ready.

 **View your prescription:** ${J}
 (Please download document within 24 hours)

 Please follow the dosage instructions carefully and complete the full course of medication. 
 Please schedule your follow-up appointment for: ${te}.

 For any questions, please contact your doctor.`,S.value.doctor?.doctorReviewLink&&(j+=`

 Kindly leave your feedback for Dr.${se}: ${S.value.doctor.doctorReviewLink}`),j+=`

Best regards,
Dr.${se}`}else if(n.contentType==="treatment-plan"){const H=S.value.treatmentPlan.treatmentPlanName||"Treatment Plan",te=za(Dn());j=`Hello ${G},

Your treatment plan from Dr. ${se} is ready.

 **Treatment Plan:** ${H}
 **Date:** ${te}

 **View your treatment plan:** ${J}
 (Please download document within 24 hours)

 Please follow the treatment schedule and contact us for any questions.

Best regards,
Dr. ${se}`}else if(n.contentType==="receipt"){const H=S.value.consultation.receiptNumber||"Receipt",te=za(S.value.consultation.receiptDate||Dn());j=`Hello ${G},

Your payment receipt from Dr. ${se} is ready.

 **Receipt Number:** ${H}
 **Receipt Date:** ${te}

 **View your receipt:** ${J}
 (Please download document within 24 hours)

 Thank you for your payment. Please keep this receipt for your records.

Best regards,
Dr. ${se}`}else if(n.contentType==="bill"){const H=S.value.consultation.billNumber||"Bill",te=za(S.value.consultation.billDate||Dn()),Y=S.value.consultation.grandTotal||0;j=`Hello ${G},

Your tax invoice cum bill of supply from Dr. ${se} is ready.

 **Bill Number:** ${H}
 **Bill Date:** ${te}
 **Total Amount:** ${Y.toFixed(2)}

 **View your bill:** ${J}
 (Please download document within 24 hours)

Best regards,
Dr. ${se}`}else if(n.contentType==="certificate"){const H=S.value.documentData||{},te=H.documentType||"medical-fitness-certificate",Y=H.certificateDate?za(H.certificateDate):za(Dn());if(te==="leave-of-absence"){const K=H.activity||"",X=H.reason||"",ae=H.tillDate?za(H.tillDate):"";j=`Hello ${G},

Your leave of absence certificate from Dr. ${se} is ready.

 **Certificate Type:** Leave of Absence Certificate
 **Document Date:** ${Y}
${K?` **From:** ${K}`:""}
${X?` **Reason:** ${X}`:""}
${ae?` **Valid Till:** ${ae}`:""}

 **View your certificate:** ${J}
 (Please download document within 24 hours)

 Please keep this certificate for your records.

Best regards,
Dr. ${se}`}else{const K=H.purpose||"medical fitness",X=H.validityPeriod||"";j=`Hello ${G},

Your medical fitness certificate from Dr. ${se} is ready.

 **Certificate Type:** Medical Fitness Certificate
 **Certificate Date:** ${Y}
${` **Purpose:** ${K}`}
${X?` **Validity:** ${X}`:""}

 **View your certificate:** ${J}
 (Please download document within 24 hours)

 Please keep this certificate for your records.

Best regards,
Dr. ${se}`}}else if(n.contentType==="leave-of-absence"){const H=S.value.documentData||{},te=H.certificateDate?za(H.certificateDate):za(Dn()),Y=H.activity||"",K=H.reason||"",X=H.tillDate?za(H.tillDate):"";j=`Hello ${G},

Your leave of absence certificate from Dr. ${se} is ready.

 **Certificate Type:** Leave of Absence Certificate
 **Document Date:** ${te}
${Y?` **From:** ${Y}`:""}
${K?` **Reason:** ${K}`:""}
${X?` **Valid Till:** ${X}`:""}

 **View your certificate:** ${J}
 (Please download document within 24 hours)

 Please keep this certificate for your records.

Best regards,
Dr. ${se}`}else if(n.contentType==="pharmacy-bill"){const H=S.value.pharmacyBill?.identifier||"Bill",te=za(S.value.pharmacyBill?.billDate||Dn()),Y=S.value.pharmacyBill?.finalAmount||0;j=`Hello ${G},

Your pharmacy bill from Dr. ${se} is ready.

 **Bill Number:** ${H}
 **Bill Date:** ${te}
 **Total Amount:** ${Y.toFixed(2)}

 **View your bill:** ${J}
 (Please download document within 24 hours)

 Thank you for your purchase.

Best regards,
Dr. ${se}`}j||(j=`Hello ${G},

Your document from Dr. ${se} is ready.

 **View your document:** ${J}
 (Please download document within 24 hours)

Best regards,
Dr. ${se}`);const ne=`https://api.whatsapp.com/send?phone=${D}&text=${encodeURIComponent(j)}`;try{const{ipcRenderer:H}=window.require("electron"),te=await H.invoke("open-external",ne);te.success?console.log("Successfully opened WhatsApp with system default browser"):(console.error("Failed to open WhatsApp:",te.error),window.open(ne,"_blank","noopener,noreferrer"))}catch(H){console.error("Failed to use Electron IPC:",H),window.open(ne,"_blank","noopener,noreferrer")}},le=async()=>{if(!h.value){console.error("No PDF to share");return}try{y.value=!0;const J=await Z(h.value),se=await $3(J,T.value);if(se.success){const G=se.data.file_url;await Q(G),alert("Please check your email client to complete sharing PDF via email.")}else throw new Error(`Failed to upload PDF: ${se.error}`)}catch(J){console.error("Error sharing PDF via email:",J),alert(`Failed to share PDF via email: ${J.message}`)}finally{y.value=!1}},Q=async J=>{const se=s.value?.doctorName||"Your Doctor",G=n.patient.name||n.patient.patientName||"Patient",D=n.patient.email||n.patient.emailAddress;let j,ne;if(n.contentType==="consultation"){const te=za(S.value.consultation.consultationDate),Y=S.value.consultation.followupDate?za(S.value.consultation.followupDate):"Not scheduled";j=`Prescription - Consultation ${te} - Dr. ${se}`,ne=`Dear ${G},

Your prescription from Dr. ${se} for the consultation on ${te} is ready for review.

You can access your prescription document by clicking the link below:

${J}

Please note: This document will be available for download for 24 hours.

Important Instructions:
- Please follow the dosage instructions carefully
- Complete the full course of medication as prescribed
- Schedule your follow-up appointment for: ${Y}

If you have any questions or concerns, please contact our clinic directly.`,S.value.doctor?.doctorReviewLink&&(ne+=`

We value your feedback. Please share your experience: ${S.value.doctor.doctorReviewLink}`),ne+=`

Best regards,
Dr. ${se}
${s.value?.clinicAddress||""}
${s.value?.contactNumber||""}`}else if(n.contentType==="treatment-plan"){const te=S.value.treatmentPlan.treatmentPlanName||"Treatment Plan",Y=za(Dn());j=`Treatment Plan - ${te} - Dr. ${se}`,ne=`Dear ${G},

Your treatment plan from Dr. ${se} has been prepared.

Treatment Plan Details:
- Plan Name: ${te}
- Date Created: ${Y}

You can access your treatment plan document by clicking the link below:

${J}

Please note: This document will be available for download for 24 hours.

Please follow the treatment schedule as outlined in the document. If you have any questions or concerns, please contact our clinic directly.

Best regards,
Dr. ${se}
${s.value?.clinicAddress||""}
${s.value?.contactNumber||""}`}else if(n.contentType==="receipt"){const te=S.value.consultation.receiptNumber||"Receipt",Y=za(S.value.consultation.receiptDate||Dn());j=`Payment Receipt - ${te} - Dr. ${se}`,ne=`Dear ${G},

Your payment receipt from Dr. ${se} is ready.

Receipt Details:
- Receipt Number: ${te}
- Receipt Date: ${Y}

You can access your receipt document by clicking the link below:

${J}

Please note: This document will be available for download for 24 hours.

Thank you for your payment. Please keep this receipt for your records.

Best regards,
Dr. ${se}
${s.value?.clinicAddress||""}
${s.value?.contactNumber||""}`}else if(n.contentType==="bill"){const te=S.value.consultation.billNumber||"Bill",Y=za(S.value.consultation.billDate||Dn()),K=S.value.consultation.grandTotal||0;j=`Tax Invoice - ${te} - Dr. ${se}`,ne=`Dear ${G},

Your tax invoice cum bill of supply from Dr. ${se} is ready.

Invoice Details:
- Bill Number: ${te}
- Bill Date: ${Y}
- Total Amount: ${K.toFixed(2)}

You can access your invoice document by clicking the link below:

${J}

Please note: This document will be available for download for 24 hours.

Best regards,
Dr. ${se}
${s.value?.clinicAddress||""}
${s.value?.contactNumber||""}`}else if(n.contentType==="pharmacy-bill"){const te=S.value.pharmacyBill?.identifier||"Bill",Y=za(S.value.pharmacyBill?.billDate||Dn()),K=S.value.pharmacyBill?.finalAmount||0;j=`Pharmacy Bill - ${te} - Dr. ${se}`,ne=`Dear ${G},

Your pharmacy bill from Dr. ${se} is ready.

Bill Details:
- Bill Number: ${te}
- Bill Date: ${Y}
- Total Amount: ${K.toFixed(2)}

You can access your pharmacy bill document by clicking the link below:

${J}

Please note: This document will be available for download for 24 hours.

Thank you for your purchase.

Best regards,
Dr. ${se}
${s.value?.clinicAddress||""}
${s.value?.contactNumber||""}`}else if(n.contentType==="certificate"){const te=S.value.documentData||{},Y=te.certificateDate?za(te.certificateDate):za(Dn()),K=te.purpose||"medical fitness",X=te.validityPeriod||"";j=`Medical Fitness Certificate - Dr. ${se}`,ne=`Dear ${G},

Your medical fitness certificate from Dr. ${se} is ready.

Certificate Details:
- Certificate Type: Medical Fitness Certificate
- Certificate Date: ${Y}
${`- Purpose: ${K}`}
${X?`- Validity: ${X}`:""}

You can access your certificate document by clicking the link below:

${J}

Please note: This document will be available for download for 24 hours.

Please keep this certificate for your records.

Best regards,
Dr. ${se}
${s.value?.clinicAddress||""}
${s.value?.contactNumber||""}`}else if(n.contentType==="leave-of-absence"){const te=S.value.documentData||{},Y=te.certificateDate?za(te.certificateDate):za(Dn()),K=te.activity||"",X=te.reason||"",ae=te.tillDate?za(te.tillDate):"";j=`Leave of Absence Certificate - Dr. ${se}`,ne=`Dear ${G},

Your leave of absence certificate from Dr. ${se} is ready.

Certificate Details:
- Certificate Type: Leave of Absence Certificate
- Document Date: ${Y}
${K?`- From: ${K}`:""}
${X?`- Reason: ${X}`:""}
${ae?`- Valid Till: ${ae}`:""}

You can access your certificate document by clicking the link below:

${J}

Please note: This document will be available for download for 24 hours.

Please keep this certificate for your records.

Best regards,
Dr. ${se}
${s.value?.clinicAddress||""}
${s.value?.contactNumber||""}`}(!j||!ne)&&(j=`Document from Dr. ${se}`,ne=`Dear ${G},

Your document from Dr. ${se} is ready.

You can access your document by clicking the link below:

${J}

Please note: This document will be available for download for 24 hours.

Best regards,
Dr. ${se}
${s.value?.clinicAddress||""}
${s.value?.contactNumber||""}`);let H="mailto:";D&&(H+=encodeURIComponent(D)),H+=`?subject=${encodeURIComponent(j)}&body=${encodeURIComponent(ne)}`;try{const{ipcRenderer:te}=window.require("electron"),Y=await te.invoke("open-external",H);Y.success?console.log("Successfully opened email client with system default email application"):(console.error("Failed to open email client:",Y.error),window.open(H,"_blank","noopener,noreferrer"))}catch(te){console.error("Failed to use Electron IPC:",te),window.open(H,"_blank","noopener,noreferrer")}},Z=J=>new Promise((se,G)=>{const D=new FileReader;D.readAsDataURL(J),D.onload=()=>{const j=D.result.split(",")[1];se(j)},D.onerror=j=>G(j)}),ce=()=>{console.log("PDF loaded in iframe")};return zl(()=>{w&&(clearTimeout(w),w=null),f.value&&URL.revokeObjectURL(f.value)}),(J,se)=>{const G=I("v-select"),D=I("v-icon"),j=I("v-btn"),ne=I("v-tooltip"),H=I("v-col"),te=I("v-row"),Y=I("v-card"),K=I("v-progress-circular"),X=I("v-alert-title"),ae=I("v-alert");return R(),me(ze,null,[l(te,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[l(H,{cols:"12"},{default:u(()=>[l(Y,{rounded:"0",class:"pa-0",color:"surfaceContainerHigh"},{default:u(()=>[l(te,{"no-gutters":"",align:"center",class:"px-2 py-1"},{default:u(()=>[l(H,{cols:"12",class:"d-flex align-center justify-end"},{default:u(()=>[p("div",l_e,[e.contentType==="consultation"?(R(),ve(G,{key:0,modelValue:i.value,"onUpdate:modelValue":se[0]||(se[0]=oe=>i.value=oe),items:Oe(tH),"item-title":"label","item-value":"value",label:"Translation Language",density:"compact",variant:"underlined",clearable:"",style:{"max-width":"200px"},class:"text-caption compact-select mr-2","hide-details":"",disabled:A.value},null,8,["modelValue","items","disabled"])):_e("",!0),l(ne,{text:"WhatsApp PDF"},{activator:u(({props:oe})=>[l(j,Fe({rounded:"x-small",size:"small",onClick:L,class:"mr-1 btn-hover-base",disabled:!d.value,loading:v.value},oe),{default:u(()=>[l(D,{size:"large"},{default:u(()=>[...se[1]||(se[1]=[p("img",{src:z_,alt:"Share PDF",class:"whatsapp-icon"},null,-1)])]),_:1})]),_:1},16,["disabled","loading"])]),_:1}),l(ne,{text:"Email PDF"},{activator:u(({props:oe})=>[l(j,Fe({rounded:"x-small",size:"small",onClick:le,class:"mr-1 btn-hover-base",disabled:!d.value,loading:y.value},oe),{default:u(()=>[l(D,{size:"large"},{default:u(()=>[...se[2]||(se[2]=[p("img",{src:Dve,alt:"Email PDF",class:"email-icon"},null,-1)])]),_:1})]),_:1},16,["disabled","loading"])]),_:1}),l(j,{rounded:"x-small",size:"small",variant:"outlined",onClick:N,class:"btn-hover-base"},{default:u(()=>[l(D,{size:"large"},{default:u(()=>[...se[3]||(se[3]=[p("img",{src:fg,alt:"Refresh"},null,-1)])]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(te,{"no-gutters":"",class:"pdf-row"},{default:u(()=>[l(H,{cols:"12",class:"pdf-container"},{default:u(()=>[A.value?(R(),me("div",u_e,[l(K,{indeterminate:"",color:"primary",size:"64"}),se[4]||(se[4]=p("span",{class:"ml-4"},"Generating PDF...",-1))])):f.value?(R(),me("div",c_e,[p("iframe",{src:f.value,width:"100%",height:"100%",style:{border:"none","border-radius":"8px"},onLoad:ce},null,40,d_e)])):m.value?(R(),me("div",A_e,[l(ae,{type:"error",variant:"tonal"},{append:u(()=>[l(j,{onClick:N,variant:"text"},{default:u(()=>[...se[6]||(se[6]=[O("Retry",-1)])]),_:1})]),default:u(()=>[l(X,null,{default:u(()=>[...se[5]||(se[5]=[O("Error generating PDF",-1)])]),_:1}),O(" "+q(m.value)+" ",1)]),_:1})])):_e("",!0)]),_:1})]),_:1})],64)}}},ov=Xt(f_e,[["__scopeId","data-v-4fc007bd"]]),m_e={class:"text-center"},h_e={class:"text-center"},v_e={class:"text-body-2 text-medium-emphasis mb-4"},p_e={class:"pa-1"},g_e={class:"text-body-1 font-weight-medium"},y_e={class:"text-body-2 text-medium-emphasis"},__e={class:"pa-1"},w_e={class:"text-body-1 font-weight-medium"},b_e={class:"text-body-2 text-medium-emphasis"},x_e={class:"pa-1"},C_e={class:"text-body-1 font-weight-medium"},S_e={class:"text-body-2 text-medium-emphasis"},E_e={key:0,class:"d-flex align-center"},B_e={key:1,class:"text-body-2 text-error"},k_e={key:2,class:"d-flex flex-column"},T_e={class:"text-body-2 font-weight-medium"},I_e={class:"text-caption text-medium-emphasis"},F_e={key:0},P_e={key:1},D_e={key:0,class:"text-caption text-medium-emphasis mt-1"},U_e={key:0},R_e={class:"text-left"},N_e={class:"text-left"},V_e={class:"text-left"},L_e={class:"text-left"},M_e={class:"text-left"},O_e={key:0,class:"text-body-2 mb-1"},H_e={class:"text-body-2 mb-1"},$_e={class:"text-body-2 mb-1"},Q_e={key:0,class:"text-body-2 mb-1"},G_e={class:"text-subtitle-1 font-weight-bold"},z_e={class:"text-h6"},K_e={class:"text-h6 text-success"},W_e={key:0,class:"text-center pa-4"},j_e={class:"text-left"},q_e={class:"text-left"},Y_e={class:"text-right"},X_e={class:"text-right"},J_e={class:"text-center pa-4"},Z_e={__name:"payment-receipt-view",props:{receiptId:{type:[String,Number],required:!0}},emits:["close","edit-receipt"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ra(),o=ea(),i=ee(()=>o.getters["doctorModule/currentDoctor"]),c=ee(()=>i.value?.doctorName||"Unknown Doctor"),A=M(!1),d=M(!1),f=M(null),m=M(null),h=M([]),v=M("view"),y=M({}),g=M(null),w=M(null),b=M(!1),x=M(null),T=ee(()=>m.value?.services||[]),U=oT(T,ee(()=>m.value?.additionalDiscount||0)),{subtotal:k,totalLineDiscount:S,finalGrandTotal:E,calculateServiceTotal:C}=U,P=ee(()=>Array.isArray(h.value)?h.value.reduce((D,j)=>D+(parseFloat(j.amount)||0),0):0),F=ee(()=>Math.max(0,E.value-P.value)),N=ee(()=>m.value?{patientName:m.value.patientName||"Unknown Patient",patientId:m.value.patientId||"N/A",patientContactNumber:m.value.patientContactNumber,doctorName:c.value,receiptNumber:m.value.identifier,receiptDate:m.value.paymentReceiptDate,appointmentDate:m.value.appointmentDate,services:m.value.services||[],subtotal:k.value,totalLineDiscount:S.value,additionalDiscount:parseFloat(m.value.additionalDiscount)||0,grandTotal:E.value,totalPaid:P.value,balanceDue:F.value,payments:h.value||[]}:null),L=async()=>{if(!n.receiptId){f.value="No receipt ID provided";return}A.value=!0,f.value=null;try{console.log("Loading receipt data for ID:",n.receiptId);const D=await RM(n.receiptId);if(D.error)throw new Error(D.error.message||"Failed to load receipt");m.value=D.data,console.log("Receipt data loaded:",m.value),D.data.treatmentPlanId&&(g.value=D.data.treatmentPlanId,await ie()),await le(),await Q()}catch(D){console.error("Error loading receipt data:",D),f.value=D.message||"Failed to load receipt data",s(f.value)}finally{A.value=!1}},ie=async()=>{if(!g.value){w.value=null;return}b.value=!0,x.value=null;try{console.log("Loading treatment plan data for ID:",g.value);const D=await df(g.value);if(D.error)throw new Error(D.error.message||"Failed to load treatment plan");w.value=D.data,console.log("Treatment plan data loaded:",w.value)}catch(D){console.error("Error loading treatment plan data:",D),x.value=D.message||"Failed to load treatment plan"}finally{b.value=!1}},le=async()=>{if(!n.receiptId){h.value=[];return}d.value=!0;try{console.log("Loading payments for receipt ID:",n.receiptId);const D=await hg(n.receiptId);D.success&&Array.isArray(D.data)?(h.value=D.data,console.log("Payments loaded:",h.value)):(console.warn("No payments found or invalid response:",D),h.value=[])}catch(D){console.error("Error loading receipt payments:",D),h.value=[]}finally{d.value=!1}},Q=async()=>{try{const D=o.state.doctorModule.doctorId;if(!D){console.warn("No doctor ID available for print configurations");return}const j=await sv(D);y.value=j.data||{},console.log("Print configurations fetched:",y.value)}catch(D){console.error("Error fetching print configs:",D),s("Failed to load print configurations")}},Z=D=>{if(!D)return"";try{return new Date(D).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return D}},ce=D=>{if(!D)return"";try{return new Date(D*1e3).toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return D}},J=()=>{console.log("Edit receipt:",n.receiptId),a("edit-receipt",n.receiptId)},se=D=>{console.log("Receipt PDF generated successfully:",D),r("Receipt PDF generated successfully")},G=()=>{a("close")};return cn(()=>{L()}),(D,j)=>{const ne=I("v-icon"),H=I("v-btn"),te=I("v-card-title"),Y=I("v-col"),K=I("v-row"),X=I("v-tab"),ae=I("v-tabs"),oe=I("v-progress-circular"),W=I("v-label"),de=I("v-card-text"),Ae=I("v-card"),Ce=I("v-table"),De=I("v-divider"),xe=I("v-container"),ke=I("v-tabs-window-item"),Ee=I("v-tabs-window");return R(),ve(Ae,{rounded:"lg",color:"surfaceContainer",flat:"",ripple:!1},{default:u(()=>[l(K,{"no-gutters":""},{default:u(()=>[l(Y,{cols:"12"},{default:u(()=>[l(te,{class:"d-flex align-center justify-space-between"},{default:u(()=>[j[3]||(j[3]=p("span",null,"Payment Receipt",-1)),l(H,{onClick:G,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(ne,{size:"18"},{default:u(()=>[...j[2]||(j[2]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(K,{"no-gutters":""},{default:u(()=>[l(Y,{cols:"12"},{default:u(()=>[l(ae,{modelValue:v.value,"onUpdate:modelValue":j[0]||(j[0]=ye=>v.value=ye),color:"primary","bg-color":"surfaceContainerHigh","align-tabs":"start",class:"mx-3 mb-3"},{default:u(()=>[l(X,{value:"view"},{default:u(()=>[l(ne,{start:""},{default:u(()=>[...j[4]||(j[4]=[O("mdi-eye",-1)])]),_:1}),j[5]||(j[5]=O(" View Receipt ",-1))]),_:1}),l(X,{value:"share"},{default:u(()=>[l(ne,{start:""},{default:u(()=>[...j[6]||(j[6]=[O("mdi-share-variant",-1)])]),_:1}),j[7]||(j[7]=O(" Share Receipt ",-1))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(K,{"no-gutters":""},{default:u(()=>[l(Y,{cols:"12",class:"scroll-element"},{default:u(()=>[l(Ee,{modelValue:v.value,"onUpdate:modelValue":j[1]||(j[1]=ye=>v.value=ye)},{default:u(()=>[l(ke,{value:"view"},{default:u(()=>[A.value?(R(),ve(K,{key:0,"no-gutters":""},{default:u(()=>[l(Y,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[p("div",m_e,[l(oe,{indeterminate:"",color:"primary",size:"64"}),j[8]||(j[8]=p("div",{class:"mt-4 text-subtitle-1"},"Loading receipt...",-1))])]),_:1})]),_:1})):f.value?(R(),ve(K,{key:1,"no-gutters":""},{default:u(()=>[l(Y,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[p("div",h_e,[l(ne,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...j[9]||(j[9]=[O("mdi-alert-circle",-1)])]),_:1}),j[11]||(j[11]=p("div",{class:"text-h6 mb-2"},"Failed to Load Receipt",-1)),p("div",v_e,q(f.value),1),l(H,{color:"primary",onClick:L,"prepend-icon":"mdi-refresh"},{default:u(()=>[...j[10]||(j[10]=[O(" Try Again ",-1)])]),_:1})])]),_:1})]),_:1})):m.value?(R(),ve(xe,{key:2,fluid:"",class:"pa-3"},{default:u(()=>[l(Ae,{flat:"",color:"surfaceContainerHigh",class:"mb-4 card-enhanced"},{default:u(()=>[l(de,{class:"pb-1 pt-2"},{default:u(()=>[l(K,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(Y,{cols:"4"},{default:u(()=>[p("div",p_e,[l(W,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...j[12]||(j[12]=[O("Patient Information",-1)])]),_:1}),p("div",g_e,q(m.value.patientName||"Unknown Patient"),1),p("div",y_e,"ID: "+q(m.value.patientId||"N/A"),1)])]),_:1}),l(Y,{cols:"4"},{default:u(()=>[p("div",__e,[l(W,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...j[13]||(j[13]=[O("Appointment Details",-1)])]),_:1}),p("div",w_e,"Dr. "+q(c.value),1),p("div",b_e,"Date: "+q(Z(m.value.appointmentDate)),1)])]),_:1}),l(Y,{cols:"4"},{default:u(()=>[p("div",x_e,[l(W,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...j[14]||(j[14]=[O("Receipt Information",-1)])]),_:1}),p("div",C_e,q(m.value.identifier),1),p("div",S_e,"Date: "+q(Z(m.value.paymentReceiptDate)),1)])]),_:1})]),_:1})]),_:1})]),_:1}),g.value?(R(),ve(Ae,{key:0,flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(de,{class:"pb-2"},{default:u(()=>[l(K,{"no-gutters":"",align:"center",class:"mb-2"},{default:u(()=>[l(Y,{cols:"3",class:"d-flex align-center"},{default:u(()=>[...j[15]||(j[15]=[p("div",{class:"text-subtitle-1"},"Treatment Plan",-1)])]),_:1}),l(Y,{cols:"9"},{default:u(()=>[b.value?(R(),me("div",E_e,[l(oe,{indeterminate:"",size:"16",color:"primary",class:"mr-2"}),j[16]||(j[16]=p("span",{class:"text-body-2"},"Loading treatment plan...",-1))])):x.value?(R(),me("div",B_e,[l(ne,{size:"16",class:"mr-1"},{default:u(()=>[...j[17]||(j[17]=[O("mdi-alert-circle",-1)])]),_:1}),O(" "+q(x.value),1)])):w.value?(R(),me("div",k_e,[p("div",T_e,q(w.value.treatmentPlanName),1),p("div",I_e,[O(" Status: "+q(w.value.status)+" ",1),w.value.startDate?(R(),me("span",F_e,"  Start: "+q(Z(w.value.startDate)),1)):_e("",!0),w.value.endDate?(R(),me("span",P_e,"  End: "+q(Z(w.value.endDate)),1)):_e("",!0)]),w.value.notes?(R(),me("div",D_e,[j[18]||(j[18]=p("strong",null,"Notes:",-1)),O(" "+q(w.value.notes.substring(0,80)),1),w.value.notes.length>80?(R(),me("span",U_e,"...")):_e("",!0)])):_e("",!0)])):_e("",!0)]),_:1})]),_:1})]),_:1})]),_:1})):_e("",!0),l(Ae,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(de,{class:"pb-2"},{default:u(()=>[j[23]||(j[23]=p("div",{class:"text-subtitle-1 mb-3"},"Item Details",-1)),l(Ce,{density:"compact",class:"mb-3"},{default:u(()=>[j[19]||(j[19]=p("thead",null,[p("tr",null,[p("th",{class:"text-left",style:{width:"60px"}},"Sr. No"),p("th",{class:"text-left",style:{width:"300px"}},"Description"),p("th",{class:"text-left",style:{width:"120px"}},"Base Cost per unit ()"),p("th",{class:"text-left",style:{width:"120px"}},"Discount per unit ()"),p("th",{class:"text-left",style:{width:"100px"}},"Quantity"),p("th",{class:"text-left",style:{width:"120px"}},"Total ()")])],-1)),p("tbody",null,[(R(!0),me(ze,null,Wt(m.value.services,(ye,we)=>(R(),me("tr",{key:we},[p("td",null,q(we+1),1),p("td",R_e,q(ye.serviceDescription),1),p("td",N_e,q(Oe(ar)(ye.baseCost)),1),p("td",V_e,q(Oe(ar)(ye.discountAmount)),1),p("td",L_e,q(ye.quantity),1),p("td",M_e,q(Oe(ar)(Oe(C)(ye))),1)]))),128))])]),_:1}),l(De,{class:"mb-3"}),l(K,{"no-gutters":""},{default:u(()=>[l(Y,{cols:"8",class:"text-right"},{default:u(()=>[j[20]||(j[20]=p("div",{class:"text-body-2 mb-1"},"Subtotal:",-1)),j[21]||(j[21]=p("div",{class:"text-body-2 mb-1"},"Line Discounts:",-1)),m.value.additionalDiscount>0?(R(),me("div",O_e,"Additional Discount:")):_e("",!0),j[22]||(j[22]=p("div",{class:"text-subtitle-1 font-weight-bold"},"Grand Total:",-1))]),_:1}),l(Y,{cols:"4",class:"text-right"},{default:u(()=>[p("div",H_e,q(Oe(ar)(Oe(k))),1),p("div",$_e,"-"+q(Oe(ar)(Oe(S))),1),m.value.additionalDiscount>0?(R(),me("div",Q_e,"-"+q(Oe(ar)(m.value.additionalDiscount)),1)):_e("",!0),p("div",G_e,q(Oe(ar)(Oe(E))),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(Ae,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(de,{class:"pb-2"},{default:u(()=>[j[32]||(j[32]=p("div",{class:"text-subtitle-1 mb-3"},"Payment Information",-1)),l(K,{"no-gutters":"",class:"mb-3"},{default:u(()=>[l(Y,{cols:"4"},{default:u(()=>[j[24]||(j[24]=p("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Total Amount",-1)),p("div",z_e,q(Oe(ar)(Oe(E))),1)]),_:1}),l(Y,{cols:"4"},{default:u(()=>[j[25]||(j[25]=p("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Paid Amount",-1)),p("div",K_e,q(Oe(ar)(P.value)),1)]),_:1}),l(Y,{cols:"4"},{default:u(()=>[j[26]||(j[26]=p("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Balance Due",-1)),p("div",{class:ct(["text-h6",F.value>0?"text-error":"text-success"])},q(Oe(ar)(F.value)),3)]),_:1})]),_:1}),d.value?(R(),me("div",W_e,[l(oe,{indeterminate:"",size:"32",color:"primary"}),j[27]||(j[27]=p("div",{class:"text-body-2 mt-2"},"Loading payments...",-1))])):h.value&&h.value.length>0?(R(),me(ze,{key:1},[l(De,{class:"mb-3"}),j[29]||(j[29]=p("div",{class:"text-subtitle-2 mb-2"},"Payment History",-1)),l(Ce,{density:"compact"},{default:u(()=>[j[28]||(j[28]=p("thead",null,[p("tr",null,[p("th",{class:"text-left"},"Date"),p("th",{class:"text-left"},"Mode"),p("th",{class:"text-right"},"Amount"),p("th",{class:"text-right"},"Created")])],-1)),p("tbody",null,[(R(!0),me(ze,null,Wt(h.value,ye=>(R(),me("tr",{key:ye.id},[p("td",j_e,q(Z(ye.paymentDate)),1),p("td",q_e,q(ye.mode),1),p("td",Y_e,q(Oe(ar)(ye.amount)),1),p("td",X_e,q(ce(ye.createdAt)),1)]))),128))])]),_:1})],64)):(R(),me(ze,{key:2},[l(De,{class:"mb-3"}),p("div",J_e,[l(ne,{size:"48",color:"outline",class:"mb-2"},{default:u(()=>[...j[30]||(j[30]=[O("mdi-currency-inr",-1)])]),_:1}),j[31]||(j[31]=p("div",{class:"text-body-2 text-medium-emphasis"},"No payments recorded",-1))])],64))]),_:1})]),_:1}),l(Ae,{flat:"",color:"surfaceContainerHigh",class:"card-enhanced"},{default:u(()=>[l(de,{class:"d-flex justify-center gap-3 pb-2"},{default:u(()=>[l(H,{color:"secondary",variant:"outlined",onClick:J,"prepend-icon":"mdi-pencil",class:"btn-hover-base"},{default:u(()=>[...j[33]||(j[33]=[O(" Edit Receipt ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})):_e("",!0)]),_:1}),l(ke,{value:"share",class:"h-100"},{default:u(()=>[l(K,{"no-gutters":"",class:"h-100"},{default:u(()=>[l(Y,{cols:"12"},{default:u(()=>[l(ov,{"content-type":"receipt",data:{consultation:N.value,printConfigurations:y.value,doctor:i.value},patient:{name:m.value?.patientName,patientName:m.value?.patientName,patientId:m.value?.patientId,contactNumber:m.value?.patientContactNumber},onPdfGenerated:se},null,8,["data","patient"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}}},rH=Xt(Z_e,[["__scopeId","data-v-2cbfd0d5"]]),sH=async e=>{try{if(!e)throw new Error("Doctor ID is required");return{data:(await dt.get(`/billreceipt/next-identifier/${e}`)).data.data,error:null}}catch(t){return console.error("Error getting next bill identifier:",t),t.response?.status===400&&t.response?.data?.error?.includes("No bill series found")?{data:null,error:{message:"No bill series found. Please create a bill series first in Admin Settings.",needsSeries:!0}}:{data:null,error:t}}},oH=async e=>{try{if(!e.doctorId||!e.appointmentId||!e.services)throw new Error("Doctor ID, Appointment ID, and services are required");if(!Array.isArray(e.services)||e.services.length===0)throw new Error("At least one service is required");return{data:(await dt.post("/billreceipt/with-services",e)).data.data,error:null}}catch(t){return console.error("Error creating bill with services:",t),{data:null,error:t}}},vT=async e=>{try{if(!e)throw new Error("Bill ID is required");return{data:(await dt.get(`/billreceipt/${e}/with-services`)).data.data,error:null}}catch(t){return console.error("Error getting bill with services:",t),{data:null,error:t}}},iH=async(e,t)=>{try{if(!e)throw new Error("Bill ID is required");if(!t.services||!Array.isArray(t.services)||t.services.length===0)throw new Error("At least one service is required");return{data:(await dt.put(`/billreceipt/${e}/with-services`,t)).data.data,error:null}}catch(n){return console.error("Error updating bill with services:",n),{data:null,error:n}}},IE=async(e,t,n,a=null)=>{try{const r=e.state.doctorModule?.doctorId;if(!r)throw new Error("No doctor selected. Please select a doctor first.");return console.log("Fetching bills for date range:",{startDate:t,endDate:n,doctorId:r,treatmentPlanId:a}),await lH(t,n,r,a)}catch(r){return console.error("Error fetching bills for date range:",r),{success:!1,error:{message:r.message||"Failed to fetch bills for date range",status:500}}}},lH=async(e,t,n=null,a=null)=>{try{console.log("Fetching bills for date range with filters:",{startDate:e,endDate:t,doctorId:n,treatmentPlanId:a});const r=new URLSearchParams;e&&r.append("startDate",e),t&&r.append("endDate",t),n&&r.append("doctor_id",n.toString()),a&&r.append("treatmentPlanId",a.toString());const s=`/billreceipt/date-range?${r.toString()}`;return{success:!0,data:(await dt.get(s)).data.data,message:"Bills fetched successfully for date range"}}catch(r){return console.error("Error fetching bills for date range:",r),{success:!1,error:{message:r.response?.data?.error||r.message||"Failed to fetch bills for date range",status:r.response?.status||500}}}},pT=async e=>{try{if(!e)throw new Error("Bill ID is required");return console.log("Fetching payment receipts for bill ID:",e),{success:!0,data:(await dt.get("/paymentreceipt",{params:{bill_id:e}})).data.data||[],message:"Payment receipts fetched successfully"}}catch(t){return console.error("Error fetching payment receipts for bill:",t),{success:!1,error:{message:t.response?.data?.error||t.message||"Failed to fetch payment receipts",status:t.response?.status||500}}}},Yn=e=>!e&&e!==0?"0":`${Number(e).toLocaleString("en-IN")}`,e2e=Object.freeze(Object.defineProperty({__proto__:null,createBillWithServices:oH,fetchAllBillsForDateRange:lH,fetchBillsForDateRange:IE,formatBillAmount:Yn,getBillWithServices:vT,getNextBillIdentifier:sH,getReceiptsByBill:pT,updateBillWithServices:iH},Symbol.toStringTag,{value:"Module"}));function gT(e,t){const n=y=>{const g=parseFloat(y.baseCost)||0,w=parseInt(y.quantity)||1,b=parseFloat(y.gstPercent)||0,x=parseFloat(y.discountAmount)||0,T=g*w,U=x*w,k=Math.max(0,T-U),S=b>0?Math.round(k*b/(100+b)):0,E=k-S,C=k;return{baseAmount:T,gstAmount:S,gstExclusiveAmount:E,subtotalWithGST:C,discountAmount:U,total:C}},a=ee(()=>e.value.map(y=>({...y,...n(y)}))),r=ee(()=>e.value.reduce((y,g)=>{const w=parseFloat(g.baseCost)||0,b=parseInt(g.quantity)||1;return y+w*b},0)),s=ee(()=>e.value.reduce((y,g)=>{const w=parseFloat(g.baseCost)||0,b=parseInt(g.quantity)||1,x=parseFloat(g.gstPercent)||0,T=parseFloat(g.discountAmount)||0,U=w*b,k=T*b,S=Math.max(0,U-k),E=x>0?Math.round(S*x/(100+x)):0;return y+E},0)),o=ee(()=>e.value.reduce((y,g)=>{const w=n(g).total;return y+w},0)),i=ee(()=>e.value.reduce((y,g)=>{const w=parseFloat(g.discountAmount)||0,b=parseInt(g.quantity)||1;return y+w*b},0)),c=ee(()=>e.value.reduce((y,g)=>{const w=n(g);return y+(w.gstExclusiveAmount||0)},0)),A=ee(()=>{const y=i.value,g=parseFloat(t.value)||0;return y+g}),d=ee(()=>{const y=o.value,g=parseFloat(t.value)||0;return Math.max(0,y-g)}),f=ee(()=>e.value.some(y=>y.serviceDescription&&y.serviceDescription.trim().length>0&&parseFloat(y.baseCost)>0)),m=ee(()=>{const y={};return e.value.forEach(g=>{const w=parseFloat(g.gstPercent)||0;if(w>0){y[w]||(y[w]={rate:w,baseAmount:0,gstAmount:0});const b=parseFloat(g.baseCost)||0,x=parseInt(g.quantity)||1,T=parseFloat(g.discountAmount)||0,U=b*x,k=T*x,S=Math.max(0,U-k),E=Math.round(S*w/(100+w)),C=S-E;y[w].baseAmount+=C,y[w].gstAmount+=E}}),Object.values(y)}),h=y=>n(y),v=ee(()=>r.value===0?0:s.value/r.value*100);return{servicesWithTotals:a,baseSubtotal:r,totalGSTAmount:s,subtotalWithGST:o,totalLineDiscount:i,totalTaxableValue:c,totalAllDiscounts:A,finalGrandTotal:d,gstBreakdown:m,effectiveTaxRate:v,hasValidService:f,calculateServiceTotal:n,getServiceGSTDetails:h}}const t2e={class:"pa-1"},n2e={class:"text-body-1 font-weight-medium"},a2e={class:"text-body-2 text-medium-emphasis"},r2e={class:"pa-1"},s2e={class:"text-body-1 font-weight-medium"},o2e={class:"text-body-2 text-medium-emphasis"},i2e={class:"pa-1"},l2e={class:"text-body-2 text-medium-emphasis"},u2e={class:"d-flex flex-column py-1"},c2e={class:"text-body-2 font-weight-medium"},d2e={class:"text-caption text-medium-emphasis"},A2e={key:0},f2e={class:"text-caption"},m2e={key:0,class:"ml-2"},h2e={key:0,class:"text-left",style:{width:"100px"}},v2e={key:0},p2e={class:"text-body-2 font-weight-medium"},g2e={class:"text-body-2 font-weight-medium"},y2e={class:"text-body-2 font-weight-medium"},_2e={key:0,class:"text-body-2 mb-1"},w2e={key:1,class:"text-body-2 mb-1"},b2e={key:2,class:"text-body-2 mb-1"},x2e={key:3,class:"text-body-2 mb-1"},C2e={key:0,class:"text-body-2 mb-1"},S2e={key:1,class:"text-body-2 mb-1"},E2e={key:2,class:"text-body-2 mb-1"},B2e={class:"text-body-2 mb-1"},k2e={class:"text-body-2 mb-1"},T2e={key:3,class:"text-body-2 mb-1"},I2e={class:"text-subtitle-1 font-weight-bold"},F2e={class:"text-body-2 mb-1"},P2e={class:"text-body-2 mb-1"},D2e={__name:"bill-receipt-create",props:{appointment:{type:Object,required:!0}},emits:["close","billCreated","view-bill"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ra(),o=ea(),i=ee(()=>o.state.doctorModule.doctorId),c=ee(()=>o.getters["doctorModule/currentDoctor"]),A=ee(()=>c.value?.doctorName||"Unknown Doctor"),d=ee(()=>c.value?.isGST||!1),f=M({patientName:n.appointment?.patient_name||"",patientId:n.appointment?.patientId||"",appointmentDate:n.appointment?.appointmentDate||"",billDate:Dn(),appointmentId:n.appointment?.id||null,doctorId:i.value,additionalDiscount:0}),m=M([{serviceDescription:"",hsnSacCode:"",baseCost:null,gstPercent:0,quantity:1,discountAmount:0,isFromHistory:!1}]),h=M(!1),v=M(null),y=M([]),g=M(!1);ee(()=>v.value?y.value.find(de=>de.id===v.value):null);const w=M(!1),b=av,x=M([{amount:null,mode:"Cash",paymentDate:Dn(),datePickerMenu:!1}]);M(!1);const T=gT(m,ee(()=>f.value.additionalDiscount)),{servicesWithTotals:U,baseSubtotal:k,totalGSTAmount:S,subtotalWithGST:E,totalLineDiscount:C,totalTaxableValue:P,totalAllDiscounts:F,finalGrandTotal:N,hasValidService:L,gstBreakdown:ie,calculateServiceTotal:le}=T,Q=ee(()=>m.value.some(de=>(parseFloat(de.discountAmount)||0)>0)),Z=()=>{m.value.push({serviceDescription:"",hsnSacCode:"",baseCost:null,gstPercent:0,quantity:1,discountAmount:0,isFromHistory:!1})},ce=de=>{m.value.length>1?m.value.splice(de,1):s("At least one service is required")},J=(de,Ae)=>{m.value[de]&&(m.value[de].serviceDescription=Ae)},se=(de,Ae)=>{console.log("Service selected:",Ae),Ae&&typeof Ae=="object"&&!Ae.isUserTyped?(m.value[de]={...m.value[de],serviceDescription:Ae.serviceDescription,hsnSacCode:Ae.hsnSacCode||"",baseCost:Ae.baseCost||0,gstPercent:Ae.gstPercent||Ae.gstRate||0,isFromHistory:!1},console.log("Updated service with baseCost:",m.value[de].baseCost,"and GST%:",m.value[de].gstPercent,"and HSN/SAC:",m.value[de].hsnSacCode)):Ae===null&&(m.value[de]={...m.value[de],serviceDescription:"",hsnSacCode:"",baseCost:0,gstPercent:0,isFromHistory:!1})},G=ee(()=>{const de=L.value,Ae=f.value.doctorId&&f.value.appointmentId;return console.log("Bill validation check:",{hasValidService:de,hasValidAppointment:Ae,billData:f.value}),de&&Ae}),D=async()=>{if(!f.value.patientId||!f.value.doctorId){console.log("Missing patient or doctor ID for loading treatment plans");return}g.value=!0;try{console.log("Loading treatment plans for patient:",f.value.patientId,"doctor:",f.value.doctorId);const de=await vg(f.value.patientId,f.value.doctorId);if(de.error)throw new Error(de.error.message||"Failed to load treatment plans");y.value=de.data||[],console.log("Loaded treatment plans:",y.value.length)}catch(de){console.error("Error loading treatment plans:",de),s("Failed to load treatment plans: "+(de.message||"Unknown error")),y.value=[]}finally{g.value=!1}},j=ee(()=>x.value.reduce((de,Ae)=>de+(parseFloat(Ae.amount)||0),0)),ne=ee(()=>N.value-j.value),H=de=>{if(!de)return"";try{return new Date(de).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return de}},te=()=>{x.value.push({amount:null,mode:"Cash",paymentDate:Dn(),datePickerMenu:!1})},Y=de=>{x.value.length>1?x.value.splice(de,1):x.value[0]={amount:null,mode:"Cash",paymentDate:Dn(),datePickerMenu:!1}},K=de=>{if(!de)return null;try{if(typeof de=="string")return de.includes("T")?de.split("T")[0]:de;if(de instanceof Date){const Ae=de.getFullYear(),Ce=String(de.getMonth()+1).padStart(2,"0"),De=String(de.getDate()).padStart(2,"0");return`${Ae}-${Ce}-${De}`}return null}catch(Ae){return console.error("Error parsing payment date:",Ae),null}},X=(de,Ae)=>{if(de)if(de instanceof Date){const Ce=de.getFullYear(),De=String(de.getMonth()+1).padStart(2,"0"),xe=String(de.getDate()).padStart(2,"0");Ae.paymentDate=`${Ce}-${De}-${xe}`}else typeof de=="string"&&(Ae.paymentDate=de);else Ae.paymentDate="";Ae.datePickerMenu=!1},ae=async()=>{if(!G.value){s("Please fill in all required fields and add at least one valid service");return}w.value=!0;try{const{data:de,error:Ae}=await sH(f.value.doctorId);if(Ae){if(Ae.needsSeries){s("No bill series found. Please create a bill series first in Admin Settings  GST Bill Series Configuration.");return}throw new Error(Ae.message||"Failed to get next bill identifier")}console.log("Next bill identifier:",de);const Ce={doctorId:f.value.doctorId,appointmentId:f.value.appointmentId,billDate:f.value.billDate,additionalDiscount:f.value.additionalDiscount||0,treatmentPlanId:h.value?v.value:null,services:m.value.map(Ee=>({serviceDescription:Ee.serviceDescription,hsnSacCode:Ee.hsnSacCode||"",baseCost:Ee.baseCost,gstPercent:Ee.gstPercent||0,quantity:Ee.quantity||1,discountAmount:Ee.discountAmount||0}))};console.log("Creating bill with data:",Ce);const{data:De,error:xe}=await oH(Ce);if(xe)throw new Error(xe.message||"Failed to create bill");console.log("Bill created successfully:",De),x.value.some(Ee=>Ee.amount&&parseFloat(Ee.amount)>0&&Ee.mode&&Ee.paymentDate)&&await oe(De.id),r("Bill created successfully!"),a("billCreated",De),a("view-bill",De.id)}catch(de){console.error("Error generating bill:",de),s("Failed to generate bill. Please try again.")}finally{w.value=!1}},oe=async de=>{try{console.log("Creating payment receipt for bill:",de);const Ae={doctorId:f.value.doctorId,appointmentId:f.value.appointmentId,billId:de,paymentReceiptDate:Dn(),additionalDiscount:0,isThreeC:!0,treatmentPlanId:h.value?v.value:null};console.log("Creating payment receipt with payload:",Ae);const Ce=await UM(Ae);if(Ce.error){console.error("Error creating payment receipt:",Ce.error),s("Bill created but failed to create payment receipt: "+Ce.error.message);return}const De=Ce.data.id;console.log("Payment receipt created:",De);const xe=x.value.filter(ke=>ke.amount&&parseFloat(ke.amount)>0&&ke.mode&&ke.paymentDate);console.log("Creating payments:",xe);for(const ke of xe){const Ee={amount:Number(ke.amount),mode:ke.mode,paymentDate:ke.paymentDate,paymentReceiptId:De,appointmentId:f.value.appointmentId};console.log("Creating payment with payload:",Ee);const ye=await nv(Ee);ye.success?console.log("Payment created successfully:",ye.data):(console.error("Error creating payment:",ye.error),s(`Failed to create payment: ${ye.error?.message||"Unknown error"}`))}x.value=[{amount:null,mode:"Cash",paymentDate:Dn()}],r("Payment receipt and payments created successfully!")}catch(Ae){console.error("Error creating payment receipt and payments:",Ae),s("Bill created but failed to create payments: "+(Ae.message||"Unknown error"))}},W=()=>{w.value=!1,m.value=[{serviceDescription:"",hsnSacCode:"",baseCost:null,gstPercent:0,quantity:1,discountAmount:0,isFromHistory:!1}],f.value={patientName:n.appointment?.patient_name||"",patientId:n.appointment?.patientId||"",appointmentDate:n.appointment?.appointmentDate||"",billDate:Dn(),appointmentId:n.appointment?.id||null,doctorId:i.value,additionalDiscount:0},x.value=[{amount:null,mode:"Cash",paymentDate:Dn(),datePickerMenu:!1}],h.value=!1,v.value=null,y.value=[],g.value=!1,a("close")};return We(h,de=>{de&&y.value.length===0?D():de||(v.value=null)}),(de,Ae)=>{const Ce=I("v-icon"),De=I("v-btn"),xe=I("v-card-title"),ke=I("v-col"),Ee=I("v-row"),ye=I("v-label"),we=I("v-card-text"),at=I("v-card"),Je=I("v-switch"),rt=I("v-list-item"),it=I("v-select"),Ie=I("v-text-field"),Ve=I("v-table"),ft=I("v-divider"),Ft=I("v-date-picker"),tt=I("v-menu"),Ge=I("v-container");return R(),ve(at,{rounded:"lg",color:"surfaceContainer",flat:"",ripple:!1},{default:u(()=>[l(Ee,{"no-gutters":""},{default:u(()=>[l(ke,{cols:"12"},{default:u(()=>[l(xe,{class:"d-flex align-center justify-space-between"},{default:u(()=>[Ae[4]||(Ae[4]=p("span",null,"Tax Invoice cum Bill of Supply - Generate",-1)),l(De,{onClick:W,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(Ce,{size:"18"},{default:u(()=>[...Ae[3]||(Ae[3]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(Ee,{"no-gutters":""},{default:u(()=>[l(ke,{cols:"12",class:"scroll-element"},{default:u(()=>[l(Ge,{fluid:"",class:"pa-3"},{default:u(()=>[l(at,{flat:"",color:"surfaceContainerHigh",class:"mb-4 card-enhanced"},{default:u(()=>[l(we,{class:"pb-1 pt-2"},{default:u(()=>[l(Ee,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(ke,{cols:"4"},{default:u(()=>[p("div",t2e,[l(ye,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...Ae[5]||(Ae[5]=[O("Patient Information",-1)])]),_:1}),p("div",n2e,q(f.value.patientName),1),p("div",a2e,"ID: "+q(f.value.patientId),1)])]),_:1}),l(ke,{cols:"4"},{default:u(()=>[p("div",r2e,[l(ye,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...Ae[6]||(Ae[6]=[O("Appointment Details",-1)])]),_:1}),p("div",s2e,"Dr. "+q(A.value),1),p("div",o2e,"Date: "+q(H(f.value.appointmentDate)),1)])]),_:1}),l(ke,{cols:"4"},{default:u(()=>[p("div",i2e,[l(ye,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...Ae[7]||(Ae[7]=[O("Tax Invoice cum Bill of Supply Information",-1)])]),_:1}),Ae[8]||(Ae[8]=p("div",{class:"text-body-1 font-weight-medium"},"New Bill",-1)),p("div",l2e,"Date: "+q(H(f.value.billDate)),1)])]),_:1})]),_:1})]),_:1})]),_:1}),l(at,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(we,{class:"pb-2"},{default:u(()=>[l(Ee,{"no-gutters":"",align:"center",class:"mb-3"},{default:u(()=>[l(ke,{cols:"2",class:"d-flex align-center"},{default:u(()=>[...Ae[9]||(Ae[9]=[p("div",{class:"text-subtitle-1"},"Treatment Plan",-1)])]),_:1}),l(ke,{cols:"3",class:"d-flex align-center"},{default:u(()=>[l(Je,{modelValue:h.value,"onUpdate:modelValue":Ae[0]||(Ae[0]=pt=>h.value=pt),label:"Link to treatment plan",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),h.value?(R(),ve(ke,{key:0,cols:"7"},{default:u(()=>[l(it,{modelValue:v.value,"onUpdate:modelValue":Ae[1]||(Ae[1]=pt=>v.value=pt),items:y.value,"item-title":"treatmentPlanName","item-value":"id",label:"Select Treatment Plan",variant:"outlined",density:"compact",loading:g.value,disabled:g.value,clearable:"","hide-details":""},{selection:u(({item:pt})=>[p("div",u2e,[p("div",c2e,q(pt.raw.treatmentPlanName),1),p("div",d2e,[O(" Status: "+q(pt.raw.status)+"  Created: "+q(H(pt.raw.createdAt))+" ",1),pt.raw.notes?(R(),me("span",A2e,"  "+q(pt.raw.notes.substring(0,30))+"...",1)):_e("",!0)])])]),item:u(({props:pt,item:ht})=>[l(rt,Ql(Kl(pt)),{title:u(()=>[O(q(ht.raw.treatmentPlanName),1)]),subtitle:u(()=>[p("div",f2e,[O(" Status: "+q(ht.raw.status)+"  Created: "+q(H(ht.raw.createdAt))+" ",1),ht.raw.notes?(R(),me("span",m2e," "+q(ht.raw.notes.substring(0,50))+"...",1)):_e("",!0)])]),_:2},1040)]),_:1},8,["modelValue","items","loading","disabled"])]),_:1})):_e("",!0)]),_:1})]),_:1})]),_:1}),l(at,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(we,{class:"pb-2"},{default:u(()=>[Ae[25]||(Ae[25]=p("div",{class:"text-subtitle-1 mb-3"},"Goods and Services Information",-1)),l(Ve,{density:"compact",class:"mb-3"},{default:u(()=>[p("thead",null,[p("tr",null,[Ae[10]||(Ae[10]=p("th",{class:"text-left",style:{width:"60px"}},"Sr. No",-1)),Ae[11]||(Ae[11]=p("th",{class:"text-left",style:{width:"200px"}},"Description",-1)),d.value?(R(),me("th",h2e,"HSN/SAC Code")):_e("",!0),Ae[12]||(Ae[12]=p("th",{class:"text-left",style:{width:"120px"}},"Base Cost per unit (incl. GST)",-1)),Ae[13]||(Ae[13]=p("th",{class:"text-left",style:{width:"110px"}},"Discount per unit",-1)),Ae[14]||(Ae[14]=p("th",{class:"text-left",style:{width:"100px"}},"GST %",-1)),Ae[15]||(Ae[15]=p("th",{class:"text-left",style:{width:"120px"}},"Taxable Value",-1)),Ae[16]||(Ae[16]=p("th",{class:"text-left",style:{width:"100px"}},"GST Amount",-1)),Ae[17]||(Ae[17]=p("th",{class:"text-left",style:{width:"70px"}},"Quantity",-1)),Ae[18]||(Ae[18]=p("th",{class:"text-left",style:{width:"120px"}},"Total",-1)),Ae[19]||(Ae[19]=p("th",{class:"text-left",style:{width:"80px"}},"Actions",-1))])]),p("tbody",null,[(R(!0),me(ze,null,Wt(Oe(U),(pt,ht)=>(R(),me("tr",{key:ht},[p("td",null,q(ht+1),1),p("td",null,[l(ww,{"model-value":pt.serviceDescription,"onUpdate:modelValue":Nt=>J(ht,Nt),onServiceSelected:Nt=>se(ht,Nt),"doctor-id":i.value,density:"compact"},null,8,["model-value","onUpdate:modelValue","onServiceSelected","doctor-id"])]),d.value?(R(),me("td",v2e,[l(Ie,{modelValue:m.value[ht].hsnSacCode,"onUpdate:modelValue":Nt=>m.value[ht].hsnSacCode=Nt,density:"compact",variant:"underlined","hide-details":"",placeholder:"HSN/SAC"},null,8,["modelValue","onUpdate:modelValue"])])):_e("",!0),p("td",null,[l(Ie,{modelValue:m.value[ht].baseCost,"onUpdate:modelValue":Nt=>m.value[ht].baseCost=Nt,modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"underlined","hide-details":"",min:"0",step:"1"},null,8,["modelValue","onUpdate:modelValue"])]),p("td",null,[l(Ie,{modelValue:m.value[ht].discountAmount,"onUpdate:modelValue":Nt=>m.value[ht].discountAmount=Nt,modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"underlined","hide-details":"",min:"0",step:"1"},null,8,["modelValue","onUpdate:modelValue"])]),p("td",null,[l(Ie,{modelValue:m.value[ht].gstPercent,"onUpdate:modelValue":Nt=>m.value[ht].gstPercent=Nt,modelModifiers:{number:!0},type:"number",suffix:"%",density:"compact",variant:"underlined","hide-details":"",min:"0",max:"100",step:"0.1"},null,8,["modelValue","onUpdate:modelValue"])]),p("td",null,[p("div",p2e,q(Oe(Yn)(Oe(le)(m.value[ht]).gstExclusiveAmount||0)),1)]),p("td",null,[p("div",g2e,q(Oe(Yn)(Oe(le)(m.value[ht]).gstAmount||0)),1)]),p("td",null,[l(Ie,{modelValue:m.value[ht].quantity,"onUpdate:modelValue":Nt=>m.value[ht].quantity=Nt,modelModifiers:{number:!0},type:"number",density:"compact",variant:"underlined","hide-details":"",min:"1",step:"1"},null,8,["modelValue","onUpdate:modelValue"])]),p("td",null,[p("div",y2e,q(Oe(Yn)(Oe(le)(m.value[ht]).total||0)),1)]),p("td",null,[l(De,{icon:"",size:"small",color:"error",variant:"text",onClick:Nt=>ce(ht)},{default:u(()=>[l(Ce,null,{default:u(()=>[...Ae[20]||(Ae[20]=[O("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])]))),128))])]),_:1}),l(Ee,{"no-gutters":"",class:"align-center"},{default:u(()=>[l(ke,{cols:"auto"},{default:u(()=>[l(De,{variant:"outlined",color:"primary",onClick:Z,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...Ae[21]||(Ae[21]=[O(" Add Service ",-1)])]),_:1})]),_:1}),l(ke),l(ke,{cols:"3"},{default:u(()=>[l(Ie,{label:"Additional Discount",modelValue:f.value.additionalDiscount,"onUpdate:modelValue":Ae[2]||(Ae[2]=pt=>f.value.additionalDiscount=pt),modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),l(ft,{class:"mb-3"}),l(Ee,{"no-gutters":""},{default:u(()=>[l(ke,{cols:"8",class:"text-right"},{default:u(()=>[Q.value?(R(),me("div",_2e,"Base Cost Total (incl. GST):")):_e("",!0),Q.value?(R(),me("div",w2e,"Line Item Discounts:")):_e("",!0),Q.value?(R(),me("div",b2e,"Subtotal after Discounts (incl. GST):")):_e("",!0),Ae[22]||(Ae[22]=p("div",{class:"text-body-2 mb-1"},"Taxable Value Total:",-1)),Ae[23]||(Ae[23]=p("div",{class:"text-body-2 mb-1"},"GST Amount:",-1)),f.value.additionalDiscount>0?(R(),me("div",x2e,"Additional Discount:")):_e("",!0),Ae[24]||(Ae[24]=p("div",{class:"text-subtitle-1 font-weight-bold"},"Grand Total (incl. GST):",-1))]),_:1}),l(ke,{cols:"4",class:"text-right"},{default:u(()=>[Q.value?(R(),me("div",C2e,q(Oe(Yn)(Oe(k))),1)):_e("",!0),Q.value?(R(),me("div",S2e,"-"+q(Oe(Yn)(Oe(C))),1)):_e("",!0),Q.value?(R(),me("div",E2e,q(Oe(Yn)(Oe(k)-Oe(C))),1)):_e("",!0),p("div",B2e,q(Oe(Yn)(Oe(P))),1),p("div",k2e,q(Oe(Yn)(Oe(S))),1),f.value.additionalDiscount>0?(R(),me("div",T2e,"-"+q(Oe(Yn)(f.value.additionalDiscount)),1)):_e("",!0),p("div",I2e,q(Oe(Yn)(Oe(N))),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(at,{flat:"",class:"mb-3 card-enhanced",color:"surfaceContainerHigh"},{default:u(()=>[l(we,{class:"pb-2"},{default:u(()=>[Ae[30]||(Ae[30]=p("div",{class:"text-subtitle-1 mb-3"},"Payment Information",-1)),l(Ve,{density:"compact",class:"mb-3"},{default:u(()=>[Ae[28]||(Ae[28]=p("thead",null,[p("tr",null,[p("th",{class:"text-left",style:{width:"60px"}},"Sr. No"),p("th",{class:"text-left",style:{width:"150px"}},"Amount ()"),p("th",{class:"text-left",style:{width:"120px"}},"Payment Mode"),p("th",{class:"text-left",style:{width:"150px"}},"Payment Date"),p("th",{class:"text-left",style:{width:"80px"}},"Actions")])],-1)),p("tbody",null,[(R(!0),me(ze,null,Wt(x.value,(pt,ht)=>(R(),me("tr",{key:ht},[p("td",null,q(ht+1),1),p("td",null,[l(Ie,{modelValue:pt.amount,"onUpdate:modelValue":Nt=>pt.amount=Nt,modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"underlined","hide-details":"",min:"0",step:"1"},null,8,["modelValue","onUpdate:modelValue"])]),p("td",null,[l(it,{modelValue:pt.mode,"onUpdate:modelValue":Nt=>pt.mode=Nt,items:Oe(b),density:"compact",variant:"underlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),p("td",null,[l(tt,{modelValue:pt.datePickerMenu,"onUpdate:modelValue":Nt=>pt.datePickerMenu=Nt,"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},{activator:u(({props:Nt})=>[l(Ie,Fe({modelValue:pt.paymentDate,"onUpdate:modelValue":nn=>pt.paymentDate=nn,density:"compact",variant:"underlined","hide-details":"",readonly:""},{ref_for:!0},Nt),{"append-inner":u(()=>[l(Ce,{class:"text-medium-emphasis"},{default:u(()=>[...Ae[26]||(Ae[26]=[O("mdi-calendar",-1)])]),_:1})]),_:1},16,["modelValue","onUpdate:modelValue"])]),default:u(()=>[l(Ft,{"model-value":K(pt.paymentDate),"onUpdate:modelValue":Nt=>X(Nt,pt),color:"primary",locale:"en-IN"},null,8,["model-value","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),p("td",null,[l(De,{icon:"",size:"small",color:"error",variant:"text",onClick:Nt=>Y(ht)},{default:u(()=>[l(Ce,null,{default:u(()=>[...Ae[27]||(Ae[27]=[O("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])]))),128))])]),_:1}),l(Ee,{"no-gutters":"",class:"align-center"},{default:u(()=>[l(ke,{cols:"auto"},{default:u(()=>[l(De,{variant:"outlined",color:"secondary",onClick:te,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...Ae[29]||(Ae[29]=[O(" Add Payment ",-1)])]),_:1})]),_:1}),l(ke),l(ke,{cols:"4",class:"text-right"},{default:u(()=>[p("div",F2e,"Bill Total: "+q(Oe(Yn)(Oe(N))),1),p("div",P2e,"Total Payments: "+q(Oe(Yn)(j.value)),1),p("div",{class:ct(["text-subtitle-1 font-weight-bold",ne.value>=0?"text-success":"text-error"])}," Balance: "+q(Oe(Yn)(ne.value)),3)]),_:1})]),_:1})]),_:1})]),_:1}),l(at,{flat:"",color:"surfaceContainerHigh",class:"card-enhanced"},{default:u(()=>[l(we,{class:"d-flex justify-center pb-2"},{default:u(()=>[l(De,{color:"primary",onClick:ae,disabled:!G.value||w.value,loading:w.value,"prepend-icon":"mdi-receipt",class:"btn-hover-base"},{default:u(()=>[...Ae[31]||(Ae[31]=[O(" Generate Bill ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},U2e=Xt(D2e,[["__scopeId","data-v-2a9d4242"]]),R2e={class:"text-center"},N2e={class:"text-center"},V2e={class:"text-body-2 text-medium-emphasis mb-4"},L2e={class:"pa-1"},M2e={class:"text-body-1 font-weight-medium"},O2e={class:"text-body-2 text-medium-emphasis"},H2e={class:"pa-1"},$2e={class:"text-body-1 font-weight-medium"},Q2e={class:"text-body-2 text-medium-emphasis"},G2e={class:"pa-1"},z2e={class:"text-body-1 font-weight-medium"},K2e={class:"text-body-2 text-medium-emphasis"},W2e={key:0,class:"text-body-2 text-medium-emphasis"},j2e={key:0,class:"d-flex align-center"},q2e={key:1,class:"text-body-2 text-error"},Y2e={key:2,class:"d-flex flex-column"},X2e={class:"text-body-2 font-weight-medium"},J2e={class:"text-caption text-medium-emphasis"},Z2e={key:0},ewe={key:1},twe={key:0,class:"text-caption text-medium-emphasis mt-1"},nwe={key:0},awe={key:0,class:"text-left"},rwe={key:1,class:"text-right"},swe={class:"text-left"},owe={class:"text-left"},iwe={key:0,class:"text-left"},lwe={class:"text-right"},uwe={key:1,class:"text-right"},cwe={class:"text-center"},dwe={class:"text-right"},Awe={class:"text-right"},fwe={class:"text-center"},mwe={class:"text-right"},hwe={key:0,class:"text-body-2 mb-1"},vwe={key:1,class:"text-body-2 mb-1"},pwe={key:2,class:"text-body-2 mb-1"},gwe={key:3,class:"text-body-2 mb-1"},ywe={key:0,class:"text-body-2 mb-1"},_we={key:1,class:"text-body-2 mb-1"},wwe={key:2,class:"text-body-2 mb-1"},bwe={class:"text-body-2 mb-1"},xwe={class:"text-body-2 mb-1"},Cwe={key:3,class:"text-body-2 mb-1"},Swe={class:"text-subtitle-1 font-weight-bold"},Ewe={key:0,class:"text-center pa-4"},Bwe={key:1,class:"text-center pa-4"},kwe={class:"text-body-2 text-error"},Twe={class:"text-body-1 font-weight-medium"},Iwe={class:"text-caption text-medium-emphasis"},Fwe={class:"text-h6"},Pwe={class:"text-h6 text-success"},Dwe={key:0,class:"text-center pa-4"},Uwe={class:"text-left"},Rwe={class:"text-left"},Nwe={class:"text-right"},Vwe={class:"text-center pa-4"},Lwe={key:3,class:"text-center pa-4"},Mwe={__name:"bill-receipt-view",props:{billId:{type:[String,Number],required:!0}},emits:["close","edit-bill"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ra(),o=ea(),i=ee(()=>o.getters["doctorModule/currentDoctor"]),c=ee(()=>i.value?.doctorName||"Unknown Doctor"),A=ee(()=>i.value?.isGST||!1),d=M(!1),f=M(!1),m=M(!1),h=M(null),v=M(null),y=M(null),g=M(null),w=M([]),b=M("view"),x=M({}),T=M(null),U=M(null),k=M(!1),S=M(null),E=ee(()=>{if(!y.value?.services)return null;const X=M(y.value.services||[]),ae=M(y.value.additionalDiscount||0);return gT(X,ae)}),C=ee(()=>E.value?.baseSubtotal.value||0),P=ee(()=>E.value?.totalGSTAmount.value||0),F=ee(()=>E.value?.subtotalWithGST.value||0),N=ee(()=>E.value?.totalLineDiscount.value||0),L=ee(()=>E.value?.totalTaxableValue.value||0),ie=ee(()=>E.value?.finalGrandTotal.value||0),le=X=>E.value?E.value.calculateServiceTotal(X):{total:0,gstAmount:0},Q=ee(()=>Array.isArray(w.value)?w.value.reduce((X,ae)=>X+(parseFloat(ae.amount)||0),0):0),Z=ee(()=>Math.max(0,ie.value-Q.value)),ce=ee(()=>y.value?.services?y.value.services.some(X=>(parseFloat(X.discountAmount)||0)>0):!1),J=ee(()=>y.value?{patientName:y.value.patientName||"Unknown Patient",patientId:y.value.patientId||"N/A",patientAge:y.value.patientAge||y.value.age||"N/A",patientGender:y.value.patientGender||y.value.gender||"N/A",patientContactNumber:y.value.patientContactNumber,doctorName:c.value,billNumber:y.value.identifier,billDate:y.value.billDate,appointmentDate:y.value.appointmentDate,services:(y.value.services||[]).map(X=>{const ae=le(X);return{...X,gstAmount:ae.gstAmount,gstExclusiveAmount:ae.gstExclusiveAmount,totalWithGst:ae.total}}),baseSubtotal:C.value,totalGSTAmount:P.value,subtotalWithGST:F.value,totalLineDiscount:N.value,totalTaxableValue:L.value,additionalDiscount:parseFloat(y.value.additionalDiscount)||0,grandTotal:ie.value,associatedReceipt:g.value?{...g.value,balanceDue:Z.value}:null,totalPaid:Q.value,balanceDue:Z.value,payments:(w.value||[]).map(X=>({...X,paymentDate:X.paymentDate?H(X.paymentDate):"N/A",paymentMethod:X.mode||"N/A",amount:X.amount||0}))}:null),se=async()=>{if(!n.billId){h.value="No bill ID provided";return}d.value=!0,h.value=null;try{console.log("Loading bill data for ID:",n.billId);const X=await vT(n.billId);if(X.error)throw new Error(X.error.message||"Failed to load bill");if(y.value=X.data,console.log("Bill data loaded:",y.value),y.value&&(!y.value.patientAge||!y.value.patientGender))try{const ae=y.value.patientId;if(ae&&o.getters["patientModule/getPatientById"]){const oe=o.getters["patientModule/getPatientById"](ae);oe&&(y.value.patientAge=y.value.patientAge||oe.age,y.value.patientGender=y.value.patientGender||oe.gender)}}catch(ae){console.warn("Could not fetch additional patient details:",ae)}X.data.treatmentPlanId&&(T.value=X.data.treatmentPlanId,await G()),await D(),await ne()}catch(X){console.error("Error loading bill data:",X),h.value=X.message||"Failed to load bill data",s(h.value)}finally{d.value=!1}},G=async()=>{if(!T.value){U.value=null;return}k.value=!0,S.value=null;try{console.log("Loading treatment plan data for ID:",T.value);const X=await df(T.value);if(X.error)throw new Error(X.error.message||"Failed to load treatment plan");U.value=X.data,console.log("Treatment plan data loaded:",U.value)}catch(X){console.error("Error loading treatment plan data:",X),S.value=X.message||"Failed to load treatment plan"}finally{k.value=!1}},D=async()=>{if(!n.billId){g.value=null;return}f.value=!0,v.value=null;try{console.log("Loading associated payment receipt for bill ID:",n.billId);const X=await pT(n.billId);X.success&&Array.isArray(X.data)&&X.data.length>0?(g.value=X.data[0],console.log("Associated payment receipt loaded:",g.value),await j()):(console.warn("No associated payment receipt found for bill:",n.billId),g.value=null)}catch(X){console.error("Error loading associated payment receipt:",X),v.value=X.message||"Failed to load payment information"}finally{f.value=!1}},j=async()=>{if(!g.value?.id){w.value=[];return}m.value=!0;try{console.log("Loading payments for receipt ID:",g.value.id);const X=await hg(g.value.id);X.success&&Array.isArray(X.data)?(w.value=X.data,console.log("Payments loaded:",w.value)):(console.warn("No payments found or invalid response:",X),w.value=[])}catch(X){console.error("Error loading receipt payments:",X),w.value=[]}finally{m.value=!1}},ne=async()=>{try{const X=o.state.doctorModule.doctorId;if(!X){console.warn("No doctor ID available for print configurations");return}const ae=await sv(X);x.value=ae.data||{},console.log("Print configurations fetched:",x.value)}catch(X){console.error("Error fetching print configs:",X),s("Failed to load print configurations")}},H=X=>{if(!X)return"";try{return new Date(X).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return X}},te=()=>{a("edit-bill",n.billId)},Y=X=>{console.log("Bill PDF generated successfully:",X),r("Bill PDF generated successfully")},K=()=>{a("close")};return cn(()=>{se()}),(X,ae)=>{const oe=I("v-icon"),W=I("v-btn"),de=I("v-card-title"),Ae=I("v-col"),Ce=I("v-row"),De=I("v-tab"),xe=I("v-tabs"),ke=I("v-progress-circular"),Ee=I("v-label"),ye=I("v-card-text"),we=I("v-card"),at=I("v-table"),Je=I("v-divider"),rt=I("v-container"),it=I("v-tabs-window-item"),Ie=I("v-tabs-window");return R(),ve(we,{rounded:"lg",color:"surfaceContainer",flat:"",ripple:!1},{default:u(()=>[l(Ce,{"no-gutters":""},{default:u(()=>[l(Ae,{cols:"12"},{default:u(()=>[l(de,{class:"d-flex align-center justify-space-between"},{default:u(()=>[ae[3]||(ae[3]=p("span",null,"Tax Invoice cum Bill of Supply - View",-1)),l(W,{onClick:K,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(oe,{size:"18"},{default:u(()=>[...ae[2]||(ae[2]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(Ce,{"no-gutters":""},{default:u(()=>[l(Ae,{cols:"12"},{default:u(()=>[l(xe,{modelValue:b.value,"onUpdate:modelValue":ae[0]||(ae[0]=Ve=>b.value=Ve),color:"primary","bg-color":"surfaceContainerHigh","align-tabs":"start",class:"mx-3 mb-3"},{default:u(()=>[l(De,{value:"view"},{default:u(()=>[l(oe,{start:""},{default:u(()=>[...ae[4]||(ae[4]=[O("mdi-eye",-1)])]),_:1}),ae[5]||(ae[5]=O(" View Bill ",-1))]),_:1}),l(De,{value:"share"},{default:u(()=>[l(oe,{start:""},{default:u(()=>[...ae[6]||(ae[6]=[O("mdi-share-variant",-1)])]),_:1}),ae[7]||(ae[7]=O(" Share Bill ",-1))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(Ce,{"no-gutters":""},{default:u(()=>[l(Ae,{cols:"12",class:"scroll-element"},{default:u(()=>[l(Ie,{modelValue:b.value,"onUpdate:modelValue":ae[1]||(ae[1]=Ve=>b.value=Ve)},{default:u(()=>[l(it,{value:"view"},{default:u(()=>[d.value?(R(),ve(Ce,{key:0,"no-gutters":""},{default:u(()=>[l(Ae,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[p("div",R2e,[l(ke,{indeterminate:"",color:"primary",size:"64"}),ae[8]||(ae[8]=p("div",{class:"mt-4 text-subtitle-1"},"Loading bill...",-1))])]),_:1})]),_:1})):h.value?(R(),ve(Ce,{key:1,"no-gutters":""},{default:u(()=>[l(Ae,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[p("div",N2e,[l(oe,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...ae[9]||(ae[9]=[O("mdi-alert-circle",-1)])]),_:1}),ae[11]||(ae[11]=p("div",{class:"text-h6 mb-2"},"Failed to Load Bill",-1)),p("div",V2e,q(h.value),1),l(W,{color:"primary",onClick:se,"prepend-icon":"mdi-refresh"},{default:u(()=>[...ae[10]||(ae[10]=[O(" Try Again ",-1)])]),_:1})])]),_:1})]),_:1})):y.value?(R(),ve(rt,{key:2,fluid:"",class:"pa-3"},{default:u(()=>[l(we,{flat:"",color:"surfaceContainerHigh",class:"mb-4 card-enhanced"},{default:u(()=>[l(ye,{class:"pb-1 pt-2"},{default:u(()=>[l(Ce,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(Ae,{cols:"4"},{default:u(()=>[p("div",L2e,[l(Ee,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...ae[12]||(ae[12]=[O("Patient Information",-1)])]),_:1}),p("div",M2e,q(y.value.patientName||"Unknown Patient"),1),p("div",O2e,"ID: "+q(y.value.patientId||"N/A"),1)])]),_:1}),l(Ae,{cols:"4"},{default:u(()=>[p("div",H2e,[l(Ee,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...ae[13]||(ae[13]=[O("Appointment Details",-1)])]),_:1}),p("div",$2e,"Dr. "+q(c.value),1),p("div",Q2e,"Date: "+q(H(y.value.appointmentDate)),1)])]),_:1}),l(Ae,{cols:"4"},{default:u(()=>[p("div",G2e,[l(Ee,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...ae[14]||(ae[14]=[O("Tax Invoice cum Bill of Supply Information",-1)])]),_:1}),p("div",z2e,q(y.value.identifier),1),p("div",K2e,"Date: "+q(H(y.value.billDate)),1),i.value?.isGST&&i.value?.gstIdentifier?(R(),me("div",W2e,"GST: "+q(i.value.gstIdentifier),1)):_e("",!0)])]),_:1})]),_:1})]),_:1})]),_:1}),T.value?(R(),ve(we,{key:0,flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(ye,{class:"pb-2"},{default:u(()=>[l(Ce,{"no-gutters":"",align:"center",class:"mb-2"},{default:u(()=>[l(Ae,{cols:"3",class:"d-flex align-center"},{default:u(()=>[...ae[15]||(ae[15]=[p("div",{class:"text-subtitle-1"},"Treatment Plan",-1)])]),_:1}),l(Ae,{cols:"9"},{default:u(()=>[k.value?(R(),me("div",j2e,[l(ke,{indeterminate:"",size:"16",color:"primary",class:"mr-2"}),ae[16]||(ae[16]=p("span",{class:"text-body-2"},"Loading treatment plan...",-1))])):S.value?(R(),me("div",q2e,[l(oe,{size:"16",class:"mr-1"},{default:u(()=>[...ae[17]||(ae[17]=[O("mdi-alert-circle",-1)])]),_:1}),O(" "+q(S.value),1)])):U.value?(R(),me("div",Y2e,[p("div",X2e,q(U.value.treatmentPlanName),1),p("div",J2e,[O(" Status: "+q(U.value.status)+" ",1),U.value.startDate?(R(),me("span",Z2e,"  Start: "+q(H(U.value.startDate)),1)):_e("",!0),U.value.endDate?(R(),me("span",ewe,"  End: "+q(H(U.value.endDate)),1)):_e("",!0)]),U.value.notes?(R(),me("div",twe,[ae[18]||(ae[18]=p("strong",null,"Notes:",-1)),O(" "+q(U.value.notes.substring(0,80)),1),U.value.notes.length>80?(R(),me("span",nwe,"...")):_e("",!0)])):_e("",!0)])):_e("",!0)]),_:1})]),_:1})]),_:1})]),_:1})):_e("",!0),l(we,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(ye,{class:"pb-2"},{default:u(()=>[ae[30]||(ae[30]=p("div",{class:"text-subtitle-1 mb-3"},"Goods and Services Information",-1)),l(at,{density:"compact",class:"mb-3"},{default:u(()=>[p("thead",null,[p("tr",null,[ae[19]||(ae[19]=p("th",{class:"text-left"},"Sr. No",-1)),ae[20]||(ae[20]=p("th",{class:"text-left"},"Description",-1)),A.value?(R(),me("th",awe,"HSN/SAC Code")):_e("",!0),ae[21]||(ae[21]=p("th",{class:"text-right"},"Base Cost per unit (incl. GST)",-1)),ce.value?(R(),me("th",rwe,"Discount per unit")):_e("",!0),ae[22]||(ae[22]=p("th",{class:"text-center"},"GST %",-1)),ae[23]||(ae[23]=p("th",{class:"text-right"},"Taxable Value",-1)),ae[24]||(ae[24]=p("th",{class:"text-right"},"GST Amt",-1)),ae[25]||(ae[25]=p("th",{class:"text-center"},"Qty",-1)),ae[26]||(ae[26]=p("th",{class:"text-right"},"Total",-1))])]),p("tbody",null,[(R(!0),me(ze,null,Wt(y.value.services,(Ve,ft)=>(R(),me("tr",{key:ft},[p("td",swe,q(ft+1),1),p("td",owe,q(Ve.serviceDescription),1),A.value?(R(),me("td",iwe,q(Ve.hsnSacCode||"N/A"),1)):_e("",!0),p("td",lwe,q(Oe(Yn)(Ve.baseCost)),1),ce.value?(R(),me("td",uwe,q(Oe(Yn)(Ve.discountAmount)),1)):_e("",!0),p("td",cwe,q(Ve.gstPercent)+"%",1),p("td",dwe,q(Oe(Yn)(le(Ve).gstExclusiveAmount)),1),p("td",Awe,q(Oe(Yn)(le(Ve).gstAmount)),1),p("td",fwe,q(Ve.quantity),1),p("td",mwe,q(Oe(Yn)(le(Ve).total)),1)]))),128))])]),_:1}),l(Je,{class:"mb-3"}),l(Ce,{"no-gutters":""},{default:u(()=>[l(Ae,{cols:"8",class:"text-right"},{default:u(()=>[ce.value?(R(),me("div",hwe,"Base Cost Total (incl. GST):")):_e("",!0),ce.value?(R(),me("div",vwe,"Line Item Discounts:")):_e("",!0),ce.value?(R(),me("div",pwe,"Subtotal after Discounts (incl. GST):")):_e("",!0),ae[27]||(ae[27]=p("div",{class:"text-body-2 mb-1"},"Taxable Value Total:",-1)),ae[28]||(ae[28]=p("div",{class:"text-body-2 mb-1"},"GST Amount:",-1)),y.value.additionalDiscount>0?(R(),me("div",gwe,"Additional Discount:")):_e("",!0),ae[29]||(ae[29]=p("div",{class:"text-subtitle-1 font-weight-bold"},"Grand Total (incl. GST):",-1))]),_:1}),l(Ae,{cols:"4",class:"text-right"},{default:u(()=>[ce.value?(R(),me("div",ywe,q(Oe(Yn)(C.value)),1)):_e("",!0),ce.value?(R(),me("div",_we,"-"+q(Oe(Yn)(N.value)),1)):_e("",!0),ce.value?(R(),me("div",wwe,q(Oe(Yn)(C.value-N.value)),1)):_e("",!0),p("div",bwe,q(Oe(Yn)(L.value)),1),p("div",xwe,q(Oe(Yn)(P.value)),1),y.value.additionalDiscount>0?(R(),me("div",Cwe,"-"+q(Oe(Yn)(y.value.additionalDiscount)),1)):_e("",!0),p("div",Swe,q(Oe(Yn)(ie.value)),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(we,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(ye,{class:"pb-2"},{default:u(()=>[ae[43]||(ae[43]=p("div",{class:"text-subtitle-1 mb-3"},"Payment Information",-1)),f.value?(R(),me("div",Ewe,[l(ke,{indeterminate:"",size:"32",color:"primary"}),ae[31]||(ae[31]=p("div",{class:"text-body-2 mt-2"},"Loading payment information...",-1))])):v.value?(R(),me("div",Bwe,[l(oe,{size:"48",color:"error",class:"mb-2"},{default:u(()=>[...ae[32]||(ae[32]=[O("mdi-alert-circle",-1)])]),_:1}),p("div",kwe,q(v.value),1)])):g.value?(R(),me(ze,{key:2},[l(Ce,{"no-gutters":"",class:"mb-3"},{default:u(()=>[l(Ae,{cols:"4"},{default:u(()=>[ae[33]||(ae[33]=p("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Payment Receipt",-1)),p("div",Twe,q(g.value.identifier),1),p("div",Iwe,q(H(g.value.paymentReceiptDate)),1)]),_:1}),l(Ae,{cols:"4"},{default:u(()=>[ae[34]||(ae[34]=p("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Total Amount",-1)),p("div",Fwe,q(Oe(Yn)(ie.value)),1)]),_:1}),l(Ae,{cols:"4"},{default:u(()=>[ae[35]||(ae[35]=p("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Paid Amount",-1)),p("div",Pwe,q(Oe(Yn)(Q.value)),1)]),_:1})]),_:1}),m.value?(R(),me("div",Dwe,[l(ke,{indeterminate:"",size:"32",color:"primary"}),ae[36]||(ae[36]=p("div",{class:"text-body-2 mt-2"},"Loading payment history...",-1))])):w.value&&w.value.length>0?(R(),me(ze,{key:1},[l(Je,{class:"mb-3"}),ae[38]||(ae[38]=p("div",{class:"text-subtitle-2 mb-2"},"Payment History",-1)),l(at,{density:"compact"},{default:u(()=>[ae[37]||(ae[37]=p("thead",null,[p("tr",null,[p("th",{class:"text-left"},"Date"),p("th",{class:"text-left"},"Method"),p("th",{class:"text-right"},"Amount")])],-1)),p("tbody",null,[(R(!0),me(ze,null,Wt(w.value,Ve=>(R(),me("tr",{key:Ve.id},[p("td",Uwe,q(H(Ve.paymentDate)),1),p("td",Rwe,q(Ve.mode||"N/A"),1),p("td",Nwe,q(Oe(Yn)(Ve.amount)),1)]))),128))])]),_:1})],64)):(R(),me(ze,{key:2},[l(Je,{class:"mb-3"}),p("div",Vwe,[l(oe,{size:"48",color:"outline",class:"mb-2"},{default:u(()=>[...ae[39]||(ae[39]=[O("mdi-currency-inr",-1)])]),_:1}),ae[40]||(ae[40]=p("div",{class:"text-body-2 text-medium-emphasis"},"No payments recorded",-1))])],64))],64)):(R(),me("div",Lwe,[l(oe,{size:"48",color:"outline",class:"mb-2"},{default:u(()=>[...ae[41]||(ae[41]=[O("mdi-receipt",-1)])]),_:1}),ae[42]||(ae[42]=p("div",{class:"text-body-2 text-medium-emphasis"},"No associated payment receipt found",-1))]))]),_:1})]),_:1}),l(we,{flat:"",color:"surfaceContainerHigh",class:"card-enhanced"},{default:u(()=>[l(ye,{class:"d-flex justify-center gap-3 pb-2"},{default:u(()=>[l(W,{color:"secondary",variant:"outlined",onClick:te,"prepend-icon":"mdi-pencil",class:"btn-hover-base"},{default:u(()=>[...ae[44]||(ae[44]=[O(" Edit Bill ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})):_e("",!0)]),_:1}),l(it,{value:"share",class:"h-100"},{default:u(()=>[l(Ce,{"no-gutters":"",class:"h-100"},{default:u(()=>[l(Ae,{cols:"12"},{default:u(()=>[l(ov,{"content-type":"bill",data:{consultation:J.value,printConfigurations:x.value,doctor:i.value},patient:{name:y.value?.patientName,patientName:y.value?.patientName,patientId:y.value?.patientId,contactNumber:y.value?.patientContactNumber},onPdfGenerated:Y},null,8,["data","patient"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}}},uH=Xt(Mwe,[["__scopeId","data-v-f81d44f3"]]),Owe={class:"text-center"},Hwe={class:"text-center"},$we={class:"text-body-2 text-medium-emphasis mb-4"},Qwe={class:"pa-1"},Gwe={class:"text-body-1 font-weight-medium"},zwe={class:"text-body-2 text-medium-emphasis"},Kwe={class:"pa-1"},Wwe={class:"text-body-1 font-weight-medium"},jwe={class:"text-body-2 text-medium-emphasis"},qwe={class:"pa-1"},Ywe={class:"text-body-1 font-weight-medium"},Xwe={class:"text-body-2 text-medium-emphasis"},Jwe={class:"text-caption text-medium-emphasis mt-1"},Zwe={class:"d-flex flex-column py-1"},ebe={class:"text-body-2 font-weight-medium"},tbe={class:"text-caption text-medium-emphasis"},nbe={key:0},abe={class:"text-caption"},rbe={key:0,class:"ml-2"},sbe={key:2,class:"text-body-2 text-medium-emphasis"},obe={key:0,class:"text-left",style:{width:"100px"}},ibe={key:0,class:"text-body-2 font-weight-medium"},lbe={key:0},ube={key:0,class:"text-body-2 font-weight-medium"},cbe={key:0,class:"text-body-2 font-weight-medium"},dbe={key:0,class:"text-body-2 font-weight-medium"},Abe={key:0,class:"text-body-2 font-weight-medium"},fbe={class:"text-body-2 font-weight-medium"},mbe={class:"text-body-2 font-weight-medium"},hbe={key:0,class:"text-body-2 font-weight-medium"},vbe={class:"text-body-2 font-weight-medium"},pbe={key:0,class:"text-body-2 mb-1"},gbe={key:1,class:"text-body-2 mb-1"},ybe={key:2,class:"text-body-2 mb-1"},_be={key:3,class:"text-body-2 mb-1"},wbe={key:0,class:"text-body-2 mb-1"},bbe={key:1,class:"text-body-2 mb-1"},xbe={key:2,class:"text-body-2 mb-1"},Cbe={class:"text-body-2 mb-1"},Sbe={class:"text-body-2 mb-1"},Ebe={key:3,class:"text-body-2 mb-1"},Bbe={class:"text-subtitle-1 font-weight-bold"},kbe={key:0,class:"text-center pa-4"},Tbe={class:"text-subtitle-2"},Ibe={class:"text-body-2"},Fbe={class:"text-h6"},Pbe={class:"text-h6 text-success"},Dbe={key:0,class:"text-center pa-4"},Ube={class:"font-weight-bold"},Rbe={__name:"bill-receipt-edit",props:{billId:{type:[String,Number],required:!0}},emits:["close","bill-updated"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ra(),o=ea(),i=ee(()=>o.state.doctorModule.doctorId),c=ee(()=>o.getters["doctorModule/currentDoctor"]),A=ee(()=>c.value?.doctorName||"Unknown Doctor"),d=ee(()=>c.value?.isGST||!1),f=M(!1),m=M(!1),h=M(null),v=M(null),y=M([]),g=M(!1),w=M(!1),b=M(null),x=M(null),T=M([]),U=M([]),k=M(!1),S=M(null),E=M([]),C=M(!1),P=M(null);ee(()=>S.value?E.value.find(Ie=>Ie.id===S.value):null);const F=gT(y,ee(()=>v.value?.additionalDiscount||0)),{servicesWithTotals:N,baseSubtotal:L,totalGSTAmount:ie,subtotalWithGST:le,totalLineDiscount:Q,totalTaxableValue:Z,finalGrandTotal:ce,hasValidService:J,calculateServiceTotal:se}=F,G=ee(()=>y.value.some(Ie=>(parseFloat(Ie.discountAmount)||0)>0)),D=av,j=M([]),ne=()=>{y.value.push({serviceDescription:"",hsnSacCode:"",baseCost:null,gstPercent:0,quantity:1,discountAmount:0,isFromHistory:!1,isPrepopulated:!1})},H=Ie=>{y.value.length>1?y.value.splice(Ie,1):s("At least one service is required")},te=(Ie,Ve)=>{y.value[Ie]&&(y.value[Ie].serviceDescription=Ve)},Y=(Ie,Ve)=>{console.log("Service selected:",Ve),Ve&&typeof Ve=="object"&&!Ve.isUserTyped?y.value[Ie]={...y.value[Ie],serviceDescription:Ve.serviceDescription,hsnSacCode:Ve.hsnSacCode||"",baseCost:Ve.baseCost,gstPercent:Ve.gstPercent||0,isFromHistory:!0,isPrepopulated:y.value[Ie].isPrepopulated===!0}:Ve===null&&(y.value[Ie]={serviceDescription:"",hsnSacCode:"",baseCost:null,gstPercent:0,quantity:1,discountAmount:0,isFromHistory:!1,isPrepopulated:y.value[Ie].isPrepopulated===!0})},K=async()=>{if(!v.value?.patientId||!v.value?.doctorId){console.log("Missing patient or doctor ID for loading treatment plans");return}C.value=!0;try{console.log("Loading treatment plans for patient:",v.value.patientId,"doctor:",v.value.doctorId);const Ie=await vg(v.value.patientId,v.value.doctorId);if(Ie.error)throw new Error(Ie.error.message||"Failed to load treatment plans");E.value=Ie.data||[],console.log("Loaded treatment plans:",E.value.length)}catch(Ie){console.error("Error loading treatment plans:",Ie),s("Failed to load treatment plans: "+(Ie.message||"Unknown error")),E.value=[]}finally{C.value=!1}},X=ee(()=>Array.isArray(T.value)?T.value.reduce((Ie,Ve)=>Ie+(parseFloat(Ve.amount)||0),0):0),ae=ee(()=>Array.isArray(j.value)?j.value.reduce((Ie,Ve)=>Ie+(parseFloat(Ve.amount)||0),0):0),oe=ee(()=>{const Ie=X.value,Ve=ae.value;return Math.max(0,ce.value-Ie-Ve)}),W=ee(()=>{const Ie=J.value,Ve=v.value?.patientName;return Ie&&Ve}),de=()=>{j.value.push({amount:null,mode:"Cash",paymentDate:new Date().toISOString().split("T")[0],datePickerMenu:!1})},Ae=Ie=>{j.value.splice(Ie,1)},Ce=Ie=>{if(!Ie)return null;try{if(typeof Ie=="string")return Ie.includes("T")?Ie.split("T")[0]:Ie;if(Ie instanceof Date){const Ve=Ie.getFullYear(),ft=String(Ie.getMonth()+1).padStart(2,"0"),Ft=String(Ie.getDate()).padStart(2,"0");return`${Ve}-${ft}-${Ft}`}return null}catch(Ve){return console.error("Error parsing payment date:",Ve),null}},De=(Ie,Ve)=>{if(Ie)if(Ie instanceof Date){const ft=Ie.getFullYear(),Ft=String(Ie.getMonth()+1).padStart(2,"0"),tt=String(Ie.getDate()).padStart(2,"0");Ve.paymentDate=`${ft}-${Ft}-${tt}`}else typeof Ie=="string"&&(Ve.paymentDate=Ie);else Ve.paymentDate="";Ve.datePickerMenu=!1},xe=async()=>{if(!n.billId){h.value="No bill ID provided";return}f.value=!0,h.value=null;try{console.log("Loading bill data for editing, ID:",n.billId);const Ie=await vT(n.billId);if(Ie.error)throw new Error(Ie.error.message||"Failed to load bill");const Ve=Ie.data;if(v.value={id:Ve.id,identifier:Ve.identifier,patientName:Ve.patientName,patientId:Ve.patientId,appointmentDate:Ve.appointmentDate,billDate:Ve.billDate,doctorId:Ve.doctorId,appointmentId:Ve.appointmentId,additionalDiscount:Ve.additionalDiscount||0,treatmentPlanId:Ve.treatmentPlanId},Ve.services&&Ve.services.length>0?y.value=Ve.services.map(ft=>({id:ft.id,serviceDescription:ft.serviceDescription,hsnSacCode:ft.hsnSacCode||"",baseCost:ft.baseCost,gstPercent:ft.gstPercent||0,quantity:ft.quantity||1,discountAmount:ft.discountAmount||0,isFromHistory:!1,isPrepopulated:!0})):y.value=[{serviceDescription:"",hsnSacCode:"",baseCost:null,gstPercent:0,quantity:1,discountAmount:0,isFromHistory:!1,isPrepopulated:!1}],console.log("Bill data loaded for editing:",v.value),console.log("Services loaded:",y.value),Ve.treatmentPlanId){k.value=!0,S.value=Ve.treatmentPlanId,await K();try{const ft=await df(Ve.treatmentPlanId);P.value=ft}catch(ft){console.error("Error loading original treatment plan data:",ft)}}await ke()}catch(Ie){console.error("Error loading bill data:",Ie),h.value=Ie.message||"Failed to load bill data",s(h.value)}finally{f.value=!1}},ke=async()=>{if(!n.billId){x.value=null;return}g.value=!0,b.value=null;try{console.log("Loading associated payment receipt for bill ID:",n.billId);const Ie=await pT(n.billId);Ie.success&&Array.isArray(Ie.data)&&Ie.data.length>0?(x.value=Ie.data[0],console.log("Associated payment receipt loaded:",x.value),await Ee()):(console.warn("No associated payment receipt found for bill:",n.billId),x.value=null)}catch(Ie){console.error("Error loading associated payment receipt:",Ie),b.value=Ie.message||"Failed to load payment information"}finally{g.value=!1}},Ee=async()=>{if(!x.value?.id){T.value=[];return}w.value=!0;try{console.log("Loading payments for receipt ID:",x.value.id);const Ie=await hg(x.value.id);Ie.success&&Array.isArray(Ie.data)?(T.value=Ie.data,console.log("Payments loaded:",T.value)):(console.warn("No payments found or invalid response:",Ie),T.value=[])}catch(Ie){console.error("Error loading receipt payments:",Ie),T.value=[]}finally{w.value=!1}},ye=async()=>{if(!W.value){s("Please add at least one valid service with description and cost");return}m.value=!0;try{const Ie=y.value.filter(Ft=>Ft.serviceDescription&&Ft.baseCost>0).map(Ft=>({id:Ft.id,serviceDescription:Ft.serviceDescription,hsnSacCode:Ft.hsnSacCode||"",baseCost:parseFloat(Ft.baseCost)||0,gstPercent:parseFloat(Ft.gstPercent)||0,quantity:parseInt(Ft.quantity)||1,discountAmount:parseFloat(Ft.discountAmount)||0})),Ve={patientName:v.value.patientName,patientId:v.value.patientId,appointmentDate:v.value.appointmentDate,billDate:v.value.billDate,doctorId:v.value.doctorId,appointmentId:v.value.appointmentId,additionalDiscount:parseFloat(v.value.additionalDiscount)||0,treatmentPlanId:k.value?S.value:null,services:Ie};console.log("Updating bill with payload:",Ve);const ft=await iH(n.billId,Ve);if(ft.error)throw new Error(ft.error.message||"Failed to update bill");console.log("Bill updated successfully:",ft.data),await Je(),await we(),r(`Bill ${ft.data.identifier} updated successfully!`),a("bill-updated",ft.data)}catch(Ie){console.error("Error updating bill:",Ie),s("Failed to update bill. Please try again.")}finally{m.value=!1}},we=async()=>{if(j.value.length===0||!x.value){console.log("No new payment entries to create or no associated receipt");return}console.log("Creating new payment entries:",j.value);try{const Ie=j.value.filter(Ve=>Ve.amount&&Ve.amount>0&&Ve.mode&&Ve.paymentDate);console.log("Valid payments to create:",Ie);for(const Ve of Ie){const ft={amount:parseFloat(Ve.amount),mode:Ve.mode,paymentDate:Ve.paymentDate,paymentReceiptId:x.value.id};console.log("Creating payment with payload:",ft);const Ft=await nv(ft);Ft.success?console.log("Payment created successfully:",Ft.data):(console.error("Error creating payment entry:",Ft.error),s(`Failed to create payment: ${Ft.error?.message||"Unknown error"}`))}await Ee(),j.value=[]}catch(Ie){console.error("Error creating payment entries:",Ie),s("Failed to create some payments: "+(Ie.message||"Unknown error"))}},at=async Ie=>{if(Ie){U.value.push(Ie);try{console.log("Deleting payment:",Ie);const Ve=await aT(Ie);if(Ve.error)throw new Error(Ve.error.message||"Failed to delete payment");T.value=T.value.filter(ft=>ft.id!==Ie),r("Payment deleted successfully")}catch(Ve){console.error("Error deleting payment:",Ve),s("Failed to delete payment: "+(Ve.message||"Unknown error"))}finally{U.value=U.value.filter(Ve=>Ve!==Ie)}}},Je=async()=>{if(!x.value?.id){console.log("No associated payment receipt to update");return}try{console.log("Updating payment receipt treatment plan");const Ie={treatmentPlanId:k.value?S.value:null};console.log("Updating payment receipt with data:",Ie);const Ve=await _he(x.value.id,Ie);if(Ve.error)throw new Error(Ve.error.message||"Failed to update payment receipt treatment plan");console.log("Payment receipt treatment plan updated successfully"),x.value.treatmentPlanId=Ie.treatmentPlanId}catch(Ie){console.error("Error updating payment receipt treatment plan:",Ie),console.warn("Payment receipt treatment plan update failed, but bill was updated successfully")}},rt=Ie=>{if(!Ie)return"";try{return new Date(Ie).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return Ie}},it=()=>{a("close")};return We(k,Ie=>{Ie&&E.value.length===0?K():Ie||(S.value=null)}),cn(()=>{xe()}),(Ie,Ve)=>{const ft=I("v-icon"),Ft=I("v-btn"),tt=I("v-card-title"),Ge=I("v-col"),pt=I("v-row"),ht=I("v-progress-circular"),Nt=I("v-label"),nn=I("v-card-text"),yn=I("v-card"),qn=I("v-switch"),$t=I("v-chip"),Tt=I("v-list-item"),ut=I("v-select"),kt=I("v-text-field"),Zt=I("v-table"),je=I("v-divider"),Ke=I("v-alert"),wt=I("v-date-picker"),Vt=I("v-menu"),qt=I("v-container");return R(),ve(yn,{rounded:"lg",color:"surfaceContainer",flat:"",ripple:!1},{default:u(()=>[l(pt,{"no-gutters":""},{default:u(()=>[l(Ge,{cols:"12"},{default:u(()=>[l(tt,{class:"d-flex align-center justify-space-between"},{default:u(()=>[Ve[4]||(Ve[4]=p("span",null,"Tax Invoice cum Bill of Supply - Edit",-1)),l(Ft,{onClick:it,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(ft,{size:"18"},{default:u(()=>[...Ve[3]||(Ve[3]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(pt,{"no-gutters":""},{default:u(()=>[l(Ge,{cols:"12",class:"scroll-element"},{default:u(()=>[f.value?(R(),ve(pt,{key:0,"no-gutters":""},{default:u(()=>[l(Ge,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[p("div",Owe,[l(ht,{indeterminate:"",color:"primary",size:"64"}),Ve[5]||(Ve[5]=p("div",{class:"mt-4 text-subtitle-1"},"Loading bill...",-1))])]),_:1})]),_:1})):h.value?(R(),ve(pt,{key:1,"no-gutters":""},{default:u(()=>[l(Ge,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[p("div",Hwe,[l(ft,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...Ve[6]||(Ve[6]=[O("mdi-alert-circle",-1)])]),_:1}),Ve[8]||(Ve[8]=p("div",{class:"text-h6 mb-2"},"Failed to Load Bill",-1)),p("div",$we,q(h.value),1),l(Ft,{color:"primary",onClick:xe,"prepend-icon":"mdi-refresh"},{default:u(()=>[...Ve[7]||(Ve[7]=[O(" Retry ",-1)])]),_:1})])]),_:1})]),_:1})):v.value?(R(),ve(qt,{key:2,fluid:"",class:"pa-3"},{default:u(()=>[l(yn,{flat:"",color:"surfaceContainerHigh",class:"mb-4 card-enhanced"},{default:u(()=>[l(nn,{class:"pb-1 pt-2"},{default:u(()=>[l(pt,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(Ge,{cols:"4"},{default:u(()=>[p("div",Qwe,[l(Nt,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...Ve[9]||(Ve[9]=[O("Patient Information",-1)])]),_:1}),p("div",Gwe,q(v.value.patientName||"Unknown Patient"),1),p("div",zwe,"ID: "+q(v.value.patientId||"N/A"),1)])]),_:1}),l(Ge,{cols:"4"},{default:u(()=>[p("div",Kwe,[l(Nt,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...Ve[10]||(Ve[10]=[O("Appointment Details",-1)])]),_:1}),p("div",Wwe,"Dr. "+q(A.value),1),p("div",jwe,"Date: "+q(rt(v.value.appointmentDate)),1)])]),_:1}),l(Ge,{cols:"4"},{default:u(()=>[p("div",qwe,[l(Nt,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...Ve[11]||(Ve[11]=[O("Tax Invoice cum Bill of Supply Information",-1)])]),_:1}),p("div",Ywe,q(v.value.identifier),1),p("div",Xwe,"Date: "+q(rt(v.value.billDate)),1)])]),_:1})]),_:1})]),_:1})]),_:1}),l(yn,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(nn,{class:"pb-2"},{default:u(()=>[l(pt,{"no-gutters":"",align:"center",class:"mb-3"},{default:u(()=>[l(Ge,{cols:"2",class:"d-flex align-center"},{default:u(()=>[...Ve[12]||(Ve[12]=[p("div",{class:"text-subtitle-1"},"Treatment Plan",-1)])]),_:1}),l(Ge,{cols:"3",class:"d-flex align-center"},{default:u(()=>[l(qn,{modelValue:k.value,"onUpdate:modelValue":Ve[0]||(Ve[0]=vt=>k.value=vt),label:"Link to treatment plan",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),l(Ge,{cols:"7"},{default:u(()=>[!k.value&&P.value?(R(),me(ze,{key:0},[l($t,{color:"secondary",variant:"outlined","prepend-icon":"mdi-link-variant",class:"mr-2"},{default:u(()=>[O(q(P.value.treatmentPlanName),1)]),_:1}),p("div",Jwe," Status: "+q(P.value.status)+"  Created: "+q(rt(P.value.createdAt)),1)],64)):k.value?(R(),ve(ut,{key:1,modelValue:S.value,"onUpdate:modelValue":Ve[1]||(Ve[1]=vt=>S.value=vt),items:E.value,"item-title":"treatmentPlanName","item-value":"id",label:"Select Treatment Plan",variant:"outlined",density:"compact",loading:C.value,disabled:C.value,clearable:"","hide-details":""},{selection:u(({item:vt})=>[p("div",Zwe,[p("div",ebe,q(vt.raw.treatmentPlanName),1),p("div",tbe,[O(" Status: "+q(vt.raw.status)+"  Created: "+q(rt(vt.raw.createdAt))+" ",1),vt.raw.notes?(R(),me("span",nbe,"  "+q(vt.raw.notes.substring(0,30))+"...",1)):_e("",!0)])])]),item:u(({props:vt,item:Kt})=>[l(Tt,Ql(Kl(vt)),{title:u(()=>[O(q(Kt.raw.treatmentPlanName),1)]),subtitle:u(()=>[p("div",abe,[O(" Status: "+q(Kt.raw.status)+"  Created: "+q(rt(Kt.raw.createdAt))+" ",1),Kt.raw.notes?(R(),me("span",rbe," "+q(Kt.raw.notes.substring(0,50))+"...",1)):_e("",!0)])]),_:2},1040)]),_:1},8,["modelValue","items","loading","disabled"])):(R(),me("div",sbe," No treatment plan linked "))]),_:1})]),_:1})]),_:1})]),_:1}),l(yn,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(nn,{class:"pb-2"},{default:u(()=>[Ve[28]||(Ve[28]=p("div",{class:"text-subtitle-1 mb-3"},"Goods and Services Information",-1)),l(Zt,{density:"compact",class:"mb-3"},{default:u(()=>[p("thead",null,[p("tr",null,[Ve[13]||(Ve[13]=p("th",{class:"text-left",style:{width:"60px"}},"Sr. No",-1)),Ve[14]||(Ve[14]=p("th",{class:"text-left",style:{width:"200px"}},"Description",-1)),d.value?(R(),me("th",obe,"HSN/SAC Code")):_e("",!0),Ve[15]||(Ve[15]=p("th",{class:"text-left",style:{width:"120px"}},"Base Cost per unit (incl. GST)",-1)),Ve[16]||(Ve[16]=p("th",{class:"text-left",style:{width:"110px"}},"Discount per unit",-1)),Ve[17]||(Ve[17]=p("th",{class:"text-left",style:{width:"80px"}},"GST %",-1)),Ve[18]||(Ve[18]=p("th",{class:"text-left",style:{width:"120px"}},"Taxable Value",-1)),Ve[19]||(Ve[19]=p("th",{class:"text-left",style:{width:"100px"}},"GST Amount",-1)),Ve[20]||(Ve[20]=p("th",{class:"text-left",style:{width:"90px"}},"Quantity",-1)),Ve[21]||(Ve[21]=p("th",{class:"text-left",style:{width:"120px"}},"Total",-1)),Ve[22]||(Ve[22]=p("th",{class:"text-left",style:{width:"80px"}},"Actions",-1))])]),p("tbody",null,[(R(!0),me(ze,null,Wt(Oe(N),(vt,Kt)=>(R(),me("tr",{key:Kt,class:ct(vt.isPrepopulated?"prepopulated-service":"")},[p("td",null,q(Kt+1),1),p("td",null,[vt.isPrepopulated?(R(),me("span",ibe,q(vt.serviceDescription),1)):(R(),ve(ww,{key:1,"model-value":vt.serviceDescription,"onUpdate:modelValue":Pt=>te(Kt,Pt),onServiceSelected:Pt=>Y(Kt,Pt),"doctor-id":i.value,density:"compact"},null,8,["model-value","onUpdate:modelValue","onServiceSelected","doctor-id"]))]),d.value?(R(),me("td",lbe,[vt.isPrepopulated?(R(),me("span",ube,q(vt.hsnSacCode||"N/A"),1)):(R(),ve(kt,{key:1,modelValue:y.value[Kt].hsnSacCode,"onUpdate:modelValue":Pt=>y.value[Kt].hsnSacCode=Pt,density:"compact",variant:"underlined","hide-details":"",placeholder:"HSN/SAC"},null,8,["modelValue","onUpdate:modelValue"]))])):_e("",!0),p("td",null,[vt.isPrepopulated?(R(),me("span",cbe,""+q(vt.baseCost?.toLocaleString()||0),1)):(R(),ve(kt,{key:1,modelValue:y.value[Kt].baseCost,"onUpdate:modelValue":Pt=>y.value[Kt].baseCost=Pt,modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"underlined","hide-details":"",min:"0",step:"1"},null,8,["modelValue","onUpdate:modelValue"]))]),p("td",null,[vt.isPrepopulated?(R(),me("span",dbe,""+q(vt.discountAmount?.toLocaleString()||0),1)):(R(),ve(kt,{key:1,modelValue:y.value[Kt].discountAmount,"onUpdate:modelValue":Pt=>y.value[Kt].discountAmount=Pt,modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"underlined","hide-details":"",min:"0",step:"1"},null,8,["modelValue","onUpdate:modelValue"]))]),p("td",null,[vt.isPrepopulated?(R(),me("span",Abe,q(vt.gstPercent||0)+"%",1)):(R(),ve(kt,{key:1,modelValue:y.value[Kt].gstPercent,"onUpdate:modelValue":Pt=>y.value[Kt].gstPercent=Pt,modelModifiers:{number:!0},type:"number",suffix:"%",density:"compact",variant:"underlined","hide-details":"",min:"0",max:"100",step:"0.1"},null,8,["modelValue","onUpdate:modelValue"]))]),p("td",null,[p("div",fbe,q(Oe(Yn)(Oe(se)(y.value[Kt]).gstExclusiveAmount||0)),1)]),p("td",null,[p("div",mbe,q(Oe(Yn)(Oe(se)(y.value[Kt]).gstAmount||0)),1)]),p("td",null,[vt.isPrepopulated?(R(),me("span",hbe,q(vt.quantity||1),1)):(R(),ve(kt,{key:1,modelValue:y.value[Kt].quantity,"onUpdate:modelValue":Pt=>y.value[Kt].quantity=Pt,modelModifiers:{number:!0},type:"number",density:"compact",variant:"underlined","hide-details":"",min:"1",step:"1"},null,8,["modelValue","onUpdate:modelValue"]))]),p("td",null,[p("div",vbe,q(Oe(Yn)(Oe(se)(y.value[Kt]).total||0)),1)]),p("td",null,[l(Ft,{icon:"",size:"small",color:"error",variant:"text",onClick:Pt=>H(Kt),title:vt.isPrepopulated?"Delete existing service":"Delete new service"},{default:u(()=>[l(ft,null,{default:u(()=>[...Ve[23]||(Ve[23]=[O("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick","title"])])],2))),128))])]),_:1}),l(pt,{"no-gutters":"",class:"align-center"},{default:u(()=>[l(Ge,{cols:"auto"},{default:u(()=>[l(Ft,{variant:"outlined",color:"primary",onClick:ne,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...Ve[24]||(Ve[24]=[O(" Add Service ",-1)])]),_:1})]),_:1}),l(Ge),l(Ge,{cols:"3"},{default:u(()=>[l(kt,{label:"Additional Discount",modelValue:v.value.additionalDiscount,"onUpdate:modelValue":Ve[2]||(Ve[2]=vt=>v.value.additionalDiscount=vt),modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),l(je,{class:"mb-3"}),l(pt,{"no-gutters":""},{default:u(()=>[l(Ge,{cols:"8",class:"text-right"},{default:u(()=>[G.value?(R(),me("div",pbe,"Base Cost Total (incl. GST):")):_e("",!0),G.value?(R(),me("div",gbe,"Line Item Discounts:")):_e("",!0),G.value?(R(),me("div",ybe,"Subtotal after Discounts (incl. GST):")):_e("",!0),Ve[25]||(Ve[25]=p("div",{class:"text-body-2 mb-1"},"Taxable Value Total:",-1)),Ve[26]||(Ve[26]=p("div",{class:"text-body-2 mb-1"},"GST Amount:",-1)),v.value.additionalDiscount>0?(R(),me("div",_be,"Additional Discount:")):_e("",!0),Ve[27]||(Ve[27]=p("div",{class:"text-subtitle-1 font-weight-bold"},"Grand Total (incl. GST):",-1))]),_:1}),l(Ge,{cols:"4",class:"text-right"},{default:u(()=>[G.value?(R(),me("div",wbe,q(Oe(Yn)(Oe(L))),1)):_e("",!0),G.value?(R(),me("div",bbe,"-"+q(Oe(Yn)(Oe(Q))),1)):_e("",!0),G.value?(R(),me("div",xbe,q(Oe(Yn)(Oe(L)-Oe(Q))),1)):_e("",!0),p("div",Cbe,q(Oe(Yn)(Oe(Z))),1),p("div",Sbe,q(Oe(Yn)(Oe(ie))),1),v.value.additionalDiscount>0?(R(),me("div",Ebe,"-"+q(Oe(Yn)(v.value.additionalDiscount)),1)):_e("",!0),p("div",Bbe,q(Oe(Yn)(Oe(ce))),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(yn,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(nn,{class:"pb-2"},{default:u(()=>[Ve[42]||(Ve[42]=p("div",{class:"text-subtitle-1 mb-3"},"Payment Information",-1)),g.value?(R(),me("div",kbe,[l(ht,{indeterminate:"",color:"primary",size:"32"}),Ve[29]||(Ve[29]=p("div",{class:"mt-2 text-body-2"},"Loading payment information...",-1))])):b.value?(R(),ve(Ke,{key:1,type:"warning",variant:"tonal",class:"mb-3"},{default:u(()=>[O(q(b.value),1)]),_:1})):x.value?(R(),me(ze,{key:2},[l(pt,{"no-gutters":"",class:"mb-3"},{default:u(()=>[l(Ge,{cols:"12"},{default:u(()=>[l(Ke,{type:"info",variant:"tonal",density:"compact"},{title:u(()=>[p("span",Tbe,"Payment Receipt: "+q(x.value.identifier),1)]),default:u(()=>[p("div",Ibe,[Ve[30]||(Ve[30]=p("strong",null,"Date:",-1)),O(" "+q(rt(x.value.paymentReceiptDate)),1)])]),_:1})]),_:1})]),_:1}),l(pt,{"no-gutters":"",class:"mb-3"},{default:u(()=>[l(Ge,{cols:"4"},{default:u(()=>[Ve[31]||(Ve[31]=p("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Total Amount",-1)),p("div",Fbe,q(Oe(Yn)(Oe(ce))),1)]),_:1}),l(Ge,{cols:"4"},{default:u(()=>[Ve[32]||(Ve[32]=p("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Paid Amount",-1)),p("div",Pbe,q(Oe(Yn)(X.value+ae.value)),1)]),_:1}),l(Ge,{cols:"4"},{default:u(()=>[Ve[33]||(Ve[33]=p("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Balance Due",-1)),p("div",{class:ct(["text-h6",oe.value>0?"text-error":"text-success"])},q(Oe(Yn)(oe.value)),3)]),_:1})]),_:1}),w.value?(R(),me("div",Dbe,[l(ht,{indeterminate:"",size:"32",color:"primary"}),Ve[34]||(Ve[34]=p("div",{class:"text-body-2 mt-2"},"Loading payments...",-1))])):(R(),me(ze,{key:1},[l(je,{class:"mb-3"}),Ve[40]||(Ve[40]=p("div",{class:"text-subtitle-2 mb-2"},"Payments",-1)),l(Zt,{density:"compact",class:"mb-3"},{default:u(()=>[Ve[38]||(Ve[38]=p("thead",null,[p("tr",null,[p("th",{class:"text-left",style:{width:"60px"}},"Sr. No"),p("th",{class:"text-left",style:{width:"150px"}},"Amount ()"),p("th",{class:"text-left",style:{width:"150px"}},"Payment Mode"),p("th",{class:"text-left",style:{width:"150px"}},"Payment Date"),p("th",{class:"text-left",style:{width:"80px"}},"Actions")])],-1)),p("tbody",null,[(R(!0),me(ze,null,Wt(T.value,(vt,Kt)=>(R(),me("tr",{key:`existing-${vt.id}`},[p("td",null,q(Kt+1),1),p("td",Ube,""+q(vt.amount.toLocaleString()),1),p("td",null,q(vt.mode),1),p("td",null,q(rt(vt.paymentDate)),1),p("td",null,[l(Ft,{icon:"",size:"small",color:"error",variant:"text",onClick:Pt=>at(vt.id),loading:U.value.includes(vt.id)},{default:u(()=>[l(ft,null,{default:u(()=>[...Ve[35]||(Ve[35]=[O("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick","loading"])])]))),128)),(R(!0),me(ze,null,Wt(j.value,(vt,Kt)=>(R(),me("tr",{key:`new-${Kt}`},[p("td",null,q(T.value.length+Kt+1),1),p("td",null,[l(kt,{modelValue:vt.amount,"onUpdate:modelValue":Pt=>vt.amount=Pt,modelModifiers:{number:!0},type:"number",prefix:"",min:"1",density:"compact",variant:"underlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),p("td",null,[l(ut,{modelValue:vt.mode,"onUpdate:modelValue":Pt=>vt.mode=Pt,items:Oe(D),density:"compact",variant:"underlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),p("td",null,[l(Vt,{modelValue:vt.datePickerMenu,"onUpdate:modelValue":Pt=>vt.datePickerMenu=Pt,"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},{activator:u(({props:Pt})=>[l(kt,Fe({modelValue:vt.paymentDate,"onUpdate:modelValue":Gn=>vt.paymentDate=Gn,density:"compact",variant:"underlined","hide-details":"",readonly:""},{ref_for:!0},Pt),{"append-inner":u(()=>[l(ft,{class:"text-medium-emphasis"},{default:u(()=>[...Ve[36]||(Ve[36]=[O("mdi-calendar",-1)])]),_:1})]),_:1},16,["modelValue","onUpdate:modelValue"])]),default:u(()=>[l(wt,{"model-value":Ce(vt.paymentDate),"onUpdate:modelValue":Pt=>De(Pt,vt),color:"primary",locale:"en-IN"},null,8,["model-value","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),p("td",null,[l(Ft,{icon:"",size:"small",color:"error",variant:"text",onClick:Pt=>Ae(Kt)},{default:u(()=>[l(ft,null,{default:u(()=>[...Ve[37]||(Ve[37]=[O("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])]))),128))])]),_:1}),l(pt,{"no-gutters":"",class:"align-center"},{default:u(()=>[l(Ge,{cols:"auto"},{default:u(()=>[l(Ft,{variant:"outlined",color:"secondary",onClick:de,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...Ve[39]||(Ve[39]=[O(" Add Payment ",-1)])]),_:1})]),_:1})]),_:1})],64))],64)):(R(),ve(Ke,{key:3,type:"info",variant:"tonal"},{default:u(()=>[...Ve[41]||(Ve[41]=[O(" No associated payment receipt found. Payments will be managed separately. ",-1)])]),_:1}))]),_:1})]),_:1}),l(yn,{flat:"",color:"surfaceContainerHigh",class:"card-enhanced"},{default:u(()=>[l(nn,{class:"d-flex justify-center pb-2"},{default:u(()=>[l(Ft,{color:"primary",onClick:ye,loading:m.value,disabled:!W.value,"prepend-icon":"mdi-content-save",class:"btn-hover-base"},{default:u(()=>[...Ve[43]||(Ve[43]=[O(" Update Bill ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})):_e("",!0)]),_:1})]),_:1})]),_:1})}}},cH=Xt(Rbe,[["__scopeId","data-v-f7ae1934"]]),Nbe={key:1,class:"d-flex justify-center align-center pa-8"},Vbe={__name:"patient-document-create",props:{appointment:{type:Object,required:!0},doctorId:{type:Number,required:!0},clinicId:{type:Number,required:!0}},emits:["close"],setup(e,{emit:t}){const n=e,a=t,{showError:r}=ra();ea();const s=M("write"),o=M("medical-fitness-certificate"),i=M([{title:"Medical Fitness Certificate",value:"medical-fitness-certificate"},{title:"Leave of Absence",value:"leave-of-absence"}]),c=M(!1),A=M(!1),d=M(null),f=M(null),m=P=>{if(P instanceof Date){const F=P.getFullYear(),N=String(P.getMonth()+1).padStart(2,"0"),L=String(P.getDate()).padStart(2,"0");return`${F}-${N}-${L}`}return P},h=()=>Dn(),v=M({documentType:"medical-fitness-certificate",patientName:n.appointment.patient_name||"",patientAge:n.appointment.patient_age||null,certificateDate:h(),purpose:"",validityPeriod:"",activity:"",reason:"",tillDate:"",doctorName:"",clinicName:"",additionalNotes:""}),y=ee(()=>{const P={};return v.value.patientName||(P.patientName="Required"),(v.value.patientAge===null||v.value.patientAge===void 0||v.value.patientAge==="")&&(P.patientAge="Required"),v.value.certificateDate||(P.certificateDate="Required"),o.value==="medical-fitness-certificate"&&(v.value.purpose||(P.purpose="Required"),v.value.validityPeriod||(P.validityPeriod="Required")),o.value==="leave-of-absence"&&(v.value.activity||(P.activity="Required"),v.value.reason||(P.reason="Required"),v.value.tillDate||(P.tillDate="Required")),v.value.doctorName||(P.doctorName="Required"),v.value.clinicName||(P.clinicName="Required"),P}),g=ee({get:()=>v.value.certificateDate?new Date(v.value.certificateDate+"T12:00:00").toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"",set:()=>{}}),w=ee({get:()=>v.value.tillDate?new Date(v.value.tillDate+"T12:00:00").toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"",set:()=>{}}),b=ee(()=>o.value==="leave-of-absence"?"Document Date *":"Certificate Date *"),x=ee(()=>({id:n.appointment.patientId,name:v.value.patientName||n.appointment.patient_name||"N/A",age:v.value.patientAge||n.appointment.patient_age||null,gender:n.appointment.patient_gender||"N/A",contactNumber:n.appointment.contactNumber||"N/A"})),T=ee(()=>f.value?{documentData:{...v.value,certificateDate:v.value.certificateDate},printConfigurations:f.value}:null),U=P=>{let F;typeof P=="string"?F=P.includes("T")?P.split("T")[0]:P:P instanceof Date?F=m(P):F=h(),v.value.certificateDate=F,c.value=!1},k=P=>{let F;typeof P=="string"?F=P.includes("T")?P.split("T")[0]:P:P instanceof Date?F=m(P):F="",v.value.tillDate=F,A.value=!1},S=P=>{v.value.documentType=P,P==="medical-fitness-certificate"?(v.value.activity="",v.value.reason="",v.value.tillDate=""):P==="leave-of-absence"&&(v.value.purpose="",v.value.validityPeriod="")},E=async()=>{try{const P=await sv(n.doctorId);if(P.error){console.error("Error fetching print configs:",P.error),r("Failed to load print configurations");return}if(f.value=P.data||{},f.value.doctorName&&!v.value.doctorName&&(v.value.doctorName=f.value.doctorName),f.value.clinicAddress&&!v.value.clinicName){const F=f.value.clinicAddress.split(`
`)[0]||f.value.clinicAddress;v.value.clinicName=F}}catch(P){console.error("Error fetching print configurations:",P),r("Failed to load print configurations")}},C=()=>{a("close")};return We(s,P=>{P==="write"&&d.value&&d.value.validate()}),cn(async()=>{await E()}),(P,F)=>{const N=I("v-icon"),L=I("v-btn"),ie=I("v-card-title"),le=I("v-col"),Q=I("v-row"),Z=I("v-select"),ce=I("v-tab"),J=I("v-tabs"),se=I("v-text-field"),G=I("v-date-picker"),D=I("v-menu"),j=I("v-textarea"),ne=I("v-form"),H=I("v-card-text"),te=I("v-card"),Y=I("v-tabs-window-item"),K=I("v-progress-circular"),X=I("v-tabs-window");return R(),ve(te,{rounded:"lg",color:"surfaceContainer",flat:"",ripple:!1},{default:u(()=>[l(Q,{"no-gutters":""},{default:u(()=>[l(le,{cols:"12"},{default:u(()=>[l(ie,{class:"d-flex align-center justify-space-between"},{default:u(()=>[F[19]||(F[19]=p("span",null,"Create Document",-1)),l(L,{onClick:C,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(N,{size:"18"},{default:u(()=>[...F[18]||(F[18]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(Q,{"no-gutters":""},{default:u(()=>[l(le,{cols:"12",class:"pa-3"},{default:u(()=>[l(Z,{modelValue:o.value,"onUpdate:modelValue":[F[0]||(F[0]=ae=>o.value=ae),S],items:i.value,label:"Document Type",variant:"outlined",density:"compact",class:"mb-0","hide-details":""},null,8,["modelValue","items"]),l(J,{modelValue:s.value,"onUpdate:modelValue":F[1]||(F[1]=ae=>s.value=ae),class:"mb-3"},{default:u(()=>[l(ce,{value:"write"},{default:u(()=>[...F[20]||(F[20]=[O("Write",-1)])]),_:1}),l(ce,{value:"share"},{default:u(()=>[...F[21]||(F[21]=[O("Share",-1)])]),_:1})]),_:1},8,["modelValue"]),l(X,{modelValue:s.value,"onUpdate:modelValue":F[17]||(F[17]=ae=>s.value=ae)},{default:u(()=>[l(Y,{value:"write"},{default:u(()=>[l(te,{flat:"",color:"surfaceContainerHigh",class:"card-enhanced"},{default:u(()=>[l(H,null,{default:u(()=>[l(ne,{ref_key:"formRef",ref:d},{default:u(()=>[l(Q,null,{default:u(()=>[l(le,{cols:"6"},{default:u(()=>[l(se,{modelValue:v.value.patientName,"onUpdate:modelValue":F[2]||(F[2]=ae=>v.value.patientName=ae),label:"Patient Name *",variant:"outlined",density:"compact",rules:[ae=>!!ae||"Patient name is required"],"error-messages":y.value.patientName},null,8,["modelValue","rules","error-messages"])]),_:1}),l(le,{cols:"6"},{default:u(()=>[l(se,{modelValue:v.value.patientAge,"onUpdate:modelValue":F[3]||(F[3]=ae=>v.value.patientAge=ae),modelModifiers:{number:!0},label:"Patient Age *",type:"number",variant:"outlined",density:"compact",rules:[ae=>ae!=null&&ae!==""||"Patient age is required"],"error-messages":y.value.patientAge},null,8,["modelValue","rules","error-messages"])]),_:1}),l(le,{cols:"6"},{default:u(()=>[l(D,{modelValue:c.value,"onUpdate:modelValue":F[6]||(F[6]=ae=>c.value=ae),"close-on-content-click":!1,transition:"scale-transition","offset-y":""},{activator:u(({props:ae})=>[l(se,Fe({modelValue:g.value,"onUpdate:modelValue":F[4]||(F[4]=oe=>g.value=oe),label:b.value,variant:"outlined",density:"compact",readonly:""},ae,{rules:[oe=>!!oe||"Certificate date is required"],"error-messages":y.value.certificateDate}),{"append-inner":u(()=>[l(N,null,{default:u(()=>[...F[22]||(F[22]=[O("mdi-calendar",-1)])]),_:1})]),_:1},16,["modelValue","label","rules","error-messages"])]),default:u(()=>[l(G,{modelValue:v.value.certificateDate,"onUpdate:modelValue":[F[5]||(F[5]=ae=>v.value.certificateDate=ae),U],color:"primary",locale:"en-IN"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),o.value==="medical-fitness-certificate"?(R(),me(ze,{key:0},[l(le,{cols:"6"},{default:u(()=>[l(se,{modelValue:v.value.purpose,"onUpdate:modelValue":F[7]||(F[7]=ae=>v.value.purpose=ae),label:"Purpose *",variant:"outlined",density:"compact",placeholder:"e.g., work, travel",rules:[ae=>!!ae||"Purpose is required"],"error-messages":y.value.purpose},null,8,["modelValue","rules","error-messages"])]),_:1}),l(le,{cols:"6"},{default:u(()=>[l(se,{modelValue:v.value.validityPeriod,"onUpdate:modelValue":F[8]||(F[8]=ae=>v.value.validityPeriod=ae),label:"Validity Period *",variant:"outlined",density:"compact",placeholder:"e.g., 30 days",rules:[ae=>!!ae||"Validity period is required"],"error-messages":y.value.validityPeriod},null,8,["modelValue","rules","error-messages"])]),_:1})],64)):_e("",!0),o.value==="leave-of-absence"?(R(),me(ze,{key:1},[l(le,{cols:"6"},{default:u(()=>[l(se,{modelValue:v.value.activity,"onUpdate:modelValue":F[9]||(F[9]=ae=>v.value.activity=ae),label:"Activity/Institution *",variant:"outlined",density:"compact",placeholder:"e.g., college, court",rules:[ae=>!!ae||"Activity is required"],"error-messages":y.value.activity},null,8,["modelValue","rules","error-messages"])]),_:1}),l(le,{cols:"6"},{default:u(()=>[l(se,{modelValue:v.value.reason,"onUpdate:modelValue":F[10]||(F[10]=ae=>v.value.reason=ae),label:"Reason *",variant:"outlined",density:"compact",placeholder:"e.g., medical treatment",rules:[ae=>!!ae||"Reason is required"],"error-messages":y.value.reason},null,8,["modelValue","rules","error-messages"])]),_:1}),l(le,{cols:"6"},{default:u(()=>[l(D,{modelValue:A.value,"onUpdate:modelValue":F[13]||(F[13]=ae=>A.value=ae),"close-on-content-click":!1,transition:"scale-transition","offset-y":""},{activator:u(({props:ae})=>[l(se,Fe({modelValue:w.value,"onUpdate:modelValue":F[11]||(F[11]=oe=>w.value=oe),label:"Till Date *",variant:"outlined",density:"compact",readonly:""},ae,{rules:[oe=>!!oe||"Till date is required"],"error-messages":y.value.tillDate}),{"append-inner":u(()=>[l(N,null,{default:u(()=>[...F[23]||(F[23]=[O("mdi-calendar",-1)])]),_:1})]),_:1},16,["modelValue","rules","error-messages"])]),default:u(()=>[l(G,{modelValue:v.value.tillDate,"onUpdate:modelValue":[F[12]||(F[12]=ae=>v.value.tillDate=ae),k],color:"primary",locale:"en-IN"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})],64)):_e("",!0),l(le,{cols:"6"},{default:u(()=>[l(se,{modelValue:v.value.doctorName,"onUpdate:modelValue":F[14]||(F[14]=ae=>v.value.doctorName=ae),label:"Doctor Name *",variant:"outlined",density:"compact",rules:[ae=>!!ae||"Doctor name is required"],"error-messages":y.value.doctorName},null,8,["modelValue","rules","error-messages"])]),_:1}),l(le,{cols:"6"},{default:u(()=>[l(se,{modelValue:v.value.clinicName,"onUpdate:modelValue":F[15]||(F[15]=ae=>v.value.clinicName=ae),label:"Clinic Name *",variant:"outlined",density:"compact",rules:[ae=>!!ae||"Clinic name is required"],"error-messages":y.value.clinicName},null,8,["modelValue","rules","error-messages"])]),_:1}),l(le,{cols:"12"},{default:u(()=>[l(j,{modelValue:v.value.additionalNotes,"onUpdate:modelValue":F[16]||(F[16]=ae=>v.value.additionalNotes=ae),label:"Additional Notes",variant:"outlined",density:"compact",rows:"3",placeholder:"Optional additional information"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1}),l(Y,{value:"share"},{default:u(()=>[f.value?(R(),ve(ov,{key:0,contentType:o.value==="leave-of-absence"?"leave-of-absence":"certificate",data:T.value,patient:x.value},null,8,["contentType","data","patient"])):(R(),me("div",Nbe,[l(K,{indeterminate:"",color:"primary"})]))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}}},Lbe=Xt(Vbe,[["__scopeId","data-v-407b4bc6"]]),BC=""+new URL("images/no_patient_waiting-BEIBlTUs.png",import.meta.url).href,Mbe={__name:"Permission",props:{permission:{type:String,default:null},anyPermission:{type:Array,default:null},allPermissions:{type:Array,default:null},feature:{type:String,default:null},requireAdmin:{type:Boolean,default:!1},tag:{type:String,default:"div"}},setup(e){const t=e,{hasPermission:n,hasAnyPermission:a,hasAllPermissions:r,hasFeatureAccess:s,isAdmin:o,features:i}=Zh(),c=ee(()=>{if(t.requireAdmin)return o.value;if(t.feature){const A=s(t.feature);return A?A.value:!1}if(t.permission){if(o.value)return!0;const A=n(t.permission),d=t.permission.split(".");if(d.length>=2){const f=d[0],m=i.value.find(h=>h&&h.id===f);if(m&&m.adminOnly)return!1}return A.value}return t.anyPermission&&Array.isArray(t.anyPermission)&&t.anyPermission.length>0?a(t.anyPermission).value:t.allPermissions&&Array.isArray(t.allPermissions)&&t.allPermissions.length>0?r(t.allPermissions).value:!0});return(A,d)=>c.value?(R(),ve(J2(e.tag),Ql(Fe({key:0},A.$attrs)),{default:u(()=>[xZ(A.$slots,"default",{},void 0,!0)]),_:3},16)):_e("",!0)}},xn=Xt(Mbe,[["__scopeId","data-v-4340528a"]]),eR={__name:"delete-appointment",props:{deleteSelectedAppointment:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=e,a=t,r=M(n.deleteSelectedAppointment),s=()=>{a("close")},o=async i=>{const c=await mhe(i.id);c.error?console.error("Error deleting appointment:",c.error):console.log("Appointment deleted successfully"),s()};return(i,c)=>{const A=I("v-card-title"),d=I("v-col"),f=I("v-icon"),m=I("v-btn"),h=I("v-row"),v=I("v-card"),y=I("v-card-text"),g=I("v-divider");return R(),ve(v,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(v,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"11"},{default:u(()=>[l(A,{class:"pa-0 pl-2"},{default:u(()=>[...c[1]||(c[1]=[O("Confirm Appointment Delete",-1)])]),_:1})]),_:1}),l(d,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(m,{icon:"",size:"x-small",onClick:s},{default:u(()=>[l(f,null,{default:u(()=>[...c[2]||(c[2]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(v,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(y,{class:"text-left"},{default:u(()=>[...c[3]||(c[3]=[O(" Are you sure you want to delete this appointment? ",-1),p("span",{class:"text-red font-weight-bold"}," You will not be able to recover data once deleted. ",-1)])]),_:1})]),_:1})]),_:1}),l(g),l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"2"}),l(d,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(m,{variant:"outlined",onClick:c[0]||(c[0]=w=>o(r.value))},{default:u(()=>[...c[4]||(c[4]=[O("Yes, Delete Appointment",-1)])]),_:1})]),_:1}),l(d,{cols:"2"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},Obe={class:"tab-content"},Hbe={class:"tab-content"},$be={class:"tab-content"},Qbe={class:"scroll-hover",style:{height:"calc(100% - 8px)"}},Gbe={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},zbe={class:"d-flex align-center flex-wrap"},Kbe={class:"text-caption mr-2"},Wbe={class:"d-flex align-center"},jbe={class:"scroll-hover",style:{height:"calc(100vh - 280px)"}},qbe={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},Ybe={class:"d-flex align-center flex-wrap"},Xbe={class:"text-caption mr-2"},Jbe={class:"text-success"},Zbe={class:"d-flex align-center"},exe={class:"scroll-hover",style:{height:"calc(100vh - 280px)"}},txe={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},nxe={class:"d-flex align-center flex-wrap"},axe={class:"text-caption mr-2"},rxe={class:"text-error"},sxe={class:"d-flex align-center"},oxe={__name:"appointment-queue",setup(e,{expose:t}){const n=ea(),a=Zi(),{showSuccess:r,showWarning:s}=ra(),o=M("in-queue"),i=M(!1),c=M([]),A=M(!1),d=M(null),f=M(!1),m=M(null),h=M(!1),v=M(!1),y=M(!1),g=M(null),w=M(!1),b=M(null),x=M(!1),T=M(null),U=M(!1),k=M(null),S=M(!1),E=M(null),C=M(!1),P=M(null),F=()=>{const Tt=new Date,ut=new Date(Tt.getTime()+330*60*1e3),kt=ut.getUTCFullYear(),Zt=String(ut.getUTCMonth()+1).padStart(2,"0"),je=String(ut.getUTCDate()).padStart(2,"0");return`${kt}-${Zt}-${je}`},N=Tt=>{if(Tt instanceof Date){const ut=Tt.getFullYear(),kt=String(Tt.getMonth()+1).padStart(2,"0"),Zt=String(Tt.getDate()).padStart(2,"0");return`${ut}-${kt}-${Zt}`}return Tt},L=M(F()),ie=M(""),le=M(null),Q=ee(()=>n.state.doctorModule.doctorId),Z=ee(()=>n.state.clinicModule.clinicId),ce=ee(()=>n.getters["doctorModule/isGSTRegistered"]),J=Tt=>{if(!ie.value||ie.value.trim()==="")return Tt;const ut=ie.value.toLowerCase().trim();return Tt.filter(kt=>kt.patient_name.toLowerCase().includes(ut))},se=ee(()=>{const Tt=c.value.filter(ut=>ut.status==="waiting"||ut.status==="confirmed");return J(Tt)}),G=ee(()=>{const Tt=c.value.filter(ut=>ut.status==="completed");return J(Tt)}),D=ee(()=>{const Tt=c.value.filter(ut=>ut.status==="cancelled");return J(Tt)}),{hasPermission:j}=Zh(),ne=Tt=>{if(!j("home.queue.patient").value){s("You do not have permission to view patient details from appointment card");return}console.log("Is this mobile",Fo),Fo?a.push({name:"PatientDetailMobile",params:{id:Tt},query:{from:"home"}}):a.push({name:"PatientDetailPage",params:{id:Tt},query:{from:"home"}})},H=Tt=>{console.log("Tab changed to:",Tt),f.value=!0,setTimeout(()=>{f.value=!1},500),requestAnimationFrame(()=>{f.value=!0,setTimeout(()=>{f.value=!1},300)}),m.value=Tt,setTimeout(()=>{m.value=null},600)},te=Tt=>{if(!Tt)return"Select Date";const ut=F(),kt=new Date(Date.now()+330*60*1e3-1440*60*1e3).toISOString().slice(0,10),Zt=new Date(Date.now()+330*60*1e3+1440*60*1e3).toISOString().slice(0,10);if(Tt===ut)return"Today";if(Tt===kt)return"Yesterday";if(Tt===Zt)return"Tomorrow";const je=new Date(Tt+"T12:00:00");return je.toLocaleDateString("en-IN",{day:"numeric",month:"short",year:je.getFullYear()!==new Date().getFullYear()?"numeric":void 0})},Y=async Tt=>{let ut;typeof Tt=="string"?ut=Tt.includes("T")?Tt.split("T")[0]:Tt:Tt instanceof Date?ut=N(Tt):ut=F(),L.value=ut,h.value=!1,await Nt(Q.value,Z.value,ut)},K=()=>{le.value&&clearTimeout(le.value),le.value=setTimeout(()=>{console.log("Search query:",ie.value)},300)};Gl(()=>{Nt(Q.value,Z.value,L.value)});const X=()=>{i.value=!0},ae=async()=>{i.value=!1,await Nt(Q.value,Z.value,L.value)},oe=async Tt=>{r(Tt.message),await Nt(Q.value,Z.value,L.value)},W=Tt=>{Tt.type,r(Tt.message)},de=M(!1),Ae=M(null),Ce=Tt=>{de.value=!0,Ae.value=Tt,console.log("Selected Appointment for Deletion:",Tt)},De=async()=>{de.value=!1,Ae.value=null,await Nt(Q.value,Z.value,L.value)},xe=Tt=>{d.value={...Tt},A.value=!0},ke=async()=>{await Nt(Q.value,Z.value,L.value),A.value=!1},Ee=Tt=>{if(!j("home.queue.bill").value){s("You do not have permission to generate receipts");return}g.value=Tt,ce.value?y.value=!0:v.value=!0},ye=()=>{v.value=!1,y.value=!1,g.value=null},we=Tt=>{console.log("Receipt created successfully:",Tt),r(`Receipt ${Tt.identifier} created successfully!`)},at=Tt=>{console.log("Bill created successfully:",Tt),r(`Bill ${Tt.identifier} created successfully!`),y.value=!1,g.value=null,ft(Tt.id)},Je=Tt=>{console.log("Edit receipt requested for ID:",Tt),v.value=!1,y.value=!1,b.value=Tt,w.value=!0},rt=()=>{w.value=!1,b.value=null},it=()=>{x.value=!1,T.value=null},Ie=Tt=>{console.log("View receipt requested for ID:",Tt),v.value=!1,y.value=!1,k.value=Tt,U.value=!0},Ve=()=>{U.value=!1,k.value=null},ft=Tt=>{console.log("View bill requested for ID:",Tt),v.value=!1,y.value=!1,E.value=Tt,S.value=!0},Ft=()=>{S.value=!1,E.value=null},tt=Tt=>{console.log("Edit bill requested from view for ID:",Tt),S.value=!1,E.value=null,T.value=Tt,x.value=!0},Ge=Tt=>{console.log("Edit receipt requested from view for ID:",Tt),U.value=!1,k.value=null,b.value=Tt,w.value=!0},pt=Tt=>{console.log("Receipt updated successfully:",Tt),r(`Receipt ${Tt.identifier} updated successfully!`),rt()},ht=Tt=>{console.log("Bill updated successfully:",Tt),r(`Bill ${Tt.identifier} updated successfully!`),it()},Nt=async(Tt,ut,kt=null,Zt=!1)=>{const je=await Ahe(Tt,ut,kt);je.error||(c.value=[...je.data],Zt&&r("Appointment list refreshed"))},nn=async Tt=>{Tt.status=Tt.status==="waiting"?"completed":"waiting",await DM(Tt)},yn=async()=>{await Nt(Q.value,Z.value,L.value,!0)},qn=Tt=>{if(!j("home.queue.certificate").value){s("You do not have permission to generate certificates");return}P.value=Tt,C.value=!0},$t=()=>{C.value=!1,P.value=null};return t({refreshAppointments:Nt}),(Tt,ut)=>{const kt=I("v-icon"),Zt=I("v-btn"),je=I("v-date-picker"),Ke=I("v-menu"),wt=I("v-col"),Vt=I("v-tooltip"),qt=I("v-spacer"),vt=I("v-row"),Kt=I("v-badge"),Pt=I("v-tab"),Gn=I("v-tabs"),Nn=I("v-card"),On=I("v-text-field"),Yt=I("v-progress-circular"),Tn=I("v-card-title"),Te=I("v-chip"),He=I("v-card-text"),Ue=I("v-card-actions"),Le=I("v-empty-state"),Qe=I("v-tabs-window-item"),pe=I("v-tabs-window"),re=I("v-bottom-sheet"),ge=I("v-dialog");return R(),me(ze,null,[l(Nn,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex flex-column"},{default:u(()=>[l(Nn,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(vt,{"no-gutters":""},{default:u(()=>[l(wt,{cols:"7",class:"d-flex justify-start"},{default:u(()=>[l(Ke,{modelValue:h.value,"onUpdate:modelValue":ut[1]||(ut[1]=Se=>h.value=Se),"close-on-content-click":!1,transition:"scale-transition","offset-y":""},{activator:u(({props:Se})=>[l(Zt,Fe(Se,{variant:"outlined",size:"small",rounded:"x-small",class:"btn-hover-enhanced"}),{default:u(()=>[O(q(te(L.value))+" ",1),l(kt,{class:"ml-1"},{default:u(()=>[...ut[20]||(ut[20]=[O("mdi-calendar",-1)])]),_:1})]),_:1},16)]),default:u(()=>[l(je,{modelValue:L.value,"onUpdate:modelValue":[ut[0]||(ut[0]=Se=>L.value=Se),Y],color:"primary",locale:"en-IN"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),l(wt,{cols:"5",class:"d-flex justify-end"},{default:u(()=>[l(Vt,{text:"Add Patient to Appointment Queue"},{activator:u(({props:Se})=>[l(Zt,Fe({rounded:"x-small",onClick:X,size:"small",variant:"outlined"},Se,{class:"btn-hover-enhanced mr-1"}),{default:u(()=>[...ut[21]||(ut[21]=[O(" Add Patient ",-1)])]),_:1},16)]),_:1}),l(qt),l(Vt,{text:"Refresh Appointment Queue"},{activator:u(({props:Se})=>[l(Zt,Fe({rounded:"x-small",onClick:yn,size:"small"},Se,{class:"btn-hover-enhanced"}),{default:u(()=>[l(kt,{size:"large"},{default:u(()=>[...ut[22]||(ut[22]=[p("img",{src:fg,alt:"Refresh",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1},16)]),_:1})]),_:1})]),_:1}),l(vt,{"no-gutters":""},{default:u(()=>[l(wt,{cols:"12"},{default:u(()=>[l(Gn,{modelValue:o.value,"onUpdate:modelValue":[ut[2]||(ut[2]=Se=>o.value=Se),H],"align-tabs":"center",density:"compact",class:"tabs-hover-container"},{default:u(()=>[l(Vt,{text:"Patients Waiting & Confirmed"},{activator:u(({props:Se})=>[l(Pt,Fe({value:"in-queue"},Se,{class:["tab-hover",{"tab-active":o.value==="in-queue"}]}),{default:u(()=>[p("div",Obe,[l(Kt,{color:o.value==="in-queue"?"warning":"primary",content:se.value.length,inline:"",class:"tab-badge"},{default:u(()=>[l(kt,{size:"large",class:"tab-icon"},{default:u(()=>[...ut[23]||(ut[23]=[p("img",{src:_fe,alt:"waiting"},null,-1)])]),_:1})]),_:1},8,["color","content"])])]),_:1},16,["class"])]),_:1}),l(Vt,{text:"Consultations Completed"},{activator:u(({props:Se})=>[l(Pt,Fe({value:"completed"},Se,{class:["tab-hover",{"tab-active":o.value==="completed"}]}),{default:u(()=>[p("div",Hbe,[l(Kt,{color:o.value==="completed"?"success":"primary",content:G.value.length,inline:"",class:"tab-badge"},{default:u(()=>[l(kt,{size:"large",class:"tab-icon"},{default:u(()=>[...ut[24]||(ut[24]=[p("img",{src:wfe,alt:"completed"},null,-1)])]),_:1})]),_:1},8,["color","content"])])]),_:1},16,["class"])]),_:1}),l(Vt,{text:"Cancelled Appointments"},{activator:u(({props:Se})=>[l(Pt,Fe({value:"cancelled"},Se,{class:["tab-hover",{"tab-active":o.value==="cancelled"}]}),{default:u(()=>[p("div",$be,[l(Kt,{color:o.value==="cancelled"?"error":"primary",content:D.value.length,inline:"",class:"tab-badge"},{default:u(()=>[l(kt,{size:"large",class:"tab-icon"},{default:u(()=>[...ut[25]||(ut[25]=[p("img",{src:bfe,alt:"cancelled"},null,-1)])]),_:1})]),_:1},8,["color","content"])])]),_:1},16,["class"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(pe,{modelValue:o.value,"onUpdate:modelValue":ut[6]||(ut[6]=Se=>o.value=Se),class:"flex-grow-1"},{default:u(()=>[l(Qe,{value:"in-queue",class:"h-100"},{default:u(()=>[l(vt,{"no-gutters":"",class:"h-100"},{default:u(()=>[l(wt,{cols:"12",class:"pa-2"},{default:u(()=>[l(On,{modelValue:ie.value,"onUpdate:modelValue":ut[3]||(ut[3]=Se=>ie.value=Se),placeholder:"Search waiting patients by name...",variant:"outlined",density:"compact","hide-details":"",clearable:"",class:"search-field",onInput:K},{"prepend-inner":u(()=>[l(kt,{size:"small",color:"secondary"},{default:u(()=>[...ut[26]||(ut[26]=[O("mdi-magnify",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(wt,{cols:"12",class:"h-100",style:{height:"calc(100% - 80px)"}},{default:u(()=>[p("div",Qbe,[se.value?se.value.length>0?(R(!0),me(ze,{key:1},Wt(se.value.sort((Se,Me)=>new Date(Se.appointmentDate+" "+Se.appointmentTime)-new Date(Me.appointmentDate+" "+Me.appointmentTime)),Se=>(R(),ve(Nn,{key:Se.id,style:Rt([{textAlign:"left"},{cursor:"pointer",position:"relative",overflow:"visible"}]),density:"compact",class:"ma-2 card-enhanced card-hover-base card-status-waiting",onClick:Me=>ne(Se.patientId)},{default:u(()=>[l(Tn,{class:"pb-0 pt-2"},{default:u(()=>[p("div",Gbe,q(Se.patient_name),1)]),_:2},1024),l(He,{class:"py-1"},{default:u(()=>[l(vt,{"no-gutters":"",align:"center"},{default:u(()=>[l(wt,{cols:"12",class:"d-flex align-center justify-space-between"},{default:u(()=>[p("div",zbe,[p("span",Kbe,[p("span",{class:ct(new Date(Se.appointmentDate+" "+Se.appointmentTime)<new Date?"text-error":"text-primary")},q(Oe(rC)(Se.appointmentTime)),3),O(" "+q(`  ${Se.patient_gender}`)+q(Se.patient_age!==null?`  ${Se.patient_age}y`:"")+q(Se.contactNumber?`  ${Se.contactNumber}`:"")+q(Se.importID?`  Import ID: ${Se.importID}`:""),1)])]),p("div",Wbe,[Se.status==="confirmed"?(R(),ve(kt,{key:0,size:"small",color:"secondary",class:"mr-1"},{default:u(()=>[...ut[27]||(ut[27]=[p("img",{src:xfe,alt:"Confirmed"},null,-1)])]),_:1})):_e("",!0),l(Vt,{text:Se.category==="walkin"?"Walk-in Patient":"Scheduled Appointment"},{activator:u(({props:Me})=>[l(kt,Fe({size:"small",class:"mr-1",color:"secondary"},{ref_for:!0},Me),{default:u(()=>[O(q(Se.category==="walkin"?"mdi-walk":"mdi-calendar-account-outline"),1)]),_:2},1040)]),_:2},1032,["text"]),Se.type==="procedure"?(R(),ve(Vt,{key:1,text:"Procedure Appointment"},{activator:u(({props:Me})=>[l(kt,Fe({size:"small",class:"mr-1",color:"secondary"},{ref_for:!0},Me),{default:u(()=>[...ut[28]||(ut[28]=[p("img",{src:eC,alt:"Procedure"},null,-1)])]),_:1},16)]),_:1})):_e("",!0),Se.has_prior_consultation?(R(),ve(Vt,{key:2,text:"Past Consultations Available"},{activator:u(({props:Me})=>[l(kt,Fe({size:"small",class:"mr-1",color:"secondary"},{ref_for:!0},Me),{default:u(()=>[...ut[29]||(ut[29]=[O("mdi-file-eye",-1)])]),_:1},16)]),_:1})):_e("",!0),Se.type==="followup"?(R(),ve(Te,{key:3,size:"x-small",color:"primary","text-color":"black",class:"mr-1"},{default:u(()=>[...ut[30]||(ut[30]=[O(" follow-up ",-1)])]),_:1})):_e("",!0)])]),_:2},1024)]),_:2},1024)]),_:2},1024),l(Ue,{class:"pa-0 px-4 action-row-highlight"},{default:u(()=>[l(Vt,{text:"Edit Appointment"},{activator:u(({props:Me})=>[l(Zt,Fe({color:"primary",variant:"plain",size:"default"},{ref_for:!0},Me,{onClick:mn(Ze=>xe(Se),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[l(kt,{size:"default"},{default:u(()=>[...ut[31]||(ut[31]=[p("img",{src:qA,alt:"Edit"},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024),l(Vt,{text:"Delete Appointment"},{activator:u(({props:Me})=>[l(Zt,Fe({color:"secondary",variant:"plain",size:"default"},{ref_for:!0},Me,{onClick:mn(Ze=>Ce(Se),["stop"]),class:"btn-hover-base"}),{default:u(()=>[l(kt,{size:"default"},{default:u(()=>[...ut[32]||(ut[32]=[p("img",{src:mc},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024),l(qt),l(xn,{permission:"home.queue.bill",tag:"span"},{default:u(()=>[l(Vt,{text:"Generate Receipt"},{activator:u(({props:Me})=>[l(Zt,Fe({color:"primary",variant:"plain",size:"default"},{ref_for:!0},Me,{onClick:mn(Ze=>Ee(Se),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[l(kt,{size:"default"},{default:u(()=>[...ut[33]||(ut[33]=[O("mdi-currency-inr",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024),l(xn,{permission:"home.queue.certificate",tag:"span"},{default:u(()=>[l(Vt,{text:"Create Document"},{activator:u(({props:Me})=>[l(Zt,Fe({color:"primary",variant:"plain",size:"default"},{ref_for:!0},Me,{onClick:mn(Ze=>qn(Se),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[l(kt,{size:"default"},{default:u(()=>[...ut[34]||(ut[34]=[p("img",{src:tC,alt:"Create Document"},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024),l(Vt,{text:"Mark Complete"},{activator:u(({props:Me})=>[l(Zt,Fe({color:"#2e7d32",variant:"plain",size:"default"},{ref_for:!0},Me,{onClick:mn(Ze=>nn(Se),["stop"]),class:"btn-hover-base"}),{default:u(()=>[l(kt,{size:"default"},{default:u(()=>[...ut[35]||(ut[35]=[O("mdi-check-circle-outline",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):se.value.length===0?(R(),ve(wt,{key:2,class:"text-center"},{default:u(()=>[l(Nn,{flat:"",color:"surfaceContainer"},{default:u(()=>[l(Le,{image:Oe(BC)},{title:u(()=>[...ut[36]||(ut[36]=[p("div",{class:"text-subtitle-2 mt-8"}," No patients in the wait queue ",-1)])]),text:u(()=>[...ut[37]||(ut[37]=[p("div",{class:"text-caption"}," appointments will show here once you add them to wait queue ",-1)])]),_:1},8,["image"])]),_:1})]),_:1})):_e("",!0):(R(),ve(vt,{key:0,"no-gutters":""},{default:u(()=>[l(wt,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[l(Yt,{indeterminate:"",color:"primary"})]),_:1})]),_:1}))])]),_:1})]),_:1})]),_:1}),l(Qe,{value:"completed"},{default:u(()=>[l(vt,{"no-gutters":""},{default:u(()=>[l(wt,{cols:"12",class:"pa-2"},{default:u(()=>[l(On,{modelValue:ie.value,"onUpdate:modelValue":ut[4]||(ut[4]=Se=>ie.value=Se),placeholder:"Search completed patients by name...",variant:"outlined",density:"compact","hide-details":"",clearable:"",class:"search-field",onInput:K},{"prepend-inner":u(()=>[l(kt,{size:"small",color:"secondary"},{default:u(()=>[...ut[38]||(ut[38]=[O("mdi-magnify",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(wt,{cols:"12"},{default:u(()=>[p("div",jbe,[G.value?G.value.length>0?(R(!0),me(ze,{key:1},Wt(G.value.sort((Se,Me)=>new Date(Me.appointmentDate+" "+Me.appointmentTime)-new Date(Se.appointmentDate+" "+Se.appointmentTime)),Se=>(R(),ve(Nn,{key:Se.id,style:Rt([{textAlign:"left"},{cursor:"pointer",position:"relative",overflow:"visible"}]),density:"compact",class:"ma-2 card-enhanced card-hover-base card-status-completed",onClick:Me=>ne(Se.patientId)},{default:u(()=>[l(Tn,{class:"pb-0 pt-2"},{default:u(()=>[p("div",qbe,q(Se.patient_name),1)]),_:2},1024),l(He,{class:"py-1"},{default:u(()=>[l(vt,{"no-gutters":"",align:"center"},{default:u(()=>[l(wt,{cols:"12",class:"d-flex align-center justify-space-between"},{default:u(()=>[p("div",Ybe,[p("span",Xbe,[p("span",Jbe,q(Oe(rC)(Se.appointmentTime)),1),O(" "+q(`  ${Se.patient_gender}`)+q(Se.patient_age!==null?`  ${Se.patient_age}y`:"")+q(Se.contactNumber?`  ${Se.contactNumber}`:"")+q(Se.importID?`  Import ID: ${Se.importID}`:""),1)])]),p("div",Zbe,[l(kt,{size:"small",color:"success",class:"mr-1"},{default:u(()=>[...ut[39]||(ut[39]=[O(" mdi-check-circle ",-1)])]),_:1}),l(Vt,{text:Se.category==="walkin"?"Walk-in Patient":"Scheduled Appointment"},{activator:u(({props:Me})=>[l(kt,Fe({size:"small",class:"mr-1",color:"secondary"},{ref_for:!0},Me),{default:u(()=>[O(q(Se.category==="walkin"?"mdi-walk":"mdi-calendar-account-outline"),1)]),_:2},1040)]),_:2},1032,["text"]),Se.type==="procedure"?(R(),ve(Vt,{key:0,text:"Procedure Appointment"},{activator:u(({props:Me})=>[l(kt,Fe({size:"small",class:"mr-1",color:"secondary"},{ref_for:!0},Me),{default:u(()=>[...ut[40]||(ut[40]=[p("img",{src:eC,alt:"Procedure"},null,-1)])]),_:1},16)]),_:1})):_e("",!0),Se.has_prior_consultation?(R(),ve(Vt,{key:1,text:"Past Consultations Available"},{activator:u(({props:Me})=>[l(kt,Fe({size:"small",class:"mr-1",color:"secondary"},{ref_for:!0},Me),{default:u(()=>[...ut[41]||(ut[41]=[O("mdi-file-eye",-1)])]),_:1},16)]),_:1})):_e("",!0),Se.type==="followup"?(R(),ve(Te,{key:2,size:"x-small",color:"primary","text-color":"black",class:"mr-1"},{default:u(()=>[...ut[42]||(ut[42]=[O(" follow-up ",-1)])]),_:1})):_e("",!0)])]),_:2},1024)]),_:2},1024)]),_:2},1024),l(Ue,{class:"pa-0 px-4 action-row-highlight"},{default:u(()=>[l(Vt,{text:"Edit Appointment"},{activator:u(({props:Me})=>[l(Zt,Fe({color:"primary",variant:"plain",size:"default"},{ref_for:!0},Me,{onClick:mn(Ze=>xe(Se),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[l(kt,{size:"default"},{default:u(()=>[...ut[43]||(ut[43]=[p("img",{src:qA,alt:"Edit"},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024),l(Vt,{text:"Delete Appointment"},{activator:u(({props:Me})=>[l(Zt,Fe({color:"secondary",variant:"plain",size:"default"},{ref_for:!0},Me,{onClick:mn(Ze=>Ce(Se),["stop"]),class:"btn-hover-base"}),{default:u(()=>[l(kt,{size:"default"},{default:u(()=>[...ut[44]||(ut[44]=[p("img",{src:mc},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024),l(qt),l(xn,{permission:"home.queue.bill",tag:"span"},{default:u(()=>[l(Vt,{text:"Generate Receipt"},{activator:u(({props:Me})=>[l(Zt,Fe({color:"primary",variant:"plain",size:"default"},{ref_for:!0},Me,{onClick:mn(Ze=>Ee(Se),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[l(kt,{size:"default"},{default:u(()=>[...ut[45]||(ut[45]=[O("mdi-currency-inr",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024),l(xn,{permission:"home.queue.certificate",tag:"span"},{default:u(()=>[l(Vt,{text:"Create Document"},{activator:u(({props:Me})=>[l(Zt,Fe({color:"primary",variant:"plain",size:"default"},{ref_for:!0},Me,{onClick:mn(Ze=>qn(Se),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[l(kt,{size:"default"},{default:u(()=>[...ut[46]||(ut[46]=[p("img",{src:tC,alt:"Create Document"},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024),l(Vt,{text:"Unmark Complete"},{activator:u(({props:Me})=>[l(Zt,Fe({color:"#f57c00",variant:"plain",size:"default"},{ref_for:!0},Me,{onClick:mn(Ze=>nn(Se),["stop"]),class:"btn-hover-base"}),{default:u(()=>[l(kt,{size:"default"},{default:u(()=>[...ut[47]||(ut[47]=[O("mdi-undo",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):_e("",!0):(R(),ve(vt,{key:0,"no-gutters":""},{default:u(()=>[l(wt,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[l(Yt,{indeterminate:"",color:"primary"})]),_:1})]),_:1})),G.value.length===0?(R(),ve(wt,{key:2,class:"text-center"},{default:u(()=>[l(Nn,{flat:"",color:"surfaceContainer"},{default:u(()=>[l(Le,{image:Oe(BC)},{title:u(()=>[...ut[48]||(ut[48]=[p("div",{class:"text-subtitle-2 mt-8"}," No patients in the completed list ",-1)])]),text:u(()=>[...ut[49]||(ut[49]=[p("div",{class:"text-caption"}," appointments will show here once you completed them ",-1)])]),_:1},8,["image"])]),_:1})]),_:1})):_e("",!0)])]),_:1})]),_:1})]),_:1}),l(Qe,{value:"cancelled"},{default:u(()=>[l(vt,{"no-gutters":""},{default:u(()=>[l(wt,{cols:"12",class:"pa-2"},{default:u(()=>[l(On,{modelValue:ie.value,"onUpdate:modelValue":ut[5]||(ut[5]=Se=>ie.value=Se),placeholder:"Search cancelled patients by name...",variant:"outlined",density:"compact","hide-details":"",clearable:"",class:"search-field",onInput:K},{"prepend-inner":u(()=>[l(kt,{size:"small",color:"secondary"},{default:u(()=>[...ut[50]||(ut[50]=[O("mdi-magnify",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(wt,{cols:"12"},{default:u(()=>[p("div",exe,[D.value?D.value.length>0?(R(!0),me(ze,{key:1},Wt(D.value.sort((Se,Me)=>new Date(Me.appointmentDate+" "+Me.appointmentTime)-new Date(Se.appointmentDate+" "+Se.appointmentTime)),Se=>(R(),ve(Nn,{key:Se.id,style:Rt([{textAlign:"left"},{cursor:"pointer",position:"relative",overflow:"visible"}]),density:"compact",class:"ma-2 card-enhanced card-hover-base card-status-cancelled",onClick:Me=>ne(Se.patientId)},{default:u(()=>[l(Tn,{class:"pb-0 pt-2"},{default:u(()=>[p("div",txe,q(Se.patient_name),1)]),_:2},1024),l(He,{class:"py-1"},{default:u(()=>[l(vt,{"no-gutters":"",align:"center"},{default:u(()=>[l(wt,{cols:"12",class:"d-flex align-center justify-space-between"},{default:u(()=>[p("div",nxe,[p("span",axe,[p("span",rxe,q(Oe(rC)(Se.appointmentTime)),1),O(" "+q(`  ${Se.patient_gender}`)+q(Se.patient_age!==null?`  ${Se.patient_age}y`:"")+q(Se.contactNumber?`  ${Se.contactNumber}`:"")+q(Se.importID?`  Import ID: ${Se.importID}`:""),1)])]),p("div",sxe,[l(kt,{size:"small",color:"error",class:"mr-1"},{default:u(()=>[...ut[51]||(ut[51]=[O(" mdi-cancel ",-1)])]),_:1}),l(Vt,{text:Se.category==="walkin"?"Walk-in Patient":"Scheduled Appointment"},{activator:u(({props:Me})=>[l(kt,Fe({size:"small",class:"mr-1",color:"secondary"},{ref_for:!0},Me),{default:u(()=>[O(q(Se.category==="walkin"?"mdi-walk":"mdi-calendar-account-outline"),1)]),_:2},1040)]),_:2},1032,["text"]),Se.type==="procedure"?(R(),ve(Vt,{key:0,text:"Procedure Appointment"},{activator:u(({props:Me})=>[l(kt,Fe({size:"small",class:"mr-1",color:"secondary"},{ref_for:!0},Me),{default:u(()=>[...ut[52]||(ut[52]=[p("img",{src:eC,alt:"Procedure"},null,-1)])]),_:1},16)]),_:1})):_e("",!0),Se.has_prior_consultation?(R(),ve(Vt,{key:1,text:"Past Consultations Available"},{activator:u(({props:Me})=>[l(kt,Fe({size:"small",class:"mr-1",color:"secondary"},{ref_for:!0},Me),{default:u(()=>[...ut[53]||(ut[53]=[O("mdi-file-eye",-1)])]),_:1},16)]),_:1})):_e("",!0),Se.type==="followup"?(R(),ve(Te,{key:2,size:"x-small",color:"primary","text-color":"black",class:"mr-1"},{default:u(()=>[...ut[54]||(ut[54]=[O(" follow-up ",-1)])]),_:1})):_e("",!0)])]),_:2},1024)]),_:2},1024)]),_:2},1024),l(Ue,{class:"pa-0 px-4 action-row-highlight"},{default:u(()=>[l(Vt,{text:"Edit Appointment"},{activator:u(({props:Me})=>[l(Zt,Fe({color:"primary",variant:"plain",size:"default"},{ref_for:!0},Me,{onClick:mn(Ze=>xe(Se),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[l(kt,{size:"default"},{default:u(()=>[...ut[55]||(ut[55]=[p("img",{src:qA,alt:"Edit"},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024),l(Vt,{text:"Delete Appointment"},{activator:u(({props:Me})=>[l(Zt,Fe({color:"secondary",variant:"plain",size:"default"},{ref_for:!0},Me,{onClick:mn(Ze=>Ce(Se),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[l(kt,{size:"default"},{default:u(()=>[...ut[56]||(ut[56]=[p("img",{src:mc},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024),l(qt),l(xn,{permission:"home.queue.bill",tag:"span"},{default:u(()=>[l(Vt,{text:"Generate Receipt"},{activator:u(({props:Me})=>[l(Zt,Fe({color:"primary",variant:"plain",size:"default"},{ref_for:!0},Me,{onClick:mn(Ze=>Ee(Se),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[l(kt,{size:"default"},{default:u(()=>[...ut[57]||(ut[57]=[O("mdi-currency-inr",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024),l(xn,{permission:"home.queue.certificate",tag:"span"},{default:u(()=>[l(Vt,{text:"Create Document"},{activator:u(({props:Me})=>[l(Zt,Fe({color:"primary",variant:"plain",size:"default"},{ref_for:!0},Me,{onClick:mn(Ze=>qn(Se),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[l(kt,{size:"default"},{default:u(()=>[...ut[58]||(ut[58]=[p("img",{src:tC,alt:"Create Document"},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024),l(Vt,{text:"Reschedule"},{activator:u(({props:Me})=>[l(Zt,Fe({color:"#f57c00",variant:"plain",size:"default"},{ref_for:!0},Me,{onClick:mn(Ze=>xe(Se),["stop"]),class:"btn-hover-base"}),{default:u(()=>[l(kt,{size:"default"},{default:u(()=>[...ut[59]||(ut[59]=[O("mdi-calendar-edit",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):_e("",!0):(R(),ve(vt,{key:0,"no-gutters":""},{default:u(()=>[l(wt,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[l(Yt,{indeterminate:"",color:"primary"})]),_:1})]),_:1})),D.value.length===0?(R(),ve(wt,{key:2,class:"text-center"},{default:u(()=>[l(Nn,{flat:"",color:"surfaceContainer"},{default:u(()=>[l(Le,{image:Oe(BC)},{title:u(()=>[...ut[60]||(ut[60]=[p("div",{class:"text-subtitle-2 mt-8"}," No cancelled appointments ",-1)])]),text:u(()=>[...ut[61]||(ut[61]=[p("div",{class:"text-caption"}," cancelled appointments will show here ",-1)])]),_:1},8,["image"])]),_:1})]),_:1})):_e("",!0)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),Oe(Fo)?(R(),ve(re,{key:0,modelValue:i.value,"onUpdate:modelValue":ut[7]||(ut[7]=Se=>i.value=Se),class:"elevation-24","max-width":"100%"},{default:u(()=>[l(Z3,{onClose:ae,onAppointmentCreated:oe,onError:W,doctorId:Q.value,clinicId:Z.value,selectedDate:L.value},null,8,["doctorId","clinicId","selectedDate"])]),_:1},8,["modelValue"])):_e("",!0),Oe(Fo)?_e("",!0):(R(),ve(ge,{key:1,modelValue:i.value,"onUpdate:modelValue":ut[8]||(ut[8]=Se=>i.value=Se),persistent:"","max-width":"1000px"},{default:u(()=>[l(Z3,{onClose:ae,onAppointmentCreated:oe,onError:W,doctorId:Q.value,clinicId:Z.value,selectedDate:L.value},null,8,["doctorId","clinicId","selectedDate"])]),_:1},8,["modelValue"])),Oe(Fo)?(R(),ve(re,{key:2,modelValue:A.value,"onUpdate:modelValue":ut[9]||(ut[9]=Se=>A.value=Se),class:"elevation-24","max-width":"100%"},{default:u(()=>[l(eU,{onClose:ke,appointment:d.value},null,8,["appointment"])]),_:1},8,["modelValue"])):_e("",!0),Oe(Fo)?_e("",!0):(R(),ve(ge,{key:3,modelValue:A.value,"onUpdate:modelValue":ut[10]||(ut[10]=Se=>A.value=Se),persistent:"","max-width":"30%"},{default:u(()=>[l(eU,{onClose:ke,appointment:d.value},null,8,["appointment"])]),_:1},8,["modelValue"])),Oe(Fo)?(R(),ve(re,{key:4,modelValue:de.value,"onUpdate:modelValue":ut[11]||(ut[11]=Se=>de.value=Se),class:"elevation-24","max-width":"100%"},{default:u(()=>[l(eR,{onClose:De,deleteSelectedAppointment:Ae.value},null,8,["deleteSelectedAppointment"])]),_:1},8,["modelValue"])):_e("",!0),Oe(Fo)?_e("",!0):(R(),ve(ge,{key:5,modelValue:de.value,"onUpdate:modelValue":ut[12]||(ut[12]=Se=>de.value=Se),persistent:"","max-width":"30%"},{default:u(()=>[l(eR,{onClose:De,deleteSelectedAppointment:Ae.value},null,8,["deleteSelectedAppointment"])]),_:1},8,["modelValue"])),l(ge,{modelValue:v.value,"onUpdate:modelValue":ut[13]||(ut[13]=Se=>v.value=Se),persistent:"","max-width":"70%"},{default:u(()=>[g.value?(R(),ve(Yhe,{key:0,appointment:g.value,onClose:ye,onReceiptCreated:we,onEditReceipt:Je,onViewReceipt:Ie},null,8,["appointment"])):_e("",!0)]),_:1},8,["modelValue"]),ut[62]||(ut[62]=O()),l(ge,{modelValue:y.value,"onUpdate:modelValue":ut[14]||(ut[14]=Se=>y.value=Se),persistent:"","max-width":"80%"},{default:u(()=>[g.value?(R(),ve(U2e,{key:0,appointment:g.value,onClose:ye,onBillCreated:at,onEditReceipt:Je,onViewBill:ft},null,8,["appointment"])):_e("",!0)]),_:1},8,["modelValue"]),l(ge,{modelValue:w.value,"onUpdate:modelValue":ut[15]||(ut[15]=Se=>w.value=Se),persistent:"","max-width":"70%"},{default:u(()=>[w.value&&b.value?(R(),ve(qM,{key:0,receiptId:b.value,onClose:rt,onReceiptUpdated:pt},null,8,["receiptId"])):_e("",!0)]),_:1},8,["modelValue"]),l(ge,{modelValue:x.value,"onUpdate:modelValue":ut[16]||(ut[16]=Se=>x.value=Se),persistent:"","max-width":"85%"},{default:u(()=>[x.value&&T.value?(R(),ve(cH,{key:0,billId:T.value,onClose:it,onBillUpdated:ht},null,8,["billId"])):_e("",!0)]),_:1},8,["modelValue"]),l(ge,{modelValue:U.value,"onUpdate:modelValue":ut[17]||(ut[17]=Se=>U.value=Se),persistent:"","max-width":"70%"},{default:u(()=>[U.value&&k.value?(R(),ve(rH,{key:0,receiptId:k.value,onClose:Ve,onEditReceipt:Ge},null,8,["receiptId"])):_e("",!0)]),_:1},8,["modelValue"]),l(ge,{modelValue:S.value,"onUpdate:modelValue":ut[18]||(ut[18]=Se=>S.value=Se),persistent:"","max-width":"80%"},{default:u(()=>[S.value&&E.value?(R(),ve(uH,{key:0,billId:E.value,onClose:Ft,onEditBill:tt},null,8,["billId"])):_e("",!0)]),_:1},8,["modelValue"]),l(ge,{modelValue:C.value,"onUpdate:modelValue":ut[19]||(ut[19]=Se=>C.value=Se),persistent:"","max-width":"80%"},{default:u(()=>[P.value?(R(),ve(Lbe,{key:0,appointment:P.value,doctorId:Q.value,clinicId:Z.value,onClose:$t},null,8,["appointment","doctorId","clinicId"])):_e("",!0)]),_:1},8,["modelValue"])],64)}}},dH=Xt(oxe,[["__scopeId","data-v-981063c4"]]),ixe=""+new URL("images/default-BWombGQT.jpg",import.meta.url).href,JA=[{src:ixe,alt:"evamed logo",url:"https://www.evamed.in"}],lxe=async(e=null)=>{try{console.log("=== MAKING API CALL TO FETCH CAROUSEL ITEMS ===");let t=e;if(!t){const i=wi.state.doctorModule?.doctors||[],c=wi.state.doctorModule?.doctorId,A=i.find(d=>d.id===c);A&&A.doctorSpecialization&&(t=A.doctorSpecialization)}console.log("API call with specialization:",t);const n=new URLSearchParams;n.append("active_only","true"),t&&n.append("specialization",t);const a=`https://api.origamimed.com/advertisements/?${n.toString()}`;console.log("Fetching carousel items from:",a);const r={"Content-Type":"application/json"},s=Os.currentUser;if(s){const i=await s.getIdToken();r.Authorization=`Bearer ${i}`}const o=await fetch(a,{method:"GET",headers:r,signal:AbortSignal.timeout(1e4)});if(console.log("API Response Status:",o.status),o.ok){const i=await o.json();if(console.log("API Response Data:",i),i.success&&i.data&&i.data.advertisements){const c=i.data.advertisements.map(A=>({src:A.image_url,alt:A.title||"Advertisement",url:A.link_url,title:A.title,description:A.description,id:A.id}));return console.log("Returning",c.length,"carousel items from API"),AH(c),c}else console.warn("API response success but no advertisements found:",i)}else console.error("API request failed with status:",o.status);return console.log("Falling back to default carousel items"),JA.map(i=>({...i,isDefault:!0}))}catch(t){return console.error("Error fetching carousel items:",t),JA.map(n=>({...n,isDefault:!0}))}},AH=e=>{try{if(!e||e.length===0)return;const t={items:e,timestamp:Date.now(),specialization:uxe()};localStorage.setItem("carouselItemsSimple",JSON.stringify(t)),console.log(" Saved",e.length,"items to cache")}catch(t){console.error(" Error saving to cache:",t)}},kC=()=>{try{const e=localStorage.getItem("carouselItemsSimple");if(!e)return console.log(" No cache found"),null;const t=JSON.parse(e);if(t.items&&t.items.length>0){const n=Date.now()-t.timestamp;return console.log(" Found cached items:",t.items.length,"age:",Math.round(n/(60*1e3)),"min"),t.items}return null}catch(e){return console.error(" Error loading from cache:",e),null}},tR=async(e=!1)=>{if(console.log(" getCarouselItemsSimple called, forceRefresh:",e),!e){const t=kC();if(t&&t.length>0)return console.log(" Using cached items"),t}try{console.log(" Fetching from API...");const t=await lxe();if(t&&t.length>0&&!t[0].isDefault)return console.log(" Got real API data:",t.length,"items"),AH(t),t;console.log(" API failed, trying cache fallback");const n=kC();return n&&n.length>0?(console.log(" Using cache as fallback"),n):(console.log(" No cache available, using defaults"),JA)}catch(t){console.error(" API error:",t);const n=kC();return n&&n.length>0?n:JA}},uxe=()=>{const e=wi.state.doctorModule?.doctors||[],t=wi.state.doctorModule?.doctorId;return e.find(a=>a.id===t)?.doctorSpecialization||null},nR=()=>{try{console.log("=== CACHE DEBUG ===");const e=localStorage.getItem("carouselItems");if(e){const n=JSON.parse(e);console.log(" Old cache found:",n.items?.length||0,"items")}else console.log(" No old cache");const t=localStorage.getItem("carouselItemsSimple");if(t){const n=JSON.parse(t);console.log(" New cache found:",n.items?.length||0,"items"),console.log(" First item:",n.items?.[0])}else console.log(" No new cache");console.log("=== END CACHE DEBUG ===")}catch(e){console.error(" Debug error:",e)}},cxe=e=>typeof e=="object"&&e!==null&&typeof e.src=="string"&&e.src.length>0&&typeof e.alt=="string"&&(e.url===null||typeof e.url=="string"),aR=e=>{console.log("filterValidCarouselItems - input items:",e);const n=e.filter((a,r)=>{const s=cxe(a);return s||console.log(`filterValidCarouselItems - item ${r} failed validation:`,a),s}).map(a=>{const r={...a};return delete r.isDefault,r});return console.log("filterValidCarouselItems - output items:",n),n},dxe=()=>{try{const e=localStorage.getItem("carouselState");if(e){const t=JSON.parse(e),n=Date.now()-3600*1e3;if(t.timestamp>n)return t}}catch(e){console.error("Error loading carousel state:",e)}return null},Axe=(e,t)=>{try{const n={currentSlide:e,viewTime:t,timestamp:Date.now()};localStorage.setItem("carouselState",JSON.stringify(n))}catch(n){console.error("Error saving carousel state:",n)}},fxe={key:0,class:"d-flex align-center justify-center",style:{height:"100%"}},mxe={class:"carousel-overlay"},hxe={key:0,class:"cta-container"},vxe={class:"progress-container"},pxe={class:"progress-text"},gxe={key:2,class:"d-flex align-center justify-center",style:{height:"100%"}},TC=1e4,rR=2e3,yxe={__name:"home-content",setup(e){const t=ea(),n=ee(()=>{const k=t.state.doctorModule?.doctors||[],S=t.state.doctorModule?.doctorId;return k.find(E=>E.id===S)||null}),a=ee(()=>n.value?.doctorSpecialization||null),r=M([]),s=M(!0),o=M(0),i=M(0),c=M(null),A=M(!0),d=M(!1),f=M(!1),m=M(!1),h=()=>{Axe(o.value,i.value)},v=()=>{const k=dxe();return k?(d.value=!0,o.value=k.currentSlide||0,i.value=k.viewTime||0,setTimeout(()=>{d.value=!1},100),!0):!1},y=()=>{if(c.value&&(clearInterval(c.value),c.value=null),!f.value){console.log("Component not active, skipping timer start");return}c.value=setInterval(()=>{A.value&&f.value&&(i.value+=rR,i.value>=TC&&w(),i.value%1e3===0&&h())},rR),console.log("Timer started with ID:",c.value)},g=()=>{c.value&&(clearInterval(c.value),c.value=null)},w=()=>{r.value.length>0&&(o.value=(o.value+1)%r.value.length,i.value=0,h())},b=()=>{d.value||(i.value=0)},x=k=>{if(k)if(window.require)try{const{shell:S}=window.require("electron");S.openExternal(k)}catch(S){console.error("Error opening external URL:",S),window.open(k,"_blank")}else window.open(k,"_blank")},T=async()=>{try{console.log("refreshCarouselItems called - forcing fresh fetch due to doctor change"),s.value=!0,nR();const k=await tR(!0);if(console.log("refreshCarouselItems - freshItems:",k),k&&k.length>0){const S=aR(k);console.log("refreshCarouselItems - validItems:",S),S.length>0?(r.value=S,o.value=0,i.value=0,h()):console.log("refreshCarouselItems - no valid items after filtering, keeping existing items")}else console.log("refreshCarouselItems - no fresh items, keeping existing items")}catch(k){console.error("Error refreshing carousel items:",k)}finally{s.value=!1}},U=()=>{A.value=!document.hidden};return We(o,(k,S)=>{!d.value&&S!==k&&(i.value=0),h()}),We(r,k=>{k.length>0&&o.value>=k.length&&(o.value=0,i.value=0)},{immediate:!0}),We(a,async(k,S)=>{if(console.log("Doctor specialization changed:",{oldSpecialization:S,newSpecialization:k}),m.value){console.log("Already refreshing, skipping...");return}if(S!==void 0&&k!==S&&r.value.length>0){console.log("Refreshing carousel items due to specialization change");try{m.value=!0,await T()}finally{m.value=!1}}},{immediate:!1}),cn(async()=>{try{console.log("onMounted - starting carousel setup"),nR(),s.value=!0;const k=await tR();if(console.log("onMounted - received carousel data:",k),k&&k.length>0){const E=aR(k);console.log("onMounted - validItems:",E),E.length>0?r.value=E:(console.log("onMounted - no valid items after filtering, using defaults"),r.value=JA)}else console.log("onMounted - no data, using defaults"),r.value=JA;v()||(o.value=0,i.value=0),o.value>=r.value.length&&(o.value=0,i.value=0)}catch(k){console.error("Error loading carousel items:",k),r.value.length===0&&(r.value=JA)}finally{s.value=!1,await bn(),f.value=!0,y(),document.addEventListener("visibilitychange",U)}}),zl(()=>{f.value=!1,g(),h(),document.removeEventListener("visibilitychange",U)}),Z0(()=>{f.value=!0}),q2(()=>{f.value=!1,h()}),(k,S)=>{const E=I("v-skeleton-loader"),C=I("v-icon"),P=I("v-btn"),F=I("v-progress-linear"),N=I("v-carousel-item"),L=I("v-carousel"),ie=I("v-alert"),le=I("v-card");return R(),ve(le,{flat:"",color:"surfaceContainer",class:"pa-1",style:{height:"100%"}},{default:u(()=>[s.value?(R(),me("div",fxe,[l(E,{type:"card",width:"80%",height:"80%",class:"mx-auto"})])):r.value.length>0?(R(),ve(L,{key:1,modelValue:o.value,"onUpdate:modelValue":[S[0]||(S[0]=Q=>o.value=Q),b],"show-arrows":"hover",cycle:!1,"hide-delimiters":"",style:{height:"100%"}},{default:u(()=>[(R(!0),me(ze,null,Wt(r.value,(Q,Z)=>(R(),ve(N,{key:Z,src:Q.src,alt:Q.alt,contain:""},{default:u(()=>[p("div",mxe,[Q.url?(R(),me("div",hxe,[l(P,{variant:"elevated",color:"primary",size:"large",onClick:ce=>x(Q.url),class:"btn-hover-enhanced"},{default:u(()=>[S[2]||(S[2]=O(" Know More ",-1)),l(C,{right:"",class:"ml-2"},{default:u(()=>[...S[1]||(S[1]=[O("mdi-open-in-new",-1)])]),_:1})]),_:1},8,["onClick"])])):_e("",!0),p("div",vxe,[l(F,{"model-value":i.value/TC*100,color:"white",height:"3",class:"progress-bar"},null,8,["model-value"]),p("div",pxe,q(Math.ceil((TC-i.value)/1e3))+"s ",1)])])]),_:2},1032,["src","alt"]))),128))]),_:1},8,["modelValue"])):(R(),me("div",gxe,[l(ie,{type:"info",variant:"tonal"},{default:u(()=>[...S[3]||(S[3]=[O(" No carousel items available ",-1)])]),_:1})]))]),_:1})}}},_xe=Xt(yxe,[["__scopeId","data-v-8073aa0a"]]),wxe={class:"booking-content"},bxe={key:0,class:"booking-patient-name"},xxe={class:"booking-actions"},Cxe={__name:"resource-booking-row",props:{booking:{type:Object,required:!0},startColumn:{type:Number,required:!0},spanColumns:{type:Number,required:!0},hasConflict:{type:Boolean,default:!1}},emits:["click","edit","delete"],setup(e,{emit:t}){const n=e,a=t,r=ee(()=>{const f=n.booking.reason;return{procedure:"Procedure",maintenance:"Maintenance",cleaning:"Cleaning"}[f]||"Procedure"}),s=ee(()=>`reason-${n.booking.reason||"procedure"}`),o=ee(()=>{if(!n.booking.patient?.name)return"";const f=n.booking.patient.name;return f.length>10?f.substring(0,10)+"...":f});ee(()=>{const f=X3(n.booking.startDateTime),m=X3(n.booking.endDateTime),h=go(f,"h:mm a"),v=go(m,"h:mm a");return`${h} - ${v}`});const i=ee(()=>({gridColumnStart:n.startColumn+2,gridColumnEnd:n.startColumn+n.spanColumns+2})),c=()=>{a("click",n.booking)},A=()=>{a("edit",n.booking)},d=()=>{a("delete",n.booking)};return(f,m)=>{const h=I("v-icon"),v=I("v-btn");return R(),me("div",{class:ct(["booking-row",{"has-conflict":e.hasConflict}]),style:Rt(i.value),onClick:c},[p("div",wxe,[e.booking.reason==="procedure"&&e.booking.patient?(R(),me("div",bxe,q(o.value),1)):(R(),me("div",{key:1,class:ct(["booking-reason",s.value])},q(r.value),3)),p("div",xxe,[l(v,{icon:"",size:"x-small",variant:"text",onClick:mn(A,["stop"]),class:"booking-action-btn"},{default:u(()=>[l(h,{size:"small"},{default:u(()=>[...m[0]||(m[0]=[O("mdi-pencil",-1)])]),_:1})]),_:1}),l(v,{icon:"",size:"x-small",variant:"text",onClick:mn(d,["stop"]),class:"booking-action-btn"},{default:u(()=>[l(h,{size:"small"},{default:u(()=>[...m[1]||(m[1]=[O("mdi-delete",-1)])]),_:1})]),_:1})])])],6)}}},Sxe=Xt(Cxe,[["__scopeId","data-v-b5fd55e6"]]),Exe={class:"booking-grid-container"},Bxe={class:"grid-header sticky-header"},kxe={key:0,class:"hour-label"},Txe={key:1,class:"quarter-marker"},Ixe={class:"entity-header-row sticky-row"},Fxe={class:"entity-header-cell sticky-cell"},Pxe={class:"entity-content"},Dxe={class:"entity-name-row"},Uxe={class:"entity-name"},Rxe={class:"entity-actions"},Nxe={key:1,class:"empty-entity-row"},Vxe={__name:"resource-booking-grid",props:{entities:{type:Array,default:()=>[]},bookings:{type:Array,default:()=>[]},conflicts:{type:Array,default:()=>[]}},emits:["booking-click","add-booking","edit-entity","delete-entity","edit-booking","delete-booking"],setup(e,{emit:t}){const n=e,a=t,r=ee(()=>{const g=[];for(let x=8;x<=23;x++){const T=x===23?0:45;for(let U=0;U<=T;U+=15){const k=EM(SM(new Date,x),U),S=U===0?go(k,"h a"):"";g.push({hour:x,minute:U,label:go(k,"h:mm a"),hourLabel:S,timestamp:k.getTime()})}}return g}),s=ee(()=>[...n.entities].sort((g,w)=>g.name.localeCompare(w.name))),o=g=>n.bookings.filter(w=>(w.entityId||w.entity?.id)===g).sort((w,b)=>w.startDateTime-b.startDateTime),i=g=>{const w=g.startDateTime,b=new Date(w*1e3),x=b.getHours(),T=b.getMinutes();if(x<8)return 0;if(x>23||x===23&&T>0)return 59;const U=x-8,k=Math.floor(T/15)+1,S=U*4+k;return Math.max(0,Math.min(59,S))},c=g=>{const w=i(g),b=g.endDateTime,x=new Date(b*1e3),T=x.getHours(),U=x.getMinutes();if(T<8)return 1;if(T>23||T===23&&U>0)return 60-w;const k=T-8,S=Math.floor(U/15)+1,C=k*4+S-w;return Math.max(1,C)},A=g=>n.conflicts.some(w=>w.booking1?.id===g.id||w.booking2?.id===g.id),d=g=>{a("booking-click",g)},f=g=>{a("edit-booking",g)},m=g=>{a("delete-booking",g)},h=g=>{a("add-booking",g)},v=g=>{a("edit-entity",g)},y=g=>{a("delete-entity",g)};return(g,w)=>{const b=I("v-icon"),x=I("v-btn");return R(),me("div",Exe,[p("div",Bxe,[w[0]||(w[0]=p("div",{class:"entity-header-cell sticky-cell"},null,-1)),(R(!0),me(ze,null,Wt(r.value,(T,U)=>(R(),me("div",{key:U,class:ct(["time-header-cell",{"hour-marker":T.minute===0&&T.hour!==23}])},[T.minute===0&&T.hour!==23?(R(),me("span",kxe,q(T.hourLabel),1)):_e("",!0),T.minute!==0&&T.minute%15===0?(R(),me("div",Txe)):_e("",!0)],2))),128))]),(R(!0),me(ze,null,Wt(s.value,T=>(R(),me("div",{key:T.id,class:"entity-section"},[p("div",Ixe,[p("div",Fxe,[p("div",Pxe,[p("div",Dxe,[p("div",Uxe,q(T.name),1),p("div",Rxe,[l(x,{icon:"",size:"x-small",variant:"text",onClick:mn(U=>v(T),["stop"]),class:"ml-1"},{default:u(()=>[l(b,{size:"small"},{default:u(()=>[...w[1]||(w[1]=[O("mdi-pencil",-1)])]),_:1})]),_:1},8,["onClick"]),l(x,{icon:"",size:"x-small",variant:"text",onClick:mn(U=>h(T),["stop"]),class:"ml-1",color:"primary"},{default:u(()=>[l(b,{size:"small"},{default:u(()=>[...w[2]||(w[2]=[O("mdi-plus",-1)])]),_:1})]),_:1},8,["onClick"]),l(x,{icon:"",size:"x-small",variant:"text",onClick:mn(U=>y(T),["stop"]),class:"ml-1"},{default:u(()=>[l(b,{size:"small"},{default:u(()=>[...w[3]||(w[3]=[O("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])])])]),(R(!0),me(ze,null,Wt(r.value,(U,k)=>(R(),me("div",{key:k,class:"time-cell"}))),128))]),o(T.id).length>0?(R(!0),me(ze,{key:0},Wt(o(T.id),U=>(R(),me("div",{key:U.id,class:"booking-row-wrapper"},[w[4]||(w[4]=p("div",{class:"entity-header-cell sticky-cell"},null,-1)),l(Sxe,{booking:U,"start-column":i(U),"span-columns":c(U),"has-conflict":A(U),onClick:d,onEdit:f,onDelete:m},null,8,["booking","start-column","span-columns","has-conflict"])]))),128)):(R(),me("div",Nxe,[...w[5]||(w[5]=[p("div",{class:"entity-header-cell sticky-cell"},null,-1),p("div",{class:"empty-booking-cell"},null,-1)])]))]))),128))])}}},Lxe=Xt(Vxe,[["__scopeId","data-v-a822fa5b"]]),Mxe={__name:"resource-entity-create",emits:["close","saved"],setup(e,{emit:t}){const n=t,a=ea(),{showSuccess:r,showError:s}=ra(),o=M(!0),i=M(!1),c=M(!1),A=M(null),d=[{label:"Room",value:"room"},{label:"Equipment",value:"equipment"}],f=M({name:"",type:"room"}),m=()=>{o.value=!1,n("close")},h=async()=>{if(!A.value)return;const{valid:v}=await A.value.validate();if(v){c.value=!0;try{const y=a.state.clinicId||a.state.clinicModule?.clinicId||1,g={...f.value,clinicId:y},w=await a.dispatch("resourceBookingModule/createEntity",g);if(w.error)throw w.error;r("Entity created successfully"),n("saved"),m()}catch(y){console.error("Error creating entity:",y),s(y.response?.data?.error||y.message||"Failed to create entity")}finally{c.value=!1}}};return(v,y)=>{const g=I("v-icon"),w=I("v-btn"),b=I("v-card-title"),x=I("v-divider"),T=I("v-text-field"),U=I("v-select"),k=I("v-form"),S=I("v-card-text"),E=I("v-spacer"),C=I("v-card-actions"),P=I("v-card"),F=I("v-dialog");return R(),ve(F,{modelValue:o.value,"onUpdate:modelValue":y[3]||(y[3]=N=>o.value=N),persistent:"","max-width":"600px"},{default:u(()=>[l(P,{rounded:"lg"},{default:u(()=>[l(b,{class:"d-flex align-center justify-space-between"},{default:u(()=>[y[5]||(y[5]=p("span",null,"Add Entity",-1)),l(w,{onClick:m,variant:"text",size:"small"},{default:u(()=>[l(g,null,{default:u(()=>[...y[4]||(y[4]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(x),l(S,{class:"py-2"},{default:u(()=>[l(k,{ref_key:"form",ref:A,modelValue:i.value,"onUpdate:modelValue":y[2]||(y[2]=N=>i.value=N)},{default:u(()=>[l(T,{modelValue:f.value.name,"onUpdate:modelValue":y[0]||(y[0]=N=>f.value.name=N),label:"Name *",variant:"outlined",density:"compact",rules:[N=>!!N||"Name is required"],"prepend-inner-icon":"mdi-rename-box",class:"mb-1"},null,8,["modelValue","rules"]),l(U,{modelValue:f.value.type,"onUpdate:modelValue":y[1]||(y[1]=N=>f.value.type=N),items:d,"item-title":"label","item-value":"value",label:"Type *",variant:"outlined",density:"compact",rules:[N=>!!N||"Type is required"],"prepend-inner-icon":"mdi-tag",class:"mb-1"},null,8,["modelValue","rules"])]),_:1},8,["modelValue"])]),_:1}),l(x),l(C,{class:"pa-3"},{default:u(()=>[l(E),l(w,{onClick:m},{default:u(()=>[...y[6]||(y[6]=[O("Cancel",-1)])]),_:1}),l(w,{color:"primary",onClick:h,disabled:!i.value||c.value,loading:c.value},{default:u(()=>[...y[7]||(y[7]=[O(" Create ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Oxe={__name:"resource-entity-edit",props:{entity:{type:Object,required:!0}},emits:["close","saved"],setup(e,{emit:t}){const n=e,a=t,r=ea(),{showSuccess:s,showError:o}=ra(),i=M(!0),c=M(!1),A=M(!1),d=M(null),f=[{label:"Room",value:"room"},{label:"Equipment",value:"equipment"}],m=M({name:"",type:"room"});We(()=>n.entity,y=>{y&&(m.value={name:y.name||"",type:y.type||"room"})},{immediate:!0});const h=()=>{i.value=!1,a("close")},v=async()=>{if(!d.value)return;const{valid:y}=await d.value.validate();if(y){A.value=!0;try{const g=r.state.clinicId||r.state.clinicModule?.clinicId||1,w={...m.value,clinicId:g},b=await r.dispatch("resourceBookingModule/updateEntity",{id:n.entity.id,entityData:w});if(b.error)throw b.error;s("Entity updated successfully"),a("saved"),h()}catch(g){console.error("Error updating entity:",g),o(g.response?.data?.error||g.message||"Failed to update entity")}finally{A.value=!1}}};return(y,g)=>{const w=I("v-icon"),b=I("v-btn"),x=I("v-card-title"),T=I("v-divider"),U=I("v-text-field"),k=I("v-select"),S=I("v-form"),E=I("v-card-text"),C=I("v-spacer"),P=I("v-card-actions"),F=I("v-card"),N=I("v-dialog");return R(),ve(N,{modelValue:i.value,"onUpdate:modelValue":g[3]||(g[3]=L=>i.value=L),persistent:"","max-width":"600px"},{default:u(()=>[l(F,{rounded:"lg"},{default:u(()=>[l(x,{class:"d-flex align-center justify-space-between"},{default:u(()=>[g[5]||(g[5]=p("span",null,"Edit Entity",-1)),l(b,{onClick:h,variant:"text",size:"small"},{default:u(()=>[l(w,null,{default:u(()=>[...g[4]||(g[4]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(T),l(E,{class:"py-2"},{default:u(()=>[l(S,{ref_key:"form",ref:d,modelValue:c.value,"onUpdate:modelValue":g[2]||(g[2]=L=>c.value=L)},{default:u(()=>[l(U,{modelValue:m.value.name,"onUpdate:modelValue":g[0]||(g[0]=L=>m.value.name=L),label:"Name *",variant:"outlined",density:"compact",rules:[L=>!!L||"Name is required"],"prepend-inner-icon":"mdi-rename-box",class:"mb-1"},null,8,["modelValue","rules"]),l(k,{modelValue:m.value.type,"onUpdate:modelValue":g[1]||(g[1]=L=>m.value.type=L),items:f,"item-title":"label","item-value":"value",label:"Type *",variant:"outlined",density:"compact",rules:[L=>!!L||"Type is required"],"prepend-inner-icon":"mdi-tag",class:"mb-1"},null,8,["modelValue","rules"])]),_:1},8,["modelValue"])]),_:1}),l(T),l(P,{class:"pa-3"},{default:u(()=>[l(C),l(b,{onClick:h},{default:u(()=>[...g[6]||(g[6]=[O("Cancel",-1)])]),_:1}),l(b,{color:"primary",onClick:v,disabled:!c.value||A.value,loading:A.value},{default:u(()=>[...g[7]||(g[7]=[O(" Update ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Hxe={class:"w-100"},$xe={class:"text-subtitle-2 mb-1"},Qxe={class:"text-caption",style:{opacity:"0.7"}},Gxe={__name:"resource-booking-form",props:{booking:{type:Object,default:null},entities:{type:Array,default:()=>[]},selectedDate:{type:String,default:()=>Dn()},preselectedEntity:{type:Object,default:null}},emits:["close","saved"],setup(e,{emit:t}){const n=e,a=t,r=ea(),{showSuccess:s,showError:o}=ra(),i=M(!0),c=M(!1),A=M(!1),d=M(null),f=M(null);let m=null,h=null;const v=M(!1),y=M([]),g=M(""),w=M(null),b=M(!1),x=[{label:"Procedure",value:"procedure"},{label:"Maintenance",value:"maintenance"},{label:"Cleaning",value:"cleaning"}],T=M({entityId:n.preselectedEntity?.id||null,startDate:n.selectedDate,startTime:new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Kolkata"}),endDate:n.selectedDate,endTime:"",reason:"procedure",patientId:null}),U=M(!1),k=M([]),S=ee(()=>!!n.booking),E=()=>{if(T.value.startTime){const[G,D]=T.value.startTime.split(":").map(Number),j=D+30,ne=G+Math.floor(j/60),H=j%60;T.value.endTime=`${ne.toString().padStart(2,"0")}:${H.toString().padStart(2,"0")}`}};We(()=>T.value.startTime,()=>{!S.value&&T.value.startTime&&!T.value.endTime&&E()},{immediate:!0}),We(()=>n.booking,G=>{if(G){const D=new Date(G.startDateTime*1e3),j=new Date(G.endDateTime*1e3);T.value={entityId:G.entityId||G.entity?.id,startDate:D.toISOString().split("T")[0],startTime:`${D.getHours().toString().padStart(2,"0")}:${D.getMinutes().toString().padStart(2,"0")}`,endDate:j.toISOString().split("T")[0],endTime:`${j.getHours().toString().padStart(2,"0")}:${j.getMinutes().toString().padStart(2,"0")}`,reason:G.reason||"procedure",patientId:G.patientId||null},G.patient&&(w.value=G.patient)}else T.value={entityId:n.preselectedEntity?.id||null,startDate:n.selectedDate,startTime:new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Kolkata"}),endDate:n.selectedDate,endTime:"",reason:"procedure",patientId:null},w.value=null,E()},{immediate:!0}),We(()=>n.preselectedEntity,G=>{!S.value&&G&&!T.value.entityId&&(T.value.entityId=G.id)},{immediate:!0});const C=G=>!G||!T.value.startDate?!0:G<T.value.startDate?"End date must be on or after start date":!0,P=G=>!G||!T.value.startTime?!0:T.value.startDate===T.value.endDate&&G<=T.value.startTime?"End time must be after start time":!0,F=G=>G?`${G.name||""} (${G.contactNumber||G.contact_number||""})`:"",N=ee(()=>!g.value||g.value.length<1?"Start typing to search for patients":b.value?`No patients found matching "${g.value}"`:""),L=async G=>{if(!G||G.length<1){y.value=[],b.value=!1;return}h&&h.abort(),h=new AbortController,v.value=!0,b.value=!1;try{const D=await Jk(G,{signal:h.signal});h.signal.aborted||(y.value=D.data,(!y.value||y.value.length===0)&&(b.value=!0))}catch(D){D.name!=="AbortError"&&(console.error("Error fetching patients:",D),b.value=!0)}finally{h?.signal.aborted||(v.value=!1)}};We(g,G=>{m&&clearTimeout(m),b.value=!1,m=setTimeout(()=>{L(G)},300)}),We(w,G=>{G?T.value.patientId=G.id:T.value.patientId=null});const ie=()=>{!S.value&&T.value.startDate&&!T.value.endDate&&(T.value.endDate=T.value.startDate)},le=()=>{!S.value&&T.value.startTime&&T.value.startDate===T.value.endDate&&E()},Q=()=>{T.value.endDate<T.value.startDate&&(T.value.startDate=T.value.endDate)},Z=()=>{},ce=async()=>{if(!(!T.value.entityId||!T.value.startDate||!T.value.startTime||!T.value.endDate||!T.value.endTime))try{const G=new Date(`${T.value.startDate}T${T.value.startTime}:00`),D=new Date(`${T.value.endDate}T${T.value.endTime}:00`),j=Math.floor(G.getTime()/1e3),ne=Math.floor(D.getTime()/1e3),H=S.value?n.booking.id:null,te=await r.dispatch("resourceBookingModule/checkConflicts",{entityId:T.value.entityId,startDateTime:j.toString(),endDateTime:ne.toString(),excludeId:H,signal:null});te.data&&(U.value=te.data.hasConflicts,k.value=te.data.conflicts||[])}catch(G){console.error("Error checking conflicts:",G)}};We([()=>T.value.entityId,()=>T.value.startDate,()=>T.value.startTime,()=>T.value.endDate,()=>T.value.endTime],()=>{c.value&&ce()},{deep:!0});const J=()=>{i.value=!1,a("close")},se=async()=>{if(!d.value)return;const{valid:G}=await d.value.validate();if(G){A.value=!0;try{const D=`${T.value.startDate}T${T.value.startTime}:00`,j=`${T.value.endDate}T${T.value.endTime}:00`,ne=new Date(D),H=new Date(j),te=Math.floor(ne.getTime()/1e3),Y=Math.floor(H.getTime()/1e3);if(isNaN(te)||isNaN(Y)||te<=0||Y<=0)throw new Error("Invalid date or time. Please check your input.");const K={entityId:T.value.entityId,patientId:T.value.patientId||null,reason:T.value.reason,startDateTime:te.toString(),endDateTime:Y.toString()};let X;if(S.value?X=await r.dispatch("resourceBookingModule/updateBooking",{id:n.booking.id,bookingData:K}):X=await r.dispatch("resourceBookingModule/createBooking",K),X.error)throw X.error;X.hasConflicts?s(S.value?"Booking updated (with conflicts)":"Booking created (with conflicts)"):s(S.value?"Booking updated successfully":"Booking created successfully"),a("saved"),J()}catch(D){console.error("Error saving booking:",D),o(D.response?.data?.error||D.message||`Failed to ${S.value?"update":"create"} booking`)}finally{A.value=!1}}};return la(()=>{m&&(clearTimeout(m),m=null),h&&(h.abort(),h=null)}),(G,D)=>{const j=I("v-icon"),ne=I("v-btn"),H=I("v-card-title"),te=I("v-divider"),Y=I("v-select"),K=I("v-text-field"),X=I("v-col"),ae=I("v-row"),oe=I("v-list-item"),W=I("v-autocomplete"),de=I("v-alert"),Ae=I("v-form"),Ce=I("v-card-text"),De=I("v-spacer"),xe=I("v-card-actions"),ke=I("v-card"),Ee=I("v-dialog");return R(),ve(Ee,{modelValue:i.value,"onUpdate:modelValue":D[11]||(D[11]=ye=>i.value=ye),persistent:"","max-width":"700px"},{default:u(()=>[l(ke,{rounded:"lg"},{default:u(()=>[l(H,{class:"d-flex align-center justify-space-between"},{default:u(()=>[p("span",null,q(S.value?"Edit Booking":"Create Booking"),1),l(ne,{onClick:J,variant:"text",size:"small"},{default:u(()=>[l(j,null,{default:u(()=>[...D[12]||(D[12]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(te),l(Ce,{class:"py-2"},{default:u(()=>[l(Ae,{ref_key:"form",ref:d,modelValue:c.value,"onUpdate:modelValue":D[10]||(D[10]=ye=>c.value=ye)},{default:u(()=>[S.value?_e("",!0):(R(),ve(Y,{key:0,modelValue:T.value.entityId,"onUpdate:modelValue":D[0]||(D[0]=ye=>T.value.entityId=ye),items:e.entities,"item-title":"name","item-value":"id",label:"Entity *",variant:"outlined",density:"compact",rules:[ye=>!!ye||"Entity is required"],"prepend-inner-icon":"mdi-office-building",class:"mb-2"},null,8,["modelValue","items","rules"])),l(ae,{dense:""},{default:u(()=>[l(X,{cols:"12",md:"6"},{default:u(()=>[l(K,{modelValue:T.value.startDate,"onUpdate:modelValue":[D[1]||(D[1]=ye=>T.value.startDate=ye),ie],label:"Start Date *",type:"date",variant:"outlined",density:"compact",rules:[ye=>!!ye||"Start date is required"],"prepend-inner-icon":"mdi-calendar",class:"date-input",onClick:D[2]||(D[2]=ye=>ye.target.showPicker&&ye.target.showPicker())},null,8,["modelValue","rules"])]),_:1}),l(X,{cols:"12",md:"6"},{default:u(()=>[l(K,{modelValue:T.value.startTime,"onUpdate:modelValue":[D[3]||(D[3]=ye=>T.value.startTime=ye),le],label:"Start Time *",type:"time",variant:"outlined",density:"compact",rules:[ye=>!!ye||"Start time is required"],"prepend-inner-icon":"mdi-clock-outline"},null,8,["modelValue","rules"])]),_:1})]),_:1}),l(ae,{dense:""},{default:u(()=>[l(X,{cols:"12",md:"6"},{default:u(()=>[l(K,{modelValue:T.value.endDate,"onUpdate:modelValue":[D[4]||(D[4]=ye=>T.value.endDate=ye),Q],label:"End Date *",type:"date",variant:"outlined",density:"compact",rules:[ye=>!!ye||"End date is required",C],"prepend-inner-icon":"mdi-calendar",class:"date-input",onClick:D[5]||(D[5]=ye=>ye.target.showPicker&&ye.target.showPicker())},null,8,["modelValue","rules"])]),_:1}),l(X,{cols:"12",md:"6"},{default:u(()=>[l(K,{modelValue:T.value.endTime,"onUpdate:modelValue":[D[6]||(D[6]=ye=>T.value.endTime=ye),Z],label:"End Time *",type:"time",variant:"outlined",density:"compact",rules:[ye=>!!ye||"End time is required",P],"prepend-inner-icon":"mdi-clock-outline"},null,8,["modelValue","rules"])]),_:1})]),_:1}),l(Y,{modelValue:T.value.reason,"onUpdate:modelValue":D[7]||(D[7]=ye=>T.value.reason=ye),items:x,"item-title":"label","item-value":"value",label:"Reason *",variant:"outlined",density:"compact",rules:[ye=>!!ye||"Reason is required"],"prepend-inner-icon":"mdi-tag",class:"mb-2"},null,8,["modelValue","rules"]),l(W,{ref_key:"searchRef",ref:f,modelValue:w.value,"onUpdate:modelValue":D[8]||(D[8]=ye=>w.value=ye),search:g.value,"onUpdate:search":D[9]||(D[9]=ye=>g.value=ye),items:y.value,loading:v.value,"item-title":F,"item-value":"id","return-object":"",label:"Patient (Optional)",variant:"outlined",density:"compact",clearable:"","prepend-inner-icon":"mdi-account-search","no-data-text":N.value,"menu-props":{maxHeight:"400px",closeOnContentClick:!1},class:"mb-2"},{item:u(({props:ye,item:we})=>[l(oe,Fe(ye,{class:"py-2"}),{default:u(()=>[p("div",Hxe,[p("div",$xe," ID: "+q(we.raw.id)+"  "+q(we.raw.gender)+", "+q(we.raw.age)+" yrs ",1),p("div",Qxe,q(we.raw.contactNumber||we.raw.contact_number||""),1)])]),_:2},1040)]),_:1},8,["modelValue","search","items","loading","no-data-text"]),U.value&&k.value.length>0?(R(),ve(de,{key:1,type:"warning",variant:"tonal",density:"compact",class:"mb-2"},{default:u(()=>[O(" This booking conflicts with "+q(k.value.length)+" existing booking(s). Booking will still be created. ",1)]),_:1})):_e("",!0)]),_:1},8,["modelValue"])]),_:1}),l(te),l(xe,{class:"pa-3"},{default:u(()=>[l(De),l(ne,{onClick:J},{default:u(()=>[...D[13]||(D[13]=[O("Cancel",-1)])]),_:1}),l(ne,{color:"primary",onClick:se,disabled:!c.value||A.value,loading:A.value},{default:u(()=>[O(q(S.value?"Update":"Create"),1)]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},zxe=Xt(Gxe,[["__scopeId","data-v-158ca215"]]),Kxe={key:0,class:"d-flex justify-center align-center",style:{height:"100%"}},Wxe={__name:"resource-booking",setup(e){const t=ea(),{showSuccess:n,showError:a}=ra(),r=M(!1),s=M(!1),o=M(!1),i=M(!1),c=M(null),A=M(null),d=M(null);let f=null,m=null;const h=ee(()=>t.getters["resourceBookingModule/filteredEntities"]),v=ee(()=>t.getters["resourceBookingModule/bookingsByDate"]),y=ee(()=>t.getters["resourceBookingModule/conflicts"]),g=ee({get:()=>t.state.resourceBookingModule.selectedDate||Dn(),set:ne=>t.commit("resourceBookingModule/setSelectedDate",ne)});ee(()=>t.state.resourceBookingModule.selectedEntity);const w=ee({get:()=>t.state.resourceBookingModule.entitySearchQuery||"",set:ne=>t.commit("resourceBookingModule/setEntitySearchQuery",ne)}),b=ee(()=>t.state.resourceBookingModule.isLoading),x=ee(()=>t.state.resourceBookingModule.isRefreshing),T=ee(()=>h.value),U=ne=>{if(!ne)return"Select Date";const H=Dn(),te=new Date(Date.now()+330*60*1e3-1440*60*1e3).toISOString().slice(0,10),Y=new Date(Date.now()+330*60*1e3+1440*60*1e3).toISOString().slice(0,10);if(ne===H)return"Today";if(ne===te)return"Yesterday";if(ne===Y)return"Tomorrow";const K=new Date(ne+"T12:00:00");return K.toLocaleDateString("en-IN",{day:"numeric",month:"short",year:K.getFullYear()!==new Date().getFullYear()?"numeric":void 0})},k=async ne=>{let H;typeof ne=="string"?H=ne.includes("T")?ne.split("T")[0]:ne:ne instanceof Date?H=go(ne,"yyyy-MM-dd"):H=Dn(),g.value=H,r.value=!1,await D()},S=()=>{f&&clearTimeout(f),f=setTimeout(()=>{},300)},E=()=>{s.value=!0},C=()=>{s.value=!1},P=ne=>{c.value=ne,o.value=!0},F=()=>{o.value=!1,c.value=null},N=async()=>{await G()},L=ne=>{P(ne)},ie=async ne=>{if(confirm(`Are you sure you want to delete "${ne.name}"? This will also delete all bookings for this entity.`))try{const H=await t.dispatch("resourceBookingModule/deleteEntity",ne.id);if(H.error)throw H.error;n("Entity deleted successfully"),await G(),await D()}catch(H){a(H.response?.data?.error||H.message||"Failed to delete entity")}},le=(ne=null)=>{d.value=ne,A.value=null,i.value=!0},Q=ne=>{A.value=ne,i.value=!0},Z=async ne=>{if(confirm("Are you sure you want to delete this booking?"))try{const H=await t.dispatch("resourceBookingModule/deleteBooking",ne.id);if(H.error)throw H.error;n("Booking deleted successfully"),await D()}catch(H){a(H.response?.data?.error||H.message||"Failed to delete booking")}},ce=()=>{i.value=!1,A.value=null,d.value=null},J=async()=>{await D()},se=async()=>{await t.dispatch("resourceBookingModule/refreshBookings")},G=async()=>{m&&m.abort(),m=new AbortController,await t.dispatch("resourceBookingModule/fetchEntities",{signal:m.signal})},D=async()=>{m&&m.abort(),g.value||(g.value=Dn()),m=new AbortController;try{const ne=await t.dispatch("resourceBookingModule/fetchBookings",{date:g.value,signal:m.signal});ne.error&&console.error("Error fetching bookings:",ne.error)}catch(ne){console.error("Error in fetchBookings:",ne)}},j=async()=>{try{const ne=t.state.resourceBookingModule.selectedDate;ne?g.value=ne:g.value=Dn(),t.commit("resourceBookingModule/setSelectedDate",g.value),await G(),g.value&&await D()}catch(ne){console.error("Error initializing resource booking component:",ne),a("Failed to initialize resource bookings. Please refresh the page.")}};return cn(async()=>{await j()}),Z0(async()=>{(h.value.length===0||!g.value)&&await j()}),la(()=>{f&&(clearTimeout(f),f=null),m&&(m.abort(),m=null)}),(ne,H)=>{const te=I("v-icon"),Y=I("v-btn"),K=I("v-date-picker"),X=I("v-menu"),ae=I("v-col"),oe=I("v-text-field"),W=I("v-tooltip"),de=I("v-row"),Ae=I("v-card"),Ce=I("v-progress-circular"),De=I("v-empty-state"),xe=I("v-alert"),ke=I("v-dialog");return R(),ve(Ae,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex flex-column"},{default:u(()=>[l(Ae,{rounded:"0",class:"pa-2",color:"surfaceContainerHigh",style:{"min-height":"56px"}},{default:u(()=>[l(de,{"no-gutters":"",align:"center",class:"header-row"},{default:u(()=>[l(ae,{cols:"auto",class:"d-flex align-center pr-2"},{default:u(()=>[l(X,{modelValue:r.value,"onUpdate:modelValue":H[1]||(H[1]=Ee=>r.value=Ee),"close-on-content-click":!1,transition:"scale-transition","offset-y":""},{activator:u(({props:Ee})=>[l(Y,Fe(Ee,{variant:"outlined",size:"small",rounded:"x-small",class:"btn-hover-enhanced",style:{"min-width":"auto"}}),{default:u(()=>[O(q(U(g.value))+" ",1),l(te,{size:"small",class:"ml-1"},{default:u(()=>[...H[7]||(H[7]=[O("mdi-calendar",-1)])]),_:1})]),_:1},16)]),default:u(()=>[l(K,{modelValue:g.value,"onUpdate:modelValue":[H[0]||(H[0]=Ee=>g.value=Ee),k],color:"primary",locale:"en-IN"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),l(ae,{class:"d-flex justify-center"},{default:u(()=>[l(oe,{modelValue:w.value,"onUpdate:modelValue":[H[2]||(H[2]=Ee=>w.value=Ee),S],label:"Filter entities",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-magnify",clearable:"","hide-details":"",style:{"max-width":"300px"}},null,8,["modelValue"])]),_:1}),l(ae,{cols:"auto",class:"d-flex justify-end align-center gap-1"},{default:u(()=>[l(W,{text:"Add Entity"},{activator:u(({props:Ee})=>[l(Y,Fe({rounded:"x-small",onClick:E,size:"small",variant:"outlined"},Ee,{class:"btn-hover-enhanced",style:{"min-width":"auto"}}),{default:u(()=>[...H[8]||(H[8]=[O(" Add Entity ",-1)])]),_:1},16)]),_:1}),l(W,{text:"Refresh Bookings"},{activator:u(({props:Ee})=>[l(Y,Fe({rounded:"x-small",onClick:se,size:"small"},Ee,{class:"btn-hover-enhanced",loading:x.value,disabled:x.value,style:{"min-width":"auto"}}),{default:u(()=>[x.value?_e("",!0):(R(),ve(te,{key:0,size:"small"},{default:u(()=>[...H[9]||(H[9]=[p("img",{src:fg,alt:"Refresh",style:{filter:"invert(1)"}},null,-1)])]),_:1}))]),_:1},16,["loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1}),l(Ae,{flat:"",class:"ma-2",color:"surfaceContainer",style:{height:"calc(100% - 16px)"}},{default:u(()=>[b.value?(R(),me("div",Kxe,[l(Ce,{indeterminate:"",color:"primary"})])):T.value.length===0?(R(),ve(De,{key:1},{title:u(()=>[...H[10]||(H[10]=[p("div",{class:"text-subtitle-2 mt-4"}," No entities available ",-1)])]),text:u(()=>[l(Y,{variant:"outlined",onClick:E},{default:u(()=>[...H[11]||(H[11]=[O("Add Entity",-1)])]),_:1})]),_:1})):(R(),me(ze,{key:2},[Oe(t).state.resourceBookingModule.error?(R(),ve(xe,{key:0,type:"error",variant:"tonal",density:"compact",class:"ma-2",dismissible:"","onClick:close":H[3]||(H[3]=Ee=>Oe(t).commit("resourceBookingModule/setError",null))},{default:u(()=>[O(q(Oe(t).state.resourceBookingModule.error?.response?.data?.error||Oe(t).state.resourceBookingModule.error?.message||"An error occurred"),1)]),_:1})):_e("",!0),l(Lxe,{entities:T.value,bookings:v.value,conflicts:y.value,onBookingClick:Q,onAddBooking:le,onEditEntity:L,onDeleteEntity:ie,onEditBooking:Q,onDeleteBooking:Z},null,8,["entities","bookings","conflicts"])],64))]),_:1}),l(ke,{modelValue:s.value,"onUpdate:modelValue":H[4]||(H[4]=Ee=>s.value=Ee),persistent:"","max-width":"600px"},{default:u(()=>[s.value?(R(),ve(Mxe,{key:0,onClose:C,onSaved:N})):_e("",!0)]),_:1},8,["modelValue"]),l(ke,{modelValue:o.value,"onUpdate:modelValue":H[5]||(H[5]=Ee=>o.value=Ee),persistent:"","max-width":"600px"},{default:u(()=>[o.value&&c.value?(R(),ve(Oxe,{key:0,entity:c.value,onClose:F,onSaved:N},null,8,["entity"])):_e("",!0)]),_:1},8,["modelValue"]),l(ke,{modelValue:i.value,"onUpdate:modelValue":H[6]||(H[6]=Ee=>i.value=Ee),persistent:"","max-width":"700px"},{default:u(()=>[i.value?(R(),ve(zxe,{key:0,booking:A.value,entities:h.value,"selected-date":g.value,"preselected-entity":d.value,onClose:ce,onSaved:J},null,8,["booking","entities","selected-date","preselected-entity"])):_e("",!0)]),_:1},8,["modelValue"])]),_:1})}}},jxe=Xt(Wxe,[["__scopeId","data-v-97873da0"]]),qxe={class:"scrollable-content"},Yxe={class:"scrollable-content"},Xxe={class:"text-h6 mb-4"},Jxe=["aria-label"],Zxe={key:0,class:"d-flex align-center justify-center",style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",background:"rgba(255, 255, 255, 0.95)","z-index":"9999"}},eCe={__name:"home-page",setup(e){const t=ea(),n=Gh(),a=Zi(),r=M(null);let s=null;try{window.require&&(s=window.require("electron").ipcRenderer)}catch(E){console.error("Failed to access ipcRenderer:",E)}const o=M(0),i=M(new Map),c=M({}),A=M(!1),d=M(""),f=M(!1),m=M(""),h=M(null),v=M(new Map),y=M(100),g=M([{title:"Queue"},{title:"Appointments",url:"https://calendar.google.com/",id:"calendar"},{title:"Procedure Bookings",id:"procedure-bookings"}]);g.value.slice(1).forEach(E=>{E.id&&(c.value[E.id]=!1)}),cn(async()=>{try{await w(),n.params.tab==="1"?o.value=1:o.value=0}catch(E){console.error("Error during initialization:",E),h.value="Failed to initialize component properly"}if(s)try{s.on("external-site-loading",(E,{siteId:C,isLoading:P})=>{Object.prototype.hasOwnProperty.call(c.value,C)&&(c.value[C]=P)}),s.on("external-site-loaded",(E,{siteId:C})=>{if(Object.prototype.hasOwnProperty.call(c.value,C)){c.value[C]=!1;const P=v.value.get(C);P&&(clearTimeout(P),v.value.delete(C))}}),s.on("external-site-error",(E,{siteId:C,error:P})=>{if(Object.prototype.hasOwnProperty.call(c.value,C)){c.value[C]=!1,f.value=!0,m.value=`Failed to load ${C}: ${P}`;const F=v.value.get(C);F&&(clearTimeout(F),v.value.delete(C))}})}catch(E){console.error("Error setting up IPC listeners:",E),h.value="Failed to initialize external site integration"}try{window.addEventListener("doctor-selection-changed",k),window.addEventListener("clinic-selection-changed",S)}catch(E){console.error("Error setting up event listeners:",E),h.value="Failed to initialize data refresh listeners"}}),We(o,async(E,C)=>{try{if(E===1&&await w(),E>=1&&E<g.value.length){const P=g.value[E];P.url&&P.id&&setTimeout(()=>{bn(()=>{T(P.id,P.url)})},500)}if(C>=1&&C<g.value.length){const P=g.value[C];P.url&&P.id&&U(P.id)}}catch(P){console.error("Error in tab watcher:",P),h.value="Failed to switch tabs properly"}}),We(()=>a.currentRoute.value.params.tab,E=>{if(E){let C=0;E==="1"&&(C=1),C!==o.value&&(console.log("Route tab parameter changed, switching to tab:",C),o.value=C)}}),la(()=>{try{g.value.slice(1).forEach(E=>{if(E.url&&E.id)try{U(E.id)}catch(C){console.error(`Error closing external site ${E.id}:`,C)}}),s&&(s.removeAllListeners("external-site-loading"),s.removeAllListeners("external-site-loaded"),s.removeAllListeners("external-site-error")),window.removeEventListener("doctor-selection-changed",k),window.removeEventListener("clinic-selection-changed",S),v.value.forEach(E=>clearTimeout(E)),v.value.clear(),i.value.clear()}catch(E){console.error("Error during component cleanup:",E)}});const w=async()=>{try{if(s){const E=await s.invoke("get-zoom-level");E.success?y.value=E.zoomFactor||100:console.error("Failed to get zoom level:",E.error)}else console.warn("ipcRenderer not available for zoom check")}catch(E){console.error("Error checking zoom level:",E)}},b=(E,C)=>{C?i.value.set(E,C):i.value.delete(E)},x=E=>i.value.get(E)||null,T=async(E,C)=>{try{if(E==="calendar"&&(await w(),y.value!==100))return;bn(()=>{const P=x(E);if(!(P instanceof HTMLElement)){console.error(`${E}Container is not a DOM element`),f.value=!0,m.value=`Failed to load ${E}. Please try again.`;return}if(!s){console.error("ipcRenderer is not available");try{window.open(C,"_blank"),A.value=!0,d.value=`${E} opened in external browser`}catch{f.value=!0,m.value=`Failed to open ${E}`}return}if(P){c.value[E]=!0;const F=setTimeout(()=>{c.value[E]=!1,f.value=!0,m.value=`${E} is taking too long to load`},15e3);v.value.set(E,F);const N=P.getBoundingClientRect(),L=12,ie=4;s.send("open-external-site",{siteId:E,url:C,bounds:{x:N.left+ie,y:N.top+ie,width:N.width-ie*2,height:N.height-ie*2}})}else console.error(`${E}Container is not defined`),f.value=!0,m.value=`Failed to initialize ${E} container`})}catch(P){console.error("Error opening external site:",P),c.value[E]=!1,f.value=!0,m.value="Failed to open external application"}},U=E=>{try{bn(()=>{c.value[E]=!1;const C=v.value.get(E);C&&(clearTimeout(C),v.value.delete(E)),s?s.send("close-external-site",{siteId:E}):console.error("ipcRenderer is not available")})}catch(C){console.error("Error closing external site:",C)}},k=async E=>{try{const{doctorId:C,doctorName:P}=E.detail;if(console.log("Doctor changed:",P),!C){console.warn("No doctorId provided in doctor change event");return}if(!r.value?.refreshAppointments){console.warn("AppointmentQueue component not ready for refresh");return}const F=t.state.clinicModule?.clinicId;if(!F){console.warn("No clinicId available for appointment refresh");return}await r.value.refreshAppointments(C,F)}catch(C){console.error("Error handling doctor change:",C),f.value=!0,m.value="Failed to refresh appointments after doctor change"}},S=async E=>{try{const{clinicId:C,clinicName:P}=E.detail;if(console.log("Clinic changed:",P),!C){console.warn("No clinicId provided in clinic change event");return}if(!r.value?.refreshAppointments){console.warn("AppointmentQueue component not ready for refresh");return}const F=t.state.doctorModule?.doctorId;if(!F){console.warn("No doctorId available for appointment refresh");return}await r.value.refreshAppointments(F,C)}catch(C){console.error("Error handling clinic change:",C),f.value=!0,m.value="Failed to refresh appointments after clinic change"}};return(E,C)=>{const P=I("v-alert"),F=I("v-tab"),N=I("v-tabs"),L=I("v-card"),ie=I("v-col"),le=I("v-row"),Q=I("v-snackbar"),Z=I("v-window-item"),ce=I("v-icon"),J=I("v-card-title"),se=I("v-card-text"),G=I("v-skeleton-loader"),D=I("v-window"),j=I("v-main");return R(),ve(j,null,{default:u(()=>[h.value?(R(),ve(P,{key:0,type:"error",dismissible:"","onClick:close":C[0]||(C[0]=ne=>h.value=null),class:"ma-3"},{default:u(()=>[O(q(h.value),1)]),_:1})):_e("",!0),l(le,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[l(ie,{cols:"12"},{default:u(()=>[l(L,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center"},{default:u(()=>[l(N,{modelValue:o.value,"onUpdate:modelValue":C[1]||(C[1]=ne=>o.value=ne),color:"primary","align-tabs":"start",class:"w-100"},{default:u(()=>[(R(!0),me(ze,null,Wt(g.value,(ne,H)=>(R(),ve(F,{key:H,value:H},{default:u(()=>[O(q(ne.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(D,{modelValue:o.value,"onUpdate:modelValue":C[4]||(C[4]=ne=>o.value=ne),class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[l(Z,{value:0,style:{height:"100%"}},{default:u(()=>[l(le,{"no-gutters":"","aria-label":"main row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[l(ie,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[p("div",qxe,[l(dH,{ref_key:"appointmentQueueRef",ref:r},null,512)])]),_:1}),l(ie,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[p("div",Yxe,[l(_xe)])]),_:1})]),_:1}),l(Q,{modelValue:A.value,"onUpdate:modelValue":C[2]||(C[2]=ne=>A.value=ne),class:"elevation-24",color:"success"},{default:u(()=>[O(q(d.value),1)]),_:1},8,["modelValue"]),l(Q,{modelValue:f.value,"onUpdate:modelValue":C[3]||(C[3]=ne=>f.value=ne),class:"elevation-24",color:"failure"},{default:u(()=>[O(q(m.value),1)]),_:1},8,["modelValue"])]),_:1}),(R(!0),me(ze,null,Wt(g.value.slice(1),(ne,H)=>(R(),ve(Z,{key:ne.id,value:H+1,style:{height:"100%"}},{default:u(()=>[l(le,{"no-gutters":"","aria-label":"main-row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[l(ie,{cols:"12",order:"1",class:"stable-height-column"},{default:u(()=>[ne.id==="calendar"&&y.value!==100?(R(),ve(L,{key:0,color:"surface",variant:"elevated",class:"pa-6 ma-2 d-flex flex-column align-center justify-center scrollable-content"},{default:u(()=>[l(ce,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...C[5]||(C[5]=[O(" mdi-magnify-close ",-1)])]),_:1}),l(J,{class:"text-h5 text-center mb-2"},{default:u(()=>[...C[6]||(C[6]=[O(" Calendar Unavailable ",-1)])]),_:1}),l(se,{class:"text-center"},{default:u(()=>[C[7]||(C[7]=p("p",{class:"text-h6 mb-3"},"Calendar requires 100% zoom level to display properly.",-1)),p("p",Xxe,[p("strong",null,"Current zoom: "+q(y.value)+"%",1)]),C[8]||(C[8]=p("p",{class:"text-body-1 mb-4"}," The calendar positioning system requires the default zoom level to work correctly. Please use the zoom controls in the top navigation bar to reset to 100%. ",-1))]),_:1})]),_:1})):_e("",!0),ne.id==="procedure-bookings"?(R(),ve(jxe,{key:1})):ne.url?(R(),ve(L,{key:2,color:"surfaceContainer",flat:"",class:"pa-1 scrollable-content"},{default:u(()=>[p("div",{ref_for:!0,ref:te=>b(ne.id,te),style:{width:"100%",height:"100%",position:"relative"},"aria-label":`${ne.title} Container`},[c.value[ne.id]?(R(),me("div",Zxe,[l(G,{type:"card",width:"80%",height:"80%",class:"mx-auto"})])):_e("",!0)],8,Jxe)]),_:2},1024)):_e("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})}}},tCe=Xt(eCe,[["__scopeId","data-v-431c6b2c"]]),nCe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M14,2H6A2,2%200%200,0%204,4V20A2,2%200%200,0%206,22H18A2,2%200%200,0%2020,20V8L14,2M13.5,16V19H10.5V16H8L12,12L16,16H13.5M13,9V3.5L18.5,9H13Z'%20/%3e%3c/svg%3e",aCe={__name:"TabsExtension",props:{items:{type:Array,required:!0},modelValue:{type:Number,default:0},alignTabs:{type:String,default:"start"}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,a=t,r=M(n.modelValue);We(()=>n.modelValue,o=>{r.value=o});const s=o=>{a("update:modelValue",o)};return(o,i)=>{const c=I("v-tab"),A=I("v-tabs");return R(),ve(A,{modelValue:r.value,"onUpdate:modelValue":[i[0]||(i[0]=d=>r.value=d),s],"align-tabs":e.alignTabs||"start",density:"compact"},{default:u(()=>[(R(!0),me(ze,null,Wt(e.items,(d,f)=>(R(),ve(c,{key:d.title||f,disabled:d.disabled},{default:u(()=>[O(q(d.title),1)]),_:2},1032,["disabled"]))),128))]),_:1},8,["modelValue","align-tabs"])}}},rCe={__name:"BreadcrumbsExtension",props:{items:{type:Array,required:!0}},setup(e){return(t,n)=>{const a=I("v-icon"),r=I("v-breadcrumbs-item"),s=I("v-breadcrumbs");return R(),ve(s,null,{default:u(()=>[(R(!0),me(ze,null,Wt(e.items,(o,i)=>(R(),ve(r,{key:i,to:o.to,disabled:o.disabled},{default:u(()=>[o.icon?(R(),ve(a,{key:0,start:o.iconPosition!=="end",end:o.iconPosition==="end",small:"",class:ct(o.iconClass)},{default:u(()=>[O(q(o.icon),1)]),_:2},1032,["start","end","class"])):_e("",!0),O(" "+q(o.text),1)]),_:2},1032,["to","disabled"]))),128))]),_:1})}}};function sCe(){const e=ea(),t=(r,s=0,o="start",i=null)=>{e.dispatch("appBar/setExtensionContent",{component:i_(aCe),props:{items:r,modelValue:s,alignTabs:o,"onUpdate:modelValue":i||(()=>{})}})},n=r=>{e.dispatch("appBar/setExtensionContent",{component:i_(rCe),props:{items:r}})},a=()=>{e.dispatch("appBar/clearExtensionContent")};return zl(()=>{a()}),{setTabs:t,setBreadcrumbs:n,clearExtension:a}}const oCe={class:"filter-container pa-3",style:{flex:"1 1 auto","overflow-y":"auto"}},iCe={class:"filter-field mb-3"},lCe={class:"filter-field mb-3"},uCe={class:"filter-field mb-3"},cCe={class:"d-flex justify-center mt-4"},dCe={class:"d-flex align-center"},ACe={class:"d-flex age-dob-container",style:{gap:"8px"}},fCe={__name:"PatientFilter",props:{modelValueName:{type:String,default:""},modelValuePhone:{type:String,default:""},modelValueDate:{type:String,default:""}},emits:["update:modelValueName","update:modelValuePhone","update:modelValueDate","filter-change","clear-filters","patient-created"],setup(e,{expose:t,emit:n}){const a=e,r=n,s=M(a.modelValueName),o=M(a.modelValuePhone),i=M(a.modelValueDate),c=M(""),A=M(""),d=M(""),f=M(!1),m=M(!1),h=M("dob"),v=M(""),y=M({name:"",contact_number:"",age:"",birthDate:"",gender:"",email:""}),g=()=>{f.value=!0},w=()=>{f.value=!1,h.value="dob",v.value="",y.value={name:"",contact_number:"",age:"",birthDate:"",gender:"",email:""},m.value=!1},b=P=>{if(h.value==="dob")if(P){v.value=P;const F=Zk(P);F!==null&&(y.value.age=F.toString())}else v.value=""};We(h,P=>{P==="age"?(y.value.birthDate&&(v.value=y.value.birthDate),y.value.birthDate=""):v.value&&(y.value.birthDate=v.value)}),t({openCreatePatientDialog:g});const x=()=>{c.value="",s.value&&s.value.length<2&&(c.value="Name must be at least 2 characters long"),S()},T=()=>{A.value="",o.value&&o.value.replace(/\D/g,"").length>15&&(A.value="Phone number cannot exceed 15 digits"),S()},U=()=>{if(d.value="",i.value){const P=new Date(i.value);isNaN(P.getTime())&&(d.value="Please enter a valid date")}S()},k=()=>{s.value="",o.value="",i.value="",c.value="",A.value="",d.value="",r("update:modelValueName",""),r("update:modelValuePhone",""),r("update:modelValueDate",""),r("clear-filters")},S=()=>{r("update:modelValueName",s.value),r("update:modelValuePhone",o.value),r("update:modelValueDate",i.value),r("filter-change",{name:s.value,phone:o.value,date:i.value,hasErrors:!!(c.value||A.value||d.value)})};We(()=>a.modelValueName,P=>{s.value=P}),We(()=>a.modelValuePhone,P=>{o.value=P}),We(()=>a.modelValueDate,P=>{i.value=P}),We([s,o,i],()=>{S()});const E=P=>{const F=P.target.value.replace(/[^0-9]/g,"").slice(0,10);y.value.contact_number=F},C=async()=>{try{const P={...y.value};if(h.value==="dob"&&P.birthDate){const N=cd(P.birthDate);N!==null?P.birthDate=N.toString():P.birthDate=""}else delete P.birthDate;const F=await TM(P);F.error?(r("patient-created",{success:!1,message:"Error creating patient. Please try again.",error:F.error}),console.error("There was an error creating the patient:",F.error)):(w(),r("patient-created",{success:!0,message:"Patient created successfully",patient:F.data}))}catch(P){console.error("There was an error creating the patient:",P),r("patient-created",{success:!1,message:"An unexpected error occurred. Please try again.",error:P})}};return(P,F)=>{const N=I("v-card-text"),L=I("v-card"),ie=I("v-text-field"),le=I("v-btn"),Q=I("v-icon"),Z=I("v-card-title"),ce=I("v-divider"),J=I("v-col"),se=I("v-btn-toggle"),G=I("v-select"),D=I("v-row"),j=I("v-form"),ne=I("v-spacer"),H=I("v-card-actions"),te=I("v-dialog");return R(),ve(L,{color:"surfaceContainer",flat:"",style:{height:"100%",display:"flex","flex-direction":"column"}},{default:u(()=>[l(L,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(N,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...F[13]||(F[13]=[p("span",{class:"text-body-2 font-weight-medium"},"Filter Patients",-1)])]),_:1})]),_:1}),p("div",oCe,[p("div",iCe,[l(ie,{modelValue:s.value,"onUpdate:modelValue":F[0]||(F[0]=Y=>s.value=Y),label:"Patient Name",placeholder:"Enter patient name...",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":c.value,onInput:x,maxlength:"100"},null,8,["modelValue","error-messages"])]),p("div",lCe,[l(ie,{modelValue:o.value,"onUpdate:modelValue":F[1]||(F[1]=Y=>o.value=Y),label:"Phone Number",placeholder:"Enter phone number...",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":A.value,onInput:T,maxlength:"15"},null,8,["modelValue","error-messages"])]),p("div",uCe,[l(ie,{modelValue:i.value,"onUpdate:modelValue":F[2]||(F[2]=Y=>i.value=Y),type:"date",label:"Appointment Date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input date-input","error-messages":d.value,onInput:U},null,8,["modelValue","error-messages"])]),p("div",cCe,[l(le,{variant:"text",size:"small","prepend-icon":"mdi-filter-remove",onClick:k,class:"filter-button-clear"},{default:u(()=>[...F[14]||(F[14]=[O(" Clear ",-1)])]),_:1})])]),l(te,{modelValue:f.value,"onUpdate:modelValue":F[12]||(F[12]=Y=>f.value=Y),persistent:"","max-width":"900px"},{default:u(()=>[l(L,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[l(Z,{class:"d-flex justify-space-between align-center pa-3"},{default:u(()=>[p("div",dCe,[l(Q,{class:"mr-2",color:"primary"},{default:u(()=>[...F[15]||(F[15]=[O("mdi-account-plus",-1)])]),_:1}),F[16]||(F[16]=p("span",{class:"text-h6 font-weight-medium"},"Create Patient",-1))]),l(le,{icon:"",size:"x-small",onClick:w,tabindex:"-1"},{default:u(()=>[l(Q,null,{default:u(()=>[...F[17]||(F[17]=[p("img",{src:Yl,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1}),l(ce),l(N,{class:"pa-4"},{default:u(()=>[l(j,{modelValue:m.value,"onUpdate:modelValue":F[11]||(F[11]=Y=>m.value=Y),"validate-on":"input"},{default:u(()=>[l(D,{"no-gutters":""},{default:u(()=>[l(J,{cols:"6",class:"pr-2 mb-2"},{default:u(()=>[l(ie,{label:"Name *",modelValue:y.value.name,"onUpdate:modelValue":F[3]||(F[3]=Y=>y.value.name=Y),clearable:"",rules:Oe(sr),density:"comfortable",variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),l(J,{cols:"6",class:"pl-2 mb-2"},{default:u(()=>[l(ie,{label:"Phone Number *",modelValue:y.value.contact_number,"onUpdate:modelValue":F[4]||(F[4]=Y=>y.value.contact_number=Y),type:"tel",counter:10,rules:Oe(tv),clearable:"",density:"comfortable",variant:"outlined",maxlength:"10",onInput:E},null,8,["modelValue","rules"])]),_:1}),l(J,{cols:"6",class:"pr-2 mb-2"},{default:u(()=>[p("div",ACe,[l(se,{modelValue:h.value,"onUpdate:modelValue":F[5]||(F[5]=Y=>h.value=Y),mandatory:"",density:"compact",variant:"outlined",divided:"",class:"age-dob-toggle"},{default:u(()=>[l(le,{value:"dob",size:"small"},{default:u(()=>[...F[18]||(F[18]=[O("DOB",-1)])]),_:1}),l(le,{value:"age",size:"small"},{default:u(()=>[...F[19]||(F[19]=[O("Age",-1)])]),_:1})]),_:1},8,["modelValue"]),h.value==="age"?(R(),ve(ie,{key:0,label:"Age (yrs) *",modelValue:y.value.age,"onUpdate:modelValue":F[6]||(F[6]=Y=>y.value.age=Y),clearable:"",density:"comfortable",variant:"outlined",rules:Oe(eT),disabled:!!y.value.birthDate||!!v.value,class:"flex-grow-1","hide-details":"auto"},null,8,["modelValue","rules","disabled"])):(R(),ve(ie,{key:1,label:"Date of Birth *",modelValue:y.value.birthDate,"onUpdate:modelValue":[F[7]||(F[7]=Y=>y.value.birthDate=Y),b],type:"date",clearable:"",density:"comfortable",variant:"outlined",rules:Oe(tT),class:"flex-grow-1 date-input","hide-details":"auto",onClick:F[8]||(F[8]=Y=>Y.target.showPicker&&Y.target.showPicker())},null,8,["modelValue","rules"]))])]),_:1}),l(J,{cols:"6",class:"pl-2 mb-2"},{default:u(()=>[l(G,{modelValue:y.value.gender,"onUpdate:modelValue":F[9]||(F[9]=Y=>y.value.gender=Y),items:["Male","Female"],label:"Gender *",clearable:"",density:"comfortable",variant:"outlined",rules:Oe(nT)},null,8,["modelValue","rules"])]),_:1}),l(J,{cols:"12",class:"mb-2"},{default:u(()=>[l(ie,{label:"Email (optional)",modelValue:y.value.email,"onUpdate:modelValue":F[10]||(F[10]=Y=>y.value.email=Y),type:"email",clearable:"",density:"comfortable",variant:"outlined",rules:Oe(mg)},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(ce),l(H,{class:"pa-3"},{default:u(()=>[l(ne),l(le,{variant:"text",onClick:w},{default:u(()=>[...F[20]||(F[20]=[O(" Cancel ",-1)])]),_:1}),l(le,{variant:"outlined",disabled:!m.value,onClick:C,"prepend-icon":"mdi-account-plus",class:"btn-hover-enhanced"},{default:u(()=>[...F[21]||(F[21]=[O(" Create Patient ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},mCe=Xt(fCe,[["__scopeId","data-v-04aa507e"]]),hCe={class:"filter-container pa-3",style:{flex:"1 1 auto","overflow-y":"auto"}},vCe={class:"filter-field mb-3"},pCe={class:"filter-field mb-3"},gCe={class:"d-flex justify-center mt-4 mb-2"},yCe={key:0,class:"d-flex justify-center"},_Ce={__name:"TrendsFilter",props:{modelValueDoctor:{type:String,default:null},modelValueFromDate:{type:String,default:""},availableDoctors:{type:Array,default:()=>[]},maxDate:{type:String,default:""},isLoading:{type:Boolean,default:!1}},emits:["update:modelValueDoctor","update:modelValueFromDate","show-trends","clear-filters"],setup(e,{emit:t}){const n=e,a=t,r=M(n.modelValueDoctor),s=M(n.modelValueFromDate);We(()=>n.modelValueDoctor,c=>{r.value=c}),We(()=>n.modelValueFromDate,c=>{s.value=c}),We(r,c=>{a("update:modelValueDoctor",c)}),We(s,c=>{a("update:modelValueFromDate",c)});const o=()=>{a("show-trends",{doctor:r.value,fromDate:s.value})},i=()=>{r.value=null,s.value="",a("clear-filters")};return(c,A)=>{const d=I("v-card-text"),f=I("v-card"),m=I("v-list-item"),h=I("v-select"),v=I("v-text-field"),y=I("v-btn");return R(),ve(f,{color:"surfaceContainer",flat:"",style:{height:"100%",display:"flex","flex-direction":"column"}},{default:u(()=>[l(f,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(d,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...A[2]||(A[2]=[p("span",{class:"text-body-2 font-weight-medium"},"Trends Analysis",-1)])]),_:1})]),_:1}),p("div",hCe,[p("div",vCe,[l(h,{modelValue:r.value,"onUpdate:modelValue":A[0]||(A[0]=g=>r.value=g),items:e.availableDoctors,"item-title":"doctorName","item-value":"doctorName",label:"Doctor (optional)",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input"},{item:u(({props:g,item:w})=>[l(m,Fe(g,{title:w.raw.doctorName}),{subtitle:u(()=>[O(q(w.raw.doctorSpecialization),1)]),_:2},1040,["title"])]),_:1},8,["modelValue","items"])]),p("div",pCe,[l(v,{modelValue:s.value,"onUpdate:modelValue":A[1]||(A[1]=g=>s.value=g),type:"date",label:"From Date (optional)",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input date-input",max:e.maxDate},null,8,["modelValue","max"])]),p("div",gCe,[l(y,{color:"primary",size:"small","prepend-icon":"mdi-chart-line",onClick:o,loading:e.isLoading,class:"filter-button"},{default:u(()=>[...A[3]||(A[3]=[O(" Show Trends ",-1)])]),_:1},8,["loading"])]),r.value||s.value?(R(),me("div",yCe,[l(y,{variant:"text",size:"small","prepend-icon":"mdi-filter-remove",onClick:i,class:"filter-button-clear"},{default:u(()=>[...A[4]||(A[4]=[O(" Clear ",-1)])]),_:1})])):_e("",!0)])]),_:1})}}},wCe=Xt(_Ce,[["__scopeId","data-v-950c9542"]]),Ph=""+new URL("images/search_here-_oFYQxGX.png",import.meta.url).href,bCe={class:"scrollable-content"},xCe={class:"scrollable-content"},CCe={class:"text-center"},SCe={class:"text-center"},ECe={class:"text-body-2 text-medium-emphasis mb-4"},BCe={class:"text-center"},kCe={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},TCe={key:0,class:"text-body-2 text-medium-emphasis ml-2",style:{"font-weight":"500"}},ICe={class:"d-flex align-center flex-wrap"},FCe={key:0,class:"text-body-2 text-medium-emphasis mr-3"},PCe={key:1,class:"text-body-2 text-medium-emphasis mr-3"},DCe={key:2,class:"text-body-2 text-medium-emphasis mr-3"},UCe={key:3,class:"text-body-2 text-medium-emphasis mr-3"},RCe={class:"scrollable-content"},NCe={class:"scrollable-content"},VCe={key:1},LCe={class:"text-center"},MCe={class:"text-center"},OCe={class:"text-center"},HCe={class:"text-body-2 text-medium-emphasis mb-4"},$Ce={class:"text-center"},QCe={key:4,class:"trends-scroll-container",style:{"overflow-y":"auto","max-height":"75vh"}},GCe={class:"text-h4"},zCe={class:"text-h4"},KCe={class:"text-h4"},WCe={class:"text-h4"},jCe={class:"chart-container"},qCe={class:"text-center"},YCe={class:"font-weight-medium"},XCe={class:"text-center"},JCe={class:"font-weight-medium"},ZCe={class:"d-flex justify-center"},eSe={__name:"patients-landing-page",setup(e){sCe();const{showSnackbar:t,showWarning:n}=ra(),a=ea(),r=M(0),s=Gh(),o=Zi(),i=M(s.params.id),c=M([]),A=M(""),d=M(""),f=M(""),m=M(null),h=M(!1),v=M(null),y=M(!1),g=M(null),w=ee(()=>Dn()),b=ee(()=>[{title:"Start Date",key:"startDate",sortable:!0,align:"center",width:"35%"},{title:"End Date",key:"endDate",sortable:!0,align:"center",width:"35%"},{title:"Appointments",key:"count",sortable:!0,align:"center",width:"30%"}]),x=ee(()=>{if(!Q.value.length)return[];const oe={};return Q.value.forEach(W=>{const de=new Date(W.appointmentDate),Ae=de.getFullYear(),Ce=E(de),De=`${Ae}-W${Ce.toString().padStart(2,"0")}`;oe[De]||(oe[De]={week:De,count:0,dates:[],year:Ae,weekNumber:Ce}),oe[De].count++,oe[De].dates.push(W.appointmentDate)}),Object.values(oe).map(W=>{const de=C(W.year,W.weekNumber),Ae=P(W.year,W.weekNumber);return{...W,startDate:de.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),endDate:Ae.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),dateRange:`${de.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${Ae.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`}}).sort((W,de)=>W.week.localeCompare(de.week))}),T=ee(()=>Q.value.length?new Set(Q.value.map(W=>W.patientId)).size:0),U=ee(()=>{if(!x.value.length)return 0;const oe=x.value.reduce((W,de)=>W+de.count,0);return Math.round(oe/x.value.length)}),k=ee(()=>x.value.length),S=ee(()=>a.getters["doctorModule/allDoctors"]||[]),E=oe=>{const W=new Date(oe.getFullYear(),0,1),de=W.getDay(),Ae=(oe-W)/(1440*60*1e3)+1;return Math.ceil((Ae+de-1)/7)},C=(oe,W)=>{const Ae=new Date(oe,0,1).getDay(),Ce=(W-1)*7-Ae+1;return new Date(oe,0,1+Ce)},P=(oe,W)=>{const de=C(oe,W);return new Date(de.getTime()+8640*60*1e3)},F=async()=>{if(!ie.value)try{ie.value=!0,le.value=null,ce.value=!0;const oe=await fhe(Z.value.selectedDoctor?.trim()||"",Z.value.fromDate||"");if(oe.error)throw new Error(`Failed to fetch trends data: ${oe.error.message||"Unknown error"}`);Q.value=Array.isArray(oe.data)?oe.data:[],t({message:`Loaded ${Q.value.length} completed appointments for trends analysis`,color:"success",timeout:3e3})}catch(oe){console.error("Error fetching trends data:",oe),le.value=oe.message||"Failed to load trends data",Q.value=[],t({message:le.value,color:"error",timeout:5e3})}finally{ie.value=!1}},N=()=>{try{Z.value.selectedDoctor=null,Z.value.fromDate="",le.value=null,ce.value=!1,Q.value=[],t({message:"Trends configuration cleared successfully",color:"success",timeout:3e3})}catch(oe){console.error("Error clearing trends configuration:",oe),m.value="Failed to clear trends configuration"}},L=async()=>{try{a.getters["doctorModule/isInitialized"]||await a.dispatch("doctorModule/initializeDoctors")}catch(oe){console.error("Error initializing doctors:",oe)}},ie=M(!1),le=M(null),Q=M([]),Z=M({selectedDoctor:null,fromDate:""}),ce=M(!1),J=M([{title:"List",disabled:!1},{title:"Trends",disabled:!1}]),se=async()=>{try{if(await o.isReady(),s.path==="/patients")return;await bn();let oe=0;for(;!s.params.id&&oe<3;)await bn(),await new Promise(W=>setTimeout(W,10)),oe++;if(!s.params.id){console.warn("Route params not ready after retries, skipping URL param extraction");return}if(i.value=s.params.id,!i.value)throw new Error("No user ID found in URL parameters")}catch(oe){console.error("Error extracting URL parameters:",oe),m.value="Invalid URL parameters"}},G=ee(()=>{try{return s.path!=="/patients"}catch(oe){return console.error("Error checking child route:",oe),!1}});ee(()=>s.query.from==="patients-landing-page"),cn(async()=>{try{s.path!=="/patients"?await se():(y.value=!0,D(),L())}catch(oe){console.error("Error on mount:",oe),m.value="Failed to initialize"}}),We(()=>s.path,async()=>{try{if(await o.isReady(),s.path==="/patients"){y.value=!0,D(),(m.value==="Invalid URL parameters"||m.value==="Navigation error occurred")&&(m.value=null);return}await bn(),await new Promise(oe=>setTimeout(oe,50)),s.path!=="/patients"&&await se()}catch(oe){console.error("Error on route change:",oe),s.path!=="/patients"&&(m.value="Navigation update failed")}}),We(()=>s.path,()=>{try{s.path!=="/patients"||m.value==="Navigation error occurred"&&(m.value=null)}catch(oe){console.error("Error in route validation:",oe),m.value="Navigation error occurred"}},{immediate:!1}),We(r,oe=>{try{oe===1&&L()}catch(W){console.error("Error handling tab change:",W)}});const D=async()=>{if(!h.value)try{h.value=!0,v.value=null;const oe=await the(A.value?.trim()||"",d.value?.trim()||"",f.value||"");if(oe.error)throw new Error(`Search failed: ${oe.error.message||"Unknown error"}`);c.value=Array.isArray(oe.data)?oe.data:[],y.value=!0,(A.value||d.value||f.value)&&t({message:`Found ${c.value.length} patient${c.value.length!==1?"s":""}`,color:"success",timeout:3e3})}catch(oe){console.error("Error fetching patients:",oe),v.value=oe.message||"Failed to search patients",c.value=[],y.value=!0,t({message:v.value,color:"error",timeout:5e3})}finally{h.value=!1}},j=()=>{v.value=null,D()},ne=()=>{try{A.value="",d.value="",f.value="",v.value=null,y.value=!0,D(),t({message:"Filters cleared successfully",color:"success",timeout:3e3})}catch(oe){console.error("Error clearing filters:",oe),m.value="Failed to clear filters"}},H=oe=>{oe.hasErrors||(y.value=!0,ae())},te=oe=>{oe.success?(t({message:oe.message||"Patient created successfully",color:"success",timeout:3e3}),D()):t({message:oe.message||"Error creating patient",color:"error",timeout:5e3})},Y=()=>{g.value&&g.value.openCreatePatientDialog()},K=oe=>{const{hasPermission:W}=Zh();if(!W("patients.details").value){n("You do not have permission to view patient details");return}if(!W("patients.details").value){n("You do not have permission to access consultation or procedure");return}try{if(!oe)throw new Error("Invalid patient ID");o.push({path:`/patients/${oe}`,query:{from:"patients-landing-page"}})}catch(Ce){console.error("Error navigating to patient:",Ce),t({message:"Failed to open patient details",color:"error",timeout:5e3})}};let X;const ae=()=>{clearTimeout(X),X=setTimeout(()=>{D()},500)};return We([A,d,f],()=>{y.value=!0,ae()}),(oe,W)=>{const de=I("v-alert"),Ae=I("v-tab"),Ce=I("v-tabs"),De=I("v-btn"),xe=I("v-card"),ke=I("v-col"),Ee=I("v-row"),ye=I("v-progress-circular"),we=I("v-icon"),at=I("v-card-text"),Je=I("v-empty-state"),rt=I("v-card-title"),it=I("v-tooltip"),Ie=I("v-lazy"),Ve=I("v-window-item"),ft=I("v-chip"),Ft=I("v-data-table"),tt=I("v-window"),Ge=I("router-view"),pt=I("v-main");return R(),ve(pt,null,{default:u(()=>[m.value?(R(),ve(de,{key:0,type:"error",dismissible:"","onClick:close":W[0]||(W[0]=ht=>m.value=null),class:"ma-3"},{default:u(()=>[O(q(m.value),1)]),_:1})):_e("",!0),G.value?(R(),ve(Ge,{key:2})):(R(),me(ze,{key:1},[l(Ee,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[l(ke,{cols:"12"},{default:u(()=>[l(xe,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center justify-space-between"},{default:u(()=>[l(Ce,{modelValue:r.value,"onUpdate:modelValue":W[1]||(W[1]=ht=>r.value=ht),color:"primary","align-tabs":"start",class:"flex-grow-1"},{default:u(()=>[(R(!0),me(ze,null,Wt(J.value,(ht,Nt)=>(R(),ve(Ae,{key:Nt,value:Nt,disabled:ht.disabled},{default:u(()=>[O(q(ht.title),1)]),_:2},1032,["value","disabled"]))),128))]),_:1},8,["modelValue"]),l(xn,{permission:"patients.create",class:"create-patient-btn"},{default:u(()=>[l(De,{color:"primary",variant:"flat","prepend-icon":"mdi-account-plus",onClick:Y,size:"small"},{default:u(()=>[...W[8]||(W[8]=[O(" Create Patient ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(tt,{modelValue:r.value,"onUpdate:modelValue":W[7]||(W[7]=ht=>r.value=ht),class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[l(Ve,{value:0,style:{height:"100%"}},{default:u(()=>[l(Ee,{"aria-label":"main row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[l(ke,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[p("div",bCe,[l(mCe,{ref_key:"patientFilterRef",ref:g,"model-value-name":A.value,"onUpdate:modelValueName":W[2]||(W[2]=ht=>A.value=ht),"model-value-phone":d.value,"onUpdate:modelValuePhone":W[3]||(W[3]=ht=>d.value=ht),"model-value-date":f.value,"onUpdate:modelValueDate":W[4]||(W[4]=ht=>f.value=ht),onFilterChange:H,onClearFilters:ne,onPatientCreated:te},null,8,["model-value-name","model-value-phone","model-value-date"])])]),_:1}),l(ke,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[p("div",xCe,[l(xe,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[h.value?(R(),ve(Ee,{key:0,"no-gutters":""},{default:u(()=>[l(ke,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[p("div",CCe,[l(ye,{indeterminate:"",color:"primary",size:"64"}),W[9]||(W[9]=p("div",{class:"mt-4 text-subtitle-1"},"Searching patients...",-1))])]),_:1})]),_:1})):v.value?(R(),ve(Ee,{key:1,"no-gutters":""},{default:u(()=>[l(ke,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[p("div",SCe,[l(we,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...W[10]||(W[10]=[O("mdi-alert-circle",-1)])]),_:1}),W[12]||(W[12]=p("div",{class:"text-h6 mb-2"},"Search Failed",-1)),p("div",ECe,q(v.value),1),l(De,{color:"primary",onClick:j,"prepend-icon":"mdi-refresh"},{default:u(()=>[...W[11]||(W[11]=[O(" Try Again ",-1)])]),_:1})])]),_:1})]),_:1})):c.value&&c.value.length===0&&y.value?(R(),me(ze,{key:2},[l(xe,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(at,{class:"pt-2 pb-0"},{default:u(()=>[...W[13]||(W[13]=[p("strong",null,"0",-1),O(" results found ",-1)])]),_:1})]),_:1}),l(Je,{image:Oe(Ph),class:"d-flex justify-center"},{title:u(()=>[...W[14]||(W[14]=[p("div",{class:"text-subtitle-2 mt-8 text-center"}," No Patients Found ",-1)])]),text:u(()=>[...W[15]||(W[15]=[p("div",{class:"text-caption text-center"}," Try adjusting your search criteria or clear filters to see all patients ",-1)])]),actions:u(()=>[l(De,{color:"primary",variant:"outlined",onClick:ne,"prepend-icon":"mdi-filter-remove"},{default:u(()=>[...W[16]||(W[16]=[O(" Clear Filters ",-1)])]),_:1})]),_:1},8,["image"])],64)):y.value?c.value&&c.value.length>0?(R(),me(ze,{key:4},[l(xe,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(at,{class:"pt-2 pb-0"},{default:u(()=>[p("strong",null,q(c.value.length),1),O(" result"+q(c.value.length!==1?"s":"")+" found ",1)]),_:1})]),_:1}),l(Ee,{"no-gutters":""},{default:u(()=>[l(ke,{cols:"12",class:"scroll-element mt-2",style:{"padding-bottom":"20px"}},{default:u(()=>[(R(!0),me(ze,null,Wt(c.value,ht=>(R(),ve(Ie,{key:ht?.id||Math.random(),options:{threshold:.1,rootMargin:"50px"},"min-height":"70"},{default:u(()=>[l(xn,{"any-permission":["patients.details"],tag:"div"},{default:u(()=>[ht?(R(),ve(xe,{key:0,style:Rt([{textAlign:"left"},{cursor:"pointer"}]),density:"compact",class:"mx-2 patient-card-spacing card-enhanced card-status-default card-hover-base",rounded:"lg",onClick:Nt=>K(ht.id)},{default:u(()=>[l(Ee,{"no-gutters":""},{default:u(()=>[l(ke,{cols:"12"},{default:u(()=>[l(rt,{class:"pb-0 pt-2"},{default:u(()=>[p("span",kCe,q(ht?.name||"Unknown Patient"),1),ht?.contactNumber?(R(),me("span",TCe," ("+q(ht.contactNumber)+") ",1)):_e("",!0)]),_:2},1024),l(at,{class:"pb-1"},{default:u(()=>[p("div",ICe,[ht?.id?(R(),me("span",FCe,[W[20]||(W[20]=p("strong",null,"ID:",-1)),O(" "+q(ht.id),1)])):_e("",!0),ht?.gender&&ht.gender!==""?(R(),me("span",PCe,[W[21]||(W[21]=p("strong",null,"Gender:",-1)),O(" "+q(ht.gender),1)])):_e("",!0),ht?.age&&ht.age!==""?(R(),me("span",DCe,[W[22]||(W[22]=p("strong",null,"Age:",-1)),O(" "+q(ht.age?`${ht.age} yrs`:""),1)])):_e("",!0),ht?.importID?(R(),me("span",UCe,[W[23]||(W[23]=p("strong",null,"Import ID:",-1)),O(" "+q(ht.importID),1)])):_e("",!0),ht?.isImported===!0||ht?.isImported===1?(R(),ve(it,{key:4,text:"Imported Patient"},{activator:u(({props:Nt})=>[l(we,Fe({size:"small",color:"info"},{ref_for:!0},Nt,{class:"ml-1"}),{default:u(()=>[...W[24]||(W[24]=[p("img",{src:nCe,alt:"Imported",style:{width:"16px",height:"16px",filter:"invert(0.5)"}},null,-1)])]),_:1},16)]),_:1})):_e("",!0)])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])):_e("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})],64)):_e("",!0):(R(),ve(Ee,{key:3,"no-gutters":""},{default:u(()=>[l(ke,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[p("div",BCe,[l(we,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...W[17]||(W[17]=[O("mdi-account-search",-1)])]),_:1}),W[18]||(W[18]=p("div",{class:"text-h6 mb-2"},"Search for Patients",-1)),W[19]||(W[19]=p("div",{class:"text-body-2 text-medium-emphasis"},"Use the filters on the left to find patients",-1))])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1})]),_:1}),l(Ve,{value:1,style:{height:"100%"}},{default:u(()=>[l(Ee,{"aria-label":"trends row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[l(ke,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[p("div",RCe,[l(wCe,{"model-value-doctor":Z.value.selectedDoctor,"onUpdate:modelValueDoctor":W[5]||(W[5]=ht=>Z.value.selectedDoctor=ht),"model-value-from-date":Z.value.fromDate,"onUpdate:modelValueFromDate":W[6]||(W[6]=ht=>Z.value.fromDate=ht),"available-doctors":S.value,"max-date":w.value,"is-loading":ie.value,onShowTrends:F,onClearFilters:N},null,8,["model-value-doctor","model-value-from-date","available-doctors","max-date","is-loading"])])]),_:1}),l(ke,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[p("div",NCe,[l(xe,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[l(xe,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(at,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[Q.value.length>0?(R(),me(ze,{key:0},[p("strong",null,q(Q.value.length),1),W[25]||(W[25]=O(" appointments analyzed ",-1))],64)):(R(),me("strong",VCe,"Trends Analysis"))]),_:1})]),_:1}),ce.value?ie.value?(R(),ve(Ee,{key:1,"no-gutters":""},{default:u(()=>[l(ke,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[p("div",MCe,[l(ye,{indeterminate:"",color:"primary",size:"64"}),W[30]||(W[30]=p("div",{class:"mt-4 text-subtitle-1"},"Loading trends data...",-1))])]),_:1})]),_:1})):le.value?(R(),ve(Ee,{key:2,"no-gutters":""},{default:u(()=>[l(ke,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[p("div",OCe,[l(we,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...W[31]||(W[31]=[O("mdi-alert-circle",-1)])]),_:1}),W[33]||(W[33]=p("div",{class:"text-h6 mb-2"},"Failed to Load Trends",-1)),p("div",HCe,q(le.value),1),l(De,{color:"primary",onClick:F,"prepend-icon":"mdi-refresh"},{default:u(()=>[...W[32]||(W[32]=[O(" Try Again ",-1)])]),_:1})])]),_:1})]),_:1})):Q.value.length===0&&ce.value?(R(),ve(Ee,{key:3,"no-gutters":""},{default:u(()=>[l(ke,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[p("div",$Ce,[l(we,{size:"64",color:"warning",class:"mb-4"},{default:u(()=>[...W[34]||(W[34]=[O("mdi-chart-line-variant",-1)])]),_:1}),W[36]||(W[36]=p("div",{class:"text-h6 mb-2"},"No Trends Data",-1)),W[37]||(W[37]=p("div",{class:"text-body-2 text-medium-emphasis mb-4"}," No completed appointments found for the selected criteria ",-1)),l(De,{color:"primary",variant:"outlined",onClick:N,"prepend-icon":"mdi-refresh"},{default:u(()=>[...W[35]||(W[35]=[O(" Clear Configuration ",-1)])]),_:1})])]),_:1})]),_:1})):Q.value.length>0?(R(),me("div",QCe,[l(at,{class:"pt-3"},{default:u(()=>[l(Ee,{class:"mb-4"},{default:u(()=>[l(ke,{cols:"3"},{default:u(()=>[l(xe,{color:"primary",variant:"tonal"},{default:u(()=>[l(at,{class:"text-center"},{default:u(()=>[p("div",GCe,q(Q.value.length),1),W[38]||(W[38]=p("div",{class:"text-caption"},"Total Appointments",-1))]),_:1})]),_:1})]),_:1}),l(ke,{cols:"3"},{default:u(()=>[l(xe,{color:"success",variant:"tonal"},{default:u(()=>[l(at,{class:"text-center"},{default:u(()=>[p("div",zCe,q(T.value),1),W[39]||(W[39]=p("div",{class:"text-caption"},"Unique Patients",-1))]),_:1})]),_:1})]),_:1}),l(ke,{cols:"3"},{default:u(()=>[l(xe,{color:"info",variant:"tonal"},{default:u(()=>[l(at,{class:"text-center"},{default:u(()=>[p("div",KCe,q(U.value),1),W[40]||(W[40]=p("div",{class:"text-caption"},"Weekly Average",-1))]),_:1})]),_:1})]),_:1}),l(ke,{cols:"3"},{default:u(()=>[l(xe,{color:"warning",variant:"tonal"},{default:u(()=>[l(at,{class:"text-center"},{default:u(()=>[p("div",WCe,q(k.value),1),W[41]||(W[41]=p("div",{class:"text-caption"},"Weeks of Data",-1))]),_:1})]),_:1})]),_:1})]),_:1}),p("div",jCe,[l(Ft,{headers:b.value,items:x.value,"items-per-page":10,class:"elevation-1 trends-table",density:"comfortable","fixed-header":""},{"item.startDate":u(({item:ht})=>[p("div",qCe,[p("span",YCe,q(ht.startDate),1)])]),"item.endDate":u(({item:ht})=>[p("div",XCe,[p("span",JCe,q(ht.endDate),1)])]),"item.count":u(({item:ht})=>[p("div",ZCe,[l(ft,{color:"primary",size:"small"},{default:u(()=>[O(q(ht.count),1)]),_:2},1024)])]),_:2},1032,["headers","items"])])]),_:1})])):_e("",!0):(R(),ve(Ee,{key:0,"no-gutters":""},{default:u(()=>[l(ke,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[p("div",LCe,[l(we,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...W[26]||(W[26]=[O("mdi-chart-line-variant",-1)])]),_:1}),W[28]||(W[28]=p("div",{class:"text-h6 mb-2"},"Ready to Analyze Trends",-1)),W[29]||(W[29]=p("div",{class:"text-body-2 text-medium-emphasis mb-4"},' Configure your analysis settings and click "Show Trends" to view appointment trends ',-1)),l(De,{color:"primary",variant:"outlined",onClick:F,"prepend-icon":"mdi-chart-line"},{default:u(()=>[...W[27]||(W[27]=[O(" Show All Trends ",-1)])]),_:1})])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))]),_:1})}}},tSe=Xt(eSe,[["__scopeId","data-v-68278ac9"]]),nSe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,21H8V7H19M19,5H8A2,2%200%200,0%206,7V21A2,2%200%200,0%208,23H19A2,2%200%200,0%2021,21V7A2,2%200%200,0%2019,5M16,1H4A2,2%200%200,0%202,3V17H4V3H16V1Z'%20/%3e%3c/svg%3e",FE="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17,9H7V7H17M17,13H7V11H17M14,17H7V15H14M12,3A1,1%200%200,1%2013,4A1,1%200%200,1%2012,5A1,1%200%200,1%2011,4A1,1%200%200,1%2012,3M19,3H14.82C14.4,1.84%2013.3,1%2012,1C10.7,1%209.6,1.84%209.18,3H5A2,2%200%200,0%203,5V19A2,2%200%200,0%205,21H19A2,2%200%200,0%2021,19V5A2,2%200%200,0%2019,3Z'%20/%3e%3c/svg%3e",aSe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,3H14.82C14.4,1.84%2013.3,1%2012,1C10.7,1%209.6,1.84%209.18,3H5A2,2%200%200,0%203,5V19A2,2%200%200,0%205,21H19A2,2%200%200,0%2021,19V5A2,2%200%200,0%2019,3M12,3A1,1%200%200,1%2013,4A1,1%200%200,1%2012,5A1,1%200%200,1%2011,4A1,1%200%200,1%2012,3M5,13.46H7.17L10.5,7.08L11.44,14.05L13.93,10.86L16.53,13.46H19V15H15.89L14.07,13.21L10.38,17.92L9.62,12.15L8.11,15H5V13.46Z'%20/%3e%3c/svg%3e",rSe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='currentColor'%20d='M16,11.78L20.24,4.45L21.97,5.45L16.74,14.5L10.23,10.75L5.46,19H22V21H2V3H4V17.54L9.5,8L16,11.78Z'%20/%3e%3c/svg%3e",fH="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M14%202H6C4.89%202%204%202.89%204%204V20C4%2021.11%204.89%2022%206%2022H13.81C13.28%2021.09%2013%2020.05%2013%2019C13%2018.67%2013.03%2018.33%2013.08%2018H6V16H13.81C14.27%2015.2%2014.91%2014.5%2015.68%2014H6V12H18V13.08C18.33%2013.03%2018.67%2013%2019%2013S19.67%2013.03%2020%2013.08V8L14%202M13%209V3.5L18.5%209H13M18%2015V18H15V20H18V23H20V20H23V18H20V15H18Z'%20/%3e%3c/svg%3e",PE="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z'%20/%3e%3c/svg%3e",Md="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M4,6H20V16H4M20,18A2,2%200%200,0%2022,16V6C22,4.89%2021.1,4%2020,4H4C2.89,4%202,4.89%202,6V16A2,2%200%200,0%204,18H0V20H24V18H20Z'%20/%3e%3c/svg%3e",iv="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M6,19A5,5%200%200,1%201,14A5,5%200%200,1%206,9C7,6.65%209.3,5%2012,5C15.43,5%2018.24,7.66%2018.5,11.03L19,11A4,4%200%200,1%2023,15A4,4%200%200,1%2019,19H6M19,13H17V12A5,5%200%200,0%2012,7C9.5,7%207.45,8.82%207.06,11.19C6.73,11.07%206.37,11%206,11A3,3%200%200,0%203,14A3,3%200%200,0%206,17H19A2,2%200%200,0%2021,15A2,2%200%200,0%2019,13Z'%20/%3e%3c/svg%3e",sSe=async e=>{try{return{data:(await dt.post("/diagnosis/",e)).data.data.new_diagnosis,error:null}}catch(t){return console.error("There was an error creating patients:",t?.response||t),{data:[],error:t}}},oSe=async e=>{try{return await dt.put("/diagnosis/",e),{error:null}}catch(t){return console.error("Error updating diagnosis:",t),{error:t}}},mH=async e=>{try{return{data:(await dt.post("/medicine/medicines",e)).data.data.id_mapping,error:null}}catch(t){return console.error("Error adding medicine:",t),{data:[],error:t}}},hH=async(e,t)=>{try{return{data:(await dt.post(`/dosages?doctor_id=${t}`,e)).data.data.id_mapping,error:null}}catch(n){return console.error("Error creating dosage:",n),{data:null,error:n}}},vH=async(e,t)=>{try{return await dt.post(`/consultation/consultation_medicines/${e}`,t),{error:null}}catch(n){return console.error("Error updating consultation:",n),{error:n}}},yT=async e=>{try{return{data:(await dt.post("/medicine/",e)).data.data.newMedicine,error:null}}catch(t){return console.error("Error adding medicine:",t),{data:[],error:t}}},n2=async(e,t)=>{try{return await dt.post(`/diagnosis/diagnosis_medicines/${e}`,t),{error:null}}catch(n){return console.error("Error adding diagnosis medicine mapping:",n),{error:n}}},pH=async e=>{try{return{data:(await dt.get(`/medicine/diagnosis_medicines/${e.id}`)).data.data.medicines,error:null}}catch(t){return console.error("Error adding diagnosis medicine mapping:",t),{data:[],error:t}}},gH=async(e,t,n={})=>{try{const a=n.skipMessages?{headers:{"X-Skip-Messages":"true"}}:{};return{data:(await dt.get(`/medicine/dosage/${e.id}?doctor_id=${t}`,a)).data.data.dosages,error:null,errorMessage:null}}catch(a){if(console.error("Error fetching dosages:",a),a.response?.status===404){const r=a.response?.data?.error||null;return{data:[],error:null,errorMessage:r}}return{data:[],error:a,errorMessage:null}}},_T=async(e,t=!1)=>{try{const n=t?{include_pharmacy_details:!0}:{};return{data:(await dt.get(`/medicine/search_medicines/${e}`,{params:n})).data.data.medicines,error:null}}catch(n){return console.error("Error fetching medicines:",n),n.response?.status===404?{data:[],error:null}:{data:[],error:n}}},yH=async(e,t)=>{try{return{data:(await dt.put(`/medicine/${e}`,t)).data.data,error:null}}catch(n){return console.error("Error updating medicine:",n),{data:null,error:n}}},_H=Object.freeze(Object.defineProperty({__proto__:null,createDiagnosisMedicines:n2,createDosages:hH,createMedicines:mH,createNewMedicine:yT,getDiagnosisMedicines:pH,getDosages:gH,saveConsultationMedicines:vH,searchMedicines:_T,updateMedicine:yH},Symbol.toStringTag,{value:"Module"})),iSe={__name:"create-diagnosis-template",props:{medicineList:{type:Array,default:()=>[]},diagnosis:{type:String,default:""},patientNotes:{type:String,default:""},investigations:{type:String,default:""},doctorId:{type:[String,Number],required:!0}},emits:["close","update&close"],setup(e,{emit:t}){const n=e,a=t,r=M(n.diagnosis),s=M(n.patientNotes),o=M(n.investigations),i=M(!1),c=M(!1),A=M([]),d=M(""),f=M(null),m=ee(()=>n.medicineList.filter(g=>g.isLocal&&g.productName&&g.id!==void 0&&g.id!==null)),h=()=>{f.value&&f.value.abort(),a("close")},v=(g,w)=>{if(w)A.value.includes(g.id)||A.value.push(g.id),console.log("Medicine selected:",g.productName);else{const b=A.value.indexOf(g.id);b>-1&&A.value.splice(b,1),console.log("Medicine deselected:",g.productName)}d.value=""},y=async()=>{c.value=!0,d.value="",f.value=new AbortController;const g=n.medicineList.filter(b=>A.value.includes(b.id)),w={diagnosisName:r.value,instructions:s.value,investigations:o.value,isBookmark:1,isCreatedByUser:1,isImportedFromServer:0,doctor_id:n.doctorId};console.log("Creating new diagnosis:",w);try{const b=await sSe(w);if(f.value?.signal.aborted)return;if(b.error)d.value="Failed to create diagnosis template. Please try again.",console.error("Error creating diagnosis:",b.error);else{w.id=b.data.id;const x=await n2(w.id,g);if(f.value?.signal.aborted)return;if(x.error){d.value="Diagnosis created but failed to associate medicines. Please try editing the template to add medicines.",console.error("Error creating diagnosis medicines:",x.error);return}console.log("Diagnosis template created successfully"),a("update&close")}}catch(b){f.value?.signal.aborted||(d.value="An unexpected error occurred. Please try again.",console.error("Error creating diagnosis template:",b))}finally{f.value?.signal.aborted||(c.value=!1),f.value=null}};return la(()=>{f.value&&f.value.abort()}),(g,w)=>{const b=I("v-card-title"),x=I("v-col"),T=I("v-icon"),U=I("v-btn"),k=I("v-row"),S=I("v-card"),E=I("v-text-field"),C=I("v-textarea"),P=I("v-divider"),F=I("v-card-subtitle"),N=I("v-checkbox"),L=I("v-tooltip"),ie=I("v-chip"),le=I("v-card-text"),Q=I("v-alert"),Z=I("v-form");return R(),ve(S,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(k,{"no-gutters":""},{default:u(()=>[l(x,{cols:"12"},{default:u(()=>[l(S,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(k,{"no-gutters":""},{default:u(()=>[l(x,{cols:"11"},{default:u(()=>[l(b,{class:"pa-0 pl-2"},{default:u(()=>[...w[4]||(w[4]=[O("Create Diagnosis Template",-1)])]),_:1})]),_:1}),l(x,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(U,{icon:"",size:"x-small",onClick:h},{default:u(()=>[l(T,null,{default:u(()=>[...w[5]||(w[5]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(k,{"no-gutters":""},{default:u(()=>[l(x,{cols:"12"},{default:u(()=>[l(S,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(Z,{modelValue:i.value,"onUpdate:modelValue":w[3]||(w[3]=ce=>i.value=ce),"validate-on":"blur"},{default:u(()=>[l(k,{"no-gutters":""},{default:u(()=>[l(x,{cols:"12"},{default:u(()=>[l(E,{label:"Diagnosis Name *",density:"compact",modelValue:r.value,"onUpdate:modelValue":w[0]||(w[0]=ce=>r.value=ce),rules:Oe(sr)},null,8,["modelValue","rules"])]),_:1}),l(x,{cols:"12"},{default:u(()=>[l(C,{label:"Instructions",density:"compact",modelValue:s.value,"onUpdate:modelValue":w[1]||(w[1]=ce=>s.value=ce),rows:"2","auto-grow":""},null,8,["modelValue"])]),_:1}),l(x,{cols:"12"},{default:u(()=>[l(C,{label:"Investigations",density:"compact",modelValue:o.value,"onUpdate:modelValue":w[2]||(w[2]=ce=>o.value=ce),rows:"1","auto-grow":""},null,8,["modelValue"])]),_:1})]),_:1}),l(k,{"no-gutters":""},{default:u(()=>[l(x,{cols:"12"},{default:u(()=>[l(P,{class:"my-3"},{default:u(()=>[...w[6]||(w[6]=[O("Medicines",-1)])]),_:1}),m.value.length>0?(R(),ve(S,{key:0,variant:"outlined"},{default:u(()=>[l(F,{class:"pb-2"},{default:u(()=>[...w[7]||(w[7]=[O("Available Medicines (from current consultation):",-1)])]),_:1}),l(le,null,{default:u(()=>[(R(!0),me(ze,null,Wt(m.value,ce=>(R(),ve(S,{key:`available-${ce.id}`,flat:""},{default:u(()=>[l(k,{"no-gutters":""},{default:u(()=>[l(x,{cols:"5",class:"d-flex align-center justify-start"},{default:u(()=>[l(N,{"model-value":A.value.includes(ce.id),color:"primary",density:"compact","hide-details":"","onUpdate:modelValue":J=>v(ce,J)},null,8,["model-value","onUpdate:modelValue"]),l(ie,{color:"primary","text-color":"black",size:"small",class:"ml-2"},hh({default:u(()=>[p("strong",null,q(ce.productName),1)]),_:2},[ce.isLocal?{name:"append",fn:u(()=>[l(L,{text:"Saved Medicine"},{activator:u(({props:J})=>[l(T,Fe({size:"small"},{ref_for:!0},J,{class:"ml-1"}),{default:u(()=>[...w[8]||(w[8]=[p("img",{src:Md,alt:"Saved Medicine"},null,-1)])]),_:1},16)]),_:1})]),key:"0"}:{name:"append",fn:u(()=>[l(L,{text:"External Medicine"},{activator:u(({props:J})=>[l(T,Fe({size:"small"},{ref_for:!0},J,{class:"ml-1"}),{default:u(()=>[...w[9]||(w[9]=[p("img",{src:iv,alt:"External Medicine"},null,-1)])]),_:1},16)]),_:1})]),key:"1"}]),1024)]),_:2},1024),l(x,{cols:"7",class:"d-flex align-center justify-start"},{default:u(()=>[l(F,null,{default:u(()=>[O(q(ce.saltComposition),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):(R(),ve(Q,{key:1,type:"info",variant:"outlined"},{default:u(()=>[...w[10]||(w[10]=[O(" No medicines available from current consultation to add to template. ",-1)])]),_:1})),d.value?(R(),ve(Q,{key:2,type:"error",variant:"outlined",class:"mt-3"},{default:u(()=>[O(q(d.value),1)]),_:1})):_e("",!0)]),_:1})]),_:1}),l(P),l(k,{"no-gutters":""},{default:u(()=>[l(x,{cols:"2"}),l(x,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(U,{variant:"outlined",onClick:y,disabled:!i.value,loading:c.value},{default:u(()=>[...w[11]||(w[11]=[O(" Create ",-1)])]),_:1},8,["disabled","loading"])]),_:1}),l(x,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},lSe=Xt(iSe,[["__scopeId","data-v-92535624"]]),uSe={__name:"edit-diagnosis-template",props:{medicineList:{type:Array,required:!0},selectedDiagnosis:{type:Object,default:null}},emits:["close","update&close"],setup(e,{emit:t}){const n=e,a=t,r=M(null),s=M({}),o=M([]),i=M(!1),c=M(!1),A=M([]),d=M(!1),f=M(""),m=M(null);We(()=>n.medicineList,()=>{h()},{deep:!0});const h=()=>{const x=o.value.map(T=>T.id);A.value=n.medicineList.filter(T=>T.isLocal&&T.id!==void 0&&T.id!==null&&!x.includes(T.id)).map(T=>({...T,isSelected:!1,_uniqueKey:`available_${T.id}`}))};cn(async()=>{n.selectedDiagnosis?(r.value=n.selectedDiagnosis,await v(n.selectedDiagnosis)):h()});const v=async x=>{if(!x){s.value={},o.value=[],h();return}s.value=Hn.cloneDeep(x),d.value=!0,f.value="";try{const T=await pH(x);o.value=(T.data||[]).map(U=>({...U,isSelected:!0,_uniqueKey:`template_${U.id}`})),console.log("Template medicines fetched:",o.value),h()}catch(T){console.error("Error fetching template medicines:",T),f.value="Failed to load template medicines. Please try again.",o.value=[],h()}finally{d.value=!1}},y=x=>{console.log("Medicine selection changed:",x.productName,x.isSelected)},g=x=>{console.log("Template medicine selection changed:",x.productName,x.isSelected)},w=async()=>{if(!(!r.value||!c.value)){i.value=!0;try{const x=await oSe(s.value);if(x.error){console.error("Error updating diagnosis:",x.error);return}const T=o.value.filter(S=>S.isSelected),U=A.value.filter(S=>S.isSelected),k=[...T,...U];if(k.length>0){const S=await n2(r.value.id,k);if(S.error){console.error("Error updating diagnosis medicines:",S.error);return}}else{const S=await n2(r.value.id,[]);if(S.error){console.error("Error clearing diagnosis medicines:",S.error);return}}console.log("Template updated successfully"),a("update&close")}catch(x){console.error("Error updating template:",x)}finally{i.value=!1}}},b=()=>{m.value&&m.value.abort(),a("close")};return la(()=>{m.value&&m.value.abort()}),(x,T)=>{const U=I("v-card-title"),k=I("v-col"),S=I("v-icon"),E=I("v-btn"),C=I("v-row"),P=I("v-card"),F=I("v-text-field"),N=I("v-textarea"),L=I("v-divider"),ie=I("v-card-subtitle"),le=I("v-progress-linear"),Q=I("v-card-text"),Z=I("v-checkbox"),ce=I("v-tooltip"),J=I("v-chip"),se=I("v-alert"),G=I("v-form");return R(),ve(P,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(C,{"no-gutters":""},{default:u(()=>[l(k,{cols:"12"},{default:u(()=>[l(P,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(C,{"no-gutters":""},{default:u(()=>[l(k,{cols:"11"},{default:u(()=>[l(U,{class:"pa-0 pl-2"},{default:u(()=>[...T[4]||(T[4]=[O("Edit Diagnosis Template",-1)])]),_:1})]),_:1}),l(k,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(E,{icon:"",size:"x-small",onClick:b},{default:u(()=>[l(S,null,{default:u(()=>[...T[5]||(T[5]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(C,{"no-gutters":""},{default:u(()=>[l(k,{cols:"12"},{default:u(()=>[l(P,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(G,{modelValue:c.value,"onUpdate:modelValue":T[3]||(T[3]=D=>c.value=D),"validate-on":"blur"},{default:u(()=>[l(C,{"no-gutters":""},{default:u(()=>[r.value?(R(),me(ze,{key:0},[l(k,{cols:"12"},{default:u(()=>[l(F,{label:"Diagnosis Name *",density:"compact",modelValue:s.value.diagnosisName,"onUpdate:modelValue":T[0]||(T[0]=D=>s.value.diagnosisName=D),rules:Oe(sr)},null,8,["modelValue","rules"])]),_:1}),l(k,{cols:"12"},{default:u(()=>[l(N,{label:"Instructions",density:"compact",rows:"2","auto-grow":"",modelValue:s.value.instructions,"onUpdate:modelValue":T[1]||(T[1]=D=>s.value.instructions=D)},null,8,["modelValue"])]),_:1}),l(k,{cols:"12"},{default:u(()=>[l(N,{label:"Investigations",density:"compact",modelValue:s.value.investigations,"onUpdate:modelValue":T[2]||(T[2]=D=>s.value.investigations=D),rows:"1","auto-grow":""},null,8,["modelValue"])]),_:1}),l(k,{cols:"12"},{default:u(()=>[l(L,{class:"my-3"},{default:u(()=>[...T[6]||(T[6]=[O("Medicines",-1)])]),_:1}),d.value?(R(),ve(P,{key:0,variant:"outlined",class:"mb-3"},{default:u(()=>[l(ie,{class:"pb-2"},{default:u(()=>[...T[7]||(T[7]=[O("Loading template medicines...",-1)])]),_:1}),l(Q,null,{default:u(()=>[l(le,{indeterminate:""})]),_:1})]),_:1})):o.value.length>0?(R(),ve(P,{key:1,variant:"outlined",class:"mb-3"},{default:u(()=>[l(ie,{class:"pb-2"},{default:u(()=>[...T[8]||(T[8]=[O("Current Template Medicines:",-1)])]),_:1}),l(Q,null,{default:u(()=>[(R(!0),me(ze,null,Wt(o.value,D=>(R(),ve(P,{key:D._uniqueKey||`template-${D.id}`,flat:""},{default:u(()=>[l(C,{"no-gutters":""},{default:u(()=>[l(k,{cols:"5",class:"d-flex align-center justify-start"},{default:u(()=>[l(Z,{modelValue:D.isSelected,"onUpdate:modelValue":j=>D.isSelected=j,color:"primary",density:"compact","hide-details":"",onChange:j=>g(D)},null,8,["modelValue","onUpdate:modelValue","onChange"]),l(J,{color:"primary","text-color":"black",size:"small",class:"ml-2"},{append:u(()=>[l(ce,{text:"Saved Medicine"},{activator:u(({props:j})=>[l(S,Fe({size:"small"},{ref_for:!0},j,{class:"ml-1"}),{default:u(()=>[...T[9]||(T[9]=[p("img",{src:Md,alt:"Saved Medicine"},null,-1)])]),_:1},16)]),_:1})]),default:u(()=>[p("strong",null,q(D.productName),1)]),_:2},1024)]),_:2},1024),l(k,{cols:"7",class:"d-flex align-center justify-start"},{default:u(()=>[l(ie,null,{default:u(()=>[O(q(D.saltComposition),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):_e("",!0),A.value.length>0?(R(),ve(P,{key:2,variant:"outlined"},{default:u(()=>[l(ie,{class:"pb-2"},{default:u(()=>[...T[10]||(T[10]=[O("Available Medicines (from current consultation):",-1)])]),_:1}),l(Q,null,{default:u(()=>[(R(!0),me(ze,null,Wt(A.value,D=>(R(),ve(P,{key:D._uniqueKey||`available-${D.id}`,flat:""},{default:u(()=>[l(C,{"no-gutters":""},{default:u(()=>[l(k,{cols:"5",class:"d-flex align-center justify-start"},{default:u(()=>[l(Z,{modelValue:D.isSelected,"onUpdate:modelValue":j=>D.isSelected=j,color:"primary",density:"compact","hide-details":"",onChange:j=>y(D)},null,8,["modelValue","onUpdate:modelValue","onChange"]),l(J,{color:"primary","text-color":"black",size:"small",class:"ml-2"},hh({default:u(()=>[p("strong",null,q(D.productName),1)]),_:2},[D.isLocal?{name:"append",fn:u(()=>[l(ce,{text:"Saved Medicine"},{activator:u(({props:j})=>[l(S,Fe({size:"small"},{ref_for:!0},j,{class:"ml-1"}),{default:u(()=>[...T[11]||(T[11]=[p("img",{src:Md,alt:"Saved Medicine"},null,-1)])]),_:1},16)]),_:1})]),key:"0"}:{name:"append",fn:u(()=>[l(ce,{text:"External Medicine"},{activator:u(({props:j})=>[l(S,Fe({size:"small"},{ref_for:!0},j,{class:"ml-1"}),{default:u(()=>[...T[12]||(T[12]=[p("img",{src:iv,alt:"External Medicine"},null,-1)])]),_:1},16)]),_:1})]),key:"1"}]),1024)]),_:2},1024),l(k,{cols:"7",class:"d-flex align-center justify-start"},{default:u(()=>[l(ie,null,{default:u(()=>[O(q(D.saltComposition),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):(R(),ve(se,{key:3,type:"info",variant:"outlined"},{default:u(()=>[...T[13]||(T[13]=[O(" No medicines available from current consultation to add to template. ",-1)])]),_:1})),f.value?(R(),ve(se,{key:4,type:"error",variant:"outlined",class:"mt-3"},{default:u(()=>[O(q(f.value),1)]),_:1})):_e("",!0)]),_:1})],64)):(R(),ve(k,{key:1,cols:"12"},{default:u(()=>[l(se,{type:"info",variant:"outlined"},{default:u(()=>[...T[14]||(T[14]=[O(" No diagnosis template selected for editing. ",-1)])]),_:1})]),_:1}))]),_:1}),l(L),l(C,{"no-gutters":""},{default:u(()=>[l(k,{cols:"2"}),l(k,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(E,{variant:"outlined",onClick:w,disabled:!c.value||!r.value,loading:i.value},{default:u(()=>[...T[15]||(T[15]=[O(" Update ",-1)])]),_:1},8,["disabled","loading"])]),_:1}),l(k,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},cSe=Xt(uSe,[["__scopeId","data-v-217bbc0c"]]),dSe={class:"diagnosis-name-truncate"},ASe={__name:"search-diagnosis",props:{modelValue:{type:String,default:""},doctorId:{type:[String,Number],required:!0}},emits:["update:modelValue","diagnosisSelected"],setup(e,{emit:t}){const n=e,a=t,r=M(!1),s=M([]),o=M(""),i=M(""),c=M(!1);let A=null;const d=h=>{o.value=h};We(i,h=>{typeof h=="string"?(a("update:modelValue",h),a("diagnosisSelected",{diagnosisName:h,isUserTyped:!0,isFromHistory:!1})):h&&typeof h=="object"?(a("update:modelValue",h.diagnosisName),a("diagnosisSelected",h)):h||(a("update:modelValue",""),a("diagnosisSelected",null))}),We(o,h=>{if(A&&clearTimeout(A),c.value=!1,!h||h.length<1){r.value=!1,s.value=[];return}A=setTimeout(()=>{f(h)},300)}),We(()=>n.modelValue,h=>{h!==i.value&&(i.value=h)},{immediate:!0});const f=async h=>{if(!(!h||h.length<1)){r.value=!0,c.value=!1;try{const v=await dt.get(`diagnosis/search_diagnosis/${h}`,{params:{doctor_id:n.doctorId}});s.value=v.data.data.diagnosis,(!s.value||s.value.length===0)&&(c.value=!0)}catch(v){console.error("Error fetching diagnosis:",v),c.value=!0}finally{r.value=!1}}},m=ee(()=>!o.value||o.value.length<1?"Start typing to search consultation history, or type custom diagnosis":r.value?"Searching consultation history and external sources...":c.value?"No matches found in consultation history or external sources. You can still type custom diagnosis.":"");return(h,v)=>{const y=I("v-icon"),g=I("v-tooltip"),w=I("v-list-item"),b=I("v-card-subtitle"),x=I("v-card"),T=I("v-combobox");return R(),ve(T,{modelValue:i.value,"onUpdate:modelValue":v[0]||(v[0]=U=>i.value=U),items:s.value,search:o.value,"onUpdate:search":d,"item-title":"diagnosisName","item-value":"diagnosisName",label:"Diagnosis - search history or type directly",placeholder:"Type diagnosis or search consultation history...",variant:"underlined",loading:r.value,"no-data-text":m.value,clearable:"","hide-no-data":"","auto-select-first":"",density:"compact",class:"diagnosis-combobox"},{item:u(({props:U,item:k})=>[l(w,Fe(U,{density:"compact"}),{title:u(()=>[p("span",dSe,q(k.raw.diagnosisName),1)]),append:u(()=>[l(g,{location:"top"},{activator:u(({props:S})=>[l(y,Fe(S,{size:"small"}),{default:u(()=>[k.raw.isFromHistory?(R(),ve(y,{key:0,icon:"mdi-history",color:"primary"})):(R(),ve(y,{key:1,icon:"mdi-cloud",color:"secondary"}))]),_:2},1040)]),default:u(()=>[p("span",null,q(k.raw.isFromHistory?"From your consultation history":"External suggestion"),1)]),_:2},1024)]),_:2},1040)]),"no-data":u(()=>[l(x,{flat:"",class:"pa-4 text-center"},{default:u(()=>[l(b,null,{default:u(()=>[O(q(m.value),1)]),_:1})]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},fSe=Xt(ASe,[["__scopeId","data-v-18a25720"]]),mSe={class:"investigation-name-truncate"},hSe={__name:"search-investigation",props:{modelValue:{type:String,default:""},doctorId:{type:[String,Number],required:!0}},emits:["update:modelValue","investigationSelected"],setup(e,{emit:t}){const n=e,a=t,r=M(!1),s=M([]),o=M(""),i=M(""),c=M(!1);let A=null;const d=h=>{o.value=h};We(i,h=>{typeof h=="string"?(a("update:modelValue",h),a("investigationSelected",{investigationName:h,isUserTyped:!0,isFromHistory:!1})):h&&typeof h=="object"?(a("update:modelValue",h.investigationName),a("investigationSelected",h)):h||(a("update:modelValue",""),a("investigationSelected",null))}),We(o,h=>{if(A&&clearTimeout(A),c.value=!1,!h||h.length<1){r.value=!1,s.value=[];return}A=setTimeout(()=>{f(h)},300)}),We(()=>n.modelValue,h=>{h!==i.value&&(i.value=h)},{immediate:!0});const f=async h=>{if(!(!h||h.length<1)){r.value=!0,c.value=!1;try{const v=await dt.get(`consultation/search_investigations/${h}`,{params:{doctor_id:n.doctorId}});s.value=v.data.data.investigations.filter(y=>y.investigationName&&y.investigationName.trim().length>0),(!s.value||s.value.length===0)&&(c.value=!0)}catch(v){console.error("Error fetching investigations:",v),c.value=!0}finally{r.value=!1}}},m=ee(()=>!o.value||o.value.length<1?"Start typing to search consultation history, or type custom investigations":r.value?"Searching consultation history...":c.value?"No matches found in consultation history. You can still type custom investigations.":"");return(h,v)=>{const y=I("v-icon"),g=I("v-tooltip"),w=I("v-list-item"),b=I("v-card-subtitle"),x=I("v-card"),T=I("v-combobox");return R(),ve(T,{modelValue:i.value,"onUpdate:modelValue":v[0]||(v[0]=U=>i.value=U),items:s.value,search:o.value,"onUpdate:search":d,"item-title":"investigationName","item-value":"investigationName",label:"Investigations - search history or type directly",placeholder:"Type investigations or search consultation history...",variant:"underlined",loading:r.value,"no-data-text":m.value,clearable:"","hide-no-data":"","auto-select-first":"",density:"compact",class:"investigation-combobox"},{item:u(({props:U,item:k})=>[l(w,Fe(U,{density:"compact"}),{title:u(()=>[p("span",mSe,q(k.raw.investigationName),1)]),append:u(()=>[l(g,{location:"top"},{activator:u(({props:S})=>[l(y,Fe(S,{size:"small"}),{default:u(()=>[k.raw.isFromHistory?(R(),ve(y,{key:0,icon:"mdi-history",color:"primary"})):_e("",!0)]),_:2},1040)]),default:u(()=>[p("span",null,q(k.raw.isFromHistory?"From your consultation history":"Custom investigation"),1)]),_:2},1024)]),_:2},1040)]),"no-data":u(()=>[l(x,{flat:"",class:"pa-4 text-center"},{default:u(()=>[l(b,null,{default:u(()=>[O(q(m.value),1)]),_:1})]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},vSe=Xt(hSe,[["__scopeId","data-v-4f59e225"]]),pSe={class:"patient-advice-multiline"},gSe={__name:"search-patient-advice",props:{doctorId:{type:[String,Number],required:!0}},emits:["patientAdviceSelected"],setup(e,{emit:t}){const n=e,a=t,r=M(!1),s=M([]),o=M(""),i=M(null),c=M(!1);let A=null;const d=y=>{s.value.some(w=>w.patientAdvice===y)||(o.value=y)},f=()=>{(!o.value||o.value.length===0)&&s.value.length===0&&h("")},m=y=>{y&&(a("patientAdviceSelected",y),i.value=null)};We(o,y=>{A&&clearTimeout(A),c.value=!1,A=setTimeout(()=>{h(y||"")},300)});const h=async y=>{r.value=!0,c.value=!1;try{const g=y||"",w=await dt.get(`consultation/search_patient_advice/${encodeURIComponent(g)}`,{params:{doctor_id:n.doctorId}});s.value=w.data.data.patientAdvices.filter(b=>b.patientAdvice&&b.patientAdvice.trim().length>0),(!s.value||s.value.length===0)&&(c.value=!0)}catch(g){console.error("Error fetching patient advice:",g),c.value=!0}finally{r.value=!1}},v=ee(()=>!o.value||o.value.length<1?r.value?"Loading recent patient advice...":c.value?"No patient advice found in consultation history. Start typing to search.":"Start typing to search consultation history":r.value?"Searching consultation history...":c.value?"No matches found in consultation history.":"");return(y,g)=>{const w=I("v-icon"),b=I("v-tooltip"),x=I("v-list-item"),T=I("v-card-subtitle"),U=I("v-card"),k=I("v-autocomplete");return R(),ve(k,{modelValue:i.value,"onUpdate:modelValue":[g[0]||(g[0]=S=>i.value=S),m],items:s.value,search:o.value,"onUpdate:search":d,onFocus:f,"item-title":"patientAdvice","item-value":"patientAdvice",label:"Search Patient Advice History",placeholder:"Type to search consultation history...",variant:"outlined",loading:r.value,"no-data-text":v.value,clearable:"","hide-no-data":"","auto-select-first":"",density:"compact","return-object":"",class:"patient-advice-search"},{item:u(({props:S,item:E})=>[l(x,Fe(S,{density:"compact",class:"patient-advice-list-item"}),{title:u(()=>[p("div",pSe,q(E.raw.patientAdvice),1)]),append:u(()=>[l(b,{location:"top"},{activator:u(({props:C})=>[l(w,Fe(C,{size:"small"}),{default:u(()=>[E.raw.isFromHistory?(R(),ve(w,{key:0,icon:"mdi-history",color:"primary"})):_e("",!0)]),_:2},1040)]),default:u(()=>[p("span",null,q(E.raw.isFromHistory?"From your consultation history":"Custom patient advice"),1)]),_:2},1024)]),_:2},1040)]),"no-data":u(()=>[l(U,{flat:"",class:"pa-4 text-center"},{default:u(()=>[l(T,null,{default:u(()=>[O(q(v.value),1)]),_:1})]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},ySe=Xt(gSe,[["__scopeId","data-v-daaff071"]]),_Se={class:"template-name template-name-truncate"},wSe={class:"text-caption template-subtitle-truncate"},bSe={key:0},xSe={__name:"diagnosis-template-autocomplete",props:{doctorId:{type:[String,Number],required:!0}},emits:["template-selected"],setup(e,{emit:t}){const n=e,a=t,r=M(null),s=M([]),o=M(""),i=M(!1),c=M(!1);let A=null;const d=w=>{o.value=w},f=()=>{s.value.length===0&&(!o.value||o.value.length===0)&&h()};We(o,w=>{if(A&&clearTimeout(A),!w||w.length===0){h();return}A=setTimeout(()=>{v(w)},300)});const m=w=>{w&&typeof w=="object"&&(console.log("Template selected:",w),a("template-selected",{template:w,autoFillData:{diagnosis:w.diagnosisName,instructions:w.instructions||"",investigations:w.investigations||"",medicines:w.diagnosisMedicines||[]}}),setTimeout(()=>{r.value=null,o.value="",s.value=[]},100))},h=async()=>{i.value=!0;try{const w=await dt.get("diagnosis/search_templates/all",{params:{doctor_id:n.doctorId}});s.value=w.data.data.templates||[],c.value=!0}catch(w){console.error("Error fetching all templates:",w),s.value=[],c.value=!0}finally{i.value=!1}},v=async w=>{if(!(!w||w.length===0)){i.value=!0;try{const b=await dt.get(`diagnosis/search_templates/${w}`,{params:{doctor_id:n.doctorId}});s.value=b.data.data.templates||[]}catch(b){console.error("Error fetching templates:",b),s.value=[]}finally{i.value=!1}}},y=w=>{const b=[];return w.instructions&&b.push(`Instructions: ${w.instructions.substring(0,30)}...`),w.investigations&&b.push(`Investigations: ${w.investigations.substring(0,20)}...`),w.diagnosisMedicines&&w.diagnosisMedicines.length>0&&b.push(`${w.diagnosisMedicines.length} medicine(s)`),b.join(" | ")||"Template"},g=ee(()=>i.value?!o.value||o.value.length===0?"Loading templates...":"Searching templates...":!o.value||o.value.length===0?c.value&&s.value.length===0?"No saved diagnosis templates found. Create templates during consultations to see them here.":"Click to view your saved diagnosis templates":o.value&&s.value.length===0?`No templates found for "${o.value}". Try a different search term.`:"");return(w,b)=>{const x=I("v-icon"),T=I("v-tooltip"),U=I("v-list-item"),k=I("v-list"),S=I("v-card-subtitle"),E=I("v-card-text"),C=I("v-card"),P=I("v-autocomplete");return R(),ve(P,{modelValue:r.value,"onUpdate:modelValue":[b[0]||(b[0]=F=>r.value=F),m],items:s.value,search:o.value,"onUpdate:search":d,onFocus:f,"item-title":"diagnosisName","item-value":"diagnosisName",label:"select diagnosis template (optional)",placeholder:"Search saved templates...",variant:"outlined",loading:i.value,"no-data-text":g.value,clearable:"","return-object":"",density:"compact","prepend-inner-icon":"mdi-magnify",class:"template-autocomplete"},{item:u(({props:F,item:N})=>[l(k,{density:"compact",class:"template-search-list"},{default:u(()=>[l(U,Fe(F,{class:"template-search-item"}),{title:u(()=>[p("span",_Se,q(N.raw.diagnosisName),1)]),subtitle:u(()=>[p("span",wSe,q(y(N.raw)),1)]),append:u(()=>[l(T,{location:"top"},{activator:u(({props:L})=>[l(x,Fe(L,{size:"small",color:"primary"}),{default:u(()=>[...b[1]||(b[1]=[O(" mdi-bookmark ",-1)])]),_:1},16)]),default:u(()=>[b[2]||(b[2]=p("span",null,"Saved Template",-1))]),_:1})]),_:2},1040)]),_:2},1024)]),"no-data":u(()=>[l(C,{flat:"",class:"pa-4 text-center"},{default:u(()=>[c.value&&s.value.length===0&&!o.value?(R(),me("div",bSe,[l(x,{color:"grey-lighten-1",size:"48",class:"mb-2"},{default:u(()=>[...b[3]||(b[3]=[O("mdi-bookmark-outline",-1)])]),_:1}),l(S,{class:"text-wrap mb-2"},{default:u(()=>[...b[4]||(b[4]=[O("No saved diagnosis templates found",-1)])]),_:1}),l(E,{class:"text-caption text-grey"},{default:u(()=>[...b[5]||(b[5]=[O(" Save diagnosis templates during consultations to quickly reuse them here. ",-1)])]),_:1})])):(R(),ve(S,{key:1,class:"text-wrap"},{default:u(()=>[O(q(g.value),1)]),_:1}))]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},CSe=Xt(xSe,[["__scopeId","data-v-fd6a829c"]]),SSe={class:"font-weight-medium medicine-chip-truncate"},ESe={class:"d-flex align-center"},BSe={class:"medicine-name-truncate"},kSe={key:0,class:"ml-2"},TSe={key:1,class:"ml-2"},ISe={class:"text-center"},FSe={__name:"search-medicine",props:{showInventoryStatus:{type:Boolean,default:!1}},emits:["searchedMedicines","addMedicine"],setup(e,{emit:t}){const n=e,a=t,r=()=>{a("addMedicine")},s=M(!1),o=M([]),i=M(""),c=M([]),A=M(!1);let d=null;We(i,y=>{if(d&&clearTimeout(d),A.value=!1,!y||y.trim().length===0){s.value=!1;return}d=setTimeout(()=>{f(y)},300)}),We(c,y=>{y.length>0&&a("searchedMedicines",y)});const f=async y=>{if(!(!y||y.trim().length===0)){s.value=!0,A.value=!1;try{const g=await _T(y,n.showInventoryStatus);g.error?(console.error("Medicine search error:",g.error),A.value=!0):(o.value=g.data,(!o.value||o.value.length===0)&&(A.value=!0))}catch(g){console.error("Medicine search failed:",g),A.value=!0}finally{s.value=!1}}},m=y=>y.isPharmacy?y.inventoryUnits===void 0||y.inventoryUnits===null?"grey":y.inventoryUnits===0?"error":y.lowStock?"warning":"success":"default",h=y=>y.isPharmacy?y.inventoryUnits===void 0||y.inventoryUnits===null?"No Inventory":y.inventoryUnits===0?y.closestExpiry&&new Date(y.closestExpiry)<new Date?"Expired - No stock":"No stock":`${y.inventoryUnits} units`:"",v=ee(()=>!i.value||i.value.trim().length===0?"Start typing to search medicines":s.value?"Searching medicines...":A.value?"No medicines found matching your search. Try different keywords or create new medicine below.":"");return(y,g)=>{const w=I("v-chip"),b=I("v-list-item-subtitle"),x=I("v-icon"),T=I("v-list-item"),U=I("v-divider"),k=I("v-card-subtitle"),S=I("v-btn"),E=I("v-card"),C=I("v-list"),P=I("v-autocomplete");return R(),ve(P,{multiple:"",clearable:"","clear-on-select":"","hide-selected":"",chips:"","closable-chips":"",density:"compact",variant:"outlined",label:"search medicine by trade name",items:o.value,search:i.value,"onUpdate:search":g[0]||(g[0]=F=>i.value=F),loading:s.value,"item-title":"productName","item-value":"item","return-object":"",modelValue:c.value,"onUpdate:modelValue":g[1]||(g[1]=F=>c.value=F),rounded:"l","prepend-inner-icon":"mdi-magnify","no-data-text":v.value,placeholder:s.value?"Searching...":"Start typing to search medicines"},{chip:u(({props:F,item:N})=>[l(w,Fe(F,{size:"small",class:"mr-1"}),{default:u(()=>[p("span",SSe,q(N.raw.productName),1)]),_:2},1040)]),item:u(({props:F,item:N,index:L})=>[l(C,{density:"compact",class:"medicine-search-list"},{default:u(()=>[l(T,Fe(F,{class:"medicine-search-item"}),{title:u(()=>[p("div",ESe,[p("span",BSe,q(N.raw.productName),1),e.showInventoryStatus&&N.raw.isPharmacy?(R(),ve(w,{key:0,color:m(N.raw),size:"x-small",variant:"flat",class:"ml-2"},{default:u(()=>[O(q(h(N.raw)),1)]),_:2},1032,["color"])):_e("",!0)])]),append:u(()=>[e.showInventoryStatus&&N.raw.isPharmacy?(R(),ve(x,{key:0,size:"small"},{default:u(()=>[...g[2]||(g[2]=[O(" mdi-store-plus-outline ",-1)])]),_:1})):N.raw.isLocal?(R(),ve(x,{key:1,size:"small"},{default:u(()=>[...g[3]||(g[3]=[p("img",{src:Md,alt:"Saved Medicine"},null,-1)])]),_:1})):(R(),ve(x,{key:2,size:"small"},{default:u(()=>[...g[4]||(g[4]=[p("img",{src:iv,alt:"External Medicine"},null,-1)])]),_:1}))]),default:u(()=>[l(b,{class:"medicine-subtitle-truncate"},{default:u(()=>[O(q(N.raw.marketer)+" ",1),e.showInventoryStatus&&N.raw.isPharmacy?(R(),me(ze,{key:0},[N.raw.mrp!==null&&N.raw.mrp!==void 0?(R(),me("span",kSe,"  MRP: "+q(Math.round(N.raw.mrp)),1)):_e("",!0),N.raw.discountPercentage!==null&&N.raw.discountPercentage!==void 0?(R(),me("span",TSe,"  Discount: "+q(N.raw.discountPercentage)+"% ",1)):_e("",!0)],64)):_e("",!0)]),_:2},1024)]),_:2},1040),L===o.value.length-1?(R(),me(ze,{key:0},[l(U),l(E,{flat:"",class:"pt-1"},{default:u(()=>[l(k,null,{default:u(()=>[...g[5]||(g[5]=[O("Medicine not in list?",-1)])]),_:1}),l(S,{class:"ml-3",variant:"outlined",onClick:r},{default:u(()=>[l(x,{class:"mr-2"},{default:u(()=>[...g[6]||(g[6]=[O("mdi-plus",-1)])]),_:1}),g[7]||(g[7]=O(" Create Medicine ",-1))]),_:1})]),_:1})],64)):_e("",!0)]),_:2},1024)]),"no-data":u(()=>[i.value&&i.value.trim().length>0?(R(),ve(E,{key:0,flat:"",class:"pa-4"},{default:u(()=>[p("div",ISe,[l(k,{class:"mb-2"},{default:u(()=>[O(q(v.value),1)]),_:1}),l(S,{variant:"outlined",color:"primary",onClick:r},{default:u(()=>[l(x,{class:"mr-2"},{default:u(()=>[...g[8]||(g[8]=[O("mdi-plus",-1)])]),_:1}),g[9]||(g[9]=O(" Create Medicine ",-1))]),_:1})])]),_:1})):(R(),ve(E,{key:1,flat:"",class:"pa-4 text-center"},{default:u(()=>[l(k,null,{default:u(()=>[O(q(v.value),1)]),_:1})]),_:1}))]),_:1},8,["items","search","loading","modelValue","no-data-text","placeholder"])}}},wH=Xt(FSe,[["__scopeId","data-v-da685ba5"]]),PSe={__name:"search-dosage-schedule",props:{modelValue:{type:String,default:""},medicineId:{type:[String,Number],default:null},productForm:{type:String,default:null},doctorId:{type:[String,Number],required:!0}},emits:["update:modelValue","dosageScheduleSelected"],setup(e,{emit:t}){const n=e,a=t,r=M(!1),s=M([]),o=M(""),i=M(""),c=M(!1);let A=null,d=!0;const f=g=>{o.value=g},m=()=>{(!o.value||o.value.trim().length===0)&&n.medicineId&&v("*")},h=()=>{(!o.value||o.value.trim().length===0)&&n.medicineId&&v("*")};We(i,g=>{typeof g=="string"?(a("update:modelValue",g),a("dosageScheduleSelected",{dosage_schedule:g,isUserTyped:!0,isFromHistory:!1})):g&&typeof g=="object"?(a("update:modelValue",g.dosage_schedule),a("dosageScheduleSelected",g)):g||(a("update:modelValue",""),a("dosageScheduleSelected",null))}),We(o,g=>{if(A&&clearTimeout(A),c.value=!1,!g||g.length<1){r.value=!1,s.value=[];return}A=setTimeout(()=>{v(g)},300)}),We(()=>n.modelValue,g=>{g!==i.value&&(i.value=g)},{immediate:!0}),We([()=>n.medicineId,()=>n.productForm],()=>{o.value&&o.value.length>0?v(o.value):n.medicineId&&v("*")});const v=async g=>{const w=g==="*"||g==="FOCUS";if(!(!w&&(!g||g.length<1))){r.value=!0,c.value=!1;try{const b={};n.medicineId&&(b.medicine_id=n.medicineId),n.productForm&&(b.product_form=n.productForm),n.doctorId&&(b.doctor_id=n.doctorId);const x=w?"*":g,T=await dt.get(`/medicine/search_dosage_schedules/${encodeURIComponent(x)}`,{params:b});if(!d)return;if(T.data.success&&T.data.data.dosage_schedules){const U=T.data.data.dosage_schedules.filter(k=>k&&k.trim().length>0).map(k=>({dosage_schedule:k,isFromHistory:!0}));s.value=U,U.length===0&&(c.value=!0)}else s.value=[],c.value=!0}catch(b){if(!d)return;console.error("Error fetching dosage schedules:",b),c.value=!0}finally{d&&(r.value=!1)}}},y=ee(()=>!o.value||o.value.length<1?"Click to see all schedule history, or start typing to search":r.value?"Searching schedule history...":c.value?"No matches found in schedule history. You can still type custom schedule.":"");return la(()=>{d=!1,A&&(clearTimeout(A),A=null)}),(g,w)=>{const b=I("v-icon"),x=I("v-tooltip"),T=I("v-combobox");return R(),ve(T,{modelValue:i.value,"onUpdate:modelValue":w[0]||(w[0]=U=>i.value=U),items:s.value,search:o.value,"onUpdate:search":f,onClick:m,onFocus:h,"item-title":"dosage_schedule","item-value":"dosage_schedule",label:"Dosage Schedule",placeholder:"Type or search dosage...",variant:"outlined",loading:r.value,"no-data-text":y.value,clearable:"","hide-no-data":"","auto-select-first":"",density:"compact",class:"dosage-schedule-combobox","single-line":"","hide-details":"","hide-dropdown-icon":""},{"prepend-inner":u(()=>[l(x,{text:"Dosage Schedule e.g. 1 after breakfast",location:"top"},{activator:u(({props:U})=>[l(b,Fe(U,{size:"small",class:"text-medium-emphasis mr-1"}),{default:u(()=>[...w[1]||(w[1]=[O(" mdi-clock-outline ",-1)])]),_:1},16)]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},DSe=Xt(PSe,[["__scopeId","data-v-b0eb0e04"]]),USe={__name:"search-dosage-duration",props:{modelValue:{type:String,default:""},medicineId:{type:[String,Number],default:null},productForm:{type:String,default:null},doctorId:{type:[String,Number],required:!0}},emits:["update:modelValue","durationSelected"],setup(e,{emit:t}){const n=e,a=t,r=M(!1),s=M([]),o=M(""),i=M(""),c=M(!1);let A=null,d=!0;const f=g=>{o.value=g},m=()=>{(!o.value||o.value.trim().length===0)&&n.medicineId&&v("*")},h=()=>{(!o.value||o.value.trim().length===0)&&n.medicineId&&v("*")};We(i,g=>{typeof g=="string"?(a("update:modelValue",g),a("durationSelected",{duration:g,isUserTyped:!0,isFromHistory:!1})):g&&typeof g=="object"?(a("update:modelValue",g.duration),a("durationSelected",g)):g||(a("update:modelValue",""),a("durationSelected",null))}),We(o,g=>{if(A&&clearTimeout(A),c.value=!1,!g||g.length<1){r.value=!1,s.value=[];return}A=setTimeout(()=>{v(g)},300)}),We(()=>n.modelValue,g=>{g!==i.value&&(i.value=g)},{immediate:!0}),We([()=>n.medicineId,()=>n.productForm],()=>{o.value&&o.value.length>0?v(o.value):n.medicineId&&v("*")});const v=async g=>{const w=g==="*"||g==="FOCUS";if(!(!w&&(!g||g.length<1))){r.value=!0,c.value=!1;try{const b={};n.medicineId&&(b.medicine_id=n.medicineId),n.productForm&&(b.product_form=n.productForm),n.doctorId&&(b.doctor_id=n.doctorId);const x=w?"*":g,T=await dt.get(`/medicine/search_dosage_duration/${encodeURIComponent(x)}`,{params:b});if(!d)return;if(T.data.success&&T.data.data.dosage_durations){const U=T.data.data.dosage_durations.filter(k=>k&&k.trim().length>0).map(k=>({duration:k,isFromHistory:!0}));s.value=U,U.length===0&&(c.value=!0)}else s.value=[],c.value=!0}catch(b){if(!d)return;console.error("Error fetching dosage durations:",b),c.value=!0}finally{d&&(r.value=!1)}}},y=ee(()=>!o.value||o.value.length<1?"Click to see all duration history, or start typing to search":r.value?"Searching duration history...":c.value?"No matches found in duration history. You can still type custom duration.":"");return la(()=>{d=!1,A&&(clearTimeout(A),A=null)}),(g,w)=>{const b=I("v-icon"),x=I("v-tooltip"),T=I("v-combobox");return R(),ve(T,{modelValue:i.value,"onUpdate:modelValue":w[0]||(w[0]=U=>i.value=U),items:s.value,search:o.value,"onUpdate:search":f,onClick:m,onFocus:h,"item-title":"duration","item-value":"duration",label:"Duration",placeholder:"Type or search duration...",variant:"outlined",loading:r.value,"no-data-text":y.value,clearable:"","hide-no-data":"","auto-select-first":"",density:"compact",class:"dosage-duration-combobox","single-line":"","hide-details":"","hide-dropdown-icon":""},{"prepend-inner":u(()=>[l(x,{text:"Duration e.g. 5 days",location:"top"},{activator:u(({props:U})=>[l(b,Fe(U,{size:"small",class:"text-medium-emphasis mr-1"}),{default:u(()=>[...w[1]||(w[1]=[O(" mdi-calendar-range ",-1)])]),_:1},16)]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},RSe=Xt(USe,[["__scopeId","data-v-f773064d"]]),NSe={__name:"search-dosage-instructions",props:{modelValue:{type:String,default:""},medicineId:{type:[String,Number],default:null},productForm:{type:String,default:null},doctorId:{type:[String,Number],required:!0}},emits:["update:modelValue","instructionsSelected"],setup(e,{emit:t}){const n=e,a=t,r=M(!1),s=M([]),o=M(""),i=M(""),c=M(!1);let A=null,d=!0;const f=g=>{o.value=g},m=()=>{(!o.value||o.value.trim().length===0)&&n.medicineId&&v("*")},h=()=>{(!o.value||o.value.trim().length===0)&&n.medicineId&&v("*")};We(i,g=>{typeof g=="string"?(a("update:modelValue",g),a("instructionsSelected",{instructions:g,isUserTyped:!0,isFromHistory:!1})):g&&typeof g=="object"?(a("update:modelValue",g.instructions),a("instructionsSelected",g)):g||(a("update:modelValue",""),a("instructionsSelected",null))}),We(o,g=>{if(A&&clearTimeout(A),c.value=!1,!g||g.length<1){r.value=!1,s.value=[];return}A=setTimeout(()=>{v(g)},300)}),We(()=>n.modelValue,g=>{g!==i.value&&(i.value=g)},{immediate:!0}),We([()=>n.medicineId,()=>n.productForm],()=>{o.value&&o.value.length>0?v(o.value):n.medicineId&&v("*")});const v=async g=>{const w=g==="*"||g==="FOCUS";if(!(!w&&(!g||g.length<1))){r.value=!0,c.value=!1;try{const b={};n.medicineId&&(b.medicine_id=n.medicineId),n.productForm&&(b.product_form=n.productForm),n.doctorId&&(b.doctor_id=n.doctorId);const x=w?"*":g,T=await dt.get(`/medicine/search_dosage_instructions/${encodeURIComponent(x)}`,{params:b});if(!d)return;if(T.data.success&&T.data.data.dosage_instructions){const U=T.data.data.dosage_instructions.filter(k=>k&&k.trim().length>0).map(k=>({instructions:k,isFromHistory:!0}));s.value=U,U.length===0&&(c.value=!0)}else s.value=[],c.value=!0}catch(b){if(!d)return;console.error("Error fetching dosage instructions:",b),c.value=!0}finally{d&&(r.value=!1)}}},y=ee(()=>!o.value||o.value.length<1?"Click to see all instruction history, or start typing to search":r.value?"Searching instruction history...":c.value?"No matches found in instruction history. You can still type custom instructions.":"");return la(()=>{d=!1,A&&(clearTimeout(A),A=null)}),(g,w)=>{const b=I("v-icon"),x=I("v-tooltip"),T=I("v-combobox");return R(),ve(T,{modelValue:i.value,"onUpdate:modelValue":w[0]||(w[0]=U=>i.value=U),items:s.value,search:o.value,"onUpdate:search":f,onClick:m,onFocus:h,"item-title":"instructions","item-value":"instructions",label:"Instructions",placeholder:"Type or search instructions...",variant:"outlined",loading:r.value,"no-data-text":y.value,clearable:"","hide-no-data":"","auto-select-first":"",density:"compact",class:"dosage-instructions-combobox","single-line":"","hide-details":"","hide-dropdown-icon":""},{"prepend-inner":u(()=>[l(x,{text:"Instructions e.g. on empty stomach",location:"top"},{activator:u(({props:U})=>[l(b,Fe(U,{size:"small",class:"text-medium-emphasis mr-1"}),{default:u(()=>[...w[1]||(w[1]=[O(" mdi-information-outline ",-1)])]),_:1},16)]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},VSe=Xt(NSe,[["__scopeId","data-v-73718740"]]),bH={__name:"edit-medicine",props:{medicine:{type:Object,required:!0},mode:{type:String,default:"consultation",validator:e=>["consultation","pharmacy"].includes(e)}},emits:["close","update:medicine"],setup(e,{emit:t}){const n=e,a=t,r=M(mT),s=ee(()=>n.mode==="pharmacy"),o=M({productName:"",marketer:"",saltComposition:"",productForm:"",group:"",hsnCode:"",alertUnits:0}),i=M(!1),c=f=>{f&&(o.value={productName:f.productName||"",marketer:f.marketer||"",saltComposition:f.saltComposition||"",productForm:f.productForm||"",group:f.group||"",hsnCode:f.hsnCode||"",alertUnits:f.alertUnits!==void 0&&f.alertUnits!==null?f.alertUnits:0},console.log("Edit medicine form populated from:",f),console.log("Edit medicine form populated to:",o.value))};We(()=>n.medicine,f=>{c(f)},{immediate:!0,deep:!0}),We(()=>n.medicine?.id,f=>{f&&n.medicine&&c(n.medicine)},{immediate:!0});const A=()=>{a("close")},d=async()=>{const f={productName:o.value.productName,marketer:o.value.marketer||"",saltComposition:o.value.saltComposition||"",productForm:o.value.productForm,group:o.value.group||""};s.value&&(f.hsnCode=o.value.hsnCode||"",f.alertUnits=o.value.alertUnits||0,f.isPharmacy=!0);const m=await yH(n.medicine.id,f);if(m.error)console.error("Error updating medicine:",m.error);else{const h=m.data||{...n.medicine,...f};a("update:medicine",h),A()}};return(f,m)=>{const h=I("v-card-title"),v=I("v-col"),y=I("v-icon"),g=I("v-btn"),w=I("v-row"),b=I("v-card"),x=I("v-text-field"),T=I("v-combobox"),U=I("v-divider"),k=I("v-form");return R(),ve(b,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(w,{"no-gutters":""},{default:u(()=>[l(v,{cols:"12"},{default:u(()=>[l(b,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(w,{"no-gutters":""},{default:u(()=>[l(v,{cols:"11"},{default:u(()=>[l(h,{class:"pa-0 pl-2"},{default:u(()=>[...m[8]||(m[8]=[O("Edit Medicine",-1)])]),_:1})]),_:1}),l(v,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(g,{icon:"",size:"x-small",onClick:A},{default:u(()=>[l(y,null,{default:u(()=>[...m[9]||(m[9]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(w,{"no-gutters":""},{default:u(()=>[l(v,{cols:"12"},{default:u(()=>[l(b,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(k,{modelValue:i.value,"onUpdate:modelValue":m[7]||(m[7]=S=>i.value=S),"validate-on":"blur"},{default:u(()=>[l(w,{"no-gutters":""},{default:u(()=>[l(v,{cols:"12"},{default:u(()=>[l(x,{label:"Trade Name *",density:"compact",modelValue:o.value.productName,"onUpdate:modelValue":m[0]||(m[0]=S=>o.value.productName=S),rules:Oe(sr)},null,8,["modelValue","rules"])]),_:1}),l(v,{cols:"12"},{default:u(()=>[l(T,{label:"Product Form *",density:"compact",items:r.value,rules:Oe(sr),modelValue:o.value.productForm,"onUpdate:modelValue":m[1]||(m[1]=S=>o.value.productForm=S),clearable:""},null,8,["items","rules","modelValue"])]),_:1}),l(v,{cols:"12"},{default:u(()=>[l(x,{label:"Company Name",density:"compact",modelValue:o.value.marketer,"onUpdate:modelValue":m[2]||(m[2]=S=>o.value.marketer=S)},null,8,["modelValue"])]),_:1}),l(v,{cols:"12"},{default:u(()=>[l(x,{label:"Salt Composition",density:"compact",modelValue:o.value.saltComposition,"onUpdate:modelValue":m[3]||(m[3]=S=>o.value.saltComposition=S)},null,8,["modelValue"])]),_:1}),l(v,{cols:"12"},{default:u(()=>[l(x,{label:"Group",density:"compact",modelValue:o.value.group,"onUpdate:modelValue":m[4]||(m[4]=S=>o.value.group=S)},null,8,["modelValue"])]),_:1}),s.value?(R(),me(ze,{key:0},[l(v,{cols:"12"},{default:u(()=>[l(x,{label:"HSN Code",density:"compact",modelValue:o.value.hsnCode,"onUpdate:modelValue":m[5]||(m[5]=S=>o.value.hsnCode=S),hint:"4-8 digits, alphanumeric","persistent-hint":""},null,8,["modelValue"])]),_:1}),l(v,{cols:"12"},{default:u(()=>[l(x,{label:"Alert Units",density:"compact",type:"number",modelValue:o.value.alertUnits,"onUpdate:modelValue":m[6]||(m[6]=S=>o.value.alertUnits=S),modelModifiers:{number:!0},hint:"Low stock alert threshold","persistent-hint":"",rules:[S=>S>=0||"Must be 0 or greater"]},null,8,["modelValue","rules"])]),_:1})],64)):_e("",!0)]),_:1}),l(U),l(w,{"no-gutters":""},{default:u(()=>[l(v,{cols:"2"}),l(v,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(g,{variant:"outlined",onClick:d,disabled:!i.value},{default:u(()=>[...m[10]||(m[10]=[O("Update",-1)])]),_:1},8,["disabled"])]),_:1}),l(v,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},wT={__name:"create-medicine",props:{mode:{type:String,default:"consultation",validator:e=>["consultation","pharmacy"].includes(e)}},emits:["close","update:medicinelist","medicine-created"],setup(e,{emit:t}){const n=e,a=t,r=M(mT),s=M({productName:"",marketer:"",saltComposition:"",productForm:"",group:"",hsnCode:"",alertUnits:0}),o=ee(()=>n.mode==="pharmacy"),i=M(!1),c=()=>{a("close")},A=async d=>{const f={productName:d.productName,marketer:d.marketer||"",saltComposition:d.saltComposition||"",productForm:d.productForm,group:d.group||""};o.value&&(f.hsnCode=d.hsnCode||"",f.alertUnits=d.alertUnits||0,f.isPharmacy=!0);const m=await yT(f);m.error?console.error("Error creating medicine:",m.error):(a("update:medicinelist",m.data),a("medicine-created",m.data),c())};return(d,f)=>{const m=I("v-card-title"),h=I("v-col"),v=I("v-icon"),y=I("v-btn"),g=I("v-row"),w=I("v-card"),b=I("v-text-field"),x=I("v-combobox"),T=I("v-divider"),U=I("v-form");return R(),ve(w,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(g,{"no-gutters":""},{default:u(()=>[l(h,{cols:"12"},{default:u(()=>[l(w,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(g,{"no-gutters":""},{default:u(()=>[l(h,{cols:"11"},{default:u(()=>[l(m,{class:"pa-0 pl-2"},{default:u(()=>[...f[9]||(f[9]=[O("Create New Medicine",-1)])]),_:1})]),_:1}),l(h,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(y,{icon:"",size:"x-small",onClick:c},{default:u(()=>[l(v,null,{default:u(()=>[...f[10]||(f[10]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(g,{"no-gutters":""},{default:u(()=>[l(h,{cols:"12"},{default:u(()=>[l(w,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(U,{modelValue:i.value,"onUpdate:modelValue":f[8]||(f[8]=k=>i.value=k),"validate-on":"blur"},{default:u(()=>[l(g,{"no-gutters":""},{default:u(()=>[l(h,{cols:"12"},{default:u(()=>[l(b,{label:"Trade Name *",density:"compact",modelValue:s.value.productName,"onUpdate:modelValue":f[0]||(f[0]=k=>s.value.productName=k),rules:Oe(sr)},null,8,["modelValue","rules"])]),_:1}),l(h,{cols:"12"},{default:u(()=>[l(x,{label:"Product Form *",density:"compact",items:r.value,rules:Oe(sr),modelValue:s.value.productForm,"onUpdate:modelValue":f[1]||(f[1]=k=>s.value.productForm=k),clearable:""},null,8,["items","rules","modelValue"])]),_:1}),l(h,{cols:"12"},{default:u(()=>[l(b,{label:"Company Name",density:"compact",modelValue:s.value.marketer,"onUpdate:modelValue":f[2]||(f[2]=k=>s.value.marketer=k)},null,8,["modelValue"])]),_:1}),l(h,{cols:"12"},{default:u(()=>[l(b,{label:"Salt Composition",density:"compact",modelValue:s.value.saltComposition,"onUpdate:modelValue":f[3]||(f[3]=k=>s.value.saltComposition=k)},null,8,["modelValue"])]),_:1}),l(h,{cols:"12"},{default:u(()=>[l(b,{label:"Group",density:"compact",modelValue:s.value.group,"onUpdate:modelValue":f[4]||(f[4]=k=>s.value.group=k)},null,8,["modelValue"])]),_:1}),o.value?(R(),me(ze,{key:0},[l(h,{cols:"12"},{default:u(()=>[l(b,{label:"HSN Code",density:"compact",modelValue:s.value.hsnCode,"onUpdate:modelValue":f[5]||(f[5]=k=>s.value.hsnCode=k),hint:"4-8 digits, alphanumeric","persistent-hint":""},null,8,["modelValue"])]),_:1}),l(h,{cols:"12"},{default:u(()=>[l(b,{label:"Alert Units",density:"compact",type:"number",modelValue:s.value.alertUnits,"onUpdate:modelValue":f[6]||(f[6]=k=>s.value.alertUnits=k),modelModifiers:{number:!0},hint:"Low stock alert threshold","persistent-hint":"",rules:[k=>k>=0||"Must be 0 or greater"]},null,8,["modelValue","rules"])]),_:1})],64)):_e("",!0)]),_:1}),l(T),l(g,{"no-gutters":""},{default:u(()=>[l(h,{cols:"2"}),l(h,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(y,{variant:"outlined",onClick:f[7]||(f[7]=k=>A(s.value)),disabled:!i.value},{default:u(()=>[...f[11]||(f[11]=[O("Create",-1)])]),_:1},8,["disabled"])]),_:1}),l(h,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},bT=()=>typeof window<"u"&&window.process&&window.process.type==="renderer",Rw=async()=>{if(bT())try{const{ipcRenderer:e}=window.require("electron");return await e.invoke("get-local-ip")}catch(e){return console.error("Failed to get local IP via IPC:",e),"localhost"}else try{const e=window.location.hostname,n=`${Pr(e).api.https}/network-info`,r=await(await fetch(n)).json();return r.success&&r.localIP?r.localIP:(console.warn("API returned unsuccessful response:",r),"localhost")}catch(e){return console.error("Failed to get local IP from API:",e),"localhost"}},IC=async e=>{try{const t=e.replace("/api","/health"),n=await fetch(t,{method:"GET",headers:{Accept:"application/json"},timeout:5e3});return console.log(` ${t} is accessible (status: ${n.status})`),n.ok}catch(t){return console.log(` ${e} not accessible:`,t.message),!1}},xH=async()=>{if(bT())try{const e=await Rw(),t=Pr(e);let n=t.api.https;if(!await IC(n)&&(console.log(" HTTPS not accessible, trying HTTP fallback..."),n=t.api.http,!await IC(n))){console.log(" Network IP not accessible, falling back to localhost...");const s=Pr("localhost");n=s.api.https,await IC(n)||(console.log(" Localhost HTTPS not accessible, trying localhost HTTP..."),n=s.api.http)}return kh(n),console.log(` API initialized with: ${n}`),n}catch(e){console.error("Failed to initialize network API:",e);const t=Pr("localhost").api.https;return kh(t),t}else return console.log("[network] Web mode: Skipping network API initialization - base URL already set by environment"),null},Nw=async()=>{if(bT())try{const e=await Rw();return Pr(e).https}catch(e){return console.error("Failed to get current server URL:",e),Pr("localhost").https}else try{const e=window.location.hostname,t=Pr(e),n=`${t.api.https}/network-info`,r=await(await fetch(n)).json();return r.success&&r.serverURL?r.serverURL:(console.warn("API returned unsuccessful response for server URL:",r),t.https)}catch(e){return console.error("Failed to get server URL from API:",e),Pr(window.location.hostname).https}},LSe=async(e,t="/api/upload/file")=>{try{return`${await Nw()}${t}?path=${encodeURIComponent(e)}`}catch(n){return console.error("Failed to create file URL, using localhost fallback:",n),`${Pr("localhost").https}${t}?path=${encodeURIComponent(e)}`}},xT=async(e,t="/api/upload/file")=>{try{const n=await Nw();return e.map(a=>`${n}${t}?path=${encodeURIComponent(a)}`)}catch(n){console.error("Failed to create file URLs, using localhost fallback:",n);const a=Pr("localhost").https;return e.map(r=>`${a}${t}?path=${encodeURIComponent(r)}`)}},CH=async()=>{try{return await Nw()}catch(e){return console.error("Failed to get server URL, using localhost:",e),Pr("localhost").https}},sR=Object.freeze(Object.defineProperty({__proto__:null,createFileURL:LSe,createFileURLBatch:xT,createServerURLRef:CH,getCurrentServerURL:Nw,getLocalIP:Rw,getServerURLs:Pr,initializeNetworkAPI:xH},Symbol.toStringTag,{value:"Module"})),MSe={class:"transcription-container pa-4"},OSe={key:0,class:"text-center"},HSe={key:1,class:"text-center"},$Se={key:2,class:"text-center"},QSe={key:3,class:"transcription-text"},GSe={class:"text-body-1 mb-0 text-white"},zSe={key:4,class:"text-center text-medium-emphasis"},KSe={key:0,class:"d-flex justify-center mb-4"},WSe={__name:"dictation-modal",props:{modelValue:{type:Boolean,default:!1},currentText:{type:String,default:""},label:{type:String,default:"Dictation"}},emits:["update:modelValue","transcriptionComplete","transcriptionUpdate"],setup(e,{emit:t}){const n=e,a=t,r=M(!1),s=M(!1),o=M(!1),i=M(!1),c=M("");window.dictationModalActive=!1;let A=null,d=null,f=null,m=null;We(()=>n.modelValue,S=>{r.value=S,window.dictationModalActive=S,S&&(c.value="",setTimeout(()=>{x()},300))}),We(r,S=>{a("update:modelValue",S),window.dictationModalActive=S,S||k()});const h=()=>o.value?"Requesting permission...":i.value?"Connecting...":s.value?"Recording...":"Processing...",v=S=>{if(!r.value)return;const E=S.target;E&&(E.isContentEditable||["INPUT","TEXTAREA","SELECT"].includes(E.tagName))||S.repeat||(window.dictationModalActive=!0,S.key==="Enter"?(S.preventDefault(),S.stopPropagation(),S.stopImmediatePropagation(),s.value?T():U()):S.key==="Escape"&&(S.preventDefault(),S.stopPropagation(),S.stopImmediatePropagation(),s.value&&T()),setTimeout(()=>{window.dictationModalActive=!1},10))};cn(()=>{document.addEventListener("keydown",v,{capture:!0})});const y=()=>{if(m&&(clearTimeout(m),m=null),A){if(A.readyState===WebSocket.OPEN)try{A.send(JSON.stringify({action:"close"}))}catch(S){console.warn("Error sending close message to WebSocket:",S)}A.close(),A=null}};zl(()=>{document.removeEventListener("keydown",v,{capture:!0}),y(),k()});const g=async()=>{try{const S=await Rw();return await $D(S,"/ws/transcribe")}catch(S){return console.error("Failed to get local IP for WebSocket, using localhost:",S),await $D("localhost","/ws/transcribe")}},w=async()=>{try{return"permissions"in navigator?(await navigator.permissions.query({name:"microphone"})).state:"unknown"}catch(S){return console.log("Permissions API not available:",S),"unknown"}},b=async()=>{try{return(await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}})).getTracks().forEach(E=>E.stop()),!0}catch(S){throw console.error("Failed to get microphone access:",S),S}},x=async()=>{if(!(s.value||o.value||i.value))try{if(o.value=!0,await w()==="denied"){alert("Microphone access is blocked. Please enable microphone permissions in your browser settings and refresh the page.");return}await b(),f=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:16e3}}),o.value=!1,i.value=!0,c.value="";const E=await g();A=new WebSocket(E),m=setTimeout(()=>{A.readyState!==WebSocket.OPEN&&(console.error("WebSocket connection timeout"),alert("Connection timeout. Please check your network connection and try again."),k(),U())},1e4),A.onopen=()=>{m&&(clearTimeout(m),m=null),A.send(JSON.stringify({action:"open"})),d=new MediaRecorder(f),d.ondataavailable=C=>{if(C.data.size>0&&A.readyState===WebSocket.OPEN){const P=new FileReader;P.onload=()=>{const F=P.result.split(",")[1];A.send(JSON.stringify({action:"audio_data",data:F}))},P.readAsDataURL(C.data)}},d.start(1e3),i.value=!1,s.value=!0},A.onmessage=C=>{try{const P=JSON.parse(C.data);if(console.log("WebSocket message received:",P),P.status==="transcription")P.type==="interim"?(c.value=P.fullText+(P.text?" "+P.text:""),a("transcriptionUpdate",c.value),console.log("Interim transcription updated:",c.value)):P.type==="final"&&(c.value=P.fullText,a("transcriptionUpdate",c.value),console.log("Final transcription updated:",c.value));else if(P.status==="completed"){console.log("Received transcription:",P.transcription),console.log("Received summary:",P.summary);const F=(P.summary||P.transcription||"").trim();c.value="Processing complete...",setTimeout(()=>{a("transcriptionComplete",F),U()},1e3),A.close()}else P.status==="error"&&(console.error("WebSocket error:",P.message),A.close())}catch{console.log("Received message:",C.data)}},A.onerror=C=>{console.error("WebSocket error:",C),m&&(clearTimeout(m),m=null),i.value=!1,k()},A.onclose=()=>{m&&(clearTimeout(m),m=null),i.value=!1,s.value=!1}}catch(S){console.error("Error starting recording:",S),o.value=!1,i.value=!1,m&&(clearTimeout(m),m=null);let E="Unable to access microphone. ";S.name==="NotAllowedError"?E+="Please allow microphone access in your browser settings and try again.":S.name==="NotFoundError"?E+="No microphone found on this device.":S.name==="NotSupportedError"?E+="Microphone is not supported in this browser.":S.name==="NotReadableError"?E+="Microphone is already in use by another application.":E+="Please check your permissions and try again.",alert(E),U()}},T=()=>{s.value&&(d&&d.state==="recording"&&d.stop(),A&&A.readyState===WebSocket.OPEN&&A.send(JSON.stringify({action:"close"})),s.value=!1)},U=()=>{k(),r.value=!1},k=()=>{m&&(clearTimeout(m),m=null),d&&d.state==="recording"&&d.stop(),f&&(f.getTracks().forEach(S=>S.stop()),f=null),A&&A.readyState===WebSocket.OPEN&&A.close(),A=null,d=null,s.value=!1,o.value=!1,i.value=!1};return(S,E)=>{const C=I("v-icon"),P=I("v-card-title"),F=I("v-col"),N=I("v-btn"),L=I("v-row"),ie=I("v-card"),le=I("v-progress-circular"),Q=I("v-sheet"),Z=I("v-dialog");return R(),ve(Z,{modelValue:r.value,"onUpdate:modelValue":E[0]||(E[0]=ce=>r.value=ce),persistent:"","max-width":"500px"},{default:u(()=>[l(ie,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[l(L,{"no-gutters":""},{default:u(()=>[l(F,{cols:"12"},{default:u(()=>[l(ie,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(L,{"no-gutters":""},{default:u(()=>[l(F,{cols:"11"},{default:u(()=>[l(P,{class:"pa-0 pl-2"},{default:u(()=>[l(C,{class:ct([{"recording-pulse":s.value},"mr-2"]),color:s.value?"error":i.value?"warning":"primary"},{default:u(()=>[...E[1]||(E[1]=[O(" mdi-microphone ",-1)])]),_:1},8,["class","color"]),O(" "+q(h()),1)]),_:1})]),_:1}),l(F,{cols:"1"},{default:u(()=>[l(N,{icon:"",size:"x-small",onClick:U},{default:u(()=>[l(C,null,{default:u(()=>[...E[2]||(E[2]=[p("img",{src:Yl,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(L,{"no-gutters":""},{default:u(()=>[l(F,{cols:"12"},{default:u(()=>[l(ie,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[p("div",MSe,[l(Q,{class:ct(["transcription-display pa-4",{"transcription-active":s.value}]),rounded:"lg",color:"surface-variant","min-height":"150"},{default:u(()=>[o.value?(R(),me("div",OSe,[l(le,{indeterminate:"",color:"primary",class:"mb-3"}),E[3]||(E[3]=p("p",{class:"text-body-1 text-medium-emphasis"},"Requesting microphone permission...",-1))])):i.value?(R(),me("div",HSe,[l(le,{indeterminate:"",color:"primary",class:"mb-3"}),E[4]||(E[4]=p("p",{class:"text-body-1 text-medium-emphasis"},"Connecting to transcription service...",-1))])):s.value&&!c.value?(R(),me("div",$Se,[...E[5]||(E[5]=[p("div",{class:"listening-indicator mb-3"},[p("div",{class:"listening-dots"},[p("span"),p("span"),p("span")])],-1),p("p",{class:"text-body-1 text-white"},"Listening... Start speaking now",-1)])])):c.value?(R(),me("div",QSe,[p("p",GSe,q(c.value),1)])):(R(),me("div",zSe,[...E[6]||(E[6]=[p("p",{class:"text-body-1"},"Preparing to record...",-1)])]))]),_:1},8,["class"])]),s.value?(R(),me("div",KSe,[l(N,{color:"error",variant:"outlined",onClick:T,size:"large",class:"stop-recording-btn"},{default:u(()=>[l(C,null,{default:u(()=>[...E[7]||(E[7]=[O("mdi-stop",-1)])]),_:1}),E[8]||(E[8]=O(" Stop Dictation ",-1))]),_:1})])):_e("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Gp=Xt(WSe,[["__scopeId","data-v-27cca26f"]]),jSe=async(e=null,t=null)=>{try{const n={};return e&&(n.date=e),t&&(n.status=t),{data:(await dt.get("/pharmacy/bills",{params:n})).data.data.bills||[],error:null}}catch(n){return console.error("Error fetching pharmacy bills:",n),{data:[],error:n}}},SH=async e=>{try{return{data:(await dt.get(`/pharmacy/bills/${e}`)).data.data.bill||null,error:null}}catch(t){return console.error("Error fetching pharmacy bill:",t),{data:null,error:t}}},EH=async e=>{try{return{data:(await dt.post("/pharmacy/bills",{consultationId:e})).data.data.bill||null,error:null}}catch(t){return console.error("Error creating draft bill:",t),{data:null,error:t}}},qSe=async(e,t,n=0)=>{try{return{data:{success:!0,message:(await dt.put(`/pharmacy/bills/${e}`,{items:t,additionalDiscountAmount:n})).data.message},error:null}}catch(a){return console.error("Error updating draft bill:",a),{data:null,error:a}}},YSe=async(e,t=null)=>{try{const n={};return t&&(n.paymentMethod=t.paymentMethod,n.paymentAmount=t.paymentAmount,n.paymentDate=t.paymentDate,n.notes=t.notes),{data:(await dt.post(`/pharmacy/bills/${e}/finalize`,n)).data.data.bill||null,error:null}}catch(n){return console.error("Error finalizing bill:",n),{data:null,error:n}}},XSe=async e=>{try{return{data:(await dt.post(`/pharmacy/bills/${e}/cancel`,{})).data.data.bill||null,error:null}}catch(t){return console.error("Error cancelling bill:",t),{data:null,error:t}}},Vw=async()=>{try{return{data:(await dt.get("/pharmacy/inventory")).data.data.inventory||[],error:null}}catch(e){return console.error("Error fetching pharmacy inventory:",e),{data:[],error:e}}},JSe=async e=>{try{return{data:(await dt.get(`/pharmacy/batches/available/${e}`)).data.data.batches||[],error:null}}catch(t){return console.error("Error fetching available batches:",t),{data:[],error:t}}},BH=async e=>{try{return{data:(await dt.post("/pharmacy/batches",e)).data.data.batch||null,error:null}}catch(t){return console.error("Error creating batch:",t),{data:null,error:t}}},ZSe=async(e,t)=>{try{return{data:(await dt.put(`/pharmacy/batches/${e}`,t)).data.data.batch||null,error:null}}catch(n){return console.error("Error updating batch:",n),{data:null,error:n}}},eEe=async(e,t,n,a="stock_correction",r=void 0)=>{try{const s={purchase:1,stock_correction:2},o={medicineBatchId:e,adjustment:t,note:n};return a&&s[a]&&(o.transactionType=s[a]),r&&(o.inwardBillId=r),{data:(await dt.post("/pharmacy/inventory/adjust",o)).data.data.transaction||null,error:null}}catch(s){return console.error("Error adjusting stock:",s),{data:null,error:s}}},tEe=async(e,t)=>{try{return{data:(await dt.post(`/pharmacy/bills/${e}/return`,{items:t})).data.data||null,error:null}}catch(n){return console.error("Error processing return:",n),{data:null,error:n}}},kH=async()=>{try{return{data:(await dt.get("/pharmacy/config")).data.data.config||null,error:null}}catch(e){return console.error("Error fetching pharmacy config:",e),{data:null,error:e}}},nEe=async e=>{try{return{data:(await dt.put("/pharmacy/config",e)).data.data.config||null,error:null}}catch(t){return console.error("Error updating pharmacy config:",t),{data:null,error:t}}},aEe=async e=>{try{return{data:(await dt.get(`/pharmacy/medicines/search/${encodeURIComponent(e)}`)).data.data.medicines||[],error:null}}catch(t){return console.error("Error searching pharmacy medicines:",t),t.response?.status===404?{data:[],error:null}:{data:[],error:t}}},rEe=async e=>{try{const{updateMedicine:t}=await xr(async()=>{const{updateMedicine:a}=await Promise.resolve().then(()=>_H);return{updateMedicine:a}},void 0,import.meta.url),n=await t(e,{isPharmacy:!0});return{data:n.data,error:n.error}}catch(t){return console.error("Error marking medicine as pharmacy:",t),{data:null,error:t}}},sEe=async e=>{try{const{updateMedicine:t}=await xr(async()=>{const{updateMedicine:a}=await Promise.resolve().then(()=>_H);return{updateMedicine:a}},void 0,import.meta.url),n=await t(e,{isPharmacy:!1});return{data:n.data,error:n.error}}catch(t){return console.error("Error unmarking medicine as pharmacy:",t),{data:null,error:t}}},oEe=async(e,t)=>{try{return console.log("Creating pharmacy payment with data:",{billId:e,paymentData:t}),{success:!0,data:(await dt.post(`/pharmacy/bills/${e}/payments`,t)).data.data,message:"Payment created successfully"}}catch(n){return console.error("Error creating pharmacy payment:",n),{success:!1,error:{message:n.response?.data?.error||n.message||"Failed to create payment",status:n.response?.status||500}}}},iEe=async e=>{try{console.log("Fetching payments for pharmacy bill ID:",e);const t=await dt.get(`/pharmacy/bills/${e}/payments`);return console.log("Raw API response:",t.data),{success:!0,data:t.data.data.payments||[],message:"Payments fetched successfully"}}catch(t){return console.error("Error fetching payments by pharmacy bill:",t),{success:!1,error:{message:t.response?.data?.error||t.message||"Failed to fetch payments",status:t.response?.status||500}}}},lEe=async(e,t)=>{try{return console.log("Deleting pharmacy payment:",{billId:e,paymentId:t}),{success:!0,message:(await dt.delete(`/pharmacy/bills/${e}/payments/${t}`)).data.message||"Payment deleted successfully"}}catch(n){return console.error("Error deleting pharmacy payment:",n),{success:!1,error:{message:n.response?.data?.error||n.message||"Failed to delete payment",status:n.response?.status||500}}}},uEe=async e=>{try{return{data:(await dt.get(`/pharmacy/batches/${e}/usage-check`)).data.data||null,error:null}}catch(t){return console.error("Error checking batch usage:",t),{data:null,error:t}}},cEe=async e=>{try{return{data:(await dt.delete(`/pharmacy/batches/${e}`)).data||null,error:null}}catch(t){return console.error("Error deleting batch:",t),{data:null,error:{message:t.response?.data?.error||t.message||"Failed to delete batch",status:t.response?.status||500}}}},TH=async()=>{try{return{data:(await dt.get("/pharmacy/suppliers")).data.data||[],error:null}}catch(e){return console.error("Error fetching pharmacy suppliers:",e),{data:[],error:e}}},dEe=async e=>{try{return{data:(await dt.post("/pharmacy/suppliers",e)).data.data||null,error:null}}catch(t){return console.error("Error creating supplier:",t),{data:null,error:t}}},AEe=async(e,t)=>{try{return{data:(await dt.put(`/pharmacy/suppliers/${e}`,t)).data.data||null,error:null}}catch(n){return console.error("Error updating supplier:",n),{data:null,error:n}}},fEe=async(e={})=>{try{const t={};return e.supplierId&&(t.supplierId=e.supplierId),e.identifier&&(t.identifier=e.identifier),{data:(await dt.get("/pharmacy/purchase-invoices",{params:t})).data.data||[],error:null}}catch(t){return console.error("Error fetching pharmacy purchase invoices:",t),{data:[],error:t}}},mEe=async e=>{try{return{data:(await dt.post("/pharmacy/purchase-invoices",e)).data.data||null,error:null}}catch(t){return console.error("Error creating purchase invoice:",t),{data:null,error:t}}},yg=async e=>{try{return{data:(await dt.get(`/pharmacy/purchase-invoices/${e}`)).data.data||null,error:null}}catch(t){return console.error("Error fetching purchase invoice:",t),{data:null,error:t}}},hEe=async(e,t)=>{try{return{data:(await dt.put(`/pharmacy/purchase-invoices/${e}`,t)).data.data||null,error:null}}catch(n){return console.error("Error updating purchase invoice:",n),{data:null,error:n}}},vEe=async()=>{try{return{data:((await dt.get("/pharmacy/purchase-invoices")).data.data||[]).map(n=>({id:n.id,identifier:n.pharmacyPurchaseInvoiceIdentifier,date:n.pharmacyPurchaseInvoiceDate,displayText:`${n.pharmacyPurchaseInvoiceIdentifier} (${new Date(n.pharmacyPurchaseInvoiceDate*1e3).toLocaleDateString()})`})),error:null}}catch(e){return console.error("Error fetching purchase invoices for dropdown:",e),{data:[],error:e}}},pEe=async(e,t)=>{try{return{data:(await dt.delete(`/pharmacy/purchase-invoices/${e}/batches/${t}`)).data||null,error:null}}catch(n){return console.error("Error removing batch from invoice:",n),{data:null,error:n}}},IH=async e=>{try{return{data:(await dt.post("/vitals",e)).data.data.vitals,error:null}}catch(t){return console.error("Error creating vitals:",t),{data:null,error:t}}},gEe=async e=>{try{return{data:(await dt.get(`/vitals/consultation/${e}`)).data.data.vitals,error:null}}catch(t){return console.error("Error fetching vitals:",t),{data:null,error:t}}},FH=async(e,t=10,n=0)=>{try{return{data:(await dt.get(`/vitals/patient/${e}?limit=${t}&offset=${n}`)).data.data.vitals,error:null}}catch(a){return console.error("Error fetching patient vitals history:",a),{data:[],error:a}}},PH=async(e,t)=>{try{return{data:(await dt.put(`/vitals/consultation/${e}`,t)).data.data.vitals,error:null}}catch(n){return console.error("Error updating vitals:",n),{data:null,error:n}}},DH=async(e,t,n)=>{try{const a=await IH({consultationId:e,patientId:t,...n});return a.error&&a.error.response?.status===400?await PH(e,n):a}catch(a){return console.error("Error saving vitals:",a),{data:null,error:a}}},Qr=(e,t)=>e==null||e===""?"":`${e} ${t}`,e_=(e,t)=>{if(!t)return{isNormal:null,range:""};const a={pulse:{min:60,max:100,range:"60-100 bpm"},systolicBP:{min:90,max:120,range:"90-120 mmHg"},diastolicBP:{min:60,max:80,range:"60-80 mmHg"},respiratoryRate:{min:12,max:20,range:"12-20 breaths/min"},temperature:{min:36.1,max:37.2,range:"36.1-37.2C"},serumBilirubin:{min:.2,max:1.2,range:"0.2-1.2 mg/dL"},bloodGlucoseFF:{min:70,max:100,range:"70-100 mg/dL"},bloodGlucosePP:{min:0,max:140,range:"<140 mg/dL"},bloodGlucoseRandom:{min:0,max:200,range:"<200 mg/dL"},serumCreatinine:{min:.7,max:1.3,range:"0.7-1.3 mg/dL"}}[e];return a?{isNormal:t>=a.min&&t<=a.max,range:a.range}:{isNormal:null,range:""}},yEe=Object.freeze(Object.defineProperty({__proto__:null,createVitals:IH,fetchVitalsByConsultation:gEe,fetchVitalsByPatient:FH,formatVitalWithUnit:Qr,isVitalInNormalRange:e_,saveVitals:DH,updateVitals:PH},Symbol.toStringTag,{value:"Module"})),DE="vitalsPreferences",rp={pulse:!0,bloodPressure:!0,temperature:!0,respiratoryRate:!0,height:!1,weight:!0,serumBilirubin:!1,bloodGlucoseFF:!1,bloodGlucosePP:!1,bloodGlucoseRandom:!1,serumCreatinine:!1},CT=e=>{try{if(!e)return console.warn("Doctor ID is required to get vitals preferences"),{...rp};const t=localStorage.getItem(DE);if(!t)return{...rp};const a=JSON.parse(t)[e];return a?{...rp,...a,weight:!0}:{...rp}}catch(t){return console.error("Error getting vitals preferences:",t),{...rp}}},_Ee=(e,t)=>{try{if(!e)return console.error("Doctor ID is required to save vitals preferences"),!1;if(!t||typeof t!="object")return console.error("Valid preferences object is required"),!1;let n={};const a=localStorage.getItem(DE);a&&(n=JSON.parse(a));const r={...t,weight:!0};return n[e]=r,localStorage.setItem(DE,JSON.stringify(n)),console.log(`Vitals preferences saved for doctor ${e}:`,r),!0}catch(n){return console.error("Error saving vitals preferences:",n),!1}},wEe={__name:"add-edit-vitals",props:{consultation:{type:Object,required:!0},patient:{type:Object,required:!0},existingVitals:{type:Object,default:null}},emits:["close","vitals-saved"],setup(e,{emit:t}){const n=e,a=t,r=ea(),s=M(!1),o=M(!1),i=ee(()=>r.state.doctorModule.doctorId),c=M({}),A=()=>{const Q=i.value;Q&&(c.value=CT(Q),console.log("Loaded vitals preferences:",c.value))},d=M({pulse:null,systolicBP:null,diastolicBP:null,respiratoryRate:null,weight:null,height:null,temperature:null,serumBilirubin:null,bloodGlucoseFF:null,bloodGlucosePP:null,bloodGlucoseRandom:null,serumCreatinine:null}),f=ee(()=>!!n.existingVitals),m=ee(()=>Object.values(d.value).some(Q=>Q!=null&&Q!=="")),h=ee(()=>c.value.pulse===!0),v=ee(()=>c.value.bloodPressure===!0),y=ee(()=>c.value.temperature===!0),g=ee(()=>c.value.respiratoryRate===!0),w=ee(()=>!0),b=ee(()=>c.value.height===!0),x=ee(()=>c.value.serumBilirubin===!0),T=ee(()=>c.value.bloodGlucoseFF===!0),U=ee(()=>c.value.bloodGlucosePP===!0),k=ee(()=>c.value.bloodGlucoseRandom===!0),S=ee(()=>c.value.serumCreatinine===!0),E=ee(()=>x.value||T.value||U.value||k.value||S.value),C=[Q=>!Q||!isNaN(Q)&&Q>0||"Must be a positive number"],P=[Q=>!Q||!isNaN(Q)&&Q>0&&Q<50||"Must be a valid temperature"],F=[Q=>!Q||!isNaN(Q)&&Q>=0&&Q<=20||"Must be between 0-20 mg/dL"],N=[Q=>!Q||!isNaN(Q)&&Q>=30&&Q<=600||"Must be between 30-600 mg/dL"],L=[Q=>!Q||!isNaN(Q)&&Q>=.1&&Q<=10||"Must be between 0.1-10 mg/dL"],ie=()=>{a("close")},le=async()=>{if(m.value){o.value=!0;try{const Q={};Object.keys(d.value).forEach(ce=>{const J=d.value[ce];J!=null&&J!==""&&(Q[ce]=parseFloat(J))});const Z=await DH(n.consultation.id,n.patient.id,Q);Z.error?console.error("Error saving vitals:",Z.error):(a("vitals-saved",Z.data),ie())}catch(Q){console.error("Error saving vitals:",Q)}finally{o.value=!1}}};return cn(()=>{A(),n.existingVitals&&Object.keys(d.value).forEach(Q=>{n.existingVitals[Q]!==null&&n.existingVitals[Q]!==void 0&&(d.value[Q]=n.existingVitals[Q])})}),(Q,Z)=>{const ce=I("v-card-title"),J=I("v-col"),se=I("v-icon"),G=I("v-btn"),D=I("v-row"),j=I("v-card"),ne=I("v-text-field"),H=I("v-subheader"),te=I("v-divider"),Y=I("v-form");return R(),ve(j,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(D,{"no-gutters":""},{default:u(()=>[l(J,{cols:"12"},{default:u(()=>[l(j,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(D,{"no-gutters":""},{default:u(()=>[l(J,{cols:"11"},{default:u(()=>[l(ce,{class:"pa-0 pl-2"},{default:u(()=>[O(q(f.value?"Edit Vitals":"Add Vitals"),1)]),_:1})]),_:1}),l(J,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(G,{icon:"",size:"x-small",onClick:ie},{default:u(()=>[l(se,null,{default:u(()=>[...Z[13]||(Z[13]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(D,{"no-gutters":""},{default:u(()=>[l(J,{cols:"12"},{default:u(()=>[l(j,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(Y,{modelValue:s.value,"onUpdate:modelValue":Z[12]||(Z[12]=K=>s.value=K),"validate-on":"blur"},{default:u(()=>[l(D,{"no-gutters":""},{default:u(()=>[h.value?(R(),ve(J,{key:0,cols:"6",class:"pr-1"},{default:u(()=>[l(ne,{label:"Pulse (bpm)",density:"compact",type:"number",modelValue:d.value.pulse,"onUpdate:modelValue":Z[0]||(Z[0]=K=>d.value.pulse=K),rules:C,suffix:"bpm",hint:"Normal range: 60-100 bpm","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1})):_e("",!0),g.value?(R(),ve(J,{key:1,cols:h.value?6:12,class:ct(h.value?"pl-1":"")},{default:u(()=>[l(ne,{label:"Respiratory Rate",density:"compact",type:"number",modelValue:d.value.respiratoryRate,"onUpdate:modelValue":Z[1]||(Z[1]=K=>d.value.respiratoryRate=K),rules:C,suffix:"breaths/min",hint:"Normal range: 12-20 breaths/min","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1},8,["cols","class"])):_e("",!0)]),_:1}),v.value?(R(),ve(D,{key:0,"no-gutters":""},{default:u(()=>[l(J,{cols:"6",class:"pr-1"},{default:u(()=>[l(ne,{label:"Systolic BP",density:"compact",type:"number",modelValue:d.value.systolicBP,"onUpdate:modelValue":Z[2]||(Z[2]=K=>d.value.systolicBP=K),rules:C,suffix:"mmHg",hint:"Normal: 90-120","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1}),l(J,{cols:"6",class:"pl-1"},{default:u(()=>[l(ne,{label:"Diastolic BP",density:"compact",type:"number",modelValue:d.value.diastolicBP,"onUpdate:modelValue":Z[3]||(Z[3]=K=>d.value.diastolicBP=K),rules:C,suffix:"mmHg",hint:"Normal: 60-80","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})):_e("",!0),l(D,{"no-gutters":""},{default:u(()=>[w.value?(R(),ve(J,{key:0,cols:"6",class:"pr-1"},{default:u(()=>[l(ne,{label:"Weight",density:"compact",type:"number",modelValue:d.value.weight,"onUpdate:modelValue":Z[4]||(Z[4]=K=>d.value.weight=K),rules:C,suffix:"kg",clearable:""},null,8,["modelValue"])]),_:1})):_e("",!0),b.value?(R(),ve(J,{key:1,cols:w.value?6:12,class:ct(w.value?"pl-1":"")},{default:u(()=>[l(ne,{label:"Height",density:"compact",type:"number",modelValue:d.value.height,"onUpdate:modelValue":Z[5]||(Z[5]=K=>d.value.height=K),rules:C,suffix:"cm",clearable:""},null,8,["modelValue"])]),_:1},8,["cols","class"])):_e("",!0)]),_:1}),y.value?(R(),ve(D,{key:1,"no-gutters":""},{default:u(()=>[l(J,{cols:"6",class:"pr-1"},{default:u(()=>[l(ne,{label:"Temperature",density:"compact",type:"number",step:"0.1",modelValue:d.value.temperature,"onUpdate:modelValue":Z[6]||(Z[6]=K=>d.value.temperature=K),rules:P,suffix:"C",hint:"Normal range: 36.1-37.2C","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})):_e("",!0),E.value?(R(),ve(D,{key:2,"no-gutters":"",class:"mt-4"},{default:u(()=>[l(J,{cols:"12"},{default:u(()=>[l(H,{class:"text-subtitle-2 font-weight-medium pa-0 mb-2"},{default:u(()=>[...Z[14]||(Z[14]=[O("Blood Chemistry",-1)])]),_:1})]),_:1})]),_:1})):_e("",!0),x.value||S.value?(R(),ve(D,{key:3,"no-gutters":""},{default:u(()=>[x.value?(R(),ve(J,{key:0,cols:S.value?6:12,class:ct(S.value?"pr-1":"")},{default:u(()=>[l(ne,{label:"Serum Bilirubin",density:"compact",type:"number",step:"0.1",modelValue:d.value.serumBilirubin,"onUpdate:modelValue":Z[7]||(Z[7]=K=>d.value.serumBilirubin=K),rules:F,suffix:"mg/dL",hint:"Normal range: 0.2-1.2 mg/dL","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1},8,["cols","class"])):_e("",!0),S.value?(R(),ve(J,{key:1,cols:x.value?6:12,class:ct(x.value?"pl-1":"")},{default:u(()=>[l(ne,{label:"Serum Creatinine",density:"compact",type:"number",step:"0.1",modelValue:d.value.serumCreatinine,"onUpdate:modelValue":Z[8]||(Z[8]=K=>d.value.serumCreatinine=K),rules:L,suffix:"mg/dL",hint:"Normal range: 0.7-1.3 mg/dL","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1},8,["cols","class"])):_e("",!0)]),_:1})):_e("",!0),T.value||U.value||k.value?(R(),ve(D,{key:4,"no-gutters":"",class:"mt-2"},{default:u(()=>[T.value?(R(),ve(J,{key:0,cols:"4",class:"pr-1"},{default:u(()=>[l(ne,{label:"Blood Glucose (FF)",density:"compact",type:"number",modelValue:d.value.bloodGlucoseFF,"onUpdate:modelValue":Z[9]||(Z[9]=K=>d.value.bloodGlucoseFF=K),rules:N,suffix:"mg/dL",hint:"Normal: 70-100 mg/dL","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1})):_e("",!0),U.value?(R(),ve(J,{key:1,cols:"4",class:ct([T.value?"px-1":"pr-1",k.value?"":"pl-0"])},{default:u(()=>[l(ne,{label:"Blood Glucose (PP)",density:"compact",type:"number",modelValue:d.value.bloodGlucosePP,"onUpdate:modelValue":Z[10]||(Z[10]=K=>d.value.bloodGlucosePP=K),rules:N,suffix:"mg/dL",hint:"Normal: <140 mg/dL","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1},8,["class"])):_e("",!0),k.value?(R(),ve(J,{key:2,cols:"4",class:"pl-1"},{default:u(()=>[l(ne,{label:"Blood Glucose (Random)",density:"compact",type:"number",modelValue:d.value.bloodGlucoseRandom,"onUpdate:modelValue":Z[11]||(Z[11]=K=>d.value.bloodGlucoseRandom=K),rules:N,suffix:"mg/dL",hint:"Normal: <200 mg/dL","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1})):_e("",!0)]),_:1})):_e("",!0),l(te,{class:"mt-3"}),l(D,{"no-gutters":""},{default:u(()=>[l(J,{cols:"2"}),l(J,{cols:"8",class:"mt-3 d-flex justify-center gap-2"},{default:u(()=>[l(G,{variant:"outlined",onClick:ie},{default:u(()=>[...Z[15]||(Z[15]=[O("Cancel",-1)])]),_:1}),l(G,{variant:"elevated",color:"primary",onClick:le,disabled:!m.value,loading:o.value},{default:u(()=>[O(q(f.value?"Update":"Save"),1)]),_:1},8,["disabled","loading"])]),_:1}),l(J,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},bEe=Xt(wEe,[["__scopeId","data-v-7bcda799"]]),xEe={key:0,class:"d-flex justify-center align-center",style:{height:"200px"}},CEe={key:1,class:"text-center pa-4"},SEe={class:"text-error"},EEe={key:2,class:"text-center pa-4"},BEe={key:3},kEe={class:"font-weight-medium"},TEe={key:1,class:"text-grey"},IEe={key:1,class:"text-grey"},FEe={key:1,class:"text-grey"},PEe={key:1,class:"text-grey"},DEe={key:0,class:"font-weight-medium"},UEe={key:1,class:"text-grey"},REe={key:0,class:"font-weight-medium"},NEe={key:1,class:"text-grey"},VEe={key:1,class:"text-grey"},LEe={key:1,class:"text-grey"},MEe={key:1,class:"text-grey"},OEe={key:1,class:"text-grey"},HEe={key:1,class:"text-grey"},$Ee={__name:"vitals-trends",props:{patientId:{type:[String,Number],required:!0},patientName:{type:String,default:"Patient"}},emits:["close"],setup(e){const t=e,n=ea(),a=M([]),r=M(!1),s=M(null),o=ee(()=>n.state.doctorModule.doctorId),i=M({}),c=()=>{const g=o.value;g&&(i.value=CT(g),console.log("Loaded vitals preferences for trends:",i.value))},A=[{title:"Date",key:"date",width:"120px",alwaysShow:!0},{title:"Pulse",key:"pulse",width:"100px",vitalKey:"pulse"},{title:"Blood Pressure",key:"bloodPressure",width:"140px",vitalKey:"bloodPressure"},{title:"Temperature",key:"temperature",width:"120px",vitalKey:"temperature"},{title:"Respiratory Rate",key:"respiratoryRate",width:"140px",vitalKey:"respiratoryRate"},{title:"Weight",key:"weight",width:"100px",alwaysShow:!0},{title:"Height",key:"height",width:"100px",vitalKey:"height"},{title:"Serum Bilirubin",key:"serumBilirubin",width:"140px",vitalKey:"serumBilirubin"},{title:"Blood Glucose FF",key:"bloodGlucoseFF",width:"140px",vitalKey:"bloodGlucoseFF"},{title:"Blood Glucose PP",key:"bloodGlucosePP",width:"140px",vitalKey:"bloodGlucosePP"},{title:"Blood Glucose Random",key:"bloodGlucoseRandom",width:"160px",vitalKey:"bloodGlucoseRandom"},{title:"Serum Creatinine",key:"serumCreatinine",width:"140px",vitalKey:"serumCreatinine"}],d=ee(()=>A.filter(g=>{if(g.alwaysShow)return!0;const w=g.vitalKey;return i.value[w]===!0})),f=ee(()=>a.value.map(g=>({date:g.createdAt,pulse:g.pulse,systolicBP:g.systolicBP,diastolicBP:g.diastolicBP,temperature:g.temperature,respiratoryRate:g.respiratoryRate,weight:g.weight,height:g.height,bloodPressure:g.systolicBP&&g.diastolicBP?`${g.systolicBP}/${g.diastolicBP}`:null,serumBilirubin:g.serumBilirubin,bloodGlucoseFF:g.bloodGlucoseFF,bloodGlucosePP:g.bloodGlucosePP,bloodGlucoseRandom:g.bloodGlucoseRandom,serumCreatinine:g.serumCreatinine}))),m=async()=>{if(!t.patientId){s.value="Patient ID is required";return}r.value=!0,s.value=null;try{const g=await FH(t.patientId,50,0);if(g.error)throw new Error(g.error.message||"Failed to fetch vitals history");a.value=g.data||[]}catch(g){console.error("Error fetching vitals history:",g),s.value=g.message||"Failed to fetch vitals history"}finally{r.value=!1}},h=g=>{if(!g)return"";try{return za(g)}catch(w){return console.error("Error formatting date:",g,w),g||""}},v=(g,w)=>{const b=e_(g,w);return b.isNormal===null?"grey":b.isNormal?"success":"warning"},y=(g,w)=>{const b=e_("systolicBP",g),x=e_("diastolicBP",w);return b.isNormal===null||x.isNormal===null?"grey":b.isNormal&&x.isNormal?"success":"warning"};return cn(()=>{c(),m()}),(g,w)=>{const b=I("v-card-title"),x=I("v-col"),T=I("v-icon"),U=I("v-btn"),k=I("v-row"),S=I("v-card"),E=I("v-progress-circular"),C=I("v-chip"),P=I("v-data-table");return R(),ve(S,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[l(k,{"no-gutters":""},{default:u(()=>[l(x,{cols:"12"},{default:u(()=>[l(S,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(k,{"no-gutters":""},{default:u(()=>[l(x,{cols:"11"},{default:u(()=>[l(b,{class:"pa-0 pl-2"},{default:u(()=>[O("Vitals Trends - "+q(e.patientName),1)]),_:1})]),_:1}),l(x,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(U,{icon:"",size:"x-small",onClick:w[0]||(w[0]=F=>g.$emit("close"))},{default:u(()=>[l(T,null,{default:u(()=>[...w[1]||(w[1]=[p("img",{src:Yl,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(k,{"no-gutters":""},{default:u(()=>[l(x,{cols:"12"},{default:u(()=>[l(S,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[r.value?(R(),me("div",xEe,[l(E,{indeterminate:"",color:"primary"})])):s.value?(R(),me("div",CEe,[l(T,{color:"error",size:"48",class:"mb-2"},{default:u(()=>[...w[2]||(w[2]=[O("mdi-alert-circle",-1)])]),_:1}),p("p",SEe,q(s.value),1),l(U,{onClick:m,color:"primary",variant:"outlined"},{default:u(()=>[...w[3]||(w[3]=[O(" Try Again ",-1)])]),_:1})])):!a.value||a.value.length===0?(R(),me("div",EEe,[l(T,{color:"grey",size:"48",class:"mb-2"},{default:u(()=>[...w[4]||(w[4]=[O("mdi-chart-line-variant",-1)])]),_:1}),w[5]||(w[5]=p("p",{class:"text-grey"},"No vitals history found for this patient",-1))])):(R(),me("div",BEe,[l(P,{headers:d.value,items:f.value,"items-per-page":10,class:"elevation-1",density:"compact"},hh({"item.date":u(({item:F})=>[p("span",kEe,q(h(F.date)),1)]),"item.weight":u(({item:F})=>[F.weight?(R(),me("span",DEe,q(Oe(Qr)(F.weight,"kg")),1)):(R(),me("span",UEe,"-"))]),_:2},[i.value.pulse?{name:"item.pulse",fn:u(({item:F})=>[F.pulse?(R(),ve(C,{key:0,color:v("pulse",F.pulse),size:"small",variant:"tonal"},{default:u(()=>[O(q(Oe(Qr)(F.pulse,"bpm")),1)]),_:2},1032,["color"])):(R(),me("span",TEe,"-"))]),key:"0"}:void 0,i.value.bloodPressure?{name:"item.bloodPressure",fn:u(({item:F})=>[F.systolicBP&&F.diastolicBP?(R(),ve(C,{key:0,color:y(F.systolicBP,F.diastolicBP),size:"small",variant:"tonal"},{default:u(()=>[O(q(F.systolicBP)+"/"+q(F.diastolicBP)+" mmHg ",1)]),_:2},1032,["color"])):(R(),me("span",IEe,"-"))]),key:"1"}:void 0,i.value.temperature?{name:"item.temperature",fn:u(({item:F})=>[F.temperature?(R(),ve(C,{key:0,color:v("temperature",F.temperature),size:"small",variant:"tonal"},{default:u(()=>[O(q(Oe(Qr)(F.temperature,"C")),1)]),_:2},1032,["color"])):(R(),me("span",FEe,"-"))]),key:"2"}:void 0,i.value.respiratoryRate?{name:"item.respiratoryRate",fn:u(({item:F})=>[F.respiratoryRate?(R(),ve(C,{key:0,color:v("respiratoryRate",F.respiratoryRate),size:"small",variant:"tonal"},{default:u(()=>[O(q(Oe(Qr)(F.respiratoryRate,"breaths/min")),1)]),_:2},1032,["color"])):(R(),me("span",PEe,"-"))]),key:"3"}:void 0,i.value.height?{name:"item.height",fn:u(({item:F})=>[F.height?(R(),me("span",REe,q(Oe(Qr)(F.height,"cm")),1)):(R(),me("span",NEe,"-"))]),key:"4"}:void 0,i.value.serumBilirubin?{name:"item.serumBilirubin",fn:u(({item:F})=>[F.serumBilirubin?(R(),ve(C,{key:0,color:v("serumBilirubin",F.serumBilirubin),size:"small",variant:"tonal"},{default:u(()=>[O(q(Oe(Qr)(F.serumBilirubin,"mg/dL")),1)]),_:2},1032,["color"])):(R(),me("span",VEe,"-"))]),key:"5"}:void 0,i.value.bloodGlucoseFF?{name:"item.bloodGlucoseFF",fn:u(({item:F})=>[F.bloodGlucoseFF?(R(),ve(C,{key:0,color:v("bloodGlucoseFF",F.bloodGlucoseFF),size:"small",variant:"tonal"},{default:u(()=>[O(q(Oe(Qr)(F.bloodGlucoseFF,"mg/dL")),1)]),_:2},1032,["color"])):(R(),me("span",LEe,"-"))]),key:"6"}:void 0,i.value.bloodGlucosePP?{name:"item.bloodGlucosePP",fn:u(({item:F})=>[F.bloodGlucosePP?(R(),ve(C,{key:0,color:v("bloodGlucosePP",F.bloodGlucosePP),size:"small",variant:"tonal"},{default:u(()=>[O(q(Oe(Qr)(F.bloodGlucosePP,"mg/dL")),1)]),_:2},1032,["color"])):(R(),me("span",MEe,"-"))]),key:"7"}:void 0,i.value.bloodGlucoseRandom?{name:"item.bloodGlucoseRandom",fn:u(({item:F})=>[F.bloodGlucoseRandom?(R(),ve(C,{key:0,color:v("bloodGlucoseRandom",F.bloodGlucoseRandom),size:"small",variant:"tonal"},{default:u(()=>[O(q(Oe(Qr)(F.bloodGlucoseRandom,"mg/dL")),1)]),_:2},1032,["color"])):(R(),me("span",OEe,"-"))]),key:"8"}:void 0,i.value.serumCreatinine?{name:"item.serumCreatinine",fn:u(({item:F})=>[F.serumCreatinine?(R(),ve(C,{key:0,color:v("serumCreatinine",F.serumCreatinine),size:"small",variant:"tonal"},{default:u(()=>[O(q(Oe(Qr)(F.serumCreatinine,"mg/dL")),1)]),_:2},1032,["color"])):(R(),me("span",HEe,"-"))]),key:"9"}:void 0]),1032,["headers","items"])]))]),_:1})]),_:1})]),_:1})]),_:1})}}},QEe=Xt($Ee,[["__scopeId","data-v-145a88d7"]]),GEe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M21,17H7V3H21M21,1H7A2,2%200%200,0%205,3V17A2,2%200%200,0%207,19H21A2,2%200%200,0%2023,17V3A2,2%200%200,0%2021,1M3,5H1V21A2,2%200%200,0%203,23H19V21H3M15.96,10.29L13.21,13.83L11.25,11.47L8.5,15H19.5L15.96,10.29Z'%20/%3e%3c/svg%3e",Gi={MAX_FILE_SIZE:25*1024*1024,MAX_FILES:15,ACCEPTED_IMAGE_TYPES:["image/jpeg","image/jpg","image/png","image/gif","image/bmp","image/webp"],ACCEPTED_DOCUMENT_TYPES:["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","text/csv"],ACCEPTED_VIDEO_TYPES:["video/mp4","video/avi","video/mov","video/wmv"]},lh=e=>{if(e===0)return"0 B";const t=1024,n=["B","KB","MB","GB"],a=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,a)).toFixed(2))+" "+n[a]},zEe=e=>Gi.ACCEPTED_IMAGE_TYPES.includes(e)?"image":Gi.ACCEPTED_DOCUMENT_TYPES.includes(e)?"document":Gi.ACCEPTED_VIDEO_TYPES.includes(e)?"video":"other",KEe=e=>{if(e.size>Gi.MAX_FILE_SIZE)return{success:!1,error:`File "${e.name}" is too large. Maximum size is ${lh(Gi.MAX_FILE_SIZE)}. Current size: ${lh(e.size)}`,type:"file_size"};const t=zEe(e.type);return t==="other"?{success:!1,error:`File "${e.name}" has unsupported file type: ${e.type}. Please use medical image formats (JPEG, PNG, etc.) or documents (PDF, Word, etc.)`,type:"file_type"}:{success:!0,file:e,category:t,size:e.size,formattedSize:lh(e.size)}},WEe=e=>{const t=Array.from(e||[]);if(t.length>Gi.MAX_FILES)return{success:!1,error:`Too many files selected. Maximum allowed: ${Gi.MAX_FILES}. Selected: ${t.length}`,type:"file_count",validFiles:[],errors:[]};const n=[],a=[];let r=0;t.forEach((o,i)=>{const c=KEe(o);c.success?(n.push({file:o,index:i,category:c.category,size:c.size,formattedSize:c.formattedSize}),r+=o.size):a.push({index:i,fileName:o.name,error:c.error,type:c.type})});const s={totalFiles:t.length,validFiles:n.length,invalidFiles:a.length,totalSize:r,formattedTotalSize:lh(r),categories:{}};return n.forEach(o=>{s.categories[o.category]=(s.categories[o.category]||0)+1}),{success:a.length===0,validFiles:n,errors:a,summary:s,hasWarnings:n.length>0&&a.length>0}},jEe=e=>{const t=[];if(e.success){const{summary:n}=e;t.push({type:"success",title:"Files Ready for Upload",message:`${n.validFiles} file(s) selected (${n.formattedTotalSize})`});const a=Object.keys(n.categories);if(a.length>1){const r=a.map(s=>`${n.categories[s]} ${s}${n.categories[s]>1?"s":""}`).join(", ");t.push({type:"info",title:"File Types",message:r})}}else e.hasWarnings?t.push({type:"warning",title:"Some Files Cannot Be Uploaded",message:`${e.validFiles.length} valid, ${e.errors.length} invalid`}):t.push({type:"error",title:"Upload Not Possible",message:"All selected files have validation errors"});return e.errors.forEach(n=>{t.push({type:"error",title:n.fileName,message:n.error})}),t},qEe=()=>({limits:{maxFiles:Gi.MAX_FILES,maxFileSize:lh(Gi.MAX_FILE_SIZE),maxFileSizeBytes:Gi.MAX_FILE_SIZE},acceptedTypes:{images:"JPEG, PNG, GIF, BMP, WebP",documents:"PDF, Word documents, Text files",videos:"MP4, AVI, MOV, WMV"},recommendations:["For medical images: Use high-quality JPEG or PNG format","For X-rays and scans: Ensure images are clear and properly oriented","For documents: PDF format is preferred for reports and forms","Compress large files if possible while maintaining medical image quality"],warnings:[`Files larger than ${lh(Gi.MAX_FILE_SIZE)} will be rejected`,`Maximum ${Gi.MAX_FILES} files can be uploaded at once`,"Unsupported file types will be automatically filtered out"]});function YEe(e,t){return t.forEach((function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach((function(a){if(a!=="default"&&!(a in e)){var r=Object.getOwnPropertyDescriptor(n,a);Object.defineProperty(e,a,r.get?r:{enumerable:!0,get:function(){return n[a]}})}}))})),Object.freeze(e)}function UH(e,t){return new Promise((function(n,a){let r;return XEe(e).then((function(s){try{return r=s,n(new Blob([t.slice(0,2),r,t.slice(2)],{type:"image/jpeg"}))}catch(o){return a(o)}}),a)}))}const XEe=e=>new Promise(((t,n)=>{const a=new FileReader;a.addEventListener("load",(({target:{result:r}})=>{const s=new DataView(r);let o=0;if(s.getUint16(o)!==65496)return n("not a valid JPEG");for(o+=2;;){const i=s.getUint16(o);if(i===65498)break;const c=s.getUint16(o+2);if(i===65505&&s.getUint32(o+4)===1165519206){const A=o+10;let d;switch(s.getUint16(A)){case 18761:d=!0;break;case 19789:d=!1;break;default:return n("TIFF header contains invalid endian")}if(s.getUint16(A+2,d)!==42)return n("TIFF header contains invalid version");const f=s.getUint32(A+4,d),m=A+f+2+12*s.getUint16(A+f,d);for(let h=A+f+2;h<m;h+=12)if(s.getUint16(h,d)==274){if(s.getUint16(h+2,d)!==3)return n("Orientation data type is invalid");if(s.getUint32(h+4,d)!==1)return n("Orientation data count is invalid");s.setUint16(h+8,1,d);break}return t(r.slice(o,o+2+c))}o+=2+c}return t(new Blob)})),a.readAsArrayBuffer(e)}));var a2={},JEe={get exports(){return a2},set exports(e){a2=e}};(function(e){var t,n,a={};JEe.exports=a,a.parse=function(r,s){for(var o=a.bin.readUshort,i=a.bin.readUint,c=0,A={},d=new Uint8Array(r),f=d.length-4;i(d,f)!=101010256;)f--;c=f,c+=4;var m=o(d,c+=4);o(d,c+=2);var h=i(d,c+=2),v=i(d,c+=4);c+=4,c=v;for(var y=0;y<m;y++){i(d,c),c+=4,c+=4,c+=4,i(d,c+=4),h=i(d,c+=4);var g=i(d,c+=4),w=o(d,c+=4),b=o(d,c+2),x=o(d,c+4);c+=6;var T=i(d,c+=8);c+=4,c+=w+b+x,a._readLocal(d,T,A,h,g,s)}return A},a._readLocal=function(r,s,o,i,c,A){var d=a.bin.readUshort,f=a.bin.readUint;f(r,s),d(r,s+=4),d(r,s+=2);var m=d(r,s+=2);f(r,s+=2),f(r,s+=4),s+=4;var h=d(r,s+=8),v=d(r,s+=2);s+=2;var y=a.bin.readUTF8(r,s,h);if(s+=h,s+=v,A)o[y]={size:c,csize:i};else{var g=new Uint8Array(r.buffer,s);if(m==0)o[y]=new Uint8Array(g.buffer.slice(s,s+i));else{if(m!=8)throw"unknown compression method: "+m;var w=new Uint8Array(c);a.inflateRaw(g,w),o[y]=w}}},a.inflateRaw=function(r,s){return a.F.inflate(r,s)},a.inflate=function(r,s){return r[0],r[1],a.inflateRaw(new Uint8Array(r.buffer,r.byteOffset+2,r.length-6),s)},a.deflate=function(r,s){s==null&&(s={level:6});var o=0,i=new Uint8Array(50+Math.floor(1.1*r.length));i[o]=120,i[o+1]=156,o+=2,o=a.F.deflateRaw(r,i,o,s.level);var c=a.adler(r,0,r.length);return i[o+0]=c>>>24&255,i[o+1]=c>>>16&255,i[o+2]=c>>>8&255,i[o+3]=c>>>0&255,new Uint8Array(i.buffer,0,o+4)},a.deflateRaw=function(r,s){s==null&&(s={level:6});var o=new Uint8Array(50+Math.floor(1.1*r.length)),i=a.F.deflateRaw(r,o,i,s.level);return new Uint8Array(o.buffer,0,i)},a.encode=function(r,s){s==null&&(s=!1);var o=0,i=a.bin.writeUint,c=a.bin.writeUshort,A={};for(var d in r){var f=!a._noNeed(d)&&!s,m=r[d],h=a.crc.crc(m,0,m.length);A[d]={cpr:f,usize:m.length,crc:h,file:f?a.deflateRaw(m):m}}for(var d in A)o+=A[d].file.length+30+46+2*a.bin.sizeUTF8(d);o+=22;var v=new Uint8Array(o),y=0,g=[];for(var d in A){var w=A[d];g.push(y),y=a._writeHeader(v,y,d,w,0)}var b=0,x=y;for(var d in A)w=A[d],g.push(y),y=a._writeHeader(v,y,d,w,1,g[b++]);var T=y-x;return i(v,y,101010256),y+=4,c(v,y+=4,b),c(v,y+=2,b),i(v,y+=2,T),i(v,y+=4,x),y+=4,y+=2,v.buffer},a._noNeed=function(r){var s=r.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(s)!=-1},a._writeHeader=function(r,s,o,i,c,A){var d=a.bin.writeUint,f=a.bin.writeUshort,m=i.file;return d(r,s,c==0?67324752:33639248),s+=4,c==1&&(s+=2),f(r,s,20),f(r,s+=2,0),f(r,s+=2,i.cpr?8:0),d(r,s+=2,0),d(r,s+=4,i.crc),d(r,s+=4,m.length),d(r,s+=4,i.usize),f(r,s+=4,a.bin.sizeUTF8(o)),f(r,s+=2,0),s+=2,c==1&&(s+=2,s+=2,d(r,s+=6,A),s+=4),s+=a.bin.writeUTF8(r,s,o),c==0&&(r.set(m,s),s+=m.length),s},a.crc={table:(function(){for(var r=new Uint32Array(256),s=0;s<256;s++){for(var o=s,i=0;i<8;i++)1&o?o=3988292384^o>>>1:o>>>=1;r[s]=o}return r})(),update:function(r,s,o,i){for(var c=0;c<i;c++)r=a.crc.table[255&(r^s[o+c])]^r>>>8;return r},crc:function(r,s,o){return 4294967295^a.crc.update(4294967295,r,s,o)}},a.adler=function(r,s,o){for(var i=1,c=0,A=s,d=s+o;A<d;){for(var f=Math.min(A+5552,d);A<f;)c+=i+=r[A++];i%=65521,c%=65521}return c<<16|i},a.bin={readUshort:function(r,s){return r[s]|r[s+1]<<8},writeUshort:function(r,s,o){r[s]=255&o,r[s+1]=o>>8&255},readUint:function(r,s){return 16777216*r[s+3]+(r[s+2]<<16|r[s+1]<<8|r[s])},writeUint:function(r,s,o){r[s]=255&o,r[s+1]=o>>8&255,r[s+2]=o>>16&255,r[s+3]=o>>24&255},readASCII:function(r,s,o){for(var i="",c=0;c<o;c++)i+=String.fromCharCode(r[s+c]);return i},writeASCII:function(r,s,o){for(var i=0;i<o.length;i++)r[s+i]=o.charCodeAt(i)},pad:function(r){return r.length<2?"0"+r:r},readUTF8:function(r,s,o){for(var i,c="",A=0;A<o;A++)c+="%"+a.bin.pad(r[s+A].toString(16));try{i=decodeURIComponent(c)}catch{return a.bin.readASCII(r,s,o)}return i},writeUTF8:function(r,s,o){for(var i=o.length,c=0,A=0;A<i;A++){var d=o.charCodeAt(A);if((4294967168&d)==0)r[s+c]=d,c++;else if((4294965248&d)==0)r[s+c]=192|d>>6,r[s+c+1]=128|d>>0&63,c+=2;else if((4294901760&d)==0)r[s+c]=224|d>>12,r[s+c+1]=128|d>>6&63,r[s+c+2]=128|d>>0&63,c+=3;else{if((4292870144&d)!=0)throw"e";r[s+c]=240|d>>18,r[s+c+1]=128|d>>12&63,r[s+c+2]=128|d>>6&63,r[s+c+3]=128|d>>0&63,c+=4}}return c},sizeUTF8:function(r){for(var s=r.length,o=0,i=0;i<s;i++){var c=r.charCodeAt(i);if((4294967168&c)==0)o++;else if((4294965248&c)==0)o+=2;else if((4294901760&c)==0)o+=3;else{if((4292870144&c)!=0)throw"e";o+=4}}return o}},a.F={},a.F.deflateRaw=function(r,s,o,i){var c=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][i],A=a.F.U,d=a.F._goodIndex;a.F._hash;var f=a.F._putsE,m=0,h=o<<3,v=0,y=r.length;if(i==0){for(;m<y;)f(s,h,m+(F=Math.min(65535,y-m))==y?1:0),h=a.F._copyExact(r,m,F,s,h+8),m+=F;return h>>>3}var g=A.lits,w=A.strt,b=A.prev,x=0,T=0,U=0,k=0,S=0,E=0;for(y>2&&(w[E=a.F._hash(r,0)]=0),m=0;m<y;m++){if(S=E,m+1<y-2){E=a.F._hash(r,m+1);var C=m+1&32767;b[C]=w[E],w[E]=C}if(v<=m){(x>14e3||T>26697)&&y-m>100&&(v<m&&(g[x]=m-v,x+=2,v=m),h=a.F._writeBlock(m==y-1||v==y?1:0,g,x,k,r,U,m-U,s,h),x=T=k=0,U=m);var P=0;m<y-2&&(P=a.F._bestMatch(r,m,b,S,Math.min(c[2],y-m),c[3]));var F=P>>>16,N=65535&P;if(P!=0){N=65535&P;var L=d(F=P>>>16,A.of0);A.lhst[257+L]++;var ie=d(N,A.df0);A.dhst[ie]++,k+=A.exb[L]+A.dxb[ie],g[x]=F<<23|m-v,g[x+1]=N<<16|L<<8|ie,x+=2,v=m+F}else A.lhst[r[m]]++;T++}}for(U==m&&r.length!=0||(v<m&&(g[x]=m-v,x+=2,v=m),h=a.F._writeBlock(1,g,x,k,r,U,m-U,s,h),x=0,T=0,x=T=k=0,U=m);(7&h)!=0;)h++;return h>>>3},a.F._bestMatch=function(r,s,o,i,c,A){var d=32767&s,f=o[d],m=d-f+32768&32767;if(f==d||i!=a.F._hash(r,s-m))return 0;for(var h=0,v=0,y=Math.min(32767,s);m<=y&&--A!=0&&f!=d;){if(h==0||r[s+h]==r[s+h-m]){var g=a.F._howLong(r,s,m);if(g>h){if(v=m,(h=g)>=c)break;m+2<g&&(g=m+2);for(var w=0,b=0;b<g-2;b++){var x=s-m+b+32768&32767,T=x-o[x]+32768&32767;T>w&&(w=T,f=x)}}}m+=(d=f)-(f=o[d])+32768&32767}return h<<16|v},a.F._howLong=function(r,s,o){if(r[s]!=r[s-o]||r[s+1]!=r[s+1-o]||r[s+2]!=r[s+2-o])return 0;var i=s,c=Math.min(r.length,s+258);for(s+=3;s<c&&r[s]==r[s-o];)s++;return s-i},a.F._hash=function(r,s){return(r[s]<<8|r[s+1])+(r[s+2]<<4)&65535},a.saved=0,a.F._writeBlock=function(r,s,o,i,c,A,d,f,m){var h,v,y,g,w,b,x,T,U,k=a.F.U,S=a.F._putsF,E=a.F._putsE;k.lhst[256]++,v=(h=a.F.getTrees())[0],y=h[1],g=h[2],w=h[3],b=h[4],x=h[5],T=h[6],U=h[7];var C=32+((m+3&7)==0?0:8-(m+3&7))+(d<<3),P=i+a.F.contSize(k.fltree,k.lhst)+a.F.contSize(k.fdtree,k.dhst),F=i+a.F.contSize(k.ltree,k.lhst)+a.F.contSize(k.dtree,k.dhst);F+=14+3*x+a.F.contSize(k.itree,k.ihst)+(2*k.ihst[16]+3*k.ihst[17]+7*k.ihst[18]);for(var N=0;N<286;N++)k.lhst[N]=0;for(N=0;N<30;N++)k.dhst[N]=0;for(N=0;N<19;N++)k.ihst[N]=0;var L=C<P&&C<F?0:P<F?1:2;if(S(f,m,r),S(f,m+1,L),m+=3,L==0){for(;(7&m)!=0;)m++;m=a.F._copyExact(c,A,d,f,m)}else{var ie,le;if(L==1&&(ie=k.fltree,le=k.fdtree),L==2){a.F.makeCodes(k.ltree,v),a.F.revCodes(k.ltree,v),a.F.makeCodes(k.dtree,y),a.F.revCodes(k.dtree,y),a.F.makeCodes(k.itree,g),a.F.revCodes(k.itree,g),ie=k.ltree,le=k.dtree,E(f,m,w-257),E(f,m+=5,b-1),E(f,m+=5,x-4),m+=4;for(var Q=0;Q<x;Q++)E(f,m+3*Q,k.itree[1+(k.ordr[Q]<<1)]);m+=3*x,m=a.F._codeTiny(T,k.itree,f,m),m=a.F._codeTiny(U,k.itree,f,m)}for(var Z=A,ce=0;ce<o;ce+=2){for(var J=s[ce],se=J>>>23,G=Z+(8388607&J);Z<G;)m=a.F._writeLit(c[Z++],ie,f,m);if(se!=0){var D=s[ce+1],j=D>>16,ne=D>>8&255,H=255&D;E(f,m=a.F._writeLit(257+ne,ie,f,m),se-k.of0[ne]),m+=k.exb[ne],S(f,m=a.F._writeLit(H,le,f,m),j-k.df0[H]),m+=k.dxb[H],Z+=se}}m=a.F._writeLit(256,ie,f,m)}return m},a.F._copyExact=function(r,s,o,i,c){var A=c>>>3;return i[A]=o,i[A+1]=o>>>8,i[A+2]=255-i[A],i[A+3]=255-i[A+1],A+=4,i.set(new Uint8Array(r.buffer,s,o),A),c+(o+4<<3)},a.F.getTrees=function(){for(var r=a.F.U,s=a.F._hufTree(r.lhst,r.ltree,15),o=a.F._hufTree(r.dhst,r.dtree,15),i=[],c=a.F._lenCodes(r.ltree,i),A=[],d=a.F._lenCodes(r.dtree,A),f=0;f<i.length;f+=2)r.ihst[i[f]]++;for(f=0;f<A.length;f+=2)r.ihst[A[f]]++;for(var m=a.F._hufTree(r.ihst,r.itree,7),h=19;h>4&&r.itree[1+(r.ordr[h-1]<<1)]==0;)h--;return[s,o,m,c,d,h,i,A]},a.F.getSecond=function(r){for(var s=[],o=0;o<r.length;o+=2)s.push(r[o+1]);return s},a.F.nonZero=function(r){for(var s="",o=0;o<r.length;o+=2)r[o+1]!=0&&(s+=(o>>1)+",");return s},a.F.contSize=function(r,s){for(var o=0,i=0;i<s.length;i++)o+=s[i]*r[1+(i<<1)];return o},a.F._codeTiny=function(r,s,o,i){for(var c=0;c<r.length;c+=2){var A=r[c],d=r[c+1];i=a.F._writeLit(A,s,o,i);var f=A==16?2:A==17?3:7;A>15&&(a.F._putsE(o,i,d,f),i+=f)}return i},a.F._lenCodes=function(r,s){for(var o=r.length;o!=2&&r[o-1]==0;)o-=2;for(var i=0;i<o;i+=2){var c=r[i+1],A=i+3<o?r[i+3]:-1,d=i+5<o?r[i+5]:-1,f=i==0?-1:r[i-1];if(c==0&&A==c&&d==c){for(var m=i+5;m+2<o&&r[m+2]==c;)m+=2;(h=Math.min(m+1-i>>>1,138))<11?s.push(17,h-3):s.push(18,h-11),i+=2*h-2}else if(c==f&&A==c&&d==c){for(m=i+5;m+2<o&&r[m+2]==c;)m+=2;var h=Math.min(m+1-i>>>1,6);s.push(16,h-3),i+=2*h-2}else s.push(c,0)}return o>>>1},a.F._hufTree=function(r,s,o){var i=[],c=r.length,A=s.length,d=0;for(d=0;d<A;d+=2)s[d]=0,s[d+1]=0;for(d=0;d<c;d++)r[d]!=0&&i.push({lit:d,f:r[d]});var f=i.length,m=i.slice(0);if(f==0)return 0;if(f==1){var h=i[0].lit;return m=h==0?1:0,s[1+(h<<1)]=1,s[1+(m<<1)]=1,1}i.sort((function(T,U){return T.f-U.f}));var v=i[0],y=i[1],g=0,w=1,b=2;for(i[0]={lit:-1,f:v.f+y.f,l:v,r:y,d:0};w!=f-1;)v=g!=w&&(b==f||i[g].f<i[b].f)?i[g++]:i[b++],y=g!=w&&(b==f||i[g].f<i[b].f)?i[g++]:i[b++],i[w++]={lit:-1,f:v.f+y.f,l:v,r:y};var x=a.F.setDepth(i[w-1],0);for(x>o&&(a.F.restrictDepth(m,o,x),x=o),d=0;d<f;d++)s[1+(m[d].lit<<1)]=m[d].d;return x},a.F.setDepth=function(r,s){return r.lit!=-1?(r.d=s,s):Math.max(a.F.setDepth(r.l,s+1),a.F.setDepth(r.r,s+1))},a.F.restrictDepth=function(r,s,o){var i=0,c=1<<o-s,A=0;for(r.sort((function(f,m){return m.d==f.d?f.f-m.f:m.d-f.d})),i=0;i<r.length&&r[i].d>s;i++){var d=r[i].d;r[i].d=s,A+=c-(1<<o-d)}for(A>>>=o-s;A>0;)(d=r[i].d)<s?(r[i].d++,A-=1<<s-d-1):i++;for(;i>=0;i--)r[i].d==s&&A<0&&(r[i].d--,A++);A!=0&&console.log("debt left")},a.F._goodIndex=function(r,s){var o=0;return s[16|o]<=r&&(o|=16),s[8|o]<=r&&(o|=8),s[4|o]<=r&&(o|=4),s[2|o]<=r&&(o|=2),s[1|o]<=r&&(o|=1),o},a.F._writeLit=function(r,s,o,i){return a.F._putsF(o,i,s[r<<1]),i+s[1+(r<<1)]},a.F.inflate=function(r,s){var o=Uint8Array;if(r[0]==3&&r[1]==0)return s||new o(0);var i=a.F,c=i._bitsF,A=i._bitsE,d=i._decodeTiny,f=i.makeCodes,m=i.codes2map,h=i._get17,v=i.U,y=s==null;y&&(s=new o(r.length>>>2<<3));for(var g,w,b=0,x=0,T=0,U=0,k=0,S=0,E=0,C=0,P=0;b==0;)if(b=c(r,P,1),x=c(r,P+1,2),P+=3,x!=0){if(y&&(s=a.F._check(s,C+(1<<17))),x==1&&(g=v.flmap,w=v.fdmap,S=511,E=31),x==2){T=A(r,P,5)+257,U=A(r,P+5,5)+1,k=A(r,P+10,4)+4,P+=14;for(var F=0;F<38;F+=2)v.itree[F]=0,v.itree[F+1]=0;var N=1;for(F=0;F<k;F++){var L=A(r,P+3*F,3);v.itree[1+(v.ordr[F]<<1)]=L,L>N&&(N=L)}P+=3*k,f(v.itree,N),m(v.itree,N,v.imap),g=v.lmap,w=v.dmap,P=d(v.imap,(1<<N)-1,T+U,r,P,v.ttree);var ie=i._copyOut(v.ttree,0,T,v.ltree);S=(1<<ie)-1;var le=i._copyOut(v.ttree,T,U,v.dtree);E=(1<<le)-1,f(v.ltree,ie),m(v.ltree,ie,g),f(v.dtree,le),m(v.dtree,le,w)}for(;;){var Q=g[h(r,P)&S];P+=15&Q;var Z=Q>>>4;if(!(Z>>>8))s[C++]=Z;else{if(Z==256)break;var ce=C+Z-254;if(Z>264){var J=v.ldef[Z-257];ce=C+(J>>>3)+A(r,P,7&J),P+=7&J}var se=w[h(r,P)&E];P+=15&se;var G=se>>>4,D=v.ddef[G],j=(D>>>4)+c(r,P,15&D);for(P+=15&D,y&&(s=a.F._check(s,C+(1<<17)));C<ce;)s[C]=s[C++-j],s[C]=s[C++-j],s[C]=s[C++-j],s[C]=s[C++-j];C=ce}}}else{(7&P)!=0&&(P+=8-(7&P));var ne=4+(P>>>3),H=r[ne-4]|r[ne-3]<<8;y&&(s=a.F._check(s,C+H)),s.set(new o(r.buffer,r.byteOffset+ne,H),C),P=ne+H<<3,C+=H}return s.length==C?s:s.slice(0,C)},a.F._check=function(r,s){var o=r.length;if(s<=o)return r;var i=new Uint8Array(Math.max(o<<1,s));return i.set(r,0),i},a.F._decodeTiny=function(r,s,o,i,c,A){for(var d=a.F._bitsE,f=a.F._get17,m=0;m<o;){var h=r[f(i,c)&s];c+=15&h;var v=h>>>4;if(v<=15)A[m]=v,m++;else{var y=0,g=0;v==16?(g=3+d(i,c,2),c+=2,y=A[m-1]):v==17?(g=3+d(i,c,3),c+=3):v==18&&(g=11+d(i,c,7),c+=7);for(var w=m+g;m<w;)A[m]=y,m++}}return c},a.F._copyOut=function(r,s,o,i){for(var c=0,A=0,d=i.length>>>1;A<o;){var f=r[A+s];i[A<<1]=0,i[1+(A<<1)]=f,f>c&&(c=f),A++}for(;A<d;)i[A<<1]=0,i[1+(A<<1)]=0,A++;return c},a.F.makeCodes=function(r,s){for(var o,i,c,A,d=a.F.U,f=r.length,m=d.bl_count,h=0;h<=s;h++)m[h]=0;for(h=1;h<f;h+=2)m[r[h]]++;var v=d.next_code;for(o=0,m[0]=0,i=1;i<=s;i++)o=o+m[i-1]<<1,v[i]=o;for(c=0;c<f;c+=2)(A=r[c+1])!=0&&(r[c]=v[A],v[A]++)},a.F.codes2map=function(r,s,o){for(var i=r.length,c=a.F.U.rev15,A=0;A<i;A+=2)if(r[A+1]!=0)for(var d=A>>1,f=r[A+1],m=d<<4|f,h=s-f,v=r[A]<<h,y=v+(1<<h);v!=y;)o[c[v]>>>15-s]=m,v++},a.F.revCodes=function(r,s){for(var o=a.F.U.rev15,i=15-s,c=0;c<r.length;c+=2){var A=r[c]<<s-r[c+1];r[c]=o[A]>>>i}},a.F._putsE=function(r,s,o){o<<=7&s;var i=s>>>3;r[i]|=o,r[i+1]|=o>>>8},a.F._putsF=function(r,s,o){o<<=7&s;var i=s>>>3;r[i]|=o,r[i+1]|=o>>>8,r[i+2]|=o>>>16},a.F._bitsE=function(r,s,o){return(r[s>>>3]|r[1+(s>>>3)]<<8)>>>(7&s)&(1<<o)-1},a.F._bitsF=function(r,s,o){return(r[s>>>3]|r[1+(s>>>3)]<<8|r[2+(s>>>3)]<<16)>>>(7&s)&(1<<o)-1},a.F._get17=function(r,s){return(r[s>>>3]|r[1+(s>>>3)]<<8|r[2+(s>>>3)]<<16)>>>(7&s)},a.F._get25=function(r,s){return(r[s>>>3]|r[1+(s>>>3)]<<8|r[2+(s>>>3)]<<16|r[3+(s>>>3)]<<24)>>>(7&s)},a.F.U=(t=Uint16Array,n=Uint32Array,{next_code:new t(16),bl_count:new t(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new t(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new t(512),fltree:[],fdmap:new t(32),fdtree:[],lmap:new t(32768),ltree:[],ttree:[],dmap:new t(32768),dtree:[],imap:new t(512),itree:[],rev15:new t(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new t(65536),prev:new t(32768)}),(function(){for(var r=a.F.U,s=0;s<32768;s++){var o=s;o=(4278255360&(o=(4042322160&(o=(3435973836&(o=(2863311530&o)>>>1|(1431655765&o)<<1))>>>2|(858993459&o)<<2))>>>4|(252645135&o)<<4))>>>8|(16711935&o)<<8,r.rev15[s]=(o>>>16|o<<16)>>>17}function i(c,A,d){for(;A--!=0;)c.push(0,d)}for(s=0;s<32;s++)r.ldef[s]=r.of0[s]<<3|r.exb[s],r.ddef[s]=r.df0[s]<<4|r.dxb[s];i(r.fltree,144,8),i(r.fltree,112,9),i(r.fltree,24,7),i(r.fltree,8,8),a.F.makeCodes(r.fltree,9),a.F.codes2map(r.fltree,9,r.flmap),a.F.revCodes(r.fltree,9),i(r.fdtree,32,5),a.F.makeCodes(r.fdtree,5),a.F.codes2map(r.fdtree,5,r.fdmap),a.F.revCodes(r.fdtree,5),i(r.itree,19,0),i(r.ltree,286,0),i(r.dtree,30,0),i(r.ttree,320,0)})()})();var ZEe=YEe({__proto__:null,default:a2},[a2]);const ml=(function(){var e={nextZero(d,f){for(;d[f]!=0;)f++;return f},readUshort:(d,f)=>d[f]<<8|d[f+1],writeUshort(d,f,m){d[f]=m>>8&255,d[f+1]=255&m},readUint:(d,f)=>16777216*d[f]+(d[f+1]<<16|d[f+2]<<8|d[f+3]),writeUint(d,f,m){d[f]=m>>24&255,d[f+1]=m>>16&255,d[f+2]=m>>8&255,d[f+3]=255&m},readASCII(d,f,m){let h="";for(let v=0;v<m;v++)h+=String.fromCharCode(d[f+v]);return h},writeASCII(d,f,m){for(let h=0;h<m.length;h++)d[f+h]=m.charCodeAt(h)},readBytes(d,f,m){const h=[];for(let v=0;v<m;v++)h.push(d[f+v]);return h},pad:d=>d.length<2?`0${d}`:d,readUTF8(d,f,m){let h,v="";for(let y=0;y<m;y++)v+=`%${e.pad(d[f+y].toString(16))}`;try{h=decodeURIComponent(v)}catch{return e.readASCII(d,f,m)}return h}};function t(d,f,m,h){const v=f*m,y=s(h),g=Math.ceil(f*y/8),w=new Uint8Array(4*v),b=new Uint32Array(w.buffer),{ctype:x}=h,{depth:T}=h,U=e.readUshort;if(x==6){const J=v<<2;if(T==8)for(var k=0;k<J;k+=4)w[k]=d[k],w[k+1]=d[k+1],w[k+2]=d[k+2],w[k+3]=d[k+3];if(T==16)for(k=0;k<J;k++)w[k]=d[k<<1]}else if(x==2){const J=h.tabs.tRNS;if(J==null){if(T==8)for(k=0;k<v;k++){var S=3*k;b[k]=255<<24|d[S+2]<<16|d[S+1]<<8|d[S]}if(T==16)for(k=0;k<v;k++)S=6*k,b[k]=255<<24|d[S+4]<<16|d[S+2]<<8|d[S]}else{var E=J[0];const se=J[1],G=J[2];if(T==8)for(k=0;k<v;k++){var C=k<<2;S=3*k,b[k]=255<<24|d[S+2]<<16|d[S+1]<<8|d[S],d[S]==E&&d[S+1]==se&&d[S+2]==G&&(w[C+3]=0)}if(T==16)for(k=0;k<v;k++)C=k<<2,S=6*k,b[k]=255<<24|d[S+4]<<16|d[S+2]<<8|d[S],U(d,S)==E&&U(d,S+2)==se&&U(d,S+4)==G&&(w[C+3]=0)}}else if(x==3){const J=h.tabs.PLTE,se=h.tabs.tRNS,G=se?se.length:0;if(T==1)for(var P=0;P<m;P++){var F=P*g,N=P*f;for(k=0;k<f;k++){C=N+k<<2;var L=3*(ie=d[F+(k>>3)]>>7-((7&k)<<0)&1);w[C]=J[L],w[C+1]=J[L+1],w[C+2]=J[L+2],w[C+3]=ie<G?se[ie]:255}}if(T==2)for(P=0;P<m;P++)for(F=P*g,N=P*f,k=0;k<f;k++)C=N+k<<2,L=3*(ie=d[F+(k>>2)]>>6-((3&k)<<1)&3),w[C]=J[L],w[C+1]=J[L+1],w[C+2]=J[L+2],w[C+3]=ie<G?se[ie]:255;if(T==4)for(P=0;P<m;P++)for(F=P*g,N=P*f,k=0;k<f;k++)C=N+k<<2,L=3*(ie=d[F+(k>>1)]>>4-((1&k)<<2)&15),w[C]=J[L],w[C+1]=J[L+1],w[C+2]=J[L+2],w[C+3]=ie<G?se[ie]:255;if(T==8)for(k=0;k<v;k++){var ie;C=k<<2,L=3*(ie=d[k]),w[C]=J[L],w[C+1]=J[L+1],w[C+2]=J[L+2],w[C+3]=ie<G?se[ie]:255}}else if(x==4){if(T==8)for(k=0;k<v;k++){C=k<<2;var le=d[Q=k<<1];w[C]=le,w[C+1]=le,w[C+2]=le,w[C+3]=d[Q+1]}if(T==16)for(k=0;k<v;k++){var Q;C=k<<2,le=d[Q=k<<2],w[C]=le,w[C+1]=le,w[C+2]=le,w[C+3]=d[Q+2]}}else if(x==0)for(E=h.tabs.tRNS?h.tabs.tRNS:-1,P=0;P<m;P++){const J=P*g,se=P*f;if(T==1)for(var Z=0;Z<f;Z++){var ce=(le=255*(d[J+(Z>>>3)]>>>7-(7&Z)&1))==255*E?0:255;b[se+Z]=ce<<24|le<<16|le<<8|le}else if(T==2)for(Z=0;Z<f;Z++)ce=(le=85*(d[J+(Z>>>2)]>>>6-((3&Z)<<1)&3))==85*E?0:255,b[se+Z]=ce<<24|le<<16|le<<8|le;else if(T==4)for(Z=0;Z<f;Z++)ce=(le=17*(d[J+(Z>>>1)]>>>4-((1&Z)<<2)&15))==17*E?0:255,b[se+Z]=ce<<24|le<<16|le<<8|le;else if(T==8)for(Z=0;Z<f;Z++)ce=(le=d[J+Z])==E?0:255,b[se+Z]=ce<<24|le<<16|le<<8|le;else if(T==16)for(Z=0;Z<f;Z++)le=d[J+(Z<<1)],ce=U(d,J+(Z<<1))==E?0:255,b[se+Z]=ce<<24|le<<16|le<<8|le}return w}function n(d,f,m,h){const v=s(d),y=Math.ceil(m*v/8),g=new Uint8Array((y+1+d.interlace)*h);return f=d.tabs.CgBI?r(f,g):a(f,g),d.interlace==0?f=o(f,d,0,m,h):d.interlace==1&&(f=(function(b,x){const T=x.width,U=x.height,k=s(x),S=k>>3,E=Math.ceil(T*k/8),C=new Uint8Array(U*E);let P=0;const F=[0,0,4,0,2,0,1],N=[0,4,0,2,0,1,0],L=[8,8,8,4,4,2,2],ie=[8,8,4,4,2,2,1];let le=0;for(;le<7;){const Z=L[le],ce=ie[le];let J=0,se=0,G=F[le];for(;G<U;)G+=Z,se++;let D=N[le];for(;D<T;)D+=ce,J++;const j=Math.ceil(J*k/8);o(b,x,P,J,se);let ne=0,H=F[le];for(;H<U;){let te=N[le],Y=P+ne*j<<3;for(;te<T;){var Q;if(k==1&&(Q=(Q=b[Y>>3])>>7-(7&Y)&1,C[H*E+(te>>3)]|=Q<<7-((7&te)<<0)),k==2&&(Q=(Q=b[Y>>3])>>6-(7&Y)&3,C[H*E+(te>>2)]|=Q<<6-((3&te)<<1)),k==4&&(Q=(Q=b[Y>>3])>>4-(7&Y)&15,C[H*E+(te>>1)]|=Q<<4-((1&te)<<2)),k>=8){const K=H*E+te*S;for(let X=0;X<S;X++)C[K+X]=b[(Y>>3)+X]}Y+=k,te+=ce}ne++,H+=Z}J*se!=0&&(P+=se*(1+j)),le+=1}return C})(f,d)),f}function a(d,f){return r(new Uint8Array(d.buffer,2,d.length-6),f)}var r=(function(){const d={H:{}};return d.H.N=function(f,m){const h=Uint8Array;let v,y,g=0,w=0,b=0,x=0,T=0,U=0,k=0,S=0,E=0;if(f[0]==3&&f[1]==0)return m||new h(0);const C=d.H,P=C.b,F=C.e,N=C.R,L=C.n,ie=C.A,le=C.Z,Q=C.m,Z=m==null;for(Z&&(m=new h(f.length>>>2<<5));g==0;)if(g=P(f,E,1),w=P(f,E+1,2),E+=3,w!=0){if(Z&&(m=d.H.W(m,S+(1<<17))),w==1&&(v=Q.J,y=Q.h,U=511,k=31),w==2){b=F(f,E,5)+257,x=F(f,E+5,5)+1,T=F(f,E+10,4)+4,E+=14;let J=1;for(var ce=0;ce<38;ce+=2)Q.Q[ce]=0,Q.Q[ce+1]=0;for(ce=0;ce<T;ce++){const D=F(f,E+3*ce,3);Q.Q[1+(Q.X[ce]<<1)]=D,D>J&&(J=D)}E+=3*T,L(Q.Q,J),ie(Q.Q,J,Q.u),v=Q.w,y=Q.d,E=N(Q.u,(1<<J)-1,b+x,f,E,Q.v);const se=C.V(Q.v,0,b,Q.C);U=(1<<se)-1;const G=C.V(Q.v,b,x,Q.D);k=(1<<G)-1,L(Q.C,se),ie(Q.C,se,v),L(Q.D,G),ie(Q.D,G,y)}for(;;){const J=v[le(f,E)&U];E+=15&J;const se=J>>>4;if(!(se>>>8))m[S++]=se;else{if(se==256)break;{let G=S+se-254;if(se>264){const te=Q.q[se-257];G=S+(te>>>3)+F(f,E,7&te),E+=7&te}const D=y[le(f,E)&k];E+=15&D;const j=D>>>4,ne=Q.c[j],H=(ne>>>4)+P(f,E,15&ne);for(E+=15&ne;S<G;)m[S]=m[S++-H],m[S]=m[S++-H],m[S]=m[S++-H],m[S]=m[S++-H];S=G}}}}else{(7&E)!=0&&(E+=8-(7&E));const J=4+(E>>>3),se=f[J-4]|f[J-3]<<8;Z&&(m=d.H.W(m,S+se)),m.set(new h(f.buffer,f.byteOffset+J,se),S),E=J+se<<3,S+=se}return m.length==S?m:m.slice(0,S)},d.H.W=function(f,m){const h=f.length;if(m<=h)return f;const v=new Uint8Array(h<<1);return v.set(f,0),v},d.H.R=function(f,m,h,v,y,g){const w=d.H.e,b=d.H.Z;let x=0;for(;x<h;){const T=f[b(v,y)&m];y+=15&T;const U=T>>>4;if(U<=15)g[x]=U,x++;else{let k=0,S=0;U==16?(S=3+w(v,y,2),y+=2,k=g[x-1]):U==17?(S=3+w(v,y,3),y+=3):U==18&&(S=11+w(v,y,7),y+=7);const E=x+S;for(;x<E;)g[x]=k,x++}}return y},d.H.V=function(f,m,h,v){let y=0,g=0;const w=v.length>>>1;for(;g<h;){const b=f[g+m];v[g<<1]=0,v[1+(g<<1)]=b,b>y&&(y=b),g++}for(;g<w;)v[g<<1]=0,v[1+(g<<1)]=0,g++;return y},d.H.n=function(f,m){const h=d.H.m,v=f.length;let y,g,w,b;const x=h.j;for(var T=0;T<=m;T++)x[T]=0;for(T=1;T<v;T+=2)x[f[T]]++;const U=h.K;for(y=0,x[0]=0,g=1;g<=m;g++)y=y+x[g-1]<<1,U[g]=y;for(w=0;w<v;w+=2)b=f[w+1],b!=0&&(f[w]=U[b],U[b]++)},d.H.A=function(f,m,h){const v=f.length,y=d.H.m.r;for(let g=0;g<v;g+=2)if(f[g+1]!=0){const w=g>>1,b=f[g+1],x=w<<4|b,T=m-b;let U=f[g]<<T;const k=U+(1<<T);for(;U!=k;)h[y[U]>>>15-m]=x,U++}},d.H.l=function(f,m){const h=d.H.m.r,v=15-m;for(let y=0;y<f.length;y+=2){const g=f[y]<<m-f[y+1];f[y]=h[g]>>>v}},d.H.M=function(f,m,h){h<<=7&m;const v=m>>>3;f[v]|=h,f[v+1]|=h>>>8},d.H.I=function(f,m,h){h<<=7&m;const v=m>>>3;f[v]|=h,f[v+1]|=h>>>8,f[v+2]|=h>>>16},d.H.e=function(f,m,h){return(f[m>>>3]|f[1+(m>>>3)]<<8)>>>(7&m)&(1<<h)-1},d.H.b=function(f,m,h){return(f[m>>>3]|f[1+(m>>>3)]<<8|f[2+(m>>>3)]<<16)>>>(7&m)&(1<<h)-1},d.H.Z=function(f,m){return(f[m>>>3]|f[1+(m>>>3)]<<8|f[2+(m>>>3)]<<16)>>>(7&m)},d.H.i=function(f,m){return(f[m>>>3]|f[1+(m>>>3)]<<8|f[2+(m>>>3)]<<16|f[3+(m>>>3)]<<24)>>>(7&m)},d.H.m=(function(){const f=Uint16Array,m=Uint32Array;return{K:new f(16),j:new f(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new f(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new m(32),J:new f(512),_:[],h:new f(32),$:[],w:new f(32768),C:[],v:[],d:new f(32768),D:[],u:new f(512),Q:[],r:new f(32768),s:new m(286),Y:new m(30),a:new m(19),t:new m(15e3),k:new f(65536),g:new f(32768)}})(),(function(){const f=d.H.m;for(var m=0;m<32768;m++){let v=m;v=(2863311530&v)>>>1|(1431655765&v)<<1,v=(3435973836&v)>>>2|(858993459&v)<<2,v=(4042322160&v)>>>4|(252645135&v)<<4,v=(4278255360&v)>>>8|(16711935&v)<<8,f.r[m]=(v>>>16|v<<16)>>>17}function h(v,y,g){for(;y--!=0;)v.push(0,g)}for(m=0;m<32;m++)f.q[m]=f.S[m]<<3|f.T[m],f.c[m]=f.p[m]<<4|f.z[m];h(f._,144,8),h(f._,112,9),h(f._,24,7),h(f._,8,8),d.H.n(f._,9),d.H.A(f._,9,f.J),d.H.l(f._,9),h(f.$,32,5),d.H.n(f.$,5),d.H.A(f.$,5,f.h),d.H.l(f.$,5),h(f.Q,19,0),h(f.C,286,0),h(f.D,30,0),h(f.v,320,0)})(),d.H.N})();function s(d){return[1,null,3,1,2,null,4][d.ctype]*d.depth}function o(d,f,m,h,v){let y=s(f);const g=Math.ceil(h*y/8);let w,b;y=Math.ceil(y/8);let x=d[m],T=0;if(x>1&&(d[m]=[0,0,1][x-2]),x==3)for(T=y;T<g;T++)d[T+1]=d[T+1]+(d[T+1-y]>>>1)&255;for(let U=0;U<v;U++)if(w=m+U*g,b=w+U+1,x=d[b-1],T=0,x==0)for(;T<g;T++)d[w+T]=d[b+T];else if(x==1){for(;T<y;T++)d[w+T]=d[b+T];for(;T<g;T++)d[w+T]=d[b+T]+d[w+T-y]}else if(x==2)for(;T<g;T++)d[w+T]=d[b+T]+d[w+T-g];else if(x==3){for(;T<y;T++)d[w+T]=d[b+T]+(d[w+T-g]>>>1);for(;T<g;T++)d[w+T]=d[b+T]+(d[w+T-g]+d[w+T-y]>>>1)}else{for(;T<y;T++)d[w+T]=d[b+T]+i(0,d[w+T-g],0);for(;T<g;T++)d[w+T]=d[b+T]+i(d[w+T-y],d[w+T-g],d[w+T-y-g])}return d}function i(d,f,m){const h=d+f-m,v=h-d,y=h-f,g=h-m;return v*v<=y*y&&v*v<=g*g?d:y*y<=g*g?f:m}function c(d,f,m){m.width=e.readUint(d,f),f+=4,m.height=e.readUint(d,f),f+=4,m.depth=d[f],f++,m.ctype=d[f],f++,m.compress=d[f],f++,m.filter=d[f],f++,m.interlace=d[f],f++}function A(d,f,m,h,v,y,g,w,b){const x=Math.min(f,v),T=Math.min(m,y);let U=0,k=0;for(let le=0;le<T;le++)for(let Q=0;Q<x;Q++)if(g>=0&&w>=0?(U=le*f+Q<<2,k=(w+le)*v+g+Q<<2):(U=(-w+le)*f-g+Q<<2,k=le*v+Q<<2),b==0)h[k]=d[U],h[k+1]=d[U+1],h[k+2]=d[U+2],h[k+3]=d[U+3];else if(b==1){var S=d[U+3]*.00392156862745098,E=d[U]*S,C=d[U+1]*S,P=d[U+2]*S,F=h[k+3]*(1/255),N=h[k]*F,L=h[k+1]*F,ie=h[k+2]*F;const Z=1-S,ce=S+F*Z,J=ce==0?0:1/ce;h[k+3]=255*ce,h[k+0]=(E+N*Z)*J,h[k+1]=(C+L*Z)*J,h[k+2]=(P+ie*Z)*J}else if(b==2)S=d[U+3],E=d[U],C=d[U+1],P=d[U+2],F=h[k+3],N=h[k],L=h[k+1],ie=h[k+2],S==F&&E==N&&C==L&&P==ie?(h[k]=0,h[k+1]=0,h[k+2]=0,h[k+3]=0):(h[k]=E,h[k+1]=C,h[k+2]=P,h[k+3]=S);else if(b==3){if(S=d[U+3],E=d[U],C=d[U+1],P=d[U+2],F=h[k+3],N=h[k],L=h[k+1],ie=h[k+2],S==F&&E==N&&C==L&&P==ie)continue;if(S<220&&F>20)return!1}return!0}return{decode:function(f){const m=new Uint8Array(f);let h=8;const v=e,y=v.readUshort,g=v.readUint,w={tabs:{},frames:[]},b=new Uint8Array(m.length);let x,T=0,U=0;const k=[137,80,78,71,13,10,26,10];for(var S=0;S<8;S++)if(m[S]!=k[S])throw"The input is not a PNG file!";for(;h<m.length;){const le=v.readUint(m,h);h+=4;const Q=v.readASCII(m,h,4);if(h+=4,Q=="IHDR")c(m,h,w);else if(Q=="iCCP"){for(var E=h;m[E]!=0;)E++;v.readASCII(m,h,E-h),m[E+1];const Z=m.slice(E+2,h+le);let ce=null;try{ce=a(Z)}catch{ce=r(Z)}w.tabs[Q]=ce}else if(Q=="CgBI")w.tabs[Q]=m.slice(h,h+4);else if(Q=="IDAT"){for(S=0;S<le;S++)b[T+S]=m[h+S];T+=le}else if(Q=="acTL")w.tabs[Q]={num_frames:g(m,h),num_plays:g(m,h+4)},x=new Uint8Array(m.length);else if(Q=="fcTL"){U!=0&&((ie=w.frames[w.frames.length-1]).data=n(w,x.slice(0,U),ie.rect.width,ie.rect.height),U=0);const Z={x:g(m,h+12),y:g(m,h+16),width:g(m,h+4),height:g(m,h+8)};let ce=y(m,h+22);ce=y(m,h+20)/(ce==0?100:ce);const J={rect:Z,delay:Math.round(1e3*ce),dispose:m[h+24],blend:m[h+25]};w.frames.push(J)}else if(Q=="fdAT"){for(S=0;S<le-4;S++)x[U+S]=m[h+S+4];U+=le-4}else if(Q=="pHYs")w.tabs[Q]=[v.readUint(m,h),v.readUint(m,h+4),m[h+8]];else if(Q=="cHRM")for(w.tabs[Q]=[],S=0;S<8;S++)w.tabs[Q].push(v.readUint(m,h+4*S));else if(Q=="tEXt"||Q=="zTXt"){w.tabs[Q]==null&&(w.tabs[Q]={});var C=v.nextZero(m,h),P=v.readASCII(m,h,C-h),F=h+le-C-1;if(Q=="tEXt")L=v.readASCII(m,C+1,F);else{var N=a(m.slice(C+2,C+2+F));L=v.readUTF8(N,0,N.length)}w.tabs[Q][P]=L}else if(Q=="iTXt"){w.tabs[Q]==null&&(w.tabs[Q]={}),C=0,E=h,C=v.nextZero(m,E),P=v.readASCII(m,E,C-E);const Z=m[E=C+1];var L;m[E+1],E+=2,C=v.nextZero(m,E),v.readASCII(m,E,C-E),E=C+1,C=v.nextZero(m,E),v.readUTF8(m,E,C-E),F=le-((E=C+1)-h),Z==0?L=v.readUTF8(m,E,F):(N=a(m.slice(E,E+F)),L=v.readUTF8(N,0,N.length)),w.tabs[Q][P]=L}else if(Q=="PLTE")w.tabs[Q]=v.readBytes(m,h,le);else if(Q=="hIST"){const Z=w.tabs.PLTE.length/3;for(w.tabs[Q]=[],S=0;S<Z;S++)w.tabs[Q].push(y(m,h+2*S))}else if(Q=="tRNS")w.ctype==3?w.tabs[Q]=v.readBytes(m,h,le):w.ctype==0?w.tabs[Q]=y(m,h):w.ctype==2&&(w.tabs[Q]=[y(m,h),y(m,h+2),y(m,h+4)]);else if(Q=="gAMA")w.tabs[Q]=v.readUint(m,h)/1e5;else if(Q=="sRGB")w.tabs[Q]=m[h];else if(Q=="bKGD")w.ctype==0||w.ctype==4?w.tabs[Q]=[y(m,h)]:w.ctype==2||w.ctype==6?w.tabs[Q]=[y(m,h),y(m,h+2),y(m,h+4)]:w.ctype==3&&(w.tabs[Q]=m[h]);else if(Q=="IEND")break;h+=le,v.readUint(m,h),h+=4}var ie;return U!=0&&((ie=w.frames[w.frames.length-1]).data=n(w,x.slice(0,U),ie.rect.width,ie.rect.height)),w.data=n(w,b,w.width,w.height),delete w.compress,delete w.interlace,delete w.filter,w},toRGBA8:function(f){const m=f.width,h=f.height;if(f.tabs.acTL==null)return[t(f.data,m,h,f).buffer];const v=[];f.frames[0].data==null&&(f.frames[0].data=f.data);const y=m*h*4,g=new Uint8Array(y),w=new Uint8Array(y),b=new Uint8Array(y);for(let T=0;T<f.frames.length;T++){const U=f.frames[T],k=U.rect.x,S=U.rect.y,E=U.rect.width,C=U.rect.height,P=t(U.data,E,C,f);if(T!=0)for(var x=0;x<y;x++)b[x]=g[x];if(U.blend==0?A(P,E,C,g,m,h,k,S,0):U.blend==1&&A(P,E,C,g,m,h,k,S,1),v.push(g.buffer.slice(0)),U.dispose!=0){if(U.dispose==1)A(w,E,C,g,m,h,k,S,0);else if(U.dispose==2)for(x=0;x<y;x++)g[x]=b[x]}}return v},_paeth:i,_copyTile:A,_bin:e}})();(function(){const{_copyTile:e}=ml,{_bin:t}=ml,n=ml._paeth;var a={table:(function(){const E=new Uint32Array(256);for(let C=0;C<256;C++){let P=C;for(let F=0;F<8;F++)1&P?P=3988292384^P>>>1:P>>>=1;E[C]=P}return E})(),update(E,C,P,F){for(let N=0;N<F;N++)E=a.table[255&(E^C[P+N])]^E>>>8;return E},crc:(E,C,P)=>4294967295^a.update(4294967295,E,C,P)};function r(E,C,P,F){C[P]+=E[0]*F>>4,C[P+1]+=E[1]*F>>4,C[P+2]+=E[2]*F>>4,C[P+3]+=E[3]*F>>4}function s(E){return Math.max(0,Math.min(255,E))}function o(E,C){const P=E[0]-C[0],F=E[1]-C[1],N=E[2]-C[2],L=E[3]-C[3];return P*P+F*F+N*N+L*L}function i(E,C,P,F,N,L,ie){ie==null&&(ie=1);const le=F.length,Q=[];for(var Z=0;Z<le;Z++){const H=F[Z];Q.push([H>>>0&255,H>>>8&255,H>>>16&255,H>>>24&255])}for(Z=0;Z<le;Z++){let H=4294967295;for(var ce=0,J=0;J<le;J++){var se=o(Q[Z],Q[J]);J!=Z&&se<H&&(H=se,ce=J)}}const G=new Uint32Array(N.buffer),D=new Int16Array(C*P*4),j=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(Z=0;Z<j.length;Z++)j[Z]=255*((j[Z]+.5)/16-.5);for(let H=0;H<P;H++)for(let te=0;te<C;te++){var ne;Z=4*(H*C+te),ie!=2?ne=[s(E[Z]+D[Z]),s(E[Z+1]+D[Z+1]),s(E[Z+2]+D[Z+2]),s(E[Z+3]+D[Z+3])]:(se=j[4*(3&H)+(3&te)],ne=[s(E[Z]+se),s(E[Z+1]+se),s(E[Z+2]+se),s(E[Z+3]+se)]),ce=0;let Y=16777215;for(J=0;J<le;J++){const ae=o(ne,Q[J]);ae<Y&&(Y=ae,ce=J)}const K=Q[ce],X=[ne[0]-K[0],ne[1]-K[1],ne[2]-K[2],ne[3]-K[3]];ie==1&&(te!=C-1&&r(X,D,Z+4,7),H!=P-1&&(te!=0&&r(X,D,Z+4*C-4,3),r(X,D,Z+4*C,5),te!=C-1&&r(X,D,Z+4*C+4,1))),L[Z>>2]=ce,G[Z>>2]=F[ce]}}function c(E,C,P,F,N){N==null&&(N={});const{crc:L}=a,ie=t.writeUint,le=t.writeUshort,Q=t.writeASCII;let Z=8;const ce=E.frames.length>1;let J,se=!1,G=33+(ce?20:0);if(N.sRGB!=null&&(G+=13),N.pHYs!=null&&(G+=21),N.iCCP!=null&&(J=pako.deflate(N.iCCP),G+=21+J.length+4),E.ctype==3){for(var D=E.plte.length,j=0;j<D;j++)E.plte[j]>>>24!=255&&(se=!0);G+=8+3*D+4+(se?8+1*D+4:0)}for(var ne=0;ne<E.frames.length;ne++)ce&&(G+=38),G+=(K=E.frames[ne]).cimg.length+12,ne!=0&&(G+=4);G+=12;const H=new Uint8Array(G),te=[137,80,78,71,13,10,26,10];for(j=0;j<8;j++)H[j]=te[j];if(ie(H,Z,13),Z+=4,Q(H,Z,"IHDR"),Z+=4,ie(H,Z,C),Z+=4,ie(H,Z,P),Z+=4,H[Z]=E.depth,Z++,H[Z]=E.ctype,Z++,H[Z]=0,Z++,H[Z]=0,Z++,H[Z]=0,Z++,ie(H,Z,L(H,Z-17,17)),Z+=4,N.sRGB!=null&&(ie(H,Z,1),Z+=4,Q(H,Z,"sRGB"),Z+=4,H[Z]=N.sRGB,Z++,ie(H,Z,L(H,Z-5,5)),Z+=4),N.iCCP!=null){const X=13+J.length;ie(H,Z,X),Z+=4,Q(H,Z,"iCCP"),Z+=4,Q(H,Z,"ICC profile"),Z+=11,Z+=2,H.set(J,Z),Z+=J.length,ie(H,Z,L(H,Z-(X+4),X+4)),Z+=4}if(N.pHYs!=null&&(ie(H,Z,9),Z+=4,Q(H,Z,"pHYs"),Z+=4,ie(H,Z,N.pHYs[0]),Z+=4,ie(H,Z,N.pHYs[1]),Z+=4,H[Z]=N.pHYs[2],Z++,ie(H,Z,L(H,Z-13,13)),Z+=4),ce&&(ie(H,Z,8),Z+=4,Q(H,Z,"acTL"),Z+=4,ie(H,Z,E.frames.length),Z+=4,ie(H,Z,N.loop!=null?N.loop:0),Z+=4,ie(H,Z,L(H,Z-12,12)),Z+=4),E.ctype==3){for(ie(H,Z,3*(D=E.plte.length)),Z+=4,Q(H,Z,"PLTE"),Z+=4,j=0;j<D;j++){const X=3*j,ae=E.plte[j],oe=255&ae,W=ae>>>8&255,de=ae>>>16&255;H[Z+X+0]=oe,H[Z+X+1]=W,H[Z+X+2]=de}if(Z+=3*D,ie(H,Z,L(H,Z-3*D-4,3*D+4)),Z+=4,se){for(ie(H,Z,D),Z+=4,Q(H,Z,"tRNS"),Z+=4,j=0;j<D;j++)H[Z+j]=E.plte[j]>>>24&255;Z+=D,ie(H,Z,L(H,Z-D-4,D+4)),Z+=4}}let Y=0;for(ne=0;ne<E.frames.length;ne++){var K=E.frames[ne];ce&&(ie(H,Z,26),Z+=4,Q(H,Z,"fcTL"),Z+=4,ie(H,Z,Y++),Z+=4,ie(H,Z,K.rect.width),Z+=4,ie(H,Z,K.rect.height),Z+=4,ie(H,Z,K.rect.x),Z+=4,ie(H,Z,K.rect.y),Z+=4,le(H,Z,F[ne]),Z+=2,le(H,Z,1e3),Z+=2,H[Z]=K.dispose,Z++,H[Z]=K.blend,Z++,ie(H,Z,L(H,Z-30,30)),Z+=4);const X=K.cimg;ie(H,Z,(D=X.length)+(ne==0?0:4)),Z+=4;const ae=Z;Q(H,Z,ne==0?"IDAT":"fdAT"),Z+=4,ne!=0&&(ie(H,Z,Y++),Z+=4),H.set(X,Z),Z+=D,ie(H,Z,L(H,ae,Z-ae)),Z+=4}return ie(H,Z,0),Z+=4,Q(H,Z,"IEND"),Z+=4,ie(H,Z,L(H,Z-4,4)),Z+=4,H.buffer}function A(E,C,P){for(let F=0;F<E.frames.length;F++){const N=E.frames[F];N.rect.width;const L=N.rect.height,ie=new Uint8Array(L*N.bpl+L);N.cimg=h(N.img,L,N.bpp,N.bpl,ie,C,P)}}function d(E,C,P,F,N){const L=N[0],ie=N[1],le=N[2],Q=N[3],Z=N[4],ce=N[5];let J=6,se=8,G=255;for(var D=0;D<E.length;D++){const De=new Uint8Array(E[D]);for(var j=De.length,ne=0;ne<j;ne+=4)G&=De[ne+3]}const H=G!=255,te=(function(xe,ke,Ee,ye,we,at){const Je=[];for(var rt=0;rt<xe.length;rt++){const tt=new Uint8Array(xe[rt]),Ge=new Uint32Array(tt.buffer);var it;let pt=0,ht=0,Nt=ke,nn=Ee,yn=ye?1:0;if(rt!=0){const qn=at||ye||rt==1||Je[rt-2].dispose!=0?1:2;let $t=0,Tt=1e9;for(let ut=0;ut<qn;ut++){var Ie=new Uint8Array(xe[rt-1-ut]);const kt=new Uint32Array(xe[rt-1-ut]);let Zt=ke,je=Ee,Ke=-1,wt=-1;for(let qt=0;qt<Ee;qt++)for(let vt=0;vt<ke;vt++)Ge[ft=qt*ke+vt]!=kt[ft]&&(vt<Zt&&(Zt=vt),vt>Ke&&(Ke=vt),qt<je&&(je=qt),qt>wt&&(wt=qt));Ke==-1&&(Zt=je=Ke=wt=0),we&&((1&Zt)==1&&Zt--,(1&je)==1&&je--);const Vt=(Ke-Zt+1)*(wt-je+1);Vt<Tt&&(Tt=Vt,$t=ut,pt=Zt,ht=je,Nt=Ke-Zt+1,nn=wt-je+1)}Ie=new Uint8Array(xe[rt-1-$t]),$t==1&&(Je[rt-1].dispose=2),it=new Uint8Array(Nt*nn*4),e(Ie,ke,Ee,it,Nt,nn,-pt,-ht,0),yn=e(tt,ke,Ee,it,Nt,nn,-pt,-ht,3)?1:0,yn==1?m(tt,ke,Ee,it,{x:pt,y:ht,width:Nt,height:nn}):e(tt,ke,Ee,it,Nt,nn,-pt,-ht,0)}else it=tt.slice(0);Je.push({rect:{x:pt,y:ht,width:Nt,height:nn},img:it,blend:yn,dispose:0})}if(ye)for(rt=0;rt<Je.length;rt++){if((Ft=Je[rt]).blend==1)continue;const tt=Ft.rect,Ge=Je[rt-1].rect,pt=Math.min(tt.x,Ge.x),ht=Math.min(tt.y,Ge.y),Nt={x:pt,y:ht,width:Math.max(tt.x+tt.width,Ge.x+Ge.width)-pt,height:Math.max(tt.y+tt.height,Ge.y+Ge.height)-ht};Je[rt-1].dispose=1,rt-1!=0&&f(xe,ke,Ee,Je,rt-1,Nt,we),f(xe,ke,Ee,Je,rt,Nt,we)}let Ve=0;if(xe.length!=1)for(var ft=0;ft<Je.length;ft++){var Ft;Ve+=(Ft=Je[ft]).rect.width*Ft.rect.height}return Je})(E,C,P,L,ie,le),Y={},K=[],X=[];if(F!=0){const De=[];for(ne=0;ne<te.length;ne++)De.push(te[ne].img.buffer);const xe=(function(we){let at=0;for(var Je=0;Je<we.length;Je++)at+=we[Je].byteLength;const rt=new Uint8Array(at);let it=0;for(Je=0;Je<we.length;Je++){const Ie=new Uint8Array(we[Je]),Ve=Ie.length;for(let ft=0;ft<Ve;ft+=4){let Ft=Ie[ft],tt=Ie[ft+1],Ge=Ie[ft+2];const pt=Ie[ft+3];pt==0&&(Ft=tt=Ge=0),rt[it+ft]=Ft,rt[it+ft+1]=tt,rt[it+ft+2]=Ge,rt[it+ft+3]=pt}it+=Ve}return rt.buffer})(De),ke=y(xe,F);for(ne=0;ne<ke.plte.length;ne++)K.push(ke.plte[ne].est.rgba);let Ee=0;for(ne=0;ne<te.length;ne++){const ye=(oe=te[ne]).img.length;var ae=new Uint8Array(ke.inds.buffer,Ee>>2,ye>>2);X.push(ae);const we=new Uint8Array(ke.abuf,Ee,ye);ce&&i(oe.img,oe.rect.width,oe.rect.height,K,we,ae),oe.img.set(we),Ee+=ye}}else for(D=0;D<te.length;D++){var oe=te[D];const De=new Uint32Array(oe.img.buffer);var W=oe.rect.width;for(j=De.length,ae=new Uint8Array(j),X.push(ae),ne=0;ne<j;ne++){const xe=De[ne];if(ne!=0&&xe==De[ne-1])ae[ne]=ae[ne-1];else if(ne>W&&xe==De[ne-W])ae[ne]=ae[ne-W];else{let ke=Y[xe];if(ke==null&&(Y[xe]=ke=K.length,K.push(xe),K.length>=300))break;ae[ne]=ke}}}const de=K.length;for(de<=256&&Z==0&&(se=de<=2?1:de<=4?2:de<=16?4:8,se=Math.max(se,Q)),D=0;D<te.length;D++){(oe=te[D]).rect.x,oe.rect.y,W=oe.rect.width;const De=oe.rect.height;let xe=oe.img;new Uint32Array(xe.buffer);let ke=4*W,Ee=4;if(de<=256&&Z==0){ke=Math.ceil(se*W/8);var Ae=new Uint8Array(ke*De);const ye=X[D];for(let we=0;we<De;we++){ne=we*ke;const at=we*W;if(se==8)for(var Ce=0;Ce<W;Ce++)Ae[ne+Ce]=ye[at+Ce];else if(se==4)for(Ce=0;Ce<W;Ce++)Ae[ne+(Ce>>1)]|=ye[at+Ce]<<4-4*(1&Ce);else if(se==2)for(Ce=0;Ce<W;Ce++)Ae[ne+(Ce>>2)]|=ye[at+Ce]<<6-2*(3&Ce);else if(se==1)for(Ce=0;Ce<W;Ce++)Ae[ne+(Ce>>3)]|=ye[at+Ce]<<7-1*(7&Ce)}xe=Ae,J=3,Ee=1}else if(H==0&&te.length==1){Ae=new Uint8Array(W*De*3);const ye=W*De;for(ne=0;ne<ye;ne++){const we=3*ne,at=4*ne;Ae[we]=xe[at],Ae[we+1]=xe[at+1],Ae[we+2]=xe[at+2]}xe=Ae,J=2,Ee=3,ke=3*W}oe.img=xe,oe.bpl=ke,oe.bpp=Ee}return{ctype:J,depth:se,plte:K,frames:te}}function f(E,C,P,F,N,L,ie){const le=Uint8Array,Q=Uint32Array,Z=new le(E[N-1]),ce=new Q(E[N-1]),J=N+1<E.length?new le(E[N+1]):null,se=new le(E[N]),G=new Q(se.buffer);let D=C,j=P,ne=-1,H=-1;for(let Y=0;Y<L.height;Y++)for(let K=0;K<L.width;K++){const X=L.x+K,ae=L.y+Y,oe=ae*C+X,W=G[oe];W==0||F[N-1].dispose==0&&ce[oe]==W&&(J==null||J[4*oe+3]!=0)||(X<D&&(D=X),X>ne&&(ne=X),ae<j&&(j=ae),ae>H&&(H=ae))}ne==-1&&(D=j=ne=H=0),ie&&((1&D)==1&&D--,(1&j)==1&&j--),L={x:D,y:j,width:ne-D+1,height:H-j+1};const te=F[N];te.rect=L,te.blend=1,te.img=new Uint8Array(L.width*L.height*4),F[N-1].dispose==0?(e(Z,C,P,te.img,L.width,L.height,-L.x,-L.y,0),m(se,C,P,te.img,L)):e(se,C,P,te.img,L.width,L.height,-L.x,-L.y,0)}function m(E,C,P,F,N){e(E,C,P,F,N.width,N.height,-N.x,-N.y,2)}function h(E,C,P,F,N,L,ie){const le=[];let Q,Z=[0,1,2,3,4];L!=-1?Z=[L]:(C*F>5e5||P==1)&&(Z=[0]),ie&&(Q={level:0});const ce=ZEe;for(var J=0;J<Z.length;J++){for(let D=0;D<C;D++)v(N,E,D,F,P,Z[J]);le.push(ce.deflate(N,Q))}let se,G=1e9;for(J=0;J<le.length;J++)le[J].length<G&&(se=J,G=le[J].length);return le[se]}function v(E,C,P,F,N,L){const ie=P*F;let le=ie+P;if(E[le]=L,le++,L==0)if(F<500)for(var Q=0;Q<F;Q++)E[le+Q]=C[ie+Q];else E.set(new Uint8Array(C.buffer,ie,F),le);else if(L==1){for(Q=0;Q<N;Q++)E[le+Q]=C[ie+Q];for(Q=N;Q<F;Q++)E[le+Q]=C[ie+Q]-C[ie+Q-N]+256&255}else if(P==0){for(Q=0;Q<N;Q++)E[le+Q]=C[ie+Q];if(L==2)for(Q=N;Q<F;Q++)E[le+Q]=C[ie+Q];if(L==3)for(Q=N;Q<F;Q++)E[le+Q]=C[ie+Q]-(C[ie+Q-N]>>1)+256&255;if(L==4)for(Q=N;Q<F;Q++)E[le+Q]=C[ie+Q]-n(C[ie+Q-N],0,0)+256&255}else{if(L==2)for(Q=0;Q<F;Q++)E[le+Q]=C[ie+Q]+256-C[ie+Q-F]&255;if(L==3){for(Q=0;Q<N;Q++)E[le+Q]=C[ie+Q]+256-(C[ie+Q-F]>>1)&255;for(Q=N;Q<F;Q++)E[le+Q]=C[ie+Q]+256-(C[ie+Q-F]+C[ie+Q-N]>>1)&255}if(L==4){for(Q=0;Q<N;Q++)E[le+Q]=C[ie+Q]+256-n(0,C[ie+Q-F],0)&255;for(Q=N;Q<F;Q++)E[le+Q]=C[ie+Q]+256-n(C[ie+Q-N],C[ie+Q-F],C[ie+Q-N-F])&255}}}function y(E,C){const P=new Uint8Array(E),F=P.slice(0),N=new Uint32Array(F.buffer),L=g(F,C),ie=L[0],le=L[1],Q=P.length,Z=new Uint8Array(Q>>2);let ce;if(P.length<2e7)for(var J=0;J<Q;J+=4)ce=w(ie,se=P[J]*(1/255),G=P[J+1]*(1/255),D=P[J+2]*(1/255),j=P[J+3]*(1/255)),Z[J>>2]=ce.ind,N[J>>2]=ce.est.rgba;else for(J=0;J<Q;J+=4){var se=P[J]*.00392156862745098,G=P[J+1]*(1/255),D=P[J+2]*(1/255),j=P[J+3]*(1/255);for(ce=ie;ce.left;)ce=b(ce.est,se,G,D,j)<=0?ce.left:ce.right;Z[J>>2]=ce.ind,N[J>>2]=ce.est.rgba}return{abuf:F.buffer,inds:Z,plte:le}}function g(E,C,P){P==null&&(P=1e-4);const F=new Uint32Array(E.buffer),N={i0:0,i1:E.length,bst:null,est:null,tdst:0,left:null,right:null};N.bst=U(E,N.i0,N.i1),N.est=k(N.bst);const L=[N];for(;L.length<C;){let le=0,Q=0;for(var ie=0;ie<L.length;ie++)L[ie].est.L>le&&(le=L[ie].est.L,Q=ie);if(le<P)break;const Z=L[Q],ce=x(E,F,Z.i0,Z.i1,Z.est.e,Z.est.eMq255);if(Z.i0>=ce||Z.i1<=ce){Z.est.L=0;continue}const J={i0:Z.i0,i1:ce,bst:null,est:null,tdst:0,left:null,right:null};J.bst=U(E,J.i0,J.i1),J.est=k(J.bst);const se={i0:ce,i1:Z.i1,bst:null,est:null,tdst:0,left:null,right:null};for(se.bst={R:[],m:[],N:Z.bst.N-J.bst.N},ie=0;ie<16;ie++)se.bst.R[ie]=Z.bst.R[ie]-J.bst.R[ie];for(ie=0;ie<4;ie++)se.bst.m[ie]=Z.bst.m[ie]-J.bst.m[ie];se.est=k(se.bst),Z.left=J,Z.right=se,L[Q]=J,L.push(se)}for(L.sort(((le,Q)=>Q.bst.N-le.bst.N)),ie=0;ie<L.length;ie++)L[ie].ind=ie;return[N,L]}function w(E,C,P,F,N){if(E.left==null)return E.tdst=(function(J,se,G,D,j){const ne=se-J[0],H=G-J[1],te=D-J[2],Y=j-J[3];return ne*ne+H*H+te*te+Y*Y})(E.est.q,C,P,F,N),E;const L=b(E.est,C,P,F,N);let ie=E.left,le=E.right;L>0&&(ie=E.right,le=E.left);const Q=w(ie,C,P,F,N);if(Q.tdst<=L*L)return Q;const Z=w(le,C,P,F,N);return Z.tdst<Q.tdst?Z:Q}function b(E,C,P,F,N){const{e:L}=E;return L[0]*C+L[1]*P+L[2]*F+L[3]*N-E.eMq}function x(E,C,P,F,N,L){for(F-=4;P<F;){for(;T(E,P,N)<=L;)P+=4;for(;T(E,F,N)>L;)F-=4;if(P>=F)break;const ie=C[P>>2];C[P>>2]=C[F>>2],C[F>>2]=ie,P+=4,F-=4}for(;T(E,P,N)>L;)P-=4;return P+4}function T(E,C,P){return E[C]*P[0]+E[C+1]*P[1]+E[C+2]*P[2]+E[C+3]*P[3]}function U(E,C,P){const F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],N=[0,0,0,0],L=P-C>>2;for(let ie=C;ie<P;ie+=4){const le=E[ie]*.00392156862745098,Q=E[ie+1]*(1/255),Z=E[ie+2]*(1/255),ce=E[ie+3]*(1/255);N[0]+=le,N[1]+=Q,N[2]+=Z,N[3]+=ce,F[0]+=le*le,F[1]+=le*Q,F[2]+=le*Z,F[3]+=le*ce,F[5]+=Q*Q,F[6]+=Q*Z,F[7]+=Q*ce,F[10]+=Z*Z,F[11]+=Z*ce,F[15]+=ce*ce}return F[4]=F[1],F[8]=F[2],F[9]=F[6],F[12]=F[3],F[13]=F[7],F[14]=F[11],{R:F,m:N,N:L}}function k(E){const{R:C}=E,{m:P}=E,{N:F}=E,N=P[0],L=P[1],ie=P[2],le=P[3],Q=F==0?0:1/F,Z=[C[0]-N*N*Q,C[1]-N*L*Q,C[2]-N*ie*Q,C[3]-N*le*Q,C[4]-L*N*Q,C[5]-L*L*Q,C[6]-L*ie*Q,C[7]-L*le*Q,C[8]-ie*N*Q,C[9]-ie*L*Q,C[10]-ie*ie*Q,C[11]-ie*le*Q,C[12]-le*N*Q,C[13]-le*L*Q,C[14]-le*ie*Q,C[15]-le*le*Q],ce=Z,J=S;let se=[Math.random(),Math.random(),Math.random(),Math.random()],G=0,D=0;if(F!=0)for(let ne=0;ne<16&&(se=J.multVec(ce,se),D=Math.sqrt(J.dot(se,se)),se=J.sml(1/D,se),!(ne!=0&&Math.abs(D-G)<1e-9));ne++)G=D;const j=[N*Q,L*Q,ie*Q,le*Q];return{Cov:Z,q:j,e:se,L:G,eMq255:J.dot(J.sml(255,j),se),eMq:J.dot(se,j),rgba:(Math.round(255*j[3])<<24|Math.round(255*j[2])<<16|Math.round(255*j[1])<<8|Math.round(255*j[0])<<0)>>>0}}var S={multVec:(E,C)=>[E[0]*C[0]+E[1]*C[1]+E[2]*C[2]+E[3]*C[3],E[4]*C[0]+E[5]*C[1]+E[6]*C[2]+E[7]*C[3],E[8]*C[0]+E[9]*C[1]+E[10]*C[2]+E[11]*C[3],E[12]*C[0]+E[13]*C[1]+E[14]*C[2]+E[15]*C[3]],dot:(E,C)=>E[0]*C[0]+E[1]*C[1]+E[2]*C[2]+E[3]*C[3],sml:(E,C)=>[E*C[0],E*C[1],E*C[2],E*C[3]]};ml.encode=function(C,P,F,N,L,ie,le){N==null&&(N=0),le==null&&(le=!1);const Q=d(C,P,F,N,[!1,!1,!1,0,le,!1]);return A(Q,-1),c(Q,P,F,L,ie)},ml.encodeLL=function(C,P,F,N,L,ie,le,Q){const Z={ctype:0+(N==1?0:2)+(L==0?0:4),depth:ie,frames:[]},ce=(N+L)*ie,J=ce*P;for(let se=0;se<C.length;se++)Z.frames.push({rect:{x:0,y:0,width:P,height:F},img:new Uint8Array(C[se]),blend:0,dispose:1,bpp:Math.ceil(ce/8),bpl:Math.ceil(J/8)});return A(Z,0,!0),c(Z,P,F,le,Q)},ml.encode.compress=d,ml.encode.dither=i,ml.quantize=y,ml.quantize.getKDtree=g,ml.quantize.getNearest=w})();const RH={toArrayBuffer(e,t){const n=e.width,a=e.height,r=n<<2,s=e.getContext("2d").getImageData(0,0,n,a),o=new Uint32Array(s.data.buffer),i=(32*n+31)/32<<2,c=i*a,A=122+c,d=new ArrayBuffer(A),f=new DataView(d),m=1<<20;let h,v,y,g,w=m,b=0,x=0,T=0;function U(E){f.setUint16(x,E,!0),x+=2}function k(E){f.setUint32(x,E,!0),x+=4}function S(E){x+=E}U(19778),k(A),S(4),k(122),k(108),k(n),k(-a>>>0),U(1),U(32),k(3),k(c),k(2835),k(2835),S(8),k(16711680),k(65280),k(255),k(4278190080),k(1466527264),(function E(){for(;b<a&&w>0;){for(g=122+b*i,h=0;h<r;)w--,v=o[T++],y=v>>>24,f.setUint32(g+h,v<<8|y),h+=4;b++}T<o.length?(w=m,setTimeout(E,RH._dly)):t(d)})()},toBlob(e,t){this.toArrayBuffer(e,(n=>{t(new Blob([n],{type:"image/bmp"}))}))},_dly:9};var Jo={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},eBe={[Jo.CHROME]:16384,[Jo.FIREFOX]:11180,[Jo.DESKTOP_SAFARI]:16384,[Jo.IE]:8192,[Jo.IOS]:4096,[Jo.ETC]:8192};const ST=typeof window<"u",NH=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,r2=ST&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),tBe=(ST||NH)&&(r2&&r2.getOriginalSymbol(window,"File")||typeof File<"u"&&File),VH=(ST||NH)&&(r2&&r2.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function ET(e,t,n=Date.now()){return new Promise((a=>{const r=e.split(","),s=r[0].match(/:(.*?);/)[1],o=globalThis.atob(r[1]);let i=o.length;const c=new Uint8Array(i);for(;i--;)c[i]=o.charCodeAt(i);const A=new Blob([c],{type:s});A.name=t,A.lastModified=n,a(A)}))}function LH(e){return new Promise(((t,n)=>{const a=new VH;a.onload=()=>t(a.result),a.onerror=r=>n(r),a.readAsDataURL(e)}))}function MH(e){return new Promise(((t,n)=>{const a=new Image;a.onload=()=>t(a),a.onerror=r=>n(r),a.src=e}))}function LA(){if(LA.cachedResult!==void 0)return LA.cachedResult;let e=Jo.ETC;const{userAgent:t}=navigator;return/Chrom(e|ium)/i.test(t)?e=Jo.CHROME:/iP(ad|od|hone)/i.test(t)&&/WebKit/i.test(t)?e=Jo.IOS:/Safari/i.test(t)?e=Jo.DESKTOP_SAFARI:/Firefox/i.test(t)?e=Jo.FIREFOX:(/MSIE/i.test(t)||document.documentMode)&&(e=Jo.IE),LA.cachedResult=e,LA.cachedResult}function OH(e,t){const n=LA(),a=eBe[n];let r=e,s=t,o=r*s;const i=r>s?s/r:r/s;for(;o>a*a;){const c=(a+r)/2,A=(a+s)/2;c<A?(s=A,r=A*i):(s=c*i,r=c),o=r*s}return{width:r,height:s}}function Lw(e,t){let n,a;try{if(n=new OffscreenCanvas(e,t),a=n.getContext("2d"),a===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),a=n.getContext("2d")}return n.width=e,n.height=t,[n,a]}function HH(e,t){const{width:n,height:a}=OH(e.width,e.height),[r,s]=Lw(n,a);return t&&/jpe?g/.test(t)&&(s.fillStyle="white",s.fillRect(0,0,r.width,r.height)),s.drawImage(e,0,0,r.width,r.height),r}function t_(){return t_.cachedResult!==void 0||(t_.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),t_.cachedResult}function s2(e,t={}){return new Promise((function(n,a){let r,s;var o=function(){try{return s=HH(r,t.fileType||e.type),n([r,s])}catch(c){return a(c)}},i=function(c){try{var A=function(d){try{throw d}catch(f){return a(f)}};try{let d;return LH(e).then((function(f){try{return d=f,MH(d).then((function(m){try{return r=m,(function(){try{return o()}catch(h){return a(h)}})()}catch(h){return A(h)}}),A)}catch(m){return A(m)}}),A)}catch(d){A(d)}}catch(d){return a(d)}};try{if(t_()||[Jo.DESKTOP_SAFARI,Jo.MOBILE_SAFARI].includes(LA()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(e).then((function(c){try{return r=c,o()}catch{return i()}}),i)}catch{i()}}))}function o2(e,t,n,a,r=1){return new Promise((function(s,o){let i;if(t==="image/png"){let A,d,f;return A=e.getContext("2d"),{data:d}=A.getImageData(0,0,e.width,e.height),f=ml.encode([d.buffer],e.width,e.height,4096*r),i=new Blob([f],{type:t}),i.name=n,i.lastModified=a,c.call(this)}{let A=function(){return c.call(this)};if(t==="image/bmp")return new Promise((d=>RH.toBlob(e,d))).then((function(d){try{return i=d,i.name=n,i.lastModified=a,A.call(this)}catch(f){return o(f)}}).bind(this),o);{let d=function(){return A.call(this)};if(typeof OffscreenCanvas=="function"&&e instanceof OffscreenCanvas)return e.convertToBlob({type:t,quality:r}).then((function(f){try{return i=f,i.name=n,i.lastModified=a,d.call(this)}catch(m){return o(m)}}).bind(this),o);{let f;return f=e.toDataURL(t,r),ET(f,n,a).then((function(m){try{return i=m,d.call(this)}catch(h){return o(h)}}).bind(this),o)}}}function c(){return s(i)}}))}function fu(e){e.width=0,e.height=0}function Hm(){return new Promise((function(e,t){let n,a,r,s;return Hm.cachedResult!==void 0?e(Hm.cachedResult):ET("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(o){try{return n=o,s2(n).then((function(i){try{return a=i[1],o2(a,n.type,n.name,n.lastModified).then((function(c){try{return r=c,fu(a),s2(r).then((function(A){try{return s=A[0],Hm.cachedResult=s.width===1&&s.height===2,e(Hm.cachedResult)}catch(d){return t(d)}}),t)}catch(A){return t(A)}}),t)}catch(c){return t(c)}}),t)}catch(i){return t(i)}}),t)}))}function $H(e){return new Promise(((t,n)=>{const a=new VH;a.onload=r=>{const s=new DataView(r.target.result);if(s.getUint16(0,!1)!=65496)return t(-2);const o=s.byteLength;let i=2;for(;i<o;){if(s.getUint16(i+2,!1)<=8)return t(-1);const c=s.getUint16(i,!1);if(i+=2,c==65505){if(s.getUint32(i+=2,!1)!=1165519206)return t(-1);const A=s.getUint16(i+=6,!1)==18761;i+=s.getUint32(i+4,A);const d=s.getUint16(i,A);i+=2;for(let f=0;f<d;f++)if(s.getUint16(i+12*f,A)==274)return t(s.getUint16(i+12*f+8,A))}else{if((65280&c)!=65280)break;i+=s.getUint16(i,!1)}}return t(-1)},a.onerror=r=>n(r),a.readAsArrayBuffer(e)}))}function QH(e,t){const{width:n}=e,{height:a}=e,{maxWidthOrHeight:r}=t;let s,o=e;return isFinite(r)&&(n>r||a>r)&&([o,s]=Lw(n,a),n>a?(o.width=r,o.height=a/n*r):(o.width=n/a*r,o.height=r),s.drawImage(e,0,0,o.width,o.height),fu(e)),o}function GH(e,t){const{width:n}=e,{height:a}=e,[r,s]=Lw(n,a);switch(t>4&&t<9?(r.width=a,r.height=n):(r.width=n,r.height=a),t){case 2:s.transform(-1,0,0,1,n,0);break;case 3:s.transform(-1,0,0,-1,n,a);break;case 4:s.transform(1,0,0,-1,0,a);break;case 5:s.transform(0,1,1,0,0,0);break;case 6:s.transform(0,1,-1,0,a,0);break;case 7:s.transform(0,-1,-1,0,a,n);break;case 8:s.transform(0,-1,1,0,0,n)}return s.drawImage(e,0,0,n,a),fu(e),r}function oR(e,t,n=0){return new Promise((function(a,r){let s,o,i,c,A,d,f,m,h,v,y,g,w,b,x,T,U,k,S,E;function C(F=5){if(t.signal&&t.signal.aborted)throw t.signal.reason;s+=F,t.onProgress(Math.min(s,100))}function P(F){if(t.signal&&t.signal.aborted)throw t.signal.reason;s=Math.min(Math.max(F,s),100),t.onProgress(s)}return s=n,o=t.maxIteration||10,i=1024*t.maxSizeMB*1024,C(),s2(e,t).then((function(F){try{return[,c]=F,C(),A=QH(c,t),C(),new Promise((function(N,L){var ie;if(!(ie=t.exifOrientation))return $H(e).then((function(Q){try{return ie=Q,le.call(this)}catch(Z){return L(Z)}}).bind(this),L);function le(){return N(ie)}return le.call(this)})).then((function(N){try{return d=N,C(),Hm().then((function(L){try{return f=L?A:GH(A,d),C(),m=t.initialQuality||1,h=t.fileType||e.type,o2(f,h,e.name,e.lastModified,m).then((function(ie){try{{let Q=function(){if(o--&&(x>i||x>w)){let ce,J;return ce=E?.95*S.width:S.width,J=E?.95*S.height:S.height,[U,k]=Lw(ce,J),k.drawImage(S,0,0,ce,J),m*=h==="image/png"?.85:.95,o2(U,h,e.name,e.lastModified,m).then((function(se){try{return T=se,fu(S),S=U,x=T.size,P(Math.min(99,Math.floor((b-x)/(b-i)*100))),Q}catch(G){return r(G)}}),r)}return[1]},Z=function(){return fu(S),fu(U),fu(A),fu(f),fu(c),P(100),a(T)};if(v=ie,C(),y=v.size>i,g=v.size>e.size,!y&&!g)return P(100),a(v);var le;return w=e.size,b=v.size,x=b,S=f,E=!t.alwaysKeepResolution&&y,(le=(function(ce){for(;ce;){if(ce.then)return void ce.then(le,r);try{if(ce.pop){if(ce.length)return ce.pop()?Z.call(this):ce;ce=Q}else ce=ce.call(this)}catch(J){return r(J)}}}).bind(this))(Q)}}catch(Q){return r(Q)}}).bind(this),r)}catch(ie){return r(ie)}}).bind(this),r)}catch(L){return r(L)}}).bind(this),r)}catch(N){return r(N)}}).bind(this),r)}))}const nBe=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let FC;function aBe(e,t){return new Promise(((n,a)=>{FC||(FC=(function(o){const i=[];return i.push(o),URL.createObjectURL(new Blob(i))})(nBe));const r=new Worker(FC);r.addEventListener("message",(function(o){if(t.signal&&t.signal.aborted)r.terminate();else if(o.data.progress===void 0){if(o.data.error)return a(new Error(o.data.error)),void r.terminate();n(o.data.file),r.terminate()}else t.onProgress(o.data.progress)})),r.addEventListener("error",a),t.signal&&t.signal.addEventListener("abort",(()=>{a(t.signal.reason),r.terminate()})),r.postMessage({file:e,imageCompressionLibUrl:t.libURL,options:{...t,onProgress:void 0,signal:void 0}})}))}function Yr(e,t){return new Promise((function(n,a){let r,s,o,i,c,A;if(r={...t},o=0,{onProgress:i}=r,r.maxSizeMB=r.maxSizeMB||Number.POSITIVE_INFINITY,c=typeof r.useWebWorker!="boolean"||r.useWebWorker,delete r.useWebWorker,r.onProgress=h=>{o=h,typeof i=="function"&&i(o)},!(e instanceof Blob||e instanceof tBe))return a(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(e.type))return a(new Error("The file given is not an image"));if(A=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!c||typeof Worker!="function"||A)return oR(e,r).then((function(h){try{return s=h,m.call(this)}catch(v){return a(v)}}).bind(this),a);var d=(function(){try{return m.call(this)}catch(h){return a(h)}}).bind(this),f=function(h){try{return oR(e,r).then((function(v){try{return s=v,d()}catch(y){return a(y)}}),a)}catch(v){return a(v)}};try{return r.libURL=r.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",aBe(e,r).then((function(h){try{return s=h,d()}catch{return f()}}),f)}catch{f()}function m(){try{s.name=e.name,s.lastModified=e.lastModified}catch{}try{r.preserveExif&&e.type==="image/jpeg"&&(!r.fileType||r.fileType&&r.fileType===e.type)&&(s=UH(e,s))}catch{}return n(s)}}))}Yr.getDataUrlFromFile=LH,Yr.getFilefromDataUrl=ET,Yr.loadImage=MH,Yr.drawImageInCanvas=HH,Yr.drawFileInCanvas=s2,Yr.canvasToFile=o2,Yr.getExifOrientation=$H,Yr.handleMaxWidthOrHeight=QH,Yr.followExifOrientation=GH,Yr.cleanupCanvasMemory=fu,Yr.isAutoOrientationInBrowser=Hm,Yr.approximateBelowMaximumCanvasSizeOfBrowser=OH,Yr.copyExifWithoutOrientation=UH,Yr.getBrowserName=LA,Yr.version="2.0.2";const rBe={class:"text-caption"},sBe={key:1,class:"text-overline grey--text text--darken-3 mx-2"},oBe={class:"mb-3"},iBe={class:"text-body-2"},lBe={class:"text-body-2"},uBe={class:"text-caption text-grey-600"},cBe={class:"d-flex justify-center"},dBe={class:"text-center text-caption mt-2 text-info"},iR={__name:"upload-dialog",props:{consultation:{type:Object,required:!1},procedure:{type:Object,required:!1},patient:{type:Object,required:!1}},emits:["close"],setup(e,{emit:t}){const n=e,a=t,r=M([]),s=M(!1),o=M(""),i=M(null),c=M([]),A=M(""),d=M(null),f=M(""),m=M("fast"),h=M([]),v=[{title:"Skip Compression",value:"none",subtitle:"Upload files without compression (fastest)"},{title:"Fast Compression",value:"fast",subtitle:"Quick compression, minimal quality loss"},{title:"Balanced",value:"balanced",subtitle:"Good balance of quality and size"},{title:"High Quality",value:"high",subtitle:"Best quality, larger files"},{title:"Aggressive",value:"aggressive",subtitle:"Smaller files, some quality loss"},{title:"Ultra",value:"ultra",subtitle:"Maximum compression, noticeable quality loss"}],y=qEe(),g=y.limits,w=y.acceptedTypes,b=["before_image","after_image","prescription","report","consent_letter"],x=ee(()=>i.value&&i.value.validFiles.length>0),T=ee(()=>x.value&&o.value&&!s.value),U=ee(()=>i.value?.validFiles?i.value.validFiles.some(se=>se.file.type.startsWith("image/")):!1),k=ee(()=>{if(!i.value?.validFiles)return"";const se=i.value.validFiles.filter(Y=>Y.file.type.startsWith("image/"));if(se.length===0)return"";const G=se.reduce((Y,K)=>Y+K.file.size,0),D=(G/(1024*1024)).toFixed(2),j={high:.7,balanced:.5,aggressive:.3,ultra:.2},H=(G*j[m.value]/(1024*1024)).toFixed(2),te=((1-j[m.value])*100).toFixed(0);return`${D}MB  ${H}MB (${te}% reduction)`}),S=()=>{if(!i.value?.validFiles){h.value=[];return}const se=i.value.validFiles.filter(D=>D.file.type.startsWith("image/")),G={high:.7,balanced:.5,aggressive:.3,ultra:.2};h.value=se.map(D=>{const j=D.file.size,ne=(j/(1024*1024)).toFixed(2),te=(j*G[m.value]/(1024*1024)).toFixed(2),Y=((1-G[m.value])*100).toFixed(0);return{name:D.file.name,originalSize:`${ne}MB`,estimatedSize:`${te}MB`,reduction:Y}})},E=se=>{if(A.value="",c.value=[],i.value=null,!se||se.length===0)return;const G=WEe(se);i.value=G;const D=jEe(G);c.value=D,!G.success&&!G.hasWarnings&&(A.value="Selected files cannot be uploaded due to validation errors"),console.log("File validation result:",G)};We(r,E);const C=se=>({image:"mdi-image",document:"mdi-file-document",video:"mdi-video",other:"mdi-file"})[se]||"mdi-file",P=se=>({image:"success",document:"info",video:"warning",other:"grey"})[se]||"grey",F={high:{maxSizeMB:2,maxWidthOrHeight:2048,quality:.9,fileType:"image/jpeg"},balanced:{maxSizeMB:1,maxWidthOrHeight:1920,quality:.85,fileType:"image/jpeg"},aggressive:{maxSizeMB:.5,maxWidthOrHeight:1600,quality:.75,fileType:"image/jpeg"},ultra:{maxSizeMB:.25,maxWidthOrHeight:1200,quality:.65,fileType:"image/jpeg"}},N=se=>{const G=se.size/1048576;return(se.name.toLowerCase().includes("xray")||se.name.toLowerCase().includes("scan")||se.name.toLowerCase().includes("mri"))&&G<=5&&m.value!=="ultra"?F.high:F[m.value]||F.balanced};We([i,m],()=>{S()},{immediate:!0});const L=async se=>new Promise(G=>{const D=document.createElement("canvas"),j=D.getContext("2d"),ne=new Image;ne.onload=()=>{requestAnimationFrame(()=>{D.width=ne.width,D.height=ne.height,j.drawImage(ne,0,0),window.requestIdleCallback?requestIdleCallback(()=>{D.toBlob(H=>{const te=new File([H],se.name,{type:se.type,lastModified:Date.now()});G(te)},se.type,.95)}):setTimeout(()=>{D.toBlob(H=>{const te=new File([H],se.name,{type:se.type,lastModified:Date.now()});G(te)},se.type,.95)},0)})},ne.src=URL.createObjectURL(se)}),ie=se=>{const G=se.type==="image/png"&&se.name.toLowerCase().includes("transparent");return se.type==="image/png"||G?"image/png":"image/jpeg"},le=async se=>{if(!se.type.startsWith("image/"))return se;try{const G=se.size;console.log(`Compressing image: ${se.name} (${(G/1024/1024).toFixed(2)}MB)`);const D=await L(se);console.log(`Metadata stripped: ${(D.size/1024/1024).toFixed(2)}MB`);let j;if(m.value==="fast")j={maxSizeMB:1,maxWidthOrHeight:1200,quality:.7,fileType:"image/jpeg",useWebWorker:!1,initialQuality:.7};else{j=N(D);const K=ie(D);j.fileType=K}let ne=await Yr(D,j);const H=ne.size/G;if(H>.8){if(console.log(`Primary compression insufficient (${(H*100).toFixed(1)}%), trying alternatives...`),j.fileType!=="image/jpeg"){const K={...j,fileType:"image/jpeg",quality:Math.max(.6,j.quality-.1)},X=await Yr(D,K);X.size<ne.size&&(ne=X,console.log("JPEG compression was better"))}if(ne.size/G>.7){console.log("Still too large, applying ultra compression...");const X=await Yr(D,{maxSizeMB:.2,maxWidthOrHeight:1e3,quality:.6,fileType:"image/jpeg",useWebWorker:!0});X.size<ne.size&&(ne=X,console.log("Ultra compression applied"))}}const te=ne.size,Y=((1-te/G)*100).toFixed(1);return console.log(`Final compression: ${se.name} -> ${(te/1024/1024).toFixed(2)}MB (${Y}% reduction)`),ne}catch(G){console.warn(`Failed to compress ${se.name}:`,G);try{return console.log(`Attempting fallback JPEG compression for ${se.name}`),await Yr(se,{maxSizeMB:1,maxWidthOrHeight:1600,quality:.7,fileType:"image/jpeg",useWebWorker:!0})}catch(D){return console.warn(`Fallback compression also failed for ${se.name}:`,D),se}}},Q=async(se,G=null)=>{const D=[];let j=0;for(let ne=0;ne<se.length;ne++){const H=se[ne];if(H.type.startsWith("image/")){if(m.value==="none"||H.size>10*1024*1024){console.log(`Skipping compression for file: ${H.name} (${(H.size/1024/1024).toFixed(2)}MB)`),D.push(H),j++;continue}G&&G(Math.round(j/se.length*100),`Compressing ${H.name}...`);const te=await new Promise(Y=>{setTimeout(async()=>{try{await new Promise(oe=>setTimeout(oe,0));const K=le(H),X=new Promise((oe,W)=>setTimeout(()=>W(new Error("Compression timeout")),1e4)),ae=await Promise.race([K,X]);Y(ae)}catch(K){console.error("Compression error:",K),Y(H)}},0)});D.push(te)}else D.push(H);j++,ne<se.length-1&&await new Promise(te=>setTimeout(te,50))}return G&&G(100,"Compression complete!"),D},Z=()=>{a("close")},ce=()=>{r.value=[],o.value="",i.value=null,c.value=[],A.value=""},J=async()=>{if(!T.value){console.warn("Cannot upload: validation failed or missing file type");return}s.value=!0;try{const se=i.value.validFiles.map(X=>X.file);if(se.length===0)throw new Error("No valid files to upload");console.log("Compressing images before upload..."),d.value=0,f.value="Starting compression...";const G=await Q(se,(X,ae)=>{d.value=X,f.value=ae}),D=new FormData;G.forEach(X=>{D.append("files",X)});const j={tag:o.value},ne=n.consultation?.id,H=ne&&ne!==0&&ne!=="0",te=n.procedure?.id,Y=te&&te!==0&&te!=="0";if(H)j.consultationId=ne;else if(Y)j.treatmentPlanId=te;else if(n.patient?.id)j.patientId=n.patient.id;else throw new Error("Either consultation, procedure, or patient ID is required");console.log("Uploading files:",{fileCount:G.length,totalSize:G.reduce((X,ae)=>X+ae.size,0),tag:o.value,params:j});const K=await dt.post("/upload/",D,{params:j,headers:{"Content-Type":"multipart/form-data"}});console.log("Upload successful:",K.data)}catch(se){console.error("Upload failed:",se)}finally{s.value=!1,d.value=null,f.value="",Z()}};return(se,G)=>{const D=I("v-chip"),j=I("v-card-title"),ne=I("v-col"),H=I("v-icon"),te=I("v-btn"),Y=I("v-tooltip"),K=I("v-row"),X=I("v-card"),ae=I("v-file-input"),oe=I("v-alert"),W=I("v-expansion-panel-title"),de=I("v-list-item-title"),Ae=I("v-list-item-subtitle"),Ce=I("v-list-item"),De=I("v-list"),xe=I("v-expansion-panel-text"),ke=I("v-expansion-panel"),Ee=I("v-expansion-panels"),ye=I("v-select"),we=I("v-divider"),at=I("v-progress-linear");return R(),ve(X,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[l(K,{"no-gutters":""},{default:u(()=>[l(ne,{cols:"12"},{default:u(()=>[l(X,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(K,{"no-gutters":""},{default:u(()=>[l(ne,{cols:"10"},{default:u(()=>[l(j,{class:"pa-0 pl-2"},{default:u(()=>[G[3]||(G[3]=O(" Medical File Upload ",-1)),l(D,{size:"small",color:"info",class:"ml-2"},{default:u(()=>[O(" Max: "+q(Oe(g).maxFiles)+" files, "+q(Oe(g).maxFileSize),1)]),_:1})]),_:1})]),_:1}),l(ne,{cols:"2",class:"d-flex justify-end align-center"},{default:u(()=>[l(Y,{"max-width":"400"},{activator:u(({props:Je})=>[l(te,Fe({icon:"",size:"x-small"},Je,{class:"mr-1"}),{default:u(()=>[l(H,null,{default:u(()=>[...G[4]||(G[4]=[O("mdi-help-circle-outline",-1)])]),_:1})]),_:1},16)]),default:u(()=>[p("div",rBe,[G[5]||(G[5]=p("strong",null,"File Limits:",-1)),G[6]||(G[6]=p("br",null,null,-1)),O("  Maximum "+q(Oe(g).maxFiles)+" files per upload",1),G[7]||(G[7]=p("br",null,null,-1)),O("  Maximum "+q(Oe(g).maxFileSize)+" per file",1),G[8]||(G[8]=p("br",null,null,-1)),G[9]||(G[9]=p("br",null,null,-1)),G[10]||(G[10]=p("strong",null,"Accepted Types:",-1)),G[11]||(G[11]=p("br",null,null,-1)),O("  Images: "+q(Oe(w).images),1),G[12]||(G[12]=p("br",null,null,-1)),O("  Documents: "+q(Oe(w).documents),1),G[13]||(G[13]=p("br",null,null,-1)),O("  Videos: "+q(Oe(w).videos),1)])]),_:1}),l(te,{icon:"",size:"x-small",onClick:Z,class:"btn-hover-base"},{default:u(()=>[l(H,null,{default:u(()=>[...G[14]||(G[14]=[p("img",{src:Yl,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(K,{"no-gutters":""},{default:u(()=>[l(ne,{cols:"12"},{default:u(()=>[l(X,{flat:"",class:"d-flex justify-center ma-2",color:"surfaceContainer"},{default:u(()=>[l(K,{"no-gutters":""},{default:u(()=>[l(ne,{cols:"12"},{default:u(()=>[l(ae,{modelValue:r.value,"onUpdate:modelValue":[G[0]||(G[0]=Je=>r.value=Je),E],loading:s.value,density:"comfortable",variant:"solo-inverted",counter:"",clearable:"",accept:"image/*,application/*,video/*",label:"Select medical files",chips:"",multiple:"",error:!!A.value,"error-messages":A.value},{selection:u(({fileNames:Je,index:rt})=>[rt<2?(R(),ve(D,{key:0,color:"primary",size:"small",class:"me-2"},{default:u(()=>[O(q(Je[rt]),1)]),_:2},1024)):rt===2?(R(),me("span",sBe," +"+q(r.value.length-2)+" File(s) ",1)):_e("",!0)]),_:1},8,["modelValue","loading","error","error-messages"])]),_:1}),c.value.length>0?(R(),ve(ne,{key:0,cols:"12"},{default:u(()=>[p("div",oBe,[(R(!0),me(ze,null,Wt(c.value,(Je,rt)=>(R(),ve(oe,{key:rt,type:Je.type,title:Je.title,text:Je.message,class:"mb-2",density:"compact",variant:"tonal"},null,8,["type","title","text"]))),128))])]),_:1})):_e("",!0),i.value&&i.value.validFiles.length>0?(R(),ve(ne,{key:1,cols:"12"},{default:u(()=>[l(Ee,{variant:"accordion",class:"mb-3"},{default:u(()=>[l(ke,null,{default:u(()=>[l(W,null,{default:u(()=>[p("span",iBe,"  "+q(i.value.summary.validFiles)+" Valid Files ("+q(i.value.summary.formattedTotalSize)+") ",1)]),_:1}),l(xe,null,{default:u(()=>[l(De,{dense:"",class:"py-0"},{default:u(()=>[(R(!0),me(ze,null,Wt(i.value.validFiles,Je=>(R(),ve(Ce,{key:Je.index,class:"px-0 py-1"},{prepend:u(()=>[l(H,{size:"small",color:P(Je.category)},{default:u(()=>[O(q(C(Je.category)),1)]),_:2},1032,["color"])]),default:u(()=>[l(de,{class:"text-caption"},{default:u(()=>[O(q(Je.file.name),1)]),_:2},1024),l(Ae,{class:"text-caption"},{default:u(()=>[O(q(Je.formattedSize)+"  "+q(Je.category),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):_e("",!0),l(ne,{cols:"12"},{default:u(()=>[l(ye,{modelValue:o.value,"onUpdate:modelValue":G[1]||(G[1]=Je=>o.value=Je),density:"comfortable",variant:"solo-inverted",items:b,label:"Select type",disabled:!x.value},null,8,["modelValue","disabled"])]),_:1}),x.value&&U.value?(R(),ve(ne,{key:2,cols:"12"},{default:u(()=>[l(Ee,{variant:"accordion",class:"mb-3"},{default:u(()=>[l(ke,null,{default:u(()=>[l(W,null,{default:u(()=>[p("span",lBe,[G[15]||(G[15]=O("  Image Compression Settings ",-1)),l(D,{size:"x-small",color:"info",class:"ml-2"},{default:u(()=>[O(q(m.value),1)]),_:1})])]),_:1}),l(xe,null,{default:u(()=>[l(K,{"no-gutters":""},{default:u(()=>[l(ne,{cols:"12",class:"mb-3"},{default:u(()=>[l(ye,{modelValue:m.value,"onUpdate:modelValue":G[2]||(G[2]=Je=>m.value=Je),items:v,label:"Compression Mode",density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1}),l(ne,{cols:"12",class:"mb-2"},{default:u(()=>[p("div",uBe," Estimated compression: "+q(k.value),1)]),_:1}),h.value.length>0?(R(),ve(ne,{key:0,cols:"12"},{default:u(()=>[l(De,{dense:"",class:"py-0"},{default:u(()=>[(R(!0),me(ze,null,Wt(h.value,Je=>(R(),ve(Ce,{key:Je.name,class:"px-0 py-1"},{default:u(()=>[l(de,{class:"text-caption"},{default:u(()=>[O(q(Je.name),1)]),_:2},1024),l(Ae,{class:"text-caption"},{default:u(()=>[O(q(Je.originalSize)+"  "+q(Je.estimatedSize)+" ("+q(Je.reduction)+"% reduction) ",1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):_e("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):_e("",!0),l(ne,{cols:"12"},{default:u(()=>[l(we,{class:"mb-2"}),p("div",cBe,[l(te,{variant:"outlined",onClick:ce,disabled:!r.value||r.value.length===0,class:"btn-hover-base mr-4"},{default:u(()=>[...G[16]||(G[16]=[O(" Clear ",-1)])]),_:1},8,["disabled"]),l(te,{variant:"elevated",color:"primary",onClick:J,loading:s.value,disabled:!T.value,class:"btn-hover-enhanced ml-4"},{default:u(()=>[l(H,{start:""},{default:u(()=>[...G[17]||(G[17]=[O("mdi-upload",-1)])]),_:1}),O(" Upload "+q(i.value?.summary?.validFiles||0)+" Files ",1)]),_:1},8,["loading","disabled"])])]),_:1}),d.value!==null&&d.value<100?(R(),ve(ne,{key:3,cols:"12"},{default:u(()=>[l(at,{"model-value":d.value,color:"info",class:"mt-3"},null,8,["model-value"]),p("div",dBe,q(f.value),1)]),_:1})):_e("",!0),s.value?(R(),ve(ne,{key:4,cols:"12"},{default:u(()=>[l(at,{indeterminate:"",color:"primary",class:"mt-3"}),G[18]||(G[18]=p("div",{class:"text-center text-caption mt-2 text-primary"}," Uploading medical files... ",-1))]),_:1})):_e("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},ABe={key:0,style:{height:"70vh"}},fBe={key:0,style:{height:"100%",width:"100%",position:"relative"},class:"bg-grey-lighten-4"},mBe={class:"d-flex align-center justify-center fill-height"},hBe={class:"d-flex align-center justify-center fill-height"},vBe={class:"image-controls"},pBe=["src"],gBe={key:2,style:{height:"100%",width:"100%",position:"relative",background:"#f5f5f5"}},yBe={class:"d-flex flex-column align-center justify-center",style:{height:"100%"}},_Be={class:"mt-4"},wBe={class:"mt-6"},bBe={key:3,class:"d-flex flex-column align-center justify-center",style:{height:"100%"}},xBe={class:"mt-4 text-subtitle-1"},CBe={class:"text-caption text-grey"},SBe={class:"mt-4",style:{width:"100%",height:"60%"}},EBe=["src"],BBe={key:4,class:"d-flex flex-column align-center justify-center",style:{height:"100%"}},kBe={class:"mt-4 text-subtitle-1"},TBe={class:"text-caption text-grey"},IBe={__name:"media-viewer",props:{isOpen:{type:Boolean,required:!0},mediaItems:{type:Array,required:!0},selectedMedia:{type:Object,default:null},currentIndex:{type:Number,default:0}},emits:["close","navigate"],setup(e,{emit:t}){const n=M(!1);let a=null;try{window.require&&(a=window.require("electron").ipcRenderer,n.value=!0)}catch{console.log("Not running in Electron environment")}const r=e,s=t,o=M(!1),i=M(0),c=M(1),A=M(0),d=M(0),f=M(!1),m=M({x:0,y:0}),h=M(!1),v=M(Pr("localhost").http);(async()=>{try{const G=await CH();v.value=G}catch(G){console.error("Failed to get server URL, using localhost:",G),v.value=Pr("localhost").http}})();const g=G=>`${v.value}/api/upload/file?path=${encodeURIComponent(G)}`,w=G=>{if(!G)return"Unknown File";const D=G.split("/");return D[D.length-1]||"Unknown File"},b=G=>{i.value=(i.value+G)%360,i.value<0&&(i.value+=360)},x=()=>{i.value=0},T=()=>{const G=Math.min(c.value*1.2,5);c.value=G},U=()=>{const G=Math.max(c.value/1.2,.2);c.value=G,S()},k=()=>{c.value=1,A.value=0,d.value=0},S=()=>{const G=Math.max(0,(c.value-1)*200);A.value=Math.max(-G,Math.min(G,A.value)),d.value=Math.max(-G,Math.min(G,d.value))},E=G=>{c.value>1&&(f.value=!0,m.value={x:G.clientX,y:G.clientY},G.preventDefault())},C=G=>{if(f.value&&c.value>1){const D=G.clientX-m.value.x,j=G.clientY-m.value.y;A.value+=D/c.value,d.value+=j/c.value,S(),m.value={x:G.clientX,y:G.clientY},G.preventDefault()}},P=()=>{f.value=!1},F=G=>{G.deltaY<0?T():U()},N=async()=>{if(!n.value||!a){console.warn("Copy feature only available in Electron");return}if(!r.selectedMedia||!r.selectedMedia.type.startsWith("image/")){console.warn("Copy feature only available for images");return}try{h.value=!0;const G=await a.invoke("copy-image-to-clipboard",r.selectedMedia.path);if(G.success)console.log("Image copied to clipboard successfully");else throw new Error(G.error||"Failed to copy image")}catch(G){console.error("Failed to copy image to clipboard:",G)}finally{h.value=!1}},L=()=>{i.value=0,c.value=1,A.value=0,d.value=0,f.value=!1,h.value=!1},ie=G=>{let D;G==="next"?D=Math.min(r.currentIndex+1,r.mediaItems.length-1):D=Math.max(r.currentIndex-1,0),D!==r.currentIndex&&(L(),s("navigate",D))},le=G=>{if(r.isOpen)switch(G.key){case"ArrowLeft":G.preventDefault(),ie("prev");break;case"ArrowRight":G.preventDefault(),ie("next");break;case"Escape":G.preventDefault(),se();break}},Q=async G=>{const D=g(G.path);if(window.require)try{const{ipcRenderer:j}=window.require("electron"),ne=await j.invoke("open-external",D);if(ne.success){console.log("Successfully opened PDF with system default application");return}else console.error("Failed to open with system app:",ne.error)}catch(j){console.error("Failed to use Electron IPC:",j)}Z(D)},Z=G=>{try{if(!window.open(G,"_blank","noopener,noreferrer")){console.log("Popup blocked, trying alternative approach");const j=document.createElement("a");j.href=G,j.target="_blank",j.rel="noopener noreferrer",document.body.appendChild(j),j.click(),document.body.removeChild(j)}}catch(D){console.error("Failed to open URL:",D),ce(G)}},ce=async G=>{try{await navigator.clipboard.writeText(G),console.log("URL copied to clipboard:",G),alert("Unable to open PDF. URL copied to clipboard - paste it in your browser.")}catch(D){console.error("Failed to copy to clipboard:",D),prompt("Copy this URL to view the PDF:",G)}},J=G=>{const D=g(G.path),j=document.createElement("a");j.href=D,j.download=w(G.path)||"download",document.body.appendChild(j),j.click(),document.body.removeChild(j)},se=()=>{o.value=!1,s("close")};return(G,D)=>{const j=I("v-chip"),ne=I("v-col"),H=I("v-icon"),te=I("v-btn"),Y=I("v-tooltip"),K=I("v-row"),X=I("v-card"),ae=I("v-progress-circular"),oe=I("v-alert"),W=I("v-img"),de=I("v-card-text");return R(),ve(X,{onKeydown:le},{default:u(()=>[l(K,{"no-gutters":""},{default:u(()=>[l(ne,{cols:"12"},{default:u(()=>[l(X,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(K,{"no-gutters":""},{default:u(()=>[l(ne,{cols:"8",class:"d-flex align-center justify-start"},{default:u(()=>[D[13]||(D[13]=p("span",null,"Media Viewer",-1)),l(j,{class:"ml-2",size:"small",variant:"outlined"},{default:u(()=>[O(q(e.currentIndex+1)+" of "+q(e.mediaItems.length),1)]),_:1}),e.selectedMedia?.tag?(R(),ve(j,{key:0,class:"ml-2",size:"small",color:"primary"},{default:u(()=>[O(q(e.selectedMedia.tag==="before_image"?"Before":e.selectedMedia.tag==="after_image"?"After":e.selectedMedia.tag==="report"?"Report":e.selectedMedia.tag==="prescription"?"Rx":e.selectedMedia.tag==="consent_letter"?"Consent":e.selectedMedia.tag),1)]),_:1})):_e("",!0)]),_:1}),l(ne,{cols:"4",class:"d-flex align-center justify-end"},{default:u(()=>[l(Y,{text:"Previous ()",location:"bottom"},{activator:u(({props:Ae})=>[l(te,Fe({icon:"",variant:"text",disabled:e.currentIndex===0,onClick:D[0]||(D[0]=Ce=>ie("prev")),class:"mr-1"},Ae),{default:u(()=>[l(H,null,{default:u(()=>[...D[14]||(D[14]=[O("mdi-chevron-left",-1)])]),_:1})]),_:1},16,["disabled"])]),_:1}),l(Y,{text:"Next ()",location:"bottom"},{activator:u(({props:Ae})=>[l(te,Fe({icon:"",variant:"text",disabled:e.currentIndex===e.mediaItems.length-1,onClick:D[1]||(D[1]=Ce=>ie("next")),class:"mr-2"},Ae),{default:u(()=>[l(H,null,{default:u(()=>[...D[15]||(D[15]=[O("mdi-chevron-right",-1)])]),_:1})]),_:1},16,["disabled"])]),_:1}),l(Y,{text:"Close (Esc)",location:"bottom"},{activator:u(({props:Ae})=>[l(te,Fe({icon:"",size:"x-small",onClick:se},Ae),{default:u(()=>[l(H,null,{default:u(()=>[...D[16]||(D[16]=[p("img",{src:Yl,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1},16)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(de,{class:"pa-0"},{default:u(()=>[e.selectedMedia?(R(),me("div",ABe,[e.selectedMedia.type.startsWith("image/")?(R(),me("div",fBe,[p("div",{style:Rt([{height:"100%",width:"100%",overflow:"hidden",cursor:"grab"},{cursor:f.value?"grabbing":c.value>1?"grab":"default"}]),onMousedown:E,onMousemove:C,onMouseup:P,onMouseleave:P,onWheel:mn(F,["prevent"])},[e.selectedMedia.path?(R(),ve(W,{key:0,src:g(e.selectedMedia.path),height:"100%",width:"100%",contain:"",style:Rt({transform:`rotate(${i.value}deg) scale(${c.value}) translate(${A.value}px, ${d.value}px)`,transition:f.value?"none":"transform 0.3s ease",transformOrigin:"center center"})},{placeholder:u(()=>[p("div",mBe,[l(ae,{indeterminate:"",color:"primary"})])]),error:u(()=>[p("div",hBe,[l(oe,{type:"error",variant:"tonal"},{default:u(()=>[...D[17]||(D[17]=[O(" Failed to load image ",-1)])]),_:1})])]),_:1},8,["src","style"])):_e("",!0)],36),p("div",vBe,[l(Y,{text:"Copy Image",location:"top"},{activator:u(({props:Ae})=>[l(te,Fe({icon:"",size:"small",variant:"elevated",onClick:D[2]||(D[2]=Ce=>N())},Ae,{class:"mr-2",loading:h.value,disabled:h.value}),{default:u(()=>[l(H,null,{default:u(()=>[...D[18]||(D[18]=[O("mdi-content-copy",-1)])]),_:1})]),_:1},16,["loading","disabled"])]),_:1}),l(Y,{text:"Zoom In",location:"top"},{activator:u(({props:Ae})=>[l(te,Fe({icon:"",size:"small",variant:"elevated",onClick:D[3]||(D[3]=Ce=>T())},Ae,{class:"mr-2",disabled:c.value>=5}),{default:u(()=>[l(H,null,{default:u(()=>[...D[19]||(D[19]=[O("mdi-magnify-plus-outline",-1)])]),_:1})]),_:1},16,["disabled"])]),_:1}),l(Y,{text:"Zoom Out",location:"top"},{activator:u(({props:Ae})=>[l(te,Fe({icon:"",size:"small",variant:"elevated",onClick:D[4]||(D[4]=Ce=>U())},Ae,{class:"mr-2",disabled:c.value<=.2}),{default:u(()=>[l(H,null,{default:u(()=>[...D[20]||(D[20]=[O("mdi-magnify-minus-outline",-1)])]),_:1})]),_:1},16,["disabled"])]),_:1}),l(Y,{text:"Reset Zoom",location:"top"},{activator:u(({props:Ae})=>[l(te,Fe({icon:"",size:"small",variant:"elevated",onClick:D[5]||(D[5]=Ce=>k())},Ae,{class:"mr-2",disabled:c.value===1&&A.value===0&&d.value===0}),{default:u(()=>[l(H,null,{default:u(()=>[...D[21]||(D[21]=[O("mdi-fit-to-page-outline",-1)])]),_:1})]),_:1},16,["disabled"])]),_:1}),l(Y,{text:"Rotate Left",location:"top"},{activator:u(({props:Ae})=>[l(te,Fe({icon:"",size:"small",variant:"elevated",onClick:D[6]||(D[6]=Ce=>b(-90))},Ae,{class:"mr-2"}),{default:u(()=>[l(H,null,{default:u(()=>[...D[22]||(D[22]=[O("mdi-rotate-left",-1)])]),_:1})]),_:1},16)]),_:1}),l(Y,{text:"Rotate Right",location:"top"},{activator:u(({props:Ae})=>[l(te,Fe({icon:"",size:"small",variant:"elevated",onClick:D[7]||(D[7]=Ce=>b(90))},Ae,{class:"mr-2"}),{default:u(()=>[l(H,null,{default:u(()=>[...D[23]||(D[23]=[O("mdi-rotate-right",-1)])]),_:1})]),_:1},16)]),_:1}),l(Y,{text:"Reset Rotation",location:"top"},{activator:u(({props:Ae})=>[l(te,Fe({icon:"",size:"small",variant:"elevated",onClick:D[8]||(D[8]=Ce=>x())},Ae,{disabled:i.value===0}),{default:u(()=>[l(H,null,{default:u(()=>[...D[24]||(D[24]=[O("mdi-backup-restore",-1)])]),_:1})]),_:1},16,["disabled"])]),_:1})])])):e.selectedMedia.type.startsWith("video/")?(R(),me("video",{key:1,src:g(e.selectedMedia.path),controls:"",style:{width:"100%",height:"100%","object-fit":"contain"}},null,8,pBe)):e.selectedMedia.type==="application/pdf"?(R(),me("div",gBe,[p("div",yBe,[l(H,{size:"80",color:"primary"},{default:u(()=>[...D[25]||(D[25]=[O("mdi-file-pdf-box",-1)])]),_:1}),p("h3",_Be,q(w(e.selectedMedia.path)),1),D[28]||(D[28]=p("p",{class:"text-caption text-grey mt-2"},"PDF Document",-1)),D[29]||(D[29]=p("p",{class:"text-caption text-grey"},"Click to open/download this PDF",-1)),p("div",wBe,[l(te,{color:"primary",variant:"elevated",size:"large",onClick:D[9]||(D[9]=Ae=>Q(e.selectedMedia)),class:"px-8"},{default:u(()=>[l(H,{left:""},{default:u(()=>[...D[26]||(D[26]=[O("mdi-file-pdf-box",-1)])]),_:1}),D[27]||(D[27]=O(" Open PDF ",-1))]),_:1})])])])):e.selectedMedia.type.startsWith("application/")?(R(),me("div",bBe,[l(H,{size:"64",color:"grey"},{default:u(()=>[...D[30]||(D[30]=[O("mdi-file-document",-1)])]),_:1}),p("p",xBe,q(w(e.selectedMedia.path)),1),p("p",CBe,"File type: "+q(e.selectedMedia.type),1),p("div",SBe,[p("iframe",{src:g(e.selectedMedia.path),style:{width:"100%",height:"100%",border:"1px solid #ccc"},title:"Document Viewer",onError:D[10]||(D[10]=Ae=>o.value=!0)},null,40,EBe)]),l(te,{color:"primary",variant:"outlined",class:"mt-4",onClick:D[11]||(D[11]=Ae=>J(e.selectedMedia))},{default:u(()=>[l(H,{left:""},{default:u(()=>[...D[31]||(D[31]=[O("mdi-download",-1)])]),_:1}),D[32]||(D[32]=O(" Download File ",-1))]),_:1})])):(R(),me("div",BBe,[l(H,{size:"64",color:"grey"},{default:u(()=>[...D[33]||(D[33]=[O("mdi-file",-1)])]),_:1}),p("p",kBe,q(w(e.selectedMedia.path)),1),p("p",TBe,"File type: "+q(e.selectedMedia.type),1),l(te,{color:"primary",variant:"outlined",class:"mt-4",onClick:D[12]||(D[12]=Ae=>J(e.selectedMedia))},{default:u(()=>[l(H,{left:""},{default:u(()=>[...D[34]||(D[34]=[O("mdi-download",-1)])]),_:1}),D[35]||(D[35]=O(" Download File ",-1))]),_:1})]))])):_e("",!0)]),_:1})]),_:1})}}},lR=Xt(IBe,[["__scopeId","data-v-c4e833c2"]]),FBe={key:0,class:"text-caption text-medium-emphasis ml-2"},PBe={key:0,class:"d-flex justify-center align-center",style:{height:"400px"}},DBe={key:1,class:"text-center pa-4"},UBe={class:"text-error"},RBe={key:2},NBe={class:"images-column"},VBe={class:"column-header pa-3 bg-surface-variant"},LBe={key:0,class:"images-scroll"},MBe={class:"pa-2"},OBe={class:"text-body-2 font-weight-bold"},HBe={class:"d-flex align-center justify-center fill-height"},$Be={class:"d-flex align-center justify-center fill-height"},QBe={key:1,class:"empty-state pa-4 text-center"},GBe={class:"images-column"},zBe={class:"column-header pa-3 bg-surface-variant"},KBe={key:0,class:"images-scroll"},WBe={class:"pa-2"},jBe={class:"text-body-2 font-weight-bold"},qBe={class:"d-flex align-center justify-center fill-height"},YBe={class:"d-flex align-center justify-center fill-height"},XBe={key:1,class:"empty-state pa-4 text-center"},JBe={__name:"patient-images-modal",props:{isOpen:{type:Boolean,required:!0},patientId:{type:Number,required:!0},doctorId:{type:Number,required:!1}},emits:["close"],setup(e,{emit:t}){const n=e,a=t,r=M(!1),s=M(null),o=M(null),i=M([]),c=ee(()=>i.value.filter(h=>h.tag==="before_image").sort((h,v)=>v.createdAt-h.createdAt)),A=ee(()=>i.value.filter(h=>h.tag==="after_image").sort((h,v)=>v.createdAt-h.createdAt)),d=h=>{if(!h)return"";const v=new Date(h*1e3),y=new Date,g=new Date(v.getFullYear(),v.getMonth(),v.getDate()),b=new Date(y.getFullYear(),y.getMonth(),y.getDate()).getTime()-g.getTime(),x=Math.floor(b/(1e3*3600*24)),T=v.toLocaleDateString("en-US",{timeZone:"Asia/Kolkata",year:"numeric",month:"short",day:"numeric"});let U;return x===0?U="Today":x===1?U="1 day ago":U=`${x} days ago`,`${T}  ${U}`},f=async()=>{if(n.patientId){r.value=!0,s.value=null;try{const h=await LAe(n.patientId,"both",n.doctorId);if(h.success){o.value=h.data.patient;const v=h.data.images.map(g=>g.path),y=await xT(v);i.value=h.data.images.map((g,w)=>({...g,fileUrl:y[w]}))}else s.value=h.error}catch(h){s.value=h.message||"Failed to fetch patient images"}finally{r.value=!1}}},m=()=>{a("close")};return cn(()=>{n.patientId&&f()}),We(()=>n.isOpen,h=>{h&&n.patientId&&f()}),We(()=>n.patientId,h=>{h&&n.isOpen&&f()}),(h,v)=>{const y=I("v-card-title"),g=I("v-col"),w=I("v-icon"),b=I("v-btn"),x=I("v-row"),T=I("v-card"),U=I("v-progress-circular"),k=I("v-chip"),S=I("v-card-subtitle"),E=I("v-alert"),C=I("v-img"),P=I("v-card-text");return R(),ve(T,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[l(x,{"no-gutters":""},{default:u(()=>[l(g,{cols:"12"},{default:u(()=>[l(T,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(x,{"no-gutters":""},{default:u(()=>[l(g,{cols:"11"},{default:u(()=>[l(y,{class:"pa-0 pl-2"},{default:u(()=>[v[0]||(v[0]=O(" Patient Images History ",-1)),o.value?(R(),me("span",FBe," - "+q(o.value.name),1)):_e("",!0)]),_:1})]),_:1}),l(g,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(b,{icon:"",size:"x-small",onClick:m},{default:u(()=>[l(w,null,{default:u(()=>[...v[1]||(v[1]=[p("img",{src:Yl,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(x,{"no-gutters":""},{default:u(()=>[l(g,{cols:"12"},{default:u(()=>[l(T,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[r.value?(R(),me("div",PBe,[l(U,{indeterminate:"",color:"primary",size:"64"})])):s.value?(R(),me("div",DBe,[l(w,{color:"error",size:"48",class:"mb-2"},{default:u(()=>[...v[2]||(v[2]=[O("mdi-alert-circle",-1)])]),_:1}),p("p",UBe,q(s.value),1),l(b,{onClick:f,color:"primary",variant:"outlined"},{default:u(()=>[...v[3]||(v[3]=[O(" Try Again ",-1)])]),_:1})])):(R(),me("div",RBe,[l(P,{class:"pa-0",style:{height:"75vh"}},{default:u(()=>[l(x,{"no-gutters":"",class:"fill-height"},{default:u(()=>[l(g,{cols:"6",class:"border-e"},{default:u(()=>[p("div",NBe,[p("div",VBe,[l(w,{icon:"mdi-camera-outline",class:"me-2",color:"success"}),v[4]||(v[4]=p("span",{class:"text-subtitle-2 font-weight-bold"},"Before Images",-1)),l(k,{size:"small",class:"ms-2"},{default:u(()=>[O(q(c.value.length),1)]),_:1})]),c.value.length>0?(R(),me("div",LBe,[p("div",MBe,[l(x,{"no-gutters":""},{default:u(()=>[(R(!0),me(ze,null,Wt(c.value,(F,N)=>(R(),ve(g,{key:`before-${N}`,cols:"12",class:"mb-3"},{default:u(()=>[l(T,{class:"image-card",elevation:"2"},{default:u(()=>[l(S,{class:"pa-2"},{default:u(()=>[p("div",OBe,[l(w,{icon:"mdi-calendar",size:"small",class:"me-1"}),O(" "+q(d(F.createdAt)),1)])]),_:2},1024),F.fileUrl?(R(),ve(C,{key:0,src:F.fileUrl,"aspect-ratio":"1",cover:"",loading:"lazy",transition:!1,class:"image-thumbnail"},{placeholder:u(()=>[p("div",HBe,[l(U,{indeterminate:"",size:"24"})])]),error:u(()=>[p("div",$Be,[l(E,{type:"error",variant:"tonal"},{default:u(()=>[...v[5]||(v[5]=[O(" Failed to load image ",-1)])]),_:1})])]),_:1},8,["src"])):_e("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1})])])):(R(),me("div",QBe,[l(w,{icon:"mdi-camera-off",size:"48",class:"text-medium-emphasis mb-2"}),v[6]||(v[6]=p("p",{class:"text-body-2 text-medium-emphasis"},"No before images found",-1))]))])]),_:1}),l(g,{cols:"6"},{default:u(()=>[p("div",GBe,[p("div",zBe,[l(w,{icon:"mdi-camera-enhance",class:"me-2",color:"info"}),v[7]||(v[7]=p("span",{class:"text-subtitle-2 font-weight-bold"},"After Images",-1)),l(k,{size:"small",class:"ms-2"},{default:u(()=>[O(q(A.value.length),1)]),_:1})]),A.value.length>0?(R(),me("div",KBe,[p("div",WBe,[l(x,{"no-gutters":""},{default:u(()=>[(R(!0),me(ze,null,Wt(A.value,(F,N)=>(R(),ve(g,{key:`after-${N}`,cols:"12",class:"mb-3"},{default:u(()=>[l(T,{class:"image-card",elevation:"2"},{default:u(()=>[l(S,{class:"pa-2"},{default:u(()=>[p("div",jBe,[l(w,{icon:"mdi-calendar",size:"small",class:"me-1"}),O(" "+q(d(F.createdAt)),1)])]),_:2},1024),F.fileUrl?(R(),ve(C,{key:0,src:F.fileUrl,"aspect-ratio":"1",cover:"",loading:"lazy",transition:!1,class:"image-thumbnail"},{placeholder:u(()=>[p("div",qBe,[l(U,{indeterminate:"",size:"24"})])]),error:u(()=>[p("div",YBe,[l(E,{type:"error",variant:"tonal"},{default:u(()=>[...v[8]||(v[8]=[O(" Failed to load image ",-1)])]),_:1})])]),_:1},8,["src"])):_e("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1})])])):(R(),me("div",XBe,[l(w,{icon:"mdi-camera-off",size:"48",class:"text-medium-emphasis mb-2"}),v[9]||(v[9]=p("p",{class:"text-body-2 text-medium-emphasis"},"No after images found",-1))]))])]),_:1})]),_:1})]),_:1})]))]),_:1})]),_:1})]),_:1})]),_:1})}}},uR=Xt(JBe,[["__scopeId","data-v-8c82235c"]]),ZBe={__name:"delete-upload",props:{deleteSelectedUpload:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=e,a=t,r=M(n.deleteSelectedUpload),s=()=>{a("close")},o=async i=>{try{const c=await $Ae(i.id);c.success?console.log("Upload deleted successfully"):console.error("Error deleting upload:",c.error)}catch(c){console.error("Error deleting upload:",c)}s()};return(i,c)=>{const A=I("v-card-title"),d=I("v-col"),f=I("v-icon"),m=I("v-btn"),h=I("v-row"),v=I("v-card"),y=I("v-card-text"),g=I("v-divider");return R(),ve(v,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(v,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"11"},{default:u(()=>[l(A,{class:"pa-0 pl-2"},{default:u(()=>[...c[1]||(c[1]=[O("Confirm Upload Delete",-1)])]),_:1})]),_:1}),l(d,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(m,{icon:"",size:"x-small",onClick:s},{default:u(()=>[l(f,null,{default:u(()=>[...c[2]||(c[2]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(v,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(y,{class:"text-left"},{default:u(()=>[...c[3]||(c[3]=[O(" Are you sure you want to delete this uploaded file? ",-1),p("span",{class:"text-red font-weight-bold"}," You will not be able to recover the file once deleted. ",-1)])]),_:1})]),_:1})]),_:1}),l(g),l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"2"}),l(d,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(m,{variant:"outlined",onClick:c[0]||(c[0]=w=>o(r.value))},{default:u(()=>[...c[4]||(c[4]=[O("Yes, Delete File",-1)])]),_:1})]),_:1}),l(d,{cols:"2"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},eke=""+new URL("images/upload_image-CQ-OTL21.png",import.meta.url).href,tke={key:1,class:"d-flex justify-center align-center",style:{height:"100%","min-height":"60vh"}},nke={key:2,class:"date-organized-uploads-vertical"},ake={class:"date-header-vertical mb-3"},rke={class:"upload-count-vertical text-caption text-medium-emphasis ml-2"},ske={class:"d-flex align-center justify-center fill-height"},oke={class:"d-flex align-center justify-center fill-height"},ike={key:1,class:"no-images-placeholder text-center pa-4"},lke={key:0,class:"documents-list"},uke={class:"d-flex align-center"},cke={class:"file-info flex-grow-1 min-width-0"},dke={class:"file-name text-body-2 font-weight-medium text-truncate"},Ake={class:"file-type text-caption text-medium-emphasis"},fke={key:1,class:"no-documents-placeholder text-center pa-4"},mke={__name:"upload-files",props:{consultation:{type:Object,required:!1},procedure:{type:Object,required:!1},patient:{type:Object,required:!1}},setup(e){const t=e,n=ea(),a=M([]),r=M(!1),s=M(t.consultation?Hn.cloneDeep(t.consultation):null),o=M(t.procedure?Hn.cloneDeep(t.procedure):null),i=M(!1),c=M(null),A=M(0),d=M(!1),f=M(null),m=M(null),h=M(!1),v=M(null),y=ee(()=>{if(!a.value||a.value.length===0)return[];const Z={};return a.value.forEach(ce=>{const J=new Date(ce.createdAt*1e3),se=new Date,G=new Date(se);G.setDate(G.getDate()-1);let D,j;if(J.toDateString()===se.toDateString())D="Today",j="Today";else if(J.toDateString()===G.toDateString())D="Yesterday",j="Yesterday";else{const ne=J.getFullYear()===se.getFullYear();D=J.toLocaleDateString("en-US",{timeZone:"Asia/Kolkata",month:"short",day:"numeric",...ne?{}:{year:"numeric"}}),j=J.toLocaleDateString("en-US",{timeZone:"Asia/Kolkata",year:"numeric",month:"long",day:"numeric"})}Z[D]||(Z[D]={date:D,fullDate:j,rawDate:J,items:[]}),Z[D].items.push(ce)}),Object.values(Z).sort((ce,J)=>J.rawDate.getTime()-ce.rawDate.getTime())}),g=Z=>{const ce=[],J=[];return Z.forEach(se=>{se.type.startsWith("image/")?ce.push(se):J.push(se)}),{images:ce,documents:J}},w=async()=>{const Z=f.value,ce=m.value||n.state.doctorModule?.doctorId;if(!Z){console.log("Cannot fetch upload items: Patient ID not available"),a.value=[],r.value=!1;return}if(!ce){console.log("Cannot fetch upload items: Doctor ID not available"),a.value=[],r.value=!1;return}r.value=!0;try{const J=await MAe(Z,ce);if(J.success&&J.data.uploads){const se=J.data.uploads.map(D=>D.path),G=await xT(se);a.value=J.data.uploads.map((D,j)=>({...D,fileUrl:G[j]}))}else console.error("Failed to fetch patient uploads:",J.error),a.value=[]}catch(J){console.error("Error fetching upload items:",J),a.value=[]}finally{r.value=!1}};We(()=>t.consultation,async Z=>{Z?(s.value=Hn.cloneDeep(Z),f.value=Z.patientId,m.value=Z.doctorId,Z.patientId&&Z.doctorId?await w():(a.value=[],console.log("Patient ID or Doctor ID not available"))):(s.value=null,t.patient?.id&&(f.value=t.patient.id,m.value=m.value||n.state.doctorModule?.doctorId,f.value&&m.value&&await w()))},{immediate:!0}),We(()=>t.patient,async Z=>{Z&&Z.id&&(f.value||(f.value=Z.id),m.value||(m.value=n.state.doctorModule?.doctorId),f.value&&m.value&&await w())},{immediate:!0}),We(()=>t.procedure,async Z=>{Z?(o.value=Hn.cloneDeep(Z),f.value=Z.patientId,m.value=Z.doctorId,Z.patientId&&Z.doctorId?await w():(a.value=[],console.log("Patient ID or Doctor ID not available"))):(o.value=null,t.patient?.id?(f.value=t.patient.id,m.value=m.value||n.state.doctorModule?.doctorId,f.value&&m.value&&await w()):a.value=[])},{immediate:!0});const b=M(!1),x=()=>{b.value=!0,console.log("Upload Template")},T=async()=>{b.value=!1,await w()},U=Z=>({before_image:"Before",after_image:"After",report:"Report",prescription:"Rx",consent_letter:"Consent"})[Z]||"Others",k=Z=>({before_image:"mdi-camera-outline",after_image:"mdi-camera-enhance",report:"mdi-file-document-outline",prescription:"mdi-pill",consent_letter:"mdi-file-sign"})[Z]||"mdi-file",S=Z=>Z.includes("pdf")?"mdi-file-pdf-box":Z.includes("word")||Z.includes("document")?"mdi-file-word-box":Z.includes("excel")||Z.includes("spreadsheet")?"mdi-file-excel-box":Z.includes("powerpoint")||Z.includes("presentation")?"mdi-file-powerpoint-box":"mdi-file-document-outline",E=Z=>Z.includes("pdf")?"red":Z.includes("word")||Z.includes("document")?"blue":Z.includes("excel")||Z.includes("spreadsheet")?"green":Z.includes("powerpoint")||Z.includes("presentation")?"orange":"grey",C=Z=>{const ce=Z.split("/"),se=ce[ce.length-1].split(".").pop();return se?se.toUpperCase():"FILE"},P=Z=>{console.log("Open Media",Z);const ce=a.value.findIndex(J=>J.path===Z.path);A.value=ce,c.value=Z,i.value=!0},F=Z=>{A.value=Z,c.value=a.value[Z]},N=()=>{i.value=!1,c.value=null,A.value=0},L=()=>{f.value?d.value=!0:console.warn("Patient information not available")},ie=()=>{d.value=!1},le=Z=>{if(!Z){console.error("No upload provided for deletion");return}h.value=!0,v.value=Z,console.log("Selected Upload for Deletion:",Z)},Q=async()=>{try{h.value=!1,v.value=null,await w()}catch(Z){console.error("Error handling upload delete close:",Z)}};return(Z,ce)=>{const J=I("v-col"),se=I("v-btn"),G=I("v-tooltip"),D=I("v-icon"),j=I("v-row"),ne=I("v-card"),H=I("v-progress-circular"),te=I("v-empty-state"),Y=I("v-chip"),K=I("v-divider"),X=I("v-alert"),ae=I("v-img"),oe=I("v-card-text"),W=I("v-bottom-sheet"),de=I("v-dialog");return R(),me(ze,null,[l(ne,{rounded:"0",class:"pa-1 section-header-style",elevation:"0"},{default:u(()=>[l(j,{"no-gutters":""},{default:u(()=>[l(J,{cols:"6"}),l(J,{cols:"6",class:"d-flex justify-end align-center py-1"},{default:u(()=>[l(G,{text:"Upload Files"},{activator:u(({props:Ae})=>[l(se,Fe({size:"small"},Ae,{onClick:x,class:"mr-1 btn-hover-base"}),{default:u(()=>[...ce[7]||(ce[7]=[O(" Upload ",-1)])]),_:1},16)]),_:1}),l(G,{text:"View Patient Images History"},{activator:u(({props:Ae})=>[l(se,Fe({variant:"outlined",size:"small"},Ae,{onClick:L,class:"mr-1 btn-hover-base"}),{default:u(()=>[l(D,{size:"small"},{default:u(()=>[...ce[8]||(ce[8]=[p("img",{src:GEe,alt:"History"},null,-1)])]),_:1})]),_:1},16)]),_:1}),l(G,{text:"Refresh Files"},{activator:u(({props:Ae})=>[l(se,Fe({variant:"outlined",size:"small"},Ae,{onClick:w,class:"btn-hover-base"}),{default:u(()=>[l(D,{size:"small"},{default:u(()=>[...ce[9]||(ce[9]=[p("img",{src:fg,alt:"Refresh"},null,-1)])]),_:1})]),_:1},16)]),_:1})]),_:1})]),_:1})]),_:1}),l(j,{"no-gutters":""},{default:u(()=>[l(J,{cols:"12",class:"scroll-element mt-1"},{default:u(()=>[r.value?(R(),ve(j,{key:0,"no-gutters":""},{default:u(()=>[l(J,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%","min-height":"60vh"}},{default:u(()=>[l(H,{indeterminate:"",color:"primary"})]),_:1})]),_:1})):a.value.length===0?(R(),me("div",tke,[l(te,{image:Oe(eke)},{title:u(()=>[...ce[10]||(ce[10]=[p("div",{class:"text-subtitle-2 mt-8"}," No images or documents found for this patient ",-1)])]),text:u(()=>[...ce[11]||(ce[11]=[p("div",{class:"text-caption"}," All uploaded images and documents for this patient will appear here ",-1)])]),_:1},8,["image"])])):(R(),me("div",nke,[(R(!0),me(ze,null,Wt(y.value,(Ae,Ce)=>(R(),me("div",{key:Ce,class:"date-section mb-4"},[p("div",ake,[l(Y,{color:"primary",variant:"elevated",size:"default",class:"date-chip-vertical","prepend-icon":"mdi-calendar",title:Ae.fullDate||Ae.date},{default:u(()=>[O(q(Ae.date),1)]),_:2},1032,["title"]),p("span",rke,q(Ae.items.length)+" upload"+q(Ae.items.length!==1?"s":""),1),l(K,{class:"ml-4"})]),l(j,{"no-gutters":"",class:"split-content-row"},{default:u(()=>[l(J,{cols:"9",class:"images-section pr-2"},{default:u(()=>[g(Ae.items).images.length>0?(R(),ve(j,{key:0,"no-gutters":""},{default:u(()=>[(R(!0),me(ze,null,Wt(g(Ae.items).images,(De,xe)=>(R(),ve(J,{key:`img-${Ce}-${xe}`,cols:"12",sm:"6",md:"4",class:"image-item-col pa-1"},{default:u(()=>[l(ne,{class:"image-card elevation-2 card-hover-base",rounded:"lg",onClick:ke=>P(De)},{default:u(()=>[l(Y,{color:"primary",variant:"elevated",size:"x-small",class:"media-tag-small text-white","prepend-icon":k(De.tag)},{default:u(()=>[O(q(U(De.tag)),1)]),_:2},1032,["prepend-icon"]),l(G,{text:"Delete File"},{activator:u(({props:ke})=>[l(se,Fe({icon:"",size:"small",variant:"plain",color:"secondary",class:"delete-icon-small"},{ref_for:!0},ke,{onClick:mn(Ee=>le(De),["stop"])}),{default:u(()=>[l(D,{size:"small"},{default:u(()=>[...ce[12]||(ce[12]=[p("img",{src:mc,alt:"Delete"},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024),l(ae,{src:De.fileUrl,class:"image-thumbnail",cover:"","aspect-ratio":"1",loading:"lazy",transition:!1},{placeholder:u(()=>[p("div",ske,[l(H,{indeterminate:"",size:"20"})])]),error:u(()=>[p("div",oke,[l(X,{type:"error",variant:"tonal",density:"compact"},{default:u(()=>[...ce[13]||(ce[13]=[O(" Failed to load ",-1)])]),_:1})])]),_:1},8,["src"])]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:2},1024)):(R(),me("div",ike,[l(D,{icon:"mdi-image-off",size:"32",class:"text-medium-emphasis mb-2"}),ce[14]||(ce[14]=p("p",{class:"text-caption text-medium-emphasis"},"No images for this date",-1))]))]),_:2},1024),l(J,{cols:"3",class:"documents-section pl-2"},{default:u(()=>[g(Ae.items).documents.length>0?(R(),me("div",lke,[(R(!0),me(ze,null,Wt(g(Ae.items).documents,(De,xe)=>(R(),ve(ne,{key:`doc-${Ce}-${xe}`,class:"document-item mb-2 elevation-1",rounded:"md",onClick:ke=>P(De),hover:""},{default:u(()=>[l(oe,{class:"pa-2"},{default:u(()=>[p("div",uke,[l(D,{icon:S(De.type),size:"20",color:E(De.type),class:"mr-2 flex-shrink-0"},null,8,["icon","color"]),p("div",cke,[p("div",dke,q(U(De.tag)),1),p("div",Ake,q(C(De.path)),1)]),l(se,{icon:"",size:"small",variant:"plain",color:"error",class:"ml-1 flex-shrink-0",onClick:mn(ke=>le(De),["stop"])},{default:u(()=>[l(D,{size:"small"},{default:u(()=>[...ce[15]||(ce[15]=[p("img",{src:mc,alt:"Delete"},null,-1)])]),_:1})]),_:1},8,["onClick"])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])):(R(),me("div",fke,[l(D,{icon:"mdi-file-off",size:"32",class:"text-medium-emphasis mb-2"}),ce[16]||(ce[16]=p("p",{class:"text-caption text-medium-emphasis"},"No documents for this date",-1))]))]),_:2},1024)]),_:2},1024)]))),128))]))]),_:1})]),_:1}),Oe(Fo)?(R(),ve(W,{key:0,modelValue:b.value,"onUpdate:modelValue":ce[0]||(ce[0]=Ae=>b.value=Ae),class:"elevation-24","max-width":"100%"},{default:u(()=>[l(iR,{consultation:s.value,procedure:o.value,patient:t.patient,onClose:T},null,8,["consultation","procedure","patient"])]),_:1},8,["modelValue"])):_e("",!0),Oe(Fo)?_e("",!0):(R(),ve(de,{key:1,modelValue:b.value,"onUpdate:modelValue":ce[1]||(ce[1]=Ae=>b.value=Ae),persistent:"","max-width":"40%"},{default:u(()=>[l(iR,{consultation:s.value,procedure:o.value,patient:t.patient,onClose:T},null,8,["consultation","procedure","patient"])]),_:1},8,["modelValue"])),Oe(Fo)?(R(),ve(W,{key:2,modelValue:i.value,"onUpdate:modelValue":ce[2]||(ce[2]=Ae=>i.value=Ae),class:"elevation-24","max-width":"100%"},{default:u(()=>[l(lR,{isOpen:i.value,mediaItems:a.value,selectedMedia:c.value,currentIndex:A.value,onClose:N,onNavigate:F},null,8,["isOpen","mediaItems","selectedMedia","currentIndex"])]),_:1},8,["modelValue"])):_e("",!0),Oe(Fo)?_e("",!0):(R(),ve(de,{key:3,modelValue:i.value,"onUpdate:modelValue":ce[3]||(ce[3]=Ae=>i.value=Ae),"max-width":"90%","max-height":"90%"},{default:u(()=>[l(lR,{isOpen:i.value,mediaItems:a.value,selectedMedia:c.value,currentIndex:A.value,onClose:N,onNavigate:F},null,8,["isOpen","mediaItems","selectedMedia","currentIndex"])]),_:1},8,["modelValue"])),Oe(Fo)?(R(),ve(W,{key:4,modelValue:d.value,"onUpdate:modelValue":ce[4]||(ce[4]=Ae=>d.value=Ae),class:"elevation-24","max-width":"100%","max-height":"95%"},{default:u(()=>[l(uR,{isOpen:d.value,patientId:f.value,doctorId:m.value,onClose:ie},null,8,["isOpen","patientId","doctorId"])]),_:1},8,["modelValue"])):_e("",!0),Oe(Fo)?_e("",!0):(R(),ve(de,{key:5,modelValue:d.value,"onUpdate:modelValue":ce[5]||(ce[5]=Ae=>d.value=Ae),"max-width":"95%","max-height":"95%"},{default:u(()=>[l(uR,{isOpen:d.value,patientId:f.value,doctorId:m.value,onClose:ie},null,8,["isOpen","patientId","doctorId"])]),_:1},8,["modelValue"])),l(de,{modelValue:h.value,"onUpdate:modelValue":ce[6]||(ce[6]=Ae=>h.value=Ae),"max-width":"30%",persistent:""},{default:u(()=>[l(ZBe,{deleteSelectedUpload:v.value,onClose:Q},null,8,["deleteSelectedUpload"])]),_:1},8,["modelValue"])],64)}}},zH=Xt(mke,[["__scopeId","data-v-c89e3178"]]),cR=""+new URL("images/no_today_consultation-CFXdUpZK.png",import.meta.url).href,hke={class:"text-caption"},vke={class:"text-center"},pke={class:"text-body-2 text-medium-emphasis mt-2"},gke={key:1,class:"text-caption text-medium-emphasis ml-2"},yke={class:"d-flex justify-start align-center flex-wrap"},_ke={class:"text-body-2 font-weight-medium text-primary d-flex align-center justify-center"},wke={class:"text-body-2 font-weight-medium text-primary d-flex align-center justify-center"},bke={class:"text-body-2 font-weight-medium text-primary d-flex align-center justify-center"},xke={class:"text-body-2 font-weight-medium text-primary d-flex align-center justify-center"},Cke={class:"medicine-info flex-grow-1"},Ske={class:"d-flex align-center justify-start"},Eke={class:"d-flex align-center"},Bke={class:"medicine-trade-name text-left"},kke={key:0,class:"text-caption text-medium-emphasis ml-1"},Tke={class:"d-flex flex-column ml-1 order-buttons-container",style:{gap:"2px"}},Ike={class:"d-flex align-center ml-2"},Fke={class:"text-caption text-medium-emphasis text-right"},Pke={class:"d-flex flex-wrap gap-1"},Dke={class:"text-caption text-error d-flex align-center"},Uke={class:"text-caption text-warning d-flex align-center"},Rke={class:"text-caption"},Nke={class:"text-center"},Vke={class:"text-body-2 text-medium-emphasis mt-2"},Lke={__name:"consultation-window",props:{consultation:{type:Object,required:!0},patient:{type:Object,required:!0},consultationCopy:{type:Object,required:!1}},emits:["update:consultation","createNewArtefact","pdfGenerated"],setup(e,{emit:t}){const n=e,a=ea(),{showSuccess:r,showError:s,showWarning:o}=ra(),i=t,c=M(Hn.cloneDeep(n.patient)),A=M(Hn.cloneDeep(n.consultation)),d=M([]),f=M(null),m=M("write"),h=M(!1),v=M(!1),y=M(null),g=M(!1),w=M(!1),b=M(!1),x=M(!1),T=M(!1),U=M(!1),k=M({}),S=ee(()=>a.state.doctorModule.doctorId),E=ee(()=>a.getters["doctorModule/currentDoctor"]),C=ee(()=>a.getters["doctorModule/isPharmacyEnabled"]),P=M(!1),F=pe=>{if(!pe?.consultationDate||!pe?.status)return!1;const re=pe.consultationDate,ge=pe.status,Se=Ze=>{if(!Ze)return!1;const nt=new Date().toLocaleDateString("en-CA");return Ze===nt},Me=Ze=>{if(!Ze)return!1;const nt=new Date().toLocaleDateString("en-CA"),et=new Date(Ze),lt=new Date(nt);return et>lt};return(Se(re)||Me(re))&&ge==="CREATED"||ge==="UPDATED"},N=ee(()=>A.value?.id&&A.value.id!=="0"&&F(A.value)),L=ee(()=>A.value?.status==="UPDATED");ee(()=>!d.value||d.value.length===0?!1:d.value.some(pe=>pe.isPharmacy===!0&&pe.quantityUnits!==null&&pe.quantityUnits!==void 0&&pe.quantityUnits>0));const ie=ee(()=>!D.value||D.value.length===0?[]:D.value.filter(pe=>pe.isCreatedByUser===!0&&!pe.isUserTyped)),le=pe=>pe.dosage_schedule&&pe.dosage_schedule.trim()||pe.duration&&pe.duration.trim()||pe.instructions&&pe.instructions.trim(),Q=pe=>pe.isSelected?le(pe)?null:"missing-dosage":"unselected",Z=pe=>{const re=Q(pe);return re?`medicine-${re}`:""},ce=ee(()=>d.value.filter(pe=>pe.isSelected&&le(pe)));ee(()=>d.value.filter(pe=>pe.isSelected&&!le(pe)));const J=ee(()=>d.value.filter(pe=>!pe.isSelected)),se=ee(()=>d.value.filter(pe=>pe.isSelected&&!le(pe))),G=ee(()=>{const pe=ce.value.length,re=se.value.length,ge=J.value.length;if(ge===0&&re===0)return"Save Consultation";const Se=[];ge>0&&Se.push(`${ge} unselected will be excluded`),re>0&&Se.push(`${re} without dosage will be excluded`);const Me=pe>0?`${pe} medicine${pe>1?"s":""} will be saved`:"";return Me?`Save Consultation (${Me}, ${Se.join(", ")})`:`Save Consultation (${Se.join(", ")})`}),D=M([]),j=ee(()=>{const pe=new Date;return pe.setDate(pe.getDate()+1),pe.toISOString().split("T")[0]}),ne=pe=>{(pe.ctrlKey||pe.metaKey)&&pe.key==="s"&&(pe.preventDefault(),A.value?.id&&A.value.id!=="0"&&Nn(A.value))},H=(pe,re=30)=>!pe||pe.length<=re?pe:pe.substring(0,re)+"...",te=pe=>{if(!pe)return"";const re=[];return pe.dosageSchedule&&pe.dosageSchedule.trim()&&re.push(pe.dosageSchedule.trim()),pe.duration&&pe.duration.trim()&&re.push(pe.duration.trim()),pe.instructions&&pe.instructions.trim()&&re.push(pe.instructions.trim()),pe.quantityUnits!==null&&pe.quantityUnits!==void 0&&re.push(`Qty: ${pe.quantityUnits}`),re.join(", ")},Y=pe=>{if(!pe)return null;if(pe instanceof Date){const re=pe.getFullYear(),ge=String(pe.getMonth()+1).padStart(2,"0"),Se=String(pe.getDate()).padStart(2,"0");return`${re}-${ge}-${Se}`}return typeof pe=="string"?pe.includes("T")?pe.split("T")[0]:pe:null},K=pe=>{if(!pe)return"dd-mm";try{let re;if(pe instanceof Date)re=pe;else if(typeof pe=="string")re=new Date(pe.includes("T")?pe:pe+"T12:00:00");else return"dd-mm";return isNaN(re.getTime())?"dd-mm":re.toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}catch(re){return console.error("Error formatting followup date:",re),"dd-mm"}},X=pe=>{A.value.followupDate=Y(pe),U.value=!1},ae=pe=>{if(!pe)return null;try{if(pe instanceof Date)return pe;if(typeof pe=="string"){const re=pe.includes("T")?pe.split("T")[0]:pe;return new Date(re+"T12:00:00")}}catch(re){console.error("Error parsing followup date for picker:",re)}return null},oe=()=>{A.value.followupDate=null},W=pe=>{console.log("Tab changed to:",pe)};cn(async()=>{await qt(),document.addEventListener("keydown",ne)}),zl(()=>{document.removeEventListener("keydown",ne)});const de=()=>{console.log("Add Item"),h.value=!0},Ae=()=>{h.value=!1},Ce=pe=>{y.value=pe,v.value=!0},De=()=>{v.value=!1,y.value=null},xe=pe=>{const re=d.value.findIndex(ge=>ge.id===pe.id);re!==-1&&(d.value[re]={...d.value[re],...pe})},ke=pe=>{if(pe===0)return;const re=[...d.value];[re[pe-1],re[pe]]=[re[pe],re[pe-1]],d.value=re},Ee=pe=>{if(pe===d.value.length-1)return;const re=[...d.value];[re[pe],re[pe+1]]=[re[pe+1],re[pe]],d.value=re},ye=M(!1),we=M(!1),at=M(null),Je=()=>{ye.value=!0,console.log("Diagnosis Template")},rt=pe=>{at.value=pe,we.value=!0,console.log("Edit Diagnosis Template",pe)},it=()=>{ye.value=!1},Ie=()=>{ye.value=!1},Ve=()=>{we.value=!1,at.value=null},ft=()=>{we.value=!1,at.value=null},Ft=async pe=>{if(!pe||pe==="0"){console.log("Cannot fetch vitals: Invalid consultation ID"),f.value=null;return}try{const{fetchVitalsByConsultation:re}=await xr(async()=>{const{fetchVitalsByConsultation:Se}=await Promise.resolve().then(()=>yEe);return{fetchVitalsByConsultation:Se}},void 0,import.meta.url),ge=await re(pe);f.value=ge.data}catch(re){console.error("Error fetching vitals:",re)}},tt=()=>{g.value=!0},Ge=()=>{g.value=!1},pt=pe=>{f.value=pe,g.value=!1},ht=()=>{w.value=!0},Nt=()=>{w.value=!1};We(()=>n.patient,pe=>{pe&&(c.value=Hn.cloneDeep(pe),console.log("Patient data updated:",c.value))},{immediate:!0}),We(()=>n.consultation,async pe=>{pe&&pe.id&&pe.id!=="0"?(F(pe)||console.warn("Consultation window received invalid consultation:",{id:pe.id,status:pe.status,date:pe.consultationDate}),A.value=Hn.cloneDeep(pe),console.log("Consultation Details",A.value),d.value=Hn.cloneDeep(A.value.medicines||[]),d.value&&d.value.length>0&&d.value.forEach(re=>{re.isSelected=!0,re.dosage?(re.dosage_schedule=re.dosage.dosageSchedule||"",re.duration=re.dosage.duration||"",re.instructions=re.dosage.instructions||"",re.quantityUnits=re.dosage.quantityUnits!==null&&re.dosage.quantityUnits!==void 0?re.dosage.quantityUnits:null):(re.dosage_schedule=re.dosage_schedule||"",re.duration=re.duration||"",re.instructions=re.instructions||"",re.quantityUnits=re.quantityUnits!==null&&re.quantityUnits!==void 0?re.quantityUnits:null)}),await Ft(pe.id)):pe&&pe.id==="0"&&(A.value=Hn.cloneDeep(pe),d.value=[],f.value=null,console.log("No consultation selected"))},{immediate:!0}),We(()=>n.consultationCopy,pe=>{console.log("Consultation Copy",pe),A.value.doctorNotes=pe.doctorNotes,A.value.patientNotes=pe.patientNotes,A.value.diagnosis=pe.diagnosis,A.value.investigations=pe.investigations,A.value.clinicalNotes=pe.clinicalNotes||"",d.value=Hn.cloneDeep(pe.medicines||[]),d.value&&d.value.length>0&&d.value.forEach(re=>{re.dosage?(re.dosage_schedule=re.dosage.dosageSchedule||"",re.duration=re.dosage.duration||"",re.instructions=re.dosage.instructions||"",re.quantityUnits=re.dosage.quantityUnits!==null&&re.dosage.quantityUnits!==void 0?re.dosage.quantityUnits:null):(re.dosage_schedule=re.dosage_schedule||"",re.duration=re.duration||"",re.instructions=re.instructions||"",re.quantityUnits=re.quantityUnits!==null&&re.quantityUnits!==void 0?re.quantityUnits:null)})}),We(()=>A.value.patientNotes,pe=>{pe?.trim()||console.log("Patient notes cleared")});const nn=async pe=>{console.log("Searched Medicine",pe);for(const re of pe)await yn(re)},yn=async pe=>{if(d.value.some(re=>re.id===pe.id))console.log("Medicine already selected");else{if(pe.dosage_schedule=pe.dosage_schedule||"",pe.duration=pe.duration||"",pe.instructions=pe.instructions||"",pe.quantityUnits=pe.quantityUnits!==null&&pe.quantityUnits!==void 0?pe.quantityUnits:null,pe.isSelected=!0,pe.isLocal===!0)try{const{data:re,error:ge,errorMessage:Se}=await gH(pe,S.value,{skipMessages:!0});!ge&&re&&re.length>0?(pe.dosageHistory=re,console.log(`Fetched ${re.length} dosage records for local medicine:`,pe.productName)):(pe.dosageHistory=[],Se&&Se.includes("No dosages found")&&o(Se))}catch(re){console.error("Error fetching dosage history:",re),pe.dosageHistory=[]}else pe.dosageHistory=[];console.log("Selected Medicine",pe),d.value.push(pe),console.log("Medicines List",d.value)}},qn=pe=>{console.log("New Medicines",pe),d.value.push({id:pe.id,productName:pe.productName,marketer:pe.marketer,saltComposition:pe.saltComposition,productForm:pe.productForm,isLocal:pe.isLocal,dosage_schedule:"",duration:"",instructions:"",quantityUnits:null,isSelected:!0})},$t=(pe,re)=>{if(console.log("Selected dosage schedule:",pe,"for medicine:",re),!pe||!re)return;const ge=d.value.findIndex(Se=>Se.id===re.id);if(ge!==-1){const Se=typeof pe=="string"?pe:pe.dosage_schedule||"";d.value[ge].dosage_schedule=Se,console.log("Updated medicine with dosage schedule:",d.value[ge])}},Tt=(pe,re)=>{if(console.log("Selected dosage instructions:",pe,"for medicine:",re),!re)return;const ge=d.value.findIndex(Se=>Se.id===re.id);if(ge!==-1){const Se=typeof pe=="string"?pe:pe?.instructions||"";d.value[ge].instructions=Se,console.log("Updated medicine with instructions:",d.value[ge])}},ut=(pe,re)=>{if(console.log("Selected dosage duration:",pe,"for medicine:",re),!re)return;const ge=d.value.findIndex(Se=>Se.id===re.id);if(ge!==-1){const Se=typeof pe=="string"?pe:pe?.duration||"";d.value[ge].duration=Se,console.log("Updated medicine with duration:",d.value[ge])}},kt=(pe,re)=>{if(console.log("Selected dosage history:",pe,"for medicine:",re),!pe||!re)return;const ge=d.value.findIndex(Se=>Se.id===re.id);ge!==-1&&(d.value[ge].dosage_schedule=pe.dosageSchedule||"",d.value[ge].instructions=pe.instructions||"",d.value[ge].duration=pe.duration||"",d.value[ge].quantityUnits=pe.quantityUnits!==null&&pe.quantityUnits!==void 0?pe.quantityUnits:null,console.log("Updated medicine with dosage history:",d.value[ge]))},Zt=async pe=>{console.log("Template selected for auto-fill:",pe);const{template:re,autoFillData:ge}=pe;if(ge.diagnosis&&ge.diagnosis.trim()&&(A.value.diagnosis&&A.value.diagnosis.trim()?A.value.diagnosis.includes(ge.diagnosis)||(A.value.diagnosis+=", "+ge.diagnosis):A.value.diagnosis=ge.diagnosis),ge.instructions&&ge.instructions.trim()&&(A.value.patientNotes&&A.value.patientNotes.trim()?A.value.patientNotes.includes(ge.instructions)||(A.value.patientNotes+=", "+ge.instructions):A.value.patientNotes=ge.instructions),ge.investigations&&ge.investigations.trim()&&(A.value.investigations&&A.value.investigations.trim()?A.value.investigations.includes(ge.investigations)||(A.value.investigations+=", "+ge.investigations):A.value.investigations=ge.investigations),ge.medicines&&Array.isArray(ge.medicines))for(const Se of ge.medicines)Se.medicine&&await yn(Se.medicine);D.value.some(Se=>Se.id===re.id)||D.value.push(re),console.log("Template auto-fill completed")},je=async pe=>{if(!pe){D.value=[];return}console.log("Diagnosis selected:",pe),pe.isCreatedByUser&&!pe.isUserTyped?(D.value.some(re=>re.id===pe.id)||D.value.push(pe),await Vt(pe)):(D.value=[],console.log("User-typed or history diagnosis - no template extras to process"))},Ke=async pe=>{pe&&console.log("Investigation selected:",pe)},wt=async pe=>{if(!pe)return;console.log("Patient advice selected:",pe);const re=pe.patientAdvice||"",ge=A.value.patientNotes||"";ge.trim()?A.value.patientNotes=ge.trim()+", "+re:A.value.patientNotes=re},Vt=async pe=>{if(console.log("Processing Diagnosis Extras",pe),!pe.isCreatedByUser||pe.isUserTyped){console.log("Skipping extras for user-typed text:",pe.diagnosisName);return}if(pe.instructions&&!A.value.patientNotes.includes(pe.instructions)&&(A.value.patientNotes.trim()?A.value.patientNotes+=", "+pe.instructions:A.value.patientNotes=pe.instructions),pe.investigations&&!A.value.investigations.includes(pe.investigations)&&(A.value.investigations.trim()?A.value.investigations+=", "+pe.investigations:A.value.investigations=pe.investigations),pe.diagnosisMedicines&&Array.isArray(pe.diagnosisMedicines))for(const re of pe.diagnosisMedicines)console.log("Diagnosis Medicine",re),re.medicine&&await yn(re.medicine)},qt=async()=>{try{const pe=await sv(S.value);k.value=pe.data,console.log("Configuration data fetched:",k.value)}catch(pe){console.error("Error fetching diagnosis:",pe)}},vt=()=>{console.log("Create New Consultation"),i("createNewArtefact")},Kt=async()=>{if(!A.value.id||A.value.id==="0"){console.log("Cannot refresh: No valid consultation ID");return}const pe=await J3(A.value.id);A.value=Hn.cloneDeep(pe.data),d.value=Hn.cloneDeep(A.value.medicines||[]),d.value&&d.value.length>0&&d.value.forEach(re=>{re.isSelected=!0,re.dosage?(re.dosage_schedule=re.dosage.dosageSchedule||"",re.duration=re.dosage.duration||"",re.instructions=re.dosage.instructions||"",re.quantityUnits=re.dosage.quantityUnits!==null&&re.dosage.quantityUnits!==void 0?re.dosage.quantityUnits:null):(re.dosage_schedule=re.dosage_schedule||"",re.duration=re.duration||"",re.instructions=re.instructions||"",re.quantityUnits=re.quantityUnits!==null&&re.quantityUnits!==void 0?re.quantityUnits:null)}),await Ft(A.value.id)},Pt=async pe=>{const re=pe.patient_id||pe.patientId;re&&await Zme(re)},Gn=async()=>{if(!A.value?.id||A.value.id==="0"){s("Please save the consultation first");return}try{P.value=!0;const{data:pe,error:re}=await EH(A.value.id);re?s(re.response?.data?.error||"Failed to send to pharmacy"):r("Draft bill created successfully in pharmacy")}catch(pe){console.error("Error sending to pharmacy:",pe),s("An unexpected error occurred")}finally{P.value=!1}},Nn=async pe=>{if(!pe?.id||pe.id==="0"){console.log("Cannot save: No valid consultation ID");return}try{const re=d.value.filter(Ze=>Ze.isSelected),ge=re.length>0;if(pe.status="UPDATED",await BM(pe),!ge){console.log("Consultation saved successfully without medicines"),await On(),await Pt(pe);return}const Se=await mH(re);console.log("Medicines created response",Se.data),Se.data&&re.forEach(Ze=>{Se.data[Ze.id]&&(Ze.id=Se.data[Ze.id]),Ze.isLocal=!0}),console.log("Medicines for Dosage",re);const Me=await hH(re,S.value);console.log("Dosage created response",pe.id,Me.data),await vH(pe.id,Me.data),r("Consultation details and medicines saved successfully"),await On(),await Pt(pe)}catch(re){console.error("Error updating consultation:",re)}},On=async()=>{try{const pe=await J3(A.value.id),re=Hn.cloneDeep(pe.data);A.value=re,d.value=Hn.cloneDeep(re.medicines||[]),d.value&&d.value.length>0&&d.value.forEach(ge=>{ge.isSelected=!0,ge.dosage?(ge.dosage_schedule=ge.dosage.dosageSchedule||"",ge.duration=ge.dosage.duration||"",ge.instructions=ge.dosage.instructions||"",ge.quantityUnits=ge.dosage.quantityUnits!==null&&ge.dosage.quantityUnits!==void 0?ge.dosage.quantityUnits:null):(ge.dosage_schedule=ge.dosage_schedule||"",ge.duration=ge.duration||"",ge.instructions=ge.instructions||"",ge.quantityUnits=ge.quantityUnits!==null&&ge.quantityUnits!==void 0?ge.quantityUnits:null)}),await Ft(re.id),i("update:consultation",re),console.log("Emitted fresh consultation data to parent:",re)}catch(pe){console.error("Error refreshing consultation data after save:",pe),i("update:consultation",Hn.cloneDeep(A.value))}},Yt=pe=>{console.log("PDF generated successfully:",pe),i("pdfGenerated",pe)},Tn=()=>{b.value=!0},Te=pe=>{console.log("Clinical notes transcription completed:",pe),pe&&pe.trim()&&(A.value.clinicalNotes&&A.value.clinicalNotes.trim()?A.value.clinicalNotes+=" "+pe:A.value.clinicalNotes=pe),b.value=!1},He=()=>{x.value=!0},Ue=pe=>{console.log("Patient advice transcription completed:",pe),pe&&pe.trim()&&(A.value.patientNotes&&A.value.patientNotes.trim()?A.value.patientNotes+=" "+pe:A.value.patientNotes=pe),x.value=!1},Le=()=>{T.value=!0},Qe=pe=>{console.log("Doctor notes transcription completed:",pe),pe&&pe.trim()&&(A.value.doctorNotes&&A.value.doctorNotes.trim()?A.value.doctorNotes+=" "+pe:A.value.doctorNotes=pe),T.value=!1};return(pe,re)=>{const ge=I("v-tab"),Se=I("v-tooltip"),Me=I("v-tabs"),Ze=I("v-card"),nt=I("v-col"),et=I("v-row"),lt=I("v-progress-circular"),bt=I("v-btn"),It=I("v-empty-state"),an=I("v-icon"),En=I("v-card-subtitle"),hn=I("v-chip"),Cn=I("v-textarea"),Da=I("v-checkbox"),Nr=I("v-text-field"),jr=I("v-date-picker"),ys=I("v-menu"),_s=I("v-divider"),Ga=I("v-dialog"),Qo=I("v-tabs-window-item"),ws=I("v-tabs-window");return R(),me(ze,null,[l(et,{"no-gutters":""},{default:u(()=>[l(nt,null,{default:u(()=>[l(Ze,{rounded:"0",class:"pa-1 patient-header-style",elevation:"0"},{default:u(()=>[l(Me,{modelValue:m.value,"onUpdate:modelValue":[re[0]||(re[0]=Lt=>m.value=Lt),W],"align-tabs":"center",density:"compact",class:"interactive-tabs"},{default:u(()=>[l(Se,{text:"Write Prescription"},{activator:u(({props:Lt})=>[l(ge,Fe({value:"write"},Lt,{class:["tab-interactive",{"tab-active":m.value==="write"}],tabindex:"-1"}),{default:u(()=>[...re[21]||(re[21]=[p("div",{class:"tab-content"}," WRITE Rx ",-1)])]),_:1},16,["class"])]),_:1}),l(Se,{text:"Share Prescription"},{activator:u(({props:Lt})=>[l(ge,Fe({value:"share"},Lt,{class:["tab-interactive",{"tab-active":m.value==="share"}]}),{default:u(()=>[...re[22]||(re[22]=[p("div",{class:"tab-content"}," SHARE Rx ",-1)])]),_:1},16,["class"])]),_:1}),l(Se,{text:"Uploaded Items"},{activator:u(({props:Lt})=>[l(ge,Fe({value:"media"},Lt,{class:["tab-interactive",{"tab-active":m.value==="media"}],tabindex:"-1"}),{default:u(()=>[...re[23]||(re[23]=[p("div",{class:"tab-content"}," UPLOADS ",-1)])]),_:1},16,["class"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(ws,{modelValue:m.value,"onUpdate:modelValue":re[18]||(re[18]=Lt=>m.value=Lt),class:"flex-grow-1"},{default:u(()=>[l(Qo,{value:"write",class:"h-100"},{default:u(()=>[A.value.id?A.value.id==0?(R(),ve(et,{key:1,"no-gutters":""},{default:u(()=>[l(nt,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%"}},{default:u(()=>[l(It,{image:Oe(cR)},{title:u(()=>[...re[24]||(re[24]=[p("div",{class:"text-subtitle-2"}," No consultation selected ",-1)])]),text:u(()=>[p("div",hke,[re[26]||(re[26]=O(" Create a consultation by clicking on the button above ",-1)),re[27]||(re[27]=p("br",null,null,-1)),l(bt,{class:"mt-2",onClick:vt},{default:u(()=>[...re[25]||(re[25]=[O("Create Consultation",-1)])]),_:1})])]),_:1},8,["image"])]),_:1})]),_:1})):A.value.id&&!N.value?(R(),ve(et,{key:2,"no-gutters":""},{default:u(()=>[l(nt,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%"}},{default:u(()=>[p("div",vke,[l(an,{size:"48",color:"warning",class:"mb-4"},{default:u(()=>[...re[28]||(re[28]=[O("mdi-alert-circle-outline",-1)])]),_:1}),re[29]||(re[29]=p("div",{class:"text-h6 text-medium-emphasis"},"Invalid consultation",-1)),p("div",pke,"This consultation cannot be displayed (status: "+q(A.value.status)+")",1)])]),_:1})]),_:1})):(R(),me(ze,{key:3},[l(et,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[l(nt,{cols:"12"},{default:u(()=>[l(Ze,{rounded:"0",class:"pa-1 patient-header-style",elevation:"0"},{default:u(()=>[l(et,{"no-gutters":""},{default:u(()=>[l(nt,{cols:"8",style:{"text-align":"left"},class:"d-flex align-center pl-1"},{default:u(()=>[O(q(A.value.consultationDate?new Date(A.value.consultationDate).toLocaleDateString("en-US",{timeZone:"Asia/Kolkata",weekday:"short",month:"short",day:"numeric",year:"numeric"}):A.value.createdAt?Oe(za)(A.value.createdAt):"No date"),1)]),_:1}),l(nt,{cols:"4",class:"d-flex justify-end align-center"},{default:u(()=>[C.value?(R(),ve(Se,{key:0,text:"Send to Pharmacy"},{activator:u(({props:Lt})=>[l(bt,Fe({onClick:Gn},Lt,{class:"btn-hover-base mr-1",tabindex:"-1",variant:"outlined",loading:P.value,disabled:!L.value}),{default:u(()=>[...re[30]||(re[30]=[O("Send to Pharmacy",-1)])]),_:1},16,["loading","disabled"])]),_:1})):_e("",!0),l(Se,{text:G.value},{activator:u(({props:Lt})=>[l(bt,Fe({onClick:re[1]||(re[1]=Br=>Nn(A.value))},Lt,{class:"btn-hover-base mr-1",tabindex:"-1"}),{default:u(()=>[...re[31]||(re[31]=[O("SAVE",-1)])]),_:1},16)]),_:1},8,["text"]),l(Se,{text:"Refresh Consultation"},{activator:u(({props:Lt})=>[l(bt,Fe({rounded:"x-small",size:"small",variant:"outlined"},Lt,{class:"btn-hover-base",onClick:re[2]||(re[2]=Br=>Kt()),tabindex:"-1"}),{default:u(()=>[l(an,{size:"large"},{default:u(()=>[...re[32]||(re[32]=[p("img",{src:fg,alt:"Refresh"},null,-1)])]),_:1})]),_:1},16)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(et,{"no-gutters":"",class:"h-100"},{default:u(()=>[l(nt,{cols:"12",class:"scroll-element",style:{"padding-bottom":"20px"}},{default:u(()=>[l(et,{"no-gutters":""},{default:u(()=>[l(nt,{cols:"12"},{default:u(()=>[l(Ze,{class:"form-section-card card-status-default ma-2 mb-1 pa-3",elevation:"2"},{default:u(()=>[l(et,{"no-gutters":""},{default:u(()=>[l(nt,{cols:"8",class:"d-flex align-center flex-wrap gap-2"},{default:u(()=>[l(En,{class:"pa-0"},{default:u(()=>[...re[33]||(re[33]=[p("strong",null,"Vitals",-1)])]),_:1}),f.value?(R(),me(ze,{key:0},[f.value.pulse?(R(),ve(hn,{key:0,color:"primary","text-color":"black",size:"small",class:"ml-2"},{default:u(()=>[re[34]||(re[34]=p("strong",null,"Pulse:",-1)),O(" "+q(Oe(Qr)(f.value.pulse,"bpm")),1)]),_:1})):_e("",!0),f.value.systolicBP&&f.value.diastolicBP?(R(),ve(hn,{key:1,color:"primary","text-color":"black",size:"small"},{default:u(()=>[re[35]||(re[35]=p("strong",null,"BP:",-1)),O(" "+q(f.value.systolicBP)+"/"+q(f.value.diastolicBP)+" mmHg ",1)]),_:1})):_e("",!0),f.value.respiratoryRate?(R(),ve(hn,{key:2,color:"primary","text-color":"black",size:"small"},{default:u(()=>[re[36]||(re[36]=p("strong",null,"RR:",-1)),O(" "+q(Oe(Qr)(f.value.respiratoryRate,"breaths/min")),1)]),_:1})):_e("",!0),f.value.temperature?(R(),ve(hn,{key:3,color:"primary","text-color":"black",size:"small"},{default:u(()=>[re[37]||(re[37]=p("strong",null,"Temp:",-1)),O(" "+q(Oe(Qr)(f.value.temperature,"C")),1)]),_:1})):_e("",!0),f.value.weight?(R(),ve(hn,{key:4,color:"primary","text-color":"black",size:"small"},{default:u(()=>[re[38]||(re[38]=p("strong",null,"Weight:",-1)),O(" "+q(Oe(Qr)(f.value.weight,"kg")),1)]),_:1})):_e("",!0),f.value.height?(R(),ve(hn,{key:5,color:"primary","text-color":"black",size:"small"},{default:u(()=>[re[39]||(re[39]=p("strong",null,"Height:",-1)),O(" "+q(Oe(Qr)(f.value.height,"cm")),1)]),_:1})):_e("",!0),f.value.serumBilirubin?(R(),ve(hn,{key:6,color:"secondary","text-color":"black",size:"small"},{default:u(()=>[re[40]||(re[40]=p("strong",null,"S.Bilirubin:",-1)),O(" "+q(Oe(Qr)(f.value.serumBilirubin,"mg/dL")),1)]),_:1})):_e("",!0),f.value.bloodGlucoseFF?(R(),ve(hn,{key:7,color:"secondary","text-color":"black",size:"small"},{default:u(()=>[re[41]||(re[41]=p("strong",null,"Glucose(FF):",-1)),O(" "+q(Oe(Qr)(f.value.bloodGlucoseFF,"mg/dL")),1)]),_:1})):_e("",!0),f.value.bloodGlucosePP?(R(),ve(hn,{key:8,color:"secondary","text-color":"black",size:"small"},{default:u(()=>[re[42]||(re[42]=p("strong",null,"Glucose(PP):",-1)),O(" "+q(Oe(Qr)(f.value.bloodGlucosePP,"mg/dL")),1)]),_:1})):_e("",!0),f.value.bloodGlucoseRandom?(R(),ve(hn,{key:9,color:"secondary","text-color":"black",size:"small"},{default:u(()=>[re[43]||(re[43]=p("strong",null,"Glucose(R):",-1)),O(" "+q(Oe(Qr)(f.value.bloodGlucoseRandom,"mg/dL")),1)]),_:1})):_e("",!0),f.value.serumCreatinine?(R(),ve(hn,{key:10,color:"secondary","text-color":"black",size:"small"},{default:u(()=>[re[44]||(re[44]=p("strong",null,"S.Creatinine:",-1)),O(" "+q(Oe(Qr)(f.value.serumCreatinine,"mg/dL")),1)]),_:1})):_e("",!0)],64)):(R(),me("span",gke," - No vitals recorded yet "))]),_:1}),l(nt,{cols:"4",class:"d-flex justify-end align-center gap-2"},{default:u(()=>[l(Se,{text:f.value?"Edit Vitals":"Add Vitals"},{activator:u(({props:Lt})=>[l(bt,Fe({variant:"outlined",size:"small",class:"d-flex align-center justify-center btn-hover-enhanced"},Lt,{onClick:tt,tabindex:"-1"}),{default:u(()=>[l(an,{start:""},{default:u(()=>[...re[45]||(re[45]=[p("img",{src:aSe,alt:"Vitals"},null,-1)])]),_:1}),O(" "+q(f.value?"Update":"Add"),1)]),_:1},16)]),_:1},8,["text"]),l(Se,{text:"View Trends"},{activator:u(({props:Lt})=>[l(bt,Fe({variant:"outlined",size:"small",class:"d-flex align-center justify-center btn-hover-enhanced"},Lt,{onClick:ht,tabindex:"-1"}),{default:u(()=>[l(an,{start:""},{default:u(()=>[...re[46]||(re[46]=[p("img",{src:rSe,alt:"Trends"},null,-1)])]),_:1}),re[47]||(re[47]=O(" Trends ",-1))]),_:1},16)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(et,{"no-gutters":""},{default:u(()=>[l(nt,{cols:"12"},{default:u(()=>[l(Ze,{class:"form-section-card card-status-default ma-2 mb-1 pa-3",elevation:"2"},{default:u(()=>[l(et,{"no-gutters":"",class:"align-top"},{default:u(()=>[l(nt,{cols:"2",class:"d-flex align-top"},{default:u(()=>[l(En,{class:"pa-0"},{default:u(()=>[...re[48]||(re[48]=[p("strong",null,"Diagnosis",-1)])]),_:1})]),_:1}),l(nt,{cols:"7",class:"d-flex align-top"},{default:u(()=>[l(CSe,{"doctor-id":S.value,onTemplateSelected:Zt},null,8,["doctor-id"])]),_:1}),l(nt,{cols:"3",class:"d-flex justify-end align-top"},{default:u(()=>[l(Se,{text:"Save as Template"},{activator:u(({props:Lt})=>[l(bt,Fe({variant:"outlined",size:"small",class:"d-flex align-center justify-center btn-hover-enhanced"},Lt,{onClick:Je,tabindex:"-1"}),{default:u(()=>[l(an,{start:""},{default:u(()=>[...re[49]||(re[49]=[p("img",{src:fH,alt:"Save Template"},null,-1)])]),_:1}),re[50]||(re[50]=O(" Create Template ",-1))]),_:1},16)]),_:1})]),_:1})]),_:1}),ie.value.length>0?(R(),ve(et,{key:0,"no-gutters":"",class:"mt-n2 mb-2"},{default:u(()=>[l(nt,{cols:"1"}),l(nt,{cols:"10"},{default:u(()=>[p("div",yke,[(R(!0),me(ze,null,Wt(ie.value,Lt=>(R(),ve(Se,{key:Lt.id,text:`Edit template: ${Lt.diagnosisName}`},{activator:u(({props:Br})=>[l(hn,Fe({variant:"tonal",size:"default",density:"default",color:"primary",text:H(Lt.diagnosisName,30),class:"mr-1 mb-1 chip-hover"},{ref_for:!0},Br),{append:u(()=>[l(Se,{text:"Edit Template"},{activator:u(({props:Vn})=>[l(an,Fe({size:"small",onClick:mn(Co=>rt(Lt),["stop"])},{ref_for:!0},Vn,{class:"ml-1 edit-icon",tabindex:"-1"}),{default:u(()=>[...re[51]||(re[51]=[p("img",{src:qA,alt:"Edit Template"},null,-1)])]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1040,["text"])]),_:2},1032,["text"]))),128))])]),_:1}),l(nt,{cols:"1"})]),_:1})):_e("",!0),l(et,{"no-gutters":""},{default:u(()=>[l(nt,{cols:"1"}),l(nt,{cols:"9"},{default:u(()=>[l(fSe,{modelValue:A.value.diagnosis,"onUpdate:modelValue":re[3]||(re[3]=Lt=>A.value.diagnosis=Lt),"doctor-id":S.value,onDiagnosisSelected:je},null,8,["modelValue","doctor-id"])]),_:1}),l(nt,{cols:"2"})]),_:1}),l(et,{"no-gutters":""},{default:u(()=>[l(nt,{cols:"1"}),l(nt,{cols:"9"},{default:u(()=>[l(Cn,{modelValue:A.value.clinicalNotes,"onUpdate:modelValue":re[4]||(re[4]=Lt=>A.value.clinicalNotes=Lt),label:"Clinical Notes",clearable:"","auto-grow":"",rows:"1","row-height":"15",density:"compact",variant:"underlined",name:"clinical-notes",autocomplete:"off","hide-details":"auto"},null,8,["modelValue"])]),_:1}),l(nt,{cols:"1",class:"d-flex align-center justify-center"},{default:u(()=>[l(Se,{text:"Voice Input"},{activator:u(({props:Lt})=>[l(bt,Fe({icon:"mdi-microphone",rounded:"xls",variant:"flat",color:"primary",size:"small"},Lt,{onClick:Tn,tabindex:"-1",class:"dictation-btn"}),null,16)]),_:1})]),_:1}),l(nt,{cols:"1"})]),_:1})]),_:1})]),_:1})]),_:1}),l(et,{"no-gutters":""},{default:u(()=>[l(nt,{cols:"12"},{default:u(()=>[l(Ze,{class:"form-section-card card-status-default ma-2 mb-1 pa-3",elevation:"2"},{default:u(()=>[l(et,{"no-gutters":"",class:"align-top"},{default:u(()=>[l(nt,{cols:"2",class:"d-flex align-top"},{default:u(()=>[l(En,{class:"pa-0"},{default:u(()=>[...re[52]||(re[52]=[p("strong",null,"Rx",-1)])]),_:1})]),_:1}),l(nt,{cols:"7",class:"d-flex align-top px-2"},{default:u(()=>[l(wH,{showInventoryStatus:C.value,onSearchedMedicines:nn,onAddMedicine:de},null,8,["showInventoryStatus"])]),_:1}),l(nt,{cols:"3",class:"d-flex justify-end align-top gap-2"},{default:u(()=>[l(Se,{text:"Add Medicine"},{activator:u(({props:Lt})=>[l(bt,Fe({variant:"outlined",size:"small",class:"d-flex align-center justify-center btn-hover-enhanced"},Lt,{onClick:de,tabindex:"-1"}),{default:u(()=>[l(an,{start:""},{default:u(()=>[...re[53]||(re[53]=[p("img",{src:PE,alt:"Add Medicine"},null,-1)])]),_:1}),re[54]||(re[54]=O(" Create Medicine ",-1))]),_:1},16)]),_:1})]),_:1})]),_:1}),l(et,{"no-gutters":""},{default:u(()=>[d.value.length>0?(R(),ve(nt,{key:0,cols:"12"},{default:u(()=>[l(et,{"no-gutters":"",class:"mb-2 mt-0"},{default:u(()=>[l(nt,{cols:C.value?3:4,class:"pr-2"},{default:u(()=>[p("div",_ke,[l(an,{size:"small",class:"mr-1"},{default:u(()=>[...re[55]||(re[55]=[O("mdi-clock-outline",-1)])]),_:1}),re[56]||(re[56]=O(" Dosage Schedule e.g. 1 after breakfast ",-1))])]),_:1},8,["cols"]),l(nt,{cols:(C.value,3),class:"px-1"},{default:u(()=>[p("div",wke,[l(an,{size:"small",class:"mr-1"},{default:u(()=>[...re[57]||(re[57]=[O("mdi-calendar-range",-1)])]),_:1}),re[58]||(re[58]=O(" Duration e.g. 5 days ",-1))])]),_:1},8,["cols"]),l(nt,{cols:C.value?3:5,class:"px-1"},{default:u(()=>[p("div",bke,[l(an,{size:"small",class:"mr-1"},{default:u(()=>[...re[59]||(re[59]=[O("mdi-information-outline",-1)])]),_:1}),re[60]||(re[60]=O(" Instructions e.g. on empty stomach ",-1))])]),_:1},8,["cols"]),C.value?(R(),ve(nt,{key:0,cols:"3",class:"pl-2"},{default:u(()=>[p("div",xke,[l(an,{size:"small",class:"mr-1"},{default:u(()=>[...re[61]||(re[61]=[O("mdi-numeric",-1)])]),_:1}),re[62]||(re[62]=O(" Quantity e.g. 5 ",-1))])]),_:1})):_e("",!0)]),_:1}),(R(!0),me(ze,null,Wt(d.value,(Lt,Br)=>(R(),me(ze,{key:Br},[l(Ze,{flat:"",class:ct(["medicine-inline-layout mb-1",Z(Lt)])},{default:u(()=>[l(et,{"no-gutters":"",align:"center",class:"mb-1"},{default:u(()=>[l(nt,{cols:"5",class:"d-flex align-center"},{default:u(()=>[l(Da,{modelValue:Lt.isSelected,"onUpdate:modelValue":Vn=>Lt.isSelected=Vn,color:"primary",density:"compact","hide-details":"",class:"mr-2 flex-shrink-0",style:{"margin-top":"-2px"},tabindex:"-1"},null,8,["modelValue","onUpdate:modelValue"]),p("div",Cke,[p("div",Ske,[p("div",Eke,[p("span",Bke,[O(q(Lt.productName)+" ",1),Lt.productForm?(R(),me("span",kke," ("+q(Lt.productForm)+") ",1)):_e("",!0)]),Lt.isLocal?(R(),ve(Se,{key:0,text:"Edit Medicine"},{activator:u(({props:Vn})=>[l(an,Fe({size:"small"},{ref_for:!0},Vn,{class:"edit-icon flex-shrink-0 ml-1",onClick:Co=>Ce(Lt),tabindex:"-1"}),{default:u(()=>[...re[63]||(re[63]=[O(" mdi-pencil ",-1)])]),_:1},16,["onClick"])]),_:2},1024)):_e("",!0),p("div",Tke,[l(Se,{text:"Move Up"},{activator:u(({props:Vn})=>[l(an,Fe({size:"x-small"},{ref_for:!0},Vn,{class:["order-icon",{"order-icon-disabled":Br===0}],onClick:Co=>ke(Br),tabindex:"-1"}),{default:u(()=>[...re[64]||(re[64]=[O(" mdi-chevron-up ",-1)])]),_:1},16,["class","onClick"])]),_:2},1024),l(Se,{text:"Move Down"},{activator:u(({props:Vn})=>[l(an,Fe({size:"x-small"},{ref_for:!0},Vn,{class:["order-icon",{"order-icon-disabled":Br===d.value.length-1}],onClick:Co=>Ee(Br),tabindex:"-1"}),{default:u(()=>[...re[65]||(re[65]=[O(" mdi-chevron-down ",-1)])]),_:1},16,["class","onClick"])]),_:2},1024)])]),p("div",Ike,[Lt.isPharmacy?(R(),ve(Se,{key:0,text:"Pharmacy Medicine"},{activator:u(({props:Vn})=>[l(an,Fe({size:"small"},{ref_for:!0},Vn,{class:"flex-shrink-0"}),{default:u(()=>[...re[66]||(re[66]=[O(" mdi-store-plus-outline ",-1)])]),_:1},16)]),_:1})):Lt.isLocal?(R(),ve(Se,{key:1,text:"Saved Medicine"},{activator:u(({props:Vn})=>[l(an,Fe({size:"small"},{ref_for:!0},Vn,{class:"flex-shrink-0"}),{default:u(()=>[...re[67]||(re[67]=[p("img",{src:Md,alt:"Saved Medicine"},null,-1)])]),_:1},16)]),_:1})):(R(),ve(Se,{key:2,text:"External Medicine"},{activator:u(({props:Vn})=>[l(an,Fe({size:"small"},{ref_for:!0},Vn,{class:"flex-shrink-0"}),{default:u(()=>[...re[68]||(re[68]=[p("img",{src:iv,alt:"External Medicine"},null,-1)])]),_:1},16)]),_:1}))])])])]),_:2},1024),l(nt,{cols:"7",class:"d-flex align-center justify-end pl-2"},{default:u(()=>[p("span",Fke,q(Lt.saltComposition),1)]),_:2},1024)]),_:2},1024),Lt.isLocal&&Lt.dosageHistory&&Lt.dosageHistory.length>0?(R(),ve(et,{key:0,"no-gutters":"",class:"mb-2"},{default:u(()=>[l(nt,{cols:"12"},{default:u(()=>[p("div",Pke,[(R(!0),me(ze,null,Wt(Lt.dosageHistory,(Vn,Co)=>(R(),ve(hn,{key:Co,size:"small",variant:"outlined",color:"primary",class:"chip-hover text-caption",onClick:js=>kt(Vn,Lt),style:{cursor:"pointer"}},{default:u(()=>[O(q(te(Vn)),1)]),_:2},1032,["onClick"]))),128))])]),_:2},1024)]),_:2},1024)):_e("",!0),l(et,{"no-gutters":"",align:"center"},{default:u(()=>[l(nt,{cols:C.value?3:4,class:"pr-2"},{default:u(()=>[l(DSe,{modelValue:Lt.dosage_schedule,"onUpdate:modelValue":Vn=>Lt.dosage_schedule=Vn,"medicine-id":Lt.id,"product-form":Lt.productForm,"doctor-id":S.value,onDosageScheduleSelected:Vn=>$t(Vn,Lt),class:"flex-grow-1"},null,8,["modelValue","onUpdate:modelValue","medicine-id","product-form","doctor-id","onDosageScheduleSelected"])]),_:2},1032,["cols"]),l(nt,{cols:(C.value,3),class:"px-1"},{default:u(()=>[l(RSe,{modelValue:Lt.duration,"onUpdate:modelValue":Vn=>Lt.duration=Vn,"medicine-id":Lt.id,"product-form":Lt.productForm,"doctor-id":S.value,onDurationSelected:Vn=>ut(Vn,Lt),class:"flex-grow-1"},null,8,["modelValue","onUpdate:modelValue","medicine-id","product-form","doctor-id","onDurationSelected"])]),_:2},1032,["cols"]),l(nt,{cols:C.value?3:5,class:"px-1"},{default:u(()=>[l(VSe,{modelValue:Lt.instructions,"onUpdate:modelValue":Vn=>Lt.instructions=Vn,"medicine-id":Lt.id,"product-form":Lt.productForm,"doctor-id":S.value,onInstructionsSelected:Vn=>Tt(Vn,Lt),class:"flex-grow-1"},null,8,["modelValue","onUpdate:modelValue","medicine-id","product-form","doctor-id","onInstructionsSelected"])]),_:2},1032,["cols"]),C.value?(R(),ve(nt,{key:0,cols:"3",class:"pl-2"},{default:u(()=>[l(Nr,{"model-value":Lt.quantityUnits!==null&&Lt.quantityUnits!==void 0?Lt.quantityUnits:"","onUpdate:modelValue":Vn=>Lt.quantityUnits=Vn===""||Vn===null||Vn===void 0?null:Number(Vn),label:"Quantity",type:"number",variant:"outlined",density:"compact",min:0,disabled:!Lt.isPharmacy,"hide-details":"","single-line":"",class:"flex-grow-1",placeholder:""},{"prepend-inner":u(()=>[l(Se,{text:"Quantity e.g. 5",location:"top"},{activator:u(({props:Vn})=>[l(an,Fe({ref_for:!0},Vn,{size:"small",class:"text-medium-emphasis mr-1"}),{default:u(()=>[...re[69]||(re[69]=[O(" mdi-numeric ",-1)])]),_:1},16)]),_:1})]),_:1},8,["model-value","onUpdate:modelValue","disabled"])]),_:2},1024)):_e("",!0)]),_:2},1024)]),_:2},1032,["class"]),Lt.isSelected?_e("",!0):(R(),ve(et,{key:0,"no-gutters":"",class:"mb-1"},{default:u(()=>[l(nt,{cols:"12",class:"px-2"},{default:u(()=>[p("div",Dke,[l(an,{size:"x-small",class:"mr-1"},{default:u(()=>[...re[70]||(re[70]=[O("mdi-alert-circle-outline",-1)])]),_:1}),re[71]||(re[71]=O(" Select this medicine to include it in the prescription ",-1))])]),_:1})]),_:1})),Lt.isSelected&&!le(Lt)?(R(),ve(et,{key:1,"no-gutters":"",class:"mb-1"},{default:u(()=>[l(nt,{cols:"12",class:"px-2"},{default:u(()=>[p("div",Uke,[l(an,{size:"x-small",class:"mr-1"},{default:u(()=>[...re[72]||(re[72]=[O("mdi-alert-circle-outline",-1)])]),_:1}),re[73]||(re[73]=O(" Add dosage information to include this medicine in the prescription ",-1))])]),_:1})]),_:1})):_e("",!0)],64))),128))]),_:1})):(R(),ve(nt,{key:1,cols:"12"},{default:u(()=>[l(Ze,{flat:"",class:"pa-2"},{default:u(()=>[l(et,{"no-gutters":""},{default:u(()=>[l(nt,{cols:"1"}),l(nt,{cols:"10"},{default:u(()=>[l(En,{style:{textAlign:"centre"}},{default:u(()=>[...re[74]||(re[74]=[O("No medicines added yet",-1)])]),_:1})]),_:1}),l(nt,{cols:"1"})]),_:1})]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}),l(et,{"no-gutters":""},{default:u(()=>[l(nt,{cols:"12"},{default:u(()=>[l(Ze,{class:"form-section-card card-status-default ma-2 mb-1 pa-3",elevation:"2"},{default:u(()=>[l(et,{"no-gutters":""},{default:u(()=>[l(nt,{cols:"12",class:"d-flex align-top mb-2"},{default:u(()=>[l(En,{class:"pa-0"},{default:u(()=>[...re[75]||(re[75]=[p("strong",null,"Investigations & Patient Advice",-1)])]),_:1})]),_:1})]),_:1}),l(et,{"no-gutters":"",class:"mt-2"},{default:u(()=>[l(nt,{cols:"1"}),l(nt,{cols:"6"},{default:u(()=>[l(vSe,{modelValue:A.value.investigations,"onUpdate:modelValue":re[5]||(re[5]=Lt=>A.value.investigations=Lt),"doctor-id":S.value,onInvestigationSelected:Ke},null,8,["modelValue","doctor-id"])]),_:1}),l(nt,{cols:"1"}),l(nt,{cols:"3",class:"pl-2"},{default:u(()=>[l(ys,{modelValue:U.value,"onUpdate:modelValue":re[8]||(re[8]=Lt=>U.value=Lt),"close-on-content-click":!1,transition:"scale-transition","offset-y":""},{activator:u(({props:Lt})=>[l(Nr,Fe(Lt,{"model-value":K(A.value.followupDate),label:"Follow-up Date",readonly:"",density:"comfortable",variant:"outlined","hide-details":"auto",class:"input-hover date-input",clearable:"","onClick:clear":oe,onKeydown:[re[6]||(re[6]=MP(Br=>U.value=!0,["enter"])),re[7]||(re[7]=MP(Br=>U.value=!0,["space"]))]}),{"append-inner":u(()=>[l(an,{class:"text-medium-emphasis"},{default:u(()=>[...re[76]||(re[76]=[O("mdi-calendar",-1)])]),_:1})]),_:1},16,["model-value"])]),default:u(()=>[l(jr,{"model-value":ae(A.value.followupDate),"onUpdate:modelValue":X,color:"primary",locale:"en-IN",min:j.value},null,8,["model-value","min"])]),_:1},8,["modelValue"])]),_:1}),l(nt,{cols:"1"})]),_:1}),l(et,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(nt,{cols:"1"}),l(nt,{cols:"9"},{default:u(()=>[l(ySe,{"doctor-id":S.value,onPatientAdviceSelected:wt},null,8,["doctor-id"])]),_:1}),l(nt,{cols:"2"})]),_:1}),l(et,{"no-gutters":""},{default:u(()=>[l(nt,{cols:"1"}),l(nt,{cols:"9"},{default:u(()=>[l(Cn,{modelValue:A.value.patientNotes,"onUpdate:modelValue":re[9]||(re[9]=Lt=>A.value.patientNotes=Lt),label:"Patient Advice",clearable:"","auto-grow":"",rows:"2","row-height":"15",density:"compact",variant:"underlined",name:"patient-advice",autocomplete:"off","hide-details":"auto"},null,8,["modelValue"])]),_:1}),l(nt,{cols:"1",class:"d-flex align-center justify-center"},{default:u(()=>[l(Se,{text:"Voice Input"},{activator:u(({props:Lt})=>[l(bt,Fe({icon:"mdi-microphone",rounded:"xls",variant:"flat",color:"primary",size:"small"},Lt,{onClick:He,tabindex:"-1",class:"dictation-btn"}),null,16)]),_:1})]),_:1}),l(nt,{cols:"1"})]),_:1})]),_:1})]),_:1})]),_:1}),l(et,{"no-gutters":""},{default:u(()=>[l(nt,{cols:"12",class:"px-4 py-1"},{default:u(()=>[l(_s,{thickness:"2",class:"border-opacity-50"})]),_:1})]),_:1}),l(et,{"no-gutters":""},{default:u(()=>[l(nt,{cols:"12"},{default:u(()=>[l(Ze,{class:"form-section-card card-status-default mx-2 pa-3",elevation:"2"},{default:u(()=>[l(et,{"no-gutters":""},{default:u(()=>[l(nt,{cols:"12",class:"d-flex align-top mb-1"},{default:u(()=>[l(En,{class:"pa-0"},{default:u(()=>[...re[77]||(re[77]=[p("strong",null,"Notes for Doctor",-1)])]),_:1})]),_:1})]),_:1}),l(et,{"no-gutters":""},{default:u(()=>[l(nt,{cols:"1"}),l(nt,{cols:"9"},{default:u(()=>[l(Cn,{clearable:"","auto-grow":"",rows:"1","row-height":"15",density:"compact",variant:"underlined",label:"Notes for Doctor",modelValue:A.value.doctorNotes,"onUpdate:modelValue":re[10]||(re[10]=Lt=>A.value.doctorNotes=Lt),name:"doctor-notes",autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(nt,{cols:"1",class:"d-flex align-center justify-center"},{default:u(()=>[l(Se,{text:"Voice Input"},{activator:u(({props:Lt})=>[l(bt,Fe({icon:"mdi-microphone",rounded:"xls",variant:"flat",color:"primary",size:"small"},Lt,{onClick:Le,tabindex:"-1",class:"dictation-btn"}),null,16)]),_:1})]),_:1}),l(nt,{cols:"1"})]),_:1})]),_:1})]),_:1})]),_:1}),l(Ga,{modelValue:v.value,"onUpdate:modelValue":re[11]||(re[11]=Lt=>v.value=Lt),"max-width":"40%",persistent:""},{default:u(()=>[y.value?(R(),ve(bH,{key:0,medicine:y.value,onClose:De,"onUpdate:medicine":xe},null,8,["medicine"])):_e("",!0)]),_:1},8,["modelValue"]),l(Ga,{modelValue:h.value,"onUpdate:modelValue":re[12]||(re[12]=Lt=>h.value=Lt),"max-width":"40%",persistent:""},{default:u(()=>[l(wT,{onClose:Ae,"onUpdate:medicinelist":qn})]),_:1},8,["modelValue"]),l(Ga,{modelValue:g.value,"onUpdate:modelValue":re[13]||(re[13]=Lt=>g.value=Lt),"max-width":"50%",persistent:""},{default:u(()=>[l(bEe,{consultation:A.value,patient:c.value,"existing-vitals":f.value,onClose:Ge,onVitalsSaved:pt},null,8,["consultation","patient","existing-vitals"])]),_:1},8,["modelValue"]),l(Ga,{modelValue:w.value,"onUpdate:modelValue":re[14]||(re[14]=Lt=>w.value=Lt),"max-width":"80%",persistent:""},{default:u(()=>[l(QEe,{"patient-id":c.value.id,"patient-name":c.value.name,onClose:Nt},null,8,["patient-id","patient-name"])]),_:1},8,["modelValue"]),l(Gp,{modelValue:b.value,"onUpdate:modelValue":re[15]||(re[15]=Lt=>b.value=Lt),"current-text":A.value.clinicalNotes,label:"Clinical Notes",onTranscriptionComplete:Te},null,8,["modelValue","current-text"]),l(Gp,{modelValue:x.value,"onUpdate:modelValue":re[16]||(re[16]=Lt=>x.value=Lt),"current-text":A.value.patientNotes,label:"Patient Advice",onTranscriptionComplete:Ue},null,8,["modelValue","current-text"]),l(Gp,{modelValue:T.value,"onUpdate:modelValue":re[17]||(re[17]=Lt=>T.value=Lt),"current-text":A.value.doctorNotes,label:"Doctor Notes",onTranscriptionComplete:Qe},null,8,["modelValue","current-text"])]),_:1})]),_:1})],64)):(R(),ve(et,{key:0,"no-gutters":""},{default:u(()=>[l(nt,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[l(lt,{indeterminate:"",color:"primary"})]),_:1})]),_:1}))]),_:1}),l(Qo,{value:"share",class:"h-100"},{default:u(()=>[A.value.id?A.value.id==0?(R(),ve(et,{key:1,"no-gutters":""},{default:u(()=>[l(nt,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%"}},{default:u(()=>[l(It,{image:Oe(cR)},{title:u(()=>[...re[78]||(re[78]=[p("div",{class:"text-subtitle-2"}," No consultation selected ",-1)])]),text:u(()=>[p("div",Rke,[re[80]||(re[80]=O(" Create a consultation by clicking on the button above ",-1)),re[81]||(re[81]=p("br",null,null,-1)),l(bt,{class:"mt-2",onClick:vt},{default:u(()=>[...re[79]||(re[79]=[O("Create Consultation",-1)])]),_:1})])]),_:1},8,["image"])]),_:1})]),_:1})):A.value.id&&!N.value?(R(),ve(et,{key:2,"no-gutters":""},{default:u(()=>[l(nt,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%"}},{default:u(()=>[p("div",Nke,[l(an,{size:"48",color:"warning",class:"mb-4"},{default:u(()=>[...re[82]||(re[82]=[O("mdi-alert-circle-outline",-1)])]),_:1}),re[83]||(re[83]=p("div",{class:"text-h6 text-medium-emphasis"},"Invalid consultation",-1)),p("div",Vke,"This consultation cannot be displayed (status: "+q(A.value.status)+")",1)])]),_:1})]),_:1})):(R(),ve(et,{key:3,"no-gutters":"",class:"h-100"},{default:u(()=>[l(nt,{cols:"12"},{default:u(()=>[l(ov,{"content-type":"consultation",data:{consultation:A.value,medicines:d.value,vitals:f.value,printConfigurations:k.value,doctor:E.value},patient:c.value,onPdfGenerated:Yt},null,8,["data","patient"])]),_:1})]),_:1})):(R(),ve(et,{key:0,"no-gutters":""},{default:u(()=>[l(nt,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[l(lt,{indeterminate:"",color:"primary"})]),_:1})]),_:1}))]),_:1}),l(Qo,{value:"media",class:"h-100"},{default:u(()=>[l(et,{"no-gutters":"","aria-label":"toolbar",class:"h-100"},{default:u(()=>[l(nt,{cols:"12"},{default:u(()=>[l(zH,{consultation:A.value,patient:c.value},null,8,["consultation","patient"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(Ga,{modelValue:ye.value,"onUpdate:modelValue":re[19]||(re[19]=Lt=>ye.value=Lt),persistent:"","max-width":"40%"},{default:u(()=>[l(lSe,{diagnosis:A.value.diagnosis,patientNotes:A.value.patientNotes,investigations:A.value.investigations,medicineList:d.value,"doctor-id":S.value,onClose:it,"onUpdate&close":Ie},null,8,["diagnosis","patientNotes","investigations","medicineList","doctor-id"])]),_:1},8,["modelValue"]),l(Ga,{modelValue:we.value,"onUpdate:modelValue":re[20]||(re[20]=Lt=>we.value=Lt),persistent:"","max-width":"50%"},{default:u(()=>[l(cSe,{medicineList:d.value,selectedDiagnosis:at.value,onClose:Ve,"onUpdate&close":ft},null,8,["medicineList","selectedDiagnosis"])]),_:1},8,["modelValue"])],64)}}},KH=Xt(Lke,[["__scopeId","data-v-73f3a8d7"]]),Mke={__name:"create-procedure",emits:["close","update:procedurelist"],setup(e,{emit:t}){const n=t,a=ea(),r=ee(()=>a.state.doctorModule.doctorId),s=M({procedureName:"",cost:0,description:""}),o=M(!1),i=M(!1),c=[f=>f!=null&&f>=0||"Cost must be a positive number"],A=()=>{n("close")},d=async f=>{if(o.value){if(!r.value){console.error("Doctor ID not available");return}i.value=!0;try{const m=await sT(f.procedureName,f.cost,f.description,!0,"","",r.value);m.error?console.error("Error creating procedure:",m.error):(n("update:procedurelist",m.data),A())}catch(m){console.error("Error creating procedure:",m)}finally{i.value=!1}}};return(f,m)=>{const h=I("v-card-title"),v=I("v-col"),y=I("v-icon"),g=I("v-btn"),w=I("v-row"),b=I("v-card"),x=I("v-text-field"),T=I("v-textarea"),U=I("v-divider"),k=I("v-form");return R(),ve(b,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(w,{"no-gutters":""},{default:u(()=>[l(v,{cols:"12"},{default:u(()=>[l(b,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(w,{"no-gutters":""},{default:u(()=>[l(v,{cols:"11"},{default:u(()=>[l(h,{class:"pa-0 pl-2"},{default:u(()=>[...m[5]||(m[5]=[O("Create New Procedure",-1)])]),_:1})]),_:1}),l(v,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(g,{icon:"",size:"x-small",onClick:A},{default:u(()=>[l(y,null,{default:u(()=>[...m[6]||(m[6]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(w,{"no-gutters":""},{default:u(()=>[l(v,{cols:"12"},{default:u(()=>[l(b,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(k,{modelValue:o.value,"onUpdate:modelValue":m[4]||(m[4]=S=>o.value=S),"validate-on":"blur"},{default:u(()=>[l(w,{"no-gutters":""},{default:u(()=>[l(v,{cols:"12"},{default:u(()=>[l(x,{label:"Procedure Name *",density:"compact",modelValue:s.value.procedureName,"onUpdate:modelValue":m[0]||(m[0]=S=>s.value.procedureName=S),rules:Oe(sr)},null,8,["modelValue","rules"])]),_:1}),l(v,{cols:"12"},{default:u(()=>[l(x,{label:"Cost *",density:"compact",modelValue:s.value.cost,"onUpdate:modelValue":m[1]||(m[1]=S=>s.value.cost=S),modelModifiers:{number:!0},type:"number",min:"0",step:"0.01",prefix:"",rules:c},null,8,["modelValue"])]),_:1}),l(v,{cols:"12"},{default:u(()=>[l(T,{label:"Description",density:"compact",modelValue:s.value.description,"onUpdate:modelValue":m[2]||(m[2]=S=>s.value.description=S),rows:"3"},null,8,["modelValue"])]),_:1})]),_:1}),l(U),l(w,{"no-gutters":""},{default:u(()=>[l(v,{cols:"2"}),l(v,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(g,{variant:"outlined",onClick:m[3]||(m[3]=S=>d(s.value)),disabled:!o.value,loading:i.value},{default:u(()=>[...m[7]||(m[7]=[O(" Create ",-1)])]),_:1},8,["disabled","loading"])]),_:1}),l(v,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},Oke={__name:"edit-procedure",props:{procedure:{type:Object,required:!0}},emits:["close","procedureUpdated"],setup(e,{emit:t}){const n=t,a=ea(),r=ee(()=>a.state.doctorModule.doctorId),o=e.procedure||{},i=M({...Hn.cloneDeep(o),procedureName:o.treatmentName||o.treatment_name||o.procedureName||o.procedure_name||"",description:o.description||o.treatmentDescription||o.procedureDescription||"",cost:o.cost||o.costEstimate||o.cost_estimate||o.procedureCost||0,id:o.id||o.procedure_id||""}),c=M(!1),A=M(!1),d=[h=>h==null||h===""?"Cost is required":h<0?"Cost must be positive":!0],f=()=>{n("close")},m=async()=>{if(!i.value.id){console.error("Cannot update procedure: missing ID");return}if(!r.value){console.error("Doctor ID not available");return}c.value=!0,console.log("Updating procedure",i.value);try{const h=await HM(i.value.id,{procedure_name:i.value.procedureName,description:i.value.description,cost:i.value.cost},r.value);if(h.error)throw console.error("Error updating procedure",h.error),new Error(h.error.message||"Failed to update procedure");console.log("Procedure updated successfully",h.data),n("procedureUpdated",h.data),f()}catch(h){console.error("Error updating procedure",h)}finally{c.value=!1}};return(h,v)=>{const y=I("v-card-title"),g=I("v-col"),w=I("v-icon"),b=I("v-btn"),x=I("v-row"),T=I("v-card"),U=I("v-text-field"),k=I("v-textarea"),S=I("v-divider"),E=I("v-form");return R(),ve(T,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(x,{"no-gutters":""},{default:u(()=>[l(g,{cols:"12"},{default:u(()=>[l(T,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(x,{"no-gutters":""},{default:u(()=>[l(g,{cols:"11"},{default:u(()=>[l(y,{class:"pa-0 pl-2"},{default:u(()=>[...v[4]||(v[4]=[O("Edit Procedure",-1)])]),_:1})]),_:1}),l(g,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(b,{icon:"",size:"x-small",onClick:f},{default:u(()=>[l(w,null,{default:u(()=>[...v[5]||(v[5]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(x,{"no-gutters":""},{default:u(()=>[l(g,{cols:"12"},{default:u(()=>[l(T,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(E,{modelValue:A.value,"onUpdate:modelValue":v[3]||(v[3]=C=>A.value=C),"validate-on":"blur"},{default:u(()=>[l(x,{"no-gutters":""},{default:u(()=>[l(g,{cols:"12"},{default:u(()=>[l(U,{label:"Procedure Name *",density:"compact",modelValue:i.value.procedureName,"onUpdate:modelValue":v[0]||(v[0]=C=>i.value.procedureName=C),clearable:"",rules:Oe(sr)},null,8,["modelValue","rules"])]),_:1}),l(g,{cols:"12"},{default:u(()=>[l(k,{label:"Procedure Description",density:"compact",modelValue:i.value.description,"onUpdate:modelValue":v[1]||(v[1]=C=>i.value.description=C),clearable:"",rows:"2","auto-grow":""},null,8,["modelValue"])]),_:1}),l(g,{cols:"12"},{default:u(()=>[l(U,{label:"Base Cost *",density:"compact",modelValue:i.value.cost,"onUpdate:modelValue":v[2]||(v[2]=C=>i.value.cost=C),modelModifiers:{number:!0},type:"number",min:"0",step:"0.01",prefix:"",clearable:"",rules:d},null,8,["modelValue"])]),_:1})]),_:1}),l(S),l(x,{"no-gutters":""},{default:u(()=>[l(g,{cols:"2"}),l(g,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(b,{variant:"outlined",onClick:m,disabled:!A.value,loading:c.value},{default:u(()=>[...v[6]||(v[6]=[O(" Update Procedure ",-1)])]),_:1},8,["disabled","loading"])]),_:1}),l(g,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},Hke={__name:"delete-procedure-treatment",props:{procedureTreatment:{type:Object,required:!0},treatmentPlanId:{type:[String,Number],required:!0}},emits:["close","deleted"],setup(e,{emit:t}){const n=e,a=t,r=M(n.procedureTreatment),s=()=>{a("close")},o=async i=>{try{const c=await $M(n.treatmentPlanId,i.id);c.error?console.error("Error deleting procedure treatment mapping:",c.error):(console.log("Procedure treatment mapping deleted successfully"),a("deleted",i))}catch(c){console.error("Error deleting procedure treatment mapping:",c)}s()};return(i,c)=>{const A=I("v-card-title"),d=I("v-col"),f=I("v-icon"),m=I("v-btn"),h=I("v-row"),v=I("v-card"),y=I("v-card-text"),g=I("v-divider");return R(),ve(v,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(v,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"11"},{default:u(()=>[l(A,{class:"pa-0 pl-2"},{default:u(()=>[...c[1]||(c[1]=[O("Confirm Procedure Removal",-1)])]),_:1})]),_:1}),l(d,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(m,{icon:"",size:"x-small",onClick:s},{default:u(()=>[l(f,null,{default:u(()=>[...c[2]||(c[2]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(v,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(y,{class:"text-left"},{default:u(()=>[...c[3]||(c[3]=[O(" Are you sure you want to remove this procedure from the treatment plan? ",-1),p("span",{class:"text-red font-weight-bold"}," You will not be able to recover this data once deleted. ",-1)])]),_:1})]),_:1})]),_:1}),l(g),l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"2"}),l(d,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(m,{variant:"outlined",onClick:c[0]||(c[0]=w=>o(r.value))},{default:u(()=>[...c[4]||(c[4]=[O("Yes, Remove Procedure",-1)])]),_:1})]),_:1}),l(d,{cols:"2"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},$ke={class:"procedure-name-wrap"},Qke={class:"font-weight-medium"},Gke={class:"text-center"},zke={__name:"search-procedure",emits:["handleSearchedProcedures","addProcedure"],setup(e,{emit:t}){const n=t,a=ea(),r=ee(()=>a.state.doctorModule.doctorId),s=()=>{n("addProcedure")},o=M(!1),i=M([]),c=M(""),A=M([]),d=M(!1);let f=null;We(c,v=>{if(f&&clearTimeout(f),d.value=!1,!v||v.trim().length===0){o.value=!1;return}f=setTimeout(()=>{m(v)},300)}),We(A,v=>{console.log("Search add procedures changed:",v),v.length>0&&(n("handleSearchedProcedures",v),A.value=[])});const m=async v=>{if(!(!v||v.trim().length===0)){if(!r.value){console.error("Doctor ID not available for procedure search");return}o.value=!0,d.value=!1;try{const y=new URLSearchParams;y.append("doctor_id",r.value);const g=await dt.get(`procedure/search_procedure/${v}?${y.toString()}`);i.value=g.data.data.procedures,(!i.value||i.value.length===0)&&(d.value=!0)}catch(y){console.error("Error fetching procedures:",y),d.value=!0}finally{o.value=!1}}},h=ee(()=>!c.value||c.value.trim().length===0?"Start typing to search procedures":o.value?"Searching procedures...":d.value?"No procedures found matching your search. Try different keywords or create new procedure below.":"");return(v,y)=>{const g=I("v-icon"),w=I("v-list-item"),b=I("v-divider"),x=I("v-card-subtitle"),T=I("v-btn"),U=I("v-card"),k=I("v-chip"),S=I("v-autocomplete");return R(),ve(S,{multiple:"",clearable:"","clear-on-select":"","hide-selected":"",chips:"","closable-chips":"",density:"compact",variant:"outlined",label:"Search procedures",items:i.value,search:c.value,"onUpdate:search":y[0]||(y[0]=E=>c.value=E),loading:o.value,"item-title":"procedureName","item-value":"item","return-object":"",modelValue:A.value,"onUpdate:modelValue":y[1]||(y[1]=E=>A.value=E),rounded:"l","prepend-inner-icon":"mdi-magnify","no-data-text":h.value,placeholder:o.value?"Searching...":"Start typing to search procedures"},{item:u(({props:E,item:C,index:P})=>[l(w,Fe(E,{density:"compact"}),{title:u(()=>[p("span",$ke,q(C.raw.procedureName),1)]),append:u(()=>[C.raw.isLocal?(R(),ve(g,{key:0},{default:u(()=>[...y[2]||(y[2]=[p("img",{src:Md,alt:"Local Procedure"},null,-1)])]),_:1})):(R(),ve(g,{key:1},{default:u(()=>[...y[3]||(y[3]=[p("img",{src:iv,alt:"External Procedure"},null,-1)])]),_:1}))]),_:2},1040),P===i.value.length-1?(R(),me(ze,{key:0},[l(b),l(U,{flat:"",class:"pt-1"},{default:u(()=>[l(x,null,{default:u(()=>[...y[4]||(y[4]=[O("Procedure not in list?",-1)])]),_:1}),l(T,{class:"ml-3",variant:"outlined",onClick:s},{default:u(()=>[l(g,{class:"mr-2"},{default:u(()=>[...y[5]||(y[5]=[O("mdi-plus",-1)])]),_:1}),y[6]||(y[6]=O(" Create Procedure ",-1))]),_:1})]),_:1})],64)):_e("",!0)]),chip:u(({props:E,item:C})=>[l(k,Fe(E,{size:"small",class:"mr-1"}),{default:u(()=>[p("span",Qke,q(C.raw.procedureName),1)]),_:2},1040)]),"no-data":u(()=>[c.value&&c.value.trim().length>0?(R(),ve(U,{key:0,flat:"",class:"pa-4"},{default:u(()=>[p("div",Gke,[l(x,{class:"mb-2"},{default:u(()=>[O(q(h.value),1)]),_:1}),l(T,{variant:"outlined",color:"primary",onClick:s},{default:u(()=>[l(g,{class:"mr-2"},{default:u(()=>[...y[7]||(y[7]=[O("mdi-plus",-1)])]),_:1}),y[8]||(y[8]=O(" Create Procedure ",-1))]),_:1})])]),_:1})):(R(),ve(U,{key:1,flat:"",class:"pa-4 text-center"},{default:u(()=>[l(x,null,{default:u(()=>[O(q(h.value),1)]),_:1})]),_:1}))]),_:1},8,["items","search","loading","modelValue","no-data-text","placeholder"])}}},Kke=Xt(zke,[["__scopeId","data-v-c9cffa1d"]]),Wke={class:"procedure-care-multiline"},jke={__name:"search-post-procedure-care",props:{doctorId:{type:[String,Number],required:!0}},emits:["postProcedureCareSelected"],setup(e,{emit:t}){const n=e,a=t,r=M(!1),s=M([]),o=M(""),i=M(null),c=M(!1);let A=null;const d=y=>{s.value.some(w=>w.description===y)||(o.value=y)},f=()=>{(!o.value||o.value.length===0)&&s.value.length===0&&h("")},m=y=>{y&&(a("postProcedureCareSelected",y),i.value=null)};We(o,y=>{A&&clearTimeout(A),c.value=!1,A=setTimeout(()=>{h(y||"")},300)});const h=async y=>{r.value=!0,c.value=!1;try{const g=y||"",w=await dt.get(`procedure/search_descriptions/${encodeURIComponent(g)}`,{params:{doctor_id:n.doctorId}});s.value=w.data.data.descriptions.filter(b=>b.description&&b.description.trim().length>0),(!s.value||s.value.length===0)&&(c.value=!0)}catch(g){console.error("Error fetching procedure care instructions:",g),c.value=!0}finally{r.value=!1}},v=ee(()=>!o.value||o.value.length<1?r.value?"Loading recent procedure care instructions...":c.value?"No procedure care instructions found. Start typing to search.":"Start typing to search procedure care instructions":r.value?"Searching procedure care instructions...":c.value?"No matches found in procedure care instructions.":"");return zl(()=>{A&&(clearTimeout(A),A=null)}),(y,g)=>{const w=I("v-icon"),b=I("v-tooltip"),x=I("v-list-item"),T=I("v-card-subtitle"),U=I("v-card"),k=I("v-autocomplete");return R(),ve(k,{modelValue:i.value,"onUpdate:modelValue":[g[0]||(g[0]=S=>i.value=S),m],items:s.value,search:o.value,"onUpdate:search":d,onFocus:f,"item-title":"description","item-value":"description",label:"Search Post-Procedure Care Instructions",placeholder:"Type to search procedure care instructions...",variant:"outlined",loading:r.value,"no-data-text":v.value,clearable:"","hide-no-data":"","auto-select-first":"",density:"compact","return-object":"",class:"procedure-care-search"},{item:u(({props:S,item:E})=>[l(x,Fe(S,{density:"compact",class:"procedure-care-list-item"}),{title:u(()=>[p("div",Wke,q(E.raw.description),1)]),append:u(()=>[l(b,{location:"top"},{activator:u(({props:C})=>[l(w,Fe(C,{size:"small"}),{default:u(()=>[E.raw.isFromHistory?(R(),ve(w,{key:0,icon:"mdi-history",color:"primary"})):_e("",!0)]),_:2},1040)]),default:u(()=>[p("span",null,q(E.raw.isFromHistory?"From your procedure history":"Custom procedure care instructions"),1)]),_:2},1024)]),_:2},1040)]),"no-data":u(()=>[l(U,{flat:"",class:"pa-4 text-center"},{default:u(()=>[l(T,null,{default:u(()=>[O(q(v.value),1)]),_:1})]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},dR=Xt(jke,[["__scopeId","data-v-69ba2d09"]]),qke={class:"template-name template-name-truncate"},Yke={class:"text-caption template-subtitle-truncate"},Xke={key:0},Jke={__name:"treatment-plan-template-autocomplete",props:{doctorId:{type:[String,Number],required:!0}},emits:["template-selected"],setup(e,{emit:t}){const n=e,a=t,r=M(null),s=M([]),o=M(""),i=M(!1),c=M(!1);let A=null;const d=w=>{o.value=w},f=()=>{s.value.length===0&&(!o.value||o.value.length===0)&&h()};We(o,w=>{if(A&&clearTimeout(A),!w||w.length===0){h();return}A=setTimeout(()=>{v(w)},300)});const m=w=>{w&&typeof w=="object"&&(console.log("Template selected:",w),a("template-selected",{template:w,autoFillData:{treatmentPlanName:w.treatmentPlanName,notes:w.notes||"",procedures:(w.procedures||[]).map(b=>({procedureId:b.procedureId,costEstimate:b.costEstimate||0,procedureCost:b.procedureCost||0,procedureName:b.procedureName||"",location:b.location||"",option:b.option||"",procedureDescription:b.procedureDescription||""}))}}),setTimeout(()=>{r.value=null,o.value="",s.value=[]},100))},h=async()=>{i.value=!0;try{const w=await jM(n.doctorId);w.error?(s.value=[],c.value=!0):(s.value=w.data||[],c.value=!0)}catch(w){console.error("Error fetching all templates:",w),s.value=[],c.value=!0}finally{i.value=!1}},v=async w=>{if(!(!w||w.length===0)){i.value=!0;try{const b=await GM(w,n.doctorId);b.error?s.value=[]:s.value=b.data||[]}catch(b){console.error("Error fetching templates:",b),s.value=[]}finally{i.value=!1}}},y=w=>{const b=[];return w.notes&&b.push(`Notes: ${w.notes.substring(0,30)}...`),w.procedures&&w.procedures.length>0&&b.push(`${w.procedures.length} procedure(s)`),b.join(" | ")||"Template"},g=ee(()=>i.value?!o.value||o.value.length===0?"Loading templates...":"Searching templates...":!o.value||o.value.length===0?c.value&&s.value.length===0?"No saved treatment plan templates found. Create templates during consultations to see them here.":"Click to view your saved treatment plan templates":o.value&&s.value.length===0?`No templates found for "${o.value}". Try a different search term.`:"");return(w,b)=>{const x=I("v-icon"),T=I("v-tooltip"),U=I("v-list-item"),k=I("v-list"),S=I("v-card-subtitle"),E=I("v-card-text"),C=I("v-card"),P=I("v-autocomplete");return R(),ve(P,{modelValue:r.value,"onUpdate:modelValue":[b[0]||(b[0]=F=>r.value=F),m],items:s.value,search:o.value,"onUpdate:search":d,onFocus:f,"item-title":"treatmentPlanName","item-value":"treatmentPlanName",label:"select treatment plan template (optional)",placeholder:"Search saved templates...",variant:"outlined",loading:i.value,"no-data-text":g.value,clearable:"","return-object":"",density:"compact","prepend-inner-icon":"mdi-magnify",class:"template-autocomplete"},{item:u(({props:F,item:N})=>[l(k,{density:"compact",class:"template-search-list"},{default:u(()=>[l(U,Fe(F,{class:"template-search-item"}),{title:u(()=>[p("span",qke,q(N.raw.treatmentPlanName),1)]),subtitle:u(()=>[p("span",Yke,q(y(N.raw)),1)]),append:u(()=>[l(T,{location:"top"},{activator:u(({props:L})=>[l(x,Fe(L,{size:"small",color:"primary"}),{default:u(()=>[...b[1]||(b[1]=[O(" mdi-bookmark ",-1)])]),_:1},16)]),default:u(()=>[b[2]||(b[2]=p("span",null,"Saved Template",-1))]),_:1})]),_:2},1040)]),_:2},1024)]),"no-data":u(()=>[l(C,{flat:"",class:"pa-4 text-center"},{default:u(()=>[c.value&&s.value.length===0&&!o.value?(R(),me("div",Xke,[l(x,{color:"grey-lighten-1",size:"48",class:"mb-2"},{default:u(()=>[...b[3]||(b[3]=[O("mdi-bookmark-outline",-1)])]),_:1}),l(S,{class:"text-wrap mb-2"},{default:u(()=>[...b[4]||(b[4]=[O("No saved treatment plan templates found",-1)])]),_:1}),l(E,{class:"text-caption text-grey"},{default:u(()=>[...b[5]||(b[5]=[O(" Save treatment plan templates during consultations to quickly reuse them here. ",-1)])]),_:1})])):(R(),ve(S,{key:1,class:"text-wrap"},{default:u(()=>[O(q(g.value),1)]),_:1}))]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},Zke=Xt(Jke,[["__scopeId","data-v-c280e42e"]]),eTe={class:"text-caption mr-3"},tTe={key:0,class:"text-caption mr-3"},nTe={key:1,class:"text-caption mr-3"},aTe={key:2,class:"text-caption"},rTe={__name:"create-treatment-plan-template",props:{procedureList:{type:Array,default:()=>[]},treatmentPlanName:{type:String,default:""},notes:{type:String,default:""},doctorId:{type:[String,Number],required:!0}},emits:["close","update&close"],setup(e,{emit:t}){const n=e,a=t,r=M(n.treatmentPlanName),s=M(n.notes),o=M(!1),i=M(!1),c=M([]),A=M(""),d=M(null),f=ee(()=>n.procedureList.filter(y=>y.isLocal&&(y.procedureName||y.procedure_name)&&y.id!==void 0&&y.id!==null)),m=()=>{d.value&&d.value.abort(),a("close")},h=(y,g)=>{if(g)c.value.includes(y.id)||c.value.push(y.id),console.log("Procedure selected:",y.procedureName||y.procedure_name);else{const w=c.value.indexOf(y.id);w>-1&&c.value.splice(w,1),console.log("Procedure deselected:",y.procedureName||y.procedure_name)}A.value=""},v=async()=>{if(c.value.length===0){A.value="Please select at least one procedure to create a template";return}i.value=!0,A.value="",d.value=new AbortController;const y=n.procedureList.filter(w=>c.value.includes(w.id)),g={doctor_id:n.doctorId,treatmentplan_name:r.value,notes:s.value||"",procedures:y.map(w=>({procedure_id:w.procedureId||w.procedure_id||w.id,cost_estimate:w.costEstimate!==void 0&&w.costEstimate!==null?parseFloat(w.costEstimate):parseFloat(w.cost||w.procedureCost||0),location:w.location||"",option:w.option||""}))};console.log("Creating new treatment plan template:",g);try{const w=await zM(g);if(d.value?.signal.aborted)return;w.error?(A.value="Failed to create treatment plan template. Please try again.",console.error("Error creating treatment plan template:",w.error)):(console.log("Treatment plan template created successfully"),a("update&close"))}catch(w){d.value?.signal.aborted||(A.value="An unexpected error occurred. Please try again.",console.error("Error creating treatment plan template:",w))}finally{d.value?.signal.aborted||(i.value=!1),d.value=null}};return la(()=>{d.value&&d.value.abort()}),(y,g)=>{const w=I("v-card-title"),b=I("v-col"),x=I("v-icon"),T=I("v-btn"),U=I("v-row"),k=I("v-card"),S=I("v-text-field"),E=I("v-textarea"),C=I("v-divider"),P=I("v-card-subtitle"),F=I("v-checkbox"),N=I("v-chip"),L=I("v-card-text"),ie=I("v-alert"),le=I("v-form");return R(),ve(k,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(U,{"no-gutters":""},{default:u(()=>[l(b,{cols:"12"},{default:u(()=>[l(k,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(U,{"no-gutters":""},{default:u(()=>[l(b,{cols:"11"},{default:u(()=>[l(w,{class:"pa-0 pl-2"},{default:u(()=>[...g[3]||(g[3]=[O("Create Treatment Plan Template",-1)])]),_:1})]),_:1}),l(b,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(T,{icon:"",size:"x-small",onClick:m},{default:u(()=>[l(x,null,{default:u(()=>[...g[4]||(g[4]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(U,{"no-gutters":""},{default:u(()=>[l(b,{cols:"12"},{default:u(()=>[l(k,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(le,{modelValue:o.value,"onUpdate:modelValue":g[2]||(g[2]=Q=>o.value=Q),"validate-on":"blur"},{default:u(()=>[l(U,{"no-gutters":""},{default:u(()=>[l(b,{cols:"12"},{default:u(()=>[l(S,{label:"Treatment Plan Name *",density:"compact",modelValue:r.value,"onUpdate:modelValue":g[0]||(g[0]=Q=>r.value=Q),rules:Oe(sr)},null,8,["modelValue","rules"])]),_:1}),l(b,{cols:"12"},{default:u(()=>[l(E,{label:"Notes",density:"compact",modelValue:s.value,"onUpdate:modelValue":g[1]||(g[1]=Q=>s.value=Q),rows:"2","auto-grow":""},null,8,["modelValue"])]),_:1})]),_:1}),l(U,{"no-gutters":""},{default:u(()=>[l(b,{cols:"12"},{default:u(()=>[l(C,{class:"my-3"},{default:u(()=>[...g[5]||(g[5]=[O("Procedures",-1)])]),_:1}),f.value.length>0?(R(),ve(k,{key:0,variant:"outlined"},{default:u(()=>[l(P,{class:"pb-2"},{default:u(()=>[...g[6]||(g[6]=[O("Available Local Procedures (from current treatment plan):",-1)])]),_:1}),l(L,null,{default:u(()=>[(R(!0),me(ze,null,Wt(f.value,Q=>(R(),ve(k,{key:`available-${Q.id}`,flat:""},{default:u(()=>[l(U,{"no-gutters":"",class:"align-center"},{default:u(()=>[l(b,{cols:"auto",class:"d-flex align-center justify-start"},{default:u(()=>[l(F,{"model-value":c.value.includes(Q.id),color:"primary",density:"compact","hide-details":"","onUpdate:modelValue":Z=>h(Q,Z)},null,8,["model-value","onUpdate:modelValue"]),l(N,{color:"primary","text-color":"black",size:"small",class:"ml-2"},{default:u(()=>[p("strong",null,q(Q.procedureName||Q.procedure_name),1)]),_:2},1024)]),_:2},1024),l(b,{cols:"auto",class:"d-flex align-center justify-start flex-wrap ml-4"},{default:u(()=>[p("span",eTe," Base: "+q((Q.cost||Q.procedureCost||0).toFixed(2)),1),Q.costEstimate!==void 0&&Q.costEstimate!==null?(R(),me("span",tTe," Final: "+q(parseFloat(Q.costEstimate||0).toFixed(2)),1)):_e("",!0),Q.location?(R(),me("span",nTe," Location: "+q(Q.location),1)):_e("",!0),Q.option?(R(),me("span",aTe," Option: "+q(Q.option),1)):_e("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):(R(),ve(ie,{key:1,type:"info",variant:"outlined"},{default:u(()=>[...g[7]||(g[7]=[O(" No local procedures available from current treatment plan to add to template. ",-1)])]),_:1})),A.value?(R(),ve(ie,{key:2,type:"error",variant:"outlined",class:"mt-3"},{default:u(()=>[O(q(A.value),1)]),_:1})):_e("",!0)]),_:1})]),_:1}),l(C),l(U,{"no-gutters":""},{default:u(()=>[l(b,{cols:"2"}),l(b,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(T,{variant:"outlined",onClick:v,disabled:!o.value||c.value.length===0,loading:i.value},{default:u(()=>[...g[8]||(g[8]=[O(" Create ",-1)])]),_:1},8,["disabled","loading"])]),_:1}),l(b,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},sTe=Xt(rTe,[["__scopeId","data-v-11bfc2fd"]]),oTe={class:"text-caption mr-3"},iTe={key:0,class:"text-caption mr-3"},lTe={key:1,class:"text-caption mr-3"},uTe={key:2,class:"text-caption"},cTe={class:"text-caption mr-3"},dTe={key:0,class:"text-caption mr-3"},ATe={key:1,class:"text-caption mr-3"},fTe={key:2,class:"text-caption"},mTe={__name:"edit-treatment-plan-template",props:{procedureList:{type:Array,required:!0},selectedTemplate:{type:Object,default:null}},emits:["close","update&close"],setup(e,{emit:t}){const n=e,a=t,r=M(null),s=M({}),o=M([]),i=M(!1),c=M(!1),A=M([]),d=M(!1),f=M(""),m=M(null);We(()=>n.procedureList,()=>{h()},{deep:!0});const h=()=>{const x=o.value.map(T=>T.procedureId);A.value=n.procedureList.filter(T=>T.isLocal&&T.id!==void 0&&T.id!==null&&!x.includes(T.id)).map(T=>({...T,isSelected:!1,_uniqueKey:`available_${T.id}`}))};cn(async()=>{n.selectedTemplate?(r.value=n.selectedTemplate,await v(n.selectedTemplate)):h()});const v=async x=>{if(!x){s.value={},o.value=[],h();return}s.value=Hn.cloneDeep(x),d.value=!0,f.value="";try{const T=await WM(x.id);if(!T.error&&T.data)o.value=(T.data.procedures||[]).map(U=>({...U,isSelected:!0,_uniqueKey:`template_${U.id}`})),console.log("Template procedures fetched:",o.value),h();else throw new Error("Failed to fetch template procedures")}catch(T){console.error("Error fetching template procedures:",T),f.value="Failed to load template procedures. Please try again.",o.value=[],h()}finally{d.value=!1}},y=x=>{console.log("Procedure selection changed:",x.procedureName||x.procedure_name,x.isSelected)},g=x=>{console.log("Template procedure selection changed:",x.procedureName,x.isSelected)},w=async()=>{if(!(!r.value||!c.value)){i.value=!0,f.value="";try{const x=o.value.filter(E=>E.isSelected),T=A.value.filter(E=>E.isSelected),k=[...x,...T].map(E=>({procedure_id:E.procedureId||E.procedure_id||E.id,cost_estimate:E.costEstimate!==void 0&&E.costEstimate!==null?parseFloat(E.costEstimate):parseFloat(E.procedureCost||E.cost||0),location:E.location||"",option:E.option||""})),S=await KM(r.value.id,{treatmentplan_name:s.value.treatmentPlanName,notes:s.value.notes||"",procedures:k});if(S.error){f.value="Failed to update template. Please try again.",console.error("Error updating treatment plan template:",S.error);return}console.log("Template updated successfully"),a("update&close")}catch(x){f.value="An unexpected error occurred. Please try again.",console.error("Error updating template:",x)}finally{i.value=!1}}},b=()=>{m.value&&m.value.abort(),a("close")};return la(()=>{m.value&&m.value.abort()}),(x,T)=>{const U=I("v-card-title"),k=I("v-col"),S=I("v-icon"),E=I("v-btn"),C=I("v-row"),P=I("v-card"),F=I("v-text-field"),N=I("v-textarea"),L=I("v-divider"),ie=I("v-card-subtitle"),le=I("v-progress-linear"),Q=I("v-card-text"),Z=I("v-checkbox"),ce=I("v-chip"),J=I("v-alert"),se=I("v-form");return R(),ve(P,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(C,{"no-gutters":""},{default:u(()=>[l(k,{cols:"12"},{default:u(()=>[l(P,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(C,{"no-gutters":""},{default:u(()=>[l(k,{cols:"11"},{default:u(()=>[l(U,{class:"pa-0 pl-2"},{default:u(()=>[...T[3]||(T[3]=[O("Edit Treatment Plan Template",-1)])]),_:1})]),_:1}),l(k,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(E,{icon:"",size:"x-small",onClick:b},{default:u(()=>[l(S,null,{default:u(()=>[...T[4]||(T[4]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(C,{"no-gutters":""},{default:u(()=>[l(k,{cols:"12"},{default:u(()=>[l(P,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(se,{modelValue:c.value,"onUpdate:modelValue":T[2]||(T[2]=G=>c.value=G),"validate-on":"blur"},{default:u(()=>[l(C,{"no-gutters":""},{default:u(()=>[r.value?(R(),me(ze,{key:0},[l(k,{cols:"12"},{default:u(()=>[l(F,{label:"Treatment Plan Name *",density:"compact",modelValue:s.value.treatmentPlanName,"onUpdate:modelValue":T[0]||(T[0]=G=>s.value.treatmentPlanName=G),rules:Oe(sr)},null,8,["modelValue","rules"])]),_:1}),l(k,{cols:"12"},{default:u(()=>[l(N,{label:"Notes",density:"compact",rows:"2","auto-grow":"",modelValue:s.value.notes,"onUpdate:modelValue":T[1]||(T[1]=G=>s.value.notes=G)},null,8,["modelValue"])]),_:1}),l(k,{cols:"12"},{default:u(()=>[l(L,{class:"my-3"},{default:u(()=>[...T[5]||(T[5]=[O("Procedures",-1)])]),_:1}),d.value?(R(),ve(P,{key:0,variant:"outlined",class:"mb-3"},{default:u(()=>[l(ie,{class:"pb-2"},{default:u(()=>[...T[6]||(T[6]=[O("Loading template procedures...",-1)])]),_:1}),l(Q,null,{default:u(()=>[l(le,{indeterminate:""})]),_:1})]),_:1})):o.value.length>0?(R(),ve(P,{key:1,variant:"outlined",class:"mb-3"},{default:u(()=>[l(ie,{class:"pb-2"},{default:u(()=>[...T[7]||(T[7]=[O("Current Template Procedures:",-1)])]),_:1}),l(Q,null,{default:u(()=>[(R(!0),me(ze,null,Wt(o.value,G=>(R(),ve(P,{key:G._uniqueKey||`template-${G.id}`,flat:""},{default:u(()=>[l(C,{"no-gutters":"",class:"align-center"},{default:u(()=>[l(k,{cols:"auto",class:"d-flex align-center justify-start"},{default:u(()=>[l(Z,{modelValue:G.isSelected,"onUpdate:modelValue":D=>G.isSelected=D,color:"primary",density:"compact","hide-details":"",onChange:D=>g(G)},null,8,["modelValue","onUpdate:modelValue","onChange"]),l(ce,{color:"primary","text-color":"black",size:"small",class:"ml-2"},{default:u(()=>[p("strong",null,q(G.procedureName),1)]),_:2},1024)]),_:2},1024),l(k,{cols:"auto",class:"d-flex align-center justify-start flex-wrap ml-4"},{default:u(()=>[p("span",oTe," Base: "+q((G.procedureCost||0).toFixed(2)),1),G.costEstimate!==void 0&&G.costEstimate!==null?(R(),me("span",iTe," Final: "+q(parseFloat(G.costEstimate||0).toFixed(2)),1)):_e("",!0),G.location?(R(),me("span",lTe," Location: "+q(G.location),1)):_e("",!0),G.option?(R(),me("span",uTe," Option: "+q(G.option),1)):_e("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):_e("",!0),A.value.length>0?(R(),ve(P,{key:2,variant:"outlined"},{default:u(()=>[l(ie,{class:"pb-2"},{default:u(()=>[...T[8]||(T[8]=[O("Available Local Procedures (from current treatment plan):",-1)])]),_:1}),l(Q,null,{default:u(()=>[(R(!0),me(ze,null,Wt(A.value,G=>(R(),ve(P,{key:G._uniqueKey||`available-${G.id}`,flat:""},{default:u(()=>[l(C,{"no-gutters":"",class:"align-center"},{default:u(()=>[l(k,{cols:"auto",class:"d-flex align-center justify-start"},{default:u(()=>[l(Z,{modelValue:G.isSelected,"onUpdate:modelValue":D=>G.isSelected=D,color:"primary",density:"compact","hide-details":"",onChange:D=>y(G)},null,8,["modelValue","onUpdate:modelValue","onChange"]),l(ce,{color:"primary","text-color":"black",size:"small",class:"ml-2"},{default:u(()=>[p("strong",null,q(G.procedureName||G.procedure_name),1)]),_:2},1024)]),_:2},1024),l(k,{cols:"auto",class:"d-flex align-center justify-start flex-wrap ml-4"},{default:u(()=>[p("span",cTe," Base: "+q((G.cost||G.procedureCost||0).toFixed(2)),1),G.costEstimate!==void 0&&G.costEstimate!==null?(R(),me("span",dTe," Final: "+q(parseFloat(G.costEstimate||0).toFixed(2)),1)):_e("",!0),G.location?(R(),me("span",ATe," Location: "+q(G.location),1)):_e("",!0),G.option?(R(),me("span",fTe," Option: "+q(G.option),1)):_e("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):(R(),ve(J,{key:3,type:"info",variant:"outlined"},{default:u(()=>[...T[9]||(T[9]=[O(" No local procedures available from current treatment plan to add to template. ",-1)])]),_:1})),f.value?(R(),ve(J,{key:4,type:"error",variant:"outlined",class:"mt-3"},{default:u(()=>[O(q(f.value),1)]),_:1})):_e("",!0)]),_:1})],64)):(R(),ve(k,{key:1,cols:"12"},{default:u(()=>[l(J,{type:"info",variant:"outlined"},{default:u(()=>[...T[10]||(T[10]=[O(" No treatment plan template selected for editing. ",-1)])]),_:1})]),_:1}))]),_:1}),l(L),l(C,{"no-gutters":""},{default:u(()=>[l(k,{cols:"2"}),l(k,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(E,{variant:"outlined",onClick:w,disabled:!c.value||!r.value,loading:i.value},{default:u(()=>[...T[11]||(T[11]=[O(" Update ",-1)])]),_:1},8,["disabled","loading"])]),_:1}),l(k,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},hTe=Xt(mTe,[["__scopeId","data-v-a21afca5"]]),i2=e=>{if(!e)return"";try{const t=typeof e=="string"?ev(e):new Date(e);return go(t,"MMMM d, yyyy")}catch{return e}},vTe=(e,t,n)=>{const a=i2(e.dueDate);return`Hi ${n},

This is a reminder for your upcoming appointment with Dr. ${t}.

 Date: ${a}

Please arrive 10 minutes early. Contact us if you need to reschedule.

Best regards,
Dr. ${t}`},pTe=(e,t,n)=>{const a=i2(e.details.consultationDate),r=i2(e.dueDate);return`Hi ${n},

Your follow-up consultation with Dr. ${t} is due.

 Original Consultation: ${a}
 Follow-up Due: ${r}

Please schedule your follow-up appointment. Contact us to book a slot.

Best regards,
Dr. ${t}`},gTe=(e,t,n)=>{const a=i2(e.dueDate);let r="",s="";if(e.details.procedures&&Array.isArray(e.details.procedures)){const o=e.details.procedures.filter(c=>c.status==="completed").map(c=>c.procedure_name||c.procedureName).filter(c=>c),i=e.details.procedures.filter(c=>["proposed","ongoing","active","scheduled"].includes(c.status)).map(c=>c.procedure_name||c.procedureName).filter(c=>c);r=o.length>0?o.join(", "):"None",s=i.length>0?i.join(", "):"None"}else{if(e.procedureDetails){if(e.procedureDetails.includes("Completed:")){const o=e.procedureDetails.match(/Completed: ([^]+)/);r=o?o[1].trim():"None"}if(e.procedureDetails.includes("Pending:")){const o=e.procedureDetails.match(/Pending: ([^]*)/);s=o?o[1].trim():"None"}}r||(r="None"),s||(s="None")}return`Hi ${n},

This is a reminder for your treatment plan follow-up with Dr. ${t}.

 Follow-up Due: ${a}
 Completed: ${r}
 Pending: ${s}

Please contact us to schedule your next visit.

Best regards,
Dr. ${t}`},WH=async(e,t)=>{let n=e;n=n.replace(/\D/g,""),!n.startsWith("91")&&n.length===10&&(n="91"+n);const a=`https://api.whatsapp.com/send?phone=${n}&text=${encodeURIComponent(t)}`;try{const{ipcRenderer:r}=window.require("electron"),s=await r.invoke("open-external",a);return s.success?(console.log("Successfully opened WhatsApp with system default browser"),{success:!0}):(console.error("Failed to open WhatsApp via Electron:",s.error),window.open(a,"_blank","noopener,noreferrer"),{success:!0})}catch(r){return console.error("Failed to use Electron IPC:",r),window.open(a,"_blank","noopener,noreferrer"),{success:!0}}},jH=e=>{if(!e)return!1;const t=e.replace(/\D/g,"");return t.length===10||t.length===12&&t.startsWith("91")},yTe=async(e,t)=>{try{if(!e)throw new Error("Reminder data is required");if(!t?.doctorName)throw new Error("Doctor information is required");const n=e.details?.patient_phone||e.details?.contactNumber||e.details?.contact_number;if(!n)throw new Error("Patient contact number not available");if(!jH(n))throw new Error("Invalid phone number format");const a=e.patientName||"Patient",r=t.doctorName;let s;switch(e.type){case"appointment":s=vTe(e,r,a);break;case"consultation":s=pTe(e,r,a);break;case"procedures":s=gTe(e,r,a);break;default:throw new Error(`Unsupported reminder type: ${e.type}`)}if((await WH(n,s)).success)return{success:!0,message:`WhatsApp reminder sent to ${a}`};throw new Error("Failed to open WhatsApp")}catch(n){return console.error("WhatsApp reminder failed:",n),{success:!1,error:n.message}}},_Te=(e,t,n,a,r)=>`Hi ${r},

Post-procedure care instructions for ${e}:

${t}

Best regards,
Dr. ${a}`,wTe=async(e,t,n)=>{try{if(!e)throw new Error("Procedure data is required");if(!t)throw new Error("Patient data is required");if(!n?.doctorName)throw new Error("Doctor information is required");const a=t.contactNumber||t.phoneNumber||t.contact_number||t.patient_phone;if(!a)throw new Error("Patient contact number not available");if(!jH(a))throw new Error("Invalid phone number format");const r=t.name||t.patientName||"Patient",s=n.doctorName,o=e.procedureName||e.procedure?.procedure_name||e.procedure_name||"Procedure",i=e.postProcedureCare||e.instructions||"",c=e.startDate||e.procedureDate||e.treatmentPlan?.startDate||new Date().toISOString().split("T")[0];if(!i||!i.trim())throw new Error("Post-procedure care instructions are required");const A=_Te(o,i.trim(),c,s,r);if((await WH(a,A)).success)return{success:!0,message:`Post-procedure care instructions sent to ${r}`};throw new Error("Failed to open WhatsApp")}catch(a){return console.error("WhatsApp post-procedure care failed:",a),{success:!1,error:a.message}}},bTe={class:"text-caption"},xTe={key:0,class:"d-flex flex-wrap gap-1 align-center mt-1"},CTe={class:"d-flex flex-wrap gap-2 align-center"},STe={key:0,class:"mt-2"},ETe={key:0,class:"text-caption text-medium-emphasis ml-2"},BTe={key:0,class:"mt-3 mb-3"},kTe={class:"text-center"},TTe={class:"text-body-2 font-weight-medium mb-0"},ITe={class:"text-center"},FTe={class:"text-body-2 font-weight-medium mb-0"},PTe={class:"text-center"},DTe={class:"text-body-2 font-weight-medium mb-0"},UTe={class:"text-center"},RTe={class:"text-body-2 font-weight-medium mb-0"},NTe={class:"text-center"},VTe={class:"text-center"},LTe={key:1,class:"d-flex justify-center align-center pa-4"},MTe={key:2,class:"payment-receipts-container"},OTe={class:"d-flex align-center flex-wrap payment-receipt-details"},HTe={class:"text-subtitle-2 font-weight-bold receipt-id"},$Te={class:"text-caption text-medium-emphasis receipt-date"},QTe={class:"text-caption receipt-amount"},GTe={class:"text-caption receipt-amount"},zTe={class:"text-caption text-error receipt-amount"},KTe={key:0,class:"mx-2 pb-2"},WTe={class:"text-subtitle-2 text-medium-emphasis"},jTe={class:"d-flex align-center gap-2"},qTe={class:"text-subtitle-2 text-left"},YTe=["src","alt"],XTe={class:"mx-2 pb-2"},JTe={class:"text-subtitle-2 text-medium-emphasis"},ZTe={class:"mb-1"},e4e={class:"procedure-name text-body-2 font-weight-bold text-left"},t4e={class:"text-body-2 font-weight-medium text-left d-flex align-center gap-1"},n4e={class:"d-flex align-center gap-1"},a4e={class:"d-flex justify-start align-center gap-2"},r4e={class:"d-flex justify-start"},s4e={key:2,class:"text-center py-8"},o4e={key:0,class:"date-section mb-4"},i4e={class:"date-header-vertical mb-3",style:{"margin-top":"16px","margin-left":"8px"}},l4e={class:"text-subtitle-2 text-left mb-1"},u4e={class:"d-flex flex-wrap gap-2 align-center mb-1"},c4e={class:"text-caption text-medium-emphasis procedure-description"},d4e={class:"text-subtitle-2 text-left mb-1"},A4e={class:"d-flex flex-wrap gap-2 align-center mb-1"},f4e={class:"text-caption text-medium-emphasis procedure-description"},m4e={key:1,class:"text-center py-8"},h4e={__name:"procedure-window",props:{treatmentPlan:{type:Object,default:()=>({id:"0"})},patient:{type:Object,default:()=>({})}},emits:["update:treatmentPlan","createNewTreatmentPlan"],setup(e,{emit:t}){const n=e,a=t,r=ea(),s=ee(()=>r.state.doctorModule.doctorId),o=ee(()=>r.getters["doctorModule/currentDoctor"]),{showSuccess:i,showError:c}=ra(),A=M("plan"),d=M({}),f=M([]),m=M([]),h=M(!1),v=M(!1),y=M(!1),g=M(null),w=M(null),b=M([]),x=M(!1),T=M(!1),U=M(!1),k=M(null),S=M([]),E=M(!1),C=M(!1),P=M(null),F=M(new Set),N=M(!1),L=M({}),ie=M(!1),le=M(null),Q=M(!1),Z=M(null),ce=M(new Map),J=M({}),se=M({show:!1,text:"",color:"success"}),G=[{title:"Proposed",value:"proposed"},{title:"Ongoing",value:"ongoing"},{title:"Completed",value:"completed"},{title:"Deleted",value:"deleted"}],D=[{title:"Proposed",value:"proposed"},{title:"Ongoing",value:"ongoing"},{title:"Completed",value:"completed"},{title:"On Hold",value:"on_hold"},{title:"Cancelled",value:"cancelled"}],j=ee(()=>!f.value||f.value.length===0?0:f.value.filter(re=>re.isSelected&&re.status?.toLowerCase()!=="cancelled").reduce((re,ge)=>{const Se=ge.procedureCost||0;return re+Se},0)),ne=ee(()=>!f.value||f.value.length===0?0:f.value.filter(re=>re.isSelected&&re.status?.toLowerCase()!=="cancelled").reduce((re,ge)=>{const Se=ge.costEstimate||ge.cost_estimate,Me=ge.procedureCost||0;return re+(Se!==void 0?Se:Me)},0)),H=ee(()=>!f.value||f.value.length===0?0:f.value.filter(re=>re.isSelected&&re.status?.toLowerCase()==="completed"&&re.status?.toLowerCase()!=="cancelled").reduce((re,ge)=>{const Se=ge.costEstimate||ge.cost_estimate,Me=ge.procedureCost||0;return re+(Se!==void 0?Se:Me)},0)),te=ee(()=>!k.value||k.value.length===0?0:k.value.reduce((re,ge)=>re+(ge.totalPaid||0),0)),Y=ee(()=>Math.max(0,H.value-te.value)),K=ee(()=>f.value?f.value.some(re=>(re.option||re.options||"").trim()!==""&&re.status?.toLowerCase()!=="cancelled"):!1),X=ee(()=>f.value?f.value.filter(re=>re.status?.toLowerCase()!=="cancelled"):[]);ee(()=>{if(!f.value)return[];const re={ongoing:1,on_hold:2,proposed:3,completed:4,cancelled:5},ge=Me=>{const Ze=Me.start_date||Me.startDate,nt=Me.created_at||Me.createdAt;return Ze?new Date(Ze):nt?new Date(nt):new Date(0)},Se=[...f.value];return Se.length>100?Se.sort((Me,Ze)=>{const nt=ce.value.get(Me.id)||{status:Me.status?.toLowerCase(),date:ge(Me)},et=ce.value.get(Ze.id)||{status:Ze.status?.toLowerCase(),date:ge(Ze)},lt=re[nt.status]||999,bt=re[et.status]||999;return lt!==bt?lt-bt:et.date-nt.date}):Se.sort((Me,Ze)=>{const nt=ce.value.get(Me.id)||{status:Me.status?.toLowerCase(),date:ge(Me)},et=ce.value.get(Ze.id)||{status:Ze.status?.toLowerCase(),date:ge(Ze)},lt=re[nt.status]||999,bt=re[et.status]||999;return lt!==bt?lt-bt:et.date-nt.date})});const ae=ee(()=>{if(!f.value||f.value.length===0)return{unscheduled:[],dateGroups:[]};const re={ongoing:1,on_hold:2,proposed:3,completed:4,cancelled:5},ge=nt=>nt.sort((et,lt)=>{const bt=(et.status||"proposed").toLowerCase(),It=(lt.status||"proposed").toLowerCase(),an=re[bt]||999,En=re[It]||999;return an-En}),Se=[],Me={};f.value.forEach(nt=>{const lt=ce.value.get(nt.id)?.startDate;if(!lt)Se.push(nt);else{const bt=new Date(lt),It=new Date,an=bt.getFullYear()===It.getFullYear(),En=bt.toLocaleDateString("en-US",{timeZone:"Asia/Kolkata",month:"short",day:"numeric",...an?{}:{year:"numeric"}}),hn=bt.toLocaleDateString("en-US",{timeZone:"Asia/Kolkata",year:"numeric",month:"long",day:"numeric"});Me[En]||(Me[En]={date:En,fullDate:hn,rawDate:bt,procedures:[]}),Me[En].procedures.push(nt)}}),ge(Se),Object.values(Me).forEach(nt=>{ge(nt.procedures)});const Ze=Object.values(Me).sort((nt,et)=>nt.rawDate.getTime()-et.rawDate.getTime());return{unscheduled:Se,dateGroups:Ze}}),oe=async()=>{if(!d.value?.id||d.value.id==="0"){f.value=[];return}try{const re=await df(d.value.id);if(re.error)throw new Error(re.error.message||"Failed to load procedure details");let ge=re.data.procedures||[];ge=ge.sort((Se,Me)=>{const Ze=Se.option||Se.options||"",nt=Me.option||Me.options||"";return!Ze&&nt?-1:Ze&&!nt?1:Ze.localeCompare(nt)}),f.value=ge,f.value.forEach(Se=>{Le(Se)}),Ke()}catch(re){console.error("Error loading procedure treatments:",re),f.value=[]}},W=async()=>{if(!d.value?.id||d.value.id==="0"){k.value=[];return}try{k.value=null;const re=await bw(r,"",d.value.id);if(re.error)throw new Error(re.error.message||"Failed to load payment receipts");k.value=re.data||[]}catch(re){console.error("Error loading payment receipts:",re),k.value=[],Pt("Failed to load payment receipts","error")}};We(()=>n.treatmentPlan,re=>{re&&(d.value=Hn.cloneDeep(re),(d.value.amountPaid===void 0||d.value.amountPaid===null)&&(d.value.amountPaid=0),N.value&&(L.value={treatmentPlanName:d.value.treatmentPlanName||"",status:d.value.status||"proposed",startDate:d.value.startDate||"",endDate:d.value.endDate||"",followupDate:d.value.followupDate||"",notes:d.value.notes||"",isReminded:d.value.isReminded||!1}),oe(),re.id&&re.id!=="0"?W():k.value=[])},{immediate:!0,deep:!0}),We(()=>L.value.followupDate,(re,ge)=>{re&&ge&&re!==ge&&L.value.isReminded&&(L.value.isReminded=!1,console.log("Follow-up date changed, setting reminder to pending"))});const de=re=>{console.log("Tab changed to:",re)},Ae=()=>{a("createNewTreatmentPlan",{treatmentPlanName:"New Treatment Plan",startDate:"",endDate:"",followupDate:"",status:"proposed",notes:"",amountPaid:0,isTemplate:!1})},Ce=async()=>{if(!s.value){console.error("Doctor ID not available");return}x.value=!0;try{const re=await OM("",s.value);if(re.error)throw new Error(re.error.message||"Failed to load procedures");b.value=re.data}catch(re){console.error("Error loading procedures:",re),Pt("Failed to load procedures","error")}finally{x.value=!1}},De=async re=>{if(!d.value?.id||d.value.id==="0"){Pt("Please create a treatment plan first","error");return}const{template:ge,autoFillData:Se}=re;if(!Se.procedures||Se.procedures.length===0){Pt("Template has no procedures to copy","warning");return}try{const Me=await dt.put(`/treatmentplan/${d.value.id}`,{treatmentplan_name:Se.treatmentPlanName,notes:Se.notes||""});if(!Me.data.success)throw new Error(Me.data.error||"Failed to update treatment plan details");let Ze=0,nt=0;const et=[];for(const lt of Se.procedures)try{await dt.post(`/treatmentplan/${d.value.id}/procedure`,{procedure_id:lt.procedureId,cost_estimate:lt.costEstimate||0,location:lt.location||"",option:lt.option||"",notes:""}),Ze++}catch(bt){nt++,et.push(lt.procedureName||"Unknown"),console.error("Error adding procedure from template:",bt)}await Zt(),S.value.find(lt=>lt.id===ge.id)||S.value.push(ge),nt===0?Pt(`Applied template "${ge.treatmentPlanName}": ${Ze} procedure(s) added`,"success"):Pt(`Template applied with partial success: ${Ze} succeeded, ${nt} failed. Failed: ${et.join(", ")}`,"warning")}catch(Me){console.error("Error applying template:",Me),Pt("Failed to apply template","error")}},xe=()=>{E.value=!0},ke=()=>{E.value=!1},Ee=()=>{E.value=!1,Pt("Treatment plan template created successfully","success")},ye=re=>{P.value=re,C.value=!0},we=()=>{C.value=!1,P.value=null},at=()=>{C.value=!1,P.value=null,Pt("Treatment plan template updated successfully","success")},Je=re=>{S.value=S.value.filter(ge=>ge.id!==re)},rt=()=>{h.value=!0},it=async re=>{console.log("Searched Procedures received:",re),console.log("Current selectedProcedures before:",m.value);for(const ge of re)await Ie(ge);console.log("Current selectedProcedures after:",m.value)},Ie=async re=>{if(console.log("Adding procedure to staging:",re),re.isLocal===!0){console.log("Local procedure - saving directly to treatment plan"),await Ve(re);return}console.log("Server procedure - adding to staging area");const ge=m.value.some(Se=>Se.id===re.id);if(console.log("Procedure already exists in staging:",ge),ge)console.log("Procedure already in staging, skipping");else{const Se={...re,cost:re.cost||0,costEstimate:re.cost||0,location:re.location||"",options:re.option||"",isSelected:!0,isLocal:re.isLocal!==void 0?re.isLocal:!0,stagingId:`staging_${Date.now()}_${re.id||Math.random()}`};console.log("Staged Procedure:",Se),m.value.push(Se),console.log("Updated staging list:",m.value)}},Ve=async re=>{if(!d.value.id||d.value.id==="0"){Pt("Please select a valid treatment plan first","error");return}try{console.log("Saving local procedure directly:",re);const ge=await mp(d.value.id,re.id,re.cost||0,"","","");if(ge.error)throw new Error(ge.error.message||"Failed to save procedure to treatment plan");await oe(),Pt(`"${re.procedureName}" added to treatment plan`,"success")}catch(ge){console.error("Error saving local procedure directly:",ge),Pt("Failed to add procedure to treatment plan","error")}},ft=async()=>{if(!d.value.id||d.value.id==="0"){Pt("Please select a valid treatment plan first","error");return}if(m.value.length===0){Pt("No procedures selected to save","warning");return}T.value=!0;let re=0;try{for(const ge of m.value)if(ge.isSelected){let Se=ge.id;if(!ge.isLocal&&!ge.id.toString().startsWith("staging_"))try{if(console.log("Creating local procedure for server procedure:",ge),!s.value)throw new Error("Doctor ID not available");const Ze=await sT(ge.procedureName,ge.cost||0,"",!0,ge.id.toString().replace("server_",""),ge.identifier||"",s.value);if(Ze.error)throw console.error("API Error Response:",Ze.error),new Error(Ze.error.message||"Failed to create local procedure entry");Se=Ze.data.id,console.log("Server procedure saved to local DB with ID:",Se)}catch(Ze){throw console.error("Error saving server procedure to local DB:",Ze),Ze}const Me=await mp(d.value.id,Se,ge.costEstimate||ge.cost||0,"",ge.location||"",ge.option||"");if(Me.error)throw new Error(Me.error.message||"Failed to save procedure to treatment plan");re++}re>0&&(m.value=[],await oe(),Pt(`${re} procedure(s) added to treatment plan successfully`,"success"))}catch(ge){console.error("Error saving procedures to treatment plan:",ge),Pt("Failed to save procedures to treatment plan","error")}finally{T.value=!1}},Ft=re=>{m.value=m.value.filter(ge=>ge.stagingId!==re)},tt=async()=>{if(!d.value?.id||d.value.id==="0"){Pt("Please select a valid treatment plan first","error");return}if(!f.value||f.value.length===0){Pt("No procedures to save","warning");return}U.value=!0;let re=0;try{for(const ge of f.value){const Se={cost_estimate:ge.costEstimate||ge.procedureCost||0,notes:ge.notes||"",location:ge.location||"",option:ge.option||"",status:ge.status||"proposed",start_date:ge.startDate||null,end_date:ge.endDate||null},Me=await sE(d.value.id,ge.id,Se);Me.error?console.error("Error saving procedure treatment:",ge.id,Me.error):re++}re>0?(Pt(`${re} procedure(s) saved successfully`,"success"),await oe()):Pt("No procedures were saved","warning")}catch(ge){console.error("Error saving procedure treatments:",ge),Pt("Failed to save procedure treatments","error")}finally{U.value=!1}},Ge=async re=>{(!re.costEstimate||re.costEstimate===0)&&(re.costEstimate=re.procedureCost||0),console.log("Final cost updated for procedure:",re.id,"New cost:",re.costEstimate)},pt=re=>{console.log("Edit procedure - original procedureTreatment:",re),console.log("ProcedureTreatment keys:",Object.keys(re)),console.log("ProcedureTreatment ID:",re.id),console.log("ProcedureTreatment procedure_id:",re.procedure_id),console.log("ProcedureTreatment procedure:",re.procedure),console.log("ProcedureTreatment costEstimate:",re.costEstimate),console.log("ProcedureTreatment cost_estimate:",re.cost_estimate);const ge={id:re.procedureId||re.procedure_id||re.procedure?.id,procedureName:re.procedureName||re.procedure_name||re.procedure?.procedureName,description:re.procedureDescription||re.procedure_description||re.procedure?.description||"",cost:re.procedureCost||re.procedure_cost||re.procedure?.cost||0,isLocal:re.isLocal||re.procedure?.isLocal||!0};console.log("Extracted actual procedure for editing:",ge),g.value=ge,v.value=!0},ht=async re=>{if(!d.value?.id||d.value.id==="0"){Pt("Please select a valid treatment plan first","error");return}try{console.log("Duplicating procedure:",re);const ge=re.procedureId||re.procedure_id,Se=re.costEstimate||re.cost_estimate||0;if(!ge){Pt("Unable to determine procedure ID for duplication","error");return}const Me=await mp(d.value.id,ge,Se,"","","");if(Me.error){console.error("Error duplicating procedure:",Me.error),Pt("Failed to duplicate procedure","error");return}await oe();const Ze=re.procedure?.procedure_name||re.procedureName||re.procedure_name||"procedure";Pt(`"${Ze}" duplicated successfully`,"success")}catch(ge){console.error("Error duplicating procedure:",ge),Pt("Failed to duplicate procedure","error")}},Nt=async re=>{if(console.log("New procedure created:",re),console.log("Local treatment plan:",d.value),console.log("Procedure ID:",re.id),console.log("Procedure cost:",re.cost),!d.value.id||d.value.id==="0"){console.error("No valid treatment plan selected"),Pt("Please select a valid treatment plan first","error");return}if(!re.id){console.error("No procedure ID received from creation"),Pt("Procedure was created but ID is missing","error");return}try{console.log("Making API call with:",{treatmentPlanId:d.value.id,procedureId:re.id,costEstimate:re.cost,notes:""});const ge=await mp(d.value.id,re.id,re.cost,"","","");if(console.log("API response:",ge),ge.error){console.error("API error details:",ge.error);const Se=ge.error.response?.data?.error||ge.error.message||"Failed to link procedure to treatment plan";throw new Error(Se)}await oe(),Pt("Procedure added to treatment plan successfully","success")}catch(ge){console.error("Error linking procedure to treatment plan:",ge),console.error("Error stack:",ge.stack);let Se="Failed to add procedure to treatment plan";ge.message&&(Se=ge.message),Pt(Se,"error")}},nn=()=>{h.value=!1},yn=()=>{v.value=!1,g.value=null},qn=re=>{w.value=re,y.value=!0},$t=()=>{y.value=!1,w.value=null},Tt=async re=>{console.log("Procedure treatment deleted:",re),await oe(),Pt("Procedure removed from treatment plan successfully","success")},ut=()=>{U.value||(N.value||(L.value={treatmentPlanName:d.value.treatmentPlanName||"",status:d.value.status||"proposed",startDate:d.value.startDate||"",endDate:d.value.endDate||"",followupDate:d.value.followupDate||"",notes:d.value.notes||"",isReminded:d.value.isReminded||!1}),N.value=!N.value)},kt=async()=>{if(!d.value?.id||d.value.id==="0"){Pt("Please select a valid treatment plan first","error");return}if(!L.value.treatmentPlanName?.trim()){Pt("Treatment plan name is required","error");return}U.value=!0;try{const re=await dt.put(`/treatmentplan/${d.value.id}`,{treatmentplan_name:L.value.treatmentPlanName,status:L.value.status,start_date:L.value.startDate||null,end_date:L.value.endDate||null,followup_date:L.value.followupDate||null,notes:L.value.notes||"",isReminded:L.value.isReminded||!1});if(!re.data.success)throw new Error(re.data.error||"Failed to update treatment plan");N.value=!1,L.value={},await Zt(),Pt("Treatment plan updated successfully","success")}catch(re){console.error("Error saving treatment plan changes:",re),Pt("Failed to update treatment plan","error")}finally{U.value=!1}},Zt=async()=>{try{const re=await df(d.value.id);if(re.error)throw new Error(re.error||"Failed to fetch treatment plan details");const ge=Hn.cloneDeep(re.data);d.value=ge,await oe(),await W(),a("update:treatmentPlan",ge),console.log("Emitted fresh treatment plan data to parent:",ge)}catch(re){console.error("Error refreshing treatment plan data after save:",re),a("update:treatmentPlan",Hn.cloneDeep(d.value))}},je=async re=>{console.log("Procedure updated:",re),await oe(),Pt("Procedure updated successfully","success")},Ke=()=>{if(!f.value)return;const re=ge=>{const Se=ge.start_date||ge.startDate,Me=ge.created_at||ge.createdAt;return Se?new Date(Se):Me?new Date(Me):new Date(0)};f.value.forEach(ge=>{if(!ce.value.has(ge.id)){const Se=ge.start_date||ge.startDate;ce.value.set(ge.id,{status:ge.status?.toLowerCase(),date:re(ge),startDate:Se||null})}})},wt=async re=>{if(!d.value?.id||d.value.id==="0"){Pt("Please select a valid treatment plan first","error");return}re.isUpdating=!0;try{console.log("Updating procedure treatment progress:",re),console.log("Procedure treatment keys:",Object.keys(re)),console.log("Treatment procedure ID:",re.id);const ge=re.id;if(!ge)throw console.error("No treatment procedure ID found in procedure treatment object"),new Error("Treatment procedure ID not found in treatment data");const Se={cost_estimate:re.costEstimate||re.cost_estimate||0,notes:re.notes||"",location:re.location||"",status:re.status||"proposed",start_date:re.startDate||"",end_date:re.endDate||""};console.log("Sending update with treatmentProcedureId:",ge,"updateData:",Se);const Me=await sE(d.value.id,ge,Se);if(Me.error)throw new Error(Me.error.message||"Failed to update procedure treatment");console.log("Update response:",Me),ce.value.delete(re.id),await oe(),Pt("Procedure progress updated successfully","success")}catch(ge){console.error("Error updating procedure treatment:",ge),Pt("Failed to update procedure progress","error")}finally{re.isUpdating=!1}},Vt=re=>{switch(re?.toLowerCase()){case"proposed":return"grey";case"ongoing":return"primary";case"completed":return"success";case"on_hold":return"warning";case"cancelled":return"error";default:return"grey"}},qt=re=>{const ge=new Set(F.value);if(ge.has(re))ge.delete(re);else{ge.add(re);const Se=f.value.find(Me=>Me.id===re);if(Se&&(Se.postProcedureCare===void 0||Se.postProcedureCare===null)){const Me=Se.procedure?.description||Se.procedureDescription||Se.procedure_description||Se.description||"";Se.postProcedureCare=Me,console.log("Initialized postProcedureCare from procedure description:",Me)}}F.value=ge},vt=re=>F.value.has(re),Kt=re=>{try{return new Date(re).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}catch{return re}},Pt=(re,ge="success")=>{se.value={show:!0,text:re,color:ge}},Gn=re=>{le.value=re,ie.value=!0},Nn=re=>{console.log("Progress notes transcription completed:",re),re&&re.trim()&&le.value&&(le.value.notes&&le.value.notes.trim()?le.value.notes+=" "+re:le.value.notes=re),ie.value=!1,le.value=null},On=(re,ge)=>{if(!re||!re.description||!ge)return;const Se=re.description||"",Me=ge.postProcedureCare||"";Me.trim()?ge.postProcedureCare=Me.trim()+", "+Se:ge.postProcedureCare=Se},Yt=re=>{Z.value=re,Q.value=!0},Tn=re=>{console.log("Post-procedure care transcription completed:",re),re&&re.trim()&&Z.value&&(Z.value.postProcedureCare&&Z.value.postProcedureCare.trim()?Z.value.postProcedureCare+=" "+re:Z.value.postProcedureCare=re),Q.value=!1,Z.value=null},Te=re=>{const ge=re?.contactNumber||re?.phoneNumber||re?.contact_number||re?.patient_phone;if(!ge)return!1;const Se=ge.replace(/\D/g,"");return Se.length===10||Se.length===12&&Se.startsWith("91")},He=async re=>{try{if(!o.value){c("Please select a doctor first");return}if(!Te(n.patient)){c("Patient contact number not available or invalid");return}if(!re.postProcedureCare||!re.postProcedureCare.trim()){c("Post-procedure care instructions are required");return}re.sendingWhatsApp=!0,console.log(" Sending post-procedure care instructions via WhatsApp");const ge={procedureName:re.procedure?.procedure_name||re.procedureName||re.procedure_name||"Procedure",postProcedureCare:re.postProcedureCare.trim(),startDate:re.startDate||re.start_date||d.value.startDate||new Date().toISOString().split("T")[0],procedure:re.procedure,treatmentPlan:d.value},Se=await wTe(ge,n.patient,o.value);if(Se.success){const Me=re.procedureId||re.procedure_id||re.procedure?.id;if(Me)try{await QM(Me,re.postProcedureCare.trim(),s.value),console.log(" Updated procedure.description with shared instructions")}catch(Ze){console.error(" Failed to update procedure.description:",Ze)}i(Se.message||"Post-procedure care instructions sent successfully")}else throw new Error(Se.error||"Failed to send post-procedure care instructions")}catch(ge){console.error(" WhatsApp post-procedure care failed:",ge),c(ge.message||"Failed to send post-procedure care instructions")}finally{re&&(re.sendingWhatsApp=!1)}},Ue=()=>"primary",Le=re=>{re.scalePercentage===void 0&&(re.scalePercentage=100),re.finalCost===void 0&&(re.finalCost=re.costEstimate||re.cost_estimate||re.procedure?.cost||0),re.option===void 0&&(re.option=re.option||""),re.isSelected===void 0&&(re.isSelected=!0),re.status===void 0&&(re.status="proposed"),re.startDate===void 0&&(re.startDate=""),re.endDate===void 0&&(re.endDate=""),re.notes===void 0&&(re.notes=""),re.isUpdating===void 0&&(re.isUpdating=!1),re.sendingWhatsApp===void 0&&(re.sendingWhatsApp=!1)},Qe=re=>{console.log("Treatment plan PDF generated:",re)},pe=async()=>{if(!s.value){console.warn("Doctor ID not available for loading print configurations"),J.value={};return}try{const{fetchPrintConfigs:re}=await xr(async()=>{const{fetchPrintConfigs:Se}=await Promise.resolve().then(()=>o_e);return{fetchPrintConfigs:Se}},void 0,import.meta.url),ge=await re(s.value);J.value=ge.data||{}}catch(re){console.error("Error loading print configurations:",re),J.value={}}};return cn(()=>{Ce(),pe(),d.value?.id&&d.value.id!=="0"&&oe()}),(re,ge)=>{const Se=I("v-tab"),Me=I("v-tooltip"),Ze=I("v-tabs"),nt=I("v-card"),et=I("v-col"),lt=I("v-row"),bt=I("v-progress-circular"),It=I("v-btn"),an=I("v-empty-state"),En=I("v-card-subtitle"),hn=I("v-icon"),Cn=I("v-chip"),Da=I("v-text-field"),Nr=I("v-textarea"),jr=I("v-select"),ys=I("v-switch"),_s=I("v-form"),Ga=I("v-expand-transition"),Qo=I("v-card-text"),ws=I("v-divider"),Lt=I("v-checkbox"),Br=I("v-alert"),Vn=I("v-tabs-window-item"),Co=I("v-tabs-window"),js=I("v-dialog"),$e=I("v-snackbar");return R(),me(ze,null,[l(lt,{"no-gutters":""},{default:u(()=>[l(et,null,{default:u(()=>[l(nt,{rounded:"0",class:"pa-1 patient-header-style",elevation:"0"},{default:u(()=>[l(Ze,{modelValue:A.value,"onUpdate:modelValue":[ge[0]||(ge[0]=ue=>A.value=ue),de],"align-tabs":"center",density:"compact",class:"interactive-tabs"},{default:u(()=>[l(Me,{text:"Treatment Plan"},{activator:u(({props:ue})=>[l(Se,Fe({value:"plan"},ue,{class:["tab-interactive",{"tab-active":A.value==="plan"}],tabindex:"-1"}),{default:u(()=>[...ge[17]||(ge[17]=[p("div",{class:"tab-content"}," PLAN ",-1)])]),_:1},16,["class"])]),_:1}),l(Me,{text:"Treatment Progress"},{activator:u(({props:ue})=>[l(Se,Fe({value:"progress"},ue,{class:["tab-interactive",{"tab-active":A.value==="progress"}],tabindex:"-1"}),{default:u(()=>[...ge[18]||(ge[18]=[p("div",{class:"tab-content"}," PROGRESS ",-1)])]),_:1},16,["class"])]),_:1}),l(Me,{text:"Share Treatment Plan"},{activator:u(({props:ue})=>[l(Se,Fe({value:"share"},ue,{class:["tab-interactive",{"tab-active":A.value==="share"}],tabindex:"-1"}),{default:u(()=>[...ge[19]||(ge[19]=[p("div",{class:"tab-content"}," SHARE PLAN ",-1)])]),_:1},16,["class"])]),_:1}),l(Me,{text:"Uploads"},{activator:u(({props:ue})=>[l(Se,Fe({value:"uploads"},ue,{class:["tab-interactive",{"tab-active":A.value==="uploads"}],tabindex:"-1"}),{default:u(()=>[...ge[20]||(ge[20]=[p("div",{class:"tab-content"}," UPLOADS ",-1)])]),_:1},16,["class"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(Co,{modelValue:A.value,"onUpdate:modelValue":ge[8]||(ge[8]=ue=>A.value=ue),class:"flex-grow-1"},{default:u(()=>[!e.treatmentPlan?.id&&A.value!=="uploads"?(R(),ve(lt,{key:0,"no-gutters":""},{default:u(()=>[l(et,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[l(bt,{indeterminate:"",color:"primary"})]),_:1})]),_:1})):e.treatmentPlan.id=="0"&&A.value!=="uploads"?(R(),ve(lt,{key:1,"no-gutters":""},{default:u(()=>[l(et,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%"}},{default:u(()=>[l(an,null,{title:u(()=>[...ge[21]||(ge[21]=[p("div",{class:"text-subtitle-2"}," No treatment plan selected ",-1)])]),text:u(()=>[p("div",bTe,[ge[23]||(ge[23]=O(" Create a new treatment plan or select an existing one ",-1)),ge[24]||(ge[24]=p("br",null,null,-1)),l(It,{class:"mt-2",onClick:Ae},{default:u(()=>[...ge[22]||(ge[22]=[O("Create Treatment Plan",-1)])]),_:1})])]),_:1})]),_:1})]),_:1})):_e("",!0),l(Vn,{value:"plan",class:"h-100"},{default:u(()=>[e.treatmentPlan?.id&&e.treatmentPlan.id!=="0"?(R(),ve(lt,{key:0,"no-gutters":"",class:"h-100"},{default:u(()=>[l(et,{cols:"12",class:"scroll-element",style:{"padding-bottom":"20px"}},{default:u(()=>[l(nt,{class:"form-section-card card-status-default mx-2 my-1 pa-3",elevation:"2"},{default:u(()=>[l(lt,{"no-gutters":"",class:"align-top"},{default:u(()=>[l(et,{cols:"2",class:"d-flex align-top"},{default:u(()=>[l(En,{class:"pa-0"},{default:u(()=>[...ge[25]||(ge[25]=[p("strong",null,"Treatment Plan Details",-1)])]),_:1})]),_:1}),l(et,{cols:"1"}),l(et,{cols:"6",class:"d-flex align-top flex-column"},{default:u(()=>[l(Zke,{doctorId:s.value,onTemplateSelected:De},null,8,["doctorId"]),S.value.length>0?(R(),me("div",xTe,[(R(!0),me(ze,null,Wt(S.value,ue=>(R(),ve(Cn,{key:ue.id,color:"primary",variant:"outlined",size:"small",closable:"","onClick:close":xt=>Je(ue.id),onClick:xt=>ye(ue),class:"cursor-pointer"},{default:u(()=>[O(q(ue.treatmentPlanName)+" ",1),l(hn,{end:"",size:"small",class:"ml-1"},{default:u(()=>[...ge[26]||(ge[26]=[O("mdi-pencil",-1)])]),_:1})]),_:2},1032,["onClick:close","onClick"]))),128))])):_e("",!0)]),_:1}),l(et,{cols:"3",class:"d-flex justify-end align-top"},{default:u(()=>[l(Me,{text:"Save as Template"},{activator:u(({props:ue})=>[l(It,Fe({variant:"outlined",size:"small",class:"d-flex align-center justify-center btn-hover-enhanced"},ue,{onClick:xe,disabled:!e.treatmentPlan?.id||e.treatmentPlan.id==="0",tabindex:"-1"}),{default:u(()=>[l(hn,{start:""},{default:u(()=>[...ge[27]||(ge[27]=[p("img",{src:fH,alt:"Save Template"},null,-1)])]),_:1}),ge[28]||(ge[28]=O(" Save as Template ",-1))]),_:1},16,["disabled"])]),_:1})]),_:1})]),_:1}),l(lt,{"no-gutters":"",class:"mt-2 mb-2"},{default:u(()=>[l(et,{cols:"11"},{default:u(()=>[p("div",CTe,[l(Cn,{color:"primary","text-color":"black",size:"small",density:"compact"},{default:u(()=>[p("strong",null,q(d.value?.treatmentPlanName||"New Treatment Plan"),1)]),_:1}),l(Cn,{size:"small",color:Ue(),variant:"outlined",density:"compact"},{default:u(()=>[O(q((d.value?.status||"proposed").charAt(0).toUpperCase()+(d.value?.status||"proposed").slice(1)),1)]),_:1},8,["color"]),d.value?.startDate?(R(),ve(Cn,{key:0,size:"small",variant:"outlined",color:"primary",density:"compact"},{default:u(()=>[O(" Start: "+q(Oe(bl)(d.value.startDate)),1)]),_:1})):_e("",!0),d.value?.endDate?(R(),ve(Cn,{key:1,size:"small",variant:"outlined",color:"primary",density:"compact"},{default:u(()=>[O(" End: "+q(Oe(bl)(d.value.endDate)),1)]),_:1})):_e("",!0),d.value?.followupDate?(R(),ve(Cn,{key:2,size:"small",variant:"outlined",color:"secondary",density:"compact"},{default:u(()=>[O(" Follow-up: "+q(Oe(bl)(d.value.followupDate)),1)]),_:1})):_e("",!0)])]),_:1}),l(et,{cols:"1",class:"d-flex flex-column justify-center align-center"},{default:u(()=>[l(Me,{text:N.value?"Collapse":"Edit Treatment Plan"},{activator:u(({props:ue})=>[l(hn,Fe(ue,{size:"small",color:"primary",class:"expand-hint cursor-pointer",disabled:!e.treatmentPlan?.id||e.treatmentPlan.id==="0"||U.value,onClick:ut}),{default:u(()=>[O(q(N.value?"mdi-chevron-up":"mdi-chevron-down"),1)]),_:1},16,["disabled"])]),_:1},8,["text"])]),_:1})]),_:1}),l(Ga,null,{default:u(()=>[N.value?(R(),me("div",STe,[l(_s,{onSubmit:mn(kt,["prevent"])},{default:u(()=>[l(lt,{"no-gutters":"",class:"mb-2 align-top"},{default:u(()=>[l(et,{cols:"10",class:"pr-2"},{default:u(()=>[l(Da,{modelValue:L.value.treatmentPlanName,"onUpdate:modelValue":ge[1]||(ge[1]=ue=>L.value.treatmentPlanName=ue),label:"Treatment Plan Name",variant:"outlined",density:"compact",required:"","hide-details":""},null,8,["modelValue"])]),_:1}),l(et,{cols:"2",class:"d-flex justify-center align-start"},{default:u(()=>[l(It,{color:"primary",size:"small",type:"submit",loading:U.value,disabled:!L.value.treatmentPlanName},{default:u(()=>[...ge[29]||(ge[29]=[O(" Save ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),l(lt,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(et,{cols:"10"},{default:u(()=>[l(Nr,{modelValue:L.value.notes,"onUpdate:modelValue":ge[2]||(ge[2]=ue=>L.value.notes=ue),label:"Notes",variant:"outlined",density:"compact",rows:"1","auto-grow":"","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),l(lt,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(et,{cols:"4",class:"pr-1"},{default:u(()=>[l(jr,{modelValue:L.value.status,"onUpdate:modelValue":ge[3]||(ge[3]=ue=>L.value.status=ue),items:G,label:"Status",variant:"outlined",density:"compact",required:"","hide-details":""},null,8,["modelValue"])]),_:1}),l(et,{cols:"3",class:"px-1"},{default:u(()=>[l(Da,{modelValue:L.value.startDate,"onUpdate:modelValue":ge[4]||(ge[4]=ue=>L.value.startDate=ue),label:"Start Date",type:"date",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),l(et,{cols:"3",class:"pl-1"},{default:u(()=>[l(Da,{modelValue:L.value.endDate,"onUpdate:modelValue":ge[5]||(ge[5]=ue=>L.value.endDate=ue),label:"End Date",type:"date",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),l(lt,{"no-gutters":"",class:"mb-0"},{default:u(()=>[l(et,{cols:"4",class:"pr-1"},{default:u(()=>[l(Da,{modelValue:L.value.followupDate,"onUpdate:modelValue":ge[6]||(ge[6]=ue=>L.value.followupDate=ue),label:"Follow-up Date",type:"date",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),l(et,{cols:"6",class:"pl-1 d-flex align-center"},{default:u(()=>[l(ys,{modelValue:L.value.isReminded,"onUpdate:modelValue":ge[7]||(ge[7]=ue=>L.value.isReminded=ue),label:L.value.isReminded?"Reminded":"Reminder Pending",color:"primary",density:"compact","hide-details":"","true-value":!0,"false-value":!1},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1})])):_e("",!0)]),_:1})]),_:1}),l(nt,{class:"form-section-card card-status-default mx-2 my-1 pa-3",elevation:"2"},{default:u(()=>[l(lt,{"no-gutters":""},{default:u(()=>[l(et,{cols:"12",class:"d-flex align-center"},{default:u(()=>[l(En,{class:"pa-0"},{default:u(()=>[...ge[30]||(ge[30]=[p("strong",null,"Cost and Payment Information",-1)])]),_:1}),k.value&&k.value.length===0?(R(),me("span",ETe,"- No payment receipts found")):_e("",!0)]),_:1})]),_:1}),f.value&&f.value.length>0?(R(),me("div",BTe,[l(nt,{class:"cost-breakdown-card",color:"blue-grey-lighten-5",elevation:"0",rounded:"lg"},{default:u(()=>[l(Qo,{class:"pa-3"},{default:u(()=>[l(lt,{"no-gutters":"",class:"justify-space-between align-center"},{default:u(()=>[l(et,null,{default:u(()=>[p("div",kTe,[ge[31]||(ge[31]=p("p",{class:"text-caption text-medium-emphasis mb-0"},"Base Cost",-1)),p("p",TTe,""+q(j.value.toLocaleString()),1)])]),_:1}),l(et,null,{default:u(()=>[p("div",ITe,[ge[32]||(ge[32]=p("p",{class:"text-caption text-medium-emphasis mb-0"},"Final Cost",-1)),p("p",FTe,""+q(ne.value.toLocaleString()),1)])]),_:1}),l(et,null,{default:u(()=>[p("div",PTe,[ge[33]||(ge[33]=p("p",{class:"text-caption text-medium-emphasis mb-0"},"Amount Due",-1)),p("p",DTe,""+q(H.value.toLocaleString()),1)])]),_:1}),l(et,null,{default:u(()=>[p("div",UTe,[ge[34]||(ge[34]=p("p",{class:"text-caption text-medium-emphasis mb-0"},"Amount Paid",-1)),p("p",RTe,""+q(te.value.toLocaleString()),1)])]),_:1}),l(et,null,{default:u(()=>[p("div",NTe,[ge[35]||(ge[35]=p("p",{class:"text-caption text-medium-emphasis mb-0"},"Amount Pending",-1)),p("p",{class:ct(["text-body-2 font-weight-medium mb-0",Y.value>0?"text-error":"text-success"])}," "+q(Y.value.toLocaleString()),3)])]),_:1})]),_:1}),j.value!==ne.value?(R(),ve(lt,{key:0,"no-gutters":"",class:"justify-space-between align-center mt-2"},{default:u(()=>[l(et),l(et,null,{default:u(()=>[p("div",VTe,[l(Cn,{size:"small",color:ne.value<j.value?"success":"warning",variant:"outlined",density:"compact"},{default:u(()=>[O(q(ne.value<j.value?""+(j.value-ne.value).toLocaleString()+" off":""+(ne.value-j.value).toLocaleString()+" markup"),1)]),_:1},8,["color"])])]),_:1}),l(et),l(et),l(et)]),_:1})):_e("",!0)]),_:1})]),_:1})])):_e("",!0),k.value?k.value.length>0?(R(),me("div",MTe,[(R(!0),me(ze,null,Wt(k.value,ue=>(R(),ve(nt,{key:ue.id,class:"payment-receipt-card ma-1 pa-2",variant:"outlined",rounded:"md"},{default:u(()=>[l(lt,{"no-gutters":"",align:"center"},{default:u(()=>[l(et,null,{default:u(()=>[p("div",OTe,[p("span",HTe,q(ue.identifier),1),l(ws,{vertical:"",class:"mx-2"}),p("span",$Te,q(Kt(ue.paymentReceiptDate)),1),l(ws,{vertical:"",class:"mx-2"}),p("span",QTe,[ge[36]||(ge[36]=p("strong",null,"Total:",-1)),O(" "+q((ue.totalAmount||0).toLocaleString()),1)]),l(ws,{vertical:"",class:"mx-2"}),p("span",GTe,[ge[37]||(ge[37]=p("strong",null,"Paid:",-1)),O(" "+q((ue.totalPaid||0).toLocaleString()),1)]),ue.balanceDue>0?(R(),me(ze,{key:0},[l(ws,{vertical:"",class:"mx-2"}),p("span",zTe,[ge[38]||(ge[38]=p("strong",null,"Balance:",-1)),O(" "+q(ue.balanceDue.toLocaleString()),1)])],64)):(R(),me(ze,{key:1},[l(ws,{vertical:"",class:"mx-2"}),l(Cn,{size:"x-small",color:"success",variant:"outlined",class:"receipt-status"},{default:u(()=>[...ge[39]||(ge[39]=[O(" Paid ",-1)])]),_:1})],64))])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))])):_e("",!0):(R(),me("div",LTe,[l(bt,{indeterminate:"",color:"primary",size:"24"})]))]),_:1}),l(nt,{class:"form-section-card card-status-default mx-2 my-1 pa-3",elevation:"2"},{default:u(()=>[l(lt,{"no-gutters":""},{default:u(()=>[l(et,{cols:"6",class:"d-flex align-top"},{default:u(()=>[l(En,{class:"pa-0"},{default:u(()=>[...ge[40]||(ge[40]=[p("strong",null,"Procedures",-1)])]),_:1})]),_:1}),l(et,{cols:"6",class:"d-flex justify-end align-center mb-2 gap-2"},{default:u(()=>[l(Me,{text:"Create Procedure"},{activator:u(({props:ue})=>[l(It,Fe({variant:"outlined",size:"small",class:"d-flex align-center justify-center btn-hover-enhanced"},ue,{onClick:rt,disabled:!e.treatmentPlan?.id||e.treatmentPlan.id==="0"}),{default:u(()=>[l(hn,{start:""},{default:u(()=>[...ge[41]||(ge[41]=[p("img",{src:PE,alt:"Create Procedure"},null,-1)])]),_:1}),ge[42]||(ge[42]=O(" Create Procedure ",-1))]),_:1},16,["disabled"])]),_:1})]),_:1})]),_:1}),l(lt,{"no-gutters":""},{default:u(()=>[l(et,{cols:"1"}),l(et,{cols:"10"},{default:u(()=>[l(Kke,{onHandleSearchedProcedures:it,onAddProcedure:rt})]),_:1})]),_:1}),m.value&&m.value.length>0?(R(),me("div",KTe,[l(lt,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(et,{cols:"8"},{default:u(()=>[p("h6",WTe,"Selected Procedures ("+q(m.value.filter(ue=>ue.isSelected).length)+")",1)]),_:1}),l(et,{cols:"4",class:"d-flex justify-end align-center"},{default:u(()=>[l(It,{color:"primary",size:"small",class:"btn-hover-enhanced",onClick:ft,loading:T.value,disabled:m.value.filter(ue=>ue.isSelected).length===0},{default:u(()=>[...ge[43]||(ge[43]=[O(" Save to Treatment Plan ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),(R(!0),me(ze,null,Wt(m.value,ue=>(R(),me("div",{key:ue.stagingId,class:"staging-row pa-3 mb-2",style:{border:"2px dashed rgba(var(--v-theme-primary), 0.3)","border-radius":"8px","background-color":"rgba(var(--v-theme-primary), 0.05)"}},[l(lt,{"no-gutters":""},{default:u(()=>[l(et,{cols:"3",class:"d-flex flex-column justify-start align-start"},{default:u(()=>[p("div",jTe,[p("h5",qTe,q(ue.procedureName||"Unknown Procedure"),1),l(hn,{size:"small",class:"text-medium-emphasis"},{default:u(()=>[p("img",{src:ue.isLocal?Oe(Md):Oe(iv),alt:ue.isLocal?"Local":"Server"},null,8,YTe)]),_:2},1024)])]),_:2},1024),l(et,{cols:"2",class:"px-2"},{default:u(()=>[ge[44]||(ge[44]=p("div",{class:"text-caption text-medium-emphasis"},"Location",-1)),l(Da,{modelValue:ue.location,"onUpdate:modelValue":xt=>ue.location=xt,variant:"underlined",density:"compact",placeholder:"e.g.#14,left leg","hide-details":"",class:"location-input"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(et,{cols:"2",class:"px-2"},{default:u(()=>[ge[45]||(ge[45]=p("div",{class:"text-caption text-medium-emphasis"},"Option",-1)),l(jr,{modelValue:ue.option,"onUpdate:modelValue":xt=>ue.option=xt,variant:"underlined",density:"compact",items:["","A","B","C","D"],placeholder:"Select","hide-details":"",class:"option-select"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(et,{cols:"2",class:"px-2"},{default:u(()=>[ge[46]||(ge[46]=p("div",{class:"text-caption text-medium-emphasis"},"Base Cost",-1)),l(Da,{modelValue:ue.cost,"onUpdate:modelValue":xt=>ue.cost=xt,modelModifiers:{number:!0},variant:"underlined",density:"compact",type:"number",min:"0",step:"0.01",prefix:"","hide-details":"",class:"base-cost-input",placeholder:ue.isLocal?"Set cost":"Server procedure",onInput:xt=>ue.costEstimate=ue.cost},null,8,["modelValue","onUpdate:modelValue","placeholder","onInput"])]),_:2},1024),l(et,{cols:"2",class:"px-2"},{default:u(()=>[ge[47]||(ge[47]=p("div",{class:"text-caption text-medium-emphasis"},"Estimate Cost",-1)),l(Da,{modelValue:ue.costEstimate,"onUpdate:modelValue":xt=>ue.costEstimate=xt,modelModifiers:{number:!0},variant:"underlined",density:"compact",type:"number",min:"0",step:"0.01",prefix:"","hide-details":"",class:"final-cost-input"},null,8,["modelValue","onUpdate:modelValue"]),ue.cost&&ue.costEstimate!==ue.cost?(R(),ve(Cn,{key:0,size:"small",color:ue.costEstimate<ue.cost?"success":"warning",variant:"outlined",density:"comfortable",class:"mt-1"},{default:u(()=>[O(q(ue.costEstimate<ue.cost?""+(ue.cost-ue.costEstimate).toLocaleString()+" off":""+(ue.costEstimate-ue.cost).toLocaleString()+" markup"),1)]),_:2},1032,["color"])):_e("",!0)]),_:2},1024),l(et,{cols:"1",class:"d-flex justify-end align-center"},{default:u(()=>[l(Me,{text:"Remove from staging"},{activator:u(({props:xt})=>[l(It,Fe({size:"small",icon:"",variant:"plain",onClick:Ut=>Ft(ue.stagingId),class:"edit-icon mr-2"},{ref_for:!0},xt),{default:u(()=>[l(hn,{size:"small",color:"error"},{default:u(()=>[...ge[48]||(ge[48]=[O("mdi-delete",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024),l(Lt,{modelValue:ue.isSelected,"onUpdate:modelValue":xt=>ue.isSelected=xt,"true-value":!0,"false-value":!1,density:"compact","hide-details":"",class:"treatment-checkbox"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]))),128))])):_e("",!0),m.value&&m.value.length>0&&f.value&&f.value.length>0?(R(),ve(ws,{key:1,class:"mx-4 my-2"})):_e("",!0),K.value?(R(),ve(Br,{key:2,type:"info",variant:"tonal",density:"compact",class:"mx-2 mb-2",icon:"mdi-information-outline",border:"start"},{default:u(()=>[...ge[49]||(ge[49]=[p("div",{class:"text-caption"}," Some procedures have options (A, B, C...) added to them. Please clear options once treatmentplan is finalized. ",-1)])]),_:1})):_e("",!0),p("div",XTe,[X.value&&X.value.length>0?(R(),ve(lt,{key:0,"no-gutters":"",class:"mb-2"},{default:u(()=>[l(et,{cols:"8",class:"d-flex justify-start align-center"},{default:u(()=>[p("h6",JTe,"Saved Procedures ("+q(X.value.filter(ue=>ue.isSelected&&ue.status?.toLowerCase()!=="cancelled").length)+")",1)]),_:1}),l(et,{cols:"4",class:"d-flex justify-end align-center"},{default:u(()=>[l(It,{color:"primary",size:"small",class:"btn-hover-enhanced",onClick:tt,loading:U.value,disabled:!X.value||X.value.length===0},{default:u(()=>[...ge[50]||(ge[50]=[O(" Save Changes ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1})):_e("",!0),X.value&&X.value.length>0?(R(!0),me(ze,{key:1},Wt(X.value,ue=>(R(),me("div",{key:ue.id,class:"procedure-item-card pa-2 mb-1",style:{border:"1px solid rgba(var(--v-theme-outline), 0.12)","border-radius":"12px","background-color":"rgba(var(--v-theme-surface), 0.5)"}},[l(lt,{"no-gutters":"",align:"center"},{default:u(()=>[l(et,{cols:"5",class:"pr-2"},{default:u(()=>[p("div",ZTe,[p("div",e4e,q(ue.procedure?.procedure_name||ue.procedureName||ue.procedure_name||"Unknown Procedure"),1)]),p("div",t4e,[O(" Base Cost "+q((ue.procedureCost||0).toLocaleString())+" ",1),l(Me,{text:"Edit Procedure"},{activator:u(({props:xt})=>[l(It,Fe({size:"x-small",icon:"",variant:"text",onClick:mn(Ut=>pt(ue),["stop"]),class:"edit-icon-btn"},{ref_for:!0},xt),{default:u(()=>[l(hn,{size:"14",color:"primary"},{default:u(()=>[...ge[51]||(ge[51]=[p("img",{src:qA},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)])]),_:2},1024),l(et,{cols:"2",class:"px-1"},{default:u(()=>[ge[52]||(ge[52]=p("div",{class:"text-caption text-medium-emphasis mb-1"},"Location",-1)),l(Da,{modelValue:ue.location,"onUpdate:modelValue":xt=>ue.location=xt,variant:"outlined",density:"compact",placeholder:"e.g.#14,left leg","hide-details":"",class:"location-input-field"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(et,{cols:"2",class:"px-1"},{default:u(()=>[ge[53]||(ge[53]=p("div",{class:"text-caption text-medium-emphasis mb-1"},"Option",-1)),l(jr,{modelValue:ue.option,"onUpdate:modelValue":xt=>ue.option=xt,variant:"outlined",density:"compact",items:["","A","B","C","D"],placeholder:"Select","hide-details":"",class:"option-select-field"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(et,{cols:"2",class:"px-1"},{default:u(()=>[ge[54]||(ge[54]=p("div",{class:"text-caption text-medium-emphasis mb-1"},"Final Cost",-1)),l(Da,{modelValue:ue.costEstimate,"onUpdate:modelValue":xt=>ue.costEstimate=xt,modelModifiers:{number:!0},variant:"outlined",density:"compact",type:"number",min:"0",step:"0.01",prefix:"","hide-details":"",class:"final-cost-input-field",onBlur:xt=>Ge(ue)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),_:2},1024),l(et,{cols:"1",class:"pl-1 d-flex justify-end align-center"},{default:u(()=>[p("div",n4e,[l(Me,{text:"Duplicate Procedure"},{activator:u(({props:xt})=>[l(It,Fe({size:"small",icon:"",variant:"text",onClick:Ut=>ht(ue),class:"edit-icon-btn"},{ref_for:!0},xt),{default:u(()=>[l(hn,{size:"18",color:"primary"},{default:u(()=>[...ge[55]||(ge[55]=[p("img",{src:PE},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024),l(Me,{text:"Remove Procedure"},{activator:u(({props:xt})=>[l(It,Fe({size:"small",icon:"",variant:"text",onClick:Ut=>qn(ue),class:"edit-icon-btn"},{ref_for:!0},xt),{default:u(()=>[l(hn,{size:"18",color:"error"},{default:u(()=>[...ge[56]||(ge[56]=[p("img",{src:mc},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)])]),_:2},1024)]),_:2},1024),l(lt,{"no-gutters":"",align:"center",class:"mt-1"},{default:u(()=>[l(et,{cols:"5",class:"pr-2"},{default:u(()=>[p("div",a4e,[l(Cn,{size:"small",color:Vt(ue.status),variant:"outlined",density:"compact",class:"text-caption"},{default:u(()=>[O(q((ue.status||"proposed").charAt(0).toUpperCase()+(ue.status||"proposed").slice(1).replace("_"," ")),1)]),_:2},1032,["color"])])]),_:2},1024),l(et,{cols:"2",class:"px-1"}),l(et,{cols:"2",class:"px-1"}),l(et,{cols:"2",class:"px-1"},{default:u(()=>[p("div",r4e,[ue.procedureCost&&ue.costEstimate!==ue.procedureCost?(R(),ve(Cn,{key:0,size:"small",color:ue.costEstimate<ue.procedureCost?"success":"warning",variant:"outlined",density:"compact",class:"text-caption"},{default:u(()=>[O(q(ue.costEstimate<ue.procedureCost?""+(ue.procedureCost-ue.costEstimate).toLocaleString()+" off":""+(ue.costEstimate-ue.procedureCost).toLocaleString()+" markup"),1)]),_:2},1032,["color"])):_e("",!0)])]),_:2},1024),l(et,{cols:"1",class:"pl-1"})]),_:2},1024)]))),128)):(R(),me("div",s4e,[...ge[57]||(ge[57]=[p("p",{class:"text-subtitle-1 text-medium-emphasis"},"No procedures added yet",-1),p("p",{class:"text-caption text-medium-emphasis"},"Add procedures to create a treatment plan",-1)])]))])]),_:1})]),_:1})]),_:1})):_e("",!0)]),_:1}),l(Vn,{value:"progress",class:"h-100"},{default:u(()=>[e.treatmentPlan?.id&&e.treatmentPlan.id!=="0"?(R(),ve(lt,{key:0,"no-gutters":"",class:"h-100"},{default:u(()=>[l(et,{cols:"12",class:"scroll-element",style:{"padding-bottom":"20px"}},{default:u(()=>[ae.value.unscheduled.length>0||ae.value.dateGroups.length>0?(R(),me(ze,{key:0},[ae.value.unscheduled.length>0?(R(),me("div",o4e,[p("div",i4e,[l(Cn,{color:"grey",variant:"elevated",size:"default",class:"date-chip-vertical","prepend-icon":"mdi-calendar-remove"},{default:u(()=>[...ge[58]||(ge[58]=[O(" Unscheduled ",-1)])]),_:1}),l(ws,{class:"ml-4"})]),(R(!0),me(ze,null,Wt(ae.value.unscheduled,ue=>(R(),me("div",{key:ue.id,class:"ma-2 mb-2"},[l(nt,{class:"form-section-card card-status-default pa-3 treatment-row"},{default:u(()=>[l(lt,{"no-gutters":"",class:"mb-2 procedure-header",onClick:xt=>qt(ue.id),style:{cursor:"pointer"}},{default:u(()=>[l(et,{cols:"11",class:"d-flex flex-column justify-start align-start"},{default:u(()=>[p("h5",l4e,q(ue.procedure?.procedure_name||ue.procedureName||ue.procedure_name||"Unknown Procedure"),1),p("div",u4e,[ue.location?(R(),ve(Cn,{key:0,size:"small",color:"blue-grey",variant:"outlined",density:"compact"},{default:u(()=>[O(q(ue.location),1)]),_:2},1024)):_e("",!0),l(Cn,{size:"small",color:Vt(ue.status),variant:"outlined",density:"compact"},{default:u(()=>[O(q((ue.status||"proposed").charAt(0).toUpperCase()+(ue.status||"proposed").slice(1).replace("_"," ")),1)]),_:2},1032,["color"])]),p("div",c4e,q(ue.procedure?.description||ue.description||ue.procedureDescription||""),1)]),_:2},1024),l(et,{cols:"1",class:"d-flex flex-column justify-center align-center"},{default:u(()=>[l(hn,{size:"small",color:"primary",class:"expand-hint"},{default:u(()=>[O(q(vt(ue.id)?"mdi-chevron-up":"mdi-chevron-down"),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]),l(Ga,null,{default:u(()=>[Aa(p("div",null,[l(lt,{"no-gutters":"",class:"mb-4 align-center"},{default:u(()=>[l(et,{cols:"12",md:"3",class:"pr-2"},{default:u(()=>[l(Da,{modelValue:ue.startDate,"onUpdate:modelValue":xt=>ue.startDate=xt,label:"Start Date",variant:"outlined",density:"compact",type:"date","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(et,{cols:"12",md:"3",class:"px-1"},{default:u(()=>[l(Da,{modelValue:ue.endDate,"onUpdate:modelValue":xt=>ue.endDate=xt,label:"End Date",variant:"outlined",density:"compact",type:"date","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(et,{cols:"12",md:"2",class:"px-1"},{default:u(()=>[l(jr,{modelValue:ue.status,"onUpdate:modelValue":xt=>ue.status=xt,label:"Status",variant:"outlined",density:"compact",items:D,"hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(et,{cols:"12",md:"4",class:"d-flex justify-end gap-2 pl-2"},{default:u(()=>[l(It,{color:"primary",variant:"flat",size:"small",class:"btn-hover-enhanced",loading:ue.isUpdating,onClick:mn(xt=>wt(ue),["stop"])},{default:u(()=>[...ge[59]||(ge[59]=[O(" Save ",-1)])]),_:1},8,["loading","onClick"])]),_:2},1024)]),_:2},1024),l(lt,{"no-gutters":"",class:"mt-2"},{default:u(()=>[l(et,{cols:"12"},{default:u(()=>[l(lt,{"no-gutters":"",class:"mb-1 mx-2"},{default:u(()=>[l(et,{cols:"11"},{default:u(()=>[l(Nr,{modelValue:ue.notes,"onUpdate:modelValue":xt=>ue.notes=xt,label:"Notes",variant:"underlined",density:"compact",rows:"2","auto-grow":"",clearable:"","hide-details":"",placeholder:"Add notes about procedure progress..."},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(et,{cols:"1",class:"d-flex align-center justify-center"},{default:u(()=>[l(Me,{text:"Voice Input"},{activator:u(({props:xt})=>[l(It,Fe({icon:"mdi-microphone",rounded:"xls",variant:"flat",color:"primary",size:"small"},{ref_for:!0},xt,{onClick:Ut=>Gn(ue),tabindex:"-1",class:"dictation-btn"}),null,16,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),l(lt,{"no-gutters":"",class:"mt-4"},{default:u(()=>[l(et,{cols:"12",class:"px-2"},{default:u(()=>[l(nt,{variant:"outlined",class:"pa-3 post-procedure-care-card"},{default:u(()=>[l(En,{class:"text-subtitle-2 pa-0 mb-2"},{default:u(()=>[...ge[60]||(ge[60]=[O(" Post-Procedure Care Instructions ",-1)])]),_:1}),l(lt,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(et,{cols:"10"},{default:u(()=>[l(dR,{"doctor-id":s.value,onPostProcedureCareSelected:xt=>On(xt,ue)},null,8,["doctor-id","onPostProcedureCareSelected"])]),_:2},1024),l(et,{cols:"2"})]),_:2},1024),l(lt,{"no-gutters":""},{default:u(()=>[l(et,{cols:"10"},{default:u(()=>[l(Nr,{modelValue:ue.postProcedureCare,"onUpdate:modelValue":xt=>ue.postProcedureCare=xt,label:"Instructions",variant:"underlined",density:"compact",rows:"2","auto-grow":"",clearable:"","hide-details":"",placeholder:"Enter post-procedure care instructions..."},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(et,{cols:"1",class:"d-flex align-center justify-center"},{default:u(()=>[l(Me,{text:"Voice Input"},{activator:u(({props:xt})=>[l(It,Fe({icon:"mdi-microphone",rounded:"xls",variant:"flat",color:"primary",size:"small"},{ref_for:!0},xt,{onClick:Ut=>Yt(ue),tabindex:"-1",class:"dictation-btn"}),null,16,["onClick"])]),_:2},1024)]),_:2},1024),l(et,{cols:"1",class:"d-flex align-center justify-center"},{default:u(()=>[l(Me,{text:"Share via WhatsApp"},{activator:u(({props:xt})=>[l(It,Fe({icon:"",rounded:"xls",variant:"flat",color:"success",size:"small"},{ref_for:!0},xt,{onClick:Ut=>He(ue),loading:ue.sendingWhatsApp,disabled:!ue.postProcedureCare||!ue.postProcedureCare.trim(),tabindex:"-1",class:"whatsapp-btn"}),{default:u(()=>[l(hn,{size:"small"},{default:u(()=>[...ge[61]||(ge[61]=[p("img",{src:z_,alt:"WhatsApp",style:{width:"18px",height:"18px"}},null,-1)])]),_:1})]),_:1},16,["onClick","loading","disabled"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)],512),[[ai,vt(ue.id)]])]),_:2},1024)]),_:2},1024)]))),128))])):_e("",!0),(R(!0),me(ze,null,Wt(ae.value.dateGroups,(ue,xt)=>(R(),me("div",{key:`date-${xt}`,class:"date-section mb-4"},[p("div",{class:"date-header-vertical mb-3",style:Rt((xt===0&&ae.value.unscheduled.length===0?"margin-top: 16px;":"")+" margin-left: 8px;")},[l(Cn,{color:"primary",variant:"elevated",size:"default",class:"date-chip-vertical","prepend-icon":"mdi-calendar",title:ue.fullDate||ue.date},{default:u(()=>[O(q(ue.date),1)]),_:2},1032,["title"]),l(ws,{class:"ml-4"})],4),(R(!0),me(ze,null,Wt(ue.procedures,Ut=>(R(),me("div",{key:Ut.id,class:"ma-2 mb-2"},[l(nt,{class:"form-section-card card-status-default pa-3 treatment-row"},{default:u(()=>[l(lt,{"no-gutters":"",class:"mb-2 procedure-header",onClick:_t=>qt(Ut.id),style:{cursor:"pointer"}},{default:u(()=>[l(et,{cols:"11",class:"d-flex flex-column justify-start align-start"},{default:u(()=>[p("h5",d4e,q(Ut.procedure?.procedure_name||Ut.procedureName||Ut.procedure_name||"Unknown Procedure"),1),p("div",A4e,[Ut.location?(R(),ve(Cn,{key:0,size:"small",color:"blue-grey",variant:"outlined",density:"compact"},{default:u(()=>[O(q(Ut.location),1)]),_:2},1024)):_e("",!0),l(Cn,{size:"small",color:Vt(Ut.status),variant:"outlined",density:"compact"},{default:u(()=>[O(q((Ut.status||"proposed").charAt(0).toUpperCase()+(Ut.status||"proposed").slice(1).replace("_"," ")),1)]),_:2},1032,["color"])]),p("div",f4e,q(Ut.procedure?.description||Ut.description||Ut.procedureDescription||""),1)]),_:2},1024),l(et,{cols:"1",class:"d-flex flex-column justify-center align-center"},{default:u(()=>[l(hn,{size:"small",color:"primary",class:"expand-hint"},{default:u(()=>[O(q(vt(Ut.id)?"mdi-chevron-up":"mdi-chevron-down"),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]),l(Ga,null,{default:u(()=>[Aa(p("div",null,[l(lt,{"no-gutters":"",class:"mb-4 align-center"},{default:u(()=>[l(et,{cols:"12",md:"3",class:"pr-2"},{default:u(()=>[l(Da,{modelValue:Ut.startDate,"onUpdate:modelValue":_t=>Ut.startDate=_t,label:"Start Date",variant:"outlined",density:"compact",type:"date","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(et,{cols:"12",md:"3",class:"px-1"},{default:u(()=>[l(Da,{modelValue:Ut.endDate,"onUpdate:modelValue":_t=>Ut.endDate=_t,label:"End Date",variant:"outlined",density:"compact",type:"date","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(et,{cols:"12",md:"2",class:"px-1"},{default:u(()=>[l(jr,{modelValue:Ut.status,"onUpdate:modelValue":_t=>Ut.status=_t,label:"Status",variant:"outlined",density:"compact",items:D,"hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(et,{cols:"12",md:"4",class:"d-flex justify-end gap-2 pl-2"},{default:u(()=>[l(It,{color:"primary",variant:"flat",size:"small",class:"btn-hover-enhanced",loading:Ut.isUpdating,onClick:mn(_t=>wt(Ut),["stop"])},{default:u(()=>[...ge[62]||(ge[62]=[O(" Save ",-1)])]),_:1},8,["loading","onClick"])]),_:2},1024)]),_:2},1024),l(lt,{"no-gutters":"",class:"mt-2"},{default:u(()=>[l(et,{cols:"12"},{default:u(()=>[l(lt,{"no-gutters":"",class:"mb-1 mx-2"},{default:u(()=>[l(et,{cols:"11"},{default:u(()=>[l(Nr,{modelValue:Ut.notes,"onUpdate:modelValue":_t=>Ut.notes=_t,label:"Notes",variant:"underlined",density:"compact",rows:"2","auto-grow":"",clearable:"","hide-details":"",placeholder:"Add notes about procedure progress..."},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(et,{cols:"1",class:"d-flex align-center justify-center"},{default:u(()=>[l(Me,{text:"Voice Input"},{activator:u(({props:_t})=>[l(It,Fe({icon:"mdi-microphone",rounded:"xls",variant:"flat",color:"primary",size:"small"},{ref_for:!0},_t,{onClick:dn=>Gn(Ut),tabindex:"-1",class:"dictation-btn"}),null,16,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),l(lt,{"no-gutters":"",class:"mt-4"},{default:u(()=>[l(et,{cols:"12",class:"px-2"},{default:u(()=>[l(nt,{variant:"outlined",class:"pa-3 post-procedure-care-card"},{default:u(()=>[l(En,{class:"text-subtitle-2 pa-0 mb-2"},{default:u(()=>[...ge[63]||(ge[63]=[O(" Post-Procedure Care Instructions ",-1)])]),_:1}),l(lt,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(et,{cols:"10"},{default:u(()=>[l(dR,{"doctor-id":s.value,onPostProcedureCareSelected:_t=>On(_t,Ut)},null,8,["doctor-id","onPostProcedureCareSelected"])]),_:2},1024),l(et,{cols:"2"})]),_:2},1024),l(lt,{"no-gutters":""},{default:u(()=>[l(et,{cols:"10"},{default:u(()=>[l(Nr,{modelValue:Ut.postProcedureCare,"onUpdate:modelValue":_t=>Ut.postProcedureCare=_t,label:"Instructions",variant:"underlined",density:"compact",rows:"2","auto-grow":"",clearable:"","hide-details":"",placeholder:"Enter post-procedure care instructions..."},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(et,{cols:"1",class:"d-flex align-center justify-center"},{default:u(()=>[l(Me,{text:"Voice Input"},{activator:u(({props:_t})=>[l(It,Fe({icon:"mdi-microphone",rounded:"xls",variant:"flat",color:"primary",size:"small"},{ref_for:!0},_t,{onClick:dn=>Yt(Ut),tabindex:"-1",class:"dictation-btn"}),null,16,["onClick"])]),_:2},1024)]),_:2},1024),l(et,{cols:"1",class:"d-flex align-center justify-center"},{default:u(()=>[l(Me,{text:"Share via WhatsApp"},{activator:u(({props:_t})=>[l(It,Fe({icon:"",rounded:"xls",variant:"flat",color:"success",size:"small"},{ref_for:!0},_t,{onClick:dn=>He(Ut),loading:Ut.sendingWhatsApp,disabled:!Ut.postProcedureCare||!Ut.postProcedureCare.trim(),tabindex:"-1",class:"whatsapp-btn"}),{default:u(()=>[l(hn,{size:"small"},{default:u(()=>[...ge[64]||(ge[64]=[p("img",{src:z_,alt:"WhatsApp",style:{width:"18px",height:"18px"}},null,-1)])]),_:1})]),_:1},16,["onClick","loading","disabled"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)],512),[[ai,vt(Ut.id)]])]),_:2},1024)]),_:2},1024)]))),128))]))),128))],64)):(R(),me("div",m4e,[l(hn,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...ge[65]||(ge[65]=[p("img",{src:FE},null,-1)])]),_:1}),ge[66]||(ge[66]=p("p",{class:"text-subtitle-1 text-medium-emphasis"},"No procedures to track",-1)),ge[67]||(ge[67]=p("p",{class:"text-caption text-medium-emphasis"},"Add procedures to the treatment plan first",-1))]))]),_:1})]),_:1})):_e("",!0)]),_:1}),l(Vn,{value:"share",class:"h-100"},{default:u(()=>[e.treatmentPlan?.id&&e.treatmentPlan.id!=="0"?(R(),ve(lt,{key:0,"no-gutters":"",class:"h-100"},{default:u(()=>[l(et,{cols:"12"},{default:u(()=>[l(ov,{"content-type":"treatment-plan",data:{treatmentPlan:d.value,procedureTreatments:f.value,paymentReceipts:k.value,printConfigurations:J.value},patient:e.patient,onPdfGenerated:Qe},null,8,["data","patient"])]),_:1})]),_:1})):_e("",!0)]),_:1}),l(Vn,{value:"uploads",class:"h-100"},{default:u(()=>[l(lt,{"no-gutters":"","aria-label":"toolbar",class:"h-100"},{default:u(()=>[l(et,{cols:"12"},{default:u(()=>[l(zH,{procedure:d.value,patient:e.patient},null,8,["procedure","patient"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(js,{modelValue:h.value,"onUpdate:modelValue":ge[9]||(ge[9]=ue=>h.value=ue),"max-width":"500px",persistent:""},{default:u(()=>[l(Mke,{onClose:nn,"onUpdate:procedurelist":Nt})]),_:1},8,["modelValue"]),l(js,{modelValue:v.value,"onUpdate:modelValue":ge[10]||(ge[10]=ue=>v.value=ue),"max-width":"500px",persistent:""},{default:u(()=>[g.value?(R(),ve(Oke,{key:0,procedure:g.value,onClose:yn,onProcedureUpdated:je},null,8,["procedure"])):_e("",!0)]),_:1},8,["modelValue"]),l(js,{modelValue:y.value,"onUpdate:modelValue":ge[11]||(ge[11]=ue=>y.value=ue),"max-width":"500px",persistent:""},{default:u(()=>[w.value&&y.value?(R(),ve(Hke,{key:0,"procedure-treatment":w.value,"treatment-plan-id":e.treatmentPlan?.id,onClose:$t,onDeleted:Tt},null,8,["procedure-treatment","treatment-plan-id"])):_e("",!0)]),_:1},8,["modelValue"]),l(Gp,{modelValue:ie.value,"onUpdate:modelValue":ge[12]||(ge[12]=ue=>ie.value=ue),"current-text":le.value?.notes||"",label:"Progress Notes",onTranscriptionComplete:Nn},null,8,["modelValue","current-text"]),l(Gp,{modelValue:Q.value,"onUpdate:modelValue":ge[13]||(ge[13]=ue=>Q.value=ue),"current-text":Z.value?.postProcedureCare||"",label:"Post-Procedure Care Instructions",onTranscriptionComplete:Tn},null,8,["modelValue","current-text"]),l(js,{modelValue:E.value,"onUpdate:modelValue":ge[14]||(ge[14]=ue=>E.value=ue),"max-width":"800",persistent:""},{default:u(()=>[l(sTe,{treatmentPlanName:d.value?.treatmentPlanName||"",notes:d.value?.notes||"",procedureList:f.value||[],doctorId:s.value,onClose:ke,"onUpdate&close":Ee},null,8,["treatmentPlanName","notes","procedureList","doctorId"])]),_:1},8,["modelValue"]),l(js,{modelValue:C.value,"onUpdate:modelValue":ge[15]||(ge[15]=ue=>C.value=ue),"max-width":"800",persistent:""},{default:u(()=>[P.value?(R(),ve(hTe,{key:0,selectedTemplate:P.value,procedureList:f.value||[],onClose:we,"onUpdate&close":at},null,8,["selectedTemplate","procedureList"])):_e("",!0)]),_:1},8,["modelValue"]),l($e,{modelValue:se.value.show,"onUpdate:modelValue":ge[16]||(ge[16]=ue=>se.value.show=ue),color:se.value.color,class:"elevation-24"},{default:u(()=>[O(q(se.value.text),1)]),_:1},8,["modelValue","color"])],64)}}},v4e=Xt(h4e,[["__scopeId","data-v-7e8477a1"]]),p4e={class:"d-flex age-dob-container",style:{gap:"8px"}},g4e={class:"d-flex justify-center"},y4e={__name:"edit-patient-details",props:{patient:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=e,a=t,r=M({id:n.patient.id,name:n.patient.name||"",age:n.patient.age||"",birthDate:"",gender:n.patient.gender||"",contactNumber:n.patient.contactNumber||"",email:n.patient.email||"",address:n.patient.address||"",note:n.patient.note||""}),s=M("dob"),o=M("");cn(()=>{if(n.patient.birthDate){let f="";typeof n.patient.birthDate=="string"?f=n.patient.birthDate:typeof n.patient.birthDate=="number"&&(f=ahe(n.patient.birthDate)),f&&(r.value.birthDate=f,s.value="dob")}else s.value="dob"}),We(s,f=>{f==="age"?(r.value.birthDate&&(o.value=r.value.birthDate),r.value.birthDate=""):o.value&&(r.value.birthDate=o.value)});const i=f=>{if(s.value==="dob")if(f){o.value=f;const m=Zk(f);m!==null&&(r.value.age=m.toString())}else o.value=""},c=M(!1),A=()=>{a("close")},d=async()=>{const f={...r.value,name:r.value.name||"",age:r.value.age||"",gender:r.value.gender||"",contactNumber:r.value.contactNumber||"",email:r.value.email||"",address:r.value.address||"",note:r.value.note||""};if(s.value==="dob"&&f.birthDate){const h=cd(f.birthDate);h!==null?f.birthDate=h.toString():f.birthDate=""}else delete f.birthDate;const m=await nhe(f);m&&!m.error?(console.log("Patient updated successfully"),a("close",r.value)):(console.error("Error updating patient"),a("close"))};return(f,m)=>{const h=I("v-card-title"),v=I("v-col"),y=I("v-icon"),g=I("v-btn"),w=I("v-row"),b=I("v-card"),x=I("v-text-field"),T=I("v-btn-toggle"),U=I("v-select"),k=I("v-textarea"),S=I("v-divider"),E=I("v-form");return R(),ve(b,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[l(w,{"no-gutters":""},{default:u(()=>[l(v,{cols:"12"},{default:u(()=>[l(b,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(w,{"no-gutters":""},{default:u(()=>[l(v,{cols:"11"},{default:u(()=>[l(h,{class:"pa-0 pl-2"},{default:u(()=>[...m[12]||(m[12]=[O("Edit patient details",-1)])]),_:1})]),_:1}),l(v,{cols:"1",class:"d-flex justify-end align-center"},{default:u(()=>[l(g,{icon:"",size:"x-small",onClick:A},{default:u(()=>[l(y,null,{default:u(()=>[...m[13]||(m[13]=[p("img",{src:Yl,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(w,{"no-gutters":""},{default:u(()=>[l(v,{cols:"12"},{default:u(()=>[l(b,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(E,{modelValue:c.value,"onUpdate:modelValue":m[11]||(m[11]=C=>c.value=C),"validate-on":"blur"},{default:u(()=>[l(w,{"no-gutters":""},{default:u(()=>[l(v,{cols:"12",class:"my-2"},{default:u(()=>[l(x,{label:"Name *",variant:"outlined",modelValue:r.value.name,"onUpdate:modelValue":m[0]||(m[0]=C=>r.value.name=C),clearable:"",density:"compact",rules:Oe(sr)},null,8,["modelValue","rules"])]),_:1}),l(v,{cols:"12",class:"mb-2"},{default:u(()=>[l(x,{label:"Contact Number *",variant:"outlined",modelValue:r.value.contactNumber,"onUpdate:modelValue":m[1]||(m[1]=C=>r.value.contactNumber=C),type:"tel",rules:Oe(tv),clearable:"",density:"compact"},null,8,["modelValue","rules"])]),_:1}),l(v,{cols:"12",class:"mb-2"},{default:u(()=>[p("div",p4e,[l(T,{modelValue:s.value,"onUpdate:modelValue":m[2]||(m[2]=C=>s.value=C),mandatory:"",density:"compact",variant:"outlined",divided:"",class:"age-dob-toggle"},{default:u(()=>[l(g,{value:"dob",size:"small"},{default:u(()=>[...m[14]||(m[14]=[O("DOB",-1)])]),_:1}),l(g,{value:"age",size:"small"},{default:u(()=>[...m[15]||(m[15]=[O("AGE",-1)])]),_:1})]),_:1},8,["modelValue"]),s.value==="age"?(R(),ve(x,{key:0,label:"Age (yrs) *",variant:"outlined",modelValue:r.value.age,"onUpdate:modelValue":m[3]||(m[3]=C=>r.value.age=C),clearable:"",density:"compact",rules:Oe(eT),disabled:!!r.value.birthDate||!!o.value,class:"flex-grow-1"},null,8,["modelValue","rules","disabled"])):(R(),ve(x,{key:1,label:"Date of Birth *",variant:"outlined",modelValue:r.value.birthDate,"onUpdate:modelValue":[m[4]||(m[4]=C=>r.value.birthDate=C),i],type:"date",clearable:"",density:"compact",rules:Oe(tT),class:"flex-grow-1 date-input",onClick:m[5]||(m[5]=C=>C.target.showPicker&&C.target.showPicker())},null,8,["modelValue","rules"]))])]),_:1}),l(v,{cols:"12",class:"mb-2"},{default:u(()=>[l(U,{modelValue:r.value.gender,"onUpdate:modelValue":m[6]||(m[6]=C=>r.value.gender=C),items:["Male","Female"],label:"Gender *",required:"",clearable:"",variant:"outlined",density:"compact",rules:Oe(nT)},null,8,["modelValue","rules"])]),_:1}),l(v,{cols:"12",class:"mb-2"},{default:u(()=>[l(x,{label:"Email (optional)",variant:"outlined",modelValue:r.value.email,"onUpdate:modelValue":m[7]||(m[7]=C=>r.value.email=C),clearable:"",density:"compact",rules:Oe(mg)},null,8,["modelValue","rules"])]),_:1}),l(v,{cols:"12",class:"mb-2"},{default:u(()=>[l(x,{label:"Address (optional)",variant:"outlined",modelValue:r.value.address,"onUpdate:modelValue":m[8]||(m[8]=C=>r.value.address=C),clearable:"",density:"compact"},null,8,["modelValue"])]),_:1}),l(v,{cols:"12",class:"mb-2"},{default:u(()=>[l(k,{label:"Patient Notes (optional)",variant:"outlined",modelValue:r.value.note,"onUpdate:modelValue":m[9]||(m[9]=C=>r.value.note=C),clearable:"",density:"compact",rows:"3","auto-grow":""},null,8,["modelValue"])]),_:1}),l(v,{cols:"12"},{default:u(()=>[l(S,{class:"mb-2"}),p("div",g4e,[l(g,{variant:"outlined",onClick:m[10]||(m[10]=C=>d()),disabled:!c.value},{default:u(()=>[...m[16]||(m[16]=[O("Update Patient",-1)])]),_:1},8,["disabled"])])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},_4e=Xt(y4e,[["__scopeId","data-v-9b0284ef"]]),w4e={__name:"delete-consultation",props:{deleteConsult:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=e,a=t,r=M(n.deleteConsult),s=()=>{a("close")},o=async i=>{i.status="CANCELLED";const c=await BM(i);c.error?console.error("Consultation delete failed",c.error):console.error("Consultation delete successful"),s()};return(i,c)=>{const A=I("v-card-title"),d=I("v-col"),f=I("v-icon"),m=I("v-btn"),h=I("v-row"),v=I("v-card"),y=I("v-card-text"),g=I("v-divider");return R(),ve(v,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(v,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"11"},{default:u(()=>[l(A,{class:"pa-0 pl-2"},{default:u(()=>[...c[1]||(c[1]=[O("Confirm Consultation Delete",-1)])]),_:1})]),_:1}),l(d,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(m,{icon:"",size:"x-small",onClick:s},{default:u(()=>[l(f,null,{default:u(()=>[...c[2]||(c[2]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(v,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(y,{class:"text-left"},{default:u(()=>[...c[3]||(c[3]=[O(" Are you sure you want to delete this consultation? You will not be able to recover data once deleted. ",-1)])]),_:1})]),_:1})]),_:1}),l(g),l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"2"}),l(d,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(m,{variant:"outlined",onClick:c[0]||(c[0]=w=>o(r.value))},{default:u(()=>[...c[4]||(c[4]=[O("Yes, Delete Consultation",-1)])]),_:1})]),_:1}),l(d,{cols:"2"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},b4e={class:"text-center"},x4e={class:"patient-header w-100"},C4e={class:"d-flex align-center flex-wrap justify-center"},S4e={class:"text-body-2 font-weight-bold"},E4e={class:"text-subtitle-2 ml-2 text-medium-emphasis"},B4e={key:0,class:"patient-note-inline-same-row"},k4e={class:"text-caption text-black font-style-italic"},T4e={key:1,class:"patient-note-inline-same-row",style:{opacity:"0.7"}},I4e={class:"scrollable-content"},F4e={class:"d-flex justify-start section-header"},P4e={class:"scroll-hover",style:{height:"calc(100% - 8px)"}},D4e={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},U4e={key:0},R4e={key:1,class:"text-caption text-medium-emphasis"},N4e={class:"d-flex align-center justify-center"},V4e={key:1,class:"text-center pa-4"},L4e={class:"scroll-hover",style:{height:"calc(100% - 8px)"}},M4e={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},O4e={class:"text-caption text-medium-emphasis mb-1"},H4e={class:"d-flex align-center justify-center"},$4e={key:2,class:"text-center pa-4"},Q4e={class:"scrollable-content"},G4e={__name:"patient-detail-page",setup(e){const t=ea(),n=Gh(),a=Zi(),{hasPermission:r}=Zh(),s=M(n.params.id),o=M([]),i=M([]),c=M(!0),A=M({}),d=M({}),f=M(!1),m=M(""),h=M(!1),v=M(""),y=ee(()=>t.state.doctorModule.doctorId),g=M(null),w=M(null),b=M(!0),x=ee(()=>t.getters["doctorModule/isProcedurePrimary"]),T=ee(()=>{const ke=[],Ee=n.query.from;return Ee==="patients-landing-page"?ke.push({text:"Patients",to:{path:"/patients"},icon:"mdi-arrow-left",iconClass:"mr-1"}):Ee==="research"?ke.push({text:"Research",to:{path:"/research"},icon:"mdi-arrow-left",iconClass:"mr-1"}):Ee==="data"?ke.push({text:"Data",to:{path:"/data"},icon:"mdi-arrow-left",iconClass:"mr-1"}):Ee==="home"?ke.push({text:"Home",to:{path:"/home"},icon:"mdi-arrow-left",iconClass:"mr-1"}):ke.push({text:"Patients",to:{path:"/patients"},icon:"mdi-arrow-left",iconClass:"mr-1"}),ke}),U=M("consultations"),k=M([]),S=M({id:"0"}),E=M(!1),C=M(!1);We(y,async(ke,Ee)=>{if(ke&&Ee&&ke!==Ee&&d.value?.id){console.log(" Doctor changed from",Ee,"to",ke,"- refreshing consultations and procedures");try{const ye=await qy(d.value.id,ke);ye.error||(o.value=Hn.cloneDeep(ye.data)),await oe(),await Y(),S.value={id:"0"},E.value=!1}catch(ye){console.error("Error refreshing data after doctor change:",ye),h.value=!0,v.value="Failed to refresh data for new doctor"}}}),Gl(async()=>{try{if(U.value=x.value?"procedures":"consultations",await j(),!s.value)throw new Error("No patient ID provided");if(!y.value)throw new Error("No doctor ID available - please select a doctor first");console.log(" Initializing patient detail page - Patient:",s.value,"Doctor:",y.value);const ke=await Xk(s.value);if(ke.error)throw new Error(`Failed to load patient: ${ke.error.message}`);d.value=Hn.cloneDeep(ke.data),console.log(" Fetching consultations for patient:",d.value.id,"doctor:",y.value);const Ee=await qy(d.value.id,y.value);if(Ee.error)throw new Error(`Failed to load consultations: ${Ee.error.message}`);console.log(" Fetched consultations:",Ee.data),o.value=Hn.cloneDeep(Ee.data),le(),await oe(),await Y()}catch(ke){console.error("Error in onBeforeMount:",ke),w.value=ke.message||"Failed to load patient data"}finally{b.value=!1}}),cn(async()=>{window.dispatchEvent(new CustomEvent("collapse-side-nav",{detail:!0})),console.log("Consultations on Mount",o.value),console.log("Patient Details on mount",d.value),document.addEventListener("keydown",ne)}),la(async()=>{window.dispatchEvent(new CustomEvent("collapse-side-nav",{detail:!1})),document.removeEventListener("keydown",ne)});const P=M(!1),F=M(!1),N=ke=>{if(!ke){console.error("No consultation provided for deletion"),h.value=!0,v.value="Cannot delete: Invalid consultation";return}P.value=!0,g.value=ke,console.log("Selected Consultation for Deletion:",ke)},L=async()=>{try{g.value&&i.value&&g.value.id===i.value.id&&await Y(),P.value=!1,setTimeout(()=>{g.value=null},100)}catch(ke){console.error("Error handling consultation delete close:",ke),h.value=!0,v.value="Error refreshing after deletion",P.value=!1,setTimeout(()=>{g.value=null},100)}},ie=async ke=>{try{F.value=!1,ke&&(d.value=Hn.cloneDeep(ke),f.value=!0,m.value="Patient details updated successfully",console.log("Patient details updated:",ke))}catch(Ee){console.error("Error updating patient details:",Ee),h.value=!0,v.value="Failed to update patient details"}},le=()=>{if(!Array.isArray(o.value)||o.value.length===0)return;o.value.length>50?window.requestIdleCallback?requestIdleCallback(()=>{ke()}):setTimeout(()=>{ke()},0):ke();function ke(){o.value.sort((Ee,ye)=>!Ee.consultationDate&&!ye.consultationDate?0:Ee.consultationDate?ye.consultationDate?new Date(ye.consultationDate)-new Date(Ee.consultationDate):-1:1),console.log(" Sorted consultations chronologically:",o.value)}},Q=ee(()=>!Array.isArray(o.value)||o.value.length===0?!1:o.value.some(ke=>ke?.consultationDate&&G(ke))),Z=ke=>{if(!ke)return 0;const Ee=new Date().toLocaleDateString("en-CA"),ye=new Date(ke),at=new Date(Ee)-ye;return Math.floor(at/(1e3*60*60*24))},ce=ke=>{if(!ke)return{text:"No date",class:"consultation-date-text"};const Ee=new Date(ke).toLocaleDateString("en-US",{timeZone:"Asia/Kolkata",month:"short",day:"numeric",year:"numeric"}),ye=Z(ke);let we="",at="consultation-date-text";return ye===0?(we="Today",at+=" date-today"):ye>0?(we=`${ye}d ago`,at+=" date-past"):(we=`${Math.abs(ye)}d to go`,at+=" date-future"),{text:`${Ee}  ${we}`,class:at}},J=ke=>{if(!ke)return!1;const Ee=new Date().toLocaleDateString("en-CA");return ke===Ee},se=ke=>{if(!ke)return!1;const Ee=new Date().toLocaleDateString("en-CA"),ye=new Date(ke),we=new Date(Ee);return ye>we},G=ke=>{if(!ke?.consultationDate||!ke?.status)return!1;const Ee=ke.consultationDate,ye=ke.status;return(J(Ee)||se(Ee))&&ye==="CREATED"||ye==="UPDATED"},D=ee(()=>!Array.isArray(o.value)||o.value.length===0?!1:o.value.some(ke=>J(ke.consultationDate)&&(ke?.status==="UPDATED"||ke?.status==="CREATED"))),j=async()=>{try{if(await a.isReady(),s.value=n.params.id,!s.value)throw new Error("No patient ID found in URL parameters")}catch(ke){throw console.error("Error extracting URL parameters:",ke),w.value="Invalid patient URL",ke}},ne=ke=>{if(ke.key==="Escape"){if(window.dictationModalActive)return;const Ee=document.activeElement;if(Ee&&(Ee.tagName==="INPUT"||Ee.tagName==="TEXTAREA"||Ee.isContentEditable||Ee.closest(".v-field__input")||Ee.closest(".v-text-field")||Ee.closest(".v-textarea")))return;ke.preventDefault(),H()}},H=()=>{try{const ke=n.query.from;ke==="patients-landing-page"?a.push("/patients"):ke==="research"?a.push("/research"):ke==="data"?a.push("/data"):ke==="home"?a.push("/home"):a.push("/patients"),console.log(" Navigating back from ESC shortcut to:",ke||"patients (default)")}catch(ke){console.error("Error in back navigation:",ke),a.push("/patients")}},te=async()=>{try{if(!s.value||!y.value)throw new Error("Missing patient or doctor information");const ke=new Date().toLocaleDateString("en-CA");await Yk(s.value,y.value,ke);const Ee=await qy(s.value,y.value);if(Ee.error)throw new Error(`Failed to refresh consultations: ${Ee.error.message}`);o.value=Hn.cloneDeep(Ee.data),le(),await Y(),console.log("New consultation created"),f.value=!0,m.value="New consultation created successfully"}catch(ke){console.error("Error creating consultation:",ke),h.value=!0,v.value=ke.message||"Failed to create consultation"}},Y=async()=>{try{if(o.value&&o.value.length>0){const ke=o.value.filter(Ee=>Ee?.consultationDate&&G(Ee));ke.length>0?(i.value=ke[0],console.log("Selected most recent visible consultation:",i.value)):(console.log("No visible consultations available"),i.value={id:"0"})}else console.log("No consultations available"),i.value={id:"0"};c.value=J(i.value?.consultationDate)}catch(ke){console.error("Error selecting most recent consultation:",ke),i.value={id:"0"},c.value=!1}},K=ke=>{if(!ke){console.error("No consultation provided to selectArtefact");return}if(!G(ke)){console.warn("Attempted to select a consultation that should not be visible:",ke);return}i.value=ke,c.value=!1,E.value=!1,console.log("Selected Artefact:",i.value)},X=ke=>{if(!ke?.id){console.error("Invalid consultation provided for update");return}const Ee=o.value.findIndex(ye=>ye?.id===ke.id);Ee!==-1&&(o.value[Ee]=ke),console.log("Updated Consultation:",i.value)},ae=ke=>{if(!ke){console.error("No consultation provided to copy"),h.value=!0,v.value="Failed to copy consultation details";return}try{A.value=Hn.cloneDeep(ke),f.value=!0,m.value="Details copied to new consultation",console.log("Copied Artefact:",A.value)}catch(Ee){console.error("Error copying consultation:",Ee),h.value=!0,v.value="Failed to copy consultation details"}},oe=async()=>{if(!d.value.id||!y.value){console.warn("Patient ID or Doctor ID not available for loading procedures");return}C.value=!0;try{console.log(" Fetching procedures for patient:",d.value.id,"doctor:",y.value);const ke=await rT(d.value.id,y.value);if(ke.error)throw new Error(`Failed to load treatment plans: ${ke.error.message}`);console.log(" Fetched procedures:",ke.data),k.value=Hn.cloneDeep(ke.data),console.log("Successfully loaded procedures:",k.value)}catch(ke){console.error("Error loading procedures:",ke),k.value=[],h.value=!0,v.value=`Failed to load treatment plans: ${ke.message}`}finally{C.value=!1}},W=async()=>{if(!d.value.id||!y.value){h.value=!0,v.value="Patient or doctor information missing";return}try{const ke=`New Treatment Plan ${new Date().toLocaleDateString()}`,Ee=await rE(d.value.id,y.value,ke,"","","");if(Ee.error)throw new Error(`Failed to create procedure: ${Ee.error.message}`);await oe(),S.value=Ee.data,E.value=!0,f.value=!0,m.value="New treatment plan created successfully",console.log("Created new procedure:",Ee.data)}catch(ke){console.error("Error creating procedure:",ke),h.value=!0,v.value=ke.message||"Failed to create treatment plan"}},de=ke=>{if(!ke){console.error("No procedure provided to selectProcedure");return}S.value=ke,E.value=!0,console.log("Selected Procedure:",S.value)},Ae=ke=>{if(!ke?.id){console.error("Invalid procedure provided for update");return}const Ee=k.value.findIndex(ye=>ye?.id===ke.id);Ee!==-1&&(k.value[Ee]=ke,S.value=ke),console.log("Updated Procedure:",S.value)},Ce=async ke=>{if(!d.value.id||!y.value){h.value=!0,v.value="Patient or doctor information missing";return}try{const Ee=await rE(d.value.id,y.value,ke.treatmentPlanName||"New Treatment Plan",ke.startDate||"",ke.endDate||"",ke.notes||"");if(Ee.error)throw new Error(`Failed to create procedure: ${Ee.error.message}`);await oe(),S.value=Ee.data,f.value=!0,m.value="Treatment plan created successfully",console.log("Created procedure from window:",Ee.data)}catch(Ee){console.error("Error creating procedure from window:",Ee),h.value=!0,v.value=Ee.message||"Failed to create treatment plan"}},De=async ke=>{if(!ke?.id){console.error("No procedure provided for deletion"),h.value=!0,v.value="Cannot delete: Invalid treatment plan";return}if(confirm(`Are you sure you want to delete the treatment plan "${ke.treatmentPlanName}"?`))try{const Ee=await MM(ke.id);if(Ee.error)throw new Error(`Failed to delete procedure: ${Ee.error.message}`);await oe(),S.value?.id===ke.id&&(S.value={id:"0"},E.value=!1),f.value=!0,m.value="Treatment plan deleted successfully",console.log("Deleted procedure:",ke.id)}catch(Ee){console.error("Error deleting procedure:",Ee),h.value=!0,v.value=Ee.message||"Failed to delete treatment plan"}},xe=ke=>{if(!ke)return{text:"No data",class:"procedure-date-text"};let Ee="",ye="",we="procedure-date-text";const at=rt=>rt?new Date(rt).toLocaleDateString("en-US",{timeZone:"Asia/Kolkata",month:"short",day:"numeric",year:"numeric"}):null;return ke.status&&(ye=ke.status,ke.status.toLowerCase()==="completed"&&(we+=" status-completed")),ke.startDate&&ke.endDate?Ee=`${at(ke.startDate)}  ${at(ke.endDate)}`:ke.startDate?Ee=`Start: ${at(ke.startDate)}`:ke.endDate?Ee=`End: ${at(ke.endDate)}`:ke.createdAt?Ee=`Created: ${at(ke.createdAt)}`:Ee="No date available",{text:ye?`${ye}  ${Ee}`:Ee,class:we}};return(ke,Ee)=>{const ye=I("v-alert"),we=I("v-progress-circular"),at=I("v-col"),Je=I("v-row"),rt=I("v-icon"),it=I("v-breadcrumbs-item"),Ie=I("v-breadcrumbs"),Ve=I("v-card-title"),ft=I("v-btn"),Ft=I("v-tooltip"),tt=I("v-card"),Ge=I("v-tab"),pt=I("v-tabs"),ht=I("v-card-text"),Nt=I("v-tabs-window-item"),nn=I("v-tabs-window"),yn=I("v-dialog"),qn=I("v-snackbar");return R(),me(ze,null,[w.value?(R(),ve(ye,{key:0,type:"error",dismissible:"","onClick:close":Ee[0]||(Ee[0]=$t=>w.value=null),class:"ma-3"},{default:u(()=>[O(q(w.value),1)]),_:1})):_e("",!0),b.value?(R(),ve(Je,{key:1,"no-gutters":"",class:"pa-3",style:{height:"100%"}},{default:u(()=>[l(at,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[p("div",b4e,[l(we,{indeterminate:"",color:"primary",size:"64"}),Ee[8]||(Ee[8]=p("div",{class:"mt-4 text-subtitle-1"},"Loading patient details...",-1))])]),_:1})]),_:1})):w.value?_e("",!0):(R(),me(ze,{key:2},[l(Je,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[l(at,{cols:"12"},{default:u(()=>[l(tt,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center"},{default:u(()=>[p("div",x4e,[l(Je,{"no-gutters":"",class:"align-center"},{default:u(()=>[l(at,{cols:"2",class:"d-flex justify-start"},{default:u(()=>[l(Ie,{density:"default",class:"pa-0 breadcrumb-enhanced"},{default:u(()=>[(R(!0),me(ze,null,Wt(T.value,($t,Tt)=>(R(),ve(it,{key:Tt,to:$t.to,disabled:$t.disabled,class:"text-subtitle-2 font-weight-medium breadcrumb-item-enhanced"},{default:u(()=>[$t.icon?(R(),ve(rt,{key:0,start:$t.iconPosition!=="end",end:$t.iconPosition==="end",size:"default",color:"primary",class:ct($t.iconClass)},{default:u(()=>[O(q($t.icon),1)]),_:2},1032,["start","end","class"])):_e("",!0),O(" "+q($t.text),1)]),_:2},1032,["to","disabled"]))),128))]),_:1})]),_:1}),l(at,{cols:"10",class:"d-flex justify-center"},{default:u(()=>[p("div",C4e,[l(Ve,{class:"pb-2 pr-2"},{default:u(()=>[p("span",S4e,q((d.value?.name||"Unknown Patient").length>40?(d.value?.name||"Unknown Patient").slice(0,40)+"":d.value?.name||"Unknown Patient"),1),p("span",E4e," ID: "+q(d.value?.id||"N/A")+"  "+q(d.value?.gender||"Unknown")+q(d.value?.age?`, ${d.value.age} yrs`:"")+q(d.value?.importID?`  Import ID: ${d.value.importID}`:""),1)]),_:1}),d.value?.note&&d.value.note.trim()!==""?(R(),me("div",B4e,[p("span",k4e,q(d.value.note),1)])):(R(),me("div",T4e,[...Ee[9]||(Ee[9]=[p("span",{class:"text-caption text-medium-emphasis font-style-italic"},"no special note",-1)])])),l(xn,{permission:"patients.edit"},{default:u(()=>[l(Ft,{text:"Edit Patient Details"},{activator:u(({props:$t})=>[l(ft,Fe({color:"primary",variant:"text",size:"small"},$t,{onClick:Ee[1]||(Ee[1]=Tt=>F.value=!0),icon:"",tabindex:"-1",class:"ml-2"}),{default:u(()=>[l(rt,null,{default:u(()=>[...Ee[10]||(Ee[10]=[p("img",{src:qA},null,-1)])]),_:1})]),_:1},16)]),_:1})]),_:1})])]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1}),l(Je,{"no-gutters":"","aria-label":"main row",class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[l(at,{cols:"3",order:"1","aria-label":"list column",class:"pr-1 stable-height-column"},{default:u(()=>[p("div",I4e,[l(tt,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex flex-column"},{default:u(()=>[p("div",F4e,[l(pt,{modelValue:U.value,"onUpdate:modelValue":Ee[2]||(Ee[2]=$t=>U.value=$t),density:"compact",class:"mb-2"},{default:u(()=>[x.value?(R(),me(ze,{key:0},[Oe(r)("home.queue.patient").value||Oe(r)("patients.details").value?(R(),ve(Ge,{key:0,value:"procedures",tabindex:"-1"},{default:u(()=>[...Ee[11]||(Ee[11]=[O(" Procedure ",-1)])]),_:1})):_e("",!0),Oe(r)("home.queue.patient").value||Oe(r)("patients.details").value?(R(),ve(Ge,{key:1,value:"consultations",tabindex:"-1"},{default:u(()=>[...Ee[12]||(Ee[12]=[O(" Consultation ",-1)])]),_:1})):_e("",!0)],64)):(R(),me(ze,{key:1},[Oe(r)("home.queue.patient").value||Oe(r)("patients.details").value?(R(),ve(Ge,{key:0,value:"consultations",tabindex:"-1"},{default:u(()=>[...Ee[13]||(Ee[13]=[O(" Consultation ",-1)])]),_:1})):_e("",!0),Oe(r)("home.queue.patient").value||Oe(r)("patients.details").value?(R(),ve(Ge,{key:1,value:"procedures",tabindex:"-1"},{default:u(()=>[...Ee[14]||(Ee[14]=[O(" Procedure ",-1)])]),_:1})):_e("",!0)],64))]),_:1},8,["modelValue"])]),l(nn,{modelValue:U.value,"onUpdate:modelValue":Ee[3]||(Ee[3]=$t=>U.value=$t),class:"flex-grow-1"},{default:u(()=>[l(xn,{anyPermission:"['home.queue.patient', 'patients.details']"},{default:u(()=>[l(Nt,{value:"consultations",class:"h-100"},{default:u(()=>[l(Je,{"no-gutters":"",class:"h-100"},{default:u(()=>[l(at,{cols:"12",class:"mt-1 h-100"},{default:u(()=>[p("div",P4e,[l(xn,{permission:"consultations.create"},{default:u(()=>[D.value?_e("",!0):(R(),ve(tt,{key:0,color:"surfaceContainerHigh",density:"compact",class:"ma-2",rounded:"lg"},{default:u(()=>[l(ht,{class:"pa-3"},{default:u(()=>[l(ft,{color:"primary",variant:"flat",block:"",onClick:te,disabled:!d.value?.id||!y.value},{default:u(()=>[...Ee[15]||(Ee[15]=[O(" Create New Consultation ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1}))]),_:1}),Q.value?(R(!0),me(ze,{key:0},Wt(o.value,$t=>(R(),me(ze,{key:$t.id},[$t?.consultationDate&&G($t)?(R(),ve(tt,{key:0,style:Rt([{textAlign:"left"},{cursor:"pointer"}]),class:ct([{"card-status-selected":i.value?.id===$t.id,"card-status-default":i.value?.id!==$t.id},"mx-2 mt-1 mb-2 card-enhanced card-hover-base"]),density:"compact",rounded:"lg",onClick:Tt=>K($t)},{default:u(()=>[l(Je,{"no-gutters":""},{default:u(()=>[l(at,{cols:"12"},{default:u(()=>[l(Ve,{class:"pb-0 pt-2"},{default:u(()=>[p("div",D4e,q($t?.diagnosis||"No diagnosis"),1)]),_:2},1024),l(Je,{"no-gutters":""},{default:u(()=>[l(at,{cols:"12"},{default:u(()=>[l(ht,{class:"pa-0 pb-2 pl-4"},{default:u(()=>[Ee[16]||(Ee[16]=p("span",{class:"text-caption text-medium-emphasis font-weight-bold"},"Rx: ",-1)),$t?.medicines&&$t.medicines.length>0?(R(!0),me(ze,{key:0},Wt($t.medicines,Tt=>(R(),me(ze,{key:Tt?.id||Tt},[O(q(Tt?.productName||"Unknown medicine")+" ",1),$t.medicines&&$t.medicines.length>1&&$t.medicines.indexOf(Tt)!==$t.medicines.length-1?(R(),me("span",U4e,", ")):_e("",!0)],64))),128)):(R(),me("span",R4e,"No medicines prescribed"))]),_:2},1024)]),_:2},1024),$t?.investigations&&$t.investigations.trim()!==""?(R(),ve(at,{key:0,cols:"12"},{default:u(()=>[l(ht,{class:"pa-0 pb-2 pl-4"},{default:u(()=>[Ee[17]||(Ee[17]=p("span",{class:"text-caption text-medium-emphasis font-weight-bold"},"Investigations: ",-1)),O(q($t.investigations),1)]),_:2},1024)]),_:2},1024)):_e("",!0),l(at,{cols:"12",class:"d-flex align-center justify-space-between action-row-highlight pa-3 ma-0"},{default:u(()=>[l(ht,{class:"pa-0"},{default:u(()=>[p("span",{class:ct(ce($t.consultationDate).class)},q(ce($t.consultationDate).text),3)]),_:2},1024),p("div",N4e,[l(Ft,{text:J($t.consultationDate)||se($t.consultationDate)?"Cannot copy from today's or future consultations":"Copy to Most Recent"},{activator:u(({props:Tt})=>[l(ft,Fe({onClick:mn(ut=>ae($t),["stop"]),variant:"plain"},{ref_for:!0},Tt,{size:"small",color:"primary",disabled:i.value?.id===$t.id||J($t.consultationDate)||se($t.consultationDate),class:"btn-hover-base mr-1"}),{default:u(()=>[l(rt,{size:"medium"},{default:u(()=>[...Ee[18]||(Ee[18]=[p("img",{src:nSe},null,-1)])]),_:1})]),_:1},16,["onClick","disabled"])]),_:2},1032,["text"]),l(xn,{permission:"consultations.delete"},{default:u(()=>[l(Ft,{text:J($t.consultationDate)?"Cannot delete today's consultation":"Delete Consultation"},{activator:u(({props:Tt})=>[l(ft,Fe({color:"secondary",variant:"plain",size:"small"},{ref_for:!0},Tt,{onClick:mn(ut=>N($t),["stop"]),disabled:J($t.consultationDate),class:"btn-hover-base"}),{default:u(()=>[l(rt,{size:"medium"},{default:u(()=>[...Ee[19]||(Ee[19]=[p("img",{src:mc},null,-1)])]),_:1})]),_:1},16,["onClick","disabled"])]),_:2},1032,["text"])]),_:2},1024)])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class","onClick"])):_e("",!0)],64))),128)):(R(),me("div",V4e,[l(rt,{size:"48",color:"primary",class:"mb-2"},{default:u(()=>[...Ee[20]||(Ee[20]=[p("img",{src:FE},null,-1)])]),_:1}),Ee[21]||(Ee[21]=p("p",{class:"text-subtitle-2 text-medium-emphasis"},"No consultations yet",-1)),Ee[22]||(Ee[22]=p("p",{class:"text-caption text-medium-emphasis"},"Create a consultation to get started",-1))]))])]),_:1})]),_:1})]),_:1})]),_:1}),l(xn,{anyPermission:"['home.queue.patient', 'patients.details']"},{default:u(()=>[l(Nt,{value:"procedures",class:"h-100"},{default:u(()=>[l(Je,{"no-gutters":"",class:"h-100"},{default:u(()=>[l(at,{cols:"12",class:"mt-1 h-100"},{default:u(()=>[p("div",L4e,[l(xn,{permission:"treatmentplans.create"},{default:u(()=>[l(tt,{color:"surfaceContainerHigh",density:"compact",class:"ma-2",rounded:"lg"},{default:u(()=>[l(ht,{class:"pa-3"},{default:u(()=>[l(ft,{color:"primary",variant:"flat",block:"",onClick:W,disabled:!d.value?.id||!y.value},{default:u(()=>[...Ee[23]||(Ee[23]=[O(" Create Treatment Plan ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),C.value?(R(),ve(Je,{key:0,"no-gutters":""},{default:u(()=>[l(at,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100px"}},{default:u(()=>[l(we,{indeterminate:"",color:"primary"})]),_:1})]),_:1})):k.value&&k.value.length>0?(R(!0),me(ze,{key:1},Wt(k.value,$t=>(R(),ve(tt,{key:$t.id,style:Rt([{textAlign:"left"},{cursor:"pointer"}]),class:ct([{"card-status-selected":S.value?.id===$t.id&&E.value,"card-status-default":!(S.value?.id===$t.id&&E.value)},"ma-2 card-enhanced card-hover-base"]),density:"compact",rounded:"lg",onClick:Tt=>de($t)},{default:u(()=>[l(Je,{"no-gutters":""},{default:u(()=>[l(at,{cols:"12"},{default:u(()=>[l(Ve,{class:"pb-0 pt-2"},{default:u(()=>[p("div",M4e,q($t?.treatmentPlanName||"Unnamed Treatment Plan"),1)]),_:2},1024),l(Je,{"no-gutters":""},{default:u(()=>[l(at,{cols:"12"},{default:u(()=>[l(ht,{class:"pa-0 pb-2 pl-4"},{default:u(()=>[p("p",O4e,q($t?.notes||"No notes"),1)]),_:2},1024)]),_:2},1024),l(at,{cols:"12",class:"d-flex align-center justify-space-between action-row-highlight pa-3 ma-0"},{default:u(()=>[l(ht,{class:"pa-0"},{default:u(()=>[p("span",{class:ct(xe($t).class),style:{"min-height":"18px",display:"inline-block"}},q(xe($t).text),3)]),_:2},1024),p("div",H4e,[l(xn,{permission:"treatmentplans.delete"},{default:u(()=>[l(Ft,{text:"Delete Treatment Plan"},{activator:u(({props:Tt})=>[l(ft,Fe({color:"secondary",variant:"plain",size:"small"},{ref_for:!0},Tt,{onClick:mn(ut=>De($t),["stop"]),class:"btn-hover-base"}),{default:u(()=>[l(rt,{size:"medium"},{default:u(()=>[...Ee[24]||(Ee[24]=[p("img",{src:mc},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024)])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128)):(R(),me("div",$4e,[l(rt,{size:"48",color:"primary",class:"mb-2"},{default:u(()=>[...Ee[25]||(Ee[25]=[p("img",{src:FE},null,-1)])]),_:1}),Ee[26]||(Ee[26]=p("p",{class:"text-subtitle-2 text-medium-emphasis"},"No treatment plans yet",-1)),Ee[27]||(Ee[27]=p("p",{class:"text-caption text-medium-emphasis"},"Create a treatment plan to get started",-1))]))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(yn,{modelValue:P.value,"onUpdate:modelValue":Ee[4]||(Ee[4]=$t=>P.value=$t),"max-width":"30%",persistent:""},{default:u(()=>[l(w4e,{deleteConsult:g.value,onClose:L},null,8,["deleteConsult"])]),_:1},8,["modelValue"]),l(yn,{modelValue:F.value,"onUpdate:modelValue":Ee[5]||(Ee[5]=$t=>F.value=$t),"max-width":"50%",persistent:""},{default:u(()=>[l(_4e,{patient:d.value,onClose:ie},null,8,["patient"])]),_:1},8,["modelValue"])]),_:1})])]),_:1}),l(at,{cols:"9",order:"2",class:"pl-1 stable-height-column","aria-label":"consultation column"},{default:u(()=>[p("div",Q4e,[l(tt,{color:"surfaceContainer",flat:"",style:{height:"100%"}},{default:u(()=>[U.value==="procedures"?(R(),ve(v4e,{treatmentPlan:S.value,patient:d.value,key:S.value?.id||"new","onUpdate:treatmentPlan":Ae,onCreateNewTreatmentPlan:Ce},null,8,["treatmentPlan","patient"])):(R(),ve(KH,{consultation:i.value,patient:d.value,key:i.value.id,consultationCopy:A.value,"onUpdate:consultation":X,onCreateNewArtefact:te},null,8,["consultation","patient","consultationCopy"]))]),_:1})])]),_:1})]),_:1}),l(qn,{modelValue:f.value,"onUpdate:modelValue":Ee[6]||(Ee[6]=$t=>f.value=$t),class:"elevation-24",color:"success"},{default:u(()=>[O(q(m.value),1)]),_:1},8,["modelValue"]),l(qn,{modelValue:h.value,"onUpdate:modelValue":Ee[7]||(Ee[7]=$t=>h.value=$t),class:"elevation-24",color:"failure"},{default:u(()=>[O(q(v.value),1)]),_:1},8,["modelValue"])],64))],64)}}},z4e=Xt(G4e,[["__scopeId","data-v-58e071ae"]]),K4e={__name:"edit-doctor",props:{doctor:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=t,a=M(Dw),r=e,s=M(Hn.clone(r.doctor)),o=M(!1),i=()=>{n("close")},c=async A=>{console.log("Updating doctor details",A);const d={...A,email:A.email||"",isGST:A.isGST||!1,gstIdentifier:A.gstIdentifier||"",isPharmacy:A.isPharmacy||!1},f=await ece(d);f.error?console.error("Error updating doctor details",f.error):console.error("Doctor detail update successful"),i()};return(A,d)=>{const f=I("v-card-title"),m=I("v-col"),h=I("v-icon"),v=I("v-btn"),y=I("v-row"),g=I("v-card"),w=I("v-switch"),b=I("v-card-subtitle"),x=I("v-divider"),T=I("v-text-field"),U=I("v-combobox"),k=I("v-form");return R(),ve(g,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(y,{"no-gutters":""},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(g,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(y,{"no-gutters":""},{default:u(()=>[l(m,{cols:"11"},{default:u(()=>[l(f,{class:"pa-0 pl-2"},{default:u(()=>[...d[10]||(d[10]=[O("Update Doctor Details",-1)])]),_:1})]),_:1}),l(m,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(v,{icon:"",size:"x-small",onClick:i},{default:u(()=>[l(h,null,{default:u(()=>[...d[11]||(d[11]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(y,{"no-gutters":""},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(g,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(k,{modelValue:o.value,"onUpdate:modelValue":d[9]||(d[9]=S=>o.value=S),"validate-on":"blur"},{default:u(()=>[l(y,{"no-gutters":"",class:"mb-3 pl-3"},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(w,{modelValue:s.value.procedurePrimary,"onUpdate:modelValue":d[0]||(d[0]=S=>s.value.procedurePrimary=S),label:"Procedure-Primary Practice",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"]),l(b,{class:"pa-0 text-caption text-medium-emphasis"},{default:u(()=>[...d[12]||(d[12]=[O(" Enable this for procedure-centric practices. ",-1)])]),_:1})]),_:1})]),_:1}),l(x,{class:"mb-3"}),l(y,{"no-gutters":""},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(T,{label:"Doctor Name (Dr.) *",density:"compact",modelValue:s.value.doctorName,"onUpdate:modelValue":d[1]||(d[1]=S=>s.value.doctorName=S),clearable:"",rules:Oe(sr)},null,8,["modelValue","rules"])]),_:1}),l(m,{cols:"12"},{default:u(()=>[l(U,{label:"Specialization *",density:"compact",items:a.value,rules:Oe(sr),clearable:"",modelValue:s.value.doctorSpecialization,"onUpdate:modelValue":d[2]||(d[2]=S=>s.value.doctorSpecialization=S)},null,8,["items","rules","modelValue"])]),_:1}),l(m,{cols:"12"},{default:u(()=>[l(T,{label:"Doctor Email (optional)",density:"compact",clearable:"",rules:Oe(mg),modelValue:s.value.email,"onUpdate:modelValue":d[3]||(d[3]=S=>s.value.email=S)},null,8,["rules","modelValue"])]),_:1}),l(m,{cols:"12"},{default:u(()=>[l(T,{label:"Review Link (optional)",density:"compact",clearable:"",modelValue:s.value.doctorReviewLink,"onUpdate:modelValue":d[4]||(d[4]=S=>s.value.doctorReviewLink=S)},null,8,["modelValue"])]),_:1})]),_:1}),l(x,{class:"my-3"}),l(y,{"no-gutters":"",class:"mb-3 pl-3"},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(w,{modelValue:s.value.isGST,"onUpdate:modelValue":d[5]||(d[5]=S=>s.value.isGST=S),label:"GST Registered Practice",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"]),l(b,{class:"pa-0 text-caption text-medium-emphasis"},{default:u(()=>[...d[13]||(d[13]=[O(" Enable if your practice is registered for GST. ",-1)])]),_:1})]),_:1})]),_:1}),s.value.isGST?(R(),ve(y,{key:0,"no-gutters":"",class:"mb-3"},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(T,{label:"GST Registration Number (optional)",density:"compact",modelValue:s.value.gstIdentifier,"onUpdate:modelValue":d[6]||(d[6]=S=>s.value.gstIdentifier=S),clearable:"",placeholder:"e.g., 27AAAAA0000A1Z5"},null,8,["modelValue"])]),_:1})]),_:1})):_e("",!0),l(x,{class:"my-3"}),l(y,{"no-gutters":"",class:"mb-3 pl-3"},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(w,{modelValue:s.value.isPharmacy,"onUpdate:modelValue":d[7]||(d[7]=S=>s.value.isPharmacy=S),label:"Pharmacy Practice",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"]),l(b,{class:"pa-0 text-caption text-medium-emphasis"},{default:u(()=>[...d[14]||(d[14]=[O(" Enable this for pharmacy practices. ",-1)])]),_:1})]),_:1})]),_:1}),l(x),l(y,{"no-gutters":""},{default:u(()=>[l(m,{cols:"2"}),l(m,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(v,{variant:"outlined",onClick:d[8]||(d[8]=S=>c(s.value)),disabled:!o.value},{default:u(()=>[...d[15]||(d[15]=[O("Update",-1)])]),_:1},8,["disabled"])]),_:1}),l(m,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},W4e={__name:"edit-clinic",props:{clinic:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=t,a=e,r=M(Hn.clone(a.clinic)),s=M(!1),o=()=>{n("close")},i=async c=>{console.log("Updating clinic details",c);const A=await ace(c);A.error?console.error("Error updating clinic details",A.error):console.error("Clinic detail update successful"),o()};return(c,A)=>{const d=I("v-card-title"),f=I("v-col"),m=I("v-icon"),h=I("v-btn"),v=I("v-row"),y=I("v-card"),g=I("v-text-field"),w=I("v-select"),b=I("v-divider"),x=I("v-form");return R(),ve(y,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(v,{"no-gutters":""},{default:u(()=>[l(f,{cols:"12"},{default:u(()=>[l(y,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(v,{"no-gutters":""},{default:u(()=>[l(f,{cols:"11"},{default:u(()=>[l(d,{class:"pa-0 pl-2"},{default:u(()=>[...A[5]||(A[5]=[O("Update Clinic Details",-1)])]),_:1})]),_:1}),l(f,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(h,{icon:"",size:"x-small",onClick:o},{default:u(()=>[l(m,null,{default:u(()=>[...A[6]||(A[6]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(v,{"no-gutters":""},{default:u(()=>[l(f,{cols:"12"},{default:u(()=>[l(y,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(x,{modelValue:s.value,"onUpdate:modelValue":A[4]||(A[4]=T=>s.value=T),"validate-on":"blur"},{default:u(()=>[l(v,{"no-gutters":""},{default:u(()=>[l(f,{cols:"12"},{default:u(()=>[l(g,{label:"Clinic Name *",density:"compact",modelValue:r.value.clinicName,"onUpdate:modelValue":A[0]||(A[0]=T=>r.value.clinicName=T),clearable:"",rules:Oe(sr)},null,8,["modelValue","rules"])]),_:1}),l(f,{cols:"12"},{default:u(()=>[l(w,{label:"State/UT *",density:"compact",modelValue:r.value.clinicAddress,"onUpdate:modelValue":A[1]||(A[1]=T=>r.value.clinicAddress=T),items:Oe(hT),rules:Oe(sr),clearable:""},null,8,["modelValue","items","rules"])]),_:1}),l(f,{cols:"12"},{default:u(()=>[l(g,{label:"Contact Number *",density:"compact",clearable:"",modelValue:r.value.contactNumber,"onUpdate:modelValue":A[2]||(A[2]=T=>r.value.contactNumber=T),rules:Oe(tv)},null,8,["modelValue","rules"])]),_:1})]),_:1}),l(b),l(v,{"no-gutters":""},{default:u(()=>[l(f,{cols:"2"}),l(f,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(h,{variant:"outlined",onClick:A[3]||(A[3]=T=>i(r.value)),disabled:!s.value},{default:u(()=>[...A[7]||(A[7]=[O("Update",-1)])]),_:1},8,["disabled"])]),_:1}),l(f,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},j4e={__name:"create-clinic",emits:["close"],setup(e,{emit:t}){const n=t,a=M({clinicName:"",clinicAddress:"",contactNumber:""}),r=M(!1),s=()=>{n("close")},o=async i=>{console.log("Create clinic",i);const c=await nce(i);c.error?console.error("Error creating clinic",c.error):console.error("Clinic create successful"),s()};return(i,c)=>{const A=I("v-card-title"),d=I("v-col"),f=I("v-icon"),m=I("v-btn"),h=I("v-row"),v=I("v-card"),y=I("v-text-field"),g=I("v-select"),w=I("v-divider"),b=I("v-form");return R(),ve(v,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(v,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"11"},{default:u(()=>[l(A,{class:"pa-0 pl-2"},{default:u(()=>[...c[5]||(c[5]=[O("Create New Clinic",-1)])]),_:1})]),_:1}),l(d,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(m,{icon:"",size:"x-small",onClick:s},{default:u(()=>[l(f,null,{default:u(()=>[...c[6]||(c[6]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(v,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(b,{modelValue:r.value,"onUpdate:modelValue":c[4]||(c[4]=x=>r.value=x),"validate-on":"blur"},{default:u(()=>[l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(y,{label:"Clinic Name *",density:"compact",modelValue:a.value.clinicName,"onUpdate:modelValue":c[0]||(c[0]=x=>a.value.clinicName=x),clearable:"",rules:Oe(sr)},null,8,["modelValue","rules"])]),_:1}),l(d,{cols:"12"},{default:u(()=>[l(g,{label:"State/UT *",density:"compact",modelValue:a.value.clinicAddress,"onUpdate:modelValue":c[1]||(c[1]=x=>a.value.clinicAddress=x),items:Oe(hT),rules:Oe(sr),clearable:""},null,8,["modelValue","items","rules"])]),_:1}),l(d,{cols:"12"},{default:u(()=>[l(y,{label:"Contact Number *",density:"compact",clearable:"",modelValue:a.value.contactNumber,"onUpdate:modelValue":c[2]||(c[2]=x=>a.value.contactNumber=x),rules:Oe(tv)},null,8,["modelValue","rules"])]),_:1})]),_:1}),l(w),l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"2"}),l(d,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(m,{variant:"outlined",onClick:c[3]||(c[3]=x=>o(a.value)),disabled:!r.value},{default:u(()=>[...c[7]||(c[7]=[O("Create",-1)])]),_:1},8,["disabled"])]),_:1}),l(d,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},q4e={__name:"create-doctor",emits:["close"],setup(e,{emit:t}){const n=t,a=M(Dw),r=M({doctorName:"",doctorSpecialization:"",email:"",doctorReviewLink:"",procedurePrimary:!1,isGST:!1,gstIdentifier:"",isPharmacy:!1}),s=M(!1),o=()=>{n("close")},i=async c=>{console.log("Create doctor details",c);const A=await Zue(c);A.error?console.error("Error creating doctor",A.error):console.error("Doctor created successfully"),o()};return(c,A)=>{const d=I("v-card-title"),f=I("v-col"),m=I("v-icon"),h=I("v-btn"),v=I("v-row"),y=I("v-card"),g=I("v-switch"),w=I("v-card-subtitle"),b=I("v-divider"),x=I("v-text-field"),T=I("v-combobox"),U=I("v-form");return R(),ve(y,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(v,{"no-gutters":""},{default:u(()=>[l(f,{cols:"12"},{default:u(()=>[l(y,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(v,{"no-gutters":""},{default:u(()=>[l(f,{cols:"11"},{default:u(()=>[l(d,{class:"pa-0 pl-2"},{default:u(()=>[...A[10]||(A[10]=[O("Create New Doctor",-1)])]),_:1})]),_:1}),l(f,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(h,{icon:"",size:"x-small",onClick:o},{default:u(()=>[l(m,null,{default:u(()=>[...A[11]||(A[11]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(v,{"no-gutters":""},{default:u(()=>[l(f,{cols:"12"},{default:u(()=>[l(y,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(U,{modelValue:s.value,"onUpdate:modelValue":A[9]||(A[9]=k=>s.value=k),"validate-on":"blur"},{default:u(()=>[l(v,{"no-gutters":"",class:"mb-3 pl-3"},{default:u(()=>[l(f,{cols:"12"},{default:u(()=>[l(g,{modelValue:r.value.procedurePrimary,"onUpdate:modelValue":A[0]||(A[0]=k=>r.value.procedurePrimary=k),label:"Procedure-Primary Practice",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"]),l(w,{class:"pa-0 text-caption text-medium-emphasis"},{default:u(()=>[...A[12]||(A[12]=[O(" Enable this for procedure-centric practices. ",-1)])]),_:1})]),_:1})]),_:1}),l(b,{class:"mb-3"}),l(v,{"no-gutters":""},{default:u(()=>[l(f,{cols:"12"},{default:u(()=>[l(x,{label:"Doctor Name (Dr.) *",density:"compact",modelValue:r.value.doctorName,"onUpdate:modelValue":A[1]||(A[1]=k=>r.value.doctorName=k),clearable:"",rules:Oe(sr)},null,8,["modelValue","rules"])]),_:1}),l(f,{cols:"12"},{default:u(()=>[l(T,{label:"Specialization *",density:"compact",items:a.value,rules:Oe(sr),clearable:"",modelValue:r.value.doctorSpecialization,"onUpdate:modelValue":A[2]||(A[2]=k=>r.value.doctorSpecialization=k)},null,8,["items","rules","modelValue"])]),_:1}),l(f,{cols:"12"},{default:u(()=>[l(x,{label:"Doctor Email (optional)",density:"compact",clearable:"",rules:Oe(mg),modelValue:r.value.email,"onUpdate:modelValue":A[3]||(A[3]=k=>r.value.email=k)},null,8,["rules","modelValue"])]),_:1}),l(f,{cols:"12"},{default:u(()=>[l(x,{label:"Review Link (optional)",density:"compact",clearable:"",modelValue:r.value.doctorReviewLink,"onUpdate:modelValue":A[4]||(A[4]=k=>r.value.doctorReviewLink=k)},null,8,["modelValue"])]),_:1})]),_:1}),l(b,{class:"my-3"}),l(v,{"no-gutters":"",class:"mb-3 pl-3"},{default:u(()=>[l(f,{cols:"12"},{default:u(()=>[l(g,{modelValue:r.value.isGST,"onUpdate:modelValue":A[5]||(A[5]=k=>r.value.isGST=k),label:"GST Registered Practice",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"]),l(w,{class:"pa-0 text-caption text-medium-emphasis"},{default:u(()=>[...A[13]||(A[13]=[O(" Enable if your practice is registered for GST. ",-1)])]),_:1})]),_:1})]),_:1}),r.value.isGST?(R(),ve(v,{key:0,"no-gutters":"",class:"mb-3"},{default:u(()=>[l(f,{cols:"12"},{default:u(()=>[l(x,{label:"GST Registration Number (optional)",density:"compact",modelValue:r.value.gstIdentifier,"onUpdate:modelValue":A[6]||(A[6]=k=>r.value.gstIdentifier=k),clearable:"",placeholder:"e.g., 27AAAAA0000A1Z5"},null,8,["modelValue"])]),_:1})]),_:1})):_e("",!0),l(b,{class:"my-3"}),l(v,{"no-gutters":"",class:"mb-3 pl-3"},{default:u(()=>[l(f,{cols:"12"},{default:u(()=>[l(g,{modelValue:r.value.isPharmacy,"onUpdate:modelValue":A[7]||(A[7]=k=>r.value.isPharmacy=k),label:"Pharmacy Practice",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"]),l(w,{class:"pa-0 text-caption text-medium-emphasis"},{default:u(()=>[...A[14]||(A[14]=[O(" Enable this for pharmacy practices. ",-1)])]),_:1})]),_:1})]),_:1}),l(b),l(v,{"no-gutters":""},{default:u(()=>[l(f,{cols:"2"}),l(f,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(h,{variant:"outlined",onClick:A[8]||(A[8]=k=>i(r.value)),disabled:!s.value},{default:u(()=>[...A[15]||(A[15]=[O("Create",-1)])]),_:1},8,["disabled"])]),_:1}),l(f,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},Y4e={class:"permissions-section"},X4e={class:"d-flex align-center justify-space-between mb-4"},J4e={key:0,class:"text-center py-8"},Z4e={key:1,class:"features-container"},eIe={class:"d-flex align-center justify-space-between w-100 pr-4"},tIe={class:"d-flex align-center flex-grow-1"},nIe={class:"flex-grow-1"},aIe={class:"text-body-1 font-weight-medium d-flex align-center"},rIe={class:"text-caption text-medium-emphasis mt-1"},sIe={class:"text-caption text-medium-emphasis mb-3 d-flex align-center"},oIe={class:"action-card-content"},iIe={class:"action-card-text"},lIe={class:"text-body-2 font-weight-medium action-title"},uIe={class:"action-description-wrapper"},cIe={class:"text-caption text-medium-emphasis action-description"},dIe={__name:"permission-assignment",props:{user:{type:Object,required:!0,default:()=>({permissions:[],selectedFeatures:[],role:null})},availableFeatures:{type:Array,required:!0,default:()=>[]}},emits:["update:user"],setup(e,{emit:t}){const n=e,a=t,r=M(""),s=M([]),o=M([]),i=M(null),c=ee(()=>o.value.map(U=>({value:U.id,name:U.name,description:U.description,...U}))),A=async()=>{try{const U=await dt.get("/admin/users/roles");U.data&&U.data.success&&(o.value=U.data.roles||[])}catch(U){console.error("Failed to load roles:",U)}},d=U=>{if(f.value=!0,i.value=U,!U){y({role:null}),f.value=!1;return}const k=o.value.find(F=>F.id===U);if(!k){f.value=!1;return}const S=k.defaultFeatures||[],E=k.defaultPermissions||[],C=S.includes("home")?[...S]:["home",...S],P=[...E];y({role:U,selectedFeatures:C,permissions:P}),setTimeout(()=>{f.value=!1},100)},f=M(!1),m=()=>{if(!n.user)return;const U=n.user.permissions||[],k=n.user.selectedFeatures||[];let S=!1;const E={};k.includes("home")||(E.selectedFeatures=[...k,"home"],S=!0),U.includes("home")||(E.permissions=[...U,"home"],S=!0),S&&y(E)};cn(()=>{A(),n.user.role&&(i.value=n.user.role),m()}),We(()=>[n.user?.permissions,n.user?.selectedFeatures],()=>{const U=n.user?.permissions||[],k=n.user?.selectedFeatures||[];(!U.includes("home")||!k.includes("home"))&&m()},{immediate:!0}),We(()=>n.user.role,U=>{f.value||U!==i.value&&(i.value=U||null)});const h=U=>U&&U.actions&&Array.isArray(U.actions)&&U.actions.length>0,v=(U,k)=>{if(!h(U)){k.stopPropagation(),k.preventDefault();const S=s.value.indexOf(U.id);S>-1&&s.value.splice(S,1)}},y=U=>{a("update:user",{...n.user,...U})},g=ee(()=>{if(!r.value||r.value.trim()==="")return n.availableFeatures||[];const U=r.value.toLowerCase().trim();return(n.availableFeatures||[]).filter(k=>{if(!k)return!1;const S=(k.name||"").toLowerCase().includes(U),E=(k.description||"").toLowerCase().includes(U),C=(k.id||"").toLowerCase().includes(U),P=k.actions&&Array.isArray(k.actions)&&k.actions.some(F=>{const N=(F.description||"").toLowerCase(),L=(F.id||"").toLowerCase(),ie=(F.action||"").toLowerCase();return N.includes(U)||L.includes(U)||ie.includes(U)});return S||E||C||P})}),w=U=>!n.user||!n.user.permissions||!Array.isArray(n.user.permissions)?!1:n.user.permissions.includes(U),b=U=>{if(!n.user||!n.user.permissions||!Array.isArray(n.user.permissions))return 0;const k=n.availableFeatures.find(E=>E&&E.id===U);if(!k||!k.actions||!Array.isArray(k.actions))return 0;const S=k.actions.filter(E=>E&&E.id).map(E=>E.id);return n.user.permissions.filter(E=>S.includes(E)).length},x=(U,k)=>{if(!n.user||U==="home"&&!k)return;const S=n.user.permissions||[],E=n.user.selectedFeatures||[],C=n.availableFeatures.find(L=>L&&L.id===U);if(!C)return;const P=C.actions&&Array.isArray(C.actions)?C.actions.filter(L=>L&&L.id).map(L=>L.id):[];let F=[...S],N=[...E];k?(N.includes(U)||N.push(U),F.includes(U)||F.push(U),P.forEach(L=>{F.includes(L)||F.push(L)}),F=[...new Set(F)]):(N=N.filter(L=>L!==U),F=F.filter(L=>!(L===U||P.includes(L)||L&&typeof L=="string"&&L.startsWith(`${U}.`)))),N.includes("home")||N.push("home"),F.includes("home")||F.push("home"),y({permissions:F,selectedFeatures:N})},T=(U,k)=>{if(!n.user)return;let E=[...n.user.permissions||[]];k?E.includes(U)||E.push(U):E=E.filter(C=>C!==U),y({permissions:E})};return(U,k)=>{const S=I("v-chip"),E=I("v-list-item-subtitle"),C=I("v-list-item"),P=I("v-select"),F=I("v-text-field"),N=I("v-progress-circular"),L=I("v-checkbox"),ie=I("v-expansion-panel-title"),le=I("v-icon"),Q=I("v-card"),Z=I("v-col"),ce=I("v-row"),J=I("v-expansion-panel-text"),se=I("v-expansion-panel"),G=I("v-expansion-panels");return R(),me("div",Y4e,[p("div",X4e,[k[5]||(k[5]=p("div",null,[p("h3",{class:"text-h6 mb-1"},"Assign Permissions"),p("p",{class:"text-caption text-medium-emphasis mb-0"}," Select features and specific actions the user can perform ")],-1)),e.user.selectedFeatures&&e.user.selectedFeatures.length>0?(R(),ve(S,{key:0,color:"primary",size:"small",variant:"flat",class:"font-weight-medium"},{default:u(()=>[O(q(e.user.selectedFeatures.length)+" selected ",1)]),_:1})):_e("",!0)]),l(P,{modelValue:i.value,"onUpdate:modelValue":[k[0]||(k[0]=D=>i.value=D),d],items:c.value,"item-value":"value","item-title":"name",label:"Select Role",variant:"outlined",density:"comfortable",clearable:"","hide-details":"",class:"mb-4",color:"primary"},{item:u(({props:D,item:j})=>[l(C,Ql(Kl(D)),{default:u(()=>[l(E,null,{default:u(()=>[O(q(j.raw.description),1)]),_:2},1024)]),_:2},1040)]),selection:u(({item:D})=>[O(q(D.raw.name),1)]),_:1},8,["modelValue","items"]),l(F,{modelValue:r.value,"onUpdate:modelValue":k[1]||(k[1]=D=>r.value=D),"prepend-inner-icon":"mdi-magnify",label:"Search features or actions...",variant:"outlined",density:"comfortable",clearable:"","hide-details":"",class:"mb-4",color:"primary"},null,8,["modelValue"]),!e.availableFeatures||e.availableFeatures.length===0?(R(),me("div",J4e,[l(N,{indeterminate:"",color:"primary",size:"32"}),k[6]||(k[6]=p("p",{class:"text-body-2 text-medium-emphasis mt-4"},"Loading permissions...",-1))])):(R(),me("div",Z4e,[l(G,{modelValue:s.value,"onUpdate:modelValue":k[4]||(k[4]=D=>s.value=D),variant:"accordion",multiple:"",class:"feature-panels"},{default:u(()=>[(R(!0),me(ze,null,Wt(g.value,D=>(R(),ve(se,{key:D?.id||D,value:D.id,class:"feature-panel"},{default:u(()=>[l(ie,{class:"feature-panel-title","hide-actions":!h(D),onClick:j=>v(D,j)},{default:u(()=>[p("div",eIe,[p("div",tIe,[D&&D.id?(R(),ve(L,{key:0,"model-value":e.user.selectedFeatures&&Array.isArray(e.user.selectedFeatures)&&e.user.selectedFeatures.includes(D.id),disabled:D.id==="home",onClick:k[2]||(k[2]=mn(()=>{},["stop"])),"onUpdate:modelValue":j=>x(D.id,j),density:"comfortable","hide-details":"",color:"primary",class:"mr-3"},null,8,["model-value","disabled","onUpdate:modelValue"])):_e("",!0),p("div",nIe,[p("div",aIe,[O(q(D.name||D.id)+" ",1),b(D.id)>0?(R(),ve(S,{key:0,size:"x-small",color:"primary",variant:"flat",class:"ml-2"},{default:u(()=>[O(q(b(D.id))+"/"+q(D.actions?.length||0),1)]),_:2},1024)):_e("",!0)]),p("div",rIe,q(D.description||"No description available"),1)])])])]),_:2},1032,["hide-actions","onClick"]),h(D)?(R(),ve(J,{key:0,class:"feature-panel-content"},{default:u(()=>[p("div",null,[p("div",sIe,[l(le,{size:"small",class:"mr-1"},{default:u(()=>[...k[7]||(k[7]=[O("mdi-check-circle-outline",-1)])]),_:1}),k[8]||(k[8]=O(" Select specific actions for this feature ",-1))]),l(ce,{dense:"",class:"actions-grid"},{default:u(()=>[(R(!0),me(ze,null,Wt(D.actions,j=>(R(),me(ze,{key:j?.id||`action-${j?.action}`},[j&&j.id?(R(),ve(Z,{key:0,cols:"12",sm:"6",md:"4"},{default:u(()=>[l(Q,{class:ct(["action-card",{"action-card-selected":w(j.id)}]),onClick:ne=>T(j.id,!w(j.id)),elevation:"0"},{default:u(()=>[p("div",oIe,[l(L,{"model-value":w(j.id),onClick:k[3]||(k[3]=mn(()=>{},["stop"])),"onUpdate:modelValue":ne=>T(j.id,ne),density:"compact","hide-details":"",color:"primary",class:"action-checkbox",size:"small"},null,8,["model-value","onUpdate:modelValue"]),p("div",iIe,[p("div",lIe,q(j.action?j.action.charAt(0).toUpperCase()+j.action.slice(1):j.id?j.id.split(".").pop():"Action"),1)])]),p("div",uIe,[p("div",cIe,q(j.description||j.id||"No description"),1)])]),_:2},1032,["class","onClick"])]),_:2},1024)):_e("",!0)],64))),128))]),_:2},1024)])]),_:2},1024)):_e("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]))])}}},AR=Xt(dIe,[["__scopeId","data-v-92772965"]]),AIe=async(e,t,n)=>{try{if(!e)throw new Error("Doctor ID is required");if(!t||t.length!==3||!/^[A-Z]{3}$/.test(t))throw new Error("Prefix must be exactly 3 uppercase letters (A-Z)");if(!n||n.length!==6||!/^\d{6}$/.test(n))throw new Error("Seed suffix must be exactly 6 digits");const r=new Date().toISOString().split("T")[0],s={identifier:`${t}${n}`,status:"SERIES",paymentReceiptDate:r,doctorId:e,isThreeC:!1,additionalDiscount:0};return console.log("Creating receipt series with seed:",s),{data:(await dt.post("/paymentreceipt/",s)).data.data,error:null}}catch(a){return console.error("Error creating receipt series:",a),{data:null,error:a}}},fIe=async(e,t,n)=>{try{if(!e)throw new Error("Doctor ID is required");if(!t||t.length!==3||!/^[A-Z]{3}$/.test(t))throw new Error("Prefix must be exactly 3 uppercase letters (A-Z)");if(!n||n.length!==6||!/^\d{6}$/.test(n))throw new Error("Seed suffix must be exactly 6 digits");const r=new Date().toISOString().split("T")[0],s={identifier:`${t}${n}`,status:"SERIES",billDate:r,doctorId:e,additionalDiscount:0};return console.log("Creating bill series with seed:",s),{data:(await dt.post("/billreceipt/series",s)).data.data,error:null}}catch(a){return console.error("Error creating bill series:",a),{data:null,error:a}}},mIe={class:"text-center"},hIe={class:"scroll-hover",style:{"overflow-y":"auto",height:"100%"}},vIe={key:0,class:"ma-2 mb-3"},pIe={key:1,class:"ma-2 mt-4"},gIe={key:2,class:"ma-2 mt-4"},yIe={class:"text-subtitle-2 ml-2"},_Ie={class:"scroll-hover",style:{"overflow-y":"auto","max-height":"75vh"}},wIe={key:0,class:"mb-3"},bIe={key:1},xIe={class:"scroll-hover",style:{"overflow-y":"auto","max-height":"75vh"}},CIe={key:0,class:"text-caption text-medium-emphasis"},SIe={key:1,class:"text-caption text-medium-emphasis"},EIe={class:"d-flex align-center justify-center fill-height"},BIe={class:"d-flex align-center justify-center fill-height"},kIe={class:"d-flex align-center justify-space-between"},TIe={class:"flex-grow-1"},IIe={class:"d-flex align-center"},FIe=["href"],PIe={key:1,class:"text-body-2 text-disabled"},DIe={class:"d-flex align-center"},UIe=["href"],RIe={key:1,class:"text-body-2 text-disabled"},NIe={class:"d-flex align-center"},VIe={class:"text-body-2"},LIe={class:"d-flex flex-wrap mt-3"},MIe={class:"text-subtitle-2 ml-2"},OIe={class:"scroll-hover",style:{"overflow-y":"auto","max-height":"75vh"}},HIe={class:"text-subtitle-2 ml-2"},$Ie={class:"scroll-hover",style:{"overflow-y":"auto","max-height":"75vh"}},QIe={class:"text-subtitle-2 ml-2"},GIe={class:"scroll-hover",style:{"overflow-y":"auto","max-height":"75vh"}},zIe={class:"scroll-hover",style:{"overflow-y":"auto","max-height":"75vh"}},KIe={class:"scroll-hover pa-3",style:{"overflow-y":"auto","max-height":"75vh"}},WIe={class:"d-flex align-center"},jIe={class:"text-white"},qIe={class:"text-left"},YIe={class:"text-subtitle-2 font-weight-bold text-left"},XIe={class:"text-caption text-grey text-left"},JIe={class:"text-caption text-left"},ZIe={key:0,class:"text-grey"},eFe={class:"dialog-title"},tFe={class:"text-center pa-4"},nFe={class:"mb-4"},aFe={class:"mb-4"},rFe={class:"text-body-1 font-weight-bold mb-2"},sFe={__name:"admin-page",setup(e){const t=ea(),{isAdmin:n,hasPermission:a}=Zh(),r=M(!0),s=M(null),o=ee(()=>n.value),i=ee(()=>{const $e=a("admin.vitals").value,ue=a("admin.setup.prescription").value||a("admin.setup.receipt").value||a("admin.setup.bill").value||a("admin.setup.doctor").value||a("admin.setup.clinic").value||a("admin.setup.remote").value||a("admin.setup.pharmacy").value;return $e||ue}),c=ee(()=>n.value),A=()=>a("admin.vitals").value?"vitalsconfig":n.value?"rxprintdetails":"vitalsconfig",d=M("vitalsconfig"),f=M(!1),m=M(""),h=M(!1),v=M(""),y=M(""),g=M(""),w=M(29200),b=M(!1),x=M(""),T=M(""),U=M(""),k=M(null),S=M(!1),E=M(),C=M(),P=ee(()=>t.state.doctorModule.doctorId),F=M({pulse:!0,bloodPressure:!0,temperature:!0,respiratoryRate:!0,height:!1,serumBilirubin:!1,bloodGlucoseFF:!1,bloodGlucosePP:!1,bloodGlucoseRandom:!1,serumCreatinine:!1}),N=M(!1),L=M({prefix:"",suffix:""}),ie=M(!1),le=M(!1),Q=M({prefix:"",suffix:""}),Z=M(!1),ce=M(!1),J=M({pharmacyName:"",addressAndContactInfo:"",gstNumber:"",otherRegistrationInfo:"",useHeader:!0,pageSize:"A4"}),se=M(!1),G=M(!1),D=M([]),j=M(!1),ne=M([]);We(ne,$e=>{Array.isArray($e)||(ne.value=[])},{deep:!0});const H=M(!1),te=M(!1),Y=M(!1),K=M({name:"",email:"",passcode:"",doctorId:null,role:null,permissions:["home"],selectedFeatures:["home"]}),X=M(!1),ae=M(!1),oe=M(!1),W=M(null),de=M({id:null,name:"",email:"",doctorId:null,role:null,permissions:[],selectedFeatures:[]}),Ae=M(!1),Ce=M(!1),De=M(!1),xe=M(null),ke=M(""),Ee=M(!1),ye=M(null),we=M(""),at=M(!1),Je=M([]);We(Je,$e=>{Array.isArray($e)||(Je.value=[])},{deep:!0});const rt=[$e=>!!$e||"Prefix is required",$e=>$e&&$e.length===3||"Prefix must be exactly 3 characters",$e=>$e&&/^[A-Z]{3}$/.test($e)||"Prefix must be 3 uppercase letters (A-Z)"],it=[$e=>!!$e||"First receipt number is required",$e=>$e&&$e.length===6||"First receipt number must be exactly 6 digits",$e=>$e&&/^\d{6}$/.test($e)||"First receipt number must be 6 digits (000001-999999)",$e=>$e&&parseInt($e)>=1&&parseInt($e)<=999999||"First receipt number must be between 000001 and 999999"],Ie=[$e=>!!$e||"Prefix is required",$e=>$e&&$e.length===3||"Prefix must be exactly 3 characters",$e=>$e&&/^[A-Z]{3}$/.test($e)||"Prefix must be 3 uppercase letters (A-Z)"],Ve=[$e=>!!$e||"First bill number is required",$e=>$e&&$e.length===6||"First bill number must be exactly 6 digits",$e=>$e&&/^\d{6}$/.test($e)||"First bill number must be 6 digits (000001-999999)",$e=>$e&&parseInt($e)>=1&&parseInt($e)<=999999||"First bill number must be between 000001 and 999999"],ft=ee(()=>t.getters["doctorModule/currentDoctor"]?.doctorName||null),Ft=ee(()=>t.getters["doctorModule/isGSTRegistered"]);ee(()=>g.value?`https://${g.value}:${w.value}`:"");const tt=($e,ue="An error occurred")=>{console.error(ue,$e),h.value=!0,v.value=`${ue}: ${$e?.response?.data?.message||$e.message||"Unknown error"}`;const xt=$e?.response?.status===401||$e?.response?.status===403;($e?.response?.status>=500||!$e?.response)&&!xt&&(s.value=`${ue}. Please try again or contact support.`)},Ge=$e=>{f.value=!0,m.value=$e},pt=async $e=>{try{await navigator.clipboard.writeText($e);let ue="Text copied to clipboard";$e.includes("http")?ue="URL copied to clipboard":$e.includes(":")?ue="Server address copied to clipboard":$e.match(/^\d+\.\d+\.\d+\.\d+$/)&&(ue="IP address copied to clipboard"),Ge(ue)}catch(ue){console.error("Failed to copy to clipboard:",ue),h.value=!0,v.value="Failed to copy to clipboard"}},ht=()=>{try{if(!T.value||typeof T.value!="string")return console.warn("Invalid ngrok QR path value:",T.value),"";let ue=`file:///${T.value.replace(/\\/g,"/")}`;return k.value&&(ue+=`?t=${k.value}`),ue}catch($e){return console.error("Error processing ngrok QR URL:",$e),""}},Nt=M(!1),nn=M(!1),yn=[{title:"A4",value:"A4"},{title:"Letter",value:"Letter"},{title:"Legal",value:"Legal"}],qn=M(!1),$t=$e=>{try{if(!$e||typeof $e!="object")throw new Error("Invalid doctor data provided");E.value=$e,qn.value=!0}catch(ue){tt(ue,"Failed to open doctor edit dialog")}},Tt=async()=>{try{qn.value=!1,window.dispatchEvent(new Event("doctor-list-updated")),await Ue()}catch($e){tt($e,"Failed to refresh doctor details")}},ut=M(!1),kt=async()=>{try{ut.value=!1,window.dispatchEvent(new Event("doctor-list-updated")),await Ue()}catch($e){tt($e,"Failed to refresh doctor details after creation")}},Zt=M(!1),je=$e=>{try{if(!$e||typeof $e!="object")throw new Error("Invalid clinic data provided");C.value=$e,Zt.value=!0}catch(ue){tt(ue,"Failed to open clinic edit dialog")}},Ke=async()=>{try{Zt.value=!1,window.dispatchEvent(new Event("clinic-list-updated")),await Qe()}catch($e){tt($e,"Failed to refresh clinic details")}},wt=M(!1),Vt=async()=>{try{wt.value=!1,window.dispatchEvent(new Event("clinic-list-updated")),await Qe()}catch($e){tt($e,"Failed to refresh clinic details after creation")}};cn(()=>{try{console.log("Admin page mounted successfully")}catch($e){tt($e,"Failed to mount admin page")}}),Gl(async()=>{try{r.value=!0,console.log("AdminPage component is about to be mounted.");const $e=A();$e&&(d.value=$e);const ue=[On(),Ue(),Qe(),Tn()];(await Promise.allSettled(ue)).forEach((Ut,_t)=>{Ut.status==="rejected"&&console.error(`Promise ${_t} failed:`,Ut.reason)}),pe()}catch($e){tt($e,"Failed to initialize admin page")}finally{r.value=!1}}),We(P,async($e,ue)=>{try{$e&&$e!==ue&&(console.log(`Doctor ID changed from ${ue} to ${$e}, refetching configurations...`),await On($e),pe())}catch(xt){tt(xt,"Failed to fetch configurations for new doctor")}},{immediate:!1}),We(d,async $e=>{$e==="usermanagement"&&(await Promise.all([Me(),Ze()]),Je.value.length||await nt())},{immediate:!1}),We(d,async $e=>{$e==="mobiledetails"&&!y.value&&!g.value&&await qt(),$e==="pharmacyconfig"&&(J.value.pharmacyName||await Tn())},{immediate:!1}),We(Ft,$e=>{if(!$e&&d.value==="billconfig"){const ue=A();ue&&(d.value=ue),Ge("GST Bill Series Configuration is only available for GST-registered doctors")}},{immediate:!0}),We([n,()=>a("admin.vitals").value],()=>{if(!(()=>{switch(d.value){case"vitalsconfig":return a("admin.vitals").value;case"rxprintdetails":case"mobiledetails":case"doctordetails":case"clinicdetails":case"receiptconfig":case"billconfig":case"pharmacyconfig":case"usermanagement":return n.value;default:return!0}})()){const ue=A();ue&&(d.value=ue)}},{immediate:!0}),la(()=>{try{r.value=!1,s.value=null,vt.value={doctorName:"",doctorDegrees:"",doctorRegistrationNumber:"",clinicAddress:"-",email:"",doctorId:null,useHeader:!0,pageSize:"A4",headerImagePath:""},Pt.value="",Kt.value=null,J.value={pharmacyName:"",addressAndContactInfo:"",gstNumber:"",otherRegistrationInfo:"",useHeader:!0,pageSize:"A4"},He.value=[],Le.value=[],console.log("Admin page cleanup completed")}catch($e){console.error("Error during admin page cleanup:",$e)}});const qt=async()=>{try{b.value=!0;const $e=await OAe();if(!$e.success||!$e.data)throw new Error($e.error||"Invalid response received from server");const ue=$e.data;y.value=ue.path||"",g.value=ue.ipAddress||"",w.value=ue.port||29200,x.value=ue.ngrokTunnelUrl||"",T.value=ue.ngrokQrPath||"",U.value=ue.ngrokEndpointUrl||"",console.log("QR Code data fetched - IP:",g.value,"Port:",w.value,"Path:",y.value),console.log("Ngrok data fetched - Tunnel:",x.value,"QR Path:",T.value,"Endpoint:",U.value),U.value?console.log(" Ngrok endpoint URL is available:",U.value):console.log(" Ngrok endpoint URL is NOT available"),T.value?console.log(" Ngrok QR path is available:",T.value):console.log(" Ngrok QR path is NOT available")}catch($e){if($e?.response?.status===401||$e?.response?.status===403){console.log("Authentication required for mobile connection details"),y.value="",g.value="",w.value=29200,x.value="",T.value="",U.value="";return}tt($e,"Failed to fetch mobile connection details"),y.value="",g.value="",w.value=29200,x.value="",T.value="",U.value=""}finally{b.value=!1}},vt=M({doctorName:"",doctorDegrees:"",doctorRegistrationNumber:"",clinicAddress:"-",email:"",doctorId:null,useHeader:!0,useFooter:!0,pageSize:"A4",headerSize:1.8,headerImagePath:""}),Kt=M(null),Pt=M(""),Gn=M(!1),Nn=M(!1);We(X,$e=>{$e||(Ae.value=!1)}),We(Kt,async($e,ue)=>{if($e&&$e instanceof File&&$e!==ue&&!Gn.value){const xt=new FileReader;xt.onload=Ut=>{Pt.value=Ut.target.result},xt.readAsDataURL($e),console.log("File selected via watcher, auto-uploading:",$e.name);try{await Co()}catch(Ut){console.error("Auto-upload failed:",Ut)}}else!$e&&ue&&(Pt.value="")});const On=async($e=null)=>{try{const ue=$e||P.value;if(!ue)throw new Error("Doctor ID is required to fetch print configurations");console.log(`Fetching print configurations for doctor ID: ${ue}`);const xt=await sv(ue);if(xt.error)throw xt.error;if(!xt.data){console.log("No existing configuration found, initializing with defaults for new user"),vt.value={doctorName:"",doctorDegrees:"",doctorRegistrationNumber:"",clinicAddress:"-",email:"",doctorId:ue,useHeader:!0,useFooter:!0,pageSize:"A4",headerSize:1.8,headerImagePath:""},Pt.value="",Ge("Please setup your print preferences.");return}const Ut=xt.data;vt.value={doctorName:Ut.doctorName||"",doctorDegrees:Ut.doctorDegrees||"",doctorRegistrationNumber:Ut.doctorRegistrationNumber||"",clinicAddress:Ut.clinicAddress||"",email:Ut.email||"",doctorId:ue,useHeader:Ut.useHeader!==void 0?Ut.useHeader:!0,useFooter:Ut.useFooter!==void 0?Ut.useFooter:!0,pageSize:Ut.pageSize||"A4",headerSize:Ut.headerSize!==void 0&&Ut.headerSize!==null?Ut.headerSize:1.8,headerImagePath:Ut.headerImagePath||""},Ut.headerImagePath?dd(ue,Ut.headerImagePath).then(_t=>{Pt.value=_t}).catch(_t=>{console.error("Failed to get header image URL:",_t),Pt.value=""}):Pt.value="",console.log("Configuration data fetched:",vt.value)}catch(ue){if(ue?.response?.status===404){console.log("Print configuration not found - this is normal for new users");const Ut=$e||P.value;vt.value={doctorName:"",doctorDegrees:"",doctorRegistrationNumber:"",clinicAddress:"-",email:"",doctorId:Ut,useHeader:!0,useFooter:!0,pageSize:"A4",headerImagePath:""},Pt.value="",Ge("Please setup your print preferences.");return}tt(ue,"Failed to fetch print configurations");const xt=$e||P.value;vt.value={doctorName:"",doctorDegrees:"",doctorRegistrationNumber:"",clinicAddress:"-",email:"",doctorId:xt,useHeader:!0,useFooter:!0,pageSize:"A4",headerImagePath:""},Pt.value=""}},Yt=async()=>{if(!nn.value)try{if(nn.value=!0,!Nt.value)throw new Error("Please fix validation errors before saving");const $e=t.state.doctorModule.doctorId;if(!$e)throw new Error("Doctor ID is required to save configurations");if(!vt.value.doctorName?.trim())throw new Error("Doctor name is required");const ue={doctorName:vt.value.doctorName,doctorDegrees:vt.value.doctorDegrees,doctorRegistrationNumber:vt.value.doctorRegistrationNumber,clinicAddress:vt.value.clinicAddress,email:vt.value.email,useHeader:vt.value.useHeader,useFooter:vt.value.useFooter,pageSize:vt.value.pageSize,headerSize:vt.value.headerSize!==void 0&&vt.value.headerSize!==null?vt.value.headerSize:1.8,headerImagePath:vt.value.headerImagePath||"",doctorId:$e};console.log("Saving print configs with data:",ue),await Br(dt.post(`/print/${$e}`,ue)),Ge("Print configurations saved successfully")}catch($e){tt($e,"Failed to save print configurations")}finally{nn.value=!1}},Tn=async()=>{try{console.log("Fetching pharmacy configurations...");const $e=await kH();if($e.error)throw $e.error;if(!$e.data){console.log("No existing pharmacy configuration found, initializing with defaults"),J.value={pharmacyName:"Add pharmacy details here",addressAndContactInfo:"",gstNumber:"Add GST number here",otherRegistrationInfo:"",useHeader:!0,pageSize:"A4"};return}const ue=$e.data,Ut=(ue.header||"Add pharmacy details here").split(`
`),_t=Ut[0]||"Add pharmacy details here",dn=Ut[1]||"",In=(ue.gstNumber||"Add GST number here").split(`
`),vn=In[0]||"Add GST number here",Ya=In[1]||"";J.value={pharmacyName:_t,addressAndContactInfo:dn,gstNumber:vn,otherRegistrationInfo:Ya,useHeader:ue.useHeader!==void 0?ue.useHeader===1||ue.useHeader===!0:!0,pageSize:ue.pageSize||"A4"},console.log("Pharmacy configuration data fetched:",J.value)}catch($e){if($e?.response?.status===404){console.log("Pharmacy configuration not found - this is normal for new installations"),J.value={pharmacyName:"Add pharmacy details here",addressAndContactInfo:"",gstNumber:"Add GST number here",otherRegistrationInfo:"",useHeader:!0,pageSize:"A4"};return}tt($e,"Failed to fetch pharmacy configurations"),J.value={pharmacyName:"Add pharmacy details here",addressAndContactInfo:"",gstNumber:"Add GST number here",otherRegistrationInfo:"",useHeader:!0,pageSize:"A4"}}},Te=async()=>{if(!G.value)try{if(G.value=!0,!se.value)throw new Error("Please fix validation errors before saving");if(!J.value.pharmacyName?.trim())throw new Error("Pharmacy name is required");const $e=J.value.pharmacyName.trim()+(J.value.addressAndContactInfo?.trim()?`
`+J.value.addressAndContactInfo.trim():""),ue=J.value.gstNumber.trim()+(J.value.otherRegistrationInfo?.trim()?`
`+J.value.otherRegistrationInfo.trim():""),xt={header:$e,gstNumber:ue||"",useHeader:J.value.useHeader,pageSize:J.value.pageSize||"A4"},Ut=await nEe(xt);if(Ut.error)throw Ut.error;Ge("Pharmacy configurations saved successfully")}catch($e){tt($e,"Failed to save pharmacy configurations")}finally{G.value=!1}},He=M([]),Ue=async()=>{try{const $e=await eE();if(!$e?.data){console.warn("No doctor data found in response"),He.value=[];return}const ue=Array.isArray($e.data)?$e.data:[$e.data];He.value=ue.filter(xt=>xt&&typeof xt=="object"&&xt.id),console.log("Doctor details fetched:",He.value)}catch($e){tt($e,"Failed to fetch doctor details"),He.value=[]}},Le=M([]),Qe=async()=>{try{const $e=await aM();if(!$e?.data){console.warn("No clinic data found in response"),Le.value=[];return}const ue=Array.isArray($e.data)?$e.data:[$e.data];Le.value=ue.filter(xt=>xt&&typeof xt=="object"&&xt.id),console.log("Clinic details fetched:",Le.value)}catch($e){tt($e,"Failed to fetch clinic details"),Le.value=[]}},pe=()=>{try{const $e=P.value;if(!$e){console.warn("No doctor ID available to load vitals preferences");return}const ue=CT($e);F.value={pulse:ue.pulse,bloodPressure:ue.bloodPressure,temperature:ue.temperature,respiratoryRate:ue.respiratoryRate,height:ue.height,serumBilirubin:ue.serumBilirubin,bloodGlucoseFF:ue.bloodGlucoseFF,bloodGlucosePP:ue.bloodGlucosePP,bloodGlucoseRandom:ue.bloodGlucoseRandom,serumCreatinine:ue.serumCreatinine},console.log("Vitals preferences loaded:",F.value)}catch($e){tt($e,"Failed to load vitals preferences")}},re=async()=>{if(!N.value)try{N.value=!0;const $e=P.value;if(!$e)throw new Error("Doctor ID is required to save vitals preferences");const ue={...F.value,weight:!0};if(_Ee($e,ue))Ge("Vitals preferences saved successfully");else throw new Error("Failed to save preferences")}catch($e){tt($e,"Failed to save vitals preferences")}finally{N.value=!1}},ge=async()=>{if(!le.value)try{if(le.value=!0,!ie.value)throw new Error("Please fix validation errors before creating series");const $e=P.value;if(!$e)throw new Error("Doctor ID is required to create receipt series");if(!L.value.prefix?.trim())throw new Error("Prefix is required");if(!L.value.suffix?.trim())throw new Error("First receipt number is required");const Ut=(parseInt(L.value.suffix)-1).toString().padStart(6,"0");console.log("Creating receipt series with:",{doctorId:$e,prefix:L.value.prefix,suffix:Ut,firstReceiptWillBe:L.value.suffix});const _t=await AIe($e,L.value.prefix,Ut);if(_t.error)throw _t.error;Ge(`Receipt series created successfully. First receipt will be: ${L.value.prefix}${L.value.suffix}`),L.value={prefix:"",suffix:""},ie.value=!1}catch($e){tt($e,"Failed to create receipt series")}finally{le.value=!1}},Se=async()=>{if(!ce.value)try{if(ce.value=!0,!Z.value)throw new Error("Please fix validation errors before creating bill series");const $e=P.value;if(!$e)throw new Error("Doctor ID is required to create bill series");if(!Q.value.prefix?.trim())throw new Error("Prefix is required");if(!Q.value.suffix?.trim())throw new Error("First bill number is required");const Ut=(parseInt(Q.value.suffix)-1).toString().padStart(6,"0");console.log("Creating bill series with:",{doctorId:$e,prefix:Q.value.prefix,suffix:Ut,firstBillWillBe:Q.value.suffix});const _t=await fIe($e,Q.value.prefix,Ut);if(_t.error)throw _t.error;Ge(`Bill series created successfully. First bill will be: ${Q.value.prefix}${Q.value.suffix}`),Q.value={prefix:"",suffix:""},Z.value=!1}catch($e){tt($e,"Failed to create bill series")}finally{ce.value=!1}},Me=async()=>{j.value=!0;try{const $e=await dt.get("/admin/users");D.value=$e.data.users||[]}catch($e){console.error("Failed to load users:",$e),D.value=[]}finally{j.value=!1}},Ze=async()=>{try{const ue=(await dt.get("/admin/users/features")).data.features||[];console.log("Loaded features:",ue),ue.forEach(xt=>{console.log(`Feature ${xt.id} (${xt.name}):`,{hasActions:!!xt.actions,actionsType:Array.isArray(xt.actions)?"array":typeof xt.actions,actionsLength:Array.isArray(xt.actions)?xt.actions.length:0,actions:xt.actions})}),ne.value=ue}catch($e){console.error("Failed to load features:",$e),ne.value=[]}},nt=async()=>{try{const $e=await eE();Je.value=$e||[]}catch($e){console.error("Failed to load doctors:",$e),Je.value=[]}},et=$e=>$e?$e.split(" ").map(ue=>ue[0]).join("").toUpperCase().slice(0,2):"?",lt=$e=>$e?$e.charAt(0).toUpperCase()+$e.slice(1):"",bt=$e=>{if(!$e)return"";const ue=ne.value.find(zt=>zt&&zt.id===$e);if(ue)return ue.name||$e;let xt=null,Ut=$e;for(const zt of ne.value)if(zt&&zt.id&&$e.startsWith(`${zt.id}.`)){xt=zt,Ut=$e.substring(zt.id.length+1);break}if(!xt){const zt=$e.split(".");if(zt.length>=2){const In=zt[0];xt=ne.value.find(vn=>vn&&vn.id===In),Ut=zt.slice(1).join(".")}}const _t=xt?xt.name||xt.id:$e.split(".")[0];let dn=Ut;if(xt&&xt.actions){const zt=xt.actions.find(In=>In&&In.id===$e);if(zt)dn=zt.action?zt.action.charAt(0).toUpperCase()+zt.action.slice(1):Ut;else{const In=Ut.split(".");dn=In[In.length-1].charAt(0).toUpperCase()+In[In.length-1].slice(1)}}else{const zt=Ut.split(".");dn=zt[zt.length-1].charAt(0).toUpperCase()+zt[zt.length-1].slice(1)}return`${_t}: ${dn}`},It=async()=>{ne.value.length||await Ze(),Je.value.length||await nt(),K.value={name:"",email:"",passcode:"",doctorId:null,permissions:["home"],selectedFeatures:["home"]},H.value=!0},an=async()=>{if(!Y.value){Y.value=!0;try{const $e=Cn(K.value.permissions||[],K.value.selectedFeatures||[],ne.value);console.log("Creating user with permissions:",{selectedFeatures:K.value.selectedFeatures,permissions:$e,permissionsCount:$e.length}),(await dt.post("/admin/users",{name:K.value.name,email:K.value.email,passcode:K.value.passcode,doctorId:K.value.doctorId,role:K.value.role,permissions:$e})).data.success&&(Ge(`User "${K.value.name}" created successfully`),H.value=!1,await Me())}catch($e){tt($e,"Failed to create user")}finally{Y.value=!1}}},En=async $e=>{try{if(ne.value.length||await Ze(),Je.value.length||await nt(),!ne.value||ne.value.length===0){console.error("Features not loaded"),alert("Failed to load features. Please try again.");return}if(!$e||!$e.id){console.error("Invalid user data:",$e),alert("Invalid user data");return}const ue=[],xt=$e.permissions||[];for(const Ut of ne.value){if(!Ut||!Ut.id)continue;if((!Ut.actions||Ut.actions.length===0)&&xt.includes(Ut.id)){ue.push(Ut.id);continue}xt.some(dn=>!dn||typeof dn!="string"?!1:dn===Ut.id||dn.startsWith(`${Ut.id}.`))&&ue.push(Ut.id)}xt.includes("home")||xt.push("home"),ue.includes("home")||ue.push("home"),de.value={id:$e.id,name:$e.name||"",email:$e.email||"",doctorId:$e.doctorId||null,role:$e.role||null,isAdmin:$e.isAdmin===!0,permissions:Array.isArray(xt)?[...xt]:["home"],selectedFeatures:Array.isArray(ue)?[...ue]:["home"]},(!de.value.permissions||!Array.isArray(de.value.permissions))&&(de.value.permissions=["home"]),(!de.value.selectedFeatures||!Array.isArray(de.value.selectedFeatures))&&(de.value.selectedFeatures=["home"]),de.value.permissions.includes("home")||de.value.permissions.push("home"),de.value.selectedFeatures.includes("home")||de.value.selectedFeatures.push("home"),X.value=!0}catch(ue){console.error("Error opening edit user dialog:",ue),alert("Error opening user editor. Please try again.")}},hn=async()=>{if(!oe.value){oe.value=!0;try{const $e=de.value.isAdmin===!0;if(await dt.put(`/admin/users/${de.value.id}`,{name:de.value.name,email:de.value.email,role:de.value.role,isActive:!0,isAdmin:$e}),$e)Ge("Admin user updated successfully");else{const ue=Cn(de.value.permissions||[],de.value.selectedFeatures||[],ne.value);de.value.permissions=ue,console.log("Saving permissions:",{selectedFeatures:de.value.selectedFeatures,permissions:ue,permissionsCount:ue.length}),await dt.put(`/admin/users/${de.value.id}/permissions`,{permissions:ue}),Ge("User updated successfully")}X.value=!1,await Me()}catch($e){tt($e,"Failed to update user")}finally{oe.value=!1}}},Cn=($e,ue,xt)=>{if(!Array.isArray($e)||!Array.isArray(ue)||!Array.isArray(xt))return $e||[];const Ut=new Set;ue.forEach(zt=>{const In=xt.find(vn=>vn&&vn.id===zt);In&&(In.actions&&Array.isArray(In.actions)&&In.actions.forEach(vn=>{vn&&vn.id&&Ut.add(vn.id)}),(!In.actions||In.actions.length===0)&&Ut.add(zt))});const _t=new Set;$e.forEach(zt=>{zt&&typeof zt=="string"&&ue.some(vn=>zt.startsWith(`${vn}.`)||zt===vn)&&_t.add(zt)}),ue.forEach(zt=>{const In=xt.find(vn=>vn&&vn.id===zt);In&&((!In.actions||In.actions.length===0)&&_t.add(zt),$e.includes(zt)&&_t.add(zt))});const dn=Array.from(_t);return console.log("Cleaned permissions:",{original:$e.length,cleaned:dn.length,added:_t.size-$e.length,selectedFeatures:ue,validPermissionIds:Array.from(Ut)}),dn},Da=$e=>{xe.value=$e,ke.value="",Ce.value=!0},Nr=async()=>{if(!De.value){De.value=!0;try{(await dt.put(`/admin/users/${xe.value.id}/passcode`,{passcode:ke.value})).data.success&&(Ge(`Passcode reset for "${xe.value.name}"`),Ce.value=!1,ke.value="",_s(xe.value)&&setTimeout(()=>{window.location.reload()},1e3))}catch($e){tt($e,"Failed to reset passcode")}finally{De.value=!1}}},jr=Jh();$_(dt);const ys=ee(()=>jr.userId.value),_s=$e=>!$e||!$e.id?!1:$e.id===ys.value,Ga=$e=>{ye.value=$e,we.value="",Ee.value=!0},Qo=async()=>{if(!(at.value||!ye.value)){if(_s(ye.value)){tt(null,"Cannot delete your own account"),Ee.value=!1;return}if(we.value!=="DELETE"){tt(null,"Please type DELETE to confirm");return}at.value=!0;try{(await dt.delete(`/admin/users/${ye.value.id}`)).data.success&&(Ge(`User "${ye.value.name}" deleted successfully`),Ee.value=!1,we.value="",ye.value=null,await Me())}catch($e){$e.response?.status===400&&$e.response?.data?.error?.includes("own account")?tt($e,"Cannot delete your own account"):tt($e,"Failed to delete user")}finally{at.value=!1}}},ws=()=>{console.warn("Ngrok QR code image failed to load"),h.value=!0,v.value="Remote access QR code could not be loaded. Please refresh the page."},Lt=async()=>{if(!S.value)try{S.value=!0,console.log(" Clearing existing ngrok data..."),x.value="",T.value="",U.value="",k.value=null,console.log(" Regenerating ngrok tunnel...");const $e=await HAe();if(!$e.success)throw new Error($e.error||"Failed to regenerate ngrok tunnel");const ue=$e.data;x.value=ue.ngrokTunnelUrl||"",T.value=ue.ngrokQrPath||"",U.value=ue.ngrokEndpointUrl||"",k.value=Date.now(),console.log(" Ngrok tunnel regenerated successfully"),console.log("New tunnel URL:",x.value),console.log("New QR path:",T.value),console.log("New endpoint URL:",U.value),Ge("Remote access regenerated successfully. New QR code and URL are now available.")}catch($e){console.error("Failed to regenerate ngrok tunnel:",$e),tt($e,"Failed to regenerate remote access")}finally{S.value=!1}},Br=($e,ue=3e4)=>Promise.race([$e,new Promise((xt,Ut)=>setTimeout(()=>Ut(new Error("Request timeout")),ue))]),Vn=$e=>{console.log("File input changed")},Co=async()=>{if(Kt.value&&!Gn.value)try{Gn.value=!0;const $e=P.value;if(!$e)throw new Error("Doctor ID is required to upload header image");let ue=Kt.value;const xt=ue.size;if(ue.type.startsWith("image/")&&xt>100*1024)try{console.log(`Compressing header image: ${ue.name} (${(xt/1024/1024).toFixed(2)}MB)`),ue=await Yr(ue,{maxSizeMB:2,maxWidthOrHeight:1200,useWebWorker:!0,fileType:"image/jpeg",initialQuality:.85});const In=ue.size,vn=((1-In/xt)*100).toFixed(1);console.log(`Header image compressed: ${(In/1024/1024).toFixed(2)}MB (${vn}% reduction)`)}catch(zt){console.warn("Image compression failed, using original file:",zt)}const Ut=await ZO($e,ue);if(Ut.error)throw Ut.error;let _t=Ut.data?.filename||Ut.data?.data?.filename;if(!_t){const zt=Kt.value.name.split(".").pop()?.toLowerCase()||"jpg";_t=`prescription_header_${$e}.${zt==="png"?"png":"jpg"}`,console.warn("No filename in upload response, using constructed:",_t)}vt.value.headerImagePath=_t,console.log("Header image path updated to:",_t);const dn={doctorName:vt.value.doctorName||"",doctorDegrees:vt.value.doctorDegrees||"",doctorRegistrationNumber:vt.value.doctorRegistrationNumber||"",clinicAddress:vt.value.clinicAddress||"",email:vt.value.email||"",useHeader:vt.value.useHeader!==void 0?vt.value.useHeader:!0,useFooter:vt.value.useFooter!==void 0?vt.value.useFooter:!0,pageSize:vt.value.pageSize||"A4",headerSize:vt.value.headerSize!==void 0&&vt.value.headerSize!==null?vt.value.headerSize:1.8,headerImagePath:_t,doctorId:$e};console.log("Auto-saving print configs with headerImagePath:",dn),await Br(dt.post(`/print/${$e}`,dn)),_t&&dd($e,_t).then(zt=>{Pt.value=zt}).catch(zt=>{console.error("Failed to get header image URL:",zt)}),Kt.value=null,Ge("Header image uploaded and saved successfully")}catch($e){tt($e,"Failed to upload header image")}finally{Gn.value=!1}},js=async()=>{if(!Nn.value)try{Nn.value=!0;const $e=P.value;if(!$e)throw new Error("Doctor ID is required to delete header image");const ue=await eH($e);if(ue.error)throw ue.error;vt.value.headerImagePath="",Pt.value="",Kt.value=null,Ge("Header image removed successfully")}catch($e){tt($e,"Failed to remove header image")}finally{Nn.value=!1}};return($e,ue)=>{const xt=I("v-alert"),Ut=I("v-progress-circular"),_t=I("v-col"),dn=I("v-row"),zt=I("v-card-title"),In=I("v-card-subtitle"),vn=I("v-card"),Ya=I("v-tooltip"),Sa=I("v-btn"),$u=I("v-switch"),Wf=I("v-img"),jf=I("v-file-input"),ir=I("v-text-field"),Zd=I("v-textarea"),nl=I("v-select"),Ps=I("v-form"),Go=I("v-tabs-window-item"),qs=I("v-card-text"),_r=I("v-icon"),Zl=I("v-card-item"),qf=I("v-divider"),eu=I("v-chip"),ki=I("v-dialog"),vr=I("v-checkbox"),bv=I("v-avatar"),xv=I("v-tabs-window"),ii=I("v-spacer"),al=I("v-card-actions"),eA=I("v-snackbar"),ba=I("v-main");return R(),ve(ba,{class:"mt-5"},{default:u(()=>[s.value?(R(),ve(xt,{key:0,type:"error",dismissible:"","onClick:close":ue[0]||(ue[0]=Ye=>s.value=null),class:"ma-3"},{default:u(()=>[O(q(s.value),1)]),_:1})):_e("",!0),r.value?(R(),ve(dn,{key:1,"no-gutters":"",class:"pa-3",style:{height:"88%"}},{default:u(()=>[l(_t,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[p("div",mIe,[l(Ut,{indeterminate:"",color:"primary",size:"64"}),ue[81]||(ue[81]=p("div",{class:"mt-4 text-subtitle-1"},"Loading admin settings...",-1))])]),_:1})]),_:1})):s.value?_e("",!0):(R(),me(ze,{key:2},[l(dn,{"aria-label":"main row",class:"pl-3 pr-3",style:{height:"100%"}},{default:u(()=>[l(_t,{cols:"4",order:"1",class:"pr-1",style:{height:"92%"}},{default:u(()=>[l(vn,{color:"surfaceContainer",flat:"",style:{height:"100%"}},{default:u(()=>[p("div",hIe,[l(dn,{"no-gutters":""},{default:u(()=>[l(_t,{cols:"12"},{default:u(()=>[o.value?(R(),me("div",vIe,[l(zt,{class:"text-body-2 pa-2 pb-1",style:{"font-weight":"500"}},{default:u(()=>[...ue[82]||(ue[82]=[O(" evamed Setup ",-1)])]),_:1}),l(xn,{permission:"admin.setup.doctor"},{default:u(()=>[l(Ya,{text:"Doctor Setup Details"},{activator:u(({props:Ye})=>[l(vn,Fe({style:[{textAlign:"left"},{cursor:"pointer"}],class:["ma-1 mb-1 card-enhanced card-hover-base",{"card-status-selected":d.value==="doctordetails","card-status-default":d.value!=="doctordetails"}],onClick:ue[1]||(ue[1]=pr=>d.value="doctordetails")},Ye),{default:u(()=>[l(zt,{class:"pb-0 pt-2"},{default:u(()=>[...ue[83]||(ue[83]=[p("div",{class:"text-body-2 font-weight-bold"},"Doctor Setup",-1)])]),_:1}),l(In,{class:"text-caption text-medium-emphasis pb-1 pt-0"},{default:u(()=>[...ue[84]||(ue[84]=[O("Name, Specialization ..",-1)])]),_:1})]),_:1},16,["class"])]),_:1})]),_:1}),l(xn,{permission:"admin.setup.clinic"},{default:u(()=>[l(Ya,{text:"Clinic Setup Details"},{activator:u(({props:Ye})=>[l(vn,Fe({style:[{textAlign:"left"},{cursor:"pointer"}],class:["ma-1 mb-1 card-enhanced card-hover-base",{"card-status-selected":d.value==="clinicdetails","card-status-default":d.value!=="clinicdetails"}],onClick:ue[2]||(ue[2]=pr=>d.value="clinicdetails")},Ye),{default:u(()=>[l(zt,{class:"pb-0 pt-2"},{default:u(()=>[...ue[85]||(ue[85]=[p("div",{class:"text-body-2 font-weight-bold"},"Clinic Setup",-1)])]),_:1}),l(In,{class:"text-caption text-medium-emphasis pb-1 pt-0"},{default:u(()=>[...ue[86]||(ue[86]=[O("Name, Address ..",-1)])]),_:1})]),_:1},16,["class"])]),_:1})]),_:1}),l(xn,{permission:"admin.setup.remote"},{default:u(()=>[l(Ya,{text:"Remote Access"},{activator:u(({props:Ye})=>[l(vn,Fe({style:[{textAlign:"left"},{cursor:"pointer"}],class:["ma-1 mb-1 card-enhanced card-hover-base",{"card-status-selected":d.value==="mobiledetails","card-status-default":d.value!=="mobiledetails"}],onClick:ue[3]||(ue[3]=pr=>d.value="mobiledetails")},Ye),{default:u(()=>[l(zt,{class:"pb-0 pt-2"},{default:u(()=>[...ue[87]||(ue[87]=[p("div",{class:"text-body-2 font-weight-bold"},"Remote Access",-1)])]),_:1}),l(In,{class:"text-caption text-medium-emphasis pb-1 pt-0"},{default:u(()=>[...ue[88]||(ue[88]=[O("Server address, QR Code ..",-1)])]),_:1})]),_:1},16,["class"])]),_:1})]),_:1}),l(xn,{permission:"admin.setup.pharmacy"},{default:u(()=>[l(Ya,{text:"Pharmacy Print Configuration"},{activator:u(({props:Ye})=>[l(vn,Fe({style:[{textAlign:"left"},{cursor:"pointer"}],class:["ma-1 mb-1 card-enhanced card-hover-base",{"card-status-selected":d.value==="pharmacyconfig","card-status-default":d.value!=="pharmacyconfig"}],onClick:ue[4]||(ue[4]=pr=>d.value="pharmacyconfig")},Ye),{default:u(()=>[l(zt,{class:"pb-0 pt-2"},{default:u(()=>[...ue[89]||(ue[89]=[p("div",{class:"text-body-2 font-weight-bold"},"Pharmacy Print Configuration",-1)])]),_:1}),l(In,{class:"text-caption text-medium-emphasis pb-1 pt-0"},{default:u(()=>[...ue[90]||(ue[90]=[O("Header, GST Number ..",-1)])]),_:1})]),_:1},16,["class"])]),_:1})]),_:1})])):_e("",!0),i.value?(R(),me("div",pIe,[l(zt,{class:"text-body-2 pa-2 pb-1",style:{"font-weight":"500"}},{default:u(()=>[...ue[91]||(ue[91]=[O(" Doctor Specific Setup ",-1)])]),_:1}),l(xn,{permission:"admin.vitals"},{default:u(()=>[l(Ya,{text:"Configure Vitals Parameters"},{activator:u(({props:Ye})=>[l(vn,Fe({style:[{textAlign:"left"},{cursor:"pointer"}],class:["ma-1 mb-1 card-enhanced card-hover-base vitals-config-card",{"card-status-selected":d.value==="vitalsconfig","card-status-default":d.value!=="vitalsconfig"}],onClick:ue[5]||(ue[5]=pr=>d.value="vitalsconfig")},Ye),{default:u(()=>[l(zt,{class:"pb-0 pt-2"},{default:u(()=>[...ue[92]||(ue[92]=[p("div",{class:"text-body-2 font-weight-bold"},"Vitals Configuration",-1)])]),_:1}),l(In,{class:"text-caption text-medium-emphasis pb-1 pt-0"},{default:u(()=>[...ue[93]||(ue[93]=[O("Select relevant parameters ..",-1)])]),_:1})]),_:1},16,["class"])]),_:1})]),_:1}),l(xn,{permission:"admin.setup.prescription"},{default:u(()=>[l(Ya,{text:"Print Configuration Details"},{activator:u(({props:Ye})=>[l(vn,Fe({style:[{textAlign:"left"},{cursor:"pointer"}],class:["ma-1 mb-1 card-enhanced card-hover-base",{"card-status-selected":d.value==="rxprintdetails","card-status-default":d.value!=="rxprintdetails"}],onClick:ue[6]||(ue[6]=pr=>d.value="rxprintdetails")},Ye),{default:u(()=>[l(zt,{class:"pb-0 pt-2"},{default:u(()=>[...ue[94]||(ue[94]=[p("div",{class:"text-body-2 font-weight-bold"},"Prescription Print Configuration",-1)])]),_:1}),l(In,{class:"text-caption text-medium-emphasis pb-1 pt-0"},{default:u(()=>[...ue[95]||(ue[95]=[O("Name, Registration number ..",-1)])]),_:1})]),_:1},16,["class"])]),_:1})]),_:1}),l(xn,{permission:"admin.setup.receipt"},{default:u(()=>[l(Ya,{text:"Payment Receipt Configuration Details"},{activator:u(({props:Ye})=>[l(vn,Fe({style:[{textAlign:"left"},{cursor:"pointer"}],class:["ma-1 mb-1 card-enhanced card-hover-base",{"card-status-selected":d.value==="receiptconfig","card-status-default":d.value!=="receiptconfig"}],onClick:ue[7]||(ue[7]=pr=>d.value="receiptconfig")},Ye),{default:u(()=>[l(zt,{class:"pb-0 pt-2"},{default:u(()=>[...ue[96]||(ue[96]=[p("div",{class:"text-body-2 font-weight-bold"},"Payment Receipt Configuration",-1)])]),_:1}),l(In,{class:"text-caption text-medium-emphasis pb-1 pt-0"},{default:u(()=>[...ue[97]||(ue[97]=[O("Setup receipt series prefix and suffix ..",-1)])]),_:1})]),_:1},16,["class"])]),_:1})]),_:1}),l(xn,{permission:"admin.setup.bill"},{default:u(()=>[Ft.value?(R(),ve(Ya,{key:0,text:Ft.value?"GST Bill Series Configuration Details":"GST Bill Series Configuration (Only available for GST-registered doctors)"},{activator:u(({props:Ye})=>[l(vn,Fe({style:[{textAlign:"left"},{cursor:"pointer"}],class:["ma-1 mb-1 card-enhanced card-hover-base",{"card-status-selected":d.value==="billconfig","card-status-default":d.value!=="billconfig"}],onClick:ue[8]||(ue[8]=()=>{Ft.value&&(d.value="billconfig")})},Ye),{default:u(()=>[l(zt,{class:"pb-0 pt-2"},{default:u(()=>[...ue[98]||(ue[98]=[p("div",{class:"text-body-2 font-weight-bold"},"GST Bill Series Configuration",-1)])]),_:1}),l(In,{class:"text-caption text-medium-emphasis pb-1 pt-0"},{default:u(()=>[...ue[99]||(ue[99]=[O("Setup GST bill series prefix and suffix ..",-1)])]),_:1})]),_:1},16,["class"])]),_:1},8,["text"])):_e("",!0)]),_:1})])):_e("",!0),c.value?(R(),me("div",gIe,[l(zt,{class:"text-body-2 pa-2 pb-1",style:{"font-weight":"500"}},{default:u(()=>[...ue[100]||(ue[100]=[O(" Access Control ",-1)])]),_:1}),l(xn,{"require-admin":""},{default:u(()=>[l(Ya,{text:"Manage Users and Permissions"},{activator:u(({props:Ye})=>[l(vn,Fe({style:[{textAlign:"left"},{cursor:"pointer"}],class:["ma-1 mb-1 card-enhanced card-hover-base",{"card-status-selected":d.value==="usermanagement","card-status-default":d.value!=="usermanagement"}],onClick:ue[9]||(ue[9]=pr=>d.value="usermanagement")},Ye),{default:u(()=>[l(zt,{class:"pb-0 pt-2"},{default:u(()=>[...ue[101]||(ue[101]=[p("div",{class:"text-body-2 font-weight-bold"},"User Management",-1)])]),_:1}),l(In,{class:"text-caption text-medium-emphasis pb-1 pt-0"},{default:u(()=>[...ue[102]||(ue[102]=[O("Create users, assign permissions ..",-1)])]),_:1})]),_:1},16,["class"])]),_:1})]),_:1})])):_e("",!0)]),_:1})]),_:1})])]),_:1})]),_:1}),l(_t,{cols:"8",order:"2",class:"pl-1",style:{height:"100%"}},{default:u(()=>[l(vn,{color:"surfaceContainer",flat:"",style:{height:"92%"}},{default:u(()=>[l(xv,{modelValue:d.value,"onUpdate:modelValue":ue[57]||(ue[57]=Ye=>d.value=Ye)},{default:u(()=>[l(Go,{value:"rxprintdetails"},{default:u(()=>[l(dn,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[l(_t,{cols:"12"},{default:u(()=>[l(vn,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(dn,{"no-gutters":""},{default:u(()=>[l(_t,{cols:"8",class:"d-flex align-center"},{default:u(()=>[p("div",yIe,[ft.value?(R(),me(ze,{key:0},[O(" Editing configurations for: "+q(ft.value),1)],64)):(R(),me(ze,{key:1},[O(" Print Configuration Settings ")],64))])]),_:1}),l(_t,{cols:"4",class:"d-flex justify-end"},{default:u(()=>[l(Sa,{onClick:Yt,disabled:!Nt.value||nn.value,loading:nn.value,class:"btn-hover-enhanced"},{default:u(()=>[...ue[103]||(ue[103]=[O(" SAVE ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),p("div",_Ie,[l(dn,{"no-gutters":""},{default:u(()=>[l(_t,{cols:"12",color:"surfaceContainer"},{default:u(()=>[l(Ps,{modelValue:Nt.value,"onUpdate:modelValue":ue[20]||(ue[20]=Ye=>Nt.value=Ye),"validate-on":"blur",onSubmit:mn(Yt,["prevent"])},{default:u(()=>[l(dn,{"no-gutters":"",class:"ma-2 pa-2"},{default:u(()=>[l(_t,{cols:"6",class:"py-0 pl-2 pr-2"},{default:u(()=>[l($u,{modelValue:vt.value.useHeader,"onUpdate:modelValue":ue[10]||(ue[10]=Ye=>vt.value.useHeader=Ye),label:"Use Header on Prescription",hint:"When disabled, blank space will be left at the top of each page for your custom prescription header",class:"input-hover",color:"primary",density:"compact"},null,8,["modelValue"])]),_:1}),l(_t,{cols:"6",class:"py-0 pl-2 pr-2"},{default:u(()=>[l($u,{modelValue:vt.value.useFooter,"onUpdate:modelValue":ue[11]||(ue[11]=Ye=>vt.value.useFooter=Ye),label:"Use Footer on Prescription",hint:"When disabled, no footer will be printed at the bottom of each page",class:"input-hover",color:"primary",density:"compact"},null,8,["modelValue"])]),_:1}),l(_t,{cols:"12",class:"py-2 mb-4"},{default:u(()=>[l(vn,{variant:"outlined",class:"pa-3"},{default:u(()=>[l(zt,{class:"text-subtitle-2 pa-0 mb-2"},{default:u(()=>[...ue[104]||(ue[104]=[O("Prescription Header Image",-1)])]),_:1}),l(In,{class:"text-caption pa-0 mb-3"},{default:u(()=>[...ue[105]||(ue[105]=[O(" Upload an image to replace the text-based header. Image will be used when available. ",-1)])]),_:1}),Pt.value?(R(),me("div",wIe,[l(Wf,{src:Pt.value,"max-height":"150",contain:"",class:"mb-2",style:{border:"1px solid #e0e0e0","border-radius":"4px"}},null,8,["src"]),l(Sa,{onClick:js,color:"error",variant:"outlined",size:"small",loading:Nn.value},{default:u(()=>[...ue[106]||(ue[106]=[O(" Remove Image ",-1)])]),_:1},8,["loading"])])):(R(),me("div",bIe,[l(jf,{modelValue:Kt.value,"onUpdate:modelValue":ue[12]||(ue[12]=Ye=>Kt.value=Ye),label:"Upload Header Image",accept:"image/jpeg,image/jpg,image/png","prepend-icon":"mdi-image",variant:"outlined",density:"compact",disabled:Gn.value,loading:Gn.value,onChange:Vn,class:"input-hover"},null,8,["modelValue","disabled","loading"])]))]),_:1})]),_:1}),l(_t,{cols:"12"},{default:u(()=>[l(ir,{modelValue:vt.value.doctorName,"onUpdate:modelValue":ue[13]||(ue[13]=Ye=>vt.value.doctorName=Ye),label:"Doctor Name (Dr.) *",variant:"outlined",clearable:"",density:"compact",rows:"10",rules:Oe(sr),class:"input-hover"},null,8,["modelValue","rules"])]),_:1}),l(_t,{cols:"12"},{default:u(()=>[l(Zd,{"auto-grow":"",label:"Doctor Qualification *",clearable:"",rows:"2","row-height":"10",variant:"outlined",density:"compact",class:"input-hover",rules:Oe(sr),modelValue:vt.value.doctorDegrees,"onUpdate:modelValue":ue[14]||(ue[14]=Ye=>vt.value.doctorDegrees=Ye)},null,8,["rules","modelValue"])]),_:1}),l(_t,{cols:"12"},{default:u(()=>[l(ir,{modelValue:vt.value.doctorRegistrationNumber,"onUpdate:modelValue":ue[15]||(ue[15]=Ye=>vt.value.doctorRegistrationNumber=Ye),label:"Registration Number *",clearable:"",density:"compact",variant:"outlined",rows:"10",rules:Oe(FM),class:"input-hover"},null,8,["modelValue","rules"])]),_:1}),l(_t,{cols:"12"},{default:u(()=>[l(Zd,{"auto-grow":"",label:"Clinic Details *",clearable:"",rows:"2","row-height":"10",variant:"outlined",density:"compact",class:"input-hover",rules:Oe(sr),modelValue:vt.value.clinicAddress,"onUpdate:modelValue":ue[16]||(ue[16]=Ye=>vt.value.clinicAddress=Ye)},null,8,["rules","modelValue"])]),_:1}),l(_t,{cols:"12"},{default:u(()=>[l(ir,{modelValue:vt.value.email,"onUpdate:modelValue":ue[17]||(ue[17]=Ye=>vt.value.email=Ye),label:"Email (optional)",variant:"outlined",density:"compact",rows:"10",class:"input-hover"},null,8,["modelValue"])]),_:1}),l(_t,{cols:"12"},{default:u(()=>[l(nl,{modelValue:vt.value.pageSize,"onUpdate:modelValue":ue[18]||(ue[18]=Ye=>vt.value.pageSize=Ye),label:"Page Size",items:yn,variant:"outlined",density:"compact",class:"input-hover"},null,8,["modelValue"])]),_:1}),l(_t,{cols:"12"},{default:u(()=>[l(ir,{modelValue:vt.value.headerSize,"onUpdate:modelValue":ue[19]||(ue[19]=Ye=>vt.value.headerSize=Ye),modelModifiers:{number:!0},label:"Header Size (inches)",variant:"outlined",density:"compact",type:"number",step:"0.1",min:"0.7",max:"2.8",suffix:"in",hint:"Header size in inches (0.7 to 2.8)","persistent-hint":"",rules:[Ye=>Ye==null||Ye>=.7&&Ye<=2.8||"Header size must be between 0.7 and 2.8 inches"],class:"input-hover"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})])]),_:1}),l(Go,{value:"mobiledetails"},{default:u(()=>[l(dn,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[l(_t,{cols:"12"},{default:u(()=>[l(vn,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(dn,{"no-gutters":""},{default:u(()=>[l(_t,{cols:"10"}),l(_t,{cols:"2",class:"d-flex justify-end ma-3"})]),_:1})]),_:1})]),_:1})]),_:1}),p("div",xIe,[l(dn,{"no-gutters":""},{default:u(()=>[l(_t,{cols:"12"},{default:u(()=>[l(vn,{style:{textAlign:"left"},density:"compact",rounded:"lg",class:"ma-2 card-enhanced card-status-default card-hover-base"},{default:u(()=>[l(dn,{"no-gutters":""},{default:u(()=>[l(_t,{cols:"12"},{default:u(()=>[l(zt,null,{default:u(()=>[...ue[107]||(ue[107]=[O("Remote Access via Internet",-1)])]),_:1}),l(qs,{class:"ma-0 pa-0 pl-4 pb-2"},{default:u(()=>[U.value?(R(),me("div",CIe," Industry first access from other locations and devices using evamed True Private Network ")):(R(),me("div",SIe,[...ue[108]||(ue[108]=[O(" Remote access is not currently available.",-1),p("br",null,null,-1),O(" Ngrok tunnel may not be configured or running. ",-1)])]))]),_:1})]),_:1})]),_:1}),l(dn,{"no-gutters":"",class:"pa-4"},{default:u(()=>[b.value?(R(),ve(_t,{key:0,cols:"12",class:"d-flex justify-center align-center pa-4"},{default:u(()=>[l(Ut,{indeterminate:"",color:"primary"}),ue[109]||(ue[109]=p("span",{class:"ml-2"},"Loading mobile connection details...",-1))]),_:1})):S.value?(R(),ve(_t,{key:1,cols:"12",class:"d-flex flex-column justify-center align-center pa-4"},{default:u(()=>[l(Ut,{indeterminate:"",color:"primary",size:"64"}),ue[110]||(ue[110]=p("span",{class:"mt-3 text-subtitle-2"},"Regenerating Remote Access...",-1)),ue[111]||(ue[111]=p("span",{class:"mt-1 text-caption text-medium-emphasis"},"Creating new tunnel and QR code",-1))]),_:1})):(R(),me(ze,{key:2},[l(_t,{cols:"12",class:"d-flex justify-center mb-4"},{default:u(()=>[T.value&&ht()?(R(),ve(Wf,{src:ht(),contain:"",height:"150",width:"150",onError:ws,key:k.value},{placeholder:u(()=>[p("div",EIe,[l(Ut,{indeterminate:"",color:"primary"})])]),error:u(()=>[p("div",BIe,[l(xt,{type:"error",variant:"tonal"},{default:u(()=>[...ue[112]||(ue[112]=[O(" Failed to load QR code ",-1)])]),_:1})])]),_:1},8,["src"])):(R(),ve(xt,{key:1,type:"info",variant:"tonal",density:"compact"},{default:u(()=>[...ue[113]||(ue[113]=[p("div",{class:"text-center"},[p("div",{class:"text-subtitle-2 mb-2"},"Remote Access Not Available"),p("div",{class:"text-caption"},[O(" Ngrok tunnel is not running or not configured."),p("br"),O(" Check server logs for ngrok setup instructions. ")])],-1)])]),_:1}))]),_:1}),l(_t,{cols:"12"},{default:u(()=>[U.value?(R(),ve(ir,{key:0,"model-value":U.value,label:"Remote Access URL",readonly:"",variant:"outlined",density:"compact","append-inner-icon":"mdi-content-copy","onClick:appendInner":ue[21]||(ue[21]=Ye=>pt(U.value))},null,8,["model-value"])):(R(),ve(xt,{key:1,type:"info",variant:"tonal",density:"compact"},{default:u(()=>[...ue[114]||(ue[114]=[p("div",{class:"text-center"},[p("div",{class:"text-subtitle-2 mb-1"},"Remote Access URL Not Available"),p("div",{class:"text-caption"}," Configure ngrok tunnel to enable remote access ")],-1)])]),_:1}))]),_:1}),l(_t,{cols:"12",class:"mt-3 d-flex flex-column align-center"},{default:u(()=>[l(Sa,{onClick:Lt,disabled:S.value||b.value,loading:S.value,color:"primary",variant:"outlined",size:"small",density:"compact",class:"btn-hover-enhanced"},{default:u(()=>[l(_r,{start:"",size:"small"},{default:u(()=>[...ue[115]||(ue[115]=[O("mdi-refresh",-1)])]),_:1}),O(" "+q(S.value?"Regenerating...":"Regenerate Remote Access"),1)]),_:1},8,["disabled","loading"]),ue[116]||(ue[116]=p("div",{class:"text-caption text-medium-emphasis mt-1 text-center",style:{"font-size":"0.7rem"}}," This will create a new tunnel URL and QR code. The old URL will stop working. ",-1))]),_:1})],64))]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1}),l(Go,{value:"doctordetails"},{default:u(()=>[l(dn,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[l(_t,{cols:"12"},{default:u(()=>[l(vn,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(dn,{"no-gutters":""},{default:u(()=>[l(_t,{cols:"10"}),l(_t,{cols:"2",class:"d-flex justify-end"},{default:u(()=>[l(Sa,{onClick:ue[22]||(ue[22]=Ye=>ut.value=!0),class:"btn-hover-enhanced"},{default:u(()=>[...ue[117]||(ue[117]=[O("Create New",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(dn,{"no-gutters":""},{default:u(()=>[l(_t,{cols:"12",color:"surfaceContainer"},{default:u(()=>[!He.value||He.value.length===0?(R(),ve(xt,{key:0,type:"info",variant:"tonal",class:"ma-3"},{default:u(()=>[...ue[118]||(ue[118]=[O(' No doctors found. Click "Create New" to add a doctor. ',-1)])]),_:1})):_e("",!0),(R(!0),me(ze,null,Wt(He.value||[],Ye=>(R(),ve(vn,{style:{textAlign:"left"},density:"compact",rounded:"lg",class:"ma-2 card-enhanced card-status-default card-hover-base",key:Ye?.id||Math.random()},{default:u(()=>[l(Zl,{class:"pb-2"},{default:u(()=>[p("div",kIe,[p("div",TIe,[l(zt,{class:"text-h6 pa-0 mb-1"},{default:u(()=>[O(q(Ye?.doctorName||"Unknown Doctor"),1)]),_:2},1024),Ye?.doctorSpecialization?(R(),ve(In,{key:0,class:"text-body-2 pa-0"},{default:u(()=>[O(q(Ye?.doctorSpecialization),1)]),_:2},1024)):_e("",!0)]),l(Ya,{text:"Edit Doctor Details"},{activator:u(({props:pr})=>[l(Sa,Fe({color:"primary",variant:"text",size:"small",icon:"mdi-pencil"},{ref_for:!0},pr,{onClick:tA=>$t(Ye),class:"btn-hover-base"}),null,16,["onClick"])]),_:2},1024)])]),_:2},1024),l(qf,{class:"mx-4 mb-3"}),l(qs,{class:"pt-0"},{default:u(()=>[l(dn,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(_t,{cols:"12",class:"mb-2"},{default:u(()=>[p("div",IIe,[l(_r,{size:"small",class:"mr-2 text-medium-emphasis"},{default:u(()=>[...ue[119]||(ue[119]=[O("mdi-email-outline",-1)])]),_:1}),ue[120]||(ue[120]=p("span",{class:"text-body-2 text-medium-emphasis mr-2"},"Email:",-1)),Ye?.email&&Ye.email!=="Not specified"?(R(),me("a",{key:0,href:`mailto:${Ye.email}`,class:"text-body-2 text-primary text-decoration-none",onClick:ue[23]||(ue[23]=mn(()=>{},["stop"]))},q(Ye.email),9,FIe)):(R(),me("span",PIe,"Not specified"))])]),_:2},1024),l(_t,{cols:"12",class:"mb-2"},{default:u(()=>[p("div",DIe,[l(_r,{size:"small",class:"mr-2 text-medium-emphasis"},{default:u(()=>[...ue[121]||(ue[121]=[O("mdi-link-variant",-1)])]),_:1}),ue[124]||(ue[124]=p("span",{class:"text-body-2 text-medium-emphasis mr-2"},"Review Link:",-1)),Ye?.doctorReviewLink&&Ye.doctorReviewLink!=="Not specified"?(R(),me("a",{key:0,href:Ye.doctorReviewLink,target:"_blank",rel:"noopener noreferrer",class:"text-body-2 text-primary text-decoration-none",onClick:ue[24]||(ue[24]=mn(()=>{},["stop"]))},[ue[123]||(ue[123]=O(" View Profile ",-1)),l(_r,{size:"x-small",class:"ml-1"},{default:u(()=>[...ue[122]||(ue[122]=[O("mdi-open-in-new",-1)])]),_:1})],8,UIe)):(R(),me("span",RIe,"Not specified"))])]),_:2},1024),Ye?.isGST&&Ye?.gstIdentifier?(R(),ve(_t,{key:0,cols:"12",class:"mb-2"},{default:u(()=>[p("div",NIe,[l(_r,{size:"small",class:"mr-2 text-medium-emphasis"},{default:u(()=>[...ue[125]||(ue[125]=[O("mdi-receipt",-1)])]),_:1}),ue[126]||(ue[126]=p("span",{class:"text-body-2 text-medium-emphasis mr-2"},"GST Number:",-1)),p("span",VIe,q(Ye.gstIdentifier),1)])]),_:2},1024)):_e("",!0)]),_:2},1024),p("div",LIe,[l(eu,{color:Ye?.isGST?"success":"default",variant:Ye?.isGST?"tonal":"outlined",size:"small",density:"comfortable",class:"mr-2 mb-1"},{default:u(()=>[l(_r,{start:"",size:"small"},{default:u(()=>[O(q(Ye?.isGST?"mdi-check-circle":"mdi-cancel"),1)]),_:2},1024),O(" "+q(Ye?.isGST?"GST Registered":"Non-GST"),1)]),_:2},1032,["color","variant"]),l(eu,{color:Ye?.isPharmacy?"primary":"default",variant:Ye?.isPharmacy?"tonal":"outlined",size:"small",density:"comfortable",class:"mb-1"},{default:u(()=>[l(_r,{start:"",size:"small"},{default:u(()=>[O(q(Ye?.isPharmacy?"mdi-pharmacy":"mdi-pharmacy-off"),1)]),_:2},1024),O(" "+q(Ye?.isPharmacy?"Pharmacy Enabled":"Pharmacy Disabled"),1)]),_:2},1032,["color","variant"])])]),_:2},1024)]),_:2},1024))),128)),l(ki,{modelValue:qn.value,"onUpdate:modelValue":ue[25]||(ue[25]=Ye=>qn.value=Ye),"max-width":"40%",persistent:""},{default:u(()=>[l(K4e,{doctor:E.value,onClose:Tt},null,8,["doctor"])]),_:1},8,["modelValue"]),l(ki,{modelValue:ut.value,"onUpdate:modelValue":ue[26]||(ue[26]=Ye=>ut.value=Ye),"max-width":"40%",persistent:""},{default:u(()=>[l(q4e,{onClose:kt})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(Go,{value:"clinicdetails"},{default:u(()=>[l(dn,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[l(_t,{cols:"12"},{default:u(()=>[l(vn,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(dn,{"no-gutters":""},{default:u(()=>[l(_t,{cols:"10"}),l(_t,{cols:"2",class:"d-flex justify-end"},{default:u(()=>[l(Sa,{onClick:ue[27]||(ue[27]=Ye=>wt.value=!0),class:"btn-hover-enhanced"},{default:u(()=>[...ue[127]||(ue[127]=[O("Create New",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(dn,{"no-gutters":""},{default:u(()=>[l(_t,{cols:"12",color:"surfaceContainer"},{default:u(()=>[!Le.value||Le.value.length===0?(R(),ve(xt,{key:0,type:"info",variant:"tonal",class:"ma-3"},{default:u(()=>[...ue[128]||(ue[128]=[O(' No clinics found. Click "Create New" to add a clinic. ',-1)])]),_:1})):_e("",!0),(R(!0),me(ze,null,Wt(Le.value||[],Ye=>(R(),ve(vn,{style:{textAlign:"left"},density:"compact",rounded:"lg",class:"ma-2 card-enhanced card-status-default card-hover-base",key:Ye?.id||Math.random()},{default:u(()=>[l(dn,{"no-gutters":""},{default:u(()=>[l(_t,{cols:"10"},{default:u(()=>[l(dn,{"no-gutters":""},{default:u(()=>[l(_t,{cols:"12"},{default:u(()=>[l(zt,null,{default:u(()=>[O(q(Ye?.clinicName||"Unknown Clinic"),1)]),_:2},1024)]),_:2},1024),l(_t,{cols:"12"},{default:u(()=>[l(qs,{class:"ma-0 pa-0 pl-4 pb-2"},{default:u(()=>[p("div",null,"Address: "+q(Ye?.clinicAddress||"Not specified"),1),p("div",null,"Contact: "+q(Ye?.contactNumber||"Not specified"),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),l(_t,{cols:"2",class:"d-flex justify-end align-center"},{default:u(()=>[l(dn,{"no-gutters":""},{default:u(()=>[l(_t,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[l(Ya,{text:"Edit Clinic Details"},{activator:u(({props:pr})=>[l(Sa,Fe({color:"secondary",variant:"plain",size:"large"},{ref_for:!0},pr,{onClick:tA=>je(Ye),class:"btn-hover-base"}),{default:u(()=>[l(_r,null,{default:u(()=>[...ue[129]||(ue[129]=[p("img",{src:qA},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024),l(qf),l(_t,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[l(Ya,{text:"Delete Clinic"},{activator:u(({props:pr})=>[l(Sa,Fe({color:"secondary",variant:"plain",size:"large"},{ref_for:!0},pr,{disabled:""}),{default:u(()=>[l(_r,null,{default:u(()=>[...ue[130]||(ue[130]=[p("img",{src:mc},null,-1)])]),_:1})]),_:1},16)]),_:1})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),l(ki,{modelValue:Zt.value,"onUpdate:modelValue":ue[28]||(ue[28]=Ye=>Zt.value=Ye),"max-width":"40%",persistent:""},{default:u(()=>[l(W4e,{clinic:C.value,onClose:Ke},null,8,["clinic"])]),_:1},8,["modelValue"]),l(ki,{modelValue:wt.value,"onUpdate:modelValue":ue[29]||(ue[29]=Ye=>wt.value=Ye),"max-width":"40%",persistent:""},{default:u(()=>[l(j4e,{onClose:Vt})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(Go,{value:"vitalsconfig"},{default:u(()=>[l(dn,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[l(_t,{cols:"12"},{default:u(()=>[l(vn,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(dn,{"no-gutters":""},{default:u(()=>[l(_t,{cols:"8",class:"d-flex align-center"},{default:u(()=>[p("div",MIe,[ft.value?(R(),me(ze,{key:0},[O(" Vitals Parameters Configured for: "+q(ft.value),1)],64)):(R(),me(ze,{key:1},[O(" Configure Vitals Parameters ")],64))])]),_:1}),l(_t,{cols:"4",class:"d-flex justify-end"},{default:u(()=>[l(Sa,{onClick:re,disabled:N.value,loading:N.value,class:"btn-hover-enhanced"},{default:u(()=>[...ue[131]||(ue[131]=[O(" Save Preferences ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),p("div",OIe,[l(dn,{"no-gutters":""},{default:u(()=>[l(_t,{cols:"12",color:"surfaceContainer"},{default:u(()=>[l(vn,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(zt,{class:"text-h6 mb-2"},{default:u(()=>[...ue[132]||(ue[132]=[O("Select Vitals Parameters",-1)])]),_:1}),l(In,{class:"text-subtitle-2 mb-1"},{default:u(()=>[...ue[133]||(ue[133]=[O("Basic Vitals",-1)])]),_:1}),l(dn,{"no-gutters":"",class:"mb-3"},{default:u(()=>[l(_t,{cols:"4",class:"pr-1"},{default:u(()=>[l(vr,{label:"Weight (kg)","model-value":!0,disabled:"",density:"compact",class:"input-hover",color:"primary"})]),_:1}),l(_t,{cols:"4",class:"px-1"},{default:u(()=>[l(vr,{modelValue:F.value.pulse,"onUpdate:modelValue":ue[30]||(ue[30]=Ye=>F.value.pulse=Ye),label:"Pulse (bpm)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1}),l(_t,{cols:"4",class:"pl-1"},{default:u(()=>[l(vr,{modelValue:F.value.temperature,"onUpdate:modelValue":ue[31]||(ue[31]=Ye=>F.value.temperature=Ye),label:"Temperature (C)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1}),l(_t,{cols:"4",class:"pr-1"},{default:u(()=>[l(vr,{modelValue:F.value.bloodPressure,"onUpdate:modelValue":ue[32]||(ue[32]=Ye=>F.value.bloodPressure=Ye),label:"Blood Pressure (mmHg)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1}),l(_t,{cols:"4",class:"px-1"},{default:u(()=>[l(vr,{modelValue:F.value.respiratoryRate,"onUpdate:modelValue":ue[33]||(ue[33]=Ye=>F.value.respiratoryRate=Ye),label:"Respiratory Rate (breaths/min)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1}),l(_t,{cols:"4",class:"pl-1"},{default:u(()=>[l(vr,{modelValue:F.value.height,"onUpdate:modelValue":ue[34]||(ue[34]=Ye=>F.value.height=Ye),label:"Height (cm)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1})]),_:1}),l(In,{class:"text-subtitle-2 mb-1"},{default:u(()=>[...ue[134]||(ue[134]=[O("Blood Chemistry Parameters",-1)])]),_:1}),l(dn,{"no-gutters":"",class:"mb-3"},{default:u(()=>[l(_t,{cols:"4",class:"pr-1"},{default:u(()=>[l(vr,{modelValue:F.value.serumBilirubin,"onUpdate:modelValue":ue[35]||(ue[35]=Ye=>F.value.serumBilirubin=Ye),label:"Serum Bilirubin (mg/dL)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1}),l(_t,{cols:"4",class:"px-1"},{default:u(()=>[l(vr,{modelValue:F.value.bloodGlucoseFF,"onUpdate:modelValue":ue[36]||(ue[36]=Ye=>F.value.bloodGlucoseFF=Ye),label:"Blood Glucose - FF (mg/dL)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1}),l(_t,{cols:"4",class:"pl-1"},{default:u(()=>[l(vr,{modelValue:F.value.bloodGlucosePP,"onUpdate:modelValue":ue[37]||(ue[37]=Ye=>F.value.bloodGlucosePP=Ye),label:"Blood Glucose - PP (mg/dL)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1}),l(_t,{cols:"4",class:"pr-1"},{default:u(()=>[l(vr,{modelValue:F.value.bloodGlucoseRandom,"onUpdate:modelValue":ue[38]||(ue[38]=Ye=>F.value.bloodGlucoseRandom=Ye),label:"Blood Glucose - Random (mg/dL)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1}),l(_t,{cols:"4",class:"px-1"},{default:u(()=>[l(vr,{modelValue:F.value.serumCreatinine,"onUpdate:modelValue":ue[39]||(ue[39]=Ye=>F.value.serumCreatinine=Ye),label:"Serum Creatinine (mg/dL)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1})]),_:1}),l(xt,{type:"info",variant:"tonal",density:"compact",class:"mt-2"},{default:u(()=>[...ue[135]||(ue[135]=[O(" These preferences will be applied to the vitals form and trends view. Weight is always enabled as it's considered essential. Blood chemistry parameters are advanced lab values that can be enabled as needed. ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1}),l(Go,{value:"receiptconfig"},{default:u(()=>[l(dn,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[l(_t,{cols:"12"},{default:u(()=>[l(vn,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(dn,{"no-gutters":""},{default:u(()=>[l(_t,{cols:"12",class:"d-flex align-center"},{default:u(()=>[p("div",HIe,[ft.value?(R(),me(ze,{key:0},[O(" Payment Receipt Configuration for: "+q(ft.value),1)],64)):(R(),me(ze,{key:1},[O(" Payment Receipt Configuration Settings ")],64))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),p("div",$Ie,[l(dn,{"no-gutters":""},{default:u(()=>[l(_t,{cols:"12",color:"surfaceContainer"},{default:u(()=>[l(Ps,{modelValue:ie.value,"onUpdate:modelValue":ue[44]||(ue[44]=Ye=>ie.value=Ye),"validate-on":"blur",onSubmit:mn(ge,["prevent"])},{default:u(()=>[l(dn,{"no-gutters":"",class:"ma-2 pa-2"},{default:u(()=>[l(_t,{cols:"12"},{default:u(()=>[l(vn,{flat:"",class:"mb-4",color:"surfaceContainer"},{default:u(()=>[l(zt,{class:"text-h6 mb-2"},{default:u(()=>[...ue[136]||(ue[136]=[O("Payment Receipt Series",-1)])]),_:1}),l(qs,null,{default:u(()=>[...ue[137]||(ue[137]=[O(" Create a new receipt series by specifying a 3-letter prefix and the first receipt number you want to use. The system will generate sequential receipt numbers starting from your specified number. ",-1)])]),_:1})]),_:1})]),_:1}),l(_t,{cols:"12",class:"mb-3"},{default:u(()=>[l(xt,{type:"info",variant:"tonal",density:"compact"},{default:u(()=>[...ue[138]||(ue[138]=[p("strong",null,"Example:",-1),O(' If you enter prefix "INV" and first number "000100", your receipts will be numbered "INV000100", "INV000101", "INV000102", and so on. ',-1)])]),_:1})]),_:1}),l(_t,{cols:"6",class:"pr-2"},{default:u(()=>[l(ir,{modelValue:L.value.prefix,"onUpdate:modelValue":ue[40]||(ue[40]=Ye=>L.value.prefix=Ye),label:"Prefix (3 letters) *",variant:"outlined",clearable:"",density:"compact",rules:rt,class:"input-hover",hint:"Enter 3 uppercase letters (e.g., INV, REC, PAY)",maxlength:"3",onInput:ue[41]||(ue[41]=Ye=>L.value.prefix=(Ye.target?.value||Ye||"").toString().toUpperCase())},null,8,["modelValue"])]),_:1}),l(_t,{cols:"6",class:"pl-2"},{default:u(()=>[l(ir,{modelValue:L.value.suffix,"onUpdate:modelValue":ue[42]||(ue[42]=Ye=>L.value.suffix=Ye),label:"First Receipt Number (6 digits) *",variant:"outlined",clearable:"",density:"compact",rules:it,class:"input-hover",hint:"Enter 6 digits (000001-999999). This will be your first receipt number.",maxlength:"6",onInput:ue[43]||(ue[43]=Ye=>L.value.suffix=(Ye.target?.value||Ye||"").toString().replace(/\D/g,""))},null,8,["modelValue"])]),_:1}),l(_t,{cols:"12",class:"mt-2"},{default:u(()=>[L.value.prefix&&L.value.suffix?(R(),ve(xt,{key:0,type:"success",variant:"tonal",density:"compact"},{default:u(()=>[ue[139]||(ue[139]=p("strong",null,"First Receipt Number:",-1)),O(" "+q(L.value.prefix)+q(L.value.suffix)+" ",1),ue[140]||(ue[140]=p("br",null,null,-1)),ue[141]||(ue[141]=p("strong",null,"Second Receipt Number:",-1)),O(" "+q(L.value.prefix)+q((parseInt(L.value.suffix)+1).toString().padStart(6,"0")),1)]),_:1})):(R(),ve(xt,{key:1,type:"info",variant:"tonal",density:"compact"},{default:u(()=>[ue[142]||(ue[142]=p("strong",null,"Preview:",-1)),O(" "+q(L.value.prefix||"XXX")+q(L.value.suffix||"000000")+" ",1),ue[143]||(ue[143]=p("br",null,null,-1)),ue[144]||(ue[144]=O("Enter both prefix and first receipt number to see the preview. ",-1))]),_:1}))]),_:1}),l(_t,{cols:"12",class:"mt-3 d-flex justify-center"},{default:u(()=>[l(Sa,{onClick:ge,disabled:!ie.value||le.value,loading:le.value,color:"primary",variant:"elevated",class:"btn-hover-enhanced"},{default:u(()=>[...ue[145]||(ue[145]=[O(" Create Series ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})])]),_:1}),Ft.value?(R(),ve(Go,{key:0,value:"billconfig"},{default:u(()=>[l(dn,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[l(_t,{cols:"12"},{default:u(()=>[l(vn,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(dn,{"no-gutters":""},{default:u(()=>[l(_t,{cols:"12",class:"d-flex align-center"},{default:u(()=>[p("div",QIe,[ft.value?(R(),me(ze,{key:0},[O(" GST Bill Series Configuration for: "+q(ft.value),1)],64)):(R(),me(ze,{key:1},[O(" GST Bill Series Configuration Settings ")],64))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),p("div",GIe,[l(dn,{"no-gutters":""},{default:u(()=>[l(_t,{cols:"12",color:"surfaceContainer"},{default:u(()=>[l(Ps,{modelValue:Z.value,"onUpdate:modelValue":ue[49]||(ue[49]=Ye=>Z.value=Ye),"validate-on":"blur",onSubmit:mn(Se,["prevent"])},{default:u(()=>[l(dn,{"no-gutters":"",class:"ma-2 pa-2"},{default:u(()=>[l(_t,{cols:"12"},{default:u(()=>[l(vn,{flat:"",class:"mb-4",color:"surfaceContainer"},{default:u(()=>[l(zt,{class:"text-h6 mb-2"},{default:u(()=>[...ue[146]||(ue[146]=[O("GST Bill Series",-1)])]),_:1}),l(qs,null,{default:u(()=>[...ue[147]||(ue[147]=[O(" Create a new GST bill series by specifying a 3-letter prefix and the first bill number you want to use. The system will generate sequential bill numbers starting from your specified number. This is separate from payment receipts and specifically for GST-registered billing. ",-1)])]),_:1})]),_:1})]),_:1}),l(_t,{cols:"12",class:"mb-3"},{default:u(()=>[l(xt,{type:"info",variant:"tonal",density:"compact"},{default:u(()=>[...ue[148]||(ue[148]=[p("strong",null,"Example:",-1),O(' If you enter prefix "BTX" and first number "000100", your GST bills will be numbered "BTX000100", "BTX000101", "BTX000102", and so on. ',-1),p("br",null,null,-1),p("strong",null,"Suggestion:",-1),O(' Use "BTX" for Bill Tax, "GST" for GST Bills, or your clinic initials. ',-1)])]),_:1})]),_:1}),l(_t,{cols:"6",class:"pr-2"},{default:u(()=>[l(ir,{modelValue:Q.value.prefix,"onUpdate:modelValue":ue[45]||(ue[45]=Ye=>Q.value.prefix=Ye),label:"Prefix (3 letters) *",variant:"outlined",clearable:"",density:"compact",rules:Ie,class:"input-hover",hint:"Enter 3 uppercase letters (e.g., BTX, GST, CLN)",maxlength:"3",onInput:ue[46]||(ue[46]=Ye=>Q.value.prefix=(Ye.target?.value||Ye||"").toString().toUpperCase())},null,8,["modelValue"])]),_:1}),l(_t,{cols:"6",class:"pl-2"},{default:u(()=>[l(ir,{modelValue:Q.value.suffix,"onUpdate:modelValue":ue[47]||(ue[47]=Ye=>Q.value.suffix=Ye),label:"First Bill Number (6 digits) *",variant:"outlined",clearable:"",density:"compact",rules:Ve,class:"input-hover",hint:"Enter 6 digits (000001-999999). This will be your first bill number.",maxlength:"6",onInput:ue[48]||(ue[48]=Ye=>Q.value.suffix=(Ye.target?.value||Ye||"").toString().replace(/\D/g,""))},null,8,["modelValue"])]),_:1}),l(_t,{cols:"12",class:"mt-2"},{default:u(()=>[Q.value.prefix&&Q.value.suffix?(R(),ve(xt,{key:0,type:"success",variant:"tonal",density:"compact"},{default:u(()=>[ue[149]||(ue[149]=p("strong",null,"First Bill Number:",-1)),O(" "+q(Q.value.prefix)+q(Q.value.suffix)+" ",1),ue[150]||(ue[150]=p("br",null,null,-1)),ue[151]||(ue[151]=p("strong",null,"Second Bill Number:",-1)),O(" "+q(Q.value.prefix)+q((parseInt(Q.value.suffix)+1).toString().padStart(6,"0")),1)]),_:1})):(R(),ve(xt,{key:1,type:"info",variant:"tonal",density:"compact"},{default:u(()=>[ue[152]||(ue[152]=p("strong",null,"Preview:",-1)),O(" "+q(Q.value.prefix||"XXX")+q(Q.value.suffix||"000000")+" ",1),ue[153]||(ue[153]=p("br",null,null,-1)),ue[154]||(ue[154]=O("Enter both prefix and first bill number to see the preview. ",-1))]),_:1}))]),_:1}),l(_t,{cols:"12",class:"mt-3 d-flex justify-center"},{default:u(()=>[l(Sa,{onClick:Se,disabled:!Z.value||ce.value,loading:ce.value,color:"primary",variant:"elevated",class:"btn-hover-enhanced"},{default:u(()=>[...ue[155]||(ue[155]=[O(" Create Bill Series ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})])]),_:1})):_e("",!0),l(Go,{value:"pharmacyconfig"},{default:u(()=>[l(dn,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[l(_t,{cols:"12"},{default:u(()=>[l(vn,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(dn,{"no-gutters":""},{default:u(()=>[l(_t,{cols:"8",class:"d-flex align-center"},{default:u(()=>[...ue[156]||(ue[156]=[p("div",{class:"text-subtitle-2 ml-2"}," Pharmacy Print Configuration Settings ",-1)])]),_:1}),l(_t,{cols:"4",class:"d-flex justify-end"},{default:u(()=>[l(Sa,{onClick:Te,disabled:!se.value||G.value,loading:G.value,class:"btn-hover-enhanced"},{default:u(()=>[...ue[157]||(ue[157]=[O(" SAVE ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),p("div",zIe,[l(dn,{"no-gutters":""},{default:u(()=>[l(_t,{cols:"12",color:"surfaceContainer"},{default:u(()=>[l(Ps,{modelValue:se.value,"onUpdate:modelValue":ue[56]||(ue[56]=Ye=>se.value=Ye),"validate-on":"blur",onSubmit:mn(Te,["prevent"])},{default:u(()=>[l(dn,{"no-gutters":"",class:"ma-2 pa-2"},{default:u(()=>[l(_t,{cols:"12",class:"py-0 pl-2 pr-2"},{default:u(()=>[l($u,{modelValue:J.value.useHeader,"onUpdate:modelValue":ue[50]||(ue[50]=Ye=>J.value.useHeader=Ye),label:"Use Header on Pharmacy Bill",hint:"When disabled, blank space will be left at the top of each page for your custom pharmacy header",class:"input-hover",color:"primary",density:"compact"},null,8,["modelValue"])]),_:1}),l(_t,{cols:"12"},{default:u(()=>[l(ir,{modelValue:J.value.pharmacyName,"onUpdate:modelValue":ue[51]||(ue[51]=Ye=>J.value.pharmacyName=Ye),label:"Pharmacy Name *",variant:"outlined",clearable:"",density:"compact",class:"input-hover",rules:Oe(sr)},null,8,["modelValue","rules"])]),_:1}),l(_t,{cols:"12"},{default:u(()=>[l(ir,{modelValue:J.value.addressAndContactInfo,"onUpdate:modelValue":ue[52]||(ue[52]=Ye=>J.value.addressAndContactInfo=Ye),label:"Address and Contact Info",variant:"outlined",clearable:"",density:"compact",class:"input-hover"},null,8,["modelValue"])]),_:1}),l(_t,{cols:"12"},{default:u(()=>[l(ir,{modelValue:J.value.gstNumber,"onUpdate:modelValue":ue[53]||(ue[53]=Ye=>J.value.gstNumber=Ye),label:"GST Number",variant:"outlined",clearable:"",density:"compact",class:"input-hover"},null,8,["modelValue"])]),_:1}),l(_t,{cols:"12"},{default:u(()=>[l(ir,{modelValue:J.value.otherRegistrationInfo,"onUpdate:modelValue":ue[54]||(ue[54]=Ye=>J.value.otherRegistrationInfo=Ye),label:"Other Registration Information",variant:"outlined",clearable:"",density:"compact",class:"input-hover"},null,8,["modelValue"])]),_:1}),l(_t,{cols:"12"},{default:u(()=>[l(nl,{modelValue:J.value.pageSize,"onUpdate:modelValue":ue[55]||(ue[55]=Ye=>J.value.pageSize=Ye),label:"Page Size",items:yn,variant:"outlined",density:"compact",class:"input-hover",disabled:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})])]),_:1}),l(Go,{value:"usermanagement"},{default:u(()=>[l(dn,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[l(_t,{cols:"12"},{default:u(()=>[l(vn,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(dn,{"no-gutters":""},{default:u(()=>[l(_t,{cols:"8",class:"d-flex align-center"},{default:u(()=>[...ue[158]||(ue[158]=[p("div",{class:"text-subtitle-2 ml-2"}," User Management & Permissions ",-1)])]),_:1}),l(_t,{cols:"4",class:"d-flex justify-end"},{default:u(()=>[l(Sa,{onClick:It,color:"primary",class:"btn-hover-enhanced"},{default:u(()=>[l(_r,{left:""},{default:u(()=>[...ue[159]||(ue[159]=[O("mdi-plus",-1)])]),_:1}),ue[160]||(ue[160]=O(" Add User ",-1))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),p("div",KIe,[j.value?(R(),ve(dn,{key:0,"no-gutters":"",class:"justify-center py-8"},{default:u(()=>[l(Ut,{indeterminate:"",color:"primary"})]),_:1})):D.value.length?(R(),ve(dn,{key:2,"no-gutters":""},{default:u(()=>[l(_t,{cols:"12"},{default:u(()=>[(R(!0),me(ze,null,Wt(D.value,Ye=>(R(),ve(vn,{key:Ye.id,class:"mb-2 card-enhanced card-hover-base",outlined:""},{default:u(()=>[l(qs,{class:"d-flex align-center justify-space-between"},{default:u(()=>[p("div",WIe,[l(bv,{color:Ye.isActive?"primary":"grey",size:"40",class:"mr-3"},{default:u(()=>[p("span",jIe,q(et(Ye.name)),1)]),_:2},1032,["color"]),p("div",qIe,[p("div",YIe,[O(q(Ye.name)+" ",1),Ye.isAdmin?(R(),ve(eu,{key:0,"x-small":"",color:"primary",class:"ml-1",density:"compact",style:{height:"18px","font-size":"10px",padding:"0 6px"}},{default:u(()=>[...ue[164]||(ue[164]=[O("Admin",-1)])]),_:1})):_e("",!0),Ye.role?(R(),ve(eu,{key:1,"x-small":"",color:"success",class:"ml-1",density:"compact",style:{height:"18px","font-size":"10px",padding:"0 6px"}},{default:u(()=>[O(q(lt(Ye.role)),1)]),_:2},1024)):_e("",!0)]),p("div",XIe,[O(q(Ye.email||"No email")+" ",1),Ye.doctorId?(R(),ve(eu,{key:0,"x-small":"",color:"info",class:"ml-1",density:"compact",style:{height:"18px","font-size":"10px",padding:"0 6px"}},{default:u(()=>[...ue[165]||(ue[165]=[O("Doctor",-1)])]),_:1})):_e("",!0)]),p("div",JIe,[(R(!0),me(ze,null,Wt(Ye.permissions?.slice(0,3),pr=>(R(),ve(eu,{key:pr,"x-small":"",class:"mr-1 mt-1",density:"compact",style:{height:"18px","font-size":"10px",padding:"0 6px"}},{default:u(()=>[O(q(bt(pr)),1)]),_:2},1024))),128)),Ye.permissions?.length>3?(R(),me("span",ZIe," +"+q(Ye.permissions.length-3)+" more ",1)):_e("",!0)])])]),p("div",null,[l(Sa,{icon:"",size:"small",onClick:pr=>En(Ye),class:"mr-1"},{default:u(()=>[l(_r,null,{default:u(()=>[...ue[166]||(ue[166]=[O("mdi-pencil",-1)])]),_:1})]),_:1},8,["onClick"]),l(Sa,{icon:"",size:"small",onClick:pr=>Da(Ye),class:"mr-1"},{default:u(()=>[l(_r,null,{default:u(()=>[...ue[167]||(ue[167]=[O("mdi-key-variant",-1)])]),_:1})]),_:1},8,["onClick"]),l(xn,{"require-admin":""},{default:u(()=>[l(Sa,{icon:"",size:"small",onClick:pr=>Ga(Ye),disabled:_s(Ye),color:"error"},{default:u(()=>[l(_r,null,{default:u(()=>[...ue[168]||(ue[168]=[O("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick","disabled"])]),_:2},1024)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):(R(),ve(dn,{key:1,"no-gutters":"",class:"justify-center py-8"},{default:u(()=>[l(_t,{cols:"12",class:"text-center"},{default:u(()=>[l(_r,{size:"64",color:"grey-lighten-1"},{default:u(()=>[...ue[161]||(ue[161]=[O("mdi-account-group-outline",-1)])]),_:1}),ue[162]||(ue[162]=p("p",{class:"text-subtitle-1 mt-4"},"No users found",-1)),ue[163]||(ue[163]=p("p",{class:"text-caption text-grey"},'Click "Add User" to create your first user',-1))]),_:1})]),_:1}))])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(ki,{modelValue:H.value,"onUpdate:modelValue":ue[65]||(ue[65]=Ye=>H.value=Ye),"max-width":"600",scrollable:""},{default:u(()=>[l(vn,{class:"dialog-card"},{default:u(()=>[l(zt,{class:"dialog-header"},{default:u(()=>[ue[170]||(ue[170]=p("span",{class:"dialog-title"},"Create New User",-1)),l(ii),l(Sa,{icon:"",variant:"text",size:"small",onClick:ue[58]||(ue[58]=Ye=>H.value=!1),class:"dialog-close-btn"},{default:u(()=>[l(_r,null,{default:u(()=>[...ue[169]||(ue[169]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(qs,{class:"dialog-card-text"},{default:u(()=>[l(Ps,{ref:"createUserForm",modelValue:te.value,"onUpdate:modelValue":ue[63]||(ue[63]=Ye=>te.value=Ye)},{default:u(()=>[l(ir,{modelValue:K.value.name,"onUpdate:modelValue":ue[59]||(ue[59]=Ye=>K.value.name=Ye),label:"User Name *",variant:"outlined",density:"compact",rules:[Ye=>!!Ye||"Name is required"],class:"mb-2"},null,8,["modelValue","rules"]),l(ir,{modelValue:K.value.passcode,"onUpdate:modelValue":ue[60]||(ue[60]=Ye=>K.value.passcode=Ye),label:"Passcode *",variant:"outlined",density:"compact",rules:[Ye=>!!Ye||"Passcode is required",Ye=>Ye.length>=4||"Passcode must be at least 4 characters"],class:"mb-2"},null,8,["modelValue","rules"]),l(ir,{modelValue:K.value.email,"onUpdate:modelValue":ue[61]||(ue[61]=Ye=>K.value.email=Ye),label:"Email (optional)",variant:"outlined",density:"compact",type:"email",class:"mb-2"},null,8,["modelValue"]),l(AR,{user:K.value,"available-features":ne.value,"onUpdate:user":ue[62]||(ue[62]=Ye=>K.value=Ye)},null,8,["user","available-features"])]),_:1},8,["modelValue"])]),_:1}),l(al,{class:"dialog-actions"},{default:u(()=>[l(ii),l(Sa,{variant:"outlined",color:"grey-darken-1",onClick:ue[64]||(ue[64]=Ye=>H.value=!1),class:"dialog-cancel-btn"},{default:u(()=>[...ue[171]||(ue[171]=[O(" Cancel ",-1)])]),_:1}),l(Sa,{color:"primary",variant:"flat",disabled:!te.value,loading:Y.value,onClick:an,class:"dialog-save-btn"},{default:u(()=>[...ue[172]||(ue[172]=[O(" Create ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(ki,{modelValue:X.value,"onUpdate:modelValue":ue[72]||(ue[72]=Ye=>X.value=Ye),"max-width":"600",persistent:oe.value,scrollable:""},{default:u(()=>[de.value&&de.value.id&&Array.isArray(ne.value)&&Array.isArray(Je.value)?(R(),ve(vn,{key:0,class:"dialog-card"},{default:u(()=>[l(zt,{class:"dialog-header"},{default:u(()=>[p("span",eFe,"Edit User: "+q(de.value?.name),1),l(ii),l(Sa,{icon:"",variant:"text",size:"small",onClick:ue[66]||(ue[66]=Ye=>X.value=!1),disabled:oe.value,class:"dialog-close-btn"},{default:u(()=>[l(_r,null,{default:u(()=>[...ue[173]||(ue[173]=[O("mdi-close",-1)])]),_:1})]),_:1},8,["disabled"])]),_:1}),l(qs,{class:"dialog-card-text"},{default:u(()=>[l(Ps,{ref_key:"editUserForm",ref:W,modelValue:ae.value,"onUpdate:modelValue":ue[70]||(ue[70]=Ye=>ae.value=Ye)},{default:u(()=>[l(ir,{modelValue:de.value.name,"onUpdate:modelValue":ue[67]||(ue[67]=Ye=>de.value.name=Ye),label:"User Name *",variant:"outlined",density:"compact",rules:[Ye=>!!Ye||"Name is required"],"validate-on":"blur",class:"mb-2"},null,8,["modelValue","rules"]),l(ir,{modelValue:de.value.email,"onUpdate:modelValue":ue[68]||(ue[68]=Ye=>de.value.email=Ye),label:"Email (optional)",variant:"outlined",density:"compact",type:"email","validate-on":"blur",class:"mb-2"},null,8,["modelValue"]),de.value.isAdmin?_e("",!0):(R(),ve(AR,{key:0,user:de.value,"available-features":ne.value,"onUpdate:user":ue[69]||(ue[69]=Ye=>de.value=Ye)},null,8,["user","available-features"]))]),_:1},8,["modelValue"])]),_:1}),l(al,{class:"dialog-actions"},{default:u(()=>[l(ii),l(Sa,{variant:"outlined",color:"grey-darken-1",onClick:ue[71]||(ue[71]=Ye=>X.value=!1),disabled:oe.value,class:"dialog-cancel-btn"},{default:u(()=>[...ue[174]||(ue[174]=[O(" Cancel ",-1)])]),_:1},8,["disabled"]),l(Sa,{color:"primary",variant:"flat",disabled:!ae.value,loading:oe.value,onClick:hn,class:"dialog-save-btn"},{default:u(()=>[...ue[175]||(ue[175]=[O(" Save ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})):(R(),ve(vn,{key:1},{default:u(()=>[l(qs,null,{default:u(()=>[p("div",tFe,[l(Ut,{indeterminate:"",color:"primary"}),ue[176]||(ue[176]=p("p",{class:"mt-4"},"Loading user data...",-1))])]),_:1})]),_:1}))]),_:1},8,["modelValue","persistent"]),l(ki,{modelValue:Ce.value,"onUpdate:modelValue":ue[75]||(ue[75]=Ye=>Ce.value=Ye),"max-width":"400"},{default:u(()=>[l(vn,null,{default:u(()=>[l(zt,null,{default:u(()=>[...ue[177]||(ue[177]=[O("Reset Passcode",-1)])]),_:1}),l(qs,null,{default:u(()=>[p("p",nFe,"Enter a new passcode for "+q(xe.value?.name),1),l(ir,{modelValue:ke.value,"onUpdate:modelValue":ue[73]||(ue[73]=Ye=>ke.value=Ye),label:"New Passcode *",variant:"outlined",density:"compact",rules:[Ye=>!!Ye||"Passcode is required",Ye=>Ye.length>=4||"Passcode must be at least 4 characters"]},null,8,["modelValue","rules"])]),_:1}),l(al,null,{default:u(()=>[l(ii),l(Sa,{text:"",onClick:ue[74]||(ue[74]=Ye=>Ce.value=!1)},{default:u(()=>[...ue[178]||(ue[178]=[O("Cancel",-1)])]),_:1}),l(Sa,{color:"primary",disabled:!ke.value||ke.value.length<4,loading:De.value,onClick:Nr},{default:u(()=>[...ue[179]||(ue[179]=[O("Reset",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(ki,{modelValue:Ee.value,"onUpdate:modelValue":ue[78]||(ue[78]=Ye=>Ee.value=Ye),"max-width":"500"},{default:u(()=>[l(vn,null,{default:u(()=>[l(zt,{class:"text-error"},{default:u(()=>[l(_r,{color:"error",class:"mr-2"},{default:u(()=>[...ue[180]||(ue[180]=[O("mdi-alert-circle",-1)])]),_:1}),ue[181]||(ue[181]=O(" Delete User ",-1))]),_:1}),l(qs,null,{default:u(()=>[p("div",aFe,[p("p",rFe,[ue[182]||(ue[182]=O(" Are you sure you want to delete ",-1)),p("strong",null,q(ye.value?.name),1),ue[183]||(ue[183]=O("? ",-1))]),l(xt,{type:"warning",variant:"tonal",class:"mb-2"},{default:u(()=>[...ue[184]||(ue[184]=[p("div",{class:"text-caption"},[p("strong",null,"This action cannot be undone!")],-1),p("div",{class:"text-caption mt-1"},[O(" This will permanently delete: "),p("ul",{class:"mt-1 mb-0"},[p("li",null,"User account"),p("li",null,"All user permissions"),p("li",null,"All active sessions"),p("li",null,"All subscription data"),p("li",null,"All usage tracking data")])],-1)])]),_:1}),_s(ye.value)?(R(),ve(xt,{key:0,type:"error",variant:"tonal"},{default:u(()=>[...ue[185]||(ue[185]=[O(" You cannot delete your own account! ",-1)])]),_:1})):_e("",!0)]),l(ir,{modelValue:we.value,"onUpdate:modelValue":ue[76]||(ue[76]=Ye=>we.value=Ye),label:"Type 'DELETE' to confirm",variant:"outlined",density:"compact",rules:[Ye=>Ye==="DELETE"||"Please type DELETE to confirm"]},null,8,["modelValue","rules"])]),_:1}),l(al,null,{default:u(()=>[l(ii),l(Sa,{text:"",onClick:ue[77]||(ue[77]=Ye=>{Ee.value=!1,we.value=""})},{default:u(()=>[...ue[186]||(ue[186]=[O("Cancel",-1)])]),_:1}),l(Sa,{color:"error",disabled:we.value!=="DELETE"||_s(ye.value),loading:at.value,onClick:Qo},{default:u(()=>[...ue[187]||(ue[187]=[O(" Delete User ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(eA,{modelValue:f.value,"onUpdate:modelValue":ue[79]||(ue[79]=Ye=>f.value=Ye),class:"elevation-24",color:"success"},{default:u(()=>[O(q(m.value),1)]),_:1},8,["modelValue"]),l(eA,{modelValue:h.value,"onUpdate:modelValue":ue[80]||(ue[80]=Ye=>h.value=Ye),timeout:2e3,class:"elevation-24",color:"failure"},{default:u(()=>[O(q(v.value),1)]),_:1},8,["modelValue"])],64))]),_:1})}}},oFe=Xt(sFe,[["__scopeId","data-v-7d33d1fb"]]);var qH=1252,iFe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],BT={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},kT=function(e){iFe.indexOf(e)!=-1&&(qH=BT[0]=e)};function lFe(){kT(1252)}var xl=function(e){kT(e)};function YH(){xl(1200),lFe()}function fR(e){for(var t=[],n=0,a=e.length;n<a;++n)t[n]=e.charCodeAt(n);return t}function uFe(e){for(var t=[],n=0;n<e.length>>1;++n)t[n]=String.fromCharCode(e.charCodeAt(2*n)+(e.charCodeAt(2*n+1)<<8));return t.join("")}function XH(e){for(var t=[],n=0;n<e.length>>1;++n)t[n]=String.fromCharCode(e.charCodeAt(2*n+1)+(e.charCodeAt(2*n)<<8));return t.join("")}var bp=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1);return t==255&&n==254?uFe(e.slice(2)):t==254&&n==255?XH(e.slice(2)):t==65279?e.slice(1):e},gy=function(t){return String.fromCharCode(t)},mR=function(t){return String.fromCharCode(t)},T0,vd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function hR(e){for(var t="",n=0,a=0,r=0,s=0,o=0,i=0,c=0,A=0;A<e.length;)n=e.charCodeAt(A++),s=n>>2,a=e.charCodeAt(A++),o=(n&3)<<4|a>>4,r=e.charCodeAt(A++),i=(a&15)<<2|r>>6,c=r&63,isNaN(a)?i=c=64:isNaN(r)&&(c=64),t+=vd.charAt(s)+vd.charAt(o)+vd.charAt(i)+vd.charAt(c);return t}function Si(e){var t="",n=0,a=0,r=0,s=0,o=0,i=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var A=0;A<e.length;)s=vd.indexOf(e.charAt(A++)),o=vd.indexOf(e.charAt(A++)),n=s<<2|o>>4,t+=String.fromCharCode(n),i=vd.indexOf(e.charAt(A++)),a=(o&15)<<4|i>>2,i!==64&&(t+=String.fromCharCode(a)),c=vd.indexOf(e.charAt(A++)),r=(i&3)<<6|c,c!==64&&(t+=String.fromCharCode(r));return t}var ca=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),Pf=(function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,n){return n?new Buffer(t,n):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}})();function Od(e){return ca?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function vR(e){return ca?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var gl=function(t){return ca?Pf(t,"binary"):t.split("").map(function(n){return n.charCodeAt(0)&255})};function Df(e){if(Array.isArray(e))return e.map(function(a){return String.fromCharCode(a)}).join("");for(var t=[],n=0;n<e.length;++n)t[n]=String.fromCharCode(e[n]);return t.join("")}function TT(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return TT(new Uint8Array(e));for(var t=new Array(e.length),n=0;n<e.length;++n)t[n]=e[n];return t}var Ad=ca?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:Pf(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,n=0;for(t=0;t<e.length;++t)n+=e[t].length;var a=new Uint8Array(n),r=0;for(t=0,n=0;t<e.length;n+=r,++t)if(r=e[t].length,e[t]instanceof Uint8Array)a.set(e[t],n);else{if(typeof e[t]=="string")throw"wtf";a.set(new Uint8Array(e[t]),n)}return a}return[].concat.apply([],e.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function cFe(e){for(var t=[],n=0,a=e.length+250,r=Od(e.length+255),s=0;s<e.length;++s){var o=e.charCodeAt(s);if(o<128)r[n++]=o;else if(o<2048)r[n++]=192|o>>6&31,r[n++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var i=e.charCodeAt(++s)&1023;r[n++]=240|o>>8&7,r[n++]=128|o>>2&63,r[n++]=128|i>>6&15|(o&3)<<4,r[n++]=128|i&63}else r[n++]=224|o>>12&15,r[n++]=128|o>>6&63,r[n++]=128|o&63;n>a&&(t.push(r.slice(0,n)),n=0,r=Od(65535),a=65530)}return t.push(r.slice(0,n)),Ad(t)}var Vo=/\u0000/g,xp=/[\u0001-\u0006]/g;function uh(e){for(var t="",n=e.length-1;n>=0;)t+=e.charAt(n--);return t}function Cl(e,t){var n=""+e;return n.length>=t?n:Ir("0",t-n.length)+n}function IT(e,t){var n=""+e;return n.length>=t?n:Ir(" ",t-n.length)+n}function l2(e,t){var n=""+e;return n.length>=t?n:n+Ir(" ",t-n.length)}function dFe(e,t){var n=""+Math.round(e);return n.length>=t?n:Ir("0",t-n.length)+n}function AFe(e,t){var n=""+e;return n.length>=t?n:Ir("0",t-n.length)+n}var pR=Math.pow(2,32);function Tm(e,t){if(e>pR||e<-pR)return dFe(e,t);var n=Math.round(e);return AFe(n,t)}function u2(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var gR=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],PC=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function fFe(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var Xn={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},yR={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},mFe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function c2(e,t,n){for(var a=e<0?-1:1,r=e*a,s=0,o=1,i=0,c=1,A=0,d=0,f=Math.floor(r);A<t&&(f=Math.floor(r),i=f*o+s,d=f*A+c,!(r-f<5e-8));)r=1/(r-f),s=o,o=i,c=A,A=d;if(d>t&&(A>t?(d=c,i=s):(d=A,i=o)),!n)return[0,a*i,d];var m=Math.floor(a*i/d);return[m,a*i-m*d,d]}function MA(e,t,n){if(e>2958465||e<0)return null;var a=e|0,r=Math.floor(86400*(e-a)),s=0,o=[],i={D:a,T:r,u:86400*(e-a)-r,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(i.u)<1e-6&&(i.u=0),t&&t.date1904&&(a+=1462),i.u>.9999&&(i.u=0,++r==86400&&(i.T=r=0,++a,++i.D)),a===60)o=n?[1317,10,29]:[1900,2,29],s=3;else if(a===0)o=n?[1317,8,29]:[1900,1,0],s=6;else{a>60&&--a;var c=new Date(1900,0,1);c.setDate(c.getDate()+a-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),a<60&&(s=(s+6)%7),n&&(s=_Fe(c,o))}return i.y=o[0],i.m=o[1],i.d=o[2],i.S=r%60,r=Math.floor(r/60),i.M=r%60,r=Math.floor(r/60),i.H=r,i.q=s,i}var JH=new Date(1899,11,31,0,0,0),hFe=JH.getTime(),vFe=new Date(1900,2,1,0,0,0);function ZH(e,t){var n=e.getTime();return t?n-=1461*24*60*60*1e3:e>=vFe&&(n+=1440*60*1e3),(n-(hFe+(e.getTimezoneOffset()-JH.getTimezoneOffset())*6e4))/(1440*60*1e3)}function FT(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function pFe(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function gFe(e){var t=e<0?12:11,n=FT(e.toFixed(12));return n.length<=t||(n=e.toPrecision(10),n.length<=t)?n:e.toExponential(5)}function yFe(e){var t=FT(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function I0(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),n;return t>=-4&&t<=-1?n=e.toPrecision(10+t):Math.abs(t)<=9?n=gFe(e):t===10?n=e.toFixed(10).substr(0,12):n=yFe(e),FT(pFe(n.toUpperCase()))}function Af(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):I0(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return qi(14,ZH(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function _Fe(e,t){t[0]-=581;var n=e.getDay();return e<60&&(n=(n+6)%7),n}function wFe(e,t,n,a){var r="",s=0,o=0,i=n.y,c,A=0;switch(e){case 98:i=n.y+543;case 121:switch(t.length){case 1:case 2:c=i%100,A=2;break;default:c=i%1e4,A=4;break}break;case 109:switch(t.length){case 1:case 2:c=n.m,A=t.length;break;case 3:return PC[n.m-1][1];case 5:return PC[n.m-1][0];default:return PC[n.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=n.d,A=t.length;break;case 3:return gR[n.q][0];default:return gR[n.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(n.H+11)%12,A=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=n.H,A=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=n.M,A=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return n.u===0&&(t=="s"||t=="ss")?Cl(n.S,t.length):(a>=2?o=a===3?1e3:100:o=a===1?10:1,s=Math.round(o*(n.S+n.u)),s>=60*o&&(s=0),t==="s"?s===0?"0":""+s/o:(r=Cl(s,2+a),t==="ss"?r.substr(0,2):"."+r.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=n.D*24+n.H;break;case"[m]":case"[mm]":c=(n.D*24+n.H)*60+n.M;break;case"[s]":case"[ss]":c=((n.D*24+n.H)*60+n.M)*60+Math.round(n.S+n.u);break;default:throw"bad abstime format: "+t}A=t.length===3?1:2;break;case 101:c=i,A=1;break}var d=A>0?Cl(c,A):"";return d}function pd(e){var t=3;if(e.length<=t)return e;for(var n=e.length%t,a=e.substr(0,n);n!=e.length;n+=t)a+=(a.length>0?",":"")+e.substr(n,t);return a}var e$=/%/g;function bFe(e,t,n){var a=t.replace(e$,""),r=t.length-a.length;return vc(e,a,n*Math.pow(10,2*r))+Ir("%",r)}function xFe(e,t,n){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return vc(e,t.substr(0,a),n/Math.pow(10,3*(t.length-a)))}function t$(e,t){var n,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+t$(e,-t);var r=e.indexOf(".");r===-1&&(r=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%r;if(s<0&&(s+=r),n=(t/Math.pow(10,s)).toPrecision(a+1+(r+s)%r),n.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(o-n.length+s):n+="E+"+(o-s);n.substr(0,2)==="0.";)n=n.charAt(0)+n.substr(2,r)+"."+n.substr(2+r),n=n.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(i,c,A,d){return c+A+d.substr(0,(r+s)%r)+"."+d.substr(s)+"E"})}else n=t.toExponential(a);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var n$=/# (\?+)( ?)\/( ?)(\d+)/;function CFe(e,t,n){var a=parseInt(e[4],10),r=Math.round(t*a),s=Math.floor(r/a),o=r-s*a,i=a;return n+(s===0?"":""+s)+" "+(o===0?Ir(" ",e[1].length+1+e[4].length):IT(o,e[1].length)+e[2]+"/"+e[3]+Cl(i,e[4].length))}function SFe(e,t,n){return n+(t===0?"":""+t)+Ir(" ",e[1].length+2+e[4].length)}var a$=/^#*0*\.([0#]+)/,r$=/\).*[0#]/,s$=/\(###\) ###\\?-####/;function Po(e){for(var t="",n,a=0;a!=e.length;++a)switch(n=e.charCodeAt(a)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(n)}return t}function _R(e,t){var n=Math.pow(10,t);return""+Math.round(e*n)/n}function wR(e,t){var n=e-Math.floor(e),a=Math.pow(10,t);return t<(""+Math.round(n*a)).length?0:Math.round(n*a)}function EFe(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function BFe(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Li(e,t,n){if(e.charCodeAt(0)===40&&!t.match(r$)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?Li("n",a,n):"("+Li("n",a,-n)+")"}if(t.charCodeAt(t.length-1)===44)return xFe(e,t,n);if(t.indexOf("%")!==-1)return bFe(e,t,n);if(t.indexOf("E")!==-1)return t$(t,n);if(t.charCodeAt(0)===36)return"$"+Li(e,t.substr(t.charAt(1)==" "?2:1),n);var r,s,o,i,c=Math.abs(n),A=n<0?"-":"";if(t.match(/^00+$/))return A+Tm(c,t.length);if(t.match(/^[#?]+$/))return r=Tm(n,0),r==="0"&&(r=""),r.length>t.length?r:Po(t.substr(0,t.length-r.length))+r;if(s=t.match(n$))return CFe(s,c,A);if(t.match(/^#+0+$/))return A+Tm(c,t.length-t.indexOf("0"));if(s=t.match(a$))return r=_R(n,s[1].length).replace(/^([^\.]+)$/,"$1."+Po(s[1])).replace(/\.$/,"."+Po(s[1])).replace(/\.(\d*)$/,function(v,y){return"."+y+Ir("0",Po(s[1]).length-y.length)}),t.indexOf("0.")!==-1?r:r.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return A+_R(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return A+pd(Tm(c,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+Li(e,t,-n):pd(""+(Math.floor(n)+EFe(n,s[1].length)))+"."+Cl(wR(n,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return Li(e,t.replace(/^#,#*,/,""),n);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return r=uh(Li(e,t.replace(/[\\-]/g,""),n)),o=0,uh(uh(t.replace(/\\/g,"")).replace(/[0#]/g,function(v){return o<r.length?r.charAt(o++):v==="0"?"0":""}));if(t.match(s$))return r=Li(e,"##########",n),"("+r.substr(0,3)+") "+r.substr(3,3)+"-"+r.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),i=c2(c,Math.pow(10,o)-1,!1),r=""+A,d=vc("n",s[1],i[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),r+=d+s[2]+"/"+s[3],d=l2(i[2],o),d.length<s[4].length&&(d=Po(s[4].substr(s[4].length-d.length))+d),r+=d,r;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),i=c2(c,Math.pow(10,o)-1,!0),A+(i[0]||(i[1]?"":"0"))+" "+(i[1]?IT(i[1],o)+s[2]+"/"+s[3]+l2(i[2],o):Ir(" ",2*o+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return r=Tm(n,0),t.length<=r.length?r:Po(t.substr(0,t.length-r.length))+r;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){r=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=r.indexOf(".");var f=t.indexOf(".")-o,m=t.length-r.length-f;return Po(t.substr(0,f)+r+t.substr(t.length-m))}if(s=t.match(/^00,000\.([#0]*0)$/))return o=wR(n,s[1].length),n<0?"-"+Li(e,t,-n):pd(BFe(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?Cl(0,3-v.length):"")+v})+"."+Cl(o,s[1].length);switch(t){case"###,##0.00":return Li(e,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var h=pd(Tm(c,0));return h!=="0"?A+h:"";case"###,###.00":return Li(e,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return Li(e,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function kFe(e,t,n){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return vc(e,t.substr(0,a),n/Math.pow(10,3*(t.length-a)))}function TFe(e,t,n){var a=t.replace(e$,""),r=t.length-a.length;return vc(e,a,n*Math.pow(10,2*r))+Ir("%",r)}function o$(e,t){var n,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+o$(e,-t);var r=e.indexOf(".");r===-1&&(r=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%r;if(s<0&&(s+=r),n=(t/Math.pow(10,s)).toPrecision(a+1+(r+s)%r),!n.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(o-n.length+s):n+="E+"+(o-s),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(i,c,A,d){return c+A+d.substr(0,(r+s)%r)+"."+d.substr(s)+"E"})}else n=t.toExponential(a);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function cu(e,t,n){if(e.charCodeAt(0)===40&&!t.match(r$)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?cu("n",a,n):"("+cu("n",a,-n)+")"}if(t.charCodeAt(t.length-1)===44)return kFe(e,t,n);if(t.indexOf("%")!==-1)return TFe(e,t,n);if(t.indexOf("E")!==-1)return o$(t,n);if(t.charCodeAt(0)===36)return"$"+cu(e,t.substr(t.charAt(1)==" "?2:1),n);var r,s,o,i,c=Math.abs(n),A=n<0?"-":"";if(t.match(/^00+$/))return A+Cl(c,t.length);if(t.match(/^[#?]+$/))return r=""+n,n===0&&(r=""),r.length>t.length?r:Po(t.substr(0,t.length-r.length))+r;if(s=t.match(n$))return SFe(s,c,A);if(t.match(/^#+0+$/))return A+Cl(c,t.length-t.indexOf("0"));if(s=t.match(a$))return r=(""+n).replace(/^([^\.]+)$/,"$1."+Po(s[1])).replace(/\.$/,"."+Po(s[1])),r=r.replace(/\.(\d*)$/,function(v,y){return"."+y+Ir("0",Po(s[1]).length-y.length)}),t.indexOf("0.")!==-1?r:r.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return A+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return A+pd(""+c);if(s=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+cu(e,t,-n):pd(""+n)+"."+Ir("0",s[1].length);if(s=t.match(/^#,#*,#0/))return cu(e,t.replace(/^#,#*,/,""),n);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return r=uh(cu(e,t.replace(/[\\-]/g,""),n)),o=0,uh(uh(t.replace(/\\/g,"")).replace(/[0#]/g,function(v){return o<r.length?r.charAt(o++):v==="0"?"0":""}));if(t.match(s$))return r=cu(e,"##########",n),"("+r.substr(0,3)+") "+r.substr(3,3)+"-"+r.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),i=c2(c,Math.pow(10,o)-1,!1),r=""+A,d=vc("n",s[1],i[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),r+=d+s[2]+"/"+s[3],d=l2(i[2],o),d.length<s[4].length&&(d=Po(s[4].substr(s[4].length-d.length))+d),r+=d,r;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),i=c2(c,Math.pow(10,o)-1,!0),A+(i[0]||(i[1]?"":"0"))+" "+(i[1]?IT(i[1],o)+s[2]+"/"+s[3]+l2(i[2],o):Ir(" ",2*o+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return r=""+n,t.length<=r.length?r:Po(t.substr(0,t.length-r.length))+r;if(s=t.match(/^([#0]+)\.([#0]+)$/)){r=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=r.indexOf(".");var f=t.indexOf(".")-o,m=t.length-r.length-f;return Po(t.substr(0,f)+r+t.substr(t.length-m))}if(s=t.match(/^00,000\.([#0]*0)$/))return n<0?"-"+cu(e,t,-n):pd(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?Cl(0,3-v.length):"")+v})+"."+Cl(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var h=pd(""+c);return h!=="0"?A+h:"";default:if(t.match(/\.[0#?]*$/))return cu(e,t.slice(0,t.lastIndexOf(".")),n)+Po(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function vc(e,t,n){return(n|0)===n?cu(e,t,n):Li(e,t,n)}function IFe(e){for(var t=[],n=!1,a=0,r=0;a<e.length;++a)switch(e.charCodeAt(a)){case 34:n=!n;break;case 95:case 42:case 92:++a;break;case 59:t[t.length]=e.substr(r,a-r),r=a+1}if(t[t.length]=e.substr(r),n===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var i$=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function lv(e){for(var t=0,n="",a="";t<e.length;)switch(n=e.charAt(t)){case"G":u2(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(a=n;e.charAt(t++)!=="]"&&t<e.length;)a+=e.charAt(t);if(a.match(i$))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(n=e.charAt(++t))>-1||n=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===n;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function FFe(e,t,n,a){for(var r=[],s="",o=0,i="",c="t",A,d,f,m="H";o<e.length;)switch(i=e.charAt(o)){case"G":if(!u2(e,o))throw new Error("unrecognized character "+i+" in "+e);r[r.length]={t:"G",v:"General"},o+=7;break;case'"':for(s="";(f=e.charCodeAt(++o))!==34&&o<e.length;)s+=String.fromCharCode(f);r[r.length]={t:"t",v:s},++o;break;case"\\":var h=e.charAt(++o),v=h==="("||h===")"?h:"t";r[r.length]={t:v,v:h},++o;break;case"_":r[r.length]={t:"t",v:" "},o+=2;break;case"@":r[r.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(A==null&&(A=MA(t,n,e.charAt(o+1)==="2"),A==null))return"";r[r.length]={t:"X",v:e.substr(o,2)},c=i,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":i=i.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||A==null&&(A=MA(t,n),A==null))return"";for(s=i;++o<e.length&&e.charAt(o).toLowerCase()===i;)s+=i;i==="m"&&c.toLowerCase()==="h"&&(i="M"),i==="h"&&(i=m),r[r.length]={t:i,v:s},c=i;break;case"A":case"a":case"":var y={t:i,v:i};if(A==null&&(A=MA(t,n)),e.substr(o,3).toUpperCase()==="A/P"?(A!=null&&(y.v=A.H>=12?"P":"A"),y.t="T",m="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(A!=null&&(y.v=A.H>=12?"PM":"AM"),y.t="T",o+=5,m="h"):e.substr(o,5).toUpperCase()==="/"?(A!=null&&(y.v=A.H>=12?"":""),y.t="T",o+=5,m="h"):(y.t="t",++o),A==null&&y.t==="T")return"";r[r.length]=y,c=i;break;case"[":for(s=i;e.charAt(o++)!=="]"&&o<e.length;)s+=e.charAt(o);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(i$)){if(A==null&&(A=MA(t,n),A==null))return"";r[r.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",lv(e)||(r[r.length]={t:"t",v:s}));break;case".":if(A!=null){for(s=i;++o<e.length&&(i=e.charAt(o))==="0";)s+=i;r[r.length]={t:"s",v:s};break}case"0":case"#":for(s=i;++o<e.length&&"0#?.,E+-%".indexOf(i=e.charAt(o))>-1;)s+=i;r[r.length]={t:"n",v:s};break;case"?":for(s=i;e.charAt(++o)===i;)s+=i;r[r.length]={t:i,v:s},c=i;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":r[r.length]={t:a===1?"t":i,v:i},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=i;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)s+=e.charAt(o);r[r.length]={t:"D",v:s};break;case" ":r[r.length]={t:i,v:i},++o;break;case"$":r[r.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(i)===-1)throw new Error("unrecognized character "+i+" in "+e);r[r.length]={t:"t",v:i},++o;break}var g=0,w=0,b;for(o=r.length-1,c="t";o>=0;--o)switch(r[o].t){case"h":case"H":r[o].t=m,c="h",g<1&&(g=1);break;case"s":(b=r[o].v.match(/\.0+$/))&&(w=Math.max(w,b[0].length-1)),g<3&&(g=3);case"d":case"y":case"M":case"e":c=r[o].t;break;case"m":c==="s"&&(r[o].t="M",g<2&&(g=2));break;case"X":break;case"Z":g<1&&r[o].v.match(/[Hh]/)&&(g=1),g<2&&r[o].v.match(/[Mm]/)&&(g=2),g<3&&r[o].v.match(/[Ss]/)&&(g=3)}switch(g){case 0:break;case 1:A.u>=.5&&(A.u=0,++A.S),A.S>=60&&(A.S=0,++A.M),A.M>=60&&(A.M=0,++A.H);break;case 2:A.u>=.5&&(A.u=0,++A.S),A.S>=60&&(A.S=0,++A.M);break}var x="",T;for(o=0;o<r.length;++o)switch(r[o].t){case"t":case"T":case" ":case"D":break;case"X":r[o].v="",r[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":r[o].v=wFe(r[o].t.charCodeAt(0),r[o].v,A,w),r[o].t="t";break;case"n":case"?":for(T=o+1;r[T]!=null&&((i=r[T].t)==="?"||i==="D"||(i===" "||i==="t")&&r[T+1]!=null&&(r[T+1].t==="?"||r[T+1].t==="t"&&r[T+1].v==="/")||r[o].t==="("&&(i===" "||i==="n"||i===")")||i==="t"&&(r[T].v==="/"||r[T].v===" "&&r[T+1]!=null&&r[T+1].t=="?"));)r[o].v+=r[T].v,r[T]={v:"",t:";"},++T;x+=r[o].v,o=T-1;break;case"G":r[o].t="t",r[o].v=Af(t,n);break}var U="",k,S;if(x.length>0){x.charCodeAt(0)==40?(k=t<0&&x.charCodeAt(0)===45?-t:t,S=vc("n",x,k)):(k=t<0&&a>1?-t:t,S=vc("n",x,k),k<0&&r[0]&&r[0].t=="t"&&(S=S.substr(1),r[0].v="-"+r[0].v)),T=S.length-1;var E=r.length;for(o=0;o<r.length;++o)if(r[o]!=null&&r[o].t!="t"&&r[o].v.indexOf(".")>-1){E=o;break}var C=r.length;if(E===r.length&&S.indexOf("E")===-1){for(o=r.length-1;o>=0;--o)r[o]==null||"n?".indexOf(r[o].t)===-1||(T>=r[o].v.length-1?(T-=r[o].v.length,r[o].v=S.substr(T+1,r[o].v.length)):T<0?r[o].v="":(r[o].v=S.substr(0,T+1),T=-1),r[o].t="t",C=o);T>=0&&C<r.length&&(r[C].v=S.substr(0,T+1)+r[C].v)}else if(E!==r.length&&S.indexOf("E")===-1){for(T=S.indexOf(".")-1,o=E;o>=0;--o)if(!(r[o]==null||"n?".indexOf(r[o].t)===-1)){for(d=r[o].v.indexOf(".")>-1&&o===E?r[o].v.indexOf(".")-1:r[o].v.length-1,U=r[o].v.substr(d+1);d>=0;--d)T>=0&&(r[o].v.charAt(d)==="0"||r[o].v.charAt(d)==="#")&&(U=S.charAt(T--)+U);r[o].v=U,r[o].t="t",C=o}for(T>=0&&C<r.length&&(r[C].v=S.substr(0,T+1)+r[C].v),T=S.indexOf(".")+1,o=E;o<r.length;++o)if(!(r[o]==null||"n?(".indexOf(r[o].t)===-1&&o!==E)){for(d=r[o].v.indexOf(".")>-1&&o===E?r[o].v.indexOf(".")+1:0,U=r[o].v.substr(0,d);d<r[o].v.length;++d)T<S.length&&(U+=S.charAt(T++));r[o].v=U,r[o].t="t",C=o}}}for(o=0;o<r.length;++o)r[o]!=null&&"n?".indexOf(r[o].t)>-1&&(k=a>1&&t<0&&o>0&&r[o-1].v==="-"?-t:t,r[o].v=vc(r[o].t,r[o].v,k),r[o].t="t");var P="";for(o=0;o!==r.length;++o)r[o]!=null&&(P+=r[o].v);return P}var bR=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function xR(e,t){if(t==null)return!1;var n=parseFloat(t[2]);switch(t[1]){case"=":if(e==n)return!0;break;case">":if(e>n)return!0;break;case"<":if(e<n)return!0;break;case"<>":if(e!=n)return!0;break;case">=":if(e>=n)return!0;break;case"<=":if(e<=n)return!0;break}return!1}function PFe(e,t){var n=IFe(e),a=n.length,r=n[a-1].indexOf("@");if(a<4&&r>-1&&--a,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if(typeof t!="number")return[4,n.length===4||r>-1?n[n.length-1]:"@"];switch(n.length){case 1:n=r>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=r>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=r>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"];break}var s=t>0?n[0]:t<0?n[1]:n[2];if(n[0].indexOf("[")===-1&&n[1].indexOf("[")===-1)return[a,s];if(n[0].match(/\[[=<>]/)!=null||n[1].match(/\[[=<>]/)!=null){var o=n[0].match(bR),i=n[1].match(bR);return xR(t,o)?[a,n[0]]:xR(t,i)?[a,n[1]]:[a,n[o!=null&&i!=null?2:1]]}return[a,s]}function qi(e,t,n){n==null&&(n={});var a="";switch(typeof e){case"string":e=="m/d/yy"&&n.dateNF?a=n.dateNF:a=e;break;case"number":e==14&&n.dateNF?a=n.dateNF:a=(n.table!=null?n.table:Xn)[e],a==null&&(a=n.table&&n.table[yR[e]]||Xn[yR[e]]),a==null&&(a=mFe[e]||"General");break}if(u2(a,0))return Af(t,n);t instanceof Date&&(t=ZH(t,n.date1904));var r=PFe(a,t);if(u2(r[1]))return Af(t,n);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return FFe(r[1],t,n,r[0])}function ZA(e,t){if(typeof t!="number"){t=+t||-1;for(var n=0;n<392;++n){if(Xn[n]==null){t<0&&(t=n);continue}if(Xn[n]==e){t=n;break}}t<0&&(t=391)}return Xn[t]=e,t}function l$(){Xn=fFe()}var DFe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},u$=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function UFe(e){var t=typeof e=="number"?Xn[e]:e;return t=t.replace(u$,"(\\d+)"),new RegExp("^"+t+"$")}function RFe(e,t,n){var a=-1,r=-1,s=-1,o=-1,i=-1,c=-1;(t.match(u$)||[]).forEach(function(f,m){var h=parseInt(n[m+1],10);switch(f.toLowerCase().charAt(0)){case"y":a=h;break;case"d":s=h;break;case"h":o=h;break;case"s":c=h;break;case"m":o>=0?i=h:r=h;break}}),c>=0&&i==-1&&r>=0&&(i=r,r=-1);var A=(""+(a>=0?a:new Date().getFullYear())).slice(-4)+"-"+("00"+(r>=1?r:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);A.length==7&&(A="0"+A),A.length==8&&(A="20"+A);var d=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&i==-1&&c==-1?A:a==-1&&r==-1&&s==-1?d:A+"T"+d}var NFe=(function(){var e={};e.version="1.2.0";function t(){for(var S=0,E=new Array(256),C=0;C!=256;++C)S=C,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,E[C]=S;return typeof Int32Array<"u"?new Int32Array(E):E}var n=t();function a(S){var E=0,C=0,P=0,F=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(P=0;P!=256;++P)F[P]=S[P];for(P=0;P!=256;++P)for(C=S[P],E=256+P;E<4096;E+=256)C=F[E]=C>>>8^S[C&255];var N=[];for(P=1;P!=16;++P)N[P-1]=typeof Int32Array<"u"?F.subarray(P*256,P*256+256):F.slice(P*256,P*256+256);return N}var r=a(n),s=r[0],o=r[1],i=r[2],c=r[3],A=r[4],d=r[5],f=r[6],m=r[7],h=r[8],v=r[9],y=r[10],g=r[11],w=r[12],b=r[13],x=r[14];function T(S,E){for(var C=E^-1,P=0,F=S.length;P<F;)C=C>>>8^n[(C^S.charCodeAt(P++))&255];return~C}function U(S,E){for(var C=E^-1,P=S.length-15,F=0;F<P;)C=x[S[F++]^C&255]^b[S[F++]^C>>8&255]^w[S[F++]^C>>16&255]^g[S[F++]^C>>>24]^y[S[F++]]^v[S[F++]]^h[S[F++]]^m[S[F++]]^f[S[F++]]^d[S[F++]]^A[S[F++]]^c[S[F++]]^i[S[F++]]^o[S[F++]]^s[S[F++]]^n[S[F++]];for(P+=15;F<P;)C=C>>>8^n[(C^S[F++])&255];return~C}function k(S,E){for(var C=E^-1,P=0,F=S.length,N=0,L=0;P<F;)N=S.charCodeAt(P++),N<128?C=C>>>8^n[(C^N)&255]:N<2048?(C=C>>>8^n[(C^(192|N>>6&31))&255],C=C>>>8^n[(C^(128|N&63))&255]):N>=55296&&N<57344?(N=(N&1023)+64,L=S.charCodeAt(P++)&1023,C=C>>>8^n[(C^(240|N>>8&7))&255],C=C>>>8^n[(C^(128|N>>2&63))&255],C=C>>>8^n[(C^(128|L>>6&15|(N&3)<<4))&255],C=C>>>8^n[(C^(128|L&63))&255]):(C=C>>>8^n[(C^(224|N>>12&15))&255],C=C>>>8^n[(C^(128|N>>6&63))&255],C=C>>>8^n[(C^(128|N&63))&255]);return~C}return e.table=n,e.bstr=T,e.buf=U,e.str=k,e})(),ha=(function(){var t={};t.version="1.2.1";function n(Te,He){for(var Ue=Te.split("/"),Le=He.split("/"),Qe=0,pe=0,re=Math.min(Ue.length,Le.length);Qe<re;++Qe){if(pe=Ue[Qe].length-Le[Qe].length)return pe;if(Ue[Qe]!=Le[Qe])return Ue[Qe]<Le[Qe]?-1:1}return Ue.length-Le.length}function a(Te){if(Te.charAt(Te.length-1)=="/")return Te.slice(0,-1).indexOf("/")===-1?Te:a(Te.slice(0,-1));var He=Te.lastIndexOf("/");return He===-1?Te:Te.slice(0,He+1)}function r(Te){if(Te.charAt(Te.length-1)=="/")return r(Te.slice(0,-1));var He=Te.lastIndexOf("/");return He===-1?Te:Te.slice(He+1)}function s(Te,He){typeof He=="string"&&(He=new Date(He));var Ue=He.getHours();Ue=Ue<<6|He.getMinutes(),Ue=Ue<<5|He.getSeconds()>>>1,Te.write_shift(2,Ue);var Le=He.getFullYear()-1980;Le=Le<<4|He.getMonth()+1,Le=Le<<5|He.getDate(),Te.write_shift(2,Le)}function o(Te){var He=Te.read_shift(2)&65535,Ue=Te.read_shift(2)&65535,Le=new Date,Qe=Ue&31;Ue>>>=5;var pe=Ue&15;Ue>>>=4,Le.setMilliseconds(0),Le.setFullYear(Ue+1980),Le.setMonth(pe-1),Le.setDate(Qe);var re=He&31;He>>>=5;var ge=He&63;return He>>>=6,Le.setHours(He),Le.setMinutes(ge),Le.setSeconds(re<<1),Le}function i(Te){Ls(Te,0);for(var He={},Ue=0;Te.l<=Te.length-4;){var Le=Te.read_shift(2),Qe=Te.read_shift(2),pe=Te.l+Qe,re={};switch(Le){case 21589:Ue=Te.read_shift(1),Ue&1&&(re.mtime=Te.read_shift(4)),Qe>5&&(Ue&2&&(re.atime=Te.read_shift(4)),Ue&4&&(re.ctime=Te.read_shift(4))),re.mtime&&(re.mt=new Date(re.mtime*1e3));break}Te.l=pe,He[Le]=re}return He}var c;function A(){return c||(c={})}function d(Te,He){if(Te[0]==80&&Te[1]==75)return ut(Te,He);if((Te[0]|32)==109&&(Te[1]|32)==105)return Kt(Te,He);if(Te.length<512)throw new Error("CFB file size "+Te.length+" < 512");var Ue=3,Le=512,Qe=0,pe=0,re=0,ge=0,Se=0,Me=[],Ze=Te.slice(0,512);Ls(Ze,0);var nt=f(Ze);switch(Ue=nt[0],Ue){case 3:Le=512;break;case 4:Le=4096;break;case 0:if(nt[1]==0)return ut(Te,He);default:throw new Error("Major Version: Expected 3 or 4 saw "+Ue)}Le!==512&&(Ze=Te.slice(0,Le),Ls(Ze,28));var et=Te.slice(0,Le);m(Ze,Ue);var lt=Ze.read_shift(4,"i");if(Ue===3&&lt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+lt);Ze.l+=4,re=Ze.read_shift(4,"i"),Ze.l+=4,Ze.chk("00100000","Mini Stream Cutoff Size: "),ge=Ze.read_shift(4,"i"),Qe=Ze.read_shift(4,"i"),Se=Ze.read_shift(4,"i"),pe=Ze.read_shift(4,"i");for(var bt=-1,It=0;It<109&&(bt=Ze.read_shift(4,"i"),!(bt<0));++It)Me[It]=bt;var an=h(Te,Le);g(Se,pe,an,Le,Me);var En=b(an,re,Me,Le);En[re].name="!Directory",Qe>0&&ge!==L&&(En[ge].name="!MiniFAT"),En[Me[0]].name="!FAT",En.fat_addrs=Me,En.ssz=Le;var hn={},Cn=[],Da=[],Nr=[];x(re,En,an,Cn,Qe,hn,Da,ge),v(Da,Nr,Cn),Cn.shift();var jr={FileIndex:Da,FullPaths:Nr};return He&&He.raw&&(jr.raw={header:et,sectors:an}),jr}function f(Te){if(Te[Te.l]==80&&Te[Te.l+1]==75)return[0,0];Te.chk(ie,"Header Signature: "),Te.l+=16;var He=Te.read_shift(2,"u");return[Te.read_shift(2,"u"),He]}function m(Te,He){var Ue=9;switch(Te.l+=2,Ue=Te.read_shift(2)){case 9:if(He!=3)throw new Error("Sector Shift: Expected 9 saw "+Ue);break;case 12:if(He!=4)throw new Error("Sector Shift: Expected 12 saw "+Ue);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Ue)}Te.chk("0600","Mini Sector Shift: "),Te.chk("000000000000","Reserved: ")}function h(Te,He){for(var Ue=Math.ceil(Te.length/He)-1,Le=[],Qe=1;Qe<Ue;++Qe)Le[Qe-1]=Te.slice(Qe*He,(Qe+1)*He);return Le[Ue-1]=Te.slice(Ue*He),Le}function v(Te,He,Ue){for(var Le=0,Qe=0,pe=0,re=0,ge=0,Se=Ue.length,Me=[],Ze=[];Le<Se;++Le)Me[Le]=Ze[Le]=Le,He[Le]=Ue[Le];for(;ge<Ze.length;++ge)Le=Ze[ge],Qe=Te[Le].L,pe=Te[Le].R,re=Te[Le].C,Me[Le]===Le&&(Qe!==-1&&Me[Qe]!==Qe&&(Me[Le]=Me[Qe]),pe!==-1&&Me[pe]!==pe&&(Me[Le]=Me[pe])),re!==-1&&(Me[re]=Le),Qe!==-1&&Le!=Me[Le]&&(Me[Qe]=Me[Le],Ze.lastIndexOf(Qe)<ge&&Ze.push(Qe)),pe!==-1&&Le!=Me[Le]&&(Me[pe]=Me[Le],Ze.lastIndexOf(pe)<ge&&Ze.push(pe));for(Le=1;Le<Se;++Le)Me[Le]===Le&&(pe!==-1&&Me[pe]!==pe?Me[Le]=Me[pe]:Qe!==-1&&Me[Qe]!==Qe&&(Me[Le]=Me[Qe]));for(Le=1;Le<Se;++Le)if(Te[Le].type!==0){if(ge=Le,ge!=Me[ge])do ge=Me[ge],He[Le]=He[ge]+"/"+He[Le];while(ge!==0&&Me[ge]!==-1&&ge!=Me[ge]);Me[Le]=-1}for(He[0]+="/",Le=1;Le<Se;++Le)Te[Le].type!==2&&(He[Le]+="/")}function y(Te,He,Ue){for(var Le=Te.start,Qe=Te.size,pe=[],re=Le;Ue&&Qe>0&&re>=0;)pe.push(He.slice(re*N,re*N+N)),Qe-=N,re=PA(Ue,re*4);return pe.length===0?cs(0):Ad(pe).slice(0,Te.size)}function g(Te,He,Ue,Le,Qe){var pe=L;if(Te===L){if(He!==0)throw new Error("DIFAT chain shorter than expected")}else if(Te!==-1){var re=Ue[Te],ge=(Le>>>2)-1;if(!re)return;for(var Se=0;Se<ge&&(pe=PA(re,Se*4))!==L;++Se)Qe.push(pe);g(PA(re,Le-4),He-1,Ue,Le,Qe)}}function w(Te,He,Ue,Le,Qe){var pe=[],re=[];Qe||(Qe=[]);var ge=Le-1,Se=0,Me=0;for(Se=He;Se>=0;){Qe[Se]=!0,pe[pe.length]=Se,re.push(Te[Se]);var Ze=Ue[Math.floor(Se*4/Le)];if(Me=Se*4&ge,Le<4+Me)throw new Error("FAT boundary crossed: "+Se+" 4 "+Le);if(!Te[Ze])break;Se=PA(Te[Ze],Me)}return{nodes:pe,data:DR([re])}}function b(Te,He,Ue,Le){var Qe=Te.length,pe=[],re=[],ge=[],Se=[],Me=Le-1,Ze=0,nt=0,et=0,lt=0;for(Ze=0;Ze<Qe;++Ze)if(ge=[],et=Ze+He,et>=Qe&&(et-=Qe),!re[et]){Se=[];var bt=[];for(nt=et;nt>=0;){bt[nt]=!0,re[nt]=!0,ge[ge.length]=nt,Se.push(Te[nt]);var It=Ue[Math.floor(nt*4/Le)];if(lt=nt*4&Me,Le<4+lt)throw new Error("FAT boundary crossed: "+nt+" 4 "+Le);if(!Te[It]||(nt=PA(Te[It],lt),bt[nt]))break}pe[et]={nodes:ge,data:DR([Se])}}return pe}function x(Te,He,Ue,Le,Qe,pe,re,ge){for(var Se=0,Me=Le.length?2:0,Ze=He[Te].data,nt=0,et=0,lt;nt<Ze.length;nt+=128){var bt=Ze.slice(nt,nt+128);Ls(bt,64),et=bt.read_shift(2),lt=NT(bt,0,et-Me),Le.push(lt);var It={name:lt,type:bt.read_shift(1),color:bt.read_shift(1),L:bt.read_shift(4,"i"),R:bt.read_shift(4,"i"),C:bt.read_shift(4,"i"),clsid:bt.read_shift(16),state:bt.read_shift(4,"i"),start:0,size:0},an=bt.read_shift(2)+bt.read_shift(2)+bt.read_shift(2)+bt.read_shift(2);an!==0&&(It.ct=T(bt,bt.l-8));var En=bt.read_shift(2)+bt.read_shift(2)+bt.read_shift(2)+bt.read_shift(2);En!==0&&(It.mt=T(bt,bt.l-8)),It.start=bt.read_shift(4,"i"),It.size=bt.read_shift(4,"i"),It.size<0&&It.start<0&&(It.size=It.type=0,It.start=L,It.name=""),It.type===5?(Se=It.start,Qe>0&&Se!==L&&(He[Se].name="!StreamData")):It.size>=4096?(It.storage="fat",He[It.start]===void 0&&(He[It.start]=w(Ue,It.start,He.fat_addrs,He.ssz)),He[It.start].name=It.name,It.content=He[It.start].data.slice(0,It.size)):(It.storage="minifat",It.size<0?It.size=0:Se!==L&&It.start!==L&&He[Se]&&(It.content=y(It,He[Se].data,(He[ge]||{}).data))),It.content&&Ls(It.content,0),pe[lt]=It,re.push(It)}}function T(Te,He){return new Date((vi(Te,He+4)/1e7*Math.pow(2,32)+vi(Te,He)/1e7-11644473600)*1e3)}function U(Te,He){return A(),d(c.readFileSync(Te),He)}function k(Te,He){var Ue=He&&He.type;switch(Ue||ca&&Buffer.isBuffer(Te)&&(Ue="buffer"),Ue||"base64"){case"file":return U(Te,He);case"base64":return d(gl(Si(Te)),He);case"binary":return d(gl(Te),He)}return d(Te,He)}function S(Te,He){var Ue=He||{},Le=Ue.root||"Root Entry";if(Te.FullPaths||(Te.FullPaths=[]),Te.FileIndex||(Te.FileIndex=[]),Te.FullPaths.length!==Te.FileIndex.length)throw new Error("inconsistent CFB structure");Te.FullPaths.length===0&&(Te.FullPaths[0]=Le+"/",Te.FileIndex[0]={name:Le,type:5}),Ue.CLSID&&(Te.FileIndex[0].clsid=Ue.CLSID),E(Te)}function E(Te){var He="Sh33tJ5";if(!ha.find(Te,"/"+He)){var Ue=cs(4);Ue[0]=55,Ue[1]=Ue[3]=50,Ue[2]=54,Te.FileIndex.push({name:He,type:2,content:Ue,size:4,L:69,R:69,C:69}),Te.FullPaths.push(Te.FullPaths[0]+He),C(Te)}}function C(Te,He){S(Te);for(var Ue=!1,Le=!1,Qe=Te.FullPaths.length-1;Qe>=0;--Qe){var pe=Te.FileIndex[Qe];switch(pe.type){case 0:Le?Ue=!0:(Te.FileIndex.pop(),Te.FullPaths.pop());break;case 1:case 2:case 5:Le=!0,isNaN(pe.R*pe.L*pe.C)&&(Ue=!0),pe.R>-1&&pe.L>-1&&pe.R==pe.L&&(Ue=!0);break;default:Ue=!0;break}}if(!(!Ue&&!He)){var re=new Date(1987,1,19),ge=0,Se=Object.create?Object.create(null):{},Me=[];for(Qe=0;Qe<Te.FullPaths.length;++Qe)Se[Te.FullPaths[Qe]]=!0,Te.FileIndex[Qe].type!==0&&Me.push([Te.FullPaths[Qe],Te.FileIndex[Qe]]);for(Qe=0;Qe<Me.length;++Qe){var Ze=a(Me[Qe][0]);Le=Se[Ze],Le||(Me.push([Ze,{name:r(Ze).replace("/",""),type:1,clsid:Q,ct:re,mt:re,content:null}]),Se[Ze]=!0)}for(Me.sort(function(lt,bt){return n(lt[0],bt[0])}),Te.FullPaths=[],Te.FileIndex=[],Qe=0;Qe<Me.length;++Qe)Te.FullPaths[Qe]=Me[Qe][0],Te.FileIndex[Qe]=Me[Qe][1];for(Qe=0;Qe<Me.length;++Qe){var nt=Te.FileIndex[Qe],et=Te.FullPaths[Qe];if(nt.name=r(et).replace("/",""),nt.L=nt.R=nt.C=-(nt.color=1),nt.size=nt.content?nt.content.length:0,nt.start=0,nt.clsid=nt.clsid||Q,Qe===0)nt.C=Me.length>1?1:-1,nt.size=0,nt.type=5;else if(et.slice(-1)=="/"){for(ge=Qe+1;ge<Me.length&&a(Te.FullPaths[ge])!=et;++ge);for(nt.C=ge>=Me.length?-1:ge,ge=Qe+1;ge<Me.length&&a(Te.FullPaths[ge])!=a(et);++ge);nt.R=ge>=Me.length?-1:ge,nt.type=1}else a(Te.FullPaths[Qe+1]||"")==a(et)&&(nt.R=Qe+1),nt.type=2}}}function P(Te,He){var Ue=He||{};if(Ue.fileType=="mad")return Pt(Te,Ue);switch(C(Te),Ue.fileType){case"zip":return Zt(Te,Ue)}var Le=(function(lt){for(var bt=0,It=0,an=0;an<lt.FileIndex.length;++an){var En=lt.FileIndex[an];if(En.content){var hn=En.content.length;hn>0&&(hn<4096?bt+=hn+63>>6:It+=hn+511>>9)}}for(var Cn=lt.FullPaths.length+3>>2,Da=bt+7>>3,Nr=bt+127>>7,jr=Da+It+Cn+Nr,ys=jr+127>>7,_s=ys<=109?0:Math.ceil((ys-109)/127);jr+ys+_s+127>>7>ys;)_s=++ys<=109?0:Math.ceil((ys-109)/127);var Ga=[1,_s,ys,Nr,Cn,It,bt,0];return lt.FileIndex[0].size=bt<<6,Ga[7]=(lt.FileIndex[0].start=Ga[0]+Ga[1]+Ga[2]+Ga[3]+Ga[4]+Ga[5])+(Ga[6]+7>>3),Ga})(Te),Qe=cs(Le[7]<<9),pe=0,re=0;{for(pe=0;pe<8;++pe)Qe.write_shift(1,le[pe]);for(pe=0;pe<8;++pe)Qe.write_shift(2,0);for(Qe.write_shift(2,62),Qe.write_shift(2,3),Qe.write_shift(2,65534),Qe.write_shift(2,9),Qe.write_shift(2,6),pe=0;pe<3;++pe)Qe.write_shift(2,0);for(Qe.write_shift(4,0),Qe.write_shift(4,Le[2]),Qe.write_shift(4,Le[0]+Le[1]+Le[2]+Le[3]-1),Qe.write_shift(4,0),Qe.write_shift(4,4096),Qe.write_shift(4,Le[3]?Le[0]+Le[1]+Le[2]-1:L),Qe.write_shift(4,Le[3]),Qe.write_shift(-4,Le[1]?Le[0]-1:L),Qe.write_shift(4,Le[1]),pe=0;pe<109;++pe)Qe.write_shift(-4,pe<Le[2]?Le[1]+pe:-1)}if(Le[1])for(re=0;re<Le[1];++re){for(;pe<236+re*127;++pe)Qe.write_shift(-4,pe<Le[2]?Le[1]+pe:-1);Qe.write_shift(-4,re===Le[1]-1?L:re+1)}var ge=function(lt){for(re+=lt;pe<re-1;++pe)Qe.write_shift(-4,pe+1);lt&&(++pe,Qe.write_shift(-4,L))};for(re=pe=0,re+=Le[1];pe<re;++pe)Qe.write_shift(-4,Z.DIFSECT);for(re+=Le[2];pe<re;++pe)Qe.write_shift(-4,Z.FATSECT);ge(Le[3]),ge(Le[4]);for(var Se=0,Me=0,Ze=Te.FileIndex[0];Se<Te.FileIndex.length;++Se)Ze=Te.FileIndex[Se],Ze.content&&(Me=Ze.content.length,!(Me<4096)&&(Ze.start=re,ge(Me+511>>9)));for(ge(Le[6]+7>>3);Qe.l&511;)Qe.write_shift(-4,Z.ENDOFCHAIN);for(re=pe=0,Se=0;Se<Te.FileIndex.length;++Se)Ze=Te.FileIndex[Se],Ze.content&&(Me=Ze.content.length,!(!Me||Me>=4096)&&(Ze.start=re,ge(Me+63>>6)));for(;Qe.l&511;)Qe.write_shift(-4,Z.ENDOFCHAIN);for(pe=0;pe<Le[4]<<2;++pe){var nt=Te.FullPaths[pe];if(!nt||nt.length===0){for(Se=0;Se<17;++Se)Qe.write_shift(4,0);for(Se=0;Se<3;++Se)Qe.write_shift(4,-1);for(Se=0;Se<12;++Se)Qe.write_shift(4,0);continue}Ze=Te.FileIndex[pe],pe===0&&(Ze.start=Ze.size?Ze.start-1:L);var et=pe===0&&Ue.root||Ze.name;if(Me=2*(et.length+1),Qe.write_shift(64,et,"utf16le"),Qe.write_shift(2,Me),Qe.write_shift(1,Ze.type),Qe.write_shift(1,Ze.color),Qe.write_shift(-4,Ze.L),Qe.write_shift(-4,Ze.R),Qe.write_shift(-4,Ze.C),Ze.clsid)Qe.write_shift(16,Ze.clsid,"hex");else for(Se=0;Se<4;++Se)Qe.write_shift(4,0);Qe.write_shift(4,Ze.state||0),Qe.write_shift(4,0),Qe.write_shift(4,0),Qe.write_shift(4,0),Qe.write_shift(4,0),Qe.write_shift(4,Ze.start),Qe.write_shift(4,Ze.size),Qe.write_shift(4,0)}for(pe=1;pe<Te.FileIndex.length;++pe)if(Ze=Te.FileIndex[pe],Ze.size>=4096)if(Qe.l=Ze.start+1<<9,ca&&Buffer.isBuffer(Ze.content))Ze.content.copy(Qe,Qe.l,0,Ze.size),Qe.l+=Ze.size+511&-512;else{for(Se=0;Se<Ze.size;++Se)Qe.write_shift(1,Ze.content[Se]);for(;Se&511;++Se)Qe.write_shift(1,0)}for(pe=1;pe<Te.FileIndex.length;++pe)if(Ze=Te.FileIndex[pe],Ze.size>0&&Ze.size<4096)if(ca&&Buffer.isBuffer(Ze.content))Ze.content.copy(Qe,Qe.l,0,Ze.size),Qe.l+=Ze.size+63&-64;else{for(Se=0;Se<Ze.size;++Se)Qe.write_shift(1,Ze.content[Se]);for(;Se&63;++Se)Qe.write_shift(1,0)}if(ca)Qe.l=Qe.length;else for(;Qe.l<Qe.length;)Qe.write_shift(1,0);return Qe}function F(Te,He){var Ue=Te.FullPaths.map(function(Se){return Se.toUpperCase()}),Le=Ue.map(function(Se){var Me=Se.split("/");return Me[Me.length-(Se.slice(-1)=="/"?2:1)]}),Qe=!1;He.charCodeAt(0)===47?(Qe=!0,He=Ue[0].slice(0,-1)+He):Qe=He.indexOf("/")!==-1;var pe=He.toUpperCase(),re=Qe===!0?Ue.indexOf(pe):Le.indexOf(pe);if(re!==-1)return Te.FileIndex[re];var ge=!pe.match(xp);for(pe=pe.replace(Vo,""),ge&&(pe=pe.replace(xp,"!")),re=0;re<Ue.length;++re)if((ge?Ue[re].replace(xp,"!"):Ue[re]).replace(Vo,"")==pe||(ge?Le[re].replace(xp,"!"):Le[re]).replace(Vo,"")==pe)return Te.FileIndex[re];return null}var N=64,L=-2,ie="d0cf11e0a1b11ae1",le=[208,207,17,224,161,177,26,225],Q="00000000000000000000000000000000",Z={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:L,FREESECT:-1,HEADER_SIGNATURE:ie,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Q,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function ce(Te,He,Ue){A();var Le=P(Te,Ue);c.writeFileSync(He,Le)}function J(Te){for(var He=new Array(Te.length),Ue=0;Ue<Te.length;++Ue)He[Ue]=String.fromCharCode(Te[Ue]);return He.join("")}function se(Te,He){var Ue=P(Te,He);switch(He&&He.type||"buffer"){case"file":return A(),c.writeFileSync(He.filename,Ue),Ue;case"binary":return typeof Ue=="string"?Ue:J(Ue);case"base64":return hR(typeof Ue=="string"?Ue:J(Ue));case"buffer":if(ca)return Buffer.isBuffer(Ue)?Ue:Pf(Ue);case"array":return typeof Ue=="string"?gl(Ue):Ue}return Ue}var G;function D(Te){try{var He=Te.InflateRaw,Ue=new He;if(Ue._processChunk(new Uint8Array([3,0]),Ue._finishFlushFlag),Ue.bytesRead)G=Te;else throw new Error("zlib does not expose bytesRead")}catch(Le){console.error("cannot use native zlib: "+(Le.message||Le))}}function j(Te,He){if(!G)return $t(Te,He);var Ue=G.InflateRaw,Le=new Ue,Qe=Le._processChunk(Te.slice(Te.l),Le._finishFlushFlag);return Te.l+=Le.bytesRead,Qe}function ne(Te){return G?G.deflateRawSync(Te):tt(Te)}var H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],te=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Y=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function K(Te){var He=(Te<<1|Te<<11)&139536|(Te<<5|Te<<15)&558144;return(He>>16|He>>8|He)&255}for(var X=typeof Uint8Array<"u",ae=X?new Uint8Array(256):[],oe=0;oe<256;++oe)ae[oe]=K(oe);function W(Te,He){var Ue=ae[Te&255];return He<=8?Ue>>>8-He:(Ue=Ue<<8|ae[Te>>8&255],He<=16?Ue>>>16-He:(Ue=Ue<<8|ae[Te>>16&255],Ue>>>24-He))}function de(Te,He){var Ue=He&7,Le=He>>>3;return(Te[Le]|(Ue<=6?0:Te[Le+1]<<8))>>>Ue&3}function Ae(Te,He){var Ue=He&7,Le=He>>>3;return(Te[Le]|(Ue<=5?0:Te[Le+1]<<8))>>>Ue&7}function Ce(Te,He){var Ue=He&7,Le=He>>>3;return(Te[Le]|(Ue<=4?0:Te[Le+1]<<8))>>>Ue&15}function De(Te,He){var Ue=He&7,Le=He>>>3;return(Te[Le]|(Ue<=3?0:Te[Le+1]<<8))>>>Ue&31}function xe(Te,He){var Ue=He&7,Le=He>>>3;return(Te[Le]|(Ue<=1?0:Te[Le+1]<<8))>>>Ue&127}function ke(Te,He,Ue){var Le=He&7,Qe=He>>>3,pe=(1<<Ue)-1,re=Te[Qe]>>>Le;return Ue<8-Le||(re|=Te[Qe+1]<<8-Le,Ue<16-Le)||(re|=Te[Qe+2]<<16-Le,Ue<24-Le)||(re|=Te[Qe+3]<<24-Le),re&pe}function Ee(Te,He,Ue){var Le=He&7,Qe=He>>>3;return Le<=5?Te[Qe]|=(Ue&7)<<Le:(Te[Qe]|=Ue<<Le&255,Te[Qe+1]=(Ue&7)>>8-Le),He+3}function ye(Te,He,Ue){var Le=He&7,Qe=He>>>3;return Ue=(Ue&1)<<Le,Te[Qe]|=Ue,He+1}function we(Te,He,Ue){var Le=He&7,Qe=He>>>3;return Ue<<=Le,Te[Qe]|=Ue&255,Ue>>>=8,Te[Qe+1]=Ue,He+8}function at(Te,He,Ue){var Le=He&7,Qe=He>>>3;return Ue<<=Le,Te[Qe]|=Ue&255,Ue>>>=8,Te[Qe+1]=Ue&255,Te[Qe+2]=Ue>>>8,He+16}function Je(Te,He){var Ue=Te.length,Le=2*Ue>He?2*Ue:He+5,Qe=0;if(Ue>=He)return Te;if(ca){var pe=vR(Le);if(Te.copy)Te.copy(pe);else for(;Qe<Te.length;++Qe)pe[Qe]=Te[Qe];return pe}else if(X){var re=new Uint8Array(Le);if(re.set)re.set(Te);else for(;Qe<Ue;++Qe)re[Qe]=Te[Qe];return re}return Te.length=Le,Te}function rt(Te){for(var He=new Array(Te),Ue=0;Ue<Te;++Ue)He[Ue]=0;return He}function it(Te,He,Ue){var Le=1,Qe=0,pe=0,re=0,ge=0,Se=Te.length,Me=X?new Uint16Array(32):rt(32);for(pe=0;pe<32;++pe)Me[pe]=0;for(pe=Se;pe<Ue;++pe)Te[pe]=0;Se=Te.length;var Ze=X?new Uint16Array(Se):rt(Se);for(pe=0;pe<Se;++pe)Me[Qe=Te[pe]]++,Le<Qe&&(Le=Qe),Ze[pe]=0;for(Me[0]=0,pe=1;pe<=Le;++pe)Me[pe+16]=ge=ge+Me[pe-1]<<1;for(pe=0;pe<Se;++pe)ge=Te[pe],ge!=0&&(Ze[pe]=Me[ge+16]++);var nt=0;for(pe=0;pe<Se;++pe)if(nt=Te[pe],nt!=0)for(ge=W(Ze[pe],Le)>>Le-nt,re=(1<<Le+4-nt)-1;re>=0;--re)He[ge|re<<nt]=nt&15|pe<<4;return Le}var Ie=X?new Uint16Array(512):rt(512),Ve=X?new Uint16Array(32):rt(32);if(!X){for(var ft=0;ft<512;++ft)Ie[ft]=0;for(ft=0;ft<32;++ft)Ve[ft]=0}(function(){for(var Te=[],He=0;He<32;He++)Te.push(5);it(Te,Ve,32);var Ue=[];for(He=0;He<=143;He++)Ue.push(8);for(;He<=255;He++)Ue.push(9);for(;He<=279;He++)Ue.push(7);for(;He<=287;He++)Ue.push(8);it(Ue,Ie,288)})();var Ft=(function(){for(var He=X?new Uint8Array(32768):[],Ue=0,Le=0;Ue<Y.length-1;++Ue)for(;Le<Y[Ue+1];++Le)He[Le]=Ue;for(;Le<32768;++Le)He[Le]=29;var Qe=X?new Uint8Array(259):[];for(Ue=0,Le=0;Ue<te.length-1;++Ue)for(;Le<te[Ue+1];++Le)Qe[Le]=Ue;function pe(ge,Se){for(var Me=0;Me<ge.length;){var Ze=Math.min(65535,ge.length-Me),nt=Me+Ze==ge.length;for(Se.write_shift(1,+nt),Se.write_shift(2,Ze),Se.write_shift(2,~Ze&65535);Ze-- >0;)Se[Se.l++]=ge[Me++]}return Se.l}function re(ge,Se){for(var Me=0,Ze=0,nt=X?new Uint16Array(32768):[];Ze<ge.length;){var et=Math.min(65535,ge.length-Ze);if(et<10){for(Me=Ee(Se,Me,+(Ze+et==ge.length)),Me&7&&(Me+=8-(Me&7)),Se.l=Me/8|0,Se.write_shift(2,et),Se.write_shift(2,~et&65535);et-- >0;)Se[Se.l++]=ge[Ze++];Me=Se.l*8;continue}Me=Ee(Se,Me,+(Ze+et==ge.length)+2);for(var lt=0;et-- >0;){var bt=ge[Ze];lt=(lt<<5^bt)&32767;var It=-1,an=0;if((It=nt[lt])&&(It|=Ze&-32768,It>Ze&&(It-=32768),It<Ze))for(;ge[It+an]==ge[Ze+an]&&an<250;)++an;if(an>2){bt=Qe[an],bt<=22?Me=we(Se,Me,ae[bt+1]>>1)-1:(we(Se,Me,3),Me+=5,we(Se,Me,ae[bt-23]>>5),Me+=3);var En=bt<8?0:bt-4>>2;En>0&&(at(Se,Me,an-te[bt]),Me+=En),bt=He[Ze-It],Me=we(Se,Me,ae[bt]>>3),Me-=3;var hn=bt<4?0:bt-2>>1;hn>0&&(at(Se,Me,Ze-It-Y[bt]),Me+=hn);for(var Cn=0;Cn<an;++Cn)nt[lt]=Ze&32767,lt=(lt<<5^ge[Ze])&32767,++Ze;et-=an-1}else bt<=143?bt=bt+48:Me=ye(Se,Me,1),Me=we(Se,Me,ae[bt]),nt[lt]=Ze&32767,++Ze}Me=we(Se,Me,0)-1}return Se.l=(Me+7)/8|0,Se.l}return function(Se,Me){return Se.length<8?pe(Se,Me):re(Se,Me)}})();function tt(Te){var He=cs(50+Math.floor(Te.length*1.1)),Ue=Ft(Te,He);return He.slice(0,Ue)}var Ge=X?new Uint16Array(32768):rt(32768),pt=X?new Uint16Array(32768):rt(32768),ht=X?new Uint16Array(128):rt(128),Nt=1,nn=1;function yn(Te,He){var Ue=De(Te,He)+257;He+=5;var Le=De(Te,He)+1;He+=5;var Qe=Ce(Te,He)+4;He+=4;for(var pe=0,re=X?new Uint8Array(19):rt(19),ge=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Se=1,Me=X?new Uint8Array(8):rt(8),Ze=X?new Uint8Array(8):rt(8),nt=re.length,et=0;et<Qe;++et)re[H[et]]=pe=Ae(Te,He),Se<pe&&(Se=pe),Me[pe]++,He+=3;var lt=0;for(Me[0]=0,et=1;et<=Se;++et)Ze[et]=lt=lt+Me[et-1]<<1;for(et=0;et<nt;++et)(lt=re[et])!=0&&(ge[et]=Ze[lt]++);var bt=0;for(et=0;et<nt;++et)if(bt=re[et],bt!=0){lt=ae[ge[et]]>>8-bt;for(var It=(1<<7-bt)-1;It>=0;--It)ht[lt|It<<bt]=bt&7|et<<3}var an=[];for(Se=1;an.length<Ue+Le;)switch(lt=ht[xe(Te,He)],He+=lt&7,lt>>>=3){case 16:for(pe=3+de(Te,He),He+=2,lt=an[an.length-1];pe-- >0;)an.push(lt);break;case 17:for(pe=3+Ae(Te,He),He+=3;pe-- >0;)an.push(0);break;case 18:for(pe=11+xe(Te,He),He+=7;pe-- >0;)an.push(0);break;default:an.push(lt),Se<lt&&(Se=lt);break}var En=an.slice(0,Ue),hn=an.slice(Ue);for(et=Ue;et<286;++et)En[et]=0;for(et=Le;et<30;++et)hn[et]=0;return Nt=it(En,Ge,286),nn=it(hn,pt,30),He}function qn(Te,He){if(Te[0]==3&&!(Te[1]&3))return[Od(He),2];for(var Ue=0,Le=0,Qe=vR(He||1<<18),pe=0,re=Qe.length>>>0,ge=0,Se=0;(Le&1)==0;){if(Le=Ae(Te,Ue),Ue+=3,Le>>>1)Le>>1==1?(ge=9,Se=5):(Ue=yn(Te,Ue),ge=Nt,Se=nn);else{Ue&7&&(Ue+=8-(Ue&7));var Me=Te[Ue>>>3]|Te[(Ue>>>3)+1]<<8;if(Ue+=32,Me>0)for(!He&&re<pe+Me&&(Qe=Je(Qe,pe+Me),re=Qe.length);Me-- >0;)Qe[pe++]=Te[Ue>>>3],Ue+=8;continue}for(;;){!He&&re<pe+32767&&(Qe=Je(Qe,pe+32767),re=Qe.length);var Ze=ke(Te,Ue,ge),nt=Le>>>1==1?Ie[Ze]:Ge[Ze];if(Ue+=nt&15,nt>>>=4,(nt>>>8&255)===0)Qe[pe++]=nt;else{if(nt==256)break;nt-=257;var et=nt<8?0:nt-4>>2;et>5&&(et=0);var lt=pe+te[nt];et>0&&(lt+=ke(Te,Ue,et),Ue+=et),Ze=ke(Te,Ue,Se),nt=Le>>>1==1?Ve[Ze]:pt[Ze],Ue+=nt&15,nt>>>=4;var bt=nt<4?0:nt-2>>1,It=Y[nt];for(bt>0&&(It+=ke(Te,Ue,bt),Ue+=bt),!He&&re<lt&&(Qe=Je(Qe,lt+100),re=Qe.length);pe<lt;)Qe[pe]=Qe[pe-It],++pe}}}return He?[Qe,Ue+7>>>3]:[Qe.slice(0,pe),Ue+7>>>3]}function $t(Te,He){var Ue=Te.slice(Te.l||0),Le=qn(Ue,He);return Te.l+=Le[1],Le[0]}function Tt(Te,He){if(Te)typeof console<"u"&&console.error(He);else throw new Error(He)}function ut(Te,He){var Ue=Te;Ls(Ue,0);var Le=[],Qe=[],pe={FileIndex:Le,FullPaths:Qe};S(pe,{root:He.root});for(var re=Ue.length-4;(Ue[re]!=80||Ue[re+1]!=75||Ue[re+2]!=5||Ue[re+3]!=6)&&re>=0;)--re;Ue.l=re+4,Ue.l+=4;var ge=Ue.read_shift(2);Ue.l+=6;var Se=Ue.read_shift(4);for(Ue.l=Se,re=0;re<ge;++re){Ue.l+=20;var Me=Ue.read_shift(4),Ze=Ue.read_shift(4),nt=Ue.read_shift(2),et=Ue.read_shift(2),lt=Ue.read_shift(2);Ue.l+=8;var bt=Ue.read_shift(4),It=i(Ue.slice(Ue.l+nt,Ue.l+nt+et));Ue.l+=nt+et+lt;var an=Ue.l;Ue.l=bt+4,kt(Ue,Me,Ze,pe,It),Ue.l=an}return pe}function kt(Te,He,Ue,Le,Qe){Te.l+=2;var pe=Te.read_shift(2),re=Te.read_shift(2),ge=o(Te);if(pe&8257)throw new Error("Unsupported ZIP encryption");for(var Se=Te.read_shift(4),Me=Te.read_shift(4),Ze=Te.read_shift(4),nt=Te.read_shift(2),et=Te.read_shift(2),lt="",bt=0;bt<nt;++bt)lt+=String.fromCharCode(Te[Te.l++]);if(et){var It=i(Te.slice(Te.l,Te.l+et));(It[21589]||{}).mt&&(ge=It[21589].mt),((Qe||{})[21589]||{}).mt&&(ge=Qe[21589].mt)}Te.l+=et;var an=Te.slice(Te.l,Te.l+Me);switch(re){case 8:an=j(Te,Ze);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+re)}var En=!1;pe&8&&(Se=Te.read_shift(4),Se==134695760&&(Se=Te.read_shift(4),En=!0),Me=Te.read_shift(4),Ze=Te.read_shift(4)),Me!=He&&Tt(En,"Bad compressed size: "+He+" != "+Me),Ze!=Ue&&Tt(En,"Bad uncompressed size: "+Ue+" != "+Ze),Nn(Le,lt,an,{unsafe:!0,mt:ge})}function Zt(Te,He){var Ue=He||{},Le=[],Qe=[],pe=cs(1),re=Ue.compression?8:0,ge=0,Se=0,Me=0,Ze=0,nt=0,et=Te.FullPaths[0],lt=et,bt=Te.FileIndex[0],It=[],an=0;for(Se=1;Se<Te.FullPaths.length;++Se)if(lt=Te.FullPaths[Se].slice(et.length),bt=Te.FileIndex[Se],!(!bt.size||!bt.content||lt=="Sh33tJ5")){var En=Ze,hn=cs(lt.length);for(Me=0;Me<lt.length;++Me)hn.write_shift(1,lt.charCodeAt(Me)&127);hn=hn.slice(0,hn.l),It[nt]=NFe.buf(bt.content,0);var Cn=bt.content;re==8&&(Cn=ne(Cn)),pe=cs(30),pe.write_shift(4,67324752),pe.write_shift(2,20),pe.write_shift(2,ge),pe.write_shift(2,re),bt.mt?s(pe,bt.mt):pe.write_shift(4,0),pe.write_shift(-4,It[nt]),pe.write_shift(4,Cn.length),pe.write_shift(4,bt.content.length),pe.write_shift(2,hn.length),pe.write_shift(2,0),Ze+=pe.length,Le.push(pe),Ze+=hn.length,Le.push(hn),Ze+=Cn.length,Le.push(Cn),pe=cs(46),pe.write_shift(4,33639248),pe.write_shift(2,0),pe.write_shift(2,20),pe.write_shift(2,ge),pe.write_shift(2,re),pe.write_shift(4,0),pe.write_shift(-4,It[nt]),pe.write_shift(4,Cn.length),pe.write_shift(4,bt.content.length),pe.write_shift(2,hn.length),pe.write_shift(2,0),pe.write_shift(2,0),pe.write_shift(2,0),pe.write_shift(2,0),pe.write_shift(4,0),pe.write_shift(4,En),an+=pe.l,Qe.push(pe),an+=hn.length,Qe.push(hn),++nt}return pe=cs(22),pe.write_shift(4,101010256),pe.write_shift(2,0),pe.write_shift(2,0),pe.write_shift(2,nt),pe.write_shift(2,nt),pe.write_shift(4,an),pe.write_shift(4,Ze),pe.write_shift(2,0),Ad([Ad(Le),Ad(Qe),pe])}var je={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Ke(Te,He){if(Te.ctype)return Te.ctype;var Ue=Te.name||"",Le=Ue.match(/\.([^\.]+)$/);return Le&&je[Le[1]]||He&&(Le=(Ue=He).match(/[\.\\]([^\.\\])+$/),Le&&je[Le[1]])?je[Le[1]]:"application/octet-stream"}function wt(Te){for(var He=hR(Te),Ue=[],Le=0;Le<He.length;Le+=76)Ue.push(He.slice(Le,Le+76));return Ue.join(`\r
`)+`\r
`}function Vt(Te){var He=Te.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Me){var Ze=Me.charCodeAt(0).toString(16).toUpperCase();return"="+(Ze.length==1?"0"+Ze:Ze)});He=He.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),He.charAt(0)==`
`&&(He="=0D"+He.slice(1)),He=He.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Ue=[],Le=He.split(`\r
`),Qe=0;Qe<Le.length;++Qe){var pe=Le[Qe];if(pe.length==0){Ue.push("");continue}for(var re=0;re<pe.length;){var ge=76,Se=pe.slice(re,re+ge);Se.charAt(ge-1)=="="?ge--:Se.charAt(ge-2)=="="?ge-=2:Se.charAt(ge-3)=="="&&(ge-=3),Se=pe.slice(re,re+ge),re+=ge,re<pe.length&&(Se+="="),Ue.push(Se)}}return Ue.join(`\r
`)}function qt(Te){for(var He=[],Ue=0;Ue<Te.length;++Ue){for(var Le=Te[Ue];Ue<=Te.length&&Le.charAt(Le.length-1)=="=";)Le=Le.slice(0,Le.length-1)+Te[++Ue];He.push(Le)}for(var Qe=0;Qe<He.length;++Qe)He[Qe]=He[Qe].replace(/[=][0-9A-Fa-f]{2}/g,function(pe){return String.fromCharCode(parseInt(pe.slice(1),16))});return gl(He.join(`\r
`))}function vt(Te,He,Ue){for(var Le="",Qe="",pe="",re,ge=0;ge<10;++ge){var Se=He[ge];if(!Se||Se.match(/^\s*$/))break;var Me=Se.match(/^(.*?):\s*([^\s].*)$/);if(Me)switch(Me[1].toLowerCase()){case"content-location":Le=Me[2].trim();break;case"content-type":pe=Me[2].trim();break;case"content-transfer-encoding":Qe=Me[2].trim();break}}switch(++ge,Qe.toLowerCase()){case"base64":re=gl(Si(He.slice(ge).join("")));break;case"quoted-printable":re=qt(He.slice(ge));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Qe)}var Ze=Nn(Te,Le.slice(Ue.length),re,{unsafe:!0});pe&&(Ze.ctype=pe)}function Kt(Te,He){if(J(Te.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Ue=He&&He.root||"",Le=(ca&&Buffer.isBuffer(Te)?Te.toString("binary"):J(Te)).split(`\r
`),Qe=0,pe="";for(Qe=0;Qe<Le.length;++Qe)if(pe=Le[Qe],!!/^Content-Location:/i.test(pe)&&(pe=pe.slice(pe.indexOf("file")),Ue||(Ue=pe.slice(0,pe.lastIndexOf("/")+1)),pe.slice(0,Ue.length)!=Ue))for(;Ue.length>0&&(Ue=Ue.slice(0,Ue.length-1),Ue=Ue.slice(0,Ue.lastIndexOf("/")+1),pe.slice(0,Ue.length)!=Ue););var re=(Le[1]||"").match(/boundary="(.*?)"/);if(!re)throw new Error("MAD cannot find boundary");var ge="--"+(re[1]||""),Se=[],Me=[],Ze={FileIndex:Se,FullPaths:Me};S(Ze);var nt,et=0;for(Qe=0;Qe<Le.length;++Qe){var lt=Le[Qe];lt!==ge&&lt!==ge+"--"||(et++&&vt(Ze,Le.slice(nt,Qe),Ue),nt=Qe)}return Ze}function Pt(Te,He){var Ue=He||{},Le=Ue.boundary||"SheetJS";Le="------="+Le;for(var Qe=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Le.slice(2)+'"',"","",""],pe=Te.FullPaths[0],re=pe,ge=Te.FileIndex[0],Se=1;Se<Te.FullPaths.length;++Se)if(re=Te.FullPaths[Se].slice(pe.length),ge=Te.FileIndex[Se],!(!ge.size||!ge.content||re=="Sh33tJ5")){re=re.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(an){return"_x"+an.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(an){return"_u"+an.charCodeAt(0).toString(16)+"_"});for(var Me=ge.content,Ze=ca&&Buffer.isBuffer(Me)?Me.toString("binary"):J(Me),nt=0,et=Math.min(1024,Ze.length),lt=0,bt=0;bt<=et;++bt)(lt=Ze.charCodeAt(bt))>=32&&lt<128&&++nt;var It=nt>=et*4/5;Qe.push(Le),Qe.push("Content-Location: "+(Ue.root||"file:///C:/SheetJS/")+re),Qe.push("Content-Transfer-Encoding: "+(It?"quoted-printable":"base64")),Qe.push("Content-Type: "+Ke(ge,re)),Qe.push(""),Qe.push(It?Vt(Ze):wt(Ze))}return Qe.push(Le+`--\r
`),Qe.join(`\r
`)}function Gn(Te){var He={};return S(He,Te),He}function Nn(Te,He,Ue,Le){var Qe=Le&&Le.unsafe;Qe||S(Te);var pe=!Qe&&ha.find(Te,He);if(!pe){var re=Te.FullPaths[0];He.slice(0,re.length)==re?re=He:(re.slice(-1)!="/"&&(re+="/"),re=(re+He).replace("//","/")),pe={name:r(He),type:2},Te.FileIndex.push(pe),Te.FullPaths.push(re),Qe||ha.utils.cfb_gc(Te)}return pe.content=Ue,pe.size=Ue?Ue.length:0,Le&&(Le.CLSID&&(pe.clsid=Le.CLSID),Le.mt&&(pe.mt=Le.mt),Le.ct&&(pe.ct=Le.ct)),pe}function On(Te,He){S(Te);var Ue=ha.find(Te,He);if(Ue){for(var Le=0;Le<Te.FileIndex.length;++Le)if(Te.FileIndex[Le]==Ue)return Te.FileIndex.splice(Le,1),Te.FullPaths.splice(Le,1),!0}return!1}function Yt(Te,He,Ue){S(Te);var Le=ha.find(Te,He);if(Le){for(var Qe=0;Qe<Te.FileIndex.length;++Qe)if(Te.FileIndex[Qe]==Le)return Te.FileIndex[Qe].name=r(Ue),Te.FullPaths[Qe]=Ue,!0}return!1}function Tn(Te){C(Te,!0)}return t.find=F,t.read=k,t.parse=d,t.write=se,t.writeFile=ce,t.utils={cfb_new:Gn,cfb_add:Nn,cfb_del:On,cfb_mov:Yt,cfb_gc:Tn,ReadShift:zp,CheckField:F$,prep_blob:Ls,bconcat:Ad,use_zlib:D,_deflateRaw:tt,_inflateRaw:$t,consts:Z},t})();function VFe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var n=t.read();return t.close(),n}catch(a){if(!a.message||!a.message.match(/onstruct/))throw a}throw new Error("Cannot access file "+e)}function Bu(e){for(var t=Object.keys(e),n=[],a=0;a<t.length;++a)Object.prototype.hasOwnProperty.call(e,t[a])&&n.push(t[a]);return n}function PT(e){for(var t=[],n=Bu(e),a=0;a!==n.length;++a)t[e[n[a]]]=n[a];return t}var d2=new Date(1899,11,30,0,0,0);function Oo(e,t){var n=e.getTime(),a=d2.getTime()+(e.getTimezoneOffset()-d2.getTimezoneOffset())*6e4;return(n-a)/(1440*60*1e3)}var c$=new Date,LFe=d2.getTime()+(c$.getTimezoneOffset()-d2.getTimezoneOffset())*6e4,CR=c$.getTimezoneOffset();function Mw(e){var t=new Date;return t.setTime(e*24*60*60*1e3+LFe),t.getTimezoneOffset()!==CR&&t.setTime(t.getTime()+(t.getTimezoneOffset()-CR)*6e4),t}function MFe(e){var t=0,n=0,a=!1,r=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!r)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var s=1;s!=r.length;++s)if(r[s]){switch(n=1,s>3&&(a=!0),r[s].slice(r[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+r[s].slice(r[s].length-1));case"D":n*=24;case"H":n*=60;case"M":if(a)n*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=n*parseInt(r[s],10)}return t}var SR=new Date("2017-02-19T19:06:09.000Z"),d$=isNaN(SR.getFullYear())?new Date("2/19/17"):SR,OFe=d$.getFullYear()==2017;function Is(e,t){var n=new Date(e);if(OFe)return t>0?n.setTime(n.getTime()+n.getTimezoneOffset()*60*1e3):t<0&&n.setTime(n.getTime()-n.getTimezoneOffset()*60*1e3),n;if(e instanceof Date)return e;if(d$.getFullYear()==1917&&!isNaN(n.getFullYear())){var a=n.getFullYear();return e.indexOf(""+a)>-1||n.setFullYear(n.getFullYear()+100),n}var r=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+r[0],+r[1]-1,+r[2],+r[3]||0,+r[4]||0,+r[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function ff(e,t){if(ca&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return Sp(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Sp(XH(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Sp(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Sp(new TextDecoder("utf-16be").decode(e.slice(2)))}var n={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(s){return n[s]||s})}catch{}for(var a=[],r=0;r!=e.length;++r)a.push(String.fromCharCode(e[r]));return a.join("")}function zs(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=zs(e[n]));return t}function Ir(e,t){for(var n="";n.length<t;)n+=e;return n}function Tl(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var n=1,a=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return n*=100,""});return!isNaN(t=Number(a))||(a=a.replace(/[(](.*)[)]/,function(r,s){return n=-n,s}),!isNaN(t=Number(a)))?t/n:t}var HFe=["january","february","march","april","may","june","july","august","september","october","november","december"];function Dh(e){var t=new Date(e),n=new Date(NaN),a=t.getYear(),r=t.getMonth(),s=t.getDate();if(isNaN(s))return n;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&HFe.indexOf(o)==-1)return n}else if(o.match(/[a-z]/))return n;return a<0||a>8099?n:(r>0||s>1)&&a!=101?t:e.match(/[^-0-9:,\/\\]/)?n:t}var $Fe=(function(){var e="abacaba".split(/(:?b)/i).length==5;return function(n,a,r){if(e||typeof a=="string")return n.split(a);for(var s=n.split(a),o=[s[0]],i=1;i<s.length;++i)o.push(r),o.push(s[i]);return o}})();function A$(e){return e?e.content&&e.type?ff(e.content,!0):e.data?bp(e.data):e.asNodeBuffer&&ca?bp(e.asNodeBuffer().toString("binary")):e.asBinary?bp(e.asBinary()):e._data&&e._data.getContent?bp(ff(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function f$(e){if(!e)return null;if(e.data)return fR(e.data);if(e.asNodeBuffer&&ca)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?fR(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function QFe(e){return e&&e.name.slice(-4)===".bin"?f$(e):A$(e)}function Hi(e,t){for(var n=e.FullPaths||Bu(e.files),a=t.toLowerCase().replace(/[\/]/g,"\\"),r=a.replace(/\\/g,"/"),s=0;s<n.length;++s){var o=n[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(a==o||r==o)return e.files?e.files[n[s]]:e.FileIndex[s]}return null}function DT(e,t){var n=Hi(e,t);if(n==null)throw new Error("Cannot find file "+t+" in zip");return n}function Xr(e,t,n){if(!n)return QFe(DT(e,t));if(!t)return null;try{return Xr(e,t)}catch{return null}}function pi(e,t,n){if(!n)return A$(DT(e,t));if(!t)return null;try{return pi(e,t)}catch{return null}}function GFe(e,t,n){return f$(DT(e,t))}function ER(e){for(var t=e.FullPaths||Bu(e.files),n=[],a=0;a<t.length;++a)t[a].slice(-1)!="/"&&n.push(t[a].replace(/^Root Entry[\/]/,""));return n.sort()}function zFe(e,t,n){if(e.FullPaths){if(typeof n=="string"){var a;return ca?a=Pf(n):a=cFe(n),ha.utils.cfb_add(e,t,a)}ha.utils.cfb_add(e,t,n)}else e.file(t,n)}function m$(e,t){switch(t.type){case"base64":return ha.read(e,{type:"base64"});case"binary":return ha.read(e,{type:"binary"});case"buffer":case"array":return ha.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Cp(e,t){if(e.charAt(0)=="/")return e.slice(1);var n=t.split("/");t.slice(-1)!="/"&&n.pop();for(var a=e.split("/");a.length!==0;){var r=a.shift();r===".."?n.pop():r!=="."&&n.push(r)}return n.join("/")}var h$=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,KFe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,BR=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,WFe=/<[^>]*>/g,bo=h$.match(BR)?BR:WFe,jFe=/<\w*:/,qFe=/<(\/?)\w+:/;function Ln(e,t,n){for(var a={},r=0,s=0;r!==e.length&&!((s=e.charCodeAt(r))===32||s===10||s===13);++r);if(t||(a[0]=e.slice(0,r)),r===e.length)return a;var o=e.match(KFe),i=0,c="",A=0,d="",f="",m=1;if(o)for(A=0;A!=o.length;++A){for(f=o[A],s=0;s!=f.length&&f.charCodeAt(s)!==61;++s);for(d=f.slice(0,s).trim();f.charCodeAt(s+1)==32;)++s;for(m=(r=f.charCodeAt(s+1))==34||r==39?1:0,c=f.slice(s+1+m,f.length-m),i=0;i!=d.length&&d.charCodeAt(i)!==58;++i);if(i===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),a[d]=c,a[d.toLowerCase()]=c;else{var h=(i===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(i+1);if(a[h]&&d.slice(i-3,i)=="ext")continue;a[h]=c,a[h.toLowerCase()]=c}}return a}function Lu(e){return e.replace(qFe,"<$1")}var v$={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},YFe=PT(v$),xa=(function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function n(a){var r=a+"",s=r.indexOf("<![CDATA[");if(s==-1)return r.replace(e,function(i,c){return v$[i]||String.fromCharCode(parseInt(c,i.indexOf("x")>-1?16:10))||i}).replace(t,function(i,c){return String.fromCharCode(parseInt(c,16))});var o=r.indexOf("]]>");return n(r.slice(0,s))+r.slice(s+9,o)+n(r.slice(o+3))}})(),XFe=/[&<>'"]/g,JFe=/[\u0000-\u001f]/g;function UT(e){var t=e+"";return t.replace(XFe,function(n){return YFe[n]}).replace(/\n/g,"<br/>").replace(JFe,function(n){return"&#x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+";"})}var kR=(function(){var e=/&#(\d+);/g;function t(n,a){return String.fromCharCode(parseInt(a,10))}return function(a){return a.replace(e,t)}})();function yr(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function DC(e){for(var t="",n=0,a=0,r=0,s=0,o=0,i=0;n<e.length;){if(a=e.charCodeAt(n++),a<128){t+=String.fromCharCode(a);continue}if(r=e.charCodeAt(n++),a>191&&a<224){o=(a&31)<<6,o|=r&63,t+=String.fromCharCode(o);continue}if(s=e.charCodeAt(n++),a<240){t+=String.fromCharCode((a&15)<<12|(r&63)<<6|s&63);continue}o=e.charCodeAt(n++),i=((a&7)<<18|(r&63)<<12|(s&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(i>>>10&1023)),t+=String.fromCharCode(56320+(i&1023))}return t}function TR(e){var t=Od(2*e.length),n,a,r=1,s=0,o=0,i;for(a=0;a<e.length;a+=r)r=1,(i=e.charCodeAt(a))<128?n=i:i<224?(n=(i&31)*64+(e.charCodeAt(a+1)&63),r=2):i<240?(n=(i&15)*4096+(e.charCodeAt(a+1)&63)*64+(e.charCodeAt(a+2)&63),r=3):(r=4,n=(i&7)*262144+(e.charCodeAt(a+1)&63)*4096+(e.charCodeAt(a+2)&63)*64+(e.charCodeAt(a+3)&63),n-=65536,o=55296+(n>>>10&1023),n=56320+(n&1023)),o!==0&&(t[s++]=o&255,t[s++]=o>>>8,o=0),t[s++]=n%256,t[s++]=n>>>8;return t.slice(0,s).toString("ucs2")}function IR(e){return Pf(e,"binary").toString("utf8")}var yy="foo bar baz",or=ca&&(IR(yy)==DC(yy)&&IR||TR(yy)==DC(yy)&&TR)||DC,Sp=ca?function(e){return Pf(e,"utf8").toString("binary")}:function(e){for(var t=[],n=0,a=0,r=0;n<e.length;)switch(a=e.charCodeAt(n++),!0){case a<128:t.push(String.fromCharCode(a));break;case a<2048:t.push(String.fromCharCode(192+(a>>6))),t.push(String.fromCharCode(128+(a&63)));break;case(a>=55296&&a<57344):a-=55296,r=e.charCodeAt(n++)-56320+(a<<10),t.push(String.fromCharCode(240+(r>>18&7))),t.push(String.fromCharCode(144+(r>>12&63))),t.push(String.fromCharCode(128+(r>>6&63))),t.push(String.fromCharCode(128+(r&63)));break;default:t.push(String.fromCharCode(224+(a>>12))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)))}return t.join("")},F0=(function(){var e={};return function(n,a){var r=n+"|"+(a||"");return e[r]?e[r]:e[r]=new RegExp("<(?:\\w+:)?"+n+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+n+">",a||"")}})(),p$=(function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(n){for(var a=n.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),r=0;r<e.length;++r)a=a.replace(e[r][0],e[r][1]);return a}})(),ZFe=(function(){var e={};return function(n){return e[n]!==void 0?e[n]:e[n]=new RegExp("<(?:vt:)?"+n+">([\\s\\S]*?)</(?:vt:)?"+n+">","g")}})(),ePe=/<\/?(?:vt:)?variant>/g,tPe=/<(?:vt:)([^>]*)>([\s\S]*)</;function FR(e,t){var n=Ln(e),a=e.match(ZFe(n.baseType))||[],r=[];if(a.length!=n.size){if(t.WTF)throw new Error("unexpected vector length "+a.length+" != "+n.size);return r}return a.forEach(function(s){var o=s.replace(ePe,"").match(tPe);o&&r.push({v:or(o[2]),t:o[1]})}),r}var nPe=/(^\s|\s$|\n)/;function aPe(e){return Bu(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function rPe(e,t,n){return"<"+e+(n!=null?aPe(n):"")+(t!=null?(t.match(nPe)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function RT(e){if(ca&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return or(Df(TT(e)));throw new Error("Bad input format: expected Buffer or string")}var P0=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,sPe={CT:"http://schemas.openxmlformats.org/package/2006/content-types"},oPe=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function iPe(e,t){for(var n=1-2*(e[t+7]>>>7),a=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),r=e[t+6]&15,s=5;s>=0;--s)r=r*256+e[t+s];return a==2047?r==0?n*(1/0):NaN:(a==0?a=-1022:(a-=1023,r+=Math.pow(2,52)),n*Math.pow(2,a-52)*r)}function lPe(e,t,n){var a=(t<0||1/t==-1/0?1:0)<<7,r=0,s=0,o=a?-t:t;isFinite(o)?o==0?r=s=0:(r=Math.floor(Math.log(o)/Math.LN2),s=o*Math.pow(2,52-r),r<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?r=-1022:(s-=Math.pow(2,52),r+=1023)):(r=2047,s=isNaN(t)?26985:0);for(var i=0;i<=5;++i,s/=256)e[n+i]=s&255;e[n+6]=(r&15)<<4|s&15,e[n+7]=r>>4|a}var PR=function(e){for(var t=[],n=10240,a=0;a<e[0].length;++a)if(e[0][a])for(var r=0,s=e[0][a].length;r<s;r+=n)t.push.apply(t,e[0][a].slice(r,r+n));return t},DR=ca?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:Pf(t)})):PR(e)}:PR,UR=function(e,t,n){for(var a=[],r=t;r<n;r+=2)a.push(String.fromCharCode(dc(e,r)));return a.join("").replace(Vo,"")},NT=ca?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf16le",t,n).replace(Vo,""):UR(e,t,n)}:UR,RR=function(e,t,n){for(var a=[],r=t;r<t+n;++r)a.push(("0"+e[r].toString(16)).slice(-2));return a.join("")},g$=ca?function(e,t,n){return Buffer.isBuffer(e)?e.toString("hex",t,t+n):RR(e,t,n)}:RR,NR=function(e,t,n){for(var a=[],r=t;r<n;r++)a.push(String.fromCharCode(Vm(e,r)));return a.join("")},_g=ca?function(t,n,a){return Buffer.isBuffer(t)?t.toString("utf8",n,a):NR(t,n,a)}:NR,y$=function(e,t){var n=vi(e,t);return n>0?_g(e,t+4,t+4+n-1):""},_$=y$,w$=function(e,t){var n=vi(e,t);return n>0?_g(e,t+4,t+4+n-1):""},b$=w$,x$=function(e,t){var n=2*vi(e,t);return n>0?_g(e,t+4,t+4+n-1):""},C$=x$,S$=function(t,n){var a=vi(t,n);return a>0?NT(t,n+4,n+4+a):""},E$=S$,B$=function(e,t){var n=vi(e,t);return n>0?_g(e,t+4,t+4+n):""},k$=B$,T$=function(e,t){return iPe(e,t)},A2=T$,I$=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};ca&&(_$=function(t,n){if(!Buffer.isBuffer(t))return y$(t,n);var a=t.readUInt32LE(n);return a>0?t.toString("utf8",n+4,n+4+a-1):""},b$=function(t,n){if(!Buffer.isBuffer(t))return w$(t,n);var a=t.readUInt32LE(n);return a>0?t.toString("utf8",n+4,n+4+a-1):""},C$=function(t,n){if(!Buffer.isBuffer(t))return x$(t,n);var a=2*t.readUInt32LE(n);return t.toString("utf16le",n+4,n+4+a-1)},E$=function(t,n){if(!Buffer.isBuffer(t))return S$(t,n);var a=t.readUInt32LE(n);return t.toString("utf16le",n+4,n+4+a)},k$=function(t,n){if(!Buffer.isBuffer(t))return B$(t,n);var a=t.readUInt32LE(n);return t.toString("utf8",n+4,n+4+a)},A2=function(t,n){return Buffer.isBuffer(t)?t.readDoubleLE(n):T$(t,n)},I$=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var Vm=function(e,t){return e[t]},dc=function(e,t){return e[t+1]*256+e[t]},uPe=function(e,t){var n=e[t+1]*256+e[t];return n<32768?n:(65535-n+1)*-1},vi=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},PA=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},cPe=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function zp(e,t){var n="",a,r,s=[],o,i,c,A;switch(t){case"dbcs":if(A=this.l,ca&&Buffer.isBuffer(this))n=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)n+=String.fromCharCode(dc(this,A)),A+=2;e*=2;break;case"utf8":n=_g(this,this.l,this.l+e);break;case"utf16le":e*=2,n=NT(this,this.l,this.l+e);break;case"wstr":return zp.call(this,e,"dbcs");case"lpstr-ansi":n=_$(this,this.l),e=4+vi(this,this.l);break;case"lpstr-cp":n=b$(this,this.l),e=4+vi(this,this.l);break;case"lpwstr":n=C$(this,this.l),e=4+2*vi(this,this.l);break;case"lpp4":e=4+vi(this,this.l),n=E$(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+vi(this,this.l),n=k$(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,n="";(o=Vm(this,this.l+e++))!==0;)s.push(gy(o));n=s.join("");break;case"_wstr":for(e=0,n="";(o=dc(this,this.l+e))!==0;)s.push(gy(o)),e+=2;e+=2,n=s.join("");break;case"dbcs-cont":for(n="",A=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(A)!==-1)return o=Vm(this,A),this.l=A+1,i=zp.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+i;s.push(gy(dc(this,A))),A+=2}n=s.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(n="",A=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(A)!==-1)return o=Vm(this,A),this.l=A+1,i=zp.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+i;s.push(gy(Vm(this,A))),A+=1}n=s.join("");break;default:switch(e){case 1:return a=Vm(this,this.l),this.l++,a;case 2:return a=(t==="i"?uPe:dc)(this,this.l),this.l+=2,a;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(a=(e>0?PA:cPe)(this,this.l),this.l+=4,a):(r=vi(this,this.l),this.l+=4,r);case 8:case-8:if(t==="f")return e==8?r=A2(this,this.l):r=A2([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,r;e=8;case 16:n=g$(this,this.l,e);break}}return this.l+=e,n}var dPe=function(e,t,n){e[n]=t&255,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24&255},APe=function(e,t,n){e[n]=t&255,e[n+1]=t>>8&255,e[n+2]=t>>16&255,e[n+3]=t>>24&255},fPe=function(e,t,n){e[n]=t&255,e[n+1]=t>>>8&255};function mPe(e,t,n){var a=0,r=0;if(n==="dbcs"){for(r=0;r!=t.length;++r)fPe(this,t.charCodeAt(r),this.l+2*r);a=2*t.length}else if(n==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),r=0;r!=t.length;++r)this[this.l+r]=t.charCodeAt(r)&255;a=t.length}else if(n==="hex"){for(;r<e;++r)this[this.l++]=parseInt(t.slice(2*r,2*r+2),16)||0;return this}else if(n==="utf16le"){var s=Math.min(this.l+e,this.length);for(r=0;r<Math.min(t.length,e);++r){var o=t.charCodeAt(r);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(e){case 1:a=1,this[this.l]=t&255;break;case 2:a=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:a=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:a=4,dPe(this,t,this.l);break;case 8:if(a=8,n==="f"){lPe(this,t,this.l);break}case 16:break;case-4:a=4,APe(this,t,this.l);break}return this.l+=a,this}function F$(e,t){var n=g$(this,this.l,e.length>>1);if(n!==e)throw new Error(t+"Expected "+e+" saw "+n);this.l+=e.length>>1}function Ls(e,t){e.l=t,e.read_shift=zp,e.chk=F$,e.write_shift=mPe}function yo(e,t){e.l+=t}function cs(e){var t=Od(e);return Ls(t,0),t}function Rc(e,t,n){if(e){var a,r,s;Ls(e,e.l||0);for(var o=e.length,i=0,c=0;e.l<o;){i=e.read_shift(1),i&128&&(i=(i&127)+((e.read_shift(1)&127)<<7));var A=g2[i]||g2[65535];for(a=e.read_shift(1),s=a&127,r=1;r<4&&a&128;++r)s+=((a=e.read_shift(1))&127)<<7*r;c=e.l+s;var d=A.f&&A.f(e,s,n);if(e.l=c,t(d,A,i))return}}}function UE(){var e=[],t=ca?256:2048,n=function(A){var d=cs(A);return Ls(d,0),d},a=n(t),r=function(){a&&(a.length>a.l&&(a=a.slice(0,a.l),a.l=a.length),a.length>0&&e.push(a),a=null)},s=function(A){return a&&A<a.length-a.l?a:(r(),a=n(Math.max(A+1,t)))},o=function(){return r(),Ad(e)},i=function(A){r(),a=A,a.l==null&&(a.l=a.length),s(t)};return{next:s,push:i,end:o,_bufs:e}}function Kp(e,t,n){var a=zs(e);if(t.s?(a.cRel&&(a.c+=t.s.c),a.rRel&&(a.r+=t.s.r)):(a.cRel&&(a.c+=t.c),a.rRel&&(a.r+=t.r)),!n||n.biff<12){for(;a.c>=256;)a.c-=256;for(;a.r>=65536;)a.r-=65536}return a}function VR(e,t,n){var a=zs(e);return a.s=Kp(a.s,t.s,n),a.e=Kp(a.e,t.s,n),a}function Wp(e,t){if(e.cRel&&e.c<0)for(e=zs(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=zs(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var n=Kn(e);return!e.cRel&&e.cRel!=null&&(n=pPe(n)),!e.rRel&&e.rRel!=null&&(n=hPe(n)),n}function UC(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+fs(e.s.c)+":"+(e.e.cRel?"":"$")+fs(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Ks(e.s.r)+":"+(e.e.rRel?"":"$")+Ks(e.e.r):Wp(e.s,t.biff)+":"+Wp(e.e,t.biff)}function VT(e){return parseInt(vPe(e),10)-1}function Ks(e){return""+(e+1)}function hPe(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function vPe(e){return e.replace(/\$(\d+)$/,"$1")}function LT(e){for(var t=gPe(e),n=0,a=0;a!==t.length;++a)n=26*n+t.charCodeAt(a)-64;return n-1}function fs(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function pPe(e){return e.replace(/^([A-Z])/,"$$$1")}function gPe(e){return e.replace(/^\$([A-Z])/,"$1")}function yPe(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Ro(e){for(var t=0,n=0,a=0;a<e.length;++a){var r=e.charCodeAt(a);r>=48&&r<=57?t=10*t+(r-48):r>=65&&r<=90&&(n=26*n+(r-64))}return{c:n-1,r:t-1}}function Kn(e){for(var t=e.c+1,n="";t;t=(t-1)/26|0)n=String.fromCharCode((t-1)%26+65)+n;return n+(e.r+1)}function uv(e){var t=e.indexOf(":");return t==-1?{s:Ro(e),e:Ro(e)}:{s:Ro(e.slice(0,t)),e:Ro(e.slice(t+1))}}function ga(e,t){return typeof t>"u"||typeof t=="number"?ga(e.s,e.e):(typeof e!="string"&&(e=Kn(e)),typeof t!="string"&&(t=Kn(t)),e==t?e:e+":"+t)}function Dr(e){var t={s:{c:0,r:0},e:{c:0,r:0}},n=0,a=0,r=0,s=e.length;for(n=0;a<s&&!((r=e.charCodeAt(a)-64)<1||r>26);++a)n=26*n+r;for(t.s.c=--n,n=0;a<s&&!((r=e.charCodeAt(a)-48)<0||r>9);++a)n=10*n+r;if(t.s.r=--n,a===s||r!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++a,n=0;a!=s&&!((r=e.charCodeAt(a)-64)<1||r>26);++a)n=26*n+r;for(t.e.c=--n,n=0;a!=s&&!((r=e.charCodeAt(a)-48)<0||r>9);++a)n=10*n+r;return t.e.r=--n,t}function LR(e,t){var n=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=qi(e.z,n?Oo(t):t)}catch{}try{return e.w=qi((e.XF||{}).numFmtId||(n?14:0),n?Oo(t):t)}catch{return""+t}}function kc(e,t,n){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&n&&n.dateNF&&(e.z=n.dateNF),e.t=="e"?Nf[e.v]||e.v:t==null?LR(e,e.v):LR(e,t))}function qd(e,t){var n=t&&t.sheet?t.sheet:"Sheet1",a={};return a[n]=e,{SheetNames:[n],Sheets:a}}function P$(e,t,n){var a=n||{},r=e?Array.isArray(e):a.dense,s=e||(r?[]:{}),o=0,i=0;if(s&&a.origin!=null){if(typeof a.origin=="number")o=a.origin;else{var c=typeof a.origin=="string"?Ro(a.origin):a.origin;o=c.r,i=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var A={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=Dr(s["!ref"]);A.s.c=d.s.c,A.s.r=d.s.r,A.e.c=Math.max(A.e.c,d.e.c),A.e.r=Math.max(A.e.r,d.e.r),o==-1&&(A.e.r=o=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var m=0;m!=t[f].length;++m)if(!(typeof t[f][m]>"u")){var h={v:t[f][m]},v=o+f,y=i+m;if(A.s.r>v&&(A.s.r=v),A.s.c>y&&(A.s.c=y),A.e.r<v&&(A.e.r=v),A.e.c<y&&(A.e.c=y),t[f][m]&&typeof t[f][m]=="object"&&!Array.isArray(t[f][m])&&!(t[f][m]instanceof Date))h=t[f][m];else if(Array.isArray(h.v)&&(h.f=t[f][m][1],h.v=h.v[0]),h.v===null)if(h.f)h.t="n";else if(a.nullError)h.t="e",h.v=0;else if(a.sheetStubs)h.t="z";else continue;else typeof h.v=="number"?h.t="n":typeof h.v=="boolean"?h.t="b":h.v instanceof Date?(h.z=a.dateNF||Xn[14],a.cellDates?(h.t="d",h.w=qi(h.z,Oo(h.v))):(h.t="n",h.v=Oo(h.v),h.w=qi(h.z,h.v))):h.t="s";if(r)s[v]||(s[v]=[]),s[v][y]&&s[v][y].z&&(h.z=s[v][y].z),s[v][y]=h;else{var g=Kn({c:y,r:v});s[g]&&s[g].z&&(h.z=s[g].z),s[g]=h}}}return A.s.c<1e7&&(s["!ref"]=ga(A)),s}function cv(e,t){return P$(null,e,t)}function _Pe(e){return e.read_shift(4,"i")}function po(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function wPe(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function MT(e,t){var n=e.l,a=e.read_shift(1),r=po(e),s=[],o={t:r,h:r};if((a&1)!==0){for(var i=e.read_shift(4),c=0;c!=i;++c)s.push(wPe(e));o.r=s}else o.r=[{ich:0,ifnt:0}];return e.l=n+t,o}var bPe=MT;function el(e){var t=e.read_shift(4),n=e.read_shift(2);return n+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:n}}function Uf(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}var xPe=po;function OT(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}var CPe=po,RE=OT;function HT(e){var t=e.slice(e.l,e.l+4),n=t[0]&1,a=t[0]&2;e.l+=4;var r=a===0?A2([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):PA(t,0)>>2;return n?r/100:r}function D$(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var Rf=D$;function co(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function SPe(e){var t={},n=e.read_shift(1),a=n>>>1,r=e.read_shift(1),s=e.read_shift(2,"i"),o=e.read_shift(1),i=e.read_shift(1),c=e.read_shift(1);switch(e.l++,a){case 0:t.auto=1;break;case 1:t.index=r;var A=ef[r];A&&(t.rgb=U0(A));break;case 2:t.rgb=U0([o,i,c]);break;case 3:t.theme=r;break}return s!=0&&(t.tint=s>0?s/32767:s/32768),t}function EPe(e){var t=e.read_shift(1);e.l++;var n={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return n}function U$(e,t){var n={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},a=e.read_shift(4);switch(a){case 0:return"";case 4294967295:case 4294967294:return n[e.read_shift(4)]||""}if(a>400)throw new Error("Unsupported Clipboard: "+a.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function BPe(e){return U$(e,1)}function kPe(e){return U$(e,2)}var $T=2,Yo=3,_y=11,MR=12,f2=19,wy=64,TPe=65,IPe=71,FPe=4108,PPe=4126,Es=80,R$=81,DPe=[Es,R$],UPe={1:{n:"CodePage",t:$T},2:{n:"Category",t:Es},3:{n:"PresentationFormat",t:Es},4:{n:"ByteCount",t:Yo},5:{n:"LineCount",t:Yo},6:{n:"ParagraphCount",t:Yo},7:{n:"SlideCount",t:Yo},8:{n:"NoteCount",t:Yo},9:{n:"HiddenCount",t:Yo},10:{n:"MultimediaClipCount",t:Yo},11:{n:"ScaleCrop",t:_y},12:{n:"HeadingPairs",t:FPe},13:{n:"TitlesOfParts",t:PPe},14:{n:"Manager",t:Es},15:{n:"Company",t:Es},16:{n:"LinksUpToDate",t:_y},17:{n:"CharacterCount",t:Yo},19:{n:"SharedDoc",t:_y},22:{n:"HyperlinksChanged",t:_y},23:{n:"AppVersion",t:Yo,p:"version"},24:{n:"DigSig",t:TPe},26:{n:"ContentType",t:Es},27:{n:"ContentStatus",t:Es},28:{n:"Language",t:Es},29:{n:"Version",t:Es},255:{},2147483648:{n:"Locale",t:f2},2147483651:{n:"Behavior",t:f2},1919054434:{}},RPe={1:{n:"CodePage",t:$T},2:{n:"Title",t:Es},3:{n:"Subject",t:Es},4:{n:"Author",t:Es},5:{n:"Keywords",t:Es},6:{n:"Comments",t:Es},7:{n:"Template",t:Es},8:{n:"LastAuthor",t:Es},9:{n:"RevNumber",t:Es},10:{n:"EditTime",t:wy},11:{n:"LastPrinted",t:wy},12:{n:"CreatedDate",t:wy},13:{n:"ModifiedDate",t:wy},14:{n:"PageCount",t:Yo},15:{n:"WordCount",t:Yo},16:{n:"CharCount",t:Yo},17:{n:"Thumbnail",t:IPe},18:{n:"Application",t:Es},19:{n:"DocSecurity",t:Yo},255:{},2147483648:{n:"Locale",t:f2},2147483651:{n:"Behavior",t:f2},1919054434:{}},OR={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},NPe=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function VPe(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var LPe=VPe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),ef=zs(LPe),Nf={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},N$={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},HR={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function MPe(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function OPe(e){var t=MPe();if(!e||!e.match)return t;var n={};if((e.match(bo)||[]).forEach(function(a){var r=Ln(a);switch(r[0].replace(jFe,"<")){case"<?xml":break;case"<Types":t.xmlns=r["xmlns"+(r[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":n[r.Extension]=r.ContentType;break;case"<Override":t[HR[r.ContentType]]!==void 0&&t[HR[r.ContentType]].push(r.PartName);break}}),t.xmlns!==sPe.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=n,delete t.calcchains,t}var $m={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function NE(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function jp(e,t){var n={"!id":{}};if(!e)return n;t.charAt(0)!=="/"&&(t="/"+t);var a={};return(e.match(bo)||[]).forEach(function(r){var s=Ln(r);if(s[0]==="<Relationship"){var o={};o.Type=s.Type,o.Target=s.Target,o.Id=s.Id,s.TargetMode&&(o.TargetMode=s.TargetMode);var i=s.TargetMode==="External"?s.Target:Cp(s.Target,t);n[i]=o,a[s.Id]=o}}),n["!id"]=a,n}var HPe="application/vnd.oasis.opendocument.spreadsheet";function $Pe(e,t){for(var n=RT(e),a,r;a=P0.exec(n);)switch(a[3]){case"manifest":break;case"file-entry":if(r=Ln(a[0],!1),r.path=="/"&&r.type!==HPe)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw a}}var qp=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],QPe=(function(){for(var e=new Array(qp.length),t=0;t<qp.length;++t){var n=qp[t],a="(?:"+n[0].slice(0,n[0].indexOf(":"))+":)"+n[0].slice(n[0].indexOf(":")+1);e[t]=new RegExp("<"+a+"[^>]*>([\\s\\S]*?)</"+a+">")}return e})();function V$(e){var t={};e=or(e);for(var n=0;n<qp.length;++n){var a=qp[n],r=e.match(QPe[n]);r!=null&&r.length>0&&(t[a[1]]=xa(r[1])),a[2]==="date"&&t[a[1]]&&(t[a[1]]=Is(t[a[1]]))}return t}var GPe=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function L$(e,t,n,a){var r=[];if(typeof e=="string")r=FR(e,a);else for(var s=0;s<e.length;++s)r=r.concat(e[s].map(function(d){return{v:d}}));var o=typeof t=="string"?FR(t,a).map(function(d){return d.v}):t,i=0,c=0;if(o.length>0)for(var A=0;A!==r.length;A+=2){switch(c=+r[A+1].v,r[A].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":n.Worksheets=c,n.SheetNames=o.slice(i,i+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":n.NamedRanges=c,n.DefinedNames=o.slice(i,i+c);break;case"Charts":case"Diagramme":n.Chartsheets=c,n.ChartNames=o.slice(i,i+c);break}i+=c}}function zPe(e,t,n){var a={};return t||(t={}),e=or(e),GPe.forEach(function(r){var s=(e.match(F0(r[0]))||[])[1];switch(r[2]){case"string":s&&(t[r[1]]=xa(s));break;case"bool":t[r[1]]=s==="true";break;case"raw":var o=e.match(new RegExp("<"+r[0]+"[^>]*>([\\s\\S]*?)</"+r[0]+">"));o&&o.length>0&&(a[r[1]]=o[1]);break}}),a.HeadingPairs&&a.TitlesOfParts&&L$(a.HeadingPairs,a.TitlesOfParts,t,n),t}var KPe=/<[^>]+>[^<]*/g;function WPe(e,t){var n={},a="",r=e.match(KPe);if(r)for(var s=0;s!=r.length;++s){var o=r[s],i=Ln(o);switch(i[0]){case"<?xml":break;case"<Properties":break;case"<property":a=xa(i.name);break;case"</property>":a=null;break;default:if(o.indexOf("<vt:")===0){var c=o.split(">"),A=c[0].slice(4),d=c[1];switch(A){case"lpstr":case"bstr":case"lpwstr":n[a]=xa(d);break;case"bool":n[a]=yr(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":n[a]=parseInt(d,10);break;case"r4":case"r8":case"decimal":n[a]=parseFloat(d);break;case"filetime":case"date":n[a]=Is(d);break;case"cy":case"error":n[a]=xa(d);break;default:if(A.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",o,A,c)}}else if(o.slice(0,2)!=="</"){if(t.WTF)throw new Error(o)}}}return n}var jPe={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},RC;function qPe(e,t,n){RC||(RC=PT(jPe)),t=RC[t]||t,e[t]=n}function QT(e){var t=e.read_shift(4),n=e.read_shift(4);return new Date((n/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function M$(e,t,n){var a=e.l,r=e.read_shift(0,"lpstr-cp");if(n)for(;e.l-a&3;)++e.l;return r}function O$(e,t,n){var a=e.read_shift(0,"lpwstr");return a}function H$(e,t,n){return t===31?O$(e):M$(e,t,n)}function VE(e,t,n){return H$(e,t,n===!1?0:4)}function YPe(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return H$(e,t,0)}function XPe(e){for(var t=e.read_shift(4),n=[],a=0;a!=t;++a){var r=e.l;n[a]=e.read_shift(0,"lpwstr").replace(Vo,""),e.l-r&2&&(e.l+=2)}return n}function JPe(e){for(var t=e.read_shift(4),n=[],a=0;a!=t;++a)n[a]=e.read_shift(0,"lpstr-cp").replace(Vo,"");return n}function ZPe(e){var t=e.l,n=m2(e,R$);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var a=m2(e,Yo);return[n,a]}function eDe(e){for(var t=e.read_shift(4),n=[],a=0;a<t/2;++a)n.push(ZPe(e));return n}function $R(e,t){for(var n=e.read_shift(4),a={},r=0;r!=n;++r){var s=e.read_shift(4),o=e.read_shift(4);a[s]=e.read_shift(o,t===1200?"utf16le":"utf8").replace(Vo,"").replace(xp,"!"),t===1200&&o%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),a}function $$(e){var t=e.read_shift(4),n=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),n}function tDe(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function m2(e,t,n){var a=e.read_shift(2),r,s=n||{};if(e.l+=2,t!==MR&&a!==t&&DPe.indexOf(t)===-1&&!((t&65534)==4126&&(a&65534)==4126))throw new Error("Expected type "+t+" saw "+a);switch(t===MR?a:t){case 2:return r=e.read_shift(2,"i"),s.raw||(e.l+=2),r;case 3:return r=e.read_shift(4,"i"),r;case 11:return e.read_shift(4)!==0;case 19:return r=e.read_shift(4),r;case 30:return M$(e,a,4).replace(Vo,"");case 31:return O$(e);case 64:return QT(e);case 65:return $$(e);case 71:return tDe(e);case 80:return VE(e,a,!s.raw).replace(Vo,"");case 81:return YPe(e,a).replace(Vo,"");case 4108:return eDe(e);case 4126:case 4127:return a==4127?XPe(e):JPe(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+a)}}function QR(e,t){var n=e.l,a=e.read_shift(4),r=e.read_shift(4),s=[],o=0,i=0,c=-1,A={};for(o=0;o!=r;++o){var d=e.read_shift(4),f=e.read_shift(4);s[o]=[d,f+n]}s.sort(function(b,x){return b[1]-x[1]});var m={};for(o=0;o!=r;++o){if(e.l!==s[o][1]){var h=!0;if(o>0&&t)switch(t[s[o-1][0]].t){case 2:e.l+2===s[o][1]&&(e.l+=2,h=!1);break;case 80:e.l<=s[o][1]&&(e.l=s[o][1],h=!1);break;case 4108:e.l<=s[o][1]&&(e.l=s[o][1],h=!1);break}if((!t||o==0)&&e.l<=s[o][1]&&(h=!1,e.l=s[o][1]),h)throw new Error("Read Error: Expected address "+s[o][1]+" at "+e.l+" :"+o)}if(t){var v=t[s[o][0]];if(m[v.n]=m2(e,v.t,{raw:!0}),v.p==="version"&&(m[v.n]=String(m[v.n]>>16)+"."+("0000"+String(m[v.n]&65535)).slice(-4)),v.n=="CodePage")switch(m[v.n]){case 0:m[v.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:xl(i=m[v.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+m[v.n])}}else if(s[o][0]===1){if(i=m.CodePage=m2(e,$T),xl(i),c!==-1){var y=e.l;e.l=s[c][1],A=$R(e,i),e.l=y}}else if(s[o][0]===0){if(i===0){c=o,e.l=s[o+1][1];continue}A=$R(e,i)}else{var g=A[s[o][0]],w;switch(e[e.l]){case 65:e.l+=4,w=$$(e);break;case 30:e.l+=4,w=VE(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,w=VE(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,w=e.read_shift(4,"i");break;case 19:e.l+=4,w=e.read_shift(4);break;case 5:e.l+=4,w=e.read_shift(8,"f");break;case 11:e.l+=4,w=Hr(e,4);break;case 64:e.l+=4,w=Is(QT(e));break;default:throw new Error("unparsed value: "+e[e.l])}m[g]=w}}return e.l=n+a,m}function GR(e,t,n){var a=e.content;if(!a)return{};Ls(a,0);var r,s,o,i,c=0;a.chk("feff","Byte Order: "),a.read_shift(2);var A=a.read_shift(4),d=a.read_shift(16);if(d!==ha.utils.consts.HEADER_CLSID&&d!==n)throw new Error("Bad PropertySet CLSID "+d);if(r=a.read_shift(4),r!==1&&r!==2)throw new Error("Unrecognized #Sets: "+r);if(s=a.read_shift(16),i=a.read_shift(4),r===1&&i!==a.l)throw new Error("Length mismatch: "+i+" !== "+a.l);r===2&&(o=a.read_shift(16),c=a.read_shift(4));var f=QR(a,t),m={SystemIdentifier:A};for(var h in f)m[h]=f[h];if(m.FMTID=s,r===1)return m;if(c-a.l==2&&(a.l+=2),a.l!==c)throw new Error("Length mismatch 2: "+a.l+" !== "+c);var v;try{v=QR(a,null)}catch{}for(h in v)m[h]=v[h];return m.FMTID=[s,o],m}function Jc(e,t){return e.read_shift(t),null}function nDe(e,t,n){for(var a=[],r=e.l+t;e.l<r;)a.push(n(e,r-e.l));if(r!==e.l)throw new Error("Slurp error");return a}function Hr(e,t){return e.read_shift(t)===1}function Jr(e){return e.read_shift(2,"u")}function Q$(e,t){return nDe(e,t,Jr)}function aDe(e){var t=e.read_shift(1),n=e.read_shift(1);return n===1?t:t===1}function wg(e,t,n){var a=e.read_shift(n&&n.biff>=12?2:1),r="sbcs-cont";if(n&&n.biff>=8,!n||n.biff==8){var s=e.read_shift(1);s&&(r="dbcs-cont")}else n.biff==12&&(r="wstr");n.biff>=2&&n.biff<=5&&(r="cpstr");var o=a?e.read_shift(a,r):"";return o}function rDe(e){var t=e.read_shift(2),n=e.read_shift(1),a=n&4,r=n&8,s=1+(n&1),o=0,i,c={};r&&(o=e.read_shift(2)),a&&(i=e.read_shift(4));var A=s==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,A);return r&&(e.l+=4*o),a&&(e.l+=i),c.t=d,r||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function mf(e,t,n){var a;if(n){if(n.biff>=2&&n.biff<=5)return e.read_shift(t,"cpstr");if(n.biff>=12)return e.read_shift(t,"dbcs-cont")}var r=e.read_shift(1);return r===0?a=e.read_shift(t,"sbcs-cont"):a=e.read_shift(t,"dbcs-cont"),a}function bg(e,t,n){var a=e.read_shift(n&&n.biff==2?1:2);return a===0?(e.l++,""):mf(e,a,n)}function Vf(e,t,n){if(n.biff>5)return bg(e,t,n);var a=e.read_shift(1);return a===0?(e.l++,""):e.read_shift(a,n.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function sDe(e){var t=e.read_shift(1);e.l++;var n=e.read_shift(2);return e.l+=2,[t,n]}function oDe(e){var t=e.read_shift(4),n=e.l,a=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(a=!0),e.l=n);var r=e.read_shift((a?t-24:t)>>1,"utf16le").replace(Vo,"");return a&&(e.l+=24),r}function iDe(e){for(var t=e.read_shift(2),n="";t-- >0;)n+="../";var a=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var r=e.read_shift(4);if(r===0)return n+a.replace(/\\/g,"/");var s=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=e.read_shift(s>>1,"utf16le").replace(Vo,"");return n+o}function lDe(e,t){var n=e.read_shift(16);switch(n){case"e0c9ea79f9bace118c8200aa004ba90b":return oDe(e);case"0303000000000000c000000000000046":return iDe(e);default:throw new Error("Unsupported Moniker "+n)}}function by(e){var t=e.read_shift(4),n=t>0?e.read_shift(t,"utf16le").replace(Vo,""):"";return n}function uDe(e,t){var n=e.l+t,a=e.read_shift(4);if(a!==2)throw new Error("Unrecognized streamVersion: "+a);var r=e.read_shift(2);e.l+=2;var s,o,i,c,A="",d,f;r&16&&(s=by(e,n-e.l)),r&128&&(o=by(e,n-e.l)),(r&257)===257&&(i=by(e,n-e.l)),(r&257)===1&&(c=lDe(e,n-e.l)),r&8&&(A=by(e,n-e.l)),r&32&&(d=e.read_shift(16)),r&64&&(f=QT(e)),e.l=n;var m=o||i||c||"";m&&A&&(m+="#"+A),m||(m="#"+A),r&2&&m.charAt(0)=="/"&&m.charAt(1)!="/"&&(m="file://"+m);var h={Target:m};return d&&(h.guid=d),f&&(h.time=f),s&&(h.Tooltip=s),h}function G$(e){var t=e.read_shift(1),n=e.read_shift(1),a=e.read_shift(1),r=e.read_shift(1);return[t,n,a,r]}function z$(e,t){var n=G$(e);return n[3]=0,n}function Mu(e){var t=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{r:t,c:n,ixfe:a}}function cDe(e){var t=e.read_shift(2),n=e.read_shift(2);return e.l+=8,{type:t,flags:n}}function dDe(e,t,n){return t===0?"":Vf(e,t,n)}function ADe(e,t,n){var a=n.biff>8?4:2,r=e.read_shift(a),s=e.read_shift(a,"i"),o=e.read_shift(a,"i");return[r,s,o]}function K$(e){var t=e.read_shift(2),n=HT(e);return[t,n]}function fDe(e,t,n){e.l+=4,t-=4;var a=e.l+t,r=wg(e,t,n),s=e.read_shift(2);if(a-=e.l,s!==a)throw new Error("Malformed AddinUdf: padding = "+a+" != "+s);return e.l+=s,r}function Ow(e){var t=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),r=e.read_shift(2);return{s:{c:a,r:t},e:{c:r,r:n}}}function W$(e){var t=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(1),r=e.read_shift(1);return{s:{c:a,r:t},e:{c:r,r:n}}}var mDe=W$;function j$(e){e.l+=4;var t=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return e.l+=12,[n,t,a]}function hDe(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function vDe(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function eo(e){e.l+=2,e.l+=e.read_shift(2)}var pDe={0:eo,4:eo,5:eo,6:eo,7:vDe,8:eo,9:eo,10:eo,11:eo,12:eo,13:hDe,14:eo,15:eo,16:eo,17:eo,18:eo,19:eo,20:eo,21:j$};function gDe(e,t){for(var n=e.l+t,a=[];e.l<n;){var r=e.read_shift(2);e.l-=2;try{a.push(pDe[r](e,n-e.l))}catch{return e.l=n,a}}return e.l!=n&&(e.l=n),a}function xy(e,t){var n={BIFFVer:0,dt:0};switch(n.BIFFVer=e.read_shift(2),t-=2,t>=2&&(n.dt=e.read_shift(2),e.l-=2),n.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+n.BIFFVer)}return e.read_shift(t),n}function yDe(e,t){return t===0||e.read_shift(2),1200}function _De(e,t,n){if(n.enc)return e.l+=t,"";var a=e.l,r=Vf(e,0,n);return e.read_shift(t+a-e.l),r}function wDe(e,t,n){var a=n&&n.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:a&16,fBelow:a&64,fRight:a&128}}function bDe(e,t,n){var a=e.read_shift(4),r=e.read_shift(1)&3,s=e.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var o=wg(e,0,n);return o.length===0&&(o="Sheet1"),{pos:a,hs:r,dt:s,name:o}}function xDe(e,t){for(var n=e.l+t,a=e.read_shift(4),r=e.read_shift(4),s=[],o=0;o!=r&&e.l<n;++o)s.push(rDe(e));return s.Count=a,s.Unique=r,s}function CDe(e,t){var n={};return n.dsst=e.read_shift(2),e.l+=t-2,n}function SDe(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var n=e.read_shift(2);e.l+=4;var a=e.read_shift(1);return e.l+=3,a&7&&(t.level=a&7),a&32&&(t.hidden=!0),a&64&&(t.hpt=n/20),t}function EDe(e){var t=cDe(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var n=e.read_shift(4);return n!==0}function BDe(e){return e.read_shift(2),e.read_shift(4)}function zR(e,t,n){var a=0;n&&n.biff==2||(a=e.read_shift(2));var r=e.read_shift(2);n&&n.biff==2&&(a=1-(r>>15),r&=32767);var s={Unsynced:a&1,DyZero:(a&2)>>1,ExAsc:(a&4)>>2,ExDsc:(a&8)>>3};return[s,r]}function kDe(e){var t=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(2),o=e.read_shift(2),i=e.read_shift(2),c=e.read_shift(2),A=e.read_shift(2);return{Pos:[t,n],Dim:[a,r],Flags:s,CurTab:o,FirstTab:i,Selected:c,TabRatio:A}}function TDe(e,t,n){if(n&&n.biff>=2&&n.biff<5)return{};var a=e.read_shift(2);return{RTL:a&64}}function IDe(){}function FDe(e,t,n){var a={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(n&&n.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return a.name=wg(e,0,n),a}function PDe(e){var t=Mu(e);return t.isst=e.read_shift(4),t}function DDe(e,t,n){n.biffguess&&n.biff==2&&(n.biff=5);var a=e.l+t,r=Mu(e);n.biff==2&&e.l++;var s=bg(e,a-e.l,n);return r.val=s,r}function UDe(e,t,n){var a=e.read_shift(2),r=Vf(e,0,n);return[a,r]}var RDe=Vf;function KR(e,t,n){var a=e.l+t,r=n.biff==8||!n.biff?4:2,s=e.read_shift(r),o=e.read_shift(r),i=e.read_shift(2),c=e.read_shift(2);return e.l=a,{s:{r:s,c:i},e:{r:o,c}}}function NDe(e){var t=e.read_shift(2),n=e.read_shift(2),a=K$(e);return{r:t,c:n,ixfe:a[0],rknum:a[1]}}function VDe(e,t){for(var n=e.l+t-2,a=e.read_shift(2),r=e.read_shift(2),s=[];e.l<n;)s.push(K$(e));if(e.l!==n)throw new Error("MulRK read error");var o=e.read_shift(2);if(s.length!=o-r+1)throw new Error("MulRK length mismatch");return{r:a,c:r,C:o,rkrec:s}}function LDe(e,t){for(var n=e.l+t-2,a=e.read_shift(2),r=e.read_shift(2),s=[];e.l<n;)s.push(e.read_shift(2));if(e.l!==n)throw new Error("MulBlank read error");var o=e.read_shift(2);if(s.length!=o-r+1)throw new Error("MulBlank length mismatch");return{r:a,c:r,C:o,ixfe:s}}function MDe(e,t,n,a){var r={},s=e.read_shift(4),o=e.read_shift(4),i=e.read_shift(4),c=e.read_shift(2);return r.patternType=NPe[i>>26],a.cellStyles&&(r.alc=s&7,r.fWrap=s>>3&1,r.alcV=s>>4&7,r.fJustLast=s>>7&1,r.trot=s>>8&255,r.cIndent=s>>16&15,r.fShrinkToFit=s>>20&1,r.iReadOrder=s>>22&2,r.fAtrNum=s>>26&1,r.fAtrFnt=s>>27&1,r.fAtrAlc=s>>28&1,r.fAtrBdr=s>>29&1,r.fAtrPat=s>>30&1,r.fAtrProt=s>>31&1,r.dgLeft=o&15,r.dgRight=o>>4&15,r.dgTop=o>>8&15,r.dgBottom=o>>12&15,r.icvLeft=o>>16&127,r.icvRight=o>>23&127,r.grbitDiag=o>>30&3,r.icvTop=i&127,r.icvBottom=i>>7&127,r.icvDiag=i>>14&127,r.dgDiag=i>>21&15,r.icvFore=c&127,r.icvBack=c>>7&127,r.fsxButton=c>>14&1),r}function ODe(e,t,n){var a={};return a.ifnt=e.read_shift(2),a.numFmtId=e.read_shift(2),a.flags=e.read_shift(2),a.fStyle=a.flags>>2&1,t-=6,a.data=MDe(e,t,a.fStyle,n),a}function HDe(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function WR(e,t,n){var a=Mu(e);(n.biff==2||t==9)&&++e.l;var r=aDe(e);return a.val=r,a.t=r===!0||r===!1?"b":"e",a}function $De(e,t,n){n.biffguess&&n.biff==2&&(n.biff=5);var a=Mu(e),r=co(e);return a.val=r,a}var jR=dDe;function QDe(e,t,n){var a=e.l+t,r=e.read_shift(2),s=e.read_shift(2);if(n.sbcch=s,s==1025||s==14849)return[s,r];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var o=mf(e,s),i=[];a>e.l;)i.push(bg(e));return[s,r,o,i]}function qR(e,t,n){var a=e.read_shift(2),r,s={fBuiltIn:a&1,fWantAdvise:a>>>1&1,fWantPict:a>>>2&1,fOle:a>>>3&1,fOleLink:a>>>4&1,cf:a>>>5&1023,fIcon:a>>>15&1};return n.sbcch===14849&&(r=fDe(e,t-2,n)),s.body=r||e.read_shift(t-2),typeof r=="string"&&(s.Name=r),s}var GDe=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function YR(e,t,n){var a=e.l+t,r=e.read_shift(2),s=e.read_shift(1),o=e.read_shift(1),i=e.read_shift(n&&n.biff==2?1:2),c=0;(!n||n.biff>=5)&&(n.biff!=5&&(e.l+=2),c=e.read_shift(2),n.biff==5&&(e.l+=2),e.l+=4);var A=mf(e,o,n);r&32&&(A=GDe[A.charCodeAt(0)]);var d=a-e.l;n&&n.biff==2&&--d;var f=a==e.l||i===0||!(d>0)?[]:SNe(e,d,n,i);return{chKey:s,Name:A,itab:c,rgce:f}}function q$(e,t,n){if(n.biff<8)return zDe(e,t,n);for(var a=[],r=e.l+t,s=e.read_shift(n.biff>8?4:2);s--!==0;)a.push(ADe(e,n.biff>8?12:6,n));if(e.l!=r)throw new Error("Bad ExternSheet: "+e.l+" != "+r);return a}function zDe(e,t,n){e[e.l+1]==3&&e[e.l]++;var a=wg(e,t,n);return a.charCodeAt(0)==3?a.slice(1):a}function KDe(e,t,n){if(n.biff<8){e.l+=t;return}var a=e.read_shift(2),r=e.read_shift(2),s=mf(e,a,n),o=mf(e,r,n);return[s,o]}function WDe(e,t,n){var a=W$(e);e.l++;var r=e.read_shift(1);return t-=8,[ENe(e,t,n),r,a]}function XR(e,t,n){var a=mDe(e);switch(n.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[a,xNe(e,t,n)]}function jDe(e){var t=e.read_shift(4)!==0,n=e.read_shift(4)!==0,a=e.read_shift(4);return[t,n,a]}function qDe(e,t,n){if(!(n.biff<8)){var a=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(2),o=e.read_shift(2),i=Vf(e,0,n);return n.biff<8&&e.read_shift(1),[{r:a,c:r},i,o,s]}}function YDe(e,t,n){return qDe(e,t,n)}function XDe(e,t){for(var n=[],a=e.read_shift(2);a--;)n.push(Ow(e));return n}function JDe(e,t,n){if(n&&n.biff<8)return e3e(e,t,n);var a=j$(e),r=gDe(e,t-22,a[1]);return{cmo:a,ft:r}}var ZDe={8:function(e,t){var n=e.l+t;e.l+=10;var a=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var r=e.read_shift(1);return e.l+=r,e.l=n,{fmt:a}}};function e3e(e,t,n){e.l+=4;var a=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var o=[];return o.push((ZDe[a]||yo)(e,t,n)),{cmo:[r,a,s],ft:o}}function t3e(e,t,n){var a=e.l,r="";try{e.l+=4;var s=(n.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(s)==-1?e.l+=6:o=sDe(e,6,n);var i=e.read_shift(2);e.read_shift(2),Jr(e,2);var c=e.read_shift(2);e.l+=c;for(var A=1;A<e.lens.length-1;++A){if(e.l-a!=e.lens[A])throw new Error("TxO: bad continue record");var d=e[e.l],f=mf(e,e.lens[A+1]-e.lens[A]-1);if(r+=f,r.length>=(d?i:2*i))break}if(r.length!==i&&r.length!==i*2)throw new Error("cchText: "+i+" != "+r.length);return e.l=a+t,{t:r}}catch{return e.l=a+t,{t:r}}}function n3e(e,t){var n=Ow(e);e.l+=16;var a=uDe(e,t-24);return[n,a]}function a3e(e,t){e.read_shift(2);var n=Ow(e),a=e.read_shift((t-10)/2,"dbcs-cont");return a=a.replace(Vo,""),[n,a]}function r3e(e){var t=[0,0],n;return n=e.read_shift(2),t[0]=OR[n]||n,n=e.read_shift(2),t[1]=OR[n]||n,t}function s3e(e){for(var t=e.read_shift(2),n=[];t-- >0;)n.push(z$(e));return n}function o3e(e){for(var t=e.read_shift(2),n=[];t-- >0;)n.push(z$(e));return n}function i3e(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function Y$(e,t,n){if(!n.cellStyles)return yo(e,t);var a=n&&n.biff>=12?4:2,r=e.read_shift(a),s=e.read_shift(a),o=e.read_shift(a),i=e.read_shift(a),c=e.read_shift(2);a==2&&(e.l+=2);var A={s:r,e:s,w:o,ixfe:i,flags:c};return(n.biff>=5||!n.biff)&&(A.level=c>>8&7),A}function l3e(e,t){var n={};return t<32||(e.l+=16,n.header=co(e),n.footer=co(e),e.l+=2),n}function u3e(e,t,n){var a={area:!1};if(n.biff!=5)return e.l+=t,a;var r=e.read_shift(1);return e.l+=3,r&16&&(a.area=!0),a}var c3e=Mu,d3e=Q$,A3e=bg;function f3e(e){var t=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(4),r={fmt:t,env:n,len:a,data:e.slice(e.l,e.l+a)};return e.l+=a,r}function m3e(e,t,n){n.biffguess&&n.biff==5&&(n.biff=2);var a=Mu(e);++e.l;var r=Vf(e,t-7,n);return a.t="str",a.val=r,a}function h3e(e){var t=Mu(e);++e.l;var n=co(e);return t.t="n",t.val=n,t}function v3e(e){var t=Mu(e);++e.l;var n=e.read_shift(2);return t.t="n",t.val=n,t}function p3e(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function g3e(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function y3e(e,t,n){var a=e.l+t,r=Mu(e),s=e.read_shift(2),o=mf(e,s,n);return e.l=a,r.t="str",r.val=o,r}var _3e=[2,3,48,49,131,139,140,245],JR=(function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=PT({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(i,c){var A=[],d=Od(1);switch(c.type){case"base64":d=gl(Si(i));break;case"binary":d=gl(i);break;case"buffer":case"array":d=i;break}Ls(d,0);var f=d.read_shift(1),m=!!(f&136),h=!1,v=!1;switch(f){case 2:break;case 3:break;case 48:h=!0,m=!0;break;case 49:h=!0,m=!0;break;case 131:break;case 139:break;case 140:v=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var y=0,g=521;f==2&&(y=d.read_shift(2)),d.l+=3,f!=2&&(y=d.read_shift(4)),y>1048576&&(y=1e6),f!=2&&(g=d.read_shift(2));var w=d.read_shift(2),b=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(b=e[d[d.l]]),d.l+=1,d.l+=2),v&&(d.l+=36);for(var x=[],T={},U=Math.min(d.length,f==2?521:g-10-(h?264:0)),k=v?32:11;d.l<U&&d[d.l]!=13;)switch(T={},T.name=T0.utils.decode(b,d.slice(d.l,d.l+k)).replace(/[\u0000\r\n].*$/g,""),d.l+=k,T.type=String.fromCharCode(d.read_shift(1)),f!=2&&!v&&(T.offset=d.read_shift(4)),T.len=d.read_shift(1),f==2&&(T.offset=d.read_shift(2)),T.dec=d.read_shift(1),T.name.length&&x.push(T),f!=2&&(d.l+=v?13:14),T.type){case"B":(!h||T.len!=8)&&c.WTF&&console.log("Skipping "+T.name+":"+T.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+T.name+":"+T.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+T.type)}if(d[d.l]!==13&&(d.l=g-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=g;var S=0,E=0;for(A[0]=[],E=0;E!=x.length;++E)A[0][E]=x[E].name;for(;y-- >0;){if(d[d.l]===42){d.l+=w;continue}for(++d.l,A[++S]=[],E=0,E=0;E!=x.length;++E){var C=d.slice(d.l,d.l+x[E].len);d.l+=x[E].len,Ls(C,0);var P=T0.utils.decode(b,C);switch(x[E].type){case"C":P.trim().length&&(A[S][E]=P.replace(/\s+$/,""));break;case"D":P.length===8?A[S][E]=new Date(+P.slice(0,4),+P.slice(4,6)-1,+P.slice(6,8)):A[S][E]=P;break;case"F":A[S][E]=parseFloat(P.trim());break;case"+":case"I":A[S][E]=v?C.read_shift(-4,"i")^2147483648:C.read_shift(4,"i");break;case"L":switch(P.trim().toUpperCase()){case"Y":case"T":A[S][E]=!0;break;case"N":case"F":A[S][E]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+P+"|")}break;case"M":if(!m)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));A[S][E]="##MEMO##"+(v?parseInt(P.trim(),10):C.read_shift(4));break;case"N":P=P.replace(/\u0000/g,"").trim(),P&&P!="."&&(A[S][E]=+P||0);break;case"@":A[S][E]=new Date(C.read_shift(-8,"f")-621356832e5);break;case"T":A[S][E]=new Date((C.read_shift(4)-2440588)*864e5+C.read_shift(4));break;case"Y":A[S][E]=C.read_shift(4,"i")/1e4+C.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":A[S][E]=-C.read_shift(-8,"f");break;case"B":if(h&&x[E].len==8){A[S][E]=C.read_shift(8,"f");break}case"G":case"P":C.l+=x[E].len;break;case"0":if(x[E].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+x[E].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(A=A.slice(0,c.sheetRows)),c.DBF=x,A}function a(i,c){var A=c||{};A.dateNF||(A.dateNF="yyyymmdd");var d=cv(n(i,A),A);return d["!cols"]=A.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete A.DBF,d}function r(i,c){try{return qd(a(i,c),c)}catch(A){if(c&&c.WTF)throw A}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function o(i,c){var A=c||{};if(+A.codepage>=0&&xl(+A.codepage),A.type=="string")throw new Error("Cannot write DBF to JS string");var d=UE(),f=GE(i,{header:1,raw:!0,cellDates:!0}),m=f[0],h=f.slice(1),v=i["!cols"]||[],y=0,g=0,w=0,b=1;for(y=0;y<m.length;++y){if(((v[y]||{}).DBF||{}).name){m[y]=v[y].DBF.name,++w;continue}if(m[y]!=null){if(++w,typeof m[y]=="number"&&(m[y]=m[y].toString(10)),typeof m[y]!="string")throw new Error("DBF Invalid column name "+m[y]+" |"+typeof m[y]+"|");if(m.indexOf(m[y])!==y){for(g=0;g<1024;++g)if(m.indexOf(m[y]+"_"+g)==-1){m[y]+="_"+g;break}}}}var x=Dr(i["!ref"]),T=[],U=[],k=[];for(y=0;y<=x.e.c-x.s.c;++y){var S="",E="",C=0,P=[];for(g=0;g<h.length;++g)h[g][y]!=null&&P.push(h[g][y]);if(P.length==0||m[y]==null){T[y]="?";continue}for(g=0;g<P.length;++g){switch(typeof P[g]){case"number":E="B";break;case"string":E="C";break;case"boolean":E="L";break;case"object":E=P[g]instanceof Date?"D":"C";break;default:E="C"}C=Math.max(C,String(P[g]).length),S=S&&S!=E?"C":E}C>250&&(C=250),E=((v[y]||{}).DBF||{}).type,E=="C"&&v[y].DBF.len>C&&(C=v[y].DBF.len),S=="B"&&E=="N"&&(S="N",k[y]=v[y].DBF.dec,C=v[y].DBF.len),U[y]=S=="C"||E=="N"?C:s[S]||0,b+=U[y],T[y]=S}var F=d.next(32);for(F.write_shift(4,318902576),F.write_shift(4,h.length),F.write_shift(2,296+32*w),F.write_shift(2,b),y=0;y<4;++y)F.write_shift(4,0);for(F.write_shift(4,0|(+t[qH]||3)<<8),y=0,g=0;y<m.length;++y)if(m[y]!=null){var N=d.next(32),L=(m[y].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);N.write_shift(1,L,"sbcs"),N.write_shift(1,T[y]=="?"?"C":T[y],"sbcs"),N.write_shift(4,g),N.write_shift(1,U[y]||s[T[y]]||0),N.write_shift(1,k[y]||0),N.write_shift(1,2),N.write_shift(4,0),N.write_shift(1,0),N.write_shift(4,0),N.write_shift(4,0),g+=U[y]||s[T[y]]||0}var ie=d.next(264);for(ie.write_shift(4,13),y=0;y<65;++y)ie.write_shift(4,0);for(y=0;y<h.length;++y){var le=d.next(b);for(le.write_shift(1,0),g=0;g<m.length;++g)if(m[g]!=null)switch(T[g]){case"L":le.write_shift(1,h[y][g]==null?63:h[y][g]?84:70);break;case"B":le.write_shift(8,h[y][g]||0,"f");break;case"N":var Q="0";for(typeof h[y][g]=="number"&&(Q=h[y][g].toFixed(k[g]||0)),w=0;w<U[g]-Q.length;++w)le.write_shift(1,32);le.write_shift(1,Q,"sbcs");break;case"D":h[y][g]?(le.write_shift(4,("0000"+h[y][g].getFullYear()).slice(-4),"sbcs"),le.write_shift(2,("00"+(h[y][g].getMonth()+1)).slice(-2),"sbcs"),le.write_shift(2,("00"+h[y][g].getDate()).slice(-2),"sbcs")):le.write_shift(8,"00000000","sbcs");break;case"C":var Z=String(h[y][g]!=null?h[y][g]:"").slice(0,U[g]);for(le.write_shift(1,Z,"sbcs"),w=0;w<U[g]-Z.length;++w)le.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:r,to_sheet:a,from_sheet:o}})(),w3e=(function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Bu(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),n=function(m,h){var v=e[h];return typeof v=="number"?mR(v):v},a=function(m,h,v){var y=h.charCodeAt(0)-32<<4|v.charCodeAt(0)-48;return y==59?m:mR(y)};e["|"]=254;function r(m,h){switch(h.type){case"base64":return s(Si(m),h);case"binary":return s(m,h);case"buffer":return s(ca&&Buffer.isBuffer(m)?m.toString("binary"):Df(m),h);case"array":return s(ff(m),h)}throw new Error("Unrecognized type "+h.type)}function s(m,h){var v=m.split(/[\n\r]+/),y=-1,g=-1,w=0,b=0,x=[],T=[],U=null,k={},S=[],E=[],C=[],P=0,F;for(+h.codepage>=0&&xl(+h.codepage);w!==v.length;++w){P=0;var N=v[w].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,a).replace(t,n),L=N.replace(/;;/g,"\0").split(";").map(function(H){return H.replace(/\u0000/g,";")}),ie=L[0],le;if(N.length>0)switch(ie){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":L[1].charAt(0)=="P"&&T.push(N.slice(3).replace(/;;/g,";"));break;case"C":var Q=!1,Z=!1,ce=!1,J=!1,se=-1,G=-1;for(b=1;b<L.length;++b)switch(L[b].charAt(0)){case"A":break;case"X":g=parseInt(L[b].slice(1))-1,Z=!0;break;case"Y":for(y=parseInt(L[b].slice(1))-1,Z||(g=0),F=x.length;F<=y;++F)x[F]=[];break;case"K":le=L[b].slice(1),le.charAt(0)==='"'?le=le.slice(1,le.length-1):le==="TRUE"?le=!0:le==="FALSE"?le=!1:isNaN(Tl(le))?isNaN(Dh(le).getDate())||(le=Is(le)):(le=Tl(le),U!==null&&lv(U)&&(le=Mw(le))),Q=!0;break;case"E":J=!0;var D=ch(L[b].slice(1),{r:y,c:g});x[y][g]=[x[y][g],D];break;case"S":ce=!0,x[y][g]=[x[y][g],"S5S"];break;case"G":break;case"R":se=parseInt(L[b].slice(1))-1;break;case"C":G=parseInt(L[b].slice(1))-1;break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+N)}if(Q&&(x[y][g]&&x[y][g].length==2?x[y][g][0]=le:x[y][g]=le,U=null),ce){if(J)throw new Error("SYLK shared formula cannot have own formula");var j=se>-1&&x[se][G];if(!j||!j[1])throw new Error("SYLK shared formula cannot find base");x[y][g][1]=o9(j[1],{r:y-se,c:g-G})}break;case"F":var ne=0;for(b=1;b<L.length;++b)switch(L[b].charAt(0)){case"X":g=parseInt(L[b].slice(1))-1,++ne;break;case"Y":for(y=parseInt(L[b].slice(1))-1,F=x.length;F<=y;++F)x[F]=[];break;case"M":P=parseInt(L[b].slice(1))/20;break;case"F":break;case"G":break;case"P":U=T[parseInt(L[b].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(C=L[b].slice(1).split(" "),F=parseInt(C[0],10);F<=parseInt(C[1],10);++F)P=parseInt(C[2],10),E[F-1]=P===0?{hidden:!0}:{wch:P},Uh(E[F-1]);break;case"C":g=parseInt(L[b].slice(1))-1,E[g]||(E[g]={});break;case"R":y=parseInt(L[b].slice(1))-1,S[y]||(S[y]={}),P>0?(S[y].hpt=P,S[y].hpx=R0(P)):P===0&&(S[y].hidden=!0);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+N)}ne<1&&(U=null);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+N)}}return S.length>0&&(k["!rows"]=S),E.length>0&&(k["!cols"]=E),h&&h.sheetRows&&(x=x.slice(0,h.sheetRows)),[x,k]}function o(m,h){var v=r(m,h),y=v[0],g=v[1],w=cv(y,h);return Bu(g).forEach(function(b){w[b]=g[b]}),w}function i(m,h){return qd(o(m,h),h)}function c(m,h,v,y){var g="C;Y"+(v+1)+";X"+(y+1)+";K";switch(m.t){case"n":g+=m.v||0,m.f&&!m.F&&(g+=";E"+iRe(m.f,{r:v,c:y}));break;case"b":g+=m.v?"TRUE":"FALSE";break;case"e":g+=m.w||m.v;break;case"d":g+='"'+(m.w||m.v)+'"';break;case"s":g+='"'+m.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return g}function A(m,h){h.forEach(function(v,y){var g="F;W"+(y+1)+" "+(y+1)+" ";v.hidden?g+="0":(typeof v.width=="number"&&!v.wpx&&(v.wpx=v2(v.width)),typeof v.wpx=="number"&&!v.wch&&(v.wch=p2(v.wpx)),typeof v.wch=="number"&&(g+=Math.round(v.wch))),g.charAt(g.length-1)!=" "&&m.push(g)})}function d(m,h){h.forEach(function(v,y){var g="F;";v.hidden?g+="M0;":v.hpt?g+="M"+20*v.hpt+";":v.hpx&&(g+="M"+20*a9(v.hpx)+";"),g.length>2&&m.push(g+"R"+(y+1))})}function f(m,h){var v=["ID;PWXL;N;E"],y=[],g=Dr(m["!ref"]),w,b=Array.isArray(m),x=`\r
`;v.push("P;PGeneral"),v.push("F;P0;DG0G8;M255"),m["!cols"]&&A(v,m["!cols"]),m["!rows"]&&d(v,m["!rows"]),v.push("B;Y"+(g.e.r-g.s.r+1)+";X"+(g.e.c-g.s.c+1)+";D"+[g.s.c,g.s.r,g.e.c,g.e.r].join(" "));for(var T=g.s.r;T<=g.e.r;++T)for(var U=g.s.c;U<=g.e.c;++U){var k=Kn({r:T,c:U});w=b?(m[T]||[])[U]:m[k],!(!w||w.v==null&&(!w.f||w.F))&&y.push(c(w,m,T,U))}return v.join(x)+x+y.join(x)+x+"E"+x}return{to_workbook:i,to_sheet:o,from_sheet:f}})(),b3e=(function(){function e(s,o){switch(o.type){case"base64":return t(Si(s),o);case"binary":return t(s,o);case"buffer":return t(ca&&Buffer.isBuffer(s)?s.toString("binary"):Df(s),o);case"array":return t(ff(s),o)}throw new Error("Unrecognized type "+o.type)}function t(s,o){for(var i=s.split(`
`),c=-1,A=-1,d=0,f=[];d!==i.length;++d){if(i[d].trim()==="BOT"){f[++c]=[],A=0;continue}if(!(c<0)){var m=i[d].trim().split(","),h=m[0],v=m[1];++d;for(var y=i[d]||"";(y.match(/["]/g)||[]).length&1&&d<i.length-1;)y+=`
`+i[++d];switch(y=y.trim(),+h){case-1:if(y==="BOT"){f[++c]=[],A=0;continue}else if(y!=="EOD")throw new Error("Unrecognized DIF special command "+y);break;case 0:y==="TRUE"?f[c][A]=!0:y==="FALSE"?f[c][A]=!1:isNaN(Tl(v))?isNaN(Dh(v).getDate())?f[c][A]=v:f[c][A]=Is(v):f[c][A]=Tl(v),++A;break;case 1:y=y.slice(1,y.length-1),y=y.replace(/""/g,'"'),y&&y.match(/^=".*"$/)&&(y=y.slice(2,-1)),f[c][A++]=y!==""?y:null;break}if(y==="EOD")break}}return o&&o.sheetRows&&(f=f.slice(0,o.sheetRows)),f}function n(s,o){return cv(e(s,o),o)}function a(s,o){return qd(n(s,o),o)}var r=(function(){var s=function(c,A,d,f,m){c.push(A),c.push(d+","+f),c.push('"'+m.replace(/"/g,'""')+'"')},o=function(c,A,d,f){c.push(A+","+d),c.push(A==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var A=[],d=Dr(c["!ref"]),f,m=Array.isArray(c);s(A,"TABLE",0,1,"sheetjs"),s(A,"VECTORS",0,d.e.r-d.s.r+1,""),s(A,"TUPLES",0,d.e.c-d.s.c+1,""),s(A,"DATA",0,0,"");for(var h=d.s.r;h<=d.e.r;++h){o(A,-1,0,"BOT");for(var v=d.s.c;v<=d.e.c;++v){var y=Kn({r:h,c:v});if(f=m?(c[h]||[])[v]:c[y],!f){o(A,1,0,"");continue}switch(f.t){case"n":var g=f.w;!g&&f.v!=null&&(g=f.v),g==null?f.f&&!f.F?o(A,1,0,"="+f.f):o(A,1,0,""):o(A,0,g,"V");break;case"b":o(A,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":o(A,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=qi(f.z||Xn[14],Oo(Is(f.v)))),o(A,0,f.w,"V");break;default:o(A,1,0,"")}}}o(A,-1,0,"EOD");var w=`\r
`,b=A.join(w);return b}})();return{to_workbook:a,to_sheet:n,from_sheet:r}})(),x3e=(function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function n(f,m){for(var h=f.split(`
`),v=-1,y=-1,g=0,w=[];g!==h.length;++g){var b=h[g].trim().split(":");if(b[0]==="cell"){var x=Ro(b[1]);if(w.length<=x.r)for(v=w.length;v<=x.r;++v)w[v]||(w[v]=[]);switch(v=x.r,y=x.c,b[2]){case"t":w[v][y]=e(b[3]);break;case"v":w[v][y]=+b[3];break;case"vtf":var T=b[b.length-1];case"vtc":switch(b[3]){case"nl":w[v][y]=!!+b[4];break;default:w[v][y]=+b[4];break}b[2]=="vtf"&&(w[v][y]=[w[v][y],T])}}}return m&&m.sheetRows&&(w=w.slice(0,m.sheetRows)),w}function a(f,m){return cv(n(f,m),m)}function r(f,m){return qd(a(f,m),m)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,i=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function A(f){if(!f||!f["!ref"])return"";for(var m=[],h=[],v,y="",g=uv(f["!ref"]),w=Array.isArray(f),b=g.s.r;b<=g.e.r;++b)for(var x=g.s.c;x<=g.e.c;++x)if(y=Kn({r:b,c:x}),v=w?(f[b]||[])[x]:f[y],!(!v||v.v==null||v.t==="z")){switch(h=["cell",y,"t"],v.t){case"s":case"str":h.push(t(v.v));break;case"n":v.f?(h[2]="vtf",h[3]="n",h[4]=v.v,h[5]=t(v.f)):(h[2]="v",h[3]=v.v);break;case"b":h[2]="vt"+(v.f?"f":"c"),h[3]="nl",h[4]=v.v?"1":"0",h[5]=t(v.f||(v.v?"TRUE":"FALSE"));break;case"d":var T=Oo(Is(v.v));h[2]="vtc",h[3]="nd",h[4]=""+T,h[5]=v.w||qi(v.z||Xn[14],T);break;case"e":continue}m.push(h.join(":"))}return m.push("sheet:c:"+(g.e.c-g.s.c+1)+":r:"+(g.e.r-g.s.r+1)+":tvf:1"),m.push("valueformat:1:text-wiki"),m.join(`
`)}function d(f){return[s,o,i,o,A(f),c].join(`
`)}return{to_workbook:r,to_sheet:a,from_sheet:d}})(),D0=(function(){function e(d,f,m,h,v){v.raw?f[m][h]=d:d===""||(d==="TRUE"?f[m][h]=!0:d==="FALSE"?f[m][h]=!1:isNaN(Tl(d))?isNaN(Dh(d).getDate())?f[m][h]=d:f[m][h]=Is(d):f[m][h]=Tl(d))}function t(d,f){var m=f||{},h=[];if(!d||d.length===0)return h;for(var v=d.split(/[\r\n]/),y=v.length-1;y>=0&&v[y].length===0;)--y;for(var g=10,w=0,b=0;b<=y;++b)w=v[b].indexOf(" "),w==-1?w=v[b].length:w++,g=Math.max(g,w);for(b=0;b<=y;++b){h[b]=[];var x=0;for(e(v[b].slice(0,g).trim(),h,b,x,m),x=1;x<=(v[b].length-g)/10+1;++x)e(v[b].slice(g+(x-1)*10,g+x*10).trim(),h,b,x,m)}return m.sheetRows&&(h=h.slice(0,m.sheetRows)),h}var n={44:",",9:"	",59:";",124:"|"},a={44:3,9:2,59:1,124:0};function r(d){for(var f={},m=!1,h=0,v=0;h<d.length;++h)(v=d.charCodeAt(h))==34?m=!m:!m&&v in n&&(f[v]=(f[v]||0)+1);v=[];for(h in f)Object.prototype.hasOwnProperty.call(f,h)&&v.push([f[h],h]);if(!v.length){f=a;for(h in f)Object.prototype.hasOwnProperty.call(f,h)&&v.push([f[h],h])}return v.sort(function(y,g){return y[0]-g[0]||a[y[1]]-a[g[1]]}),n[v.pop()[1]]||44}function s(d,f){var m=f||{},h="",v=m.dense?[]:{},y={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(h=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(h=d.charAt(4),d=d.slice(6)):h=r(d.slice(0,1024)):m&&m.FS?h=m.FS:h=r(d.slice(0,1024));var g=0,w=0,b=0,x=0,T=0,U=h.charCodeAt(0),k=!1,S=0,E=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var C=m.dateNF!=null?UFe(m.dateNF):null;function P(){var F=d.slice(x,T),N={};if(F.charAt(0)=='"'&&F.charAt(F.length-1)=='"'&&(F=F.slice(1,-1).replace(/""/g,'"')),F.length===0)N.t="z";else if(m.raw)N.t="s",N.v=F;else if(F.trim().length===0)N.t="s",N.v=F;else if(F.charCodeAt(0)==61)F.charCodeAt(1)==34&&F.charCodeAt(F.length-1)==34?(N.t="s",N.v=F.slice(2,-1).replace(/""/g,'"')):uRe(F)?(N.t="n",N.f=F.slice(1)):(N.t="s",N.v=F);else if(F=="TRUE")N.t="b",N.v=!0;else if(F=="FALSE")N.t="b",N.v=!1;else if(!isNaN(b=Tl(F)))N.t="n",m.cellText!==!1&&(N.w=F),N.v=b;else if(!isNaN(Dh(F).getDate())||C&&F.match(C)){N.z=m.dateNF||Xn[14];var L=0;C&&F.match(C)&&(F=RFe(F,m.dateNF,F.match(C)||[]),L=1),m.cellDates?(N.t="d",N.v=Is(F,L)):(N.t="n",N.v=Oo(Is(F,L))),m.cellText!==!1&&(N.w=qi(N.z,N.v instanceof Date?Oo(N.v):N.v)),m.cellNF||delete N.z}else N.t="s",N.v=F;if(N.t=="z"||(m.dense?(v[g]||(v[g]=[]),v[g][w]=N):v[Kn({c:w,r:g})]=N),x=T+1,E=d.charCodeAt(x),y.e.c<w&&(y.e.c=w),y.e.r<g&&(y.e.r=g),S==U)++w;else if(w=0,++g,m.sheetRows&&m.sheetRows<=g)return!0}e:for(;T<d.length;++T)switch(S=d.charCodeAt(T)){case 34:E===34&&(k=!k);break;case U:case 10:case 13:if(!k&&P())break e;break}return T-x>0&&P(),v["!ref"]=ga(y),v}function o(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,f):cv(t(d,f),f)}function i(d,f){var m="",h=f.type=="string"?[0,0,0,0]:XT(d,f);switch(f.type){case"base64":m=Si(d);break;case"binary":m=d;break;case"buffer":f.codepage==65001?m=d.toString("utf8"):f.codepage&&typeof T0<"u"||(m=ca&&Buffer.isBuffer(d)?d.toString("binary"):Df(d));break;case"array":m=ff(d);break;case"string":m=d;break;default:throw new Error("Unrecognized type "+f.type)}return h[0]==239&&h[1]==187&&h[2]==191?m=or(m.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?m=or(m):f.type=="binary"&&typeof T0<"u",m.slice(0,19)=="socialcalc:version:"?x3e.to_sheet(f.type=="string"?m:or(m),f):o(m,f)}function c(d,f){return qd(i(d,f),f)}function A(d){for(var f=[],m=Dr(d["!ref"]),h,v=Array.isArray(d),y=m.s.r;y<=m.e.r;++y){for(var g=[],w=m.s.c;w<=m.e.c;++w){var b=Kn({r:y,c:w});if(h=v?(d[y]||[])[w]:d[b],!h||h.v==null){g.push("          ");continue}for(var x=(h.w||(kc(h),h.w)||"").slice(0,10);x.length<10;)x+=" ";g.push(x+(w===0?" ":""))}f.push(g.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:i,from_sheet:A}})();function C3e(e,t){var n=t||{},a=!!n.WTF;n.WTF=!0;try{var r=w3e.to_workbook(e,n);return n.WTF=a,r}catch(s){if(n.WTF=a,!s.message.match(/SYLK bad record ID/)&&a)throw s;return D0.to_workbook(e,t)}}var Yp=(function(){function e(D,j,ne){if(D){Ls(D,D.l||0);for(var H=ne.Enum||se;D.l<D.length;){var te=D.read_shift(2),Y=H[te]||H[65535],K=D.read_shift(2),X=D.l+K,ae=Y.f&&Y.f(D,K,ne);if(D.l=X,j(ae,Y,te))return}}}function t(D,j){switch(j.type){case"base64":return n(gl(Si(D)),j);case"binary":return n(gl(D),j);case"buffer":case"array":return n(D,j)}throw"Unsupported type "+j.type}function n(D,j){if(!D)return D;var ne=j||{},H=ne.dense?[]:{},te="Sheet1",Y="",K=0,X={},ae=[],oe=[],W={s:{r:0,c:0},e:{r:0,c:0}},de=ne.sheetRows||0;if(D[2]==0&&(D[3]==8||D[3]==9)&&D.length>=16&&D[14]==5&&D[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(D[2]==2)ne.Enum=se,e(D,function(xe,ke,Ee){switch(Ee){case 0:ne.vers=xe,xe>=4096&&(ne.qpro=!0);break;case 6:W=xe;break;case 204:xe&&(Y=xe);break;case 222:Y=xe;break;case 15:case 51:ne.qpro||(xe[1].v=xe[1].v.slice(1));case 13:case 14:case 16:Ee==14&&(xe[2]&112)==112&&(xe[2]&15)>1&&(xe[2]&15)<15&&(xe[1].z=ne.dateNF||Xn[14],ne.cellDates&&(xe[1].t="d",xe[1].v=Mw(xe[1].v))),ne.qpro&&xe[3]>K&&(H["!ref"]=ga(W),X[te]=H,ae.push(te),H=ne.dense?[]:{},W={s:{r:0,c:0},e:{r:0,c:0}},K=xe[3],te=Y||"Sheet"+(K+1),Y="");var ye=ne.dense?(H[xe[0].r]||[])[xe[0].c]:H[Kn(xe[0])];if(ye){ye.t=xe[1].t,ye.v=xe[1].v,xe[1].z!=null&&(ye.z=xe[1].z),xe[1].f!=null&&(ye.f=xe[1].f);break}ne.dense?(H[xe[0].r]||(H[xe[0].r]=[]),H[xe[0].r][xe[0].c]=xe[1]):H[Kn(xe[0])]=xe[1];break}},ne);else if(D[2]==26||D[2]==14)ne.Enum=G,D[2]==14&&(ne.qpro=!0,D.l=0),e(D,function(xe,ke,Ee){switch(Ee){case 204:te=xe;break;case 22:xe[1].v=xe[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(xe[3]>K&&(H["!ref"]=ga(W),X[te]=H,ae.push(te),H=ne.dense?[]:{},W={s:{r:0,c:0},e:{r:0,c:0}},K=xe[3],te="Sheet"+(K+1)),de>0&&xe[0].r>=de)break;ne.dense?(H[xe[0].r]||(H[xe[0].r]=[]),H[xe[0].r][xe[0].c]=xe[1]):H[Kn(xe[0])]=xe[1],W.e.c<xe[0].c&&(W.e.c=xe[0].c),W.e.r<xe[0].r&&(W.e.r=xe[0].r);break;case 27:xe[14e3]&&(oe[xe[14e3][0]]=xe[14e3][1]);break;case 1537:oe[xe[0]]=xe[1],xe[0]==K&&(te=xe[1]);break}},ne);else throw new Error("Unrecognized LOTUS BOF "+D[2]);if(H["!ref"]=ga(W),X[Y||te]=H,ae.push(Y||te),!oe.length)return{SheetNames:ae,Sheets:X};for(var Ae={},Ce=[],De=0;De<oe.length;++De)X[ae[De]]?(Ce.push(oe[De]||ae[De]),Ae[oe[De]]=X[oe[De]]||X[ae[De]]):(Ce.push(oe[De]),Ae[oe[De]]={"!ref":"A1"});return{SheetNames:Ce,Sheets:Ae}}function a(D,j){var ne=j||{};if(+ne.codepage>=0&&xl(+ne.codepage),ne.type=="string")throw new Error("Cannot write WK1 to JS string");var H=UE(),te=Dr(D["!ref"]),Y=Array.isArray(D),K=[];Al(H,0,s(1030)),Al(H,6,c(te));for(var X=Math.min(te.e.r,8191),ae=te.s.r;ae<=X;++ae)for(var oe=Ks(ae),W=te.s.c;W<=te.e.c;++W){ae===te.s.r&&(K[W]=fs(W));var de=K[W]+oe,Ae=Y?(D[ae]||[])[W]:D[de];if(!(!Ae||Ae.t=="z"))if(Ae.t=="n")(Ae.v|0)==Ae.v&&Ae.v>=-32768&&Ae.v<=32767?Al(H,13,h(ae,W,Ae.v)):Al(H,14,y(ae,W,Ae.v));else{var Ce=kc(Ae);Al(H,15,f(ae,W,Ce.slice(0,239)))}}return Al(H,1),H.end()}function r(D,j){var ne=j||{};if(+ne.codepage>=0&&xl(+ne.codepage),ne.type=="string")throw new Error("Cannot write WK3 to JS string");var H=UE();Al(H,0,o(D));for(var te=0,Y=0;te<D.SheetNames.length;++te)(D.Sheets[D.SheetNames[te]]||{})["!ref"]&&Al(H,27,J(D.SheetNames[te],Y++));var K=0;for(te=0;te<D.SheetNames.length;++te){var X=D.Sheets[D.SheetNames[te]];if(!(!X||!X["!ref"])){for(var ae=Dr(X["!ref"]),oe=Array.isArray(X),W=[],de=Math.min(ae.e.r,8191),Ae=ae.s.r;Ae<=de;++Ae)for(var Ce=Ks(Ae),De=ae.s.c;De<=ae.e.c;++De){Ae===ae.s.r&&(W[De]=fs(De));var xe=W[De]+Ce,ke=oe?(X[Ae]||[])[De]:X[xe];if(!(!ke||ke.t=="z"))if(ke.t=="n")Al(H,23,P(Ae,De,K,ke.v));else{var Ee=kc(ke);Al(H,22,S(Ae,De,K,Ee.slice(0,239)))}}++K}}return Al(H,1),H.end()}function s(D){var j=cs(2);return j.write_shift(2,D),j}function o(D){var j=cs(26);j.write_shift(2,4096),j.write_shift(2,4),j.write_shift(4,0);for(var ne=0,H=0,te=0,Y=0;Y<D.SheetNames.length;++Y){var K=D.SheetNames[Y],X=D.Sheets[K];if(!(!X||!X["!ref"])){++te;var ae=uv(X["!ref"]);ne<ae.e.r&&(ne=ae.e.r),H<ae.e.c&&(H=ae.e.c)}}return ne>8191&&(ne=8191),j.write_shift(2,ne),j.write_shift(1,te),j.write_shift(1,H),j.write_shift(2,0),j.write_shift(2,0),j.write_shift(1,1),j.write_shift(1,2),j.write_shift(4,0),j.write_shift(4,0),j}function i(D,j,ne){var H={s:{c:0,r:0},e:{c:0,r:0}};return j==8&&ne.qpro?(H.s.c=D.read_shift(1),D.l++,H.s.r=D.read_shift(2),H.e.c=D.read_shift(1),D.l++,H.e.r=D.read_shift(2),H):(H.s.c=D.read_shift(2),H.s.r=D.read_shift(2),j==12&&ne.qpro&&(D.l+=2),H.e.c=D.read_shift(2),H.e.r=D.read_shift(2),j==12&&ne.qpro&&(D.l+=2),H.s.c==65535&&(H.s.c=H.e.c=H.s.r=H.e.r=0),H)}function c(D){var j=cs(8);return j.write_shift(2,D.s.c),j.write_shift(2,D.s.r),j.write_shift(2,D.e.c),j.write_shift(2,D.e.r),j}function A(D,j,ne){var H=[{c:0,r:0},{t:"n",v:0},0,0];return ne.qpro&&ne.vers!=20768?(H[0].c=D.read_shift(1),H[3]=D.read_shift(1),H[0].r=D.read_shift(2),D.l+=2):(H[2]=D.read_shift(1),H[0].c=D.read_shift(2),H[0].r=D.read_shift(2)),H}function d(D,j,ne){var H=D.l+j,te=A(D,j,ne);if(te[1].t="s",ne.vers==20768){D.l++;var Y=D.read_shift(1);return te[1].v=D.read_shift(Y,"utf8"),te}return ne.qpro&&D.l++,te[1].v=D.read_shift(H-D.l,"cstr"),te}function f(D,j,ne){var H=cs(7+ne.length);H.write_shift(1,255),H.write_shift(2,j),H.write_shift(2,D),H.write_shift(1,39);for(var te=0;te<H.length;++te){var Y=ne.charCodeAt(te);H.write_shift(1,Y>=128?95:Y)}return H.write_shift(1,0),H}function m(D,j,ne){var H=A(D,j,ne);return H[1].v=D.read_shift(2,"i"),H}function h(D,j,ne){var H=cs(7);return H.write_shift(1,255),H.write_shift(2,j),H.write_shift(2,D),H.write_shift(2,ne,"i"),H}function v(D,j,ne){var H=A(D,j,ne);return H[1].v=D.read_shift(8,"f"),H}function y(D,j,ne){var H=cs(13);return H.write_shift(1,255),H.write_shift(2,j),H.write_shift(2,D),H.write_shift(8,ne,"f"),H}function g(D,j,ne){var H=D.l+j,te=A(D,j,ne);if(te[1].v=D.read_shift(8,"f"),ne.qpro)D.l=H;else{var Y=D.read_shift(2);T(D.slice(D.l,D.l+Y),te),D.l+=Y}return te}function w(D,j,ne){var H=j&32768;return j&=-32769,j=(H?D:0)+(j>=8192?j-16384:j),(H?"":"$")+(ne?fs(j):Ks(j))}var b={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},x=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function T(D,j){Ls(D,0);for(var ne=[],H=0,te="",Y="",K="",X="";D.l<D.length;){var ae=D[D.l++];switch(ae){case 0:ne.push(D.read_shift(8,"f"));break;case 1:Y=w(j[0].c,D.read_shift(2),!0),te=w(j[0].r,D.read_shift(2),!1),ne.push(Y+te);break;case 2:{var oe=w(j[0].c,D.read_shift(2),!0),W=w(j[0].r,D.read_shift(2),!1);Y=w(j[0].c,D.read_shift(2),!0),te=w(j[0].r,D.read_shift(2),!1),ne.push(oe+W+":"+Y+te)}break;case 3:if(D.l<D.length){console.error("WK1 premature formula end");return}break;case 4:ne.push("("+ne.pop()+")");break;case 5:ne.push(D.read_shift(2));break;case 6:{for(var de="";ae=D[D.l++];)de+=String.fromCharCode(ae);ne.push('"'+de.replace(/"/g,'""')+'"')}break;case 8:ne.push("-"+ne.pop());break;case 23:ne.push("+"+ne.pop());break;case 22:ne.push("NOT("+ne.pop()+")");break;case 20:case 21:X=ne.pop(),K=ne.pop(),ne.push(["AND","OR"][ae-20]+"("+K+","+X+")");break;default:if(ae<32&&x[ae])X=ne.pop(),K=ne.pop(),ne.push(K+x[ae]+X);else if(b[ae]){if(H=b[ae][1],H==69&&(H=D[D.l++]),H>ne.length){console.error("WK1 bad formula parse 0x"+ae.toString(16)+":|"+ne.join("|")+"|");return}var Ae=ne.slice(-H);ne.length-=H,ne.push(b[ae][0]+"("+Ae.join(",")+")")}else return ae<=7?console.error("WK1 invalid opcode "+ae.toString(16)):ae<=24?console.error("WK1 unsupported op "+ae.toString(16)):ae<=30?console.error("WK1 invalid opcode "+ae.toString(16)):ae<=115?console.error("WK1 unsupported function opcode "+ae.toString(16)):console.error("WK1 unrecognized opcode "+ae.toString(16))}}ne.length==1?j[1].f=""+ne[0]:console.error("WK1 bad formula parse |"+ne.join("|")+"|")}function U(D){var j=[{c:0,r:0},{t:"n",v:0},0];return j[0].r=D.read_shift(2),j[3]=D[D.l++],j[0].c=D[D.l++],j}function k(D,j){var ne=U(D);return ne[1].t="s",ne[1].v=D.read_shift(j-4,"cstr"),ne}function S(D,j,ne,H){var te=cs(6+H.length);te.write_shift(2,D),te.write_shift(1,ne),te.write_shift(1,j),te.write_shift(1,39);for(var Y=0;Y<H.length;++Y){var K=H.charCodeAt(Y);te.write_shift(1,K>=128?95:K)}return te.write_shift(1,0),te}function E(D,j){var ne=U(D);ne[1].v=D.read_shift(2);var H=ne[1].v>>1;if(ne[1].v&1)switch(H&7){case 0:H=(H>>3)*5e3;break;case 1:H=(H>>3)*500;break;case 2:H=(H>>3)/20;break;case 3:H=(H>>3)/200;break;case 4:H=(H>>3)/2e3;break;case 5:H=(H>>3)/2e4;break;case 6:H=(H>>3)/16;break;case 7:H=(H>>3)/64;break}return ne[1].v=H,ne}function C(D,j){var ne=U(D),H=D.read_shift(4),te=D.read_shift(4),Y=D.read_shift(2);if(Y==65535)return H===0&&te===3221225472?(ne[1].t="e",ne[1].v=15):H===0&&te===3489660928?(ne[1].t="e",ne[1].v=42):ne[1].v=0,ne;var K=Y&32768;return Y=(Y&32767)-16446,ne[1].v=(1-K*2)*(te*Math.pow(2,Y+32)+H*Math.pow(2,Y)),ne}function P(D,j,ne,H){var te=cs(14);if(te.write_shift(2,D),te.write_shift(1,ne),te.write_shift(1,j),H==0)return te.write_shift(4,0),te.write_shift(4,0),te.write_shift(2,65535),te;var Y=0,K=0,X=0,ae=0;return H<0&&(Y=1,H=-H),K=Math.log2(H)|0,H/=Math.pow(2,K-31),ae=H>>>0,(ae&2147483648)==0&&(H/=2,++K,ae=H>>>0),H-=ae,ae|=2147483648,ae>>>=0,H*=Math.pow(2,32),X=H>>>0,te.write_shift(4,X),te.write_shift(4,ae),K+=16383+(Y?32768:0),te.write_shift(2,K),te}function F(D,j){var ne=C(D);return D.l+=j-14,ne}function N(D,j){var ne=U(D),H=D.read_shift(4);return ne[1].v=H>>6,ne}function L(D,j){var ne=U(D),H=D.read_shift(8,"f");return ne[1].v=H,ne}function ie(D,j){var ne=L(D);return D.l+=j-10,ne}function le(D,j){return D[D.l+j-1]==0?D.read_shift(j,"cstr"):""}function Q(D,j){var ne=D[D.l++];ne>j-1&&(ne=j-1);for(var H="";H.length<ne;)H+=String.fromCharCode(D[D.l++]);return H}function Z(D,j,ne){if(!(!ne.qpro||j<21)){var H=D.read_shift(1);D.l+=17,D.l+=1,D.l+=2;var te=D.read_shift(j-21,"cstr");return[H,te]}}function ce(D,j){for(var ne={},H=D.l+j;D.l<H;){var te=D.read_shift(2);if(te==14e3){for(ne[te]=[0,""],ne[te][0]=D.read_shift(2);D[D.l];)ne[te][1]+=String.fromCharCode(D[D.l]),D.l++;D.l++}}return ne}function J(D,j){var ne=cs(5+D.length);ne.write_shift(2,14e3),ne.write_shift(2,j);for(var H=0;H<D.length;++H){var te=D.charCodeAt(H);ne[ne.l++]=te>127?95:te}return ne[ne.l++]=0,ne}var se={0:{n:"BOF",f:Jr},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:i},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:m},14:{n:"NUMBER",f:v},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:g},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:le},222:{n:"SHEETNAMELP",f:Q},65535:{n:""}},G={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:k},23:{n:"NUMBER17",f:C},24:{n:"NUMBER18",f:E},25:{n:"FORMULA19",f:F},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:ce},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:N},38:{n:"??"},39:{n:"NUMBER27",f:L},40:{n:"FORMULA28",f:ie},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:le},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Z},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:a,book_to_wk3:r,to_workbook:t}})();function S3e(e){var t={},n=e.match(bo),a=0,r=!1;if(n)for(;a!=n.length;++a){var s=Ln(n[a]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;t.cp=BT[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=s.val;break;case"<sz":t.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":s.rgb&&(t.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(s[0].charCodeAt(1)!==47&&!r)throw new Error("Unrecognized rich format "+s[0])}}return t}var E3e=(function(){var e=F0("t"),t=F0("rPr");function n(s){var o=s.match(e);if(!o)return{t:"s",v:""};var i={t:"s",v:xa(o[1])},c=s.match(t);return c&&(i.s=S3e(c[1])),i}var a=/<(?:\w+:)?r>/g,r=/<\/(?:\w+:)?r>/;return function(o){return o.replace(a,"").split(r).map(n).filter(function(i){return i.v})}})(),B3e=(function(){var t=/(\r\n|\n)/g;function n(r,s,o){var i=[];r.u&&i.push("text-decoration: underline;"),r.uval&&i.push("text-underline-style:"+r.uval+";"),r.sz&&i.push("font-size:"+r.sz+"pt;"),r.outline&&i.push("text-effect: outline;"),r.shadow&&i.push("text-shadow: auto;"),s.push('<span style="'+i.join("")+'">'),r.b&&(s.push("<b>"),o.push("</b>")),r.i&&(s.push("<i>"),o.push("</i>")),r.strike&&(s.push("<s>"),o.push("</s>"));var c=r.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(s.push("<"+c+">"),o.push("</"+c+">")),o.push("</span>"),r}function a(r){var s=[[],r.v,[]];return r.v?(r.s&&n(r.s,s[0],s[2]),s[0].join("")+s[1].replace(t,"<br/>")+s[2].join("")):""}return function(s){return s.map(a).join("")}})(),k3e=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,T3e=/<(?:\w+:)?r>/,I3e=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function GT(e,t){var n=t?t.cellHTML:!0,a={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(a.t=xa(or(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),a.r=or(e),n&&(a.h=UT(a.t))):e.match(T3e)&&(a.r=or(e),a.t=xa(or((e.replace(I3e,"").match(k3e)||[]).join("").replace(bo,""))),n&&(a.h=B3e(E3e(a.r)))),a):{t:""}}var F3e=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,P3e=/<(?:\w+:)?(?:si|sstItem)>/g,D3e=/<\/(?:\w+:)?(?:si|sstItem)>/;function U3e(e,t){var n=[],a="";if(!e)return n;var r=e.match(F3e);if(r){a=r[2].replace(P3e,"").split(D3e);for(var s=0;s!=a.length;++s){var o=GT(a[s].trim(),t);o!=null&&(n[n.length]=o)}r=Ln(r[1]),n.Count=r.count,n.Unique=r.uniqueCount}return n}function R3e(e){return[e.read_shift(4),e.read_shift(4)]}function N3e(e,t){var n=[],a=!1;return Rc(e,function(s,o,i){switch(i){case 159:n.Count=s[0],n.Unique=s[1];break;case 19:n.push(s);break;case 160:return!0;case 35:a=!0;break;case 36:a=!1;break;default:if(o.T,!a||t.WTF)throw new Error("Unexpected record 0x"+i.toString(16))}}),n}function X$(e){for(var t=[],n=e.split(""),a=0;a<n.length;++a)t[a]=n[a].charCodeAt(0);return t}function pc(e,t){var n={};return n.Major=e.read_shift(2),n.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),n}function V3e(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=pc(e,4),t.U=pc(e,4),t.W=pc(e,4),t}function L3e(e){for(var t=e.read_shift(4),n=e.l+t-4,a={},r=e.read_shift(4),s=[];r-- >0;)s.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(a.name=e.read_shift(0,"lpp4"),a.comps=s,e.l!=n)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+n);return a}function M3e(e){var t=[];e.l+=4;for(var n=e.read_shift(4);n-- >0;)t.push(L3e(e));return t}function O3e(e){var t=[];e.l+=4;for(var n=e.read_shift(4);n-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function H3e(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=pc(e,4),t.U=pc(e,4),t.W=pc(e,4),t}function $3e(e){var t=H3e(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function J$(e,t){var n=e.l+t,a={};a.Flags=e.read_shift(4)&63,e.l+=4,a.AlgID=e.read_shift(4);var r=!1;switch(a.AlgID){case 26126:case 26127:case 26128:r=a.Flags==36;break;case 26625:r=a.Flags==4;break;case 0:r=a.Flags==16||a.Flags==4||a.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+a.AlgID}if(!r)throw new Error("Encryption Flags/AlgID mismatch");return a.AlgIDHash=e.read_shift(4),a.KeySize=e.read_shift(4),a.ProviderType=e.read_shift(4),e.l+=8,a.CSPName=e.read_shift(n-e.l>>1,"utf16le"),e.l=n,a}function Z$(e,t){var n={},a=e.l+t;return e.l+=4,n.Salt=e.slice(e.l,e.l+16),e.l+=16,n.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),n.VerifierHash=e.slice(e.l,a),e.l=a,n}function Q3e(e){var t=pc(e);switch(t.Minor){case 2:return[t.Minor,G3e(e)];case 3:return[t.Minor,z3e()];case 4:return[t.Minor,K3e(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function G3e(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var n=e.read_shift(4),a=J$(e,n),r=Z$(e,e.length-e.l);return{t:"Std",h:a,v:r}}function z3e(){throw new Error("File is password-protected: ECMA-376 Extensible")}function K3e(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var n=e.read_shift(e.length-e.l,"utf8"),a={};return n.replace(bo,function(s){var o=Ln(s);switch(Lu(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(i){a[i]=o[i]});break;case"<dataIntegrity":a.encryptedHmacKey=o.encryptedHmacKey,a.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":a.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":a.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":a.encs.push(o);break;default:throw o[0]}}),a}function W3e(e,t){var n={},a=n.EncryptionVersionInfo=pc(e,4);if(t-=4,a.Minor!=2)throw new Error("unrecognized minor version code: "+a.Minor);if(a.Major>4||a.Major<2)throw new Error("unrecognized major version code: "+a.Major);n.Flags=e.read_shift(4),t-=4;var r=e.read_shift(4);return t-=4,n.EncryptionHeader=J$(e,r),t-=r,n.EncryptionVerifier=Z$(e,t),n}function j3e(e){var t={},n=t.EncryptionVersionInfo=pc(e,4);if(n.Major!=1||n.Minor!=1)throw"unrecognized version code "+n.Major+" : "+n.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function q3e(e){var t=0,n,a=X$(e),r=a.length+1,s,o,i,c,A;for(n=Od(r),n[0]=a.length,s=1;s!=r;++s)n[s]=a[s-1];for(s=r-1;s>=0;--s)o=n[s],i=(t&16384)===0?0:1,c=t<<1&32767,A=i|c,t=A^o;return t^52811}var e9=(function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],n=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],a=function(o){return(o/2|o*128)&255},r=function(o,i){return a(o^i)},s=function(o){for(var i=t[o.length-1],c=104,A=o.length-1;A>=0;--A)for(var d=o[A],f=0;f!=7;++f)d&64&&(i^=n[c]),d*=2,--c;return i};return function(o){for(var i=X$(o),c=s(i),A=i.length,d=Od(16),f=0;f!=16;++f)d[f]=0;var m,h,v;for((A&1)===1&&(m=c>>8,d[A]=r(e[0],m),--A,m=c&255,h=i[i.length-1],d[A]=r(h,m));A>0;)--A,m=c>>8,d[A]=r(i[A],m),--A,m=c&255,d[A]=r(i[A],m);for(A=15,v=15-i.length;v>0;)m=c>>8,d[A]=r(e[v],m),--A,--v,m=c&255,d[A]=r(i[A],m),--A,--v;return d}})(),Y3e=function(e,t,n,a,r){r||(r=t),a||(a=e9(e));var s,o;for(s=0;s!=t.length;++s)o=t[s],o^=a[n],o=(o>>5|o<<3)&255,r[s]=o,++n;return[r,n,a]},X3e=function(e){var t=0,n=e9(e);return function(a){var r=Y3e("",a,t,n);return t=r[1],r[0]}};function J3e(e,t,n,a){var r={key:Jr(e),verificationBytes:Jr(e)};return n.password&&(r.verifier=q3e(n.password)),a.valid=r.verificationBytes===r.verifier,a.valid&&(a.insitu=X3e(n.password)),r}function Z3e(e,t,n){var a=n||{};return a.Info=e.read_shift(2),e.l-=2,a.Info===1?a.Data=j3e(e):a.Data=W3e(e,t),a}function eUe(e,t,n){var a={Type:n.biff>=8?e.read_shift(2):0};return a.Type?Z3e(e,t-2,a):J3e(e,n.biff>=8?t:t-2,n,a),a}var tUe=(function(){function e(r,s){switch(s.type){case"base64":return t(Si(r),s);case"binary":return t(r,s);case"buffer":return t(ca&&Buffer.isBuffer(r)?r.toString("binary"):Df(r),s);case"array":return t(ff(r),s)}throw new Error("Unrecognized type "+s.type)}function t(r,s){var o=s||{},i=o.dense?[]:{},c=r.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var A={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(i)&&(i[f]=[]);for(var m=/\\\w+\b/g,h=0,v,y=-1;v=m.exec(d);){switch(v[0]){case"\\cell":var g=d.slice(h,m.lastIndex-v[0].length);if(g[0]==" "&&(g=g.slice(1)),++y,g.length){var w={v:g,t:"s"};Array.isArray(i)?i[f][y]=w:i[Kn({r:f,c:y})]=w}break}h=m.lastIndex}y>A.e.c&&(A.e.c=y)}),i["!ref"]=ga(A),i}function n(r,s){return qd(e(r,s),s)}function a(r){for(var s=["{\\rtf1\\ansi"],o=Dr(r["!ref"]),i,c=Array.isArray(r),A=o.s.r;A<=o.e.r;++A){s.push("\\trowd\\trautofit1");for(var d=o.s.c;d<=o.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=o.s.c;d<=o.e.c;++d){var f=Kn({r:A,c:d});i=c?(r[A]||[])[d]:r[f],!(!i||i.v==null&&(!i.f||i.F))&&(s.push(" "+(i.w||(kc(i),i.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:n,to_sheet:e,from_sheet:a}})();function nUe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function U0(e){for(var t=0,n=1;t!=3;++t)n=n*256+(e[t]>255?255:e[t]<0?0:e[t]);return n.toString(16).toUpperCase().slice(1)}function aUe(e){var t=e[0]/255,n=e[1]/255,a=e[2]/255,r=Math.max(t,n,a),s=Math.min(t,n,a),o=r-s;if(o===0)return[0,0,t];var i=0,c=0,A=r+s;switch(c=o/(A>1?2-A:A),r){case t:i=((n-a)/o+6)%6;break;case n:i=(a-t)/o+2;break;case a:i=(t-n)/o+4;break}return[i/6,c,A/2]}function rUe(e){var t=e[0],n=e[1],a=e[2],r=n*2*(a<.5?a:1-a),s=a-r/2,o=[s,s,s],i=6*t,c;if(n!==0)switch(i|0){case 0:case 6:c=r*i,o[0]+=r,o[1]+=c;break;case 1:c=r*(2-i),o[0]+=c,o[1]+=r;break;case 2:c=r*(i-2),o[1]+=r,o[2]+=c;break;case 3:c=r*(4-i),o[1]+=c,o[2]+=r;break;case 4:c=r*(i-4),o[2]+=r,o[0]+=c;break;case 5:c=r*(6-i),o[2]+=c,o[0]+=r;break}for(var A=0;A!=3;++A)o[A]=Math.round(o[A]*255);return o}function h2(e,t){if(t===0)return e;var n=aUe(nUe(e));return t<0?n[2]=n[2]*(1+t):n[2]=1-(1-n[2])*(1-t),U0(rUe(n))}var t9=6,sUe=15,oUe=1,Uo=t9;function v2(e){return Math.floor((e+Math.round(128/Uo)/256)*Uo)}function p2(e){return Math.floor((e-5)/Uo*100+.5)/100}function LE(e){return Math.round((e*Uo+5)/Uo*256)/256}function NC(e){return LE(p2(v2(e)))}function zT(e){var t=Math.abs(e-NC(e)),n=Uo;if(t>.005)for(Uo=oUe;Uo<sUe;++Uo)Math.abs(e-NC(e))<=t&&(t=Math.abs(e-NC(e)),n=Uo);Uo=n}function Uh(e){e.width?(e.wpx=v2(e.width),e.wch=p2(e.wpx),e.MDW=Uo):e.wpx?(e.wch=p2(e.wpx),e.width=LE(e.wch),e.MDW=Uo):typeof e.wch=="number"&&(e.width=LE(e.wch),e.wpx=v2(e.width),e.MDW=Uo),e.customWidth&&delete e.customWidth}var iUe=96,n9=iUe;function a9(e){return e*96/n9}function R0(e){return e*n9/96}var lUe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function uUe(e,t,n,a){t.Borders=[];var r={},s=!1;(e[0].match(bo)||[]).forEach(function(o){var i=Ln(o);switch(Lu(i[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":r={},i.diagonalUp&&(r.diagonalUp=yr(i.diagonalUp)),i.diagonalDown&&(r.diagonalDown=yr(i.diagonalDown)),t.Borders.push(r);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(a&&a.WTF&&!s)throw new Error("unrecognized "+i[0]+" in borders")}})}function cUe(e,t,n,a){t.Fills=[];var r={},s=!1;(e[0].match(bo)||[]).forEach(function(o){var i=Ln(o);switch(Lu(i[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":r={},t.Fills.push(r);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(r),r={};break;case"<patternFill":case"<patternFill>":i.patternType&&(r.patternType=i.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":r.bgColor||(r.bgColor={}),i.indexed&&(r.bgColor.indexed=parseInt(i.indexed,10)),i.theme&&(r.bgColor.theme=parseInt(i.theme,10)),i.tint&&(r.bgColor.tint=parseFloat(i.tint)),i.rgb&&(r.bgColor.rgb=i.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":r.fgColor||(r.fgColor={}),i.theme&&(r.fgColor.theme=parseInt(i.theme,10)),i.tint&&(r.fgColor.tint=parseFloat(i.tint)),i.rgb!=null&&(r.fgColor.rgb=i.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(a&&a.WTF&&!s)throw new Error("unrecognized "+i[0]+" in fills")}})}function dUe(e,t,n,a){t.Fonts=[];var r={},s=!1;(e[0].match(bo)||[]).forEach(function(o){var i=Ln(o);switch(Lu(i[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(r),r={};break;case"<name":i.val&&(r.name=or(i.val));break;case"<name/>":case"</name>":break;case"<b":r.bold=i.val?yr(i.val):1;break;case"<b/>":r.bold=1;break;case"<i":r.italic=i.val?yr(i.val):1;break;case"<i/>":r.italic=1;break;case"<u":switch(i.val){case"none":r.underline=0;break;case"single":r.underline=1;break;case"double":r.underline=2;break;case"singleAccounting":r.underline=33;break;case"doubleAccounting":r.underline=34;break}break;case"<u/>":r.underline=1;break;case"<strike":r.strike=i.val?yr(i.val):1;break;case"<strike/>":r.strike=1;break;case"<outline":r.outline=i.val?yr(i.val):1;break;case"<outline/>":r.outline=1;break;case"<shadow":r.shadow=i.val?yr(i.val):1;break;case"<shadow/>":r.shadow=1;break;case"<condense":r.condense=i.val?yr(i.val):1;break;case"<condense/>":r.condense=1;break;case"<extend":r.extend=i.val?yr(i.val):1;break;case"<extend/>":r.extend=1;break;case"<sz":i.val&&(r.sz=+i.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":i.val&&(r.vertAlign=i.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":i.val&&(r.family=parseInt(i.val,10));break;case"<family/>":case"</family>":break;case"<scheme":i.val&&(r.scheme=i.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(i.val=="1")break;i.codepage=BT[parseInt(i.val,10)];break;case"<color":if(r.color||(r.color={}),i.auto&&(r.color.auto=yr(i.auto)),i.rgb)r.color.rgb=i.rgb.slice(-6);else if(i.indexed){r.color.index=parseInt(i.indexed,10);var c=ef[r.color.index];r.color.index==81&&(c=ef[1]),c||(c=ef[1]),r.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else i.theme&&(r.color.theme=parseInt(i.theme,10),i.tint&&(r.color.tint=parseFloat(i.tint)),i.theme&&n.themeElements&&n.themeElements.clrScheme&&(r.color.rgb=h2(n.themeElements.clrScheme[r.color.theme].rgb,r.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(a&&a.WTF&&!s)throw new Error("unrecognized "+i[0]+" in fonts")}})}function AUe(e,t,n){t.NumberFmt=[];for(var a=Bu(Xn),r=0;r<a.length;++r)t.NumberFmt[a[r]]=Xn[a[r]];var s=e[0].match(bo);if(s)for(r=0;r<s.length;++r){var o=Ln(s[r]);switch(Lu(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var i=xa(or(o.formatCode)),c=parseInt(o.numFmtId,10);if(t.NumberFmt[c]=i,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=i}ZA(i,c)}}break;case"</numFmt>":break;default:if(n.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}var Cy=["numFmtId","fillId","fontId","borderId","xfId"],Sy=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function fUe(e,t,n){t.CellXf=[];var a,r=!1;(e[0].match(bo)||[]).forEach(function(s){var o=Ln(s),i=0;switch(Lu(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(a=o,delete a[0],i=0;i<Cy.length;++i)a[Cy[i]]&&(a[Cy[i]]=parseInt(a[Cy[i]],10));for(i=0;i<Sy.length;++i)a[Sy[i]]&&(a[Sy[i]]=yr(a[Sy[i]]));if(t.NumberFmt&&a.numFmtId>392){for(i=392;i>60;--i)if(t.NumberFmt[a.numFmtId]==t.NumberFmt[i]){a.numFmtId=i;break}}t.CellXf.push(a);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};o.vertical&&(c.vertical=o.vertical),o.horizontal&&(c.horizontal=o.horizontal),o.textRotation!=null&&(c.textRotation=o.textRotation),o.indent&&(c.indent=o.indent),o.wrapText&&(c.wrapText=yr(o.wrapText)),a.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":r=!0;break;case"</AlternateContent>":r=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(n&&n.WTF&&!r)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}var mUe=(function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,n=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,a=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,r=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(i,c,A){var d={};if(!i)return d;i=i.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=i.match(t))&&AUe(f,d,A),(f=i.match(r))&&dUe(f,d,c,A),(f=i.match(a))&&cUe(f,d,c,A),(f=i.match(s))&&uUe(f,d,c,A),(f=i.match(n))&&fUe(f,d,A),d}})();function hUe(e,t){var n=e.read_shift(2),a=po(e);return[n,a]}function vUe(e,t,n){var a={};a.sz=e.read_shift(2)/20;var r=EPe(e);r.fItalic&&(a.italic=1),r.fCondense&&(a.condense=1),r.fExtend&&(a.extend=1),r.fShadow&&(a.shadow=1),r.fOutline&&(a.outline=1),r.fStrikeout&&(a.strike=1);var s=e.read_shift(2);switch(s===700&&(a.bold=1),e.read_shift(2)){case 1:a.vertAlign="superscript";break;case 2:a.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(a.underline=o);var i=e.read_shift(1);i>0&&(a.family=i);var c=e.read_shift(1);switch(c>0&&(a.charset=c),e.l++,a.color=SPe(e),e.read_shift(1)){case 1:a.scheme="major";break;case 2:a.scheme="minor";break}return a.name=po(e),a}var pUe=yo;function gUe(e,t){var n=e.l+t,a=e.read_shift(2),r=e.read_shift(2);return e.l=n,{ixfe:a,numFmtId:r}}var yUe=yo;function _Ue(e,t,n){var a={};a.NumberFmt=[];for(var r in Xn)a.NumberFmt[r]=Xn[r];a.CellXf=[],a.Fonts=[];var s=[],o=!1;return Rc(e,function(c,A,d){switch(d){case 44:a.NumberFmt[c[0]]=c[1],ZA(c[1],c[0]);break;case 43:a.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=h2(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&a.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:s.push(d),o=!0;break;case 38:s.pop(),o=!1;break;default:if(A.T>0)s.push(d);else if(A.T<0)s.pop();else if(!o||n.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),a}var wUe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function bUe(e,t,n){t.themeElements.clrScheme=[];var a={};(e[0].match(bo)||[]).forEach(function(r){var s=Ln(r);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":a.rgb=s.val;break;case"<a:sysClr":a.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(t.themeElements.clrScheme[wUe.indexOf(s[0])]=a,a={}):a.name=s[0].slice(3,s[0].length-1);break;default:if(n&&n.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function xUe(){}function CUe(){}var SUe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,EUe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,BUe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function kUe(e,t,n){t.themeElements={};var a;[["clrScheme",SUe,bUe],["fontScheme",EUe,xUe],["fmtScheme",BUe,CUe]].forEach(function(r){if(!(a=e.match(r[1])))throw new Error(r[0]+" not found in themeElements");r[2](a,t,n)})}var TUe=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function r9(e,t){(!e||e.length===0)&&(e=IUe());var n,a={};if(!(n=e.match(TUe)))throw new Error("themeElements not found in theme");return kUe(n[0],a,t),a.raw=e,a}function IUe(e,t){var n=[h$];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface=" "/>',n[n.length]='<a:font script="Hang" typeface=" "/>',n[n.length]='<a:font script="Hans" typeface=""/>',n[n.length]='<a:font script="Hant" typeface=""/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface=" "/>',n[n.length]='<a:font script="Hang" typeface=" "/>',n[n.length]='<a:font script="Hans" typeface=""/>',n[n.length]='<a:font script="Hant" typeface=""/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function FUe(e,t,n){var a=e.l+t,r=e.read_shift(4);if(r!==124226){if(!n.cellStyles){e.l=a;return}var s=e.slice(e.l);e.l=a;var o;try{o=m$(s,{type:"array"})}catch{return}var i=pi(o,"theme/theme/theme1.xml",!0);if(i)return r9(i,n)}}function PUe(e){return e.read_shift(4)}function DUe(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=UUe(e,4);break;case 2:t.xclrValue=G$(e);break;case 3:t.xclrValue=PUe(e);break;case 4:e.l+=4;break}return e.l+=8,t}function UUe(e,t){return yo(e,t)}function RUe(e,t){return yo(e,t)}function NUe(e){var t=e.read_shift(2),n=e.read_shift(2)-4,a=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:a[1]=DUe(e);break;case 6:a[1]=RUe(e,n);break;case 14:case 15:a[1]=e.read_shift(n===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+n)}return a}function VUe(e,t){var n=e.l+t;e.l+=2;var a=e.read_shift(2);e.l+=2;for(var r=e.read_shift(2),s=[];r-- >0;)s.push(NUe(e,n-e.l));return{ixfe:a,ext:s}}function LUe(e,t){t.forEach(function(n){n[0]})}function MUe(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:po(e)}}function OUe(e){for(var t=[],n=e.read_shift(4);n-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function HUe(e){return e.l+=4,e.read_shift(4)!=0}function $Ue(e,t,n){var a={Types:[],Cell:[],Value:[]},r=n||{},s=[],o=!1,i=2;return Rc(e,function(c,A,d){switch(d){case 335:a.Types.push({name:c.name});break;case 51:c.forEach(function(f){i==1?a.Cell.push({type:a.Types[f[0]-1].name,index:f[1]}):i==0&&a.Value.push({type:a.Types[f[0]-1].name,index:f[1]})});break;case 337:i=c?1:0;break;case 338:i=2;break;case 35:s.push(d),o=!0;break;case 36:s.pop(),o=!1;break;default:if(!A.T){if(!o||r.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),a}function QUe(e,t,n){var a={Types:[],Cell:[],Value:[]};if(!e)return a;var r=!1,s=2,o;return e.replace(bo,function(i){var c=Ln(i);switch(Lu(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":a.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var A=0;A<a.Types.length;++A)a.Types[A].name==c.name&&(o=a.Types[A]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?a.Cell.push({type:a.Types[c.t-1].name,index:+c.v}):s==0&&a.Value.push({type:a.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+c.i);break;default:if(!r&&n.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return i}),a}function GUe(e){var t=[];if(!e)return t;var n=1;return(e.match(bo)||[]).forEach(function(a){var r=Ln(a);switch(r[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete r[0],r.i?n=r.i:r.i=n,t.push(r);break}}),t}function zUe(e){var t={};t.i=e.read_shift(4);var n={};n.r=e.read_shift(4),n.c=e.read_shift(4),t.r=Kn(n);var a=e.read_shift(1);return a&2&&(t.l="1"),a&8&&(t.a="1"),t}function KUe(e,t,n){var a=[];return Rc(e,function(s,o,i){switch(i){case 63:a.push(s);break;default:if(!o.T)throw new Error("Unexpected record 0x"+i.toString(16))}}),a}function WUe(e,t,n,a){if(!e)return e;var r=a||{},s=!1;Rc(e,function(i,c,A){switch(A){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!c.T){if(!s||r.WTF)throw new Error("Unexpected record 0x"+A.toString(16))}}},r)}function jUe(e,t){if(!e)return"??";var n=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][n].Target}function ZR(e,t,n,a){var r=Array.isArray(e),s;t.forEach(function(o){var i=Ro(o.ref);if(r?(e[i.r]||(e[i.r]=[]),s=e[i.r][i.c]):s=e[o.ref],!s){s={t:"z"},r?e[i.r][i.c]=s:e[o.ref]=s;var c=Dr(e["!ref"]||"BDWGO1000001:A1");c.s.r>i.r&&(c.s.r=i.r),c.e.r<i.r&&(c.e.r=i.r),c.s.c>i.c&&(c.s.c=i.c),c.e.c<i.c&&(c.e.c=i.c);var A=ga(c);A!==e["!ref"]&&(e["!ref"]=A)}s.c||(s.c=[]);var d={a:o.author,t:o.t,r:o.r,T:n};o.h&&(d.h=o.h);for(var f=s.c.length-1;f>=0;--f){if(!n&&s.c[f].T)return;n&&!s.c[f].T&&s.c.splice(f,1)}if(n&&a){for(f=0;f<a.length;++f)if(d.a==a[f].id){d.a=a[f].name||d.a;break}}s.c.push(d)})}function qUe(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var n=[],a=[],r=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);r&&r[1]&&r[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var i=o.match(/<(?:\w+:)?author[^>]*>(.*)/);i&&n.push(i[1])}});var s=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var i=o.match(/<(?:\w+:)?comment[^>]*>/);if(i){var c=Ln(i[0]),A={author:c.authorId&&n[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=Ro(c.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var f=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),m=!!f&&!!f[1]&&GT(f[1])||{r:"",t:"",h:""};A.r=m.r,m.r=="<t></t>"&&(m.t=m.h=""),A.t=(m.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(A.h=m.h),a.push(A)}}}}),a}function YUe(e,t){var n=[],a=!1,r={},s=0;return e.replace(bo,function(i,c){var A=Ln(i);switch(Lu(A[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":r={author:A.personId,guid:A.id,ref:A.ref,T:1};break;case"</threadedComment>":r.t!=null&&n.push(r);break;case"<text>":case"<text":s=c+i.length;break;case"</text>":r.t=e.slice(s,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":a=!0;break;case"</mentions>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&t.WTF)throw new Error("unrecognized "+A[0]+" in threaded comments")}return i}),n}function XUe(e,t){var n=[],a=!1;return e.replace(bo,function(s){var o=Ln(s);switch(Lu(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":n.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&t.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return s}),n}function JUe(e){var t={};t.iauthor=e.read_shift(4);var n=Rf(e);return t.rfx=n.s,t.ref=Kn(n.s),e.l+=16,t}var ZUe=po;function eRe(e,t){var n=[],a=[],r={},s=!1;return Rc(e,function(i,c,A){switch(A){case 632:a.push(i);break;case 635:r=i;break;case 637:r.t=i.t,r.h=i.h,r.r=i.r;break;case 636:if(r.author=a[r.iauthor],delete r.iauthor,t.sheetRows&&r.rfx&&t.sheetRows<=r.rfx.r)break;r.t||(r.t=""),delete r.rfx,n.push(r);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!s||t.WTF)throw new Error("Unexpected record 0x"+A.toString(16))}}}),n}var tRe="application/vnd.ms-office.vbaProject";function nRe(e){var t=ha.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(n,a){if(!(n.slice(-1)==="/"||!n.match(/_VBA_PROJECT_CUR/))){var r=n.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");ha.utils.cfb_add(t,r,e.FileIndex[a].content)}}),ha.write(t)}function aRe(){return{"!type":"dialog"}}function rRe(){return{"!type":"dialog"}}function sRe(){return{"!type":"macro"}}function oRe(){return{"!type":"macro"}}var ch=(function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function n(a,r,s,o){var i=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),o.length==0?i=!0:o.charAt(0)=="["&&(i=!0,o=o.slice(1,-1));var A=s.length>0?parseInt(s,10)|0:0,d=o.length>0?parseInt(o,10)|0:0;return i?d+=t.c:--d,c?A+=t.r:--A,r+(i?"":"$")+fs(d)+(c?"":"$")+Ks(A)}return function(r,s){return t=s,r.replace(e,n)}})(),s9=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,iRe=(function(){return function(t,n){return t.replace(s9,function(a,r,s,o,i,c){var A=LT(o)-(s?0:n.c),d=VT(c)-(i?0:n.r),f=d==0?"":i?d+1:"["+d+"]",m=A==0?"":s?A+1:"["+A+"]";return r+"R"+f+"C"+m})}})();function o9(e,t){return e.replace(s9,function(n,a,r,s,o,i){return a+(r=="$"?r+s:fs(LT(s)+t.c))+(o=="$"?o+i:Ks(VT(i)+t.r))})}function lRe(e,t,n){var a=uv(t),r=a.s,s=Ro(n),o={r:s.r-r.r,c:s.c-r.c};return o9(e,o)}function uRe(e){return e.length!=1}function eN(e){return e.replace(/_xlfn\./g,"")}function qr(e){e.l+=1}function Hd(e,t){var n=e.read_shift(2);return[n&16383,n>>14&1,n>>15&1]}function i9(e,t,n){var a=2;if(n){if(n.biff>=2&&n.biff<=5)return l9(e);n.biff==12&&(a=4)}var r=e.read_shift(a),s=e.read_shift(a),o=Hd(e),i=Hd(e);return{s:{r,c:o[0],cRel:o[1],rRel:o[2]},e:{r:s,c:i[0],cRel:i[1],rRel:i[2]}}}function l9(e){var t=Hd(e),n=Hd(e),a=e.read_shift(1),r=e.read_shift(1);return{s:{r:t[0],c:a,cRel:t[1],rRel:t[2]},e:{r:n[0],c:r,cRel:n[1],rRel:n[2]}}}function cRe(e,t,n){if(n.biff<8)return l9(e);var a=e.read_shift(n.biff==12?4:2),r=e.read_shift(n.biff==12?4:2),s=Hd(e),o=Hd(e);return{s:{r:a,c:s[0],cRel:s[1],rRel:s[2]},e:{r,c:o[0],cRel:o[1],rRel:o[2]}}}function u9(e,t,n){if(n&&n.biff>=2&&n.biff<=5)return dRe(e);var a=e.read_shift(n&&n.biff==12?4:2),r=Hd(e);return{r:a,c:r[0],cRel:r[1],rRel:r[2]}}function dRe(e){var t=Hd(e),n=e.read_shift(1);return{r:t[0],c:n,cRel:t[1],rRel:t[2]}}function ARe(e){var t=e.read_shift(2),n=e.read_shift(2);return{r:t,c:n&255,fQuoted:!!(n&16384),cRel:n>>15,rRel:n>>15}}function fRe(e,t,n){var a=n&&n.biff?n.biff:8;if(a>=2&&a<=5)return mRe(e);var r=e.read_shift(a>=12?4:2),s=e.read_shift(2),o=(s&16384)>>14,i=(s&32768)>>15;if(s&=16383,i==1)for(;r>524287;)r-=1048576;if(o==1)for(;s>8191;)s=s-16384;return{r,c:s,cRel:o,rRel:i}}function mRe(e){var t=e.read_shift(2),n=e.read_shift(1),a=(t&32768)>>15,r=(t&16384)>>14;return t&=16383,a==1&&t>=8192&&(t=t-16384),r==1&&n>=128&&(n=n-256),{r:t,c:n,cRel:r,rRel:a}}function hRe(e,t,n){var a=(e[e.l++]&96)>>5,r=i9(e,n.biff>=2&&n.biff<=5?6:8,n);return[a,r]}function vRe(e,t,n){var a=(e[e.l++]&96)>>5,r=e.read_shift(2,"i"),s=8;if(n)switch(n.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}var o=i9(e,s,n);return[a,r,o]}function pRe(e,t,n){var a=(e[e.l++]&96)>>5;return e.l+=n&&n.biff>8?12:n.biff<8?6:8,[a]}function gRe(e,t,n){var a=(e[e.l++]&96)>>5,r=e.read_shift(2),s=8;if(n)switch(n.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}return e.l+=s,[a,r]}function yRe(e,t,n){var a=(e[e.l++]&96)>>5,r=cRe(e,t-1,n);return[a,r]}function _Re(e,t,n){var a=(e[e.l++]&96)>>5;return e.l+=n.biff==2?6:n.biff==12?14:7,[a]}function tN(e){var t=e[e.l+1]&1,n=1;return e.l+=4,[t,n]}function wRe(e,t,n){e.l+=2;for(var a=e.read_shift(n&&n.biff==2?1:2),r=[],s=0;s<=a;++s)r.push(e.read_shift(n&&n.biff==2?1:2));return r}function bRe(e,t,n){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(n&&n.biff==2?1:2)]}function xRe(e,t,n){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(n&&n.biff==2?1:2)]}function CRe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function SRe(e,t,n){var a=e[e.l+1]&255?1:0;return e.l+=n&&n.biff==2?3:4,[a]}function c9(e){var t=e.read_shift(1),n=e.read_shift(1);return[t,n]}function ERe(e){return e.read_shift(2),c9(e)}function BRe(e){return e.read_shift(2),c9(e)}function kRe(e,t,n){var a=(e[e.l]&96)>>5;e.l+=1;var r=u9(e,0,n);return[a,r]}function TRe(e,t,n){var a=(e[e.l]&96)>>5;e.l+=1;var r=fRe(e,0,n);return[a,r]}function IRe(e,t,n){var a=(e[e.l]&96)>>5;e.l+=1;var r=e.read_shift(2);n&&n.biff==5&&(e.l+=12);var s=u9(e,0,n);return[a,r,s]}function FRe(e,t,n){var a=(e[e.l]&96)>>5;e.l+=1;var r=e.read_shift(n&&n.biff<=3?1:2);return[PNe[r],f9[r],a]}function PRe(e,t,n){var a=e[e.l++],r=e.read_shift(1),s=n&&n.biff<=3?[a==88?-1:0,e.read_shift(1)]:DRe(e);return[r,(s[0]===0?f9:FNe)[s[1]]]}function DRe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function URe(e,t,n){e.l+=n&&n.biff==2?3:4}function RRe(e,t,n){if(e.l++,n&&n.biff==12)return[e.read_shift(4,"i"),0];var a=e.read_shift(2),r=e.read_shift(n&&n.biff==2?1:2);return[a,r]}function NRe(e){return e.l++,Nf[e.read_shift(1)]}function VRe(e){return e.l++,e.read_shift(2)}function LRe(e){return e.l++,e.read_shift(1)!==0}function MRe(e){return e.l++,co(e)}function ORe(e,t,n){return e.l++,wg(e,t-1,n)}function HRe(e,t){var n=[e.read_shift(1)];if(t==12)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2;break}switch(n[0]){case 4:n[1]=Hr(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:n[1]=Nf[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:n[1]=co(e);break;case 2:n[1]=Vf(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function $Re(e,t,n){for(var a=e.read_shift(n.biff==12?4:2),r=[],s=0;s!=a;++s)r.push((n.biff==12?Rf:Ow)(e));return r}function QRe(e,t,n){var a=0,r=0;n.biff==12?(a=e.read_shift(4),r=e.read_shift(4)):(r=1+e.read_shift(1),a=1+e.read_shift(2)),n.biff>=2&&n.biff<8&&(--a,--r==0&&(r=256));for(var s=0,o=[];s!=a&&(o[s]=[]);++s)for(var i=0;i!=r;++i)o[s][i]=HRe(e,n.biff);return o}function GRe(e,t,n){var a=e.read_shift(1)>>>5&3,r=!n||n.biff>=8?4:2,s=e.read_shift(r);switch(n.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[a,0,s]}function zRe(e,t,n){if(n.biff==5)return KRe(e);var a=e.read_shift(1)>>>5&3,r=e.read_shift(2),s=e.read_shift(4);return[a,r,s]}function KRe(e){var t=e.read_shift(1)>>>5&3,n=e.read_shift(2,"i");e.l+=8;var a=e.read_shift(2);return e.l+=12,[t,n,a]}function WRe(e,t,n){var a=e.read_shift(1)>>>5&3;e.l+=n&&n.biff==2?3:4;var r=e.read_shift(n&&n.biff==2?1:2);return[a,r]}function jRe(e,t,n){var a=e.read_shift(1)>>>5&3,r=e.read_shift(n&&n.biff==2?1:2);return[a,r]}function qRe(e,t,n){var a=e.read_shift(1)>>>5&3;return e.l+=4,n.biff<8&&e.l--,n.biff==12&&(e.l+=2),[a]}function YRe(e,t,n){var a=(e[e.l++]&96)>>5,r=e.read_shift(2),s=4;if(n)switch(n.biff){case 5:s=15;break;case 12:s=6;break}return e.l+=s,[a,r]}var XRe=yo,JRe=yo,ZRe=yo;function xg(e,t,n){return e.l+=2,[ARe(e)]}function KT(e){return e.l+=6,[]}var eNe=xg,tNe=KT,nNe=KT,aNe=xg;function d9(e){return e.l+=2,[Jr(e),e.read_shift(2)&1]}var rNe=xg,sNe=d9,oNe=KT,iNe=xg,lNe=xg,uNe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function cNe(e){e.l+=2;var t=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(4),r=e.read_shift(2),s=e.read_shift(2),o=uNe[n>>2&31];return{ixti:t,coltype:n&3,rt:o,idx:a,c:r,C:s}}function dNe(e){return e.l+=2,[e.read_shift(4)]}function ANe(e,t,n){return e.l+=5,e.l+=2,e.l+=n.biff==2?1:4,["PTGSHEET"]}function fNe(e,t,n){return e.l+=n.biff==2?4:5,["PTGENDSHEET"]}function mNe(e){var t=e.read_shift(1)>>>5&3,n=e.read_shift(2);return[t,n]}function hNe(e){var t=e.read_shift(1)>>>5&3,n=e.read_shift(2);return[t,n]}function vNe(e){return e.l+=4,[0,0]}var nN={1:{n:"PtgExp",f:RRe},2:{n:"PtgTbl",f:ZRe},3:{n:"PtgAdd",f:qr},4:{n:"PtgSub",f:qr},5:{n:"PtgMul",f:qr},6:{n:"PtgDiv",f:qr},7:{n:"PtgPower",f:qr},8:{n:"PtgConcat",f:qr},9:{n:"PtgLt",f:qr},10:{n:"PtgLe",f:qr},11:{n:"PtgEq",f:qr},12:{n:"PtgGe",f:qr},13:{n:"PtgGt",f:qr},14:{n:"PtgNe",f:qr},15:{n:"PtgIsect",f:qr},16:{n:"PtgUnion",f:qr},17:{n:"PtgRange",f:qr},18:{n:"PtgUplus",f:qr},19:{n:"PtgUminus",f:qr},20:{n:"PtgPercent",f:qr},21:{n:"PtgParen",f:qr},22:{n:"PtgMissArg",f:qr},23:{n:"PtgStr",f:ORe},26:{n:"PtgSheet",f:ANe},27:{n:"PtgEndSheet",f:fNe},28:{n:"PtgErr",f:NRe},29:{n:"PtgBool",f:LRe},30:{n:"PtgInt",f:VRe},31:{n:"PtgNum",f:MRe},32:{n:"PtgArray",f:_Re},33:{n:"PtgFunc",f:FRe},34:{n:"PtgFuncVar",f:PRe},35:{n:"PtgName",f:GRe},36:{n:"PtgRef",f:kRe},37:{n:"PtgArea",f:hRe},38:{n:"PtgMemArea",f:WRe},39:{n:"PtgMemErr",f:XRe},40:{n:"PtgMemNoMem",f:JRe},41:{n:"PtgMemFunc",f:jRe},42:{n:"PtgRefErr",f:qRe},43:{n:"PtgAreaErr",f:pRe},44:{n:"PtgRefN",f:TRe},45:{n:"PtgAreaN",f:yRe},46:{n:"PtgMemAreaN",f:mNe},47:{n:"PtgMemNoMemN",f:hNe},57:{n:"PtgNameX",f:zRe},58:{n:"PtgRef3d",f:IRe},59:{n:"PtgArea3d",f:vRe},60:{n:"PtgRefErr3d",f:YRe},61:{n:"PtgAreaErr3d",f:gRe},255:{}},pNe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},gNe={1:{n:"PtgElfLel",f:d9},2:{n:"PtgElfRw",f:iNe},3:{n:"PtgElfCol",f:eNe},6:{n:"PtgElfRwV",f:lNe},7:{n:"PtgElfColV",f:aNe},10:{n:"PtgElfRadical",f:rNe},11:{n:"PtgElfRadicalS",f:oNe},13:{n:"PtgElfColS",f:tNe},15:{n:"PtgElfColSV",f:nNe},16:{n:"PtgElfRadicalLel",f:sNe},25:{n:"PtgList",f:cNe},29:{n:"PtgSxName",f:dNe},255:{}},yNe={0:{n:"PtgAttrNoop",f:vNe},1:{n:"PtgAttrSemi",f:SRe},2:{n:"PtgAttrIf",f:xRe},4:{n:"PtgAttrChoose",f:wRe},8:{n:"PtgAttrGoto",f:bRe},16:{n:"PtgAttrSum",f:URe},32:{n:"PtgAttrBaxcel",f:tN},33:{n:"PtgAttrBaxcel",f:tN},64:{n:"PtgAttrSpace",f:ERe},65:{n:"PtgAttrSpaceSemi",f:BRe},128:{n:"PtgAttrIfError",f:CRe},255:{}};function Cg(e,t,n,a){if(a.biff<8)return yo(e,t);for(var r=e.l+t,s=[],o=0;o!==n.length;++o)switch(n[o][0]){case"PtgArray":n[o][1]=QRe(e,0,a),s.push(n[o][1]);break;case"PtgMemArea":n[o][2]=$Re(e,n[o][1],a),s.push(n[o][2]);break;case"PtgExp":a&&a.biff==12&&(n[o][1][1]=e.read_shift(4),s.push(n[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[o][0]}return t=r-e.l,t!==0&&s.push(yo(e,t)),s}function Sg(e,t,n){for(var a=e.l+t,r,s,o=[];a!=e.l;)t=a-e.l,s=e[e.l],r=nN[s]||nN[pNe[s]],(s===24||s===25)&&(r=(s===24?gNe:yNe)[e[e.l+1]]),!r||!r.f?yo(e,t):o.push([r.n,r.f(e,t,n)]);return o}function _Ne(e){for(var t=[],n=0;n<e.length;++n){for(var a=e[n],r=[],s=0;s<a.length;++s){var o=a[s];if(o)switch(o[0]){case 2:r.push('"'+o[1].replace(/"/g,'""')+'"');break;default:r.push(o[1])}else r.push("")}t.push(r.join(","))}return t.join(";")}var wNe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function bNe(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function A9(e,t,n){if(!e)return"SH33TJSERR0";if(n.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var a=e.XTI[t];if(n.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!a)return"SH33TJSERR1";var r="";if(n.biff>8)switch(e[a[0]][0]){case 357:return r=a[1]==-1?"#REF":e.SheetNames[a[1]],a[1]==a[2]?r:r+":"+e.SheetNames[a[2]];case 358:return n.SID!=null?e.SheetNames[n.SID]:"SH33TJSSAME"+e[a[0]][0];case 355:default:return"SH33TJSSRC"+e[a[0]][0]}switch(e[a[0]][0][0]){case 1025:return r=a[1]==-1?"#REF":e.SheetNames[a[1]]||"SH33TJSERR3",a[1]==a[2]?r:r+":"+e.SheetNames[a[2]];case 14849:return e[a[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return e[a[0]][0][3]?(r=a[1]==-1?"#REF":e[a[0]][0][3][a[1]]||"SH33TJSERR4",a[1]==a[2]?r:r+":"+e[a[0]][0][3][a[2]]):"SH33TJSERR2"}}function aN(e,t,n){var a=A9(e,t,n);return a=="#REF"?a:bNe(a,n)}function ro(e,t,n,a,r){var s=r&&r.biff||8,o={s:{c:0,r:0}},i=[],c,A,d,f=0,m=0,h,v="";if(!e[0]||!e[0][0])return"";for(var y=-1,g="",w=0,b=e[0].length;w<b;++w){var x=e[0][w];switch(x[0]){case"PtgUminus":i.push("-"+i.pop());break;case"PtgUplus":i.push("+"+i.pop());break;case"PtgPercent":i.push(i.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=i.pop(),A=i.pop(),y>=0){switch(e[0][y][1][0]){case 0:g=Ir(" ",e[0][y][1][1]);break;case 1:g=Ir("\r",e[0][y][1][1]);break;default:if(g="",r.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][y][1][0])}A=A+g,y=-1}i.push(A+wNe[x[0]]+c);break;case"PtgIsect":c=i.pop(),A=i.pop(),i.push(A+" "+c);break;case"PtgUnion":c=i.pop(),A=i.pop(),i.push(A+","+c);break;case"PtgRange":c=i.pop(),A=i.pop(),i.push(A+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=Kp(x[1][1],o,r),i.push(Wp(d,s));break;case"PtgRefN":d=n?Kp(x[1][1],n,r):x[1][1],i.push(Wp(d,s));break;case"PtgRef3d":f=x[1][1],d=Kp(x[1][2],o,r),v=aN(a,f,r),i.push(v+"!"+Wp(d,s));break;case"PtgFunc":case"PtgFuncVar":var T=x[1][0],U=x[1][1];T||(T=0),T&=127;var k=T==0?[]:i.slice(-T);i.length-=T,U==="User"&&(U=k.shift()),i.push(U+"("+k.join(",")+")");break;case"PtgBool":i.push(x[1]?"TRUE":"FALSE");break;case"PtgInt":i.push(x[1]);break;case"PtgNum":i.push(String(x[1]));break;case"PtgStr":i.push('"'+x[1].replace(/"/g,'""')+'"');break;case"PtgErr":i.push(x[1]);break;case"PtgAreaN":h=VR(x[1][1],n?{s:n}:o,r),i.push(UC(h,r));break;case"PtgArea":h=VR(x[1][1],o,r),i.push(UC(h,r));break;case"PtgArea3d":f=x[1][1],h=x[1][2],v=aN(a,f,r),i.push(v+"!"+UC(h,r));break;case"PtgAttrSum":i.push("SUM("+i.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":m=x[1][2];var S=(a.names||[])[m-1]||(a[0]||[])[m],E=S?S.Name:"SH33TJSNAME"+String(m);E&&E.slice(0,6)=="_xlfn."&&!r.xlfn&&(E=E.slice(6)),i.push(E);break;case"PtgNameX":var C=x[1][1];m=x[1][2];var P;if(r.biff<=5)C<0&&(C=-C),a[C]&&(P=a[C][m]);else{var F="";if(((a[C]||[])[0]||[])[0]==14849||(((a[C]||[])[0]||[])[0]==1025?a[C][m]&&a[C][m].itab>0&&(F=a.SheetNames[a[C][m].itab-1]+"!"):F=a.SheetNames[m-1]+"!"),a[C]&&a[C][m])F+=a[C][m].Name;else if(a[0]&&a[0][m])F+=a[0][m].Name;else{var N=(A9(a,C,r)||"").split(";;");N[m-1]?F=N[m-1]:F+="SH33TJSERRX"}i.push(F);break}P||(P={Name:"SH33TJSERRY"}),i.push(P.Name);break;case"PtgParen":var L="(",ie=")";if(y>=0){switch(g="",e[0][y][1][0]){case 2:L=Ir(" ",e[0][y][1][1])+L;break;case 3:L=Ir("\r",e[0][y][1][1])+L;break;case 4:ie=Ir(" ",e[0][y][1][1])+ie;break;case 5:ie=Ir("\r",e[0][y][1][1])+ie;break;default:if(r.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][y][1][0])}y=-1}i.push(L+i.pop()+ie);break;case"PtgRefErr":i.push("#REF!");break;case"PtgRefErr3d":i.push("#REF!");break;case"PtgExp":d={c:x[1][1],r:x[1][0]};var le={c:n.c,r:n.r};if(a.sharedf[Kn(d)]){var Q=a.sharedf[Kn(d)];i.push(ro(Q,o,le,a,r))}else{var Z=!1;for(c=0;c!=a.arrayf.length;++c)if(A=a.arrayf[c],!(d.c<A[0].s.c||d.c>A[0].e.c)&&!(d.r<A[0].s.r||d.r>A[0].e.r)){i.push(ro(A[1],o,le,a,r)),Z=!0;break}Z||i.push(x[1])}break;case"PtgArray":i.push("{"+_Ne(x[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":y=w;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":i.push("");break;case"PtgAreaErr":i.push("#REF!");break;case"PtgAreaErr3d":i.push("#REF!");break;case"PtgList":i.push("Table"+x[1].idx+"[#"+x[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(x));default:throw new Error("Unrecognized Formula Token: "+String(x))}var ce=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(r.biff!=3&&y>=0&&ce.indexOf(e[0][w][0])==-1){x=e[0][y];var J=!0;switch(x[1][0]){case 4:J=!1;case 0:g=Ir(" ",x[1][1]);break;case 5:J=!1;case 1:g=Ir("\r",x[1][1]);break;default:if(g="",r.WTF)throw new Error("Unexpected PtgAttrSpaceType "+x[1][0])}i.push((J?g:"")+i.pop()+(J?"":g)),y=-1}}if(i.length>1&&r.WTF)throw new Error("bad formula stack");return i[0]}function xNe(e,t,n){var a=e.l+t,r=n.biff==2?1:2,s,o=e.read_shift(r);if(o==65535)return[[],yo(e,t-2)];var i=Sg(e,o,n);return t!==o+r&&(s=Cg(e,t-o-r,i,n)),e.l=a,[i,s]}function CNe(e,t,n){var a=e.l+t,r=n.biff==2?1:2,s,o=e.read_shift(r);if(o==65535)return[[],yo(e,t-2)];var i=Sg(e,o,n);return t!==o+r&&(s=Cg(e,t-o-r,i,n)),e.l=a,[i,s]}function SNe(e,t,n,a){var r=e.l+t,s=Sg(e,a,n),o;return r!==e.l&&(o=Cg(e,r-e.l,s,n)),[s,o]}function ENe(e,t,n){var a=e.l+t,r,s=e.read_shift(2),o=Sg(e,s,n);return s==65535?[[],yo(e,t-2)]:(t!==s+2&&(r=Cg(e,a-s-2,o,n)),[o,r])}function BNe(e){var t;if(dc(e,e.l+6)!==65535)return[co(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function VC(e,t,n){var a=e.l+t,r=Mu(e);n.biff==2&&++e.l;var s=BNe(e),o=e.read_shift(1);n.biff!=2&&(e.read_shift(1),n.biff>=5&&e.read_shift(4));var i=CNe(e,a-e.l,n);return{cell:r,val:s[0],formula:i,shared:o>>3&1,tt:s[1]}}function Hw(e,t,n){var a=e.read_shift(4),r=Sg(e,a,n),s=e.read_shift(4),o=s>0?Cg(e,s,r,n):null;return[r,o]}var kNe=Hw,$w=Hw,TNe=Hw,INe=Hw,FNe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},f9={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},PNe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function rN(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,n){return n.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function LC(e){var t=e.split(":"),n=t[0].split(".")[0];return[n,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}var Xp={},dh={};function Jp(e,t){if(e){var n=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(n=[1,1,1,1,.5,.5]),e.left==null&&(e.left=n[0]),e.right==null&&(e.right=n[1]),e.top==null&&(e.top=n[2]),e.bottom==null&&(e.bottom=n[3]),e.header==null&&(e.header=n[4]),e.footer==null&&(e.footer=n[5])}}function m9(e,t,n,a,r,s){try{a.cellNF&&(e.z=Xn[t])}catch(i){if(a.WTF)throw i}if(!(e.t==="z"&&!a.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Is(e.v)),(!a||a.cellText!==!1)&&e.t!=="z")try{if(Xn[t]==null&&ZA(DFe[t]||"General",t),e.t==="e")e.w=e.w||Nf[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=I0(e.v);else if(e.t==="d"){var o=Oo(e.v);(o|0)===o?e.w=o.toString(10):e.w=I0(o)}else{if(e.v===void 0)return"";e.w=Af(e.v,dh)}else e.t==="d"?e.w=qi(t,Oo(e.v),dh):e.w=qi(t,e.v,dh)}catch(i){if(a.WTF)throw i}if(a.cellStyles&&n!=null)try{e.s=s.Fills[n],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=h2(r.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),a.WTF&&(e.s.fgColor.raw_rgb=r.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=h2(r.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),a.WTF&&(e.s.bgColor.raw_rgb=r.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(i){if(a.WTF&&s.Fills)throw i}}}function DNe(e,t){var n=Dr(t);n.s.r<=n.e.r&&n.s.c<=n.e.c&&n.s.r>=0&&n.s.c>=0&&(e["!ref"]=ga(n))}var UNe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,RNe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,NNe=/<(?:\w:)?hyperlink [^>]*>/mg,VNe=/"(\w*:\w*)"/,LNe=/<(?:\w:)?col\b[^>]*[\/]?>/g,MNe=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,ONe=/<(?:\w:)?pageMargins[^>]*\/>/g,h9=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,HNe=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,$Ne=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function QNe(e,t,n,a,r,s,o){if(!e)return e;a||(a={"!id":{}});var i=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},A="",d="",f=e.match(RNe);f?(A=e.slice(0,f.index),d=e.slice(f.index+f[0].length)):A=d=e;var m=A.match(h9);m?WT(m[0],i,r,n):(m=A.match(HNe))&&GNe(m[0],m[1]||"",i,r,n);var h=(A.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(h>0){var v=A.slice(h,h+50).match(VNe);v&&DNe(i,v[1])}var y=A.match($Ne);y&&y[1]&&YNe(y[1],r);var g=[];if(t.cellStyles){var w=A.match(LNe);w&&WNe(g,w)}f&&XNe(f[1],i,t,c,s,o);var b=d.match(MNe);b&&(i["!autofilter"]=jNe(b[0]));var x=[],T=d.match(UNe);if(T)for(h=0;h!=T.length;++h)x[h]=Dr(T[h].slice(T[h].indexOf('"')+1));var U=d.match(NNe);U&&zNe(i,U,a);var k=d.match(ONe);if(k&&(i["!margins"]=KNe(Ln(k[0]))),!i["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(i["!ref"]=ga(c)),t.sheetRows>0&&i["!ref"]){var S=Dr(i["!ref"]);t.sheetRows<=+S.e.r&&(S.e.r=t.sheetRows-1,S.e.r>c.e.r&&(S.e.r=c.e.r),S.e.r<S.s.r&&(S.s.r=S.e.r),S.e.c>c.e.c&&(S.e.c=c.e.c),S.e.c<S.s.c&&(S.s.c=S.e.c),i["!fullref"]=i["!ref"],i["!ref"]=ga(S))}return g.length>0&&(i["!cols"]=g),x.length>0&&(i["!merges"]=x),i}function WT(e,t,n,a){var r=Ln(e);n.Sheets[a]||(n.Sheets[a]={}),r.codeName&&(n.Sheets[a].CodeName=xa(or(r.codeName)))}function GNe(e,t,n,a,r){WT(e.slice(0,e.indexOf(">")),n,a,r)}function zNe(e,t,n){for(var a=Array.isArray(e),r=0;r!=t.length;++r){var s=Ln(or(t[r]),!0);if(!s.ref)return;var o=((n||{})["!id"]||[])[s.id];o?(s.Target=o.Target,s.location&&(s.Target+="#"+xa(s.location))):(s.Target="#"+xa(s.location),o={Target:s.Target,TargetMode:"Internal"}),s.Rel=o,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var i=Dr(s.ref),c=i.s.r;c<=i.e.r;++c)for(var A=i.s.c;A<=i.e.c;++A){var d=Kn({c:A,r:c});a?(e[c]||(e[c]=[]),e[c][A]||(e[c][A]={t:"z",v:void 0}),e[c][A].l=s):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=s)}}}function KNe(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(n){e[n]&&(t[n]=parseFloat(e[n]))}),t}function WNe(e,t){for(var n=!1,a=0;a!=t.length;++a){var r=Ln(t[a],!0);r.hidden&&(r.hidden=yr(r.hidden));var s=parseInt(r.min,10)-1,o=parseInt(r.max,10)-1;for(r.outlineLevel&&(r.level=+r.outlineLevel||0),delete r.min,delete r.max,r.width=+r.width,!n&&r.width&&(n=!0,zT(r.width)),Uh(r);s<=o;)e[s++]=zs(r)}}function jNe(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}var qNe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function YNe(e,t){t.Views||(t.Views=[{}]),(e.match(qNe)||[]).forEach(function(n,a){var r=Ln(n);t.Views[a]||(t.Views[a]={}),+r.zoomScale&&(t.Views[a].zoom=+r.zoomScale),yr(r.rightToLeft)&&(t.Views[a].RTL=!0)})}var XNe=(function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,n=/r=["']([^"']*)["']/,a=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,r=/ref=["']([^"']*)["']/,s=F0("v"),o=F0("f");return function(c,A,d,f,m,h){for(var v=0,y="",g=[],w=[],b=0,x=0,T=0,U="",k,S,E=0,C=0,P,F,N=0,L=0,ie=Array.isArray(h.CellXf),le,Q=[],Z=[],ce=Array.isArray(A),J=[],se={},G=!1,D=!!d.sheetStubs,j=c.split(t),ne=0,H=j.length;ne!=H;++ne){y=j[ne].trim();var te=y.length;if(te!==0){var Y=0;e:for(v=0;v<te;++v)switch(y[v]){case">":if(y[v-1]!="/"){++v;break e}if(d&&d.cellStyles){if(S=Ln(y.slice(Y,v),!0),E=S.r!=null?parseInt(S.r,10):E+1,C=-1,d.sheetRows&&d.sheetRows<E)continue;se={},G=!1,S.ht&&(G=!0,se.hpt=parseFloat(S.ht),se.hpx=R0(se.hpt)),S.hidden=="1"&&(G=!0,se.hidden=!0),S.outlineLevel!=null&&(G=!0,se.level=+S.outlineLevel),G&&(J[E-1]=se)}break;case"<":Y=v;break}if(Y>=v)break;if(S=Ln(y.slice(Y,v),!0),E=S.r!=null?parseInt(S.r,10):E+1,C=-1,!(d.sheetRows&&d.sheetRows<E)){f.s.r>E-1&&(f.s.r=E-1),f.e.r<E-1&&(f.e.r=E-1),d&&d.cellStyles&&(se={},G=!1,S.ht&&(G=!0,se.hpt=parseFloat(S.ht),se.hpx=R0(se.hpt)),S.hidden=="1"&&(G=!0,se.hidden=!0),S.outlineLevel!=null&&(G=!0,se.level=+S.outlineLevel),G&&(J[E-1]=se)),g=y.slice(v).split(e);for(var K=0;K!=g.length&&g[K].trim().charAt(0)=="<";++K);for(g=g.slice(K),v=0;v!=g.length;++v)if(y=g[v].trim(),y.length!==0){if(w=y.match(n),b=v,x=0,T=0,y="<c "+(y.slice(0,1)=="<"?">":"")+y,w!=null&&w.length===2){for(b=0,U=w[1],x=0;x!=U.length&&!((T=U.charCodeAt(x)-64)<1||T>26);++x)b=26*b+T;--b,C=b}else++C;for(x=0;x!=y.length&&y.charCodeAt(x)!==62;++x);if(++x,S=Ln(y.slice(0,x),!0),S.r||(S.r=Kn({r:E-1,c:C})),U=y.slice(x),k={t:""},(w=U.match(s))!=null&&w[1]!==""&&(k.v=xa(w[1])),d.cellFormula){if((w=U.match(o))!=null&&w[1]!==""){if(k.f=xa(or(w[1])).replace(/\r\n/g,`
`),d.xlfn||(k.f=eN(k.f)),w[0].indexOf('t="array"')>-1)k.F=(U.match(r)||[])[1],k.F.indexOf(":")>-1&&Q.push([Dr(k.F),k.F]);else if(w[0].indexOf('t="shared"')>-1){F=Ln(w[0]);var X=xa(or(w[1]));d.xlfn||(X=eN(X)),Z[parseInt(F.si,10)]=[F,X,S.r]}}else(w=U.match(/<f[^>]*\/>/))&&(F=Ln(w[0]),Z[F.si]&&(k.f=lRe(Z[F.si][1],Z[F.si][2],S.r)));var ae=Ro(S.r);for(x=0;x<Q.length;++x)ae.r>=Q[x][0].s.r&&ae.r<=Q[x][0].e.r&&ae.c>=Q[x][0].s.c&&ae.c<=Q[x][0].e.c&&(k.F=Q[x][1])}if(S.t==null&&k.v===void 0)if(k.f||k.F)k.v=0,k.t="n";else if(D)k.t="z";else continue;else k.t=S.t||"n";switch(f.s.c>C&&(f.s.c=C),f.e.c<C&&(f.e.c=C),k.t){case"n":if(k.v==""||k.v==null){if(!D)continue;k.t="z"}else k.v=parseFloat(k.v);break;case"s":if(typeof k.v>"u"){if(!D)continue;k.t="z"}else P=Xp[parseInt(k.v,10)],k.v=P.t,k.r=P.r,d.cellHTML&&(k.h=P.h);break;case"str":k.t="s",k.v=k.v!=null?or(k.v):"",d.cellHTML&&(k.h=UT(k.v));break;case"inlineStr":w=U.match(a),k.t="s",w!=null&&(P=GT(w[1]))?(k.v=P.t,d.cellHTML&&(k.h=P.h)):k.v="";break;case"b":k.v=yr(k.v);break;case"d":d.cellDates?k.v=Is(k.v,1):(k.v=Oo(Is(k.v,1)),k.t="n");break;case"e":(!d||d.cellText!==!1)&&(k.w=k.v),k.v=N$[k.v];break}if(N=L=0,le=null,ie&&S.s!==void 0&&(le=h.CellXf[S.s],le!=null&&(le.numFmtId!=null&&(N=le.numFmtId),d.cellStyles&&le.fillId!=null&&(L=le.fillId))),m9(k,N,L,d,m,h),d.cellDates&&ie&&k.t=="n"&&lv(Xn[N])&&(k.t="d",k.v=Mw(k.v)),S.cm&&d.xlmeta){var oe=(d.xlmeta.Cell||[])[+S.cm-1];oe&&oe.type=="XLDAPR"&&(k.D=!0)}if(ce){var W=Ro(S.r);A[W.r]||(A[W.r]=[]),A[W.r][W.c]=k}else A[S.r]=k}}}}J.length>0&&(A["!rows"]=J)}})();function JNe(e,t){var n={},a=e.l+t;n.r=e.read_shift(4),e.l+=4;var r=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=a,s&7&&(n.level=s&7),s&16&&(n.hidden=!0),s&32&&(n.hpt=r/20),n}var ZNe=Rf;function eVe(){}function tVe(e,t){var n={},a=e[e.l];return++e.l,n.above=!(a&64),n.left=!(a&128),e.l+=18,n.name=xPe(e),n}function nVe(e){var t=el(e);return[t]}function aVe(e){var t=Uf(e);return[t]}function rVe(e){var t=el(e),n=e.read_shift(1);return[t,n,"b"]}function sVe(e){var t=Uf(e),n=e.read_shift(1);return[t,n,"b"]}function oVe(e){var t=el(e),n=e.read_shift(1);return[t,n,"e"]}function iVe(e){var t=Uf(e),n=e.read_shift(1);return[t,n,"e"]}function lVe(e){var t=el(e),n=e.read_shift(4);return[t,n,"s"]}function uVe(e){var t=Uf(e),n=e.read_shift(4);return[t,n,"s"]}function cVe(e){var t=el(e),n=co(e);return[t,n,"n"]}function v9(e){var t=Uf(e),n=co(e);return[t,n,"n"]}function dVe(e){var t=el(e),n=HT(e);return[t,n,"n"]}function AVe(e){var t=Uf(e),n=HT(e);return[t,n,"n"]}function fVe(e){var t=el(e),n=MT(e);return[t,n,"is"]}function mVe(e){var t=el(e),n=po(e);return[t,n,"str"]}function hVe(e){var t=Uf(e),n=po(e);return[t,n,"str"]}function vVe(e,t,n){var a=e.l+t,r=el(e);r.r=n["!row"];var s=e.read_shift(1),o=[r,s,"b"];if(n.cellFormula){e.l+=2;var i=$w(e,a-e.l,n);o[3]=ro(i,null,r,n.supbooks,n)}else e.l=a;return o}function pVe(e,t,n){var a=e.l+t,r=el(e);r.r=n["!row"];var s=e.read_shift(1),o=[r,s,"e"];if(n.cellFormula){e.l+=2;var i=$w(e,a-e.l,n);o[3]=ro(i,null,r,n.supbooks,n)}else e.l=a;return o}function gVe(e,t,n){var a=e.l+t,r=el(e);r.r=n["!row"];var s=co(e),o=[r,s,"n"];if(n.cellFormula){e.l+=2;var i=$w(e,a-e.l,n);o[3]=ro(i,null,r,n.supbooks,n)}else e.l=a;return o}function yVe(e,t,n){var a=e.l+t,r=el(e);r.r=n["!row"];var s=po(e),o=[r,s,"str"];if(n.cellFormula){e.l+=2;var i=$w(e,a-e.l,n);o[3]=ro(i,null,r,n.supbooks,n)}else e.l=a;return o}var _Ve=Rf;function wVe(e,t){var n=e.l+t,a=Rf(e),r=OT(e),s=po(e),o=po(e),i=po(e);e.l=n;var c={rfx:a,relId:r,loc:s,display:i};return o&&(c.Tooltip=o),c}function bVe(){}function xVe(e,t,n){var a=e.l+t,r=D$(e),s=e.read_shift(1),o=[r];if(o[2]=s,n.cellFormula){var i=kNe(e,a-e.l,n);o[1]=i}else e.l=a;return o}function CVe(e,t,n){var a=e.l+t,r=Rf(e),s=[r];if(n.cellFormula){var o=INe(e,a-e.l,n);s[1]=o,e.l=a}else e.l=a;return s}var SVe=["left","right","top","bottom","header","footer"];function EVe(e){var t={};return SVe.forEach(function(n){t[n]=co(e)}),t}function BVe(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function kVe(){}function TVe(){}function IVe(e,t,n,a,r,s,o){if(!e)return e;var i=t||{};a||(a={"!id":{}});var c=i.dense?[]:{},A,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,m=!1,h,v,y,g,w,b,x,T,U,k=[];i.biff=12,i["!row"]=0;var S=0,E=!1,C=[],P={},F=i.supbooks||r.supbooks||[[]];if(F.sharedf=P,F.arrayf=C,F.SheetNames=r.SheetNames||r.Sheets.map(function(ce){return ce.name}),!i.supbooks&&(i.supbooks=F,r.Names))for(var N=0;N<r.Names.length;++N)F[0][N+1]=r.Names[N];var L=[],ie=[],le=!1;g2[16]={n:"BrtShortReal",f:v9};var Q;if(Rc(e,function(J,se,G){if(!m)switch(G){case 148:A=J;break;case 0:h=J,i.sheetRows&&i.sheetRows<=h.r&&(m=!0),T=Ks(g=h.r),i["!row"]=h.r,(J.hidden||J.hpt||J.level!=null)&&(J.hpt&&(J.hpx=R0(J.hpt)),ie[J.r]=J);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(v={t:J[2]},J[2]){case"n":v.v=J[1];break;case"s":x=Xp[J[1]],v.v=x.t,v.r=x.r;break;case"b":v.v=!!J[1];break;case"e":v.v=J[1],i.cellText!==!1&&(v.w=Nf[v.v]);break;case"str":v.t="s",v.v=J[1];break;case"is":v.t="s",v.v=J[1].t;break}if((y=o.CellXf[J[0].iStyleRef])&&m9(v,y.numFmtId,null,i,s,o),w=J[0].c==-1?w+1:J[0].c,i.dense?(c[g]||(c[g]=[]),c[g][w]=v):c[fs(w)+T]=v,i.cellFormula){for(E=!1,S=0;S<C.length;++S){var D=C[S];h.r>=D[0].s.r&&h.r<=D[0].e.r&&w>=D[0].s.c&&w<=D[0].e.c&&(v.F=ga(D[0]),E=!0)}!E&&J.length>3&&(v.f=J[3])}if(d.s.r>h.r&&(d.s.r=h.r),d.s.c>w&&(d.s.c=w),d.e.r<h.r&&(d.e.r=h.r),d.e.c<w&&(d.e.c=w),i.cellDates&&y&&v.t=="n"&&lv(Xn[y.numFmtId])){var j=MA(v.v);j&&(v.t="d",v.v=new Date(j.y,j.m-1,j.d,j.H,j.M,j.S,j.u))}Q&&(Q.type=="XLDAPR"&&(v.D=!0),Q=void 0);break;case 1:case 12:if(!i.sheetStubs||f)break;v={t:"z",v:void 0},w=J[0].c==-1?w+1:J[0].c,i.dense?(c[g]||(c[g]=[]),c[g][w]=v):c[fs(w)+T]=v,d.s.r>h.r&&(d.s.r=h.r),d.s.c>w&&(d.s.c=w),d.e.r<h.r&&(d.e.r=h.r),d.e.c<w&&(d.e.c=w),Q&&(Q.type=="XLDAPR"&&(v.D=!0),Q=void 0);break;case 176:k.push(J);break;case 49:Q=((i.xlmeta||{}).Cell||[])[J-1];break;case 494:var ne=a["!id"][J.relId];for(ne?(J.Target=ne.Target,J.loc&&(J.Target+="#"+J.loc),J.Rel=ne):J.relId==""&&(J.Target="#"+J.loc),g=J.rfx.s.r;g<=J.rfx.e.r;++g)for(w=J.rfx.s.c;w<=J.rfx.e.c;++w)i.dense?(c[g]||(c[g]=[]),c[g][w]||(c[g][w]={t:"z",v:void 0}),c[g][w].l=J):(b=Kn({c:w,r:g}),c[b]||(c[b]={t:"z",v:void 0}),c[b].l=J);break;case 426:if(!i.cellFormula)break;C.push(J),U=i.dense?c[g][w]:c[fs(w)+T],U.f=ro(J[1],d,{r:h.r,c:w},F,i),U.F=ga(J[0]);break;case 427:if(!i.cellFormula)break;P[Kn(J[0].s)]=J[1],U=i.dense?c[g][w]:c[fs(w)+T],U.f=ro(J[1],d,{r:h.r,c:w},F,i);break;case 60:if(!i.cellStyles)break;for(;J.e>=J.s;)L[J.e--]={width:J.w/256,hidden:!!(J.flags&1),level:J.level},le||(le=!0,zT(J.w/256)),Uh(L[J.e+1]);break;case 161:c["!autofilter"]={ref:ga(J)};break;case 476:c["!margins"]=J;break;case 147:r.Sheets[n]||(r.Sheets[n]={}),J.name&&(r.Sheets[n].CodeName=J.name),(J.above||J.left)&&(c["!outline"]={above:J.above,left:J.left});break;case 137:r.Views||(r.Views=[{}]),r.Views[0]||(r.Views[0]={}),J.RTL&&(r.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!se.T){if(!f||i.WTF)throw new Error("Unexpected record 0x"+G.toString(16))}}},i),delete i.supbooks,delete i["!row"],!c["!ref"]&&(d.s.r<2e6||A&&(A.e.r>0||A.e.c>0||A.s.r>0||A.s.c>0))&&(c["!ref"]=ga(A||d)),i.sheetRows&&c["!ref"]){var Z=Dr(c["!ref"]);i.sheetRows<=+Z.e.r&&(Z.e.r=i.sheetRows-1,Z.e.r>d.e.r&&(Z.e.r=d.e.r),Z.e.r<Z.s.r&&(Z.s.r=Z.e.r),Z.e.c>d.e.c&&(Z.e.c=d.e.c),Z.e.c<Z.s.c&&(Z.s.c=Z.e.c),c["!fullref"]=c["!ref"],c["!ref"]=ga(Z))}return k.length>0&&(c["!merges"]=k),L.length>0&&(c["!cols"]=L),ie.length>0&&(c["!rows"]=ie),c}function FVe(e){var t=[],n=e.match(/^<c:numCache>/),a;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var o=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(t[+o[1]]=n?+o[2]:o[2])});var r=xa((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){a=s.replace(/<.*?>/g,"")}),[t,r,a]}function PVe(e,t,n,a,r,s){var o=s||{"!type":"chart"};if(!e)return s;var i=0,c=0,A="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var m=FVe(f);d.s.r=d.s.c=0,d.e.c=i,A=fs(i),m[0].forEach(function(h,v){o[A+Ks(v)]={t:"n",v:h,z:m[1]},c=v}),d.e.r<c&&(d.e.r=c),++i}),i>0&&(o["!ref"]=ga(d)),o}function DVe(e,t,n,a,r){if(!e)return e;a||(a={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},o,i=e.match(h9);return i&&WT(i[0],s,r,n),(o=e.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=o[1]),a["!id"][s["!rel"]]&&(s["!drawel"]=a["!id"][s["!rel"]]),s}function UVe(e,t){e.l+=10;var n=po(e);return{name:n}}function RVe(e,t,n,a,r){if(!e)return e;a||(a={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},o=!1;return Rc(e,function(c,A,d){switch(d){case 550:s["!rel"]=c;break;case 651:r.Sheets[n]||(r.Sheets[n]={}),c.name&&(r.Sheets[n].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(A.T>0)){if(!(A.T<0)){if(!o||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),a["!id"][s["!rel"]]&&(s["!drawel"]=a["!id"][s["!rel"]]),s}var p9=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],NVe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],VVe=[],LVe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function sN(e,t){for(var n=0;n!=e.length;++n)for(var a=e[n],r=0;r!=t.length;++r){var s=t[r];if(a[s[0]]==null)a[s[0]]=s[1];else switch(s[2]){case"bool":typeof a[s[0]]=="string"&&(a[s[0]]=yr(a[s[0]]));break;case"int":typeof a[s[0]]=="string"&&(a[s[0]]=parseInt(a[s[0]],10));break}}}function oN(e,t){for(var n=0;n!=t.length;++n){var a=t[n];if(e[a[0]]==null)e[a[0]]=a[1];else switch(a[2]){case"bool":typeof e[a[0]]=="string"&&(e[a[0]]=yr(e[a[0]]));break;case"int":typeof e[a[0]]=="string"&&(e[a[0]]=parseInt(e[a[0]],10));break}}}function g9(e){oN(e.WBProps,p9),oN(e.CalcPr,LVe),sN(e.WBView,NVe),sN(e.Sheets,VVe),dh.date1904=yr(e.WBProps.date1904)}var MVe="][*?/\\".split("");function OVe(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var n=!0;return MVe.forEach(function(a){if(e.indexOf(a)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),n}var HVe=/<\w+:workbook/;function $Ve(e,t){if(!e)throw new Error("Could not find file");var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},a=!1,r="xmlns",s={},o=0;if(e.replace(bo,function(c,A){var d=Ln(c);switch(Lu(d[0])){case"<?xml":break;case"<workbook":c.match(HVe)&&(r="xmlns"+c.match(/<(\w+):/)[1]),n.xmlns=d[r];break;case"</workbook>":break;case"<fileVersion":delete d[0],n.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":p9.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":n.WBProps[f[0]]=yr(d[f[0]]);break;case"int":n.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:n.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(n.WBProps.CodeName=or(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],n.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=xa(or(d.name)),delete d[0],n.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":a=!0;break;case"</definedNames>":a=!1;break;case"<definedName":s={},s.Name=or(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),yr(d.hidden||"0")&&(s.Hidden=!0),o=A+c.length;break;case"</definedName>":s.Ref=xa(or(e.slice(o,A))),n.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],n.CalcPr=d;break;case"<calcPr/>":delete d[0],n.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":a=!0;break;case"</AlternateContent>":a=!1;break;case"<revisionPtr":break;default:if(!a&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),oPe.indexOf(n.xmlns)===-1)throw new Error("Unknown Namespace: "+n.xmlns);return g9(n),n}function QVe(e,t){var n={};return n.Hidden=e.read_shift(4),n.iTabID=e.read_shift(4),n.strRelID=RE(e),n.name=po(e),n}function GVe(e,t){var n={},a=e.read_shift(4);n.defaultThemeVersion=e.read_shift(4);var r=t>8?po(e):"";return r.length>0&&(n.CodeName=r),n.autoCompressPictures=!!(a&65536),n.backupFile=!!(a&64),n.checkCompatibility=!!(a&4096),n.date1904=!!(a&1),n.filterPrivacy=!!(a&8),n.hidePivotFieldList=!!(a&1024),n.promptedSolutions=!!(a&16),n.publishItems=!!(a&2048),n.refreshAllConnections=!!(a&262144),n.saveExternalLinkValues=!!(a&128),n.showBorderUnselectedTables=!!(a&4),n.showInkAnnotation=!!(a&32),n.showObjects=["all","placeholders","none"][a>>13&3],n.showPivotChartFilter=!!(a&32768),n.updateLinks=["userSet","never","always"][a>>8&3],n}function zVe(e,t){var n={};return e.read_shift(4),n.ArchID=e.read_shift(4),e.l+=t-8,n}function KVe(e,t,n){var a=e.l+t;e.l+=4,e.l+=1;var r=e.read_shift(4),s=CPe(e),o=TNe(e,0,n),i=OT(e);e.l=a;var c={Name:s,Ptg:o};return r<268435455&&(c.Sheet=r),i&&(c.Comment=i),c}function WVe(e,t){var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},a=[],r=!1;t||(t={}),t.biff=12;var s=[],o=[[]];return o.SheetNames=[],o.XTI=[],g2[16]={n:"BrtFRTArchID$",f:zVe},Rc(e,function(c,A,d){switch(d){case 156:o.SheetNames.push(c.name),n.Sheets.push(c);break;case 153:n.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=ro(c.Ptg,null,null,o,t),delete t.SID,delete c.Ptg,s.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([d,c]):o[0]=[d,c],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(c),o.XTI=o.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:a.push(d),r=!0;break;case 36:a.pop(),r=!1;break;case 37:a.push(d),r=!0;break;case 38:a.pop(),r=!1;break;case 16:break;default:if(!A.T){if(!r||t.WTF&&a[a.length-1]!=37&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),g9(n),n.Names=s,n.supbooks=o,n}function jVe(e,t,n){return t.slice(-4)===".bin"?WVe(e,n):$Ve(e,n)}function qVe(e,t,n,a,r,s,o,i){return t.slice(-4)===".bin"?IVe(e,a,n,r,s,o,i):QNe(e,a,n,r,s,o,i)}function YVe(e,t,n,a,r,s,o,i){return t.slice(-4)===".bin"?RVe(e,a,n,r,s):DVe(e,a,n,r,s)}function XVe(e,t,n,a,r,s,o,i){return t.slice(-4)===".bin"?sRe():oRe()}function JVe(e,t,n,a,r,s,o,i){return t.slice(-4)===".bin"?aRe():rRe()}function ZVe(e,t,n,a){return t.slice(-4)===".bin"?_Ue(e,n,a):mUe(e,n,a)}function eLe(e,t,n){return r9(e,n)}function tLe(e,t,n){return t.slice(-4)===".bin"?N3e(e,n):U3e(e,n)}function nLe(e,t,n){return t.slice(-4)===".bin"?eRe(e,n):qUe(e,n)}function aLe(e,t,n){return t.slice(-4)===".bin"?KUe(e):GUe(e)}function rLe(e,t,n,a){return n.slice(-4)===".bin"?WUe(e,t,n,a):void 0}function sLe(e,t,n){return t.slice(-4)===".bin"?$Ue(e,t,n):QUe(e,t,n)}var y9=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,_9=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function dl(e,t){var n=e.split(/\s+/),a=[];if(a[0]=n[0],n.length===1)return a;var r=e.match(y9),s,o,i,c;if(r)for(c=0;c!=r.length;++c)s=r[c].match(_9),(o=s[1].indexOf(":"))===-1?a[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?i="xmlns"+s[1].slice(6):i=s[1].slice(o+1),a[i]=s[2].slice(1,s[2].length-1));return a}function oLe(e){var t=e.split(/\s+/),n={};if(t.length===1)return n;var a=e.match(y9),r,s,o,i;if(a)for(i=0;i!=a.length;++i)r=a[i].match(_9),(s=r[1].indexOf(":"))===-1?n[r[1]]=r[2].slice(1,r[2].length-1):(r[1].slice(0,6)==="xmlns:"?o="xmlns"+r[1].slice(6):o=r[1].slice(s+1),n[o]=r[2].slice(1,r[2].length-1));return n}var Zp;function iLe(e,t){var n=Zp[e]||xa(e);return n==="General"?Af(t):qi(n,t)}function lLe(e,t,n,a){var r=a;switch((n[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":r=yr(a);break;case"i2":case"int":r=parseInt(a,10);break;case"r4":case"float":r=parseFloat(a);break;case"date":case"dateTime.tz":r=Is(a);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+n[0])}e[xa(t)]=r}function uLe(e,t,n){if(e.t!=="z"){if(!n||n.cellText!==!1)try{e.t==="e"?e.w=e.w||Nf[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=I0(e.v):e.w=Af(e.v):e.w=iLe(t||"General",e.v)}catch(s){if(n.WTF)throw s}try{var a=Zp[t]||t||"General";if(n.cellNF&&(e.z=a),n.cellDates&&e.t=="n"&&lv(a)){var r=MA(e.v);r&&(e.t="d",e.v=new Date(r.y,r.m-1,r.d,r.H,r.M,r.S,r.u))}}catch(s){if(n.WTF)throw s}}}function cLe(e,t,n){if(n.cellStyles&&t.Interior){var a=t.Interior;a.Pattern&&(a.patternType=lUe[a.Pattern]||a.Pattern)}e[t.ID]=t}function dLe(e,t,n,a,r,s,o,i,c,A){var d="General",f=a.StyleID,m={};A=A||{};var h=[],v=0;for(f===void 0&&i&&(f=i.StyleID),f===void 0&&o&&(f=o.StyleID);s[f]!==void 0&&(s[f].nf&&(d=s[f].nf),s[f].Interior&&h.push(s[f].Interior),!!s[f].Parent);)f=s[f].Parent;switch(n.Type){case"Boolean":a.t="b",a.v=yr(e);break;case"String":a.t="s",a.r=kR(xa(e)),a.v=e.indexOf("<")>-1?xa(t||e).replace(/<.*?>/g,""):a.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),a.v=(Is(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),a.v!==a.v?a.v=xa(e):a.v<60&&(a.v=a.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":a.v===void 0&&(a.v=+e),a.t||(a.t="n");break;case"Error":a.t="e",a.v=N$[e],A.cellText!==!1&&(a.w=e);break;default:e==""&&t==""?a.t="z":(a.t="s",a.v=kR(t||e));break}if(uLe(a,d,A),A.cellFormula!==!1)if(a.Formula){var y=xa(a.Formula);y.charCodeAt(0)==61&&(y=y.slice(1)),a.f=ch(y,r),delete a.Formula,a.ArrayRange=="RC"?a.F=ch("RC:RC",r):a.ArrayRange&&(a.F=ch(a.ArrayRange,r),c.push([Dr(a.F),a.F]))}else for(v=0;v<c.length;++v)r.r>=c[v][0].s.r&&r.r<=c[v][0].e.r&&r.c>=c[v][0].s.c&&r.c<=c[v][0].e.c&&(a.F=c[v][1]);A.cellStyles&&(h.forEach(function(g){!m.patternType&&g.patternType&&(m.patternType=g.patternType)}),a.s=m),a.StyleID!==void 0&&(a.ixfe=a.StyleID)}function ALe(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function MC(e,t){var n=t||{};l$();var a=bp(RT(e));(n.type=="binary"||n.type=="array"||n.type=="base64")&&(a=or(a));var r=a.slice(0,1024).toLowerCase(),s=!1;if(r=r.replace(/".*?"/g,""),(r.indexOf(">")&1023)>Math.min(r.indexOf(",")&1023,r.indexOf(";")&1023)){var o=zs(n);return o.type="string",D0.to_workbook(a,o)}if(r.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(ke){r.indexOf("<"+ke)>=0&&(s=!0)}),s)return wLe(a,n);Zp={"General Number":"General","General Date":Xn[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Xn[15],"Short Date":Xn[14],"Long Time":Xn[19],"Medium Time":Xn[18],"Short Time":Xn[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Xn[2],Standard:Xn[4],Percent:Xn[10],Scientific:Xn[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var i,c=[],A,d={},f=[],m=n.dense?[]:{},h="",v={},y={},g=dl('<Data ss:Type="String">'),w=0,b=0,x=0,T={s:{r:2e6,c:2e6},e:{r:0,c:0}},U={},k={},S="",E=0,C=[],P={},F={},N=0,L=[],ie=[],le={},Q=[],Z,ce=!1,J=[],se=[],G={},D=0,j=0,ne={Sheets:[],WBProps:{date1904:!1}},H={};P0.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"");for(var te="";i=P0.exec(a);)switch(i[3]=(te=i[3]).toLowerCase()){case"data":if(te=="data"){if(i[1]==="/"){if((A=c.pop())[0]!==i[3])throw new Error("Bad state: "+A.join("|"))}else i[0].charAt(i[0].length-2)!=="/"&&c.push([i[3],!0]);break}if(c[c.length-1][1])break;i[1]==="/"?dLe(a.slice(w,i.index),S,g,c[c.length-1][0]=="comment"?le:v,{c:b,r:x},U,Q[b],y,J,n):(S="",g=dl(i[0]),w=i.index+i[0].length);break;case"cell":if(i[1]==="/")if(ie.length>0&&(v.c=ie),(!n.sheetRows||n.sheetRows>x)&&v.v!==void 0&&(n.dense?(m[x]||(m[x]=[]),m[x][b]=v):m[fs(b)+Ks(x)]=v),v.HRef&&(v.l={Target:xa(v.HRef)},v.HRefScreenTip&&(v.l.Tooltip=v.HRefScreenTip),delete v.HRef,delete v.HRefScreenTip),(v.MergeAcross||v.MergeDown)&&(D=b+(parseInt(v.MergeAcross,10)|0),j=x+(parseInt(v.MergeDown,10)|0),C.push({s:{c:b,r:x},e:{c:D,r:j}})),!n.sheetStubs)v.MergeAcross?b=D+1:++b;else if(v.MergeAcross||v.MergeDown){for(var Y=b;Y<=D;++Y)for(var K=x;K<=j;++K)(Y>b||K>x)&&(n.dense?(m[K]||(m[K]=[]),m[K][Y]={t:"z"}):m[fs(Y)+Ks(K)]={t:"z"});b=D+1}else++b;else v=oLe(i[0]),v.Index&&(b=+v.Index-1),b<T.s.c&&(T.s.c=b),b>T.e.c&&(T.e.c=b),i[0].slice(-2)==="/>"&&++b,ie=[];break;case"row":i[1]==="/"||i[0].slice(-2)==="/>"?(x<T.s.r&&(T.s.r=x),x>T.e.r&&(T.e.r=x),i[0].slice(-2)==="/>"&&(y=dl(i[0]),y.Index&&(x=+y.Index-1)),b=0,++x):(y=dl(i[0]),y.Index&&(x=+y.Index-1),G={},(y.AutoFitHeight=="0"||y.Height)&&(G.hpx=parseInt(y.Height,10),G.hpt=a9(G.hpx),se[x]=G),y.Hidden=="1"&&(G.hidden=!0,se[x]=G));break;case"worksheet":if(i[1]==="/"){if((A=c.pop())[0]!==i[3])throw new Error("Bad state: "+A.join("|"));f.push(h),T.s.r<=T.e.r&&T.s.c<=T.e.c&&(m["!ref"]=ga(T),n.sheetRows&&n.sheetRows<=T.e.r&&(m["!fullref"]=m["!ref"],T.e.r=n.sheetRows-1,m["!ref"]=ga(T))),C.length&&(m["!merges"]=C),Q.length>0&&(m["!cols"]=Q),se.length>0&&(m["!rows"]=se),d[h]=m}else T={s:{r:2e6,c:2e6},e:{r:0,c:0}},x=b=0,c.push([i[3],!1]),A=dl(i[0]),h=xa(A.Name),m=n.dense?[]:{},C=[],J=[],se=[],H={name:h,Hidden:0},ne.Sheets.push(H);break;case"table":if(i[1]==="/"){if((A=c.pop())[0]!==i[3])throw new Error("Bad state: "+A.join("|"))}else{if(i[0].slice(-2)=="/>")break;c.push([i[3],!1]),Q=[],ce=!1}break;case"style":i[1]==="/"?cLe(U,k,n):k=dl(i[0]);break;case"numberformat":k.nf=xa(dl(i[0]).Format||"General"),Zp[k.nf]&&(k.nf=Zp[k.nf]);for(var X=0;X!=392&&Xn[X]!=k.nf;++X);if(X==392){for(X=57;X!=392;++X)if(Xn[X]==null){ZA(k.nf,X);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(Z=dl(i[0]),Z.Hidden&&(Z.hidden=!0,delete Z.Hidden),Z.Width&&(Z.wpx=parseInt(Z.Width,10)),!ce&&Z.wpx>10){ce=!0,Uo=t9;for(var ae=0;ae<Q.length;++ae)Q[ae]&&Uh(Q[ae])}ce&&Uh(Z),Q[Z.Index-1||Q.length]=Z;for(var oe=0;oe<+Z.Span;++oe)Q[Q.length]=zs(Z);break;case"namedrange":if(i[1]==="/")break;ne.Names||(ne.Names=[]);var W=Ln(i[0]),de={Name:W.Name,Ref:ch(W.RefersTo.slice(1),{r:0,c:0})};ne.Sheets.length>0&&(de.Sheet=ne.Sheets.length-1),ne.Names.push(de);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(i[0].slice(-2)==="/>")break;i[1]==="/"?S+=a.slice(E,i.index):E=i.index+i[0].length;break;case"interior":if(!n.cellStyles)break;k.Interior=dl(i[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(i[0].slice(-2)==="/>")break;i[1]==="/"?qPe(P,te,a.slice(N,i.index)):N=i.index+i[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(i[1]==="/"){if((A=c.pop())[0]!==i[3])throw new Error("Bad state: "+A.join("|"))}else c.push([i[3],!1]);break;case"comment":if(i[1]==="/"){if((A=c.pop())[0]!==i[3])throw new Error("Bad state: "+A.join("|"));ALe(le),ie.push(le)}else c.push([i[3],!1]),A=dl(i[0]),le={a:A.Author};break;case"autofilter":if(i[1]==="/"){if((A=c.pop())[0]!==i[3])throw new Error("Bad state: "+A.join("|"))}else if(i[0].charAt(i[0].length-2)!=="/"){var Ae=dl(i[0]);m["!autofilter"]={ref:ch(Ae.Range).replace(/\$/g,"")},c.push([i[3],!0])}break;case"name":break;case"datavalidation":if(i[1]==="/"){if((A=c.pop())[0]!==i[3])throw new Error("Bad state: "+A.join("|"))}else i[0].charAt(i[0].length-2)!=="/"&&c.push([i[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(i[1]==="/"){if((A=c.pop())[0]!==i[3])throw new Error("Bad state: "+A.join("|"))}else i[0].charAt(i[0].length-2)!=="/"&&c.push([i[3],!0]);break;case"null":break;default:if(c.length==0&&i[3]=="document"||c.length==0&&i[3]=="uof")return AN(a,n);var Ce=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(i[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Ce=!1}break;case"componentoptions":switch(i[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Ce=!1}break;case"excelworkbook":switch(i[3]){case"date1904":ne.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Ce=!1}break;case"workbookoptions":switch(i[3]){case"owcversion":break;case"height":break;case"width":break;default:Ce=!1}break;case"worksheetoptions":switch(i[3]){case"visible":if(i[0].slice(-2)!=="/>")if(i[1]==="/")switch(a.slice(N,i.index)){case"SheetHidden":H.Hidden=1;break;case"SheetVeryHidden":H.Hidden=2;break}else N=i.index+i[0].length;break;case"header":m["!margins"]||Jp(m["!margins"]={},"xlml"),isNaN(+Ln(i[0]).Margin)||(m["!margins"].header=+Ln(i[0]).Margin);break;case"footer":m["!margins"]||Jp(m["!margins"]={},"xlml"),isNaN(+Ln(i[0]).Margin)||(m["!margins"].footer=+Ln(i[0]).Margin);break;case"pagemargins":var De=Ln(i[0]);m["!margins"]||Jp(m["!margins"]={},"xlml"),isNaN(+De.Top)||(m["!margins"].top=+De.Top),isNaN(+De.Left)||(m["!margins"].left=+De.Left),isNaN(+De.Right)||(m["!margins"].right=+De.Right),isNaN(+De.Bottom)||(m["!margins"].bottom=+De.Bottom);break;case"displayrighttoleft":ne.Views||(ne.Views=[]),ne.Views[0]||(ne.Views[0]={}),ne.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Ce=!1}break;case"pivottable":case"pivotcache":switch(i[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Ce=!1}break;case"pagebreaks":switch(i[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Ce=!1}break;case"autofilter":switch(i[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Ce=!1}break;case"querytable":switch(i[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Ce=!1}break;case"datavalidation":switch(i[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Ce=!1}break;case"sorting":case"conditionalformatting":switch(i[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Ce=!1}break;case"mapinfo":case"schema":case"data":switch(i[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Ce=!1}break;case"smarttags":break;default:Ce=!1;break}if(Ce||i[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+i[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(i[0].slice(-2)==="/>")break;i[1]==="/"?lLe(F,te,L,a.slice(N,i.index)):(L=i,N=i.index+i[0].length);break}if(n.WTF)throw"Unrecognized tag: "+i[3]+"|"+c.join("|")}var xe={};return!n.bookSheets&&!n.bookProps&&(xe.Sheets=d),xe.SheetNames=f,xe.Workbook=ne,xe.SSF=zs(Xn),xe.Props=P,xe.Custprops=F,xe}function ME(e,t){switch(YT(t=t||{}),t.type||"base64"){case"base64":return MC(Si(e),t);case"binary":case"buffer":case"file":return MC(e,t);case"array":return MC(Df(e),t)}}function fLe(e){var t={},n=e.content;if(n.l=28,t.AnsiUserType=n.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=BPe(n),n.length-n.l<=4)return t;var a=n.read_shift(4);if(a==0||a>40||(n.l-=4,t.Reserved1=n.read_shift(0,"lpstr-ansi"),n.length-n.l<=4)||(a=n.read_shift(4),a!==1907505652)||(t.UnicodeClipboardFormat=kPe(n),a=n.read_shift(4),a==0||a>40))return t;n.l-=4,t.Reserved2=n.read_shift(0,"lpwstr")}var mLe=[60,1084,2066,2165,2175];function hLe(e,t,n,a,r){var s=a,o=[],i=n.slice(n.l,n.l+s);if(r&&r.enc&&r.enc.insitu&&i.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:r.enc.insitu(i)}o.push(i),n.l+=s;for(var c=dc(n,n.l),A=OE[c],d=0;A!=null&&mLe.indexOf(c)>-1;)s=dc(n,n.l+2),d=n.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),i=n.slice(d,n.l+4+s),o.push(i),n.l+=4+s,A=OE[c=dc(n,n.l)];var f=Ad(o);Ls(f,0);var m=0;f.lens=[];for(var h=0;h<o.length;++h)f.lens.push(m),m+=o[h].length;if(f.length<a)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+a;return t.f(f,f.length,r)}function lu(e,t,n){if(e.t!=="z"&&e.XF){var a=0;try{a=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Xn[a])}catch(s){if(t.WTF)throw s}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||Nf[e.v]:a===0||a=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=I0(e.v):e.w=Af(e.v):e.w=qi(a,e.v,{date1904:!!n,dateNF:t&&t.dateNF})}catch(s){if(t.WTF)throw s}if(t.cellDates&&a&&e.t=="n"&&lv(Xn[a]||String(a))){var r=MA(e.v);r&&(e.t="d",e.v=new Date(r.y,r.m-1,r.d,r.H,r.M,r.S,r.u))}}}function Ey(e,t,n){return{v:e,ixfe:t,t:n}}function vLe(e,t){var n={opts:{}},a={},r=t.dense?[]:{},s={},o={},i=null,c=[],A="",d={},f,m="",h,v,y,g,w={},b=[],x,T,U=[],k=[],S={Sheets:[],WBProps:{date1904:!1},Views:[{}]},E={},C=function(tt){return tt<8?ef[tt]:tt<64&&k[tt-8]||ef[tt]},P=function(tt,Ge,pt){var ht=Ge.XF.data;if(!(!ht||!ht.patternType||!pt||!pt.cellStyles)){Ge.s={},Ge.s.patternType=ht.patternType;var Nt;(Nt=U0(C(ht.icvFore)))&&(Ge.s.fgColor={rgb:Nt}),(Nt=U0(C(ht.icvBack)))&&(Ge.s.bgColor={rgb:Nt})}},F=function(tt,Ge,pt){if(!(G>1)&&!(pt.sheetRows&&tt.r>=pt.sheetRows)){if(pt.cellStyles&&Ge.XF&&Ge.XF.data&&P(tt,Ge,pt),delete Ge.ixfe,delete Ge.XF,f=tt,m=Kn(tt),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),tt.r<o.s.r&&(o.s.r=tt.r),tt.c<o.s.c&&(o.s.c=tt.c),tt.r+1>o.e.r&&(o.e.r=tt.r+1),tt.c+1>o.e.c&&(o.e.c=tt.c+1),pt.cellFormula&&Ge.f){for(var ht=0;ht<b.length;++ht)if(!(b[ht][0].s.c>tt.c||b[ht][0].s.r>tt.r)&&!(b[ht][0].e.c<tt.c||b[ht][0].e.r<tt.r)){Ge.F=ga(b[ht][0]),(b[ht][0].s.c!=tt.c||b[ht][0].s.r!=tt.r)&&delete Ge.f,Ge.f&&(Ge.f=""+ro(b[ht][1],o,tt,J,N));break}}pt.dense?(r[tt.r]||(r[tt.r]=[]),r[tt.r][tt.c]=Ge):r[m]=Ge}},N={enc:!1,sbcch:0,snames:[],sharedf:w,arrayf:b,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(N.password=t.password);var L,ie=[],le=[],Q=[],Z=[],ce=!1,J=[];J.SheetNames=N.snames,J.sharedf=N.sharedf,J.arrayf=N.arrayf,J.names=[],J.XTI=[];var se=0,G=0,D=0,j=[],ne=[],H;N.codepage=1200,xl(1200);for(var te=!1;e.l<e.length-1;){var Y=e.l,K=e.read_shift(2);if(K===0&&se===10)break;var X=e.l===e.length?0:e.read_shift(2),ae=OE[K];if(ae&&ae.f){if(t.bookSheets&&se===133&&K!==133)break;if(se=K,ae.r===2||ae.r==12){var oe=e.read_shift(2);if(X-=2,!N.enc&&oe!==K&&((oe&255)<<8|oe>>8)!==K)throw new Error("rt mismatch: "+oe+"!="+K);ae.r==12&&(e.l+=10,X-=10)}var W={};if(K===10?W=ae.f(e,X,N):W=hLe(K,ae,e,X,N),G==0&&[9,521,1033,2057].indexOf(se)===-1)continue;switch(K){case 34:n.opts.Date1904=S.WBProps.date1904=W;break;case 134:n.opts.WriteProtect=!0;break;case 47:if(N.enc||(e.l=0),N.enc=W,!t.password)throw new Error("File is password-protected");if(W.valid==null)throw new Error("Encryption scheme unsupported");if(!W.valid)throw new Error("Password is incorrect");break;case 92:N.lastuser=W;break;case 66:var de=Number(W);switch(de){case 21010:de=1200;break;case 32768:de=1e4;break;case 32769:de=1252;break}xl(N.codepage=de),te=!0;break;case 317:N.rrtabid=W;break;case 25:N.winlocked=W;break;case 439:n.opts.RefreshAll=W;break;case 12:n.opts.CalcCount=W;break;case 16:n.opts.CalcDelta=W;break;case 17:n.opts.CalcIter=W;break;case 13:n.opts.CalcMode=W;break;case 14:n.opts.CalcPrecision=W;break;case 95:n.opts.CalcSaveRecalc=W;break;case 15:N.CalcRefMode=W;break;case 2211:n.opts.FullCalc=W;break;case 129:W.fDialog&&(r["!type"]="dialog"),W.fBelow||((r["!outline"]||(r["!outline"]={})).above=!0),W.fRight||((r["!outline"]||(r["!outline"]={})).left=!0);break;case 224:U.push(W);break;case 430:J.push([W]),J[J.length-1].XTI=[];break;case 35:case 547:J[J.length-1].push(W);break;case 24:case 536:H={Name:W.Name,Ref:ro(W.rgce,o,null,J,N)},W.itab>0&&(H.Sheet=W.itab-1),J.names.push(H),J[0]||(J[0]=[],J[0].XTI=[]),J[J.length-1].push(W),W.Name=="_xlnm._FilterDatabase"&&W.itab>0&&W.rgce&&W.rgce[0]&&W.rgce[0][0]&&W.rgce[0][0][0]=="PtgArea3d"&&(ne[W.itab-1]={ref:ga(W.rgce[0][0][1][2])});break;case 22:N.ExternCount=W;break;case 23:J.length==0&&(J[0]=[],J[0].XTI=[]),J[J.length-1].XTI=J[J.length-1].XTI.concat(W),J.XTI=J.XTI.concat(W);break;case 2196:if(N.biff<8)break;H!=null&&(H.Comment=W[1]);break;case 18:r["!protect"]=W;break;case 19:W!==0&&N.WTF&&console.error("Password verifier: "+W);break;case 133:s[W.pos]=W,N.snames.push(W.name);break;case 10:{if(--G)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,r["!ref"]=ga(o),t.sheetRows&&t.sheetRows<=o.e.r){var Ae=o.e.r;o.e.r=t.sheetRows-1,r["!fullref"]=r["!ref"],r["!ref"]=ga(o),o.e.r=Ae}o.e.r++,o.e.c++}ie.length>0&&(r["!merges"]=ie),le.length>0&&(r["!objects"]=le),Q.length>0&&(r["!cols"]=Q),Z.length>0&&(r["!rows"]=Z),S.Sheets.push(E)}A===""?d=r:a[A]=r,r=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(N.biff===8&&(N.biff={9:2,521:3,1033:4}[K]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[W.BIFFVer]||8),N.biffguess=W.BIFFVer==0,W.BIFFVer==0&&W.dt==4096&&(N.biff=5,te=!0,xl(N.codepage=28591)),N.biff==8&&W.BIFFVer==0&&W.dt==16&&(N.biff=2),G++)break;if(r=t.dense?[]:{},N.biff<8&&!te&&(te=!0,xl(N.codepage=t.codepage||1252)),N.biff<5||W.BIFFVer==0&&W.dt==4096){A===""&&(A="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var Ce={pos:e.l-X,name:A};s[Ce.pos]=Ce,N.snames.push(A)}else A=(s[Y]||{name:""}).name;W.dt==32&&(r["!type"]="chart"),W.dt==64&&(r["!type"]="macro"),ie=[],le=[],N.arrayf=b=[],Q=[],Z=[],ce=!1,E={Hidden:(s[Y]||{hs:0}).hs,name:A}}break;case 515:case 3:case 2:r["!type"]=="chart"&&(t.dense?(r[W.r]||[])[W.c]:r[Kn({c:W.c,r:W.r})])&&++W.c,x={ixfe:W.ixfe,XF:U[W.ixfe]||{},v:W.val,t:"n"},D>0&&(x.z=j[x.ixfe>>8&63]),lu(x,t,n.opts.Date1904),F({c:W.c,r:W.r},x,t);break;case 5:case 517:x={ixfe:W.ixfe,XF:U[W.ixfe],v:W.val,t:W.t},D>0&&(x.z=j[x.ixfe>>8&63]),lu(x,t,n.opts.Date1904),F({c:W.c,r:W.r},x,t);break;case 638:x={ixfe:W.ixfe,XF:U[W.ixfe],v:W.rknum,t:"n"},D>0&&(x.z=j[x.ixfe>>8&63]),lu(x,t,n.opts.Date1904),F({c:W.c,r:W.r},x,t);break;case 189:for(var De=W.c;De<=W.C;++De){var xe=W.rkrec[De-W.c][0];x={ixfe:xe,XF:U[xe],v:W.rkrec[De-W.c][1],t:"n"},D>0&&(x.z=j[x.ixfe>>8&63]),lu(x,t,n.opts.Date1904),F({c:De,r:W.r},x,t)}break;case 6:case 518:case 1030:{if(W.val=="String"){i=W;break}if(x=Ey(W.val,W.cell.ixfe,W.tt),x.XF=U[x.ixfe],t.cellFormula){var ke=W.formula;if(ke&&ke[0]&&ke[0][0]&&ke[0][0][0]=="PtgExp"){var Ee=ke[0][0][1][0],ye=ke[0][0][1][1],we=Kn({r:Ee,c:ye});w[we]?x.f=""+ro(W.formula,o,W.cell,J,N):x.F=((t.dense?(r[Ee]||[])[ye]:r[we])||{}).F}else x.f=""+ro(W.formula,o,W.cell,J,N)}D>0&&(x.z=j[x.ixfe>>8&63]),lu(x,t,n.opts.Date1904),F(W.cell,x,t),i=W}break;case 7:case 519:if(i)i.val=W,x=Ey(W,i.cell.ixfe,"s"),x.XF=U[x.ixfe],t.cellFormula&&(x.f=""+ro(i.formula,o,i.cell,J,N)),D>0&&(x.z=j[x.ixfe>>8&63]),lu(x,t,n.opts.Date1904),F(i.cell,x,t),i=null;else throw new Error("String record expects Formula");break;case 33:case 545:{b.push(W);var at=Kn(W[0].s);if(h=t.dense?(r[W[0].s.r]||[])[W[0].s.c]:r[at],t.cellFormula&&h){if(!i||!at||!h)break;h.f=""+ro(W[1],o,W[0],J,N),h.F=ga(W[0])}}break;case 1212:{if(!t.cellFormula)break;if(m){if(!i)break;w[Kn(i.cell)]=W[0],h=t.dense?(r[i.cell.r]||[])[i.cell.c]:r[Kn(i.cell)],(h||{}).f=""+ro(W[0],o,f,J,N)}}break;case 253:x=Ey(c[W.isst].t,W.ixfe,"s"),c[W.isst].h&&(x.h=c[W.isst].h),x.XF=U[x.ixfe],D>0&&(x.z=j[x.ixfe>>8&63]),lu(x,t,n.opts.Date1904),F({c:W.c,r:W.r},x,t);break;case 513:t.sheetStubs&&(x={ixfe:W.ixfe,XF:U[W.ixfe],t:"z"},D>0&&(x.z=j[x.ixfe>>8&63]),lu(x,t,n.opts.Date1904),F({c:W.c,r:W.r},x,t));break;case 190:if(t.sheetStubs)for(var Je=W.c;Je<=W.C;++Je){var rt=W.ixfe[Je-W.c];x={ixfe:rt,XF:U[rt],t:"z"},D>0&&(x.z=j[x.ixfe>>8&63]),lu(x,t,n.opts.Date1904),F({c:Je,r:W.r},x,t)}break;case 214:case 516:case 4:x=Ey(W.val,W.ixfe,"s"),x.XF=U[x.ixfe],D>0&&(x.z=j[x.ixfe>>8&63]),lu(x,t,n.opts.Date1904),F({c:W.c,r:W.r},x,t);break;case 0:case 512:G===1&&(o=W);break;case 252:c=W;break;case 1054:if(N.biff==4){j[D++]=W[1];for(var it=0;it<D+163&&Xn[it]!=W[1];++it);it>=163&&ZA(W[1],D+163)}else ZA(W[1],W[0]);break;case 30:{j[D++]=W;for(var Ie=0;Ie<D+163&&Xn[Ie]!=W;++Ie);Ie>=163&&ZA(W,D+163)}break;case 229:ie=ie.concat(W);break;case 93:le[W.cmo[0]]=N.lastobj=W;break;case 438:N.lastobj.TxO=W;break;case 127:N.lastobj.ImData=W;break;case 440:for(g=W[0].s.r;g<=W[0].e.r;++g)for(y=W[0].s.c;y<=W[0].e.c;++y)h=t.dense?(r[g]||[])[y]:r[Kn({c:y,r:g})],h&&(h.l=W[1]);break;case 2048:for(g=W[0].s.r;g<=W[0].e.r;++g)for(y=W[0].s.c;y<=W[0].e.c;++y)h=t.dense?(r[g]||[])[y]:r[Kn({c:y,r:g})],h&&h.l&&(h.l.Tooltip=W[1]);break;case 28:{if(N.biff<=5&&N.biff>=2)break;h=t.dense?(r[W[0].r]||[])[W[0].c]:r[Kn(W[0])];var Ve=le[W[2]];h||(t.dense?(r[W[0].r]||(r[W[0].r]=[]),h=r[W[0].r][W[0].c]={t:"z"}):h=r[Kn(W[0])]={t:"z"},o.e.r=Math.max(o.e.r,W[0].r),o.s.r=Math.min(o.s.r,W[0].r),o.e.c=Math.max(o.e.c,W[0].c),o.s.c=Math.min(o.s.c,W[0].c)),h.c||(h.c=[]),v={a:W[1],t:Ve.TxO.t},h.c.push(v)}break;case 2173:LUe(U[W.ixfe],W.ext);break;case 125:{if(!N.cellStyles)break;for(;W.e>=W.s;)Q[W.e--]={width:W.w/256,level:W.level||0,hidden:!!(W.flags&1)},ce||(ce=!0,zT(W.w/256)),Uh(Q[W.e+1])}break;case 520:{var ft={};W.level!=null&&(Z[W.r]=ft,ft.level=W.level),W.hidden&&(Z[W.r]=ft,ft.hidden=!0),W.hpt&&(Z[W.r]=ft,ft.hpt=W.hpt,ft.hpx=R0(W.hpt))}break;case 38:case 39:case 40:case 41:r["!margins"]||Jp(r["!margins"]={}),r["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[K]]=W;break;case 161:r["!margins"]||Jp(r["!margins"]={}),r["!margins"].header=W.header,r["!margins"].footer=W.footer;break;case 574:W.RTL&&(S.Views[0].RTL=!0);break;case 146:k=W;break;case 2198:L=W;break;case 140:T=W;break;case 442:A?E.CodeName=W||E.name:S.WBProps.CodeName=W||"ThisWorkbook";break}}else ae||console.error("Missing Info for XLS Record 0x"+K.toString(16)),e.l+=X}return n.SheetNames=Bu(s).sort(function(Ft,tt){return Number(Ft)-Number(tt)}).map(function(Ft){return s[Ft].name}),t.bookSheets||(n.Sheets=a),!n.SheetNames.length&&d["!ref"]?(n.SheetNames.push("Sheet1"),n.Sheets&&(n.Sheets.Sheet1=d)):n.Preamble=d,n.Sheets&&ne.forEach(function(Ft,tt){n.Sheets[n.SheetNames[tt]]["!autofilter"]=Ft}),n.Strings=c,n.SSF=zs(Xn),N.enc&&(n.Encryption=N.enc),L&&(n.Themes=L),n.Metadata={},T!==void 0&&(n.Metadata.Country=T),J.names.length>0&&(S.Names=J.names),n.Workbook=S,n}var iN={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function pLe(e,t,n){var a=ha.find(e,"/!DocumentSummaryInformation");if(a&&a.size>0)try{var r=GR(a,UPe,iN.DSI);for(var s in r)t[s]=r[s]}catch(A){if(n.WTF)throw A}var o=ha.find(e,"/!SummaryInformation");if(o&&o.size>0)try{var i=GR(o,RPe,iN.SI);for(var c in i)t[c]==null&&(t[c]=i[c])}catch(A){if(n.WTF)throw A}t.HeadingPairs&&t.TitlesOfParts&&(L$(t.HeadingPairs,t.TitlesOfParts,t,n),delete t.HeadingPairs,delete t.TitlesOfParts)}function w9(e,t){t||(t={}),YT(t),YH(),t.codepage&&kT(t.codepage);var n,a;if(e.FullPaths){if(ha.find(e,"/encryption"))throw new Error("File is password-protected");n=ha.find(e,"!CompObj"),a=ha.find(e,"/Workbook")||ha.find(e,"/Book")}else{switch(t.type){case"base64":e=gl(Si(e));break;case"binary":e=gl(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Ls(e,0),a={content:e}}var r,s;if(n&&fLe(n),t.bookProps&&!t.bookSheets)r={};else{var o=ca?"buffer":"array";if(a&&a.content)r=vLe(a.content,t);else if((s=ha.find(e,"PerfectOffice_MAIN"))&&s.content)r=Yp.to_workbook(s.content,(t.type=o,t));else if((s=ha.find(e,"NativeContent_MAIN"))&&s.content)r=Yp.to_workbook(s.content,(t.type=o,t));else throw(s=ha.find(e,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&ha.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(r.vbaraw=nRe(e))}var i={};return e.FullPaths&&pLe(e,i,t),r.Props=r.Custprops=i,t.bookFiles&&(r.cfb=e),r}var g2={0:{f:JNe},1:{f:nVe},2:{f:dVe},3:{f:oVe},4:{f:rVe},5:{f:cVe},6:{f:mVe},7:{f:lVe},8:{f:yVe},9:{f:gVe},10:{f:vVe},11:{f:pVe},12:{f:aVe},13:{f:AVe},14:{f:iVe},15:{f:sVe},16:{f:v9},17:{f:hVe},18:{f:uVe},19:{f:MT},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:KVe},40:{},42:{},43:{f:vUe},44:{f:hUe},45:{f:pUe},46:{f:yUe},47:{f:gUe},48:{},49:{f:_Pe},50:{},51:{f:OUe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Y$},62:{f:fVe},63:{f:zUe},64:{f:kVe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:yo,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:BVe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:tVe},148:{f:ZNe,p:16},151:{f:bVe},152:{},153:{f:GVe},154:{},155:{},156:{f:QVe},157:{},158:{},159:{T:1,f:R3e},160:{T:-1},161:{T:1,f:Rf},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:_Ve},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:MUe},336:{T:-1},337:{f:HUe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:RE},357:{},358:{},359:{},360:{T:1},361:{},362:{f:q$},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:xVe},427:{f:CVe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:EVe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:eVe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:wVe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:RE},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:ZUe},633:{T:1},634:{T:-1},635:{T:1,f:JUe},636:{T:-1},637:{f:bPe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:UVe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:TVe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},OE={6:{f:VC},10:{f:Jc},12:{f:Jr},13:{f:Jr},14:{f:Hr},15:{f:Hr},16:{f:co},17:{f:Hr},18:{f:Hr},19:{f:Jr},20:{f:jR},21:{f:jR},23:{f:q$},24:{f:YR},25:{f:Hr},26:{},27:{},28:{f:YDe},29:{},34:{f:Hr},35:{f:qR},38:{f:co},39:{f:co},40:{f:co},41:{f:co},42:{f:Hr},43:{f:Hr},47:{f:eUe},49:{f:FDe},51:{f:Jr},60:{},61:{f:kDe},64:{f:Hr},65:{f:IDe},66:{f:Jr},77:{},80:{},81:{},82:{},85:{f:Jr},89:{},90:{},91:{},92:{f:_De},93:{f:JDe},94:{},95:{f:Hr},96:{},97:{},99:{f:Hr},125:{f:Y$},128:{f:HDe},129:{f:wDe},130:{f:Jr},131:{f:Hr},132:{f:Hr},133:{f:bDe},134:{},140:{f:r3e},141:{f:Jr},144:{},146:{f:o3e},151:{},152:{},153:{},154:{},155:{},156:{f:Jr},157:{},158:{},160:{f:d3e},161:{f:l3e},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:VDe},190:{f:LDe},193:{f:Jc},197:{},198:{},199:{},200:{},201:{},202:{f:Hr},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Jr},220:{},221:{f:Hr},222:{},224:{f:ODe},225:{f:yDe},226:{f:Jc},227:{},229:{f:XDe},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:xDe},253:{f:PDe},255:{f:CDe},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:Q$},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Hr},353:{f:Jc},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:QDe},431:{f:Hr},432:{},433:{},434:{},437:{},438:{f:t3e},439:{f:Hr},440:{f:n3e},441:{},442:{f:bg},443:{},444:{f:Jr},445:{},446:{},448:{f:Jc},449:{f:BDe,r:2},450:{f:Jc},512:{f:KR},513:{f:c3e},515:{f:$De},516:{f:DDe},517:{f:WR},519:{f:A3e},520:{f:SDe},523:{},545:{f:XR},549:{f:zR},566:{},574:{f:TDe},638:{f:NDe},659:{},1048:{},1054:{f:UDe},1084:{},1212:{f:WDe},2048:{f:a3e},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:xy},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Jc},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:i3e,r:12},2173:{f:VUe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Hr,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:KDe,r:12},2197:{},2198:{f:FUe,r:12},2199:{},2200:{},2201:{},2202:{f:jDe,r:12},2203:{f:Jc},2204:{},2205:{},2206:{},2207:{},2211:{f:EDe},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Jr},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:u3e},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:s3e},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:KR},1:{},2:{f:v3e},3:{f:h3e},4:{f:m3e},5:{f:WR},7:{f:p3e},8:{},9:{f:xy},11:{},22:{f:Jr},30:{f:RDe},31:{},32:{},33:{f:XR},36:{},37:{f:zR},50:{f:g3e},62:{},52:{},67:{},68:{f:Jr},69:{},86:{},126:{},127:{f:f3e},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:y3e},223:{},234:{},354:{},421:{},518:{f:VC},521:{f:xy},536:{f:YR},547:{f:qR},561:{},579:{},1030:{f:VC},1033:{f:xy},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Al(e,t,n,a){var r=t;if(!isNaN(r)){var s=(n||[]).length||0,o=e.next(4);o.write_shift(2,r),o.write_shift(2,s),s>0&&I$(n)&&e.push(n)}}function lN(e,t){var n=t||{},a=n.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var r=e.match(/<table/i);if(!r)throw new Error("Invalid HTML: could not find <table>");var s=e.match(/<\/table/i),o=r.index,i=s&&s.index||e.length,c=$Fe(e.slice(o,i),/(:?<tr[^>]*>)/i,"<tr>"),A=-1,d=0,f=0,m=0,h={s:{r:1e7,c:1e7},e:{r:0,c:0}},v=[];for(o=0;o<c.length;++o){var y=c[o].trim(),g=y.slice(0,3).toLowerCase();if(g=="<tr"){if(++A,n.sheetRows&&n.sheetRows<=A){--A;break}d=0;continue}if(!(g!="<td"&&g!="<th")){var w=y.split(/<\/t[dh]>/i);for(i=0;i<w.length;++i){var b=w[i].trim();if(b.match(/<t[dh]/i)){for(var x=b,T=0;x.charAt(0)=="<"&&(T=x.indexOf(">"))>-1;)x=x.slice(T+1);for(var U=0;U<v.length;++U){var k=v[U];k.s.c==d&&k.s.r<A&&A<=k.e.r&&(d=k.e.c+1,U=-1)}var S=Ln(b.slice(0,b.indexOf(">")));m=S.colspan?+S.colspan:1,((f=+S.rowspan)>1||m>1)&&v.push({s:{r:A,c:d},e:{r:A+(f||1)-1,c:d+m-1}});var E=S.t||S["data-t"]||"";if(!x.length){d+=m;continue}if(x=p$(x),h.s.r>A&&(h.s.r=A),h.e.r<A&&(h.e.r=A),h.s.c>d&&(h.s.c=d),h.e.c<d&&(h.e.c=d),!x.length){d+=m;continue}var C={t:"s",v:x};n.raw||!x.trim().length||E=="s"||(x==="TRUE"?C={t:"b",v:!0}:x==="FALSE"?C={t:"b",v:!1}:isNaN(Tl(x))?isNaN(Dh(x).getDate())||(C={t:"d",v:Is(x)},n.cellDates||(C={t:"n",v:Oo(C.v)}),C.z=n.dateNF||Xn[14]):C={t:"n",v:Tl(x)}),n.dense?(a[A]||(a[A]=[]),a[A][d]=C):a[Kn({r:A,c:d})]=C,d+=m}}}}return a["!ref"]=ga(h),v.length&&(a["!merges"]=v),a}function gLe(e,t,n,a){for(var r=e["!merges"]||[],s=[],o=t.s.c;o<=t.e.c;++o){for(var i=0,c=0,A=0;A<r.length;++A)if(!(r[A].s.r>n||r[A].s.c>o)&&!(r[A].e.r<n||r[A].e.c<o)){if(r[A].s.r<n||r[A].s.c<o){i=-1;break}i=r[A].e.r-r[A].s.r+1,c=r[A].e.c-r[A].s.c+1;break}if(!(i<0)){var d=Kn({r:n,c:o}),f=a.dense?(e[n]||[])[o]:e[d],m=f&&f.v!=null&&(f.h||UT(f.w||(kc(f),f.w)||""))||"",h={};i>1&&(h.rowspan=i),c>1&&(h.colspan=c),a.editable?m='<span contenteditable="true">'+m+"</span>":f&&(h["data-t"]=f&&f.t||"z",f.v!=null&&(h["data-v"]=f.v),f.z!=null&&(h["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(m='<a href="'+f.l.Target+'">'+m+"</a>")),h.id=(a.id||"sjs")+"-"+d,s.push(rPe("td",m,h))}}var v="<tr>";return v+s.join("")+"</tr>"}var yLe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',_Le="</body></html>";function wLe(e,t){var n=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!n||n.length==0)throw new Error("Invalid HTML: could not find <table>");if(n.length==1)return qd(lN(n[0],t),t);var a=JT();return n.forEach(function(r,s){ZT(a,lN(r,t),"Sheet"+(s+1))}),a}function bLe(e,t,n){var a=[];return a.join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}function xLe(e,t){var n=t||{},a=n.header!=null?n.header:yLe,r=n.footer!=null?n.footer:_Le,s=[a],o=uv(e["!ref"]);n.dense=Array.isArray(e),s.push(bLe(e,o,n));for(var i=o.s.r;i<=o.e.r;++i)s.push(gLe(e,o,i,n));return s.push("</table>"+r),s.join("")}function b9(e,t,n){var a=n||{},r=0,s=0;if(a.origin!=null)if(typeof a.origin=="number")r=a.origin;else{var o=typeof a.origin=="string"?Ro(a.origin):a.origin;r=o.r,s=o.c}var i=t.getElementsByTagName("tr"),c=Math.min(a.sheetRows||1e7,i.length),A={s:{r:0,c:0},e:{r,c:s}};if(e["!ref"]){var d=uv(e["!ref"]);A.s.r=Math.min(A.s.r,d.s.r),A.s.c=Math.min(A.s.c,d.s.c),A.e.r=Math.max(A.e.r,d.e.r),A.e.c=Math.max(A.e.c,d.e.c),r==-1&&(A.e.r=r=d.e.r+1)}var f=[],m=0,h=e["!rows"]||(e["!rows"]=[]),v=0,y=0,g=0,w=0,b=0,x=0;for(e["!cols"]||(e["!cols"]=[]);v<i.length&&y<c;++v){var T=i[v];if(uN(T)){if(a.display)continue;h[y]={hidden:!0}}var U=T.children;for(g=w=0;g<U.length;++g){var k=U[g];if(!(a.display&&uN(k))){var S=k.hasAttribute("data-v")?k.getAttribute("data-v"):k.hasAttribute("v")?k.getAttribute("v"):p$(k.innerHTML),E=k.getAttribute("data-z")||k.getAttribute("z");for(m=0;m<f.length;++m){var C=f[m];C.s.c==w+s&&C.s.r<y+r&&y+r<=C.e.r&&(w=C.e.c+1-s,m=-1)}x=+k.getAttribute("colspan")||1,((b=+k.getAttribute("rowspan")||1)>1||x>1)&&f.push({s:{r:y+r,c:w+s},e:{r:y+r+(b||1)-1,c:w+s+(x||1)-1}});var P={t:"s",v:S},F=k.getAttribute("data-t")||k.getAttribute("t")||"";S!=null&&(S.length==0?P.t=F||"z":a.raw||S.trim().length==0||F=="s"||(S==="TRUE"?P={t:"b",v:!0}:S==="FALSE"?P={t:"b",v:!1}:isNaN(Tl(S))?isNaN(Dh(S).getDate())||(P={t:"d",v:Is(S)},a.cellDates||(P={t:"n",v:Oo(P.v)}),P.z=a.dateNF||Xn[14]):P={t:"n",v:Tl(S)})),P.z===void 0&&E!=null&&(P.z=E);var N="",L=k.getElementsByTagName("A");if(L&&L.length)for(var ie=0;ie<L.length&&!(L[ie].hasAttribute("href")&&(N=L[ie].getAttribute("href"),N.charAt(0)!="#"));++ie);N&&N.charAt(0)!="#"&&(P.l={Target:N}),a.dense?(e[y+r]||(e[y+r]=[]),e[y+r][w+s]=P):e[Kn({c:w+s,r:y+r})]=P,A.e.c<w+s&&(A.e.c=w+s),w+=x}}++y}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),A.e.r=Math.max(A.e.r,y-1+r),e["!ref"]=ga(A),y>=c&&(e["!fullref"]=ga((A.e.r=i.length-v+y-1+r,A))),e}function x9(e,t){var n=t||{},a=n.dense?[]:{};return b9(a,e,t)}function CLe(e,t){return qd(x9(e,t),t)}function uN(e){var t="",n=SLe(e);return n&&(t=n(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function SLe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function ELe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(a,r){return Array(parseInt(r,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),n=xa(t.replace(/<[^>]*>/g,""));return[n]}var cN={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function C9(e,t){var n=t||{},a=RT(e),r=[],s,o,i={name:""},c="",A=0,d,f,m={},h=[],v=n.dense?[]:{},y,g,w={value:""},b="",x=0,T=[],U=-1,k=-1,S={s:{r:1e6,c:1e7},e:{r:0,c:0}},E=0,C={},P=[],F={},N=0,L=0,ie=[],le=1,Q=1,Z=[],ce={Names:[]},J={},se=["",""],G=[],D={},j="",ne=0,H=!1,te=!1,Y=0;for(P0.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");y=P0.exec(a);)switch(y[3]=y[3].replace(/_.*$/,"")){case"table":case"":y[1]==="/"?(S.e.c>=S.s.c&&S.e.r>=S.s.r?v["!ref"]=ga(S):v["!ref"]="A1:A1",n.sheetRows>0&&n.sheetRows<=S.e.r&&(v["!fullref"]=v["!ref"],S.e.r=n.sheetRows-1,v["!ref"]=ga(S)),P.length&&(v["!merges"]=P),ie.length&&(v["!rows"]=ie),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),h.push(d.name),m[d.name]=v,te=!1):y[0].charAt(y[0].length-2)!=="/"&&(d=Ln(y[0],!1),U=k=-1,S.s.r=S.s.c=1e7,S.e.r=S.e.c=0,v=n.dense?[]:{},P=[],ie=[],te=!0);break;case"table-row-group":y[1]==="/"?--E:++E;break;case"table-row":case"":if(y[1]==="/"){U+=le,le=1;break}if(f=Ln(y[0],!1),f.?U=f.-1:U==-1&&(U=0),le=+f["number-rows-repeated"]||1,le<10)for(Y=0;Y<le;++Y)E>0&&(ie[U+Y]={level:E});k=-1;break;case"covered-table-cell":y[1]!=="/"&&++k,n.sheetStubs&&(n.dense?(v[U]||(v[U]=[]),v[U][k]={t:"z"}):v[Kn({r:U,c:k})]={t:"z"}),b="",T=[];break;case"table-cell":case"":if(y[0].charAt(y[0].length-2)==="/")++k,w=Ln(y[0],!1),Q=parseInt(w["number-columns-repeated"]||"1",10),g={t:"z",v:null},w.formula&&n.cellFormula!=!1&&(g.f=rN(xa(w.formula))),(w.||w["value-type"])=="string"&&(g.t="s",g.v=xa(w["string-value"]||""),n.dense?(v[U]||(v[U]=[]),v[U][k]=g):v[Kn({r:U,c:k})]=g),k+=Q-1;else if(y[1]!=="/"){++k,b="",x=0,T=[],Q=1;var K=le?U+le-1:U;if(k>S.e.c&&(S.e.c=k),k<S.s.c&&(S.s.c=k),U<S.s.r&&(S.s.r=U),K>S.e.r&&(S.e.r=K),w=Ln(y[0],!1),G=[],D={},g={t:w.||w["value-type"],v:null},n.cellFormula)if(w.formula&&(w.formula=xa(w.formula)),w["number-matrix-columns-spanned"]&&w["number-matrix-rows-spanned"]&&(N=parseInt(w["number-matrix-rows-spanned"],10)||0,L=parseInt(w["number-matrix-columns-spanned"],10)||0,F={s:{r:U,c:k},e:{r:U+N-1,c:k+L-1}},g.F=ga(F),Z.push([F,g.F])),w.formula)g.f=rN(w.formula);else for(Y=0;Y<Z.length;++Y)U>=Z[Y][0].s.r&&U<=Z[Y][0].e.r&&k>=Z[Y][0].s.c&&k<=Z[Y][0].e.c&&(g.F=Z[Y][1]);switch((w["number-columns-spanned"]||w["number-rows-spanned"])&&(N=parseInt(w["number-rows-spanned"],10)||0,L=parseInt(w["number-columns-spanned"],10)||0,F={s:{r:U,c:k},e:{r:U+N-1,c:k+L-1}},P.push(F)),w["number-columns-repeated"]&&(Q=parseInt(w["number-columns-repeated"],10)),g.t){case"boolean":g.t="b",g.v=yr(w["boolean-value"]);break;case"float":g.t="n",g.v=parseFloat(w.value);break;case"percentage":g.t="n",g.v=parseFloat(w.value);break;case"currency":g.t="n",g.v=parseFloat(w.value);break;case"date":g.t="d",g.v=Is(w["date-value"]),n.cellDates||(g.t="n",g.v=Oo(g.v)),g.z="m/d/yy";break;case"time":g.t="n",g.v=MFe(w["time-value"])/86400,n.cellDates&&(g.t="d",g.v=Mw(g.v)),g.z="HH:MM:SS";break;case"number":g.t="n",g.v=parseFloat(w.);break;default:if(g.t==="string"||g.t==="text"||!g.t)g.t="s",w["string-value"]!=null&&(b=xa(w["string-value"]),T=[]);else throw new Error("Unsupported value type "+g.t)}}else{if(H=!1,g.t==="s"&&(g.v=b||"",T.length&&(g.R=T),H=x==0),J.Target&&(g.l=J),G.length>0&&(g.c=G,G=[]),b&&n.cellText!==!1&&(g.w=b),H&&(g.t="z",delete g.v),(!H||n.sheetStubs)&&!(n.sheetRows&&n.sheetRows<=U))for(var X=0;X<le;++X){if(Q=parseInt(w["number-columns-repeated"]||"1",10),n.dense)for(v[U+X]||(v[U+X]=[]),v[U+X][k]=X==0?g:zs(g);--Q>0;)v[U+X][k+Q]=zs(g);else for(v[Kn({r:U+X,c:k})]=g;--Q>0;)v[Kn({r:U+X,c:k+Q})]=zs(g);S.e.c<=k&&(S.e.c=k)}Q=parseInt(w["number-columns-repeated"]||"1",10),k+=Q-1,Q=0,g={},b="",T=[]}J={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(y[1]==="/"){if((s=r.pop())[0]!==y[3])throw"Bad state: "+s}else y[0].charAt(y[0].length-2)!=="/"&&r.push([y[3],!0]);break;case"annotation":if(y[1]==="/"){if((s=r.pop())[0]!==y[3])throw"Bad state: "+s;D.t=b,T.length&&(D.R=T),D.a=j,G.push(D)}else y[0].charAt(y[0].length-2)!=="/"&&r.push([y[3],!1]);j="",ne=0,b="",x=0,T=[];break;case"creator":y[1]==="/"?j=a.slice(ne,y.index):ne=y.index+y[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(y[1]==="/"){if((s=r.pop())[0]!==y[3])throw"Bad state: "+s}else y[0].charAt(y[0].length-2)!=="/"&&r.push([y[3],!1]);b="",x=0,T=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(y[1]==="/"){if(C[i.name]=c,(s=r.pop())[0]!==y[3])throw"Bad state: "+s}else y[0].charAt(y[0].length-2)!=="/"&&(c="",i=Ln(y[0],!1),r.push([y[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(r[r.length-1][0]){case"time-style":case"date-style":o=Ln(y[0],!1),c+=cN[y[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(r[r.length-1][0]){case"time-style":case"date-style":o=Ln(y[0],!1),c+=cN[y[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(y[0].slice(-2)==="/>")break;if(y[1]==="/")switch(r[r.length-1][0]){case"number-style":case"date-style":case"time-style":c+=a.slice(A,y.index);break}else A=y.index+y[0].length;break;case"named-range":o=Ln(y[0],!1),se=LC(o["cell-range-address"]);var ae={Name:o.name,Ref:se[0]+"!"+se[1]};te&&(ae.Sheet=h.length),ce.Names.push(ae);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(r[r.length-1][0])>-1)break;if(y[1]==="/"&&(!w||!w["string-value"])){var oe=ELe(a.slice(x,y.index));b=(b.length>0?b+`
`:"")+oe[0]}else Ln(y[0],!1),x=y.index+y[0].length;break;case"s":break;case"database-range":if(y[1]==="/")break;try{se=LC(Ln(y[0])["target-range-address"]),m[se[0]]["!autofilter"]={ref:se[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(y[1]!=="/"){if(J=Ln(y[0],!1),!J.href)break;J.Target=xa(J.href),delete J.href,J.Target.charAt(0)=="#"&&J.Target.indexOf(".")>-1?(se=LC(J.Target.slice(1)),J.Target="#"+se[0]+"!"+se[1]):J.Target.match(/^\.\.[\\\/]/)&&(J.Target=J.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(y[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(n.WTF)throw new Error(y)}}var W={Sheets:m,SheetNames:h,Workbook:ce};return n.bookSheets&&delete W.Sheets,W}function dN(e,t){t=t||{},Hi(e,"META-INF/manifest.xml")&&$Pe(Xr(e,"META-INF/manifest.xml"),t);var n=pi(e,"content.xml");if(!n)throw new Error("Missing content.xml in ODS / UOF file");var a=C9(or(n),t);return Hi(e,"meta.xml")&&(a.Props=V$(Xr(e,"meta.xml"))),a}function AN(e,t){return C9(e,t)}function jT(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function HE(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):or(Df(e))}function $E(e){var t=e.reduce(function(r,s){return r+s.length},0),n=new Uint8Array(t),a=0;return e.forEach(function(r){n.set(r,a),a+=r.length}),n}function fN(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function BLe(e,t){for(var n=(e[t+15]&127)<<7|e[t+14]>>1,a=e[t+14]&1,r=t+13;r>=t;--r)a=a*256+e[r];return(e[t+15]&128?-a:a)*Math.pow(10,n-6176)}function N0(e,t){var n=t?t[0]:0,a=e[n]&127;e:if(e[n++]>=128&&(a|=(e[n]&127)<<7,e[n++]<128||(a|=(e[n]&127)<<14,e[n++]<128)||(a|=(e[n]&127)<<21,e[n++]<128)||(a+=(e[n]&127)*Math.pow(2,28),++n,e[n++]<128)||(a+=(e[n]&127)*Math.pow(2,35),++n,e[n++]<128)||(a+=(e[n]&127)*Math.pow(2,42),++n,e[n++]<128)))break e;return t&&(t[0]=n),a}function hs(e){var t=0,n=e[t]&127;e:if(e[t++]>=128){if(n|=(e[t]&127)<<7,e[t++]<128||(n|=(e[t]&127)<<14,e[t++]<128)||(n|=(e[t]&127)<<21,e[t++]<128))break e;n|=(e[t]&127)<<28}return n}function fo(e){for(var t=[],n=[0];n[0]<e.length;){var a=n[0],r=N0(e,n),s=r&7;r=Math.floor(r/8);var o=0,i;if(r==0)break;switch(s){case 0:{for(var c=n[0];e[n[0]++]>=128;);i=e.slice(c,n[0])}break;case 5:o=4,i=e.slice(n[0],n[0]+o),n[0]+=o;break;case 1:o=8,i=e.slice(n[0],n[0]+o),n[0]+=o;break;case 2:o=N0(e,n),i=e.slice(n[0],n[0]+o),n[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(r," at offset ").concat(a))}var A={data:i,type:s};t[r]==null?t[r]=[A]:t[r].push(A)}return t}function qT(e,t){return e?.map(function(n){return t(n.data)})||[]}function kLe(e){for(var t,n=[],a=[0];a[0]<e.length;){var r=N0(e,a),s=fo(e.slice(a[0],a[0]+r));a[0]+=r;var o={id:hs(s[1][0].data),messages:[]};s[2].forEach(function(i){var c=fo(i.data),A=hs(c[3][0].data);o.messages.push({meta:c,data:e.slice(a[0],a[0]+A)}),a[0]+=A}),(t=s[3])!=null&&t[0]&&(o.merge=hs(s[3][0].data)>>>0>0),n.push(o)}return n}function TLe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var n=[0],a=N0(t,n),r=[];n[0]<t.length;){var s=t[n[0]]&3;if(s==0){var o=t[n[0]++]>>2;if(o<60)++o;else{var i=o-59;o=t[n[0]],i>1&&(o|=t[n[0]+1]<<8),i>2&&(o|=t[n[0]+2]<<16),i>3&&(o|=t[n[0]+3]<<24),o>>>=0,o++,n[0]+=i}r.push(t.slice(n[0],n[0]+o)),n[0]+=o;continue}else{var c=0,A=0;if(s==1?(A=(t[n[0]]>>2&7)+4,c=(t[n[0]++]&224)<<3,c|=t[n[0]++]):(A=(t[n[0]++]>>2)+1,s==2?(c=t[n[0]]|t[n[0]+1]<<8,n[0]+=2):(c=(t[n[0]]|t[n[0]+1]<<8|t[n[0]+2]<<16|t[n[0]+3]<<24)>>>0,n[0]+=4)),r=[$E(r)],c==0)throw new Error("Invalid offset 0");if(c>r[0].length)throw new Error("Invalid offset beyond length");if(A>=c)for(r.push(r[0].slice(-c)),A-=c;A>=r[r.length-1].length;)r.push(r[r.length-1]),A-=r[r.length-1].length;r.push(r[0].slice(-c,-c+A))}}var d=$E(r);if(d.length!=a)throw new Error("Unexpected length: ".concat(d.length," != ").concat(a));return d}function ILe(e){for(var t=[],n=0;n<e.length;){var a=e[n++],r=e[n]|e[n+1]<<8|e[n+2]<<16;n+=3,t.push(TLe(a,e.slice(n,n+r))),n+=r}if(n!==e.length)throw new Error("data is not a valid framed stream!");return $E(t)}function FLe(e,t,n,a){var r=jT(e),s=r.getUint32(4,!0),o=(a>1?12:8)+fN(s&(a>1?3470:398))*4,i=-1,c=-1,A=NaN,d=new Date(2001,0,1);s&512&&(i=r.getUint32(o,!0),o+=4),o+=fN(s&(a>1?12288:4096))*4,s&16&&(c=r.getUint32(o,!0),o+=4),s&32&&(A=r.getFloat64(o,!0),o+=8),s&64&&(d.setTime(d.getTime()+r.getFloat64(o,!0)*1e3),o+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:A};break;case 3:f={t:"s",v:t[c]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:A>0};break;case 7:f={t:"n",v:A/86400};break;case 8:f={t:"e",v:0};break;case 9:if(i>-1)f={t:"s",v:n[i]};else if(c>-1)f={t:"s",v:t[c]};else if(!isNaN(A))f={t:"n",v:A};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function PLe(e,t,n){var a=jT(e),r=a.getUint32(8,!0),s=12,o=-1,i=-1,c=NaN,A=NaN,d=new Date(2001,0,1);r&1&&(c=BLe(e,s),s+=16),r&2&&(A=a.getFloat64(s,!0),s+=8),r&4&&(d.setTime(d.getTime()+a.getFloat64(s,!0)*1e3),s+=8),r&8&&(i=a.getUint32(s,!0),s+=4),r&16&&(o=a.getUint32(s,!0),s+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:t[i]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:A>0};break;case 7:f={t:"n",v:A/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:n[o]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(r&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(r&31," : ").concat(e.slice(0,4)))}return f}function DLe(e,t,n){switch(e[0]){case 0:case 1:case 2:case 3:return FLe(e,t,n,e[0]);case 5:return PLe(e,t,n);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function Cd(e){var t=fo(e);return N0(t[1][0].data)}function mN(e,t){var n=fo(t.data),a=hs(n[1][0].data),r=n[3],s=[];return(r||[]).forEach(function(o){var i=fo(o.data),c=hs(i[1][0].data)>>>0;switch(a){case 1:s[c]=HE(i[3][0].data);break;case 8:{var A=e[Cd(i[9][0].data)][0],d=fo(A.data),f=e[Cd(d[1][0].data)][0],m=hs(f.meta[1][0].data);if(m!=2001)throw new Error("2000 unexpected reference to ".concat(m));var h=fo(f.data);s[c]=h[3].map(function(v){return HE(v.data)}).join("")}break}}),s}function ULe(e,t){var n,a,r,s,o,i,c,A,d,f,m,h,v,y,g=fo(e),w=hs(g[1][0].data)>>>0,b=hs(g[2][0].data)>>>0,x=((a=(n=g[8])==null?void 0:n[0])==null?void 0:a.data)&&hs(g[8][0].data)>0||!1,T,U;if((s=(r=g[7])==null?void 0:r[0])!=null&&s.data&&t!=0)T=(i=(o=g[7])==null?void 0:o[0])==null?void 0:i.data,U=(A=(c=g[6])==null?void 0:c[0])==null?void 0:A.data;else if((f=(d=g[4])==null?void 0:d[0])!=null&&f.data&&t!=1)T=(h=(m=g[4])==null?void 0:m[0])==null?void 0:h.data,U=(y=(v=g[3])==null?void 0:v[0])==null?void 0:y.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var k=x?4:1,S=jT(T),E=[],C=0;C<T.length/2;++C){var P=S.getUint16(C*2,!0);P<65535&&E.push([C,P])}if(E.length!=b)throw"Expected ".concat(b," cells, found ").concat(E.length);var F=[];for(C=0;C<E.length-1;++C)F[E[C][0]]=U.subarray(E[C][1]*k,E[C+1][1]*k);return E.length>=1&&(F[E[E.length-1][0]]=U.subarray(E[E.length-1][1]*k)),{R:w,cells:F}}function RLe(e,t){var n,a=fo(t.data),r=(n=a?.[7])!=null&&n[0]?hs(a[7][0].data)>>>0>0?1:0:-1,s=qT(a[5],function(o){return ULe(o,r)});return{nrows:hs(a[4][0].data)>>>0,data:s.reduce(function(o,i){return o[i.R]||(o[i.R]=[]),i.cells.forEach(function(c,A){if(o[i.R][A])throw new Error("Duplicate cell r=".concat(i.R," c=").concat(A));o[i.R][A]=c}),o},[])}}function NLe(e,t,n){var a,r=fo(t.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(hs(r[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(r[6][0].data));if(s.e.c=(hs(r[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(r[7][0].data));n["!ref"]=ga(s);var o=fo(r[4][0].data),i=mN(e,e[Cd(o[4][0].data)][0]),c=(a=o[17])!=null&&a[0]?mN(e,e[Cd(o[17][0].data)][0]):[],A=fo(o[3][0].data),d=0;A[1].forEach(function(f){var m=fo(f.data),h=e[Cd(m[2][0].data)][0],v=hs(h.meta[1][0].data);if(v!=6002)throw new Error("6001 unexpected reference to ".concat(v));var y=RLe(e,h);y.data.forEach(function(g,w){g.forEach(function(b,x){var T=Kn({r:d+w,c:x}),U=DLe(b,i,c);U&&(n[T]=U)})}),d+=y.nrows})}function VLe(e,t){var n=fo(t.data),a={"!ref":"A1"},r=e[Cd(n[2][0].data)],s=hs(r[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return NLe(e,r[0],a),a}function LLe(e,t){var n,a=fo(t.data),r={name:(n=a[1])!=null&&n[0]?HE(a[1][0].data):"",sheets:[]},s=qT(a[2],Cd);return s.forEach(function(o){e[o].forEach(function(i){var c=hs(i.meta[1][0].data);c==6e3&&r.sheets.push(VLe(e,i))})}),r}function MLe(e,t){var n=JT(),a=fo(t.data),r=qT(a[1],Cd);if(r.forEach(function(s){e[s].forEach(function(o){var i=hs(o.meta[1][0].data);if(i==2){var c=LLe(e,o);c.sheets.forEach(function(A,d){ZT(n,A,d==0?c.name:c.name+"_"+d,!0)})}})}),n.SheetNames.length==0)throw new Error("Empty NUMBERS file");return n}function OC(e){var t,n,a,r,s={},o=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var A;try{A=ILe(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var d;try{d=kLe(A)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){s[f.id]=f.messages,o.push(f.id)})}}),!o.length)throw new Error("File has no messages");var i=((r=(a=(n=(t=s?.[1])==null?void 0:t[0])==null?void 0:n.meta)==null?void 0:a[1])==null?void 0:r[0].data)&&hs(s[1][0].meta[1][0].data)==1&&s[1][0];if(i||o.forEach(function(c){s[c].forEach(function(A){var d=hs(A.meta[1][0].data)>>>0;if(d==1)if(!i)i=A;else throw new Error("Document has multiple roots")})}),!i)throw new Error("Cannot find Document root");return MLe(s,i)}function OLe(e){return function(n){for(var a=0;a!=e.length;++a){var r=e[a];n[r[0]]===void 0&&(n[r[0]]=r[1]),r[2]==="n"&&(n[r[0]]=Number(n[r[0]]))}}}function YT(e){OLe([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function HLe(e){return $m.WS.indexOf(e)>-1?"sheet":e==$m.CS?"chart":e==$m.DS?"dialog":e==$m.MS?"macro":e&&e.length?e:"sheet"}function $Le(e,t){if(!e)return 0;try{e=t.map(function(a){return a.id||(a.id=a.strRelID),[a.name,e["!id"][a.id].Target,HLe(e["!id"][a.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function QLe(e,t,n,a,r,s,o,i,c,A,d,f){try{s[a]=jp(pi(e,n,!0),t);var m=Xr(e,t),h;switch(i){case"sheet":h=qVe(m,t,r,c,s[a],A,d,f);break;case"chart":if(h=YVe(m,t,r,c,s[a],A,d,f),!h||!h["!drawel"])break;var v=Cp(h["!drawel"].Target,t),y=NE(v),g=jUe(pi(e,v,!0),jp(pi(e,y,!0),v)),w=Cp(g,v),b=NE(w);h=PVe(pi(e,w,!0),w,c,jp(pi(e,b,!0),w),A,h);break;case"macro":h=XVe(m,t,r,c,s[a],A,d,f);break;case"dialog":h=JVe(m,t,r,c,s[a],A,d,f);break;default:throw new Error("Unrecognized sheet type "+i)}o[a]=h;var x=[];s&&s[a]&&Bu(s[a]).forEach(function(T){var U="";if(s[a][T].Type==$m.CMNT){U=Cp(s[a][T].Target,t);var k=nLe(Xr(e,U,!0),U,c);if(!k||!k.length)return;ZR(h,k,!1)}s[a][T].Type==$m.TCMNT&&(U=Cp(s[a][T].Target,t),x=x.concat(YUe(Xr(e,U,!0),c)))}),x&&x.length&&ZR(h,x,!0,c.people||[])}catch(T){if(c.WTF)throw T}}function Vi(e){return e.charAt(0)=="/"?e.slice(1):e}function GLe(e,t){if(l$(),t=t||{},YT(t),Hi(e,"META-INF/manifest.xml")||Hi(e,"objectdata.xml"))return dN(e,t);if(Hi(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof OC<"u"){if(e.FileIndex)return OC(e);var n=ha.utils.cfb_new();return ER(e).forEach(function(ie){zFe(n,ie,GFe(e,ie))}),OC(n)}throw new Error("Unsupported NUMBERS file")}if(!Hi(e,"[Content_Types].xml"))throw Hi(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Hi(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var a=ER(e),r=OPe(pi(e,"[Content_Types].xml")),s=!1,o,i;if(r.workbooks.length===0&&(i="xl/workbook.xml",Xr(e,i,!0)&&r.workbooks.push(i)),r.workbooks.length===0){if(i="xl/workbook.bin",!Xr(e,i,!0))throw new Error("Could not find workbook");r.workbooks.push(i),s=!0}r.workbooks[0].slice(-3)=="bin"&&(s=!0);var c={},A={};if(!t.bookSheets&&!t.bookProps){if(Xp=[],r.sst)try{Xp=tLe(Xr(e,Vi(r.sst)),r.sst,t)}catch(ie){if(t.WTF)throw ie}t.cellStyles&&r.themes.length&&(c=eLe(pi(e,r.themes[0].replace(/^\//,""),!0)||"",r.themes[0],t)),r.style&&(A=ZVe(Xr(e,Vi(r.style)),r.style,c,t))}r.links.map(function(ie){try{var le=jp(pi(e,NE(Vi(ie))),ie);return rLe(Xr(e,Vi(ie)),le,ie,t)}catch{}});var d=jVe(Xr(e,Vi(r.workbooks[0])),r.workbooks[0],t),f={},m="";r.coreprops.length&&(m=Xr(e,Vi(r.coreprops[0]),!0),m&&(f=V$(m)),r.extprops.length!==0&&(m=Xr(e,Vi(r.extprops[0]),!0),m&&zPe(m,f,t)));var h={};(!t.bookSheets||t.bookProps)&&r.custprops.length!==0&&(m=pi(e,Vi(r.custprops[0]),!0),m&&(h=WPe(m,t)));var v={};if((t.bookSheets||t.bookProps)&&(d.Sheets?o=d.Sheets.map(function(le){return le.name}):f.Worksheets&&f.SheetNames.length>0&&(o=f.SheetNames),t.bookProps&&(v.Props=f,v.Custprops=h),t.bookSheets&&typeof o<"u"&&(v.SheetNames=o),t.bookSheets?v.SheetNames:t.bookProps))return v;o={};var y={};t.bookDeps&&r.calcchain&&(y=aLe(Xr(e,Vi(r.calcchain)),r.calcchain));var g=0,w={},b,x;{var T=d.Sheets;f.Worksheets=T.length,f.SheetNames=[];for(var U=0;U!=T.length;++U)f.SheetNames[U]=T[U].name}var k=s?"bin":"xml",S=r.workbooks[0].lastIndexOf("/"),E=(r.workbooks[0].slice(0,S+1)+"_rels/"+r.workbooks[0].slice(S+1)+".rels").replace(/^\//,"");Hi(e,E)||(E="xl/_rels/workbook."+k+".rels");var C=jp(pi(e,E,!0),E.replace(/_rels.*/,"s5s"));(r.metadata||[]).length>=1&&(t.xlmeta=sLe(Xr(e,Vi(r.metadata[0])),r.metadata[0],t)),(r.people||[]).length>=1&&(t.people=XUe(Xr(e,Vi(r.people[0])),t)),C&&(C=$Le(C,d.Sheets));var P=Xr(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(g=0;g!=f.Worksheets;++g){var F="sheet";if(C&&C[g]?(b="xl/"+C[g][1].replace(/[\/]?xl\//,""),Hi(e,b)||(b=C[g][1]),Hi(e,b)||(b=E.replace(/_rels\/.*$/,"")+C[g][1]),F=C[g][2]):(b="xl/worksheets/sheet"+(g+1-P)+"."+k,b=b.replace(/sheet0\./,"sheet.")),x=b.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(g!=t.sheets)continue e;break;case"string":if(f.SheetNames[g].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var N=!1,L=0;L!=t.sheets.length;++L)typeof t.sheets[L]=="number"&&t.sheets[L]==g&&(N=1),typeof t.sheets[L]=="string"&&t.sheets[L].toLowerCase()==f.SheetNames[g].toLowerCase()&&(N=1);if(!N)continue e}}QLe(e,b,x,f.SheetNames[g],g,w,o,F,t,d,c,A)}return v={Directory:r,Workbook:d,Props:f,Custprops:h,Deps:y,Sheets:o,SheetNames:f.SheetNames,Strings:Xp,Styles:A,Themes:c,SSF:zs(Xn)},t&&t.bookFiles&&(e.files?(v.keys=a,v.files=e.files):(v.keys=[],v.files={},e.FullPaths.forEach(function(ie,le){ie=ie.replace(/^Root Entry[\/]/,""),v.keys.push(ie),v.files[ie]=e.FileIndex[le]}))),t&&t.bookVBA&&(r.vba.length>0?v.vbaraw=Xr(e,Vi(r.vba[0]),!0):r.defaults&&r.defaults.bin===tRe&&(v.vbaraw=Xr(e,"xl/vbaProject.bin",!0))),v}function zLe(e,t){var n=t||{},a="Workbook",r=ha.find(e,a);try{if(a="/!DataSpaces/Version",r=ha.find(e,a),!r||!r.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(V3e(r.content),a="/!DataSpaces/DataSpaceMap",r=ha.find(e,a),!r||!r.content)throw new Error("ECMA-376 Encrypted file missing "+a);var s=M3e(r.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",r=ha.find(e,a),!r||!r.content)throw new Error("ECMA-376 Encrypted file missing "+a);var o=O3e(r.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",r=ha.find(e,a),!r||!r.content)throw new Error("ECMA-376 Encrypted file missing "+a);$3e(r.content)}catch{}if(a="/EncryptionInfo",r=ha.find(e,a),!r||!r.content)throw new Error("ECMA-376 Encrypted file missing "+a);var i=Q3e(r.content);if(a="/EncryptedPackage",r=ha.find(e,a),!r||!r.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(i[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(i[1],r.content,n.password||"",n);if(i[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(i[1],r.content,n.password||"",n);throw new Error("File is password-protected")}function XT(e,t){var n="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":n=Si(e.slice(0,12));break;case"binary":n=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function KLe(e,t){return ha.find(e,"EncryptedPackage")?zLe(e,t):w9(e,t)}function WLe(e,t){var n,a=e,r=t||{};return r.type||(r.type=ca&&Buffer.isBuffer(e)?"buffer":"base64"),n=m$(a,r),GLe(n,r)}function S9(e,t){var n=0;e:for(;n<e.length;)switch(e.charCodeAt(n)){case 10:case 13:case 32:++n;break;case 60:return ME(e.slice(n),t);default:break e}return D0.to_workbook(e,t)}function jLe(e,t){var n="",a=XT(e,t);switch(t.type){case"base64":n=Si(e);break;case"binary":n=e;break;case"buffer":n=e.toString("binary");break;case"array":n=ff(e);break;default:throw new Error("Unrecognized type "+t.type)}return a[0]==239&&a[1]==187&&a[2]==191&&(n=or(n)),t.type="binary",S9(n,t)}function qLe(e,t){var n=e;return t.type=="base64"&&(n=Si(n)),n=T0.utils.decode(1200,n.slice(2),"str"),t.type="binary",S9(n,t)}function YLe(e){return e.match(/[^\x00-\x7F]/)?Sp(e):e}function HC(e,t,n,a){return a?(n.type="string",D0.to_workbook(e,n)):D0.to_workbook(t,n)}function QE(e,t){YH();var n=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return QE(new Uint8Array(e),(n=zs(n),n.type="array",n));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!n.type&&(n.type=typeof Deno<"u"?"buffer":"array");var a=e,r=[0,0,0,0],s=!1;if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),dh={},n.dateNF&&(dh.dateNF=n.dateNF),n.type||(n.type=ca&&Buffer.isBuffer(e)?"buffer":"base64"),n.type=="file"&&(n.type=ca?"buffer":"binary",a=VFe(e),typeof Uint8Array<"u"&&!ca&&(n.type="array")),n.type=="string"&&(s=!0,n.type="binary",n.codepage=65001,a=YLe(e)),n.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),i=new Uint8Array(o);if(i.foo="bar",!i.foo)return n=zs(n),n.type="array",QE(TT(a),n)}switch((r=XT(a,n))[0]){case 208:if(r[1]===207&&r[2]===17&&r[3]===224&&r[4]===161&&r[5]===177&&r[6]===26&&r[7]===225)return KLe(ha.read(a,n),n);break;case 9:if(r[1]<=8)return w9(a,n);break;case 60:return ME(a,n);case 73:if(r[1]===73&&r[2]===42&&r[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(r[1]===68)return C3e(a,n);break;case 84:if(r[1]===65&&r[2]===66&&r[3]===76)return b3e.to_workbook(a,n);break;case 80:return r[1]===75&&r[2]<9&&r[3]<9?WLe(a,n):HC(e,a,n,s);case 239:return r[3]===60?ME(a,n):HC(e,a,n,s);case 255:if(r[1]===254)return qLe(a,n);if(r[1]===0&&r[2]===2&&r[3]===0)return Yp.to_workbook(a,n);break;case 0:if(r[1]===0&&(r[2]>=2&&r[3]===0||r[2]===0&&(r[3]===8||r[3]===9)))return Yp.to_workbook(a,n);break;case 3:case 131:case 139:case 140:return JR.to_workbook(a,n);case 123:if(r[1]===92&&r[2]===114&&r[3]===116)return tUe.to_workbook(a,n);break;case 10:case 13:case 32:return jLe(a,n);case 137:if(r[1]===80&&r[2]===78&&r[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return _3e.indexOf(r[0])>-1&&r[2]<=12&&r[3]<=31?JR.to_workbook(a,n):HC(e,a,n,s)}function XLe(e,t,n,a,r,s,o,i){var c=Ks(n),A=i.defval,d=i.raw||!Object.prototype.hasOwnProperty.call(i,"raw"),f=!0,m=r===1?[]:{};if(r!==1)if(Object.defineProperty)try{Object.defineProperty(m,"__rowNum__",{value:n,enumerable:!1})}catch{m.__rowNum__=n}else m.__rowNum__=n;if(!o||e[n])for(var h=t.s.c;h<=t.e.c;++h){var v=o?e[n][h]:e[a[h]+c];if(v===void 0||v.t===void 0){if(A===void 0)continue;s[h]!=null&&(m[s[h]]=A);continue}var y=v.v;switch(v.t){case"z":if(y==null)break;continue;case"e":y=y==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+v.t)}if(s[h]!=null){if(y==null)if(v.t=="e"&&y===null)m[s[h]]=null;else if(A!==void 0)m[s[h]]=A;else if(d&&y===null)m[s[h]]=null;else continue;else m[s[h]]=d&&(v.t!=="n"||v.t==="n"&&i.rawNumbers!==!1)?y:kc(v,y,i);y!=null&&(f=!1)}}return{row:m,isempty:f}}function GE(e,t){if(e==null||e["!ref"]==null)return[];var n={t:"n",v:0},a=0,r=1,s=[],o=0,i="",c={s:{r:0,c:0},e:{r:0,c:0}},A=t||{},d=A.range!=null?A.range:e["!ref"];switch(A.header===1?a=1:A.header==="A"?a=2:Array.isArray(A.header)?a=3:A.header==null&&(a=0),typeof d){case"string":c=Dr(d);break;case"number":c=Dr(e["!ref"]),c.s.r=d;break;default:c=d}a>0&&(r=0);var f=Ks(c.s.r),m=[],h=[],v=0,y=0,g=Array.isArray(e),w=c.s.r,b=0,x={};g&&!e[w]&&(e[w]=[]);var T=A.skipHidden&&e["!cols"]||[],U=A.skipHidden&&e["!rows"]||[];for(b=c.s.c;b<=c.e.c;++b)if(!(T[b]||{}).hidden)switch(m[b]=fs(b),n=g?e[w][b]:e[m[b]+f],a){case 1:s[b]=b-c.s.c;break;case 2:s[b]=m[b];break;case 3:s[b]=A.header[b-c.s.c];break;default:if(n==null&&(n={w:"__EMPTY",t:"s"}),i=o=kc(n,null,A),y=x[o]||0,!y)x[o]=1;else{do i=o+"_"+y++;while(x[i]);x[o]=y,x[i]=1}s[b]=i}for(w=c.s.r+r;w<=c.e.r;++w)if(!(U[w]||{}).hidden){var k=XLe(e,c,w,m,a,s,g,A);(k.isempty===!1||(a===1?A.blankrows!==!1:A.blankrows))&&(h[v++]=k.row)}return h.length=v,h}var hN=/"/g;function JLe(e,t,n,a,r,s,o,i){for(var c=!0,A=[],d="",f=Ks(n),m=t.s.c;m<=t.e.c;++m)if(a[m]){var h=i.dense?(e[n]||[])[m]:e[a[m]+f];if(h==null)d="";else if(h.v!=null){c=!1,d=""+(i.rawNumbers&&h.t=="n"?h.v:kc(h,null,i));for(var v=0,y=0;v!==d.length;++v)if((y=d.charCodeAt(v))===r||y===s||y===34||i.forceQuotes){d='"'+d.replace(hN,'""')+'"';break}d=="ID"&&(d='"ID"')}else h.f!=null&&!h.F?(c=!1,d="="+h.f,d.indexOf(",")>=0&&(d='"'+d.replace(hN,'""')+'"')):d="";A.push(d)}return i.blankrows===!1&&c?null:A.join(o)}function E9(e,t){var n=[],a=t??{};if(e==null||e["!ref"]==null)return"";var r=Dr(e["!ref"]),s=a.FS!==void 0?a.FS:",",o=s.charCodeAt(0),i=a.RS!==void 0?a.RS:`
`,c=i.charCodeAt(0),A=new RegExp((s=="|"?"\\|":s)+"+$"),d="",f=[];a.dense=Array.isArray(e);for(var m=a.skipHidden&&e["!cols"]||[],h=a.skipHidden&&e["!rows"]||[],v=r.s.c;v<=r.e.c;++v)(m[v]||{}).hidden||(f[v]=fs(v));for(var y=0,g=r.s.r;g<=r.e.r;++g)(h[g]||{}).hidden||(d=JLe(e,r,g,f,o,c,s,a),d!=null&&(a.strip&&(d=d.replace(A,"")),(d||a.blankrows!==!1)&&n.push((y++?i:"")+d)));return delete a.dense,n.join("")}function ZLe(e,t){t||(t={}),t.FS="	",t.RS=`
`;var n=E9(e,t);return n}function e8e(e){var t="",n,a="";if(e==null||e["!ref"]==null)return[];var r=Dr(e["!ref"]),s="",o=[],i,c=[],A=Array.isArray(e);for(i=r.s.c;i<=r.e.c;++i)o[i]=fs(i);for(var d=r.s.r;d<=r.e.r;++d)for(s=Ks(d),i=r.s.c;i<=r.e.c;++i)if(t=o[i]+s,n=A?(e[d]||[])[i]:e[t],a="",n!==void 0){if(n.F!=null){if(t=n.F,!n.f)continue;a=n.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(n.f!=null)a=n.f;else{if(n.t=="z")continue;if(n.t=="n"&&n.v!=null)a=""+n.v;else if(n.t=="b")a=n.v?"TRUE":"FALSE";else if(n.w!==void 0)a="'"+n.w;else{if(n.v===void 0)continue;n.t=="s"?a="'"+n.v:a=""+n.v}}c[c.length]=t+"="+a}return c}function B9(e,t,n){var a=n||{},r=+!a.skipHeader,s=e||{},o=0,i=0;if(s&&a.origin!=null)if(typeof a.origin=="number")o=a.origin;else{var c=typeof a.origin=="string"?Ro(a.origin):a.origin;o=c.r,i=c.c}var A,d={s:{c:0,r:0},e:{c:i,r:o+t.length-1+r}};if(s["!ref"]){var f=Dr(s["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),o==-1&&(o=f.e.r+1,d.e.r=o+t.length-1+r)}else o==-1&&(o=0,d.e.r=t.length-1+r);var m=a.header||[],h=0;t.forEach(function(y,g){Bu(y).forEach(function(w){(h=m.indexOf(w))==-1&&(m[h=m.length]=w);var b=y[w],x="z",T="",U=Kn({c:i+h,r:o+g+r});A=V0(s,U),b&&typeof b=="object"&&!(b instanceof Date)?s[U]=b:(typeof b=="number"?x="n":typeof b=="boolean"?x="b":typeof b=="string"?x="s":b instanceof Date?(x="d",a.cellDates||(x="n",b=Oo(b)),T=a.dateNF||Xn[14]):b===null&&a.nullError&&(x="e",b=0),A?(A.t=x,A.v=b,delete A.w,delete A.R,T&&(A.z=T)):s[U]=A={t:x,v:b},T&&(A.z=T))})}),d.e.c=Math.max(d.e.c,i+m.length-1);var v=Ks(o);if(r)for(h=0;h<m.length;++h)s[fs(h+i)+v]={t:"s",v:m[h]};return s["!ref"]=ga(d),s}function t8e(e,t){return B9(null,e,t)}function V0(e,t,n){if(typeof t=="string"){if(Array.isArray(e)){var a=Ro(t);return e[a.r]||(e[a.r]=[]),e[a.r][a.c]||(e[a.r][a.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?V0(e,Kn(t)):V0(e,Kn({r:t,c:n||0}))}function n8e(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var n=e.SheetNames.indexOf(t);if(n>-1)return n;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function JT(){return{SheetNames:[],Sheets:{}}}function ZT(e,t,n,a){var r=1;if(!n)for(;r<=65535&&e.SheetNames.indexOf(n="Sheet"+r)!=-1;++r,n=void 0);if(!n||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(a&&e.SheetNames.indexOf(n)>=0){var s=n.match(/(^.*?)(\d+)$/);r=s&&+s[2]||0;var o=s&&s[1]||n;for(++r;r<=65535&&e.SheetNames.indexOf(n=o+r)!=-1;++r);}if(OVe(n),e.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return e.SheetNames.push(n),e.Sheets[n]=t,n}function a8e(e,t,n){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var a=n8e(e,t);switch(e.Workbook.Sheets[a]||(e.Workbook.Sheets[a]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}e.Workbook.Sheets[a].Hidden=n}function r8e(e,t){return e.z=t,e}function k9(e,t,n){return t?(e.l={Target:t},n&&(e.l.Tooltip=n)):delete e.l,e}function s8e(e,t,n){return k9(e,"#"+t,n)}function o8e(e,t,n){e.c||(e.c=[]),e.c.push({t,a:n||"SheetJS"})}function i8e(e,t,n,a){for(var r=typeof t!="string"?t:Dr(t),s=typeof t=="string"?t:ga(t),o=r.s.r;o<=r.e.r;++o)for(var i=r.s.c;i<=r.e.c;++i){var c=V0(e,o,i);c.t="n",c.F=s,delete c.v,o==r.s.r&&i==r.s.c&&(c.f=n,a&&(c.D=!0))}return e}var l8e={encode_col:fs,encode_row:Ks,encode_cell:Kn,encode_range:ga,decode_col:LT,decode_row:VT,split_cell:yPe,decode_cell:Ro,decode_range:uv,format_cell:kc,sheet_add_aoa:P$,sheet_add_json:B9,sheet_add_dom:b9,aoa_to_sheet:cv,json_to_sheet:t8e,table_to_sheet:x9,table_to_book:CLe,sheet_to_csv:E9,sheet_to_txt:ZLe,sheet_to_json:GE,sheet_to_html:xLe,sheet_to_formulae:e8e,sheet_to_row_object_array:GE,sheet_get_cell:V0,book_new:JT,book_append_sheet:ZT,book_set_sheet_visibility:a8e,cell_set_number_format:r8e,cell_set_hyperlink:k9,cell_set_internal_link:s8e,cell_add_comment:o8e,sheet_set_array_formula:i8e,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const T9={practo:{name:"Practo",headerRow:1,requiredColumns:{"Patient Name":"name","Mobile Number":"contact_number",Age:"age",Gender:"gender"},optionalColumns:{"Patient Number":"importID","Email Address":"email",Pincode:"address","Date of Birth":"dateOfBirth",DOB:"dateOfBirth","Birth Date":"dateOfBirth"},validation:{required:["Patient Name","Mobile Number","Age","Gender"],optional:["Patient Number","Email Address","Pincode","Date of Birth","DOB","Birth Date"],dataTypes:{"Patient Name":"string","Patient Number":"string",Age:["string","number"],Gender:"string","Mobile Number":["string","number"],"Email Address":"string",Pincode:"string","Date of Birth":"string",DOB:"string","Birth Date":"string"}}},ekacare:{name:"Eka.Care",requiredColumns:{"Patient name":"name",Mobile:"contact_number"},optionalColumns:{"UHID (DF)":"importID",Age:"age",Gender:"gender","Patient Address":"address","Mail ID(DF)":"email","Date of Birth":"dateOfBirth",DOB:"dateOfBirth","Birth Date":"dateOfBirth"},validation:{required:["Patient name","Mobile"],optional:["UHID (DF)","Age","Gender","Patient Address","Mail ID(DF)","Date of Birth","DOB","Birth Date"],dataTypes:{"Patient name":"string","UHID (DF)":"string",Mobile:"string",Age:"string",Gender:"string","Patient Address":"string","Mail ID(DF)":"string","Date of Birth":"string",DOB:"string","Birth Date":"string"}}},healthplix:{name:"Healthplix",headerRow:1,requiredColumns:{ID:"importID",name:"name",phone_number:"contact_number",Sex:"gender",age:"age"},optionalColumns:{person_address:"address",email_id:"email",dob:"dateOfBirth",date_of_birth:"dateOfBirth","Date of Birth":"dateOfBirth",DOB:"dateOfBirth","Birth Date":"dateOfBirth"},validation:{required:["ID","name","phone_number","Sex","age"],optional:["person_address","email_id","dob","date_of_birth","Date of Birth","DOB","Birth Date"],dataTypes:{ID:"string",name:"string",phone_number:["string","number"],Sex:"string",age:["string","number"],person_address:"string",email_id:"string",dob:"string",date_of_birth:"string","Date of Birth":"string",DOB:"string","Birth Date":"string"}}},"evamed-custom":{name:"Evamed Custom Template",headerRow:1,requiredColumns:{id:"importID",name:"name",phone_number:"contact_number"},optionalColumns:{age:"age",gender:"gender",date_of_birth:"dateOfBirth",address:"address",email:"email"},validation:{required:["id","name","phone_number"],optional:["age","gender","date_of_birth","address","email"],dataTypes:{id:["string","number"],name:"string",phone_number:["string","number"],age:["string","number"],gender:"string",date_of_birth:"string",address:"string",email:"string"}}},tatvacare:{name:"TatvaCare",headerRow:1,requiredColumns:{"Patient Name":"name",Mobile:"contact_number"},optionalColumns:{Gender:"gender","Date of Birth":"dateOfBirth",Age:"age","Patient ID":"importID","Street Address":"streetAddress",City:"city",State:"state","Pin Code":"pinCode"},validation:{required:["Patient Name","Mobile"],optional:["Gender","Date of Birth","Age","Patient ID","Street Address","City","State","Pin Code"],dataTypes:{"Patient Name":"string",Mobile:["string","number"],Gender:"string","Date of Birth":"string",Age:["string","number"],"Patient ID":"string","Street Address":"string",City:"string",State:"string","Pin Code":"string"}}}},y2=e=>T9[e]||null,vN=e=>Object.prototype.hasOwnProperty.call(T9,e),I9=(e,t)=>{const n=y2(t);if(!n)return{isValid:!1,error:`Unsupported EMR system: ${t}`,missing:[],found:[]};const a=n.validation.required,r=new Set(e.map(i=>i.trim()));let s=[],o=[];if(t==="practo"){const i={"Patient Name":["Patient Name","PatientName","patient Name","patient name","Name","Patient","Full Name","FullName"],"Mobile Number":["Mobile Number","MobileNumber","mobile Number","mobile number","Mobile","Phone","Phone Number","PhoneNumber","Contact","Contact Number","ContactNumber"],Age:["Age","age","Patient Age","patient Age","Age (Years)"],Gender:["Gender","gender","Sex","sex","Patient Gender","patient Gender"],"Patient Number":["Patient Number","PatientNumber","patient Number","patient number","Patient ID","PatientID","ID","Patient No","PatientNo"],"Date of Birth":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],DOB:["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],"Birth Date":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"]};a.forEach(c=>{(i[c]||[c]).find(f=>r.has(f))?o.push(c):s.push(c)})}else if(t==="evamed-custom"){const i={id:["id","ID","Id","patient_id","patient id","Patient ID","PatientID","Patient Id","patientId","PatientNumber","patient number","Patient Number"],name:["name","Name","patient_name","patient name","Patient Name","PatientName","Patient name","Full Name","FullName","full name"],phone_number:["phone_number","phone number","Phone Number","PhoneNumber","phone","Phone","mobile","Mobile","Mobile Number","mobile number","contact_number","contact number","Contact Number","ContactNumber","Contact"],age:["age","Age","patient_age","patient age","Patient Age","PatientAge","Age (Years)","age (years)"],gender:["gender","Gender","patient_gender","patient gender","Patient Gender","PatientGender","sex","Sex","Gender/Sex"],date_of_birth:["date_of_birth","date of birth","Date of Birth","DateOfBirth","DOB","dob","Birth Date","birth date","BirthDate","birthdate"],address:["address","Address","patient_address","patient address","Patient Address","PatientAddress","Address Line","address line"],email:["email","Email","patient_email","patient email","Patient Email","PatientEmail","email_id","email id","Email ID","EmailID","Email Address","email address"]};a.forEach(c=>{(i[c]||[c]).find(f=>r.has(f))?o.push(c):s.push(c)})}else if(t==="tatvacare"){const i={"Patient Name":["Patient Name","PatientName","patient Name","patient name","Name","Patient","Full Name","FullName"],Mobile:["Mobile","mobile","Mobile Number","mobile Number","MobileNumber","Phone","Phone Number","PhoneNumber","Contact","Contact Number","ContactNumber"],Gender:["Gender","gender","Sex","sex","Patient Gender","patient Gender"],"Date of Birth":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth Date"],Age:["Age","age","Patient Age","patient Age","Age (Years)","age (years)"],"Patient ID":["Patient ID","PatientID","patient ID","patient id","Patient Id","ID","Id","Patient Number","PatientNumber"],"Street Address":["Street Address","StreetAddress","street Address","street address","Address","address","Street","street"],City:["City","city"],State:["State","state"],"Pin Code":["Pin Code","PinCode","pin Code","pin code","Pincode","pincode","Postal Code","postal Code","Zip Code","zip Code"]};a.forEach(c=>{(i[c]||[c]).find(f=>r.has(f))?o.push(c):s.push(c)})}else if(t==="ekacare"){const i={"Patient name":["Patient name","Patient Name","PatientName","patient name","patient Name","Name","Patient","Full Name","FullName"],Mobile:["Mobile","mobile","Mobile Number","mobile Number","MobileNumber","Phone","Phone Number","PhoneNumber","Contact","Contact Number","ContactNumber"],Age:["Age","age","Patient Age","patient Age","Age (Years)"],Gender:["Gender","gender","Sex","sex","Patient Gender","patient Gender"],"Date of Birth":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],DOB:["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],"Birth Date":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"]};a.forEach(c=>{(i[c]||[c]).find(f=>r.has(f))?o.push(c):s.push(c)})}else if(t==="healthplix"){const i={ID:["ID","id","Id","patient_id","patient id","Patient ID","PatientID","Patient Id","patientId"],name:["name","Name","patient_name","patient name","Patient Name","PatientName","Patient name","Full Name","FullName"],phone_number:["phone_number","phone number","Phone Number","PhoneNumber","phone","Phone","mobile","Mobile","Mobile Number","mobile number","contact_number","contact number","Contact Number","ContactNumber"],Sex:["Sex","sex","Gender","gender","Patient Gender","patient Gender"],age:["age","Age","patient_age","patient age","Patient Age","PatientAge","Age (Years)"],dob:["dob","DOB","date_of_birth","date of birth","Date of Birth","DateOfBirth","Birth Date","birth date","BirthDate","birthdate"],date_of_birth:["dob","date_of_birth","date of birth","Date of Birth","DateOfBirth","DOB","Birth Date","birth date","BirthDate","birthdate"],"Date of Birth":["dob","Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],DOB:["dob","Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],"Birth Date":["dob","Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","Birth Date","birth date","BirthDate","birthdate","date_of_birth"]};a.forEach(c=>{(i[c]||[c]).find(f=>r.has(f))?o.push(c):s.push(c)})}else s=a.filter(i=>!r.has(i)),o=a.filter(i=>r.has(i));return{isValid:s.length===0,error:s.length>0?`Missing required columns: ${s.join(", ")}`:null,missing:s,found:o,mapping:n}},sp=e=>{if(!e)return null;try{const t=ev(e),a=wM(new Date,t);return isNaN(a)||a<0?null:a}catch(t){return console.error("Error calculating age from DOB:",e,t),null}},u8e=(e,t,n)=>{const a=y2(n);if(!a)throw new Error(`Unsupported EMR system: ${n}`);const r={},s={...a.requiredColumns,...a.optionalColumns},o=(i,c)=>{let A=c.indexOf(i);if(A!==-1)return A;if(n==="practo"){const f={"Patient Name":["Patient Name","patient Name","Patient name","patient name","PatientName","Name","Patient","Full Name","FullName"],"Mobile Number":["Mobile Number","mobile Number","Mobile number","mobile number","MobileNumber","Mobile","Phone","Phone Number","PhoneNumber","Contact","Contact Number","ContactNumber"],"Patient Number":["Patient Number","patient Number","Patient number","patient number","PatientNumber","Patient ID","PatientID","ID","Patient No","PatientNo"],Age:["Age","age","Patient Age","patient Age","Age (Years)"],Gender:["Gender","gender","Sex","sex","Patient Gender","patient Gender"],"Email Address":["Email Address","email Address","Email address","email address","Email","email","Email ID","Email address"],Pincode:["Pincode","pincode","Pin Code","pin Code","Postal Code","postal Code","Zip Code","zip Code"],"Date of Birth":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],DOB:["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],"Birth Date":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"]}[i]||[i];for(const m of f)if(A=c.indexOf(m),A!==-1)return A}if(n==="evamed-custom"){const f={id:["id","ID","Id","patient_id","patient id","Patient ID","PatientID","Patient Id","patientId","PatientNumber","patient number","Patient Number"],name:["name","Name","patient_name","patient name","Patient Name","PatientName","Patient name","Full Name","FullName","full name"],phone_number:["phone_number","phone number","Phone Number","PhoneNumber","phone","Phone","mobile","Mobile","Mobile Number","mobile number","contact_number","contact number","Contact Number","ContactNumber","Contact"],age:["age","Age","patient_age","patient age","Patient Age","PatientAge","Age (Years)","age (years)"],gender:["gender","Gender","patient_gender","patient gender","Patient Gender","PatientGender","sex","Sex","Gender/Sex"],date_of_birth:["date_of_birth","date of birth","Date of Birth","DateOfBirth","DOB","dob","Birth Date","birth date","BirthDate","birthdate"],address:["address","Address","patient_address","patient address","Patient Address","PatientAddress","Address Line","address line"],email:["email","Email","patient_email","patient email","Patient Email","PatientEmail","email_id","email id","Email ID","EmailID","Email Address","email address"]}[i]||[i];for(const m of f)if(A=c.indexOf(m),A!==-1)return A}if(n==="ekacare"){const f={"Patient name":["Patient name","Patient Name","PatientName","patient name","patient Name","Name","Patient","Full Name","FullName"],Mobile:["Mobile","mobile","Mobile Number","mobile Number","MobileNumber","Phone","Phone Number","PhoneNumber","Contact","Contact Number","ContactNumber"],Age:["Age","age","Patient Age","patient Age","Age (Years)"],Gender:["Gender","gender","Sex","sex","Patient Gender","patient Gender"],"Date of Birth":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],DOB:["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],"Birth Date":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"]}[i]||[i];for(const m of f)if(A=c.indexOf(m),A!==-1)return A}if(n==="healthplix"){const f={ID:["ID","id","Id","patient_id","patient id","Patient ID","PatientID","Patient Id","patientId"],name:["name","Name","patient_name","patient name","Patient Name","PatientName","Patient name","Full Name","FullName"],phone_number:["phone_number","phone number","Phone Number","PhoneNumber","phone","Phone","mobile","Mobile","Mobile Number","mobile number","contact_number","contact number","Contact Number","ContactNumber"],Sex:["Sex","sex","Gender","gender","Patient Gender","patient Gender"],age:["age","Age","patient_age","patient age","Patient Age","PatientAge","Age (Years)"],dob:["dob","DOB","date_of_birth","date of birth","Date of Birth","DateOfBirth","Birth Date","birth date","BirthDate","birthdate"],date_of_birth:["dob","date_of_birth","date of birth","Date of Birth","DateOfBirth","DOB","Birth Date","birth date","BirthDate","birthdate"],"Date of Birth":["dob","Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],DOB:["dob","Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],"Birth Date":["dob","Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","Birth Date","birth date","BirthDate","birthdate","date_of_birth"]}[i]||[i];for(const m of f)if(A=c.indexOf(m),A!==-1)return A}if(n==="tatvacare"){const f={"Patient Name":["Patient Name","patient Name","Patient name","patient name","PatientName","Name","Patient","Full Name","FullName"],Mobile:["Mobile","mobile","Mobile Number","mobile Number","MobileNumber","Phone","Phone Number","PhoneNumber","Contact","Contact Number","ContactNumber"],Gender:["Gender","gender","Sex","sex","Patient Gender","patient Gender"],"Date of Birth":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth Date"],Age:["Age","age","Patient Age","patient Age","Age (Years)","age (years)"],"Patient ID":["Patient ID","PatientID","patient ID","patient id","Patient Id","ID","Id","Patient Number","PatientNumber"],"Street Address":["Street Address","StreetAddress","street Address","street address","Address","address","Street","street"],City:["City","city"],State:["State","state"],"Pin Code":["Pin Code","PinCode","pin Code","pin code","Pincode","pincode","Postal Code","postal Code","Zip Code","zip Code"]}[i]||[i];for(const m of f)if(A=c.indexOf(m),A!==-1)return A}return-1};if(Object.entries(s).forEach(([i,c])=>{const A=o(i,t);if(A!==-1&&c){let d=e[A];n==="practo"&&typeof d=="string"&&d.endsWith("'")&&(d=d.slice(0,-1).trim()),d=d8e(d,i,a.validation.dataTypes[i]),d!=null&&d!==""&&(r[c]=d)}}),r.email=r.email||"",r.address=r.address||"",r.note=r.note||"",n==="practo"){if(r.dateOfBirth){const i=cd(r.dateOfBirth);i!==null&&(r.birthDate=i.toString(),r.age=sp(r.dateOfBirth)),delete r.dateOfBirth}else if(r.age!==void 0&&r.age!==null&&r.age!==""){const i=parseInt(r.age,10);r.age=isNaN(i)||i<0?null:i}else r.age=null;r.gender=r.gender||"Male"}if(n==="ekacare"){if(r.dateOfBirth){const i=cd(r.dateOfBirth);i!==null&&(r.birthDate=i.toString(),r.age=sp(r.dateOfBirth)),delete r.dateOfBirth}else if(r.age!==void 0&&r.age!==null&&r.age!==""){const i=String(r.age).match(/^\d+/);if(i){const c=parseInt(i[0],10);r.age=isNaN(c)||c<0?null:c}else r.age=null}}if(n==="healthplix"){if(r.dateOfBirth){const i=cd(r.dateOfBirth);i!==null&&(r.birthDate=i.toString(),r.age=sp(r.dateOfBirth)),delete r.dateOfBirth}else if(r.age!==void 0&&r.age!==null&&r.age!==""){const i=parseInt(r.age,10);r.age=isNaN(i)||i<0?null:i}}if(n==="evamed-custom"){if(r.dateOfBirth){const i=cd(r.dateOfBirth);i!==null&&(r.birthDate=i.toString(),r.age=sp(r.dateOfBirth)),delete r.dateOfBirth}else if(r.age!==void 0&&r.age!==null){const i=parseInt(r.age,10);r.age=isNaN(i)||i<0?null:i}if(r.gender){const i=String(r.gender).toLowerCase().trim();i==="male"||i==="m"?r.gender="Male":i==="female"||i==="f"?r.gender="Female":i==="other"||i==="o"?r.gender="Other":r.gender=String(r.gender).trim()}else r.gender="Male"}if(n==="tatvacare"){if(r.dateOfBirth){const c=cd(r.dateOfBirth);c!==null&&(r.birthDate=c.toString(),r.age=sp(r.dateOfBirth)),delete r.dateOfBirth}else if(r.age!==void 0&&r.age!==null){const c=parseInt(r.age,10);r.age=isNaN(c)||c<0?null:c}const i=[];if(r.streetAddress&&i.push(r.streetAddress),r.city&&i.push(r.city),r.state&&i.push(r.state),r.pinCode&&i.push(r.pinCode),r.address=i.length>0?i.join(", "):"",delete r.streetAddress,delete r.city,delete r.state,delete r.pinCode,r.gender){const c=String(r.gender).toLowerCase().trim();c==="male"||c==="m"?r.gender="Male":c==="female"||c==="f"?r.gender="Female":c==="other"||c==="o"?r.gender="Other":r.gender=String(r.gender).trim()}else r.gender="Male"}return r.importID=r.importID||null,r.importSource=n,r},c8e=e=>{if(!e||e==="")return"";const t=String(e).trim();let n=t.match(/^(\d{2})-(\d{2})-(\d{4})$/);if(n){const[,a,r,s]=n;return`${s}-${r}-${a}`}if(n=t.match(/^(\d{4})-(\d{2})-(\d{2})$/),n)return t;if(n=t.match(/^(\d{2})\/(\d{2})\/(\d{4})$/),n){const[,a,r,s]=n;return`${s}-${r}-${a}`}if(n=t.match(/^(\d{4})\/(\d{2})\/(\d{2})$/),n){const[,a,r,s]=n;return`${a}-${r}-${s}`}return t},d8e=(e,t,n)=>{if(e==null||e==="")return"";let a=String(e).trim();if(!n)return a;switch(t){case"Patient Age":{if(typeof e=="number")return String(Math.floor(e));const r=a.match(/\d+/);return r?r[0]:a}case"Age":{if(e==null||e===""||a==="")return"";if(a.endsWith("'"))return a.slice(0,-1).trim()||"";const r=a.match(/^\d+/);return r?r[0]:""}case"Patient Contact":return a.replace(/[^\d+\-\s]/g,"");case"Mobile Number":{let r=a;return r.endsWith("'")&&(r=r.slice(0,-1)),r.startsWith("+91")&&(r=r.substring(3)),r.trim()}case"Mobile":return a.startsWith("+91")?a.substring(3).trim():a.replace(/[^\d]/g,"");case"Patient Gender":case"Gender":case"gender":{if(e==null||e===""||a==="")return"";let r=a;if(r.endsWith("'")&&(r=r.slice(0,-1).trim()),!r.trim())return"";const s=r.toLowerCase().trim();return s==="f"?"Female":s==="m"?"Male":s==="o"?"Other":s==="male"||s.includes("male")&&!s.includes("female")?"Male":s==="female"||s.includes("female")?"Female":s==="other"?"Other":r.trim()}case"Patient Name":case"Patient name":{let r=a;return r.endsWith("'")&&(r=r.slice(0,-1)),r.replace(/\s+/g," ").trim()}case"Email Address":{let r=a;return r.endsWith("'")&&(r=r.slice(0,-1)),r.trim()}case"Pincode":{let r=a;return r.endsWith("'")&&(r=r.slice(0,-1)),r.trim()}case"Patient Number":{let r=a;return r.endsWith("'")&&(r=r.slice(0,-1)),r.trim()}case"UHID (DF)":return a.trim();case"ID":return a.trim();case"phone_number":{if(e==null||e==="")return"";let r=String(e).trim();return r.startsWith("+91")&&(r=r.substring(3).trim()),r.endsWith(".0")&&(r=r.slice(0,-2)),r=r.replace(/[^\d]/g,""),r}case"Sex":{if(e==null||e===""||a==="")return"";const r=a.trim(),s=r.toLowerCase();return s==="female"?"Female":s==="male"?"Male":r}case"Age":case"age":{if(e==null||e===""||a==="")return"";let r=a;r.endsWith("'")&&(r=r.slice(0,-1).trim());const s=r.match(/^\d+/);return s?s[0]:""}case"id":return e==null||e===""?"":String(e).trim();case"address":case"person_address":return e==null||e===""||a===","||a==='","'?"":String(e).replace(/\s+/g," ").trim();case"email":case"email_id":return e==null||e===""?"":String(e).trim();case"Date of Birth":case"date_of_birth":case"dob":case"DOB":case"Birth Date":{let r=a;return r.endsWith("'")&&(r=r.slice(0,-1).trim()),c8e(r)}case"Patient ID":return a.trim();case"Street Address":case"City":case"State":case"Pin Code":return e==null||e===""?"":String(e).trim();default:return a}};function $C(e){const t=[];let n="",a=!1;for(let r=0;r<e.length;r++){const s=e[r],o=e[r+1];s==='"'?a&&o==='"'?(n+='"',r++):a=!a:s===","&&!a?(t.push(n.trim()),n=""):n+=s}return t.push(n.trim()),t}const F9=async(e,t=null)=>{const n=e.name.toLowerCase(),a=e.type==="text/csv"||e.type==="application/csv"||n.endsWith(".csv"),r=e.type==="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"||e.type==="application/vnd.ms-excel"||n.endsWith(".xlsx")||n.endsWith(".xls");if(!a&&!r)throw new Error("Unsupported file type. Please use CSV (.csv) or Excel (.xlsx, .xls) files.");return a?new Promise((s,o)=>{const i=new FileReader;i.onload=c=>{try{const d=c.target.result.split(/\r?\n/);let f=0,m=1;if(t){const w=y2(t);w&&w.headerRow&&(f=w.headerRow-1,m=f+1)}if(f>=d.length){o(new Error(`Header row ${f+1} does not exist in file`));return}const h=d[f].trim();if(!h){o(new Error("Header row is empty"));return}const v=$C(h).map(w=>String(w).trim()).filter(w=>w!=="");let y=0;for(let w=m;w<d.length;w++){const b=d[w].trim();b&&$C(b).some(x=>x.trim()!=="")&&y++}const g=[];for(let w=m;w<d.length;w++){const b=d[w].trim();if(b){const x=$C(b);x.some(T=>T.trim()!=="")&&g.push(x)}}s({headers:v,rows:g,totalRows:g.length,headerRowIndex:f+1,isCSV:!0,fileType:"csv"})}catch(A){o(new Error(`Failed to parse CSV file: ${A.message}`))}},i.onerror=()=>o(new Error("Failed to read file")),i.readAsText(e)}):r?new Promise((s,o)=>{const i=new FileReader;i.onload=c=>{try{console.log(`Reading Excel file: ${e.name} (${(e.size/1024/1024).toFixed(2)} MB)`);const A=c.target.result,d=QE(A,{type:"binary",cellDates:!1,cellNF:!1,cellStyles:!1,sheetStubs:!1});if(!d.SheetNames||d.SheetNames.length===0){o(new Error("Excel file has no worksheets"));return}const f=d.SheetNames[0],m=d.Sheets[f];if(!m){o(new Error(`Worksheet "${f}" not found`));return}console.log(`Processing worksheet: ${f}`);const h=l8e.sheet_to_json(m,{header:1,defval:"",raw:!1,blankrows:!1});if(h.length===0){o(new Error("Excel file is empty"));return}console.log(`Excel file parsed: ${h.length} total rows`);let v=0,y=1;if(t){const b=y2(t);b&&b.headerRow&&(v=b.headerRow-1,y=v+1)}if(v>=h.length){o(new Error(`Header row ${v+1} does not exist in Excel file`));return}const g=h[v].map(b=>String(b).trim()).filter(b=>b!=="");if(g.length===0){o(new Error("Header row is empty in Excel file"));return}const w=h.slice(y).filter(b=>b.some(x=>x!=null&&String(x).trim()!==""));console.log(`Excel file processed: ${g.length} columns, ${w.length} data rows`),s({headers:g,rows:w,totalRows:w.length,headerRowIndex:v+1,isCSV:!1,fileType:"excel"})}catch(A){console.error("Excel file parsing error:",A),o(new Error(`Failed to parse Excel file: ${A.message}`))}},i.onerror=()=>{console.error("Failed to read Excel file"),o(new Error("Failed to read Excel file"))},i.readAsBinaryString(e)}):Promise.reject(new Error("Unsupported file type. Please use CSV (.csv) or Excel (.xlsx, .xls) files."))},zE=async(e,t)=>{try{const n=await F9(e,t),a=I9(n.headers,t);return{isValid:a.isValid,error:a.error,fileData:a.isValid?n:null,validation:a}}catch(n){return{isValid:!1,error:n.message,fileData:null,validation:null}}},P9=async(e,t,n=null)=>{const{headers:a,rows:r,fileType:s}=e;s&&console.log(`Processing ${s.toUpperCase()} file with ${r.length} rows`);const o={total:r.length,successful:0,failed:0,errors:[],patients:[],duplicates:0},i=100,c=500,A=new Map,d=[],f=[];for(let m=0;m<r.length;m++)try{const h=u8e(r[m],a,t);h.isImported=!0;const v=f8e(h);if(v){o.failed++,o.errors.push({row:m+1,patientData:r[m],error:v,mappedData:h});continue}h.importID&&h.importID.trim()!==""?(A.set(h.importID,{patientData:h,rowIndex:m+1}),d.push(h)):f.push(h),n&&(m%i===0||m===r.length-1)&&n({current:m+1,total:r.length,phase:"mapping",currentPatient:h.name,message:`Processing row ${m+1} of ${r.length}...`}),m%i===0&&m>0&&await new Promise(y=>setTimeout(y,0))}catch(h){console.error(`Row ${m+1} mapping error:`,h),o.failed++,o.errors.push({row:m+1,patientData:r[m],error:h.message,mappedData:null})}if(d.length>0){n&&n({current:0,total:d.length,phase:"duplicate-check",message:"Checking for existing patients..."});const m=await A8e(d,t);o.duplicates=m.duplicates.length,o.errors.push(...m.duplicates.map(v=>({row:v.row,patientData:v.originalData,error:`Patient already exists with Import ID: ${v.importID}`,mappedData:v.originalData,isDuplicate:!0})));const h=[...m.newPatients,...f];await pN(h,o,n,c)}else await pN(f,o,n,c);return n&&n({current:r.length,total:r.length,phase:"complete",successful:o.successful,failed:o.failed,duplicates:o.duplicates,message:`Import completed: ${o.successful} successful, ${o.failed} failed, ${o.duplicates} duplicates`}),o};async function pN(e,t,n,a){if(e.length===0){console.log("No patients to import");return}n&&n({current:0,total:e.length,phase:"bulk-insert",message:`Inserting ${e.length} patients in batches...`}),console.log(`Bulk inserting ${e.length} patients in batches of ${a}...`);for(let r=0;r<e.length;r+=a){const s=e.slice(r,r+a),o=Math.floor(r/a)+1,i=Math.ceil(e.length/a);console.log(`Processing batch ${o}/${i} (${s.length} patients)...`),n&&n({current:r,total:e.length,phase:"bulk-insert",message:`Inserting batch ${o}/${i}: ${r+1}-${Math.min(r+a,e.length)} of ${e.length}...`});try{const{data:c,error:A}=await ehe(s);A?(console.error(`Batch ${o} failed:`,A),t.failed+=s.length,t.errors.push(...s.map((d,f)=>({patientData:d,error:A.message||"Failed to bulk create patients",row:r+f+1})))):(t.successful+=c.successful||0,t.failed+=c.failed||0,c.patients&&t.patients.push(...c.patients),c.errors&&c.errors.length>0&&t.errors.push(...c.errors.map((d,f)=>({...d,row:r+f+1})))),r+a<e.length&&await new Promise(d=>setTimeout(d,50))}catch(c){console.error(`Batch ${o} error:`,c),t.failed+=s.length,t.errors.push(...s.map((A,d)=>({patientData:A,error:c.message||"Failed to process batch",row:r+d+1})))}s.length=0}console.log(`Bulk insert completed: ${t.successful} successful, ${t.failed} failed`)}const A8e=async(e,t)=>{const n=e.filter(a=>a.importID&&a.importID.trim()!=="");if(n.length===0)return console.log("No patients with importID found, proceeding with all patients"),{newPatients:e,duplicates:[]};try{console.log(`Checking for duplicates: ${n.length} patients with importID from ${t}`);const{default:a}=await xr(async()=>{const{default:c}=await Promise.resolve().then(()=>oM);return{default:c}},void 0,import.meta.url),r=1e3,s=new Set;for(let c=0;c<n.length;c+=r){const d=n.slice(c,c+r).map(f=>f.importID);try{const f=await a.post("/patient/check-duplicates",{importIDs:d,importSource:t});if(f.data&&f.data.success){const m=f.data.data.existingImportIDs||[];m.forEach(h=>s.add(h)),console.log(`Batch ${Math.floor(c/r)+1}: Found ${m.length} duplicates`)}}catch(f){console.warn("Duplicate check batch failed, continuing with other batches:",f.message)}}console.log(`Found ${s.size} total existing patients with matching importIDs`);const o=[],i=[];return e.forEach((c,A)=>{c.importID&&c.importID.trim()!==""&&s.has(c.importID)?i.push({row:A+1,importID:c.importID,originalData:c}):o.push(c)}),console.log(`Duplicate check results: ${o.length} new patients, ${i.length} duplicates`),{newPatients:o,duplicates:i}}catch(a){return console.warn("Duplicate check failed, proceeding with all patients:",a.message),{newPatients:e,duplicates:[]}}},f8e=e=>(console.log("DEBUG validatePatientData - Input data:",JSON.stringify(e,null,2)),!e.name||e.name.trim()===""?"Patient name is required":!e.contact_number||e.contact_number.trim()===""?"Contact number is required":(console.log(`DEBUG validatePatientData - Before modification - Age: ${JSON.stringify(e.age)}, Gender: ${JSON.stringify(e.gender)}`),!e.age&&e.age!=="0"&&(e.age=""),e.gender||(e.gender=""),console.log(`DEBUG validatePatientData - After modification - Age: ${JSON.stringify(e.age)}, Gender: ${JSON.stringify(e.gender)}`),null)),D9=async(e,t)=>{try{if(console.log("saveImportFile called with:",{fileName:e?.name,fileSize:e?.size,fileType:e?.type,emrSystem:t}),!t)throw new Error("EMR system is required");const n=new FormData;n.append("importFile",e,e.name),console.log("FormData contents:");for(let o of n.entries())console.log(o[0],o[1]);const a={emrSystem:t};console.log("Query params:",a);const{default:r}=await xr(async()=>{const{default:o}=await Promise.resolve().then(()=>oM);return{default:o}},void 0,import.meta.url),s=await r.post("/upload/save-import",n,{params:a,headers:{"Content-Type":"multipart/form-data"}});if(s.data&&s.data.success)return{success:!0,filePath:s.data.data.filePath,fileName:s.data.data.fileName};throw new Error(s.data?.error||"Failed to save file")}catch(n){return console.error("Error saving import file:",n),console.error("Error response:",n.response?.data),{success:!1,error:n.response?.data?.error||n.message||"Failed to save import file"}}},U9=e=>{if(e===0)return"0 Bytes";const t=1024,n=["Bytes","KB","MB","GB"],a=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,a)).toFixed(2))+" "+n[a]},R9=e=>{const t=e*.1,n=e*.01,a=t+n+2;return a<60?`~${Math.ceil(a)} seconds`:a<3600?`~${Math.ceil(a/60)} minutes`:`~${Math.ceil(a/3600)} hours`},m8e=Object.freeze(Object.defineProperty({__proto__:null,estimateImportTime:R9,getFileSizeString:U9,processImportFile:P9,readImportFile:F9,saveImportFile:D9,validateFileHeaders:I9,validateImportFile:zE},Symbol.toStringTag,{value:"Module"})),e4={patients:{tableName:"patients",displayName:"Patient Records",columns:[{dbField:"name",exportName:"Name"},{dbField:"age",exportName:"Age"},{dbField:"gender",exportName:"Gender"},{dbField:"contactNumber",exportName:"Contact Number"},{dbField:"email",exportName:"Email Address"},{dbField:"address",exportName:"Address"},{dbField:"note",exportName:"Notes"},{dbField:"importID",exportName:"Import ID"},{dbField:"importSource",exportName:"Import Source"},{dbField:"isImported",exportName:"Is Imported"}]},medicines:{tableName:"medicines",displayName:"Medicines",columns:[{dbField:"productName",exportName:"Product Name"},{dbField:"marketer",exportName:"Marketer"},{dbField:"saltComposition",exportName:"Salt Composition"},{dbField:"productForm",exportName:"Product Form"}]}},h8e=e=>e4[e]?.columns||[],v8e=async e=>{try{const t={success:!1,data:{},summary:{totalRecords:0,dataTypes:[],dateRange:null},filePath:null,error:null};if(!e.dataTypes||!Object.values(e.dataTypes).some(a=>a))throw new Error("No data types selected for export");const n=Object.keys(e.dataTypes).filter(a=>e.dataTypes[a]);console.log("Selected data types for export:",n);for(const a of n){const r=await p8e(a,e);t.data[a]=r,t.summary.totalRecords+=r.length,t.summary.dataTypes.push({type:a,count:r.length,displayName:e4[a]?.displayName||a})}return(e.dateFrom||e.dateTo)&&(t.summary.dateRange={from:e.dateFrom||"Beginning",to:e.dateTo||"Now"}),t.success=!0,t}catch(t){return console.error("Export error:",t),{success:!1,data:{},summary:{totalRecords:0,dataTypes:[],dateRange:null},filePath:null,error:t.message}}},p8e=async(e,t)=>{try{console.log(`Fetching ${e} data for export...`);let n;if(e==="patients"){n=await dt.get("/patient/patients",{params:{dateFrom:t.dateFrom,dateTo:t.dateTo,exportAll:!0}});const a=n.data?.data?.patients||n.data?.patients||[];return console.log(`Found ${a.length} patients for export`),a}else if(e==="medicines")try{n=await dt.get("/medicine/all",{params:{dateFrom:t.dateFrom,dateTo:t.dateTo,exportAll:!0}});const a=n.data?.data?.medicines||n.data?.medicines||[];return console.log(`Found ${a.length} medicines for export`),a}catch(a){return console.warn("Medicine export endpoint not available yet:",a.message),[]}else throw new Error(`Unknown data type: ${e}`)}catch(n){if(console.error(`Error fetching ${e} data:`,n),n.response?.status===404)return console.warn(`API endpoint for ${e} export not implemented yet. Returning empty array.`),[];throw n}},g8e=e=>{try{const t=[];return Object.keys(e.data).forEach(n=>{const a=e.data[n],r=h8e(n);if(a.length===0)return;t.push(`
--- ${e4[n]?.displayName||n} ---`);const s=r.map(o=>o.exportName);t.push(s.join(",")),a.forEach(o=>{const i=r.map(c=>{const A=o[c.dbField];if(A==null)return"";const d=String(A);return d.includes(",")||d.includes('"')||d.includes(`
`)?`"${d.replace(/"/g,'""')}"`:d});t.push(i.join(","))}),t.push("")}),t.join(`
`)}catch(t){throw console.error("Error generating CSV:",t),t}},y8e=()=>{try{const e=["id","name","phone_number","age","gender","date_of_birth","address","email"],t=[{id:"P001",name:"Rajesh Kumar",phone_number:"9876543210",age:"35",gender:"Male",date_of_birth:"1989-05-15",address:"123 Main Street, Mumbai, Maharashtra",email:"rajesh.kumar@example.com"},{id:"P002",name:"Priya Sharma",phone_number:"9876543211",age:"28",gender:"Female",date_of_birth:"1996-08-22",address:"456 Park Avenue, Delhi",email:"priya.sharma@example.com"},{id:"P003",name:"Amit Patel",phone_number:"9876543212",age:"42",gender:"Male",date_of_birth:"1982-03-10",address:"789 MG Road, Bangalore, Karnataka",email:"amit.patel@example.com"},{id:"P004",name:"Sneha Reddy",phone_number:"9876543213",age:"31",gender:"Female",date_of_birth:"1993-11-05",address:"321 Church Street, Hyderabad, Telangana",email:"sneha.reddy@example.com"},{id:"P005",name:"Vikram Singh",phone_number:"9876543214",age:"45",gender:"Male",date_of_birth:"1979-07-18",address:"654 Nehru Road, Pune, Maharashtra",email:"vikram.singh@example.com"},{id:"P006",name:"Anjali Desai",phone_number:"9876543215",age:"29",gender:"Female",date_of_birth:"1995-12-30",address:"987 Gandhi Nagar, Ahmedabad, Gujarat",email:"anjali.desai@example.com"}],n=[];return n.push(e.join(",")),t.forEach(a=>{const r=e.map(s=>{const o=a[s]||"";if(o==null||o==="")return"";const i=String(o);return i.includes(",")||i.includes('"')||i.includes(`
`)?`"${i.replace(/"/g,'""')}"`:i});n.push(r.join(","))}),n.join(`
`)}catch(e){throw console.error("Error generating Evamed template:",e),e}},_8e=async()=>{try{const e=y8e(),t="evamed_template.csv",n=new Blob([e],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const a=await window.electronAPI.showSaveDialog({defaultPath:t,filters:[{name:"CSV Files",extensions:["csv"]}]});return!a.canceled&&a.filePath?(await window.electronAPI.writeFile(a.filePath,e),{success:!0,filePath:a.filePath,filename:t}):{success:!1,error:"Save canceled by user"}}else{const a=document.createElement("a"),r=URL.createObjectURL(n);return a.setAttribute("href",r),a.setAttribute("download",t),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r),{success:!0,filePath:`Downloaded: ${t}`,filename:t}}}catch(e){return console.error("Error downloading Evamed template:",e),{success:!1,error:e.message}}},w8e=async(e,t)=>{try{const n=new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5),r=`evamed_export_${t.dataTypes.map(o=>o.type).join("_")}_${n}.csv`,s=new Blob([e],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const o=await window.electronAPI.showSaveDialog({defaultPath:r,filters:[{name:"CSV Files",extensions:["csv"]}]});return!o.canceled&&o.filePath?(await window.electronAPI.writeFile(o.filePath,e),{success:!0,filePath:o.filePath,filename:r}):{success:!1,error:"Save canceled by user"}}else{const o=document.createElement("a"),i=URL.createObjectURL(s);return o.setAttribute("href",i),o.setAttribute("download",r),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i),{success:!0,filePath:`Downloaded: ${r}`,filename:r}}}catch(n){return console.error("Error saving export file:",n),{success:!1,error:n.message}}},b8e={class:"filter-container pa-3",style:{flex:"1 1 auto","overflow-y":"auto"}},x8e={class:"filter-field mb-3"},C8e={class:"text-caption"},S8e={class:"filter-field mb-3"},E8e={class:"d-flex justify-center mt-4 mb-2"},B8e={key:1,class:"d-flex justify-center"},k8e={__name:"ImportFilter",props:{filters:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},emits:["filter-change","start-import","clear-filters","template-downloaded"],setup(e,{emit:t}){const n=e,a=t,r=M({selectedEMR:n.filters.selectedEMR||"",selectedDataType:n.filters.selectedDataType||"patients",importFile:n.filters.importFile||null}),s=M({isValidating:!1,isValid:null,error:null,fileData:null}),o=M(!1),i=M([...nH]),c=M([...aH,{name:"Appointments",value:"appointments",disabled:!0},{name:"Treatments",value:"treatments",disabled:!0},{name:"Billing Records",value:"billing",disabled:!0}]),A=ee(()=>n.loading),d=ee(()=>r.value.selectedEMR!==""),f=ee(()=>r.value.selectedEMR&&r.value.selectedDataType&&r.value.importFile&&s.value.isValid===!0&&!s.value.isValidating&&!A.value),m=ee(()=>r.value.selectedEMR||r.value.importFile),h=ee(()=>r.value.selectedEMR?s.value.isValidating?"Validating file structure...":s.value.error?`Error: ${s.value.error}`:s.value.isValid&&s.value.fileData?`Valid file: ${s.value.fileData.totalRows} patient records found`:"Supported formats: CSV, Excel":"Please select an EMR system first"),v=async U=>{console.log("File selected, starting validation...",U),s.value={isValidating:!1,isValid:null,error:null,fileData:null};const k=r.value.importFile;console.log("Files from v-model:",k);let S=null;if(k&&(Array.isArray(k)?S=k.length>0?k[0]:null:k instanceof File&&(S=k)),S){console.log("File selected:",S.name,`(${U9(S.size)})`);const E=y(S);if(E.error){console.error("Basic validation failed:",E.error),s.value.error=E.error,s.value.isValid=!1,g();return}if(console.log("Basic validation passed"),r.value.selectedEMR&&vN(r.value.selectedEMR)){console.log("Starting file structure validation for EMR:",r.value.selectedEMR),s.value.isValidating=!0;try{const C=await zE(S,r.value.selectedEMR);console.log("File validation result:",C),s.value.isValid=C.isValid,s.value.error=C.error,s.value.fileData=C.fileData,C.isValid?console.log(` File validated successfully: ${C.fileData.totalRows} rows found`):console.warn(" File validation failed:",C.error)}catch(C){console.error("File validation error:",C),s.value.isValid=!1,s.value.error=`Validation error: ${C.message}`}s.value.isValidating=!1}else console.log("EMR system not selected or not supported, skipping structure validation"),s.value.isValid=!0}else console.log("No file found");g()},y=U=>{if(U.size>52428800)return{error:"File size exceeds 50MB limit"};const S=[".csv",".xlsx",".xls"],E="."+U.name.split(".").pop().toLowerCase();return S.includes(E)?U.size===0?{error:"File is empty"}:{error:null}:{error:"Unsupported file type. Please use CSV or Excel files."}},g=()=>{a("filter-change",{...r.value})},w=()=>{a("start-import",{...r.value})},b=()=>{r.value={selectedEMR:"",selectedDataType:"patients",importFile:null},s.value={isValidating:!1,isValid:null,error:null,fileData:null},a("clear-filters"),g()},x=async()=>{try{o.value=!0;const U=await _8e();U.success?a("template-downloaded",{success:!0,filename:U.filename}):a("template-downloaded",{success:!1,error:U.error})}catch(U){console.error("Error downloading template:",U),a("template-downloaded",{success:!1,error:U.message})}finally{o.value=!1}},T=M({});return We(()=>n.filters,U=>{Object.keys(U).some(S=>U[S]!==T.value[S])&&(r.value={...r.value,...U},T.value={...U})},{immediate:!0}),We(()=>r.value.selectedEMR,async(U,k)=>{if(U!==k){if(s.value={isValidating:!1,isValid:null,error:null,fileData:null},r.value.importFile&&U&&vN(U)){s.value.isValidating=!0;try{const S=await zE(r.value.importFile[0],U);s.value.isValid=S.isValid,s.value.error=S.error,s.value.fileData=S.fileData}catch(S){s.value.isValid=!1,s.value.error=`Validation error: ${S.message}`}s.value.isValidating=!1}g()}}),(U,k)=>{const S=I("v-card-text"),E=I("v-card"),C=I("v-select"),P=I("v-icon"),F=I("v-alert"),N=I("v-chip"),L=I("v-list-item"),ie=I("v-file-input"),le=I("v-btn");return R(),ve(E,{color:"surfaceContainer",flat:"",style:{height:"100%",display:"flex","flex-direction":"column"}},{default:u(()=>[l(E,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(S,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...k[3]||(k[3]=[p("span",{class:"text-body-2 font-weight-medium"},"Import Configuration",-1)])]),_:1})]),_:1}),p("div",b8e,[p("div",x8e,[l(C,{modelValue:r.value.selectedEMR,"onUpdate:modelValue":[k[0]||(k[0]=Q=>r.value.selectedEMR=Q),g],items:i.value,"item-title":"name","item-value":"value",label:"EMR System",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input"},null,8,["modelValue","items"])]),r.value.selectedEMR==="evamed-custom"?(R(),ve(F,{key:0,type:"info",variant:"tonal",class:"mb-3",border:"start",density:"compact"},{prepend:u(()=>[l(P,{size:"small",color:"primary"},{default:u(()=>[...k[4]||(k[4]=[O("mdi-alert-circle",-1)])]),_:1})]),default:u(()=>[p("div",C8e,[k[5]||(k[5]=O(" Important - please ",-1)),p("a",{href:"#",onClick:mn(x,["prevent"]),class:ct(["template-download-link",{"template-download-link-disabled":o.value}])}," click here ",2),k[6]||(k[6]=O(" to download the blank custom template. Add your information and then import below. ",-1))])]),_:1})):_e("",!0),p("div",S8e,[l(C,{modelValue:r.value.selectedDataType,"onUpdate:modelValue":k[1]||(k[1]=Q=>r.value.selectedDataType=Q),items:c.value,"item-title":"name","item-value":"value",label:"Data Type",density:"compact",variant:"outlined",disabled:!0,"hide-details":"auto",class:"filter-input"},{item:u(({props:Q,item:Z})=>[l(L,Fe(Q,{disabled:Z.raw.disabled}),hh({_:2},[Z.raw.disabled?{name:"append",fn:u(()=>[l(N,{size:"x-small",color:"grey"},{default:u(()=>[...k[7]||(k[7]=[O("Coming Soon",-1)])]),_:1})]),key:"0"}:void 0]),1040,["disabled"])]),_:1},8,["modelValue","items"]),k[8]||(k[8]=p("p",{class:"text-caption text-medium-emphasis mt-1 mb-0"},"Currently we support import of patient information only.",-1))]),p("div",{class:ct(["filter-field mb-3",{"opacity-disabled":!d.value}])},[l(ie,{modelValue:r.value.importFile,"onUpdate:modelValue":k[2]||(k[2]=Q=>r.value.importFile=Q),label:"Import File",placeholder:"Select file to import",density:"compact",variant:"outlined",accept:".csv,.xlsx,.xls","show-size":"","hide-details":"auto",class:"filter-input",disabled:!d.value,loading:s.value.isValidating,onChange:v},hh({_:2},[r.value.importFile&&!s.value.isValidating?{name:"append-inner",fn:u(()=>[s.value.isValid===!0?(R(),ve(P,{key:0,color:"success",size:"small"},{default:u(()=>[...k[9]||(k[9]=[O(" mdi-check-circle ",-1)])]),_:1})):s.value.isValid===!1?(R(),ve(P,{key:1,color:"error",size:"small"},{default:u(()=>[...k[10]||(k[10]=[O(" mdi-alert-circle ",-1)])]),_:1})):_e("",!0)]),key:"0"}:void 0]),1032,["modelValue","disabled","loading"]),p("p",{class:ct(["text-caption mt-1 mb-0",{"text-success":s.value.isValid===!0,"text-error":s.value.isValid===!1,"text-medium-emphasis":s.value.isValid===null}])},q(h.value),3)],2),p("div",E8e,[l(le,{color:"primary",size:"small","prepend-icon":"mdi-upload",onClick:w,disabled:!f.value,loading:A.value,class:"filter-button"},{default:u(()=>[...k[11]||(k[11]=[O(" Start Import ",-1)])]),_:1},8,["disabled","loading"])]),m.value?(R(),me("div",B8e,[l(le,{variant:"text",size:"small","prepend-icon":"mdi-filter-remove",onClick:b,class:"filter-button-clear"},{default:u(()=>[...k[12]||(k[12]=[O(" Clear ",-1)])]),_:1})])):_e("",!0)])]),_:1})}}},T8e=Xt(k8e,[["__scopeId","data-v-29791cb3"]]),I8e={class:"filter-container pa-3",style:{flex:"1 1 auto","overflow-y":"auto"}},F8e={class:"filter-section mb-3"},P8e={class:"filter-section mb-3"},D8e={class:"d-flex justify-center mt-4 mb-2"},U8e={key:0,class:"d-flex justify-center"},R8e={__name:"ExportFilter",props:{filters:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},emits:["filter-change","start-export","clear-filters"],setup(e,{emit:t}){const n=e,a=t,r=M({dataTypes:{patients:n.filters.dataTypes?.patients!==void 0?n.filters.dataTypes.patients:!0,medicines:n.filters.dataTypes?.medicines!==void 0?n.filters.dataTypes.medicines:!1},dateFrom:n.filters.dateFrom||"",dateTo:n.filters.dateTo||""}),s=M(n.filters.dataTypes?.patients?"patients":n.filters.dataTypes?.medicines?"medicines":"patients"),o=ee(()=>n.loading),i=ee(()=>new Date().toISOString().split("T")[0]),c=ee(()=>!o.value&&A.value),A=ee(()=>s.value!==null&&s.value!==""),d=ee(()=>r.value.dateFrom||r.value.dateTo||s.value!=="patients"),f=y=>{r.value.dataTypes={patients:!1,medicines:!1},y&&(r.value.dataTypes[y]=!0),m()},m=()=>{a("filter-change",{...r.value})},h=()=>{a("start-export",{...r.value})},v=()=>{s.value="patients",r.value={dataTypes:{patients:!0,medicines:!1},dateFrom:"",dateTo:""},a("clear-filters"),m()};return We(()=>n.filters,y=>{r.value={...r.value,...y},y.dataTypes&&(s.value=y.dataTypes.patients?"patients":y.dataTypes.medicines?"medicines":"patients")},{deep:!0}),f(s.value),(y,g)=>{const w=I("v-card-text"),b=I("v-card"),x=I("v-radio"),T=I("v-radio-group"),U=I("v-text-field"),k=I("v-btn");return R(),ve(b,{color:"surfaceContainer",flat:"",style:{height:"100%",display:"flex","flex-direction":"column"}},{default:u(()=>[l(b,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(w,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...g[3]||(g[3]=[p("span",{class:"text-body-2 font-weight-medium"},"Export Configuration",-1)])]),_:1})]),_:1}),p("div",I8e,[p("div",F8e,[g[4]||(g[4]=p("div",{class:"filter-section-label mb-2"},"Data Type",-1)),l(T,{modelValue:s.value,"onUpdate:modelValue":[g[0]||(g[0]=S=>s.value=S),f],"hide-details":"",density:"compact"},{default:u(()=>[l(x,{value:"patients",label:"Patient Records",density:"compact"}),l(x,{value:"medicines",label:"Medicines",density:"compact"})]),_:1},8,["modelValue"])]),p("div",P8e,[g[5]||(g[5]=p("div",{class:"filter-section-label mb-2"},"Date Range (Optional)",-1)),l(U,{modelValue:r.value.dateFrom,"onUpdate:modelValue":[g[1]||(g[1]=S=>r.value.dateFrom=S),m],label:"From Date",type:"date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input mb-2",max:r.value.dateTo||i.value},null,8,["modelValue","max"]),l(U,{modelValue:r.value.dateTo,"onUpdate:modelValue":[g[2]||(g[2]=S=>r.value.dateTo=S),m],label:"To Date",type:"date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input",min:r.value.dateFrom,max:i.value},null,8,["modelValue","min","max"])]),p("div",D8e,[l(k,{disabled:!c.value,loading:o.value,color:"primary",size:"small","prepend-icon":"mdi-download",onClick:h,class:"filter-button"},{default:u(()=>[...g[6]||(g[6]=[O(" Start Export ",-1)])]),_:1},8,["disabled","loading"])]),d.value?(R(),me("div",U8e,[l(k,{variant:"text",size:"small","prepend-icon":"mdi-filter-remove",onClick:v,class:"filter-button-clear"},{default:u(()=>[...g[7]||(g[7]=[O(" Clear ",-1)])]),_:1})])):_e("",!0)])]),_:1})}}},N8e=Xt(R8e,[["__scopeId","data-v-19977106"]]),V8e={class:"scrollable-content"},L8e={class:"scrollable-content"},M8e={key:1},O8e={class:"text-center"},H8e={class:"mt-4 text-subtitle-1"},$8e={class:"text-center"},Q8e={class:"scrollable-content"},G8e={class:"scrollable-content"},z8e={key:1},K8e={class:"text-center"},W8e={class:"mt-4 text-subtitle-1"},j8e={key:0,class:"mt-4"},q8e={class:"mb-2"},Y8e={class:"mb-2"},X8e={key:0,class:"mb-2"},J8e={key:1},Z8e={class:"text-center"},e6e={class:"mb-4"},t6e={class:"mb-4"},n6e={class:"text-caption"},a6e={key:0,class:"mb-4"},r6e={class:"mt-2"},s6e={key:1},o6e={__name:"data-page",setup(e){const t=M(0);Gh();const n=M(null),a=M(!1),r=M(""),s=M(!1),o=M(""),i=M(!1),c=M(null),A=M(!1),d=M(0),f=M(""),m=M([]),h=M([]),v=M({selectedEMR:"",selectedDataType:"patients",importFile:null}),y=M(!1),g=M(0),w=M(""),b=M([]),x=M(null),T=M(!1),U=M({dataTypes:{patients:!0,medicines:!1},dateFrom:"",dateTo:""}),k=M([{title:"Data Type",key:"type",sortable:!0},{title:"Import Source",key:"importSource",sortable:!0},{title:"Records Processed",key:"processed",sortable:!0},{title:"Records Imported",key:"imported",sortable:!0},{title:"Duplicates Skipped",key:"duplicates",sortable:!0},{title:"With Import ID",key:"withImportID",sortable:!0},{title:"Errors",key:"errors",sortable:!0},{title:"Status",key:"status",sortable:!0}]),S=M([{title:"Date",key:"date",sortable:!0},{title:"Format",key:"format",sortable:!0},{title:"Data Types",key:"dataTypes",sortable:!0},{title:"Records",key:"recordCount",sortable:!0},{title:"Status",key:"status",sortable:!0},{title:"Actions",key:"actions",sortable:!1}]),E=M([{title:"Row",key:"row",sortable:!0,width:"80px"},{title:"Patient Data",key:"patientData",sortable:!1},{title:"Error",key:"error",sortable:!1},{title:"Actions",key:"actions",sortable:!1,width:"100px"}]),C=M([{title:"IMPORT",disabled:!1},{title:"EXPORT",disabled:!1}]),P=se=>{v.value={...v.value,...se}},F=se=>{U.value={...U.value,...se}},N=()=>{v.value={selectedEMR:"",selectedDataType:"patients",importFile:null}},L=se=>{se.success?(a.value=!0,r.value=`Evamed template downloaded successfully: ${se.filename}`):(s.value=!0,o.value=`Failed to download template: ${se.error}`)},ie=()=>{U.value={dataTypes:{patients:!0,medicines:!1},dateFrom:"",dateTo:""}},le=async se=>{try{if(A.value=!0,d.value=0,f.value="Initializing import...",m.value=[],h.value=[],console.log("Starting import with filters:",se),!se.importFile)throw new Error("No file selected for import");if(!se.selectedEMR)throw new Error("No EMR system selected");let G;if(Array.isArray(se.importFile))G=se.importFile[0];else if(se.importFile instanceof File)G=se.importFile;else throw new Error("Invalid file format");if(!G)throw new Error("No valid file found");const D=se.selectedEMR;if(console.log("Processing file:",G.name,"for EMR:",D),console.log("Full filterData:",se),!D||D.trim()==="")throw new Error("EMR system is required and cannot be empty");f.value="Saving import file...";const j=await D9(G,D);if(!j.success)throw new Error(`Failed to save import file: ${j.error}`);d.value=10,console.log(`Import file saved: ${j.fileName}`),f.value="Reading and validating file...";const{readImportFile:ne,validateFileHeaders:H}=await xr(async()=>{const{readImportFile:de,validateFileHeaders:Ae}=await Promise.resolve().then(()=>m8e);return{readImportFile:de,validateFileHeaders:Ae}},void 0,import.meta.url);let te;try{te=await ne(G,D)}catch(de){throw new Error(`Failed to read file: ${de.message}`)}const Y=H(te.headers,D);if(!Y.isValid)throw new Error(`File validation failed: ${Y.error}`);d.value=20;const K=R9(te.totalRows);f.value=`Processing ${te.totalRows} patient records (${K})...`;const X=await P9(te,D,de=>{if(de.phase==="mapping")d.value=20+de.current/de.total*30,f.value=`Mapping data: ${de.current} of ${de.total}`,de.currentPatient&&(f.value+=` (${de.currentPatient})`);else if(de.phase==="duplicate-check")d.value=50+de.current/de.total*10,f.value=de.message||"Checking for existing patients...";else if(de.phase==="bulk-insert")d.value=60+de.current/de.total*30,f.value=de.message||"Bulk inserting patients...";else if(de.phase==="complete"&&(d.value=90+de.current/de.total*10,f.value=de.message||"Import completed!",de.successful>0||de.failed>0||de.duplicates>0)){const Ae=[];de.successful>0&&Ae.push(`Success: ${de.successful}`),de.failed>0&&Ae.push(`Failed: ${de.failed}`),de.duplicates>0&&Ae.push(`Duplicates: ${de.duplicates}`),f.value+=` - ${Ae.join(", ")}`}de.lastError&&de.failed>0&&console.warn("Import error:",de.lastError)});h.value=X.errors||[];const ae=X.patients?X.patients.filter(de=>de.importID&&de.importID.trim()!=="").length:0;d.value=100,A.value=!1;const oe=D==="practo"?"Practo":D==="ekacare"?"Eka.Care":D==="healthplix"?"Healthplix":D==="evamed-custom"?"Evamed Custom Template":D==="tatvacare"?"TatvaCare":D;m.value=[{type:"Patient Records",importSource:oe,processed:X.total,imported:X.successful,duplicates:X.duplicates||0,withImportID:ae,errors:X.failed,status:X.failed===0?"Success":"Partial Success"}];const W=X.duplicates||0;if(X.failed===0&&W===0)f.value=`${oe} import completed successfully! ${X.successful} patients imported.`,a.value=!0,r.value=`Successfully imported ${X.successful} patients from ${oe}!`;else if(X.failed===0&&W>0)f.value=`${oe} import completed successfully! ${X.successful} patients imported, ${W} duplicates skipped.`,a.value=!0,r.value=`Successfully imported ${X.successful} patients from ${oe} (${W} duplicates skipped)!`;else{const de=W>0?`, ${W} duplicates skipped`:"";f.value=`${oe} import completed with ${X.failed} errors. ${X.successful} patients imported successfully${de}.`,s.value=!0,o.value=`${oe} import completed with ${X.failed} errors out of ${X.total} records${de}.`}console.log("Import Results:",X),X.errors.length>0&&console.log("Import Errors:",X.errors)}catch(G){console.error("Import error:",G),A.value=!1,d.value=0,s.value=!0,o.value="Import failed: "+G.message,f.value=`Import failed: ${G.message}`}},Q=async se=>{try{y.value=!0,g.value=0,w.value="Preparing export...",x.value=null,T.value=!1,console.log("Starting export with filters:",se),g.value=10,w.value="Collecting data...";const G=await v8e(se);if(!G.success)throw new Error(G.error||"Failed to collect export data");g.value=50,w.value=`Found ${G.summary.totalRecords} records. Formatting data...`;const D=g8e(G);g.value=80,w.value="Preparing file for download...";const j=await w8e(D,G.summary);if(!j.success)throw new Error(j.error||"Failed to save export file");g.value=100,w.value="Export completed successfully!",x.value={...G.summary,filePath:j.filePath,filename:j.filename},T.value=!0;const ne={id:Date.now().toString(),date:new Date().toLocaleDateString(),format:"CSV",dataTypes:G.summary.dataTypes.map(H=>H.displayName).join(", "),recordCount:G.summary.totalRecords,status:"Completed",filePath:j.filePath,filename:j.filename};b.value.unshift(ne),a.value=!0,r.value=`Export completed! ${G.summary.totalRecords} records exported.`}catch(G){console.error("Export error:",G),y.value=!1,g.value=0,w.value="",T.value=!1,s.value=!0,o.value="Export failed: "+G.message}finally{setTimeout(()=>{T.value&&(y.value=!1)},1500)}},Z=se=>{console.log("Opening export:",se),window.require.electronAPI&&se.filePath&&window.require.electronAPI.showItemInFolder(se.filePath),a.value=!0,r.value=`Opened ${se.format} export location`},ce=se=>{if(!se||!Array.isArray(se))return"No data available";const G=se[0]||"Unknown",D=se[3]||se[1]||"No contact";return`${G} (${D})`},J=se=>{let G=null;se.mappedData&&(G={source:se.mappedData.importSource||"Unknown",importID:se.mappedData.importID||null}),c.value={row:se.row,patientData:se.patientData,error:se.error,formattedData:ce(se.patientData),importInfo:G},i.value=!0};return cn(()=>{try{console.log("Data page initialized")}catch(se){console.error("Error setting up data page:",se),n.value="Failed to initialize data page"}}),(se,G)=>{const D=I("v-alert"),j=I("v-tab"),ne=I("v-tabs"),H=I("v-card"),te=I("v-col"),Y=I("v-row"),K=I("v-card-text"),X=I("v-progress-circular"),ae=I("v-data-table"),oe=I("v-icon"),W=I("v-expansion-panel-title"),de=I("v-chip"),Ae=I("v-btn"),Ce=I("v-expansion-panel-text"),De=I("v-expansion-panel"),xe=I("v-expansion-panels"),ke=I("v-window-item"),Ee=I("v-card-title"),ye=I("v-window"),we=I("v-snackbar"),at=I("v-spacer"),Je=I("v-card-actions"),rt=I("v-dialog"),it=I("v-main");return R(),ve(it,null,{default:u(()=>[l(xn,{feature:"data"},{default:u(()=>[n.value?(R(),ve(D,{key:0,type:"error",dismissible:"","onClick:close":G[0]||(G[0]=Ie=>n.value=null),class:"ma-3"},{default:u(()=>[O(q(n.value),1)]),_:1})):_e("",!0),l(Y,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[l(te,{cols:"12"},{default:u(()=>[l(H,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center"},{default:u(()=>[l(ne,{modelValue:t.value,"onUpdate:modelValue":G[1]||(G[1]=Ie=>t.value=Ie),color:"primary","align-tabs":"start",class:"w-100"},{default:u(()=>[(R(!0),me(ze,null,Wt(C.value,(Ie,Ve)=>(R(),ve(j,{key:Ve,value:Ve,disabled:Ie.disabled},{default:u(()=>[O(q(Ie.title),1)]),_:2},1032,["value","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(ye,{modelValue:t.value,"onUpdate:modelValue":G[2]||(G[2]=Ie=>t.value=Ie),class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[l(ke,{value:0,style:{height:"100%"}},{default:u(()=>[l(xn,{permission:"data.import"},{default:u(()=>[l(Y,{"aria-label":"import row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[l(te,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[p("div",V8e,[l(T8e,{filters:v.value,loading:A.value,onFilterChange:P,onStartImport:le,onClearFilters:N,onTemplateDownloaded:L},null,8,["filters","loading"])])]),_:1}),l(te,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[p("div",L8e,[l(H,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[l(H,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(K,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[m.value.length>0?(R(),me(ze,{key:0},[p("strong",null,q(m.value[0]?.imported||0),1),G[7]||(G[7]=O(" records imported ",-1))],64)):(R(),me("strong",M8e,"Import Data"))]),_:1})]),_:1}),A.value?(R(),ve(Y,{key:0,"no-gutters":""},{default:u(()=>[l(te,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[p("div",O8e,[l(X,{indeterminate:"",color:"primary",size:"64"}),p("div",H8e,q(f.value||"Processing import..."),1)])]),_:1})]),_:1})):m.value.length>0?(R(),ve(Y,{key:1,"no-gutters":""},{default:u(()=>[l(te,{cols:"12",class:"scroll-element mt-2",style:{"padding-bottom":"20px"}},{default:u(()=>[l(ae,{headers:k.value,items:m.value,class:"elevation-1 ma-2",density:"comfortable"},null,8,["headers","items"]),h.value.length>0?(R(),ve(xe,{key:0,class:"ma-2"},{default:u(()=>[l(De,null,{default:u(()=>[l(W,null,{default:u(()=>[l(oe,{color:"error",class:"mr-2"},{default:u(()=>[...G[8]||(G[8]=[O("mdi-alert-circle",-1)])]),_:1}),O(" Failed Records ("+q(h.value.length)+") ",1)]),_:1}),l(Ce,null,{default:u(()=>[l(ae,{headers:E.value,items:h.value,class:"elevation-1",density:"comfortable","items-per-page":10,"items-per-page-options":[5,10,25,50]},{"item.patientData":u(({item:Ie})=>[l(de,{size:"small",color:"grey",variant:"outlined"},{default:u(()=>[O(q(ce(Ie.patientData)),1)]),_:2},1024)]),"item.error":u(({item:Ie})=>[l(de,{size:"small",color:"error",variant:"outlined"},{default:u(()=>[O(q(Ie.error),1)]),_:2},1024)]),"item.actions":u(({item:Ie})=>[l(Ae,{size:"small",color:"primary",variant:"text",onClick:Ve=>J(Ie)},{default:u(()=>[l(oe,{size:"small"},{default:u(()=>[...G[9]||(G[9]=[O("mdi-eye",-1)])]),_:1}),G[10]||(G[10]=O(" Details ",-1))]),_:1},8,["onClick"])]),_:2},1032,["headers","items"])]),_:1})]),_:1})]),_:1})):_e("",!0)]),_:1})]),_:1})):(R(),ve(Y,{key:2,"no-gutters":"",style:{height:"calc(100% - 60px)"}},{default:u(()=>[l(te,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%"}},{default:u(()=>[p("div",$8e,[l(oe,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...G[11]||(G[11]=[O("mdi-cloud-upload",-1)])]),_:1}),G[12]||(G[12]=p("div",{class:"text-h6 mb-2"},"Import Data",-1)),G[13]||(G[13]=p("div",{class:"text-body-2 text-medium-emphasis"},"Select EMR system and file to begin import process",-1))])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1}),l(ke,{value:1,style:{height:"100%"}},{default:u(()=>[l(xn,{permission:"data.export"},{default:u(()=>[l(Y,{"aria-label":"export row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[l(te,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[p("div",Q8e,[l(N8e,{filters:U.value,loading:y.value,onFilterChange:F,onStartExport:Q,onClearFilters:ie},null,8,["filters","loading"])])]),_:1}),l(te,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[p("div",G8e,[l(H,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[l(H,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(K,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[b.value.length>0?(R(),me(ze,{key:0},[p("strong",null,q(b.value.length),1),O(" export"+q(b.value.length!==1?"s":"")+" available ",1)],64)):(R(),me("strong",z8e,"Export Data"))]),_:1})]),_:1}),y.value?(R(),ve(Y,{key:0,"no-gutters":""},{default:u(()=>[l(te,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[p("div",K8e,[l(X,{"model-value":g.value,color:"primary",size:"64",width:"6"},{default:u(()=>[O(q(g.value)+"% ",1)]),_:1},8,["model-value"]),p("div",W8e,q(w.value||"Processing export..."),1),x.value?(R(),me("div",j8e,[l(H,{class:"mx-auto","max-width":"300",outlined:""},{default:u(()=>[l(Ee,{class:"text-h6"},{default:u(()=>[...G[14]||(G[14]=[O("Export Summary",-1)])]),_:1}),l(K,null,{default:u(()=>[p("div",q8e,[G[15]||(G[15]=p("strong",null,"Total Records:",-1)),O(" "+q(x.value.totalRecords),1)]),p("div",Y8e,[G[16]||(G[16]=p("strong",null,"Data Types:",-1)),(R(!0),me(ze,null,Wt(x.value.dataTypes,Ie=>(R(),me("div",{key:Ie.type,class:"ml-2"},q(Ie.displayName)+": "+q(Ie.count)+" records ",1))),128))]),x.value.dateRange?(R(),me("div",X8e,[G[17]||(G[17]=p("strong",null,"Date Range:",-1)),O(" "+q(x.value.dateRange.from)+" - "+q(x.value.dateRange.to),1)])):_e("",!0),T.value&&x.value.filename?(R(),me("div",J8e,[G[18]||(G[18]=p("strong",null,"File:",-1)),O(" "+q(x.value.filename),1)])):_e("",!0)]),_:1})]),_:1})])):_e("",!0)])]),_:1})]),_:1})):b.value.length>0?(R(),ve(Y,{key:1,"no-gutters":""},{default:u(()=>[l(te,{cols:"12",class:"scroll-element mt-2",style:{"padding-bottom":"20px"}},{default:u(()=>[l(ae,{headers:S.value,items:b.value,class:"elevation-1 ma-2",density:"comfortable"},{"item.actions":u(({item:Ie})=>[l(Ae,{size:"small",color:"primary",variant:"text",onClick:Ve=>Z(Ie)},{default:u(()=>[l(oe,null,{default:u(()=>[...G[19]||(G[19]=[O("mdi-download",-1)])]),_:1}),G[20]||(G[20]=O(" Download ",-1))]),_:1},8,["onClick"])]),_:2},1032,["headers","items"])]),_:1})]),_:1})):(R(),ve(Y,{key:2,"no-gutters":"",style:{height:"calc(100% - 60px)"}},{default:u(()=>[l(te,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%"}},{default:u(()=>[p("div",Z8e,[l(oe,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...G[21]||(G[21]=[O("mdi-download",-1)])]),_:1}),G[22]||(G[22]=p("div",{class:"text-h6 mb-2"},"Export Data",-1)),G[23]||(G[23]=p("div",{class:"text-body-2 text-medium-emphasis"},"Configure export settings and start export process",-1))])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(we,{modelValue:a.value,"onUpdate:modelValue":G[3]||(G[3]=Ie=>a.value=Ie),class:"elevation-24",color:"success"},{default:u(()=>[O(q(r.value),1)]),_:1},8,["modelValue"]),l(we,{modelValue:s.value,"onUpdate:modelValue":G[4]||(G[4]=Ie=>s.value=Ie),class:"elevation-24",color:"error"},{default:u(()=>[O(q(o.value),1)]),_:1},8,["modelValue"]),l(rt,{modelValue:i.value,"onUpdate:modelValue":G[6]||(G[6]=Ie=>i.value=Ie),"max-width":"600px"},{default:u(()=>[l(H,null,{default:u(()=>[l(Ee,{class:"text-h6"},{default:u(()=>[l(oe,{color:"error",class:"mr-2"},{default:u(()=>[...G[24]||(G[24]=[O("mdi-alert-circle",-1)])]),_:1}),O(" Error Details - Row "+q(c.value?.row),1)]),_:1}),l(K,null,{default:u(()=>[l(Y,null,{default:u(()=>[l(te,{cols:"12"},{default:u(()=>[p("div",e6e,[G[25]||(G[25]=p("strong",null,"Error Message:",-1)),l(de,{color:"error",variant:"outlined",class:"ml-2"},{default:u(()=>[O(q(c.value?.error),1)]),_:1})]),p("div",t6e,[G[26]||(G[26]=p("strong",null,"Patient Data:",-1)),l(H,{variant:"outlined",class:"mt-2 pa-3"},{default:u(()=>[p("pre",n6e,q(JSON.stringify(c.value?.patientData,null,2)),1)]),_:1})]),c.value?.importInfo?(R(),me("div",a6e,[G[28]||(G[28]=p("strong",null,"Import Information:",-1)),p("div",r6e,[l(de,{color:"info",variant:"outlined",class:"mr-2"},{default:u(()=>[O(" Source: "+q(c.value.importInfo.source),1)]),_:1}),c.value.importInfo.importID?(R(),ve(de,{key:0,color:"secondary",variant:"outlined"},{default:u(()=>[O(" ID: "+q(c.value.importInfo.importID),1)]),_:1})):(R(),ve(de,{key:1,color:"warning",variant:"outlined"},{default:u(()=>[...G[27]||(G[27]=[O(" No Import ID ",-1)])]),_:1}))])])):_e("",!0),c.value?.formattedData?(R(),me("div",s6e,[G[29]||(G[29]=p("strong",null,"Formatted Data:",-1)),l(de,{color:"primary",variant:"outlined",class:"ml-2"},{default:u(()=>[O(q(c.value.formattedData),1)]),_:1})])):_e("",!0)]),_:1})]),_:1})]),_:1}),l(Je,null,{default:u(()=>[l(at),l(Ae,{color:"primary",onClick:G[5]||(G[5]=Ie=>i.value=!1)},{default:u(()=>[...G[30]||(G[30]=[O(" Close ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}},i6e=Xt(o6e,[["__scopeId","data-v-6767bc22"]]),l6e={class:"filter-container pa-3",style:{flex:"1 1 auto","overflow-y":"auto"}},u6e={class:"filter-field mb-3"},c6e={class:"filter-field mb-3"},d6e={key:0,class:"text-caption"},A6e={class:"filter-section mb-3"},f6e={class:"filter-section mb-3"},m6e={class:"d-flex justify-center mt-4 mb-2"},h6e={class:"d-flex justify-center"},v6e={__name:"ResearchFilter",props:{modelValueDiagnosis:{type:String,default:null},modelValueMedicine:{type:String,default:null},modelValueDateFrom:{type:String,default:""},modelValueDateTo:{type:String,default:""},modelValuePatientName:{type:String,default:""},modelValueGender:{type:String,default:""},modelValueAgeGreaterThan:{type:[String,Number],default:""},modelValueAgeLessThan:{type:[String,Number],default:""},maxDate:{type:String,default:()=>Dn()},isSearching:{type:Boolean,default:!1}},emits:["update:modelValueDiagnosis","update:modelValueMedicine","update:modelValueDateFrom","update:modelValueDateTo","update:modelValuePatientName","update:modelValueGender","update:modelValueAgeGreaterThan","update:modelValueAgeLessThan","filter-change","search","clear-filters"],setup(e,{emit:t}){const n=e,a=t,r=M(n.modelValueDiagnosis),s=M(n.modelValueMedicine),o=M(n.modelValueDateFrom),i=M(n.modelValueDateTo),c=M(n.modelValuePatientName),A=M(n.modelValueGender),d=M(n.modelValueAgeGreaterThan),f=M(n.modelValueAgeLessThan),m=M(""),h=M(""),v=M(""),y=M(""),g=M(""),w=M(""),b=M(""),x=M(""),T=M(""),U=M([]),k=M(!1),S=[{title:"Male",value:"Male"},{title:"Female",value:"Female"}],E=ee(()=>!!(m.value||h.value||v.value||y.value||g.value||w.value||b.value||x.value));We(()=>n.modelValueDiagnosis,ce=>{r.value=ce}),We(()=>n.modelValueMedicine,ce=>{s.value=ce}),We(()=>n.modelValueDateFrom,ce=>{o.value=ce}),We(()=>n.modelValueDateTo,ce=>{i.value=ce}),We(()=>n.modelValuePatientName,ce=>{c.value=ce}),We(()=>n.modelValueGender,ce=>{A.value=ce}),We(()=>n.modelValueAgeGreaterThan,ce=>{d.value=ce}),We(()=>n.modelValueAgeLessThan,ce=>{f.value=ce}),We(r,ce=>{a("update:modelValueDiagnosis",ce),P()}),We(s,ce=>{a("update:modelValueMedicine",ce),P()}),We(o,ce=>{a("update:modelValueDateFrom",ce),L(),ie(),P()}),We(i,ce=>{a("update:modelValueDateTo",ce),ie(),L(),P()}),We(c,ce=>{a("update:modelValuePatientName",ce),P()}),We(A,ce=>{a("update:modelValueGender",ce),P()}),We(d,ce=>{a("update:modelValueAgeGreaterThan",ce),le(),P()}),We(f,ce=>{a("update:modelValueAgeLessThan",ce),le(),P()});let C=null;const P=()=>{const ce=typeof s.value=="object"&&s.value!==null?s.value.productName:s.value;a("filter-change",{diagnosis:r.value,medicine:ce,dateFrom:o.value,dateTo:i.value,patientName:c.value,gender:A.value,ageGreaterThan:d.value,ageLessThan:f.value,hasErrors:E.value})},F=()=>{if(!E.value){const ce={diagnosis:r.value,medicine:s.value,dateFrom:o.value,dateTo:i.value,patientName:c.value,gender:A.value,ageGreaterThan:d.value,ageLessThan:f.value};console.log(" ResearchFilter: Starting search with filters"),a("search",ce)}},N=()=>{r.value=null,s.value=null,o.value="",i.value="",c.value="",A.value="",d.value="",f.value="",T.value="",m.value="",h.value="",v.value="",y.value="",g.value="",w.value="",b.value="",x.value="",a("clear-filters")},L=()=>{v.value="",o.value&&i.value&&o.value>i.value&&(v.value="From date cannot be after to date")},ie=()=>{y.value="",o.value&&i.value&&i.value<o.value&&(y.value="To date cannot be before from date")},le=()=>{b.value="",x.value="",d.value&&(isNaN(d.value)||d.value<0)&&(b.value="Please enter a valid age"),f.value&&(isNaN(f.value)||f.value<0)&&(x.value="Please enter a valid age"),d.value&&f.value&&parseInt(d.value)>=parseInt(f.value)&&(b.value='Must be less than "Age less than"',x.value='Must be greater than "Age greater than"')},Q=ce=>{clearTimeout(C),C=setTimeout(()=>{Z(ce)},300)},Z=async ce=>{k.value=!0;try{const J=await _T(ce);if(J.error)U.value=[];else{const se=J.data||[];U.value=se.filter(G=>G.isLocal===!0)}}catch(J){console.error("Error fetching medicines:",J),U.value=[]}finally{k.value=!1}};return(ce,J)=>{const se=I("v-card-text"),G=I("v-card"),D=I("v-text-field"),j=I("v-icon"),ne=I("v-list-item"),H=I("v-list-item-title"),te=I("v-autocomplete"),Y=I("v-col"),K=I("v-row"),X=I("v-select"),ae=I("v-btn");return R(),ve(G,{color:"surfaceContainer",flat:"",style:{height:"100%",display:"flex","flex-direction":"column"}},{default:u(()=>[l(G,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(se,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...J[10]||(J[10]=[p("span",{class:"text-body-2 font-weight-medium"},"Research Filters",-1)])]),_:1})]),_:1}),p("div",l6e,[p("div",u6e,[l(D,{modelValue:r.value,"onUpdate:modelValue":J[0]||(J[0]=oe=>r.value=oe),label:"Diagnosis",placeholder:"Enter diagnosis name...",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":m.value,maxlength:"100"},null,8,["modelValue","error-messages"])]),p("div",c6e,[l(te,{modelValue:s.value,"onUpdate:modelValue":J[1]||(J[1]=oe=>s.value=oe),search:T.value,"onUpdate:search":[J[2]||(J[2]=oe=>T.value=oe),Q],items:U.value,loading:k.value,"item-title":"productName","item-value":"item","return-object":"",label:"Medicine",placeholder:"Search for medicine...",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":h.value},{item:u(({props:oe,item:W})=>[l(ne,Fe(oe,{title:W.raw.productName}),{subtitle:u(()=>[W.raw.marketer?(R(),me("span",d6e,q(W.raw.marketer),1)):_e("",!0)]),append:u(()=>[l(j,null,{default:u(()=>[...J[11]||(J[11]=[p("img",{src:Md,alt:"Saved Medicine"},null,-1)])]),_:1})]),_:2},1040,["title"])]),"no-data":u(()=>[T.value&&T.value.length>=3?(R(),ve(ne,{key:0},{default:u(()=>[l(H,null,{default:u(()=>[O('No medicines found matching "'+q(T.value)+'"',1)]),_:1})]),_:1})):(R(),ve(ne,{key:1},{default:u(()=>[l(H,null,{default:u(()=>[...J[12]||(J[12]=[O("Type at least 3 characters to search",-1)])]),_:1})]),_:1}))]),_:1},8,["modelValue","search","items","loading","error-messages"])]),p("div",A6e,[J[13]||(J[13]=p("div",{class:"filter-section-label mb-2"},"Date Range",-1)),l(K,{dense:""},{default:u(()=>[l(Y,{cols:"6"},{default:u(()=>[l(D,{modelValue:o.value,"onUpdate:modelValue":J[3]||(J[3]=oe=>o.value=oe),type:"date",label:"From Date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input date-input",max:i.value||e.maxDate,"error-messages":v.value,onInput:L,onClick:J[4]||(J[4]=oe=>oe.target.showPicker&&oe.target.showPicker())},null,8,["modelValue","max","error-messages"])]),_:1}),l(Y,{cols:"6"},{default:u(()=>[l(D,{modelValue:i.value,"onUpdate:modelValue":J[5]||(J[5]=oe=>i.value=oe),type:"date",label:"To Date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input date-input",min:o.value,max:e.maxDate,"error-messages":y.value,onInput:ie,onClick:J[6]||(J[6]=oe=>oe.target.showPicker&&oe.target.showPicker())},null,8,["modelValue","min","max","error-messages"])]),_:1})]),_:1})]),p("div",f6e,[J[14]||(J[14]=p("div",{class:"filter-section-label mb-2"},"Demographics",-1)),l(X,{modelValue:A.value,"onUpdate:modelValue":J[7]||(J[7]=oe=>A.value=oe),items:S,label:"Gender",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input mb-2","error-messages":w.value},null,8,["modelValue","error-messages"]),l(K,{dense:""},{default:u(()=>[l(Y,{cols:"6"},{default:u(()=>[l(D,{modelValue:d.value,"onUpdate:modelValue":J[8]||(J[8]=oe=>d.value=oe),type:"number",label:"Age >",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":b.value,min:"0",max:"150"},null,8,["modelValue","error-messages"])]),_:1}),l(Y,{cols:"6"},{default:u(()=>[l(D,{modelValue:f.value,"onUpdate:modelValue":J[9]||(J[9]=oe=>f.value=oe),type:"number",label:"Age <",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":x.value,min:"0",max:"150"},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),p("div",m6e,[l(ae,{color:"primary",size:"small","prepend-icon":"mdi-database-search",onClick:F,loading:e.isSearching,disabled:E.value,class:"filter-button"},{default:u(()=>[...J[15]||(J[15]=[O(" Search ",-1)])]),_:1},8,["loading","disabled"])]),p("div",h6e,[l(ae,{variant:"text",size:"small","prepend-icon":"mdi-filter-remove",onClick:N,class:"filter-button-clear"},{default:u(()=>[...J[16]||(J[16]=[O(" Clear ",-1)])]),_:1})])])]),_:1})}}},p6e=Xt(v6e,[["__scopeId","data-v-1e00cd36"]]),g6e={class:"filter-cards-container px-2 pb-2",style:{flex:"1 1 auto"}},y6e={class:"d-flex justify-center mt-2 mb-2"},_6e={class:"d-flex justify-center mt-2"},w6e={__name:"ProcedureResearchFilter",props:{modelValueProcedureName:{type:String,default:""},modelValueDateFrom:{type:String,default:""},modelValueDateTo:{type:String,default:""},modelValueGender:{type:String,default:""},modelValueAgeGreaterThan:{type:[String,Number],default:""},modelValueAgeLessThan:{type:[String,Number],default:""},maxDate:{type:String,default:()=>Dn()},isSearching:{type:Boolean,default:!1}},emits:["update:modelValueProcedureName","update:modelValueDateFrom","update:modelValueDateTo","update:modelValueGender","update:modelValueAgeGreaterThan","update:modelValueAgeLessThan","filter-change","search","clear-filters"],setup(e,{emit:t}){const n=e,a=t,r=M(n.modelValueProcedureName||""),s=M(n.modelValueDateFrom||""),o=M(n.modelValueDateTo||""),i=M(n.modelValueGender||""),c=M(n.modelValueAgeGreaterThan||""),A=M(n.modelValueAgeLessThan||""),d=M(""),f=M(""),m=M(""),h=M(""),v=M(""),y=M(""),g=["Male","Female"],w=ee(()=>!!(d.value||f.value||m.value||h.value||v.value||y.value)),b=()=>{f.value="",s.value&&o.value&&s.value>o.value&&(f.value="From date cannot be after To date"),s.value&&n.maxDate&&s.value>n.maxDate&&(f.value="From date cannot be in the future")},x=()=>{m.value="",s.value&&o.value&&o.value<s.value&&(m.value="To date cannot be before From date"),o.value&&n.maxDate&&o.value>n.maxDate&&(m.value="To date cannot be in the future")},T=()=>{v.value="",y.value="";const E=parseInt(c.value),C=parseInt(A.value);c.value&&(isNaN(E)||E<0||E>150)&&(v.value="Age must be between 0 and 150"),A.value&&(isNaN(C)||C<0||C>150)&&(y.value="Age must be between 0 and 150"),c.value&&A.value&&E>=C&&(v.value='Must be less than "Age Less Than"',y.value='Must be greater than "Age Greater Than"')},U=Hn.debounce(()=>{const E={procedureName:r.value,dateFrom:s.value,dateTo:o.value,gender:i.value,ageGreaterThan:c.value,ageLessThan:A.value};a("filter-change",E)},300);We(()=>n.modelValueProcedureName,E=>{E!==r.value&&(r.value=E||"")}),We(()=>n.modelValueDateFrom,E=>{E!==s.value&&(s.value=E||"")}),We(()=>n.modelValueDateTo,E=>{E!==o.value&&(o.value=E||"")}),We(()=>n.modelValueGender,E=>{E!==i.value&&(i.value=E||"")}),We(()=>n.modelValueAgeGreaterThan,E=>{E!==c.value&&(c.value=E||"")}),We(()=>n.modelValueAgeLessThan,E=>{E!==A.value&&(A.value=E||"")}),We(r,E=>{a("update:modelValueProcedureName",E),U()}),We(s,E=>{a("update:modelValueDateFrom",E),b(),x(),U()}),We(o,E=>{a("update:modelValueDateTo",E),x(),b(),U()}),We(i,E=>{a("update:modelValueGender",E),U()}),We(c,E=>{a("update:modelValueAgeGreaterThan",E),T(),U()}),We(A,E=>{a("update:modelValueAgeLessThan",E),T(),U()});const k=async()=>{if(b(),x(),T(),await bn(),w.value){console.log(" Cannot search: validation errors present");return}const E={procedureName:r.value,dateFrom:s.value,dateTo:o.value,gender:i.value,ageGreaterThan:c.value,ageLessThan:A.value};console.log(" Procedure research search triggered with filters:",E),a("search",E)},S=()=>{r.value="",s.value="",o.value="",i.value="",c.value="",A.value="",d.value="",f.value="",m.value="",h.value="",v.value="",y.value="",a("clear-filters")};return(E,C)=>{const P=I("v-icon"),F=I("v-card-title"),N=I("v-text-field"),L=I("v-card-text"),ie=I("v-card"),le=I("v-col"),Q=I("v-row"),Z=I("v-select"),ce=I("v-btn");return R(),ve(ie,{color:"surfaceContainer",flat:"",style:{height:"100%",display:"flex","flex-direction":"column"}},{default:u(()=>[p("div",g6e,[l(ie,{class:"form-section-card card-status-default mx-2 mt-1 mb-3 pa-3",elevation:"2"},{default:u(()=>[l(F,{class:"pa-0 pb-2"},{default:u(()=>[l(P,{class:"mr-2",size:"small",color:"primary"},{default:u(()=>[...C[8]||(C[8]=[O("mdi-medical-bag",-1)])]),_:1}),C[9]||(C[9]=p("span",{class:"text-subtitle-1 font-weight-medium"},"Procedure Name",-1))]),_:1}),l(L,{class:"pa-0"},{default:u(()=>[l(N,{modelValue:r.value,"onUpdate:modelValue":C[0]||(C[0]=J=>r.value=J),placeholder:"Enter procedure name...",density:"comfortable",variant:"outlined",clearable:"","hide-details":"auto","prepend-inner-icon":"mdi-medical-bag",class:"input-hover","error-messages":d.value,maxlength:"100"},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),l(ie,{class:"form-section-card card-status-default ma-2 mb-3 pa-3",elevation:"2"},{default:u(()=>[l(F,{class:"pa-0 pb-2"},{default:u(()=>[l(P,{class:"mr-2",size:"small",color:"primary"},{default:u(()=>[...C[10]||(C[10]=[O("mdi-calendar-range",-1)])]),_:1}),C[11]||(C[11]=p("span",{class:"text-subtitle-1 font-weight-medium"},"Date Range",-1))]),_:1}),l(L,{class:"pa-0"},{default:u(()=>[l(Q,{dense:""},{default:u(()=>[l(le,{cols:"6"},{default:u(()=>[l(N,{modelValue:s.value,"onUpdate:modelValue":C[1]||(C[1]=J=>s.value=J),type:"date",label:"From Date",density:"comfortable",variant:"outlined",clearable:"","hide-details":"auto","prepend-inner-icon":"mdi-calendar-start",class:"input-hover date-input",max:o.value||e.maxDate,"error-messages":f.value,onInput:b,onClick:C[2]||(C[2]=J=>J.target.showPicker&&J.target.showPicker())},null,8,["modelValue","max","error-messages"])]),_:1}),l(le,{cols:"6"},{default:u(()=>[l(N,{modelValue:o.value,"onUpdate:modelValue":C[3]||(C[3]=J=>o.value=J),type:"date",label:"To Date",density:"comfortable",variant:"outlined",clearable:"","hide-details":"auto","prepend-inner-icon":"mdi-calendar-end",class:"input-hover date-input",min:s.value,max:e.maxDate,"error-messages":m.value,onInput:x,onClick:C[4]||(C[4]=J=>J.target.showPicker&&J.target.showPicker())},null,8,["modelValue","min","max","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1}),l(ie,{class:"form-section-card card-status-default ma-2 mb-3 pa-3",elevation:"2"},{default:u(()=>[l(F,{class:"pa-0 pb-2"},{default:u(()=>[l(P,{class:"mr-2",size:"small",color:"primary"},{default:u(()=>[...C[12]||(C[12]=[O("mdi-human-male-female",-1)])]),_:1}),C[13]||(C[13]=p("span",{class:"text-subtitle-1 font-weight-medium"},"Demographics",-1))]),_:1}),l(L,{class:"pa-0"},{default:u(()=>[l(Q,{dense:""},{default:u(()=>[l(le,{cols:"12",class:"mb-2"},{default:u(()=>[l(Z,{modelValue:i.value,"onUpdate:modelValue":C[5]||(C[5]=J=>i.value=J),items:g,label:"Gender",density:"comfortable",variant:"outlined",clearable:"","hide-details":"auto","prepend-inner-icon":"mdi-human-male-female",class:"input-hover","error-messages":h.value},null,8,["modelValue","error-messages"])]),_:1}),l(le,{cols:"6"},{default:u(()=>[l(N,{modelValue:c.value,"onUpdate:modelValue":C[6]||(C[6]=J=>c.value=J),type:"number",label:"Age Greater Than",density:"comfortable",variant:"outlined",clearable:"","hide-details":"auto","prepend-inner-icon":"mdi-calendar-plus",class:"input-hover","error-messages":v.value,min:"0",max:"150"},null,8,["modelValue","error-messages"])]),_:1}),l(le,{cols:"6"},{default:u(()=>[l(N,{modelValue:A.value,"onUpdate:modelValue":C[7]||(C[7]=J=>A.value=J),type:"number",label:"Age Less Than",density:"comfortable",variant:"outlined",clearable:"","hide-details":"auto","prepend-inner-icon":"mdi-calendar-minus",class:"input-hover","error-messages":y.value,min:"0",max:"150"},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1}),p("div",y6e,[l(ce,{color:"primary","prepend-icon":"mdi-medical-bag",onClick:k,loading:e.isSearching,disabled:w.value,class:"btn-hover-enhanced"},{default:u(()=>[...C[14]||(C[14]=[O(" Search Procedures ",-1)])]),_:1},8,["loading","disabled"])]),p("div",_6e,[l(ce,{variant:"outlined",color:"secondary","prepend-icon":"mdi-filter-remove",onClick:S,disabled:e.isSearching,class:"btn-hover-enhanced"},{default:u(()=>[...C[15]||(C[15]=[O(" Clear All Filters ",-1)])]),_:1},8,["disabled"])])])]),_:1})}}},b6e=Xt(w6e,[["__scopeId","data-v-1a060e25"]]),x6e={class:"scrollable-content"},C6e={class:"scrollable-content"},S6e={key:0,class:"text-medium-emphasis ml-2"},E6e={key:1},B6e={class:"text-center"},k6e={class:"text-center"},T6e={class:"text-body-2 text-medium-emphasis mb-4"},I6e={class:"text-center"},F6e={class:"text-h4"},P6e={class:"text-h4"},D6e={class:"text-h4"},U6e={class:"text-h4"},R6e={class:"d-flex align-center"},N6e={class:"mr-2 text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},V6e={class:"text-caption text-medium-emphasis"},L6e={key:0,class:"text-body-2 mb-1"},M6e={key:1,class:"text-body-2"},O6e={class:"scrollable-content"},H6e={class:"scrollable-content"},$6e={key:0,class:"text-medium-emphasis ml-2"},Q6e={key:1},G6e={class:"text-center"},z6e={class:"text-center"},K6e={class:"text-body-2 text-medium-emphasis mb-4"},W6e={class:"text-center"},j6e={class:"text-h4"},q6e={class:"text-h4"},Y6e={class:"text-h4"},X6e={class:"text-h4"},J6e={class:"d-flex align-center"},Z6e={class:"mr-2 text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},e5e={class:"text-caption text-medium-emphasis"},t5e={key:0,class:"text-body-2 mb-1"},n5e={__name:"research-page",setup(e){const{showSnackbar:t}=ra(),n=ea(),a=M(0);Gh();const r=Zi(),s=M(null),o=ee(()=>Dn()),i=M([{title:"Consultations",disabled:!1},{title:"Procedures",disabled:!1}]),c=M({diagnosis:null,medicine:null,dateFrom:"",dateTo:"",patientName:"",gender:"",ageGreaterThan:"",ageLessThan:""}),A=M({procedureName:"",dateFrom:"",dateTo:"",gender:"",ageGreaterThan:"",ageLessThan:""}),d=ee(()=>n.state.researchModule.searchResults),f=ee(()=>n.state.researchModule.isLoading),m=ee(()=>n.state.researchModule.hasSearched),h=ee(()=>n.state.researchModule.searchError),v=ee(()=>n.getters["researchModule/searchSummary"]),y=ee(()=>n.getters["researchModule/hasActiveFilters"]),g=ee(()=>n.getters["researchModule/activeFiltersText"]),w=ee(()=>d.value.length?new Set(d.value.map(K=>K.patientId)).size:0),b=ee(()=>d.value.length?new Set(d.value.filter(K=>K.diagnosis).map(K=>K.diagnosis)).size:0),x=ee(()=>{if(!d.value.length)return 0;const Y=new Set;return d.value.forEach(K=>{K.medicines&&Array.isArray(K.medicines)&&K.medicines.forEach(X=>Y.add(X.productName))}),Y.size}),T=ee(()=>d.value.length),U=ee(()=>n.state.procedureResearchModule.searchResults),k=ee(()=>n.state.procedureResearchModule.isLoading),S=ee(()=>n.state.procedureResearchModule.hasSearched),E=ee(()=>n.state.procedureResearchModule.searchError),C=ee(()=>n.getters["procedureResearchModule/searchSummary"]),P=ee(()=>n.getters["procedureResearchModule/hasActiveFilters"]),F=ee(()=>n.getters["procedureResearchModule/activeFiltersText"]),N=ee(()=>U.value.length?new Set(U.value.map(K=>K.patientId)).size:0),L=ee(()=>U.value.length?new Set(U.value.filter(K=>K.procedureName).map(K=>K.procedureName)).size:0),ie=ee(()=>U.value.length?new Set(U.value.filter(K=>K.treatmentPlanId).map(K=>K.treatmentPlanId)).size:0),le=ee(()=>U.value.length);cn(()=>{try{const Y=n.state.researchModule.filters;c.value={...Y};const K=n.state.procedureResearchModule?.filters||{};A.value={...A.value,...K},m.value&&d.value.length>0?(console.log(" Restored previous consultation research search:",d.value.length,"results"),t({message:`Restored previous search: ${d.value.length} results`,color:"success",timeout:3e3})):y.value&&!m.value&&console.log(" Active consultation filters found, ready to search"),S.value&&U.value.length>0?console.log(" Restored previous procedure research search:",U.value.length,"results"):P.value&&!S.value&&console.log(" Active procedure filters found, ready to search")}catch(Y){console.error("Error setting up research page:",Y),s.value="Failed to initialize research page"}});const Q=async Y=>{if(f.value){console.log(" Search in progress, skipping filter update");return}try{c.value={...c.value,...Y},await n.dispatch("researchModule/updateFilters",{filters:c.value}),console.log(" Research filters updated:",c.value)}catch(K){console.error("Error updating filters:",K),s.value="Failed to update search filters"}},Z=async(Y=null)=>{if(f.value){console.log(" Search already in progress, skipping duplicate request");return}try{console.log(" Starting research search...");const K=Y||c.value;await n.dispatch("researchModule/updateFilters",{filters:K});const X=await n.dispatch("researchModule/performSearch");X.success?t({message:`Found ${X.data.length} research results`,color:"success",timeout:3e3}):t({message:X.error?.message||"Search failed",color:"error",timeout:5e3})}catch(K){console.error(" Search failed:",K),t({message:K.message||"Failed to perform search",color:"error",timeout:5e3})}},ce=async()=>{await Z()},J=async()=>{if(f.value){console.log(" Search in progress, skipping filter clear");return}try{c.value={diagnosis:null,medicine:null,dateFrom:"",dateTo:"",patientName:"",gender:"",ageGreaterThan:"",ageLessThan:""},await n.dispatch("researchModule/clearAll"),t({message:"All filters and results cleared",color:"success",timeout:3e3})}catch(Y){console.error("Error clearing filters:",Y),s.value="Failed to clear filters"}},se=Y=>{try{if(!Y.patientId)throw new Error("Invalid patient ID");r.push({path:`/patients/${Y.patientId}`,query:{from:"research"}})}catch(K){console.error("Error navigating to patient:",K),t({message:"Failed to open patient details",color:"error",timeout:5e3})}},G=async Y=>{if(k.value){console.log(" Procedure search in progress, skipping filter update");return}try{A.value={...A.value,...Y},await n.dispatch("procedureResearchModule/updateFilters",{filters:A.value}),console.log(" Procedure filters updated:",A.value)}catch(K){console.error("Error updating procedure filters:",K),s.value="Failed to update procedure search filters"}},D=async(Y=null)=>{if(k.value){console.log(" Procedure search already in progress, skipping duplicate request");return}try{console.log(" Starting procedure research search...");const K=Y||A.value;await n.dispatch("procedureResearchModule/updateFilters",{filters:K});const X=await n.dispatch("procedureResearchModule/performSearch");X.success?t({message:`Found ${X.data.length} procedure results`,color:"success",timeout:3e3}):t({message:X.error?.message||"Procedure search failed",color:"error",timeout:5e3})}catch(K){console.error(" Procedure search failed:",K),t({message:K.message||"Failed to perform procedure search",color:"error",timeout:5e3})}},j=async()=>{await D()},ne=async()=>{if(k.value){console.log(" Procedure search in progress, skipping filter clear");return}try{A.value={procedureName:"",dateFrom:"",dateTo:"",gender:"",ageGreaterThan:"",ageLessThan:""},await n.dispatch("procedureResearchModule/clearAll"),t({message:"All procedure filters and results cleared",color:"success",timeout:3e3})}catch(Y){console.error("Error clearing procedure filters:",Y),s.value="Failed to clear procedure filters"}},H=Y=>{try{if(!Y.patientId)throw new Error("Invalid patient ID");r.push({path:`/patients/${Y.patientId}`,query:{from:"research"}})}catch(K){console.error("Error navigating to patient from procedure result:",K),t({message:"Failed to open patient details",color:"error",timeout:5e3})}},te=Y=>{if(!Y)return"";try{return new Date(Y).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return Y}};return(Y,K)=>{const X=I("v-alert"),ae=I("v-tab"),oe=I("v-tabs"),W=I("v-card"),de=I("v-col"),Ae=I("v-row"),Ce=I("v-card-text"),De=I("v-progress-circular"),xe=I("v-icon"),ke=I("v-btn"),Ee=I("v-empty-state"),ye=I("v-chip"),we=I("v-card-title"),at=I("v-lazy"),Je=I("v-window-item"),rt=I("v-window"),it=I("v-main");return R(),ve(it,null,{default:u(()=>[l(xn,{feature:"research"},{default:u(()=>[s.value?(R(),ve(X,{key:0,type:"error",dismissible:"","onClick:close":K[0]||(K[0]=Ie=>s.value=null),class:"ma-3"},{default:u(()=>[O(q(s.value),1)]),_:1})):_e("",!0),l(Ae,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[l(de,{cols:"12"},{default:u(()=>[l(W,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center"},{default:u(()=>[l(oe,{modelValue:a.value,"onUpdate:modelValue":K[1]||(K[1]=Ie=>a.value=Ie),color:"primary","align-tabs":"start",class:"w-100"},{default:u(()=>[(R(!0),me(ze,null,Wt(i.value,(Ie,Ve)=>(R(),ve(ae,{key:Ve,value:Ve,disabled:Ie.disabled},{default:u(()=>[O(q(Ie.title),1)]),_:2},1032,["value","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(rt,{modelValue:a.value,"onUpdate:modelValue":K[16]||(K[16]=Ie=>a.value=Ie),class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[l(Je,{value:0,style:{height:"100%"}},{default:u(()=>[l(Ae,{"aria-label":"research row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[l(de,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[p("div",x6e,[l(p6e,{"model-value-diagnosis":c.value.diagnosis,"onUpdate:modelValueDiagnosis":K[2]||(K[2]=Ie=>c.value.diagnosis=Ie),"model-value-medicine":c.value.medicine,"onUpdate:modelValueMedicine":K[3]||(K[3]=Ie=>c.value.medicine=Ie),"model-value-date-from":c.value.dateFrom,"onUpdate:modelValueDateFrom":K[4]||(K[4]=Ie=>c.value.dateFrom=Ie),"model-value-date-to":c.value.dateTo,"onUpdate:modelValueDateTo":K[5]||(K[5]=Ie=>c.value.dateTo=Ie),"model-value-patient-name":c.value.patientName,"onUpdate:modelValuePatientName":K[6]||(K[6]=Ie=>c.value.patientName=Ie),"model-value-gender":c.value.gender,"onUpdate:modelValueGender":K[7]||(K[7]=Ie=>c.value.gender=Ie),"model-value-age-greater-than":c.value.ageGreaterThan,"onUpdate:modelValueAgeGreaterThan":K[8]||(K[8]=Ie=>c.value.ageGreaterThan=Ie),"model-value-age-less-than":c.value.ageLessThan,"onUpdate:modelValueAgeLessThan":K[9]||(K[9]=Ie=>c.value.ageLessThan=Ie),"max-date":o.value,"is-searching":f.value,onFilterChange:Q,onSearch:Z,onClearFilters:J},null,8,["model-value-diagnosis","model-value-medicine","model-value-date-from","model-value-date-to","model-value-patient-name","model-value-gender","model-value-age-greater-than","model-value-age-less-than","max-date","is-searching"])])]),_:1}),l(de,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[p("div",C6e,[l(W,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[l(W,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(Ce,{class:"pt-2 pb-0"},{default:u(()=>[v.value&&v.value.totalResults>0?(R(),me(ze,{key:0},[p("strong",null,q(v.value.totalResults),1),O(" research result"+q(v.value.totalResults!==1?"s":"")+" found ",1),g.value?(R(),me("span",S6e,"  "+q(g.value),1)):_e("",!0)],64)):(R(),me("strong",E6e,"Research Data Search"))]),_:1})]),_:1}),f.value?(R(),ve(Ae,{key:0,"no-gutters":""},{default:u(()=>[l(de,{cols:"12",class:"d-flex justify-center align-center",style:{height:"calc(100vh - 280px)"}},{default:u(()=>[p("div",B6e,[l(De,{indeterminate:"",size:"64",color:"primary"}),K[17]||(K[17]=p("div",{class:"mt-4 text-subtitle-1"},"Searching Research Data...",-1))])]),_:1})]),_:1})):h.value?(R(),ve(Ae,{key:1,"no-gutters":""},{default:u(()=>[l(de,{cols:"12",class:"d-flex justify-center align-center",style:{height:"calc(100vh - 280px)"}},{default:u(()=>[p("div",k6e,[l(xe,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...K[18]||(K[18]=[O("mdi-alert-circle",-1)])]),_:1}),K[20]||(K[20]=p("div",{class:"text-h6 mb-2"},"Search Failed",-1)),p("div",T6e,q(h.value),1),l(ke,{color:"primary",onClick:ce,"prepend-icon":"mdi-refresh",loading:f.value,disabled:f.value},{default:u(()=>[...K[19]||(K[19]=[O(" Try Again ",-1)])]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})):d.value&&d.value.length===0&&m.value?(R(),ve(Ee,{key:2,image:Oe(Ph),class:"d-flex justify-center"},{title:u(()=>[...K[21]||(K[21]=[p("div",{class:"text-subtitle-2 mt-8 text-center"}," No Research Data Found ",-1)])]),text:u(()=>[...K[22]||(K[22]=[p("div",{class:"text-caption text-center"}," Try adjusting your search criteria or clear filters to see all data ",-1)])]),actions:u(()=>[l(ke,{color:"primary",variant:"outlined",onClick:J,"prepend-icon":"mdi-filter-remove",loading:f.value,disabled:f.value},{default:u(()=>[...K[23]||(K[23]=[O(" Clear Filters ",-1)])]),_:1},8,["loading","disabled"])]),_:1},8,["image"])):m.value?d.value&&d.value.length>0?(R(),me(ze,{key:4},[l(Ae,{class:"mb-1 pa-1"},{default:u(()=>[l(de,{cols:"3"},{default:u(()=>[l(W,{color:"primary",variant:"tonal"},{default:u(()=>[l(Ce,{class:"text-center"},{default:u(()=>[p("div",F6e,q(w.value),1),K[27]||(K[27]=p("div",{class:"text-caption"},"Unique Patients",-1))]),_:1})]),_:1})]),_:1}),l(de,{cols:"3"},{default:u(()=>[l(W,{color:"success",variant:"tonal"},{default:u(()=>[l(Ce,{class:"text-center"},{default:u(()=>[p("div",P6e,q(b.value),1),K[28]||(K[28]=p("div",{class:"text-caption"},"Unique Diagnoses",-1))]),_:1})]),_:1})]),_:1}),l(de,{cols:"3"},{default:u(()=>[l(W,{color:"info",variant:"tonal"},{default:u(()=>[l(Ce,{class:"text-center"},{default:u(()=>[p("div",D6e,q(x.value),1),K[29]||(K[29]=p("div",{class:"text-caption"},"Unique Medicines",-1))]),_:1})]),_:1})]),_:1}),l(de,{cols:"3"},{default:u(()=>[l(W,{color:"warning",variant:"tonal"},{default:u(()=>[l(Ce,{class:"text-center"},{default:u(()=>[p("div",U6e,q(T.value),1),K[30]||(K[30]=p("div",{class:"text-caption"},"Total Consultations",-1))]),_:1})]),_:1})]),_:1})]),_:1}),l(Ae,{"no-gutters":""},{default:u(()=>[l(de,{cols:"12",class:"scroll-element",style:{"padding-bottom":"40px"}},{default:u(()=>[(R(!0),me(ze,null,Wt(d.value,Ie=>(R(),ve(at,{key:`${Ie.patientId}-${Ie.consultationId}`,options:{threshold:.1,rootMargin:"50px"},"min-height":"50"},{default:u(()=>[l(W,{style:Rt([{textAlign:"left"},{cursor:"pointer"}]),density:"compact",class:"mb-1 mx-2 card-enhanced card-status-default card-hover-base",rounded:"lg",onClick:Ve=>se(Ie)},{default:u(()=>[l(Ae,{"no-gutters":""},{default:u(()=>[l(de,{cols:"12"},{default:u(()=>[l(we,{class:"d-flex align-center justify-space-between pb-2 pt-2"},{default:u(()=>[p("div",R6e,[p("span",N6e,q(Ie.patientName||"Unknown Patient"),1),Ie.patientGender&&Ie.patientGender!==""?(R(),ve(ye,{key:0,color:"primary","text-color":"black",size:"small",class:"mr-1"},{default:u(()=>[O(q(Ie.patientGender),1)]),_:2},1024)):_e("",!0),Ie.patientAge&&Ie.patientAge!==""?(R(),ve(ye,{key:1,color:"primary","text-color":"black",size:"small",class:"mr-1"},{default:u(()=>[O(q(Ie.patientAge?`${Ie.patientAge} yrs`:""),1)]),_:2},1024)):_e("",!0)]),p("div",V6e,q(te(Ie.consultationDate)),1)]),_:2},1024),l(Ce,{class:"pt-0 pb-1"},{default:u(()=>[l(Ae,{dense:""},{default:u(()=>[l(de,{cols:"12"},{default:u(()=>[Ie.diagnosis?(R(),me("div",L6e,[K[31]||(K[31]=p("strong",null,"Diagnosis:",-1)),O(" "+q(Ie.diagnosis),1)])):_e("",!0),Ie.medicines&&Ie.medicines.length>0?(R(),me("div",M6e,[K[32]||(K[32]=p("strong",null,"Medicines:",-1)),O(" "+q(Ie.medicines.map(Ve=>Ve.productName).join(", ")),1)])):_e("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),_:1})],64)):_e("",!0):(R(),ve(Ae,{key:3,"no-gutters":""},{default:u(()=>[l(de,{cols:"12",class:"d-flex justify-center align-center",style:{height:"calc(100vh - 280px)"}},{default:u(()=>[p("div",I6e,[l(xe,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...K[24]||(K[24]=[O("mdi-database-search",-1)])]),_:1}),K[25]||(K[25]=p("div",{class:"text-h6 mb-2"},"Search for Research Data",-1)),K[26]||(K[26]=p("div",{class:"text-body-2 text-medium-emphasis"},"Use the filters on the left to search based on diagnosis, medicines, and dates",-1))])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1})]),_:1}),l(Je,{value:1,style:{height:"100%"}},{default:u(()=>[l(Ae,{"aria-label":"procedure research row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[l(de,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[p("div",O6e,[l(b6e,{"model-value-procedure-name":A.value.procedureName,"onUpdate:modelValueProcedureName":K[10]||(K[10]=Ie=>A.value.procedureName=Ie),"model-value-date-from":A.value.dateFrom,"onUpdate:modelValueDateFrom":K[11]||(K[11]=Ie=>A.value.dateFrom=Ie),"model-value-date-to":A.value.dateTo,"onUpdate:modelValueDateTo":K[12]||(K[12]=Ie=>A.value.dateTo=Ie),"model-value-gender":A.value.gender,"onUpdate:modelValueGender":K[13]||(K[13]=Ie=>A.value.gender=Ie),"model-value-age-greater-than":A.value.ageGreaterThan,"onUpdate:modelValueAgeGreaterThan":K[14]||(K[14]=Ie=>A.value.ageGreaterThan=Ie),"model-value-age-less-than":A.value.ageLessThan,"onUpdate:modelValueAgeLessThan":K[15]||(K[15]=Ie=>A.value.ageLessThan=Ie),"max-date":o.value,"is-searching":k.value,onFilterChange:G,onSearch:D,onClearFilters:ne},null,8,["model-value-procedure-name","model-value-date-from","model-value-date-to","model-value-gender","model-value-age-greater-than","model-value-age-less-than","max-date","is-searching"])])]),_:1}),l(de,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[p("div",H6e,[l(W,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[l(W,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(Ce,{class:"pt-2 pb-0"},{default:u(()=>[C.value&&C.value.totalResults>0?(R(),me(ze,{key:0},[p("strong",null,q(C.value.totalResults),1),O(" procedure result"+q(C.value.totalResults!==1?"s":"")+" found ",1),F.value?(R(),me("span",$6e,"  "+q(F.value),1)):_e("",!0)],64)):(R(),me("strong",Q6e,"Procedure Research Search"))]),_:1})]),_:1}),k.value?(R(),ve(Ae,{key:0,"no-gutters":""},{default:u(()=>[l(de,{cols:"12",class:"d-flex justify-center align-center",style:{height:"calc(100vh - 280px)"}},{default:u(()=>[p("div",G6e,[l(De,{indeterminate:"",size:"64",color:"primary"}),K[33]||(K[33]=p("div",{class:"mt-4 text-subtitle-1"},"Searching Procedure Data...",-1))])]),_:1})]),_:1})):E.value?(R(),ve(Ae,{key:1,"no-gutters":""},{default:u(()=>[l(de,{cols:"12",class:"d-flex justify-center align-center",style:{height:"calc(100vh - 280px)"}},{default:u(()=>[p("div",z6e,[l(xe,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...K[34]||(K[34]=[O("mdi-alert-circle",-1)])]),_:1}),K[36]||(K[36]=p("div",{class:"text-h6 mb-2"},"Search Failed",-1)),p("div",K6e,q(E.value),1),l(ke,{color:"primary",onClick:j,"prepend-icon":"mdi-refresh",loading:k.value,disabled:k.value},{default:u(()=>[...K[35]||(K[35]=[O(" Try Again ",-1)])]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})):U.value&&U.value.length===0&&S.value?(R(),ve(Ee,{key:2,image:Oe(Ph),class:"d-flex justify-center"},{title:u(()=>[...K[37]||(K[37]=[p("div",{class:"text-subtitle-2 mt-8 text-center"}," No Procedure Data Found ",-1)])]),text:u(()=>[...K[38]||(K[38]=[p("div",{class:"text-caption text-center"}," Try adjusting your search criteria or clear filters to see all data ",-1)])]),actions:u(()=>[l(ke,{color:"primary",variant:"outlined",onClick:ne,"prepend-icon":"mdi-filter-remove",loading:k.value,disabled:k.value},{default:u(()=>[...K[39]||(K[39]=[O(" Clear Filters ",-1)])]),_:1},8,["loading","disabled"])]),_:1},8,["image"])):S.value?U.value&&U.value.length>0?(R(),me(ze,{key:4},[l(Ae,{class:"mb-1 pa-1"},{default:u(()=>[l(de,{cols:"3"},{default:u(()=>[l(W,{color:"primary",variant:"tonal"},{default:u(()=>[l(Ce,{class:"text-center"},{default:u(()=>[p("div",j6e,q(N.value),1),K[43]||(K[43]=p("div",{class:"text-caption"},"Unique Patients",-1))]),_:1})]),_:1})]),_:1}),l(de,{cols:"3"},{default:u(()=>[l(W,{color:"success",variant:"tonal"},{default:u(()=>[l(Ce,{class:"text-center"},{default:u(()=>[p("div",q6e,q(L.value),1),K[44]||(K[44]=p("div",{class:"text-caption"},"Unique Procedures",-1))]),_:1})]),_:1})]),_:1}),l(de,{cols:"3"},{default:u(()=>[l(W,{color:"info",variant:"tonal"},{default:u(()=>[l(Ce,{class:"text-center"},{default:u(()=>[p("div",Y6e,q(ie.value),1),K[45]||(K[45]=p("div",{class:"text-caption"},"Treatment Plans",-1))]),_:1})]),_:1})]),_:1}),l(de,{cols:"3"},{default:u(()=>[l(W,{color:"warning",variant:"tonal"},{default:u(()=>[l(Ce,{class:"text-center"},{default:u(()=>[p("div",X6e,q(le.value),1),K[46]||(K[46]=p("div",{class:"text-caption"},"Total Records",-1))]),_:1})]),_:1})]),_:1})]),_:1}),l(Ae,{"no-gutters":""},{default:u(()=>[l(de,{cols:"12",class:"scroll-element",style:{"padding-bottom":"40px"}},{default:u(()=>[(R(!0),me(ze,null,Wt(U.value,Ie=>(R(),ve(at,{key:`${Ie.patientId}-${Ie.treatmentProcedureId}`,options:{threshold:.1,rootMargin:"50px"},"min-height":"50"},{default:u(()=>[l(W,{style:Rt([{textAlign:"left"},{cursor:"pointer"}]),density:"compact",class:"mb-1 mx-2 card-enhanced card-status-default card-hover-base",rounded:"lg",onClick:Ve=>H(Ie)},{default:u(()=>[l(Ae,{"no-gutters":""},{default:u(()=>[l(de,{cols:"12"},{default:u(()=>[l(we,{class:"d-flex align-center justify-space-between pb-2 pt-2"},{default:u(()=>[p("div",J6e,[p("span",Z6e,q(Ie.patientName||"Unknown Patient"),1),Ie.patientGender&&Ie.patientGender!==""?(R(),ve(ye,{key:0,color:"primary","text-color":"black",size:"small",class:"mr-1"},{default:u(()=>[O(q(Ie.patientGender),1)]),_:2},1024)):_e("",!0),Ie.patientAge&&Ie.patientAge!==""?(R(),ve(ye,{key:1,color:"primary","text-color":"black",size:"small",class:"mr-1"},{default:u(()=>[O(q(Ie.patientAge?`${Ie.patientAge} yrs`:""),1)]),_:2},1024)):_e("",!0)]),p("div",e5e,q(te(Ie.procedureStartDate||Ie.treatmentPlanCreatedAt)),1)]),_:2},1024),l(Ce,{class:"pt-0 pb-1"},{default:u(()=>[l(Ae,{dense:""},{default:u(()=>[l(de,{cols:"12"},{default:u(()=>[Ie.procedureName?(R(),me("div",t5e,[K[47]||(K[47]=p("strong",null,"Procedure:",-1)),O(" "+q(Ie.procedureName),1)])):_e("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),_:1})],64)):_e("",!0):(R(),ve(Ae,{key:3,"no-gutters":""},{default:u(()=>[l(de,{cols:"12",class:"d-flex justify-center align-center",style:{height:"calc(100vh - 280px)"}},{default:u(()=>[p("div",W6e,[l(xe,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...K[40]||(K[40]=[O("mdi-database-search",-1)])]),_:1}),K[41]||(K[41]=p("div",{class:"text-h6 mb-2"},"Search for Procedure Data",-1)),K[42]||(K[42]=p("div",{class:"text-body-2 text-medium-emphasis"},"Use the filters on the left to search based on procedures, dates, and demographics",-1))])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}},a5e=Xt(n5e,[["__scopeId","data-v-a66dfcba"]]),r5e={class:"filter-container pa-3",style:{flex:"1 1 auto","overflow-y":"auto"}},s5e={class:"filter-field mb-3"},o5e={class:"filter-field mb-3"},i5e={class:"filter-section mb-3"},l5e={class:"filter-field mb-3"},u5e={class:"d-flex justify-center mt-4 mb-2"},c5e={class:"d-flex justify-center"},d5e={__name:"ReminderFilter",props:{filters:{type:Object,default:()=>({})},isLoading:{type:Boolean,default:!1}},emits:["filter-change","search","clear-filters"],setup(e,{emit:t}){const n=e,a=t,r=M(n.filters?.reminderType||""),s=M(n.filters?.reminderStatus||""),o=M(n.filters?.dateFrom||""),i=M(n.filters?.dateTo||""),c=M(n.filters?.patientName||""),A=M(""),d=M(""),f=M(""),m=M(""),h=M(""),v=[{title:"All Types",value:""},{title:"Appointment",value:"appointment"},{title:"Consultation",value:"consultation"},{title:"Procedures",value:"procedures"}],y=[{title:"All Statuses",value:""},{title:"Pending",value:"pending"},{title:"Completed",value:"completed"}],g=ee(()=>!!(A.value||d.value||f.value||m.value||h.value)),w=()=>{f.value="",o.value&&i.value&&o.value>i.value&&(f.value="From date cannot be after To date")},b=()=>{m.value="",o.value&&i.value&&i.value<o.value&&(m.value="To date cannot be before From date")},x=()=>{h.value="",c.value&&c.value.length<2&&(h.value="Patient name must be at least 2 characters")};We(()=>n.filters,S=>{S&&(r.value=S.reminderType||"",s.value=S.reminderStatus||"",o.value=S.dateFrom||"",i.value=S.dateTo||"",c.value=S.patientName||"")},{deep:!0}),We(r,()=>{T()}),We(s,()=>{T()}),We(o,()=>{w(),b(),T()}),We(i,()=>{b(),w(),T()}),We(c,()=>{x(),T()});const T=()=>{const S={reminderType:r.value,reminderStatus:s.value,dateFrom:o.value,dateTo:i.value,patientName:c.value};a("filter-change",S)},U=async()=>{if(w(),b(),x(),await bn(),g.value){console.log(" Cannot search: validation errors present");return}const S={reminderType:r.value,reminderStatus:s.value,dateFrom:o.value,dateTo:i.value,patientName:c.value};console.log(" Reminder search triggered with filters:",S),a("search",S)},k=()=>{r.value="",s.value="",o.value="",i.value="",c.value="",A.value="",d.value="",f.value="",m.value="",h.value="",a("clear-filters")};return(S,E)=>{const C=I("v-card-text"),P=I("v-card"),F=I("v-select"),N=I("v-text-field"),L=I("v-col"),ie=I("v-row"),le=I("v-btn");return R(),ve(P,{color:"surfaceContainer",flat:"",style:{height:"100%",display:"flex","flex-direction":"column"}},{default:u(()=>[l(P,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(C,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...E[7]||(E[7]=[p("span",{class:"text-body-2 font-weight-medium"},"Filter Reminders",-1)])]),_:1})]),_:1}),p("div",r5e,[p("div",s5e,[l(F,{modelValue:r.value,"onUpdate:modelValue":E[0]||(E[0]=Q=>r.value=Q),items:v,label:"Reminder Type",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":A.value},null,8,["modelValue","error-messages"])]),p("div",o5e,[l(F,{modelValue:s.value,"onUpdate:modelValue":E[1]||(E[1]=Q=>s.value=Q),items:y,label:"Reminder Status",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":d.value},null,8,["modelValue","error-messages"])]),p("div",i5e,[E[8]||(E[8]=p("div",{class:"filter-section-label mb-2"},"Date Range",-1)),l(ie,{dense:""},{default:u(()=>[l(L,{cols:"6"},{default:u(()=>[l(N,{modelValue:o.value,"onUpdate:modelValue":E[2]||(E[2]=Q=>o.value=Q),type:"date",label:"From Date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input date-input",max:i.value,"error-messages":f.value,onInput:w,onClick:E[3]||(E[3]=Q=>Q.target.showPicker&&Q.target.showPicker())},null,8,["modelValue","max","error-messages"])]),_:1}),l(L,{cols:"6"},{default:u(()=>[l(N,{modelValue:i.value,"onUpdate:modelValue":E[4]||(E[4]=Q=>i.value=Q),type:"date",label:"To Date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input date-input",min:o.value,"error-messages":m.value,onInput:b,onClick:E[5]||(E[5]=Q=>Q.target.showPicker&&Q.target.showPicker())},null,8,["modelValue","min","error-messages"])]),_:1})]),_:1})]),p("div",l5e,[l(N,{modelValue:c.value,"onUpdate:modelValue":E[6]||(E[6]=Q=>c.value=Q),label:"Patient Name",placeholder:"Enter patient name...",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":h.value,maxlength:"100"},null,8,["modelValue","error-messages"])]),p("div",u5e,[l(le,{color:"primary",size:"small","prepend-icon":"mdi-magnify",onClick:U,loading:e.isLoading,disabled:g.value,class:"filter-button"},{default:u(()=>[...E[9]||(E[9]=[O(" Search ",-1)])]),_:1},8,["loading","disabled"])]),p("div",c5e,[l(le,{variant:"text",size:"small","prepend-icon":"mdi-filter-remove",onClick:k,disabled:e.isLoading,class:"filter-button-clear"},{default:u(()=>[...E[10]||(E[10]=[O(" Clear ",-1)])]),_:1},8,["disabled"])]),l(P,{color:"info",variant:"tonal",class:"mt-4 pa-2",elevation:"0",rounded:"lg"},{default:u(()=>[...E[11]||(E[11]=[p("div",{class:"text-caption text-medium-emphasis mb-2"},[p("strong",null,"Default Search Windows:")],-1),p("div",{class:"text-caption"},[p("div",{class:"mb-1"},"Appointments: Next 7 days"),p("div",{class:"mb-1"},"Consultations: Next 30 days"),p("div",{class:"mb-1"},"Treatment Plans: Next 30 days")],-1)])]),_:1})])]),_:1})}}},A5e=Xt(d5e,[["__scopeId","data-v-3c599c88"]]),f5e={class:"scrollable-content"},m5e={class:"scrollable-content"},h5e={key:0,class:"text-medium-emphasis ml-2"},v5e={key:1},p5e={class:"text-center"},g5e={class:"text-center"},y5e={class:"text-body-2 text-medium-emphasis mb-4"},_5e={class:"text-caption text-center"},w5e={class:"text-center"},b5e={class:"text-caption text-center"},x5e={class:"d-flex align-center mb-1"},C5e={class:"d-flex align-center mb-1"},S5e={class:"d-flex align-center"},E5e={class:"text-h4"},B5e={class:"text-h4"},k5e={class:"text-h4"},T5e={class:"text-h4"},I5e={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},F5e={class:"d-flex align-center"},P5e={class:"text-body-2 font-weight-medium"},D5e={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},U5e={key:0,class:"text-body-2 text-medium-emphasis ml-2"},R5e={key:0,class:"text-body-2 text-medium-emphasis mt-1"},N5e={key:2,class:"text-body-2 text-medium-emphasis mt-1"},V5e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"18",height:"18"},L5e=["d"],M5e={__name:"tasks-page",setup(e){const{showSnackbar:t}=ra(),n=ea(),a=M(0),r=M(null),s=ee(()=>n.state.reminderModule.searchResults),o=ee(()=>n.state.reminderModule.isLoading),i=ee(()=>n.state.reminderModule.hasSearched),c=ee(()=>n.state.reminderModule.searchError),A=ee(()=>n.state.reminderModule.filters),d=ee(()=>n.getters["reminderModule/hasActiveFilters"]),f=ee(()=>n.getters["reminderModule/uniquePatientsCount"]),m=ee(()=>n.getters["reminderModule/pendingRemindersCount"]),h=ee(()=>n.getters["reminderModule/completedRemindersCount"]),v=M([{title:"Reminders",disabled:!1}]);cn(()=>{try{console.log("Tasks page initialized")}catch(E){console.error("Error setting up tasks page:",E),r.value="Failed to initialize tasks page"}});const y=E=>{const C=E.details?.patient_phone||E.details?.contactNumber||E.details?.contact_number;if(!C)return!1;const P=C.replace(/\D/g,"");return P.length===10||P.length===12&&P.startsWith("91")},g=async E=>{try{const C=n.getters["doctorModule/currentDoctor"];if(!C){t({message:"Please select a doctor first",color:"warning",timeout:5e3});return}if(!y(E)){t({message:"Patient contact number not available or invalid",color:"warning",timeout:5e3});return}E.sendingWhatsApp=!0,console.log(" Sending WhatsApp reminder for:",E.type,E.patientName);const P=await yTe(E,C);if(P.success)t({message:P.message||"WhatsApp reminder sent successfully",color:"success",timeout:3e3});else throw new Error(P.error||"Failed to send WhatsApp reminder")}catch(C){console.error(" WhatsApp reminder failed:",C),t({message:C.message||"Failed to send WhatsApp reminder",color:"error",timeout:5e3})}finally{E&&(E.sendingWhatsApp=!1)}},w=async E=>{try{await n.dispatch("reminderModule/updateFilters",{filters:E}),console.log(" Reminder filters updated via store:",E)}catch(C){console.error("Error updating filters:",C),r.value="Failed to update search filters"}},b=async(E=null)=>{try{if(E&&await n.dispatch("reminderModule/updateFilters",{filters:E}),!n.state.doctorModule?.doctorId){t({message:"Please select a doctor first to search reminders",color:"warning",timeout:5e3});return}console.log(" Starting reminder search...");const P=await n.dispatch("reminderModule/performSearch");if(P.success){const F=P.data.length;let N=`Found ${F} reminder${F!==1?"s":""}`;P.partialErrors?.length>0?(N+=` (${P.partialErrors.length} source${P.partialErrors.length!==1?"s":""} failed)`,t({message:N,color:"warning",timeout:5e3})):t({message:N,color:"success",timeout:3e3})}else throw new Error(P.error?.message||"Search failed")}catch(C){console.error(" Search failed:",C),t({message:C.message||"Failed to search reminders",color:"error",timeout:5e3})}},x=()=>{U(),setTimeout(()=>{b()},100)},T=async()=>{await b()},U=async()=>{try{await n.dispatch("reminderModule/clearAll"),t({message:"All filters and results cleared",color:"success",timeout:3e3})}catch(E){console.error("Error clearing filters:",E),r.value="Failed to clear filters"}},k=async E=>{try{const C=!E.details.isReminded,P=C?"reminded":"not reminded";console.log(` Toggling reminder status to: ${P}`,E),console.log(" Reminder details:",E.details),t({message:`Marking reminder as ${P}...`,color:"info",timeout:2e3}),await new Promise(N=>requestAnimationFrame(N));const F=await n.dispatch("reminderModule/markAsReminded",{reminder:E,isReminded:C});if(F.success)await new Promise(N=>requestAnimationFrame(N)),t({message:`Reminder marked as ${P}`,color:"success",timeout:3e3});else throw new Error(F.error||"Failed to update reminder status")}catch(C){console.error(" Failed to toggle reminder status:",C),t({message:C.message||"Failed to update reminder status",color:"error",timeout:5e3})}},S=E=>{if(!E)return"";try{return new Date(E).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return E}};return(E,C)=>{const P=I("v-alert"),F=I("v-tab"),N=I("v-tabs"),L=I("v-card"),ie=I("v-col"),le=I("v-row"),Q=I("v-card-text"),Z=I("v-progress-circular"),ce=I("v-icon"),J=I("v-btn"),se=I("v-empty-state"),G=I("v-divider"),D=I("v-card-title"),j=I("v-tooltip"),ne=I("v-lazy"),H=I("v-window-item"),te=I("v-window"),Y=I("v-main");return R(),ve(Y,null,{default:u(()=>[r.value?(R(),ve(P,{key:0,type:"error",dismissible:"","onClick:close":C[0]||(C[0]=K=>r.value=null),class:"ma-3"},{default:u(()=>[O(q(r.value),1)]),_:1})):_e("",!0),l(le,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[l(ie,{cols:"12"},{default:u(()=>[l(L,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center"},{default:u(()=>[l(N,{modelValue:a.value,"onUpdate:modelValue":C[1]||(C[1]=K=>a.value=K),color:"primary","align-tabs":"start",class:"w-100"},{default:u(()=>[(R(!0),me(ze,null,Wt(v.value,(K,X)=>(R(),ve(F,{key:X,value:X,disabled:K.disabled},{default:u(()=>[O(q(K.title),1)]),_:2},1032,["value","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(te,{modelValue:a.value,"onUpdate:modelValue":C[2]||(C[2]=K=>a.value=K),class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[l(H,{value:0,style:{height:"100%"}},{default:u(()=>[l(le,{"aria-label":"reminders row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[l(ie,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[p("div",f5e,[l(A5e,{filters:A.value,isLoading:o.value,onFilterChange:w,onSearch:b,onClearFilters:U},null,8,["filters","isLoading"])])]),_:1}),l(ie,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[p("div",m5e,[l(L,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[l(L,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(Q,{class:"pt-2 pb-0"},{default:u(()=>[s.value.length>0&&i.value?(R(),me(ze,{key:0},[p("strong",null,q(s.value.length),1),O(" reminder"+q(s.value.length!==1?"s":"")+" found ",1),d.value?(R(),me("span",h5e,"  Filtered ")):_e("",!0)],64)):(R(),me("strong",v5e,"Reminders Management"))]),_:1})]),_:1}),o.value?(R(),ve(le,{key:0,"no-gutters":""},{default:u(()=>[l(ie,{cols:"12",class:"d-flex justify-center align-center",style:{height:"calc(100vh - 280px)"}},{default:u(()=>[p("div",p5e,[l(Z,{indeterminate:"",size:"64",color:"primary"}),C[3]||(C[3]=p("div",{class:"mt-4 text-subtitle-1"},"Searching Reminders...",-1))])]),_:1})]),_:1})):c.value?(R(),ve(le,{key:1,"no-gutters":""},{default:u(()=>[l(ie,{cols:"12",class:"d-flex justify-center align-center",style:{height:"calc(100vh - 280px)"}},{default:u(()=>[p("div",g5e,[l(ce,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...C[4]||(C[4]=[O("mdi-alert-circle",-1)])]),_:1}),C[6]||(C[6]=p("div",{class:"text-h6 mb-2"},"Search Failed",-1)),p("div",y5e,q(c.value),1),l(J,{color:"primary",onClick:T,"prepend-icon":"mdi-refresh",loading:o.value,disabled:o.value},{default:u(()=>[...C[5]||(C[5]=[O(" Try Again ",-1)])]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})):s.value.length===0&&i.value?(R(),ve(se,{key:2,image:Oe(Ph),class:"d-flex justify-center"},{title:u(()=>[...C[7]||(C[7]=[p("div",{class:"text-subtitle-2 mt-8 text-center"}," No Reminders Found ",-1)])]),text:u(()=>[C[12]||(C[12]=p("div",{class:"text-caption text-center mb-4"}," Try adjusting your search criteria or clear filters to see all reminders ",-1)),l(L,{color:"info",variant:"tonal",class:"pa-3 mx-auto",style:{"max-width":"400px"},rounded:"lg"},{default:u(()=>[p("div",_5e,[l(ce,{size:"small",class:"mb-1"},{default:u(()=>[...C[8]||(C[8]=[O("mdi-information",-1)])]),_:1}),C[9]||(C[9]=p("div",{class:"font-weight-medium mb-1"},"Default Search Ranges",-1)),C[10]||(C[10]=p("div",{class:"text-body-2 text-left"},[O("  "),p("strong",null,"Appointments:"),O(" Next 7 days"),p("br"),O("  "),p("strong",null,"Consultations:"),O(" Next 30 days"),p("br"),O("  "),p("strong",null,"Treatment Plans:"),O(" Next 30 days ")],-1)),C[11]||(C[11]=p("div",{class:"mt-2 text-caption text-medium-emphasis"}," Use date filters to search beyond these ranges ",-1))])]),_:1})]),actions:u(()=>[l(J,{color:"primary",variant:"outlined",onClick:U,"prepend-icon":"mdi-filter-remove",loading:o.value,disabled:o.value},{default:u(()=>[...C[13]||(C[13]=[O(" Clear Filters ",-1)])]),_:1},8,["loading","disabled"])]),_:1},8,["image"])):i.value?s.value.length>0?(R(),me(ze,{key:4},[l(le,{class:"mb-1 pa-1"},{default:u(()=>[l(ie,{cols:"3"},{default:u(()=>[l(L,{color:"primary",variant:"tonal"},{default:u(()=>[l(Q,{class:"text-center"},{default:u(()=>[p("div",E5e,q(f.value),1),C[27]||(C[27]=p("div",{class:"text-caption"},"Unique Patients",-1))]),_:1})]),_:1})]),_:1}),l(ie,{cols:"3"},{default:u(()=>[l(L,{color:"success",variant:"tonal"},{default:u(()=>[l(Q,{class:"text-center"},{default:u(()=>[p("div",B5e,q(m.value),1),C[28]||(C[28]=p("div",{class:"text-caption"},"Pending",-1))]),_:1})]),_:1})]),_:1}),l(ie,{cols:"3"},{default:u(()=>[l(L,{color:"info",variant:"tonal"},{default:u(()=>[l(Q,{class:"text-center"},{default:u(()=>[p("div",k5e,q(h.value),1),C[29]||(C[29]=p("div",{class:"text-caption"},"Completed",-1))]),_:1})]),_:1})]),_:1}),l(ie,{cols:"3"},{default:u(()=>[l(L,{color:"warning",variant:"tonal"},{default:u(()=>[l(Q,{class:"text-center"},{default:u(()=>[p("div",T5e,q(s.value.length),1),C[30]||(C[30]=p("div",{class:"text-caption"},"Total Reminders",-1))]),_:1})]),_:1})]),_:1})]),_:1}),l(le,{"no-gutters":""},{default:u(()=>[l(ie,{cols:"12",class:"scroll-element",style:{"padding-bottom":"40px"}},{default:u(()=>[(R(!0),me(ze,null,Wt(s.value,K=>(R(),ve(ne,{key:`reminder-${K.id}-${K.status}-${K.details?.isReminded||!1}`,options:{threshold:.1,rootMargin:"100px"},"min-height":"60",eager:""},{default:u(()=>[l(L,{style:{textAlign:"left"},density:"compact",class:"mb-2 mx-2 card-enhanced card-status-default",rounded:"lg"},{default:u(()=>[l(le,{"no-gutters":""},{default:u(()=>[l(ie,{cols:"10"},{default:u(()=>[l(D,{class:"d-flex justify-space-between align-center pb-0 pt-2"},{default:u(()=>[p("span",I5e,q(K.title||"Reminder"),1),p("div",F5e,[p("span",P5e,q(S(K.dueDate)),1)])]),_:2},1024),l(Q,{class:"pb-1"},{default:u(()=>[l(le,{dense:""},{default:u(()=>[l(ie,{cols:"12"},{default:u(()=>[p("div",D5e,[O(q(K.patientName)+" ",1),K.description?(R(),me("span",U5e," ("+q(K.description)+") ",1)):_e("",!0)]),K.type==="consultation"&&K.consultationDetails?(R(),me("div",R5e,q(K.consultationDetails),1)):_e("",!0),K.type==="procedures"&&K.procedureDetails?(R(!0),me(ze,{key:1},Wt(K.procedureDetails.split(" | "),(X,ae)=>(R(),me("div",{key:ae,class:"text-body-2 text-medium-emphasis mt-1"},q(X),1))),128)):_e("",!0),K.type==="appointment"&&K.lastAppointmentDetails?(R(),me("div",N5e,q(K.lastAppointmentDetails),1)):_e("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),l(ie,{cols:"2",class:"d-flex justify-center align-center"},{default:u(()=>[l(le,{"no-gutters":""},{default:u(()=>[l(ie,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[l(xn,{permission:"tasks.edit",tag:"span"},{default:u(()=>[l(j,{text:K.status==="completed"?"Mark as Not Reminded":"Mark as Reminded"},{activator:u(({props:X})=>[l(J,Fe({color:K.status==="completed"?"success":"warning",variant:"plain",size:"small"},{ref_for:!0},X,{onClick:mn(ae=>k(K),["stop"]),class:"btn-hover-base mb-2"}),{default:u(()=>[l(ce,{color:K.status==="completed"?"success":"warning",size:"18"},{default:u(()=>[(R(),me("svg",V5e,[p("path",{fill:"currentColor",d:K.status==="completed"?"M17.75 21.16L15 18.16L16.16 17L17.75 18.59L21.34 15L22.5 16.41L17.75 21.16M3 20V19L5 17V11C5 7.9 7.03 5.18 10 4.29V4C10 2.9 10.9 2 12 2C13.11 2 14 2.9 14 4V4.29C16.97 5.18 19 7.9 19 11V12.08L18 12C14.69 12 12 14.69 12 18C12 18.7 12.12 19.37 12.34 20H3M12 23C10.9 23 10 22.11 10 21H12.8C13.04 21.41 13.33 21.79 13.65 22.13C13.29 22.66 12.69 23 12 23Z":"M23 7V13H21V7M21 15H23V17H21M12 2A2 2 0 0 0 10 4A2 2 0 0 0 10 4.29C7.12 5.14 5 7.82 5 11V17L3 19V20H21V19L19 17V11C19 7.82 16.88 5.14 14 4.29A2 2 0 0 0 14 4A2 2 0 0 0 12 2M10 21A2 2 0 0 0 12 23A2 2 0 0 0 14 21Z"},null,8,L5e)]))]),_:2},1032,["color"])]),_:2},1040,["color","onClick"])]),_:2},1032,["text"])]),_:2},1024)]),_:2},1024),l(G,{class:"mx-4"}),l(ie,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[l(j,{text:"Send WhatsApp Reminder"},{activator:u(({props:X})=>[l(J,Fe({variant:"plain",size:"small"},{ref_for:!0},X,{onClick:mn(ae=>g(K),["stop"]),disabled:!y(K),loading:K.sendingWhatsApp,class:"btn-hover-base mt-1"}),{default:u(()=>[l(ce,{size:"18"},{default:u(()=>[...C[31]||(C[31]=[p("img",{src:z_,alt:"WhatsApp",style:{width:"18px",height:"18px"}},null,-1)])]),_:1})]),_:1},16,["onClick","disabled","loading"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})],64)):_e("",!0):(R(),ve(le,{key:3,"no-gutters":""},{default:u(()=>[l(ie,{cols:"12",class:"d-flex justify-center align-center",style:{height:"calc(100vh - 280px)"}},{default:u(()=>[p("div",w5e,[l(ce,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...C[14]||(C[14]=[O("mdi-bell-outline",-1)])]),_:1}),C[25]||(C[25]=p("div",{class:"text-h6 mb-2"},"Reminder Management",-1)),C[26]||(C[26]=p("div",{class:"text-body-2 text-medium-emphasis mb-6"},"Use the filters on the left to search for reminders",-1)),l(J,{color:"primary",variant:"outlined",onClick:x},{default:u(()=>[...C[15]||(C[15]=[O(" View All Reminders ",-1)])]),_:1}),l(L,{color:"surface-variant",variant:"tonal",class:"mt-6 pa-4 mx-auto",style:{"max-width":"400px"},rounded:"lg"},{default:u(()=>[p("div",b5e,[l(ce,{size:"small",class:"mb-2"},{default:u(()=>[...C[16]||(C[16]=[O("mdi-clock-outline",-1)])]),_:1}),C[23]||(C[23]=p("div",{class:"font-weight-medium mb-2 text-body-2"},"Default Search Windows",-1)),l(le,{dense:"",class:"text-left"},{default:u(()=>[l(ie,{cols:"12",class:"text-body-2"},{default:u(()=>[p("div",x5e,[l(ce,{size:"x-small",color:"primary",class:"mr-2"},{default:u(()=>[...C[17]||(C[17]=[O("mdi-calendar-clock",-1)])]),_:1}),C[18]||(C[18]=p("span",null,[p("strong",null,"Appointments:"),O(" Next 7 days")],-1))]),p("div",C5e,[l(ce,{size:"x-small",color:"success",class:"mr-2"},{default:u(()=>[...C[19]||(C[19]=[O("mdi-stethoscope",-1)])]),_:1}),C[20]||(C[20]=p("span",null,[p("strong",null,"Consultations:"),O(" Next 30 days")],-1))]),p("div",S5e,[l(ce,{size:"x-small",color:"info",class:"mr-2"},{default:u(()=>[...C[21]||(C[21]=[O("mdi-medical-bag",-1)])]),_:1}),C[22]||(C[22]=p("span",null,[p("strong",null,"Treatment Plans:"),O(" Next 30 days")],-1))])]),_:1})]),_:1}),l(G,{class:"my-2"}),C[24]||(C[24]=p("div",{class:"text-caption text-medium-emphasis"},"  Set custom date ranges in filters to search beyond these windows ",-1))])]),_:1})])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},O5e=Xt(M5e,[["__scopeId","data-v-d9f25aad"]]),H5e={class:"filter-container pa-3",style:{flex:"1 1 auto","overflow-y":"auto"}},$5e={class:"filter-field mb-3"},Q5e={class:"d-flex justify-center mt-4"},G5e={__name:"PaymentFilter",props:{paymentDate:{type:String,default:""}},emits:["filter-change","search","clear"],setup(e,{emit:t}){const n=e,a=t,r=M(n.paymentDate||""),s=ee(()=>Dn()),o=ee(()=>!!r.value);ee(()=>{let m=0;return r.value&&m++,m});const i=m=>{if(!m)return"";try{return new Date(m).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return m}},c=()=>{d()},A=()=>{r.value="",d()},d=()=>{a("filter-change",{paymentDate:r.value,hasErrors:!1,hasFilters:o.value})},f=()=>{r.value="",a("clear"),d()};return We(()=>n.paymentDate,m=>{r.value=m||""}),d(),(m,h)=>{const v=I("v-card-text"),y=I("v-card"),g=I("v-text-field"),w=I("v-chip"),b=I("v-btn");return R(),ve(y,{color:"surfaceContainer",flat:"",style:{height:"100%",display:"flex","flex-direction":"column"}},{default:u(()=>[l(y,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(v,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...h[1]||(h[1]=[p("span",{class:"text-body-2 font-weight-medium"},"Filter Payment Receipts",-1)])]),_:1})]),_:1}),p("div",H5e,[p("div",$5e,[l(g,{modelValue:r.value,"onUpdate:modelValue":[h[0]||(h[0]=x=>r.value=x),c],type:"date",label:"Payment Receipt Date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input date-input",max:s.value,"onClick:clear":A},null,8,["modelValue","max"]),r.value?(R(),ve(w,{key:0,size:"small",color:"primary",variant:"outlined",closable:"",class:"mt-2","onClick:close":A},{default:u(()=>[O(" Date: "+q(i(r.value)),1)]),_:1})):_e("",!0)]),p("div",Q5e,[l(b,{variant:"text",size:"small","prepend-icon":"mdi-filter-remove",onClick:f,class:"filter-button-clear",disabled:!o.value},{default:u(()=>[...h[2]||(h[2]=[O(" Clear ",-1)])]),_:1},8,["disabled"])])])]),_:1})}}},z5e=Xt(G5e,[["__scopeId","data-v-e2fa6283"]]),K5e={class:"scrollable-content"},W5e={class:"scrollable-content"},j5e={class:"text-center"},q5e={class:"text-center"},Y5e={class:"text-body-2 text-medium-emphasis mb-4"},X5e={class:"text-center"},J5e={class:"text-body-2 text-medium-emphasis"},Z5e={class:"font-weight-bold",style:{color:"black"}},eMe={key:0,class:"text-body-2 mb-1"},tMe={class:"font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},nMe={key:1,class:"text-body-2 text-medium-emphasis mb-1"},aMe={key:0,class:"amount-badge"},rMe={class:"text-body-1 font-weight-bold"},sMe={__name:"payments",setup(e){const{showSnackbar:t}=ra(),n=ea(),a=M(0),r=M([]),s=M(""),o=M(null),i=M(!1),c=M(null),A=M(!1),d=M(!1),f=M(!1),m=M(null),h=M(!1),v=M(null),y=M(!1);ee(()=>Dn());const g=ee(()=>n.getters["doctorModule/isGSTRegistered"]),w=async()=>{if(!i.value)try{i.value=!0,c.value=null;const se=await bw(n,s.value?.trim()||"");if(se.error)throw new Error(`Search failed: ${se.error.message||"Unknown error"}`);const G=Array.isArray(se.data)?se.data:[];r.value=G.filter(D=>D.status!=="Series"),A.value=!0,s.value&&t({message:`Found ${r.value.length} payment receipt${r.value.length!==1?"s":""}`,color:"success",timeout:3e3})}catch(se){console.error("Error fetching payment receipts:",se),c.value=se.message||"Failed to search payment receipts",r.value=[],A.value=!0,t({message:c.value,color:"error",timeout:5e3})}finally{i.value=!1}},b=()=>{c.value=null,w()},x=()=>{try{s.value="",c.value=null,A.value=!0,w(),t({message:"Filters cleared successfully",color:"success",timeout:3e3})}catch(se){console.error("Error clearing filters:",se),o.value="Failed to clear filters"}},T=se=>{s.value=se.paymentDate||"",se.hasErrors||(A.value=!0,J())},U=se=>{s.value=se.paymentDate||"",w()},k=se=>{if(g.value){const G=r.value.find(j=>j.id===se),D=G?.billId||G?.billid;D?(v.value=D,h.value=!0):(t({message:"No associated bill found. Showing payment receipt view.",color:"info",timeout:3e3}),m.value=se,d.value=!0)}else m.value=se,d.value=!0},S=se=>{if(g.value){const G=r.value.find(j=>j.id===se),D=G?.billId||G?.billid;D?(v.value=D,y.value=!0):(t({message:"No associated bill found. Showing payment receipt edit.",color:"info",timeout:3e3}),m.value=se,f.value=!0)}else console.log("Edit receipt:",se),m.value=se,f.value=!0},E=()=>{d.value=!1,m.value=null},C=()=>{f.value=!1,m.value=null},P=se=>{d.value=!1,m.value=se,f.value=!0},F=()=>{h.value=!1,v.value=null},N=se=>{h.value=!1,v.value=null,v.value=se,y.value=!0},L=()=>{y.value=!1,v.value=null},ie=se=>{console.log("Bill updated:",se),y.value=!1,v.value=null,w(),t({message:`Bill ${se.identifier} updated successfully!`,color:"success",timeout:3e3})},le=se=>{console.log("Receipt updated:",se),f.value=!1,m.value=null,w(),t({message:`Receipt ${se.identifier} updated successfully!`,color:"success",timeout:3e3})},Q=se=>{if(!se)return"";try{let G;typeof se=="number"?G=new Date(se*1e3):G=new Date(se);const D=go(G,"d MMM"),j=go(G,"EEE");return`${D}, ${j}`}catch(G){return console.error("Error formatting created day:",G),""}},Z=se=>{if(!se)return"";try{let G;typeof se=="number"?G=new Date(se*1e3):G=new Date(se);const D=G.getHours(),j=G.getMinutes(),ne=D%12||12,H=D>=12?"PM":"AM";return`${ne}.${j.toString().padStart(2,"0")}${H}`}catch(G){return console.error("Error formatting created time:",G),""}};let ce;const J=()=>{clearTimeout(ce),ce=setTimeout(()=>{w()},500)};return We([s],()=>{A.value=!0,J()}),cn(()=>{try{r.value.length===0&&!A.value&&(A.value=!0,w())}catch(se){console.error("Error on mount:",se),o.value="Failed to initialize"}}),Z0(()=>{}),(se,G)=>{const D=I("v-alert"),j=I("v-tab"),ne=I("v-tabs"),H=I("v-card"),te=I("v-col"),Y=I("v-row"),K=I("v-progress-circular"),X=I("v-icon"),ae=I("v-btn"),oe=I("v-card-text"),W=I("v-empty-state"),de=I("v-card-title"),Ae=I("v-tooltip"),Ce=I("v-divider"),De=I("v-lazy"),xe=I("v-window-item"),ke=I("v-window"),Ee=I("v-main"),ye=I("v-dialog");return R(),me(ze,null,[l(Ee,null,{default:u(()=>[o.value?(R(),ve(D,{key:0,type:"error",dismissible:"","onClick:close":G[0]||(G[0]=we=>o.value=null),class:"ma-3"},{default:u(()=>[O(q(o.value),1)]),_:1})):_e("",!0),l(Y,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[l(te,{cols:"12"},{default:u(()=>[l(H,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center"},{default:u(()=>[l(ne,{modelValue:a.value,"onUpdate:modelValue":G[1]||(G[1]=we=>a.value=we),color:"primary","align-tabs":"start",class:"w-100"},{default:u(()=>[l(j,{value:0},{default:u(()=>[...G[7]||(G[7]=[O("List",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(ke,{modelValue:a.value,"onUpdate:modelValue":G[2]||(G[2]=we=>a.value=we),class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[l(xe,{value:0,style:{height:"100%"}},{default:u(()=>[l(Y,{"aria-label":"main row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[l(te,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[p("div",K5e,[l(z5e,{"payment-date":s.value,onFilterChange:T,onSearch:U,onClear:x},null,8,["payment-date"])])]),_:1}),l(te,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[p("div",W5e,[l(H,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[i.value?(R(),ve(Y,{key:0,"no-gutters":""},{default:u(()=>[l(te,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[p("div",j5e,[l(K,{indeterminate:"",color:"primary",size:"64"}),G[8]||(G[8]=p("div",{class:"mt-4 text-subtitle-1"},"Searching payment receipts...",-1))])]),_:1})]),_:1})):c.value?(R(),ve(Y,{key:1,"no-gutters":""},{default:u(()=>[l(te,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[p("div",q5e,[l(X,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...G[9]||(G[9]=[O("mdi-alert-circle",-1)])]),_:1}),G[11]||(G[11]=p("div",{class:"text-h6 mb-2"},"Search Failed",-1)),p("div",Y5e,q(c.value),1),l(ae,{color:"primary",onClick:b,"prepend-icon":"mdi-refresh"},{default:u(()=>[...G[10]||(G[10]=[O(" Try Again ",-1)])]),_:1})])]),_:1})]),_:1})):r.value&&r.value.length===0&&A.value?(R(),me(ze,{key:2},[l(H,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(oe,{class:"pt-2 pb-0"},{default:u(()=>[...G[12]||(G[12]=[p("strong",null,"0",-1),O(" results found ",-1)])]),_:1})]),_:1}),l(W,{image:Oe(Ph),class:"d-flex justify-center"},{title:u(()=>[...G[13]||(G[13]=[p("div",{class:"text-subtitle-2 mt-8 text-center"}," No Payment Receipts Found ",-1)])]),text:u(()=>[...G[14]||(G[14]=[p("div",{class:"text-caption text-center"}," Try adjusting your search criteria or clear filters to see all receipts ",-1)])]),actions:u(()=>[l(ae,{color:"primary",variant:"outlined",onClick:x,"prepend-icon":"mdi-filter-remove"},{default:u(()=>[...G[15]||(G[15]=[O(" Clear Filters ",-1)])]),_:1})]),_:1},8,["image"])],64)):A.value?r.value&&r.value.length>0?(R(),me(ze,{key:4},[l(H,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(oe,{class:"pt-2 pb-0"},{default:u(()=>[p("strong",null,q(r.value.length),1),O(" result"+q(r.value.length!==1?"s":"")+" found ",1)]),_:1})]),_:1}),l(Y,{"no-gutters":""},{default:u(()=>[l(te,{cols:"12",class:"scroll-element mt-2",style:{"padding-bottom":"20px"}},{default:u(()=>[(R(!0),me(ze,null,Wt(r.value,(we,at)=>(R(),ve(De,{key:we?.id||`receipt-${at}`,options:{threshold:.1,rootMargin:"50px"},"min-height":"80"},{default:u(()=>[we?(R(),ve(H,{key:0,style:{textAlign:"left"},density:"compact",class:"mb-2 mx-2 card-enhanced card-status-default card-hover-base",rounded:"lg"},{default:u(()=>[l(Y,{"no-gutters":""},{default:u(()=>[l(te,{cols:"8"},{default:u(()=>[l(de,{class:"pb-0 pt-2"},{default:u(()=>[p("div",J5e,[we?.identifier?(R(),me(ze,{key:0},[p("span",Z5e,"Receipt ID: "+q(we.identifier),1),G[19]||(G[19]=O("  ",-1))],64)):_e("",!0),we?.createdAt||we?.paymentReceiptDate?(R(),me(ze,{key:1},[O(q(Q(we.createdAt||we.paymentReceiptDate))+"  "+q(Z(we.createdAt||we.paymentReceiptDate)),1)],64)):_e("",!0)])]),_:2},1024),l(oe,{class:"pb-1"},{default:u(()=>[we?.patientName?(R(),me("div",eMe,[l(X,{size:"small",class:"mr-1"},{default:u(()=>[...G[20]||(G[20]=[O("mdi-account",-1)])]),_:1}),p("span",tMe,q(we.patientName),1)])):_e("",!0),we?.servicesInfo?(R(),me("div",nMe,[l(X,{size:"small",class:"mr-1"},{default:u(()=>[...G[21]||(G[21]=[O("mdi-file-document-outline",-1)])]),_:1}),O(" "+q(we.servicesInfo),1)])):_e("",!0)]),_:2},1024)]),_:2},1024),l(te,{cols:"2",class:"d-flex justify-center align-center"},{default:u(()=>[we?.totalPaid!==void 0?(R(),me("div",aMe,[p("div",rMe,q(Oe(ar)(we.totalPaid)),1)])):_e("",!0)]),_:2},1024),l(te,{cols:"2",class:"d-flex justify-center align-center"},{default:u(()=>[l(Y,{"no-gutters":""},{default:u(()=>[l(te,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[l(xn,{feature:"billing"},{default:u(()=>[l(Ae,{text:"View Receipt"},{activator:u(({props:Je})=>[l(ae,Fe({variant:"plain",color:"primary",size:"small"},{ref_for:!0},Je,{onClick:mn(rt=>k(we.id),["stop"]),class:"btn-hover-base mb-2"}),{default:u(()=>[l(X,{size:"18"},{default:u(()=>[...G[22]||(G[22]=[O("mdi-eye",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),l(Ce,{class:"mx-4"}),l(te,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[l(xn,{permission:"billing.edit"},{default:u(()=>[l(Ae,{text:"Edit Receipt"},{activator:u(({props:Je})=>[l(ae,Fe({variant:"plain",color:"secondary",size:"small"},{ref_for:!0},Je,{onClick:mn(rt=>S(we.id),["stop"]),class:"btn-hover-base mt-1"}),{default:u(()=>[l(X,{size:"18"},{default:u(()=>[...G[23]||(G[23]=[O("mdi-pencil",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):_e("",!0)]),_:2},1024))),128))]),_:1})]),_:1})],64)):_e("",!0):(R(),ve(Y,{key:3,"no-gutters":""},{default:u(()=>[l(te,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[p("div",X5e,[l(X,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...G[16]||(G[16]=[O("mdi-currency-inr",-1)])]),_:1}),G[17]||(G[17]=p("div",{class:"text-h6 mb-2"},"Search for Payment Receipts",-1)),G[18]||(G[18]=p("div",{class:"text-body-2 text-medium-emphasis"},"Use the filters on the left to find payment receipts",-1))])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(ye,{modelValue:d.value,"onUpdate:modelValue":G[3]||(G[3]=we=>d.value=we),persistent:"","max-width":"70%"},{default:u(()=>[m.value?(R(),ve(rH,{key:0,"receipt-id":m.value,onClose:E,onEditReceipt:P},null,8,["receipt-id"])):_e("",!0)]),_:1},8,["modelValue"]),l(ye,{modelValue:h.value,"onUpdate:modelValue":G[4]||(G[4]=we=>h.value=we),persistent:"","max-width":"80%"},{default:u(()=>[v.value?(R(),ve(uH,{key:0,"bill-id":v.value,onClose:F,onEditBill:N},null,8,["bill-id"])):_e("",!0)]),_:1},8,["modelValue"]),l(ye,{modelValue:f.value,"onUpdate:modelValue":G[5]||(G[5]=we=>f.value=we),persistent:"","max-width":"70%"},{default:u(()=>[m.value?(R(),ve(qM,{key:0,"receipt-id":m.value,onClose:C,onReceiptUpdated:le},null,8,["receipt-id"])):_e("",!0)]),_:1},8,["modelValue"]),l(ye,{modelValue:y.value,"onUpdate:modelValue":G[6]||(G[6]=we=>y.value=we),persistent:"","max-width":"85%"},{default:u(()=>[v.value?(R(),ve(cH,{key:0,"bill-id":v.value,onClose:L,onBillUpdated:ie},null,8,["bill-id"])):_e("",!0)]),_:1},8,["modelValue"])],64)}}},oMe=Xt(sMe,[["__scopeId","data-v-ac0be4df"]]),iMe={class:"filter-container pa-3",style:{flex:"1 1 auto","overflow-y":"auto"}},lMe={class:"filter-field mb-3"},uMe={key:0,class:"filter-section mb-3"},cMe={class:"filter-section-label mb-2"},dMe={class:"d-flex justify-center mt-4 mb-2"},AMe={class:"d-flex justify-center"},fMe={key:1,class:"mt-4"},mMe={class:"text-caption text-medium-emphasis"},hMe={class:"mb-1"},vMe={key:0},pMe={key:1},gMe={key:2},yMe={key:3},_Me={__name:"ReportFilter",props:{filters:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},emits:["filter-change","start-report","clear-filters"],setup(e,{emit:t}){const n=e,a=t,r=M({reportType:"3c-daily-case-register",selectedDate:"",startDate:"",endDate:"",...n.filters}),s=M([{label:"3C Daily Case Register",value:"3c-daily-case-register"},{label:"Payment Report",value:"payment-report"},{label:"GST Bill Report",value:"gst-bill-report"},{label:"GST Detail Report",value:"gst-detail-report"}]),o=ee(()=>r.value.reportType?r.value.reportType==="3c-daily-case-register"?!!r.value.selectedDate:r.value.reportType==="payment-report"||r.value.reportType==="gst-bill-report"||r.value.reportType==="gst-detail-report"?!!(r.value.startDate&&r.value.endDate):!0:!1);We(()=>n.filters,m=>{r.value={...r.value,...m}},{deep:!0});const i=()=>{a("filter-change",{...r.value})},c=()=>{o.value&&a("start-report",{...r.value})},A=()=>{r.value={reportType:"3c-daily-case-register",selectedDate:"",startDate:"",endDate:""},a("clear-filters"),i()},d=m=>{const h=s.value.find(v=>v.value===m);return h?h.label:m},f=m=>m?new Date(m).toLocaleDateString():"";return(m,h)=>{const v=I("v-card-text"),y=I("v-card"),g=I("v-select"),w=I("v-text-field"),b=I("v-col"),x=I("v-row"),T=I("v-btn"),U=I("v-form");return R(),ve(y,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[l(y,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(v,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...h[4]||(h[4]=[p("span",{class:"text-body-2 font-weight-medium"},"Report Configuration",-1)])]),_:1})]),_:1}),p("div",iMe,[l(U,{onSubmit:mn(c,["prevent"])},{default:u(()=>[p("div",lMe,[l(g,{modelValue:r.value.reportType,"onUpdate:modelValue":[h[0]||(h[0]=k=>r.value.reportType=k),i],items:s.value,"item-title":"label","item-value":"value",label:"Report Type",variant:"outlined",density:"compact",class:"filter-input"},null,8,["modelValue","items"])]),r.value.reportType?(R(),me("div",uMe,[p("div",cMe,q(r.value.reportType==="3c-daily-case-register"?"Select Date":"Select Date Range"),1),r.value.reportType==="3c-daily-case-register"?(R(),ve(w,{key:0,modelValue:r.value.selectedDate,"onUpdate:modelValue":[h[1]||(h[1]=k=>r.value.selectedDate=k),i],type:"date",label:"Report Date",variant:"outlined",density:"compact",class:"filter-input date-input"},null,8,["modelValue"])):r.value.reportType==="payment-report"||r.value.reportType==="gst-bill-report"||r.value.reportType==="gst-detail-report"?(R(),ve(x,{key:1,dense:""},{default:u(()=>[l(b,{cols:"6"},{default:u(()=>[l(w,{modelValue:r.value.startDate,"onUpdate:modelValue":[h[2]||(h[2]=k=>r.value.startDate=k),i],type:"date",label:"Start Date",variant:"outlined",density:"compact",class:"filter-input date-input"},null,8,["modelValue"])]),_:1}),l(b,{cols:"6"},{default:u(()=>[l(w,{modelValue:r.value.endDate,"onUpdate:modelValue":[h[3]||(h[3]=k=>r.value.endDate=k),i],type:"date",label:"End Date",variant:"outlined",density:"compact",class:"filter-input date-input"},null,8,["modelValue"])]),_:1})]),_:1})):_e("",!0)])):_e("",!0),p("div",dMe,[l(T,{type:"submit",color:"primary",size:"small",loading:e.loading,disabled:!o.value,"prepend-icon":"mdi-chart-line",class:"filter-button"},{default:u(()=>[...h[5]||(h[5]=[O(" Generate Report ",-1)])]),_:1},8,["loading","disabled"])]),p("div",AMe,[l(T,{variant:"text",size:"small",onClick:A,"prepend-icon":"mdi-filter-remove",class:"filter-button-clear"},{default:u(()=>[...h[6]||(h[6]=[O(" Clear ",-1)])]),_:1})]),r.value.reportType?(R(),me("div",fMe,[l(y,{variant:"outlined",class:"pa-2",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.02)"}},{default:u(()=>[p("div",mMe,[p("div",hMe,[h[7]||(h[7]=p("strong",null,"Type:",-1)),O(" "+q(d(r.value.reportType)),1)]),r.value.reportType==="3c-daily-case-register"&&r.value.selectedDate?(R(),me("div",vMe,[h[8]||(h[8]=p("strong",null,"Date:",-1)),O(" "+q(f(r.value.selectedDate)),1)])):_e("",!0),r.value.reportType==="payment-report"&&r.value.startDate&&r.value.endDate?(R(),me("div",pMe,[h[9]||(h[9]=p("strong",null,"Date Range:",-1)),O(" "+q(f(r.value.startDate))+" - "+q(f(r.value.endDate)),1)])):_e("",!0),r.value.reportType==="gst-bill-report"&&r.value.startDate&&r.value.endDate?(R(),me("div",gMe,[h[10]||(h[10]=p("strong",null,"Date Range:",-1)),O(" "+q(f(r.value.startDate))+" - "+q(f(r.value.endDate)),1)])):_e("",!0),r.value.reportType==="gst-detail-report"&&r.value.startDate&&r.value.endDate?(R(),me("div",yMe,[h[11]||(h[11]=p("strong",null,"Date Range:",-1)),O(" "+q(f(r.value.startDate))+" - "+q(f(r.value.endDate)),1)])):_e("",!0)])]),_:1})])):_e("",!0)]),_:1})])]),_:1})}}},wMe=Xt(_Me,[["__scopeId","data-v-26d5957c"]]),bMe={class:"scrollable-content"},xMe={class:"scrollable-content"},CMe={key:1},SMe={class:"text-center"},EMe={class:"mt-4 text-subtitle-1"},BMe={key:0,class:"mt-4"},kMe={class:"mb-2"},TMe={class:"mb-2"},IMe={key:0,class:"mb-2"},FMe={key:1},PMe={class:"text-center"},DMe={__name:"reports",setup(e){const t=ea(),n=M(!1),a=M(""),r=M(!1),s=M(""),o=M(!1),i=M(0),c=M(""),A=M([]),d=M(null),f=M(!1),m=M({reportType:"3c-daily-case-register",selectedDate:"",startDate:"",endDate:"",includeCharts:!0,format:"pdf",includePatientDetails:!0,includeConsultationNotes:!1,includeTaxDetails:!0,includePaymentMethods:!0}),h=M([{title:"Date",key:"date",sortable:!0},{title:"Report Type",key:"reportType",sortable:!0},{title:"Format",key:"format",sortable:!0},{title:"Records",key:"recordCount",sortable:!0},{title:"Status",key:"status",sortable:!0}]),v=D=>{m.value={...m.value,...D}},y=()=>{m.value={reportType:"3c-daily-case-register",selectedDate:"",startDate:"",endDate:"",includeCharts:!0,format:"pdf",includePatientDetails:!0,includeConsultationNotes:!1,includeTaxDetails:!0,includePaymentMethods:!0}},g=async D=>{try{o.value=!0,i.value=0,c.value="Preparing report...",d.value=null,f.value=!1,console.log("Starting report generation with filters:",D),D.reportType==="3c-daily-case-register"?await le(D):D.reportType==="payment-report"?await F(D):D.reportType==="gst-bill-report"?await w(D):D.reportType==="gst-detail-report"?await E(D):await G(D)}catch(j){console.error("Report generation error:",j),o.value=!1,i.value=0,c.value="",f.value=!1,r.value=!0,s.value="Report generation failed: "+j.message}finally{setTimeout(()=>{f.value&&(o.value=!1)},1500)}},w=async D=>{try{if(!D.startDate||!D.endDate)throw new Error("Please select both start and end dates for the GST Bill Report");const j=new Date(D.startDate),ne=new Date(D.endDate);if(j>ne)throw new Error("Start date must be less than or equal to end date");i.value=20,c.value="Fetching bills for date range...";const H=await IE(t,D.startDate,D.endDate);if(H.error)throw new Error(`Failed to fetch bills: ${H.error.message||"Unknown error"}`);i.value=40,c.value="Processing bill data...";const te=Array.isArray(H.data)?H.data:[],Y=te.filter(de=>de.status!=="Series");console.log(`Found ${Y.length} valid bills out of ${te.length} total bills for date range`),i.value=60,c.value="Transforming data to GST Bill Report format...";const K=await x(Y,D.startDate,D.endDate);i.value=80,c.value="Generating CSV file...";const X=U(K);i.value=90,c.value="Preparing download...";const ae=`gst_bill_report_${D.startDate}_to_${D.endDate}.csv`,oe=await P(X,ae);if(!oe.success)throw new Error(oe.error||"Failed to save report file");i.value=100,c.value="GST Bill Report generated successfully!",d.value={reportType:"GST Bill Report",totalRecords:K.length,dateRange:{from:D.startDate,to:D.endDate},filename:ae},f.value=!0;const W={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"GST Bill Report",format:"CSV",recordCount:K.length,status:"Completed",filename:ae};A.value.unshift(W),n.value=!0,a.value=`GST Bill Report generated successfully! ${K.length} records included.`}catch(j){throw console.error("GST Bill Report generation error:",j),j}},b=D=>{if(!D.services||!Array.isArray(D.services)||D.services.length===0)return{itemTotal:0,gstAmount:0,totalWithGST:0,grandTotal:0};let j=0,ne=0,H=0;D.services.forEach(K=>{const X=parseFloat(K.baseCost)||0,ae=parseInt(K.quantity)||1,oe=parseFloat(K.gstPercent)||0,W=parseFloat(K.discountAmount)||0,de=X*ae,Ae=W*ae,Ce=Math.max(0,de-Ae),De=oe>0?Math.round(Ce*oe/(100+oe)):0,xe=Ce-De;j+=xe,ne+=De,H+=Ce});const te=parseFloat(D.additionalDiscount)||0,Y=Math.max(0,H-te);return{itemTotal:Math.round(j),gstAmount:ne,totalWithGST:Math.round(H),grandTotal:Math.round(Y)}},x=async(D,j,ne)=>{const H=[],te=D.sort((Y,K)=>{const X=new Date(Y.billDate),ae=new Date(K.billDate);return X-ae});for(const Y of te){const K=await T(Y.id),X=b(Y),ae={billIdentifier:Y.identifier||"",billDate:Y.billDate||"",patientName:Y.patientName||"Unknown Patient",services:Y.servicesDescription||"",itemTotal:X.itemTotal,gstAmount:X.gstAmount,totalWithGST:X.totalWithGST,additionalDiscount:Y.additionalDiscount||0,grandTotal:X.grandTotal,cash:K.cash||0,card:K.card||0,upi:K.upi||0,bankTransfer:K.bankTransfer||0,cheque:K.cheque||0,online:K.online||0};H.push(ae)}return console.log("Transformed GST Bill Report data:",H),H},T=async D=>{const j={cash:0,card:0,upi:0,bankTransfer:0,cheque:0,online:0};try{const{getReceiptsByBill:ne,getPaymentsByReceipt:H}=await xr(async()=>{const{getReceiptsByBill:K,getPaymentsByReceipt:X}=await Promise.resolve().then(()=>e2e);return{getReceiptsByBill:K,getPaymentsByReceipt:X}},void 0,import.meta.url),{getPaymentsByReceipt:te}=await xr(async()=>{const{getPaymentsByReceipt:K}=await Promise.resolve().then(()=>Ehe);return{getPaymentsByReceipt:K}},void 0,import.meta.url),Y=await ne(D);if(Y.success&&Array.isArray(Y.data))for(const K of Y.data){const X=await te(K.id);X.success&&Array.isArray(X.data)&&X.data.forEach(ae=>{const oe=ae.mode?.toLowerCase(),W=ae.amount||0;switch(oe){case"cash":j.cash+=W;break;case"card":j.card+=W;break;case"upi":j.upi+=W;break;case"bank transfer":case"banktransfer":j.bankTransfer+=W;break;case"cheque":j.cheque+=W;break;case"online":j.online+=W;break;default:j.online+=W;break}})}}catch(ne){console.error("Error fetching payment modes for bill:",D,ne)}return j},U=D=>{const ne=[["Bill Identifier","Bill Date","Patient Name","Services","Total Taxable Value","GST Amount","Total with GST","Additional Discount","Grand Total","Cash","Card","UPI","Bank Transfer","Cheque","Online"].join(",")];return D.forEach(H=>{const te=[ce(H.billIdentifier),H.billDate,ce(H.patientName),ce(H.services),H.itemTotal,H.gstAmount,H.totalWithGST,H.additionalDiscount,H.grandTotal,H.cash,H.card,H.upi,H.bankTransfer,H.cheque,H.online];ne.push(te.join(","))}),ne.join(`
`)},k=D=>{const j=parseFloat(D.baseCost)||0,ne=parseInt(D.quantity)||1,H=parseFloat(D.gstPercent)||0,te=parseFloat(D.discountAmount)||0,Y=j*ne,K=te*ne,X=Math.max(0,Y-K),ae=H>0?Math.round(X*H/(100+H)):0,oe=X-ae,W=X;return{baseCost:j,discountAmount:te,gstPercent:H,quantity:ne,taxableValue:Math.round(oe),gstAmount:ae,total:Math.round(W)}},S=async(D,j,ne)=>{const H=[],te=D.sort((Y,K)=>{const X=new Date(Y.billDate),ae=new Date(K.billDate);return X-ae});for(const Y of te)if(!(!Y.services||!Array.isArray(Y.services)||Y.services.length===0))for(const K of Y.services){const X=k(K),ae={billIdentifier:Y.identifier||"",billDate:Y.billDate||"",patientName:Y.patientName||"Unknown Patient",serviceDescription:K.serviceDescription||"",hsnSacCode:K.hsnSacCode||"",baseCost:X.baseCost,discountAmount:X.discountAmount,gstPercent:X.gstPercent,quantity:X.quantity,taxableValue:X.taxableValue,gstAmount:X.gstAmount,total:X.total};H.push(ae)}return console.log("Transformed GST Detail Report data:",H),H},E=async D=>{try{i.value=10,c.value="Fetching bills data...",i.value=30,c.value="Loading bills from database...";const j=await IE(t,D.startDate,D.endDate);if(j.error)throw new Error(j.error.message||"Failed to fetch bills");const ne=Array.isArray(j.data)?j.data:[],H=ne.filter(oe=>oe.status!=="Series");console.log(`Found ${H.length} valid bills out of ${ne.length} total bills for date range`),i.value=60,c.value="Transforming data to GST Detail Report format...";const te=await S(H,D.startDate,D.endDate);i.value=80,c.value="Generating CSV file...";const Y=C(te);i.value=90,c.value="Preparing download...";const K=`gst_detail_report_${D.startDate}_to_${D.endDate}.csv`,X=await P(Y,K);if(!X.success)throw new Error(X.error||"Failed to save report file");i.value=100,c.value="GST Detail Report generated successfully!",d.value={reportType:"GST Detail Report",totalRecords:te.length,dateRange:{from:D.startDate,to:D.endDate},filename:K},f.value=!0;const ae={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"GST Detail Report",format:"CSV",recordCount:te.length,status:"Completed",filename:K};A.value.unshift(ae),n.value=!0,a.value=`GST Detail Report generated successfully! ${te.length} line items included.`}catch(j){throw console.error("GST Detail Report generation error:",j),j}},C=D=>{const ne=[["Bill Identifier","Bill Date","Patient Name","Service Description","HSN/SAC Code","Base Cost per unit (incl. GST)","Discount per unit","GST %","Quantity","Taxable Value","GST Amount","Total (incl. GST)"].join(",")];return D.forEach(H=>{const te=[ce(H.billIdentifier),H.billDate,ce(H.patientName),ce(H.serviceDescription),ce(H.hsnSacCode),H.baseCost,H.discountAmount,H.gstPercent,H.quantity,H.taxableValue,H.gstAmount,H.total];ne.push(te.join(","))}),ne.join(`
`)},P=async(D,j)=>{try{const ne=new Blob([D],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const H=await window.electronAPI.showSaveDialog({defaultPath:j,filters:[{name:"CSV Files",extensions:["csv"]}]});return!H.canceled&&H.filePath?(await window.electronAPI.writeFile(H.filePath,D),{success:!0,filePath:H.filePath,filename:j}):{success:!1,error:"Save canceled by user"}}else{const H=document.createElement("a"),te=URL.createObjectURL(ne);return H.setAttribute("href",te),H.setAttribute("download",j),H.style.visibility="hidden",document.body.appendChild(H),H.click(),document.body.removeChild(H),URL.revokeObjectURL(te),{success:!0,filePath:`Downloaded: ${j}`,filename:j}}}catch(ne){return console.error("Error saving GST Bill Report file:",ne),{success:!1,error:ne.message}}},F=async D=>{try{if(!D.startDate||!D.endDate)throw new Error("Please select both start and end dates for the Payment Report");const j=new Date(D.startDate),ne=new Date(D.endDate);if(j>ne)throw new Error("Start date must be less than or equal to end date");i.value=20,c.value="Fetching payment receipts for date range...";const H=await VM(t,D.startDate,D.endDate);if(H.error)throw new Error(`Failed to fetch payment receipts: ${H.error.message||"Unknown error"}`);i.value=40,c.value="Processing payment data...";const te=Array.isArray(H.data)?H.data:[],Y=te.filter(de=>de.status==="Created"||de.status==="Completed");console.log(`Found ${Y.length} valid receipts out of ${te.length} total receipts for date range`),i.value=60,c.value="Transforming data to Payment Report format...";const K=N(Y,D.startDate,D.endDate);i.value=80,c.value="Generating CSV file...";const X=L(K);i.value=90,c.value="Preparing download...";const ae=`payment_report_${D.startDate}_to_${D.endDate}.csv`,oe=await ie(X,ae);if(!oe.success)throw new Error(oe.error||"Failed to save report file");i.value=100,c.value="Payment Report generated successfully!",d.value={reportType:"Payment Report",totalRecords:K.length,dateRange:{from:D.startDate,to:D.endDate},filename:ae},f.value=!0;const W={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"Payment Report",format:"CSV",recordCount:K.length,status:"Completed",filename:ae};A.value.unshift(W),n.value=!0,a.value=`Payment Report generated successfully! ${K.length} records included.`}catch(j){throw console.error("Payment Report generation error:",j),j}},N=(D,j,ne)=>{const H=D.sort((Y,K)=>{const X=new Date(Y.paymentReceiptDate||Y.createdAt),ae=new Date(K.paymentReceiptDate||K.createdAt);return X-ae}),te=[];return H.forEach(Y=>{const K={cash:0,card:0,upi:0,bankTransfer:0,cheque:0,online:0};Y.payments&&Array.isArray(Y.payments)&&Y.payments.forEach(oe=>{const W=oe.mode?.toLowerCase(),de=oe.amount||0;switch(W){case"cash":K.cash+=de;break;case"card":K.card+=de;break;case"upi":K.upi+=de;break;case"bank transfer":case"banktransfer":K.bankTransfer+=de;break;case"cheque":K.cheque+=de;break;case"online":K.online+=de;break;default:K.online+=de;break}});const X=Y.servicesInfo||"",ae={paymentReceiptId:Y.identifier||"",patientName:Y.patientName||"Unknown Patient",services:X,totalAmount:Y.totalAmount||0,cash:K.cash,card:K.card,upi:K.upi,bankTransfer:K.bankTransfer,cheque:K.cheque,online:K.online,receiptDate:se(Y.paymentReceiptDate||Y.createdAt)};te.push(ae)}),console.log("Transformed Payment Report data:",te),te},L=D=>{const ne=[["Payment Receipt ID","Patient Name","Services","Total Amount","Cash","Card","UPI","Bank Transfer","Cheque","Online","Receipt Date"].join(",")];return D.forEach(H=>{const te=[ce(H.paymentReceiptId),ce(H.patientName),ce(H.services),H.totalAmount,H.cash,H.card,H.upi,H.bankTransfer,H.cheque,H.online,H.receiptDate];ne.push(te.join(","))}),ne.join(`
`)},ie=async(D,j)=>{try{const ne=new Blob([D],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const H=await window.electronAPI.showSaveDialog({defaultPath:j,filters:[{name:"CSV Files",extensions:["csv"]}]});return!H.canceled&&H.filePath?(await window.electronAPI.writeFile(H.filePath,D),{success:!0,filePath:H.filePath,filename:j}):{success:!1,error:"Save canceled by user"}}else{const H=document.createElement("a"),te=URL.createObjectURL(ne);return H.setAttribute("href",te),H.setAttribute("download",j),H.style.visibility="hidden",document.body.appendChild(H),H.click(),document.body.removeChild(H),URL.revokeObjectURL(te),{success:!0,filePath:`Downloaded: ${j}`,filename:j}}}catch(ne){return console.error("Error saving Payment Report file:",ne),{success:!1,error:ne.message}}},le=async D=>{try{if(!D.selectedDate)throw new Error("Please select a date for the 3C Daily Case Register report");i.value=20,c.value="Fetching payment receipts...";const j=await bw(t,D.selectedDate);if(j.error)throw new Error(`Failed to fetch payment receipts: ${j.error.message||"Unknown error"}`);i.value=40,c.value="Processing receipt data...";const ne=Array.isArray(j.data)?j.data:[],H=ne.filter(oe=>oe.status==="Created"||oe.status==="Completed");console.log(`Found ${H.length} valid receipts out of ${ne.length} total receipts`),i.value=60,c.value="Transforming data to 3C format...";const te=Q(H,D.selectedDate);i.value=80,c.value="Generating CSV file...";const Y=Z(te);i.value=90,c.value="Preparing download...";const K=`3c_daily_case_register_${D.selectedDate}.csv`,X=await J(Y,K);if(!X.success)throw new Error(X.error||"Failed to save report file");i.value=100,c.value="Report generated successfully!",d.value={reportType:"3C Daily Case Register",totalRecords:te.length,dateRange:{from:D.selectedDate,to:D.selectedDate},filename:K},f.value=!0;const ae={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"3C Daily Case Register",format:"CSV",recordCount:te.length,status:"Completed",filename:K};A.value.unshift(ae),n.value=!0,a.value=`3C Report generated successfully! ${te.length} records included.`}catch(j){throw console.error("3C Report generation error:",j),j}},Q=(D,j)=>{const ne=D.sort((Y,K)=>{const X=new Date(Y.paymentReceiptDate||Y.createdAt),ae=new Date(K.paymentReceiptDate||K.createdAt);return X-ae}),H=[];let te=1;return ne.forEach(Y=>{const K=Y.servicesInfo||"",X={date:j,serialNumber:te++,patientName:Y.patientName||"Unknown Patient",services:K,feesReceived:Y.totalPaid||0,dateOfReceipt:se(Y.paymentReceiptDate||Y.createdAt),paymentReceiptNo:Y.identifier||""};H.push(X)}),console.log("Transformed 3C data:",H),H},Z=D=>{const ne=[["Date","Serial Number","Patient Name","Services","Fees Received","Date of Receipt","Payment Receipt No."].join(",")];return D.forEach(H=>{const te=[H.date,H.serialNumber,ce(H.patientName),ce(H.services),H.feesReceived,H.dateOfReceipt,ce(H.paymentReceiptNo)];ne.push(te.join(","))}),ne.join(`
`)},ce=D=>{if(D==null)return"";const j=String(D);return j.includes(",")||j.includes('"')||j.includes(`
`)?`"${j.replace(/"/g,'""')}"`:j},J=async(D,j)=>{try{const ne=new Blob([D],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const H=await window.electronAPI.showSaveDialog({defaultPath:j,filters:[{name:"CSV Files",extensions:["csv"]}]});return!H.canceled&&H.filePath?(await window.electronAPI.writeFile(H.filePath,D),{success:!0,filePath:H.filePath,filename:j}):{success:!1,error:"Save canceled by user"}}else{const H=document.createElement("a"),te=URL.createObjectURL(ne);return H.setAttribute("href",te),H.setAttribute("download",j),H.style.visibility="hidden",document.body.appendChild(H),H.click(),document.body.removeChild(H),URL.revokeObjectURL(te),{success:!0,filePath:`Downloaded: ${j}`,filename:j}}}catch(ne){return console.error("Error saving 3C report file:",ne),{success:!1,error:ne.message}}},se=D=>{if(!D)return"";try{return new Date(D).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"})}catch{return D}},G=async D=>{i.value=10,c.value="Collecting data...",await new Promise(K=>setTimeout(K,1e3)),i.value=30,c.value="Analyzing records...",await new Promise(K=>setTimeout(K,1500)),i.value=60,c.value="Generating charts and visualizations...",await new Promise(K=>setTimeout(K,1e3)),i.value=80,c.value="Finalizing report...",await new Promise(K=>setTimeout(K,800)),i.value=100,c.value="Report generated successfully!";const j=Math.floor(Math.random()*500)+50,H={"payment-report":"Payment Report","gst-bill-report":"GST Bill Report","gst-detail-report":"GST Detail Report","3c-daily-case-register":"3C Daily Case Register"}[D.reportType]||"Custom Report";let te=null;(D.reportType==="payment-report"||D.reportType==="gst-bill-report"||D.reportType==="gst-detail-report")&&D.startDate&&D.endDate&&(te={from:D.startDate,to:D.endDate}),d.value={reportType:H,totalRecords:j,dateRange:te,filename:`${D.reportType}_report_${new Date().toISOString().split("T")[0]}.${D.format||"pdf"}`},f.value=!0;const Y={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:H,format:(D.format||"pdf").toUpperCase(),recordCount:j,status:"Completed",filename:d.value.filename};A.value.unshift(Y),n.value=!0,a.value=`Report generated successfully! ${j} records included.`};return cn(()=>{console.log("Reports page initialized")}),(D,j)=>{const ne=I("v-col"),H=I("v-card-text"),te=I("v-card"),Y=I("v-progress-circular"),K=I("v-card-title"),X=I("v-row"),ae=I("v-data-table"),oe=I("v-icon"),W=I("v-snackbar"),de=I("v-main");return R(),ve(de,null,{default:u(()=>[l(xn,{feature:"reports"},{default:u(()=>[l(X,{"aria-label":"reports row",style:{height:"calc(100vh - 64px)"},class:"d-flex align-stretch ma-0"},{default:u(()=>[l(ne,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[p("div",bMe,[l(wMe,{filters:m.value,loading:o.value,onFilterChange:v,onStartReport:g,onClearFilters:y},null,8,["filters","loading"])])]),_:1}),l(ne,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[p("div",xMe,[l(te,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[l(te,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(H,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[A.value.length>0?(R(),me(ze,{key:0},[p("strong",null,q(A.value.length),1),O(" report"+q(A.value.length!==1?"s":"")+" available ",1)],64)):(R(),me("strong",CMe,"Generate Reports"))]),_:1})]),_:1}),o.value?(R(),ve(X,{key:0,"no-gutters":""},{default:u(()=>[l(ne,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[p("div",SMe,[l(Y,{"model-value":i.value,color:"primary",size:"64",width:"6"},{default:u(()=>[O(q(i.value)+"% ",1)]),_:1},8,["model-value"]),p("div",EMe,q(c.value||"Generating report..."),1),d.value?(R(),me("div",BMe,[l(te,{class:"mx-auto","max-width":"300",outlined:""},{default:u(()=>[l(K,{class:"text-h6"},{default:u(()=>[...j[2]||(j[2]=[O("Report Summary",-1)])]),_:1}),l(H,null,{default:u(()=>[p("div",kMe,[j[3]||(j[3]=p("strong",null,"Report Type:",-1)),O(" "+q(d.value.reportType),1)]),p("div",TMe,[j[4]||(j[4]=p("strong",null,"Total Records:",-1)),O(" "+q(d.value.totalRecords),1)]),d.value.dateRange?(R(),me("div",IMe,[j[5]||(j[5]=p("strong",null,"Date Range:",-1)),O(" "+q(d.value.dateRange.from)+" - "+q(d.value.dateRange.to),1)])):_e("",!0),f.value&&d.value.filename?(R(),me("div",FMe,[j[6]||(j[6]=p("strong",null,"File:",-1)),O(" "+q(d.value.filename),1)])):_e("",!0)]),_:1})]),_:1})])):_e("",!0)])]),_:1})]),_:1})):A.value.length>0?(R(),ve(X,{key:1,"no-gutters":""},{default:u(()=>[l(ne,{cols:"12",class:"scroll-element mt-2",style:{"padding-bottom":"20px"}},{default:u(()=>[l(ae,{headers:h.value,items:A.value,class:"elevation-1 ma-2",density:"comfortable"},null,8,["headers","items"])]),_:1})]),_:1})):(R(),ve(X,{key:2,"no-gutters":"",style:{height:"calc(100% - 60px)"}},{default:u(()=>[l(ne,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%"}},{default:u(()=>[p("div",PMe,[l(oe,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...j[7]||(j[7]=[O("mdi-chart-line",-1)])]),_:1}),j[8]||(j[8]=p("div",{class:"text-h6 mb-2"},"Generate Reports",-1)),j[9]||(j[9]=p("div",{class:"text-body-2 text-medium-emphasis"},"Configure report settings and generate comprehensive clinic reports",-1))])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1}),l(W,{modelValue:n.value,"onUpdate:modelValue":j[0]||(j[0]=Ae=>n.value=Ae),class:"elevation-24",color:"success"},{default:u(()=>[O(q(a.value),1)]),_:1},8,["modelValue"]),l(W,{modelValue:r.value,"onUpdate:modelValue":j[1]||(j[1]=Ae=>r.value=Ae),class:"elevation-24",color:"error"},{default:u(()=>[O(q(s.value),1)]),_:1},8,["modelValue"])]),_:1})]),_:1})}}},UMe=Xt(DMe,[["__scopeId","data-v-8ffafc0c"]]),RMe={class:"filter-container pa-3",style:{flex:"1 1 auto","overflow-y":"auto"}},NMe={class:"filter-field mb-3"},VMe={class:"filter-field mb-3"},LMe={class:"status-chip-wrapper"},MMe={class:"d-flex justify-center mt-4 mb-2"},OMe={class:"d-flex justify-center"},HMe={__name:"PharmacyQueueFilter",props:{billDate:{type:String,default:""},status:{type:String,default:null},isSearching:{type:Boolean,default:!1}},emits:["filter-change","search","clear"],setup(e,{emit:t}){const n=e,a=t,r=M(n.billDate||""),s=M(n.status!==null?n.status:null),o=[{value:null,label:"All"},{value:"Draft",label:"Draft"},{value:"Finalized",label:"Finalized"},{value:"Cancelled",label:"Cancelled"},{value:"Refund",label:"Refund"}],i=ee(()=>Dn()),c=ee(()=>!!r.value||s.value!==null),A=()=>{h()},d=()=>{r.value="",h()},f=()=>{h()},m=g=>{s.value=g,f()},h=()=>{a("filter-change",{billDate:r.value,status:s.value,hasErrors:!1,hasFilters:c.value})},v=()=>{a("search",{billDate:r.value,status:s.value})},y=()=>{r.value="",s.value=null,a("clear"),h()};return We(()=>n.billDate,g=>{r.value=g||""}),We(()=>n.status,g=>{s.value=g!==void 0?g:null}),h(),(g,w)=>{const b=I("v-card-text"),x=I("v-card"),T=I("v-text-field"),U=I("v-icon"),k=I("v-chip"),S=I("v-btn");return R(),ve(x,{color:"surfaceContainer",flat:"",style:{height:"100%",display:"flex","flex-direction":"column"}},{default:u(()=>[l(x,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(b,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...w[1]||(w[1]=[p("span",{class:"text-body-2 font-weight-medium"},"Filter Pharmacy Bills",-1)])]),_:1})]),_:1}),p("div",RMe,[p("div",NMe,[l(T,{modelValue:r.value,"onUpdate:modelValue":[w[0]||(w[0]=E=>r.value=E),A],type:"date",label:"Bill Date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input date-input",max:i.value,"onClick:clear":d},null,8,["modelValue","max"])]),p("div",VMe,[w[3]||(w[3]=p("div",{class:"filter-section-label mb-2"},"Status",-1)),p("div",LMe,[(R(),me(ze,null,Wt(o,E=>l(k,{key:E.value,size:"small",variant:s.value===E.value?"flat":"outlined",color:s.value===E.value?"primary":"default",class:ct(["status-chip",{"status-chip-active":s.value===E.value}]),onClick:C=>m(E.value)},{default:u(()=>[s.value===E.value?(R(),ve(U,{key:0,size:"small",class:"mr-1"},{default:u(()=>[...w[2]||(w[2]=[O(" mdi-check-circle ",-1)])]),_:1})):_e("",!0),O(" "+q(E.label),1)]),_:2},1032,["variant","color","class","onClick"])),64))])]),p("div",MMe,[l(S,{color:"primary",size:"small","prepend-icon":"mdi-magnify",onClick:v,class:"filter-button",loading:e.isSearching},{default:u(()=>[...w[4]||(w[4]=[O(" Search ",-1)])]),_:1},8,["loading"])]),p("div",OMe,[l(S,{variant:"text",size:"small","prepend-icon":"mdi-filter-remove",onClick:y,class:"filter-button-clear",disabled:!c.value},{default:u(()=>[...w[5]||(w[5]=[O(" Clear ",-1)])]),_:1},8,["disabled"])])])]),_:1})}}},$Me=Xt(HMe,[["__scopeId","data-v-95bbd6af"]]);var Qm=9e15,Yd=1e9,KE="0123456789abcdef",_2="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",w2="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",WE={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Qm,maxE:Qm,crypto:!1},N9,Ac,Qn=!0,Qw="[DecimalError] ",$d=Qw+"Invalid argument: ",V9=Qw+"Precision limit exceeded",L9=Qw+"crypto unavailable",M9="[object Decimal]",_o=Math.floor,ds=Math.pow,QMe=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,GMe=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,zMe=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,O9=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Il=1e7,kn=7,KMe=9007199254740991,WMe=_2.length-1,jE=w2.length-1,Qt={toStringTag:M9};Qt.absoluteValue=Qt.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),_n(e)};Qt.ceil=function(){return _n(new this.constructor(this),this.e+1,2)};Qt.clampedTo=Qt.clamp=function(e,t){var n,a=this,r=a.constructor;if(e=new r(e),t=new r(t),!e.s||!t.s)return new r(NaN);if(e.gt(t))throw Error($d+t);return n=a.cmp(e),n<0?e:a.cmp(t)>0?t:new r(a)};Qt.comparedTo=Qt.cmp=function(e){var t,n,a,r,s=this,o=s.d,i=(e=new s.constructor(e)).d,c=s.s,A=e.s;if(!o||!i)return!c||!A?NaN:c!==A?c:o===i?0:!o^c<0?1:-1;if(!o[0]||!i[0])return o[0]?c:i[0]?-A:0;if(c!==A)return c;if(s.e!==e.e)return s.e>e.e^c<0?1:-1;for(a=o.length,r=i.length,t=0,n=a<r?a:r;t<n;++t)if(o[t]!==i[t])return o[t]>i[t]^c<0?1:-1;return a===r?0:a>r^c<0?1:-1};Qt.cosine=Qt.cos=function(){var e,t,n=this,a=n.constructor;return n.d?n.d[0]?(e=a.precision,t=a.rounding,a.precision=e+Math.max(n.e,n.sd())+kn,a.rounding=1,n=jMe(a,z9(a,n)),a.precision=e,a.rounding=t,_n(Ac==2||Ac==3?n.neg():n,e,t,!0)):new a(1):new a(NaN)};Qt.cubeRoot=Qt.cbrt=function(){var e,t,n,a,r,s,o,i,c,A,d=this,f=d.constructor;if(!d.isFinite()||d.isZero())return new f(d);for(Qn=!1,s=d.s*ds(d.s*d,1/3),!s||Math.abs(s)==1/0?(n=Gs(d.d),e=d.e,(s=(e-n.length+1)%3)&&(n+=s==1||s==-2?"0":"00"),s=ds(n,1/3),e=_o((e+1)/3)-(e%3==(e<0?-1:2)),s==1/0?n="5e"+e:(n=s.toExponential(),n=n.slice(0,n.indexOf("e")+1)+e),a=new f(n),a.s=d.s):a=new f(s.toString()),o=(e=f.precision)+3;;)if(i=a,c=i.times(i).times(i),A=c.plus(d),a=er(A.plus(d).times(i),A.plus(c),o+2,1),Gs(i.d).slice(0,o)===(n=Gs(a.d)).slice(0,o))if(n=n.slice(o-3,o+1),n=="9999"||!r&&n=="4999"){if(!r&&(_n(i,e+1,0),i.times(i).times(i).eq(d))){a=i;break}o+=4,r=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(_n(a,e+1,1),t=!a.times(a).times(a).eq(d));break}return Qn=!0,_n(a,e,f.rounding,t)};Qt.decimalPlaces=Qt.dp=function(){var e,t=this.d,n=NaN;if(t){if(e=t.length-1,n=(e-_o(this.e/kn))*kn,e=t[e],e)for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n};Qt.dividedBy=Qt.div=function(e){return er(this,new this.constructor(e))};Qt.dividedToIntegerBy=Qt.divToInt=function(e){var t=this,n=t.constructor;return _n(er(t,new n(e),0,1,1),n.precision,n.rounding)};Qt.equals=Qt.eq=function(e){return this.cmp(e)===0};Qt.floor=function(){return _n(new this.constructor(this),this.e+1,3)};Qt.greaterThan=Qt.gt=function(e){return this.cmp(e)>0};Qt.greaterThanOrEqualTo=Qt.gte=function(e){var t=this.cmp(e);return t==1||t===0};Qt.hyperbolicCosine=Qt.cosh=function(){var e,t,n,a,r,s=this,o=s.constructor,i=new o(1);if(!s.isFinite())return new o(s.s?1/0:NaN);if(s.isZero())return i;n=o.precision,a=o.rounding,o.precision=n+Math.max(s.e,s.sd())+4,o.rounding=1,r=s.d.length,r<32?(e=Math.ceil(r/3),t=(1/zw(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),s=Rh(o,1,s.times(t),new o(1),!0);for(var c,A=e,d=new o(8);A--;)c=s.times(s),s=i.minus(c.times(d.minus(c.times(d))));return _n(s,o.precision=n,o.rounding=a,!0)};Qt.hyperbolicSine=Qt.sinh=function(){var e,t,n,a,r=this,s=r.constructor;if(!r.isFinite()||r.isZero())return new s(r);if(t=s.precision,n=s.rounding,s.precision=t+Math.max(r.e,r.sd())+4,s.rounding=1,a=r.d.length,a<3)r=Rh(s,2,r,r,!0);else{e=1.4*Math.sqrt(a),e=e>16?16:e|0,r=r.times(1/zw(5,e)),r=Rh(s,2,r,r,!0);for(var o,i=new s(5),c=new s(16),A=new s(20);e--;)o=r.times(r),r=r.times(i.plus(o.times(c.times(o).plus(A))))}return s.precision=t,s.rounding=n,_n(r,t,n,!0)};Qt.hyperbolicTangent=Qt.tanh=function(){var e,t,n=this,a=n.constructor;return n.isFinite()?n.isZero()?new a(n):(e=a.precision,t=a.rounding,a.precision=e+7,a.rounding=1,er(n.sinh(),n.cosh(),a.precision=e,a.rounding=t)):new a(n.s)};Qt.inverseCosine=Qt.acos=function(){var e=this,t=e.constructor,n=e.abs().cmp(1),a=t.precision,r=t.rounding;return n!==-1?n===0?e.isNeg()?vu(t,a,r):new t(0):new t(NaN):e.isZero()?vu(t,a+4,r).times(.5):(t.precision=a+6,t.rounding=1,e=new t(1).minus(e).div(e.plus(1)).sqrt().atan(),t.precision=a,t.rounding=r,e.times(2))};Qt.inverseHyperbolicCosine=Qt.acosh=function(){var e,t,n=this,a=n.constructor;return n.lte(1)?new a(n.eq(1)?0:NaN):n.isFinite()?(e=a.precision,t=a.rounding,a.precision=e+Math.max(Math.abs(n.e),n.sd())+4,a.rounding=1,Qn=!1,n=n.times(n).minus(1).sqrt().plus(n),Qn=!0,a.precision=e,a.rounding=t,n.ln()):new a(n)};Qt.inverseHyperbolicSine=Qt.asinh=function(){var e,t,n=this,a=n.constructor;return!n.isFinite()||n.isZero()?new a(n):(e=a.precision,t=a.rounding,a.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,a.rounding=1,Qn=!1,n=n.times(n).plus(1).sqrt().plus(n),Qn=!0,a.precision=e,a.rounding=t,n.ln())};Qt.inverseHyperbolicTangent=Qt.atanh=function(){var e,t,n,a,r=this,s=r.constructor;return r.isFinite()?r.e>=0?new s(r.abs().eq(1)?r.s/0:r.isZero()?r:NaN):(e=s.precision,t=s.rounding,a=r.sd(),Math.max(a,e)<2*-r.e-1?_n(new s(r),e,t,!0):(s.precision=n=a-r.e,r=er(r.plus(1),new s(1).minus(r),n+e,1),s.precision=e+4,s.rounding=1,r=r.ln(),s.precision=e,s.rounding=t,r.times(.5))):new s(NaN)};Qt.inverseSine=Qt.asin=function(){var e,t,n,a,r=this,s=r.constructor;return r.isZero()?new s(r):(t=r.abs().cmp(1),n=s.precision,a=s.rounding,t!==-1?t===0?(e=vu(s,n+4,a).times(.5),e.s=r.s,e):new s(NaN):(s.precision=n+6,s.rounding=1,r=r.div(new s(1).minus(r.times(r)).sqrt().plus(1)).atan(),s.precision=n,s.rounding=a,r.times(2)))};Qt.inverseTangent=Qt.atan=function(){var e,t,n,a,r,s,o,i,c,A=this,d=A.constructor,f=d.precision,m=d.rounding;if(A.isFinite()){if(A.isZero())return new d(A);if(A.abs().eq(1)&&f+4<=jE)return o=vu(d,f+4,m).times(.25),o.s=A.s,o}else{if(!A.s)return new d(NaN);if(f+4<=jE)return o=vu(d,f+4,m).times(.5),o.s=A.s,o}for(d.precision=i=f+10,d.rounding=1,n=Math.min(28,i/kn+2|0),e=n;e;--e)A=A.div(A.times(A).plus(1).sqrt().plus(1));for(Qn=!1,t=Math.ceil(i/kn),a=1,c=A.times(A),o=new d(A),r=A;e!==-1;)if(r=r.times(c),s=o.minus(r.div(a+=2)),r=r.times(c),o=s.plus(r.div(a+=2)),o.d[t]!==void 0)for(e=t;o.d[e]===s.d[e]&&e--;);return n&&(o=o.times(2<<n-1)),Qn=!0,_n(o,d.precision=f,d.rounding=m,!0)};Qt.isFinite=function(){return!!this.d};Qt.isInteger=Qt.isInt=function(){return!!this.d&&_o(this.e/kn)>this.d.length-2};Qt.isNaN=function(){return!this.s};Qt.isNegative=Qt.isNeg=function(){return this.s<0};Qt.isPositive=Qt.isPos=function(){return this.s>0};Qt.isZero=function(){return!!this.d&&this.d[0]===0};Qt.lessThan=Qt.lt=function(e){return this.cmp(e)<0};Qt.lessThanOrEqualTo=Qt.lte=function(e){return this.cmp(e)<1};Qt.logarithm=Qt.log=function(e){var t,n,a,r,s,o,i,c,A=this,d=A.constructor,f=d.precision,m=d.rounding,h=5;if(e==null)e=new d(10),t=!0;else{if(e=new d(e),n=e.d,e.s<0||!n||!n[0]||e.eq(1))return new d(NaN);t=e.eq(10)}if(n=A.d,A.s<0||!n||!n[0]||A.eq(1))return new d(n&&!n[0]?-1/0:A.s!=1?NaN:n?0:1/0);if(t)if(n.length>1)s=!0;else{for(r=n[0];r%10===0;)r/=10;s=r!==1}if(Qn=!1,i=f+h,o=gd(A,i),a=t?b2(d,i+10):gd(e,i),c=er(o,a,i,1),L0(c.d,r=f,m))do if(i+=10,o=gd(A,i),a=t?b2(d,i+10):gd(e,i),c=er(o,a,i,1),!s){+Gs(c.d).slice(r+1,r+15)+1==1e14&&(c=_n(c,f+1,0));break}while(L0(c.d,r+=10,m));return Qn=!0,_n(c,f,m)};Qt.minus=Qt.sub=function(e){var t,n,a,r,s,o,i,c,A,d,f,m,h=this,v=h.constructor;if(e=new v(e),!h.d||!e.d)return!h.s||!e.s?e=new v(NaN):h.d?e.s=-e.s:e=new v(e.d||h.s!==e.s?h:NaN),e;if(h.s!=e.s)return e.s=-e.s,h.plus(e);if(A=h.d,m=e.d,i=v.precision,c=v.rounding,!A[0]||!m[0]){if(m[0])e.s=-e.s;else if(A[0])e=new v(h);else return new v(c===3?-0:0);return Qn?_n(e,i,c):e}if(n=_o(e.e/kn),d=_o(h.e/kn),A=A.slice(),s=d-n,s){for(f=s<0,f?(t=A,s=-s,o=m.length):(t=m,n=d,o=A.length),a=Math.max(Math.ceil(i/kn),o)+2,s>a&&(s=a,t.length=1),t.reverse(),a=s;a--;)t.push(0);t.reverse()}else{for(a=A.length,o=m.length,f=a<o,f&&(o=a),a=0;a<o;a++)if(A[a]!=m[a]){f=A[a]<m[a];break}s=0}for(f&&(t=A,A=m,m=t,e.s=-e.s),o=A.length,a=m.length-o;a>0;--a)A[o++]=0;for(a=m.length;a>s;){if(A[--a]<m[a]){for(r=a;r&&A[--r]===0;)A[r]=Il-1;--A[r],A[a]+=Il}A[a]-=m[a]}for(;A[--o]===0;)A.pop();for(;A[0]===0;A.shift())--n;return A[0]?(e.d=A,e.e=Gw(A,n),Qn?_n(e,i,c):e):new v(c===3?-0:0)};Qt.modulo=Qt.mod=function(e){var t,n=this,a=n.constructor;return e=new a(e),!n.d||!e.s||e.d&&!e.d[0]?new a(NaN):!e.d||n.d&&!n.d[0]?_n(new a(n),a.precision,a.rounding):(Qn=!1,a.modulo==9?(t=er(n,e.abs(),0,3,1),t.s*=e.s):t=er(n,e,0,a.modulo,1),t=t.times(e),Qn=!0,n.minus(t))};Qt.naturalExponential=Qt.exp=function(){return qE(this)};Qt.naturalLogarithm=Qt.ln=function(){return gd(this)};Qt.negated=Qt.neg=function(){var e=new this.constructor(this);return e.s=-e.s,_n(e)};Qt.plus=Qt.add=function(e){var t,n,a,r,s,o,i,c,A,d,f=this,m=f.constructor;if(e=new m(e),!f.d||!e.d)return!f.s||!e.s?e=new m(NaN):f.d||(e=new m(e.d||f.s===e.s?f:NaN)),e;if(f.s!=e.s)return e.s=-e.s,f.minus(e);if(A=f.d,d=e.d,i=m.precision,c=m.rounding,!A[0]||!d[0])return d[0]||(e=new m(f)),Qn?_n(e,i,c):e;if(s=_o(f.e/kn),a=_o(e.e/kn),A=A.slice(),r=s-a,r){for(r<0?(n=A,r=-r,o=d.length):(n=d,a=s,o=A.length),s=Math.ceil(i/kn),o=s>o?s+1:o+1,r>o&&(r=o,n.length=1),n.reverse();r--;)n.push(0);n.reverse()}for(o=A.length,r=d.length,o-r<0&&(r=o,n=d,d=A,A=n),t=0;r;)t=(A[--r]=A[r]+d[r]+t)/Il|0,A[r]%=Il;for(t&&(A.unshift(t),++a),o=A.length;A[--o]==0;)A.pop();return e.d=A,e.e=Gw(A,a),Qn?_n(e,i,c):e};Qt.precision=Qt.sd=function(e){var t,n=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error($d+e);return n.d?(t=H9(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t};Qt.round=function(){var e=this,t=e.constructor;return _n(new t(e),e.e+1,t.rounding)};Qt.sine=Qt.sin=function(){var e,t,n=this,a=n.constructor;return n.isFinite()?n.isZero()?new a(n):(e=a.precision,t=a.rounding,a.precision=e+Math.max(n.e,n.sd())+kn,a.rounding=1,n=YMe(a,z9(a,n)),a.precision=e,a.rounding=t,_n(Ac>2?n.neg():n,e,t,!0)):new a(NaN)};Qt.squareRoot=Qt.sqrt=function(){var e,t,n,a,r,s,o=this,i=o.d,c=o.e,A=o.s,d=o.constructor;if(A!==1||!i||!i[0])return new d(!A||A<0&&(!i||i[0])?NaN:i?o:1/0);for(Qn=!1,A=Math.sqrt(+o),A==0||A==1/0?(t=Gs(i),(t.length+c)%2==0&&(t+="0"),A=Math.sqrt(t),c=_o((c+1)/2)-(c<0||c%2),A==1/0?t="5e"+c:(t=A.toExponential(),t=t.slice(0,t.indexOf("e")+1)+c),a=new d(t)):a=new d(A.toString()),n=(c=d.precision)+3;;)if(s=a,a=s.plus(er(o,s,n+2,1)).times(.5),Gs(s.d).slice(0,n)===(t=Gs(a.d)).slice(0,n))if(t=t.slice(n-3,n+1),t=="9999"||!r&&t=="4999"){if(!r&&(_n(s,c+1,0),s.times(s).eq(o))){a=s;break}n+=4,r=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(_n(a,c+1,1),e=!a.times(a).eq(o));break}return Qn=!0,_n(a,c,d.rounding,e)};Qt.tangent=Qt.tan=function(){var e,t,n=this,a=n.constructor;return n.isFinite()?n.isZero()?new a(n):(e=a.precision,t=a.rounding,a.precision=e+10,a.rounding=1,n=n.sin(),n.s=1,n=er(n,new a(1).minus(n.times(n)).sqrt(),e+10,0),a.precision=e,a.rounding=t,_n(Ac==2||Ac==4?n.neg():n,e,t,!0)):new a(NaN)};Qt.times=Qt.mul=function(e){var t,n,a,r,s,o,i,c,A,d=this,f=d.constructor,m=d.d,h=(e=new f(e)).d;if(e.s*=d.s,!m||!m[0]||!h||!h[0])return new f(!e.s||m&&!m[0]&&!h||h&&!h[0]&&!m?NaN:!m||!h?e.s/0:e.s*0);for(n=_o(d.e/kn)+_o(e.e/kn),c=m.length,A=h.length,c<A&&(s=m,m=h,h=s,o=c,c=A,A=o),s=[],o=c+A,a=o;a--;)s.push(0);for(a=A;--a>=0;){for(t=0,r=c+a;r>a;)i=s[r]+h[a]*m[r-a-1]+t,s[r--]=i%Il|0,t=i/Il|0;s[r]=(s[r]+t)%Il|0}for(;!s[--o];)s.pop();return t?++n:s.shift(),e.d=s,e.e=Gw(s,n),Qn?_n(e,f.precision,f.rounding):e};Qt.toBinary=function(e,t){return t4(this,2,e,t)};Qt.toDecimalPlaces=Qt.toDP=function(e,t){var n=this,a=n.constructor;return n=new a(n),e===void 0?n:(ri(e,0,Yd),t===void 0?t=a.rounding:ri(t,0,8),_n(n,e+n.e+1,t))};Qt.toExponential=function(e,t){var n,a=this,r=a.constructor;return e===void 0?n=ku(a,!0):(ri(e,0,Yd),t===void 0?t=r.rounding:ri(t,0,8),a=_n(new r(a),e+1,t),n=ku(a,!0,e+1)),a.isNeg()&&!a.isZero()?"-"+n:n};Qt.toFixed=function(e,t){var n,a,r=this,s=r.constructor;return e===void 0?n=ku(r):(ri(e,0,Yd),t===void 0?t=s.rounding:ri(t,0,8),a=_n(new s(r),e+r.e+1,t),n=ku(a,!1,e+a.e+1)),r.isNeg()&&!r.isZero()?"-"+n:n};Qt.toFraction=function(e){var t,n,a,r,s,o,i,c,A,d,f,m,h=this,v=h.d,y=h.constructor;if(!v)return new y(h);if(A=n=new y(1),a=c=new y(0),t=new y(a),s=t.e=H9(v)-h.e-1,o=s%kn,t.d[0]=ds(10,o<0?kn+o:o),e==null)e=s>0?t:A;else{if(i=new y(e),!i.isInt()||i.lt(A))throw Error($d+i);e=i.gt(t)?s>0?t:A:i}for(Qn=!1,i=new y(Gs(v)),d=y.precision,y.precision=s=v.length*kn*2;f=er(i,t,0,1,1),r=n.plus(f.times(a)),r.cmp(e)!=1;)n=a,a=r,r=A,A=c.plus(f.times(r)),c=r,r=t,t=i.minus(f.times(r)),i=r;return r=er(e.minus(n),a,0,1,1),c=c.plus(r.times(A)),n=n.plus(r.times(a)),c.s=A.s=h.s,m=er(A,a,s,1).minus(h).abs().cmp(er(c,n,s,1).minus(h).abs())<1?[A,a]:[c,n],y.precision=d,Qn=!0,m};Qt.toHexadecimal=Qt.toHex=function(e,t){return t4(this,16,e,t)};Qt.toNearest=function(e,t){var n=this,a=n.constructor;if(n=new a(n),e==null){if(!n.d)return n;e=new a(1),t=a.rounding}else{if(e=new a(e),t===void 0?t=a.rounding:ri(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(Qn=!1,n=er(n,e,0,t,1).times(e),Qn=!0,_n(n)):(e.s=n.s,n=e),n};Qt.toNumber=function(){return+this};Qt.toOctal=function(e,t){return t4(this,8,e,t)};Qt.toPower=Qt.pow=function(e){var t,n,a,r,s,o,i=this,c=i.constructor,A=+(e=new c(e));if(!i.d||!e.d||!i.d[0]||!e.d[0])return new c(ds(+i,A));if(i=new c(i),i.eq(1))return i;if(a=c.precision,s=c.rounding,e.eq(1))return _n(i,a,s);if(t=_o(e.e/kn),t>=e.d.length-1&&(n=A<0?-A:A)<=KMe)return r=$9(c,i,n,a),e.s<0?new c(1).div(r):_n(r,a,s);if(o=i.s,o<0){if(t<e.d.length-1)return new c(NaN);if((e.d[t]&1)==0&&(o=1),i.e==0&&i.d[0]==1&&i.d.length==1)return i.s=o,i}return n=ds(+i,A),t=n==0||!isFinite(n)?_o(A*(Math.log("0."+Gs(i.d))/Math.LN10+i.e+1)):new c(n+"").e,t>c.maxE+1||t<c.minE-1?new c(t>0?o/0:0):(Qn=!1,c.rounding=i.s=1,n=Math.min(12,(t+"").length),r=qE(e.times(gd(i,a+n)),a),r.d&&(r=_n(r,a+5,1),L0(r.d,a,s)&&(t=a+10,r=_n(qE(e.times(gd(i,t+n)),t),t+5,1),+Gs(r.d).slice(a+1,a+15)+1==1e14&&(r=_n(r,a+1,0)))),r.s=o,Qn=!0,c.rounding=s,_n(r,a,s))};Qt.toPrecision=function(e,t){var n,a=this,r=a.constructor;return e===void 0?n=ku(a,a.e<=r.toExpNeg||a.e>=r.toExpPos):(ri(e,1,Yd),t===void 0?t=r.rounding:ri(t,0,8),a=_n(new r(a),e,t),n=ku(a,e<=a.e||a.e<=r.toExpNeg,e)),a.isNeg()&&!a.isZero()?"-"+n:n};Qt.toSignificantDigits=Qt.toSD=function(e,t){var n=this,a=n.constructor;return e===void 0?(e=a.precision,t=a.rounding):(ri(e,1,Yd),t===void 0?t=a.rounding:ri(t,0,8)),_n(new a(n),e,t)};Qt.toString=function(){var e=this,t=e.constructor,n=ku(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n};Qt.truncated=Qt.trunc=function(){return _n(new this.constructor(this),this.e+1,1)};Qt.valueOf=Qt.toJSON=function(){var e=this,t=e.constructor,n=ku(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};function Gs(e){var t,n,a,r=e.length-1,s="",o=e[0];if(r>0){for(s+=o,t=1;t<r;t++)a=e[t]+"",n=kn-a.length,n&&(s+=od(n)),s+=a;o=e[t],a=o+"",n=kn-a.length,n&&(s+=od(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}function ri(e,t,n){if(e!==~~e||e<t||e>n)throw Error($d+e)}function L0(e,t,n,a){var r,s,o,i;for(s=e[0];s>=10;s/=10)--t;return--t<0?(t+=kn,r=0):(r=Math.ceil((t+1)/kn),t%=kn),s=ds(10,kn-t),i=e[r]%s|0,a==null?t<3?(t==0?i=i/100|0:t==1&&(i=i/10|0),o=n<4&&i==99999||n>3&&i==49999||i==5e4||i==0):o=(n<4&&i+1==s||n>3&&i+1==s/2)&&(e[r+1]/s/100|0)==ds(10,t-2)-1||(i==s/2||i==0)&&(e[r+1]/s/100|0)==0:t<4?(t==0?i=i/1e3|0:t==1?i=i/100|0:t==2&&(i=i/10|0),o=(a||n<4)&&i==9999||!a&&n>3&&i==4999):o=((a||n<4)&&i+1==s||!a&&n>3&&i+1==s/2)&&(e[r+1]/s/1e3|0)==ds(10,t-3)-1,o}function n_(e,t,n){for(var a,r=[0],s,o=0,i=e.length;o<i;){for(s=r.length;s--;)r[s]*=t;for(r[0]+=KE.indexOf(e.charAt(o++)),a=0;a<r.length;a++)r[a]>n-1&&(r[a+1]===void 0&&(r[a+1]=0),r[a+1]+=r[a]/n|0,r[a]%=n)}return r.reverse()}function jMe(e,t){var n,a,r;if(t.isZero())return t;a=t.d.length,a<32?(n=Math.ceil(a/3),r=(1/zw(4,n)).toString()):(n=16,r="2.3283064365386962890625e-10"),e.precision+=n,t=Rh(e,1,t.times(r),new e(1));for(var s=n;s--;){var o=t.times(t);t=o.times(o).minus(o).times(8).plus(1)}return e.precision-=n,t}var er=(function(){function e(a,r,s){var o,i=0,c=a.length;for(a=a.slice();c--;)o=a[c]*r+i,a[c]=o%s|0,i=o/s|0;return i&&a.unshift(i),a}function t(a,r,s,o){var i,c;if(s!=o)c=s>o?1:-1;else for(i=c=0;i<s;i++)if(a[i]!=r[i]){c=a[i]>r[i]?1:-1;break}return c}function n(a,r,s,o){for(var i=0;s--;)a[s]-=i,i=a[s]<r[s]?1:0,a[s]=i*o+a[s]-r[s];for(;!a[0]&&a.length>1;)a.shift()}return function(a,r,s,o,i,c){var A,d,f,m,h,v,y,g,w,b,x,T,U,k,S,E,C,P,F,N,L=a.constructor,ie=a.s==r.s?1:-1,le=a.d,Q=r.d;if(!le||!le[0]||!Q||!Q[0])return new L(!a.s||!r.s||(le?Q&&le[0]==Q[0]:!Q)?NaN:le&&le[0]==0||!Q?ie*0:ie/0);for(c?(h=1,d=a.e-r.e):(c=Il,h=kn,d=_o(a.e/h)-_o(r.e/h)),F=Q.length,C=le.length,w=new L(ie),b=w.d=[],f=0;Q[f]==(le[f]||0);f++);if(Q[f]>(le[f]||0)&&d--,s==null?(k=s=L.precision,o=L.rounding):i?k=s+(a.e-r.e)+1:k=s,k<0)b.push(1),v=!0;else{if(k=k/h+2|0,f=0,F==1){for(m=0,Q=Q[0],k++;(f<C||m)&&k--;f++)S=m*c+(le[f]||0),b[f]=S/Q|0,m=S%Q|0;v=m||f<C}else{for(m=c/(Q[0]+1)|0,m>1&&(Q=e(Q,m,c),le=e(le,m,c),F=Q.length,C=le.length),E=F,x=le.slice(0,F),T=x.length;T<F;)x[T++]=0;N=Q.slice(),N.unshift(0),P=Q[0],Q[1]>=c/2&&++P;do m=0,A=t(Q,x,F,T),A<0?(U=x[0],F!=T&&(U=U*c+(x[1]||0)),m=U/P|0,m>1?(m>=c&&(m=c-1),y=e(Q,m,c),g=y.length,T=x.length,A=t(y,x,g,T),A==1&&(m--,n(y,F<g?N:Q,g,c))):(m==0&&(A=m=1),y=Q.slice()),g=y.length,g<T&&y.unshift(0),n(x,y,T,c),A==-1&&(T=x.length,A=t(Q,x,F,T),A<1&&(m++,n(x,F<T?N:Q,T,c))),T=x.length):A===0&&(m++,x=[0]),b[f++]=m,A&&x[0]?x[T++]=le[E]||0:(x=[le[E]],T=1);while((E++<C||x[0]!==void 0)&&k--);v=x[0]!==void 0}b[0]||b.shift()}if(h==1)w.e=d,N9=v;else{for(f=1,m=b[0];m>=10;m/=10)f++;w.e=f+d*h-1,_n(w,i?s+w.e+1:s,o,v)}return w}})();function _n(e,t,n,a){var r,s,o,i,c,A,d,f,m,h=e.constructor;e:if(t!=null){if(f=e.d,!f)return e;for(r=1,i=f[0];i>=10;i/=10)r++;if(s=t-r,s<0)s+=kn,o=t,d=f[m=0],c=d/ds(10,r-o-1)%10|0;else if(m=Math.ceil((s+1)/kn),i=f.length,m>=i)if(a){for(;i++<=m;)f.push(0);d=c=0,r=1,s%=kn,o=s-kn+1}else break e;else{for(d=i=f[m],r=1;i>=10;i/=10)r++;s%=kn,o=s-kn+r,c=o<0?0:d/ds(10,r-o-1)%10|0}if(a=a||t<0||f[m+1]!==void 0||(o<0?d:d%ds(10,r-o-1)),A=n<4?(c||a)&&(n==0||n==(e.s<0?3:2)):c>5||c==5&&(n==4||a||n==6&&(s>0?o>0?d/ds(10,r-o):0:f[m-1])%10&1||n==(e.s<0?8:7)),t<1||!f[0])return f.length=0,A?(t-=e.e+1,f[0]=ds(10,(kn-t%kn)%kn),e.e=-t||0):f[0]=e.e=0,e;if(s==0?(f.length=m,i=1,m--):(f.length=m+1,i=ds(10,kn-s),f[m]=o>0?(d/ds(10,r-o)%ds(10,o)|0)*i:0),A)for(;;)if(m==0){for(s=1,o=f[0];o>=10;o/=10)s++;for(o=f[0]+=i,i=1;o>=10;o/=10)i++;s!=i&&(e.e++,f[0]==Il&&(f[0]=1));break}else{if(f[m]+=i,f[m]!=Il)break;f[m--]=0,i=1}for(s=f.length;f[--s]===0;)f.pop()}return Qn&&(e.e>h.maxE?(e.d=null,e.e=NaN):e.e<h.minE&&(e.e=0,e.d=[0])),e}function ku(e,t,n){if(!e.isFinite())return G9(e);var a,r=e.e,s=Gs(e.d),o=s.length;return t?(n&&(a=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+od(a):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(e.e<0?"e":"e+")+e.e):r<0?(s="0."+od(-r-1)+s,n&&(a=n-o)>0&&(s+=od(a))):r>=o?(s+=od(r+1-o),n&&(a=n-r-1)>0&&(s=s+"."+od(a))):((a=r+1)<o&&(s=s.slice(0,a)+"."+s.slice(a)),n&&(a=n-o)>0&&(r+1===o&&(s+="."),s+=od(a))),s}function Gw(e,t){var n=e[0];for(t*=kn;n>=10;n/=10)t++;return t}function b2(e,t,n){if(t>WMe)throw Qn=!0,n&&(e.precision=n),Error(V9);return _n(new e(_2),t,1,!0)}function vu(e,t,n){if(t>jE)throw Error(V9);return _n(new e(w2),t,n,!0)}function H9(e){var t=e.length-1,n=t*kn+1;if(t=e[t],t){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function od(e){for(var t="";e--;)t+="0";return t}function $9(e,t,n,a){var r,s=new e(1),o=Math.ceil(a/kn+4);for(Qn=!1;;){if(n%2&&(s=s.times(t),yN(s.d,o)&&(r=!0)),n=_o(n/2),n===0){n=s.d.length-1,r&&s.d[n]===0&&++s.d[n];break}t=t.times(t),yN(t.d,o)}return Qn=!0,s}function gN(e){return e.d[e.d.length-1]&1}function Q9(e,t,n){for(var a,r,s=new e(t[0]),o=0;++o<t.length;){if(r=new e(t[o]),!r.s){s=r;break}a=s.cmp(r),(a===n||a===0&&s.s===n)&&(s=r)}return s}function qE(e,t){var n,a,r,s,o,i,c,A=0,d=0,f=0,m=e.constructor,h=m.rounding,v=m.precision;if(!e.d||!e.d[0]||e.e>17)return new m(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(t==null?(Qn=!1,c=v):c=t,i=new m(.03125);e.e>-2;)e=e.times(i),f+=5;for(a=Math.log(ds(2,f))/Math.LN10*2+5|0,c+=a,n=s=o=new m(1),m.precision=c;;){if(s=_n(s.times(e),c,1),n=n.times(++d),i=o.plus(er(s,n,c,1)),Gs(i.d).slice(0,c)===Gs(o.d).slice(0,c)){for(r=f;r--;)o=_n(o.times(o),c,1);if(t==null)if(A<3&&L0(o.d,c-a,h,A))m.precision=c+=10,n=s=i=new m(1),d=0,A++;else return _n(o,m.precision=v,h,Qn=!0);else return m.precision=v,o}o=i}}function gd(e,t){var n,a,r,s,o,i,c,A,d,f,m,h=1,v=10,y=e,g=y.d,w=y.constructor,b=w.rounding,x=w.precision;if(y.s<0||!g||!g[0]||!y.e&&g[0]==1&&g.length==1)return new w(g&&!g[0]?-1/0:y.s!=1?NaN:g?0:y);if(t==null?(Qn=!1,d=x):d=t,w.precision=d+=v,n=Gs(g),a=n.charAt(0),Math.abs(s=y.e)<15e14){for(;a<7&&a!=1||a==1&&n.charAt(1)>3;)y=y.times(e),n=Gs(y.d),a=n.charAt(0),h++;s=y.e,a>1?(y=new w("0."+n),s++):y=new w(a+"."+n.slice(1))}else return A=b2(w,d+2,x).times(s+""),y=gd(new w(a+"."+n.slice(1)),d-v).plus(A),w.precision=x,t==null?_n(y,x,b,Qn=!0):y;for(f=y,c=o=y=er(y.minus(1),y.plus(1),d,1),m=_n(y.times(y),d,1),r=3;;){if(o=_n(o.times(m),d,1),A=c.plus(er(o,new w(r),d,1)),Gs(A.d).slice(0,d)===Gs(c.d).slice(0,d))if(c=c.times(2),s!==0&&(c=c.plus(b2(w,d+2,x).times(s+""))),c=er(c,new w(h),d,1),t==null)if(L0(c.d,d-v,b,i))w.precision=d+=v,A=o=y=er(f.minus(1),f.plus(1),d,1),m=_n(y.times(y),d,1),r=i=1;else return _n(c,w.precision=x,b,Qn=!0);else return w.precision=x,c;c=A,r+=2}}function G9(e){return String(e.s*e.s/0)}function a_(e,t){var n,a,r;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(n<0&&(n=a),n+=+t.slice(a+1),t=t.substring(0,a)):n<0&&(n=t.length),a=0;t.charCodeAt(a)===48;a++);for(r=t.length;t.charCodeAt(r-1)===48;--r);if(t=t.slice(a,r),t){if(r-=a,e.e=n=n-a-1,e.d=[],a=(n+1)%kn,n<0&&(a+=kn),a<r){for(a&&e.d.push(+t.slice(0,a)),r-=kn;a<r;)e.d.push(+t.slice(a,a+=kn));t=t.slice(a),a=kn-t.length}else a-=r;for(;a--;)t+="0";e.d.push(+t),Qn&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function qMe(e,t){var n,a,r,s,o,i,c,A,d;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),O9.test(t))return a_(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(GMe.test(t))n=16,t=t.toLowerCase();else if(QMe.test(t))n=2;else if(zMe.test(t))n=8;else throw Error($d+t);for(s=t.search(/p/i),s>0?(c=+t.slice(s+1),t=t.substring(2,s)):t=t.slice(2),s=t.indexOf("."),o=s>=0,a=e.constructor,o&&(t=t.replace(".",""),i=t.length,s=i-s,r=$9(a,new a(n),s,s*2)),A=n_(t,n,Il),d=A.length-1,s=d;A[s]===0;--s)A.pop();return s<0?new a(e.s*0):(e.e=Gw(A,d),e.d=A,Qn=!1,o&&(e=er(e,r,i*4)),c&&(e=e.times(Math.abs(c)<54?ds(2,c):Jt.pow(2,c))),Qn=!0,e)}function YMe(e,t){var n,a=t.d.length;if(a<3)return t.isZero()?t:Rh(e,2,t,t);n=1.4*Math.sqrt(a),n=n>16?16:n|0,t=t.times(1/zw(5,n)),t=Rh(e,2,t,t);for(var r,s=new e(5),o=new e(16),i=new e(20);n--;)r=t.times(t),t=t.times(s.plus(r.times(o.times(r).minus(i))));return t}function Rh(e,t,n,a,r){var s,o,i,c,A=e.precision,d=Math.ceil(A/kn);for(Qn=!1,c=n.times(n),i=new e(a);;){if(o=er(i.times(c),new e(t++*t++),A,1),i=r?a.plus(o):a.minus(o),a=er(o.times(c),new e(t++*t++),A,1),o=i.plus(a),o.d[d]!==void 0){for(s=d;o.d[s]===i.d[s]&&s--;);if(s==-1)break}s=i,i=a,a=o,o=s}return Qn=!0,o.d.length=d+1,o}function zw(e,t){for(var n=e;--t;)n*=e;return n}function z9(e,t){var n,a=t.s<0,r=vu(e,e.precision,1),s=r.times(.5);if(t=t.abs(),t.lte(s))return Ac=a?4:1,t;if(n=t.divToInt(r),n.isZero())Ac=a?3:2;else{if(t=t.minus(n.times(r)),t.lte(s))return Ac=gN(n)?a?2:3:a?4:1,t;Ac=gN(n)?a?1:4:a?3:2}return t.minus(r).abs()}function t4(e,t,n,a){var r,s,o,i,c,A,d,f,m,h=e.constructor,v=n!==void 0;if(v?(ri(n,1,Yd),a===void 0?a=h.rounding:ri(a,0,8)):(n=h.precision,a=h.rounding),!e.isFinite())d=G9(e);else{for(d=ku(e),o=d.indexOf("."),v?(r=2,t==16?n=n*4-3:t==8&&(n=n*3-2)):r=t,o>=0&&(d=d.replace(".",""),m=new h(1),m.e=d.length-o,m.d=n_(ku(m),10,r),m.e=m.d.length),f=n_(d,10,r),s=c=f.length;f[--c]==0;)f.pop();if(!f[0])d=v?"0p+0":"0";else{if(o<0?s--:(e=new h(e),e.d=f,e.e=s,e=er(e,m,n,a,0,r),f=e.d,s=e.e,A=N9),o=f[n],i=r/2,A=A||f[n+1]!==void 0,A=a<4?(o!==void 0||A)&&(a===0||a===(e.s<0?3:2)):o>i||o===i&&(a===4||A||a===6&&f[n-1]&1||a===(e.s<0?8:7)),f.length=n,A)for(;++f[--n]>r-1;)f[n]=0,n||(++s,f.unshift(1));for(c=f.length;!f[c-1];--c);for(o=0,d="";o<c;o++)d+=KE.charAt(f[o]);if(v){if(c>1)if(t==16||t==8){for(o=t==16?4:3,--c;c%o;c++)d+="0";for(f=n_(d,r,t),c=f.length;!f[c-1];--c);for(o=1,d="1.";o<c;o++)d+=KE.charAt(f[o])}else d=d.charAt(0)+"."+d.slice(1);d=d+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)d="0"+d;d="0."+d}else if(++s>c)for(s-=c;s--;)d+="0";else s<c&&(d=d.slice(0,s)+"."+d.slice(s))}d=(t==16?"0x":t==2?"0b":t==8?"0o":"")+d}return e.s<0?"-"+d:d}function yN(e,t){if(e.length>t)return e.length=t,!0}function XMe(e){return new this(e).abs()}function JMe(e){return new this(e).acos()}function ZMe(e){return new this(e).acosh()}function eOe(e,t){return new this(e).plus(t)}function tOe(e){return new this(e).asin()}function nOe(e){return new this(e).asinh()}function aOe(e){return new this(e).atan()}function rOe(e){return new this(e).atanh()}function sOe(e,t){e=new this(e),t=new this(t);var n,a=this.precision,r=this.rounding,s=a+4;return!e.s||!t.s?n=new this(NaN):!e.d&&!t.d?(n=vu(this,s,1).times(t.s>0?.25:.75),n.s=e.s):!t.d||e.isZero()?(n=t.s<0?vu(this,a,r):new this(0),n.s=e.s):!e.d||t.isZero()?(n=vu(this,s,1).times(.5),n.s=e.s):t.s<0?(this.precision=s,this.rounding=1,n=this.atan(er(e,t,s,1)),t=vu(this,s,1),this.precision=a,this.rounding=r,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(er(e,t,s,1)),n}function oOe(e){return new this(e).cbrt()}function iOe(e){return _n(e=new this(e),e.e+1,2)}function lOe(e,t,n){return new this(e).clamp(t,n)}function uOe(e){if(!e||typeof e!="object")throw Error(Qw+"Object expected");var t,n,a,r=e.defaults===!0,s=["precision",1,Yd,"rounding",0,8,"toExpNeg",-Qm,0,"toExpPos",0,Qm,"maxE",0,Qm,"minE",-Qm,0,"modulo",0,9];for(t=0;t<s.length;t+=3)if(n=s[t],r&&(this[n]=WE[n]),(a=e[n])!==void 0)if(_o(a)===a&&a>=s[t+1]&&a<=s[t+2])this[n]=a;else throw Error($d+n+": "+a);if(n="crypto",r&&(this[n]=WE[n]),(a=e[n])!==void 0)if(a===!0||a===!1||a===0||a===1)if(a)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(L9);else this[n]=!1;else throw Error($d+n+": "+a);return this}function cOe(e){return new this(e).cos()}function dOe(e){return new this(e).cosh()}function K9(e){var t,n,a;function r(s){var o,i,c,A=this;if(!(A instanceof r))return new r(s);if(A.constructor=r,_N(s)){A.s=s.s,Qn?!s.d||s.e>r.maxE?(A.e=NaN,A.d=null):s.e<r.minE?(A.e=0,A.d=[0]):(A.e=s.e,A.d=s.d.slice()):(A.e=s.e,A.d=s.d?s.d.slice():s.d);return}if(c=typeof s,c==="number"){if(s===0){A.s=1/s<0?-1:1,A.e=0,A.d=[0];return}if(s<0?(s=-s,A.s=-1):A.s=1,s===~~s&&s<1e7){for(o=0,i=s;i>=10;i/=10)o++;Qn?o>r.maxE?(A.e=NaN,A.d=null):o<r.minE?(A.e=0,A.d=[0]):(A.e=o,A.d=[s]):(A.e=o,A.d=[s]);return}if(s*0!==0){s||(A.s=NaN),A.e=NaN,A.d=null;return}return a_(A,s.toString())}if(c==="string")return(i=s.charCodeAt(0))===45?(s=s.slice(1),A.s=-1):(i===43&&(s=s.slice(1)),A.s=1),O9.test(s)?a_(A,s):qMe(A,s);if(c==="bigint")return s<0?(s=-s,A.s=-1):A.s=1,a_(A,s.toString());throw Error($d+s)}if(r.prototype=Qt,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.EUCLID=9,r.config=r.set=uOe,r.clone=K9,r.isDecimal=_N,r.abs=XMe,r.acos=JMe,r.acosh=ZMe,r.add=eOe,r.asin=tOe,r.asinh=nOe,r.atan=aOe,r.atanh=rOe,r.atan2=sOe,r.cbrt=oOe,r.ceil=iOe,r.clamp=lOe,r.cos=cOe,r.cosh=dOe,r.div=AOe,r.exp=fOe,r.floor=mOe,r.hypot=hOe,r.ln=vOe,r.log=pOe,r.log10=yOe,r.log2=gOe,r.max=_Oe,r.min=wOe,r.mod=bOe,r.mul=xOe,r.pow=COe,r.random=SOe,r.round=EOe,r.sign=BOe,r.sin=kOe,r.sinh=TOe,r.sqrt=IOe,r.sub=FOe,r.sum=POe,r.tan=DOe,r.tanh=UOe,r.trunc=ROe,e===void 0&&(e={}),e&&e.defaults!==!0)for(a=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<a.length;)e.hasOwnProperty(n=a[t++])||(e[n]=this[n]);return r.config(e),r}function AOe(e,t){return new this(e).div(t)}function fOe(e){return new this(e).exp()}function mOe(e){return _n(e=new this(e),e.e+1,3)}function hOe(){var e,t,n=new this(0);for(Qn=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return Qn=!0,new this(1/0);n=t}return Qn=!0,n.sqrt()}function _N(e){return e instanceof Jt||e&&e.toStringTag===M9||!1}function vOe(e){return new this(e).ln()}function pOe(e,t){return new this(e).log(t)}function gOe(e){return new this(e).log(2)}function yOe(e){return new this(e).log(10)}function _Oe(){return Q9(this,arguments,-1)}function wOe(){return Q9(this,arguments,1)}function bOe(e,t){return new this(e).mod(t)}function xOe(e,t){return new this(e).mul(t)}function COe(e,t){return new this(e).pow(t)}function SOe(e){var t,n,a,r,s=0,o=new this(1),i=[];if(e===void 0?e=this.precision:ri(e,1,Yd),a=Math.ceil(e/kn),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(a));s<a;)r=t[s],r>=429e7?t[s]=crypto.getRandomValues(new Uint32Array(1))[0]:i[s++]=r%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(a*=4);s<a;)r=t[s]+(t[s+1]<<8)+(t[s+2]<<16)+((t[s+3]&127)<<24),r>=214e7?crypto.randomBytes(4).copy(t,s):(i.push(r%1e7),s+=4);s=a/4}else throw Error(L9);else for(;s<a;)i[s++]=Math.random()*1e7|0;for(a=i[--s],e%=kn,a&&e&&(r=ds(10,kn-e),i[s]=(a/r|0)*r);i[s]===0;s--)i.pop();if(s<0)n=0,i=[0];else{for(n=-1;i[0]===0;n-=kn)i.shift();for(a=1,r=i[0];r>=10;r/=10)a++;a<kn&&(n-=kn-a)}return o.e=n,o.d=i,o}function EOe(e){return _n(e=new this(e),e.e+1,this.rounding)}function BOe(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function kOe(e){return new this(e).sin()}function TOe(e){return new this(e).sinh()}function IOe(e){return new this(e).sqrt()}function FOe(e,t){return new this(e).sub(t)}function POe(){var e=0,t=arguments,n=new this(t[e]);for(Qn=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return Qn=!0,_n(n,this.precision,this.rounding)}function DOe(e){return new this(e).tan()}function UOe(e){return new this(e).tanh()}function ROe(e){return _n(e=new this(e),e.e+1,1)}Qt[Symbol.for("nodejs.util.inspect.custom")]=Qt.toString;Qt[Symbol.toStringTag]="Decimal";var Jt=Qt.constructor=K9(WE);_2=new Jt(_2);w2=new Jt(w2);function W9(e){const t=M([]),n=M(!1),a=M([]),r=M(!1),s=(f=1e4)=>new Promise((m,h)=>setTimeout(()=>h(new Error("API_TIMEOUT")),f)),o=async()=>{if(!e.value){console.log("No bill ID available for loading payments"),t.value=[];return}if(n.value){console.log("Already loading payments, skipping duplicate call");return}n.value=!0,console.log("Loading payments for pharmacy bill ID:",e.value);try{const f=await Promise.race([iEe(e.value),s(1e4)]);console.log("Full API response:",f),f.success?(t.value=Array.isArray(f.data)?f.data:[],console.log(" Payments loaded successfully:",t.value.length)):(console.error(" API Error loading payments:",f.error),t.value=[])}catch(f){f.message==="API_TIMEOUT"?console.error(" Payment loading timed out"):console.error(" Exception loading bill payments:",f),t.value=[]}finally{n.value=!1}},i=async f=>{if(!e.value)throw new Error("No bill ID available for payment creation");r.value=!0;try{const m={...f,amount:Number(f.amount)};console.log("Creating pharmacy payment with payload:",m);const h=await Promise.race([oEe(e.value,m),s(15e3)]);if(!h.success)throw new Error(h.error?.message||"Failed to create payment");return console.log("Payment created successfully:",h.data),await o(),h}catch(m){throw m.message==="API_TIMEOUT"?new Error("Payment creation timed out. Please try again."):m}finally{r.value=!1}},c=async f=>{if(!(!f||!e.value)){if(a.value.includes(f)){console.log("Payment already being deleted:",f);return}a.value.push(f);try{const m=await Promise.race([lEe(e.value,f),s(1e4)]);if(!m.success)throw new Error(m.error?.message||"Failed to delete payment");return console.log("Payment deleted successfully:",f),await o(),m}catch(m){throw m.message==="API_TIMEOUT"?new Error("Payment deletion timed out. Please try again."):m}finally{a.value=a.value.filter(m=>m!==f)}}},A=ee(()=>Array.isArray(t.value)?t.value.reduce((f,m)=>f+(parseFloat(m.amount)||0),0):0);let d=null;return We(e,async(f,m)=>{if(console.log("Bill ID watcher triggered:",{newBillId:f||"null",oldBillId:m||"null",lastBillId:d||"null"}),f===d){console.log("Bill ID unchanged, skipping reload");return}d=f,f?(console.log("Bill ID changed, loading payments for:",f),await o()):(console.log("No bill ID, clearing payments"),t.value=[])},{immediate:!0}),{billPayments:t,isLoadingPayments:n,deletingPayments:a,isSubmittingPayment:r,totalPaymentsMade:A,loadBillPayments:o,createNewPayment:i,deletePayment:c,formatPaymentAmount:ar}}const NOe={class:"text-center"},VOe={class:"text-center"},LOe={class:"text-body-2 text-medium-emphasis mb-4"},MOe={class:"pa-1"},OOe={class:"text-body-1 font-weight-medium"},HOe={class:"text-body-2 text-medium-emphasis"},$Oe={class:"pa-1"},QOe={class:"text-body-1 font-weight-medium"},GOe={class:"text-body-2 text-medium-emphasis"},zOe={class:"pa-1"},KOe={class:"text-body-1 font-weight-medium"},WOe={class:"text-body-2 text-medium-emphasis"},jOe={key:0,class:"text-right",style:{width:"100px"}},qOe={key:1,class:"text-right",style:{width:"100px"}},YOe={key:2,class:"text-left",style:{width:"80px"}},XOe={class:"text-body-2 font-weight-medium"},JOe={class:"text-caption text-medium-emphasis"},ZOe={key:0,class:"text-caption text-medium-emphasis"},eHe={class:"text-body-2 font-weight-medium"},tHe={key:1},nHe={class:"text-body-2"},aHe={class:"text-caption text-medium-emphasis"},rHe={class:"text-right"},sHe={class:"text-right"},oHe={class:"text-right"},iHe={class:"text-right"},lHe={class:"text-right"},uHe={class:"text-right"},cHe={key:1},dHe={key:0,class:"text-right"},AHe={class:"text-body-2"},fHe={key:1,class:"text-right"},mHe={class:"text-right font-weight-medium"},hHe={key:2},vHe={key:0},pHe={key:1},gHe={class:"text-body-2 mb-1"},yHe={class:"text-body-2 mb-1"},_He={key:0,class:"text-body-2 mb-1"},wHe={class:"text-body-2 mb-1"},bHe={class:"text-body-2 mb-1"},xHe={class:"text-body-2 mb-1"},CHe={class:"text-body-2 mb-1"},SHe={key:0,class:"text-body-2 mb-1"},EHe={class:"text-body-2 mb-1"},BHe={class:"text-body-2 mb-1"},kHe={class:"text-subtitle-1 font-weight-bold mt-2"},THe={class:"text-h6"},IHe={key:0,class:"text-caption text-medium-emphasis mt-1"},FHe={class:"text-h6 text-success"},PHe={key:0,class:"text-caption text-info mt-1"},DHe={key:0,class:"text-center pa-4"},UHe={class:"font-weight-bold"},RHe={class:"d-flex align-center flex-wrap",style:{gap:"2px"}},NHe={class:"font-weight-medium text-body-1"},VHe={key:0,class:"text-caption text-medium-emphasis"},LHe={class:"mt-1"},MHe={class:"d-flex align-center justify-space-between flex-wrap gap-2 mt-1"},OHe={class:"d-flex align-center flex-wrap gap-2"},HHe={__name:"pharmacy-bill-edit",props:{billId:{type:[String,Number],required:!0},mode:{type:String,default:"edit",validator:e=>["edit","return"].includes(e)}},emits:["close","bill-updated"],setup(e,{emit:t}){const{showSuccess:n,showError:a}=ra(),r=e,s=t,o=M(!1),i=M(null),c=M(null),A=M([]),d=M([]),f=M(0),m=M(!1),h=M(!1),v=M(!1),y=M(!1),g=M(null),w=M([]),b=M(!1),x=M("");let T=null;const U=M({}),k=M(null),S=W9(k),{billPayments:E,isLoadingPayments:C,deletingPayments:P,totalPaymentsMade:F,loadBillPayments:N,createNewPayment:L,deletePayment:ie}=S,le=av,Q=M([]),Z=[je=>!!je||"Amount is required",je=>je>0||"Amount must be greater than 0",je=>Number.isInteger(Number(je))||"Amount must be a whole number"],ce=[je=>!!je||"Payment mode is required"],J=[je=>!!je||"Payment date is required"],se=()=>{Q.value.push({amount:null,mode:"Cash",paymentDate:Dn(),datePickerMenu:!1})},G=je=>{Q.value.splice(je,1)},D=je=>{if(!je)return null;try{if(typeof je=="string")return je.includes("T")?je.split("T")[0]:je;if(je instanceof Date){const Ke=je.getFullYear(),wt=String(je.getMonth()+1).padStart(2,"0"),Vt=String(je.getDate()).padStart(2,"0");return`${Ke}-${wt}-${Vt}`}return null}catch(Ke){return console.error("Error parsing payment date:",Ke),null}},j=(je,Ke)=>{if(je)if(je instanceof Date){const wt=je.getFullYear(),Vt=String(je.getMonth()+1).padStart(2,"0"),qt=String(je.getDate()).padStart(2,"0");Ke.paymentDate=`${wt}-${Vt}-${qt}`}else typeof je=="string"&&(Ke.paymentDate=je);else Ke.paymentDate="";Ke.datePickerMenu=!1},ne=ee(()=>Array.isArray(Q.value)?Q.value.reduce((je,Ke)=>je+(parseFloat(Ke.amount)||0),0):0),H=ee(()=>{const je=F.value,Ke=ne.value;return Math.max(0,Je.value-je-Ke)}),te=async()=>{if(Q.value.length===0){console.log("No new payment entries to create");return}console.log("Creating new payment entries:",Q.value);try{const je=Q.value.filter(Ke=>Ke.amount&&parseFloat(Ke.amount)>0&&Ke.mode&&Ke.paymentDate);console.log("Valid payments to create:",je);for(const Ke of je){const wt={amount:parseFloat(Ke.amount),mode:Ke.mode,paymentDate:Ke.paymentDate};console.log("Creating payment with payload:",wt);const Vt=await L(wt);Vt.success?console.log("Payment created successfully:",Vt.data):(console.error("Error creating payment entry:",Vt.error),a(`Failed to create payment: ${Vt.error?.message||"Unknown error"}`))}Q.value=[],console.log("New payment entries cleared"),await N()}catch(je){console.error("Error creating payment entries:",je),a("Failed to create some payments. Please try again.")}},Y=async()=>{try{o.value=!0,i.value=null;const{data:je,error:Ke}=await SH(r.billId);if(Ke)i.value=Ke.response?.data?.error||Ke.message||"Failed to load bill",a("Error loading bill");else{if(r.mode==="return"&&je.status!=="Finalized"){i.value="Only finalized bills can be returned",a("Only finalized bills can be returned");return}c.value=je,A.value=je.prescriptionMedicines||[],d.value=(je.items||[]).map(wt=>({...wt,medicineId:wt.medicineId,medicineName:wt.medicineName,saltComposition:wt.saltComposition||"",marketer:wt.marketer||"",batchId:wt.medicineBatchId||null,batchNumber:wt.batchNumber||"",expiryDate:wt.expiryDate||null,packType:wt.packType||"",unitsPerPack:wt.unitsPerPack||1,mrp:wt.mrp||0,discountPercentage:wt.discountPercentage||0,gstPercentage:wt.gstPercentage||0,quantityUnits:wt.quantityUnits||1,availableUnits:wt.availableUnits||0,returnedQuantity:wt.returnedQuantity||0,returnQuantity:0,billItemId:wt.id})),f.value=je.additionalDiscountAmount||0,await X(),k.value=r.billId,await N()}}catch(je){console.error("Error loading bill:",je),i.value=je.message||"An unexpected error occurred",a("Error loading bill")}finally{o.value=!1}},K=async je=>{if(U.value[je])return U.value[je];try{const{data:Ke,error:wt}=await JSe(je);if(!wt&&Ke){const Vt=Ke.map(qt=>({id:qt.batchId||qt.id,label:`${qt.batchNumber} (Exp: ${ht(qt.expiryDate)}, Stock: ${qt.availableUnits})`,batchNumber:qt.batchNumber,expiryDate:qt.expiryDate,packType:qt.packType||"",unitsPerPack:qt.unitsPerPack||1,availableUnits:qt.availableUnits,mrp:qt.mrp,discountPercentage:qt.discountPercentage,gstPercentage:qt.gstPercentage}));return U.value[je]=Vt,Vt}}catch(Ke){console.error("Error loading batches:",Ke)}return[]},X=async()=>{const je=[...new Set(d.value.map(Ke=>Ke.medicineId))];await Promise.all(je.map(Ke=>K(Ke)))},ae=je=>U.value[je]||[],oe=async(je,Ke)=>{const Vt=ae(je.medicineId).find(qt=>qt.id===je.batchId);Vt&&(je.batchNumber=Vt.batchNumber,je.expiryDate=Vt.expiryDate,je.packType=Vt.packType||"",je.unitsPerPack=Vt.unitsPerPack||1,je.mrp=Vt.mrp,je.discountPercentage=Vt.discountPercentage,je.gstPercentage=Vt.gstPercentage,je.availableUnits=Vt.availableUnits,Ce(je))},W=je=>{if(!je.mrp||!je.unitsPerPack||je.unitsPerPack<=0)return 0;const Ke=new Jt(je.mrp),wt=new Jt(je.unitsPerPack),Vt=new Jt(je.gstPercentage||0),qt=new Jt(je.discountPercentage||0),vt=Ke.dividedBy(wt),Kt=new Jt(1).minus(qt.dividedBy(100)),Pt=vt.times(Kt),Gn=new Jt(1).plus(Vt.dividedBy(100));return Pt.dividedBy(Gn).toNumber()},de=je=>{if(!je.mrp||!je.unitsPerPack||je.unitsPerPack<=0)return 0;const Ke=new Jt(je.mrp),wt=new Jt(je.unitsPerPack),Vt=new Jt(je.discountPercentage||0),qt=Ke.dividedBy(wt),vt=new Jt(1).minus(Vt.dividedBy(100));return qt.times(vt).toNumber()},Ae=je=>{if(r.mode==="return"){const Ke=je.quantityUnits||0,wt=je.returnQuantity||0;return Math.max(0,Ke-wt)}return je.quantityUnits||0},Ce=(je,Ke)=>{if(!je.mrp||!je.unitsPerPack||je.unitsPerPack<=0)return 0;const wt=new Jt(je.mrp),Vt=new Jt(je.unitsPerPack),qt=new Jt(je.discountPercentage||0),vt=Ae(je),Kt=new Jt(vt),Pt=wt.dividedBy(Vt),Gn=new Jt(1).minus(qt.dividedBy(100));return Pt.times(Gn).times(Kt).toNumber()},De=()=>{d.value.forEach((je,Ke)=>{Ce(je)})},xe=ee(()=>d.value.reduce((Ke,wt)=>{if(!wt.mrp||!wt.unitsPerPack||wt.unitsPerPack<=0)return Ke;const Vt=new Jt(wt.mrp),qt=new Jt(wt.unitsPerPack),vt=Ae(wt),Kt=new Jt(vt),Gn=Vt.dividedBy(qt).times(Kt);return Ke.plus(Gn)},new Jt(0)).toNumber()),ke=ee(()=>d.value.reduce((Ke,wt)=>{if(!wt.mrp||!wt.unitsPerPack||wt.unitsPerPack<=0)return Ke;const Vt=new Jt(wt.mrp),qt=new Jt(wt.unitsPerPack),vt=new Jt(wt.discountPercentage||0),Kt=Ae(wt),Pt=new Jt(Kt),Gn=Vt.dividedBy(qt),Nn=new Jt(1).minus(vt.dividedBy(100)),On=Gn.times(Nn),Tn=Gn.minus(On).times(Pt);return Ke.plus(Tn)},new Jt(0)).toNumber()),Ee=ee(()=>d.value.reduce((Ke,wt)=>{if(!wt.mrp||!wt.unitsPerPack||wt.unitsPerPack<=0)return Ke;const Vt=new Jt(wt.mrp),qt=new Jt(wt.unitsPerPack),vt=new Jt(wt.gstPercentage||0),Kt=new Jt(wt.discountPercentage||0),Pt=Ae(wt),Gn=new Jt(Pt),Nn=Vt.dividedBy(qt),On=new Jt(1).minus(Kt.dividedBy(100)),Yt=Nn.times(On),Tn=new Jt(1).plus(vt.dividedBy(100)),Ue=Yt.dividedBy(Tn).times(vt.dividedBy(100)).times(Gn);return Ke.plus(Ue)},new Jt(0)).toNumber()),ye=ee(()=>d.value.reduce((Ke,wt)=>{const Vt=new Jt(Ce(wt,d.value.indexOf(wt)));return Ke.plus(Vt)},new Jt(0)).toNumber()),we=ee(()=>{const je=new Jt(ye.value),Ke=new Jt(f.value||0),wt=je.minus(Ke);return Jt.max(new Jt(0),wt).toNumber()}),at=ee(()=>Math.ceil(we.value)-we.value),Je=ee(()=>Math.ceil(we.value)),rt=je=>{if(!je)return"N/A";try{let Ke;if(typeof je=="number")Ke=new Date(je*1e3);else if(typeof je=="string")Ke=new Date(je);else return"Invalid Date";if(isNaN(Ke.getTime()))return"Invalid Date";const wt=String(Ke.getDate()).padStart(2,"0"),Vt=Ke.toLocaleDateString("en-IN",{month:"short"}),qt=String(Ke.getFullYear()).slice(-2);return`${wt} ${Vt} ${qt}`}catch(Ke){return console.error("Error formatting date:",Ke,je),"Invalid Date"}},it=je=>{if(x.value=je,T&&clearTimeout(T),!je||je.trim().length===0){w.value=[],b.value=!1;return}T=setTimeout(()=>{Ie(je.trim())},300)},Ie=async je=>{if(!je||je.trim().length===0){w.value=[];return}try{b.value=!0,console.log(" Searching for:",je);const{data:Ke,error:wt}=await aEe(je);if(console.log(" Search response:",{medicinesCount:Ke?.length||0,error:wt?.message||null,data:Ke}),!wt&&Ke){const Vt=[];Ke.forEach(qt=>{console.log(` Medicine: ${qt.productName}, Batches: ${qt.batches?.length||0}`);const vt=qt.batches||[];console.log(` Valid batches for ${qt.productName}: ${vt.length}`),vt.forEach(Kt=>{const Pt=Kt.unitsPerPack||1,Gn=Kt.mrp/Pt;Vt.push({batchId:Kt.batchId||Kt.id,batchNumber:Kt.batchNumber,expiryDate:Kt.expiryDate,expiryFormatted:rt(Kt.expiryDate),medicineId:qt.id,medicineName:qt.productName,saltComposition:qt.saltComposition||"",marketer:qt.marketer||"",availableUnits:Kt.availableUnits,mrp:Kt.mrp,mrpPerUnit:Gn,discountPercentage:Kt.discountPercentage||0,gstPercentage:Kt.gstPercentage||0,packType:Kt.packType||"",unitsPerPack:Pt,displayLabel:`${qt.productName} - ${Kt.batchNumber} (Exp: ${rt(Kt.expiryDate)}, Stock: ${Kt.availableUnits}, MRP: ${Nt(Gn)}/unit)`})})}),w.value=Vt,console.log("Flattened batches:",Vt.length)}else console.log("No data or error in response"),w.value=[],wt&&a("Error searching medicines: "+(wt.message||"Unknown error"))}catch(Ke){console.error("Error searching medicines:",Ke),w.value=[],a("Error searching medicines")}finally{b.value=!1}},Ve=()=>{y.value=!0,w.value=[],g.value=null,x.value="",T&&clearTimeout(T)},ft=()=>{if(!g.value)return;const je=g.value;if(je.availableUnits<=0){a("Selected batch has no available stock.");return}const Ke={medicineId:je.medicineId,medicineName:je.medicineName,saltComposition:je.saltComposition,marketer:je.marketer||"",batchId:je.batchId,batchNumber:je.batchNumber,expiryDate:je.expiryDate,packType:je.packType,unitsPerPack:je.unitsPerPack,mrp:je.mrp,discountPercentage:je.discountPercentage,gstPercentage:je.gstPercentage,quantityUnits:1,availableUnits:je.availableUnits};d.value.push(Ke),Ce(Ke,d.value.length-1),y.value=!1,g.value=null,n("Medicine added to bill")},Ft=je=>{d.value.splice(je,1),De()},tt=async()=>{if(d.value.length===0)return{success:!1,error:"Please add at least one item to save the draft"};try{const je=d.value.map(Vt=>({medicineId:Vt.medicineId,medicineBatchId:Vt.batchId,quantityUnits:Vt.quantityUnits,discountPercentage:Vt.discountPercentage||0})),{data:Ke,error:wt}=await qSe(r.billId,je,f.value);return wt?{success:!1,error:wt.response?.data?.error||"Failed to save draft"}:(await te(),{success:!0,error:null})}catch(je){return console.error("Error saving draft:",je),{success:!1,error:je.message||"An unexpected error occurred"}}},Ge=async()=>{try{m.value=!0;const je=await tt();je.success?(n("Draft saved successfully"),s("bill-updated"),$t()):a(je.error||"Failed to save draft")}catch(je){console.error("Error saving draft:",je),a("An unexpected error occurred")}finally{m.value=!1}},pt=async()=>{if(d.value.length===0){a("Please add at least one item to finalize the bill");return}try{h.value=!0;const je=await tt();if(!je.success){a(`Failed to save changes: ${je.error}. Please try again.`);return}const{data:Ke,error:wt}=await YSe(r.billId);wt?a(wt.response?.data?.error||"Failed to finalize bill"):(n("Bill finalized successfully"),s("bill-updated",r.billId))}catch(je){console.error("Error finalizing bill:",je),a("An unexpected error occurred")}finally{h.value=!1}},ht=je=>{if(!je)return"";try{let Ke;if(typeof je=="number")Ke=new Date(je*1e3);else if(typeof je=="string")Ke=new Date(je);else return"";if(isNaN(Ke.getTime()))return"";const wt=String(Ke.getDate()).padStart(2,"0"),Vt=Ke.toLocaleDateString("en-IN",{month:"short"}),qt=String(Ke.getFullYear()).slice(-2);return`${wt} ${Vt} ${qt}`}catch(Ke){return console.error("Error formatting date:",Ke,je),""}},Nt=je=>je==null?"0.00":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(je),nn=je=>je==null?"0":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(je),yn=je=>{if(!je)return!1;try{let Ke;if(typeof je=="number")Ke=new Date(je*1e3);else if(typeof je=="string")Ke=new Date(je);else return!1;if(isNaN(Ke.getTime()))return!1;const wt=new Date;return wt.setHours(0,0,0,0),Ke.setHours(0,0,0,0),Ke<wt}catch(Ke){return console.error("Error checking expiry:",Ke,je),!1}},qn=je=>({Draft:"warning",Finalized:"success",Cancelled:"error",Refund:"info"})[je]||"default",$t=()=>{s("close")},Tt=je=>je.quantityUnits-(je.returnedQuantity||0),ut=(je,Ke)=>{const wt=Tt(je);je.returnQuantity>wt&&(je.returnQuantity=wt,a(`Return quantity cannot exceed ${wt} units for ${je.medicineName}`)),je.returnQuantity<0&&(je.returnQuantity=0)},kt=ee(()=>d.value.filter(je=>je.returnQuantity>0).length),Zt=async()=>{const je=d.value.filter(Ke=>Ke.returnQuantity>0).map(Ke=>({billItemId:Ke.billItemId||Ke.id,returnedQuantity:Ke.returnQuantity}));if(je.length===0){a("Please specify return quantity for at least one item");return}try{if(v.value=!0,Q.value.length>0){const Vt=Q.value.filter(qt=>qt.amount&&parseFloat(qt.amount)>0&&qt.mode&&qt.paymentDate);if(Vt.length>0){for(const qt of Vt){const vt={amount:parseFloat(qt.amount),mode:qt.mode,paymentDate:qt.paymentDate},Kt=await L(vt);if(!Kt.success){a(`Failed to create payment: ${Kt.error?.message||"Unknown error"}`),v.value=!1;return}}Q.value=[],await N()}}const{data:Ke,error:wt}=await tEe(r.billId,je);wt?a(wt.response?.data?.error||wt.message||"Failed to process return"):(n("Return processed successfully"),s("bill-updated",r.billId))}catch(Ke){console.error("Error processing return:",Ke),a("An unexpected error occurred")}finally{v.value=!1}};return We(()=>r.billId,je=>{k.value=je},{immediate:!0}),cn(()=>{Y()}),(je,Ke)=>{const wt=I("v-icon"),Vt=I("v-btn"),qt=I("v-card-title"),vt=I("v-col"),Kt=I("v-row"),Pt=I("v-progress-circular"),Gn=I("v-label"),Nn=I("v-chip"),On=I("v-card-text"),Yt=I("v-card"),Tn=I("v-select"),Te=I("v-text-field"),He=I("v-table"),Ue=I("v-alert"),Le=I("v-divider"),Qe=I("v-date-picker"),pe=I("v-menu"),re=I("v-container"),ge=I("v-list-item"),Se=I("v-card-subtitle"),Me=I("v-autocomplete"),Ze=I("v-spacer"),nt=I("v-card-actions"),et=I("v-dialog");return R(),me(ze,null,[l(Yt,{rounded:"lg",color:"surfaceContainer",flat:"",ripple:!1},{default:u(()=>[l(Kt,{"no-gutters":""},{default:u(()=>[l(vt,{cols:"12"},{default:u(()=>[l(qt,{class:"d-flex align-center justify-space-between"},{default:u(()=>[p("span",null,"Pharmacy Bill - "+q(e.mode==="return"?"Return":"Edit"),1),l(Vt,{onClick:$t,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(wt,{size:"18"},{default:u(()=>[...Ke[4]||(Ke[4]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(Kt,{"no-gutters":""},{default:u(()=>[l(vt,{cols:"12",class:"scroll-element"},{default:u(()=>[o.value?(R(),ve(Kt,{key:0,"no-gutters":""},{default:u(()=>[l(vt,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[p("div",NOe,[l(Pt,{indeterminate:"",color:"primary",size:"64"}),Ke[5]||(Ke[5]=p("div",{class:"mt-4 text-subtitle-1"},"Loading bill...",-1))])]),_:1})]),_:1})):i.value?(R(),ve(Kt,{key:1,"no-gutters":""},{default:u(()=>[l(vt,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[p("div",VOe,[l(wt,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...Ke[6]||(Ke[6]=[O("mdi-alert-circle",-1)])]),_:1}),Ke[8]||(Ke[8]=p("div",{class:"text-h6 mb-2"},"Failed to Load Bill",-1)),p("div",LOe,q(i.value),1),l(Vt,{color:"primary",onClick:Y,"prepend-icon":"mdi-refresh"},{default:u(()=>[...Ke[7]||(Ke[7]=[O(" Retry ",-1)])]),_:1})])]),_:1})]),_:1})):c.value?(R(),ve(re,{key:2,fluid:"",class:"pa-3"},{default:u(()=>[l(Yt,{flat:"",color:"surfaceContainerHigh",class:"mb-4 card-enhanced"},{default:u(()=>[l(On,{class:"pb-1 pt-2"},{default:u(()=>[l(Kt,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(vt,{cols:"4"},{default:u(()=>[p("div",MOe,[l(Gn,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...Ke[9]||(Ke[9]=[O("Patient Information",-1)])]),_:1}),p("div",OOe,q(c.value.patientName||"Unknown Patient"),1),p("div",HOe,"ID: "+q(c.value.patientId||"N/A"),1)])]),_:1}),l(vt,{cols:"4"},{default:u(()=>[p("div",$Oe,[l(Gn,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...Ke[10]||(Ke[10]=[O("Consultation Details",-1)])]),_:1}),p("div",QOe,"Dr. "+q(c.value.doctorName||"Unknown"),1),p("div",GOe,"Date: "+q(ht(c.value.consultationDate)),1)])]),_:1}),l(vt,{cols:"4"},{default:u(()=>[p("div",zOe,[l(Gn,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...Ke[11]||(Ke[11]=[O("Bill Information",-1)])]),_:1}),p("div",KOe,q(c.value.identifier),1),p("div",WOe,"Date: "+q(ht(c.value.billDate)),1),l(Nn,{color:qn(c.value.status),size:"small",variant:"flat",class:"mt-1"},{default:u(()=>[O(q(c.value.status),1)]),_:1},8,["color"])])]),_:1})]),_:1})]),_:1})]),_:1}),A.value&&A.value.length>0?(R(),ve(Yt,{key:0,flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(On,{class:"pb-2"},{default:u(()=>[Ke[12]||(Ke[12]=p("div",{class:"text-subtitle-1 mb-2"},"Prescription Medicines",-1)),Ke[13]||(Ke[13]=p("div",{class:"text-body-2 text-medium-emphasis mb-2"},"These medicines were prescribed in the consultation:",-1)),(R(!0),me(ze,null,Wt(A.value,(lt,bt)=>(R(),ve(Nn,{key:bt,size:"small",variant:"outlined",class:"mr-2 mb-2"},{default:u(()=>[O(q(lt.productName)+" ("+q(lt.quantityUnits)+" units) ",1)]),_:2},1024))),128))]),_:1})]),_:1})):_e("",!0),l(Yt,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(On,{class:"pb-2"},{default:u(()=>[Ke[34]||(Ke[34]=p("div",{class:"text-subtitle-1 mb-3"},"Bill Items",-1)),l(He,{density:"compact",class:"mb-3"},{default:u(()=>[p("thead",null,[p("tr",null,[Ke[14]||(Ke[14]=p("th",{class:"text-left",style:{width:"60px"}},"Sr. No",-1)),Ke[15]||(Ke[15]=p("th",{class:"text-left",style:{width:"200px"}},"Item",-1)),Ke[16]||(Ke[16]=p("th",{class:"text-left",style:{width:"150px"}},"Batch Details",-1)),Ke[17]||(Ke[17]=p("th",{class:"text-left",style:{width:"120px"}},"Packaging Details",-1)),Ke[18]||(Ke[18]=p("th",{class:"text-right",style:{width:"100px"}},"MRP (Pack)",-1)),Ke[19]||(Ke[19]=p("th",{class:"text-right",style:{width:"100px"}},"Discount %",-1)),Ke[20]||(Ke[20]=p("th",{class:"text-right",style:{width:"120px"}},"Taxable Value/Unit",-1)),Ke[21]||(Ke[21]=p("th",{class:"text-right",style:{width:"100px"}},"GST %",-1)),Ke[22]||(Ke[22]=p("th",{class:"text-right",style:{width:"120px"}},"Final Value/Unit",-1)),Ke[23]||(Ke[23]=p("th",{class:"text-right",style:{width:"100px"}},"Qty",-1)),e.mode==="return"?(R(),me("th",jOe,"Already Returned")):_e("",!0),e.mode==="return"?(R(),me("th",qOe,"Return Qty")):_e("",!0),Ke[24]||(Ke[24]=p("th",{class:"text-right",style:{width:"120px"}},"Total ()",-1)),e.mode==="edit"?(R(),me("th",YOe,"Actions")):_e("",!0)])]),p("tbody",null,[(R(!0),me(ze,null,Wt(d.value,(lt,bt)=>(R(),me("tr",{key:bt},[p("td",null,q(bt+1),1),p("td",null,[p("div",XOe,q(lt.medicineName),1),p("div",JOe,q(lt.saltComposition),1),lt.marketer?(R(),me("div",ZOe,q(lt.marketer),1)):_e("",!0)]),p("td",null,[e.mode==="return"||lt.batchId?(R(),me(ze,{key:0},[p("div",eHe,q(lt.batchNumber||"N/A"),1),p("div",{class:ct(["text-caption text-medium-emphasis",yn(lt.expiryDate)?"text-error":""])},[lt.expiryDate?(R(),me(ze,{key:0},[O(" Exp: "+q(ht(lt.expiryDate))+" ",1),yn(lt.expiryDate)?(R(),ve(Nn,{key:0,color:"error",size:"x-small",variant:"tonal",class:"ml-1"},{default:u(()=>[...Ke[25]||(Ke[25]=[O(" Expired ",-1)])]),_:1})):_e("",!0)],64)):(R(),me("span",tHe,"Exp: N/A"))],2),e.mode==="return"?(R(),ve(Nn,{key:0,size:"x-small",color:"info",variant:"tonal",class:"mt-1"},{default:u(()=>[l(wt,{start:"",size:"x-small"},{default:u(()=>[...Ke[26]||(Ke[26]=[O("mdi-lock",-1)])]),_:1}),Ke[27]||(Ke[27]=O(" Locked ",-1))]),_:1})):_e("",!0)],64)):e.mode==="edit"?(R(),ve(Tn,{key:1,modelValue:lt.batchId,"onUpdate:modelValue":[It=>lt.batchId=It,()=>oe(lt,bt)],items:ae(lt.medicineId),"item-title":"label","item-value":"id",density:"compact",variant:"underlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):_e("",!0)]),p("td",null,[p("div",nHe,q(lt.packType||"N/A"),1),p("div",aHe,q(lt.unitsPerPack||1)+" units/pack",1)]),p("td",rHe,q(Nt(lt.mrp)),1),p("td",sHe,q(lt.discountPercentage)+"%",1),p("td",oHe,q(Nt(W(lt))),1),p("td",iHe,q(lt.gstPercentage)+"%",1),p("td",lHe,q(Nt(de(lt))),1),p("td",uHe,[e.mode==="edit"?(R(),ve(Te,{key:0,modelValue:lt.quantityUnits,"onUpdate:modelValue":[It=>lt.quantityUnits=It,()=>Ce(lt,bt)],modelModifiers:{number:!0},type:"number",density:"compact",variant:"underlined","hide-details":"",min:"1",max:lt.availableUnits},null,8,["modelValue","onUpdate:modelValue","max"])):(R(),me("span",cHe,q(lt.quantityUnits),1))]),e.mode==="return"?(R(),me("td",dHe,[p("span",AHe,q(lt.returnedQuantity||0),1)])):_e("",!0),e.mode==="return"?(R(),me("td",fHe,[l(Te,{modelValue:lt.returnQuantity,"onUpdate:modelValue":[It=>lt.returnQuantity=It,()=>{ut(lt,bt),De()}],modelModifiers:{number:!0},type:"number",density:"compact",variant:"underlined","hide-details":"",min:"0",max:Tt(lt)},null,8,["modelValue","onUpdate:modelValue","max"])])):_e("",!0),p("td",mHe,q(Nt(Ce(lt,bt))),1),e.mode==="edit"?(R(),me("td",hHe,[l(Vt,{icon:"",size:"small",color:"error",variant:"text",onClick:It=>Ft(bt)},{default:u(()=>[l(wt,null,{default:u(()=>[...Ke[28]||(Ke[28]=[O("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])):_e("",!0)]))),128))])]),_:1}),d.value.length===0?(R(),ve(Ue,{key:0,type:"info",variant:"tonal",class:"mt-2"},{default:u(()=>[e.mode==="edit"?(R(),me("span",vHe,'No items in bill. Click "Add Medicine" to add items.')):(R(),me("span",pHe,"No items in bill."))]),_:1})):_e("",!0),e.mode==="edit"?(R(),ve(Kt,{key:1,"no-gutters":"",class:"align-center mt-3"},{default:u(()=>[l(vt,{cols:"auto"},{default:u(()=>[l(Vt,{variant:"outlined",color:"primary",onClick:Ve,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...Ke[29]||(Ke[29]=[O(" Add Medicine ",-1)])]),_:1})]),_:1}),l(vt),l(vt,{cols:"3"},{default:u(()=>[l(Te,{label:"Additional Discount",modelValue:f.value,"onUpdate:modelValue":[Ke[0]||(Ke[0]=lt=>f.value=lt),De],modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})):_e("",!0),e.mode==="return"?(R(),ve(Yt,{key:2,flat:"",color:"surfaceContainerHigh",class:"mt-3 card-enhanced"},{default:u(()=>[l(On,{class:"pb-2"},{default:u(()=>[Ke[32]||(Ke[32]=p("div",{class:"text-subtitle-2 mb-2"},"Return Summary",-1)),p("div",gHe,[Ke[30]||(Ke[30]=O(" Items to Return: ",-1)),p("strong",null,q(kt.value),1)]),l(Le,{class:"my-2"}),p("div",yHe,[Ke[31]||(Ke[31]=p("strong",null,"Updated Bill Total (after return):",-1)),O(" "+q(Nt(Je.value)),1)]),Ke[33]||(Ke[33]=p("div",{class:"text-body-2 text-medium-emphasis"}," Bill total updates in real-time. Adjust payments as needed before processing return. ",-1))]),_:1})]),_:1})):_e("",!0)]),_:1})]),_:1}),l(Yt,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(On,{class:"pb-2"},{default:u(()=>[Ke[42]||(Ke[42]=p("div",{class:"text-subtitle-1 mb-3"},"Bill Summary",-1)),l(Le,{class:"mb-3"}),l(Kt,{"no-gutters":""},{default:u(()=>[l(vt,{cols:"6"},{default:u(()=>[Ke[35]||(Ke[35]=p("div",{class:"text-body-2 mb-1"},"Total MRP:",-1)),Ke[36]||(Ke[36]=p("div",{class:"text-body-2 mb-1"},"Total Discount:",-1)),Ke[37]||(Ke[37]=p("div",{class:"text-body-2 mb-1"},"Total GST:",-1)),Ke[38]||(Ke[38]=p("div",{class:"text-body-2 mb-1"},"Subtotal with GST:",-1)),f.value>0?(R(),me("div",_He,"Additional Discount:")):_e("",!0),Ke[39]||(Ke[39]=p("div",{class:"text-body-2 mb-1"},"Net Amount:",-1)),Ke[40]||(Ke[40]=p("div",{class:"text-body-2 mb-1"},"Round Off:",-1)),Ke[41]||(Ke[41]=p("div",{class:"text-subtitle-1 font-weight-bold mt-2"},"Final Amount:",-1))]),_:1}),l(vt,{cols:"6",class:"text-right"},{default:u(()=>[p("div",wHe,q(Nt(xe.value)),1),p("div",bHe,"-"+q(Nt(ke.value)),1),p("div",xHe,q(Nt(Ee.value)),1),p("div",CHe,q(Nt(ye.value)),1),f.value>0?(R(),me("div",SHe,"-"+q(Nt(f.value)),1)):_e("",!0),p("div",EHe,q(Nt(we.value)),1),p("div",BHe,q(at.value>0?"+":"")+q(Nt(at.value)),1),p("div",kHe,q(Nt(Je.value)),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(Yt,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(On,{class:"pb-2"},{default:u(()=>[Ke[53]||(Ke[53]=p("div",{class:"text-subtitle-1 mb-3"},"Payment Information",-1)),l(Kt,{"no-gutters":"",class:"mb-3"},{default:u(()=>[l(vt,{cols:"4"},{default:u(()=>[Ke[43]||(Ke[43]=p("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Total Amount",-1)),p("div",THe,q(Nt(Je.value)),1),e.mode==="return"?(R(),me("div",IHe," (Updated after return) ")):_e("",!0)]),_:1}),l(vt,{cols:"4"},{default:u(()=>[Ke[44]||(Ke[44]=p("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Paid Amount",-1)),p("div",FHe,q(Nt(Oe(F)+ne.value)),1)]),_:1}),l(vt,{cols:"4"},{default:u(()=>[Ke[45]||(Ke[45]=p("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Balance Due",-1)),p("div",{class:ct(["text-h6",H.value>0?"text-error":"text-success"])},q(Nt(H.value)),3),e.mode==="return"&&H.value<0?(R(),me("div",PHe," (Credit/Overpayment) ")):_e("",!0)]),_:1})]),_:1}),Oe(C)?(R(),me("div",DHe,[l(Pt,{indeterminate:"",size:"32",color:"primary"}),Ke[46]||(Ke[46]=p("div",{class:"text-body-2 mt-2"},"Loading payments...",-1))])):(R(),me(ze,{key:1},[l(Le,{class:"mb-3"}),Ke[52]||(Ke[52]=p("div",{class:"text-subtitle-2 mb-2"},"Payments",-1)),l(He,{density:"compact",class:"mb-3"},{default:u(()=>[Ke[50]||(Ke[50]=p("thead",null,[p("tr",null,[p("th",{class:"text-left",style:{width:"60px"}},"Sr. No"),p("th",{class:"text-left",style:{width:"150px"}},"Amount ()"),p("th",{class:"text-left",style:{width:"150px"}},"Payment Mode"),p("th",{class:"text-left",style:{width:"150px"}},"Payment Date"),p("th",{class:"text-left",style:{width:"80px"}},"Actions")])],-1)),p("tbody",null,[(R(!0),me(ze,null,Wt(Oe(E),(lt,bt)=>(R(),me("tr",{key:`existing-${lt.id}`},[p("td",null,q(bt+1),1),p("td",UHe,""+q(lt.amount.toLocaleString()),1),p("td",null,q(lt.mode),1),p("td",null,q(ht(lt.paymentDate)),1),p("td",null,[l(Vt,{icon:"",size:"small",color:"error",variant:"text",onClick:It=>Oe(ie)(lt.id),loading:Oe(P).includes(lt.id)},{default:u(()=>[l(wt,null,{default:u(()=>[...Ke[47]||(Ke[47]=[O("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick","loading"])])]))),128)),(R(!0),me(ze,null,Wt(Q.value,(lt,bt)=>(R(),me("tr",{key:`new-${bt}`},[p("td",null,q(Oe(E).length+bt+1),1),p("td",null,[l(Te,{modelValue:lt.amount,"onUpdate:modelValue":It=>lt.amount=It,modelModifiers:{number:!0},type:"number",prefix:"",min:"1",density:"compact",variant:"underlined","hide-details":"",rules:Z},null,8,["modelValue","onUpdate:modelValue"])]),p("td",null,[l(Tn,{modelValue:lt.mode,"onUpdate:modelValue":It=>lt.mode=It,items:Oe(le),density:"compact",variant:"underlined","hide-details":"",rules:ce},null,8,["modelValue","onUpdate:modelValue","items"])]),p("td",null,[l(pe,{modelValue:lt.datePickerMenu,"onUpdate:modelValue":It=>lt.datePickerMenu=It,"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},{activator:u(({props:It})=>[l(Te,Fe({modelValue:lt.paymentDate,"onUpdate:modelValue":an=>lt.paymentDate=an,density:"compact",variant:"underlined","hide-details":"",rules:J,readonly:""},{ref_for:!0},It),{"append-inner":u(()=>[l(wt,{class:"text-medium-emphasis"},{default:u(()=>[...Ke[48]||(Ke[48]=[O("mdi-calendar",-1)])]),_:1})]),_:1},16,["modelValue","onUpdate:modelValue"])]),default:u(()=>[l(Qe,{"model-value":D(lt.paymentDate),"onUpdate:modelValue":It=>j(It,lt),color:"primary",locale:"en-IN"},null,8,["model-value","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),p("td",null,[l(Vt,{icon:"",size:"small",color:"error",variant:"text",onClick:It=>G(bt)},{default:u(()=>[l(wt,null,{default:u(()=>[...Ke[49]||(Ke[49]=[O("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])]))),128))])]),_:1}),l(Kt,{"no-gutters":"",class:"align-center"},{default:u(()=>[l(vt,{cols:"auto"},{default:u(()=>[l(Vt,{variant:"outlined",color:"secondary",onClick:se,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...Ke[51]||(Ke[51]=[O(" Add Payment ",-1)])]),_:1})]),_:1})]),_:1})],64))]),_:1})]),_:1}),l(Yt,{flat:"",color:"surfaceContainerHigh",class:"card-enhanced"},{default:u(()=>[l(On,{class:"d-flex justify-center pb-2",style:{gap:"4px"}},{default:u(()=>[e.mode==="edit"?(R(),me(ze,{key:0},[l(Vt,{variant:"outlined",onClick:Ge,loading:m.value,disabled:c.value.status!=="Draft"||d.value.length===0},{default:u(()=>[...Ke[54]||(Ke[54]=[O(" Save Draft ",-1)])]),_:1},8,["loading","disabled"]),l(Vt,{color:"primary",onClick:pt,loading:h.value,disabled:c.value.status!=="Draft"||d.value.length===0},{default:u(()=>[...Ke[55]||(Ke[55]=[O(" Finalize Bill ",-1)])]),_:1},8,["loading","disabled"])],64)):(R(),me(ze,{key:1},[l(Vt,{variant:"outlined",onClick:$t},{default:u(()=>[...Ke[56]||(Ke[56]=[O(" Cancel ",-1)])]),_:1}),l(Vt,{color:"primary",onClick:Zt,loading:v.value,disabled:kt.value===0},{default:u(()=>[...Ke[57]||(Ke[57]=[O(" Process Return ",-1)])]),_:1},8,["loading","disabled"])],64))]),_:1})]),_:1})]),_:1})):_e("",!0)]),_:1})]),_:1})]),_:1}),l(et,{modelValue:y.value,"onUpdate:modelValue":Ke[3]||(Ke[3]=lt=>y.value=lt),"max-width":"700px",persistent:""},{default:u(()=>[l(Yt,null,{default:u(()=>[l(qt,null,{default:u(()=>[...Ke[58]||(Ke[58]=[O("Add Medicine to Bill",-1)])]),_:1}),l(On,null,{default:u(()=>[l(Me,{modelValue:g.value,"onUpdate:modelValue":Ke[1]||(Ke[1]=lt=>g.value=lt),items:w.value,"item-title":"displayLabel","return-object":"",label:"Search Medicine by Batch",variant:"outlined",loading:b.value,"onUpdate:search":it,placeholder:"Type medicine name to search...",clearable:"",autofocus:""},{item:u(({props:lt,item:bt})=>[l(ge,Fe(lt,{class:"batch-search-item"}),{title:u(()=>[p("div",RHe,[p("span",NHe,q(bt.raw.medicineName),1),bt.raw.saltComposition?(R(),me("span",VHe," ("+q(bt.raw.saltComposition)+") ",1)):_e("",!0)])]),subtitle:u(()=>[p("div",LHe,[p("div",MHe,[p("div",OHe,[l(Nn,{size:"small",variant:"tonal",color:"primary",density:"compact"},{default:u(()=>[l(wt,{start:"",size:"small"},{default:u(()=>[...Ke[59]||(Ke[59]=[O("mdi-barcode",-1)])]),_:1}),O(" "+q(bt.raw.batchNumber),1)]),_:2},1024),l(Nn,{size:"small",variant:"tonal",color:"info",density:"compact"},{default:u(()=>[l(wt,{start:"",size:"small"},{default:u(()=>[...Ke[60]||(Ke[60]=[O("mdi-calendar",-1)])]),_:1}),O(" "+q(bt.raw.expiryFormatted),1)]),_:2},1024),l(Nn,{size:"small",variant:"tonal",color:"default",density:"compact"},{default:u(()=>[O(q(nn(bt.raw.mrpPerUnit))+"/unit ",1)]),_:2},1024),bt.raw.discountPercentage>0?(R(),ve(Nn,{key:0,size:"small",variant:"tonal",color:"warning",density:"compact"},{default:u(()=>[l(wt,{start:"",size:"small"},{default:u(()=>[...Ke[61]||(Ke[61]=[O("mdi-tag",-1)])]),_:1}),O(" "+q(bt.raw.discountPercentage)+"% off ",1)]),_:2},1024)):_e("",!0)]),l(Nn,{size:"default",variant:"flat",color:"success",class:"font-weight-bold"},{default:u(()=>[l(wt,{start:""},{default:u(()=>[...Ke[62]||(Ke[62]=[O("mdi-package-variant",-1)])]),_:1}),O(" "+q(bt.raw.availableUnits)+" units ",1)]),_:2},1024)])])]),_:2},1040)]),"no-data":u(()=>[l(Yt,{flat:"",class:"pa-4 text-center"},{default:u(()=>[l(Se,null,{default:u(()=>[O(q(b.value?"Searching...":"No batches found. Try a different search term."),1)]),_:1})]),_:1})]),_:1},8,["modelValue","items","loading"])]),_:1}),l(nt,null,{default:u(()=>[l(Ze),l(Vt,{variant:"outlined",onClick:Ke[2]||(Ke[2]=lt=>y.value=!1)},{default:u(()=>[...Ke[63]||(Ke[63]=[O("Cancel",-1)])]),_:1}),l(Vt,{color:"primary",onClick:ft,disabled:!g.value},{default:u(()=>[...Ke[64]||(Ke[64]=[O("Add to Bill",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},$He=Xt(HHe,[["__scopeId","data-v-21b23054"]]),QHe={class:"text-center"},GHe={class:"text-center"},zHe={class:"text-body-2 text-medium-emphasis mb-4"},KHe={class:"pa-1"},WHe={class:"text-body-1 font-weight-medium"},jHe={class:"text-body-2 text-medium-emphasis"},qHe={key:0,class:"text-body-2 text-medium-emphasis"},YHe={class:"pa-1"},XHe={class:"text-body-1 font-weight-medium"},JHe={class:"text-body-2 text-medium-emphasis"},ZHe={class:"pa-1"},e$e={class:"text-body-1 font-weight-medium"},t$e={class:"text-body-2 text-medium-emphasis"},n$e={class:"text-body-2 font-weight-medium"},a$e={key:0,class:"text-caption text-medium-emphasis"},r$e={class:"text-body-2"},s$e={class:"text-body-2 font-weight-medium"},o$e={key:1},i$e={class:"text-body-2"},l$e={class:"text-caption text-medium-emphasis"},u$e={class:"text-right"},c$e={class:"text-right"},d$e={class:"text-right"},A$e={class:"text-right"},f$e={class:"text-right"},m$e={class:"text-right"},h$e={class:"text-right font-weight-medium"},v$e={key:0,class:"text-body-2 mb-1 font-weight-bold"},p$e={class:"text-body-2 mb-1"},g$e={class:"text-body-2 mb-1"},y$e={class:"text-body-2 mb-1"},_$e={class:"text-body-2 mb-1",style:{"font-size":"0.875rem"}},w$e={class:"text-body-2 mb-1",style:{"font-size":"0.875rem"}},b$e={class:"text-body-2 mb-1 font-weight-bold"},x$e={key:0,class:"text-body-2 mb-1 font-weight-bold"},C$e={class:"text-body-2 mb-1"},S$e={class:"text-body-2 mb-1"},E$e={class:"text-subtitle-1 font-weight-bold mt-2"},B$e={class:"text-h6"},k$e={class:"text-h6 text-success"},T$e={key:0,class:"text-center pa-4"},I$e={class:"text-left"},F$e={class:"text-left"},P$e={class:"text-right"},D$e={class:"text-right"},U$e={class:"text-center pa-4"},R$e={key:1,class:"d-flex justify-center align-center pa-8"},N$e={class:"text-center"},V$e={__name:"pharmacy-bill-view",props:{billId:{type:[String,Number],required:!0}},emits:["close","edit-bill"],setup(e,{emit:t}){const{showError:n}=ra(),a=e,r=t,s=M(!1),o=M(null),i=M(null),c=M(null),A=M("view"),d=M({}),f=M(null),m=W9(f),{billPayments:h,isLoadingPayments:v,totalPaymentsMade:y,loadBillPayments:g}=m,w=async()=>{try{s.value=!0,o.value=null;const{data:H,error:te}=await SH(a.billId);if(te)o.value=te.response?.data?.error||te.message||"Failed to load bill",n("Error loading bill");else{if(i.value=H,H.patientId)try{const Y=await Xk(H.patientId);Y.data&&(c.value=Y.data)}catch(Y){console.warn("Could not fetch patient details:",Y)}f.value=a.billId,await g()}}catch(H){console.error("Error loading bill:",H),o.value=H.message||"An unexpected error occurred",n("Error loading bill")}finally{s.value=!1}},b=H=>{if(!H)return"";try{let te;if(typeof H=="number")te=new Date(H*1e3);else if(typeof H=="string")te=new Date(H);else return"";if(isNaN(te.getTime()))return"";const Y=String(te.getDate()).padStart(2,"0"),K=te.toLocaleDateString("en-IN",{month:"short"}),X=String(te.getFullYear()).slice(-2);return`${Y} ${K} ${X}`}catch(te){return console.error("Error formatting date:",te,H),""}},x=H=>{if(!H)return"";try{return new Date(H*1e3).toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return H}},T=H=>H==null?"0.00":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(H),U=H=>{if(!H.mrp||!H.unitsPerPack||H.unitsPerPack<=0)return 0;const te=new Jt(H.mrp),Y=new Jt(H.unitsPerPack),K=new Jt(H.gstPercentage||0),X=new Jt(H.discountPercentage||0),ae=te.dividedBy(Y),oe=new Jt(1).plus(K.dividedBy(100)),W=ae.dividedBy(oe),de=new Jt(1).minus(X.dividedBy(100));return W.times(de).toNumber()},k=H=>{if(!H.mrp||!H.unitsPerPack||H.unitsPerPack<=0)return 0;const te=new Jt(U(H)),Y=new Jt(H.gstPercentage||0),K=new Jt(1).plus(Y.dividedBy(100));return te.times(K).toNumber()},S=(H,te)=>{if(!H.mrp||!H.unitsPerPack||H.unitsPerPack<=0)return 0;const Y=new Jt(H.mrp),K=new Jt(H.unitsPerPack),X=new Jt(H.gstPercentage||0),ae=new Jt(H.discountPercentage||0),oe=new Jt(H.quantityUnits||0),W=Y.dividedBy(K),de=new Jt(1).plus(X.dividedBy(100)),Ae=W.dividedBy(de),Ce=new Jt(1).minus(ae.dividedBy(100)),De=Ae.times(Ce),xe=De.times(X.dividedBy(100));return De.plus(xe).times(oe).toNumber()},E=ee(()=>i.value?.items?i.value.items.reduce((te,Y)=>{if(!Y.mrp||!Y.unitsPerPack||Y.unitsPerPack<=0)return te;const K=new Jt(Y.mrp),X=new Jt(Y.unitsPerPack),ae=new Jt(Y.quantityUnits||0),W=K.dividedBy(X).times(ae);return te.plus(W)},new Jt(0)).toNumber():0),C=ee(()=>i.value?.items?i.value.items.reduce((te,Y)=>{if(!Y.mrp||!Y.unitsPerPack||Y.unitsPerPack<=0)return te;const K=new Jt(Y.mrp),X=new Jt(Y.unitsPerPack),ae=new Jt(Y.gstPercentage||0),oe=new Jt(Y.discountPercentage||0),W=new Jt(Y.quantityUnits||0),de=K.dividedBy(X),Ae=new Jt(1).plus(ae.dividedBy(100)),Ce=de.dividedBy(Ae),De=new Jt(1).minus(oe.dividedBy(100)),xe=Ce.times(De),Ee=Ce.minus(xe).times(W);return te.plus(Ee)},new Jt(0)).toNumber():0),P=ee(()=>i.value?.items?i.value.items.reduce((te,Y)=>{if(!Y.mrp||!Y.unitsPerPack||Y.unitsPerPack<=0)return te;const K=new Jt(Y.mrp),X=new Jt(Y.unitsPerPack),ae=new Jt(Y.gstPercentage||0),oe=new Jt(Y.discountPercentage||0),W=new Jt(Y.quantityUnits||0),de=K.dividedBy(X),Ae=new Jt(1).plus(ae.dividedBy(100)),Ce=de.dividedBy(Ae),De=new Jt(1).minus(oe.dividedBy(100)),Ee=Ce.times(De).times(ae.dividedBy(100)).times(W);return te.plus(Ee)},new Jt(0)).toNumber():0),F=ee(()=>new Jt(P.value).dividedBy(2).toNumber()),N=ee(()=>new Jt(P.value).dividedBy(2).toNumber()),L=ee(()=>i.value?.items?i.value.items.reduce((te,Y)=>{const K=Y.totalAmount||S(Y);return te.plus(new Jt(K))},new Jt(0)).toNumber():0),ie=ee(()=>{const H=new Jt(L.value),te=new Jt(i.value?.additionalDiscountAmount||0),Y=H.minus(te);return Jt.max(new Jt(0),Y).toNumber()}),le=ee(()=>Math.ceil(ie.value)-ie.value),Q=ee(()=>Math.ceil(ie.value)),Z=ee(()=>Math.max(0,Q.value-y.value)),ce=H=>{if(!H)return!1;try{let te;if(typeof H=="number")te=new Date(H*1e3);else if(typeof H=="string")te=new Date(H);else return!1;if(isNaN(te.getTime()))return!1;const Y=new Date;return Y.setHours(0,0,0,0),te.setHours(0,0,0,0),te<Y}catch(te){return console.error("Error checking expiry:",te,H),!1}},J=H=>({Draft:"warning",Finalized:"success",Cancelled:"error",Refund:"info"})[H]||"default",se=()=>{r("edit-bill")},G=()=>{r("close")},D=async()=>{try{const H=await kH();if(H.error)console.error("Error fetching pharmacy config:",H.error),d.value={header:"",gstNumber:"",useHeader:!0,pageSize:"A4"};else{const te=H.data||{};d.value={header:te.header||"",gstNumber:te.gstNumber||"",useHeader:te.useHeader!==void 0?te.useHeader===1||te.useHeader===!0:!0,pageSize:te.pageSize||"A4"}}}catch(H){console.error("Error fetching pharmacy configurations:",H),d.value={header:"",gstNumber:"",useHeader:!0,pageSize:"A4"}}},j=ee(()=>{if(!i.value)return null;const H=i.value.items.map((te,Y)=>({...te,taxableValuePerUnit:te.unitPrice||U(te),finalValuePerUnit:te.totalAmount&&te.quantityUnits?te.totalAmount/te.quantityUnits:k(te),itemTotal:te.totalAmount||S(te)}));return{pharmacyBill:{identifier:i.value.identifier,billDate:i.value.billDate,status:i.value.status,patientName:i.value.patientName,patientId:i.value.patientId,patientContactNumber:i.value.patientContactNumber,doctorName:i.value.doctorName,consultationDate:i.value.consultationDate,items:H,totalMrp:E.value,totalDiscount:C.value,totalGst:P.value,totalCgst:F.value,totalSgst:N.value,subtotalWithGst:L.value,additionalDiscountAmount:i.value.additionalDiscountAmount||0,netAmount:ie.value,roundOff:le.value,finalAmount:Q.value,payments:h.value||[],totalPaymentsMade:y.value,balanceDue:Z.value},pharmacyConfigurations:d.value}}),ne=H=>{console.log("Pharmacy bill PDF generated:",H)};return We(()=>a.billId,H=>{f.value=H},{immediate:!0}),cn(()=>{w(),D()}),(H,te)=>{const Y=I("v-icon"),K=I("v-btn"),X=I("v-card-title"),ae=I("v-col"),oe=I("v-row"),W=I("v-tab"),de=I("v-tabs"),Ae=I("v-progress-circular"),Ce=I("v-label"),De=I("v-chip"),xe=I("v-card-text"),ke=I("v-card"),Ee=I("v-table"),ye=I("v-divider"),we=I("v-container"),at=I("v-tabs-window-item"),Je=I("v-tabs-window");return R(),ve(ke,{rounded:"lg",color:"surfaceContainer",flat:"",ripple:!1},{default:u(()=>[l(oe,{"no-gutters":""},{default:u(()=>[l(ae,{cols:"12"},{default:u(()=>[l(X,{class:"d-flex align-center justify-space-between"},{default:u(()=>[te[3]||(te[3]=p("span",null,"Pharmacy Bill - View",-1)),l(K,{onClick:G,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(Y,{size:"18"},{default:u(()=>[...te[2]||(te[2]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(oe,{"no-gutters":""},{default:u(()=>[l(ae,{cols:"12"},{default:u(()=>[l(de,{modelValue:A.value,"onUpdate:modelValue":te[0]||(te[0]=rt=>A.value=rt),color:"primary","bg-color":"surfaceContainerHigh","align-tabs":"start",class:"mx-3 mb-3"},{default:u(()=>[l(W,{value:"view"},{default:u(()=>[l(Y,{start:""},{default:u(()=>[...te[4]||(te[4]=[O("mdi-eye",-1)])]),_:1}),te[5]||(te[5]=O(" View Bill ",-1))]),_:1}),l(W,{value:"share"},{default:u(()=>[l(Y,{start:""},{default:u(()=>[...te[6]||(te[6]=[O("mdi-share-variant",-1)])]),_:1}),te[7]||(te[7]=O(" Share Bill ",-1))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(oe,{"no-gutters":""},{default:u(()=>[l(ae,{cols:"12",class:"scroll-element"},{default:u(()=>[l(Je,{modelValue:A.value,"onUpdate:modelValue":te[1]||(te[1]=rt=>A.value=rt)},{default:u(()=>[l(at,{value:"view"},{default:u(()=>[s.value?(R(),ve(oe,{key:0,"no-gutters":""},{default:u(()=>[l(ae,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[p("div",QHe,[l(Ae,{indeterminate:"",color:"primary",size:"64"}),te[8]||(te[8]=p("div",{class:"mt-4 text-subtitle-1"},"Loading bill...",-1))])]),_:1})]),_:1})):o.value?(R(),ve(oe,{key:1,"no-gutters":""},{default:u(()=>[l(ae,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[p("div",GHe,[l(Y,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...te[9]||(te[9]=[O("mdi-alert-circle",-1)])]),_:1}),te[11]||(te[11]=p("div",{class:"text-h6 mb-2"},"Failed to Load Bill",-1)),p("div",zHe,q(o.value),1),l(K,{color:"primary",onClick:w,"prepend-icon":"mdi-refresh"},{default:u(()=>[...te[10]||(te[10]=[O(" Retry ",-1)])]),_:1})])]),_:1})]),_:1})):i.value?(R(),ve(we,{key:2,fluid:"",class:"pa-3"},{default:u(()=>[l(ke,{flat:"",color:"surfaceContainerHigh",class:"mb-4 card-enhanced"},{default:u(()=>[l(xe,{class:"pb-1 pt-2"},{default:u(()=>[l(oe,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(ae,{cols:"4"},{default:u(()=>[p("div",KHe,[l(Ce,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...te[12]||(te[12]=[O("Patient Information",-1)])]),_:1}),p("div",WHe,q(i.value.patientName||"Unknown Patient"),1),p("div",jHe,"ID: "+q(i.value.patientId||"N/A"),1),i.value.patientContactNumber?(R(),me("div",qHe," Phone: "+q(i.value.patientContactNumber),1)):_e("",!0)])]),_:1}),l(ae,{cols:"4"},{default:u(()=>[p("div",YHe,[l(Ce,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...te[13]||(te[13]=[O("Consultation Details",-1)])]),_:1}),p("div",XHe,"Dr. "+q(i.value.doctorName||"Unknown"),1),p("div",JHe,"Date: "+q(b(i.value.consultationDate)),1)])]),_:1}),l(ae,{cols:"4"},{default:u(()=>[p("div",ZHe,[l(Ce,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...te[14]||(te[14]=[O("Bill Information",-1)])]),_:1}),p("div",e$e,q(i.value.identifier),1),p("div",t$e,"Date: "+q(b(i.value.billDate)),1),l(De,{color:J(i.value.status),size:"small",variant:"flat",class:"mt-1"},{default:u(()=>[O(q(i.value.status),1)]),_:1},8,["color"])])]),_:1})]),_:1})]),_:1})]),_:1}),l(ke,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(xe,{class:"pb-2"},{default:u(()=>[te[17]||(te[17]=p("div",{class:"text-subtitle-1 mb-3"},"Bill Items",-1)),l(Ee,{density:"compact",class:"mb-3"},{default:u(()=>[te[16]||(te[16]=p("thead",null,[p("tr",null,[p("th",{class:"text-left",style:{width:"60px"}},"Sr. No"),p("th",{class:"text-left",style:{width:"200px"}},"Item"),p("th",{class:"text-left",style:{width:"100px"}},"HSN Code"),p("th",{class:"text-left",style:{width:"150px"}},"Batch Details"),p("th",{class:"text-left",style:{width:"120px"}},"Packaging Details"),p("th",{class:"text-right",style:{width:"100px"}},"MRP (Pack)"),p("th",{class:"text-right",style:{width:"100px"}},"Discount %"),p("th",{class:"text-right",style:{width:"120px"}},"Taxable Value/Unit"),p("th",{class:"text-right",style:{width:"100px"}},"GST %"),p("th",{class:"text-right",style:{width:"120px"}},"Final Value/Unit"),p("th",{class:"text-right",style:{width:"100px"}},"Qty"),p("th",{class:"text-right",style:{width:"120px"}},"Total ()")])],-1)),p("tbody",null,[(R(!0),me(ze,null,Wt(i.value.items,(rt,it)=>(R(),me("tr",{key:it},[p("td",null,q(it+1),1),p("td",null,[p("div",n$e,q(rt.medicineName),1),rt.marketer?(R(),me("div",a$e,q(rt.marketer),1)):_e("",!0)]),p("td",null,[p("div",r$e,q(rt.hsnCode||"N/A"),1)]),p("td",null,[p("div",s$e,q(rt.batchNumber||"N/A"),1),p("div",{class:ct(["text-caption text-medium-emphasis",ce(rt.expiryDate)?"text-error":""])},[rt.expiryDate?(R(),me(ze,{key:0},[O(" Exp: "+q(b(rt.expiryDate))+" ",1),ce(rt.expiryDate)?(R(),ve(De,{key:0,color:"error",size:"x-small",variant:"tonal",class:"ml-1"},{default:u(()=>[...te[15]||(te[15]=[O(" Expired ",-1)])]),_:1})):_e("",!0)],64)):(R(),me("span",o$e,"Exp: N/A"))],2)]),p("td",null,[p("div",i$e,q(rt.packType||"N/A"),1),p("div",l$e,q(rt.unitsPerPack||1)+" units/pack",1)]),p("td",u$e,q(T(rt.mrp)),1),p("td",c$e,q(rt.discountPercentage)+"%",1),p("td",d$e,q(T(rt.unitPrice||U(rt))),1),p("td",A$e,q(rt.gstPercentage)+"%",1),p("td",f$e,q(T(rt.totalAmount&&rt.quantityUnits?rt.totalAmount/rt.quantityUnits:k(rt))),1),p("td",m$e,q(rt.quantityUnits),1),p("td",h$e,q(T(rt.totalAmount||S(rt,it))),1)]))),128))])]),_:1})]),_:1})]),_:1}),l(ke,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(xe,{class:"pb-2"},{default:u(()=>[te[27]||(te[27]=p("div",{class:"text-subtitle-1 mb-3"},"Bill Summary",-1)),l(ye,{class:"mb-3"}),l(oe,{"no-gutters":""},{default:u(()=>[l(ae,{cols:"6"},{default:u(()=>[te[18]||(te[18]=p("div",{class:"text-body-2 mb-1"},"Total MRP:",-1)),te[19]||(te[19]=p("div",{class:"text-body-2 mb-1"},"Total Discount:",-1)),te[20]||(te[20]=p("div",{class:"text-body-2 mb-1"},"Total GST:",-1)),te[21]||(te[21]=p("div",{class:"text-body-2 mb-1 pl-4",style:{"font-size":"0.875rem"}},"CGST:",-1)),te[22]||(te[22]=p("div",{class:"text-body-2 mb-1 pl-4",style:{"font-size":"0.875rem"}},"SGST:",-1)),te[23]||(te[23]=p("div",{class:"text-body-2 mb-1 font-weight-bold"},"Subtotal with GST:",-1)),i.value.additionalDiscountAmount>0?(R(),me("div",v$e,"Additional Discount:")):_e("",!0),te[24]||(te[24]=p("div",{class:"text-body-2 mb-1"},"Net Amount:",-1)),te[25]||(te[25]=p("div",{class:"text-body-2 mb-1"},"Round Off:",-1)),te[26]||(te[26]=p("div",{class:"text-subtitle-1 font-weight-bold mt-2"},"Final Amount:",-1))]),_:1}),l(ae,{cols:"6",class:"text-right"},{default:u(()=>[p("div",p$e,q(T(E.value)),1),p("div",g$e,"-"+q(T(C.value)),1),p("div",y$e,q(T(P.value)),1),p("div",_$e,q(T(F.value)),1),p("div",w$e,q(T(N.value)),1),p("div",b$e,q(T(L.value)),1),i.value.additionalDiscountAmount>0?(R(),me("div",x$e,"-"+q(T(i.value.additionalDiscountAmount)),1)):_e("",!0),p("div",C$e,q(T(ie.value)),1),p("div",S$e,q(le.value>0?"+":"")+q(T(le.value)),1),p("div",E$e,q(T(Q.value)),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(ke,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(xe,{class:"pb-2"},{default:u(()=>[te[36]||(te[36]=p("div",{class:"text-subtitle-1 mb-3"},"Payment Information",-1)),l(oe,{"no-gutters":"",class:"mb-3"},{default:u(()=>[l(ae,{cols:"4"},{default:u(()=>[te[28]||(te[28]=p("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Total Amount",-1)),p("div",B$e,q(T(Q.value)),1)]),_:1}),l(ae,{cols:"4"},{default:u(()=>[te[29]||(te[29]=p("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Paid Amount",-1)),p("div",k$e,q(T(Oe(y))),1)]),_:1}),l(ae,{cols:"4"},{default:u(()=>[te[30]||(te[30]=p("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Balance Due",-1)),p("div",{class:ct(["text-h6",Z.value>0?"text-error":"text-success"])},q(T(Z.value)),3)]),_:1})]),_:1}),Oe(v)?(R(),me("div",T$e,[l(Ae,{indeterminate:"",size:"32",color:"primary"}),te[31]||(te[31]=p("div",{class:"text-body-2 mt-2"},"Loading payments...",-1))])):Oe(h)&&Oe(h).length>0?(R(),me(ze,{key:1},[l(ye,{class:"mb-3"}),te[33]||(te[33]=p("div",{class:"text-subtitle-2 mb-2"},"Payment History",-1)),l(Ee,{density:"compact"},{default:u(()=>[te[32]||(te[32]=p("thead",null,[p("tr",null,[p("th",{class:"text-left"},"Date"),p("th",{class:"text-left"},"Mode"),p("th",{class:"text-right"},"Amount"),p("th",{class:"text-right"},"Created")])],-1)),p("tbody",null,[(R(!0),me(ze,null,Wt(Oe(h),rt=>(R(),me("tr",{key:rt.id},[p("td",I$e,q(b(rt.paymentDate)),1),p("td",F$e,q(rt.mode),1),p("td",P$e,q(T(rt.amount)),1),p("td",D$e,q(x(rt.createdAt)),1)]))),128))])]),_:1})],64)):(R(),me(ze,{key:2},[l(ye,{class:"mb-3"}),p("div",U$e,[l(Y,{size:"48",color:"outline",class:"mb-2"},{default:u(()=>[...te[34]||(te[34]=[O("mdi-currency-inr",-1)])]),_:1}),te[35]||(te[35]=p("div",{class:"text-body-2 text-medium-emphasis"},"No payments recorded",-1))])],64))]),_:1})]),_:1}),l(ke,{flat:"",color:"surfaceContainerHigh",class:"card-enhanced"},{default:u(()=>[l(xe,{class:"d-flex justify-center pb-2 gap-2"},{default:u(()=>[i.value.status==="Draft"?(R(),ve(K,{key:0,color:"primary",onClick:se},{default:u(()=>[...te[37]||(te[37]=[O(" Edit Bill ",-1)])]),_:1})):_e("",!0)]),_:1})]),_:1})]),_:1})):_e("",!0)]),_:1}),l(at,{value:"share",class:"h-100"},{default:u(()=>[l(oe,{"no-gutters":"",class:"h-100"},{default:u(()=>[l(ae,{cols:"12"},{default:u(()=>[j.value&&c.value?(R(),ve(ov,{key:0,"content-type":"pharmacy-bill",data:j.value,patient:c.value,onPdfGenerated:ne},null,8,["data","patient"])):(R(),me("div",R$e,[p("div",N$e,[l(Ae,{indeterminate:"",color:"primary",size:"64"}),te[38]||(te[38]=p("div",{class:"mt-4 text-subtitle-1"},"Loading bill data...",-1))])]))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}}},L$e=Xt(V$e,[["__scopeId","data-v-01d0853d"]]),M$e={class:"text-medium-emphasis"},O$e={key:0},H$e={__name:"cancel-bill",props:{bill:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ra(),o=M(!1),i=()=>{a("close")},c=async()=>{try{o.value=!0;const A=await XSe(n.bill.id);if(A.error){const d=A.error.response?.data?.error||A.error.message||"Failed to cancel bill";s(d)}else r("Bill cancelled successfully. Inventory has been released."),i()}catch(A){console.error("Error cancelling bill:",A),s("An unexpected error occurred while cancelling the bill")}finally{o.value=!1}};return(A,d)=>{const f=I("v-card-title"),m=I("v-col"),h=I("v-icon"),v=I("v-btn"),y=I("v-row"),g=I("v-card"),w=I("v-card-text"),b=I("v-divider");return R(),ve(g,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(y,{"no-gutters":""},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(g,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(y,{"no-gutters":""},{default:u(()=>[l(m,{cols:"11"},{default:u(()=>[l(f,{class:"pa-0 pl-2"},{default:u(()=>[...d[0]||(d[0]=[O("Confirm Bill Cancellation",-1)])]),_:1})]),_:1}),l(m,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(v,{icon:"",size:"x-small",onClick:i},{default:u(()=>[l(h,null,{default:u(()=>[...d[1]||(d[1]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(y,{"no-gutters":""},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(g,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(y,{"no-gutters":""},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(w,{class:"text-left"},{default:u(()=>[d[4]||(d[4]=O(" Are you sure you want to cancel this bill? ",-1)),d[5]||(d[5]=p("span",{class:"text-warning font-weight-bold"}," This will release the reserved/sold inventory back to stock. ",-1)),d[6]||(d[6]=p("br",null,null,-1)),d[7]||(d[7]=p("br",null,null,-1)),p("span",M$e,[d[3]||(d[3]=O(" Bill ID: ",-1)),p("strong",null,q(e.bill?.identifier||"N/A"),1),e.bill?.status?(R(),me("span",O$e,[d[2]||(d[2]=O("  Status: ",-1)),p("strong",null,q(e.bill.status),1)])):_e("",!0)])]),_:1})]),_:1})]),_:1}),l(b),l(y,{"no-gutters":""},{default:u(()=>[l(m,{cols:"2"}),l(m,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(v,{variant:"outlined",color:"error",onClick:c,loading:o.value,disabled:o.value},{default:u(()=>[...d[8]||(d[8]=[O(" Yes, Cancel Bill ",-1)])]),_:1},8,["loading","disabled"])]),_:1}),l(m,{cols:"2"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},$$e={class:"w-100",style:{"white-space":"normal",overflow:"visible","text-overflow":"unset"}},Q$e={class:"text-subtitle-2 mb-1",style:{"white-space":"normal","line-height":"1.3",overflow:"visible","text-overflow":"unset"}},G$e={class:"text-caption",style:{opacity:"0.7"}},z$e={class:"d-flex justify-center"},K$e={__name:"create-draft-bill",emits:["close","draft-bill-created"],setup(e,{emit:t}){const n=ea(),{showSuccess:a,showError:r}=ra(),s=t,o=ee(()=>n.getters["doctorModule/allDoctors"]||[]),i=M(null);cn(()=>{i.value=n.state.doctorModule.doctorId,o.value.length===0&&n.dispatch("doctorModule/fetchDoctors").then(()=>{!i.value&&o.value.length>0&&(i.value=n.state.doctorModule.doctorId||o.value[0]?.id)})});let c=null,A=null;const d=M(!1),f=M([]),m=M(""),h=M(null),v=M(!1),y=M(!1),g=k=>k?`${k.name||""} (${k.contactNumber||k.contact_number||""})`:"",w=(k,S=0,E=!1)=>{if(S===0)return"First time patient";if(E&&S>1)return k?`Has appointment today  Last visit: ${bl(k)}`:"Has appointment today";if(E&&S===1)return"First visit today";if(k){const C=Dn(),P=k;if(P<C)return`Last visit: ${bl(P)}`;if(P>C)return`Next visit: ${bl(P)}`}return"No previous visits"},b=ee(()=>!m.value||m.value.length<1?"Start typing to search for patients":v.value?`No patients found matching "${m.value}"`:""),x=async k=>{if(!k||k.length<1){f.value=[],v.value=!1;return}A&&A.abort(),A=new AbortController,d.value=!0,v.value=!1;try{const S=await Jk(k,{signal:A.signal});A.signal.aborted||(f.value=S.data,(!f.value||f.value.length===0)&&(v.value=!0))}catch(S){S.name!=="AbortError"&&(console.error("Error fetching patients:",S),v.value=!0)}finally{A?.signal.aborted||(d.value=!1)}};We(m,k=>{c&&clearTimeout(c),v.value=!1,c=setTimeout(()=>{x(k)},300)});const T=async()=>{if(!h.value||!h.value.id){r("Please select a patient");return}if(!i.value){r("Please select a doctor");return}try{y.value=!0;const k=Dn(),S=await Yk(h.value.id,i.value,k);if(S.error){r(S.error.response?.data?.error||"Failed to create consultation");return}if(!S.data||!S.data.consultation_id){r("Failed to get consultation ID");return}const E=S.data.consultation_id,C=await EH(E);if(C.error){r(C.error.response?.data?.error||"Failed to create draft bill");return}a("Draft bill created successfully"),s("draft-bill-created"),U()}catch(k){console.error("Error creating draft bill:",k),r("An unexpected error occurred")}finally{y.value=!1}},U=()=>{s("close")};return la(()=>{c&&(clearTimeout(c),c=null),A&&(A.abort(),A=null)}),(k,S)=>{const E=I("v-card-title"),C=I("v-col"),P=I("v-icon"),F=I("v-btn"),N=I("v-row"),L=I("v-card"),ie=I("v-list-item"),le=I("v-select"),Q=I("v-list"),Z=I("v-card-subtitle"),ce=I("v-autocomplete"),J=I("v-card-text"),se=I("v-divider"),G=I("v-empty-state");return R(),ve(L,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[l(N,{"no-gutters":""},{default:u(()=>[l(C,{cols:"12"},{default:u(()=>[l(L,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(N,{"no-gutters":""},{default:u(()=>[l(C,{cols:"11"},{default:u(()=>[l(E,{class:"pa-0 pl-2"},{default:u(()=>[...S[3]||(S[3]=[O("Create Draft Bill",-1)])]),_:1})]),_:1}),l(C,{cols:"1"},{default:u(()=>[l(F,{icon:"",size:"x-small",onClick:U,tabindex:"-1"},{default:u(()=>[l(P,null,{default:u(()=>[...S[4]||(S[4]=[p("img",{src:Yl,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(N,{"no-gutters":""},{default:u(()=>[l(C,{cols:"12"},{default:u(()=>[l(L,{flat:"",class:"d-flex justify-center ma-2",color:"surfaceContainer"},{default:u(()=>[l(le,{modelValue:i.value,"onUpdate:modelValue":S[0]||(S[0]=D=>i.value=D),items:o.value,"item-title":"doctorName","item-value":"id",density:"compact",variant:"outlined",placeholder:"Select Doctor",style:{width:"90%","max-width":"700px"},"prepend-inner-icon":"mdi-doctor","hide-details":"auto","menu-props":{maxHeight:"400px"}},{item:u(({props:D,item:j})=>[l(ie,Ql(Kl(D)),{title:u(()=>[O(q(j.raw.doctorName),1)]),subtitle:u(()=>[O(q(j.raw.doctorSpecialization),1)]),_:2},1040)]),_:1},8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),l(N,{"no-gutters":""},{default:u(()=>[l(C,{cols:"12"},{default:u(()=>[l(L,{flat:"",class:"d-flex justify-center ma-2",color:"surfaceContainer"},{default:u(()=>[l(ce,{ref:"searchRef",density:"compact",placeholder:"Search by name or phone",style:{width:"90%","max-width":"700px"},theme:"light",variant:"solo",rounded:"l",items:f.value,search:m.value,"onUpdate:search":S[1]||(S[1]=D=>m.value=D),loading:d.value,"item-title":g,"item-value":"id","return-object":"",modelValue:h.value,"onUpdate:modelValue":S[2]||(S[2]=D=>h.value=D),chips:"",clearable:"","prepend-inner-icon":"mdi-magnify","no-data-text":b.value,"menu-props":{maxHeight:"400px",closeOnContentClick:!1}},{item:u(({props:D,item:j,index:ne})=>[l(Q,{density:"compact",class:"pa-0 py-1"},{default:u(()=>[l(ie,Fe(D,{class:"py-0 my-0",style:{"min-height":"60px"}}),{default:u(()=>[p("div",$$e,[p("div",Q$e," ID: "+q(j.raw.id)+"  "+q(j.raw.gender)+", "+q(j.raw.age)+" yrs  Added On: "+q(Oe(bl)(j.raw.createdAt))+q(j.raw.importID?`  Import ID: ${j.raw.importID}`:""),1),p("div",G$e,q(w(j.raw.lastAppointmentDate,j.raw.totalAppointments,j.raw.hasAppointmentToday)),1)])]),_:2},1040)]),_:2},1024)]),"no-data":u(()=>[l(Q,{density:"compact"},{default:u(()=>[l(ie,null,{default:u(()=>[l(Z,null,{default:u(()=>[O(q(b.value),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["items","search","loading","modelValue","no-data-text"])]),_:1})]),_:1})]),_:1}),l(N,{"no-gutters":""},{default:u(()=>[l(C,{cols:"12",class:"scroll-element"},{default:u(()=>[l(L,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[h.value&&h.value.id?(R(),me(ze,{key:0},[l(L,{flat:"",class:"text-left",variant:"text"},{default:u(()=>[l(J,{class:"ma-0 pa-0 pl-4 mb-1"},{default:u(()=>[l(N,{"no-gutters":""},{default:u(()=>[l(C,{cols:"6"},{default:u(()=>[O(q(`Name: ${h.value.name}`),1)]),_:1}),l(C,{cols:"6"},{default:u(()=>[O(q(`Gender: ${h.value.gender}`),1)]),_:1})]),_:1}),l(N,{"no-gutters":""},{default:u(()=>[l(C,{cols:"6"},{default:u(()=>[O(q(`Contact: ${h.value.contactNumber||h.value.contact_number}`),1)]),_:1}),l(C,{cols:"6"},{default:u(()=>[O(q(h.value.age!==null?`Age: ${h.value.age} yrs`:""),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(L,{flat:"",class:"text-left",variant:"text"},{default:u(()=>[l(N,{"no-gutters":""},{default:u(()=>[l(C,{cols:"12"},{default:u(()=>[l(se,{class:"mb-2"}),p("div",z$e,[l(F,{variant:"outlined",onClick:T,disabled:!h.value||y.value,loading:y.value},{default:u(()=>[...S[5]||(S[5]=[O(" Create Draft Bill ",-1)])]),_:1},8,["disabled","loading"])])]),_:1})]),_:1})]),_:1})],64)):(R(),ve(G,{key:1,image:Oe(PM)},{title:u(()=>[...S[6]||(S[6]=[p("div",{class:"text-subtitle-2 mt-8"}," Search for a patient above to create a draft bill ",-1)])]),text:u(()=>[...S[7]||(S[7]=[p("div",{class:"text-caption"},null,-1)])]),_:1},8,["image"]))]),_:1})]),_:1})]),_:1})]),_:1})}}},W$e=Xt(K$e,[["__scopeId","data-v-b2a2ca6f"]]),j$e={class:"scrollable-content"},q$e={class:"scrollable-content"},Y$e={class:"text-center"},X$e={class:"text-center"},J$e={class:"text-body-2 text-medium-emphasis mb-4"},Z$e={class:"text-center"},e9e={class:"text-subtitle-2 mt-8 text-center"},t9e={key:0},n9e={key:1},a9e={class:"text-caption text-center"},r9e={key:0},s9e={key:1},o9e={class:"text-body-2 text-medium-emphasis"},i9e={class:"font-weight-bold",style:{color:"black"}},l9e={key:0,class:"text-body-2 mb-1"},u9e={class:"font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},c9e={key:0,class:"text-medium-emphasis ml-2"},d9e={key:1,class:"text-body-2 text-medium-emphasis mb-1"},A9e={key:2,class:"text-body-2 font-weight-medium mt-2"},f9e={__name:"pharmacy-queue",setup(e){const{showError:t}=ra(),n=M(0),a=M([]),r=M(""),s=M(""),o=M(null),i=M(null),c=M(!1),A=M(null),d=M(!1),f=M(!1),m=M(!1),h=M(null),v=M("edit"),y=M(!1),g=M(null),w=M(!1);ee(()=>Dn());const b=ee(()=>{if(!a.value||a.value.length===0)return[];const ne=r.value?.trim();if(!ne)return a.value;if(/^\d+$/.test(ne))return a.value.filter(te=>te?.patientContactNumber?.includes(ne)??!1);{const te=ne.toLowerCase();return a.value.filter(Y=>Y?.patientName?.toLowerCase().includes(te)??!1)}}),x=ne=>({Draft:"rgb(var(--v-theme-warning))",Finalized:"rgb(var(--v-theme-success))",Cancelled:"rgb(var(--v-theme-error))",Refund:"rgb(var(--v-theme-info))",Series:"rgb(var(--v-theme-secondary))"})[ne]||"rgb(var(--v-theme-on-surface))",T=ne=>{if(!ne)return"";try{const H=new Date(ne*1e3),te=go(H,"d MMM"),Y=go(H,"EEE");return`${te}, ${Y}`}catch(H){return console.error("Error formatting created day:",H),""}},U=ne=>{if(!ne)return"";try{const H=new Date(ne*1e3),te=H.getHours(),Y=H.getMinutes(),K=te%12||12,X=te>=12?"PM":"AM";return`${K}.${Y.toString().padStart(2,"0")}${X}`}catch(H){return console.error("Error formatting created time:",H),""}},k=ne=>ne==null?"0.00":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(ne),S=async()=>{if(!c.value)try{c.value=!0,A.value=null;const{data:ne,error:H}=await jSe(s.value||null,o.value||null);H?(A.value=H.response?.data?.error||H.message||"Failed to fetch pharmacy bills",a.value=[],t("Error fetching pharmacy bills")):(a.value=ne||[],d.value=!0)}catch(ne){console.error("Error in fetchBills:",ne),A.value=ne.message||"An unexpected error occurred",a.value=[],t("Error fetching pharmacy bills")}finally{c.value=!1}},E=ne=>{s.value=ne.billDate||"",o.value=ne.status||null},C=()=>{S()},P=()=>{s.value="",o.value=null,r.value="",a.value=[],d.value=!1,A.value=null},F=()=>{S()},N=ne=>{h.value=ne,f.value=!0},L=ne=>{h.value=ne,v.value="edit",m.value=!0},ie=ne=>{h.value=ne,v.value="return",m.value=!0},le=ne=>{ne?.status!=="Cancelled"&&(g.value=ne,y.value=!0)},Q=()=>{y.value=!1,g.value=null,S()},Z=()=>{m.value=!1,h.value=null,v.value="edit"},ce=()=>{f.value=!1,h.value=null},J=()=>{f.value=!1,m.value=!0},se=async ne=>{m.value=!1,v.value="edit",await bn(),ne?(h.value=ne,f.value=!0):h.value=null,S()},G=()=>{w.value=!0},D=()=>{w.value=!1},j=()=>{S()};return cn(()=>{s.value=Dn(),S()}),(ne,H)=>{const te=I("v-alert"),Y=I("v-tab"),K=I("v-tabs"),X=I("v-card"),ae=I("v-col"),oe=I("v-row"),W=I("v-progress-circular"),de=I("v-icon"),Ae=I("v-btn"),Ce=I("v-text-field"),De=I("v-card-text"),xe=I("v-empty-state"),ke=I("v-card-title"),Ee=I("v-tooltip"),ye=I("v-divider"),we=I("v-lazy"),at=I("v-window-item"),Je=I("v-window"),rt=I("v-main"),it=I("v-dialog");return R(),me(ze,null,[l(rt,null,{default:u(()=>[i.value?(R(),ve(te,{key:0,type:"error",dismissible:"","onClick:close":H[0]||(H[0]=Ie=>i.value=null),class:"ma-3"},{default:u(()=>[O(q(i.value),1)]),_:1})):_e("",!0),l(oe,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[l(ae,{cols:"12"},{default:u(()=>[l(X,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center"},{default:u(()=>[l(K,{modelValue:n.value,"onUpdate:modelValue":H[1]||(H[1]=Ie=>n.value=Ie),color:"primary","align-tabs":"start",class:"w-100"},{default:u(()=>[l(Y,{value:0},{default:u(()=>[...H[9]||(H[9]=[O("Queue",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(Je,{modelValue:n.value,"onUpdate:modelValue":H[4]||(H[4]=Ie=>n.value=Ie),class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[l(at,{value:0,style:{height:"100%"}},{default:u(()=>[l(oe,{"aria-label":"main row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[l(ae,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[p("div",j$e,[l($Me,{"bill-date":s.value,status:o.value,onFilterChange:E,onSearch:C,onClear:P},null,8,["bill-date","status"])])]),_:1}),l(ae,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[p("div",q$e,[l(X,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[c.value?(R(),ve(oe,{key:0,"no-gutters":""},{default:u(()=>[l(ae,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[p("div",Y$e,[l(W,{indeterminate:"",color:"primary",size:"64"}),H[10]||(H[10]=p("div",{class:"mt-4 text-subtitle-1"},"Loading pharmacy bills...",-1))])]),_:1})]),_:1})):A.value?(R(),ve(oe,{key:1,"no-gutters":""},{default:u(()=>[l(ae,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[p("div",X$e,[l(de,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...H[11]||(H[11]=[O("mdi-alert-circle",-1)])]),_:1}),H[13]||(H[13]=p("div",{class:"text-h6 mb-2"},"Search Failed",-1)),p("div",J$e,q(A.value),1),l(Ae,{color:"primary",onClick:F,"prepend-icon":"mdi-refresh"},{default:u(()=>[...H[12]||(H[12]=[O(" Try Again ",-1)])]),_:1})])]),_:1})]),_:1})):d.value?(R(),me(ze,{key:3},[l(X,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(De,{class:"pt-2 pb-0 d-flex align-center"},{default:u(()=>[l(ae,{cols:"4",class:"pa-0"},{default:u(()=>[l(Ce,{modelValue:r.value,"onUpdate:modelValue":H[2]||(H[2]=Ie=>r.value=Ie),density:"compact",variant:"outlined",clearable:"","hide-details":"auto","prepend-inner-icon":"mdi-account-search",placeholder:"Search by name or number",class:"patient-search-input"},null,8,["modelValue"])]),_:1}),l(ae,{cols:"4",class:"pa-0 text-center"},{default:u(()=>[p("strong",null,q(b.value.length),1),O(" result"+q(b.value.length!==1?"s":"")+" found ",1)]),_:1}),l(ae,{cols:"4",class:"pa-0 text-right"},{default:u(()=>[l(xn,{permission:"pharmacy.queue.bill"},{default:u(()=>[l(Ae,{color:"primary",variant:"outlined",onClick:G,"prepend-icon":"mdi-plus",size:"small"},{default:u(()=>[...H[17]||(H[17]=[O(" Create Draft Bill ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),b.value&&b.value.length===0?(R(),ve(xe,{key:0,image:Oe(Ph),class:"d-flex justify-center"},{title:u(()=>[p("div",e9e,[r.value?(R(),me("span",t9e,"No bills match your search")):(R(),me("span",n9e,"No Pharmacy Bills Found"))])]),text:u(()=>[p("div",a9e,[r.value?(R(),me("span",r9e,"Try a different search term or clear the filter")):(R(),me("span",s9e,"Try adjusting your search criteria or clear filters to see all bills"))])]),actions:u(()=>[r.value?(R(),ve(Ae,{key:0,color:"primary",variant:"outlined",onClick:H[3]||(H[3]=Ie=>r.value=""),"prepend-icon":"mdi-close",class:"mr-2"},{default:u(()=>[...H[18]||(H[18]=[O(" Clear Search ",-1)])]),_:1})):_e("",!0),l(Ae,{color:"primary",variant:"outlined",onClick:P,"prepend-icon":"mdi-filter-remove"},{default:u(()=>[...H[19]||(H[19]=[O(" Clear All Filters ",-1)])]),_:1})]),_:1},8,["image"])):b.value&&b.value.length>0?(R(),ve(oe,{key:1,"no-gutters":""},{default:u(()=>[l(ae,{cols:"12",class:"scroll-element mt-2",style:{"padding-bottom":"20px"}},{default:u(()=>[(R(!0),me(ze,null,Wt(b.value,Ie=>(R(),ve(we,{key:Ie?.id||Math.random(),options:{threshold:.1,rootMargin:"50px"}},{default:u(()=>[Ie?(R(),ve(X,{key:0,style:{textAlign:"left"},density:"compact",class:"mb-2 mx-2 card-enhanced card-status-default card-hover-base",rounded:"lg"},{default:u(()=>[l(oe,{"no-gutters":""},{default:u(()=>[l(ae,{cols:"8"},{default:u(()=>[l(ke,{class:"pb-0 pt-2"},{default:u(()=>[p("div",o9e,[Ie?.identifier?(R(),me(ze,{key:0},[p("span",i9e,"Bill ID: "+q(Ie.identifier),1),H[20]||(H[20]=O("  ",-1))],64)):_e("",!0),Ie?.createdAt?(R(),me(ze,{key:1},[O(q(T(Ie.createdAt))+"  "+q(U(Ie.createdAt))+"  ",1)],64)):_e("",!0),p("span",{class:"font-weight-medium",style:Rt({color:x(Ie?.status)})},q(Ie?.status||"Unknown"),5)])]),_:2},1024),l(De,{class:"pb-1 pt-1"},{default:u(()=>[Ie?.patientName?(R(),me("div",l9e,[l(de,{size:"small",class:"mr-1"},{default:u(()=>[...H[21]||(H[21]=[O("mdi-account",-1)])]),_:1}),p("span",u9e,q(Ie.patientName),1),Ie?.patientContactNumber?(R(),me("span",c9e,"("+q(Ie.patientContactNumber)+")",1)):_e("",!0)])):_e("",!0),Ie?.doctorName?(R(),me("div",d9e,[l(de,{size:"small",class:"mr-1"},{default:u(()=>[...H[22]||(H[22]=[O("mdi-doctor",-1)])]),_:1}),O(" Dr. "+q(Ie.doctorName),1)])):_e("",!0),Ie?.netAmount!==void 0?(R(),me("div",A9e,[l(de,{size:"small",class:"mr-1"},{default:u(()=>[...H[23]||(H[23]=[O("mdi-currency-inr",-1)])]),_:1}),O(" Net Amount: "+q(k(Ie.netAmount)),1)])):_e("",!0)]),_:2},1024)]),_:2},1024),l(ae,{cols:"2",class:"d-flex justify-center align-center"},{default:u(()=>[l(oe,{"no-gutters":""},{default:u(()=>[l(ae,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[l(xn,{feature:"billing"},{default:u(()=>[l(Ee,{text:"View Bill"},{activator:u(({props:Ve})=>[l(Ae,Fe({variant:"plain",color:"primary",size:"small"},{ref_for:!0},Ve,{onClick:mn(ft=>N(Ie.id),["stop"]),class:"btn-hover-base mb-2"}),{default:u(()=>[l(de,{size:"18"},{default:u(()=>[...H[24]||(H[24]=[O("mdi-eye",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),l(ye,{class:"mx-4"}),l(ae,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[l(xn,{permission:"billing.edit"},{default:u(()=>[l(Ee,{text:Ie?.status==="Finalized"?"Cannot edit finalized bills":Ie?.status==="Cancelled"?"Cannot edit cancelled bills":"Edit Bill"},{activator:u(({props:Ve})=>[l(Ae,Fe({variant:"plain",color:"secondary",size:"small"},{ref_for:!0},Ve,{disabled:Ie?.status==="Finalized"||Ie?.status==="Cancelled",onClick:mn(ft=>L(Ie.id),["stop"]),class:"btn-hover-base mt-1"}),{default:u(()=>[l(de,{size:"18"},{default:u(()=>[...H[25]||(H[25]=[O("mdi-pencil",-1)])]),_:1})]),_:1},16,["disabled","onClick"])]),_:2},1032,["text"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),l(ae,{cols:"2",class:"d-flex justify-center align-center"},{default:u(()=>[l(oe,{"no-gutters":""},{default:u(()=>[l(ae,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[l(Ee,{text:Ie?.status==="Finalized"?"Return Bill":"Return only available for finalized bills"},{activator:u(({props:Ve})=>[l(Ae,Fe({variant:"plain",size:"small"},{ref_for:!0},Ve,{disabled:Ie?.status!=="Finalized",onClick:mn(ft=>ie(Ie.id),["stop"]),class:"btn-hover-base mb-2",style:{color:"orange"}}),{default:u(()=>[l(de,{size:"18",color:"orange"},{default:u(()=>[...H[26]||(H[26]=[O("mdi-arrow-u-left-top",-1)])]),_:1})]),_:1},16,["disabled","onClick"])]),_:2},1032,["text"])]),_:2},1024),l(ye,{class:"mx-4"}),l(ae,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[l(xn,{permission:"billing.delete"},{default:u(()=>[l(Ee,{text:Ie?.status==="Cancelled"?"Bill is already cancelled":"Cancel Bill"},{activator:u(({props:Ve})=>[l(Ae,Fe({variant:"plain",color:"error",size:"small"},{ref_for:!0},Ve,{disabled:Ie?.status==="Cancelled",onClick:mn(ft=>le(Ie),["stop"]),class:"btn-hover-base mt-1"}),{default:u(()=>[l(de,{size:"18"},{default:u(()=>[...H[27]||(H[27]=[O("mdi-close-circle",-1)])]),_:1})]),_:1},16,["disabled","onClick"])]),_:2},1032,["text"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):_e("",!0)]),_:2},1024))),128))]),_:1})]),_:1})):_e("",!0)],64)):(R(),ve(oe,{key:2,"no-gutters":""},{default:u(()=>[l(ae,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[p("div",Z$e,[l(de,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...H[14]||(H[14]=[O("mdi-pill",-1)])]),_:1}),H[15]||(H[15]=p("div",{class:"text-h6 mb-2"},"Search for Pharmacy Bills",-1)),H[16]||(H[16]=p("div",{class:"text-body-2 text-medium-emphasis"},"Use the filters on the left to find pharmacy bills",-1))])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(it,{modelValue:m.value,"onUpdate:modelValue":H[5]||(H[5]=Ie=>m.value=Ie),persistent:"","max-width":"85%"},{default:u(()=>[h.value?(R(),ve($He,{key:0,"bill-id":h.value,mode:v.value,onClose:Z,onBillUpdated:se},null,8,["bill-id","mode"])):_e("",!0)]),_:1},8,["modelValue"]),l(it,{modelValue:f.value,"onUpdate:modelValue":H[6]||(H[6]=Ie=>f.value=Ie),persistent:"","max-width":"70%"},{default:u(()=>[h.value?(R(),ve(L$e,{key:0,"bill-id":h.value,onClose:ce,onEditBill:J},null,8,["bill-id"])):_e("",!0)]),_:1},8,["modelValue"]),l(it,{modelValue:y.value,"onUpdate:modelValue":H[7]||(H[7]=Ie=>y.value=Ie),persistent:"","max-width":"30%"},{default:u(()=>[g.value?(R(),ve(H$e,{key:0,bill:g.value,onClose:Q},null,8,["bill"])):_e("",!0)]),_:1},8,["modelValue"]),l(it,{modelValue:w.value,"onUpdate:modelValue":H[8]||(H[8]=Ie=>w.value=Ie),persistent:"","max-width":"50%"},{default:u(()=>[l(W$e,{onClose:D,onDraftBillCreated:j})]),_:1},8,["modelValue"])],64)}}},m9e=Xt(f9e,[["__scopeId","data-v-d633baf2"]]),h9e={class:"mb-4"},v9e={class:"d-flex align-center justify-space-between"},p9e={class:"flex-grow-1"},g9e={class:"text-subtitle-1 font-weight-medium"},y9e={key:0,class:"text-caption text-medium-emphasis mt-1"},_9e={key:1,class:"text-caption text-medium-emphasis"},w9e={key:2,class:"text-caption text-warning mt-1"},b9e={__name:"pharmacy-medicine-form",emits:["close","medicine-added"],setup(e,{emit:t}){const{showSuccess:n,showInfo:a}=ra(),r=t,s=M(null),o=M(!1),i=M(null),c=M(null),A=M(!1),d=async y=>{if(!y||y.length===0)return;const g=y[0];s.value=g,i.value=null,c.value=null,g.isPharmacy?c.value="This medicine is already marked as pharmacy medicine.":g.isLocal||(c.value="This is an external medicine. It will be created in your database and then marked as pharmacy medicine.")},f=()=>{A.value=!0},m=async y=>{A.value=!1,y&&y.id&&(s.value={...y,isLocal:!0,isPharmacy:!1},await h())},h=async()=>{if(!s.value){i.value="Please select a medicine first";return}if(s.value.isPharmacy){a("This medicine is already in pharmacy");return}try{o.value=!0,i.value=null;let y=s.value.id;if(!s.value.isLocal){const b=await yT({productName:s.value.productName,marketer:s.value.marketer||"",saltComposition:s.value.saltComposition||"",productForm:s.value.productForm||"",productId:s.value.productId||"",primaryUse:s.value.primaryUse||"",source:"A",isCreatedByUser:!1});if(b.error){i.value=b.error.response?.data?.error||"Failed to create medicine";return}if(!b.data||!b.data.id){i.value="Medicine was created but ID was not returned";return}y=b.data.id}const{data:g,error:w}=await rEe(y);if(w){i.value=w.response?.data?.error||"Failed to add medicine to pharmacy";return}n("Medicine added to pharmacy successfully"),r("medicine-added",g),v()}catch(y){console.error("Error adding medicine to pharmacy:",y),i.value="An unexpected error occurred"}finally{o.value=!1}},v=()=>{s.value=null,i.value=null,c.value=null,r("close")};return(y,g)=>{const w=I("v-icon"),b=I("v-btn"),x=I("v-card-title"),T=I("v-divider"),U=I("v-alert"),k=I("v-chip"),S=I("v-card"),E=I("v-card-text"),C=I("v-spacer"),P=I("v-card-actions"),F=I("v-dialog");return R(),me(ze,null,[l(S,{rounded:"lg",color:"surfaceContainer",flat:""},{default:u(()=>[l(x,{class:"d-flex align-center justify-space-between"},{default:u(()=>[g[4]||(g[4]=p("span",null,"Add Medicine to Pharmacy",-1)),l(b,{onClick:v,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(w,{size:"18"},{default:u(()=>[...g[3]||(g[3]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(T),l(E,{class:"pt-4"},{default:u(()=>[i.value?(R(),ve(U,{key:0,type:"error",variant:"tonal",class:"mb-4",dismissible:"","onClick:close":g[0]||(g[0]=N=>i.value=null)},{default:u(()=>[O(q(i.value),1)]),_:1})):_e("",!0),c.value?(R(),ve(U,{key:1,type:"info",variant:"tonal",class:"mb-4"},{default:u(()=>[O(q(c.value),1)]),_:1})):_e("",!0),p("div",h9e,[g[5]||(g[5]=p("div",{class:"text-subtitle-2 mb-2"},"Search and select a medicine to add to pharmacy inventory:",-1)),l(wH,{onSearchedMedicines:d,onAddMedicine:f})]),s.value?(R(),ve(S,{key:2,variant:"outlined",class:"pa-3 mb-4",color:s.value.isPharmacy?"success":"primary"},{default:u(()=>[p("div",v9e,[p("div",p9e,[p("div",g9e,[O(q(s.value.productName)+" ",1),s.value.isPharmacy?(R(),ve(k,{key:0,size:"x-small",color:"success",variant:"flat",class:"ml-2"},{default:u(()=>[...g[6]||(g[6]=[O(" Already in Pharmacy ",-1)])]),_:1})):_e("",!0)]),s.value.saltComposition?(R(),me("div",y9e,q(s.value.saltComposition),1)):_e("",!0),s.value.marketer?(R(),me("div",_9e,q(s.value.marketer),1)):_e("",!0),s.value.isLocal?_e("",!0):(R(),me("div",w9e,[l(w,{size:"small"},{default:u(()=>[...g[7]||(g[7]=[O("mdi-information",-1)])]),_:1}),g[8]||(g[8]=O(" This medicine will be created in your database first ",-1))]))])])]),_:1},8,["color"])):_e("",!0)]),_:1}),l(T),l(P,{class:"pa-4"},{default:u(()=>[l(C),l(b,{onClick:v},{default:u(()=>[...g[9]||(g[9]=[O(" Cancel ",-1)])]),_:1}),l(b,{color:"primary",variant:"outlined",onClick:h,disabled:!s.value||o.value||s.value&&s.value.isPharmacy,loading:o.value},{default:u(()=>[O(q(s.value?.isPharmacy?"Already Added":"Add to Pharmacy"),1)]),_:1},8,["disabled","loading"])]),_:1})]),_:1}),l(F,{modelValue:A.value,"onUpdate:modelValue":g[2]||(g[2]=N=>A.value=N),persistent:"","max-width":"600px"},{default:u(()=>[l(wT,{onClose:g[1]||(g[1]=N=>A.value=!1),"onUpdate:medicinelist":m})]),_:1},8,["modelValue"])],64)}}},x9e=Xt(b9e,[["__scopeId","data-v-4e957024"]]),C9e={key:0,class:"text-caption text-medium-emphasis"},S9e={key:1},E9e={class:"text-caption font-weight-medium"},B9e={key:0,class:"text-caption text-medium-emphasis"},k9e={key:2,class:"text-caption text-error"},T9e={class:"text-caption text-medium-emphasis"},I9e={class:"font-weight-medium"},F9e={class:"text-caption text-medium-emphasis"},P9e={key:0,class:"mb-0.5"},D9e={key:1,class:"mb-0.5"},U9e={key:2},R9e={__name:"pharmacy-batch-inward-form",props:{medicineId:{type:Number,default:null},medicineInfo:{type:Object,default:null},purchaseInvoiceId:{type:Number,default:null}},emits:["close","batch-created"],setup(e,{emit:t}){const{showSuccess:n,showError:a}=ra(),r=e,s=t,o=M(null),i=M(!1),c=M(!1),A=M(!1),d=M(!1),f=M(null),m=M([]),h=M(""),v=M({medicineId:r.medicineId||null,batchNumber:"",expiryDate:"",packType:"",unitsPerPack:1,mrp:null,discountPercentage:0,saleQuantityPacks:0,freeQuantityPacks:0,cgstPercentage:0,sgstPercentage:0,inwardBillId:"",purchaseInvoiceId:r.purchaseInvoiceId||null,location:""}),y=M("0.00"),g=ee(()=>Number(y.value??0)||0),w=()=>{y.value=(Number(y.value??0)||0).toFixed(2)},b=ee(()=>{const G=Number(v.value.cgstPercentage??0)||0,D=Number(v.value.sgstPercentage??0)||0;return G+D}),x=ee(()=>{const G=g.value||0,D=Number(b.value??0)||0;return G*(1+D/100)}),T=ee(()=>(Number(x.value??0)||0).toFixed(2)),U=ee(()=>{const G=v.value.saleQuantityPacks||0,D=v.value.freeQuantityPacks||0;return G+D}),k=ee(()=>U.value*(v.value.unitsPerPack||1)),S=ee(()=>{const G=v.value.saleQuantityPacks||0,D=v.value.freeQuantityPacks||0,j=g.value||0,ne=G+D;return ne===0?null:j*G/ne}),E=ee(()=>{const G=v.value.saleQuantityPacks||0,D=v.value.freeQuantityPacks||0,j=x.value||0,ne=G+D;return ne===0?null:j*G/ne}),C=ee(()=>{const G=v.value.cgstPercentage||0,D=v.value.sgstPercentage||0;return G+D}),P=[G=>!!G||"Expiry date is required"],F=[G=>G!=null&&!isNaN(G)&&G>=0||"Sale quantity must be non-negative",G=>{const D=G!=null&&!isNaN(G)?G:0,j=v.value.freeQuantityPacks!==null&&v.value.freeQuantityPacks!==void 0&&!isNaN(v.value.freeQuantityPacks)?v.value.freeQuantityPacks:0;return D>0||j>0||"At least one of sale quantity or free quantity must be greater than 0"}],N=[G=>G!=null&&!isNaN(G)&&G>=0||"Free quantity must be non-negative",G=>{const D=v.value.saleQuantityPacks!==null&&v.value.saleQuantityPacks!==void 0&&!isNaN(v.value.saleQuantityPacks)?v.value.saleQuantityPacks:0,j=G!=null&&!isNaN(G)?G:0;return D>0||j>0||"At least one of sale quantity or free quantity must be greater than 0"}],L=[G=>{if(!G||G.trim()==="")return"Price to retailer (excl. GST) is required";const D=Number(G);return isNaN(D)?"Price to retailer (excl. GST) must be a valid number":D<0?"Price to retailer (excl. GST) must be non-negative":!0}],ie=()=>{o.value&&o.value.validate()},le=()=>{o.value&&o.value.validate()},Q=async()=>{if(r.purchaseInvoiceId)try{const{data:G}=await yg(r.purchaseInvoiceId);G&&(h.value=`${G.pharmacyPurchaseInvoiceIdentifier} (${Z(G.pharmacyPurchaseInvoiceDate)})`)}catch(G){console.error("Error loading invoice info:",G)}else{d.value=!0;try{const{data:G}=await vEe();m.value=G||[]}catch(G){console.error("Error loading purchase invoices:",G)}finally{d.value=!1}}},Z=G=>G?new Date(G*1e3).toLocaleDateString():"-",ce=async()=>{if(!r.medicineId){f.value=null;return}if(r.medicineInfo){f.value={id:r.medicineInfo.id,productName:r.medicineInfo.productName,marketer:r.medicineInfo.marketer},v.value.medicineId=r.medicineInfo.id;return}try{A.value=!0;const{data:G,error:D}=await Vw();if(!D&&G){const j=G.find(ne=>ne.id===r.medicineId);j?(f.value={id:j.id,productName:j.productName,marketer:j.marketer},v.value.medicineId=j.id):(a("Medicine not found"),f.value=null)}else a("Failed to load medicine details"),f.value=null}catch(G){console.error("Error loading medicine details:",G),a("Error loading medicine details"),f.value=null}finally{A.value=!1}},J=async()=>{if(!i.value){o.value?.validate();return}try{c.value=!0;const G=v.value.saleQuantityPacks||0,D=v.value.freeQuantityPacks||0;if(G===0&&D===0){a("At least one of sale quantity or free quantity must be greater than 0"),c.value=!1;return}const j=E.value;if(j!==null&&v.value.mrp<j){a("MRP must be greater than or equal to calculated cost"),c.value=!1;return}const ne={medicineId:v.value.medicineId,batchNumber:v.value.batchNumber,expiryDate:v.value.expiryDate,packType:v.value.packType,unitsPerPack:parseInt(v.value.unitsPerPack||1),mrp:parseFloat(v.value.mrp),discountPercentage:parseFloat(v.value.discountPercentage||0),saleQuantityPacks:parseFloat(v.value.saleQuantityPacks||0),freeQuantityPacks:parseFloat(v.value.freeQuantityPacks||0),priceToRetailer:parseFloat(x.value||0),cgstPercentage:parseFloat(v.value.cgstPercentage||0),sgstPercentage:parseFloat(v.value.sgstPercentage||0),inwardBillId:v.value.inwardBillId||"",purchaseInvoiceId:v.value.purchaseInvoiceId||r.purchaseInvoiceId||null,location:v.value.location||""},{data:H,error:te}=await BH(ne);te?a(te.response?.data?.error||"Failed to create batch inward"):(n("Batch inward created successfully"),s("batch-created"),se())}catch(G){console.error("Error saving batch inward:",G),a("An unexpected error occurred")}finally{c.value=!1}},se=()=>{s("close")};return We(()=>r.purchaseInvoiceId,G=>{G&&(v.value.purchaseInvoiceId=G,Q())},{immediate:!0}),cn(()=>{w(),r.medicineId?ce():a("Medicine ID is required"),Q()}),(G,D)=>{const j=I("v-icon"),ne=I("v-btn"),H=I("v-card-title"),te=I("v-divider"),Y=I("v-col"),K=I("v-text-field"),X=I("v-select"),ae=I("v-autocomplete"),oe=I("v-row"),W=I("v-form"),de=I("v-card-text"),Ae=I("v-spacer"),Ce=I("v-card-actions"),De=I("v-card");return R(),ve(De,{rounded:"lg",color:"surfaceContainer",flat:""},{default:u(()=>[l(H,{class:"d-flex align-center justify-space-between"},{default:u(()=>[D[16]||(D[16]=p("span",null,"Add purchased inventory",-1)),l(ne,{onClick:se,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(j,{size:"18"},{default:u(()=>[...D[15]||(D[15]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(te),l(de,{class:"py-1"},{default:u(()=>[l(W,{ref_key:"form",ref:o,modelValue:i.value,"onUpdate:modelValue":D[14]||(D[14]=xe=>i.value=xe)},{default:u(()=>[l(oe,{dense:""},{default:u(()=>[l(Y,{cols:"12",class:"pb-1"},{default:u(()=>[A.value?(R(),me("div",C9e," Loading... ")):f.value?(R(),me("div",S9e,[p("div",E9e,q(f.value.productName||"Unknown Medicine"),1),f.value.marketer?(R(),me("div",B9e,q(f.value.marketer),1)):_e("",!0)])):(R(),me("div",k9e," Medicine not found "))]),_:1}),l(Y,{cols:"12",md:"6"},{default:u(()=>[l(K,{modelValue:v.value.batchNumber,"onUpdate:modelValue":D[0]||(D[0]=xe=>v.value.batchNumber=xe),label:"Batch Number *",variant:"outlined",density:"compact",rules:[xe=>!!xe||"Batch number is required"],"prepend-inner-icon":"mdi-barcode"},null,8,["modelValue","rules"])]),_:1}),l(Y,{cols:"12",md:"6"},{default:u(()=>[l(K,{modelValue:v.value.expiryDate,"onUpdate:modelValue":D[1]||(D[1]=xe=>v.value.expiryDate=xe),type:"date",label:"Expiry Date *",variant:"outlined",density:"compact",rules:P,"prepend-inner-icon":"mdi-calendar"},null,8,["modelValue"])]),_:1}),l(Y,{cols:"12",md:"6"},{default:u(()=>[l(X,{modelValue:v.value.packType,"onUpdate:modelValue":D[2]||(D[2]=xe=>v.value.packType=xe),items:Oe(Uw),label:"Pack Type *",variant:"outlined",density:"compact",rules:[xe=>!!xe||"Pack type is required"],"prepend-inner-icon":"mdi-package-variant"},null,8,["modelValue","items","rules"])]),_:1}),l(Y,{cols:"12",md:"6"},{default:u(()=>[l(K,{modelValue:v.value.unitsPerPack,"onUpdate:modelValue":D[3]||(D[3]=xe=>v.value.unitsPerPack=xe),modelModifiers:{number:!0},label:"Units Per Pack *",variant:"outlined",density:"compact",type:"number",rules:[xe=>xe!=null&&!isNaN(xe)&&xe>0||"Units per pack must be greater than 0"],"prepend-inner-icon":"mdi-numeric"},null,8,["modelValue","rules"])]),_:1}),l(Y,{cols:"12",md:"6"},{default:u(()=>[l(K,{modelValue:v.value.mrp,"onUpdate:modelValue":D[4]||(D[4]=xe=>v.value.mrp=xe),modelModifiers:{number:!0},label:"MRP per Pack () *",variant:"outlined",density:"compact",type:"number",rules:[xe=>xe!=null&&!isNaN(xe)&&xe>=0||"MRP must be a positive number"],"prepend-inner-icon":"mdi-currency-inr"},null,8,["modelValue","rules"])]),_:1}),l(Y,{cols:"12",md:"6"},{default:u(()=>[l(K,{modelValue:v.value.discountPercentage,"onUpdate:modelValue":D[5]||(D[5]=xe=>v.value.discountPercentage=xe),modelModifiers:{number:!0},label:"Discount to Patients % *",variant:"outlined",density:"compact",type:"number",rules:[xe=>xe!=null&&!isNaN(xe)&&xe>=0&&xe<=100||"Discount must be between 0-100%"],"prepend-inner-icon":"mdi-percent"},null,8,["modelValue","rules"])]),_:1}),l(Y,{cols:"12",class:"py-0"},{default:u(()=>[l(te)]),_:1}),l(Y,{cols:"12",md:"6"},{default:u(()=>[l(K,{modelValue:v.value.saleQuantityPacks,"onUpdate:modelValue":[D[6]||(D[6]=xe=>v.value.saleQuantityPacks=xe),ie],modelModifiers:{number:!0},label:"Sale Quantity (Packs) *",variant:"outlined",density:"compact",type:"number",rules:F,"prepend-inner-icon":"mdi-package-variant"},null,8,["modelValue"])]),_:1}),l(Y,{cols:"12",md:"6"},{default:u(()=>[l(K,{modelValue:v.value.freeQuantityPacks,"onUpdate:modelValue":[D[7]||(D[7]=xe=>v.value.freeQuantityPacks=xe),le],modelModifiers:{number:!0},label:"Free Quantity (Packs) *",variant:"outlined",density:"compact",type:"number",rules:N,"prepend-inner-icon":"mdi-gift"},null,8,["modelValue"])]),_:1}),l(Y,{cols:"12",md:"6"},{default:u(()=>[l(K,{modelValue:v.value.cgstPercentage,"onUpdate:modelValue":D[8]||(D[8]=xe=>v.value.cgstPercentage=xe),modelModifiers:{number:!0},label:"CGST % *",variant:"outlined",density:"compact",type:"number",rules:[xe=>xe!=null&&!isNaN(xe)&&xe>=0&&xe<=100||"CGST must be between 0-100%"],"prepend-inner-icon":"mdi-percent"},null,8,["modelValue","rules"])]),_:1}),l(Y,{cols:"12",md:"6"},{default:u(()=>[l(K,{modelValue:v.value.sgstPercentage,"onUpdate:modelValue":D[9]||(D[9]=xe=>v.value.sgstPercentage=xe),modelModifiers:{number:!0},label:"SGST % *",variant:"outlined",density:"compact",type:"number",rules:[xe=>xe!=null&&!isNaN(xe)&&xe>=0&&xe<=100||"SGST must be between 0-100%"],"prepend-inner-icon":"mdi-percent"},null,8,["modelValue","rules"])]),_:1}),l(Y,{cols:"12",md:"6"},{default:u(()=>[l(K,{modelValue:y.value,"onUpdate:modelValue":D[10]||(D[10]=xe=>y.value=xe),label:"Price to Retailer (Excl. GST) per Pack () *",variant:"outlined",density:"compact",inputmode:"decimal",rules:L,"prepend-inner-icon":"mdi-currency-inr",hint:"User input (excludes GST)","persistent-hint":"",onBlur:w},null,8,["modelValue"])]),_:1}),l(Y,{cols:"12",md:"6"},{default:u(()=>[p("div",T9e,[p("div",I9e,"Price to Retailer (Incl. GST): "+q(T.value),1),D[17]||(D[17]=p("div",null,"Computed using CGST + SGST",-1))])]),_:1}),e.purchaseInvoiceId?_e("",!0):(R(),ve(Y,{key:0,cols:"12",md:"6"},{default:u(()=>[l(ae,{modelValue:v.value.purchaseInvoiceId,"onUpdate:modelValue":D[11]||(D[11]=xe=>v.value.purchaseInvoiceId=xe),items:m.value,"item-title":"displayText","item-value":"id",label:"Purchase Invoice (Optional)",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-file-document",loading:d.value,hint:"Link this batch to a purchase invoice","persistent-hint":"",clearable:""},null,8,["modelValue","items","loading"])]),_:1})),e.purchaseInvoiceId?(R(),ve(Y,{key:1,cols:"12",md:"6"},{default:u(()=>[l(K,{"model-value":h.value,label:"Purchase Invoice",variant:"outlined",density:"compact",readonly:"","prepend-inner-icon":"mdi-file-document"},null,8,["model-value"])]),_:1})):_e("",!0),l(Y,{cols:"12",md:"6"},{default:u(()=>[l(K,{modelValue:v.value.inwardBillId,"onUpdate:modelValue":D[12]||(D[12]=xe=>v.value.inwardBillId=xe),label:"Inward Bill ID",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-receipt",hint:"Optional reference to inward bill","persistent-hint":""},null,8,["modelValue"])]),_:1}),l(Y,{cols:"12",md:"6"},{default:u(()=>[l(K,{modelValue:v.value.location,"onUpdate:modelValue":D[13]||(D[13]=xe=>v.value.location=xe),label:"Location",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-map-marker",hint:"Physical storage location (e.g., Shelf A-3, Room 1)","persistent-hint":""},null,8,["modelValue"])]),_:1}),l(Y,{cols:"12",class:"pt-1"},{default:u(()=>[l(te,{class:"mb-1"}),p("div",F9e,[U.value>0?(R(),me("div",P9e,[D[18]||(D[18]=p("strong",null,"Total Quantity:",-1)),O(" "+q(U.value)+" packs ("+q(k.value)+" units) ",1)])):_e("",!0),S.value!==null?(R(),me("div",D9e,[D[19]||(D[19]=p("strong",null,"Cost per Pack (Excl. GST):",-1)),O(" "+q(S.value.toFixed(2)),1)])):_e("",!0),C.value!==null?(R(),me("div",U9e,[D[20]||(D[20]=p("strong",null,"GST %:",-1)),O(" "+q(C.value.toFixed(2))+"% ",1)])):_e("",!0)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(te),l(Ce,{class:"pa-3"},{default:u(()=>[l(Ae),l(ne,{onClick:se},{default:u(()=>[...D[21]||(D[21]=[O(" Cancel ",-1)])]),_:1}),l(ne,{color:"primary",onClick:J,disabled:!i.value||c.value,loading:c.value,variant:"outlined"},{default:u(()=>[...D[22]||(D[22]=[O(" Add purchased inventory ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})}}},N9e=Xt(R9e,[["__scopeId","data-v-df4ad396"]]),V9e={class:"text-body-2 font-weight-medium"},L9e={key:0,class:"text-caption text-medium-emphasis mt-0.5"},M9e={class:"text-caption text-medium-emphasis"},O9e={class:"font-weight-medium"},H9e={class:"text-body-2 text-medium-emphasis"},$9e={key:0,class:"mb-0.5"},Q9e={key:1,class:"mb-0.5"},G9e={key:2},z9e={__name:"edit-batch-inward",props:{batchId:{type:Number,required:!0},batch:{type:Object,required:!0}},emits:["close","batch-updated"],setup(e,{emit:t}){const{showSuccess:n,showError:a}=ra(),r=e,s=t,o=M(null),i=M(!1),c=M(!1),A=M(null),d=M(null),f=D=>{if(!D)return"";try{const j=new Date(D*1e3);if(isNaN(j.getTime()))return"";const ne=j.getFullYear(),H=String(j.getMonth()+1).padStart(2,"0"),te=String(j.getDate()).padStart(2,"0");return`${ne}-${H}-${te}`}catch(j){return console.error("Error converting timestamp to date:",j),""}},m=r.batch.unitsPerPack||1,h=r.batch.saleQuantity||0,v=r.batch.freeQuantity||0,g=(r.batch.priceToRetailer||0)/100,w=ee(()=>{const D=Number(S.value.cgstPercentage??0)||0,j=Number(S.value.sgstPercentage??0)||0;return D+j}),b=M("0.00"),x=ee(()=>Number(b.value??0)||0),T=()=>{b.value=(Number(b.value??0)||0).toFixed(2)},U=ee(()=>{const D=x.value||0,j=Number(w.value??0)||0;return D*(1+j/100)}),k=ee(()=>(Number(U.value??0)||0).toFixed(2)),S=M({batchNumber:r.batch.batchNumber||"",expiryDate:r.batch.expiryDate?typeof r.batch.expiryDate=="number"?f(r.batch.expiryDate):typeof r.batch.expiryDate=="string"&&r.batch.expiryDate.includes("T")?r.batch.expiryDate.split("T")[0]:r.batch.expiryDate:"",packType:r.batch.packType||"",unitsPerPack:m,mrp:r.batch.mrp||null,discountPercentage:r.batch.discountPercentage||0,saleQuantityPacks:m>0?h/m:0,freeQuantityPacks:m>0?v/m:0,cgstPercentage:r.batch.cgstPercentage||0,sgstPercentage:r.batch.sgstPercentage||0,inwardBillId:r.batch.inwardBillId||"",location:r.batch.location||""}),E=()=>{const j=1+(Number(w.value??0)||0)/100;if(j<=0){b.value="0.00";return}b.value=((Number(g??0)||0)/j).toFixed(2)},C=ee(()=>{const D=S.value.saleQuantityPacks||0,j=S.value.freeQuantityPacks||0;return D+j}),P=ee(()=>C.value*(S.value.unitsPerPack||1)),F=ee(()=>{const D=S.value.saleQuantityPacks||0,j=S.value.freeQuantityPacks||0,ne=Number(x.value??0)||0,H=D+j;return H===0?null:ne*D/H}),N=ee(()=>{const D=S.value.saleQuantityPacks||0,j=S.value.freeQuantityPacks||0,ne=U.value||0,H=D+j;return H===0?null:ne*D/H}),L=ee(()=>{const D=S.value.cgstPercentage||0,j=S.value.sgstPercentage||0;return D+j}),ie=[D=>!!D||"Expiry date is required"],le=[D=>D!=null&&D>=0||"Sale quantity must be non-negative",D=>{const j=D||0,ne=S.value.freeQuantityPacks||0;return j>0||ne>0||"At least one of sale quantity or free quantity must be greater than 0"}],Q=[D=>D!=null&&D>=0||"Free quantity must be non-negative",D=>{const j=S.value.saleQuantityPacks||0,ne=D||0;return j>0||ne>0||"At least one of sale quantity or free quantity must be greater than 0"}],Z=async()=>{if(!i.value){o.value?.validate();return}try{c.value=!0;const D=S.value.saleQuantityPacks||0,j=S.value.freeQuantityPacks||0;if(D===0&&j===0){a("At least one of sale quantity or free quantity must be greater than 0"),c.value=!1;return}const ne=N.value;if(ne!==null&&S.value.mrp<ne){a("MRP must be greater than or equal to calculated cost"),c.value=!1;return}const H={batchNumber:S.value.batchNumber,expiryDate:S.value.expiryDate,packType:S.value.packType,unitsPerPack:parseInt(S.value.unitsPerPack||1),mrp:parseFloat(S.value.mrp),discountPercentage:parseFloat(S.value.discountPercentage||0),saleQuantityPacks:parseFloat(S.value.saleQuantityPacks||0),freeQuantityPacks:parseFloat(S.value.freeQuantityPacks||0),priceToRetailer:parseFloat(U.value||0),cgstPercentage:parseFloat(S.value.cgstPercentage||0),sgstPercentage:parseFloat(S.value.sgstPercentage||0),inwardBillId:S.value.inwardBillId||"",location:S.value.location||""},{data:te,error:Y}=await ZSe(r.batchId,H);Y?a(Y.response?.data?.error||"Failed to update batch inward"):(n("Batch inward updated successfully"),s("batch-updated"),G())}catch(D){console.error("Error updating batch inward:",D),a("An unexpected error occurred")}finally{c.value=!1}},ce=async()=>{if(r.batch.purchaseInvoiceId)try{const{data:D}=await yg(r.batch.purchaseInvoiceId);D&&(d.value={id:D.id,identifier:D.pharmacyPurchaseInvoiceIdentifier,date:D.pharmacyPurchaseInvoiceDate,displayText:`${D.pharmacyPurchaseInvoiceIdentifier} (${J(D.pharmacyPurchaseInvoiceDate)})`})}catch(D){console.error("Error loading purchase invoice info:",D)}},J=D=>D?new Date(D*1e3).toLocaleDateString():"-",se=()=>{r.batch.medicineName||r.batch.medicineMarketer?A.value={id:r.batch.medicineId,productName:r.batch.medicineName,marketer:r.batch.medicineMarketer}:Vw().then(({data:D,error:j})=>{if(!j&&D){for(const ne of D)if(ne.batches&&ne.batches.find(te=>te.id===r.batchId)){A.value={id:ne.id,productName:ne.productName,marketer:ne.marketer};break}}}).catch(D=>{console.error("Error loading medicine info:",D)})},G=()=>{s("close")};return cn(()=>{se(),ce(),E()}),(D,j)=>{const ne=I("v-icon"),H=I("v-btn"),te=I("v-card-title"),Y=I("v-divider"),K=I("v-col"),X=I("v-text-field"),ae=I("v-select"),oe=I("v-row"),W=I("v-form"),de=I("v-card-text"),Ae=I("v-spacer"),Ce=I("v-card-actions"),De=I("v-card");return R(),ve(De,{rounded:"lg",color:"surfaceContainer",flat:""},{default:u(()=>[l(te,{class:"d-flex align-center justify-space-between"},{default:u(()=>[j[15]||(j[15]=p("span",null,"Edit purchased inventory",-1)),l(H,{onClick:G,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(ne,{size:"18"},{default:u(()=>[...j[14]||(j[14]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(Y),l(de,{class:"py-1"},{default:u(()=>[l(W,{ref_key:"form",ref:o,modelValue:i.value,"onUpdate:modelValue":j[13]||(j[13]=xe=>i.value=xe)},{default:u(()=>[l(oe,{dense:""},{default:u(()=>[A.value?(R(),ve(K,{key:0,cols:"12"},{default:u(()=>[p("div",V9e,q(A.value.productName||"Unknown Medicine"),1),A.value.marketer?(R(),me("div",L9e,q(A.value.marketer),1)):_e("",!0)]),_:1})):_e("",!0),l(K,{cols:"12",md:"6"},{default:u(()=>[l(X,{modelValue:S.value.batchNumber,"onUpdate:modelValue":j[0]||(j[0]=xe=>S.value.batchNumber=xe),label:"Batch Number *",variant:"outlined",density:"compact",rules:[xe=>!!xe||"Batch number is required"],"prepend-inner-icon":"mdi-barcode"},null,8,["modelValue","rules"])]),_:1}),l(K,{cols:"12",md:"6"},{default:u(()=>[l(X,{modelValue:S.value.expiryDate,"onUpdate:modelValue":j[1]||(j[1]=xe=>S.value.expiryDate=xe),type:"date",label:"Expiry Date *",variant:"outlined",density:"compact",rules:ie,"prepend-inner-icon":"mdi-calendar"},null,8,["modelValue"])]),_:1}),l(K,{cols:"12",md:"6"},{default:u(()=>[l(ae,{modelValue:S.value.packType,"onUpdate:modelValue":j[2]||(j[2]=xe=>S.value.packType=xe),items:Oe(Uw),label:"Pack Type *",variant:"outlined",density:"compact",rules:[xe=>!!xe||"Pack type is required"],"prepend-inner-icon":"mdi-package-variant"},null,8,["modelValue","items","rules"])]),_:1}),l(K,{cols:"12",md:"6"},{default:u(()=>[l(X,{modelValue:S.value.unitsPerPack,"onUpdate:modelValue":j[3]||(j[3]=xe=>S.value.unitsPerPack=xe),modelModifiers:{number:!0},label:"Units Per Pack *",variant:"outlined",density:"compact",type:"number",rules:[xe=>xe!=null&&xe>0||"Units per pack must be greater than 0"],"prepend-inner-icon":"mdi-numeric"},null,8,["modelValue","rules"])]),_:1}),l(K,{cols:"12",md:"6"},{default:u(()=>[l(X,{modelValue:S.value.mrp,"onUpdate:modelValue":j[4]||(j[4]=xe=>S.value.mrp=xe),modelModifiers:{number:!0},label:"MRP per Pack () *",variant:"outlined",density:"compact",type:"number",rules:[xe=>xe!=null&&xe>=0||"MRP must be a positive number"],"prepend-inner-icon":"mdi-currency-inr"},null,8,["modelValue","rules"])]),_:1}),l(K,{cols:"12",md:"6"},{default:u(()=>[l(X,{modelValue:S.value.discountPercentage,"onUpdate:modelValue":j[5]||(j[5]=xe=>S.value.discountPercentage=xe),modelModifiers:{number:!0},label:"Discount to Patients % *",variant:"outlined",density:"compact",type:"number",rules:[xe=>xe!=null&&xe>=0&&xe<=100||"Discount must be between 0-100%"],"prepend-inner-icon":"mdi-percent"},null,8,["modelValue","rules"])]),_:1}),l(K,{cols:"12"},{default:u(()=>[l(Y,{class:"my-1"})]),_:1}),l(K,{cols:"12",md:"6"},{default:u(()=>[l(X,{modelValue:S.value.saleQuantityPacks,"onUpdate:modelValue":j[6]||(j[6]=xe=>S.value.saleQuantityPacks=xe),modelModifiers:{number:!0},label:"Sale Quantity (Packs) *",variant:"outlined",density:"compact",type:"number",rules:le,"prepend-inner-icon":"mdi-package-variant"},null,8,["modelValue"])]),_:1}),l(K,{cols:"12",md:"6"},{default:u(()=>[l(X,{modelValue:S.value.freeQuantityPacks,"onUpdate:modelValue":j[7]||(j[7]=xe=>S.value.freeQuantityPacks=xe),modelModifiers:{number:!0},label:"Free Quantity (Packs) *",variant:"outlined",density:"compact",type:"number",rules:Q,"prepend-inner-icon":"mdi-gift"},null,8,["modelValue"])]),_:1}),l(K,{cols:"12",md:"6"},{default:u(()=>[l(X,{modelValue:S.value.cgstPercentage,"onUpdate:modelValue":j[8]||(j[8]=xe=>S.value.cgstPercentage=xe),modelModifiers:{number:!0},label:"CGST % *",variant:"outlined",density:"compact",type:"number",rules:[xe=>xe!=null&&xe>=0&&xe<=100||"CGST must be between 0-100%"],"prepend-inner-icon":"mdi-percent"},null,8,["modelValue","rules"])]),_:1}),l(K,{cols:"12",md:"6"},{default:u(()=>[l(X,{modelValue:S.value.sgstPercentage,"onUpdate:modelValue":j[9]||(j[9]=xe=>S.value.sgstPercentage=xe),modelModifiers:{number:!0},label:"SGST % *",variant:"outlined",density:"compact",type:"number",rules:[xe=>xe!=null&&xe>=0&&xe<=100||"SGST must be between 0-100%"],"prepend-inner-icon":"mdi-percent"},null,8,["modelValue","rules"])]),_:1}),l(K,{cols:"12",md:"6"},{default:u(()=>[l(X,{modelValue:b.value,"onUpdate:modelValue":j[10]||(j[10]=xe=>b.value=xe),label:"Price to Retailer (Excl. GST) per Pack () *",variant:"outlined",density:"compact",inputmode:"decimal",rules:[xe=>Number(xe)>=0||"Price to retailer (excl. GST) must be non-negative"],"prepend-inner-icon":"mdi-currency-inr",hint:"User input (excludes GST)","persistent-hint":"",onBlur:T},null,8,["modelValue","rules"])]),_:1}),l(K,{cols:"12",md:"6"},{default:u(()=>[p("div",M9e,[p("div",O9e,"Price to Retailer (Incl. GST): "+q(k.value),1),j[16]||(j[16]=p("div",null,"Computed using CGST + SGST",-1))])]),_:1}),d.value?(R(),ve(K,{key:1,cols:"12",md:"6"},{default:u(()=>[l(X,{"model-value":d.value.displayText,label:"Purchase Invoice",variant:"outlined",density:"compact",readonly:"","prepend-inner-icon":"mdi-file-document",hint:"Invoice link cannot be changed","persistent-hint":""},null,8,["model-value"])]),_:1})):_e("",!0),l(K,{cols:"12",md:"6"},{default:u(()=>[l(X,{modelValue:S.value.inwardBillId,"onUpdate:modelValue":j[11]||(j[11]=xe=>S.value.inwardBillId=xe),label:"Inward Bill ID",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-receipt",hint:"Optional reference to inward bill","persistent-hint":""},null,8,["modelValue"])]),_:1}),l(K,{cols:"12",md:"6"},{default:u(()=>[l(X,{modelValue:S.value.location,"onUpdate:modelValue":j[12]||(j[12]=xe=>S.value.location=xe),label:"Location",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-map-marker",hint:"Physical storage location (e.g., Shelf A-3, Room 1)","persistent-hint":""},null,8,["modelValue"])]),_:1}),l(K,{cols:"12"},{default:u(()=>[l(Y,{class:"my-1"}),p("div",H9e,[C.value>0?(R(),me("div",$9e,[j[17]||(j[17]=p("strong",null,"Total Quantity:",-1)),O(" "+q(C.value)+" packs ("+q(P.value)+" units) ",1)])):_e("",!0),F.value!==null?(R(),me("div",Q9e,[j[18]||(j[18]=p("strong",null,"Calculated Cost per Pack (Excl. GST):",-1)),O(" "+q(F.value.toFixed(2)),1)])):_e("",!0),L.value!==null?(R(),me("div",G9e,[j[19]||(j[19]=p("strong",null,"Calculated GST %:",-1)),O(" "+q(L.value.toFixed(2))+"% ",1)])):_e("",!0)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(Y),l(Ce,{class:"pa-3"},{default:u(()=>[l(Ae),l(H,{onClick:G},{default:u(()=>[...j[20]||(j[20]=[O(" Cancel ",-1)])]),_:1}),l(H,{color:"primary",variant:"outlined",onClick:Z,disabled:!i.value||c.value,loading:c.value},{default:u(()=>[...j[21]||(j[21]=[O(" Update purchased inventory ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})}}},K9e=Xt(z9e,[["__scopeId","data-v-b0e37027"]]),W9e={class:"text-body-2"},j9e={key:2,class:"text-caption text-medium-emphasis mt-1 ml-4"},q9e={key:3,class:"text-caption text-medium-emphasis mt-1 ml-4"},Y9e={__name:"edit-inventory",props:{batchId:{type:Number,required:!0},batch:{type:Object,required:!0}},emits:["close","inventory-added"],setup(e,{emit:t}){const{showSuccess:n,showError:a}=ra(),r=e,s=t,o=M(null),i=M(!1),c=M(!1),A=M(!1),d=M(null),f=M(null),m=M("increase"),h=M(""),v=M("packs"),y=M(null),g=M(null),w=ee(()=>v.value==="packs"&&y.value&&f.value?.unitsPerPack>0?y.value*f.value.unitsPerPack:g.value||0),b=ee(()=>v.value==="units"&&g.value&&f.value?.unitsPerPack>0?(g.value/f.value.unitsPerPack).toFixed(2):y.value||0),x=()=>{v.value==="packs"?(y.value&&f.value?.unitsPerPack>0&&(g.value=y.value*f.value.unitsPerPack),v.value="units"):(g.value&&f.value?.unitsPerPack>0&&(y.value=g.value/f.value.unitsPerPack),v.value="packs")},T=ee(()=>[E=>E!=null&&E>0||"Quantity must be greater than 0",E=>{if(m.value==="decrease"&&f.value){const C=f.value.availableUnits||0;let P=0;return v.value==="packs"&&E&&f.value?.unitsPerPack>0?P=E*f.value.unitsPerPack:v.value==="units"&&E&&(P=E),P<=C||`Cannot decrease more than current stock (${C} units)`}return!0}]),U=async()=>{try{A.value=!0,d.value=null,r.batch?f.value={batchNumber:r.batch.batchNumber||"Unknown",medicineName:r.batch.medicineName||"Unknown",availableUnits:r.batch.availableUnits||0,medicineId:r.batch.medicineId,unitsPerPack:r.batch.unitsPerPack||1}:d.value="Batch information not available"}catch(E){console.error("Error loading batch info:",E),d.value=E.message||"Failed to load batch information"}finally{A.value=!1}},k=async()=>{if(!i.value){o.value?.validate();return}if(!m.value){a("Please select increase or decrease for stock correction");return}try{c.value=!0;let E=0;if(v.value==="packs"&&y.value&&f.value?.unitsPerPack>0)E=y.value*f.value.unitsPerPack;else if(v.value==="units"&&g.value)E=g.value;else{a("Please enter a valid quantity"),c.value=!1;return}const C="stock_correction";let P=E;m.value==="decrease"&&(P=-E);const{data:F,error:N}=await eEe(r.batchId,P,h.value,C);if(N)a(N.response?.data?.error||"Failed to adjust inventory");else{const L=m.value==="increase"?"increased":"decreased";n(`Inventory ${L} successfully`),s("inventory-added"),S()}}catch(E){console.error("Error adjusting inventory:",E),a("An unexpected error occurred")}finally{c.value=!1}},S=()=>{m.value="increase",y.value=null,g.value=null,v.value="packs",h.value="",s("close")};return cn(()=>{U()}),(E,C)=>{const P=I("v-icon"),F=I("v-btn"),N=I("v-card-title"),L=I("v-divider"),ie=I("v-progress-circular"),le=I("v-col"),Q=I("v-row"),Z=I("v-alert"),ce=I("v-radio"),J=I("v-radio-group"),se=I("v-text-field"),G=I("v-textarea"),D=I("v-form"),j=I("v-card-text"),ne=I("v-spacer"),H=I("v-card-actions"),te=I("v-card");return R(),ve(te,{rounded:"lg",color:"surfaceContainer",flat:""},{default:u(()=>[l(N,{class:"d-flex align-center justify-space-between"},{default:u(()=>[C[6]||(C[6]=p("span",null,"Manage Inventory",-1)),l(F,{onClick:S,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(P,{size:"18"},{default:u(()=>[...C[5]||(C[5]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(L),l(j,{class:"pt-4"},{default:u(()=>[A.value?(R(),ve(Q,{key:0},{default:u(()=>[l(le,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[l(ie,{indeterminate:"",color:"primary"})]),_:1})]),_:1})):f.value?(R(),me(ze,{key:1},[l(Z,{type:"info",variant:"tonal",class:"mb-4"},{default:u(()=>[p("div",W9e,[C[7]||(C[7]=p("strong",null,"Batch:",-1)),O(" "+q(f.value.batchNumber),1),C[8]||(C[8]=p("br",null,null,-1)),C[9]||(C[9]=p("strong",null,"Medicine:",-1)),O(" "+q(f.value.medicineName),1),C[10]||(C[10]=p("br",null,null,-1)),C[11]||(C[11]=p("strong",null,"Current Stock:",-1)),O(" "+q(f.value.availableUnits||0)+" units ",1)])]),_:1}),l(D,{ref_key:"form",ref:o,modelValue:i.value,"onUpdate:modelValue":C[4]||(C[4]=Y=>i.value=Y)},{default:u(()=>[l(Q,null,{default:u(()=>[l(le,{cols:"12"},{default:u(()=>[l(J,{modelValue:m.value,"onUpdate:modelValue":C[0]||(C[0]=Y=>m.value=Y),inline:"",rules:[Y=>!!Y||"Please select correction direction"]},{default:u(()=>[l(ce,{label:"Increase Stock",value:"increase",color:"success"}),l(ce,{label:"Decrease Stock",value:"decrease",color:"error"})]),_:1},8,["modelValue","rules"])]),_:1}),l(le,{cols:"12"},{default:u(()=>[v.value==="packs"?(R(),ve(se,{key:0,modelValue:y.value,"onUpdate:modelValue":C[1]||(C[1]=Y=>y.value=Y),modelModifiers:{number:!0},label:"Quantity (Packs) *",variant:"outlined",density:"comfortable",type:"number",rules:T.value,"prepend-inner-icon":"mdi-package-variant",hint:"Enter quantity in packs","persistent-hint":""},{"append-inner":u(()=>[l(F,{icon:"",size:"small",variant:"text",onClick:x,title:"Switch to Units"},{default:u(()=>[l(P,{size:"small"},{default:u(()=>[...C[12]||(C[12]=[O("mdi-swap-horizontal",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","rules"])):(R(),ve(se,{key:1,modelValue:g.value,"onUpdate:modelValue":C[2]||(C[2]=Y=>g.value=Y),modelModifiers:{number:!0},label:"Quantity (Units) *",variant:"outlined",density:"comfortable",type:"number",rules:T.value,"prepend-inner-icon":"mdi-package-variant",hint:"Enter quantity in units","persistent-hint":""},{"append-inner":u(()=>[l(F,{icon:"",size:"small",variant:"text",onClick:x,title:"Switch to Packs"},{default:u(()=>[l(P,{size:"small"},{default:u(()=>[...C[13]||(C[13]=[O("mdi-swap-horizontal",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","rules"])),v.value==="packs"&&f.value?.unitsPerPack>0&&y.value?(R(),me("div",j9e," = "+q(w.value)+" units ("+q(f.value.unitsPerPack)+" units/pack) ",1)):v.value==="units"&&f.value?.unitsPerPack>0&&g.value?(R(),me("div",q9e," = "+q(b.value)+" packs ("+q(f.value.unitsPerPack)+" units/pack) ",1)):_e("",!0)]),_:1}),l(le,{cols:"12"},{default:u(()=>[l(G,{modelValue:h.value,"onUpdate:modelValue":C[3]||(C[3]=Y=>h.value=Y),label:"Reason/Notes *",variant:"outlined",density:"comfortable",rules:[Y=>!!Y||"Reason is required"],rows:"3","prepend-inner-icon":"mdi-note-text"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)):d.value?(R(),me(ze,{key:2},[l(Z,{type:"error",class:"mb-4"},{default:u(()=>[O(q(d.value),1)]),_:1}),l(F,{color:"primary",onClick:U,"prepend-icon":"mdi-refresh"},{default:u(()=>[...C[14]||(C[14]=[O(" Retry ",-1)])]),_:1})],64)):_e("",!0)]),_:1}),l(L),l(H,{class:"pa-4"},{default:u(()=>[l(ne),l(F,{variant:"outlined",onClick:S},{default:u(()=>[...C[15]||(C[15]=[O(" Cancel ",-1)])]),_:1}),l(F,{color:"primary",onClick:k,disabled:!i.value||c.value||!f.value,loading:c.value},{default:u(()=>[O(q(m.value==="increase"?"Increase Stock":"Decrease Stock"),1)]),_:1},8,["disabled","loading"])]),_:1})]),_:1})}}},X9e=Xt(Y9e,[["__scopeId","data-v-199072f7"]]),J9e={class:"text-medium-emphasis"},Z9e={key:0},eQe={__name:"remove-medicine-from-pharmacy",props:{medicine:{type:Object,required:!0}},emits:["close","medicine-removed"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ra(),o=M(!1),i=()=>{a("close")},c=async()=>{try{o.value=!0;const A=await sEe(n.medicine.id);if(A.error){const d=A.error.response?.data?.error||A.error.message||"Failed to remove medicine from pharmacy";s(d)}else r("Medicine removed from pharmacy successfully"),a("medicine-removed"),i()}catch(A){console.error("Error removing medicine from pharmacy:",A),s("An unexpected error occurred while removing the medicine from pharmacy")}finally{o.value=!1}};return(A,d)=>{const f=I("v-card-title"),m=I("v-col"),h=I("v-icon"),v=I("v-btn"),y=I("v-row"),g=I("v-card"),w=I("v-card-text"),b=I("v-divider");return R(),ve(g,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(y,{"no-gutters":""},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(g,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(y,{"no-gutters":""},{default:u(()=>[l(m,{cols:"11"},{default:u(()=>[l(f,{class:"pa-0 pl-2"},{default:u(()=>[...d[0]||(d[0]=[O("Remove Medicine from Pharmacy",-1)])]),_:1})]),_:1}),l(m,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(v,{icon:"",size:"x-small",onClick:i},{default:u(()=>[l(h,null,{default:u(()=>[...d[1]||(d[1]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(y,{"no-gutters":""},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(g,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(y,{"no-gutters":""},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(w,{class:"text-left"},{default:u(()=>[d[4]||(d[4]=O(" Are you sure you want to remove this medicine from pharmacy? ",-1)),d[5]||(d[5]=p("span",{class:"text-warning font-weight-bold"}," Medicine will not be shown in pharmacy operations. You will need to select and add it again later. ",-1)),d[6]||(d[6]=p("br",null,null,-1)),d[7]||(d[7]=p("br",null,null,-1)),p("span",J9e,[d[3]||(d[3]=O(" Medicine: ",-1)),p("strong",null,q(e.medicine?.productName||"N/A"),1),e.medicine?.marketer?(R(),me("span",Z9e,[d[2]||(d[2]=O("  Marketer: ",-1)),p("strong",null,q(e.medicine.marketer),1)])):_e("",!0)])]),_:1})]),_:1})]),_:1}),l(b),l(y,{"no-gutters":""},{default:u(()=>[l(m,{cols:"2"}),l(m,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(v,{variant:"outlined",color:"error",onClick:c,loading:o.value,disabled:o.value},{default:u(()=>[...d[8]||(d[8]=[O(" Yes, Remove from Pharmacy ",-1)])]),_:1},8,["loading","disabled"])]),_:1}),l(m,{cols:"2"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},tQe={class:"d-flex align-center"},nQe={class:"d-flex align-center"},aQe={class:"pr-3 d-flex"},rQe={class:"scrollable-content"},sQe={class:"text-center"},oQe={class:"text-center"},iQe={class:"text-body-2 text-medium-emphasis mb-4"},lQe={class:"text-center"},uQe={class:"text-center"},cQe={class:"text-body-2 text-medium-emphasis mb-4"},dQe={key:0},AQe={key:1},fQe={class:"d-flex align-center justify-space-between w-100"},mQe={class:"flex-grow-1"},hQe={class:"d-flex align-center mb-1"},vQe={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},pQe={class:"d-flex align-center flex-wrap"},gQe={class:"d-flex align-center ml-2"},yQe={key:0},_Qe={class:"text-right"},wQe={class:"text-right"},bQe={class:"text-right"},xQe={class:"text-right"},CQe={class:"text-center"},SQe={key:1,class:"text-body-2 text-medium-emphasis text-center py-2"},EQe={key:0,class:"text-medium-emphasis"},BQe={__name:"pharmacy-inventory",setup(e){const{showSuccess:t,showError:n}=ra(),a=M(0),r=M([]),s=M(null),o=M(!1),i=M(null),c=M(""),A=M(""),d=M(!1),f=M(!1),m=M(!1),h=M(!1),v=M(!1),y=M(!1),g=M(!1),w=M(!1),b=M(!1),x=M(null),T=M(null);M(null);const U=M(null),k=M(null),S=M(null),E=M(new Map),C=M(new Set),P=M(!1),F=M(null),N=tt=>!tt||tt===0?"error":tt<10?"warning":"success",L=tt=>{if(!tt)return!1;try{const Ge=new Date(tt),pt=new Date;return pt.setHours(0,0,0,0),Ge<pt}catch{return!1}},ie=tt=>{if(!tt.batches||tt.batches.length===0)return!1;const Ge=new Date;return Ge.setHours(0,0,0,0),tt.batches.some(pt=>{if(!pt.expiryDate)return!1;try{const ht=new Date(pt.expiryDate);return ht.setHours(0,0,0,0),ht<Ge&&(pt.availableUnits||0)>0}catch{return!1}})},le=tt=>{if(!tt)return"";try{return new Date(tt).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return tt}},Q=tt=>tt==null?"0.00":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(tt),Z=ee(()=>{let tt=r.value;if(c.value&&c.value.trim()!==""){const Ge=c.value.toLowerCase().trim();tt=tt.filter(pt=>(pt.productName||"").toLowerCase().includes(Ge))}if(A.value&&A.value.trim()!==""){const Ge=A.value.toLowerCase().trim();tt=tt.filter(pt=>(pt.group||"").toLowerCase().includes(Ge))}return d.value&&(tt=tt.filter(Ge=>Ge.hasExpiredBatchesWithInventory)),f.value&&(tt=tt.filter(Ge=>Ge.lowStock)),tt}),ce=tt=>{if(!tt.batches||tt.batches.length===0)return{availableUnits:0,lowStock:!1};const Ge=new Date;Ge.setHours(0,0,0,0);const pt=tt.batches.filter(nn=>{if(!nn.expiryDate)return!0;try{return new Date(nn.expiryDate)>=Ge}catch{return!0}}).reduce((nn,yn)=>nn+(yn.availableUnits||0),0),ht=tt.alertUnits||0,Nt=pt<ht;return{availableUnits:pt,lowStock:Nt}},J=async()=>{try{o.value=!0,i.value=null;const{data:tt,error:Ge}=await Vw();Ge?(i.value=Ge.response?.data?.error||Ge.message||"Failed to load inventory",r.value=[],n("Error loading inventory")):(r.value=(tt||[]).map(pt=>{const ht=ce(pt),Nt=ie(pt);return{...pt,availableUnits:ht.availableUnits,lowStock:ht.lowStock,hasExpiredBatchesWithInventory:Nt}}),await Ie())}catch(tt){console.error("Error in loadInventory:",tt),i.value=tt.message||"An unexpected error occurred",r.value=[],n("Error loading inventory")}finally{o.value=!1}},se=()=>{m.value=!0},G=(tt=null)=>{if(x.value=tt,tt){const Ge=r.value.find(pt=>pt.id===tt);Ge?T.value={id:Ge.id,productName:Ge.productName,marketer:Ge.marketer}:T.value=null}else T.value=null;h.value=!0},D=tt=>{let Ge=null,pt=null;for(const ht of r.value)if(ht.batches&&(Ge=ht.batches.find(Nt=>Nt.id===tt),Ge)){pt=ht;break}Ge?(k.value={...Ge,medicineId:pt.id,medicineName:pt.productName,medicineMarketer:pt.marketer},w.value=!0):n("Batch not found")},j=tt=>{let Ge=null;for(const pt of r.value)if(pt.batches){const ht=pt.batches.find(Nt=>Nt.id===tt);if(ht){Ge={...ht,medicineName:pt.productName||"Unknown",medicineId:pt.id,unitsPerPack:ht.unitsPerPack||1};break}}Ge?(k.value=Ge,v.value=!0):n("Batch not found")},ne=()=>{y.value=!0},H=()=>{m.value=!1},te=()=>{m.value=!1,J()},Y=()=>{h.value=!1,x.value=null,T.value=null},K=()=>{h.value=!1,x.value=null,T.value=null,J()},X=()=>{v.value=!1,k.value=null},ae=()=>{v.value=!1,k.value=null,J()},oe=()=>{y.value=!1},W=()=>{y.value=!1,J(),t("Medicine created successfully")},de=tt=>{U.value=tt,g.value=!0},Ae=tt=>{S.value=tt,b.value=!0},Ce=()=>{g.value=!1,U.value=null},De=tt=>{const Ge=r.value.findIndex(pt=>pt.id===tt.id);Ge!==-1&&(r.value[Ge]={...r.value[Ge],...tt}),g.value=!1,U.value=null,J(),t("Medicine updated successfully")},xe=()=>{w.value=!1,k.value=null},ke=()=>{w.value=!1,k.value=null,J()},Ee=()=>{b.value=!1,S.value=null},ye=()=>{b.value=!1,S.value=null,J()},we=tt=>E.value.has(tt)&&E.value.get(tt)===!0,at=tt=>!!(tt.purchaseInvoiceId||tt.purchaseInvoiceIdentifier),Je=tt=>we(tt.id)?"Cannot delete: Inventory is used in a bill":at(tt)?"Cannot delete: Batch is linked to a purchase invoice. Remove from invoice view instead.":"Delete Inventory",rt=tt=>C.value.has(tt),it=async tt=>{if(E.value.has(tt))return E.value.get(tt);const{data:Ge,error:pt}=await uEe(tt);if(pt)return console.error("Error checking batch usage:",pt),E.value.set(tt,!1),!1;const ht=Ge?.isUsed||!1;return E.value.set(tt,ht),ht},Ie=async()=>{E.value.clear();const tt=[];r.value.forEach(pt=>{pt.batches&&pt.batches.length>0&&pt.batches.forEach(ht=>{tt.push(ht.id)})});const Ge=tt.map(pt=>it(pt));await Promise.all(Ge)},Ve=async tt=>{let Ge=null;for(const ht of r.value)if(ht.batches&&(Ge=ht.batches.find(Nt=>Nt.id===tt),Ge))break;if(!Ge){n("Batch not found");return}if(at(Ge)){n("Cannot delete batch: Batch is linked to a purchase invoice. Remove from invoice view instead.");return}if(await it(tt)){n("Cannot delete batch: This inventory is being used in one or more bills");return}F.value=Ge,P.value=!0},ft=()=>{P.value=!1,F.value=null},Ft=async tt=>{if(tt)try{C.value.add(tt);const{data:Ge,error:pt}=await cEe(tt);if(pt){const ht=pt.message||"Failed to delete batch";n(ht);return}E.value.delete(tt),P.value=!1,F.value=null,t("Batch deleted successfully"),await J()}catch(Ge){console.error("Error deleting batch:",Ge),n("An unexpected error occurred while deleting the batch")}finally{C.value.delete(tt)}};return cn(()=>{J()}),(tt,Ge)=>{const pt=I("v-alert"),ht=I("v-tab"),Nt=I("v-tabs"),nn=I("v-icon"),yn=I("v-card-text"),qn=I("v-card"),$t=I("v-btn"),Tt=I("v-tooltip"),ut=I("v-col"),kt=I("v-row"),Zt=I("v-progress-circular"),je=I("v-text-field"),Ke=I("v-checkbox"),wt=I("v-chip"),Vt=I("v-card-title"),qt=I("v-divider"),vt=I("v-table"),Kt=I("v-lazy"),Pt=I("v-window-item"),Gn=I("v-window"),Nn=I("v-main"),On=I("v-dialog");return R(),me(ze,null,[l(Nn,null,{default:u(()=>[s.value?(R(),ve(pt,{key:0,type:"error",dismissible:"","onClick:close":Ge[0]||(Ge[0]=Yt=>s.value=null),class:"ma-3"},{default:u(()=>[O(q(s.value),1)]),_:1})):_e("",!0),l(kt,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[l(ut,{cols:"12"},{default:u(()=>[l(qn,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center justify-space-between"},{default:u(()=>[p("div",tQe,[l(Nt,{modelValue:a.value,"onUpdate:modelValue":Ge[1]||(Ge[1]=Yt=>a.value=Yt),color:"primary","align-tabs":"start"},{default:u(()=>[l(ht,{value:0},{default:u(()=>[...Ge[17]||(Ge[17]=[O("Inventory",-1)])]),_:1})]),_:1},8,["modelValue"]),r.value&&r.value.length>0?(R(),ve(qn,{key:0,rounded:"0",class:"ml-3",color:"warning",variant:"tonal",style:{height:"fit-content"}},{default:u(()=>[l(yn,{class:"py-1 px-2"},{default:u(()=>[p("div",nQe,[l(nn,{color:"warning",size:"small",class:"mr-2"},{default:u(()=>[...Ge[18]||(Ge[18]=[O("mdi-alert-circle",-1)])]),_:1}),Ge[19]||(Ge[19]=p("span",{class:"text-body-2 font-weight-medium"}," Before reconciliation, ensure no inventory blocked for draft bills. ",-1))])]),_:1})]),_:1})):_e("",!0)]),p("div",aQe,[l(xn,{permission:"pharmacy.inventory.manage"},{default:u(()=>[l($t,{color:"primary","prepend-icon":"mdi-magnify-plus",onClick:se,style:{"margin-right":"2px"}},{default:u(()=>[...Ge[20]||(Ge[20]=[O(" Search & Add Medicine ",-1)])]),_:1})]),_:1}),l(xn,{permission:"pharmacy.inventory.manage"},{default:u(()=>[l($t,{color:"primary",variant:"outlined","prepend-icon":"mdi-plus-box",onClick:ne,style:{"margin-right":"2px"}},{default:u(()=>[...Ge[21]||(Ge[21]=[O(" Create & Add Medicine ",-1)])]),_:1})]),_:1}),l(Tt,{text:"Refresh Inventory"},{activator:u(({props:Yt})=>[l($t,Fe({rounded:"x-small",onClick:J,size:"small"},Yt,{loading:o.value,class:"btn-hover-enhanced ml-1"}),{default:u(()=>[l(nn,null,{default:u(()=>[...Ge[22]||(Ge[22]=[O("mdi-refresh",-1)])]),_:1})]),_:1},16,["loading"])]),_:1})])]),_:1})]),_:1})]),_:1}),l(Gn,{modelValue:a.value,"onUpdate:modelValue":Ge[7]||(Ge[7]=Yt=>a.value=Yt),class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[l(Pt,{value:0,style:{height:"100%"}},{default:u(()=>[p("div",rQe,[o.value?(R(),ve(kt,{key:0,"no-gutters":""},{default:u(()=>[l(ut,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50vh"}},{default:u(()=>[p("div",sQe,[l(Zt,{indeterminate:"",color:"primary",size:"64"}),Ge[23]||(Ge[23]=p("div",{class:"mt-4 text-subtitle-1"},"Loading inventory...",-1))])]),_:1})]),_:1})):i.value?(R(),ve(kt,{key:1,"no-gutters":""},{default:u(()=>[l(ut,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50vh"}},{default:u(()=>[p("div",oQe,[l(nn,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...Ge[24]||(Ge[24]=[O("mdi-alert-circle",-1)])]),_:1}),Ge[26]||(Ge[26]=p("div",{class:"text-h6 mb-2"},"Failed to Load Inventory",-1)),p("div",iQe,q(i.value),1),l($t,{color:"primary",onClick:J,"prepend-icon":"mdi-refresh"},{default:u(()=>[...Ge[25]||(Ge[25]=[O(" Try Again ",-1)])]),_:1})])]),_:1})]),_:1})):r.value&&r.value.length===0?(R(),ve(kt,{key:2,"no-gutters":""},{default:u(()=>[l(ut,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50vh"}},{default:u(()=>[p("div",lQe,[l(nn,{size:"64",color:"grey",class:"mb-4"},{default:u(()=>[...Ge[27]||(Ge[27]=[O("mdi-pill-off",-1)])]),_:1}),Ge[29]||(Ge[29]=p("div",{class:"text-h6 mb-2"},"No Pharmacy Inventory",-1)),Ge[30]||(Ge[30]=p("div",{class:"text-body-2 text-medium-emphasis mb-4"},"Add medicines to start managing inventory",-1)),l(xn,{permission:"pharmacy.inventory.manage"},{default:u(()=>[l($t,{color:"primary",onClick:se,"prepend-icon":"mdi-magnify-plus"},{default:u(()=>[...Ge[28]||(Ge[28]=[O(" Search & Add Medicine ",-1)])]),_:1})]),_:1})])]),_:1})]),_:1})):r.value&&r.value.length>0?(R(),me(ze,{key:3},[l(kt,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(ut,{cols:"12",class:"d-flex justify-center align-center flex-wrap gap-2"},{default:u(()=>[l(je,{modelValue:c.value,"onUpdate:modelValue":Ge[2]||(Ge[2]=Yt=>c.value=Yt),placeholder:"Filter by medicine name...",density:"compact",variant:"outlined",clearable:"","hide-details":"","prepend-inner-icon":"mdi-magnify",class:"filter-input",style:{"max-width":"300px",width:"100%"}},null,8,["modelValue"]),l(je,{modelValue:A.value,"onUpdate:modelValue":Ge[3]||(Ge[3]=Yt=>A.value=Yt),placeholder:"Filter by group...",density:"compact",variant:"outlined",clearable:"","hide-details":"","prepend-inner-icon":"mdi-tag",class:"filter-input",style:{"max-width":"300px",width:"100%"}},null,8,["modelValue"]),l(Ke,{modelValue:d.value,"onUpdate:modelValue":Ge[4]||(Ge[4]=Yt=>d.value=Yt),label:"Expired batches only",density:"compact","hide-details":"",color:"error",class:"filter-checkbox"},null,8,["modelValue"]),l(Ke,{modelValue:f.value,"onUpdate:modelValue":Ge[5]||(Ge[5]=Yt=>f.value=Yt),label:"Low stock only",density:"compact","hide-details":"",color:"warning",class:"filter-checkbox"},null,8,["modelValue"])]),_:1})]),_:1}),c.value&&c.value.trim()!==""||A.value&&A.value.trim()!==""||d.value||f.value?(R(),me(ze,{key:0},[Z.value.length===0?(R(),ve(kt,{key:0,"no-gutters":""},{default:u(()=>[l(ut,{cols:"12",class:"d-flex justify-center align-center",style:{height:"40vh"}},{default:u(()=>[p("div",uQe,[l(nn,{size:"64",color:"grey",class:"mb-4"},{default:u(()=>[...Ge[31]||(Ge[31]=[O("mdi-magnify-remove",-1)])]),_:1}),Ge[33]||(Ge[33]=p("div",{class:"text-h6 mb-2"},"No medicines found",-1)),p("div",cQe,[c.value&&c.value.trim()!==""?(R(),me("span",dQe,' No medicines match "'+q(c.value)+'" ',1)):(R(),me("span",AQe," No medicines match the selected filters "))]),l($t,{color:"primary",onClick:Ge[6]||(Ge[6]=Yt=>{c.value="",A.value="",d.value=!1,f.value=!1}),"prepend-icon":"mdi-filter-remove"},{default:u(()=>[...Ge[32]||(Ge[32]=[O(" Clear All Filters ",-1)])]),_:1})])]),_:1})]),_:1})):_e("",!0)],64)):_e("",!0),(R(!0),me(ze,null,Wt(Z.value,Yt=>(R(),ve(Kt,{key:Yt?.id||Math.random(),options:{threshold:.1,rootMargin:"50px"}},{default:u(()=>[Yt?(R(),ve(qn,{key:0,style:{textAlign:"left"},density:"compact",class:"mb-1 mx-2 card-enhanced card-status-default",rounded:"lg"},{default:u(()=>[l(Vt,{class:"pb-0 pt-2"},{default:u(()=>[p("div",fQe,[p("div",mQe,[p("div",hQe,[p("span",vQe,q(Yt.productName||"Unknown Medicine"),1),l(xn,{permission:"pharmacy.inventory.manage"},{default:u(()=>[l(Tt,{text:"Edit Medicine"},{activator:u(({props:Tn})=>[l(nn,Fe({size:"x-small"},{ref_for:!0},Tn,{class:"edit-icon flex-shrink-0 ml-1",onClick:Te=>de(Yt),tabindex:"-1"}),{default:u(()=>[...Ge[34]||(Ge[34]=[O(" mdi-pencil ",-1)])]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024),l(xn,{permission:"pharmacy.inventory.manage"},{default:u(()=>[l(Tt,{text:"Remove Medicine from Pharmacy"},{activator:u(({props:Tn})=>[l(nn,Fe({size:"x-small"},{ref_for:!0},Tn,{class:"edit-icon flex-shrink-0 ml-1",onClick:Te=>Ae(Yt),tabindex:"-1",color:"error"}),{default:u(()=>[...Ge[35]||(Ge[35]=[O(" mdi-delete-outline ",-1)])]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024)]),p("div",pQe,[Yt.group&&Yt.group.trim()!==""?(R(),ve(wt,{key:0,color:"info",size:"small",variant:"tonal",class:"mr-1 mb-1"},{default:u(()=>[O(q(Yt.group),1)]),_:2},1024)):_e("",!0),l(wt,{color:N(Yt.availableUnits),size:"small",variant:"tonal",class:"mr-1 mb-1"},{default:u(()=>[l(nn,{size:"small",class:"mr-1"},{default:u(()=>[...Ge[36]||(Ge[36]=[O("mdi-package-variant",-1)])]),_:1}),O(" "+q(Yt.availableUnits||0)+" units ",1)]),_:2},1032,["color"]),Yt.lowStock?(R(),ve(wt,{key:1,color:"warning",size:"small",variant:"tonal",class:"mr-1 mb-1"},{default:u(()=>[l(nn,{size:"small",class:"mr-1"},{default:u(()=>[...Ge[37]||(Ge[37]=[O("mdi-alert",-1)])]),_:1}),Ge[38]||(Ge[38]=O(" Low Stock ",-1))]),_:1})):_e("",!0),!Yt.hsnCode||Yt.hsnCode.trim()===""?(R(),ve(wt,{key:2,color:"warning",size:"small",variant:"tonal",class:"mr-1 mb-1"},{default:u(()=>[l(nn,{size:"small",class:"mr-1"},{default:u(()=>[...Ge[39]||(Ge[39]=[O("mdi-alert-circle",-1)])]),_:1}),Ge[40]||(Ge[40]=O(" HSN Missing ",-1))]),_:1})):_e("",!0)])]),p("div",gQe,[l(xn,{permission:"pharmacy.inventory.manage"},{default:u(()=>[l($t,{color:"primary",variant:"outlined","prepend-icon":"mdi-plus",size:"small",onClick:Tn=>G(Yt.id)},{default:u(()=>[...Ge[41]||(Ge[41]=[O(" Add Inventory ",-1)])]),_:1},8,["onClick"])]),_:2},1024)])])]),_:2},1024),Yt.batches&&Yt.batches.length>0?(R(),ve(qt,{key:0})):_e("",!0),l(yn,{class:ct({"pt-1 pb-1":Yt.batches&&Yt.batches.length>0,"pa-0":!Yt.batches||Yt.batches.length===0})},{default:u(()=>[Yt.batches&&Yt.batches.length>0?(R(),me("div",yQe,[l(vt,{density:"compact",class:"batch-table compact-table"},{default:u(()=>[Ge[42]||(Ge[42]=p("thead",null,[p("tr",null,[p("th",{class:"text-left"},"Batch #"),p("th",{class:"text-left"},"Expiry"),p("th",{class:"text-left"},"InwardBillID"),p("th",{class:"text-left"},"Location"),p("th",{class:"text-right"},"MRP/pack"),p("th",{class:"text-right"},"Cost/pack"),p("th",{class:"text-right"},"Discount %"),p("th",{class:"text-right"},"Available Quantity"),p("th",{class:"text-center"},"Actions")])],-1)),p("tbody",null,[(R(!0),me(ze,null,Wt(Yt.batches,Tn=>(R(),me("tr",{key:Tn.id,class:ct({"batch-expired":L(Tn.expiryDate)})},[p("td",null,q(Tn.batchNumber),1),p("td",null,[p("span",{class:ct({"text-error":L(Tn.expiryDate)})},q(le(Tn.expiryDate)),3)]),p("td",null,q(Tn.inwardBillId||Tn.purchaseInvoiceIdentifier||"-"),1),p("td",null,q(Tn.location||"-"),1),p("td",_Qe,q(Q(Tn.mrp)),1),p("td",wQe,q(Q(Tn.cost)),1),p("td",bQe,q(Tn.discountPercentage||0)+"%",1),p("td",xQe,[l(wt,{color:Tn.availableUnits>0?"success":"error",size:"small",variant:"tonal"},{default:u(()=>[O(q(Tn.availableUnits||0),1)]),_:2},1032,["color"])]),p("td",CQe,[l(xn,{permission:"pharmacy.inventory.manage",tag:"span"},{default:u(()=>[l(Tt,{text:"Edit Purchased Inventory"},{activator:u(({props:Te})=>[l($t,Fe({icon:"mdi-pencil",size:"small",variant:"text",onClick:He=>D(Tn.id),class:"mr-1"},{ref_for:!0},Te),null,16,["onClick"])]),_:2},1024)]),_:2},1024),l(xn,{permission:"pharmacy.inventory.manage",tag:"span"},{default:u(()=>[l(Tt,{text:"Manage Inventory"},{activator:u(({props:Te})=>[l($t,Fe({icon:"mdi-swap-horizontal",size:"small",variant:"text",onClick:He=>j(Tn.id)},{ref_for:!0},Te,{class:"mr-1"}),null,16,["onClick"])]),_:2},1024)]),_:2},1024),l(xn,{permission:"pharmacy.inventory.manage",tag:"span"},{default:u(()=>[l(Tt,{text:Je(Tn)},{activator:u(({props:Te})=>[l($t,Fe({icon:"mdi-delete-outline",size:"small",variant:"text",onClick:He=>Ve(Tn.id),disabled:we(Tn.id)||at(Tn)||rt(Tn.id),loading:rt(Tn.id),color:"error"},{ref_for:!0},Te),null,16,["onClick","disabled","loading"])]),_:2},1032,["text"])]),_:2},1024)])],2))),128))])]),_:2},1024)])):(R(),me("div",SQe,' No inventory available. Click on "Add Inventory" to add inventory. '))]),_:2},1032,["class"])]),_:2},1024)):_e("",!0)]),_:2},1024))),128))],64)):_e("",!0)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(On,{modelValue:m.value,"onUpdate:modelValue":Ge[8]||(Ge[8]=Yt=>m.value=Yt),persistent:"","max-width":"700px"},{default:u(()=>[m.value?(R(),ve(x9e,{key:0,onClose:H,onMedicineAdded:te})):_e("",!0)]),_:1},8,["modelValue"]),l(On,{modelValue:h.value,"onUpdate:modelValue":Ge[9]||(Ge[9]=Yt=>h.value=Yt),persistent:"","max-width":"800px"},{default:u(()=>[h.value?(R(),ve(N9e,{key:0,"medicine-id":x.value,"medicine-info":T.value,onClose:Y,onBatchCreated:K},null,8,["medicine-id","medicine-info"])):_e("",!0)]),_:1},8,["modelValue"]),l(On,{modelValue:v.value,"onUpdate:modelValue":Ge[10]||(Ge[10]=Yt=>v.value=Yt),persistent:"","max-width":"600px"},{default:u(()=>[v.value&&k.value?(R(),ve(X9e,{key:0,"batch-id":k.value.id,batch:k.value,onClose:X,onInventoryAdded:ae},null,8,["batch-id","batch"])):_e("",!0)]),_:1},8,["modelValue"]),l(On,{modelValue:y.value,"onUpdate:modelValue":Ge[11]||(Ge[11]=Yt=>y.value=Yt),persistent:"","max-width":"40%"},{default:u(()=>[y.value?(R(),ve(wT,{key:0,mode:"pharmacy",onClose:oe,onMedicineCreated:W})):_e("",!0)]),_:1},8,["modelValue"]),l(On,{modelValue:g.value,"onUpdate:modelValue":Ge[12]||(Ge[12]=Yt=>g.value=Yt),persistent:"","max-width":"40%"},{default:u(()=>[g.value&&U.value?(R(),ve(bH,{key:0,medicine:U.value,mode:"pharmacy",onClose:Ce,"onUpdate:medicine":De},null,8,["medicine"])):_e("",!0)]),_:1},8,["modelValue"]),l(On,{modelValue:w.value,"onUpdate:modelValue":Ge[13]||(Ge[13]=Yt=>w.value=Yt),persistent:"","max-width":"800px"},{default:u(()=>[w.value&&k.value?(R(),ve(K9e,{key:0,"batch-id":k.value.id,batch:k.value,onClose:xe,onBatchUpdated:ke},null,8,["batch-id","batch"])):_e("",!0)]),_:1},8,["modelValue"]),l(On,{modelValue:b.value,"onUpdate:modelValue":Ge[14]||(Ge[14]=Yt=>b.value=Yt),persistent:"","max-width":"30%"},{default:u(()=>[b.value&&S.value?(R(),ve(eQe,{key:0,medicine:S.value,onClose:Ee,onMedicineRemoved:ye},null,8,["medicine"])):_e("",!0)]),_:1},8,["modelValue"]),l(On,{modelValue:P.value,"onUpdate:modelValue":Ge[16]||(Ge[16]=Yt=>P.value=Yt),persistent:"","max-width":"500px"},{default:u(()=>[l(qn,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(kt,{"no-gutters":""},{default:u(()=>[l(ut,{cols:"12"},{default:u(()=>[l(qn,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(kt,{"no-gutters":""},{default:u(()=>[l(ut,{cols:"11"},{default:u(()=>[l(Vt,{class:"pa-0 pl-2"},{default:u(()=>[...Ge[43]||(Ge[43]=[O("Delete Inventory Batch",-1)])]),_:1})]),_:1}),l(ut,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l($t,{icon:"",size:"x-small",onClick:ft,disabled:rt(F.value?.id)},{default:u(()=>[l(nn,null,{default:u(()=>[...Ge[44]||(Ge[44]=[O("mdi-close",-1)])]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(kt,{"no-gutters":""},{default:u(()=>[l(ut,{cols:"12"},{default:u(()=>[l(qn,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(kt,{"no-gutters":""},{default:u(()=>[l(ut,{cols:"12"},{default:u(()=>[l(yn,{class:"text-left"},{default:u(()=>[Ge[50]||(Ge[50]=O(" Are you sure you want to delete this inventory batch? ",-1)),Ge[51]||(Ge[51]=p("span",{class:"text-error font-weight-bold"}," This action cannot be undone. The batch and all associated inventory data will be permanently deleted. ",-1)),Ge[52]||(Ge[52]=p("br",null,null,-1)),Ge[53]||(Ge[53]=p("br",null,null,-1)),F.value?(R(),me("span",EQe,[Ge[45]||(Ge[45]=p("strong",null,"Batch #:",-1)),O(" "+q(F.value.batchNumber),1),Ge[46]||(Ge[46]=p("br",null,null,-1)),Ge[47]||(Ge[47]=p("strong",null,"Expiry:",-1)),O(" "+q(le(F.value.expiryDate)),1),Ge[48]||(Ge[48]=p("br",null,null,-1)),Ge[49]||(Ge[49]=p("strong",null,"Available Units:",-1)),O(" "+q(F.value.availableUnits||0),1)])):_e("",!0)]),_:1})]),_:1})]),_:1}),l(qt),l(kt,{"no-gutters":""},{default:u(()=>[l(ut,{cols:"12",class:"pa-3 d-flex justify-end"},{default:u(()=>[l($t,{variant:"outlined",color:"error",onClick:Ge[15]||(Ge[15]=Yt=>Ft(F.value?.id)),loading:rt(F.value?.id),disabled:!F.value||rt(F.value?.id),class:"mr-2"},{default:u(()=>[...Ge[54]||(Ge[54]=[O(" Delete ",-1)])]),_:1},8,["loading","disabled"]),l($t,{variant:"flat",color:"primary",onClick:ft,disabled:rt(F.value?.id)},{default:u(()=>[...Ge[55]||(Ge[55]=[O(" Cancel ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},kQe=Xt(BQe,[["__scopeId","data-v-68b893f0"]]),TQe={__name:"pharmacy-supplier-form",props:{supplier:{type:Object,default:null}},emits:["close","saved"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ra(),o=M(!0),i=M(!1),c=M(!1),A=M(null),d=M({identifier:"",supplierName:"",gstin:"",address:"",contactNumber:""});We(()=>n.supplier,h=>{h&&(d.value={...h})},{immediate:!0});const f=()=>{o.value=!1,a("close")},m=async()=>{if(!A.value)return;const{valid:h}=await A.value.validate();if(h){c.value=!0;try{const{data:v,error:y}=await dEe(d.value);if(y)throw y;r("Supplier created successfully"),a("saved"),f()}catch(v){console.error("Error creating supplier:",v),s(v.response?.data?.error||v.message||"Failed to create supplier")}finally{c.value=!1}}};return(h,v)=>{const y=I("v-icon"),g=I("v-btn"),w=I("v-card-title"),b=I("v-divider"),x=I("v-text-field"),T=I("v-textarea"),U=I("v-form"),k=I("v-card-text"),S=I("v-spacer"),E=I("v-card-actions"),C=I("v-card"),P=I("v-dialog");return R(),ve(P,{modelValue:o.value,"onUpdate:modelValue":v[6]||(v[6]=F=>o.value=F),persistent:"","max-width":"600px"},{default:u(()=>[l(C,{rounded:"lg"},{default:u(()=>[l(w,{class:"d-flex align-center justify-space-between"},{default:u(()=>[v[8]||(v[8]=p("span",null,"Add Supplier",-1)),l(g,{onClick:f,variant:"text",size:"small"},{default:u(()=>[l(y,null,{default:u(()=>[...v[7]||(v[7]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(b),l(k,{class:"py-2"},{default:u(()=>[l(U,{ref_key:"form",ref:A,modelValue:i.value,"onUpdate:modelValue":v[5]||(v[5]=F=>i.value=F)},{default:u(()=>[l(x,{modelValue:d.value.identifier,"onUpdate:modelValue":v[0]||(v[0]=F=>d.value.identifier=F),label:"Identifier",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-identifier",class:"mb-1"},null,8,["modelValue"]),l(x,{modelValue:d.value.supplierName,"onUpdate:modelValue":v[1]||(v[1]=F=>d.value.supplierName=F),label:"Supplier Name *",variant:"outlined",density:"compact",rules:[F=>!!F||"Supplier name is required"],"prepend-inner-icon":"mdi-account",class:"mb-1"},null,8,["modelValue","rules"]),l(x,{modelValue:d.value.gstin,"onUpdate:modelValue":v[2]||(v[2]=F=>d.value.gstin=F),label:"GSTIN *",variant:"outlined",density:"compact",rules:[F=>!!F||"GSTIN is required"],"prepend-inner-icon":"mdi-card-account-details",class:"mb-1"},null,8,["modelValue","rules"]),l(T,{modelValue:d.value.address,"onUpdate:modelValue":v[3]||(v[3]=F=>d.value.address=F),label:"Address",variant:"outlined",density:"compact",rows:"2","prepend-inner-icon":"mdi-map-marker",class:"mb-1"},null,8,["modelValue"]),l(x,{modelValue:d.value.contactNumber,"onUpdate:modelValue":v[4]||(v[4]=F=>d.value.contactNumber=F),label:"Contact Number",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-phone"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),l(b),l(E,{class:"pa-3"},{default:u(()=>[l(S),l(g,{onClick:f},{default:u(()=>[...v[9]||(v[9]=[O("Cancel",-1)])]),_:1}),l(g,{color:"primary",onClick:m,disabled:!i.value||c.value,loading:c.value},{default:u(()=>[...v[10]||(v[10]=[O(" Save ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},IQe={__name:"pharmacy-edit-supplier",props:{supplier:{type:Object,required:!0}},emits:["close","saved"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ra(),o=M(!0),i=M(!1),c=M(!1),A=M(null),d=M({identifier:"",supplierName:"",gstin:"",address:"",contactNumber:""});We(()=>n.supplier,h=>{h&&(d.value={identifier:h.identifier||"",supplierName:h.supplierName||"",gstin:h.gstin||"",address:h.address||"",contactNumber:h.contactNumber||""})},{immediate:!0});const f=()=>{o.value=!1,a("close")},m=async()=>{if(!A.value)return;const{valid:h}=await A.value.validate();if(h){c.value=!0;try{const{data:v,error:y}=await AEe(n.supplier.id,d.value);if(y)throw y;r("Supplier updated successfully"),a("saved"),f()}catch(v){console.error("Error updating supplier:",v),s(v.response?.data?.error||v.message||"Failed to update supplier")}finally{c.value=!1}}};return(h,v)=>{const y=I("v-icon"),g=I("v-btn"),w=I("v-card-title"),b=I("v-divider"),x=I("v-text-field"),T=I("v-textarea"),U=I("v-form"),k=I("v-card-text"),S=I("v-spacer"),E=I("v-card-actions"),C=I("v-card"),P=I("v-dialog");return R(),ve(P,{modelValue:o.value,"onUpdate:modelValue":v[6]||(v[6]=F=>o.value=F),persistent:"","max-width":"600px"},{default:u(()=>[l(C,{rounded:"lg"},{default:u(()=>[l(w,{class:"d-flex align-center justify-space-between"},{default:u(()=>[v[8]||(v[8]=p("span",null,"Edit Supplier",-1)),l(g,{onClick:f,variant:"text",size:"small"},{default:u(()=>[l(y,null,{default:u(()=>[...v[7]||(v[7]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(b),l(k,{class:"py-2"},{default:u(()=>[l(U,{ref_key:"form",ref:A,modelValue:i.value,"onUpdate:modelValue":v[5]||(v[5]=F=>i.value=F)},{default:u(()=>[l(x,{modelValue:d.value.identifier,"onUpdate:modelValue":v[0]||(v[0]=F=>d.value.identifier=F),label:"Identifier",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-identifier",class:"mb-1"},null,8,["modelValue"]),l(x,{modelValue:d.value.supplierName,"onUpdate:modelValue":v[1]||(v[1]=F=>d.value.supplierName=F),label:"Supplier Name *",variant:"outlined",density:"compact",rules:[F=>!!F||"Supplier name is required"],"prepend-inner-icon":"mdi-account",class:"mb-1"},null,8,["modelValue","rules"]),l(x,{modelValue:d.value.gstin,"onUpdate:modelValue":v[2]||(v[2]=F=>d.value.gstin=F),label:"GSTIN *",variant:"outlined",density:"compact",rules:[F=>!!F||"GSTIN is required"],"prepend-inner-icon":"mdi-card-account-details",class:"mb-1"},null,8,["modelValue","rules"]),l(T,{modelValue:d.value.address,"onUpdate:modelValue":v[3]||(v[3]=F=>d.value.address=F),label:"Address",variant:"outlined",density:"compact",rows:"2","prepend-inner-icon":"mdi-map-marker",class:"mb-1"},null,8,["modelValue"]),l(x,{modelValue:d.value.contactNumber,"onUpdate:modelValue":v[4]||(v[4]=F=>d.value.contactNumber=F),label:"Contact Number",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-phone"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),l(b),l(E,{class:"pa-3"},{default:u(()=>[l(S),l(g,{onClick:f},{default:u(()=>[...v[9]||(v[9]=[O("Cancel",-1)])]),_:1}),l(g,{color:"primary",onClick:m,disabled:!i.value||c.value,loading:c.value},{default:u(()=>[...v[10]||(v[10]=[O(" Update ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},FQe={__name:"pharmacy-purchase-invoice-form",props:{supplierId:{type:Number,default:null}},emits:["close","saved"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ra(),o=M(!0),i=M(!1),c=M(!1),A=M(null),d=M([]),f=M({supplierId:null,pharmacyPurchaseInvoiceDate:"",pharmacyPurchaseInvoiceIdentifier:"",status:1,additionalDiscount:0,paymentDueDate:"",paymentDate:""}),m=[{label:"Draft",value:1},{label:"Finalized",value:2}];We(()=>n.supplierId,y=>{y&&(f.value.supplierId=y)},{immediate:!0}),cn(async()=>{const{data:y}=await TH();d.value=y||[]});const h=()=>{o.value=!1,a("close")},v=async()=>{if(!A.value)return;const{valid:y}=await A.value.validate();if(y){c.value=!0;try{const{data:g,error:w}=await mEe(f.value);if(w)throw w;r("Purchase invoice created successfully"),a("saved"),h()}catch(g){console.error("Error creating purchase invoice:",g),s(g.response?.data?.error||g.message||"Failed to create purchase invoice")}finally{c.value=!1}}};return(y,g)=>{const w=I("v-icon"),b=I("v-btn"),x=I("v-card-title"),T=I("v-divider"),U=I("v-select"),k=I("v-col"),S=I("v-text-field"),E=I("v-row"),C=I("v-form"),P=I("v-card-text"),F=I("v-spacer"),N=I("v-card-actions"),L=I("v-card"),ie=I("v-dialog");return R(),ve(ie,{modelValue:o.value,"onUpdate:modelValue":g[8]||(g[8]=le=>o.value=le),persistent:"","max-width":"700px"},{default:u(()=>[l(L,{rounded:"lg"},{default:u(()=>[l(x,{class:"d-flex align-center justify-space-between"},{default:u(()=>[g[10]||(g[10]=p("span",null,"Create Purchase Invoice",-1)),l(b,{onClick:h,variant:"text",size:"small"},{default:u(()=>[l(w,null,{default:u(()=>[...g[9]||(g[9]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(T),l(P,{class:"py-1"},{default:u(()=>[l(C,{ref_key:"form",ref:A,modelValue:i.value,"onUpdate:modelValue":g[7]||(g[7]=le=>i.value=le)},{default:u(()=>[l(E,{dense:""},{default:u(()=>[l(k,{cols:"12"},{default:u(()=>[l(U,{modelValue:f.value.supplierId,"onUpdate:modelValue":g[0]||(g[0]=le=>f.value.supplierId=le),items:d.value,"item-title":"supplierName","item-value":"id",label:"Supplier *",variant:"outlined",density:"compact",rules:[le=>!!le||"Supplier is required"],"prepend-inner-icon":"mdi-account",disabled:!!e.supplierId},null,8,["modelValue","items","rules","disabled"])]),_:1}),l(k,{cols:"12",md:"6"},{default:u(()=>[l(S,{modelValue:f.value.pharmacyPurchaseInvoiceDate,"onUpdate:modelValue":g[1]||(g[1]=le=>f.value.pharmacyPurchaseInvoiceDate=le),type:"date",label:"Invoice Date *",variant:"outlined",density:"compact",rules:[le=>!!le||"Invoice date is required"],"prepend-inner-icon":"mdi-calendar"},null,8,["modelValue","rules"])]),_:1}),l(k,{cols:"12",md:"6"},{default:u(()=>[l(S,{modelValue:f.value.pharmacyPurchaseInvoiceIdentifier,"onUpdate:modelValue":g[2]||(g[2]=le=>f.value.pharmacyPurchaseInvoiceIdentifier=le),label:"Invoice Identifier *",variant:"outlined",density:"compact",rules:[le=>!!le||"Invoice identifier is required"],"prepend-inner-icon":"mdi-file-document"},null,8,["modelValue","rules"])]),_:1}),l(k,{cols:"12",md:"6"},{default:u(()=>[l(U,{modelValue:f.value.status,"onUpdate:modelValue":g[3]||(g[3]=le=>f.value.status=le),items:m,"item-title":"label","item-value":"value",label:"Status",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-check-circle"},null,8,["modelValue"])]),_:1}),l(k,{cols:"12",md:"6"},{default:u(()=>[l(S,{modelValue:f.value.additionalDiscount,"onUpdate:modelValue":g[4]||(g[4]=le=>f.value.additionalDiscount=le),modelModifiers:{number:!0},label:"Additional Discount ()",variant:"outlined",density:"compact",type:"number",rules:[le=>le==null||le>=0||"Additional discount cannot be negative"],"prepend-inner-icon":"mdi-currency-inr"},null,8,["modelValue","rules"])]),_:1}),l(k,{cols:"12",md:"6"},{default:u(()=>[l(S,{modelValue:f.value.paymentDueDate,"onUpdate:modelValue":g[5]||(g[5]=le=>f.value.paymentDueDate=le),type:"date",label:"Payment Due Date",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-calendar-clock"},null,8,["modelValue"])]),_:1}),l(k,{cols:"12",md:"6"},{default:u(()=>[l(S,{modelValue:f.value.paymentDate,"onUpdate:modelValue":g[6]||(g[6]=le=>f.value.paymentDate=le),type:"date",label:"Payment Date",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-calendar-check"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(T),l(N,{class:"pa-3"},{default:u(()=>[l(F),l(b,{onClick:h},{default:u(()=>[...g[11]||(g[11]=[O("Cancel",-1)])]),_:1}),l(b,{color:"primary",onClick:v,disabled:!i.value||c.value,loading:c.value},{default:u(()=>[...g[12]||(g[12]=[O(" Create Invoice ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},PQe={class:"text-center py-4"},DQe={__name:"pharmacy-edit-purchase-invoice",props:{invoiceId:{type:Number,required:!0}},emits:["close","saved"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ra(),o=M(!0),i=M(!1),c=M(!1),A=M(!1),d=M(null),f=M({status:1,additionalDiscount:0,paymentDueDate:"",paymentDate:""}),m=[{label:"Draft",value:1},{label:"Finalized",value:2}],h=async()=>{A.value=!0;try{const{data:w,error:b}=await yg(n.invoiceId);if(b)throw b;f.value={status:w.status||1,additionalDiscount:w.additionalDiscount||0,paymentDueDate:w.paymentDueDate?v(w.paymentDueDate):"",paymentDate:w.paymentDate?v(w.paymentDate):""}}catch(w){console.error("Error loading invoice:",w),s(w.response?.data?.error||w.message||"Failed to load invoice")}finally{A.value=!1}};cn(()=>{h()});const v=w=>w?new Date(w*1e3).toISOString().split("T")[0]:"",y=()=>{o.value=!1,a("close")},g=async()=>{if(!d.value)return;const{valid:w}=await d.value.validate();if(w){c.value=!0;try{const{data:b,error:x}=await hEe(n.invoiceId,f.value);if(x)throw x;r("Purchase invoice updated successfully"),a("saved"),y()}catch(b){console.error("Error updating purchase invoice:",b),s(b.response?.data?.error||b.message||"Failed to update purchase invoice")}finally{c.value=!1}}};return(w,b)=>{const x=I("v-icon"),T=I("v-btn"),U=I("v-card-title"),k=I("v-divider"),S=I("v-progress-circular"),E=I("v-card-text"),C=I("v-select"),P=I("v-text-field"),F=I("v-form"),N=I("v-spacer"),L=I("v-card-actions"),ie=I("v-card"),le=I("v-dialog");return R(),ve(le,{modelValue:o.value,"onUpdate:modelValue":b[5]||(b[5]=Q=>o.value=Q),persistent:"","max-width":"600px"},{default:u(()=>[l(ie,{rounded:"lg"},{default:u(()=>[l(U,{class:"d-flex align-center justify-space-between"},{default:u(()=>[b[7]||(b[7]=p("span",null,"Edit Purchase Invoice",-1)),l(T,{onClick:y,variant:"text",size:"small"},{default:u(()=>[l(x,null,{default:u(()=>[...b[6]||(b[6]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(k),A.value?(R(),ve(E,{key:0,class:"py-2"},{default:u(()=>[p("div",PQe,[l(S,{indeterminate:"",color:"primary"})])]),_:1})):(R(),ve(E,{key:1,class:"py-2"},{default:u(()=>[l(F,{ref_key:"form",ref:d,modelValue:i.value,"onUpdate:modelValue":b[4]||(b[4]=Q=>i.value=Q)},{default:u(()=>[l(C,{modelValue:f.value.status,"onUpdate:modelValue":b[0]||(b[0]=Q=>f.value.status=Q),items:m,"item-title":"label","item-value":"value",label:"Status",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-check-circle",class:"mb-1"},null,8,["modelValue"]),l(P,{modelValue:f.value.additionalDiscount,"onUpdate:modelValue":b[1]||(b[1]=Q=>f.value.additionalDiscount=Q),modelModifiers:{number:!0},label:"Additional Discount ()",variant:"outlined",density:"compact",type:"number",rules:[Q=>Q==null||Q>=0||"Additional discount cannot be negative"],"prepend-inner-icon":"mdi-currency-inr",class:"mb-1"},null,8,["modelValue","rules"]),l(P,{modelValue:f.value.paymentDueDate,"onUpdate:modelValue":b[2]||(b[2]=Q=>f.value.paymentDueDate=Q),type:"date",label:"Payment Due Date",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-calendar-clock",class:"mb-1"},null,8,["modelValue"]),l(P,{modelValue:f.value.paymentDate,"onUpdate:modelValue":b[3]||(b[3]=Q=>f.value.paymentDate=Q),type:"date",label:"Payment Date",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-calendar-check"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})),l(k),l(L,{class:"pa-3"},{default:u(()=>[l(N),l(T,{onClick:y},{default:u(()=>[...b[8]||(b[8]=[O("Cancel",-1)])]),_:1}),l(T,{color:"primary",onClick:g,disabled:!i.value||c.value,loading:c.value},{default:u(()=>[...b[9]||(b[9]=[O(" Update ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},UQe={class:"text-center py-4"},RQe={class:"text-body-2 mb-0.5"},NQe={class:"text-body-2 mb-0.5"},VQe={class:"text-body-2 mb-0.5"},LQe={class:"text-body-2 mb-0.5"},MQe={class:"text-body-2 mb-0.5"},OQe={key:0,class:"text-body-2 mb-0.5"},HQe={key:0,class:"text-body-2 mb-0.5"},$Qe={key:1,class:"text-body-2 mb-0.5"},QQe={key:2,class:"text-body-2 mb-0.5"},GQe={class:"text-right"},zQe={class:"text-right"},KQe={class:"text-right"},WQe={class:"text-right"},jQe={class:"text-right"},qQe={class:"text-right"},YQe={class:"text-center"},XQe={key:1,class:"text-body-2 text-medium-emphasis py-2 text-center"},JQe={key:0,class:"text-body-2 mb-1"},ZQe={class:"text-body-2 mb-1"},e7e={class:"text-body-2 mb-1"},t7e={class:"text-body-2 mb-1"},n7e={key:0,class:"text-body-2 mb-1"},a7e={class:"text-subtitle-1 font-weight-bold"},r7e={class:"text-body-2 text-medium-emphasis mt-2"},s7e={__name:"pharmacy-purchase-invoice-view",props:{invoiceId:{type:Number,required:!0}},emits:["close","updated","add-batch"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ra(),o=M(!0),i=M(!1),c=M(null),A=M(!1),d=async()=>{i.value=!0;try{const{data:b,error:x}=await yg(n.invoiceId);if(x)throw x;c.value=b}catch(b){console.error("Error loading invoice:",b),s(b.response?.data?.error||b.message||"Failed to load invoice")}finally{i.value=!1}};We(()=>n.invoiceId,()=>{d()},{immediate:!0});const f=()=>{o.value=!1,a("close")},m=()=>{a("add-batch",n.invoiceId)},h=()=>{A.value=!0},v=()=>{A.value=!1,d(),a("updated")},y=async b=>{if(confirm("Are you sure you want to remove this batch? This will delete the batch entirely."))try{const{error:x}=await pEe(n.invoiceId,b);if(x)throw x;r("Batch removed successfully"),d(),a("updated")}catch(x){console.error("Error removing batch:",x),s(x.response?.data?.error||x.message||"Failed to remove batch")}},g=b=>b?new Date(b*1e3).toLocaleDateString():"-",w=b=>b==null?"0.00":`${b.toFixed(2)}`;return(b,x)=>{const T=I("v-icon"),U=I("v-btn"),k=I("v-card-title"),S=I("v-divider"),E=I("v-progress-circular"),C=I("v-card-text"),P=I("v-chip"),F=I("v-col"),N=I("v-row"),L=I("v-table"),ie=I("v-spacer"),le=I("v-card-actions"),Q=I("v-card"),Z=I("v-dialog");return R(),me(ze,null,[l(Z,{modelValue:o.value,"onUpdate:modelValue":x[0]||(x[0]=ce=>o.value=ce),persistent:"","max-width":"90%",scrollable:""},{default:u(()=>[l(Q,{rounded:"lg"},{default:u(()=>[l(k,{class:"d-flex align-center justify-space-between"},{default:u(()=>[x[3]||(x[3]=p("span",null,"Purchase Invoice Details",-1)),l(U,{onClick:f,variant:"text",size:"small"},{default:u(()=>[l(T,null,{default:u(()=>[...x[2]||(x[2]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(S),i.value?(R(),ve(C,{key:0,class:"py-2"},{default:u(()=>[p("div",UQe,[l(E,{indeterminate:"",color:"primary"})])]),_:1})):c.value?(R(),ve(C,{key:1,class:"py-2"},{default:u(()=>[l(N,{dense:"",class:"mb-2"},{default:u(()=>[l(F,{cols:"12",md:"4"},{default:u(()=>[x[7]||(x[7]=p("div",{class:"text-subtitle-2 mb-1"},"Invoice Information",-1)),p("div",RQe,[x[4]||(x[4]=p("strong",null,"Date:",-1)),O(" "+q(g(c.value.pharmacyPurchaseInvoiceDate)),1)]),p("div",NQe,[x[5]||(x[5]=p("strong",null,"Identifier:",-1)),O(" "+q(c.value.pharmacyPurchaseInvoiceIdentifier),1)]),p("div",VQe,[x[6]||(x[6]=p("strong",null,"Status:",-1)),l(P,{color:c.value.status===2?"success":"warning",size:"small",variant:"tonal",class:"ml-2"},{default:u(()=>[O(q(c.value.statusLabel||"Draft"),1)]),_:1},8,["color"])])]),_:1}),l(F,{cols:"12",md:"4"},{default:u(()=>[x[11]||(x[11]=p("div",{class:"text-subtitle-2 mb-1"},"Supplier Information",-1)),p("div",LQe,[x[8]||(x[8]=p("strong",null,"Name:",-1)),O(" "+q(c.value.supplier?.supplierName||"-"),1)]),p("div",MQe,[x[9]||(x[9]=p("strong",null,"GSTIN:",-1)),O(" "+q(c.value.supplier?.gstin||"-"),1)]),c.value.supplier?.address?(R(),me("div",OQe,[x[10]||(x[10]=p("strong",null,"Address:",-1)),O(" "+q(c.value.supplier.address),1)])):_e("",!0)]),_:1}),l(F,{cols:"12",md:"4"},{default:u(()=>[x[15]||(x[15]=p("div",{class:"text-subtitle-2 mb-1"},"Payment Information",-1)),c.value.paymentDueDate?(R(),me("div",HQe,[x[12]||(x[12]=p("strong",null,"Due Date:",-1)),O(" "+q(g(c.value.paymentDueDate)),1)])):_e("",!0),c.value.paymentDate?(R(),me("div",$Qe,[x[13]||(x[13]=p("strong",null,"Payment Date:",-1)),O(" "+q(g(c.value.paymentDate)),1)])):(R(),me("div",QQe,[...x[14]||(x[14]=[p("strong",null,"Payment Status:",-1),O(),p("span",{class:"text-warning"},"Unpaid",-1)])]))]),_:1})]),_:1}),l(S,{class:"my-2"}),x[23]||(x[23]=p("div",{class:"text-subtitle-2 mb-1"},"Medicine Batches",-1)),c.value.batches&&c.value.batches.length>0?(R(),ve(L,{key:0,density:"compact"},{default:u(()=>[x[16]||(x[16]=p("thead",null,[p("tr",null,[p("th",{class:"text-left"},"Medicine Name"),p("th",{class:"text-left"},"Batch Number"),p("th",{class:"text-left"},"Expiry Date"),p("th",{class:"text-left"},"Location"),p("th",{class:"text-right"},"MRP (per pack)"),p("th",{class:"text-right"},"Cost (per unit excl. GST)"),p("th",{class:"text-right"},"GST %"),p("th",{class:"text-right"},"Total Packs"),p("th",{class:"text-right"},"Total Units"),p("th",{class:"text-right"},"Total Cost"),p("th",{class:"text-center"},"Actions")])],-1)),p("tbody",null,[(R(!0),me(ze,null,Wt(c.value.batches,ce=>(R(),me("tr",{key:ce.id},[p("td",null,q(ce.medicine?.productName||"-"),1),p("td",null,q(ce.batchNumber),1),p("td",null,q(g(ce.expiryDate)),1),p("td",null,q(ce.location||"-"),1),p("td",GQe,q(w(ce.mrp)),1),p("td",zQe,q(w(ce.costPerUnitExclGst||0)),1),p("td",KQe,q(ce.gstPercentage||0)+"%",1),p("td",WQe,q(ce.totalPacks||0),1),p("td",jQe,q(ce.totalUnits||0),1),p("td",qQe,q(w(ce.totalCost||0)),1),p("td",YQe,[l(U,{size:"x-small",variant:"text",icon:"mdi-delete",color:"error",onClick:J=>y(ce.id)},null,8,["onClick"])])]))),128))])]),_:1})):(R(),me("div",XQe," No batches added yet ")),l(S,{class:"mb-3 mt-2"}),c.value.totals?(R(),ve(N,{key:2,"no-gutters":""},{default:u(()=>[l(F,{cols:"8",class:"text-right"},{default:u(()=>[x[17]||(x[17]=p("div",{class:"text-body-2 mb-1"},"Base Cost Total:",-1)),x[18]||(x[18]=p("div",{class:"text-body-2 mb-1"},"GST:",-1)),x[19]||(x[19]=p("div",{class:"text-body-2 mb-1"},"Subtotal with GST:",-1)),c.value.totals.additionalDiscount>0?(R(),me("div",JQe,"Additional Discount:")):_e("",!0),x[20]||(x[20]=p("div",{class:"text-subtitle-1 font-weight-bold"},"Grand Total:",-1))]),_:1}),l(F,{cols:"4",class:"text-right"},{default:u(()=>[p("div",ZQe,q(w(c.value.totals.subtotal)),1),p("div",e7e,q(w(c.value.totals.totalGST)),1),p("div",t7e,q(w(c.value.totals.subtotalWithGST)),1),c.value.totals.additionalDiscount>0?(R(),me("div",n7e,"-"+q(w(c.value.totals.additionalDiscount)),1)):_e("",!0),p("div",a7e,q(w(c.value.totals.netAmount)),1)]),_:1})]),_:1})):_e("",!0),p("div",r7e,[x[21]||(x[21]=p("strong",null,"Medicine Count:",-1)),O(" "+q(c.value.medicineCount||0)+" | ",1),x[22]||(x[22]=p("strong",null,"Batch Count:",-1)),O(" "+q(c.value.batchCount||0),1)])]),_:1})):_e("",!0),l(S),l(le,{class:"pa-3"},{default:u(()=>[l(U,{color:"primary","prepend-icon":"mdi-plus",onClick:m},{default:u(()=>[...x[24]||(x[24]=[O(" Add Medicine Batch ",-1)])]),_:1}),l(ie),l(U,{color:"primary",variant:"outlined","prepend-icon":"mdi-pencil",onClick:h},{default:u(()=>[...x[25]||(x[25]=[O(" Edit Invoice ",-1)])]),_:1}),l(U,{onClick:f},{default:u(()=>[...x[26]||(x[26]=[O("Close",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),A.value?(R(),ve(DQe,{key:0,"invoice-id":e.invoiceId,onClose:x[1]||(x[1]=ce=>A.value=!1),onSaved:v},null,8,["invoice-id"])):_e("",!0)],64)}}},o7e={key:1},i7e={class:"text-caption text-medium-emphasis"},l7e={class:"font-weight-medium"},u7e={class:"text-caption text-medium-emphasis"},c7e={key:0,class:"mb-0.5"},d7e={key:1,class:"mb-0.5"},A7e={key:2},f7e={__name:"pharmacy-add-medicine-batch",props:{purchaseInvoiceId:{type:Number,required:!0}},emits:["close","saved"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ra(),o=M(!0),i=M(!1),c=M(!1),A=M(!1),d=M(null),f=M(null),m=M(null),h=M([]),v=M(""),y=M({batchNumber:"",expiryDate:"",packType:"",unitsPerPack:1,mrp:null,discountPercentage:0,saleQuantityPacks:0,freeQuantityPacks:0,cgstPercentage:0,sgstPercentage:0,location:""}),g=M("0.00"),w=ee(()=>Number(g.value??0)||0),b=()=>{g.value=(Number(g.value??0)||0).toFixed(2)},x=ee(()=>{const le=Number(y.value.cgstPercentage??0)||0,Q=Number(y.value.sgstPercentage??0)||0;return le+Q}),T=ee(()=>{const le=w.value||0,Q=Number(x.value??0)||0;return le*(1+Q/100)}),U=ee(()=>(Number(T.value??0)||0).toFixed(2)),k=ee(()=>{const le=y.value.saleQuantityPacks||0,Q=y.value.freeQuantityPacks||0;return le+Q}),S=ee(()=>k.value*(y.value.unitsPerPack||1)),E=ee(()=>{const le=y.value.saleQuantityPacks||0,Q=y.value.freeQuantityPacks||0,Z=w.value||0,ce=le+Q;return ce===0?null:Z*le/ce});cn(async()=>{b(),await C(),await P()});const C=async()=>{A.value=!0;try{const{data:le,error:Q}=await Vw();if(Q){console.error("Error loading pharmacy medicines:",Q),s("Failed to load pharmacy medicines");return}h.value=(le||[]).map(Z=>({id:Z.id,productName:Z.productName,marketer:Z.marketer,productForm:Z.productForm,group:Z.group,hsnCode:Z.hsnCode,displayName:Z.productName}))}catch(le){console.error("Error loading pharmacy medicines:",le),showSnackbar("Failed to load pharmacy medicines","error")}finally{A.value=!1}},P=async()=>{try{const{data:le}=await yg(n.purchaseInvoiceId);le&&(v.value=`${le.pharmacyPurchaseInvoiceIdentifier} (${N(le.pharmacyPurchaseInvoiceDate)})`)}catch(le){console.error("Error loading invoice info:",le)}},F=le=>{m.value=h.value.find(Q=>Q.id===le)},N=le=>le?new Date(le*1e3).toLocaleDateString():"-",L=()=>{o.value=!1,a("close")},ie=async()=>{if(!d.value)return;const{valid:le}=await d.value.validate();if(le){if(!f.value){s("Please select a medicine");return}c.value=!0;try{const Q={medicineId:f.value,purchaseInvoiceId:n.purchaseInvoiceId,...y.value,priceToRetailer:Number(T.value??0)||0},{data:Z,error:ce}=await BH(Q);if(ce)throw ce;r("Batch added successfully"),a("saved"),L()}catch(Q){console.error("Error creating batch:",Q),s(Q.response?.data?.error||Q.message||"Failed to create batch")}finally{c.value=!1}}};return(le,Q)=>{const Z=I("v-icon"),ce=I("v-btn"),J=I("v-card-title"),se=I("v-divider"),G=I("v-text-field"),D=I("v-list-item-title"),j=I("v-list-item-subtitle"),ne=I("v-list-item"),H=I("v-autocomplete"),te=I("v-col"),Y=I("v-select"),K=I("v-row"),X=I("v-form"),ae=I("v-card-text"),oe=I("v-spacer"),W=I("v-card-actions"),de=I("v-card"),Ae=I("v-dialog");return R(),ve(Ae,{modelValue:o.value,"onUpdate:modelValue":Q[14]||(Q[14]=Ce=>o.value=Ce),persistent:"","max-width":"800px",scrollable:""},{default:u(()=>[l(de,{rounded:"lg"},{default:u(()=>[l(J,{class:"d-flex align-center justify-space-between"},{default:u(()=>[Q[16]||(Q[16]=p("span",null,"Add Medicine Batch to Invoice",-1)),l(ce,{onClick:L,variant:"text",size:"small"},{default:u(()=>[l(Z,null,{default:u(()=>[...Q[15]||(Q[15]=[O("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(se),l(ae,{class:"py-1"},{default:u(()=>[l(X,{ref_key:"form",ref:d,modelValue:i.value,"onUpdate:modelValue":Q[13]||(Q[13]=Ce=>i.value=Ce)},{default:u(()=>[e.purchaseInvoiceId?(R(),ve(G,{key:0,"model-value":v.value,label:"Purchase Invoice",variant:"outlined",density:"compact",readonly:"","prepend-inner-icon":"mdi-file-document",class:"mb-1"},null,8,["model-value"])):_e("",!0),l(H,{modelValue:f.value,"onUpdate:modelValue":[Q[0]||(Q[0]=Ce=>f.value=Ce),F],items:h.value,"item-value":"id","item-title":"productName",label:"Select Medicine *",variant:"outlined",density:"compact",rules:[Ce=>!!Ce||"Medicine selection is required"],"prepend-inner-icon":"mdi-pill",loading:A.value,class:"mb-1"},{selection:u(({item:Ce})=>[O(q(Ce.raw.productName),1)]),item:u(({props:Ce,item:De})=>[l(ne,Ql(Kl({...Ce,title:void 0})),{prepend:u(()=>[l(Z,null,{default:u(()=>[...Q[17]||(Q[17]=[O("mdi-pill",-1)])]),_:1})]),default:u(()=>[l(D,{class:"text-wrap"},{default:u(()=>[O(q(De.raw.productName),1)]),_:2},1024),l(j,{class:"text-wrap"},{default:u(()=>[O(q([De.raw.marketer,De.raw.group,De.raw.productForm].filter(Boolean).join(" | ")||"No additional details"),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","items","rules","loading"]),f.value&&m.value?(R(),me("div",o7e,[l(se,{class:"my-1"}),Q[22]||(Q[22]=p("div",{class:"text-caption font-weight-medium mb-1"},"Batch Details",-1)),l(K,{dense:""},{default:u(()=>[l(te,{cols:"12",md:"6"},{default:u(()=>[l(G,{modelValue:y.value.batchNumber,"onUpdate:modelValue":Q[1]||(Q[1]=Ce=>y.value.batchNumber=Ce),label:"Batch Number *",variant:"outlined",density:"compact",rules:[Ce=>!!Ce||"Batch number is required"],"prepend-inner-icon":"mdi-barcode"},null,8,["modelValue","rules"])]),_:1}),l(te,{cols:"12",md:"6"},{default:u(()=>[l(G,{modelValue:y.value.expiryDate,"onUpdate:modelValue":Q[2]||(Q[2]=Ce=>y.value.expiryDate=Ce),type:"date",label:"Expiry Date *",variant:"outlined",density:"compact",rules:[Ce=>!!Ce||"Expiry date is required"],"prepend-inner-icon":"mdi-calendar"},null,8,["modelValue","rules"])]),_:1}),l(te,{cols:"12",md:"6"},{default:u(()=>[l(Y,{modelValue:y.value.packType,"onUpdate:modelValue":Q[3]||(Q[3]=Ce=>y.value.packType=Ce),items:Oe(Uw),label:"Pack Type *",variant:"outlined",density:"compact",rules:[Ce=>!!Ce||"Pack type is required"],"prepend-inner-icon":"mdi-package-variant"},null,8,["modelValue","items","rules"])]),_:1}),l(te,{cols:"12",md:"6"},{default:u(()=>[l(G,{modelValue:y.value.unitsPerPack,"onUpdate:modelValue":Q[4]||(Q[4]=Ce=>y.value.unitsPerPack=Ce),modelModifiers:{number:!0},label:"Units Per Pack *",variant:"outlined",density:"compact",type:"number",rules:[Ce=>Ce!=null&&Ce>0||"Units per pack must be greater than 0"],"prepend-inner-icon":"mdi-numeric"},null,8,["modelValue","rules"])]),_:1}),l(te,{cols:"12",md:"6"},{default:u(()=>[l(G,{modelValue:y.value.mrp,"onUpdate:modelValue":Q[5]||(Q[5]=Ce=>y.value.mrp=Ce),modelModifiers:{number:!0},label:"MRP per Pack () *",variant:"outlined",density:"compact",type:"number",rules:[Ce=>Ce!=null&&Ce>=0||"MRP must be a positive number"],"prepend-inner-icon":"mdi-currency-inr"},null,8,["modelValue","rules"])]),_:1}),l(te,{cols:"12",md:"6"},{default:u(()=>[l(G,{modelValue:y.value.discountPercentage,"onUpdate:modelValue":Q[6]||(Q[6]=Ce=>y.value.discountPercentage=Ce),modelModifiers:{number:!0},label:"Discount to Patients %",variant:"outlined",density:"compact",type:"number",rules:[Ce=>Ce==null||Ce>=0&&Ce<=100||"Discount must be between 0 and 100"],"prepend-inner-icon":"mdi-percent"},null,8,["modelValue","rules"])]),_:1}),l(te,{cols:"12",md:"6"},{default:u(()=>[l(G,{modelValue:y.value.saleQuantityPacks,"onUpdate:modelValue":Q[7]||(Q[7]=Ce=>y.value.saleQuantityPacks=Ce),modelModifiers:{number:!0},label:"Sale Quantity (Packs) *",variant:"outlined",density:"compact",type:"number",rules:[Ce=>Ce!=null&&Ce>=0||"Sale quantity must be non-negative"],"prepend-inner-icon":"mdi-numeric"},null,8,["modelValue","rules"])]),_:1}),l(te,{cols:"12",md:"6"},{default:u(()=>[l(G,{modelValue:y.value.freeQuantityPacks,"onUpdate:modelValue":Q[8]||(Q[8]=Ce=>y.value.freeQuantityPacks=Ce),modelModifiers:{number:!0},label:"Free Quantity (Packs) *",variant:"outlined",density:"compact",type:"number",rules:[Ce=>Ce!=null&&Ce>=0||"Free quantity must be non-negative"],"prepend-inner-icon":"mdi-numeric"},null,8,["modelValue","rules"])]),_:1}),l(te,{cols:"12",md:"6"},{default:u(()=>[l(G,{modelValue:y.value.cgstPercentage,"onUpdate:modelValue":Q[9]||(Q[9]=Ce=>y.value.cgstPercentage=Ce),modelModifiers:{number:!0},label:"CGST % *",variant:"outlined",density:"compact",type:"number",rules:[Ce=>Ce!=null||"CGST percentage is required"],"prepend-inner-icon":"mdi-percent"},null,8,["modelValue","rules"])]),_:1}),l(te,{cols:"12",md:"6"},{default:u(()=>[l(G,{modelValue:y.value.sgstPercentage,"onUpdate:modelValue":Q[10]||(Q[10]=Ce=>y.value.sgstPercentage=Ce),modelModifiers:{number:!0},label:"SGST % *",variant:"outlined",density:"compact",type:"number",rules:[Ce=>Ce!=null||"SGST percentage is required"],"prepend-inner-icon":"mdi-percent"},null,8,["modelValue","rules"])]),_:1}),l(te,{cols:"12",md:"6"},{default:u(()=>[l(G,{modelValue:g.value,"onUpdate:modelValue":Q[11]||(Q[11]=Ce=>g.value=Ce),label:"Price to Retailer (Excl. GST) () *",variant:"outlined",density:"compact",inputmode:"decimal",rules:[Ce=>Number(Ce)>=0||"Price to retailer (excl. GST) must be non-negative"],"prepend-inner-icon":"mdi-currency-inr",hint:"User input (excludes GST)","persistent-hint":"",onBlur:b},null,8,["modelValue","rules"])]),_:1}),l(te,{cols:"12",md:"6"},{default:u(()=>[p("div",i7e,[p("div",l7e,"Price to Retailer (Incl. GST): "+q(U.value),1),Q[18]||(Q[18]=p("div",null,"Computed using CGST + SGST",-1))])]),_:1}),l(te,{cols:"12"},{default:u(()=>[l(G,{modelValue:y.value.location,"onUpdate:modelValue":Q[12]||(Q[12]=Ce=>y.value.location=Ce),label:"Location",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-map-marker",hint:"Physical storage location (e.g., Shelf A-3, Room 1)","persistent-hint":""},null,8,["modelValue"])]),_:1}),l(te,{cols:"12",class:"pt-1"},{default:u(()=>[l(se,{class:"mb-1"}),p("div",u7e,[k.value>0?(R(),me("div",c7e,[Q[19]||(Q[19]=p("strong",null,"Total Quantity:",-1)),O(" "+q(k.value)+" packs ("+q(S.value)+" units) ",1)])):_e("",!0),E.value!==null?(R(),me("div",d7e,[Q[20]||(Q[20]=p("strong",null,"Cost per Pack (Excl. GST):",-1)),O(" "+q(E.value.toFixed(2)),1)])):_e("",!0),x.value!==null?(R(),me("div",A7e,[Q[21]||(Q[21]=p("strong",null,"GST %:",-1)),O(" "+q(x.value.toFixed(2))+"% ",1)])):_e("",!0)])]),_:1})]),_:1})])):_e("",!0)]),_:1},8,["modelValue"])]),_:1}),l(se),l(W,{class:"pa-3"},{default:u(()=>[l(oe),l(ce,{onClick:L},{default:u(()=>[...Q[23]||(Q[23]=[O("Cancel",-1)])]),_:1}),l(ce,{color:"primary",onClick:ie,disabled:!i.value||!f.value||c.value,loading:c.value},{default:u(()=>[...Q[24]||(Q[24]=[O(" Add Batch ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},m7e={class:"d-flex align-center"},h7e={class:"pr-3 d-flex"},v7e={class:"scrollable-content"},p7e={class:"text-center"},g7e={class:"text-center"},y7e={class:"text-body-2 text-medium-emphasis mb-4"},_7e={class:"text-center"},w7e={class:"d-flex align-center justify-space-between w-100"},b7e={class:"flex-grow-1"},x7e={class:"d-flex align-center"},C7e={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},S7e={class:"d-flex align-center"},E7e={key:0,class:"text-body-2 mb-2"},B7e={class:"d-flex align-center flex-wrap"},k7e={key:0,class:"text-medium-emphasis mr-2"},T7e={key:1,class:"text-medium-emphasis mr-2"},I7e={key:2,class:"text-medium-emphasis"},F7e={key:1},P7e={class:"text-right"},D7e={class:"text-right"},U7e={class:"text-right"},R7e={class:"text-center"},N7e={key:2,class:"text-body-2 text-medium-emphasis text-center py-2"},V7e={__name:"pharmacy-purchase",setup(e){const t=M(0),n=M(null),a=M(!1),r=M(null),s=M([]),o=M(""),i=M(""),c=M(!1),A=M(!1),d=M(null),f=M(!1),m=M(null),h=M(null),v=M(!1),y=M(null),g=ee(()=>{let Z=s.value;if(o.value&&o.value.trim()!==""){const ce=o.value.toLowerCase();Z=Z.filter(J=>J.supplierName&&J.supplierName.toLowerCase().includes(ce))}if(i.value&&i.value.trim()!==""){const ce=i.value.toLowerCase();Z=Z.map(J=>{const se=(J.invoices||[]).filter(G=>G.pharmacyPurchaseInvoiceIdentifier&&G.pharmacyPurchaseInvoiceIdentifier.toLowerCase().includes(ce));return{...J,invoices:se}}).filter(J=>J.invoices.length>0)}return Z}),w=async()=>{a.value=!0,r.value=null;try{const{data:Z,error:ce}=await TH();if(ce)throw ce;const J=await Promise.all((Z||[]).map(async se=>{const{data:G}=await fEe({supplierId:se.id});return{...se,invoices:G||[]}}));s.value=J}catch(Z){console.error("Error loading suppliers:",Z),r.value=Z.response?.data?.error||Z.message||"Failed to load suppliers"}finally{a.value=!1}},b=()=>{d.value=null,c.value=!0},x=()=>{c.value=!1,d.value=null},T=Z=>{d.value=Z,A.value=!0},U=()=>{A.value=!1,d.value=null},k=()=>{x(),U(),w()},S=Z=>{m.value=Z,f.value=!0},E=()=>{f.value=!1,m.value=null},C=()=>{E(),w()},P=Z=>{h.value=Z},F=()=>{h.value=null},N=Z=>{y.value=Z,v.value=!0},L=()=>{v.value=!1,y.value=null},ie=()=>{L(),h.value&&(F(),P(y.value)),w()},le=Z=>Z?new Date(Z*1e3).toLocaleDateString():"-",Q=Z=>Z==null?"0.00":`${Z.toFixed(2)}`;return cn(()=>{w()}),(Z,ce)=>{const J=I("v-alert"),se=I("v-tab"),G=I("v-tabs"),D=I("v-btn"),j=I("v-icon"),ne=I("v-tooltip"),H=I("v-card"),te=I("v-col"),Y=I("v-row"),K=I("v-progress-circular"),X=I("v-text-field"),ae=I("v-card-title"),oe=I("v-divider"),W=I("v-chip"),de=I("v-table"),Ae=I("v-card-text"),Ce=I("v-lazy"),De=I("v-window-item"),xe=I("v-window"),ke=I("v-main");return R(),ve(ke,null,{default:u(()=>[n.value?(R(),ve(J,{key:0,type:"error",dismissible:"","onClick:close":ce[0]||(ce[0]=Ee=>n.value=null),class:"ma-3"},{default:u(()=>[O(q(n.value),1)]),_:1})):_e("",!0),l(Y,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[l(te,{cols:"12"},{default:u(()=>[l(H,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center justify-space-between"},{default:u(()=>[p("div",m7e,[l(G,{modelValue:t.value,"onUpdate:modelValue":ce[1]||(ce[1]=Ee=>t.value=Ee),color:"primary","align-tabs":"start"},{default:u(()=>[l(se,{value:0},{default:u(()=>[...ce[5]||(ce[5]=[O("Purchase",-1)])]),_:1})]),_:1},8,["modelValue"])]),p("div",h7e,[l(xn,{permission:"pharmacy.purchase.create"},{default:u(()=>[l(D,{color:"primary","prepend-icon":"mdi-plus",onClick:b},{default:u(()=>[...ce[6]||(ce[6]=[O(" Add Supplier ",-1)])]),_:1})]),_:1}),l(ne,{text:"Refresh"},{activator:u(({props:Ee})=>[l(D,Fe({rounded:"x-small",onClick:w,size:"small"},Ee,{loading:a.value,class:"btn-hover-enhanced ml-1"}),{default:u(()=>[l(j,null,{default:u(()=>[...ce[7]||(ce[7]=[O("mdi-refresh",-1)])]),_:1})]),_:1},16,["loading"])]),_:1})])]),_:1})]),_:1})]),_:1}),l(xe,{modelValue:t.value,"onUpdate:modelValue":ce[4]||(ce[4]=Ee=>t.value=Ee),class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[l(De,{value:0,style:{height:"100%"}},{default:u(()=>[p("div",v7e,[a.value?(R(),ve(Y,{key:0,"no-gutters":""},{default:u(()=>[l(te,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50vh"}},{default:u(()=>[p("div",p7e,[l(K,{indeterminate:"",color:"primary",size:"64"}),ce[8]||(ce[8]=p("div",{class:"mt-4 text-subtitle-1"},"Loading suppliers...",-1))])]),_:1})]),_:1})):r.value?(R(),ve(Y,{key:1,"no-gutters":""},{default:u(()=>[l(te,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50vh"}},{default:u(()=>[p("div",g7e,[l(j,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...ce[9]||(ce[9]=[O("mdi-alert-circle",-1)])]),_:1}),ce[11]||(ce[11]=p("div",{class:"text-h6 mb-2"},"Failed to Load Suppliers",-1)),p("div",y7e,q(r.value),1),l(D,{color:"primary",onClick:w,"prepend-icon":"mdi-refresh"},{default:u(()=>[...ce[10]||(ce[10]=[O(" Try Again ",-1)])]),_:1})])]),_:1})]),_:1})):g.value.length===0?(R(),ve(Y,{key:2,"no-gutters":""},{default:u(()=>[l(te,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50vh"}},{default:u(()=>[p("div",_7e,[l(j,{size:"64",color:"grey",class:"mb-4"},{default:u(()=>[...ce[12]||(ce[12]=[O("mdi-cart-off",-1)])]),_:1}),ce[14]||(ce[14]=p("div",{class:"text-h6 mb-2"},"No Suppliers",-1)),ce[15]||(ce[15]=p("div",{class:"text-body-2 text-medium-emphasis mb-4"},"Add suppliers to start managing purchase invoices",-1)),l(xn,{permission:"pharmacy.purchase.create"},{default:u(()=>[l(D,{color:"primary",onClick:b,"prepend-icon":"mdi-plus"},{default:u(()=>[...ce[13]||(ce[13]=[O(" Add Supplier ",-1)])]),_:1})]),_:1})])]),_:1})]),_:1})):(R(),me(ze,{key:3},[l(Y,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(te,{cols:"12",class:"d-flex justify-center align-center flex-wrap gap-2"},{default:u(()=>[l(X,{modelValue:o.value,"onUpdate:modelValue":ce[2]||(ce[2]=Ee=>o.value=Ee),placeholder:"Filter by supplier name...",density:"compact",variant:"outlined",clearable:"","hide-details":"","prepend-inner-icon":"mdi-magnify",class:"filter-input",style:{"max-width":"300px",width:"100%"}},null,8,["modelValue"]),l(X,{modelValue:i.value,"onUpdate:modelValue":ce[3]||(ce[3]=Ee=>i.value=Ee),placeholder:"Filter by invoice ID...",density:"compact",variant:"outlined",clearable:"","hide-details":"","prepend-inner-icon":"mdi-file-document",class:"filter-input",style:{"max-width":"300px",width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),(R(!0),me(ze,null,Wt(g.value,Ee=>(R(),ve(Ce,{key:Ee.id,options:{threshold:.1,rootMargin:"50px"}},{default:u(()=>[l(H,{style:{textAlign:"left"},density:"compact",class:"mb-1 mx-2 card-enhanced card-status-default",rounded:"lg"},{default:u(()=>[l(ae,{class:"pb-0 pt-2"},{default:u(()=>[p("div",w7e,[p("div",b7e,[p("div",x7e,[p("div",C7e,q(Ee.supplierName||"Unknown Supplier"),1),l(xn,{permission:"pharmacy.purchase.create",tag:"span"},{default:u(()=>[l(ne,{text:"Edit Supplier"},{activator:u(({props:ye})=>[l(j,Fe({size:"x-small"},{ref_for:!0},ye,{class:"edit-icon flex-shrink-0 ml-1",onClick:we=>T(Ee),tabindex:"-1"}),{default:u(()=>[...ce[16]||(ce[16]=[O(" mdi-pencil ",-1)])]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024)])]),p("div",S7e,[l(xn,{permission:"pharmacy.purchase.create"},{default:u(()=>[l(D,{color:"primary",variant:"outlined","prepend-icon":"mdi-file-document-plus",size:"small",onClick:ye=>S(Ee.id)},{default:u(()=>[...ce[17]||(ce[17]=[O(" Add Invoice ",-1)])]),_:1},8,["onClick"])]),_:2},1024)])])]),_:2},1024),l(Ae,{class:ct({"pt-1 pb-1":Ee.invoices&&Ee.invoices.length>0,"pa-0":!Ee.invoices||Ee.invoices.length===0})},{default:u(()=>[Ee.gstin||Ee.address||Ee.contactNumber?(R(),me("div",E7e,[p("div",B7e,[Ee.gstin&&Ee.gstin.trim()!==""?(R(),me("span",k7e," GSTIN: "+q(Ee.gstin),1)):_e("",!0),Ee.address?(R(),me("span",T7e," Address: "+q(Ee.address),1)):_e("",!0),Ee.contactNumber?(R(),me("span",I7e," Contact No.: "+q(Ee.contactNumber),1)):_e("",!0)])])):_e("",!0),Ee.invoices&&Ee.invoices.length>0?(R(),me("div",F7e,[Ee.address||Ee.contactNumber?(R(),ve(oe,{key:0,class:"mb-2"})):_e("",!0),l(de,{density:"compact",class:"batch-table compact-table"},{default:u(()=>[ce[18]||(ce[18]=p("thead",null,[p("tr",null,[p("th",{class:"text-left"},"Date"),p("th",{class:"text-left"},"Invoice ID"),p("th",{class:"text-left"},"Status"),p("th",{class:"text-right"},"Total Amount"),p("th",{class:"text-right"},"Batches"),p("th",{class:"text-right"},"Medicines"),p("th",{class:"text-center"},"Actions")])],-1)),p("tbody",null,[(R(!0),me(ze,null,Wt(Ee.invoices,ye=>(R(),me("tr",{key:ye.id},[p("td",null,q(le(ye.pharmacyPurchaseInvoiceDate)),1),p("td",null,q(ye.pharmacyPurchaseInvoiceIdentifier),1),p("td",null,[l(W,{color:ye.status===2?"success":"warning",size:"small",variant:"tonal"},{default:u(()=>[O(q(ye.statusLabel||"Draft"),1)]),_:2},1032,["color"])]),p("td",P7e,q(Q(ye.totalAmount||0)),1),p("td",D7e,q(ye.batchCount||0),1),p("td",U7e,q(ye.medicineCount||0),1),p("td",R7e,[l(xn,{feature:"pharmacy.purchase",tag:"span"},{default:u(()=>[l(ne,{text:"View Invoice"},{activator:u(({props:we})=>[l(D,Fe({icon:"mdi-eye",size:"small",variant:"text",onClick:at=>P(ye.id),class:"mr-1"},{ref_for:!0},we),null,16,["onClick"])]),_:2},1024)]),_:2},1024),l(xn,{permission:"pharmacy.purchase.create",tag:"span"},{default:u(()=>[l(ne,{text:"Add Medicine Batch"},{activator:u(({props:we})=>[l(D,Fe({icon:"mdi-plus",size:"small",variant:"text",onClick:at=>N(ye.id)},{ref_for:!0},we),null,16,["onClick"])]),_:2},1024)]),_:2},1024)])]))),128))])]),_:2},1024)])):(R(),me("div",N7e,' No purchase invoices yet. Click on "Add Invoice" to create one. '))]),_:2},1032,["class"])]),_:2},1024)]),_:2},1024))),128))],64))])]),_:1})]),_:1},8,["modelValue"]),c.value?(R(),ve(TQe,{key:1,supplier:d.value,onClose:x,onSaved:k},null,8,["supplier"])):_e("",!0),A.value?(R(),ve(IQe,{key:2,supplier:d.value,onClose:U,onSaved:k},null,8,["supplier"])):_e("",!0),f.value?(R(),ve(FQe,{key:3,"supplier-id":m.value,onClose:E,onSaved:C},null,8,["supplier-id"])):_e("",!0),h.value?(R(),ve(s7e,{key:4,"invoice-id":h.value,onClose:F,onUpdated:C,onAddBatch:N},null,8,["invoice-id"])):_e("",!0),v.value?(R(),ve(f7e,{key:5,"purchase-invoice-id":y.value,onClose:L,onSaved:ie},null,8,["purchase-invoice-id"])):_e("",!0)]),_:1})}}},L7e=Xt(V7e,[["__scopeId","data-v-85b63955"]]),M7e={class:"mb-4"},O7e={class:"mb-4"},H7e={key:0,class:"text-caption text-medium-emphasis mt-2"},$7e={key:1,class:"text-caption text-medium-emphasis mt-2"},Q7e={class:"d-flex justify-center mt-2 mb-2"},G7e={class:"d-flex justify-center mt-2"},z7e={key:0,class:"mt-4"},K7e={class:"text-caption text-medium-emphasis"},W7e={key:0},j7e={key:1},q7e={key:2},Y7e={__name:"PharmacyReportFilter",props:{filters:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},emits:["filter-change","start-report","clear-filters"],setup(e,{emit:t}){const n=e,a=t,r=M({reportType:"",startDate:"",endDate:"",...n.filters}),s=M([{label:"Medicine Wise Sales Report",value:"sales-report"},{label:"Billing Report",value:"billing-report"},{label:"Payment Report",value:"payment-report"},{label:"Inventory Transactions Report",value:"inventory-report"},{label:"Expired Inventory Report",value:"expired-inventory-report"},{label:"Purchase Bill Report",value:"purchase-bill-report"},{label:"HSN-wise GST Report",value:"hsn-wise-gst-report"},{label:"Rate-wise GST Report",value:"rate-wise-gst-report"},{label:"Inventory Snapshot Report",value:"inventory-snapshot-report"}]),o=ee(()=>r.value.reportType?r.value.reportType==="expired-inventory-report"||r.value.reportType==="inventory-snapshot-report"?!0:!!(r.value.startDate&&r.value.endDate):!1);We(()=>n.filters,m=>{r.value={...r.value,...m}},{deep:!0});const i=()=>{a("filter-change",{...r.value})},c=()=>{o.value&&a("start-report",{...r.value})},A=()=>{r.value={reportType:"",startDate:"",endDate:""},a("clear-filters"),i()},d=m=>{const h=s.value.find(v=>v.value===m);return h?h.label:m},f=m=>m?new Date(m).toLocaleDateString():"";return(m,h)=>{const v=I("v-card-text"),y=I("v-card"),g=I("v-label"),w=I("v-icon"),b=I("v-select"),x=I("v-text-field"),T=I("v-col"),U=I("v-row"),k=I("v-divider"),S=I("v-btn"),E=I("v-card-title"),C=I("v-form");return R(),ve(y,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[l(y,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(v,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...h[3]||(h[3]=[p("strong",null,"Report Configuration",-1)])]),_:1})]),_:1}),l(v,{class:"pa-4"},{default:u(()=>[l(C,{onSubmit:mn(c,["prevent"])},{default:u(()=>[p("div",M7e,[l(g,{class:"text-subtitle-2 font-weight-medium mb-2"},{default:u(()=>[...h[4]||(h[4]=[O("Report Type",-1)])]),_:1}),l(b,{modelValue:r.value.reportType,"onUpdate:modelValue":[h[0]||(h[0]=P=>r.value.reportType=P),i],items:s.value,"item-title":"label","item-value":"value",variant:"outlined",density:"comfortable"},{"prepend-inner":u(()=>[l(w,{color:"primary"},{default:u(()=>[...h[5]||(h[5]=[O("mdi-chart-line",-1)])]),_:1})]),_:1},8,["modelValue","items"])]),p("div",O7e,[l(g,{class:"text-subtitle-2 font-weight-medium mb-2"},{default:u(()=>[r.value.reportType==="expired-inventory-report"||r.value.reportType==="inventory-snapshot-report"?(R(),me(ze,{key:0},[O(" Snapshot Report (Current Date) ")],64)):(R(),me(ze,{key:1},[O(" Select Date Range ")],64))]),_:1}),l(U,{"no-gutters":"",class:"ga-2"},{default:u(()=>[l(T,{cols:"6"},{default:u(()=>[l(x,{modelValue:r.value.startDate,"onUpdate:modelValue":[h[1]||(h[1]=P=>r.value.startDate=P),i],type:"date",label:"Start Date",variant:"outlined",density:"comfortable",disabled:r.value.reportType==="expired-inventory-report"||r.value.reportType==="inventory-snapshot-report"},null,8,["modelValue","disabled"])]),_:1}),l(T,{cols:"6"},{default:u(()=>[l(x,{modelValue:r.value.endDate,"onUpdate:modelValue":[h[2]||(h[2]=P=>r.value.endDate=P),i],type:"date",label:"End Date",variant:"outlined",density:"comfortable",disabled:r.value.reportType==="expired-inventory-report"||r.value.reportType==="inventory-snapshot-report"},null,8,["modelValue","disabled"])]),_:1})]),_:1}),r.value.reportType==="expired-inventory-report"?(R(),me("div",H7e," This report shows expired/expiring batches as of today (IST). Date range selection is not applicable. ")):_e("",!0),r.value.reportType==="inventory-snapshot-report"?(R(),me("div",$7e," This report shows current inventory state as of today. Date range selection is not applicable. ")):_e("",!0)]),l(k,{class:"my-4"}),p("div",Q7e,[l(S,{type:"submit",color:"primary",loading:e.loading,disabled:!o.value,"prepend-icon":"mdi-chart-line",class:"btn-hover-enhanced"},{default:u(()=>[...h[6]||(h[6]=[O(" Generate Report ",-1)])]),_:1},8,["loading","disabled"])]),p("div",G7e,[l(S,{variant:"outlined",color:"secondary",onClick:A,"prepend-icon":"mdi-filter-remove",class:"btn-hover-enhanced"},{default:u(()=>[...h[7]||(h[7]=[O(" Clear All Filters ",-1)])]),_:1})]),r.value.reportType?(R(),me("div",z7e,[l(y,{variant:"outlined",class:"pa-3"},{default:u(()=>[l(E,{class:"text-subtitle-2 pa-0"},{default:u(()=>[...h[8]||(h[8]=[O("Report Preview",-1)])]),_:1}),l(v,{class:"pa-0 pt-2"},{default:u(()=>[p("div",K7e,[p("div",null,[h[9]||(h[9]=p("strong",null,"Type:",-1)),O(" "+q(d(r.value.reportType)),1)]),r.value.reportType==="expired-inventory-report"?(R(),me("div",W7e,[...h[10]||(h[10]=[p("strong",null,"Report Type:",-1),O(" Snapshot (Current Date - IST) ",-1)])])):_e("",!0),r.value.reportType==="inventory-snapshot-report"?(R(),me("div",j7e,[...h[11]||(h[11]=[p("strong",null,"Report Type:",-1),O(" Snapshot (Current Date) ",-1)])])):r.value.startDate&&r.value.endDate?(R(),me("div",q7e,[h[12]||(h[12]=p("strong",null,"Date Range:",-1)),O(" "+q(f(r.value.startDate))+" - "+q(f(r.value.endDate)),1)])):_e("",!0)])]),_:1})]),_:1})])):_e("",!0)]),_:1})]),_:1})]),_:1})}}},X7e=Xt(Y7e,[["__scopeId","data-v-8619668a"]]),J7e={class:"scrollable-content"},Z7e={class:"scrollable-content"},eGe={key:1},tGe={class:"text-center"},nGe={class:"mt-4 text-subtitle-1"},aGe={key:0,class:"mt-4"},rGe={class:"mb-2"},sGe={class:"mb-2"},oGe={key:0,class:"mb-2"},iGe={key:1},lGe={class:"text-center"},uGe={__name:"pharmacy-reports",setup(e){ea();const t=M(!1),n=M(""),a=M(!1),r=M(""),s=M(!1),o=M(0),i=M(""),c=M([]),A=M(null),d=M(!1),f=M({reportType:"",startDate:"",endDate:""}),m=M([{title:"Date",key:"date",sortable:!0},{title:"Report Type",key:"reportType",sortable:!0},{title:"Format",key:"format",sortable:!0},{title:"Records",key:"recordCount",sortable:!0},{title:"Status",key:"status",sortable:!0}]),h=K=>{f.value={...f.value,...K}},v=()=>{f.value={reportType:"",startDate:"",endDate:""}},y=async K=>{try{if(s.value=!0,o.value=0,i.value="Preparing report...",A.value=null,d.value=!1,console.log("Starting pharmacy report generation with filters:",K),K.reportType!=="expired-inventory-report"&&K.reportType!=="inventory-snapshot-report"){if(!K.startDate||!K.endDate)throw new Error("Please select both start and end dates for the report");const X=new Date(K.startDate),ae=new Date(K.endDate);if(X>ae)throw new Error("Start date must be less than or equal to end date")}if(K.reportType==="sales-report")await g(K);else if(K.reportType==="billing-report")await x(K);else if(K.reportType==="payment-report")await k(K);else if(K.reportType==="inventory-report")await C(K);else if(K.reportType==="expired-inventory-report")await N(K);else if(K.reportType==="purchase-bill-report")await ie(K);else if(K.reportType==="hsn-wise-gst-report")await Z(K);else if(K.reportType==="rate-wise-gst-report")await se(K);else if(K.reportType==="inventory-snapshot-report")await j(K);else throw new Error("Invalid report type selected")}catch(X){console.error("Report generation error:",X),s.value=!1,o.value=0,i.value="",d.value=!1,a.value=!0,r.value="Report generation failed: "+X.message}finally{setTimeout(()=>{d.value&&(s.value=!1)},1500)}},g=async K=>{try{o.value=20,i.value="Fetching medicine-wise sales data...";const X=await dt.get("/pharmacy/reports/medicine-wise-sales",{params:{startDate:K.startDate,endDate:K.endDate}});if(X.data.success===!1)throw new Error(X.data.error||"Failed to fetch medicine-wise sales data");const ae=X.data.data||[];o.value=60,i.value="Processing sales data...",o.value=80,i.value="Generating CSV file...";const oe=w(ae);o.value=90,i.value="Preparing download...";const W=`medicine_wise_sales_report_${K.startDate}_to_${K.endDate}.csv`,de=await b(oe,W);if(!de.success)throw new Error(de.error||"Failed to save report file");o.value=100,i.value="Medicine Wise Sales Report generated successfully!",A.value={reportType:"Medicine Wise Sales Report",totalRecords:ae.length,dateRange:{from:K.startDate,to:K.endDate},filename:W},d.value=!0;const Ae={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"Medicine Wise Sales Report",format:"CSV",recordCount:ae.length,status:"Completed",filename:W};c.value.unshift(Ae),t.value=!0,n.value=`Medicine Wise Sales Report generated successfully! ${ae.length} records included.`}catch(X){throw console.error("Medicine Wise Sales Report generation error:",X),X}},w=K=>{const ae=[["MedicineName","Company","GenericName","HSN","Group","BillID","BillDate","PatientName","DoctorName","BatchDetails","ExpiryDate","InwardBillID","MRP/unit","Cost/unit","Quantity","Discount%","TotalTaxableValue","GST Rate %","GSTAmount","Total Amount","CostAmount","ProfitAmount"].join(",")];return K.forEach(oe=>{const W=[te(oe.MedicineName),te(oe.Company),te(oe.GenericName),te(oe.HSN),te(oe.Group),te(oe.BillID),oe.BillDate,te(oe.PatientName),te(oe.DoctorName),te(oe.BatchDetails),oe.ExpiryDate,te(oe.InwardBillID),oe.MRPPerUnit,oe.CostPerUnit,oe.Quantity,oe.DiscountPercentage,oe.TotalTaxableValue,oe.GSTRatePercentage,oe.GSTAmount,oe.TotalAmount,oe.CostAmount,oe.ProfitAmount];ae.push(W.join(","))}),ae.join(`
`)},b=async(K,X)=>{try{const ae=new Blob([K],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const oe=await window.electronAPI.showSaveDialog({defaultPath:X,filters:[{name:"CSV Files",extensions:["csv"]}]});return!oe.canceled&&oe.filePath?(await window.electronAPI.writeFile(oe.filePath,K),{success:!0,filePath:oe.filePath,filename:X}):{success:!1,error:"Save canceled by user"}}else{const oe=document.createElement("a"),W=URL.createObjectURL(ae);return oe.setAttribute("href",W),oe.setAttribute("download",X),oe.style.visibility="hidden",document.body.appendChild(oe),oe.click(),document.body.removeChild(oe),URL.revokeObjectURL(W),{success:!0,filePath:`Downloaded: ${X}`,filename:X}}}catch(ae){return console.error("Error saving Sales Report file:",ae),{success:!1,error:ae.message}}},x=async K=>{try{o.value=20,i.value="Fetching billing data...";const X=await dt.get("/pharmacy/reports/billing",{params:{startDate:K.startDate,endDate:K.endDate}});if(X.data.success===!1)throw new Error(X.data.error||"Failed to fetch billing data");const ae=X.data.data||[];o.value=60,i.value="Processing billing data...",o.value=80,i.value="Generating CSV file...";const oe=T(ae);o.value=90,i.value="Preparing download...";const W=`billing_report_${K.startDate}_to_${K.endDate}.csv`,de=await U(oe,W);if(!de.success)throw new Error(de.error||"Failed to save report file");o.value=100,i.value="Billing Report generated successfully!",A.value={reportType:"Billing Report",totalRecords:ae.length,dateRange:{from:K.startDate,to:K.endDate},filename:W},d.value=!0;const Ae={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"Billing Report",format:"CSV",recordCount:ae.length,status:"Completed",filename:W};c.value.unshift(Ae),t.value=!0,n.value=`Billing Report generated successfully! ${ae.length} records included.`}catch(X){throw console.error("Billing Report generation error:",X),X}},T=K=>{const ae=[["BillID","BillDate","PatientName","DoctorName","TotalMRP","TotalDiscount","TotalTaxableValue","TotalGST","AdditionalDiscount","NetAmount","Roundoff","FinalAmount"].join(",")];return K.forEach(oe=>{const W=[te(oe.BillID),oe.BillDate,te(oe.PatientName),te(oe.DoctorName),oe.TotalMRP,oe.TotalDiscount,oe.TotalTaxableValue,oe.TotalGST,oe.AdditionalDiscount,oe.NetAmount,oe.Roundoff,oe.FinalAmount];ae.push(W.join(","))}),ae.join(`
`)},U=async(K,X)=>{try{const ae=new Blob([K],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const oe=await window.electronAPI.showSaveDialog({defaultPath:X,filters:[{name:"CSV Files",extensions:["csv"]}]});return!oe.canceled&&oe.filePath?(await window.electronAPI.writeFile(oe.filePath,K),{success:!0,filePath:oe.filePath,filename:X}):{success:!1,error:"Save canceled by user"}}else{const oe=document.createElement("a"),W=URL.createObjectURL(ae);return oe.setAttribute("href",W),oe.setAttribute("download",X),oe.style.visibility="hidden",document.body.appendChild(oe),oe.click(),document.body.removeChild(oe),URL.revokeObjectURL(W),{success:!0,filePath:`Downloaded: ${X}`,filename:X}}}catch(ae){return console.error("Error saving Billing Report file:",ae),{success:!1,error:ae.message}}},k=async K=>{try{o.value=20,i.value="Fetching payment data...";const X=await dt.get("/pharmacy/reports/payment",{params:{startDate:K.startDate,endDate:K.endDate}});if(X.data.success===!1)throw new Error(X.data.error||"Failed to fetch payment data");const ae=X.data.data||[];o.value=60,i.value="Processing payment data...",o.value=80,i.value="Generating CSV file...";const oe=S(ae);o.value=90,i.value="Preparing download...";const W=`payment_report_${K.startDate}_to_${K.endDate}.csv`,de=await E(oe,W);if(!de.success)throw new Error(de.error||"Failed to save report file");o.value=100,i.value="Payment Report generated successfully!",A.value={reportType:"Payment Report",totalRecords:ae.length,dateRange:{from:K.startDate,to:K.endDate},filename:W},d.value=!0;const Ae={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"Payment Report",format:"CSV",recordCount:ae.length,status:"Completed",filename:W};c.value.unshift(Ae),t.value=!0,n.value=`Payment Report generated successfully! ${ae.length} records included.`}catch(X){throw console.error("Payment Report generation error:",X),X}},S=K=>{const ae=[["BillID","BillDate","PatientName","Total Amount","Cash","Card","UPI","Bank Transfer","Cheque","Online","Other"].join(",")];return K.forEach(oe=>{const W=[te(oe.BillID),oe.BillDate,te(oe.PatientName),oe.TotalAmount,oe.Cash,oe.Card,oe.UPI,oe.BankTransfer,oe.Cheque,oe.Online,oe.Other];ae.push(W.join(","))}),ae.join(`
`)},E=async(K,X)=>{try{const ae=new Blob([K],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const oe=await window.electronAPI.showSaveDialog({defaultPath:X,filters:[{name:"CSV Files",extensions:["csv"]}]});return!oe.canceled&&oe.filePath?(await window.electronAPI.writeFile(oe.filePath,K),{success:!0,filePath:oe.filePath,filename:X}):{success:!1,error:"Save canceled by user"}}else{const oe=document.createElement("a"),W=URL.createObjectURL(ae);return oe.setAttribute("href",W),oe.setAttribute("download",X),oe.style.visibility="hidden",document.body.appendChild(oe),oe.click(),document.body.removeChild(oe),URL.revokeObjectURL(W),{success:!0,filePath:`Downloaded: ${X}`,filename:X}}}catch(ae){return console.error("Error saving Payment Report file:",ae),{success:!1,error:ae.message}}},C=async K=>{try{o.value=20,i.value="Fetching inventory transactions data...";const X=await dt.get("/pharmacy/reports/inventory-transactions",{params:{startDate:K.startDate,endDate:K.endDate}});if(X.data.success===!1)throw new Error(X.data.error||"Failed to fetch inventory transactions data");const ae=X.data.data||[];o.value=60,i.value="Processing inventory transactions data...",o.value=80,i.value="Generating CSV file...";const oe=P(ae);o.value=90,i.value="Preparing download...";const W=`inventory_transactions_report_${K.startDate}_to_${K.endDate}.csv`,de=await F(oe,W);if(!de.success)throw new Error(de.error||"Failed to save report file");o.value=100,i.value="Inventory Transactions Report generated successfully!",A.value={reportType:"Inventory Transactions Report",totalRecords:ae.length,dateRange:{from:K.startDate,to:K.endDate},filename:W},d.value=!0;const Ae={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"Inventory Transactions Report",format:"CSV",recordCount:ae.length,status:"Completed",filename:W};c.value.unshift(Ae),t.value=!0,n.value=`Inventory Transactions Report generated successfully! ${ae.length} records included.`}catch(X){throw console.error("Inventory Transactions Report generation error:",X),X}},P=K=>{const ae=[["Transaction Date","Medicine Name","Batch ID","Transaction Type","Quantity","Note","Inward Bill ID"].join(",")];return K.forEach(oe=>{const W=[oe.transactionDate,te(oe.medicineName),te(oe.batchId),te(oe.transactionType),oe.quantity,te(oe.note),te(oe.inwardBillId)];ae.push(W.join(","))}),ae.join(`
`)},F=async(K,X)=>{try{const ae=new Blob([K],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const oe=await window.electronAPI.showSaveDialog({defaultPath:X,filters:[{name:"CSV Files",extensions:["csv"]}]});return!oe.canceled&&oe.filePath?(await window.electronAPI.writeFile(oe.filePath,K),{success:!0,filePath:oe.filePath,filename:X}):{success:!1,error:"Save canceled by user"}}else{const oe=document.createElement("a"),W=URL.createObjectURL(ae);return oe.setAttribute("href",W),oe.setAttribute("download",X),oe.style.visibility="hidden",document.body.appendChild(oe),oe.click(),document.body.removeChild(oe),URL.revokeObjectURL(W),{success:!0,filePath:`Downloaded: ${X}`,filename:X}}}catch(ae){return console.error("Error saving Inventory Transactions Report file:",ae),{success:!1,error:ae.message}}},N=async K=>{try{o.value=20,i.value="Fetching expired inventory data...";const X=await dt.get("/pharmacy/reports/expired-inventory");if(X.data.success===!1)throw new Error(X.data.error||"Failed to fetch expired inventory data");const ae=X.data.data||[];o.value=60,i.value="Processing expired inventory data...",o.value=80,i.value="Generating CSV file...";const oe=L(ae);o.value=90,i.value="Preparing download...";const W=Dn(),de=`expired_inventory_report_${W}.csv`,Ae=await Y(oe,de);if(!Ae.success)throw new Error(Ae.error||"Failed to save report file");o.value=100,i.value="Expired Inventory Report generated successfully!",A.value={reportType:"Expired Inventory Report",totalRecords:ae.length,dateRange:{from:W,to:W},filename:de},d.value=!0;const Ce={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"Expired Inventory Report",format:"CSV",recordCount:ae.length,status:"Completed",filename:de};c.value.unshift(Ce),t.value=!0,n.value=`Expired Inventory Report generated successfully! ${ae.length} records included.`}catch(X){throw console.error("Expired Inventory Report generation error:",X),X}},L=K=>{const ae=[["Medicine Name","Company Name","Batch ID","Expiry Date","MRP","cost excl. GST","GST%","cost incl. GST","Inventory Quantity"].join(",")];return K.forEach(oe=>{const W=[te(oe.medicineName),te(oe.companyName),te(oe.batchId),oe.expiryDate,oe.mrp,oe["cost excl. GST"]||0,oe["GST%"]||0,oe["cost incl. GST"]||0,oe.inventoryQuantity];ae.push(W.join(","))}),ae.join(`
`)},ie=async K=>{try{o.value=20,i.value="Fetching purchase bill data...";const X=await dt.get("/pharmacy/reports/purchase-bill",{params:{startDate:K.startDate,endDate:K.endDate}});if(X.data.success===!1)throw new Error(X.data.error||"Failed to fetch purchase bill data");const ae=X.data.data||[];o.value=60,i.value="Processing purchase bill data...",o.value=80,i.value="Generating CSV file...";const oe=le(ae);o.value=90,i.value="Preparing download...";const W=`purchase_bill_report_${K.startDate}_to_${K.endDate}.csv`,de=await Q(oe,W);if(!de.success)throw new Error(de.error||"Failed to save report file");o.value=100,i.value="Purchase Bill Report generated successfully!",A.value={reportType:"Purchase Bill Report",totalRecords:ae.length,dateRange:{from:K.startDate,to:K.endDate},filename:W},d.value=!0;const Ae={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"Purchase Bill Report",format:"CSV",recordCount:ae.length,status:"Completed",filename:W};c.value.unshift(Ae),t.value=!0,n.value=`Purchase Bill Report generated successfully! ${ae.length} records included.`}catch(X){throw console.error("Purchase Bill Report generation error:",X),X}},le=K=>{const ae=[["SupplierName","SupplierGSTIN","TotalMRP","TotalTaxableValue","TotalGST","AdditionalDiscount","NetAmount"].join(",")];return K.forEach(oe=>{const W=[te(oe.SupplierName),te(oe.SupplierGSTIN),oe.TotalMRP,oe.TotalTaxableValue,oe.TotalGST,oe.AdditionalDiscount,oe.NetAmount];ae.push(W.join(","))}),ae.join(`
`)},Q=async(K,X)=>{try{const ae=new Blob([K],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const oe=await window.electronAPI.showSaveDialog({defaultPath:X,filters:[{name:"CSV Files",extensions:["csv"]}]});return!oe.canceled&&oe.filePath?(await window.electronAPI.writeFile(oe.filePath,K),{success:!0,filePath:oe.filePath,filename:X}):{success:!1,error:"Save canceled by user"}}else{const oe=document.createElement("a"),W=URL.createObjectURL(ae);return oe.setAttribute("href",W),oe.setAttribute("download",X),oe.style.visibility="hidden",document.body.appendChild(oe),oe.click(),document.body.removeChild(oe),URL.revokeObjectURL(W),{success:!0,filePath:`Downloaded: ${X}`,filename:X}}}catch(ae){return console.error("Error saving Purchase Bill Report file:",ae),{success:!1,error:ae.message}}},Z=async K=>{try{o.value=20,i.value="Fetching HSN-wise GST data...";const X=await dt.get("/pharmacy/reports/hsn-wise-gst",{params:{startDate:K.startDate,endDate:K.endDate}});if(X.data.success===!1)throw new Error(X.data.error||"Failed to fetch HSN-wise GST data");const ae=X.data.data||[];o.value=60,i.value="Processing HSN-wise GST data...",o.value=80,i.value="Generating CSV file...";const oe=ce(ae);o.value=90,i.value="Preparing download...";const W=`hsn_wise_gst_report_${K.startDate}_to_${K.endDate}.csv`,de=await J(oe,W);if(!de.success)throw new Error(de.error||"Failed to save report file");o.value=100,i.value="HSN-wise GST Report generated successfully!",A.value={reportType:"HSN-wise GST Report",totalRecords:ae.length,dateRange:{from:K.startDate,to:K.endDate},filename:W},d.value=!0;const Ae={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"HSN-wise GST Report",format:"CSV",recordCount:ae.length,status:"Completed",filename:W};c.value.unshift(Ae),t.value=!0,n.value=`HSN-wise GST Report generated successfully! ${ae.length} records included.`}catch(X){throw console.error("HSN-wise GST Report generation error:",X),X}},ce=K=>{const ae=[["HSN","TotalQuantity","TotalTaxableValue","GSTAmount","TotalAmount"].join(",")];return K.forEach(oe=>{const W=[te(oe.HSN),oe.TotalQuantity,oe.TotalTaxableValue,oe.GSTAmount,oe.TotalAmount];ae.push(W.join(","))}),ae.join(`
`)},J=async(K,X)=>{try{const ae=new Blob([K],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const oe=await window.electronAPI.showSaveDialog({defaultPath:X,filters:[{name:"CSV Files",extensions:["csv"]}]});return!oe.canceled&&oe.filePath?(await window.electronAPI.writeFile(oe.filePath,K),{success:!0,filePath:oe.filePath,filename:X}):{success:!1,error:"Save canceled by user"}}else{const oe=document.createElement("a"),W=URL.createObjectURL(ae);return oe.setAttribute("href",W),oe.setAttribute("download",X),oe.style.visibility="hidden",document.body.appendChild(oe),oe.click(),document.body.removeChild(oe),URL.revokeObjectURL(W),{success:!0,filePath:`Downloaded: ${X}`,filename:X}}}catch(ae){return console.error("Error saving HSN-wise GST Report file:",ae),{success:!1,error:ae.message}}},se=async K=>{try{o.value=20,i.value="Fetching rate-wise GST data...";const X=await dt.get("/pharmacy/reports/rate-wise-gst",{params:{startDate:K.startDate,endDate:K.endDate}});if(X.data.success===!1)throw new Error(X.data.error||"Failed to fetch rate-wise GST data");const ae=X.data.data||[];o.value=60,i.value="Processing rate-wise GST data...",o.value=80,i.value="Generating CSV file...";const oe=G(ae);o.value=90,i.value="Preparing download...";const W=`rate_wise_gst_report_${K.startDate}_to_${K.endDate}.csv`,de=await D(oe,W);if(!de.success)throw new Error(de.error||"Failed to save report file");o.value=100,i.value="Rate-wise GST Report generated successfully!",A.value={reportType:"Rate-wise GST Report",totalRecords:ae.length,dateRange:{from:K.startDate,to:K.endDate},filename:W},d.value=!0;const Ae={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"Rate-wise GST Report",format:"CSV",recordCount:ae.length,status:"Completed",filename:W};c.value.unshift(Ae),t.value=!0,n.value=`Rate-wise GST Report generated successfully! ${ae.length} records included.`}catch(X){throw console.error("Rate-wise GST Report generation error:",X),X}},G=K=>{const ae=[["GST%","TotalTaxableValue","GSTAmount","TotalAmount"].join(",")];return K.forEach(oe=>{const W=[oe["GST%"],oe.TotalTaxableValue,oe.GSTAmount,oe.TotalAmount];ae.push(W.join(","))}),ae.join(`
`)},D=async(K,X)=>{try{const ae=new Blob([K],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const oe=await window.electronAPI.showSaveDialog({defaultPath:X,filters:[{name:"CSV Files",extensions:["csv"]}]});return!oe.canceled&&oe.filePath?(await window.electronAPI.writeFile(oe.filePath,K),{success:!0,filePath:oe.filePath,filename:X}):{success:!1,error:"Save canceled by user"}}else{const oe=document.createElement("a"),W=URL.createObjectURL(ae);return oe.setAttribute("href",W),oe.setAttribute("download",X),oe.style.visibility="hidden",document.body.appendChild(oe),oe.click(),document.body.removeChild(oe),URL.revokeObjectURL(W),{success:!0,filePath:`Downloaded: ${X}`,filename:X}}}catch(ae){return console.error("Error saving Rate-wise GST Report file:",ae),{success:!1,error:ae.message}}},j=async K=>{try{o.value=20,i.value="Fetching inventory snapshot data...";const X=await dt.get("/pharmacy/reports/inventory-snapshot");if(X.data.success===!1)throw new Error(X.data.error||"Failed to fetch inventory snapshot data");const ae=X.data.data||[];o.value=60,i.value="Processing inventory snapshot data...",o.value=80,i.value="Generating CSV file...";const oe=ne(ae);o.value=90,i.value="Preparing download...";const W=Dn(),de=`inventory_snapshot_report_${W}.csv`,Ae=await H(oe,de);if(!Ae.success)throw new Error(Ae.error||"Failed to save report file");o.value=100,i.value="Inventory Snapshot Report generated successfully!",A.value={reportType:"Inventory Snapshot Report",totalRecords:ae.length,dateRange:{from:W,to:W},filename:de},d.value=!0;const Ce={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"Inventory Snapshot Report",format:"CSV",recordCount:ae.length,status:"Completed",filename:de};c.value.unshift(Ce),t.value=!0,n.value=`Inventory Snapshot Report generated successfully! ${ae.length} records included.`}catch(X){throw console.error("Inventory Snapshot Report generation error:",X),X}},ne=K=>{const ae=[["MedicineName","HSN","Product_form","Group","batchNumber","Expiry Date","PackType","UnitsPerpack","MRP","COST excl. GST","GST%","COST incl. GST","Quantity","InwardBillID","Location"].join(",")];return K.forEach(oe=>{const W=[te(oe.MedicineName),te(oe.HSN),te(oe.Product_form),te(oe.Group),te(oe.batchNumber),oe["Expiry Date"],te(oe.PackType),oe.UnitsPerpack,oe.MRP,oe["COST excl. GST"]||0,oe["GST%"]||0,oe["COST incl. GST"]||0,oe.Quantity,te(oe.InwardBillID),te(oe.Location)];ae.push(W.join(","))}),ae.join(`
`)},H=async(K,X)=>{try{const ae=new Blob([K],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const oe=await window.electronAPI.showSaveDialog({defaultPath:X,filters:[{name:"CSV Files",extensions:["csv"]}]});return!oe.canceled&&oe.filePath?(await window.electronAPI.writeFile(oe.filePath,K),{success:!0,filePath:oe.filePath,filename:X}):{success:!1,error:"Save canceled by user"}}else{const oe=document.createElement("a"),W=URL.createObjectURL(ae);return oe.setAttribute("href",W),oe.setAttribute("download",X),oe.style.visibility="hidden",document.body.appendChild(oe),oe.click(),document.body.removeChild(oe),URL.revokeObjectURL(W),{success:!0,filePath:`Downloaded: ${X}`,filename:X}}}catch(ae){return console.error("Error saving Inventory Snapshot Report file:",ae),{success:!1,error:ae.message}}},te=K=>{if(K==null)return"";const X=String(K);return X.includes(",")||X.includes('"')||X.includes(`
`)?`"${X.replace(/"/g,'""')}"`:X},Y=async(K,X)=>{try{const ae=new Blob([K],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const oe=await window.electronAPI.showSaveDialog({defaultPath:X,filters:[{name:"CSV Files",extensions:["csv"]}]});return!oe.canceled&&oe.filePath?(await window.electronAPI.writeFile(oe.filePath,K),{success:!0,filePath:oe.filePath,filename:X}):{success:!1,error:"Save canceled by user"}}else{const oe=document.createElement("a"),W=URL.createObjectURL(ae);return oe.setAttribute("href",W),oe.setAttribute("download",X),oe.style.visibility="hidden",document.body.appendChild(oe),oe.click(),document.body.removeChild(oe),URL.revokeObjectURL(W),{success:!0,filePath:`Downloaded: ${X}`,filename:X}}}catch(ae){return console.error("Error saving Expired Inventory Report file:",ae),{success:!1,error:ae.message}}};return cn(()=>{console.log("Pharmacy Reports page initialized")}),(K,X)=>{const ae=I("v-col"),oe=I("v-card-text"),W=I("v-card"),de=I("v-progress-circular"),Ae=I("v-card-title"),Ce=I("v-row"),De=I("v-data-table"),xe=I("v-icon"),ke=I("v-snackbar"),Ee=I("v-main");return R(),ve(Ee,null,{default:u(()=>[l(xn,{feature:"pharmacy.reports"},{default:u(()=>[l(Ce,{"aria-label":"pharmacy reports row",style:{height:"calc(100vh - 64px)"},class:"d-flex align-stretch ma-0"},{default:u(()=>[l(ae,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[p("div",J7e,[l(X7e,{filters:f.value,loading:s.value,onFilterChange:h,onStartReport:y,onClearFilters:v},null,8,["filters","loading"])])]),_:1}),l(ae,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[p("div",Z7e,[l(W,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[l(W,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(oe,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[c.value.length>0?(R(),me(ze,{key:0},[p("strong",null,q(c.value.length),1),O(" report"+q(c.value.length!==1?"s":"")+" available ",1)],64)):(R(),me("strong",eGe,"Generate Reports"))]),_:1})]),_:1}),s.value?(R(),ve(Ce,{key:0,"no-gutters":""},{default:u(()=>[l(ae,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[p("div",tGe,[l(de,{"model-value":o.value,color:"primary",size:"64",width:"6"},{default:u(()=>[O(q(o.value)+"% ",1)]),_:1},8,["model-value"]),p("div",nGe,q(i.value||"Generating report..."),1),A.value?(R(),me("div",aGe,[l(W,{class:"mx-auto","max-width":"300",outlined:""},{default:u(()=>[l(Ae,{class:"text-h6"},{default:u(()=>[...X[2]||(X[2]=[O("Report Summary",-1)])]),_:1}),l(oe,null,{default:u(()=>[p("div",rGe,[X[3]||(X[3]=p("strong",null,"Report Type:",-1)),O(" "+q(A.value.reportType),1)]),p("div",sGe,[X[4]||(X[4]=p("strong",null,"Total Records:",-1)),O(" "+q(A.value.totalRecords),1)]),A.value.dateRange?(R(),me("div",oGe,[X[5]||(X[5]=p("strong",null,"Date Range:",-1)),O(" "+q(A.value.dateRange.from)+" - "+q(A.value.dateRange.to),1)])):_e("",!0),d.value&&A.value.filename?(R(),me("div",iGe,[X[6]||(X[6]=p("strong",null,"File:",-1)),O(" "+q(A.value.filename),1)])):_e("",!0)]),_:1})]),_:1})])):_e("",!0)])]),_:1})]),_:1})):c.value.length>0?(R(),ve(Ce,{key:1,"no-gutters":""},{default:u(()=>[l(ae,{cols:"12",class:"scroll-element mt-2",style:{"padding-bottom":"20px"}},{default:u(()=>[l(De,{headers:m.value,items:c.value,class:"elevation-1 ma-2",density:"comfortable"},null,8,["headers","items"])]),_:1})]),_:1})):(R(),ve(Ce,{key:2,"no-gutters":"",style:{height:"calc(100% - 60px)"}},{default:u(()=>[l(ae,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%"}},{default:u(()=>[p("div",lGe,[l(xe,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...X[7]||(X[7]=[O("mdi-chart-line",-1)])]),_:1}),X[8]||(X[8]=p("div",{class:"text-h6 mb-2"},"Generate Reports",-1)),X[9]||(X[9]=p("div",{class:"text-body-2 text-medium-emphasis"},"Configure report settings and generate comprehensive pharmacy reports",-1))])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1}),l(ke,{modelValue:t.value,"onUpdate:modelValue":X[0]||(X[0]=ye=>t.value=ye),class:"elevation-24",color:"success"},{default:u(()=>[O(q(n.value),1)]),_:1},8,["modelValue"]),l(ke,{modelValue:a.value,"onUpdate:modelValue":X[1]||(X[1]=ye=>a.value=ye),class:"elevation-24",color:"error"},{default:u(()=>[O(q(r.value),1)]),_:1},8,["modelValue"])]),_:1})]),_:1})}}},cGe=Xt(uGe,[["__scopeId","data-v-2d811d1f"]]),dGe=""+new URL("images/login_screen-CYaYXXaw.png",import.meta.url).href,AGe=""+new URL("images/login_screen_card-37SK0J6l.png",import.meta.url).href,fGe=""+new URL("google-ax7zTtAP.webp",import.meta.url).href,mGe={key:0,class:"window-controls"},hGe={class:"d-flex justify-center align-center",style:{height:"100%",padding:"40px"}},vGe={class:"card-content"},pGe={class:"terms-text mb-4 text-center text-caption"},gGe={__name:"login-page",setup(e){const t=ea(),n=Zi(),a=Ka(),r=ee(()=>t.state.auth.loading),s=ee(()=>t.state.auth.error),o=M(!1);cn(()=>{if(!a){const v=new URLSearchParams(window.location.search).get("endpoint"),y=v?`/web/login?endpoint=${encodeURIComponent(v)}`:"/web/login";n.replace(y);return}const f=t.getters["auth/isAuthenticated"],m=!!localStorage.getItem("desktopSessionToken");f&&(m?n.replace("/home"):n.replace("/desktop/passcode"))});const i=async()=>{try{console.log("Starting authentication process...");const f=await t.dispatch("auth/signInWithGoogle");t.getters["auth/isAuthenticated"]?(sessionStorage.setItem("isFirstTimeSignIn",f?"true":"false"),await n.replace("/desktop/passcode")):console.error("Authentication failed or user not authenticated after attempt.")}catch(f){console.error("Component caught authentication error:",f)}},c=()=>{try{if(window.require){const{shell:f}=window.require("electron");f.openExternal("https://www.evamed.in/terms")}else window.open("https://www.evamed.in/terms","_blank")}catch(f){console.error("Error opening terms link:",f),window.open("https://www.evamed.in/terms","_blank")}},A=async()=>{if(!(!a||o.value))try{if(o.value=!0,window.require){const{ipcRenderer:f}=window.require("electron"),m=await f.invoke("toggle-fullscreen");if(m.success)console.log(`Fullscreen toggled: ${m.wasFullscreen}  ${m.isFullscreen}`),m.isFullscreen||console.log("Exited fullscreen - native window controls now available");else throw new Error(m.error||"Failed to exit fullscreen")}else throw new Error("Electron IPC not available")}catch(f){console.error("Failed to exit fullscreen:",f)}finally{o.value=!1}},d=async()=>{if(!(!a||o.value))try{if(o.value=!0,window.require){const{ipcRenderer:f}=window.require("electron"),m=await f.invoke("window-close");if(m.success)console.log("Window close initiated");else throw new Error(m.error||"Failed to close window")}else throw new Error("Electron IPC not available")}catch(f){console.error("Failed to close window:",f)}finally{o.value=!1}};return(f,m)=>{const h=I("v-icon"),v=I("v-btn"),y=I("v-tooltip"),g=I("v-img"),w=I("v-alert"),b=I("v-card");return R(),me("div",{class:"login-wrapper login-page-root",style:Rt({backgroundImage:`url(${Oe(dGe)})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",width:"100vw",height:"100vh"})},[Oe(a)?(R(),me("div",mGe,[l(y,{text:"Exit Fullscreen",location:"bottom"},{activator:u(({props:x})=>[l(v,Fe(x,{icon:"",size:"small",variant:"outlined",class:"control-btn",onClick:A,disabled:o.value}),{default:u(()=>[l(h,null,{default:u(()=>[...m[0]||(m[0]=[O("mdi-fullscreen-exit",-1)])]),_:1})]),_:1},16,["disabled"])]),_:1}),l(y,{text:"Close",location:"bottom"},{activator:u(({props:x})=>[l(v,Fe(x,{icon:"",size:"small",variant:"outlined",class:"control-btn close-btn",onClick:d,disabled:o.value}),{default:u(()=>[l(h,null,{default:u(()=>[...m[1]||(m[1]=[O("mdi-close",-1)])]),_:1})]),_:1},16,["disabled"])]),_:1})])):_e("",!0),p("div",hGe,[l(b,{elevation:"2",class:"login-card",rounded:"xl"},{default:u(()=>[l(g,{src:Oe(AGe),cover:"",height:"300",class:"card-image"},null,8,["src"]),p("div",vGe,[p("p",pGe,[m[2]||(m[2]=O(" By continuing, you agree to our ",-1)),p("a",{href:"#",onClick:mn(c,["prevent"]),class:"terms-link"},"Terms and Conditions"),m[3]||(m[3]=O(". ",-1))]),Oe(a)?(R(),ve(v,{key:0,block:"",variant:"elevated",size:"large",loading:r.value,disabled:r.value,onClick:i,class:"text-none btn-hover-enhanced login-button",color:"primary"},{prepend:u(()=>[l(g,{src:Oe(fGe),height:"24",width:"24",contain:""},null,8,["src"])]),default:u(()=>[m[4]||(m[4]=O(" Sign in with Google ",-1))]),_:1},8,["loading","disabled"])):_e("",!0),s.value?(R(),ve(w,{key:1,type:"error",variant:"tonal",density:"compact",class:"mt-4 text-left text-caption",closable:""},{default:u(()=>[O(q(s.value),1)]),_:1})):_e("",!0)])]),_:1})])],4)}}},yGe=Xt(gGe,[["__scopeId","data-v-998b6d38"]]),_Ge={name:"WelcomePage",setup(){const e=Zi(),t=M(!0),n=M(0),a=M({first_name:"",last_name:"",registrationNumber:"",phone:"",pincode:"",specialization:""}),r=M(null),s=M(!1),o=M(null),i=[f=>!!f||"this information is required"];return cn(()=>{t.value=!0}),{showDialog:t,currentStep:n,userProfile:a,profileForm:r,isSubmitting:s,profileError:o,doctorSpecialization:Dw,nameRules:sr,regNumberRules:FM,phoneRules:tv,pincodeRules:rhe,specializationRules:i,submitProfile:async()=>{const{valid:f}=await r.value.validate();if(!f){o.value="Please fill in all required fields correctly.";return}s.value=!0,o.value=null;try{const m=Os.currentUser;if(!m||!m.email)throw new Error("User authentication required");const h={first_name:a.value.first_name,last_name:a.value.last_name,email:m.email,phone:a.value.phone,address:"",city:"",state:"",country:"India",pincode:a.value.pincode,registration_number:a.value.registrationNumber,specialization:a.value.specialization,premium_level:"basic",premium_end_date:null,max_devices:1,auth_id:m.uid};console.log("=== DETAILED API PAYLOAD DEBUG ==="),console.log("Full payload:",JSON.stringify(h,null,2)),console.log("Registration number:",h.registration_number),console.log("Specialization:",h.specialization),console.log("Auth ID:",h.auth_id),console.log("=====================================");const v=await m.getIdToken(),g=await Cr.post("https://api.origamimed.com/users/",h,{headers:{Authorization:`Bearer ${v}`,"Content-Type":"application/json"}});if(g.status===200||g.status===201)console.log("User profile created successfully"),n.value=1;else throw new Error("Failed to create user profile")}catch(m){if(console.error("Profile submission error:",m),m.response){const h=m.response.status;h>=400&&h<500?o.value="Please check your information and try again.":o.value="Server error. Please try again later."}else m.request?o.value="Network error. Please check your connection and try again.":o.value=m.message||"Something went wrong. Please try again."}finally{s.value=!1}},goToHome:()=>{t.value=!1,setTimeout(()=>{e.push("/home")},200)},openVideos:()=>{try{if(window.require){const{shell:f}=window.require("electron");f.openExternal("https://www.evamed.in/videos")}else window.open("https://www.evamed.in/videos","_blank")}catch(f){console.error("Error opening videos link:",f),window.open("https://www.evamed.in/videos","_blank")}}}}};function wGe(e,t,n,a,r,s){const o=I("v-toolbar-title"),i=I("v-toolbar"),c=I("v-stepper-item"),A=I("v-divider"),d=I("v-stepper-header"),f=I("v-text-field"),m=I("v-col"),h=I("v-combobox"),v=I("v-row"),y=I("v-form"),g=I("v-alert"),w=I("v-card-text"),b=I("v-spacer"),x=I("v-btn"),T=I("v-card-actions"),U=I("v-stepper-window-item"),k=I("v-list-item-title"),S=I("v-list-item-subtitle"),E=I("v-list-item"),C=I("v-list"),P=I("v-stepper-window"),F=I("v-stepper"),N=I("v-card"),L=I("v-dialog");return R(),me("div",null,[l(L,{modelValue:a.showDialog,"onUpdate:modelValue":t[10]||(t[10]=ie=>a.showDialog=ie),persistent:"","max-width":"700px","overlay-opacity":"0.7"},{default:u(()=>[l(N,null,{default:u(()=>[l(i,{color:"primary",dark:"",flat:"",class:"brand-blue-toolbar"},{default:u(()=>[l(o,null,{default:u(()=>[...t[11]||(t[11]=[O("Welcome to evamed!",-1)])]),_:1})]),_:1}),l(F,{modelValue:a.currentStep,"onUpdate:modelValue":t[9]||(t[9]=ie=>a.currentStep=ie),"alt-labels":""},{default:u(()=>[l(d,null,{default:u(()=>[l(c,{complete:a.currentStep>0,step:"1",title:"Setup Profile"},null,8,["complete"]),l(A),l(c,{step:"2",title:"Get Started"})]),_:1}),l(P,{modelValue:a.currentStep,"onUpdate:modelValue":t[8]||(t[8]=ie=>a.currentStep=ie)},{default:u(()=>[l(U,{value:0},{default:u(()=>[l(w,{class:"pt-4"},{default:u(()=>[t[13]||(t[13]=p("h2",{class:"text-h5 mb-3"},"Let's set up your profile with evamed.",-1)),t[14]||(t[14]=p("p",{class:"mb-4"},"Please provide your professional details to get started:",-1)),l(y,{ref:"profileForm",onSubmit:mn(a.submitProfile,["prevent"])},{default:u(()=>[l(v,{"no-gutters":"",class:"mx-0"},{default:u(()=>[l(m,{cols:"12",md:"6",class:"pb-2 pr-md-2"},{default:u(()=>[l(f,{modelValue:a.userProfile.first_name,"onUpdate:modelValue":t[0]||(t[0]=ie=>a.userProfile.first_name=ie),label:"First Name",rules:a.nameRules,variant:"outlined",density:"compact",required:""},null,8,["modelValue","rules"])]),_:1}),l(m,{cols:"12",md:"6",class:"pb-2 pl-md-2"},{default:u(()=>[l(f,{modelValue:a.userProfile.last_name,"onUpdate:modelValue":t[1]||(t[1]=ie=>a.userProfile.last_name=ie),label:"Last Name",rules:a.nameRules,variant:"outlined",density:"compact",required:""},null,8,["modelValue","rules"])]),_:1}),l(m,{cols:"12",md:"6",class:"pb-2 pr-md-2"},{default:u(()=>[l(f,{modelValue:a.userProfile.registrationNumber,"onUpdate:modelValue":t[2]||(t[2]=ie=>a.userProfile.registrationNumber=ie),label:"Medical Registration Number",rules:a.regNumberRules,variant:"outlined",density:"compact",required:""},null,8,["modelValue","rules"])]),_:1}),l(m,{cols:"12",md:"6",class:"pb-2 pl-md-2"},{default:u(()=>[l(f,{modelValue:a.userProfile.phone,"onUpdate:modelValue":t[3]||(t[3]=ie=>a.userProfile.phone=ie),label:"Mobile Number",rules:a.phoneRules,variant:"outlined",density:"compact",required:""},null,8,["modelValue","rules"])]),_:1}),l(m,{cols:"12",md:"6",class:"pb-2 pr-md-2"},{default:u(()=>[l(f,{modelValue:a.userProfile.pincode,"onUpdate:modelValue":t[4]||(t[4]=ie=>a.userProfile.pincode=ie),label:"Practice Pincode",rules:a.pincodeRules,variant:"outlined",density:"compact",required:""},null,8,["modelValue","rules"])]),_:1}),l(m,{cols:"12",md:"6",class:"pb-2 pl-md-2"},{default:u(()=>[l(h,{modelValue:a.userProfile.specialization,"onUpdate:modelValue":t[5]||(t[5]=ie=>a.userProfile.specialization=ie),items:a.doctorSpecialization,label:"Specialization",rules:a.specializationRules,variant:"outlined",density:"compact",required:""},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1},8,["onSubmit"]),a.profileError?(R(),ve(g,{key:0,type:"error",variant:"tonal",density:"compact",class:"mt-4",closable:"","onClick:close":t[6]||(t[6]=ie=>a.profileError=null)},{default:u(()=>[O(q(a.profileError),1)]),_:1})):_e("",!0),l(g,{type:"info",variant:"tonal",density:"compact",class:"mt-4",icon:"mdi-information"},{default:u(()=>[...t[12]||(t[12]=[p("small",null," This information is shared with evamed. It is used to verify your identity and ensure only licensed practitioners can access the software. ",-1)])]),_:1})]),_:1}),l(T,{class:"px-6 pb-6"},{default:u(()=>[l(b),l(x,{color:"primary",class:"btn-hover-base text-none",onClick:a.submitProfile,loading:a.isSubmitting,disabled:a.isSubmitting},{default:u(()=>[...t[15]||(t[15]=[O(" Continue ",-1)])]),_:1},8,["onClick","loading","disabled"])]),_:1})]),_:1}),l(U,{value:1},{default:u(()=>[l(w,{class:"pt-6"},{default:u(()=>[t[21]||(t[21]=p("h2",{class:"text-h5 mb-4"},"Let's get started",-1)),t[22]||(t[22]=p("p",{class:"mb-4"},"We're excited to have you onboard! Choose how you'd like to begin:",-1)),l(C,null,{default:u(()=>[l(E,{"prepend-icon":"mdi-play-circle"},{default:u(()=>[l(k,null,{default:u(()=>[...t[16]||(t[16]=[O("Watch demo videos",-1)])]),_:1}),l(S,null,{default:u(()=>[t[17]||(t[17]=O("View our tutorials and take a demo at ",-1)),p("a",{href:"#",onClick:t[7]||(t[7]=mn((...ie)=>a.openVideos&&a.openVideos(...ie),["prevent"])),class:"video-link"},"our website"),t[18]||(t[18]=O(".",-1))]),_:1})]),_:1}),l(E,{"prepend-icon":"mdi-account-cog"},{default:u(()=>[l(k,null,{default:u(()=>[...t[19]||(t[19]=[O("Setup your practice",-1)])]),_:1}),l(S,null,{default:u(()=>[...t[20]||(t[20]=[O("Configure your doctor, clinic and print details in the Admin tab.",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),l(T,{class:"px-6 pb-6"},{default:u(()=>[l(b),l(x,{color:"primary",class:"btn-hover-base text-none",onClick:a.goToHome},{default:u(()=>[...t[23]||(t[23]=[O(" GET STARTED ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])])}const bGe=Xt(_Ge,[["render",wGe],["__scopeId","data-v-57136c3e"]]),xGe={class:"splash-screen"},CGe={class:"splash-content"},SGe={class:"logo-container"},EGe={class:"loading-container"},BGe={key:0,class:"timeout-message"},kGe={__name:"SplashScreen",setup(e){const t=M(!1);let n=null;return cn(()=>{n=setTimeout(()=>{t.value=!0},3e3)}),zl(()=>{n&&clearTimeout(n)}),(a,r)=>{const s=I("v-img"),o=I("v-progress-linear"),i=I("v-alert");return R(),me("div",xGe,[p("div",CGe,[p("div",SGe,[l(s,{src:Oe(H_),alt:"evamed Logo",width:"120",height:"120",class:"logo-image"},null,8,["src"])]),r[2]||(r[2]=p("h1",{class:"app-name"},"evamed",-1)),p("div",EGe,[r[0]||(r[0]=p("p",{class:"loading-text"},"Initializing...",-1)),l(o,{indeterminate:"",color:"primary",height:"4",rounded:"",class:"loading-bar"})]),t.value?(R(),me("div",BGe,[l(i,{type:"info",variant:"tonal",density:"compact",class:"mt-4"},{default:u(()=>[...r[1]||(r[1]=[O(" Taking longer than usual. Please wait... ",-1)])]),_:1})])):_e("",!0)])])}}},TGe=Xt(kGe,[["__scopeId","data-v-ff0066be"]]),IGe={class:"splash-page"},FGe={__name:"splash-page",setup(e){return(t,n)=>(R(),me("div",IGe,[l(TGe)]))}},PGe=Xt(FGe,[["__scopeId","data-v-bb0f5d68"]]),DGe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z'%20/%3e%3c/svg%3e",UGe={__name:"mobile-home",setup(e){const t=M("queue"),n=M(!1),a=r=>{t.value=r,setTimeout(()=>{n.value=!1},150)};return(r,s)=>{const o=I("v-app-bar-title"),i=I("v-spacer"),c=I("v-icon"),A=I("v-btn"),d=I("v-app-bar"),f=I("v-card-title"),m=I("v-col"),h=I("v-row"),v=I("v-card"),y=I("v-list-item-title"),g=I("v-list-item"),w=I("v-list"),b=I("v-navigation-drawer"),x=I("v-main");return R(),me(ze,null,[l(d,{density:"compact",color:"primary",elevation:"2",class:"app-header"},{default:u(()=>[l(o,{class:"text-h6 font-weight-medium"},{default:u(()=>[...s[5]||(s[5]=[O(" EvaMed ",-1)])]),_:1}),l(i),l(A,{icon:"",variant:"text",onClick:s[0]||(s[0]=mn(T=>n.value=!n.value,["stop"])),class:"btn-hover-base"},{default:u(()=>[l(c,null,{default:u(()=>[...s[6]||(s[6]=[p("img",{src:DGe,alt:"Menu",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1}),l(b,{modelValue:n.value,"onUpdate:modelValue":s[4]||(s[4]=T=>n.value=T),location:"bottom",temporary:"",class:"navigation-drawer",height:"280"},{default:u(()=>[l(v,{rounded:"lg",color:"surfaceContainer",class:"navigation-card"},{default:u(()=>[l(h,{"no-gutters":""},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(v,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(h,{"no-gutters":""},{default:u(()=>[l(m,{cols:"11"},{default:u(()=>[l(f,{class:"pa-0 pl-2"},{default:u(()=>[...s[7]||(s[7]=[O("Navigation",-1)])]),_:1})]),_:1}),l(m,{cols:"1"},{default:u(()=>[l(A,{icon:"",size:"x-small",onClick:s[1]||(s[1]=T=>n.value=!1)},{default:u(()=>[l(c,null,{default:u(()=>[...s[8]||(s[8]=[p("img",{src:Yl,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(h,{"no-gutters":""},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(v,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(w,{class:"nav-list"},{default:u(()=>[l(g,{class:ct([{"active-item":t.value==="home"},"nav-item btn-hover-base"]),onClick:s[2]||(s[2]=T=>a("home")),ripple:""},{prepend:u(()=>[l(c,{color:t.value==="home"?"primary":"grey-darken-1",class:"nav-icon"},{default:u(()=>[...s[9]||(s[9]=[O(" mdi-home-outline ",-1)])]),_:1},8,["color"])]),default:u(()=>[l(y,{class:ct([{"active-title":t.value==="home"},"nav-title"])},{default:u(()=>[...s[10]||(s[10]=[O(" Home ",-1)])]),_:1},8,["class"])]),_:1},8,["class"]),l(g,{class:ct([{"active-item":t.value==="queue"},"nav-item btn-hover-base"]),onClick:s[3]||(s[3]=T=>a("queue")),ripple:""},{prepend:u(()=>[l(c,{color:t.value==="queue"?"primary":"grey-darken-1",class:"nav-icon"},{default:u(()=>[...s[11]||(s[11]=[O(" mdi-clipboard-list-outline ",-1)])]),_:1},8,["color"])]),default:u(()=>[l(y,{class:ct([{"active-title":t.value==="queue"},"nav-title"])},{default:u(()=>[...s[12]||(s[12]=[O(" Queue ",-1)])]),_:1},8,["class"])]),_:1},8,["class"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(x,{class:"pt-0"},{default:u(()=>[t.value==="home"?(R(),me(ze,{key:0},[O(" This is home ")],64)):_e("",!0),t.value==="queue"?(R(),ve(dH,{key:1})):_e("",!0)]),_:1})],64)}}},RGe=Xt(UGe,[["__scopeId","data-v-dd4f3937"]]),NGe={class:"d-flex justify-center align-center",style:{height:"100%"}},VGe={class:"text-center"},LGe={key:1,class:"d-flex justify-center align-center pa-4",style:{"min-height":"50vh"}},MGe={class:"text-center"},OGe={class:"d-flex justify-center align-center pa-4",style:{"min-height":"30vh"}},HGe={class:"text-center"},$Ge={__name:"patient-detail-mobile",setup(e){const t=Gh(),n=Zi(),a=M(!0),r=M(!1),s=M(null),o=M(0),i=M(!1),c=M(""),A=M("info"),d=M(4e3),f=M(navigator.onLine),m=M(t.params.id),h=M({}),v=M([]),y=M({}),g=(Q,Z="Unknown")=>{console.error(`Mobile Patient Detail Error (${Z}):`,Q),Q?.code==="NETWORK_ERROR"||Q?.response?.status>=500||!Q?.response||Q?.message?.includes("timeout")?s.value=`${Z} error. Please check your connection and try again.`:(i.value=!0,c.value=`${Z}: ${Q?.response?.data?.message||Q.message||"Unknown error occurred"}`,A.value="error")},w=Q=>{i.value=!0,c.value=Q,A.value="success",d.value=3e3},b=Q=>{i.value=!0,c.value=Q,A.value="warning",d.value=5e3},x=ee(()=>{try{return h.value?.name||"Unknown Patient"}catch(Q){return console.warn("Error accessing patient name:",Q),"Unknown Patient"}}),T=(Q,Z=15e3)=>Promise.race([Q,new Promise((ce,J)=>setTimeout(()=>J(new Error("Request timeout")),Z))]),U=()=>{try{window.history.length>1?n.back():n.push("/patients")}catch(Q){console.error("Navigation error:",Q),n.push("/patients")}},k=async()=>{try{if(!m.value)throw new Error("Patient ID is required");const Q=await T(Xk(m.value));if(!Q?.data)throw new Error("No patient data received");h.value=Hn.cloneDeep(Q.data),console.log("Patient details fetched:",h.value)}catch(Q){g(Q,"Failed to fetch patient details"),h.value={name:"Unknown Patient"}}},S=async()=>{try{if(!h.value?.id)throw new Error("Patient ID is required for consultations");const Q=await T(qy(h.value.id));if(!Q?.data){console.warn("No consultation data received"),v.value=[];return}v.value=Hn.cloneDeep(Q.data),console.log("Consultations fetched:",v.value)}catch(Q){g(Q,"Failed to fetch consultations"),v.value=[]}},E=async()=>{try{await n.isReady();const Q=t.params.id;if(!Q)throw new Error("Patient ID not found in URL");if(!/^[a-zA-Z0-9-]+$/.test(Q))throw new Error("Invalid patient ID format");m.value=Q,console.log("Patient ID extracted from URL:",m.value)}catch(Q){g(Q,"Invalid URL parameters"),n.push("/patients")}},C=ee(()=>{try{return!Array.isArray(v.value)||v.value.length===0?!1:v.value.some(Q=>{try{if(!Q?.createdAt)return console.warn("Consultation missing createdAt:",Q),!1;const Z=za(Q.createdAt);return console.log("Created Date",Q.createdAt,"Checking creation date in IST:",Z,"against today:",sC),Z===sC}catch(Z){return console.warn("Error processing consultation date:",Z),!1}})}catch(Q){return console.error("Error checking consultation presence:",Q),!1}}),P=async()=>{try{if(C.value){const Q=v.value.find(Z=>{try{return Z?.createdAt&&za(Z.createdAt)===sC}catch(ce){return console.warn("Error processing consultation for selection:",ce),!1}});y.value=Q||{id:"0"},Q?console.log("Today's consultation selected:",Q):console.warn("Today's consultation found but could not be selected")}else console.log("No consultation found for today"),y.value={id:"0"}}catch(Q){console.error("Error selecting today's consultation:",Q),y.value={id:"0"}}},F=async()=>{if(!r.value)try{r.value=!0,await Promise.allSettled([k(),S()]),await P(),o.value+=1,w("Data refreshed successfully")}catch(Q){g(Q,"Failed to refresh data")}finally{r.value=!1}},N=Q=>{console.error("Consultation component error:",Q),g(Q,"Consultation loading failed"),o.value+=1},L=()=>{f.value=!0,w("Connection restored"),setTimeout(()=>{F()},1e3)},ie=()=>{f.value=!1,b("You are now offline. Data may not be current.")},le=Q=>{Q.touches.length>1&&Q.preventDefault()};return Gl(async()=>{try{a.value=!0,console.log("Patient detail mobile page initializing..."),await E(),await k(),await S(),await P()}catch(Q){g(Q,"Failed to initialize page")}finally{a.value=!1}}),cn(()=>{try{window.addEventListener("online",L),window.addEventListener("offline",ie),document.addEventListener("touchstart",le,{passive:!1});const Q=document.querySelector("meta[name=viewport]");Q&&Q.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"),console.log("Mobile patient detail page mounted successfully")}catch(Q){console.error("Error setting up mobile optimizations:",Q)}}),la(()=>{try{window.removeEventListener("online",L),window.removeEventListener("offline",ie),document.removeEventListener("touchstart",le),a.value=!1,r.value=!1,s.value=null,i.value=!1,console.log("Mobile patient detail cleanup completed")}catch(Q){console.error("Cleanup error:",Q)}}),We(()=>t.params.id,async Q=>{Q&&Q!==m.value&&(m.value=Q,await F())}),(Q,Z)=>{const ce=I("v-alert"),J=I("v-icon"),se=I("v-app-bar-nav-icon"),G=I("v-toolbar-title"),D=I("v-app-bar"),j=I("v-progress-circular"),ne=I("v-card"),H=I("v-main"),te=I("v-spacer"),Y=I("v-btn"),K=I("v-snackbar");return R(),me(ze,null,[s.value?(R(),ve(ce,{key:0,type:"error",variant:"tonal",closable:"","onClick:close":Z[0]||(Z[0]=X=>s.value=null),class:"ma-2",density:"compact"},{default:u(()=>[O(q(s.value),1)]),_:1})):_e("",!0),a.value?(R(),me(ze,{key:1},[l(D,{density:"compact"},{default:u(()=>[l(se,null,{default:u(()=>[l(J,{onClick:U,icon:"mdi-chevron-left",size:"large"})]),_:1}),l(G,{class:"text-h6"},{default:u(()=>[...Z[3]||(Z[3]=[O("Loading...",-1)])]),_:1})]),_:1}),l(H,{class:"pt-0"},{default:u(()=>[l(ne,{color:"surfaceContainer",flat:"",style:{height:"100vh"}},{default:u(()=>[p("div",NGe,[p("div",VGe,[l(j,{indeterminate:"",color:"primary",size:"64"}),Z[4]||(Z[4]=p("div",{class:"mt-4 text-subtitle-1"},"Loading patient details...",-1))])])]),_:1})]),_:1})],64)):s.value?_e("",!0):(R(),me(ze,{key:2},[l(D,{density:"compact",class:"mobile-app-bar"},{default:u(()=>[l(se,null,{default:u(()=>[l(J,{onClick:U,icon:"mdi-chevron-left",size:"large"})]),_:1}),l(G,{class:"text-h6 patient-title"},{default:u(()=>[O(q(x.value),1)]),_:1}),l(te),l(Y,{icon:"",onClick:F,loading:r.value,disabled:r.value,size:"small"},{default:u(()=>[l(J,null,{default:u(()=>[...Z[5]||(Z[5]=[O("mdi-refresh",-1)])]),_:1})]),_:1},8,["loading","disabled"])]),_:1}),l(H,{class:"pt-0"},{default:u(()=>[l(ne,{color:"surfaceContainer",flat:"",class:"mobile-content"},{default:u(()=>[f.value?_e("",!0):(R(),ve(ce,{key:0,type:"warning",variant:"tonal",density:"compact",class:"ma-2"},{default:u(()=>[...Z[6]||(Z[6]=[O(" You are offline. Data may not be current. ",-1)])]),_:1})),!y.value?.id||y.value.id==="0"?(R(),me("div",LGe,[p("div",MGe,[l(J,{size:"64",color:"grey-lighten-1",class:"mb-4"},{default:u(()=>[...Z[7]||(Z[7]=[O("mdi-calendar-blank",-1)])]),_:1}),Z[9]||(Z[9]=p("div",{class:"text-h6 mb-2"},"No consultation today",-1)),Z[10]||(Z[10]=p("div",{class:"text-body-2 text-grey"},"No consultation has been created for today.",-1)),l(Y,{variant:"outlined",onClick:F,class:"mt-4",loading:r.value},{default:u(()=>[...Z[8]||(Z[8]=[O(" Refresh ",-1)])]),_:1},8,["loading"])])])):(R(),ve(vS,{key:2},{default:u(()=>[(R(),ve(KH,{consultation:y.value,patient:h.value,key:`${y.value.id}-${o.value}`,onError:N},null,8,["consultation","patient"]))]),fallback:u(()=>[p("div",OGe,[p("div",HGe,[l(j,{indeterminate:"",color:"primary",size:"48"}),Z[11]||(Z[11]=p("div",{class:"mt-3 text-body-2"},"Loading consultation...",-1))])])]),_:1}))]),_:1})]),_:1})],64)),l(K,{modelValue:i.value,"onUpdate:modelValue":Z[2]||(Z[2]=X=>i.value=X),color:A.value,timeout:d.value,location:"bottom",class:"mobile-snackbar"},{actions:u(()=>[l(Y,{variant:"text",size:"small",onClick:Z[1]||(Z[1]=X=>i.value=!1)},{default:u(()=>[...Z[12]||(Z[12]=[O(" Close ",-1)])]),_:1})]),default:u(()=>[O(q(c.value)+" ",1)]),_:1},8,["modelValue","color","timeout"])],64)}}},QGe=Xt($Ge,[["__scopeId","data-v-fd53b52b"]]),GGe={class:"passcode-login-container"},zGe={class:"passcode-card"},KGe={key:0,class:"loading-section"},WGe={key:1,class:"user-section"},jGe={key:0,class:"user-selector mb-4"},qGe={class:"text-white text-caption"},YGe={class:"d-flex align-center user-selection-content"},XGe={class:"text-white text-caption"},JGe={class:"user-selection-text"},ZGe={class:"user-avatar"},eze={class:"welcome-text"},tze={key:1,class:"subtitle"},nze={class:"passcode-input-wrapper"},aze=["disabled"],rze={key:0,class:"error-message"},sze=["disabled"],oze={key:0,class:"loading-spinner"},ize={key:1},lze={key:3,class:"footer-section"},uze={__name:"passcode-login",setup(e){const t=ea(),n=Zi(),{verifyGoogleUser:a,loginWithPasscode:r,resetAllAuthState:s}=Jh(),o=M(""),i=M(!1),c=M(null),A=M(!0),d=M(""),f=M(null),m=M([]),h=M(null),v=M(!1),y=M(""),g=ee(()=>t.getters["auth/currentUser"]),w=ee(()=>g.value?.email||""),b=ee(()=>g.value?.displayName||""),x=ee(()=>{if(h.value){const P=m.value.find(F=>F.id===h.value);if(P)return P.name||P.email||"User"}return d.value||b.value||"User"}),T=P=>!P||P==="User"?"?":P.split(" ").map(F=>F[0]).join("").toUpperCase().slice(0,2),U=async()=>{v.value=!0;try{let P;try{P=await dt.get("/desktop/auth/users")}catch{P=await dt.get("/admin/users")}const F=P.data?.users||(Array.isArray(P.data)?P.data:[]);if(Array.isArray(F)&&F.length>0){m.value=F;const N=m.value.find(L=>L.isAdmin===!0)||m.value[0];N&&(h.value=N.id,y.value=N.email||"",f.value=N.id,d.value=N.name||"User")}}catch(P){console.error("Failed to fetch users:",P)}finally{v.value=!1}},k=ee(()=>m.value.map(P=>{const F=P.name||P.email||"Unknown User",N=P.isAdmin?`${F} (Admin)`:F;return{value:P.id,text:N,email:P.email,raw:P}})),S=P=>{const F=m.value.find(N=>N.id===P);F&&(f.value=F.id,d.value=F.name||"User",y.value=F.email||"")};cn(async()=>{if(await U(),!g.value||!w.value){console.log("No Google auth found, redirecting to login..."),n.replace("/login");return}A.value=!0;try{const P=sessionStorage.getItem("selectedUserId");if(P){const F=parseInt(P),N=m.value.find(L=>L.id===F);if(N)h.value=F,f.value=F,d.value=N.name||N.email||"User",y.value=N.email||"";else{const L=await a(w.value);L.success&&L.requiresPasscode&&(d.value=L.userName||b.value,f.value=L.userId)}}else{const F=await a(w.value);if(F.success&&F.requiresPasscode){if(d.value=F.userName||b.value,f.value=F.userId,h.value&&m.value.length>0){const N=m.value.find(L=>L.id===f.value);N&&(h.value=N.id,y.value=N.email||"")}}else F.success}}catch(P){console.error("Error verifying Google user:",P)}finally{A.value=!1}});const E=async()=>{if(!o.value){c.value="Please enter your passcode";return}const P=h.value||f.value;if(!P){c.value="Please select a user";return}i.value=!0,c.value=null;try{if((await r(o.value,P)).success){sessionStorage.removeItem("selectedUserId");const N=sessionStorage.getItem("isFirstTimeSignIn")==="true";sessionStorage.removeItem("isFirstTimeSignIn");const L=N?"/welcome":"/home";n.replace(L)}}catch(F){c.value=F.response?.data?.error||F.message||"Invalid passcode. Please try again.",o.value=""}finally{i.value=!1}},C=async()=>{try{s(),await t.dispatch("auth/signOut")}catch(P){console.error("Error signing out:",P)}n.replace("/login")};return(P,F)=>{const N=I("v-avatar"),L=I("v-list-item"),ie=I("v-select");return R(),me("div",GGe,[p("div",zGe,[A.value?(R(),me("div",KGe,[...F[2]||(F[2]=[p("div",{class:"loading-spinner large"},null,-1),p("p",{class:"loading-text"},"Verifying your account...",-1)])])):(R(),me("div",WGe,[m.value.length>0?(R(),me("div",jGe,[l(ie,{modelValue:h.value,"onUpdate:modelValue":[F[0]||(F[0]=le=>h.value=le),S],items:k.value,"item-title":"text","item-value":"value",label:"Select User",variant:"outlined",density:"compact",loading:v.value,class:"user-select-field",color:"primary"},{item:u(({props:le,item:Q})=>[l(L,Ql(Kl(le)),{prepend:u(()=>[l(N,{size:"32",color:Q.raw.raw?.isAdmin?"primary":"secondary"},{default:u(()=>[p("span",qGe,q(T(Q.raw.text)),1)]),_:2},1032,["color"])]),_:2},1040)]),selection:u(({item:le})=>[p("div",YGe,[l(N,{size:"24",color:le.raw.raw?.isAdmin?"primary":"secondary",class:"mr-2 flex-shrink-0"},{default:u(()=>[p("span",XGe,q(T(le.raw.text)),1)]),_:2},1032,["color"]),p("span",JGe,q(le.raw.text),1)])]),_:1},8,["modelValue","items","loading"])])):_e("",!0),p("div",ZGe,q(T(x.value)),1),p("h2",eze,"Welcome, "+q(x.value)+"!",1),y.value?(R(),me("p",tze,q(y.value),1)):_e("",!0),F[3]||(F[3]=p("p",{class:"subtitle"},"Enter your passcode to continue",-1))])),A.value?_e("",!0):(R(),me("form",{key:2,onSubmit:mn(E,["prevent"]),class:"passcode-form"},[p("div",nze,[Aa(p("input",{"onUpdate:modelValue":F[1]||(F[1]=le=>o.value=le),type:"password",class:"passcode-input",placeholder:"Enter passcode",disabled:i.value,autofocus:"",maxlength:"20"},null,8,aze),[[nh,o.value]])]),c.value?(R(),me("div",rze,q(c.value),1)):_e("",!0),p("button",{type:"submit",class:"login-button",disabled:i.value||!o.value},[i.value?(R(),me("span",oze)):(R(),me("span",ize,"Continue"))],8,sze)],32)),A.value?_e("",!0):(R(),me("div",lze,[p("button",{class:"switch-account-btn",onClick:C}," Sign in with different account ")]))])])}}},cze=Xt(uze,[["__scopeId","data-v-670201b4"]]),dze={class:"login-container"},Aze={class:"login-card"},fze={key:0,class:"form-group"},mze=["disabled"],hze=["value"],vze={class:"form-group"},pze=["disabled"],gze={key:1,class:"error-message"},yze=["disabled"],_ze={key:0,class:"loading-spinner"},wze={key:1},bze={__name:"login",setup(e){const t=Zi(),{login:n}=Xh(),a=M(""),r=M(!1),s=M(null),o=M([]),i=M(null),c=M(!1),A=async()=>{c.value=!0;try{const f=await dt.get("/web/auth/users"),m=f.data?.users||(Array.isArray(f.data)?f.data:[]);if(Array.isArray(m)&&m.length>0){o.value=m;const h=o.value.find(v=>v.isAdmin===!0)||o.value[0];h&&(i.value=h.id)}}catch(f){console.error("Failed to fetch users:",f)}finally{c.value=!1}};cn(async()=>{await A()});const d=async()=>{if(!a.value){s.value="Please enter your passcode";return}if(!i.value){s.value="Please select a user";return}r.value=!0,s.value=null;try{(await n(a.value,i.value)).success&&t.push("/home")}catch(f){s.value=f.response?.data?.error||f.message||"Login failed. Please try again."}finally{r.value=!1}};return(f,m)=>(R(),me("div",dze,[p("div",Aze,[m[5]||(m[5]=p("div",{class:"logo-section"},[p("img",{src:H_,alt:"Logo",class:"logo"}),p("h1",{class:"app-title"},"EvaMed"),p("p",{class:"app-subtitle"},"Medical Practice Management")],-1)),p("form",{onSubmit:mn(d,["prevent"]),class:"login-form"},[o.value.length>0?(R(),me("div",fze,[m[3]||(m[3]=p("label",{for:"user",class:"form-label"},"Select User",-1)),Aa(p("select",{id:"user","onUpdate:modelValue":m[0]||(m[0]=h=>i.value=h),class:"form-input",disabled:r.value||c.value},[m[2]||(m[2]=p("option",{value:null},"Select a user...",-1)),(R(!0),me(ze,null,Wt(o.value,h=>(R(),me("option",{key:h.id,value:h.id},q(h.name||h.email)+" "+q(h.isAdmin?"(Admin)":""),9,hze))),128))],8,mze),[[$ee,i.value]])])):_e("",!0),p("div",vze,[m[4]||(m[4]=p("label",{for:"passcode",class:"form-label"},"Enter Passcode",-1)),Aa(p("input",{id:"passcode","onUpdate:modelValue":m[1]||(m[1]=h=>a.value=h),type:"password",class:"form-input",placeholder:"Enter your passcode",disabled:r.value,autofocus:""},null,8,pze),[[nh,a.value]])]),s.value?(R(),me("div",gze,q(s.value),1)):_e("",!0),p("button",{type:"submit",class:"login-button",disabled:r.value||!a.value},[r.value?(R(),me("span",_ze)):(R(),me("span",wze,"Sign In"))],8,yze)],32),m[6]||(m[6]=p("div",{class:"login-footer"},[p("p",null,"Contact admin if you don't have a passcode")],-1))])]))}},xze=Xt(bze,[["__scopeId","data-v-c84931a3"]]),Cze={class:"user-management-container"},Sze={class:"page-header"},Eze={key:0,class:"loading-container"},Bze={key:1,class:"error-container"},kze={key:2,class:"users-list"},Tze={class:"user-info"},Ize={class:"user-avatar"},Fze={class:"user-details"},Pze={class:"user-name"},Dze={class:"user-email"},Uze={class:"user-meta"},Rze={key:0,class:"badge badge-info"},Nze={key:1,class:"badge badge-warning"},Vze={class:"permission-count"},Lze={class:"user-actions"},Mze=["onClick"],Oze=["onClick"],Hze=["onClick"],$ze={key:0,class:"empty-state"},Qze={class:"modal-content"},Gze={class:"form-group"},zze={class:"form-group"},Kze={class:"form-group"},Wze={class:"form-actions"},jze=["disabled"],qze={class:"modal-content modal-large"},Yze={class:"modal-title"},Xze={class:"permissions-editor"},Jze={class:"features-list"},Zze={key:0,class:"loading-features"},eKe={class:"feature-checkbox"},tKe=["checked","onChange"],nKe={class:"feature-name"},aKe={class:"feature-description"},rKe={key:0,class:"actions-section"},sKe={class:"actions-list"},oKe=["checked","onChange"],iKe={class:"permissions-summary"},lKe={class:"selected-permissions"},uKe={key:0,class:"no-permissions"},cKe={class:"form-actions"},dKe={class:"modal-content"},AKe={class:"modal-title"},fKe={key:0,class:"passcode-result"},mKe={class:"passcode-display"},hKe={key:1,class:"passcode-options"},vKe={class:"form-actions"},pKe={__name:"user-management",setup(e){Jh(),$_(dt);const t=M([]),n=M([]),a=M(!0),r=M(null),s=M(!1),o=M(!1),i=M(!1),c=M({name:"",email:"",doctorId:null}),A=M(null),d=M([]),f=M(null),m=dt,h=async()=>{a.value=!0,r.value=null;try{const[N,L]=await Promise.all([m.get("/admin/users"),m.get("/admin/users/features")]);t.value=N.data.users||[],n.value=L.data.features||[]}catch(N){r.value=N.response?.data?.error||"Failed to load users",console.error("Load users error:",N)}finally{a.value=!1}},v=N=>N?N.split(" ").map(L=>L[0]).join("").toUpperCase().slice(0,2):"?",y=async()=>{try{const N=await m.post("/admin/users",{name:c.value.name,email:c.value.email||void 0,doctorId:c.value.doctorId||void 0,generatePasscode:!0});N.data.success&&(alert(`User created!

Passcode: ${N.data.passcode}

Please save this passcode securely.`),s.value=!1,c.value={name:"",email:"",doctorId:null},h())}catch(N){alert(N.response?.data?.error||"Failed to create user")}},g=N=>{try{if(!n.value||n.value.length===0){console.warn("Features not loaded yet, loading now..."),h().then(()=>{n.value&&n.value.length>0?(A.value=N,d.value=[...N.permissions||[]],o.value=!0):alert("Failed to load features. Please try again.")});return}if(!N||!N.id){console.error("Invalid user data:",N),alert("Invalid user data");return}A.value=N,d.value=[...N.permissions||[]],o.value=!0}catch(L){console.error("Error opening edit permissions modal:",L),alert("Error opening permissions editor. Please try again.")}},w=ee(()=>{const N=new Set;return d.value&&d.value.length>0&&d.value.forEach(L=>{if(L&&typeof L=="string"){const ie=L.split(".")[0];ie&&N.add(ie)}}),N}),b=ee(()=>new Set(d.value||[])),x=N=>w.value.has(N),T=N=>b.value.has(N),U=(N,L)=>{const ie=n.value.find(le=>le.id===N);if(ie)if(L){const le=ie.actions.find(Q=>Q.action==="view");le&&!d.value.includes(le.id)&&d.value.push(le.id)}else d.value=d.value.filter(le=>!le.startsWith(`${N}.`))},k=(N,L)=>{L?d.value.includes(N)||d.value.push(N):d.value=d.value.filter(ie=>ie!==N)},S=async()=>{try{await m.put(`/admin/users/${A.value.id}/permissions`,{permissions:d.value}),alert("Permissions updated successfully!"),o.value=!1,h()}catch(N){alert(N.response?.data?.error||"Failed to update permissions")}},E=N=>{A.value=N,f.value=null,i.value=!0},C=async()=>{try{const N=await m.put(`/admin/users/${A.value.id}/passcode`,{generateNew:!0});N.data.success&&(f.value=N.data.passcode)}catch(N){alert(N.response?.data?.error||"Failed to reset passcode")}},P=()=>{i.value=!1,f.value=null},F=N=>{alert("Edit user functionality coming soon")};return cn(()=>{h()}),(N,L)=>(R(),me("div",Cze,[p("div",Sze,[L[10]||(L[10]=p("h1",{class:"page-title"},"User Management",-1)),p("button",{class:"btn-primary",onClick:L[0]||(L[0]=ie=>s.value=!0)},[...L[9]||(L[9]=[p("span",{class:"btn-icon"},"+",-1),O(" Add User ",-1)])])]),a.value?(R(),me("div",Eze,[...L[11]||(L[11]=[p("div",{class:"loading-spinner"},null,-1),p("p",null,"Loading users...",-1)])])):r.value?(R(),me("div",Bze,[p("p",null,q(r.value),1),p("button",{class:"btn-secondary",onClick:h},"Retry")])):(R(),me("div",kze,[(R(!0),me(ze,null,Wt(t.value,ie=>(R(),me("div",{key:ie.id,class:ct(["user-card",{inactive:!ie.isActive}])},[p("div",Tze,[p("div",Ize,q(v(ie.name)),1),p("div",Fze,[p("h3",Pze,q(ie.name),1),p("p",Dze,q(ie.email||"No email"),1),p("div",Uze,[ie.doctorId?(R(),me("span",Rze,"Doctor #"+q(ie.doctorId),1)):_e("",!0),ie.isActive?_e("",!0):(R(),me("span",Nze,"Inactive")),p("span",Vze,q(ie.permissions.length)+" permissions",1)])])]),p("div",Lze,[p("button",{class:"btn-icon-action",onClick:le=>g(ie),title:"Edit Permissions"},[...L[12]||(L[12]=[p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[p("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),p("polyline",{points:"16 17 21 12 16 7"}),p("line",{x1:"21",y1:"12",x2:"9",y2:"12"})],-1)])],8,Mze),p("button",{class:"btn-icon-action",onClick:le=>E(ie),title:"Reset Passcode"},[...L[13]||(L[13]=[p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[p("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),p("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})],-1)])],8,Oze),p("button",{class:"btn-icon-action",onClick:le=>F(),title:"Edit User"},[...L[14]||(L[14]=[p("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[p("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),p("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,Hze)])],2))),128)),t.value.length===0?(R(),me("div",$ze,[...L[15]||(L[15]=[p("p",null,"No users found. Create your first user to get started.",-1)])])):_e("",!0)])),s.value?(R(),me("div",{key:3,class:"modal-overlay",onClick:L[5]||(L[5]=mn(ie=>s.value=!1,["self"]))},[p("div",Qze,[L[19]||(L[19]=p("h2",{class:"modal-title"},"Create New User",-1)),p("form",{onSubmit:mn(y,["prevent"]),class:"modal-form"},[p("div",Gze,[L[16]||(L[16]=p("label",{for:"name"},"Name *",-1)),Aa(p("input",{id:"name","onUpdate:modelValue":L[1]||(L[1]=ie=>c.value.name=ie),type:"text",required:"",placeholder:"Enter user name"},null,512),[[nh,c.value.name]])]),p("div",zze,[L[17]||(L[17]=p("label",{for:"email"},"Email",-1)),Aa(p("input",{id:"email","onUpdate:modelValue":L[2]||(L[2]=ie=>c.value.email=ie),type:"email",placeholder:"Enter email (optional)"},null,512),[[nh,c.value.email]])]),p("div",Kze,[L[18]||(L[18]=p("label",{for:"doctorId"},"Link to Doctor (ID)",-1)),Aa(p("input",{id:"doctorId","onUpdate:modelValue":L[3]||(L[3]=ie=>c.value.doctorId=ie),type:"number",placeholder:"Doctor ID (optional)"},null,512),[[nh,c.value.doctorId,void 0,{number:!0}]])]),p("div",Wze,[p("button",{type:"button",class:"btn-secondary",onClick:L[4]||(L[4]=ie=>s.value=!1)},"Cancel"),p("button",{type:"submit",class:"btn-primary",disabled:!c.value.name},"Create User",8,jze)])],32)])])):_e("",!0),o.value?(R(),me("div",{key:4,class:"modal-overlay",onClick:L[7]||(L[7]=mn(ie=>o.value=!1,["self"]))},[p("div",qze,[p("h2",Yze,"Edit Permissions: "+q(A.value?.name),1),p("div",Xze,[L[21]||(L[21]=p("p",{class:"help-text"}," Select features to grant access. Once a feature is selected, you can assign specific actions. ",-1)),p("div",Jze,[!n.value||n.value.length===0?(R(),me("div",Zze,[...L[20]||(L[20]=[p("p",null,"Loading features...",-1)])])):(R(!0),me(ze,{key:1},Wt(n.value,ie=>(R(),me("div",{key:ie.id,class:"feature-item"},[p("label",eKe,[p("input",{type:"checkbox",checked:x(ie.id),onChange:le=>U(ie.id,le.target.checked)},null,40,tKe),p("span",nKe,q(ie.name),1),p("span",aKe,q(ie.description),1)]),x(ie.id)?(R(),me("div",rKe,[p("h4",null,"Actions for "+q(ie.name),1),p("div",sKe,[(R(!0),me(ze,null,Wt(ie.actions,le=>(R(),me("label",{key:le.id,class:"action-checkbox"},[p("input",{type:"checkbox",checked:T(le.id),onChange:Q=>k(le.id,Q.target.checked)},null,40,oKe),p("span",null,q(le.description),1)]))),128))])])):_e("",!0)]))),128))]),p("div",iKe,[p("h4",null,"Selected Permissions ("+q(d.value.length)+")",1),p("div",lKe,[(R(!0),me(ze,null,Wt(d.value,ie=>(R(),me("span",{key:ie,class:"permission-badge"},q(ie),1))),128)),d.value.length===0?(R(),me("span",uKe," No permissions selected ")):_e("",!0)])])]),p("div",cKe,[p("button",{type:"button",class:"btn-secondary",onClick:L[6]||(L[6]=ie=>o.value=!1)},"Cancel"),p("button",{type:"button",class:"btn-primary",onClick:S},"Save Permissions")])])])):_e("",!0),i.value?(R(),me("div",{key:5,class:"modal-overlay",onClick:L[8]||(L[8]=mn(ie=>i.value=!1,["self"]))},[p("div",dKe,[p("h2",AKe,"Reset Passcode: "+q(A.value?.name),1),f.value?(R(),me("div",fKe,[L[22]||(L[22]=p("p",{class:"passcode-label"},"New Passcode:",-1)),p("div",mKe,q(f.value),1),L[23]||(L[23]=p("p",{class:"passcode-warning"}," Save this passcode securely. It won't be shown again.",-1))])):(R(),me("div",hKe,[...L[24]||(L[24]=[p("p",null,"Generate a new passcode for this user?",-1),p("p",{class:"warning-text"},"This will invalidate all active sessions for this user.",-1)])])),p("div",vKe,[p("button",{type:"button",class:"btn-secondary",onClick:P},q(f.value?"Close":"Cancel"),1),f.value?_e("",!0):(R(),me("button",{key:0,type:"button",class:"btn-primary",onClick:C}," Generate New Passcode "))])])])):_e("",!0)]))}},wN=Xt(pKe,[["__scopeId","data-v-e5802221"]]),gKe=[{path:"/",name:"SplashPage",component:PGe,meta:{requiresAuth:!1}},{name:"LoginPage",component:yGe,path:"/login",meta:{requiresAuth:!1}},{name:"MobileHome",component:RGe,path:"/mobile",meta:{requiresAuth:!1}},{name:"PatientDetailMobile",component:QGe,path:"/mobile/:id",meta:{requiresAuth:!1}},{name:"WelcomePage",component:bGe,path:"/welcome",meta:{requiresAuth:!0}},{name:"HomePage",component:tCe,path:"/home/:tab?",meta:{requiresAuth:!0,requiredFeature:"home"}},{name:"PatientsLandingPage",component:tSe,path:"/patients",meta:{requiresAuth:!0,requiredFeature:"patients"},children:[{path:":id",name:"PatientDetailPage",component:z4e,meta:{requiresAuth:!0,requiredFeature:"patients"}}]},{name:"TasksPage",component:O5e,path:"/tasks",meta:{requiresAuth:!0,requiredFeature:"tasks"}},{name:"AdminPage",component:oFe,path:"/admin",meta:{requiresAuth:!0,requiresAdmin:!0}},{name:"DataPage",component:i6e,path:"/data",meta:{requiresAuth:!0,requiredFeature:"data"}},{name:"ResearchPage",component:a5e,path:"/research",meta:{requiresAuth:!0,requiredFeature:"research"}},{name:"ReportsPage",component:UMe,path:"/reports",meta:{requiresAuth:!0,requiredFeature:"reports"}},{name:"PaymentsPage",component:oMe,path:"/payments",meta:{requiresAuth:!0,requiredFeature:"billing"}},{name:"PharmacyQueuePage",component:m9e,path:"/pharmacy/queue",meta:{requiresAuth:!0,requiredFeature:"pharmacy.queue"}},{name:"PharmacyInventoryPage",component:kQe,path:"/pharmacy/inventory",meta:{requiresAuth:!0,requiredFeature:"pharmacy.inventory"}},{name:"PharmacyPurchasePage",component:L7e,path:"/pharmacy/purchase",meta:{requiresAuth:!0,requiredFeature:"pharmacy.purchase"}},{name:"PharmacyReportsPage",component:cGe,path:"/pharmacy/reports",meta:{requiresAuth:!0,requiredFeature:"pharmacy.reports"}},{name:"DesktopPasscodeLogin",component:cze,path:"/desktop/passcode",meta:{requiresAuth:!1,requiresGoogleAuth:!0}},{name:"WebLogin",component:xze,path:"/web/login",meta:{requiresAuth:!1}},{name:"UserManagement",component:wN,path:"/admin/users",meta:{requiresAuth:!0,requiresAdmin:!0}},{name:"UserManagementEdit",component:wN,path:"/admin/users/:id",meta:{requiresAuth:!0,requiresAdmin:!0}}],Ns=Tre({history:rre(),routes:gKe});Ns.beforeEach(async(e,t,n)=>{const a=t.query.server||e.query.server,r=t.query.endpoint||e.query.endpoint;if((a||r)&&!e.query.server&&!e.query.endpoint)return console.log("Preserving query params:",{serverParam:a,endpointParam:r}),n({...e,query:{...e.query,...a&&{server:a},...r&&{endpoint:r}}});if(Ka()){const o=wi.getters["auth/isAuthenticated"],i=!!localStorage.getItem("desktopSessionToken"),c=o&&i,A=Jh(),d=A.isAdmin.value,f=A.permissions.value||[];console.log("Navigation guard triggered (Electron mode):",{to:e.path,from:t.path,requiresAuth:e.matched.some(w=>w.meta.requiresAuth),requiresGoogleAuth:e.matched.some(w=>w.meta.requiresGoogleAuth),requiresAdmin:e.matched.some(w=>w.meta.requiresAdmin),requiredFeature:e.meta.requiredFeature,requiredPermission:e.meta.requiredPermission,isGoogleAuthenticated:o,hasDesktopSession:i,isFullyAuthenticated:c,isAdmin:d,permissionsCount:f.length});const m=e.matched.some(w=>w.meta.requiresAuth),h=e.matched.some(w=>w.meta.requiresGoogleAuth),v=e.matched.some(w=>w.meta.requiresAdmin),y=e.meta.requiredFeature,g=e.meta.requiredPermission;if(m&&!c)if(o){console.log("Route requires auth, have Google auth but no passcode, redirecting to passcode page"),n("/desktop/passcode");return}else{console.log("Route requires auth but no Google auth, redirecting to login"),n("/login");return}if(v&&!(d||f.some(b=>b&&typeof b=="string"&&b.startsWith("admin.")))){console.log("Route requires admin access or admin permissions, redirecting to home"),n("/home");return}if(g&&!d){if(!f.includes(g)){console.log(`Route requires permission: ${g}, redirecting to home`),n("/home");return}}if(y&&((A.features.value||[]).find(b=>b&&b.id===y),!d)){if(!f.some(x=>!x||typeof x!="string"?!1:x===y?!0:x.startsWith(`${y}.`))){console.log(`Route requires feature access: ${y}, user doesn't have access, redirecting to home`),n("/home");return}}if(h&&!o){console.log("Route requires Google auth but user not signed in, redirecting to login"),n("/login");return}if(e.path==="/login"){if(c){console.log("Fully authenticated user trying to access login page, redirecting to home"),n("/home");return}else if(o){console.log("Google authenticated user trying to access login page, redirecting to passcode"),n("/desktop/passcode");return}}if(e.path==="/desktop/passcode"&&c){console.log("Fully authenticated user trying to access passcode page, redirecting to home"),n("/home");return}console.log("Navigation allowed (Electron mode)"),n()}else{const o=Xh(),i=!!localStorage.getItem("sessionToken"),c=o.isAuthenticated.value,A=o.isAdmin.value,d=o.permissions.value||[];console.log("Navigation guard triggered (Web mode):",{to:e.path,from:t.path,requiresAuth:e.matched.some(g=>g.meta.requiresAuth),requiresAdmin:e.matched.some(g=>g.meta.requiresAdmin),requiredFeature:e.meta.requiredFeature,requiredPermission:e.meta.requiredPermission,hasSessionToken:i,isWebAuthenticated:c,sessionTokenValue:o.sessionToken.value?"exists":"null",isAdmin:A,permissionsCount:d.length});const f=e.matched.some(g=>g.meta.requiresAuth),m=e.matched.some(g=>g.meta.requiresAdmin),h=e.meta.requiredFeature,v=e.meta.requiredPermission,y=()=>{const b=new URLSearchParams(window.location.search).get("endpoint")||e.query.endpoint||t.query.endpoint;return b?`/web/login?endpoint=${encodeURIComponent(b)}`:"/web/login"};if(e.path==="/"&&!c){console.log("On splash page but not authenticated, redirecting to web login");const g=y();console.log("Redirecting to:",g),n(g);return}if(f&&!c){console.log("Route requires auth but not authenticated, redirecting to web login");const g=y();console.log("Redirecting to:",g),n(g);return}if(m&&!A){console.log("Route requires admin access, redirecting to home"),n("/home");return}if(v&&!A){if(!d.includes(v)){console.log(`Route requires permission: ${v}, redirecting to home`),n("/home");return}}if(h&&!A){if(!d.some(w=>!w||typeof w!="string"?!1:w===h?!0:w.startsWith(`${h}.`))){console.log(`Route requires feature access: ${h}, user doesn't have access, redirecting to home`),n("/home");return}}if(e.path==="/web/login"&&c){console.log("Authenticated user trying to access web login page, redirecting to home"),n("/home");return}console.log("Navigation allowed (Web mode)"),n()}});const yKe=ot({...en(),...Fa(l6(),["fullHeight"]),...aa()},"VApp"),_Ke=yt()({name:"VApp",props:yKe(),setup(e,t){let{slots:n}=t;const a=wa(e),{layoutClasses:r,getLayoutItem:s,items:o,layoutRef:i}=c6({...e,fullHeight:!0}),{rtlClasses:c}=Kr();return St(()=>p("div",{ref:i,class:ct(["v-application",a.themeClasses.value,r.value,c.value,e.class]),style:Rt([e.style])},[p("div",{class:"v-application__wrap"},[n.default?.()])])),{getLayoutItem:s,items:o,theme:a}}}),Un=ot({tag:{type:[String,Object,Function],default:"div"}},"tag"),j9=ot({text:String,...en(),...Un()},"VToolbarTitle"),n4=yt()({name:"VToolbarTitle",props:j9(),setup(e,t){let{slots:n}=t;return St(()=>{const a=!!(n.default||n.text||e.text);return l(e.tag,{class:ct(["v-toolbar-title",e.class]),style:Rt(e.style)},{default:()=>[a&&p("div",{class:"v-toolbar-title__placeholder"},[n.text?n.text():e.text,n.default?.()])]})}),{}}}),wKe=ot({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function Bi(e,t,n){return yt()({name:e,props:wKe({mode:n,origin:t}),setup(a,r){let{slots:s}=r;const o={onBeforeEnter(i){a.origin&&(i.style.transformOrigin=a.origin)},onLeave(i){if(a.leaveAbsolute){const{offsetTop:c,offsetLeft:A,offsetWidth:d,offsetHeight:f}=i;i._transitionInitialStyles={position:i.style.position,top:i.style.top,left:i.style.left,width:i.style.width,height:i.style.height},i.style.position="absolute",i.style.top=`${c}px`,i.style.left=`${A}px`,i.style.width=`${d}px`,i.style.height=`${f}px`}a.hideOnLeave&&i.style.setProperty("display","none","important")},onAfterLeave(i){if(a.leaveAbsolute&&i?._transitionInitialStyles){const{position:c,top:A,left:d,width:f,height:m}=i._transitionInitialStyles;delete i._transitionInitialStyles,i.style.position=c||"",i.style.top=A||"",i.style.left=d||"",i.style.width=f||"",i.style.height=m||""}}};return()=>{const i=a.group?ik:Id;return Wl(i,{name:a.disabled?"":e,css:!a.disabled,...a.group?void 0:{mode:a.mode},...a.disabled?{}:o},s.default)}}})}function q9(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return yt()({name:e,props:{mode:{type:String,default:n},disabled:Boolean,group:Boolean},setup(a,r){let{slots:s}=r;const o=a.group?ik:Id;return()=>Wl(o,{name:a.disabled?"":e,css:!a.disabled,...a.disabled?{}:t},s.default)}})}function Y9(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",a=Lo(`offset-${n}`);return{onBeforeEnter(o){o._parent=o.parentNode,o._initialStyle={transition:o.style.transition,overflow:o.style.overflow,[n]:o.style[n]}},onEnter(o){const i=o._initialStyle;if(!i)return;o.style.setProperty("transition","none","important"),o.style.overflow="hidden";const c=`${o[a]}px`;o.style[n]="0",o.offsetHeight,o.style.transition=i.transition,e&&o._parent&&o._parent.classList.add(e),requestAnimationFrame(()=>{o.style[n]=c})},onAfterEnter:s,onEnterCancelled:s,onLeave(o){o._initialStyle={transition:"",overflow:o.style.overflow,[n]:o.style[n]},o.style.overflow="hidden",o.style[n]=`${o[a]}px`,o.offsetHeight,requestAnimationFrame(()=>o.style[n]="0")},onAfterLeave:r,onLeaveCancelled:r};function r(o){e&&o._parent&&o._parent.classList.remove(e),s(o)}function s(o){if(!o._initialStyle)return;const i=o._initialStyle[n];o.style.overflow=o._initialStyle.overflow,i!=null&&(o.style[n]=i),delete o._initialStyle}}const bKe=ot({target:[Object,Array]},"v-dialog-transition"),QC=new WeakMap,Kw=yt()({name:"VDialogTransition",props:bKe(),setup(e,t){let{slots:n}=t;const a={onBeforeEnter(r){r.style.pointerEvents="none",r.style.visibility="hidden"},async onEnter(r,s){await new Promise(h=>requestAnimationFrame(h)),await new Promise(h=>requestAnimationFrame(h)),r.style.visibility="";const o=xN(e.target,r),{x:i,y:c,sx:A,sy:d,speed:f}=o;QC.set(r,o);const m=RA(r,[{transform:`translate(${i}px, ${c}px) scale(${A}, ${d})`,opacity:0},{}],{duration:225*f,easing:Lte});bN(r)?.forEach(h=>{RA(h,[{opacity:0},{opacity:0,offset:.33},{}],{duration:450*f,easing:h0})}),m.finished.then(()=>s())},onAfterEnter(r){r.style.removeProperty("pointer-events")},onBeforeLeave(r){r.style.pointerEvents="none"},async onLeave(r,s){await new Promise(h=>requestAnimationFrame(h));let o;!QC.has(r)||Array.isArray(e.target)||e.target.offsetParent||e.target.getClientRects().length?o=xN(e.target,r):o=QC.get(r);const{x:i,y:c,sx:A,sy:d,speed:f}=o;RA(r,[{},{transform:`translate(${i}px, ${c}px) scale(${A}, ${d})`,opacity:0}],{duration:125*f,easing:Mte}).finished.then(()=>s()),bN(r)?.forEach(h=>{RA(h,[{},{opacity:0,offset:.2},{opacity:0}],{duration:250*f,easing:h0})})},onAfterLeave(r){r.style.removeProperty("pointer-events")}};return()=>e.target?l(Id,Fe({name:"dialog-transition"},a,{css:!1}),n):l(Id,{name:"dialog-transition"},n)}});function bN(e){const t=e.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list")?.children;return t&&[...t]}function xN(e,t){const n=L8(e),a=Ak(t),[r,s]=getComputedStyle(t).transformOrigin.split(" ").map(w=>parseFloat(w)),[o,i]=getComputedStyle(t).getPropertyValue("--v-overlay-anchor-origin").split(" ");let c=n.left+n.width/2;o==="left"||i==="left"?c-=n.width/2:(o==="right"||i==="right")&&(c+=n.width/2);let A=n.top+n.height/2;o==="top"||i==="top"?A-=n.height/2:(o==="bottom"||i==="bottom")&&(A+=n.height/2);const d=n.width/a.width,f=n.height/a.height,m=Math.max(1,d,f),h=d/m||0,v=f/m||0,y=a.width*a.height/(window.innerWidth*window.innerHeight),g=y>.12?Math.min(1.5,(y-.12)*10+1):1;return{x:c-(r+a.left),y:A-(s+a.top),sx:h,sy:v,speed:g}}const xKe=Bi("fab-transition","center center","out-in"),CKe=Bi("dialog-bottom-transition"),SKe=Bi("dialog-top-transition"),M0=Bi("fade-transition"),a4=Bi("scale-transition"),EKe=Bi("scroll-x-transition"),BKe=Bi("scroll-x-reverse-transition"),kKe=Bi("scroll-y-transition"),TKe=Bi("scroll-y-reverse-transition"),IKe=Bi("slide-x-transition"),FKe=Bi("slide-x-reverse-transition"),r4=Bi("slide-y-transition"),PKe=Bi("slide-y-reverse-transition"),Ww=q9("expand-transition",Y9()),s4=q9("expand-x-transition",Y9("",!0)),DKe=ot({defaults:Object,disabled:Boolean,reset:[Number,String],root:[Boolean,String],scoped:Boolean},"VDefaultsProvider"),Rn=yt(!1)({name:"VDefaultsProvider",props:DKe(),setup(e,t){let{slots:n}=t;const{defaults:a,disabled:r,reset:s,root:o,scoped:i}=Ef(e);return fr(a,{reset:s,root:o,scoped:i,disabled:r}),()=>n.default?.()}}),Ur=ot({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function Rr(e){return{dimensionStyles:ee(()=>{const n={},a=jt(e.height),r=jt(e.maxHeight),s=jt(e.maxWidth),o=jt(e.minHeight),i=jt(e.minWidth),c=jt(e.width);return a!=null&&(n.height=a),r!=null&&(n.maxHeight=r),s!=null&&(n.maxWidth=s),o!=null&&(n.minHeight=o),i!=null&&(n.minWidth=i),c!=null&&(n.width=c),n})}}function UKe(e){return{aspectStyles:ee(()=>{const t=Number(e.aspectRatio);return t?{paddingBottom:String(1/t*100)+"%"}:void 0})}}const X9=ot({aspectRatio:[String,Number],contentClass:null,inline:Boolean,...en(),...Ur()},"VResponsive"),YE=yt()({name:"VResponsive",props:X9(),setup(e,t){let{slots:n}=t;const{aspectStyles:a}=UKe(e),{dimensionStyles:r}=Rr(e);return St(()=>p("div",{class:ct(["v-responsive",{"v-responsive--inline":e.inline},e.class]),style:Rt([r.value,e.style])},[p("div",{class:"v-responsive__sizer",style:Rt(a.value)},null),n.additional?.(),n.default&&p("div",{class:ct(["v-responsive__content",e.contentClass])},[n.default()])])),{}}});function o4(e){return dk(()=>{const t=xu(e),n=[],a={};if(t.background)if(BS(t.background)){if(a.backgroundColor=t.background,!t.text&&Ete(t.background)){const r=_i(t.background);if(r.a==null||r.a===1){const s=j8(r);a.color=s,a.caretColor=s}}}else n.push(`bg-${t.background}`);return t.text&&(BS(t.text)?(a.color=t.text,a.caretColor=t.text):n.push(`text-${t.text}`)),{colorClasses:n,colorStyles:a}})}function Fs(e){const{colorClasses:t,colorStyles:n}=o4(()=>({text:xu(e)}));return{textColorClasses:t,textColorStyles:n}}function Ca(e){const{colorClasses:t,colorStyles:n}=o4(()=>({background:xu(e)}));return{backgroundColorClasses:t,backgroundColorStyles:n}}const tr=ot({rounded:{type:[Boolean,Number,String],default:void 0},tile:Boolean},"rounded");function hr(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Du();return{roundedClasses:ee(()=>{const a=zr(e)?e.value:e.rounded,r=zr(e)?e.value:e.tile,s=[];if(r||a===!1)s.push("rounded-0");else if(a===!0||a==="")s.push(`${t}--rounded`);else if(typeof a=="string"||a===0)for(const o of String(a).split(" "))s.push(`rounded-${o}`);return s})}}const Jl=ot({transition:{type:null,default:"fade-transition",validator:e=>e!==!0}},"transition"),mo=(e,t)=>{let{slots:n}=t;const{transition:a,disabled:r,group:s,...o}=e,{component:i=s?ik:Id,...c}=f0(a)?a:{};let A;return f0(a)?A=Fe(c,lte({disabled:r,group:s}),o):A=Fe({name:r||!a?"":a},o),Wl(i,A,n)};function RKe(e,t){if(!lk)return;const n=t.modifiers||{},a=t.value,{handler:r,options:s}=typeof a=="object"?a:{handler:a,options:{}},o=new IntersectionObserver(function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],c=arguments.length>1?arguments[1]:void 0;const A=e._observe?.[t.instance.$.uid];if(!A)return;const d=i.some(f=>f.isIntersecting);r&&(!n.quiet||A.init)&&(!n.once||d||A.init)&&r(d,i,c),d&&n.once?J9(e,t):A.init=!0},s);e._observe=Object(e._observe),e._observe[t.instance.$.uid]={init:!1,observer:o},o.observe(e)}function J9(e,t){const n=e._observe?.[t.instance.$.uid];n&&(n.observer.unobserve(e),delete e._observe[t.instance.$.uid])}const Ol={mounted:RKe,unmounted:J9},Z9=ot({absolute:Boolean,alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...X9(),...en(),...tr(),...Jl()},"VImg"),Tc=yt()({name:"VImg",directives:{vIntersect:Ol},props:Z9(),emits:{loadstart:e=>!0,load:e=>!0,error:e=>!0},setup(e,t){let{emit:n,slots:a}=t;const{backgroundColorClasses:r,backgroundColorStyles:s}=Ca(()=>e.color),{roundedClasses:o}=hr(e),i=Er("VImg"),c=Ht(""),A=M(),d=Ht(e.eager?"loading":"idle"),f=Ht(),m=Ht(),h=ee(()=>e.src&&typeof e.src=="object"?{src:e.src.src,srcset:e.srcset||e.src.srcset,lazySrc:e.lazySrc||e.src.lazySrc,aspect:Number(e.aspectRatio||e.src.aspect||0)}:{src:e.src,srcset:e.srcset,lazySrc:e.lazySrc,aspect:Number(e.aspectRatio||0)}),v=ee(()=>h.value.aspect||f.value/m.value||0);We(()=>e.src,()=>{y(d.value!=="idle")}),We(v,(N,L)=>{!N&&L&&A.value&&T(A.value)}),Gl(()=>y());function y(N){if(!(e.eager&&N)&&!(lk&&!N&&!e.eager)){if(d.value="loading",h.value.lazySrc){const L=new Image;L.src=h.value.lazySrc,T(L,null)}h.value.src&&bn(()=>{n("loadstart",A.value?.currentSrc||h.value.src),setTimeout(()=>{if(!i.isUnmounted)if(A.value?.complete){if(A.value.naturalWidth||w(),d.value==="error")return;v.value||T(A.value,null),d.value==="loading"&&g()}else v.value||T(A.value),b()})})}}function g(){i.isUnmounted||(b(),T(A.value),d.value="loaded",n("load",A.value?.currentSrc||h.value.src))}function w(){i.isUnmounted||(d.value="error",n("error",A.value?.currentSrc||h.value.src))}function b(){const N=A.value;N&&(c.value=N.currentSrc||N.src)}let x=-1;la(()=>{clearTimeout(x)});function T(N){let L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const ie=()=>{if(clearTimeout(x),i.isUnmounted)return;const{naturalHeight:le,naturalWidth:Q}=N;le||Q?(f.value=Q,m.value=le):!N.complete&&d.value==="loading"&&L!=null?x=window.setTimeout(ie,L):(N.currentSrc.endsWith(".svg")||N.currentSrc.startsWith("data:image/svg+xml"))&&(f.value=1,m.value=1)};ie()}const U=qe(()=>({"v-img__img--cover":e.cover,"v-img__img--contain":!e.cover})),k=()=>{if(!h.value.src||d.value==="idle")return null;const N=p("img",{class:ct(["v-img__img",U.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:h.value.src,srcset:h.value.srcset,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable,sizes:e.sizes,ref:A,onLoad:g,onError:w},null),L=a.sources?.();return l(mo,{transition:e.transition,appear:!0},{default:()=>[Aa(L?p("picture",{class:"v-img__picture"},[L,N]):N,[[ai,d.value==="loaded"]])]})},S=()=>l(mo,{transition:e.transition},{default:()=>[h.value.lazySrc&&d.value!=="loaded"&&p("img",{class:ct(["v-img__img","v-img__img--preload",U.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:h.value.lazySrc,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable},null)]}),E=()=>a.placeholder?l(mo,{transition:e.transition,appear:!0},{default:()=>[(d.value==="loading"||d.value==="error"&&!a.error)&&p("div",{class:"v-img__placeholder"},[a.placeholder()])]}):null,C=()=>a.error?l(mo,{transition:e.transition,appear:!0},{default:()=>[d.value==="error"&&p("div",{class:"v-img__error"},[a.error()])]}):null,P=()=>e.gradient?p("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${e.gradient})`}},null):null,F=Ht(!1);{const N=We(v,L=>{L&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{F.value=!0})}),N())})}return St(()=>{const N=YE.filterProps(e);return Aa(l(YE,Fe({class:["v-img",{"v-img--absolute":e.absolute,"v-img--booting":!F.value},r.value,o.value,e.class],style:[{width:jt(e.width==="auto"?f.value:e.width)},s.value,e.style]},N,{aspectRatio:v.value,"aria-label":e.alt,role:e.alt?"img":void 0}),{additional:()=>p(ze,null,[l(k,null,null),l(S,null,null),l(P,null,null),l(E,null,null),l(C,null,null)]),default:a.default}),[[Ol,{handler:y,options:e.options},null,{once:!0}]])}),{currentSrc:c,image:A,state:d,naturalWidth:f,naturalHeight:m}}}),$o=ot({border:[Boolean,Number,String]},"border");function oi(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Du();return{borderClasses:ee(()=>{const a=e.border;return a===!0||a===""?`${t}--border`:typeof a=="string"||a===0?String(a).split(" ").map(r=>`border-${r}`):[]})}}const Wr=ot({elevation:{type:[Number,String],validator(e){const t=parseInt(e);return!isNaN(t)&&t>=0&&t<=24}}},"elevation");function ps(e){return{elevationClasses:qe(()=>{const n=zr(e)?e.value:e.elevation;return n==null?[]:[`elevation-${n}`]})}}const NKe=[null,"prominent","default","comfortable","compact"],eQ=ot({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>NKe.includes(e)},extended:{type:Boolean,default:null},extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...$o(),...en(),...Wr(),...tr(),...Un({tag:"header"}),...aa()},"VToolbar"),XE=yt()({name:"VToolbar",props:eQ(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:a,backgroundColorStyles:r}=Ca(()=>e.color),{borderClasses:s}=oi(e),{elevationClasses:o}=ps(e),{roundedClasses:i}=hr(e),{themeClasses:c}=wa(e),{rtlClasses:A}=Kr(),d=Ht(e.extended===null?!!n.extension?.():e.extended),f=ee(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),m=ee(()=>d.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return fr({VBtn:{variant:"text"}}),St(()=>{const h=!!(e.title||n.title),v=!!(n.image||e.image),y=n.extension?.();return d.value=e.extended===null?!!y:e.extended,l(e.tag,{class:ct(["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},a.value,s.value,o.value,i.value,c.value,A.value,e.class]),style:Rt([r.value,e.style])},{default:()=>[v&&p("div",{key:"image",class:"v-toolbar__image"},[n.image?l(Rn,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},n.image):l(Tc,{key:"image-img",cover:!0,src:e.image},null)]),l(Rn,{defaults:{VTabs:{height:jt(f.value)}}},{default:()=>[p("div",{class:"v-toolbar__content",style:{height:jt(f.value)}},[n.prepend&&p("div",{class:"v-toolbar__prepend"},[n.prepend?.()]),h&&l(n4,{key:"title",text:e.title},{text:n.title}),n.default?.(),n.append&&p("div",{class:"v-toolbar__append"},[n.append?.()])])]}),l(Rn,{defaults:{VTabs:{height:jt(m.value)}}},{default:()=>[l(Ww,null,{default:()=>[d.value&&p("div",{class:"v-toolbar__extension",style:{height:jt(m.value)}},[y])]})]})]})}),{contentHeight:f,extensionHeight:m}}}),VKe=ot({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function LKe(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:n}=t;let a=0,r=0;const s=M(null),o=Ht(0),i=Ht(0),c=Ht(0),A=Ht(!1),d=Ht(!1),f=ee(()=>Number(e.scrollThreshold)),m=ee(()=>Qa((f.value-o.value)/f.value||0)),h=()=>{const v=s.value;if(!v||n&&!n.value)return;a=o.value,o.value="window"in v?v.pageYOffset:v.scrollTop;const y=v instanceof Window?document.documentElement.scrollHeight:v.scrollHeight;if(r!==y){r=y;return}d.value=o.value<a,c.value=Math.abs(o.value-f.value)};return We(d,()=>{i.value=i.value||o.value}),We(A,()=>{i.value=0}),cn(()=>{We(()=>e.scrollTarget,v=>{const y=v?document.querySelector(v):window;y&&y!==s.value&&(s.value?.removeEventListener("scroll",h),s.value=y,s.value.addEventListener("scroll",h,{passive:!0}))},{immediate:!0})}),la(()=>{s.value?.removeEventListener("scroll",h)}),n&&We(n,h,{immediate:!0}),{scrollThreshold:f,currentScroll:o,currentThreshold:c,isScrollActive:A,scrollRatio:m,isScrollingUp:d,savedScroll:i}}function Lf(){const e=Ht(!1);return cn(()=>{window.requestAnimationFrame(()=>{e.value=!0})}),{ssrBootStyles:qe(()=>e.value?void 0:{transition:"none !important"}),isBooted:$h(e)}}const MKe=ot({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...eQ(),...Tf(),...VKe(),height:{type:[Number,String],default:64}},"VAppBar"),OKe=yt()({name:"VAppBar",props:MKe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=M(),r=on(e,"modelValue"),s=ee(()=>{const b=new Set(e.scrollBehavior?.split(" ")??[]);return{hide:b.has("hide"),fullyHide:b.has("fully-hide"),inverted:b.has("inverted"),collapse:b.has("collapse"),elevate:b.has("elevate"),fadeImage:b.has("fade-image")}}),o=ee(()=>{const b=s.value;return b.hide||b.fullyHide||b.inverted||b.collapse||b.elevate||b.fadeImage||!r.value}),{currentScroll:i,scrollThreshold:c,isScrollingUp:A,scrollRatio:d}=LKe(e,{canScroll:o}),f=qe(()=>s.value.hide||s.value.fullyHide),m=ee(()=>e.collapse||s.value.collapse&&(s.value.inverted?d.value>0:d.value===0)),h=ee(()=>e.flat||s.value.fullyHide&&!r.value||s.value.elevate&&(s.value.inverted?i.value>0:i.value===0)),v=ee(()=>s.value.fadeImage?s.value.inverted?1-d.value:d.value:void 0),y=ee(()=>{if(s.value.hide&&s.value.inverted)return 0;const b=a.value?.contentHeight??0,x=a.value?.extensionHeight??0;return f.value?i.value<c.value||s.value.fullyHide?b+x:b:b+x});vo(()=>!!e.scrollBehavior,()=>{Ar(()=>{f.value?s.value.inverted?r.value=i.value>c.value:r.value=A.value||i.value<c.value:r.value=!0})});const{ssrBootStyles:g}=Lf(),{layoutItemStyles:w}=If({id:e.name,order:ee(()=>parseInt(e.order,10)),position:qe(()=>e.location),layoutSize:y,elementSize:Ht(void 0),active:r,absolute:qe(()=>e.absolute)});return St(()=>{const b=XE.filterProps(e);return l(XE,Fe({ref:a,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...w.value,"--v-toolbar-image-opacity":v.value,height:void 0,...g.value},e.style]},b,{collapse:m.value,flat:h.value}),n)}),{}}}),HKe=[null,"default","comfortable","compact"],rs=ot({density:{type:String,default:"default",validator:e=>HKe.includes(e)}},"density");function xo(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Du();return{densityClasses:qe(()=>`${t}--density-${e.density}`)}}const $Ke=["elevated","flat","tonal","outlined","text","plain"];function Xd(e,t){return p(ze,null,[e&&p("span",{key:"overlay",class:ct(`${t}__overlay`)},null),p("span",{key:"underlay",class:ct(`${t}__underlay`)},null)])}const tl=ot({color:String,variant:{type:String,default:"elevated",validator:e=>$Ke.includes(e)}},"variant");function Mf(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Du();const n=qe(()=>{const{variant:s}=xu(e);return`${t}--variant-${s}`}),{colorClasses:a,colorStyles:r}=o4(()=>{const{variant:s,color:o}=xu(e);return{[["elevated","flat"].includes(s)?"background":"text"]:o}});return{colorClasses:a,colorStyles:r,variantClasses:n}}const tQ=ot({baseColor:String,divided:Boolean,direction:{type:String,default:"horizontal"},...$o(),...en(),...rs(),...Wr(),...tr(),...Un(),...aa(),...tl()},"VBtnGroup"),JE=yt()({name:"VBtnGroup",props:tQ(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=wa(e),{densityClasses:r}=xo(e),{borderClasses:s}=oi(e),{elevationClasses:o}=ps(e),{roundedClasses:i}=hr(e);fr({VBtn:{height:qe(()=>e.direction==="horizontal"?"auto":null),baseColor:qe(()=>e.baseColor),color:qe(()=>e.color),density:qe(()=>e.density),flat:!0,variant:qe(()=>e.variant)}}),St(()=>l(e.tag,{class:ct(["v-btn-group",`v-btn-group--${e.direction}`,{"v-btn-group--divided":e.divided},a.value,s.value,r.value,o.value,i.value,e.class]),style:Rt(e.style)},n))}}),Of=ot({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),Hf=ot({value:null,disabled:Boolean,selectedClass:String},"group-item");function $f(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const a=Er("useGroupItem");if(!a)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const r=Ho();Ia(Symbol.for(`${t.description}:id`),r);const s=Sn(t,null);if(!s){if(!n)return s;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${t.description}`)}const o=qe(()=>e.value),i=ee(()=>!!(s.disabled.value||e.disabled));s.register({id:r,value:o,disabled:i},a),la(()=>{s.unregister(r)});const c=ee(()=>s.isSelected(r)),A=ee(()=>s.items.value[0].id===r),d=ee(()=>s.items.value[s.items.value.length-1].id===r),f=ee(()=>c.value&&[s.selectedClass.value,e.selectedClass]);return We(c,m=>{a.emit("group:selected",{value:m})},{flush:"sync"}),{id:r,isSelected:c,isFirst:A,isLast:d,toggle:()=>s.select(r,!c.value),select:m=>s.select(r,m),selectedClass:f,value:o,disabled:i,group:s}}function Jd(e,t){let n=!1;const a=es([]),r=on(e,"modelValue",[],m=>m==null?[]:nQ(a,cr(m)),m=>{const h=GKe(a,m);return e.multiple?h:h[0]}),s=Er("useGroup");function o(m,h){const v=m,y=Symbol.for(`${t.description}:id`),w=Lm(y,s?.vnode).indexOf(h);Oe(v.value)==null&&(v.value=w,v.useIndexAsValue=!0),w>-1?a.splice(w,0,v):a.push(v)}function i(m){if(n)return;c();const h=a.findIndex(v=>v.id===m);a.splice(h,1)}function c(){const m=a.find(h=>!h.disabled);m&&e.mandatory==="force"&&!r.value.length&&(r.value=[m.id])}cn(()=>{c()}),la(()=>{n=!0}),X2(()=>{for(let m=0;m<a.length;m++)a[m].useIndexAsValue&&(a[m].value=m)});function A(m,h){const v=a.find(y=>y.id===m);if(!(h&&v?.disabled))if(e.multiple){const y=r.value.slice(),g=y.findIndex(b=>b===m),w=~g;if(h=h??!w,w&&e.mandatory&&y.length<=1||!w&&e.max!=null&&y.length+1>e.max)return;g<0&&h?y.push(m):g>=0&&!h&&y.splice(g,1),r.value=y}else{const y=r.value.includes(m);if(e.mandatory&&y||!y&&!h)return;r.value=h??!y?[m]:[]}}function d(m){if(e.multiple,r.value.length){const h=r.value[0],v=a.findIndex(w=>w.id===h);let y=(v+m)%a.length,g=a[y];for(;g.disabled&&y!==v;)y=(y+m)%a.length,g=a[y];if(g.disabled)return;r.value=[a[y].id]}else{const h=a.find(v=>!v.disabled);h&&(r.value=[h.id])}}const f={register:o,unregister:i,selected:r,select:A,disabled:qe(()=>e.disabled),prev:()=>d(a.length-1),next:()=>d(1),isSelected:m=>r.value.includes(m),selectedClass:qe(()=>e.selectedClass),items:qe(()=>a),getItemIndex:m=>QKe(a,m)};return Ia(t,f),f}function QKe(e,t){const n=nQ(e,[t]);return n.length?e.findIndex(a=>a.id===n[0]):-1}function nQ(e,t){const n=[];return t.forEach(a=>{const r=e.find(o=>ms(a,o.value)),s=e[a];r?.value!=null?n.push(r.id):s?.useIndexAsValue&&n.push(s.id)}),n}function GKe(e,t){const n=[];return t.forEach(a=>{const r=e.findIndex(s=>s.id===a);if(~r){const s=e[r];n.push(s.value!=null?s.value:r)}}),n}const i4=Symbol.for("vuetify:v-btn-toggle"),zKe=ot({...tQ(),...Of()},"VBtnToggle"),KKe=yt()({name:"VBtnToggle",props:zKe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{isSelected:a,next:r,prev:s,select:o,selected:i}=Jd(e,i4);return St(()=>{const c=JE.filterProps(e);return l(JE,Fe({class:["v-btn-toggle",e.class]},c,{style:e.style}),{default:()=>[n.default?.({isSelected:a,next:r,prev:s,select:o,selected:i})]})}),{next:r,prev:s,select:o}}}),WKe=["x-small","small","default","large","x-large"],Ou=ot({size:{type:[String,Number],default:"default"}},"size");function dv(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Du();return dk(()=>{const n=e.size;let a,r;return b_(WKe,n)?a=`${t}--size-${n}`:n&&(r={width:jt(n),height:jt(n)}),{sizeClasses:a,sizeStyles:r}})}const jKe=ot({color:String,disabled:Boolean,start:Boolean,end:Boolean,icon:un,opacity:[String,Number],...en(),...Ou(),...Un({tag:"i"}),...aa()},"VIcon"),ya=yt()({name:"VIcon",props:jKe(),setup(e,t){let{attrs:n,slots:a}=t;const r=Ht(),{themeClasses:s}=bk(),{iconData:o}=zne(()=>r.value||e.icon),{sizeClasses:i}=dv(e),{textColorClasses:c,textColorStyles:A}=Fs(()=>e.color);return St(()=>{const d=a.default?.();d&&(r.value=P8(d).filter(m=>m.type===eg&&m.children&&typeof m.children=="string")[0]?.children);const f=!!(n.onClick||n.onClickOnce);return l(o.value.component,{tag:e.tag,icon:o.value.icon,class:ct(["v-icon","notranslate",s.value,i.value,c.value,{"v-icon--clickable":f,"v-icon--disabled":e.disabled,"v-icon--start":e.start,"v-icon--end":e.end},e.class]),style:Rt([{"--v-icon-opacity":e.opacity},i.value?void 0:{fontSize:jt(e.size),height:jt(e.size),width:jt(e.size)},A.value,e.style]),role:f?"button":void 0,"aria-hidden":!f,tabindex:f?e.disabled?-1:0:void 0},{default:()=>[d]})}),{}}});function Eg(e,t){const n=M(),a=Ht(!1);if(lk){const r=new IntersectionObserver(s=>{a.value=!!s.find(o=>o.isIntersecting)},t);as(()=>{r.disconnect()}),We(n,(s,o)=>{o&&(r.unobserve(o),a.value=!1),s&&r.observe(s)},{flush:"post"})}return{intersectionRef:n,isIntersecting:a}}const qKe=ot({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...en(),...Ou(),...Un({tag:"div"}),...aa()},"VProgressCircular"),hf=yt()({name:"VProgressCircular",props:qKe(),setup(e,t){let{slots:n}=t;const a=20,r=2*Math.PI*a,s=M(),{themeClasses:o}=wa(e),{sizeClasses:i,sizeStyles:c}=dv(e),{textColorClasses:A,textColorStyles:d}=Fs(()=>e.color),{textColorClasses:f,textColorStyles:m}=Fs(()=>e.bgColor),{intersectionRef:h,isIntersecting:v}=Eg(),{resizeRef:y,contentRect:g}=Rl(),w=qe(()=>Qa(parseFloat(e.modelValue),0,100)),b=qe(()=>Number(e.width)),x=qe(()=>c.value?Number(e.size):g.value?g.value.width:Math.max(b.value,32)),T=qe(()=>a/(1-b.value/x.value)*2),U=qe(()=>b.value/x.value*T.value),k=qe(()=>jt((100-w.value)/100*r));return Ar(()=>{h.value=s.value,y.value=s.value}),St(()=>l(e.tag,{ref:s,class:ct(["v-progress-circular",{"v-progress-circular--indeterminate":!!e.indeterminate,"v-progress-circular--visible":v.value,"v-progress-circular--disable-shrink":e.indeterminate==="disable-shrink"},o.value,i.value,A.value,e.class]),style:Rt([c.value,d.value,e.style]),role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.indeterminate?void 0:w.value},{default:()=>[p("svg",{style:{transform:`rotate(calc(-90deg + ${Number(e.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${T.value} ${T.value}`},[p("circle",{class:ct(["v-progress-circular__underlay",f.value]),style:Rt(m.value),fill:"transparent",cx:"50%",cy:"50%",r:a,"stroke-width":U.value,"stroke-dasharray":r,"stroke-dashoffset":0},null),p("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:a,"stroke-width":U.value,"stroke-dasharray":r,"stroke-dashoffset":k.value},null)]),n.default&&p("div",{class:"v-progress-circular__content"},[n.default({value:w.value})])]})),{}}}),CN={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},Nc=ot({location:String},"location");function Qf(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2?arguments[2]:void 0;const{isRtl:a}=Kr();return{locationStyles:ee(()=>{if(!e.location)return{};const{side:s,align:o}=SS(e.location.split(" ").length>1?e.location:`${e.location} center`,a.value);function i(A){return n?n(A):0}const c={};return s!=="center"&&(t?c[CN[s]]=`calc(100% - ${i(s)}px)`:c[s]=0),o!=="center"?t?c[CN[o]]=`calc(100% - ${i(o)}px)`:c[o]=0:(s==="center"?c.top=c.left="50%":c[{top:"left",bottom:"left",left:"top",right:"top"}[s]]="50%",c.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[s]),c})}}const YKe=ot({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},bufferColor:String,bufferOpacity:[Number,String],clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},opacity:[Number,String],reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...en(),...Nc({location:"top"}),...tr(),...Un(),...aa()},"VProgressLinear"),jw=yt()({name:"VProgressLinear",props:YKe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=on(e,"modelValue"),{isRtl:r,rtlClasses:s}=Kr(),{themeClasses:o}=wa(e),{locationStyles:i}=Qf(e),{textColorClasses:c,textColorStyles:A}=Fs(()=>e.color),{backgroundColorClasses:d,backgroundColorStyles:f}=Ca(()=>e.bgColor||e.color),{backgroundColorClasses:m,backgroundColorStyles:h}=Ca(()=>e.bufferColor||e.bgColor||e.color),{backgroundColorClasses:v,backgroundColorStyles:y}=Ca(()=>e.color),{roundedClasses:g}=hr(e),{intersectionRef:w,isIntersecting:b}=Eg(),x=ee(()=>parseFloat(e.max)),T=ee(()=>parseFloat(e.height)),U=ee(()=>Qa(parseFloat(e.bufferValue)/x.value*100,0,100)),k=ee(()=>Qa(parseFloat(a.value)/x.value*100,0,100)),S=ee(()=>r.value!==e.reverse),E=ee(()=>e.indeterminate?"fade-transition":"slide-x-transition");function C(P){if(!w.value)return;const{left:F,right:N,width:L}=w.value.getBoundingClientRect(),ie=S.value?L-P.clientX+(N-L):P.clientX-F;a.value=Math.round(ie/L*x.value)}return St(()=>l(e.tag,{ref:w,class:ct(["v-progress-linear",{"v-progress-linear--absolute":e.absolute,"v-progress-linear--active":e.active&&b.value,"v-progress-linear--reverse":S.value,"v-progress-linear--rounded":e.rounded,"v-progress-linear--rounded-bar":e.roundedBar,"v-progress-linear--striped":e.striped,"v-progress-linear--clickable":e.clickable},g.value,o.value,s.value,e.class]),style:Rt([{bottom:e.location==="bottom"?0:void 0,top:e.location==="top"?0:void 0,height:e.active?jt(T.value):0,"--v-progress-linear-height":jt(T.value),...e.absolute?i.value:{}},e.style]),role:"progressbar","aria-hidden":e.active?"false":"true","aria-valuemin":"0","aria-valuemax":e.max,"aria-valuenow":e.indeterminate?void 0:Math.min(parseFloat(a.value),x.value),onClick:e.clickable&&C},{default:()=>[e.stream&&p("div",{key:"stream",class:ct(["v-progress-linear__stream",c.value]),style:{...A.value,[S.value?"left":"right"]:jt(-T.value),borderTop:`${jt(T.value/2)} dotted`,opacity:parseFloat(e.bufferOpacity),top:`calc(50% - ${jt(T.value/4)})`,width:jt(100-U.value,"%"),"--v-progress-linear-stream-to":jt(T.value*(S.value?1:-1))}},null),p("div",{class:ct(["v-progress-linear__background",d.value]),style:Rt([f.value,{opacity:parseFloat(e.bgOpacity),width:e.stream?0:void 0}])},null),p("div",{class:ct(["v-progress-linear__buffer",m.value]),style:Rt([h.value,{opacity:parseFloat(e.bufferOpacity),width:jt(U.value,"%")}])},null),l(Id,{name:E.value},{default:()=>[e.indeterminate?p("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(P=>p("div",{key:P,class:ct(["v-progress-linear__indeterminate",P,v.value]),style:Rt(y.value)},null))]):p("div",{class:ct(["v-progress-linear__determinate",v.value]),style:Rt([y.value,{width:jt(k.value,"%")}])},null)]}),n.default&&p("div",{class:"v-progress-linear__content"},[n.default({value:k.value,buffer:U.value})])]})),{}}}),qw=ot({loading:[Boolean,String]},"loader");function Bg(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Du();return{loaderClasses:qe(()=>({[`${t}--loading`]:e.loading}))}}function kg(e,t){let{slots:n}=t;return p("div",{class:ct(`${e.name}__loader`)},[n.default?.({color:e.color,isActive:e.active})||l(jw,{absolute:e.absolute,active:e.active,color:e.color,height:"2",indeterminate:!0},null)])}const XKe=["static","relative","fixed","absolute","sticky"],Av=ot({position:{type:String,validator:e=>XKe.includes(e)}},"position");function fv(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Du();return{positionClasses:qe(()=>e.position?`${t}--${e.position}`:void 0)}}function JKe(){const e=Er("useRoute");return ee(()=>e?.proxy?.$route)}function aQ(){return Er("useRouter")?.proxy?.$router}function Tg(e,t){const n=J2("RouterLink"),a=qe(()=>!!(e.href||e.to)),r=ee(()=>a?.value||qP(t,"click")||qP(e,"click"));if(typeof n=="string"||!("useLink"in n)){const d=qe(()=>e.href);return{isLink:a,isClickable:r,href:d,linkProps:es({href:d})}}const s=n.useLink({to:qe(()=>e.to||""),replace:qe(()=>e.replace)}),o=ee(()=>e.to?s:void 0),i=JKe(),c=ee(()=>o.value?e.exact?i.value?o.value.isExactActive?.value&&ms(o.value.route.value.query,i.value.query):o.value.isExactActive?.value??!1:o.value.isActive?.value??!1:!1),A=ee(()=>e.to?o.value?.route.value.href:e.href);return{isLink:a,isClickable:r,isActive:c,route:o.value?.route,navigate:o.value?.navigate,href:A,linkProps:es({href:A,"aria-current":qe(()=>c.value?"page":void 0)})}}const Ig=ot({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let GC=!1;function ZKe(e,t){let n=!1,a,r;_a&&e?.beforeEach&&(bn(()=>{window.addEventListener("popstate",s),a=e.beforeEach((o,i,c)=>{GC?n?t(c):c():setTimeout(()=>n?t(c):c()),GC=!0}),r=e?.afterEach(()=>{GC=!1})}),as(()=>{window.removeEventListener("popstate",s),a?.(),r?.()}));function s(o){o.state?.replaced||(n=!0,setTimeout(()=>n=!1))}}function eWe(e,t){We(()=>e.isActive?.value,n=>{e.isLink.value&&n!=null&&t&&bn(()=>{t(n)})},{immediate:!0})}const ZE=Symbol("rippleStop"),tWe=80;function SN(e,t){e.style.transform=t,e.style.webkitTransform=t}function eB(e){return e.constructor.name==="TouchEvent"}function rQ(e){return e.constructor.name==="KeyboardEvent"}const nWe=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=0,r=0;if(!rQ(e)){const f=t.getBoundingClientRect(),m=eB(e)?e.touches[e.touches.length-1]:e;a=m.clientX-f.left,r=m.clientY-f.top}let s=0,o=.3;t._ripple?.circle?(o=.15,s=t.clientWidth/2,s=n.center?s:s+Math.sqrt((a-s)**2+(r-s)**2)/4):s=Math.sqrt(t.clientWidth**2+t.clientHeight**2)/2;const i=`${(t.clientWidth-s*2)/2}px`,c=`${(t.clientHeight-s*2)/2}px`,A=n.center?i:`${a-s}px`,d=n.center?c:`${r-s}px`;return{radius:s,scale:o,x:A,y:d,centerX:i,centerY:c}},x2={show(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t?._ripple?.enabled)return;const a=document.createElement("span"),r=document.createElement("span");a.appendChild(r),a.className="v-ripple__container",n.class&&(a.className+=` ${n.class}`);const{radius:s,scale:o,x:i,y:c,centerX:A,centerY:d}=nWe(e,t,n),f=`${s*2}px`;r.className="v-ripple__animation",r.style.width=f,r.style.height=f,t.appendChild(a);const m=window.getComputedStyle(t);m&&m.position==="static"&&(t.style.position="relative",t.dataset.previousPosition="static"),r.classList.add("v-ripple__animation--enter"),r.classList.add("v-ripple__animation--visible"),SN(r,`translate(${i}, ${c}) scale3d(${o},${o},${o})`),r.dataset.activated=String(performance.now()),requestAnimationFrame(()=>{requestAnimationFrame(()=>{r.classList.remove("v-ripple__animation--enter"),r.classList.add("v-ripple__animation--in"),SN(r,`translate(${A}, ${d}) scale3d(1,1,1)`)})})},hide(e){if(!e?._ripple?.enabled)return;const t=e.getElementsByClassName("v-ripple__animation");if(t.length===0)return;const n=Array.from(t).findLast(s=>!s.dataset.isHiding);if(n)n.dataset.isHiding="true";else return;const a=performance.now()-Number(n.dataset.activated),r=Math.max(250-a,0);setTimeout(()=>{n.classList.remove("v-ripple__animation--in"),n.classList.add("v-ripple__animation--out"),setTimeout(()=>{e.getElementsByClassName("v-ripple__animation").length===1&&e.dataset.previousPosition&&(e.style.position=e.dataset.previousPosition,delete e.dataset.previousPosition),n.parentNode?.parentNode===e&&e.removeChild(n.parentNode)},300)},r)}};function sQ(e){return typeof e>"u"||!!e}function O0(e){const t={},n=e.currentTarget;if(!(!n?._ripple||n._ripple.touched||e[ZE])){if(e[ZE]=!0,eB(e))n._ripple.touched=!0,n._ripple.isTouch=!0;else if(n._ripple.isTouch)return;if(t.center=n._ripple.centered||rQ(e),n._ripple.class&&(t.class=n._ripple.class),eB(e)){if(n._ripple.showTimerCommit)return;n._ripple.showTimerCommit=()=>{x2.show(e,n,t)},n._ripple.showTimer=window.setTimeout(()=>{n?._ripple?.showTimerCommit&&(n._ripple.showTimerCommit(),n._ripple.showTimerCommit=null)},tWe)}else x2.show(e,n,t)}}function EN(e){e[ZE]=!0}function gi(e){const t=e.currentTarget;if(t?._ripple){if(window.clearTimeout(t._ripple.showTimer),e.type==="touchend"&&t._ripple.showTimerCommit){t._ripple.showTimerCommit(),t._ripple.showTimerCommit=null,t._ripple.showTimer=window.setTimeout(()=>{gi(e)});return}window.setTimeout(()=>{t._ripple&&(t._ripple.touched=!1)}),x2.hide(t)}}function oQ(e){const t=e.currentTarget;t?._ripple&&(t._ripple.showTimerCommit&&(t._ripple.showTimerCommit=null),window.clearTimeout(t._ripple.showTimer))}let H0=!1;function BN(e,t){!H0&&t.includes(e.key)&&(H0=!0,O0(e))}function iQ(e){H0=!1,gi(e)}function lQ(e){H0&&(H0=!1,gi(e))}function uQ(e,t,n){const{value:a,modifiers:r}=t,s=sQ(a);s||x2.hide(e),e._ripple=e._ripple??{},e._ripple.enabled=s,e._ripple.centered=r.center,e._ripple.circle=r.circle;const o=f0(a)?a:{};o.class&&(e._ripple.class=o.class);const i=o.keys??["Enter","Space"];if(e._ripple.keyDownHandler=c=>BN(c,i),s&&!n){if(r.stop){e.addEventListener("touchstart",EN,{passive:!0}),e.addEventListener("mousedown",EN);return}e.addEventListener("touchstart",O0,{passive:!0}),e.addEventListener("touchend",gi,{passive:!0}),e.addEventListener("touchmove",oQ,{passive:!0}),e.addEventListener("touchcancel",gi),e.addEventListener("mousedown",O0),e.addEventListener("mouseup",gi),e.addEventListener("mouseleave",gi),e.addEventListener("keydown",c=>BN(c,i)),e.addEventListener("keyup",iQ),e.addEventListener("blur",lQ),e.addEventListener("dragstart",gi,{passive:!0})}else!s&&n&&cQ(e)}function cQ(e){e.removeEventListener("mousedown",O0),e.removeEventListener("touchstart",O0),e.removeEventListener("touchend",gi),e.removeEventListener("touchmove",oQ),e.removeEventListener("touchcancel",gi),e.removeEventListener("mouseup",gi),e.removeEventListener("mouseleave",gi),e._ripple?.keyDownHandler&&e.removeEventListener("keydown",e._ripple.keyDownHandler),e.removeEventListener("keyup",iQ),e.removeEventListener("dragstart",gi),e.removeEventListener("blur",lQ)}function aWe(e,t){uQ(e,t,!1)}function rWe(e){cQ(e),delete e._ripple}function sWe(e,t){if(t.value===t.oldValue)return;const n=sQ(t.oldValue);uQ(e,t,n)}const wo={mounted:aWe,unmounted:rWe,updated:sWe},Yw=ot({active:{type:Boolean,default:void 0},activeColor:String,baseColor:String,symbol:{type:null,default:i4},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:un,appendIcon:un,block:Boolean,readonly:Boolean,slim:Boolean,stacked:Boolean,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},...$o(),...en(),...rs(),...Ur(),...Wr(),...Hf(),...qw(),...Nc(),...Av(),...tr(),...Ig(),...Ou(),...Un({tag:"button"}),...aa(),...tl({variant:"elevated"})},"VBtn"),jn=yt()({name:"VBtn",props:Yw(),emits:{"group:selected":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const{themeClasses:r}=wa(e),{borderClasses:s}=oi(e),{densityClasses:o}=xo(e),{dimensionStyles:i}=Rr(e),{elevationClasses:c}=ps(e),{loaderClasses:A}=Bg(e),{locationStyles:d}=Qf(e),{positionClasses:f}=fv(e),{roundedClasses:m}=hr(e),{sizeClasses:h,sizeStyles:v}=dv(e),y=$f(e,e.symbol,!1),g=Tg(e,n),w=ee(()=>e.active!==void 0?e.active:g.isLink.value?g.isActive?.value:y?.isSelected.value),b=qe(()=>w.value?e.activeColor??e.color:e.color),x=ee(()=>({color:y?.isSelected.value&&(!g.isLink.value||g.isActive?.value)||!y||g.isActive?.value?b.value??e.baseColor:e.baseColor,variant:e.variant})),{colorClasses:T,colorStyles:U,variantClasses:k}=Mf(x),S=ee(()=>y?.disabled.value||e.disabled),E=qe(()=>e.variant==="elevated"&&!(e.disabled||e.flat||e.border)),C=ee(()=>{if(!(e.value===void 0||typeof e.value=="symbol"))return Object(e.value)===e.value?JSON.stringify(e.value,null,0):e.value});function P(F){S.value||g.isLink.value&&(F.metaKey||F.ctrlKey||F.shiftKey||F.button!==0||n.target==="_blank")||(g.navigate?.(F),y?.toggle())}return eWe(g,y?.select),St(()=>{const F=g.isLink.value?"a":e.tag,N=!!(e.prependIcon||a.prepend),L=!!(e.appendIcon||a.append),ie=!!(e.icon&&e.icon!==!0);return Aa(l(F,Fe({type:F==="a"?void 0:"button",class:["v-btn",y?.selectedClass.value,{"v-btn--active":w.value,"v-btn--block":e.block,"v-btn--disabled":S.value,"v-btn--elevated":E.value,"v-btn--flat":e.flat,"v-btn--icon":!!e.icon,"v-btn--loading":e.loading,"v-btn--readonly":e.readonly,"v-btn--slim":e.slim,"v-btn--stacked":e.stacked},r.value,s.value,T.value,o.value,c.value,A.value,f.value,m.value,h.value,k.value,e.class],style:[U.value,i.value,d.value,v.value,e.style],"aria-busy":e.loading?!0:void 0,disabled:S.value||void 0,tabindex:e.loading||e.readonly?-1:void 0,onClick:P,value:C.value},g.linkProps),{default:()=>[Xd(!0,"v-btn"),!e.icon&&N&&p("span",{key:"prepend",class:"v-btn__prepend"},[a.prepend?l(Rn,{key:"prepend-defaults",disabled:!e.prependIcon,defaults:{VIcon:{icon:e.prependIcon}}},a.prepend):l(ya,{key:"prepend-icon",icon:e.prependIcon},null)]),p("span",{class:"v-btn__content","data-no-activator":""},[!a.default&&ie?l(ya,{key:"content-icon",icon:e.icon},null):l(Rn,{key:"content-defaults",disabled:!ie,defaults:{VIcon:{icon:e.icon}}},{default:()=>[a.default?.()??q(e.text)]})]),!e.icon&&L&&p("span",{key:"append",class:"v-btn__append"},[a.append?l(Rn,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VIcon:{icon:e.appendIcon}}},a.append):l(ya,{key:"append-icon",icon:e.appendIcon},null)]),!!e.loading&&p("span",{key:"loader",class:"v-btn__loader"},[a.loader?.()??l(hf,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,width:"2"},null)])]}),[[wo,!S.value&&e.ripple,"",{center:!!e.icon}]])}),{group:y}}}),oWe=ot({...Yw({icon:"$menu",variant:"text"})},"VAppBarNavIcon"),iWe=yt()({name:"VAppBarNavIcon",props:oWe(),setup(e,t){let{slots:n}=t;return St(()=>l(jn,Fe(e,{class:["v-app-bar-nav-icon"]}),n)),{}}}),lWe=yt()({name:"VAppBarTitle",props:j9(),setup(e,t){let{slots:n}=t;return St(()=>l(n4,Fe(e,{class:"v-app-bar-title"}),n)),{}}}),dQ=Dc("v-alert-title"),uWe=ot({iconSize:[Number,String],iconSizes:{type:Array,default:()=>[["x-small",10],["small",16],["default",24],["large",28],["x-large",32]]}},"iconSize");function cWe(e,t){return{iconSize:ee(()=>{const a=new Map(e.iconSizes),r=e.iconSize??t()??"default";return a.has(r)?a.get(r):r})}}const dWe=["success","info","warning","error"],AWe=ot({border:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:un,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>dWe.includes(e)},...en(),...rs(),...Ur(),...Wr(),...uWe(),...Nc(),...Av(),...tr(),...Un(),...aa(),...tl({variant:"flat"})},"VAlert"),fWe=yt()({name:"VAlert",props:AWe(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const r=on(e,"modelValue"),s=qe(()=>{if(e.icon!==!1)return e.type?e.icon??`$${e.type}`:e.icon}),{iconSize:o}=cWe(e,()=>e.prominent?44:void 0),{themeClasses:i}=wa(e),{colorClasses:c,colorStyles:A,variantClasses:d}=Mf(()=>({color:e.color??e.type,variant:e.variant})),{densityClasses:f}=xo(e),{dimensionStyles:m}=Rr(e),{elevationClasses:h}=ps(e),{locationStyles:v}=Qf(e),{positionClasses:y}=fv(e),{roundedClasses:g}=hr(e),{textColorClasses:w,textColorStyles:b}=Fs(()=>e.borderColor),{t:x}=Pa(),T=qe(()=>({"aria-label":x(e.closeLabel),onClick(U){r.value=!1,n("click:close",U)}}));return()=>{const U=!!(a.prepend||s.value),k=!!(a.title||e.title),S=!!(a.close||e.closable),E={density:e.density,icon:s.value,size:e.iconSize||e.prominent?o.value:void 0};return r.value&&l(e.tag,{class:ct(["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${e.border===!0?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},i.value,c.value,f.value,h.value,y.value,g.value,d.value,e.class]),style:Rt([A.value,m.value,v.value,e.style]),role:"alert"},{default:()=>[Xd(!1,"v-alert"),e.border&&p("div",{key:"border",class:ct(["v-alert__border",w.value]),style:Rt(b.value)},null),U&&p("div",{key:"prepend",class:"v-alert__prepend"},[a.prepend?l(Rn,{key:"prepend-defaults",disabled:!s.value,defaults:{VIcon:{...E}}},a.prepend):l(ya,Fe({key:"prepend-icon"},E),null)]),p("div",{class:"v-alert__content"},[k&&l(dQ,{key:"title"},{default:()=>[a.title?.()??e.title]}),a.text?.()??e.text,a.default?.()]),a.append&&p("div",{key:"append",class:"v-alert__append"},[a.append()]),S&&p("div",{key:"close",class:"v-alert__close"},[a.close?l(Rn,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>[a.close?.({props:T.value})]}):l(jn,Fe({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},T.value),null)])]})}}}),mWe=ot({start:Boolean,end:Boolean,icon:un,image:String,text:String,...$o(),...en(),...rs(),...tr(),...Ou(),...Un(),...aa(),...tl({variant:"flat"})},"VAvatar"),Yi=yt()({name:"VAvatar",props:mWe(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=wa(e),{borderClasses:r}=oi(e),{colorClasses:s,colorStyles:o,variantClasses:i}=Mf(e),{densityClasses:c}=xo(e),{roundedClasses:A}=hr(e),{sizeClasses:d,sizeStyles:f}=dv(e);return St(()=>l(e.tag,{class:ct(["v-avatar",{"v-avatar--start":e.start,"v-avatar--end":e.end},a.value,r.value,s.value,c.value,A.value,d.value,i.value,e.class]),style:Rt([o.value,f.value,e.style])},{default:()=>[n.default?l(Rn,{key:"content-defaults",defaults:{VImg:{cover:!0,src:e.image},VIcon:{icon:e.icon}}},{default:()=>[n.default()]}):e.image?l(Tc,{key:"image",src:e.image,alt:"",cover:!0},null):e.icon?l(ya,{key:"icon",icon:e.icon},null):e.text,Xd(!1,"v-avatar")]})),{}}}),hWe=ot({text:String,onClick:Ts(),...en(),...aa()},"VLabel"),mv=yt()({name:"VLabel",props:hWe(),setup(e,t){let{slots:n}=t;return St(()=>p("label",{class:ct(["v-label",{"v-label--clickable":!!e.onClick},e.class]),style:Rt(e.style),onClick:e.onClick},[e.text,n.default?.()])),{}}}),AQ=Symbol.for("vuetify:selection-control-group"),l4=ot({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:un,trueIcon:un,ripple:{type:[Boolean,Object],default:!0},multiple:{type:Boolean,default:null},name:String,readonly:{type:Boolean,default:null},modelValue:null,type:String,valueComparator:{type:Function,default:ms},...en(),...rs(),...aa()},"SelectionControlGroup"),vWe=ot({...l4({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup"),fQ=yt()({name:"VSelectionControlGroup",props:vWe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=on(e,"modelValue"),r=Ho(),s=qe(()=>e.id||`v-selection-control-group-${r}`),o=qe(()=>e.name||s.value),i=new Set;return Ia(AQ,{modelValue:a,forceUpdate:()=>{i.forEach(c=>c())},onForceUpdate:c=>{i.add(c),as(()=>{i.delete(c)})}}),fr({[e.defaultsTarget]:{color:qe(()=>e.color),disabled:qe(()=>e.disabled),density:qe(()=>e.density),error:qe(()=>e.error),inline:qe(()=>e.inline),modelValue:a,multiple:qe(()=>!!e.multiple||e.multiple==null&&Array.isArray(a.value)),name:o,falseIcon:qe(()=>e.falseIcon),trueIcon:qe(()=>e.trueIcon),readonly:qe(()=>e.readonly),ripple:qe(()=>e.ripple),type:qe(()=>e.type),valueComparator:qe(()=>e.valueComparator)}}),St(()=>p("div",{class:ct(["v-selection-control-group",{"v-selection-control-group--inline":e.inline},e.class]),style:Rt(e.style),role:e.type==="radio"?"radiogroup":void 0},[n.default?.()])),{}}}),Xw=ot({label:String,baseColor:String,trueValue:null,falseValue:null,value:null,...en(),...l4()},"VSelectionControl");function pWe(e){const t=Sn(AQ,void 0),{densityClasses:n}=xo(e),a=on(e,"modelValue"),r=ee(()=>e.trueValue!==void 0?e.trueValue:e.value!==void 0?e.value:!0),s=ee(()=>e.falseValue!==void 0?e.falseValue:!1),o=ee(()=>!!e.multiple||e.multiple==null&&Array.isArray(a.value)),i=ee({get(){const h=t?t.modelValue.value:a.value;return o.value?cr(h).some(v=>e.valueComparator(v,r.value)):e.valueComparator(h,r.value)},set(h){if(e.readonly)return;const v=h?r.value:s.value;let y=v;o.value&&(y=h?[...cr(a.value),v]:cr(a.value).filter(g=>!e.valueComparator(g,r.value))),t?t.modelValue.value=y:a.value=y}}),{textColorClasses:c,textColorStyles:A}=Fs(()=>{if(!(e.error||e.disabled))return i.value?e.color:e.baseColor}),{backgroundColorClasses:d,backgroundColorStyles:f}=Ca(()=>i.value&&!e.error&&!e.disabled?e.color:e.baseColor),m=ee(()=>i.value?e.trueIcon:e.falseIcon);return{group:t,densityClasses:n,trueValue:r,falseValue:s,model:i,textColorClasses:c,textColorStyles:A,backgroundColorClasses:d,backgroundColorStyles:f,icon:m}}const Qd=yt()({name:"VSelectionControl",directives:{vRipple:wo},inheritAttrs:!1,props:Xw(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const{group:r,densityClasses:s,icon:o,model:i,textColorClasses:c,textColorStyles:A,backgroundColorClasses:d,backgroundColorStyles:f,trueValue:m}=pWe(e),h=Ho(),v=Ht(!1),y=Ht(!1),g=M(),w=qe(()=>e.id||`input-${h}`),b=qe(()=>!e.disabled&&!e.readonly);r?.onForceUpdate(()=>{g.value&&(g.value.checked=i.value)});function x(S){b.value&&(v.value=!0,gh(S.target,":focus-visible")!==!1&&(y.value=!0))}function T(){v.value=!1,y.value=!1}function U(S){S.stopPropagation()}function k(S){if(!b.value){g.value&&(g.value.checked=i.value);return}e.readonly&&r&&bn(()=>r.forceUpdate()),i.value=S.target.checked}return St(()=>{const S=a.label?a.label({label:e.label,props:{for:w.value}}):e.label,[E,C]=Wd(n),P=p("input",Fe({ref:g,checked:i.value,disabled:!!e.disabled,id:w.value,onBlur:T,onFocus:x,onInput:k,"aria-disabled":!!e.disabled,"aria-label":e.label,type:e.type,value:m.value,name:e.name,"aria-checked":e.type==="checkbox"?i.value:void 0},C),null);return p("div",Fe({class:["v-selection-control",{"v-selection-control--dirty":i.value,"v-selection-control--disabled":e.disabled,"v-selection-control--error":e.error,"v-selection-control--focused":v.value,"v-selection-control--focus-visible":y.value,"v-selection-control--inline":e.inline},s.value,e.class]},E,{style:e.style}),[p("div",{class:ct(["v-selection-control__wrapper",c.value]),style:Rt(A.value)},[a.default?.({backgroundColorClasses:d,backgroundColorStyles:f}),Aa(p("div",{class:ct(["v-selection-control__input"])},[a.input?.({model:i,textColorClasses:c,textColorStyles:A,backgroundColorClasses:d,backgroundColorStyles:f,inputNode:P,icon:o.value,props:{onFocus:x,onBlur:T,id:w.value}})??p(ze,null,[o.value&&l(ya,{key:"icon",icon:o.value},null),P])]),[[wo,!e.disabled&&!e.readonly&&e.ripple,null,{center:!0,circle:!0}]])]),S&&l(mv,{for:w.value,onClick:U},{default:()=>[S]})])}),{isFocused:v,input:g}}}),mQ=ot({indeterminate:Boolean,indeterminateIcon:{type:un,default:"$checkboxIndeterminate"},...Xw({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),Tu=yt()({name:"VCheckboxBtn",props:mQ(),emits:{"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{slots:n}=t;const a=on(e,"indeterminate"),r=on(e,"modelValue");function s(c){a.value&&(a.value=!1)}const o=qe(()=>a.value?e.indeterminateIcon:e.falseIcon),i=qe(()=>a.value?e.indeterminateIcon:e.trueIcon);return St(()=>{const c=Fa(Qd.filterProps(e),["modelValue"]);return l(Qd,Fe(c,{modelValue:r.value,"onUpdate:modelValue":[A=>r.value=A,s],class:["v-checkbox-btn",e.class],style:e.style,type:"checkbox",falseIcon:o.value,trueIcon:i.value,"aria-checked":a.value?"mixed":void 0}),n)}),{}}});function hQ(e){const{t}=Pa();function n(a){let{name:r,color:s,...o}=a;const i={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[r],c=e[`onClick:${r}`];function A(f){f.key!=="Enter"&&f.key!==" "||(f.preventDefault(),f.stopPropagation(),tw(c,new PointerEvent("click",f)))}const d=c&&i?t(`$vuetify.input.${i}`,e.label??""):void 0;return l(ya,Fe({icon:e[`${r}Icon`],"aria-label":d,onClick:c,onKeydown:A,color:s},o),null)}return{InputIcon:n}}const gWe=ot({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...en(),...Jl({transition:{component:r4,leaveAbsolute:!0,group:!0}})},"VMessages"),vQ=yt()({name:"VMessages",props:gWe(),setup(e,t){let{slots:n}=t;const a=ee(()=>cr(e.messages)),{textColorClasses:r,textColorStyles:s}=Fs(()=>e.color);return St(()=>l(mo,{transition:e.transition,tag:"div",class:ct(["v-messages",r.value,e.class]),style:Rt([s.value,e.style])},{default:()=>[e.active&&a.value.map((o,i)=>p("div",{class:"v-messages__message",key:`${i}-${a.value}`},[n.message?n.message({message:o}):o]))]})),{}}}),Fg=ot({focused:Boolean,"onUpdate:focused":Ts()},"focus");function Vc(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Du();const n=on(e,"focused"),a=qe(()=>({[`${t}--focused`]:n.value}));function r(){n.value=!0}function s(){n.value=!1}return{focusClasses:a,isFocused:n,focus:r,blur:s}}const pQ=Symbol.for("vuetify:form"),yWe=ot({disabled:Boolean,fastFail:Boolean,readonly:Boolean,modelValue:{type:Boolean,default:null},validateOn:{type:String,default:"input"}},"form");function _We(e){const t=on(e,"modelValue"),n=qe(()=>e.disabled),a=qe(()=>e.readonly),r=Ht(!1),s=M([]),o=M([]);async function i(){const d=[];let f=!0;o.value=[],r.value=!0;for(const m of s.value){const h=await m.validate();if(h.length>0&&(f=!1,d.push({id:m.id,errorMessages:h})),!f&&e.fastFail)break}return o.value=d,r.value=!1,{valid:f,errors:o.value}}function c(){s.value.forEach(d=>d.reset())}function A(){s.value.forEach(d=>d.resetValidation())}return We(s,()=>{let d=0,f=0;const m=[];for(const h of s.value)h.isValid===!1?(f++,m.push({id:h.id,errorMessages:h.errorMessages})):h.isValid===!0&&d++;o.value=m,t.value=f>0?!1:d===s.value.length?!0:null},{deep:!0,flush:"post"}),Ia(pQ,{register:d=>{let{id:f,vm:m,validate:h,reset:v,resetValidation:y}=d;s.value.some(g=>g.id===f),s.value.push({id:f,validate:h,reset:v,resetValidation:y,vm:i_(m),isValid:null,errorMessages:[]})},unregister:d=>{s.value=s.value.filter(f=>f.id!==d)},update:(d,f,m)=>{const h=s.value.find(v=>v.id===d);h&&(h.isValid=f,h.errorMessages=m)},isDisabled:n,isReadonly:a,isValidating:r,isValid:t,items:s,validateOn:qe(()=>e.validateOn)}),{errors:o,isDisabled:n,isReadonly:a,isValidating:r,isValid:t,items:s,validate:i,reset:c,resetValidation:A}}function Pg(e){const t=Sn(pQ,null);return{...t,isReadonly:ee(()=>!!(e?.readonly??t?.isReadonly.value)),isDisabled:ee(()=>!!(e?.disabled??t?.isDisabled.value))}}const wWe=Symbol.for("vuetify:rules");function bWe(e){const t=Sn(wWe,null);if(!e){if(!t)throw new Error("Could not find Vuetify rules injection");return t.aliases}return t?.resolve(e)??qe(e)}const gQ=ot({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...Fg()},"validation");function yQ(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Du(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ho();const a=on(e,"modelValue"),r=ee(()=>e.validationValue===void 0?a.value:e.validationValue),s=Pg(e),o=bWe(()=>e.rules),i=M([]),c=Ht(!0),A=ee(()=>!!(cr(a.value===""?null:a.value).length||cr(r.value===""?null:r.value).length)),d=ee(()=>e.errorMessages?.length?cr(e.errorMessages).concat(i.value).slice(0,Math.max(0,Number(e.maxErrors))):i.value),f=ee(()=>{let T=(e.validateOn??s.validateOn?.value)||"input";T==="lazy"&&(T="input lazy"),T==="eager"&&(T="input eager");const U=new Set(T?.split(" ")??[]);return{input:U.has("input"),blur:U.has("blur")||U.has("input")||U.has("invalid-input"),invalidInput:U.has("invalid-input"),lazy:U.has("lazy"),eager:U.has("eager")}}),m=ee(()=>e.error||e.errorMessages?.length?!1:e.rules.length?c.value?i.value.length||f.value.lazy?null:!0:!i.value.length:!0),h=Ht(!1),v=ee(()=>({[`${t}--error`]:m.value===!1,[`${t}--dirty`]:A.value,[`${t}--disabled`]:s.isDisabled.value,[`${t}--readonly`]:s.isReadonly.value})),y=Er("validation"),g=ee(()=>e.name??Oe(n));Gl(()=>{s.register?.({id:g.value,vm:y,validate:x,reset:w,resetValidation:b})}),la(()=>{s.unregister?.(g.value)}),cn(async()=>{f.value.lazy||await x(!f.value.eager),s.update?.(g.value,m.value,d.value)}),vo(()=>f.value.input||f.value.invalidInput&&m.value===!1,()=>{We(r,()=>{if(r.value!=null)x();else if(e.focused){const T=We(()=>e.focused,U=>{U||x(),T()})}})}),vo(()=>f.value.blur,()=>{We(()=>e.focused,T=>{T||x()})}),We([m,d],()=>{s.update?.(g.value,m.value,d.value)});async function w(){a.value=null,await bn(),await b()}async function b(){c.value=!0,f.value.lazy?i.value=[]:await x(!f.value.eager)}async function x(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const U=[];h.value=!0;for(const k of o.value){if(U.length>=Number(e.maxErrors??1))break;const E=await(typeof k=="function"?k:()=>k)(r.value);if(E!==!0){if(E!==!1&&typeof E!="string"){console.warn(`${E} is not a valid value. Rule functions must return boolean true or a string.`);continue}U.push(E||"")}}return i.value=U,h.value=!1,c.value=T,i.value}return{errorMessages:d,isDirty:A,isDisabled:s.isDisabled,isReadonly:s.isReadonly,isPristine:c,isValid:m,isValidating:h,reset:w,resetValidation:b,validate:x,validationClasses:v}}const Lc=ot({id:String,appendIcon:un,baseColor:String,centerAffix:{type:Boolean,default:!0},color:String,glow:Boolean,iconColor:[Boolean,String],prependIcon:un,hideDetails:[Boolean,String],hideSpinButtons:Boolean,hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},"onClick:prepend":Ts(),"onClick:append":Ts(),...en(),...rs(),...Pc(Ur(),["maxWidth","minWidth","width"]),...aa(),...gQ()},"VInput"),Ws=yt()({name:"VInput",props:{...Lc()},emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:a,emit:r}=t;const{densityClasses:s}=xo(e),{dimensionStyles:o}=Rr(e),{themeClasses:i}=wa(e),{rtlClasses:c}=Kr(),{InputIcon:A}=hQ(e),d=Ho(),f=ee(()=>e.id||`input-${d}`),{errorMessages:m,isDirty:h,isDisabled:v,isReadonly:y,isPristine:g,isValid:w,isValidating:b,reset:x,resetValidation:T,validate:U,validationClasses:k}=yQ(e,"v-input",f),S=ee(()=>e.errorMessages?.length||!g.value&&m.value.length?m.value:e.hint&&(e.persistentHint||e.focused)?e.hint:e.messages),E=qe(()=>S.value.length>0),C=qe(()=>!e.hideDetails||e.hideDetails==="auto"&&(E.value||!!a.details)),P=ee(()=>C.value?`${f.value}-messages`:void 0),F=ee(()=>({id:f,messagesId:P,isDirty:h,isDisabled:v,isReadonly:y,isPristine:g,isValid:w,isValidating:b,hasDetails:C,reset:x,resetValidation:T,validate:U})),N=qe(()=>e.error||e.disabled?void 0:e.focused?e.color:e.baseColor),L=qe(()=>{if(e.iconColor)return e.iconColor===!0?N.value:e.iconColor});return St(()=>{const ie=!!(a.prepend||e.prependIcon),le=!!(a.append||e.appendIcon);return p("div",{class:ct(["v-input",`v-input--${e.direction}`,{"v-input--center-affix":e.centerAffix,"v-input--focused":e.focused,"v-input--glow":e.glow,"v-input--hide-spin-buttons":e.hideSpinButtons},s.value,i.value,c.value,k.value,e.class]),style:Rt([o.value,e.style])},[ie&&p("div",{key:"prepend",class:"v-input__prepend"},[a.prepend?.(F.value),e.prependIcon&&l(A,{key:"prepend-icon",name:"prepend",color:L.value},null)]),a.default&&p("div",{class:"v-input__control"},[a.default?.(F.value)]),le&&p("div",{key:"append",class:"v-input__append"},[e.appendIcon&&l(A,{key:"append-icon",name:"append",color:L.value},null),a.append?.(F.value)]),C.value&&p("div",{id:P.value,class:"v-input__details",role:"alert","aria-live":"polite"},[l(vQ,{active:E.value,messages:S.value},{message:a.message}),a.details?.(F.value)])])}),{reset:x,resetValidation:T,validate:U,isValid:w,errorMessages:m}}}),zC=Symbol("Forwarded refs");function KC(e,t){let n=e;for(;n;){const a=Reflect.getOwnPropertyDescriptor(n,t);if(a)return a;n=Object.getPrototypeOf(n)}}function gs(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return e[zC]=n,new Proxy(e,{get(r,s){if(Reflect.has(r,s))return Reflect.get(r,s);if(!(typeof s=="symbol"||s.startsWith("$")||s.startsWith("__"))){for(const o of n)if(o.value&&Reflect.has(o.value,s)){const i=Reflect.get(o.value,s);return typeof i=="function"?i.bind(o.value):i}}},has(r,s){if(Reflect.has(r,s))return!0;if(typeof s=="symbol"||s.startsWith("$")||s.startsWith("__"))return!1;for(const o of n)if(o.value&&Reflect.has(o.value,s))return!0;return!1},set(r,s,o){if(Reflect.has(r,s))return Reflect.set(r,s,o);if(typeof s=="symbol"||s.startsWith("$")||s.startsWith("__"))return!1;for(const i of n)if(i.value&&Reflect.has(i.value,s))return Reflect.set(i.value,s,o);return!1},getOwnPropertyDescriptor(r,s){const o=Reflect.getOwnPropertyDescriptor(r,s);if(o)return o;if(!(typeof s=="symbol"||s.startsWith("$")||s.startsWith("__"))){for(const i of n){if(!i.value)continue;const c=KC(i.value,s)??("_"in i.value?KC(i.value._?.setupState,s):void 0);if(c)return c}for(const i of n){const c=i.value&&i.value[zC];if(!c)continue;const A=c.slice();for(;A.length;){const d=A.shift(),f=KC(d.value,s);if(f)return f;const m=d.value&&d.value[zC];m&&A.push(...m)}}}}})}const xWe=ot({...Lc(),...Fa(mQ(),["inline"])},"VCheckbox"),CWe=yt()({name:"VCheckbox",inheritAttrs:!1,props:xWe(),emits:{"update:modelValue":e=>!0,"update:focused":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const r=on(e,"modelValue"),{isFocused:s,focus:o,blur:i}=Vc(e),c=M(),A=Ho();return St(()=>{const[d,f]=Wd(n),m=Ws.filterProps(e),h=Tu.filterProps(e);return l(Ws,Fe({ref:c,class:["v-checkbox",e.class]},d,m,{modelValue:r.value,"onUpdate:modelValue":v=>r.value=v,id:e.id||`checkbox-${A}`,focused:s.value,style:e.style}),{...a,default:v=>{let{id:y,messagesId:g,isDisabled:w,isReadonly:b,isValid:x}=v;return l(Tu,Fe(h,{id:y.value,"aria-describedby":g.value,disabled:w.value,readonly:b.value},f,{error:x.value===!1,modelValue:r.value,"onUpdate:modelValue":T=>r.value=T,onFocus:o,onBlur:i}),a)}})}),gs({},c)}});function SWe(e){let{selectedElement:t,containerElement:n,isRtl:a,isHorizontal:r}=e;const s=$0(r,n),o=_Q(r,a,n),i=$0(r,t),c=wQ(r,t),A=i*.4;return o>c?c-A:o+s<c+i?c-s+i+A:o}function EWe(e){let{selectedElement:t,containerElement:n,isHorizontal:a}=e;const r=$0(a,n),s=wQ(a,t),o=$0(a,t);return s-r/2+o/2}function kN(e,t){return t?.[e?"scrollWidth":"scrollHeight"]||0}function BWe(e,t){return t?.[e?"clientWidth":"clientHeight"]||0}function _Q(e,t,n){if(!n)return 0;const{scrollLeft:a,offsetWidth:r,scrollWidth:s}=n;return e?t?s-r+a:a:n.scrollTop}function $0(e,t){return t?.[e?"offsetWidth":"offsetHeight"]||0}function wQ(e,t){return t?.[e?"offsetLeft":"offsetTop"]||0}const bQ=Symbol.for("vuetify:v-slide-group"),u4=ot({centerActive:Boolean,contentClass:null,direction:{type:String,default:"horizontal"},symbol:{type:null,default:bQ},nextIcon:{type:un,default:"$next"},prevIcon:{type:un,default:"$prev"},showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["always","desktop","mobile"].includes(e)},...en(),...kf({mobile:null}),...Un(),...Of({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),Q0=yt()({name:"VSlideGroup",props:u4(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{isRtl:a}=Kr(),{displayClasses:r,mobile:s}=Ji(e),o=Jd(e,e.symbol),i=Ht(!1),c=Ht(0),A=Ht(0),d=Ht(0),f=ee(()=>e.direction==="horizontal"),{resizeRef:m,contentRect:h}=Rl(),{resizeRef:v,contentRect:y}=Rl(),g=Lne(),w=ee(()=>({container:m.el,duration:200,easing:"easeOutQuart"})),b=ee(()=>o.selected.value.length?o.items.value.findIndex(D=>D.id===o.selected.value[0]):-1),x=ee(()=>o.selected.value.length?o.items.value.findIndex(D=>D.id===o.selected.value[o.selected.value.length-1]):-1);if(_a){let D=-1;We(()=>[o.selected.value,h.value,y.value,f.value],()=>{cancelAnimationFrame(D),D=requestAnimationFrame(()=>{if(h.value&&y.value){const j=f.value?"width":"height";A.value=h.value[j],d.value=y.value[j],i.value=A.value+1<d.value}if(b.value>=0&&v.el){const j=v.el.children[x.value];U(j,e.centerActive)}})})}const T=Ht(!1);function U(D,j){let ne=0;j?ne=EWe({containerElement:m.el,isHorizontal:f.value,selectedElement:D}):ne=SWe({containerElement:m.el,isHorizontal:f.value,isRtl:a.value,selectedElement:D}),k(ne)}function k(D){if(!_a||!m.el)return;const j=$0(f.value,m.el),ne=_Q(f.value,a.value,m.el);if(!(kN(f.value,m.el)<=j||Math.abs(D-ne)<16)){if(f.value&&a.value&&m.el){const{scrollWidth:te,offsetWidth:Y}=m.el;D=te-Y-D}f.value?g.horizontal(D,w.value):g(D,w.value)}}function S(D){const{scrollTop:j,scrollLeft:ne}=D.target;c.value=f.value?ne:j}function E(D){if(T.value=!0,!(!i.value||!v.el)){for(const j of D.composedPath())for(const ne of v.el.children)if(ne===j){U(ne);return}}}function C(D){T.value=!1}let P=!1;function F(D){!P&&!T.value&&!(D.relatedTarget&&v.el?.contains(D.relatedTarget))&&le(),P=!1}function N(){P=!0}function L(D){if(!v.el)return;function j(ne){D.preventDefault(),le(ne)}f.value?D.key==="ArrowRight"?j(a.value?"prev":"next"):D.key==="ArrowLeft"&&j(a.value?"next":"prev"):D.key==="ArrowDown"?j("next"):D.key==="ArrowUp"&&j("prev"),D.key==="Home"?j("first"):D.key==="End"&&j("last")}function ie(D,j){if(!D)return;let ne=D;do ne=ne?.[j==="next"?"nextElementSibling":"previousElementSibling"];while(ne?.hasAttribute("disabled"));return ne}function le(D){if(!v.el)return;let j;if(!D)j=m0(v.el)[0];else if(D==="next"){if(j=ie(v.el.querySelector(":focus"),D),!j)return le("first")}else if(D==="prev"){if(j=ie(v.el.querySelector(":focus"),D),!j)return le("last")}else D==="first"?(j=v.el.firstElementChild,j?.hasAttribute("disabled")&&(j=ie(j,"next"))):D==="last"&&(j=v.el.lastElementChild,j?.hasAttribute("disabled")&&(j=ie(j,"prev")));j&&j.focus({preventScroll:!0})}function Q(D){const j=f.value&&a.value?-1:1,ne=(D==="prev"?-j:j)*A.value;let H=c.value+ne;if(f.value&&a.value&&m.el){const{scrollWidth:te,offsetWidth:Y}=m.el;H+=te-Y}k(H)}const Z=ee(()=>({next:o.next,prev:o.prev,select:o.select,isSelected:o.isSelected})),ce=ee(()=>i.value||Math.abs(c.value)>0),J=ee(()=>{switch(e.showArrows){case"always":return!0;case"desktop":return!s.value;case!0:return ce.value;case"mobile":return s.value||ce.value;default:return!s.value&&ce.value}}),se=ee(()=>Math.abs(c.value)>1),G=ee(()=>{if(!m.value||!ce.value)return!1;const D=kN(f.value,m.el),j=BWe(f.value,m.el);return D-j-Math.abs(c.value)>1});return St(()=>l(e.tag,{class:ct(["v-slide-group",{"v-slide-group--vertical":!f.value,"v-slide-group--has-affixes":J.value,"v-slide-group--is-overflowing":i.value},r.value,e.class]),style:Rt(e.style),tabindex:T.value||o.selected.value.length?-1:0,onFocus:F},{default:()=>[J.value&&p("div",{key:"prev",class:ct(["v-slide-group__prev",{"v-slide-group__prev--disabled":!se.value}]),onMousedown:N,onClick:()=>se.value&&Q("prev")},[n.prev?.(Z.value)??l(M0,null,{default:()=>[l(ya,{icon:a.value?e.nextIcon:e.prevIcon},null)]})]),p("div",{key:"container",ref:m,class:ct(["v-slide-group__container",e.contentClass]),onScroll:S},[p("div",{ref:v,class:"v-slide-group__content",onFocusin:E,onFocusout:C,onKeydown:L},[n.default?.(Z.value)])]),J.value&&p("div",{key:"next",class:ct(["v-slide-group__next",{"v-slide-group__next--disabled":!G.value}]),onMousedown:N,onClick:()=>G.value&&Q("next")},[n.next?.(Z.value)??l(M0,null,{default:()=>[l(ya,{icon:a.value?e.prevIcon:e.nextIcon},null)]})])]})),{selected:o.selected,scrollTo:Q,scrollOffset:c,focus:le,hasPrev:se,hasNext:G}}}),xQ=Symbol.for("vuetify:v-chip-group"),kWe=ot({baseColor:String,column:Boolean,filter:Boolean,valueComparator:{type:Function,default:ms},...u4(),...en(),...Of({selectedClass:"v-chip--selected"}),...Un(),...aa(),...tl({variant:"tonal"})},"VChipGroup"),TWe=yt()({name:"VChipGroup",props:kWe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:a}=wa(e),{isSelected:r,select:s,next:o,prev:i,selected:c}=Jd(e,xQ);return fr({VChip:{baseColor:qe(()=>e.baseColor),color:qe(()=>e.color),disabled:qe(()=>e.disabled),filter:qe(()=>e.filter),variant:qe(()=>e.variant)}}),St(()=>{const A=Q0.filterProps(e);return l(Q0,Fe(A,{class:["v-chip-group",{"v-chip-group--column":e.column},a.value,e.class],style:e.style}),{default:()=>[n.default?.({isSelected:r,select:s,next:o,prev:i,selected:c.value})]})}),{}}}),IWe=ot({activeClass:String,appendAvatar:String,appendIcon:un,baseColor:String,closable:Boolean,closeIcon:{type:un,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:un,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:un,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},modelValue:{type:Boolean,default:!0},onClick:Ts(),onClickOnce:Ts(),...$o(),...en(),...rs(),...Wr(),...Hf(),...tr(),...Ig(),...Ou(),...Un({tag:"span"}),...aa(),...tl({variant:"tonal"})},"VChip"),hv=yt()({name:"VChip",directives:{vRipple:wo},props:IWe(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0,"group:selected":e=>!0,click:e=>!0},setup(e,t){let{attrs:n,emit:a,slots:r}=t;const{t:s}=Pa(),{borderClasses:o}=oi(e),{densityClasses:i}=xo(e),{elevationClasses:c}=ps(e),{roundedClasses:A}=hr(e),{sizeClasses:d}=dv(e),{themeClasses:f}=wa(e),m=on(e,"modelValue"),h=$f(e,xQ,!1),v=Tg(e,n),y=qe(()=>e.link!==!1&&v.isLink.value),g=ee(()=>!e.disabled&&e.link!==!1&&(!!h||e.link||v.isClickable.value)),w=qe(()=>({"aria-label":s(e.closeLabel),disabled:e.disabled,onClick(S){S.preventDefault(),S.stopPropagation(),m.value=!1,a("click:close",S)}})),{colorClasses:b,colorStyles:x,variantClasses:T}=Mf(()=>({color:!h||h.isSelected.value?e.color??e.baseColor:e.baseColor,variant:e.variant}));function U(S){a("click",S),g.value&&(v.navigate?.(S),h?.toggle())}function k(S){(S.key==="Enter"||S.key===" ")&&(S.preventDefault(),U(S))}return()=>{const S=v.isLink.value?"a":e.tag,E=!!(e.appendIcon||e.appendAvatar),C=!!(E||r.append),P=!!(r.close||e.closable),F=!!(r.filter||e.filter)&&h,N=!!(e.prependIcon||e.prependAvatar),L=!!(N||r.prepend);return m.value&&Aa(l(S,Fe({class:["v-chip",{"v-chip--disabled":e.disabled,"v-chip--label":e.label,"v-chip--link":g.value,"v-chip--filter":F,"v-chip--pill":e.pill,[`${e.activeClass}`]:e.activeClass&&v.isActive?.value},f.value,o.value,b.value,i.value,c.value,A.value,d.value,T.value,h?.selectedClass.value,e.class],style:[x.value,e.style],disabled:e.disabled||void 0,draggable:e.draggable,tabindex:g.value?0:void 0,onClick:U,onKeydown:g.value&&!y.value&&k},v.linkProps),{default:()=>[Xd(g.value,"v-chip"),F&&l(s4,{key:"filter"},{default:()=>[Aa(p("div",{class:"v-chip__filter"},[r.filter?l(Rn,{key:"filter-defaults",disabled:!e.filterIcon,defaults:{VIcon:{icon:e.filterIcon}}},r.filter):l(ya,{key:"filter-icon",icon:e.filterIcon},null)]),[[ai,h.isSelected.value]])]}),L&&p("div",{key:"prepend",class:"v-chip__prepend"},[r.prepend?l(Rn,{key:"prepend-defaults",disabled:!N,defaults:{VAvatar:{image:e.prependAvatar,start:!0},VIcon:{icon:e.prependIcon,start:!0}}},r.prepend):p(ze,null,[e.prependIcon&&l(ya,{key:"prepend-icon",icon:e.prependIcon,start:!0},null),e.prependAvatar&&l(Yi,{key:"prepend-avatar",image:e.prependAvatar,start:!0},null)])]),p("div",{class:"v-chip__content","data-no-activator":""},[r.default?.({isSelected:h?.isSelected.value,selectedClass:h?.selectedClass.value,select:h?.select,toggle:h?.toggle,value:h?.value.value,disabled:e.disabled})??q(e.text)]),C&&p("div",{key:"append",class:"v-chip__append"},[r.append?l(Rn,{key:"append-defaults",disabled:!E,defaults:{VAvatar:{end:!0,image:e.appendAvatar},VIcon:{end:!0,icon:e.appendIcon}}},r.append):p(ze,null,[e.appendIcon&&l(ya,{key:"append-icon",end:!0,icon:e.appendIcon},null),e.appendAvatar&&l(Yi,{key:"append-avatar",end:!0,image:e.appendAvatar},null)])]),P&&p("button",Fe({key:"close",class:"v-chip__close",type:"button","data-testid":"close-chip"},w.value),[r.close?l(Rn,{key:"close-defaults",defaults:{VIcon:{icon:e.closeIcon,size:"x-small"}}},r.close):l(ya,{key:"close-icon",icon:e.closeIcon,size:"x-small"},null)])]}),[[wo,g.value&&e.ripple,null]])}}}),FWe=ot({color:String,inset:Boolean,length:[Number,String],opacity:[Number,String],thickness:[Number,String],vertical:Boolean,...en(),...aa()},"VDivider"),bi=yt()({name:"VDivider",props:FWe(),setup(e,t){let{attrs:n,slots:a}=t;const{themeClasses:r}=wa(e),{textColorClasses:s,textColorStyles:o}=Fs(()=>e.color),i=ee(()=>{const c={};return e.length&&(c[e.vertical?"height":"width"]=jt(e.length)),e.thickness&&(c[e.vertical?"borderRightWidth":"borderTopWidth"]=jt(e.thickness)),c});return St(()=>{const c=p("hr",{class:ct([{"v-divider":!0,"v-divider--inset":e.inset,"v-divider--vertical":e.vertical},r.value,s.value,e.class]),style:Rt([i.value,o.value,{"--v-border-opacity":e.opacity},e.style]),"aria-orientation":!n.role||n.role==="separator"?e.vertical?"vertical":"horizontal":void 0,role:`${n.role||"separator"}`},null);return a.default?p("div",{class:ct(["v-divider__wrapper",{"v-divider__wrapper--vertical":e.vertical,"v-divider__wrapper--inset":e.inset}])},[c,p("div",{class:"v-divider__content"},[a.default()]),c]):c}),{}}}),tB=Symbol.for("vuetify:list");function CQ(){let{filterable:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{filterable:!1};const t=Sn(tB,{filterable:!1,hasPrepend:Ht(!1),updateHasPrepend:()=>null}),n={filterable:t.filterable||e,hasPrepend:Ht(!1),updateHasPrepend:a=>{a&&(n.hasPrepend.value=a)}};return Ia(tB,n),t}function SQ(){return Sn(tB,null)}const c4=e=>{const t={activate:n=>{let{id:a,value:r,activated:s}=n;return a=gn(a),e&&!r&&s.size===1&&s.has(a)||(r?s.add(a):s.delete(a)),s},in:(n,a,r)=>{let s=new Set;if(n!=null)for(const o of cr(n))s=t.activate({id:o,value:!0,activated:new Set(s),children:a,parents:r});return s},out:n=>Array.from(n)};return t},EQ=e=>{const t=c4(e);return{activate:a=>{let{activated:r,id:s,...o}=a;s=gn(s);const i=r.has(s)?new Set([s]):new Set;return t.activate({...o,id:s,activated:i})},in:(a,r,s)=>{let o=new Set;if(a!=null){const i=cr(a);i.length&&(o=t.in(i.slice(0,1),r,s))}return o},out:(a,r,s)=>t.out(a,r,s)}},PWe=e=>{const t=c4(e);return{activate:a=>{let{id:r,activated:s,children:o,...i}=a;return r=gn(r),o.has(r)?s:t.activate({id:r,activated:s,children:o,...i})},in:t.in,out:t.out}},DWe=e=>{const t=EQ(e);return{activate:a=>{let{id:r,activated:s,children:o,...i}=a;return r=gn(r),o.has(r)?s:t.activate({id:r,activated:s,children:o,...i})},in:t.in,out:t.out}},UWe={open:e=>{let{id:t,value:n,opened:a,parents:r}=e;if(n){const s=new Set;s.add(t);let o=r.get(t);for(;o!=null;)s.add(o),o=r.get(o);return s}else return a.delete(t),a},select:()=>null},BQ={open:e=>{let{id:t,value:n,opened:a,parents:r}=e;if(n){let s=r.get(t);for(a.add(t);s!=null&&s!==t;)a.add(s),s=r.get(s);return a}else a.delete(t);return a},select:()=>null},RWe={open:BQ.open,select:e=>{let{id:t,value:n,opened:a,parents:r}=e;if(!n)return a;const s=[];let o=r.get(t);for(;o!=null;)s.push(o),o=r.get(o);return new Set(s)}},d4=e=>{const t={select:n=>{let{id:a,value:r,selected:s}=n;if(a=gn(a),e&&!r){const o=Array.from(s.entries()).reduce((i,c)=>{let[A,d]=c;return d==="on"&&i.push(A),i},[]);if(o.length===1&&o[0]===a)return s}return s.set(a,r?"on":"off"),s},in:(n,a,r,s)=>{const o=new Map;for(const i of n||[])t.select({id:i,value:!0,selected:o,children:a,parents:r,disabled:s});return o},out:n=>{const a=[];for(const[r,s]of n.entries())s==="on"&&a.push(r);return a}};return t},kQ=e=>{const t=d4(e);return{select:a=>{let{selected:r,id:s,...o}=a;s=gn(s);const i=r.has(s)?new Map([[s,r.get(s)]]):new Map;return t.select({...o,id:s,selected:i})},in:(a,r,s,o)=>a?.length?t.in(a.slice(0,1),r,s,o):new Map,out:(a,r,s)=>t.out(a,r,s)}},NWe=e=>{const t=d4(e);return{select:a=>{let{id:r,selected:s,children:o,...i}=a;return r=gn(r),o.has(r)?s:t.select({id:r,selected:s,children:o,...i})},in:t.in,out:t.out}},VWe=e=>{const t=kQ(e);return{select:a=>{let{id:r,selected:s,children:o,...i}=a;return r=gn(r),o.has(r)?s:t.select({id:r,selected:s,children:o,...i})},in:t.in,out:t.out}},TQ=e=>{const t={select:n=>{let{id:a,value:r,selected:s,children:o,parents:i,disabled:c}=n;a=gn(a);const A=new Map(s),d=[a];for(;d.length;){const m=d.shift();c.has(m)||s.set(gn(m),r?"on":"off"),o.has(m)&&d.push(...o.get(m))}let f=gn(i.get(a));for(;f;){let m=!0,h=!0;for(const v of o.get(f)){const y=gn(v);if(!c.has(y)&&(s.get(y)!=="on"&&(m=!1),s.has(y)&&s.get(y)!=="off"&&(h=!1),!m&&!h))break}s.set(f,m?"on":h?"off":"indeterminate"),f=gn(i.get(f))}return e&&!r&&Array.from(s.entries()).reduce((h,v)=>{let[y,g]=v;return g==="on"&&h.push(y),h},[]).length===0?A:s},in:(n,a,r,s)=>{let o=new Map;for(const i of n||[])o=t.select({id:i,value:!0,selected:o,children:a,parents:r,disabled:s});return o},out:(n,a)=>{const r=[];for(const[s,o]of n.entries())o==="on"&&!a.has(s)&&r.push(s);return r}};return t},LWe=e=>{const t=TQ(e);return{select:t.select,in:t.in,out:(a,r,s)=>{const o=[];for(const[i,c]of a.entries())if(c==="on"){if(s.has(i)){const A=s.get(i);if(a.get(A)==="on")continue}o.push(i)}return o}}},G0=Symbol.for("vuetify:nested"),IQ={id:Ht(),root:{register:()=>null,unregister:()=>null,children:M(new Map),parents:M(new Map),disabled:M(new Set),open:()=>null,openOnSelect:()=>null,activate:()=>null,select:()=>null,activatable:M(!1),selectable:M(!1),opened:M(new Set),activated:M(new Set),selected:M(new Map),selectedValues:M([]),getPath:()=>[]}},MWe=ot({activatable:Boolean,selectable:Boolean,activeStrategy:[String,Function,Object],selectStrategy:[String,Function,Object],openStrategy:[String,Object],opened:null,activated:null,selected:null,mandatory:Boolean},"nested"),OWe=e=>{let t=!1;const n=Ht(new Map),a=Ht(new Map),r=Ht(new Set),s=on(e,"opened",e.opened,y=>new Set(Array.isArray(y)?y.map(g=>gn(g)):y),y=>[...y.values()]),o=ee(()=>{if(typeof e.activeStrategy=="object")return e.activeStrategy;if(typeof e.activeStrategy=="function")return e.activeStrategy(e.mandatory);switch(e.activeStrategy){case"leaf":return PWe(e.mandatory);case"single-leaf":return DWe(e.mandatory);case"independent":return c4(e.mandatory);case"single-independent":default:return EQ(e.mandatory)}}),i=ee(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;if(typeof e.selectStrategy=="function")return e.selectStrategy(e.mandatory);switch(e.selectStrategy){case"single-leaf":return VWe(e.mandatory);case"leaf":return NWe(e.mandatory);case"independent":return d4(e.mandatory);case"single-independent":return kQ(e.mandatory);case"trunk":return LWe(e.mandatory);case"classic":default:return TQ(e.mandatory)}}),c=ee(()=>{if(typeof e.openStrategy=="object")return e.openStrategy;switch(e.openStrategy){case"list":return RWe;case"single":return UWe;case"multiple":default:return BQ}}),A=on(e,"activated",e.activated,y=>o.value.in(y,n.value,a.value),y=>o.value.out(y,n.value,a.value)),d=on(e,"selected",e.selected,y=>i.value.in(y,n.value,a.value,r.value),y=>i.value.out(y,n.value,a.value));la(()=>{t=!0});function f(y){const g=[];let w=gn(y);for(;w!==void 0;)g.unshift(w),w=a.value.get(w);return g}const m=Er("nested"),h=new Set,v={id:Ht(),root:{opened:s,activatable:qe(()=>e.activatable),selectable:qe(()=>e.selectable),activated:A,selected:d,selectedValues:ee(()=>{const y=[];for(const[g,w]of d.value.entries())w==="on"&&y.push(g);return y}),register:(y,g,w,b)=>{if(h.has(y)){f(y).map(String).join(" -> "),f(g).concat(y).map(String).join(" -> ");return}else h.add(y);g&&y!==g&&a.value.set(y,g),w&&r.value.add(y),b&&n.value.set(y,[]),g!=null&&n.value.set(g,[...n.value.get(g)||[],y])},unregister:y=>{if(t)return;h.delete(y),n.value.delete(y),r.value.delete(y);const g=a.value.get(y);if(g){const w=n.value.get(g)??[];n.value.set(g,w.filter(b=>b!==y))}a.value.delete(y)},open:(y,g,w)=>{m.emit("click:open",{id:y,value:g,path:f(y),event:w});const b=c.value.open({id:y,value:g,opened:new Set(s.value),children:n.value,parents:a.value,event:w});b&&(s.value=b)},openOnSelect:(y,g,w)=>{const b=c.value.select({id:y,value:g,selected:new Map(d.value),opened:new Set(s.value),children:n.value,parents:a.value,event:w});b&&(s.value=b)},select:(y,g,w)=>{m.emit("click:select",{id:y,value:g,path:f(y),event:w});const b=i.value.select({id:y,value:g,selected:new Map(d.value),children:n.value,parents:a.value,disabled:r.value,event:w});b&&(d.value=b),v.root.openOnSelect(y,g,w)},activate:(y,g,w)=>{if(!e.activatable)return v.root.select(y,!0,w);m.emit("click:activate",{id:y,value:g,path:f(y),event:w});const b=o.value.activate({id:y,value:g,activated:new Set(A.value),children:n.value,parents:a.value,event:w});if(b.size!==A.value.size)A.value=b;else{for(const x of b)if(!A.value.has(x)){A.value=b;return}for(const x of A.value)if(!b.has(x)){A.value=b;return}}},children:n,parents:a,disabled:r,getPath:f}};return Ia(G0,v),v.root},FQ=(e,t,n)=>{const a=Sn(G0,IQ),r=Symbol("nested item"),s=ee(()=>{const i=gn(xu(e));return i!==void 0?i:r}),o={...a,id:s,open:(i,c)=>a.root.open(s.value,i,c),openOnSelect:(i,c)=>a.root.openOnSelect(s.value,i,c),isOpen:ee(()=>a.root.opened.value.has(s.value)),parent:ee(()=>a.root.parents.value.get(s.value)),activate:(i,c)=>a.root.activate(s.value,i,c),isActivated:ee(()=>a.root.activated.value.has(s.value)),select:(i,c)=>a.root.select(s.value,i,c),isSelected:ee(()=>a.root.selected.value.get(s.value)==="on"),isIndeterminate:ee(()=>a.root.selected.value.get(s.value)==="indeterminate"),isLeaf:ee(()=>!a.root.children.value.get(s.value)),isGroupActivator:a.isGroupActivator};return Gl(()=>{a.isGroupActivator||a.root.register(s.value,a.id.value,xu(t),n)}),la(()=>{a.isGroupActivator||a.root.unregister(s.value)}),n&&Ia(G0,o),o},HWe=()=>{const e=Sn(G0,IQ);Ia(G0,{...e,isGroupActivator:!0})},$We=Ei({name:"VListGroupActivator",setup(e,t){let{slots:n}=t;return HWe(),()=>n.default?.()}}),PQ=ot({activeColor:String,baseColor:String,color:String,collapseIcon:{type:un,default:"$collapse"},disabled:Boolean,expandIcon:{type:un,default:"$expand"},rawId:[String,Number],prependIcon:un,appendIcon:un,fluid:Boolean,subgroup:Boolean,title:String,value:null,...en(),...Un()},"VListGroup"),z0=yt()({name:"VListGroup",props:PQ(),setup(e,t){let{slots:n}=t;const{isOpen:a,open:r,id:s}=FQ(()=>e.value,()=>e.disabled,!0),o=ee(()=>`v-list-group--id-${String(e.rawId??s.value)}`),i=SQ(),{isBooted:c}=Lf();function A(h){["INPUT","TEXTAREA"].includes(h.target?.tagName)||r(!a.value,h)}const d=ee(()=>({onClick:A,class:"v-list-group__header",id:o.value})),f=ee(()=>a.value?e.collapseIcon:e.expandIcon),m=ee(()=>({VListItem:{activeColor:e.activeColor,baseColor:e.baseColor,color:e.color,prependIcon:e.prependIcon||e.subgroup&&f.value,appendIcon:e.appendIcon||!e.subgroup&&f.value,title:e.title,value:e.value}}));return St(()=>l(e.tag,{class:ct(["v-list-group",{"v-list-group--prepend":i?.hasPrepend.value,"v-list-group--fluid":e.fluid,"v-list-group--subgroup":e.subgroup,"v-list-group--open":a.value},e.class]),style:Rt(e.style)},{default:()=>[n.activator&&l(Rn,{defaults:m.value},{default:()=>[l($We,null,{default:()=>[n.activator({props:d.value,isOpen:a.value})]})]}),l(mo,{transition:{component:Ww},disabled:!c.value},{default:()=>[Aa(p("div",{class:"v-list-group__items",role:"group","aria-labelledby":o.value},[n.default?.()]),[[ai,a.value]])]})]})),{isOpen:a}}}),QWe=ot({opacity:[Number,String],...en(),...Un()},"VListItemSubtitle"),DQ=yt()({name:"VListItemSubtitle",props:QWe(),setup(e,t){let{slots:n}=t;return St(()=>l(e.tag,{class:ct(["v-list-item-subtitle",e.class]),style:Rt([{"--v-list-item-subtitle-opacity":e.opacity},e.style])},n)),{}}}),UQ=Dc("v-list-item-title"),RQ=ot({active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:un,baseColor:String,disabled:Boolean,lines:[Boolean,String],link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:un,ripple:{type:[Boolean,Object],default:!0},slim:Boolean,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},value:null,onClick:Ts(),onClickOnce:Ts(),...$o(),...en(),...rs(),...Ur(),...Wr(),...tr(),...Ig(),...Un(),...aa(),...tl({variant:"text"})},"VListItem"),Hl=yt()({name:"VListItem",directives:{vRipple:wo},props:RQ(),emits:{click:e=>!0},setup(e,t){let{attrs:n,slots:a,emit:r}=t;const s=Tg(e,n),o=ee(()=>e.value===void 0?s.href.value:e.value),{activate:i,isActivated:c,select:A,isOpen:d,isSelected:f,isIndeterminate:m,isGroupActivator:h,root:v,parent:y,openOnSelect:g,id:w}=FQ(o,()=>e.disabled,!1),b=SQ(),x=ee(()=>e.active!==!1&&(e.active||s.isActive?.value||(v.activatable.value?c.value:f.value))),T=qe(()=>e.link!==!1&&s.isLink.value),U=ee(()=>!!b&&(v.selectable.value||v.activatable.value||e.value!=null)),k=ee(()=>!e.disabled&&e.link!==!1&&(e.link||s.isClickable.value||U.value)),S=qe(()=>e.rounded||e.nav),E=qe(()=>e.color??e.activeColor),C=qe(()=>({color:x.value?E.value??e.baseColor:e.baseColor,variant:e.variant}));We(()=>s.isActive?.value,H=>{H&&P()}),Gl(()=>{s.isActive?.value&&P()});function P(){y.value!=null&&v.open(y.value,!0),g(!0)}const{themeClasses:F}=wa(e),{borderClasses:N}=oi(e),{colorClasses:L,colorStyles:ie,variantClasses:le}=Mf(C),{densityClasses:Q}=xo(e),{dimensionStyles:Z}=Rr(e),{elevationClasses:ce}=ps(e),{roundedClasses:J}=hr(S),se=qe(()=>e.lines?`v-list-item--${e.lines}-line`:void 0),G=qe(()=>e.ripple!==void 0&&e.ripple&&b?.filterable?{keys:["Enter"]}:e.ripple),D=ee(()=>({isActive:x.value,select:A,isOpen:d.value,isSelected:f.value,isIndeterminate:m.value}));function j(H){r("click",H),!["INPUT","TEXTAREA"].includes(H.target?.tagName)&&k.value&&(s.navigate?.(H),!h&&(v.activatable.value?i(!c.value,H):(v.selectable.value||e.value!=null)&&A(!f.value,H)))}function ne(H){const te=H.target;["INPUT","TEXTAREA"].includes(te.tagName)||(H.key==="Enter"||H.key===" "&&!b?.filterable)&&(H.preventDefault(),H.stopPropagation(),H.target.dispatchEvent(new MouseEvent("click",H)))}return St(()=>{const H=T.value?"a":e.tag,te=a.title||e.title!=null,Y=a.subtitle||e.subtitle!=null,K=!!(e.appendAvatar||e.appendIcon),X=!!(K||a.append),ae=!!(e.prependAvatar||e.prependIcon),oe=!!(ae||a.prepend);return b?.updateHasPrepend(oe),e.activeColor&&M8("active-color",["color","base-color"]),Aa(l(H,Fe({class:["v-list-item",{"v-list-item--active":x.value,"v-list-item--disabled":e.disabled,"v-list-item--link":k.value,"v-list-item--nav":e.nav,"v-list-item--prepend":!oe&&b?.hasPrepend.value,"v-list-item--slim":e.slim,[`${e.activeClass}`]:e.activeClass&&x.value},F.value,N.value,L.value,Q.value,ce.value,se.value,J.value,le.value,e.class],style:[ie.value,Z.value,e.style],tabindex:k.value?b?-2:0:void 0,"aria-selected":U.value?v.activatable.value?c.value:v.selectable.value?f.value:x.value:void 0,onClick:j,onKeydown:k.value&&!T.value&&ne},s.linkProps),{default:()=>[Xd(k.value||x.value,"v-list-item"),oe&&p("div",{key:"prepend",class:"v-list-item__prepend"},[a.prepend?l(Rn,{key:"prepend-defaults",disabled:!ae,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon},VListItemAction:{start:!0}}},{default:()=>[a.prepend?.(D.value)]}):p(ze,null,[e.prependAvatar&&l(Yi,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&l(ya,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)]),p("div",{class:"v-list-item__spacer"},null)]),p("div",{class:"v-list-item__content","data-no-activator":""},[te&&l(UQ,{key:"title"},{default:()=>[a.title?.({title:e.title})??q(e.title)]}),Y&&l(DQ,{key:"subtitle"},{default:()=>[a.subtitle?.({subtitle:e.subtitle})??q(e.subtitle)]}),a.default?.(D.value)]),X&&p("div",{key:"append",class:"v-list-item__append"},[a.append?l(Rn,{key:"append-defaults",disabled:!K,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon},VListItemAction:{end:!0}}},{default:()=>[a.append?.(D.value)]}):p(ze,null,[e.appendIcon&&l(ya,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&l(Yi,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)]),p("div",{class:"v-list-item__spacer"},null)])]}),[[wo,k.value&&G.value]])}),{activate:i,isActivated:c,isGroupActivator:h,isSelected:f,list:b,select:A,root:v,id:w,link:s}}}),GWe=ot({color:String,inset:Boolean,sticky:Boolean,title:String,...en(),...Un()},"VListSubheader"),vv=yt()({name:"VListSubheader",props:GWe(),setup(e,t){let{slots:n}=t;const{textColorClasses:a,textColorStyles:r}=Fs(()=>e.color);return St(()=>{const s=!!(n.default||e.title);return l(e.tag,{class:ct(["v-list-subheader",{"v-list-subheader--inset":e.inset,"v-list-subheader--sticky":e.sticky},a.value,e.class]),style:Rt([{textColorStyles:r},e.style])},{default:()=>[s&&p("div",{class:"v-list-subheader__text"},[n.default?.()??e.title])]})}),{}}}),zWe=ot({items:Array,returnObject:Boolean},"VListChildren"),NQ=yt()({name:"VListChildren",props:zWe(),setup(e,t){let{slots:n}=t;return CQ(),()=>n.default?.()??e.items?.map(a=>{let{children:r,props:s,type:o,raw:i}=a;if(o==="divider")return n.divider?.({props:s})??l(bi,s,null);if(o==="subheader")return n.subheader?.({props:s})??l(vv,s,null);const c={subtitle:n.subtitle?d=>n.subtitle?.({...d,item:i}):void 0,prepend:n.prepend?d=>n.prepend?.({...d,item:i}):void 0,append:n.append?d=>n.append?.({...d,item:i}):void 0,title:n.title?d=>n.title?.({...d,item:i}):void 0},A=z0.filterProps(s);return r?l(z0,Fe(A,{value:e.returnObject?i:s?.value,rawId:s?.value}),{activator:d=>{let{props:f}=d;const m=Fe(s,f,{value:e.returnObject?i:s.value});return n.header?n.header({props:m}):l(Hl,m,c)},default:()=>l(NQ,{items:r,returnObject:e.returnObject},n)}):n.item?n.item({props:s}):l(Hl,Fe(s,{value:e.returnObject?i:s.value}),c)})}}),VQ=ot({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},itemType:{type:[Boolean,String,Array,Function],default:"type"},returnObject:Boolean,valueComparator:Function},"list-items"),KWe=new Set(["item","divider","subheader"]);function yl(e,t){const n=Fr(t,e.itemTitle,t),a=Fr(t,e.itemValue,n),r=Fr(t,e.itemChildren),s=e.itemProps===!0?typeof t=="object"&&t!=null&&!Array.isArray(t)?"children"in t?Fa(t,["children"]):t:void 0:Fr(t,e.itemProps);let o=Fr(t,e.itemType,"item");KWe.has(o)||(o="item");const i={title:n,value:a,...s};return{type:o,title:String(i.title??""),value:i.value,props:i,children:o==="item"&&Array.isArray(r)?LQ(e,r):void 0,raw:t}}yl.neededProps=["itemTitle","itemValue","itemChildren","itemProps","itemType"];function LQ(e,t){const n=Pc(e,yl.neededProps),a=[];for(const r of t)a.push(yl(n,r));return a}function A4(e){const t=ee(()=>LQ(e,e.items)),n=ee(()=>t.value.some(i=>i.value===null)),a=Ht(new Map),r=Ht([]);Ar(()=>{const i=t.value,c=new Map,A=[];for(let d=0;d<i.length;d++){const f=i[d];if(CS(f.value)||f.value===null){let m=c.get(f.value);m||(m=[],c.set(f.value,m)),m.push(f)}else A.push(f)}a.value=c,r.value=A});function s(i){const c=a.value,A=t.value,d=r.value,f=n.value,m=e.returnObject,h=!!e.valueComparator,v=e.valueComparator||ms,y=Pc(e,yl.neededProps),g=[];e:for(const w of i){if(!f&&w===null)continue;if(m&&typeof w=="string"){g.push(yl(y,w));continue}const b=c.get(w);if(h||!b){for(const x of h?A:d)if(v(w,x.value)){g.push(x);continue e}g.push(yl(y,w));continue}g.push(...b)}return g}function o(i){return e.returnObject?i.map(c=>{let{raw:A}=c;return A}):i.map(c=>{let{value:A}=c;return A})}return{items:t,transformIn:s,transformOut:o}}const WWe=new Set(["item","divider","subheader"]);function jWe(e,t){const n=CS(t)?t:Fr(t,e.itemTitle),a=CS(t)?t:Fr(t,e.itemValue,void 0),r=Fr(t,e.itemChildren),s=e.itemProps===!0?Fa(t,["children"]):Fr(t,e.itemProps);let o=Fr(t,e.itemType,"item");WWe.has(o)||(o="item");const i={title:n,value:a,...s};return{type:o,title:i.title,value:i.value,props:i,children:o==="item"&&r?MQ(e,r):void 0,raw:t}}function MQ(e,t){const n=[];for(const a of t)n.push(jWe(e,a));return n}function OQ(e){return{items:ee(()=>MQ(e,e.items))}}const HQ=ot({baseColor:String,activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,filterable:Boolean,expandIcon:un,collapseIcon:un,lines:{type:[Boolean,String],default:"one"},slim:Boolean,nav:Boolean,"onClick:open":Ts(),"onClick:select":Ts(),"onUpdate:opened":Ts(),...MWe({selectStrategy:"single-leaf",openStrategy:"list"}),...$o(),...en(),...rs(),...Ur(),...Wr(),...VQ(),...tr(),...Un(),...aa(),...tl({variant:"text"})},"VList"),Nh=yt()({name:"VList",props:HQ(),emits:{"update:selected":e=>!0,"update:activated":e=>!0,"update:opened":e=>!0,"click:open":e=>!0,"click:activate":e=>!0,"click:select":e=>!0},setup(e,t){let{slots:n}=t;const{items:a}=OQ(e),{themeClasses:r}=wa(e),{backgroundColorClasses:s,backgroundColorStyles:o}=Ca(()=>e.bgColor),{borderClasses:i}=oi(e),{densityClasses:c}=xo(e),{dimensionStyles:A}=Rr(e),{elevationClasses:d}=ps(e),{roundedClasses:f}=hr(e),{children:m,open:h,parents:v,select:y,getPath:g}=OWe(e),w=qe(()=>e.lines?`v-list--${e.lines}-line`:void 0),b=qe(()=>e.activeColor),x=qe(()=>e.baseColor),T=qe(()=>e.color);CQ({filterable:e.filterable}),fr({VListGroup:{activeColor:b,baseColor:x,color:T,expandIcon:qe(()=>e.expandIcon),collapseIcon:qe(()=>e.collapseIcon)},VListItem:{activeClass:qe(()=>e.activeClass),activeColor:b,baseColor:x,color:T,density:qe(()=>e.density),disabled:qe(()=>e.disabled),lines:qe(()=>e.lines),nav:qe(()=>e.nav),slim:qe(()=>e.slim),variant:qe(()=>e.variant)}});const U=Ht(!1),k=M();function S(L){U.value=!0}function E(L){U.value=!1}function C(L){!U.value&&!(L.relatedTarget&&k.value?.contains(L.relatedTarget))&&N()}function P(L){const ie=L.target;if(!(!k.value||ie.tagName==="INPUT"&&["Home","End"].includes(L.key)||ie.tagName==="TEXTAREA")){if(L.key==="ArrowDown")N("next");else if(L.key==="ArrowUp")N("prev");else if(L.key==="Home")N("first");else if(L.key==="End")N("last");else return;L.preventDefault()}}function F(L){U.value=!0}function N(L){if(k.value)return KA(k.value,L)}return St(()=>l(e.tag,{ref:k,class:ct(["v-list",{"v-list--disabled":e.disabled,"v-list--nav":e.nav,"v-list--slim":e.slim},r.value,s.value,i.value,c.value,d.value,w.value,f.value,e.class]),style:Rt([o.value,A.value,e.style]),tabindex:e.disabled?-1:0,role:"listbox","aria-activedescendant":void 0,onFocusin:S,onFocusout:E,onFocus:C,onKeydown:P,onMousedown:F},{default:()=>[l(NQ,{items:a.value,returnObject:e.returnObject},n)]})),{open:h,select:y,focus:N,children:m,parents:v,getPath:g}}}),qWe=Dc("v-list-img"),YWe=ot({start:Boolean,end:Boolean,...en(),...Un()},"VListItemAction"),$Q=yt()({name:"VListItemAction",props:YWe(),setup(e,t){let{slots:n}=t;return St(()=>l(e.tag,{class:ct(["v-list-item-action",{"v-list-item-action--start":e.start,"v-list-item-action--end":e.end},e.class]),style:Rt(e.style)},n)),{}}}),XWe=ot({start:Boolean,end:Boolean,...en(),...Un()},"VListItemMedia"),JWe=yt()({name:"VListItemMedia",props:XWe(),setup(e,t){let{slots:n}=t;return St(()=>l(e.tag,{class:ct(["v-list-item-media",{"v-list-item-media--start":e.start,"v-list-item-media--end":e.end},e.class]),style:Rt(e.style)},n)),{}}});function WC(e,t){return{x:e.x+t.x,y:e.y+t.y}}function ZWe(e,t){return{x:e.x-t.x,y:e.y-t.y}}function TN(e,t){if(e.side==="top"||e.side==="bottom"){const{side:n,align:a}=e,r=a==="left"?0:a==="center"?t.width/2:a==="right"?t.width:a,s=n==="top"?0:n==="bottom"?t.height:n;return WC({x:r,y:s},t)}else if(e.side==="left"||e.side==="right"){const{side:n,align:a}=e,r=n==="left"?0:n==="right"?t.width:n,s=a==="top"?0:a==="center"?t.height/2:a==="bottom"?t.height:a;return WC({x:r,y:s},t)}return WC({x:t.width/2,y:t.height/2},t)}const QQ={static:nje,connected:rje},eje=ot({locationStrategy:{type:[String,Function],default:"static",validator:e=>typeof e=="function"||e in QQ},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array]},"VOverlay-location-strategies");function tje(e,t){const n=M({}),a=M();_a&&vo(()=>!!(t.isActive.value&&e.locationStrategy),i=>{We(()=>e.locationStrategy,i),as(()=>{window.removeEventListener("resize",r),visualViewport?.removeEventListener("resize",s),visualViewport?.removeEventListener("scroll",o),a.value=void 0}),window.addEventListener("resize",r,{passive:!0}),visualViewport?.addEventListener("resize",s,{passive:!0}),visualViewport?.addEventListener("scroll",o,{passive:!0}),typeof e.locationStrategy=="function"?a.value=e.locationStrategy(t,e,n)?.updateLocation:a.value=QQ[e.locationStrategy](t,e,n)?.updateLocation});function r(i){a.value?.(i)}function s(i){a.value?.(i)}function o(i){a.value?.(i)}return{contentStyles:n,updateLocation:a}}function nje(){}function aje(e,t){const n=Ak(e);return t?n.x+=parseFloat(e.style.right||0):n.x-=parseFloat(e.style.left||0),n.y-=parseFloat(e.style.top||0),n}function rje(e,t,n){(Array.isArray(e.target.value)||Qte(e.target.value))&&Object.assign(n.value,{position:"fixed",top:0,[e.isRtl.value?"right":"left"]:0});const{preferredAnchor:r,preferredOrigin:s}=dk(()=>{const w=SS(t.location,e.isRtl.value),b=t.origin==="overlap"?w:t.origin==="auto"?Ix(w):SS(t.origin,e.isRtl.value);return w.side===b.side&&w.align===Fx(b).align?{preferredAnchor:YP(w),preferredOrigin:YP(b)}:{preferredAnchor:w,preferredOrigin:b}}),[o,i,c,A]=["minWidth","minHeight","maxWidth","maxHeight"].map(w=>ee(()=>{const b=parseFloat(t[w]);return isNaN(b)?1/0:b})),d=ee(()=>{if(Array.isArray(t.offset))return t.offset;if(typeof t.offset=="string"){const w=t.offset.split(" ").map(parseFloat);return w.length<2&&w.push(0),w}return typeof t.offset=="number"?[t.offset,0]:[0,0]});let f=!1,m=-1;const h=new D8(4),v=new ResizeObserver(()=>{if(!f)return;if(requestAnimationFrame(b=>{b!==m&&h.clear(),requestAnimationFrame(x=>{m=x})}),h.isFull){const b=h.values();if(ms(b.at(-1),b.at(-3))&&!ms(b.at(-1),b.at(-2)))return}const w=g();w&&h.push(w.flipped)});let y=new _u({x:0,y:0,width:0,height:0});We(e.target,(w,b)=>{b&&!Array.isArray(b)&&v.unobserve(b),Array.isArray(w)?ms(w,b)||g():w&&v.observe(w)},{immediate:!0}),We(e.contentEl,(w,b)=>{b&&v.unobserve(b),w&&v.observe(w)},{immediate:!0}),as(()=>{v.disconnect()});function g(){if(f=!1,requestAnimationFrame(()=>f=!0),!e.target.value||!e.contentEl.value)return;(Array.isArray(e.target.value)||e.target.value.offsetParent||e.target.value.getClientRects().length)&&(y=L8(e.target.value));const w=aje(e.contentEl.value,e.isRtl.value),b=E_(e.contentEl.value),x=12;b.length||(b.push(document.documentElement),e.contentEl.value.style.top&&e.contentEl.value.style.left||(w.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),w.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const T=b.reduce((L,ie)=>{const le=cte(ie);return L?new _u({x:Math.max(L.left,le.left),y:Math.max(L.top,le.top),width:Math.min(L.right,le.right)-Math.max(L.left,le.left),height:Math.min(L.bottom,le.bottom)-Math.max(L.top,le.top)}):le},void 0);T.x+=x,T.y+=x,T.width-=x*2,T.height-=x*2;let U={anchor:r.value,origin:s.value};function k(L){const ie=new _u(w),le=TN(L.anchor,y),Q=TN(L.origin,ie);let{x:Z,y:ce}=ZWe(le,Q);switch(L.anchor.side){case"top":ce-=d.value[0];break;case"bottom":ce+=d.value[0];break;case"left":Z-=d.value[0];break;case"right":Z+=d.value[0];break}switch(L.anchor.align){case"top":ce-=d.value[1];break;case"bottom":ce+=d.value[1];break;case"left":Z-=d.value[1];break;case"right":Z+=d.value[1];break}return ie.x+=Z,ie.y+=ce,ie.width=Math.min(ie.width,c.value),ie.height=Math.min(ie.height,A.value),{overflows:JP(ie,T),x:Z,y:ce}}let S=0,E=0;const C={x:0,y:0},P={x:!1,y:!1};let F=-1;for(;!(F++>10);){const{x:L,y:ie,overflows:le}=k(U);S+=L,E+=ie,w.x+=L,w.y+=ie;{const Q=XP(U.anchor),Z=le.x.before||le.x.after,ce=le.y.before||le.y.after;let J=!1;if(["x","y"].forEach(se=>{if(se==="x"&&Z&&!P.x||se==="y"&&ce&&!P.y){const G={anchor:{...U.anchor},origin:{...U.origin}},D=se==="x"?Q==="y"?Fx:Ix:Q==="y"?Ix:Fx;G.anchor=D(G.anchor),G.origin=D(G.origin);const{overflows:j}=k(G);(j[se].before<=le[se].before&&j[se].after<=le[se].after||j[se].before+j[se].after<(le[se].before+le[se].after)/2)&&(U=G,J=P[se]=!0)}}),J)continue}le.x.before&&(S+=le.x.before,w.x+=le.x.before),le.x.after&&(S-=le.x.after,w.x-=le.x.after),le.y.before&&(E+=le.y.before,w.y+=le.y.before),le.y.after&&(E-=le.y.after,w.y-=le.y.after);{const Q=JP(w,T);C.x=T.width-Q.x.before-Q.x.after,C.y=T.height-Q.y.before-Q.y.after,S+=Q.x.before,w.x+=Q.x.before,E+=Q.y.before,w.y+=Q.y.before}break}const N=XP(U.anchor);return Object.assign(n.value,{"--v-overlay-anchor-origin":`${U.anchor.side} ${U.anchor.align}`,transformOrigin:`${U.origin.side} ${U.origin.align}`,top:jt(jC(E)),left:e.isRtl.value?void 0:jt(jC(S)),right:e.isRtl.value?jt(jC(-S)):void 0,minWidth:jt(N==="y"?Math.min(o.value,y.width):o.value),maxWidth:jt(IN(Qa(C.x,o.value===1/0?0:o.value,c.value))),maxHeight:jt(IN(Qa(C.y,i.value===1/0?0:i.value,A.value)))}),{available:C,contentBox:w,flipped:P}}return We(()=>[r.value,s.value,t.offset,t.minWidth,t.minHeight,t.maxWidth,t.maxHeight],()=>g()),bn(()=>{const w=g();if(!w)return;const{available:b,contentBox:x}=w;x.height>b.y&&requestAnimationFrame(()=>{g(),requestAnimationFrame(()=>{g()})})}),{updateLocation:g}}function jC(e){return Math.round(e*devicePixelRatio)/devicePixelRatio}function IN(e){return Math.ceil(e*devicePixelRatio)/devicePixelRatio}let nB=!0;const C2=[];function sje(e){!nB||C2.length?(C2.push(e),aB()):(nB=!1,e(),aB())}let FN=-1;function aB(){cancelAnimationFrame(FN),FN=requestAnimationFrame(()=>{const e=C2.shift();e&&e(),C2.length?aB():nB=!0})}const GQ={none:null,close:lje,block:uje,reposition:cje},oje=ot({scrollStrategy:{type:[String,Function],default:"block",validator:e=>typeof e=="function"||e in GQ}},"VOverlay-scroll-strategies");function ije(e,t){if(!_a)return;let n;Ar(async()=>{n?.stop(),t.isActive.value&&e.scrollStrategy&&(n=Ed(),await new Promise(a=>setTimeout(a)),n.active&&n.run(()=>{typeof e.scrollStrategy=="function"?e.scrollStrategy(t,e,n):GQ[e.scrollStrategy]?.(t,e,n)}))}),as(()=>{n?.stop()})}function lje(e){function t(n){e.isActive.value=!1}zQ(f4(e.target.value,e.contentEl.value),t)}function uje(e,t){const n=e.root.value?.offsetParent,a=f4(e.target.value,e.contentEl.value),r=[...new Set([...E_(a,t.contained?n:void 0),...E_(e.contentEl.value,t.contained?n:void 0)])].filter(i=>!i.classList.contains("v-overlay-scroll-blocked")),s=window.innerWidth-document.documentElement.offsetWidth,o=(i=>pk(i)&&i)(n||document.documentElement);o&&e.root.value.classList.add("v-overlay--scroll-blocked"),r.forEach((i,c)=>{i.style.setProperty("--v-body-scroll-x",jt(-i.scrollLeft)),i.style.setProperty("--v-body-scroll-y",jt(-i.scrollTop)),i!==document.documentElement&&i.style.setProperty("--v-scrollbar-offset",jt(s)),i.classList.add("v-overlay-scroll-blocked")}),as(()=>{r.forEach((i,c)=>{const A=parseFloat(i.style.getPropertyValue("--v-body-scroll-x")),d=parseFloat(i.style.getPropertyValue("--v-body-scroll-y")),f=i.style.scrollBehavior;i.style.scrollBehavior="auto",i.style.removeProperty("--v-body-scroll-x"),i.style.removeProperty("--v-body-scroll-y"),i.style.removeProperty("--v-scrollbar-offset"),i.classList.remove("v-overlay-scroll-blocked"),i.scrollLeft=-A,i.scrollTop=-d,i.style.scrollBehavior=f}),o&&e.root.value.classList.remove("v-overlay--scroll-blocked")})}function cje(e,t,n){let a=!1,r=-1,s=-1;function o(i){sje(()=>{const c=performance.now();e.updateLocation.value?.(i),a=(performance.now()-c)/(1e3/60)>2})}s=(typeof requestIdleCallback>"u"?i=>i():requestIdleCallback)(()=>{n.run(()=>{zQ(f4(e.target.value,e.contentEl.value),i=>{a?(cancelAnimationFrame(r),r=requestAnimationFrame(()=>{r=requestAnimationFrame(()=>{o(i)})})):o(i)})})}),as(()=>{typeof cancelIdleCallback<"u"&&cancelIdleCallback(s),cancelAnimationFrame(r)})}function f4(e,t){return Array.isArray(e)?document.elementsFromPoint(...e).find(n=>!t?.contains(n)):e??t}function zQ(e,t){const n=[document,...E_(e)];n.forEach(a=>{a.addEventListener("scroll",t,{passive:!0})}),as(()=>{n.forEach(a=>{a.removeEventListener("scroll",t)})})}const rB=Symbol.for("vuetify:v-menu"),m4=ot({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function h4(e,t){let n=()=>{};function a(o){n?.();const i=Number(o?e.openDelay:e.closeDelay);return new Promise(c=>{n=rte(i,()=>{t?.(o),c(o)})})}function r(){return a(!0)}function s(){return a(!1)}return{clearDelay:n,runOpenDelay:r,runCloseDelay:s}}const dje=ot({target:[String,Object],activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...m4()},"VOverlay-activator");function Aje(e,t){let{isActive:n,isTop:a,contentEl:r}=t;const s=Er("useActivator"),o=M();let i=!1,c=!1,A=!0;const d=ee(()=>e.openOnFocus||e.openOnFocus==null&&e.openOnHover),f=ee(()=>e.openOnClick||e.openOnClick==null&&!e.openOnHover&&!d.value),{runOpenDelay:m,runCloseDelay:h}=h4(e,E=>{E===(e.openOnHover&&i||d.value&&c)&&!(e.openOnHover&&n.value&&!a.value)&&(n.value!==E&&(A=!0),n.value=E)}),v=M(),y={onClick:E=>{E.stopPropagation(),o.value=E.currentTarget||E.target,n.value||(v.value=[E.clientX,E.clientY]),n.value=!n.value},onMouseenter:E=>{E.sourceCapabilities?.firesTouchEvents||(i=!0,o.value=E.currentTarget||E.target,m())},onMouseleave:E=>{i=!1,h()},onFocus:E=>{gh(E.target,":focus-visible")!==!1&&(c=!0,E.stopPropagation(),o.value=E.currentTarget||E.target,m())},onBlur:E=>{c=!1,E.stopPropagation(),h()}},g=ee(()=>{const E={};return f.value&&(E.onClick=y.onClick),e.openOnHover&&(E.onMouseenter=y.onMouseenter,E.onMouseleave=y.onMouseleave),d.value&&(E.onFocus=y.onFocus,E.onBlur=y.onBlur),E}),w=ee(()=>{const E={};if(e.openOnHover&&(E.onMouseenter=()=>{i=!0,m()},E.onMouseleave=()=>{i=!1,h()}),d.value&&(E.onFocusin=()=>{c=!0,m()},E.onFocusout=()=>{c=!1,h()}),e.closeOnContentClick){const C=Sn(rB,null);E.onClick=()=>{n.value=!1,C?.closeParents()}}return E}),b=ee(()=>{const E={};return e.openOnHover&&(E.onMouseenter=()=>{A&&(i=!0,A=!1,m())},E.onMouseleave=()=>{i=!1,h()}),E});We(a,E=>{E&&(e.openOnHover&&!i&&(!d.value||!c)||d.value&&!c&&(!e.openOnHover||!i))&&!r.value?.contains(document.activeElement)&&(n.value=!1)}),We(n,E=>{E||setTimeout(()=>{v.value=void 0})},{flush:"post"});const x=x_();Ar(()=>{x.value&&bn(()=>{o.value=x.el})});const T=x_(),U=ee(()=>e.target==="cursor"&&v.value?v.value:T.value?T.el:KQ(e.target,s)||o.value),k=ee(()=>Array.isArray(U.value)?void 0:U.value);let S;return We(()=>!!e.activator,E=>{E&&_a?(S=Ed(),S.run(()=>{fje(e,s,{activatorEl:o,activatorEvents:g})})):S&&S.stop()},{flush:"post",immediate:!0}),as(()=>{S?.stop()}),{activatorEl:o,activatorRef:x,target:U,targetEl:k,targetRef:T,activatorEvents:g,contentEvents:w,scrimEvents:b}}function fje(e,t,n){let{activatorEl:a,activatorEvents:r}=n;We(()=>e.activator,(c,A)=>{if(A&&c!==A){const d=i(A);d&&o(d)}c&&bn(()=>s())},{immediate:!0}),We(()=>e.activatorProps,()=>{s()}),as(()=>{o()});function s(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:i(),A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;c&&dte(c,Fe(r.value,A))}function o(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:i(),A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;c&&Ate(c,Fe(r.value,A))}function i(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.activator;const A=KQ(c,t);return a.value=A?.nodeType===Node.ELEMENT_NODE?A:void 0,a.value}}function KQ(e,t){if(!e)return;let n;if(e==="parent"){let a=t?.proxy?.$el?.parentNode;for(;a?.hasAttribute("data-no-activator");)a=a.parentNode;n=a}else typeof e=="string"?n=document.querySelector(e):"$el"in e?n=e.$el:n=e;return n}function WQ(){if(!_a)return Ht(!1);const{ssr:e}=Ji();if(e){const t=Ht(!1);return cn(()=>{t.value=!0}),t}else return Ht(!0)}const v4=ot({eager:Boolean},"lazy");function p4(e,t){const n=Ht(!1),a=qe(()=>n.value||e.eager||t.value);We(t,()=>n.value=!0);function r(){e.eager||(n.value=!1)}return{isBooted:n,hasContent:a,onAfterLeave:r}}function Gf(){const t=Er("useScopeId").vnode.scopeId;return{scopeId:t?{[t]:""}:void 0}}const PN=Symbol.for("vuetify:stack"),op=es([]);function mje(e,t,n){const a=Er("useStack"),r=!n,s=Sn(PN,void 0),o=es({activeChildren:new Set});Ia(PN,o);const i=Ht(Number(xu(t)));vo(e,()=>{const d=op.at(-1)?.[1];i.value=d?d+10:Number(xu(t)),r&&op.push([a.uid,i.value]),s?.activeChildren.add(a.uid),as(()=>{if(r){const f=gn(op).findIndex(m=>m[0]===a.uid);op.splice(f,1)}s?.activeChildren.delete(a.uid)})});const c=Ht(!0);r&&Ar(()=>{const d=op.at(-1)?.[0]===a.uid;setTimeout(()=>c.value=d)});const A=qe(()=>!o.activeChildren.size);return{globalTop:$h(c),localTop:A,stackStyles:qe(()=>({zIndex:i.value}))}}function hje(e){return{teleportTarget:ee(()=>{const n=e();if(n===!0||!_a)return;const a=n===!1?document.body:typeof n=="string"?document.querySelector(n):n;if(a==null)return;let r=[...a.children].find(s=>s.matches(".v-overlay-container"));return r||(r=document.createElement("div"),r.className="v-overlay-container",a.appendChild(r)),r})}}function vje(){return!0}function jQ(e,t,n){if(!e||qQ(e,n)===!1)return!1;const a=q8(t);if(typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&a.host===e.target)return!1;const r=(typeof n.value=="object"&&n.value.include||(()=>[]))();return r.push(t),!r.some(s=>s?.contains(e.target))}function qQ(e,t){return(typeof t.value=="object"&&t.value.closeConditional||vje)(e)}function pje(e,t,n){const a=typeof n.value=="function"?n.value:n.value.handler;e.shadowTarget=e.target,t._clickOutside.lastMousedownWasOutside&&jQ(e,t,n)&&setTimeout(()=>{qQ(e,n)&&a&&a(e)},0)}function DN(e,t){const n=q8(e);t(document),typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&t(n)}const sB={mounted(e,t){const n=r=>pje(r,e,t),a=r=>{e._clickOutside.lastMousedownWasOutside=jQ(r,e,t)};DN(e,r=>{r.addEventListener("click",n,!0),r.addEventListener("mousedown",a,!0)}),e._clickOutside||(e._clickOutside={lastMousedownWasOutside:!1}),e._clickOutside[t.instance.$.uid]={onClick:n,onMousedown:a}},beforeUnmount(e,t){e._clickOutside&&(DN(e,n=>{if(!n||!e._clickOutside?.[t.instance.$.uid])return;const{onClick:a,onMousedown:r}=e._clickOutside[t.instance.$.uid];n.removeEventListener("click",a,!0),n.removeEventListener("mousedown",r,!0)}),delete e._clickOutside[t.instance.$.uid])}};function gje(e){const{modelValue:t,color:n,...a}=e;return l(Id,{name:"fade-transition",appear:!0},{default:()=>[e.modelValue&&p("div",Fe({class:["v-overlay__scrim",e.color.backgroundColorClasses.value],style:e.color.backgroundColorStyles.value},a),null)]})}const Dg=ot({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,opacity:[Number,String],noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...dje(),...en(),...Ur(),...v4(),...eje(),...oje(),...aa(),...Jl()},"VOverlay"),Iu=yt()({name:"VOverlay",directives:{vClickOutside:sB},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...Dg()},emits:{"click:outside":e=>!0,"update:modelValue":e=>!0,keydown:e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,t){let{slots:n,attrs:a,emit:r}=t;const s=Er("VOverlay"),o=M(),i=M(),c=M(),A=on(e,"modelValue"),d=ee({get:()=>A.value,set:Y=>{Y&&e.disabled||(A.value=Y)}}),{themeClasses:f}=wa(e),{rtlClasses:m,isRtl:h}=Kr(),{hasContent:v,onAfterLeave:y}=p4(e,d),g=Ca(()=>typeof e.scrim=="string"?e.scrim:null),{globalTop:w,localTop:b,stackStyles:x}=mje(d,()=>e.zIndex,e._disableGlobalStack),{activatorEl:T,activatorRef:U,target:k,targetEl:S,targetRef:E,activatorEvents:C,contentEvents:P,scrimEvents:F}=Aje(e,{isActive:d,isTop:b,contentEl:c}),{teleportTarget:N}=hje(()=>{const Y=e.attach||e.contained;if(Y)return Y;const K=T?.value?.getRootNode()||s.proxy?.$el?.getRootNode();return K instanceof ShadowRoot?K:!1}),{dimensionStyles:L}=Rr(e),ie=WQ(),{scopeId:le}=Gf();We(()=>e.disabled,Y=>{Y&&(d.value=!1)});const{contentStyles:Q,updateLocation:Z}=tje(e,{isRtl:h,contentEl:c,target:k,isActive:d});ije(e,{root:o,contentEl:c,targetEl:S,target:k,isActive:d,updateLocation:Z});function ce(Y){r("click:outside",Y),e.persistent?ne():d.value=!1}function J(Y){return d.value&&w.value&&(!e.scrim||Y.target===i.value||Y instanceof MouseEvent&&Y.shadowTarget===i.value)}_a&&We(d,Y=>{Y?window.addEventListener("keydown",se):window.removeEventListener("keydown",se)},{immediate:!0}),la(()=>{_a&&window.removeEventListener("keydown",se)});function se(Y){Y.key==="Escape"&&w.value&&(c.value?.contains(document.activeElement)||r("keydown",Y),e.persistent?ne():(d.value=!1,c.value?.contains(document.activeElement)&&T.value?.focus()))}function G(Y){Y.key==="Escape"&&!w.value||r("keydown",Y)}const D=aQ();vo(()=>e.closeOnBack,()=>{ZKe(D,Y=>{w.value&&d.value?(Y(!1),e.persistent?ne():d.value=!1):Y()})});const j=M();We(()=>d.value&&(e.absolute||e.contained)&&N.value==null,Y=>{if(Y){const K=vk(o.value);K&&K!==document.scrollingElement&&(j.value=K.scrollTop)}});function ne(){e.noClickAnimation||c.value&&RA(c.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:h0})}function H(){r("afterEnter")}function te(){y(),r("afterLeave")}return St(()=>p(ze,null,[n.activator?.({isActive:d.value,targetRef:E,props:Fe({ref:U},C.value,e.activatorProps)}),ie.value&&v.value&&l(fZ,{disabled:!N.value,to:N.value},{default:()=>[p("div",Fe({class:["v-overlay",{"v-overlay--absolute":e.absolute||e.contained,"v-overlay--active":d.value,"v-overlay--contained":e.contained},f.value,m.value,e.class],style:[x.value,{"--v-overlay-opacity":e.opacity,top:jt(j.value)},e.style],ref:o,onKeydown:G},le,a),[l(gje,Fe({color:g,modelValue:d.value&&!!e.scrim,ref:i},F.value),null),l(mo,{appear:!0,persisted:!0,transition:e.transition,target:k.value,onAfterEnter:H,onAfterLeave:te},{default:()=>[Aa(p("div",Fe({ref:c,class:["v-overlay__content",e.contentClass],style:[L.value,Q.value]},P.value,e.contentProps),[n.default?.({isActive:d})]),[[ai,d.value],[sB,{handler:ce,closeConditional:J,include:()=>[T.value]}]])]})])]})])),{activatorEl:T,scrimEl:i,target:k,animateClick:ne,contentEl:c,globalTop:w,localTop:b,updateLocation:Z}}}),YQ=ot({id:String,submenu:Boolean,disableInitialFocus:Boolean,...Fa(Dg({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:Kw}}),["absolute"])},"VMenu"),Vh=yt()({name:"VMenu",props:YQ(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=on(e,"modelValue"),{scopeId:r}=Gf(),{isRtl:s}=Kr(),o=Ho(),i=qe(()=>e.id||`v-menu-${o}`),c=M(),A=Sn(rB,null),d=Ht(new Set);Ia(rB,{register(){d.value.add(o)},unregister(){d.value.delete(o)},closeParents(g){setTimeout(()=>{!d.value.size&&!e.persistent&&(g==null||c.value?.contentEl&&!ste(g,c.value.contentEl))&&(a.value=!1,A?.closeParents())},40)}}),la(()=>{A?.unregister(),document.removeEventListener("focusin",f)}),q2(()=>a.value=!1);async function f(g){const w=g.relatedTarget,b=g.target;await bn(),a.value&&w!==b&&c.value?.contentEl&&c.value?.globalTop&&![document,c.value.contentEl].includes(b)&&!c.value.contentEl.contains(b)&&m0(c.value.contentEl)[0]?.focus()}We(a,g=>{g?(A?.register(),_a&&!e.disableInitialFocus&&document.addEventListener("focusin",f,{once:!0})):(A?.unregister(),_a&&document.removeEventListener("focusin",f))},{immediate:!0});function m(g){A?.closeParents(g)}function h(g){if(!e.disabled)if(g.key==="Tab"||g.key==="Enter"&&!e.closeOnContentClick){if(g.key==="Enter"&&(g.target instanceof HTMLTextAreaElement||g.target instanceof HTMLInputElement&&g.target.closest("form")))return;g.key==="Enter"&&g.preventDefault(),R8(m0(c.value?.contentEl,!1),g.shiftKey?"prev":"next",b=>b.tabIndex>=0)||(a.value=!1,c.value?.activatorEl?.focus())}else e.submenu&&g.key===(s.value?"ArrowRight":"ArrowLeft")&&(a.value=!1,c.value?.activatorEl?.focus())}function v(g){if(e.disabled)return;const w=c.value?.contentEl;w&&a.value?g.key==="ArrowDown"?(g.preventDefault(),g.stopImmediatePropagation(),KA(w,"next")):g.key==="ArrowUp"?(g.preventDefault(),g.stopImmediatePropagation(),KA(w,"prev")):e.submenu&&(g.key===(s.value?"ArrowRight":"ArrowLeft")?a.value=!1:g.key===(s.value?"ArrowLeft":"ArrowRight")&&(g.preventDefault(),KA(w,"first"))):(e.submenu?g.key===(s.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(g.key))&&(a.value=!0,g.preventDefault(),setTimeout(()=>setTimeout(()=>v(g))))}const y=ee(()=>Fe({"aria-haspopup":"menu","aria-expanded":String(a.value),"aria-controls":i.value,onKeydown:v},e.activatorProps));return St(()=>{const g=Iu.filterProps(e);return l(Iu,Fe({ref:c,id:i.value,class:["v-menu",e.class],style:e.style},g,{modelValue:a.value,"onUpdate:modelValue":w=>a.value=w,absolute:!0,activatorProps:y.value,location:e.location??(e.submenu?"end":"bottom"),"onClick:outside":m,onKeydown:h},r),{activator:n.activator,default:function(){for(var w=arguments.length,b=new Array(w),x=0;x<w;x++)b[x]=arguments[x];return l(Rn,{root:"VMenu"},{default:()=>[n.default?.(...b)]})}})}),gs({id:i,openChildren:d},c)}}),yje=ot({active:Boolean,disabled:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...en(),...Jl({transition:{component:r4}})},"VCounter"),Jw=yt()({name:"VCounter",functional:!0,props:yje(),setup(e,t){let{slots:n}=t;const a=qe(()=>e.max?`${e.value} / ${e.max}`:String(e.value));return St(()=>l(mo,{transition:e.transition},{default:()=>[Aa(p("div",{class:ct(["v-counter",{"text-error":e.max&&!e.disabled&&parseFloat(e.value)>parseFloat(e.max)},e.class]),style:Rt(e.style)},[n.default?n.default({counter:a.value,max:e.max,value:e.value}):a.value]),[[ai,e.active]])]})),{}}}),_je=ot({floating:Boolean,...en()},"VFieldLabel"),Ep=yt()({name:"VFieldLabel",props:_je(),setup(e,t){let{slots:n}=t;return St(()=>l(mv,{class:ct(["v-field-label",{"v-field-label--floating":e.floating},e.class]),style:Rt(e.style)},n)),{}}}),wje=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],Ug=ot({appendInnerIcon:un,bgColor:String,clearable:Boolean,clearIcon:{type:un,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,details:Boolean,dirty:Boolean,disabled:{type:Boolean,default:null},glow:Boolean,error:Boolean,flat:Boolean,iconColor:[Boolean,String],label:String,persistentClear:Boolean,prependInnerIcon:un,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:e=>wje.includes(e)},"onClick:clear":Ts(),"onClick:appendInner":Ts(),"onClick:prependInner":Ts(),...en(),...qw(),...tr(),...aa()},"VField"),Gd=yt()({name:"VField",inheritAttrs:!1,props:{id:String,...Fg(),...Ug()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:r}=t;const{themeClasses:s}=wa(e),{loaderClasses:o}=Bg(e),{focusClasses:i,isFocused:c,focus:A,blur:d}=Vc(e),{InputIcon:f}=hQ(e),{roundedClasses:m}=hr(e),{rtlClasses:h}=Kr(),v=qe(()=>e.dirty||e.active),y=qe(()=>!!(e.label||r.label)),g=qe(()=>!e.singleLine&&y.value),w=Ho(),b=ee(()=>e.id||`input-${w}`),x=qe(()=>e.details?`${b.value}-messages`:void 0),T=M(),U=M(),k=M(),S=ee(()=>["plain","underlined"].includes(e.variant)),E=ee(()=>e.error||e.disabled?void 0:v.value&&c.value?e.color:e.baseColor),C=ee(()=>{if(!(!e.iconColor||e.glow&&!c.value))return e.iconColor===!0?E.value:e.iconColor}),{backgroundColorClasses:P,backgroundColorStyles:F}=Ca(()=>e.bgColor),{textColorClasses:N,textColorStyles:L}=Fs(E);We(v,Q=>{if(g.value){const Z=T.value.$el,ce=U.value.$el;requestAnimationFrame(()=>{const J=Ak(Z),se=ce.getBoundingClientRect(),G=se.x-J.x,D=se.y-J.y-(J.height/2-se.height/2),j=se.width/.75,ne=Math.abs(j-J.width)>1?{maxWidth:jt(j)}:void 0,H=getComputedStyle(Z),te=getComputedStyle(ce),Y=parseFloat(H.transitionDuration)*1e3||150,K=parseFloat(te.getPropertyValue("--v-field-label-scale")),X=te.getPropertyValue("color");Z.style.visibility="visible",ce.style.visibility="hidden",RA(Z,{transform:`translate(${G}px, ${D}px) scale(${K})`,color:X,...ne},{duration:Y,easing:h0,direction:Q?"normal":"reverse"}).finished.then(()=>{Z.style.removeProperty("visibility"),ce.style.removeProperty("visibility")})})}},{flush:"post"});const ie=ee(()=>({isActive:v,isFocused:c,controlRef:k,blur:d,focus:A}));function le(Q){Q.target!==document.activeElement&&Q.preventDefault()}return St(()=>{const Q=e.variant==="outlined",Z=!!(r["prepend-inner"]||e.prependInnerIcon),ce=!!(e.clearable||r.clear)&&!e.disabled,J=!!(r["append-inner"]||e.appendInnerIcon||ce),se=()=>r.label?r.label({...ie.value,label:e.label,props:{for:b.value}}):e.label;return p("div",Fe({class:["v-field",{"v-field--active":v.value,"v-field--appended":J,"v-field--center-affix":e.centerAffix??!S.value,"v-field--disabled":e.disabled,"v-field--dirty":e.dirty,"v-field--error":e.error,"v-field--glow":e.glow,"v-field--flat":e.flat,"v-field--has-background":!!e.bgColor,"v-field--persistent-clear":e.persistentClear,"v-field--prepended":Z,"v-field--reverse":e.reverse,"v-field--single-line":e.singleLine,"v-field--no-label":!se(),[`v-field--variant-${e.variant}`]:!0},s.value,P.value,i.value,o.value,m.value,h.value,e.class],style:[F.value,e.style],onClick:le},n),[p("div",{class:"v-field__overlay"},null),l(kg,{name:"v-field",active:!!e.loading,color:e.error?"error":typeof e.loading=="string"?e.loading:e.color},{default:r.loader}),Z&&p("div",{key:"prepend",class:"v-field__prepend-inner"},[e.prependInnerIcon&&l(f,{key:"prepend-icon",name:"prependInner",color:C.value},null),r["prepend-inner"]?.(ie.value)]),p("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(e.variant)&&g.value&&l(Ep,{key:"floating-label",ref:U,class:ct([N.value]),floating:!0,for:b.value,"aria-hidden":!v.value,style:Rt(L.value)},{default:()=>[se()]}),y.value&&l(Ep,{key:"label",ref:T,for:b.value},{default:()=>[se()]}),r.default?.({...ie.value,props:{id:b.value,class:"v-field__input","aria-describedby":x.value},focus:A,blur:d})??p("div",{id:b.value,class:"v-field__input","aria-describedby":x.value},null)]),ce&&l(s4,{key:"clear"},{default:()=>[Aa(p("div",{class:"v-field__clearable",onMousedown:G=>{G.preventDefault(),G.stopPropagation()}},[l(Rn,{defaults:{VIcon:{icon:e.clearIcon}}},{default:()=>[r.clear?r.clear({...ie.value,props:{onFocus:A,onBlur:d,onClick:e["onClick:clear"],tabindex:-1}}):l(f,{name:"clear",onFocus:A,onBlur:d,tabindex:-1},null)]})]),[[ai,e.dirty]])]}),J&&p("div",{key:"append",class:"v-field__append-inner"},[r["append-inner"]?.(ie.value),e.appendInnerIcon&&l(f,{key:"append-icon",name:"appendInner",color:C.value},null)]),p("div",{class:ct(["v-field__outline",N.value]),style:Rt(L.value)},[Q&&p(ze,null,[p("div",{class:"v-field__outline__start"},null),g.value&&p("div",{class:"v-field__outline__notch"},[l(Ep,{ref:U,floating:!0,for:b.value,"aria-hidden":!v.value},{default:()=>[se()]})]),p("div",{class:"v-field__outline__end"},null)]),S.value&&g.value&&l(Ep,{ref:U,floating:!0,for:b.value,"aria-hidden":!v.value},{default:()=>[se()]})])])}),{controlRef:k,fieldIconColor:C}}});function XQ(e){function t(n,a){!e.autofocus||!n||a[0].target?.focus?.()}return{onIntersect:t}}const bje=["color","file","time","date","datetime-local","week","month"],Rg=ot({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...Lc(),...Ug()},"VTextField"),Ic=yt()({name:"VTextField",directives:{vIntersect:Ol},inheritAttrs:!1,props:Rg(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:r}=t;const s=on(e,"modelValue"),{isFocused:o,focus:i,blur:c}=Vc(e),{onIntersect:A}=XQ(e),d=ee(()=>typeof e.counterValue=="function"?e.counterValue(s.value):typeof e.counterValue=="number"?e.counterValue:(s.value??"").toString().length),f=ee(()=>{if(n.maxlength)return n.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),m=ee(()=>["plain","underlined"].includes(e.variant)),h=M(),v=M(),y=M(),g=ee(()=>bje.includes(e.type)||e.persistentPlaceholder||o.value||e.active);function w(){o.value||i(),bn(()=>{y.value!==document.activeElement&&y.value?.focus()})}function b(k){a("mousedown:control",k),k.target!==y.value&&(w(),k.preventDefault())}function x(k){a("click:control",k)}function T(k,S){k.stopPropagation(),w(),bn(()=>{s.value=null,S(),tw(e["onClick:clear"],k)})}function U(k){const S=k.target;if(s.value=S.value,e.modelModifiers?.trim&&["text","search","password","tel","url"].includes(e.type)){const E=[S.selectionStart,S.selectionEnd];bn(()=>{S.selectionStart=E[0],S.selectionEnd=E[1]})}}return St(()=>{const k=!!(r.counter||e.counter!==!1&&e.counter!=null),S=!!(k||r.details),[E,C]=Wd(n),{modelValue:P,...F}=Ws.filterProps(e),N=Gd.filterProps(e);return l(Ws,Fe({ref:h,modelValue:s.value,"onUpdate:modelValue":L=>s.value=L,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-input--plain-underlined":m.value},e.class],style:e.style},E,F,{centerAffix:!m.value,focused:o.value}),{...r,default:L=>{let{id:ie,isDisabled:le,isDirty:Q,isReadonly:Z,isValid:ce,hasDetails:J,reset:se}=L;return l(Gd,Fe({ref:v,onMousedown:b,onClick:x,"onClick:clear":G=>T(G,se),"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:e.role},Fa(N,["onClick:clear"]),{id:ie.value,active:g.value||Q.value,dirty:Q.value||e.dirty,disabled:le.value,focused:o.value,details:J.value,error:ce.value===!1}),{...r,default:G=>{let{props:{class:D,...j}}=G;const ne=Aa(p("input",Fe({ref:y,value:s.value,onInput:U,autofocus:e.autofocus,readonly:Z.value,disabled:le.value,name:e.name,placeholder:e.placeholder,size:1,role:e.role,type:e.type,onFocus:i,onBlur:c},j,C),null),[[Ol,{handler:A},null,{once:!0}]]);return p(ze,null,[e.prefix&&p("span",{class:"v-text-field__prefix"},[p("span",{class:"v-text-field__prefix__text"},[e.prefix])]),r.default?p("div",{class:ct(D),"data-no-activator":""},[r.default(),ne]):Cu(ne,{class:D}),e.suffix&&p("span",{class:"v-text-field__suffix"},[p("span",{class:"v-text-field__suffix__text"},[e.suffix])])])}})},details:S?L=>p(ze,null,[r.details?.(L),k&&p(ze,null,[p("span",null,null),l(Jw,{active:e.persistentCounter||o.value,value:d.value,max:f.value,disabled:e.disabled},r.counter)])]):void 0})}),gs({},h,v,y)}}),xje=ot({renderless:Boolean,...en()},"VVirtualScrollItem"),JQ=yt()({name:"VVirtualScrollItem",inheritAttrs:!1,props:xje(),emits:{"update:height":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:r}=t;const{resizeRef:s,contentRect:o}=Rl(void 0,"border");We(()=>o.value?.height,i=>{i!=null&&a("update:height",i)}),St(()=>e.renderless?p(ze,null,[r.default?.({itemRef:s})]):p("div",Fe({ref:s,class:["v-virtual-scroll__item",e.class],style:e.style},n),[r.default?.()]))}}),Cje=-1,Sje=1,qC=100,ZQ=ot({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function e7(e,t){const n=Ji(),a=Ht(0);Ar(()=>{a.value=parseFloat(e.itemHeight||0)});const r=Ht(0),s=Ht(Math.ceil((parseInt(e.height)||n.height.value)/(a.value||16))||1),o=Ht(0),i=Ht(0),c=M(),A=M();let d=0;const{resizeRef:f,contentRect:m}=Rl();Ar(()=>{f.value=c.value});const h=ee(()=>c.value===document.documentElement?n.height.value:m.value?.height||parseInt(e.height)||0),v=ee(()=>!!(c.value&&A.value&&h.value&&a.value));let y=Array.from({length:t.value.length}),g=Array.from({length:t.value.length});const w=Ht(0);let b=-1;function x(se){return y[se]||a.value}const T=F8(()=>{const se=performance.now();g[0]=0;const G=t.value.length;for(let D=1;D<=G-1;D++)g[D]=(g[D-1]||0)+x(D-1);w.value=Math.max(w.value,performance.now()-se)},w),U=We(v,se=>{se&&(U(),d=A.value.offsetTop,T.immediate(),Q(),~b&&bn(()=>{_a&&window.requestAnimationFrame(()=>{ce(b),b=-1})}))});as(()=>{T.clear()});function k(se,G){const D=y[se],j=a.value;a.value=j?Math.min(a.value,G):G,(D!==G||j!==a.value)&&(y[se]=G,T())}function S(se){se=Qa(se,0,t.value.length-1);const G=Math.floor(se),D=se%1,j=G+1,ne=g[G]||0,H=g[j]||ne;return ne+(H-ne)*D}function E(se){return Eje(g,se)}let C=0,P=0,F=0;We(h,(se,G)=>{G&&(Q(),se<G&&requestAnimationFrame(()=>{P=0,Q()}))});let N=-1;function L(){if(!c.value||!A.value)return;const se=c.value.scrollTop,G=performance.now();G-F>500?(P=Math.sign(se-C),d=A.value.offsetTop):P=se-C,C=se,F=G,window.clearTimeout(N),N=window.setTimeout(ie,500),Q()}function ie(){!c.value||!A.value||(P=0,F=0,window.clearTimeout(N),Q())}let le=-1;function Q(){cancelAnimationFrame(le),le=requestAnimationFrame(Z)}function Z(){if(!c.value||!h.value||!a.value)return;const se=C-d,G=Math.sign(P),D=Math.max(0,se-qC),j=Qa(E(D),0,t.value.length),ne=se+h.value+qC,H=Qa(E(ne)+1,j+1,t.value.length);if((G!==Cje||j<r.value)&&(G!==Sje||H>s.value)){const te=S(r.value)-S(j),Y=S(H)-S(s.value);Math.max(te,Y)>qC?(r.value=j,s.value=H):(j<=0&&(r.value=j),H>=t.value.length&&(s.value=H))}o.value=S(r.value),i.value=S(t.value.length)-S(s.value)}function ce(se){const G=S(se);!c.value||se&&!G?b=se:c.value.scrollTop=G}const J=ee(()=>t.value.slice(r.value,s.value).map((se,G)=>{const D=G+r.value;return{raw:se,index:D,key:Fr(se,e.itemKey,D)}}));return We(t,()=>{y=Array.from({length:t.value.length}),g=Array.from({length:t.value.length}),T.immediate(),Q()},{deep:1}),{calculateVisibleItems:Q,containerRef:c,markerRef:A,computedItems:J,paddingTop:o,paddingBottom:i,scrollToIndex:ce,handleScroll:L,handleScrollend:ie,handleItemResize:k}}function Eje(e,t){let n=e.length-1,a=0,r=0,s=null,o=-1;if(e[n]<t)return n;for(;a<=n;)if(r=a+n>>1,s=e[r],s>t)n=r-1;else if(s<t)o=r,a=r+1;else return s===t?r:a;return o}const Bje=ot({items:{type:Array,default:()=>[]},renderless:Boolean,...ZQ(),...en(),...Ur()},"VVirtualScroll"),Zw=yt()({name:"VVirtualScroll",props:Bje(),setup(e,t){let{slots:n}=t;const a=Er("VVirtualScroll"),{dimensionStyles:r}=Rr(e),{calculateVisibleItems:s,containerRef:o,markerRef:i,handleScroll:c,handleScrollend:A,handleItemResize:d,scrollToIndex:f,paddingTop:m,paddingBottom:h,computedItems:v}=e7(e,qe(()=>e.items));return vo(()=>e.renderless,()=>{function y(){const w=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";o.value===document.documentElement?(document[w]("scroll",c,{passive:!0}),document[w]("scrollend",A)):(o.value?.[w]("scroll",c,{passive:!0}),o.value?.[w]("scrollend",A))}cn(()=>{o.value=vk(a.vnode.el,!0),y(!0)}),as(y)}),St(()=>{const y=v.value.map(g=>l(JQ,{key:g.key,renderless:e.renderless,"onUpdate:height":w=>d(g.index,w)},{default:w=>n.default?.({item:g.raw,index:g.index,...w})}));return e.renderless?p(ze,null,[p("div",{ref:i,class:"v-virtual-scroll__spacer",style:{paddingTop:jt(m.value)}},null),y,p("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:jt(h.value)}},null)]):p("div",{ref:o,class:ct(["v-virtual-scroll",e.class]),onScrollPassive:c,onScrollend:A,style:Rt([r.value,e.style])},[p("div",{ref:i,class:"v-virtual-scroll__container",style:{paddingTop:jt(m.value),paddingBottom:jt(h.value)}},[y])])}),{calculateVisibleItems:s,scrollToIndex:f}}});function g4(e,t){const n=Ht(!1);let a;function r(i){cancelAnimationFrame(a),n.value=!0,a=requestAnimationFrame(()=>{a=requestAnimationFrame(()=>{n.value=!1})})}async function s(){await new Promise(i=>requestAnimationFrame(i)),await new Promise(i=>requestAnimationFrame(i)),await new Promise(i=>requestAnimationFrame(i)),await new Promise(i=>{if(n.value){const c=We(n,()=>{c(),i()})}else i()})}async function o(i){if(i.key==="Tab"&&t.value?.focus(),!["PageDown","PageUp","Home","End"].includes(i.key))return;const c=e.value?.$el;if(!c)return;(i.key==="Home"||i.key==="End")&&c.scrollTo({top:i.key==="Home"?0:c.scrollHeight,behavior:"smooth"}),await s();const A=c.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(i.key==="PageDown"||i.key==="Home"){const d=c.getBoundingClientRect().top;for(const f of A)if(f.getBoundingClientRect().top>=d){f.focus();break}}else{const d=c.getBoundingClientRect().bottom;for(const f of[...A].reverse())if(f.getBoundingClientRect().bottom<=d){f.focus();break}}}return{onScrollPassive:r,onKeydown:o}}const y4=ot({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:un,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,noAutoScroll:Boolean,...VQ({itemChildren:!1})},"Select"),kje=ot({...y4(),...Fa(Rg({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Jl({transition:{component:Kw}})},"VSelect"),_4=yt()({name:"VSelect",props:kje(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:n}=t;const{t:a}=Pa(),r=M(),s=M(),o=M(),{items:i,transformIn:c,transformOut:A}=A4(e),d=on(e,"modelValue",[],se=>c(se===null?[null]:cr(se)),se=>{const G=A(se);return e.multiple?G:G[0]??null}),f=ee(()=>typeof e.counterValue=="function"?e.counterValue(d.value):typeof e.counterValue=="number"?e.counterValue:d.value.length),m=Pg(e),h=ee(()=>d.value.map(se=>se.value)),v=Ht(!1);let y="",g=-1,w;const b=ee(()=>e.hideSelected?i.value.filter(se=>!d.value.some(G=>(e.valueComparator||ms)(G,se))):i.value),x=ee(()=>e.hideNoData&&!b.value.length||m.isReadonly.value||m.isDisabled.value),T=on(e,"menu"),U=ee({get:()=>T.value,set:se=>{T.value&&!se&&s.value?.openChildren.size||se&&x.value||(T.value=se)}}),k=qe(()=>U.value?e.closeText:e.openText),S=ee(()=>({...e.menuProps,activatorProps:{...e.menuProps?.activatorProps||{},"aria-haspopup":"listbox"}})),E=M(),C=g4(E,r);function P(se){e.openOnClear&&(U.value=!0)}function F(){x.value||(U.value=!U.value)}function N(se){yh(se)&&L(se)}function L(se){if(!se.key||m.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(se.key)&&se.preventDefault(),["Enter","ArrowDown"," "].includes(se.key)&&(U.value=!0),["Escape","Tab"].includes(se.key)&&(U.value=!1),se.key==="Home"?E.value?.focus("first"):se.key==="End"&&E.value?.focus("last");const G=1e3;if(!yh(se))return;const D=performance.now();D-w>G&&(y="",g=-1),y+=se.key.toLowerCase(),w=D;const j=b.value;function ne(){let X=H();return X||y.at(-1)===y.at(-2)&&(y=y.slice(0,-1),X=H(),X)||(g=-1,X=H(),X)?X:(y=se.key.toLowerCase(),H())}function H(){for(let X=g+1;X<j.length;X++){const ae=j[X];if(ae.title.toLowerCase().startsWith(y))return[ae,X]}}const te=ne();if(!te)return;const[Y,K]=te;g=K,E.value?.focus(K),e.multiple||(d.value=[Y])}function ie(se){let G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!se.props.disabled)if(e.multiple){const D=d.value.findIndex(ne=>(e.valueComparator||ms)(ne.value,se.value)),j=G??!~D;if(~D){const ne=j?[...d.value,se]:[...d.value];ne.splice(D,1),d.value=ne}else j&&(d.value=[...d.value,se])}else{const D=G!==!1;d.value=D?[se]:[],bn(()=>{U.value=!1})}}function le(se){E.value?.$el.contains(se.relatedTarget)||(U.value=!1)}function Q(){e.eager&&o.value?.calculateVisibleItems()}function Z(){v.value&&r.value?.focus()}function ce(se){v.value=!0}function J(se){if(se==null)d.value=[];else if(gh(r.value,":autofill")||gh(r.value,":-webkit-autofill")){const G=i.value.find(D=>D.title===se);G&&ie(G)}else r.value&&(r.value.value="")}return We(U,()=>{if(!e.hideSelected&&U.value&&d.value.length){const se=b.value.findIndex(G=>d.value.some(D=>(e.valueComparator||ms)(D.value,G.value)));_a&&!e.noAutoScroll&&window.requestAnimationFrame(()=>{se>=0&&o.value?.scrollToIndex(se)})}}),We(()=>e.items,(se,G)=>{U.value||v.value&&e.hideNoData&&!G.length&&se.length&&(U.value=!0)}),St(()=>{const se=!!(e.chips||n.chip),G=!!(!e.hideNoData||b.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),D=d.value.length>0,j=Ic.filterProps(e),ne=D||!v.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return l(Ic,Fe({ref:r},j,{modelValue:d.value.map(H=>H.props.title).join(", "),"onUpdate:modelValue":J,focused:v.value,"onUpdate:focused":H=>v.value=H,validationValue:d.externalValue,counterValue:f.value,dirty:D,class:["v-select",{"v-select--active-menu":U.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":d.value.length,"v-select--selection-slot":!!n.selection},e.class],style:e.style,inputmode:"none",placeholder:ne,"onClick:clear":P,"onMousedown:control":F,onBlur:le,onKeydown:L,"aria-label":a(k.value),title:a(k.value)}),{...n,default:()=>p(ze,null,[l(Vh,Fe({ref:s,modelValue:U.value,"onUpdate:modelValue":H=>U.value=H,activator:"parent",contentClass:"v-select__content",disabled:x.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:Q,onAfterLeave:Z},S.value),{default:()=>[G&&l(Nh,Fe({ref:E,selected:h.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:H=>H.preventDefault(),onKeydown:N,onFocusin:ce,tabindex:"-1","aria-live":"polite","aria-label":`${e.label}-list`,color:e.itemColor??e.color},C,e.listProps),{default:()=>[n["prepend-item"]?.(),!b.value.length&&!e.hideNoData&&(n["no-data"]?.()??l(Hl,{key:"no-data",title:a(e.noDataText)},null)),l(Zw,{ref:o,renderless:!0,items:b.value,itemKey:"value"},{default:H=>{let{item:te,index:Y,itemRef:K}=H;const X=ite(te.props),ae=Fe(te.props,{ref:K,key:te.value,onClick:()=>ie(te,null)});return te.type==="divider"?n.divider?.({props:te.raw,index:Y})??l(bi,Fe(te.props,{key:`divider-${Y}`}),null):te.type==="subheader"?n.subheader?.({props:te.raw,index:Y})??l(vv,Fe(te.props,{key:`subheader-${Y}`}),null):n.item?.({item:te,index:Y,props:ae})??l(Hl,Fe(ae,{role:"option"}),{prepend:oe=>{let{isSelected:W}=oe;return p(ze,null,[e.multiple&&!e.hideSelected?l(Tu,{key:te.value,modelValue:W,ripple:!1,tabindex:"-1"},null):void 0,X.prependAvatar&&l(Yi,{image:X.prependAvatar},null),X.prependIcon&&l(ya,{icon:X.prependIcon},null)])}})}}),n["append-item"]?.()]})]}),d.value.map((H,te)=>{function Y(oe){oe.stopPropagation(),oe.preventDefault(),ie(H,!1)}const K={"onClick:close":Y,onKeydown(oe){oe.key!=="Enter"&&oe.key!==" "||(oe.preventDefault(),oe.stopPropagation(),Y(oe))},onMousedown(oe){oe.preventDefault(),oe.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},X=se?!!n.chip:!!n.selection,ae=X?nw(se?n.chip({item:H,index:te,props:K}):n.selection({item:H,index:te})):void 0;if(!(X&&!ae))return p("div",{key:H.value,class:"v-select__selection"},[se?n.chip?l(Rn,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:H.title}}},{default:()=>[ae]}):l(hv,Fe({key:"chip",closable:e.closableChips,size:"small",text:H.title,disabled:H.props.disabled},K),null):ae??p("span",{class:"v-select__selection-text"},[H.title,e.multiple&&te<d.value.length-1&&p("span",{class:"v-select__selection-comma"},[O(",")])])])})]),"append-inner":function(){for(var H=arguments.length,te=new Array(H),Y=0;Y<H;Y++)te[Y]=arguments[Y];return p(ze,null,[n["append-inner"]?.(...te),e.menuIcon?l(ya,{class:"v-select__menu-icon",color:r.value?.fieldIconColor,icon:e.menuIcon},null):void 0])}})}),gs({isFocused:v,menu:U,select:ie},r)}}),Tje=(e,t,n)=>{if(e==null||t==null)return-1;if(!t.length)return 0;e=e.toString().toLocaleLowerCase(),t=t.toString().toLocaleLowerCase();const a=[];let r=e.indexOf(t);for(;~r;)a.push([r,r+t.length]),r=e.indexOf(t,r+t.length);return a.length?a:-1};function YC(e,t){if(!(e==null||typeof e=="boolean"||e===-1))return typeof e=="number"?[[e,e+t.length]]:Array.isArray(e[0])?e:[e]}const pv=ot({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function Ije(e,t,n){const a=[],r=n?.default??Tje,s=n?.filterKeys?cr(n.filterKeys):!1,o=Object.keys(n?.customKeyFilter??{}).length;if(!e?.length)return a;e:for(let i=0;i<e.length;i++){const[c,A=c]=cr(e[i]),d={},f={};let m=-1;if((t||o>0)&&!n?.noFilter){let h=!1;if(typeof c=="object"){if(c.type==="divider"||c.type==="subheader")continue;const g=s||Object.keys(A);h=g.length===o;for(const w of g){const b=Fr(A,w),x=n?.customKeyFilter?.[w];if(m=x?x(b,t,c):r(b,t,c),m!==-1&&m!==!1)x?d[w]=YC(m,t):f[w]=YC(m,t);else if(n?.filterMode==="every")continue e}}else m=r(c,t,c),m!==-1&&m!==!1&&(f.title=YC(m,t));const v=Object.keys(f).length,y=Object.keys(d).length;if(!v&&!y||n?.filterMode==="union"&&y!==o&&!v||n?.filterMode==="intersection"&&(y!==o||!v&&o>0&&!h))continue}a.push({index:i,matches:{...f,...d}})}return a}function gv(e,t,n,a){const r=Ht([]),s=Ht(new Map),o=ee(()=>a?.transform?Oe(t).map(c=>[c,a.transform(c)]):Oe(t));Ar(()=>{const c=typeof n=="function"?n():Oe(n),A=typeof c!="string"&&typeof c!="number"?"":String(c),d=Ije(o.value,A,{customKeyFilter:{...e.customKeyFilter,...Oe(a?.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),f=Oe(t),m=[],h=new Map;d.forEach(v=>{let{index:y,matches:g}=v;const w=f[y];m.push(w),h.set(w.value,g)}),r.value=m,s.value=h});function i(c){return s.value.get(c.value)}return{filteredItems:r,filteredMatches:s,getMatches:i}}function t7(e,t,n){return n==null||!n.length?t:n.map((a,r)=>{const s=r===0?0:n[r-1][1],o=[p("span",{class:ct(`${e}__unmask`)},[t.slice(s,a[0])]),p("span",{class:ct(`${e}__mask`)},[t.slice(a[0],a[1])])];return r===n.length-1&&o.push(p("span",{class:ct(`${e}__unmask`)},[t.slice(a[1])])),p(ze,null,[o])})}const Fje=ot({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...pv({filterKeys:["title"]}),...y4(),...Fa(Rg({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Jl({transition:!1})},"VAutocomplete"),Pje=yt()({name:"VAutocomplete",props:Fje(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:n}=t;const{t:a}=Pa(),r=M(),s=Ht(!1),o=Ht(!0),i=Ht(!1),c=M(),A=M(),d=Ht(-1),{items:f,transformIn:m,transformOut:h}=A4(e),{textColorClasses:v,textColorStyles:y}=Fs(()=>r.value?.color),g=on(e,"search",""),w=on(e,"modelValue",[],ae=>m(ae===null?[null]:cr(ae)),ae=>{const oe=h(ae);return e.multiple?oe:oe[0]??null}),b=ee(()=>typeof e.counterValue=="function"?e.counterValue(w.value):typeof e.counterValue=="number"?e.counterValue:w.value.length),x=Pg(e),{filteredItems:T,getMatches:U}=gv(e,f,()=>o.value?"":g.value),k=ee(()=>e.hideSelected?T.value.filter(ae=>!w.value.some(oe=>oe.value===ae.value)):T.value),S=ee(()=>!!(e.chips||n.chip)),E=ee(()=>S.value||!!n.selection),C=ee(()=>w.value.map(ae=>ae.props.value)),P=ee(()=>(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&g.value===k.value[0]?.title)&&k.value.length>0&&!o.value&&!i.value),F=ee(()=>e.hideNoData&&!k.value.length||x.isReadonly.value||x.isDisabled.value),N=on(e,"menu"),L=ee({get:()=>N.value,set:ae=>{N.value&&!ae&&c.value?.openChildren.size||ae&&F.value||(N.value=ae)}}),ie=ee(()=>L.value?e.closeText:e.openText),le=M(),Q=g4(le,r);function Z(ae){e.openOnClear&&(L.value=!0),g.value=""}function ce(){F.value||(L.value=!0)}function J(ae){F.value||(s.value&&(ae.preventDefault(),ae.stopPropagation()),L.value=!L.value)}function se(ae){(yh(ae)||ae.key==="Backspace")&&r.value?.focus()}function G(ae){if(x.isReadonly.value)return;const oe=r.value?.selectionStart,W=w.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(ae.key)&&ae.preventDefault(),["Enter","ArrowDown"].includes(ae.key)&&(L.value=!0),["Escape"].includes(ae.key)&&(L.value=!1),P.value&&["Enter","Tab"].includes(ae.key)&&!w.value.some(de=>{let{value:Ae}=de;return Ae===k.value[0].value})&&X(k.value[0]),ae.key==="ArrowDown"&&P.value&&le.value?.focus("next"),["Backspace","Delete"].includes(ae.key)){if(!e.multiple&&E.value&&w.value.length>0&&!g.value)return X(w.value[0],!1);if(~d.value){ae.preventDefault();const de=d.value;X(w.value[d.value],!1),d.value=de>=W-1?W-2:de}else ae.key==="Backspace"&&!g.value&&(d.value=W-1);return}if(e.multiple)if(ae.key==="ArrowLeft"){if(d.value<0&&oe&&oe>0)return;const de=d.value>-1?d.value-1:W-1;if(w.value[de])d.value=de;else{const Ae=g.value?.length??null;d.value=-1,r.value?.setSelectionRange(Ae,Ae)}}else if(ae.key==="ArrowRight"){if(d.value<0)return;const de=d.value+1;w.value[de]?d.value=de:(d.value=-1,r.value?.setSelectionRange(0,0))}else~d.value&&yh(ae)&&(d.value=-1)}function D(ae){if(gh(r.value,":autofill")||gh(r.value,":-webkit-autofill")){const oe=f.value.find(W=>W.title===ae.target.value);oe&&X(oe)}}function j(){e.eager&&A.value?.calculateVisibleItems()}function ne(){s.value&&(o.value=!0,r.value?.focus())}function H(ae){s.value=!0,setTimeout(()=>{i.value=!0})}function te(ae){i.value=!1}function Y(ae){(ae==null||ae===""&&!e.multiple&&!E.value)&&(w.value=[])}const K=Ht(!1);function X(ae){let oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!ae||ae.props.disabled))if(e.multiple){const W=w.value.findIndex(Ae=>(e.valueComparator||ms)(Ae.value,ae.value)),de=oe??!~W;if(~W){const Ae=de?[...w.value,ae]:[...w.value];Ae.splice(W,1),w.value=Ae}else de&&(w.value=[...w.value,ae]);e.clearOnSelect&&(g.value="")}else{const W=oe!==!1;w.value=W?[ae]:[],g.value=W&&!E.value?ae.title:"",bn(()=>{L.value=!1,o.value=!0})}}return We(s,(ae,oe)=>{ae!==oe&&(ae?(K.value=!0,g.value=e.multiple||E.value?"":String(w.value.at(-1)?.props.title??""),o.value=!0,bn(()=>K.value=!1)):(!e.multiple&&g.value==null&&(w.value=[]),L.value=!1,(e.multiple||E.value)&&(g.value=""),d.value=-1))}),We(g,ae=>{!s.value||K.value||(ae&&(L.value=!0),o.value=!ae)}),We(L,()=>{if(!e.hideSelected&&L.value&&w.value.length){const ae=k.value.findIndex(oe=>w.value.some(W=>oe.value===W.value));_a&&window.requestAnimationFrame(()=>{ae>=0&&A.value?.scrollToIndex(ae)})}}),We(()=>e.items,(ae,oe)=>{L.value||s.value&&!oe.length&&ae.length&&(L.value=!0)}),St(()=>{const ae=!!(!e.hideNoData||k.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),oe=w.value.length>0,W=Ic.filterProps(e);return l(Ic,Fe({ref:r},W,{modelValue:g.value,"onUpdate:modelValue":[de=>g.value=de,Y],focused:s.value,"onUpdate:focused":de=>s.value=de,validationValue:w.externalValue,counterValue:b.value,dirty:oe,onChange:D,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":L.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!E.value,"v-autocomplete--selecting-index":d.value>-1},e.class],style:e.style,readonly:x.isReadonly.value,placeholder:oe?void 0:e.placeholder,"onClick:clear":Z,"onMousedown:control":ce,onKeydown:G}),{...n,default:()=>p(ze,null,[l(Vh,Fe({ref:c,modelValue:L.value,"onUpdate:modelValue":de=>L.value=de,activator:"parent",contentClass:"v-autocomplete__content",disabled:F.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:j,onAfterLeave:ne},e.menuProps),{default:()=>[ae&&l(Nh,Fe({ref:le,filterable:!0,selected:C.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:de=>de.preventDefault(),onKeydown:se,onFocusin:H,onFocusout:te,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},Q,e.listProps),{default:()=>[n["prepend-item"]?.(),!k.value.length&&!e.hideNoData&&(n["no-data"]?.()??l(Hl,{key:"no-data",title:a(e.noDataText)},null)),l(Zw,{ref:A,renderless:!0,items:k.value,itemKey:"value"},{default:de=>{let{item:Ae,index:Ce,itemRef:De}=de;const xe=Fe(Ae.props,{ref:De,key:Ae.value,active:P.value&&Ce===0?!0:void 0,onClick:()=>X(Ae,null)});return Ae.type==="divider"?n.divider?.({props:Ae.raw,index:Ce})??l(bi,Fe(Ae.props,{key:`divider-${Ce}`}),null):Ae.type==="subheader"?n.subheader?.({props:Ae.raw,index:Ce})??l(vv,Fe(Ae.props,{key:`subheader-${Ce}`}),null):n.item?.({item:Ae,index:Ce,props:xe})??l(Hl,Fe(xe,{role:"option"}),{prepend:ke=>{let{isSelected:Ee}=ke;return p(ze,null,[e.multiple&&!e.hideSelected?l(Tu,{key:Ae.value,modelValue:Ee,ripple:!1,tabindex:"-1"},null):void 0,Ae.props.prependAvatar&&l(Yi,{image:Ae.props.prependAvatar},null),Ae.props.prependIcon&&l(ya,{icon:Ae.props.prependIcon},null)])},title:()=>o.value?Ae.title:t7("v-autocomplete",Ae.title,U(Ae)?.title)})}}),n["append-item"]?.()]})]}),w.value.map((de,Ae)=>{function Ce(Ee){Ee.stopPropagation(),Ee.preventDefault(),X(de,!1)}const De={"onClick:close":Ce,onKeydown(Ee){Ee.key!=="Enter"&&Ee.key!==" "||(Ee.preventDefault(),Ee.stopPropagation(),Ce(Ee))},onMousedown(Ee){Ee.preventDefault(),Ee.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},xe=S.value?!!n.chip:!!n.selection,ke=xe?nw(S.value?n.chip({item:de,index:Ae,props:De}):n.selection({item:de,index:Ae})):void 0;if(!(xe&&!ke))return p("div",{key:de.value,class:ct(["v-autocomplete__selection",Ae===d.value&&["v-autocomplete__selection--selected",v.value]]),style:Rt(Ae===d.value?y.value:{})},[S.value?n.chip?l(Rn,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:de.title}}},{default:()=>[ke]}):l(hv,Fe({key:"chip",closable:e.closableChips,size:"small",text:de.title,disabled:de.props.disabled},De),null):ke??p("span",{class:"v-autocomplete__selection-text"},[de.title,e.multiple&&Ae<w.value.length-1&&p("span",{class:"v-autocomplete__selection-comma"},[O(",")])])])})]),"append-inner":function(){for(var de=arguments.length,Ae=new Array(de),Ce=0;Ce<de;Ce++)Ae[Ce]=arguments[Ce];return p(ze,null,[n["append-inner"]?.(...Ae),e.menuIcon?l(ya,{class:"v-autocomplete__menu-icon",color:r.value?.fieldIconColor,icon:e.menuIcon,onMousedown:J,onClick:N8,"aria-label":a(ie.value),title:a(ie.value),tabindex:"-1"},null):void 0])}})}),gs({isFocused:s,isPristine:o,menu:L,search:g,filteredItems:T,select:X},r)}}),Dje=ot({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:un,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...en(),...Nc({location:"top end"}),...tr(),...Un(),...aa(),...Jl({transition:"scale-rotate-transition"}),...Ur()},"VBadge"),Uje=yt()({name:"VBadge",inheritAttrs:!1,props:Dje(),setup(e,t){const{backgroundColorClasses:n,backgroundColorStyles:a}=Ca(()=>e.color),{roundedClasses:r}=hr(e),{t:s}=Pa(),{textColorClasses:o,textColorStyles:i}=Fs(()=>e.textColor),{themeClasses:c}=bk(),{locationStyles:A}=Qf(e,!0,f=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(f)?Number(e.offsetY??0):["left","right"].includes(f)?Number(e.offsetX??0):0)),{dimensionStyles:d}=Rr(e);return St(()=>{const f=Number(e.content),m=!e.max||isNaN(f)?e.content:f<=Number(e.max)?f:`${e.max}+`,[h,v]=xS(t.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return l(e.tag,Fe({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},v,{style:e.style}),{default:()=>[p("div",{class:"v-badge__wrapper"},[t.slots.default?.(),l(mo,{transition:e.transition},{default:()=>[Aa(p("span",Fe({class:["v-badge__badge",c.value,n.value,r.value,o.value],style:[a.value,i.value,d.value,e.inline?{}:A.value],"aria-atomic":"true","aria-label":s(e.label,f),"aria-live":"polite",role:"status"},h),[e.dot?void 0:t.slots.badge?t.slots.badge?.():e.icon?l(ya,{icon:e.icon},null):m]),[[ai,e.modelValue]])]})])]})}),{}}}),Rje=ot({color:String,density:String,...en()},"VBannerActions"),n7=yt()({name:"VBannerActions",props:Rje(),setup(e,t){let{slots:n}=t;return fr({VBtn:{color:e.color,density:e.density,slim:!0,variant:"text"}}),St(()=>p("div",{class:ct(["v-banner-actions",e.class]),style:Rt(e.style)},[n.default?.()])),{}}}),a7=Dc("v-banner-text"),Nje=ot({avatar:String,bgColor:String,color:String,icon:un,lines:String,stacked:Boolean,sticky:Boolean,text:String,...$o(),...en(),...rs(),...Ur(),...kf({mobile:null}),...Wr(),...Nc(),...Av(),...tr(),...Un(),...aa()},"VBanner"),Vje=yt()({name:"VBanner",props:Nje(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:a,backgroundColorStyles:r}=Ca(()=>e.bgColor),{borderClasses:s}=oi(e),{densityClasses:o}=xo(e),{displayClasses:i,mobile:c}=Ji(e),{dimensionStyles:A}=Rr(e),{elevationClasses:d}=ps(e),{locationStyles:f}=Qf(e),{positionClasses:m}=fv(e),{roundedClasses:h}=hr(e),{themeClasses:v}=wa(e),y=qe(()=>e.color),g=qe(()=>e.density);fr({VBannerActions:{color:y,density:g}}),St(()=>{const w=!!(e.text||n.text),b=!!(e.avatar||e.icon),x=!!(b||n.prepend);return l(e.tag,{class:ct(["v-banner",{"v-banner--stacked":e.stacked||c.value,"v-banner--sticky":e.sticky,[`v-banner--${e.lines}-line`]:!!e.lines},v.value,a.value,s.value,o.value,i.value,d.value,m.value,h.value,e.class]),style:Rt([r.value,A.value,f.value,e.style]),role:"banner"},{default:()=>[x&&p("div",{key:"prepend",class:"v-banner__prepend"},[n.prepend?l(Rn,{key:"prepend-defaults",disabled:!b,defaults:{VAvatar:{color:y.value,density:g.value,icon:e.icon,image:e.avatar}}},n.prepend):l(Yi,{key:"prepend-avatar",color:y.value,density:g.value,icon:e.icon,image:e.avatar},null)]),p("div",{class:"v-banner__content"},[w&&l(a7,{key:"text"},{default:()=>[n.text?.()??e.text]}),n.default?.()]),n.actions&&l(n7,{key:"actions"},n.actions)]})})}}),Lje=ot({baseColor:String,bgColor:String,color:String,grow:Boolean,mode:{type:String,validator:e=>!e||["horizontal","shift"].includes(e)},height:{type:[Number,String],default:56},active:{type:Boolean,default:!0},...$o(),...en(),...rs(),...Wr(),...tr(),...Tf({name:"bottom-navigation"}),...Un({tag:"header"}),...Of({selectedClass:"v-btn--selected"}),...aa()},"VBottomNavigation"),Mje=yt()({name:"VBottomNavigation",props:Lje(),emits:{"update:active":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:a}=bk(),{borderClasses:r}=oi(e),{backgroundColorClasses:s,backgroundColorStyles:o}=Ca(()=>e.bgColor),{densityClasses:i}=xo(e),{elevationClasses:c}=ps(e),{roundedClasses:A}=hr(e),{ssrBootStyles:d}=Lf(),f=ee(()=>Number(e.height)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0)),m=on(e,"active",e.active),{layoutItemStyles:h}=If({id:e.name,order:ee(()=>parseInt(e.order,10)),position:qe(()=>"bottom"),layoutSize:qe(()=>m.value?f.value:0),elementSize:f,active:m,absolute:qe(()=>e.absolute)});return Jd(e,i4),fr({VBtn:{baseColor:qe(()=>e.baseColor),color:qe(()=>e.color),density:qe(()=>e.density),stacked:qe(()=>e.mode!=="horizontal"),variant:"text"}},{scoped:!0}),St(()=>l(e.tag,{class:ct(["v-bottom-navigation",{"v-bottom-navigation--active":m.value,"v-bottom-navigation--grow":e.grow,"v-bottom-navigation--shift":e.mode==="shift"},a.value,s.value,r.value,i.value,c.value,A.value,e.class]),style:Rt([o.value,h.value,{height:jt(f.value)},d.value,e.style])},{default:()=>[n.default&&p("div",{class:"v-bottom-navigation__content"},[n.default()])]})),{}}}),r7=ot({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...Dg({origin:"center center",scrollStrategy:"block",transition:{component:Kw},zIndex:2400})},"VDialog"),oB=yt()({name:"VDialog",props:r7(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,t){let{emit:n,slots:a}=t;const r=on(e,"modelValue"),{scopeId:s}=Gf(),o=M();function i(d){const f=d.relatedTarget,m=d.target;if(f!==m&&o.value?.contentEl&&o.value?.globalTop&&![document,o.value.contentEl].includes(m)&&!o.value.contentEl.contains(m)){const h=m0(o.value.contentEl);if(!h.length)return;const v=h[0],y=h[h.length-1];f===v?y.focus():v.focus()}}la(()=>{document.removeEventListener("focusin",i)}),_a&&We(()=>r.value&&e.retainFocus,d=>{d?document.addEventListener("focusin",i):document.removeEventListener("focusin",i)},{immediate:!0});function c(){n("afterEnter"),(e.scrim||e.retainFocus)&&o.value?.contentEl&&!o.value.contentEl.contains(document.activeElement)&&o.value.contentEl.focus({preventScroll:!0})}function A(){n("afterLeave")}return We(r,async d=>{d||(await bn(),o.value.activatorEl?.focus({preventScroll:!0}))}),St(()=>{const d=Iu.filterProps(e),f=Fe({"aria-haspopup":"dialog"},e.activatorProps),m=Fe({tabindex:-1},e.contentProps);return l(Iu,Fe({ref:o,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},d,{modelValue:r.value,"onUpdate:modelValue":h=>r.value=h,"aria-modal":"true",activatorProps:f,contentProps:m,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:c,onAfterLeave:A},s),{activator:a.activator,default:function(){for(var h=arguments.length,v=new Array(h),y=0;y<h;y++)v[y]=arguments[y];return l(Rn,{root:"VDialog"},{default:()=>[a.default?.(...v)]})}})}),gs({},o)}}),Oje=ot({inset:Boolean,...r7({transition:"bottom-sheet-transition"})},"VBottomSheet"),Hje=yt()({name:"VBottomSheet",props:Oje(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=on(e,"modelValue");return St(()=>{const r=oB.filterProps(e);return l(oB,Fe(r,{contentClass:["v-bottom-sheet__content",e.contentClass],modelValue:a.value,"onUpdate:modelValue":s=>a.value=s,class:["v-bottom-sheet",{"v-bottom-sheet--inset":e.inset},e.class],style:e.style}),n)}),{}}}),$je=ot({divider:[Number,String],...en()},"VBreadcrumbsDivider"),s7=yt()({name:"VBreadcrumbsDivider",props:$je(),setup(e,t){let{slots:n}=t;return St(()=>p("li",{"aria-hidden":"true",class:ct(["v-breadcrumbs-divider",e.class]),style:Rt(e.style)},[n?.default?.()??e.divider])),{}}}),Qje=ot({active:Boolean,activeClass:String,activeColor:String,color:String,disabled:Boolean,title:String,...en(),...Ig(),...Un({tag:"li"})},"VBreadcrumbsItem"),o7=yt()({name:"VBreadcrumbsItem",props:Qje(),setup(e,t){let{slots:n,attrs:a}=t;const r=Tg(e,a),s=ee(()=>e.active||r.isActive?.value),{textColorClasses:o,textColorStyles:i}=Fs(()=>s.value?e.activeColor:e.color);return St(()=>l(e.tag,{class:ct(["v-breadcrumbs-item",{"v-breadcrumbs-item--active":s.value,"v-breadcrumbs-item--disabled":e.disabled,[`${e.activeClass}`]:s.value&&e.activeClass},o.value,e.class]),style:Rt([i.value,e.style]),"aria-current":s.value?"page":void 0},{default:()=>[r.isLink.value?p("a",Fe({class:"v-breadcrumbs-item--link",onClick:r.navigate},r.linkProps),[n.default?.()??e.title]):n.default?.()??e.title]})),{}}}),Gje=ot({activeClass:String,activeColor:String,bgColor:String,color:String,disabled:Boolean,divider:{type:String,default:"/"},icon:un,items:{type:Array,default:()=>[]},...en(),...rs(),...tr(),...Un({tag:"ul"})},"VBreadcrumbs"),zje=yt()({name:"VBreadcrumbs",props:Gje(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:a,backgroundColorStyles:r}=Ca(()=>e.bgColor),{densityClasses:s}=xo(e),{roundedClasses:o}=hr(e);fr({VBreadcrumbsDivider:{divider:qe(()=>e.divider)},VBreadcrumbsItem:{activeClass:qe(()=>e.activeClass),activeColor:qe(()=>e.activeColor),color:qe(()=>e.color),disabled:qe(()=>e.disabled)}});const i=ee(()=>e.items.map(c=>typeof c=="string"?{item:{title:c},raw:c}:{item:c,raw:c}));return St(()=>{const c=!!(n.prepend||e.icon);return l(e.tag,{class:ct(["v-breadcrumbs",a.value,s.value,o.value,e.class]),style:Rt([r.value,e.style])},{default:()=>[c&&p("li",{key:"prepend",class:"v-breadcrumbs__prepend"},[n.prepend?l(Rn,{key:"prepend-defaults",disabled:!e.icon,defaults:{VIcon:{icon:e.icon,start:!0}}},n.prepend):l(ya,{key:"prepend-icon",start:!0,icon:e.icon},null)]),i.value.map((A,d,f)=>{let{item:m,raw:h}=A;return p(ze,null,[n.item?.({item:m,index:d})??l(o7,Fe({key:d,disabled:d>=f.length-1},typeof m=="string"?{title:m}:m),{default:n.title?()=>n.title?.({item:m,index:d}):void 0}),d<f.length-1&&l(s7,null,{default:n.divider?()=>n.divider?.({item:h,index:d}):void 0})])}),n.default?.()]})}),{}}}),i7=yt()({name:"VCardActions",props:en(),setup(e,t){let{slots:n}=t;return fr({VBtn:{slim:!0,variant:"text"}}),St(()=>p("div",{class:ct(["v-card-actions",e.class]),style:Rt(e.style)},[n.default?.()])),{}}}),Kje=ot({opacity:[Number,String],...en(),...Un()},"VCardSubtitle"),l7=yt()({name:"VCardSubtitle",props:Kje(),setup(e,t){let{slots:n}=t;return St(()=>l(e.tag,{class:ct(["v-card-subtitle",e.class]),style:Rt([{"--v-card-subtitle-opacity":e.opacity},e.style])},n)),{}}}),u7=Dc("v-card-title"),Wje=ot({appendAvatar:String,appendIcon:un,prependAvatar:String,prependIcon:un,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...en(),...rs()},"VCardItem"),c7=yt()({name:"VCardItem",props:Wje(),setup(e,t){let{slots:n}=t;return St(()=>{const a=!!(e.prependAvatar||e.prependIcon),r=!!(a||n.prepend),s=!!(e.appendAvatar||e.appendIcon),o=!!(s||n.append),i=!!(e.title!=null||n.title),c=!!(e.subtitle!=null||n.subtitle);return p("div",{class:ct(["v-card-item",e.class]),style:Rt(e.style)},[r&&p("div",{key:"prepend",class:"v-card-item__prepend"},[n.prepend?l(Rn,{key:"prepend-defaults",disabled:!a,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon}}},n.prepend):p(ze,null,[e.prependAvatar&&l(Yi,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&l(ya,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])]),p("div",{class:"v-card-item__content"},[i&&l(u7,{key:"title"},{default:()=>[n.title?.()??q(e.title)]}),c&&l(l7,{key:"subtitle"},{default:()=>[n.subtitle?.()??q(e.subtitle)]}),n.default?.()]),o&&p("div",{key:"append",class:"v-card-item__append"},[n.append?l(Rn,{key:"append-defaults",disabled:!s,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon}}},n.append):p(ze,null,[e.appendIcon&&l(ya,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&l(Yi,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)])])])}),{}}}),jje=ot({opacity:[Number,String],...en(),...Un()},"VCardText"),d7=yt()({name:"VCardText",props:jje(),setup(e,t){let{slots:n}=t;return St(()=>l(e.tag,{class:ct(["v-card-text",e.class]),style:Rt([{"--v-card-text-opacity":e.opacity},e.style])},n)),{}}}),qje=ot({appendAvatar:String,appendIcon:un,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:un,ripple:{type:[Boolean,Object],default:!0},subtitle:{type:[String,Number,Boolean],default:void 0},text:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...$o(),...en(),...rs(),...Ur(),...Wr(),...qw(),...Nc(),...Av(),...tr(),...Ig(),...Un(),...aa(),...tl({variant:"elevated"})},"VCard"),Yje=yt()({name:"VCard",directives:{vRipple:wo},props:qje(),setup(e,t){let{attrs:n,slots:a}=t;const{themeClasses:r}=wa(e),{borderClasses:s}=oi(e),{colorClasses:o,colorStyles:i,variantClasses:c}=Mf(e),{densityClasses:A}=xo(e),{dimensionStyles:d}=Rr(e),{elevationClasses:f}=ps(e),{loaderClasses:m}=Bg(e),{locationStyles:h}=Qf(e),{positionClasses:v}=fv(e),{roundedClasses:y}=hr(e),g=Tg(e,n);return St(()=>{const w=e.link!==!1&&g.isLink.value,b=!e.disabled&&e.link!==!1&&(e.link||g.isClickable.value),x=w?"a":e.tag,T=!!(a.title||e.title!=null),U=!!(a.subtitle||e.subtitle!=null),k=T||U,S=!!(a.append||e.appendAvatar||e.appendIcon),E=!!(a.prepend||e.prependAvatar||e.prependIcon),C=!!(a.image||e.image),P=k||E||S,F=!!(a.text||e.text!=null);return Aa(l(x,Fe({class:["v-card",{"v-card--disabled":e.disabled,"v-card--flat":e.flat,"v-card--hover":e.hover&&!(e.disabled||e.flat),"v-card--link":b},r.value,s.value,o.value,A.value,f.value,m.value,v.value,y.value,c.value,e.class],style:[i.value,d.value,h.value,e.style],onClick:b&&g.navigate,tabindex:e.disabled?-1:void 0},g.linkProps),{default:()=>[C&&p("div",{key:"image",class:"v-card__image"},[a.image?l(Rn,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},a.image):l(Tc,{key:"image-img",cover:!0,src:e.image},null)]),l(kg,{name:"v-card",active:!!e.loading,color:typeof e.loading=="boolean"?void 0:e.loading},{default:a.loader}),P&&l(c7,{key:"item",prependAvatar:e.prependAvatar,prependIcon:e.prependIcon,title:e.title,subtitle:e.subtitle,appendAvatar:e.appendAvatar,appendIcon:e.appendIcon},{default:a.item,prepend:a.prepend,title:a.title,subtitle:a.subtitle,append:a.append}),F&&l(d7,{key:"text"},{default:()=>[a.text?.()??e.text]}),a.default?.(),a.actions&&l(i7,null,{default:a.actions}),Xd(b,"v-card")]}),[[wo,b&&e.ripple]])}),{}}}),Xje=e=>{const{touchstartX:t,touchendX:n,touchstartY:a,touchendY:r}=e,s=.5,o=16;e.offsetX=n-t,e.offsetY=r-a,Math.abs(e.offsetY)<s*Math.abs(e.offsetX)&&(e.left&&n<t-o&&e.left(e),e.right&&n>t+o&&e.right(e)),Math.abs(e.offsetX)<s*Math.abs(e.offsetY)&&(e.up&&r<a-o&&e.up(e),e.down&&r>a+o&&e.down(e))};function Jje(e,t){const n=e.changedTouches[0];t.touchstartX=n.clientX,t.touchstartY=n.clientY,t.start?.({originalEvent:e,...t})}function Zje(e,t){const n=e.changedTouches[0];t.touchendX=n.clientX,t.touchendY=n.clientY,t.end?.({originalEvent:e,...t}),Xje(t)}function eqe(e,t){const n=e.changedTouches[0];t.touchmoveX=n.clientX,t.touchmoveY=n.clientY,t.move?.({originalEvent:e,...t})}function tqe(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:n=>Jje(n,t),touchend:n=>Zje(n,t),touchmove:n=>eqe(n,t)}}function nqe(e,t){const n=t.value,a=n?.parent?e.parentElement:e,r=n?.options??{passive:!0},s=t.instance?.$.uid;if(!a||s===void 0)return;const o=tqe(t.value);a._touchHandlers=a._touchHandlers??Object.create(null),a._touchHandlers[s]=o,T8(o).forEach(i=>{a.addEventListener(i,o[i],r)})}function aqe(e,t){const n=t.value?.parent?e.parentElement:e,a=t.instance?.$.uid;if(!n?._touchHandlers||a===void 0)return;const r=n._touchHandlers[a];T8(r).forEach(s=>{n.removeEventListener(s,r[s])}),delete n._touchHandlers[a]}const S2={mounted:nqe,unmounted:aqe},A7=Symbol.for("vuetify:v-window"),f7=Symbol.for("vuetify:v-window-group"),eb=ot({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||e==="hover"},verticalArrows:[Boolean,String],touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...en(),...Un(),...aa()},"VWindow"),vf=yt()({name:"VWindow",directives:{vTouch:S2},props:eb(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:a}=wa(e),{isRtl:r}=Kr(),{t:s}=Pa(),o=Jd(e,f7),i=M(),c=ee(()=>r.value?!e.reverse:e.reverse),A=Ht(!1),d=ee(()=>{const T=e.direction==="vertical"?"y":"x",k=(c.value?!A.value:A.value)?"-reverse":"";return`v-window-${T}${k}-transition`}),f=Ht(0),m=M(void 0),h=ee(()=>o.items.value.findIndex(T=>o.selected.value.includes(T.id)));We(h,(T,U)=>{const k=o.items.value.length,S=k-1;k<=2?A.value=T<U:T===S&&U===0?A.value=!0:T===0&&U===S?A.value=!1:A.value=T<U}),Ia(A7,{transition:d,isReversed:A,transitionCount:f,transitionHeight:m,rootRef:i});const v=qe(()=>e.continuous||h.value!==0),y=qe(()=>e.continuous||h.value!==o.items.value.length-1);function g(){v.value&&o.prev()}function w(){y.value&&o.next()}const b=ee(()=>{const T=[],U={icon:r.value?e.nextIcon:e.prevIcon,class:`v-window__${c.value?"right":"left"}`,onClick:o.prev,"aria-label":s("$vuetify.carousel.prev")};T.push(v.value?n.prev?n.prev({props:U}):l(jn,U,null):p("div",null,null));const k={icon:r.value?e.prevIcon:e.nextIcon,class:`v-window__${c.value?"left":"right"}`,onClick:o.next,"aria-label":s("$vuetify.carousel.next")};return T.push(y.value?n.next?n.next({props:k}):l(jn,k,null):p("div",null,null)),T}),x=ee(()=>e.touch===!1?e.touch:{...{left:()=>{c.value?g():w()},right:()=>{c.value?w():g()},start:U=>{let{originalEvent:k}=U;k.stopPropagation()}},...e.touch===!0?{}:e.touch});return St(()=>Aa(l(e.tag,{ref:i,class:ct(["v-window",{"v-window--show-arrows-on-hover":e.showArrows==="hover","v-window--vertical-arrows":!!e.verticalArrows},a.value,e.class]),style:Rt(e.style)},{default:()=>[p("div",{class:"v-window__container",style:{height:m.value}},[n.default?.({group:o}),e.showArrows!==!1&&p("div",{class:ct(["v-window__controls",{"v-window__controls--left":e.verticalArrows==="left"||e.verticalArrows===!0},{"v-window__controls--right":e.verticalArrows==="right"}])},[b.value])]),n.additional?.({group:o})]}),[[S2,x.value]])),{group:o}}}),rqe=ot({color:String,cycle:Boolean,delimiterIcon:{type:un,default:"$delimiter"},height:{type:[Number,String],default:500},hideDelimiters:Boolean,hideDelimiterBackground:Boolean,interval:{type:[Number,String],default:6e3,validator:e=>Number(e)>0},progress:[Boolean,String],verticalDelimiters:[Boolean,String],...eb({continuous:!0,mandatory:"force",showArrows:!0})},"VCarousel"),sqe=yt()({name:"VCarousel",props:rqe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=on(e,"modelValue"),{t:r}=Pa(),s=M();let o=-1;We(a,c),We(()=>e.interval,c),We(()=>e.cycle,A=>{A?c():window.clearTimeout(o)}),cn(i);function i(){!e.cycle||!s.value||(o=window.setTimeout(s.value.group.next,Number(e.interval)>0?Number(e.interval):6e3))}function c(){window.clearTimeout(o),window.requestAnimationFrame(i)}return St(()=>{const A=vf.filterProps(e);return l(vf,Fe({ref:s},A,{modelValue:a.value,"onUpdate:modelValue":d=>a.value=d,class:["v-carousel",{"v-carousel--hide-delimiter-background":e.hideDelimiterBackground,"v-carousel--vertical-delimiters":e.verticalDelimiters},e.class],style:[{height:jt(e.height)},e.style]}),{default:n.default,additional:d=>{let{group:f}=d;return p(ze,null,[!e.hideDelimiters&&p("div",{class:"v-carousel__controls",style:{left:e.verticalDelimiters==="left"&&e.verticalDelimiters?0:"auto",right:e.verticalDelimiters==="right"?0:"auto"}},[f.items.value.length>0&&l(Rn,{defaults:{VBtn:{color:e.color,icon:e.delimiterIcon,size:"x-small",variant:"text"}},scoped:!0},{default:()=>[f.items.value.map((m,h)=>{const v={id:`carousel-item-${m.id}`,"aria-label":r("$vuetify.carousel.ariaLabel.delimiter",h+1,f.items.value.length),class:["v-carousel__controls__item",f.isSelected(m.id)&&"v-btn--active"],onClick:()=>f.select(m.id,!0)};return n.item?n.item({props:v,item:m}):l(jn,Fe(m,v),null)})]})]),e.progress&&l(jw,{absolute:!0,class:"v-carousel__progress",color:typeof e.progress=="string"?e.progress:void 0,modelValue:(f.getItemIndex(a.value)+1)/f.items.value.length*100},null)])},prev:n.prev,next:n.next})}),{}}}),tb=ot({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...en(),...Hf(),...v4()},"VWindowItem"),pf=yt()({name:"VWindowItem",directives:{vTouch:S2},props:tb(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const a=Sn(A7),r=$f(e,f7),{isBooted:s}=Lf();if(!a||!r)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const o=Ht(!1),i=ee(()=>s.value&&(a.isReversed.value?e.reverseTransition!==!1:e.transition!==!1));function c(){!o.value||!a||(o.value=!1,a.transitionCount.value>0&&(a.transitionCount.value-=1,a.transitionCount.value===0&&(a.transitionHeight.value=void 0)))}function A(){o.value||!a||(o.value=!0,a.transitionCount.value===0&&(a.transitionHeight.value=jt(a.rootRef.value?.clientHeight)),a.transitionCount.value+=1)}function d(){c()}function f(v){o.value&&bn(()=>{!i.value||!o.value||!a||(a.transitionHeight.value=jt(v.clientHeight))})}const m=ee(()=>{const v=a.isReversed.value?e.reverseTransition:e.transition;return i.value?{name:typeof v!="string"?a.transition.value:v,onBeforeEnter:A,onAfterEnter:c,onEnterCancelled:d,onBeforeLeave:A,onAfterLeave:c,onLeaveCancelled:d,onEnter:f}:!1}),{hasContent:h}=p4(e,r.isSelected);return St(()=>l(mo,{transition:m.value,disabled:!s.value},{default:()=>[Aa(p("div",{class:ct(["v-window-item",r.selectedClass.value,e.class]),style:Rt(e.style)},[h.value&&n.default?.()]),[[ai,r.isSelected.value]])]})),{groupItem:r}}}),oqe=ot({...Z9(),...tb()},"VCarouselItem"),iqe=yt()({name:"VCarouselItem",inheritAttrs:!1,props:oqe(),setup(e,t){let{slots:n,attrs:a}=t;St(()=>{const r=Tc.filterProps(e),s=pf.filterProps(e);return l(pf,Fe({class:["v-carousel-item",e.class]},s),{default:()=>[l(Tc,Fe(a,r),n)]})})}}),lqe=Dc("v-code","code"),uqe=ot({color:{type:Object},disabled:Boolean,dotSize:{type:[Number,String],default:10},height:{type:[Number,String],default:150},width:{type:[Number,String],default:300},...en()},"VColorPickerCanvas"),cqe=Ei({name:"VColorPickerCanvas",props:uqe(),emits:{"update:color":e=>!0,"update:position":e=>!0},setup(e,t){let{emit:n}=t;const a=Ht(!1),r=M(),s=Ht(parseFloat(e.width)),o=Ht(parseFloat(e.height)),i=M({x:0,y:0}),c=ee({get:()=>i.value,set(g){if(!r.value)return;const{x:w,y:b}=g;i.value=g,n("update:color",{h:e.color?.h??0,s:Qa(w,0,s.value)/s.value,v:1-Qa(b,0,o.value)/o.value,a:e.color?.a??1})}}),A=ee(()=>{const{x:g,y:w}=c.value,b=parseInt(e.dotSize,10)/2;return{width:jt(e.dotSize),height:jt(e.dotSize),transform:`translate(${jt(g-b)}, ${jt(w-b)})`}}),{resizeRef:d}=Rl(g=>{if(!d.el?.offsetParent)return;const{width:w,height:b}=g[0].contentRect;s.value=w,o.value=b});function f(g,w,b){const{left:x,top:T,width:U,height:k}=b;c.value={x:Qa(g-x,0,U),y:Qa(w-T,0,k)}}function m(g){g.type==="mousedown"&&g.preventDefault(),!e.disabled&&(h(g),window.addEventListener("mousemove",h),window.addEventListener("mouseup",v),window.addEventListener("touchmove",h),window.addEventListener("touchend",v))}function h(g){if(e.disabled||!r.value)return;a.value=!0;const w=ate(g);f(w.clientX,w.clientY,r.value.getBoundingClientRect())}function v(){window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",v),window.removeEventListener("touchmove",h),window.removeEventListener("touchend",v)}function y(){if(!r.value)return;const g=r.value,w=g.getContext("2d");if(!w)return;const b=w.createLinearGradient(0,0,g.width,0);b.addColorStop(0,"hsla(0, 0%, 100%, 1)"),b.addColorStop(1,`hsla(${e.color?.h??0}, 100%, 50%, 1)`),w.fillStyle=b,w.fillRect(0,0,g.width,g.height);const x=w.createLinearGradient(0,0,0,g.height);x.addColorStop(0,"hsla(0, 0%, 0%, 0)"),x.addColorStop(1,"hsla(0, 0%, 0%, 1)"),w.fillStyle=x,w.fillRect(0,0,g.width,g.height)}return We(()=>e.color?.h,y,{immediate:!0}),We(()=>[s.value,o.value],(g,w)=>{y(),i.value={x:c.value.x*g[0]/w[0],y:c.value.y*g[1]/w[1]}},{flush:"post"}),We(()=>e.color,()=>{if(a.value){a.value=!1;return}i.value=e.color?{x:e.color.s*s.value,y:(1-e.color.v)*o.value}:{x:0,y:0}},{deep:!0,immediate:!0}),cn(()=>y()),St(()=>p("div",{ref:d,class:ct(["v-color-picker-canvas",e.class]),style:Rt(e.style),onMousedown:m,onTouchstartPassive:m},[p("canvas",{ref:r,width:s.value,height:o.value},null),e.color&&p("div",{class:ct(["v-color-picker-canvas__dot",{"v-color-picker-canvas__dot--disabled":e.disabled}]),style:Rt(A.value)},null)])),{}}});function dqe(e,t){if(t){const{a:n,...a}=e;return a}return e}function Aqe(e,t){if(t==null||typeof t=="string"){const n=e.a!==1;if(t?.startsWith("rgb(")){const{r,g:s,b:o,a:i}=Su(e);return`rgb(${r} ${s} ${o}`+(n?` / ${i})`:")")}else if(t?.startsWith("hsl(")){const{h:r,s,l:o,a:i}=kS(e);return`hsl(${r} ${Math.round(s*100)} ${Math.round(o*100)}`+(n?` / ${i})`:")")}const a=W8(e);return e.a===1?a.slice(0,7):a}if(typeof t=="object"){let n;return UA(t,["r","g","b"])?n=Su(e):UA(t,["h","s","l"])?n=kS(e):UA(t,["h","s","v"])&&(n=e),dqe(n,!UA(t,["a"])&&e.a===1)}return e}const Gm={h:0,s:0,v:0,a:1},iB={inputProps:{type:"number",min:0},inputs:[{label:"R",max:255,step:1,getValue:e=>Math.round(e.r),getColor:(e,t)=>({...e,r:Number(t)}),localeKey:"redInput"},{label:"G",max:255,step:1,getValue:e=>Math.round(e.g),getColor:(e,t)=>({...e,g:Number(t)}),localeKey:"greenInput"},{label:"B",max:255,step:1,getValue:e=>Math.round(e.b),getColor:(e,t)=>({...e,b:Number(t)}),localeKey:"blueInput"},{label:"A",max:1,step:.01,getValue:e=>{let{a:t}=e;return t!=null?Math.round(t*100)/100:1},getColor:(e,t)=>({...e,a:Number(t)}),localeKey:"alphaInput"}],to:Su,from:ng},fqe={...iB,inputs:iB.inputs?.slice(0,3)},lB={inputProps:{type:"number",min:0},inputs:[{label:"H",max:360,step:1,getValue:e=>Math.round(e.h),getColor:(e,t)=>({...e,h:Number(t)}),localeKey:"hueInput"},{label:"S",max:1,step:.01,getValue:e=>Math.round(e.s*100)/100,getColor:(e,t)=>({...e,s:Number(t)}),localeKey:"saturationInput"},{label:"L",max:1,step:.01,getValue:e=>Math.round(e.l*100)/100,getColor:(e,t)=>({...e,l:Number(t)}),localeKey:"lightnessInput"},{label:"A",max:1,step:.01,getValue:e=>{let{a:t}=e;return t!=null?Math.round(t*100)/100:1},getColor:(e,t)=>({...e,a:Number(t)}),localeKey:"alphaInput"}],to:kS,from:mk},mqe={...lB,inputs:lB.inputs.slice(0,3)},m7={inputProps:{type:"text"},inputs:[{label:"HEXA",getValue:e=>e,getColor:(e,t)=>t,localeKey:"hexaInput"}],to:W8,from:kte},hqe={...m7,inputs:[{label:"HEX",getValue:e=>e.slice(0,7),getColor:(e,t)=>t,localeKey:"hexInput"}]},tf={rgb:fqe,rgba:iB,hsl:mqe,hsla:lB,hex:hqe,hexa:m7},vqe=e=>{let{label:t,...n}=e;return p("div",{class:"v-color-picker-edit__input"},[p("input",Ql(Kl(n)),null),p("span",null,[t])])},pqe=ot({color:Object,disabled:Boolean,mode:{type:String,default:"rgba",validator:e=>Object.keys(tf).includes(e)},modes:{type:Array,default:()=>Object.keys(tf),validator:e=>Array.isArray(e)&&e.every(t=>Object.keys(tf).includes(t))},...en()},"VColorPickerEdit"),gqe=Ei({name:"VColorPickerEdit",props:pqe(),emits:{"update:color":e=>!0,"update:mode":e=>!0},setup(e,t){let{emit:n}=t;const{t:a}=Pa(),r=ee(()=>e.modes.map(o=>({...tf[o],name:o}))),s=ee(()=>{const o=r.value.find(c=>c.name===e.mode);if(!o)return[];const i=e.color?o.to(e.color):null;return o.inputs?.map(c=>{let{getValue:A,getColor:d,localeKey:f,...m}=c;return{...o.inputProps,...m,ariaLabel:a(`$vuetify.colorPicker.ariaLabel.${f}`),disabled:e.disabled,value:i&&A(i),onChange:h=>{const v=h.target;v&&n("update:color",o.from(d(i??o.to(Gm),v.value)))}}})});return St(()=>p("div",{class:ct(["v-color-picker-edit",e.class]),style:Rt(e.style)},[s.value?.map(o=>l(vqe,o,null)),r.value.length>1&&l(jn,{icon:"$unfold",size:"x-small",variant:"plain","aria-label":a("$vuetify.colorPicker.ariaLabel.changeFormat"),onClick:()=>{const o=r.value.findIndex(i=>i.name===e.mode);n("update:mode",r.value[(o+1)%r.value.length].name)}},null)])),{}}}),w4=Symbol.for("vuetify:v-slider");function uB(e,t,n){const a=n==="vertical",r=t.getBoundingClientRect(),s="touches"in e?e.touches[0]:e;return a?s.clientY-(r.top+r.height/2):s.clientX-(r.left+r.width/2)}function yqe(e,t){return"touches"in e&&e.touches.length?e.touches[0][t]:"changedTouches"in e&&e.changedTouches.length?e.changedTouches[0][t]:e[t]}const h7=ot({disabled:{type:Boolean,default:null},error:Boolean,readonly:{type:Boolean,default:null},max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:e=>typeof e=="boolean"||e==="always"},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:e=>typeof e=="boolean"||e==="always"},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:e=>["vertical","horizontal"].includes(e)},reverse:Boolean,noKeyboard:Boolean,...tr(),...Wr({elevation:2}),ripple:{type:Boolean,default:!0}},"Slider"),v7=e=>{const t=ee(()=>parseFloat(e.min)),n=ee(()=>parseFloat(e.max)),a=ee(()=>Number(e.step)>0?parseFloat(e.step):0),r=ee(()=>Math.max(zP(a.value),zP(t.value)));function s(o){if(o=parseFloat(o),a.value<=0)return o;const i=Qa(o,t.value,n.value),c=t.value%a.value;let A=Math.round((i-c)/a.value)*a.value+c;return i>A&&A+a.value>n.value&&(A=n.value),parseFloat(Math.min(A,n.value).toFixed(r.value))}return{min:t,max:n,step:a,decimals:r,roundValue:s}},p7=e=>{let{props:t,steps:n,onSliderStart:a,onSliderMove:r,onSliderEnd:s,getActiveThumb:o}=e;const{isRtl:i}=Kr(),c=qe(()=>t.reverse),A=ee(()=>t.direction==="vertical"),d=ee(()=>A.value!==c.value),{min:f,max:m,step:h,decimals:v,roundValue:y}=n,g=ee(()=>parseInt(t.thumbSize,10)),w=ee(()=>parseInt(t.tickSize,10)),b=ee(()=>parseInt(t.trackSize,10)),x=ee(()=>(m.value-f.value)/h.value),T=qe(()=>t.disabled),U=ee(()=>t.error||t.disabled?void 0:t.thumbColor??t.color),k=ee(()=>t.error||t.disabled?void 0:t.thumbColor),S=ee(()=>t.error||t.disabled?void 0:t.trackColor??t.color),E=ee(()=>t.error||t.disabled?void 0:t.trackFillColor??t.color),C=Ht(!1),P=Ht(0),F=M(),N=M();function L(Y){const K=F.value?.$el;if(!K)return;const X=t.direction==="vertical",ae=X?"top":"left",oe=X?"height":"width",W=X?"clientY":"clientX",{[ae]:de,[oe]:Ae}=K.getBoundingClientRect(),Ce=yqe(Y,W);let De=Qa((Ce-de-P.value)/Ae)||0;return(X?d.value:d.value!==i.value)&&(De=1-De),y(f.value+De*(m.value-f.value))}const ie=Y=>{const K=L(Y);K!=null&&s({value:K}),C.value=!1,P.value=0},le=Y=>{const K=L(Y);N.value=o(Y),N.value&&(C.value=!0,N.value.contains(Y.target)?P.value=uB(Y,N.value,t.direction):(P.value=0,K!=null&&r({value:K})),K!=null&&a({value:K}),bn(()=>N.value?.focus()))},Q={passive:!0,capture:!0};function Z(Y){const K=L(Y);K!=null&&r({value:K})}function ce(Y){Y.stopPropagation(),Y.preventDefault(),ie(Y),window.removeEventListener("mousemove",Z,Q),window.removeEventListener("mouseup",ce)}function J(Y){ie(Y),window.removeEventListener("touchmove",Z,Q),Y.target?.removeEventListener("touchend",J)}function se(Y){le(Y),window.addEventListener("touchmove",Z,Q),Y.target?.addEventListener("touchend",J,{passive:!1})}function G(Y){Y.button===0&&(Y.preventDefault(),le(Y),window.addEventListener("mousemove",Z,Q),window.addEventListener("mouseup",ce,{passive:!1}))}const D=Y=>{const K=(Y-f.value)/(m.value-f.value)*100;return Qa(isNaN(K)?0:K,0,100)},j=qe(()=>t.showTicks),ne=ee(()=>j.value?t.ticks?Array.isArray(t.ticks)?t.ticks.map(Y=>({value:Y,position:D(Y),label:Y.toString()})):Object.keys(t.ticks).map(Y=>({value:parseFloat(Y),position:D(parseFloat(Y)),label:t.ticks[Y]})):x.value!==1/0?yi(x.value+1).map(Y=>{const K=f.value+Y*h.value;return{value:K,position:D(K)}}):[]:[]),H=ee(()=>ne.value.some(Y=>{let{label:K}=Y;return!!K})),te={activeThumbRef:N,color:qe(()=>t.color),decimals:v,disabled:T,direction:qe(()=>t.direction),elevation:qe(()=>t.elevation),hasLabels:H,isReversed:c,indexFromEnd:d,min:f,max:m,mousePressed:C,noKeyboard:qe(()=>t.noKeyboard),numTicks:x,onSliderMousedown:G,onSliderTouchstart:se,parsedTicks:ne,parseMouseMove:L,position:D,readonly:qe(()=>t.readonly),rounded:qe(()=>t.rounded),roundValue:y,showTicks:j,startOffset:P,step:h,thumbSize:g,thumbColor:U,thumbLabelColor:k,thumbLabel:qe(()=>t.thumbLabel),ticks:qe(()=>t.ticks),tickSize:w,trackColor:S,trackContainerRef:F,trackFillColor:E,trackSize:b,vertical:A};return Ia(w4,te),te},_qe=ot({focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0},ripple:{type:[Boolean,Object],default:!0},name:String,noKeyboard:Boolean,...en()},"VSliderThumb"),cB=yt()({name:"VSliderThumb",directives:{vRipple:wo},props:_qe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n,emit:a}=t;const r=Sn(w4),{isRtl:s,rtlClasses:o}=Kr();if(!r)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{min:i,max:c,thumbColor:A,thumbLabelColor:d,step:f,disabled:m,thumbSize:h,thumbLabel:v,direction:y,isReversed:g,vertical:w,readonly:b,elevation:x,mousePressed:T,decimals:U,indexFromEnd:k}=r,S=ee(()=>m.value?void 0:x.value),{elevationClasses:E}=ps(S),{textColorClasses:C,textColorStyles:P}=Fs(A),{backgroundColorClasses:F,backgroundColorStyles:N}=Ca(d),{pageup:L,pagedown:ie,end:le,home:Q,left:Z,right:ce,down:J,up:se}=bS,G=[L,ie,le,Q,Z,ce,J,se],D=ee(()=>f.value?[1,2,3]:[1,5,10]);function j(H,te){if(e.noKeyboard||!G.includes(H.key))return;H.preventDefault();const Y=f.value||.1,K=(c.value-i.value)/Y;if([Z,ce,J,se].includes(H.key)){const ae=(w.value?[s.value?Z:ce,g.value?J:se]:k.value!==s.value?[Z,se]:[ce,se]).includes(H.key)?1:-1,oe=H.shiftKey?2:H.ctrlKey?1:0;ae===-1&&te===c.value&&!oe&&!Number.isInteger(K)?te=te-K%1*Y:te=te+ae*Y*D.value[oe]}else if(H.key===Q)te=i.value;else if(H.key===le)te=c.value;else{const X=H.key===ie?1:-1;te=te-X*Y*(K>100?K/10:10)}return Math.max(e.min,Math.min(e.max,te))}function ne(H){const te=j(H,e.modelValue);te!=null&&a("update:modelValue",te)}return St(()=>{const H=jt(k.value?100-e.position:e.position,"%");return p("div",{class:ct(["v-slider-thumb",{"v-slider-thumb--focused":e.focused,"v-slider-thumb--pressed":e.focused&&T.value},e.class,o.value]),style:Rt([{"--v-slider-thumb-position":H,"--v-slider-thumb-size":jt(h.value)},e.style]),role:"slider",tabindex:m.value?-1:0,"aria-label":e.name,"aria-valuemin":i.value,"aria-valuemax":c.value,"aria-valuenow":e.modelValue,"aria-readonly":!!b.value,"aria-orientation":y.value,onKeydown:b.value?void 0:ne},[p("div",{class:ct(["v-slider-thumb__surface",C.value,E.value]),style:Rt(P.value)},null),Aa(p("div",{class:ct(["v-slider-thumb__ripple",C.value]),style:Rt(P.value)},null),[[wo,e.ripple,null,{circle:!0,center:!0}]]),l(a4,{origin:"bottom center"},{default:()=>[Aa(p("div",{class:"v-slider-thumb__label-container"},[p("div",{class:ct(["v-slider-thumb__label",F.value]),style:Rt(N.value)},[p("div",null,[n["thumb-label"]?.({modelValue:e.modelValue})??e.modelValue.toFixed(f.value?U.value:1)]),p("div",{class:"v-slider-thumb__label-wedge"},null)])]),[[ai,v.value&&e.focused||v.value==="always"]])]})])}),{}}}),wqe=ot({start:{type:Number,required:!0},stop:{type:Number,required:!0},...en()},"VSliderTrack"),g7=yt()({name:"VSliderTrack",props:wqe(),emits:{},setup(e,t){let{slots:n}=t;const a=Sn(w4);if(!a)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{color:r,parsedTicks:s,rounded:o,showTicks:i,tickSize:c,trackColor:A,trackFillColor:d,trackSize:f,vertical:m,min:h,max:v,indexFromEnd:y}=a,{roundedClasses:g}=hr(o),{backgroundColorClasses:w,backgroundColorStyles:b}=Ca(d),{backgroundColorClasses:x,backgroundColorStyles:T}=Ca(A),U=ee(()=>`inset-${m.value?"block":"inline"}-${y.value?"end":"start"}`),k=ee(()=>m.value?"height":"width"),S=ee(()=>({[U.value]:"0%",[k.value]:"100%"})),E=ee(()=>e.stop-e.start),C=ee(()=>({[U.value]:jt(e.start,"%"),[k.value]:jt(E.value,"%")})),P=ee(()=>i.value?(m.value?s.value.slice().reverse():s.value).map((N,L)=>{const ie=N.value!==h.value&&N.value!==v.value?jt(N.position,"%"):void 0;return p("div",{key:N.value,class:ct(["v-slider-track__tick",{"v-slider-track__tick--filled":N.position>=e.start&&N.position<=e.stop,"v-slider-track__tick--first":N.value===h.value,"v-slider-track__tick--last":N.value===v.value}]),style:{[U.value]:ie}},[(N.label||n["tick-label"])&&p("div",{class:"v-slider-track__tick-label"},[n["tick-label"]?.({tick:N,index:L})??N.label])])}):[]);return St(()=>p("div",{class:ct(["v-slider-track",g.value,e.class]),style:Rt([{"--v-slider-track-size":jt(f.value),"--v-slider-tick-size":jt(c.value)},e.style])},[p("div",{class:ct(["v-slider-track__background",x.value,{"v-slider-track__background--opacity":!!r.value||!d.value}]),style:{...S.value,...T.value}},null),p("div",{class:ct(["v-slider-track__fill",w.value]),style:{...C.value,...b.value}},null),i.value&&p("div",{class:ct(["v-slider-track__ticks",{"v-slider-track__ticks--always-show":i.value==="always"}])},[P.value])])),{}}}),bqe=ot({...Fg(),...h7(),...Lc(),modelValue:{type:[Number,String],default:0}},"VSlider"),dB=yt()({name:"VSlider",props:bqe(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,start:e=>!0,end:e=>!0},setup(e,t){let{slots:n,emit:a}=t;const r=M(),s=M(),{rtlClasses:o}=Kr(),i=v7(e),c=on(e,"modelValue",void 0,E=>i.roundValue(E??i.min.value)),{min:A,max:d,mousePressed:f,roundValue:m,onSliderMousedown:h,onSliderTouchstart:v,trackContainerRef:y,position:g,hasLabels:w,readonly:b,noKeyboard:x}=p7({props:e,steps:i,onSliderStart:()=>{a("start",c.value)},onSliderEnd:E=>{let{value:C}=E;const P=m(C);c.value=P,a("end",P)},onSliderMove:E=>{let{value:C}=E;return c.value=m(C)},getActiveThumb:()=>r.value?.$el}),{isFocused:T,focus:U,blur:k}=Vc(e),S=ee(()=>g(c.value));return St(()=>{const E=Ws.filterProps(e),C=!!(e.label||n.label||n.prepend);return l(Ws,Fe({ref:s,class:["v-slider",{"v-slider--has-labels":!!n["tick-label"]||w.value,"v-slider--focused":T.value,"v-slider--pressed":f.value,"v-slider--disabled":e.disabled},o.value,e.class],style:e.style},E,{focused:T.value}),{...n,prepend:C?P=>p(ze,null,[n.label?.(P)??(e.label?l(mv,{id:P.id.value,class:"v-slider__label",text:e.label},null):void 0),n.prepend?.(P)]):void 0,default:P=>{let{id:F,messagesId:N}=P;return p("div",{class:"v-slider__container",onMousedown:b.value?void 0:h,onTouchstartPassive:b.value?void 0:v},[p("input",{id:F.value,name:e.name||F.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:c.value},null),l(g7,{ref:y,start:0,stop:S.value},{"tick-label":n["tick-label"]}),l(cB,{ref:r,"aria-describedby":N.value,focused:T.value,noKeyboard:x.value,min:A.value,max:d.value,modelValue:c.value,"onUpdate:modelValue":L=>c.value=L,position:S.value,elevation:e.elevation,onFocus:U,onBlur:k,ripple:e.ripple,name:e.name},{"thumb-label":n["thumb-label"]})])}})}),gs({focus:()=>r.value?.$el.focus()},s)}}),xqe=ot({color:{type:Object},disabled:Boolean,hideAlpha:Boolean,...en()},"VColorPickerPreview"),Cqe=Ei({name:"VColorPickerPreview",props:xqe(),emits:{"update:color":e=>!0},setup(e,t){let{emit:n}=t;const{t:a}=Pa(),r=new AbortController;zl(()=>r.abort());async function s(){if(!HP||e.disabled)return;const o=new window.EyeDropper;try{const i=await o.open({signal:r.signal}),c=ng(_i(i.sRGBHex));n("update:color",{...e.color??Gm,...c})}catch{}}return St(()=>p("div",{class:ct(["v-color-picker-preview",{"v-color-picker-preview--hide-alpha":e.hideAlpha},e.class]),style:Rt(e.style)},[HP&&p("div",{class:"v-color-picker-preview__eye-dropper",key:"eyeDropper"},[l(jn,{"aria-label":a("$vuetify.colorPicker.ariaLabel.eyedropper"),density:"comfortable",disabled:e.disabled,icon:"$eyeDropper",variant:"plain",onClick:s},null)]),p("div",{class:"v-color-picker-preview__dot"},[p("div",{style:{background:G8(e.color??Gm)}},null)]),p("div",{class:"v-color-picker-preview__sliders"},[l(dB,{class:"v-color-picker-preview__track v-color-picker-preview__hue",name:a("$vuetify.colorPicker.ariaLabel.hueSlider"),modelValue:e.color?.h,"onUpdate:modelValue":o=>n("update:color",{...e.color??Gm,h:o}),step:0,min:0,max:360,disabled:e.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null),!e.hideAlpha&&l(dB,{class:"v-color-picker-preview__track v-color-picker-preview__alpha",name:a("$vuetify.colorPicker.ariaLabel.alphaSlider"),modelValue:e.color?.a??1,"onUpdate:modelValue":o=>n("update:color",{...e.color??Gm,a:o}),step:1/256,min:0,max:1,disabled:e.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null)])])),{}}}),Sqe={base:"#f44336",lighten5:"#ffebee",lighten4:"#ffcdd2",lighten3:"#ef9a9a",lighten2:"#e57373",lighten1:"#ef5350",darken1:"#e53935",darken2:"#d32f2f",darken3:"#c62828",darken4:"#b71c1c",accent1:"#ff8a80",accent2:"#ff5252",accent3:"#ff1744",accent4:"#d50000"},Eqe={base:"#e91e63",lighten5:"#fce4ec",lighten4:"#f8bbd0",lighten3:"#f48fb1",lighten2:"#f06292",lighten1:"#ec407a",darken1:"#d81b60",darken2:"#c2185b",darken3:"#ad1457",darken4:"#880e4f",accent1:"#ff80ab",accent2:"#ff4081",accent3:"#f50057",accent4:"#c51162"},Bqe={base:"#9c27b0",lighten5:"#f3e5f5",lighten4:"#e1bee7",lighten3:"#ce93d8",lighten2:"#ba68c8",lighten1:"#ab47bc",darken1:"#8e24aa",darken2:"#7b1fa2",darken3:"#6a1b9a",darken4:"#4a148c",accent1:"#ea80fc",accent2:"#e040fb",accent3:"#d500f9",accent4:"#aa00ff"},kqe={base:"#673ab7",lighten5:"#ede7f6",lighten4:"#d1c4e9",lighten3:"#b39ddb",lighten2:"#9575cd",lighten1:"#7e57c2",darken1:"#5e35b1",darken2:"#512da8",darken3:"#4527a0",darken4:"#311b92",accent1:"#b388ff",accent2:"#7c4dff",accent3:"#651fff",accent4:"#6200ea"},Tqe={base:"#3f51b5",lighten5:"#e8eaf6",lighten4:"#c5cae9",lighten3:"#9fa8da",lighten2:"#7986cb",lighten1:"#5c6bc0",darken1:"#3949ab",darken2:"#303f9f",darken3:"#283593",darken4:"#1a237e",accent1:"#8c9eff",accent2:"#536dfe",accent3:"#3d5afe",accent4:"#304ffe"},Iqe={base:"#2196f3",lighten5:"#e3f2fd",lighten4:"#bbdefb",lighten3:"#90caf9",lighten2:"#64b5f6",lighten1:"#42a5f5",darken1:"#1e88e5",darken2:"#1976d2",darken3:"#1565c0",darken4:"#0d47a1",accent1:"#82b1ff",accent2:"#448aff",accent3:"#2979ff",accent4:"#2962ff"},Fqe={base:"#03a9f4",lighten5:"#e1f5fe",lighten4:"#b3e5fc",lighten3:"#81d4fa",lighten2:"#4fc3f7",lighten1:"#29b6f6",darken1:"#039be5",darken2:"#0288d1",darken3:"#0277bd",darken4:"#01579b",accent1:"#80d8ff",accent2:"#40c4ff",accent3:"#00b0ff",accent4:"#0091ea"},Pqe={base:"#00bcd4",lighten5:"#e0f7fa",lighten4:"#b2ebf2",lighten3:"#80deea",lighten2:"#4dd0e1",lighten1:"#26c6da",darken1:"#00acc1",darken2:"#0097a7",darken3:"#00838f",darken4:"#006064",accent1:"#84ffff",accent2:"#18ffff",accent3:"#00e5ff",accent4:"#00b8d4"},Dqe={base:"#009688",lighten5:"#e0f2f1",lighten4:"#b2dfdb",lighten3:"#80cbc4",lighten2:"#4db6ac",lighten1:"#26a69a",darken1:"#00897b",darken2:"#00796b",darken3:"#00695c",darken4:"#004d40",accent1:"#a7ffeb",accent2:"#64ffda",accent3:"#1de9b6",accent4:"#00bfa5"},Uqe={base:"#4caf50",lighten5:"#e8f5e9",lighten4:"#c8e6c9",lighten3:"#a5d6a7",lighten2:"#81c784",lighten1:"#66bb6a",darken1:"#43a047",darken2:"#388e3c",darken3:"#2e7d32",darken4:"#1b5e20",accent1:"#b9f6ca",accent2:"#69f0ae",accent3:"#00e676",accent4:"#00c853"},Rqe={base:"#8bc34a",lighten5:"#f1f8e9",lighten4:"#dcedc8",lighten3:"#c5e1a5",lighten2:"#aed581",lighten1:"#9ccc65",darken1:"#7cb342",darken2:"#689f38",darken3:"#558b2f",darken4:"#33691e",accent1:"#ccff90",accent2:"#b2ff59",accent3:"#76ff03",accent4:"#64dd17"},Nqe={base:"#cddc39",lighten5:"#f9fbe7",lighten4:"#f0f4c3",lighten3:"#e6ee9c",lighten2:"#dce775",lighten1:"#d4e157",darken1:"#c0ca33",darken2:"#afb42b",darken3:"#9e9d24",darken4:"#827717",accent1:"#f4ff81",accent2:"#eeff41",accent3:"#c6ff00",accent4:"#aeea00"},Vqe={base:"#ffeb3b",lighten5:"#fffde7",lighten4:"#fff9c4",lighten3:"#fff59d",lighten2:"#fff176",lighten1:"#ffee58",darken1:"#fdd835",darken2:"#fbc02d",darken3:"#f9a825",darken4:"#f57f17",accent1:"#ffff8d",accent2:"#ffff00",accent3:"#ffea00",accent4:"#ffd600"},Lqe={base:"#ffc107",lighten5:"#fff8e1",lighten4:"#ffecb3",lighten3:"#ffe082",lighten2:"#ffd54f",lighten1:"#ffca28",darken1:"#ffb300",darken2:"#ffa000",darken3:"#ff8f00",darken4:"#ff6f00",accent1:"#ffe57f",accent2:"#ffd740",accent3:"#ffc400",accent4:"#ffab00"},Mqe={base:"#ff9800",lighten5:"#fff3e0",lighten4:"#ffe0b2",lighten3:"#ffcc80",lighten2:"#ffb74d",lighten1:"#ffa726",darken1:"#fb8c00",darken2:"#f57c00",darken3:"#ef6c00",darken4:"#e65100",accent1:"#ffd180",accent2:"#ffab40",accent3:"#ff9100",accent4:"#ff6d00"},Oqe={base:"#ff5722",lighten5:"#fbe9e7",lighten4:"#ffccbc",lighten3:"#ffab91",lighten2:"#ff8a65",lighten1:"#ff7043",darken1:"#f4511e",darken2:"#e64a19",darken3:"#d84315",darken4:"#bf360c",accent1:"#ff9e80",accent2:"#ff6e40",accent3:"#ff3d00",accent4:"#dd2c00"},Hqe={base:"#795548",lighten5:"#efebe9",lighten4:"#d7ccc8",lighten3:"#bcaaa4",lighten2:"#a1887f",lighten1:"#8d6e63",darken1:"#6d4c41",darken2:"#5d4037",darken3:"#4e342e",darken4:"#3e2723"},$qe={base:"#607d8b",lighten5:"#eceff1",lighten4:"#cfd8dc",lighten3:"#b0bec5",lighten2:"#90a4ae",lighten1:"#78909c",darken1:"#546e7a",darken2:"#455a64",darken3:"#37474f",darken4:"#263238"},Qqe={base:"#9e9e9e",lighten5:"#fafafa",lighten4:"#f5f5f5",lighten3:"#eeeeee",lighten2:"#e0e0e0",lighten1:"#bdbdbd",darken1:"#757575",darken2:"#616161",darken3:"#424242",darken4:"#212121"},Gqe={black:"#000000",white:"#ffffff",transparent:"#ffffff00"},zqe={red:Sqe,pink:Eqe,purple:Bqe,deepPurple:kqe,indigo:Tqe,blue:Iqe,lightBlue:Fqe,cyan:Pqe,teal:Dqe,green:Uqe,lightGreen:Rqe,lime:Nqe,yellow:Vqe,amber:Lqe,orange:Mqe,deepOrange:Oqe,brown:Hqe,blueGrey:$qe,grey:Qqe,shades:Gqe},Kqe=ot({swatches:{type:Array,default:()=>Wqe(zqe)},disabled:Boolean,color:Object,maxHeight:[Number,String],...en()},"VColorPickerSwatches");function Wqe(e){return Object.keys(e).map(t=>{const n=e[t];return n.base?[n.base,n.darken4,n.darken3,n.darken2,n.darken1,n.lighten1,n.lighten2,n.lighten3,n.lighten4,n.lighten5]:[n.black,n.white,n.transparent]})}const jqe=Ei({name:"VColorPickerSwatches",props:Kqe(),emits:{"update:color":e=>!0},setup(e,t){let{emit:n}=t;return St(()=>p("div",{class:ct(["v-color-picker-swatches",e.class]),style:Rt([{maxHeight:jt(e.maxHeight)},e.style])},[p("div",null,[e.swatches.map(a=>p("div",{class:"v-color-picker-swatches__swatch"},[a.map(r=>{const s=_i(r),o=ng(s),i=Q8(s);return p("div",{class:"v-color-picker-swatches__color",onClick:()=>o&&n("update:color",o)},[p("div",{style:{background:i}},[e.color&&ms(e.color,o)?l(ya,{size:"x-small",icon:"$success",color:Pte(r,"#FFFFFF")>2?"white":"black"},null):void 0])])})]))])])),{}}}),qqe=Dc("v-picker-title"),b4=ot({color:String,...$o(),...en(),...Ur(),...Wr(),...Nc(),...Av(),...tr(),...Un(),...aa()},"VSheet"),K0=yt()({name:"VSheet",props:b4(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=wa(e),{backgroundColorClasses:r,backgroundColorStyles:s}=Ca(()=>e.color),{borderClasses:o}=oi(e),{dimensionStyles:i}=Rr(e),{elevationClasses:c}=ps(e),{locationStyles:A}=Qf(e),{positionClasses:d}=fv(e),{roundedClasses:f}=hr(e);return St(()=>l(e.tag,{class:ct(["v-sheet",a.value,r.value,o.value,c.value,d.value,f.value,e.class]),style:Rt([s.value,i.value,A.value,e.style])},n)),{}}}),nb=ot({bgColor:String,divided:Boolean,landscape:Boolean,title:String,hideHeader:Boolean,...b4()},"VPicker"),Lh=yt()({name:"VPicker",props:nb(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:a,backgroundColorStyles:r}=Ca(()=>e.color);return St(()=>{const s=K0.filterProps(e),o=!!(e.title||n.title);return l(K0,Fe(s,{color:e.bgColor,class:["v-picker",{"v-picker--divided":e.divided,"v-picker--landscape":e.landscape,"v-picker--with-actions":!!n.actions},e.class],style:e.style}),{default:()=>[!e.hideHeader&&p("div",{key:"header",class:ct([a.value]),style:Rt([r.value])},[o&&l(qqe,{key:"picker-title"},{default:()=>[n.title?.()??e.title]}),n.header&&p("div",{class:"v-picker__header"},[n.header()])]),p("div",{class:"v-picker__body"},[n.default?.()]),n.actions&&l(Rn,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[p("div",{class:"v-picker__actions"},[n.actions()])]})]})}),{}}}),Yqe=ot({canvasHeight:{type:[String,Number],default:150},disabled:Boolean,dotSize:{type:[Number,String],default:10},hideCanvas:Boolean,hideSliders:Boolean,hideInputs:Boolean,mode:{type:String,default:"rgba",validator:e=>Object.keys(tf).includes(e)},modes:{type:Array,default:()=>Object.keys(tf),validator:e=>Array.isArray(e)&&e.every(t=>Object.keys(tf).includes(t))},showSwatches:Boolean,swatches:Array,swatchesMaxHeight:{type:[Number,String],default:150},modelValue:{type:[Object,String]},...nb({hideHeader:!0})},"VColorPicker"),Xqe=Ei({name:"VColorPicker",props:Yqe(),emits:{"update:modelValue":e=>!0,"update:mode":e=>!0},setup(e,t){let{slots:n}=t;const a=on(e,"mode"),r=M(null),s=on(e,"modelValue",void 0,d=>{if(d==null||d==="")return null;let f;try{f=ng(_i(d))}catch{return null}return f},d=>d?Aqe(d,e.modelValue):null),o=ee(()=>s.value?{...s.value,h:r.value??s.value.h}:null),{rtlClasses:i}=Kr();let c=!0;We(s,d=>{if(!c){c=!0;return}d&&(r.value=d.h)},{immediate:!0});const A=d=>{c=!1,r.value=d.h,s.value=d};return Gl(()=>{e.modes.includes(a.value)||(a.value=e.modes[0])}),fr({VSlider:{color:void 0,trackColor:void 0,trackFillColor:void 0}}),St(()=>{const d=Lh.filterProps(e);return l(Lh,Fe(d,{class:["v-color-picker",i.value,e.class],style:[{"--v-color-picker-color-hsv":G8({...o.value??Gm,a:1})},e.style]}),{...n,default:()=>p(ze,null,[!e.hideCanvas&&l(cqe,{key:"canvas",color:o.value,"onUpdate:color":A,disabled:e.disabled,dotSize:e.dotSize,width:e.width,height:e.canvasHeight},null),(!e.hideSliders||!e.hideInputs)&&p("div",{key:"controls",class:"v-color-picker__controls"},[!e.hideSliders&&l(Cqe,{key:"preview",color:o.value,"onUpdate:color":A,hideAlpha:!a.value.endsWith("a"),disabled:e.disabled},null),!e.hideInputs&&l(gqe,{key:"edit",modes:e.modes,mode:a.value,"onUpdate:mode":f=>a.value=f,color:o.value,"onUpdate:color":A,disabled:e.disabled},null)]),e.showSwatches&&l(jqe,{key:"swatches",color:o.value,"onUpdate:color":A,maxHeight:e.swatchesMaxHeight,swatches:e.swatches,disabled:e.disabled},null)])})}),{}}}),Jqe=ot({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...pv({filterKeys:["title"]}),...y4({hideNoData:!0,returnObject:!0}),...Fa(Rg({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Jl({transition:!1})},"VCombobox"),Zqe=yt()({name:"VCombobox",props:Jqe(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:search":e=>!0,"update:menu":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const{t:r}=Pa(),s=M(),o=Ht(!1),i=Ht(!0),c=Ht(!1),A=M(),d=M(),f=Ht(-1);let m=!1;const{items:h,transformIn:v,transformOut:y}=A4(e),{textColorClasses:g,textColorStyles:w}=Fs(()=>s.value?.color),b=on(e,"modelValue",[],oe=>v(cr(oe)),oe=>{const W=y(oe);return e.multiple?W:W[0]??null}),x=Pg(e),T=ee(()=>!!(e.chips||a.chip)),U=ee(()=>T.value||!!a.selection),k=Ht(!e.multiple&&!U.value?b.value[0]?.title??"":""),S=ee({get:()=>k.value,set:async oe=>{if(k.value=oe??"",!e.multiple&&!U.value&&(b.value=[yl(e,oe)],bn(()=>d.value?.scrollToIndex(0))),oe&&e.multiple&&e.delimiters?.length){const W=e.delimiters.map(C_).join("|"),de=oe.split(new RegExp(`(?:${W})+`));if(de.length>1){for(let Ae of de)Ae=Ae.trim(),Ae&&(Y(yl(e,Ae)),await bn());k.value=""}}oe||(f.value=-1),i.value=!oe}}),E=ee(()=>typeof e.counterValue=="function"?e.counterValue(b.value):typeof e.counterValue=="number"?e.counterValue:e.multiple?b.value.length:S.value.length),{filteredItems:C,getMatches:P}=gv(e,h,()=>i.value?"":S.value),F=ee(()=>e.hideSelected?C.value.filter(oe=>!b.value.some(W=>W.value===oe.value)):C.value),N=ee(()=>e.hideNoData&&!F.value.length||x.isReadonly.value||x.isDisabled.value),L=on(e,"menu"),ie=ee({get:()=>L.value,set:oe=>{L.value&&!oe&&A.value?.openChildren.size||oe&&N.value||(L.value=oe)}}),le=qe(()=>ie.value?e.closeText:e.openText);We(k,oe=>{m?bn(()=>m=!1):o.value&&!ie.value&&(ie.value=!0),n("update:search",oe)}),We(b,oe=>{!e.multiple&&!U.value&&(k.value=oe[0]?.title??"")});const Q=ee(()=>b.value.map(oe=>oe.value)),Z=ee(()=>(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&S.value===F.value[0]?.title)&&F.value.length>0&&!i.value&&!c.value),ce=M(),J=g4(ce,s);function se(oe){m=!0,e.openOnClear&&(ie.value=!0)}function G(){N.value||(ie.value=!0)}function D(oe){N.value||(o.value&&(oe.preventDefault(),oe.stopPropagation()),ie.value=!ie.value)}function j(oe){(yh(oe)||oe.key==="Backspace")&&s.value?.focus()}function ne(oe){if(tte(oe)||x.isReadonly.value)return;const W=s.value?.selectionStart,de=b.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(oe.key)&&oe.preventDefault(),["Enter","ArrowDown"].includes(oe.key)&&(ie.value=!0),["Escape"].includes(oe.key)&&(ie.value=!1),["Enter","Escape","Tab"].includes(oe.key)&&(Z.value&&["Enter","Tab"].includes(oe.key)&&!b.value.some(Ae=>{let{value:Ce}=Ae;return Ce===F.value[0].value})&&Y(C.value[0]),i.value=!0),oe.key==="ArrowDown"&&Z.value&&ce.value?.focus("next"),oe.key==="Enter"&&S.value&&(Y(yl(e,S.value)),U.value&&(k.value="")),["Backspace","Delete"].includes(oe.key)){if(!e.multiple&&U.value&&b.value.length>0&&!S.value)return Y(b.value[0],!1);if(~f.value){oe.preventDefault();const Ae=f.value;Y(b.value[f.value],!1),f.value=Ae>=de-1?de-2:Ae}else oe.key==="Backspace"&&!S.value&&(f.value=de-1);return}if(e.multiple)if(oe.key==="ArrowLeft"){if(f.value<0&&W&&W>0)return;const Ae=f.value>-1?f.value-1:de-1;b.value[Ae]?f.value=Ae:(f.value=-1,s.value?.setSelectionRange(S.value.length,S.value.length))}else if(oe.key==="ArrowRight"){if(f.value<0)return;const Ae=f.value+1;b.value[Ae]?f.value=Ae:(f.value=-1,s.value?.setSelectionRange(0,0))}else~f.value&&yh(oe)&&(f.value=-1)}function H(){e.eager&&d.value?.calculateVisibleItems()}function te(){o.value&&(i.value=!0,s.value?.focus())}function Y(oe){let W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!oe||oe.props.disabled))if(e.multiple){const de=b.value.findIndex(Ce=>(e.valueComparator||ms)(Ce.value,oe.value)),Ae=W??!~de;if(~de){const Ce=Ae?[...b.value,oe]:[...b.value];Ce.splice(de,1),b.value=Ce}else Ae&&(b.value=[...b.value,oe]);e.clearOnSelect&&(S.value="")}else{const de=W!==!1;b.value=de?[oe]:[],k.value=de&&!U.value?oe.title:"",bn(()=>{ie.value=!1,i.value=!0})}}function K(oe){o.value=!0,setTimeout(()=>{c.value=!0})}function X(oe){c.value=!1}function ae(oe){(oe==null||oe===""&&!e.multiple&&!U.value)&&(b.value=[])}return We(o,(oe,W)=>{if(!(oe||oe===W)&&(f.value=-1,ie.value=!1,S.value)){if(e.multiple){Y(yl(e,S.value));return}if(!U.value)return;b.value.some(de=>{let{title:Ae}=de;return Ae===S.value})?k.value="":Y(yl(e,S.value))}}),We(ie,()=>{if(!e.hideSelected&&ie.value&&b.value.length){const oe=F.value.findIndex(W=>b.value.some(de=>(e.valueComparator||ms)(de.value,W.value)));_a&&window.requestAnimationFrame(()=>{oe>=0&&d.value?.scrollToIndex(oe)})}}),We(()=>e.items,(oe,W)=>{ie.value||o.value&&!W.length&&oe.length&&(ie.value=!0)}),St(()=>{const oe=!!(!e.hideNoData||F.value.length||a["prepend-item"]||a["append-item"]||a["no-data"]),W=b.value.length>0,de=Ic.filterProps(e);return l(Ic,Fe({ref:s},de,{modelValue:S.value,"onUpdate:modelValue":[Ae=>S.value=Ae,ae],focused:o.value,"onUpdate:focused":Ae=>o.value=Ae,validationValue:b.externalValue,counterValue:E.value,dirty:W,class:["v-combobox",{"v-combobox--active-menu":ie.value,"v-combobox--chips":!!e.chips,"v-combobox--selection-slot":!!U.value,"v-combobox--selecting-index":f.value>-1,[`v-combobox--${e.multiple?"multiple":"single"}`]:!0},e.class],style:e.style,readonly:x.isReadonly.value,placeholder:W?void 0:e.placeholder,"onClick:clear":se,"onMousedown:control":G,onKeydown:ne}),{...a,default:()=>p(ze,null,[l(Vh,Fe({ref:A,modelValue:ie.value,"onUpdate:modelValue":Ae=>ie.value=Ae,activator:"parent",contentClass:"v-combobox__content",disabled:N.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:H,onAfterLeave:te},e.menuProps),{default:()=>[oe&&l(Nh,Fe({ref:ce,filterable:!0,selected:Q.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:Ae=>Ae.preventDefault(),onKeydown:j,onFocusin:K,onFocusout:X,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},J,e.listProps),{default:()=>[a["prepend-item"]?.(),!F.value.length&&!e.hideNoData&&(a["no-data"]?.()??l(Hl,{key:"no-data",title:r(e.noDataText)},null)),l(Zw,{ref:d,renderless:!0,items:F.value,itemKey:"value"},{default:Ae=>{let{item:Ce,index:De,itemRef:xe}=Ae;const ke=Fe(Ce.props,{ref:xe,key:Ce.value,active:Z.value&&De===0?!0:void 0,onClick:()=>Y(Ce,null)});return Ce.type==="divider"?a.divider?.({props:Ce.raw,index:De})??l(bi,Fe(Ce.props,{key:`divider-${De}`}),null):Ce.type==="subheader"?a.subheader?.({props:Ce.raw,index:De})??l(vv,Fe(Ce.props,{key:`subheader-${De}`}),null):a.item?.({item:Ce,index:De,props:ke})??l(Hl,Fe(ke,{role:"option"}),{prepend:Ee=>{let{isSelected:ye}=Ee;return p(ze,null,[e.multiple&&!e.hideSelected?l(Tu,{key:Ce.value,modelValue:ye,ripple:!1,tabindex:"-1"},null):void 0,Ce.props.prependAvatar&&l(Yi,{image:Ce.props.prependAvatar},null),Ce.props.prependIcon&&l(ya,{icon:Ce.props.prependIcon},null)])},title:()=>i.value?Ce.title:t7("v-combobox",Ce.title,P(Ce)?.title)})}}),a["append-item"]?.()]})]}),b.value.map((Ae,Ce)=>{function De(ye){ye.stopPropagation(),ye.preventDefault(),Y(Ae,!1)}const xe={"onClick:close":De,onKeydown(ye){ye.key!=="Enter"&&ye.key!==" "||(ye.preventDefault(),ye.stopPropagation(),De(ye))},onMousedown(ye){ye.preventDefault(),ye.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},ke=T.value?!!a.chip:!!a.selection,Ee=ke?nw(T.value?a.chip({item:Ae,index:Ce,props:xe}):a.selection({item:Ae,index:Ce})):void 0;if(!(ke&&!Ee))return p("div",{key:Ae.value,class:ct(["v-combobox__selection",Ce===f.value&&["v-combobox__selection--selected",g.value]]),style:Rt(Ce===f.value?w.value:{})},[T.value?a.chip?l(Rn,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:Ae.title}}},{default:()=>[Ee]}):l(hv,Fe({key:"chip",closable:e.closableChips,size:"small",text:Ae.title,disabled:Ae.props.disabled},xe),null):Ee??p("span",{class:"v-combobox__selection-text"},[Ae.title,e.multiple&&Ce<b.value.length-1&&p("span",{class:"v-combobox__selection-comma"},[O(",")])])])})]),"append-inner":function(){for(var Ae=arguments.length,Ce=new Array(Ae),De=0;De<Ae;De++)Ce[De]=arguments[De];return p(ze,null,[a["append-inner"]?.(...Ce),(!e.hideNoData||e.items.length)&&e.menuIcon?l(ya,{class:"v-combobox__menu-icon",color:s.value?.fieldIconColor,icon:e.menuIcon,onMousedown:D,onClick:N8,"aria-label":r(le.value),title:r(le.value),tabindex:"-1"},null):void 0])}})}),gs({isFocused:o,isPristine:i,menu:ie,search:S,selectionIndex:f,filteredItems:C,select:Y},s)}}),eYe=ot({modelValue:null,color:String,cancelText:{type:String,default:"$vuetify.confirmEdit.cancel"},okText:{type:String,default:"$vuetify.confirmEdit.ok"},disabled:{type:[Boolean,Array],default:void 0},hideActions:Boolean},"VConfirmEdit"),tYe=yt()({name:"VConfirmEdit",props:eYe(),emits:{cancel:()=>!0,save:e=>!0,"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const r=on(e,"modelValue"),s=M();Ar(()=>{s.value=structuredClone(gn(r.value))});const{t:o}=Pa(),i=ee(()=>ms(r.value,s.value));function c(y){return typeof e.disabled=="boolean"?e.disabled:Array.isArray(e.disabled)?e.disabled.includes(y):i.value}const A=ee(()=>c("save")),d=ee(()=>c("cancel"));function f(){r.value=s.value,n("save",s.value)}function m(){s.value=structuredClone(gn(r.value)),n("cancel")}function h(y){return p(ze,null,[l(jn,Fe({disabled:d.value,variant:"text",color:e.color,onClick:m,text:o(e.cancelText)},y),null),l(jn,Fe({disabled:A.value,variant:"text",color:e.color,onClick:f,text:o(e.okText)},y),null)])}let v=!1;return St(()=>p(ze,null,[a.default?.({model:s,save:f,cancel:m,isPristine:i.value,get actions(){return v=!0,h}}),!e.hideActions&&!v&&h()])),{save:f,cancel:m,isPristine:i}}}),y7=ot({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),_7=Symbol.for("vuetify:datatable:expanded");function ab(e){const t=qe(()=>e.expandOnClick),n=on(e,"expanded",e.expanded,i=>new Set(i),i=>[...i.values()]);function a(i,c){const A=new Set(n.value);c?A.add(i.value):A.delete(i.value),n.value=A}function r(i){return n.value.has(i.value)}function s(i){a(i,!r(i))}const o={expand:a,expanded:n,expandOnClick:t,isExpanded:r,toggleExpand:s};return Ia(_7,o),o}function w7(){const e=Sn(_7);if(!e)throw new Error("foo");return e}const x4=ot({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),b7=Symbol.for("vuetify:data-table-group");function C4(e){return{groupBy:on(e,"groupBy")}}function rb(e){const{disableSort:t,groupBy:n,sortBy:a}=e,r=M(new Set),s=ee(()=>n.value.map(d=>({...d,order:d.order??!1})).concat(t?.value?[]:a.value));function o(d){return r.value.has(d.id)}function i(d){const f=new Set(r.value);o(d)?f.delete(d.id):f.add(d.id),r.value=f}function c(d){function f(m){const h=[];for(const v of m.items)"type"in v&&v.type==="group"?h.push(...f(v)):h.push(v);return[...new Set(h)]}return f({items:d})}const A={sortByWithGroups:s,toggleGroup:i,opened:r,groupBy:n,extractRows:c,isGroupOpen:o};return Ia(b7,A),A}function x7(){const e=Sn(b7);if(!e)throw new Error("Missing group!");return e}function nYe(e,t){if(!e.length)return[];const n=new Map;for(const a of e){const r=rf(a.raw,t);n.has(r)||n.set(r,[]),n.get(r).push(a)}return n}function C7(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!t.length)return[];const r=nYe(e,t[0]),s=[],o=t.slice(1);return r.forEach((i,c)=>{const A=t[0],d=`${a}_${A}_${c}`;s.push({depth:n,id:d,key:A,value:c,items:o.length?C7(i,o,n+1,d):i,type:"group"})}),s}function S7(e,t){const n=[];for(const a of e)"type"in a&&a.type==="group"?(a.value!=null&&n.push(a),(t.has(a.id)||a.value==null)&&n.push(...S7(a.items,t))):n.push(a);return n}function sb(e,t,n){return{flatItems:ee(()=>{if(!t.value.length)return e.value;const r=C7(e.value,t.value.map(s=>s.key));return S7(r,n.value)})}}function ob(e){let{page:t,itemsPerPage:n,sortBy:a,groupBy:r,search:s}=e;const o=Er("VDataTable"),i=()=>({page:t.value,itemsPerPage:n.value,sortBy:a.value,groupBy:r.value,search:s.value});let c=null;We(i,A=>{ms(c,A)||(c&&c.search!==A.search&&(t.value=1),o.emit("update:options",A),c=A)},{deep:!0,immediate:!0})}const S4=ot({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),E7=Symbol.for("vuetify:data-table-pagination");function E4(e){const t=on(e,"page",void 0,a=>Number(a??1)),n=on(e,"itemsPerPage",void 0,a=>Number(a??10));return{page:t,itemsPerPage:n}}function B4(e){const{page:t,itemsPerPage:n,itemsLength:a}=e,r=ee(()=>n.value===-1?0:n.value*(t.value-1)),s=ee(()=>n.value===-1?a.value:Math.min(a.value,r.value+n.value)),o=ee(()=>n.value===-1||a.value===0?1:Math.ceil(a.value/n.value));We([t,o],()=>{t.value>o.value&&(t.value=o.value)});function i(m){n.value=m,t.value=1}function c(){t.value=Qa(t.value+1,1,o.value)}function A(){t.value=Qa(t.value-1,1,o.value)}function d(m){t.value=Qa(m,1,o.value)}const f={page:t,itemsPerPage:n,startIndex:r,stopIndex:s,pageCount:o,itemsLength:a,nextPage:c,prevPage:A,setPage:d,setItemsPerPage:i};return Ia(E7,f),f}function aYe(){const e=Sn(E7);if(!e)throw new Error("Missing pagination!");return e}function B7(e){const t=Er("usePaginatedItems"),{items:n,startIndex:a,stopIndex:r,itemsPerPage:s}=e,o=ee(()=>s.value<=0?n.value:n.value.slice(a.value,r.value));return We(o,i=>{t.emit("update:currentItems",i)},{immediate:!0}),{paginatedItems:o}}const rYe={showSelectAll:!1,allSelected:()=>[],select:e=>{let{items:t,value:n}=e;return new Set(n?[t[0]?.value]:[])},selectAll:e=>{let{selected:t}=e;return t}},k7={showSelectAll:!0,allSelected:e=>{let{currentPage:t}=e;return t},select:e=>{let{items:t,value:n,selected:a}=e;for(const r of t)n?a.add(r.value):a.delete(r.value);return a},selectAll:e=>{let{value:t,currentPage:n,selected:a}=e;return k7.select({items:n,value:t,selected:a})}},T7={showSelectAll:!0,allSelected:e=>{let{allItems:t}=e;return t},select:e=>{let{items:t,value:n,selected:a}=e;for(const r of t)n?a.add(r.value):a.delete(r.value);return a},selectAll:e=>{let{value:t,allItems:n,selected:a}=e;return T7.select({items:n,value:t,selected:a})}},I7=ot({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:{type:Function,default:ms}},"DataTable-select"),F7=Symbol.for("vuetify:data-table-selection");function ib(e,t){let{allItems:n,currentPage:a}=t;const r=on(e,"modelValue",e.modelValue,b=>new Set(cr(b).map(x=>n.value.find(T=>e.valueComparator(x,T.value))?.value??x)),b=>[...b.values()]),s=ee(()=>n.value.filter(b=>b.selectable)),o=ee(()=>a.value.filter(b=>b.selectable)),i=ee(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;switch(e.selectStrategy){case"single":return rYe;case"all":return T7;case"page":default:return k7}}),c=Ht(null);function A(b){return cr(b).every(x=>r.value.has(x.value))}function d(b){return cr(b).some(x=>r.value.has(x.value))}function f(b,x){const T=i.value.select({items:b,value:x,selected:new Set(r.value)});r.value=T}function m(b,x,T){const U=[];if(x=x??a.value.findIndex(k=>k.value===b.value),e.selectStrategy!=="single"&&T?.shiftKey&&c.value!==null){const[k,S]=[c.value,x].sort((E,C)=>E-C);U.push(...a.value.slice(k,S+1).filter(E=>E.selectable))}else U.push(b),c.value=x;f(U,!A([b]))}function h(b){const x=i.value.selectAll({value:b,allItems:s.value,currentPage:o.value,selected:new Set(r.value)});r.value=x}const v=ee(()=>r.value.size>0),y=ee(()=>{const b=i.value.allSelected({allItems:s.value,currentPage:o.value});return!!b.length&&A(b)}),g=qe(()=>i.value.showSelectAll),w={toggleSelect:m,select:f,selectAll:h,isSelected:A,isSomeSelected:d,someSelected:v,allSelected:y,showSelectAll:g,lastSelectedIndex:c,selectStrategy:i};return Ia(F7,w),w}function lb(){const e=Sn(F7);if(!e)throw new Error("Missing selection!");return e}const P7=ot({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),D7=Symbol.for("vuetify:data-table-sort");function ub(e){const t=on(e,"sortBy"),n=qe(()=>e.mustSort),a=qe(()=>e.multiSort);return{sortBy:t,mustSort:n,multiSort:a}}function cb(e){const{sortBy:t,mustSort:n,multiSort:a,page:r}=e,s=c=>{if(c.key==null)return;let A=t.value.map(f=>({...f}))??[];const d=A.find(f=>f.key===c.key);d?d.order==="desc"?n.value&&A.length===1?d.order="asc":A=A.filter(f=>f.key!==c.key):d.order="desc":a.value?A.push({key:c.key,order:"asc"}):A=[{key:c.key,order:"asc"}],t.value=A,r&&(r.value=1)};function o(c){return!!t.value.find(A=>A.key===c.key)}const i={sortBy:t,toggleSort:s,isSorted:o};return Ia(D7,i),i}function U7(){const e=Sn(D7);if(!e)throw new Error("Missing sort!");return e}function k4(e,t,n,a){const r=Pa();return{sortedItems:ee(()=>n.value.length?sYe(t.value,n.value,r.current.value,{transform:a?.transform,sortFunctions:{...e.customKeySort,...a?.sortFunctions?.value},sortRawFunctions:a?.sortRawFunctions?.value}):t.value)}}function sYe(e,t,n,a){const r=new Intl.Collator(n,{sensitivity:"accent",usage:"sort"});return e.map(o=>[o,a?.transform?a.transform(o):o]).sort((o,i)=>{for(let c=0;c<t.length;c++){let A=!1;const d=t[c].key,f=t[c].order??"asc";if(f===!1)continue;let m=rf(o[1],d),h=rf(i[1],d),v=o[0].raw,y=i[0].raw;if(f==="desc"&&([m,h]=[h,m],[v,y]=[y,v]),a?.sortRawFunctions?.[d]){const g=a.sortRawFunctions[d](v,y);if(g==null)continue;if(A=!0,g)return g}if(a?.sortFunctions?.[d]){const g=a.sortFunctions[d](m,h);if(g==null)continue;if(A=!0,g)return g}if(!A&&(m instanceof Date&&h instanceof Date&&(m=m.getTime(),h=h.getTime()),[m,h]=[m,h].map(g=>g!=null?g.toString().toLocaleLowerCase():g),m!==h))return M1(m)&&M1(h)?0:M1(m)?-1:M1(h)?1:!isNaN(m)&&!isNaN(h)?Number(m)-Number(h):r.compare(m,h)}return 0}).map(o=>{let[i]=o;return i})}const oYe=ot({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},returnObject:Boolean},"DataIterator-items");function iYe(e,t){const n=e.returnObject?t:Fr(t,e.itemValue),a=Fr(t,e.itemSelectable,!0);return{type:"item",value:n,selectable:a,raw:t}}function lYe(e,t){const n=[];for(const a of t)n.push(iYe(e,a));return n}function uYe(e){return{items:ee(()=>lYe(e,e.items))}}const cYe=ot({search:String,loading:Boolean,...en(),...oYe(),...I7(),...P7(),...S4({itemsPerPage:5}),...y7(),...x4(),...pv(),...Un(),...Jl({transition:{component:M0,hideOnLeave:!0}})},"VDataIterator"),dYe=yt()({name:"VDataIterator",props:cYe(),emits:{"update:modelValue":e=>!0,"update:groupBy":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,t){let{slots:n}=t;const a=on(e,"groupBy"),r=qe(()=>e.search),{items:s}=uYe(e),{filteredItems:o}=gv(e,s,r,{transform:G=>G.raw}),{sortBy:i,multiSort:c,mustSort:A}=ub(e),{page:d,itemsPerPage:f}=E4(e),{toggleSort:m}=cb({sortBy:i,multiSort:c,mustSort:A,page:d}),{sortByWithGroups:h,opened:v,extractRows:y,isGroupOpen:g,toggleGroup:w}=rb({groupBy:a,sortBy:i}),{sortedItems:b}=k4(e,o,h,{transform:G=>G.raw}),{flatItems:x}=sb(b,a,v),T=qe(()=>x.value.length),{startIndex:U,stopIndex:k,pageCount:S,prevPage:E,nextPage:C,setItemsPerPage:P,setPage:F}=B4({page:d,itemsPerPage:f,itemsLength:T}),{paginatedItems:N}=B7({items:x,startIndex:U,stopIndex:k,itemsPerPage:f}),L=ee(()=>y(N.value)),{isSelected:ie,select:le,selectAll:Q,toggleSelect:Z}=ib(e,{allItems:s,currentPage:L}),{isExpanded:ce,toggleExpand:J}=ab(e);ob({page:d,itemsPerPage:f,sortBy:i,groupBy:a,search:r});const se=ee(()=>({page:d.value,itemsPerPage:f.value,sortBy:i.value,pageCount:S.value,toggleSort:m,prevPage:E,nextPage:C,setPage:F,setItemsPerPage:P,isSelected:ie,select:le,selectAll:Q,toggleSelect:Z,isExpanded:ce,toggleExpand:J,isGroupOpen:g,toggleGroup:w,items:L.value,groupedItems:N.value}));return St(()=>l(e.tag,{class:ct(["v-data-iterator",{"v-data-iterator--loading":e.loading},e.class]),style:Rt(e.style)},{default:()=>[n.header?.(se.value),l(mo,{transition:e.transition},{default:()=>[e.loading?l(kg,{key:"loader",name:"v-data-iterator",active:!0},{default:G=>n.loader?.(G)}):p("div",{key:"items"},[N.value.length?n.default?.(se.value):n["no-data"]?.()])]}),n.footer?.(se.value)]})),{}}});function AYe(){const e=M([]);KL(()=>e.value=[]);function t(n,a){e.value[a]=n}return{refs:e,updateRef:t}}const fYe=ot({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:un,default:"$first"},prevIcon:{type:un,default:"$prev"},nextIcon:{type:un,default:"$next"},lastIcon:{type:un,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...$o(),...en(),...rs(),...Wr(),...tr(),...Ou(),...Un({tag:"nav"}),...aa(),...tl({variant:"text"})},"VPagination"),AB=yt()({name:"VPagination",props:fYe(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,t){let{slots:n,emit:a}=t;const r=on(e,"modelValue"),{t:s,n:o}=Pa(),{isRtl:i}=Kr(),{themeClasses:c}=wa(e),{width:A}=Ji(),d=Ht(-1);fr(void 0,{scoped:!0});const{resizeRef:f}=Rl(E=>{if(!E.length)return;const{target:C,contentRect:P}=E[0],F=C.querySelector(".v-pagination__list > *");if(!F)return;const N=P.width,L=F.offsetWidth+parseFloat(getComputedStyle(F).marginRight)*2;d.value=y(N,L)}),m=ee(()=>parseInt(e.length,10)),h=ee(()=>parseInt(e.start,10)),v=ee(()=>e.totalVisible!=null?parseInt(e.totalVisible,10):d.value>=0?d.value:y(A.value,58));function y(E,C){const P=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(Number(((E-C*P)/C).toFixed(2))))}const g=ee(()=>{if(m.value<=0||isNaN(m.value)||m.value>Number.MAX_SAFE_INTEGER)return[];if(v.value<=0)return[];if(v.value===1)return[r.value];if(m.value<=v.value)return yi(m.value,h.value);const E=v.value%2===0,C=E?v.value/2:Math.floor(v.value/2),P=E?C:C+1,F=m.value-C;if(P-r.value>=0)return[...yi(Math.max(1,v.value-1),h.value),e.ellipsis,m.value];if(r.value-F>=(E?1:0)){const N=v.value-1,L=m.value-N+h.value;return[h.value,e.ellipsis,...yi(N,L)]}else{const N=Math.max(1,v.value-2),L=N===1?r.value:r.value-Math.ceil(N/2)+h.value;return[h.value,e.ellipsis,...yi(N,L),e.ellipsis,m.value]}});function w(E,C,P){E.preventDefault(),r.value=C,P&&a(P,C)}const{refs:b,updateRef:x}=AYe();fr({VPaginationBtn:{color:qe(()=>e.color),border:qe(()=>e.border),density:qe(()=>e.density),size:qe(()=>e.size),variant:qe(()=>e.variant),rounded:qe(()=>e.rounded),elevation:qe(()=>e.elevation)}});const T=ee(()=>g.value.map((E,C)=>{const P=F=>x(F,C);if(typeof E=="string")return{isActive:!1,key:`ellipsis-${C}`,page:E,props:{ref:P,ellipsis:!0,icon:!0,disabled:!0}};{const F=E===r.value;return{isActive:F,key:E,page:o(E),props:{ref:P,ellipsis:!1,icon:!0,disabled:!!e.disabled||Number(e.length)<2,color:F?e.activeColor:e.color,"aria-current":F,"aria-label":s(F?e.currentPageAriaLabel:e.pageAriaLabel,E),onClick:N=>w(N,E)}}}})),U=ee(()=>{const E=!!e.disabled||r.value<=h.value,C=!!e.disabled||r.value>=h.value+m.value-1;return{first:e.showFirstLastPage?{icon:i.value?e.lastIcon:e.firstIcon,onClick:P=>w(P,h.value,"first"),disabled:E,"aria-label":s(e.firstAriaLabel),"aria-disabled":E}:void 0,prev:{icon:i.value?e.nextIcon:e.prevIcon,onClick:P=>w(P,r.value-1,"prev"),disabled:E,"aria-label":s(e.previousAriaLabel),"aria-disabled":E},next:{icon:i.value?e.prevIcon:e.nextIcon,onClick:P=>w(P,r.value+1,"next"),disabled:C,"aria-label":s(e.nextAriaLabel),"aria-disabled":C},last:e.showFirstLastPage?{icon:i.value?e.firstIcon:e.lastIcon,onClick:P=>w(P,h.value+m.value-1,"last"),disabled:C,"aria-label":s(e.lastAriaLabel),"aria-disabled":C}:void 0}});function k(){const E=r.value-h.value;b.value[E]?.$el.focus()}function S(E){E.key===bS.left&&!e.disabled&&r.value>Number(e.start)?(r.value=r.value-1,bn(k)):E.key===bS.right&&!e.disabled&&r.value<h.value+m.value-1&&(r.value=r.value+1,bn(k))}return St(()=>l(e.tag,{ref:f,class:ct(["v-pagination",c.value,e.class]),style:Rt(e.style),role:"navigation","aria-label":s(e.ariaLabel),onKeydown:S,"data-test":"v-pagination-root"},{default:()=>[p("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&p("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[n.first?n.first(U.value.first):l(jn,Fe({_as:"VPaginationBtn"},U.value.first),null)]),p("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[n.prev?n.prev(U.value.prev):l(jn,Fe({_as:"VPaginationBtn"},U.value.prev),null)]),T.value.map((E,C)=>p("li",{key:E.key,class:ct(["v-pagination__item",{"v-pagination__item--is-active":E.isActive}]),"data-test":"v-pagination-item"},[n.item?n.item(E):l(jn,Fe({_as:"VPaginationBtn"},E.props),{default:()=>[E.page]})])),p("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[n.next?n.next(U.value.next):l(jn,Fe({_as:"VPaginationBtn"},U.value.next),null)]),e.showFirstLastPage&&p("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[n.last?n.last(U.value.last):l(jn,Fe({_as:"VPaginationBtn"},U.value.last),null)])])]})),{}}}),T4=ot({prevIcon:{type:un,default:"$prev"},nextIcon:{type:un,default:"$next"},firstIcon:{type:un,default:"$first"},lastIcon:{type:un,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),W0=yt()({name:"VDataTableFooter",props:T4(),setup(e,t){let{slots:n}=t;const{t:a}=Pa(),{page:r,pageCount:s,startIndex:o,stopIndex:i,itemsLength:c,itemsPerPage:A,setItemsPerPage:d}=aYe(),f=ee(()=>e.itemsPerPageOptions.map(m=>typeof m=="number"?{value:m,title:m===-1?a("$vuetify.dataFooter.itemsPerPageAll"):String(m)}:{...m,title:isNaN(Number(m.title))?a(m.title):m.title}));return St(()=>{const m=AB.filterProps(e);return p("div",{class:"v-data-table-footer"},[n.prepend?.(),p("div",{class:"v-data-table-footer__items-per-page"},[p("span",{"aria-label":a(e.itemsPerPageText)},[a(e.itemsPerPageText)]),l(_4,{items:f.value,modelValue:A.value,"onUpdate:modelValue":h=>d(Number(h)),density:"compact",variant:"outlined",hideDetails:!0},null)]),p("div",{class:"v-data-table-footer__info"},[p("div",null,[a(e.pageText,c.value?o.value+1:0,i.value,c.value)])]),p("div",{class:"v-data-table-footer__pagination"},[l(AB,Fe({modelValue:r.value,"onUpdate:modelValue":h=>r.value=h,density:"comfortable",firstAriaLabel:e.firstPageLabel,lastAriaLabel:e.lastPageLabel,length:s.value,nextAriaLabel:e.nextPageLabel,previousAriaLabel:e.prevPageLabel,rounded:!0,showFirstLastPage:!0,totalVisible:e.showCurrentPage?1:0,variant:"plain"},m),null)])])}),{}}}),E2=Vte({align:{type:String,default:"start"},fixed:{type:[Boolean,String],default:!1},fixedOffset:[Number,String],fixedEndOffset:[Number,String],height:[Number,String],lastFixed:Boolean,firstFixedEnd:Boolean,noPadding:Boolean,tag:String,width:[Number,String],maxWidth:[Number,String],nowrap:Boolean},(e,t)=>{let{slots:n}=t;const a=e.tag??"td",r=typeof e.fixed=="string"?e.fixed:e.fixed?"start":"none";return l(a,{class:ct(["v-data-table__td",{"v-data-table-column--fixed":r==="start","v-data-table-column--fixed-end":r==="end","v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--first-fixed-end":e.firstFixedEnd,"v-data-table-column--no-padding":e.noPadding,"v-data-table-column--nowrap":e.nowrap},`v-data-table-column--align-${e.align}`]),style:{height:jt(e.height),width:jt(e.width),maxWidth:jt(e.maxWidth),left:r==="start"?jt(e.fixedOffset||null):void 0,right:r==="end"?jt(e.fixedEndOffset||null):void 0}},{default:()=>[n.default?.()]})}),mYe=ot({headers:Array},"DataTable-header"),R7=Symbol.for("vuetify:data-table-headers"),N7={title:"",sortable:!1},hYe={...N7,width:48};function vYe(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).map(n=>({element:n,priority:0}));return{enqueue:(n,a)=>{let r=!1;for(let s=0;s<t.length;s++)if(t[s].priority>a){t.splice(s,0,{element:n,priority:a}),r=!0;break}r||t.push({element:n,priority:a})},size:()=>t.length,count:()=>{let n=0;if(!t.length)return 0;const a=Math.floor(t[0].priority);for(let r=0;r<t.length;r++)Math.floor(t[r].priority)===a&&(n+=1);return n},dequeue:()=>t.shift()}}function fB(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!e.children)t.push(e);else for(const n of e.children)fB(n,t);return t}function V7(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set;for(const n of e)n.key&&t.add(n.key),n.children&&V7(n.children,t);return t}function pYe(e){if(e.key){if(e.key==="data-table-group")return N7;if(["data-table-expand","data-table-select"].includes(e.key))return hYe}}function I4(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.children?Math.max(t,...e.children.map(n=>I4(n,t+1))):t}function gYe(e){let t=!1;function n(s,o){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"none";if(s)if(i!=="none"&&(s.fixed=i),s.fixed===!0&&(s.fixed="start"),s.fixed===o)if(s.children)if(o==="start")for(let c=s.children.length-1;c>=0;c--)n(s.children[c],o,o);else for(let c=0;c<s.children.length;c++)n(s.children[c],o,o);else!t&&o==="start"?s.lastFixed=!0:!t&&o==="end"?s.firstFixedEnd=!0:isNaN(Number(s.width))?(`${s.key}`,void 0):s.minWidth=Math.max(Number(s.width)||0,Number(s.minWidth)||0),t=!0;else if(s.children)if(o==="start")for(let c=s.children.length-1;c>=0;c--)n(s.children[c],o);else for(let c=0;c<s.children.length;c++)n(s.children[c],o);else t=!1}for(let s=e.length-1;s>=0;s--)n(e[s],"start");for(let s=0;s<e.length;s++)n(e[s],"end");let a=0;for(let s=0;s<e.length;s++)a=L7(e[s],a);let r=0;for(let s=e.length-1;s>=0;s--)r=M7(e[s],r)}function L7(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e)return t;if(e.children){e.fixedOffset=t;for(const n of e.children)t=L7(n,t)}else e.fixed&&e.fixed!=="end"&&(e.fixedOffset=t,t+=parseFloat(e.width||"0")||0);return t}function M7(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e)return t;if(e.children){e.fixedEndOffset=t;for(const n of e.children)t=M7(n,t)}else e.fixed==="end"&&(e.fixedEndOffset=t,t+=parseFloat(e.width||"0")||0);return t}function yYe(e,t){const n=[];let a=0;const r=vYe(e);for(;r.size()>0;){let o=r.count();const i=[];let c=1;for(;o>0;){const{element:A,priority:d}=r.dequeue(),f=t-a-I4(A);if(i.push({...A,rowspan:f??1,colspan:A.children?fB(A).length:1}),A.children)for(const m of A.children){const h=d%1+c/Math.pow(10,a+2);r.enqueue(m,a+f+h)}c+=1,o-=1}a+=1,n.push(i)}return{columns:e.map(o=>fB(o)).flat(),headers:n}}function O7(e){const t=[];for(const n of e){const a={...pYe(n),...n},r=a.key??(typeof a.value=="string"?a.value:null),s=a.value??r??null,o={...a,key:r,value:s,sortable:a.sortable??(a.key!=null||!!a.sort),children:a.children?O7(a.children):void 0};t.push(o)}return t}function F4(e,t){const n=M([]),a=M([]),r=M({}),s=M({}),o=M({});Ar(()=>{const A=(e.headers||Object.keys(e.items[0]??{}).map(y=>({key:y,title:Pu(y)}))).slice(),d=V7(A);t?.groupBy?.value.length&&!d.has("data-table-group")&&A.unshift({key:"data-table-group",title:"Group"}),t?.showSelect?.value&&!d.has("data-table-select")&&A.unshift({key:"data-table-select"}),t?.showExpand?.value&&!d.has("data-table-expand")&&A.push({key:"data-table-expand"});const f=O7(A);gYe(f);const m=Math.max(...f.map(y=>I4(y)))+1,h=yYe(f,m);n.value=h.headers,a.value=h.columns;const v=h.headers.flat(1);for(const y of v)y.key&&(y.sortable&&(y.sort&&(r.value[y.key]=y.sort),y.sortRaw&&(s.value[y.key]=y.sortRaw)),y.filter&&(o.value[y.key]=y.filter))});const i={headers:n,columns:a,sortFunctions:r,sortRawFunctions:s,filterFunctions:o};return Ia(R7,i),i}function db(){const e=Sn(R7);if(!e)throw new Error("Missing headers!");return e}const H7=ot({color:String,disableSort:Boolean,fixedHeader:Boolean,multiSort:Boolean,sortAscIcon:{type:un,default:"$sortAsc"},sortDescIcon:{type:un,default:"$sortDesc"},headerProps:{type:Object},sticky:Boolean,...kf(),...qw()},"VDataTableHeaders"),gf=yt()({name:"VDataTableHeaders",props:H7(),setup(e,t){let{slots:n}=t;const{t:a}=Pa(),{toggleSort:r,sortBy:s,isSorted:o}=U7(),{someSelected:i,allSelected:c,selectAll:A,showSelectAll:d}=lb(),{columns:f,headers:m}=db(),{loaderClasses:h}=Bg(e);function v(C,P){if(!(e.sticky||e.fixedHeader)&&!C.fixed)return;const F=typeof C.fixed=="string"?C.fixed:C.fixed?"start":"none";return{position:"sticky",left:F==="start"?jt(C.fixedOffset):void 0,right:F==="end"?jt(C.fixedEndOffset):void 0,top:e.sticky||e.fixedHeader?`calc(var(--v-table-header-height) * ${P})`:void 0}}function y(C,P){C.key==="Enter"&&!e.disableSort&&r(P)}function g(C){const P=s.value.find(F=>F.key===C.key);return P?P.order==="asc"?e.sortAscIcon:e.sortDescIcon:e.sortAscIcon}const{backgroundColorClasses:w,backgroundColorStyles:b}=Ca(()=>e.color),{displayClasses:x,mobile:T}=Ji(e),U=ee(()=>({headers:m.value,columns:f.value,toggleSort:r,isSorted:o,sortBy:s.value,someSelected:i.value,allSelected:c.value,selectAll:A,getSortIcon:g})),k=ee(()=>["v-data-table__th",{"v-data-table__th--sticky":e.sticky||e.fixedHeader},x.value,h.value]),S=C=>{let{column:P,x:F,y:N}=C;const L=P.key==="data-table-select"||P.key==="data-table-expand",ie=Fe(e.headerProps??{},P.headerProps??{});return l(E2,Fe({tag:"th",align:P.align,class:[{"v-data-table__th--sortable":P.sortable&&!e.disableSort,"v-data-table__th--sorted":o(P),"v-data-table__th--fixed":P.fixed},...k.value],style:{width:jt(P.width),minWidth:jt(P.minWidth),maxWidth:jt(P.maxWidth),...v(P,N)},colspan:P.colspan,rowspan:P.rowspan,fixed:P.fixed,nowrap:P.nowrap,lastFixed:P.lastFixed,firstFixedEnd:P.firstFixedEnd,noPadding:L,tabindex:P.sortable?0:void 0,onClick:P.sortable?()=>r(P):void 0,onKeydown:P.sortable?le=>y(le,P):void 0},ie),{default:()=>{const le=`header.${P.key}`,Q={column:P,selectAll:A,isSorted:o,toggleSort:r,sortBy:s.value,someSelected:i.value,allSelected:c.value,getSortIcon:g};return n[le]?n[le](Q):P.key==="data-table-select"?n["header.data-table-select"]?.(Q)??(d.value&&l(Tu,{modelValue:c.value,indeterminate:i.value&&!c.value,"onUpdate:modelValue":A},null)):p("div",{class:"v-data-table-header__content"},[p("span",null,[P.title]),P.sortable&&!e.disableSort&&l(ya,{key:"icon",class:"v-data-table-header__sort-icon",icon:g(P)},null),e.multiSort&&o(P)&&p("div",{key:"badge",class:ct(["v-data-table-header__sort-badge",...w.value]),style:Rt(b.value)},[s.value.findIndex(Z=>Z.key===P.key)+1])])}})},E=()=>{const C=ee(()=>f.value.filter(F=>F?.sortable&&!e.disableSort)),P=ee(()=>{if(f.value.find(N=>N.key==="data-table-select")!=null)return c.value?"$checkboxOn":i.value?"$checkboxIndeterminate":"$checkboxOff"});return l(E2,Fe({tag:"th",class:[...k.value],colspan:m.value.length+1},e.headerProps),{default:()=>[p("div",{class:"v-data-table-header__content"},[l(_4,{chips:!0,class:"v-data-table__td-sort-select",clearable:!0,density:"default",items:C.value,label:a("$vuetify.dataTable.sortBy"),multiple:e.multiSort,variant:"underlined","onClick:clear":()=>s.value=[],appendIcon:P.value,"onClick:append":()=>A(!c.value)},{chip:F=>l(hv,{onClick:F.item.raw?.sortable?()=>r(F.item.raw):void 0,onMousedown:N=>{N.preventDefault(),N.stopPropagation()}},{default:()=>[F.item.title,l(ya,{class:ct(["v-data-table__td-sort-icon",o(F.item.raw)&&"v-data-table__td-sort-icon-active"]),icon:g(F.item.raw),size:"small"},null)]})})])]})};St(()=>T.value?p("tr",null,[l(E,null,null)]):p(ze,null,[n.headers?n.headers(U.value):m.value.map((C,P)=>p("tr",null,[C.map((F,N)=>l(S,{column:F,x:N,y:P},null))])),e.loading&&p("tr",{class:"v-data-table-progress"},[p("th",{colspan:f.value.length},[l(kg,{name:"v-data-table-progress",absolute:!0,active:!0,color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0},{default:n.loader})])])]))}}),_Ye=ot({item:{type:Object,required:!0}},"VDataTableGroupHeaderRow"),wYe=yt()({name:"VDataTableGroupHeaderRow",props:_Ye(),setup(e,t){let{slots:n}=t;const{isGroupOpen:a,toggleGroup:r,extractRows:s}=x7(),{isSelected:o,isSomeSelected:i,select:c}=lb(),{columns:A}=db(),d=ee(()=>s([e.item]));return()=>p("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[A.value.map(f=>{if(f.key==="data-table-group"){const m=a(e.item)?"$expand":"$next",h=()=>r(e.item);return n["data-table-group"]?.({item:e.item,count:d.value.length,props:{icon:m,onClick:h}})??l(E2,{class:"v-data-table-group-header-row__column"},{default:()=>[l(jn,{size:"small",variant:"text",icon:m,onClick:h},null),p("span",null,[e.item.value]),p("span",null,[O("("),d.value.length,O(")")])]})}if(f.key==="data-table-select"){const m=o(d.value),h=i(d.value)&&!m,v=y=>c(d.value,y);return n["data-table-select"]?.({props:{modelValue:m,indeterminate:h,"onUpdate:modelValue":v}})??p("td",null,[l(Tu,{modelValue:m,indeterminate:h,"onUpdate:modelValue":v},null)])}return p("td",null,null)})])}}),bYe=ot({index:Number,item:Object,cellProps:[Object,Function],onClick:Ts(),onContextmenu:Ts(),onDblclick:Ts(),...kf()},"VDataTableRow"),P4=yt()({name:"VDataTableRow",props:bYe(),setup(e,t){let{slots:n}=t;const{displayClasses:a,mobile:r}=Ji(e,"v-data-table__tr"),{isSelected:s,toggleSelect:o,someSelected:i,allSelected:c,selectAll:A}=lb(),{isExpanded:d,toggleExpand:f}=w7(),{toggleSort:m,sortBy:h,isSorted:v}=U7(),{columns:y}=db();St(()=>p("tr",{class:ct(["v-data-table__tr",{"v-data-table__tr--clickable":!!(e.onClick||e.onContextmenu||e.onDblclick)},a.value]),onClick:e.onClick,onContextmenu:e.onContextmenu,onDblclick:e.onDblclick},[e.item&&y.value.map((g,w)=>{const b=e.item,x=`item.${g.key}`,T=`header.${g.key}`,U={index:e.index,item:b.raw,internalItem:b,value:rf(b.columns,g.key),column:g,isSelected:s,toggleSelect:o,isExpanded:d,toggleExpand:f},k={column:g,selectAll:A,isSorted:v,toggleSort:m,sortBy:h.value,someSelected:i.value,allSelected:c.value,getSortIcon:()=>""},S=typeof e.cellProps=="function"?e.cellProps({index:U.index,item:U.item,internalItem:U.internalItem,value:U.value,column:g}):e.cellProps,E=typeof g.cellProps=="function"?g.cellProps({index:U.index,item:U.item,internalItem:U.internalItem,value:U.value}):g.cellProps;return l(E2,Fe({align:g.align,class:{"v-data-table__td--expanded-row":g.key==="data-table-expand","v-data-table__td--select-row":g.key==="data-table-select"},fixed:g.fixed,fixedOffset:g.fixedOffset,fixedEndOffset:g.fixedEndOffset,lastFixed:g.lastFixed,firstFixedEnd:g.firstFixedEnd,maxWidth:r.value?void 0:g.maxWidth,noPadding:g.key==="data-table-select"||g.key==="data-table-expand",nowrap:g.nowrap,width:r.value?void 0:g.width},S,E),{default:()=>{if(g.key==="data-table-select")return n["item.data-table-select"]?.({...U,props:{disabled:!b.selectable,modelValue:s([b]),onClick:mn(()=>o(b),["stop"])}})??l(Tu,{disabled:!b.selectable,modelValue:s([b]),onClick:mn(P=>o(b,e.index,P),["stop"])},null);if(g.key==="data-table-expand")return n["item.data-table-expand"]?.({...U,props:{icon:d(b)?"$collapse":"$expand",size:"small",variant:"text",onClick:mn(()=>f(b),["stop"])}})??l(jn,{icon:d(b)?"$collapse":"$expand",size:"small",variant:"text",onClick:mn(()=>f(b),["stop"])},null);if(n[x]&&!r.value)return n[x](U);const C=q(U.value);return r.value?p(ze,null,[p("div",{class:"v-data-table__td-title"},[n[T]?.(k)??g.title]),p("div",{class:"v-data-table__td-value"},[n[x]?.(U)??C])]):C}})})]))}}),$7=ot({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowProps:[Object,Function],cellProps:[Object,Function],...kf()},"VDataTableRows"),yf=yt()({name:"VDataTableRows",inheritAttrs:!1,props:$7(),setup(e,t){let{attrs:n,slots:a}=t;const{columns:r}=db(),{expandOnClick:s,toggleExpand:o,isExpanded:i}=w7(),{isSelected:c,toggleSelect:A}=lb(),{toggleGroup:d,isGroupOpen:f}=x7(),{t:m}=Pa(),{mobile:h}=Ji(e);return St(()=>e.loading&&(!e.items.length||a.loading)?p("tr",{class:"v-data-table-rows-loading",key:"loading"},[p("td",{colspan:r.value.length},[a.loading?.()??m(e.loadingText)])]):!e.loading&&!e.items.length&&!e.hideNoData?p("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[p("td",{colspan:r.value.length},[a["no-data"]?.()??m(e.noDataText)])]):p(ze,null,[e.items.map((v,y)=>{if(v.type==="group"){const b={index:y,item:v,columns:r.value,isExpanded:i,toggleExpand:o,isSelected:c,toggleSelect:A,toggleGroup:d,isGroupOpen:f};return a["group-header"]?a["group-header"](b):l(wYe,Fe({key:`group-header_${v.id}`,item:v},uD(n,":group-header",()=>b)),a)}const g={index:y,item:v.raw,internalItem:v,columns:r.value,isExpanded:i,toggleExpand:o,isSelected:c,toggleSelect:A},w={...g,props:Fe({key:`item_${v.key??v.index}`,onClick:s.value?()=>{o(v)}:void 0,index:y,item:v,cellProps:e.cellProps,mobile:h.value},uD(n,":row",()=>g),typeof e.rowProps=="function"?e.rowProps({item:g.item,index:g.index,internalItem:g.internalItem}):e.rowProps)};return p(ze,{key:w.props.key},[a.item?a.item(w):l(P4,w.props,a),i(v)&&a["expanded-row"]?.(g)])})])),{}}}),Q7=ot({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,striped:{type:String,default:null,validator:e=>["even","odd"].includes(e)},...en(),...rs(),...Un(),...aa()},"VTable"),_f=yt()({name:"VTable",props:Q7(),setup(e,t){let{slots:n,emit:a}=t;const{themeClasses:r}=wa(e),{densityClasses:s}=xo(e);return St(()=>{const o={VCheckboxBtn:{density:e.density}};return l(e.tag,{class:ct(["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!n.top,"v-table--has-bottom":!!n.bottom,"v-table--hover":e.hover,"v-table--striped-even":e.striped==="even","v-table--striped-odd":e.striped==="odd"},r.value,s.value,e.class]),style:Rt(e.style)},{default:()=>[n.top?.(),l(Rn,{defaults:o},{default:()=>[n.default?p("div",{class:"v-table__wrapper",style:{height:jt(e.height)}},[p("table",null,[n.default()])]):n.wrapper?.()]}),n.bottom?.()]})}),{}}}),xYe=ot({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function CYe(e,t,n,a){const r=e.returnObject?t:Fr(t,e.itemValue),s=Fr(t,e.itemSelectable,!0),o=a.reduce((i,c)=>(c.key!=null&&(i[c.key]=Fr(t,c.value)),i),{});return{type:"item",key:e.returnObject?Fr(t,e.itemValue):r,index:n,value:r,selectable:s,columns:o,raw:t}}function SYe(e,t,n){return t.map((a,r)=>CYe(e,a,r,n))}function D4(e,t){return{items:ee(()=>SYe(e,e.items,t.value))}}const U4=ot({...$7(),hideDefaultBody:Boolean,hideDefaultFooter:Boolean,hideDefaultHeader:Boolean,width:[String,Number],search:String,...y7(),...x4(),...mYe(),...xYe(),...I7(),...P7(),...H7(),...Q7()},"DataTable"),EYe=ot({...S4(),...U4(),...pv(),...T4()},"VDataTable"),BYe=yt()({name:"VDataTable",props:EYe(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const{groupBy:r}=C4(e),{sortBy:s,multiSort:o,mustSort:i}=ub(e),{page:c,itemsPerPage:A}=E4(e),{disableSort:d}=Ef(e),{columns:f,headers:m,sortFunctions:h,sortRawFunctions:v,filterFunctions:y}=F4(e,{groupBy:r,showSelect:qe(()=>e.showSelect),showExpand:qe(()=>e.showExpand)}),{items:g}=D4(e,f),w=qe(()=>e.search),{filteredItems:b}=gv(e,g,w,{transform:Y=>Y.columns,customKeyFilter:y}),{toggleSort:x}=cb({sortBy:s,multiSort:o,mustSort:i,page:c}),{sortByWithGroups:T,opened:U,extractRows:k,isGroupOpen:S,toggleGroup:E}=rb({groupBy:r,sortBy:s,disableSort:d}),{sortedItems:C}=k4(e,b,T,{transform:Y=>({...Y.raw,...Y.columns}),sortFunctions:h,sortRawFunctions:v}),{flatItems:P}=sb(C,r,U),F=ee(()=>P.value.length),{startIndex:N,stopIndex:L,pageCount:ie,setItemsPerPage:le}=B4({page:c,itemsPerPage:A,itemsLength:F}),{paginatedItems:Q}=B7({items:P,startIndex:N,stopIndex:L,itemsPerPage:A}),Z=ee(()=>k(Q.value)),{isSelected:ce,select:J,selectAll:se,toggleSelect:G,someSelected:D,allSelected:j}=ib(e,{allItems:g,currentPage:Z}),{isExpanded:ne,toggleExpand:H}=ab(e);ob({page:c,itemsPerPage:A,sortBy:s,groupBy:r,search:w}),fr({VDataTableRows:{hideNoData:qe(()=>e.hideNoData),noDataText:qe(()=>e.noDataText),loading:qe(()=>e.loading),loadingText:qe(()=>e.loadingText)}});const te=ee(()=>({page:c.value,itemsPerPage:A.value,sortBy:s.value,pageCount:ie.value,toggleSort:x,setItemsPerPage:le,someSelected:D.value,allSelected:j.value,isSelected:ce,select:J,selectAll:se,toggleSelect:G,isExpanded:ne,toggleExpand:H,isGroupOpen:S,toggleGroup:E,items:Z.value.map(Y=>Y.raw),internalItems:Z.value,groupedItems:Q.value,columns:f.value,headers:m.value}));return St(()=>{const Y=W0.filterProps(e),K=gf.filterProps(e),X=yf.filterProps(e),ae=_f.filterProps(e);return l(_f,Fe({class:["v-data-table",{"v-data-table--show-select":e.showSelect,"v-data-table--loading":e.loading},e.class],style:e.style},ae,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>a.top?.(te.value),default:()=>a.default?a.default(te.value):p(ze,null,[a.colgroup?.(te.value),!e.hideDefaultHeader&&p("thead",{key:"thead"},[l(gf,K,a)]),a.thead?.(te.value),!e.hideDefaultBody&&p("tbody",null,[a["body.prepend"]?.(te.value),a.body?a.body(te.value):l(yf,Fe(n,X,{items:Q.value}),a),a["body.append"]?.(te.value)]),a.tbody?.(te.value),a.tfoot?.(te.value)]),bottom:()=>a.bottom?a.bottom(te.value):!e.hideDefaultFooter&&p(ze,null,[l(bi,null,null),l(W0,Y,{prepend:a["footer.prepend"]})])})}),{}}}),kYe=ot({...Fa(U4(),["hideDefaultFooter"]),...x4(),...ZQ(),...pv()},"VDataTableVirtual"),TYe=yt()({name:"VDataTableVirtual",props:kYe(),emits:{"update:modelValue":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const{groupBy:r}=C4(e),{sortBy:s,multiSort:o,mustSort:i}=ub(e),{disableSort:c}=Ef(e),{columns:A,headers:d,filterFunctions:f,sortFunctions:m,sortRawFunctions:h}=F4(e,{groupBy:r,showSelect:qe(()=>e.showSelect),showExpand:qe(()=>e.showExpand)}),{items:v}=D4(e,A),y=qe(()=>e.search),{filteredItems:g}=gv(e,v,y,{transform:ae=>ae.columns,customKeyFilter:f}),{toggleSort:w}=cb({sortBy:s,multiSort:o,mustSort:i}),{sortByWithGroups:b,opened:x,extractRows:T,isGroupOpen:U,toggleGroup:k}=rb({groupBy:r,sortBy:s,disableSort:c}),{sortedItems:S}=k4(e,g,b,{transform:ae=>({...ae.raw,...ae.columns}),sortFunctions:m,sortRawFunctions:h}),{flatItems:E}=sb(S,r,x),C=ee(()=>T(E.value)),{isSelected:P,select:F,selectAll:N,toggleSelect:L,someSelected:ie,allSelected:le}=ib(e,{allItems:C,currentPage:C}),{isExpanded:Q,toggleExpand:Z}=ab(e),{containerRef:ce,markerRef:J,paddingTop:se,paddingBottom:G,computedItems:D,handleItemResize:j,handleScroll:ne,handleScrollend:H,calculateVisibleItems:te,scrollToIndex:Y}=e7(e,E),K=ee(()=>D.value.map(ae=>ae.raw));ob({sortBy:s,page:Ht(1),itemsPerPage:Ht(-1),groupBy:r,search:y}),fr({VDataTableRows:{hideNoData:qe(()=>e.hideNoData),noDataText:qe(()=>e.noDataText),loading:qe(()=>e.loading),loadingText:qe(()=>e.loadingText)}});const X=ee(()=>({sortBy:s.value,toggleSort:w,someSelected:ie.value,allSelected:le.value,isSelected:P,select:F,selectAll:N,toggleSelect:L,isExpanded:Q,toggleExpand:Z,isGroupOpen:U,toggleGroup:k,items:C.value.map(ae=>ae.raw),internalItems:C.value,groupedItems:E.value,columns:A.value,headers:d.value}));return St(()=>{const ae=gf.filterProps(e),oe=yf.filterProps(e),W=_f.filterProps(e);return l(_f,Fe({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},W,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>a.top?.(X.value),wrapper:()=>p("div",{ref:ce,onScrollPassive:ne,onScrollend:H,class:"v-table__wrapper",style:{height:jt(e.height)}},[p("table",null,[a.colgroup?.(X.value),!e.hideDefaultHeader&&p("thead",{key:"thead"},[l(gf,ae,a)]),a.thead?.(X.value),!e.hideDefaultBody&&p("tbody",{key:"tbody"},[p("tr",{ref:J,style:{height:jt(se.value),border:0}},[p("td",{colspan:A.value.length,style:{height:0,border:0}},null)]),a["body.prepend"]?.(X.value),l(yf,Fe(n,oe,{items:K.value}),{...a,item:de=>l(JQ,{key:de.internalItem.index,renderless:!0,"onUpdate:height":Ae=>j(de.internalItem.index,Ae)},{default:Ae=>{let{itemRef:Ce}=Ae;return a.item?.({...de,itemRef:Ce})??l(P4,Fe(de.props,{ref:Ce,key:de.internalItem.index,index:de.internalItem.index}),a)}})}),a["body.append"]?.(X.value),p("tr",{style:{height:jt(G.value),border:0}},[p("td",{colspan:A.value.length,style:{height:0,border:0}},null)])]),a.tbody?.(X.value),a.tfoot?.(X.value)])]),bottom:()=>a.bottom?.(X.value)})}),{calculateVisibleItems:te,scrollToIndex:Y}}}),IYe=ot({itemsLength:{type:[Number,String],required:!0},...S4(),...U4(),...T4()},"VDataTableServer"),FYe=yt()({name:"VDataTableServer",props:IYe(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:groupBy":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const{groupBy:r}=C4(e),{sortBy:s,multiSort:o,mustSort:i}=ub(e),{page:c,itemsPerPage:A}=E4(e),{disableSort:d}=Ef(e),f=ee(()=>parseInt(e.itemsLength,10)),{columns:m,headers:h}=F4(e,{groupBy:r,showSelect:qe(()=>e.showSelect),showExpand:qe(()=>e.showExpand)}),{items:v}=D4(e,m),{toggleSort:y}=cb({sortBy:s,multiSort:o,mustSort:i,page:c}),{opened:g,isGroupOpen:w,toggleGroup:b,extractRows:x}=rb({groupBy:r,sortBy:s,disableSort:d}),{pageCount:T,setItemsPerPage:U}=B4({page:c,itemsPerPage:A,itemsLength:f}),{flatItems:k}=sb(v,r,g),{isSelected:S,select:E,selectAll:C,toggleSelect:P,someSelected:F,allSelected:N}=ib(e,{allItems:v,currentPage:v}),{isExpanded:L,toggleExpand:ie}=ab(e),le=ee(()=>x(v.value));ob({page:c,itemsPerPage:A,sortBy:s,groupBy:r,search:qe(()=>e.search)}),Ia("v-data-table",{toggleSort:y,sortBy:s}),fr({VDataTableRows:{hideNoData:qe(()=>e.hideNoData),noDataText:qe(()=>e.noDataText),loading:qe(()=>e.loading),loadingText:qe(()=>e.loadingText)}});const Q=ee(()=>({page:c.value,itemsPerPage:A.value,sortBy:s.value,pageCount:T.value,toggleSort:y,setItemsPerPage:U,someSelected:F.value,allSelected:N.value,isSelected:S,select:E,selectAll:C,toggleSelect:P,isExpanded:L,toggleExpand:ie,isGroupOpen:w,toggleGroup:b,items:le.value.map(Z=>Z.raw),internalItems:le.value,groupedItems:k.value,columns:m.value,headers:h.value}));St(()=>{const Z=W0.filterProps(e),ce=gf.filterProps(e),J=yf.filterProps(e),se=_f.filterProps(e);return l(_f,Fe({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},se,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>a.top?.(Q.value),default:()=>a.default?a.default(Q.value):p(ze,null,[a.colgroup?.(Q.value),!e.hideDefaultHeader&&p("thead",{key:"thead",class:"v-data-table__thead",role:"rowgroup"},[l(gf,ce,a)]),a.thead?.(Q.value),!e.hideDefaultBody&&p("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[a["body.prepend"]?.(Q.value),a.body?a.body(Q.value):l(yf,Fe(n,J,{items:k.value}),a),a["body.append"]?.(Q.value)]),a.tbody?.(Q.value),a.tfoot?.(Q.value)]),bottom:()=>a.bottom?a.bottom(Q.value):!e.hideDefaultFooter&&p(ze,null,[l(bi,null,null),l(W0,Z,{prepend:a["footer.prepend"]})])})})}}),PYe=ot({fluid:{type:Boolean,default:!1},...en(),...Ur(),...Un()},"VContainer"),DYe=yt()({name:"VContainer",props:PYe(),setup(e,t){let{slots:n}=t;const{rtlClasses:a}=Kr(),{dimensionStyles:r}=Rr(e);return St(()=>l(e.tag,{class:ct(["v-container",{"v-container--fluid":e.fluid},a.value,e.class]),style:Rt([r.value,e.style])},n)),{}}}),G7=aw.reduce((e,t)=>(e[t]={type:[Boolean,String,Number],default:!1},e),{}),z7=aw.reduce((e,t)=>{const n="offset"+Pu(t);return e[n]={type:[String,Number],default:null},e},{}),K7=aw.reduce((e,t)=>{const n="order"+Pu(t);return e[n]={type:[String,Number],default:null},e},{}),UN={col:Object.keys(G7),offset:Object.keys(z7),order:Object.keys(K7)};function UYe(e,t,n){let a=e;if(!(n==null||n===!1)){if(t){const r=t.replace(e,"");a+=`-${r}`}return e==="col"&&(a="v-"+a),e==="col"&&(n===""||n===!0)||(a+=`-${n}`),a.toLowerCase()}}const RYe=["auto","start","end","center","baseline","stretch"],NYe=ot({cols:{type:[Boolean,String,Number],default:!1},...G7,offset:{type:[String,Number],default:null},...z7,order:{type:[String,Number],default:null},...K7,alignSelf:{type:String,default:null,validator:e=>RYe.includes(e)},...en(),...Un()},"VCol"),VYe=yt()({name:"VCol",props:NYe(),setup(e,t){let{slots:n}=t;const a=ee(()=>{const r=[];let s;for(s in UN)UN[s].forEach(i=>{const c=e[i],A=UYe(s,i,c);A&&r.push(A)});const o=r.some(i=>i.startsWith("v-col-"));return r.push({"v-col":!o||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),r});return()=>Wl(e.tag,{class:[a.value,e.class],style:e.style},n.default?.())}}),R4=["start","end","center"],W7=["space-between","space-around","space-evenly"];function N4(e,t){return aw.reduce((n,a)=>{const r=e+Pu(a);return n[r]=t(),n},{})}const LYe=[...R4,"baseline","stretch"],j7=e=>LYe.includes(e),q7=N4("align",()=>({type:String,default:null,validator:j7})),MYe=[...R4,...W7],Y7=e=>MYe.includes(e),X7=N4("justify",()=>({type:String,default:null,validator:Y7})),OYe=[...R4,...W7,"stretch"],J7=e=>OYe.includes(e),Z7=N4("alignContent",()=>({type:String,default:null,validator:J7})),RN={align:Object.keys(q7),justify:Object.keys(X7),alignContent:Object.keys(Z7)},HYe={align:"align",justify:"justify",alignContent:"align-content"};function $Ye(e,t,n){let a=HYe[e];if(n!=null){if(t){const r=t.replace(e,"");a+=`-${r}`}return a+=`-${n}`,a.toLowerCase()}}const QYe=ot({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:j7},...q7,justify:{type:String,default:null,validator:Y7},...X7,alignContent:{type:String,default:null,validator:J7},...Z7,...en(),...Un()},"VRow"),GYe=yt()({name:"VRow",props:QYe(),setup(e,t){let{slots:n}=t;const a=ee(()=>{const r=[];let s;for(s in RN)RN[s].forEach(o=>{const i=e[o],c=$Ye(s,o,i);c&&r.push(c)});return r.push({"v-row--no-gutters":e.noGutters,"v-row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),r});return()=>Wl(e.tag,{class:["v-row",a.value,e.class],style:e.style},n.default?.())}}),eG=Dc("v-spacer","div","VSpacer"),tG=ot({active:{type:[String,Array],default:void 0},controlHeight:[Number,String],disabled:{type:[Boolean,String,Array],default:null},nextIcon:{type:un,default:"$next"},prevIcon:{type:un,default:"$prev"},modeIcon:{type:un,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),mB=yt()({name:"VDatePickerControls",props:tG(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,t){let{emit:n}=t;const{t:a}=Pa(),r=ee(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),s=ee(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),o=ee(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),i=ee(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function c(){n("click:prev")}function A(){n("click:next")}function d(){n("click:year")}function f(){n("click:month")}return St(()=>p("div",{class:ct(["v-date-picker-controls"]),style:{"--v-date-picker-controls-height":jt(e.controlHeight)}},[l(jn,{class:"v-date-picker-controls__month-btn","data-testid":"month-btn",disabled:r.value,text:e.text,variant:"text",rounded:!0,onClick:f},null),l(jn,{class:"v-date-picker-controls__mode-btn","data-testid":"year-btn",disabled:s.value,density:"comfortable",icon:e.modeIcon,variant:"text","aria-label":a("$vuetify.datePicker.ariaLabel.selectYear"),onClick:d},null),l(eG,null,null),p("div",{class:"v-date-picker-controls__month"},[l(jn,{"data-testid":"prev-month",disabled:o.value,density:"comfortable",icon:e.prevIcon,variant:"text","aria-label":a("$vuetify.datePicker.ariaLabel.previousMonth"),onClick:c},null),l(jn,{"data-testid":"next-month",disabled:i.value,icon:e.nextIcon,density:"comfortable",variant:"text","aria-label":a("$vuetify.datePicker.ariaLabel.nextMonth"),onClick:A},null)])])),{}}}),zYe=ot({appendIcon:un,color:String,header:String,transition:String,onClick:Ts()},"VDatePickerHeader"),hB=yt()({name:"VDatePickerHeader",props:zYe(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,t){let{emit:n,slots:a}=t;const{backgroundColorClasses:r,backgroundColorStyles:s}=Ca(()=>e.color);function o(){n("click")}function i(){n("click:append")}return St(()=>{const c=!!(a.default||e.header),A=!!(a.append||e.appendIcon);return p("div",{class:ct(["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},r.value]),style:Rt(s.value),onClick:o},[a.prepend&&p("div",{key:"prepend",class:"v-date-picker-header__prepend"},[a.prepend()]),c&&l(mo,{key:"content",name:e.transition},{default:()=>[p("div",{key:e.header,class:"v-date-picker-header__content"},[a.default?.()??e.header])]}),A&&p("div",{class:"v-date-picker-header__append"},[a.append?l(Rn,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>[a.append?.()]}):l(jn,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:i},null)])])}),{}}}),KYe=ot({allowedDates:[Array,Function],disabled:{type:Boolean,default:null},displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]},weeksInMonth:{type:String,default:"dynamic"},firstDayOfWeek:{type:[Number,String],default:void 0},weekdayFormat:String},"calendar");function WYe(e){const t=rg(),n=on(e,"modelValue",[],h=>cr(h).map(v=>t.date(v))),a=ee(()=>e.displayValue?t.date(e.displayValue):n.value.length>0?t.date(n.value[0]):e.min?t.date(e.min):Array.isArray(e.allowedDates)?t.date(e.allowedDates[0]):t.date()),r=on(e,"year",void 0,h=>{const v=h!=null?Number(h):t.getYear(a.value);return t.startOfYear(t.setYear(t.date(),v))},h=>t.getYear(h)),s=on(e,"month",void 0,h=>{const v=h!=null?Number(h):t.getMonth(a.value),y=t.setYear(t.startOfMonth(t.date()),t.getYear(r.value));return t.setMonth(y,v)},h=>t.getMonth(h)),o=ee(()=>{const h=t.toJsDate(t.startOfWeek(t.date(),e.firstDayOfWeek)).getDay();return t.getWeekdays(e.firstDayOfWeek,e.weekdayFormat).filter((v,y)=>e.weekdays.includes((y+h)%7))}),i=ee(()=>{const h=t.getWeekArray(s.value,e.firstDayOfWeek),v=h.flat(),y=42;if(e.weeksInMonth==="static"&&v.length<y){const g=v[v.length-1];let w=[];for(let b=1;b<=y-v.length;b++)w.push(t.addDays(g,b)),b%7===0&&(h.push(w),w=[])}return h});function c(h,v){return h.filter(y=>e.weekdays.includes(t.toJsDate(y).getDay())).map((y,g)=>{const w=t.toISO(y),b=!t.isSameMonth(y,s.value),x=t.isSameDay(y,t.startOfMonth(s.value)),T=t.isSameDay(y,t.endOfMonth(s.value)),U=t.isSameDay(y,s.value),k=e.weekdays.length;return{date:y,formatted:t.format(y,"keyboardDate"),isAdjacent:b,isDisabled:m(y),isEnd:T,isHidden:b&&!e.showAdjacentMonths,isSame:U,isSelected:n.value.some(S=>t.isSameDay(y,S)),isStart:x,isToday:t.isSameDay(y,v),isWeekEnd:g%k===k-1,isWeekStart:g%k===0,isoDate:w,localized:t.format(y,"dayOfMonth"),month:t.getMonth(y),year:t.getYear(y)}})}const A=ee(()=>{const h=t.startOfWeek(a.value,e.firstDayOfWeek),v=[];for(let g=0;g<=6;g++)v.push(t.addDays(h,g));const y=t.date();return c(v,y)}),d=ee(()=>{const h=i.value.flat(),v=t.date();return c(h,v)}),f=ee(()=>i.value.map(h=>h.length?t.getWeek(h[0],e.firstDayOfWeek):null));function m(h){if(e.disabled)return!0;const v=t.date(h);return e.min&&t.isBefore(t.endOfDay(v),t.date(e.min))||e.max&&t.isAfter(v,t.date(e.max))?!0:Array.isArray(e.allowedDates)&&e.allowedDates.length>0?!e.allowedDates.some(y=>t.isSameDay(t.date(y),v)):typeof e.allowedDates=="function"?!e.allowedDates(v):!1}return{displayValue:a,daysInMonth:d,daysInWeek:A,genDays:c,model:n,weeksInMonth:i,weekdayLabels:o,weekNumbers:f}}const nG=ot({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...Fa(KYe(),["displayValue"])},"VDatePickerMonth"),vB=yt()({name:"VDatePickerMonth",props:nG(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const r=M(),{t:s}=Pa(),{daysInMonth:o,model:i,weekNumbers:c,weekdayLabels:A}=WYe(e),d=rg(),f=Ht(),m=Ht(),h=Ht(!1),v=qe(()=>h.value?e.reverseTransition:e.transition);e.multiple==="range"&&i.value.length>0&&(f.value=i.value[0],i.value.length>1&&(m.value=i.value[i.value.length-1]));const y=ee(()=>{const T=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return i.value.length>=T});We(o,(T,U)=>{U&&(h.value=d.isBefore(T[0].date,U[0].date))});function g(T){const U=d.startOfDay(T);if(i.value.length===0?f.value=void 0:i.value.length===1&&(f.value=i.value[0],m.value=void 0),!f.value)f.value=U,i.value=[f.value];else if(m.value)f.value=T,m.value=void 0,i.value=[f.value];else{if(d.isSameDay(U,f.value)){f.value=void 0,i.value=[];return}else d.isBefore(U,f.value)?(m.value=d.endOfDay(f.value),f.value=U):m.value=d.endOfDay(U);i.value=Dne(d,f.value,m.value)}}function w(T){const U=d.format(T.date,"fullDateWithWeekday"),k=T.isToday?"currentDate":"selectDate";return s(`$vuetify.datePicker.ariaLabel.${k}`,U)}function b(T){const U=i.value.findIndex(k=>d.isSameDay(k,T));if(U===-1)i.value=[...i.value,T];else{const k=[...i.value];k.splice(U,1),i.value=k}}function x(T){e.multiple==="range"?g(T):e.multiple?b(T):i.value=[T]}St(()=>p("div",{class:"v-date-picker-month",style:{"--v-date-picker-days-in-week":e.weekdays.length}},[e.showWeek&&p("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&p("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[O("")]),c.value.map(T=>p("div",{class:ct(["v-date-picker-month__day","v-date-picker-month__day--adjacent"])},[T]))]),l(mo,{name:v.value},{default:()=>[p("div",{ref:r,key:o.value[0].date?.toString(),class:"v-date-picker-month__days"},[!e.hideWeekdays&&A.value.map(T=>p("div",{class:ct(["v-date-picker-month__day","v-date-picker-month__weekday"])},[T])),o.value.map((T,U)=>{const k={props:{class:"v-date-picker-month__day-btn",color:T.isSelected||T.isToday?e.color:void 0,disabled:T.isDisabled,icon:!0,ripple:!1,text:T.localized,variant:T.isSelected?"flat":T.isToday?"outlined":"text","aria-label":w(T),"aria-current":T.isToday?"date":void 0,onClick:()=>x(T.date)},item:T,i:U};return y.value&&!T.isSelected&&(T.isDisabled=!0),p("div",{class:ct(["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":T.isAdjacent,"v-date-picker-month__day--hide-adjacent":T.isHidden,"v-date-picker-month__day--selected":T.isSelected,"v-date-picker-month__day--week-end":T.isWeekEnd,"v-date-picker-month__day--week-start":T.isWeekStart}]),"data-v-date":T.isDisabled?void 0:T.isoDate},[(e.showAdjacentMonths||!T.isAdjacent)&&(a.day?.(k)??l(jn,k.props,null))])})])]})]))}}),aG=ot({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number,allowedMonths:[Array,Function]},"VDatePickerMonths"),pB=yt()({name:"VDatePickerMonths",props:aG(),emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const r=rg(),s=on(e,"modelValue"),o=ee(()=>{let c=r.startOfYear(r.date());return e.year&&(c=r.setYear(c,e.year)),yi(12).map(A=>{const d=r.format(c,"monthShort"),f=r.format(c,"month"),m=!!(!i(A)||e.min&&r.isAfter(r.startOfMonth(r.date(e.min)),c)||e.max&&r.isAfter(c,r.startOfMonth(r.date(e.max))));return c=r.getNextMonth(c),{isDisabled:m,text:d,label:f,value:A}})});Ar(()=>{s.value=s.value??r.getMonth(r.date())});function i(c){return Array.isArray(e.allowedMonths)&&e.allowedMonths.length?e.allowedMonths.includes(c):typeof e.allowedMonths=="function"?e.allowedMonths(c):!0}return St(()=>p("div",{class:"v-date-picker-months",style:{height:jt(e.height)}},[p("div",{class:"v-date-picker-months__content"},[o.value.map((c,A)=>{const d={active:s.value===A,ariaLabel:c.label,color:s.value===A?e.color:void 0,disabled:c.isDisabled,rounded:!0,text:c.text,variant:s.value===c.value?"flat":"text",onClick:()=>f(A)};function f(m){if(s.value===m){n("update:modelValue",s.value);return}s.value=m}return a.month?.({month:c,i:A,props:d})??l(jn,Fe({key:"month"},d),null)})])])),{}}}),rG=ot({color:String,height:[String,Number],min:null,max:null,modelValue:Number,allowedYears:[Array,Function]},"VDatePickerYears"),gB=yt()({name:"VDatePickerYears",props:rG(),directives:{vIntersect:Ol},emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const r=rg(),s=on(e,"modelValue"),o=ee(()=>{const d=r.getYear(r.date());let f=d-100,m=d+52;e.min&&(f=r.getYear(r.date(e.min))),e.max&&(m=r.getYear(r.date(e.max)));let h=r.startOfYear(r.date());return h=r.setYear(h,f),yi(m-f+1,f).map(v=>{const y=r.format(h,"year");return h=r.setYear(h,r.getYear(h)+1),{text:y,value:v,isDisabled:!A(v)}})});Ar(()=>{s.value=s.value??r.getYear(r.date())});const i=x_();function c(){i.el?.focus(),i.el?.scrollIntoView({block:"center"})}function A(d){return Array.isArray(e.allowedYears)&&e.allowedYears.length?e.allowedYears.includes(d):typeof e.allowedYears=="function"?e.allowedYears(d):!0}return St(()=>Aa(p("div",{class:"v-date-picker-years",style:{height:jt(e.height)}},[p("div",{class:"v-date-picker-years__content"},[o.value.map((d,f)=>{const m={ref:s.value===d.value?i:void 0,active:s.value===d.value,color:s.value===d.value?e.color:void 0,rounded:!0,text:d.text,disabled:d.isDisabled,variant:s.value===d.value?"flat":"text",onClick:()=>{if(s.value===d.value){n("update:modelValue",s.value);return}s.value=d.value}};return a.year?.({year:d,i:f,props:m})??l(jn,Fe({key:"month"},m),null)})])]),[[Ol,{handler:c},null,{once:!0}]])),{}}}),jYe=ot({header:{type:String,default:"$vuetify.datePicker.header"},headerColor:String,...tG(),...nG({weeksInMonth:"static"}),...Fa(aG(),["modelValue"]),...Fa(rG(),["modelValue"]),...nb({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),qYe=yt()({name:"VDatePicker",props:jYe(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const r=rg(),{t:s}=Pa(),{rtlClasses:o}=Kr(),i=on(e,"modelValue",void 0,ce=>cr(ce).map(J=>r.date(J)),ce=>e.multiple?ce:ce[0]),c=on(e,"viewMode"),A=ee(()=>{const ce=r.date(e.min);return e.min&&r.isValid(ce)?ce:null}),d=ee(()=>{const ce=r.date(e.max);return e.max&&r.isValid(ce)?ce:null}),f=ee(()=>{const ce=r.date();let J=ce;return i.value?.[0]?J=r.date(i.value[0]):A.value&&r.isBefore(ce,A.value)?J=A.value:d.value&&r.isAfter(ce,d.value)&&(J=d.value),J&&r.isValid(J)?J:ce}),m=qe(()=>e.headerColor??e.color),h=on(e,"month"),v=ee({get:()=>Number(h.value??r.getMonth(r.startOfMonth(f.value))),set:ce=>h.value=ce}),y=on(e,"year"),g=ee({get:()=>Number(y.value??r.getYear(r.startOfYear(r.setMonth(f.value,v.value)))),set:ce=>y.value=ce}),w=Ht(!1),b=ee(()=>e.multiple&&i.value.length>1?s("$vuetify.datePicker.itemsSelected",i.value.length):i.value[0]&&r.isValid(i.value[0])?r.format(r.date(i.value[0]),"normalDateWithWeekday"):s(e.header)),x=ee(()=>{let ce=r.date();return ce=r.setDate(ce,1),ce=r.setMonth(ce,v.value),ce=r.setYear(ce,g.value),r.format(ce,"monthAndYear")}),T=qe(()=>`date-picker-header${w.value?"-reverse":""}-transition`),U=ee(()=>{if(e.disabled)return!0;const ce=[];if(c.value!=="month")ce.push("prev","next");else{let J=r.date();if(J=r.startOfMonth(J),J=r.setMonth(J,v.value),J=r.setYear(J,g.value),A.value){const se=r.addDays(r.startOfMonth(J),-1);r.isAfter(A.value,se)&&ce.push("prev")}if(d.value){const se=r.addDays(r.endOfMonth(J),1);r.isAfter(se,d.value)&&ce.push("next")}}return ce}),k=ee(()=>e.allowedYears||C),S=ee(()=>e.allowedMonths||P);function E(ce,J){const se=e.allowedDates;if(typeof se!="function")return!0;const G=r.getDiff(J,ce,"days");for(let D=0;D<G;D++)if(se(r.addDays(ce,D)))return!0;return!1}function C(ce){if(typeof e.allowedDates=="function"){const J=r.parseISO(`${ce}-01-01`);return E(J,r.endOfYear(J))}if(Array.isArray(e.allowedDates)&&e.allowedDates.length){for(const J of e.allowedDates)if(r.getYear(r.date(J))===ce)return!0;return!1}return!0}function P(ce){if(typeof e.allowedDates=="function"){const J=String(ce+1).padStart(2,"0"),se=r.parseISO(`${g.value}-${J}-01`);return E(se,r.endOfMonth(se))}if(Array.isArray(e.allowedDates)&&e.allowedDates.length){for(const J of e.allowedDates)if(r.getYear(r.date(J))===g.value&&r.getMonth(r.date(J))===ce)return!0;return!1}return!0}function F(){v.value<11?v.value++:(g.value++,v.value=0,Z()),Q()}function N(){v.value>0?v.value--:(g.value--,v.value=11,Z()),Q()}function L(){c.value="month"}function ie(){c.value=c.value==="months"?"month":"months"}function le(){c.value=c.value==="year"?"month":"year"}function Q(){c.value==="months"&&ie()}function Z(){c.value==="year"&&le()}return We(i,(ce,J)=>{const se=cr(J),G=cr(ce);if(!G.length)return;const D=r.date(se[se.length-1]),j=r.date(G[G.length-1]),ne=r.getMonth(j),H=r.getYear(j);ne!==v.value&&(v.value=ne,Q()),H!==g.value&&(g.value=H,Z()),w.value=r.isBefore(D,j)}),St(()=>{const ce=Lh.filterProps(e),J=mB.filterProps(e),se=hB.filterProps(e),G=vB.filterProps(e),D=Fa(pB.filterProps(e),["modelValue"]),j=Fa(gB.filterProps(e),["modelValue"]),ne={color:m.value,header:b.value,transition:T.value};return l(Lh,Fe(ce,{color:m.value,class:["v-date-picker",`v-date-picker--${c.value}`,{"v-date-picker--show-week":e.showWeek},o.value,e.class],style:e.style}),{title:()=>a.title?.()??p("div",{class:"v-date-picker__title"},[s(e.title)]),header:()=>a.header?l(Rn,{defaults:{VDatePickerHeader:{...ne}}},{default:()=>[a.header?.(ne)]}):l(hB,Fe({key:"header"},se,ne,{onClick:c.value!=="month"?L:void 0}),{prepend:a.prepend,append:a.append}),default:()=>p(ze,null,[l(mB,Fe(J,{disabled:U.value,text:x.value,"onClick:next":F,"onClick:prev":N,"onClick:month":ie,"onClick:year":le}),null),l(M0,{hideOnLeave:!0},{default:()=>[c.value==="months"?l(pB,Fe({key:"date-picker-months"},D,{modelValue:v.value,"onUpdate:modelValue":[H=>v.value=H,Q],min:A.value,max:d.value,year:g.value,allowedMonths:S.value}),{month:a.month}):c.value==="year"?l(gB,Fe({key:"date-picker-years"},j,{modelValue:g.value,"onUpdate:modelValue":[H=>g.value=H,Z],min:A.value,max:d.value,allowedYears:k.value}),{year:a.year}):l(vB,Fe({key:"date-picker-month"},G,{modelValue:i.value,"onUpdate:modelValue":H=>i.value=H,month:v.value,"onUpdate:month":[H=>v.value=H,Q],year:g.value,"onUpdate:year":[H=>g.value=H,Z],min:A.value,max:d.value}),{day:a.day})]})]),actions:a.actions})}),{}}}),YYe=ot({actionText:String,bgColor:String,color:String,icon:un,image:String,justify:{type:String,default:"center"},headline:String,title:String,text:String,textWidth:{type:[Number,String],default:500},href:String,to:String,...en(),...Ur(),...Ou({size:void 0}),...aa()},"VEmptyState"),XYe=yt()({name:"VEmptyState",props:YYe(),emits:{"click:action":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const{themeClasses:r}=wa(e),{backgroundColorClasses:s,backgroundColorStyles:o}=Ca(()=>e.bgColor),{dimensionStyles:i}=Rr(e),{displayClasses:c}=Ji();function A(d){n("click:action",d)}return St(()=>{const d=!!(a.actions||e.actionText),f=!!(a.headline||e.headline),m=!!(a.title||e.title),h=!!(a.text||e.text),v=!!(a.media||e.image||e.icon),y=e.size||(e.image?200:96);return p("div",{class:ct(["v-empty-state",{[`v-empty-state--${e.justify}`]:!0},r.value,s.value,c.value,e.class]),style:Rt([o.value,i.value,e.style])},[v&&p("div",{key:"media",class:"v-empty-state__media"},[a.media?l(Rn,{key:"media-defaults",defaults:{VImg:{src:e.image,height:y},VIcon:{size:y,icon:e.icon}}},{default:()=>[a.media()]}):p(ze,null,[e.image?l(Tc,{key:"image",src:e.image,height:y},null):e.icon?l(ya,{key:"icon",color:e.color,size:y,icon:e.icon},null):void 0])]),f&&p("div",{key:"headline",class:"v-empty-state__headline"},[a.headline?.()??e.headline]),m&&p("div",{key:"title",class:"v-empty-state__title"},[a.title?.()??e.title]),h&&p("div",{key:"text",class:"v-empty-state__text",style:{maxWidth:jt(e.textWidth)}},[a.text?.()??e.text]),a.default&&p("div",{key:"content",class:"v-empty-state__content"},[a.default()]),d&&p("div",{key:"actions",class:"v-empty-state__actions"},[l(Rn,{defaults:{VBtn:{class:"v-empty-state__action-btn",color:e.color??"surface-variant",href:e.href,text:e.actionText,to:e.to}}},{default:()=>[a.actions?.({props:{onClick:A}})??l(jn,{onClick:A},null)]})])])}),{}}}),j0=Symbol.for("vuetify:v-expansion-panel"),sG=ot({...en(),...v4()},"VExpansionPanelText"),yB=yt()({name:"VExpansionPanelText",props:sG(),setup(e,t){let{slots:n}=t;const a=Sn(j0);if(!a)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:r,onAfterLeave:s}=p4(e,a.isSelected);return St(()=>l(Ww,{onAfterLeave:s},{default:()=>[Aa(p("div",{class:ct(["v-expansion-panel-text",e.class]),style:Rt(e.style)},[n.default&&r.value&&p("div",{class:"v-expansion-panel-text__wrapper"},[n.default?.()])]),[[ai,a.isSelected.value]])]})),{}}}),oG=ot({color:String,expandIcon:{type:un,default:"$expand"},collapseIcon:{type:un,default:"$collapse"},hideActions:Boolean,focusable:Boolean,static:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...en(),...Ur()},"VExpansionPanelTitle"),_B=yt()({name:"VExpansionPanelTitle",directives:{vRipple:wo},props:oG(),setup(e,t){let{slots:n}=t;const a=Sn(j0);if(!a)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:r,backgroundColorStyles:s}=Ca(()=>e.color),{dimensionStyles:o}=Rr(e),i=ee(()=>({collapseIcon:e.collapseIcon,disabled:a.disabled.value,expanded:a.isSelected.value,expandIcon:e.expandIcon,readonly:e.readonly})),c=qe(()=>a.isSelected.value?e.collapseIcon:e.expandIcon);return St(()=>Aa(p("button",{class:ct(["v-expansion-panel-title",{"v-expansion-panel-title--active":a.isSelected.value,"v-expansion-panel-title--focusable":e.focusable,"v-expansion-panel-title--static":e.static},r.value,e.class]),style:Rt([s.value,o.value,e.style]),type:"button",tabindex:a.disabled.value?-1:void 0,disabled:a.disabled.value,"aria-expanded":a.isSelected.value,onClick:e.readonly?void 0:a.toggle},[p("span",{class:"v-expansion-panel-title__overlay"},null),n.default?.(i.value),!e.hideActions&&l(Rn,{defaults:{VIcon:{icon:c.value}}},{default:()=>[p("span",{class:"v-expansion-panel-title__icon"},[n.actions?.(i.value)??l(ya,null,null)])]})]),[[wo,e.ripple]])),{}}}),iG=ot({title:String,text:String,bgColor:String,...Wr(),...Hf(),...tr(),...Un(),...oG(),...sG()},"VExpansionPanel"),JYe=yt()({name:"VExpansionPanel",props:iG(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const a=$f(e,j0),{backgroundColorClasses:r,backgroundColorStyles:s}=Ca(()=>e.bgColor),{elevationClasses:o}=ps(e),{roundedClasses:i}=hr(e),c=qe(()=>a?.disabled.value||e.disabled),A=ee(()=>a.group.items.value.reduce((m,h,v)=>(a.group.selected.value.includes(h.id)&&m.push(v),m),[])),d=ee(()=>{const m=a.group.items.value.findIndex(h=>h.id===a.id);return!a.isSelected.value&&A.value.some(h=>h-m===1)}),f=ee(()=>{const m=a.group.items.value.findIndex(h=>h.id===a.id);return!a.isSelected.value&&A.value.some(h=>h-m===-1)});return Ia(j0,a),St(()=>{const m=!!(n.text||e.text),h=!!(n.title||e.title),v=_B.filterProps(e),y=yB.filterProps(e);return l(e.tag,{class:ct(["v-expansion-panel",{"v-expansion-panel--active":a.isSelected.value,"v-expansion-panel--before-active":d.value,"v-expansion-panel--after-active":f.value,"v-expansion-panel--disabled":c.value},i.value,r.value,e.class]),style:Rt([s.value,e.style])},{default:()=>[p("div",{class:ct(["v-expansion-panel__shadow",...o.value])},null),l(Rn,{defaults:{VExpansionPanelTitle:{...v},VExpansionPanelText:{...y}}},{default:()=>[h&&l(_B,{key:"title"},{default:()=>[n.title?n.title():e.title]}),m&&l(yB,{key:"text"},{default:()=>[n.text?n.text():e.text]}),n.default?.()]})]})}),{groupItem:a}}}),ZYe=["default","accordion","inset","popout"],eXe=ot({flat:Boolean,...Of(),...Pc(iG(),["bgColor","collapseIcon","color","eager","elevation","expandIcon","focusable","hideActions","readonly","ripple","rounded","tile","static"]),...aa(),...en(),...Un(),variant:{type:String,default:"default",validator:e=>ZYe.includes(e)}},"VExpansionPanels"),tXe=yt()({name:"VExpansionPanels",props:eXe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{next:a,prev:r}=Jd(e,j0),{themeClasses:s}=wa(e),o=qe(()=>e.variant&&`v-expansion-panels--variant-${e.variant}`);return fr({VExpansionPanel:{bgColor:qe(()=>e.bgColor),collapseIcon:qe(()=>e.collapseIcon),color:qe(()=>e.color),eager:qe(()=>e.eager),elevation:qe(()=>e.elevation),expandIcon:qe(()=>e.expandIcon),focusable:qe(()=>e.focusable),hideActions:qe(()=>e.hideActions),readonly:qe(()=>e.readonly),ripple:qe(()=>e.ripple),rounded:qe(()=>e.rounded),static:qe(()=>e.static)}}),St(()=>l(e.tag,{class:ct(["v-expansion-panels",{"v-expansion-panels--flat":e.flat,"v-expansion-panels--tile":e.tile},s.value,o.value,e.class]),style:Rt(e.style)},{default:()=>[n.default?.({prev:r,next:a})]})),{next:a,prev:r}}}),nXe=ot({app:Boolean,appear:Boolean,extended:Boolean,layout:Boolean,offset:Boolean,modelValue:{type:Boolean,default:!0},...Fa(Yw({active:!0}),["location"]),...Tf(),...Nc(),...Jl({transition:"fab-transition"})},"VFab"),aXe=yt()({name:"VFab",props:nXe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=on(e,"modelValue"),r=Ht(56),s=M(),{resizeRef:o}=Rl(f=>{f.length&&(r.value=f[0].target.clientHeight)}),i=qe(()=>e.app||e.absolute),c=ee(()=>i.value?e.location?.split(" ").shift()??"bottom":!1),A=ee(()=>i.value?e.location?.split(" ")[1]??"end":!1);vo(()=>e.app,()=>{const f=If({id:e.name,order:ee(()=>parseInt(e.order,10)),position:c,layoutSize:ee(()=>e.layout?r.value+24:0),elementSize:ee(()=>r.value+24),active:ee(()=>e.app&&a.value),absolute:qe(()=>e.absolute)});Ar(()=>{s.value=f.layoutItemStyles.value})});const d=M();return St(()=>{const f=jn.filterProps(e);return p("div",{ref:d,class:ct(["v-fab",{"v-fab--absolute":e.absolute,"v-fab--app":!!e.app,"v-fab--extended":e.extended,"v-fab--offset":e.offset,[`v-fab--${c.value}`]:i.value,[`v-fab--${A.value}`]:i.value},e.class]),style:Rt([e.app?{...s.value}:{height:e.absolute?"100%":"inherit"},e.style])},[p("div",{class:"v-fab__container"},[l(mo,{appear:e.appear,transition:e.transition},{default:()=>[Aa(l(jn,Fe({ref:o},f,{active:void 0,location:void 0}),n),[[ai,e.active]])]})])])}),{}}});function rXe(){function e(n){return[...n.dataTransfer?.items??[]].filter(r=>r.kind==="file").map(r=>r.webkitGetAsEntry()).filter(Boolean).length>0||[...n.dataTransfer?.files??[]].length>0}async function t(n){const a=[],r=[...n.dataTransfer?.items??[]].filter(s=>s.kind==="file").map(s=>s.webkitGetAsEntry()).filter(Boolean);if(r.length)for(const s of r){const o=await lG(s,uG(".",s));a.push(...o.map(i=>i.file))}else a.push(...n.dataTransfer?.files??[]);return a}return{handleDrop:t,hasFilesOrFolders:e}}function lG(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new Promise((n,a)=>{e.isFile?e.file(s=>n([{file:s,path:t}]),a):e.isDirectory&&e.createReader().readEntries(async s=>{const o=[];for(const i of s)o.push(...await lG(i,uG(t,i)));n(o)})})}function uG(e,t){return t.isDirectory?`${e}/${t.name}`:e}const sXe=ot({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},...Lc({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>cr(e).every(t=>t!=null&&typeof t=="object")},...Ug({clearable:!0})},"VFileInput"),oXe=yt()({name:"VFileInput",inheritAttrs:!1,props:sXe(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:r}=t;const{t:s}=Pa(),o=on(e,"modelValue",e.modelValue,le=>cr(le),le=>!e.multiple&&Array.isArray(le)?le[0]:le),{isFocused:i,focus:c,blur:A}=Vc(e),d=ee(()=>typeof e.showSize!="boolean"?e.showSize:void 0),f=ee(()=>(o.value??[]).reduce((le,Q)=>{let{size:Z=0}=Q;return le+Z},0)),m=ee(()=>jP(f.value,d.value)),h=ee(()=>(o.value??[]).map(le=>{const{name:Q="",size:Z=0}=le;return e.showSize?`${Q} (${jP(Z,d.value)})`:Q})),v=ee(()=>{const le=o.value?.length??0;return e.showSize?s(e.counterSizeString,le,m.value):s(e.counterString,le)}),y=M(),g=M(),w=M(),b=qe(()=>i.value||e.active),x=ee(()=>["plain","underlined"].includes(e.variant)),T=Ht(!1),{handleDrop:U,hasFilesOrFolders:k}=rXe();function S(){w.value!==document.activeElement&&w.value?.focus(),i.value||c()}function E(le){w.value?.click()}function C(le){a("mousedown:control",le)}function P(le){w.value?.click(),a("click:control",le)}function F(le){le.stopPropagation(),S(),bn(()=>{o.value=[],tw(e["onClick:clear"],le)})}function N(le){le.preventDefault(),le.stopImmediatePropagation(),T.value=!0}function L(le){le.preventDefault(),T.value=!1}async function ie(le){if(le.preventDefault(),le.stopImmediatePropagation(),T.value=!1,!w.value||!k(le))return;const Q=new DataTransfer;for(const Z of await U(le))Q.items.add(Z);w.value.files=Q.files,w.value.dispatchEvent(new Event("change",{bubbles:!0}))}return We(o,le=>{(!Array.isArray(le)||!le.length)&&w.value&&(w.value.value="")}),St(()=>{const le=!!(r.counter||e.counter),Q=!!(le||r.details),[Z,ce]=Wd(n),{modelValue:J,...se}=Ws.filterProps(e),G={...Gd.filterProps(e),"onClick:clear":F};return l(Ws,Fe({ref:y,modelValue:e.multiple?o.value:o.value[0],class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--dragging":T.value,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":x.value},e.class],style:e.style,"onClick:prepend":E},Z,se,{centerAffix:!x.value,focused:i.value}),{...r,default:D=>{let{id:j,isDisabled:ne,isDirty:H,isReadonly:te,isValid:Y,hasDetails:K}=D;return l(Gd,Fe({ref:g,prependIcon:e.prependIcon,onMousedown:C,onClick:P,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},G,{id:j.value,active:b.value||H.value,dirty:H.value||e.dirty,disabled:ne.value,focused:i.value,details:K.value,error:Y.value===!1,onDragover:N,onDrop:ie}),{...r,default:X=>{let{props:{class:ae,...oe}}=X;return p(ze,null,[p("input",Fe({ref:w,type:"file",readonly:te.value,disabled:ne.value,multiple:e.multiple,name:e.name,onClick:W=>{W.stopPropagation(),te.value&&W.preventDefault(),S()},onChange:W=>{if(!W.target)return;const de=W.target;o.value=[...de.files??[]]},onDragleave:L,onFocus:S,onBlur:A},oe,ce),null),p("div",{class:ct(ae)},[!!o.value?.length&&!e.hideInput&&(r.selection?r.selection({fileNames:h.value,totalBytes:f.value,totalBytesReadable:m.value}):e.chips?h.value.map(W=>l(hv,{key:W,size:"small",text:W},null)):h.value.join(", "))])])}})},details:Q?D=>p(ze,null,[r.details?.(D),le&&p(ze,null,[p("span",null,null),l(Jw,{active:!!o.value?.length,value:v.value,disabled:e.disabled},r.counter)])]):void 0})}),gs({},y,g,w)}}),iXe=ot({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...$o(),...en(),...Wr(),...Tf(),...tr(),...Un({tag:"footer"}),...aa()},"VFooter"),lXe=yt()({name:"VFooter",props:iXe(),setup(e,t){let{slots:n}=t;const a=M(),{themeClasses:r}=wa(e),{backgroundColorClasses:s,backgroundColorStyles:o}=Ca(()=>e.color),{borderClasses:i}=oi(e),{elevationClasses:c}=ps(e),{roundedClasses:A}=hr(e),d=Ht(32),{resizeRef:f}=Rl(h=>{h.length&&(d.value=h[0].target.clientHeight)}),m=ee(()=>e.height==="auto"?d.value:parseInt(e.height,10));return vo(()=>e.app,()=>{const h=If({id:e.name,order:ee(()=>parseInt(e.order,10)),position:qe(()=>"bottom"),layoutSize:m,elementSize:ee(()=>e.height==="auto"?void 0:m.value),active:qe(()=>e.app),absolute:qe(()=>e.absolute)});Ar(()=>{a.value=h.layoutItemStyles.value})}),St(()=>l(e.tag,{ref:f,class:ct(["v-footer",r.value,s.value,i.value,c.value,A.value,e.class]),style:Rt([o.value,e.app?a.value:{height:jt(e.height)},e.style])},n)),{}}}),uXe=ot({...en(),...yWe()},"VForm"),cXe=yt()({name:"VForm",props:uXe(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,t){let{slots:n,emit:a}=t;const r=_We(e),s=M();function o(c){c.preventDefault(),r.reset()}function i(c){const A=c,d=r.validate();A.then=d.then.bind(d),A.catch=d.catch.bind(d),A.finally=d.finally.bind(d),a("submit",A),A.defaultPrevented||d.then(f=>{let{valid:m}=f;m&&s.value?.submit()}),A.preventDefault()}return St(()=>p("form",{ref:s,class:ct(["v-form",e.class]),style:Rt(e.style),novalidate:!0,onReset:o,onSubmit:i},[n.default?.(r)])),gs(r,s)}}),dXe=ot({disabled:Boolean,modelValue:{type:Boolean,default:null},...m4()},"VHover"),AXe=yt()({name:"VHover",props:dXe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=on(e,"modelValue"),{runOpenDelay:r,runCloseDelay:s}=h4(e,o=>!e.disabled&&(a.value=o));return()=>n.default?.({isHovering:a.value,props:{onMouseenter:r,onMouseleave:s}})}}),fXe=ot({color:String,direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},side:{type:String,default:"end",validator:e=>["start","end","both"].includes(e)},mode:{type:String,default:"intersect",validator:e=>["intersect","manual"].includes(e)},margin:[Number,String],loadMoreText:{type:String,default:"$vuetify.infiniteScroll.loadMore"},emptyText:{type:String,default:"$vuetify.infiniteScroll.empty"},...Ur(),...Un()},"VInfiniteScroll"),NN=Ei({name:"VInfiniteScrollIntersect",props:{side:{type:String,required:!0},rootMargin:String},emits:{intersect:(e,t)=>!0},setup(e,t){let{emit:n}=t;const{intersectionRef:a,isIntersecting:r}=Eg();return We(r,async s=>{n("intersect",e.side,s)}),St(()=>p("div",{class:"v-infinite-scroll-intersect",style:{"--v-infinite-margin-size":e.rootMargin},ref:a},[O("")])),{}}}),mXe=yt()({name:"VInfiniteScroll",props:fXe(),emits:{load:e=>!0},setup(e,t){let{slots:n,emit:a}=t;const r=M(),s=Ht("ok"),o=Ht("ok"),i=ee(()=>jt(e.margin)),c=Ht(!1);function A(k){if(!r.value)return;const S=e.direction==="vertical"?"scrollTop":"scrollLeft";r.value[S]=k}function d(){if(!r.value)return 0;const k=e.direction==="vertical"?"scrollTop":"scrollLeft";return r.value[k]}function f(){if(!r.value)return 0;const k=e.direction==="vertical"?"scrollHeight":"scrollWidth";return r.value[k]}function m(){if(!r.value)return 0;const k=e.direction==="vertical"?"clientHeight":"clientWidth";return r.value[k]}cn(()=>{r.value&&(e.side==="start"?A(f()):e.side==="both"&&A(f()/2-m()/2))});function h(k,S){k==="start"?s.value=S:k==="end"?o.value=S:k==="both"&&(s.value=S,o.value=S)}function v(k){return k==="start"?s.value:o.value}let y=0;function g(k,S){c.value=S,c.value&&w(k)}function w(k){if(e.mode!=="manual"&&!c.value)return;const S=v(k);if(!r.value||["empty","loading"].includes(S))return;y=f(),h(k,"loading");function E(C){h(k,C),bn(()=>{C==="empty"||C==="error"||(C==="ok"&&k==="start"&&A(f()-y+d()),e.mode!=="manual"&&bn(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{w(k)})})})}))})}a("load",{side:k,done:E})}const{t:b}=Pa();function x(k,S){if(e.side!==k&&e.side!=="both")return;const E=()=>w(k),C={side:k,props:{onClick:E,color:e.color}};return S==="error"?n.error?.(C):S==="empty"?n.empty?.(C)??p("div",null,[b(e.emptyText)]):e.mode==="manual"?S==="loading"?n.loading?.(C)??l(hf,{indeterminate:!0,color:e.color},null):n["load-more"]?.(C)??l(jn,{variant:"outlined",color:e.color,onClick:E},{default:()=>[b(e.loadMoreText)]}):n.loading?.(C)??l(hf,{indeterminate:!0,color:e.color},null)}const{dimensionStyles:T}=Rr(e);St(()=>{const k=e.tag,S=e.side==="start"||e.side==="both",E=e.side==="end"||e.side==="both",C=e.mode==="intersect";return l(k,{ref:r,class:ct(["v-infinite-scroll",`v-infinite-scroll--${e.direction}`,{"v-infinite-scroll--start":S,"v-infinite-scroll--end":E}]),style:Rt(T.value)},{default:()=>[p("div",{class:"v-infinite-scroll__side"},[x("start",s.value)]),S&&C&&l(NN,{key:"start",side:"start",onIntersect:g,rootMargin:i.value},null),n.default?.(),E&&C&&l(NN,{key:"end",side:"end",onIntersect:g,rootMargin:i.value},null),p("div",{class:"v-infinite-scroll__side"},[x("end",o.value)])]})});function U(k){const S=k??e.side;h(S,"ok"),bn(()=>{A(f()-y+d()),e.mode!=="manual"&&bn(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{S==="both"?(w("start"),w("end")):w(S)})})})})})}return{reset:U}}}),cG=Symbol.for("vuetify:v-item-group"),hXe=ot({...en(),...Of({selectedClass:"v-item--selected"}),...Un(),...aa()},"VItemGroup"),vXe=yt()({name:"VItemGroup",props:hXe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:a}=wa(e),{isSelected:r,select:s,next:o,prev:i,selected:c}=Jd(e,cG);return()=>l(e.tag,{class:ct(["v-item-group",a.value,e.class]),style:Rt(e.style)},{default:()=>[n.default?.({isSelected:r,select:s,next:o,prev:i,selected:c.value})]})}}),pXe=yt()({name:"VItem",props:Hf(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const{isSelected:a,select:r,toggle:s,selectedClass:o,value:i,disabled:c}=$f(e,cG);return()=>n.default?.({isSelected:a.value,selectedClass:o.value,select:r,toggle:s,value:i.value,disabled:c.value})}}),gXe=ot({color:String,...$o(),...en(),...tr(),...Un({tag:"kbd"}),...aa(),...Wr()},"VKbd"),yXe=yt()({name:"VKbd",props:gXe(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=wa(e),{borderClasses:r}=oi(e),{roundedClasses:s}=hr(e),{backgroundColorClasses:o,backgroundColorStyles:i}=Ca(()=>e.color),{elevationClasses:c}=ps(e);return St(()=>l(e.tag,{class:ct(["v-kbd",a.value,o.value,r.value,c.value,s.value,e.class]),style:Rt([i.value,e.style])},n)),{}}}),_Xe=ot({...en(),...Ur(),...l6()},"VLayout"),wXe=yt()({name:"VLayout",props:_Xe(),setup(e,t){let{slots:n}=t;const{layoutClasses:a,layoutStyles:r,getLayoutItem:s,items:o,layoutRef:i}=c6(e),{dimensionStyles:c}=Rr(e);return St(()=>p("div",{ref:i,class:ct([a.value,e.class]),style:Rt([c.value,r.value,e.style])},[n.default?.()])),{getLayoutItem:s,items:o}}}),bXe=ot({position:{type:String,required:!0},size:{type:[Number,String],default:300},modelValue:Boolean,...en(),...Tf()},"VLayoutItem"),xXe=yt()({name:"VLayoutItem",props:bXe(),setup(e,t){let{slots:n}=t;const{layoutItemStyles:a}=If({id:e.name,order:ee(()=>parseInt(e.order,10)),position:qe(()=>e.position),elementSize:qe(()=>e.size),layoutSize:qe(()=>e.size),active:qe(()=>e.modelValue),absolute:qe(()=>e.absolute)});return()=>p("div",{class:ct(["v-layout-item",e.class]),style:Rt([a.value,e.style])},[n.default?.()])}}),CXe=ot({modelValue:Boolean,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},...en(),...Ur(),...Un(),...Jl({transition:"fade-transition"})},"VLazy"),SXe=yt()({name:"VLazy",directives:{vIntersect:Ol},props:CXe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{dimensionStyles:a}=Rr(e),r=on(e,"modelValue");function s(o){r.value||(r.value=o)}return St(()=>Aa(l(e.tag,{class:ct(["v-lazy",e.class]),style:Rt([a.value,e.style])},{default:()=>[r.value&&l(mo,{transition:e.transition,appear:!0},{default:()=>[n.default?.()]})]}),[[Ol,{handler:s,options:e.options},null]])),{}}}),EXe=ot({locale:String,fallbackLocale:String,messages:Object,rtl:{type:Boolean,default:void 0},...en()},"VLocaleProvider"),BXe=yt()({name:"VLocaleProvider",props:EXe(),setup(e,t){let{slots:n}=t;const{rtlClasses:a}=jte(e);return St(()=>p("div",{class:ct(["v-locale-provider",a.value,e.class]),style:Rt(e.style)},[n.default?.()])),{}}}),kXe=ot({scrollable:Boolean,...en(),...Ur(),...Un({tag:"main"})},"VMain"),TXe=yt()({name:"VMain",props:kXe(),setup(e,t){let{slots:n}=t;const{dimensionStyles:a}=Rr(e),{mainStyles:r}=u6(),{ssrBootStyles:s}=Lf();return St(()=>l(e.tag,{class:ct(["v-main",{"v-main--scrollable":e.scrollable},e.class]),style:Rt([r.value,s.value,a.value,e.style])},{default:()=>[e.scrollable?p("div",{class:"v-main__scroller"},[n.default?.()]):n.default?.()]})),{}}});function IXe(e){let{rootEl:t,isSticky:n,layoutItemStyles:a}=e;const r=Ht(!1),s=Ht(0),o=ee(()=>{const A=typeof r.value=="boolean"?"top":r.value;return[n.value?{top:"auto",bottom:"auto",height:void 0}:void 0,r.value?{[A]:jt(s.value)}:{top:a.value.top}]});cn(()=>{We(n,A=>{A?window.addEventListener("scroll",c,{passive:!0}):window.removeEventListener("scroll",c)},{immediate:!0})}),la(()=>{window.removeEventListener("scroll",c)});let i=0;function c(){const A=i>window.scrollY?"up":"down",d=t.value.getBoundingClientRect(),f=parseFloat(a.value.top??0),m=window.scrollY-Math.max(0,s.value-f),h=d.height+Math.max(s.value,f)-window.scrollY-window.innerHeight,v=parseFloat(getComputedStyle(t.value).getPropertyValue("--v-body-scroll-y"))||0;d.height<window.innerHeight-f?(r.value="top",s.value=f):A==="up"&&r.value==="bottom"||A==="down"&&r.value==="top"?(s.value=window.scrollY+d.top-v,r.value=!0):A==="down"&&h<=0?(s.value=0,r.value="bottom"):A==="up"&&m<=0&&(v?r.value!=="top"&&(s.value=-m+v+f,r.value="top"):(s.value=d.top+m,r.value="top")),i=window.scrollY}return{isStuck:r,stickyStyles:o}}const FXe=100,PXe=20;function VN(e){return(e<0?-1:1)*Math.sqrt(Math.abs(e))*1.41421356237}function LN(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let t=0;for(let n=e.length-1;n>0;n--){if(e[n].t===e[n-1].t)continue;const a=VN(t),r=(e[n].d-e[n-1].d)/(e[n].t-e[n-1].t);t+=(r-a)*Math.abs(r),n===e.length-1&&(t*=.5)}return VN(t)*1e3}function DXe(){const e={};function t(r){Array.from(r.changedTouches).forEach(s=>{(e[s.identifier]??(e[s.identifier]=new D8(PXe))).push([r.timeStamp,s])})}function n(r){Array.from(r.changedTouches).forEach(s=>{delete e[s.identifier]})}function a(r){const s=e[r]?.values().reverse();if(!s)throw new Error(`No samples for touch id ${r}`);const o=s[0],i=[],c=[];for(const A of s){if(o[0]-A[0]>FXe)break;i.push({t:A[0],d:A[1].clientX}),c.push({t:A[0],d:A[1].clientY})}return{x:LN(i),y:LN(c),get direction(){const{x:A,y:d}=this,[f,m]=[Math.abs(A),Math.abs(d)];return f>m&&A>=0?"right":f>m&&A<=0?"left":m>f&&d>=0?"down":m>f&&d<=0?"up":UXe()}}}return{addMovement:t,endTouch:n,getVelocity:a}}function UXe(){throw new Error}function RXe(e){let{el:t,isActive:n,isTemporary:a,width:r,touchless:s,position:o}=e;cn(()=>{window.addEventListener("touchstart",b,{passive:!0}),window.addEventListener("touchmove",x,{passive:!1}),window.addEventListener("touchend",T,{passive:!0})}),la(()=>{window.removeEventListener("touchstart",b),window.removeEventListener("touchmove",x),window.removeEventListener("touchend",T)});const i=ee(()=>["left","right"].includes(o.value)),{addMovement:c,endTouch:A,getVelocity:d}=DXe();let f=!1;const m=Ht(!1),h=Ht(0),v=Ht(0);let y;function g(k,S){return(o.value==="left"?k:o.value==="right"?document.documentElement.clientWidth-k:o.value==="top"?k:o.value==="bottom"?document.documentElement.clientHeight-k:Im())-(S?r.value:0)}function w(k){let S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const E=o.value==="left"?(k-v.value)/r.value:o.value==="right"?(document.documentElement.clientWidth-k-v.value)/r.value:o.value==="top"?(k-v.value)/r.value:o.value==="bottom"?(document.documentElement.clientHeight-k-v.value)/r.value:Im();return S?Qa(E):E}function b(k){if(s.value)return;const S=k.changedTouches[0].clientX,E=k.changedTouches[0].clientY,C=25,P=o.value==="left"?S<C:o.value==="right"?S>document.documentElement.clientWidth-C:o.value==="top"?E<C:o.value==="bottom"?E>document.documentElement.clientHeight-C:Im(),F=n.value&&(o.value==="left"?S<r.value:o.value==="right"?S>document.documentElement.clientWidth-r.value:o.value==="top"?E<r.value:o.value==="bottom"?E>document.documentElement.clientHeight-r.value:Im());(P||F||n.value&&a.value)&&(y=[S,E],v.value=g(i.value?S:E,n.value),h.value=w(i.value?S:E),f=v.value>-20&&v.value<80,A(k),c(k))}function x(k){const S=k.changedTouches[0].clientX,E=k.changedTouches[0].clientY;if(f){if(!k.cancelable){f=!1;return}const P=Math.abs(S-y[0]),F=Math.abs(E-y[1]);(i.value?P>F&&P>3:F>P&&F>3)?(m.value=!0,f=!1):(i.value?F:P)>3&&(f=!1)}if(!m.value)return;k.preventDefault(),c(k);const C=w(i.value?S:E,!1);h.value=Math.max(0,Math.min(1,C)),C>1?v.value=g(i.value?S:E,!0):C<0&&(v.value=g(i.value?S:E,!1))}function T(k){if(f=!1,!m.value)return;c(k),m.value=!1;const S=d(k.changedTouches[0].identifier),E=Math.abs(S.x),C=Math.abs(S.y);(i.value?E>C&&E>400:C>E&&C>3)?n.value=S.direction===({left:"right",right:"left",top:"down",bottom:"up"}[o.value]||Im()):n.value=h.value>.5}const U=ee(()=>m.value?{transform:o.value==="left"?`translateX(calc(-100% + ${h.value*r.value}px))`:o.value==="right"?`translateX(calc(100% - ${h.value*r.value}px))`:o.value==="top"?`translateY(calc(-100% + ${h.value*r.value}px))`:o.value==="bottom"?`translateY(calc(100% - ${h.value*r.value}px))`:Im(),transition:"none"}:void 0);return vo(m,()=>{const k=t.value?.style.transform??null,S=t.value?.style.transition??null;Ar(()=>{t.value?.style.setProperty("transform",U.value?.transform||"none"),t.value?.style.setProperty("transition",U.value?.transition||null)}),as(()=>{t.value?.style.setProperty("transform",k),t.value?.style.setProperty("transition",S)})}),{isDragging:m,dragProgress:h,dragStyles:U}}function Im(){throw new Error}const NXe=["start","end","left","right","top","bottom"],VXe=ot({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>NXe.includes(e)},sticky:Boolean,...$o(),...en(),...m4(),...kf({mobile:null}),...Wr(),...Tf(),...tr(),...Un({tag:"nav"}),...aa()},"VNavigationDrawer"),LXe=yt()({name:"VNavigationDrawer",props:VXe(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:r}=t;const{isRtl:s}=Kr(),{themeClasses:o}=wa(e),{borderClasses:i}=oi(e),{backgroundColorClasses:c,backgroundColorStyles:A}=Ca(()=>e.color),{elevationClasses:d}=ps(e),{displayClasses:f,mobile:m}=Ji(e),{roundedClasses:h}=hr(e),v=aQ(),y=on(e,"modelValue",null,se=>!!se),{ssrBootStyles:g}=Lf(),{scopeId:w}=Gf(),b=M(),x=Ht(!1),{runOpenDelay:T,runCloseDelay:U}=h4(e,se=>{x.value=se}),k=ee(()=>e.rail&&e.expandOnHover&&x.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),S=ee(()=>ES(e.location,s.value)),E=qe(()=>e.persistent),C=ee(()=>!e.permanent&&(m.value||e.temporary)),P=ee(()=>e.sticky&&!C.value&&S.value!=="bottom");vo(()=>e.expandOnHover&&e.rail!=null,()=>{We(x,se=>a("update:rail",!se))}),vo(()=>!e.disableResizeWatcher,()=>{We(C,se=>!e.permanent&&bn(()=>y.value=!se))}),vo(()=>!e.disableRouteWatcher&&!!v,()=>{We(v.currentRoute,()=>C.value&&(y.value=!1))}),We(()=>e.permanent,se=>{se&&(y.value=!0)}),e.modelValue==null&&!C.value&&(y.value=e.permanent||!m.value);const{isDragging:F,dragProgress:N}=RXe({el:b,isActive:y,isTemporary:C,width:k,touchless:qe(()=>e.touchless),position:S}),L=ee(()=>{const se=C.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):k.value;return F.value?se*N.value:se}),{layoutItemStyles:ie,layoutItemScrimStyles:le}=If({id:e.name,order:ee(()=>parseInt(e.order,10)),position:S,layoutSize:L,elementSize:k,active:$h(y),disableTransitions:qe(()=>F.value),absolute:ee(()=>e.absolute||P.value&&typeof Q.value!="string")}),{isStuck:Q,stickyStyles:Z}=IXe({rootEl:b,isSticky:P,layoutItemStyles:ie}),ce=Ca(()=>typeof e.scrim=="string"?e.scrim:null),J=ee(()=>({...F.value?{opacity:N.value*.2,transition:"none"}:void 0,...le.value}));return fr({VList:{bgColor:"transparent"}}),St(()=>{const se=r.image||e.image;return p(ze,null,[l(e.tag,Fe({ref:b,onMouseenter:T,onMouseleave:U,class:["v-navigation-drawer",`v-navigation-drawer--${S.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":x.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":C.value,"v-navigation-drawer--persistent":E.value,"v-navigation-drawer--active":y.value,"v-navigation-drawer--sticky":P.value},o.value,c.value,i.value,f.value,d.value,h.value,e.class],style:[A.value,ie.value,g.value,Z.value,e.style]},w,n),{default:()=>[se&&p("div",{key:"image",class:"v-navigation-drawer__img"},[r.image?l(Rn,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},r.image):l(Tc,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),r.prepend&&p("div",{class:"v-navigation-drawer__prepend"},[r.prepend?.()]),p("div",{class:"v-navigation-drawer__content"},[r.default?.()]),r.append&&p("div",{class:"v-navigation-drawer__append"},[r.append?.()])]}),l(Id,{name:"fade-transition"},{default:()=>[C.value&&(F.value||y.value)&&!!e.scrim&&p("div",Fe({class:["v-navigation-drawer__scrim",ce.backgroundColorClasses.value],style:[J.value,ce.backgroundColorStyles.value],onClick:()=>{E.value||(y.value=!1)}},w),null)]})])}),{isStuck:Q}}}),MXe=Ei({name:"VNoSsr",setup(e,t){let{slots:n}=t;const a=WQ();return()=>a.value&&n.default?.()}}),OXe=50,HXe=500;function $Xe(e){let{toggleUpDown:t}=e,n=-1,a=-1;as(s);function r(i){s(),o(i),window.addEventListener("pointerup",s),document.addEventListener("blur",s),n=window.setTimeout(()=>{a=window.setInterval(()=>o(i),OXe)},HXe)}function s(){window.clearTimeout(n),window.clearInterval(a),window.removeEventListener("pointerup",s),document.removeEventListener("blur",s)}function o(i){t(i==="up")}return{holdStart:r,holdStop:s}}const QXe=ot({controlVariant:{type:String,default:"default"},inset:Boolean,hideInput:Boolean,modelValue:{type:Number,default:null},min:{type:Number,default:Number.MIN_SAFE_INTEGER},max:{type:Number,default:Number.MAX_SAFE_INTEGER},step:{type:Number,default:1},precision:{type:Number,default:0},minFractionDigits:{type:Number,default:null},decimalSeparator:{type:String,validator:e=>!e||e.length===1},...Fa(Rg(),["modelValue","validationValue"])},"VNumberInput"),GXe=yt()({name:"VNumberInput",props:{...QXe()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=M(),{holdStart:r,holdStop:s}=$Xe({toggleUpDown:C}),o=Pg(e),i=ee(()=>o.isDisabled.value||o.isReadonly.value),c=Ht(e.focused),{decimalSeparator:A}=Pa(),d=ee(()=>e.decimalSeparator?.[0]||A.value);function f(G){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.precision,j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const ne=D==null?String(G):G.toFixed(D);if(c.value&&j)return Number(ne).toString().replace(".",d.value);if(e.minFractionDigits===null||D!==null&&D<e.minFractionDigits)return ne.replace(".",d.value);let[H,te]=ne.split(".");return te=(te??"").padEnd(e.minFractionDigits,"0").replace(new RegExp(`(?<=\\d{${e.minFractionDigits}})0+$`,"g"),""),[H,te].filter(Boolean).join(d.value)}const m=on(e,"modelValue",null,G=>G??null,G=>G==null?G??null:Qa(Number(G),e.min,e.max)),h=Ht(null);Ar(()=>{c.value&&!i.value||(m.value==null?h.value=null:isNaN(m.value)||(h.value=f(m.value)))});const v=ee({get:()=>h.value,set(G){if(G===null||G===""){m.value=null,h.value=null;return}const D=Number(G.replace(d.value,"."));!isNaN(D)&&D<=e.max&&D>=e.min&&(m.value=D,h.value=G)}}),y=ee(()=>i.value?!1:(m.value??0)+e.step<=e.max),g=ee(()=>i.value?!1:(m.value??0)-e.step>=e.min),w=ee(()=>e.hideInput?"stacked":e.controlVariant),b=qe(()=>w.value==="split"?"$plus":"$collapse"),x=qe(()=>w.value==="split"?"$minus":"$expand"),T=qe(()=>w.value==="split"?"default":"small"),U=qe(()=>w.value==="stacked"?"auto":"100%"),k={props:{onClick:N,onPointerup:L,onPointerdown:ie,onPointercancel:L}},S={props:{onClick:N,onPointerup:L,onPointerdown:le,onPointercancel:L}};We(()=>e.precision,()=>Z()),We(()=>e.minFractionDigits,()=>Z()),cn(()=>{Q()});function E(G){if(G==null)return 0;const D=G.toString(),j=D.indexOf(".");return~j?D.length-j:0}function C(){let G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(i.value)return;if(m.value==null){v.value=f(Qa(0,e.min,e.max));return}let D=Math.max(E(m.value),E(e.step));e.precision!=null&&(D=Math.max(D,e.precision)),G?y.value&&(v.value=f(m.value+e.step,D)):g.value&&(v.value=f(m.value-e.step,D))}function P(G){if(!G.data)return;const D=G.target,{value:j,selectionStart:ne,selectionEnd:H}=D??{},te=j?j.slice(0,ne)+G.data+j.slice(H):G.data,Y=ote(te,e.precision,d.value);if(new RegExp(`^-?\\d*${C_(d.value)}?\\d*$`).test(te)||(G.preventDefault(),D.value=Y),e.precision!=null){if(te.split(d.value)[1]?.length>e.precision){G.preventDefault(),D.value=Y;const K=(ne??0)+G.data.length;D.setSelectionRange(K,K)}e.precision===0&&te.includes(d.value)&&(G.preventDefault(),D.value=Y)}}async function F(G){["Enter","ArrowLeft","ArrowRight","Backspace","Delete","Tab"].includes(G.key)||G.ctrlKey||["ArrowDown","ArrowUp"].includes(G.key)&&(G.preventDefault(),G.stopPropagation(),Q(),await bn(),G.key==="ArrowDown"?C(!1):C())}function N(G){G.stopPropagation()}function L(G){G.currentTarget?.releasePointerCapture(G.pointerId),G.preventDefault(),s()}function ie(G){G.currentTarget?.setPointerCapture(G.pointerId),G.preventDefault(),G.stopPropagation(),r("up")}function le(G){G.currentTarget?.setPointerCapture(G.pointerId),G.preventDefault(),G.stopPropagation(),r("down")}function Q(){if(i.value||!a.value)return;const G=a.value.value,D=Number(G.replace(d.value,"."));G&&!isNaN(D)?v.value=f(Qa(D,e.min,e.max)):v.value=null}function Z(){i.value||(v.value=m.value!==null&&!isNaN(m.value)?f(m.value,e.precision,!1):null)}function ce(){if(!i.value){if(m.value===null||isNaN(m.value)){v.value=null;return}v.value=m.value.toString().replace(".",d.value)}}function J(){ce()}function se(){Q()}return St(()=>{const{modelValue:G,...D}=Ic.filterProps(e);function j(){return n.increment?l(Rn,{key:"increment-defaults",defaults:{VBtn:{disabled:!y.value,height:U.value,size:T.value,icon:b.value,variant:"text"}}},{default:()=>[n.increment(k)]}):l(jn,{"aria-hidden":"true","data-testid":"increment",disabled:!y.value,height:U.value,icon:b.value,key:"increment-btn",onClick:N,onPointerdown:ie,onPointerup:L,onPointercancel:L,size:T.value,variant:"text",tabindex:"-1"},null)}function ne(){return n.decrement?l(Rn,{key:"decrement-defaults",defaults:{VBtn:{disabled:!g.value,height:U.value,size:T.value,icon:x.value,variant:"text"}}},{default:()=>[n.decrement(S)]}):l(jn,{"aria-hidden":"true","data-testid":"decrement",disabled:!g.value,height:U.value,icon:x.value,key:"decrement-btn",onClick:N,onPointerdown:le,onPointerup:L,onPointercancel:L,size:T.value,variant:"text",tabindex:"-1"},null)}function H(){return p("div",{class:"v-number-input__control"},[ne(),l(bi,{vertical:w.value!=="stacked"},null),j()])}function te(){return!e.hideInput&&!e.inset?l(bi,{vertical:!0},null):void 0}const Y=w.value==="split"?p("div",{class:"v-number-input__control"},[l(bi,{vertical:!0},null),j()]):e.reverse||w.value==="hidden"?void 0:p(ze,null,[te(),H()]),K=n["append-inner"]||Y,X=w.value==="split"?p("div",{class:"v-number-input__control"},[ne(),l(bi,{vertical:!0},null)]):e.reverse&&w.value!=="hidden"?p(ze,null,[H(),te()]):void 0,ae=n["prepend-inner"]||X;return l(Ic,Fe({ref:a},D,{modelValue:v.value,"onUpdate:modelValue":oe=>v.value=oe,focused:c.value,"onUpdate:focused":oe=>c.value=oe,validationValue:m.value,onBeforeinput:P,onFocus:J,onBlur:se,onKeydown:F,class:["v-number-input",{"v-number-input--default":w.value==="default","v-number-input--hide-input":e.hideInput,"v-number-input--inset":e.inset,"v-number-input--reverse":e.reverse,"v-number-input--split":w.value==="split","v-number-input--stacked":w.value==="stacked"},e.class],style:e.style,inputmode:"decimal"}),{...n,"append-inner":K?function(){for(var oe=arguments.length,W=new Array(oe),de=0;de<oe;de++)W[de]=arguments[de];return p(ze,null,[n["append-inner"]?.(...W),Y])}:void 0,"prepend-inner":ae?function(){for(var oe=arguments.length,W=new Array(oe),de=0;de<oe;de++)W[de]=arguments[de];return p(ze,null,[X,n["prepend-inner"]?.(...W)])}:void 0})}),gs({},a)}}),zXe=ot({autofocus:Boolean,divider:String,focusAll:Boolean,label:{type:String,default:"$vuetify.input.otp"},length:{type:[Number,String],default:6},modelValue:{type:[Number,String],default:void 0},placeholder:String,type:{type:String,default:"number"},...Ur(),...Fg(),...Pc(Ug({variant:"outlined"}),["baseColor","bgColor","class","color","disabled","error","loading","rounded","style","theme","variant"])},"VOtpInput"),KXe=yt()({name:"VOtpInput",props:zXe(),emits:{finish:e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:r}=t;const{dimensionStyles:s}=Rr(e),{isFocused:o,focus:i,blur:c}=Vc(e),A=on(e,"modelValue","",P=>P==null?[]:String(P).split(""),P=>P.join("")),{t:d}=Pa(),f=ee(()=>Number(e.length)),m=ee(()=>Array(f.value).fill(0)),h=M(-1),v=M(),y=M([]),g=ee(()=>y.value[h.value]);let w=!1;vo(()=>e.autofocus,()=>{const P=Ed();P.run(()=>{const{intersectionRef:F,isIntersecting:N}=Eg();Ar(()=>{F.value=y.value[0]}),We(N,L=>{L&&(F.value?.focus(),P.stop())})})});function b(){if(C(g.value.value)){g.value.value="";return}if(w)return;const P=A.value.slice(),F=g.value.value;P[h.value]=F;let N=null;h.value>A.value.length?N=A.value.length+1:h.value+1!==f.value&&(N="next"),A.value=P,N&&KA(v.value,N)}function x(){w=!1,b()}function T(P){const F=A.value.slice(),N=h.value;let L=null;["ArrowLeft","ArrowRight","Backspace","Delete"].includes(P.key)&&(P.preventDefault(),P.key==="ArrowLeft"?L="prev":P.key==="ArrowRight"?L="next":["Backspace","Delete"].includes(P.key)&&(F[h.value]="",A.value=F,h.value>0&&P.key==="Backspace"?L="prev":requestAnimationFrame(()=>{y.value[N]?.select()})),requestAnimationFrame(()=>{L!=null&&KA(v.value,L)}))}function U(P,F){F.preventDefault(),F.stopPropagation();const N=F?.clipboardData?.getData("Text").trim().slice(0,f.value)??"",L=N.length-1===-1?P:N.length-1;C(N)||(A.value=N.split(""),h.value=L)}function k(){A.value=[]}function S(P,F){i(),h.value=F}function E(){c(),h.value=-1}function C(P){return e.type==="number"&&/[^0-9]/g.test(P)}return fr({VField:{color:qe(()=>e.color),bgColor:qe(()=>e.color),baseColor:qe(()=>e.baseColor),disabled:qe(()=>e.disabled),error:qe(()=>e.error),variant:qe(()=>e.variant)}},{scoped:!0}),We(A,P=>{P.length===f.value&&a("finish",P.join(""))},{deep:!0}),We(h,P=>{P<0||bn(()=>{y.value[P]?.select()})}),St(()=>{const[P,F]=Wd(n);return p("div",Fe({class:["v-otp-input",{"v-otp-input--divided":!!e.divider},e.class],style:[e.style]},P),[p("div",{ref:v,class:"v-otp-input__content",style:Rt([s.value])},[m.value.map((N,L)=>p(ze,null,[e.divider&&L!==0&&p("span",{class:"v-otp-input__divider"},[e.divider]),l(Gd,{focused:o.value&&e.focusAll||h.value===L,key:L},{...r,loader:void 0,default:()=>p("input",{ref:ie=>y.value[L]=ie,"aria-label":d(e.label,L+1),autofocus:L===0&&e.autofocus,autocomplete:"one-time-code",class:ct(["v-otp-input__field"]),disabled:e.disabled,inputmode:e.type==="number"?"numeric":"text",min:e.type==="number"?0:void 0,maxlength:L===0?f.value:"1",placeholder:e.placeholder,type:e.type==="number"?"text":e.type,value:A.value[L],onInput:b,onFocus:ie=>S(ie,L),onBlur:E,onKeydown:T,onCompositionstart:()=>w=!0,onCompositionend:x,onPaste:ie=>U(L,ie)},null)})])),p("input",Fe({class:"v-otp-input-input",type:"hidden"},F,{value:A.value.join("")}),null),l(Iu,{contained:!0,contentClass:"v-otp-input__loader",modelValue:!!e.loading,persistent:!0},{default:()=>[r.loader?.()??l(hf,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,size:"24",width:"2"},null)]}),r.default?.()])])}),{blur:()=>{y.value?.some(P=>P.blur())},focus:()=>{y.value?.[0].focus()},reset:k,isFocused:o}}});function WXe(e){return Math.floor(Math.abs(e))*Math.sign(e)}const jXe=ot({scale:{type:[Number,String],default:.5},...en()},"VParallax"),qXe=yt()({name:"VParallax",props:jXe(),setup(e,t){let{slots:n}=t;const{intersectionRef:a,isIntersecting:r}=Eg(),{resizeRef:s,contentRect:o}=Rl(),{height:i}=Ji(),c=M();Ar(()=>{a.value=s.value=c.value?.$el});let A;We(r,h=>{h?(A=vk(a.value),A=A===document.scrollingElement?document:A,A.addEventListener("scroll",m,{passive:!0}),m()):A.removeEventListener("scroll",m)}),la(()=>{A?.removeEventListener("scroll",m)}),We(i,m),We(()=>o.value?.height,m);const d=ee(()=>1-Qa(Number(e.scale)));let f=-1;function m(){r.value&&(cancelAnimationFrame(f),f=requestAnimationFrame(()=>{const h=(c.value?.$el).querySelector(".v-img__img");if(!h)return;const v=A instanceof Document?document.documentElement.clientHeight:A.clientHeight,y=A instanceof Document?window.scrollY:A.scrollTop,g=a.value.getBoundingClientRect().top+y,w=o.value.height,b=g+(w-v)/2,x=WXe((y-b)*d.value),T=Math.max(1,(d.value*(v-w)+w)/w);h.style.setProperty("transform",`translateY(${x}px) scale(${T})`)}))}return St(()=>l(Tc,{class:ct(["v-parallax",{"v-parallax--active":r.value},e.class]),style:Rt(e.style),ref:c,cover:!0,onLoadstart:m,onLoad:m},n)),{}}}),YXe=ot({...Xw({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),XXe=yt()({name:"VRadio",props:YXe(),setup(e,t){let{slots:n}=t;return St(()=>{const a=Qd.filterProps(e);return l(Qd,Fe(a,{class:["v-radio",e.class],style:e.style,type:"radio"}),n)}),{}}}),JXe=ot({height:{type:[Number,String],default:"auto"},...Lc(),...Fa(l4(),["multiple"]),trueIcon:{type:un,default:"$radioOn"},falseIcon:{type:un,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),ZXe=yt()({name:"VRadioGroup",inheritAttrs:!1,props:JXe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const r=Ho(),s=ee(()=>e.id||`radio-group-${r}`),o=on(e,"modelValue"),i=M();return St(()=>{const[c,A]=Wd(n),d=Ws.filterProps(e),f=Qd.filterProps(e),m=a.label?a.label({label:e.label,props:{for:s.value}}):e.label;return l(Ws,Fe({ref:i,class:["v-radio-group",e.class],style:e.style},c,d,{modelValue:o.value,"onUpdate:modelValue":h=>o.value=h,id:s.value}),{...a,default:h=>{let{id:v,messagesId:y,isDisabled:g,isReadonly:w}=h;return p(ze,null,[m&&l(mv,{id:v.value},{default:()=>[m]}),l(fQ,Fe(f,{id:v.value,"aria-describedby":y.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:g.value,readonly:w.value,"aria-labelledby":m?v.value:void 0,multiple:!1},A,{modelValue:o.value,"onUpdate:modelValue":b=>o.value=b}),a)])}})}),gs({},i)}}),eJe=ot({...Fg(),...Lc(),...h7(),strict:Boolean,modelValue:{type:Array,default:()=>[0,0]}},"VRangeSlider"),tJe=yt()({name:"VRangeSlider",props:eJe(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,end:e=>!0,start:e=>!0},setup(e,t){let{slots:n,emit:a}=t;const r=M(),s=M(),o=M(),{rtlClasses:i}=Kr();function c(P){if(!r.value||!s.value)return;const F=uB(P,r.value.$el,e.direction),N=uB(P,s.value.$el,e.direction),L=Math.abs(F),ie=Math.abs(N);return L<ie||L===ie&&F<0?r.value.$el:s.value.$el}const A=v7(e),d=on(e,"modelValue",void 0,P=>P?.length?P.map(F=>A.roundValue(F)):[0,0]),{activeThumbRef:f,hasLabels:m,max:h,min:v,mousePressed:y,onSliderMousedown:g,onSliderTouchstart:w,position:b,trackContainerRef:x,readonly:T}=p7({props:e,steps:A,onSliderStart:()=>{a("start",d.value)},onSliderEnd:P=>{let{value:F}=P;const N=f.value===r.value?.$el?[F,d.value[1]]:[d.value[0],F];!e.strict&&N[0]<N[1]&&(d.value=N),a("end",d.value)},onSliderMove:P=>{let{value:F}=P;const[N,L]=d.value;!e.strict&&N===L&&N!==v.value&&(f.value=F>N?s.value?.$el:r.value?.$el,f.value?.focus()),f.value===r.value?.$el?d.value=[Math.min(F,L),L]:d.value=[N,Math.max(N,F)]},getActiveThumb:c}),{isFocused:U,focus:k,blur:S}=Vc(e),E=ee(()=>b(d.value[0])),C=ee(()=>b(d.value[1]));return St(()=>{const P=Ws.filterProps(e),F=!!(e.label||n.label||n.prepend);return l(Ws,Fe({class:["v-slider","v-range-slider",{"v-slider--has-labels":!!n["tick-label"]||m.value,"v-slider--focused":U.value,"v-slider--pressed":y.value,"v-slider--disabled":e.disabled},i.value,e.class],style:e.style,ref:o},P,{focused:U.value}),{...n,prepend:F?N=>p(ze,null,[n.label?.(N)??(e.label?l(mv,{class:"v-slider__label",text:e.label},null):void 0),n.prepend?.(N)]):void 0,default:N=>{let{id:L,messagesId:ie}=N;return p("div",{class:"v-slider__container",onMousedown:T.value?void 0:g,onTouchstartPassive:T.value?void 0:w},[p("input",{id:`${L.value}_start`,name:e.name||L.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:d.value[0]},null),p("input",{id:`${L.value}_stop`,name:e.name||L.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:d.value[1]},null),l(g7,{ref:x,start:E.value,stop:C.value},{"tick-label":n["tick-label"]}),l(cB,{ref:r,"aria-describedby":ie.value,focused:U&&f.value===r.value?.$el,modelValue:d.value[0],"onUpdate:modelValue":le=>d.value=[le,d.value[1]],onFocus:le=>{k(),f.value=r.value?.$el,h.value!==v.value&&d.value[0]===d.value[1]&&d.value[1]===v.value&&le.relatedTarget!==s.value?.$el&&(r.value?.$el.blur(),s.value?.$el.focus())},onBlur:()=>{S(),f.value=void 0},min:v.value,max:d.value[1],position:E.value,ripple:e.ripple},{"thumb-label":n["thumb-label"]}),l(cB,{ref:s,"aria-describedby":ie.value,focused:U&&f.value===s.value?.$el,modelValue:d.value[1],"onUpdate:modelValue":le=>d.value=[d.value[0],le],onFocus:le=>{k(),f.value=s.value?.$el,h.value!==v.value&&d.value[0]===d.value[1]&&d.value[0]===h.value&&le.relatedTarget!==r.value?.$el&&(s.value?.$el.blur(),r.value?.$el.focus())},onBlur:()=>{S(),f.value=void 0},min:d.value[0],max:h.value,position:C.value,ripple:e.ripple},{"thumb-label":n["thumb-label"]})])}})}),gs({focus:()=>r.value?.$el.focus()},o)}}),nJe=ot({name:String,itemAriaLabel:{type:String,default:"$vuetify.rating.ariaLabel.item"},activeColor:String,color:String,clearable:Boolean,disabled:Boolean,emptyIcon:{type:un,default:"$ratingEmpty"},fullIcon:{type:un,default:"$ratingFull"},halfIncrements:Boolean,hover:Boolean,length:{type:[Number,String],default:5},readonly:Boolean,modelValue:{type:[Number,String],default:0},itemLabels:Array,itemLabelPosition:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},ripple:Boolean,...en(),...rs(),...Ou(),...Un(),...aa()},"VRating"),aJe=yt()({name:"VRating",props:nJe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{t:a}=Pa(),{themeClasses:r}=wa(e),s=on(e,"modelValue"),o=ee(()=>Qa(parseFloat(s.value),0,Number(e.length))),i=ee(()=>yi(Number(e.length),1)),c=ee(()=>i.value.flatMap(g=>e.halfIncrements?[g-.5,g]:[g])),A=Ht(-1),d=ee(()=>c.value.map(g=>{const w=e.hover&&A.value>-1,b=o.value>=g,x=A.value>=g,U=(w?x:b)?e.fullIcon:e.emptyIcon,k=e.activeColor??e.color,S=b||x?k:e.color;return{isFilled:b,isHovered:x,icon:U,color:S}})),f=ee(()=>[0,...c.value].map(g=>{function w(){A.value=g}function b(){A.value=-1}function x(){e.disabled||e.readonly||(s.value=o.value===g&&e.clearable?0:g)}return{onMouseenter:e.hover?w:void 0,onMouseleave:e.hover?b:void 0,onClick:x}})),m=Ho(),h=ee(()=>e.name??`v-rating-${m}`);function v(g){let{value:w,index:b,showStar:x=!0}=g;const{onMouseenter:T,onMouseleave:U,onClick:k}=f.value[b+1],S=`${h.value}-${String(w).replace(".","-")}`,E={color:d.value[b]?.color,density:e.density,disabled:e.disabled,icon:d.value[b]?.icon,ripple:e.ripple,size:e.size,variant:"plain"};return p(ze,null,[p("label",{for:S,class:ct({"v-rating__item--half":e.halfIncrements&&w%1>0,"v-rating__item--full":e.halfIncrements&&w%1===0}),onMouseenter:T,onMouseleave:U,onClick:k},[p("span",{class:"v-rating__hidden"},[a(e.itemAriaLabel,w,e.length)]),x?n.item?n.item({...d.value[b],props:E,value:w,index:b,rating:o.value}):l(jn,Fe({"aria-label":a(e.itemAriaLabel,w,e.length)},E),null):void 0]),p("input",{class:"v-rating__hidden",name:h.value,id:S,type:"radio",value:w,checked:o.value===w,tabindex:-1,readonly:e.readonly,disabled:e.disabled},null)])}function y(g){return n["item-label"]?n["item-label"](g):g.label?p("span",null,[g.label]):p("span",null,[O("")])}return St(()=>{const g=!!e.itemLabels?.length||n["item-label"];return l(e.tag,{class:ct(["v-rating",{"v-rating--hover":e.hover,"v-rating--readonly":e.readonly},r.value,e.class]),style:Rt(e.style)},{default:()=>[l(v,{value:0,index:-1,showStar:!1},null),i.value.map((w,b)=>p("div",{class:"v-rating__wrapper"},[g&&e.itemLabelPosition==="top"?y({value:w,index:b,label:e.itemLabels?.[b]}):void 0,p("div",{class:"v-rating__item"},[e.halfIncrements?p(ze,null,[l(v,{value:w-.5,index:b*2},null),l(v,{value:w,index:b*2+1},null)]):l(v,{value:w,index:b},null)]),g&&e.itemLabelPosition==="bottom"?y({value:w,index:b,label:e.itemLabels?.[b]}):void 0]))]})}),{}}}),rJe={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function sJe(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return p("div",{class:ct(["v-skeleton-loader__bone",`v-skeleton-loader__${e}`])},[t])}function MN(e){const[t,n]=e.split("@");return Array.from({length:n}).map(()=>Ab(t))}function Ab(e){let t=[];if(!e)return t;const n=rJe[e];if(e!==n){if(e.includes(","))return ON(e);if(e.includes("@"))return MN(e);n.includes(",")?t=ON(n):n.includes("@")?t=MN(n):n&&t.push(Ab(n))}return[sJe(e,t)]}function ON(e){return e.replace(/\s/g,"").split(",").map(Ab)}const oJe=ot({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...Ur(),...Wr(),...aa()},"VSkeletonLoader"),iJe=yt()({name:"VSkeletonLoader",props:oJe(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:a,backgroundColorStyles:r}=Ca(()=>e.color),{dimensionStyles:s}=Rr(e),{elevationClasses:o}=ps(e),{themeClasses:i}=wa(e),{t:c}=Pa(),A=ee(()=>Ab(cr(e.type).join(",")));return St(()=>{const d=!n.default||e.loading,f=e.boilerplate||!d?{}:{ariaLive:"polite",ariaLabel:c(e.loadingText),role:"alert"};return p("div",Fe({class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":e.boilerplate},i.value,a.value,o.value],style:[r.value,d?s.value:{}]},f),[d?A.value:n.default?.()])}),{}}}),lJe=yt()({name:"VSlideGroupItem",props:Hf(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const a=$f(e,bQ);return()=>n.default?.({isSelected:a.isSelected.value,select:a.select,toggle:a.toggle,selectedClass:a.selectedClass.value})}});function uJe(e){const t=Ht(e());let n=-1;function a(){clearInterval(n)}function r(){a(),bn(()=>t.value=e())}function s(o){const i=o?getComputedStyle(o):{transitionDuration:.2},c=parseFloat(i.transitionDuration)*1e3||200;if(a(),t.value<=0)return;const A=performance.now();n=window.setInterval(()=>{const d=performance.now()-A+c;t.value=Math.max(e()-d,0),t.value<=0&&a()},c)}return as(a),{clear:a,time:t,start:s,reset:r}}const dG=ot({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...Nc({location:"bottom"}),...Av(),...tr(),...tl(),...aa(),...Fa(Dg({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),wB=yt()({name:"VSnackbar",props:dG(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=on(e,"modelValue"),{positionClasses:r}=fv(e),{scopeId:s}=Gf(),{themeClasses:o}=wa(e),{colorClasses:i,colorStyles:c,variantClasses:A}=Mf(e),{roundedClasses:d}=hr(e),f=uJe(()=>Number(e.timeout)),m=M(),h=M(),v=Ht(!1),y=Ht(0),g=M(),w=Sn(p0,void 0);vo(()=>!!w,()=>{const F=u6();Ar(()=>{g.value=F.mainStyles.value})}),We(a,x),We(()=>e.timeout,x),cn(()=>{a.value&&x()});let b=-1;function x(){f.reset(),window.clearTimeout(b);const F=Number(e.timeout);if(!a.value||F===-1)return;const N=uk(h.value);f.start(N),b=window.setTimeout(()=>{a.value=!1},F)}function T(){f.reset(),window.clearTimeout(b)}function U(){v.value=!0,T()}function k(){v.value=!1,x()}function S(F){y.value=F.touches[0].clientY}function E(F){Math.abs(y.value-F.changedTouches[0].clientY)>50&&(a.value=!1)}function C(){v.value&&k()}const P=ee(()=>e.location.split(" ").reduce((F,N)=>(F[`v-snackbar--${N}`]=!0,F),{}));return St(()=>{const F=Iu.filterProps(e),N=!!(n.default||n.text||e.text);return l(Iu,Fe({ref:m,class:["v-snackbar",{"v-snackbar--active":a.value,"v-snackbar--multi-line":e.multiLine&&!e.vertical,"v-snackbar--timer":!!e.timer,"v-snackbar--vertical":e.vertical},P.value,r.value,e.class],style:[g.value,e.style]},F,{modelValue:a.value,"onUpdate:modelValue":L=>a.value=L,contentProps:Fe({class:["v-snackbar__wrapper",o.value,i.value,d.value,A.value],style:[c.value],onPointerenter:U,onPointerleave:k},F.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:S,onTouchend:E,onAfterLeave:C},s),{default:()=>[Xd(!1,"v-snackbar"),e.timer&&!v.value&&p("div",{key:"timer",class:"v-snackbar__timer"},[l(jw,{ref:h,color:typeof e.timer=="string"?e.timer:"info",max:e.timeout,modelValue:f.time.value},null)]),N&&p("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[n.text?.()??e.text,n.default?.()]),n.actions&&l(Rn,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[p("div",{class:"v-snackbar__actions"},[n.actions({isActive:a})])]})],activator:n.activator})}),gs({},m)}}),cJe=ot({closable:[Boolean,String],closeText:{type:String,default:"$vuetify.dismiss"},modelValue:{type:Array,default:()=>[]},...Fa(dG(),["modelValue"])},"VSnackbarQueue"),dJe=yt()({name:"VSnackbarQueue",props:cJe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const{t:r}=Pa(),s=Ht(!1),o=Ht(!1),i=Ht();We(()=>e.modelValue.length,(m,h)=>{!o.value&&m>h&&A()}),We(s,m=>{m&&(o.value=!0)});function c(){e.modelValue.length?A():(i.value=void 0,o.value=!1)}function A(){const[m,...h]=e.modelValue;n("update:modelValue",h),i.value=typeof m=="string"?{text:m}:m,bn(()=>{s.value=!0})}function d(){s.value=!1}const f=ee(()=>({color:typeof e.closable=="string"?e.closable:void 0,text:r(e.closeText)}));St(()=>{const m=!!(e.closable||a.actions),{modelValue:h,...v}=wB.filterProps(e);return p(ze,null,[o.value&&!!i.value&&(a.default?l(Rn,{defaults:{VSnackbar:i.value}},{default:()=>[a.default({item:i.value})]}):l(wB,Fe(v,i.value,{modelValue:s.value,"onUpdate:modelValue":y=>s.value=y,onAfterLeave:c}),{text:a.text?()=>a.text?.({item:i.value}):void 0,actions:m?()=>p(ze,null,[a.actions?l(Rn,{defaults:{VBtn:f.value}},{default:()=>[a.actions({item:i.value,props:{onClick:d}})]}):l(jn,Fe(f.value,{onClick:d}),null)]):void 0}))])})}}),AG=ot({autoDraw:Boolean,autoDrawDuration:[Number,String],autoDrawEasing:{type:String,default:"ease"},color:String,gradient:{type:Array,default:()=>[]},gradientDirection:{type:String,validator:e=>["top","bottom","left","right"].includes(e),default:"top"},height:{type:[String,Number],default:75},labels:{type:Array,default:()=>[]},labelSize:{type:[Number,String],default:7},lineWidth:{type:[String,Number],default:4},id:String,itemValue:{type:String,default:"value"},modelValue:{type:Array,default:()=>[]},min:[String,Number],max:[String,Number],padding:{type:[String,Number],default:8},showLabels:Boolean,smooth:[Boolean,String,Number],width:{type:[Number,String],default:300}},"Line"),fG=ot({autoLineWidth:Boolean,...AG()},"VBarline"),HN=yt()({name:"VBarline",props:fG(),setup(e,t){let{slots:n}=t;const a=Ho(),r=ee(()=>e.id||`barline-${a}`),s=ee(()=>Number(e.autoDrawDuration)||500),o=ee(()=>!!(e.showLabels||e.labels.length>0||n?.label)),i=ee(()=>parseFloat(e.lineWidth)||4),c=ee(()=>Math.max(e.modelValue.length*i.value,Number(e.width))),A=ee(()=>({minX:0,maxX:c.value,minY:0,maxY:parseInt(e.height,10)})),d=ee(()=>e.modelValue.map(g=>Fr(g,e.itemValue,g)));function f(g,w){const{minX:b,maxX:x,minY:T,maxY:U}=w,k=g.length;let S=e.max!=null?Number(e.max):Math.max(...g),E=e.min!=null?Number(e.min):Math.min(...g);E>0&&e.min==null&&(E=0),S<0&&e.max==null&&(S=0);const C=x/(k===1?2:k),P=(U-T)/(S-E||1),F=U-Math.abs(E*P);return g.map((N,L)=>{const ie=Math.abs(P*N);return{x:b+L*C,y:F-ie+ +(N<0)*ie,height:ie,value:N}})}const m=ee(()=>{const g=[],w=f(d.value,A.value),b=w.length;for(let x=0;g.length<b;x++){const T=w[x];let U=e.labels[x];U||(U=typeof T=="object"?T.value:T),g.push({x:T.x,value:String(U)})}return g}),h=ee(()=>f(d.value,A.value)),v=ee(()=>h.value.length===1?(A.value.maxX-i.value)/2:(Math.abs(h.value[0].x-h.value[1].x)-i.value)/2),y=ee(()=>typeof e.smooth=="boolean"?e.smooth?2:0:Number(e.smooth));St(()=>{const g=e.gradient.slice().length?e.gradient.slice().reverse():[""];return p("svg",{display:"block"},[p("defs",null,[p("linearGradient",{id:r.value,gradientUnits:"userSpaceOnUse",x1:e.gradientDirection==="left"?"100%":"0",y1:e.gradientDirection==="top"?"100%":"0",x2:e.gradientDirection==="right"?"100%":"0",y2:e.gradientDirection==="bottom"?"100%":"0"},[g.map((w,b)=>p("stop",{offset:b/Math.max(g.length-1,1),"stop-color":w||"currentColor"},null))])]),p("clipPath",{id:`${r.value}-clip`},[h.value.map(w=>p("rect",{x:w.x+v.value,y:w.y,width:i.value,height:w.height,rx:y.value,ry:y.value},[e.autoDraw&&p(ze,null,[p("animate",{attributeName:"y",from:w.y+w.height,to:w.y,dur:`${s.value}ms`,fill:"freeze"},null),p("animate",{attributeName:"height",from:"0",to:w.height,dur:`${s.value}ms`,fill:"freeze"},null)])]))]),o.value&&p("g",{key:"labels",style:{textAnchor:"middle",dominantBaseline:"mathematical",fill:"currentColor"}},[m.value.map((w,b)=>p("text",{x:w.x+v.value+i.value/2,y:parseInt(e.height,10)-2+(parseInt(e.labelSize,10)||7*.75),"font-size":Number(e.labelSize)||7},[n.label?.({index:b,value:w.value})??w.value]))]),p("g",{"clip-path":`url(#${r.value}-clip)`,fill:`url(#${r.value})`},[p("rect",{x:0,y:0,width:Math.max(e.modelValue.length*i.value,Number(e.width)),height:e.height},null)])])})}});function AJe(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:75;if(e.length===0)return"";const r=e.shift(),s=e[e.length-1];return(n?`M${r.x} ${a-r.x+2} L${r.x} ${r.y}`:`M${r.x} ${r.y}`)+e.map((o,i)=>{const c=e[i+1],A=e[i-1]||r,d=c&&fJe(c,o,A);if(!c||d)return`L${o.x} ${o.y}`;const f=Math.min($N(A,o),$N(c,o)),h=f/2<t?f/2:t,v=QN(A,o,h),y=QN(c,o,h);return`L${v.x} ${v.y}S${o.x} ${o.y} ${y.x} ${y.y}`}).join("")+(n?`L${s.x} ${a-r.x+2} Z`:"")}function By(e){return parseInt(e,10)}function fJe(e,t,n){return By(e.x+n.x)===By(2*t.x)&&By(e.y+n.y)===By(2*t.y)}function $N(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function QN(e,t,n){const a={x:e.x-t.x,y:e.y-t.y},r=Math.sqrt(a.x*a.x+a.y*a.y),s={x:a.x/r,y:a.y/r};return{x:t.x+s.x*n,y:t.y+s.y*n}}const mG=ot({fill:Boolean,...AG()},"VTrendline"),GN=yt()({name:"VTrendline",props:mG(),setup(e,t){let{slots:n}=t;const a=Ho(),r=ee(()=>e.id||`trendline-${a}`),s=ee(()=>Number(e.autoDrawDuration)||(e.fill?500:2e3)),o=M(0),i=M(null);function c(g,w){const{minX:b,maxX:x,minY:T,maxY:U}=w;g.length===1&&(g=[g[0],g[0]]);const k=g.length,S=e.max!=null?Number(e.max):Math.max(...g),E=e.min!=null?Number(e.min):Math.min(...g),C=(x-b)/(k-1),P=(U-T)/(S-E||1);return g.map((F,N)=>({x:b+N*C,y:U-(F-E)*P,value:F}))}const A=ee(()=>!!(e.showLabels||e.labels.length>0||n?.label)),d=ee(()=>parseFloat(e.lineWidth)||4),f=ee(()=>Number(e.width)),m=ee(()=>{const g=Number(e.padding);return{minX:g,maxX:f.value-g,minY:g,maxY:parseInt(e.height,10)-g}}),h=ee(()=>e.modelValue.map(g=>Fr(g,e.itemValue,g))),v=ee(()=>{const g=[],w=c(h.value,m.value),b=w.length;for(let x=0;g.length<b;x++){const T=w[x];let U=e.labels[x];U||(U=typeof T=="object"?T.value:T),g.push({x:T.x,value:String(U)})}return g});We(()=>e.modelValue,async()=>{if(await bn(),!e.autoDraw||!i.value)return;const g=i.value,w=g.getTotalLength();e.fill?(g.style.transformOrigin="bottom center",g.style.transition="none",g.style.transform="scaleY(0)",g.getBoundingClientRect(),g.style.transition=`transform ${s.value}ms ${e.autoDrawEasing}`,g.style.transform="scaleY(1)"):(g.style.strokeDasharray=`${w}`,g.style.strokeDashoffset=`${w}`,g.getBoundingClientRect(),g.style.transition=`stroke-dashoffset ${s.value}ms ${e.autoDrawEasing}`,g.style.strokeDashoffset="0"),o.value=w},{immediate:!0});function y(g){const w=typeof e.smooth=="boolean"?e.smooth?8:0:Number(e.smooth);return AJe(c(h.value,m.value),w,g,parseInt(e.height,10))}St(()=>{const g=e.gradient.slice().length?e.gradient.slice().reverse():[""];return p("svg",{display:"block","stroke-width":parseFloat(e.lineWidth)??4},[p("defs",null,[p("linearGradient",{id:r.value,gradientUnits:"userSpaceOnUse",x1:e.gradientDirection==="left"?"100%":"0",y1:e.gradientDirection==="top"?"100%":"0",x2:e.gradientDirection==="right"?"100%":"0",y2:e.gradientDirection==="bottom"?"100%":"0"},[g.map((w,b)=>p("stop",{offset:b/Math.max(g.length-1,1),"stop-color":w||"currentColor"},null))])]),A.value&&p("g",{key:"labels",style:{textAnchor:"middle",dominantBaseline:"mathematical",fill:"currentColor"}},[v.value.map((w,b)=>p("text",{x:w.x+d.value/2+d.value/2,y:parseInt(e.height,10)-4+(parseInt(e.labelSize,10)||7*.75),"font-size":Number(e.labelSize)||7},[n.label?.({index:b,value:w.value})??w.value]))]),p("path",{ref:i,d:y(e.fill),fill:e.fill?`url(#${r.value})`:"none",stroke:e.fill?"none":`url(#${r.value})`},null),e.fill&&p("path",{d:y(!1),fill:"none",stroke:e.color??e.gradient?.[0]},null)])})}}),mJe=ot({type:{type:String,default:"trend"},...fG(),...mG()},"VSparkline"),hJe=yt()({name:"VSparkline",props:mJe(),setup(e,t){let{slots:n}=t;const{textColorClasses:a,textColorStyles:r}=Fs(()=>e.color),s=ee(()=>!!(e.showLabels||e.labels.length>0||n?.label)),o=ee(()=>{let i=parseInt(e.height,10);return s.value&&(i+=parseInt(e.labelSize,10)*1.5),i});St(()=>{const i=e.type==="trend"?GN:HN,c=e.type==="trend"?GN.filterProps(e):HN.filterProps(e);return l(i,Fe({key:e.type,class:a.value,style:r.value,viewBox:`0 0 ${e.width} ${parseInt(o.value,10)}`},c),n)})}}),vJe=ot({...en(),...YQ({offset:8,minWidth:0,openDelay:0,closeDelay:100,location:"top center",transition:"scale-transition"})},"VSpeedDial"),pJe=yt()({name:"VSpeedDial",props:vJe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=on(e,"modelValue"),r=M(),s=ee(()=>{const[i,c="center"]=e.location?.split(" ")??[];return`${i} ${c}`}),o=ee(()=>({[`v-speed-dial__content--${s.value.replace(" ","-")}`]:!0}));return St(()=>{const i=Vh.filterProps(e);return l(Vh,Fe(i,{modelValue:a.value,"onUpdate:modelValue":c=>a.value=c,class:e.class,style:e.style,contentClass:["v-speed-dial__content",o.value,e.contentClass],location:s.value,ref:r,transition:"fade-transition"}),{...n,default:c=>l(Rn,{defaults:{VBtn:{size:"small"}}},{default:()=>[l(mo,{appear:!0,group:!0,transition:e.transition},{default:()=>[n.default?.(c)]})]})})}),{}}}),V4=Symbol.for("vuetify:v-stepper"),hG=ot({color:String,disabled:{type:[Boolean,String],default:!1},prevText:{type:String,default:"$vuetify.stepper.prev"},nextText:{type:String,default:"$vuetify.stepper.next"}},"VStepperActions"),vG=yt()({name:"VStepperActions",props:hG(),emits:{"click:prev":()=>!0,"click:next":()=>!0},setup(e,t){let{emit:n,slots:a}=t;const{t:r}=Pa();function s(){n("click:prev")}function o(){n("click:next")}return St(()=>{const i={onClick:s},c={onClick:o};return p("div",{class:"v-stepper-actions"},[l(Rn,{defaults:{VBtn:{disabled:["prev",!0].includes(e.disabled),text:r(e.prevText),variant:"text"}}},{default:()=>[a.prev?.({props:i})??l(jn,i,null)]}),l(Rn,{defaults:{VBtn:{color:e.color,disabled:["next",!0].includes(e.disabled),text:r(e.nextText),variant:"tonal"}}},{default:()=>[a.next?.({props:c})??l(jn,c,null)]})])}),{}}}),pG=Dc("v-stepper-header"),gJe=ot({color:String,title:String,subtitle:String,complete:Boolean,completeIcon:{type:un,default:"$complete"},editable:Boolean,editIcon:{type:un,default:"$edit"},error:Boolean,errorIcon:{type:un,default:"$error"},icon:un,ripple:{type:[Boolean,Object],default:!0},rules:{type:Array,default:()=>[]}},"StepperItem"),yJe=ot({...gJe(),...Hf()},"VStepperItem"),gG=yt()({name:"VStepperItem",directives:{vRipple:wo},props:yJe(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const a=$f(e,V4,!0),r=ee(()=>a?.value.value??e.value),s=ee(()=>e.rules.every(m=>m()===!0)),o=ee(()=>!e.disabled&&e.editable),i=ee(()=>!e.disabled&&e.editable),c=ee(()=>e.error||!s.value),A=ee(()=>e.complete||e.rules.length>0&&s.value),d=ee(()=>c.value?e.errorIcon:A.value?e.completeIcon:a.isSelected.value&&e.editable?e.editIcon:e.icon),f=ee(()=>({canEdit:i.value,hasError:c.value,hasCompleted:A.value,title:e.title,subtitle:e.subtitle,step:r.value,value:e.value}));return St(()=>{const m=(!a||a.isSelected.value||A.value||i.value)&&!c.value&&!e.disabled,h=!!(e.title!=null||n.title),v=!!(e.subtitle!=null||n.subtitle);function y(){a?.toggle()}return Aa(p("button",{class:ct(["v-stepper-item",{"v-stepper-item--complete":A.value,"v-stepper-item--disabled":e.disabled,"v-stepper-item--error":c.value},a?.selectedClass.value]),disabled:!e.editable,type:"button",onClick:y},[o.value&&Xd(!0,"v-stepper-item"),l(Yi,{key:"stepper-avatar",class:"v-stepper-item__avatar",color:m?e.color:void 0,size:24},{default:()=>[n.icon?.(f.value)??(d.value?l(ya,{icon:d.value},null):r.value)]}),p("div",{class:"v-stepper-item__content"},[h&&p("div",{key:"title",class:"v-stepper-item__title"},[n.title?.(f.value)??e.title]),v&&p("div",{key:"subtitle",class:"v-stepper-item__subtitle"},[n.subtitle?.(f.value)??e.subtitle]),n.default?.(f.value)])]),[[wo,e.editable&&e.ripple,null]])}),{}}}),_Je=ot({...Fa(eb(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VStepperWindow"),yG=yt()({name:"VStepperWindow",props:_Je(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=Sn(V4,null),r=on(e,"modelValue"),s=ee({get(){return r.value!=null||!a?r.value:a.items.value.find(o=>a.selected.value.includes(o.id))?.value},set(o){r.value=o}});return St(()=>{const o=vf.filterProps(e);return l(vf,Fe({_as:"VStepperWindow"},o,{modelValue:s.value,"onUpdate:modelValue":i=>s.value=i,class:["v-stepper-window",e.class],style:e.style,mandatory:!1,touch:!1}),n)}),{}}}),wJe=ot({...tb()},"VStepperWindowItem"),_G=yt()({name:"VStepperWindowItem",props:wJe(),setup(e,t){let{slots:n}=t;return St(()=>{const a=pf.filterProps(e);return l(pf,Fe({_as:"VStepperWindowItem"},a,{class:["v-stepper-window-item",e.class],style:e.style}),n)}),{}}}),bJe=ot({altLabels:Boolean,bgColor:String,completeIcon:un,editIcon:un,editable:Boolean,errorIcon:un,hideActions:Boolean,items:{type:Array,default:()=>[]},itemTitle:{type:String,default:"title"},itemValue:{type:String,default:"value"},nonLinear:Boolean,flat:Boolean,...kf()},"Stepper"),xJe=ot({...bJe(),...Of({mandatory:"force",selectedClass:"v-stepper-item--selected"}),...b4(),...Pc(hG(),["prevText","nextText"])},"VStepper"),CJe=yt()({name:"VStepper",props:xJe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{items:a,next:r,prev:s,selected:o}=Jd(e,V4),{displayClasses:i,mobile:c}=Ji(e),{completeIcon:A,editIcon:d,errorIcon:f,color:m,editable:h,prevText:v,nextText:y}=Ef(e),g=ee(()=>e.items.map((x,T)=>{const U=Fr(x,e.itemTitle,x),k=Fr(x,e.itemValue,T+1);return{title:U,value:k,raw:x}})),w=ee(()=>a.value.findIndex(x=>o.value.includes(x.id))),b=ee(()=>e.disabled?e.disabled:w.value===0?"prev":w.value===a.value.length-1?"next":!1);return fr({VStepperItem:{editable:h,errorIcon:f,completeIcon:A,editIcon:d,prevText:v,nextText:y},VStepperActions:{color:m,disabled:b,prevText:v,nextText:y}}),St(()=>{const x=K0.filterProps(e),T=!!(n.header||e.items.length),U=e.items.length>0,k=!e.hideActions&&!!(U||n.actions);return l(K0,Fe(x,{color:e.bgColor,class:["v-stepper",{"v-stepper--alt-labels":e.altLabels,"v-stepper--flat":e.flat,"v-stepper--non-linear":e.nonLinear,"v-stepper--mobile":c.value},i.value,e.class],style:e.style}),{default:()=>[T&&l(pG,{key:"stepper-header"},{default:()=>[g.value.map((S,E)=>{let{raw:C,...P}=S;return p(ze,null,[!!E&&l(bi,null,null),l(gG,P,{default:n[`header-item.${P.value}`]??n.header,icon:n.icon,title:n.title,subtitle:n.subtitle})])})]}),U&&l(yG,{key:"stepper-window"},{default:()=>[g.value.map(S=>l(_G,{value:S.value},{default:()=>n[`item.${S.value}`]?.(S)??n.item?.(S)}))]}),n.default?.({prev:s,next:r}),k&&(n.actions?.({next:r,prev:s})??l(vG,{key:"stepper-actions","onClick:prev":s,"onClick:next":r},n))]})}),{prev:s,next:r}}}),SJe=ot({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Lc(),...Xw()},"VSwitch"),EJe=yt()({name:"VSwitch",inheritAttrs:!1,props:SJe(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const r=on(e,"indeterminate"),s=on(e,"modelValue"),{loaderClasses:o}=Bg(e),{isFocused:i,focus:c,blur:A}=Vc(e),d=M(),f=M(),m=_a&&window.matchMedia("(forced-colors: active)").matches,h=qe(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),v=Ho(),y=qe(()=>e.id||`switch-${v}`);function g(){r.value&&(r.value=!1)}function w(b){b.stopPropagation(),b.preventDefault(),d.value?.input?.click()}return St(()=>{const[b,x]=Wd(n),T=Ws.filterProps(e),U=Qd.filterProps(e);return l(Ws,Fe({ref:f,class:["v-switch",{"v-switch--flat":e.flat},{"v-switch--inset":e.inset},{"v-switch--indeterminate":r.value},o.value,e.class]},b,T,{modelValue:s.value,"onUpdate:modelValue":k=>s.value=k,id:y.value,focused:i.value,style:e.style}),{...a,default:k=>{let{id:S,messagesId:E,isDisabled:C,isReadonly:P,isValid:F}=k;const N={model:s,isValid:F};return l(Qd,Fe({ref:d},U,{modelValue:s.value,"onUpdate:modelValue":[L=>s.value=L,g],id:S.value,"aria-describedby":E.value,type:"checkbox","aria-checked":r.value?"mixed":void 0,disabled:C.value,readonly:P.value,onFocus:c,onBlur:A},x),{...a,default:L=>{let{backgroundColorClasses:ie,backgroundColorStyles:le}=L;return p("div",{class:ct(["v-switch__track",m?void 0:ie.value]),style:Rt(le.value),onClick:w},[a["track-true"]&&p("div",{key:"prepend",class:"v-switch__track-true"},[a["track-true"](N)]),a["track-false"]&&p("div",{key:"append",class:"v-switch__track-false"},[a["track-false"](N)])])},input:L=>{let{inputNode:ie,icon:le,backgroundColorClasses:Q,backgroundColorStyles:Z}=L;return p(ze,null,[ie,p("div",{class:ct(["v-switch__thumb",{"v-switch__thumb--filled":le||e.loading},e.inset||m?void 0:Q.value]),style:Rt(e.inset?void 0:Z.value)},[a.thumb?l(Rn,{defaults:{VIcon:{icon:le,size:"x-small"}}},{default:()=>[a.thumb({...N,icon:le})]}):l(a4,null,{default:()=>[e.loading?l(kg,{name:"v-switch",active:!0,color:F.value===!1?void 0:h.value},{default:ce=>a.loader?a.loader(ce):l(hf,{active:ce.isActive,color:ce.color,indeterminate:!0,size:"16",width:"2"},null)}):le&&l(ya,{key:String(le),icon:le,size:"x-small"},null)]})])])}})}})}),gs({},f)}}),BJe=ot({color:String,height:[Number,String],window:Boolean,...en(),...Wr(),...Tf(),...tr(),...Un(),...aa()},"VSystemBar"),kJe=yt()({name:"VSystemBar",props:BJe(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=wa(e),{backgroundColorClasses:r,backgroundColorStyles:s}=Ca(()=>e.color),{elevationClasses:o}=ps(e),{roundedClasses:i}=hr(e),{ssrBootStyles:c}=Lf(),A=ee(()=>e.height??(e.window?32:24)),{layoutItemStyles:d}=If({id:e.name,order:ee(()=>parseInt(e.order,10)),position:Ht("top"),layoutSize:A,elementSize:A,active:ee(()=>!0),absolute:qe(()=>e.absolute)});return St(()=>l(e.tag,{class:ct(["v-system-bar",{"v-system-bar--window":e.window},a.value,r.value,o.value,i.value,e.class]),style:Rt([s.value,d.value,c.value,e.style])},n)),{}}}),L4=Symbol.for("vuetify:v-tabs"),TJe=ot({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...Fa(Yw({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),wG=yt()({name:"VTab",props:TJe(),setup(e,t){let{slots:n,attrs:a}=t;const{textColorClasses:r,textColorStyles:s}=Fs(()=>e.sliderColor),o=M(),i=M(),c=ee(()=>e.direction==="horizontal"),A=ee(()=>o.value?.group?.isSelected.value??!1);function d(f){let{value:m}=f;if(m){const h=o.value?.$el.parentElement?.querySelector(".v-tab--selected .v-tab__slider"),v=i.value;if(!h||!v)return;const y=getComputedStyle(h).color,g=h.getBoundingClientRect(),w=v.getBoundingClientRect(),b=c.value?"x":"y",x=c.value?"X":"Y",T=c.value?"right":"bottom",U=c.value?"width":"height",k=g[b],S=w[b],E=k>S?g[T]-w[T]:g[b]-w[b],C=Math.sign(E)>0?c.value?"right":"bottom":Math.sign(E)<0?c.value?"left":"top":"center",F=(Math.abs(E)+(Math.sign(E)<0?g[U]:w[U]))/Math.max(g[U],w[U])||0,N=g[U]/w[U]||0,L=1.5;RA(v,{backgroundColor:[y,"currentcolor"],transform:[`translate${x}(${E}px) scale${x}(${N})`,`translate${x}(${E/L}px) scale${x}(${(F-1)/L+1})`,"none"],transformOrigin:Array(3).fill(C)},{duration:225,easing:h0})}}return St(()=>{const f=jn.filterProps(e);return l(jn,Fe({symbol:L4,ref:o,class:["v-tab",e.class],style:e.style,tabindex:A.value?0:-1,role:"tab","aria-selected":String(A.value),active:!1},f,a,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":d}),{...n,default:()=>p(ze,null,[n.default?.()??e.text,!e.hideSlider&&p("div",{ref:i,class:ct(["v-tab__slider",r.value]),style:Rt(s.value)},null)])})}),gs({},o)}}),IJe=ot({...Fa(eb(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),bG=yt()({name:"VTabsWindow",props:IJe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=Sn(L4,null),r=on(e,"modelValue"),s=ee({get(){return r.value!=null||!a?r.value:a.items.value.find(o=>a.selected.value.includes(o.id))?.value},set(o){r.value=o}});return St(()=>{const o=vf.filterProps(e);return l(vf,Fe({_as:"VTabsWindow"},o,{modelValue:s.value,"onUpdate:modelValue":i=>s.value=i,class:["v-tabs-window",e.class],style:e.style,mandatory:!1,touch:!1}),n)}),{}}}),FJe=ot({...tb()},"VTabsWindowItem"),xG=yt()({name:"VTabsWindowItem",props:FJe(),setup(e,t){let{slots:n}=t;return St(()=>{const a=pf.filterProps(e);return l(pf,Fe({_as:"VTabsWindowItem"},a,{class:["v-tabs-window-item",e.class],style:e.style}),n)}),{}}});function PJe(e){return e?e.map(t=>f0(t)?t:{text:t,value:t}):[]}const DJe=ot({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...u4({mandatory:"force",selectedClass:"v-tab-item--selected"}),...rs(),...Un()},"VTabs"),UJe=yt()({name:"VTabs",props:DJe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const r=on(e,"modelValue"),s=ee(()=>PJe(e.items)),{densityClasses:o}=xo(e),{backgroundColorClasses:i,backgroundColorStyles:c}=Ca(()=>e.bgColor),{scopeId:A}=Gf();return fr({VTab:{color:qe(()=>e.color),direction:qe(()=>e.direction),stacked:qe(()=>e.stacked),fixed:qe(()=>e.fixedTabs),sliderColor:qe(()=>e.sliderColor),hideSlider:qe(()=>e.hideSlider)}}),St(()=>{const d=Q0.filterProps(e),f=!!(a.window||e.items.length>0);return p(ze,null,[l(Q0,Fe(d,{modelValue:r.value,"onUpdate:modelValue":m=>r.value=m,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},o.value,i.value,e.class],style:[{"--v-tabs-height":jt(e.height)},c.value,e.style],role:"tablist",symbol:L4},A,n),{default:()=>[a.default?.()??s.value.map(m=>a.tab?.({item:m})??l(wG,Fe(m,{key:m.text,value:m.value}),{default:a[`tab.${m.value}`]?()=>a[`tab.${m.value}`]?.({item:m}):void 0}))]}),f&&l(bG,Fe({modelValue:r.value,"onUpdate:modelValue":m=>r.value=m,key:"tabs-window"},A),{default:()=>[s.value.map(m=>a.item?.({item:m})??l(xG,{value:m.value},{default:()=>a[`item.${m.value}`]?.({item:m})})),a.window?.()]})])}),{}}}),RJe=ot({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...Lc(),...Ug()},"VTextarea"),NJe=yt()({name:"VTextarea",directives:{vIntersect:Ol},inheritAttrs:!1,props:RJe(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0,"update:rows":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:r}=t;const s=on(e,"modelValue"),{isFocused:o,focus:i,blur:c}=Vc(e),{onIntersect:A}=XQ(e),d=ee(()=>typeof e.counterValue=="function"?e.counterValue(s.value):(s.value||"").toString().length),f=ee(()=>{if(n.maxlength)return n.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),m=M(),h=M(),v=Ht(""),y=M(),g=ee(()=>e.persistentPlaceholder||o.value||e.active);function w(){y.value!==document.activeElement&&y.value?.focus(),o.value||i()}function b(F){w(),a("click:control",F)}function x(F){a("mousedown:control",F)}function T(F){F.stopPropagation(),w(),bn(()=>{s.value="",tw(e["onClick:clear"],F)})}function U(F){const N=F.target;if(s.value=N.value,e.modelModifiers?.trim){const L=[N.selectionStart,N.selectionEnd];bn(()=>{N.selectionStart=L[0],N.selectionEnd=L[1]})}}const k=M(),S=M(Number(e.rows)),E=ee(()=>["plain","underlined"].includes(e.variant));Ar(()=>{e.autoGrow||(S.value=Number(e.rows))});function C(){e.autoGrow&&bn(()=>{if(!k.value||!h.value)return;const F=getComputedStyle(k.value),N=getComputedStyle(h.value.$el),L=parseFloat(F.getPropertyValue("--v-field-padding-top"))+parseFloat(F.getPropertyValue("--v-input-padding-top"))+parseFloat(F.getPropertyValue("--v-field-padding-bottom")),ie=k.value.scrollHeight,le=parseFloat(F.lineHeight),Q=Math.max(parseFloat(e.rows)*le+L,parseFloat(N.getPropertyValue("--v-input-control-height"))),Z=parseFloat(e.maxRows)*le+L||1/0,ce=Qa(ie??0,Q,Z);S.value=Math.floor((ce-L)/le),v.value=jt(ce)})}cn(C),We(s,C),We(()=>e.rows,C),We(()=>e.maxRows,C),We(()=>e.density,C),We(S,F=>{a("update:rows",F)});let P;return We(k,F=>{F?(P=new ResizeObserver(C),P.observe(k.value)):P?.disconnect()}),la(()=>{P?.disconnect()}),St(()=>{const F=!!(r.counter||e.counter||e.counterValue),N=!!(F||r.details),[L,ie]=Wd(n),{modelValue:le,...Q}=Ws.filterProps(e),Z={...Gd.filterProps(e),"onClick:clear":T};return l(Ws,Fe({ref:m,modelValue:s.value,"onUpdate:modelValue":ce=>s.value=ce,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":E.value},e.class],style:e.style},L,Q,{centerAffix:S.value===1&&!E.value,focused:o.value}),{...r,default:ce=>{let{id:J,isDisabled:se,isDirty:G,isReadonly:D,isValid:j,hasDetails:ne}=ce;return l(Gd,Fe({ref:h,style:{"--v-textarea-control-height":v.value},onClick:b,onMousedown:x,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},Z,{id:J.value,active:g.value||G.value,centerAffix:S.value===1&&!E.value,dirty:G.value||e.dirty,disabled:se.value,focused:o.value,details:ne.value,error:j.value===!1}),{...r,default:H=>{let{props:{class:te,...Y}}=H;return p(ze,null,[e.prefix&&p("span",{class:"v-text-field__prefix"},[e.prefix]),Aa(p("textarea",Fe({ref:y,class:te,value:s.value,onInput:U,autofocus:e.autofocus,readonly:D.value,disabled:se.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:w,onBlur:c},Y,ie),null),[[Ol,{handler:A},null,{once:!0}]]),e.autoGrow&&Aa(p("textarea",{class:ct([te,"v-textarea__sizer"]),id:`${Y.id}-sizer`,"onUpdate:modelValue":K=>s.value=K,ref:k,readonly:!0,"aria-hidden":"true"},null),[[nh,s.value]]),e.suffix&&p("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:N?ce=>p(ze,null,[r.details?.(ce),F&&p(ze,null,[p("span",null,null),l(Jw,{active:e.persistentCounter||o.value,value:d.value,max:f.value,disabled:e.disabled},r.counter)])]):void 0})}),gs({},m,h,y)}}),VJe=ot({withBackground:Boolean,...en(),...aa(),...Un()},"VThemeProvider"),LJe=yt()({name:"VThemeProvider",props:VJe(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=wa(e);return()=>e.withBackground?l(e.tag,{class:ct(["v-theme-provider",a.value,e.class]),style:Rt(e.style)},{default:()=>[n.default?.()]}):n.default?.()}}),MJe=ot({dotColor:String,fillDot:Boolean,hideDot:Boolean,icon:un,iconColor:String,lineColor:String,...en(),...tr(),...Ou(),...Wr()},"VTimelineDivider"),OJe=yt()({name:"VTimelineDivider",props:MJe(),setup(e,t){let{slots:n}=t;const{sizeClasses:a,sizeStyles:r}=dv(e,"v-timeline-divider__dot"),{backgroundColorStyles:s,backgroundColorClasses:o}=Ca(()=>e.dotColor),{roundedClasses:i}=hr(e,"v-timeline-divider__dot"),{elevationClasses:c}=ps(e),{backgroundColorClasses:A,backgroundColorStyles:d}=Ca(()=>e.lineColor);return St(()=>p("div",{class:ct(["v-timeline-divider",{"v-timeline-divider--fill-dot":e.fillDot},e.class]),style:Rt(e.style)},[p("div",{class:ct(["v-timeline-divider__before",A.value]),style:Rt(d.value)},null),!e.hideDot&&p("div",{key:"dot",class:ct(["v-timeline-divider__dot",c.value,i.value,a.value]),style:Rt(r.value)},[p("div",{class:ct(["v-timeline-divider__inner-dot",o.value,i.value]),style:Rt(s.value)},[n.default?l(Rn,{key:"icon-defaults",disabled:!e.icon,defaults:{VIcon:{color:e.iconColor,icon:e.icon,size:e.size}}},n.default):l(ya,{key:"icon",color:e.iconColor,icon:e.icon,size:e.size},null)])]),p("div",{class:ct(["v-timeline-divider__after",A.value]),style:Rt(d.value)},null)])),{}}}),CG=ot({density:String,dotColor:String,fillDot:Boolean,hideDot:Boolean,hideOpposite:{type:Boolean,default:void 0},icon:un,iconColor:String,lineInset:[Number,String],side:{type:String,validator:e=>e==null||["start","end"].includes(e)},...en(),...Ur(),...Wr(),...tr(),...Ou(),...Un()},"VTimelineItem"),HJe=yt()({name:"VTimelineItem",props:CG(),setup(e,t){let{slots:n}=t;const{dimensionStyles:a}=Rr(e),r=Ht(0),s=M();return We(s,o=>{o&&(r.value=o.$el.querySelector(".v-timeline-divider__dot")?.getBoundingClientRect().width??0)},{flush:"post"}),St(()=>p("div",{class:ct(["v-timeline-item",{"v-timeline-item--fill-dot":e.fillDot,"v-timeline-item--side-start":e.side==="start","v-timeline-item--side-end":e.side==="end"},e.class]),style:Rt([{"--v-timeline-dot-size":jt(r.value),"--v-timeline-line-inset":e.lineInset?`calc(var(--v-timeline-dot-size) / 2 + ${jt(e.lineInset)})`:jt(0)},e.style])},[p("div",{class:"v-timeline-item__body",style:Rt(a.value)},[n.default?.()]),l(OJe,{ref:s,hideDot:e.hideDot,icon:e.icon,iconColor:e.iconColor,size:e.size,elevation:e.elevation,dotColor:e.dotColor,fillDot:e.fillDot,rounded:e.rounded},{default:n.icon}),e.density!=="compact"&&p("div",{class:"v-timeline-item__opposite"},[!e.hideOpposite&&n.opposite?.()])])),{}}}),$Je=ot({align:{type:String,default:"center",validator:e=>["center","start"].includes(e)},direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},justify:{type:String,default:"auto",validator:e=>["auto","center"].includes(e)},side:{type:String,validator:e=>e==null||["start","end"].includes(e)},lineThickness:{type:[String,Number],default:2},lineColor:String,truncateLine:{type:String,validator:e=>["start","end","both"].includes(e)},...Pc(CG({lineInset:0}),["dotColor","fillDot","hideOpposite","iconColor","lineInset","size"]),...en(),...rs(),...Un(),...aa()},"VTimeline"),QJe=yt()({name:"VTimeline",props:$Je(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=wa(e),{densityClasses:r}=xo(e),{rtlClasses:s}=Kr();fr({VTimelineDivider:{lineColor:qe(()=>e.lineColor)},VTimelineItem:{density:qe(()=>e.density),dotColor:qe(()=>e.dotColor),fillDot:qe(()=>e.fillDot),hideOpposite:qe(()=>e.hideOpposite),iconColor:qe(()=>e.iconColor),lineColor:qe(()=>e.lineColor),lineInset:qe(()=>e.lineInset),size:qe(()=>e.size)}});const o=ee(()=>{const c=e.side?e.side:e.density!=="default"?"end":null;return c&&`v-timeline--side-${c}`}),i=ee(()=>{const c=["v-timeline--truncate-line-start","v-timeline--truncate-line-end"];switch(e.truncateLine){case"both":return c;case"start":return c[0];case"end":return c[1];default:return null}});return St(()=>l(e.tag,{class:ct(["v-timeline",`v-timeline--${e.direction}`,`v-timeline--align-${e.align}`,`v-timeline--justify-${e.justify}`,i.value,{"v-timeline--inset-line":!!e.lineInset},a.value,r.value,o.value,s.value,e.class]),style:Rt([{"--v-timeline-line-thickness":jt(e.lineThickness)},e.style])},n)),{}}});function OA(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return String(e).padStart(t,"0")}const GJe=ot({allowedValues:Function,ampm:Boolean,color:String,disabled:Boolean,displayedValue:null,double:Boolean,format:{type:Function,default:e=>e},max:{type:Number,required:!0},min:{type:Number,required:!0},scrollable:Boolean,readonly:Boolean,rotate:{type:Number,default:0},step:{type:Number,default:1},modelValue:{type:Number}},"VTimePickerClock"),bB=yt()({name:"VTimePickerClock",props:GJe(),emits:{change:e=>!0,input:e=>!0},setup(e,t){let{emit:n}=t;const a=M(null),r=M(null),s=M(void 0),o=M(!1),i=M(null),c=M(null),A=F8(J=>n("change",J),750),{textColorClasses:d,textColorStyles:f}=Fs(()=>e.color),{backgroundColorClasses:m,backgroundColorStyles:h}=Ca(()=>e.color),v=ee(()=>e.max-e.min+1),y=ee(()=>e.double?v.value/2:v.value),g=ee(()=>360/y.value),w=ee(()=>g.value*Math.PI/180),b=ee(()=>e.modelValue==null?e.min:e.modelValue),x=ee(()=>.62),T=ee(()=>{const J=[];for(let se=e.min;se<=e.max;se=se+e.step)J.push(se);return J});We(()=>e.modelValue,J=>{s.value=J});function U(J){s.value!==J&&(s.value=J),n("input",J)}function k(J){return!e.allowedValues||e.allowedValues(J)}function S(J){if(!e.scrollable||e.disabled)return;J.preventDefault();const se=Math.sign(-J.deltaY||1);let G=b.value;do G=G+se,G=(G-e.min+v.value)%v.value+e.min;while(!k(G)&&G!==b.value);G!==e.displayedValue&&U(G),A(G)}function E(J){return e.double&&J-e.min>=y.value}function C(J){return E(J)?x.value:1}function P(J){const se=e.rotate*Math.PI/180;return{x:Math.sin((J-e.min)*w.value+se)*C(J),y:-Math.cos((J-e.min)*w.value+se)*C(J)}}function F(J,se){const G=(Math.round(J/g.value)+(se?y.value:0))%v.value+e.min;return J<360-g.value/2?G:se?e.max-y.value+1:e.min}function N(J){const{x:se,y:G}=P(J);return{left:`${Math.round(50+se*50)}%`,top:`${Math.round(50+G*50)}%`}}function L(J,se){const G=se.x-J.x,D=se.y-J.y;return Math.sqrt(G*G+D*D)}function ie(J,se){const G=2*Math.atan2(se.y-J.y-L(J,se),se.x-J.x);return Math.abs(G*180/Math.PI)}function le(J){i.value===null&&(i.value=J),c.value=J,U(J)}function Q(J){if(J.preventDefault(),!o.value&&J.type!=="click"||!a.value)return;const{width:se,top:G,left:D}=a.value?.getBoundingClientRect(),{width:j}=r.value?.getBoundingClientRect()??{width:0},{clientX:ne,clientY:H}="touches"in J?J.touches[0]:J,te={x:se/2,y:-se/2},Y={x:ne-D,y:G-H},K=Math.round(ie(te,Y)-e.rotate+360)%360,X=e.double&&L(te,Y)<(j+j*x.value)/4,ae=Math.ceil(15/g.value);let oe;for(let W=0;W<ae;W++)if(oe=F(K+W*g.value,X),k(oe)||(oe=F(K-W*g.value,X),k(oe)))return le(oe)}function Z(J){e.disabled||(J.preventDefault(),window.addEventListener("mousemove",Q),window.addEventListener("touchmove",Q),window.addEventListener("mouseup",ce),window.addEventListener("touchend",ce),i.value=null,c.value=null,o.value=!0,Q(J))}function ce(J){J.stopPropagation(),window.removeEventListener("mousemove",Q),window.removeEventListener("touchmove",Q),window.removeEventListener("mouseup",ce),window.removeEventListener("touchend",ce),o.value=!1,c.value!==null&&k(c.value)&&n("change",c.value)}St(()=>p("div",{class:ct([{"v-time-picker-clock":!0,"v-time-picker-clock--indeterminate":e.modelValue==null,"v-time-picker-clock--readonly":e.readonly}]),onMousedown:Z,onTouchstart:Z,onWheel:S,ref:a},[p("div",{class:"v-time-picker-clock__inner",ref:r},[p("div",{class:ct([{"v-time-picker-clock__hand":!0,"v-time-picker-clock__hand--inner":E(e.modelValue)},d.value]),style:Rt([{transform:`rotate(${e.rotate+g.value*(b.value-e.min)}deg) scaleY(${C(b.value)})`},f.value])},null),T.value.map(J=>{const se=J===b.value;return p("div",{class:ct([{"v-time-picker-clock__item":!0,"v-time-picker-clock__item--active":se,"v-time-picker-clock__item--disabled":e.disabled||!k(J)},se&&m.value]),style:Rt([N(J),se&&h.value])},[p("span",null,[e.format(J)])])})])]))}}),zJe=ot({ampm:Boolean,color:String,disabled:Boolean,hour:Number,minute:Number,second:Number,period:String,readonly:Boolean,useSeconds:Boolean,value:Number,viewMode:String},"VTimePickerControls"),xB=yt()({name:"VTimePickerControls",props:zJe(),emits:{"update:period":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const{t:r}=Pa();return St(()=>{let s=e.hour;return e.ampm&&(s=s?(s-1)%12+1:12),p("div",{class:"v-time-picker-controls"},[p("div",{class:ct({"v-time-picker-controls__time":!0,"v-time-picker-controls__time--with-seconds":e.useSeconds})},[l(jn,{active:e.viewMode==="hour",color:e.viewMode==="hour"?e.color:void 0,disabled:e.disabled,variant:"tonal",class:ct({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time--with-ampm__btn":e.ampm,"v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),text:e.hour==null?"--":OA(`${s}`),onClick:()=>n("update:viewMode","hour")},null),p("span",{class:ct(["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":e.useSeconds}])},[O(":")]),l(jn,{active:e.viewMode==="minute",color:e.viewMode==="minute"?e.color:void 0,class:ct({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":e.viewMode==="minute","v-time-picker-controls__time--with-ampm__btn":e.ampm,"v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),disabled:e.disabled,variant:"tonal",text:e.minute==null?"--":OA(e.minute),onClick:()=>n("update:viewMode","minute")},null),e.useSeconds&&p("span",{class:ct(["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":e.useSeconds}]),key:"secondsDivider"},[O(":")]),e.useSeconds&&l(jn,{key:"secondsVal",active:e.viewMode==="second",color:e.viewMode==="second"?e.color:void 0,variant:"tonal",onClick:()=>n("update:viewMode","second"),class:ct({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":e.viewMode==="second","v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),disabled:e.disabled,text:e.second==null?"--":OA(e.second)},null),e.ampm&&p("div",{class:"v-time-picker-controls__ampm"},[l(jn,{active:e.period==="am",color:e.period==="am"?e.color:void 0,class:ct({"v-time-picker-controls__ampm__am":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":e.period==="am"}),disabled:e.disabled,text:r("$vuetify.timePicker.am"),variant:e.disabled&&e.period==="am"?"elevated":"tonal",onClick:()=>e.period!=="am"?n("update:period","am"):null},null),l(jn,{active:e.period==="pm",color:e.period==="pm"?e.color:void 0,class:ct({"v-time-picker-controls__ampm__pm":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":e.period==="pm"}),disabled:e.disabled,text:r("$vuetify.timePicker.pm"),variant:e.disabled&&e.period==="pm"?"elevated":"tonal",onClick:()=>e.period!=="pm"?n("update:period","pm"):null},null)])])])}),{}}}),KJe=yi(24),SG=yi(12),WJe=SG.map(e=>e+12);yi(60);const jJe=ot({allowedHours:[Function,Array],allowedMinutes:[Function,Array],allowedSeconds:[Function,Array],disabled:Boolean,format:{type:String,default:"ampm"},max:String,min:String,viewMode:{type:String,default:"hour"},modelValue:null,readonly:Boolean,scrollable:Boolean,useSeconds:Boolean,...Fa(nb({title:"$vuetify.timePicker.title"}),["landscape"])},"VTimePicker"),qJe=yt()({name:"VTimePicker",props:jJe(),emits:{"update:hour":e=>!0,"update:minute":e=>!0,"update:period":e=>!0,"update:second":e=>!0,"update:modelValue":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const{t:r}=Pa(),s=M(null),o=M(null),i=M(null),c=M(null),A=M(null),d=M(null),f=M("am"),m=on(e,"viewMode","hour"),h=M(null),v=M(null),y=ee(()=>{let N;if(e.allowedHours instanceof Array?N=le=>e.allowedHours.includes(le):N=e.allowedHours,!e.min&&!e.max)return N;const L=e.min?Number(e.min.split(":")[0]):0,ie=e.max?Number(e.max.split(":")[0]):23;return le=>le>=Number(L)&&le<=Number(ie)&&(!N||N(le))}),g=ee(()=>{let N;const L=!y.value||s.value===null||y.value(s.value);if(e.allowedMinutes instanceof Array?N=se=>e.allowedMinutes.includes(se):N=e.allowedMinutes,!e.min&&!e.max)return L?N:()=>!1;const[ie,le]=e.min?e.min.split(":").map(Number):[0,0],[Q,Z]=e.max?e.max.split(":").map(Number):[23,59],ce=ie*60+Number(le),J=Q*60+Number(Z);return se=>{const G=60*s.value+se;return G>=ce&&G<=J&&L&&(!N||N(se))}}),w=ee(()=>{let N;const ie=(!y.value||s.value===null||y.value(s.value))&&(!g.value||o.value===null||g.value(o.value));if(e.allowedSeconds instanceof Array?N=j=>e.allowedSeconds.includes(j):N=e.allowedSeconds,!e.min&&!e.max)return ie?N:()=>!1;const[le,Q,Z]=e.min?e.min.split(":").map(Number):[0,0,0],[ce,J,se]=e.max?e.max.split(":").map(Number):[23,59,59],G=le*3600+Q*60+Number(Z||0),D=ce*3600+J*60+Number(se||0);return j=>{const ne=3600*s.value+60*o.value+j;return ne>=G&&ne<=D&&ie&&(!N||N(j))}}),b=ee(()=>e.format==="ampm");We(()=>e.modelValue,N=>S(N)),cn(()=>{S(e.modelValue)});function x(){return s.value!=null&&o.value!=null&&(!e.useSeconds||i.value!=null)?`${OA(s.value)}:${OA(o.value)}`+(e.useSeconds?`:${OA(i.value)}`:""):null}function T(){const N=x();N!==null&&n("update:modelValue",N)}function U(N){return N?(N-1)%12+1:12}function k(N,L){return N%12+(L==="pm"?12:0)}function S(N){if(N==null||N==="")s.value=null,o.value=null,i.value=null;else if(N instanceof Date)s.value=N.getHours(),o.value=N.getMinutes(),i.value=N.getSeconds();else{const[L,,ie,,le,Q]=N.trim().toLowerCase().match(/^(\d+):(\d+)(:(\d+))?([ap]m)?$/)||new Array(6);s.value=Q?k(parseInt(L,10),Q):parseInt(L,10),o.value=parseInt(ie,10),i.value=parseInt(le||0,10)}f.value=s.value==null||s.value<12?"am":"pm"}function E(N,L){const ie=y.value;if(!ie)return L;const le=b.value?L<12?SG:WJe:KJe;return((le.find(Z=>ie((Z+L)%le.length+le[0]))||0)+L)%le.length+le[0]}function C(N){if(f.value=N,s.value!=null){const L=s.value+(f.value==="am"?-12:12);s.value=E("hour",L)}return n("update:period",N),T(),!0}function P(N){m.value==="hour"?s.value=b.value?k(N,f.value):N:m.value==="minute"?o.value=N:i.value=N}function F(N){switch(m.value||"hour"){case"hour":n("update:hour",N);break;case"minute":n("update:minute",N);break;case"second":n("update:second",N);break}const L=s.value!==null&&o.value!==null&&(e.useSeconds?i.value!==null:!0);m.value==="hour"?m.value="minute":e.useSeconds&&m.value==="minute"&&(m.value="second"),!(s.value===c.value&&o.value===A.value&&(!e.useSeconds||i.value===d.value)||x()===null)&&(c.value=s.value,A.value=o.value,e.useSeconds&&(d.value=i.value),L&&T())}St(()=>{const N=Lh.filterProps(e),L=xB.filterProps(e),ie=bB.filterProps(Fa(e,["format","modelValue","min","max"]));return l(Lh,Fe(N,{color:void 0,class:["v-time-picker",e.class],style:e.style}),{title:()=>a.title?.()??p("div",{class:"v-time-picker__title"},[r(e.title)]),header:()=>l(xB,Fe(L,{ampm:b.value,hour:s.value,minute:o.value,period:f.value,second:i.value,viewMode:m.value,"onUpdate:period":le=>C(le),"onUpdate:viewMode":le=>m.value=le,ref:h}),null),default:()=>l(bB,Fe(ie,{allowedValues:m.value==="hour"?y.value:m.value==="minute"?g.value:w.value,double:m.value==="hour"&&!b.value,format:m.value==="hour"?b.value?U:le=>le:le=>OA(le,2),max:m.value==="hour"?b.value&&f.value==="am"?11:23:59,min:m.value==="hour"&&b.value&&f.value==="pm"?12:0,size:20,step:m.value==="hour"?1:5,modelValue:m.value==="hour"?s.value:m.value==="minute"?o.value:i.value,onChange:F,onInput:P,ref:v}),null),actions:a.actions})})}}),YJe=ot({...en(),...tl({variant:"text"})},"VToolbarItems"),XJe=yt()({name:"VToolbarItems",props:YJe(),setup(e,t){let{slots:n}=t;return fr({VBtn:{color:qe(()=>e.color),height:"inherit",variant:qe(()=>e.variant)}}),St(()=>p("div",{class:ct(["v-toolbar-items",e.class]),style:Rt(e.style)},[n.default?.()])),{}}}),JJe=ot({id:String,interactive:Boolean,text:String,...Fa(Dg({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:null}),["absolute","persistent"])},"VTooltip"),EG=yt()({name:"VTooltip",props:JJe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=on(e,"modelValue"),{scopeId:r}=Gf(),s=Ho(),o=qe(()=>e.id||`v-tooltip-${s}`),i=M(),c=ee(()=>e.location.split(" ").length>1?e.location:e.location+" center"),A=ee(()=>e.origin==="auto"||e.origin==="overlap"||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),d=qe(()=>e.transition!=null?e.transition:a.value?"scale-transition":"fade-transition"),f=ee(()=>Fe({"aria-describedby":o.value},e.activatorProps));return St(()=>{const m=Iu.filterProps(e);return l(Iu,Fe({ref:i,class:["v-tooltip",{"v-tooltip--interactive":e.interactive},e.class],style:e.style,id:o.value},m,{modelValue:a.value,"onUpdate:modelValue":h=>a.value=h,transition:d.value,absolute:!0,location:c.value,origin:A.value,persistent:!0,role:"tooltip",activatorProps:f.value,_disableGlobalStack:!0},r),{activator:n.activator,default:function(){for(var h=arguments.length,v=new Array(h),y=0;y<h;y++)v[y]=arguments[y];return n.default?.(...v)??e.text}})}),gs({},i)}}),ZJe=ot({...Fa(PQ({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand"}),["subgroup"])},"VTreeviewGroup"),CB=yt()({name:"VTreeviewGroup",props:ZJe(),setup(e,t){let{slots:n}=t;const a=M(),r=ee(()=>a.value?.isOpen?e.collapseIcon:e.expandIcon),s=ee(()=>({VTreeviewItem:{prependIcon:void 0,appendIcon:void 0,toggleIcon:r.value}}));return St(()=>{const o=z0.filterProps(e);return l(z0,Fe(o,{ref:a,class:["v-treeview-group",e.class],subgroup:!0}),{...n,activator:n.activator?i=>p(ze,null,[l(Rn,{defaults:s.value},{default:()=>[n.activator?.(i)]})]):void 0})}),{}}}),BG=Symbol.for("vuetify:v-treeview"),kG=ot({loading:Boolean,hideActions:Boolean,indentLines:Array,toggleIcon:un,...RQ({slim:!0})},"VTreeviewItem"),SB=yt()({name:"VTreeviewItem",props:kG(),emits:{toggleExpand:e=>!0},setup(e,t){let{slots:n,emit:a}=t;const r=Sn(BG,{visibleIds:M()}).visibleIds,s=M(),o=ee(()=>s.value?.root.activatable.value&&s.value?.isGroupActivator),i=ee(()=>s.value?.link.isClickable.value||e.value!=null&&!!s.value?.list),c=ee(()=>!e.disabled&&e.link!==!1&&(e.link||i.value||o.value)),A=ee(()=>r.value&&!r.value.has(gn(s.value?.id)));function d(m){c.value&&o.value&&s.value?.activate(!s.value?.isActivated,m)}function f(m){m.preventDefault(),m.stopPropagation(),a("toggleExpand",m)}return St(()=>{const m=Hl.filterProps(e),h=n.prepend||e.toggleIcon||e.indentLines;return l(Hl,Fe({ref:s},m,{active:s.value?.isActivated||void 0,class:["v-treeview-item",{"v-treeview-item--activatable-group-activator":o.value,"v-treeview-item--filtered":A.value},e.class],ripple:!1,onClick:d}),{...n,prepend:h?v=>p(ze,null,[e.indentLines&&e.indentLines.length>0?p("div",{key:"indent-lines",class:"v-treeview-indent-lines",style:{"--v-indent-parts":e.indentLines.length}},[e.indentLines.map(y=>p("div",{class:ct(`v-treeview-indent-line v-treeview-indent-line--${y}`)},null))]):"",!e.hideActions&&l($Q,{start:!0},{default:()=>[e.toggleIcon?l(jn,{density:"compact",icon:e.toggleIcon,loading:e.loading,variant:"text",onClick:f},{loader:()=>l(hf,{indeterminate:"disable-shrink",size:"20",width:"2"},null)}):p("div",{class:"v-treeview-item__level"},null)]}),n.prepend?.(v)]):void 0})}),gs({},s)}}),TG=ot({fluid:Boolean,disabled:Boolean,loadChildren:Function,loadingIcon:{type:String,default:"$loading"},items:Array,openOnClick:{type:Boolean,default:void 0},indeterminateIcon:{type:un,default:"$checkboxIndeterminate"},falseIcon:un,trueIcon:un,returnObject:Boolean,activatable:Boolean,selectable:Boolean,selectedColor:String,selectStrategy:[String,Function,Object],index:Number,isLastGroup:Boolean,separateRoots:Boolean,parentIndentLines:Array,indentLinesVariant:String,path:{type:Array,default:()=>[]},...Pc(kG(),["hideActions"]),...rs()},"VTreeviewChildren"),B2=yt()({name:"VTreeviewChildren",props:TG(),setup(e,t){let{slots:n}=t;const a=es(new Set),r=M([]),s=ee(()=>!e.disabled&&(e.openOnClick!=null?e.openOnClick:e.selectable&&!e.activatable));async function o(c){try{if(!e.items?.length||!e.loadChildren)return;c?.children?.length===0&&(a.add(c.value),await e.loadChildren(c.raw))}finally{a.delete(c.value)}}function i(c,A){e.selectable&&c(A)}return()=>n.default?.()??e.items?.map((c,A,d)=>{const{children:f,props:m}=c,h=a.has(c.value),v=!!d.at(A+1)?.children,y=e.path?.length??0,g=d.length-1===A,w={index:A,depth:y,isFirst:A===0,isLast:g,path:[...e.path,A],hideAction:e.hideActions},b=$te({depth:y,isLast:g,isLastGroup:e.isLastGroup,leafLinks:!e.hideActions&&!e.fluid,separateRoots:e.separateRoots,parentIndentLines:e.parentIndentLines,variant:e.indentLinesVariant}),x={prepend:k=>p(ze,null,[e.selectable&&(!f||f&&!["leaf","single-leaf"].includes(e.selectStrategy))&&p("div",null,[l(Tu,{key:c.value,modelValue:k.isSelected,disabled:e.disabled,loading:h,color:e.selectedColor,density:e.density,indeterminate:k.isIndeterminate,indeterminateIcon:e.indeterminateIcon,falseIcon:e.falseIcon,trueIcon:e.trueIcon,"onUpdate:modelValue":S=>i(k.select,S),onClick:S=>S.stopPropagation(),onKeydown:S=>{["Enter","Space"].includes(S.key)&&(S.stopPropagation(),i(k.select,k.isSelected))}},null)]),n.prepend?.({...k,...w,item:c.raw,internalItem:c})]),append:n.append?k=>n.append?.({...k,...w,item:c.raw,internalItem:c}):void 0,title:n.title?k=>n.title?.({...k,item:c.raw,internalItem:c}):void 0,subtitle:n.subtitle?k=>n.subtitle?.({...k,item:c.raw,internalItem:c}):void 0},T=CB.filterProps(m),U=B2.filterProps({...e,...w});return f?l(CB,Fe(T,{value:e.returnObject?c.raw:T?.value,rawId:T?.value}),{activator:k=>{let{props:S}=k;const E={...m,...S,value:m?.value,onToggleExpand:[()=>o(c),S.onClick],onClick:s.value?[()=>o(c),S.onClick]:()=>i(r.value[A]?.select,!r.value[A]?.isSelected)};return l(SB,Fe({ref:C=>r.value[A]=C},E,{hideActions:e.hideActions,indentLines:b.node,value:e.returnObject?c.raw:m.value,loading:h}),x)},default:()=>l(B2,Fe(U,{items:f,indentLinesVariant:e.indentLinesVariant,parentIndentLines:b.children,isLastGroup:v,returnObject:e.returnObject}),n)}):Tx(n.item,{props:m,item:c.raw,internalItem:c},()=>c.type==="divider"?Tx(n.divider,{props:c.raw},()=>l(bi,c.props,null)):c.type==="subheader"?Tx(n.subheader,{props:c.raw},()=>l(vv,c.props,null)):l(SB,Fe(m,{hideActions:e.hideActions,indentLines:b.leaf,value:e.returnObject?gn(c.raw):m.value}),x))})}});function IG(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];for(const n of e)t.push(n),n.children&&IG(n.children,t);return t}const eZe=ot({openAll:Boolean,indentLines:[Boolean,String],search:String,...pv({filterKeys:["title"]}),...Fa(TG(),["index","path","indentLinesVariant","parentIndentLines","isLastGroup"]),...Fa(HQ({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand",slim:!0}),["nav","openStrategy"]),modelValue:Array},"VTreeview"),tZe=yt()({name:"VTreeview",props:eZe(),emits:{"update:opened":e=>!0,"update:activated":e=>!0,"update:selected":e=>!0,"update:modelValue":e=>!0,"click:open":e=>!0,"click:select":e=>!0},setup(e,t){let{slots:n,emit:a}=t;const{items:r}=OQ(e),s=qe(()=>e.activeColor),o=qe(()=>e.baseColor),i=qe(()=>e.color),c=on(e,"activated"),A=on(e,"selected"),d=ee({get:()=>e.modelValue??A.value,set(x){A.value=x,a("update:modelValue",x)}}),f=M(),m=ee(()=>e.openAll?b(r.value):e.opened),h=ee(()=>IG(r.value)),v=qe(()=>e.search),{filteredItems:y}=gv(e,h,v),g=ee(()=>{if(!v.value)return null;const x=f.value?.getPath;return x?new Set(y.value.flatMap(T=>{const U=e.returnObject?T.raw:T.props.value;return[...x(U),...w(U)].map(gn)})):null});function w(x){const T=[],U=(f.value?.children.get(x)??[]).slice();for(;U.length;){const k=U.shift();k&&(T.push(k),U.push(...(f.value?.children.get(k)??[]).slice()))}return T}function b(x){let T=[];for(const U of x)U.children&&(T.push(e.returnObject?gn(U.raw):U.value),U.children&&(T=T.concat(b(U.children))));return T}return Ia(BG,{visibleIds:g}),fr({VTreeviewGroup:{activeColor:s,baseColor:o,color:i,collapseIcon:qe(()=>e.collapseIcon),expandIcon:qe(()=>e.expandIcon)},VTreeviewItem:{activeClass:qe(()=>e.activeClass),activeColor:s,baseColor:o,color:i,density:qe(()=>e.density),disabled:qe(()=>e.disabled),lines:qe(()=>e.lines),variant:qe(()=>e.variant)}}),St(()=>{const x=Nh.filterProps(e),T=B2.filterProps(e),U=typeof e.indentLines=="boolean"?"default":e.indentLines;return l(Nh,Fe({ref:f},x,{class:["v-treeview",{"v-treeview--fluid":e.fluid},e.class],openStrategy:"multiple",style:e.style,opened:m.value,activated:c.value,"onUpdate:activated":k=>c.value=k,selected:d.value,"onUpdate:selected":k=>d.value=k}),{default:()=>[l(B2,Fe(T,{density:e.density,returnObject:e.returnObject,items:r.value,parentIndentLines:e.indentLines?[]:void 0,indentLinesVariant:U}),n)]})}),{}}}),nZe=yt()({name:"VValidation",props:gQ(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=yQ(e,"validation");return()=>n.default?.(a)}}),aZe=Object.freeze(Object.defineProperty({__proto__:null,VAlert:fWe,VAlertTitle:dQ,VApp:_Ke,VAppBar:OKe,VAppBarNavIcon:iWe,VAppBarTitle:lWe,VAutocomplete:Pje,VAvatar:Yi,VBadge:Uje,VBanner:Vje,VBannerActions:n7,VBannerText:a7,VBottomNavigation:Mje,VBottomSheet:Hje,VBreadcrumbs:zje,VBreadcrumbsDivider:s7,VBreadcrumbsItem:o7,VBtn:jn,VBtnGroup:JE,VBtnToggle:KKe,VCard:Yje,VCardActions:i7,VCardItem:c7,VCardSubtitle:l7,VCardText:d7,VCardTitle:u7,VCarousel:sqe,VCarouselItem:iqe,VCheckbox:CWe,VCheckboxBtn:Tu,VChip:hv,VChipGroup:TWe,VClassIcon:wk,VCode:lqe,VCol:VYe,VColorPicker:Xqe,VCombobox:Zqe,VComponentIcon:RS,VConfirmEdit:tYe,VContainer:DYe,VCounter:Jw,VDataIterator:dYe,VDataTable:BYe,VDataTableFooter:W0,VDataTableHeaders:gf,VDataTableRow:P4,VDataTableRows:yf,VDataTableServer:FYe,VDataTableVirtual:TYe,VDatePicker:qYe,VDatePickerControls:mB,VDatePickerHeader:hB,VDatePickerMonth:vB,VDatePickerMonths:pB,VDatePickerYears:gB,VDefaultsProvider:Rn,VDialog:oB,VDialogBottomTransition:CKe,VDialogTopTransition:SKe,VDialogTransition:Kw,VDivider:bi,VEmptyState:XYe,VExpandTransition:Ww,VExpandXTransition:s4,VExpansionPanel:JYe,VExpansionPanelText:yB,VExpansionPanelTitle:_B,VExpansionPanels:tXe,VFab:aXe,VFabTransition:xKe,VFadeTransition:M0,VField:Gd,VFieldLabel:Ep,VFileInput:oXe,VFooter:lXe,VForm:cXe,VHover:AXe,VIcon:ya,VImg:Tc,VInfiniteScroll:mXe,VInput:Ws,VItem:pXe,VItemGroup:vXe,VKbd:yXe,VLabel:mv,VLayout:wXe,VLayoutItem:xXe,VLazy:SXe,VLigatureIcon:$ne,VList:Nh,VListGroup:z0,VListImg:qWe,VListItem:Hl,VListItemAction:$Q,VListItemMedia:JWe,VListItemSubtitle:DQ,VListItemTitle:UQ,VListSubheader:vv,VLocaleProvider:BXe,VMain:TXe,VMenu:Vh,VMessages:vQ,VNavigationDrawer:LXe,VNoSsr:MXe,VNumberInput:GXe,VOtpInput:KXe,VOverlay:Iu,VPagination:AB,VParallax:qXe,VProgressCircular:hf,VProgressLinear:jw,VRadio:XXe,VRadioGroup:ZXe,VRangeSlider:tJe,VRating:aJe,VResponsive:YE,VRow:GYe,VScaleTransition:a4,VScrollXReverseTransition:BKe,VScrollXTransition:EKe,VScrollYReverseTransition:TKe,VScrollYTransition:kKe,VSelect:_4,VSelectionControl:Qd,VSelectionControlGroup:fQ,VSheet:K0,VSkeletonLoader:iJe,VSlideGroup:Q0,VSlideGroupItem:lJe,VSlideXReverseTransition:FKe,VSlideXTransition:IKe,VSlideYReverseTransition:PKe,VSlideYTransition:r4,VSlider:dB,VSnackbar:wB,VSnackbarQueue:dJe,VSpacer:eG,VSparkline:hJe,VSpeedDial:pJe,VStepper:CJe,VStepperActions:vG,VStepperHeader:pG,VStepperItem:gG,VStepperWindow:yG,VStepperWindowItem:_G,VSvgIcon:_k,VSwitch:EJe,VSystemBar:kJe,VTab:wG,VTable:_f,VTabs:UJe,VTabsWindow:bG,VTabsWindowItem:xG,VTextField:Ic,VTextarea:NJe,VThemeProvider:LJe,VTimePicker:qJe,VTimePickerClock:bB,VTimePickerControls:xB,VTimeline:QJe,VTimelineItem:HJe,VToolbar:XE,VToolbarItems:XJe,VToolbarTitle:n4,VTooltip:EG,VTreeview:tZe,VTreeviewGroup:CB,VTreeviewItem:SB,VValidation:nZe,VVirtualScroll:Zw,VWindow:vf,VWindowItem:pf},Symbol.toStringTag,{value:"Module"}));function rZe(e,t){const n=t.modifiers||{},a=t.value,{once:r,immediate:s,...o}=n,i=!Object.keys(o).length,{handler:c,options:A}=typeof a=="object"?a:{handler:a,options:{attributes:o?.attr??i,characterData:o?.char??i,childList:o?.child??i,subtree:o?.sub??i}},d=new MutationObserver(function(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],m=arguments.length>1?arguments[1]:void 0;c?.(f,m),r&&FG(e,t)});s&&c?.([],d),e._mutate=Object(e._mutate),e._mutate[t.instance.$.uid]={observer:d},d.observe(e,A)}function FG(e,t){e._mutate?.[t.instance.$.uid]&&(e._mutate[t.instance.$.uid].observer.disconnect(),delete e._mutate[t.instance.$.uid])}const sZe={mounted:rZe,unmounted:FG};function oZe(e,t){const n=t.value,a={passive:!t.modifiers?.active};window.addEventListener("resize",n,a),e._onResize=Object(e._onResize),e._onResize[t.instance.$.uid]={handler:n,options:a},t.modifiers?.quiet||n()}function iZe(e,t){if(!e._onResize?.[t.instance.$.uid])return;const{handler:n,options:a}=e._onResize[t.instance.$.uid];window.removeEventListener("resize",n,a),delete e._onResize[t.instance.$.uid]}const lZe={mounted:oZe,unmounted:iZe};function PG(e,t){const{self:n=!1}=t.modifiers??{},a=t.value,r=typeof a=="object"&&a.options||{passive:!0},s=typeof a=="function"||"handleEvent"in a?a:a.handler,o=n?e:t.arg?document.querySelector(t.arg):window;o&&(o.addEventListener("scroll",s,r),e._onScroll=Object(e._onScroll),e._onScroll[t.instance.$.uid]={handler:s,options:r,target:n?void 0:o})}function DG(e,t){if(!e._onScroll?.[t.instance.$.uid])return;const{handler:n,options:a,target:r=e}=e._onScroll[t.instance.$.uid];r.removeEventListener("scroll",n,a),delete e._onScroll[t.instance.$.uid]}function uZe(e,t){t.value!==t.oldValue&&(DG(e,t),PG(e,t))}const cZe={mounted:PG,unmounted:DG,updated:uZe};function dZe(e,t){const n=typeof e=="string"?I(e):e,a=AZe(n,t);return{mounted:a,updated:a,unmounted(r){E8(null,r)}}}function AZe(e,t){return function(n,a,r){const s=typeof t=="function"?t(a):t,o=a.value?.text??a.value??s?.text,i=f0(a.value)?a.value:{},c=()=>o??n.textContent,A=(r.ctx===a.instance.$?fZe(r,a.instance.$)?.provides:r.ctx?.provides)??a.instance.$.provides,d=Wl(e,Fe(s,i),c);d.appContext=Object.assign(Object.create(null),a.instance.$.appContext,{provides:A}),E8(d,n)}}function fZe(e,t){const n=new Set,a=s=>{for(const o of s){if(!o)continue;if(o===e||o.el&&e.el&&o.el===e.el)return!0;n.add(o);let i;if(o.suspense?i=a([o.ssContent]):Array.isArray(o.children)?i=a(o.children):o.component?.vnode&&(i=a([o.component?.subTree])),i)return i;n.delete(o)}return!1};if(!a([t.subTree]))return t;const r=Array.from(n).reverse();for(const s of r)if(s.component)return s.component;return t}const mZe=dZe(EG,e=>({activator:"parent",location:e.arg?.replace("-"," "),text:typeof e.value=="boolean"?void 0:e.value})),hZe=Object.freeze(Object.defineProperty({__proto__:null,ClickOutside:sB,Intersect:Ol,Mutate:sZe,Resize:lZe,Ripple:wo,Scroll:cZe,Tooltip:mZe,Touch:S2},Symbol.toStringTag,{value:"Module"}));const vZe=new Map,pZe={activated:!1,tokenObservers:[]};function $l(e){return vZe.get(e)||Object.assign({},pZe)}const zN={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3};class gZe{constructor(t,n,a,r,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=a,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new _0,this.pending.promise.catch(n=>{}),await yZe(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new _0,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function yZe(e){return new Promise(t=>{setTimeout(t,e)})}const _Ze={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},k2=new jh("appCheck","AppCheck",_Ze);function UG(e){if(!$l(e).activated)throw k2.create("use-before-activation",{appName:e.name})}const wZe="firebase-app-check-database",bZe=1,EB="firebase-app-check-store";let ky=null;function xZe(){return ky||(ky=new Promise((e,t)=>{try{const n=indexedDB.open(wZe,bZe);n.onsuccess=a=>{e(a.target.result)},n.onerror=a=>{var r;t(k2.create("storage-open",{originalErrorMessage:(r=a.target.error)===null||r===void 0?void 0:r.message}))},n.onupgradeneeded=a=>{const r=a.target.result;switch(a.oldVersion){case 0:r.createObjectStore(EB,{keyPath:"compositeKey"})}}}catch(n){t(k2.create("storage-open",{originalErrorMessage:n?.message}))}}),ky)}function CZe(e,t){return SZe(EZe(e),t)}async function SZe(e,t){const a=(await xZe()).transaction(EB,"readwrite"),s=a.objectStore(EB).put({compositeKey:e,value:t});return new Promise((o,i)=>{s.onsuccess=c=>{o()},a.onerror=c=>{var A;i(k2.create("storage-set",{originalErrorMessage:(A=c.target.error)===null||A===void 0?void 0:A.message}))}})}function EZe(e){return`${e.options.appId}-${e.name}`}const BB=new ug("@firebase/app-check");function KN(e,t){return f5()?CZe(e,t).catch(n=>{BB.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}const BZe={error:"UNKNOWN_ERROR"};function kZe(e){return fw.encodeString(JSON.stringify(e),!1)}async function kB(e,t=!1,n=!1){const a=e.app;UG(a);const r=$l(a);let s=r.token,o;if(s&&!Bp(s)&&(r.token=void 0,s=void 0),!s){const A=await r.cachedTokenPromise;A&&(Bp(A)?s=A:await KN(a,void 0))}if(!t&&s&&Bp(s))return{token:s.token};let i=!1;try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),i=!0),s=await $l(a).exchangeTokenPromise}catch(A){A.code==="appCheck/throttled"||A.code==="appCheck/initial-throttle"?BB.warn(A.message):n&&BB.error(A),o=A}let c;return s?o?Bp(s)?c={token:s.token,internalError:o}:c=jN(o):(c={token:s.token},r.token=s,await KN(a,s)):c=jN(o),i&&PZe(a,c),c}async function TZe(e){const t=e.app;UG(t);const{provider:n}=$l(t);{const{token:a}=await n.getToken();return{token:a}}}function IZe(e,t,n,a){const{app:r}=e,s=$l(r),o={next:n,error:a,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Bp(s.token)){const i=s.token;Promise.resolve().then(()=>{n({token:i.token}),WN(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>WN(e))}function RG(e,t){const n=$l(e),a=n.tokenObservers.filter(r=>r.next!==t);a.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=a}function WN(e){const{app:t}=e,n=$l(t);let a=n.tokenRefresher;a||(a=FZe(e),n.tokenRefresher=a),!a.isRunning()&&n.isTokenAutoRefreshEnabled&&a.start()}function FZe(e){const{app:t}=e;return new gZe(async()=>{const n=$l(t);let a;if(n.token?a=await kB(e,!0):a=await kB(e),a.error)throw a.error;if(a.internalError)throw a.internalError},()=>!0,()=>{const n=$l(t);if(n.token){let a=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const r=n.token.expireTimeMillis-300*1e3;return a=Math.min(a,r),Math.max(0,a-Date.now())}else return 0},zN.RETRIAL_MIN_WAIT,zN.RETRIAL_MAX_WAIT)}function PZe(e,t){const n=$l(e).tokenObservers;for(const a of n)try{a.type==="EXTERNAL"&&t.error!=null?a.error(t.error):a.next(t)}catch{}}function Bp(e){return e.expireTimeMillis-Date.now()>0}function jN(e){return{token:kZe(BZe),error:e}}class DZe{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=$l(this.app);for(const n of t)RG(this.app,n.next);return Promise.resolve()}}function UZe(e,t){return new DZe(e,t)}function RZe(e){return{getToken:t=>kB(e,t),getLimitedUseToken:()=>TZe(e),addTokenListener:t=>IZe(e,"INTERNAL",t),removeTokenListener:t=>RG(e.app,t)}}const NZe="@firebase/app-check",VZe="0.10.1",LZe="app-check",qN="app-check-internal";function MZe(){Eu(new Vl(LZe,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return UZe(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(qN).initialize()})),Eu(new Vl(qN,e=>{const t=e.getProvider("app-check").getImmediate();return RZe(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),xi(NZe,VZe)}MZe();const NG=Symbol("firebaseApp");function OZe(e){return Bf()&&Sn(NG,null)||y5(e)}const Ty=new WeakMap;function HZe(e,t){if(!Ty.has(e)){const n=Ed(!0);Ty.set(e,n);const{unmount:a}=t;t.unmount=()=>{a.call(t),n.stop(),Ty.delete(e)}}return Ty.get(e)}const $Ze=new WeakMap,Iy=new WeakMap;function QZe(e){const t=OZe(e);if(!Iy.has(t)){let n;const r=[new Promise(s=>{n=s}),s=>{Iy.set(t,s),n(s.value)}];Iy.set(t,r)}return Iy.get(t)}function GZe(e,t){z5(t,n=>{const a=QZe();e.value=n,Array.isArray(a)&&a[1](e)})}var YN={};const XN="@firebase/database",JN="1.0.20";let VG="";function zZe(e){VG=e}class KZe{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Hs(n))}get(t){const n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:w0(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class WZe{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return Uc(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const LG=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new KZe(t)}}catch{}return new WZe},HA=LG("localStorage"),jZe=LG("sessionStorage");const Ah=new ug("@firebase/database"),qZe=(function(){let e=1;return function(){return e++}})(),MG=function(e){const t=Voe(e),n=new Poe;n.update(t);const a=n.digest();return fw.encodeByteArray(a)},Ng=function(...e){let t="";for(let n=0;n<e.length;n++){const a=e[n];Array.isArray(a)||a&&typeof a=="object"&&typeof a.length=="number"?t+=Ng.apply(null,a):typeof a=="object"?t+=Hs(a):t+=a,t+=" "}return t};let e0=null,ZN=!0;const YZe=function(e,t){sn(!0,"Can't turn on custom loggers persistently."),Ah.logLevel=Ma.VERBOSE,e0=Ah.log.bind(Ah)},oo=function(...e){if(ZN===!0&&(ZN=!1,e0===null&&jZe.get("logging_enabled")===!0&&YZe()),e0){const t=Ng.apply(null,e);e0(t)}},Vg=function(e){return function(...t){oo(e,...t)}},TB=function(...e){const t="FIREBASE INTERNAL ERROR: "+Ng(...e);Ah.error(t)},wf=function(...e){const t=`FIREBASE FATAL ERROR: ${Ng(...e)}`;throw Ah.error(t),new Error(t)},Ci=function(...e){const t="FIREBASE WARNING: "+Ng(...e);Ah.warn(t)},XZe=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ci("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},OG=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},JZe=function(e){if(document.readyState==="complete")e();else{let t=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Mh="[MIN_NAME]",bf="[MAX_NAME]",yv=function(e,t){if(e===t)return 0;if(e===Mh||t===bf)return-1;if(t===Mh||e===bf)return 1;{const n=eV(e),a=eV(t);return n!==null?a!==null?n-a===0?e.length-t.length:n-a:-1:a!==null?1:e<t?-1:1}},ZZe=function(e,t){return e===t?0:e<t?-1:1},ip=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Hs(t))},M4=function(e){if(typeof e!="object"||e===null)return Hs(e);const t=[];for(const a in e)t.push(a);t.sort();let n="{";for(let a=0;a<t.length;a++)a!==0&&(n+=","),n+=Hs(t[a]),n+=":",n+=M4(e[t[a]]);return n+="}",n},HG=function(e,t){const n=e.length;if(n<=t)return[e];const a=[];for(let r=0;r<n;r+=t)r+t>n?a.push(e.substring(r,n)):a.push(e.substring(r,r+t));return a};function Xi(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const $G=function(e){sn(!OG(e),"Invalid JSON number");const t=11,n=52,a=(1<<t-1)-1;let r,s,o,i,c;e===0?(s=0,o=0,r=1/e===-1/0?1:0):(r=e<0,e=Math.abs(e),e>=Math.pow(2,1-a)?(i=Math.min(Math.floor(Math.log(e)/Math.LN2),a),s=i+a,o=Math.round(e*Math.pow(2,n-i)-Math.pow(2,n))):(s=0,o=Math.round(e/Math.pow(2,1-a-n))));const A=[];for(c=n;c;c-=1)A.push(o%2?1:0),o=Math.floor(o/2);for(c=t;c;c-=1)A.push(s%2?1:0),s=Math.floor(s/2);A.push(r?1:0),A.reverse();const d=A.join("");let f="";for(c=0;c<64;c+=8){let m=parseInt(d.substr(c,8),2).toString(16);m.length===1&&(m="0"+m),f=f+m}return f.toLowerCase()},eet=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},tet=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},net=new RegExp("^-?(0*)\\d{1,10}$"),aet=-2147483648,ret=2147483647,eV=function(e){if(net.test(e)){const t=Number(e);if(t>=aet&&t<=ret)return t}return null},Lg=function(e){try{e()}catch(t){setTimeout(()=>{const n=t.stack||"";throw Ci("Exception was thrown by user callback.",n),t},Math.floor(0))}},set=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},t0=function(e,t){const n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};class oet{constructor(t,n){this.appCheckProvider=n,this.appName=t.name,Qi(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(a=>this.appCheck=a)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((n,a)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,a):n(null)},0)})}addTokenChangeListener(t){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(a=>a.addTokenListener(t))}notifyForInvalidToken(){Ci(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class iet{constructor(t,n,a){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=a,this.auth_=null,this.auth_=a.getImmediate({optional:!0}),this.auth_||a.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(oo("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,a)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,a):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ci(t)}}const O4="5",QG="v",GG="s",zG="r",KG="f",WG=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,jG="ls",qG="p",IB="ac",YG="websocket",XG="long_polling";class uet{constructor(t,n,a,r,s=!1,o="",i=!1,c=!1,A=null){this.secure=n,this.namespace=a,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=i,this.isUsingEmulator=c,this.emulatorOptions=A,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=HA.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&HA.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}}function cet(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function JG(e,t,n){sn(typeof t=="string","typeof type must == string"),sn(typeof n=="object","typeof params must == object");let a;if(t===YG)a=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===XG)a=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);cet(e)&&(n.ns=e.namespace);const r=[];return Xi(n,(s,o)=>{r.push(s+"="+o)}),a+r.join("&")}class det{constructor(){this.counters_={}}incrementCounter(t,n=1){Uc(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return doe(this.counters_)}}const XC={},JC={};function H4(e){const t=e.toString();return XC[t]||(XC[t]=new det),XC[t]}function Aet(e,t){const n=e.toString();return JC[n]||(JC[n]=t()),JC[n]}class fet{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){const a=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<a.length;++r)a[r]&&Lg(()=>{this.onMessage_(a[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const tV="start",met="close",het="pLPCommand",vet="pRTLPCB",ZG="id",ez="pw",tz="ser",pet="cb",get="seg",yet="ts",_et="d",wet="dframe",nz=1870,az=30,bet=nz-az,xet=25e3,Cet=3e4;class zm{constructor(t,n,a,r,s,o,i){this.connId=t,this.repoInfo=n,this.applicationId=a,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Vg(t),this.stats_=H4(n),this.urlFn=c=>(this.appCheckToken&&(c[IB]=this.appCheckToken),JG(n,XG,c))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new fet(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Cet)),JZe(()=>{if(this.isClosed_)return;this.scriptTagHolder=new $4((...s)=>{const[o,i,c,A,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===tV)this.id=i,this.password=c;else if(o===met)i?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(i,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,i]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,i)},()=>{this.onClosed_()},this.urlFn);const a={};a[tV]="t",a[tz]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(a[pet]=this.scriptTagHolder.uniqueCallbackIdentifier),a[QG]=O4,this.transportSessionId&&(a[GG]=this.transportSessionId),this.lastSessionId&&(a[jG]=this.lastSessionId),this.applicationId&&(a[qG]=this.applicationId),this.appCheckToken&&(a[IB]=this.appCheckToken),typeof location<"u"&&location.hostname&&WG.test(location.hostname)&&(a[zG]=KG);const r=this.urlFn(a);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){zm.forceAllow_=!0}static forceDisallow(){zm.forceDisallow_=!0}static isAvailable(){return zm.forceAllow_?!0:!zm.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!eet()&&!tet()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const n=Hs(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const a=i5(n),r=HG(a,bet);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(t,n){this.myDisconnFrame=document.createElement("iframe");const a={};a[wet]="t",a[ZG]=t,a[ez]=n,this.myDisconnFrame.src=this.urlFn(a),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const n=Hs(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class $4{constructor(t,n,a,r){this.onDisconnect=a,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=qZe(),window[het+this.uniqueCallbackIdentifier]=t,window[vet+this.uniqueCallbackIdentifier]=n,this.myIFrame=$4.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(i){oo("frame writing exception"),i.stack&&oo(i.stack),oo(i)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||oo("No IE domain setting required")}catch{const a=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+a+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[ZG]=this.myID,t[ez]=this.myPW,t[tz]=this.currentSerial;let n=this.urlFn(t),a="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+az+a.length<=nz;){const o=this.pendingSegs.shift();a=a+"&"+get+r+"="+o.seg+"&"+yet+r+"="+o.ts+"&"+_et+r+"="+o.d,r++}return n=n+a,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,a){this.pendingSegs.push({seg:t,ts:n,d:a}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);const a=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(a,Math.floor(xet)),s=()=>{clearTimeout(r),a()};this.addTag(t,s)}addTag(t,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const a=this.myIFrame.doc.createElement("script");a.type="text/javascript",a.async=!0,a.src=t,a.onload=a.onreadystatechange=function(){const r=a.readyState;(!r||r==="loaded"||r==="complete")&&(a.onload=a.onreadystatechange=null,a.parentNode&&a.parentNode.removeChild(a),n())},a.onerror=()=>{oo("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(a)}catch{}},Math.floor(1))}}const Eet=16384,Bet=45e3;let T2=null;typeof MozWebSocket<"u"?T2=MozWebSocket:typeof WebSocket<"u"&&(T2=WebSocket);class _l{constructor(t,n,a,r,s,o,i){this.connId=t,this.applicationId=a,this.appCheckToken=r,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Vg(this.connId),this.stats_=H4(n),this.connURL=_l.connectionURL_(n,o,i,r,a),this.nodeAdmin=n.nodeAdmin}static connectionURL_(t,n,a,r,s){const o={};return o[QG]=O4,typeof location<"u"&&location.hostname&&WG.test(location.hostname)&&(o[zG]=KG),n&&(o[GG]=n),a&&(o[jG]=a),r&&(o[IB]=r),s&&(o[qG]=s),JG(t,YG,o)}open(t,n){this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,HA.set("previous_websocket_failure",!0);try{let a;Soe(),this.mySock=new T2(this.connURL,[],a)}catch(a){this.log_("Error instantiating WebSocket.");const r=a.message||a.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=a=>{this.handleIncomingFrame(a)},this.mySock.onerror=a=>{this.log_("WebSocket error.  Closing connection.");const r=a.message||a.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){_l.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,a=navigator.userAgent.match(n);a&&a.length>1&&parseFloat(a[1])<4.4&&(t=!0)}return!t&&T2!==null&&!_l.forceDisallow_}static previouslyFailed(){return HA.isInMemoryStorage||HA.get("previous_websocket_failure")===!0}markConnectionHealthy(){HA.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const a=w0(n);this.onMessage(a)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(sn(this.frames===null,"We already have a frame buffer"),t.length<=6){const n=Number(t);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const n=t.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const a=this.extractFrameCount_(n);a!==null&&this.appendFrame_(a)}}send(t){this.resetKeepAlive();const n=Hs(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const a=HG(n,Eet);a.length>1&&this.sendString_(String(a.length));for(let r=0;r<a.length;r++)this.sendString_(a[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Bet))}sendString_(t){try{this.mySock.send(t)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}_l.responsesRequiredToBeHealthy=2;_l.healthyTimeout=3e4;class q0{static get ALL_TRANSPORTS(){return[zm,_l]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const n=_l&&_l.isAvailable();let a=n&&!_l.previouslyFailed();if(t.webSocketOnly&&(n||Ci("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),a=!0),a)this.transports_=[_l];else{const r=this.transports_=[];for(const s of q0.ALL_TRANSPORTS)s&&s.isAvailable()&&r.push(s);q0.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}q0.globalTransportInitialized_=!1;const ket=6e4,Tet=5e3,Iet=10*1024,Fet=100*1024,ZC="t",nV="d",Pet="s",aV="r",Det="e",rV="o",sV="a",oV="n",iV="p",Uet="h";class Ret{constructor(t,n,a,r,s,o,i,c,A,d){this.id=t,this.repoInfo_=n,this.applicationId_=a,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=i,this.onDisconnect_=c,this.onKill_=A,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Vg("c:"+this.id+":"),this.transportManager_=new q0(n),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),a=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,a)},Math.floor(0));const r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=t0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Fet?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Iet?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){const n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(ZC in t){const n=t[ZC];n===sV?this.upgradeIfSecondaryHealthy_():n===aV?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===rV&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const n=ip("t",t),a=ip("d",t);if(n==="c")this.onSecondaryControl_(a);else if(n==="d")this.pendingDataMessages.push(a);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:iV,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:sV,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:oV,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const n=ip("t",t),a=ip("d",t);n==="c"?this.onControl_(a):n==="d"&&this.onDataMessage_(a)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const n=ip(ZC,t);if(nV in t){const a=t[nV];if(n===Uet){const r=Object.assign({},a);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===oV){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Pet?this.onConnectionShutdown_(a):n===aV?this.onReset_(a):n===Det?TB("Server Error: "+a):n===rV?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):TB("Unknown control packet command: "+n)}}onHandshake_(t){const n=t.ts,a=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),O4!==a&&Ci("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),a=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,a),t0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(ket))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):t0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Tet))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:iV,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(HA.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class rz{put(t,n,a,r){}merge(t,n,a,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,a){}onDisconnectMerge(t,n,a){}onDisconnectCancel(t,n){}reportStats(t){}}class sz{constructor(t){this.allowedEvents_=t,this.listeners_={},sn(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){const a=[...this.listeners_[t]];for(let r=0;r<a.length;r++)a[r].callback.apply(a[r].context,n)}}on(t,n,a){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:a});const r=this.getInitialEvent(t);r&&n.apply(a,r)}off(t,n,a){this.validateEventType_(t);const r=this.listeners_[t]||[];for(let s=0;s<r.length;s++)if(r[s].callback===n&&(!a||a===r[s].context)){r.splice(s,1);return}}validateEventType_(t){sn(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}}class I2 extends sz{static getInstance(){return new I2}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Dk()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return sn(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}const lV=32,uV=768;class mr{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let a=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[a]=this.pieces_[r],a++);this.pieces_.length=a,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}}function ja(){return new mr("")}function va(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function zd(e){return e.pieces_.length-e.pieceNum_}function ur(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new mr(e.pieces_,t)}function oz(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Net(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function iz(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function lz(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new mr(t,0)}function ks(e,t){const n=[];for(let a=e.pieceNum_;a<e.pieces_.length;a++)n.push(e.pieces_[a]);if(t instanceof mr)for(let a=t.pieceNum_;a<t.pieces_.length;a++)n.push(t.pieces_[a]);else{const a=t.split("/");for(let r=0;r<a.length;r++)a[r].length>0&&n.push(a[r])}return new mr(n,0)}function da(e){return e.pieceNum_>=e.pieces_.length}function Wi(e,t){const n=va(e),a=va(t);if(n===null)return t;if(n===a)return Wi(ur(e),ur(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function uz(e,t){if(zd(e)!==zd(t))return!1;for(let n=e.pieceNum_,a=t.pieceNum_;n<=e.pieces_.length;n++,a++)if(e.pieces_[n]!==t.pieces_[a])return!1;return!0}function Sl(e,t){let n=e.pieceNum_,a=t.pieceNum_;if(zd(e)>zd(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[a])return!1;++n,++a}return!0}class Vet{constructor(t,n){this.errorPrefix_=n,this.parts_=iz(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let a=0;a<this.parts_.length;a++)this.byteLength_+=hw(this.parts_[a]);cz(this)}}function Let(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=hw(t),cz(e)}function Met(e){const t=e.parts_.pop();e.byteLength_-=hw(t),e.parts_.length>0&&(e.byteLength_-=1)}function cz(e){if(e.byteLength_>uV)throw new Error(e.errorPrefix_+"has a key path longer than "+uV+" bytes ("+e.byteLength_+").");if(e.parts_.length>lV)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+lV+") or object contains a cycle "+TA(e))}function TA(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}class Q4 extends sz{static getInstance(){return new Q4}constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const a=!document[t];a!==this.visible_&&(this.visible_=a,this.trigger("visible",a))},!1)}getInitialEvent(t){return sn(t==="visible","Unknown event type: "+t),[this.visible_]}}const lp=1e3,Oet=300*1e3,cV=30*1e3,Het=1.3,$et=3e4,Qet="server_kill",dV=3;class gc extends rz{constructor(t,n,a,r,s,o,i,c){if(super(),this.repoInfo_=t,this.applicationId_=n,this.onDataUpdate_=a,this.onConnectStatus_=r,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=i,this.authOverride_=c,this.id=gc.nextPersistentConnectionId_++,this.log_=Vg("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=lp,this.maxReconnectDelay_=Oet,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Q4.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&I2.getInstance().on("online",this.onOnline_,this)}sendRequest(t,n,a){const r=++this.requestNumber_,s={r,a:t,b:n};this.log_(Hs(s)),sn(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),a&&(this.requestCBHash_[r]=a)}get(t){this.initConnection_();const n=new _0,r={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:o=>{const i=o.d;o.s==="ok"?n.resolve(i):n.reject(i)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(t,n,a,r){this.initConnection_();const s=t._queryIdentifier,o=t._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),sn(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),sn(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const i={onComplete:r,hashFn:n,query:t,tag:a};this.listens.get(o).set(s,i),this.connected_&&this.sendListen_(i)}sendGet_(t){const n=this.outstandingGets_[t];this.sendRequest("g",n.request,a=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(a)})}sendListen_(t){const n=t.query,a=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+a+" for "+r);const s={p:a},o="q";t.tag&&(s.q=n._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest(o,s,i=>{const c=i.d,A=i.s;gc.warnOnListenWarnings_(c,n),(this.listens.get(a)&&this.listens.get(a).get(r))===t&&(this.log_("listen response",i),A!=="ok"&&this.removeListen_(a,r),t.onComplete&&t.onComplete(A,c))})}static warnOnListenWarnings_(t,n){if(t&&typeof t=="object"&&Uc(t,"w")){const a=Sh(t,"w");if(Array.isArray(a)&&~a.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();Ci(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||Foe(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=cV)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,n=Ioe(t)?"auth":"gauth",a={cred:t};this.authOverride_===null?a.noauth=!0:typeof this.authOverride_=="object"&&(a.authvar=this.authOverride_),this.sendRequest(n,a,r=>{const s=r.s,o=r.d||"error";this.authToken_===t&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const n=t.s,a=t.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,a)})}unlisten(t,n){const a=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+a+" "+r),sn(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(a,r)&&this.connected_&&this.sendUnlisten_(a,r,t._queryObject,n)}sendUnlisten_(t,n,a,r){this.log_("Unlisten on "+t+" for "+n);const s={p:t},o="n";r&&(s.q=a,s.t=r),this.sendRequest(o,s)}onDisconnectPut(t,n,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,n,a):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:n,onComplete:a})}onDisconnectMerge(t,n,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,n,a):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:n,onComplete:a})}onDisconnectCancel(t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(t,n,a,r){const s={p:n,d:a};this.log_("onDisconnect "+t,s),this.sendRequest(t,s,o=>{r&&setTimeout(()=>{r(o.s,o.d)},Math.floor(0))})}put(t,n,a,r){this.putInternal("p",t,n,a,r)}merge(t,n,a,r){this.putInternal("m",t,n,a,r)}putInternal(t,n,a,r,s){this.initConnection_();const o={p:n,d:a};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;const i=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(i):this.log_("Buffering put: "+n)}sendPut_(t){const n=this.outstandingPuts_[t].action,a=this.outstandingPuts_[t].request,r=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,a,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(s.s,s.d)})}reportStats(t){if(this.connected_){const n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,a=>{if(a.s!=="ok"){const s=a.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Hs(t));const n=t.r,a=this.requestCBHash_[n];a&&(delete this.requestCBHash_[n],a(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,n){this.log_("handleServerMessage",t,n),t==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):t==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):t==="c"?this.onListenRevoked_(n.p,n.q):t==="ac"?this.onAuthRevoked_(n.s,n.d):t==="apc"?this.onAppCheckRevoked_(n.s,n.d):t==="sd"?this.onSecurityDebugPacket_(n):TB("Unrecognized action received from server: "+Hs(t)+`
Are you using the latest client?`)}onReady_(t,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){sn(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=lp,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=lp,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>$et&&(this.reconnectDelay_=lp),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-t);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Het)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),a=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+gc.nextConnectionId_++,s=this.lastSessionId;let o=!1,i=null;const c=function(){i?i.close():(o=!0,a())},A=function(f){sn(i,"sendRequest call when we're not connected not allowed."),i.sendRequest(f)};this.realtime_={close:c,sendRequest:A};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[f,m]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?oo("getToken() completed but was canceled"):(oo("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=m&&m.token,i=new Ret(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,a,h=>{Ci(h+" ("+this.repoInfo_.toString()+")"),this.interrupt(Qet)},s))}catch(f){this.log_("Failed to get token: "+f),o||(this.repoInfo_.nodeAdmin&&Ci(f),c())}}}interrupt(t){oo("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){oo("Resuming connection for reason: "+t),delete this.interruptReasons_[t],zS(this.interruptReasons_)&&(this.reconnectDelay_=lp,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const n=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const n=this.outstandingPuts_[t];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,n){let a;n?a=n.map(s=>M4(s)).join("$"):a="default";const r=this.removeListen_(t,a);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(t,n){const a=new mr(t).toString();let r;if(this.listens.has(a)){const s=this.listens.get(a);r=s.get(n),s.delete(n),s.size===0&&this.listens.delete(a)}else r=void 0;return r}onAuthRevoked_(t,n){oo("Auth token revoked: "+t+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=dV&&(this.reconnectDelay_=cV,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,n){oo("App check token revoked: "+t+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=dV&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const n of t.values())this.sendListen_(n);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let n="js";t["sdk."+n+"."+VG.replace(/\./g,"-")]=1,Dk()?t["framework.cordova"]=1:A5()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=I2.getInstance().currentlyOnline();return zS(this.interruptReasons_)&&t}}gc.nextPersistentConnectionId_=0;gc.nextConnectionId_=0;class pa{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new pa(t,n)}}class fb{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){const a=new pa(Mh,t),r=new pa(Mh,n);return this.compare(a,r)!==0}minPost(){return pa.MIN}}let Fy;class dz extends fb{static get __EMPTY_NODE(){return Fy}static set __EMPTY_NODE(t){Fy=t}compare(t,n){return yv(t.name,n.name)}isDefinedOn(t){throw Wh("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return pa.MIN}maxPost(){return new pa(bf,Fy)}makePost(t,n){return sn(typeof t=="string","KeyIndex indexValue must always be a string."),new pa(t,Fy)}toString(){return".key"}}const fh=new dz;class Py{constructor(t,n,a,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!t.isEmpty();)if(t=t,o=n?a(t.key,n):1,r&&(o*=-1),o<0)this.isReverse_?t=t.left:t=t.right;else if(o===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class Bs{constructor(t,n,a,r,s){this.key=t,this.value=n,this.color=a??Bs.RED,this.left=r??ei.EMPTY_NODE,this.right=s??ei.EMPTY_NODE}copy(t,n,a,r,s){return new Bs(t??this.key,n??this.value,a??this.color,r??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,a){let r=this;const s=a(t,r.key);return s<0?r=r.copy(null,null,null,r.left.insert(t,n,a),null):s===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(t,n,a)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return ei.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,n){let a,r;if(a=this,n(t,a.key)<0)!a.left.isEmpty()&&!a.left.isRed_()&&!a.left.left.isRed_()&&(a=a.moveRedLeft_()),a=a.copy(null,null,null,a.left.remove(t,n),null);else{if(a.left.isRed_()&&(a=a.rotateRight_()),!a.right.isEmpty()&&!a.right.isRed_()&&!a.right.left.isRed_()&&(a=a.moveRedRight_()),n(t,a.key)===0){if(a.right.isEmpty())return ei.EMPTY_NODE;r=a.right.min_(),a=a.copy(r.key,r.value,null,null,a.right.removeMin_())}a=a.copy(null,null,null,null,a.right.remove(t,n))}return a.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,Bs.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,Bs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}Bs.RED=!0;Bs.BLACK=!1;class Get{copy(t,n,a,r,s){return this}insert(t,n,a){return new Bs(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ei{constructor(t,n=ei.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new ei(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Bs.BLACK,null,null))}remove(t){return new ei(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Bs.BLACK,null,null))}get(t){let n,a=this.root_;for(;!a.isEmpty();){if(n=this.comparator_(t,a.key),n===0)return a.value;n<0?a=a.left:n>0&&(a=a.right)}return null}getPredecessorKey(t){let n,a=this.root_,r=null;for(;!a.isEmpty();)if(n=this.comparator_(t,a.key),n===0){if(a.left.isEmpty())return r?r.key:null;for(a=a.left;!a.right.isEmpty();)a=a.right;return a.key}else n<0?a=a.left:n>0&&(r=a,a=a.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Py(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new Py(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new Py(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new Py(this.root_,null,this.comparator_,!0,t)}}ei.EMPTY_NODE=new Get;function zet(e,t){return yv(e.name,t.name)}function G4(e,t){return yv(e,t)}let FB;function Ket(e){FB=e}const Az=function(e){return typeof e=="number"?"number:"+$G(e):"string:"+e},fz=function(e){if(e.isLeafNode()){const t=e.val();sn(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Uc(t,".sv"),"Priority must be a string or number.")}else sn(e===FB||e.isEmpty(),"priority of unexpected type.");sn(e===FB||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let AV;class Ss{static set __childrenNodeConstructor(t){AV=t}static get __childrenNodeConstructor(){return AV}constructor(t,n=Ss.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=n,this.lazyHash_=null,sn(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),fz(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new Ss(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:Ss.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return da(t)?this:va(t)===".priority"?this.priorityNode_:Ss.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,n){return null}updateImmediateChild(t,n){return t===".priority"?this.updatePriority(n):n.isEmpty()&&t!==".priority"?this:Ss.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}updateChild(t,n){const a=va(t);return a===null?n:n.isEmpty()&&a!==".priority"?this:(sn(a!==".priority"||zd(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(a,Ss.__childrenNodeConstructor.EMPTY_NODE.updateChild(ur(t),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,n){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Az(this.priorityNode_.val())+":");const n=typeof this.value_;t+=n+":",n==="number"?t+=$G(this.value_):t+=this.value_,this.lazyHash_=MG(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===Ss.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Ss.__childrenNodeConstructor?-1:(sn(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const n=typeof t.value_,a=typeof this.value_,r=Ss.VALUE_TYPE_ORDER.indexOf(n),s=Ss.VALUE_TYPE_ORDER.indexOf(a);return sn(r>=0,"Unknown leaf type: "+n),sn(s>=0,"Unknown leaf type: "+a),r===s?a==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:s-r}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const n=t;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Ss.VALUE_TYPE_ORDER=["object","boolean","number","string"];let mz,hz;function Wet(e){mz=e}function jet(e){hz=e}class qet extends fb{compare(t,n){const a=t.node.getPriority(),r=n.node.getPriority(),s=a.compareTo(r);return s===0?yv(t.name,n.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return pa.MIN}maxPost(){return new pa(bf,new Ss("[PRIORITY-POST]",hz))}makePost(t,n){const a=mz(t);return new pa(n,new Ss("[PRIORITY-POST]",a))}toString(){return".priority"}}const ho=new qet;const Yet=Math.log(2);class Xet{constructor(t){const n=s=>parseInt(Math.log(s)/Yet,10),a=s=>parseInt(Array(s+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;const r=a(this.count);this.bits_=t+1&r}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const F2=function(e,t,n,a){e.sort(t);const r=function(c,A){const d=A-c;let f,m;if(d===0)return null;if(d===1)return f=e[c],m=n?n(f):f,new Bs(m,f.node,Bs.BLACK,null,null);{const h=parseInt(d/2,10)+c,v=r(c,h),y=r(h+1,A);return f=e[h],m=n?n(f):f,new Bs(m,f.node,Bs.BLACK,v,y)}},s=function(c){let A=null,d=null,f=e.length;const m=function(v,y){const g=f-v,w=f;f-=v;const b=r(g+1,w),x=e[g],T=n?n(x):x;h(new Bs(T,x.node,y,null,b))},h=function(v){A?(A.left=v,A=v):(d=v,A=v)};for(let v=0;v<c.count;++v){const y=c.nextBitIsOne(),g=Math.pow(2,c.count-(v+1));y?m(g,Bs.BLACK):(m(g,Bs.BLACK),m(g,Bs.RED))}return d},o=new Xet(e.length),i=s(o);return new ei(a||t,i)};let eS;const Fm={};class fc{static get Default(){return sn(Fm&&ho,"ChildrenNode.ts has not been loaded"),eS=eS||new fc({".priority":Fm},{".priority":ho}),eS}constructor(t,n){this.indexes_=t,this.indexSet_=n}get(t){const n=Sh(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof ei?n:null}hasIndex(t){return Uc(this.indexSet_,t.toString())}addIndex(t,n){sn(t!==fh,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const a=[];let r=!1;const s=n.getIterator(pa.Wrap);let o=s.getNext();for(;o;)r=r||t.isDefinedOn(o.node),a.push(o),o=s.getNext();let i;r?i=F2(a,t.getCompare()):i=Fm;const c=t.toString(),A=Object.assign({},this.indexSet_);A[c]=t;const d=Object.assign({},this.indexes_);return d[c]=i,new fc(d,A)}addToIndexes(t,n){const a=P_(this.indexes_,(r,s)=>{const o=Sh(this.indexSet_,s);if(sn(o,"Missing index implementation for "+s),r===Fm)if(o.isDefinedOn(t.node)){const i=[],c=n.getIterator(pa.Wrap);let A=c.getNext();for(;A;)A.name!==t.name&&i.push(A),A=c.getNext();return i.push(t),F2(i,o.getCompare())}else return Fm;else{const i=n.get(t.name);let c=r;return i&&(c=c.remove(new pa(t.name,i))),c.insert(t,t.node)}});return new fc(a,this.indexSet_)}removeFromIndexes(t,n){const a=P_(this.indexes_,r=>{if(r===Fm)return r;{const s=n.get(t.name);return s?r.remove(new pa(t.name,s)):r}});return new fc(a,this.indexSet_)}}let up;class Oa{static get EMPTY_NODE(){return up||(up=new Oa(new ei(G4),null,fc.Default))}constructor(t,n,a){this.children_=t,this.priorityNode_=n,this.indexMap_=a,this.lazyHash_=null,this.priorityNode_&&fz(this.priorityNode_),this.children_.isEmpty()&&sn(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||up}updatePriority(t){return this.children_.isEmpty()?this:new Oa(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const n=this.children_.get(t);return n===null?up:n}}getChild(t){const n=va(t);return n===null?this:this.getImmediateChild(n).getChild(ur(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,n){if(sn(n,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(n);{const a=new pa(t,n);let r,s;n.isEmpty()?(r=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),s=this.indexMap_.addToIndexes(a,this.children_));const o=r.isEmpty()?up:this.priorityNode_;return new Oa(r,o,s)}}updateChild(t,n){const a=va(t);if(a===null)return n;{sn(va(t)!==".priority"||zd(t)===1,".priority must be the last token in a path");const r=this.getImmediateChild(a).updateChild(ur(t),n);return this.updateImmediateChild(a,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const n={};let a=0,r=0,s=!0;if(this.forEachChild(ho,(o,i)=>{n[o]=i.val(t),a++,s&&Oa.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):s=!1}),!t&&s&&r<2*a){const o=[];for(const i in n)o[i]=n[i];return o}else return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+Az(this.getPriority().val())+":"),this.forEachChild(ho,(n,a)=>{const r=a.hash();r!==""&&(t+=":"+n+":"+r)}),this.lazyHash_=t===""?"":MG(t)}return this.lazyHash_}getPredecessorChildName(t,n,a){const r=this.resolveIndex_(a);if(r){const s=r.getPredecessorKey(new pa(t,n));return s?s.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const n=this.resolveIndex_(t);if(n){const a=n.minKey();return a&&a.name}else return this.children_.minKey()}getFirstChild(t){const n=this.getFirstChildName(t);return n?new pa(n,this.children_.get(n)):null}getLastChildName(t){const n=this.resolveIndex_(t);if(n){const a=n.maxKey();return a&&a.name}else return this.children_.maxKey()}getLastChild(t){const n=this.getLastChildName(t);return n?new pa(n,this.children_.get(n)):null}forEachChild(t,n){const a=this.resolveIndex_(t);return a?a.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,n){const a=this.resolveIndex_(n);if(a)return a.getIteratorFrom(t,r=>r);{const r=this.children_.getIteratorFrom(t.name,pa.Wrap);let s=r.peek();for(;s!=null&&n.compare(s,t)<0;)r.getNext(),s=r.peek();return r}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,n){const a=this.resolveIndex_(n);if(a)return a.getReverseIteratorFrom(t,r=>r);{const r=this.children_.getReverseIteratorFrom(t.name,pa.Wrap);let s=r.peek();for(;s!=null&&n.compare(s,t)>0;)r.getNext(),s=r.peek();return r}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Mg?-1:0}withIndex(t){if(t===fh||this.indexMap_.hasIndex(t))return this;{const n=this.indexMap_.addIndex(t,this.children_);return new Oa(this.children_,this.priorityNode_,n)}}isIndexed(t){return t===fh||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const n=t;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const a=this.getIterator(ho),r=n.getIterator(ho);let s=a.getNext(),o=r.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=a.getNext(),o=r.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(t){return t===fh?null:this.indexMap_.get(t.toString())}}Oa.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Jet extends Oa{constructor(){super(new ei(G4),Oa.EMPTY_NODE,fc.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Oa.EMPTY_NODE}isEmpty(){return!1}}const Mg=new Jet;Object.defineProperties(pa,{MIN:{value:new pa(Mh,Oa.EMPTY_NODE)},MAX:{value:new pa(bf,Mg)}});dz.__EMPTY_NODE=Oa.EMPTY_NODE;Ss.__childrenNodeConstructor=Oa;Ket(Mg);jet(Mg);const Zet=!0;function io(e,t=null){if(e===null)return Oa.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),sn(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){const n=e;return new Ss(n,io(t))}if(!(e instanceof Array)&&Zet){const n=[];let a=!1;if(Xi(e,(o,i)=>{if(o.substring(0,1)!=="."){const c=io(i);c.isEmpty()||(a=a||!c.getPriority().isEmpty(),n.push(new pa(o,c)))}}),n.length===0)return Oa.EMPTY_NODE;const s=F2(n,zet,o=>o.name,G4);if(a){const o=F2(n,ho.getCompare());return new Oa(s,io(t),new fc({".priority":o},{".priority":ho}))}else return new Oa(s,io(t),fc.Default)}else{let n=Oa.EMPTY_NODE;return Xi(e,(a,r)=>{if(Uc(e,a)&&a.substring(0,1)!=="."){const s=io(r);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(a,s))}}),n.updatePriority(io(t))}}Wet(io);class ett extends fb{constructor(t){super(),this.indexPath_=t,sn(!da(t)&&va(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){const a=this.extractChild(t.node),r=this.extractChild(n.node),s=a.compareTo(r);return s===0?yv(t.name,n.name):s}makePost(t,n){const a=io(t),r=Oa.EMPTY_NODE.updateChild(this.indexPath_,a);return new pa(n,r)}maxPost(){const t=Oa.EMPTY_NODE.updateChild(this.indexPath_,Mg);return new pa(bf,t)}toString(){return iz(this.indexPath_,0).join("/")}}class ttt extends fb{compare(t,n){const a=t.node.compareTo(n.node);return a===0?yv(t.name,n.name):a}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return pa.MIN}maxPost(){return pa.MAX}makePost(t,n){const a=io(t);return new pa(n,a)}toString(){return".value"}}const ntt=new ttt;function att(e){return{type:"value",snapshotNode:e}}function rtt(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function stt(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function fV(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function ott(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}class z4{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ho}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return sn(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return sn(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Mh}hasEnd(){return this.endSet_}getIndexEndValue(){return sn(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return sn(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:bf}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return sn(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ho}copy(){const t=new z4;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function mV(e){const t={};if(e.isDefault())return t;let n;if(e.index_===ho?n="$priority":e.index_===ntt?n="$value":e.index_===fh?n="$key":(sn(e.index_ instanceof ett,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Hs(n),e.startSet_){const a=e.startAfterSet_?"startAfter":"startAt";t[a]=Hs(e.indexStartValue_),e.startNameSet_&&(t[a]+=","+Hs(e.indexStartName_))}if(e.endSet_){const a=e.endBeforeSet_?"endBefore":"endAt";t[a]=Hs(e.indexEndValue_),e.endNameSet_&&(t[a]+=","+Hs(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function hV(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==ho&&(t.i=e.index_.toString()),t}class P2 extends rz{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(sn(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,n,a,r){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=a,this.appCheckTokenProvider_=r,this.log_=Vg("p:rest:"),this.listens_={}}listen(t,n,a,r){const s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);const o=P2.getListenId_(t,a),i={};this.listens_[o]=i;const c=mV(t._queryParams);this.restRequest_(s+".json",c,(A,d)=>{let f=d;if(A===404&&(f=null,A=null),A===null&&this.onDataUpdate_(s,f,!1,a),Sh(this.listens_,o)===i){let m;A?A===401?m="permission_denied":m="rest_error:"+A:m="ok",r(m,null)}})}unlisten(t,n){const a=P2.getListenId_(t,n);delete this.listens_[a]}get(t){const n=mV(t._queryParams),a=t._path.toString(),r=new _0;return this.restRequest_(a+".json",n,(s,o)=>{let i=o;s===404&&(i=null,s=null),s===null?(this.onDataUpdate_(a,i,!1,null),r.resolve(i)):r.reject(new Error(i))}),r.promise}refreshAuthToken(t){}restRequest_(t,n={},a){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(n.auth=r.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+qh(n);this.log_("Sending REST request for "+o);const i=new XMLHttpRequest;i.onreadystatechange=()=>{if(a&&i.readyState===4){this.log_("REST Response for "+o+" received. status:",i.status,"response:",i.responseText);let c=null;if(i.status>=200&&i.status<300){try{c=w0(i.responseText)}catch{Ci("Failed to parse JSON response for "+o+": "+i.responseText)}a(null,c)}else i.status!==401&&i.status!==404&&Ci("Got unsuccessful REST response for "+o+" Status: "+i.status),a(i.status);a=null}},i.open("GET",o,!0),i.send()})}}class itt{constructor(){this.rootNode_=Oa.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}}function D2(){return{value:null,children:new Map}}function vz(e,t,n){if(da(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{const a=va(t);e.children.has(a)||e.children.set(a,D2());const r=e.children.get(a);t=ur(t),vz(r,t,n)}}function PB(e,t,n){e.value!==null?n(t,e.value):ltt(e,(a,r)=>{const s=new mr(t.toString()+"/"+a);PB(r,s,n)})}function ltt(e,t){e.children.forEach((n,a)=>{t(a,n)})}class utt{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),n=Object.assign({},t);return this.last_&&Xi(this.last_,(a,r)=>{n[a]=n[a]-r}),this.last_=t,n}}const vV=10*1e3,ctt=30*1e3,dtt=300*1e3;class Att{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new utt(t);const a=vV+(ctt-vV)*Math.random();t0(this.reportStats_.bind(this),Math.floor(a))}reportStats_(){const t=this.statsListener_.get(),n={};let a=!1;Xi(t,(r,s)=>{s>0&&Uc(this.statsToReport_,r)&&(n[r]=s,a=!0)}),a&&this.server_.reportStats(n),t0(this.reportStats_.bind(this),Math.floor(Math.random()*2*dtt))}}var pu;(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(pu||(pu={}));function pz(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function gz(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function yz(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}class U2{constructor(t,n,a){this.path=t,this.affectedTree=n,this.revert=a,this.type=pu.ACK_USER_WRITE,this.source=pz()}operationForChild(t){if(da(this.path)){if(this.affectedTree.value!=null)return sn(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new mr(t));return new U2(ja(),n,this.revert)}}else return sn(va(this.path)===t,"operationForChild called for unrelated child."),new U2(ur(this.path),this.affectedTree,this.revert)}}class xf{constructor(t,n,a){this.source=t,this.path=n,this.snap=a,this.type=pu.OVERWRITE}operationForChild(t){return da(this.path)?new xf(this.source,ja(),this.snap.getImmediateChild(t)):new xf(this.source,ur(this.path),this.snap)}}class Y0{constructor(t,n,a){this.source=t,this.path=n,this.children=a,this.type=pu.MERGE}operationForChild(t){if(da(this.path)){const n=this.children.subtree(new mr(t));return n.isEmpty()?null:n.value?new xf(this.source,ja(),n.value):new Y0(this.source,ja(),n)}else return sn(va(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Y0(this.source,ur(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class K4{constructor(t,n,a){this.node_=t,this.fullyInitialized_=n,this.filtered_=a}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(da(t))return this.isFullyInitialized()&&!this.filtered_;const n=va(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}function ftt(e,t,n,a){const r=[],s=[];return t.forEach(o=>{o.type==="child_changed"&&e.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(ott(o.childName,o.snapshotNode))}),cp(e,r,"child_removed",t,a,n),cp(e,r,"child_added",t,a,n),cp(e,r,"child_moved",s,a,n),cp(e,r,"child_changed",t,a,n),cp(e,r,"value",t,a,n),r}function cp(e,t,n,a,r,s){const o=a.filter(i=>i.type===n);o.sort((i,c)=>htt(e,i,c)),o.forEach(i=>{const c=mtt(e,i,s);r.forEach(A=>{A.respondsTo(i.type)&&t.push(A.createEvent(c,e.query_))})})}function mtt(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function htt(e,t,n){if(t.childName==null||n.childName==null)throw Wh("Should only compare child_ events.");const a=new pa(t.childName,t.snapshotNode),r=new pa(n.childName,n.snapshotNode);return e.index_.compare(a,r)}function _z(e,t){return{eventCache:e,serverCache:t}}function n0(e,t,n,a){return _z(new K4(t,n,a),e.serverCache)}function wz(e,t,n,a){return _z(e.eventCache,new K4(t,n,a))}function DB(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Cf(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let tS;const vtt=()=>(tS||(tS=new ei(ZZe)),tS);class lr{static fromObject(t){let n=new lr(null);return Xi(t,(a,r)=>{n=n.set(new mr(a),r)}),n}constructor(t,n=vtt()){this.value=t,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:ja(),value:this.value};if(da(t))return null;{const a=va(t),r=this.children.get(a);if(r!==null){const s=r.findRootMostMatchingPathAndValue(ur(t),n);return s!=null?{path:ks(new mr(a),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(da(t))return this;{const n=va(t),a=this.children.get(n);return a!==null?a.subtree(ur(t)):new lr(null)}}set(t,n){if(da(t))return new lr(n,this.children);{const a=va(t),s=(this.children.get(a)||new lr(null)).set(ur(t),n),o=this.children.insert(a,s);return new lr(this.value,o)}}remove(t){if(da(t))return this.children.isEmpty()?new lr(null):new lr(null,this.children);{const n=va(t),a=this.children.get(n);if(a){const r=a.remove(ur(t));let s;return r.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,r),this.value===null&&s.isEmpty()?new lr(null):new lr(this.value,s)}else return this}}get(t){if(da(t))return this.value;{const n=va(t),a=this.children.get(n);return a?a.get(ur(t)):null}}setTree(t,n){if(da(t))return n;{const a=va(t),s=(this.children.get(a)||new lr(null)).setTree(ur(t),n);let o;return s.isEmpty()?o=this.children.remove(a):o=this.children.insert(a,s),new lr(this.value,o)}}fold(t){return this.fold_(ja(),t)}fold_(t,n){const a={};return this.children.inorderTraversal((r,s)=>{a[r]=s.fold_(ks(t,r),n)}),n(t,this.value,a)}findOnPath(t,n){return this.findOnPath_(t,ja(),n)}findOnPath_(t,n,a){const r=this.value?a(n,this.value):!1;if(r)return r;if(da(t))return null;{const s=va(t),o=this.children.get(s);return o?o.findOnPath_(ur(t),ks(n,s),a):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,ja(),n)}foreachOnPath_(t,n,a){if(da(t))return this;{this.value&&a(n,this.value);const r=va(t),s=this.children.get(r);return s?s.foreachOnPath_(ur(t),ks(n,r),a):new lr(null)}}foreach(t){this.foreach_(ja(),t)}foreach_(t,n){this.children.inorderTraversal((a,r)=>{r.foreach_(ks(t,a),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,a)=>{a.value&&t(n,a.value)})}}class Fl{constructor(t){this.writeTree_=t}static empty(){return new Fl(new lr(null))}}function a0(e,t,n){if(da(t))return new Fl(new lr(n));{const a=e.writeTree_.findRootMostValueAndPath(t);if(a!=null){const r=a.path;let s=a.value;const o=Wi(r,t);return s=s.updateChild(o,n),new Fl(e.writeTree_.set(r,s))}else{const r=new lr(n),s=e.writeTree_.setTree(t,r);return new Fl(s)}}}function pV(e,t,n){let a=e;return Xi(n,(r,s)=>{a=a0(a,ks(t,r),s)}),a}function gV(e,t){if(da(t))return Fl.empty();{const n=e.writeTree_.setTree(t,new lr(null));return new Fl(n)}}function UB(e,t){return zf(e,t)!=null}function zf(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(Wi(n.path,t)):null}function yV(e){const t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ho,(a,r)=>{t.push(new pa(a,r))}):e.writeTree_.children.inorderTraversal((a,r)=>{r.value!=null&&t.push(new pa(a,r.value))}),t}function Sd(e,t){if(da(t))return e;{const n=zf(e,t);return n!=null?new Fl(new lr(n)):new Fl(e.writeTree_.subtree(t))}}function RB(e){return e.writeTree_.isEmpty()}function Oh(e,t){return bz(ja(),e.writeTree_,t)}function bz(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let a=null;return t.children.inorderTraversal((r,s)=>{r===".priority"?(sn(s.value!==null,"Priority writes must always be leaf nodes"),a=s.value):n=bz(ks(e,r),s,n)}),!n.getChild(e).isEmpty()&&a!==null&&(n=n.updateChild(ks(e,".priority"),a)),n}}function xz(e,t){return kz(t,e)}function ptt(e,t,n,a,r){sn(a>e.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),e.allWrites.push({path:t,snap:n,writeId:a,visible:r}),r&&(e.visibleWrites=a0(e.visibleWrites,t,n)),e.lastWriteId=a}function gtt(e,t){for(let n=0;n<e.allWrites.length;n++){const a=e.allWrites[n];if(a.writeId===t)return a}return null}function ytt(e,t){const n=e.allWrites.findIndex(i=>i.writeId===t);sn(n>=0,"removeWrite called with nonexistent writeId.");const a=e.allWrites[n];e.allWrites.splice(n,1);let r=a.visible,s=!1,o=e.allWrites.length-1;for(;r&&o>=0;){const i=e.allWrites[o];i.visible&&(o>=n&&_tt(i,a.path)?r=!1:Sl(a.path,i.path)&&(s=!0)),o--}if(r){if(s)return wtt(e),!0;if(a.snap)e.visibleWrites=gV(e.visibleWrites,a.path);else{const i=a.children;Xi(i,c=>{e.visibleWrites=gV(e.visibleWrites,ks(a.path,c))})}return!0}else return!1}function _tt(e,t){if(e.snap)return Sl(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Sl(ks(e.path,n),t))return!0;return!1}function wtt(e){e.visibleWrites=Cz(e.allWrites,btt,ja()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function btt(e){return e.visible}function Cz(e,t,n){let a=Fl.empty();for(let r=0;r<e.length;++r){const s=e[r];if(t(s)){const o=s.path;let i;if(s.snap)Sl(n,o)?(i=Wi(n,o),a=a0(a,i,s.snap)):Sl(o,n)&&(i=Wi(o,n),a=a0(a,ja(),s.snap.getChild(i)));else if(s.children){if(Sl(n,o))i=Wi(n,o),a=pV(a,i,s.children);else if(Sl(o,n))if(i=Wi(o,n),da(i))a=pV(a,ja(),s.children);else{const c=Sh(s.children,va(i));if(c){const A=c.getChild(ur(i));a=a0(a,ja(),A)}}}else throw Wh("WriteRecord should have .snap or .children")}}return a}function Sz(e,t,n,a,r){if(!a&&!r){const s=zf(e.visibleWrites,t);if(s!=null)return s;{const o=Sd(e.visibleWrites,t);if(RB(o))return n;if(n==null&&!UB(o,ja()))return null;{const i=n||Oa.EMPTY_NODE;return Oh(o,i)}}}else{const s=Sd(e.visibleWrites,t);if(!r&&RB(s))return n;if(!r&&n==null&&!UB(s,ja()))return null;{const o=function(A){return(A.visible||r)&&(!a||!~a.indexOf(A.writeId))&&(Sl(A.path,t)||Sl(t,A.path))},i=Cz(e.allWrites,o,t),c=n||Oa.EMPTY_NODE;return Oh(i,c)}}}function xtt(e,t,n){let a=Oa.EMPTY_NODE;const r=zf(e.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(ho,(s,o)=>{a=a.updateImmediateChild(s,o)}),a;if(n){const s=Sd(e.visibleWrites,t);return n.forEachChild(ho,(o,i)=>{const c=Oh(Sd(s,new mr(o)),i);a=a.updateImmediateChild(o,c)}),yV(s).forEach(o=>{a=a.updateImmediateChild(o.name,o.node)}),a}else{const s=Sd(e.visibleWrites,t);return yV(s).forEach(o=>{a=a.updateImmediateChild(o.name,o.node)}),a}}function Ctt(e,t,n,a,r){sn(a||r,"Either existingEventSnap or existingServerSnap must exist");const s=ks(t,n);if(UB(e.visibleWrites,s))return null;{const o=Sd(e.visibleWrites,s);return RB(o)?r.getChild(n):Oh(o,r.getChild(n))}}function Stt(e,t,n,a){const r=ks(t,n),s=zf(e.visibleWrites,r);if(s!=null)return s;if(a.isCompleteForChild(n)){const o=Sd(e.visibleWrites,r);return Oh(o,a.getNode().getImmediateChild(n))}else return null}function Ett(e,t){return zf(e.visibleWrites,t)}function Btt(e,t,n,a,r,s,o){let i;const c=Sd(e.visibleWrites,t),A=zf(c,ja());if(A!=null)i=A;else if(n!=null)i=Oh(c,n);else return[];if(i=i.withIndex(o),!i.isEmpty()&&!i.isLeafNode()){const d=[],f=o.getCompare(),m=s?i.getReverseIteratorFrom(a,o):i.getIteratorFrom(a,o);let h=m.getNext();for(;h&&d.length<r;)f(h,a)!==0&&d.push(h),h=m.getNext();return d}else return[]}function ktt(){return{visibleWrites:Fl.empty(),allWrites:[],lastWriteId:-1}}function NB(e,t,n,a){return Sz(e.writeTree,e.treePath,t,n,a)}function Ez(e,t){return xtt(e.writeTree,e.treePath,t)}function _V(e,t,n,a){return Ctt(e.writeTree,e.treePath,t,n,a)}function R2(e,t){return Ett(e.writeTree,ks(e.treePath,t))}function Ttt(e,t,n,a,r,s){return Btt(e.writeTree,e.treePath,t,n,a,r,s)}function W4(e,t,n){return Stt(e.writeTree,e.treePath,t,n)}function Bz(e,t){return kz(ks(e.treePath,t),e.writeTree)}function kz(e,t){return{treePath:e,writeTree:t}}class Itt{constructor(){this.changeMap=new Map}trackChildChange(t){const n=t.type,a=t.childName;sn(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),sn(a!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(a);if(r){const s=r.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(a,fV(a,t.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(a);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(a,stt(a,r.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(a,rtt(a,t.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(a,fV(a,t.snapshotNode,r.oldSnap));else throw Wh("Illegal combination of changes: "+t+" occurred after "+r)}else this.changeMap.set(a,t)}getChanges(){return Array.from(this.changeMap.values())}}class Ftt{getCompleteChild(t){return null}getChildAfterChild(t,n,a){return null}}const Tz=new Ftt;class j4{constructor(t,n,a=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=a}getCompleteChild(t){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{const a=this.optCompleteServerCache_!=null?new K4(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return W4(this.writes_,t,a)}}getChildAfterChild(t,n,a){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Cf(this.viewCache_),s=Ttt(this.writes_,r,n,1,a,t);return s.length===0?null:s[0]}}function Ptt(e,t){sn(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),sn(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function Dtt(e,t,n,a,r){const s=new Itt;let o,i;if(n.type===pu.OVERWRITE){const A=n;A.source.fromUser?o=VB(e,t,A.path,A.snap,a,r,s):(sn(A.source.fromServer,"Unknown source."),i=A.source.tagged||t.serverCache.isFiltered()&&!da(A.path),o=N2(e,t,A.path,A.snap,a,r,i,s))}else if(n.type===pu.MERGE){const A=n;A.source.fromUser?o=Rtt(e,t,A.path,A.children,a,r,s):(sn(A.source.fromServer,"Unknown source."),i=A.source.tagged||t.serverCache.isFiltered(),o=LB(e,t,A.path,A.children,a,r,i,s))}else if(n.type===pu.ACK_USER_WRITE){const A=n;A.revert?o=Ltt(e,t,A.path,a,r,s):o=Ntt(e,t,A.path,A.affectedTree,a,r,s)}else if(n.type===pu.LISTEN_COMPLETE)o=Vtt(e,t,n.path,a,s);else throw Wh("Unknown operation type: "+n.type);const c=s.getChanges();return Utt(t,o,c),{viewCache:o,changes:c}}function Utt(e,t,n){const a=t.eventCache;if(a.isFullyInitialized()){const r=a.getNode().isLeafNode()||a.getNode().isEmpty(),s=DB(e);(n.length>0||!e.eventCache.isFullyInitialized()||r&&!a.getNode().equals(s)||!a.getNode().getPriority().equals(s.getPriority()))&&n.push(att(DB(t)))}}function Iz(e,t,n,a,r,s){const o=t.eventCache;if(R2(a,n)!=null)return t;{let i,c;if(da(n))if(sn(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const A=Cf(t),d=A instanceof Oa?A:Oa.EMPTY_NODE,f=Ez(a,d);i=e.filter.updateFullNode(t.eventCache.getNode(),f,s)}else{const A=NB(a,Cf(t));i=e.filter.updateFullNode(t.eventCache.getNode(),A,s)}else{const A=va(n);if(A===".priority"){sn(zd(n)===1,"Can't have a priority with additional path components");const d=o.getNode();c=t.serverCache.getNode();const f=_V(a,n,d,c);f!=null?i=e.filter.updatePriority(d,f):i=o.getNode()}else{const d=ur(n);let f;if(o.isCompleteForChild(A)){c=t.serverCache.getNode();const m=_V(a,n,o.getNode(),c);m!=null?f=o.getNode().getImmediateChild(A).updateChild(d,m):f=o.getNode().getImmediateChild(A)}else f=W4(a,A,t.serverCache);f!=null?i=e.filter.updateChild(o.getNode(),A,f,d,r,s):i=o.getNode()}}return n0(t,i,o.isFullyInitialized()||da(n),e.filter.filtersNodes())}}function N2(e,t,n,a,r,s,o,i){const c=t.serverCache;let A;const d=o?e.filter:e.filter.getIndexedFilter();if(da(n))A=d.updateFullNode(c.getNode(),a,null);else if(d.filtersNodes()&&!c.isFiltered()){const h=c.getNode().updateChild(n,a);A=d.updateFullNode(c.getNode(),h,null)}else{const h=va(n);if(!c.isCompleteForPath(n)&&zd(n)>1)return t;const v=ur(n),g=c.getNode().getImmediateChild(h).updateChild(v,a);h===".priority"?A=d.updatePriority(c.getNode(),g):A=d.updateChild(c.getNode(),h,g,v,Tz,null)}const f=wz(t,A,c.isFullyInitialized()||da(n),d.filtersNodes()),m=new j4(r,f,s);return Iz(e,f,n,r,m,i)}function VB(e,t,n,a,r,s,o){const i=t.eventCache;let c,A;const d=new j4(r,t,s);if(da(n))A=e.filter.updateFullNode(t.eventCache.getNode(),a,o),c=n0(t,A,!0,e.filter.filtersNodes());else{const f=va(n);if(f===".priority")A=e.filter.updatePriority(t.eventCache.getNode(),a),c=n0(t,A,i.isFullyInitialized(),i.isFiltered());else{const m=ur(n),h=i.getNode().getImmediateChild(f);let v;if(da(m))v=a;else{const y=d.getCompleteChild(f);y!=null?oz(m)===".priority"&&y.getChild(lz(m)).isEmpty()?v=y:v=y.updateChild(m,a):v=Oa.EMPTY_NODE}if(h.equals(v))c=t;else{const y=e.filter.updateChild(i.getNode(),f,v,m,d,o);c=n0(t,y,i.isFullyInitialized(),e.filter.filtersNodes())}}}return c}function wV(e,t){return e.eventCache.isCompleteForChild(t)}function Rtt(e,t,n,a,r,s,o){let i=t;return a.foreach((c,A)=>{const d=ks(n,c);wV(t,va(d))&&(i=VB(e,i,d,A,r,s,o))}),a.foreach((c,A)=>{const d=ks(n,c);wV(t,va(d))||(i=VB(e,i,d,A,r,s,o))}),i}function bV(e,t,n){return n.foreach((a,r)=>{t=t.updateChild(a,r)}),t}function LB(e,t,n,a,r,s,o,i){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c=t,A;da(n)?A=a:A=new lr(null).setTree(n,a);const d=t.serverCache.getNode();return A.children.inorderTraversal((f,m)=>{if(d.hasChild(f)){const h=t.serverCache.getNode().getImmediateChild(f),v=bV(e,h,m);c=N2(e,c,new mr(f),v,r,s,o,i)}}),A.children.inorderTraversal((f,m)=>{const h=!t.serverCache.isCompleteForChild(f)&&m.value===null;if(!d.hasChild(f)&&!h){const v=t.serverCache.getNode().getImmediateChild(f),y=bV(e,v,m);c=N2(e,c,new mr(f),y,r,s,o,i)}}),c}function Ntt(e,t,n,a,r,s,o){if(R2(r,n)!=null)return t;const i=t.serverCache.isFiltered(),c=t.serverCache;if(a.value!=null){if(da(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return N2(e,t,n,c.getNode().getChild(n),r,s,i,o);if(da(n)){let A=new lr(null);return c.getNode().forEachChild(fh,(d,f)=>{A=A.set(new mr(d),f)}),LB(e,t,n,A,r,s,i,o)}else return t}else{let A=new lr(null);return a.foreach((d,f)=>{const m=ks(n,d);c.isCompleteForPath(m)&&(A=A.set(d,c.getNode().getChild(m)))}),LB(e,t,n,A,r,s,i,o)}}function Vtt(e,t,n,a,r){const s=t.serverCache,o=wz(t,s.getNode(),s.isFullyInitialized()||da(n),s.isFiltered());return Iz(e,o,n,a,Tz,r)}function Ltt(e,t,n,a,r,s){let o;if(R2(a,n)!=null)return t;{const i=new j4(a,t,r),c=t.eventCache.getNode();let A;if(da(n)||va(n)===".priority"){let d;if(t.serverCache.isFullyInitialized())d=NB(a,Cf(t));else{const f=t.serverCache.getNode();sn(f instanceof Oa,"serverChildren would be complete if leaf node"),d=Ez(a,f)}d=d,A=e.filter.updateFullNode(c,d,s)}else{const d=va(n);let f=W4(a,d,t.serverCache);f==null&&t.serverCache.isCompleteForChild(d)&&(f=c.getImmediateChild(d)),f!=null?A=e.filter.updateChild(c,d,f,ur(n),i,s):t.eventCache.getNode().hasChild(d)?A=e.filter.updateChild(c,d,Oa.EMPTY_NODE,ur(n),i,s):A=c,A.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=NB(a,Cf(t)),o.isLeafNode()&&(A=e.filter.updateFullNode(A,o,s)))}return o=t.serverCache.isFullyInitialized()||R2(a,ja())!=null,n0(t,A,o,e.filter.filtersNodes())}}function Mtt(e,t){const n=Cf(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!da(t)&&!n.getImmediateChild(va(t)).isEmpty())?n.getChild(t):null}function xV(e,t,n,a){t.type===pu.MERGE&&t.source.queryId!==null&&(sn(Cf(e.viewCache_),"We should always have a full cache before handling merges"),sn(DB(e.viewCache_),"Missing event cache, even though we have a server cache"));const r=e.viewCache_,s=Dtt(e.processor_,r,t,n,a);return Ptt(e.processor_,s.viewCache),sn(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,Ott(e,s.changes,s.viewCache.eventCache.getNode())}function Ott(e,t,n,a){const r=e.eventRegistrations_;return ftt(e.eventGenerator_,t,n,r)}let CV;function Htt(e){sn(!CV,"__referenceConstructor has already been defined"),CV=e}function q4(e,t,n,a){const r=t.source.queryId;if(r!==null){const s=e.views.get(r);return sn(s!=null,"SyncTree gave us an op for an invalid query."),xV(s,t,n,a)}else{let s=[];for(const o of e.views.values())s=s.concat(xV(o,t,n,a));return s}}function Y4(e,t){let n=null;for(const a of e.views.values())n=n||Mtt(a,t);return n}let SV;function $tt(e){sn(!SV,"__referenceConstructor has already been defined"),SV=e}class EV{constructor(t){this.listenProvider_=t,this.syncPointTree_=new lr(null),this.pendingWriteTree_=ktt(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Qtt(e,t,n,a,r){return ptt(e.pendingWriteTree_,t,n,a,r),r?hb(e,new xf(pz(),t,n)):[]}function Km(e,t,n=!1){const a=gtt(e.pendingWriteTree_,t);if(ytt(e.pendingWriteTree_,t)){let s=new lr(null);return a.snap!=null?s=s.set(ja(),!0):Xi(a.children,o=>{s=s.set(new mr(o),!0)}),hb(e,new U2(a.path,s,n))}else return[]}function mb(e,t,n){return hb(e,new xf(gz(),t,n))}function Gtt(e,t,n){const a=lr.fromObject(n);return hb(e,new Y0(gz(),t,a))}function ztt(e,t,n,a){const r=Uz(e,a);if(r!=null){const s=Rz(r),o=s.path,i=s.queryId,c=Wi(o,t),A=new xf(yz(i),c,n);return Nz(e,o,A)}else return[]}function Ktt(e,t,n,a){const r=Uz(e,a);if(r){const s=Rz(r),o=s.path,i=s.queryId,c=Wi(o,t),A=lr.fromObject(n),d=new Y0(yz(i),c,A);return Nz(e,o,d)}else return[]}function Fz(e,t,n){const r=e.pendingWriteTree_,s=e.syncPointTree_.findOnPath(t,(o,i)=>{const c=Wi(o,t),A=Y4(i,c);if(A)return A});return Sz(r,t,s,n,!0)}function hb(e,t){return Pz(t,e.syncPointTree_,null,xz(e.pendingWriteTree_,ja()))}function Pz(e,t,n,a){if(da(e.path))return Dz(e,t,n,a);{const r=t.get(ja());n==null&&r!=null&&(n=Y4(r,ja()));let s=[];const o=va(e.path),i=e.operationForChild(o),c=t.children.get(o);if(c&&i){const A=n?n.getImmediateChild(o):null,d=Bz(a,o);s=s.concat(Pz(i,c,A,d))}return r&&(s=s.concat(q4(r,e,a,n))),s}}function Dz(e,t,n,a){const r=t.get(ja());n==null&&r!=null&&(n=Y4(r,ja()));let s=[];return t.children.inorderTraversal((o,i)=>{const c=n?n.getImmediateChild(o):null,A=Bz(a,o),d=e.operationForChild(o);d&&(s=s.concat(Dz(d,i,c,A)))}),r&&(s=s.concat(q4(r,e,a,n))),s}function Uz(e,t){return e.tagToQueryMap.get(t)}function Rz(e){const t=e.indexOf("$");return sn(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new mr(e.substr(0,t))}}function Nz(e,t,n){const a=e.syncPointTree_.get(t);sn(a,"Missing sync point for query tag that we're tracking");const r=xz(e.pendingWriteTree_,t);return q4(a,n,r,null)}class X4{constructor(t){this.node_=t}getImmediateChild(t){const n=this.node_.getImmediateChild(t);return new X4(n)}node(){return this.node_}}class J4{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){const n=ks(this.path_,t);return new J4(this.syncTree_,n)}node(){return Fz(this.syncTree_,this.path_)}}const Wtt=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},BV=function(e,t,n){if(!e||typeof e!="object")return e;if(sn(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return jtt(e[".sv"],t,n);if(typeof e[".sv"]=="object")return qtt(e[".sv"],t);sn(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},jtt=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:sn(!1,"Unexpected server value: "+e)}},qtt=function(e,t,n){e.hasOwnProperty("increment")||sn(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const a=e.increment;typeof a!="number"&&sn(!1,"Unexpected increment value: "+a);const r=t.node();if(sn(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return a;const o=r.getValue();return typeof o!="number"?a:o+a},Ytt=function(e,t,n,a){return Z4(t,new J4(n,e),a)},Xtt=function(e,t,n){return Z4(e,new X4(t),n)};function Z4(e,t,n){const a=e.getPriority().val(),r=BV(a,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const o=e,i=BV(o.getValue(),t,n);return i!==o.getValue()||r!==o.getPriority().val()?new Ss(i,io(r)):e}else{const o=e;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new Ss(r))),o.forEachChild(ho,(i,c)=>{const A=Z4(c,t.getImmediateChild(i),n);A!==c&&(s=s.updateImmediateChild(i,A))}),s}}class eI{constructor(t="",n=null,a={children:{},childCount:0}){this.name=t,this.parent=n,this.node=a}}function tI(e,t){let n=t instanceof mr?t:new mr(t),a=e,r=va(n);for(;r!==null;){const s=Sh(a.node.children,r)||{children:{},childCount:0};a=new eI(r,a,s),n=ur(n),r=va(n)}return a}function _v(e){return e.node.value}function Vz(e,t){e.node.value=t,MB(e)}function Lz(e){return e.node.childCount>0}function Jtt(e){return _v(e)===void 0&&!Lz(e)}function vb(e,t){Xi(e.node.children,(n,a)=>{t(new eI(n,e,a))})}function Mz(e,t,n,a){n&&t(e),vb(e,r=>{Mz(r,t,!0)})}function Ztt(e,t,n){let a=e.parent;for(;a!==null;){if(t(a))return!0;a=a.parent}return!1}function Og(e){return new mr(e.parent===null?e.name:Og(e.parent)+"/"+e.name)}function MB(e){e.parent!==null&&ent(e.parent,e.name,e)}function ent(e,t,n){const a=Jtt(n),r=Uc(e.node.children,t);a&&r?(delete e.node.children[t],e.node.childCount--,MB(e)):!a&&!r&&(e.node.children[t]=n.node,e.node.childCount++,MB(e))}const tnt=/[\[\].#$\/\u0000-\u001F\u007F]/,nnt=/[\[\].#$\u0000-\u001F\u007F]/,nS=10*1024*1024,Oz=function(e){return typeof e=="string"&&e.length!==0&&!tnt.test(e)},ant=function(e){return typeof e=="string"&&e.length!==0&&!nnt.test(e)},rnt=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),ant(e)},Hz=function(e,t,n){const a=n instanceof mr?new Vet(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+TA(a));if(typeof t=="function")throw new Error(e+"contains a function "+TA(a)+" with contents = "+t.toString());if(OG(t))throw new Error(e+"contains "+t.toString()+" "+TA(a));if(typeof t=="string"&&t.length>nS/3&&hw(t)>nS)throw new Error(e+"contains a string greater than "+nS+" utf8 bytes "+TA(a)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let r=!1,s=!1;if(Xi(t,(o,i)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Oz(o)))throw new Error(e+" contains an invalid key ("+o+") "+TA(a)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Let(a,o),Hz(e,i,a),Met(a)}),r&&s)throw new Error(e+' contains ".value" child '+TA(a)+" in addition to actual children.")}},snt=function(e,t){const n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!Oz(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!rnt(n))throw new Error(Noe(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};class ont{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function int(e,t){let n=null;for(let a=0;a<t.length;a++){const r=t[a],s=r.getPath();n!==null&&!uz(s,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(r)}n&&e.eventLists_.push(n)}function Kf(e,t,n){int(e,n),lnt(e,a=>Sl(a,t)||Sl(t,a))}function lnt(e,t){e.recursionDepth_++;let n=!0;for(let a=0;a<e.eventLists_.length;a++){const r=e.eventLists_[a];if(r){const s=r.path;t(s)?(unt(e.eventLists_[a]),e.eventLists_[a]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function unt(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(n!==null){e.events[t]=null;const a=n.getEventRunner();e0&&oo("event: "+n.toString()),Lg(a)}}}const cnt="repo_interrupt",dnt=25;class Ant{constructor(t,n,a,r){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=a,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ont,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=D2(),this.transactionQueueTree_=new eI,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function fnt(e,t,n){if(e.stats_=H4(e.repoInfo_),e.forceRestClient_||set())e.server_=new P2(e.repoInfo_,(a,r,s,o)=>{kV(e,a,r,s,o)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>TV(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Hs(n)}catch(a){throw new Error("Invalid authOverride provided: "+a)}}e.persistentConnection_=new gc(e.repoInfo_,t,(a,r,s,o)=>{kV(e,a,r,s,o)},a=>{TV(e,a)},a=>{hnt(e,a)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(a=>{e.server_.refreshAuthToken(a)}),e.appCheckProvider_.addTokenChangeListener(a=>{e.server_.refreshAppCheckToken(a.token)}),e.statsReporter_=Aet(e.repoInfo_,()=>new Att(e.stats_,e.server_)),e.infoData_=new itt,e.infoSyncTree_=new EV({startListening:(a,r,s,o)=>{let i=[];const c=e.infoData_.getNode(a._path);return c.isEmpty()||(i=mb(e.infoSyncTree_,a._path,c),setTimeout(()=>{o("ok")},0)),i},stopListening:()=>{}}),nI(e,"connected",!1),e.serverSyncTree_=new EV({startListening:(a,r,s,o)=>(e.server_.listen(a,s,r,(i,c)=>{const A=o(i,c);Kf(e.eventQueue_,a._path,A)}),[]),stopListening:(a,r)=>{e.server_.unlisten(a,r)}})}function mnt(e){const n=e.infoData_.getNode(new mr(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function $z(e){return Wtt({timestamp:mnt(e)})}function kV(e,t,n,a,r){e.dataUpdateCount++;const s=new mr(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(r)if(a){const c=P_(n,A=>io(A));o=Ktt(e.serverSyncTree_,s,c,r)}else{const c=io(n);o=ztt(e.serverSyncTree_,s,c,r)}else if(a){const c=P_(n,A=>io(A));o=Gtt(e.serverSyncTree_,s,c)}else{const c=io(n);o=mb(e.serverSyncTree_,s,c)}let i=s;o.length>0&&(i=rI(e,s)),Kf(e.eventQueue_,i,o)}function TV(e,t){nI(e,"connected",t),t===!1&&pnt(e)}function hnt(e,t){Xi(t,(n,a)=>{nI(e,n,a)})}function nI(e,t,n){const a=new mr("/.info/"+t),r=io(n);e.infoData_.updateSnapshot(a,r);const s=mb(e.infoSyncTree_,a,r);Kf(e.eventQueue_,a,s)}function vnt(e){return e.nextWriteId_++}function pnt(e){Qz(e,"onDisconnectEvents");const t=$z(e),n=D2();PB(e.onDisconnect_,ja(),(r,s)=>{const o=Ytt(r,s,e.serverSyncTree_,t);vz(n,r,o)});let a=[];PB(n,ja(),(r,s)=>{a=a.concat(mb(e.serverSyncTree_,r,s));const o=wnt(e,r);rI(e,o)}),e.onDisconnect_=D2(),Kf(e.eventQueue_,ja(),a)}function gnt(e){e.persistentConnection_&&e.persistentConnection_.interrupt(cnt)}function Qz(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),oo(n,...t)}function Gz(e,t,n){return Fz(e.serverSyncTree_,t,n)||Oa.EMPTY_NODE}function aI(e,t=e.transactionQueueTree_){if(t||pb(e,t),_v(t)){const n=Kz(e,t);sn(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&ynt(e,Og(t),n)}else Lz(t)&&vb(t,n=>{aI(e,n)})}function ynt(e,t,n){const a=n.map(A=>A.currentWriteId),r=Gz(e,t,a);let s=r;const o=r.hash();for(let A=0;A<n.length;A++){const d=n[A];sn(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const f=Wi(t,d.path);s=s.updateChild(f,d.currentOutputSnapshotRaw)}const i=s.val(!0),c=t;e.server_.put(c.toString(),i,A=>{Qz(e,"transaction put response",{path:c.toString(),status:A});let d=[];if(A==="ok"){const f=[];for(let m=0;m<n.length;m++)n[m].status=2,d=d.concat(Km(e.serverSyncTree_,n[m].currentWriteId)),n[m].onComplete&&f.push(()=>n[m].onComplete(null,!0,n[m].currentOutputSnapshotResolved)),n[m].unwatcher();pb(e,tI(e.transactionQueueTree_,t)),aI(e,e.transactionQueueTree_),Kf(e.eventQueue_,t,d);for(let m=0;m<f.length;m++)Lg(f[m])}else{if(A==="datastale")for(let f=0;f<n.length;f++)n[f].status===3?n[f].status=4:n[f].status=0;else{Ci("transaction at "+c.toString()+" failed: "+A);for(let f=0;f<n.length;f++)n[f].status=4,n[f].abortReason=A}rI(e,t)}},o)}function rI(e,t){const n=zz(e,t),a=Og(n),r=Kz(e,n);return _nt(e,r,a),a}function _nt(e,t,n){if(t.length===0)return;const a=[];let r=[];const o=t.filter(i=>i.status===0).map(i=>i.currentWriteId);for(let i=0;i<t.length;i++){const c=t[i],A=Wi(n,c.path);let d=!1,f;if(sn(A!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,f=c.abortReason,r=r.concat(Km(e.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=dnt)d=!0,f="maxretry",r=r.concat(Km(e.serverSyncTree_,c.currentWriteId,!0));else{const m=Gz(e,c.path,o);c.currentInputSnapshot=m;const h=t[i].update(m.val());if(h!==void 0){Hz("transaction failed: Data returned ",h,c.path);let v=io(h);typeof h=="object"&&h!=null&&Uc(h,".priority")||(v=v.updatePriority(m.getPriority()));const g=c.currentWriteId,w=$z(e),b=Xtt(v,m,w);c.currentOutputSnapshotRaw=v,c.currentOutputSnapshotResolved=b,c.currentWriteId=vnt(e),o.splice(o.indexOf(g),1),r=r.concat(Qtt(e.serverSyncTree_,c.path,b,c.currentWriteId,c.applyLocally)),r=r.concat(Km(e.serverSyncTree_,g,!0))}else d=!0,f="nodata",r=r.concat(Km(e.serverSyncTree_,c.currentWriteId,!0))}Kf(e.eventQueue_,n,r),r=[],d&&(t[i].status=2,(function(m){setTimeout(m,Math.floor(0))})(t[i].unwatcher),t[i].onComplete&&(f==="nodata"?a.push(()=>t[i].onComplete(null,!1,t[i].currentInputSnapshot)):a.push(()=>t[i].onComplete(new Error(f),!1,null))))}pb(e,e.transactionQueueTree_);for(let i=0;i<a.length;i++)Lg(a[i]);aI(e,e.transactionQueueTree_)}function zz(e,t){let n,a=e.transactionQueueTree_;for(n=va(t);n!==null&&_v(a)===void 0;)a=tI(a,n),t=ur(t),n=va(t);return a}function Kz(e,t){const n=[];return Wz(e,t,n),n.sort((a,r)=>a.order-r.order),n}function Wz(e,t,n){const a=_v(t);if(a)for(let r=0;r<a.length;r++)n.push(a[r]);vb(t,r=>{Wz(e,r,n)})}function pb(e,t){const n=_v(t);if(n){let a=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[a]=n[r],a++);n.length=a,Vz(t,n.length>0?n:void 0)}vb(t,a=>{pb(e,a)})}function wnt(e,t){const n=Og(zz(e,t)),a=tI(e.transactionQueueTree_,t);return Ztt(a,r=>{aS(e,r)}),aS(e,a),Mz(a,r=>{aS(e,r)}),n}function aS(e,t){const n=_v(t);if(n){const a=[];let r=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(sn(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(sn(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),r=r.concat(Km(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&a.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Vz(t,void 0):n.length=s+1,Kf(e.eventQueue_,Og(t),r);for(let o=0;o<a.length;o++)Lg(a[o])}}function bnt(e){let t="";const n=e.split("/");for(let a=0;a<n.length;a++)if(n[a].length>0){let r=n[a];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}function xnt(e){const t={};e.charAt(0)==="?"&&(e=e.substring(1));for(const n of e.split("&")){if(n.length===0)continue;const a=n.split("=");a.length===2?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Ci(`Invalid query segment '${n}' in query '${e}'`)}return t}const IV=function(e,t){const n=Cnt(e),a=n.namespace;n.domain==="firebase.com"&&wf(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!a||a==="undefined")&&n.domain!=="localhost"&&wf("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||XZe();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new uet(n.host,n.secure,a,r,t,"",a!==n.subdomain),path:new mr(n.pathString)}},Cnt=function(e){let t="",n="",a="",r="",s="",o=!0,i="https",c=443;if(typeof e=="string"){let A=e.indexOf("//");A>=0&&(i=e.substring(0,A-1),e=e.substring(A+2));let d=e.indexOf("/");d===-1&&(d=e.length);let f=e.indexOf("?");f===-1&&(f=e.length),t=e.substring(0,Math.min(d,f)),d<f&&(r=bnt(e.substring(d,f)));const m=xnt(e.substring(Math.min(e.length,f)));A=t.indexOf(":"),A>=0?(o=i==="https"||i==="wss",c=parseInt(t.substring(A+1),10)):A=t.length;const h=t.slice(0,A);if(h.toLowerCase()==="localhost")n="localhost";else if(h.split(".").length<=2)n=h;else{const v=t.indexOf(".");a=t.substring(0,v).toLowerCase(),n=t.substring(v+1),s=a}"ns"in m&&(s=m.ns)}return{host:t,port:c,domain:n,subdomain:a,secure:o,scheme:i,pathString:r,namespace:s}};class sI{constructor(t,n,a,r){this._repo=t,this._path=n,this._queryParams=a,this._orderByCalled=r}get key(){return da(this._path)?null:oz(this._path)}get ref(){return new wv(this._repo,this._path)}get _queryIdentifier(){const t=hV(this._queryParams),n=M4(t);return n==="{}"?"default":n}get _queryObject(){return hV(this._queryParams)}isEqual(t){if(t=Ru(t),!(t instanceof sI))return!1;const n=this._repo===t._repo,a=uz(this._path,t._path),r=this._queryIdentifier===t._queryIdentifier;return n&&a&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+Net(this._path)}}class wv extends sI{constructor(t,n){super(t,n,new z4,!1)}get parent(){const t=lz(this._path);return t===null?null:new wv(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}Htt(wv);$tt(wv);const Snt="FIREBASE_DATABASE_EMULATOR_HOST",OB={};let Ent=!1;function Bnt(e,t,n,a,r){let s=a||e.options.databaseURL;s===void 0&&(e.options.projectId||wf("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),oo("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o=IV(s,r),i=o.repoInfo,c;typeof process<"u"&&YN&&(c=YN[Snt]),c?(s=`http://${c}?ns=${i.namespace}`,o=IV(s,r),i=o.repoInfo):o.repoInfo.secure;const A=new iet(e.name,e.options,t);snt("Invalid Firebase Database URL",o),da(o.path)||wf("Database URL must point to the root of a Firebase Database (not including a child path).");const d=Tnt(i,e,A,new oet(e,n));return new Int(d,e)}function knt(e,t){const n=OB[t];(!n||n[e.key]!==e)&&wf(`Database ${t}(${e.repoInfo_}) has already been deleted.`),gnt(e),delete n[e.key]}function Tnt(e,t,n,a){let r=OB[t.name];r||(r={},OB[t.name]=r);let s=r[e.toURLString()];return s&&wf("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Ant(e,Ent,n,a),r[e.toURLString()]=s,s}class Int{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(fnt(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new wv(this._repo,ja())),this._rootInternal}_delete(){return this._rootInternal!==null&&(knt(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&wf("Cannot call "+t+" on a deleted database.")}}function Fnt(e){zZe(jd),Eu(new Vl("database",(t,{instanceIdentifier:n})=>{const a=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return Bnt(a,r,s,n)},"PUBLIC").setMultipleInstances(!0)),xi(XN,JN,e),xi(XN,JN,"esm2017")}gc.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};gc.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};Fnt();var FV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var oI;(function(){var e;function t(S,E){function C(){}C.prototype=E.prototype,S.D=E.prototype,S.prototype=new C,S.prototype.constructor=S,S.C=function(P,F,N){for(var L=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)L[ie-2]=arguments[ie];return E.prototype[F].apply(P,L)}}function n(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(a,n),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(S,E,C){C||(C=0);var P=Array(16);if(typeof E=="string")for(var F=0;16>F;++F)P[F]=E.charCodeAt(C++)|E.charCodeAt(C++)<<8|E.charCodeAt(C++)<<16|E.charCodeAt(C++)<<24;else for(F=0;16>F;++F)P[F]=E[C++]|E[C++]<<8|E[C++]<<16|E[C++]<<24;E=S.g[0],C=S.g[1],F=S.g[2];var N=S.g[3],L=E+(N^C&(F^N))+P[0]+3614090360&4294967295;E=C+(L<<7&4294967295|L>>>25),L=N+(F^E&(C^F))+P[1]+3905402710&4294967295,N=E+(L<<12&4294967295|L>>>20),L=F+(C^N&(E^C))+P[2]+606105819&4294967295,F=N+(L<<17&4294967295|L>>>15),L=C+(E^F&(N^E))+P[3]+3250441966&4294967295,C=F+(L<<22&4294967295|L>>>10),L=E+(N^C&(F^N))+P[4]+4118548399&4294967295,E=C+(L<<7&4294967295|L>>>25),L=N+(F^E&(C^F))+P[5]+1200080426&4294967295,N=E+(L<<12&4294967295|L>>>20),L=F+(C^N&(E^C))+P[6]+2821735955&4294967295,F=N+(L<<17&4294967295|L>>>15),L=C+(E^F&(N^E))+P[7]+4249261313&4294967295,C=F+(L<<22&4294967295|L>>>10),L=E+(N^C&(F^N))+P[8]+1770035416&4294967295,E=C+(L<<7&4294967295|L>>>25),L=N+(F^E&(C^F))+P[9]+2336552879&4294967295,N=E+(L<<12&4294967295|L>>>20),L=F+(C^N&(E^C))+P[10]+4294925233&4294967295,F=N+(L<<17&4294967295|L>>>15),L=C+(E^F&(N^E))+P[11]+2304563134&4294967295,C=F+(L<<22&4294967295|L>>>10),L=E+(N^C&(F^N))+P[12]+1804603682&4294967295,E=C+(L<<7&4294967295|L>>>25),L=N+(F^E&(C^F))+P[13]+4254626195&4294967295,N=E+(L<<12&4294967295|L>>>20),L=F+(C^N&(E^C))+P[14]+2792965006&4294967295,F=N+(L<<17&4294967295|L>>>15),L=C+(E^F&(N^E))+P[15]+1236535329&4294967295,C=F+(L<<22&4294967295|L>>>10),L=E+(F^N&(C^F))+P[1]+4129170786&4294967295,E=C+(L<<5&4294967295|L>>>27),L=N+(C^F&(E^C))+P[6]+3225465664&4294967295,N=E+(L<<9&4294967295|L>>>23),L=F+(E^C&(N^E))+P[11]+643717713&4294967295,F=N+(L<<14&4294967295|L>>>18),L=C+(N^E&(F^N))+P[0]+3921069994&4294967295,C=F+(L<<20&4294967295|L>>>12),L=E+(F^N&(C^F))+P[5]+3593408605&4294967295,E=C+(L<<5&4294967295|L>>>27),L=N+(C^F&(E^C))+P[10]+38016083&4294967295,N=E+(L<<9&4294967295|L>>>23),L=F+(E^C&(N^E))+P[15]+3634488961&4294967295,F=N+(L<<14&4294967295|L>>>18),L=C+(N^E&(F^N))+P[4]+3889429448&4294967295,C=F+(L<<20&4294967295|L>>>12),L=E+(F^N&(C^F))+P[9]+568446438&4294967295,E=C+(L<<5&4294967295|L>>>27),L=N+(C^F&(E^C))+P[14]+3275163606&4294967295,N=E+(L<<9&4294967295|L>>>23),L=F+(E^C&(N^E))+P[3]+4107603335&4294967295,F=N+(L<<14&4294967295|L>>>18),L=C+(N^E&(F^N))+P[8]+1163531501&4294967295,C=F+(L<<20&4294967295|L>>>12),L=E+(F^N&(C^F))+P[13]+2850285829&4294967295,E=C+(L<<5&4294967295|L>>>27),L=N+(C^F&(E^C))+P[2]+4243563512&4294967295,N=E+(L<<9&4294967295|L>>>23),L=F+(E^C&(N^E))+P[7]+1735328473&4294967295,F=N+(L<<14&4294967295|L>>>18),L=C+(N^E&(F^N))+P[12]+2368359562&4294967295,C=F+(L<<20&4294967295|L>>>12),L=E+(C^F^N)+P[5]+4294588738&4294967295,E=C+(L<<4&4294967295|L>>>28),L=N+(E^C^F)+P[8]+2272392833&4294967295,N=E+(L<<11&4294967295|L>>>21),L=F+(N^E^C)+P[11]+1839030562&4294967295,F=N+(L<<16&4294967295|L>>>16),L=C+(F^N^E)+P[14]+4259657740&4294967295,C=F+(L<<23&4294967295|L>>>9),L=E+(C^F^N)+P[1]+2763975236&4294967295,E=C+(L<<4&4294967295|L>>>28),L=N+(E^C^F)+P[4]+1272893353&4294967295,N=E+(L<<11&4294967295|L>>>21),L=F+(N^E^C)+P[7]+4139469664&4294967295,F=N+(L<<16&4294967295|L>>>16),L=C+(F^N^E)+P[10]+3200236656&4294967295,C=F+(L<<23&4294967295|L>>>9),L=E+(C^F^N)+P[13]+681279174&4294967295,E=C+(L<<4&4294967295|L>>>28),L=N+(E^C^F)+P[0]+3936430074&4294967295,N=E+(L<<11&4294967295|L>>>21),L=F+(N^E^C)+P[3]+3572445317&4294967295,F=N+(L<<16&4294967295|L>>>16),L=C+(F^N^E)+P[6]+76029189&4294967295,C=F+(L<<23&4294967295|L>>>9),L=E+(C^F^N)+P[9]+3654602809&4294967295,E=C+(L<<4&4294967295|L>>>28),L=N+(E^C^F)+P[12]+3873151461&4294967295,N=E+(L<<11&4294967295|L>>>21),L=F+(N^E^C)+P[15]+530742520&4294967295,F=N+(L<<16&4294967295|L>>>16),L=C+(F^N^E)+P[2]+3299628645&4294967295,C=F+(L<<23&4294967295|L>>>9),L=E+(F^(C|~N))+P[0]+4096336452&4294967295,E=C+(L<<6&4294967295|L>>>26),L=N+(C^(E|~F))+P[7]+1126891415&4294967295,N=E+(L<<10&4294967295|L>>>22),L=F+(E^(N|~C))+P[14]+2878612391&4294967295,F=N+(L<<15&4294967295|L>>>17),L=C+(N^(F|~E))+P[5]+4237533241&4294967295,C=F+(L<<21&4294967295|L>>>11),L=E+(F^(C|~N))+P[12]+1700485571&4294967295,E=C+(L<<6&4294967295|L>>>26),L=N+(C^(E|~F))+P[3]+2399980690&4294967295,N=E+(L<<10&4294967295|L>>>22),L=F+(E^(N|~C))+P[10]+4293915773&4294967295,F=N+(L<<15&4294967295|L>>>17),L=C+(N^(F|~E))+P[1]+2240044497&4294967295,C=F+(L<<21&4294967295|L>>>11),L=E+(F^(C|~N))+P[8]+1873313359&4294967295,E=C+(L<<6&4294967295|L>>>26),L=N+(C^(E|~F))+P[15]+4264355552&4294967295,N=E+(L<<10&4294967295|L>>>22),L=F+(E^(N|~C))+P[6]+2734768916&4294967295,F=N+(L<<15&4294967295|L>>>17),L=C+(N^(F|~E))+P[13]+1309151649&4294967295,C=F+(L<<21&4294967295|L>>>11),L=E+(F^(C|~N))+P[4]+4149444226&4294967295,E=C+(L<<6&4294967295|L>>>26),L=N+(C^(E|~F))+P[11]+3174756917&4294967295,N=E+(L<<10&4294967295|L>>>22),L=F+(E^(N|~C))+P[2]+718787259&4294967295,F=N+(L<<15&4294967295|L>>>17),L=C+(N^(F|~E))+P[9]+3951481745&4294967295,S.g[0]=S.g[0]+E&4294967295,S.g[1]=S.g[1]+(F+(L<<21&4294967295|L>>>11))&4294967295,S.g[2]=S.g[2]+F&4294967295,S.g[3]=S.g[3]+N&4294967295}a.prototype.u=function(S,E){E===void 0&&(E=S.length);for(var C=E-this.blockSize,P=this.B,F=this.h,N=0;N<E;){if(F==0)for(;N<=C;)r(this,S,N),N+=this.blockSize;if(typeof S=="string"){for(;N<E;)if(P[F++]=S.charCodeAt(N++),F==this.blockSize){r(this,P),F=0;break}}else for(;N<E;)if(P[F++]=S[N++],F==this.blockSize){r(this,P),F=0;break}}this.h=F,this.o+=E},a.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var E=1;E<S.length-8;++E)S[E]=0;var C=8*this.o;for(E=S.length-8;E<S.length;++E)S[E]=C&255,C/=256;for(this.u(S),S=Array(16),E=C=0;4>E;++E)for(var P=0;32>P;P+=8)S[C++]=this.g[E]>>>P&255;return S};function s(S,E){var C=i;return Object.prototype.hasOwnProperty.call(C,S)?C[S]:C[S]=E(S)}function o(S,E){this.h=E;for(var C=[],P=!0,F=S.length-1;0<=F;F--){var N=S[F]|0;P&&N==E||(C[F]=N,P=!1)}this.g=C}var i={};function c(S){return-128<=S&&128>S?s(S,function(E){return new o([E|0],0>E?-1:0)}):new o([S|0],0>S?-1:0)}function A(S){if(isNaN(S)||!isFinite(S))return f;if(0>S)return g(A(-S));for(var E=[],C=1,P=0;S>=C;P++)E[P]=S/C|0,C*=4294967296;return new o(E,0)}function d(S,E){if(S.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(S.charAt(0)=="-")return g(d(S.substring(1),E));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=A(Math.pow(E,8)),P=f,F=0;F<S.length;F+=8){var N=Math.min(8,S.length-F),L=parseInt(S.substring(F,F+N),E);8>N?(N=A(Math.pow(E,N)),P=P.j(N).add(A(L))):(P=P.j(C),P=P.add(A(L)))}return P}var f=c(0),m=c(1),h=c(16777216);e=o.prototype,e.m=function(){if(y(this))return-g(this).m();for(var S=0,E=1,C=0;C<this.g.length;C++){var P=this.i(C);S+=(0<=P?P:4294967296+P)*E,E*=4294967296}return S},e.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(v(this))return"0";if(y(this))return"-"+g(this).toString(S);for(var E=A(Math.pow(S,6)),C=this,P="";;){var F=T(C,E).g;C=w(C,F.j(E));var N=((0<C.g.length?C.g[0]:C.h)>>>0).toString(S);if(C=F,v(C))return N+P;for(;6>N.length;)N="0"+N;P=N+P}},e.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function v(S){if(S.h!=0)return!1;for(var E=0;E<S.g.length;E++)if(S.g[E]!=0)return!1;return!0}function y(S){return S.h==-1}e.l=function(S){return S=w(this,S),y(S)?-1:v(S)?0:1};function g(S){for(var E=S.g.length,C=[],P=0;P<E;P++)C[P]=~S.g[P];return new o(C,~S.h).add(m)}e.abs=function(){return y(this)?g(this):this},e.add=function(S){for(var E=Math.max(this.g.length,S.g.length),C=[],P=0,F=0;F<=E;F++){var N=P+(this.i(F)&65535)+(S.i(F)&65535),L=(N>>>16)+(this.i(F)>>>16)+(S.i(F)>>>16);P=L>>>16,N&=65535,L&=65535,C[F]=L<<16|N}return new o(C,C[C.length-1]&-2147483648?-1:0)};function w(S,E){return S.add(g(E))}e.j=function(S){if(v(this)||v(S))return f;if(y(this))return y(S)?g(this).j(g(S)):g(g(this).j(S));if(y(S))return g(this.j(g(S)));if(0>this.l(h)&&0>S.l(h))return A(this.m()*S.m());for(var E=this.g.length+S.g.length,C=[],P=0;P<2*E;P++)C[P]=0;for(P=0;P<this.g.length;P++)for(var F=0;F<S.g.length;F++){var N=this.i(P)>>>16,L=this.i(P)&65535,ie=S.i(F)>>>16,le=S.i(F)&65535;C[2*P+2*F]+=L*le,b(C,2*P+2*F),C[2*P+2*F+1]+=N*le,b(C,2*P+2*F+1),C[2*P+2*F+1]+=L*ie,b(C,2*P+2*F+1),C[2*P+2*F+2]+=N*ie,b(C,2*P+2*F+2)}for(P=0;P<E;P++)C[P]=C[2*P+1]<<16|C[2*P];for(P=E;P<2*E;P++)C[P]=0;return new o(C,0)};function b(S,E){for(;(S[E]&65535)!=S[E];)S[E+1]+=S[E]>>>16,S[E]&=65535,E++}function x(S,E){this.g=S,this.h=E}function T(S,E){if(v(E))throw Error("division by zero");if(v(S))return new x(f,f);if(y(S))return E=T(g(S),E),new x(g(E.g),g(E.h));if(y(E))return E=T(S,g(E)),new x(g(E.g),E.h);if(30<S.g.length){if(y(S)||y(E))throw Error("slowDivide_ only works with positive integers.");for(var C=m,P=E;0>=P.l(S);)C=U(C),P=U(P);var F=k(C,1),N=k(P,1);for(P=k(P,2),C=k(C,2);!v(P);){var L=N.add(P);0>=L.l(S)&&(F=F.add(C),N=L),P=k(P,1),C=k(C,1)}return E=w(S,F.j(E)),new x(F,E)}for(F=f;0<=S.l(E);){for(C=Math.max(1,Math.floor(S.m()/E.m())),P=Math.ceil(Math.log(C)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),N=A(C),L=N.j(E);y(L)||0<L.l(S);)C-=P,N=A(C),L=N.j(E);v(N)&&(N=m),F=F.add(N),S=w(S,L)}return new x(F,S)}e.A=function(S){return T(this,S).h},e.and=function(S){for(var E=Math.max(this.g.length,S.g.length),C=[],P=0;P<E;P++)C[P]=this.i(P)&S.i(P);return new o(C,this.h&S.h)},e.or=function(S){for(var E=Math.max(this.g.length,S.g.length),C=[],P=0;P<E;P++)C[P]=this.i(P)|S.i(P);return new o(C,this.h|S.h)},e.xor=function(S){for(var E=Math.max(this.g.length,S.g.length),C=[],P=0;P<E;P++)C[P]=this.i(P)^S.i(P);return new o(C,this.h^S.h)};function U(S){for(var E=S.g.length+1,C=[],P=0;P<E;P++)C[P]=S.i(P)<<1|S.i(P-1)>>>31;return new o(C,S.h)}function k(S,E){var C=E>>5;E%=32;for(var P=S.g.length-C,F=[],N=0;N<P;N++)F[N]=0<E?S.i(N+C)>>>E|S.i(N+C+1)<<32-E:S.i(N+C);return new o(F,S.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=A,o.fromString=d,oI=o}).apply(typeof FV<"u"?FV:typeof self<"u"?self:typeof window<"u"?window:{});var Dy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(V,fe,be){return V==Array.prototype||V==Object.prototype||(V[fe]=be.value),V};function n(V){V=[typeof globalThis=="object"&&globalThis,V,typeof window=="object"&&window,typeof self=="object"&&self,typeof Dy=="object"&&Dy];for(var fe=0;fe<V.length;++fe){var be=V[fe];if(be&&be.Math==Math)return be}throw Error("Cannot find global object")}var a=n(this);function r(V,fe){if(fe)e:{var be=a;V=V.split(".");for(var Re=0;Re<V.length-1;Re++){var gt=V[Re];if(!(gt in be))break e;be=be[gt]}V=V[V.length-1],Re=be[V],fe=fe(Re),fe!=Re&&fe!=null&&t(be,V,{configurable:!0,writable:!0,value:fe})}}function s(V,fe){V instanceof String&&(V+="");var be=0,Re=!1,gt={next:function(){if(!Re&&be<V.length){var Bt=be++;return{value:fe(Bt,V[Bt]),done:!1}}return Re=!0,{done:!0,value:void 0}}};return gt[Symbol.iterator]=function(){return gt},gt}r("Array.prototype.values",function(V){return V||function(){return s(this,function(fe,be){return be})}});var o=o||{},i=this||self;function c(V){var fe=typeof V;return fe=fe!="object"?fe:V?Array.isArray(V)?"array":fe:"null",fe=="array"||fe=="object"&&typeof V.length=="number"}function A(V){var fe=typeof V;return fe=="object"&&V!=null||fe=="function"}function d(V,fe,be){return V.call.apply(V.bind,arguments)}function f(V,fe,be){if(!V)throw Error();if(2<arguments.length){var Re=Array.prototype.slice.call(arguments,2);return function(){var gt=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(gt,Re),V.apply(fe,gt)}}return function(){return V.apply(fe,arguments)}}function m(V,fe,be){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function h(V,fe){var be=Array.prototype.slice.call(arguments,1);return function(){var Re=be.slice();return Re.push.apply(Re,arguments),V.apply(this,Re)}}function v(V,fe){function be(){}be.prototype=fe.prototype,V.aa=fe.prototype,V.prototype=new be,V.prototype.constructor=V,V.Qb=function(Re,gt,Bt){for(var tn=Array(arguments.length-2),Ea=2;Ea<arguments.length;Ea++)tn[Ea-2]=arguments[Ea];return fe.prototype[gt].apply(Re,tn)}}function y(V){const fe=V.length;if(0<fe){const be=Array(fe);for(let Re=0;Re<fe;Re++)be[Re]=V[Re];return be}return[]}function g(V,fe){for(let be=1;be<arguments.length;be++){const Re=arguments[be];if(c(Re)){const gt=V.length||0,Bt=Re.length||0;V.length=gt+Bt;for(let tn=0;tn<Bt;tn++)V[gt+tn]=Re[tn]}else V.push(Re)}}class w{constructor(fe,be){this.i=fe,this.j=be,this.h=0,this.g=null}get(){let fe;return 0<this.h?(this.h--,fe=this.g,this.g=fe.next,fe.next=null):fe=this.i(),fe}}function b(V){return/^[\s\xa0]*$/.test(V)}function x(){var V=i.navigator;return V&&(V=V.userAgent)?V:""}function T(V){return T[" "](V),V}T[" "]=function(){};var U=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function k(V,fe,be){for(const Re in V)fe.call(be,V[Re],Re,V)}function S(V,fe){for(const be in V)fe.call(void 0,V[be],be,V)}function E(V){const fe={};for(const be in V)fe[be]=V[be];return fe}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(V,fe){let be,Re;for(let gt=1;gt<arguments.length;gt++){Re=arguments[gt];for(be in Re)V[be]=Re[be];for(let Bt=0;Bt<C.length;Bt++)be=C[Bt],Object.prototype.hasOwnProperty.call(Re,be)&&(V[be]=Re[be])}}function F(V){var fe=1;V=V.split(":");const be=[];for(;0<fe&&V.length;)be.push(V.shift()),fe--;return V.length&&be.push(V.join(":")),be}function N(V){i.setTimeout(()=>{throw V},0)}function L(){var V=J;let fe=null;return V.g&&(fe=V.g,V.g=V.g.next,V.g||(V.h=null),fe.next=null),fe}class ie{constructor(){this.h=this.g=null}add(fe,be){const Re=le.get();Re.set(fe,be),this.h?this.h.next=Re:this.g=Re,this.h=Re}}var le=new w(()=>new Q,V=>V.reset());class Q{constructor(){this.next=this.g=this.h=null}set(fe,be){this.h=fe,this.g=be,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,ce=!1,J=new ie,se=()=>{const V=i.Promise.resolve(void 0);Z=()=>{V.then(G)}};var G=()=>{for(var V;V=L();){try{V.h.call(V.g)}catch(be){N(be)}var fe=le;fe.j(V),100>fe.h&&(fe.h++,V.next=fe.g,fe.g=V)}ce=!1};function D(){this.s=this.s,this.C=this.C}D.prototype.s=!1,D.prototype.ma=function(){this.s||(this.s=!0,this.N())},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(V,fe){this.type=V,this.g=this.target=fe,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var ne=(function(){if(!i.addEventListener||!Object.defineProperty)return!1;var V=!1,fe=Object.defineProperty({},"passive",{get:function(){V=!0}});try{const be=()=>{};i.addEventListener("test",be,fe),i.removeEventListener("test",be,fe)}catch{}return V})();function H(V,fe){if(j.call(this,V?V.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,V){var be=this.type=V.type,Re=V.changedTouches&&V.changedTouches.length?V.changedTouches[0]:null;if(this.target=V.target||V.srcElement,this.g=fe,fe=V.relatedTarget){if(U){e:{try{T(fe.nodeName);var gt=!0;break e}catch{}gt=!1}gt||(fe=null)}}else be=="mouseover"?fe=V.fromElement:be=="mouseout"&&(fe=V.toElement);this.relatedTarget=fe,Re?(this.clientX=Re.clientX!==void 0?Re.clientX:Re.pageX,this.clientY=Re.clientY!==void 0?Re.clientY:Re.pageY,this.screenX=Re.screenX||0,this.screenY=Re.screenY||0):(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0),this.button=V.button,this.key=V.key||"",this.ctrlKey=V.ctrlKey,this.altKey=V.altKey,this.shiftKey=V.shiftKey,this.metaKey=V.metaKey,this.pointerId=V.pointerId||0,this.pointerType=typeof V.pointerType=="string"?V.pointerType:te[V.pointerType]||"",this.state=V.state,this.i=V,V.defaultPrevented&&H.aa.h.call(this)}}v(H,j);var te={2:"touch",3:"pen",4:"mouse"};H.prototype.h=function(){H.aa.h.call(this);var V=this.i;V.preventDefault?V.preventDefault():V.returnValue=!1};var Y="closure_listenable_"+(1e6*Math.random()|0),K=0;function X(V,fe,be,Re,gt){this.listener=V,this.proxy=null,this.src=fe,this.type=be,this.capture=!!Re,this.ha=gt,this.key=++K,this.da=this.fa=!1}function ae(V){V.da=!0,V.listener=null,V.proxy=null,V.src=null,V.ha=null}function oe(V){this.src=V,this.g={},this.h=0}oe.prototype.add=function(V,fe,be,Re,gt){var Bt=V.toString();V=this.g[Bt],V||(V=this.g[Bt]=[],this.h++);var tn=de(V,fe,Re,gt);return-1<tn?(fe=V[tn],be||(fe.fa=!1)):(fe=new X(fe,this.src,Bt,!!Re,gt),fe.fa=be,V.push(fe)),fe};function W(V,fe){var be=fe.type;if(be in V.g){var Re=V.g[be],gt=Array.prototype.indexOf.call(Re,fe,void 0),Bt;(Bt=0<=gt)&&Array.prototype.splice.call(Re,gt,1),Bt&&(ae(fe),V.g[be].length==0&&(delete V.g[be],V.h--))}}function de(V,fe,be,Re){for(var gt=0;gt<V.length;++gt){var Bt=V[gt];if(!Bt.da&&Bt.listener==fe&&Bt.capture==!!be&&Bt.ha==Re)return gt}return-1}var Ae="closure_lm_"+(1e6*Math.random()|0),Ce={};function De(V,fe,be,Re,gt){if(Array.isArray(fe)){for(var Bt=0;Bt<fe.length;Bt++)De(V,fe[Bt],be,Re,gt);return null}return be=it(be),V&&V[Y]?V.K(fe,be,A(Re)?!!Re.capture:!1,gt):xe(V,fe,be,!1,Re,gt)}function xe(V,fe,be,Re,gt,Bt){if(!fe)throw Error("Invalid event type");var tn=A(gt)?!!gt.capture:!!gt,Ea=Je(V);if(Ea||(V[Ae]=Ea=new oe(V)),be=Ea.add(fe,be,Re,tn,Bt),be.proxy)return be;if(Re=ke(),be.proxy=Re,Re.src=V,Re.listener=be,V.addEventListener)ne||(gt=tn),gt===void 0&&(gt=!1),V.addEventListener(fe.toString(),Re,gt);else if(V.attachEvent)V.attachEvent(we(fe.toString()),Re);else if(V.addListener&&V.removeListener)V.addListener(Re);else throw Error("addEventListener and attachEvent are unavailable.");return be}function ke(){function V(be){return fe.call(V.src,V.listener,be)}const fe=at;return V}function Ee(V,fe,be,Re,gt){if(Array.isArray(fe))for(var Bt=0;Bt<fe.length;Bt++)Ee(V,fe[Bt],be,Re,gt);else Re=A(Re)?!!Re.capture:!!Re,be=it(be),V&&V[Y]?(V=V.i,fe=String(fe).toString(),fe in V.g&&(Bt=V.g[fe],be=de(Bt,be,Re,gt),-1<be&&(ae(Bt[be]),Array.prototype.splice.call(Bt,be,1),Bt.length==0&&(delete V.g[fe],V.h--)))):V&&(V=Je(V))&&(fe=V.g[fe.toString()],V=-1,fe&&(V=de(fe,be,Re,gt)),(be=-1<V?fe[V]:null)&&ye(be))}function ye(V){if(typeof V!="number"&&V&&!V.da){var fe=V.src;if(fe&&fe[Y])W(fe.i,V);else{var be=V.type,Re=V.proxy;fe.removeEventListener?fe.removeEventListener(be,Re,V.capture):fe.detachEvent?fe.detachEvent(we(be),Re):fe.addListener&&fe.removeListener&&fe.removeListener(Re),(be=Je(fe))?(W(be,V),be.h==0&&(be.src=null,fe[Ae]=null)):ae(V)}}}function we(V){return V in Ce?Ce[V]:Ce[V]="on"+V}function at(V,fe){if(V.da)V=!0;else{fe=new H(fe,this);var be=V.listener,Re=V.ha||V.src;V.fa&&ye(V),V=be.call(Re,fe)}return V}function Je(V){return V=V[Ae],V instanceof oe?V:null}var rt="__closure_events_fn_"+(1e9*Math.random()>>>0);function it(V){return typeof V=="function"?V:(V[rt]||(V[rt]=function(fe){return V.handleEvent(fe)}),V[rt])}function Ie(){D.call(this),this.i=new oe(this),this.M=this,this.F=null}v(Ie,D),Ie.prototype[Y]=!0,Ie.prototype.removeEventListener=function(V,fe,be,Re){Ee(this,V,fe,be,Re)};function Ve(V,fe){var be,Re=V.F;if(Re)for(be=[];Re;Re=Re.F)be.push(Re);if(V=V.M,Re=fe.type||fe,typeof fe=="string")fe=new j(fe,V);else if(fe instanceof j)fe.target=fe.target||V;else{var gt=fe;fe=new j(Re,V),P(fe,gt)}if(gt=!0,be)for(var Bt=be.length-1;0<=Bt;Bt--){var tn=fe.g=be[Bt];gt=ft(tn,Re,!0,fe)&&gt}if(tn=fe.g=V,gt=ft(tn,Re,!0,fe)&&gt,gt=ft(tn,Re,!1,fe)&&gt,be)for(Bt=0;Bt<be.length;Bt++)tn=fe.g=be[Bt],gt=ft(tn,Re,!1,fe)&&gt}Ie.prototype.N=function(){if(Ie.aa.N.call(this),this.i){var V=this.i,fe;for(fe in V.g){for(var be=V.g[fe],Re=0;Re<be.length;Re++)ae(be[Re]);delete V.g[fe],V.h--}}this.F=null},Ie.prototype.K=function(V,fe,be,Re){return this.i.add(String(V),fe,!1,be,Re)},Ie.prototype.L=function(V,fe,be,Re){return this.i.add(String(V),fe,!0,be,Re)};function ft(V,fe,be,Re){if(fe=V.i.g[String(fe)],!fe)return!0;fe=fe.concat();for(var gt=!0,Bt=0;Bt<fe.length;++Bt){var tn=fe[Bt];if(tn&&!tn.da&&tn.capture==be){var Ea=tn.listener,Vr=tn.ha||tn.src;tn.fa&&W(V.i,tn),gt=Ea.call(Vr,Re)!==!1&&gt}}return gt&&!Re.defaultPrevented}function Ft(V,fe,be){if(typeof V=="function")be&&(V=m(V,be));else if(V&&typeof V.handleEvent=="function")V=m(V.handleEvent,V);else throw Error("Invalid listener argument");return 2147483647<Number(fe)?-1:i.setTimeout(V,fe||0)}function tt(V){V.g=Ft(()=>{V.g=null,V.i&&(V.i=!1,tt(V))},V.l);const fe=V.h;V.h=null,V.m.apply(null,fe)}class Ge extends D{constructor(fe,be){super(),this.m=fe,this.l=be,this.h=null,this.i=!1,this.g=null}j(fe){this.h=arguments,this.g?this.i=!0:tt(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pt(V){D.call(this),this.h=V,this.g={}}v(pt,D);var ht=[];function Nt(V){k(V.g,function(fe,be){this.g.hasOwnProperty(be)&&ye(fe)},V),V.g={}}pt.prototype.N=function(){pt.aa.N.call(this),Nt(this)},pt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var nn=i.JSON.stringify,yn=i.JSON.parse,qn=class{stringify(V){return i.JSON.stringify(V,void 0)}parse(V){return i.JSON.parse(V,void 0)}};function $t(){}$t.prototype.h=null;function Tt(V){return V.h||(V.h=V.i())}function ut(){}var kt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zt(){j.call(this,"d")}v(Zt,j);function je(){j.call(this,"c")}v(je,j);var Ke={},wt=null;function Vt(){return wt=wt||new Ie}Ke.La="serverreachability";function qt(V){j.call(this,Ke.La,V)}v(qt,j);function vt(V){const fe=Vt();Ve(fe,new qt(fe))}Ke.STAT_EVENT="statevent";function Kt(V,fe){j.call(this,Ke.STAT_EVENT,V),this.stat=fe}v(Kt,j);function Pt(V){const fe=Vt();Ve(fe,new Kt(fe,V))}Ke.Ma="timingevent";function Gn(V,fe){j.call(this,Ke.Ma,V),this.size=fe}v(Gn,j);function Nn(V,fe){if(typeof V!="function")throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){V()},fe)}function On(){this.g=!0}On.prototype.xa=function(){this.g=!1};function Yt(V,fe,be,Re,gt,Bt){V.info(function(){if(V.g)if(Bt)for(var tn="",Ea=Bt.split("&"),Vr=0;Vr<Ea.length;Vr++){var fa=Ea[Vr].split("=");if(1<fa.length){var ss=fa[0];fa=fa[1];var Ua=ss.split("_");tn=2<=Ua.length&&Ua[1]=="type"?tn+(ss+"="+fa+"&"):tn+(ss+"=redacted&")}}else tn=null;else tn=Bt;return"XMLHTTP REQ ("+Re+") [attempt "+gt+"]: "+fe+`
`+be+`
`+tn})}function Tn(V,fe,be,Re,gt,Bt,tn){V.info(function(){return"XMLHTTP RESP ("+Re+") [ attempt "+gt+"]: "+fe+`
`+be+`
`+Bt+" "+tn})}function Te(V,fe,be,Re){V.info(function(){return"XMLHTTP TEXT ("+fe+"): "+Ue(V,be)+(Re?" "+Re:"")})}function He(V,fe){V.info(function(){return"TIMEOUT: "+fe})}On.prototype.info=function(){};function Ue(V,fe){if(!V.g)return fe;if(!fe)return null;try{var be=JSON.parse(fe);if(be){for(V=0;V<be.length;V++)if(Array.isArray(be[V])){var Re=be[V];if(!(2>Re.length)){var gt=Re[1];if(Array.isArray(gt)&&!(1>gt.length)){var Bt=gt[0];if(Bt!="noop"&&Bt!="stop"&&Bt!="close")for(var tn=1;tn<gt.length;tn++)gt[tn]=""}}}}return nn(be)}catch{return fe}}var Le={NO_ERROR:0,TIMEOUT:8},Qe={},pe;function re(){}v(re,$t),re.prototype.g=function(){return new XMLHttpRequest},re.prototype.i=function(){return{}},pe=new re;function ge(V,fe,be,Re){this.j=V,this.i=fe,this.l=be,this.R=Re||1,this.U=new pt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Se}function Se(){this.i=null,this.g="",this.h=!1}var Me={},Ze={};function nt(V,fe,be){V.L=1,V.v=In(xt(fe)),V.m=be,V.P=!0,et(V,null)}function et(V,fe){V.F=Date.now(),It(V),V.A=xt(V.v);var be=V.A,Re=V.R;Array.isArray(Re)||(Re=[String(Re)]),_r(be.i,"t",Re),V.C=0,be=V.j.J,V.h=new Se,V.g=jg(V.j,be?fe:null,!V.m),0<V.O&&(V.M=new Ge(m(V.Y,V,V.g),V.O)),fe=V.U,be=V.g,Re=V.ca;var gt="readystatechange";Array.isArray(gt)||(gt&&(ht[0]=gt.toString()),gt=ht);for(var Bt=0;Bt<gt.length;Bt++){var tn=De(be,gt[Bt],Re||fe.handleEvent,!1,fe.h||fe);if(!tn)break;fe.g[tn.key]=tn}fe=V.H?E(V.H):{},V.m?(V.u||(V.u="POST"),fe["Content-Type"]="application/x-www-form-urlencoded",V.g.ea(V.A,V.u,V.m,fe)):(V.u="GET",V.g.ea(V.A,V.u,null,fe)),vt(),Yt(V.i,V.u,V.A,V.l,V.R,V.m)}ge.prototype.ca=function(V){V=V.target;const fe=this.M;fe&&Ds(V)==3?fe.j():this.Y(V)},ge.prototype.Y=function(V){try{if(V==this.g)e:{const Ua=Ds(this.g);var fe=this.g.Ba();const tu=this.g.Z();if(!(3>Ua)&&(Ua!=3||this.g&&(this.h.h||this.g.oa()||Sv(this.g)))){this.J||Ua!=4||fe==7||(fe==8||0>=tu?vt(3):vt(2)),En(this);var be=this.g.Z();this.X=be;t:if(lt(this)){var Re=Sv(this.g);V="";var gt=Re.length,Bt=Ds(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Cn(this),hn(this);var tn="";break t}this.h.i=new i.TextDecoder}for(fe=0;fe<gt;fe++)this.h.h=!0,V+=this.h.i.decode(Re[fe],{stream:!(Bt&&fe==gt-1)});Re.length=0,this.h.g+=V,this.C=0,tn=this.h.g}else tn=this.g.oa();if(this.o=be==200,Tn(this.i,this.u,this.A,this.l,this.R,Ua,be),this.o){if(this.T&&!this.K){t:{if(this.g){var Ea,Vr=this.g;if((Ea=Vr.g?Vr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(Ea)){var fa=Ea;break t}}fa=null}if(be=fa)Te(this.i,this.l,be,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Da(this,be);else{this.o=!1,this.s=3,Pt(12),Cn(this),hn(this);break e}}if(this.P){be=!0;let Us;for(;!this.J&&this.C<tn.length;)if(Us=bt(this,tn),Us==Ze){Ua==4&&(this.s=4,Pt(14),be=!1),Te(this.i,this.l,null,"[Incomplete Response]");break}else if(Us==Me){this.s=4,Pt(15),Te(this.i,this.l,tn,"[Invalid Chunk]"),be=!1;break}else Te(this.i,this.l,Us,null),Da(this,Us);if(lt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ua!=4||tn.length!=0||this.h.h||(this.s=1,Pt(16),be=!1),this.o=this.o&&be,!be)Te(this.i,this.l,tn,"[Invalid Chunked Response]"),Cn(this),hn(this);else if(0<tn.length&&!this.W){this.W=!0;var ss=this.j;ss.g==this&&ss.ba&&!ss.M&&(ss.j.info("Great, no buffering proxy detected. Bytes received: "+tn.length),Ti(ss),ss.M=!0,Pt(11))}}else Te(this.i,this.l,tn,null),Da(this,tn);Ua==4&&Cn(this),this.o&&!this.J&&(Ua==4?Xa(this.j,this):(this.o=!1,It(this)))}else Ev(this.g),be==400&&0<tn.indexOf("Unknown SID")?(this.s=3,Pt(12)):(this.s=0,Pt(13)),Cn(this),hn(this)}}}catch{}finally{}};function lt(V){return V.g?V.u=="GET"&&V.L!=2&&V.j.Ca:!1}function bt(V,fe){var be=V.C,Re=fe.indexOf(`
`,be);return Re==-1?Ze:(be=Number(fe.substring(be,Re)),isNaN(be)?Me:(Re+=1,Re+be>fe.length?Ze:(fe=fe.slice(Re,Re+be),V.C=Re+be,fe)))}ge.prototype.cancel=function(){this.J=!0,Cn(this)};function It(V){V.S=Date.now()+V.I,an(V,V.I)}function an(V,fe){if(V.B!=null)throw Error("WatchDog timer not null");V.B=Nn(m(V.ba,V),fe)}function En(V){V.B&&(i.clearTimeout(V.B),V.B=null)}ge.prototype.ba=function(){this.B=null;const V=Date.now();0<=V-this.S?(He(this.i,this.A),this.L!=2&&(vt(),Pt(17)),Cn(this),this.s=2,hn(this)):an(this,this.S-V)};function hn(V){V.j.G==0||V.J||Xa(V.j,V)}function Cn(V){En(V);var fe=V.M;fe&&typeof fe.ma=="function"&&fe.ma(),V.M=null,Nt(V.U),V.g&&(fe=V.g,V.g=null,fe.abort(),fe.ma())}function Da(V,fe){try{var be=V.j;if(be.G!=0&&(be.g==V||Ga(be.h,V))){if(!V.K&&Ga(be.h,V)&&be.G==3){try{var Re=be.Da.g.parse(fe)}catch{Re=null}if(Array.isArray(Re)&&Re.length==3){var gt=Re;if(gt[0]==0){e:if(!be.u){if(be.g)if(be.g.F+3e3<V.F)Mc(be),nA(be);else break e;Jf(be),Pt(18)}}else be.za=gt[1],0<be.za-be.T&&37500>gt[2]&&be.F&&be.v==0&&!be.C&&(be.C=Nn(m(be.Za,be),6e3));if(1>=_s(be.h)&&be.ca){try{be.ca()}catch{}be.ca=void 0}}else sl(be,11)}else if((V.K||be.g==V)&&Mc(be),!b(fe))for(gt=be.Da.g.parse(fe),fe=0;fe<gt.length;fe++){let fa=gt[fe];if(be.T=fa[0],fa=fa[1],be.G==2)if(fa[0]=="c"){be.K=fa[1],be.ia=fa[2];const ss=fa[3];ss!=null&&(be.la=ss,be.j.info("VER="+be.la));const Ua=fa[4];Ua!=null&&(be.Aa=Ua,be.j.info("SVER="+be.Aa));const tu=fa[5];tu!=null&&typeof tu=="number"&&0<tu&&(Re=1.5*tu,be.L=Re,be.j.info("backChannelRequestTimeoutMs_="+Re)),Re=be;const Us=V.g;if(Us){const iA=Us.g?Us.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(iA){var Bt=Re.h;Bt.g||iA.indexOf("spdy")==-1&&iA.indexOf("quic")==-1&&iA.indexOf("h2")==-1||(Bt.j=Bt.l,Bt.g=new Set,Bt.h&&(Qo(Bt,Bt.h),Bt.h=null))}if(Re.D){const em=Us.g?Us.g.getResponseHeader("X-HTTP-Session-Id"):null;em&&(Re.ya=em,zt(Re.I,Re.D,em))}}be.G=3,be.l&&be.l.ua(),be.ba&&(be.R=Date.now()-V.F,be.j.info("Handshake RTT: "+be.R+"ms")),Re=be;var tn=V;if(Re.qa=Zf(Re,Re.J?Re.ia:null,Re.W),tn.K){ws(Re.h,tn);var Ea=tn,Vr=Re.L;Vr&&(Ea.I=Vr),Ea.B&&(En(Ea),It(Ea)),Re.g=tn}else Kg(Re);0<be.i.length&&aA(be)}else fa[0]!="stop"&&fa[0]!="close"||sl(be,7);else be.G==3&&(fa[0]=="stop"||fa[0]=="close"?fa[0]=="stop"?sl(be,7):Xf(be):fa[0]!="noop"&&be.l&&be.l.ta(fa),be.v=0)}}vt(4)}catch{}}var Nr=class{constructor(V,fe){this.g=V,this.map=fe}};function jr(V){this.l=V||10,i.PerformanceNavigationTiming?(V=i.performance.getEntriesByType("navigation"),V=0<V.length&&(V[0].nextHopProtocol=="hq"||V[0].nextHopProtocol=="h2")):V=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=V?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ys(V){return V.h?!0:V.g?V.g.size>=V.j:!1}function _s(V){return V.h?1:V.g?V.g.size:0}function Ga(V,fe){return V.h?V.h==fe:V.g?V.g.has(fe):!1}function Qo(V,fe){V.g?V.g.add(fe):V.h=fe}function ws(V,fe){V.h&&V.h==fe?V.h=null:V.g&&V.g.has(fe)&&V.g.delete(fe)}jr.prototype.cancel=function(){if(this.i=Lt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const V of this.g.values())V.cancel();this.g.clear()}};function Lt(V){if(V.h!=null)return V.i.concat(V.h.D);if(V.g!=null&&V.g.size!==0){let fe=V.i;for(const be of V.g.values())fe=fe.concat(be.D);return fe}return y(V.i)}function Br(V){if(V.V&&typeof V.V=="function")return V.V();if(typeof Map<"u"&&V instanceof Map||typeof Set<"u"&&V instanceof Set)return Array.from(V.values());if(typeof V=="string")return V.split("");if(c(V)){for(var fe=[],be=V.length,Re=0;Re<be;Re++)fe.push(V[Re]);return fe}fe=[],be=0;for(Re in V)fe[be++]=V[Re];return fe}function Vn(V){if(V.na&&typeof V.na=="function")return V.na();if(!V.V||typeof V.V!="function"){if(typeof Map<"u"&&V instanceof Map)return Array.from(V.keys());if(!(typeof Set<"u"&&V instanceof Set)){if(c(V)||typeof V=="string"){var fe=[];V=V.length;for(var be=0;be<V;be++)fe.push(be);return fe}fe=[],be=0;for(const Re in V)fe[be++]=Re;return fe}}}function Co(V,fe){if(V.forEach&&typeof V.forEach=="function")V.forEach(fe,void 0);else if(c(V)||typeof V=="string")Array.prototype.forEach.call(V,fe,void 0);else for(var be=Vn(V),Re=Br(V),gt=Re.length,Bt=0;Bt<gt;Bt++)fe.call(void 0,Re[Bt],be&&be[Bt],V)}var js=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $e(V,fe){if(V){V=V.split("&");for(var be=0;be<V.length;be++){var Re=V[be].indexOf("="),gt=null;if(0<=Re){var Bt=V[be].substring(0,Re);gt=V[be].substring(Re+1)}else Bt=V[be];fe(Bt,gt?decodeURIComponent(gt.replace(/\+/g," ")):"")}}}function ue(V){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,V instanceof ue){this.h=V.h,Ut(this,V.j),this.o=V.o,this.g=V.g,_t(this,V.s),this.l=V.l;var fe=V.i,be=new nl;be.i=fe.i,fe.g&&(be.g=new Map(fe.g),be.h=fe.h),dn(this,be),this.m=V.m}else V&&(fe=String(V).match(js))?(this.h=!1,Ut(this,fe[1]||"",!0),this.o=vn(fe[2]||""),this.g=vn(fe[3]||"",!0),_t(this,fe[4]),this.l=vn(fe[5]||"",!0),dn(this,fe[6]||"",!0),this.m=vn(fe[7]||"")):(this.h=!1,this.i=new nl(null,this.h))}ue.prototype.toString=function(){var V=[],fe=this.j;fe&&V.push(Ya(fe,$u,!0),":");var be=this.g;return(be||fe=="file")&&(V.push("//"),(fe=this.o)&&V.push(Ya(fe,$u,!0),"@"),V.push(encodeURIComponent(String(be)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),be=this.s,be!=null&&V.push(":",String(be))),(be=this.l)&&(this.g&&be.charAt(0)!="/"&&V.push("/"),V.push(Ya(be,be.charAt(0)=="/"?jf:Wf,!0))),(be=this.i.toString())&&V.push("?",be),(be=this.m)&&V.push("#",Ya(be,Zd)),V.join("")};function xt(V){return new ue(V)}function Ut(V,fe,be){V.j=be?vn(fe,!0):fe,V.j&&(V.j=V.j.replace(/:$/,""))}function _t(V,fe){if(fe){if(fe=Number(fe),isNaN(fe)||0>fe)throw Error("Bad port number "+fe);V.s=fe}else V.s=null}function dn(V,fe,be){fe instanceof nl?(V.i=fe,qf(V.i,V.h)):(be||(fe=Ya(fe,ir)),V.i=new nl(fe,V.h))}function zt(V,fe,be){V.i.set(fe,be)}function In(V){return zt(V,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),V}function vn(V,fe){return V?fe?decodeURI(V.replace(/%25/g,"%2525")):decodeURIComponent(V):""}function Ya(V,fe,be){return typeof V=="string"?(V=encodeURI(V).replace(fe,Sa),be&&(V=V.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V):null}function Sa(V){return V=V.charCodeAt(0),"%"+(V>>4&15).toString(16)+(V&15).toString(16)}var $u=/[#\/\?@]/g,Wf=/[#\?:]/g,jf=/[#\?]/g,ir=/[#\?@]/g,Zd=/#/g;function nl(V,fe){this.h=this.g=null,this.i=V||null,this.j=!!fe}function Ps(V){V.g||(V.g=new Map,V.h=0,V.i&&$e(V.i,function(fe,be){V.add(decodeURIComponent(fe.replace(/\+/g," ")),be)}))}e=nl.prototype,e.add=function(V,fe){Ps(this),this.i=null,V=Zl(this,V);var be=this.g.get(V);return be||this.g.set(V,be=[]),be.push(fe),this.h+=1,this};function Go(V,fe){Ps(V),fe=Zl(V,fe),V.g.has(fe)&&(V.i=null,V.h-=V.g.get(fe).length,V.g.delete(fe))}function qs(V,fe){return Ps(V),fe=Zl(V,fe),V.g.has(fe)}e.forEach=function(V,fe){Ps(this),this.g.forEach(function(be,Re){be.forEach(function(gt){V.call(fe,gt,Re,this)},this)},this)},e.na=function(){Ps(this);const V=Array.from(this.g.values()),fe=Array.from(this.g.keys()),be=[];for(let Re=0;Re<fe.length;Re++){const gt=V[Re];for(let Bt=0;Bt<gt.length;Bt++)be.push(fe[Re])}return be},e.V=function(V){Ps(this);let fe=[];if(typeof V=="string")qs(this,V)&&(fe=fe.concat(this.g.get(Zl(this,V))));else{V=Array.from(this.g.values());for(let be=0;be<V.length;be++)fe=fe.concat(V[be])}return fe},e.set=function(V,fe){return Ps(this),this.i=null,V=Zl(this,V),qs(this,V)&&(this.h-=this.g.get(V).length),this.g.set(V,[fe]),this.h+=1,this},e.get=function(V,fe){return V?(V=this.V(V),0<V.length?String(V[0]):fe):fe};function _r(V,fe,be){Go(V,fe),0<be.length&&(V.i=null,V.g.set(Zl(V,fe),y(be)),V.h+=be.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const V=[],fe=Array.from(this.g.keys());for(var be=0;be<fe.length;be++){var Re=fe[be];const Bt=encodeURIComponent(String(Re)),tn=this.V(Re);for(Re=0;Re<tn.length;Re++){var gt=Bt;tn[Re]!==""&&(gt+="="+encodeURIComponent(String(tn[Re]))),V.push(gt)}}return this.i=V.join("&")};function Zl(V,fe){return fe=String(fe),V.j&&(fe=fe.toLowerCase()),fe}function qf(V,fe){fe&&!V.j&&(Ps(V),V.i=null,V.g.forEach(function(be,Re){var gt=Re.toLowerCase();Re!=gt&&(Go(this,Re),_r(this,gt,be))},V)),V.j=fe}function eu(V,fe){const be=new On;if(i.Image){const Re=new Image;Re.onload=h(vr,be,"TestLoadImage: loaded",!0,fe,Re),Re.onerror=h(vr,be,"TestLoadImage: error",!1,fe,Re),Re.onabort=h(vr,be,"TestLoadImage: abort",!1,fe,Re),Re.ontimeout=h(vr,be,"TestLoadImage: timeout",!1,fe,Re),i.setTimeout(function(){Re.ontimeout&&Re.ontimeout()},1e4),Re.src=V}else fe(!1)}function ki(V,fe){const be=new On,Re=new AbortController,gt=setTimeout(()=>{Re.abort(),vr(be,"TestPingServer: timeout",!1,fe)},1e4);fetch(V,{signal:Re.signal}).then(Bt=>{clearTimeout(gt),Bt.ok?vr(be,"TestPingServer: ok",!0,fe):vr(be,"TestPingServer: server error",!1,fe)}).catch(()=>{clearTimeout(gt),vr(be,"TestPingServer: error",!1,fe)})}function vr(V,fe,be,Re,gt){try{gt&&(gt.onload=null,gt.onerror=null,gt.onabort=null,gt.ontimeout=null),Re(be)}catch{}}function bv(){this.g=new qn}function xv(V,fe,be){const Re=be||"";try{Co(V,function(gt,Bt){let tn=gt;A(gt)&&(tn=nn(gt)),fe.push(Re+Bt+"="+encodeURIComponent(tn))})}catch(gt){throw fe.push(Re+"type="+encodeURIComponent("_badmap")),gt}}function ii(V){this.l=V.Ub||null,this.j=V.eb||!1}v(ii,$t),ii.prototype.g=function(){return new al(this.l,this.j)},ii.prototype.i=(function(V){return function(){return V}})({});function al(V,fe){Ie.call(this),this.D=V,this.o=fe,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(al,Ie),e=al.prototype,e.open=function(V,fe){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=V,this.A=fe,this.readyState=1,Ye(this)},e.send=function(V){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const fe={headers:this.u,method:this.B,credentials:this.m,cache:void 0};V&&(fe.body=V),(this.D||i).fetch(new Request(this.A,fe)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ba(this)),this.readyState=0},e.Sa=function(V){if(this.g&&(this.l=V,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=V.headers,this.readyState=2,Ye(this)),this.g&&(this.readyState=3,Ye(this),this.g)))if(this.responseType==="arraybuffer")V.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof i.ReadableStream<"u"&&"body"in V){if(this.j=V.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;eA(this)}else V.text().then(this.Ra.bind(this),this.ga.bind(this))};function eA(V){V.j.read().then(V.Pa.bind(V)).catch(V.ga.bind(V))}e.Pa=function(V){if(this.g){if(this.o&&V.value)this.response.push(V.value);else if(!this.o){var fe=V.value?V.value:new Uint8Array(0);(fe=this.v.decode(fe,{stream:!V.done}))&&(this.response=this.responseText+=fe)}V.done?ba(this):Ye(this),this.readyState==3&&eA(this)}},e.Ra=function(V){this.g&&(this.response=this.responseText=V,ba(this))},e.Qa=function(V){this.g&&(this.response=V,ba(this))},e.ga=function(){this.g&&ba(this)};function ba(V){V.readyState=4,V.l=null,V.j=null,V.v=null,Ye(V)}e.setRequestHeader=function(V,fe){this.u.append(V,fe)},e.getResponseHeader=function(V){return this.h&&this.h.get(V.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const V=[],fe=this.h.entries();for(var be=fe.next();!be.done;)be=be.value,V.push(be[0]+": "+be[1]),be=fe.next();return V.join(`\r
`)};function Ye(V){V.onreadystatechange&&V.onreadystatechange.call(V)}Object.defineProperty(al.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(V){this.m=V?"include":"same-origin"}});function pr(V){let fe="";return k(V,function(be,Re){fe+=Re,fe+=":",fe+=be,fe+=`\r
`}),fe}function tA(V,fe,be){e:{for(Re in be){var Re=!1;break e}Re=!0}Re||(be=pr(be),typeof V=="string"?be!=null&&encodeURIComponent(String(be)):zt(V,fe,be))}function wr(V){Ie.call(this),this.headers=new Map,this.o=V||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(wr,Ie);var yb=/^https?$/i,_b=["POST","PUT"];e=wr.prototype,e.Ha=function(V){this.J=V},e.ea=function(V,fe,be,Re){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+V);fe=fe?fe.toUpperCase():"GET",this.D=V,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():pe.g(),this.v=this.o?Tt(this.o):Tt(pe),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(fe,String(V),!0),this.B=!1}catch(Bt){Qg(this,Bt);return}if(V=be||"",be=new Map(this.headers),Re)if(Object.getPrototypeOf(Re)===Object.prototype)for(var gt in Re)be.set(gt,Re[gt]);else if(typeof Re.keys=="function"&&typeof Re.get=="function")for(const Bt of Re.keys())be.set(Bt,Re.get(Bt));else throw Error("Unknown input type for opt_headers: "+String(Re));Re=Array.from(be.keys()).find(Bt=>Bt.toLowerCase()=="content-type"),gt=i.FormData&&V instanceof i.FormData,!(0<=Array.prototype.indexOf.call(_b,fe,void 0))||Re||gt||be.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Bt,tn]of be)this.g.setRequestHeader(Bt,tn);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Yf(this),this.u=!0,this.g.send(V),this.u=!1}catch(Bt){Qg(this,Bt)}};function Qg(V,fe){V.h=!1,V.g&&(V.j=!0,V.g.abort(),V.j=!1),V.l=fe,V.m=5,Cv(V),kr(V)}function Cv(V){V.A||(V.A=!0,Ve(V,"complete"),Ve(V,"error"))}e.abort=function(V){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=V||7,Ve(this,"complete"),Ve(this,"abort"),kr(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),kr(this,!0)),wr.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Gg(this):this.bb())},e.bb=function(){Gg(this)};function Gg(V){if(V.h&&typeof o<"u"&&(!V.v[1]||Ds(V)!=4||V.Z()!=2)){if(V.u&&Ds(V)==4)Ft(V.Ea,0,V);else if(Ve(V,"readystatechange"),Ds(V)==4){V.h=!1;try{const tn=V.Z();e:switch(tn){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var fe=!0;break e;default:fe=!1}var be;if(!(be=fe)){var Re;if(Re=tn===0){var gt=String(V.D).match(js)[1]||null;!gt&&i.self&&i.self.location&&(gt=i.self.location.protocol.slice(0,-1)),Re=!yb.test(gt?gt.toLowerCase():"")}be=Re}if(be)Ve(V,"complete"),Ve(V,"success");else{V.m=6;try{var Bt=2<Ds(V)?V.g.statusText:""}catch{Bt=""}V.l=Bt+" ["+V.Z()+"]",Cv(V)}}finally{kr(V)}}}}function kr(V,fe){if(V.g){Yf(V);const be=V.g,Re=V.v[0]?()=>{}:null;V.g=null,V.v=null,fe||Ve(V,"ready");try{be.onreadystatechange=Re}catch{}}}function Yf(V){V.I&&(i.clearTimeout(V.I),V.I=null)}e.isActive=function(){return!!this.g};function Ds(V){return V.g?V.g.readyState:0}e.Z=function(){try{return 2<Ds(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(V){if(this.g){var fe=this.g.responseText;return V&&fe.indexOf(V)==0&&(fe=fe.substring(V.length)),yn(fe)}};function Sv(V){try{if(!V.g)return null;if("response"in V.g)return V.g.response;switch(V.H){case"":case"text":return V.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in V.g)return V.g.mozResponseArrayBuffer}return null}catch{return null}}function Ev(V){const fe={};V=(V.g&&2<=Ds(V)&&V.g.getAllResponseHeaders()||"").split(`\r
`);for(let Re=0;Re<V.length;Re++){if(b(V[Re]))continue;var be=F(V[Re]);const gt=be[0];if(be=be[1],typeof be!="string")continue;be=be.trim();const Bt=fe[gt]||[];fe[gt]=Bt,Bt.push(be)}S(fe,function(Re){return Re.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function bs(V,fe,be){return be&&be.internalChannelParams&&be.internalChannelParams[V]||fe}function Bv(V){this.Aa=0,this.i=[],this.j=new On,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=bs("failFast",!1,V),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=bs("baseRetryDelayMs",5e3,V),this.cb=bs("retryDelaySeedMs",1e4,V),this.Wa=bs("forwardChannelMaxRetries",2,V),this.wa=bs("forwardChannelRequestTimeoutMs",2e4,V),this.pa=V&&V.xmlHttpFactory||void 0,this.Xa=V&&V.Tb||void 0,this.Ca=V&&V.useFetchStreams||!1,this.L=void 0,this.J=V&&V.supportsCrossDomainXhr||!1,this.K="",this.h=new jr(V&&V.concurrentRequestLimit),this.Da=new bv,this.P=V&&V.fastHandshake||!1,this.O=V&&V.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=V&&V.Rb||!1,V&&V.xa&&this.j.xa(),V&&V.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&V&&V.detectBufferingProxy||!1,this.ja=void 0,V&&V.longPollingTimeout&&0<V.longPollingTimeout&&(this.ja=V.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Bv.prototype,e.la=8,e.G=1,e.connect=function(V,fe,be,Re){Pt(0),this.W=V,this.H=fe||{},be&&Re!==void 0&&(this.H.OSID=be,this.H.OAID=Re),this.F=this.X,this.I=Zf(this,null,this.W),aA(this)};function Xf(V){if(kv(V),V.G==3){var fe=V.U++,be=xt(V.I);if(zt(be,"SID",V.K),zt(be,"RID",fe),zt(be,"TYPE","terminate"),rA(V,be),fe=new ge(V,V.j,fe),fe.L=2,fe.v=In(xt(be)),be=!1,i.navigator&&i.navigator.sendBeacon)try{be=i.navigator.sendBeacon(fe.v.toString(),"")}catch{}!be&&i.Image&&(new Image().src=fe.v,be=!0),be||(fe.g=jg(fe.j,null),fe.g.ea(fe.v)),fe.F=Date.now(),It(fe)}Wg(V)}function nA(V){V.g&&(Ti(V),V.g.cancel(),V.g=null)}function kv(V){nA(V),V.u&&(i.clearTimeout(V.u),V.u=null),Mc(V),V.h.cancel(),V.s&&(typeof V.s=="number"&&i.clearTimeout(V.s),V.s=null)}function aA(V){if(!ys(V.h)&&!V.s){V.s=!0;var fe=V.Ga;Z||se(),ce||(Z(),ce=!0),J.add(fe,V),V.B=0}}function zg(V,fe){return _s(V.h)>=V.h.j-(V.s?1:0)?!1:V.s?(V.i=fe.D.concat(V.i),!0):V.G==1||V.G==2||V.B>=(V.Va?0:V.Wa)?!1:(V.s=Nn(m(V.Ga,V,fe),rl(V,V.B)),V.B++,!0)}e.Ga=function(V){if(this.s)if(this.s=null,this.G==1){if(!V){this.U=Math.floor(1e5*Math.random()),V=this.U++;const gt=new ge(this,this.j,V);let Bt=this.o;if(this.S&&(Bt?(Bt=E(Bt),P(Bt,this.S)):Bt=this.S),this.m!==null||this.O||(gt.H=Bt,Bt=null),this.P)e:{for(var fe=0,be=0;be<this.i.length;be++){t:{var Re=this.i[be];if("__data__"in Re.map&&(Re=Re.map.__data__,typeof Re=="string")){Re=Re.length;break t}Re=void 0}if(Re===void 0)break;if(fe+=Re,4096<fe){fe=be;break e}if(fe===4096||be===this.i.length-1){fe=be+1;break e}}fe=1e3}else fe=1e3;fe=So(this,gt,fe),be=xt(this.I),zt(be,"RID",V),zt(be,"CVER",22),this.D&&zt(be,"X-HTTP-Session-Id",this.D),rA(this,be),Bt&&(this.O?fe="headers="+encodeURIComponent(String(pr(Bt)))+"&"+fe:this.m&&tA(be,this.m,Bt)),Qo(this.h,gt),this.Ua&&zt(be,"TYPE","init"),this.P?(zt(be,"$req",fe),zt(be,"SID","null"),gt.T=!0,nt(gt,be,null)):nt(gt,be,fe),this.G=2}}else this.G==3&&(V?Ys(this,V):this.i.length==0||ys(this.h)||Ys(this))};function Ys(V,fe){var be;fe?be=fe.l:be=V.U++;const Re=xt(V.I);zt(Re,"SID",V.K),zt(Re,"RID",be),zt(Re,"AID",V.T),rA(V,Re),V.m&&V.o&&tA(Re,V.m,V.o),be=new ge(V,V.j,be,V.B+1),V.m===null&&(be.H=V.o),fe&&(V.i=fe.D.concat(V.i)),fe=So(V,be,1e3),be.I=Math.round(.5*V.wa)+Math.round(.5*V.wa*Math.random()),Qo(V.h,be),nt(be,Re,fe)}function rA(V,fe){V.H&&k(V.H,function(be,Re){zt(fe,Re,be)}),V.l&&Co({},function(be,Re){zt(fe,Re,be)})}function So(V,fe,be){be=Math.min(V.i.length,be);var Re=V.l?m(V.l.Na,V.l,V):null;e:{var gt=V.i;let Bt=-1;for(;;){const tn=["count="+be];Bt==-1?0<be?(Bt=gt[0].g,tn.push("ofs="+Bt)):Bt=0:tn.push("ofs="+Bt);let Ea=!0;for(let Vr=0;Vr<be;Vr++){let fa=gt[Vr].g;const ss=gt[Vr].map;if(fa-=Bt,0>fa)Bt=Math.max(0,gt[Vr].g-100),Ea=!1;else try{xv(ss,tn,"req"+fa+"_")}catch{Re&&Re(ss)}}if(Ea){Re=tn.join("&");break e}}}return V=V.i.splice(0,be),fe.D=V,Re}function Kg(V){if(!V.g&&!V.u){V.Y=1;var fe=V.Fa;Z||se(),ce||(Z(),ce=!0),J.add(fe,V),V.v=0}}function Jf(V){return V.g||V.u||3<=V.v?!1:(V.Y++,V.u=Nn(m(V.Fa,V),rl(V,V.v)),V.v++,!0)}e.Fa=function(){if(this.u=null,sA(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var V=2*this.R;this.j.info("BP detection timer enabled: "+V),this.A=Nn(m(this.ab,this),V)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Pt(10),nA(this),sA(this))};function Ti(V){V.A!=null&&(i.clearTimeout(V.A),V.A=null)}function sA(V){V.g=new ge(V,V.j,"rpc",V.Y),V.m===null&&(V.g.H=V.o),V.g.O=0;var fe=xt(V.qa);zt(fe,"RID","rpc"),zt(fe,"SID",V.K),zt(fe,"AID",V.T),zt(fe,"CI",V.F?"0":"1"),!V.F&&V.ja&&zt(fe,"TO",V.ja),zt(fe,"TYPE","xmlhttp"),rA(V,fe),V.m&&V.o&&tA(fe,V.m,V.o),V.L&&(V.g.I=V.L);var be=V.g;V=V.ia,be.L=1,be.v=In(xt(fe)),be.m=null,be.P=!0,et(be,V)}e.Za=function(){this.C!=null&&(this.C=null,nA(this),Jf(this),Pt(19))};function Mc(V){V.C!=null&&(i.clearTimeout(V.C),V.C=null)}function Xa(V,fe){var be=null;if(V.g==fe){Mc(V),Ti(V),V.g=null;var Re=2}else if(Ga(V.h,fe))be=fe.D,ws(V.h,fe),Re=1;else return;if(V.G!=0){if(fe.o)if(Re==1){be=fe.m?fe.m.length:0,fe=Date.now()-fe.F;var gt=V.B;Re=Vt(),Ve(Re,new Gn(Re,be)),aA(V)}else Kg(V);else if(gt=fe.s,gt==3||gt==0&&0<fe.X||!(Re==1&&zg(V,fe)||Re==2&&Jf(V)))switch(be&&0<be.length&&(fe=V.h,fe.i=fe.i.concat(be)),gt){case 1:sl(V,5);break;case 4:sl(V,10);break;case 3:sl(V,6);break;default:sl(V,2)}}}function rl(V,fe){let be=V.Ta+Math.floor(Math.random()*V.cb);return V.isActive()||(be*=2),be*fe}function sl(V,fe){if(V.j.info("Error code "+fe),fe==2){var be=m(V.fb,V),Re=V.Xa;const gt=!Re;Re=new ue(Re||"//www.google.com/images/cleardot.gif"),i.location&&i.location.protocol=="http"||Ut(Re,"https"),In(Re),gt?eu(Re.toString(),be):ki(Re.toString(),be)}else Pt(2);V.G=0,V.l&&V.l.sa(fe),Wg(V),kv(V)}e.fb=function(V){V?(this.j.info("Successfully pinged google.com"),Pt(2)):(this.j.info("Failed to ping google.com"),Pt(1))};function Wg(V){if(V.G=0,V.ka=[],V.l){const fe=Lt(V.h);(fe.length!=0||V.i.length!=0)&&(g(V.ka,fe),g(V.ka,V.i),V.h.i.length=0,y(V.i),V.i.length=0),V.l.ra()}}function Zf(V,fe,be){var Re=be instanceof ue?xt(be):new ue(be);if(Re.g!="")fe&&(Re.g=fe+"."+Re.g),_t(Re,Re.s);else{var gt=i.location;Re=gt.protocol,fe=fe?fe+"."+gt.hostname:gt.hostname,gt=+gt.port;var Bt=new ue(null);Re&&Ut(Bt,Re),fe&&(Bt.g=fe),gt&&_t(Bt,gt),be&&(Bt.l=be),Re=Bt}return be=V.D,fe=V.ya,be&&fe&&zt(Re,be,fe),zt(Re,"VER",V.la),rA(V,Re),Re}function jg(V,fe,be){if(fe&&!V.J)throw Error("Can't create secondary domain capable XhrIo object.");return fe=V.Ca&&!V.pa?new wr(new ii({eb:be})):new wr(V.pa),fe.Ha(V.J),fe}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function qg(){}e=qg.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function zo(V,fe){Ie.call(this),this.g=new Bv(fe),this.l=V,this.h=fe&&fe.messageUrlParams||null,V=fe&&fe.messageHeaders||null,fe&&fe.clientProtocolHeaderRequired&&(V?V["X-Client-Protocol"]="webchannel":V={"X-Client-Protocol":"webchannel"}),this.g.o=V,V=fe&&fe.initMessageHeaders||null,fe&&fe.messageContentType&&(V?V["X-WebChannel-Content-Type"]=fe.messageContentType:V={"X-WebChannel-Content-Type":fe.messageContentType}),fe&&fe.va&&(V?V["X-WebChannel-Client-Profile"]=fe.va:V={"X-WebChannel-Client-Profile":fe.va}),this.g.S=V,(V=fe&&fe.Sb)&&!b(V)&&(this.g.m=V),this.v=fe&&fe.supportsCrossDomainXhr||!1,this.u=fe&&fe.sendRawJson||!1,(fe=fe&&fe.httpSessionIdParam)&&!b(fe)&&(this.g.D=fe,V=this.h,V!==null&&fe in V&&(V=this.h,fe in V&&delete V[fe])),this.j=new li(this)}v(zo,Ie),zo.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zo.prototype.close=function(){Xf(this.g)},zo.prototype.o=function(V){var fe=this.g;if(typeof V=="string"){var be={};be.__data__=V,V=be}else this.u&&(be={},be.__data__=nn(V),V=be);fe.i.push(new Nr(fe.Ya++,V)),fe.G==3&&aA(fe)},zo.prototype.N=function(){this.g.l=null,delete this.j,Xf(this.g),delete this.g,zo.aa.N.call(this)};function Tv(V){Zt.call(this),V.__headers__&&(this.headers=V.__headers__,this.statusCode=V.__status__,delete V.__headers__,delete V.__status__);var fe=V.__sm__;if(fe){e:{for(const be in fe){V=be;break e}V=void 0}(this.i=V)&&(V=this.i,fe=fe!==null&&V in fe?fe[V]:void 0),this.data=fe}else this.data=V}v(Tv,Zt);function oA(){je.call(this),this.status=1}v(oA,je);function li(V){this.g=V}v(li,qg),li.prototype.ua=function(){Ve(this.g,"a")},li.prototype.ta=function(V){Ve(this.g,new Tv(V))},li.prototype.sa=function(V){Ve(this.g,new oA)},li.prototype.ra=function(){Ve(this.g,"b")},zo.prototype.send=zo.prototype.o,zo.prototype.open=zo.prototype.m,zo.prototype.close=zo.prototype.close,Le.NO_ERROR=0,Le.TIMEOUT=8,Le.HTTP_ERROR=6,Qe.COMPLETE="complete",ut.EventType=kt,kt.OPEN="a",kt.CLOSE="b",kt.ERROR="c",kt.MESSAGE="d",Ie.prototype.listen=Ie.prototype.K,wr.prototype.listenOnce=wr.prototype.L,wr.prototype.getLastError=wr.prototype.Ka,wr.prototype.getLastErrorCode=wr.prototype.Ba,wr.prototype.getStatus=wr.prototype.Z,wr.prototype.getResponseJson=wr.prototype.Oa,wr.prototype.getResponseText=wr.prototype.oa,wr.prototype.send=wr.prototype.ea,wr.prototype.setWithCredentials=wr.prototype.Ha}).apply(typeof Dy<"u"?Dy:typeof self<"u"?self:typeof window<"u"?window:{});const PV="@firebase/firestore",DV="4.8.0";class hi{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}hi.UNAUTHENTICATED=new hi(null),hi.GOOGLE_CREDENTIALS=new hi("google-credentials-uid"),hi.FIRST_PARTY=new hi("first-party-uid"),hi.MOCK_USER=new hi("mock-user");let gb="11.10.0";const V2=new ug("@firebase/firestore");function El(e,...t){if(V2.logLevel<=Ma.DEBUG){const n=t.map(qz);V2.debug(`Firestore (${gb}): ${e}`,...n)}}function jz(e,...t){if(V2.logLevel<=Ma.ERROR){const n=t.map(qz);V2.error(`Firestore (${gb}): ${e}`,...n)}}function qz(e){if(typeof e=="string")return e;try{return(function(n){return JSON.stringify(n)})(e)}catch{return e}}function L2(e,t,n){let a="Unexpected state";typeof t=="string"?a=t:n=t,Yz(e,a,n)}function Yz(e,t,n){let a=`FIRESTORE (${gb}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{a+=" CONTEXT: "+JSON.stringify(n)}catch{a+=" CONTEXT: "+n}throw jz(a),new Error(a)}function r0(e,t,n,a){let r="Unexpected state";typeof n=="string"?r=n:a=n,e||Yz(t,r,a)}const ka={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};class Ta extends Uu{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class s0{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}class Pnt{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Dnt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(hi.UNAUTHENTICATED)))}shutdown(){}}class Unt{constructor(t){this.t=t,this.currentUser=hi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){r0(this.o===void 0,42304);let a=this.i;const r=c=>this.i!==a?(a=this.i,n(c)):Promise.resolve();let s=new s0;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new s0,t.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const c=s;t.enqueueRetryable((async()=>{await c.promise,await r(this.currentUser)}))},i=c=>{El("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((c=>i(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?i(c):(El("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new s0)}}),0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((a=>this.i!==t?(El("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(r0(typeof a.accessToken=="string",31837,{l:a}),new Pnt(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return r0(t===null||typeof t=="string",2055,{h:t}),new hi(t)}}class Rnt{constructor(t,n,a){this.P=t,this.T=n,this.I=a,this.type="FirstParty",this.user=hi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Nnt{constructor(t,n,a){this.P=t,this.T=n,this.I=a}getToken(){return Promise.resolve(new Rnt(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(hi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class UV{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Vnt{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Qi(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){r0(this.o===void 0,3512);const a=s=>{s.error!=null&&El("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,El("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable((()=>a(s)))};const r=s=>{El("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>r(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):El("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new UV(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(r0(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new UV(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Lnt(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let a=0;a<e;a++)n[a]=Math.floor(256*Math.random());return n}function Mnt(){return new TextEncoder}class Ont{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const r=Lnt(40);for(let s=0;s<r.length;++s)a.length<20&&r[s]<n&&(a+=t.charAt(r[s]%62))}return a}}function Pl(e,t){return e<t?-1:e>t?1:0}function Hnt(e,t){let n=0;for(;n<e.length&&n<t.length;){const a=e.codePointAt(n),r=t.codePointAt(n);if(a!==r){if(a<128&&r<128)return Pl(a,r);{const s=Mnt(),o=$nt(s.encode(RV(e,n)),s.encode(RV(t,n)));return o!==0?o:Pl(a,r)}}n+=a>65535?2:1}return Pl(e.length,t.length)}function RV(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function $nt(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Pl(e[n],t[n]);return Pl(e.length,t.length)}const NV="__name__";class Au{constructor(t,n,a){n===void 0?n=0:n>t.length&&L2(637,{offset:n,range:t.length}),a===void 0?a=t.length-n:a>t.length-n&&L2(1746,{length:a,range:t.length-n}),this.segments=t,this.offset=n,this.len=a}get length(){return this.len}isEqual(t){return Au.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Au?t.forEach((a=>{n.push(a)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,a=this.limit();n<a;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const a=Math.min(t.length,n.length);for(let r=0;r<a;r++){const s=Au.compareSegments(t.get(r),n.get(r));if(s!==0)return s}return Pl(t.length,n.length)}static compareSegments(t,n){const a=Au.isNumericId(t),r=Au.isNumericId(n);return a&&!r?-1:!a&&r?1:a&&r?Au.extractNumericId(t).compare(Au.extractNumericId(n)):Hnt(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return oI.fromString(t.substring(4,t.length-2))}}class vl extends Au{construct(t,n,a){return new vl(t,n,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const a of t){if(a.indexOf("//")>=0)throw new Ta(ka.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);n.push(...a.split("/").filter((r=>r.length>0)))}return new vl(n)}static emptyPath(){return new vl([])}}const Qnt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class DA extends Au{construct(t,n,a){return new DA(t,n,a)}static isValidIdentifier(t){return Qnt.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),DA.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===NV}static keyField(){return new DA([NV])}static fromServerFormat(t){const n=[];let a="",r=0;const s=()=>{if(a.length===0)throw new Ta(ka.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(a),a=""};let o=!1;for(;r<t.length;){const i=t[r];if(i==="\\"){if(r+1===t.length)throw new Ta(ka.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Ta(ka.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);a+=c,r+=2}else i==="`"?(o=!o,r++):i!=="."||o?(a+=i,r++):(s(),r++)}if(s(),o)throw new Ta(ka.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new DA(n)}static emptyPath(){return new DA([])}}class $A{constructor(t){this.path=t}static fromPath(t){return new $A(vl.fromString(t))}static fromName(t){return new $A(vl.fromString(t).popFirst(5))}static empty(){return new $A(vl.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&vl.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return vl.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new $A(new vl(t.slice()))}}function Gnt(e,t,n,a){if(t===!0&&a===!0)throw new Ta(ka.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function znt(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function ns(e,t){const n={typeString:e};return t&&(n.value=t),n}function Hg(e,t){if(!znt(e))throw new Ta(ka.INVALID_ARGUMENT,"JSON must be an object");let n;for(const a in t)if(t[a]){const r=t[a].typeString,s="value"in t[a]?{value:t[a].value}:void 0;if(!(a in e)){n=`JSON missing required field: '${a}'`;break}const o=e[a];if(r&&typeof o!==r){n=`JSON field '${a}' must be a ${r}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${a}' field to equal '${s.value}'`;break}}if(n)throw new Ta(ka.INVALID_ARGUMENT,n);return!0}const VV=-62135596800,LV=1e6;class mu{static now(){return mu.fromMillis(Date.now())}static fromDate(t){return mu.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),a=Math.floor((t-1e3*n)*LV);return new mu(n,a)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Ta(ka.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ta(ka.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<VV)throw new Ta(ka.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ta(ka.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/LV}_compareTo(t){return this.seconds===t.seconds?Pl(this.nanoseconds,t.nanoseconds):Pl(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:mu._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Hg(t,mu._jsonSchema))return new mu(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-VV;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}mu._jsonSchemaVersion="firestore/timestamp/1.0",mu._jsonSchema={type:ns("string",mu._jsonSchemaVersion),seconds:ns("number"),nanoseconds:ns("number")};function Knt(e){return e.name==="IndexedDbTransactionError"}class Wnt extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Sf{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Wnt("Invalid base64 string: "+s):s}})(t);return new Sf(n)}static fromUint8Array(t){const n=(function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s})(t);return new Sf(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const a=new Uint8Array(n.length);for(let r=0;r<n.length;r++)a[r]=n.charCodeAt(r);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Pl(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Sf.EMPTY_BYTE_STRING=new Sf("");const MV="(default)";class M2{constructor(t,n){this.projectId=t,this.database=n||MV}static empty(){return new M2("","")}get isDefaultDatabase(){return this.database===MV}isEqual(t){return t instanceof M2&&t.projectId===this.projectId&&t.database===this.database}}class jnt{constructor(t,n=null,a=[],r=[],s=null,o="F",i=null,c=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=a,this.filters=r,this.limit=s,this.limitType=o,this.startAt=i,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function qnt(e){return new jnt(e)}var OV,ma;(ma=OV||(OV={}))[ma.OK=0]="OK",ma[ma.CANCELLED=1]="CANCELLED",ma[ma.UNKNOWN=2]="UNKNOWN",ma[ma.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ma[ma.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ma[ma.NOT_FOUND=5]="NOT_FOUND",ma[ma.ALREADY_EXISTS=6]="ALREADY_EXISTS",ma[ma.PERMISSION_DENIED=7]="PERMISSION_DENIED",ma[ma.UNAUTHENTICATED=16]="UNAUTHENTICATED",ma[ma.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ma[ma.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ma[ma.ABORTED=10]="ABORTED",ma[ma.OUT_OF_RANGE=11]="OUT_OF_RANGE",ma[ma.UNIMPLEMENTED=12]="UNIMPLEMENTED",ma[ma.INTERNAL=13]="INTERNAL",ma[ma.UNAVAILABLE=14]="UNAVAILABLE",ma[ma.DATA_LOSS=15]="DATA_LOSS";new oI([4294967295,4294967295],0);const Ynt=41943040;const Xnt=1048576;function rS(){return typeof document<"u"?document:null}class Jnt{constructor(t,n,a=1e3,r=1.5,s=6e4){this.Fi=t,this.timerId=n,this.d_=a,this.E_=r,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(t){this.cancel();const n=Math.floor(this.R_+this.p_()),a=Math.max(0,Date.now()-this.m_),r=Math.max(0,n-a);r>0&&El("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${a} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,(()=>(this.m_=Date.now(),t()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}class iI{constructor(t,n,a,r,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=a,this.op=r,this.removalCallback=s,this.deferred=new s0,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,a,r,s){const o=Date.now()+a,i=new iI(t,n,o,r,s);return i.start(a),i}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ta(ka.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var HV,$V;($V=HV||(HV={})).Fa="default",$V.Cache="cache";function Znt(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}const QV=new Map;const eat="firestore.googleapis.com",GV=!0;class zV{constructor(t){var n,a;if(t.host===void 0){if(t.ssl!==void 0)throw new Ta(ka.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=eat,this.ssl=GV}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:GV;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Ynt;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Xnt)throw new Ta(ka.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Gnt("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Znt((a=t.experimentalLongPollingOptions)!==null&&a!==void 0?a:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ta(ka.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ta(ka.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ta(ka.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(a,r){return a.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class tat{constructor(t,n,a,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=a,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zV({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ta(ka.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Ta(ka.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zV(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new Dnt;switch(a.type){case"firstParty":return new Nnt(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Ta(ka.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const a=QV.get(n);a&&(El("ComponentProvider","Removing Datastore"),QV.delete(n),a.terminate())})(this),Promise.resolve()}}class lI{constructor(t,n,a){this.converter=n,this._query=a,this.type="query",this.firestore=t}withConverter(t){return new lI(this.firestore,t,this._query)}}class gu{constructor(t,n,a){this.converter=n,this._key=a,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new uI(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new gu(this.firestore,t,this._key)}toJSON(){return{type:gu._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,a){if(Hg(n,gu._jsonSchema))return new gu(t,a||null,new $A(vl.fromString(n.referencePath)))}}gu._jsonSchemaVersion="firestore/documentReference/1.0",gu._jsonSchema={type:ns("string",gu._jsonSchemaVersion),referencePath:ns("string")};class uI extends lI{constructor(t,n,a){super(t,n,qnt(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new gu(this.firestore,null,new $A(t))}withConverter(t){return new uI(this.firestore,t,this._path)}}const KV="AsyncQueue";class WV{constructor(t=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Jnt(this,"async_queue_retry"),this.oc=()=>{const a=rS();a&&El(KV,"Visibility state changed to "+a.visibilityState),this.F_.y_()},this._c=t;const n=rS();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ac(),this.uc(t)}enterRestrictedMode(t){if(!this.Xu){this.Xu=!0,this.rc=t||!1;const n=rS();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(t){if(this.ac(),this.Xu)return new Promise((()=>{}));const n=new s0;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Zu.push(t),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(t){if(!Knt(t))throw t;El(KV,"Operation failed with retryable error: "+t)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(t){const n=this._c.then((()=>(this.nc=!0,t().catch((a=>{throw this.tc=a,this.nc=!1,jz("INTERNAL UNHANDLED ERROR: ",jV(a)),a})).then((a=>(this.nc=!1,a))))));return this._c=n,n}enqueueAfterDelay(t,n,a){this.ac(),this.sc.indexOf(t)>-1&&(n=0);const r=iI.createAndSchedule(this,t,n,a,(s=>this.lc(s)));return this.ec.push(r),r}ac(){this.tc&&L2(47125,{hc:jV(this.tc)})}verifyOperationInProgress(){}async Pc(){let t;do t=this._c,await t;while(t!==this._c)}Tc(t){for(const n of this.ec)if(n.timerId===t)return!0;return!1}Ic(t){return this.Pc().then((()=>{this.ec.sort(((n,a)=>n.targetTimeMs-a.targetTimeMs));for(const n of this.ec)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Pc()}))}dc(t){this.sc.push(t)}lc(t){const n=this.ec.indexOf(t);this.ec.splice(n,1)}}function jV(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class nat extends tat{constructor(t,n,a,r){super(t,n,a,r),this.type="firestore",this._queue=new WV,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new WV(t),this._firestoreClient=void 0,await t}}}class ic{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ic(Sf.fromBase64String(t))}catch(n){throw new Ta(ka.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new ic(Sf.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:ic._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Hg(t,ic._jsonSchema))return ic.fromBase64String(t.bytes)}}ic._jsonSchemaVersion="firestore/bytes/1.0",ic._jsonSchema={type:ns("string",ic._jsonSchemaVersion),bytes:ns("string")};class Xz{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Ta(ka.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new DA(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class nf{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Ta(ka.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Ta(ka.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Pl(this._lat,t._lat)||Pl(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:nf._jsonSchemaVersion}}static fromJSON(t){if(Hg(t,nf._jsonSchema))return new nf(t.latitude,t.longitude)}}nf._jsonSchemaVersion="firestore/geoPoint/1.0",nf._jsonSchema={type:ns("string",nf._jsonSchemaVersion),latitude:ns("number"),longitude:ns("number")};class af{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(a,r){if(a.length!==r.length)return!1;for(let s=0;s<a.length;++s)if(a[s]!==r[s])return!1;return!0})(this._values,t._values)}toJSON(){return{type:af._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Hg(t,af._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new af(t.vectorValues);throw new Ta(ka.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}af._jsonSchemaVersion="firestore/vectorValue/1.0",af._jsonSchema={type:ns("string",af._jsonSchemaVersion),vectorValues:ns("object")};const aat=new RegExp("[~\\*/\\[\\]]");function rat(e,t,n){if(t.search(aat)>=0)throw qV(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e);try{return new Xz(...t.split("."))._internalPath}catch{throw qV(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e)}}function qV(e,t,n,a,r){let s=`Function ${t}() called with invalid data`;s+=". ";let o="";return new Ta(ka.INVALID_ARGUMENT,s+e+o)}class Jz{constructor(t,n,a,r,s){this._firestore=t,this._userDataWriter=n,this._key=a,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new gu(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new sat(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Zz("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class sat extends Jz{data(){return super.data()}}function Zz(e,t){return typeof t=="string"?rat(e,t):t instanceof Xz?t._internalPath:t._delegate._internalPath}class Uy{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class mh extends Jz{constructor(t,n,a,r,s,o){super(t,n,a,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new r_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const a=this._document.data.field(Zz("DocumentSnapshot.get",t));if(a!==null)return this._userDataWriter.convertValue(a,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ta(ka.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=mh._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}mh._jsonSchemaVersion="firestore/documentSnapshot/1.0",mh._jsonSchema={type:ns("string",mh._jsonSchemaVersion),bundleSource:ns("string","DocumentSnapshot"),bundleName:ns("string"),bundle:ns("string")};class r_ extends mh{data(t={}){return super.data(t)}}class o0{constructor(t,n,a,r){this._firestore=t,this._userDataWriter=n,this._snapshot=r,this.metadata=new Uy(r.hasPendingWrites,r.fromCache),this.query=a}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((a=>{t.call(n,new r_(this._firestore,this._userDataWriter,a.key,a,new Uy(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ta(ka.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map((i=>{const c=new r_(r._firestore,r._userDataWriter,i.doc.key,i.doc,new Uy(r._snapshot.mutatedKeys.has(i.doc.key),r._snapshot.fromCache),r.query.converter);return i.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((i=>s||i.type!==3)).map((i=>{const c=new r_(r._firestore,r._userDataWriter,i.doc.key,i.doc,new Uy(r._snapshot.mutatedKeys.has(i.doc.key),r._snapshot.fromCache),r.query.converter);let A=-1,d=-1;return i.type!==0&&(A=o.indexOf(i.doc.key),o=o.delete(i.doc.key)),i.type!==1&&(o=o.add(i.doc),d=o.indexOf(i.doc.key)),{type:oat(i.type),doc:c,oldIndex:A,newIndex:d}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ta(ka.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=o0._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Ont.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],a=[],r=[];return this.docs.forEach((s=>{s._document!==null&&(n.push(s._document),a.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function oat(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return L2(61501,{type:e})}}o0._jsonSchemaVersion="firestore/querySnapshot/1.0",o0._jsonSchema={type:ns("string",o0._jsonSchemaVersion),bundleSource:ns("string","QuerySnapshot"),bundleName:ns("string"),bundle:ns("string")};(function(t,n=!0){(function(r){gb=r})(jd),Eu(new Vl("firestore",((a,{instanceIdentifier:r,options:s})=>{const o=a.getProvider("app").getImmediate(),i=new nat(new Unt(a.getProvider("auth-internal")),new Vnt(o,a.getProvider("app-check-internal")),(function(A,d){if(!Object.prototype.hasOwnProperty.apply(A.options,["projectId"]))throw new Ta(ka.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new M2(A.options.projectId,d)})(o,r),o);return s=Object.assign({useFetchStreams:n},s),i._setSettings(s),i}),"PUBLIC").setMultipleInstances(!0)),xi(PV,DV,t),xi(PV,DV,"esm2017")})();const eK="firebasestorage.googleapis.com",iat="storageBucket",lat=120*1e3,uat=600*1e3;class Hu extends Uu{constructor(t,n,a=0){super(sS(t),`Firebase Storage: ${n} (${sS(t)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Hu.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return sS(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Fu;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Fu||(Fu={}));function sS(e){return"storage/"+e}function cat(){const e="An unknown error occurred, please check the error payload for server response.";return new Hu(Fu.UNKNOWN,e)}function dat(){return new Hu(Fu.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Aat(){return new Hu(Fu.CANCELED,"User canceled the upload/download.")}function fat(e){return new Hu(Fu.INVALID_URL,"Invalid URL '"+e+"'.")}function mat(e){return new Hu(Fu.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function YV(e){return new Hu(Fu.INVALID_ARGUMENT,e)}function tK(){return new Hu(Fu.APP_DELETED,"The Firebase app was deleted.")}function hat(e){return new Hu(Fu.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class Bl{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let a;try{a=Bl.makeFromUrl(t,n)}catch{return new Bl(t,"")}if(a.path==="")return a;throw mat(t)}static makeFromUrl(t,n){let a=null;const r="([A-Za-z0-9.\\-_]+)";function s(T){T.path.charAt(T.path.length-1)==="/"&&(T.path_=T.path_.slice(0,-1))}const o="(/(.*))?$",i=new RegExp("^gs://"+r+o,"i"),c={bucket:1,path:3};function A(T){T.path_=decodeURIComponent(T.path)}const d="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${d}/b/${r}/o${m}`,"i"),v={bucket:1,path:3},y=n===eK?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",w=new RegExp(`^https?://${y}/${r}/${g}`,"i"),x=[{regex:i,indices:c,postModify:s},{regex:h,indices:v,postModify:A},{regex:w,indices:{bucket:1,path:2},postModify:A}];for(let T=0;T<x.length;T++){const U=x[T],k=U.regex.exec(t);if(k){const S=k[U.indices.bucket];let E=k[U.indices.path];E||(E=""),a=new Bl(S,E),U.postModify(a);break}}if(a==null)throw fat(t);return a}}class vat{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function pat(e,t,n){let a=1,r=null,s=null,o=!1,i=0;function c(){return i===2}let A=!1;function d(...g){A||(A=!0,t.apply(null,g))}function f(g){r=setTimeout(()=>{r=null,e(h,c())},g)}function m(){s&&clearTimeout(s)}function h(g,...w){if(A){m();return}if(g){m(),d.call(null,g,...w);return}if(c()||o){m(),d.call(null,g,...w);return}a<64&&(a*=2);let x;i===1?(i=2,x=0):x=(a+Math.random())*1e3,f(x)}let v=!1;function y(g){v||(v=!0,m(),!A&&(r!==null?(g||(i=2),clearTimeout(r),f(0)):g||(i=1)))}return f(0),s=setTimeout(()=>{o=!0,y(!0)},n),y}function gat(e){e(!1)}function yat(e){return e!==void 0}function XV(e,t,n,a){if(a<t)throw YV(`Invalid value for '${e}'. Expected ${t} or greater.`);if(a>n)throw YV(`Invalid value for '${e}'. Expected ${n} or less.`)}function _at(e){const t=encodeURIComponent;let n="?";for(const a in e)if(e.hasOwnProperty(a)){const r=t(a)+"="+t(e[a]);n=n+r+"&"}return n=n.slice(0,-1),n}var O2;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(O2||(O2={}));function wat(e,t){const n=e>=500&&e<600,r=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||r||s}class bat{constructor(t,n,a,r,s,o,i,c,A,d,f,m=!0,h=!1){this.url_=t,this.method_=n,this.headers_=a,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=i,this.errorCallback_=c,this.timeout_=A,this.progressCallback_=d,this.connectionFactory_=f,this.retry=m,this.isUsingEmulator=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,y)=>{this.resolve_=v,this.reject_=y,this.start_()})}start_(){const t=(a,r)=>{if(r){a(!1,new Ry(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=i=>{const c=i.loaded,A=i.lengthComputable?i.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,A)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const i=s.getErrorCode()===O2.NO_ERROR,c=s.getStatus();if(!i||wat(c,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===O2.ABORT;a(!1,new Ry(!1,null,d));return}const A=this.successCodes_.indexOf(c)!==-1;a(!0,new Ry(A,s))})},n=(a,r)=>{const s=this.resolve_,o=this.reject_,i=r.connection;if(r.wasSuccessCode)try{const c=this.callback_(i,i.getResponse());yat(c)?s(c):s()}catch(c){o(c)}else if(i!==null){const c=cat();c.serverResponse=i.getErrorText(),this.errorCallback_?o(this.errorCallback_(i,c)):o(c)}else if(r.canceled){const c=this.appDelete_?tK():Aat();o(c)}else{const c=dat();o(c)}};this.canceled_?n(!1,new Ry(!1,null,!0)):this.backoffId_=pat(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&gat(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ry{constructor(t,n,a){this.wasSuccessCode=t,this.connection=n,this.canceled=!!a}}function xat(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function Cat(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function Sat(e,t){t&&(e["X-Firebase-GMPID"]=t)}function Eat(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function Bat(e,t,n,a,r,s,o=!0,i=!1){const c=_at(e.urlParams),A=e.url+c,d=Object.assign({},e.headers);return Sat(d,t),xat(d,n),Cat(d,s),Eat(d,a),new bat(A,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r,o,i)}function kat(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function Tat(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}class H2{constructor(t,n){this._service=t,n instanceof Bl?this._location=n:this._location=Bl.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new H2(t,n)}get root(){const t=new Bl(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Tat(this._location.path)}get storage(){return this._service}get parent(){const t=kat(this._location.path);if(t===null)return null;const n=new Bl(this._location.bucket,t);return new H2(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw hat(t)}}function JV(e,t){const n=t?.[iat];return n==null?null:Bl.makeFromBucketSpec(n,e)}class Iat{constructor(t,n,a,r,s,o=!1){this.app=t,this._authProvider=n,this._appCheckProvider=a,this._url=r,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=eK,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=lat,this._maxUploadRetryTime=uat,this._requests=new Set,r!=null?this._bucket=Bl.makeFromBucketSpec(r,this._host):this._bucket=JV(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Bl.makeFromBucketSpec(this._url,t):this._bucket=JV(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){XV("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){XV("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Qi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new H2(this,t)}_makeRequest(t,n,a,r,s=!0){if(this._deleted)return new vat(tK());{const o=Bat(t,this._appId,a,r,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[a,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,a,r).getPromise()}}const ZV="@firebase/storage",eL="0.13.14";const Fat="storage";function Pat(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),a=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return new Iat(n,a,r,t,jd)}function Dat(){Eu(new Vl(Fat,Pat,"PUBLIC").setMultipleInstances(!0)),xi(ZV,eL,""),xi(ZV,eL,"esm2017")}Dat();function Uat(e){return Nat({initialUser:e,dependencies:{popupRedirectResolver:nM,persistence:[Z5,$k,Qk]}})}const Rat=Symbol("VueFireAuth");function Nat({dependencies:e,initialUser:t}){return(n,a)=>{const[r,s]=Vat(n,a,t,e);GZe(r,s)}}function Vat(e,t,n,a,r=M5(e,a)){const s=HZe(e,t).run(()=>M(n));return $Ze.set(e,s),t.provide(Rat,r),[s,r]}function Lat(e,{firebaseApp:t,modules:n=[]}){e.provide(NG,t);for(const a of n)a(t,e)}const Mat=()=>{console.log(" Clearing desktop session on app startup - passcode will be required"),localStorage.removeItem("desktopSessionToken"),localStorage.removeItem("desktopPermissions"),localStorage.removeItem("desktopIsAdmin"),localStorage.removeItem("desktopUserName"),localStorage.removeItem("desktopUserId"),localStorage.removeItem("desktopFeatures")};Mat();window.addEventListener("unhandledrejection",e=>{e.reason&&typeof e.reason.code=="string"&&e.reason.code.startsWith("auth/")&&(console.warn("Unhandled Firebase Auth error (suppressed):",e.reason.code,e.reason.message),e.preventDefault())});console.log("Vue app starting in environment:",Ka()?"Electron":"Web");if(Ka())try{const{ipcRenderer:e}=window.electron||window.require("electron");e.on("server-ready",(t,n)=>{console.log("Server ready event received");const{localIP:a}=n||{};if(a&&Ka()){const r=Pr(a).api.https;kh(r),console.log("Local IP:",a)}}),e.on("server-error",(t,n)=>{console.error("Server error received:",n)})}catch(e){console.error("Failed to set up IPC listeners:",e)}const Oat={dark:!1,colors:{primary:"#133665",surfaceTint:"#415F91",onPrimary:"#FFFFFF",primaryContainer:"#506DA0",onPrimaryContainer:"#FFFFFF",secondary:"#2E3647",onSecondary:"#FFFFFF",secondaryContainer:"#646D80",onSecondaryContainer:"#FFFFFF",tertiary:"#452E4A",onTertiary:"#FFFFFF",tertiaryContainer:"#7F6484",onTertiaryContainer:"#FFFFFF",error:"#740006",onError:"#FFFFFF",errorContainer:"#CF2C27",onErrorContainer:"#FFFFFF",background:"#F9F9FF",onBackground:"#191C20",surface:"#F9F9FF",onSurface:"#0F1116",surfaceVariant:"#E0E2EC",onSurfaceVariant:"#33363E",outline:"#4F525A",outlineVariant:"#6A6D75",shadow:"#000000",scrim:"#000000",inverseSurface:"#2E3036",inverseOnSurface:"#F0F0F7",inversePrimary:"#AAC7FF",primaryFixed:"#506DA0",onPrimaryFixed:"#FFFFFF",primaryFixedDim:"#375586",onPrimaryFixedVariant:"#FFFFFF",secondaryFixed:"#646D80",onSecondaryFixed:"#FFFFFF",secondaryFixedDim:"#4C5567",onSecondaryFixedVariant:"#FFFFFF",tertiaryFixed:"#7F6484",onTertiaryFixed:"#FFFFFF",tertiaryFixedDim:"#654C6B",onTertiaryFixedVariant:"#FFFFFF",surfaceDim:"#C5C6CD",surfaceBright:"#F9F9FF",surfaceContainerLowest:"#FFFFFF",surfaceContainerLow:"#F3F3FA",surfaceContainer:"#E7E8EE",surfaceContainerHigh:"#DCDCE3",surfaceContainerHighest:"#D1D1D8"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#F5F5F5","theme-on-code":"#000000"}},Hat=d6({components:aZe,directives:hZe,theme:{defaultTheme:"myCustomLightTheme",themes:{myCustomLightTheme:Oat}},defaults:{VBtn:{color:"primary",rounded:"sm",size:"small"},VSnackbar:{timeout:3e3},VSheet:{rounded:"sm",colour:"surface"},VTextField:{density:"compact"},VTooltip:{location:"top",openDelay:1e3}}}),$g=Wee(yfe);$g.use(Ns);$g.use(Hat);$g.use(wi);Ka()&&$g.use(Lat,{firebaseApp:jy,modules:[Uat()]});let Wm=!1;const Pm=()=>{if(!Wm){console.log("Mounting app");try{$g.mount("#app"),Wm=!0,console.log("App mounted successfully")}catch(e){console.error("Error mounting app:",e)}}},$at=async()=>{try{console.log("Starting app initialization..."),console.log("Environment:",Ka()?"Electron":"Web"),console.log("Initializing API client...");try{await rM(),console.log("API client initialized with URL parameters")}catch(e){console.warn("API client initialization failed:",e)}console.log("Initializing network API...");try{const e=await xH();console.log("Network API initialized:",e)}catch(e){console.warn("Network API initialization failed:",e)}if(Ka()){console.log("Testing Firebase Auth..."),console.log("Auth object:",Os),console.log("Auth app:",Os?.app),console.log("Auth currentUser:",Os?.currentUser),console.log("Setting up auth state listener...");try{const e=Os.onAuthStateChanged(n=>{console.log(" Auth state changed!"),console.log("Initial auth state:",n?"User logged in":"No user"),console.log("User object:",n),wi.commit("auth/SET_USER",n),Pm(),setTimeout(()=>{Wm&&Ns.currentRoute.value.path==="/"&&(n?!!localStorage.getItem("desktopSessionToken")?(console.log("Authenticated user with valid desktop session, navigating to home"),Ns.push("/home")):(console.log("Google auth detected, but passcode required - navigating to passcode page"),Ns.push("/desktop/passcode")):(console.log("No authenticated user, navigating to login"),Ns.push("/login")))},100)},n=>{console.error("Auth state change error:",n),n.code==="auth/network-request-failed"&&console.warn("Network request failed - this is common in Electron. Continuing with offline mode."),Pm(),setTimeout(()=>{Wm&&Ns.currentRoute.value.path==="/"&&Ns.push("/login")},100)});console.log("Auth state listener set up successfully, unsubscribe function:",typeof e);const t=setTimeout(()=>{Wm||(console.log("Auth state listener timeout - mounting app with current user"),wi.commit("auth/SET_USER",Os.currentUser),Pm(),bn(()=>{try{Ns.currentRoute.value.path==="/"&&(Os.currentUser?!!localStorage.getItem("desktopSessionToken")?(console.log("Timeout: Authenticated user with desktop session, navigating to home"),Ns.push("/home")):(console.log("Timeout: Google auth detected, passcode required - navigating to passcode page"),Ns.push("/desktop/passcode")):(console.log("Timeout: No authenticated user, navigating to login"),Ns.push("/login")))}catch(n){console.error("Navigation error during timeout:",n)}}))},3e3);window.backupTimeout=t}catch(e){console.error("Failed to set up auth state listener:",e),wi.commit("auth/SET_USER",null),Pm()}}else console.log("Web mode: Checking web session..."),iM(),console.log("Web mode: Session interceptors set up"),Pm(),setTimeout(async()=>{if(Wm){const e=Ns.currentRoute.value.path,t=Xh();if(console.log("Web mode initialization - current route:",e),console.log("Session token exists:",!!t.sessionToken.value),t.sessionToken.value)try{if(console.log("Verifying existing session token..."),(await t.verifySession()).valid)console.log("Web session valid"),e==="/"&&Ns.push("/home");else if(console.log("Web session invalid, clearing session"),t.clearSession(),e!=="/web/login"){const r=new URLSearchParams(window.location.search).get("endpoint"),s=r?`/web/login?endpoint=${encodeURIComponent(r)}`:"/web/login";Ns.push(s)}}catch(n){if(console.warn("Session verification failed:",n),t.clearSession(),e!=="/web/login"&&e!=="/"){const r=new URLSearchParams(window.location.search).get("endpoint"),s=r?`/web/login?endpoint=${encodeURIComponent(r)}`:"/web/login";Ns.push(s)}}else if(e==="/"){console.log("No web session, navigating to web login");const a=new URLSearchParams(window.location.search).get("endpoint"),r=a?`/web/login?endpoint=${encodeURIComponent(a)}`:"/web/login";Ns.push(r)}}},100)}catch(e){console.error("Error initializing app:",e),wi.commit("auth/SET_USER",null),Pm()}};console.log("Starting Vue app initialization...");$at();export{dt as a,K1 as c,go as f,cM as g,ev as p};
