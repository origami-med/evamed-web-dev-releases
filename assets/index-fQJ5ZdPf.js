(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function $B(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const lr={},lv=[],Tu=()=>{},iL=()=>!1,K2=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),QB=e=>e.startsWith("onUpdate:"),Cs=Object.assign,GB=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},kJ=Object.prototype.hasOwnProperty,qa=(e,t)=>kJ.call(e,t),Sn=Array.isArray,uv=e=>nh(e)==="[object Map]",th=e=>nh(e)==="[object Set]",rP=e=>nh(e)==="[object Date]",TJ=e=>nh(e)==="[object RegExp]",On=e=>typeof e=="function",yr=e=>typeof e=="string",Gl=e=>typeof e=="symbol",or=e=>e!==null&&typeof e=="object",lL=e=>(or(e)||On(e))&&On(e.then)&&On(e.catch),uL=Object.prototype.toString,nh=e=>uL.call(e),IJ=e=>nh(e).slice(8,-1),cL=e=>nh(e)==="[object Object]",zB=e=>yr(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Mp=$B(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),W2=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},FJ=/-\w/g,Ho=W2(e=>e.replace(FJ,t=>t.slice(1).toUpperCase())),PJ=/\B([A-Z])/g,oA=W2(e=>e.replace(PJ,"-$1").toLowerCase()),$u=W2(e=>e.charAt(0).toUpperCase()+e.slice(1)),vx=W2(e=>e?`on${$u(e)}`:""),Dd=(e,t)=>!Object.is(e,t),cv=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},dL=(e,t,n,a=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:a,value:n})},d_=e=>{const t=parseFloat(e);return isNaN(t)?e:t},AL=e=>{const t=yr(e)?Number(e):NaN;return isNaN(t)?e:t};let sP;const j2=()=>sP||(sP=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Rt(e){if(Sn(e)){const t={};for(let n=0;n<e.length;n++){const a=e[n],r=yr(a)?NJ(a):Rt(a);if(r)for(const s in r)t[s]=r[s]}return t}else if(yr(e)||or(e))return e}const DJ=/;(?![^(]*\))/g,UJ=/:([^]+)/,RJ=/\/\*[^]*?\*\//g;function NJ(e){const t={};return e.replace(RJ,"").split(DJ).forEach(n=>{if(n){const a=n.split(UJ);a.length>1&&(t[a[0].trim()]=a[1].trim())}}),t}function ct(e){let t="";if(yr(e))t=e;else if(Sn(e))for(let n=0;n<e.length;n++){const a=ct(e[n]);a&&(t+=a+" ")}else if(or(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function eu(e){if(!e)return null;let{class:t,style:n}=e;return t&&!yr(t)&&(e.class=ct(t)),n&&(e.style=Rt(n)),e}const VJ="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",LJ=$B(VJ);function fL(e){return!!e||e===""}function MJ(e,t){if(e.length!==t.length)return!1;let n=!0;for(let a=0;n&&a<e.length;a++)n=vf(e[a],t[a]);return n}function vf(e,t){if(e===t)return!0;let n=rP(e),a=rP(t);if(n||a)return n&&a?e.getTime()===t.getTime():!1;if(n=Gl(e),a=Gl(t),n||a)return e===t;if(n=Sn(e),a=Sn(t),n||a)return n&&a?MJ(e,t):!1;if(n=or(e),a=or(t),n||a){if(!n||!a)return!1;const r=Object.keys(e).length,s=Object.keys(t).length;if(r!==s)return!1;for(const o in e){const i=e.hasOwnProperty(o),c=t.hasOwnProperty(o);if(i&&!c||!i&&c||!vf(e[o],t[o]))return!1}}return String(e)===String(t)}function KB(e,t){return e.findIndex(n=>vf(n,t))}const mL=e=>!!(e&&e.__v_isRef===!0),K=e=>yr(e)?e:e==null?"":Sn(e)||or(e)&&(e.toString===uL||!On(e.toString))?mL(e)?K(e.value):JSON.stringify(e,vL,2):String(e),vL=(e,t)=>mL(t)?vL(e,t.value):uv(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[a,r],s)=>(n[hx(a,s)+" =>"]=r,n),{})}:th(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>hx(n))}:Gl(t)?hx(t):or(t)&&!Sn(t)&&!cL(t)?String(t):t,hx=(e,t="")=>{var n;return Gl(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};let so;class hL{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=so,!t&&so&&(this.index=(so.scopes||(so.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=so;try{return so=this,t()}finally{so=n}}}on(){++this._on===1&&(this.prevScope=so,so=this)}off(){this._on>0&&--this._on===0&&(so=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,a;for(n=0,a=this.effects.length;n<a;n++)this.effects[n].stop();for(this.effects.length=0,n=0,a=this.cleanups.length;n<a;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,a=this.scopes.length;n<a;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function Hd(e){return new hL(e)}function pL(){return so}function cs(e,t=!1){so&&so.cleanups.push(e)}let dr;const px=new WeakSet;class gL{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,so&&so.active&&so.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,px.has(this)&&(px.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||_L(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,oP(this),wL(this);const t=dr,n=Ml;dr=this,Ml=!0;try{return this.fn()}finally{bL(this),dr=t,Ml=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)qB(t);this.deps=this.depsTail=void 0,oP(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?px.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){sS(this)&&this.run()}get dirty(){return sS(this)}}let yL=0,Op,Hp;function _L(e,t=!1){if(e.flags|=8,t){e.next=Hp,Hp=e;return}e.next=Op,Op=e}function WB(){yL++}function jB(){if(--yL>0)return;if(Hp){let t=Hp;for(Hp=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Op;){let t=Op;for(Op=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(a){e||(e=a)}t=n}}if(e)throw e}function wL(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function bL(e){let t,n=e.depsTail,a=n;for(;a;){const r=a.prevDep;a.version===-1?(a===n&&(n=r),qB(a),OJ(a)):t=a,a.dep.activeLink=a.prevActiveLink,a.prevActiveLink=void 0,a=r}e.deps=t,e.depsTail=n}function sS(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(xL(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function xL(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===g0)||(e.globalVersion=g0,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!sS(e))))return;e.flags|=2;const t=e.dep,n=dr,a=Ml;dr=e,Ml=!0;try{wL(e);const r=e.fn(e._value);(t.version===0||Dd(r,e._value))&&(e.flags|=128,e._value=r,t.version++)}catch(r){throw t.version++,r}finally{dr=n,Ml=a,bL(e),e.flags&=-3}}function qB(e,t=!1){const{dep:n,prevSub:a,nextSub:r}=e;if(a&&(a.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=a,e.nextSub=void 0),n.subs===e&&(n.subs=a,!a&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)qB(s,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function OJ(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Ml=!0;const CL=[];function Fc(){CL.push(Ml),Ml=!1}function Pc(){const e=CL.pop();Ml=e===void 0?!0:e}function oP(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=dr;dr=void 0;try{t()}finally{dr=n}}}let g0=0;class HJ{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class YB{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!dr||!Ml||dr===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==dr)n=this.activeLink=new HJ(dr,this),dr.deps?(n.prevDep=dr.depsTail,dr.depsTail.nextDep=n,dr.depsTail=n):dr.deps=dr.depsTail=n,SL(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const a=n.nextDep;a.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=a),n.prevDep=dr.depsTail,n.nextDep=void 0,dr.depsTail.nextDep=n,dr.depsTail=n,dr.deps===n&&(dr.deps=a)}return n}trigger(t){this.version++,g0++,this.notify(t)}notify(t){WB();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{jB()}}}function SL(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let a=t.deps;a;a=a.nextDep)SL(a)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const A_=new WeakMap,ef=Symbol(""),oS=Symbol(""),y0=Symbol("");function lo(e,t,n){if(Ml&&dr){let a=A_.get(e);a||A_.set(e,a=new Map);let r=a.get(n);r||(a.set(n,r=new YB),r.map=a,r.key=n),r.track()}}function pc(e,t,n,a,r,s){const o=A_.get(e);if(!o){g0++;return}const i=c=>{c&&c.trigger()};if(WB(),t==="clear")o.forEach(i);else{const c=Sn(e),A=c&&zB(n);if(c&&n==="length"){const d=Number(a);o.forEach((f,m)=>{(m==="length"||m===y0||!Gl(m)&&m>=d)&&i(f)})}else switch((n!==void 0||o.has(void 0))&&i(o.get(n)),A&&i(o.get(y0)),t){case"add":c?A&&i(o.get("length")):(i(o.get(ef)),uv(e)&&i(o.get(oS)));break;case"delete":c||(i(o.get(ef)),uv(e)&&i(o.get(oS)));break;case"set":uv(e)&&i(o.get(ef));break}}jB()}function $J(e,t){const n=A_.get(e);return n&&n.get(t)}function Bm(e){const t=Cn(e);return t===e?t:(lo(t,"iterate",y0),ol(e)?t:t.map(zs))}function q2(e){return lo(e=Cn(e),"iterate",y0),e}const QJ={__proto__:null,[Symbol.iterator](){return gx(this,Symbol.iterator,zs)},concat(...e){return Bm(this).concat(...e.map(t=>Sn(t)?Bm(t):t))},entries(){return gx(this,"entries",e=>(e[1]=zs(e[1]),e))},every(e,t){return cc(this,"every",e,t,void 0,arguments)},filter(e,t){return cc(this,"filter",e,t,n=>n.map(zs),arguments)},find(e,t){return cc(this,"find",e,t,zs,arguments)},findIndex(e,t){return cc(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return cc(this,"findLast",e,t,zs,arguments)},findLastIndex(e,t){return cc(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return cc(this,"forEach",e,t,void 0,arguments)},includes(...e){return yx(this,"includes",e)},indexOf(...e){return yx(this,"indexOf",e)},join(e){return Bm(this).join(e)},lastIndexOf(...e){return yx(this,"lastIndexOf",e)},map(e,t){return cc(this,"map",e,t,void 0,arguments)},pop(){return tp(this,"pop")},push(...e){return tp(this,"push",e)},reduce(e,...t){return iP(this,"reduce",e,t)},reduceRight(e,...t){return iP(this,"reduceRight",e,t)},shift(){return tp(this,"shift")},some(e,t){return cc(this,"some",e,t,void 0,arguments)},splice(...e){return tp(this,"splice",e)},toReversed(){return Bm(this).toReversed()},toSorted(e){return Bm(this).toSorted(e)},toSpliced(...e){return Bm(this).toSpliced(...e)},unshift(...e){return tp(this,"unshift",e)},values(){return gx(this,"values",zs)}};function gx(e,t,n){const a=q2(e),r=a[t]();return a!==e&&!ol(e)&&(r._next=r.next,r.next=()=>{const s=r._next();return s.value&&(s.value=n(s.value)),s}),r}const GJ=Array.prototype;function cc(e,t,n,a,r,s){const o=q2(e),i=o!==e&&!ol(e),c=o[t];if(c!==GJ[t]){const f=c.apply(e,s);return i?zs(f):f}let A=n;o!==e&&(i?A=function(f,m){return n.call(this,zs(f),m,e)}:n.length>2&&(A=function(f,m){return n.call(this,f,m,e)}));const d=c.call(o,A,a);return i&&r?r(d):d}function iP(e,t,n,a){const r=q2(e);let s=n;return r!==e&&(ol(e)?n.length>3&&(s=function(o,i,c){return n.call(this,o,i,c,e)}):s=function(o,i,c){return n.call(this,o,zs(i),c,e)}),r[t](s,...a)}function yx(e,t,n){const a=Cn(e);lo(a,"iterate",y0);const r=a[t](...n);return(r===-1||r===!1)&&ZB(n[0])?(n[0]=Cn(n[0]),a[t](...n)):r}function tp(e,t,n=[]){Fc(),WB();const a=Cn(e)[t].apply(e,n);return jB(),Pc(),a}const zJ=$B("__proto__,__v_isRef,__isVue"),EL=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Gl));function KJ(e){Gl(e)||(e=String(e));const t=Cn(this);return lo(t,"has",e),t.hasOwnProperty(e)}class BL{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,a){if(n==="__v_skip")return t.__v_skip;const r=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return s;if(n==="__v_raw")return a===(r?s?nZ:FL:s?IL:TL).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(a)?t:void 0;const o=Sn(t);if(!r){let c;if(o&&(c=QJ[n]))return c;if(n==="hasOwnProperty")return KJ}const i=Reflect.get(t,n,Xr(t)?t:a);return(Gl(n)?EL.has(n):zJ(n))||(r||lo(t,"get",n),s)?i:Xr(i)?o&&zB(n)?i:i.value:or(i)?r?ah(i):is(i):i}}class kL extends BL{constructor(t=!1){super(!1,t)}set(t,n,a,r){let s=t[n];if(!this._isShallow){const c=$d(s);if(!ol(a)&&!$d(a)&&(s=Cn(s),a=Cn(a)),!Sn(t)&&Xr(s)&&!Xr(a))return c||(s.value=a),!0}const o=Sn(t)&&zB(n)?Number(n)<t.length:qa(t,n),i=Reflect.set(t,n,a,Xr(t)?t:r);return t===Cn(r)&&(o?Dd(a,s)&&pc(t,"set",n,a):pc(t,"add",n,a)),i}deleteProperty(t,n){const a=qa(t,n);t[n];const r=Reflect.deleteProperty(t,n);return r&&a&&pc(t,"delete",n,void 0),r}has(t,n){const a=Reflect.has(t,n);return(!Gl(n)||!EL.has(n))&&lo(t,"has",n),a}ownKeys(t){return lo(t,"iterate",Sn(t)?"length":ef),Reflect.ownKeys(t)}}class WJ extends BL{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const jJ=new kL,qJ=new WJ,YJ=new kL(!0);const iS=e=>e,L1=e=>Reflect.getPrototypeOf(e);function XJ(e,t,n){return function(...a){const r=this.__v_raw,s=Cn(r),o=uv(s),i=e==="entries"||e===Symbol.iterator&&o,c=e==="keys"&&o,A=r[e](...a),d=n?iS:t?m_:zs;return!t&&lo(s,"iterate",c?oS:ef),{next(){const{value:f,done:m}=A.next();return m?{value:f,done:m}:{value:i?[d(f[0]),d(f[1])]:d(f),done:m}},[Symbol.iterator](){return this}}}}function M1(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function JJ(e,t){const n={get(r){const s=this.__v_raw,o=Cn(s),i=Cn(r);e||(Dd(r,i)&&lo(o,"get",r),lo(o,"get",i));const{has:c}=L1(o),A=t?iS:e?m_:zs;if(c.call(o,r))return A(s.get(r));if(c.call(o,i))return A(s.get(i));s!==o&&s.get(r)},get size(){const r=this.__v_raw;return!e&&lo(Cn(r),"iterate",ef),r.size},has(r){const s=this.__v_raw,o=Cn(s),i=Cn(r);return e||(Dd(r,i)&&lo(o,"has",r),lo(o,"has",i)),r===i?s.has(r):s.has(r)||s.has(i)},forEach(r,s){const o=this,i=o.__v_raw,c=Cn(i),A=t?iS:e?m_:zs;return!e&&lo(c,"iterate",ef),i.forEach((d,f)=>r.call(s,A(d),A(f),o))}};return Cs(n,e?{add:M1("add"),set:M1("set"),delete:M1("delete"),clear:M1("clear")}:{add(r){!t&&!ol(r)&&!$d(r)&&(r=Cn(r));const s=Cn(this);return L1(s).has.call(s,r)||(s.add(r),pc(s,"add",r,r)),this},set(r,s){!t&&!ol(s)&&!$d(s)&&(s=Cn(s));const o=Cn(this),{has:i,get:c}=L1(o);let A=i.call(o,r);A||(r=Cn(r),A=i.call(o,r));const d=c.call(o,r);return o.set(r,s),A?Dd(s,d)&&pc(o,"set",r,s):pc(o,"add",r,s),this},delete(r){const s=Cn(this),{has:o,get:i}=L1(s);let c=o.call(s,r);c||(r=Cn(r),c=o.call(s,r)),i&&i.call(s,r);const A=s.delete(r);return c&&pc(s,"delete",r,void 0),A},clear(){const r=Cn(this),s=r.size!==0,o=r.clear();return s&&pc(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=XJ(r,e,t)}),n}function XB(e,t){const n=JJ(e,t);return(a,r,s)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?a:Reflect.get(qa(n,r)&&r in a?n:a,r,s)}const ZJ={get:XB(!1,!1)},eZ={get:XB(!1,!0)},tZ={get:XB(!0,!1)};const TL=new WeakMap,IL=new WeakMap,FL=new WeakMap,nZ=new WeakMap;function aZ(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function rZ(e){return e.__v_skip||!Object.isExtensible(e)?0:aZ(IJ(e))}function is(e){return $d(e)?e:JB(e,!1,jJ,ZJ,TL)}function PL(e){return JB(e,!1,YJ,eZ,IL)}function ah(e){return JB(e,!0,qJ,tZ,FL)}function JB(e,t,n,a,r){if(!or(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=rZ(e);if(s===0)return e;const o=r.get(e);if(o)return o;const i=new Proxy(e,s===2?a:n);return r.set(e,i),i}function dv(e){return $d(e)?dv(e.__v_raw):!!(e&&e.__v_isReactive)}function $d(e){return!!(e&&e.__v_isReadonly)}function ol(e){return!!(e&&e.__v_isShallow)}function ZB(e){return e?!!e.__v_raw:!1}function Cn(e){const t=e&&e.__v_raw;return t?Cn(t):e}function f_(e){return!qa(e,"__v_skip")&&Object.isExtensible(e)&&dL(e,"__v_skip",!0),e}const zs=e=>or(e)?is(e):e,m_=e=>or(e)?ah(e):e;function Xr(e){return e?e.__v_isRef===!0:!1}function V(e){return DL(e,!1)}function Ht(e){return DL(e,!0)}function DL(e,t){return Xr(e)?e:new sZ(e,t)}class sZ{constructor(t,n){this.dep=new YB,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Cn(t),this._value=n?t:zs(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,a=this.__v_isShallow||ol(t)||$d(t);t=a?t:Cn(t),Dd(t,n)&&(this._rawValue=t,this._value=a?t:zs(t),this.dep.trigger())}}function $e(e){return Xr(e)?e.value:e}function Du(e){return On(e)?e():$e(e)}const oZ={get:(e,t,n)=>t==="__v_raw"?e:$e(Reflect.get(e,t,n)),set:(e,t,n,a)=>{const r=e[t];return Xr(r)&&!Xr(n)?(r.value=n,!0):Reflect.set(e,t,n,a)}};function UL(e){return dv(e)?e:new Proxy(e,oZ)}function Mf(e){const t=Sn(e)?new Array(e.length):{};for(const n in e)t[n]=RL(e,n);return t}class iZ{constructor(t,n,a){this._object=t,this._key=n,this._defaultValue=a,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return $J(Cn(this._object),this._key)}}class lZ{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Xe(e,t,n){return Xr(e)?e:On(e)?new lZ(e):or(e)&&arguments.length>1?RL(e,t,n):V(e)}function RL(e,t,n){const a=e[t];return Xr(a)?a:new iZ(e,t,n)}class uZ{constructor(t,n,a){this.fn=t,this.setter=n,this._value=void 0,this.dep=new YB(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=g0-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=a}notify(){if(this.flags|=16,!(this.flags&8)&&dr!==this)return _L(this,!0),!0}get value(){const t=this.dep.track();return xL(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function cZ(e,t,n=!1){let a,r;return On(e)?a=e:(a=e.get,r=e.set),new uZ(a,r,n)}const O1={},v_=new WeakMap;let VA;function dZ(e,t=!1,n=VA){if(n){let a=v_.get(n);a||v_.set(n,a=[]),a.push(e)}}function AZ(e,t,n=lr){const{immediate:a,deep:r,once:s,scheduler:o,augmentJob:i,call:c}=n,A=T=>r?T:ol(T)||r===!1||r===0?gc(T,1):gc(T);let d,f,m,h,p=!1,y=!1;if(Xr(e)?(f=()=>e.value,p=ol(e)):dv(e)?(f=()=>A(e),p=!0):Sn(e)?(y=!0,p=e.some(T=>dv(T)||ol(T)),f=()=>e.map(T=>{if(Xr(T))return T.value;if(dv(T))return A(T);if(On(T))return c?c(T,2):T()})):On(e)?t?f=c?()=>c(e,2):e:f=()=>{if(m){Fc();try{m()}finally{Pc()}}const T=VA;VA=d;try{return c?c(e,3,[h]):e(h)}finally{VA=T}}:f=Tu,t&&r){const T=f,F=r===!0?1/0:r;f=()=>gc(T(),F)}const g=pL(),w=()=>{d.stop(),g&&g.active&&GB(g.effects,d)};if(s&&t){const T=t;t=(...F)=>{T(...F),w()}}let b=y?new Array(e.length).fill(O1):O1;const x=T=>{if(!(!(d.flags&1)||!d.dirty&&!T))if(t){const F=d.run();if(r||p||(y?F.some((k,S)=>Dd(k,b[S])):Dd(F,b))){m&&m();const k=VA;VA=d;try{const S=[F,b===O1?void 0:y&&b[0]===O1?[]:b,h];b=F,c?c(t,3,S):t(...S)}finally{VA=k}}}else d.run()};return i&&i(x),d=new gL(f),d.scheduler=o?()=>o(x,!1):x,h=T=>dZ(T,!1,d),m=d.onStop=()=>{const T=v_.get(d);if(T){if(c)c(T,4);else for(const F of T)F();v_.delete(d)}},t?a?x(!0):b=d.run():o?o(x.bind(null,!0),!0):d.run(),w.pause=d.pause.bind(d),w.resume=d.resume.bind(d),w.stop=w,w}function gc(e,t=1/0,n){if(t<=0||!or(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,Xr(e))gc(e.value,t,n);else if(Sn(e))for(let a=0;a<e.length;a++)gc(e[a],t,n);else if(th(e)||uv(e))e.forEach(a=>{gc(a,t,n)});else if(cL(e)){for(const a in e)gc(e[a],t,n);for(const a of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,a)&&gc(e[a],t,n)}return e}function lg(e,t,n,a){try{return a?e(...a):e()}catch(r){ug(r,t,n)}}function zl(e,t,n,a){if(On(e)){const r=lg(e,t,n,a);return r&&lL(r)&&r.catch(s=>{ug(s,t,n)}),r}if(Sn(e)){const r=[];for(let s=0;s<e.length;s++)r.push(zl(e[s],t,n,a));return r}}function ug(e,t,n,a=!0){const r=t?t.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||lr;if(t){let i=t.parent;const c=t.proxy,A=`https://vuejs.org/error-reference/#runtime-${n}`;for(;i;){const d=i.ec;if(d){for(let f=0;f<d.length;f++)if(d[f](e,c,A)===!1)return}i=i.parent}if(s){Fc(),lg(s,null,10,[e,c,A]),Pc();return}}fZ(e,n,r,a,o)}function fZ(e,t,n,a=!0,r=!1){if(r)throw e;console.error(e)}const No=[];let wu=-1;const Av=[];let hd=null,Wm=0;const NL=Promise.resolve();let h_=null;function xn(e){const t=h_||NL;return e?t.then(this?e.bind(this):e):t}function mZ(e){let t=wu+1,n=No.length;for(;t<n;){const a=t+n>>>1,r=No[a],s=_0(r);s<e||s===e&&r.flags&2?t=a+1:n=a}return t}function ek(e){if(!(e.flags&1)){const t=_0(e),n=No[No.length-1];!n||!(e.flags&2)&&t>=_0(n)?No.push(e):No.splice(mZ(t),0,e),e.flags|=1,VL()}}function VL(){h_||(h_=NL.then(ML))}function lS(e){Sn(e)?Av.push(...e):hd&&e.id===-1?hd.splice(Wm+1,0,e):e.flags&1||(Av.push(e),e.flags|=1),VL()}function lP(e,t,n=wu+1){for(;n<No.length;n++){const a=No[n];if(a&&a.flags&2){if(e&&a.id!==e.uid)continue;No.splice(n,1),n--,a.flags&4&&(a.flags&=-2),a(),a.flags&4||(a.flags&=-2)}}}function LL(e){if(Av.length){const t=[...new Set(Av)].sort((n,a)=>_0(n)-_0(a));if(Av.length=0,hd){hd.push(...t);return}for(hd=t,Wm=0;Wm<hd.length;Wm++){const n=hd[Wm];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}hd=null,Wm=0}}const _0=e=>e.id==null?e.flags&2?-1:1/0:e.id;function ML(e){try{for(wu=0;wu<No.length;wu++){const t=No[wu];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),lg(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;wu<No.length;wu++){const t=No[wu];t&&(t.flags&=-2)}wu=-1,No.length=0,LL(),h_=null,(No.length||Av.length)&&ML()}}let js=null,OL=null;function p_(e){const t=js;return js=e,OL=e&&e.type.__scopeId||null,t}function u(e,t=js,n){if(!t||e._n)return e;const a=(...r)=>{a._d&&b_(-1);const s=p_(t);let o;try{o=e(...r)}finally{p_(s),a._d&&b_(1)}return o};return a._n=!0,a._c=!0,a._d=!0,a}function ma(e,t){if(js===null)return e;const n=nw(js),a=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[s,o,i,c=lr]=t[r];s&&(On(s)&&(s={mounted:s,updated:s}),s.deep&&gc(o),a.push({dir:s,instance:n,value:o,oldValue:void 0,arg:i,modifiers:c}))}return e}function BA(e,t,n,a){const r=e.dirs,s=t&&t.dirs;for(let o=0;o<r.length;o++){const i=r[o];s&&(i.oldValue=s[o].value);let c=i.dir[a];c&&(Fc(),zl(c,n,8,[e.el,i,e,t]),Pc())}}const HL=Symbol("_vte"),$L=e=>e.__isTeleport,$p=e=>e&&(e.disabled||e.disabled===""),uP=e=>e&&(e.defer||e.defer===""),cP=e=>typeof SVGElement<"u"&&e instanceof SVGElement,dP=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,uS=(e,t)=>{const n=e&&e.to;return yr(n)?t?t(n):null:n},QL={name:"Teleport",__isTeleport:!0,process(e,t,n,a,r,s,o,i,c,A){const{mc:d,pc:f,pbc:m,o:{insert:h,querySelector:p,createText:y,createComment:g}}=A,w=$p(t.props);let{shapeFlag:b,children:x,dynamicChildren:T}=t;if(e==null){const F=t.el=y(""),k=t.anchor=y("");h(F,n,a),h(k,n,a);const S=(C,D)=>{b&16&&(r&&r.isCE&&(r.ce._teleportTarget=C),d(x,C,D,r,s,o,i,c))},E=()=>{const C=t.target=uS(t.props,p),D=GL(C,t,y,h);C&&(o!=="svg"&&cP(C)?o="svg":o!=="mathml"&&dP(C)&&(o="mathml"),w||(S(C,D),$y(t,!1)))};w&&(S(n,k),$y(t,!0)),uP(t.props)?(t.el.__isMounted=!1,ps(()=>{E(),delete t.el.__isMounted},s)):E()}else{if(uP(t.props)&&e.el.__isMounted===!1){ps(()=>{QL.process(e,t,n,a,r,s,o,i,c,A)},s);return}t.el=e.el,t.targetStart=e.targetStart;const F=t.anchor=e.anchor,k=t.target=e.target,S=t.targetAnchor=e.targetAnchor,E=$p(e.props),C=E?n:k,D=E?F:S;if(o==="svg"||cP(k)?o="svg":(o==="mathml"||dP(k))&&(o="mathml"),T?(m(e.dynamicChildren,T,C,r,s,o,i),sk(e,t,!0)):c||f(e,t,C,D,r,s,o,i,!1),w)E?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):H1(t,n,F,A,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const P=t.target=uS(t.props,p);P&&H1(t,P,null,A,0)}else E&&H1(t,k,S,A,1);$y(t,w)}},remove(e,t,n,{um:a,o:{remove:r}},s){const{shapeFlag:o,children:i,anchor:c,targetStart:A,targetAnchor:d,target:f,props:m}=e;if(f&&(r(A),r(d)),s&&r(c),o&16){const h=s||!$p(m);for(let p=0;p<i.length;p++){const y=i[p];a(y,t,n,h,!!y.dynamicChildren)}}},move:H1,hydrate:vZ};function H1(e,t,n,{o:{insert:a},m:r},s=2){s===0&&a(e.targetAnchor,t,n);const{el:o,anchor:i,shapeFlag:c,children:A,props:d}=e,f=s===2;if(f&&a(o,t,n),(!f||$p(d))&&c&16)for(let m=0;m<A.length;m++)r(A[m],t,n,2);f&&a(i,t,n)}function vZ(e,t,n,a,r,s,{o:{nextSibling:o,parentNode:i,querySelector:c,insert:A,createText:d}},f){function m(y,g,w,b){g.anchor=f(o(y),g,i(y),n,a,r,s),g.targetStart=w,g.targetAnchor=b}const h=t.target=uS(t.props,c),p=$p(t.props);if(h){const y=h._lpa||h.firstChild;if(t.shapeFlag&16)if(p)m(e,t,y,y&&o(y));else{t.anchor=o(e);let g=y;for(;g;){if(g&&g.nodeType===8){if(g.data==="teleport start anchor")t.targetStart=g;else if(g.data==="teleport anchor"){t.targetAnchor=g,h._lpa=t.targetAnchor&&o(t.targetAnchor);break}}g=o(g)}t.targetAnchor||GL(h,t,d,A),f(y&&o(y),t,h,n,a,r,s)}$y(t,p)}else p&&t.shapeFlag&16&&m(e,t,e,o(e));return t.anchor&&o(t.anchor)}const hZ=QL;function $y(e,t){const n=e.ctx;if(n&&n.ut){let a,r;for(t?(a=e.el,r=e.anchor):(a=e.targetStart,r=e.targetAnchor);a&&a!==r;)a.nodeType===1&&a.setAttribute("data-v-owner",n.uid),a=a.nextSibling;n.ut()}}function GL(e,t,n,a){const r=t.targetStart=n(""),s=t.targetAnchor=n("");return r[HL]=s,e&&(a(r,e),a(s,e)),s}const hc=Symbol("_leaveCb"),$1=Symbol("_enterCb");function zL(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return un(()=>{e.isMounted=!0}),da(()=>{e.isUnmounting=!0}),e}const ji=[Function,Array],KL={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ji,onEnter:ji,onAfterEnter:ji,onEnterCancelled:ji,onBeforeLeave:ji,onLeave:ji,onAfterLeave:ji,onLeaveCancelled:ji,onBeforeAppear:ji,onAppear:ji,onAfterAppear:ji,onAppearCancelled:ji},WL=e=>{const t=e.subTree;return t.component?WL(t.component):t},pZ={name:"BaseTransition",props:KL,setup(e,{slots:t}){const n=Of(),a=zL();return()=>{const r=t.default&&tk(t.default(),!0);if(!r||!r.length)return;const s=jL(r),o=Cn(e),{mode:i}=o;if(a.isLeaving)return _x(s);const c=AP(s);if(!c)return _x(s);let A=w0(c,o,a,n,f=>A=f);c.type!==ls&&Qd(c,A);let d=n.subTree&&AP(n.subTree);if(d&&d.type!==ls&&!kl(d,c)&&WL(n).type!==ls){let f=w0(d,o,a,n);if(Qd(d,f),i==="out-in"&&c.type!==ls)return a.isLeaving=!0,f.afterLeave=()=>{a.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,d=void 0},_x(s);i==="in-out"&&c.type!==ls?f.delayLeave=(m,h,p)=>{const y=qL(a,d);y[String(d.key)]=d,m[hc]=()=>{h(),m[hc]=void 0,delete A.delayedLeave,d=void 0},A.delayedLeave=()=>{p(),delete A.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return s}}};function jL(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==ls){t=n;break}}return t}const gZ=pZ;function qL(e,t){const{leavingVNodes:n}=e;let a=n.get(t.type);return a||(a=Object.create(null),n.set(t.type,a)),a}function w0(e,t,n,a,r){const{appear:s,mode:o,persisted:i=!1,onBeforeEnter:c,onEnter:A,onAfterEnter:d,onEnterCancelled:f,onBeforeLeave:m,onLeave:h,onAfterLeave:p,onLeaveCancelled:y,onBeforeAppear:g,onAppear:w,onAfterAppear:b,onAppearCancelled:x}=t,T=String(e.key),F=qL(n,e),k=(C,D)=>{C&&zl(C,a,9,D)},S=(C,D)=>{const P=D[1];k(C,D),Sn(C)?C.every(O=>O.length<=1)&&P():C.length<=1&&P()},E={mode:o,persisted:i,beforeEnter(C){let D=c;if(!n.isMounted)if(s)D=g||c;else return;C[hc]&&C[hc](!0);const P=F[T];P&&kl(e,P)&&P.el[hc]&&P.el[hc](),k(D,[C])},enter(C){let D=A,P=d,O=f;if(!n.isMounted)if(s)D=w||A,P=b||d,O=x||f;else return;let H=!1;const ie=C[$1]=Ae=>{H||(H=!0,Ae?k(O,[C]):k(P,[C]),E.delayedLeave&&E.delayedLeave(),C[$1]=void 0)};D?S(D,[C,ie]):ie()},leave(C,D){const P=String(e.key);if(C[$1]&&C[$1](!0),n.isUnmounting)return D();k(m,[C]);let O=!1;const H=C[hc]=ie=>{O||(O=!0,D(),ie?k(y,[C]):k(p,[C]),C[hc]=void 0,F[P]===e&&delete F[P])};F[P]=e,h?S(h,[C,H]):H()},clone(C){const D=w0(C,t,n,a,r);return r&&r(D),D}};return E}function _x(e){if(Y2(e))return e=Uu(e),e.children=null,e}function AP(e){if(!Y2(e))return $L(e.type)&&e.children?jL(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&On(n.default))return n.default()}}function Qd(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Qd(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function tk(e,t=!1,n){let a=[],r=0;for(let s=0;s<e.length;s++){let o=e[s];const i=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===We?(o.patchFlag&128&&r++,a=a.concat(tk(o.children,t,i))):(t||o.type!==ls)&&a.push(i!=null?Uu(o,{key:i}):o)}if(r>1)for(let s=0;s<a.length;s++)a[s].patchFlag=-2;return a}function nk(e,t){return On(e)?Cs({name:e.name},t,{setup:e}):e}function Go(){const e=Of();return e?(e.appContext.config.idPrefix||"v")+"-"+e.ids[0]+e.ids[1]++:""}function YL(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const g_=new WeakMap;function Qp(e,t,n,a,r=!1){if(Sn(e)){e.forEach((p,y)=>Qp(p,t&&(Sn(t)?t[y]:t),n,a,r));return}if(tf(a)&&!r){a.shapeFlag&512&&a.type.__asyncResolved&&a.component.subTree.component&&Qp(e,t,n,a.component.subTree);return}const s=a.shapeFlag&4?nw(a.component):a.el,o=r?null:s,{i,r:c}=e,A=t&&t.r,d=i.refs===lr?i.refs={}:i.refs,f=i.setupState,m=Cn(f),h=f===lr?iL:p=>qa(m,p);if(A!=null&&A!==c){if(fP(t),yr(A))d[A]=null,h(A)&&(f[A]=null);else if(Xr(A)){A.value=null;const p=t;p.k&&(d[p.k]=null)}}if(On(c))lg(c,i,12,[o,d]);else{const p=yr(c),y=Xr(c);if(p||y){const g=()=>{if(e.f){const w=p?h(c)?f[c]:d[c]:c.value;if(r)Sn(w)&&GB(w,s);else if(Sn(w))w.includes(s)||w.push(s);else if(p)d[c]=[s],h(c)&&(f[c]=d[c]);else{const b=[s];c.value=b,e.k&&(d[e.k]=b)}}else p?(d[c]=o,h(c)&&(f[c]=o)):y&&(c.value=o,e.k&&(d[e.k]=o))};if(o){const w=()=>{g(),g_.delete(e)};w.id=-1,g_.set(e,w),ps(w,n)}else fP(e),g()}}}function fP(e){const t=g_.get(e);t&&(t.flags|=8,g_.delete(e))}j2().requestIdleCallback;j2().cancelIdleCallback;const tf=e=>!!e.type.__asyncLoader,Y2=e=>e.type.__isKeepAlive,yZ={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=Of(),a=n.ctx;if(!a.renderer)return()=>{const b=t.default&&t.default();return b&&b.length===1?b[0]:b};const r=new Map,s=new Set;let o=null;const i=n.suspense,{renderer:{p:c,m:A,um:d,o:{createElement:f}}}=a,m=f("div");a.activate=(b,x,T,F,k)=>{const S=b.component;A(b,x,T,0,i),c(S.vnode,b,x,T,S,i,F,b.slotScopeIds,k),ps(()=>{S.isDeactivated=!1,S.a&&cv(S.a);const E=b.props&&b.props.onVnodeMounted;E&&Xi(E,S.parent,b)},i)},a.deactivate=b=>{const x=b.component;__(x.m),__(x.a),A(b,m,null,1,i),ps(()=>{x.da&&cv(x.da);const T=b.props&&b.props.onVnodeUnmounted;T&&Xi(T,x.parent,b),x.isDeactivated=!0},i)};function h(b){wx(b),d(b,n,i,!0)}function p(b){r.forEach((x,T)=>{const F=gS(x.type);F&&!b(F)&&y(T)})}function y(b){const x=r.get(b);x&&(!o||!kl(x,o))?h(x):o&&wx(o),r.delete(b),s.delete(b)}Ke(()=>[e.include,e.exclude],([b,x])=>{b&&p(T=>bp(b,T)),x&&p(T=>!bp(x,T))},{flush:"post",deep:!0});let g=null;const w=()=>{g!=null&&(w_(n.subTree.type)?ps(()=>{r.set(g,Q1(n.subTree))},n.subTree.suspense):r.set(g,Q1(n.subTree)))};return un(w),Z2(w),da(()=>{r.forEach(b=>{const{subTree:x,suspense:T}=n,F=Q1(x);if(b.type===F.type&&b.key===F.key){wx(F);const k=F.component.da;k&&ps(k,T);return}h(b)})}),()=>{if(g=null,!t.default)return o=null;const b=t.default(),x=b[0];if(b.length>1)return o=null,b;if(!Gd(x)||!(x.shapeFlag&4)&&!(x.shapeFlag&128))return o=null,x;let T=Q1(x);if(T.type===ls)return o=null,T;const F=T.type,k=gS(tf(T)?T.type.__asyncResolved||{}:F),{include:S,exclude:E,max:C}=e;if(S&&(!k||!bp(S,k))||E&&k&&bp(E,k))return T.shapeFlag&=-257,o=T,x;const D=T.key==null?F:T.key,P=r.get(D);return T.el&&(T=Uu(T),x.shapeFlag&128&&(x.ssContent=T)),g=D,P?(T.el=P.el,T.component=P.component,T.transition&&Qd(T,T.transition),T.shapeFlag|=512,s.delete(D),s.add(D)):(s.add(D),C&&s.size>parseInt(C,10)&&y(s.values().next().value)),T.shapeFlag|=256,o=T,w_(x.type)?x:T}}},_Z=yZ;function bp(e,t){return Sn(e)?e.some(n=>bp(n,t)):yr(e)?e.split(",").includes(t):TJ(e)?(e.lastIndex=0,e.test(t)):!1}function cg(e,t){XL(e,"a",t)}function X2(e,t){XL(e,"da",t)}function XL(e,t,n=Ao){const a=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(J2(t,a,n),n){let r=n.parent;for(;r&&r.parent;)Y2(r.parent.vnode)&&wZ(a,t,n,r),r=r.parent}}function wZ(e,t,n,a){const r=J2(t,e,a,!0);Ui(()=>{GB(a[t],r)},n)}function wx(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function Q1(e){return e.shapeFlag&128?e.ssContent:e}function J2(e,t,n=Ao,a=!1){if(n){const r=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...o)=>{Fc();const i=Ag(n),c=zl(t,n,e,o);return i(),Pc(),c});return a?r.unshift(s):r.push(s),s}}const $c=e=>(t,n=Ao)=>{(!x0||e==="sp")&&J2(e,(...a)=>t(...a),n)},tu=$c("bm"),un=$c("m"),JL=$c("bu"),Z2=$c("u"),da=$c("bum"),Ui=$c("um"),bZ=$c("sp"),xZ=$c("rtg"),CZ=$c("rtc");function SZ(e,t=Ao){J2("ec",e,t)}const ZL="components";function I(e,t){return t8(ZL,e,!0,t)||e}const e8=Symbol.for("v-ndc");function ew(e){return yr(e)?t8(ZL,e,!1)||e:e||e8}function t8(e,t,n=!0,a=!1){const r=js||Ao;if(r){const s=r.type;{const i=gS(s,!1);if(i&&(i===t||i===Ho(t)||i===$u(Ho(t))))return s}const o=mP(r[e]||s[e],t)||mP(r.appContext[e],t);return!o&&a?s:o}}function mP(e,t){return e&&(e[t]||e[Ho(t)]||e[$u(Ho(t))])}function qt(e,t,n,a){let r;const s=n,o=Sn(e);if(o||yr(e)){const i=o&&dv(e);let c=!1,A=!1;i&&(c=!ol(e),A=$d(e),e=q2(e)),r=new Array(e.length);for(let d=0,f=e.length;d<f;d++)r[d]=t(c?A?m_(zs(e[d])):zs(e[d]):e[d],d,void 0,s)}else if(typeof e=="number"){r=new Array(e);for(let i=0;i<e;i++)r[i]=t(i+1,i,void 0,s)}else if(or(e))if(e[Symbol.iterator])r=Array.from(e,(i,c)=>t(i,c,void 0,s));else{const i=Object.keys(e);r=new Array(i.length);for(let c=0,A=i.length;c<A;c++){const d=i[c];r[c]=t(e[d],d,c,s)}}else r=[];return r}function kv(e,t){for(let n=0;n<t.length;n++){const a=t[n];if(Sn(a))for(let r=0;r<a.length;r++)e[a[r].name]=a[r].fn;else a&&(e[a.name]=a.key?(...r)=>{const s=a.fn(...r);return s&&(s.key=a.key),s}:a.fn)}return e}function EZ(e,t,n={},a,r){if(js.ce||js.parent&&tf(js.parent)&&js.parent.ce)return U(),pe(We,null,[l("slot",n,a)],64);let s=e[t];s&&s._c&&(s._d=!1),U();const o=s&&n8(s(n)),i=n.key||o&&o.key,c=pe(We,{key:(i&&!Gl(i)?i:`_${t}`)+(!o&&a?"_fb":"")},o||[],o&&e._===1?64:-2);return s&&s._c&&(s._d=!0),c}function n8(e){return e.some(t=>Gd(t)?!(t.type===ls||t.type===We&&!n8(t.children)):!0)?e:null}const cS=e=>e?w8(e)?nw(e):cS(e.parent):null,Gp=Cs(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>cS(e.parent),$root:e=>cS(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>r8(e),$forceUpdate:e=>e.f||(e.f=()=>{ek(e.update)}),$nextTick:e=>e.n||(e.n=xn.bind(e.proxy)),$watch:e=>WZ.bind(e)}),bx=(e,t)=>e!==lr&&!e.__isScriptSetup&&qa(e,t),BZ={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:a,data:r,props:s,accessCache:o,type:i,appContext:c}=e;let A;if(t[0]!=="$"){const h=o[t];if(h!==void 0)switch(h){case 1:return a[t];case 2:return r[t];case 4:return n[t];case 3:return s[t]}else{if(bx(a,t))return o[t]=1,a[t];if(r!==lr&&qa(r,t))return o[t]=2,r[t];if((A=e.propsOptions[0])&&qa(A,t))return o[t]=3,s[t];if(n!==lr&&qa(n,t))return o[t]=4,n[t];dS&&(o[t]=0)}}const d=Gp[t];let f,m;if(d)return t==="$attrs"&&lo(e.attrs,"get",""),d(e);if((f=i.__cssModules)&&(f=f[t]))return f;if(n!==lr&&qa(n,t))return o[t]=4,n[t];if(m=c.config.globalProperties,qa(m,t))return m[t]},set({_:e},t,n){const{data:a,setupState:r,ctx:s}=e;return bx(r,t)?(r[t]=n,!0):a!==lr&&qa(a,t)?(a[t]=n,!0):qa(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:a,appContext:r,propsOptions:s,type:o}},i){let c,A;return!!(n[i]||e!==lr&&i[0]!=="$"&&qa(e,i)||bx(t,i)||(c=s[0])&&qa(c,i)||qa(a,i)||qa(Gp,i)||qa(r.config.globalProperties,i)||(A=o.__cssModules)&&A[i])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:qa(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function vP(e){return Sn(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let dS=!0;function kZ(e){const t=r8(e),n=e.proxy,a=e.ctx;dS=!1,t.beforeCreate&&hP(t.beforeCreate,e,"bc");const{data:r,computed:s,methods:o,watch:i,provide:c,inject:A,created:d,beforeMount:f,mounted:m,beforeUpdate:h,updated:p,activated:y,deactivated:g,beforeDestroy:w,beforeUnmount:b,destroyed:x,unmounted:T,render:F,renderTracked:k,renderTriggered:S,errorCaptured:E,serverPrefetch:C,expose:D,inheritAttrs:P,components:O,directives:H,filters:ie}=t;if(A&&TZ(A,a,null),o)for(const J in o){const ue=o[J];On(ue)&&(a[J]=ue.bind(n))}if(r){const J=r.call(n,n);or(J)&&(e.data=is(J))}if(dS=!0,s)for(const J in s){const ue=s[J],ne=On(ue)?ue.bind(n,n):On(ue.get)?ue.get.bind(n,n):Tu,Y=!On(ue)&&On(ue.set)?ue.set.bind(n):Tu,te=ae({get:ne,set:Y});Object.defineProperty(a,J,{enumerable:!0,configurable:!0,get:()=>te.value,set:L=>te.value=L})}if(i)for(const J in i)a8(i[J],a,n,J);if(c){const J=On(c)?c.call(n):c;Reflect.ownKeys(J).forEach(ue=>{Ha(ue,J[ue])})}d&&hP(d,e,"c");function j(J,ue){Sn(ue)?ue.forEach(ne=>J(ne.bind(n))):ue&&J(ue.bind(n))}if(j(tu,f),j(un,m),j(JL,h),j(Z2,p),j(cg,y),j(X2,g),j(SZ,E),j(CZ,k),j(xZ,S),j(da,b),j(Ui,T),j(bZ,C),Sn(D))if(D.length){const J=e.exposed||(e.exposed={});D.forEach(ue=>{Object.defineProperty(J,ue,{get:()=>n[ue],set:ne=>n[ue]=ne,enumerable:!0})})}else e.exposed||(e.exposed={});F&&e.render===Tu&&(e.render=F),P!=null&&(e.inheritAttrs=P),O&&(e.components=O),H&&(e.directives=H),C&&YL(e)}function TZ(e,t,n=Tu){Sn(e)&&(e=AS(e));for(const a in e){const r=e[a];let s;or(r)?"default"in r?s=Tn(r.from||a,r.default,!0):s=Tn(r.from||a):s=Tn(r),Xr(s)?Object.defineProperty(t,a,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):t[a]=s}}function hP(e,t,n){zl(Sn(e)?e.map(a=>a.bind(t.proxy)):e.bind(t.proxy),t,n)}function a8(e,t,n,a){let r=a.includes(".")?v8(n,a):()=>n[a];if(yr(e)){const s=t[e];On(s)&&Ke(r,s)}else if(On(e))Ke(r,e.bind(n));else if(or(e))if(Sn(e))e.forEach(s=>a8(s,t,n,a));else{const s=On(e.handler)?e.handler.bind(n):t[e.handler];On(s)&&Ke(r,s,e)}}function r8(e){const t=e.type,{mixins:n,extends:a}=t,{mixins:r,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,i=s.get(t);let c;return i?c=i:!r.length&&!n&&!a?c=t:(c={},r.length&&r.forEach(A=>y_(c,A,o,!0)),y_(c,t,o)),or(t)&&s.set(t,c),c}function y_(e,t,n,a=!1){const{mixins:r,extends:s}=t;s&&y_(e,s,n,!0),r&&r.forEach(o=>y_(e,o,n,!0));for(const o in t)if(!(a&&o==="expose")){const i=IZ[o]||n&&n[o];e[o]=i?i(e[o],t[o]):t[o]}return e}const IZ={data:pP,props:gP,emits:gP,methods:xp,computed:xp,beforeCreate:Po,created:Po,beforeMount:Po,mounted:Po,beforeUpdate:Po,updated:Po,beforeDestroy:Po,beforeUnmount:Po,destroyed:Po,unmounted:Po,activated:Po,deactivated:Po,errorCaptured:Po,serverPrefetch:Po,components:xp,directives:xp,watch:PZ,provide:pP,inject:FZ};function pP(e,t){return t?e?function(){return Cs(On(e)?e.call(this,this):e,On(t)?t.call(this,this):t)}:t:e}function FZ(e,t){return xp(AS(e),AS(t))}function AS(e){if(Sn(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Po(e,t){return e?[...new Set([].concat(e,t))]:t}function xp(e,t){return e?Cs(Object.create(null),e,t):t}function gP(e,t){return e?Sn(e)&&Sn(t)?[...new Set([...e,...t])]:Cs(Object.create(null),vP(e),vP(t??{})):t}function PZ(e,t){if(!e)return t;if(!t)return e;const n=Cs(Object.create(null),e);for(const a in t)n[a]=Po(e[a],t[a]);return n}function s8(){return{app:null,config:{isNativeTag:iL,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let DZ=0;function UZ(e,t){return function(a,r=null){On(a)||(a=Cs({},a)),r!=null&&!or(r)&&(r=null);const s=s8(),o=new WeakSet,i=[];let c=!1;const A=s.app={_uid:DZ++,_component:a,_props:r,_container:null,_context:s,_instance:null,version:pee,get config(){return s.config},set config(d){},use(d,...f){return o.has(d)||(d&&On(d.install)?(o.add(d),d.install(A,...f)):On(d)&&(o.add(d),d(A,...f))),A},mixin(d){return s.mixins.includes(d)||s.mixins.push(d),A},component(d,f){return f?(s.components[d]=f,A):s.components[d]},directive(d,f){return f?(s.directives[d]=f,A):s.directives[d]},mount(d,f,m){if(!c){const h=A._ceVNode||l(a,r);return h.appContext=s,m===!0?m="svg":m===!1&&(m=void 0),e(h,d,m),c=!0,A._container=d,d.__vue_app__=A,nw(h.component)}},onUnmount(d){i.push(d)},unmount(){c&&(zl(i,A._instance,16),e(null,A._container),delete A._container.__vue_app__)},provide(d,f){return s.provides[d]=f,A},runWithContext(d){const f=fv;fv=A;try{return d()}finally{fv=f}}};return A}}let fv=null;function Ha(e,t){if(Ao){let n=Ao.provides;const a=Ao.parent&&Ao.parent.provides;a===n&&(n=Ao.provides=Object.create(a)),n[e]=t}}function Tn(e,t,n=!1){const a=Of();if(a||fv){let r=fv?fv._context.provides:a?a.parent==null||a.ce?a.vnode.appContext&&a.vnode.appContext.provides:a.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return n&&On(t)?t.call(a&&a.proxy):t}}const o8={},i8=()=>Object.create(o8),l8=e=>Object.getPrototypeOf(e)===o8;function RZ(e,t,n,a=!1){const r={},s=i8();e.propsDefaults=Object.create(null),u8(e,t,r,s);for(const o in e.propsOptions[0])o in r||(r[o]=void 0);n?e.props=a?r:PL(r):e.type.props?e.props=r:e.props=s,e.attrs=s}function NZ(e,t,n,a){const{props:r,attrs:s,vnode:{patchFlag:o}}=e,i=Cn(r),[c]=e.propsOptions;let A=!1;if((a||o>0)&&!(o&16)){if(o&8){const d=e.vnode.dynamicProps;for(let f=0;f<d.length;f++){let m=d[f];if(tw(e.emitsOptions,m))continue;const h=t[m];if(c)if(qa(s,m))h!==s[m]&&(s[m]=h,A=!0);else{const p=Ho(m);r[p]=fS(c,i,p,h,e,!1)}else h!==s[m]&&(s[m]=h,A=!0)}}}else{u8(e,t,r,s)&&(A=!0);let d;for(const f in i)(!t||!qa(t,f)&&((d=oA(f))===f||!qa(t,d)))&&(c?n&&(n[f]!==void 0||n[d]!==void 0)&&(r[f]=fS(c,i,f,void 0,e,!0)):delete r[f]);if(s!==i)for(const f in s)(!t||!qa(t,f))&&(delete s[f],A=!0)}A&&pc(e.attrs,"set","")}function u8(e,t,n,a){const[r,s]=e.propsOptions;let o=!1,i;if(t)for(let c in t){if(Mp(c))continue;const A=t[c];let d;r&&qa(r,d=Ho(c))?!s||!s.includes(d)?n[d]=A:(i||(i={}))[d]=A:tw(e.emitsOptions,c)||(!(c in a)||A!==a[c])&&(a[c]=A,o=!0)}if(s){const c=Cn(n),A=i||lr;for(let d=0;d<s.length;d++){const f=s[d];n[f]=fS(r,c,f,A[f],e,!qa(A,f))}}return o}function fS(e,t,n,a,r,s){const o=e[n];if(o!=null){const i=qa(o,"default");if(i&&a===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&On(c)){const{propsDefaults:A}=r;if(n in A)a=A[n];else{const d=Ag(r);a=A[n]=c.call(null,t),d()}}else a=c;r.ce&&r.ce._setProp(n,a)}o[0]&&(s&&!i?a=!1:o[1]&&(a===""||a===oA(n))&&(a=!0))}return a}const VZ=new WeakMap;function c8(e,t,n=!1){const a=n?VZ:t.propsCache,r=a.get(e);if(r)return r;const s=e.props,o={},i=[];let c=!1;if(!On(e)){const d=f=>{c=!0;const[m,h]=c8(f,t,!0);Cs(o,m),h&&i.push(...h)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!s&&!c)return or(e)&&a.set(e,lv),lv;if(Sn(s))for(let d=0;d<s.length;d++){const f=Ho(s[d]);yP(f)&&(o[f]=lr)}else if(s)for(const d in s){const f=Ho(d);if(yP(f)){const m=s[d],h=o[f]=Sn(m)||On(m)?{type:m}:Cs({},m),p=h.type;let y=!1,g=!0;if(Sn(p))for(let w=0;w<p.length;++w){const b=p[w],x=On(b)&&b.name;if(x==="Boolean"){y=!0;break}else x==="String"&&(g=!1)}else y=On(p)&&p.name==="Boolean";h[0]=y,h[1]=g,(y||qa(h,"default"))&&i.push(f)}}const A=[o,i];return or(e)&&a.set(e,A),A}function yP(e){return e[0]!=="$"&&!Mp(e)}const ak=e=>e==="_"||e==="_ctx"||e==="$stable",rk=e=>Sn(e)?e.map(El):[El(e)],LZ=(e,t,n)=>{if(t._n)return t;const a=u((...r)=>rk(t(...r)),n);return a._c=!1,a},d8=(e,t,n)=>{const a=e._ctx;for(const r in e){if(ak(r))continue;const s=e[r];if(On(s))t[r]=LZ(r,s,a);else if(s!=null){const o=rk(s);t[r]=()=>o}}},A8=(e,t)=>{const n=rk(t);e.slots.default=()=>n},f8=(e,t,n)=>{for(const a in t)(n||!ak(a))&&(e[a]=t[a])},MZ=(e,t,n)=>{const a=e.slots=i8();if(e.vnode.shapeFlag&32){const r=t._;r?(f8(a,t,n),n&&dL(a,"_",r,!0)):d8(t,a)}else t&&A8(e,t)},OZ=(e,t,n)=>{const{vnode:a,slots:r}=e;let s=!0,o=lr;if(a.shapeFlag&32){const i=t._;i?n&&i===1?s=!1:f8(r,t,n):(s=!t.$stable,d8(t,r)),o=t}else t&&(A8(e,t),o={default:1});if(s)for(const i in r)!ak(i)&&o[i]==null&&delete r[i]},ps=oee;function HZ(e){return $Z(e)}function $Z(e,t){const n=j2();n.__VUE__=!0;const{insert:a,remove:r,patchProp:s,createElement:o,createText:i,createComment:c,setText:A,setElementText:d,parentNode:f,nextSibling:m,setScopeId:h=Tu,insertStaticContent:p}=e,y=(G,Z,ce,Se=null,Pe=null,ye=null,Ce=void 0,_e=null,De=!!Z.dynamicChildren)=>{if(G===Z)return;G&&!kl(G,Z)&&(Se=z(G),L(G,Pe,ye,!0),G=null),Z.patchFlag===-2&&(De=!1,Z.dynamicChildren=null);const{type:xe,ref:Te,shapeFlag:Me}=Z;switch(xe){case dg:g(G,Z,ce,Se);break;case ls:w(G,Z,ce,Se);break;case Cx:G==null&&b(Z,ce,Se,Ce);break;case We:O(G,Z,ce,Se,Pe,ye,Ce,_e,De);break;default:Me&1?F(G,Z,ce,Se,Pe,ye,Ce,_e,De):Me&6?H(G,Z,ce,Se,Pe,ye,Ce,_e,De):(Me&64||Me&128)&&xe.process(G,Z,ce,Se,Pe,ye,Ce,_e,De,re)}Te!=null&&Pe?Qp(Te,G&&G.ref,ye,Z||G,!Z):Te==null&&G&&G.ref!=null&&Qp(G.ref,null,ye,G,!0)},g=(G,Z,ce,Se)=>{if(G==null)a(Z.el=i(Z.children),ce,Se);else{const Pe=Z.el=G.el;Z.children!==G.children&&A(Pe,Z.children)}},w=(G,Z,ce,Se)=>{G==null?a(Z.el=c(Z.children||""),ce,Se):Z.el=G.el},b=(G,Z,ce,Se)=>{[G.el,G.anchor]=p(G.children,Z,ce,Se,G.el,G.anchor)},x=({el:G,anchor:Z},ce,Se)=>{let Pe;for(;G&&G!==Z;)Pe=m(G),a(G,ce,Se),G=Pe;a(Z,ce,Se)},T=({el:G,anchor:Z})=>{let ce;for(;G&&G!==Z;)ce=m(G),r(G),G=ce;r(Z)},F=(G,Z,ce,Se,Pe,ye,Ce,_e,De)=>{Z.type==="svg"?Ce="svg":Z.type==="math"&&(Ce="mathml"),G==null?k(Z,ce,Se,Pe,ye,Ce,_e,De):C(G,Z,Pe,ye,Ce,_e,De)},k=(G,Z,ce,Se,Pe,ye,Ce,_e)=>{let De,xe;const{props:Te,shapeFlag:Me,transition:et,dirs:lt}=G;if(De=G.el=o(G.type,ye,Te&&Te.is,Te),Me&8?d(De,G.children):Me&16&&E(G.children,De,null,Se,Pe,xx(G,ye),Ce,_e),lt&&BA(G,null,Se,"created"),S(De,G,G.scopeId,Ce,Se),Te){for(const Le in Te)Le!=="value"&&!Mp(Le)&&s(De,Le,null,Te[Le],ye,Se);"value"in Te&&s(De,"value",null,Te.value,ye),(xe=Te.onVnodeBeforeMount)&&Xi(xe,Se,G)}lt&&BA(G,null,Se,"beforeMount");const Re=QZ(Pe,et);Re&&et.beforeEnter(De),a(De,Z,ce),((xe=Te&&Te.onVnodeMounted)||Re||lt)&&ps(()=>{xe&&Xi(xe,Se,G),Re&&et.enter(De),lt&&BA(G,null,Se,"mounted")},Pe)},S=(G,Z,ce,Se,Pe)=>{if(ce&&h(G,ce),Se)for(let ye=0;ye<Se.length;ye++)h(G,Se[ye]);if(Pe){let ye=Pe.subTree;if(Z===ye||w_(ye.type)&&(ye.ssContent===Z||ye.ssFallback===Z)){const Ce=Pe.vnode;S(G,Ce,Ce.scopeId,Ce.slotScopeIds,Pe.parent)}}},E=(G,Z,ce,Se,Pe,ye,Ce,_e,De=0)=>{for(let xe=De;xe<G.length;xe++){const Te=G[xe]=_e?pd(G[xe]):El(G[xe]);y(null,Te,Z,ce,Se,Pe,ye,Ce,_e)}},C=(G,Z,ce,Se,Pe,ye,Ce)=>{const _e=Z.el=G.el;let{patchFlag:De,dynamicChildren:xe,dirs:Te}=Z;De|=G.patchFlag&16;const Me=G.props||lr,et=Z.props||lr;let lt;if(ce&&kA(ce,!1),(lt=et.onVnodeBeforeUpdate)&&Xi(lt,ce,Z,G),Te&&BA(Z,G,ce,"beforeUpdate"),ce&&kA(ce,!0),(Me.innerHTML&&et.innerHTML==null||Me.textContent&&et.textContent==null)&&d(_e,""),xe?D(G.dynamicChildren,xe,_e,ce,Se,xx(Z,Pe),ye):Ce||ue(G,Z,_e,null,ce,Se,xx(Z,Pe),ye,!1),De>0){if(De&16)P(_e,Me,et,ce,Pe);else if(De&2&&Me.class!==et.class&&s(_e,"class",null,et.class,Pe),De&4&&s(_e,"style",Me.style,et.style,Pe),De&8){const Re=Z.dynamicProps;for(let Le=0;Le<Re.length;Le++){const nt=Re[Le],Tt=Me[nt],Pt=et[nt];(Pt!==Tt||nt==="value")&&s(_e,nt,Tt,Pt,Pe,ce)}}De&1&&G.children!==Z.children&&d(_e,Z.children)}else!Ce&&xe==null&&P(_e,Me,et,ce,Pe);((lt=et.onVnodeUpdated)||Te)&&ps(()=>{lt&&Xi(lt,ce,Z,G),Te&&BA(Z,G,ce,"updated")},Se)},D=(G,Z,ce,Se,Pe,ye,Ce)=>{for(let _e=0;_e<Z.length;_e++){const De=G[_e],xe=Z[_e],Te=De.el&&(De.type===We||!kl(De,xe)||De.shapeFlag&198)?f(De.el):ce;y(De,xe,Te,null,Se,Pe,ye,Ce,!0)}},P=(G,Z,ce,Se,Pe)=>{if(Z!==ce){if(Z!==lr)for(const ye in Z)!Mp(ye)&&!(ye in ce)&&s(G,ye,Z[ye],null,Pe,Se);for(const ye in ce){if(Mp(ye))continue;const Ce=ce[ye],_e=Z[ye];Ce!==_e&&ye!=="value"&&s(G,ye,_e,Ce,Pe,Se)}"value"in ce&&s(G,"value",Z.value,ce.value,Pe)}},O=(G,Z,ce,Se,Pe,ye,Ce,_e,De)=>{const xe=Z.el=G?G.el:i(""),Te=Z.anchor=G?G.anchor:i("");let{patchFlag:Me,dynamicChildren:et,slotScopeIds:lt}=Z;lt&&(_e=_e?_e.concat(lt):lt),G==null?(a(xe,ce,Se),a(Te,ce,Se),E(Z.children||[],ce,Te,Pe,ye,Ce,_e,De)):Me>0&&Me&64&&et&&G.dynamicChildren?(D(G.dynamicChildren,et,ce,Pe,ye,Ce,_e),(Z.key!=null||Pe&&Z===Pe.subTree)&&sk(G,Z,!0)):ue(G,Z,ce,Te,Pe,ye,Ce,_e,De)},H=(G,Z,ce,Se,Pe,ye,Ce,_e,De)=>{Z.slotScopeIds=_e,G==null?Z.shapeFlag&512?Pe.ctx.activate(Z,ce,Se,Ce,De):ie(Z,ce,Se,Pe,ye,Ce,De):Ae(G,Z,De)},ie=(G,Z,ce,Se,Pe,ye,Ce)=>{const _e=G.component=dee(G,Se,Pe);if(Y2(G)&&(_e.ctx.renderer=re),Aee(_e,!1,Ce),_e.asyncDep){if(Pe&&Pe.registerDep(_e,j,Ce),!G.el){const De=_e.subTree=l(ls);w(null,De,Z,ce),G.placeholder=De.el}}else j(_e,G,Z,ce,Pe,ye,Ce)},Ae=(G,Z,ce)=>{const Se=Z.component=G.component;if(eee(G,Z,ce))if(Se.asyncDep&&!Se.asyncResolved){J(Se,Z,ce);return}else Se.next=Z,Se.update();else Z.el=G.el,Se.vnode=Z},j=(G,Z,ce,Se,Pe,ye,Ce)=>{const _e=()=>{if(G.isMounted){let{next:Me,bu:et,u:lt,parent:Re,vnode:Le}=G;{const $t=m8(G);if($t){Me&&(Me.el=Le.el,J(G,Me,Ce)),$t.asyncDep.then(()=>{G.isUnmounted||_e()});return}}let nt=Me,Tt;kA(G,!1),Me?(Me.el=Le.el,J(G,Me,Ce)):Me=Le,et&&cv(et),(Tt=Me.props&&Me.props.onVnodeBeforeUpdate)&&Xi(Tt,Re,Me,Le),kA(G,!0);const Pt=_P(G),Kt=G.subTree;G.subTree=Pt,y(Kt,Pt,f(Kt.el),z(Kt),G,Pe,ye),Me.el=Pt.el,nt===null&&ik(G,Pt.el),lt&&ps(lt,Pe),(Tt=Me.props&&Me.props.onVnodeUpdated)&&ps(()=>Xi(Tt,Re,Me,Le),Pe)}else{let Me;const{el:et,props:lt}=Z,{bm:Re,m:Le,parent:nt,root:Tt,type:Pt}=G,Kt=tf(Z);kA(G,!1),Re&&cv(Re),!Kt&&(Me=lt&&lt.onVnodeBeforeMount)&&Xi(Me,nt,Z),kA(G,!0);{Tt.ce&&Tt.ce._def.shadowRoot!==!1&&Tt.ce._injectChildStyle(Pt);const $t=G.subTree=_P(G);y(null,$t,ce,Se,G,Pe,ye),Z.el=$t.el}if(Le&&ps(Le,Pe),!Kt&&(Me=lt&&lt.onVnodeMounted)){const $t=Z;ps(()=>Xi(Me,nt,$t),Pe)}(Z.shapeFlag&256||nt&&tf(nt.vnode)&&nt.vnode.shapeFlag&256)&&G.a&&ps(G.a,Pe),G.isMounted=!0,Z=ce=Se=null}};G.scope.on();const De=G.effect=new gL(_e);G.scope.off();const xe=G.update=De.run.bind(De),Te=G.job=De.runIfDirty.bind(De);Te.i=G,Te.id=G.uid,De.scheduler=()=>ek(Te),kA(G,!0),xe()},J=(G,Z,ce)=>{Z.component=G;const Se=G.vnode.props;G.vnode=Z,G.next=null,NZ(G,Z.props,Se,ce),OZ(G,Z.children,ce),Fc(),lP(G),Pc()},ue=(G,Z,ce,Se,Pe,ye,Ce,_e,De=!1)=>{const xe=G&&G.children,Te=G?G.shapeFlag:0,Me=Z.children,{patchFlag:et,shapeFlag:lt}=Z;if(et>0){if(et&128){Y(xe,Me,ce,Se,Pe,ye,Ce,_e,De);return}else if(et&256){ne(xe,Me,ce,Se,Pe,ye,Ce,_e,De);return}}lt&8?(Te&16&&ee(xe,Pe,ye),Me!==xe&&d(ce,Me)):Te&16?lt&16?Y(xe,Me,ce,Se,Pe,ye,Ce,_e,De):ee(xe,Pe,ye,!0):(Te&8&&d(ce,""),lt&16&&E(Me,ce,Se,Pe,ye,Ce,_e,De))},ne=(G,Z,ce,Se,Pe,ye,Ce,_e,De)=>{G=G||lv,Z=Z||lv;const xe=G.length,Te=Z.length,Me=Math.min(xe,Te);let et;for(et=0;et<Me;et++){const lt=Z[et]=De?pd(Z[et]):El(Z[et]);y(G[et],lt,ce,null,Pe,ye,Ce,_e,De)}xe>Te?ee(G,Pe,ye,!0,!1,Me):E(Z,ce,Se,Pe,ye,Ce,_e,De,Me)},Y=(G,Z,ce,Se,Pe,ye,Ce,_e,De)=>{let xe=0;const Te=Z.length;let Me=G.length-1,et=Te-1;for(;xe<=Me&&xe<=et;){const lt=G[xe],Re=Z[xe]=De?pd(Z[xe]):El(Z[xe]);if(kl(lt,Re))y(lt,Re,ce,null,Pe,ye,Ce,_e,De);else break;xe++}for(;xe<=Me&&xe<=et;){const lt=G[Me],Re=Z[et]=De?pd(Z[et]):El(Z[et]);if(kl(lt,Re))y(lt,Re,ce,null,Pe,ye,Ce,_e,De);else break;Me--,et--}if(xe>Me){if(xe<=et){const lt=et+1,Re=lt<Te?Z[lt].el:Se;for(;xe<=et;)y(null,Z[xe]=De?pd(Z[xe]):El(Z[xe]),ce,Re,Pe,ye,Ce,_e,De),xe++}}else if(xe>et)for(;xe<=Me;)L(G[xe],Pe,ye,!0),xe++;else{const lt=xe,Re=xe,Le=new Map;for(xe=Re;xe<=et;xe++){const Je=Z[xe]=De?pd(Z[xe]):El(Z[xe]);Je.key!=null&&Le.set(Je.key,xe)}let nt,Tt=0;const Pt=et-Re+1;let Kt=!1,$t=0;const bt=new Array(Pt);for(xe=0;xe<Pt;xe++)bt[xe]=0;for(xe=lt;xe<=Me;xe++){const Je=G[xe];if(Tt>=Pt){L(Je,Pe,ye,!0);continue}let Nt;if(Je.key!=null)Nt=Le.get(Je.key);else for(nt=Re;nt<=et;nt++)if(bt[nt-Re]===0&&kl(Je,Z[nt])){Nt=nt;break}Nt===void 0?L(Je,Pe,ye,!0):(bt[Nt-Re]=xe+1,Nt>=$t?$t=Nt:Kt=!0,y(Je,Z[Nt],ce,null,Pe,ye,Ce,_e,De),Tt++)}const st=Kt?GZ(bt):lv;for(nt=st.length-1,xe=Pt-1;xe>=0;xe--){const Je=Re+xe,Nt=Z[Je],rn=Z[Je+1],Lt=Je+1<Te?rn.el||rn.placeholder:Se;bt[xe]===0?y(null,Nt,ce,Lt,Pe,ye,Ce,_e,De):Kt&&(nt<0||xe!==st[nt]?te(Nt,ce,Lt,2):nt--)}}},te=(G,Z,ce,Se,Pe=null)=>{const{el:ye,type:Ce,transition:_e,children:De,shapeFlag:xe}=G;if(xe&6){te(G.component.subTree,Z,ce,Se);return}if(xe&128){G.suspense.move(Z,ce,Se);return}if(xe&64){Ce.move(G,Z,ce,re);return}if(Ce===We){a(ye,Z,ce);for(let Me=0;Me<De.length;Me++)te(De[Me],Z,ce,Se);a(G.anchor,Z,ce);return}if(Ce===Cx){x(G,Z,ce);return}if(Se!==2&&xe&1&&_e)if(Se===0)_e.beforeEnter(ye),a(ye,Z,ce),ps(()=>_e.enter(ye),Pe);else{const{leave:Me,delayLeave:et,afterLeave:lt}=_e,Re=()=>{G.ctx.isUnmounted?r(ye):a(ye,Z,ce)},Le=()=>{ye._isLeaving&&ye[hc](!0),Me(ye,()=>{Re(),lt&&lt()})};et?et(ye,Re,Le):Le()}else a(ye,Z,ce)},L=(G,Z,ce,Se=!1,Pe=!1)=>{const{type:ye,props:Ce,ref:_e,children:De,dynamicChildren:xe,shapeFlag:Te,patchFlag:Me,dirs:et,cacheIndex:lt}=G;if(Me===-2&&(Pe=!1),_e!=null&&(Fc(),Qp(_e,null,ce,G,!0),Pc()),lt!=null&&(Z.renderCache[lt]=void 0),Te&256){Z.ctx.deactivate(G);return}const Re=Te&1&&et,Le=!tf(G);let nt;if(Le&&(nt=Ce&&Ce.onVnodeBeforeUnmount)&&Xi(nt,Z,G),Te&6)Q(G.component,ce,Se);else{if(Te&128){G.suspense.unmount(ce,Se);return}Re&&BA(G,null,Z,"beforeUnmount"),Te&64?G.type.remove(G,Z,ce,re,Se):xe&&!xe.hasOnce&&(ye!==We||Me>0&&Me&64)?ee(xe,Z,ce,!1,!0):(ye===We&&Me&384||!Pe&&Te&16)&&ee(De,Z,ce),Se&&N(G)}(Le&&(nt=Ce&&Ce.onVnodeUnmounted)||Re)&&ps(()=>{nt&&Xi(nt,Z,G),Re&&BA(G,null,Z,"unmounted")},ce)},N=G=>{const{type:Z,el:ce,anchor:Se,transition:Pe}=G;if(Z===We){q(ce,Se);return}if(Z===Cx){T(G);return}const ye=()=>{r(ce),Pe&&!Pe.persisted&&Pe.afterLeave&&Pe.afterLeave()};if(G.shapeFlag&1&&Pe&&!Pe.persisted){const{leave:Ce,delayLeave:_e}=Pe,De=()=>Ce(ce,ye);_e?_e(G.el,ye,De):De()}else ye()},q=(G,Z)=>{let ce;for(;G!==Z;)ce=m(G),r(G),G=ce;r(Z)},Q=(G,Z,ce)=>{const{bum:Se,scope:Pe,job:ye,subTree:Ce,um:_e,m:De,a:xe}=G;__(De),__(xe),Se&&cv(Se),Pe.stop(),ye&&(ye.flags|=8,L(Ce,G,Z,ce)),_e&&ps(_e,Z),ps(()=>{G.isUnmounted=!0},Z)},ee=(G,Z,ce,Se=!1,Pe=!1,ye=0)=>{for(let Ce=ye;Ce<G.length;Ce++)L(G[Ce],Z,ce,Se,Pe)},z=G=>{if(G.shapeFlag&6)return z(G.component.subTree);if(G.shapeFlag&128)return G.suspense.next();const Z=m(G.anchor||G.el),ce=Z&&Z[HL];return ce?m(ce):Z};let X=!1;const le=(G,Z,ce)=>{G==null?Z._vnode&&L(Z._vnode,null,null,!0):y(Z._vnode||null,G,Z,null,null,null,ce),Z._vnode=G,X||(X=!0,lP(),LL(),X=!1)},re={p:y,um:L,m:te,r:N,mt:ie,mc:E,pc:ue,pbc:D,n:z,o:e};return{render:le,hydrate:void 0,createApp:UZ(le)}}function xx({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function kA({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function QZ(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function sk(e,t,n=!1){const a=e.children,r=t.children;if(Sn(a)&&Sn(r))for(let s=0;s<a.length;s++){const o=a[s];let i=r[s];i.shapeFlag&1&&!i.dynamicChildren&&((i.patchFlag<=0||i.patchFlag===32)&&(i=r[s]=pd(r[s]),i.el=o.el),!n&&i.patchFlag!==-2&&sk(o,i)),i.type===dg&&i.patchFlag!==-1&&(i.el=o.el),i.type===ls&&!i.el&&(i.el=o.el)}}function GZ(e){const t=e.slice(),n=[0];let a,r,s,o,i;const c=e.length;for(a=0;a<c;a++){const A=e[a];if(A!==0){if(r=n[n.length-1],e[r]<A){t[a]=r,n.push(a);continue}for(s=0,o=n.length-1;s<o;)i=s+o>>1,e[n[i]]<A?s=i+1:o=i;A<e[n[s]]&&(s>0&&(t[a]=n[s-1]),n[s]=a)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=t[o];return n}function m8(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:m8(t)}function __(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const zZ=Symbol.for("v-scx"),KZ=()=>Tn(zZ);function _r(e,t){return ok(e,null,t)}function Ke(e,t,n){return ok(e,t,n)}function ok(e,t,n=lr){const{immediate:a,deep:r,flush:s,once:o}=n,i=Cs({},n),c=t&&a||!t&&s!=="post";let A;if(x0){if(s==="sync"){const h=KZ();A=h.__watcherHandles||(h.__watcherHandles=[])}else if(!c){const h=()=>{};return h.stop=Tu,h.resume=Tu,h.pause=Tu,h}}const d=Ao;i.call=(h,p,y)=>zl(h,d,p,y);let f=!1;s==="post"?i.scheduler=h=>{ps(h,d&&d.suspense)}:s!=="sync"&&(f=!0,i.scheduler=(h,p)=>{p?h():ek(h)}),i.augmentJob=h=>{t&&(h.flags|=4),f&&(h.flags|=2,d&&(h.id=d.uid,h.i=d))};const m=AZ(e,t,i);return x0&&(A?A.push(m):c&&m()),m}function WZ(e,t,n){const a=this.proxy,r=yr(e)?e.includes(".")?v8(a,e):()=>a[e]:e.bind(a,a);let s;On(t)?s=t:(s=t.handler,n=t);const o=Ag(this),i=ok(r,s.bind(a),n);return o(),i}function v8(e,t){const n=t.split(".");return()=>{let a=e;for(let r=0;r<n.length&&a;r++)a=a[n[r]];return a}}const jZ=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Ho(t)}Modifiers`]||e[`${oA(t)}Modifiers`];function qZ(e,t,...n){if(e.isUnmounted)return;const a=e.vnode.props||lr;let r=n;const s=t.startsWith("update:"),o=s&&jZ(a,t.slice(7));o&&(o.trim&&(r=n.map(d=>yr(d)?d.trim():d)),o.number&&(r=n.map(d_)));let i,c=a[i=vx(t)]||a[i=vx(Ho(t))];!c&&s&&(c=a[i=vx(oA(t))]),c&&zl(c,e,6,r);const A=a[i+"Once"];if(A){if(!e.emitted)e.emitted={};else if(e.emitted[i])return;e.emitted[i]=!0,zl(A,e,6,r)}}const YZ=new WeakMap;function h8(e,t,n=!1){const a=n?YZ:t.emitsCache,r=a.get(e);if(r!==void 0)return r;const s=e.emits;let o={},i=!1;if(!On(e)){const c=A=>{const d=h8(A,t,!0);d&&(i=!0,Cs(o,d))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!s&&!i?(or(e)&&a.set(e,null),null):(Sn(s)?s.forEach(c=>o[c]=null):Cs(o,s),or(e)&&a.set(e,o),o)}function tw(e,t){return!e||!K2(t)?!1:(t=t.slice(2).replace(/Once$/,""),qa(e,t[0].toLowerCase()+t.slice(1))||qa(e,oA(t))||qa(e,t))}function _P(e){const{type:t,vnode:n,proxy:a,withProxy:r,propsOptions:[s],slots:o,attrs:i,emit:c,render:A,renderCache:d,props:f,data:m,setupState:h,ctx:p,inheritAttrs:y}=e,g=p_(e);let w,b;try{if(n.shapeFlag&4){const T=r||a,F=T;w=El(A.call(F,T,d,f,h,m,p)),b=i}else{const T=t;w=El(T.length>1?T(f,{attrs:i,slots:o,emit:c}):T(f,null)),b=t.props?i:JZ(i)}}catch(T){zp.length=0,ug(T,e,1),w=l(ls)}let x=w;if(b&&y!==!1){const T=Object.keys(b),{shapeFlag:F}=x;T.length&&F&7&&(s&&T.some(QB)&&(b=ZZ(b,s)),x=Uu(x,b,!1,!0))}return n.dirs&&(x=Uu(x,null,!1,!0),x.dirs=x.dirs?x.dirs.concat(n.dirs):n.dirs),n.transition&&Qd(x,n.transition),w=x,p_(g),w}function XZ(e,t=!0){let n;for(let a=0;a<e.length;a++){const r=e[a];if(Gd(r)){if(r.type!==ls||r.children==="v-if"){if(n)return;n=r}}else return}return n}const JZ=e=>{let t;for(const n in e)(n==="class"||n==="style"||K2(n))&&((t||(t={}))[n]=e[n]);return t},ZZ=(e,t)=>{const n={};for(const a in e)(!QB(a)||!(a.slice(9)in t))&&(n[a]=e[a]);return n};function eee(e,t,n){const{props:a,children:r,component:s}=e,{props:o,children:i,patchFlag:c}=t,A=s.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return a?wP(a,o,A):!!o;if(c&8){const d=t.dynamicProps;for(let f=0;f<d.length;f++){const m=d[f];if(o[m]!==a[m]&&!tw(A,m))return!0}}}else return(r||i)&&(!i||!i.$stable)?!0:a===o?!1:a?o?wP(a,o,A):!0:!!o;return!1}function wP(e,t,n){const a=Object.keys(t);if(a.length!==Object.keys(e).length)return!0;for(let r=0;r<a.length;r++){const s=a[r];if(t[s]!==e[s]&&!tw(n,s))return!0}return!1}function ik({vnode:e,parent:t},n){for(;t;){const a=t.subTree;if(a.suspense&&a.suspense.activeBranch===e&&(a.el=e.el),a===e)(e=t.vnode).el=n,t=t.parent;else break}}const w_=e=>e.__isSuspense;let mS=0;const tee={name:"Suspense",__isSuspense:!0,process(e,t,n,a,r,s,o,i,c,A){if(e==null)nee(t,n,a,r,s,o,i,c,A);else{if(s&&s.deps>0&&!e.suspense.isInFallback){t.suspense=e.suspense,t.suspense.vnode=t,t.el=e.el;return}aee(e,t,n,a,r,o,i,c,A)}},hydrate:ree,normalize:see},vS=tee;function b0(e,t){const n=e.props&&e.props[t];On(n)&&n()}function nee(e,t,n,a,r,s,o,i,c){const{p:A,o:{createElement:d}}=c,f=d("div"),m=e.suspense=p8(e,r,a,t,f,n,s,o,i,c);A(null,m.pendingBranch=e.ssContent,f,null,a,m,s,o),m.deps>0?(b0(e,"onPending"),b0(e,"onFallback"),A(null,e.ssFallback,t,n,a,null,s,o),mv(m,e.ssFallback)):m.resolve(!1,!0)}function aee(e,t,n,a,r,s,o,i,{p:c,um:A,o:{createElement:d}}){const f=t.suspense=e.suspense;f.vnode=t,t.el=e.el;const m=t.ssContent,h=t.ssFallback,{activeBranch:p,pendingBranch:y,isInFallback:g,isHydrating:w}=f;if(y)f.pendingBranch=m,kl(y,m)?(c(y,m,f.hiddenContainer,null,r,f,s,o,i),f.deps<=0?f.resolve():g&&(w||(c(p,h,n,a,r,null,s,o,i),mv(f,h)))):(f.pendingId=mS++,w?(f.isHydrating=!1,f.activeBranch=y):A(y,r,f),f.deps=0,f.effects.length=0,f.hiddenContainer=d("div"),g?(c(null,m,f.hiddenContainer,null,r,f,s,o,i),f.deps<=0?f.resolve():(c(p,h,n,a,r,null,s,o,i),mv(f,h))):p&&kl(p,m)?(c(p,m,n,a,r,f,s,o,i),f.resolve(!0)):(c(null,m,f.hiddenContainer,null,r,f,s,o,i),f.deps<=0&&f.resolve()));else if(p&&kl(p,m))c(p,m,n,a,r,f,s,o,i),mv(f,m);else if(b0(t,"onPending"),f.pendingBranch=m,m.shapeFlag&512?f.pendingId=m.component.suspenseId:f.pendingId=mS++,c(null,m,f.hiddenContainer,null,r,f,s,o,i),f.deps<=0)f.resolve();else{const{timeout:b,pendingId:x}=f;b>0?setTimeout(()=>{f.pendingId===x&&f.fallback(h)},b):b===0&&f.fallback(h)}}function p8(e,t,n,a,r,s,o,i,c,A,d=!1){const{p:f,m,um:h,n:p,o:{parentNode:y,remove:g}}=A;let w;const b=iee(e);b&&t&&t.pendingBranch&&(w=t.pendingId,t.deps++);const x=e.props?AL(e.props.timeout):void 0,T=s,F={vnode:e,parent:t,parentComponent:n,namespace:o,container:a,hiddenContainer:r,deps:0,pendingId:mS++,timeout:typeof x=="number"?x:-1,activeBranch:null,pendingBranch:null,isInFallback:!d,isHydrating:d,isUnmounted:!1,effects:[],resolve(k=!1,S=!1){const{vnode:E,activeBranch:C,pendingBranch:D,pendingId:P,effects:O,parentComponent:H,container:ie}=F;let Ae=!1;F.isHydrating?F.isHydrating=!1:k||(Ae=C&&D.transition&&D.transition.mode==="out-in",Ae&&(C.transition.afterLeave=()=>{P===F.pendingId&&(m(D,ie,s===T?p(C):s,0),lS(O))}),C&&(y(C.el)===ie&&(s=p(C)),h(C,H,F,!0)),Ae||m(D,ie,s,0)),mv(F,D),F.pendingBranch=null,F.isInFallback=!1;let j=F.parent,J=!1;for(;j;){if(j.pendingBranch){j.effects.push(...O),J=!0;break}j=j.parent}!J&&!Ae&&lS(O),F.effects=[],b&&t&&t.pendingBranch&&w===t.pendingId&&(t.deps--,t.deps===0&&!S&&t.resolve()),b0(E,"onResolve")},fallback(k){if(!F.pendingBranch)return;const{vnode:S,activeBranch:E,parentComponent:C,container:D,namespace:P}=F;b0(S,"onFallback");const O=p(E),H=()=>{F.isInFallback&&(f(null,k,D,O,C,null,P,i,c),mv(F,k))},ie=k.transition&&k.transition.mode==="out-in";ie&&(E.transition.afterLeave=H),F.isInFallback=!0,h(E,C,null,!0),ie||H()},move(k,S,E){F.activeBranch&&m(F.activeBranch,k,S,E),F.container=k},next(){return F.activeBranch&&p(F.activeBranch)},registerDep(k,S,E){const C=!!F.pendingBranch;C&&F.deps++;const D=k.vnode.el;k.asyncDep.catch(P=>{ug(P,k,0)}).then(P=>{if(k.isUnmounted||F.isUnmounted||F.pendingId!==k.suspenseId)return;k.asyncResolved=!0;const{vnode:O}=k;pS(k,P),D&&(O.el=D);const H=!D&&k.subTree.el;S(k,O,y(D||k.subTree.el),D?null:p(k.subTree),F,o,E),H&&g(H),ik(k,O.el),C&&--F.deps===0&&F.resolve()})},unmount(k,S){F.isUnmounted=!0,F.activeBranch&&h(F.activeBranch,n,k,S),F.pendingBranch&&h(F.pendingBranch,n,k,S)}};return F}function ree(e,t,n,a,r,s,o,i,c){const A=t.suspense=p8(t,a,n,e.parentNode,document.createElement("div"),null,r,s,o,i,!0),d=c(e,A.pendingBranch=t.ssContent,n,A,s,o);return A.deps===0&&A.resolve(!1,!0),d}function see(e){const{shapeFlag:t,children:n}=e,a=t&32;e.ssContent=bP(a?n.default:n),e.ssFallback=a?bP(n.fallback):l(ls)}function bP(e){let t;if(On(e)){const n=Tv&&e._c;n&&(e._d=!1,U()),e=e(),n&&(e._d=!0,t=oi,g8())}return Sn(e)&&(e=XZ(e)),e=El(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(n=>n!==e)),e}function oee(e,t){t&&t.pendingBranch?Sn(e)?t.effects.push(...e):t.effects.push(e):lS(e)}function mv(e,t){e.activeBranch=t;const{vnode:n,parentComponent:a}=e;let r=t.el;for(;!r&&t.component;)t=t.component.subTree,r=t.el;n.el=r,a&&a.subTree===n&&(a.vnode.el=r,ik(a,r))}function iee(e){const t=e.props&&e.props.suspensible;return t!=null&&t!==!1}const We=Symbol.for("v-fgt"),dg=Symbol.for("v-txt"),ls=Symbol.for("v-cmt"),Cx=Symbol.for("v-stc"),zp=[];let oi=null;function U(e=!1){zp.push(oi=e?null:[])}function g8(){zp.pop(),oi=zp[zp.length-1]||null}let Tv=1;function b_(e,t=!1){Tv+=e,e<0&&oi&&t&&(oi.hasOnce=!0)}function y8(e){return e.dynamicChildren=Tv>0?oi||lv:null,g8(),Tv>0&&oi&&oi.push(e),e}function me(e,t,n,a,r,s){return y8(v(e,t,n,a,r,s,!0))}function pe(e,t,n,a,r){return y8(l(e,t,n,a,r,!0))}function Gd(e){return e?e.__v_isVNode===!0:!1}function kl(e,t){return e.type===t.type&&e.key===t.key}const _8=({key:e})=>e??null,Qy=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?yr(e)||Xr(e)||On(e)?{i:js,r:e,k:t,f:!!n}:e:null);function v(e,t=null,n=null,a=0,r=null,s=e===We?0:1,o=!1,i=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&_8(t),ref:t&&Qy(t),scopeId:OL,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:a,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:js};return i?(lk(c,n),s&128&&e.normalize(c)):n&&(c.shapeFlag|=yr(n)?8:16),Tv>0&&!o&&oi&&(c.patchFlag>0||s&6)&&c.patchFlag!==32&&oi.push(c),c}const l=lee;function lee(e,t=null,n=null,a=0,r=null,s=!1){if((!e||e===e8)&&(e=ls),Gd(e)){const i=Uu(e,t,!0);return n&&lk(i,n),Tv>0&&!s&&oi&&(i.shapeFlag&6?oi[oi.indexOf(e)]=i:oi.push(i)),i.patchFlag=-2,i}if(hee(e)&&(e=e.__vccOpts),t){t=nu(t);let{class:i,style:c}=t;i&&!yr(i)&&(t.class=ct(i)),or(c)&&(ZB(c)&&!Sn(c)&&(c=Cs({},c)),t.style=Rt(c))}const o=yr(e)?1:w_(e)?128:$L(e)?64:or(e)?4:On(e)?2:0;return v(e,t,n,a,r,o,s,!0)}function nu(e){return e?ZB(e)||l8(e)?Cs({},e):e:null}function Uu(e,t,n=!1,a=!1){const{props:r,ref:s,patchFlag:o,children:i,transition:c}=e,A=t?Ue(r||{},t):r,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:A,key:A&&_8(A),ref:t&&t.ref?n&&s?Sn(s)?s.concat(Qy(t)):[s,Qy(t)]:Qy(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==We?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Uu(e.ssContent),ssFallback:e.ssFallback&&Uu(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&a&&Qd(d,c.clone(d)),d}function M(e=" ",t=0){return l(dg,null,e,t)}function ge(e="",t=!1){return t?(U(),pe(ls,null,e)):l(ls,null,e)}function El(e){return e==null||typeof e=="boolean"?l(ls):Sn(e)?l(We,null,e.slice()):Gd(e)?pd(e):l(dg,null,String(e))}function pd(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Uu(e)}function lk(e,t){let n=0;const{shapeFlag:a}=e;if(t==null)t=null;else if(Sn(t))n=16;else if(typeof t=="object")if(a&65){const r=t.default;r&&(r._c&&(r._d=!1),lk(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!l8(t)?t._ctx=js:r===3&&js&&(js.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else On(t)?(t={default:t,_ctx:js},n=32):(t=String(t),a&64?(n=16,t=[M(t)]):n=8);e.children=t,e.shapeFlag|=n}function Ue(...e){const t={};for(let n=0;n<e.length;n++){const a=e[n];for(const r in a)if(r==="class")t.class!==a.class&&(t.class=ct([t.class,a.class]));else if(r==="style")t.style=Rt([t.style,a.style]);else if(K2(r)){const s=t[r],o=a[r];o&&s!==o&&!(Sn(s)&&s.includes(o))&&(t[r]=s?[].concat(s,o):o)}else r!==""&&(t[r]=a[r])}return t}function Xi(e,t,n,a=null){zl(e,t,7,[n,a])}const uee=s8();let cee=0;function dee(e,t,n){const a=e.type,r=(t?t.appContext:e.appContext)||uee,s={uid:cee++,vnode:e,type:a,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new hL(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:c8(a,r),emitsOptions:h8(a,r),emit:null,emitted:null,propsDefaults:lr,inheritAttrs:a.inheritAttrs,ctx:lr,data:lr,props:lr,attrs:lr,slots:lr,refs:lr,setupState:lr,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=qZ.bind(null,s),e.ce&&e.ce(s),s}let Ao=null;const Of=()=>Ao||js;let x_,hS;{const e=j2(),t=(n,a)=>{let r;return(r=e[n])||(r=e[n]=[]),r.push(a),s=>{r.length>1?r.forEach(o=>o(s)):r[0](s)}};x_=t("__VUE_INSTANCE_SETTERS__",n=>Ao=n),hS=t("__VUE_SSR_SETTERS__",n=>x0=n)}const Ag=e=>{const t=Ao;return x_(e),e.scope.on(),()=>{e.scope.off(),x_(t)}},xP=()=>{Ao&&Ao.scope.off(),x_(null)};function w8(e){return e.vnode.shapeFlag&4}let x0=!1;function Aee(e,t=!1,n=!1){t&&hS(t);const{props:a,children:r}=e.vnode,s=w8(e);RZ(e,a,s,t),MZ(e,r,n||t);const o=s?fee(e,t):void 0;return t&&hS(!1),o}function fee(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,BZ);const{setup:a}=n;if(a){Fc();const r=e.setupContext=a.length>1?vee(e):null,s=Ag(e),o=lg(a,e,0,[e.props,r]),i=lL(o);if(Pc(),s(),(i||e.sp)&&!tf(e)&&YL(e),i){if(o.then(xP,xP),t)return o.then(c=>{pS(e,c)}).catch(c=>{ug(c,e,0)});e.asyncDep=o}else pS(e,o)}else b8(e)}function pS(e,t,n){On(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:or(t)&&(e.setupState=UL(t)),b8(e)}function b8(e,t,n){const a=e.type;e.render||(e.render=a.render||Tu);{const r=Ag(e);Fc();try{kZ(e)}finally{Pc(),r()}}}const mee={get(e,t){return lo(e,"get",""),e[t]}};function vee(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,mee),slots:e.slots,emit:e.emit,expose:t}}function nw(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(UL(f_(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Gp)return Gp[n](e)},has(t,n){return n in t||n in Gp}})):e.proxy}function gS(e,t=!0){return On(e)?e.displayName||e.name:e.name||t&&e.__name}function hee(e){return On(e)&&"__vccOpts"in e}const ae=(e,t)=>cZ(e,t,x0);function au(e,t,n){const a=(s,o,i)=>{b_(-1);try{return l(s,o,i)}finally{b_(1)}},r=arguments.length;return r===2?or(t)&&!Sn(t)?Gd(t)?a(e,null,[t]):a(e,t):a(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Gd(n)&&(n=[n]),a(e,t,n))}const pee="3.5.21";let yS;const CP=typeof window<"u"&&window.trustedTypes;if(CP)try{yS=CP.createPolicy("vue",{createHTML:e=>e})}catch{}const x8=yS?e=>yS.createHTML(e):e=>e,gee="http://www.w3.org/2000/svg",yee="http://www.w3.org/1998/Math/MathML",vc=typeof document<"u"?document:null,SP=vc&&vc.createElement("template"),_ee={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,a)=>{const r=t==="svg"?vc.createElementNS(gee,e):t==="mathml"?vc.createElementNS(yee,e):n?vc.createElement(e,{is:n}):vc.createElement(e);return e==="select"&&a&&a.multiple!=null&&r.setAttribute("multiple",a.multiple),r},createText:e=>vc.createTextNode(e),createComment:e=>vc.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>vc.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,a,r,s){const o=n?n.previousSibling:t.lastChild;if(r&&(r===s||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===s||!(r=r.nextSibling)););else{SP.innerHTML=x8(a==="svg"?`<svg>${e}</svg>`:a==="mathml"?`<math>${e}</math>`:e);const i=SP.content;if(a==="svg"||a==="mathml"){const c=i.firstChild;for(;c.firstChild;)i.appendChild(c.firstChild);i.removeChild(c)}t.insertBefore(i,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},id="transition",np="animation",Iv=Symbol("_vtc"),C8={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},S8=Cs({},KL,C8),wee=e=>(e.displayName="Transition",e.props=S8,e),zd=wee((e,{slots:t})=>au(gZ,E8(e),t)),TA=(e,t=[])=>{Sn(e)?e.forEach(n=>n(...t)):e&&e(...t)},EP=e=>e?Sn(e)?e.some(t=>t.length>1):e.length>1:!1;function E8(e){const t={};for(const O in e)O in C8||(t[O]=e[O]);if(e.css===!1)return t;const{name:n="v",type:a,duration:r,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:i=`${n}-enter-to`,appearFromClass:c=s,appearActiveClass:A=o,appearToClass:d=i,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:m=`${n}-leave-active`,leaveToClass:h=`${n}-leave-to`}=e,p=bee(r),y=p&&p[0],g=p&&p[1],{onBeforeEnter:w,onEnter:b,onEnterCancelled:x,onLeave:T,onLeaveCancelled:F,onBeforeAppear:k=w,onAppear:S=b,onAppearCancelled:E=x}=t,C=(O,H,ie,Ae)=>{O._enterCancelled=Ae,fd(O,H?d:i),fd(O,H?A:o),ie&&ie()},D=(O,H)=>{O._isLeaving=!1,fd(O,f),fd(O,h),fd(O,m),H&&H()},P=O=>(H,ie)=>{const Ae=O?S:b,j=()=>C(H,O,ie);TA(Ae,[H,j]),BP(()=>{fd(H,O?c:s),yu(H,O?d:i),EP(Ae)||kP(H,a,y,j)})};return Cs(t,{onBeforeEnter(O){TA(w,[O]),yu(O,s),yu(O,o)},onBeforeAppear(O){TA(k,[O]),yu(O,c),yu(O,A)},onEnter:P(!1),onAppear:P(!0),onLeave(O,H){O._isLeaving=!0;const ie=()=>D(O,H);yu(O,f),O._enterCancelled?(yu(O,m),_S()):(_S(),yu(O,m)),BP(()=>{O._isLeaving&&(fd(O,f),yu(O,h),EP(T)||kP(O,a,g,ie))}),TA(T,[O,ie])},onEnterCancelled(O){C(O,!1,void 0,!0),TA(x,[O])},onAppearCancelled(O){C(O,!0,void 0,!0),TA(E,[O])},onLeaveCancelled(O){D(O),TA(F,[O])}})}function bee(e){if(e==null)return null;if(or(e))return[Sx(e.enter),Sx(e.leave)];{const t=Sx(e);return[t,t]}}function Sx(e){return AL(e)}function yu(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[Iv]||(e[Iv]=new Set)).add(t)}function fd(e,t){t.split(/\s+/).forEach(a=>a&&e.classList.remove(a));const n=e[Iv];n&&(n.delete(t),n.size||(e[Iv]=void 0))}function BP(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let xee=0;function kP(e,t,n,a){const r=e._endId=++xee,s=()=>{r===e._endId&&a()};if(n!=null)return setTimeout(s,n);const{type:o,timeout:i,propCount:c}=B8(e,t);if(!o)return a();const A=o+"end";let d=0;const f=()=>{e.removeEventListener(A,m),s()},m=h=>{h.target===e&&++d>=c&&f()};setTimeout(()=>{d<c&&f()},i+1),e.addEventListener(A,m)}function B8(e,t){const n=window.getComputedStyle(e),a=p=>(n[p]||"").split(", "),r=a(`${id}Delay`),s=a(`${id}Duration`),o=TP(r,s),i=a(`${np}Delay`),c=a(`${np}Duration`),A=TP(i,c);let d=null,f=0,m=0;t===id?o>0&&(d=id,f=o,m=s.length):t===np?A>0&&(d=np,f=A,m=c.length):(f=Math.max(o,A),d=f>0?o>A?id:np:null,m=d?d===id?s.length:c.length:0);const h=d===id&&/\b(?:transform|all)(?:,|$)/.test(a(`${id}Property`).toString());return{type:d,timeout:f,propCount:m,hasTransform:h}}function TP(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,a)=>IP(n)+IP(e[a])))}function IP(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function _S(){return document.body.offsetHeight}function Cee(e,t,n){const a=e[Iv];a&&(t=(t?[t,...a]:[...a]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const C_=Symbol("_vod"),k8=Symbol("_vsh"),ci={name:"show",beforeMount(e,{value:t},{transition:n}){e[C_]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):ap(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:a}){!t!=!n&&(a?t?(a.beforeEnter(e),ap(e,!0),a.enter(e)):a.leave(e,()=>{ap(e,!1)}):ap(e,t))},beforeUnmount(e,{value:t}){ap(e,t)}};function ap(e,t){e.style.display=t?e[C_]:"none",e[k8]=!t}const See=Symbol(""),Eee=/(?:^|;)\s*display\s*:/;function Bee(e,t,n){const a=e.style,r=yr(n);let s=!1;if(n&&!r){if(t)if(yr(t))for(const o of t.split(";")){const i=o.slice(0,o.indexOf(":")).trim();n[i]==null&&Gy(a,i,"")}else for(const o in t)n[o]==null&&Gy(a,o,"");for(const o in n)o==="display"&&(s=!0),Gy(a,o,n[o])}else if(r){if(t!==n){const o=a[See];o&&(n+=";"+o),a.cssText=n,s=Eee.test(n)}}else t&&e.removeAttribute("style");C_ in e&&(e[C_]=s?a.display:"",e[k8]&&(a.display="none"))}const FP=/\s*!important$/;function Gy(e,t,n){if(Sn(n))n.forEach(a=>Gy(e,t,a));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const a=kee(e,t);FP.test(n)?e.setProperty(oA(a),n.replace(FP,""),"important"):e[a]=n}}const PP=["Webkit","Moz","ms"],Ex={};function kee(e,t){const n=Ex[t];if(n)return n;let a=Ho(t);if(a!=="filter"&&a in e)return Ex[t]=a;a=$u(a);for(let r=0;r<PP.length;r++){const s=PP[r]+a;if(s in e)return Ex[t]=s}return t}const DP="http://www.w3.org/1999/xlink";function UP(e,t,n,a,r,s=LJ(t)){a&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(DP,t.slice(6,t.length)):e.setAttributeNS(DP,t,n):n==null||s&&!fL(n)?e.removeAttribute(t):e.setAttribute(t,s?"":Gl(n)?String(n):n)}function RP(e,t,n,a,r){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?x8(n):n);return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const i=s==="OPTION"?e.getAttribute("value")||"":e.value,c=n==null?e.type==="checkbox"?"on":"":String(n);(i!==c||!("_value"in e))&&(e.value=c),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const i=typeof e[t];i==="boolean"?n=fL(n):n==null&&i==="string"?(n="",o=!0):i==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(r||t)}function yc(e,t,n,a){e.addEventListener(t,n,a)}function Tee(e,t,n,a){e.removeEventListener(t,n,a)}const NP=Symbol("_vei");function Iee(e,t,n,a,r=null){const s=e[NP]||(e[NP]={}),o=s[t];if(a&&o)o.value=a;else{const[i,c]=Fee(t);if(a){const A=s[t]=Uee(a,r);yc(e,i,A,c)}else o&&(Tee(e,i,o,c),s[t]=void 0)}}const VP=/(?:Once|Passive|Capture)$/;function Fee(e){let t;if(VP.test(e)){t={};let a;for(;a=e.match(VP);)e=e.slice(0,e.length-a[0].length),t[a[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):oA(e.slice(2)),t]}let Bx=0;const Pee=Promise.resolve(),Dee=()=>Bx||(Pee.then(()=>Bx=0),Bx=Date.now());function Uee(e,t){const n=a=>{if(!a._vts)a._vts=Date.now();else if(a._vts<=n.attached)return;zl(Ree(a,n.value),t,5,[a])};return n.value=e,n.attached=Dee(),n}function Ree(e,t){if(Sn(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(a=>r=>!r._stopped&&a&&a(r))}else return t}const LP=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Nee=(e,t,n,a,r,s)=>{const o=r==="svg";t==="class"?Cee(e,a,o):t==="style"?Bee(e,n,a):K2(t)?QB(t)||Iee(e,t,n,a,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Vee(e,t,a,o))?(RP(e,t,a),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&UP(e,t,a,o,s,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!yr(a))?RP(e,Ho(t),a,s,t):(t==="true-value"?e._trueValue=a:t==="false-value"&&(e._falseValue=a),UP(e,t,a,o))};function Vee(e,t,n,a){if(a)return!!(t==="innerHTML"||t==="textContent"||t in e&&LP(t)&&On(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return LP(t)&&yr(n)?!1:t in e}const T8=new WeakMap,I8=new WeakMap,S_=Symbol("_moveCb"),MP=Symbol("_enterCb"),Lee=e=>(delete e.props.mode,e),Mee=Lee({name:"TransitionGroup",props:Cs({},S8,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=Of(),a=zL();let r,s;return Z2(()=>{if(!r.length)return;const o=e.moveClass||`${e.name||"v"}-move`;if(!Qee(r[0].el,n.vnode.el,o)){r=[];return}r.forEach(Oee),r.forEach(Hee);const i=r.filter($ee);_S(),i.forEach(c=>{const A=c.el,d=A.style;yu(A,o),d.transform=d.webkitTransform=d.transitionDuration="";const f=A[S_]=m=>{m&&m.target!==A||(!m||m.propertyName.endsWith("transform"))&&(A.removeEventListener("transitionend",f),A[S_]=null,fd(A,o))};A.addEventListener("transitionend",f)}),r=[]}),()=>{const o=Cn(e),i=E8(o);let c=o.tag||We;if(r=[],s)for(let A=0;A<s.length;A++){const d=s[A];d.el&&d.el instanceof Element&&(r.push(d),Qd(d,w0(d,i,a,n)),T8.set(d,d.el.getBoundingClientRect()))}s=t.default?tk(t.default()):[];for(let A=0;A<s.length;A++){const d=s[A];d.key!=null&&Qd(d,w0(d,i,a,n))}return l(c,null,s)}}}),uk=Mee;function Oee(e){const t=e.el;t[S_]&&t[S_](),t[MP]&&t[MP]()}function Hee(e){I8.set(e,e.el.getBoundingClientRect())}function $ee(e){const t=T8.get(e),n=I8.get(e),a=t.left-n.left,r=t.top-n.top;if(a||r){const s=e.el.style;return s.transform=s.webkitTransform=`translate(${a}px,${r}px)`,s.transitionDuration="0s",e}}function Qee(e,t,n){const a=e.cloneNode(),r=e[Iv];r&&r.forEach(i=>{i.split(/\s+/).forEach(c=>c&&a.classList.remove(c))}),n.split(/\s+/).forEach(i=>i&&a.classList.add(i)),a.style.display="none";const s=t.nodeType===1?t:t.parentNode;s.appendChild(a);const{hasTransform:o}=B8(a);return s.removeChild(a),o}const Kd=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Sn(t)?n=>cv(t,n):t};function Gee(e){e.target.composing=!0}function OP(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const il=Symbol("_assign"),GA={created(e,{modifiers:{lazy:t,trim:n,number:a}},r){e[il]=Kd(r);const s=a||r.props&&r.props.type==="number";yc(e,t?"change":"input",o=>{if(o.target.composing)return;let i=e.value;n&&(i=i.trim()),s&&(i=d_(i)),e[il](i)}),n&&yc(e,"change",()=>{e.value=e.value.trim()}),t||(yc(e,"compositionstart",Gee),yc(e,"compositionend",OP),yc(e,"change",OP))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:a,trim:r,number:s}},o){if(e[il]=Kd(o),e.composing)return;const i=(s||e.type==="number")&&!/^0\d/.test(e.value)?d_(e.value):e.value,c=t??"";i!==c&&(document.activeElement===e&&e.type!=="range"&&(a&&t===n||r&&e.value.trim()===c)||(e.value=c))}},zee={deep:!0,created(e,t,n){e[il]=Kd(n),yc(e,"change",()=>{const a=e._modelValue,r=Fv(e),s=e.checked,o=e[il];if(Sn(a)){const i=KB(a,r),c=i!==-1;if(s&&!c)o(a.concat(r));else if(!s&&c){const A=[...a];A.splice(i,1),o(A)}}else if(th(a)){const i=new Set(a);s?i.add(r):i.delete(r),o(i)}else o(P8(e,s))})},mounted:HP,beforeUpdate(e,t,n){e[il]=Kd(n),HP(e,t,n)}};function HP(e,{value:t,oldValue:n},a){e._modelValue=t;let r;if(Sn(t))r=KB(t,a.props.value)>-1;else if(th(t))r=t.has(a.props.value);else{if(t===n)return;r=vf(t,P8(e,!0))}e.checked!==r&&(e.checked=r)}const Kee={created(e,{value:t},n){e.checked=vf(t,n.props.value),e[il]=Kd(n),yc(e,"change",()=>{e[il](Fv(e))})},beforeUpdate(e,{value:t,oldValue:n},a){e[il]=Kd(a),t!==n&&(e.checked=vf(t,a.props.value))}},F8={deep:!0,created(e,{value:t,modifiers:{number:n}},a){const r=th(t);yc(e,"change",()=>{const s=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>n?d_(Fv(o)):Fv(o));e[il](e.multiple?r?new Set(s):s:s[0]),e._assigning=!0,xn(()=>{e._assigning=!1})}),e[il]=Kd(a)},mounted(e,{value:t}){$P(e,t)},beforeUpdate(e,t,n){e[il]=Kd(n)},updated(e,{value:t}){e._assigning||$P(e,t)}};function $P(e,t){const n=e.multiple,a=Sn(t);if(!(n&&!a&&!th(t))){for(let r=0,s=e.options.length;r<s;r++){const o=e.options[r],i=Fv(o);if(n)if(a){const c=typeof i;c==="string"||c==="number"?o.selected=t.some(A=>String(A)===String(i)):o.selected=KB(t,i)>-1}else o.selected=t.has(i);else if(vf(Fv(o),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Fv(e){return"_value"in e?e._value:e.value}function P8(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const D8={created(e,t,n){G1(e,t,n,null,"created")},mounted(e,t,n){G1(e,t,n,null,"mounted")},beforeUpdate(e,t,n,a){G1(e,t,n,a,"beforeUpdate")},updated(e,t,n,a){G1(e,t,n,a,"updated")}};function Wee(e,t){switch(e){case"SELECT":return F8;case"TEXTAREA":return GA;default:switch(t){case"checkbox":return zee;case"radio":return Kee;default:return GA}}}function G1(e,t,n,a,r){const o=Wee(e.tagName,n.props&&n.props.type)[r];o&&o(e,t,n,a)}const jee=["ctrl","shift","alt","meta"],qee={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>jee.some(n=>e[`${n}Key`]&&!t.includes(n))},pn=(e,t)=>{const n=e._withMods||(e._withMods={}),a=t.join(".");return n[a]||(n[a]=((r,...s)=>{for(let o=0;o<t.length;o++){const i=qee[t[o]];if(i&&i(r,t))return}return e(r,...s)}))},Yee={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},QP=(e,t)=>{const n=e._withKeys||(e._withKeys={}),a=t.join(".");return n[a]||(n[a]=(r=>{if(!("key"in r))return;const s=oA(r.key);if(t.some(o=>o===s||Yee[o]===s))return e(r)}))},Xee=Cs({patchProp:Nee},_ee);let GP;function U8(){return GP||(GP=HZ(Xee))}const R8=((...e)=>{U8().render(...e)}),Jee=((...e)=>{const t=U8().createApp(...e),{mount:n}=t;return t.mount=a=>{const r=ete(a);if(!r)return;const s=t._component;!On(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,Zee(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},t});function Zee(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function ete(e){return yr(e)?document.querySelector(e):e}function yo(e,t){let n;function a(){n=Hd(),n.run(()=>t.length?t(()=>{n?.stop(),a()}):t())}Ke(e,r=>{r&&!n?a():r||(n?.stop(),n=void 0)},{immediate:!0}),cs(()=>{n?.stop()})}const Ba=typeof window<"u",ck=Ba&&"IntersectionObserver"in window,tte=Ba&&("ontouchstart"in window||window.navigator.maxTouchPoints>0),zP=Ba&&"EyeDropper"in window,nte=Ba&&"matchMedia"in window&&typeof window.matchMedia=="function";function KP(e,t,n){ate(e,t),t.set(e,n)}function ate(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function WP(e,t,n){return e.set(N8(e,t),n),n}function dc(e,t){return e.get(N8(e,t))}function N8(e,t,n){if(typeof e=="function"?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function V8(e,t,n){const a=t.length-1;if(a<0)return e===void 0?n:e;for(let r=0;r<a;r++){if(e==null)return n;e=e[t[r]]}return e==null||e[t[a]]===void 0?n:e[t[a]]}function bs(e,t){if(e===t)return!0;if(e instanceof Date&&t instanceof Date&&e.getTime()!==t.getTime()||e!==Object(e)||t!==Object(t))return!1;const n=Object.keys(e);return n.length!==Object.keys(t).length?!1:n.every(a=>bs(e[a],t[a]))}function hf(e,t,n){return e==null||!t||typeof t!="string"?n:e[t]!==void 0?e[t]:(t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,""),V8(e,t.split("."),n))}function Nr(e,t,n){if(t===!0)return e===void 0?n:e;if(t==null||typeof t=="boolean")return n;if(e!==Object(e)){if(typeof t!="function")return n;const r=t(e,n);return typeof r>"u"?n:r}if(typeof t=="string")return hf(e,t,n);if(Array.isArray(t))return V8(e,t,n);if(typeof t!="function")return n;const a=t(e,n);return typeof a>"u"?n:a}function Bi(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.from({length:e},(n,a)=>t+a)}function Yt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"px";if(e==null||e==="")return;const n=Number(e);return isNaN(n)?String(e):isFinite(n)?`${n}${t}`:void 0}function C0(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function jP(e){let t;return e!==null&&typeof e=="object"&&((t=Object.getPrototypeOf(e))===Object.prototype||t===null)}function dk(e){if(e&&"$el"in e){const t=e.$el;return t?.nodeType===Node.TEXT_NODE?t.nextElementSibling:t}return e}const wS=Object.freeze({enter:"Enter",tab:"Tab",delete:"Delete",esc:"Escape",space:"Space",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",end:"End",home:"Home",del:"Delete",backspace:"Backspace",insert:"Insert",pageup:"PageUp",pagedown:"PageDown",shift:"Shift"});function L8(e){return Object.keys(e)}function zA(e,t){return t.every(n=>e.hasOwnProperty(n))}function Qc(e,t){const n={};for(const a of t)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function bS(e,t,n){const a=Object.create(null),r=Object.create(null);for(const s in e)t.some(o=>o instanceof RegExp?o.test(s):o===s)?a[s]=e[s]:r[s]=e[s];return[a,r]}function $a(e,t){const n={...e};return t.forEach(a=>delete n[a]),n}const M8=/^on[^a-z]/,Ak=e=>M8.test(e),rte=["onAfterscriptexecute","onAnimationcancel","onAnimationend","onAnimationiteration","onAnimationstart","onAuxclick","onBeforeinput","onBeforescriptexecute","onChange","onClick","onCompositionend","onCompositionstart","onCompositionupdate","onContextmenu","onCopy","onCut","onDblclick","onFocusin","onFocusout","onFullscreenchange","onFullscreenerror","onGesturechange","onGestureend","onGesturestart","onGotpointercapture","onInput","onKeydown","onKeypress","onKeyup","onLostpointercapture","onMousedown","onMousemove","onMouseout","onMouseover","onMouseup","onMousewheel","onPaste","onPointercancel","onPointerdown","onPointerenter","onPointerleave","onPointermove","onPointerout","onPointerover","onPointerup","onReset","onSelect","onSubmit","onTouchcancel","onTouchend","onTouchmove","onTouchstart","onTransitioncancel","onTransitionend","onTransitionrun","onTransitionstart","onWheel"],ste=["ArrowUp","ArrowDown","ArrowRight","ArrowLeft","Enter","Escape","Tab"," "];function ote(e){return e.isComposing&&ste.includes(e.key)}function iA(e){const[t,n]=bS(e,[M8]),a=$a(t,rte),[r,s]=bS(n,["class","style","id",/^data-/]);return Object.assign(r,t),Object.assign(s,a),[r,s]}function pr(e){return e==null?[]:Array.isArray(e)?e:[e]}function O8(e,t){let n=0;const a=function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];clearTimeout(n),n=setTimeout(()=>e(...s),$e(t))};return a.clear=()=>{clearTimeout(n)},a.immediate=e,a}function tr(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.max(t,Math.min(n,e))}function qP(e){const t=e.toString().trim();return t.includes(".")?t.length-t.indexOf(".")-1:0}function YP(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0";return e+n.repeat(Math.max(0,t-e.length))}function XP(e,t){return(arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0").repeat(Math.max(0,t-e.length))+e}function ite(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const n=[];let a=0;for(;a<e.length;)n.push(e.substr(a,t)),a+=t;return n}function JP(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;if(e<t)return`${e} B`;const n=t===1024?["Ki","Mi","Gi"]:["k","M","G"];let a=-1;for(;Math.abs(e)>=t&&a<n.length-1;)e/=t,++a;return`${e.toFixed(1)} ${n[a]}B`}function vo(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const a={};for(const r in e)a[r]=e[r];for(const r in t){const s=e[r],o=t[r];if(jP(s)&&jP(o)){a[r]=vo(s,o,n);continue}if(n&&Array.isArray(s)&&Array.isArray(o)){a[r]=n(s,o);continue}a[r]=o}return a}function H8(e){return e.map(t=>t.type===We?H8(t.children):t).flat()}function nf(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(nf.cache.has(e))return nf.cache.get(e);const t=e.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase();return nf.cache.set(e,t),t}nf.cache=new Map;function Jm(e,t){if(!t||typeof t!="object")return[];if(Array.isArray(t))return t.map(n=>Jm(e,n)).flat(1);if(t.suspense)return Jm(e,t.ssContent);if(Array.isArray(t.children))return t.children.map(n=>Jm(e,n)).flat(1);if(t.component){if(Object.getOwnPropertySymbols(t.component.provides).includes(e))return[t.component];if(t.component.subTree)return Jm(e,t.component.subTree).flat(1)}return[]}var km=new WeakMap,IA=new WeakMap;class $8{constructor(t){KP(this,km,[]),KP(this,IA,0),this.size=t}get isFull(){return dc(km,this).length===this.size}push(t){dc(km,this)[dc(IA,this)]=t,WP(IA,this,(dc(IA,this)+1)%this.size)}values(){return dc(km,this).slice(dc(IA,this)).concat(dc(km,this).slice(0,dc(IA,this)))}clear(){dc(km,this).length=0,WP(IA,this,0)}}function lte(e){return"touches"in e?{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}:{clientX:e.clientX,clientY:e.clientY}}function fk(e){const t=is({});_r(()=>{const a=e();for(const r in a)t[r]=a[r]},{flush:"sync"});const n={};for(const a in t)n[a]=Xe(()=>t[a]);return n}function E_(e,t){return e.includes(t)}function Q8(e){return e[2].toLowerCase()+e.slice(3)}const Ns=()=>[Function,Array];function ZP(e,t){return t="on"+$u(t),!!(e[t]||e[`${t}Once`]||e[`${t}Capture`]||e[`${t}OnceCapture`]||e[`${t}CaptureOnce`])}function aw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];if(Array.isArray(e))for(const r of e)r(...n);else typeof e=="function"&&e(...n)}function S0(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=["button","[href]",'input:not([type="hidden"])',"select","textarea","[tabindex]"].map(a=>`${a}${t?':not([tabindex="-1"])':""}:not([disabled])`).join(", ");return[...e.querySelectorAll(n)]}function G8(e,t,n){let a,r=e.indexOf(document.activeElement);const s=t==="next"?1:-1;do r+=s,a=e[r];while((!a||a.offsetParent==null||!(n?.(a)??!0))&&r<e.length&&r>=0);return a}function af(e,t){const n=S0(e);if(t==null)(e===document.activeElement||!e.contains(document.activeElement))&&n[0]?.focus();else if(t==="first")n[0]?.focus();else if(t==="last")n.at(-1)?.focus();else if(typeof t=="number")n[t]?.focus();else{const a=G8(n,t);a?a.focus():af(e,t==="next"?"first":"last")}}function z1(e){return e==null||typeof e=="string"&&e.trim()===""}function z8(){}function Pv(e,t){if(!(Ba&&typeof CSS<"u"&&typeof CSS.supports<"u"&&CSS.supports(`selector(${t})`)))return null;try{return!!e&&e.matches(t)}catch{return null}}function rw(e){return e.some(t=>Gd(t)?t.type===ls?!1:t.type!==We||rw(t.children):!0)?e:null}function kx(e,t,n){return e?.(t)??n?.(t)}function ute(e,t){if(!Ba||e===0)return t(),()=>{};const n=window.setTimeout(t,e);return()=>window.clearTimeout(n)}function cte(e,t){const n=e.clientX,a=e.clientY,r=t.getBoundingClientRect(),s=r.left,o=r.top,i=r.right,c=r.bottom;return n>=s&&n<=i&&a>=o&&a<=c}function B_(){const e=Ht(),t=n=>{e.value=n};return Object.defineProperty(t,"value",{enumerable:!0,get:()=>e.value,set:n=>e.value=n}),Object.defineProperty(t,"el",{enumerable:!0,get:()=>dk(e.value)}),t}function Dv(e){const t=e.key.length===1,n=!e.ctrlKey&&!e.metaKey&&!e.altKey;return t&&n}function xS(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="bigint"}function k_(e){return"\\^$*+?.()|{}[]".includes(e)?`\\${e}`:e}function dte(e,t,n){const a=new RegExp(`[\\d\\-${k_(n)}]`),r=e.split("").filter(o=>a.test(o)).filter((o,i,c)=>i===0&&/[-]/.test(o)||o===n&&i===c.indexOf(o)||/\d/.test(o)).join("");if(t===0)return r.split(n)[0];const s=new RegExp(`${k_(n)}\\d`);if(t!==null&&s.test(r)){const o=r.split(n);return[o[0],o[1].substring(0,t)].join(n)}return r}function Ate(e){const t={};for(const n in e)t[Ho(n)]=e[n];return t}function fte(e){const t=["checked","disabled"];return Object.fromEntries(Object.entries(e).filter(n=>{let[a,r]=n;return t.includes(a)?!!r:r!==void 0}))}const K8=["top","bottom"],mte=["start","end","left","right"];function CS(e,t){let[n,a]=e.split(" ");return a||(a=E_(K8,n)?"start":E_(mte,n)?"top":"center"),{side:SS(n,t),align:SS(a,t)}}function SS(e,t){return e==="start"?t?"right":"left":e==="end"?t?"left":"right":e}function Tx(e){return{side:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.side],align:e.align}}function Ix(e){return{side:e.side,align:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.align]}}function eD(e){return{side:e.align,align:e.side}}function tD(e){return E_(K8,e.side)?"y":"x"}class Iu{constructor(t){let{x:n,y:a,width:r,height:s}=t;this.x=n,this.y=a,this.width=r,this.height=s}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function nD(e,t){return{x:{before:Math.max(0,t.left-e.left),after:Math.max(0,e.right-t.right)},y:{before:Math.max(0,t.top-e.top),after:Math.max(0,e.bottom-t.bottom)}}}function W8(e){return Array.isArray(e)?new Iu({x:e[0],y:e[1],width:0,height:0}):e.getBoundingClientRect()}function vte(e){if(e===document.documentElement)return visualViewport?new Iu({x:visualViewport.scale>1?0:visualViewport.offsetLeft,y:visualViewport.scale>1?0:visualViewport.offsetTop,width:visualViewport.width*visualViewport.scale,height:visualViewport.height*visualViewport.scale}):new Iu({x:0,y:0,width:document.documentElement.clientWidth,height:document.documentElement.clientHeight});{const t=e.getBoundingClientRect();return new Iu({x:t.x,y:t.y,width:e.clientWidth,height:e.clientHeight})}}function mk(e){const t=e.getBoundingClientRect(),n=getComputedStyle(e),a=n.transform;if(a){let r,s,o,i,c;if(a.startsWith("matrix3d("))r=a.slice(9,-1).split(/, /),s=Number(r[0]),o=Number(r[5]),i=Number(r[12]),c=Number(r[13]);else if(a.startsWith("matrix("))r=a.slice(7,-1).split(/, /),s=Number(r[0]),o=Number(r[3]),i=Number(r[4]),c=Number(r[5]);else return new Iu(t);const A=n.transformOrigin,d=t.x-i-(1-s)*parseFloat(A),f=t.y-c-(1-o)*parseFloat(A.slice(A.indexOf(" ")+1)),m=s?t.width/s:e.offsetWidth+1,h=o?t.height/o:e.offsetHeight+1;return new Iu({x:d,y:f,width:m,height:h})}else return new Iu(t)}function KA(e,t,n){if(typeof e.animate>"u")return{finished:Promise.resolve()};let a;try{a=e.animate(t,n)}catch{return{finished:Promise.resolve()}}return typeof a.finished>"u"&&(a.finished=new Promise(r=>{a.onfinish=()=>{r(a)}})),a}const zy=new WeakMap;function hte(e,t){Object.keys(t).forEach(n=>{if(Ak(n)){const a=Q8(n),r=zy.get(e);if(t[n]==null)r?.forEach(s=>{const[o,i]=s;o===a&&(e.removeEventListener(a,i),r.delete(s))});else if(!r||![...r].some(s=>s[0]===a&&s[1]===t[n])){e.addEventListener(a,t[n]);const s=r||new Set;s.add([a,t[n]]),zy.has(e)||zy.set(e,s)}}else t[n]==null?e.removeAttribute(n):e.setAttribute(n,t[n])})}function pte(e,t){Object.keys(t).forEach(n=>{if(Ak(n)){const a=Q8(n),r=zy.get(e);r?.forEach(s=>{const[o,i]=s;o===a&&(e.removeEventListener(a,i),r.delete(s))})}else e.removeAttribute(n)})}const Tm=2.4,aD=.2126729,rD=.7151522,sD=.072175,gte=.55,yte=.58,_te=.57,wte=.62,K1=.03,oD=1.45,bte=5e-4,xte=1.25,Cte=1.25,iD=.078,lD=12.82051282051282,W1=.06,uD=.001;function cD(e,t){const n=(e.r/255)**Tm,a=(e.g/255)**Tm,r=(e.b/255)**Tm,s=(t.r/255)**Tm,o=(t.g/255)**Tm,i=(t.b/255)**Tm;let c=n*aD+a*rD+r*sD,A=s*aD+o*rD+i*sD;if(c<=K1&&(c+=(K1-c)**oD),A<=K1&&(A+=(K1-A)**oD),Math.abs(A-c)<bte)return 0;let d;if(A>c){const f=(A**gte-c**yte)*xte;d=f<uD?0:f<iD?f-f*lD*W1:f-W1}else{const f=(A**wte-c**_te)*Cte;d=f>-uD?0:f>-iD?f-f*lD*W1:f+W1}return d*100}function j8(e,t){t=Array.isArray(t)?t.slice(0,-1).map(n=>`'${n}'`).join(", ")+` or '${t.at(-1)}'`:`'${t}'`}const T_=.20689655172413793,Ste=e=>e>T_**3?Math.cbrt(e):e/(3*T_**2)+4/29,Ete=e=>e>T_?e**3:3*T_**2*(e-4/29);function q8(e){const t=Ste,n=t(e[1]);return[116*n-16,500*(t(e[0]/.95047)-n),200*(n-t(e[2]/1.08883))]}function Y8(e){const t=Ete,n=(e[0]+16)/116;return[t(n+e[1]/500)*.95047,t(n),t(n-e[2]/200)*1.08883]}const Bte=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],kte=e=>e<=.0031308?e*12.92:1.055*e**(1/2.4)-.055,Tte=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],Ite=e=>e<=.04045?e/12.92:((e+.055)/1.055)**2.4;function X8(e){const t=Array(3),n=kte,a=Bte;for(let r=0;r<3;++r)t[r]=Math.round(tr(n(a[r][0]*e[0]+a[r][1]*e[1]+a[r][2]*e[2]))*255);return{r:t[0],g:t[1],b:t[2]}}function vk(e){let{r:t,g:n,b:a}=e;const r=[0,0,0],s=Ite,o=Tte;t=s(t/255),n=s(n/255),a=s(a/255);for(let i=0;i<3;++i)r[i]=o[i][0]*t+o[i][1]*n+o[i][2]*a;return r}function ES(e){return!!e&&/^(#|var\(--|(rgb|hsl)a?\()/.test(e)}function Fte(e){return ES(e)&&!/^((rgb|hsl)a?\()?var\(--/.test(e)}const dD=/^(?<fn>(?:rgb|hsl)a?)\((?<values>.+)\)/,Pte={rgb:(e,t,n,a)=>({r:e,g:t,b:n,a}),rgba:(e,t,n,a)=>({r:e,g:t,b:n,a}),hsl:(e,t,n,a)=>AD({h:e,s:t,l:n,a}),hsla:(e,t,n,a)=>AD({h:e,s:t,l:n,a}),hsv:(e,t,n,a)=>Ru({h:e,s:t,v:n,a}),hsva:(e,t,n,a)=>Ru({h:e,s:t,v:n,a})};function ki(e){if(typeof e=="number")return{r:(e&16711680)>>16,g:(e&65280)>>8,b:e&255};if(typeof e=="string"&&dD.test(e)){const{groups:t}=e.match(dD),{fn:n,values:a}=t,r=a.split(/,\s*|\s*\/\s*|\s+/).map((s,o)=>s.endsWith("%")||o>0&&o<3&&["hsl","hsla","hsv","hsva"].includes(n)?parseFloat(s)/100:parseFloat(s));return Pte[n](...r)}else if(typeof e=="string"){let t=e.startsWith("#")?e.slice(1):e;return[3,4].includes(t.length)?t=t.split("").map(n=>n+n).join(""):[6,8].includes(t.length),t6(t)}else if(typeof e=="object"){if(zA(e,["r","g","b"]))return e;if(zA(e,["h","s","l"]))return Ru(hk(e));if(zA(e,["h","s","v"]))return Ru(e)}throw new TypeError(`Invalid color: ${e==null?e:String(e)||e.constructor.name}
Expected #hex, #hexa, rgb(), rgba(), hsl(), hsla(), object or number`)}function Ru(e){const{h:t,s:n,v:a,a:r}=e,s=i=>{const c=(i+t/60)%6;return a-a*n*Math.max(Math.min(c,4-c,1),0)},o=[s(5),s(3),s(1)].map(i=>Math.round(i*255));return{r:o[0],g:o[1],b:o[2],a:r}}function AD(e){return Ru(hk(e))}function fg(e){if(!e)return{h:0,s:1,v:1,a:1};const t=e.r/255,n=e.g/255,a=e.b/255,r=Math.max(t,n,a),s=Math.min(t,n,a);let o=0;r!==s&&(r===t?o=60*(0+(n-a)/(r-s)):r===n?o=60*(2+(a-t)/(r-s)):r===a&&(o=60*(4+(t-n)/(r-s)))),o<0&&(o=o+360);const i=r===0?0:(r-s)/r,c=[o,i,r];return{h:c[0],s:c[1],v:c[2],a:e.a}}function BS(e){const{h:t,s:n,v:a,a:r}=e,s=a-a*n/2,o=s===1||s===0?0:(a-s)/Math.min(s,1-s);return{h:t,s:o,l:s,a:r}}function hk(e){const{h:t,s:n,l:a,a:r}=e,s=a+n*Math.min(a,1-a),o=s===0?0:2-2*a/s;return{h:t,s:o,v:s,a:r}}function J8(e){let{r:t,g:n,b:a,a:r}=e;return r===void 0?`rgb(${t}, ${n}, ${a})`:`rgba(${t}, ${n}, ${a}, ${r})`}function Z8(e){return J8(Ru(e))}function j1(e){const t=Math.round(e).toString(16);return("00".substr(0,2-t.length)+t).toUpperCase()}function e6(e){let{r:t,g:n,b:a,a:r}=e;return`#${[j1(t),j1(n),j1(a),r!==void 0?j1(Math.round(r*255)):""].join("")}`}function t6(e){e=Ute(e);let[t,n,a,r]=ite(e,2).map(s=>parseInt(s,16));return r=r===void 0?r:r/255,{r:t,g:n,b:a,a:r}}function Dte(e){const t=t6(e);return fg(t)}function n6(e){return e6(Ru(e))}function Ute(e){return e.startsWith("#")&&(e=e.slice(1)),e=e.replace(/([^0-9a-f])/gi,"F"),(e.length===3||e.length===4)&&(e=e.split("").map(t=>t+t).join("")),e.length!==6&&(e=YP(YP(e,6),8,"F")),e}function Rte(e,t){const n=q8(vk(e));return n[0]=n[0]+t*10,X8(Y8(n))}function Nte(e,t){const n=q8(vk(e));return n[0]=n[0]-t*10,X8(Y8(n))}function kS(e){const t=ki(e);return vk(t)[1]}function Vte(e,t){const n=kS(e),a=kS(t),r=Math.max(n,a),s=Math.min(n,a);return(r+.05)/(s+.05)}function a6(e){const t=Math.abs(cD(ki(0),ki(e)));return Math.abs(cD(ki(16777215),ki(e)))>Math.min(t,50)?"#fff":"#000"}function it(e,t){return n=>Object.keys(e).reduce((a,r)=>{const o=typeof e[r]=="object"&&e[r]!=null&&!Array.isArray(e[r])?e[r]:{type:e[r]};return n&&r in n?a[r]={...o,default:n[r]}:a[r]=o,t&&!a[r].source&&(a[r].source=t),a},{})}const tn=it({class:[String,Array,Object],style:{type:[String,Array,Object],default:null}},"component");function Pr(e,t){const n=Of();if(!n)throw new Error(`[Vuetify] ${e} must be called from inside a setup function`);return n}function Qu(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"composables";const t=Pr(e).type;return nf(t?.aliasName||t?.name)}function Lte(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Pr("injectSelf");const{provides:n}=t;if(n&&e in n)return n[e]}const Uv=Symbol.for("vuetify:defaults");function Mte(e){return V(e)}function pk(){const e=Tn(Uv);if(!e)throw new Error("[Vuetify] Could not find defaults instance");return e}function wr(e,t){const n=pk(),a=V(e),r=ae(()=>{if($e(t?.disabled))return n.value;const o=$e(t?.scoped),i=$e(t?.reset),c=$e(t?.root);if(a.value==null&&!(o||i||c))return n.value;let A=vo(a.value,{prev:n.value});if(o)return A;if(i||c){const d=Number(i||1/0);for(let f=0;f<=d&&!(!A||!("prev"in A));f++)A=A.prev;return A&&typeof c=="string"&&c in A&&(A=vo(vo(A,{prev:A}),A[c])),A}return A.prev?vo(A.prev,A):A});return Ha(Uv,r),r}function Ote(e,t){return e.props&&(typeof e.props[t]<"u"||typeof e.props[nf(t)]<"u")}function Hte(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:pk();const a=Pr("useDefaults");if(t=t??a.type.name??a.type.__name,!t)throw new Error("[Vuetify] Could not determine component name");const r=ae(()=>n.value?.[e._as??t]),s=new Proxy(e,{get(c,A){const d=Reflect.get(c,A);if(A==="class"||A==="style")return[r.value?.[A],d].filter(h=>h!=null);if(Ote(a.vnode,A))return d;const f=r.value?.[A];if(f!==void 0)return f;const m=n.value?.global?.[A];return m!==void 0?m:d}}),o=Ht();_r(()=>{if(r.value){const c=Object.entries(r.value).filter(A=>{let[d]=A;return d.startsWith(d[0].toUpperCase())});o.value=c.length?Object.fromEntries(c):void 0}else o.value=void 0});function i(){const c=Lte(Uv,a);Ha(Uv,ae(()=>o.value?vo(c?.value??{},o.value):c?.value))}return{props:s,provideSubDefaults:i}}function Ri(e){if(e._setup=e._setup??e.setup,!e.name)return e;if(e._setup){e.props=it(e.props??{},e.name)();const t=Object.keys(e.props).filter(n=>n!=="class"&&n!=="style");e.filterProps=function(a){return Qc(a,t)},e.props._as=String,e.setup=function(a,r){const s=pk();if(!s.value)return e._setup(a,r);const{props:o,provideSubDefaults:i}=Hte(a,a._as??e.name,s),c=e._setup(o,r);return i(),c}}return e}function yt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return t=>(e?Ri:nk)(t)}function $te(e,t){return t.props=e,t}function Gc(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",n=arguments.length>2?arguments[2]:void 0;return yt()({name:n??$u(Ho(e.replace(/__/g,"-"))),props:{tag:{type:String,default:t},...tn()},setup(a,r){let{slots:s}=r;return()=>au(a.tag,{class:[e,a.class],style:a.style},s.default?.())}})}function r6(e){if(typeof e.getRootNode!="function"){for(;e.parentNode;)e=e.parentNode;return e!==document?null:document}const t=e.getRootNode();return t!==document&&t.getRootNode({composed:!0})!==document?null:t}const E0="cubic-bezier(0.4, 0, 0.2, 1)",Qte="cubic-bezier(0.0, 0, 0.2, 1)",Gte="cubic-bezier(0.4, 0, 1, 1)",zte={linear:e=>e,easeInQuad:e=>e**2,easeOutQuad:e=>e*(2-e),easeInOutQuad:e=>e<.5?2*e**2:-1+(4-2*e)*e,easeInCubic:e=>e**3,easeOutCubic:e=>--e**3+1,easeInOutCubic:e=>e<.5?4*e**3:(e-1)*(2*e-2)*(2*e-2)+1,easeInQuart:e=>e**4,easeOutQuart:e=>1- --e**4,easeInOutQuart:e=>e<.5?8*e**4:1-8*--e**4,easeInQuint:e=>e**5,easeOutQuint:e=>1+--e**5,easeInOutQuint:e=>e<.5?16*e**5:1+16*--e**5};function fD(e,t,n){return Object.keys(e).filter(a=>Ak(a)&&a.endsWith(t)).reduce((a,r)=>(a[r.slice(0,-t.length)]=s=>e[r](s,n(s)),a),{})}function gk(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(;e;){if(t?Kte(e):yk(e))return e;e=e.parentElement}return document.scrollingElement}function I_(e,t){const n=[];if(t&&e&&!t.contains(e))return n;for(;e&&(yk(e)&&n.push(e),e!==t);)e=e.parentElement;return n}function yk(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e),n=t.overflowY==="scroll"||t.overflowY==="auto"&&e.scrollHeight>e.clientHeight,a=t.overflowX==="scroll"||t.overflowX==="auto"&&e.scrollWidth>e.clientWidth;return n||a}function Kte(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e);return["scroll","auto"].includes(t.overflowY)}function Wte(e){let{depth:t,isLast:n,isLastGroup:a,leafLinks:r,separateRoots:s,parentIndentLines:o,variant:i}=e;if(!o||!t)return{leaf:void 0,node:void 0,children:o};if(i==="simple")return{leaf:[...o,"line"],node:[...o,"line"],children:[...o,"line"]};const c=n&&(!a||s||t>1);return{leaf:[...o,c?"last-leaf":"leaf",...r?["leaf-link"]:[]],node:[...o,c?"last-leaf":"leaf"],children:[...o,c?"none":"line"]}}function jte(e){for(;e;){if(window.getComputedStyle(e).position==="fixed")return!0;e=e.offsetParent}return!1}function St(e){const t=Pr("useRender");t.render=e}function ln(e,t,n){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:f=>f,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:f=>f;const s=Pr("useProxiedModel"),o=V(e[t]!==void 0?e[t]:n),i=nf(t),A=ae(i!==t?()=>(e[t],!!((s.vnode.props?.hasOwnProperty(t)||s.vnode.props?.hasOwnProperty(i))&&(s.vnode.props?.hasOwnProperty(`onUpdate:${t}`)||s.vnode.props?.hasOwnProperty(`onUpdate:${i}`)))):()=>(e[t],!!(s.vnode.props?.hasOwnProperty(t)&&s.vnode.props?.hasOwnProperty(`onUpdate:${t}`))));yo(()=>!A.value,()=>{Ke(()=>e[t],f=>{o.value=f})});const d=ae({get(){const f=e[t];return a(A.value?f:o.value)},set(f){const m=r(f),h=Cn(A.value?e[t]:o.value);h===m||a(h)===f||(o.value=m,s?.emit(`update:${t}`,m))}});return Object.defineProperty(d,"externalValue",{get:()=>A.value?e[t]:o.value}),d}const qte={badge:"Badge",open:"Open",close:"Close",dismiss:"Dismiss",confirmEdit:{ok:"OK",cancel:"Cancel"},dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},dateRangeInput:{divider:"to"},datePicker:{itemsSelected:"{0} selected",range:{title:"Select dates",header:"Enter dates"},title:"Select date",header:"Enter date",input:{placeholder:"Enter date"},ariaLabel:{previousMonth:"Previous month",nextMonth:"Next month",selectYear:"Select year",selectDate:"{0}",currentDate:"Today, {0}"}},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more",today:"Today"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action",otp:"Please enter OTP character {0}"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},fileUpload:{title:"Drag and drop files here",divider:"or",browse:"Browse Files"},timePicker:{am:"AM",pm:"PM",title:"Select Time"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Go to page {0}",currentPage:"Page {0}, Current page",first:"First page",last:"Last page"}},stepper:{next:"Next",prev:"Previous"},rating:{ariaLabel:{item:"Rating {0} of {1}"}},loading:"Loading...",infiniteScroll:{loadMore:"Load more",empty:"No more"},rules:{required:"This field is required",email:"Please enter a valid email",number:"This field can only contain numbers",integer:"This field can only contain integer values",capital:"This field can only contain uppercase letters",maxLength:"You must enter a maximum of {0} characters",minLength:"You must enter a minimum of {0} characters",strictLength:"The length of the entered field is invalid",exclude:"The {0} character is not allowed",notEmpty:"Please choose at least one value",pattern:"Invalid format"},hotkey:{then:"then",ctrl:"Ctrl",command:"Command",space:"Space",shift:"Shift",alt:"Alt",enter:"Enter",escape:"Escape",upArrow:"Up Arrow",downArrow:"Down Arrow",leftArrow:"Left Arrow",rightArrow:"Right Arrow",backspace:"Backspace",option:"Option",plus:"plus",shortcut:"Keyboard shortcut: {0}"},video:{play:"Play",pause:"Pause",seek:"Seek",volume:"Volume",showVolume:"Show volume control",mute:"Mute",unmute:"Unmute",enterFullscreen:"Full screen",exitFullscreen:"Exit full screen"},colorPicker:{ariaLabel:{eyedropper:"Select color with eyedropper",hueSlider:"Hue",alphaSlider:"Alpha",redInput:"Red value",greenInput:"Green value",blueInput:"Blue value",alphaInput:"Alpha value",hueInput:"Hue value",saturationInput:"Saturation value",lightnessInput:"Lightness value",hexInput:"HEX value",hexaInput:"HEX with alpha value",changeFormat:"Change color format"}}},mD="$vuetify.",vD=(e,t)=>e.replace(/\{(\d+)\}/g,(n,a)=>String(t[Number(a)])),s6=(e,t,n)=>function(a){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];if(!a.startsWith(mD))return vD(a,s);const i=a.replace(mD,""),c=e.value&&n.value[e.value],A=t.value&&n.value[t.value];let d=hf(c,i,null);return d||(`${a}${e.value}`,d=hf(A,i,null)),d||(d=a),typeof d!="string"&&(d=a),vD(d,s)};function _k(e,t){return(n,a)=>new Intl.NumberFormat([e.value,t.value],a).format(n)}function o6(e,t){return _k(e,t)(.1).includes(",")?",":"."}function Fx(e,t,n){const a=ln(e,t,e[t]??n.value);return a.value=e[t]??n.value,Ke(n,r=>{e[t]==null&&(a.value=n.value)}),a}function i6(e){return t=>{const n=Fx(t,"locale",e.current),a=Fx(t,"fallback",e.fallback),r=Fx(t,"messages",e.messages);return{name:"vuetify",current:n,fallback:a,messages:r,decimalSeparator:Xe(()=>o6(n,a)),t:s6(n,a,r),n:_k(n,a),provide:i6({current:n,fallback:a,messages:r})}}}function Yte(e){const t=Ht(e?.locale??"en"),n=Ht(e?.fallback??"en"),a=V({en:qte,...e?.messages});return{name:"vuetify",current:t,fallback:n,messages:a,decimalSeparator:Xe(()=>e?.decimalSeparator??o6(t,n)),t:s6(t,n,a),n:_k(t,n),provide:i6({current:t,fallback:n,messages:a})}}const Rv=Symbol.for("vuetify:locale");function Xte(e){return e.name!=null}function Jte(e){const t=e?.adapter&&Xte(e?.adapter)?e?.adapter:Yte(e),n=tne(t,e);return{...t,...n}}function Qa(){const e=Tn(Rv);if(!e)throw new Error("[Vuetify] Could not find injected locale instance");return e}function Zte(e){const t=Tn(Rv);if(!t)throw new Error("[Vuetify] Could not find injected locale instance");const n=t.provide(e),a=nne(n,t.rtl,e),r={...n,...a};return Ha(Rv,r),r}function ene(){return{af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!0,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,km:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1}}function tne(e,t){const n=V(t?.rtl??ene()),a=ae(()=>n.value[e.current.value]??!1);return{isRtl:a,rtl:n,rtlClasses:Xe(()=>`v-locale--is-${a.value?"rtl":"ltr"}`)}}function nne(e,t,n){const a=ae(()=>n.rtl??t.value[e.current.value]??!1);return{isRtl:a,rtl:t,rtlClasses:Xe(()=>`v-locale--is-${a.value?"rtl":"ltr"}`)}}function Zr(){const e=Tn(Rv);if(!e)throw new Error("[Vuetify] Could not find injected rtl instance");return{isRtl:e.isRtl,rtlClasses:e.rtlClasses}}function mg(e){const t=e.slice(-2).toUpperCase();switch(!0){case e==="GB-alt-variant":return{firstDay:0,firstWeekSize:4};case e==="001":return{firstDay:1,firstWeekSize:1};case`AG AS BD BR BS BT BW BZ CA CO DM DO ET GT GU HK HN ID IL IN JM JP KE
    KH KR LA MH MM MO MT MX MZ NI NP PA PE PH PK PR PY SA SG SV TH TT TW UM US
    VE VI WS YE ZA ZW`.includes(t):return{firstDay:0,firstWeekSize:1};case`AI AL AM AR AU AZ BA BM BN BY CL CM CN CR CY EC GE HR KG KZ LB LK LV
    MD ME MK MN MY NZ RO RS SI TJ TM TR UA UY UZ VN XK`.includes(t):return{firstDay:1,firstWeekSize:1};case`AD AN AT AX BE BG CH CZ DE DK EE ES FI FJ FO FR GB GF GP GR HU IE IS
    IT LI LT LU MC MQ NL NO PL RE RU SE SK SM VA`.includes(t):return{firstDay:1,firstWeekSize:4};case"AE AF BH DJ DZ EG IQ IR JO KW LY OM QA SD SY".includes(t):return{firstDay:6,firstWeekSize:1};case t==="MV":return{firstDay:5,firstWeekSize:1};case t==="PT":return{firstDay:0,firstWeekSize:4};default:return null}}function ane(e,t,n){const a=[];let r=[];const s=l6(e),o=u6(e),i=n??mg(t)?.firstDay??0,c=(s.getDay()-i+7)%7,A=(o.getDay()-i+7)%7;for(let d=0;d<c;d++){const f=new Date(s);f.setDate(f.getDate()-(c-d)),r.push(f)}for(let d=1;d<=o.getDate();d++){const f=new Date(e.getFullYear(),e.getMonth(),d);r.push(f),r.length===7&&(a.push(r),r=[])}for(let d=1;d<7-A;d++){const f=new Date(o);f.setDate(f.getDate()+d),r.push(f)}return r.length>0&&a.push(r),a}function TS(e,t,n){let a=(n??mg(t)?.firstDay??0)%7;[0,1,2,3,4,5,6].includes(a)||(a=0);const r=new Date(e);for(;r.getDay()!==a;)r.setDate(r.getDate()-1);return r}function rne(e,t){const n=new Date(e),a=((mg(t)?.firstDay??0)+6)%7;for(;n.getDay()!==a;)n.setDate(n.getDate()+1);return n}function l6(e){return new Date(e.getFullYear(),e.getMonth(),1)}function u6(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}function sne(e){const t=e.split("-").map(Number);return new Date(t[0],t[1]-1,t[2])}const one=/^([12]\d{3}-([1-9]|0[1-9]|1[0-2])-([1-9]|0[1-9]|[12]\d|3[01]))$/;function c6(e){if(e==null)return new Date;if(e instanceof Date)return e;if(typeof e=="string"){let t;if(one.test(e))return sne(e);if(t=Date.parse(e),!isNaN(t))return new Date(t)}return null}const hD=new Date(2e3,0,2);function ine(e,t,n){const a=t??mg(e)?.firstDay??0;return Bi(7).map(r=>{const s=new Date(hD);return s.setDate(hD.getDate()+a+r),new Intl.DateTimeFormat(e,{weekday:n??"narrow"}).format(s)})}function lne(e,t,n,a){const r=c6(e)??new Date,s=a?.[t];if(typeof s=="function")return s(r,t,n);let o={};switch(t){case"fullDate":o={year:"numeric",month:"short",day:"numeric"};break;case"fullDateWithWeekday":o={weekday:"long",year:"numeric",month:"long",day:"numeric"};break;case"normalDate":const i=r.getDate(),c=new Intl.DateTimeFormat(n,{month:"long"}).format(r);return`${i} ${c}`;case"normalDateWithWeekday":o={weekday:"short",day:"numeric",month:"short"};break;case"shortDate":o={month:"short",day:"numeric"};break;case"year":o={year:"numeric"};break;case"month":o={month:"long"};break;case"monthShort":o={month:"short"};break;case"monthAndYear":o={month:"long",year:"numeric"};break;case"monthAndDate":o={month:"long",day:"numeric"};break;case"weekday":o={weekday:"long"};break;case"weekdayShort":o={weekday:"short"};break;case"dayOfMonth":return new Intl.NumberFormat(n).format(r.getDate());case"hours12h":o={hour:"numeric",hour12:!0};break;case"hours24h":o={hour:"numeric",hour12:!1};break;case"minutes":o={minute:"numeric"};break;case"seconds":o={second:"numeric"};break;case"fullTime":o={hour:"numeric",minute:"numeric"};break;case"fullTime12h":o={hour:"numeric",minute:"numeric",hour12:!0};break;case"fullTime24h":o={hour:"numeric",minute:"numeric",hour12:!1};break;case"fullDateTime":o={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"};break;case"fullDateTime12h":o={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0};break;case"fullDateTime24h":o={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1};break;case"keyboardDate":o={year:"numeric",month:"2-digit",day:"2-digit"};break;case"keyboardDateTime":return o={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric"},new Intl.DateTimeFormat(n,o).format(r).replace(/, /g," ");case"keyboardDateTime12h":return o={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!0},new Intl.DateTimeFormat(n,o).format(r).replace(/, /g," ");case"keyboardDateTime24h":return o={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!1},new Intl.DateTimeFormat(n,o).format(r).replace(/, /g," ");default:o=s??{timeZone:"UTC",timeZoneName:"short"}}return new Intl.DateTimeFormat(n,o).format(r)}function une(e,t){const n=e.toJsDate(t),a=n.getFullYear(),r=XP(String(n.getMonth()+1),2,"0"),s=XP(String(n.getDate()),2,"0");return`${a}-${r}-${s}`}function cne(e){const[t,n,a]=e.split("-").map(Number);return new Date(t,n-1,a)}function dne(e,t){const n=new Date(e);return n.setMinutes(n.getMinutes()+t),n}function Ane(e,t){const n=new Date(e);return n.setHours(n.getHours()+t),n}function Ky(e,t){const n=new Date(e);return n.setDate(n.getDate()+t),n}function fne(e,t){const n=new Date(e);return n.setDate(n.getDate()+t*7),n}function mne(e,t){const n=new Date(e);return n.setDate(1),n.setMonth(n.getMonth()+t),n}function IS(e){return e.getFullYear()}function vne(e){return e.getMonth()}function hne(e,t,n,a){const r=mg(t),s=n??r?.firstDay??0,o=a??r?.firstWeekSize??1;function i(h){const p=new Date(h,0,1);return 7-FS(p,TS(p,t,s),"days")}let c=IS(e);const A=Ky(TS(e,t,s),6);c<IS(A)&&i(c+1)>=o&&c++;const d=new Date(c,0,1),f=i(c),m=f>=o?Ky(d,f-7):Ky(d,f);return 1+FS(d6(e),P_(m),"weeks")}function pne(e){return e.getDate()}function gne(e){return new Date(e.getFullYear(),e.getMonth()+1,1)}function yne(e){return new Date(e.getFullYear(),e.getMonth()-1,1)}function _ne(e){return e.getHours()}function wne(e){return e.getMinutes()}function bne(e){return new Date(e.getFullYear(),0,1)}function xne(e){return new Date(e.getFullYear(),11,31)}function Cne(e,t){return F_(e,t[0])&&Bne(e,t[1])}function Sne(e){const t=new Date(e);return t instanceof Date&&!isNaN(t.getTime())}function F_(e,t){return e.getTime()>t.getTime()}function Ene(e,t){return F_(P_(e),P_(t))}function Bne(e,t){return e.getTime()<t.getTime()}function pD(e,t){return e.getTime()===t.getTime()}function kne(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function Tne(e,t){return e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function Ine(e,t){return e.getFullYear()===t.getFullYear()}function FS(e,t,n){const a=new Date(e),r=new Date(t);switch(n){case"years":return a.getFullYear()-r.getFullYear();case"quarters":return Math.floor((a.getMonth()-r.getMonth()+(a.getFullYear()-r.getFullYear())*12)/4);case"months":return a.getMonth()-r.getMonth()+(a.getFullYear()-r.getFullYear())*12;case"weeks":return Math.floor((a.getTime()-r.getTime())/(1e3*60*60*24*7));case"days":return Math.floor((a.getTime()-r.getTime())/(1e3*60*60*24));case"hours":return Math.floor((a.getTime()-r.getTime())/(1e3*60*60));case"minutes":return Math.floor((a.getTime()-r.getTime())/(1e3*60));case"seconds":return Math.floor((a.getTime()-r.getTime())/1e3);default:return a.getTime()-r.getTime()}}function Fne(e,t){const n=new Date(e);return n.setHours(t),n}function Pne(e,t){const n=new Date(e);return n.setMinutes(t),n}function Dne(e,t){const n=new Date(e);return n.setMonth(t),n}function Une(e,t){const n=new Date(e);return n.setDate(t),n}function Rne(e,t){const n=new Date(e);return n.setFullYear(t),n}function P_(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0)}function d6(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,59,999)}class Nne{constructor(t){this.locale=t.locale,this.formats=t.formats}date(t){return c6(t)}toJsDate(t){return t}toISO(t){return une(this,t)}parseISO(t){return cne(t)}addMinutes(t,n){return dne(t,n)}addHours(t,n){return Ane(t,n)}addDays(t,n){return Ky(t,n)}addWeeks(t,n){return fne(t,n)}addMonths(t,n){return mne(t,n)}getWeekArray(t,n){const a=n!==void 0?Number(n):void 0;return ane(t,this.locale,a)}startOfWeek(t,n){const a=n!==void 0?Number(n):void 0;return TS(t,this.locale,a)}endOfWeek(t){return rne(t,this.locale)}startOfMonth(t){return l6(t)}endOfMonth(t){return u6(t)}format(t,n){return lne(t,n,this.locale,this.formats)}isEqual(t,n){return pD(t,n)}isValid(t){return Sne(t)}isWithinRange(t,n){return Cne(t,n)}isAfter(t,n){return F_(t,n)}isAfterDay(t,n){return Ene(t,n)}isBefore(t,n){return!F_(t,n)&&!pD(t,n)}isSameDay(t,n){return kne(t,n)}isSameMonth(t,n){return Tne(t,n)}isSameYear(t,n){return Ine(t,n)}setMinutes(t,n){return Pne(t,n)}setHours(t,n){return Fne(t,n)}setMonth(t,n){return Dne(t,n)}setDate(t,n){return Une(t,n)}setYear(t,n){return Rne(t,n)}getDiff(t,n,a){return FS(t,n,a)}getWeekdays(t,n){const a=t!==void 0?Number(t):void 0;return ine(this.locale,a,n)}getYear(t){return IS(t)}getMonth(t){return vne(t)}getWeek(t,n,a){const r=n!==void 0?Number(n):void 0;return hne(t,this.locale,r,a)}getDate(t){return pne(t)}getNextMonth(t){return gne(t)}getPreviousMonth(t){return yne(t)}getHours(t){return _ne(t)}getMinutes(t){return wne(t)}startOfDay(t){return P_(t)}endOfDay(t){return d6(t)}startOfYear(t){return bne(t)}endOfYear(t){return xne(t)}}const A6=Symbol.for("vuetify:date-options"),gD=Symbol.for("vuetify:date-adapter");function Vne(e,t){const n=vo({adapter:Nne,locale:{af:"af-ZA",bg:"bg-BG",ca:"ca-ES",ckb:"",cs:"cs-CZ",de:"de-DE",el:"el-GR",en:"en-US",et:"et-EE",fa:"fa-IR",fi:"fi-FI",hr:"hr-HR",hu:"hu-HU",he:"he-IL",id:"id-ID",it:"it-IT",ja:"ja-JP",ko:"ko-KR",lv:"lv-LV",lt:"lt-LT",nl:"nl-NL",no:"no-NO",pl:"pl-PL",pt:"pt-PT",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",srCyrl:"sr-SP",srLatn:"sr-SP",sv:"sv-SE",th:"th-TH",tr:"tr-TR",az:"az-AZ",uk:"uk-UA",vi:"vi-VN",zhHans:"zh-CN",zhHant:"zh-TW"}},e);return{options:n,instance:f6(n,t)}}function Lne(e,t,n){const a=e.getDiff(e.endOfDay(n??t),e.startOfDay(t),"days"),r=[t];for(let s=1;s<a;s++){const o=e.addDays(t,s);r.push(o)}return n&&r.push(e.endOfDay(n)),r}function f6(e,t){const n=is(typeof e.adapter=="function"?new e.adapter({locale:e.locale[t.current.value]??t.current.value,formats:e.formats}):e.adapter);return Ke(t.current,a=>{n.locale=e.locale[a]??a??n.locale}),n}function vg(){const e=Tn(A6);if(!e)throw new Error("[Vuetify] Could not find injected date options");const t=Qa();return f6(e,t)}const sw=["sm","md","lg","xl","xxl"],PS=Symbol.for("vuetify:display"),yD={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},Mne=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:yD;return vo(yD,e)};function _D(e){return Ba&&!e?window.innerWidth:typeof e=="object"&&e.clientWidth||0}function wD(e){return Ba&&!e?window.innerHeight:typeof e=="object"&&e.clientHeight||0}function bD(e){const t=Ba&&!e?window.navigator.userAgent:"ssr";function n(p){return!!t.match(p)}const a=n(/android/i),r=n(/iphone|ipad|ipod/i),s=n(/cordova/i),o=n(/electron/i),i=n(/chrome/i),c=n(/edge/i),A=n(/firefox/i),d=n(/opera/i),f=n(/win/i),m=n(/mac/i),h=n(/linux/i);return{android:a,ios:r,cordova:s,electron:o,chrome:i,edge:c,firefox:A,opera:d,win:f,mac:m,linux:h,touch:tte,ssr:t==="ssr"}}function One(e,t){const{thresholds:n,mobileBreakpoint:a}=Mne(e),r=Ht(wD(t)),s=Ht(bD(t)),o=is({}),i=Ht(_D(t));function c(){r.value=wD(),i.value=_D()}function A(){c(),s.value=bD()}return _r(()=>{const d=i.value<n.sm,f=i.value<n.md&&!d,m=i.value<n.lg&&!(f||d),h=i.value<n.xl&&!(m||f||d),p=i.value<n.xxl&&!(h||m||f||d),y=i.value>=n.xxl,g=d?"xs":f?"sm":m?"md":h?"lg":p?"xl":"xxl",w=typeof a=="number"?a:n[a],b=i.value<w;o.xs=d,o.sm=f,o.md=m,o.lg=h,o.xl=p,o.xxl=y,o.smAndUp=!d,o.mdAndUp=!(d||f),o.lgAndUp=!(d||f||m),o.xlAndUp=!(d||f||m||h),o.smAndDown=!(m||h||p||y),o.mdAndDown=!(h||p||y),o.lgAndDown=!(p||y),o.xlAndDown=!y,o.name=g,o.height=r.value,o.width=i.value,o.mobile=b,o.mobileBreakpoint=a,o.platform=s.value,o.thresholds=n}),Ba&&(window.addEventListener("resize",c,{passive:!0}),cs(()=>{window.removeEventListener("resize",c)},!0)),{...Mf(o),update:A,ssr:!!t}}const Hf=it({mobile:{type:Boolean,default:!1},mobileBreakpoint:[Number,String]},"display");function dl(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{mobile:null},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qu();const n=Tn(PS);if(!n)throw new Error("Could not find Vuetify display injection");const a=ae(()=>e.mobile?!0:typeof e.mobileBreakpoint=="number"?n.width.value<e.mobileBreakpoint:e.mobileBreakpoint?n.width.value<n.thresholds.value[e.mobileBreakpoint]:e.mobile===null?n.mobile.value:!1),r=Xe(()=>t?{[`${t}--mobile`]:a.value}:{});return{...n,displayClasses:r,mobile:a}}const m6=Symbol.for("vuetify:goto");function v6(){return{container:void 0,duration:300,layout:!1,offset:0,easing:"easeInOutCubic",patterns:zte}}function Hne(e){return wk(e)??(document.scrollingElement||document.body)}function wk(e){return typeof e=="string"?document.querySelector(e):dk(e)}function Px(e,t,n){if(typeof e=="number")return t&&n?-e:e;let a=wk(e),r=0;for(;a;)r+=t?a.offsetLeft:a.offsetTop,a=a.offsetParent;return r}function $ne(e,t){return{rtl:t.isRtl,options:vo(v6(),e)}}async function xD(e,t,n,a){const r=n?"scrollLeft":"scrollTop",s=vo(a?.options??v6(),t),o=a?.rtl.value,i=(typeof e=="number"?e:wk(e))??0,c=s.container==="parent"&&i instanceof HTMLElement?i.parentElement:Hne(s.container),A=typeof s.easing=="function"?s.easing:s.patterns[s.easing];if(!A)throw new TypeError(`Easing function "${s.easing}" not found.`);let d;if(typeof i=="number")d=Px(i,n,o);else if(d=Px(i,n,o)-Px(c,n,o),s.layout){const p=window.getComputedStyle(i).getPropertyValue("--v-layout-top");p&&(d-=parseInt(p,10))}d+=s.offset,d=Gne(c,d,!!o,!!n);const f=c[r]??0;if(d===f)return Promise.resolve(d);const m=performance.now();return new Promise(h=>requestAnimationFrame(function p(y){const w=(y-m)/s.duration,b=Math.floor(f+(d-f)*A(tr(w,0,1)));if(c[r]=b,w>=1&&Math.abs(b-c[r])<10)return h(d);if(w>2)return h(c[r]);requestAnimationFrame(p)}))}function Qne(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=Tn(m6),{isRtl:n}=Zr();if(!t)throw new Error("[Vuetify] Could not find injected goto instance");const a={...t,rtl:Xe(()=>t.rtl.value||n.value)};async function r(s,o){return xD(s,vo(e,o),!1,a)}return r.horizontal=async(s,o)=>xD(s,vo(e,o),!0,a),r}function Gne(e,t,n,a){const{scrollWidth:r,scrollHeight:s}=e,[o,i]=e===document.scrollingElement?[window.innerWidth,window.innerHeight]:[e.offsetWidth,e.offsetHeight];let c,A;return a?n?(c=-(r-o),A=0):(c=0,A=r-o):(c=0,A=s+-i),tr(t,c,A)}const zne={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sortAsc:"mdi-arrow-up",sortDesc:"mdi-arrow-down",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus",calendar:"mdi-calendar",treeviewCollapse:"mdi-menu-down",treeviewExpand:"mdi-menu-right",eyeDropper:"mdi-eyedropper",upload:"mdi-cloud-upload",color:"mdi-palette",command:"mdi-apple-keyboard-command",ctrl:"mdi-apple-keyboard-control",space:"mdi-keyboard-space",shift:"mdi-apple-keyboard-shift",alt:"mdi-apple-keyboard-option",enter:"mdi-keyboard-return",arrowup:"mdi-arrow-up",arrowdown:"mdi-arrow-down",arrowleft:"mdi-arrow-left",arrowright:"mdi-arrow-right",backspace:"mdi-backspace",play:"mdi-play",pause:"mdi-pause",fullscreen:"mdi-fullscreen",fullscreenExit:"mdi-fullscreen-exit",volumeHigh:"mdi-volume-high",volumeMedium:"mdi-volume-medium",volumeLow:"mdi-volume-low",volumeOff:"mdi-volume-variant-off"},Kne={component:e=>au(xk,{...e,class:"mdi"})},An=[String,Function,Object,Array],DS=Symbol.for("vuetify:icons"),ow=it({icon:{type:An},tag:{type:[String,Object,Function],required:!0}},"icon"),US=yt()({name:"VComponentIcon",props:ow(),setup(e,t){let{slots:n}=t;return()=>{const a=e.icon;return l(e.tag,null,{default:()=>[e.icon?l(a,null,null):n.default?.()]})}}}),bk=Ri({name:"VSvgIcon",inheritAttrs:!1,props:ow(),setup(e,t){let{attrs:n}=t;return()=>l(e.tag,Ue(n,{style:null}),{default:()=>[v("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[Array.isArray(e.icon)?e.icon.map(a=>Array.isArray(a)?v("path",{d:a[0],"fill-opacity":a[1]},null):v("path",{d:a},null)):v("path",{d:e.icon},null)])]})}}),Wne=Ri({name:"VLigatureIcon",props:ow(),setup(e){return()=>l(e.tag,null,{default:()=>[e.icon]})}}),xk=Ri({name:"VClassIcon",props:ow(),setup(e){return()=>l(e.tag,{class:ct(e.icon)},null)}});function jne(){return{svg:{component:bk},class:{component:xk}}}function qne(e){const t=jne(),n=e?.defaultSet??"mdi";return n==="mdi"&&!t.mdi&&(t.mdi=Kne),vo({defaultSet:n,sets:t,aliases:{...zne,vuetify:["M8.2241 14.2009L12 21L22 3H14.4459L8.2241 14.2009Z",["M7.26303 12.4733L7.00113 12L2 3H12.5261C12.5261 3 12.5261 3 12.5261 3L7.26303 12.4733Z",.6]],"vuetify-outline":"svg:M7.26 12.47 12.53 3H2L7.26 12.47ZM14.45 3 8.22 14.2 12 21 22 3H14.45ZM18.6 5 12 16.88 10.51 14.2 15.62 5ZM7.26 8.35 5.4 5H9.13L7.26 8.35Z","vuetify-play":["m6.376 13.184-4.11-7.192C1.505 4.66 2.467 3 4.003 3h8.532l-.953 1.576-.006.01-.396.677c-.429.732-.214 1.507.194 2.015.404.503 1.092.878 1.869.806a3.72 3.72 0 0 1 1.005.022c.276.053.434.143.523.237.138.146.38.635-.25 2.09-.893 1.63-1.553 1.722-1.847 1.677-.213-.033-.468-.158-.756-.406a4.95 4.95 0 0 1-.8-.927c-.39-.564-1.04-.84-1.66-.846-.625-.006-1.316.27-1.693.921l-.478.826-.911 1.506Z",["M9.093 11.552c.046-.079.144-.15.32-.148a.53.53 0 0 1 .43.207c.285.414.636.847 1.046 1.2.405.35.914.662 1.516.754 1.334.205 2.502-.698 3.48-2.495l.014-.028.013-.03c.687-1.574.774-2.852-.005-3.675-.37-.391-.861-.586-1.333-.676a5.243 5.243 0 0 0-1.447-.044c-.173.016-.393-.073-.54-.257-.145-.18-.127-.316-.082-.392l.393-.672L14.287 3h5.71c1.536 0 2.499 1.659 1.737 2.992l-7.997 13.996c-.768 1.344-2.706 1.344-3.473 0l-3.037-5.314 1.377-2.278.004-.006.004-.007.481-.831Z",.6]]}},e)}const Yne=e=>{const t=Tn(DS);if(!t)throw new Error("Missing Vuetify Icons provide!");return{iconData:ae(()=>{const a=Du(e);if(!a)return{component:US};let r=a;if(typeof r=="string"&&(r=r.trim(),r.startsWith("$")&&(r=t.aliases?.[r.slice(1)])),Array.isArray(r))return{component:bk,icon:r};if(typeof r!="string")return{component:US,icon:r};const s=Object.keys(t.sets).find(c=>typeof r=="string"&&r.startsWith(`${c}:`)),o=s?r.slice(s.length+1):r;return{component:t.sets[s??t.defaultSet].component,icon:o}})}},B0=Symbol.for("vuetify:theme"),la=it({theme:String},"theme");function CD(){return{defaultTheme:"light",prefix:"v-",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-bright":"#FFFFFF","surface-light":"#EEEEEE","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#1867C0","primary-darken-1":"#1F5592",secondary:"#48A9A6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#EEEEEE","theme-on-kbd":"#000000","theme-code":"#F5F5F5","theme-on-code":"#000000"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-bright":"#ccbfd6","surface-light":"#424242","surface-variant":"#c8c8c8","on-surface-variant":"#000000",primary:"#2196F3","primary-darken-1":"#277CC1",secondary:"#54B6B2","secondary-darken-1":"#48A9A6",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":1,"medium-emphasis-opacity":.7,"disabled-opacity":.5,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"theme-kbd":"#424242","theme-on-kbd":"#FFFFFF","theme-code":"#343434","theme-on-code":"#CCCCCC"}}},stylesheetId:"vuetify-theme-stylesheet",scoped:!1,unimportant:!1,utilities:!0}}function Xne(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:CD();const t=CD();if(!e)return{...t,isDisabled:!0};const n={};for(const[a,r]of Object.entries(e.themes??{})){const s=r.dark||a==="dark"?t.themes?.dark:t.themes?.light;n[a]=vo(s,r)}return vo(t,{...e,themes:n})}function FA(e,t,n,a){e.push(`${tae(t,a)} {
`,...n.map(r=>`  ${r};
`),`}
`)}function SD(e,t){const n=e.dark?2:1,a=e.dark?1:2,r=[];for(const[s,o]of Object.entries(e.colors)){const i=ki(o);r.push(`--${t}theme-${s}: ${i.r},${i.g},${i.b}`),s.startsWith("on-")||r.push(`--${t}theme-${s}-overlay-multiplier: ${kS(o)>.18?n:a}`)}for(const[s,o]of Object.entries(e.variables)){const i=typeof o=="string"&&o.startsWith("#")?ki(o):void 0,c=i?`${i.r}, ${i.g}, ${i.b}`:void 0;r.push(`--${t}${s}: ${c??o}`)}return r}function Jne(e,t,n){const a={};if(n)for(const r of["lighten","darken"]){const s=r==="lighten"?Rte:Nte;for(const o of Bi(n[r],1))a[`${e}-${r}-${o}`]=e6(s(ki(t),o))}return a}function Zne(e,t){if(!t)return{};let n={};for(const a of t.colors){const r=e[a];r&&(n={...n,...Jne(a,r,t)})}return n}function eae(e){const t={};for(const n of Object.keys(e)){if(n.startsWith("on-")||e[`on-${n}`])continue;const a=`on-${n}`,r=ki(e[n]);t[a]=a6(r)}return t}function tae(e,t){if(!t)return e;const n=`:where(${t})`;return e===":root"?n:`${n} ${e}`}function nae(e,t,n){const a=aae(e,t);a&&(a.innerHTML=n)}function aae(e,t){if(!Ba)return null;let n=document.getElementById(e);return n||(n=document.createElement("style"),n.id=e,n.type="text/css",t&&n.setAttribute("nonce",t),document.head.appendChild(n)),n}function rae(e){const t=Xne(e),n=Ht(t.defaultTheme),a=V(t.themes),r=Ht("light"),s=ae({get(){return n.value==="system"?r.value:n.value},set(w){n.value=w}}),o=ae(()=>{const w={};for(const[b,x]of Object.entries(a.value)){const T={...x.colors,...Zne(x.colors,t.variations)};w[b]={...x,colors:{...T,...eae(T)}}}return w}),i=Xe(()=>o.value[s.value]),c=Xe(()=>n.value==="system"),A=ae(()=>{const w=[],b=t.unimportant?"":" !important",x=t.scoped?t.prefix:"";i.value?.dark&&FA(w,":root",["color-scheme: dark"],t.scope),FA(w,":root",SD(i.value,t.prefix),t.scope);for(const[T,F]of Object.entries(o.value))FA(w,`.${t.prefix}theme--${T}`,[`color-scheme: ${F.dark?"dark":"normal"}`,...SD(F,t.prefix)],t.scope);if(t.utilities){const T=[],F=[],k=new Set(Object.values(o.value).flatMap(S=>Object.keys(S.colors)));for(const S of k)S.startsWith("on-")?FA(F,`.${S}`,[`color: rgb(var(--${t.prefix}theme-${S}))${b}`],t.scope):(FA(T,`.${x}bg-${S}`,[`--${t.prefix}theme-overlay-multiplier: var(--${t.prefix}theme-${S}-overlay-multiplier)`,`background-color: rgb(var(--${t.prefix}theme-${S}))${b}`,`color: rgb(var(--${t.prefix}theme-on-${S}))${b}`],t.scope),FA(F,`.${x}text-${S}`,[`color: rgb(var(--${t.prefix}theme-${S}))${b}`],t.scope),FA(F,`.${x}border-${S}`,[`--${t.prefix}border-color: var(--${t.prefix}theme-${S})`],t.scope));w.push(...T,...F)}return w.map((T,F)=>F===0?T:`    ${T}`).join("")}),d=Xe(()=>t.isDisabled?void 0:`${t.prefix}theme--${s.value}`),f=Xe(()=>Object.keys(o.value));if(nte){let b=function(){r.value=w.matches?"dark":"light"};const w=window.matchMedia("(prefers-color-scheme: dark)");b(),w.addEventListener("change",b,{passive:!0}),pL()&&cs(()=>{w.removeEventListener("change",b)})}function m(w){if(t.isDisabled)return;const b=w._context.provides.usehead;if(b){let x=function(){return{style:[{textContent:A.value,id:t.stylesheetId,nonce:t.cspNonce||!1}]}};if(b.push){const T=b.push(x);Ba&&Ke(A,()=>{T.patch(x)})}else Ba?(b.addHeadObjs(Xe(x)),_r(()=>b.updateDOM())):b.addHeadObjs(x())}else{let x=function(){nae(t.stylesheetId,t.cspNonce,A.value)};Ba?Ke(A,x,{immediate:!0}):x()}}function h(w){w!=="system"&&!f.value.includes(w)||(s.value=w)}function p(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:f.value;const b=w.indexOf(s.value),x=b===-1?0:(b+1)%w.length;h(w[x])}function y(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["light","dark"];p(w)}const g=new Proxy(s,{get(w,b){return Reflect.get(w,b)},set(w,b,x){return b==="value"&&j8(`theme.global.name.value = ${x}`,`theme.change('${x}')`),Reflect.set(w,b,x)}});return{install:m,change:h,cycle:p,toggle:y,isDisabled:t.isDisabled,isSystem:c,name:s,themes:a,current:i,computedThemes:o,prefix:t.prefix,themeClasses:d,styles:A,global:{name:g,current:i}}}function ka(e){Pr("provideTheme");const t=Tn(B0,null);if(!t)throw new Error("Could not find Vuetify theme injection");const n=Xe(()=>e.theme??t.name.value),a=Xe(()=>t.themes.value[n.value]),r=Xe(()=>t.isDisabled?void 0:`${t.prefix}theme--${n.value}`),s={...t,name:n,current:a,themeClasses:r};return Ha(B0,s),s}function Ck(){Pr("useTheme");const e=Tn(B0,null);if(!e)throw new Error("Could not find Vuetify theme injection");return e}function Kl(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"content";const n=B_(),a=V();if(Ba){const r=new ResizeObserver(s=>{e?.(s,r),s.length&&(t==="content"?a.value=s[0].contentRect:a.value=s[0].target.getBoundingClientRect())});da(()=>{r.disconnect()}),Ke(()=>n.el,(s,o)=>{o&&(r.unobserve(o),a.value=void 0),s&&r.observe(s)},{flush:"post"})}return{resizeRef:n,contentRect:ah(a)}}const k0=Symbol.for("vuetify:layout"),h6=Symbol.for("vuetify:layout-item"),ED=1e3,p6=it({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),$f=it({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function g6(){const e=Tn(k0);if(!e)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:e.getLayoutItem,mainRect:e.mainRect,mainStyles:e.mainStyles}}function Qf(e){const t=Tn(k0);if(!t)throw new Error("[Vuetify] Could not find injected layout");const n=e.id??`layout-item-${Go()}`,a=Pr("useLayoutItem");Ha(h6,{id:n});const r=Ht(!1);X2(()=>r.value=!0),cg(()=>r.value=!1);const{layoutItemStyles:s,layoutItemScrimStyles:o}=t.register(a,{...e,active:ae(()=>r.value?!1:e.active.value),id:n});return da(()=>t.unregister(n)),{layoutItemStyles:s,layoutRect:t.layoutRect,layoutItemScrimStyles:o}}const sae=(e,t,n,a)=>{let r={top:0,left:0,right:0,bottom:0};const s=[{id:"",layer:{...r}}];for(const o of e){const i=t.get(o),c=n.get(o),A=a.get(o);if(!i||!c||!A)continue;const d={...r,[i.value]:parseInt(r[i.value],10)+(A.value?parseInt(c.value,10):0)};s.push({id:o,layer:d}),r=d}return s};function y6(e){const t=Tn(k0,null),n=ae(()=>t?t.rootZIndex.value-100:ED),a=V([]),r=is(new Map),s=is(new Map),o=is(new Map),i=is(new Map),c=is(new Map),{resizeRef:A,contentRect:d}=Kl(),f=ae(()=>{const k=new Map,S=e.overlaps??[];for(const E of S.filter(C=>C.includes(":"))){const[C,D]=E.split(":");if(!a.value.includes(C)||!a.value.includes(D))continue;const P=r.get(C),O=r.get(D),H=s.get(C),ie=s.get(D);!P||!O||!H||!ie||(k.set(D,{position:P.value,amount:parseInt(H.value,10)}),k.set(C,{position:O.value,amount:-parseInt(ie.value,10)}))}return k}),m=ae(()=>{const k=[...new Set([...o.values()].map(E=>E.value))].sort((E,C)=>E-C),S=[];for(const E of k){const C=a.value.filter(D=>o.get(D)?.value===E);S.push(...C)}return sae(S,r,s,i)}),h=ae(()=>!Array.from(c.values()).some(k=>k.value)),p=ae(()=>m.value[m.value.length-1].layer),y=Xe(()=>({"--v-layout-left":Yt(p.value.left),"--v-layout-right":Yt(p.value.right),"--v-layout-top":Yt(p.value.top),"--v-layout-bottom":Yt(p.value.bottom),...h.value?void 0:{transition:"none"}})),g=ae(()=>m.value.slice(1).map((k,S)=>{let{id:E}=k;const{layer:C}=m.value[S],D=s.get(E),P=r.get(E);return{id:E,...C,size:Number(D.value),position:P.value}})),w=k=>g.value.find(S=>S.id===k),b=Pr("createLayout"),x=Ht(!1);un(()=>{x.value=!0}),Ha(k0,{register:(k,S)=>{let{id:E,order:C,position:D,layoutSize:P,elementSize:O,active:H,disableTransitions:ie,absolute:Ae}=S;o.set(E,C),r.set(E,D),s.set(E,P),i.set(E,H),ie&&c.set(E,ie);const J=Jm(h6,b?.vnode).indexOf(k);J>-1?a.value.splice(J,0,E):a.value.push(E);const ue=ae(()=>g.value.findIndex(L=>L.id===E)),ne=ae(()=>n.value+m.value.length*2-ue.value*2),Y=ae(()=>{const L=D.value==="left"||D.value==="right",N=D.value==="right",q=D.value==="bottom",Q=O.value??P.value,ee=Q===0?"%":"px",z={[D.value]:0,zIndex:ne.value,transform:`translate${L?"X":"Y"}(${(H.value?0:-(Q===0?100:Q))*(N||q?-1:1)}${ee})`,position:Ae.value||n.value!==ED?"absolute":"fixed",...h.value?void 0:{transition:"none"}};if(!x.value)return z;const X=g.value[ue.value],le=f.value.get(E);return le&&(X[le.position]+=le.amount),{...z,height:L?`calc(100% - ${X.top}px - ${X.bottom}px)`:O.value?`${O.value}px`:void 0,left:N?void 0:`${X.left}px`,right:N?`${X.right}px`:void 0,top:D.value!=="bottom"?`${X.top}px`:void 0,bottom:D.value!=="top"?`${X.bottom}px`:void 0,width:L?O.value?`${O.value}px`:void 0:`calc(100% - ${X.left}px - ${X.right}px)`}}),te=ae(()=>({zIndex:ne.value-1}));return{layoutItemStyles:Y,layoutItemScrimStyles:te,zIndex:ne}},unregister:k=>{o.delete(k),r.delete(k),s.delete(k),i.delete(k),c.delete(k),a.value=a.value.filter(S=>S!==k)},mainRect:p,mainStyles:y,getLayoutItem:w,items:g,layoutRect:d,rootZIndex:n});const T=Xe(()=>["v-layout",{"v-layout--full-height":e.fullHeight}]),F=Xe(()=>({zIndex:t?n.value:void 0,position:t?"relative":void 0,overflow:t?"hidden":void 0}));return{layoutClasses:T,layoutStyles:F,getLayoutItem:w,items:g,layoutRect:d,layoutRef:A}}function _6(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:t,...n}=e,a=vo(t,n),{aliases:r={},components:s={},directives:o={}}=a,i=Hd();return i.run(()=>{const c=Mte(a.defaults),A=One(a.display,a.ssr),d=rae(a.theme),f=qne(a.icons),m=Jte(a.locale),h=Vne(a.date,m),p=$ne(a.goTo,m);function y(w){for(const x in o)w.directive(x,o[x]);for(const x in s)w.component(x,s[x]);for(const x in r)w.component(x,Ri({...r[x],name:x,aliasName:r[x].name}));const b=Hd();if(b.run(()=>{d.install(w)}),w.onUnmount(()=>b.stop()),w.provide(Uv,c),w.provide(PS,A),w.provide(B0,d),w.provide(DS,f),w.provide(Rv,m),w.provide(A6,h.options),w.provide(gD,h.instance),w.provide(m6,p),Ba&&a.ssr)if(w.$nuxt)w.$nuxt.hook("app:suspense:resolve",()=>{A.update()});else{const{mount:x}=w;w.mount=function(){const T=x(...arguments);return xn(()=>A.update()),w.mount=x,T}}w.mixin({computed:{$vuetify(){return is({defaults:Im.call(this,Uv),display:Im.call(this,PS),theme:Im.call(this,B0),icons:Im.call(this,DS),locale:Im.call(this,Rv),date:Im.call(this,gD)})}}})}function g(){i.stop()}return{install:y,unmount:g,defaults:c,display:A,theme:d,icons:f,locale:m,date:h,goTo:p}})}const oae="3.9.7";_6.version=oae;function Im(e){const t=this.$,n=t.parent?.provides??t.vnode.appContext?.provides;if(n&&e in n)return n[e]}function iae(){return w6().__VUE_DEVTOOLS_GLOBAL_HOOK__}function w6(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const lae=typeof Proxy=="function",uae="devtools-plugin:setup",cae="plugin:settings:set";let Fm,RS;function dae(){var e;return Fm!==void 0||(typeof window<"u"&&window.performance?(Fm=!0,RS=window.performance):typeof globalThis<"u"&&(!((e=globalThis.perf_hooks)===null||e===void 0)&&e.performance)?(Fm=!0,RS=globalThis.perf_hooks.performance):Fm=!1),Fm}function Aae(){return dae()?RS.now():Date.now()}class fae{constructor(t,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=n;const a={};if(t.settings)for(const o in t.settings){const i=t.settings[o];a[o]=i.defaultValue}const r=`__vue-devtools-plugin-settings__${t.id}`;let s=Object.assign({},a);try{const o=localStorage.getItem(r),i=JSON.parse(o);Object.assign(s,i)}catch{}this.fallbacks={getSettings(){return s},setSettings(o){try{localStorage.setItem(r,JSON.stringify(o))}catch{}s=o},now(){return Aae()}},n&&n.on(cae,(o,i)=>{o===this.plugin.id&&this.fallbacks.setSettings(i)}),this.proxiedOn=new Proxy({},{get:(o,i)=>this.target?this.target.on[i]:(...c)=>{this.onQueue.push({method:i,args:c})}}),this.proxiedTarget=new Proxy({},{get:(o,i)=>this.target?this.target[i]:i==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(i)?(...c)=>(this.targetQueue.push({method:i,args:c,resolve:()=>{}}),this.fallbacks[i](...c)):(...c)=>new Promise(A=>{this.targetQueue.push({method:i,args:c,resolve:A})})})}async setRealTarget(t){this.target=t;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function mae(e,t){const n=e,a=w6(),r=iae(),s=lae&&n.enableEarlyProxy;if(r&&(a.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!s))r.emit(uae,e,t);else{const o=s?new fae(n,r):null;(a.__VUE_DEVTOOLS_PLUGINS__=a.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:t,proxy:o}),o&&t(o.proxiedTarget)}}var b6="store";function Rn(e){return e===void 0&&(e=null),Tn(e!==null?e:b6)}function rh(e,t){Object.keys(e).forEach(function(n){return t(e[n],n)})}function vae(e){return e!==null&&typeof e=="object"}function hae(e){return e&&typeof e.then=="function"}function pae(e,t){return function(){return e(t)}}function x6(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var a=t.indexOf(e);a>-1&&t.splice(a,1)}}function C6(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;iw(e,n,[],e._modules.root,!0),Sk(e,n,t)}function Sk(e,t,n){var a=e._state,r=e._scope;e.getters={},e._makeLocalGettersCache=Object.create(null);var s=e._wrappedGetters,o={},i={},c=Hd(!0);c.run(function(){rh(s,function(A,d){o[d]=pae(A,e),i[d]=ae(function(){return o[d]()}),Object.defineProperty(e.getters,d,{get:function(){return i[d].value},enumerable:!0})})}),e._state=is({data:t}),e._scope=c,e.strict&&bae(e),a&&n&&e._withCommit(function(){a.data=null}),r&&r.stop()}function iw(e,t,n,a,r){var s=!n.length,o=e._modules.getNamespace(n);if(a.namespaced&&(e._modulesNamespaceMap[o],e._modulesNamespaceMap[o]=a),!s&&!r){var i=Ek(t,n.slice(0,-1)),c=n[n.length-1];e._withCommit(function(){i[c]=a.state})}var A=a.context=gae(e,o,n);a.forEachMutation(function(d,f){var m=o+f;yae(e,m,d,A)}),a.forEachAction(function(d,f){var m=d.root?f:o+f,h=d.handler||d;_ae(e,m,h,A)}),a.forEachGetter(function(d,f){var m=o+f;wae(e,m,d,A)}),a.forEachChild(function(d,f){iw(e,t,n.concat(f),d,r)})}function gae(e,t,n){var a=t==="",r={dispatch:a?e.dispatch:function(s,o,i){var c=D_(s,o,i),A=c.payload,d=c.options,f=c.type;return(!d||!d.root)&&(f=t+f),e.dispatch(f,A)},commit:a?e.commit:function(s,o,i){var c=D_(s,o,i),A=c.payload,d=c.options,f=c.type;(!d||!d.root)&&(f=t+f),e.commit(f,A,d)}};return Object.defineProperties(r,{getters:{get:a?function(){return e.getters}:function(){return S6(e,t)}},state:{get:function(){return Ek(e.state,n)}}}),r}function S6(e,t){if(!e._makeLocalGettersCache[t]){var n={},a=t.length;Object.keys(e.getters).forEach(function(r){if(r.slice(0,a)===t){var s=r.slice(a);Object.defineProperty(n,s,{get:function(){return e.getters[r]},enumerable:!0})}}),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}function yae(e,t,n,a){var r=e._mutations[t]||(e._mutations[t]=[]);r.push(function(o){n.call(e,a.state,o)})}function _ae(e,t,n,a){var r=e._actions[t]||(e._actions[t]=[]);r.push(function(o){var i=n.call(e,{dispatch:a.dispatch,commit:a.commit,getters:a.getters,state:a.state,rootGetters:e.getters,rootState:e.state},o);return hae(i)||(i=Promise.resolve(i)),e._devtoolHook?i.catch(function(c){throw e._devtoolHook.emit("vuex:error",c),c}):i})}function wae(e,t,n,a){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(s){return n(a.state,a.getters,s.state,s.getters)})}function bae(e){Ke(function(){return e._state.data},function(){},{deep:!0,flush:"sync"})}function Ek(e,t){return t.reduce(function(n,a){return n[a]},e)}function D_(e,t,n){return vae(e)&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}var xae="vuex bindings",BD="vuex:mutations",Dx="vuex:actions",Pm="vuex",Cae=0;function Sae(e,t){mae({id:"org.vuejs.vuex",app:e,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[xae]},function(n){n.addTimelineLayer({id:BD,label:"Vuex Mutations",color:kD}),n.addTimelineLayer({id:Dx,label:"Vuex Actions",color:kD}),n.addInspector({id:Pm,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(a){if(a.app===e&&a.inspectorId===Pm)if(a.filter){var r=[];T6(r,t._modules.root,a.filter,""),a.rootNodes=r}else a.rootNodes=[k6(t._modules.root,"")]}),n.on.getInspectorState(function(a){if(a.app===e&&a.inspectorId===Pm){var r=a.nodeId;S6(t,r),a.state=kae(Iae(t._modules,r),r==="root"?t.getters:t._makeLocalGettersCache,r)}}),n.on.editInspectorState(function(a){if(a.app===e&&a.inspectorId===Pm){var r=a.nodeId,s=a.path;r!=="root"&&(s=r.split("/").filter(Boolean).concat(s)),t._withCommit(function(){a.set(t._state.data,s,a.state.value)})}}),t.subscribe(function(a,r){var s={};a.payload&&(s.payload=a.payload),s.state=r,n.notifyComponentUpdate(),n.sendInspectorTree(Pm),n.sendInspectorState(Pm),n.addTimelineEvent({layerId:BD,event:{time:Date.now(),title:a.type,data:s}})}),t.subscribeAction({before:function(a,r){var s={};a.payload&&(s.payload=a.payload),a._id=Cae++,a._time=Date.now(),s.state=r,n.addTimelineEvent({layerId:Dx,event:{time:a._time,title:a.type,groupId:a._id,subtitle:"start",data:s}})},after:function(a,r){var s={},o=Date.now()-a._time;s.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},a.payload&&(s.payload=a.payload),s.state=r,n.addTimelineEvent({layerId:Dx,event:{time:Date.now(),title:a.type,groupId:a._id,subtitle:"end",data:s}})}})})}var kD=8702998,Eae=6710886,Bae=16777215,E6={label:"namespaced",textColor:Bae,backgroundColor:Eae};function B6(e){return e&&e!=="root"?e.split("/").slice(-2,-1)[0]:"Root"}function k6(e,t){return{id:t||"root",label:B6(t),tags:e.namespaced?[E6]:[],children:Object.keys(e._children).map(function(n){return k6(e._children[n],t+n+"/")})}}function T6(e,t,n,a){a.includes(n)&&e.push({id:a||"root",label:a.endsWith("/")?a.slice(0,a.length-1):a||"Root",tags:t.namespaced?[E6]:[]}),Object.keys(t._children).forEach(function(r){T6(e,t._children[r],n,a+r+"/")})}function kae(e,t,n){t=n==="root"?t:t[n];var a=Object.keys(t),r={state:Object.keys(e.state).map(function(o){return{key:o,editable:!0,value:e.state[o]}})};if(a.length){var s=Tae(t);r.getters=Object.keys(s).map(function(o){return{key:o.endsWith("/")?B6(o):o,editable:!1,value:NS(function(){return s[o]})}})}return r}function Tae(e){var t={};return Object.keys(e).forEach(function(n){var a=n.split("/");if(a.length>1){var r=t,s=a.pop();a.forEach(function(o){r[o]||(r[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),r=r[o]._custom.value}),r[s]=NS(function(){return e[n]})}else t[n]=NS(function(){return e[n]})}),t}function Iae(e,t){var n=t.split("/").filter(function(a){return a});return n.reduce(function(a,r,s){var o=a[r];if(!o)throw new Error('Missing module "'+r+'" for path "'+t+'".');return s===n.length-1?o:o._children},t==="root"?e:e.root._children)}function NS(e){try{return e()}catch(t){return t}}var ru=function(t,n){this.runtime=n,this._children=Object.create(null),this._rawModule=t;var a=t.state;this.state=(typeof a=="function"?a():a)||{}},I6={namespaced:{configurable:!0}};I6.namespaced.get=function(){return!!this._rawModule.namespaced};ru.prototype.addChild=function(t,n){this._children[t]=n};ru.prototype.removeChild=function(t){delete this._children[t]};ru.prototype.getChild=function(t){return this._children[t]};ru.prototype.hasChild=function(t){return t in this._children};ru.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)};ru.prototype.forEachChild=function(t){rh(this._children,t)};ru.prototype.forEachGetter=function(t){this._rawModule.getters&&rh(this._rawModule.getters,t)};ru.prototype.forEachAction=function(t){this._rawModule.actions&&rh(this._rawModule.actions,t)};ru.prototype.forEachMutation=function(t){this._rawModule.mutations&&rh(this._rawModule.mutations,t)};Object.defineProperties(ru.prototype,I6);var Gf=function(t){this.register([],t,!1)};Gf.prototype.get=function(t){return t.reduce(function(n,a){return n.getChild(a)},this.root)};Gf.prototype.getNamespace=function(t){var n=this.root;return t.reduce(function(a,r){return n=n.getChild(r),a+(n.namespaced?r+"/":"")},"")};Gf.prototype.update=function(t){F6([],this.root,t)};Gf.prototype.register=function(t,n,a){var r=this;a===void 0&&(a=!0);var s=new ru(n,a);if(t.length===0)this.root=s;else{var o=this.get(t.slice(0,-1));o.addChild(t[t.length-1],s)}n.modules&&rh(n.modules,function(i,c){r.register(t.concat(c),i,a)})};Gf.prototype.unregister=function(t){var n=this.get(t.slice(0,-1)),a=t[t.length-1],r=n.getChild(a);r&&r.runtime&&n.removeChild(a)};Gf.prototype.isRegistered=function(t){var n=this.get(t.slice(0,-1)),a=t[t.length-1];return n?n.hasChild(a):!1};function F6(e,t,n){if(t.update(n),n.modules)for(var a in n.modules){if(!t.getChild(a))return;F6(e.concat(a),t.getChild(a),n.modules[a])}}function Fae(e){return new Ai(e)}var Ai=function(t){var n=this;t===void 0&&(t={});var a=t.plugins;a===void 0&&(a=[]);var r=t.strict;r===void 0&&(r=!1);var s=t.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new Gf(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=s;var o=this,i=this,c=i.dispatch,A=i.commit;this.dispatch=function(m,h){return c.call(o,m,h)},this.commit=function(m,h,p){return A.call(o,m,h,p)},this.strict=r;var d=this._modules.root.state;iw(this,d,[],this._modules.root),Sk(this,d),a.forEach(function(f){return f(n)})},Bk={state:{configurable:!0}};Ai.prototype.install=function(t,n){t.provide(n||b6,this),t.config.globalProperties.$store=this;var a=this._devtools!==void 0?this._devtools:!1;a&&Sae(t,this)};Bk.state.get=function(){return this._state.data};Bk.state.set=function(e){};Ai.prototype.commit=function(t,n,a){var r=this,s=D_(t,n,a),o=s.type,i=s.payload,c={type:o,payload:i},A=this._mutations[o];A&&(this._withCommit(function(){A.forEach(function(f){f(i)})}),this._subscribers.slice().forEach(function(d){return d(c,r.state)}))};Ai.prototype.dispatch=function(t,n){var a=this,r=D_(t,n),s=r.type,o=r.payload,i={type:s,payload:o},c=this._actions[s];if(c){try{this._actionSubscribers.slice().filter(function(d){return d.before}).forEach(function(d){return d.before(i,a.state)})}catch{}var A=c.length>1?Promise.all(c.map(function(d){return d(o)})):c[0](o);return new Promise(function(d,f){A.then(function(m){try{a._actionSubscribers.filter(function(h){return h.after}).forEach(function(h){return h.after(i,a.state)})}catch{}d(m)},function(m){try{a._actionSubscribers.filter(function(h){return h.error}).forEach(function(h){return h.error(i,a.state,m)})}catch{}f(m)})})}};Ai.prototype.subscribe=function(t,n){return x6(t,this._subscribers,n)};Ai.prototype.subscribeAction=function(t,n){var a=typeof t=="function"?{before:t}:t;return x6(a,this._actionSubscribers,n)};Ai.prototype.watch=function(t,n,a){var r=this;return Ke(function(){return t(r.state,r.getters)},n,Object.assign({},a))};Ai.prototype.replaceState=function(t){var n=this;this._withCommit(function(){n._state.data=t})};Ai.prototype.registerModule=function(t,n,a){a===void 0&&(a={}),typeof t=="string"&&(t=[t]),this._modules.register(t,n),iw(this,this.state,t,this._modules.get(t),a.preserveState),Sk(this,this.state)};Ai.prototype.unregisterModule=function(t){var n=this;typeof t=="string"&&(t=[t]),this._modules.unregister(t),this._withCommit(function(){var a=Ek(n.state,t.slice(0,-1));delete a[t[t.length-1]]}),C6(this)};Ai.prototype.hasModule=function(t){return typeof t=="string"&&(t=[t]),this._modules.isRegistered(t)};Ai.prototype.hotUpdate=function(t){this._modules.update(t),C6(this,!0)};Ai.prototype._withCommit=function(t){var n=this._committing;this._committing=!0,t(),this._committing=n};Object.defineProperties(Ai.prototype,Bk);const jm=typeof document<"u";function P6(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Pae(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&P6(e.default)}const ja=Object.assign;function Ux(e,t){const n={};for(const a in t){const r=t[a];n[a]=Wl(r)?r.map(e):e(r)}return n}const Kp=()=>{},Wl=Array.isArray,D6=/#/g,Dae=/&/g,Uae=/\//g,Rae=/=/g,Nae=/\?/g,U6=/\+/g,Vae=/%5B/g,Lae=/%5D/g,R6=/%5E/g,Mae=/%60/g,N6=/%7B/g,Oae=/%7C/g,V6=/%7D/g,Hae=/%20/g;function kk(e){return encodeURI(""+e).replace(Oae,"|").replace(Vae,"[").replace(Lae,"]")}function $ae(e){return kk(e).replace(N6,"{").replace(V6,"}").replace(R6,"^")}function VS(e){return kk(e).replace(U6,"%2B").replace(Hae,"+").replace(D6,"%23").replace(Dae,"%26").replace(Mae,"`").replace(N6,"{").replace(V6,"}").replace(R6,"^")}function Qae(e){return VS(e).replace(Rae,"%3D")}function Gae(e){return kk(e).replace(D6,"%23").replace(Nae,"%3F")}function zae(e){return e==null?"":Gae(e).replace(Uae,"%2F")}function T0(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const Kae=/\/$/,Wae=e=>e.replace(Kae,"");function Rx(e,t,n="/"){let a,r={},s="",o="";const i=t.indexOf("#");let c=t.indexOf("?");return i<c&&i>=0&&(c=-1),c>-1&&(a=t.slice(0,c),s=t.slice(c+1,i>-1?i:t.length),r=e(s)),i>-1&&(a=a||t.slice(0,i),o=t.slice(i,t.length)),a=Xae(a??t,n),{fullPath:a+(s&&"?")+s+o,path:a,query:r,hash:T0(o)}}function jae(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function TD(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function qae(e,t,n){const a=t.matched.length-1,r=n.matched.length-1;return a>-1&&a===r&&Nv(t.matched[a],n.matched[r])&&L6(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Nv(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function L6(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!Yae(e[n],t[n]))return!1;return!0}function Yae(e,t){return Wl(e)?ID(e,t):Wl(t)?ID(t,e):e===t}function ID(e,t){return Wl(t)?e.length===t.length&&e.every((n,a)=>n===t[a]):e.length===1&&e[0]===t}function Xae(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),a=e.split("/"),r=a[a.length-1];(r===".."||r===".")&&a.push("");let s=n.length-1,o,i;for(o=0;o<a.length;o++)if(i=a[o],i!==".")if(i==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+a.slice(o).join("/")}const ld={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var I0;(function(e){e.pop="pop",e.push="push"})(I0||(I0={}));var Wp;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Wp||(Wp={}));function Jae(e){if(!e)if(jm){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Wae(e)}const Zae=/^[^#]+#/;function ere(e,t){return e.replace(Zae,"#")+t}function tre(e,t){const n=document.documentElement.getBoundingClientRect(),a=e.getBoundingClientRect();return{behavior:t.behavior,left:a.left-n.left-(t.left||0),top:a.top-n.top-(t.top||0)}}const lw=()=>({left:window.scrollX,top:window.scrollY});function nre(e){let t;if("el"in e){const n=e.el,a=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?a?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;t=tre(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function FD(e,t){return(history.state?history.state.position-t:-1)+e}const LS=new Map;function are(e,t){LS.set(e,t)}function rre(e){const t=LS.get(e);return LS.delete(e),t}let sre=()=>location.protocol+"//"+location.host;function M6(e,t){const{pathname:n,search:a,hash:r}=t,s=e.indexOf("#");if(s>-1){let i=r.includes(e.slice(s))?e.slice(s).length:1,c=r.slice(i);return c[0]!=="/"&&(c="/"+c),TD(c,"")}return TD(n,e)+a+r}function ore(e,t,n,a){let r=[],s=[],o=null;const i=({state:m})=>{const h=M6(e,location),p=n.value,y=t.value;let g=0;if(m){if(n.value=h,t.value=m,o&&o===p){o=null;return}g=y?m.position-y.position:0}else a(h);r.forEach(w=>{w(n.value,p,{delta:g,type:I0.pop,direction:g?g>0?Wp.forward:Wp.back:Wp.unknown})})};function c(){o=n.value}function A(m){r.push(m);const h=()=>{const p=r.indexOf(m);p>-1&&r.splice(p,1)};return s.push(h),h}function d(){const{history:m}=window;m.state&&m.replaceState(ja({},m.state,{scroll:lw()}),"")}function f(){for(const m of s)m();s=[],window.removeEventListener("popstate",i),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",i),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:c,listen:A,destroy:f}}function PD(e,t,n,a=!1,r=!1){return{back:e,current:t,forward:n,replaced:a,position:window.history.length,scroll:r?lw():null}}function ire(e){const{history:t,location:n}=window,a={value:M6(e,n)},r={value:t.state};r.value||s(a.value,{back:null,current:a.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function s(c,A,d){const f=e.indexOf("#"),m=f>-1?(n.host&&document.querySelector("base")?e:e.slice(f))+c:sre()+e+c;try{t[d?"replaceState":"pushState"](A,"",m),r.value=A}catch(h){console.error(h),n[d?"replace":"assign"](m)}}function o(c,A){const d=ja({},t.state,PD(r.value.back,c,r.value.forward,!0),A,{position:r.value.position});s(c,d,!0),a.value=c}function i(c,A){const d=ja({},r.value,t.state,{forward:c,scroll:lw()});s(d.current,d,!0);const f=ja({},PD(a.value,c,null),{position:d.position+1},A);s(c,f,!1),a.value=c}return{location:a,state:r,push:i,replace:o}}function lre(e){e=Jae(e);const t=ire(e),n=ore(e,t.state,t.location,t.replace);function a(s,o=!0){o||n.pauseListeners(),history.go(s)}const r=ja({location:"",base:e,go:a,createHref:ere.bind(null,e)},t,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function ure(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),lre(e)}function cre(e){return typeof e=="string"||e&&typeof e=="object"}function O6(e){return typeof e=="string"||typeof e=="symbol"}const H6=Symbol("");var DD;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(DD||(DD={}));function Vv(e,t){return ja(new Error,{type:e,[H6]:!0},t)}function Ac(e,t){return e instanceof Error&&H6 in e&&(t==null||!!(e.type&t))}const UD="[^/]+?",dre={sensitive:!1,strict:!1,start:!0,end:!0},Are=/[.+*?^${}()[\]/\\]/g;function fre(e,t){const n=ja({},dre,t),a=[];let r=n.start?"^":"";const s=[];for(const A of e){const d=A.length?[]:[90];n.strict&&!A.length&&(r+="/");for(let f=0;f<A.length;f++){const m=A[f];let h=40+(n.sensitive?.25:0);if(m.type===0)f||(r+="/"),r+=m.value.replace(Are,"\\$&"),h+=40;else if(m.type===1){const{value:p,repeatable:y,optional:g,regexp:w}=m;s.push({name:p,repeatable:y,optional:g});const b=w||UD;if(b!==UD){h+=10;try{new RegExp(`(${b})`)}catch(T){throw new Error(`Invalid custom RegExp for param "${p}" (${b}): `+T.message)}}let x=y?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;f||(x=g&&A.length<2?`(?:/${x})`:"/"+x),g&&(x+="?"),r+=x,h+=20,g&&(h+=-8),y&&(h+=-20),b===".*"&&(h+=-50)}d.push(h)}a.push(d)}if(n.strict&&n.end){const A=a.length-1;a[A][a[A].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function i(A){const d=A.match(o),f={};if(!d)return null;for(let m=1;m<d.length;m++){const h=d[m]||"",p=s[m-1];f[p.name]=h&&p.repeatable?h.split("/"):h}return f}function c(A){let d="",f=!1;for(const m of e){(!f||!d.endsWith("/"))&&(d+="/"),f=!1;for(const h of m)if(h.type===0)d+=h.value;else if(h.type===1){const{value:p,repeatable:y,optional:g}=h,w=p in A?A[p]:"";if(Wl(w)&&!y)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const b=Wl(w)?w.join("/"):w;if(!b)if(g)m.length<2&&(d.endsWith("/")?d=d.slice(0,-1):f=!0);else throw new Error(`Missing required param "${p}"`);d+=b}}return d||"/"}return{re:o,score:a,keys:s,parse:i,stringify:c}}function mre(e,t){let n=0;for(;n<e.length&&n<t.length;){const a=t[n]-e[n];if(a)return a;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function $6(e,t){let n=0;const a=e.score,r=t.score;for(;n<a.length&&n<r.length;){const s=mre(a[n],r[n]);if(s)return s;n++}if(Math.abs(r.length-a.length)===1){if(RD(a))return 1;if(RD(r))return-1}return r.length-a.length}function RD(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const vre={type:0,value:""},hre=/[a-zA-Z0-9_]/;function pre(e){if(!e)return[[]];if(e==="/")return[[vre]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(h){throw new Error(`ERR (${n})/"${A}": ${h}`)}let n=0,a=n;const r=[];let s;function o(){s&&r.push(s),s=[]}let i=0,c,A="",d="";function f(){A&&(n===0?s.push({type:0,value:A}):n===1||n===2||n===3?(s.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${A}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:A,regexp:d,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),A="")}function m(){A+=c}for(;i<e.length;){if(c=e[i++],c==="\\"&&n!==2){a=n,n=4;continue}switch(n){case 0:c==="/"?(A&&f(),o()):c===":"?(f(),n=1):m();break;case 4:m(),n=a;break;case 1:c==="("?n=2:hre.test(c)?m():(f(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&i--);break;case 2:c===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+c:n=3:d+=c;break;case 3:f(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&i--,d="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${A}"`),f(),o(),r}function gre(e,t,n){const a=fre(pre(e.path),n),r=ja(a,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function yre(e,t){const n=[],a=new Map;t=MD({strict:!1,end:!0,sensitive:!1},t);function r(f){return a.get(f)}function s(f,m,h){const p=!h,y=VD(f);y.aliasOf=h&&h.record;const g=MD(t,f),w=[y];if("alias"in f){const T=typeof f.alias=="string"?[f.alias]:f.alias;for(const F of T)w.push(VD(ja({},y,{components:h?h.record.components:y.components,path:F,aliasOf:h?h.record:y})))}let b,x;for(const T of w){const{path:F}=T;if(m&&F[0]!=="/"){const k=m.record.path,S=k[k.length-1]==="/"?"":"/";T.path=m.record.path+(F&&S+F)}if(b=gre(T,m,g),h?h.alias.push(b):(x=x||b,x!==b&&x.alias.push(b),p&&f.name&&!LD(b)&&o(f.name)),Q6(b)&&c(b),y.children){const k=y.children;for(let S=0;S<k.length;S++)s(k[S],b,h&&h.children[S])}h=h||b}return x?()=>{o(x)}:Kp}function o(f){if(O6(f)){const m=a.get(f);m&&(a.delete(f),n.splice(n.indexOf(m),1),m.children.forEach(o),m.alias.forEach(o))}else{const m=n.indexOf(f);m>-1&&(n.splice(m,1),f.record.name&&a.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function i(){return n}function c(f){const m=bre(f,n);n.splice(m,0,f),f.record.name&&!LD(f)&&a.set(f.record.name,f)}function A(f,m){let h,p={},y,g;if("name"in f&&f.name){if(h=a.get(f.name),!h)throw Vv(1,{location:f});g=h.record.name,p=ja(ND(m.params,h.keys.filter(x=>!x.optional).concat(h.parent?h.parent.keys.filter(x=>x.optional):[]).map(x=>x.name)),f.params&&ND(f.params,h.keys.map(x=>x.name))),y=h.stringify(p)}else if(f.path!=null)y=f.path,h=n.find(x=>x.re.test(y)),h&&(p=h.parse(y),g=h.record.name);else{if(h=m.name?a.get(m.name):n.find(x=>x.re.test(m.path)),!h)throw Vv(1,{location:f,currentLocation:m});g=h.record.name,p=ja({},m.params,f.params),y=h.stringify(p)}const w=[];let b=h;for(;b;)w.unshift(b.record),b=b.parent;return{name:g,path:y,params:p,matched:w,meta:wre(w)}}e.forEach(f=>s(f));function d(){n.length=0,a.clear()}return{addRoute:s,resolve:A,removeRoute:o,clearRoutes:d,getRoutes:i,getRecordMatcher:r}}function ND(e,t){const n={};for(const a of t)a in e&&(n[a]=e[a]);return n}function VD(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:_re(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function _re(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const a in e.components)t[a]=typeof n=="object"?n[a]:n;return t}function LD(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function wre(e){return e.reduce((t,n)=>ja(t,n.meta),{})}function MD(e,t){const n={};for(const a in e)n[a]=a in t?t[a]:e[a];return n}function bre(e,t){let n=0,a=t.length;for(;n!==a;){const s=n+a>>1;$6(e,t[s])<0?a=s:n=s+1}const r=xre(e);return r&&(a=t.lastIndexOf(r,a-1)),a}function xre(e){let t=e;for(;t=t.parent;)if(Q6(t)&&$6(e,t)===0)return t}function Q6({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Cre(e){const t={};if(e===""||e==="?")return t;const a=(e[0]==="?"?e.slice(1):e).split("&");for(let r=0;r<a.length;++r){const s=a[r].replace(U6," "),o=s.indexOf("="),i=T0(o<0?s:s.slice(0,o)),c=o<0?null:T0(s.slice(o+1));if(i in t){let A=t[i];Wl(A)||(A=t[i]=[A]),A.push(c)}else t[i]=c}return t}function OD(e){let t="";for(let n in e){const a=e[n];if(n=Qae(n),a==null){a!==void 0&&(t+=(t.length?"&":"")+n);continue}(Wl(a)?a.map(s=>s&&VS(s)):[a&&VS(a)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+n,s!=null&&(t+="="+s))})}return t}function Sre(e){const t={};for(const n in e){const a=e[n];a!==void 0&&(t[n]=Wl(a)?a.map(r=>r==null?null:""+r):a==null?a:""+a)}return t}const Ere=Symbol(""),HD=Symbol(""),uw=Symbol(""),Tk=Symbol(""),MS=Symbol("");function rp(){let e=[];function t(a){return e.push(a),()=>{const r=e.indexOf(a);r>-1&&e.splice(r,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function gd(e,t,n,a,r,s=o=>o()){const o=a&&(a.enterCallbacks[r]=a.enterCallbacks[r]||[]);return()=>new Promise((i,c)=>{const A=m=>{m===!1?c(Vv(4,{from:n,to:t})):m instanceof Error?c(m):cre(m)?c(Vv(2,{from:t,to:m})):(o&&a.enterCallbacks[r]===o&&typeof m=="function"&&o.push(m),i())},d=s(()=>e.call(a&&a.instances[r],t,n,A));let f=Promise.resolve(d);e.length<3&&(f=f.then(A)),f.catch(m=>c(m))})}function Nx(e,t,n,a,r=s=>s()){const s=[];for(const o of e)for(const i in o.components){let c=o.components[i];if(!(t!=="beforeRouteEnter"&&!o.instances[i]))if(P6(c)){const d=(c.__vccOpts||c)[t];d&&s.push(gd(d,n,a,o,i,r))}else{let A=c();s.push(()=>A.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${i}" at "${o.path}"`);const f=Pae(d)?d.default:d;o.mods[i]=d,o.components[i]=f;const h=(f.__vccOpts||f)[t];return h&&gd(h,n,a,o,i,r)()}))}}return s}function $D(e){const t=Tn(uw),n=Tn(Tk),a=ae(()=>{const c=$e(e.to);return t.resolve(c)}),r=ae(()=>{const{matched:c}=a.value,{length:A}=c,d=c[A-1],f=n.matched;if(!d||!f.length)return-1;const m=f.findIndex(Nv.bind(null,d));if(m>-1)return m;const h=QD(c[A-2]);return A>1&&QD(d)===h&&f[f.length-1].path!==h?f.findIndex(Nv.bind(null,c[A-2])):m}),s=ae(()=>r.value>-1&&Fre(n.params,a.value.params)),o=ae(()=>r.value>-1&&r.value===n.matched.length-1&&L6(n.params,a.value.params));function i(c={}){if(Ire(c)){const A=t[$e(e.replace)?"replace":"push"]($e(e.to)).catch(Kp);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>A),A}return Promise.resolve()}return{route:a,href:ae(()=>a.value.href),isActive:s,isExactActive:o,navigate:i}}function Bre(e){return e.length===1?e[0]:e}const kre=nk({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:$D,setup(e,{slots:t}){const n=is($D(e)),{options:a}=Tn(uw),r=ae(()=>({[GD(e.activeClass,a.linkActiveClass,"router-link-active")]:n.isActive,[GD(e.exactActiveClass,a.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=t.default&&Bre(t.default(n));return e.custom?s:au("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},s)}}}),Tre=kre;function Ire(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Fre(e,t){for(const n in t){const a=t[n],r=e[n];if(typeof a=="string"){if(a!==r)return!1}else if(!Wl(r)||r.length!==a.length||a.some((s,o)=>s!==r[o]))return!1}return!0}function QD(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const GD=(e,t,n)=>e??t??n,Pre=nk({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const a=Tn(MS),r=ae(()=>e.route||a.value),s=Tn(HD,0),o=ae(()=>{let A=$e(s);const{matched:d}=r.value;let f;for(;(f=d[A])&&!f.components;)A++;return A}),i=ae(()=>r.value.matched[o.value]);Ha(HD,ae(()=>o.value+1)),Ha(Ere,i),Ha(MS,r);const c=V();return Ke(()=>[c.value,i.value,e.name],([A,d,f],[m,h,p])=>{d&&(d.instances[f]=A,h&&h!==d&&A&&A===m&&(d.leaveGuards.size||(d.leaveGuards=h.leaveGuards),d.updateGuards.size||(d.updateGuards=h.updateGuards))),A&&d&&(!h||!Nv(d,h)||!m)&&(d.enterCallbacks[f]||[]).forEach(y=>y(A))},{flush:"post"}),()=>{const A=r.value,d=e.name,f=i.value,m=f&&f.components[d];if(!m)return zD(n.default,{Component:m,route:A});const h=f.props[d],p=h?h===!0?A.params:typeof h=="function"?h(A):h:null,g=au(m,ja({},p,t,{onVnodeUnmounted:w=>{w.component.isUnmounted&&(f.instances[d]=null)},ref:c}));return zD(n.default,{Component:g,route:A})||g}}});function zD(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Dre=Pre;function Ure(e){const t=yre(e.routes,e),n=e.parseQuery||Cre,a=e.stringifyQuery||OD,r=e.history,s=rp(),o=rp(),i=rp(),c=Ht(ld);let A=ld;jm&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=Ux.bind(null,z=>""+z),f=Ux.bind(null,zae),m=Ux.bind(null,T0);function h(z,X){let le,re;return O6(z)?(le=t.getRecordMatcher(z),re=X):re=z,t.addRoute(re,le)}function p(z){const X=t.getRecordMatcher(z);X&&t.removeRoute(X)}function y(){return t.getRoutes().map(z=>z.record)}function g(z){return!!t.getRecordMatcher(z)}function w(z,X){if(X=ja({},X||c.value),typeof z=="string"){const ce=Rx(n,z,X.path),Se=t.resolve({path:ce.path},X),Pe=r.createHref(ce.fullPath);return ja(ce,Se,{params:m(Se.params),hash:T0(ce.hash),redirectedFrom:void 0,href:Pe})}let le;if(z.path!=null)le=ja({},z,{path:Rx(n,z.path,X.path).path});else{const ce=ja({},z.params);for(const Se in ce)ce[Se]==null&&delete ce[Se];le=ja({},z,{params:f(ce)}),X.params=f(X.params)}const re=t.resolve(le,X),de=z.hash||"";re.params=d(m(re.params));const G=jae(a,ja({},z,{hash:$ae(de),path:re.path})),Z=r.createHref(G);return ja({fullPath:G,hash:de,query:a===OD?Sre(z.query):z.query||{}},re,{redirectedFrom:void 0,href:Z})}function b(z){return typeof z=="string"?Rx(n,z,c.value.path):ja({},z)}function x(z,X){if(A!==z)return Vv(8,{from:X,to:z})}function T(z){return S(z)}function F(z){return T(ja(b(z),{replace:!0}))}function k(z){const X=z.matched[z.matched.length-1];if(X&&X.redirect){const{redirect:le}=X;let re=typeof le=="function"?le(z):le;return typeof re=="string"&&(re=re.includes("?")||re.includes("#")?re=b(re):{path:re},re.params={}),ja({query:z.query,hash:z.hash,params:re.path!=null?{}:z.params},re)}}function S(z,X){const le=A=w(z),re=c.value,de=z.state,G=z.force,Z=z.replace===!0,ce=k(le);if(ce)return S(ja(b(ce),{state:typeof ce=="object"?ja({},de,ce.state):de,force:G,replace:Z}),X||le);const Se=le;Se.redirectedFrom=X;let Pe;return!G&&qae(a,re,le)&&(Pe=Vv(16,{to:Se,from:re}),te(re,re,!0,!1)),(Pe?Promise.resolve(Pe):D(Se,re)).catch(ye=>Ac(ye)?Ac(ye,2)?ye:Y(ye):ue(ye,Se,re)).then(ye=>{if(ye){if(Ac(ye,2))return S(ja({replace:Z},b(ye.to),{state:typeof ye.to=="object"?ja({},de,ye.to.state):de,force:G}),X||Se)}else ye=O(Se,re,!0,Z,de);return P(Se,re,ye),ye})}function E(z,X){const le=x(z,X);return le?Promise.reject(le):Promise.resolve()}function C(z){const X=q.values().next().value;return X&&typeof X.runWithContext=="function"?X.runWithContext(z):z()}function D(z,X){let le;const[re,de,G]=Rre(z,X);le=Nx(re.reverse(),"beforeRouteLeave",z,X);for(const ce of re)ce.leaveGuards.forEach(Se=>{le.push(gd(Se,z,X))});const Z=E.bind(null,z,X);return le.push(Z),ee(le).then(()=>{le=[];for(const ce of s.list())le.push(gd(ce,z,X));return le.push(Z),ee(le)}).then(()=>{le=Nx(de,"beforeRouteUpdate",z,X);for(const ce of de)ce.updateGuards.forEach(Se=>{le.push(gd(Se,z,X))});return le.push(Z),ee(le)}).then(()=>{le=[];for(const ce of G)if(ce.beforeEnter)if(Wl(ce.beforeEnter))for(const Se of ce.beforeEnter)le.push(gd(Se,z,X));else le.push(gd(ce.beforeEnter,z,X));return le.push(Z),ee(le)}).then(()=>(z.matched.forEach(ce=>ce.enterCallbacks={}),le=Nx(G,"beforeRouteEnter",z,X,C),le.push(Z),ee(le))).then(()=>{le=[];for(const ce of o.list())le.push(gd(ce,z,X));return le.push(Z),ee(le)}).catch(ce=>Ac(ce,8)?ce:Promise.reject(ce))}function P(z,X,le){i.list().forEach(re=>C(()=>re(z,X,le)))}function O(z,X,le,re,de){const G=x(z,X);if(G)return G;const Z=X===ld,ce=jm?history.state:{};le&&(re||Z?r.replace(z.fullPath,ja({scroll:Z&&ce&&ce.scroll},de)):r.push(z.fullPath,de)),c.value=z,te(z,X,le,Z),Y()}let H;function ie(){H||(H=r.listen((z,X,le)=>{if(!Q.listening)return;const re=w(z),de=k(re);if(de){S(ja(de,{replace:!0,force:!0}),re).catch(Kp);return}A=re;const G=c.value;jm&&are(FD(G.fullPath,le.delta),lw()),D(re,G).catch(Z=>Ac(Z,12)?Z:Ac(Z,2)?(S(ja(b(Z.to),{force:!0}),re).then(ce=>{Ac(ce,20)&&!le.delta&&le.type===I0.pop&&r.go(-1,!1)}).catch(Kp),Promise.reject()):(le.delta&&r.go(-le.delta,!1),ue(Z,re,G))).then(Z=>{Z=Z||O(re,G,!1),Z&&(le.delta&&!Ac(Z,8)?r.go(-le.delta,!1):le.type===I0.pop&&Ac(Z,20)&&r.go(-1,!1)),P(re,G,Z)}).catch(Kp)}))}let Ae=rp(),j=rp(),J;function ue(z,X,le){Y(z);const re=j.list();return re.length?re.forEach(de=>de(z,X,le)):console.error(z),Promise.reject(z)}function ne(){return J&&c.value!==ld?Promise.resolve():new Promise((z,X)=>{Ae.add([z,X])})}function Y(z){return J||(J=!z,ie(),Ae.list().forEach(([X,le])=>z?le(z):X()),Ae.reset()),z}function te(z,X,le,re){const{scrollBehavior:de}=e;if(!jm||!de)return Promise.resolve();const G=!le&&rre(FD(z.fullPath,0))||(re||!le)&&history.state&&history.state.scroll||null;return xn().then(()=>de(z,X,G)).then(Z=>Z&&nre(Z)).catch(Z=>ue(Z,z,X))}const L=z=>r.go(z);let N;const q=new Set,Q={currentRoute:c,listening:!0,addRoute:h,removeRoute:p,clearRoutes:t.clearRoutes,hasRoute:g,getRoutes:y,resolve:w,options:e,push:T,replace:F,go:L,back:()=>L(-1),forward:()=>L(1),beforeEach:s.add,beforeResolve:o.add,afterEach:i.add,onError:j.add,isReady:ne,install(z){const X=this;z.component("RouterLink",Tre),z.component("RouterView",Dre),z.config.globalProperties.$router=X,Object.defineProperty(z.config.globalProperties,"$route",{enumerable:!0,get:()=>$e(c)}),jm&&!N&&c.value===ld&&(N=!0,T(r.location).catch(de=>{}));const le={};for(const de in ld)Object.defineProperty(le,de,{get:()=>c.value[de],enumerable:!0});z.provide(uw,X),z.provide(Tk,PL(le)),z.provide(MS,c);const re=z.unmount;q.add(z),z.unmount=function(){q.delete(z),q.size<1&&(A=ld,H&&H(),H=null,c.value=ld,N=!1,J=!1),re()}}};function ee(z){return z.reduce((X,le)=>X.then(()=>C(le)),Promise.resolve())}return Q}function Rre(e,t){const n=[],a=[],r=[],s=Math.max(t.matched.length,e.matched.length);for(let o=0;o<s;o++){const i=t.matched[o];i&&(e.matched.find(A=>Nv(A,i))?a.push(i):n.push(i));const c=e.matched[o];c&&(t.matched.find(A=>Nv(A,c))||r.push(c))}return[n,a,r]}function Al(){return Tn(uw)}function zf(e){return Tn(Tk)}function ra(){const e=Rn(),t=ae(()=>e.getters["snackbar/snackbar"]),n=ae(()=>e.getters["snackbar/isSnackbarVisible"]),a=m=>{e.dispatch("snackbar/showSnackbar",m)},r=()=>{e.dispatch("snackbar/hideSnackbar")},s=m=>{e.dispatch("snackbar/setSnackbarVisibility",m)},o=m=>{e.dispatch("snackbar/showSuccess",m)},i=m=>{e.dispatch("snackbar/showError",m)};return{snackbar:t,isVisible:n,showSnackbar:a,hideSnackbar:r,setVisibility:s,showSuccess:o,showError:i,showWarning:m=>{e.dispatch("snackbar/showWarning",m)},showInfo:m=>{e.dispatch("snackbar/showInfo",m)},handleApiResponse:(m,h=null)=>{if(m.success){const p=h||m.message||"Operation successful";o(p)}else{const p=m.error||m.message||"An error occurred";i(p)}},handleApiError:(m,h="An error occurred")=>{let p=h;m.response?.data?.error?p=m.response.data.error:m.response?.data?.message?p=m.response.data.message:m.message&&(p=m.message),i(p)}}}const vu={HTTPS_SERVER:29200,HTTP_SERVER:29201,WEBSOCKET:29200,HEALTH_ENDPOINTS:{HTTPS:"/health",HTTP:"/health"}},Tr=(e="localhost")=>({https:`https://${e}:${vu.HTTPS_SERVER}`,http:`http://${e}:${vu.HTTP_SERVER}`,api:{https:`https://${e}:${vu.HTTPS_SERVER}/api`,http:`http://${e}:${vu.HTTP_SERVER}/api`},websocket:{wss:`wss://${e}:${vu.WEBSOCKET}`,ws:`ws://${e}:${vu.HTTP_SERVER}`},health:{https:`https://${e}:${vu.HTTPS_SERVER}${vu.HEALTH_ENDPOINTS.HTTPS}`,http:`http://${e}:${vu.HTTP_SERVER}${vu.HEALTH_ENDPOINTS.HTTP}`}}),Ua=()=>typeof window<"u"&&window.process&&window.process.type==="renderer",KD=()=>!Ua(),Nre=()=>{try{let e=null;if(window.location.search&&(e=new URLSearchParams(window.location.search).get("endpoint"),e))return console.log("[environment] Retrieved endpoint from URL search params:",e),e;try{if(e=new URL(window.location.href).searchParams.get("endpoint"),e)return console.log("[environment] Retrieved endpoint from URL object:",e),e}catch(t){console.warn("[environment] Failed to parse URL from window.location.href:",t)}if(window.location.hash&&window.location.hash.includes("?")){const t=window.location.hash.split("?");if(t.length>1&&(e=new URLSearchParams("?"+t[1]).get("endpoint"),e))return console.log("[environment] Retrieved endpoint from hash params:",e),e}return null}catch(e){return console.warn("[environment] Failed to extract endpoint from URL:",e),null}},Ik=()=>{if(Ua()){const a=Tr("localhost").api.http;return console.log("[environment] Electron mode - using base URL:",a),a}const e=Nre();if(!e){const a="Web mode requires an endpoint parameter in the URL. Please add ?endpoint=https://your-api-server.com to the URL.";throw console.error("[environment]",a),new Error(a)}if(e.includes("localhost")||e.includes("127.0.0.1")){const a="Web mode requires a remote endpoint URL, not localhost. Please provide a valid remote server endpoint.";throw console.error("[environment]",a),new Error(a)}if(!e.startsWith("http://")&&!e.startsWith("https://")){const a="Web mode requires a full endpoint URL (http:// or https://).";throw console.error("[environment]",a),new Error(a)}const t=e.replace(/\/$/,""),n=t.endsWith("/api")?t:t+"/api";return console.log("[environment] Web mode - using base URL:",n),n},WD=()=>{try{return Ik().replace(/\/api\/?$/,"")}catch(e){if(console.error("[environment] Failed to get server base URL:",e),Ua())return Tr("localhost").http;throw e}},Vre=(e="/ws/transcribe")=>{try{const t=Ik(),n=new URL(t),r=`${n.protocol==="https:"?"wss:":"ws:"}//${n.host}${e}`;return console.log("[environment] WebSocket URL:",r),r}catch(t){if(console.error("[environment] Failed to get WebSocket URL:",t),Ua())return`${Tr("localhost").websocket.ws}${e}`;throw t}};function G6(e,t){return function(){return e.apply(t,arguments)}}const{toString:Lre}=Object.prototype,{getPrototypeOf:Fk}=Object,{iterator:cw,toStringTag:z6}=Symbol,dw=(e=>t=>{const n=Lre.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),su=e=>(e=e.toLowerCase(),t=>dw(t)===e),Aw=e=>t=>typeof t===e,{isArray:sh}=Array,Lv=Aw("undefined");function hg(e){return e!==null&&!Lv(e)&&e.constructor!==null&&!Lv(e.constructor)&&li(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const K6=su("ArrayBuffer");function Mre(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&K6(e.buffer),t}const Ore=Aw("string"),li=Aw("function"),W6=Aw("number"),pg=e=>e!==null&&typeof e=="object",Hre=e=>e===!0||e===!1,Wy=e=>{if(dw(e)!=="object")return!1;const t=Fk(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(z6 in e)&&!(cw in e)},$re=e=>{if(!pg(e)||hg(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Qre=su("Date"),Gre=su("File"),zre=su("Blob"),Kre=su("FileList"),Wre=e=>pg(e)&&li(e.pipe),jre=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||li(e.append)&&((t=dw(e))==="formdata"||t==="object"&&li(e.toString)&&e.toString()==="[object FormData]"))},qre=su("URLSearchParams"),[Yre,Xre,Jre,Zre]=["ReadableStream","Request","Response","Headers"].map(su),ese=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function gg(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let a,r;if(typeof e!="object"&&(e=[e]),sh(e))for(a=0,r=e.length;a<r;a++)t.call(null,e[a],a,e);else{if(hg(e))return;const s=n?Object.getOwnPropertyNames(e):Object.keys(e),o=s.length;let i;for(a=0;a<o;a++)i=s[a],t.call(null,e[i],i,e)}}function j6(e,t){if(hg(e))return null;t=t.toLowerCase();const n=Object.keys(e);let a=n.length,r;for(;a-- >0;)if(r=n[a],t===r.toLowerCase())return r;return null}const WA=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,q6=e=>!Lv(e)&&e!==WA;function OS(){const{caseless:e,skipUndefined:t}=q6(this)&&this||{},n={},a=(r,s)=>{const o=e&&j6(n,s)||s;Wy(n[o])&&Wy(r)?n[o]=OS(n[o],r):Wy(r)?n[o]=OS({},r):sh(r)?n[o]=r.slice():(!t||!Lv(r))&&(n[o]=r)};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&gg(arguments[r],a);return n}const tse=(e,t,n,{allOwnKeys:a}={})=>(gg(t,(r,s)=>{n&&li(r)?e[s]=G6(r,n):e[s]=r},{allOwnKeys:a}),e),nse=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),ase=(e,t,n,a)=>{e.prototype=Object.create(t.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},rse=(e,t,n,a)=>{let r,s,o;const i={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),s=r.length;s-- >0;)o=r[s],(!a||a(o,e,t))&&!i[o]&&(t[o]=e[o],i[o]=!0);e=n!==!1&&Fk(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},sse=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const a=e.indexOf(t,n);return a!==-1&&a===n},ose=e=>{if(!e)return null;if(sh(e))return e;let t=e.length;if(!W6(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},ise=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Fk(Uint8Array)),lse=(e,t)=>{const a=(e&&e[cw]).call(e);let r;for(;(r=a.next())&&!r.done;){const s=r.value;t.call(e,s[0],s[1])}},use=(e,t)=>{let n;const a=[];for(;(n=e.exec(t))!==null;)a.push(n);return a},cse=su("HTMLFormElement"),dse=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,a,r){return a.toUpperCase()+r}),jD=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Ase=su("RegExp"),Y6=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),a={};gg(n,(r,s)=>{let o;(o=t(r,s,e))!==!1&&(a[s]=o||r)}),Object.defineProperties(e,a)},fse=e=>{Y6(e,(t,n)=>{if(li(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const a=e[n];if(li(a)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},mse=(e,t)=>{const n={},a=r=>{r.forEach(s=>{n[s]=!0})};return sh(e)?a(e):a(String(e).split(t)),n},vse=()=>{},hse=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function pse(e){return!!(e&&li(e.append)&&e[z6]==="FormData"&&e[cw])}const gse=e=>{const t=new Array(10),n=(a,r)=>{if(pg(a)){if(t.indexOf(a)>=0)return;if(hg(a))return a;if(!("toJSON"in a)){t[r]=a;const s=sh(a)?[]:{};return gg(a,(o,i)=>{const c=n(o,r+1);!Lv(c)&&(s[i]=c)}),t[r]=void 0,s}}return a};return n(e,0)},yse=su("AsyncFunction"),_se=e=>e&&(pg(e)||li(e))&&li(e.then)&&li(e.catch),X6=((e,t)=>e?setImmediate:t?((n,a)=>(WA.addEventListener("message",({source:r,data:s})=>{r===WA&&s===n&&a.length&&a.shift()()},!1),r=>{a.push(r),WA.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",li(WA.postMessage)),wse=typeof queueMicrotask<"u"?queueMicrotask.bind(WA):typeof process<"u"&&process.nextTick||X6,bse=e=>e!=null&&li(e[cw]),Ct={isArray:sh,isArrayBuffer:K6,isBuffer:hg,isFormData:jre,isArrayBufferView:Mre,isString:Ore,isNumber:W6,isBoolean:Hre,isObject:pg,isPlainObject:Wy,isEmptyObject:$re,isReadableStream:Yre,isRequest:Xre,isResponse:Jre,isHeaders:Zre,isUndefined:Lv,isDate:Qre,isFile:Gre,isBlob:zre,isRegExp:Ase,isFunction:li,isStream:Wre,isURLSearchParams:qre,isTypedArray:ise,isFileList:Kre,forEach:gg,merge:OS,extend:tse,trim:ese,stripBOM:nse,inherits:ase,toFlatObject:rse,kindOf:dw,kindOfTest:su,endsWith:sse,toArray:ose,forEachEntry:lse,matchAll:use,isHTMLForm:cse,hasOwnProperty:jD,hasOwnProp:jD,reduceDescriptors:Y6,freezeMethods:fse,toObjectSet:mse,toCamelCase:dse,noop:vse,toFiniteNumber:hse,findKey:j6,global:WA,isContextDefined:q6,isSpecCompliantForm:pse,toJSONObject:gse,isAsyncFn:yse,isThenable:_se,setImmediate:X6,asap:wse,isIterable:bse};function ta(e,t,n,a,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),a&&(this.request=a),r&&(this.response=r,this.status=r.status?r.status:null)}Ct.inherits(ta,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ct.toJSONObject(this.config),code:this.code,status:this.status}}});const J6=ta.prototype,Z6={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Z6[e]={value:e}});Object.defineProperties(ta,Z6);Object.defineProperty(J6,"isAxiosError",{value:!0});ta.from=(e,t,n,a,r,s)=>{const o=Object.create(J6);Ct.toFlatObject(e,o,function(d){return d!==Error.prototype},A=>A!=="isAxiosError");const i=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return ta.call(o,i,c,n,a,r),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",s&&Object.assign(o,s),o};const xse=null;function HS(e){return Ct.isPlainObject(e)||Ct.isArray(e)}function e5(e){return Ct.endsWith(e,"[]")?e.slice(0,-2):e}function qD(e,t,n){return e?e.concat(t).map(function(r,s){return r=e5(r),!n&&s?"["+r+"]":r}).join(n?".":""):t}function Cse(e){return Ct.isArray(e)&&!e.some(HS)}const Sse=Ct.toFlatObject(Ct,{},null,function(t){return/^is[A-Z]/.test(t)});function fw(e,t,n){if(!Ct.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=Ct.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,g){return!Ct.isUndefined(g[y])});const a=n.metaTokens,r=n.visitor||d,s=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&Ct.isSpecCompliantForm(t);if(!Ct.isFunction(r))throw new TypeError("visitor must be a function");function A(p){if(p===null)return"";if(Ct.isDate(p))return p.toISOString();if(Ct.isBoolean(p))return p.toString();if(!c&&Ct.isBlob(p))throw new ta("Blob is not supported. Use a Buffer instead.");return Ct.isArrayBuffer(p)||Ct.isTypedArray(p)?c&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function d(p,y,g){let w=p;if(p&&!g&&typeof p=="object"){if(Ct.endsWith(y,"{}"))y=a?y:y.slice(0,-2),p=JSON.stringify(p);else if(Ct.isArray(p)&&Cse(p)||(Ct.isFileList(p)||Ct.endsWith(y,"[]"))&&(w=Ct.toArray(p)))return y=e5(y),w.forEach(function(x,T){!(Ct.isUndefined(x)||x===null)&&t.append(o===!0?qD([y],T,s):o===null?y:y+"[]",A(x))}),!1}return HS(p)?!0:(t.append(qD(g,y,s),A(p)),!1)}const f=[],m=Object.assign(Sse,{defaultVisitor:d,convertValue:A,isVisitable:HS});function h(p,y){if(!Ct.isUndefined(p)){if(f.indexOf(p)!==-1)throw Error("Circular reference detected in "+y.join("."));f.push(p),Ct.forEach(p,function(w,b){(!(Ct.isUndefined(w)||w===null)&&r.call(t,w,Ct.isString(b)?b.trim():b,y,m))===!0&&h(w,y?y.concat(b):[b])}),f.pop()}}if(!Ct.isObject(e))throw new TypeError("data must be an object");return h(e),t}function YD(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(a){return t[a]})}function Pk(e,t){this._pairs=[],e&&fw(e,this,t)}const t5=Pk.prototype;t5.append=function(t,n){this._pairs.push([t,n])};t5.toString=function(t){const n=t?function(a){return t.call(this,a,YD)}:YD;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function Ese(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function n5(e,t,n){if(!t)return e;const a=n&&n.encode||Ese;Ct.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let s;if(r?s=r(t,n):s=Ct.isURLSearchParams(t)?t.toString():new Pk(t,n).toString(a),s){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class XD{constructor(){this.handlers=[]}use(t,n,a){return this.handlers.push({fulfilled:t,rejected:n,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Ct.forEach(this.handlers,function(a){a!==null&&t(a)})}}const a5={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Bse=typeof URLSearchParams<"u"?URLSearchParams:Pk,kse=typeof FormData<"u"?FormData:null,Tse=typeof Blob<"u"?Blob:null,Ise={isBrowser:!0,classes:{URLSearchParams:Bse,FormData:kse,Blob:Tse},protocols:["http","https","file","blob","url","data"]},Dk=typeof window<"u"&&typeof document<"u",$S=typeof navigator=="object"&&navigator||void 0,Fse=Dk&&(!$S||["ReactNative","NativeScript","NS"].indexOf($S.product)<0),Pse=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Dse=Dk&&window.location.href||"http://localhost",Use=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Dk,hasStandardBrowserEnv:Fse,hasStandardBrowserWebWorkerEnv:Pse,navigator:$S,origin:Dse},Symbol.toStringTag,{value:"Module"})),fo={...Use,...Ise};function Rse(e,t){return fw(e,new fo.classes.URLSearchParams,{visitor:function(n,a,r,s){return fo.isNode&&Ct.isBuffer(n)?(this.append(a,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...t})}function Nse(e){return Ct.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Vse(e){const t={},n=Object.keys(e);let a;const r=n.length;let s;for(a=0;a<r;a++)s=n[a],t[s]=e[s];return t}function r5(e){function t(n,a,r,s){let o=n[s++];if(o==="__proto__")return!0;const i=Number.isFinite(+o),c=s>=n.length;return o=!o&&Ct.isArray(r)?r.length:o,c?(Ct.hasOwnProp(r,o)?r[o]=[r[o],a]:r[o]=a,!i):((!r[o]||!Ct.isObject(r[o]))&&(r[o]=[]),t(n,a,r[o],s)&&Ct.isArray(r[o])&&(r[o]=Vse(r[o])),!i)}if(Ct.isFormData(e)&&Ct.isFunction(e.entries)){const n={};return Ct.forEachEntry(e,(a,r)=>{t(Nse(a),r,n,0)}),n}return null}function Lse(e,t,n){if(Ct.isString(e))try{return(t||JSON.parse)(e),Ct.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(n||JSON.stringify)(e)}const yg={transitional:a5,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const a=n.getContentType()||"",r=a.indexOf("application/json")>-1,s=Ct.isObject(t);if(s&&Ct.isHTMLForm(t)&&(t=new FormData(t)),Ct.isFormData(t))return r?JSON.stringify(r5(t)):t;if(Ct.isArrayBuffer(t)||Ct.isBuffer(t)||Ct.isStream(t)||Ct.isFile(t)||Ct.isBlob(t)||Ct.isReadableStream(t))return t;if(Ct.isArrayBufferView(t))return t.buffer;if(Ct.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let i;if(s){if(a.indexOf("application/x-www-form-urlencoded")>-1)return Rse(t,this.formSerializer).toString();if((i=Ct.isFileList(t))||a.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return fw(i?{"files[]":t}:t,c&&new c,this.formSerializer)}}return s||r?(n.setContentType("application/json",!1),Lse(t)):t}],transformResponse:[function(t){const n=this.transitional||yg.transitional,a=n&&n.forcedJSONParsing,r=this.responseType==="json";if(Ct.isResponse(t)||Ct.isReadableStream(t))return t;if(t&&Ct.isString(t)&&(a&&!this.responseType||r)){const o=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(t,this.parseReviver)}catch(i){if(o)throw i.name==="SyntaxError"?ta.from(i,ta.ERR_BAD_RESPONSE,this,null,this.response):i}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:fo.classes.FormData,Blob:fo.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ct.forEach(["delete","get","head","post","put","patch"],e=>{yg.headers[e]={}});const Mse=Ct.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ose=e=>{const t={};let n,a,r;return e&&e.split(`
`).forEach(function(o){r=o.indexOf(":"),n=o.substring(0,r).trim().toLowerCase(),a=o.substring(r+1).trim(),!(!n||t[n]&&Mse[n])&&(n==="set-cookie"?t[n]?t[n].push(a):t[n]=[a]:t[n]=t[n]?t[n]+", "+a:a)}),t},JD=Symbol("internals");function sp(e){return e&&String(e).trim().toLowerCase()}function jy(e){return e===!1||e==null?e:Ct.isArray(e)?e.map(jy):String(e)}function Hse(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=n.exec(e);)t[a[1]]=a[2];return t}const $se=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Vx(e,t,n,a,r){if(Ct.isFunction(a))return a.call(this,t,n);if(r&&(t=n),!!Ct.isString(t)){if(Ct.isString(a))return t.indexOf(a)!==-1;if(Ct.isRegExp(a))return a.test(t)}}function Qse(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,a)=>n.toUpperCase()+a)}function Gse(e,t){const n=Ct.toCamelCase(" "+t);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+n,{value:function(r,s,o){return this[a].call(this,t,r,s,o)},configurable:!0})})}let ui=class{constructor(t){t&&this.set(t)}set(t,n,a){const r=this;function s(i,c,A){const d=sp(c);if(!d)throw new Error("header name must be a non-empty string");const f=Ct.findKey(r,d);(!f||r[f]===void 0||A===!0||A===void 0&&r[f]!==!1)&&(r[f||c]=jy(i))}const o=(i,c)=>Ct.forEach(i,(A,d)=>s(A,d,c));if(Ct.isPlainObject(t)||t instanceof this.constructor)o(t,n);else if(Ct.isString(t)&&(t=t.trim())&&!$se(t))o(Ose(t),n);else if(Ct.isObject(t)&&Ct.isIterable(t)){let i={},c,A;for(const d of t){if(!Ct.isArray(d))throw TypeError("Object iterator must return a key-value pair");i[A=d[0]]=(c=i[A])?Ct.isArray(c)?[...c,d[1]]:[c,d[1]]:d[1]}o(i,n)}else t!=null&&s(n,t,a);return this}get(t,n){if(t=sp(t),t){const a=Ct.findKey(this,t);if(a){const r=this[a];if(!n)return r;if(n===!0)return Hse(r);if(Ct.isFunction(n))return n.call(this,r,a);if(Ct.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=sp(t),t){const a=Ct.findKey(this,t);return!!(a&&this[a]!==void 0&&(!n||Vx(this,this[a],a,n)))}return!1}delete(t,n){const a=this;let r=!1;function s(o){if(o=sp(o),o){const i=Ct.findKey(a,o);i&&(!n||Vx(a,a[i],i,n))&&(delete a[i],r=!0)}}return Ct.isArray(t)?t.forEach(s):s(t),r}clear(t){const n=Object.keys(this);let a=n.length,r=!1;for(;a--;){const s=n[a];(!t||Vx(this,this[s],s,t,!0))&&(delete this[s],r=!0)}return r}normalize(t){const n=this,a={};return Ct.forEach(this,(r,s)=>{const o=Ct.findKey(a,s);if(o){n[o]=jy(r),delete n[s];return}const i=t?Qse(s):String(s).trim();i!==s&&delete n[s],n[i]=jy(r),a[i]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return Ct.forEach(this,(a,r)=>{a!=null&&a!==!1&&(n[r]=t&&Ct.isArray(a)?a.join(", "):a)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const a=new this(t);return n.forEach(r=>a.set(r)),a}static accessor(t){const a=(this[JD]=this[JD]={accessors:{}}).accessors,r=this.prototype;function s(o){const i=sp(o);a[i]||(Gse(r,o),a[i]=!0)}return Ct.isArray(t)?t.forEach(s):s(t),this}};ui.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ct.reduceDescriptors(ui.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(a){this[n]=a}}});Ct.freezeMethods(ui);function Lx(e,t){const n=this||yg,a=t||n,r=ui.from(a.headers);let s=a.data;return Ct.forEach(e,function(i){s=i.call(n,s,r.normalize(),t?t.status:void 0)}),r.normalize(),s}function s5(e){return!!(e&&e.__CANCEL__)}function oh(e,t,n){ta.call(this,e??"canceled",ta.ERR_CANCELED,t,n),this.name="CanceledError"}Ct.inherits(oh,ta,{__CANCEL__:!0});function o5(e,t,n){const a=n.config.validateStatus;!n.status||!a||a(n.status)?e(n):t(new ta("Request failed with status code "+n.status,[ta.ERR_BAD_REQUEST,ta.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function zse(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Kse(e,t){e=e||10;const n=new Array(e),a=new Array(e);let r=0,s=0,o;return t=t!==void 0?t:1e3,function(c){const A=Date.now(),d=a[s];o||(o=A),n[r]=c,a[r]=A;let f=s,m=0;for(;f!==r;)m+=n[f++],f=f%e;if(r=(r+1)%e,r===s&&(s=(s+1)%e),A-o<t)return;const h=d&&A-d;return h?Math.round(m*1e3/h):void 0}}function Wse(e,t){let n=0,a=1e3/t,r,s;const o=(A,d=Date.now())=>{n=d,r=null,s&&(clearTimeout(s),s=null),e(...A)};return[(...A)=>{const d=Date.now(),f=d-n;f>=a?o(A,d):(r=A,s||(s=setTimeout(()=>{s=null,o(r)},a-f)))},()=>r&&o(r)]}const U_=(e,t,n=3)=>{let a=0;const r=Kse(50,250);return Wse(s=>{const o=s.loaded,i=s.lengthComputable?s.total:void 0,c=o-a,A=r(c),d=o<=i;a=o;const f={loaded:o,total:i,progress:i?o/i:void 0,bytes:c,rate:A||void 0,estimated:A&&i&&d?(i-o)/A:void 0,event:s,lengthComputable:i!=null,[t?"download":"upload"]:!0};e(f)},n)},ZD=(e,t)=>{const n=e!=null;return[a=>t[0]({lengthComputable:n,total:e,loaded:a}),t[1]]},e3=e=>(...t)=>Ct.asap(()=>e(...t)),jse=fo.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,fo.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(fo.origin),fo.navigator&&/(msie|trident)/i.test(fo.navigator.userAgent)):()=>!0,qse=fo.hasStandardBrowserEnv?{write(e,t,n,a,r,s,o){if(typeof document>"u")return;const i=[`${e}=${encodeURIComponent(t)}`];Ct.isNumber(n)&&i.push(`expires=${new Date(n).toUTCString()}`),Ct.isString(a)&&i.push(`path=${a}`),Ct.isString(r)&&i.push(`domain=${r}`),s===!0&&i.push("secure"),Ct.isString(o)&&i.push(`SameSite=${o}`),document.cookie=i.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Yse(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Xse(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function i5(e,t,n){let a=!Yse(t);return e&&(a||n==!1)?Xse(e,t):t}const t3=e=>e instanceof ui?{...e}:e;function pf(e,t){t=t||{};const n={};function a(A,d,f,m){return Ct.isPlainObject(A)&&Ct.isPlainObject(d)?Ct.merge.call({caseless:m},A,d):Ct.isPlainObject(d)?Ct.merge({},d):Ct.isArray(d)?d.slice():d}function r(A,d,f,m){if(Ct.isUndefined(d)){if(!Ct.isUndefined(A))return a(void 0,A,f,m)}else return a(A,d,f,m)}function s(A,d){if(!Ct.isUndefined(d))return a(void 0,d)}function o(A,d){if(Ct.isUndefined(d)){if(!Ct.isUndefined(A))return a(void 0,A)}else return a(void 0,d)}function i(A,d,f){if(f in t)return a(A,d);if(f in e)return a(void 0,A)}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:i,headers:(A,d,f)=>r(t3(A),t3(d),f,!0)};return Ct.forEach(Object.keys({...e,...t}),function(d){const f=c[d]||r,m=f(e[d],t[d],d);Ct.isUndefined(m)&&f!==i||(n[d]=m)}),n}const l5=e=>{const t=pf({},e);let{data:n,withXSRFToken:a,xsrfHeaderName:r,xsrfCookieName:s,headers:o,auth:i}=t;if(t.headers=o=ui.from(o),t.url=n5(i5(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),i&&o.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):""))),Ct.isFormData(n)){if(fo.hasStandardBrowserEnv||fo.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(Ct.isFunction(n.getHeaders)){const c=n.getHeaders(),A=["content-type","content-length"];Object.entries(c).forEach(([d,f])=>{A.includes(d.toLowerCase())&&o.set(d,f)})}}if(fo.hasStandardBrowserEnv&&(a&&Ct.isFunction(a)&&(a=a(t)),a||a!==!1&&jse(t.url))){const c=r&&s&&qse.read(s);c&&o.set(r,c)}return t},Jse=typeof XMLHttpRequest<"u",Zse=Jse&&function(e){return new Promise(function(n,a){const r=l5(e);let s=r.data;const o=ui.from(r.headers).normalize();let{responseType:i,onUploadProgress:c,onDownloadProgress:A}=r,d,f,m,h,p;function y(){h&&h(),p&&p(),r.cancelToken&&r.cancelToken.unsubscribe(d),r.signal&&r.signal.removeEventListener("abort",d)}let g=new XMLHttpRequest;g.open(r.method.toUpperCase(),r.url,!0),g.timeout=r.timeout;function w(){if(!g)return;const x=ui.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),F={data:!i||i==="text"||i==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:x,config:e,request:g};o5(function(S){n(S),y()},function(S){a(S),y()},F),g=null}"onloadend"in g?g.onloadend=w:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(w)},g.onabort=function(){g&&(a(new ta("Request aborted",ta.ECONNABORTED,e,g)),g=null)},g.onerror=function(T){const F=T&&T.message?T.message:"Network Error",k=new ta(F,ta.ERR_NETWORK,e,g);k.event=T||null,a(k),g=null},g.ontimeout=function(){let T=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const F=r.transitional||a5;r.timeoutErrorMessage&&(T=r.timeoutErrorMessage),a(new ta(T,F.clarifyTimeoutError?ta.ETIMEDOUT:ta.ECONNABORTED,e,g)),g=null},s===void 0&&o.setContentType(null),"setRequestHeader"in g&&Ct.forEach(o.toJSON(),function(T,F){g.setRequestHeader(F,T)}),Ct.isUndefined(r.withCredentials)||(g.withCredentials=!!r.withCredentials),i&&i!=="json"&&(g.responseType=r.responseType),A&&([m,p]=U_(A,!0),g.addEventListener("progress",m)),c&&g.upload&&([f,h]=U_(c),g.upload.addEventListener("progress",f),g.upload.addEventListener("loadend",h)),(r.cancelToken||r.signal)&&(d=x=>{g&&(a(!x||x.type?new oh(null,e,g):x),g.abort(),g=null)},r.cancelToken&&r.cancelToken.subscribe(d),r.signal&&(r.signal.aborted?d():r.signal.addEventListener("abort",d)));const b=zse(r.url);if(b&&fo.protocols.indexOf(b)===-1){a(new ta("Unsupported protocol "+b+":",ta.ERR_BAD_REQUEST,e));return}g.send(s||null)})},eoe=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let a=new AbortController,r;const s=function(A){if(!r){r=!0,i();const d=A instanceof Error?A:this.reason;a.abort(d instanceof ta?d:new oh(d instanceof Error?d.message:d))}};let o=t&&setTimeout(()=>{o=null,s(new ta(`timeout ${t} of ms exceeded`,ta.ETIMEDOUT))},t);const i=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(A=>{A.unsubscribe?A.unsubscribe(s):A.removeEventListener("abort",s)}),e=null)};e.forEach(A=>A.addEventListener("abort",s));const{signal:c}=a;return c.unsubscribe=()=>Ct.asap(i),c}},toe=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let a=0,r;for(;a<n;)r=a+t,yield e.slice(a,r),a=r},noe=async function*(e,t){for await(const n of aoe(e))yield*toe(n,t)},aoe=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:a}=await t.read();if(n)break;yield a}}finally{await t.cancel()}},n3=(e,t,n,a)=>{const r=noe(e,t);let s=0,o,i=c=>{o||(o=!0,a&&a(c))};return new ReadableStream({async pull(c){try{const{done:A,value:d}=await r.next();if(A){i(),c.close();return}let f=d.byteLength;if(n){let m=s+=f;n(m)}c.enqueue(new Uint8Array(d))}catch(A){throw i(A),A}},cancel(c){return i(c),r.return()}},{highWaterMark:2})},a3=64*1024,{isFunction:q1}=Ct,roe=(({Request:e,Response:t})=>({Request:e,Response:t}))(Ct.global),{ReadableStream:r3,TextEncoder:s3}=Ct.global,o3=(e,...t)=>{try{return!!e(...t)}catch{return!1}},soe=e=>{e=Ct.merge.call({skipUndefined:!0},roe,e);const{fetch:t,Request:n,Response:a}=e,r=t?q1(t):typeof fetch=="function",s=q1(n),o=q1(a);if(!r)return!1;const i=r&&q1(r3),c=r&&(typeof s3=="function"?(p=>y=>p.encode(y))(new s3):async p=>new Uint8Array(await new n(p).arrayBuffer())),A=s&&i&&o3(()=>{let p=!1;const y=new n(fo.origin,{body:new r3,method:"POST",get duplex(){return p=!0,"half"}}).headers.has("Content-Type");return p&&!y}),d=o&&i&&o3(()=>Ct.isReadableStream(new a("").body)),f={stream:d&&(p=>p.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(p=>{!f[p]&&(f[p]=(y,g)=>{let w=y&&y[p];if(w)return w.call(y);throw new ta(`Response type '${p}' is not supported`,ta.ERR_NOT_SUPPORT,g)})});const m=async p=>{if(p==null)return 0;if(Ct.isBlob(p))return p.size;if(Ct.isSpecCompliantForm(p))return(await new n(fo.origin,{method:"POST",body:p}).arrayBuffer()).byteLength;if(Ct.isArrayBufferView(p)||Ct.isArrayBuffer(p))return p.byteLength;if(Ct.isURLSearchParams(p)&&(p=p+""),Ct.isString(p))return(await c(p)).byteLength},h=async(p,y)=>{const g=Ct.toFiniteNumber(p.getContentLength());return g??m(y)};return async p=>{let{url:y,method:g,data:w,signal:b,cancelToken:x,timeout:T,onDownloadProgress:F,onUploadProgress:k,responseType:S,headers:E,withCredentials:C="same-origin",fetchOptions:D}=l5(p),P=t||fetch;S=S?(S+"").toLowerCase():"text";let O=eoe([b,x&&x.toAbortSignal()],T),H=null;const ie=O&&O.unsubscribe&&(()=>{O.unsubscribe()});let Ae;try{if(k&&A&&g!=="get"&&g!=="head"&&(Ae=await h(E,w))!==0){let te=new n(y,{method:"POST",body:w,duplex:"half"}),L;if(Ct.isFormData(w)&&(L=te.headers.get("content-type"))&&E.setContentType(L),te.body){const[N,q]=ZD(Ae,U_(e3(k)));w=n3(te.body,a3,N,q)}}Ct.isString(C)||(C=C?"include":"omit");const j=s&&"credentials"in n.prototype,J={...D,signal:O,method:g.toUpperCase(),headers:E.normalize().toJSON(),body:w,duplex:"half",credentials:j?C:void 0};H=s&&new n(y,J);let ue=await(s?P(H,D):P(y,J));const ne=d&&(S==="stream"||S==="response");if(d&&(F||ne&&ie)){const te={};["status","statusText","headers"].forEach(Q=>{te[Q]=ue[Q]});const L=Ct.toFiniteNumber(ue.headers.get("content-length")),[N,q]=F&&ZD(L,U_(e3(F),!0))||[];ue=new a(n3(ue.body,a3,N,()=>{q&&q(),ie&&ie()}),te)}S=S||"text";let Y=await f[Ct.findKey(f,S)||"text"](ue,p);return!ne&&ie&&ie(),await new Promise((te,L)=>{o5(te,L,{data:Y,headers:ui.from(ue.headers),status:ue.status,statusText:ue.statusText,config:p,request:H})})}catch(j){throw ie&&ie(),j&&j.name==="TypeError"&&/Load failed|fetch/i.test(j.message)?Object.assign(new ta("Network Error",ta.ERR_NETWORK,p,H),{cause:j.cause||j}):ta.from(j,j&&j.code,p,H)}}},ooe=new Map,u5=e=>{let t=e&&e.env||{};const{fetch:n,Request:a,Response:r}=t,s=[a,r,n];let o=s.length,i=o,c,A,d=ooe;for(;i--;)c=s[i],A=d.get(c),A===void 0&&d.set(c,A=i?new Map:soe(t)),d=A;return A};u5();const Uk={http:xse,xhr:Zse,fetch:{get:u5}};Ct.forEach(Uk,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const i3=e=>`- ${e}`,ioe=e=>Ct.isFunction(e)||e===null||e===!1;function loe(e,t){e=Ct.isArray(e)?e:[e];const{length:n}=e;let a,r;const s={};for(let o=0;o<n;o++){a=e[o];let i;if(r=a,!ioe(a)&&(r=Uk[(i=String(a)).toLowerCase()],r===void 0))throw new ta(`Unknown adapter '${i}'`);if(r&&(Ct.isFunction(r)||(r=r.get(t))))break;s[i||"#"+o]=r}if(!r){const o=Object.entries(s).map(([c,A])=>`adapter ${c} `+(A===!1?"is not supported by the environment":"is not available in the build"));let i=n?o.length>1?`since :
`+o.map(i3).join(`
`):" "+i3(o[0]):"as no adapter specified";throw new ta("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return r}const c5={getAdapter:loe,adapters:Uk};function Mx(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new oh(null,e)}function l3(e){return Mx(e),e.headers=ui.from(e.headers),e.data=Lx.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),c5.getAdapter(e.adapter||yg.adapter,e)(e).then(function(a){return Mx(e),a.data=Lx.call(e,e.transformResponse,a),a.headers=ui.from(a.headers),a},function(a){return s5(a)||(Mx(e),a&&a.response&&(a.response.data=Lx.call(e,e.transformResponse,a.response),a.response.headers=ui.from(a.response.headers))),Promise.reject(a)})}const d5="1.13.2",mw={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{mw[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});const u3={};mw.transitional=function(t,n,a){function r(s,o){return"[Axios v"+d5+"] Transitional option '"+s+"'"+o+(a?". "+a:"")}return(s,o,i)=>{if(t===!1)throw new ta(r(o," has been removed"+(n?" in "+n:"")),ta.ERR_DEPRECATED);return n&&!u3[o]&&(u3[o]=!0,console.warn(r(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,o,i):!0}};mw.spelling=function(t){return(n,a)=>(console.warn(`${a} is likely a misspelling of ${t}`),!0)};function uoe(e,t,n){if(typeof e!="object")throw new ta("options must be an object",ta.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let r=a.length;for(;r-- >0;){const s=a[r],o=t[s];if(o){const i=e[s],c=i===void 0||o(i,s,e);if(c!==!0)throw new ta("option "+s+" must be "+c,ta.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ta("Unknown option "+s,ta.ERR_BAD_OPTION)}}const qy={assertOptions:uoe,validators:mw},hu=qy.validators;let rf=class{constructor(t){this.defaults=t||{},this.interceptors={request:new XD,response:new XD}}async request(t,n){try{return await this._request(t,n)}catch(a){if(a instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const s=r.stack?r.stack.replace(/^.+\n/,""):"";try{a.stack?s&&!String(a.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+s):a.stack=s}catch{}}throw a}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=pf(this.defaults,n);const{transitional:a,paramsSerializer:r,headers:s}=n;a!==void 0&&qy.assertOptions(a,{silentJSONParsing:hu.transitional(hu.boolean),forcedJSONParsing:hu.transitional(hu.boolean),clarifyTimeoutError:hu.transitional(hu.boolean)},!1),r!=null&&(Ct.isFunction(r)?n.paramsSerializer={serialize:r}:qy.assertOptions(r,{encode:hu.function,serialize:hu.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),qy.assertOptions(n,{baseUrl:hu.spelling("baseURL"),withXsrfToken:hu.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&Ct.merge(s.common,s[n.method]);s&&Ct.forEach(["delete","get","head","post","put","patch","common"],p=>{delete s[p]}),n.headers=ui.concat(o,s);const i=[];let c=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(n)===!1||(c=c&&y.synchronous,i.unshift(y.fulfilled,y.rejected))});const A=[];this.interceptors.response.forEach(function(y){A.push(y.fulfilled,y.rejected)});let d,f=0,m;if(!c){const p=[l3.bind(this),void 0];for(p.unshift(...i),p.push(...A),m=p.length,d=Promise.resolve(n);f<m;)d=d.then(p[f++],p[f++]);return d}m=i.length;let h=n;for(;f<m;){const p=i[f++],y=i[f++];try{h=p(h)}catch(g){y.call(this,g);break}}try{d=l3.call(this,h)}catch(p){return Promise.reject(p)}for(f=0,m=A.length;f<m;)d=d.then(A[f++],A[f++]);return d}getUri(t){t=pf(this.defaults,t);const n=i5(t.baseURL,t.url,t.allowAbsoluteUrls);return n5(n,t.params,t.paramsSerializer)}};Ct.forEach(["delete","get","head","options"],function(t){rf.prototype[t]=function(n,a){return this.request(pf(a||{},{method:t,url:n,data:(a||{}).data}))}});Ct.forEach(["post","put","patch"],function(t){function n(a){return function(s,o,i){return this.request(pf(i||{},{method:t,headers:a?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}rf.prototype[t]=n(),rf.prototype[t+"Form"]=n(!0)});let coe=class A5{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const a=this;this.promise.then(r=>{if(!a._listeners)return;let s=a._listeners.length;for(;s-- >0;)a._listeners[s](r);a._listeners=null}),this.promise.then=r=>{let s;const o=new Promise(i=>{a.subscribe(i),s=i}).then(r);return o.cancel=function(){a.unsubscribe(s)},o},t(function(s,o,i){a.reason||(a.reason=new oh(s,o,i),n(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=a=>{t.abort(a)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new A5(function(r){t=r}),cancel:t}}};function doe(e){return function(n){return e.apply(null,n)}}function Aoe(e){return Ct.isObject(e)&&e.isAxiosError===!0}const QS={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(QS).forEach(([e,t])=>{QS[t]=e});function f5(e){const t=new rf(e),n=G6(rf.prototype.request,t);return Ct.extend(n,rf.prototype,t,{allOwnKeys:!0}),Ct.extend(n,t,null,{allOwnKeys:!0}),n.create=function(r){return f5(pf(e,r))},n}const Ir=f5(yg);Ir.Axios=rf;Ir.CanceledError=oh;Ir.CancelToken=coe;Ir.isCancel=s5;Ir.VERSION=d5;Ir.toFormData=fw;Ir.AxiosError=ta;Ir.Cancel=Ir.CanceledError;Ir.all=function(t){return Promise.all(t)};Ir.spread=doe;Ir.isAxiosError=Aoe;Ir.mergeConfig=pf;Ir.AxiosHeaders=ui;Ir.formToJSON=e=>r5(Ct.isHTMLForm(e)?new FormData(e):e);Ir.getAdapter=c5.getAdapter;Ir.HttpStatusCode=QS;Ir.default=Ir;const{Axios:qrt,AxiosError:Yrt,CanceledError:Xrt,isCancel:Jrt,CancelToken:Zrt,VERSION:est,all:tst,Cancel:nst,isAxiosError:ast,spread:rst,toFormData:sst,AxiosHeaders:ost,HttpStatusCode:ist,formToJSON:lst,getAdapter:ust,mergeConfig:cst}=Ir,foe=()=>{};var c3={};const m5={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};const on=function(e,t){if(!e)throw ih(t)},ih=function(e){return new Error("Firebase Database ("+m5.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};const v5=function(e){const t=[];let n=0;for(let a=0;a<e.length;a++){let r=e.charCodeAt(a);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&a+1<e.length&&(e.charCodeAt(a+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++a)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},moe=function(e){const t=[];let n=0,a=0;for(;n<e.length;){const r=e[n++];if(r<128)t[a++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[a++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=e[n++],o=e[n++],i=e[n++],c=((r&7)<<18|(s&63)<<12|(o&63)<<6|i&63)-65536;t[a++]=String.fromCharCode(55296+(c>>10)),t[a++]=String.fromCharCode(56320+(c&1023))}else{const s=e[n++],o=e[n++];t[a++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return t.join("")},vw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let r=0;r<e.length;r+=3){const s=e[r],o=r+1<e.length,i=o?e[r+1]:0,c=r+2<e.length,A=c?e[r+2]:0,d=s>>2,f=(s&3)<<4|i>>4;let m=(i&15)<<2|A>>6,h=A&63;c||(h=64,o||(m=64)),a.push(n[d],n[f],n[m],n[h])}return a.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(v5(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):moe(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let r=0;r<e.length;){const s=n[e.charAt(r++)],i=r<e.length?n[e.charAt(r)]:0;++r;const A=r<e.length?n[e.charAt(r)]:64;++r;const f=r<e.length?n[e.charAt(r)]:64;if(++r,s==null||i==null||A==null||f==null)throw new voe;const m=s<<2|i>>4;if(a.push(m),A!==64){const h=i<<4&240|A>>2;if(a.push(h),f!==64){const p=A<<6&192|f;a.push(p)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class voe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const h5=function(e){const t=v5(e);return vw.encodeByteArray(t,!0)},p5=function(e){return h5(e).replace(/\./g,"")},R_=function(e){try{return vw.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function hoe(e){return g5(void 0,e)}function g5(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)!t.hasOwnProperty(n)||!poe(n)||(e[n]=g5(e[n],t[n]));return e}function poe(e){return e!=="__proto__"}function goe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const yoe=()=>goe().__FIREBASE_DEFAULTS__,_oe=()=>{if(typeof process>"u"||typeof c3>"u")return;const e=c3.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},woe=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&R_(e[1]);return t&&JSON.parse(t)},Rk=()=>{try{return foe()||yoe()||_oe()||woe()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},boe=e=>{var t,n;return(n=(t=Rk())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},y5=()=>{var e;return(e=Rk())===null||e===void 0?void 0:e.config},_5=e=>{var t;return(t=Rk())===null||t===void 0?void 0:t[`_${e}`]};class F0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,a)=>{n?this.reject(n):this.resolve(a),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,a))}}}function hw(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function xoe(e){return(await fetch(e,{credentials:"include"})).ok}const jp={};function Coe(){const e={prod:[],emulator:[]};for(const t of Object.keys(jp))jp[t]?e.emulator.push(t):e.prod.push(t);return e}function Soe(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let d3=!1;function Eoe(e,t){if(typeof window>"u"||typeof document>"u"||!hw(window.location.host)||jp[e]===t||jp[e]||d3)return;jp[e]=t;function n(m){return`__firebase__banner__${m}`}const a="__firebase__banner",s=Coe().prod.length>0;function o(){const m=document.getElementById(a);m&&m.remove()}function i(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,h){m.setAttribute("width","24"),m.setAttribute("id",h),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function A(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{d3=!0,o()},m}function d(m,h){m.setAttribute("id",h),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=Soe(a),h=n("text"),p=document.getElementById(h)||document.createElement("span"),y=n("learnmore"),g=document.getElementById(y)||document.createElement("a"),w=n("preprendIcon"),b=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const x=m.element;i(x),d(g,y);const T=A();c(b,w),x.append(b,p,g,T),document.body.appendChild(x)}s?(p.innerText="Preview backend disconnected.",b.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(b.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,p.innerText="Preview backend running in this workspace."),p.setAttribute("id",h)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}function $o(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Nk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($o())}function Boe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function koe(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function w5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Toe(){const e=$o();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Ioe(){return m5.NODE_ADMIN===!0}function b5(){try{return typeof indexedDB=="object"}catch{return!1}}function Foe(){return new Promise((e,t)=>{try{let n=!0;const a="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(a);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(a),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;t(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}const Poe="FirebaseError";class Gu extends Error{constructor(t,n,a){super(n),this.code=t,this.customData=a,this.name=Poe,Object.setPrototypeOf(this,Gu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lh.prototype.create)}}class lh{constructor(t,n,a){this.service=t,this.serviceName=n,this.errors=a}create(t,...n){const a=n[0]||{},r=`${this.service}/${t}`,s=this.errors[t],o=s?Doe(s,a):"Error",i=`${this.serviceName}: ${o} (${r}).`;return new Gu(r,i,a)}}function Doe(e,t){return e.replace(Uoe,(n,a)=>{const r=t[a];return r!=null?String(r):`<${a}?>`})}const Uoe=/\{\$([^}]+)}/g;function P0(e){return JSON.parse(e)}function Ws(e){return JSON.stringify(e)}const x5=function(e){let t={},n={},a={},r="";try{const s=e.split(".");t=P0(R_(s[0])||""),n=P0(R_(s[1])||""),r=s[2],a=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:a,signature:r}},Roe=function(e){const t=x5(e),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Noe=function(e){const t=x5(e).claims;return typeof t=="object"&&t.admin===!0};function zc(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Mv(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function GS(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function N_(e,t,n){const a={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=t.call(n,e[r],r,e));return a}function Ov(e,t){if(e===t)return!0;const n=Object.keys(e),a=Object.keys(t);for(const r of n){if(!a.includes(r))return!1;const s=e[r],o=t[r];if(A3(s)&&A3(o)){if(!Ov(s,o))return!1}else if(s!==o)return!1}for(const r of a)if(!n.includes(r))return!1;return!0}function A3(e){return e!==null&&typeof e=="object"}function uh(e){const t=[];for(const[n,a]of Object.entries(e))Array.isArray(a)?a.forEach(r=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a));return t.length?"&"+t.join("&"):""}class Voe{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n||(n=0);const a=this.W_;if(typeof t=="string")for(let f=0;f<16;f++)a[f]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let f=0;f<16;f++)a[f]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let f=16;f<80;f++){const m=a[f-3]^a[f-8]^a[f-14]^a[f-16];a[f]=(m<<1|m>>>31)&4294967295}let r=this.chain_[0],s=this.chain_[1],o=this.chain_[2],i=this.chain_[3],c=this.chain_[4],A,d;for(let f=0;f<80;f++){f<40?f<20?(A=i^s&(o^i),d=1518500249):(A=s^o^i,d=1859775393):f<60?(A=s&o|i&(s|o),d=2400959708):(A=s^o^i,d=3395469782);const m=(r<<5|r>>>27)+A+c+d+a[f]&4294967295;c=i,i=o,o=(s<<30|s>>>2)&4294967295,s=r,r=m}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+i&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(t,n){if(t==null)return;n===void 0&&(n=t.length);const a=n-this.blockSize;let r=0;const s=this.buf_;let o=this.inbuf_;for(;r<n;){if(o===0)for(;r<=a;)this.compress_(t,r),r+=this.blockSize;if(typeof t=="string"){for(;r<n;)if(s[o]=t.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}else for(;r<n;)if(s[o]=t[r],++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const t=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let a=0;for(let r=0;r<5;r++)for(let s=24;s>=0;s-=8)t[a]=this.chain_[r]>>s&255,++a;return t}}function Loe(e,t){const n=new Moe(e,t);return n.subscribe.bind(n)}class Moe{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(a=>{this.error(a)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,a){let r;if(t===void 0&&n===void 0&&a===void 0)throw new Error("Missing Observer.");Ooe(t,["next","error","complete"])?r=t:r={next:t,error:n,complete:a},r.next===void 0&&(r.next=Ox),r.error===void 0&&(r.error=Ox),r.complete===void 0&&(r.complete=Ox);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ooe(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Ox(){}function Hoe(e,t){return`${e} failed: ${t} argument `}const $oe=function(e){const t=[];let n=0;for(let a=0;a<e.length;a++){let r=e.charCodeAt(a);if(r>=55296&&r<=56319){const s=r-55296;a++,on(a<e.length,"Surrogate pair missing trail surrogate.");const o=e.charCodeAt(a)-56320;r=65536+(s<<10)+o}r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):r<65536?(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},pw=function(e){let t=0;for(let n=0;n<e.length;n++){const a=e.charCodeAt(n);a<128?t++:a<2048?t+=2:a>=55296&&a<=56319?(t+=4,n++):t+=3}return t};function zu(e){return e&&e._delegate?e._delegate:e}class jl{constructor(t,n,a){this.name=t,this.instanceFactory=n,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const LA="[DEFAULT]";class Qoe{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const a=new F0;if(this.instancesDeferred.set(n,a),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&a.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const a=this.normalizeInstanceIdentifier(t?.identifier),r=(n=t?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(zoe(t))try{this.getOrInitializeService({instanceIdentifier:LA})}catch{}for(const[n,a]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});a.resolve(s)}catch{}}}}clearInstance(t=LA){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=LA){return this.instances.has(t)}getOptions(t=LA){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:a,options:n});for(const[s,o]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(s);a===i&&o.resolve(r)}return r}onInit(t,n){var a;const r=this.normalizeInstanceIdentifier(n),s=(a=this.onInitCallbacks.get(r))!==null&&a!==void 0?a:new Set;s.add(t),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&t(o,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const a=this.onInitCallbacks.get(n);if(a)for(const r of a)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let a=this.instances.get(t);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:Goe(t),options:n}),this.instances.set(t,a),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(a,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,a)}catch{}return a||null}normalizeInstanceIdentifier(t=LA){return this.component?this.component.multipleInstances?t:LA:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Goe(e){return e===LA?void 0:e}function zoe(e){return e.instantiationMode==="EAGER"}class Koe{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Qoe(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}var Ya;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Ya||(Ya={}));const Woe={debug:Ya.DEBUG,verbose:Ya.VERBOSE,info:Ya.INFO,warn:Ya.WARN,error:Ya.ERROR,silent:Ya.SILENT},joe=Ya.INFO,qoe={[Ya.DEBUG]:"log",[Ya.VERBOSE]:"log",[Ya.INFO]:"info",[Ya.WARN]:"warn",[Ya.ERROR]:"error"},Yoe=(e,t,...n)=>{if(t<e.logLevel)return;const a=new Date().toISOString(),r=qoe[t];if(r)console[r](`[${a}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};let _g=class{constructor(t){this.name=t,this._logLevel=joe,this._logHandler=Yoe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ya))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Woe[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ya.DEBUG,...t),this._logHandler(this,Ya.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ya.VERBOSE,...t),this._logHandler(this,Ya.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ya.INFO,...t),this._logHandler(this,Ya.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ya.WARN,...t),this._logHandler(this,Ya.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ya.ERROR,...t),this._logHandler(this,Ya.ERROR,...t)}};const Xoe=(e,t)=>t.some(n=>e instanceof n);let f3,m3;function Joe(){return f3||(f3=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Zoe(){return m3||(m3=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const C5=new WeakMap,zS=new WeakMap,S5=new WeakMap,Hx=new WeakMap,Vk=new WeakMap;function eie(e){const t=new Promise((n,a)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(Ud(e.result)),r()},o=()=>{a(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&C5.set(n,e)}).catch(()=>{}),Vk.set(t,e),t}function tie(e){if(zS.has(e))return;const t=new Promise((n,a)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{a(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});zS.set(e,t)}let KS={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return zS.get(e);if(t==="objectStoreNames")return e.objectStoreNames||S5.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ud(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function nie(e){KS=e(KS)}function aie(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const a=e.call($x(this),t,...n);return S5.set(a,t.sort?t.sort():[t]),Ud(a)}:Zoe().includes(e)?function(...t){return e.apply($x(this),t),Ud(C5.get(this))}:function(...t){return Ud(e.apply($x(this),t))}}function rie(e){return typeof e=="function"?aie(e):(e instanceof IDBTransaction&&tie(e),Xoe(e,Joe())?new Proxy(e,KS):e)}function Ud(e){if(e instanceof IDBRequest)return eie(e);if(Hx.has(e))return Hx.get(e);const t=rie(e);return t!==e&&(Hx.set(e,t),Vk.set(t,e)),t}const $x=e=>Vk.get(e);function sie(e,t,{blocked:n,upgrade:a,blocking:r,terminated:s}={}){const o=indexedDB.open(e,t),i=Ud(o);return a&&o.addEventListener("upgradeneeded",c=>{a(Ud(o.result),c.oldVersion,c.newVersion,Ud(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),i.then(c=>{s&&c.addEventListener("close",()=>s()),r&&c.addEventListener("versionchange",A=>r(A.oldVersion,A.newVersion,A))}).catch(()=>{}),i}const oie=["get","getKey","getAll","getAllKeys","count"],iie=["put","add","delete","clear"],Qx=new Map;function v3(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Qx.get(t))return Qx.get(t);const n=t.replace(/FromIndex$/,""),a=t!==n,r=iie.includes(n);if(!(n in(a?IDBIndex:IDBObjectStore).prototype)||!(r||oie.includes(n)))return;const s=async function(o,...i){const c=this.transaction(o,r?"readwrite":"readonly");let A=c.store;return a&&(A=A.index(i.shift())),(await Promise.all([A[n](...i),r&&c.done]))[0]};return Qx.set(t,s),s}nie(e=>({...e,get:(t,n,a)=>v3(t,n)||e.get(t,n,a),has:(t,n)=>!!v3(t,n)||e.has(t,n)}));class lie{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(uie(n)){const a=n.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(n=>n).join(" ")}}function uie(e){const t=e.getComponent();return t?.type==="VERSION"}const WS="@firebase/app",h3="0.13.2";const Dc=new _g("@firebase/app"),cie="@firebase/app-compat",die="@firebase/analytics-compat",Aie="@firebase/analytics",fie="@firebase/app-check-compat",mie="@firebase/app-check",vie="@firebase/auth",hie="@firebase/auth-compat",pie="@firebase/database",gie="@firebase/data-connect",yie="@firebase/database-compat",_ie="@firebase/functions",wie="@firebase/functions-compat",bie="@firebase/installations",xie="@firebase/installations-compat",Cie="@firebase/messaging",Sie="@firebase/messaging-compat",Eie="@firebase/performance",Bie="@firebase/performance-compat",kie="@firebase/remote-config",Tie="@firebase/remote-config-compat",Iie="@firebase/storage",Fie="@firebase/storage-compat",Pie="@firebase/firestore",Die="@firebase/ai",Uie="@firebase/firestore-compat",Rie="firebase",Nie="11.10.0";const jS="[DEFAULT]",Vie={[WS]:"fire-core",[cie]:"fire-core-compat",[Aie]:"fire-analytics",[die]:"fire-analytics-compat",[mie]:"fire-app-check",[fie]:"fire-app-check-compat",[vie]:"fire-auth",[hie]:"fire-auth-compat",[pie]:"fire-rtdb",[gie]:"fire-data-connect",[yie]:"fire-rtdb-compat",[_ie]:"fire-fn",[wie]:"fire-fn-compat",[bie]:"fire-iid",[xie]:"fire-iid-compat",[Cie]:"fire-fcm",[Sie]:"fire-fcm-compat",[Eie]:"fire-perf",[Bie]:"fire-perf-compat",[kie]:"fire-rc",[Tie]:"fire-rc-compat",[Iie]:"fire-gcs",[Fie]:"fire-gcs-compat",[Pie]:"fire-fst",[Uie]:"fire-fst-compat",[Die]:"fire-vertex","fire-js":"fire-js",[Rie]:"fire-js-all"};const V_=new Map,Lie=new Map,qS=new Map;function p3(e,t){try{e.container.addComponent(t)}catch(n){Dc.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Nu(e){const t=e.name;if(qS.has(t))return Dc.debug(`There were multiple attempts to register component ${t}.`),!1;qS.set(t,e);for(const n of V_.values())p3(n,e);for(const n of Lie.values())p3(n,e);return!0}function E5(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function tl(e){return e==null?!1:e.settings!==void 0}const Mie={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rd=new lh("app","Firebase",Mie);class Oie{constructor(t,n,a){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new jl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Rd.create("app-deleted",{appName:this._name})}}const lA=Nie;function B5(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const a=Object.assign({name:jS,automaticDataCollectionEnabled:!0},t),r=a.name;if(typeof r!="string"||!r)throw Rd.create("bad-app-name",{appName:String(r)});if(n||(n=y5()),!n)throw Rd.create("no-options");const s=V_.get(r);if(s){if(Ov(n,s.options)&&Ov(a,s.config))return s;throw Rd.create("duplicate-app",{appName:r})}const o=new Koe(r);for(const c of qS.values())o.addComponent(c);const i=new Oie(n,a,o);return V_.set(r,i),i}function k5(e=jS){const t=V_.get(e);if(!t&&e===jS&&y5())return B5();if(!t)throw Rd.create("no-app",{appName:e});return t}function Fi(e,t,n){var a;let r=(a=Vie[e])!==null&&a!==void 0?a:e;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const i=[`Unable to register library "${r}" with version "${t}":`];s&&i.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&i.push("and"),o&&i.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Dc.warn(i.join(" "));return}Nu(new jl(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}const Hie="firebase-heartbeat-database",$ie=1,D0="firebase-heartbeat-store";let Gx=null;function T5(){return Gx||(Gx=sie(Hie,$ie,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(D0)}catch(n){console.warn(n)}}}}).catch(e=>{throw Rd.create("idb-open",{originalErrorMessage:e.message})})),Gx}async function Qie(e){try{const n=(await T5()).transaction(D0),a=await n.objectStore(D0).get(I5(e));return await n.done,a}catch(t){if(t instanceof Gu)Dc.warn(t.message);else{const n=Rd.create("idb-get",{originalErrorMessage:t?.message});Dc.warn(n.message)}}}async function g3(e,t){try{const a=(await T5()).transaction(D0,"readwrite");await a.objectStore(D0).put(t,I5(e)),await a.done}catch(n){if(n instanceof Gu)Dc.warn(n.message);else{const a=Rd.create("idb-set",{originalErrorMessage:n?.message});Dc.warn(a.message)}}}function I5(e){return`${e.name}!${e.options.appId}`}const Gie=1024,zie=30;class Kie{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new jie(n),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var t,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=y3();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>zie){const o=qie(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){Dc.warn(a)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=y3(),{heartbeatsToSend:a,unsentEntries:r}=Wie(this._heartbeatsCache.heartbeats),s=p5(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Dc.warn(n),""}}}function y3(){return new Date().toISOString().substring(0,10)}function Wie(e,t=Gie){const n=[];let a=e.slice();for(const r of e){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),_3(n)>t){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),_3(n)>t){n.pop();break}a=a.slice(1)}return{heartbeatsToSend:n,unsentEntries:a}}class jie{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return b5()?Foe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Qie(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return g3(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return g3(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function _3(e){return p5(JSON.stringify({version:2,heartbeats:e})).length}function qie(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let a=1;a<e.length;a++)e[a].date<n&&(n=e[a].date,t=a);return t}function Yie(e){Nu(new jl("platform-logger",t=>new lie(t),"PRIVATE")),Nu(new jl("heartbeat",t=>new Kie(t),"PRIVATE")),Fi(WS,h3,e),Fi(WS,h3,"esm2017"),Fi("fire-js","")}Yie("");var Xie="firebase",Jie="11.10.0";Fi(Xie,Jie,"app");function Lk(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n}function F5(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Zie=F5,P5=new lh("auth","Firebase",F5());const L_=new _g("@firebase/auth");function ele(e,...t){L_.logLevel<=Ya.WARN&&L_.warn(`Auth (${lA}): ${e}`,...t)}function Yy(e,...t){L_.logLevel<=Ya.ERROR&&L_.error(`Auth (${lA}): ${e}`,...t)}function Uc(e,...t){throw Mk(e,...t)}function Fu(e,...t){return Mk(e,...t)}function D5(e,t,n){const a=Object.assign(Object.assign({},Zie()),{[t]:n});return new lh("auth","Firebase",a).create(t,{appName:e.name})}function sf(e){return D5(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Mk(e,...t){if(typeof e!="string"){const n=t[0],a=[...t.slice(1)];return a[0]&&(a[0].appName=e.name),e._errorFactory.create(n,...a)}return P5.create(e,...t)}function Gn(e,t,...n){if(!e)throw Mk(t,...n)}function wc(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Yy(t),new Error(t)}function Rc(e,t){e||wc(t)}function YS(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function tle(){return w3()==="http:"||w3()==="https:"}function w3(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}function nle(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tle()||koe()||"connection"in navigator)?navigator.onLine:!0}function ale(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}class wg{constructor(t,n){this.shortDelay=t,this.longDelay=n,Rc(n>t,"Short delay should be less than long delay!"),this.isMobile=Nk()||w5()}get(){return nle()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ok(e,t){Rc(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class U5{static initialize(t,n,a){this.fetchImpl=t,n&&(this.headersImpl=n),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const rle={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const sle=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ole=new wg(3e4,6e4);function Hk(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function ch(e,t,n,a,r={}){return R5(e,r,async()=>{let s={},o={};a&&(t==="GET"?o=a:s={body:JSON.stringify(a)});const i=uh(Object.assign({key:e.config.apiKey},o)).slice(1),c=await e._getAdditionalHeaders();c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode);const A=Object.assign({method:t,headers:c},s);return Boe()||(A.referrerPolicy="no-referrer"),e.emulatorConfig&&hw(e.emulatorConfig.host)&&(A.credentials="include"),U5.fetch()(await N5(e,e.config.apiHost,n,i),A)})}async function R5(e,t,n){e._canInitEmulator=!1;const a=Object.assign(Object.assign({},rle),t);try{const r=new lle(e),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Y1(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const i=s.ok?o.errorMessage:o.error.message,[c,A]=i.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Y1(e,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Y1(e,"email-already-in-use",o);if(c==="USER_DISABLED")throw Y1(e,"user-disabled",o);const d=a[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(A)throw D5(e,d,A);Uc(e,d)}}catch(r){if(r instanceof Gu)throw r;Uc(e,"network-request-failed",{message:String(r)})}}async function ile(e,t,n,a,r={}){const s=await ch(e,t,n,a,r);return"mfaPendingCredential"in s&&Uc(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function N5(e,t,n,a){const r=`${t}${n}?${a}`,s=e,o=s.config.emulator?Ok(e.config,r):`${e.config.apiScheme}://${r}`;return sle.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}class lle{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,a)=>{this.timer=setTimeout(()=>a(Fu(this.auth,"network-request-failed")),ole.get())})}}function Y1(e,t,n){const a={appName:e.name};n.email&&(a.email=n.email),n.phoneNumber&&(a.phoneNumber=n.phoneNumber);const r=Fu(e,t,a);return r.customData._tokenResponse=n,r}async function ule(e,t){return ch(e,"POST","/v1/accounts:delete",t)}async function M_(e,t){return ch(e,"POST","/v1/accounts:lookup",t)}function qp(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function cle(e,t=!1){const n=zu(e),a=await n.getIdToken(t),r=$k(a);Gn(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:a,authTime:qp(zx(r.auth_time)),issuedAtTime:qp(zx(r.iat)),expirationTime:qp(zx(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function zx(e){return Number(e)*1e3}function $k(e){const[t,n,a]=e.split(".");if(t===void 0||n===void 0||a===void 0)return Yy("JWT malformed, contained fewer than 3 sections"),null;try{const r=R_(n);return r?JSON.parse(r):(Yy("Failed to decode base64 JWT payload"),null)}catch(r){return Yy("Caught error parsing JWT payload as JSON",r?.toString()),null}}function b3(e){const t=$k(e);return Gn(t,"internal-error"),Gn(typeof t.exp<"u","internal-error"),Gn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function U0(e,t,n=!1){if(n)return t;try{return await t}catch(a){throw a instanceof Gu&&dle(a)&&e.auth.currentUser===e&&await e.auth.signOut(),a}}function dle({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}class Ale{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const a=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),a}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class XS{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=qp(this.lastLoginAt),this.creationTime=qp(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function O_(e){var t;const n=e.auth,a=await e.getIdToken(),r=await U0(e,M_(n,{idToken:a}));Gn(r?.users.length,n,"internal-error");const s=r.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?V5(s.providerUserInfo):[],i=mle(e.providerData,o),c=e.isAnonymous,A=!(e.email&&s.passwordHash)&&!i?.length,d=c?A:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new XS(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}async function fle(e){const t=zu(e);await O_(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function mle(e,t){return[...e.filter(a=>!t.some(r=>r.providerId===a.providerId)),...t]}function V5(e){return e.map(t=>{var{providerId:n}=t,a=Lk(t,["providerId"]);return{providerId:n,uid:a.rawId||"",displayName:a.displayName||null,email:a.email||null,phoneNumber:a.phoneNumber||null,photoURL:a.photoUrl||null}})}async function vle(e,t){const n=await R5(e,{},async()=>{const a=uh({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,o=await N5(e,r,"/v1/token",`key=${s}`),i=await e._getAdditionalHeaders();i["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:i,body:a};return e.emulatorConfig&&hw(e.emulatorConfig.host)&&(c.credentials="include"),U5.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function hle(e,t){return ch(e,"POST","/v2/accounts:revokeToken",Hk(e,t))}class vv{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Gn(t.idToken,"internal-error"),Gn(typeof t.idToken<"u","internal-error"),Gn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):b3(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Gn(t.length!==0,"internal-error");const n=b3(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Gn(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:a,refreshToken:r,expiresIn:s}=await vle(t,n);this.updateTokensAndExpiration(a,r,Number(s))}updateTokensAndExpiration(t,n,a){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(t,n){const{refreshToken:a,accessToken:r,expirationTime:s}=n,o=new vv;return a&&(Gn(typeof a=="string","internal-error",{appName:t}),o.refreshToken=a),r&&(Gn(typeof r=="string","internal-error",{appName:t}),o.accessToken=r),s&&(Gn(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new vv,this.toJSON())}_performRefresh(){return wc("not implemented")}}function ud(e,t){Gn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Pl{constructor(t){var{uid:n,auth:a,stsTokenManager:r}=t,s=Lk(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ale(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=a,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new XS(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await U0(this,this.stsTokenManager.getToken(this.auth,t));return Gn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return cle(this,t)}reload(){return fle(this)}_assign(t){this!==t&&(Gn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Pl(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){Gn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let a=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),a=!0),n&&await O_(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(tl(this.auth.app))return Promise.reject(sf(this.auth));const t=await this.getIdToken();return await U0(this,ule(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var a,r,s,o,i,c,A,d;const f=(a=n.displayName)!==null&&a!==void 0?a:void 0,m=(r=n.email)!==null&&r!==void 0?r:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,y=(i=n.tenantId)!==null&&i!==void 0?i:void 0,g=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,w=(A=n.createdAt)!==null&&A!==void 0?A:void 0,b=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:x,emailVerified:T,isAnonymous:F,providerData:k,stsTokenManager:S}=n;Gn(x&&S,t,"internal-error");const E=vv.fromJSON(this.name,S);Gn(typeof x=="string",t,"internal-error"),ud(f,t.name),ud(m,t.name),Gn(typeof T=="boolean",t,"internal-error"),Gn(typeof F=="boolean",t,"internal-error"),ud(h,t.name),ud(p,t.name),ud(y,t.name),ud(g,t.name),ud(w,t.name),ud(b,t.name);const C=new Pl({uid:x,auth:t,email:m,emailVerified:T,displayName:f,isAnonymous:F,photoURL:p,phoneNumber:h,tenantId:y,stsTokenManager:E,createdAt:w,lastLoginAt:b});return k&&Array.isArray(k)&&(C.providerData=k.map(D=>Object.assign({},D))),g&&(C._redirectEventId=g),C}static async _fromIdTokenResponse(t,n,a=!1){const r=new vv;r.updateFromServerResponse(n);const s=new Pl({uid:n.localId,auth:t,stsTokenManager:r,isAnonymous:a});return await O_(s),s}static async _fromGetAccountInfoResponse(t,n,a){const r=n.users[0];Gn(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?V5(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,i=new vv;i.updateFromIdToken(a);const c=new Pl({uid:r.localId,auth:t,stsTokenManager:i,isAnonymous:o}),A={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new XS(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(c,A),c}}const x3=new Map;function bc(e){Rc(e instanceof Function,"Expected a class definition");let t=x3.get(e);return t?(Rc(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,x3.set(e,t),t)}class L5{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}L5.type="NONE";const C3=L5;function Xy(e,t,n){return`firebase:${e}:${t}:${n}`}class hv{constructor(t,n,a){this.persistence=t,this.auth=n,this.userKey=a;const{config:r,name:s}=this.auth;this.fullUserKey=Xy(this.userKey,r.apiKey,s),this.fullPersistenceKey=Xy("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await M_(this.auth,{idToken:t}).catch(()=>{});return n?Pl._fromGetAccountInfoResponse(this.auth,n,t):null}return Pl._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,a="authUser"){if(!n.length)return new hv(bc(C3),t,a);const r=(await Promise.all(n.map(async A=>{if(await A._isAvailable())return A}))).filter(A=>A);let s=r[0]||bc(C3);const o=Xy(a,t.config.apiKey,t.name);let i=null;for(const A of n)try{const d=await A._get(o);if(d){let f;if(typeof d=="string"){const m=await M_(t,{idToken:d}).catch(()=>{});if(!m)break;f=await Pl._fromGetAccountInfoResponse(t,m,d)}else f=Pl._fromJSON(t,d);A!==s&&(i=f),s=A;break}}catch{}const c=r.filter(A=>A._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new hv(s,t,a):(s=c[0],i&&await s._set(o,i.toJSON()),await Promise.all(n.map(async A=>{if(A!==s)try{await A._remove(o)}catch{}})),new hv(s,t,a))}}function S3(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if($5(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(M5(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(G5(t))return"Blackberry";if(z5(t))return"Webos";if(O5(t))return"Safari";if((t.includes("chrome/")||H5(t))&&!t.includes("edge/"))return"Chrome";if(Q5(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=e.match(n);if(a?.length===2)return a[1]}return"Other"}function M5(e=$o()){return/firefox\//i.test(e)}function O5(e=$o()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function H5(e=$o()){return/crios\//i.test(e)}function $5(e=$o()){return/iemobile/i.test(e)}function Q5(e=$o()){return/android/i.test(e)}function G5(e=$o()){return/blackberry/i.test(e)}function z5(e=$o()){return/webos/i.test(e)}function Qk(e=$o()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ple(e=$o()){var t;return Qk(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function gle(){return Toe()&&document.documentMode===10}function K5(e=$o()){return Qk(e)||Q5(e)||z5(e)||G5(e)||/windows phone/i.test(e)||$5(e)}function W5(e,t=[]){let n;switch(e){case"Browser":n=S3($o());break;case"Worker":n=`${S3($o())}-${e}`;break;default:n=e}const a=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${lA}/${a}`}class yle{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const a=s=>new Promise((o,i)=>{try{const c=t(s);o(c)}catch(c){i(c)}});a.onAbort=n,this.queue.push(a);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const a of this.queue)await a(t),a.onAbort&&n.push(a.onAbort)}catch(a){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a?.message})}}}async function _le(e,t={}){return ch(e,"GET","/v2/passwordPolicy",Hk(e,t))}const wle=6;class ble{constructor(t){var n,a,r,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:wle,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(a=t.allowedNonAlphanumericCharacters)===null||a===void 0?void 0:a.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,a,r,s,o,i;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,c),this.validatePasswordCharacterOptions(t,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(a=c.meetsMaxPasswordLength)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(i=c.containsNonAlphanumericCharacter)!==null&&i!==void 0?i:!0),c}validatePasswordLengthOptions(t,n){const a=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;a&&(n.meetsMinPasswordLength=t.length>=a),r&&(n.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let a;for(let r=0;r<t.length;r++)a=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(t,n,a,r,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}class xle{constructor(t,n,a,r){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=a,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new E3(this),this.idTokenSubscription=new E3(this),this.beforeStateQueue=new yle(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=P5,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=bc(n)),this._initializationPromise=this.queue(async()=>{var a,r,s;if(!this._deleted&&(this.persistenceManager=await hv.create(this,t),(a=this._resolvePersistenceManagerAvailable)===null||a===void 0||a.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await M_(this,{idToken:t}),a=await Pl._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(a)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(tl(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(i=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(i,i))}):this.directlySetCurrentUser(null)}const a=await this.assertedPersistence.getCurrentUser();let r=a,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,i=r?._redirectEventId,c=await this.tryRedirectSignIn(t);(!o||o===i)&&c?.user&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=a,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Gn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await O_(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=ale()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(tl(this.app))return Promise.reject(sf(this));const n=t?zu(t):null;return n&&Gn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Gn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return tl(this.app)?Promise.reject(sf(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return tl(this.app)?Promise.reject(sf(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(bc(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await _le(this),n=new ble(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new lh("auth","Firebase",t())}onAuthStateChanged(t,n,a){return this.registerStateListener(this.authStateSubscription,t,n,a)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,a){return this.registerStateListener(this.idTokenSubscription,t,n,a)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const a=this.onAuthStateChanged(()=>{a(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(a.tenantId=this.tenantId),await hle(this,a)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const a=await this.getOrInitRedirectPersistenceManager(n);return t===null?a.removeCurrentUser():a.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&bc(t)||this._popupRedirectResolver;Gn(n,this,"argument-error"),this.redirectPersistenceManager=await hv.create(this,[bc(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,a;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((a=this.redirectUser)===null||a===void 0?void 0:a._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const a=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==a&&(this.lastNotifiedUid=a,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,a,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const i=this._isInitialized?Promise.resolve():this._initializationPromise;if(Gn(i,this,"internal-error"),i.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const c=t.addObserver(n,a,r);return()=>{o=!0,c()}}else{const c=t.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Gn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=W5(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const a=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());a&&(n["X-Firebase-Client"]=a);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var t;if(tl(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n?.error&&ele(`Error while retrieving App Check token: ${n.error}`),n?.token}}function gw(e){return zu(e)}class E3{constructor(t){this.auth=t,this.observer=null,this.addObserver=Loe(n=>this.observer=n)}get next(){return Gn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Gk={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Cle(e){Gk=e}function Sle(e){return Gk.loadJS(e)}function Ele(){return Gk.gapiScript}function Ble(e){return`__${e}${Math.floor(Math.random()*1e6)}`}function j5(e,t){const n=E5(e,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(Ov(s,t??{}))return r;Uc(r,"already-initialized")}return n.initialize({options:t})}function kle(e,t){const n=t?.persistence||[],a=(Array.isArray(n)?n:[n]).map(bc);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(a,t?.popupRedirectResolver)}function Tle(e,t,n){const a=gw(e);Gn(/^https?:\/\//.test(t),a,"invalid-emulator-scheme");const r=!1,s=q5(t),{host:o,port:i}=Ile(t),c=i===null?"":`:${i}`,A={url:`${s}//${o}${c}/`},d=Object.freeze({host:o,port:i,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!a._canInitEmulator){Gn(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),Gn(Ov(A,a.config.emulator)&&Ov(d,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=A,a.emulatorConfig=d,a.settings.appVerificationDisabledForTesting=!0,hw(o)?(xoe(`${s}//${o}${c}`),Eoe("Auth",!0)):Fle()}function q5(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ile(e){const t=q5(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const a=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(a);if(r){const s=r[1];return{host:s,port:B3(a.substr(s.length+1))}}else{const[s,o]=a.split(":");return{host:s,port:B3(o)}}}function B3(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function Fle(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}class Y5{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return wc("not implemented")}_getIdTokenResponse(t){return wc("not implemented")}_linkToIdToken(t,n){return wc("not implemented")}_getReauthenticationResolver(t){return wc("not implemented")}}async function pv(e,t){return ile(e,"POST","/v1/accounts:signInWithIdp",Hk(e,t))}const Ple="http://localhost";class gf extends Y5{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new gf(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Uc("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:a,signInMethod:r}=n,s=Lk(n,["providerId","signInMethod"]);if(!a||!r)return null;const o=new gf(a,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return pv(t,n)}_linkToIdToken(t,n){const a=this.buildRequest();return a.idToken=n,pv(t,a)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,pv(t,n)}buildRequest(){const t={requestUri:Ple,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=uh(n)}return t}}class X5{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class bg extends X5{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class wd extends bg{constructor(){super("facebook.com")}static credential(t){return gf._fromParams({providerId:wd.PROVIDER_ID,signInMethod:wd.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return wd.credentialFromTaggedObject(t)}static credentialFromError(t){return wd.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return wd.credential(t.oauthAccessToken)}catch{return null}}}wd.FACEBOOK_SIGN_IN_METHOD="facebook.com";wd.PROVIDER_ID="facebook.com";class Su extends bg{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return gf._fromParams({providerId:Su.PROVIDER_ID,signInMethod:Su.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Su.credentialFromTaggedObject(t)}static credentialFromError(t){return Su.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:a}=t;if(!n&&!a)return null;try{return Su.credential(n,a)}catch{return null}}}Su.GOOGLE_SIGN_IN_METHOD="google.com";Su.PROVIDER_ID="google.com";class bd extends bg{constructor(){super("github.com")}static credential(t){return gf._fromParams({providerId:bd.PROVIDER_ID,signInMethod:bd.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return bd.credentialFromTaggedObject(t)}static credentialFromError(t){return bd.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return bd.credential(t.oauthAccessToken)}catch{return null}}}bd.GITHUB_SIGN_IN_METHOD="github.com";bd.PROVIDER_ID="github.com";class xd extends bg{constructor(){super("twitter.com")}static credential(t,n){return gf._fromParams({providerId:xd.PROVIDER_ID,signInMethod:xd.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return xd.credentialFromTaggedObject(t)}static credentialFromError(t){return xd.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:a}=t;if(!n||!a)return null;try{return xd.credential(n,a)}catch{return null}}}xd.TWITTER_SIGN_IN_METHOD="twitter.com";xd.PROVIDER_ID="twitter.com";class Hv{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,a,r=!1){const s=await Pl._fromIdTokenResponse(t,a,r),o=k3(a);return new Hv({user:s,providerId:o,_tokenResponse:a,operationType:n})}static async _forOperation(t,n,a){await t._updateTokensIfNecessary(a,!0);const r=k3(a);return new Hv({user:t,providerId:r,_tokenResponse:a,operationType:n})}}function k3(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class H_ extends Gu{constructor(t,n,a,r){var s;super(n.code,n.message),this.operationType=a,this.user=r,Object.setPrototypeOf(this,H_.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(t,n,a,r){return new H_(t,n,a,r)}}function J5(e,t,n,a){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?H_._fromErrorAndOperation(e,s,t,a):s})}async function Dle(e,t,n=!1){const a=await U0(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Hv._forOperation(e,"link",a)}async function Ule(e,t,n=!1){const{auth:a}=e;if(tl(a.app))return Promise.reject(sf(a));const r="reauthenticate";try{const s=await U0(e,J5(a,r,t,e),n);Gn(s.idToken,a,"internal-error");const o=$k(s.idToken);Gn(o,a,"internal-error");const{sub:i}=o;return Gn(e.uid===i,a,"user-mismatch"),Hv._forOperation(e,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&Uc(a,"user-mismatch"),s}}async function Z5(e,t,n=!1){if(tl(e.app))return Promise.reject(sf(e));const a="signIn",r=await J5(e,a,t),s=await Hv._fromIdTokenResponse(e,a,r);return n||await e._updateCurrentUser(s.user),s}async function Rle(e,t){return Z5(gw(e),t)}function Nle(e,t){return zu(e).setPersistence(t)}function eM(e,t,n,a){return zu(e).onIdTokenChanged(t,n,a)}function Vle(e,t,n){return zu(e).beforeAuthStateChanged(t,n)}function Lle(e,t,n,a){return zu(e).onAuthStateChanged(t,n,a)}function Mle(e){return zu(e).signOut()}const $_="__sak";class tM{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem($_,"1"),this.storage.removeItem($_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ole=1e3,Hle=10;class nM extends tM{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=K5(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const a=this.storage.getItem(n),r=this.localCache[n];a!==r&&t(n,r,a)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,i,c)=>{this.notifyListeners(o,c)});return}const a=t.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(a);!n&&this.localCache[a]===o||this.notifyListeners(a,o)},s=this.storage.getItem(a);gle()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,Hle):r()}notifyListeners(t,n){this.localCache[t]=n;const a=this.listeners[t];if(a)for(const r of Array.from(a))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:a}),!0)})},Ole)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}nM.type="LOCAL";const zk=nM;class aM extends tM{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}aM.type="SESSION";const Kk=aM;function $le(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}class yw{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(r=>r.isListeningto(t));if(n)return n;const a=new yw(t);return this.receivers.push(a),a}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:a,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:a,eventType:r});const i=Array.from(o).map(async A=>A(n.origin,s)),c=await $le(i);n.ports[0].postMessage({status:"done",eventId:a,eventType:r,response:c})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yw.receivers=[];function Wk(e="",t=10){let n="";for(let a=0;a<t;a++)n+=Math.floor(Math.random()*10);return e+n}class Qle{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,a=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((i,c)=>{const A=Wk("",20);r.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},a);o={messageChannel:r,onMessage(f){const m=f;if(m.data.eventId===A)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),i(m.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:A,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function Pu(){return window}function Gle(e){Pu().location.href=e}function rM(){return typeof Pu().WorkerGlobalScope<"u"&&typeof Pu().importScripts=="function"}async function zle(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Kle(){var e;return((e=navigator?.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function Wle(){return rM()?self:null}const sM="firebaseLocalStorageDb",jle=1,Q_="firebaseLocalStorage",oM="fbase_key";class xg{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function _w(e,t){return e.transaction([Q_],t?"readwrite":"readonly").objectStore(Q_)}function qle(){const e=indexedDB.deleteDatabase(sM);return new xg(e).toPromise()}function JS(){const e=indexedDB.open(sM,jle);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const a=e.result;try{a.createObjectStore(Q_,{keyPath:oM})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const a=e.result;a.objectStoreNames.contains(Q_)?t(a):(a.close(),await qle(),t(await JS()))})})}async function T3(e,t,n){const a=_w(e,!0).put({[oM]:t,value:n});return new xg(a).toPromise()}async function Yle(e,t){const n=_w(e,!1).get(t),a=await new xg(n).toPromise();return a===void 0?null:a.value}function I3(e,t){const n=_w(e,!0).delete(t);return new xg(n).toPromise()}const Xle=800,Jle=3;class iM{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await JS(),this.db)}async _withRetries(t){let n=0;for(;;)try{const a=await this._openDb();return await t(a)}catch(a){if(n++>Jle)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rM()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yw._getInstance(Wle()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await zle(),!this.activeServiceWorker)return;this.sender=new Qle(this.activeServiceWorker);const a=await this.sender._send("ping",{},800);a&&!((t=a[0])===null||t===void 0)&&t.fulfilled&&!((n=a[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Kle()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await JS();return await T3(t,$_,"1"),await I3(t,$_),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(a=>T3(a,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(a=>Yle(a,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>I3(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const s=_w(r,!1).getAll();return new xg(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],a=new Set;if(t.length!==0)for(const{fbase_key:r,value:s}of t)a.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!a.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(t,n){this.localCache[t]=n;const a=this.listeners[t];if(a)for(const r of Array.from(a))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Xle)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iM.type="LOCAL";const lM=iM;new wg(3e4,6e4);function Zle(e,t){return t?bc(t):(Gn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}class jk extends Y5{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return pv(t,this._buildIdpRequest())}_linkToIdToken(t,n){return pv(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return pv(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function eue(e){return Z5(e.auth,new jk(e),e.bypassAuthState)}function tue(e){const{auth:t,user:n}=e;return Gn(n,t,"internal-error"),Ule(n,new jk(e),e.bypassAuthState)}async function nue(e){const{auth:t,user:n}=e;return Gn(n,t,"internal-error"),Dle(n,new jk(e),e.bypassAuthState)}class uM{constructor(t,n,a,r,s=!1){this.auth=t,this.resolver=a,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:a,postBody:r,tenantId:s,error:o,type:i}=t;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:a,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(i)(c))}catch(A){this.reject(A)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return eue;case"linkViaPopup":case"linkViaRedirect":return nue;case"reauthViaPopup":case"reauthViaRedirect":return tue;default:Uc(this.auth,"internal-error")}}resolve(t){Rc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Rc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const aue=new wg(2e3,1e4);class Zm extends uM{constructor(t,n,a,r,s){super(t,n,r,s),this.provider=a,this.authWindow=null,this.pollId=null,Zm.currentPopupAction&&Zm.currentPopupAction.cancel(),Zm.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Gn(t,this.auth,"internal-error"),t}async onExecution(){Rc(this.filter.length===1,"Popup operations only handle one event");const t=Wk();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Fu(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Fu(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Zm.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,a;if(!((a=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||a===void 0)&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fu(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,aue.get())};t()}}Zm.currentPopupAction=null;const rue="pendingRedirect",Jy=new Map;class sue extends uM{constructor(t,n,a=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,a),this.eventId=null}async execute(){let t=Jy.get(this.auth._key());if(!t){try{const a=await oue(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(a)}catch(n){t=()=>Promise.reject(n)}Jy.set(this.auth._key(),t)}return this.bypassAuthState||Jy.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function oue(e,t){const n=uue(t),a=lue(e);if(!await a._isAvailable())return!1;const r=await a._get(n)==="true";return await a._remove(n),r}function iue(e,t){Jy.set(e._key(),t)}function lue(e){return bc(e._redirectPersistence)}function uue(e){return Xy(rue,e.config.apiKey,e.name)}async function cue(e,t,n=!1){if(tl(e.app))return Promise.reject(sf(e));const a=gw(e),r=Zle(a,t),o=await new sue(a,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await a._persistUserIfCurrent(o.user),await a._setRedirectUser(null,t)),o}const due=600*1e3;class Aue{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(t,a)&&(n=!0,this.sendToConsumer(t,a),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!fue(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var a;if(t.error&&!cM(t)){const r=((a=t.error.code)===null||a===void 0?void 0:a.split("auth/")[1])||"internal-error";n.onError(Fu(this.auth,r))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const a=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&a}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=due&&this.cachedEventUids.clear(),this.cachedEventUids.has(F3(t))}saveEventToCache(t){this.cachedEventUids.add(F3(t)),this.lastProcessedEventTime=Date.now()}}function F3(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function cM({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function fue(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cM(e);default:return!1}}async function mue(e,t={}){return ch(e,"GET","/v1/projects",t)}const vue=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hue=/^https?/;async function pue(e){if(e.config.emulator)return;const{authorizedDomains:t}=await mue(e);for(const n of t)try{if(gue(n))return}catch{}Uc(e,"unauthorized-domain")}function gue(e){const t=YS(),{protocol:n,hostname:a}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&a===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===a}if(!hue.test(n))return!1;if(vue.test(e))return a===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(a)}const yue=new wg(3e4,6e4);function P3(){const e=Pu().___jsl;if(e?.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function _ue(e){return new Promise((t,n)=>{var a,r,s;function o(){P3(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{P3(),n(Fu(e,"network-request-failed"))},timeout:yue.get()})}if(!((r=(a=Pu().gapi)===null||a===void 0?void 0:a.iframes)===null||r===void 0)&&r.Iframe)t(gapi.iframes.getContext());else if(!((s=Pu().gapi)===null||s===void 0)&&s.load)o();else{const i=Ble("iframefcb");return Pu()[i]=()=>{gapi.load?o():n(Fu(e,"network-request-failed"))},Sle(`${Ele()}?onload=${i}`).catch(c=>n(c))}}).catch(t=>{throw Zy=null,t})}let Zy=null;function wue(e){return Zy=Zy||_ue(e),Zy}const bue=new wg(5e3,15e3),xue="__/auth/iframe",Cue="emulator/auth/iframe",Sue={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Eue=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Bue(e){const t=e.config;Gn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Ok(t,Cue):`https://${e.config.authDomain}/${xue}`,a={apiKey:t.apiKey,appName:e.name,v:lA},r=Eue.get(e.config.apiHost);r&&(a.eid=r);const s=e._getFrameworks();return s.length&&(a.fw=s.join(",")),`${n}?${uh(a).slice(1)}`}async function kue(e){const t=await wue(e),n=Pu().gapi;return Gn(n,e,"internal-error"),t.open({where:document.body,url:Bue(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Sue,dontclear:!0},a=>new Promise(async(r,s)=>{await a.restyle({setHideOnLeave:!1});const o=Fu(e,"network-request-failed"),i=Pu().setTimeout(()=>{s(o)},bue.get());function c(){Pu().clearTimeout(i),r(a)}a.ping(c).then(c,()=>{s(o)})}))}const Tue={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Iue=500,Fue=600,Pue="_blank",Due="http://localhost";class D3{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Uue(e,t,n,a=Iue,r=Fue){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-a)/2,0).toString();let i="";const c=Object.assign(Object.assign({},Tue),{width:a.toString(),height:r.toString(),top:s,left:o}),A=$o().toLowerCase();n&&(i=H5(A)?Pue:n),M5(A)&&(t=t||Due,c.scrollbars="yes");const d=Object.entries(c).reduce((m,[h,p])=>`${m}${h}=${p},`,"");if(ple(A)&&i!=="_self")return Rue(t||"",i),new D3(null);const f=window.open(t||"",i,d);Gn(f,e,"popup-blocked");try{f.focus()}catch{}return new D3(f)}function Rue(e,t){const n=document.createElement("a");n.href=e,n.target=t;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(a)}const Nue="__/auth/handler",Vue="emulator/auth/handler",Lue=encodeURIComponent("fac");async function U3(e,t,n,a,r,s){Gn(e.config.authDomain,e,"auth-domain-config-required"),Gn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:a,v:lA,eventId:r};if(t instanceof X5){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",GS(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,f]of Object.entries({}))o[d]=f}if(t instanceof bg){const d=t.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);const i=o;for(const d of Object.keys(i))i[d]===void 0&&delete i[d];const c=await e._getAppCheckToken(),A=c?`#${Lue}=${encodeURIComponent(c)}`:"";return`${Mue(e)}?${uh(i).slice(1)}${A}`}function Mue({config:e}){return e.emulator?Ok(e,Vue):`https://${e.authDomain}/${Nue}`}const Kx="webStorageSupport";class Oue{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Kk,this._completeRedirectFn=cue,this._overrideRedirectResult=iue}async _openPopup(t,n,a,r){var s;Rc((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await U3(t,n,a,YS(),r);return Uue(t,o,Wk())}async _openRedirect(t,n,a,r){await this._originValidation(t);const s=await U3(t,n,a,YS(),r);return Gle(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(Rc(s,"If manager is not set, promise should be"),s)}const a=this.initAndGetManager(t);return this.eventManagers[n]={promise:a},a.catch(()=>{delete this.eventManagers[n]}),a}async initAndGetManager(t){const n=await kue(t),a=new Aue(t);return n.register("authEvent",r=>(Gn(r?.authEvent,t,"invalid-auth-event"),{status:a.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:a},this.iframes[t._key()]=n,a}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Kx,{type:Kx},r=>{var s;const o=(s=r?.[0])===null||s===void 0?void 0:s[Kx];o!==void 0&&n(!!o),Uc(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=pue(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return K5()||O5()||Qk()}}const dM=Oue;var R3="@firebase/auth",N3="1.10.8";class Hue{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(a=>{t(a?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Gn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function $ue(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Que(e){Nu(new jl("auth",(t,{options:n})=>{const a=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:i}=a.options;Gn(o&&!o.includes(":"),"invalid-api-key",{appName:a.name});const c={apiKey:o,authDomain:i,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:W5(e)},A=new xle(a,r,s,c);return kle(A,n),A},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,a)=>{t.getProvider("auth-internal").initialize()})),Nu(new jl("auth-internal",t=>{const n=gw(t.getProvider("auth").getImmediate());return(a=>new Hue(a))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fi(R3,N3,$ue(e)),Fi(R3,N3,"esm2017")}const Gue=300,zue=_5("authIdTokenMaxAge")||Gue;let V3=null;const Kue=e=>async t=>{const n=t&&await t.getIdTokenResult(),a=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(a&&a>zue)return;const r=n?.token;V3!==r&&(V3=r,await fetch(e,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function Wue(e=k5()){const t=E5(e,"auth");if(t.isInitialized())return t.getImmediate();const n=j5(e,{popupRedirectResolver:dM,persistence:[lM,zk,Kk]}),a=_5("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(a,location.origin);if(location.origin===s.origin){const o=Kue(s.toString());Vle(n,o,()=>o(n.currentUser)),eM(n,i=>o(i))}}const r=boe("auth");return r&&Tle(n,`http://${r}`),n}function jue(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}Cle({loadJS(e){return new Promise((t,n)=>{const a=document.createElement("script");a.setAttribute("src",e),a.onload=t,a.onerror=r=>{const s=Fu("internal-error");s.customData=r,n(s)},a.type="text/javascript",a.charset="UTF-8",jue().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Que("Browser");const que={apiKey:"AIzaSyB8g1LkpQ-pkRyoMT02e7Y-AkSgBt21tVI",authDomain:"origami-clinic.firebaseapp.com",projectId:"origami-clinic",storageBucket:"origami-clinic.firebasestorage.app",messagingSenderId:"1062163572761",appId:"1:1062163572761:web:c3c03832110d86365b2288",measurementId:"G-HSMXCJSMKS"};console.log("Initializing Firebase for Electron...");let e_,Ks,X1,Wx=!1;try{e_=B5(que),console.log("Firebase app initialized successfully"),Ks=Wue(e_),console.log("Firebase auth initialized successfully"),Wx=()=>typeof window<"u"&&window.process&&window.process.type==="renderer",console.log("Running in Electron:",Wx()),X1=new Su,X1.setCustomParameters({prompt:"select_account",include_granted_scopes:"true",access_type:"online"}),X1.addScope("email"),X1.addScope("profile"),console.log("Firebase initialized:",{app:!!e_,auth:!!Ks,isElectron:Wx()}),(async()=>{try{await Nle(Ks,zk),console.log("Firebase auth persistence set to LOCAL"),Ks.onAuthStateChanged(t=>{console.log("Auth state changed in firebase.js:",!!t)})}catch(t){console.error("Error setting Firebase auth persistence:",t)}})()}catch(e){throw console.error("Failed to initialize Firebase:",e),e}function Yue(){const e=new Uint8Array(16);return crypto.getRandomValues(e),Array.from(e,t=>t.toString(16).padStart(2,"0")).join("")}function Xue(e){const{clientId:t,redirectUri:n,scope:a="email profile openid",responseType:r="token id_token",prompt:s="select_account",nonce:o}=e;return`https://accounts.google.com/o/oauth2/v2/auth?${new URLSearchParams({client_id:t,redirect_uri:n,scope:a,response_type:r,include_granted_scopes:"true",prompt:s,nonce:o}).toString()}`}function Jue(){return Ks.app.options}function Zue(){return"1062163572761-ic92tedsm74d5pqrujo13c84u0u1g6ao.apps.googleusercontent.com"}function ece(){return"https://login.evamed.in/auth-callback.html"}function tce(e){try{const t=e.split(".");if(t.length!==3)throw new Error("Invalid JWT format");const n=t[1],a=atob(n.replace(/-/g,"+").replace(/_/g,"/"));return JSON.parse(a)}catch(t){return console.error("Error decoding JWT:",t),null}}const nce={namespaced:!0,state:{user:null,loading:!1,error:null,isFirstTimeSignIn:!1,redirectInProgress:!1},mutations:{SET_USER(e,t){if(e.user=t,t){const n=t.metadata;e.isFirstTimeSignIn=n.creationTime===n.lastSignInTime}else e.isFirstTimeSignIn=!1},SET_LOADING(e,t){e.loading=t},SET_ERROR(e,t){e.error=t},SET_REDIRECT_IN_PROGRESS(e,t){e.redirectInProgress=t}},actions:{async signInWithGoogle({commit:e}){try{if(e("SET_LOADING",!0),e("SET_ERROR",null),e("SET_REDIRECT_IN_PROGRESS",!0),console.log("Starting Google sign in with dynamic OAuth URL..."),window.process&&window.process.type==="renderer"){console.log("Running in Electron environment");const{ipcRenderer:n}=window.require("electron");n.removeAllListeners("auth-redirect");const a=Yue(),r={clientId:Zue(),redirectUri:ece(),scope:"email profile openid",responseType:"token id_token",prompt:"select_account",nonce:a},s=Xue(r);console.log("Firebase config:",Jue()),console.log("Using client ID:",r.clientId),console.log("Using redirect URI:",r.redirectUri),console.log("Generated nonce:",a),console.log("Generated OAuth URL:",s);const{shell:o}=window.require("electron");return await o.openExternal(s),console.log("Opened authentication URL in default browser"),console.log("Waiting for OAuth callback via custom protocol..."),new Promise((i,c)=>{const A=setTimeout(()=>{n.removeAllListeners("auth-redirect"),e("SET_REDIRECT_IN_PROGRESS",!1),e("SET_LOADING",!1),c(new Error("Authentication timeout"))},12e4);n.once("auth-redirect",async(d,f)=>{console.log("Received auth redirect in renderer:",f),clearTimeout(A),n.removeAllListeners("auth-redirect");try{const m=new URL(f),h=new URLSearchParams(m.search),p=h.get("access_token"),y=h.get("id_token"),g=h.get("error");if(g)throw new Error(`OAuth error: ${g}`);if(p&&y){const w=tce(y);w&&(console.log("ID Token payload:",w),w.nonce&&w.nonce!==a&&console.warn("Nonce mismatch in ID token"));const b=Su.credential(y,p),x=await Rle(Ks,b);console.log("Authentication successful:",x.user),e("SET_USER",x.user),e("SET_REDIRECT_IN_PROGRESS",!1);const T=x.user.metadata.creationTime===x.user.metadata.lastSignInTime;i(T)}else throw new Error("No valid authentication tokens received")}catch(m){console.error("Error processing auth redirect:",m),e("SET_ERROR","Authentication failed. Please close the app, check your internet connection and retry."),e("SET_REDIRECT_IN_PROGRESS",!1),c(m)}})})}else throw new Error("Browser-based authentication not implemented for web environment")}catch(t){throw console.error("Sign in error:",t),e("SET_REDIRECT_IN_PROGRESS",!1),t.code==="auth/network-request-failed"?e("SET_ERROR","Authentication failed. Please close the app, check your internet connection and retry."):e("SET_ERROR",t.message||"Authentication failed. Please close the app, check your internet connection and retry."),t}finally{e("SET_LOADING",!1)}},async signOut({commit:e}){try{e("SET_LOADING",!0),e("SET_ERROR",null),await Mle(Ks),e("SET_USER",null),e("SET_REDIRECT_IN_PROGRESS",!1)}catch(t){throw e("SET_ERROR",t.message),t}finally{e("SET_LOADING",!1)}},initAuthState({commit:e}){return new Promise(t=>Lle(Ks,a=>{console.log("Auth state changed:",a),e("SET_USER",a),a&&this.state.auth.redirectInProgress&&e("SET_REDIRECT_IN_PROGRESS",!1),t(a)},a=>{console.error("Auth state change error:",a),e("SET_ERROR",a.message),e("SET_REDIRECT_IN_PROGRESS",!1),t(null)}))}},getters:{isAuthenticated:e=>!!e.user,currentUser:e=>e.user,isLoading:e=>e.loading,error:e=>e.error,isFirstTimeSignIn:e=>e.isFirstTimeSignIn,redirectInProgress:e=>e.redirectInProgress}},ZS=async()=>{try{return{data:(await dt.get("/doctor/")).data.data.doctors,error:null}}catch(e){return console.error("There was an error fetching the doctors:",e?.response||e),{data:[],error:e}}},ace=async e=>{try{return await dt.post(`/print/${e.doctorId}`,e),{error:null}}catch(t){return console.error("There was an error creating print config:",t),{error:t}}},rce=async e=>{try{const a=(await dt.post("/doctor/",e)).data.data.id;console.log("Doctor created successfully, ID:",a);const r={doctorId:a,doctorName:e.doctorName||"",doctorDegrees:e.doctorDegrees||"",doctorRegistrationNumber:e.doctorRegistrationNumber||"",email:"",clinicAddress:"-",contactNumber:"",useHeader:!0,pageSize:"A4"},s=await ace(r);return s.error?console.warn("Doctor created successfully but print config creation failed:",s.error):console.log("Print configuration created successfully for doctor ID:",a),{error:null}}catch(t){return console.error("There was an error adding the doctor:",t),{error:t}}},sce=async e=>{try{return await dt.put(`/doctor/${e.id}`,e),{error:null}}catch(t){return console.error("There was an error editing the doctor:",t),{error:t}}},oce={namespaced:!0,state:()=>({doctors:[],doctorId:1,initialized:!1}),getters:{allDoctors:e=>e.doctors,currentDoctorId:e=>e.doctorId,currentDoctor:e=>e.doctors.find(t=>t.id===e.doctorId),isInitialized:e=>e.initialized,isProcedurePrimary:e=>e.doctors.find(n=>n.id===e.doctorId)?.procedurePrimary||!1,isGSTRegistered:e=>e.doctors.find(n=>n.id===e.doctorId)?.isGST||!1,gstIdentifier:e=>e.doctors.find(n=>n.id===e.doctorId)?.gstIdentifier||"",isPharmacyEnabled:e=>e.doctors.find(n=>n.id===e.doctorId)?.isPharmacy||!1},mutations:{setDoctors(e,t){e.doctors=t},setDoctorId(e,t){e.doctorId=t},setInitialized(e,t){e.initialized=t}},actions:{async fetchDoctors({commit:e}){const t=await ZS();return e("setDoctors",t.data),t},async initializeDoctors({dispatch:e,commit:t,state:n}){if(!n.initialized)try{const a=await e("fetchDoctors");if(a.error){console.warn("Failed to fetch doctors due to API error:",a.error),t("setDoctorId",1),t("setInitialized",!0);return}a.data&&a.data.length>0?(console.log(`Found ${a.data.length} doctors, setting first as active`),t("setDoctorId",a.data[0].id)):(console.warn("No doctors found - using fallback ID 1"),t("setDoctorId",1)),t("setInitialized",!0)}catch(a){console.error("Error initializing doctors:",a),t("setDoctorId",1),t("setInitialized",!0)}}}},AM=async()=>{try{return{data:(await dt.get("/clinic/")).data.data.clinics,error:null}}catch(e){return console.error("There was an error fetching the doctors:",e?.response||e),{data:[],error:e}}},ice=async e=>{try{return await dt.post("/clinic/",e),{error:null}}catch(t){return console.error("There was an error adding the clinic:",t),{error:t}}},lce=async e=>{try{return await dt.put(`/clinic/${e.id}`,e),{error:null}}catch(t){return console.error("There was an error editing the doctor:",t),{error:t}}},uce={namespaced:!0,state:()=>({clinics:[],clinicId:1,initialized:!1}),getters:{allClinics:e=>e.clinics,currentClinicId:e=>e.clinicId,currentClinic:e=>e.clinics.find(t=>t.id===e.clinicId),isInitialized:e=>e.initialized},mutations:{setClinics(e,t){e.clinics=t},setClinicId(e,t){e.clinicId=t},setInitialized(e,t){e.initialized=t}},actions:{async fetchClinics({commit:e}){const t=await AM();return e("setClinics",t.data),t},async initializeClinics({dispatch:e,commit:t,state:n}){if(!n.initialized)try{const a=await e("fetchClinics");if(a.error){console.warn("Failed to fetch clinics due to API error:",a.error),t("setClinicId",1),t("setInitialized",!0);return}a.data&&a.data.length>0?(console.log(`Found ${a.data.length} clinics, setting first as active`),t("setClinicId",a.data[0].id)):(console.warn("No clinics found - using fallback ID 1"),t("setClinicId",1)),t("setInitialized",!0)}catch(a){console.error("Error initializing clinics:",a),t("setClinicId",1),t("setInitialized",!0)}}}},cce=async(e=null,t=null,n=null)=>{try{if(!n)throw new Error("pharmacyId is required");const a={pharmacyId:n};return e&&(a.date=e),t&&(a.status=t),{data:(await dt.get("/pharmacy/bills",{params:a})).data.data.bills||[],error:null}}catch(a){return console.error("Error fetching pharmacy bills:",a),{data:[],error:a}}},fM=async e=>{try{return{data:(await dt.get(`/pharmacy/bills/${e}`)).data.data.bill||null,error:null}}catch(t){return console.error("Error fetching pharmacy bill:",t),{data:null,error:t}}},mM=async(e,t,n=null)=>{try{if(!t)throw new Error("pharmacyId is required");const a={consultationId:e,pharmacyId:t};return n&&(a.billDate=n),{data:(await dt.post("/pharmacy/bills",a)).data.data.bill||null,error:null}}catch(a){return console.error("Error creating draft bill:",a),{data:null,error:a}}},dce=async(e,t,n=0)=>{try{const a={items:t,additionalDiscountAmount:n},r=await dt.put(`/pharmacy/bills/${e}`,a);if(r.data.success)return{data:{success:!0},error:null};throw new Error(r.data.error||"Failed to update draft bill")}catch(a){return console.error("Error updating draft bill:",a),{data:null,error:a}}},Ace=async(e,t=null)=>{try{const n={};return t&&(n.finalizedBy=t),{data:(await dt.post(`/pharmacy/bills/${e}/finalize`,n)).data.data.bill||null,error:null}}catch(n){return console.error("Error finalizing bill:",n),{data:null,error:n}}},fce=async e=>{try{return{data:(await dt.post(`/pharmacy/bills/${e}/cancel`)).data.data.bill||null,error:null}}catch(t){return console.error("Error cancelling bill:",t),{data:null,error:t}}},ww=async e=>{try{if(!e)throw new Error("pharmacyId is required");return{data:(await dt.get("/pharmacy/inventory",{params:{pharmacyId:e}})).data.data.inventory||[],error:null}}catch(t){return console.error("Error fetching pharmacy inventory:",t),{data:[],error:t}}},mce=async(e,t)=>{try{if(!t)throw new Error("pharmacyId is required");return{data:(await dt.get(`/pharmacy/batches/available/${e}`,{params:{pharmacyId:t}})).data.data.batches||[],error:null}}catch(n){return console.error("Error getting available batches:",n),{data:[],error:n}}},vM=async e=>{try{if(!e.pharmacyId)throw new Error("pharmacyId is required in batchData");return{data:(await dt.post("/pharmacy/batches",e)).data.data.batch||null,error:null}}catch(t){return console.error("Error creating batch:",t),{data:null,error:t}}},vce=async(e,t)=>{try{return{data:(await dt.put(`/pharmacy/batches/${e}`,t)).data.data.batch||null,error:null}}catch(n){return console.error("Error updating batch:",n),{data:null,error:n}}},qk=async()=>{try{return{data:(await dt.get("/pharmacy/configs")).data.data.pharmacies||[],error:null}}catch(e){return console.error("Error fetching pharmacies:",e),{data:[],error:e}}},hce=async e=>{try{return{data:(await dt.post("/pharmacy/configs",e)).data.data.pharmacy||null,error:null}}catch(t){return console.error("Error creating pharmacy:",t),{data:null,error:t}}},pce=async(e,t)=>{try{return{data:(await dt.put(`/pharmacy/configs/${e}`,t)).data.data.pharmacy||null,error:null}}catch(n){return console.error("Error updating pharmacy:",n),{data:null,error:n}}},hM=async(e=null)=>{try{const t=e?{pharmacyId:e}:{};return{data:(await dt.get("/pharmacy/config",{params:t})).data.data.config||null,error:null}}catch(t){return console.error("Error fetching pharmacy config:",t),{data:null,error:t}}},gce=async e=>{try{if(!e)throw new Error("pharmacyId is required");const n=(await dt.get("/pharmacy/bill-series",{params:{pharmacyId:e}})).data.data.series;if(!n||!n.identifier)return{data:null,error:null};const a=n.identifier,r=a.substring(0,3),s=a.substring(3),o=parseInt(s,10),i=isNaN(o)?1:o+1;return{data:{identifier:a,prefix:r,suffix:"",seed:i},error:null}}catch(t){return console.error("Error fetching pharmacy bill series:",t),{data:null,error:t}}},yce=async(e,t,n,a=null)=>{try{if(!e)throw new Error("pharmacyId is required");let r=a;if(r==null&&(n&&typeof n=="string"&&(r=parseInt(n.replace(/\D/g,""),10)),isNaN(r)))throw new Error("seed is required");let s=(t||"").toUpperCase().trim();if(s.length<3)throw new Error("prefix must be at least 3 characters");s=s.substring(0,3);const i=Math.max(0,Math.floor(r)-1).toString().padStart(6,"0"),c=s+i;return{data:(await dt.post("/pharmacy/bill-series",{pharmacyId:e,identifier:c})).data.data.series||null,error:null}}catch(r){return console.error("Error creating pharmacy bill series:",r),{data:null,error:r}}},_ce=yce,wce=async(e,t={})=>{try{if(!e)throw new Error("pharmacyId is required");const n={pharmacyId:e,...t};return{data:(await dt.get("/pharmacy/purchase-invoices",{params:n})).data.data||[],error:null}}catch(n){return console.error("Error fetching purchase invoices:",n),{data:[],error:n}}},bce=async e=>{try{if(!e.pharmacyId)throw new Error("pharmacyId is required in invoiceData");return{data:(await dt.post("/pharmacy/purchase-invoices",e)).data.data.invoice||null,error:null}}catch(t){return console.error("Error creating purchase invoice:",t),{data:null,error:t}}},xce=async e=>{try{if(!e)throw new Error("billId is required");return{success:!0,data:(await dt.get(`/pharmacy/bills/${e}/payments`)).data.data.payments||[],error:null}}catch(t){return console.error("Error fetching pharmacy payments:",t),{success:!1,data:[],error:t}}},Cce=async(e,t)=>{try{if(!e)throw new Error("billId is required");if(!t||!t.amount||!t.mode||!t.paymentDate)throw new Error("Payment data must include amount, mode, and paymentDate");return{success:!0,data:(await dt.post(`/pharmacy/bills/${e}/payments`,t)).data.data||null,error:null}}catch(n){return console.error("Error creating pharmacy payment:",n),{success:!1,data:null,error:n}}},Sce=async(e,t)=>{try{if(!e)throw new Error("billId is required");if(!t)throw new Error("paymentId is required");const n=await dt.delete(`/pharmacy/bills/${e}/payments/${t}`);return{success:!0,error:null}}catch(n){return console.error("Error deleting pharmacy payment:",n),{success:!1,error:n}}},Ece=async(e,t)=>{try{if(!e)throw new Error("billId is required");if(!t||!Array.isArray(t)||t.length===0)throw new Error("returnItems array is required and must not be empty");return{data:(await dt.post(`/pharmacy/bills/${e}/return`,{items:t})).data.data||null,error:null}}catch(n){return console.error("Error processing return:",n),{data:null,error:n}}},Bce=async e=>{try{return!e||e.trim().length===0?{data:[],error:null}:{data:(await dt.get(`/pharmacy/medicines/search/${encodeURIComponent(e.trim())}`)).data.data.medicines||[],error:null}}catch(t){return console.error("Error searching pharmacy medicines:",t),{data:[],error:t}}},kce=async e=>{try{if(!e)throw new Error("batchId is required");return{data:(await dt.get(`/pharmacy/batches/${e}/usage-check`)).data.data||{isUsed:!1},error:null}}catch(t){return console.error("Error checking batch usage:",t),{data:{isUsed:!1},error:t}}},Tce=async e=>{try{if(!e)throw new Error("batchId is required");return{data:(await dt.delete(`/pharmacy/batches/${e}`)).data.data||null,error:null}}catch(t){return console.error("Error deleting batch:",t),{data:null,error:t}}},Cg=async e=>{try{if(!e)throw new Error("invoiceId is required");return{data:(await dt.get(`/pharmacy/purchase-invoices/${e}`)).data.data||null,error:null}}catch(t){return console.error("Error fetching purchase invoice:",t),{data:null,error:t}}},Ice=async(e,t)=>{try{if(!e)throw new Error("invoiceId is required");return{data:(await dt.put(`/pharmacy/purchase-invoices/${e}`,t)).data.data.invoice||null,error:null}}catch(n){return console.error("Error updating purchase invoice:",n),{data:null,error:n}}},Fce=async(e,t)=>{try{if(!e)throw new Error("invoiceId is required");if(!t)throw new Error("batchId is required");return await dt.delete(`/pharmacy/purchase-invoices/${e}/batches/${t}`),{error:null}}catch(n){return console.error("Error deleting batch from invoice:",n),{error:n}}},Pce=async e=>{try{if(!e)throw new Error("pharmacyId is required");return{data:((await dt.get("/pharmacy/purchase-invoices",{params:{pharmacyId:e}})).data.data||[]).map(a=>({id:a.id,identifier:a.identifier,date:a.date,supplierName:a.supplier?.name||"Unknown"})),error:null}}catch(t){return console.error("Error fetching purchase invoices for dropdown:",t),{data:[],error:t}}},pM=async()=>{try{return{data:(await dt.get("/pharmacy/suppliers")).data.data||[],error:null}}catch(e){return console.error("Error fetching pharmacy suppliers:",e),{data:[],error:e}}},Dce=async e=>{try{return{data:(await dt.post("/pharmacy/suppliers",e)).data.data.supplier||null,error:null}}catch(t){return console.error("Error creating supplier:",t),{data:null,error:t}}},Uce=async(e,t)=>{try{if(!e)throw new Error("supplierId is required");return{data:(await dt.put(`/pharmacy/suppliers/${e}`,t)).data.data.supplier||null,error:null}}catch(n){return console.error("Error updating supplier:",n),{data:null,error:n}}},Rce=async e=>{try{if(!e)throw new Error("medicineId is required");return{data:(await dt.put(`/medicine/${e}`,{isPharmacy:!0})).data.data.medicine||null,error:null}}catch(t){return console.error("Error marking medicine as pharmacy:",t),{data:null,error:t}}},Nce=async e=>{try{if(!e)throw new Error("medicineId is required");return{data:(await dt.put(`/medicine/${e}`,{isPharmacy:!1})).data.data.medicine||null,error:null}}catch(t){return console.error("Error unmarking medicine as pharmacy:",t),{data:null,error:t}}},Vce=async(e,t,n=null)=>{try{if(!e)throw new Error("batchId is required");if(t==null)throw new Error("adjustmentQuantity is required");const a={batchId:e,adjustmentQuantity:t,...n&&{reason:n}};return{data:(await dt.post("/pharmacy/inventory/adjust",a)).data.data||null,error:null}}catch(a){return console.error("Error adjusting stock:",a),{data:null,error:a}}},Lce={namespaced:!0,state:()=>({pharmacies:[],pharmacyId:1,initialized:!1}),getters:{allPharmacies:e=>e.pharmacies,currentPharmacyId:e=>e.pharmacyId,currentPharmacy:e=>e.pharmacies.find(t=>t.id===e.pharmacyId),isInitialized:e=>e.initialized,currentPharmacyName:e=>e.pharmacies.find(n=>n.id===e.pharmacyId)?.pharmacyName||"Pharmacy"},mutations:{setPharmacies(e,t){e.pharmacies=t},setPharmacyId(e,t){e.pharmacyId=t,localStorage.setItem("selectedPharmacyId",t.toString())},setInitialized(e,t){e.initialized=t}},actions:{async fetchPharmacies({commit:e}){const t=await qk();return!t.error&&t.data&&e("setPharmacies",t.data),t},async initializePharmacies({dispatch:e,commit:t,state:n}){if(!n.initialized)try{const a=localStorage.getItem("selectedPharmacyId"),r=a?parseInt(a):null,s=await e("fetchPharmacies");if(s.error){console.warn("Failed to fetch pharmacies due to API error:",s.error),t("setPharmacyId",r||1),t("setInitialized",!0);return}s.data&&s.data.length>0?(console.log(`Found ${s.data.length} pharmacies`),r&&s.data.find(o=>o.id===r)?(console.log(`Using saved pharmacy ID: ${r}`),t("setPharmacyId",r)):(console.log(`Setting first pharmacy as active: ${s.data[0].id}`),t("setPharmacyId",s.data[0].id))):(console.warn("No pharmacies found - using fallback ID 1"),t("setPharmacyId",r||1)),t("setInitialized",!0)}catch(a){console.error("Error initializing pharmacies:",a);const r=localStorage.getItem("selectedPharmacyId");t("setPharmacyId",r?parseInt(r):1),t("setInitialized",!0)}}}},Mce={extensionContent:null},Oce={SET_EXTENSION_CONTENT(e,t){e.extensionContent=t},CLEAR_EXTENSION_CONTENT(e){e.extensionContent=null}},Hce={setExtensionContent({commit:e},t){e("SET_EXTENSION_CONTENT",t)},clearExtensionContent({commit:e}){e("CLEAR_EXTENSION_CONTENT")}},$ce={extensionContent:e=>e.extensionContent},Qce={namespaced:!0,state:Mce,mutations:Oce,actions:Hce,getters:$ce},Gce={show:!1,message:"",color:"info",timeout:4e3},zce={SHOW_SNACKBAR(e,{message:t,color:n="info",timeout:a=4e3}){e.show=!0,e.message=t,e.color=n,e.timeout=a},HIDE_SNACKBAR(e){e.show=!1,e.message=""},SET_SNACKBAR_VISIBILITY(e,t){e.show=t}},Kce={showSnackbar({commit:e},t){e("SHOW_SNACKBAR",t)},hideSnackbar({commit:e}){e("HIDE_SNACKBAR")},setSnackbarVisibility({commit:e},t){e("SET_SNACKBAR_VISIBILITY",t)},showSuccess({commit:e},t){e("SHOW_SNACKBAR",{message:t,color:"success"})},showError({commit:e},t){e("SHOW_SNACKBAR",{message:t,color:"error"})},showWarning({commit:e},t){e("SHOW_SNACKBAR",{message:t,color:"warning"})},showInfo({commit:e},t){e("SHOW_SNACKBAR",{message:t,color:"info"})}},Wce={snackbar:e=>e,isSnackbarVisible:e=>e.show,snackbarMessage:e=>e.message,snackbarColor:e=>e.color},jce={namespaced:!0,state:Gce,mutations:zce,actions:Kce,getters:Wce},qce="modulepreload",Yce=function(e,t){return new URL(e,t).href},L3={},Jr=function(t,n,a){let r=Promise.resolve();if(n&&n.length>0){let A=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};const o=document.getElementsByTagName("link"),i=document.querySelector("meta[property=csp-nonce]"),c=i?.nonce||i?.getAttribute("nonce");r=A(n.map(d=>{if(d=Yce(d,a),d in L3)return;L3[d]=!0;const f=d.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(a)for(let p=o.length-1;p>=0;p--){const y=o[p];if(y.href===d&&(!f||y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${m}`))return;const h=document.createElement("link");if(h.rel=f?"stylesheet":qce,f||(h.as="script"),h.crossOrigin="",h.href=d,c&&h.setAttribute("nonce",c),document.head.appendChild(h),f)return new Promise((p,y)=>{h.addEventListener("load",p),h.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(o){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=o,window.dispatchEvent(i),!i.defaultPrevented)throw o}return r.then(o=>{for(const i of o||[])i.status==="rejected"&&s(i.reason);return t().catch(s)})},Xce={namespaced:!0,state:{filters:{diagnosis:null,medicine:null,dateFrom:"",dateTo:"",patientName:"",gender:"",ageGreaterThan:"",ageLessThan:""},searchResults:[],isLoading:!1,hasSearched:!1,lastSearchTime:null,totalResults:0,searchError:null,currentPage:1,resultsPerPage:20},getters:{hasActiveFilters:e=>!!(e.filters.diagnosis||e.filters.medicine||e.filters.dateFrom||e.filters.dateTo||e.filters.patientName?.trim()||e.filters.gender||e.filters.ageGreaterThan||e.filters.ageLessThan),searchSummary:e=>e.hasSearched?{totalResults:e.totalResults,filters:{...e.filters},searchTime:e.lastSearchTime,hasResults:e.searchResults.length>0}:null,activeFiltersText:(e,t,n)=>{if(!t.hasActiveFilters)return"";const a=e.filters,r=[];a.diagnosis&&typeof a.diagnosis=="string"&&a.diagnosis.trim()&&r.push(`Diagnosis: ${a.diagnosis}`),a.medicine&&typeof a.medicine=="string"&&a.medicine.trim()&&r.push(`Medicine: ${a.medicine}`),a.dateFrom&&a.dateTo?r.push(`Date: ${a.dateFrom} to ${a.dateTo}`):a.dateFrom?r.push(`From: ${a.dateFrom}`):a.dateTo&&r.push(`Until: ${a.dateTo}`),a.patientName?.trim()&&r.push(`Patient: ${a.patientName.trim()}`),a.gender?.trim()&&r.push(`Gender: ${a.gender.trim()}`),(a.ageGreaterThan||a.ageLessThan)&&(a.ageGreaterThan&&a.ageLessThan?r.push(`Age: ${a.ageGreaterThan}-${a.ageLessThan} years`):a.ageGreaterThan?r.push(`Age: Over ${a.ageGreaterThan} years`):a.ageLessThan&&r.push(`Age: Under ${a.ageLessThan} years`));const s=n.doctorModule?.doctorId,i=n.doctorModule?.doctors?.find(c=>c.id===s)?.doctorName;return i&&r.push(`Doctor: ${i}`),r.join("  ")}},mutations:{SET_FILTERS(e,t){e.filters={...e.filters,...t}},SET_SEARCH_RESULTS(e,{results:t,total:n}){e.searchResults=t||[],e.totalResults=n||0,e.hasSearched=!0,e.lastSearchTime=new Date().toISOString(),e.searchError=null},SET_LOADING(e,t){e.isLoading=!!t},SET_ERROR(e,t){e.searchError=t,e.isLoading=!1},CLEAR_SEARCH(e){e.searchResults=[],e.hasSearched=!1,e.totalResults=0,e.lastSearchTime=null,e.searchError=null},RESET_FILTERS(e){e.filters={diagnosis:null,medicine:null,dateFrom:"",dateTo:"",patientName:"",gender:"",ageGreaterThan:"",ageLessThan:""}},CLEAR_ALL(e){e.filters={diagnosis:null,medicine:null,dateFrom:"",dateTo:"",patientName:"",gender:"",ageGreaterThan:"",ageLessThan:""},e.searchResults=[],e.hasSearched=!1,e.totalResults=0,e.lastSearchTime=null,e.searchError=null,e.isLoading=!1}},actions:{async performSearch({commit:e,state:t,rootState:n}){const{fetchResearchData:a}=await Jr(async()=>{const{fetchResearchData:r}=await import("./researchUtils-BiF794UI.js");return{fetchResearchData:r}},[],import.meta.url);e("SET_LOADING",!0),e("SET_ERROR",null);try{const r=n.doctorModule?.doctorId;if(!r)throw new Error("No doctor selected. Please select a doctor first.");const s={...t.filters,doctor_id:r};console.log(" Performing research search with filters (including current doctor):",s);const o=await a(s);if(o.error)throw new Error(`Search failed: ${o.error.message||"Unknown error"}`);const i=Array.isArray(o.data)?o.data:[];return e("SET_SEARCH_RESULTS",{results:i,total:i.length}),console.log(" Research search completed:",i.length,"results"),{data:i,error:null,success:!0}}catch(r){return console.error(" Research search failed:",r),e("SET_ERROR",r.message||"Failed to search research data"),{data:[],error:r,success:!1}}finally{e("SET_LOADING",!1)}},async updateFilters({commit:e,dispatch:t,getters:n},{filters:a,autoSearch:r=!1}){return e("SET_FILTERS",a),r&&n.hasActiveFilters?await t("performSearch"):{success:!0}},clearSearch({commit:e}){e("CLEAR_SEARCH")},clearFilters({commit:e}){e("RESET_FILTERS")},clearAll({commit:e}){e("CLEAR_ALL")}}},Jce={namespaced:!0,state:{filters:{procedureName:"",dateFrom:"",dateTo:"",gender:"",ageGreaterThan:"",ageLessThan:""},searchResults:[],isLoading:!1,hasSearched:!1,lastSearchTime:null,totalResults:0,searchError:null,currentPage:1,resultsPerPage:20},getters:{hasActiveFilters:e=>!!(e.filters.procedureName?.trim()||e.filters.dateFrom||e.filters.dateTo||e.filters.gender||e.filters.ageGreaterThan||e.filters.ageLessThan),searchSummary:e=>e.hasSearched?{totalResults:e.totalResults,filters:{...e.filters},searchTime:e.lastSearchTime,hasResults:e.searchResults.length>0}:null,activeFiltersText:(e,t,n)=>{if(!t.hasActiveFilters)return"";const a=e.filters,r=[];a.procedureName?.trim()&&r.push(`Procedure: ${a.procedureName.trim()}`),a.dateFrom&&a.dateTo?r.push(`Date: ${a.dateFrom} to ${a.dateTo}`):a.dateFrom?r.push(`From: ${a.dateFrom}`):a.dateTo&&r.push(`Until: ${a.dateTo}`),a.gender?.trim()&&r.push(`Gender: ${a.gender.trim()}`),(a.ageGreaterThan||a.ageLessThan)&&(a.ageGreaterThan&&a.ageLessThan?r.push(`Age: ${a.ageGreaterThan}-${a.ageLessThan} years`):a.ageGreaterThan?r.push(`Age: Over ${a.ageGreaterThan} years`):a.ageLessThan&&r.push(`Age: Under ${a.ageLessThan} years`));const s=n.doctorModule?.doctorId,i=n.doctorModule?.doctors?.find(c=>c.id===s)?.doctorName;return i&&r.push(`Doctor: ${i}`),r.join("  ")}},mutations:{SET_FILTERS(e,t){e.filters={...e.filters,...t}},SET_SEARCH_RESULTS(e,{results:t,total:n}){e.searchResults=t||[],e.totalResults=n||0,e.hasSearched=!0,e.lastSearchTime=new Date().toISOString(),e.searchError=null},SET_LOADING(e,t){e.isLoading=!!t},SET_ERROR(e,t){e.searchError=t,e.isLoading=!1},CLEAR_SEARCH(e){e.searchResults=[],e.hasSearched=!1,e.totalResults=0,e.lastSearchTime=null,e.searchError=null},RESET_FILTERS(e){e.filters={procedureName:"",dateFrom:"",dateTo:"",gender:"",ageGreaterThan:"",ageLessThan:""}},CLEAR_ALL(e){e.filters={procedureName:"",dateFrom:"",dateTo:"",gender:"",ageGreaterThan:"",ageLessThan:""},e.searchResults=[],e.hasSearched=!1,e.totalResults=0,e.lastSearchTime=null,e.searchError=null,e.isLoading=!1}},actions:{async performSearch({commit:e,state:t,rootState:n}){const{searchProcedureResearch:a}=await Jr(async()=>{const{searchProcedureResearch:r}=await Promise.resolve().then(()=>ihe);return{searchProcedureResearch:r}},void 0,import.meta.url);e("SET_LOADING",!0),e("SET_ERROR",null);try{const r=n.doctorModule?.doctorId;if(!r)throw new Error("No doctor selected. Please select a doctor first.");const s={...t.filters,doctor_id:r};console.log(" Performing procedure research search with filters:",s);const o=await a(s);if(o.error)throw new Error(`Search failed: ${o.error.message||"Unknown error"}`);const i=Array.isArray(o.data)?o.data:[];return e("SET_SEARCH_RESULTS",{results:i,total:i.length}),console.log(" Procedure research search completed:",i.length,"results"),{data:i,error:null,success:!0}}catch(r){return console.error(" Procedure research search failed:",r),e("SET_ERROR",r.message||"Failed to search procedure research data"),{data:[],error:r,success:!1}}finally{e("SET_LOADING",!1)}},async updateFilters({commit:e,dispatch:t,getters:n},{filters:a,autoSearch:r=!1}){return e("SET_FILTERS",a),r&&n.hasActiveFilters?await t("performSearch"):{success:!0}},clearSearch({commit:e}){e("CLEAR_SEARCH")},clearFilters({commit:e}){e("RESET_FILTERS")},clearAll({commit:e}){e("CLEAR_ALL")}}},Zce={filters:{reminderType:"",reminderStatus:"",patientName:"",dateFrom:"",dateTo:""},searchResults:[],rawResults:{appointments:[],consultations:[],treatmentPlans:[]},isLoading:!1,hasSearched:!1,searchError:null,partialErrors:[],lastSearchTime:null,totalResults:0},ede={hasActiveFilters:e=>!!(e.filters.reminderType&&e.filters.reminderType!==""||e.filters.reminderStatus&&e.filters.reminderStatus!==""||e.filters.patientName?.trim()||e.filters.dateFrom||e.filters.dateTo),searchSummary:e=>e.hasSearched?{totalResults:e.totalResults,filters:{...e.filters},searchTime:e.lastSearchTime,hasResults:e.searchResults.length>0,hasPartialErrors:e.partialErrors.length>0}:null,activeFiltersText:(e,t,n)=>{if(!t.hasActiveFilters)return"";const a=e.filters,r=[];if(a.reminderType&&a.reminderType!==""){const c={appointment:"Appointments",consultation:"Consultations",procedures:"Treatment Plans"};r.push(`Type: ${c[a.reminderType]||a.reminderType}`)}if(a.reminderStatus&&a.reminderStatus!==""){const c={pending:"Pending",completed:"Completed"};r.push(`Status: ${c[a.reminderStatus]||a.reminderStatus}`)}a.patientName?.trim()&&r.push(`Patient: ${a.patientName.trim()}`),a.dateFrom&&a.dateTo?r.push(`Date: ${a.dateFrom} to ${a.dateTo}`):a.dateFrom?r.push(`From: ${a.dateFrom}`):a.dateTo&&r.push(`Until: ${a.dateTo}`);const s=n.doctorModule?.doctorId,i=n.doctorModule?.doctors?.find(c=>c.id===s)?.doctorName;return i&&r.push(`Doctor: ${i}`),r.join("  ")},uniquePatientsCount:e=>e.searchResults.length?new Set(e.searchResults.map(n=>n.patientId)).size:0,pendingRemindersCount:e=>e.searchResults.filter(t=>t.status==="pending").length,completedRemindersCount:e=>e.searchResults.filter(t=>t.status==="completed").length,appointmentReminders:e=>e.searchResults.filter(t=>t.type==="appointment"),consultationReminders:e=>e.searchResults.filter(t=>t.type==="consultation"),treatmentPlanReminders:e=>e.searchResults.filter(t=>t.type==="procedures")},tde={SET_FILTERS(e,t){e.filters={...e.filters,...t}},SET_SEARCH_RESULTS(e,{results:t,rawResults:n,total:a,partialErrors:r}){e.searchResults=t||[],e.rawResults=n||{appointments:[],consultations:[],treatmentPlans:[]},e.totalResults=a||0,e.partialErrors=r||[],e.hasSearched=!0,e.lastSearchTime=new Date().toISOString(),e.searchError=null},SET_LOADING(e,t){e.isLoading=!!t},SET_ERROR(e,t){e.searchError=t,e.isLoading=!1},CLEAR_SEARCH(e){e.searchResults=[],e.rawResults={appointments:[],consultations:[],treatmentPlans:[]},e.hasSearched=!1,e.totalResults=0,e.lastSearchTime=null,e.searchError=null,e.partialErrors=[]},RESET_FILTERS(e){e.filters={reminderType:"",reminderStatus:"",patientName:"",dateFrom:"",dateTo:""}},CLEAR_ALL(e){e.filters={reminderType:"",reminderStatus:"",patientName:"",dateFrom:"",dateTo:""},e.searchResults=[],e.rawResults={appointments:[],consultations:[],treatmentPlans:[]},e.hasSearched=!1,e.totalResults=0,e.lastSearchTime=null,e.searchError=null,e.partialErrors=[],e.isLoading=!1},UPDATE_REMINDER_STATUS(e,{id:t,isReminded:n}){const a=e.searchResults.find(r=>r.id===t);a&&(a.status=n?"completed":"pending",a.details.isReminded=n)}},nde={async performSearch({commit:e,state:t,rootState:n}){const{fetchAllReminders:a}=await Jr(async()=>{const{fetchAllReminders:r}=await import("./reminderUtils-Ct7GBZCi.js");return{fetchAllReminders:r}},[],import.meta.url);e("SET_LOADING",!0),e("SET_ERROR",null);try{const r=n.doctorModule?.doctorId;if(!r)throw new Error("No doctor selected. Please select a doctor first.");const s={...t.filters,doctor_id:r};t.filters.reminderStatus==="pending"?s.reminded=!1:t.filters.reminderStatus==="completed"&&(s.reminded=!0),console.log(" Performing reminder search with filters (including current doctor):",s);const o=await a(s);if(o.error&&o.data.length===0)throw new Error(o.error);const i=o.data||[];return e("SET_SEARCH_RESULTS",{results:i,rawResults:o.rawResults||{},total:i.length,partialErrors:o.partialErrors||[]}),console.log(" Reminder search completed:",i.length,"results"),o.partialErrors?.length>0&&console.warn(" Search completed with partial errors:",o.partialErrors),{data:i,error:null,success:!0,partialErrors:o.partialErrors}}catch(r){return console.error(" Reminder search failed:",r),e("SET_ERROR",r.message||"Failed to search reminders"),{data:[],error:r,success:!1,partialErrors:[]}}finally{e("SET_LOADING",!1)}},async updateFilters({commit:e,dispatch:t,getters:n},{filters:a,autoSearch:r=!1}){return e("SET_FILTERS",a),console.log(" Reminder filters updated:",a),r&&n.hasActiveFilters?await t("performSearch"):{success:!0}},clearSearch({commit:e}){return e("CLEAR_SEARCH"),console.log(" Reminder search results cleared"),{success:!0}},resetFilters({commit:e}){return e("RESET_FILTERS"),console.log(" Reminder filters reset"),{success:!0}},clearAll({commit:e}){return e("CLEAR_ALL"),console.log(" All reminder filters and results cleared"),{success:!0}},async markAsReminded({commit:e,rootState:t},{reminder:n,isReminded:a}){try{const{updateReminderStatus:r}=await Jr(async()=>{const{updateReminderStatus:d}=await import("./reminderUtils-Ct7GBZCi.js");return{updateReminderStatus:d}},[],import.meta.url),s=n.details.reminderType,o=n.originalId,i=n.details,c=t.clinicModule?.clinicId;c&&!i.clinicId&&!i.clinic_id&&(i.clinic_id=c),console.log(` Marking ${s} reminder as ${a?"reminded":"not reminded"}:`,o),console.log(" Original data:",i);const A=await r(s,o,a,i);if(A.success)return e("UPDATE_REMINDER_STATUS",{id:n.id,isReminded:a}),console.log(" Reminder status updated successfully"),{success:!0,error:null};throw new Error(A.error||"Failed to update reminder status")}catch(r){return console.error(" Failed to update reminder status:",r),{success:!1,error:r.message||"Failed to update reminder status"}}}},ade={namespaced:!0,state:Zce,getters:ede,mutations:tde,actions:nde},rde=async(e,t=null,n=null)=>{try{const a={clinic_id:e};t&&(a.type=t);const r=n?{signal:n,params:a}:{params:a};return{data:(await dt.get("/resource/entities",r)).data.data.entities,error:null}}catch(a){return a.name==="AbortError"?{data:[],error:null}:(console.error("Error fetching resource entities:",a),{data:[],error:a})}},sde=async e=>{try{return{data:(await dt.post("/resource/entities",e)).data.data.entity,error:null}}catch(t){return console.error("Error creating resource entity:",t),{data:null,error:t}}},ode=async(e,t)=>{try{return{data:(await dt.put(`/resource/entities/${e}`,t)).data.data.entity,error:null}}catch(n){return console.error("Error updating resource entity:",n),{data:null,error:n}}},ide=async e=>{try{return{data:(await dt.delete(`/resource/entities/${e}`)).data.data,error:null}}catch(t){return console.error("Error deleting resource entity:",t),{data:null,error:t}}},lde=async(e,t=null)=>{try{const n=t?{signal:t,params:e}:{params:e};return{data:(await dt.get("/resource/bookings",n)).data.data.bookings,error:null}}catch(n){return n.name==="AbortError"?{data:[],error:null}:(console.error("Error fetching resource bookings:",n),{data:[],error:n})}},ude=async e=>{try{const t=await dt.post("/resource/bookings",e);return{data:t.data.data.booking,error:null,hasConflicts:t.data.data.hasConflicts}}catch(t){return console.error("Error creating resource booking:",t),{data:null,error:t,hasConflicts:!1}}},cde=async(e,t)=>{try{const n=await dt.put(`/resource/bookings/${e}`,t);return{data:n.data.data.booking,error:null,hasConflicts:n.data.data.hasConflicts}}catch(n){return console.error("Error updating resource booking:",n),{data:null,error:n,hasConflicts:!1}}},dde=async e=>{try{return{data:(await dt.delete(`/resource/bookings/${e}`)).data.data,error:null}}catch(t){return console.error("Error deleting resource booking:",t),{data:null,error:t}}},Ade=async(e,t,n,a=null,r=null)=>{try{const s={entity_id:e,start_date_time:t,end_date_time:n};a&&(s.exclude_id=a);const o=r?{signal:r,params:s}:{params:s};return{data:(await dt.get("/resource/bookings/conflicts",o)).data.data,error:null}}catch(s){return s.name==="AbortError"?{data:{conflicts:[],hasConflicts:!1},error:null}:(console.error("Error checking booking conflicts:",s),{data:{conflicts:[],hasConflicts:!1},error:s})}},fde=()=>{try{const e=localStorage.getItem("resourceBookingState");if(e){const t=JSON.parse(e);return{selectedDate:t.selectedDate||null,selectedEntity:t.selectedEntity||null,entitySearchQuery:t.entitySearchQuery||""}}}catch(e){console.error("Error loading persisted resource booking state:",e)}return{selectedDate:null,selectedEntity:null,entitySearchQuery:""}},jx=fde(),mde={namespaced:!0,state:{entities:[],bookings:[],selectedDate:jx.selectedDate,selectedEntity:jx.selectedEntity,entitySearchQuery:jx.entitySearchQuery,isLoading:!1,isRefreshing:!1,error:null},getters:{filteredEntities:e=>{if(!e.entitySearchQuery||e.entitySearchQuery.trim()==="")return[...e.entities].sort((n,a)=>n.name.localeCompare(a.name));const t=e.entitySearchQuery.toLowerCase().trim();return e.entities.filter(n=>n.name.toLowerCase().includes(t)).sort((n,a)=>n.name.localeCompare(a.name))},bookingsByDate:e=>e.selectedDate?e.bookings.filter(t=>!0):[],bookingsByEntity:(e,t)=>{const n=t.bookingsByDate,a={};return n.forEach(r=>{const s=r.entityId||r.entity?.id;a[s]||(a[s]=[]),a[s].push(r)}),a},conflicts:e=>{const t=[],n=e.bookings;for(let a=0;a<n.length;a++)for(let r=a+1;r<n.length;r++){const s=n[a],o=n[r];if(s.entityId===o.entityId||s.entity?.id===o.entity?.id){const i=s.startDateTime,c=s.endDateTime,A=o.startDateTime,d=o.endDateTime;i<d&&c>A&&t.push({booking1:s,booking2:o})}}return t}},mutations:{setEntities(e,t){e.entities=t},addEntity(e,t){e.entities.push(t)},updateEntity(e,t){const n=e.entities.findIndex(a=>a.id===t.id);n!==-1&&(e.entities[n]=t)},removeEntity(e,t){e.entities=e.entities.filter(n=>n.id!==t)},setBookings(e,t){e.bookings=t},addBooking(e,t){e.bookings.push(t)},updateBooking(e,t){const n=e.bookings.findIndex(a=>a.id===t.id);n!==-1&&(e.bookings[n]=t)},removeBooking(e,t){e.bookings=e.bookings.filter(n=>n.id!==t)},setSelectedDate(e,t){e.selectedDate=t;try{const n=JSON.parse(localStorage.getItem("resourceBookingState")||"{}");n.selectedDate=t,localStorage.setItem("resourceBookingState",JSON.stringify(n))}catch(n){console.error("Error persisting selectedDate:",n)}},setSelectedEntity(e,t){e.selectedEntity=t;try{const n=JSON.parse(localStorage.getItem("resourceBookingState")||"{}");n.selectedEntity=t,localStorage.setItem("resourceBookingState",JSON.stringify(n))}catch(n){console.error("Error persisting selectedEntity:",n)}},setEntitySearchQuery(e,t){e.entitySearchQuery=t;try{const n=JSON.parse(localStorage.getItem("resourceBookingState")||"{}");n.entitySearchQuery=t,localStorage.setItem("resourceBookingState",JSON.stringify(n))}catch(n){console.error("Error persisting entitySearchQuery:",n)}},setLoading(e,t){e.isLoading=t},setRefreshing(e,t){e.isRefreshing=t},setError(e,t){e.error=t},clearOldBookings(e){e.bookings=[]}},actions:{async fetchEntities({commit:e,rootState:t},{type:n=null,signal:a=null}={}){try{e("setLoading",!0),e("setError",null);const r=t.clinicId||t.clinicModule?.clinicId||1,s=await rde(r,n,a);if(s.error)throw s.error;return e("setEntities",s.data||[]),{data:s.data,error:null}}catch(r){return e("setError",r),{data:[],error:r}}finally{e("setLoading",!1)}},async createEntity({commit:e,dispatch:t},n){try{e("setError",null);const a=await sde(n);if(a.error)throw a.error;return e("addEntity",a.data),await t("fetchEntities"),{data:a.data,error:null}}catch(a){return e("setError",a),{data:null,error:a}}},async updateEntity({commit:e,dispatch:t},{id:n,entityData:a}){try{e("setError",null);const r=await ode(n,a);if(r.error)throw r.error;return e("updateEntity",r.data),await t("fetchEntities"),{data:r.data,error:null}}catch(r){return e("setError",r),{data:null,error:r}}},async deleteEntity({commit:e,dispatch:t},n){try{e("setError",null);const a=await ide(n);if(a.error)throw a.error;return e("removeEntity",n),await t("fetchEntities"),{data:a.data,error:null}}catch(a){return e("setError",a),{data:null,error:a}}},async fetchBookings({commit:e,rootState:t,state:n},{date:a=null,entityId:r=null,signal:s=null}={}){try{e("setLoading",!0),e("setError",null);const o=t.clinicId||t.clinicModule?.clinicId||1,i=a||n.selectedDate;if(!i)return e("setBookings",[]),{data:[],error:null};const c={clinic_id:o,date:i};r&&(c.entity_id=r);const A=await lde(c,s);if(A.error)throw A.error;return e("setBookings",A.data||[]),{data:A.data,error:null}}catch(o){return o.name!=="AbortError"&&e("setError",o),{data:[],error:o}}finally{e("setLoading",!1)}},async createBooking({commit:e,dispatch:t},n){try{e("setError",null);const a=await ude(n);if(a.error)throw a.error;return e("addBooking",a.data),await t("fetchBookings"),{data:a.data,error:null,hasConflicts:a.hasConflicts}}catch(a){return e("setError",a),{data:null,error:a,hasConflicts:!1}}},async updateBooking({commit:e,dispatch:t},{id:n,bookingData:a}){try{e("setError",null);const r=await cde(n,a);if(r.error)throw r.error;return e("updateBooking",r.data),await t("fetchBookings"),{data:r.data,error:null,hasConflicts:r.hasConflicts}}catch(r){return e("setError",r),{data:null,error:r,hasConflicts:!1}}},async deleteBooking({commit:e,dispatch:t},n){try{e("setError",null);const a=await dde(n);if(a.error)throw a.error;return e("removeBooking",n),await t("fetchBookings"),{data:a.data,error:null}}catch(a){return e("setError",a),{data:null,error:a}}},async refreshBookings({commit:e,dispatch:t,state:n}){try{return e("setRefreshing",!0),e("setError",null),await Promise.all([t("fetchEntities"),t("fetchBookings",{date:n.selectedDate})]),{error:null}}catch(a){return e("setError",a),{error:a}}finally{e("setRefreshing",!1)}},async checkConflicts({commit:e},{entityId:t,startDateTime:n,endDateTime:a,excludeId:r=null,signal:s=null}){try{const o=await Ade(t,n,a,r,s);if(o.error)throw o.error;return{data:o.data,error:null}}catch(o){return o.name!=="AbortError"&&e("setError",o),{data:{conflicts:[],hasConflicts:!1},error:o}}}}},vde=()=>localStorage.getItem("selectedTranslationLanguage")||"none",hde=()=>{const e=localStorage.getItem("selectedHeaderSize");return e?parseInt(e,10):130},Ti=Fae({state:{doctorId:1,clinicId:1,appInitialized:!1,appInitializing:!0,selectedTranslationLanguage:vde(),selectedHeaderSize:hde()},getters:{isAppInitialized:e=>e.appInitialized,isAppInitializing:e=>e.appInitializing,getCurrentDoctorId:e=>e.doctorId,getCurrentClinicId:e=>e.clinicId,getSelectedTranslationLanguage:e=>e.selectedTranslationLanguage,getSelectedHeaderSize:e=>e.selectedHeaderSize},mutations:{setDoctorId(e,t){e.doctorId=t},setClinicId(e,t){e.clinicId=t},setAppInitialized(e,t){e.appInitialized=t},setAppInitializing(e,t){e.appInitializing=t},setSelectedTranslationLanguage(e,t){e.selectedTranslationLanguage=t,t&&t!=="none"?localStorage.setItem("selectedTranslationLanguage",t):localStorage.removeItem("selectedTranslationLanguage")},setSelectedHeaderSize(e,t){const n=Math.max(50,Math.min(200,parseInt(t,10)||130));e.selectedHeaderSize=n,localStorage.setItem("selectedHeaderSize",n.toString())}},actions:{updateDoctorId({commit:e},t){e("setDoctorId",t)},updateClinicId({commit:e},t){e("setClinicId",t)},updateSelectedTranslationLanguage({commit:e},t){e("setSelectedTranslationLanguage",t)},updateSelectedHeaderSize({commit:e},t){e("setSelectedHeaderSize",t)}},modules:{auth:nce,doctorModule:oce,clinicModule:uce,pharmacyModule:Lce,appBar:Qce,snackbar:jce,researchModule:Xce,procedureResearchModule:Jce,reminderModule:ade,resourceBookingModule:mde}});let eE=null;const dt=Ir.create({baseURL:"",headers:{"Content-Type":"application/json"},timeout:3e5,withCredentials:!1}),$v=e=>{console.log("[api/client] Base URL updated to:",e),eE=e,dt.defaults.baseURL=e},gM=async()=>{console.log("[api/client] Initializing API client..."),console.log("[api/client] Environment:",Ua()?"Electron":"Web"),console.log("[api/client] Current URL:",window.location.href);try{const e=Ik();$v(e),console.log("[api/client] API client initialized with base URL:",e)}catch(e){throw console.error("[api/client] Failed to initialize API client:",e.message),e}},pde=e=>{const t=Tr("localhost");return e.replace(t.api.https,t.api.http)},M3=e=>!e||!Ua()?!1:e.includes("localhost")||e.includes("127.0.0.1")||e.includes("192.168.");dt.interceptors.request.use(async e=>{if(Ua())try{const t=Ks.currentUser;if(t){const n=await t.getIdToken();e.headers.Authorization=`Bearer ${n}`}}catch(t){console.warn("Failed to get Firebase auth token:",t)}return e},e=>Promise.reject(e));dt.interceptors.response.use(e=>{if(e.data){const{success:t,message:n}=e.data,a=e.config.headers["X-Skip-Messages"]==="true";if(t&&n&&e.config.method!=="get"&&!a&&Ti.dispatch("snackbar/showSuccess",n),!t&&(n||e.data.error)&&!a){const r=e.data.error||n;Ti.dispatch("snackbar/showError",r)}}return e},async e=>{if(e.config&&!e.config.__isRetry&&Ua()){const a=e.config.baseURL||eE,r=!e.response,s=e.code==="CERT_AUTHORITY_INVALID"||e.code==="CERT_COMMON_NAME_INVALID"||e.code==="CERT_UNTRUSTED"||e.code==="ERR_CERT_AUTHORITY_INVALID"||e.code==="ERR_CERT_COMMON_NAME_INVALID"||e.code==="ERR_INSECURE_RESPONSE"||e.message?.includes("certificate")||e.message?.includes("SSL")||e.message?.includes("HTTPS")||e.message?.includes("self signed")||e.message?.includes("CERT_")||e.message?.includes("ERR_"),o=e.code==="ECONNREFUSED"||e.code==="ECONNRESET"||e.code==="ENOTFOUND"||e.code==="ETIMEDOUT";if(M3(a)&&a.startsWith("https://")&&(r||s||o||e.response?.status>=400)){console.log(" HTTPS failed for localhost (Electron mode), trying HTTP fallback..."),console.log("Error details:",{code:e.code,message:e.message,isNetworkError:r,isCertError:s,isConnectionError:o,originalUrl:a});try{const c=pde(a);console.log(`Attempting HTTP fallback: ${c}`),$v(c),e.config.__isRetry=!0,e.config.baseURL=c;const A=await dt.request(e.config);return console.log(" HTTP fallback successful"),A}catch(c){console.error(" HTTP fallback also failed:",c)}}}let t="An error occurred";return e.response?(console.error("Response error:",e.response.data),e.response.data?.error?t=e.response.data.error:e.response.data?.message?t=e.response.data.message:e.response.status===401?t="Authentication required":e.response.status===403?t="Access forbidden":e.response.status===404?t="Resource not found":e.response.status>=500&&(t="Server error occurred")):e.request?(console.error("Request error:",e.request),Ua()&&M3(eE)?t="Cannot connect to local server - please ensure the server is running":t="Network error - please check your connection"):(console.error("Error:",e.message),t=e.message||"Request failed"),e.config?.headers?.["X-Skip-Messages"]==="true"||Ti.dispatch("snackbar/showError",t),Promise.reject(e)});const yM=e=>({...e,headers:{...e.headers,"X-Skip-Messages":"true"}}),_M=Object.freeze(Object.defineProperty({__proto__:null,createSilentRequest:yM,default:dt,initializeAPIClient:gM,updateBaseURL:$v},Symbol.toStringTag,{value:"Module"})),Yr=V(localStorage.getItem("sessionToken")||null),Wd=V(JSON.parse(localStorage.getItem("permissions")||"[]")),jd=V(localStorage.getItem("isAdmin")==="true"),qd=V(localStorage.getItem("userName")||null),Yd=V(localStorage.getItem("userId")?parseInt(localStorage.getItem("userId")):null),Xd=V(JSON.parse(localStorage.getItem("features")||"[]")),gde=ae(()=>!!Yr.value),gv=V(!1),G_=V(null);Ke([Yr,Wd,jd,qd,Yd,Xd],()=>{if(Yr.value){localStorage.setItem("sessionToken",Yr.value),localStorage.setItem("permissions",JSON.stringify(Wd.value)),localStorage.setItem("isAdmin",jd.value.toString()),localStorage.setItem("userName",qd.value||"");const e=Yd.value;localStorage.setItem("userId",e!=null?String(e):""),localStorage.setItem("features",JSON.stringify(Xd.value))}else localStorage.removeItem("sessionToken"),localStorage.removeItem("permissions"),localStorage.removeItem("isAdmin"),localStorage.removeItem("userName"),localStorage.removeItem("userId"),localStorage.removeItem("features")},{deep:!0});let qx=!1,tE=[];const Yx=(e,t=null)=>{tE.forEach(n=>{e?n.reject(e):n.resolve(t)}),tE=[]};function wM(e=dt){e.interceptors.request.use(t=>{const n=t.url?.includes("/web/auth/login")||t.url?.includes("/web/auth/refresh");return Yr.value&&!n&&(t.headers["x-session-token"]=Yr.value),t},t=>Promise.reject(t)),e.interceptors.response.use(t=>t,async t=>{const n=t.config;if(t.response?.status===419)return console.warn("[useWebSession] Session invalidated - permissions may have been updated"),xc(),window.location.reload(),Promise.reject(t);if(t.response?.status===401&&Yr.value){if(n.url?.includes("/web/auth/"))return console.log("[useWebSession] 401 on auth endpoint, clearing session"),xc(),Promise.reject(t);if(qx)return new Promise((a,r)=>{tE.push({resolve:a,reject:r})}).then(a=>(n.headers["x-session-token"]=a,dt(n))).catch(a=>Promise.reject(a));qx=!0;try{return console.log("[useWebSession] Session expired (401), attempting automatic refresh..."),await bM()&&Yr.value?(console.log("[useWebSession] Session refreshed successfully, retrying original request"),n.headers["x-session-token"]=Yr.value,Yx(null,Yr.value),dt(n)):(console.warn("[useWebSession] Session refresh failed, clearing session"),xc(),Yx(t,null),Promise.reject(t))}catch(a){return console.error("[useWebSession] Session refresh error:",a),xc(),Yx(a,null),Promise.reject(a)}finally{qx=!1}}return Promise.reject(t)})}async function yde(e,t=null){gv.value=!0,G_.value=null;try{const n=await dt.post("/web/auth/login",{passcode:e,userId:t});if(n.data.success){Yr.value=n.data.sessionToken,Wd.value=n.data.permissions||[],jd.value=n.data.isAdmin||!1,qd.value=n.data.userName||null;const a=n.data.userId;return Yd.value=a!=null?typeof a=="number"?a:parseInt(a,10):null,Xd.value=n.data.features||[],{success:!0,isAdmin:n.data.isAdmin,userName:n.data.userName}}else throw new Error(n.data.error||"Login failed")}catch(n){throw G_.value=n.response?.data?.error||n.message||"Login failed",n}finally{gv.value=!1}}async function _de(){try{Yr.value&&await dt.post("/web/auth/logout",{},{headers:{"x-session-token":Yr.value}})}catch(e){console.error("Logout error:",e)}finally{xc()}}async function wde(){if(!Yr.value)return{valid:!1};gv.value=!0;try{const e=dt.defaults.baseURL;if(!e)return console.error("[useWebSession] API client base URL not set! Cannot verify session."),gv.value=!1,{valid:!1,error:"API client not initialized"};console.log("[useWebSession] Verifying session with base URL:",e),console.log("[useWebSession] Full URL will be:",`${e}/web/auth/verify`),console.log("[useWebSession] Session token exists:",!!Yr.value);const t=await dt.get("/web/auth/verify");if(t.data.valid){Wd.value=t.data.permissions||[],jd.value=t.data.isAdmin||!1,qd.value=t.data.userName||null;const n=t.data.userId;return Yd.value=n!=null?typeof n=="number"?n:parseInt(n,10):null,Xd.value=t.data.features||[],{valid:!0,...t.data}}else return xc(),{valid:!1}}catch(e){return console.error("[useWebSession] Session verification failed:",e),(e.code==="ERR_NETWORK"||e.message?.includes("CORS")||e.message?.includes("Network Error")||!e.response)&&(console.error("[useWebSession] CORS or network error detected. Base URL:",dt.defaults.baseURL),console.error("[useWebSession] This usually means the endpoint URL is incorrect or the server is not configured for CORS.")),e.response?.status===401&&xc(),{valid:!1,error:e.message}}finally{gv.value=!1}}async function bM(){if(!Yr.value)return console.warn("[useWebSession] Cannot refresh session - no session token"),!1;try{console.log("[useWebSession] Refreshing session...");const e=await dt.post("/web/auth/refresh",{},{headers:{"x-session-token":Yr.value}});if(e.data.success){if(e.data.sessionToken&&(Yr.value=e.data.sessionToken,console.log("[useWebSession] Session token updated after refresh")),e.data.permissions&&(Wd.value=e.data.permissions),e.data.isAdmin!==void 0&&(jd.value=e.data.isAdmin),e.data.userName&&(qd.value=e.data.userName),e.data.userId!==void 0){const t=e.data.userId;Yd.value=t!=null?typeof t=="number"?t:parseInt(t,10):null}return e.data.features&&(Xd.value=e.data.features),console.log("[useWebSession] Session refreshed successfully"),!0}return!1}catch(e){return console.error("[useWebSession] Session refresh error:",e),e.response?.status===401&&(console.warn("[useWebSession] Refresh endpoint returned 401 - session truly expired"),xc()),!1}}function xc(){Yr.value=null,Wd.value=[],jd.value=!1,qd.value=null,Yd.value=null,Xd.value=[],G_.value=null}function bde(e){Yr.value=e.sessionToken,Wd.value=e.permissions||[],jd.value=e.isAdmin||!1,qd.value=e.userName||null;const t=e.userId;Yd.value=t!=null?typeof t=="number"?t:parseInt(t,10):null,Xd.value=e.features||[]}function Kf(){return{sessionToken:ae(()=>Yr.value),permissions:ae(()=>Wd.value),isAdmin:ae(()=>jd.value),userName:ae(()=>qd.value),userId:ae(()=>Yd.value),features:ae(()=>Xd.value),isAuthenticated:gde,sessionLoading:ae(()=>gv.value),sessionError:ae(()=>G_.value),login:yde,logout:_de,verifySession:wde,refreshSession:bM,clearSession:xc,setSession:bde,setupSessionInterceptors:wM}}const xde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M10%204A4%204%200%200%200%206%208A4%204%200%200%200%2010%2012A4%204%200%200%200%2014%208A4%204%200%200%200%2010%204M17.5%2013C15%2013%2013%2015%2013%2017.5C13%2020%2015%2022%2017.5%2022C20%2022%2022%2020%2022%2017.5C22%2015%2020%2013%2017.5%2013M10%2014C5.58%2014%202%2015.79%202%2018V20H11.5A6.5%206.5%200%200%201%2011%2017.5A6.5%206.5%200%200%201%2011.95%2014.14C11.32%2014.06%2010.68%2014%2010%2014M17.5%2014.5C19.16%2014.5%2020.5%2015.84%2020.5%2017.5C20.5%2018.06%2020.35%2018.58%2020.08%2019L16%2014.92C16.42%2014.65%2016.94%2014.5%2017.5%2014.5M14.92%2016L19%2020.08C18.58%2020.35%2018.06%2020.5%2017.5%2020.5C15.84%2020.5%2014.5%2019.16%2014.5%2017.5C14.5%2016.94%2014.65%2016.42%2014.92%2016Z'%20/%3e%3c/svg%3e",Cde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M21.1,12.5L22.5,13.91L15.97,20.5L12.5,17L13.9,15.59L15.97,17.67L21.1,12.5M10,17L13,20H3V18C3,15.79%206.58,14%2011,14L12.89,14.11L10,17M11,4A4,4%200%200,1%2015,8A4,4%200%200,1%2011,12A4,4%200%200,1%207,8A4,4%200%200,1%2011,4Z'%20/%3e%3c/svg%3e",Sde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M10.63,14.1C12.23,10.58%2016.38,9.03%2019.9,10.63C23.42,12.23%2024.97,16.38%2023.37,19.9C22.24,22.4%2019.75,24%2017,24C14.3,24%2011.83,22.44%2010.67,20H1V18C1.06,16.86%201.84,15.93%203.34,15.18C4.84,14.43%206.72,14.04%209,14C9.57,14%2010.11,14.05%2010.63,14.1V14.1M9,4C10.12,4.03%2011.06,4.42%2011.81,5.17C12.56,5.92%2012.93,6.86%2012.93,8C12.93,9.14%2012.56,10.08%2011.81,10.83C11.06,11.58%2010.12,11.95%209,11.95C7.88,11.95%206.94,11.58%206.19,10.83C5.44,10.08%205.07,9.14%205.07,8C5.07,6.86%205.44,5.92%206.19,5.17C6.94,4.42%207.88,4.03%209,4M17,22A5,5%200%200,0%2022,17A5,5%200%200,0%2017,12A5,5%200%200,0%2012,17A5,5%200%200,0%2017,22M16,14H17.5V16.82L19.94,18.23L19.19,19.53L16,17.69V14Z'%20/%3e%3c/svg%3e",Ede="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M10%204A4%204%200%200%200%206%208A4%204%200%200%200%2010%2012A4%204%200%200%200%2014%208A4%204%200%200%200%2010%204M17%2012C16.87%2012%2016.76%2012.09%2016.74%2012.21L16.55%2013.53C16.25%2013.66%2015.96%2013.82%2015.7%2014L14.46%2013.5C14.35%2013.5%2014.22%2013.5%2014.15%2013.63L13.15%2015.36C13.09%2015.47%2013.11%2015.6%2013.21%2015.68L14.27%2016.5C14.25%2016.67%2014.24%2016.83%2014.24%2017C14.24%2017.17%2014.25%2017.33%2014.27%2017.5L13.21%2018.32C13.12%2018.4%2013.09%2018.53%2013.15%2018.64L14.15%2020.37C14.21%2020.5%2014.34%2020.5%2014.46%2020.5L15.7%2020C15.96%2020.18%2016.24%2020.35%2016.55%2020.47L16.74%2021.79C16.76%2021.91%2016.86%2022%2017%2022H19C19.11%2022%2019.22%2021.91%2019.24%2021.79L19.43%2020.47C19.73%2020.34%2020%2020.18%2020.27%2020L21.5%2020.5C21.63%2020.5%2021.76%2020.5%2021.83%2020.37L22.83%2018.64C22.89%2018.53%2022.86%2018.4%2022.77%2018.32L21.7%2017.5C21.72%2017.33%2021.74%2017.17%2021.74%2017C21.74%2016.83%2021.73%2016.67%2021.7%2016.5L22.76%2015.68C22.85%2015.6%2022.88%2015.47%2022.82%2015.36L21.82%2013.63C21.76%2013.5%2021.63%2013.5%2021.5%2013.5L20.27%2014C20%2013.82%2019.73%2013.65%2019.42%2013.53L19.23%2012.21C19.22%2012.09%2019.11%2012%2019%2012H17M10%2014C5.58%2014%202%2015.79%202%2018V20H11.68A7%207%200%200%201%2011%2017A7%207%200%200%201%2011.64%2014.09C11.11%2014.03%2010.56%2014%2010%2014M18%2015.5C18.83%2015.5%2019.5%2016.17%2019.5%2017C19.5%2017.83%2018.83%2018.5%2018%2018.5C17.16%2018.5%2016.5%2017.83%2016.5%2017C16.5%2016.17%2017.17%2015.5%2018%2015.5Z'%20/%3e%3c/svg%3e",Bde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M16%2017V19H2V17S2%2013%209%2013%2016%2017%2016%2017M12.5%207.5A3.5%203.5%200%201%200%209%2011A3.5%203.5%200%200%200%2012.5%207.5M15.94%2013A5.32%205.32%200%200%201%2018%2017V19H22V17S22%2013.37%2015.94%2013M15%204A3.39%203.39%200%200%200%2013.07%204.59A5%205%200%200%201%2013.07%2010.41A3.39%203.39%200%200%200%2015%2011A3.5%203.5%200%200%200%2015%204Z'%20/%3e%3c/svg%3e",kde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M12,4A4,4%200%200,1%2016,8A4,4%200%200,1%2012,12A4,4%200%200,1%208,8A4,4%200%200,1%2012,4M12,14C16.42,14%2020,15.79%2020,18V20H4V18C4,15.79%207.58,14%2012,14Z'%20/%3e%3c/svg%3e",Tde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M23%207V13H21V7M21%2015H23V17H21M12%202A2%202%200%200%200%2010%204A2%202%200%200%200%2010%204.29C7.12%205.14%205%207.82%205%2011V17L3%2019V20H21V19L19%2017V11C19%207.82%2016.88%205.14%2014%204.29A2%202%200%200%200%2014%204A2%202%200%200%200%2012%202M10%2021A2%202%200%200%200%2012%2023A2%202%200%200%200%2014%2021Z'%20/%3e%3c/svg%3e",Ide="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17.75%2021.16L15%2018.16L16.16%2017L17.75%2018.59L21.34%2015L22.5%2016.41L17.75%2021.16M3%2020V19L5%2017V11C5%207.9%207.03%205.18%2010%204.29V4C10%202.9%2010.9%202%2012%202C13.11%202%2014%202.9%2014%204V4.29C16.97%205.18%2019%207.9%2019%2011V12.08L18%2012C14.69%2012%2012%2014.69%2012%2018C12%2018.7%2012.12%2019.37%2012.34%2020H3M12%2023C10.9%2023%2010%2022.11%2010%2021H12.8C13.04%2021.41%2013.33%2021.79%2013.65%2022.13C13.29%2022.66%2012.69%2023%2012%2023Z'%20/%3e%3c/svg%3e",Fde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19%202L14%206.5V17.5L19%2013V2M6.5%205C4.55%205%202.45%205.4%201%206.5V21.16C1%2021.41%201.25%2021.66%201.5%2021.66C1.6%2021.66%201.65%2021.59%201.75%2021.59C3.1%2020.94%205.05%2020.5%206.5%2020.5C8.45%2020.5%2010.55%2020.9%2012%2022C13.35%2021.15%2015.8%2020.5%2017.5%2020.5C19.15%2020.5%2020.85%2020.81%2022.25%2021.56C22.35%2021.61%2022.4%2021.59%2022.5%2021.59C22.75%2021.59%2023%2021.34%2023%2021.09V6.5C22.4%206.05%2021.75%205.75%2021%205.5V19C19.9%2018.65%2018.7%2018.5%2017.5%2018.5C15.8%2018.5%2013.35%2019.15%2012%2020V6.5C10.55%205.4%208.45%205%206.5%205Z'%20/%3e%3c/svg%3e",Pde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M7,2H17A2,2%200%200,1%2019,4V20A2,2%200%200,1%2017,22H7A2,2%200%200,1%205,20V4A2,2%200%200,1%207,2M7,4V8H17V4H7M7,10V12H9V10H7M11,10V12H13V10H11M15,10V12H17V10H15M7,14V16H9V14H7M11,14V16H13V14H11M15,14V16H17V14H15M7,18V20H9V18H7M11,18V20H13V18H11M15,18V20H17V18H15Z'%20/%3e%3c/svg%3e",Dde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17,19H7V5H17M17,1H7C5.89,1%205,1.89%205,3V21A2,2%200%200,0%207,23H17A2,2%200%200,0%2019,21V3C19,1.89%2018.1,1%2017,1Z'%20/%3e%3c/svg%3e",Ude="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='currentColor'%20d='M16,11.78L20.24,4.45L21.97,5.45L16.74,14.5L10.23,10.75L5.46,19H22V21H2V3H4V17.54L9.5,8L16,11.78Z'%20/%3e%3c/svg%3e",Rde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M22,12A10,10%200%200,1%2012,22A10,10%200%200,1%202,12A10,10%200%200,1%2012,2A10,10%200%200,1%2022,12M15.4,16.6L10.8,12L15.4,7.4L14,6L8,12L14,18L15.4,16.6Z'%20/%3e%3c/svg%3e",Nde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M22,12A10,10%200%200,1%2012,22A10,10%200%200,1%202,12A10,10%200%200,1%2012,2A10,10%200%200,1%2022,12M10,18L16,12L10,6L8.6,7.4L13.2,12L8.6,16.6L10,18Z'%20/%3e%3c/svg%3e",Vde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,3H14.82C14.4,1.84%2013.3,1%2012,1C10.7,1%209.6,1.84%209.18,3H5A2,2%200%200,0%203,5V19A2,2%200%200,0%205,21H19A2,2%200%200,0%2021,19V5A2,2%200%200,0%2019,3M12,3A1,1%200%200,1%2013,4A1,1%200%200,1%2012,5A1,1%200%200,1%2011,4A1,1%200%200,1%2012,3M5,13.46H7.17L10.5,7.08L11.44,14.05L13.93,10.86L16.53,13.46H19V15H15.89L14.07,13.21L10.38,17.92L9.62,12.15L8.11,15H5V13.46Z'%20/%3e%3c/svg%3e",Lde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17,9H7V7H17M17,13H7V11H17M14,17H7V15H14M12,3A1,1%200%200,1%2013,4A1,1%200%200,1%2012,5A1,1%200%200,1%2011,4A1,1%200%200,1%2012,3M19,3H14.82C14.4,1.84%2013.3,1%2012,1C10.7,1%209.6,1.84%209.18,3H5A2,2%200%200,0%203,5V19A2,2%200%200,0%205,21H19A2,2%200%200,0%2021,19V5A2,2%200%200,0%2019,3Z'%20/%3e%3c/svg%3e",Mde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M20%206.91L17.09%204L12%209.09L6.91%204L4%206.91L9.09%2012L4%2017.09L6.91%2020L12%2014.91L17.09%2020L20%2017.09L14.91%2012L20%206.91Z'%20/%3e%3c/svg%3e",Ode="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z'%20/%3e%3c/svg%3e",Hde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M13%2019C13%2019.34%2013.04%2019.67%2013.09%2020H6.5C5%2020%203.69%2019.5%202.61%2018.43C1.54%2017.38%201%2016.09%201%2014.58C1%2013.28%201.39%2012.12%202.17%2011.1S4%209.43%205.25%209.15C5.67%207.62%206.5%206.38%207.75%205.43S10.42%204%2012%204C13.95%204%2015.6%204.68%2016.96%206.04C18.32%207.4%2019%209.05%2019%2011C20.15%2011.13%2021.1%2011.63%2021.86%2012.5C22.37%2013.07%2022.7%2013.71%2022.86%2014.42C21.82%2013.54%2020.5%2013%2019%2013C15.69%2013%2013%2015.69%2013%2019M20%2016H18V20H16L19%2023L22%2020H20V16Z'%20/%3e%3c/svg%3e",$de="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,21H8V7H19M19,5H8A2,2%200%200,0%206,7V21A2,2%200%200,0%208,23H19A2,2%200%200,0%2021,21V7A2,2%200%200,0%2019,5M16,1H4A2,2%200%200,0%202,3V17H4V3H16V1Z'%20/%3e%3c/svg%3e",Qde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2%200%200,0%208,21H16A2,2%200%200,0%2018,19V7H6V19Z'%20/%3e%3c/svg%3e",Gde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M20%204H4c-1.1%200-1.99.9-1.99%202L2%2018c0%201.1.9%202%202%202h16c1.1%200%202-.9%202-2V6c0-1.1-.9-2-2-2zm0%204l-8%205-8-5V6l8%205%208-5v2z'%20fill='currentColor'/%3e%3c/svg%3e",zde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19%2013C19.34%2013%2019.67%2013.04%2020%2013.09V8L14%202H6C4.89%202%204%202.89%204%204V20C4%2021.11%204.89%2022%206%2022H13.81C13.3%2021.12%2013%2020.1%2013%2019C13%2015.69%2015.69%2013%2019%2013M13%203.5L18.5%209H13V3.5M23.5%2020L21%2023L18.5%2020H20V16H22V20H23.5M19.5%2018H18V22H16V18H14.5L17%2015L19.5%2018Z'%20/%3e%3c/svg%3e",Kde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M14,8H10V6H14V8M20,4V20C20,21.11%2019.11,22%2018,22H6C4.89,22%204,21.11%204,20V4A2,2%200%200,1%206,2H18C19.11,2%2020,2.9%2020,4M18,13H6V20H18V13M18,4H6V11H18V4M14,15H10V17H14V15Z'%20/%3e%3c/svg%3e",Wde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M8,12H16V14H8V12M10,20H6V4H13V9H18V12.1L20,10.1V8L14,2H6A2,2%200%200,0%204,4V20A2,2%200%200,0%206,22H10V20M8,18H12.1L13,17.1V16H8V18M20.2,13C20.3,13%2020.5,13.1%2020.6,13.2L21.9,14.5C22.1,14.7%2022.1,15.1%2021.9,15.3L20.9,16.3L18.8,14.2L19.8,13.2C19.9,13.1%2020,13%2020.2,13M20.2,16.9L14.1,23H12V20.9L18.1,14.8L20.2,16.9Z'%20/%3e%3c/svg%3e",jde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M14%202H6C4.89%202%204%202.89%204%204V20C4%2021.11%204.89%2022%206%2022H13.81C13.28%2021.09%2013%2020.05%2013%2019C13%2018.67%2013.03%2018.33%2013.08%2018H6V16H13.81C14.27%2015.2%2014.91%2014.5%2015.68%2014H6V12H18V13.08C18.33%2013.03%2018.67%2013%2019%2013S19.67%2013.03%2020%2013.08V8L14%202M13%209V3.5L18.5%209H13M18%2015V18H15V20H18V23H20V20H23V18H20V15H18Z'%20/%3e%3c/svg%3e",qde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M14,2H6A2,2%200%200,0%204,4V20A2,2%200%200,0%206,22H18A2,2%200%200,0%2020,20V8L14,2M13.5,16V19H10.5V16H8L12,12L16,16H13.5M13,9V3.5L18.5,9H13Z'%20/%3e%3c/svg%3e",Yde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M6.1,10L4,18V8H21A2,2%200%200,0%2019,6H12L10,4H4A2,2%200%200,0%202,6V18A2,2%200%200,0%204,20H19C19.9,20%2020.7,19.4%2020.9,18.5L23.2,10H6.1M19,18H6L7.6,12H20.6L19,18Z'%20/%3e%3c/svg%3e",Xde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M14,14H19V16H16V19H14V14M5,14H10V19H8V16H5V14M8,5H10V10H5V8H8V5M19,8V10H14V5H16V8H19Z'%20/%3e%3c/svg%3e",Jde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17V19H5V14H7V17H10Z'%20/%3e%3c/svg%3e",Zde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z'%20/%3e%3c/svg%3e",eAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M5%206C3.9%206%203%206.9%203%208S3.9%2010%205%2010%207%209.11%207%208%206.11%206%205%206M12%204C10.9%204%2010%204.89%2010%206S10.9%208%2012%208%2014%207.11%2014%206%2013.11%204%2012%204M19%202C17.9%202%2017%202.9%2017%204S17.9%206%2019%206%2021%205.11%2021%204%2020.11%202%2019%202M3.5%2011C2.67%2011%202%2011.67%202%2012.5V17H3V22H7V17H8V12.5C8%2011.67%207.33%2011%206.5%2011H3.5M10.5%209C9.67%209%209%209.67%209%2010.5V15H10V20H14V15H15V10.5C15%209.67%2014.33%209%2013.5%209H10.5M17.5%207C16.67%207%2016%207.67%2016%208.5V13H17V18H21V13H22V8.5C22%207.67%2021.33%207%2020.5%207H17.5Z'%20/%3e%3c/svg%3e",tAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M21,17H7V3H21M21,1H7A2,2%200%200,0%205,3V17A2,2%200%200,0%207,19H21A2,2%200%200,0%2023,17V3A2,2%200%200,0%2021,1M3,5H1V21A2,2%200%200,0%203,23H19V21H3M15.96,10.29L13.21,13.83L11.25,11.47L8.5,15H19.5L15.96,10.29Z'%20/%3e%3c/svg%3e",nAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M4,6H20V16H4M20,18A2,2%200%200,0%2022,16V6C22,4.89%2021.1,4%2020,4H4C2.89,4%202,4.89%202,6V16A2,2%200%200,0%204,18H0V20H24V18H20Z'%20/%3e%3c/svg%3e",aAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19%203H5C3.9%203%203%203.9%203%205V19C3%2020.1%203.9%2021%205%2021H19C20.1%2021%2021%2020.1%2021%2019V5C21%203.9%2020.1%203%2019%203M7%207H9V9H7V7M7%2011H9V13H7V11M7%2015H9V17H7V15M17%2017H11V15H17V17M17%2013H11V11H17V13M17%209H11V7H17V9Z'%20/%3e%3c/svg%3e",rAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17%207L15.59%208.41L18.17%2011H8V13H18.17L15.59%2015.58L17%2017L22%2012M4%205H12V3H4C2.9%203%202%203.9%202%205V19C2%2020.1%202.9%2021%204%2021H12V19H4V5Z'%20/%3e%3c/svg%3e",sAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M9,2A7,7%200%200,1%2016,9C16,10.57%2015.5,12%2014.61,13.19L15.41,14H16L22,20L20,22L14,16V15.41L13.19,14.61C12,15.5%2010.57,16%209,16A7,7%200%200,1%202,9A7,7%200%200,1%209,2M5,8V10H13V8H5Z'%20/%3e%3c/svg%3e",oAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M9,2A7,7%200%200,1%2016,9C16,10.57%2015.5,12%2014.61,13.19L15.41,14H16L22,20L20,22L14,16V15.41L13.19,14.61C12,15.5%2010.57,16%209,16A7,7%200%200,1%202,9A7,7%200%200,1%209,2M8,5V8H5V10H8V13H10V10H13V8H10V5H8Z'%20/%3e%3c/svg%3e",iAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M9.5,3A6.5,6.5%200%200,1%2016,9.5C16,11.11%2015.41,12.59%2014.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41%2011.11,16%209.5,16A6.5,6.5%200%200,1%203,9.5A6.5,6.5%200%200,1%209.5,3M9.5,5C7,5%205,7%205,9.5C5,12%207,14%209.5,14C12,14%2014,12%2014,9.5C14,7%2012,5%209.5,5Z'%20/%3e%3c/svg%3e",lAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z'%20/%3e%3c/svg%3e",uAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,11C19,12.19%2018.66,13.3%2018.1,14.28L16.87,13.05C17.14,12.43%2017.3,11.74%2017.3,11H19M15,11.16L9,5.18V5A3,3%200%200,1%2012,2A3,3%200%200,1%2015,5V11L15,11.16M4.27,3L21,19.73L19.73,21L15.54,16.81C14.77,17.27%2013.91,17.58%2013,17.72V21H11V17.72C7.72,17.23%205,14.41%205,11H6.7C6.7,14%209.24,16.1%2012,16.1C12.81,16.1%2013.6,15.91%2014.31,15.58L12.65,13.92L12,14A3,3%200%200,1%209,11V10.28L3,4.27L4.27,3Z'%20/%3e%3c/svg%3e",cAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M12,2A3,3%200%200,1%2015,5V11A3,3%200%200,1%2012,14A3,3%200%200,1%209,11V5A3,3%200%200,1%2012,2M19,11C19,14.53%2016.39,17.44%2013,17.93V21H11V17.93C7.61,17.44%205,14.53%205,11H7A5,5%200%200,0%2012,16A5,5%200%200,0%2017,11H19Z'%20/%3e%3c/svg%3e",dAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M11.15,15.18L9.73,13.77L11.15,12.35L12.56,13.77L13.97,12.35L12.56,10.94L13.97,9.53L15.39,10.94L16.8,9.53L13.97,6.7L6.9,13.77L9.73,16.6L11.15,15.18M3.08,19L6.2,15.89L4.08,13.77L13.97,3.87L16.1,6L17.5,4.58L16.1,3.16L17.5,1.75L21.75,6L20.34,7.4L18.92,6L17.5,7.4L19.63,9.53L9.73,19.42L7.61,17.3L3.08,21.84V19Z'%20/%3e%3c/svg%3e",AAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M20.71,7.04C21.1,6.65%2021.1,6%2020.71,5.63L18.37,3.29C18,2.9%2017.35,2.9%2016.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z'%20/%3e%3c/svg%3e",fAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z'%20/%3e%3c/svg%3e",mAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M4,4V10L4,14H6V10H8L13.41,15.41L9.83,19L11.24,20.41L14.83,16.83L18.41,20.41L19.82,19L16.24,15.41L19.82,11.83L18.41,10.41L14.83,14L10.83,10H11A3,3%200%200,0%2014,7A3,3%200%200,0%2011,4H4M6,6H11A1,1%200%200,1%2012,7A1,1%200%200,1%2011,8H6V6Z'%20/%3e%3c/svg%3e",vAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M18,3H6V7H18M19,12A1,1%200%200,1%2018,11A1,1%200%200,1%2019,10A1,1%200%200,1%2020,11A1,1%200%200,1%2019,12M16,19H8V14H16M19,8H5A3,3%200%200,0%202,11V17H6V21H18V17H22V11A3,3%200%200,0%2019,8Z'%20/%3e%3c/svg%3e",hAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17.65,6.35C16.2,4.9%2014.21,4%2012,4A8,8%200%200,0%204,12A8,8%200%200,0%2012,20C15.73,20%2018.84,17.45%2019.73,14H17.65C16.83,16.33%2014.61,18%2012,18A6,6%200%200,1%206,12A6,6%200%200,1%2012,6C13.66,6%2015.14,6.69%2016.22,7.78L13,11H20V4L17.65,6.35Z'%20/%3e%3c/svg%3e",pAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M4,1H20A1,1%200%200,1%2021,2V6A1,1%200%200,1%2020,7H4A1,1%200%200,1%203,6V2A1,1%200%200,1%204,1M4,9H20A1,1%200%200,1%2021,10V14A1,1%200%200,1%2020,15H4A1,1%200%200,1%203,14V10A1,1%200%200,1%204,9M4,17H20A1,1%200%200,1%2021,18V22A1,1%200%200,1%2020,23H4A1,1%200%200,1%203,22V18A1,1%200%200,1%204,17M9,5H10V3H9V5M9,13H10V11H9V13M9,21H10V19H9V21M5,3V5H7V3H5M5,11V13H7V11H5M5,19V21H7V19H5Z'%20/%3e%3c/svg%3e",gAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M18,16.08C17.24,16.08%2016.56,16.38%2016.04,16.85L8.91,12.7C8.96,12.47%209,12.24%209,12C9,11.76%208.96,11.53%208.91,11.3L15.96,7.19C16.5,7.69%2017.21,8%2018,8A3,3%200%200,0%2021,5A3,3%200%200,0%2018,2A3,3%200%200,0%2015,5C15,5.24%2015.04,5.47%2015.09,5.7L8.04,9.81C7.5,9.31%206.79,9%206,9A3,3%200%200,0%203,12A3,3%200%200,0%206,15C6.79,15%207.5,14.69%208.04,14.19L15.16,18.34C15.11,18.55%2015.08,18.77%2015.08,19C15.08,20.61%2016.39,21.91%2018,21.91C19.61,21.91%2020.92,20.61%2020.92,19A2.92,2.92%200%200,0%2018,16.08Z'%20/%3e%3c/svg%3e",yAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z'%20/%3e%3c/svg%3e",_Ae="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17,10.5V7A1,1%200%200,0%2016,6H4A1,1%200%200,0%203,7V17A1,1%200%200,0%204,18H16A1,1%200%200,0%2017,17V13.5L21,17.5V6.5L17,10.5M14,13H11V16H9V13H6V11H9V8H11V11H14V13Z'%20/%3e%3c/svg%3e",wAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M6,19A5,5%200%200,1%201,14A5,5%200%200,1%206,9C7,6.65%209.3,5%2012,5C15.43,5%2018.24,7.66%2018.5,11.03L19,11A4,4%200%200,1%2023,15A4,4%200%200,1%2019,19H6M19,13H17V12A5,5%200%200,0%2012,7C9.5,7%207.45,8.82%207.06,11.19C6.73,11.07%206.37,11%206,11A3,3%200%200,0%203,14A3,3%200%200,0%206,17H19A2,2%200%200,0%2021,15A2,2%200%200,0%2019,13Z'%20/%3e%3c/svg%3e",bAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M16.36,14C16.44,13.34%2016.5,12.68%2016.5,12C16.5,11.32%2016.44,10.66%2016.36,10H19.74C19.9,10.64%2020,11.31%2020,12C20,12.69%2019.9,13.36%2019.74,14M14.59,19.56C15.19,18.45%2015.65,17.25%2015.97,16H18.92C17.96,17.65%2016.43,18.93%2014.59,19.56M14.34,14H9.66C9.56,13.34%209.5,12.68%209.5,12C9.5,11.32%209.56,10.65%209.66,10H14.34C14.43,10.65%2014.5,11.32%2014.5,12C14.5,12.68%2014.43,13.34%2014.34,14M12,19.96C11.17,18.76%2010.5,17.43%2010.09,16H13.91C13.5,17.43%2012.83,18.76%2012,19.96M8,8H5.08C6.03,6.34%207.57,5.06%209.4,4.44C8.8,5.55%208.35,6.75%208,8M5.08,16H8C8.35,17.25%208.8,18.45%209.4,19.56C7.57,18.93%206.03,17.65%205.08,16M4.26,14C4.1,13.36%204,12.69%204,12C4,11.31%204.1,10.64%204.26,10H7.64C7.56,10.66%207.5,11.32%207.5,12C7.5,12.68%207.56,13.34%207.64,14M12,4.03C12.83,5.23%2013.5,6.57%2013.91,8H10.09C10.5,6.57%2011.17,5.23%2012,4.03M18.92,8H15.97C15.65,6.75%2015.19,5.55%2014.59,4.44C16.43,5.07%2017.96,6.34%2018.92,8M12,2C6.47,2%202,6.5%202,12A10,10%200%200,0%2012,22A10,10%200%200,0%2022,12A10,10%200%200,0%2012,2Z'%20/%3e%3c/svg%3e",xAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M12.04%202C6.58%202%202.13%206.45%202.13%2011.91C2.13%2013.66%202.59%2015.36%203.45%2016.86L2.05%2022L7.3%2020.62C8.75%2021.41%2010.38%2021.83%2012.04%2021.83C17.5%2021.83%2021.95%2017.38%2021.95%2011.92C21.95%209.27%2020.92%206.78%2019.05%204.91C17.18%203.03%2014.69%202%2012.04%202M12.05%203.67C14.25%203.67%2016.31%204.53%2017.87%206.09C19.42%207.65%2020.28%209.72%2020.28%2011.92C20.28%2016.46%2016.58%2020.15%2012.04%2020.15C10.56%2020.15%209.11%2019.76%207.85%2019L7.55%2018.83L4.43%2019.65L5.26%2016.61L5.06%2016.29C4.24%2015%203.8%2013.47%203.8%2011.91C3.81%207.37%207.5%203.67%2012.05%203.67M8.53%207.33C8.37%207.33%208.1%207.39%207.87%207.64C7.65%207.89%207%208.5%207%209.71C7%2010.93%207.89%2012.1%208%2012.27C8.14%2012.44%209.76%2014.94%2012.25%2016C12.84%2016.27%2013.3%2016.42%2013.66%2016.53C14.25%2016.72%2014.79%2016.69%2015.22%2016.63C15.7%2016.56%2016.68%2016.03%2016.89%2015.45C17.1%2014.87%2017.1%2014.38%2017.04%2014.27C16.97%2014.17%2016.81%2014.11%2016.56%2014C16.31%2013.86%2015.09%2013.26%2014.87%2013.18C14.64%2013.1%2014.5%2013.06%2014.31%2013.3C14.15%2013.55%2013.67%2014.11%2013.53%2014.27C13.38%2014.44%2013.24%2014.46%2013%2014.34C12.74%2014.21%2011.94%2013.95%2011%2013.11C10.26%2012.45%209.77%2011.64%209.62%2011.39C9.5%2011.15%209.61%2011%209.73%2010.89C9.84%2010.78%2010%2010.6%2010.1%2010.45C10.23%2010.31%2010.27%2010.2%2010.35%2010.04C10.43%209.87%2010.39%209.73%2010.33%209.61C10.27%209.5%209.77%208.26%209.56%207.77C9.36%207.29%209.16%207.35%209%207.34C8.86%207.34%208.7%207.33%208.53%207.33Z'%20/%3e%3c/svg%3e",CAe="5.2.24",xM={version:CAe},SAe=""+new URL("images/nav_drawer_banner-B2zCGthx.png",import.meta.url).href,z_=""+new URL("images/logo-Du9HqkeA.png",import.meta.url).href,Mo=V(localStorage.getItem("desktopSessionToken")||null),ql=V(JSON.parse(localStorage.getItem("desktopPermissions")||"[]")),Yl=V(localStorage.getItem("desktopIsAdmin")==="true"),yf=V(localStorage.getItem("desktopUserName")||null),_f=V(localStorage.getItem("desktopUserId")?parseInt(localStorage.getItem("desktopUserId")):null),wf=V(JSON.parse(localStorage.getItem("desktopFeatures")||"[]")),bf=V(localStorage.getItem("googleVerified")==="true"),R0=V(localStorage.getItem("googleUserId")?parseInt(localStorage.getItem("googleUserId")):null),K_=V(localStorage.getItem("googleUserName")||null),EAe=ae(()=>!!Mo.value);ae(()=>bf.value);const BAe=ae(()=>bf.value?Mo.value?"complete":"passcode":"google"),xf=V(!1),Qv=V(null);Ke([Mo,ql,Yl,yf,_f,wf,bf,R0,K_],()=>{Mo.value?(localStorage.setItem("desktopSessionToken",Mo.value),localStorage.setItem("desktopPermissions",JSON.stringify(ql.value)),localStorage.setItem("desktopIsAdmin",Yl.value.toString()),localStorage.setItem("desktopUserName",yf.value||""),localStorage.setItem("desktopUserId",_f.value?.toString()||""),localStorage.setItem("desktopFeatures",JSON.stringify(wf.value))):(localStorage.removeItem("desktopSessionToken"),localStorage.removeItem("desktopPermissions"),localStorage.removeItem("desktopIsAdmin"),localStorage.removeItem("desktopUserName"),localStorage.removeItem("desktopUserId"),localStorage.removeItem("desktopFeatures")),bf.value?(localStorage.setItem("googleVerified","true"),localStorage.setItem("googleUserId",R0.value?.toString()||""),localStorage.setItem("googleUserName",K_.value||"")):(localStorage.removeItem("googleVerified"),localStorage.removeItem("googleUserId"),localStorage.removeItem("googleUserName"))},{deep:!0});let O3=!1;function W_(e=dt){O3||(O3=!0,e.interceptors.request.use(t=>(Mo.value&&(t.headers["x-session-token"]=Mo.value),t),t=>Promise.reject(t)),e.interceptors.response.use(t=>t,t=>{if(t.response?.status===419){console.warn("Desktop session invalidated - permissions may have been updated");const n=t.response?.data?.message||"Your permissions have been updated. Please log in again.";alert(n),Gv()}return Promise.reject(t)}))}async function kAe(e){xf.value=!0,Qv.value=null;try{const t=await e.dispatch("auth/signInWithGoogle"),n=e.getters["auth/currentUser"];if(!n||!n.email)throw new Error("Google sign-in succeeded but no email returned");return{success:!0,email:n.email,displayName:n.displayName,isFirstTime:t}}catch(t){throw Qv.value=t.message||"Google sign-in failed",t}finally{xf.value=!1}}async function TAe(e,t=null){xf.value=!0,Qv.value=null;const n=t||R0.value;try{const a=await dt.post("/desktop/auth/login",{passcode:e,userId:n});if(a.data.success)return Mo.value=a.data.sessionToken,ql.value=a.data.permissions||[],Yl.value=a.data.isAdmin||!1,yf.value=a.data.userName||null,_f.value=a.data.userId||null,wf.value=a.data.features||[],{success:!0,isAdmin:a.data.isAdmin,userName:a.data.userName,permissions:a.data.permissions};throw new Error(a.data.error||"Login failed")}catch(a){throw Qv.value=a.response?.data?.error||a.message||"Login failed",a}finally{xf.value=!1}}async function IAe(){if(!Mo.value)return{valid:!1};xf.value=!0;try{const e=await dt.get("/desktop/auth/session",{headers:{"x-session-token":Mo.value}});return e.data.valid?(ql.value=e.data.permissions||[],Yl.value=e.data.isAdmin||!1,yf.value=e.data.userName||null,_f.value=e.data.userId||null,wf.value=e.data.features||[],{valid:!0,...e.data}):(Gv(),{valid:!1})}catch(e){return e.response?.status===401&&Gv(),{valid:!1,error:e.message}}finally{xf.value=!1}}async function FAe(e,t=!0){try{Mo.value&&await dt.post("/desktop/auth/logout",{},{headers:{"x-session-token":Mo.value}})}catch(n){console.error("Desktop logout error:",n)}finally{if(Gv(),Yk(),t&&e)try{await e.dispatch("auth/signOut")}catch(n){console.error("Google sign-out error:",n)}}}function Gv(){Mo.value=null,ql.value=[],Yl.value=!1,yf.value=null,_f.value=null,wf.value=[],Qv.value=null}function Yk(){bf.value=!1,R0.value=null,K_.value=null}function PAe(){Gv(),Yk()}function DAe(e){Mo.value=e.sessionToken,ql.value=e.permissions||[],Yl.value=e.isAdmin||!1,yf.value=e.userName||null,_f.value=e.userId||null,wf.value=e.features||[],e.googleVerified!==void 0&&(bf.value=e.googleVerified)}function H3(e){return Yl.value?!0:ql.value.includes(e)}function $3(e){return Yl.value?!0:e.some(t=>ql.value.includes(t))}function Q3(e){return Yl.value?!0:e.every(t=>ql.value.includes(t))}function G3(e){if(Yl.value)return!0;const t=`${e}.`;return ql.value.some(n=>!n||typeof n!="string"?!1:n===e?!0:n.startsWith(t))}function dh(){const e=Rn(),t=ae(()=>e?.getters["auth/currentUser"]),n=ae(()=>e?.getters["auth/isLoading"]),a=ae(()=>e?.getters["auth/redirectInProgress"]),r=ae(()=>e?.getters["auth/isAuthenticated"]);return W_(),{sessionToken:ae(()=>Mo.value),permissions:ae(()=>ql.value),isAdmin:ae(()=>Yl.value),userName:ae(()=>yf.value),userId:ae(()=>_f.value),features:ae(()=>wf.value),isAuthenticated:EAe,googleUser:t,googleLoading:n,googleRedirectInProgress:a,isGoogleSignedIn:r,isGoogleVerified:ae(()=>bf.value),googleVerifiedUserId:ae(()=>R0.value),googleVerifiedUserName:ae(()=>K_.value),authStep:BAe,sessionLoading:ae(()=>xf.value),sessionError:ae(()=>Qv.value),signInWithGoogle:()=>kAe(e),loginWithPasscode:(s,o)=>TAe(s,o),verifyDesktopSession:()=>IAe(),logoutDesktop:(s=!0)=>FAe(e,s),clearDesktopSession:Gv,clearGoogleVerification:Yk,resetAllAuthState:PAe,setDesktopSession:DAe,hasPermission:s=>ae(()=>H3(s)),hasAnyPermission:s=>ae(()=>$3(s)),hasAllPermissions:s=>ae(()=>Q3(s)),hasFeatureAccess:s=>ae(()=>G3(s)),checkPermission:H3,checkAnyPermission:$3,checkAllPermissions:Q3,checkFeatureAccess:G3,setupDesktopSessionInterceptors:W_,store:e}}function Ah(){const e=Ua(),t=e?dh():null,n=e?null:Kf(),a=ae(()=>e&&t?t.permissions.value||[]:!e&&n?n.permissions.value||[]:[]),r=ae(()=>e&&t?t.isAdmin.value||!1:!e&&n&&n.isAdmin.value||!1),s=ae(()=>e&&t?t.features.value||[]:!e&&n?n.features.value||[]:[]),o=g=>ae(()=>r.value?!0:a.value.includes(g)),i=g=>ae(()=>r.value||!g||g.length===0?!0:g.some(w=>a.value.includes(w))),c=g=>ae(()=>r.value||!g||g.length===0?!0:g.every(w=>a.value.includes(w))),A=g=>ae(()=>{if(!g)return!1;const w=s.value.find(x=>x&&x.id===g);return w&&w.adminOnly?r.value:r.value?!0:!a.value||!Array.isArray(a.value)?!1:a.value.some(x=>!x||typeof x!="string"?!1:x===g?!0:x.startsWith(`${g}.`))}),d=ae(()=>{if(r.value)return s.value.map(w=>w.id);const g=new Set;return a.value.forEach(w=>{const[b]=w.split(".");g.add(b)}),Array.from(g)});return{permissions:a,isAdmin:r,features:s,accessibleFeatures:d,hasPermission:o,hasAnyPermission:i,hasAllPermissions:c,hasFeatureAccess:A,getFeatureActions:g=>ae(()=>{if(r.value){const w=s.value.find(b=>b.id===g);return w?w.actions.map(b=>b.action):[]}return a.value.filter(w=>w.startsWith(`${g}.`)).map(w=>w.split(".")[1])}),canPerformAction:(g,w)=>ae(()=>r.value?!0:a.value.includes(`${g}.${w}`)),checkPermission:g=>r.value?!0:a.value.includes(g),checkAnyPermission:g=>r.value||!g||g.length===0?!0:g.some(w=>a.value.includes(w)),checkFeatureAccess:g=>{if(!a.value||!Array.isArray(a.value))return!1;const w=s.value.find(x=>x&&x.id===g);return w&&w.adminOnly?r.value:r.value?!0:a.value.some(x=>!x||typeof x!="string"?!1:x===g?!0:x.startsWith(`${g}.`))}}}const Xt=(e,t)=>{const n=e.__vccOpts||e;for(const[a,r]of t)n[a]=r;return n},UAe={class:"nav-icon-container"},RAe=["src"],NAe={class:"nav-icon-container"},VAe=["src"],LAe={class:"nav-footer"},MAe={class:"version-display"},OAe={__name:"side-nav",props:{collapsed:{type:Boolean,default:!1}},setup(e){const n=Mf(e).collapsed,a=xM.version,{isAdmin:r,permissions:s,features:o}=Ah(),i=Ua(),c=i?dh():null,A=i?null:Kf();Ke([s,r],([p,y])=>{},{immediate:!0,deep:!0}),un(async()=>{if(i&&c&&c.sessionToken.value)try{await c.verifyDesktopSession(),console.log("[SideNav] Desktop session verified, permissions updated")}catch(p){console.error("[SideNav] Failed to verify desktop session:",p)}else if(!i&&A&&A.sessionToken.value)try{await A.verifySession(),console.log("[SideNav] Web session verified, permissions updated")}catch(p){console.error("[SideNav] Failed to verify web session:",p)}});const d=[{type:"divider"},{type:"subheader",title:"Clinic"},{title:"Home",value:1,icon:"custom-home",route:"/home",feature:"home"},{title:"Patients",value:2,icon:"custom-account-multiple",route:"/patients",feature:"patients"},{title:"Tasks",value:6,icon:"custom-list-box",route:"/tasks",feature:"tasks"},{title:"Research",value:5,icon:"custom-book-open-page-variant",route:"/research",feature:"research"},{title:"Reports",value:8,icon:"mdi-chart-line",route:"/reports",feature:"reports"},{type:"divider"},{type:"subheader",title:"Finances"},{title:"Payments",value:7,icon:"mdi-currency-inr",route:"/payments",feature:"billing"},{type:"divider"},{type:"subheader",title:"Pharmacy"},{title:"Queue",value:9,icon:"mdi-pill",route:"/pharmacy/queue",feature:"pharmacy.queue"},{title:"Inventory",value:10,icon:"mdi-package-variant",route:"/pharmacy/inventory",feature:"pharmacy.inventory"},{title:"Purchase",value:12,icon:"mdi-cart",route:"/pharmacy/purchase",feature:"pharmacy.purchase"},{title:"Reports",value:11,icon:"mdi-chart-line",route:"/pharmacy/reports",feature:"pharmacy.reports"},{type:"divider"},{type:"subheader",title:"Setup"},{title:"Admin",value:3,icon:"custom-account-cog",route:"/admin",requiresAdmin:!0},{title:"Data",value:4,icon:"custom-file-arrow-up-down",route:"/data",feature:"data"}],f=ae(()=>{const p=s.value||[],y=r.value,g=o.value||[],w=()=>y?!0:!p||!Array.isArray(p)?!1:p.some(S=>S&&typeof S=="string"&&S.startsWith("admin.")),b=S=>{const E=g.find(D=>D&&D.id===S);return E&&E.adminOnly?y:y?!0:!p||!Array.isArray(p)?!1:p.some(D=>!D||typeof D!="string"?!1:D===S?!0:D.startsWith(`${S}.`))},x=S=>S.type==="divider"||S.type==="subheader"?!1:S.requiresAdmin?S.route==="/admin"?w():y:S.permission?y?!0:p.includes(S.permission):S.feature?b(S.feature):!0,T=[];let F={divider:null,subheader:null,items:[]};for(let S=0;S<d.length;S++){const E=d[S];E.type==="divider"?(F.items.some(x)&&(F.divider&&T.push(F.divider),F.subheader&&T.push(F.subheader),F.items.forEach(D=>{x(D)&&T.push(D)})),F={divider:E,subheader:null,items:[]}):E.type==="subheader"?F.subheader=E:F.items.push(E)}return F.items.some(x)&&(F.divider&&T.push(F.divider),F.subheader&&T.push(F.subheader),F.items.forEach(S=>{x(S)&&T.push(S)})),T}),m=p=>{console.log("Navigation item clicked:",p.title);const y=event.currentTarget;y&&(y.classList.add("nav-ripple"),setTimeout(()=>{y.classList.remove("nav-ripple")},600))},h=p=>{const y=p.replace("custom-","");try{return new URL(Object.assign({"../assets/icons/account-cancel.svg":xde,"../assets/icons/account-check.svg":Cde,"../assets/icons/account-clock.svg":Sde,"../assets/icons/account-cog.svg":Ede,"../assets/icons/account-multiple.svg":Bde,"../assets/icons/account.svg":kde,"../assets/icons/bell-alert.svg":Tde,"../assets/icons/bell-check.svg":Ide,"../assets/icons/book-open-page-variant.svg":Fde,"../assets/icons/calculator-variant.svg":Pde,"../assets/icons/cellphone.svg":Dde,"../assets/icons/chart-line-variant.svg":Ude,"../assets/icons/chevron-left-circle.svg":Rde,"../assets/icons/chevron-right-circle.svg":Nde,"../assets/icons/clipboard-pulse.svg":Vde,"../assets/icons/clipboard-text-outline.svg":Lde,"../assets/icons/close-thick.svg":Mde,"../assets/icons/close.svg":Ode,"../assets/icons/cloud-arrow-down.svg":Hde,"../assets/icons/content-copy.svg":$de,"../assets/icons/delete.svg":Qde,"../assets/icons/email.svg":Gde,"../assets/icons/file-arrow-up-down.svg":zde,"../assets/icons/file-cabinet.svg":Kde,"../assets/icons/file-document-edit-outline.svg":Wde,"../assets/icons/file-document-plus.svg":jde,"../assets/icons/file-upload.svg":qde,"../assets/icons/folder-open-outline.svg":Yde,"../assets/icons/fullscreen-exit.svg":Xde,"../assets/icons/fullscreen.svg":Jde,"../assets/icons/home.svg":Zde,"../assets/icons/human-queue.svg":eAe,"../assets/icons/image-multiple-outline.svg":tAe,"../assets/icons/laptop.svg":nAe,"../assets/icons/list-box.svg":aAe,"../assets/icons/logout.svg":rAe,"../assets/icons/magnify-minus.svg":sAe,"../assets/icons/magnify-plus.svg":oAe,"../assets/icons/magnify.svg":iAe,"../assets/icons/menu.svg":lAe,"../assets/icons/microphone-off.svg":uAe,"../assets/icons/microphone.svg":cAe,"../assets/icons/needle.svg":dAe,"../assets/icons/pencil.svg":AAe,"../assets/icons/plus.svg":fAe,"../assets/icons/prescription.svg":mAe,"../assets/icons/printer.svg":vAe,"../assets/icons/refresh.svg":hAe,"../assets/icons/server.svg":pAe,"../assets/icons/share-variant.svg":gAe,"../assets/icons/upload.svg":yAe,"../assets/icons/video-plus.svg":_Ae,"../assets/icons/weather-cloudy.svg":wAe,"../assets/icons/web.svg":bAe,"../assets/icons/whatsapp.svg":xAe})[`../assets/icons/${y}.svg`],import.meta.url).href}catch(g){return console.warn(`Failed to load icon: ${y}.svg`,g),""}};return(p,y)=>{const g=I("v-img"),w=I("v-divider"),b=I("v-list-subheader"),x=I("v-icon"),T=I("v-list-item-title"),F=I("v-list-item"),k=I("v-tooltip"),S=I("v-list"),E=I("v-navigation-drawer");return U(),pe(E,{elevation:1,width:150,rail:$e(n),"rail-width":80,permanent:"",image:$e(SAe),app:"",class:"nav-drawer-with-opacity"},kv({append:u(()=>[v("div",LAe,[v("div",MAe," v"+K($e(a)),1)])]),default:u(()=>[l(S,{density:"compact",nav:"",lines:!1,class:"interactive-nav-list"},{default:u(()=>[(U(!0),me(We,null,qt(f.value,C=>(U(),me(We,{key:C.value||C.title},[C.type==="divider"?(U(),pe(w,{key:0,divider:"",class:"nav-divider"})):ge("",!0),C.type==="subheader"?(U(),pe(b,{key:1,class:"nav-subheader"},{default:u(()=>[M(K(C.title),1)]),_:2},1024)):ge("",!0),C.type!=="divider"&&C.type!=="subheader"?(U(),me(We,{key:2},[$e(n)?(U(),pe(k,{key:0,location:"right","open-delay":200},{activator:u(({props:D})=>[l(F,Ue({ref_for:!0},D,{to:C.route,class:"nav-item-interactive",onClick:P=>m(C)}),{prepend:u(()=>[v("div",UAe,[C.icon.startsWith("custom-")?(U(),pe(x,{key:1,size:"large",class:"nav-icon"},{default:u(()=>[v("img",{src:h(C.icon),alt:""},null,8,RAe)]),_:2},1024)):(U(),pe(x,{key:0,size:"large",icon:C.icon,class:"nav-icon"},null,8,["icon"]))])]),default:u(()=>[l(T,{class:"font-weight-bold nav-title"},{default:u(()=>[M(K(C.title),1)]),_:2},1024)]),_:2},1040,["to","onClick"])]),default:u(()=>[v("span",null,K(C.title),1)]),_:2},1024)):(U(),pe(F,{key:1,to:C.route,class:"nav-item-interactive",onClick:D=>m(C)},{prepend:u(()=>[v("div",NAe,[C.icon.startsWith("custom-")?(U(),pe(x,{key:1,size:"large",class:"nav-icon"},{default:u(()=>[v("img",{src:h(C.icon),alt:""},null,8,VAe)]),_:2},1024)):(U(),pe(x,{key:0,size:"large",icon:C.icon,class:"nav-icon"},null,8,["icon"]))])]),default:u(()=>[l(T,{class:"font-weight-bold nav-title"},{default:u(()=>[M(K(C.title),1)]),_:2},1024)]),_:2},1032,["to","onClick"]))],64)):ge("",!0)],64))),128))]),_:1})]),_:2},[$e(n)?{name:"prepend",fn:u(()=>[l(g,{src:$e(z_),class:"mb-2 mt-4",height:50,contain:""},null,8,["src"])]),key:"1"}:{name:"prepend",fn:u(()=>[l(g,{src:$e(z_),class:"mb-0 mt-3",height:60,contain:""},null,8,["src"])]),key:"0"}]),1032,["rail","image"])}}},HAe=Xt(OAe,[["__scopeId","data-v-d46dd683"]]),$Ae="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17,10.5V7A1,1%200%200,0%2016,6H4A1,1%200%200,0%203,7V17A1,1%200%200,0%204,18H16A1,1%200%200,0%2017,17V13.5L21,17.5V6.5L17,10.5M14,13H11V16H9V13H6V11H9V8H11V11H14V13Z'%20/%3e%3c/svg%3e",QAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M9,2A7,7%200%200,1%2016,9C16,10.57%2015.5,12%2014.61,13.19L15.41,14H16L22,20L20,22L14,16V15.41L13.19,14.61C12,15.5%2010.57,16%209,16A7,7%200%200,1%202,9A7,7%200%200,1%209,2M5,8V10H13V8H5Z'%20/%3e%3c/svg%3e",GAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M9,2A7,7%200%200,1%2016,9C16,10.57%2015.5,12%2014.61,13.19L15.41,14H16L22,20L20,22L14,16V15.41L13.19,14.61C12,15.5%2010.57,16%209,16A7,7%200%200,1%202,9A7,7%200%200,1%209,2M8,5V8H5V10H8V13H10V10H13V8H10V5H8Z'%20/%3e%3c/svg%3e",zAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M14,14H19V16H16V19H14V14M5,14H10V19H8V16H5V14M8,5H10V10H5V8H8V5M19,8V10H14V5H16V8H19Z'%20/%3e%3c/svg%3e",KAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17V19H5V14H7V17H10Z'%20/%3e%3c/svg%3e",WAe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M20%206.91L17.09%204L12%209.09L6.91%204L4%206.91L9.09%2012L4%2017.09L6.91%2020L12%2014.91L17.09%2020L20%2017.09L14.91%2012L20%206.91Z'%20/%3e%3c/svg%3e",z3="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17%207L15.59%208.41L18.17%2011H8V13H18.17L15.59%2015.58L17%2017L22%2012M4%205H12V3H4C2.9%203%202%203.9%202%205V19C2%2020.1%202.9%2021%204%2021H12V19H4V5Z'%20/%3e%3c/svg%3e";var J1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function CM(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Xx,K3;function jAe(){if(K3)return Xx;K3=1;const e=new Set(["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH"]);return Xx=t=>!e.has(t&&t.code),Xx}var qAe=jAe();const YAe=CM(qAe),Xk="axios-retry";function SM(e){const t=["ERR_CANCELED","ECONNABORTED"];return e.response||!e.code||t.includes(e.code)?!1:YAe(e)}const EM=["get","head","options"],XAe=EM.concat(["put","delete"]);function Jk(e){return e.code!=="ECONNABORTED"&&(!e.response||e.response.status===429||e.response.status>=500&&e.response.status<=599)}function JAe(e){return e.config?.method?Jk(e)&&EM.indexOf(e.config.method)!==-1:!1}function BM(e){return e.config?.method?Jk(e)&&XAe.indexOf(e.config.method)!==-1:!1}function kM(e){return SM(e)||BM(e)}function Zk(e=void 0){const t=e?.response?.headers["retry-after"];if(!t)return 0;let n=(Number(t)||0)*1e3;return n===0&&(n=(new Date(t).valueOf()||0)-Date.now()),Math.max(0,n)}function ZAe(e=0,t=void 0){return Math.max(0,Zk(t))}function efe(e=0,t=void 0,n=100){const a=2**e*n,r=Math.max(a,Zk(t)),s=r*.2*Math.random();return r+s}function tfe(e=100){return(t=0,n=void 0)=>{const a=t*e;return Math.max(a,Zk(n))}}const nfe={retries:3,retryCondition:kM,retryDelay:ZAe,shouldResetTimeout:!1,onRetry:()=>{},onMaxRetryTimesExceeded:()=>{},validateResponse:null};function afe(e,t){return{...nfe,...t,...e[Xk]}}function W3(e,t,n=!1){const a=afe(e,t||{});return a.retryCount=a.retryCount||0,(!a.lastRequestTime||n)&&(a.lastRequestTime=Date.now()),e[Xk]=a,a}function rfe(e,t){e.defaults.agent===t.agent&&delete t.agent,e.defaults.httpAgent===t.httpAgent&&delete t.httpAgent,e.defaults.httpsAgent===t.httpsAgent&&delete t.httpsAgent}async function sfe(e,t){const{retries:n,retryCondition:a}=e,r=(e.retryCount||0)<n&&a(t);if(typeof r=="object")try{return await r!==!1}catch{return!1}return r}async function ofe(e,t,n,a){t.retryCount+=1;const{retryDelay:r,shouldResetTimeout:s,onRetry:o}=t,i=r(t.retryCount,n);if(rfe(e,a),!s&&a.timeout&&t.lastRequestTime){const c=Date.now()-t.lastRequestTime,A=a.timeout-c-i;if(A<=0)return Promise.reject(n);a.timeout=A}return a.transformRequest=[c=>c],await o(t.retryCount,n,a),a.signal?.aborted?Promise.resolve(e(a)):new Promise(c=>{const A=()=>{clearTimeout(d),c(e(a))},d=setTimeout(()=>{c(e(a)),a.signal?.removeEventListener&&a.signal.removeEventListener("abort",A)},i);a.signal?.addEventListener&&a.signal.addEventListener("abort",A,{once:!0})})}async function ife(e,t){e.retryCount>=e.retries&&await e.onMaxRetryTimesExceeded(t,e.retryCount)}const Nc=(e,t)=>{const n=e.interceptors.request.use(r=>(W3(r,t,!0),r[Xk]?.validateResponse&&(r.validateStatus=()=>!1),r)),a=e.interceptors.response.use(null,async r=>{const{config:s}=r;if(!s)return Promise.reject(r);const o=W3(s,t);return r.response&&o.validateResponse?.(r.response)?r.response:await sfe(o,r)?ofe(e,o,r,s):(await ife(o,r),Promise.reject(r))});return{requestInterceptorId:n,responseInterceptorId:a}};Nc.isNetworkError=SM;Nc.isSafeRequestError=JAe;Nc.isIdempotentRequestError=BM;Nc.isNetworkOrIdempotentRequestError=kM;Nc.exponentialDelay=efe;Nc.linearDelay=tfe;Nc.isRetryableError=Jk;const TM=Ir.create({timeout:15e3,headers:{"Content-Type":"application/json"}});Nc(TM,{retries:3,retryDelay:e=>{const t=Math.pow(2,e-1)*1e3;return console.log(` Tunnel health check retry ${e}, waiting ${t}ms...`),t},retryCondition:e=>{const t=Nc.isNetworkOrIdempotentRequestError(e)||e.code==="ECONNABORTED"||e.response?.status===404||e.response?.status>=500;return t&&console.log(` Will retry due to: ${e.message||e.response?.status}`),t},onRetry:(e,t,n)=>{console.log(` Tunnel health retry attempt ${e} for ${n.url}`)}});const cd=V("checking"),wi=V("checking"),no=V("checking"),Jx=V(!1),wl=V(!1);let Dm=null,Um=null,Rm=null,PA=null,DA=null,op=null;function IM(){const{showSnackbar:e}=ra(),t=async(g=0)=>{if(!Ua())return console.log("[connectionStatus] Web mode: Skipping server health check"),cd.value="connected",!0;const w=Tr("localhost"),b=[w.health.https,w.health.http];for(const x of b)try{console.log(` Checking server: ${x}`);const T=await fetch(x,{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(5e3)});if(!T.ok)throw new Error(`HTTP ${T.status}`);const F=await T.json();if(F.success&&F.status==="ok"&&F.database==="connected")return console.log(" Server connected"),cd.value="connected",!0}catch(T){if(console.warn(`Server check failed for ${x}:`,T.message),x===b[b.length-1]&&g<3&&T.message.includes("ERR_CONNECTION_REFUSED"))return cd.value="checking",await new Promise(F=>setTimeout(F,1e3*Math.pow(2,g))),t(g+1)}return cd.value="disconnected",!1},n=async()=>{if(!Ua())return navigator.onLine?(console.log("[connectionStatus] Web mode: Internet status (navigator.onLine):",navigator.onLine),wi.value="connected",!0):(console.log("[connectionStatus] Web mode: Navigator reports offline"),wi.value="disconnected",!1);if(!navigator.onLine)return console.log(" Navigator reports offline"),wi.value="disconnected",!1;try{if((await fetch("https://www.google.com/favicon.ico",{method:"GET",cache:"no-cache",signal:AbortSignal.timeout(3e3)})).ok)return console.log(" Internet connected"),wi.value="connected",!0}catch(g){console.warn(" Internet check failed:",g.message)}return wi.value="disconnected",!1};let a=0;const r=3,s=async()=>{if(!Ua())return console.log("[connectionStatus] Web mode: Skipping remote access health check"),no.value="connected",!0;if(wl.value)return console.log(" Skipping remote check - reconnecting"),!1;const g=Tr("localhost");let w=null,b=!1;try{for(const x of[g.health.https,g.health.http])try{const T=await fetch(x,{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(3e3)});if(T.ok){const F=await T.json();w=F.ngrok?.tunnelUrl,b=F.ngrok?.isReconnecting||!1;break}}catch{}}catch{}if(!w&&op&&(w=op),b)return no.value="reconnecting",!1;if(!w)return console.log(" No tunnel URL available"),no.value="disconnected",a=0,!1;try{console.log(" Checking tunnel health:",w);const x=await TM.get(`${w}/health`);if(x.status===200&&x.data?.success)return console.log(" Remote access connected"),op=w,no.value="connected",a=0,!0;console.warn(" Tunnel health check returned unexpected response:",x.status,x.data)}catch(x){console.warn(" Tunnel health check failed after retries:",x.message)}return a++,console.log(` Health check failed (${a}/${r} failures)`),a>=r?(no.value="disconnected",wi.value==="connected"&&!wl.value&&(console.log(` ${r} consecutive failures detected, waiting 5 seconds before auto-reconnect...`),a=0,setTimeout(()=>{!wl.value&&wi.value==="connected"&&(console.log(" Starting auto-reconnect after delay..."),o())},5e3))):console.log(` Possible transient failure (${a}/${r}), will retry on next poll`),!1},o=async()=>{if(!Ua())return console.log("[connectionStatus] Web mode: Skipping auto-reconnect"),!1;if(wl.value)return console.log(" Auto-reconnect already in progress"),!1;if(wi.value!=="connected")return console.log(" No internet - cannot auto-reconnect"),!1;wl.value=!0,no.value="reconnecting",console.log(" Auto-reconnecting...");try{const g=Tr("localhost"),w=g.api?.https||`https://localhost:${g.ports?.https||3443}/api`,b=await fetch(`${w}/ngrok/reconnect`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({}),signal:AbortSignal.timeout(5e4)}),x=await b.json();return b.ok&&x.success?(console.log(" Auto-reconnect successful:",x.data?.ngrokTunnelUrl),op=x.data?.ngrokTunnelUrl,no.value="connected",!0):(console.warn(" Auto-reconnect failed:",x.userMessage||x.error),no.value="disconnected",e({message:x.userMessage||x.error||"Auto-reconnection failed",color:"error",timeout:8e3}),!1)}catch(g){return console.error(" Auto-reconnect error:",g.message),no.value="disconnected",e({message:"Auto-reconnection failed. Please try manually.",color:"error",timeout:6e3}),!1}finally{wl.value=!1}},i=async()=>{if(!Ua())return console.log("[connectionStatus] Web mode: Skipping manual reconnect"),{success:!1,userMessage:"Reconnection not available in web mode"};if(wl.value)return{success:!1,userMessage:"Reconnection already in progress"};wl.value=!0,no.value="reconnecting",console.log(" Manual reconnect started");try{const g=Tr("localhost"),w=g.api?.https||`https://localhost:${g.ports?.https||3443}/api`,b=await fetch(`${w}/ngrok/reconnect`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({}),signal:AbortSignal.timeout(5e4)}),x=await b.json();return b.ok&&x.success?(console.log(" Manual reconnect successful:",x.data?.ngrokTunnelUrl),op=x.data?.ngrokTunnelUrl,no.value="connected",{success:!0,tunnelUrl:x.data?.ngrokTunnelUrl,userMessage:x.message}):(console.warn(" Manual reconnect failed:",x.userMessage||x.error),no.value="disconnected",{success:!1,error:x.error,userMessage:x.userMessage||"Reconnection failed"})}catch(g){return console.error(" Manual reconnect error:",g.message),no.value="disconnected",{success:!1,error:g.message,userMessage:"Connection error. Please try again."}}finally{wl.value=!1}},c=()=>{Dm&&clearInterval(Dm),n(),PA&&window.removeEventListener("online",PA),DA&&window.removeEventListener("offline",DA),PA=()=>{console.log(" Online event"),n()},DA=()=>{console.log(" Offline event"),wi.value="disconnected"},window.addEventListener("online",PA),window.addEventListener("offline",DA),Dm=setInterval(()=>{navigator.onLine&&wi.value==="disconnected"&&n()},3e4)},A=()=>{Dm&&(clearInterval(Dm),Dm=null),PA&&(window.removeEventListener("online",PA),PA=null),DA&&(window.removeEventListener("offline",DA),DA=null)},d=()=>{if(!Ua()){console.log("[connectionStatus] Web mode: Skipping server monitoring"),cd.value="connected";return}Um&&clearInterval(Um),t(),Um=setInterval(()=>{t()},3e4)};return{serverStatus:cd,internetStatus:wi,remoteAccessStatus:no,isChecking:Jx,isReconnecting:wl,checkAllConnections:async()=>(Jx.value=!0,cd.value="checking",wi.value="checking",d(),c(),Jx.value=!1,{server:cd.value==="connected",internet:wi.value==="connected"}),checkServerConnection:t,checkInternetConnection:n,checkRemoteAccessStatus:s,startInternetMonitoring:c,stopInternetMonitoring:A,startServerMonitoring:d,stopServerMonitoring:()=>{Um&&(clearInterval(Um),Um=null)},startRemoteAccessMonitoring:()=>{if(!Ua()){console.log("[connectionStatus] Web mode: Skipping remote access monitoring"),no.value="connected";return}Rm&&clearTimeout(Rm),no.value="checking",s();const g=()=>{const w=wl.value?5e3:15e3;Rm=setTimeout(async()=>{await s(),g()},w)};g()},stopRemoteAccessMonitoring:()=>{Rm&&(clearTimeout(Rm),Rm=null)},attemptAutoReconnect:o,manualReconnect:i,getNetworkDetails:()=>{try{return{platform:window.process?.type==="renderer"?"electron":"browser",navigator_online:navigator.onLine,connection_type:navigator.connection?.effectiveType||"unknown",user_agent:navigator.userAgent}}catch(g){return{error:g.message}}}}}const lfe={class:"d-flex align-center gap-2"},ufe={class:"chip-text"},cfe={class:"chip-text"},dfe={class:"chip-text"},Afe={__name:"SelectorExtension",setup(e){const t=Rn(),n=ae(()=>t.state.doctorModule.doctors),a=ae(()=>t.state.clinicModule.clinics),r=ae(()=>t.state.pharmacyModule.pharmacies),s=V(null),o=V(null),i=V(null),c=async()=>{await t.dispatch("doctorModule/fetchDoctors"),s.value=n.value.find(p=>p.id===t.state.doctorModule.doctorId)||null},A=async()=>{await t.dispatch("clinicModule/fetchClinics"),o.value=a.value.find(p=>p.id===t.state.clinicModule.clinicId)||null},d=async()=>{await t.dispatch("pharmacyModule/fetchPharmacies"),i.value=r.value.find(p=>p.id===t.state.pharmacyModule.pharmacyId)||null};tu(async()=>{t.state.pharmacyModule.initialized||await t.dispatch("pharmacyModule/initializePharmacies"),await c(),await A(),await d()}),un(()=>{window.addEventListener("doctor-list-updated",c),window.addEventListener("clinic-list-updated",A),window.addEventListener("pharmacy-list-updated",d)}),Ui(()=>{window.removeEventListener("doctor-list-updated",c),window.removeEventListener("clinic-list-updated",A),window.removeEventListener("pharmacy-list-updated",d)});const f=p=>{s.value=p,t.commit("doctorModule/setDoctorId",p.id),console.log("Selected doctor:",p.doctorName),window.dispatchEvent(new CustomEvent("doctor-selection-changed",{detail:{doctorId:p.id,doctorName:p.doctorName}}))},m=p=>{o.value=p,t.commit("clinicModule/setClinicId",p.id),console.log("Selected clinic:",p.clinicName),window.dispatchEvent(new CustomEvent("clinic-selection-changed",{detail:{clinicId:p.id,clinicName:p.clinicName}}))},h=p=>{i.value=p,t.commit("pharmacyModule/setPharmacyId",p.id),console.log("Selected pharmacy:",p.pharmacyName),window.dispatchEvent(new CustomEvent("pharmacy-selection-changed",{detail:{pharmacyId:p.id,pharmacyName:p.pharmacyName}}))};return Ke(()=>t.state.doctorModule.doctorId,p=>{s.value=n.value.find(y=>y.id===p)||null}),Ke(()=>t.state.clinicModule.clinicId,p=>{o.value=a.value.find(y=>y.id===p)||null}),Ke(()=>t.state.pharmacyModule.pharmacyId,p=>{i.value=r.value.find(y=>y.id===p)||null}),Ke(n,p=>{p&&p.length>0&&(s.value=p.find(y=>y.id===t.state.doctorModule.doctorId)||null)},{deep:!0}),Ke(a,p=>{p&&p.length>0&&(o.value=p.find(y=>y.id===t.state.clinicModule.clinicId)||null)},{deep:!0}),Ke(r,p=>{p&&p.length>0&&(i.value=p.find(y=>y.id===t.state.pharmacyModule.pharmacyId)||null)},{deep:!0}),(p,y)=>{const g=I("v-icon"),w=I("v-chip"),b=I("v-list-item-title"),x=I("v-list-item-subtitle"),T=I("v-list-item"),F=I("v-list"),k=I("v-menu");return U(),me("div",lfe,[l(k,{"offset-y":""},{activator:u(({props:S})=>[l(w,Ue(S,{variant:"outlined",size:"small",class:"selector-chip doctor-chip","prepend-icon":"mdi-stethoscope",color:s.value?"primary":"surface"}),{append:u(()=>[l(g,{size:"small"},{default:u(()=>[...y[0]||(y[0]=[M("mdi-chevron-down",-1)])]),_:1})]),default:u(()=>[v("span",ufe,K(s.value?s.value.doctorName:"Select Doctor"),1)]),_:1},16,["color"])]),default:u(()=>[l(F,{density:"compact","max-width":"300"},{default:u(()=>[(U(!0),me(We,null,qt(n.value,S=>(U(),pe(T,{key:S.id,onClick:E=>f(S),class:ct({"bg-primary":s.value&&S.id===s.value.id})},{prepend:u(()=>[l(g,{size:"small"},{default:u(()=>[...y[1]||(y[1]=[M("mdi-stethoscope",-1)])]),_:1})]),default:u(()=>[l(b,null,{default:u(()=>[M(K(S.doctorName),1)]),_:2},1024),l(x,null,{default:u(()=>[M(K(S.doctorSpecialization),1)]),_:2},1024)]),_:2},1032,["onClick","class"]))),128))]),_:1})]),_:1}),l(k,{"offset-y":""},{activator:u(({props:S})=>[l(w,Ue(S,{variant:"outlined",size:"small",class:"selector-chip clinic-chip","prepend-icon":"mdi-hospital-marker",color:o.value?"primary":"surface"}),{append:u(()=>[l(g,{size:"small"},{default:u(()=>[...y[2]||(y[2]=[M("mdi-chevron-down",-1)])]),_:1})]),default:u(()=>[v("span",cfe,K(o.value?o.value.clinicName:"Select Clinic"),1)]),_:1},16,["color"])]),default:u(()=>[l(F,{density:"compact","max-width":"300"},{default:u(()=>[(U(!0),me(We,null,qt(a.value,S=>(U(),pe(T,{key:S.id,onClick:E=>m(S),class:ct({"bg-primary":o.value&&S.id===o.value.id})},{prepend:u(()=>[l(g,{size:"small"},{default:u(()=>[...y[3]||(y[3]=[M("mdi-hospital-marker",-1)])]),_:1})]),default:u(()=>[l(b,null,{default:u(()=>[M(K(S.clinicName),1)]),_:2},1024),l(x,null,{default:u(()=>[M(K(S.clinicAddress),1)]),_:2},1024)]),_:2},1032,["onClick","class"]))),128))]),_:1})]),_:1}),l(k,{"offset-y":""},{activator:u(({props:S})=>[l(w,Ue(S,{variant:"outlined",size:"small",class:"selector-chip pharmacy-chip","prepend-icon":"mdi-pill",color:i.value?"primary":"surface"}),{append:u(()=>[l(g,{size:"small"},{default:u(()=>[...y[4]||(y[4]=[M("mdi-chevron-down",-1)])]),_:1})]),default:u(()=>[v("span",dfe,K(i.value?i.value.pharmacyName:"Select Pharmacy"),1)]),_:1},16,["color"])]),default:u(()=>[l(F,{density:"compact","max-width":"300"},{default:u(()=>[(U(!0),me(We,null,qt(r.value,S=>(U(),pe(T,{key:S.id,onClick:E=>h(S),class:ct({"bg-primary":i.value&&S.id===i.value.id})},{prepend:u(()=>[l(g,{size:"small"},{default:u(()=>[...y[5]||(y[5]=[M("mdi-pill",-1)])]),_:1})]),default:u(()=>[l(b,null,{default:u(()=>[M(K(S.pharmacyName),1)]),_:2},1024),S.gstNumber?(U(),pe(x,{key:0},{default:u(()=>[M(K(S.gstNumber),1)]),_:2},1024)):ge("",!0)]),_:2},1032,["onClick","class"]))),128))]),_:1})]),_:1})])}}},ffe=Xt(Afe,[["__scopeId","data-v-dc36361c"]]),mfe={class:"d-flex align-center"},vfe={__name:"ConnectionStatusIndicator",setup(e){const{serverStatus:t,internetStatus:n,remoteAccessStatus:a,checkAllConnections:r,stopInternetMonitoring:s,startRemoteAccessMonitoring:o,stopRemoteAccessMonitoring:i,getNetworkDetails:c}=IM(),A=V(null),d=ae(()=>({"status-icon--checking":t.value==="checking","status-icon--connected":t.value==="connected","status-icon--disconnected":t.value==="disconnected"})),f=ae(()=>{switch(t.value){case"checking":return"Checking database connection...";case"connected":return"Database connected ";case"disconnected":return"Database disconnected ";default:return"Database status unknown"}}),m=ae(()=>({"status-icon--checking":n.value==="checking","status-icon--connected":n.value==="connected","status-icon--disconnected":n.value==="disconnected"})),h=ae(()=>{switch(n.value){case"checking":return"Checking internet...";case"connected":return"Internet connected ";case"disconnected":return"No internet ";default:return"Internet status unknown"}}),p=ae(()=>({"status-icon--checking":a.value==="checking","status-icon--connected":a.value==="connected","status-icon--disconnected":a.value==="disconnected","status-icon--reconnecting":a.value==="reconnecting","status-icon--error":a.value==="error"})),y=ae(()=>{switch(a.value){case"checking":return"Checking Remote Access Link status...";case"connected":return"Remote Access Link Operational ";case"disconnected":return"Remote Access Link Unavailable ";case"reconnecting":return"Reconnecting...";case"error":return"Remote Access Link Error - Click Reconnect ";default:return"Remote Access Link status unknown"}});return un(()=>{A.value=c(),console.log("Network details:",A.value),r(),o()}),da(()=>{s(),i()}),(g,w)=>{const b=I("v-icon"),x=I("v-tooltip");return U(),me("div",mfe,[l(x,{text:f.value,location:"bottom"},{activator:u(({props:T})=>[v("div",Ue({class:"mr-3"},T),[l(b,{size:"20",class:ct(d.value)},{default:u(()=>[...w[0]||(w[0]=[M("mdi-database",-1)])]),_:1},8,["class"])],16)]),_:1},8,["text"]),l(x,{text:h.value,location:"bottom"},{activator:u(({props:T})=>[v("div",Ue({class:"mr-3"},T),[l(b,{size:"20",class:ct(m.value)},{default:u(()=>[...w[1]||(w[1]=[M("mdi-wifi",-1)])]),_:1},8,["class"])],16)]),_:1},8,["text"]),l(x,{text:y.value,location:"bottom"},{activator:u(({props:T})=>[v("div",eu(nu(T)),[l(b,{size:"20",class:ct(p.value)},{default:u(()=>[...w[2]||(w[2]=[M("mdi-link-variant",-1)])]),_:1},8,["class"])],16)]),_:1},8,["text"])])}}},hfe=Xt(vfe,[["__scopeId","data-v-a12df52e"]]),pfe=async(e,t="both",n=null)=>{try{const a={type:t};n&&(a.doctorId=n);const r=await dt.get(`/upload/patient/${e}/images`,{params:a});if(r.data.success)return{success:!0,data:r.data.data,message:r.data.message};throw new Error(r.data.error||"Failed to fetch patient images")}catch(a){return console.error("Patient images fetch error:",a),{success:!1,error:a.response?.data?.error||a.message||"Failed to fetch patient images"}}},gfe=async(e,t=null)=>{try{const n={};t&&(n.doctorId=t);const a=await dt.get(`/upload/patient/${e}/all`,{params:n});if(a.data.success)return{success:!0,data:a.data.data,message:a.data.message};throw new Error(a.data.error||"Failed to fetch patient uploads")}catch(n){return console.error("Patient uploads fetch error:",n),{success:!1,error:n.response?.data?.error||n.message||"Failed to fetch patient uploads"}}},j3=async(e,t)=>{try{const n=await dt.post("/upload/upload-pdf",{pdfBase64:e,filename:t});if(n.data.success)return{success:!0,data:n.data.data,message:n.data.message};throw new Error(n.data.error||"Upload failed")}catch(n){return console.error("PDF upload error:",n),{success:!1,error:n.response?.data?.error||n.message||"Failed to upload PDF"}}},yfe=async()=>{try{const e=await dt.get("/print/qr");if(e.data.success)return{success:!0,data:e.data.data,message:e.data.message};throw new Error(e.data.error||"Failed to fetch QR code data")}catch(e){return console.error("QR code data fetch error:",e),{success:!1,error:e.response?.data?.error||e.message||"Failed to fetch QR code data"}}},_fe=async()=>{try{const e=await dt.post("/ngrok/regenerate");if(e.data.success)return{success:!0,data:e.data.data,message:e.data.message||"Ngrok tunnel regenerated successfully"};throw new Error(e.data.error||"Failed to regenerate ngrok tunnel")}catch(e){return console.error("Ngrok tunnel regeneration error:",e),{success:!1,error:e.response?.data?.error||e.message||"Failed to regenerate ngrok tunnel"}}},wfe=async e=>{try{const t=await dt.delete(`/upload/${e}`);if(t.data.success)return{success:!0,message:t.data.message||"Upload deleted successfully"};throw new Error(t.data.error||"Failed to delete upload")}catch(t){return console.error("Upload delete error:",t),{success:!1,error:t.response?.data?.error||t.message||"Failed to delete upload"}}},bfe=async(e,t)=>{console.log(" [UploadUtils] Starting support logs upload..."),console.log(` [UploadUtils] Filename: ${t}`),console.log(` [UploadUtils] Base64 data length: ${e.length} characters`),console.log(` [UploadUtils] Estimated file size: ${Math.round(e.length*.75/1024)} KB`);try{console.log(" [UploadUtils] Calling API: POST /upload/support-logs-upload");const n=await dt.post("/upload/support-logs-upload",{logsBase64:e,filename:t});if(console.log(" [UploadUtils] API response received:",{status:n.status,success:n.data.success,hasFileUrl:!!n.data.data?.file_url}),n.data.success)return console.log(" [UploadUtils] Upload successful!"),console.log(` [UploadUtils] File URL: ${n.data.data.file_url}`),{success:!0,data:n.data.data,message:n.data.message};throw console.error(" [UploadUtils] Upload failed:",n.data.error),new Error(n.data.error||"Upload failed")}catch(n){return console.error(" [UploadUtils] Support logs upload error:",n),console.error(" [UploadUtils] Error details:",{message:n.message,status:n.response?.status,statusText:n.response?.statusText,responseData:n.response?.data}),{success:!1,error:n.response?.data?.error||n.message||"Failed to upload support logs"}}},xfe={key:0,class:"mb-4"},Cfe={class:"text-caption text-center mt-2 text-medium-emphasis"},Sfe={__name:"support-dialog",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,a=t,r=ae({get:()=>n.modelValue,set:b=>a("update:modelValue",b)}),s=V(null),o=V(!1),i=V(""),c=V(""),A=V(!1),d=V(0),f=V(""),m=V(""),h={required:b=>!!b?.trim()||"This field is required",maxLength50:b=>!b||b.length<=50||"Maximum 50 characters allowed",maxLength1000:b=>!b||b.length<=1e3||"Maximum 1000 characters allowed"};Ke(r,b=>{b&&p()});const p=()=>{i.value="",c.value="",d.value=0,f.value="",m.value="",A.value=!1,s.value&&s.value.resetValidation()},y=()=>{A.value||(r.value=!1)},g=async()=>{console.log(" [Support] Submit support request initiated");const{valid:b}=await s.value.validate();if(!b){console.warn(" [Support] Form validation failed");return}console.log(" [Support] Form validated successfully"),console.log(" [Support] Error Title:",i.value),console.log(" [Support] Description length:",c.value.length,"characters"),A.value=!0,m.value="";try{console.log(" [Support] Step 1: Collecting application logs..."),d.value=20,f.value="Collecting application logs...";let x="",T=!1;try{if(window.require){console.log(" [Support] Electron IPC available, invoking get-support-logs...");const{ipcRenderer:k}=window.require("electron"),S=await k.invoke("get-support-logs");console.log(" [Support] IPC response received:",{success:S.success,fileCount:S.fileCount,compressedSize:S.compressedSize,dataLength:S.data?.length||0,error:S.error}),S.success&&S.data?(x=S.data,T=!0,console.log(" [Support] Logs collected successfully"),console.log(` [Support] Files: ${S.fileCount}, Size: ${Math.round(S.compressedSize/1024)} KB`)):console.warn(" [Support] Could not collect logs:",S.error)}else console.warn(" [Support] Electron IPC not available (running in browser?)")}catch(k){console.error(" [Support] Failed to collect logs:",k)}let F="";if(T&&x){console.log(" [Support] Step 2: Uploading support package..."),d.value=50,f.value="Uploading support package...";const S=`evamed-support-logs-${new Date().toISOString().replace(/[:.]/g,"-")}.zip`;console.log(` [Support] Filename: ${S}`),console.log(` [Support] Base64 data length: ${x.length} characters`);const E=await bfe(x,S);console.log(" [Support] Upload response:",{success:E.success,fileUrl:E.data?.file_url,error:E.error}),E.success?(F=E.data.file_url,console.log(" [Support] Logs uploaded successfully:",F)):console.warn(" [Support] Failed to upload logs:",E.error)}else console.log(" [Support] Skipping upload (no logs available)");console.log(" [Support] Step 3: Opening email client..."),d.value=80,f.value="Opening email client...",await w(F),console.log(" [Support] Step 4: Support request completed successfully"),d.value=100,f.value="Email client opened successfully!",setTimeout(()=>{console.log(" [Support] Closing dialog"),y()},1e3)}catch(x){console.error(" [Support] Support submission error:",x),console.error(" [Support] Error stack:",x.stack),m.value=x.message||"Failed to submit support request. Please try again."}finally{A.value=!1}},w=async b=>{console.log(" [Support] Building email content...");const x=xM.version,T=new Date().toISOString(),F=new Date().toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),k=`[EVAMED Support] ${i.value.trim()} - ${F}`;console.log(" [Support] Email subject:",k);let S=`Support Request from EVAMED Desktop Application

Error Title: ${i.value.trim()}

Description:
${c.value.trim()}

---`;b?(console.log(" [Support] Including support package URL in email"),S+=`
Support Package: ${b}
(Log files attached - available for 24 hours)
`):(console.log(" [Support] No support package URL available"),S+=`
Note: Log files could not be attached automatically.
`),S+=`
App Version: ${x}
Timestamp: ${T}

---
This support request was generated automatically by the EVAMED Desktop Application.`;const E=`mailto:support@evamed.in?subject=${encodeURIComponent(k)}&body=${encodeURIComponent(S)}`;console.log(" [Support] Mailto URL length:",E.length,"characters");try{if(window.require){console.log(" [Support] Using Electron IPC to open email client...");const{ipcRenderer:C}=window.require("electron"),D=await C.invoke("open-external",E);D.success?console.log(" [Support] Successfully opened email client via IPC"):(console.error(" [Support] Failed to open email client via IPC:",D.error),console.log(" [Support] Falling back to window.open..."),window.open(E,"_blank","noopener,noreferrer"))}else console.log(" [Support] Using window.open (no Electron IPC)..."),window.open(E,"_blank","noopener,noreferrer")}catch(C){console.error(" [Support] Failed to use Electron IPC:",C),console.log(" [Support] Falling back to window.open..."),window.open(E,"_blank","noopener,noreferrer")}};return(b,x)=>{const T=I("v-icon"),F=I("v-card-title"),k=I("v-col"),S=I("v-btn"),E=I("v-row"),C=I("v-card"),D=I("v-text-field"),P=I("v-textarea"),O=I("v-alert"),H=I("v-progress-linear"),ie=I("v-expand-transition"),Ae=I("v-form"),j=I("v-card-text"),J=I("v-divider"),ue=I("v-spacer"),ne=I("v-card-actions"),Y=I("v-dialog");return U(),pe(Y,{modelValue:r.value,"onUpdate:modelValue":x[4]||(x[4]=te=>r.value=te),"max-width":"600",persistent:""},{default:u(()=>[l(C,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[l(C,{rounded:"0",class:"pa-3",color:"surfaceContainerHigh"},{default:u(()=>[l(E,{"no-gutters":"",align:"center"},{default:u(()=>[l(k,{cols:"10"},{default:u(()=>[l(F,{class:"pa-0 d-flex align-center"},{default:u(()=>[l(T,{class:"mr-2",color:"primary"},{default:u(()=>[...x[5]||(x[5]=[M("mdi-headset",-1)])]),_:1}),x[6]||(x[6]=M(" Contact Support ",-1))]),_:1})]),_:1}),l(k,{cols:"2",class:"d-flex justify-end"},{default:u(()=>[l(S,{icon:"",size:"small",onClick:y,disabled:A.value,variant:"text"},{default:u(()=>[l(T,null,{default:u(()=>[...x[7]||(x[7]=[M("mdi-close",-1)])]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),l(j,{class:"pa-4"},{default:u(()=>[l(Ae,{ref_key:"formRef",ref:s,modelValue:o.value,"onUpdate:modelValue":x[3]||(x[3]=te=>o.value=te),onSubmit:pn(g,["prevent"])},{default:u(()=>[l(D,{modelValue:i.value,"onUpdate:modelValue":x[0]||(x[0]=te=>i.value=te),label:"Error Title",placeholder:"Brief description of the issue",variant:"outlined",density:"comfortable",rules:[h.required,h.maxLength50],disabled:A.value,counter:"50",maxlength:"50",class:"mb-3"},{"prepend-inner":u(()=>[l(T,{size:"small",color:"error"},{default:u(()=>[...x[8]||(x[8]=[M("mdi-alert-circle-outline",-1)])]),_:1})]),_:1},8,["modelValue","rules","disabled"]),l(P,{modelValue:c.value,"onUpdate:modelValue":x[1]||(x[1]=te=>c.value=te),label:"Issue Description",placeholder:"Please describe the issue you are facing in detail. Include any steps to reproduce the problem.",variant:"outlined",density:"comfortable",rules:[h.required,h.maxLength1000],disabled:A.value,counter:"1000",maxlength:"1000",rows:"6","auto-grow":"",class:"mb-3"},{"prepend-inner":u(()=>[l(T,{size:"small",color:"info"},{default:u(()=>[...x[9]||(x[9]=[M("mdi-text-box-outline",-1)])]),_:1})]),_:1},8,["modelValue","rules","disabled"]),l(O,{type:"info",variant:"tonal",density:"compact",class:"mb-4"},{prepend:u(()=>[l(T,{size:"small"},{default:u(()=>[...x[10]||(x[10]=[M("mdi-information-outline",-1)])]),_:1})]),default:u(()=>[x[11]||(x[11]=v("span",{class:"text-caption"}," Application logs will be automatically attached to help our support team diagnose the issue. ",-1))]),_:1}),l(ie,null,{default:u(()=>[A.value?(U(),me("div",xfe,[l(H,{"model-value":d.value,color:"primary",height:"6",rounded:""},null,8,["model-value"]),v("p",Cfe,K(f.value),1)])):ge("",!0)]),_:1}),m.value?(U(),pe(O,{key:0,type:"error",variant:"tonal",density:"compact",class:"mb-4",closable:"","onClick:close":x[2]||(x[2]=te=>m.value="")},{default:u(()=>[M(K(m.value),1)]),_:1})):ge("",!0)]),_:1},8,["modelValue"])]),_:1}),l(J),l(ne,{class:"pa-4"},{default:u(()=>[l(ue),l(S,{variant:"outlined",onClick:y,disabled:A.value,class:"mr-2"},{default:u(()=>[...x[12]||(x[12]=[M(" Cancel ",-1)])]),_:1},8,["disabled"]),l(S,{variant:"elevated",color:"primary",onClick:g,loading:A.value,disabled:!o.value||A.value},{default:u(()=>[l(T,{start:""},{default:u(()=>[...x[13]||(x[13]=[M("mdi-send",-1)])]),_:1}),x[14]||(x[14]=M(" Submit Support Request ",-1))]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Efe=Xt(Sfe,[["__scopeId","data-v-4d5ca3d9"]]),Bfe={class:"d-flex align-center user-section"},kfe={class:"mx-3"},Tfe={class:"d-flex align-center mx-3"},Ife={key:1,class:"d-flex align-center mx-3"},Ffe={key:3,class:"mx-3 window-controls-container d-flex align-center pa-2"},Pfe={key:0,src:zAe,alt:"Exit Fullscreen"},Dfe={key:1,src:KAe,alt:"Enter Fullscreen"},Ufe={key:0,class:"extension-content"},Rfe={class:"d-flex align-center justify-center pa-2"},Nfe={__name:"app-bar",setup(e){const t=Rn(),n=Al(),{showSuccess:a,showError:r,showSnackbar:s,showInfo:o}=ra(),i=KD()?Kf():null,{remoteAccessStatus:c,isReconnecting:A,manualReconnect:d}=IM(),f=V(null),m=V(!1),h=V(!1),p=V(!1),y=V(!1),g=V(0),w=V(!1),b=V(!1),x=ae(()=>A.value?!1:c.value==="disconnected"||c.value==="error"),T=async()=>{if(A.value){console.log(" Manual reconnect blocked - auto-reconnect in progress"),o("Auto-reconnection is already in progress. Please wait...");return}if(b.value){console.log("Reconnect already in progress");return}b.value=!0,console.log(" Manual reconnect initiated from app bar");try{const Te=await d();if(Te.success)a(Te.userMessage||"Link reconnected successfully"),console.log(" Manual reconnect successful:",Te.tunnelUrl);else{const Me=Te.userMessage||Te.error||"Failed to reconnect";s({message:Me,color:"error",timeout:8e3}),console.warn(" Manual reconnect failed:",{error:Te.error,userMessage:Te.userMessage})}}catch(Te){console.error(" Manual reconnect error:",Te),r("Connection error. Please try again.")}finally{b.value=!1}},F=V(0),k=V(100),S=V(!0),E=V(0),C=V(-1),D=V(1),P=ae(()=>p.value||F.value>=D.value),O=ae(()=>p.value||F.value<=C.value),H=V(!1),ie=V(""),Ae=V("info"),j=V(4e3),J=V(""),ue=V(navigator.onLine),ne=(Te,Me="Unknown")=>{console.error(`App Bar Error (${Me}):`,Te),Te?.code==="NETWORK_ERROR"||Te?.response?.status>=500||!Te?.response?f.value=`${Me} error. Please refresh the page or contact support.`:(H.value=!0,ie.value=`${Me}: ${Te?.message||"Unknown error occurred"}`,Ae.value="warning")},Y=ae(()=>{try{return t.getters["appBar/extensionContent"]}catch(Te){return ne(Te,"Extension content loading"),null}}),te=ae(()=>{if(!Y.value)return null;try{if(typeof Y.value!="object")throw new Error("Invalid extension content format");return Y.value.component?{component:Y.value.component,props:Y.value.props||{}}:(console.warn("Extension content missing component"),null)}catch(Te){return ne(Te,"Extension validation"),null}}),L=async()=>{try{const Te=await Jr(()=>import("./app_bar-DVGh_H18.js"),[],import.meta.url);J.value=Te.default||Te}catch{console.warn("App bar image not found, using fallback"),J.value=""}},N=()=>{console.log("Video button clicked - navigating to Appointments/Teleconsult");try{const Te=n.currentRoute.value;Te.name==="HomePage"||Te.path==="/"?(n.replace({name:"HomePage",params:{tab:"1"}}),a("Navigated to Teleconsultations")):(n.push({name:"HomePage",params:{tab:"1"}}),a("Navigated to Teleconsultations"))}catch(Te){console.error("Error navigating to video section:",Te),ne(Te,"Navigation failed")}},q=()=>{console.log("Testing welcome dialog - navigating to /welcome"),n.push("/welcome")},Q=async()=>{if(m.value){console.warn("Logout already in progress");return}try{m.value=!0,console.log("Starting logout process...");const Te=t.dispatch("auth/signOut"),Me=new Promise((et,lt)=>setTimeout(()=>lt(new Error("Logout timeout")),1e4));await Promise.race([Te,Me]),console.log("Logout successful"),a("Logged out successfully"),setTimeout(()=>{n.push("/login")},1e3)}catch(Te){console.error("Logout failed:",Te),ne(Te,"Logout failed"),(Te.message==="Logout timeout"||Te?.response?.status>=500)&&(console.warn("Force redirecting due to logout failure"),n.push("/login"))}finally{m.value=!1}},ee=async()=>{try{console.log("Web mode logout - clearing session..."),i?await i.logout():(localStorage.removeItem("sessionToken"),localStorage.removeItem("permissions"),localStorage.removeItem("isAdmin"),localStorage.removeItem("userName"),localStorage.removeItem("userId"),localStorage.removeItem("features")),console.log("Web mode logout - session cleared, refreshing page"),window.location.reload()}catch(Te){console.error("Web mode logout error:",Te),localStorage.removeItem("sessionToken"),localStorage.removeItem("permissions"),localStorage.removeItem("isAdmin"),localStorage.removeItem("userName"),localStorage.removeItem("userId"),localStorage.removeItem("features"),window.location.reload()}},z=async()=>{if(!y.value)try{if(y.value=!0,H.value=!0,ie.value="Checking for updates...",Ae.value="info",j.value=5e3,window.require){const{ipcRenderer:Te}=window.require("electron"),Me=(Le,nt)=>{console.log(" App-bar received update-available event:",nt),ie.value=`Update available: v${nt.version}`,Ae.value="info",y.value=!1,Te.removeListener("update-available",Me),Te.removeListener("update-not-available",et),Te.removeListener("update-error",lt)},et=(Le,nt)=>{console.log(" App-bar received update-not-available event:",nt),ie.value="Already up to date",Ae.value="success",y.value=!1,Te.removeListener("update-available",Me),Te.removeListener("update-not-available",et),Te.removeListener("update-error",lt)},lt=(Le,nt)=>{console.log(" App-bar received update-error event:",nt),ie.value="Failed to check for updates",Ae.value="error",y.value=!1,Te.removeListener("update-available",Me),Te.removeListener("update-not-available",et),Te.removeListener("update-error",lt)};Te.on("update-available",Me),Te.on("update-not-available",et),Te.on("update-error",lt),console.log(" App-bar initiating update check via IPC...");const Re=await Te.invoke("check-for-updates");console.log(" App-bar received IPC result:",Re),setTimeout(()=>{y.value&&(ie.value="Update check timed out",Ae.value="warning",y.value=!1,Te.removeListener("update-available",Me),Te.removeListener("update-not-available",et),Te.removeListener("update-error",lt))},3e4)}else ie.value="Update check not available",Ae.value="warning",y.value=!1}catch(Te){console.error("Update check failed:",Te),ie.value="Failed to check for updates",Ae.value="error",y.value=!1}},X=async()=>{if(!p.value)try{if(p.value=!0,window.require){const{ipcRenderer:Te}=window.require("electron"),Me=await Te.invoke("toggle-fullscreen");if(Me.success){S.value=Me.isFullscreen;const et=Me.isFullscreen?"Entered fullscreen mode":"Exited fullscreen mode";a(et),console.log(`Fullscreen toggled: ${Me.wasFullscreen}  ${Me.isFullscreen}`),Me.isFullscreen||setTimeout(()=>{a("You can now minimize using the window controls")},2e3)}else throw new Error(Me.error||"Failed to toggle fullscreen")}else throw new Error("Electron IPC not available")}catch(Te){console.error("Failed to toggle fullscreen:",Te),ne(Te,"Fullscreen toggle failed")}finally{p.value=!1}},le=async()=>{if(!p.value)try{if(p.value=!0,window.require){const{ipcRenderer:Te}=window.require("electron"),Me=await Te.invoke("window-close");if(Me.success)console.log("Window close initiated");else throw new Error(Me.error||"Failed to close window")}else throw new Error("Electron IPC not available")}catch(Te){console.error("Failed to close window:",Te),ne(Te,"Close failed")}finally{p.value=!1}},re=async()=>{if(!(p.value||F.value>=D.value))try{if(p.value=!0,window.require){const{ipcRenderer:Te}=window.require("electron"),Me=await Te.invoke("zoom-in");if(Me.success)F.value=Me.zoomLevel,k.value=Me.zoomFactor,a(`Zoomed in to ${Me.zoomFactor}%`),console.log(`Zoom in successful: ${Me.zoomFactor}%`);else throw new Error(Me.error||"Failed to zoom in")}else throw new Error("Electron IPC not available")}catch(Te){console.error("Failed to zoom in:",Te),ne(Te,"Zoom in failed")}finally{p.value=!1}},de=async()=>{if(!(p.value||F.value<=C.value))try{if(p.value=!0,window.require){const{ipcRenderer:Te}=window.require("electron"),Me=await Te.invoke("zoom-out");if(Me.success)F.value=Me.zoomLevel,k.value=Me.zoomFactor,a(`Zoomed out to ${Me.zoomFactor}%`),console.log(`Zoom out successful: ${Me.zoomFactor}%`);else throw new Error(Me.error||"Failed to zoom out")}else throw new Error("Electron IPC not available")}catch(Te){console.error("Failed to zoom out:",Te),ne(Te,"Zoom out failed")}finally{p.value=!1}},G=async()=>{try{if(window.require){const{ipcRenderer:Te}=window.require("electron"),Me=await Te.invoke("get-zoom-level");Me.success&&(F.value=Me.zoomLevel,k.value=Me.zoomFactor,E.value=Me.zoomLevel,C.value=E.value-1,D.value=E.value+1,console.log(`Initial zoom state: level ${Me.zoomLevel} (${Me.zoomFactor}%)`),console.log(`Zoom limits: ${C.value} to ${D.value}`));const et=await Te.invoke("get-fullscreen-status");et.success&&(S.value=et.isFullscreen)}}catch(Te){console.warn("Failed to get initial window state:",Te)}},Z=()=>{ue.value=!0,f.value?.includes("network")&&(f.value=null,a("Connection restored"))},ce=()=>{ue.value=!1,H.value=!0,ie.value="You are currently offline. Some features may not work.",Ae.value="warning",j.value=0},Se=Te=>{_e(Te,"selector"),setTimeout(()=>{Ce.value.has("selector")&&(console.log("Auto-retrying selector component..."),De("selector"))},3e3)},Pe=Te=>{_e(Te,"extension")},ye=Te=>{console.warn("Logout icon failed to load:",Te)},Ce=V(new Set),_e=(Te,Me)=>{console.error(`Child component error in ${Me}:`,Te),Ce.value.add(Me),Ce.value.size>2?f.value="Multiple component failures detected. Please refresh the page.":ne(Te,Me)},De=Te=>{Ce.value.delete(Te),g.value+=1},xe=V(null);return un(async()=>{try{await L(),await G(),window.addEventListener("online",Z),window.addEventListener("offline",ce),xe.value=t.watch(Te=>Te.errors,Te=>{Te?.appBar&&(ne(Te.appBar,"Store error"),t.commit("clearError","appBar"))},{deep:!0}),console.log("App bar initialized successfully")}catch(Te){ne(Te,"App bar initialization")}}),da(()=>{try{window.removeEventListener("online",Z),window.removeEventListener("offline",ce),xe.value&&xe.value(),m.value=!1,y.value=!1,H.value=!1,f.value=null,console.log("App bar cleanup completed")}catch(Te){console.error("App bar cleanup error:",Te)}}),Ke(()=>n.currentRoute.value.path,()=>{f.value&&!f.value.includes("contact support")&&(f.value=null)}),(Te,Me)=>{const et=I("v-alert"),lt=I("v-spacer"),Re=I("v-btn"),Le=I("v-icon"),nt=I("v-tooltip"),Tt=I("v-progress-circular"),Pt=I("v-chip"),Kt=I("v-card"),$t=I("v-app-bar"),bt=I("v-snackbar");return U(),me("div",null,[f.value?(U(),pe(et,{key:0,type:"error",variant:"tonal",closable:"","onClick:close":Me[0]||(Me[0]=st=>f.value=null),class:"ma-2",density:"compact"},{default:u(()=>[M(K(f.value),1)]),_:1})):ge("",!0),l($t,{elevation:"1",app:"",extended:!!te.value,density:"compact",class:"professional-app-bar",image:J.value},{default:u(()=>[l(lt),ma(l(Re,{variant:"outlined",color:"warning",size:"small",onClick:q,class:"mx-2","prepend-icon":"mdi-test-tube"},{default:u(()=>[...Me[6]||(Me[6]=[M(" Test Welcome ",-1)])]),_:1},512),[[ci,!1]]),v("div",Bfe,[l(nt,{text:"Start teleconsultation",location:"bottom"},{activator:u(({props:st})=>[l(Re,Ue({icon:"",onClick:N},st,{class:"video-btn mx-3",variant:"text",size:"small",disabled:h.value,loading:h.value,"aria-label":"Open Appointments and Teleconsult page"}),{default:u(()=>[l(Le,{size:"24"},{default:u(()=>[v("img",{src:$Ae,alt:"Video Consultation",class:"video-icon",onError:ye},null,32)]),_:1})]),_:1},16,["disabled","loading"])]),_:1}),Ce.value.has("selector")?(U(),me("div",Ife,[l(Pt,{variant:"outlined",size:"small",color:"warning",class:"mr-2"},{default:u(()=>[...Me[8]||(Me[8]=[M(" Selection unavailable ",-1)])]),_:1}),l(Re,{size:"x-small",variant:"text",onClick:Me[1]||(Me[1]=st=>De("selector")),class:"text-caption"},{default:u(()=>[...Me[9]||(Me[9]=[M(" Retry ",-1)])]),_:1})])):(U(),pe(vS,{key:0},{default:u(()=>[v("div",kfe,[(U(),pe(ffe,{onError:Se,key:g.value}))])]),fallback:u(()=>[v("div",Tfe,[l(Tt,{indeterminate:"",size:"20",width:"2",color:"primary"}),Me[7]||(Me[7]=v("span",{class:"ml-2 text-caption"},"Loading...",-1))])]),_:1})),$e(Ua)()?(U(),pe(Kt,{key:2,variant:"outlined",class:"mx-3 status-indicators-container d-flex align-center pa-2",density:"compact",style:{"border-color":"rgba(0, 0, 0, 0.15) !important"}},{default:u(()=>[l(hfe),l(nt,{text:b.value?"Reconnecting...":"Reconnect Link",location:"bottom"},{activator:u(({props:st})=>[x.value?(U(),pe(Re,Ue({key:0},st,{size:"x-small",variant:"outlined",color:b.value?"warning":"error",class:"ml-2 reconnect-btn",loading:b.value,disabled:b.value,onClick:T}),{default:u(()=>[l(Le,{size:"14",class:"mr-1"},{default:u(()=>[...Me[10]||(Me[10]=[M("mdi-refresh",-1)])]),_:1}),M(" "+K(b.value?"":"Reconnect"),1)]),_:1},16,["color","loading","disabled"])):ge("",!0)]),_:1},8,["text"])]),_:1})):ge("",!0),$e(Ua)()?(U(),me("div",Ffe,[l(nt,{text:"Zoom Out",location:"bottom"},{activator:u(({props:st})=>[l(Re,Ue(st,{icon:"",size:"small",variant:"text",class:"control-btn mx-1",onClick:de,disabled:O.value}),{default:u(()=>[l(Le,{class:"control-icon"},{default:u(()=>[...Me[11]||(Me[11]=[v("img",{src:QAe,alt:"Zoom Out"},null,-1)])]),_:1})]),_:1},16,["disabled"])]),_:1}),l(nt,{text:"Zoom In",location:"bottom"},{activator:u(({props:st})=>[l(Re,Ue(st,{icon:"",size:"small",variant:"text",class:"control-btn mx-1",onClick:re,disabled:P.value}),{default:u(()=>[l(Le,{class:"control-icon"},{default:u(()=>[...Me[12]||(Me[12]=[v("img",{src:GAe,alt:"Zoom In"},null,-1)])]),_:1})]),_:1},16,["disabled"])]),_:1}),l(nt,{text:S.value?"Exit Fullscreen":"Enter Fullscreen",location:"bottom"},{activator:u(({props:st})=>[l(Re,Ue(st,{icon:"",size:"small",variant:"text",class:"control-btn mx-1",onClick:X,disabled:p.value}),{default:u(()=>[l(Le,{class:"control-icon"},{default:u(()=>[S.value?(U(),me("img",Pfe)):(U(),me("img",Dfe))]),_:1})]),_:1},16,["disabled"])]),_:1},8,["text"]),Me[14]||(Me[14]=v("div",{class:"mx-3"},null,-1)),l(nt,{text:"Close",location:"bottom"},{activator:u(({props:st})=>[l(Re,Ue(st,{icon:"",size:"small",variant:"text",class:"control-btn close-btn",onClick:le,disabled:p.value}),{default:u(()=>[l(Le,{class:"control-icon close-icon"},{default:u(()=>[...Me[13]||(Me[13]=[v("img",{src:WAe,alt:"Close"},null,-1)])]),_:1})]),_:1},16,["disabled"])]),_:1})])):ge("",!0),l(nt,{text:"Contact Support",location:"bottom"},{activator:u(({props:st})=>[l(Re,Ue({icon:"",onClick:Me[2]||(Me[2]=Je=>w.value=!0)},st,{class:"support-btn mx-3",variant:"text",size:"small","aria-label":"Contact support"}),{default:u(()=>[l(Le,{size:"20",class:"support-icon"},{default:u(()=>[...Me[15]||(Me[15]=[M("mdi-headset",-1)])]),_:1})]),_:1},16)]),_:1}),$e(Ua)()?(U(),pe(nt,{key:4,text:"Check for Updates",location:"bottom"},{activator:u(({props:st})=>[l(Re,Ue({icon:"",onClick:z},st,{class:"updates-btn mx-3",variant:"text",size:"small",disabled:y.value,loading:y.value,"aria-label":"Check for application updates"}),{default:u(()=>[l(Le,{size:"20",class:"updates-icon"},{default:u(()=>[...Me[16]||(Me[16]=[M("mdi-package-variant",-1)])]),_:1})]),_:1},16,["disabled","loading"])]),_:1})):ge("",!0),$e(Ua)()?(U(),pe(nt,{key:5,text:"Logout",location:"bottom"},{activator:u(({props:st})=>[l(Re,Ue({icon:"",onClick:Q},st,{class:"logout-btn mx-3",variant:"text",size:"small",disabled:m.value,loading:m.value,"aria-label":"Logout from application"}),{default:u(()=>[l(Le,{size:"20"},{default:u(()=>[v("img",{src:z3,alt:"Logout",class:"logout-icon",onError:ye},null,32)]),_:1})]),_:1},16,["disabled","loading"])]),_:1})):ge("",!0),$e(KD)()?(U(),pe(nt,{key:6,text:"Logout",location:"bottom"},{activator:u(({props:st})=>[l(Re,Ue({icon:"",onClick:ee},st,{class:"logout-btn mx-3",variant:"text",size:"small","aria-label":"Logout from application"}),{default:u(()=>[l(Le,{size:"20"},{default:u(()=>[v("img",{src:z3,alt:"Logout",class:"logout-icon",onError:ye},null,32)]),_:1})]),_:1},16)]),_:1})):ge("",!0)])]),extension:u(()=>[te.value?(U(),me("div",Ufe,[(U(),pe(vS,null,{default:u(()=>[(U(),pe(ew(te.value.component),Ue(te.value.props||{},{onError:Pe}),null,16))]),fallback:u(()=>[v("div",Rfe,[l(Tt,{indeterminate:"",size:"16",width:"2",color:"primary"}),Me[17]||(Me[17]=v("span",{class:"ml-2 text-caption"},"Loading extension...",-1))])]),_:1}))])):ge("",!0)]),_:1},8,["extended","image"]),l(bt,{modelValue:H.value,"onUpdate:modelValue":Me[4]||(Me[4]=st=>H.value=st),color:Ae.value,timeout:j.value,location:"top"},{actions:u(()=>[l(Re,{variant:"text",onClick:Me[3]||(Me[3]=st=>H.value=!1)},{default:u(()=>[...Me[18]||(Me[18]=[M(" Close ",-1)])]),_:1})]),default:u(()=>[M(K(ie.value)+" ",1)]),_:1},8,["modelValue","color","timeout"]),l(Efe,{modelValue:w.value,"onUpdate:modelValue":Me[5]||(Me[5]=st=>w.value=st)},null,8,["modelValue"])])}}},Vfe=Xt(Nfe,[["__scopeId","data-v-175fc1de"]]),Lfe={name:"UpdateNotification",data(){return{updateAvailable:!1,downloadInProgress:!1,readyToInstall:!1,showError:!1,showSuccess:!1,errorMessage:"",successMessage:"",updateInfo:null,downloadProgress:0,downloadSpeed:0,downloadTransferred:0,downloadTotal:0,isDownloading:!1,isCheckingUpdate:!1,isDevelopment:!1,autoRestartEnabled:!0,canRetry:!1,retryCount:0,lastUpdateCheck:null,currentVersion:"Loading...",showUpdateStatusDialog:!1}},mounted(){this.setupUpdateListeners(),this.loadCurrentVersion()},beforeUnmount(){this.removeUpdateListeners()},computed:{},methods:{setupUpdateListeners(){if(!window.require)return;const{ipcRenderer:e}=window.require("electron");e.on("update-checking",this.onUpdateChecking),e.on("update-available",this.onUpdateAvailable),e.on("update-not-available",this.onUpdateNotAvailable),e.on("download-progress",this.onDownloadProgress),e.on("update-downloaded",this.onUpdateDownloaded),e.on("update-error",this.onUpdateError),e.on("server-ready",this.onServerReady),e.on("download-cancelled",this.onDownloadCancelled)},removeUpdateListeners(){if(!window.require)return;const{ipcRenderer:e}=window.require("electron");e.removeListener("update-checking",this.onUpdateChecking),e.removeListener("update-available",this.onUpdateAvailable),e.removeListener("update-not-available",this.onUpdateNotAvailable),e.removeListener("download-progress",this.onDownloadProgress),e.removeListener("update-downloaded",this.onUpdateDownloaded),e.removeListener("update-error",this.onUpdateError),e.removeListener("server-ready",this.onServerReady),e.removeListener("download-cancelled",this.onDownloadCancelled)},onUpdateChecking(){console.log("Checking for updates..."),this.lastUpdateCheck=new Date,this.isCheckingUpdate||(this.isCheckingUpdate=!0)},onUpdateAvailable(e,t){console.log("Update available:",t),this.updateInfo=t,this.updateAvailable=!0,this.isCheckingUpdate=!1},onUpdateNotAvailable(e,t){console.log("No updates available",t),this.isCheckingUpdate=!1,this.showUpdateStatusDialog=!0},onDownloadProgress(e,t){console.log("Download progress:",t),this.downloadProgress=t.percent||0,this.downloadSpeed=t.bytesPerSecond||0,this.downloadTransferred=t.transferred||0,this.downloadTotal=t.total||0,!this.downloadInProgress&&this.isDownloading&&(console.log("Showing download progress dialog"),this.downloadInProgress=!0,this.updateAvailable=!1),this.downloadProgress>0&&this.downloadProgress%25===0&&console.log(`Download ${Math.round(this.downloadProgress)}% complete`)},async onUpdateDownloaded(e,t){console.log("Update downloaded:",t),this.downloadInProgress=!1,this.isDownloading=!1,this.autoRestartEnabled?(this.successMessage=`Update ${t.version} downloaded successfully! Restarting application...`,this.showSuccess=!0,setTimeout(async()=>{console.log("Auto-restarting application to install update..."),await this.installNow()},2e3)):(this.readyToInstall=!0,this.successMessage=`Update ${t.version} downloaded successfully!`,this.showSuccess=!0)},onUpdateError(e,t){console.error("Update error:",t),this.showError=!0,t.errorType==="checksum_mismatch"||t.code==="ERR_CHECKSUM_MISMATCH"?(this.errorMessage=t.message||"Download verification failed. The file may be corrupted. Please try downloading again.",this.canRetry=t.canRetry!==!1,this.retryCount=t.retryCount||0):(this.errorMessage=`Update failed: ${t.message}`,this.canRetry=!1),this.isDownloading=!1,this.isCheckingUpdate=!1,this.downloadInProgress=!1,this.downloadProgress=0,this.downloadSpeed=0,this.downloadTransferred=0,this.downloadTotal=0},onServerReady(){console.log("Server is ready")},onDownloadCancelled(){console.log("Download was cancelled by main process"),this.downloadInProgress=!1,this.isDownloading=!1,this.downloadProgress=0,this.downloadSpeed=0,this.downloadTransferred=0,this.downloadTotal=0},async loadCurrentVersion(){try{if(!window.require)return;const{ipcRenderer:e}=window.require("electron"),t=await e.invoke("get-app-config");this.currentVersion=t.version||"Unknown"}catch(e){console.error("Failed to load current version:",e),this.currentVersion="Unknown"}},async checkForUpdates(){if(!window.require)return;const{ipcRenderer:e}=window.require("electron");try{this.isCheckingUpdate=!0,this.lastUpdateCheck=new Date;const t=await e.invoke("check-for-updates");console.log("Update check result:",t),setTimeout(()=>{this.isCheckingUpdate&&(this.isCheckingUpdate=!1,this.updateAvailable)},2e3)}catch(t){console.error("Failed to check for updates:",t),this.showError=!0,this.errorMessage="Failed to check for updates",this.isCheckingUpdate=!1}},async downloadUpdate(){if(!window.require)return;const{ipcRenderer:e}=window.require("electron");try{this.isDownloading=!0,this.errorMessage="",this.showError=!1,console.log("Starting update download...");const t=await e.invoke("download-update");if(t.success)console.log("Download started successfully");else throw new Error(t.error||"Failed to start download")}catch(t){console.error("Failed to start download:",t),this.showError=!0,this.errorMessage=`Failed to start download: ${t.message}`,this.isDownloading=!1}},dismissUpdate(){this.updateAvailable=!1,this.updateInfo=null},async installNow(){if(!window.require){console.error("Electron IPC not available"),this.showError=!0,this.errorMessage="Cannot restart application - Electron IPC not available";return}const{ipcRenderer:e}=window.require("electron");try{console.log("Requesting application restart and update installation..."),await e.invoke("quit-and-install"),console.warn("Application did not quit as expected")}catch(t){console.error("Failed to install update:",t),this.showError=!0,this.errorMessage=`Failed to install update: ${t.message}`,this.readyToInstall=!0}},installLater(){this.readyToInstall=!1},formatReleaseNotes(e){return e?e.replace(/\n/g,"<br>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/- (.*?)(<br>|$)/g," $1$2"):""},formatDate(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})},formatBytes(e){if(e===0)return"0 B";const t=1024,n=["B","KB","MB","GB"],a=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,a)).toFixed(1))+" "+n[a]},formatTimeRemaining(){if(this.downloadSpeed===0||this.downloadProgress===0||this.downloadProgress===100)return"Calculating...";const t=(this.downloadTotal-this.downloadTransferred)*1e3/(this.downloadSpeed*1e3),n=Math.floor(t/3600),a=Math.floor(t%3600/60),r=Math.floor(t%60);return`${n.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`},async cancelDownload(){try{if(this.downloadInProgress=!1,this.isDownloading=!1,this.downloadProgress=0,this.downloadSpeed=0,this.downloadTransferred=0,this.downloadTotal=0,window.require){const{ipcRenderer:e}=window.require("electron");await e.invoke("cancel-update-download"),console.log("Download cancelled successfully"),this.successMessage="Download cancelled successfully",this.showSuccess=!0}}catch(e){console.error("Failed to cancel download:",e),this.showError=!0,this.errorMessage="Failed to cancel download"}},async retryDownload(){if(!window.require)return;const{ipcRenderer:e}=window.require("electron");try{this.showError=!1,this.errorMessage="",console.log("Cleaning up corrupted download files...");const t=await e.invoke("cleanup-corrupted-download");t.success?console.log("Download cache cleared successfully"):console.warn("Failed to cleanup download cache:",t.error),await new Promise(n=>setTimeout(n,1e3)),await this.downloadUpdate()}catch(t){console.error("Failed to retry download:",t),this.showError=!0,this.errorMessage="Failed to retry download. Please try again."}},handleUpdateCheckEvent(){console.log("Updates check triggered from external source"),this.checkForUpdates()},formatLastCheckTime(e){if(!e)return"Never";const n=new Date-e,a=Math.floor(n/6e4),r=Math.floor(n/36e5),s=Math.floor(n/864e5);return s>0?`${s} day${s>1?"s":""} ago`:r>0?`${r} hour${r>1?"s":""} ago`:a>0?`${a} minute${a>1?"s":""} ago`:"Just now"}}},Mfe={key:0},Ofe={class:"mb-3"},Hfe={key:0,class:"mb-3"},$fe=["innerHTML"],Qfe={key:1,class:"mb-2"},Gfe={class:"text--secondary"},zfe={key:2,class:"mb-2"},Kfe={class:"text--secondary"},Wfe={class:"text-center mb-3"},jfe={class:"mt-3 text-center text--secondary"},qfe={key:0};function Yfe(e,t,n,a,r,s){const o=I("v-icon"),i=I("v-card-title"),c=I("v-card-text"),A=I("v-spacer"),d=I("v-btn"),f=I("v-card-actions"),m=I("v-card"),h=I("v-dialog"),p=I("v-progress-circular"),y=I("v-progress-linear"),g=I("v-snackbar");return U(),me("div",null,[l(h,{modelValue:r.updateAvailable,"onUpdate:modelValue":t[0]||(t[0]=w=>r.updateAvailable=w),"max-width":"500",persistent:""},{default:u(()=>[l(m,null,{default:u(()=>[l(i,{class:"text-h5 primary white--text"},{default:u(()=>[l(o,{left:"",color:"white"},{default:u(()=>[...t[7]||(t[7]=[M("mdi-download",-1)])]),_:1}),t[8]||(t[8]=M(" Update Available ",-1))]),_:1}),l(c,{class:"pt-4"},{default:u(()=>[r.updateInfo?(U(),me("div",Mfe,[v("p",Ofe,[v("strong",null,"Version "+K(r.updateInfo.version),1),t[9]||(t[9]=M(" is now available! ",-1))]),r.updateInfo.releaseNotes?(U(),me("div",Hfe,[t[10]||(t[10]=v("h4",{class:"mb-2"},"What's New:",-1)),v("div",{class:"release-notes",innerHTML:s.formatReleaseNotes(r.updateInfo.releaseNotes)},null,8,$fe)])):ge("",!0),r.updateInfo.releaseDate?(U(),me("div",Qfe,[v("small",Gfe," Released: "+K(s.formatDate(r.updateInfo.releaseDate)),1)])):ge("",!0),r.updateInfo.files&&r.updateInfo.files.length>0?(U(),me("div",zfe,[v("small",Kfe," Size: "+K(s.formatBytes(r.updateInfo.files[0].size||0)),1)])):ge("",!0)])):ge("",!0),t[11]||(t[11]=v("p",{class:"mb-0"}," Would you like to download and install the update now? ",-1))]),_:1}),l(f,null,{default:u(()=>[l(A),l(d,{text:"",onClick:s.dismissUpdate,class:"btn-hover-base"},{default:u(()=>[...t[12]||(t[12]=[M(" Later ",-1)])]),_:1},8,["onClick"]),l(d,{color:"primary",onClick:s.downloadUpdate,loading:r.isDownloading,class:"btn-hover-enhanced"},{default:u(()=>[...t[13]||(t[13]=[M(" Download & Install ",-1)])]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(h,{modelValue:r.downloadInProgress,"onUpdate:modelValue":t[1]||(t[1]=w=>r.downloadInProgress=w),"max-width":"400",persistent:""},{default:u(()=>[l(m,null,{default:u(()=>[l(i,{class:"text-h6"},{default:u(()=>[l(o,{left:""},{default:u(()=>[...t[14]||(t[14]=[M("mdi-download",-1)])]),_:1}),t[15]||(t[15]=M(" Downloading Update ",-1))]),_:1}),l(c,null,{default:u(()=>[v("div",Wfe,[l(p,{value:r.downloadProgress,size:"80",width:"8",color:"primary"},{default:u(()=>[M(K(Math.round(r.downloadProgress))+"% ",1)]),_:1},8,["value"])]),l(y,{value:r.downloadProgress,color:"primary",height:"6",rounded:""},null,8,["value"]),v("div",jfe,[v("small",null,[M(K(s.formatBytes(r.downloadTransferred))+" / "+K(s.formatBytes(r.downloadTotal))+" ",1),t[16]||(t[16]=v("br",null,null,-1)),M(" Speed: "+K(s.formatBytes(r.downloadSpeed))+"/s ",1),t[17]||(t[17]=v("br",null,null,-1)),r.downloadSpeed>0?(U(),me("span",qfe," ETA: "+K(s.formatTimeRemaining()),1)):ge("",!0)])])]),_:1}),l(f,null,{default:u(()=>[l(A),l(d,{text:"",onClick:s.cancelDownload,disabled:r.downloadProgress>90},{default:u(()=>[...t[18]||(t[18]=[M(" Cancel ",-1)])]),_:1},8,["onClick","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(h,{modelValue:r.readyToInstall,"onUpdate:modelValue":t[2]||(t[2]=w=>r.readyToInstall=w),"max-width":"400",persistent:""},{default:u(()=>[l(m,null,{default:u(()=>[l(i,{class:"text-h5 success white--text"},{default:u(()=>[l(o,{left:"",color:"white"},{default:u(()=>[...t[19]||(t[19]=[M("mdi-check-circle",-1)])]),_:1}),t[20]||(t[20]=M(" Update Ready ",-1))]),_:1}),l(c,{class:"pt-4"},{default:u(()=>[...t[21]||(t[21]=[v("p",null," The update has been downloaded successfully. The application will restart to apply the update. ",-1),v("p",{class:"mb-0"},[v("strong",null,"Note:"),M(" Any unsaved work will be lost. ")],-1)])]),_:1}),l(f,null,{default:u(()=>[l(A),l(d,{text:"",onClick:s.installLater},{default:u(()=>[...t[22]||(t[22]=[M(" Restart Later ",-1)])]),_:1},8,["onClick"]),l(d,{color:"success",onClick:s.installNow},{default:u(()=>[...t[23]||(t[23]=[M(" Restart Now ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(g,{modelValue:r.showError,"onUpdate:modelValue":t[4]||(t[4]=w=>r.showError=w),color:"error",timeout:"0",top:""},{action:u(({attrs:w})=>[r.canRetry?(U(),pe(d,Ue({key:0,text:""},w,{onClick:s.retryDownload}),{default:u(()=>[...t[25]||(t[25]=[M(" Retry ",-1)])]),_:1},16,["onClick"])):ge("",!0),l(d,Ue({text:""},w,{onClick:t[3]||(t[3]=b=>r.showError=!1)}),{default:u(()=>[...t[26]||(t[26]=[M(" Close ",-1)])]),_:1},16)]),default:u(()=>[l(o,{left:""},{default:u(()=>[...t[24]||(t[24]=[M("mdi-alert",-1)])]),_:1}),M(" "+K(r.errorMessage)+" ",1)]),_:1},8,["modelValue"]),l(g,{modelValue:r.showSuccess,"onUpdate:modelValue":t[6]||(t[6]=w=>r.showSuccess=w),color:"success",timeout:"4000",top:""},{action:u(({attrs:w})=>[l(d,Ue({text:""},w,{onClick:t[5]||(t[5]=b=>r.showSuccess=!1)}),{default:u(()=>[...t[28]||(t[28]=[M(" Close ",-1)])]),_:1},16)]),default:u(()=>[l(o,{left:""},{default:u(()=>[...t[27]||(t[27]=[M("mdi-check-circle",-1)])]),_:1}),M(" "+K(r.successMessage)+" ",1)]),_:1},8,["modelValue"])])}const Xfe=Xt(Lfe,[["render",Yfe],["__scopeId","data-v-b62dff2a"]]),Jfe={__name:"App",setup(e){const t=Rn(),n=Al(),{snackbar:a}=ra(),r=V(!1),s=Ua(),o=ae(()=>t.getters["auth/isAuthenticated"]),i=V(!!localStorage.getItem("desktopSessionToken")),c=Kf(),A=ae(()=>{const p=!!localStorage.getItem("sessionToken"),y=c.isAuthenticated.value;return p&&y}),d=ae(()=>{if(s)return o.value&&i.value;{const p=A.value;return console.log("[App.vue] Web authentication check:",{hasToken:!!localStorage.getItem("sessionToken"),computedAuth:c.isAuthenticated.value,isFullyAuthenticated:p}),p}});s&&window.addEventListener("storage",p=>{p.key==="desktopSessionToken"&&(i.value=!!p.newValue)}),n.afterEach(()=>{s&&(i.value=!!localStorage.getItem("desktopSessionToken"))});const f=ae(()=>{const p=n.currentRoute.value.path,y=["/","/login","/desktop/passcode","/web/login"],g=d.value&&!y.includes(p);return console.log("[App.vue] showNavigation check:",{currentPath:p,isFullyAuthenticated:d.value,isExcluded:y.includes(p),shouldShow:g}),g});window.addEventListener("collapse-side-nav",p=>m(p.detail)),un(async()=>{console.log("App mounted")});const m=p=>{r.value=p},h=p=>{t.dispatch("snackbar/showSnackbar",p)};return(p,y)=>{const g=I("router-view"),w=I("v-btn"),b=I("v-snackbar"),x=I("v-app");return U(),pe(x,null,{default:u(()=>[f.value?(U(),pe(HAe,{key:0,collapsed:r.value},null,8,["collapsed"])):ge("",!0),f.value?(U(),pe(Vfe,{key:1})):ge("",!0),l(g,null,{default:u(({Component:T})=>[(U(),pe(_Z,null,[(U(),pe(ew(T),{key:p.$route.path}))],1024))]),_:1}),l(Xfe,{onShowSnackbar:h}),l(b,{modelValue:$e(a).show,"onUpdate:modelValue":y[1]||(y[1]=T=>$e(a).show=T),color:$e(a).color,timeout:$e(a).timeout,top:"",right:""},{action:u(({attrs:T})=>[l(w,Ue({text:""},T,{onClick:y[0]||(y[0]=F=>$e(t).dispatch("snackbar/hideSnackbar"))}),{default:u(()=>[...y[2]||(y[2]=[M(" Close ",-1)])]),_:1},16)]),default:u(()=>[M(K($e(a).message)+" ",1)]),_:1},8,["modelValue","color","timeout"])]),_:1})}}},Sg="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17.65,6.35C16.2,4.9%2014.21,4%2012,4A8,8%200%200,0%204,12A8,8%200%200,0%2012,20C15.73,20%2018.84,17.45%2019.73,14H17.65C16.83,16.33%2014.61,18%2012,18A6,6%200%200,1%206,12A6,6%200%200,1%2012,6C13.66,6%2015.14,6.69%2016.22,7.78L13,11H20V4L17.65,6.35Z'%20/%3e%3c/svg%3e",Zfe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M5%206C3.9%206%203%206.9%203%208S3.9%2010%205%2010%207%209.11%207%208%206.11%206%205%206M12%204C10.9%204%2010%204.89%2010%206S10.9%208%2012%208%2014%207.11%2014%206%2013.11%204%2012%204M19%202C17.9%202%2017%202.9%2017%204S17.9%206%2019%206%2021%205.11%2021%204%2020.11%202%2019%202M3.5%2011C2.67%2011%202%2011.67%202%2012.5V17H3V22H7V17H8V12.5C8%2011.67%207.33%2011%206.5%2011H3.5M10.5%209C9.67%209%209%209.67%209%2010.5V15H10V20H14V15H15V10.5C15%209.67%2014.33%209%2013.5%209H10.5M17.5%207C16.67%207%2016%207.67%2016%208.5V13H17V18H21V13H22V8.5C22%207.67%2021.33%207%2020.5%207H17.5Z'%20/%3e%3c/svg%3e",eme="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M21.1,12.5L22.5,13.91L15.97,20.5L12.5,17L13.9,15.59L15.97,17.67L21.1,12.5M10,17L13,20H3V18C3,15.79%206.58,14%2011,14L12.89,14.11L10,17M11,4A4,4%200%200,1%2015,8A4,4%200%200,1%2011,12A4,4%200%200,1%207,8A4,4%200%200,1%2011,4Z'%20/%3e%3c/svg%3e",tme="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M10%204A4%204%200%200%200%206%208A4%204%200%200%200%2010%2012A4%204%200%200%200%2014%208A4%204%200%200%200%2010%204M17.5%2013C15%2013%2013%2015%2013%2017.5C13%2020%2015%2022%2017.5%2022C20%2022%2022%2020%2022%2017.5C22%2015%2020%2013%2017.5%2013M10%2014C5.58%2014%202%2015.79%202%2018V20H11.5A6.5%206.5%200%200%201%2011%2017.5A6.5%206.5%200%200%201%2011.95%2014.14C11.32%2014.06%2010.68%2014%2010%2014M17.5%2014.5C19.16%2014.5%2020.5%2015.84%2020.5%2017.5C20.5%2018.06%2020.35%2018.58%2020.08%2019L16%2014.92C16.42%2014.65%2016.94%2014.5%2017.5%2014.5M14.92%2016L19%2020.08C18.58%2020.35%2018.06%2020.5%2017.5%2020.5C15.84%2020.5%2014.5%2019.16%2014.5%2017.5C14.5%2016.94%2014.65%2016.42%2014.92%2016Z'%20/%3e%3c/svg%3e",nme="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M10.63,14.1C12.23,10.58%2016.38,9.03%2019.9,10.63C23.42,12.23%2024.97,16.38%2023.37,19.9C22.24,22.4%2019.75,24%2017,24C14.3,24%2011.83,22.44%2010.67,20H1V18C1.06,16.86%201.84,15.93%203.34,15.18C4.84,14.43%206.72,14.04%209,14C9.57,14%2010.11,14.05%2010.63,14.1V14.1M9,4C10.12,4.03%2011.06,4.42%2011.81,5.17C12.56,5.92%2012.93,6.86%2012.93,8C12.93,9.14%2012.56,10.08%2011.81,10.83C11.06,11.58%2010.12,11.95%209,11.95C7.88,11.95%206.94,11.58%206.19,10.83C5.44,10.08%205.07,9.14%205.07,8C5.07,6.86%205.44,5.92%206.19,5.17C6.94,4.42%207.88,4.03%209,4M17,22A5,5%200%200,0%2022,17A5,5%200%200,0%2017,12A5,5%200%200,0%2012,17A5,5%200%200,0%2017,22M16,14H17.5V16.82L19.94,18.23L19.19,19.53L16,17.69V14Z'%20/%3e%3c/svg%3e",Zx="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M11.15,15.18L9.73,13.77L11.15,12.35L12.56,13.77L13.97,12.35L12.56,10.94L13.97,9.53L15.39,10.94L16.8,9.53L13.97,6.7L6.9,13.77L9.73,16.6L11.15,15.18M3.08,19L6.2,15.89L4.08,13.77L13.97,3.87L16.1,6L17.5,4.58L16.1,3.16L17.5,1.75L21.75,6L20.34,7.4L18.92,6L17.5,7.4L19.63,9.53L9.73,19.42L7.61,17.3L3.08,21.84V19Z'%20/%3e%3c/svg%3e",yv="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M20.71,7.04C21.1,6.65%2021.1,6%2020.71,5.63L18.37,3.29C18,2.9%2017.35,2.9%2016.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z'%20/%3e%3c/svg%3e",Nd="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2%200%200,0%208,21H16A2,2%200%200,0%2018,19V7H6V19Z'%20/%3e%3c/svg%3e",eC="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M8,12H16V14H8V12M10,20H6V4H13V9H18V12.1L20,10.1V8L14,2H6A2,2%200%200,0%204,4V20A2,2%200%200,0%206,22H10V20M8,18H12.1L13,17.1V16H8V18M20.2,13C20.3,13%2020.5,13.1%2020.6,13.2L21.9,14.5C22.1,14.7%2022.1,15.1%2021.9,15.3L20.9,16.3L18.8,14.2L19.8,13.2C19.9,13.1%2020,13%2020.2,13M20.2,16.9L14.1,23H12V20.9L18.1,14.8L20.2,16.9Z'%20/%3e%3c/svg%3e",ou="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z'%20/%3e%3c/svg%3e";var Cp={exports:{}};var ame=Cp.exports,q3;function rme(){return q3||(q3=1,(function(e,t){(function(){var n,a="4.17.21",r=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",i="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",A=500,d="__lodash_placeholder__",f=1,m=2,h=4,p=1,y=2,g=1,w=2,b=4,x=8,T=16,F=32,k=64,S=128,E=256,C=512,D=30,P="...",O=800,H=16,ie=1,Ae=2,j=3,J=1/0,ue=9007199254740991,ne=17976931348623157e292,Y=NaN,te=4294967295,L=te-1,N=te>>>1,q=[["ary",S],["bind",g],["bindKey",w],["curry",x],["curryRight",T],["flip",C],["partial",F],["partialRight",k],["rearg",E]],Q="[object Arguments]",ee="[object Array]",z="[object AsyncFunction]",X="[object Boolean]",le="[object Date]",re="[object DOMException]",de="[object Error]",G="[object Function]",Z="[object GeneratorFunction]",ce="[object Map]",Se="[object Number]",Pe="[object Null]",ye="[object Object]",Ce="[object Promise]",_e="[object Proxy]",De="[object RegExp]",xe="[object Set]",Te="[object String]",Me="[object Symbol]",et="[object Undefined]",lt="[object WeakMap]",Re="[object WeakSet]",Le="[object ArrayBuffer]",nt="[object DataView]",Tt="[object Float32Array]",Pt="[object Float64Array]",Kt="[object Int8Array]",$t="[object Int16Array]",bt="[object Int32Array]",st="[object Uint8Array]",Je="[object Uint8ClampedArray]",Nt="[object Uint16Array]",rn="[object Uint32Array]",Lt=/\b__p \+= '';/g,_t=/\b(__p \+=) '' \+/g,ut=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ft=/&(?:amp|lt|gt|quot|#39);/g,zt=/[&<>"']/g,dn=RegExp(Ft.source),Hn=RegExp(zt.source),Ze=/<%-([\s\S]+?)%>/g,Ge=/<%([\s\S]+?)%>/g,xt=/<%=([\s\S]+?)%>/g,gt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Bt=/^\w*$/,wt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gn=/[\\^$.*+?()[\]{}|]/g,Wn=RegExp(gn.source),zn=/^\s+/,oa=/\s/,Ra=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Be=/\{\n\/\* \[wrapped with (.+)\] \*/,Qe=/,? & /,ke=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ve=/[()=,{}\[\]\/\s]/,ze=/\\(\\)?/g,je=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,oe=/\w*$/,se=/^[-+]0x[0-9a-f]+$/i,be=/^0b[01]+$/i,Fe=/^\[object .+?Constructor\]$/,at=/^0o[0-7]+$/i,rt=/^(?:0|[1-9]\d*)$/,qe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,At=/($^)/,Ut=/['\n\r\u2028\u2029\\]/g,ft="\\ud800-\\udfff",en="\\u0300-\\u036f",Jt="\\ufe20-\\ufe2f",wn="\\u20d0-\\u20ff",yn=en+Jt+wn,Pa="\\u2700-\\u27bf",Or="a-z\\xdf-\\xf6\\xf8-\\xff",Hr="\\xac\\xb1\\xd7\\xf7",Bs="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ko="\\u2000-\\u206f",Er=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ks="A-Z\\xc0-\\xd6\\xd8-\\xde",$r="\\ufe0e\\ufe0f",Vi=Hr+Bs+Ko+Er,Vt="[']",Ja="["+ft+"]",Vn="["+Vi+"]",nr="["+yn+"]",vl="\\d+",vt="["+Pa+"]",hn="["+Or+"]",kn="[^"+ft+Vi+vl+Pa+Or+ks+"]",Na="\\ud83c[\\udffb-\\udfff]",Li="(?:"+nr+"|"+Na+")",Da="[^"+ft+"]",Mi="(?:\\ud83c[\\udde6-\\uddff]){2}",hl="[\\ud800-\\udbff][\\udc00-\\udfff]",Wo="["+ks+"]",lm="\\u200d",fA="(?:"+hn+"|"+kn+")",Rh="(?:"+Wo+"|"+kn+")",um="(?:"+Vt+"(?:d|ll|m|re|s|t|ve))?",cm="(?:"+Vt+"(?:D|LL|M|RE|S|T|VE))?",mA=Li+"?",uu="["+$r+"]?",Oi="(?:"+lm+"(?:"+[Da,Mi,hl].join("|")+")"+uu+mA+")*",dm="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Am="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",vA=uu+mA+Oi,cu="(?:"+[vt,Mi,hl].join("|")+")"+vA,Nh="(?:"+[Da+nr+"?",nr,Mi,hl,Ja].join("|")+")",Ju=RegExp(Vt,"g"),Vh=RegExp(nr,"g"),jo=RegExp(Na+"(?="+Na+")|"+Nh+vA,"g"),Lh=RegExp([Wo+"?"+hn+"+"+um+"(?="+[Vn,Wo,"$"].join("|")+")",Rh+"+"+cm+"(?="+[Vn,Wo+fA,"$"].join("|")+")",Wo+"?"+fA+"+"+um,Wo+"+"+cm,Am,dm,vl,cu].join("|"),"g"),Mh=RegExp("["+lm+ft+yn+$r+"]"),Zu=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Yc=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],fm=-1,Ta={};Ta[Tt]=Ta[Pt]=Ta[Kt]=Ta[$t]=Ta[bt]=Ta[st]=Ta[Je]=Ta[Nt]=Ta[rn]=!0,Ta[Q]=Ta[ee]=Ta[Le]=Ta[X]=Ta[nt]=Ta[le]=Ta[de]=Ta[G]=Ta[ce]=Ta[Se]=Ta[ye]=Ta[De]=Ta[xe]=Ta[Te]=Ta[lt]=!1;var Ie={};Ie[Q]=Ie[ee]=Ie[Le]=Ie[nt]=Ie[X]=Ie[le]=Ie[Tt]=Ie[Pt]=Ie[Kt]=Ie[$t]=Ie[bt]=Ie[ce]=Ie[Se]=Ie[ye]=Ie[De]=Ie[xe]=Ie[Te]=Ie[Me]=Ie[st]=Ie[Je]=Ie[Nt]=Ie[rn]=!0,Ie[de]=Ie[G]=Ie[lt]=!1;var fe={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Wt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},jt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},It={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},fn=parseFloat,an=parseInt,$n=typeof J1=="object"&&J1&&J1.Object===Object&&J1,_n=typeof self=="object"&&self&&self.Object===Object&&self,Yn=$n||_n||Function("return this")(),na=t&&!t.nodeType&&t,ts=na&&!0&&e&&!e.nodeType&&e,Xc=ts&&ts.exports===na,hA=Xc&&$n.process,ua=(function(){try{var mt=ts&&ts.require&&ts.require("util").types;return mt||hA&&hA.binding&&hA.binding("util")}catch{}})(),Jc=ua&&ua.isArrayBuffer,Zc=ua&&ua.isDate,qo=ua&&ua.isMap,Bo=ua&&ua.isRegExp,Dr=ua&&ua.isSet,Ga=ua&&ua.isTypedArray;function As(mt,Dt,Et){switch(Et.length){case 0:return mt.call(Dt);case 1:return mt.call(Dt,Et[0]);case 2:return mt.call(Dt,Et[0],Et[1]);case 3:return mt.call(Dt,Et[0],Et[1],Et[2])}return mt.apply(Dt,Et)}function mi(mt,Dt,Et,vn){for(var jn=-1,La=mt==null?0:mt.length;++jn<La;){var ms=mt[jn];Dt(vn,ms,Et(ms),mt)}return vn}function Br(mt,Dt){for(var Et=-1,vn=mt==null?0:mt.length;++Et<vn&&Dt(mt[Et],Et,mt)!==!1;);return mt}function ko(mt,Dt){for(var Et=mt==null?0:mt.length;Et--&&Dt(mt[Et],Et,mt)!==!1;);return mt}function Ts(mt,Dt){for(var Et=-1,vn=mt==null?0:mt.length;++Et<vn;)if(!Dt(mt[Et],Et,mt))return!1;return!0}function Yo(mt,Dt){for(var Et=-1,vn=mt==null?0:mt.length,jn=0,La=[];++Et<vn;){var ms=mt[Et];Dt(ms,Et,mt)&&(La[jn++]=ms)}return La}function ec(mt,Dt){var Et=mt==null?0:mt.length;return!!Et&&hi(mt,Dt,0)>-1}function Ms(mt,Dt,Et){for(var vn=-1,jn=mt==null?0:mt.length;++vn<jn;)if(Et(Dt,mt[vn]))return!0;return!1}function ya(mt,Dt){for(var Et=-1,vn=mt==null?0:mt.length,jn=Array(vn);++Et<vn;)jn[Et]=Dt(mt[Et],Et,mt);return jn}function Xo(mt,Dt){for(var Et=-1,vn=Dt.length,jn=mt.length;++Et<vn;)mt[jn+Et]=Dt[Et];return mt}function vi(mt,Dt,Et,vn){var jn=-1,La=mt==null?0:mt.length;for(vn&&La&&(Et=mt[++jn]);++jn<La;)Et=Dt(Et,mt[jn],jn,mt);return Et}function Ye(mt,Dt,Et,vn){var jn=mt==null?0:mt.length;for(vn&&jn&&(Et=mt[--jn]);jn--;)Et=Dt(Et,mt[jn],jn,mt);return Et}function va(mt,Dt){for(var Et=-1,vn=mt==null?0:mt.length;++Et<vn;)if(Dt(mt[Et],Et,mt))return!0;return!1}var Hi=Oe("length");function e1(mt){return mt.split("")}function Jo(mt){return mt.match(ke)||[]}function Oh(mt,Dt,Et){var vn;return Et(mt,function(jn,La,ms){if(Dt(jn,La,ms))return vn=La,!1}),vn}function pA(mt,Dt,Et,vn){for(var jn=mt.length,La=Et+(vn?1:-1);vn?La--:++La<jn;)if(Dt(mt[La],La,mt))return La;return-1}function hi(mt,Dt,Et){return Dt===Dt?mK(mt,Dt,Et):pA(mt,ve,Et)}function R(mt,Dt,Et,vn){for(var jn=Et-1,La=mt.length;++jn<La;)if(vn(mt[jn],Dt))return jn;return-1}function ve(mt){return mt!==mt}function we(mt,Dt){var Et=mt==null?0:mt.length;return Et?Va(mt,Dt)/Et:Y}function Oe(mt){return function(Dt){return Dt==null?n:Dt[mt]}}function pt(mt){return function(Dt){return mt==null?n:mt[Dt]}}function kt(mt,Dt,Et,vn,jn){return jn(mt,function(La,ms,ir){Et=vn?(vn=!1,La):Dt(Et,La,ms,ir)}),Et}function nn(mt,Dt){var Et=mt.length;for(mt.sort(Dt);Et--;)mt[Et]=mt[Et].value;return mt}function Va(mt,Dt){for(var Et,vn=-1,jn=mt.length;++vn<jn;){var La=Dt(mt[vn]);La!==n&&(Et=Et===n?La:Et+La)}return Et}function Qr(mt,Dt){for(var Et=-1,vn=Array(mt);++Et<mt;)vn[Et]=Dt(Et);return vn}function _a(mt,Dt){return ya(Dt,function(Et){return[Et,mt[Et]]})}function fs(mt){return mt&&mt.slice(0,mI(mt)+1).replace(zn,"")}function za(mt){return function(Dt){return mt(Dt)}}function du(mt,Dt){return ya(Dt,function(Et){return mt[Et]})}function Os(mt,Dt){return mt.has(Dt)}function gA(mt,Dt){for(var Et=-1,vn=mt.length;++Et<vn&&hi(Dt,mt[Et],0)>-1;);return Et}function mm(mt,Dt){for(var Et=mt.length;Et--&&hi(Dt,mt[Et],0)>-1;);return Et}function oK(mt,Dt){for(var Et=mt.length,vn=0;Et--;)mt[Et]===Dt&&++vn;return vn}var iK=pt(fe),lK=pt(Wt);function uK(mt){return"\\"+It[mt]}function cK(mt,Dt){return mt==null?n:mt[Dt]}function vm(mt){return Mh.test(mt)}function dK(mt){return Zu.test(mt)}function AK(mt){for(var Dt,Et=[];!(Dt=mt.next()).done;)Et.push(Dt.value);return Et}function _b(mt){var Dt=-1,Et=Array(mt.size);return mt.forEach(function(vn,jn){Et[++Dt]=[jn,vn]}),Et}function fI(mt,Dt){return function(Et){return mt(Dt(Et))}}function ed(mt,Dt){for(var Et=-1,vn=mt.length,jn=0,La=[];++Et<vn;){var ms=mt[Et];(ms===Dt||ms===d)&&(mt[Et]=d,La[jn++]=Et)}return La}function t1(mt){var Dt=-1,Et=Array(mt.size);return mt.forEach(function(vn){Et[++Dt]=vn}),Et}function fK(mt){var Dt=-1,Et=Array(mt.size);return mt.forEach(function(vn){Et[++Dt]=[vn,vn]}),Et}function mK(mt,Dt,Et){for(var vn=Et-1,jn=mt.length;++vn<jn;)if(mt[vn]===Dt)return vn;return-1}function vK(mt,Dt,Et){for(var vn=Et+1;vn--;)if(mt[vn]===Dt)return vn;return vn}function hm(mt){return vm(mt)?pK(mt):Hi(mt)}function pl(mt){return vm(mt)?gK(mt):e1(mt)}function mI(mt){for(var Dt=mt.length;Dt--&&oa.test(mt.charAt(Dt)););return Dt}var hK=pt(jt);function pK(mt){for(var Dt=jo.lastIndex=0;jo.test(mt);)++Dt;return Dt}function gK(mt){return mt.match(jo)||[]}function yK(mt){return mt.match(Lh)||[]}var _K=(function mt(Dt){Dt=Dt==null?Yn:pm.defaults(Yn.Object(),Dt,pm.pick(Yn,Yc));var Et=Dt.Array,vn=Dt.Date,jn=Dt.Error,La=Dt.Function,ms=Dt.Math,ir=Dt.Object,wb=Dt.RegExp,wK=Dt.String,$i=Dt.TypeError,n1=Et.prototype,bK=La.prototype,gm=ir.prototype,a1=Dt["__core-js_shared__"],r1=bK.toString,Za=gm.hasOwnProperty,xK=0,vI=(function(){var _=/[^.]+$/.exec(a1&&a1.keys&&a1.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""})(),s1=gm.toString,CK=r1.call(ir),SK=Yn._,EK=wb("^"+r1.call(Za).replace(gn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),o1=Xc?Dt.Buffer:n,td=Dt.Symbol,i1=Dt.Uint8Array,hI=o1?o1.allocUnsafe:n,l1=fI(ir.getPrototypeOf,ir),pI=ir.create,gI=gm.propertyIsEnumerable,u1=n1.splice,yI=td?td.isConcatSpreadable:n,Hh=td?td.iterator:n,yA=td?td.toStringTag:n,c1=(function(){try{var _=CA(ir,"defineProperty");return _({},"",{}),_}catch{}})(),BK=Dt.clearTimeout!==Yn.clearTimeout&&Dt.clearTimeout,kK=vn&&vn.now!==Yn.Date.now&&vn.now,TK=Dt.setTimeout!==Yn.setTimeout&&Dt.setTimeout,d1=ms.ceil,A1=ms.floor,bb=ir.getOwnPropertySymbols,IK=o1?o1.isBuffer:n,_I=Dt.isFinite,FK=n1.join,PK=fI(ir.keys,ir),vs=ms.max,eo=ms.min,DK=vn.now,UK=Dt.parseInt,wI=ms.random,RK=n1.reverse,xb=CA(Dt,"DataView"),$h=CA(Dt,"Map"),Cb=CA(Dt,"Promise"),ym=CA(Dt,"Set"),Qh=CA(Dt,"WeakMap"),Gh=CA(ir,"create"),f1=Qh&&new Qh,_m={},NK=SA(xb),VK=SA($h),LK=SA(Cb),MK=SA(ym),OK=SA(Qh),m1=td?td.prototype:n,zh=m1?m1.valueOf:n,bI=m1?m1.toString:n;function Ne(_){if(Ur(_)&&!Xn(_)&&!(_ instanceof Aa)){if(_ instanceof Qi)return _;if(Za.call(_,"__wrapped__"))return xF(_)}return new Qi(_)}var wm=(function(){function _(){}return function(B){if(!kr(B))return{};if(pI)return pI(B);_.prototype=B;var W=new _;return _.prototype=n,W}})();function v1(){}function Qi(_,B){this.__wrapped__=_,this.__actions__=[],this.__chain__=!!B,this.__index__=0,this.__values__=n}Ne.templateSettings={escape:Ze,evaluate:Ge,interpolate:xt,variable:"",imports:{_:Ne}},Ne.prototype=v1.prototype,Ne.prototype.constructor=Ne,Qi.prototype=wm(v1.prototype),Qi.prototype.constructor=Qi;function Aa(_){this.__wrapped__=_,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=te,this.__views__=[]}function HK(){var _=new Aa(this.__wrapped__);return _.__actions__=Zo(this.__actions__),_.__dir__=this.__dir__,_.__filtered__=this.__filtered__,_.__iteratees__=Zo(this.__iteratees__),_.__takeCount__=this.__takeCount__,_.__views__=Zo(this.__views__),_}function $K(){if(this.__filtered__){var _=new Aa(this);_.__dir__=-1,_.__filtered__=!0}else _=this.clone(),_.__dir__*=-1;return _}function QK(){var _=this.__wrapped__.value(),B=this.__dir__,W=Xn(_),he=B<0,Ee=W?_.length:0,He=tj(0,Ee,this.__views__),tt=He.start,ot=He.end,ht=ot-tt,Mt=he?ot:tt-1,Ot=this.__iteratees__,Gt=Ot.length,sn=0,bn=eo(ht,this.__takeCount__);if(!W||!he&&Ee==ht&&bn==ht)return KI(_,this.__actions__);var Pn=[];e:for(;ht--&&sn<bn;){Mt+=B;for(var sa=-1,Dn=_[Mt];++sa<Gt;){var ca=Ot[sa],ha=ca.iteratee,yi=ca.type,Fo=ha(Dn);if(yi==Ae)Dn=Fo;else if(!Fo){if(yi==ie)continue e;break e}}Pn[sn++]=Dn}return Pn}Aa.prototype=wm(v1.prototype),Aa.prototype.constructor=Aa;function _A(_){var B=-1,W=_==null?0:_.length;for(this.clear();++B<W;){var he=_[B];this.set(he[0],he[1])}}function GK(){this.__data__=Gh?Gh(null):{},this.size=0}function zK(_){var B=this.has(_)&&delete this.__data__[_];return this.size-=B?1:0,B}function KK(_){var B=this.__data__;if(Gh){var W=B[_];return W===c?n:W}return Za.call(B,_)?B[_]:n}function WK(_){var B=this.__data__;return Gh?B[_]!==n:Za.call(B,_)}function jK(_,B){var W=this.__data__;return this.size+=this.has(_)?0:1,W[_]=Gh&&B===n?c:B,this}_A.prototype.clear=GK,_A.prototype.delete=zK,_A.prototype.get=KK,_A.prototype.has=WK,_A.prototype.set=jK;function tc(_){var B=-1,W=_==null?0:_.length;for(this.clear();++B<W;){var he=_[B];this.set(he[0],he[1])}}function qK(){this.__data__=[],this.size=0}function YK(_){var B=this.__data__,W=h1(B,_);if(W<0)return!1;var he=B.length-1;return W==he?B.pop():u1.call(B,W,1),--this.size,!0}function XK(_){var B=this.__data__,W=h1(B,_);return W<0?n:B[W][1]}function JK(_){return h1(this.__data__,_)>-1}function ZK(_,B){var W=this.__data__,he=h1(W,_);return he<0?(++this.size,W.push([_,B])):W[he][1]=B,this}tc.prototype.clear=qK,tc.prototype.delete=YK,tc.prototype.get=XK,tc.prototype.has=JK,tc.prototype.set=ZK;function nc(_){var B=-1,W=_==null?0:_.length;for(this.clear();++B<W;){var he=_[B];this.set(he[0],he[1])}}function eW(){this.size=0,this.__data__={hash:new _A,map:new($h||tc),string:new _A}}function tW(_){var B=k1(this,_).delete(_);return this.size-=B?1:0,B}function nW(_){return k1(this,_).get(_)}function aW(_){return k1(this,_).has(_)}function rW(_,B){var W=k1(this,_),he=W.size;return W.set(_,B),this.size+=W.size==he?0:1,this}nc.prototype.clear=eW,nc.prototype.delete=tW,nc.prototype.get=nW,nc.prototype.has=aW,nc.prototype.set=rW;function wA(_){var B=-1,W=_==null?0:_.length;for(this.__data__=new nc;++B<W;)this.add(_[B])}function sW(_){return this.__data__.set(_,c),this}function oW(_){return this.__data__.has(_)}wA.prototype.add=wA.prototype.push=sW,wA.prototype.has=oW;function gl(_){var B=this.__data__=new tc(_);this.size=B.size}function iW(){this.__data__=new tc,this.size=0}function lW(_){var B=this.__data__,W=B.delete(_);return this.size=B.size,W}function uW(_){return this.__data__.get(_)}function cW(_){return this.__data__.has(_)}function dW(_,B){var W=this.__data__;if(W instanceof tc){var he=W.__data__;if(!$h||he.length<r-1)return he.push([_,B]),this.size=++W.size,this;W=this.__data__=new nc(he)}return W.set(_,B),this.size=W.size,this}gl.prototype.clear=iW,gl.prototype.delete=lW,gl.prototype.get=uW,gl.prototype.has=cW,gl.prototype.set=dW;function xI(_,B){var W=Xn(_),he=!W&&EA(_),Ee=!W&&!he&&od(_),He=!W&&!he&&!Ee&&Sm(_),tt=W||he||Ee||He,ot=tt?Qr(_.length,wK):[],ht=ot.length;for(var Mt in _)(B||Za.call(_,Mt))&&!(tt&&(Mt=="length"||Ee&&(Mt=="offset"||Mt=="parent")||He&&(Mt=="buffer"||Mt=="byteLength"||Mt=="byteOffset")||oc(Mt,ht)))&&ot.push(Mt);return ot}function CI(_){var B=_.length;return B?_[Rb(0,B-1)]:n}function AW(_,B){return T1(Zo(_),bA(B,0,_.length))}function fW(_){return T1(Zo(_))}function Sb(_,B,W){(W!==n&&!yl(_[B],W)||W===n&&!(B in _))&&ac(_,B,W)}function Kh(_,B,W){var he=_[B];(!(Za.call(_,B)&&yl(he,W))||W===n&&!(B in _))&&ac(_,B,W)}function h1(_,B){for(var W=_.length;W--;)if(yl(_[W][0],B))return W;return-1}function mW(_,B,W,he){return nd(_,function(Ee,He,tt){B(he,Ee,W(Ee),tt)}),he}function SI(_,B){return _&&fu(B,Is(B),_)}function vW(_,B){return _&&fu(B,ti(B),_)}function ac(_,B,W){B=="__proto__"&&c1?c1(_,B,{configurable:!0,enumerable:!0,value:W,writable:!0}):_[B]=W}function Eb(_,B){for(var W=-1,he=B.length,Ee=Et(he),He=_==null;++W<he;)Ee[W]=He?n:ox(_,B[W]);return Ee}function bA(_,B,W){return _===_&&(W!==n&&(_=_<=W?_:W),B!==n&&(_=_>=B?_:B)),_}function Gi(_,B,W,he,Ee,He){var tt,ot=B&f,ht=B&m,Mt=B&h;if(W&&(tt=Ee?W(_,he,Ee,He):W(_)),tt!==n)return tt;if(!kr(_))return _;var Ot=Xn(_);if(Ot){if(tt=aj(_),!ot)return Zo(_,tt)}else{var Gt=to(_),sn=Gt==G||Gt==Z;if(od(_))return qI(_,ot);if(Gt==ye||Gt==Q||sn&&!Ee){if(tt=ht||sn?{}:mF(_),!ot)return ht?KW(_,vW(tt,_)):zW(_,SI(tt,_))}else{if(!Ie[Gt])return Ee?_:{};tt=rj(_,Gt,ot)}}He||(He=new gl);var bn=He.get(_);if(bn)return bn;He.set(_,tt),QF(_)?_.forEach(function(Dn){tt.add(Gi(Dn,B,W,Dn,_,He))}):HF(_)&&_.forEach(function(Dn,ca){tt.set(ca,Gi(Dn,B,W,ca,_,He))});var Pn=Mt?ht?Kb:zb:ht?ti:Is,sa=Ot?n:Pn(_);return Br(sa||_,function(Dn,ca){sa&&(ca=Dn,Dn=_[ca]),Kh(tt,ca,Gi(Dn,B,W,ca,_,He))}),tt}function hW(_){var B=Is(_);return function(W){return EI(W,_,B)}}function EI(_,B,W){var he=W.length;if(_==null)return!he;for(_=ir(_);he--;){var Ee=W[he],He=B[Ee],tt=_[Ee];if(tt===n&&!(Ee in _)||!He(tt))return!1}return!0}function BI(_,B,W){if(typeof _!="function")throw new $i(o);return Zh(function(){_.apply(n,W)},B)}function Wh(_,B,W,he){var Ee=-1,He=ec,tt=!0,ot=_.length,ht=[],Mt=B.length;if(!ot)return ht;W&&(B=ya(B,za(W))),he?(He=Ms,tt=!1):B.length>=r&&(He=Os,tt=!1,B=new wA(B));e:for(;++Ee<ot;){var Ot=_[Ee],Gt=W==null?Ot:W(Ot);if(Ot=he||Ot!==0?Ot:0,tt&&Gt===Gt){for(var sn=Mt;sn--;)if(B[sn]===Gt)continue e;ht.push(Ot)}else He(B,Gt,he)||ht.push(Ot)}return ht}var nd=eF(Au),kI=eF(kb,!0);function pW(_,B){var W=!0;return nd(_,function(he,Ee,He){return W=!!B(he,Ee,He),W}),W}function p1(_,B,W){for(var he=-1,Ee=_.length;++he<Ee;){var He=_[he],tt=B(He);if(tt!=null&&(ot===n?tt===tt&&!gi(tt):W(tt,ot)))var ot=tt,ht=He}return ht}function gW(_,B,W,he){var Ee=_.length;for(W=aa(W),W<0&&(W=-W>Ee?0:Ee+W),he=he===n||he>Ee?Ee:aa(he),he<0&&(he+=Ee),he=W>he?0:zF(he);W<he;)_[W++]=B;return _}function TI(_,B){var W=[];return nd(_,function(he,Ee,He){B(he,Ee,He)&&W.push(he)}),W}function Hs(_,B,W,he,Ee){var He=-1,tt=_.length;for(W||(W=oj),Ee||(Ee=[]);++He<tt;){var ot=_[He];B>0&&W(ot)?B>1?Hs(ot,B-1,W,he,Ee):Xo(Ee,ot):he||(Ee[Ee.length]=ot)}return Ee}var Bb=tF(),II=tF(!0);function Au(_,B){return _&&Bb(_,B,Is)}function kb(_,B){return _&&II(_,B,Is)}function g1(_,B){return Yo(B,function(W){return ic(_[W])})}function xA(_,B){B=rd(B,_);for(var W=0,he=B.length;_!=null&&W<he;)_=_[mu(B[W++])];return W&&W==he?_:n}function FI(_,B,W){var he=B(_);return Xn(_)?he:Xo(he,W(_))}function To(_){return _==null?_===n?et:Pe:yA&&yA in ir(_)?ej(_):fj(_)}function Tb(_,B){return _>B}function yW(_,B){return _!=null&&Za.call(_,B)}function _W(_,B){return _!=null&&B in ir(_)}function wW(_,B,W){return _>=eo(B,W)&&_<vs(B,W)}function Ib(_,B,W){for(var he=W?Ms:ec,Ee=_[0].length,He=_.length,tt=He,ot=Et(He),ht=1/0,Mt=[];tt--;){var Ot=_[tt];tt&&B&&(Ot=ya(Ot,za(B))),ht=eo(Ot.length,ht),ot[tt]=!W&&(B||Ee>=120&&Ot.length>=120)?new wA(tt&&Ot):n}Ot=_[0];var Gt=-1,sn=ot[0];e:for(;++Gt<Ee&&Mt.length<ht;){var bn=Ot[Gt],Pn=B?B(bn):bn;if(bn=W||bn!==0?bn:0,!(sn?Os(sn,Pn):he(Mt,Pn,W))){for(tt=He;--tt;){var sa=ot[tt];if(!(sa?Os(sa,Pn):he(_[tt],Pn,W)))continue e}sn&&sn.push(Pn),Mt.push(bn)}}return Mt}function bW(_,B,W,he){return Au(_,function(Ee,He,tt){B(he,W(Ee),He,tt)}),he}function jh(_,B,W){B=rd(B,_),_=gF(_,B);var he=_==null?_:_[mu(Ki(B))];return he==null?n:As(he,_,W)}function PI(_){return Ur(_)&&To(_)==Q}function xW(_){return Ur(_)&&To(_)==Le}function CW(_){return Ur(_)&&To(_)==le}function qh(_,B,W,he,Ee){return _===B?!0:_==null||B==null||!Ur(_)&&!Ur(B)?_!==_&&B!==B:SW(_,B,W,he,qh,Ee)}function SW(_,B,W,he,Ee,He){var tt=Xn(_),ot=Xn(B),ht=tt?ee:to(_),Mt=ot?ee:to(B);ht=ht==Q?ye:ht,Mt=Mt==Q?ye:Mt;var Ot=ht==ye,Gt=Mt==ye,sn=ht==Mt;if(sn&&od(_)){if(!od(B))return!1;tt=!0,Ot=!1}if(sn&&!Ot)return He||(He=new gl),tt||Sm(_)?dF(_,B,W,he,Ee,He):JW(_,B,ht,W,he,Ee,He);if(!(W&p)){var bn=Ot&&Za.call(_,"__wrapped__"),Pn=Gt&&Za.call(B,"__wrapped__");if(bn||Pn){var sa=bn?_.value():_,Dn=Pn?B.value():B;return He||(He=new gl),Ee(sa,Dn,W,he,He)}}return sn?(He||(He=new gl),ZW(_,B,W,he,Ee,He)):!1}function EW(_){return Ur(_)&&to(_)==ce}function Fb(_,B,W,he){var Ee=W.length,He=Ee,tt=!he;if(_==null)return!He;for(_=ir(_);Ee--;){var ot=W[Ee];if(tt&&ot[2]?ot[1]!==_[ot[0]]:!(ot[0]in _))return!1}for(;++Ee<He;){ot=W[Ee];var ht=ot[0],Mt=_[ht],Ot=ot[1];if(tt&&ot[2]){if(Mt===n&&!(ht in _))return!1}else{var Gt=new gl;if(he)var sn=he(Mt,Ot,ht,_,B,Gt);if(!(sn===n?qh(Ot,Mt,p|y,he,Gt):sn))return!1}}return!0}function DI(_){if(!kr(_)||lj(_))return!1;var B=ic(_)?EK:Fe;return B.test(SA(_))}function BW(_){return Ur(_)&&To(_)==De}function kW(_){return Ur(_)&&to(_)==xe}function TW(_){return Ur(_)&&R1(_.length)&&!!Ta[To(_)]}function UI(_){return typeof _=="function"?_:_==null?ni:typeof _=="object"?Xn(_)?VI(_[0],_[1]):NI(_):nP(_)}function Pb(_){if(!Jh(_))return PK(_);var B=[];for(var W in ir(_))Za.call(_,W)&&W!="constructor"&&B.push(W);return B}function IW(_){if(!kr(_))return Aj(_);var B=Jh(_),W=[];for(var he in _)he=="constructor"&&(B||!Za.call(_,he))||W.push(he);return W}function Db(_,B){return _<B}function RI(_,B){var W=-1,he=ei(_)?Et(_.length):[];return nd(_,function(Ee,He,tt){he[++W]=B(Ee,He,tt)}),he}function NI(_){var B=jb(_);return B.length==1&&B[0][2]?hF(B[0][0],B[0][1]):function(W){return W===_||Fb(W,_,B)}}function VI(_,B){return Yb(_)&&vF(B)?hF(mu(_),B):function(W){var he=ox(W,_);return he===n&&he===B?ix(W,_):qh(B,he,p|y)}}function y1(_,B,W,he,Ee){_!==B&&Bb(B,function(He,tt){if(Ee||(Ee=new gl),kr(He))FW(_,B,tt,W,y1,he,Ee);else{var ot=he?he(Jb(_,tt),He,tt+"",_,B,Ee):n;ot===n&&(ot=He),Sb(_,tt,ot)}},ti)}function FW(_,B,W,he,Ee,He,tt){var ot=Jb(_,W),ht=Jb(B,W),Mt=tt.get(ht);if(Mt){Sb(_,W,Mt);return}var Ot=He?He(ot,ht,W+"",_,B,tt):n,Gt=Ot===n;if(Gt){var sn=Xn(ht),bn=!sn&&od(ht),Pn=!sn&&!bn&&Sm(ht);Ot=ht,sn||bn||Pn?Xn(ot)?Ot=ot:Gr(ot)?Ot=Zo(ot):bn?(Gt=!1,Ot=qI(ht,!0)):Pn?(Gt=!1,Ot=YI(ht,!0)):Ot=[]:ep(ht)||EA(ht)?(Ot=ot,EA(ot)?Ot=KF(ot):(!kr(ot)||ic(ot))&&(Ot=mF(ht))):Gt=!1}Gt&&(tt.set(ht,Ot),Ee(Ot,ht,he,He,tt),tt.delete(ht)),Sb(_,W,Ot)}function LI(_,B){var W=_.length;if(W)return B+=B<0?W:0,oc(B,W)?_[B]:n}function MI(_,B,W){B.length?B=ya(B,function(He){return Xn(He)?function(tt){return xA(tt,He.length===1?He[0]:He)}:He}):B=[ni];var he=-1;B=ya(B,za(In()));var Ee=RI(_,function(He,tt,ot){var ht=ya(B,function(Mt){return Mt(He)});return{criteria:ht,index:++he,value:He}});return nn(Ee,function(He,tt){return GW(He,tt,W)})}function PW(_,B){return OI(_,B,function(W,he){return ix(_,he)})}function OI(_,B,W){for(var he=-1,Ee=B.length,He={};++he<Ee;){var tt=B[he],ot=xA(_,tt);W(ot,tt)&&Yh(He,rd(tt,_),ot)}return He}function DW(_){return function(B){return xA(B,_)}}function Ub(_,B,W,he){var Ee=he?R:hi,He=-1,tt=B.length,ot=_;for(_===B&&(B=Zo(B)),W&&(ot=ya(_,za(W)));++He<tt;)for(var ht=0,Mt=B[He],Ot=W?W(Mt):Mt;(ht=Ee(ot,Ot,ht,he))>-1;)ot!==_&&u1.call(ot,ht,1),u1.call(_,ht,1);return _}function HI(_,B){for(var W=_?B.length:0,he=W-1;W--;){var Ee=B[W];if(W==he||Ee!==He){var He=Ee;oc(Ee)?u1.call(_,Ee,1):Lb(_,Ee)}}return _}function Rb(_,B){return _+A1(wI()*(B-_+1))}function UW(_,B,W,he){for(var Ee=-1,He=vs(d1((B-_)/(W||1)),0),tt=Et(He);He--;)tt[he?He:++Ee]=_,_+=W;return tt}function Nb(_,B){var W="";if(!_||B<1||B>ue)return W;do B%2&&(W+=_),B=A1(B/2),B&&(_+=_);while(B);return W}function ia(_,B){return Zb(pF(_,B,ni),_+"")}function RW(_){return CI(Em(_))}function NW(_,B){var W=Em(_);return T1(W,bA(B,0,W.length))}function Yh(_,B,W,he){if(!kr(_))return _;B=rd(B,_);for(var Ee=-1,He=B.length,tt=He-1,ot=_;ot!=null&&++Ee<He;){var ht=mu(B[Ee]),Mt=W;if(ht==="__proto__"||ht==="constructor"||ht==="prototype")return _;if(Ee!=tt){var Ot=ot[ht];Mt=he?he(Ot,ht,ot):n,Mt===n&&(Mt=kr(Ot)?Ot:oc(B[Ee+1])?[]:{})}Kh(ot,ht,Mt),ot=ot[ht]}return _}var $I=f1?function(_,B){return f1.set(_,B),_}:ni,VW=c1?function(_,B){return c1(_,"toString",{configurable:!0,enumerable:!1,value:ux(B),writable:!0})}:ni;function LW(_){return T1(Em(_))}function zi(_,B,W){var he=-1,Ee=_.length;B<0&&(B=-B>Ee?0:Ee+B),W=W>Ee?Ee:W,W<0&&(W+=Ee),Ee=B>W?0:W-B>>>0,B>>>=0;for(var He=Et(Ee);++he<Ee;)He[he]=_[he+B];return He}function MW(_,B){var W;return nd(_,function(he,Ee,He){return W=B(he,Ee,He),!W}),!!W}function _1(_,B,W){var he=0,Ee=_==null?he:_.length;if(typeof B=="number"&&B===B&&Ee<=N){for(;he<Ee;){var He=he+Ee>>>1,tt=_[He];tt!==null&&!gi(tt)&&(W?tt<=B:tt<B)?he=He+1:Ee=He}return Ee}return Vb(_,B,ni,W)}function Vb(_,B,W,he){var Ee=0,He=_==null?0:_.length;if(He===0)return 0;B=W(B);for(var tt=B!==B,ot=B===null,ht=gi(B),Mt=B===n;Ee<He;){var Ot=A1((Ee+He)/2),Gt=W(_[Ot]),sn=Gt!==n,bn=Gt===null,Pn=Gt===Gt,sa=gi(Gt);if(tt)var Dn=he||Pn;else Mt?Dn=Pn&&(he||sn):ot?Dn=Pn&&sn&&(he||!bn):ht?Dn=Pn&&sn&&!bn&&(he||!sa):bn||sa?Dn=!1:Dn=he?Gt<=B:Gt<B;Dn?Ee=Ot+1:He=Ot}return eo(He,L)}function QI(_,B){for(var W=-1,he=_.length,Ee=0,He=[];++W<he;){var tt=_[W],ot=B?B(tt):tt;if(!W||!yl(ot,ht)){var ht=ot;He[Ee++]=tt===0?0:tt}}return He}function GI(_){return typeof _=="number"?_:gi(_)?Y:+_}function pi(_){if(typeof _=="string")return _;if(Xn(_))return ya(_,pi)+"";if(gi(_))return bI?bI.call(_):"";var B=_+"";return B=="0"&&1/_==-J?"-0":B}function ad(_,B,W){var he=-1,Ee=ec,He=_.length,tt=!0,ot=[],ht=ot;if(W)tt=!1,Ee=Ms;else if(He>=r){var Mt=B?null:YW(_);if(Mt)return t1(Mt);tt=!1,Ee=Os,ht=new wA}else ht=B?[]:ot;e:for(;++he<He;){var Ot=_[he],Gt=B?B(Ot):Ot;if(Ot=W||Ot!==0?Ot:0,tt&&Gt===Gt){for(var sn=ht.length;sn--;)if(ht[sn]===Gt)continue e;B&&ht.push(Gt),ot.push(Ot)}else Ee(ht,Gt,W)||(ht!==ot&&ht.push(Gt),ot.push(Ot))}return ot}function Lb(_,B){return B=rd(B,_),_=gF(_,B),_==null||delete _[mu(Ki(B))]}function zI(_,B,W,he){return Yh(_,B,W(xA(_,B)),he)}function w1(_,B,W,he){for(var Ee=_.length,He=he?Ee:-1;(he?He--:++He<Ee)&&B(_[He],He,_););return W?zi(_,he?0:He,he?He+1:Ee):zi(_,he?He+1:0,he?Ee:He)}function KI(_,B){var W=_;return W instanceof Aa&&(W=W.value()),vi(B,function(he,Ee){return Ee.func.apply(Ee.thisArg,Xo([he],Ee.args))},W)}function Mb(_,B,W){var he=_.length;if(he<2)return he?ad(_[0]):[];for(var Ee=-1,He=Et(he);++Ee<he;)for(var tt=_[Ee],ot=-1;++ot<he;)ot!=Ee&&(He[Ee]=Wh(He[Ee]||tt,_[ot],B,W));return ad(Hs(He,1),B,W)}function WI(_,B,W){for(var he=-1,Ee=_.length,He=B.length,tt={};++he<Ee;){var ot=he<He?B[he]:n;W(tt,_[he],ot)}return tt}function Ob(_){return Gr(_)?_:[]}function Hb(_){return typeof _=="function"?_:ni}function rd(_,B){return Xn(_)?_:Yb(_,B)?[_]:bF(Ka(_))}var OW=ia;function sd(_,B,W){var he=_.length;return W=W===n?he:W,!B&&W>=he?_:zi(_,B,W)}var jI=BK||function(_){return Yn.clearTimeout(_)};function qI(_,B){if(B)return _.slice();var W=_.length,he=hI?hI(W):new _.constructor(W);return _.copy(he),he}function $b(_){var B=new _.constructor(_.byteLength);return new i1(B).set(new i1(_)),B}function HW(_,B){var W=B?$b(_.buffer):_.buffer;return new _.constructor(W,_.byteOffset,_.byteLength)}function $W(_){var B=new _.constructor(_.source,oe.exec(_));return B.lastIndex=_.lastIndex,B}function QW(_){return zh?ir(zh.call(_)):{}}function YI(_,B){var W=B?$b(_.buffer):_.buffer;return new _.constructor(W,_.byteOffset,_.length)}function XI(_,B){if(_!==B){var W=_!==n,he=_===null,Ee=_===_,He=gi(_),tt=B!==n,ot=B===null,ht=B===B,Mt=gi(B);if(!ot&&!Mt&&!He&&_>B||He&&tt&&ht&&!ot&&!Mt||he&&tt&&ht||!W&&ht||!Ee)return 1;if(!he&&!He&&!Mt&&_<B||Mt&&W&&Ee&&!he&&!He||ot&&W&&Ee||!tt&&Ee||!ht)return-1}return 0}function GW(_,B,W){for(var he=-1,Ee=_.criteria,He=B.criteria,tt=Ee.length,ot=W.length;++he<tt;){var ht=XI(Ee[he],He[he]);if(ht){if(he>=ot)return ht;var Mt=W[he];return ht*(Mt=="desc"?-1:1)}}return _.index-B.index}function JI(_,B,W,he){for(var Ee=-1,He=_.length,tt=W.length,ot=-1,ht=B.length,Mt=vs(He-tt,0),Ot=Et(ht+Mt),Gt=!he;++ot<ht;)Ot[ot]=B[ot];for(;++Ee<tt;)(Gt||Ee<He)&&(Ot[W[Ee]]=_[Ee]);for(;Mt--;)Ot[ot++]=_[Ee++];return Ot}function ZI(_,B,W,he){for(var Ee=-1,He=_.length,tt=-1,ot=W.length,ht=-1,Mt=B.length,Ot=vs(He-ot,0),Gt=Et(Ot+Mt),sn=!he;++Ee<Ot;)Gt[Ee]=_[Ee];for(var bn=Ee;++ht<Mt;)Gt[bn+ht]=B[ht];for(;++tt<ot;)(sn||Ee<He)&&(Gt[bn+W[tt]]=_[Ee++]);return Gt}function Zo(_,B){var W=-1,he=_.length;for(B||(B=Et(he));++W<he;)B[W]=_[W];return B}function fu(_,B,W,he){var Ee=!W;W||(W={});for(var He=-1,tt=B.length;++He<tt;){var ot=B[He],ht=he?he(W[ot],_[ot],ot,W,_):n;ht===n&&(ht=_[ot]),Ee?ac(W,ot,ht):Kh(W,ot,ht)}return W}function zW(_,B){return fu(_,qb(_),B)}function KW(_,B){return fu(_,AF(_),B)}function b1(_,B){return function(W,he){var Ee=Xn(W)?mi:mW,He=B?B():{};return Ee(W,_,In(he,2),He)}}function bm(_){return ia(function(B,W){var he=-1,Ee=W.length,He=Ee>1?W[Ee-1]:n,tt=Ee>2?W[2]:n;for(He=_.length>3&&typeof He=="function"?(Ee--,He):n,tt&&Io(W[0],W[1],tt)&&(He=Ee<3?n:He,Ee=1),B=ir(B);++he<Ee;){var ot=W[he];ot&&_(B,ot,he,He)}return B})}function eF(_,B){return function(W,he){if(W==null)return W;if(!ei(W))return _(W,he);for(var Ee=W.length,He=B?Ee:-1,tt=ir(W);(B?He--:++He<Ee)&&he(tt[He],He,tt)!==!1;);return W}}function tF(_){return function(B,W,he){for(var Ee=-1,He=ir(B),tt=he(B),ot=tt.length;ot--;){var ht=tt[_?ot:++Ee];if(W(He[ht],ht,He)===!1)break}return B}}function WW(_,B,W){var he=B&g,Ee=Xh(_);function He(){var tt=this&&this!==Yn&&this instanceof He?Ee:_;return tt.apply(he?W:this,arguments)}return He}function nF(_){return function(B){B=Ka(B);var W=vm(B)?pl(B):n,he=W?W[0]:B.charAt(0),Ee=W?sd(W,1).join(""):B.slice(1);return he[_]()+Ee}}function xm(_){return function(B){return vi(eP(ZF(B).replace(Ju,"")),_,"")}}function Xh(_){return function(){var B=arguments;switch(B.length){case 0:return new _;case 1:return new _(B[0]);case 2:return new _(B[0],B[1]);case 3:return new _(B[0],B[1],B[2]);case 4:return new _(B[0],B[1],B[2],B[3]);case 5:return new _(B[0],B[1],B[2],B[3],B[4]);case 6:return new _(B[0],B[1],B[2],B[3],B[4],B[5]);case 7:return new _(B[0],B[1],B[2],B[3],B[4],B[5],B[6])}var W=wm(_.prototype),he=_.apply(W,B);return kr(he)?he:W}}function jW(_,B,W){var he=Xh(_);function Ee(){for(var He=arguments.length,tt=Et(He),ot=He,ht=Cm(Ee);ot--;)tt[ot]=arguments[ot];var Mt=He<3&&tt[0]!==ht&&tt[He-1]!==ht?[]:ed(tt,ht);if(He-=Mt.length,He<W)return iF(_,B,x1,Ee.placeholder,n,tt,Mt,n,n,W-He);var Ot=this&&this!==Yn&&this instanceof Ee?he:_;return As(Ot,this,tt)}return Ee}function aF(_){return function(B,W,he){var Ee=ir(B);if(!ei(B)){var He=In(W,3);B=Is(B),W=function(ot){return He(Ee[ot],ot,Ee)}}var tt=_(B,W,he);return tt>-1?Ee[He?B[tt]:tt]:n}}function rF(_){return sc(function(B){var W=B.length,he=W,Ee=Qi.prototype.thru;for(_&&B.reverse();he--;){var He=B[he];if(typeof He!="function")throw new $i(o);if(Ee&&!tt&&B1(He)=="wrapper")var tt=new Qi([],!0)}for(he=tt?he:W;++he<W;){He=B[he];var ot=B1(He),ht=ot=="wrapper"?Wb(He):n;ht&&Xb(ht[0])&&ht[1]==(S|x|F|E)&&!ht[4].length&&ht[9]==1?tt=tt[B1(ht[0])].apply(tt,ht[3]):tt=He.length==1&&Xb(He)?tt[ot]():tt.thru(He)}return function(){var Mt=arguments,Ot=Mt[0];if(tt&&Mt.length==1&&Xn(Ot))return tt.plant(Ot).value();for(var Gt=0,sn=W?B[Gt].apply(this,Mt):Ot;++Gt<W;)sn=B[Gt].call(this,sn);return sn}})}function x1(_,B,W,he,Ee,He,tt,ot,ht,Mt){var Ot=B&S,Gt=B&g,sn=B&w,bn=B&(x|T),Pn=B&C,sa=sn?n:Xh(_);function Dn(){for(var ca=arguments.length,ha=Et(ca),yi=ca;yi--;)ha[yi]=arguments[yi];if(bn)var Fo=Cm(Dn),_i=oK(ha,Fo);if(he&&(ha=JI(ha,he,Ee,bn)),He&&(ha=ZI(ha,He,tt,bn)),ca-=_i,bn&&ca<Mt){var zr=ed(ha,Fo);return iF(_,B,x1,Dn.placeholder,W,ha,zr,ot,ht,Mt-ca)}var _l=Gt?W:this,uc=sn?_l[_]:_;return ca=ha.length,ot?ha=mj(ha,ot):Pn&&ca>1&&ha.reverse(),Ot&&ht<ca&&(ha.length=ht),this&&this!==Yn&&this instanceof Dn&&(uc=sa||Xh(uc)),uc.apply(_l,ha)}return Dn}function sF(_,B){return function(W,he){return bW(W,_,B(he),{})}}function C1(_,B){return function(W,he){var Ee;if(W===n&&he===n)return B;if(W!==n&&(Ee=W),he!==n){if(Ee===n)return he;typeof W=="string"||typeof he=="string"?(W=pi(W),he=pi(he)):(W=GI(W),he=GI(he)),Ee=_(W,he)}return Ee}}function Qb(_){return sc(function(B){return B=ya(B,za(In())),ia(function(W){var he=this;return _(B,function(Ee){return As(Ee,he,W)})})})}function S1(_,B){B=B===n?" ":pi(B);var W=B.length;if(W<2)return W?Nb(B,_):B;var he=Nb(B,d1(_/hm(B)));return vm(B)?sd(pl(he),0,_).join(""):he.slice(0,_)}function qW(_,B,W,he){var Ee=B&g,He=Xh(_);function tt(){for(var ot=-1,ht=arguments.length,Mt=-1,Ot=he.length,Gt=Et(Ot+ht),sn=this&&this!==Yn&&this instanceof tt?He:_;++Mt<Ot;)Gt[Mt]=he[Mt];for(;ht--;)Gt[Mt++]=arguments[++ot];return As(sn,Ee?W:this,Gt)}return tt}function oF(_){return function(B,W,he){return he&&typeof he!="number"&&Io(B,W,he)&&(W=he=n),B=lc(B),W===n?(W=B,B=0):W=lc(W),he=he===n?B<W?1:-1:lc(he),UW(B,W,he,_)}}function E1(_){return function(B,W){return typeof B=="string"&&typeof W=="string"||(B=Wi(B),W=Wi(W)),_(B,W)}}function iF(_,B,W,he,Ee,He,tt,ot,ht,Mt){var Ot=B&x,Gt=Ot?tt:n,sn=Ot?n:tt,bn=Ot?He:n,Pn=Ot?n:He;B|=Ot?F:k,B&=~(Ot?k:F),B&b||(B&=-4);var sa=[_,B,Ee,bn,Gt,Pn,sn,ot,ht,Mt],Dn=W.apply(n,sa);return Xb(_)&&yF(Dn,sa),Dn.placeholder=he,_F(Dn,_,B)}function Gb(_){var B=ms[_];return function(W,he){if(W=Wi(W),he=he==null?0:eo(aa(he),292),he&&_I(W)){var Ee=(Ka(W)+"e").split("e"),He=B(Ee[0]+"e"+(+Ee[1]+he));return Ee=(Ka(He)+"e").split("e"),+(Ee[0]+"e"+(+Ee[1]-he))}return B(W)}}var YW=ym&&1/t1(new ym([,-0]))[1]==J?function(_){return new ym(_)}:Ax;function lF(_){return function(B){var W=to(B);return W==ce?_b(B):W==xe?fK(B):_a(B,_(B))}}function rc(_,B,W,he,Ee,He,tt,ot){var ht=B&w;if(!ht&&typeof _!="function")throw new $i(o);var Mt=he?he.length:0;if(Mt||(B&=-97,he=Ee=n),tt=tt===n?tt:vs(aa(tt),0),ot=ot===n?ot:aa(ot),Mt-=Ee?Ee.length:0,B&k){var Ot=he,Gt=Ee;he=Ee=n}var sn=ht?n:Wb(_),bn=[_,B,W,he,Ee,Ot,Gt,He,tt,ot];if(sn&&dj(bn,sn),_=bn[0],B=bn[1],W=bn[2],he=bn[3],Ee=bn[4],ot=bn[9]=bn[9]===n?ht?0:_.length:vs(bn[9]-Mt,0),!ot&&B&(x|T)&&(B&=-25),!B||B==g)var Pn=WW(_,B,W);else B==x||B==T?Pn=jW(_,B,ot):(B==F||B==(g|F))&&!Ee.length?Pn=qW(_,B,W,he):Pn=x1.apply(n,bn);var sa=sn?$I:yF;return _F(sa(Pn,bn),_,B)}function uF(_,B,W,he){return _===n||yl(_,gm[W])&&!Za.call(he,W)?B:_}function cF(_,B,W,he,Ee,He){return kr(_)&&kr(B)&&(He.set(B,_),y1(_,B,n,cF,He),He.delete(B)),_}function XW(_){return ep(_)?n:_}function dF(_,B,W,he,Ee,He){var tt=W&p,ot=_.length,ht=B.length;if(ot!=ht&&!(tt&&ht>ot))return!1;var Mt=He.get(_),Ot=He.get(B);if(Mt&&Ot)return Mt==B&&Ot==_;var Gt=-1,sn=!0,bn=W&y?new wA:n;for(He.set(_,B),He.set(B,_);++Gt<ot;){var Pn=_[Gt],sa=B[Gt];if(he)var Dn=tt?he(sa,Pn,Gt,B,_,He):he(Pn,sa,Gt,_,B,He);if(Dn!==n){if(Dn)continue;sn=!1;break}if(bn){if(!va(B,function(ca,ha){if(!Os(bn,ha)&&(Pn===ca||Ee(Pn,ca,W,he,He)))return bn.push(ha)})){sn=!1;break}}else if(!(Pn===sa||Ee(Pn,sa,W,he,He))){sn=!1;break}}return He.delete(_),He.delete(B),sn}function JW(_,B,W,he,Ee,He,tt){switch(W){case nt:if(_.byteLength!=B.byteLength||_.byteOffset!=B.byteOffset)return!1;_=_.buffer,B=B.buffer;case Le:return!(_.byteLength!=B.byteLength||!He(new i1(_),new i1(B)));case X:case le:case Se:return yl(+_,+B);case de:return _.name==B.name&&_.message==B.message;case De:case Te:return _==B+"";case ce:var ot=_b;case xe:var ht=he&p;if(ot||(ot=t1),_.size!=B.size&&!ht)return!1;var Mt=tt.get(_);if(Mt)return Mt==B;he|=y,tt.set(_,B);var Ot=dF(ot(_),ot(B),he,Ee,He,tt);return tt.delete(_),Ot;case Me:if(zh)return zh.call(_)==zh.call(B)}return!1}function ZW(_,B,W,he,Ee,He){var tt=W&p,ot=zb(_),ht=ot.length,Mt=zb(B),Ot=Mt.length;if(ht!=Ot&&!tt)return!1;for(var Gt=ht;Gt--;){var sn=ot[Gt];if(!(tt?sn in B:Za.call(B,sn)))return!1}var bn=He.get(_),Pn=He.get(B);if(bn&&Pn)return bn==B&&Pn==_;var sa=!0;He.set(_,B),He.set(B,_);for(var Dn=tt;++Gt<ht;){sn=ot[Gt];var ca=_[sn],ha=B[sn];if(he)var yi=tt?he(ha,ca,sn,B,_,He):he(ca,ha,sn,_,B,He);if(!(yi===n?ca===ha||Ee(ca,ha,W,he,He):yi)){sa=!1;break}Dn||(Dn=sn=="constructor")}if(sa&&!Dn){var Fo=_.constructor,_i=B.constructor;Fo!=_i&&"constructor"in _&&"constructor"in B&&!(typeof Fo=="function"&&Fo instanceof Fo&&typeof _i=="function"&&_i instanceof _i)&&(sa=!1)}return He.delete(_),He.delete(B),sa}function sc(_){return Zb(pF(_,n,EF),_+"")}function zb(_){return FI(_,Is,qb)}function Kb(_){return FI(_,ti,AF)}var Wb=f1?function(_){return f1.get(_)}:Ax;function B1(_){for(var B=_.name+"",W=_m[B],he=Za.call(_m,B)?W.length:0;he--;){var Ee=W[he],He=Ee.func;if(He==null||He==_)return Ee.name}return B}function Cm(_){var B=Za.call(Ne,"placeholder")?Ne:_;return B.placeholder}function In(){var _=Ne.iteratee||cx;return _=_===cx?UI:_,arguments.length?_(arguments[0],arguments[1]):_}function k1(_,B){var W=_.__data__;return ij(B)?W[typeof B=="string"?"string":"hash"]:W.map}function jb(_){for(var B=Is(_),W=B.length;W--;){var he=B[W],Ee=_[he];B[W]=[he,Ee,vF(Ee)]}return B}function CA(_,B){var W=cK(_,B);return DI(W)?W:n}function ej(_){var B=Za.call(_,yA),W=_[yA];try{_[yA]=n;var he=!0}catch{}var Ee=s1.call(_);return he&&(B?_[yA]=W:delete _[yA]),Ee}var qb=bb?function(_){return _==null?[]:(_=ir(_),Yo(bb(_),function(B){return gI.call(_,B)}))}:fx,AF=bb?function(_){for(var B=[];_;)Xo(B,qb(_)),_=l1(_);return B}:fx,to=To;(xb&&to(new xb(new ArrayBuffer(1)))!=nt||$h&&to(new $h)!=ce||Cb&&to(Cb.resolve())!=Ce||ym&&to(new ym)!=xe||Qh&&to(new Qh)!=lt)&&(to=function(_){var B=To(_),W=B==ye?_.constructor:n,he=W?SA(W):"";if(he)switch(he){case NK:return nt;case VK:return ce;case LK:return Ce;case MK:return xe;case OK:return lt}return B});function tj(_,B,W){for(var he=-1,Ee=W.length;++he<Ee;){var He=W[he],tt=He.size;switch(He.type){case"drop":_+=tt;break;case"dropRight":B-=tt;break;case"take":B=eo(B,_+tt);break;case"takeRight":_=vs(_,B-tt);break}}return{start:_,end:B}}function nj(_){var B=_.match(Be);return B?B[1].split(Qe):[]}function fF(_,B,W){B=rd(B,_);for(var he=-1,Ee=B.length,He=!1;++he<Ee;){var tt=mu(B[he]);if(!(He=_!=null&&W(_,tt)))break;_=_[tt]}return He||++he!=Ee?He:(Ee=_==null?0:_.length,!!Ee&&R1(Ee)&&oc(tt,Ee)&&(Xn(_)||EA(_)))}function aj(_){var B=_.length,W=new _.constructor(B);return B&&typeof _[0]=="string"&&Za.call(_,"index")&&(W.index=_.index,W.input=_.input),W}function mF(_){return typeof _.constructor=="function"&&!Jh(_)?wm(l1(_)):{}}function rj(_,B,W){var he=_.constructor;switch(B){case Le:return $b(_);case X:case le:return new he(+_);case nt:return HW(_,W);case Tt:case Pt:case Kt:case $t:case bt:case st:case Je:case Nt:case rn:return YI(_,W);case ce:return new he;case Se:case Te:return new he(_);case De:return $W(_);case xe:return new he;case Me:return QW(_)}}function sj(_,B){var W=B.length;if(!W)return _;var he=W-1;return B[he]=(W>1?"& ":"")+B[he],B=B.join(W>2?", ":" "),_.replace(Ra,`{
/* [wrapped with `+B+`] */
`)}function oj(_){return Xn(_)||EA(_)||!!(yI&&_&&_[yI])}function oc(_,B){var W=typeof _;return B=B??ue,!!B&&(W=="number"||W!="symbol"&&rt.test(_))&&_>-1&&_%1==0&&_<B}function Io(_,B,W){if(!kr(W))return!1;var he=typeof B;return(he=="number"?ei(W)&&oc(B,W.length):he=="string"&&B in W)?yl(W[B],_):!1}function Yb(_,B){if(Xn(_))return!1;var W=typeof _;return W=="number"||W=="symbol"||W=="boolean"||_==null||gi(_)?!0:Bt.test(_)||!gt.test(_)||B!=null&&_ in ir(B)}function ij(_){var B=typeof _;return B=="string"||B=="number"||B=="symbol"||B=="boolean"?_!=="__proto__":_===null}function Xb(_){var B=B1(_),W=Ne[B];if(typeof W!="function"||!(B in Aa.prototype))return!1;if(_===W)return!0;var he=Wb(W);return!!he&&_===he[0]}function lj(_){return!!vI&&vI in _}var uj=a1?ic:mx;function Jh(_){var B=_&&_.constructor,W=typeof B=="function"&&B.prototype||gm;return _===W}function vF(_){return _===_&&!kr(_)}function hF(_,B){return function(W){return W==null?!1:W[_]===B&&(B!==n||_ in ir(W))}}function cj(_){var B=D1(_,function(he){return W.size===A&&W.clear(),he}),W=B.cache;return B}function dj(_,B){var W=_[1],he=B[1],Ee=W|he,He=Ee<(g|w|S),tt=he==S&&W==x||he==S&&W==E&&_[7].length<=B[8]||he==(S|E)&&B[7].length<=B[8]&&W==x;if(!(He||tt))return _;he&g&&(_[2]=B[2],Ee|=W&g?0:b);var ot=B[3];if(ot){var ht=_[3];_[3]=ht?JI(ht,ot,B[4]):ot,_[4]=ht?ed(_[3],d):B[4]}return ot=B[5],ot&&(ht=_[5],_[5]=ht?ZI(ht,ot,B[6]):ot,_[6]=ht?ed(_[5],d):B[6]),ot=B[7],ot&&(_[7]=ot),he&S&&(_[8]=_[8]==null?B[8]:eo(_[8],B[8])),_[9]==null&&(_[9]=B[9]),_[0]=B[0],_[1]=Ee,_}function Aj(_){var B=[];if(_!=null)for(var W in ir(_))B.push(W);return B}function fj(_){return s1.call(_)}function pF(_,B,W){return B=vs(B===n?_.length-1:B,0),function(){for(var he=arguments,Ee=-1,He=vs(he.length-B,0),tt=Et(He);++Ee<He;)tt[Ee]=he[B+Ee];Ee=-1;for(var ot=Et(B+1);++Ee<B;)ot[Ee]=he[Ee];return ot[B]=W(tt),As(_,this,ot)}}function gF(_,B){return B.length<2?_:xA(_,zi(B,0,-1))}function mj(_,B){for(var W=_.length,he=eo(B.length,W),Ee=Zo(_);he--;){var He=B[he];_[he]=oc(He,W)?Ee[He]:n}return _}function Jb(_,B){if(!(B==="constructor"&&typeof _[B]=="function")&&B!="__proto__")return _[B]}var yF=wF($I),Zh=TK||function(_,B){return Yn.setTimeout(_,B)},Zb=wF(VW);function _F(_,B,W){var he=B+"";return Zb(_,sj(he,vj(nj(he),W)))}function wF(_){var B=0,W=0;return function(){var he=DK(),Ee=H-(he-W);if(W=he,Ee>0){if(++B>=O)return arguments[0]}else B=0;return _.apply(n,arguments)}}function T1(_,B){var W=-1,he=_.length,Ee=he-1;for(B=B===n?he:B;++W<B;){var He=Rb(W,Ee),tt=_[He];_[He]=_[W],_[W]=tt}return _.length=B,_}var bF=cj(function(_){var B=[];return _.charCodeAt(0)===46&&B.push(""),_.replace(wt,function(W,he,Ee,He){B.push(Ee?He.replace(ze,"$1"):he||W)}),B});function mu(_){if(typeof _=="string"||gi(_))return _;var B=_+"";return B=="0"&&1/_==-J?"-0":B}function SA(_){if(_!=null){try{return r1.call(_)}catch{}try{return _+""}catch{}}return""}function vj(_,B){return Br(q,function(W){var he="_."+W[0];B&W[1]&&!ec(_,he)&&_.push(he)}),_.sort()}function xF(_){if(_ instanceof Aa)return _.clone();var B=new Qi(_.__wrapped__,_.__chain__);return B.__actions__=Zo(_.__actions__),B.__index__=_.__index__,B.__values__=_.__values__,B}function hj(_,B,W){(W?Io(_,B,W):B===n)?B=1:B=vs(aa(B),0);var he=_==null?0:_.length;if(!he||B<1)return[];for(var Ee=0,He=0,tt=Et(d1(he/B));Ee<he;)tt[He++]=zi(_,Ee,Ee+=B);return tt}function pj(_){for(var B=-1,W=_==null?0:_.length,he=0,Ee=[];++B<W;){var He=_[B];He&&(Ee[he++]=He)}return Ee}function gj(){var _=arguments.length;if(!_)return[];for(var B=Et(_-1),W=arguments[0],he=_;he--;)B[he-1]=arguments[he];return Xo(Xn(W)?Zo(W):[W],Hs(B,1))}var yj=ia(function(_,B){return Gr(_)?Wh(_,Hs(B,1,Gr,!0)):[]}),_j=ia(function(_,B){var W=Ki(B);return Gr(W)&&(W=n),Gr(_)?Wh(_,Hs(B,1,Gr,!0),In(W,2)):[]}),wj=ia(function(_,B){var W=Ki(B);return Gr(W)&&(W=n),Gr(_)?Wh(_,Hs(B,1,Gr,!0),n,W):[]});function bj(_,B,W){var he=_==null?0:_.length;return he?(B=W||B===n?1:aa(B),zi(_,B<0?0:B,he)):[]}function xj(_,B,W){var he=_==null?0:_.length;return he?(B=W||B===n?1:aa(B),B=he-B,zi(_,0,B<0?0:B)):[]}function Cj(_,B){return _&&_.length?w1(_,In(B,3),!0,!0):[]}function Sj(_,B){return _&&_.length?w1(_,In(B,3),!0):[]}function Ej(_,B,W,he){var Ee=_==null?0:_.length;return Ee?(W&&typeof W!="number"&&Io(_,B,W)&&(W=0,he=Ee),gW(_,B,W,he)):[]}function CF(_,B,W){var he=_==null?0:_.length;if(!he)return-1;var Ee=W==null?0:aa(W);return Ee<0&&(Ee=vs(he+Ee,0)),pA(_,In(B,3),Ee)}function SF(_,B,W){var he=_==null?0:_.length;if(!he)return-1;var Ee=he-1;return W!==n&&(Ee=aa(W),Ee=W<0?vs(he+Ee,0):eo(Ee,he-1)),pA(_,In(B,3),Ee,!0)}function EF(_){var B=_==null?0:_.length;return B?Hs(_,1):[]}function Bj(_){var B=_==null?0:_.length;return B?Hs(_,J):[]}function kj(_,B){var W=_==null?0:_.length;return W?(B=B===n?1:aa(B),Hs(_,B)):[]}function Tj(_){for(var B=-1,W=_==null?0:_.length,he={};++B<W;){var Ee=_[B];he[Ee[0]]=Ee[1]}return he}function BF(_){return _&&_.length?_[0]:n}function Ij(_,B,W){var he=_==null?0:_.length;if(!he)return-1;var Ee=W==null?0:aa(W);return Ee<0&&(Ee=vs(he+Ee,0)),hi(_,B,Ee)}function Fj(_){var B=_==null?0:_.length;return B?zi(_,0,-1):[]}var Pj=ia(function(_){var B=ya(_,Ob);return B.length&&B[0]===_[0]?Ib(B):[]}),Dj=ia(function(_){var B=Ki(_),W=ya(_,Ob);return B===Ki(W)?B=n:W.pop(),W.length&&W[0]===_[0]?Ib(W,In(B,2)):[]}),Uj=ia(function(_){var B=Ki(_),W=ya(_,Ob);return B=typeof B=="function"?B:n,B&&W.pop(),W.length&&W[0]===_[0]?Ib(W,n,B):[]});function Rj(_,B){return _==null?"":FK.call(_,B)}function Ki(_){var B=_==null?0:_.length;return B?_[B-1]:n}function Nj(_,B,W){var he=_==null?0:_.length;if(!he)return-1;var Ee=he;return W!==n&&(Ee=aa(W),Ee=Ee<0?vs(he+Ee,0):eo(Ee,he-1)),B===B?vK(_,B,Ee):pA(_,ve,Ee,!0)}function Vj(_,B){return _&&_.length?LI(_,aa(B)):n}var Lj=ia(kF);function kF(_,B){return _&&_.length&&B&&B.length?Ub(_,B):_}function Mj(_,B,W){return _&&_.length&&B&&B.length?Ub(_,B,In(W,2)):_}function Oj(_,B,W){return _&&_.length&&B&&B.length?Ub(_,B,n,W):_}var Hj=sc(function(_,B){var W=_==null?0:_.length,he=Eb(_,B);return HI(_,ya(B,function(Ee){return oc(Ee,W)?+Ee:Ee}).sort(XI)),he});function $j(_,B){var W=[];if(!(_&&_.length))return W;var he=-1,Ee=[],He=_.length;for(B=In(B,3);++he<He;){var tt=_[he];B(tt,he,_)&&(W.push(tt),Ee.push(he))}return HI(_,Ee),W}function ex(_){return _==null?_:RK.call(_)}function Qj(_,B,W){var he=_==null?0:_.length;return he?(W&&typeof W!="number"&&Io(_,B,W)?(B=0,W=he):(B=B==null?0:aa(B),W=W===n?he:aa(W)),zi(_,B,W)):[]}function Gj(_,B){return _1(_,B)}function zj(_,B,W){return Vb(_,B,In(W,2))}function Kj(_,B){var W=_==null?0:_.length;if(W){var he=_1(_,B);if(he<W&&yl(_[he],B))return he}return-1}function Wj(_,B){return _1(_,B,!0)}function jj(_,B,W){return Vb(_,B,In(W,2),!0)}function qj(_,B){var W=_==null?0:_.length;if(W){var he=_1(_,B,!0)-1;if(yl(_[he],B))return he}return-1}function Yj(_){return _&&_.length?QI(_):[]}function Xj(_,B){return _&&_.length?QI(_,In(B,2)):[]}function Jj(_){var B=_==null?0:_.length;return B?zi(_,1,B):[]}function Zj(_,B,W){return _&&_.length?(B=W||B===n?1:aa(B),zi(_,0,B<0?0:B)):[]}function eq(_,B,W){var he=_==null?0:_.length;return he?(B=W||B===n?1:aa(B),B=he-B,zi(_,B<0?0:B,he)):[]}function tq(_,B){return _&&_.length?w1(_,In(B,3),!1,!0):[]}function nq(_,B){return _&&_.length?w1(_,In(B,3)):[]}var aq=ia(function(_){return ad(Hs(_,1,Gr,!0))}),rq=ia(function(_){var B=Ki(_);return Gr(B)&&(B=n),ad(Hs(_,1,Gr,!0),In(B,2))}),sq=ia(function(_){var B=Ki(_);return B=typeof B=="function"?B:n,ad(Hs(_,1,Gr,!0),n,B)});function oq(_){return _&&_.length?ad(_):[]}function iq(_,B){return _&&_.length?ad(_,In(B,2)):[]}function lq(_,B){return B=typeof B=="function"?B:n,_&&_.length?ad(_,n,B):[]}function tx(_){if(!(_&&_.length))return[];var B=0;return _=Yo(_,function(W){if(Gr(W))return B=vs(W.length,B),!0}),Qr(B,function(W){return ya(_,Oe(W))})}function TF(_,B){if(!(_&&_.length))return[];var W=tx(_);return B==null?W:ya(W,function(he){return As(B,n,he)})}var uq=ia(function(_,B){return Gr(_)?Wh(_,B):[]}),cq=ia(function(_){return Mb(Yo(_,Gr))}),dq=ia(function(_){var B=Ki(_);return Gr(B)&&(B=n),Mb(Yo(_,Gr),In(B,2))}),Aq=ia(function(_){var B=Ki(_);return B=typeof B=="function"?B:n,Mb(Yo(_,Gr),n,B)}),fq=ia(tx);function mq(_,B){return WI(_||[],B||[],Kh)}function vq(_,B){return WI(_||[],B||[],Yh)}var hq=ia(function(_){var B=_.length,W=B>1?_[B-1]:n;return W=typeof W=="function"?(_.pop(),W):n,TF(_,W)});function IF(_){var B=Ne(_);return B.__chain__=!0,B}function pq(_,B){return B(_),_}function I1(_,B){return B(_)}var gq=sc(function(_){var B=_.length,W=B?_[0]:0,he=this.__wrapped__,Ee=function(He){return Eb(He,_)};return B>1||this.__actions__.length||!(he instanceof Aa)||!oc(W)?this.thru(Ee):(he=he.slice(W,+W+(B?1:0)),he.__actions__.push({func:I1,args:[Ee],thisArg:n}),new Qi(he,this.__chain__).thru(function(He){return B&&!He.length&&He.push(n),He}))});function yq(){return IF(this)}function _q(){return new Qi(this.value(),this.__chain__)}function wq(){this.__values__===n&&(this.__values__=GF(this.value()));var _=this.__index__>=this.__values__.length,B=_?n:this.__values__[this.__index__++];return{done:_,value:B}}function bq(){return this}function xq(_){for(var B,W=this;W instanceof v1;){var he=xF(W);he.__index__=0,he.__values__=n,B?Ee.__wrapped__=he:B=he;var Ee=he;W=W.__wrapped__}return Ee.__wrapped__=_,B}function Cq(){var _=this.__wrapped__;if(_ instanceof Aa){var B=_;return this.__actions__.length&&(B=new Aa(this)),B=B.reverse(),B.__actions__.push({func:I1,args:[ex],thisArg:n}),new Qi(B,this.__chain__)}return this.thru(ex)}function Sq(){return KI(this.__wrapped__,this.__actions__)}var Eq=b1(function(_,B,W){Za.call(_,W)?++_[W]:ac(_,W,1)});function Bq(_,B,W){var he=Xn(_)?Ts:pW;return W&&Io(_,B,W)&&(B=n),he(_,In(B,3))}function kq(_,B){var W=Xn(_)?Yo:TI;return W(_,In(B,3))}var Tq=aF(CF),Iq=aF(SF);function Fq(_,B){return Hs(F1(_,B),1)}function Pq(_,B){return Hs(F1(_,B),J)}function Dq(_,B,W){return W=W===n?1:aa(W),Hs(F1(_,B),W)}function FF(_,B){var W=Xn(_)?Br:nd;return W(_,In(B,3))}function PF(_,B){var W=Xn(_)?ko:kI;return W(_,In(B,3))}var Uq=b1(function(_,B,W){Za.call(_,W)?_[W].push(B):ac(_,W,[B])});function Rq(_,B,W,he){_=ei(_)?_:Em(_),W=W&&!he?aa(W):0;var Ee=_.length;return W<0&&(W=vs(Ee+W,0)),N1(_)?W<=Ee&&_.indexOf(B,W)>-1:!!Ee&&hi(_,B,W)>-1}var Nq=ia(function(_,B,W){var he=-1,Ee=typeof B=="function",He=ei(_)?Et(_.length):[];return nd(_,function(tt){He[++he]=Ee?As(B,tt,W):jh(tt,B,W)}),He}),Vq=b1(function(_,B,W){ac(_,W,B)});function F1(_,B){var W=Xn(_)?ya:RI;return W(_,In(B,3))}function Lq(_,B,W,he){return _==null?[]:(Xn(B)||(B=B==null?[]:[B]),W=he?n:W,Xn(W)||(W=W==null?[]:[W]),MI(_,B,W))}var Mq=b1(function(_,B,W){_[W?0:1].push(B)},function(){return[[],[]]});function Oq(_,B,W){var he=Xn(_)?vi:kt,Ee=arguments.length<3;return he(_,In(B,4),W,Ee,nd)}function Hq(_,B,W){var he=Xn(_)?Ye:kt,Ee=arguments.length<3;return he(_,In(B,4),W,Ee,kI)}function $q(_,B){var W=Xn(_)?Yo:TI;return W(_,U1(In(B,3)))}function Qq(_){var B=Xn(_)?CI:RW;return B(_)}function Gq(_,B,W){(W?Io(_,B,W):B===n)?B=1:B=aa(B);var he=Xn(_)?AW:NW;return he(_,B)}function zq(_){var B=Xn(_)?fW:LW;return B(_)}function Kq(_){if(_==null)return 0;if(ei(_))return N1(_)?hm(_):_.length;var B=to(_);return B==ce||B==xe?_.size:Pb(_).length}function Wq(_,B,W){var he=Xn(_)?va:MW;return W&&Io(_,B,W)&&(B=n),he(_,In(B,3))}var jq=ia(function(_,B){if(_==null)return[];var W=B.length;return W>1&&Io(_,B[0],B[1])?B=[]:W>2&&Io(B[0],B[1],B[2])&&(B=[B[0]]),MI(_,Hs(B,1),[])}),P1=kK||function(){return Yn.Date.now()};function qq(_,B){if(typeof B!="function")throw new $i(o);return _=aa(_),function(){if(--_<1)return B.apply(this,arguments)}}function DF(_,B,W){return B=W?n:B,B=_&&B==null?_.length:B,rc(_,S,n,n,n,n,B)}function UF(_,B){var W;if(typeof B!="function")throw new $i(o);return _=aa(_),function(){return--_>0&&(W=B.apply(this,arguments)),_<=1&&(B=n),W}}var nx=ia(function(_,B,W){var he=g;if(W.length){var Ee=ed(W,Cm(nx));he|=F}return rc(_,he,B,W,Ee)}),RF=ia(function(_,B,W){var he=g|w;if(W.length){var Ee=ed(W,Cm(RF));he|=F}return rc(B,he,_,W,Ee)});function NF(_,B,W){B=W?n:B;var he=rc(_,x,n,n,n,n,n,B);return he.placeholder=NF.placeholder,he}function VF(_,B,W){B=W?n:B;var he=rc(_,T,n,n,n,n,n,B);return he.placeholder=VF.placeholder,he}function LF(_,B,W){var he,Ee,He,tt,ot,ht,Mt=0,Ot=!1,Gt=!1,sn=!0;if(typeof _!="function")throw new $i(o);B=Wi(B)||0,kr(W)&&(Ot=!!W.leading,Gt="maxWait"in W,He=Gt?vs(Wi(W.maxWait)||0,B):He,sn="trailing"in W?!!W.trailing:sn);function bn(zr){var _l=he,uc=Ee;return he=Ee=n,Mt=zr,tt=_.apply(uc,_l),tt}function Pn(zr){return Mt=zr,ot=Zh(ca,B),Ot?bn(zr):tt}function sa(zr){var _l=zr-ht,uc=zr-Mt,aP=B-_l;return Gt?eo(aP,He-uc):aP}function Dn(zr){var _l=zr-ht,uc=zr-Mt;return ht===n||_l>=B||_l<0||Gt&&uc>=He}function ca(){var zr=P1();if(Dn(zr))return ha(zr);ot=Zh(ca,sa(zr))}function ha(zr){return ot=n,sn&&he?bn(zr):(he=Ee=n,tt)}function yi(){ot!==n&&jI(ot),Mt=0,he=ht=Ee=ot=n}function Fo(){return ot===n?tt:ha(P1())}function _i(){var zr=P1(),_l=Dn(zr);if(he=arguments,Ee=this,ht=zr,_l){if(ot===n)return Pn(ht);if(Gt)return jI(ot),ot=Zh(ca,B),bn(ht)}return ot===n&&(ot=Zh(ca,B)),tt}return _i.cancel=yi,_i.flush=Fo,_i}var Yq=ia(function(_,B){return BI(_,1,B)}),Xq=ia(function(_,B,W){return BI(_,Wi(B)||0,W)});function Jq(_){return rc(_,C)}function D1(_,B){if(typeof _!="function"||B!=null&&typeof B!="function")throw new $i(o);var W=function(){var he=arguments,Ee=B?B.apply(this,he):he[0],He=W.cache;if(He.has(Ee))return He.get(Ee);var tt=_.apply(this,he);return W.cache=He.set(Ee,tt)||He,tt};return W.cache=new(D1.Cache||nc),W}D1.Cache=nc;function U1(_){if(typeof _!="function")throw new $i(o);return function(){var B=arguments;switch(B.length){case 0:return!_.call(this);case 1:return!_.call(this,B[0]);case 2:return!_.call(this,B[0],B[1]);case 3:return!_.call(this,B[0],B[1],B[2])}return!_.apply(this,B)}}function Zq(_){return UF(2,_)}var eY=OW(function(_,B){B=B.length==1&&Xn(B[0])?ya(B[0],za(In())):ya(Hs(B,1),za(In()));var W=B.length;return ia(function(he){for(var Ee=-1,He=eo(he.length,W);++Ee<He;)he[Ee]=B[Ee].call(this,he[Ee]);return As(_,this,he)})}),ax=ia(function(_,B){var W=ed(B,Cm(ax));return rc(_,F,n,B,W)}),MF=ia(function(_,B){var W=ed(B,Cm(MF));return rc(_,k,n,B,W)}),tY=sc(function(_,B){return rc(_,E,n,n,n,B)});function nY(_,B){if(typeof _!="function")throw new $i(o);return B=B===n?B:aa(B),ia(_,B)}function aY(_,B){if(typeof _!="function")throw new $i(o);return B=B==null?0:vs(aa(B),0),ia(function(W){var he=W[B],Ee=sd(W,0,B);return he&&Xo(Ee,he),As(_,this,Ee)})}function rY(_,B,W){var he=!0,Ee=!0;if(typeof _!="function")throw new $i(o);return kr(W)&&(he="leading"in W?!!W.leading:he,Ee="trailing"in W?!!W.trailing:Ee),LF(_,B,{leading:he,maxWait:B,trailing:Ee})}function sY(_){return DF(_,1)}function oY(_,B){return ax(Hb(B),_)}function iY(){if(!arguments.length)return[];var _=arguments[0];return Xn(_)?_:[_]}function lY(_){return Gi(_,h)}function uY(_,B){return B=typeof B=="function"?B:n,Gi(_,h,B)}function cY(_){return Gi(_,f|h)}function dY(_,B){return B=typeof B=="function"?B:n,Gi(_,f|h,B)}function AY(_,B){return B==null||EI(_,B,Is(B))}function yl(_,B){return _===B||_!==_&&B!==B}var fY=E1(Tb),mY=E1(function(_,B){return _>=B}),EA=PI((function(){return arguments})())?PI:function(_){return Ur(_)&&Za.call(_,"callee")&&!gI.call(_,"callee")},Xn=Et.isArray,vY=Jc?za(Jc):xW;function ei(_){return _!=null&&R1(_.length)&&!ic(_)}function Gr(_){return Ur(_)&&ei(_)}function hY(_){return _===!0||_===!1||Ur(_)&&To(_)==X}var od=IK||mx,pY=Zc?za(Zc):CW;function gY(_){return Ur(_)&&_.nodeType===1&&!ep(_)}function yY(_){if(_==null)return!0;if(ei(_)&&(Xn(_)||typeof _=="string"||typeof _.splice=="function"||od(_)||Sm(_)||EA(_)))return!_.length;var B=to(_);if(B==ce||B==xe)return!_.size;if(Jh(_))return!Pb(_).length;for(var W in _)if(Za.call(_,W))return!1;return!0}function _Y(_,B){return qh(_,B)}function wY(_,B,W){W=typeof W=="function"?W:n;var he=W?W(_,B):n;return he===n?qh(_,B,n,W):!!he}function rx(_){if(!Ur(_))return!1;var B=To(_);return B==de||B==re||typeof _.message=="string"&&typeof _.name=="string"&&!ep(_)}function bY(_){return typeof _=="number"&&_I(_)}function ic(_){if(!kr(_))return!1;var B=To(_);return B==G||B==Z||B==z||B==_e}function OF(_){return typeof _=="number"&&_==aa(_)}function R1(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=ue}function kr(_){var B=typeof _;return _!=null&&(B=="object"||B=="function")}function Ur(_){return _!=null&&typeof _=="object"}var HF=qo?za(qo):EW;function xY(_,B){return _===B||Fb(_,B,jb(B))}function CY(_,B,W){return W=typeof W=="function"?W:n,Fb(_,B,jb(B),W)}function SY(_){return $F(_)&&_!=+_}function EY(_){if(uj(_))throw new jn(s);return DI(_)}function BY(_){return _===null}function kY(_){return _==null}function $F(_){return typeof _=="number"||Ur(_)&&To(_)==Se}function ep(_){if(!Ur(_)||To(_)!=ye)return!1;var B=l1(_);if(B===null)return!0;var W=Za.call(B,"constructor")&&B.constructor;return typeof W=="function"&&W instanceof W&&r1.call(W)==CK}var sx=Bo?za(Bo):BW;function TY(_){return OF(_)&&_>=-ue&&_<=ue}var QF=Dr?za(Dr):kW;function N1(_){return typeof _=="string"||!Xn(_)&&Ur(_)&&To(_)==Te}function gi(_){return typeof _=="symbol"||Ur(_)&&To(_)==Me}var Sm=Ga?za(Ga):TW;function IY(_){return _===n}function FY(_){return Ur(_)&&to(_)==lt}function PY(_){return Ur(_)&&To(_)==Re}var DY=E1(Db),UY=E1(function(_,B){return _<=B});function GF(_){if(!_)return[];if(ei(_))return N1(_)?pl(_):Zo(_);if(Hh&&_[Hh])return AK(_[Hh]());var B=to(_),W=B==ce?_b:B==xe?t1:Em;return W(_)}function lc(_){if(!_)return _===0?_:0;if(_=Wi(_),_===J||_===-J){var B=_<0?-1:1;return B*ne}return _===_?_:0}function aa(_){var B=lc(_),W=B%1;return B===B?W?B-W:B:0}function zF(_){return _?bA(aa(_),0,te):0}function Wi(_){if(typeof _=="number")return _;if(gi(_))return Y;if(kr(_)){var B=typeof _.valueOf=="function"?_.valueOf():_;_=kr(B)?B+"":B}if(typeof _!="string")return _===0?_:+_;_=fs(_);var W=be.test(_);return W||at.test(_)?an(_.slice(2),W?2:8):se.test(_)?Y:+_}function KF(_){return fu(_,ti(_))}function RY(_){return _?bA(aa(_),-ue,ue):_===0?_:0}function Ka(_){return _==null?"":pi(_)}var NY=bm(function(_,B){if(Jh(B)||ei(B)){fu(B,Is(B),_);return}for(var W in B)Za.call(B,W)&&Kh(_,W,B[W])}),WF=bm(function(_,B){fu(B,ti(B),_)}),V1=bm(function(_,B,W,he){fu(B,ti(B),_,he)}),VY=bm(function(_,B,W,he){fu(B,Is(B),_,he)}),LY=sc(Eb);function MY(_,B){var W=wm(_);return B==null?W:SI(W,B)}var OY=ia(function(_,B){_=ir(_);var W=-1,he=B.length,Ee=he>2?B[2]:n;for(Ee&&Io(B[0],B[1],Ee)&&(he=1);++W<he;)for(var He=B[W],tt=ti(He),ot=-1,ht=tt.length;++ot<ht;){var Mt=tt[ot],Ot=_[Mt];(Ot===n||yl(Ot,gm[Mt])&&!Za.call(_,Mt))&&(_[Mt]=He[Mt])}return _}),HY=ia(function(_){return _.push(n,cF),As(jF,n,_)});function $Y(_,B){return Oh(_,In(B,3),Au)}function QY(_,B){return Oh(_,In(B,3),kb)}function GY(_,B){return _==null?_:Bb(_,In(B,3),ti)}function zY(_,B){return _==null?_:II(_,In(B,3),ti)}function KY(_,B){return _&&Au(_,In(B,3))}function WY(_,B){return _&&kb(_,In(B,3))}function jY(_){return _==null?[]:g1(_,Is(_))}function qY(_){return _==null?[]:g1(_,ti(_))}function ox(_,B,W){var he=_==null?n:xA(_,B);return he===n?W:he}function YY(_,B){return _!=null&&fF(_,B,yW)}function ix(_,B){return _!=null&&fF(_,B,_W)}var XY=sF(function(_,B,W){B!=null&&typeof B.toString!="function"&&(B=s1.call(B)),_[B]=W},ux(ni)),JY=sF(function(_,B,W){B!=null&&typeof B.toString!="function"&&(B=s1.call(B)),Za.call(_,B)?_[B].push(W):_[B]=[W]},In),ZY=ia(jh);function Is(_){return ei(_)?xI(_):Pb(_)}function ti(_){return ei(_)?xI(_,!0):IW(_)}function eX(_,B){var W={};return B=In(B,3),Au(_,function(he,Ee,He){ac(W,B(he,Ee,He),he)}),W}function tX(_,B){var W={};return B=In(B,3),Au(_,function(he,Ee,He){ac(W,Ee,B(he,Ee,He))}),W}var nX=bm(function(_,B,W){y1(_,B,W)}),jF=bm(function(_,B,W,he){y1(_,B,W,he)}),aX=sc(function(_,B){var W={};if(_==null)return W;var he=!1;B=ya(B,function(He){return He=rd(He,_),he||(he=He.length>1),He}),fu(_,Kb(_),W),he&&(W=Gi(W,f|m|h,XW));for(var Ee=B.length;Ee--;)Lb(W,B[Ee]);return W});function rX(_,B){return qF(_,U1(In(B)))}var sX=sc(function(_,B){return _==null?{}:PW(_,B)});function qF(_,B){if(_==null)return{};var W=ya(Kb(_),function(he){return[he]});return B=In(B),OI(_,W,function(he,Ee){return B(he,Ee[0])})}function oX(_,B,W){B=rd(B,_);var he=-1,Ee=B.length;for(Ee||(Ee=1,_=n);++he<Ee;){var He=_==null?n:_[mu(B[he])];He===n&&(he=Ee,He=W),_=ic(He)?He.call(_):He}return _}function iX(_,B,W){return _==null?_:Yh(_,B,W)}function lX(_,B,W,he){return he=typeof he=="function"?he:n,_==null?_:Yh(_,B,W,he)}var YF=lF(Is),XF=lF(ti);function uX(_,B,W){var he=Xn(_),Ee=he||od(_)||Sm(_);if(B=In(B,4),W==null){var He=_&&_.constructor;Ee?W=he?new He:[]:kr(_)?W=ic(He)?wm(l1(_)):{}:W={}}return(Ee?Br:Au)(_,function(tt,ot,ht){return B(W,tt,ot,ht)}),W}function cX(_,B){return _==null?!0:Lb(_,B)}function dX(_,B,W){return _==null?_:zI(_,B,Hb(W))}function AX(_,B,W,he){return he=typeof he=="function"?he:n,_==null?_:zI(_,B,Hb(W),he)}function Em(_){return _==null?[]:du(_,Is(_))}function fX(_){return _==null?[]:du(_,ti(_))}function mX(_,B,W){return W===n&&(W=B,B=n),W!==n&&(W=Wi(W),W=W===W?W:0),B!==n&&(B=Wi(B),B=B===B?B:0),bA(Wi(_),B,W)}function vX(_,B,W){return B=lc(B),W===n?(W=B,B=0):W=lc(W),_=Wi(_),wW(_,B,W)}function hX(_,B,W){if(W&&typeof W!="boolean"&&Io(_,B,W)&&(B=W=n),W===n&&(typeof B=="boolean"?(W=B,B=n):typeof _=="boolean"&&(W=_,_=n)),_===n&&B===n?(_=0,B=1):(_=lc(_),B===n?(B=_,_=0):B=lc(B)),_>B){var he=_;_=B,B=he}if(W||_%1||B%1){var Ee=wI();return eo(_+Ee*(B-_+fn("1e-"+((Ee+"").length-1))),B)}return Rb(_,B)}var pX=xm(function(_,B,W){return B=B.toLowerCase(),_+(W?JF(B):B)});function JF(_){return lx(Ka(_).toLowerCase())}function ZF(_){return _=Ka(_),_&&_.replace(qe,iK).replace(Vh,"")}function gX(_,B,W){_=Ka(_),B=pi(B);var he=_.length;W=W===n?he:bA(aa(W),0,he);var Ee=W;return W-=B.length,W>=0&&_.slice(W,Ee)==B}function yX(_){return _=Ka(_),_&&Hn.test(_)?_.replace(zt,lK):_}function _X(_){return _=Ka(_),_&&Wn.test(_)?_.replace(gn,"\\$&"):_}var wX=xm(function(_,B,W){return _+(W?"-":"")+B.toLowerCase()}),bX=xm(function(_,B,W){return _+(W?" ":"")+B.toLowerCase()}),xX=nF("toLowerCase");function CX(_,B,W){_=Ka(_),B=aa(B);var he=B?hm(_):0;if(!B||he>=B)return _;var Ee=(B-he)/2;return S1(A1(Ee),W)+_+S1(d1(Ee),W)}function SX(_,B,W){_=Ka(_),B=aa(B);var he=B?hm(_):0;return B&&he<B?_+S1(B-he,W):_}function EX(_,B,W){_=Ka(_),B=aa(B);var he=B?hm(_):0;return B&&he<B?S1(B-he,W)+_:_}function BX(_,B,W){return W||B==null?B=0:B&&(B=+B),UK(Ka(_).replace(zn,""),B||0)}function kX(_,B,W){return(W?Io(_,B,W):B===n)?B=1:B=aa(B),Nb(Ka(_),B)}function TX(){var _=arguments,B=Ka(_[0]);return _.length<3?B:B.replace(_[1],_[2])}var IX=xm(function(_,B,W){return _+(W?"_":"")+B.toLowerCase()});function FX(_,B,W){return W&&typeof W!="number"&&Io(_,B,W)&&(B=W=n),W=W===n?te:W>>>0,W?(_=Ka(_),_&&(typeof B=="string"||B!=null&&!sx(B))&&(B=pi(B),!B&&vm(_))?sd(pl(_),0,W):_.split(B,W)):[]}var PX=xm(function(_,B,W){return _+(W?" ":"")+lx(B)});function DX(_,B,W){return _=Ka(_),W=W==null?0:bA(aa(W),0,_.length),B=pi(B),_.slice(W,W+B.length)==B}function UX(_,B,W){var he=Ne.templateSettings;W&&Io(_,B,W)&&(B=n),_=Ka(_),B=V1({},B,he,uF);var Ee=V1({},B.imports,he.imports,uF),He=Is(Ee),tt=du(Ee,He),ot,ht,Mt=0,Ot=B.interpolate||At,Gt="__p += '",sn=wb((B.escape||At).source+"|"+Ot.source+"|"+(Ot===xt?je:At).source+"|"+(B.evaluate||At).source+"|$","g"),bn="//# sourceURL="+(Za.call(B,"sourceURL")?(B.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++fm+"]")+`
`;_.replace(sn,function(Dn,ca,ha,yi,Fo,_i){return ha||(ha=yi),Gt+=_.slice(Mt,_i).replace(Ut,uK),ca&&(ot=!0,Gt+=`' +
__e(`+ca+`) +
'`),Fo&&(ht=!0,Gt+=`';
`+Fo+`;
__p += '`),ha&&(Gt+=`' +
((__t = (`+ha+`)) == null ? '' : __t) +
'`),Mt=_i+Dn.length,Dn}),Gt+=`';
`;var Pn=Za.call(B,"variable")&&B.variable;if(!Pn)Gt=`with (obj) {
`+Gt+`
}
`;else if(Ve.test(Pn))throw new jn(i);Gt=(ht?Gt.replace(Lt,""):Gt).replace(_t,"$1").replace(ut,"$1;"),Gt="function("+(Pn||"obj")+`) {
`+(Pn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ot?", __e = _.escape":"")+(ht?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Gt+`return __p
}`;var sa=tP(function(){return La(He,bn+"return "+Gt).apply(n,tt)});if(sa.source=Gt,rx(sa))throw sa;return sa}function RX(_){return Ka(_).toLowerCase()}function NX(_){return Ka(_).toUpperCase()}function VX(_,B,W){if(_=Ka(_),_&&(W||B===n))return fs(_);if(!_||!(B=pi(B)))return _;var he=pl(_),Ee=pl(B),He=gA(he,Ee),tt=mm(he,Ee)+1;return sd(he,He,tt).join("")}function LX(_,B,W){if(_=Ka(_),_&&(W||B===n))return _.slice(0,mI(_)+1);if(!_||!(B=pi(B)))return _;var he=pl(_),Ee=mm(he,pl(B))+1;return sd(he,0,Ee).join("")}function MX(_,B,W){if(_=Ka(_),_&&(W||B===n))return _.replace(zn,"");if(!_||!(B=pi(B)))return _;var he=pl(_),Ee=gA(he,pl(B));return sd(he,Ee).join("")}function OX(_,B){var W=D,he=P;if(kr(B)){var Ee="separator"in B?B.separator:Ee;W="length"in B?aa(B.length):W,he="omission"in B?pi(B.omission):he}_=Ka(_);var He=_.length;if(vm(_)){var tt=pl(_);He=tt.length}if(W>=He)return _;var ot=W-hm(he);if(ot<1)return he;var ht=tt?sd(tt,0,ot).join(""):_.slice(0,ot);if(Ee===n)return ht+he;if(tt&&(ot+=ht.length-ot),sx(Ee)){if(_.slice(ot).search(Ee)){var Mt,Ot=ht;for(Ee.global||(Ee=wb(Ee.source,Ka(oe.exec(Ee))+"g")),Ee.lastIndex=0;Mt=Ee.exec(Ot);)var Gt=Mt.index;ht=ht.slice(0,Gt===n?ot:Gt)}}else if(_.indexOf(pi(Ee),ot)!=ot){var sn=ht.lastIndexOf(Ee);sn>-1&&(ht=ht.slice(0,sn))}return ht+he}function HX(_){return _=Ka(_),_&&dn.test(_)?_.replace(Ft,hK):_}var $X=xm(function(_,B,W){return _+(W?" ":"")+B.toUpperCase()}),lx=nF("toUpperCase");function eP(_,B,W){return _=Ka(_),B=W?n:B,B===n?dK(_)?yK(_):Jo(_):_.match(B)||[]}var tP=ia(function(_,B){try{return As(_,n,B)}catch(W){return rx(W)?W:new jn(W)}}),QX=sc(function(_,B){return Br(B,function(W){W=mu(W),ac(_,W,nx(_[W],_))}),_});function GX(_){var B=_==null?0:_.length,W=In();return _=B?ya(_,function(he){if(typeof he[1]!="function")throw new $i(o);return[W(he[0]),he[1]]}):[],ia(function(he){for(var Ee=-1;++Ee<B;){var He=_[Ee];if(As(He[0],this,he))return As(He[1],this,he)}})}function zX(_){return hW(Gi(_,f))}function ux(_){return function(){return _}}function KX(_,B){return _==null||_!==_?B:_}var WX=rF(),jX=rF(!0);function ni(_){return _}function cx(_){return UI(typeof _=="function"?_:Gi(_,f))}function qX(_){return NI(Gi(_,f))}function YX(_,B){return VI(_,Gi(B,f))}var XX=ia(function(_,B){return function(W){return jh(W,_,B)}}),JX=ia(function(_,B){return function(W){return jh(_,W,B)}});function dx(_,B,W){var he=Is(B),Ee=g1(B,he);W==null&&!(kr(B)&&(Ee.length||!he.length))&&(W=B,B=_,_=this,Ee=g1(B,Is(B)));var He=!(kr(W)&&"chain"in W)||!!W.chain,tt=ic(_);return Br(Ee,function(ot){var ht=B[ot];_[ot]=ht,tt&&(_.prototype[ot]=function(){var Mt=this.__chain__;if(He||Mt){var Ot=_(this.__wrapped__),Gt=Ot.__actions__=Zo(this.__actions__);return Gt.push({func:ht,args:arguments,thisArg:_}),Ot.__chain__=Mt,Ot}return ht.apply(_,Xo([this.value()],arguments))})}),_}function ZX(){return Yn._===this&&(Yn._=SK),this}function Ax(){}function eJ(_){return _=aa(_),ia(function(B){return LI(B,_)})}var tJ=Qb(ya),nJ=Qb(Ts),aJ=Qb(va);function nP(_){return Yb(_)?Oe(mu(_)):DW(_)}function rJ(_){return function(B){return _==null?n:xA(_,B)}}var sJ=oF(),oJ=oF(!0);function fx(){return[]}function mx(){return!1}function iJ(){return{}}function lJ(){return""}function uJ(){return!0}function cJ(_,B){if(_=aa(_),_<1||_>ue)return[];var W=te,he=eo(_,te);B=In(B),_-=te;for(var Ee=Qr(he,B);++W<_;)B(W);return Ee}function dJ(_){return Xn(_)?ya(_,mu):gi(_)?[_]:Zo(bF(Ka(_)))}function AJ(_){var B=++xK;return Ka(_)+B}var fJ=C1(function(_,B){return _+B},0),mJ=Gb("ceil"),vJ=C1(function(_,B){return _/B},1),hJ=Gb("floor");function pJ(_){return _&&_.length?p1(_,ni,Tb):n}function gJ(_,B){return _&&_.length?p1(_,In(B,2),Tb):n}function yJ(_){return we(_,ni)}function _J(_,B){return we(_,In(B,2))}function wJ(_){return _&&_.length?p1(_,ni,Db):n}function bJ(_,B){return _&&_.length?p1(_,In(B,2),Db):n}var xJ=C1(function(_,B){return _*B},1),CJ=Gb("round"),SJ=C1(function(_,B){return _-B},0);function EJ(_){return _&&_.length?Va(_,ni):0}function BJ(_,B){return _&&_.length?Va(_,In(B,2)):0}return Ne.after=qq,Ne.ary=DF,Ne.assign=NY,Ne.assignIn=WF,Ne.assignInWith=V1,Ne.assignWith=VY,Ne.at=LY,Ne.before=UF,Ne.bind=nx,Ne.bindAll=QX,Ne.bindKey=RF,Ne.castArray=iY,Ne.chain=IF,Ne.chunk=hj,Ne.compact=pj,Ne.concat=gj,Ne.cond=GX,Ne.conforms=zX,Ne.constant=ux,Ne.countBy=Eq,Ne.create=MY,Ne.curry=NF,Ne.curryRight=VF,Ne.debounce=LF,Ne.defaults=OY,Ne.defaultsDeep=HY,Ne.defer=Yq,Ne.delay=Xq,Ne.difference=yj,Ne.differenceBy=_j,Ne.differenceWith=wj,Ne.drop=bj,Ne.dropRight=xj,Ne.dropRightWhile=Cj,Ne.dropWhile=Sj,Ne.fill=Ej,Ne.filter=kq,Ne.flatMap=Fq,Ne.flatMapDeep=Pq,Ne.flatMapDepth=Dq,Ne.flatten=EF,Ne.flattenDeep=Bj,Ne.flattenDepth=kj,Ne.flip=Jq,Ne.flow=WX,Ne.flowRight=jX,Ne.fromPairs=Tj,Ne.functions=jY,Ne.functionsIn=qY,Ne.groupBy=Uq,Ne.initial=Fj,Ne.intersection=Pj,Ne.intersectionBy=Dj,Ne.intersectionWith=Uj,Ne.invert=XY,Ne.invertBy=JY,Ne.invokeMap=Nq,Ne.iteratee=cx,Ne.keyBy=Vq,Ne.keys=Is,Ne.keysIn=ti,Ne.map=F1,Ne.mapKeys=eX,Ne.mapValues=tX,Ne.matches=qX,Ne.matchesProperty=YX,Ne.memoize=D1,Ne.merge=nX,Ne.mergeWith=jF,Ne.method=XX,Ne.methodOf=JX,Ne.mixin=dx,Ne.negate=U1,Ne.nthArg=eJ,Ne.omit=aX,Ne.omitBy=rX,Ne.once=Zq,Ne.orderBy=Lq,Ne.over=tJ,Ne.overArgs=eY,Ne.overEvery=nJ,Ne.overSome=aJ,Ne.partial=ax,Ne.partialRight=MF,Ne.partition=Mq,Ne.pick=sX,Ne.pickBy=qF,Ne.property=nP,Ne.propertyOf=rJ,Ne.pull=Lj,Ne.pullAll=kF,Ne.pullAllBy=Mj,Ne.pullAllWith=Oj,Ne.pullAt=Hj,Ne.range=sJ,Ne.rangeRight=oJ,Ne.rearg=tY,Ne.reject=$q,Ne.remove=$j,Ne.rest=nY,Ne.reverse=ex,Ne.sampleSize=Gq,Ne.set=iX,Ne.setWith=lX,Ne.shuffle=zq,Ne.slice=Qj,Ne.sortBy=jq,Ne.sortedUniq=Yj,Ne.sortedUniqBy=Xj,Ne.split=FX,Ne.spread=aY,Ne.tail=Jj,Ne.take=Zj,Ne.takeRight=eq,Ne.takeRightWhile=tq,Ne.takeWhile=nq,Ne.tap=pq,Ne.throttle=rY,Ne.thru=I1,Ne.toArray=GF,Ne.toPairs=YF,Ne.toPairsIn=XF,Ne.toPath=dJ,Ne.toPlainObject=KF,Ne.transform=uX,Ne.unary=sY,Ne.union=aq,Ne.unionBy=rq,Ne.unionWith=sq,Ne.uniq=oq,Ne.uniqBy=iq,Ne.uniqWith=lq,Ne.unset=cX,Ne.unzip=tx,Ne.unzipWith=TF,Ne.update=dX,Ne.updateWith=AX,Ne.values=Em,Ne.valuesIn=fX,Ne.without=uq,Ne.words=eP,Ne.wrap=oY,Ne.xor=cq,Ne.xorBy=dq,Ne.xorWith=Aq,Ne.zip=fq,Ne.zipObject=mq,Ne.zipObjectDeep=vq,Ne.zipWith=hq,Ne.entries=YF,Ne.entriesIn=XF,Ne.extend=WF,Ne.extendWith=V1,dx(Ne,Ne),Ne.add=fJ,Ne.attempt=tP,Ne.camelCase=pX,Ne.capitalize=JF,Ne.ceil=mJ,Ne.clamp=mX,Ne.clone=lY,Ne.cloneDeep=cY,Ne.cloneDeepWith=dY,Ne.cloneWith=uY,Ne.conformsTo=AY,Ne.deburr=ZF,Ne.defaultTo=KX,Ne.divide=vJ,Ne.endsWith=gX,Ne.eq=yl,Ne.escape=yX,Ne.escapeRegExp=_X,Ne.every=Bq,Ne.find=Tq,Ne.findIndex=CF,Ne.findKey=$Y,Ne.findLast=Iq,Ne.findLastIndex=SF,Ne.findLastKey=QY,Ne.floor=hJ,Ne.forEach=FF,Ne.forEachRight=PF,Ne.forIn=GY,Ne.forInRight=zY,Ne.forOwn=KY,Ne.forOwnRight=WY,Ne.get=ox,Ne.gt=fY,Ne.gte=mY,Ne.has=YY,Ne.hasIn=ix,Ne.head=BF,Ne.identity=ni,Ne.includes=Rq,Ne.indexOf=Ij,Ne.inRange=vX,Ne.invoke=ZY,Ne.isArguments=EA,Ne.isArray=Xn,Ne.isArrayBuffer=vY,Ne.isArrayLike=ei,Ne.isArrayLikeObject=Gr,Ne.isBoolean=hY,Ne.isBuffer=od,Ne.isDate=pY,Ne.isElement=gY,Ne.isEmpty=yY,Ne.isEqual=_Y,Ne.isEqualWith=wY,Ne.isError=rx,Ne.isFinite=bY,Ne.isFunction=ic,Ne.isInteger=OF,Ne.isLength=R1,Ne.isMap=HF,Ne.isMatch=xY,Ne.isMatchWith=CY,Ne.isNaN=SY,Ne.isNative=EY,Ne.isNil=kY,Ne.isNull=BY,Ne.isNumber=$F,Ne.isObject=kr,Ne.isObjectLike=Ur,Ne.isPlainObject=ep,Ne.isRegExp=sx,Ne.isSafeInteger=TY,Ne.isSet=QF,Ne.isString=N1,Ne.isSymbol=gi,Ne.isTypedArray=Sm,Ne.isUndefined=IY,Ne.isWeakMap=FY,Ne.isWeakSet=PY,Ne.join=Rj,Ne.kebabCase=wX,Ne.last=Ki,Ne.lastIndexOf=Nj,Ne.lowerCase=bX,Ne.lowerFirst=xX,Ne.lt=DY,Ne.lte=UY,Ne.max=pJ,Ne.maxBy=gJ,Ne.mean=yJ,Ne.meanBy=_J,Ne.min=wJ,Ne.minBy=bJ,Ne.stubArray=fx,Ne.stubFalse=mx,Ne.stubObject=iJ,Ne.stubString=lJ,Ne.stubTrue=uJ,Ne.multiply=xJ,Ne.nth=Vj,Ne.noConflict=ZX,Ne.noop=Ax,Ne.now=P1,Ne.pad=CX,Ne.padEnd=SX,Ne.padStart=EX,Ne.parseInt=BX,Ne.random=hX,Ne.reduce=Oq,Ne.reduceRight=Hq,Ne.repeat=kX,Ne.replace=TX,Ne.result=oX,Ne.round=CJ,Ne.runInContext=mt,Ne.sample=Qq,Ne.size=Kq,Ne.snakeCase=IX,Ne.some=Wq,Ne.sortedIndex=Gj,Ne.sortedIndexBy=zj,Ne.sortedIndexOf=Kj,Ne.sortedLastIndex=Wj,Ne.sortedLastIndexBy=jj,Ne.sortedLastIndexOf=qj,Ne.startCase=PX,Ne.startsWith=DX,Ne.subtract=SJ,Ne.sum=EJ,Ne.sumBy=BJ,Ne.template=UX,Ne.times=cJ,Ne.toFinite=lc,Ne.toInteger=aa,Ne.toLength=zF,Ne.toLower=RX,Ne.toNumber=Wi,Ne.toSafeInteger=RY,Ne.toString=Ka,Ne.toUpper=NX,Ne.trim=VX,Ne.trimEnd=LX,Ne.trimStart=MX,Ne.truncate=OX,Ne.unescape=HX,Ne.uniqueId=AJ,Ne.upperCase=$X,Ne.upperFirst=lx,Ne.each=FF,Ne.eachRight=PF,Ne.first=BF,dx(Ne,(function(){var _={};return Au(Ne,function(B,W){Za.call(Ne.prototype,W)||(_[W]=B)}),_})(),{chain:!1}),Ne.VERSION=a,Br(["bind","bindKey","curry","curryRight","partial","partialRight"],function(_){Ne[_].placeholder=Ne}),Br(["drop","take"],function(_,B){Aa.prototype[_]=function(W){W=W===n?1:vs(aa(W),0);var he=this.__filtered__&&!B?new Aa(this):this.clone();return he.__filtered__?he.__takeCount__=eo(W,he.__takeCount__):he.__views__.push({size:eo(W,te),type:_+(he.__dir__<0?"Right":"")}),he},Aa.prototype[_+"Right"]=function(W){return this.reverse()[_](W).reverse()}}),Br(["filter","map","takeWhile"],function(_,B){var W=B+1,he=W==ie||W==j;Aa.prototype[_]=function(Ee){var He=this.clone();return He.__iteratees__.push({iteratee:In(Ee,3),type:W}),He.__filtered__=He.__filtered__||he,He}}),Br(["head","last"],function(_,B){var W="take"+(B?"Right":"");Aa.prototype[_]=function(){return this[W](1).value()[0]}}),Br(["initial","tail"],function(_,B){var W="drop"+(B?"":"Right");Aa.prototype[_]=function(){return this.__filtered__?new Aa(this):this[W](1)}}),Aa.prototype.compact=function(){return this.filter(ni)},Aa.prototype.find=function(_){return this.filter(_).head()},Aa.prototype.findLast=function(_){return this.reverse().find(_)},Aa.prototype.invokeMap=ia(function(_,B){return typeof _=="function"?new Aa(this):this.map(function(W){return jh(W,_,B)})}),Aa.prototype.reject=function(_){return this.filter(U1(In(_)))},Aa.prototype.slice=function(_,B){_=aa(_);var W=this;return W.__filtered__&&(_>0||B<0)?new Aa(W):(_<0?W=W.takeRight(-_):_&&(W=W.drop(_)),B!==n&&(B=aa(B),W=B<0?W.dropRight(-B):W.take(B-_)),W)},Aa.prototype.takeRightWhile=function(_){return this.reverse().takeWhile(_).reverse()},Aa.prototype.toArray=function(){return this.take(te)},Au(Aa.prototype,function(_,B){var W=/^(?:filter|find|map|reject)|While$/.test(B),he=/^(?:head|last)$/.test(B),Ee=Ne[he?"take"+(B=="last"?"Right":""):B],He=he||/^find/.test(B);Ee&&(Ne.prototype[B]=function(){var tt=this.__wrapped__,ot=he?[1]:arguments,ht=tt instanceof Aa,Mt=ot[0],Ot=ht||Xn(tt),Gt=function(ca){var ha=Ee.apply(Ne,Xo([ca],ot));return he&&sn?ha[0]:ha};Ot&&W&&typeof Mt=="function"&&Mt.length!=1&&(ht=Ot=!1);var sn=this.__chain__,bn=!!this.__actions__.length,Pn=He&&!sn,sa=ht&&!bn;if(!He&&Ot){tt=sa?tt:new Aa(this);var Dn=_.apply(tt,ot);return Dn.__actions__.push({func:I1,args:[Gt],thisArg:n}),new Qi(Dn,sn)}return Pn&&sa?_.apply(this,ot):(Dn=this.thru(Gt),Pn?he?Dn.value()[0]:Dn.value():Dn)})}),Br(["pop","push","shift","sort","splice","unshift"],function(_){var B=n1[_],W=/^(?:push|sort|unshift)$/.test(_)?"tap":"thru",he=/^(?:pop|shift)$/.test(_);Ne.prototype[_]=function(){var Ee=arguments;if(he&&!this.__chain__){var He=this.value();return B.apply(Xn(He)?He:[],Ee)}return this[W](function(tt){return B.apply(Xn(tt)?tt:[],Ee)})}}),Au(Aa.prototype,function(_,B){var W=Ne[B];if(W){var he=W.name+"";Za.call(_m,he)||(_m[he]=[]),_m[he].push({name:B,func:W})}}),_m[x1(n,w).name]=[{name:"wrapper",func:n}],Aa.prototype.clone=HK,Aa.prototype.reverse=$K,Aa.prototype.value=QK,Ne.prototype.at=gq,Ne.prototype.chain=yq,Ne.prototype.commit=_q,Ne.prototype.next=wq,Ne.prototype.plant=xq,Ne.prototype.reverse=Cq,Ne.prototype.toJSON=Ne.prototype.valueOf=Ne.prototype.value=Sq,Ne.prototype.first=Ne.prototype.head,Hh&&(Ne.prototype[Hh]=bq),Ne}),pm=_K();ts?((ts.exports=pm)._=pm,na._=pm):Yn._=pm}).call(ame)})(Cp,Cp.exports)),Cp.exports}var sme=rme();const Qn=CM(sme),FM=6048e5,ome=864e5,PM=6e4,DM=36e5,Y3=Symbol.for("constructDateFrom");function Vc(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&Y3 in e?e[Y3](t):e instanceof Date?new e.constructor(t):new Date(t)}function Fr(e,t){return Vc(t||e,e)}let ime={};function bw(){return ime}function N0(e,t){const n=bw(),a=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,r=Fr(e,t?.in),s=r.getDay(),o=(s<a?7:0)+s-a;return r.setDate(r.getDate()-o),r.setHours(0,0,0,0),r}function j_(e,t){return N0(e,{...t,weekStartsOn:1})}function UM(e,t){const n=Fr(e,t?.in),a=n.getFullYear(),r=Vc(n,0);r.setFullYear(a+1,0,4),r.setHours(0,0,0,0);const s=j_(r),o=Vc(n,0);o.setFullYear(a,0,4),o.setHours(0,0,0,0);const i=j_(o);return n.getTime()>=s.getTime()?a+1:n.getTime()>=i.getTime()?a:a-1}function X3(e){const t=Fr(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function xw(e,...t){const n=Vc.bind(null,t.find(a=>typeof a=="object"));return t.map(n)}function q_(e,t){const n=Fr(e,t?.in);return n.setHours(0,0,0,0),n}function lme(e,t,n){const[a,r]=xw(n?.in,e,t),s=q_(a),o=q_(r),i=+s-X3(s),c=+o-X3(o);return Math.round((i-c)/ome)}function ume(e,t){const n=UM(e,t),a=Vc(e,0);return a.setFullYear(n,0,4),a.setHours(0,0,0,0),j_(a)}function J3(e,t){const n=+Fr(e)-+Fr(t);return n<0?-1:n>0?1:n}function cme(e,t,n){const[a,r]=xw(n?.in,e,t);return+q_(a)==+q_(r)}function dme(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Ame(e){return!(!dme(e)&&typeof e!="number"||isNaN(+Fr(e)))}function fme(e,t,n){const[a,r]=xw(n?.in,e,t);return a.getFullYear()-r.getFullYear()}function RM(e,t,n){const[a,r]=xw(n?.in,e,t),s=J3(a,r),o=Math.abs(fme(a,r));a.setFullYear(1584),r.setFullYear(1584);const i=J3(a,r)===-s,c=s*(o-+i);return c===0?0:c}function mme(e,t){const n=Fr(e,t?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const vme={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},hme=(e,t,n)=>{let a;const r=vme[e];return typeof r=="string"?a=r:t===1?a=r.one:a=r.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a};function tC(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const pme={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},gme={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},yme={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},_me={date:tC({formats:pme,defaultWidth:"full"}),time:tC({formats:gme,defaultWidth:"full"}),dateTime:tC({formats:yme,defaultWidth:"full"})},wme={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},bme=(e,t,n,a)=>wme[e];function ip(e){return(t,n)=>{const a=n?.context?String(n.context):"standalone";let r;if(a==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,i=n?.width?String(n.width):o;r=e.formattingValues[i]||e.formattingValues[o]}else{const o=e.defaultWidth,i=n?.width?String(n.width):e.defaultWidth;r=e.values[i]||e.values[o]}const s=e.argumentCallback?e.argumentCallback(t):t;return r[s]}}const xme={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Cme={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Sme={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Eme={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Bme={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},kme={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Tme=(e,t)=>{const n=Number(e),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Ime={ordinalNumber:Tme,era:ip({values:xme,defaultWidth:"wide"}),quarter:ip({values:Cme,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ip({values:Sme,defaultWidth:"wide"}),day:ip({values:Eme,defaultWidth:"wide"}),dayPeriod:ip({values:Bme,defaultWidth:"wide",formattingValues:kme,defaultFormattingWidth:"wide"})};function lp(e){return(t,n={})=>{const a=n.width,r=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],s=t.match(r);if(!s)return null;const o=s[0],i=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(i)?Pme(i,f=>f.test(o)):Fme(i,f=>f.test(o));let A;A=e.valueCallback?e.valueCallback(c):c,A=n.valueCallback?n.valueCallback(A):A;const d=t.slice(o.length);return{value:A,rest:d}}}function Fme(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function Pme(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function Dme(e){return(t,n={})=>{const a=t.match(e.matchPattern);if(!a)return null;const r=a[0],s=t.match(e.parsePattern);if(!s)return null;let o=e.valueCallback?e.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const i=t.slice(r.length);return{value:o,rest:i}}}const Ume=/^(\d+)(th|st|nd|rd)?/i,Rme=/\d+/i,Nme={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Vme={any:[/^b/i,/^(a|c)/i]},Lme={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Mme={any:[/1/i,/2/i,/3/i,/4/i]},Ome={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Hme={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},$me={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Qme={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Gme={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},zme={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Kme={ordinalNumber:Dme({matchPattern:Ume,parsePattern:Rme,valueCallback:e=>parseInt(e,10)}),era:lp({matchPatterns:Nme,defaultMatchWidth:"wide",parsePatterns:Vme,defaultParseWidth:"any"}),quarter:lp({matchPatterns:Lme,defaultMatchWidth:"wide",parsePatterns:Mme,defaultParseWidth:"any",valueCallback:e=>e+1}),month:lp({matchPatterns:Ome,defaultMatchWidth:"wide",parsePatterns:Hme,defaultParseWidth:"any"}),day:lp({matchPatterns:$me,defaultMatchWidth:"wide",parsePatterns:Qme,defaultParseWidth:"any"}),dayPeriod:lp({matchPatterns:Gme,defaultMatchWidth:"any",parsePatterns:zme,defaultParseWidth:"any"})},Wme={code:"en-US",formatDistance:hme,formatLong:_me,formatRelative:bme,localize:Ime,match:Kme,options:{weekStartsOn:0,firstWeekContainsDate:1}};function jme(e,t){const n=Fr(e,t?.in);return lme(n,mme(n))+1}function qme(e,t){const n=Fr(e,t?.in),a=+j_(n)-+ume(n);return Math.round(a/FM)+1}function NM(e,t){const n=Fr(e,t?.in),a=n.getFullYear(),r=bw(),s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,o=Vc(t?.in||e,0);o.setFullYear(a+1,0,s),o.setHours(0,0,0,0);const i=N0(o,t),c=Vc(t?.in||e,0);c.setFullYear(a,0,s),c.setHours(0,0,0,0);const A=N0(c,t);return+n>=+i?a+1:+n>=+A?a:a-1}function Yme(e,t){const n=bw(),a=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,r=NM(e,t),s=Vc(t?.in||e,0);return s.setFullYear(r,0,a),s.setHours(0,0,0,0),N0(s,t)}function Xme(e,t){const n=Fr(e,t?.in),a=+N0(n,t)-+Yme(n,t);return Math.round(a/FM)+1}function er(e,t){const n=e<0?"-":"",a=Math.abs(e).toString().padStart(t,"0");return n+a}const dd={y(e,t){const n=e.getFullYear(),a=n>0?n:1-n;return er(t==="yy"?a%100:a,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):er(n+1,2)},d(e,t){return er(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return er(e.getHours()%12||12,t.length)},H(e,t){return er(e.getHours(),t.length)},m(e,t){return er(e.getMinutes(),t.length)},s(e,t){return er(e.getSeconds(),t.length)},S(e,t){const n=t.length,a=e.getMilliseconds(),r=Math.trunc(a*Math.pow(10,n-3));return er(r,t.length)}},Nm={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Z3={G:function(e,t,n){const a=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});case"GGGG":default:return n.era(a,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const a=e.getFullYear(),r=a>0?a:1-a;return n.ordinalNumber(r,{unit:"year"})}return dd.y(e,t)},Y:function(e,t,n,a){const r=NM(e,a),s=r>0?r:1-r;if(t==="YY"){const o=s%100;return er(o,2)}return t==="Yo"?n.ordinalNumber(s,{unit:"year"}):er(s,t.length)},R:function(e,t){const n=UM(e);return er(n,t.length)},u:function(e,t){const n=e.getFullYear();return er(n,t.length)},Q:function(e,t,n){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return er(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,n){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return er(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,n){const a=e.getMonth();switch(t){case"M":case"MM":return dd.M(e,t);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,n){const a=e.getMonth();switch(t){case"L":return String(a+1);case"LL":return er(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,n,a){const r=Xme(e,a);return t==="wo"?n.ordinalNumber(r,{unit:"week"}):er(r,t.length)},I:function(e,t,n){const a=qme(e);return t==="Io"?n.ordinalNumber(a,{unit:"week"}):er(a,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):dd.d(e,t)},D:function(e,t,n){const a=jme(e);return t==="Do"?n.ordinalNumber(a,{unit:"dayOfYear"}):er(a,t.length)},E:function(e,t,n){const a=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});case"EEEE":default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,n,a){const r=e.getDay(),s=(r-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return er(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});case"eeee":default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(e,t,n,a){const r=e.getDay(),s=(r-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return er(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});case"cccc":default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(e,t,n){const a=e.getDay(),r=a===0?7:a;switch(t){case"i":return String(r);case"ii":return er(r,t.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});case"iiii":default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,n){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){const a=e.getHours();let r;switch(a===12?r=Nm.noon:a===0?r=Nm.midnight:r=a/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){const a=e.getHours();let r;switch(a>=17?r=Nm.evening:a>=12?r=Nm.afternoon:a>=4?r=Nm.morning:r=Nm.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let a=e.getHours()%12;return a===0&&(a=12),n.ordinalNumber(a,{unit:"hour"})}return dd.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):dd.H(e,t)},K:function(e,t,n){const a=e.getHours()%12;return t==="Ko"?n.ordinalNumber(a,{unit:"hour"}):er(a,t.length)},k:function(e,t,n){let a=e.getHours();return a===0&&(a=24),t==="ko"?n.ordinalNumber(a,{unit:"hour"}):er(a,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):dd.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):dd.s(e,t)},S:function(e,t){return dd.S(e,t)},X:function(e,t,n){const a=e.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return tU(a);case"XXXX":case"XX":return MA(a);case"XXXXX":case"XXX":default:return MA(a,":")}},x:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"x":return tU(a);case"xxxx":case"xx":return MA(a);case"xxxxx":case"xxx":default:return MA(a,":")}},O:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+eU(a,":");case"OOOO":default:return"GMT"+MA(a,":")}},z:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+eU(a,":");case"zzzz":default:return"GMT"+MA(a,":")}},t:function(e,t,n){const a=Math.trunc(+e/1e3);return er(a,t.length)},T:function(e,t,n){return er(+e,t.length)}};function eU(e,t=""){const n=e>0?"-":"+",a=Math.abs(e),r=Math.trunc(a/60),s=a%60;return s===0?n+String(r):n+String(r)+t+er(s,2)}function tU(e,t){return e%60===0?(e>0?"-":"+")+er(Math.abs(e)/60,2):MA(e,t)}function MA(e,t=""){const n=e>0?"-":"+",a=Math.abs(e),r=er(Math.trunc(a/60),2),s=er(a%60,2);return n+r+t+s}const nU=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},VM=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Jme=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],a=n[1],r=n[2];if(!r)return nU(e,t);let s;switch(a){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",nU(a,t)).replace("{{time}}",VM(r,t))},Zme={p:VM,P:Jme},eve=/^D+$/,tve=/^Y+$/,nve=["D","DD","YY","YYYY"];function ave(e){return eve.test(e)}function rve(e){return tve.test(e)}function sve(e,t,n){const a=ove(e,t,n);if(console.warn(a),nve.includes(e))throw new RangeError(a)}function ove(e,t,n){const a=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${a} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const ive=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,lve=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,uve=/^'([^]*?)'?$/,cve=/''/g,dve=/[a-zA-Z]/;function wo(e,t,n){const a=bw(),r=a.locale??Wme,s=a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,o=a.weekStartsOn??a.locale?.options?.weekStartsOn??0,i=Fr(e,n?.in);if(!Ame(i))throw new RangeError("Invalid time value");let c=t.match(lve).map(d=>{const f=d[0];if(f==="p"||f==="P"){const m=Zme[f];return m(d,r.formatLong)}return d}).join("").match(ive).map(d=>{if(d==="''")return{isToken:!1,value:"'"};const f=d[0];if(f==="'")return{isToken:!1,value:Ave(d)};if(Z3[f])return{isToken:!0,value:d};if(f.match(dve))throw new RangeError("Format string contains an unescaped latin alphabet character `"+f+"`");return{isToken:!1,value:d}});r.localize.preprocessor&&(c=r.localize.preprocessor(i,c));const A={firstWeekContainsDate:s,weekStartsOn:o,locale:r};return c.map(d=>{if(!d.isToken)return d.value;const f=d.value;(rve(f)||ave(f))&&sve(f,t,String(e));const m=Z3[f[0]];return m(i,f,r.localize,A)}).join("")}function Ave(e){const t=e.match(uve);return t?t[1].replace(cve,"'"):e}function aU(e,t){return Fr(e*1e3,t?.in)}function fve(e){return Math.trunc(+Fr(e)/1e3)}function mve(e,t){return+Fr(e)>+Fr(t)}function fh(e,t){const n=()=>Vc(t?.in,NaN),r=gve(e);let s;if(r.date){const A=yve(r.date,2);s=_ve(A.restDateString,A.year)}if(!s||isNaN(+s))return n();const o=+s;let i=0,c;if(r.time&&(i=wve(r.time),isNaN(i)))return n();if(r.timezone){if(c=bve(r.timezone),isNaN(c))return n()}else{const A=new Date(o+i),d=Fr(0,t?.in);return d.setFullYear(A.getUTCFullYear(),A.getUTCMonth(),A.getUTCDate()),d.setHours(A.getUTCHours(),A.getUTCMinutes(),A.getUTCSeconds(),A.getUTCMilliseconds()),d}return Fr(o+i+c,t?.in)}const Z1={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},vve=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,hve=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,pve=/^([+-])(\d{2})(?::?(\d{2}))?$/;function gve(e){const t={},n=e.split(Z1.dateTimeDelimiter);let a;if(n.length>2)return t;if(/:/.test(n[0])?a=n[0]:(t.date=n[0],a=n[1],Z1.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Z1.timeZoneDelimiter)[0],a=e.substr(t.date.length,e.length))),a){const r=Z1.timezone.exec(a);r?(t.time=a.replace(r[1],""),t.timezone=r[1]):t.time=a}return t}function yve(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),a=e.match(n);if(!a)return{year:NaN,restDateString:""};const r=a[1]?parseInt(a[1]):null,s=a[2]?parseInt(a[2]):null;return{year:s===null?r:s*100,restDateString:e.slice((a[1]||a[2]).length)}}function _ve(e,t){if(t===null)return new Date(NaN);const n=e.match(vve);if(!n)return new Date(NaN);const a=!!n[4],r=up(n[1]),s=up(n[2])-1,o=up(n[3]),i=up(n[4]),c=up(n[5])-1;if(a)return Bve(t,i,c)?xve(t,i,c):new Date(NaN);{const A=new Date(0);return!Sve(t,s,o)||!Eve(t,r)?new Date(NaN):(A.setUTCFullYear(t,s,Math.max(r,o)),A)}}function up(e){return e?parseInt(e):1}function wve(e){const t=e.match(hve);if(!t)return NaN;const n=nC(t[1]),a=nC(t[2]),r=nC(t[3]);return kve(n,a,r)?n*DM+a*PM+r*1e3:NaN}function nC(e){return e&&parseFloat(e.replace(",","."))||0}function bve(e){if(e==="Z")return 0;const t=e.match(pve);if(!t)return 0;const n=t[1]==="+"?-1:1,a=parseInt(t[2]),r=t[3]&&parseInt(t[3])||0;return Tve(a,r)?n*(a*DM+r*PM):NaN}function xve(e,t,n){const a=new Date(0);a.setUTCFullYear(e,0,4);const r=a.getUTCDay()||7,s=(t-1)*7+n+1-r;return a.setUTCDate(a.getUTCDate()+s),a}const Cve=[31,null,31,30,31,30,31,31,30,31,30,31];function LM(e){return e%400===0||e%4===0&&e%100!==0}function Sve(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(Cve[t]||(LM(e)?29:28))}function Eve(e,t){return t>=1&&t<=(LM(e)?366:365)}function Bve(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function kve(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function Tve(e,t){return t>=0&&t<=59}function MM(e,t,n){const a=Fr(e,n?.in);return a.setHours(t),a}function Ive(e,t,n){const a=Fr(e,n?.in);return a.setMilliseconds(t),a}function OM(e,t,n){const a=Fr(e,n?.in);return a.setMinutes(t),a}function Fve(e,t,n){const a=Fr(e,n?.in);return a.setSeconds(t),a}const eT=async(e,t,n=null)=>{try{const a=n||wo(new Date,"yyyy-MM-dd");return{data:{consultation_id:(await dt.post("/consultation/",{patient_id:e,doctor_id:t,consultation_date:a})).data?.data?.consultation_id||null},error:null}}catch(a){return console.error("There was an error adding the consultation:",a),{data:null,error:a}}},rU=async e=>{try{const t=await dt.get(`/consultation/${e}`),n=Qn.cloneDeep(t.data.data.consultation),a=await $M(n.id);return n.medicines=a.data,{data:n,error:null}}catch(t){return console.error("Error updating consultation:",t),{data:[],error:t}}},HM=async e=>{try{return await dt.put(`/consultation/${e.id}`,e),{error:null}}catch(t){return console.error("Error updating consultation:",t),{error:t}}};let ey={value:[]};const $M=async e=>{try{return{data:(await dt.get(`/consultation/consultation_medicines/${e}`)).data.data.medicines,error:null}}catch(t){return console.error("Error fetching medicines:",t),{data:[],error:t}}},t_=async(e,t=null)=>{try{if(!e)throw new Error("patient_id is required");let n="";t?n=`?doctor_id=${t}`:console.warn(" fetchConsultations called without doctor_id - this will return ALL consultations for patient"),console.log(" Fetching consultations from:",`/consultation/consultations/${e}${n}`);const a=await dt.get(`/consultation/consultations/${e}${n}`);ey=Qn.cloneDeep(a.data.data.consultations),console.log(" Raw consultations from API:",ey.length,"items");for(const r of ey){const s=await $M(r.id);r.medicines=s.data}return{data:ey,error:null}}catch(n){return console.error("Error fetching consultations from API:",n),{data:[],error:n}}},Pve=async e=>{try{console.log(`[Summary] Triggering summary generation for patient: ${e}`);const t=await dt(yM({method:"post",url:`/consultation/generate-summary/${e}`}));return console.log(`[Summary] Summary generation queued successfully for patient: ${e}`),t}catch(t){return console.error(`[Summary] Failed to trigger summary generation for patient ${e}:`,t),{success:!1,error:t}}},QM=async e=>{try{return{data:(await dt.post("/patient/create",e)).data.data.newPatient,error:null}}catch(t){return console.error("There was an error adding the patient:",t),{data:null,error:t}}},Dve=async e=>{try{return console.log(`DEBUG bulkCreatePatients - Sending ${e.length} patients to API`),e.forEach((n,a)=>{console.log(`DEBUG bulkCreatePatients PATIENT ${a} - Gender: ${JSON.stringify(n.gender)}, Type: ${typeof n.gender}`),a<3&&console.log(`DEBUG bulkCreatePatients PATIENT ${a} - Full data:`,JSON.stringify(n,null,2))}),{data:(await dt.post("/patient/bulk-create",{patients:e})).data.data,error:null}}catch(t){return console.error("There was an error in bulk patient creation:",t),{data:null,error:t}}},tT=async e=>{try{return{data:(await dt.get(`/patient/${e}`)).data.data.patient,error:null}}catch(t){return console.error("Error fetching patient details from API:",t),{data:null,error:t}}},Uve=async(e,t,n)=>{try{return{data:(await dt.get("/patient/patients",{params:{name:e,phone:t,date:n}})).data.data.patients,error:null}}catch(a){return console.error("Error fetching patients from API:",a),{data:[],error:a}}},Rve=async e=>{try{return await dt.put(`/patient/${e.id}`,e),{error:null}}catch(t){return{error:t}}},nT=async e=>{try{return{data:(await dt.get(`/patient/search/${e}`)).data.data.patients,error:null}}catch(t){return console.error("Error fetching patient details from API:",t),{data:[],error:t}}},aC=e=>{if(!e)return"";try{const[t,n]=e.split(":");if(!t||!n)return e;let a=new Date;return a=MM(a,parseInt(t)),a=OM(a,parseInt(n)),a=Fve(a,0),a=Ive(a,0),wo(a,"hh:mm a")}catch(t){return console.error("Error formatting time:",e,t),e}},aT=e=>{if(!e)return null;try{const t=typeof e=="string"?fh(e):new Date(e);return RM(new Date,t)}catch(t){return console.error("Error calculating age:",e,t),null}};function GM(e){const t=new Date;t.setHours(0,0,0,0);const n=new Date(e);return n.setHours(0,0,0,0),cme(n,t)||mve(n,t)}const ar=e=>{if(!e)return"";try{let t;if(typeof e=="string"){const n=e.replace(" ","T")+"Z";t=fh(n)}else t=new Date(e);return wo(t,"MMMM d")}catch(t){return console.error("Error formatting date:",e,t),""}},rC=wo(new Date,"MMMM d"),Un=()=>{const e=new Date,t=5.5*60*60*1e3,n=new Date(e.getTime()+t),a=n.getUTCFullYear(),r=String(n.getUTCMonth()+1).padStart(2,"0"),s=String(n.getUTCDate()).padStart(2,"0");return`${a}-${r}-${s}`},Dl=e=>{if(!e)return"";try{const t=typeof e=="string"?fh(e):new Date(e);return wo(t,"MMM d, yyyy")}catch(t){return console.error("Error formatting date for chip:",e,t),e}},Cd=e=>{if(!e)return null;try{const t=fh(e);return fve(t)}catch(t){return console.error("Error converting date to timestamp:",e,t),null}},Nve=e=>{if(!e||e<946684800)return"";try{const t=new Date(e*1e3);return wo(t,"yyyy-MM-dd")}catch(t){return console.error("Error converting timestamp to date:",e,t),""}},gr=[e=>e?!0:"this information is required"],mh=[e=>{if(!e)return"this information is required";const t=e.toString().replace(/\s+/g,"");return/^\d+$/.test(t)?t.length!==10?"Contact number must be exactly 10 digits.":/^0+$/.test(t)||/^(.)\1{9}$/.test(t)?"Please enter a valid phone number.":!0:"Contact number must contain only digits."}],zM=[e=>e?!0:"this information is required"],rT=[e=>{if(!e)return"this information is required.";const t=parseInt(e,10);return isNaN(t)||t<0||t>120?"Age must be a valid number between 0 and 120.":!0}],sT=[e=>{if(!e)return"this information is required.";const t=new Date(e);return GM(t)?"Birth date cannot be today or in the future.":!0}],oT=[e=>e?!0:"this information is required."],nE=[e=>{if(!e)return"this information is required.";const t=new Date(e);return GM(t)?!0:"Appointment date cannot be in the past."}],Eg=[e=>!e||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)||"Please enter a valid email address"],Vve=[e=>{if(!e)return"this information is required";const t=e.toString().replace(/\s+/g,"");return/^\d+$/.test(t)?t.length!==6?"Pincode must be exactly 6 digits.":!0:"Pincode must contain only digits."}],KM=""+new URL("images/add_patient-CvgE6aXm.png",import.meta.url).href,Lve={class:"w-100",style:{"white-space":"normal",overflow:"visible","text-overflow":"unset"}},Mve={class:"text-subtitle-2 mb-1",style:{"white-space":"normal","line-height":"1.3",overflow:"visible","text-overflow":"unset"}},Ove={class:"text-caption",style:{opacity:"0.7"}},Hve={class:"d-flex justify-center"},$ve={class:"d-flex age-dob-container",style:{gap:"8px"}},Qve={class:"d-flex justify-center"},Gve={__name:"add-appointment",props:{doctorId:{type:[String,Number],required:!0},clinicId:{type:[String,Number],required:!0},selectedDate:{type:String,default:()=>Un()}},emits:["close","appointment-created","error"],setup(e,{emit:t}){const n=e,a=Rn(),r=t;let s=null,o=null;const i=V(!1),c=V([]),A=V(""),d=V([]),f=V(!1),m=V(!1),h=V("dob"),p=V(""),y=V({name:"",contact_number:"",age:"",birthDate:"",gender:"",email:""}),g=V(n.selectedDate),w=V(new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Kolkata"})),b=V("walkin"),x=V(n.selectedDate),T=V(new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Kolkata"})),F=V("walkin"),k=ae(()=>n.doctorId),S=ae(()=>n.clinicId),E=ae(()=>a.getters["doctorModule/isProcedurePrimary"]),C=()=>E.value?"procedure":"consultation",D=V(C()),P=V(C()),O=ee=>ee?`${ee.name||""} (${ee.contactNumber||ee.contact_number||""})`:"",H=(ee,z=0,X=!1)=>{if(z===0)return"First time patient";if(X&&z>1)return ee?`Has appointment today  Last visit: ${Dl(ee)}`:"Has appointment today";if(X&&z===1)return"First visit today";if(ee){const le=Un(),re=ee;if(re<le)return`Last visit: ${Dl(re)}`;if(re>le)return`Next visit: ${Dl(re)}`}return"No previous visits"},ie=ae(()=>!A.value||A.value.length<1?"Start typing to search for patients":f.value?`No patients found matching "${A.value}"`:""),Ae=V(!1),j=V(!1),J=ee=>{const z=ee.target.value.replace(/[^0-9]/g,"").slice(0,10);y.value.contact_number=z},ue=ee=>{if(h.value==="dob")if(ee){p.value=ee;const z=aT(ee);z!==null&&(y.value.age=z.toString())}else p.value=""};Ke(h,ee=>{ee==="age"?(y.value.birthDate&&(p.value=y.value.birthDate),y.value.birthDate=""):p.value&&(y.value.birthDate=p.value)});const ne=async ee=>{if(!ee||ee.length<1){c.value=[],f.value=!1;return}o&&o.abort(),o=new AbortController,i.value=!0,f.value=!1;try{const z=await nT(ee,{signal:o.signal});o.signal.aborted||(c.value=z.data,(!c.value||c.value.length===0)&&(f.value=!0))}catch(z){z.name!=="AbortError"&&(console.error("Error fetching patients:",z),f.value=!0)}finally{o?.signal.aborted||(i.value=!1)}};Ke(A,ee=>{s&&clearTimeout(s),f.value=!1,s=setTimeout(()=>{ne(ee)},300)}),Ke(E,(ee,z)=>{if(ee===z)return;const X=ee?"procedure":"consultation",le=z?"procedure":"consultation";D.value===le&&(D.value=X),P.value===le&&(P.value=X)},{immediate:!1});const Y=()=>{m.value=!m.value,m.value&&(h.value="dob",p.value="",y.value={name:"",contact_number:"",age:"",birthDate:"",gender:"",email:""})},te=async()=>{const ee={...y.value};if(h.value==="dob"&&ee.birthDate){const le=Cd(ee.birthDate);le!==null?ee.birthDate=le.toString():ee.birthDate=""}else delete ee.birthDate;const z=await QM(ee),X=z.data.id;z.error?console.error("There was an error adding the patient:",z.error):N(X,k.value,S.value)},L=async(ee,z,X)=>{const le={patientId:ee,clinicId:X,doctorId:z,appointmentDate:g.value,appointmentTime:w.value,status:"waiting",category:b.value,type:D.value};try{await dt.post("/appointment/",le),E.value||await q(ee,k.value,g.value),r("appointment-created",{success:!0,message:"Appointment created successfully"}),Q()}catch(re){console.error("There was an error creating new appointment:",re),re.response?.status===409?r("error",{title:"Appointment Already Exists",message:"An appointment for this patient with the same doctor, clinic, and date already exists. Please choose a different date.",type:"warning"}):re.response?.status===404?r("error",{title:"Patient Not Found",message:"The selected patient could not be found. Please try searching again.",type:"error"}):re.response?.status===400?r("error",{title:"Invalid Data",message:re.response.data?.error||"Please check your appointment details and try again.",type:"error"}):r("error",{title:"Error Creating Appointment",message:"An unexpected error occurred while creating the appointment. Please try again.",type:"error"})}},N=async(ee,z,X)=>{const le={patientId:ee,clinicId:X,doctorId:z,appointmentDate:x.value,appointmentTime:T.value,status:"waiting",category:F.value,type:P.value};try{await dt.post("/appointment/",le),E.value||await q(ee,k.value,x.value),r("appointment-created",{success:!0,message:"Patient and appointment created successfully"}),Q()}catch(re){console.error("There was an error creating new appointment:",re),re.response?.status===409?r("error",{title:"Appointment Already Exists",message:"An appointment for this patient with the same doctor, clinic, and date already exists. Please choose a different date.",type:"warning"}):re.response?.status===404?r("error",{title:"Patient Not Found",message:"The selected patient could not be found. Please try searching again.",type:"error"}):re.response?.status===400?r("error",{title:"Invalid Data",message:re.response.data?.error||"Please check your appointment details and try again.",type:"error"}):r("error",{title:"Error Creating Appointment",message:"An unexpected error occurred while creating the appointment. Please try again.",type:"error"})}},q=async(ee,z,X=null)=>{await eT(ee,z,X)},Q=()=>{r("close")};return da(()=>{s&&(clearTimeout(s),s=null),o&&(o.abort(),o=null)}),(ee,z)=>{const X=I("v-card-title"),le=I("v-col"),re=I("v-icon"),de=I("v-btn"),G=I("v-row"),Z=I("v-card"),ce=I("v-list-item"),Se=I("v-divider"),Pe=I("v-card-subtitle"),ye=I("v-list"),Ce=I("v-autocomplete"),_e=I("v-card-text"),De=I("v-text-field"),xe=I("v-select"),Te=I("v-form"),Me=I("v-btn-toggle"),et=I("v-empty-state");return U(),pe(Z,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[l(G,{"no-gutters":""},{default:u(()=>[l(le,{cols:"12"},{default:u(()=>[l(Z,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(G,{"no-gutters":""},{default:u(()=>[l(le,{cols:"11"},{default:u(()=>[l(X,{class:"pa-0 pl-2"},{default:u(()=>[...z[25]||(z[25]=[M("Add patient to queue",-1)])]),_:1})]),_:1}),l(le,{cols:"1"},{default:u(()=>[l(de,{icon:"",size:"x-small",onClick:Q,tabindex:"-1"},{default:u(()=>[l(re,null,{default:u(()=>[...z[26]||(z[26]=[v("img",{src:ou,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(G,{"no-gutters":""},{default:u(()=>[l(le,{cols:"12"},{default:u(()=>[l(Z,{flat:"",class:"d-flex justify-center ma-2",color:"surfaceContainer"},{default:u(()=>[l(Ce,{ref:"searchRef",density:"compact",placeholder:"Search by name or phone",style:{width:"90%","max-width":"700px"},theme:"light",variant:"solo",rounded:"l",items:c.value,search:A.value,"onUpdate:search":z[2]||(z[2]=lt=>A.value=lt),loading:i.value,"item-title":O,"item-value":"id","return-object":"",modelValue:d.value,"onUpdate:modelValue":z[3]||(z[3]=lt=>d.value=lt),chips:"",clearable:"","prepend-inner-icon":"mdi-magnify","no-data-text":ie.value,"menu-props":{maxHeight:"400px",closeOnContentClick:!1}},{item:u(({props:lt,item:Re,index:Le})=>[l(ye,{density:"compact",class:"pa-0 py-1"},{default:u(()=>[l(ce,Ue(lt,{class:"py-0 my-0",style:{"min-height":"60px"}}),{default:u(()=>[v("div",Lve,[v("div",Mve," ID: "+K(Re.raw.id)+"  "+K(Re.raw.gender)+", "+K(Re.raw.age)+" yrs  Added On: "+K($e(Dl)(Re.raw.createdAt))+K(Re.raw.importID?`  Import ID:
                      ${Re.raw.importID}`:""),1),v("div",Ove,K(H(Re.raw.lastAppointmentDate,Re.raw.totalAppointments,Re.raw.hasAppointmentToday)),1)])]),_:2},1040),Le===c.value.length-1?(U(),me(We,{key:0},[l(Se),l(Z,{flat:"",class:"pt-1"},{default:u(()=>[l(Pe,null,{default:u(()=>[...z[27]||(z[27]=[M("Patient not in list ?",-1)])]),_:1}),l(de,{class:"ml-3",variant:"outlined",onClick:z[0]||(z[0]=nt=>{ee.$refs.searchRef.blur(),Y()})},{default:u(()=>[...z[28]||(z[28]=[M("Add New",-1)])]),_:1})]),_:1})],64)):ge("",!0)]),_:2},1024)]),"no-data":u(()=>[l(ye,{density:"compact"},{default:u(()=>[l(ce,null,{default:u(()=>[l(Pe,null,{default:u(()=>[M(K(ie.value),1)]),_:1})]),_:1}),f.value&&A.value&&A.value.length>=1?(U(),me(We,{key:0},[l(Se),l(Z,{flat:"",class:"pt-1"},{default:u(()=>[l(Pe,null,{default:u(()=>[...z[29]||(z[29]=[M("Patient not in list ?",-1)])]),_:1}),l(de,{class:"ml-3",variant:"outlined",onClick:z[1]||(z[1]=lt=>{ee.$refs.searchRef.blur(),Y()})},{default:u(()=>[...z[30]||(z[30]=[M("Add New",-1)])]),_:1})]),_:1})],64)):ge("",!0)]),_:1})]),append:u(()=>[l(de,{variant:"elevated",icon:m.value?"mdi-close":"mdi-plus",onClick:Y,rounded:"xl"},null,8,["icon"])]),_:1},8,["items","search","loading","modelValue","no-data-text"])]),_:1})]),_:1})]),_:1}),l(G,{"no-gutters":""},{default:u(()=>[l(le,{cols:"12",class:"scroll-element"},{default:u(()=>[l(Z,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[d.value&&d.value.id?(U(),me(We,{key:0},[l(Z,{flat:"",class:"text-left",variant:"text"},{default:u(()=>[l(_e,{class:"ma-0 pa-0 pl-4 mb-1"},{default:u(()=>[l(G,{"no-gutters":""},{default:u(()=>[l(le,{cols:"6"},{default:u(()=>[M(K(`Name: ${d.value.name}`),1)]),_:1}),l(le,{cols:"6"},{default:u(()=>[M(K(`Gender: ${d.value.gender}`),1)]),_:1})]),_:1}),l(G,{"no-gutters":""},{default:u(()=>[l(le,{cols:"6"},{default:u(()=>[M(K(`Contact: ${d.value.contactNumber}`),1)]),_:1}),l(le,{cols:"6"},{default:u(()=>[M(K(d.value.age!==null?`Age: ${d.value.age} yrs`:""),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(Z,{flat:"",class:"text-left",variant:"text"},{default:u(()=>[l(Te,{modelValue:Ae.value,"onUpdate:modelValue":z[10]||(z[10]=lt=>Ae.value=lt),"validate-on":"input"},{default:u(()=>[l(G,{"no-gutters":""},{default:u(()=>[l(le,{cols:"12"},{default:u(()=>[l(De,{label:"Appointment Date *",modelValue:g.value,"onUpdate:modelValue":z[4]||(z[4]=lt=>g.value=lt),type:"date",density:"compact",rules:$e(nE),class:"date-input",onClick:z[5]||(z[5]=lt=>lt.target.showPicker&&lt.target.showPicker())},null,8,["modelValue","rules"])]),_:1}),l(le,{cols:"12"},{default:u(()=>[l(De,{label:"Appointment Time",modelValue:w.value,"onUpdate:modelValue":z[6]||(z[6]=lt=>w.value=lt),type:"time",density:"compact"},null,8,["modelValue"])]),_:1}),l(le,{cols:"12"},{default:u(()=>[l(xe,{modelValue:D.value,"onUpdate:modelValue":z[7]||(z[7]=lt=>D.value=lt),items:["consultation","followup","procedure"],label:"Appointment Type"},null,8,["modelValue"])]),_:1}),l(le,{cols:"12"},{default:u(()=>[l(xe,{modelValue:b.value,"onUpdate:modelValue":z[8]||(z[8]=lt=>b.value=lt),items:["walkin","scheduled"],label:"Appointment Category"},null,8,["modelValue"])]),_:1}),l(le,{cols:"12"},{default:u(()=>[l(Se,{class:"mb-2"}),v("div",Hve,[l(de,{variant:"outlined",onClick:z[9]||(z[9]=lt=>L(d.value.id,k.value,S.value)),disabled:!Ae.value},{default:u(()=>[...z[31]||(z[31]=[M("Add to Queue",-1)])]),_:1},8,["disabled"])])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)):m.value?(U(),pe(Z,{key:1,flat:"",class:"text-left",variant:"text"},{default:u(()=>[l(Te,{modelValue:j.value,"onUpdate:modelValue":z[24]||(z[24]=lt=>j.value=lt),"validate-on":"input"},{default:u(()=>[l(G,{"no-gutters":"",class:"mt-0 mb-4"},{default:u(()=>[l(le,{cols:"6",class:"pr-2"},{default:u(()=>[l(De,{label:"Name *",modelValue:y.value.name,"onUpdate:modelValue":z[11]||(z[11]=lt=>y.value.name=lt),clearable:"",rules:$e(gr),density:"compact","hide-details":"auto"},null,8,["modelValue","rules"])]),_:1}),l(le,{cols:"6",class:"pl-2"},{default:u(()=>[l(De,{label:"Phone Number *",modelValue:y.value.contact_number,"onUpdate:modelValue":z[12]||(z[12]=lt=>y.value.contact_number=lt),type:"tel",rules:$e(mh),clearable:"",density:"compact",maxlength:"10",onInput:J,"hide-details":"auto"},null,8,["modelValue","rules"])]),_:1})]),_:1}),l(G,{"no-gutters":"",class:"my-4"},{default:u(()=>[l(le,{cols:"6",class:"pr-2"},{default:u(()=>[v("div",$ve,[l(Me,{modelValue:h.value,"onUpdate:modelValue":z[13]||(z[13]=lt=>h.value=lt),mandatory:"",density:"compact",variant:"outlined",divided:"",class:"age-dob-toggle"},{default:u(()=>[l(de,{value:"dob",size:"small"},{default:u(()=>[...z[32]||(z[32]=[M("DOB",-1)])]),_:1}),l(de,{value:"age",size:"small"},{default:u(()=>[...z[33]||(z[33]=[M("Age",-1)])]),_:1})]),_:1},8,["modelValue"]),h.value==="age"?(U(),pe(De,{key:0,label:"Age (yrs) *",modelValue:y.value.age,"onUpdate:modelValue":z[14]||(z[14]=lt=>y.value.age=lt),clearable:"",density:"compact",rules:$e(rT),disabled:!!y.value.birthDate||!!p.value,class:"flex-grow-1","hide-details":"auto"},null,8,["modelValue","rules","disabled"])):(U(),pe(De,{key:1,label:"Date of Birth *",modelValue:y.value.birthDate,"onUpdate:modelValue":[z[15]||(z[15]=lt=>y.value.birthDate=lt),ue],type:"date",clearable:"",density:"compact",rules:$e(sT),class:"flex-grow-1 date-input","hide-details":"auto",onClick:z[16]||(z[16]=lt=>lt.target.showPicker&&lt.target.showPicker())},null,8,["modelValue","rules"]))])]),_:1}),l(le,{cols:"6",class:"pl-2"},{default:u(()=>[l(xe,{modelValue:y.value.gender,"onUpdate:modelValue":z[17]||(z[17]=lt=>y.value.gender=lt),items:["Male","Female"],label:"Gender *",clearable:"",density:"compact",rules:$e(oT),"hide-details":"auto"},null,8,["modelValue","rules"])]),_:1})]),_:1}),l(G,{"no-gutters":"",class:"my-4"},{default:u(()=>[l(le,{cols:"12"},{default:u(()=>[l(De,{label:"Email (optional)",modelValue:y.value.email,"onUpdate:modelValue":z[18]||(z[18]=lt=>y.value.email=lt),type:"email",clearable:"",density:"compact",rules:$e(Eg),"hide-details":"auto"},null,8,["modelValue","rules"])]),_:1})]),_:1}),l(G,{"no-gutters":"",class:"my-4"},{default:u(()=>[l(le,{cols:"6",class:"pr-2"},{default:u(()=>[l(De,{label:"Appointment Date *",modelValue:x.value,"onUpdate:modelValue":z[19]||(z[19]=lt=>x.value=lt),type:"date",density:"compact",rules:$e(nE),class:"date-input",onClick:z[20]||(z[20]=lt=>lt.target.showPicker&&lt.target.showPicker()),"hide-details":"auto"},null,8,["modelValue","rules"])]),_:1}),l(le,{cols:"6",class:"pl-2"},{default:u(()=>[l(De,{label:"Appointment Time",modelValue:T.value,"onUpdate:modelValue":z[21]||(z[21]=lt=>T.value=lt),type:"time",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1})]),_:1}),l(G,{"no-gutters":"",class:"my-4"},{default:u(()=>[l(le,{cols:"6",class:"pr-2"},{default:u(()=>[l(xe,{modelValue:P.value,"onUpdate:modelValue":z[22]||(z[22]=lt=>P.value=lt),items:["consultation","followup","procedure"],label:"Appointment Type",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1}),l(le,{cols:"6",class:"pl-2"},{default:u(()=>[l(xe,{modelValue:F.value,"onUpdate:modelValue":z[23]||(z[23]=lt=>F.value=lt),items:["walkin","scheduled"],label:"Appointment Category",density:"compact","hide-details":"auto"},null,8,["modelValue"])]),_:1})]),_:1}),l(G,{"no-gutters":""},{default:u(()=>[l(le,{cols:"12"},{default:u(()=>[l(Se,{class:"mb-2"}),v("div",Qve,[l(de,{variant:"outlined",disabled:!j.value,onClick:te},{default:u(()=>[...z[34]||(z[34]=[M("Create and Add to Queue ",-1)])]),_:1},8,["disabled"])])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})):(U(),pe(et,{key:2,image:$e(KM)},{title:u(()=>[...z[35]||(z[35]=[v("div",{class:"text-subtitle-2 mt-8"}," Search for old patients or add a new patient above ",-1)])]),text:u(()=>[...z[36]||(z[36]=[v("div",{class:"text-caption"},null,-1)])]),_:1},8,["image"]))]),_:1})]),_:1})]),_:1})]),_:1})}}},sU=Xt(Gve,[["__scopeId","data-v-944161e8"]]),zve=async(e,t,n=null)=>{try{console.log("fetchAppointments called with params:",{doctor_id:e,clinic_id:t,date:n});const a={doctor_id:e,clinic_id:t};return n?(a.date=n,console.log("Adding date to params:",n)):console.log("No date provided, will use server default (today)"),console.log("Final API params:",a),{data:(await dt.get("/appointment/",{params:a})).data.data.appointments,error:null}}catch(a){return console.error("There was an error fetching the patients:",a?.response||a),{data:[],error:a}}},Kve=async(e="",t="")=>{try{const n={};e&&e.trim()!==""&&(n.doctor=e.trim()),t&&t.trim()!==""&&(n.fromdate=t.trim());const a=await dt.get("/appointment/completed",{params:n});return{data:a.data.data.appointments||[],total:a.data.data.total||0,filters:a.data.data.filters||{},error:null}}catch(n){return console.error("There was an error fetching completed appointments:",n?.response||n),{data:[],total:0,filters:{},error:n}}},WM=async e=>{try{return await dt.put(`/appointment/${e.id}`,e),{error:null}}catch(t){return console.error("Error updating consultation:",t),{error:t}}},Wve=async e=>{try{return await dt.delete(`/appointment/${e}`),{error:null}}catch(t){return console.error("Error deleting appointment:",t),{error:t}}},jve={class:"d-flex justify-center"},oU={__name:"edit-appointment",props:{appointment:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const r=V((d=>{console.log("Edit appointment - original appointment:",d);const f={...d};if(f.appointmentDate){console.log("Original appointmentDate:",f.appointmentDate);let m=f.appointmentDate;if(m.includes("T")?m=m.split("T")[0]:m.length>10&&(m=m.split(" ")[0]),/^\d{4}-\d{2}-\d{2}$/.test(m))f.appointmentDate=m;else try{const p=new Date(m);if(!isNaN(p.getTime())){const y=p.getFullYear(),g=String(p.getMonth()+1).padStart(2,"0"),w=String(p.getDate()).padStart(2,"0");f.appointmentDate=`${y}-${g}-${w}`}}catch(p){console.error("Error parsing appointment date:",m,p)}console.log("Formatted appointmentDate:",f.appointmentDate)}return f.category||(f.category="scheduled"),f.status||(f.status="waiting"),f})(e.appointment)),s=t,o=V(!1),i=()=>{s("close")},c=async()=>{await A(r.value),console.log("close modal",r.value),s("close")},A=async d=>{(await WM(d)).error?console.error("Error updating consultation:"):console.log("Appointment updated successfully")};return(d,f)=>{const m=I("v-card-title"),h=I("v-col"),p=I("v-icon"),y=I("v-btn"),g=I("v-row"),w=I("v-card"),b=I("v-text-field"),x=I("v-select"),T=I("v-divider"),F=I("v-form");return U(),pe(w,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[l(g,{"no-gutters":""},{default:u(()=>[l(h,{cols:"12"},{default:u(()=>[l(w,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(g,{"no-gutters":""},{default:u(()=>[l(h,{cols:"11"},{default:u(()=>[l(m,{class:"pa-0 pl-2"},{default:u(()=>[...f[7]||(f[7]=[M("Edit appointment details",-1)])]),_:1})]),_:1}),l(h,{cols:"1"},{default:u(()=>[l(y,{icon:"",size:"x-small",onClick:i},{default:u(()=>[l(p,null,{default:u(()=>[...f[8]||(f[8]=[v("img",{src:ou,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(g,{"no-gutters":""},{default:u(()=>[l(h,{cols:"12"},{default:u(()=>[l(w,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(F,{modelValue:o.value,"onUpdate:modelValue":f[6]||(f[6]=k=>o.value=k),"validate-on":"blur"},{default:u(()=>[l(g,{"no-gutters":""},{default:u(()=>[l(h,{cols:"12"},{default:u(()=>[l(b,{label:"Appointment Date *",modelValue:r.value.appointmentDate,"onUpdate:modelValue":f[0]||(f[0]=k=>r.value.appointmentDate=k),type:"date",rules:$e(nE)},null,8,["modelValue","rules"])]),_:1}),l(h,{cols:"12"},{default:u(()=>[l(b,{label:"Appointment Time",modelValue:r.value.appointmentTime,"onUpdate:modelValue":f[1]||(f[1]=k=>r.value.appointmentTime=k),type:"time"},null,8,["modelValue"])]),_:1}),l(h,{cols:"12"},{default:u(()=>[l(x,{modelValue:r.value.type,"onUpdate:modelValue":f[2]||(f[2]=k=>r.value.type=k),items:["consultation","followup","procedure"],label:"Appointment Type"},null,8,["modelValue"])]),_:1}),l(h,{cols:"12"},{default:u(()=>[l(x,{modelValue:r.value.category,"onUpdate:modelValue":f[3]||(f[3]=k=>r.value.category=k),items:["walkin","scheduled"],label:"Appointment Category"},null,8,["modelValue"])]),_:1}),l(h,{cols:"12"},{default:u(()=>[l(x,{modelValue:r.value.status,"onUpdate:modelValue":f[4]||(f[4]=k=>r.value.status=k),items:[{title:"waiting",value:"waiting"},{title:"confirmed",value:"confirmed"},{title:"completed",value:"completed"},{title:"cancelled",value:"cancelled"}],label:"Appointment Status","item-title":"title","item-value":"value"},null,8,["modelValue"])]),_:1}),l(h,{cols:"12"},{default:u(()=>[l(T,{class:"mb-2"}),v("div",jve,[l(y,{variant:"outlined",onClick:f[5]||(f[5]=k=>c()),disabled:!o.value},{default:u(()=>[...f[9]||(f[9]=[M("Update Appointment",-1)])]),_:1},8,["disabled"])])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},qve=async e=>{try{return!e||e.trim().length===0?{data:{services:[]},error:null}:{data:(await dt.get(`/services/search_services/${encodeURIComponent(e)}`)).data.data,error:null}}catch(t){return console.error("Error searching services:",t),{data:null,error:t}}},Yve=async()=>{try{return{data:(await dt.get("/services/all")).data.data,error:null}}catch(e){return console.error("Error fetching all services:",e),{data:null,error:e}}},Xve=async e=>{try{if(!e)throw new Error("Doctor ID is required");return{data:(await dt.get(`/paymentreceipt/next-identifier/${e}`)).data.data,error:null}}catch(t){return console.error("Error getting next receipt identifier:",t),t.response?.status===400&&t.response?.data?.error?.includes("No receipt series found")?{data:null,error:{message:"No receipt series found. Please create a receipt series first in Admin Settings  Payment Receipt Series Configuration.",needsSeries:!0}}:{data:null,error:t}}},jM=async e=>{try{if(!e.doctorId)throw new Error("Doctor ID is required");if(!e.appointmentId&&!e.billId)throw new Error("Either Appointment ID or Bill ID is required");if(!e.billId&&(!e.services||!Array.isArray(e.services)||e.services.length===0))throw new Error("At least one service is required when Bill ID is not provided");return{data:(await dt.post("/paymentreceipt/with-services",e)).data.data,error:null}}catch(t){if(console.error("Error creating receipt with services:",t),t.response?.status===500){const n=t.response?.data?.error||t.message||"";if(n.includes("No receipt series found")||n.includes("receipt series")||t.response?.data&&JSON.stringify(t.response.data).includes("receipt series"))return{data:null,error:{message:"No receipt series found. Please create a receipt series first in Admin Settings  Payment Receipt Series Configuration.",needsSeries:!0}}}return t.response?.status===400&&t.response?.data?.error?.includes("No receipt series found")?{data:null,error:{message:"No receipt series found. Please create a receipt series first in Admin Settings  Payment Receipt Series Configuration.",needsSeries:!0}}:{data:null,error:t}}},qM=async e=>{try{if(!e)throw new Error("Receipt ID is required");return{data:(await dt.get(`/paymentreceipt/${e}/with-services`)).data.data,error:null}}catch(t){return console.error("Error getting receipt with services:",t),{data:null,error:t}}},Jve=async(e,t)=>{try{if(!e)throw new Error("Receipt ID is required");if(!t.services||!Array.isArray(t.services)||t.services.length===0)throw new Error("At least one service is required");return{data:(await dt.put(`/paymentreceipt/${e}/with-services`,t)).data.data,error:null}}catch(n){return console.error("Error updating receipt with services:",n),{data:null,error:n}}},Zve=async(e,t)=>{try{if(!e)throw new Error("Receipt ID is required");console.log(`Updating payment receipt ${e} with data:`,t);const n=await dt.put(`/paymentreceipt/${e}`,t);return console.log("Payment receipt updated successfully via basic endpoint"),{data:n.data.data,error:null}}catch(n){return console.error("Error updating payment receipt:",n),n.response&&console.error("API Error Response:",n.response.status,n.response.data),{data:null,error:n}}},ehe={class:"service-name-truncate"},the={class:"text-caption"},nhe={class:"ml-3"},ahe={key:0,class:"ml-3"},rhe={__name:"search-service",props:{modelValue:{type:String,default:""}},emits:["update:modelValue","serviceSelected"],setup(e,{emit:t}){const n=e,a=t,r=V(!1),s=V([]),o=V([]),i=V(!1),c=V(""),A=V(""),d=V(!1);let f=null;const m=b=>{c.value=b,i.value&&o.value.length>0?y(b):i.value||h()},h=async()=>{i.value?(!c.value||c.value.length===0)&&(s.value=o.value,d.value=!1):await p()};Ke(A,b=>{typeof b=="string"?(a("update:modelValue",b),a("serviceSelected",{serviceDescription:b,isUserTyped:!0,isFromHistory:!1})):b&&typeof b=="object"?(a("update:modelValue",b.serviceDescription),a("serviceSelected",b)):b||(a("update:modelValue",""),a("serviceSelected",null))}),Ke(c,b=>{if(f&&clearTimeout(f),d.value=!1,i.value&&o.value.length>0){if(!b||b.length<1){s.value=o.value,r.value=!1;return}y(b);return}if(!b||b.length<1){r.value=!1,s.value=[];return}f=setTimeout(()=>{g(b)},300)}),Ke(()=>n.modelValue,b=>{b!==A.value&&(A.value=b)},{immediate:!0});const p=async()=>{if(!i.value){r.value=!0,d.value=!1;try{const b=await Yve();if(b.error){console.error("Error fetching all services:",b.error),d.value=!0;return}o.value=(b.data.services||[]).filter(x=>x.serviceDescription&&x.serviceDescription.trim().length>0),i.value=!0,s.value=o.value,c.value&&c.value.length>0&&y(c.value)}catch(b){console.error("Error fetching all services:",b),d.value=!0}finally{r.value=!1}}},y=b=>{if(!b||b.trim().length===0){s.value=o.value,d.value=!1;return}const x=b.toLowerCase().trim(),T=o.value.filter(F=>(F.serviceDescription||"").toLowerCase().includes(x));s.value=T,d.value=T.length===0},g=async b=>{if(!(!b||b.length<1)){r.value=!0,d.value=!1;try{const x=await qve(b);if(x.error){console.error("Error fetching services:",x.error),d.value=!0;return}s.value=x.data.services.filter(T=>T.serviceDescription&&T.serviceDescription.trim().length>0),(!s.value||s.value.length===0)&&(d.value=!0)}catch(x){console.error("Error fetching services:",x),d.value=!0}finally{r.value=!1}}},w=ae(()=>r.value?i.value?"Filtering services...":"Loading services...":d.value?"No matching services found. You can create a new service by typing the description.":!c.value||c.value.length<1?i.value&&o.value.length>0?`Showing all ${o.value.length} services. Type to filter...`:"Click to view all services or type to search...":"");return(b,x)=>{const T=I("v-list-item"),F=I("v-card-subtitle"),k=I("v-card"),S=I("v-combobox");return U(),pe(S,{modelValue:A.value,"onUpdate:modelValue":x[0]||(x[0]=E=>A.value=E),items:s.value,search:c.value,"onUpdate:search":m,"onClick:clear":h,onFocus:h,onClick:h,"item-title":"serviceDescription","item-value":"serviceDescription",placeholder:"Type service description...",variant:"underlined",loading:r.value,"no-data-text":w.value,clearable:"","hide-no-data":"","auto-select-first":"",density:"compact",class:"service-combobox"},{item:u(({props:E,item:C,index:D})=>[(U(),pe(T,Ue({...E,title:void 0,value:C.raw.id||`service-${D}`},{key:C.raw.id||`service-temp-${D}`,density:"compact"}),{title:u(()=>[v("span",ehe,K(C.raw.serviceDescription),1)]),subtitle:u(()=>[v("div",the,[v("span",null,"Base Cost: "+K(C.raw.baseCost),1),v("span",nhe,"GST: "+K(C.raw.gstPercent||0)+"%",1),C.raw.hsnSacCode?(U(),me("span",ahe,"HSN/SAC: "+K(C.raw.hsnSacCode),1)):ge("",!0)])]),_:2},1040))]),"no-data":u(()=>[l(k,{flat:"",class:"pa-4 text-center"},{default:u(()=>[l(F,null,{default:u(()=>[M(K(w.value),1)]),_:1})]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},Cw=Xt(rhe,[["__scopeId","data-v-62266e1f"]]),vh=async e=>{try{return console.log("Creating payment with data:",e),{success:!0,data:(await dt.post("/payment",e)).data.data,message:"Payment created successfully"}}catch(t){return console.error("Error creating payment:",t),{success:!1,error:{message:t.response?.data?.error||t.message||"Failed to create payment",status:t.response?.status||500}}}},Bg=async e=>{try{console.log("Fetching payments for receipt ID:",e);const t=await dt.get(`/payment?paymentReceiptId=${e}`);return console.log("Raw API response:",t.data),{success:!0,data:t.data.data.payments,message:"Payments fetched successfully"}}catch(t){return console.error("Error fetching payments by receipt:",t),{success:!1,error:{message:t.response?.data?.error||t.message||"Failed to fetch payments",status:t.response?.status||500}}}},iT=async e=>{try{return console.log("Deleting payment with ID:",e),{success:!0,data:(await dt.delete(`/payment/${e}`)).data.data,message:"Payment deleted successfully"}}catch(t){return console.error("Error deleting payment:",t),{success:!1,error:{message:t.response?.data?.error||t.message||"Failed to delete payment",status:t.response?.status||500}}}},YM=async(e="",t=null,n=null)=>{try{console.log("Fetching payment receipts with filters:",{paymentReceiptDate:e,doctorId:t,treatmentPlanId:n});const a=new URLSearchParams;e&&a.append("paymentReceiptDate",e),t&&a.append("doctor_id",t.toString()),n&&a.append("treatmentPlanId",n.toString());const r=a.toString()?`/paymentreceipt?${a.toString()}`:"/paymentreceipt";return{success:!0,data:(await dt.get(r)).data.data,message:"Payment receipts fetched successfully"}}catch(a){return console.error("Error fetching payment receipts:",a),{success:!1,error:{message:a.response?.data?.error||a.message||"Failed to fetch payment receipts",status:a.response?.status||500}}}},XM=async(e,t,n,a=null)=>{try{const r=e.state.doctorModule?.doctorId;if(!r)throw new Error("No doctor selected. Please select a doctor first.");return console.log("Fetching payment receipts for date range:",{startDate:t,endDate:n,doctorId:r,treatmentPlanId:a}),await JM(t,n,r,a)}catch(r){return console.error("Error fetching payment receipts for date range:",r),{success:!1,error:{message:r.message||"Failed to fetch payment receipts for date range",status:500}}}},JM=async(e,t,n=null,a=null)=>{try{console.log("Fetching payment receipts for date range with filters:",{startDate:e,endDate:t,doctorId:n,treatmentPlanId:a});const r=new URLSearchParams;e&&r.append("startDate",e),t&&r.append("endDate",t),n&&r.append("doctor_id",n.toString()),a&&r.append("treatmentPlanId",a.toString());const s=`/paymentreceipt?${r.toString()}`;return{success:!0,data:(await dt.get(s)).data.data,message:"Payment receipts fetched successfully for date range"}}catch(r){return console.error("Error fetching payment receipts for date range:",r),{success:!1,error:{message:r.response?.data?.error||r.message||"Failed to fetch payment receipts for date range",status:r.response?.status||500}}}},Sw=async(e,t="",n=null)=>{try{const a=e.state.doctorModule?.doctorId;if(!a)throw new Error("No doctor selected. Please select a doctor first.");return console.log("Fetching payment receipts for current doctor:",a,"treatmentPlanId:",n),await YM(t,a,n)}catch(a){return console.error("Error fetching payment receipts for current doctor:",a),{success:!1,error:{message:a.message||"Failed to fetch payment receipts for current doctor",status:500}}}},hh=["Cash","Card","UPI","Bank Transfer","Cheque","Online","Other"],Ar=e=>!e&&e!==0?"0":`${Number(e).toLocaleString("en-IN")}`,she=Object.freeze(Object.defineProperty({__proto__:null,PAYMENT_MODES:hh,createPayment:vh,deletePayment:iT,fetchAllPaymentReceipts:YM,fetchAllPaymentReceiptsForDateRange:JM,fetchPaymentReceiptsForCurrentDoctor:Sw,fetchPaymentReceiptsForDateRange:XM,formatPaymentAmount:Ar,getPaymentsByReceipt:Bg},Symbol.toStringTag,{value:"Module"})),aE=async(e,t,n,a="",r="",s="",o=0)=>{try{return{data:(await dt.post("/treatmentplan/",{patient_id:e,doctor_id:t,treatmentplan_name:n,start_date:a,end_date:r,notes:s,amount_paid:o})).data.data,error:null}}catch(i){return console.error("There was an error creating the treatment plan:",i),{data:null,error:i}}},lT=async(e,t)=>{try{if(!e)throw new Error("patient_id is required");if(!t)throw new Error("doctor_id is required");console.log(" Making API call to:",`/treatmentplan/patient/${e}/doctor/${t}`);const n=await dt.get(`/treatmentplan/patient/${e}/doctor/${t}`);return console.log(" API Response status:",n.status),console.log(" API Response treatment plans count:",n.data?.data?.length||0),{data:Qn.cloneDeep(n.data.data),error:null}}catch(n){if(console.error(" Error fetching treatment plans:",n),console.error(" Error details:",{message:n.message,status:n.response?.status,statusText:n.response?.statusText,data:n.response?.data,url:n.config?.url,sqlError:n.response?.data?.error,sqlMessage:n.response?.data?.message}),n.response?.status===500){const a=n.response?.data?.message||n.response?.data?.error||n.message;if(a.includes("treatmentplan")&&(a.includes("table")||a.includes("relation")||a.includes("does not exist")))return console.error(" Database table 'treatmentplan' might not exist or have incorrect schema"),{data:[],error:{...n,message:"Treatment plans table not found or has incorrect schema. Please check database setup.",type:"DATABASE_TABLE_ERROR"}}}return{data:[],error:n}}},Cf=async e=>{try{const t=await dt.get(`/treatmentplan/${e}`);return{data:Qn.cloneDeep(t.data.data),error:null}}catch(t){return console.error("Error fetching treatment plan details:",t),{data:null,error:t}}},ZM=async e=>{try{return await dt.delete(`/treatmentplan/${e}`),{error:null}}catch(t){return console.error("Error deleting treatment plan:",t),{error:{message:t.response?.data?.error||t.message||"Failed to delete treatment plan",status:t.response?.status,originalError:t}}}},eO=async(e="",t)=>{try{if(!t)throw new Error("Doctor ID is required");const n=new URLSearchParams;e&&n.append("search",e),n.append("doctor_id",t);const a=`/procedure/?${n.toString()}`,r=await dt.get(a);return{data:Qn.cloneDeep(r.data.data),error:null}}catch(n){return console.error("Error fetching procedures:",n),{data:[],error:n}}},uT=async(e,t=0,n="",a=!0,r="",s="",o)=>{try{if(!o)throw new Error("Doctor ID is required");const i=new URLSearchParams;return i.append("doctor_id",o),{data:(await dt.post(`/procedure/?${i.toString()}`,{procedure_name:e,cost:t,description:n,isLocal:a,procedureId:r,identifier:s})).data.data,error:null}}catch(i){return console.error("There was an error creating the procedure:",i),{data:null,error:i}}},tO=async(e,t,n)=>{try{if(!n)throw new Error("Doctor ID is required");const a=new URLSearchParams;a.append("doctor_id",n);const r=await dt.put(`/procedure/${e}?${a.toString()}`,t);return{data:Qn.cloneDeep(r.data.data),error:null}}catch(a){return console.error("Error updating procedure:",a),{data:null,error:a}}},Sp=async(e,t,n=0,a="",r="",s="")=>{try{return{data:(await dt.post(`/treatmentplan/${e}/procedure`,{procedure_id:t,cost_estimate:n,notes:a,location:r,option:s})).data.data,error:null}}catch(o){return console.error("There was an error creating the treatment plan-procedure mapping:",o),{data:null,error:o}}},rE=async(e,t,n)=>{try{return{data:(await dt.put(`/treatmentplan/${e}/procedure-treatment/${t}`,n)).data.data,error:null}}catch(a){return console.error("There was an error updating the treatment plan-procedure mapping:",a),{data:null,error:a}}},nO=async(e,t)=>{try{return await dt.delete(`/treatmentplan/${e}/procedure-treatment/${t}`),{error:null}}catch(n){return console.error("There was an error deleting the treatment plan-procedure mapping:",n),{error:n}}},ohe=async e=>{try{if(!e.doctor_id)throw new Error("doctor_id is required");const t=new URLSearchParams;e.procedureName?.trim()&&t.append("procedure_name",e.procedureName.trim()),e.dateFrom&&t.append("date_from",e.dateFrom),e.dateTo&&t.append("date_to",e.dateTo),e.gender?.trim()&&t.append("gender",e.gender.trim()),e.ageGreaterThan&&t.append("age_greater_than",e.ageGreaterThan),e.ageLessThan&&t.append("age_less_than",e.ageLessThan),t.append("doctor_id",e.doctor_id);const n=t.toString(),a=`/procedure/research${n?`?${n}`:""}`;console.log(" Making procedure research API call to:",a);const r=await dt.get(a);return console.log(" API Response status:",r.status),console.log(" API Response procedure research results count:",r.data?.data?.length||0),{data:Qn.cloneDeep(r.data.data),error:null}}catch(t){if(console.error(" Error searching procedure research data:",t),console.error(" Error details:",{message:t.message,status:t.response?.status,statusText:t.response?.statusText,data:t.response?.data,url:t.config?.url,sqlError:t.response?.data?.error,sqlMessage:t.response?.data?.message}),t.response?.status===500){const n=t.response?.data?.message||t.response?.data?.error||t.message;if(n.includes("procedure")&&(n.includes("table")||n.includes("relation")||n.includes("does not exist")))return console.error(" Database table for procedure research might not exist or have incorrect schema"),{data:[],error:{...t,message:"Procedure research tables not found or have incorrect schema. Please check database setup.",type:"DATABASE_TABLE_ERROR"}}}return{data:[],error:t}}},kg=async(e,t)=>{try{const n=await lT(e,t);if(n.error)return n;const a=n.data.filter(r=>r.status!=="Cancelled"&&!r.isTemplate);return console.log(" Filtered treatment plans for receipt linking:",{total:n.data.length,filtered:a.length,excluded:n.data.length-a.length}),{data:a,error:null}}catch(n){return console.error(" Error fetching treatment plans for receipt:",n),{data:[],error:n}}},aO=async(e,t,n)=>{try{if(!n)throw new Error("Doctor ID is required");const a=new URLSearchParams;a.append("doctor_id",n);const r=await dt.put(`/procedure/${e}?${a.toString()}`,{description:t});return{data:Qn.cloneDeep(r.data.data),error:null}}catch(a){return console.error("Error updating procedure description:",a),{data:null,error:a}}},rO=async(e="",t)=>{try{if(!t)throw new Error("Doctor ID is required");const n=new URLSearchParams;n.append("doctor_id",t);const a=e&&e.trim()?e.trim():"all",r=`/treatmentplan/template/search/${encodeURIComponent(a)}?${n.toString()}`,s=await dt.get(r);return{data:Qn.cloneDeep(s.data.data.templates||[]),error:null}}catch(n){return console.error("Error searching treatment plan templates:",n),{data:[],error:n}}},sO=async e=>{try{const t=await dt.post("/treatmentplan/template",e);return{data:Qn.cloneDeep(t.data.data),error:null}}catch(t){return console.error("Error creating treatment plan template:",t),{data:null,error:t}}},oO=async(e,t)=>{try{const n=await dt.put(`/treatmentplan/template/${e}`,t);return{data:Qn.cloneDeep(n.data.data),error:null}}catch(n){return console.error("Error updating treatment plan template:",n),{data:null,error:n}}},iO=async e=>{try{const t=await dt.get(`/treatmentplan/template/${e}`);return{data:Qn.cloneDeep(t.data.data),error:null}}catch(t){return console.error("Error fetching treatment plan template:",t),{data:null,error:t}}},lO=async e=>{try{if(!e)throw new Error("Doctor ID is required");const t=new URLSearchParams;t.append("doctor_id",e);const n=`/treatmentplan/template/search/all?${t.toString()}`,a=await dt.get(n);return{data:Qn.cloneDeep(a.data.data||[]),error:null}}catch(t){return console.error("Error fetching all treatment plan templates:",t),{data:[],error:t}}},ihe=Object.freeze(Object.defineProperty({__proto__:null,createProcedure:uT,createProcedureTreatment:Sp,createTreatmentPlan:aE,createTreatmentPlanTemplate:sO,deleteProcedureTreatment:nO,deleteTreatmentPlan:ZM,fetchProcedureDetails:Cf,fetchProcedures:eO,fetchTreatmentPlans:lT,fetchTreatmentPlansForReceipt:kg,getAllTreatmentPlanTemplates:lO,getTreatmentPlanTemplate:iO,searchProcedureResearch:ohe,searchTreatmentPlanTemplates:rO,updateProcedure:tO,updateProcedureDescription:aO,updateProcedureTreatment:rE,updateTreatmentPlanTemplate:oO},Symbol.toStringTag,{value:"Module"}));function cT(e,t){const n=A=>{const d=parseFloat(A.baseCost)||0,f=parseInt(A.quantity)||1,m=parseFloat(A.discountAmount)||0;return Math.max(0,d-m)*f},a=ae(()=>e.value.map(A=>({...A,total:n(A)}))),r=ae(()=>e.value.reduce((A,d)=>{const f=parseFloat(d.baseCost)||0,m=parseInt(d.quantity)||1;return A+f*m},0)),s=ae(()=>e.value.reduce((A,d)=>{const f=parseFloat(d.discountAmount)||0,m=parseInt(d.quantity)||1;return A+f*m},0)),o=ae(()=>{const A=s.value,d=parseFloat(t.value)||0;return A+d}),i=ae(()=>{const A=r.value,d=o.value;return Math.max(0,A-d)}),c=ae(()=>e.value.some(A=>A.serviceDescription&&A.serviceDescription.trim().length>0&&parseFloat(A.baseCost)>0));return{servicesWithTotals:a,subtotal:r,totalLineDiscount:s,totalAllDiscounts:o,finalGrandTotal:i,hasValidService:c,calculateServiceTotal:n}}const lhe={class:"pa-1"},uhe={class:"text-body-1 font-weight-medium"},che={class:"text-body-2 text-medium-emphasis"},dhe={class:"pa-1"},Ahe={class:"text-body-1 font-weight-medium"},fhe={class:"text-body-2 text-medium-emphasis"},mhe={class:"pa-1"},vhe={class:"text-body-2 text-medium-emphasis"},hhe={class:"d-flex flex-column py-1"},phe={class:"text-body-2 font-weight-medium"},ghe={class:"text-caption text-medium-emphasis"},yhe={key:0},_he={class:"text-caption"},whe={key:0,class:"ml-2"},bhe={class:"font-weight-bold"},xhe={key:0,class:"text-body-2 mb-1"},Che={class:"text-body-2 mb-1"},She={class:"text-body-2 mb-1"},Ehe={key:0,class:"text-body-2 mb-1"},Bhe={class:"text-subtitle-1 font-weight-bold"},khe={__name:"payment-receipt-create",props:{appointment:{type:Object,required:!0}},emits:["close","receiptCreated","view-receipt"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ra(),o=Rn(),i=ae(()=>o.state.doctorModule.doctorId),c=ae(()=>o.getters["doctorModule/currentDoctor"]),A=ae(()=>c.value?.doctorName||"Unknown Doctor"),d=V({patientName:n.appointment?.patient_name||"",patientId:n.appointment?.patientId||"",appointmentDate:n.appointment?.appointmentDate||"",receiptDate:Un(),appointmentId:n.appointment?.id||null,doctorId:i.value,additionalDiscount:0}),f=V([{serviceDescription:"",baseCost:0,discountAmount:0,quantity:1,total:0,isFromHistory:!1}]),m=V(!1),h=V(null),p=V([]),y=V(!1);ae(()=>h.value?p.value.find(X=>X.id===h.value):null);const g=V(!1),w=cT(f,ae(()=>d.value.additionalDiscount)),{servicesWithTotals:b,subtotal:x,totalLineDiscount:T,finalGrandTotal:F,hasValidService:k}=w;V(null);const S=hh,E=V([{amount:null,mode:"Cash",paymentDate:Un(),datePickerMenu:!1}]),C=[X=>!!X||"Amount is required",X=>X>0||"Amount must be greater than 0",X=>Number.isInteger(Number(X))||"Amount must be a whole number"],D=[X=>!!X||"Payment mode is required"],P=[X=>!!X||"Payment date is required"],O=()=>{f.value.push({serviceDescription:"",baseCost:0,discountAmount:0,quantity:1,total:0,isFromHistory:!1})},H=X=>{f.value.length>1?f.value.splice(X,1):f.value[0]={serviceDescription:"",baseCost:0,discountAmount:0,quantity:1,total:0,isFromHistory:!1}},ie=(X,le)=>{f.value[X]&&(f.value[X].serviceDescription=le)},Ae=(X,le)=>{console.log("Service selected:",le),le&&typeof le=="object"&&!le.isUserTyped?f.value[X]={...f.value[X],serviceDescription:le.serviceDescription,baseCost:le.baseCost||0,isFromHistory:!1}:le===null&&(f.value[X]={...f.value[X],serviceDescription:"",baseCost:0,isFromHistory:!1})},j=async()=>{if(!d.value.patientId||!d.value.doctorId){console.log("Missing patient or doctor ID for loading treatment plans");return}y.value=!0;try{console.log("Loading treatment plans for patient:",d.value.patientId,"doctor:",d.value.doctorId);const X=await kg(d.value.patientId,d.value.doctorId);if(X.error)throw new Error(X.error.message||"Failed to load treatment plans");p.value=X.data||[],console.log("Loaded treatment plans:",p.value.length)}catch(X){console.error("Error loading treatment plans:",X),s("Failed to load treatment plans: "+(X.message||"Unknown error")),p.value=[]}finally{y.value=!1}},J=ae(()=>E.value.reduce((X,le)=>X+(parseFloat(le.amount)||0),0));ae(()=>F.value-J.value);const ue=X=>{if(!X)return"";try{return new Date(X).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return X}},ne=ae(()=>{const X=k.value,le=d.value.doctorId&&d.value.appointmentId;return console.log("Validation check:",{hasValidService:X,hasValidAppointment:le,services:f.value,receiptData:d.value}),X&&le}),Y=()=>{E.value.push({amount:null,mode:"Cash",paymentDate:Un(),datePickerMenu:!1})},te=X=>{E.value.length>1?E.value.splice(X,1):E.value[0]={amount:null,mode:"Cash",paymentDate:Un(),datePickerMenu:!1}},L=X=>{if(!X)return null;try{if(typeof X=="string")return X.includes("T")?X.split("T")[0]:X;if(X instanceof Date){const le=X.getFullYear(),re=String(X.getMonth()+1).padStart(2,"0"),de=String(X.getDate()).padStart(2,"0");return`${le}-${re}-${de}`}return null}catch(le){return console.error("Error parsing payment date:",le),null}},N=(X,le)=>{if(X)if(X instanceof Date){const re=X.getFullYear(),de=String(X.getMonth()+1).padStart(2,"0"),G=String(X.getDate()).padStart(2,"0");le.paymentDate=`${re}-${de}-${G}`}else typeof X=="string"&&(le.paymentDate=X);else le.paymentDate="";le.datePickerMenu=!1},q=()=>{},Q=async()=>{if(!ne.value){s("Please add at least one valid service with description and cost");return}g.value=!0;try{const{data:X,error:le}=await Xve(d.value.doctorId);if(le){if(le.needsSeries){s("No receipt series found. Please create a receipt series first in Admin Settings  Payment Receipt Series Configuration.");return}throw new Error(le.message||"Failed to get next receipt identifier")}console.log("Next receipt identifier:",X);const re=f.value.filter(ce=>ce.serviceDescription&&ce.serviceDescription.trim().length>0).map(ce=>({serviceDescription:ce.serviceDescription.trim(),baseCost:parseFloat(ce.baseCost)||0,gstPercent:0,quantity:parseInt(ce.quantity)||1,discountAmount:parseFloat(ce.discountAmount)||0})),de={doctorId:d.value.doctorId,appointmentId:d.value.appointmentId,paymentReceiptDate:d.value.receiptDate,additionalDiscount:parseFloat(d.value.additionalDiscount)||0,isThreeC:!0,treatmentPlanId:m.value?h.value:null,services:re};console.log("Creating receipt with payload:",de);const G=await jM(de);if(G.error){s(G.error.message||"Failed to create receipt");return}console.log("Receipt created successfully:",G.data),r(`Receipt ${G.data.identifier} created successfully!`),E.value.some(ce=>ce.amount&&parseFloat(ce.amount)>0&&ce.mode&&ce.paymentDate)&&await ee(G.data.id),a("receiptCreated",G.data),a("view-receipt",G.data.id)}catch(X){console.error("Error generating receipt:",X),s("Failed to generate receipt. Please try again.")}finally{g.value=!1}},ee=async X=>{if(!X||E.value.length===0){console.log("No payment entries to create or no receipt ID");return}console.log("Creating payment entries for receipt:",X);try{const le=E.value.filter(re=>re.amount&&parseFloat(re.amount)>0&&re.mode&&re.paymentDate);console.log("Valid payments to create:",le);for(const re of le){const de={amount:Number(re.amount),mode:re.mode,paymentDate:re.paymentDate,paymentReceiptId:X,appointmentId:d.value.appointmentId};console.log("Creating payment with payload:",de);const G=await vh(de);G.success?console.log("Payment created successfully:",G.data):(console.error("Error creating payment entry:",G.error),s(`Failed to create payment: ${G.error?.message||"Unknown error"}`))}E.value=[{amount:null,mode:"Cash",paymentDate:Un()}],console.log("Payment entries cleared")}catch(le){console.error("Error creating payment entries:",le)}},z=()=>{g.value=!1,f.value=[{serviceDescription:"",baseCost:0,discountAmount:0,quantity:1,total:0,isFromHistory:!1}],d.value={patientName:n.appointment?.patient_name||"",patientId:n.appointment?.patientId||"",appointmentDate:n.appointment?.appointmentDate||"",receiptDate:Un(),appointmentId:n.appointment?.id||null,doctorId:i.value,additionalDiscount:0},E.value=[{amount:null,mode:"Cash",paymentDate:Un(),datePickerMenu:!1}],a("close")};return Ke(m,X=>{X&&p.value.length===0?j():X||(h.value=null)}),(X,le)=>{const re=I("v-icon"),de=I("v-btn"),G=I("v-card-title"),Z=I("v-col"),ce=I("v-row"),Se=I("v-label"),Pe=I("v-card-text"),ye=I("v-card"),Ce=I("v-switch"),_e=I("v-list-item"),De=I("v-select"),xe=I("v-text-field"),Te=I("v-table"),Me=I("v-divider"),et=I("v-date-picker"),lt=I("v-menu"),Re=I("v-container");return U(),pe(ye,{rounded:"lg",color:"surfaceContainer",flat:"",ripple:!1},{default:u(()=>[l(ce,{"no-gutters":""},{default:u(()=>[l(Z,{cols:"12"},{default:u(()=>[l(G,{class:"d-flex align-center justify-space-between"},{default:u(()=>[le[4]||(le[4]=v("span",null,"Payment Receipt - Generate Receipt",-1)),l(de,{onClick:z,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(re,{size:"18"},{default:u(()=>[...le[3]||(le[3]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),le[23]||(le[23]=M()),l(ce,{"no-gutters":""},{default:u(()=>[l(Z,{cols:"12",class:"scroll-element"},{default:u(()=>[l(Re,{fluid:"",class:"pa-3"},{default:u(()=>[l(ye,{flat:"",color:"surfaceContainerHigh",class:"mb-4 card-enhanced"},{default:u(()=>[l(Pe,{class:"pb-1 pt-2"},{default:u(()=>[l(ce,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(Z,{cols:"4"},{default:u(()=>[v("div",lhe,[l(Se,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...le[5]||(le[5]=[M("Patient Information",-1)])]),_:1}),v("div",uhe,K(d.value.patientName),1),v("div",che,"ID: "+K(d.value.patientId),1)])]),_:1}),l(Z,{cols:"4"},{default:u(()=>[v("div",dhe,[l(Se,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...le[6]||(le[6]=[M("Appointment Details",-1)])]),_:1}),v("div",Ahe,"Dr. "+K(A.value),1),v("div",fhe,"Date: "+K(ue(d.value.appointmentDate)),1)])]),_:1}),l(Z,{cols:"4"},{default:u(()=>[v("div",mhe,[l(Se,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...le[7]||(le[7]=[M("Receipt Information",-1)])]),_:1}),le[8]||(le[8]=v("div",{class:"text-body-1 font-weight-medium"},"New Receipt",-1)),v("div",vhe,"Date: "+K(ue(d.value.receiptDate)),1)])]),_:1})]),_:1})]),_:1})]),_:1}),l(ye,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(Pe,{class:"pb-2"},{default:u(()=>[l(ce,{"no-gutters":"",align:"center",class:"mb-3"},{default:u(()=>[l(Z,{cols:"2",class:"d-flex align-center"},{default:u(()=>[...le[9]||(le[9]=[v("div",{class:"text-subtitle-1"},"Treatment Plan",-1)])]),_:1}),l(Z,{cols:"3",class:"d-flex align-center"},{default:u(()=>[l(Ce,{modelValue:m.value,"onUpdate:modelValue":le[0]||(le[0]=Le=>m.value=Le),label:"Link to treatment plan",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),m.value?(U(),pe(Z,{key:0,cols:"7"},{default:u(()=>[l(De,{modelValue:h.value,"onUpdate:modelValue":le[1]||(le[1]=Le=>h.value=Le),items:p.value,"item-title":"treatmentPlanName","item-value":"id",label:"Select Treatment Plan",variant:"outlined",density:"compact",loading:y.value,disabled:y.value,clearable:"","hide-details":""},{selection:u(({item:Le})=>[v("div",hhe,[v("div",phe,K(Le.raw.treatmentPlanName),1),v("div",ghe,[M(" Status: "+K(Le.raw.status)+"  Created: "+K(ue(Le.raw.createdAt))+" ",1),Le.raw.notes?(U(),me("span",yhe,"  "+K(Le.raw.notes.substring(0,30))+"...",1)):ge("",!0)])])]),item:u(({props:Le,item:nt})=>[l(_e,eu(nu(Le)),{title:u(()=>[M(K(nt.raw.treatmentPlanName),1)]),subtitle:u(()=>[v("div",_he,[M(" Status: "+K(nt.raw.status)+"  Created: "+K(ue(nt.raw.createdAt))+" ",1),nt.raw.notes?(U(),me("span",whe," "+K(nt.raw.notes.substring(0,50))+"...",1)):ge("",!0)])]),_:2},1040)]),_:1},8,["modelValue","items","loading","disabled"])]),_:1})):ge("",!0)]),_:1})]),_:1})]),_:1}),l(ye,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(Pe,{class:"pb-2"},{default:u(()=>[le[16]||(le[16]=v("div",{class:"text-subtitle-1 mb-3"},"Item Details",-1)),l(Te,{density:"compact",class:"mb-3"},{default:u(()=>[le[11]||(le[11]=v("thead",null,[v("tr",null,[v("th",{class:"text-left",style:{width:"60px"}},"Sr. No"),v("th",{class:"text-left",style:{width:"300px"}},"Description"),v("th",{class:"text-left",style:{width:"120px"}},"Base Cost per unit ()"),v("th",{class:"text-left",style:{width:"120px"}},"Discount per unit ()"),v("th",{class:"text-left",style:{width:"100px"}},"Quantity"),v("th",{class:"text-left",style:{width:"120px"}},"Total ()"),v("th",{class:"text-left",style:{width:"80px"}},"Actions")])],-1)),v("tbody",null,[(U(!0),me(We,null,qt($e(b),(Le,nt)=>(U(),me("tr",{key:nt},[v("td",null,K(nt+1),1),v("td",null,[l(Cw,{"model-value":Le.serviceDescription,"onUpdate:modelValue":Tt=>ie(nt,Tt),onServiceSelected:Tt=>Ae(nt,Tt),"doctor-id":i.value,density:"compact"},null,8,["model-value","onUpdate:modelValue","onServiceSelected","doctor-id"])]),v("td",null,[l(xe,{modelValue:f.value[nt].baseCost,"onUpdate:modelValue":Tt=>f.value[nt].baseCost=Tt,modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"underlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),v("td",null,[l(xe,{modelValue:f.value[nt].discountAmount,"onUpdate:modelValue":Tt=>f.value[nt].discountAmount=Tt,modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"underlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),v("td",null,[l(xe,{modelValue:f.value[nt].quantity,"onUpdate:modelValue":Tt=>f.value[nt].quantity=Tt,modelModifiers:{number:!0},type:"number",density:"compact",variant:"underlined","hide-details":"",min:"1"},null,8,["modelValue","onUpdate:modelValue"])]),v("td",null,[v("span",bhe,""+K(Le.total||0),1)]),v("td",null,[l(de,{icon:"",size:"small",color:"error",variant:"text",onClick:Tt=>H(nt)},{default:u(()=>[l(re,null,{default:u(()=>[...le[10]||(le[10]=[M("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])]))),128))])]),_:1}),l(ce,{"no-gutters":"",class:"align-center"},{default:u(()=>[l(Z,{cols:"auto"},{default:u(()=>[l(de,{variant:"outlined",color:"primary",onClick:O,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...le[12]||(le[12]=[M(" Add Service ",-1)])]),_:1})]),_:1}),l(Z),l(Z,{cols:"3"},{default:u(()=>[l(xe,{label:"Additional Discount",modelValue:d.value.additionalDiscount,"onUpdate:modelValue":le[2]||(le[2]=Le=>d.value.additionalDiscount=Le),modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),l(Me,{class:"mb-3"}),l(ce,{"no-gutters":""},{default:u(()=>[l(Z,{cols:"8",class:"text-right"},{default:u(()=>[le[13]||(le[13]=v("div",{class:"text-body-2 mb-1"},"Subtotal:",-1)),le[14]||(le[14]=v("div",{class:"text-body-2 mb-1"},"Line Discounts:",-1)),d.value.additionalDiscount>0?(U(),me("div",xhe,"Additional Discount:")):ge("",!0),le[15]||(le[15]=v("div",{class:"text-subtitle-1 font-weight-bold"},"Grand Total:",-1))]),_:1}),l(Z,{cols:"4",class:"text-right"},{default:u(()=>[v("div",Che,K($e(Ar)($e(x))),1),v("div",She,"-"+K($e(Ar)($e(T))),1),d.value.additionalDiscount>0?(U(),me("div",Ehe,"-"+K($e(Ar)(d.value.additionalDiscount)),1)):ge("",!0),v("div",Bhe,K($e(Ar)($e(F))),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(ye,{flat:"",class:"mb-3 card-enhanced",color:"surfaceContainerHigh"},{default:u(()=>[l(Pe,{class:"pb-2"},{default:u(()=>[le[21]||(le[21]=v("div",{class:"text-subtitle-1 mb-3"},"Payment Information",-1)),l(Te,{density:"compact",class:"mb-3"},{default:u(()=>[le[19]||(le[19]=v("thead",null,[v("tr",null,[v("th",{class:"text-left",style:{width:"60px"}},"Sr. No"),v("th",{class:"text-left",style:{width:"150px"}},"Amount ()"),v("th",{class:"text-left",style:{width:"150px"}},"Payment Mode"),v("th",{class:"text-left",style:{width:"150px"}},"Payment Date"),v("th",{class:"text-left",style:{width:"80px"}},"Actions")])],-1)),v("tbody",null,[(U(!0),me(We,null,qt(E.value,(Le,nt)=>(U(),me("tr",{key:nt},[v("td",null,K(nt+1),1),v("td",null,[l(xe,{modelValue:Le.amount,"onUpdate:modelValue":Tt=>Le.amount=Tt,modelModifiers:{number:!0},type:"number",prefix:"",min:"1",density:"compact",variant:"underlined","hide-details":"",rules:C,onInput:q},null,8,["modelValue","onUpdate:modelValue"])]),v("td",null,[l(De,{modelValue:Le.mode,"onUpdate:modelValue":Tt=>Le.mode=Tt,items:$e(S),density:"compact",variant:"underlined","hide-details":"",rules:D},null,8,["modelValue","onUpdate:modelValue","items"])]),v("td",null,[l(lt,{modelValue:Le.datePickerMenu,"onUpdate:modelValue":Tt=>Le.datePickerMenu=Tt,"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},{activator:u(({props:Tt})=>[l(xe,Ue({modelValue:Le.paymentDate,"onUpdate:modelValue":Pt=>Le.paymentDate=Pt,density:"compact",variant:"underlined","hide-details":"",rules:P,readonly:""},{ref_for:!0},Tt),{"append-inner":u(()=>[l(re,{class:"text-medium-emphasis"},{default:u(()=>[...le[17]||(le[17]=[M("mdi-calendar",-1)])]),_:1})]),_:1},16,["modelValue","onUpdate:modelValue"])]),default:u(()=>[l(et,{"model-value":L(Le.paymentDate),"onUpdate:modelValue":Tt=>N(Tt,Le),color:"primary",locale:"en-IN"},null,8,["model-value","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),v("td",null,[l(de,{icon:"",size:"small",color:"error",variant:"text",onClick:Tt=>te(nt)},{default:u(()=>[l(re,null,{default:u(()=>[...le[18]||(le[18]=[M("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])]))),128))])]),_:1}),l(ce,{"no-gutters":"",class:"align-center"},{default:u(()=>[l(Z,{cols:"auto"},{default:u(()=>[l(de,{variant:"outlined",color:"secondary",onClick:Y,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...le[20]||(le[20]=[M(" Add Payment ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(ye,{flat:"",color:"surfaceContainerHigh",class:"card-enhanced"},{default:u(()=>[l(Pe,{class:"d-flex justify-center pb-2"},{default:u(()=>[l(de,{color:"primary",onClick:Q,loading:g.value,disabled:!ne.value,"prepend-icon":"mdi-receipt",class:"btn-hover-base"},{default:u(()=>[...le[22]||(le[22]=[M(" Generate Receipt ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),ge("",!0)]),_:1})]),_:1})]),_:1})]),_:1})}}},The=Xt(khe,[["__scopeId","data-v-57a37952"]]);function Ihe(e){const t=V([]),n=V(!1),a=V([]),r=V(!1),s=(f=1e4)=>new Promise((m,h)=>setTimeout(()=>h(new Error("API_TIMEOUT")),f)),o=async()=>{if(!e.value){console.log("No receipt ID available for loading payments"),t.value=[];return}if(n.value){console.log("Already loading payments, skipping duplicate call");return}n.value=!0,console.log("Loading payments for receipt ID:",e.value);try{const f=await Promise.race([Bg(e.value),s(1e4)]);console.log("Full API response:",f),f.success?(t.value=Array.isArray(f.data)?f.data:[],console.log(" Payments loaded successfully:",t.value.length)):(console.error(" API Error loading payments:",f.error),t.value=[])}catch(f){f.message==="API_TIMEOUT"?console.error(" Payment loading timed out"):console.error(" Exception loading receipt payments:",f),t.value=[]}finally{n.value=!1}},i=async f=>{if(!e.value)throw new Error("No receipt ID available for payment creation");r.value=!0;try{const m={...f,amount:Number(f.amount),paymentReceiptId:e.value};console.log("Creating payment with payload:",m);const h=await Promise.race([vh(m),s(15e3)]);if(!h.success)throw new Error(h.error?.message||"Failed to create payment");return console.log("Payment created successfully:",h.data),await o(),h}catch(m){throw m.message==="API_TIMEOUT"?new Error("Payment creation timed out. Please try again."):m}finally{r.value=!1}},c=async f=>{if(f){if(a.value.includes(f)){console.log("Payment already being deleted:",f);return}a.value.push(f);try{const m=await Promise.race([iT(f),s(1e4)]);if(!m.success)throw new Error(m.error?.message||"Failed to delete payment");return console.log("Payment deleted successfully:",f),await o(),m}catch(m){throw m.message==="API_TIMEOUT"?new Error("Payment deletion timed out. Please try again."):m}finally{a.value=a.value.filter(m=>m!==f)}}},A=ae(()=>Array.isArray(t.value)?t.value.reduce((f,m)=>f+(parseFloat(m.amount)||0),0):0);let d=null;return Ke(e,async(f,m)=>{if(console.log("Receipt ID watcher triggered:",{newReceiptId:f||"null",oldReceiptId:m||"null",lastReceiptId:d||"null"}),f===d){console.log("Receipt ID unchanged, skipping reload");return}d=f,f?(console.log("Receipt ID changed, loading payments for:",f),await o()):(console.log("No receipt ID, clearing payments"),t.value=[])},{immediate:!0}),{receiptPayments:t,isLoadingPayments:n,deletingPayments:a,isSubmittingPayment:r,totalPaymentsMade:A,loadReceiptPayments:o,createNewPayment:i,deletePayment:c,formatPaymentAmount:Ar}}const Fhe={class:"text-center"},Phe={class:"text-center"},Dhe={class:"text-body-2 text-medium-emphasis mb-4"},Uhe={class:"pa-1"},Rhe={class:"text-body-1 font-weight-medium"},Nhe={class:"text-body-2 text-medium-emphasis"},Vhe={class:"pa-1"},Lhe={class:"text-body-1 font-weight-medium"},Mhe={class:"text-body-2 text-medium-emphasis"},Ohe={class:"pa-1"},Hhe={class:"text-body-1 font-weight-medium"},$he={class:"text-body-2 text-medium-emphasis"},Qhe={class:"text-caption text-medium-emphasis mt-1"},Ghe={class:"d-flex flex-column py-1"},zhe={class:"text-body-2 font-weight-medium"},Khe={class:"text-caption text-medium-emphasis"},Whe={key:0},jhe={class:"text-caption"},qhe={key:0,class:"ml-2"},Yhe={key:2,class:"text-body-2 text-medium-emphasis"},Xhe={key:0,class:"text-body-2 font-weight-medium"},Jhe={key:0,class:"text-body-2 font-weight-medium"},Zhe={key:0,class:"text-body-2 font-weight-medium"},epe={key:0,class:"text-body-2 font-weight-medium"},tpe={class:"font-weight-bold"},npe={key:0,class:"text-body-2 mb-1"},ape={class:"text-body-2 mb-1"},rpe={class:"text-body-2 mb-1"},spe={key:0,class:"text-body-2 mb-1"},ope={class:"text-subtitle-1 font-weight-bold"},ipe={class:"text-h6"},lpe={class:"text-h6 text-success"},upe={key:0,class:"text-center pa-4"},cpe={class:"font-weight-bold"},dpe={__name:"payment-receipt-edit",props:{receiptId:{type:[String,Number],required:!0}},emits:["close","receipt-updated"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ra(),o=Rn(),i=ae(()=>o.state.doctorModule.doctorId),c=ae(()=>o.getters["doctorModule/currentDoctor"]),A=ae(()=>c.value?.doctorName||"Unknown Doctor"),d=V(!1),f=V(!1),m=V(null),h=V(null),p=V([]),y=V(!1),g=V(null),w=V([]),b=V(!1),x=V(null);ae(()=>g.value?w.value.find(De=>De.id===g.value):null);const T=cT(p,ae(()=>h.value?.additionalDiscount||0)),{servicesWithTotals:F,subtotal:k,totalLineDiscount:S,finalGrandTotal:E,hasValidService:C}=T,D=V(null),P=Ihe(D),{receiptPayments:O,isLoadingPayments:H,deletingPayments:ie,totalPaymentsMade:Ae,loadReceiptPayments:j,deletePayment:J}=P;V([]),V([]);const ue=hh,ne=V([]),Y=[De=>!!De||"Amount is required",De=>De>0||"Amount must be greater than 0",De=>Number.isInteger(Number(De))||"Amount must be a whole number"],te=[De=>!!De||"Payment mode is required"],L=[De=>!!De||"Payment date is required"],N=()=>{p.value.push({serviceDescription:"",baseCost:0,discountAmount:0,quantity:1,isFromHistory:!1,isPrepopulated:!1})},q=De=>{p.value.length>1?p.value.splice(De,1):p.value[0]={serviceDescription:"",baseCost:0,discountAmount:0,quantity:1,isFromHistory:!1,isPrepopulated:!1}},Q=(De,xe)=>{p.value[De]&&(p.value[De].serviceDescription=xe)},ee=(De,xe)=>{console.log("Service selected:",xe),xe&&typeof xe=="object"&&!xe.isUserTyped?p.value[De]={...p.value[De],serviceDescription:xe.serviceDescription,baseCost:xe.baseCost||0,isFromHistory:!1,isPrepopulated:p.value[De].isPrepopulated===!0}:xe===null&&(p.value[De]={...p.value[De],serviceDescription:"",baseCost:0,isFromHistory:!1,isPrepopulated:p.value[De].isPrepopulated===!0})},z=async()=>{if(!h.value?.patientId||!h.value?.doctorId){console.log("Missing patient or doctor ID for loading treatment plans");return}b.value=!0;try{console.log("Loading treatment plans for patient:",h.value.patientId,"doctor:",h.value.doctorId);const De=await kg(h.value.patientId,h.value.doctorId);if(De.error)throw new Error(De.error.message||"Failed to load treatment plans");w.value=De.data||[],console.log("Loaded treatment plans:",w.value.length)}catch(De){console.error("Error loading treatment plans:",De),s("Failed to load treatment plans: "+(De.message||"Unknown error")),w.value=[]}finally{b.value=!1}},X=ae(()=>Array.isArray(ne.value)?ne.value.reduce((De,xe)=>De+(parseFloat(xe.amount)||0),0):0),le=ae(()=>{const De=Ae.value,xe=X.value;return Math.max(0,E.value-De-xe)}),re=ae(()=>{const De=C.value,xe=h.value?.patientName;return De&&xe});ae(()=>ne.value.length>0&&ne.value.every(De=>De.amount&&parseFloat(De.amount)>0&&De.mode&&De.paymentDate));const de=()=>{ne.value.push({amount:null,mode:"Cash",paymentDate:new Date().toISOString().split("T")[0],datePickerMenu:!1})},G=De=>{ne.value.splice(De,1)},Z=De=>{if(!De)return null;try{if(typeof De=="string")return De.includes("T")?De.split("T")[0]:De;if(De instanceof Date){const xe=De.getFullYear(),Te=String(De.getMonth()+1).padStart(2,"0"),Me=String(De.getDate()).padStart(2,"0");return`${xe}-${Te}-${Me}`}return null}catch(xe){return console.error("Error parsing payment date:",xe),null}},ce=(De,xe)=>{if(De)if(De instanceof Date){const Te=De.getFullYear(),Me=String(De.getMonth()+1).padStart(2,"0"),et=String(De.getDate()).padStart(2,"0");xe.paymentDate=`${Te}-${Me}-${et}`}else typeof De=="string"&&(xe.paymentDate=De);else xe.paymentDate="";xe.datePickerMenu=!1},Se=async()=>{if(!n.receiptId){m.value="No receipt ID provided";return}d.value=!0,m.value=null;try{console.log("Loading receipt data for editing, ID:",n.receiptId);const De=await qM(n.receiptId);if(De.error)throw new Error(De.error.message||"Failed to load receipt");const xe=De.data;if(h.value={identifier:xe.identifier,patientName:xe.patientName,patientId:xe.patientId,appointmentDate:xe.appointmentDate,paymentReceiptDate:xe.paymentReceiptDate||xe.receiptDate,appointmentId:xe.appointmentId,doctorId:xe.doctorId,additionalDiscount:xe.additionalDiscount||0},xe.services&&xe.services.length>0?p.value=xe.services.map(Te=>({serviceDescription:Te.serviceDescription,baseCost:Te.baseCost,discountAmount:Te.discountAmount,quantity:Te.quantity,isFromHistory:!1,isPrepopulated:!0})):p.value=[{serviceDescription:"",baseCost:0,discountAmount:0,quantity:1,isFromHistory:!1,isPrepopulated:!1}],console.log("Receipt data loaded for editing:",h.value),console.log("Services loaded:",p.value),xe.treatmentPlanId){y.value=!0,g.value=xe.treatmentPlanId,await z();try{const Te=await Cf(xe.treatmentPlanId);x.value=Te}catch(Te){console.error("Error loading original treatment plan data:",Te)}}await j()}catch(De){console.error("Error loading receipt data:",De),m.value=De.message||"Failed to load receipt data",s(m.value)}finally{d.value=!1}},Pe=async()=>{if(!re.value){s("Please add at least one valid service with description and cost");return}f.value=!0;try{const De=p.value.filter(Me=>Me.serviceDescription&&Me.serviceDescription.trim().length>0).map(Me=>({serviceDescription:Me.serviceDescription,baseCost:parseFloat(Me.baseCost)||0,gstPercent:0,discountAmount:parseFloat(Me.discountAmount)||0,quantity:parseInt(Me.quantity)||1})),xe={patientName:h.value.patientName,paymentReceiptDate:h.value.paymentReceiptDate,appointmentDate:h.value.appointmentDate,additionalDiscount:parseFloat(h.value.additionalDiscount)||0,treatmentPlanId:y.value?g.value:null,services:De};console.log("Updating receipt with payload:",xe);const Te=await Jve(n.receiptId,xe);if(Te.error)throw new Error(Te.error.message||"Failed to update receipt");console.log("Receipt updated successfully:",Te.data),await ye(),r(`Receipt ${Te.data.identifier} updated successfully!`),a("receipt-updated",Te.data)}catch(De){console.error("Error updating receipt:",De),s("Failed to update receipt. Please try again.")}finally{f.value=!1}},ye=async()=>{if(ne.value.length===0){console.log("No new payment entries to create");return}console.log("Creating new payment entries:",ne.value);try{const De=ne.value.filter(xe=>xe.amount&&parseFloat(xe.amount)>0&&xe.mode&&xe.paymentDate);console.log("Valid payments to create:",De);for(const xe of De){const Te={amount:parseFloat(xe.amount),mode:xe.mode,paymentDate:xe.paymentDate,paymentReceiptId:n.receiptId};console.log("Creating payment with payload:",Te);const Me=await vh(Te);Me.success?console.log("Payment created successfully:",Me.data):(console.error("Error creating payment entry:",Me.error),s(`Failed to create payment: ${Me.error?.message||"Unknown error"}`))}ne.value=[],console.log("New payment entries cleared"),await j()}catch(De){console.error("Error creating payment entries:",De),s("Failed to create some payments. Please try again.")}},Ce=De=>{if(!De)return"";try{return new Date(De).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return De}},_e=()=>{a("close")};return Ke(()=>n.receiptId,De=>{D.value=De},{immediate:!0}),Ke(y,De=>{De&&w.value.length===0?z():De||(g.value=null)}),un(()=>{Se()}),(De,xe)=>{const Te=I("v-icon"),Me=I("v-btn"),et=I("v-card-title"),lt=I("v-col"),Re=I("v-row"),Le=I("v-progress-circular"),nt=I("v-label"),Tt=I("v-card-text"),Pt=I("v-card"),Kt=I("v-switch"),$t=I("v-chip"),bt=I("v-list-item"),st=I("v-select"),Je=I("v-text-field"),Nt=I("v-table"),rn=I("v-divider"),Lt=I("v-date-picker"),_t=I("v-menu"),ut=I("v-container");return U(),pe(Pt,{rounded:"lg",color:"surfaceContainer",flat:"",ripple:!1},{default:u(()=>[l(Re,{"no-gutters":""},{default:u(()=>[l(lt,{cols:"12"},{default:u(()=>[l(et,{class:"d-flex align-center justify-space-between"},{default:u(()=>[xe[4]||(xe[4]=v("span",null,"Edit Payment Receipt",-1)),l(Me,{onClick:_e,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(Te,{size:"18"},{default:u(()=>[...xe[3]||(xe[3]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(Re,{"no-gutters":""},{default:u(()=>[l(lt,{cols:"12",class:"scroll-element"},{default:u(()=>[d.value?(U(),pe(Re,{key:0,"no-gutters":""},{default:u(()=>[l(lt,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[v("div",Fhe,[l(Le,{indeterminate:"",color:"primary",size:"64"}),xe[5]||(xe[5]=v("div",{class:"mt-4 text-subtitle-1"},"Loading receipt...",-1))])]),_:1})]),_:1})):m.value?(U(),pe(Re,{key:1,"no-gutters":""},{default:u(()=>[l(lt,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[v("div",Phe,[l(Te,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...xe[6]||(xe[6]=[M("mdi-alert-circle",-1)])]),_:1}),xe[8]||(xe[8]=v("div",{class:"text-h6 mb-2"},"Failed to Load Receipt",-1)),v("div",Dhe,K(m.value),1),l(Me,{color:"primary",onClick:Se,"prepend-icon":"mdi-refresh"},{default:u(()=>[...xe[7]||(xe[7]=[M(" Try Again ",-1)])]),_:1})])]),_:1})]),_:1})):h.value?(U(),pe(ut,{key:2,fluid:"",class:"pa-3"},{default:u(()=>[l(Pt,{flat:"",color:"surfaceContainerHigh",class:"mb-4 card-enhanced"},{default:u(()=>[l(Tt,{class:"pb-1 pt-2"},{default:u(()=>[l(Re,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(lt,{cols:"4"},{default:u(()=>[v("div",Uhe,[l(nt,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...xe[9]||(xe[9]=[M("Patient Information",-1)])]),_:1}),v("div",Rhe,K(h.value.patientName||"Unknown Patient"),1),v("div",Nhe,"ID: "+K(h.value.patientId||"N/A"),1)])]),_:1}),l(lt,{cols:"4"},{default:u(()=>[v("div",Vhe,[l(nt,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...xe[10]||(xe[10]=[M("Appointment Details",-1)])]),_:1}),v("div",Lhe,"Dr. "+K(A.value),1),v("div",Mhe,"Date: "+K(Ce(h.value.appointmentDate)),1)])]),_:1}),l(lt,{cols:"4"},{default:u(()=>[v("div",Ohe,[l(nt,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...xe[11]||(xe[11]=[M("Receipt Information",-1)])]),_:1}),v("div",Hhe,K(h.value.identifier),1),v("div",$he,"Date: "+K(Ce(h.value.paymentReceiptDate)),1)])]),_:1})]),_:1})]),_:1})]),_:1}),l(Pt,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(Tt,{class:"pb-2"},{default:u(()=>[l(Re,{"no-gutters":"",align:"center",class:"mb-3"},{default:u(()=>[l(lt,{cols:"2",class:"d-flex align-center"},{default:u(()=>[...xe[12]||(xe[12]=[v("div",{class:"text-subtitle-1"},"Treatment Plan",-1)])]),_:1}),l(lt,{cols:"3",class:"d-flex align-center"},{default:u(()=>[l(Kt,{modelValue:y.value,"onUpdate:modelValue":xe[0]||(xe[0]=Ft=>y.value=Ft),label:"Link to treatment plan",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),l(lt,{cols:"7"},{default:u(()=>[!y.value&&x.value?(U(),me(We,{key:0},[l($t,{color:"secondary",variant:"outlined","prepend-icon":"mdi-link-variant",class:"mr-2"},{default:u(()=>[M(K(x.value.treatmentPlanName),1)]),_:1}),v("div",Qhe," Status: "+K(x.value.status)+"  Created: "+K(Ce(x.value.createdAt)),1)],64)):y.value?(U(),pe(st,{key:1,modelValue:g.value,"onUpdate:modelValue":xe[1]||(xe[1]=Ft=>g.value=Ft),items:w.value,"item-title":"treatmentPlanName","item-value":"id",label:"Select Treatment Plan",variant:"outlined",density:"compact",loading:b.value,disabled:b.value,clearable:"","hide-details":""},{selection:u(({item:Ft})=>[v("div",Ghe,[v("div",zhe,K(Ft.raw.treatmentPlanName),1),v("div",Khe,[M(" Status: "+K(Ft.raw.status)+"  Created: "+K(Ce(Ft.raw.createdAt))+" ",1),Ft.raw.notes?(U(),me("span",Whe,"  "+K(Ft.raw.notes.substring(0,30))+"...",1)):ge("",!0)])])]),item:u(({props:Ft,item:zt})=>[l(bt,eu(nu(Ft)),{title:u(()=>[M(K(zt.raw.treatmentPlanName),1)]),subtitle:u(()=>[v("div",jhe,[M(" Status: "+K(zt.raw.status)+"  Created: "+K(Ce(zt.raw.createdAt))+" ",1),zt.raw.notes?(U(),me("span",qhe," "+K(zt.raw.notes.substring(0,50))+"...",1)):ge("",!0)])]),_:2},1040)]),_:1},8,["modelValue","items","loading","disabled"])):(U(),me("div",Yhe," No treatment plan linked "))]),_:1})]),_:1})]),_:1})]),_:1}),l(Pt,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(Tt,{class:"pb-2"},{default:u(()=>[xe[19]||(xe[19]=v("div",{class:"text-subtitle-1 mb-3"},"Item Details",-1)),l(Nt,{density:"compact",class:"mb-3"},{default:u(()=>[xe[14]||(xe[14]=v("thead",null,[v("tr",null,[v("th",{class:"text-left",style:{width:"60px"}},"Sr. No"),v("th",{class:"text-left",style:{width:"300px"}},"Description"),v("th",{class:"text-left",style:{width:"120px"}},"Base Cost per unit ()"),v("th",{class:"text-left",style:{width:"120px"}},"Discount per unit ()"),v("th",{class:"text-left",style:{width:"100px"}},"Quantity"),v("th",{class:"text-left",style:{width:"120px"}},"Total ()"),v("th",{class:"text-left",style:{width:"80px"}},"Actions")])],-1)),v("tbody",null,[(U(!0),me(We,null,qt($e(F),(Ft,zt)=>(U(),me("tr",{key:zt,class:ct(Ft.isPrepopulated?"prepopulated-service":"")},[v("td",null,K(zt+1),1),v("td",null,[Ft.isPrepopulated?(U(),me("span",Xhe,K(Ft.serviceDescription),1)):(U(),pe(Cw,{key:1,"model-value":Ft.serviceDescription,"onUpdate:modelValue":dn=>Q(zt,dn),onServiceSelected:dn=>ee(zt,dn),"doctor-id":i.value,density:"compact"},null,8,["model-value","onUpdate:modelValue","onServiceSelected","doctor-id"]))]),v("td",null,[Ft.isPrepopulated?(U(),me("span",Jhe,""+K(Ft.baseCost?.toLocaleString()||0),1)):(U(),pe(Je,{key:1,modelValue:p.value[zt].baseCost,"onUpdate:modelValue":dn=>p.value[zt].baseCost=dn,modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"underlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"]))]),v("td",null,[Ft.isPrepopulated?(U(),me("span",Zhe,""+K(Ft.discountAmount?.toLocaleString()||0),1)):(U(),pe(Je,{key:1,modelValue:p.value[zt].discountAmount,"onUpdate:modelValue":dn=>p.value[zt].discountAmount=dn,modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"underlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"]))]),v("td",null,[Ft.isPrepopulated?(U(),me("span",epe,K(Ft.quantity||1),1)):(U(),pe(Je,{key:1,modelValue:p.value[zt].quantity,"onUpdate:modelValue":dn=>p.value[zt].quantity=dn,modelModifiers:{number:!0},type:"number",density:"compact",variant:"underlined","hide-details":"",min:"1"},null,8,["modelValue","onUpdate:modelValue"]))]),v("td",null,[v("span",tpe,""+K(Ft.total||0),1)]),v("td",null,[l(Me,{icon:"",size:"small",color:"error",variant:"text",onClick:dn=>q(zt),title:Ft.isPrepopulated?"Delete existing service":"Delete new service"},{default:u(()=>[l(Te,null,{default:u(()=>[...xe[13]||(xe[13]=[M("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick","title"])])],2))),128))])]),_:1}),l(Re,{"no-gutters":"",class:"align-center"},{default:u(()=>[l(lt,{cols:"auto"},{default:u(()=>[l(Me,{variant:"outlined",color:"primary",onClick:N,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...xe[15]||(xe[15]=[M(" Add Service ",-1)])]),_:1})]),_:1}),l(lt),l(lt,{cols:"3"},{default:u(()=>[l(Je,{label:"Additional Discount",modelValue:h.value.additionalDiscount,"onUpdate:modelValue":xe[2]||(xe[2]=Ft=>h.value.additionalDiscount=Ft),modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),l(rn,{class:"mb-3"}),l(Re,{"no-gutters":""},{default:u(()=>[l(lt,{cols:"8",class:"text-right"},{default:u(()=>[xe[16]||(xe[16]=v("div",{class:"text-body-2 mb-1"},"Subtotal:",-1)),xe[17]||(xe[17]=v("div",{class:"text-body-2 mb-1"},"Line Discounts:",-1)),h.value.additionalDiscount>0?(U(),me("div",npe,"Additional Discount:")):ge("",!0),xe[18]||(xe[18]=v("div",{class:"text-subtitle-1 font-weight-bold"},"Grand Total:",-1))]),_:1}),l(lt,{cols:"4",class:"text-right"},{default:u(()=>[v("div",ape,K($e(Ar)($e(k))),1),v("div",rpe,"-"+K($e(Ar)($e(S))),1),h.value.additionalDiscount>0?(U(),me("div",spe,"-"+K($e(Ar)(h.value.additionalDiscount)),1)):ge("",!0),v("div",ope,K($e(Ar)($e(E))),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(Pt,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(Tt,{class:"pb-2"},{default:u(()=>[xe[30]||(xe[30]=v("div",{class:"text-subtitle-1 mb-3"},"Payment Information",-1)),l(Re,{"no-gutters":"",class:"mb-3"},{default:u(()=>[l(lt,{cols:"4"},{default:u(()=>[xe[20]||(xe[20]=v("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Total Amount",-1)),v("div",ipe,K($e(Ar)($e(E))),1)]),_:1}),l(lt,{cols:"4"},{default:u(()=>[xe[21]||(xe[21]=v("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Paid Amount",-1)),v("div",lpe,K($e(Ar)($e(Ae)+X.value)),1)]),_:1}),l(lt,{cols:"4"},{default:u(()=>[xe[22]||(xe[22]=v("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Balance Due",-1)),v("div",{class:ct(["text-h6",le.value>0?"text-error":"text-success"])},K($e(Ar)(le.value)),3)]),_:1})]),_:1}),$e(H)?(U(),me("div",upe,[l(Le,{indeterminate:"",size:"32",color:"primary"}),xe[23]||(xe[23]=v("div",{class:"text-body-2 mt-2"},"Loading payments...",-1))])):(U(),me(We,{key:1},[l(rn,{class:"mb-3"}),xe[29]||(xe[29]=v("div",{class:"text-subtitle-2 mb-2"},"Payments",-1)),l(Nt,{density:"compact",class:"mb-3"},{default:u(()=>[xe[27]||(xe[27]=v("thead",null,[v("tr",null,[v("th",{class:"text-left",style:{width:"60px"}},"Sr. No"),v("th",{class:"text-left",style:{width:"150px"}},"Amount ()"),v("th",{class:"text-left",style:{width:"150px"}},"Payment Mode"),v("th",{class:"text-left",style:{width:"150px"}},"Payment Date"),v("th",{class:"text-left",style:{width:"80px"}},"Actions")])],-1)),v("tbody",null,[(U(!0),me(We,null,qt($e(O),(Ft,zt)=>(U(),me("tr",{key:`existing-${Ft.id}`},[v("td",null,K(zt+1),1),v("td",cpe,""+K(Ft.amount.toLocaleString()),1),v("td",null,K(Ft.mode),1),v("td",null,K(Ce(Ft.paymentDate)),1),v("td",null,[l(Me,{icon:"",size:"small",color:"error",variant:"text",onClick:dn=>$e(J)(Ft.id),loading:$e(ie).includes(Ft.id)},{default:u(()=>[l(Te,null,{default:u(()=>[...xe[24]||(xe[24]=[M("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick","loading"])])]))),128)),(U(!0),me(We,null,qt(ne.value,(Ft,zt)=>(U(),me("tr",{key:`new-${zt}`},[v("td",null,K($e(O).length+zt+1),1),v("td",null,[l(Je,{modelValue:Ft.amount,"onUpdate:modelValue":dn=>Ft.amount=dn,modelModifiers:{number:!0},type:"number",prefix:"",min:"1",density:"compact",variant:"underlined","hide-details":"",rules:Y},null,8,["modelValue","onUpdate:modelValue"])]),v("td",null,[l(st,{modelValue:Ft.mode,"onUpdate:modelValue":dn=>Ft.mode=dn,items:$e(ue),density:"compact",variant:"underlined","hide-details":"",rules:te},null,8,["modelValue","onUpdate:modelValue","items"])]),v("td",null,[l(_t,{modelValue:Ft.datePickerMenu,"onUpdate:modelValue":dn=>Ft.datePickerMenu=dn,"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},{activator:u(({props:dn})=>[l(Je,Ue({modelValue:Ft.paymentDate,"onUpdate:modelValue":Hn=>Ft.paymentDate=Hn,density:"compact",variant:"underlined","hide-details":"",rules:L,readonly:""},{ref_for:!0},dn),{"append-inner":u(()=>[l(Te,{class:"text-medium-emphasis"},{default:u(()=>[...xe[25]||(xe[25]=[M("mdi-calendar",-1)])]),_:1})]),_:1},16,["modelValue","onUpdate:modelValue"])]),default:u(()=>[l(Lt,{"model-value":Z(Ft.paymentDate),"onUpdate:modelValue":dn=>ce(dn,Ft),color:"primary",locale:"en-IN"},null,8,["model-value","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),v("td",null,[l(Me,{icon:"",size:"small",color:"error",variant:"text",onClick:dn=>G(zt)},{default:u(()=>[l(Te,null,{default:u(()=>[...xe[26]||(xe[26]=[M("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])]))),128))])]),_:1}),l(Re,{"no-gutters":"",class:"align-center"},{default:u(()=>[l(lt,{cols:"auto"},{default:u(()=>[l(Me,{variant:"outlined",color:"secondary",onClick:de,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...xe[28]||(xe[28]=[M(" Add Payment ",-1)])]),_:1})]),_:1})]),_:1})],64))]),_:1})]),_:1}),l(Pt,{flat:"",color:"surfaceContainerHigh",class:"card-enhanced"},{default:u(()=>[l(Tt,{class:"d-flex justify-center pb-2"},{default:u(()=>[l(Me,{color:"primary",onClick:Pe,loading:f.value,disabled:!re.value,"prepend-icon":"mdi-content-save",class:"btn-hover-base"},{default:u(()=>[...xe[31]||(xe[31]=[M(" Update Receipt ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})):ge("",!0)]),_:1})]),_:1})]),_:1})}}},uO=Xt(dpe,[["__scopeId","data-v-c427f5d3"]]),Y_="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M12.04%202C6.58%202%202.13%206.45%202.13%2011.91C2.13%2013.66%202.59%2015.36%203.45%2016.86L2.05%2022L7.3%2020.62C8.75%2021.41%2010.38%2021.83%2012.04%2021.83C17.5%2021.83%2021.95%2017.38%2021.95%2011.92C21.95%209.27%2020.92%206.78%2019.05%204.91C17.18%203.03%2014.69%202%2012.04%202M12.05%203.67C14.25%203.67%2016.31%204.53%2017.87%206.09C19.42%207.65%2020.28%209.72%2020.28%2011.92C20.28%2016.46%2016.58%2020.15%2012.04%2020.15C10.56%2020.15%209.11%2019.76%207.85%2019L7.55%2018.83L4.43%2019.65L5.26%2016.61L5.06%2016.29C4.24%2015%203.8%2013.47%203.8%2011.91C3.81%207.37%207.5%203.67%2012.05%203.67M8.53%207.33C8.37%207.33%208.1%207.39%207.87%207.64C7.65%207.89%207%208.5%207%209.71C7%2010.93%207.89%2012.1%208%2012.27C8.14%2012.44%209.76%2014.94%2012.25%2016C12.84%2016.27%2013.3%2016.42%2013.66%2016.53C14.25%2016.72%2014.79%2016.69%2015.22%2016.63C15.7%2016.56%2016.68%2016.03%2016.89%2015.45C17.1%2014.87%2017.1%2014.38%2017.04%2014.27C16.97%2014.17%2016.81%2014.11%2016.56%2014C16.31%2013.86%2015.09%2013.26%2014.87%2013.18C14.64%2013.1%2014.5%2013.06%2014.31%2013.3C14.15%2013.55%2013.67%2014.11%2013.53%2014.27C13.38%2014.44%2013.24%2014.46%2013%2014.34C12.74%2014.21%2011.94%2013.95%2011%2013.11C10.26%2012.45%209.77%2011.64%209.62%2011.39C9.5%2011.15%209.61%2011%209.73%2010.89C9.84%2010.78%2010%2010.6%2010.1%2010.45C10.23%2010.31%2010.27%2010.2%2010.35%2010.04C10.43%209.87%2010.39%209.73%2010.33%209.61C10.27%209.5%209.77%208.26%209.56%207.77C9.36%207.29%209.16%207.35%209%207.34C8.86%207.34%208.7%207.33%208.53%207.33Z'%20/%3e%3c/svg%3e",Ape="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M20%204H4c-1.1%200-1.99.9-1.99%202L2%2018c0%201.1.9%202%202%202h16c1.1%200%202-.9%202-2V6c0-1.1-.9-2-2-2zm0%204l-8%205-8-5V6l8%205%208-5v2z'%20fill='currentColor'/%3e%3c/svg%3e";var sE=function(e,t){return sE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(n[r]=a[r])},sE(e,t)};function iu(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");sE(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var oE=function(){return oE=Object.assign||function(t){for(var n,a=1,r=arguments.length;a<r;a++){n=arguments[a];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},oE.apply(this,arguments)};function Do(e,t,n,a){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function i(d){try{A(a.next(d))}catch(f){o(f)}}function c(d){try{A(a.throw(d))}catch(f){o(f)}}function A(d){d.done?s(d.value):r(d.value).then(i,c)}A((a=a.apply(e,[])).next())})}function ro(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},a,r,s,o;return o={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function i(A){return function(d){return c([A,d])}}function c(A){if(a)throw new TypeError("Generator is already executing.");for(;n;)try{if(a=1,r&&(s=A[0]&2?r.return:A[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,A[1])).done)return s;switch(r=0,s&&(A=[A[0]&2,s.value]),A[0]){case 0:case 1:s=A;break;case 4:return n.label++,{value:A[1],done:!1};case 5:n.label++,r=A[1],A=[0];continue;case 7:A=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(A[0]===6||A[0]===2)){n=0;continue}if(A[0]===3&&(!s||A[1]>s[0]&&A[1]<s[3])){n.label=A[1];break}if(A[0]===6&&n.label<s[1]){n.label=s[1],s=A;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(A);break}s[2]&&n.ops.pop(),n.trys.pop();continue}A=t.call(e,n)}catch(d){A=[6,d],r=0}finally{a=s=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}}function ty(e,t,n){if(arguments.length===2)for(var a=0,r=t.length,s;a<r;a++)(s||!(a in t))&&(s||(s=Array.prototype.slice.call(t,0,a)),s[a]=t[a]);return e.concat(s||t)}var Lc=(function(){function e(t,n,a,r){this.left=t,this.top=n,this.width=a,this.height=r}return e.prototype.add=function(t,n,a,r){return new e(this.left+t,this.top+n,this.width+a,this.height+r)},e.fromClientRect=function(t,n){return new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height)},e.fromDOMRectList=function(t,n){var a=Array.from(n).find(function(r){return r.width!==0});return a?new e(a.left+t.windowBounds.left,a.top+t.windowBounds.top,a.width,a.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e})(),Ew=function(e,t){return Lc.fromClientRect(e,t.getBoundingClientRect())},fpe=function(e){var t=e.body,n=e.documentElement;if(!t||!n)throw new Error("Unable to get document size");var a=Math.max(Math.max(t.scrollWidth,n.scrollWidth),Math.max(t.offsetWidth,n.offsetWidth),Math.max(t.clientWidth,n.clientWidth)),r=Math.max(Math.max(t.scrollHeight,n.scrollHeight),Math.max(t.offsetHeight,n.offsetHeight),Math.max(t.clientHeight,n.clientHeight));return new Lc(0,0,a,r)},Bw=function(e){for(var t=[],n=0,a=e.length;n<a;){var r=e.charCodeAt(n++);if(r>=55296&&r<=56319&&n<a){var s=e.charCodeAt(n++);(s&64512)===56320?t.push(((r&1023)<<10)+(s&1023)+65536):(t.push(r),n--)}else t.push(r)}return t},jr=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var a=[],r=-1,s="";++r<n;){var o=e[r];o<=65535?a.push(o):(o-=65536,a.push((o>>10)+55296,o%1024+56320)),(r+1===n||a.length>16384)&&(s+=String.fromCharCode.apply(String,a),a.length=0)}return s},iU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mpe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ny=0;ny<iU.length;ny++)mpe[iU.charCodeAt(ny)]=ny;var lU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ep=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ay=0;ay<lU.length;ay++)Ep[lU.charCodeAt(ay)]=ay;var vpe=function(e){var t=e.length*.75,n=e.length,a,r=0,s,o,i,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var A=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(A)?A:new Uint8Array(A);for(a=0;a<n;a+=4)s=Ep[e.charCodeAt(a)],o=Ep[e.charCodeAt(a+1)],i=Ep[e.charCodeAt(a+2)],c=Ep[e.charCodeAt(a+3)],d[r++]=s<<2|o>>4,d[r++]=(o&15)<<4|i>>2,d[r++]=(i&3)<<6|c&63;return A},hpe=function(e){for(var t=e.length,n=[],a=0;a<t;a+=2)n.push(e[a+1]<<8|e[a]);return n},ppe=function(e){for(var t=e.length,n=[],a=0;a<t;a+=4)n.push(e[a+3]<<24|e[a+2]<<16|e[a+1]<<8|e[a]);return n},of=5,dT=11,sC=2,gpe=dT-of,cO=65536>>of,ype=1<<of,oC=ype-1,_pe=1024>>of,wpe=cO+_pe,bpe=wpe,xpe=32,Cpe=bpe+xpe,Spe=65536>>dT,Epe=1<<gpe,Bpe=Epe-1,uU=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},kpe=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},Tpe=function(e,t){var n=vpe(e),a=Array.isArray(n)?ppe(n):new Uint32Array(n),r=Array.isArray(n)?hpe(n):new Uint16Array(n),s=24,o=uU(r,s/2,a[4]/2),i=a[5]===2?uU(r,(s+a[4])/2):kpe(a,Math.ceil((s+a[4])/4));return new Ipe(a[0],a[1],a[2],a[3],o,i)},Ipe=(function(){function e(t,n,a,r,s,o){this.initialValue=t,this.errorValue=n,this.highStart=a,this.highValueIndex=r,this.index=s,this.data=o}return e.prototype.get=function(t){var n;if(t>=0){if(t<55296||t>56319&&t<=65535)return n=this.index[t>>of],n=(n<<sC)+(t&oC),this.data[n];if(t<=65535)return n=this.index[cO+(t-55296>>of)],n=(n<<sC)+(t&oC),this.data[n];if(t<this.highStart)return n=Cpe-Spe+(t>>dT),n=this.index[n],n+=t>>of&Bpe,n=this.index[n],n=(n<<sC)+(t&oC),this.data[n];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e})(),cU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Fpe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ry=0;ry<cU.length;ry++)Fpe[cU.charCodeAt(ry)]=ry;var Ppe="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",dU=50,Dpe=1,dO=2,AO=3,Upe=4,Rpe=5,AU=7,fO=8,fU=9,Bd=10,iE=11,mU=12,lE=13,Npe=14,Bp=15,uE=16,sy=17,cp=18,Vpe=19,vU=20,cE=21,dp=22,iC=23,Vm=24,bi=25,kp=26,Tp=27,Lm=28,Lpe=29,HA=30,Mpe=31,oy=32,iy=33,dE=34,AE=35,fE=36,V0=37,mE=38,n_=39,a_=40,lC=41,mO=42,Ope=43,Hpe=[9001,65288],vO="!",fa="",ly="",vE=Tpe(Ppe),fc=[HA,fE],hE=[Dpe,dO,AO,Rpe],hO=[Bd,fO],hU=[Tp,kp],$pe=hE.concat(hO),pU=[mE,n_,a_,dE,AE],Qpe=[Bp,lE],Gpe=function(e,t){t===void 0&&(t="strict");var n=[],a=[],r=[];return e.forEach(function(s,o){var i=vE.get(s);if(i>dU?(r.push(!0),i-=dU):r.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return a.push(o),n.push(uE);if(i===Upe||i===iE){if(o===0)return a.push(o),n.push(HA);var c=n[o-1];return $pe.indexOf(c)===-1?(a.push(a[o-1]),n.push(c)):(a.push(o),n.push(HA))}if(a.push(o),i===Mpe)return n.push(t==="strict"?cE:V0);if(i===mO||i===Lpe)return n.push(HA);if(i===Ope)return s>=131072&&s<=196605||s>=196608&&s<=262141?n.push(V0):n.push(HA);n.push(i)}),[a,n,r]},uC=function(e,t,n,a){var r=a[n];if(Array.isArray(e)?e.indexOf(r)!==-1:e===r)for(var s=n;s<=a.length;){s++;var o=a[s];if(o===t)return!0;if(o!==Bd)break}if(r===Bd)for(var s=n;s>0;){s--;var i=a[s];if(Array.isArray(e)?e.indexOf(i)!==-1:e===i)for(var c=n;c<=a.length;){c++;var o=a[c];if(o===t)return!0;if(o!==Bd)break}if(i!==Bd)break}return!1},gU=function(e,t){for(var n=e;n>=0;){var a=t[n];if(a===Bd)n--;else return a}return 0},zpe=function(e,t,n,a,r){if(n[a]===0)return fa;var s=a-1;if(Array.isArray(r)&&r[s]===!0)return fa;var o=s-1,i=s+1,c=t[s],A=o>=0?t[o]:0,d=t[i];if(c===dO&&d===AO)return fa;if(hE.indexOf(c)!==-1)return vO;if(hE.indexOf(d)!==-1||hO.indexOf(d)!==-1)return fa;if(gU(s,t)===fO)return ly;if(vE.get(e[s])===iE||(c===oy||c===iy)&&vE.get(e[i])===iE||c===AU||d===AU||c===fU||[Bd,lE,Bp].indexOf(c)===-1&&d===fU||[sy,cp,Vpe,Vm,Lm].indexOf(d)!==-1||gU(s,t)===dp||uC(iC,dp,s,t)||uC([sy,cp],cE,s,t)||uC(mU,mU,s,t))return fa;if(c===Bd)return ly;if(c===iC||d===iC)return fa;if(d===uE||c===uE)return ly;if([lE,Bp,cE].indexOf(d)!==-1||c===Npe||A===fE&&Qpe.indexOf(c)!==-1||c===Lm&&d===fE||d===vU||fc.indexOf(d)!==-1&&c===bi||fc.indexOf(c)!==-1&&d===bi||c===Tp&&[V0,oy,iy].indexOf(d)!==-1||[V0,oy,iy].indexOf(c)!==-1&&d===kp||fc.indexOf(c)!==-1&&hU.indexOf(d)!==-1||hU.indexOf(c)!==-1&&fc.indexOf(d)!==-1||[Tp,kp].indexOf(c)!==-1&&(d===bi||[dp,Bp].indexOf(d)!==-1&&t[i+1]===bi)||[dp,Bp].indexOf(c)!==-1&&d===bi||c===bi&&[bi,Lm,Vm].indexOf(d)!==-1)return fa;if([bi,Lm,Vm,sy,cp].indexOf(d)!==-1)for(var f=s;f>=0;){var m=t[f];if(m===bi)return fa;if([Lm,Vm].indexOf(m)!==-1)f--;else break}if([Tp,kp].indexOf(d)!==-1)for(var f=[sy,cp].indexOf(c)!==-1?o:s;f>=0;){var m=t[f];if(m===bi)return fa;if([Lm,Vm].indexOf(m)!==-1)f--;else break}if(mE===c&&[mE,n_,dE,AE].indexOf(d)!==-1||[n_,dE].indexOf(c)!==-1&&[n_,a_].indexOf(d)!==-1||[a_,AE].indexOf(c)!==-1&&d===a_||pU.indexOf(c)!==-1&&[vU,kp].indexOf(d)!==-1||pU.indexOf(d)!==-1&&c===Tp||fc.indexOf(c)!==-1&&fc.indexOf(d)!==-1||c===Vm&&fc.indexOf(d)!==-1||fc.concat(bi).indexOf(c)!==-1&&d===dp&&Hpe.indexOf(e[i])===-1||fc.concat(bi).indexOf(d)!==-1&&c===cp)return fa;if(c===lC&&d===lC){for(var h=n[s],p=1;h>0&&(h--,t[h]===lC);)p++;if(p%2!==0)return fa}return c===oy&&d===iy?fa:ly},Kpe=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var n=Gpe(e,t.lineBreak),a=n[0],r=n[1],s=n[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(r=r.map(function(i){return[bi,HA,mO].indexOf(i)!==-1?V0:i}));var o=t.wordBreak==="keep-all"?s.map(function(i,c){return i&&e[c]>=19968&&e[c]<=40959}):void 0;return[a,r,o]},Wpe=(function(){function e(t,n,a,r){this.codePoints=t,this.required=n===vO,this.start=a,this.end=r}return e.prototype.slice=function(){return jr.apply(void 0,this.codePoints.slice(this.start,this.end))},e})(),jpe=function(e,t){var n=Bw(e),a=Kpe(n,t),r=a[0],s=a[1],o=a[2],i=n.length,c=0,A=0;return{next:function(){if(A>=i)return{done:!0,value:null};for(var d=fa;A<i&&(d=zpe(n,s,r,++A,o))===fa;);if(d!==fa||A===i){var f=new Wpe(n,d,c,A);return c=A,{value:f,done:!1}}return{done:!0,value:null}}}},qpe=1,Ype=2,Tg=4,yU=8,X_=10,_U=47,Yp=92,Xpe=9,Jpe=32,uy=34,Ap=61,Zpe=35,e0e=36,t0e=37,cy=39,dy=40,fp=41,n0e=95,ri=45,a0e=33,r0e=60,s0e=62,o0e=64,i0e=91,l0e=93,u0e=61,c0e=123,Ay=63,d0e=125,wU=124,A0e=126,f0e=128,bU=65533,cC=42,jA=43,m0e=44,v0e=58,h0e=59,L0=46,p0e=0,g0e=8,y0e=11,_0e=14,w0e=31,b0e=127,pu=-1,pO=48,gO=97,yO=101,x0e=102,C0e=117,S0e=122,_O=65,wO=69,bO=70,E0e=85,B0e=90,oo=function(e){return e>=pO&&e<=57},k0e=function(e){return e>=55296&&e<=57343},Mm=function(e){return oo(e)||e>=_O&&e<=bO||e>=gO&&e<=x0e},T0e=function(e){return e>=gO&&e<=S0e},I0e=function(e){return e>=_O&&e<=B0e},F0e=function(e){return T0e(e)||I0e(e)},P0e=function(e){return e>=f0e},fy=function(e){return e===X_||e===Xpe||e===Jpe},J_=function(e){return F0e(e)||P0e(e)||e===n0e},xU=function(e){return J_(e)||oo(e)||e===ri},D0e=function(e){return e>=p0e&&e<=g0e||e===y0e||e>=_0e&&e<=w0e||e===b0e},yd=function(e,t){return e!==Yp?!1:t!==X_},my=function(e,t,n){return e===ri?J_(t)||yd(t,n):J_(e)?!0:!!(e===Yp&&yd(e,t))},dC=function(e,t,n){return e===jA||e===ri?oo(t)?!0:t===L0&&oo(n):oo(e===L0?t:e)},U0e=function(e){var t=0,n=1;(e[t]===jA||e[t]===ri)&&(e[t]===ri&&(n=-1),t++);for(var a=[];oo(e[t]);)a.push(e[t++]);var r=a.length?parseInt(jr.apply(void 0,a),10):0;e[t]===L0&&t++;for(var s=[];oo(e[t]);)s.push(e[t++]);var o=s.length,i=o?parseInt(jr.apply(void 0,s),10):0;(e[t]===wO||e[t]===yO)&&t++;var c=1;(e[t]===jA||e[t]===ri)&&(e[t]===ri&&(c=-1),t++);for(var A=[];oo(e[t]);)A.push(e[t++]);var d=A.length?parseInt(jr.apply(void 0,A),10):0;return n*(r+i*Math.pow(10,-o))*Math.pow(10,c*d)},R0e={type:2},N0e={type:3},V0e={type:4},L0e={type:13},M0e={type:8},O0e={type:21},H0e={type:9},$0e={type:10},Q0e={type:11},G0e={type:12},z0e={type:14},vy={type:23},K0e={type:1},W0e={type:25},j0e={type:24},q0e={type:26},Y0e={type:27},X0e={type:28},J0e={type:29},Z0e={type:31},pE={type:32},xO=(function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(Bw(t))},e.prototype.read=function(){for(var t=[],n=this.consumeToken();n!==pE;)t.push(n),n=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case uy:return this.consumeStringToken(uy);case Zpe:var n=this.peekCodePoint(0),a=this.peekCodePoint(1),r=this.peekCodePoint(2);if(xU(n)||yd(a,r)){var s=my(n,a,r)?Ype:qpe,o=this.consumeName();return{type:5,value:o,flags:s}}break;case e0e:if(this.peekCodePoint(0)===Ap)return this.consumeCodePoint(),L0e;break;case cy:return this.consumeStringToken(cy);case dy:return R0e;case fp:return N0e;case cC:if(this.peekCodePoint(0)===Ap)return this.consumeCodePoint(),z0e;break;case jA:if(dC(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case m0e:return V0e;case ri:var i=t,c=this.peekCodePoint(0),A=this.peekCodePoint(1);if(dC(i,c,A))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(my(i,c,A))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(c===ri&&A===s0e)return this.consumeCodePoint(),this.consumeCodePoint(),j0e;break;case L0:if(dC(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case _U:if(this.peekCodePoint(0)===cC)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===cC&&(d=this.consumeCodePoint(),d===_U))return this.consumeToken();if(d===pu)return this.consumeToken()}break;case v0e:return q0e;case h0e:return Y0e;case r0e:if(this.peekCodePoint(0)===a0e&&this.peekCodePoint(1)===ri&&this.peekCodePoint(2)===ri)return this.consumeCodePoint(),this.consumeCodePoint(),W0e;break;case o0e:var f=this.peekCodePoint(0),m=this.peekCodePoint(1),h=this.peekCodePoint(2);if(my(f,m,h)){var o=this.consumeName();return{type:7,value:o}}break;case i0e:return X0e;case Yp:if(yd(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case l0e:return J0e;case u0e:if(this.peekCodePoint(0)===Ap)return this.consumeCodePoint(),M0e;break;case c0e:return Q0e;case d0e:return G0e;case C0e:case E0e:var p=this.peekCodePoint(0),y=this.peekCodePoint(1);return p===jA&&(Mm(y)||y===Ay)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case wU:if(this.peekCodePoint(0)===Ap)return this.consumeCodePoint(),H0e;if(this.peekCodePoint(0)===wU)return this.consumeCodePoint(),O0e;break;case A0e:if(this.peekCodePoint(0)===Ap)return this.consumeCodePoint(),$0e;break;case pu:return pE}return fy(t)?(this.consumeWhiteSpace(),Z0e):oo(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):J_(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:jr(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],n=this.consumeCodePoint();Mm(n)&&t.length<6;)t.push(n),n=this.consumeCodePoint();for(var a=!1;n===Ay&&t.length<6;)t.push(n),n=this.consumeCodePoint(),a=!0;if(a){var r=parseInt(jr.apply(void 0,t.map(function(c){return c===Ay?pO:c})),16),s=parseInt(jr.apply(void 0,t.map(function(c){return c===Ay?bO:c})),16);return{type:30,start:r,end:s}}var o=parseInt(jr.apply(void 0,t),16);if(this.peekCodePoint(0)===ri&&Mm(this.peekCodePoint(1))){this.consumeCodePoint(),n=this.consumeCodePoint();for(var i=[];Mm(n)&&i.length<6;)i.push(n),n=this.consumeCodePoint();var s=parseInt(jr.apply(void 0,i),16);return{type:30,start:o,end:s}}else return{type:30,start:o,end:o}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===dy?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===dy?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===pu)return{type:22,value:""};var n=this.peekCodePoint(0);if(n===cy||n===uy){var a=this.consumeStringToken(this.consumeCodePoint());return a.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===pu||this.peekCodePoint(0)===fp)?(this.consumeCodePoint(),{type:22,value:a.value}):(this.consumeBadUrlRemnants(),vy)}for(;;){var r=this.consumeCodePoint();if(r===pu||r===fp)return{type:22,value:jr.apply(void 0,t)};if(fy(r))return this.consumeWhiteSpace(),this.peekCodePoint(0)===pu||this.peekCodePoint(0)===fp?(this.consumeCodePoint(),{type:22,value:jr.apply(void 0,t)}):(this.consumeBadUrlRemnants(),vy);if(r===uy||r===cy||r===dy||D0e(r))return this.consumeBadUrlRemnants(),vy;if(r===Yp)if(yd(r,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),vy;else t.push(r)}},e.prototype.consumeWhiteSpace=function(){for(;fy(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===fp||t===pu)return;yd(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var n=5e4,a="";t>0;){var r=Math.min(n,t);a+=jr.apply(void 0,this._value.splice(0,r)),t-=r}return this._value.shift(),a},e.prototype.consumeStringToken=function(t){var n="",a=0;do{var r=this._value[a];if(r===pu||r===void 0||r===t)return n+=this.consumeStringSlice(a),{type:0,value:n};if(r===X_)return this._value.splice(0,a),K0e;if(r===Yp){var s=this._value[a+1];s!==pu&&s!==void 0&&(s===X_?(n+=this.consumeStringSlice(a),a=-1,this._value.shift()):yd(r,s)&&(n+=this.consumeStringSlice(a),n+=jr(this.consumeEscapedCodePoint()),a=-1))}a++}while(!0)},e.prototype.consumeNumber=function(){var t=[],n=Tg,a=this.peekCodePoint(0);for((a===jA||a===ri)&&t.push(this.consumeCodePoint());oo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());a=this.peekCodePoint(0);var r=this.peekCodePoint(1);if(a===L0&&oo(r))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),n=yU;oo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());a=this.peekCodePoint(0),r=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((a===wO||a===yO)&&((r===jA||r===ri)&&oo(s)||oo(r)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),n=yU;oo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[U0e(t),n]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),n=t[0],a=t[1],r=this.peekCodePoint(0),s=this.peekCodePoint(1),o=this.peekCodePoint(2);if(my(r,s,o)){var i=this.consumeName();return{type:15,number:n,flags:a,unit:i}}return r===t0e?(this.consumeCodePoint(),{type:16,number:n,flags:a}):{type:17,number:n,flags:a}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(Mm(t)){for(var n=jr(t);Mm(this.peekCodePoint(0))&&n.length<6;)n+=jr(this.consumeCodePoint());fy(this.peekCodePoint(0))&&this.consumeCodePoint();var a=parseInt(n,16);return a===0||k0e(a)||a>1114111?bU:a}return t===pu?bU:t},e.prototype.consumeName=function(){for(var t="";;){var n=this.consumeCodePoint();if(xU(n))t+=jr(n);else if(yd(n,this.peekCodePoint(0)))t+=jr(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(n),t}},e})(),CO=(function(){function e(t){this._tokens=t}return e.create=function(t){var n=new xO;return n.write(t),new e(n.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var n=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return n;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var n=this.consumeComponentValue();if(n.type===32)return t;t.push(n),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var n={type:t,values:[]},a=this.consumeToken();;){if(a.type===32||tge(a,t))return n;this.reconsumeToken(a),n.values.push(this.consumeComponentValue()),a=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var n={name:t.value,values:[],type:18};;){var a=this.consumeToken();if(a.type===32||a.type===3)return n;this.reconsumeToken(a),n.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?pE:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e})(),Ig=function(e){return e.type===15},ph=function(e){return e.type===17},rr=function(e){return e.type===20},ege=function(e){return e.type===0},gE=function(e,t){return rr(e)&&e.value===t},SO=function(e){return e.type!==31},zv=function(e){return e.type!==31&&e.type!==4},Ku=function(e){var t=[],n=[];return e.forEach(function(a){if(a.type===4){if(n.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(n),n=[];return}a.type!==31&&n.push(a)}),n.length&&t.push(n),t},tge=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},Jd=function(e){return e.type===17||e.type===15},os=function(e){return e.type===16||Jd(e)},EO=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},qs={type:17,number:0,flags:Tg},AT={type:16,number:50,flags:Tg},kd={type:16,number:100,flags:Tg},Ip=function(e,t,n){var a=e[0],r=e[1];return[fr(a,t),fr(typeof r<"u"?r:a,n)]},fr=function(e,t){if(e.type===16)return e.number/100*t;if(Ig(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},BO="deg",kO="grad",TO="rad",IO="turn",kw={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case BO:return Math.PI*t.number/180;case kO:return Math.PI/200*t.number;case TO:return t.number;case IO:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},FO=function(e){return e.type===15&&(e.unit===BO||e.unit===kO||e.unit===TO||e.unit===IO)},PO=function(e){var t=e.filter(rr).map(function(n){return n.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[qs,qs];case"to top":case"bottom":return al(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[qs,kd];case"to right":case"left":return al(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[kd,kd];case"to bottom":case"top":return al(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[kd,qs];case"to left":case"right":return al(270)}return 0},al=function(e){return Math.PI*e/180},Vd={name:"color",parse:function(e,t){if(t.type===18){var n=nge[t.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return n(e,t.values)}if(t.type===5){if(t.value.length===3){var a=t.value.substring(0,1),r=t.value.substring(1,2),s=t.value.substring(2,3);return Td(parseInt(a+a,16),parseInt(r+r,16),parseInt(s+s,16),1)}if(t.value.length===4){var a=t.value.substring(0,1),r=t.value.substring(1,2),s=t.value.substring(2,3),o=t.value.substring(3,4);return Td(parseInt(a+a,16),parseInt(r+r,16),parseInt(s+s,16),parseInt(o+o,16)/255)}if(t.value.length===6){var a=t.value.substring(0,2),r=t.value.substring(2,4),s=t.value.substring(4,6);return Td(parseInt(a,16),parseInt(r,16),parseInt(s,16),1)}if(t.value.length===8){var a=t.value.substring(0,2),r=t.value.substring(2,4),s=t.value.substring(4,6),o=t.value.substring(6,8);return Td(parseInt(a,16),parseInt(r,16),parseInt(s,16),parseInt(o,16)/255)}}if(t.type===20){var i=Bc[t.value.toUpperCase()];if(typeof i<"u")return i}return Bc.TRANSPARENT}},Ld=function(e){return(255&e)===0},Fs=function(e){var t=255&e,n=255&e>>8,a=255&e>>16,r=255&e>>24;return t<255?"rgba("+r+","+a+","+n+","+t/255+")":"rgb("+r+","+a+","+n+")"},Td=function(e,t,n,a){return(e<<24|t<<16|n<<8|Math.round(a*255)<<0)>>>0},CU=function(e,t){if(e.type===17)return e.number;if(e.type===16){var n=t===3?1:255;return t===3?e.number/100*n:Math.round(e.number/100*n)}return 0},SU=function(e,t){var n=t.filter(zv);if(n.length===3){var a=n.map(CU),r=a[0],s=a[1],o=a[2];return Td(r,s,o,1)}if(n.length===4){var i=n.map(CU),r=i[0],s=i[1],o=i[2],c=i[3];return Td(r,s,o,c)}return 0};function AC(e,t,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(t-e)*n*6+e:n<1/2?t:n<2/3?(t-e)*6*(2/3-n)+e:e}var EU=function(e,t){var n=t.filter(zv),a=n[0],r=n[1],s=n[2],o=n[3],i=(a.type===17?al(a.number):kw.parse(e,a))/(Math.PI*2),c=os(r)?r.number/100:0,A=os(s)?s.number/100:0,d=typeof o<"u"&&os(o)?fr(o,1):1;if(c===0)return Td(A*255,A*255,A*255,1);var f=A<=.5?A*(c+1):A+c-A*c,m=A*2-f,h=AC(m,f,i+1/3),p=AC(m,f,i),y=AC(m,f,i-1/3);return Td(h*255,p*255,y*255,d)},nge={hsl:EU,hsla:EU,rgb:SU,rgba:SU},Xp=function(e,t){return Vd.parse(e,CO.create(t).parseComponentValue())},Bc={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},age={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(n){if(rr(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},rge={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Tw=function(e,t){var n=Vd.parse(e,t[0]),a=t[1];return a&&os(a)?{color:n,stop:a}:{color:n,stop:null}},BU=function(e,t){var n=e[0],a=e[e.length-1];n.stop===null&&(n.stop=qs),a.stop===null&&(a.stop=kd);for(var r=[],s=0,o=0;o<e.length;o++){var i=e[o].stop;if(i!==null){var c=fr(i,t);c>s?r.push(c):r.push(s),s=c}else r.push(null)}for(var A=null,o=0;o<r.length;o++){var d=r[o];if(d===null)A===null&&(A=o);else if(A!==null){for(var f=o-A,m=r[A-1],h=(d-m)/(f+1),p=1;p<=f;p++)r[A+p-1]=h*p;A=null}}return e.map(function(y,g){var w=y.color;return{color:w,stop:Math.max(Math.min(1,r[g]/t),0)}})},sge=function(e,t,n){var a=t/2,r=n/2,s=fr(e[0],t)-a,o=r-fr(e[1],n);return(Math.atan2(o,s)+Math.PI*2)%(Math.PI*2)},oge=function(e,t,n){var a=typeof e=="number"?e:sge(e,t,n),r=Math.abs(t*Math.sin(a))+Math.abs(n*Math.cos(a)),s=t/2,o=n/2,i=r/2,c=Math.sin(a-Math.PI/2)*i,A=Math.cos(a-Math.PI/2)*i;return[r,s-A,s+A,o-c,o+c]},Cl=function(e,t){return Math.sqrt(e*e+t*t)},kU=function(e,t,n,a,r){var s=[[0,0],[0,t],[e,0],[e,t]];return s.reduce(function(o,i){var c=i[0],A=i[1],d=Cl(n-c,a-A);return(r?d<o.optimumDistance:d>o.optimumDistance)?{optimumCorner:i,optimumDistance:d}:o},{optimumDistance:r?1/0:-1/0,optimumCorner:null}).optimumCorner},ige=function(e,t,n,a,r){var s=0,o=0;switch(e.size){case 0:e.shape===0?s=o=Math.min(Math.abs(t),Math.abs(t-a),Math.abs(n),Math.abs(n-r)):e.shape===1&&(s=Math.min(Math.abs(t),Math.abs(t-a)),o=Math.min(Math.abs(n),Math.abs(n-r)));break;case 2:if(e.shape===0)s=o=Math.min(Cl(t,n),Cl(t,n-r),Cl(t-a,n),Cl(t-a,n-r));else if(e.shape===1){var i=Math.min(Math.abs(n),Math.abs(n-r))/Math.min(Math.abs(t),Math.abs(t-a)),c=kU(a,r,t,n,!0),A=c[0],d=c[1];s=Cl(A-t,(d-n)/i),o=i*s}break;case 1:e.shape===0?s=o=Math.max(Math.abs(t),Math.abs(t-a),Math.abs(n),Math.abs(n-r)):e.shape===1&&(s=Math.max(Math.abs(t),Math.abs(t-a)),o=Math.max(Math.abs(n),Math.abs(n-r)));break;case 3:if(e.shape===0)s=o=Math.max(Cl(t,n),Cl(t,n-r),Cl(t-a,n),Cl(t-a,n-r));else if(e.shape===1){var i=Math.max(Math.abs(n),Math.abs(n-r))/Math.max(Math.abs(t),Math.abs(t-a)),f=kU(a,r,t,n,!1),A=f[0],d=f[1];s=Cl(A-t,(d-n)/i),o=i*s}break}return Array.isArray(e.size)&&(s=fr(e.size[0],a),o=e.size.length===2?fr(e.size[1],r):s),[s,o]},lge=function(e,t){var n=al(180),a=[];return Ku(t).forEach(function(r,s){if(s===0){var o=r[0];if(o.type===20&&o.value==="to"){n=PO(r);return}else if(FO(o)){n=kw.parse(e,o);return}}var i=Tw(e,r);a.push(i)}),{angle:n,stops:a,type:1}},hy=function(e,t){var n=al(180),a=[];return Ku(t).forEach(function(r,s){if(s===0){var o=r[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){n=PO(r);return}else if(FO(o)){n=(kw.parse(e,o)+al(270))%al(360);return}}var i=Tw(e,r);a.push(i)}),{angle:n,stops:a,type:1}},uge=function(e,t){var n=al(180),a=[],r=1,s=0,o=3,i=[];return Ku(t).forEach(function(c,A){var d=c[0];if(A===0){if(rr(d)&&d.value==="linear"){r=1;return}else if(rr(d)&&d.value==="radial"){r=2;return}}if(d.type===18){if(d.name==="from"){var f=Vd.parse(e,d.values[0]);a.push({stop:qs,color:f})}else if(d.name==="to"){var f=Vd.parse(e,d.values[0]);a.push({stop:kd,color:f})}else if(d.name==="color-stop"){var m=d.values.filter(zv);if(m.length===2){var f=Vd.parse(e,m[1]),h=m[0];ph(h)&&a.push({stop:{type:16,number:h.number*100,flags:h.flags},color:f})}}}}),r===1?{angle:(n+al(180))%al(360),stops:a,type:r}:{size:o,shape:s,stops:a,position:i,type:r}},DO="closest-side",UO="farthest-side",RO="closest-corner",NO="farthest-corner",VO="circle",LO="ellipse",MO="cover",OO="contain",cge=function(e,t){var n=0,a=3,r=[],s=[];return Ku(t).forEach(function(o,i){var c=!0;if(i===0){var A=!1;c=o.reduce(function(f,m){if(A)if(rr(m))switch(m.value){case"center":return s.push(AT),f;case"top":case"left":return s.push(qs),f;case"right":case"bottom":return s.push(kd),f}else(os(m)||Jd(m))&&s.push(m);else if(rr(m))switch(m.value){case VO:return n=0,!1;case LO:return n=1,!1;case"at":return A=!0,!1;case DO:return a=0,!1;case MO:case UO:return a=1,!1;case OO:case RO:return a=2,!1;case NO:return a=3,!1}else if(Jd(m)||os(m))return Array.isArray(a)||(a=[]),a.push(m),!1;return f},c)}if(c){var d=Tw(e,o);r.push(d)}}),{size:a,shape:n,stops:r,position:s,type:2}},py=function(e,t){var n=0,a=3,r=[],s=[];return Ku(t).forEach(function(o,i){var c=!0;if(i===0?c=o.reduce(function(d,f){if(rr(f))switch(f.value){case"center":return s.push(AT),!1;case"top":case"left":return s.push(qs),!1;case"right":case"bottom":return s.push(kd),!1}else if(os(f)||Jd(f))return s.push(f),!1;return d},c):i===1&&(c=o.reduce(function(d,f){if(rr(f))switch(f.value){case VO:return n=0,!1;case LO:return n=1,!1;case OO:case DO:return a=0,!1;case UO:return a=1,!1;case RO:return a=2,!1;case MO:case NO:return a=3,!1}else if(Jd(f)||os(f))return Array.isArray(a)||(a=[]),a.push(f),!1;return d},c)),c){var A=Tw(e,o);r.push(A)}}),{size:a,shape:n,stops:r,position:s,type:2}},dge=function(e){return e.type===1},Age=function(e){return e.type===2},fT={name:"image",parse:function(e,t){if(t.type===22){var n={url:t.value,type:0};return e.cache.addImage(t.value),n}if(t.type===18){var a=HO[t.name];if(typeof a>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return a(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function fge(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!HO[e.name])}var HO={"linear-gradient":lge,"-moz-linear-gradient":hy,"-ms-linear-gradient":hy,"-o-linear-gradient":hy,"-webkit-linear-gradient":hy,"radial-gradient":cge,"-moz-radial-gradient":py,"-ms-radial-gradient":py,"-o-radial-gradient":py,"-webkit-radial-gradient":py,"-webkit-gradient":uge},mge={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var n=t[0];return n.type===20&&n.value==="none"?[]:t.filter(function(a){return zv(a)&&fge(a)}).map(function(a){return fT.parse(e,a)})}},vge={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(n){if(rr(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},hge={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return Ku(t).map(function(n){return n.filter(os)}).map(EO)}},pge={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return Ku(t).map(function(n){return n.filter(rr).map(function(a){return a.value}).join(" ")}).map(gge)}},gge=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},_v;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(_v||(_v={}));var yge={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return Ku(t).map(function(n){return n.filter(_ge)})}},_ge=function(e){return rr(e)||os(e)},Iw=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},wge=Iw("top"),bge=Iw("right"),xge=Iw("bottom"),Cge=Iw("left"),Fw=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,n){return EO(n.filter(os))}}},Sge=Fw("top-left"),Ege=Fw("top-right"),Bge=Fw("bottom-right"),kge=Fw("bottom-left"),Pw=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,n){switch(n){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},Tge=Pw("top"),Ige=Pw("right"),Fge=Pw("bottom"),Pge=Pw("left"),Dw=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,n){return Ig(n)?n.number:0}}},Dge=Dw("top"),Uge=Dw("right"),Rge=Dw("bottom"),Nge=Dw("left"),Vge={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Lge={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},Mge={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(rr).reduce(function(n,a){return n|Oge(a.value)},0)}},Oge=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Hge={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},$ge={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},Z_;(function(e){e.NORMAL="normal",e.STRICT="strict"})(Z_||(Z_={}));var Qge={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return Z_.STRICT;case"normal":default:return Z_.NORMAL}}},Gge={name:"line-height",initialValue:"normal",prefix:!1,type:4},TU=function(e,t){return rr(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:os(e)?fr(e,t):t},zge={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:fT.parse(e,t)}},Kge={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},yE={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Uw=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},Wge=Uw("top"),jge=Uw("right"),qge=Uw("bottom"),Yge=Uw("left"),Xge={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(rr).map(function(n){switch(n.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Jge={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},Rw=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Zge=Rw("top"),e1e=Rw("right"),t1e=Rw("bottom"),n1e=Rw("left"),a1e={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},r1e={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},s1e={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&gE(t[0],"none")?[]:Ku(t).map(function(n){for(var a={color:Bc.TRANSPARENT,offsetX:qs,offsetY:qs,blur:qs},r=0,s=0;s<n.length;s++){var o=n[s];Jd(o)?(r===0?a.offsetX=o:r===1?a.offsetY=o:a.blur=o,r++):a.color=Vd.parse(e,o)}return a})}},o1e={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},i1e={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var n=c1e[t.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return n(t.values)}return null}},l1e=function(e){var t=e.filter(function(n){return n.type===17}).map(function(n){return n.number});return t.length===6?t:null},u1e=function(e){var t=e.filter(function(c){return c.type===17}).map(function(c){return c.number}),n=t[0],a=t[1];t[2],t[3];var r=t[4],s=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var o=t[12],i=t[13];return t[14],t[15],t.length===16?[n,a,r,s,o,i]:null},c1e={matrix:l1e,matrix3d:u1e},IU={type:16,number:50,flags:Tg},d1e=[IU,IU],A1e={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var n=t.filter(os);return n.length!==2?d1e:[n[0],n[1]]}},f1e={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Jp;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(Jp||(Jp={}));var m1e={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return Jp.BREAK_ALL;case"keep-all":return Jp.KEEP_ALL;case"normal":default:return Jp.NORMAL}}},v1e={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(ph(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},$O={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},h1e={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return ph(t)?t.number:1}},p1e={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},g1e={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(rr).map(function(n){switch(n.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(n){return n!==0})}},y1e={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var n=[],a=[];return t.forEach(function(r){switch(r.type){case 20:case 0:n.push(r.value);break;case 17:n.push(r.number.toString());break;case 4:a.push(n.join(" ")),n.length=0;break}}),n.length&&a.push(n.join(" ")),a.map(function(r){return r.indexOf(" ")===-1?r:"'"+r+"'"})}},_1e={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},w1e={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(ph(t))return t.number;if(rr(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},b1e={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(rr).map(function(n){return n.value})}},x1e={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},_s=function(e,t){return(e&t)!==0},C1e={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var n=t[0];return n.type===20&&n.value==="none"?[]:t}},S1e={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var n=t[0];if(n.type===20&&n.value==="none")return null;for(var a=[],r=t.filter(SO),s=0;s<r.length;s++){var o=r[s],i=r[s+1];if(o.type===20){var c=i&&ph(i)?i.number:1;a.push({counter:o.value,increment:c})}}return a}},E1e={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var n=[],a=t.filter(SO),r=0;r<a.length;r++){var s=a[r],o=a[r+1];if(rr(s)&&s.value!=="none"){var i=o&&ph(o)?o.number:0;n.push({counter:s.value,reset:i})}}return n}},B1e={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(Ig).map(function(n){return $O.parse(e,n)})}},k1e={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var n=t[0];if(n.type===20&&n.value==="none")return null;var a=[],r=t.filter(ege);if(r.length%2!==0)return null;for(var s=0;s<r.length;s+=2){var o=r[s].value,i=r[s+1].value;a.push({open:o,close:i})}return a}},FU=function(e,t,n){if(!e)return"";var a=e[Math.min(t,e.length-1)];return a?n?a.open:a.close:""},T1e={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&gE(t[0],"none")?[]:Ku(t).map(function(n){for(var a={color:255,offsetX:qs,offsetY:qs,blur:qs,spread:qs,inset:!1},r=0,s=0;s<n.length;s++){var o=n[s];gE(o,"inset")?a.inset=!0:Jd(o)?(r===0?a.offsetX=o:r===1?a.offsetY=o:r===2?a.blur=o:a.spread=o,r++):a.color=Vd.parse(e,o)}return a})}},I1e={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var n=[0,1,2],a=[];return t.filter(rr).forEach(function(r){switch(r.value){case"stroke":a.push(1);break;case"fill":a.push(0);break;case"markers":a.push(2);break}}),n.forEach(function(r){a.indexOf(r)===-1&&a.push(r)}),a}},F1e={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},P1e={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return Ig(t)?t.number:0}},D1e=(function(){function e(t,n){var a,r;this.animationDuration=mn(t,B1e,n.animationDuration),this.backgroundClip=mn(t,age,n.backgroundClip),this.backgroundColor=mn(t,rge,n.backgroundColor),this.backgroundImage=mn(t,mge,n.backgroundImage),this.backgroundOrigin=mn(t,vge,n.backgroundOrigin),this.backgroundPosition=mn(t,hge,n.backgroundPosition),this.backgroundRepeat=mn(t,pge,n.backgroundRepeat),this.backgroundSize=mn(t,yge,n.backgroundSize),this.borderTopColor=mn(t,wge,n.borderTopColor),this.borderRightColor=mn(t,bge,n.borderRightColor),this.borderBottomColor=mn(t,xge,n.borderBottomColor),this.borderLeftColor=mn(t,Cge,n.borderLeftColor),this.borderTopLeftRadius=mn(t,Sge,n.borderTopLeftRadius),this.borderTopRightRadius=mn(t,Ege,n.borderTopRightRadius),this.borderBottomRightRadius=mn(t,Bge,n.borderBottomRightRadius),this.borderBottomLeftRadius=mn(t,kge,n.borderBottomLeftRadius),this.borderTopStyle=mn(t,Tge,n.borderTopStyle),this.borderRightStyle=mn(t,Ige,n.borderRightStyle),this.borderBottomStyle=mn(t,Fge,n.borderBottomStyle),this.borderLeftStyle=mn(t,Pge,n.borderLeftStyle),this.borderTopWidth=mn(t,Dge,n.borderTopWidth),this.borderRightWidth=mn(t,Uge,n.borderRightWidth),this.borderBottomWidth=mn(t,Rge,n.borderBottomWidth),this.borderLeftWidth=mn(t,Nge,n.borderLeftWidth),this.boxShadow=mn(t,T1e,n.boxShadow),this.color=mn(t,Vge,n.color),this.direction=mn(t,Lge,n.direction),this.display=mn(t,Mge,n.display),this.float=mn(t,Hge,n.cssFloat),this.fontFamily=mn(t,y1e,n.fontFamily),this.fontSize=mn(t,_1e,n.fontSize),this.fontStyle=mn(t,x1e,n.fontStyle),this.fontVariant=mn(t,b1e,n.fontVariant),this.fontWeight=mn(t,w1e,n.fontWeight),this.letterSpacing=mn(t,$ge,n.letterSpacing),this.lineBreak=mn(t,Qge,n.lineBreak),this.lineHeight=mn(t,Gge,n.lineHeight),this.listStyleImage=mn(t,zge,n.listStyleImage),this.listStylePosition=mn(t,Kge,n.listStylePosition),this.listStyleType=mn(t,yE,n.listStyleType),this.marginTop=mn(t,Wge,n.marginTop),this.marginRight=mn(t,jge,n.marginRight),this.marginBottom=mn(t,qge,n.marginBottom),this.marginLeft=mn(t,Yge,n.marginLeft),this.opacity=mn(t,h1e,n.opacity);var s=mn(t,Xge,n.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=mn(t,Jge,n.overflowWrap),this.paddingTop=mn(t,Zge,n.paddingTop),this.paddingRight=mn(t,e1e,n.paddingRight),this.paddingBottom=mn(t,t1e,n.paddingBottom),this.paddingLeft=mn(t,n1e,n.paddingLeft),this.paintOrder=mn(t,I1e,n.paintOrder),this.position=mn(t,r1e,n.position),this.textAlign=mn(t,a1e,n.textAlign),this.textDecorationColor=mn(t,p1e,(a=n.textDecorationColor)!==null&&a!==void 0?a:n.color),this.textDecorationLine=mn(t,g1e,(r=n.textDecorationLine)!==null&&r!==void 0?r:n.textDecoration),this.textShadow=mn(t,s1e,n.textShadow),this.textTransform=mn(t,o1e,n.textTransform),this.transform=mn(t,i1e,n.transform),this.transformOrigin=mn(t,A1e,n.transformOrigin),this.visibility=mn(t,f1e,n.visibility),this.webkitTextStrokeColor=mn(t,F1e,n.webkitTextStrokeColor),this.webkitTextStrokeWidth=mn(t,P1e,n.webkitTextStrokeWidth),this.wordBreak=mn(t,m1e,n.wordBreak),this.zIndex=mn(t,v1e,n.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return Ld(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return _s(this.display,4)||_s(this.display,33554432)||_s(this.display,268435456)||_s(this.display,536870912)||_s(this.display,67108864)||_s(this.display,134217728)},e})(),U1e=(function(){function e(t,n){this.content=mn(t,C1e,n.content),this.quotes=mn(t,k1e,n.quotes)}return e})(),PU=(function(){function e(t,n){this.counterIncrement=mn(t,S1e,n.counterIncrement),this.counterReset=mn(t,E1e,n.counterReset)}return e})(),mn=function(e,t,n){var a=new xO,r=n!==null&&typeof n<"u"?n.toString():t.initialValue;a.write(r);var s=new CO(a.read());switch(t.type){case 2:var o=s.parseComponentValue();return t.parse(e,rr(o)?o.value:t.initialValue);case 0:return t.parse(e,s.parseComponentValue());case 1:return t.parse(e,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(t.format){case"angle":return kw.parse(e,s.parseComponentValue());case"color":return Vd.parse(e,s.parseComponentValue());case"image":return fT.parse(e,s.parseComponentValue());case"length":var i=s.parseComponentValue();return Jd(i)?i:qs;case"length-percentage":var c=s.parseComponentValue();return os(c)?c:qs;case"time":return $O.parse(e,s.parseComponentValue())}break}},R1e="data-html2canvas-debug",N1e=function(e){var t=e.getAttribute(R1e);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},_E=function(e,t){var n=N1e(e);return n===1||t===n},Wu=(function(){function e(t,n){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,_E(n,3))debugger;this.styles=new D1e(t,window.getComputedStyle(n,null)),xE(n)&&(this.styles.animationDuration.some(function(a){return a>0})&&(n.style.animationDuration="0s"),this.styles.transform!==null&&(n.style.transform="none")),this.bounds=Ew(this.context,n),_E(n,4)&&(this.flags|=16)}return e})(),V1e="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",DU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Fp=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var gy=0;gy<DU.length;gy++)Fp[DU.charCodeAt(gy)]=gy;var L1e=function(e){var t=e.length*.75,n=e.length,a,r=0,s,o,i,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var A=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(A)?A:new Uint8Array(A);for(a=0;a<n;a+=4)s=Fp[e.charCodeAt(a)],o=Fp[e.charCodeAt(a+1)],i=Fp[e.charCodeAt(a+2)],c=Fp[e.charCodeAt(a+3)],d[r++]=s<<2|o>>4,d[r++]=(o&15)<<4|i>>2,d[r++]=(i&3)<<6|c&63;return A},M1e=function(e){for(var t=e.length,n=[],a=0;a<t;a+=2)n.push(e[a+1]<<8|e[a]);return n},O1e=function(e){for(var t=e.length,n=[],a=0;a<t;a+=4)n.push(e[a+3]<<24|e[a+2]<<16|e[a+1]<<8|e[a]);return n},lf=5,mT=11,fC=2,H1e=mT-lf,QO=65536>>lf,$1e=1<<lf,mC=$1e-1,Q1e=1024>>lf,G1e=QO+Q1e,z1e=G1e,K1e=32,W1e=z1e+K1e,j1e=65536>>mT,q1e=1<<H1e,Y1e=q1e-1,UU=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},X1e=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},J1e=function(e,t){var n=L1e(e),a=Array.isArray(n)?O1e(n):new Uint32Array(n),r=Array.isArray(n)?M1e(n):new Uint16Array(n),s=24,o=UU(r,s/2,a[4]/2),i=a[5]===2?UU(r,(s+a[4])/2):X1e(a,Math.ceil((s+a[4])/4));return new Z1e(a[0],a[1],a[2],a[3],o,i)},Z1e=(function(){function e(t,n,a,r,s,o){this.initialValue=t,this.errorValue=n,this.highStart=a,this.highValueIndex=r,this.index=s,this.data=o}return e.prototype.get=function(t){var n;if(t>=0){if(t<55296||t>56319&&t<=65535)return n=this.index[t>>lf],n=(n<<fC)+(t&mC),this.data[n];if(t<=65535)return n=this.index[QO+(t-55296>>lf)],n=(n<<fC)+(t&mC),this.data[n];if(t<this.highStart)return n=W1e-j1e+(t>>mT),n=this.index[n],n+=t>>lf&Y1e,n=this.index[n],n=(n<<fC)+(t&mC),this.data[n];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e})(),RU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",eye=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var yy=0;yy<RU.length;yy++)eye[RU.charCodeAt(yy)]=yy;var tye=1,vC=2,hC=3,NU=4,VU=5,nye=7,LU=8,pC=9,gC=10,MU=11,OU=12,HU=13,$U=14,yC=15,aye=function(e){for(var t=[],n=0,a=e.length;n<a;){var r=e.charCodeAt(n++);if(r>=55296&&r<=56319&&n<a){var s=e.charCodeAt(n++);(s&64512)===56320?t.push(((r&1023)<<10)+(s&1023)+65536):(t.push(r),n--)}else t.push(r)}return t},rye=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var a=[],r=-1,s="";++r<n;){var o=e[r];o<=65535?a.push(o):(o-=65536,a.push((o>>10)+55296,o%1024+56320)),(r+1===n||a.length>16384)&&(s+=String.fromCharCode.apply(String,a),a.length=0)}return s},sye=J1e(V1e),Ji="",_C="",oye=function(e){return sye.get(e)},iye=function(e,t,n){var a=n-2,r=t[a],s=t[n-1],o=t[n];if(s===vC&&o===hC)return Ji;if(s===vC||s===hC||s===NU||o===vC||o===hC||o===NU)return _C;if(s===LU&&[LU,pC,MU,OU].indexOf(o)!==-1||(s===MU||s===pC)&&(o===pC||o===gC)||(s===OU||s===gC)&&o===gC||o===HU||o===VU||o===nye||s===tye)return Ji;if(s===HU&&o===$U){for(;r===VU;)r=t[--a];if(r===$U)return Ji}if(s===yC&&o===yC){for(var i=0;r===yC;)i++,r=t[--a];if(i%2===0)return Ji}return _C},lye=function(e){var t=aye(e),n=t.length,a=0,r=0,s=t.map(oye);return{next:function(){if(a>=n)return{done:!0,value:null};for(var o=Ji;a<n&&(o=iye(t,s,++a))===Ji;);if(o!==Ji||a===n){var i=rye.apply(null,t.slice(r,a));return r=a,{value:i,done:!1}}return{done:!0,value:null}}}},uye=function(e){for(var t=lye(e),n=[],a;!(a=t.next()).done;)a.value&&n.push(a.value.slice());return n},cye=function(e){var t=123;if(e.createRange){var n=e.createRange();if(n.getBoundingClientRect){var a=e.createElement("boundtest");a.style.height=t+"px",a.style.display="block",e.body.appendChild(a),n.selectNode(a);var r=n.getBoundingClientRect(),s=Math.round(r.height);if(e.body.removeChild(a),s===t)return!0}}return!1},dye=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var n=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var a=t.firstChild,r=Bw(a.data).map(function(c){return jr(c)}),s=0,o={},i=r.every(function(c,A){n.setStart(a,s),n.setEnd(a,s+c.length);var d=n.getBoundingClientRect();s+=c.length;var f=d.x>o.x||d.y>o.y;return o=d,A===0?!0:f});return e.body.removeChild(t),i},Aye=function(){return typeof new Image().crossOrigin<"u"},fye=function(){return typeof new XMLHttpRequest().responseType=="string"},mye=function(e){var t=new Image,n=e.createElement("canvas"),a=n.getContext("2d");if(!a)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{a.drawImage(t,0,0),n.toDataURL()}catch{return!1}return!0},QU=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},vye=function(e){var t=e.createElement("canvas"),n=100;t.width=n,t.height=n;var a=t.getContext("2d");if(!a)return Promise.reject(!1);a.fillStyle="rgb(0, 255, 0)",a.fillRect(0,0,n,n);var r=new Image,s=t.toDataURL();r.src=s;var o=wE(n,n,0,0,r);return a.fillStyle="red",a.fillRect(0,0,n,n),GU(o).then(function(i){a.drawImage(i,0,0);var c=a.getImageData(0,0,n,n).data;a.fillStyle="red",a.fillRect(0,0,n,n);var A=e.createElement("div");return A.style.backgroundImage="url("+s+")",A.style.height=n+"px",QU(c)?GU(wE(n,n,0,0,A)):Promise.reject(!1)}).then(function(i){return a.drawImage(i,0,0),QU(a.getImageData(0,0,n,n).data)}).catch(function(){return!1})},wE=function(e,t,n,a,r){var s="http://www.w3.org/2000/svg",o=document.createElementNS(s,"svg"),i=document.createElementNS(s,"foreignObject");return o.setAttributeNS(null,"width",e.toString()),o.setAttributeNS(null,"height",t.toString()),i.setAttributeNS(null,"width","100%"),i.setAttributeNS(null,"height","100%"),i.setAttributeNS(null,"x",n.toString()),i.setAttributeNS(null,"y",a.toString()),i.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(i),i.appendChild(r),o},GU=function(e){return new Promise(function(t,n){var a=new Image;a.onload=function(){return t(a)},a.onerror=n,a.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},Qs={get SUPPORT_RANGE_BOUNDS(){var e=cye(document);return Object.defineProperty(Qs,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=Qs.SUPPORT_RANGE_BOUNDS&&dye(document);return Object.defineProperty(Qs,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=mye(document);return Object.defineProperty(Qs,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?vye(document):Promise.resolve(!1);return Object.defineProperty(Qs,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=Aye();return Object.defineProperty(Qs,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=fye();return Object.defineProperty(Qs,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Qs,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Qs,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},Zp=(function(){function e(t,n){this.text=t,this.bounds=n}return e})(),hye=function(e,t,n,a){var r=yye(t,n),s=[],o=0;return r.forEach(function(i){if(n.textDecorationLine.length||i.trim().length>0)if(Qs.SUPPORT_RANGE_BOUNDS){var c=zU(a,o,i.length).getClientRects();if(c.length>1){var A=vT(i),d=0;A.forEach(function(m){s.push(new Zp(m,Lc.fromDOMRectList(e,zU(a,d+o,m.length).getClientRects()))),d+=m.length})}else s.push(new Zp(i,Lc.fromDOMRectList(e,c)))}else{var f=a.splitText(i.length);s.push(new Zp(i,pye(e,a))),a=f}else Qs.SUPPORT_RANGE_BOUNDS||(a=a.splitText(i.length));o+=i.length}),s},pye=function(e,t){var n=t.ownerDocument;if(n){var a=n.createElement("html2canvaswrapper");a.appendChild(t.cloneNode(!0));var r=t.parentNode;if(r){r.replaceChild(a,t);var s=Ew(e,a);return a.firstChild&&r.replaceChild(a.firstChild,a),s}}return Lc.EMPTY},zU=function(e,t,n){var a=e.ownerDocument;if(!a)throw new Error("Node has no owner document");var r=a.createRange();return r.setStart(e,t),r.setEnd(e,t+n),r},vT=function(e){if(Qs.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(n){return n.segment})}return uye(e)},gye=function(e,t){if(Qs.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(e)).map(function(a){return a.segment})}return wye(e,t)},yye=function(e,t){return t.letterSpacing!==0?vT(e):gye(e,t)},_ye=[32,160,4961,65792,65793,4153,4241],wye=function(e,t){for(var n=jpe(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),a=[],r,s=function(){if(r.value){var o=r.value.slice(),i=Bw(o),c="";i.forEach(function(A){_ye.indexOf(A)===-1?c+=jr(A):(c.length&&a.push(c),a.push(jr(A)),c="")}),c.length&&a.push(c)}};!(r=n.next()).done;)s();return a},bye=(function(){function e(t,n,a){this.text=xye(n.data,a.textTransform),this.textBounds=hye(t,this.text,a,n)}return e})(),xye=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(Cye,Sye);case 2:return e.toUpperCase();default:return e}},Cye=/(^|\s|:|-|\(|\))([a-z])/g,Sye=function(e,t,n){return e.length>0?t+n.toUpperCase():e},GO=(function(e){iu(t,e);function t(n,a){var r=e.call(this,n,a)||this;return r.src=a.currentSrc||a.src,r.intrinsicWidth=a.naturalWidth,r.intrinsicHeight=a.naturalHeight,r.context.cache.addImage(r.src),r}return t})(Wu),zO=(function(e){iu(t,e);function t(n,a){var r=e.call(this,n,a)||this;return r.canvas=a,r.intrinsicWidth=a.width,r.intrinsicHeight=a.height,r}return t})(Wu),KO=(function(e){iu(t,e);function t(n,a){var r=e.call(this,n,a)||this,s=new XMLSerializer,o=Ew(n,a);return a.setAttribute("width",o.width+"px"),a.setAttribute("height",o.height+"px"),r.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(a)),r.intrinsicWidth=a.width.baseVal.value,r.intrinsicHeight=a.height.baseVal.value,r.context.cache.addImage(r.svg),r}return t})(Wu),WO=(function(e){iu(t,e);function t(n,a){var r=e.call(this,n,a)||this;return r.value=a.value,r}return t})(Wu),bE=(function(e){iu(t,e);function t(n,a){var r=e.call(this,n,a)||this;return r.start=a.start,r.reversed=typeof a.reversed=="boolean"&&a.reversed===!0,r}return t})(Wu),Eye=[{type:15,flags:0,unit:"px",number:3}],Bye=[{type:16,flags:0,number:50}],kye=function(e){return e.width>e.height?new Lc(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new Lc(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},Tye=function(e){var t=e.type===Iye?new Array(e.value.length+1).join(""):e.value;return t.length===0?e.placeholder||"":t},e2="checkbox",t2="radio",Iye="password",KU=707406591,hT=(function(e){iu(t,e);function t(n,a){var r=e.call(this,n,a)||this;switch(r.type=a.type.toLowerCase(),r.checked=a.checked,r.value=Tye(a),(r.type===e2||r.type===t2)&&(r.styles.backgroundColor=3739148031,r.styles.borderTopColor=r.styles.borderRightColor=r.styles.borderBottomColor=r.styles.borderLeftColor=2779096575,r.styles.borderTopWidth=r.styles.borderRightWidth=r.styles.borderBottomWidth=r.styles.borderLeftWidth=1,r.styles.borderTopStyle=r.styles.borderRightStyle=r.styles.borderBottomStyle=r.styles.borderLeftStyle=1,r.styles.backgroundClip=[0],r.styles.backgroundOrigin=[0],r.bounds=kye(r.bounds)),r.type){case e2:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=Eye;break;case t2:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=Bye;break}return r}return t})(Wu),jO=(function(e){iu(t,e);function t(n,a){var r=e.call(this,n,a)||this,s=a.options[a.selectedIndex||0];return r.value=s&&s.text||"",r}return t})(Wu),qO=(function(e){iu(t,e);function t(n,a){var r=e.call(this,n,a)||this;return r.value=a.value,r}return t})(Wu),YO=(function(e){iu(t,e);function t(n,a){var r=e.call(this,n,a)||this;r.src=a.src,r.width=parseInt(a.width,10)||0,r.height=parseInt(a.height,10)||0,r.backgroundColor=r.styles.backgroundColor;try{if(a.contentWindow&&a.contentWindow.document&&a.contentWindow.document.documentElement){r.tree=JO(n,a.contentWindow.document.documentElement);var s=a.contentWindow.document.documentElement?Xp(n,getComputedStyle(a.contentWindow.document.documentElement).backgroundColor):Bc.TRANSPARENT,o=a.contentWindow.document.body?Xp(n,getComputedStyle(a.contentWindow.document.body).backgroundColor):Bc.TRANSPARENT;r.backgroundColor=Ld(s)?Ld(o)?r.styles.backgroundColor:o:s}}catch{}return r}return t})(Wu),Fye=["OL","UL","MENU"],r_=function(e,t,n,a){for(var r=t.firstChild,s=void 0;r;r=s)if(s=r.nextSibling,ZO(r)&&r.data.trim().length>0)n.textNodes.push(new bye(e,r,n.styles));else if(ev(r))if(aH(r)&&r.assignedNodes)r.assignedNodes().forEach(function(i){return r_(e,i,n,a)});else{var o=XO(e,r);o.styles.isVisible()&&(Pye(r,o,a)?o.flags|=4:Dye(o.styles)&&(o.flags|=2),Fye.indexOf(r.tagName)!==-1&&(o.flags|=8),n.elements.push(o),r.slot,r.shadowRoot?r_(e,r.shadowRoot,o,a):!n2(r)&&!eH(r)&&!a2(r)&&r_(e,r,o,a))}},XO=function(e,t){return CE(t)?new GO(e,t):tH(t)?new zO(e,t):eH(t)?new KO(e,t):Uye(t)?new WO(e,t):Rye(t)?new bE(e,t):Nye(t)?new hT(e,t):a2(t)?new jO(e,t):n2(t)?new qO(e,t):nH(t)?new YO(e,t):new Wu(e,t)},JO=function(e,t){var n=XO(e,t);return n.flags|=4,r_(e,t,n,n),n},Pye=function(e,t,n){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||pT(e)&&n.styles.isTransparent()},Dye=function(e){return e.isPositioned()||e.isFloating()},ZO=function(e){return e.nodeType===Node.TEXT_NODE},ev=function(e){return e.nodeType===Node.ELEMENT_NODE},xE=function(e){return ev(e)&&typeof e.style<"u"&&!s_(e)},s_=function(e){return typeof e.className=="object"},Uye=function(e){return e.tagName==="LI"},Rye=function(e){return e.tagName==="OL"},Nye=function(e){return e.tagName==="INPUT"},Vye=function(e){return e.tagName==="HTML"},eH=function(e){return e.tagName==="svg"},pT=function(e){return e.tagName==="BODY"},tH=function(e){return e.tagName==="CANVAS"},WU=function(e){return e.tagName==="VIDEO"},CE=function(e){return e.tagName==="IMG"},nH=function(e){return e.tagName==="IFRAME"},jU=function(e){return e.tagName==="STYLE"},Lye=function(e){return e.tagName==="SCRIPT"},n2=function(e){return e.tagName==="TEXTAREA"},a2=function(e){return e.tagName==="SELECT"},aH=function(e){return e.tagName==="SLOT"},qU=function(e){return e.tagName.indexOf("-")>0},Mye=(function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var n=this.counters[t];return n&&n.length?n[n.length-1]:1},e.prototype.getCounterValues=function(t){var n=this.counters[t];return n||[]},e.prototype.pop=function(t){var n=this;t.forEach(function(a){return n.counters[a].pop()})},e.prototype.parse=function(t){var n=this,a=t.counterIncrement,r=t.counterReset,s=!0;a!==null&&a.forEach(function(i){var c=n.counters[i.counter];c&&i.increment!==0&&(s=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=i.increment)});var o=[];return s&&r.forEach(function(i){var c=n.counters[i.counter];o.push(i.counter),c||(c=n.counters[i.counter]=[]),c.push(i.reset)}),o},e})(),YU={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},XU={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Oye={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Hye={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Om=function(e,t,n,a,r,s){return e<t||e>n?M0(e,r,s.length>0):a.integers.reduce(function(o,i,c){for(;e>=i;)e-=i,o+=a.values[c];return o},"")+s},rH=function(e,t,n,a){var r="";do n||e--,r=a(e)+r,e/=t;while(e*t>=t);return r},Kr=function(e,t,n,a,r){var s=n-t+1;return(e<0?"-":"")+(rH(Math.abs(e),s,a,function(o){return jr(Math.floor(o%s)+t)})+r)},UA=function(e,t,n){n===void 0&&(n=". ");var a=t.length;return rH(Math.abs(e),a,!1,function(r){return t[Math.floor(r%a)]})+n},qm=1,md=2,vd=4,Pp=8,mc=function(e,t,n,a,r,s){if(e<-9999||e>9999)return M0(e,4,r.length>0);var o=Math.abs(e),i=r;if(o===0)return t[0]+i;for(var c=0;o>0&&c<=4;c++){var A=o%10;A===0&&_s(s,qm)&&i!==""?i=t[A]+i:A>1||A===1&&c===0||A===1&&c===1&&_s(s,md)||A===1&&c===1&&_s(s,vd)&&e>100||A===1&&c>1&&_s(s,Pp)?i=t[A]+(c>0?n[c-1]:"")+i:A===1&&c>0&&(i=n[c-1]+i),o=Math.floor(o/10)}return(e<0?a:"")+i},JU="",ZU="",eR="",wC="",M0=function(e,t,n){var a=n?". ":"",r=n?"":"",s=n?", ":"",o=n?" ":"";switch(t){case 0:return""+o;case 1:return""+o;case 2:return""+o;case 5:var i=Kr(e,48,57,!0,a);return i.length<4?"0"+i:i;case 4:return UA(e,"",r);case 6:return Om(e,1,3999,YU,3,a).toLowerCase();case 7:return Om(e,1,3999,YU,3,a);case 8:return Kr(e,945,969,!1,a);case 9:return Kr(e,97,122,!1,a);case 10:return Kr(e,65,90,!1,a);case 11:return Kr(e,1632,1641,!0,a);case 12:case 49:return Om(e,1,9999,XU,3,a);case 35:return Om(e,1,9999,XU,3,a).toLowerCase();case 13:return Kr(e,2534,2543,!0,a);case 14:case 30:return Kr(e,6112,6121,!0,a);case 15:return UA(e,"",r);case 16:return UA(e,"",r);case 17:case 48:return mc(e,"",JU,"",r,md|vd|Pp);case 47:return mc(e,"",ZU,"",r,qm|md|vd|Pp);case 42:return mc(e,"",JU,"",r,md|vd|Pp);case 41:return mc(e,"",ZU,"",r,qm|md|vd|Pp);case 26:return mc(e,"","",eR,r,0);case 25:return mc(e,"","",eR,r,qm|md|vd);case 31:return mc(e,"","",wC,s,qm|md|vd);case 33:return mc(e,"","",wC,s,0);case 32:return mc(e,"","",wC,s,qm|md|vd);case 18:return Kr(e,2406,2415,!0,a);case 20:return Om(e,1,19999,Hye,3,a);case 21:return Kr(e,2790,2799,!0,a);case 22:return Kr(e,2662,2671,!0,a);case 22:return Om(e,1,10999,Oye,3,a);case 23:return UA(e,"");case 24:return UA(e,"");case 27:return Kr(e,3302,3311,!0,a);case 28:return UA(e,"",r);case 29:return UA(e,"",r);case 34:return Kr(e,3792,3801,!0,a);case 37:return Kr(e,6160,6169,!0,a);case 38:return Kr(e,4160,4169,!0,a);case 39:return Kr(e,2918,2927,!0,a);case 40:return Kr(e,1776,1785,!0,a);case 43:return Kr(e,3046,3055,!0,a);case 44:return Kr(e,3174,3183,!0,a);case 45:return Kr(e,3664,3673,!0,a);case 46:return Kr(e,3872,3881,!0,a);case 3:default:return Kr(e,48,57,!0,a)}},sH="data-html2canvas-ignore",tR=(function(){function e(t,n,a){if(this.context=t,this.options=a,this.scrolledElements=[],this.referenceElement=n,this.counters=new Mye,this.quoteDepth=0,!n.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(n.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,n){var a=this,r=$ye(t,n);if(!r.contentWindow)return Promise.reject("Unable to find iframe window");var s=t.defaultView.pageXOffset,o=t.defaultView.pageYOffset,i=r.contentWindow,c=i.document,A=zye(r).then(function(){return Do(a,void 0,void 0,function(){var d,f;return ro(this,function(m){switch(m.label){case 0:return this.scrolledElements.forEach(qye),i&&(i.scrollTo(n.left,n.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(i.scrollY!==n.top||i.scrollX!==n.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(i.scrollX-n.left,i.scrollY-n.top,0,0))),d=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:m.sent(),m.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Gye(c)]:[3,4];case 3:m.sent(),m.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(c,f)}).then(function(){return r})]:[2,r]}})})});return c.open(),c.write(Wye(document.doctype)+"<html></html>"),jye(this.referenceElement.ownerDocument,s,o),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),A},e.prototype.createElementClone=function(t){if(_E(t,2))debugger;if(tH(t))return this.createCanvasClone(t);if(WU(t))return this.createVideoClone(t);if(jU(t))return this.createStyleClone(t);var n=t.cloneNode(!1);return CE(n)&&(CE(t)&&t.currentSrc&&t.currentSrc!==t.src&&(n.src=t.currentSrc,n.srcset=""),n.loading==="lazy"&&(n.loading="eager")),qU(n)?this.createCustomElementClone(n):n},e.prototype.createCustomElementClone=function(t){var n=document.createElement("html2canvascustomelement");return bC(t.style,n),n},e.prototype.createStyleClone=function(t){try{var n=t.sheet;if(n&&n.cssRules){var a=[].slice.call(n.cssRules,0).reduce(function(s,o){return o&&typeof o.cssText=="string"?s+o.cssText:s},""),r=t.cloneNode(!1);return r.textContent=a,r}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var n;if(this.options.inlineImages&&t.ownerDocument){var a=t.ownerDocument.createElement("img");try{return a.src=t.toDataURL(),a}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var r=t.cloneNode(!1);try{r.width=t.width,r.height=t.height;var s=t.getContext("2d"),o=r.getContext("2d");if(o)if(!this.options.allowTaint&&s)o.putImageData(s.getImageData(0,0,t.width,t.height),0,0);else{var i=(n=t.getContext("webgl2"))!==null&&n!==void 0?n:t.getContext("webgl");if(i){var c=i.getContextAttributes();c?.preserveDrawingBuffer===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}o.drawImage(t,0,0)}return r}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return r},e.prototype.createVideoClone=function(t){var n=t.ownerDocument.createElement("canvas");n.width=t.offsetWidth,n.height=t.offsetHeight;var a=n.getContext("2d");try{return a&&(a.drawImage(t,0,0,n.width,n.height),this.options.allowTaint||a.getImageData(0,0,n.width,n.height)),n}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var r=t.ownerDocument.createElement("canvas");return r.width=t.offsetWidth,r.height=t.offsetHeight,r},e.prototype.appendChildNode=function(t,n,a){(!ev(n)||!Lye(n)&&!n.hasAttribute(sH)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(n)))&&(!this.options.copyStyles||!ev(n)||!jU(n))&&t.appendChild(this.cloneNode(n,a))},e.prototype.cloneChildNodes=function(t,n,a){for(var r=this,s=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;s;s=s.nextSibling)if(ev(s)&&aH(s)&&typeof s.assignedNodes=="function"){var o=s.assignedNodes();o.length&&o.forEach(function(i){return r.appendChildNode(n,i,a)})}else this.appendChildNode(n,s,a)},e.prototype.cloneNode=function(t,n){if(ZO(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var a=t.ownerDocument.defaultView;if(a&&ev(t)&&(xE(t)||s_(t))){var r=this.createElementClone(t);r.style.transitionProperty="none";var s=a.getComputedStyle(t),o=a.getComputedStyle(t,":before"),i=a.getComputedStyle(t,":after");this.referenceElement===t&&xE(r)&&(this.clonedReferenceElement=r),pT(r)&&Jye(r);var c=this.counters.parse(new PU(this.context,s)),A=this.resolvePseudoContent(t,r,o,e0.BEFORE);qU(t)&&(n=!0),WU(t)||this.cloneChildNodes(t,r,n),A&&r.insertBefore(A,r.firstChild);var d=this.resolvePseudoContent(t,r,i,e0.AFTER);return d&&r.appendChild(d),this.counters.pop(c),(s&&(this.options.copyStyles||s_(t))&&!nH(t)||n)&&bC(s,r),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([r,t.scrollLeft,t.scrollTop]),(n2(t)||a2(t))&&(n2(r)||a2(r))&&(r.value=t.value),r}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,n,a,r){var s=this;if(a){var o=a.content,i=n.ownerDocument;if(!(!i||!o||o==="none"||o==="-moz-alt-content"||a.display==="none")){this.counters.parse(new PU(this.context,a));var c=new U1e(this.context,a),A=i.createElement("html2canvaspseudoelement");bC(a,A),c.content.forEach(function(f){if(f.type===0)A.appendChild(i.createTextNode(f.value));else if(f.type===22){var m=i.createElement("img");m.src=f.value,m.style.opacity="1",A.appendChild(m)}else if(f.type===18){if(f.name==="attr"){var h=f.values.filter(rr);h.length&&A.appendChild(i.createTextNode(t.getAttribute(h[0].value)||""))}else if(f.name==="counter"){var p=f.values.filter(zv),y=p[0],g=p[1];if(y&&rr(y)){var w=s.counters.getCounterValue(y.value),b=g&&rr(g)?yE.parse(s.context,g.value):3;A.appendChild(i.createTextNode(M0(w,b,!1)))}}else if(f.name==="counters"){var x=f.values.filter(zv),y=x[0],T=x[1],g=x[2];if(y&&rr(y)){var F=s.counters.getCounterValues(y.value),k=g&&rr(g)?yE.parse(s.context,g.value):3,S=T&&T.type===0?T.value:"",E=F.map(function(P){return M0(P,k,!1)}).join(S);A.appendChild(i.createTextNode(E))}}}else if(f.type===20)switch(f.value){case"open-quote":A.appendChild(i.createTextNode(FU(c.quotes,s.quoteDepth++,!0)));break;case"close-quote":A.appendChild(i.createTextNode(FU(c.quotes,--s.quoteDepth,!1)));break;default:A.appendChild(i.createTextNode(f.value))}}),A.className=SE+" "+EE;var d=r===e0.BEFORE?" "+SE:" "+EE;return s_(n)?n.className.baseValue+=d:n.className+=d,A}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e})(),e0;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(e0||(e0={}));var $ye=function(e,t){var n=e.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=t.width.toString(),n.height=t.height.toString(),n.scrolling="no",n.setAttribute(sH,"true"),e.body.appendChild(n),n},Qye=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},Gye=function(e){return Promise.all([].slice.call(e.images,0).map(Qye))},zye=function(e){return new Promise(function(t,n){var a=e.contentWindow;if(!a)return n("No window assigned for iframe");var r=a.document;a.onload=e.onload=function(){a.onload=e.onload=null;var s=setInterval(function(){r.body.childNodes.length>0&&r.readyState==="complete"&&(clearInterval(s),t(e))},50)}})},Kye=["all","d","content"],bC=function(e,t){for(var n=e.length-1;n>=0;n--){var a=e.item(n);Kye.indexOf(a)===-1&&t.style.setProperty(a,e.getPropertyValue(a))}return t},Wye=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},jye=function(e,t,n){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||n!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,n)},qye=function(e){var t=e[0],n=e[1],a=e[2];t.scrollLeft=n,t.scrollTop=a},Yye=":before",Xye=":after",SE="___html2canvas___pseudoelement_before",EE="___html2canvas___pseudoelement_after",nR=`{
    content: "" !important;
    display: none !important;
}`,Jye=function(e){Zye(e,"."+SE+Yye+nR+`
         .`+EE+Xye+nR)},Zye=function(e,t){var n=e.ownerDocument;if(n){var a=n.createElement("style");a.textContent=t,e.appendChild(a)}},oH=(function(){function e(){}return e.getOrigin=function(t){var n=e._link;return n?(n.href=t,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e})(),e_e=(function(){function e(t,n){this.context=t,this._options=n,this._cache={}}return e.prototype.addImage=function(t){var n=Promise.resolve();return this.has(t)||(CC(t)||r_e(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),n},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return Do(this,void 0,void 0,function(){var n,a,r,s,o=this;return ro(this,function(i){switch(i.label){case 0:return n=oH.isSameOrigin(t),a=!xC(t)&&this._options.useCORS===!0&&Qs.SUPPORT_CORS_IMAGES&&!n,r=!xC(t)&&!n&&!CC(t)&&typeof this._options.proxy=="string"&&Qs.SUPPORT_CORS_XHR&&!a,!n&&this._options.allowTaint===!1&&!xC(t)&&!CC(t)&&!r&&!a?[2]:(s=t,r?[4,this.proxy(s)]:[3,2]);case 1:s=i.sent(),i.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(c,A){var d=new Image;d.onload=function(){return c(d)},d.onerror=A,(s_e(s)||a)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return c(d)},500),o._options.imageTimeout>0&&setTimeout(function(){return A("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,i.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var n=this,a=this._options.proxy;if(!a)throw new Error("No proxy defined");var r=t.substring(0,256);return new Promise(function(s,o){var i=Qs.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(i==="text")s(c.response);else{var f=new FileReader;f.addEventListener("load",function(){return s(f.result)},!1),f.addEventListener("error",function(m){return o(m)},!1),f.readAsDataURL(c.response)}else o("Failed to proxy resource "+r+" with status code "+c.status)},c.onerror=o;var A=a.indexOf("?")>-1?"&":"?";if(c.open("GET",""+a+A+"url="+encodeURIComponent(t)+"&responseType="+i),i!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=i),n._options.imageTimeout){var d=n._options.imageTimeout;c.timeout=d,c.ontimeout=function(){return o("Timed out ("+d+"ms) proxying "+r)}}c.send()})},e})(),t_e=/^data:image\/svg\+xml/i,n_e=/^data:image\/.*;base64,/i,a_e=/^data:image\/.*/i,r_e=function(e){return Qs.SUPPORT_SVG_DRAWING||!o_e(e)},xC=function(e){return a_e.test(e)},s_e=function(e){return n_e.test(e)},CC=function(e){return e.substr(0,4)==="blob"},o_e=function(e){return e.substr(-3).toLowerCase()==="svg"||t_e.test(e)},cn=(function(){function e(t,n){this.type=0,this.x=t,this.y=n}return e.prototype.add=function(t,n){return new e(this.x+t,this.y+n)},e})(),Hm=function(e,t,n){return new cn(e.x+(t.x-e.x)*n,e.y+(t.y-e.y)*n)},_y=(function(){function e(t,n,a,r){this.type=1,this.start=t,this.startControl=n,this.endControl=a,this.end=r}return e.prototype.subdivide=function(t,n){var a=Hm(this.start,this.startControl,t),r=Hm(this.startControl,this.endControl,t),s=Hm(this.endControl,this.end,t),o=Hm(a,r,t),i=Hm(r,s,t),c=Hm(o,i,t);return n?new e(this.start,a,o,c):new e(c,i,s,this.end)},e.prototype.add=function(t,n){return new e(this.start.add(t,n),this.startControl.add(t,n),this.endControl.add(t,n),this.end.add(t,n))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e})(),el=function(e){return e.type===1},i_e=(function(){function e(t){var n=t.styles,a=t.bounds,r=Ip(n.borderTopLeftRadius,a.width,a.height),s=r[0],o=r[1],i=Ip(n.borderTopRightRadius,a.width,a.height),c=i[0],A=i[1],d=Ip(n.borderBottomRightRadius,a.width,a.height),f=d[0],m=d[1],h=Ip(n.borderBottomLeftRadius,a.width,a.height),p=h[0],y=h[1],g=[];g.push((s+c)/a.width),g.push((p+f)/a.width),g.push((o+y)/a.height),g.push((A+m)/a.height);var w=Math.max.apply(Math,g);w>1&&(s/=w,o/=w,c/=w,A/=w,f/=w,m/=w,p/=w,y/=w);var b=a.width-c,x=a.height-m,T=a.width-f,F=a.height-y,k=n.borderTopWidth,S=n.borderRightWidth,E=n.borderBottomWidth,C=n.borderLeftWidth,D=fr(n.paddingTop,t.bounds.width),P=fr(n.paddingRight,t.bounds.width),O=fr(n.paddingBottom,t.bounds.width),H=fr(n.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||o>0?Cr(a.left+C/3,a.top+k/3,s-C/3,o-k/3,Wa.TOP_LEFT):new cn(a.left+C/3,a.top+k/3),this.topRightBorderDoubleOuterBox=s>0||o>0?Cr(a.left+b,a.top+k/3,c-S/3,A-k/3,Wa.TOP_RIGHT):new cn(a.left+a.width-S/3,a.top+k/3),this.bottomRightBorderDoubleOuterBox=f>0||m>0?Cr(a.left+T,a.top+x,f-S/3,m-E/3,Wa.BOTTOM_RIGHT):new cn(a.left+a.width-S/3,a.top+a.height-E/3),this.bottomLeftBorderDoubleOuterBox=p>0||y>0?Cr(a.left+C/3,a.top+F,p-C/3,y-E/3,Wa.BOTTOM_LEFT):new cn(a.left+C/3,a.top+a.height-E/3),this.topLeftBorderDoubleInnerBox=s>0||o>0?Cr(a.left+C*2/3,a.top+k*2/3,s-C*2/3,o-k*2/3,Wa.TOP_LEFT):new cn(a.left+C*2/3,a.top+k*2/3),this.topRightBorderDoubleInnerBox=s>0||o>0?Cr(a.left+b,a.top+k*2/3,c-S*2/3,A-k*2/3,Wa.TOP_RIGHT):new cn(a.left+a.width-S*2/3,a.top+k*2/3),this.bottomRightBorderDoubleInnerBox=f>0||m>0?Cr(a.left+T,a.top+x,f-S*2/3,m-E*2/3,Wa.BOTTOM_RIGHT):new cn(a.left+a.width-S*2/3,a.top+a.height-E*2/3),this.bottomLeftBorderDoubleInnerBox=p>0||y>0?Cr(a.left+C*2/3,a.top+F,p-C*2/3,y-E*2/3,Wa.BOTTOM_LEFT):new cn(a.left+C*2/3,a.top+a.height-E*2/3),this.topLeftBorderStroke=s>0||o>0?Cr(a.left+C/2,a.top+k/2,s-C/2,o-k/2,Wa.TOP_LEFT):new cn(a.left+C/2,a.top+k/2),this.topRightBorderStroke=s>0||o>0?Cr(a.left+b,a.top+k/2,c-S/2,A-k/2,Wa.TOP_RIGHT):new cn(a.left+a.width-S/2,a.top+k/2),this.bottomRightBorderStroke=f>0||m>0?Cr(a.left+T,a.top+x,f-S/2,m-E/2,Wa.BOTTOM_RIGHT):new cn(a.left+a.width-S/2,a.top+a.height-E/2),this.bottomLeftBorderStroke=p>0||y>0?Cr(a.left+C/2,a.top+F,p-C/2,y-E/2,Wa.BOTTOM_LEFT):new cn(a.left+C/2,a.top+a.height-E/2),this.topLeftBorderBox=s>0||o>0?Cr(a.left,a.top,s,o,Wa.TOP_LEFT):new cn(a.left,a.top),this.topRightBorderBox=c>0||A>0?Cr(a.left+b,a.top,c,A,Wa.TOP_RIGHT):new cn(a.left+a.width,a.top),this.bottomRightBorderBox=f>0||m>0?Cr(a.left+T,a.top+x,f,m,Wa.BOTTOM_RIGHT):new cn(a.left+a.width,a.top+a.height),this.bottomLeftBorderBox=p>0||y>0?Cr(a.left,a.top+F,p,y,Wa.BOTTOM_LEFT):new cn(a.left,a.top+a.height),this.topLeftPaddingBox=s>0||o>0?Cr(a.left+C,a.top+k,Math.max(0,s-C),Math.max(0,o-k),Wa.TOP_LEFT):new cn(a.left+C,a.top+k),this.topRightPaddingBox=c>0||A>0?Cr(a.left+Math.min(b,a.width-S),a.top+k,b>a.width+S?0:Math.max(0,c-S),Math.max(0,A-k),Wa.TOP_RIGHT):new cn(a.left+a.width-S,a.top+k),this.bottomRightPaddingBox=f>0||m>0?Cr(a.left+Math.min(T,a.width-C),a.top+Math.min(x,a.height-E),Math.max(0,f-S),Math.max(0,m-E),Wa.BOTTOM_RIGHT):new cn(a.left+a.width-S,a.top+a.height-E),this.bottomLeftPaddingBox=p>0||y>0?Cr(a.left+C,a.top+Math.min(F,a.height-E),Math.max(0,p-C),Math.max(0,y-E),Wa.BOTTOM_LEFT):new cn(a.left+C,a.top+a.height-E),this.topLeftContentBox=s>0||o>0?Cr(a.left+C+H,a.top+k+D,Math.max(0,s-(C+H)),Math.max(0,o-(k+D)),Wa.TOP_LEFT):new cn(a.left+C+H,a.top+k+D),this.topRightContentBox=c>0||A>0?Cr(a.left+Math.min(b,a.width+C+H),a.top+k+D,b>a.width+C+H?0:c-C+H,A-(k+D),Wa.TOP_RIGHT):new cn(a.left+a.width-(S+P),a.top+k+D),this.bottomRightContentBox=f>0||m>0?Cr(a.left+Math.min(T,a.width-(C+H)),a.top+Math.min(x,a.height+k+D),Math.max(0,f-(S+P)),m-(E+O),Wa.BOTTOM_RIGHT):new cn(a.left+a.width-(S+P),a.top+a.height-(E+O)),this.bottomLeftContentBox=p>0||y>0?Cr(a.left+C+H,a.top+F,Math.max(0,p-(C+H)),y-(E+O),Wa.BOTTOM_LEFT):new cn(a.left+C+H,a.top+a.height-(E+O))}return e})(),Wa;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Wa||(Wa={}));var Cr=function(e,t,n,a,r){var s=4*((Math.sqrt(2)-1)/3),o=n*s,i=a*s,c=e+n,A=t+a;switch(r){case Wa.TOP_LEFT:return new _y(new cn(e,A),new cn(e,A-i),new cn(c-o,t),new cn(c,t));case Wa.TOP_RIGHT:return new _y(new cn(e,t),new cn(e+o,t),new cn(c,A-i),new cn(c,A));case Wa.BOTTOM_RIGHT:return new _y(new cn(c,t),new cn(c,t+i),new cn(e+o,A),new cn(e,A));case Wa.BOTTOM_LEFT:default:return new _y(new cn(c,A),new cn(c-o,A),new cn(e,t+i),new cn(e,t))}},r2=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},l_e=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},s2=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},u_e=(function(){function e(t,n,a){this.offsetX=t,this.offsetY=n,this.matrix=a,this.type=0,this.target=6}return e})(),wy=(function(){function e(t,n){this.path=t,this.target=n,this.type=1}return e})(),c_e=(function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e})(),d_e=function(e){return e.type===0},iH=function(e){return e.type===1},A_e=function(e){return e.type===2},aR=function(e,t){return e.length===t.length?e.some(function(n,a){return n===t[a]}):!1},f_e=function(e,t,n,a,r){return e.map(function(s,o){switch(o){case 0:return s.add(t,n);case 1:return s.add(t+a,n);case 2:return s.add(t+a,n+r);case 3:return s.add(t,n+r)}return s})},lH=(function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e})(),uH=(function(){function e(t,n){if(this.container=t,this.parent=n,this.effects=[],this.curves=new i_e(this.container),this.container.styles.opacity<1&&this.effects.push(new c_e(this.container.styles.opacity)),this.container.styles.transform!==null){var a=this.container.bounds.left+this.container.styles.transformOrigin[0].number,r=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new u_e(a,r,s))}if(this.container.styles.overflowX!==0){var o=r2(this.curves),i=s2(this.curves);aR(o,i)?this.effects.push(new wy(o,6)):(this.effects.push(new wy(o,2)),this.effects.push(new wy(i,4)))}}return e.prototype.getEffects=function(t){for(var n=[2,3].indexOf(this.container.styles.position)===-1,a=this.parent,r=this.effects.slice(0);a;){var s=a.effects.filter(function(c){return!iH(c)});if(n||a.container.styles.position!==0||!a.parent){if(r.unshift.apply(r,s),n=[2,3].indexOf(a.container.styles.position)===-1,a.container.styles.overflowX!==0){var o=r2(a.curves),i=s2(a.curves);aR(o,i)||r.unshift(new wy(i,6))}}else r.unshift.apply(r,s);a=a.parent}return r.filter(function(c){return _s(c.target,t)})},e})(),BE=function(e,t,n,a){e.container.elements.forEach(function(r){var s=_s(r.flags,4),o=_s(r.flags,2),i=new uH(r,e);_s(r.styles.display,2048)&&a.push(i);var c=_s(r.flags,8)?[]:a;if(s||o){var A=s||r.styles.isPositioned()?n:t,d=new lH(i);if(r.styles.isPositioned()||r.styles.opacity<1||r.styles.isTransformed()){var f=r.styles.zIndex.order;if(f<0){var m=0;A.negativeZIndex.some(function(p,y){return f>p.element.container.styles.zIndex.order?(m=y,!1):m>0}),A.negativeZIndex.splice(m,0,d)}else if(f>0){var h=0;A.positiveZIndex.some(function(p,y){return f>=p.element.container.styles.zIndex.order?(h=y+1,!1):h>0}),A.positiveZIndex.splice(h,0,d)}else A.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else r.styles.isFloating()?A.nonPositionedFloats.push(d):A.nonPositionedInlineLevel.push(d);BE(i,d,s?d:n,c)}else r.styles.isInlineLevel()?t.inlineLevel.push(i):t.nonInlineLevel.push(i),BE(i,t,n,c);_s(r.flags,8)&&cH(r,c)})},cH=function(e,t){for(var n=e instanceof bE?e.start:1,a=e instanceof bE?e.reversed:!1,r=0;r<t.length;r++){var s=t[r];s.container instanceof WO&&typeof s.container.value=="number"&&s.container.value!==0&&(n=s.container.value),s.listValue=M0(n,s.container.styles.listStyleType,!0),n+=a?-1:1}},m_e=function(e){var t=new uH(e,null),n=new lH(t),a=[];return BE(t,n,n,a),cH(t.container,a),n},rR=function(e,t){switch(t){case 0:return rl(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return rl(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return rl(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return rl(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},v_e=function(e,t){switch(t){case 0:return rl(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return rl(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return rl(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return rl(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},h_e=function(e,t){switch(t){case 0:return rl(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return rl(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return rl(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return rl(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},p_e=function(e,t){switch(t){case 0:return by(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return by(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return by(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return by(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},by=function(e,t){var n=[];return el(e)?n.push(e.subdivide(.5,!1)):n.push(e),el(t)?n.push(t.subdivide(.5,!0)):n.push(t),n},rl=function(e,t,n,a){var r=[];return el(e)?r.push(e.subdivide(.5,!1)):r.push(e),el(n)?r.push(n.subdivide(.5,!0)):r.push(n),el(a)?r.push(a.subdivide(.5,!0).reverse()):r.push(a),el(t)?r.push(t.subdivide(.5,!1).reverse()):r.push(t),r},dH=function(e){var t=e.bounds,n=e.styles;return t.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},o2=function(e){var t=e.styles,n=e.bounds,a=fr(t.paddingLeft,n.width),r=fr(t.paddingRight,n.width),s=fr(t.paddingTop,n.width),o=fr(t.paddingBottom,n.width);return n.add(a+t.borderLeftWidth,s+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+a+r),-(t.borderTopWidth+t.borderBottomWidth+s+o))},g_e=function(e,t){return e===0?t.bounds:e===2?o2(t):dH(t)},y_e=function(e,t){return e===0?t.bounds:e===2?o2(t):dH(t)},SC=function(e,t,n){var a=g_e(Ym(e.styles.backgroundOrigin,t),e),r=y_e(Ym(e.styles.backgroundClip,t),e),s=__e(Ym(e.styles.backgroundSize,t),n,a),o=s[0],i=s[1],c=Ip(Ym(e.styles.backgroundPosition,t),a.width-o,a.height-i),A=w_e(Ym(e.styles.backgroundRepeat,t),c,s,a,r),d=Math.round(a.left+c[0]),f=Math.round(a.top+c[1]);return[A,d,f,o,i]},$m=function(e){return rr(e)&&e.value===_v.AUTO},xy=function(e){return typeof e=="number"},__e=function(e,t,n){var a=t[0],r=t[1],s=t[2],o=e[0],i=e[1];if(!o)return[0,0];if(os(o)&&i&&os(i))return[fr(o,n.width),fr(i,n.height)];var c=xy(s);if(rr(o)&&(o.value===_v.CONTAIN||o.value===_v.COVER)){if(xy(s)){var A=n.width/n.height;return A<s!=(o.value===_v.COVER)?[n.width,n.width/s]:[n.height*s,n.height]}return[n.width,n.height]}var d=xy(a),f=xy(r),m=d||f;if($m(o)&&(!i||$m(i))){if(d&&f)return[a,r];if(!c&&!m)return[n.width,n.height];if(m&&c){var h=d?a:r*s,p=f?r:a/s;return[h,p]}var y=d?a:n.width,g=f?r:n.height;return[y,g]}if(c){var w=0,b=0;return os(o)?w=fr(o,n.width):os(i)&&(b=fr(i,n.height)),$m(o)?w=b*s:(!i||$m(i))&&(b=w/s),[w,b]}var x=null,T=null;if(os(o)?x=fr(o,n.width):i&&os(i)&&(T=fr(i,n.height)),x!==null&&(!i||$m(i))&&(T=d&&f?x/a*r:n.height),T!==null&&$m(o)&&(x=d&&f?T/r*a:n.width),x!==null&&T!==null)return[x,T];throw new Error("Unable to calculate background-size for element")},Ym=function(e,t){var n=e[t];return typeof n>"u"?e[0]:n},w_e=function(e,t,n,a,r){var s=t[0],o=t[1],i=n[0],c=n[1];switch(e){case 2:return[new cn(Math.round(a.left),Math.round(a.top+o)),new cn(Math.round(a.left+a.width),Math.round(a.top+o)),new cn(Math.round(a.left+a.width),Math.round(c+a.top+o)),new cn(Math.round(a.left),Math.round(c+a.top+o))];case 3:return[new cn(Math.round(a.left+s),Math.round(a.top)),new cn(Math.round(a.left+s+i),Math.round(a.top)),new cn(Math.round(a.left+s+i),Math.round(a.height+a.top)),new cn(Math.round(a.left+s),Math.round(a.height+a.top))];case 1:return[new cn(Math.round(a.left+s),Math.round(a.top+o)),new cn(Math.round(a.left+s+i),Math.round(a.top+o)),new cn(Math.round(a.left+s+i),Math.round(a.top+o+c)),new cn(Math.round(a.left+s),Math.round(a.top+o+c))];default:return[new cn(Math.round(r.left),Math.round(r.top)),new cn(Math.round(r.left+r.width),Math.round(r.top)),new cn(Math.round(r.left+r.width),Math.round(r.height+r.top)),new cn(Math.round(r.left),Math.round(r.height+r.top))]}},b_e="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",sR="Hidden Text",x_e=(function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,n){var a=this._document.createElement("div"),r=this._document.createElement("img"),s=this._document.createElement("span"),o=this._document.body;a.style.visibility="hidden",a.style.fontFamily=t,a.style.fontSize=n,a.style.margin="0",a.style.padding="0",a.style.whiteSpace="nowrap",o.appendChild(a),r.src=b_e,r.width=1,r.height=1,r.style.margin="0",r.style.padding="0",r.style.verticalAlign="baseline",s.style.fontFamily=t,s.style.fontSize=n,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(sR)),a.appendChild(s),a.appendChild(r);var i=r.offsetTop-s.offsetTop+2;a.removeChild(s),a.appendChild(this._document.createTextNode(sR)),a.style.lineHeight="normal",r.style.verticalAlign="super";var c=r.offsetTop-a.offsetTop+2;return o.removeChild(a),{baseline:i,middle:c}},e.prototype.getMetrics=function(t,n){var a=t+" "+n;return typeof this._data[a]>"u"&&(this._data[a]=this.parseMetrics(t,n)),this._data[a]},e})(),AH=(function(){function e(t,n){this.context=t,this.options=n}return e})(),C_e=1e4,S_e=(function(e){iu(t,e);function t(n,a){var r=e.call(this,n,a)||this;return r._activeEffects=[],r.canvas=a.canvas?a.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),a.canvas||(r.canvas.width=Math.floor(a.width*a.scale),r.canvas.height=Math.floor(a.height*a.scale),r.canvas.style.width=a.width+"px",r.canvas.style.height=a.height+"px"),r.fontMetrics=new x_e(document),r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-a.x,-a.y),r.ctx.textBaseline="bottom",r._activeEffects=[],r.context.logger.debug("Canvas renderer initialized ("+a.width+"x"+a.height+") with scale "+a.scale),r}return t.prototype.applyEffects=function(n){for(var a=this;this._activeEffects.length;)this.popEffect();n.forEach(function(r){return a.applyEffect(r)})},t.prototype.applyEffect=function(n){this.ctx.save(),A_e(n)&&(this.ctx.globalAlpha=n.opacity),d_e(n)&&(this.ctx.translate(n.offsetX,n.offsetY),this.ctx.transform(n.matrix[0],n.matrix[1],n.matrix[2],n.matrix[3],n.matrix[4],n.matrix[5]),this.ctx.translate(-n.offsetX,-n.offsetY)),iH(n)&&(this.path(n.path),this.ctx.clip()),this._activeEffects.push(n)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(n){return Do(this,void 0,void 0,function(){var a;return ro(this,function(r){switch(r.label){case 0:return a=n.element.container.styles,a.isVisible()?[4,this.renderStackContent(n)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(n){return Do(this,void 0,void 0,function(){return ro(this,function(a){switch(a.label){case 0:if(_s(n.container.flags,16))debugger;return n.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(n)]:[3,3];case 1:return a.sent(),[4,this.renderNodeContent(n)];case 2:a.sent(),a.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(n,a,r){var s=this;if(a===0)this.ctx.fillText(n.text,n.bounds.left,n.bounds.top+r);else{var o=vT(n.text);o.reduce(function(i,c){return s.ctx.fillText(c,i,n.bounds.top+r),i+s.ctx.measureText(c).width},n.bounds.left)}},t.prototype.createFontStyle=function(n){var a=n.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),r=I_e(n.fontFamily).join(", "),s=Ig(n.fontSize)?""+n.fontSize.number+n.fontSize.unit:n.fontSize.number+"px";return[[n.fontStyle,a,n.fontWeight,s,r].join(" "),r,s]},t.prototype.renderTextNode=function(n,a){return Do(this,void 0,void 0,function(){var r,s,o,i,c,A,d,f,m=this;return ro(this,function(h){return r=this.createFontStyle(a),s=r[0],o=r[1],i=r[2],this.ctx.font=s,this.ctx.direction=a.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(o,i),A=c.baseline,d=c.middle,f=a.paintOrder,n.textBounds.forEach(function(p){f.forEach(function(y){switch(y){case 0:m.ctx.fillStyle=Fs(a.color),m.renderTextWithLetterSpacing(p,a.letterSpacing,A);var g=a.textShadow;g.length&&p.text.trim().length&&(g.slice(0).reverse().forEach(function(w){m.ctx.shadowColor=Fs(w.color),m.ctx.shadowOffsetX=w.offsetX.number*m.options.scale,m.ctx.shadowOffsetY=w.offsetY.number*m.options.scale,m.ctx.shadowBlur=w.blur.number,m.renderTextWithLetterSpacing(p,a.letterSpacing,A)}),m.ctx.shadowColor="",m.ctx.shadowOffsetX=0,m.ctx.shadowOffsetY=0,m.ctx.shadowBlur=0),a.textDecorationLine.length&&(m.ctx.fillStyle=Fs(a.textDecorationColor||a.color),a.textDecorationLine.forEach(function(w){switch(w){case 1:m.ctx.fillRect(p.bounds.left,Math.round(p.bounds.top+A),p.bounds.width,1);break;case 2:m.ctx.fillRect(p.bounds.left,Math.round(p.bounds.top),p.bounds.width,1);break;case 3:m.ctx.fillRect(p.bounds.left,Math.ceil(p.bounds.top+d),p.bounds.width,1);break}}));break;case 1:a.webkitTextStrokeWidth&&p.text.trim().length&&(m.ctx.strokeStyle=Fs(a.webkitTextStrokeColor),m.ctx.lineWidth=a.webkitTextStrokeWidth,m.ctx.lineJoin=window.chrome?"miter":"round",m.ctx.strokeText(p.text,p.bounds.left,p.bounds.top+A)),m.ctx.strokeStyle="",m.ctx.lineWidth=0,m.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(n,a,r){if(r&&n.intrinsicWidth>0&&n.intrinsicHeight>0){var s=o2(n),o=s2(a);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(r,0,0,n.intrinsicWidth,n.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(n){return Do(this,void 0,void 0,function(){var a,r,s,o,i,c,b,b,A,d,f,m,T,h,p,F,y,g,w,b,x,T,F;return ro(this,function(k){switch(k.label){case 0:this.applyEffects(n.getEffects(4)),a=n.container,r=n.curves,s=a.styles,o=0,i=a.textNodes,k.label=1;case 1:return o<i.length?(c=i[o],[4,this.renderTextNode(c,s)]):[3,4];case 2:k.sent(),k.label=3;case 3:return o++,[3,1];case 4:if(!(a instanceof GO))return[3,8];k.label=5;case 5:return k.trys.push([5,7,,8]),[4,this.context.cache.match(a.src)];case 6:return b=k.sent(),this.renderReplacedElement(a,r,b),[3,8];case 7:return k.sent(),this.context.logger.error("Error loading image "+a.src),[3,8];case 8:if(a instanceof zO&&this.renderReplacedElement(a,r,a.canvas),!(a instanceof KO))return[3,12];k.label=9;case 9:return k.trys.push([9,11,,12]),[4,this.context.cache.match(a.svg)];case 10:return b=k.sent(),this.renderReplacedElement(a,r,b),[3,12];case 11:return k.sent(),this.context.logger.error("Error loading svg "+a.svg.substring(0,255)),[3,12];case 12:return a instanceof YO&&a.tree?(A=new t(this.context,{scale:this.options.scale,backgroundColor:a.backgroundColor,x:0,y:0,width:a.width,height:a.height}),[4,A.render(a.tree)]):[3,14];case 13:d=k.sent(),a.width&&a.height&&this.ctx.drawImage(d,0,0,a.width,a.height,a.bounds.left,a.bounds.top,a.bounds.width,a.bounds.height),k.label=14;case 14:if(a instanceof hT&&(f=Math.min(a.bounds.width,a.bounds.height),a.type===e2?a.checked&&(this.ctx.save(),this.path([new cn(a.bounds.left+f*.39363,a.bounds.top+f*.79),new cn(a.bounds.left+f*.16,a.bounds.top+f*.5549),new cn(a.bounds.left+f*.27347,a.bounds.top+f*.44071),new cn(a.bounds.left+f*.39694,a.bounds.top+f*.5649),new cn(a.bounds.left+f*.72983,a.bounds.top+f*.23),new cn(a.bounds.left+f*.84,a.bounds.top+f*.34085),new cn(a.bounds.left+f*.39363,a.bounds.top+f*.79)]),this.ctx.fillStyle=Fs(KU),this.ctx.fill(),this.ctx.restore()):a.type===t2&&a.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(a.bounds.left+f/2,a.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=Fs(KU),this.ctx.fill(),this.ctx.restore())),E_e(a)&&a.value.length){switch(m=this.createFontStyle(s),T=m[0],h=m[1],p=this.fontMetrics.getMetrics(T,h).baseline,this.ctx.font=T,this.ctx.fillStyle=Fs(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=k_e(a.styles.textAlign),F=o2(a),y=0,a.styles.textAlign){case 1:y+=F.width/2;break;case 2:y+=F.width;break}g=F.add(y,0,0,-F.height/2+1),this.ctx.save(),this.path([new cn(F.left,F.top),new cn(F.left+F.width,F.top),new cn(F.left+F.width,F.top+F.height),new cn(F.left,F.top+F.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Zp(a.value,g),s.letterSpacing,p),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!_s(a.styles.display,2048))return[3,20];if(a.styles.listStyleImage===null)return[3,19];if(w=a.styles.listStyleImage,w.type!==0)return[3,18];b=void 0,x=w.url,k.label=15;case 15:return k.trys.push([15,17,,18]),[4,this.context.cache.match(x)];case 16:return b=k.sent(),this.ctx.drawImage(b,a.bounds.left-(b.width+10),a.bounds.top),[3,18];case 17:return k.sent(),this.context.logger.error("Error loading list-style-image "+x),[3,18];case 18:return[3,20];case 19:n.listValue&&a.styles.listStyleType!==-1&&(T=this.createFontStyle(s)[0],this.ctx.font=T,this.ctx.fillStyle=Fs(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",F=new Lc(a.bounds.left,a.bounds.top+fr(a.styles.paddingTop,a.bounds.width),a.bounds.width,TU(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Zp(n.listValue,F),s.letterSpacing,TU(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),k.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(n){return Do(this,void 0,void 0,function(){var a,r,w,s,o,w,i,c,w,A,d,w,f,m,w,h,p,w,y,g,w;return ro(this,function(b){switch(b.label){case 0:if(_s(n.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(n.element)];case 1:b.sent(),a=0,r=n.negativeZIndex,b.label=2;case 2:return a<r.length?(w=r[a],[4,this.renderStack(w)]):[3,5];case 3:b.sent(),b.label=4;case 4:return a++,[3,2];case 5:return[4,this.renderNodeContent(n.element)];case 6:b.sent(),s=0,o=n.nonInlineLevel,b.label=7;case 7:return s<o.length?(w=o[s],[4,this.renderNode(w)]):[3,10];case 8:b.sent(),b.label=9;case 9:return s++,[3,7];case 10:i=0,c=n.nonPositionedFloats,b.label=11;case 11:return i<c.length?(w=c[i],[4,this.renderStack(w)]):[3,14];case 12:b.sent(),b.label=13;case 13:return i++,[3,11];case 14:A=0,d=n.nonPositionedInlineLevel,b.label=15;case 15:return A<d.length?(w=d[A],[4,this.renderStack(w)]):[3,18];case 16:b.sent(),b.label=17;case 17:return A++,[3,15];case 18:f=0,m=n.inlineLevel,b.label=19;case 19:return f<m.length?(w=m[f],[4,this.renderNode(w)]):[3,22];case 20:b.sent(),b.label=21;case 21:return f++,[3,19];case 22:h=0,p=n.zeroOrAutoZIndexOrTransformedOrOpacity,b.label=23;case 23:return h<p.length?(w=p[h],[4,this.renderStack(w)]):[3,26];case 24:b.sent(),b.label=25;case 25:return h++,[3,23];case 26:y=0,g=n.positiveZIndex,b.label=27;case 27:return y<g.length?(w=g[y],[4,this.renderStack(w)]):[3,30];case 28:b.sent(),b.label=29;case 29:return y++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(n){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(n.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(n){this.ctx.beginPath(),this.formatPath(n),this.ctx.closePath()},t.prototype.formatPath=function(n){var a=this;n.forEach(function(r,s){var o=el(r)?r.start:r;s===0?a.ctx.moveTo(o.x,o.y):a.ctx.lineTo(o.x,o.y),el(r)&&a.ctx.bezierCurveTo(r.startControl.x,r.startControl.y,r.endControl.x,r.endControl.y,r.end.x,r.end.y)})},t.prototype.renderRepeat=function(n,a,r,s){this.path(n),this.ctx.fillStyle=a,this.ctx.translate(r,s),this.ctx.fill(),this.ctx.translate(-r,-s)},t.prototype.resizeImage=function(n,a,r){var s;if(n.width===a&&n.height===r)return n;var o=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,i=o.createElement("canvas");i.width=Math.max(1,a),i.height=Math.max(1,r);var c=i.getContext("2d");return c.drawImage(n,0,0,n.width,n.height,0,0,a,r),i},t.prototype.renderBackgroundImage=function(n){return Do(this,void 0,void 0,function(){var a,r,s,o,i,c;return ro(this,function(A){switch(A.label){case 0:a=n.styles.backgroundImage.length-1,r=function(d){var f,m,h,D,j,J,H,ie,E,p,D,j,J,H,ie,y,g,w,b,x,T,F,k,S,E,C,D,P,O,H,ie,Ae,j,J,ue,ne,Y,te,L,N,q,Q;return ro(this,function(ee){switch(ee.label){case 0:if(d.type!==0)return[3,5];f=void 0,m=d.url,ee.label=1;case 1:return ee.trys.push([1,3,,4]),[4,s.context.cache.match(m)];case 2:return f=ee.sent(),[3,4];case 3:return ee.sent(),s.context.logger.error("Error loading background-image "+m),[3,4];case 4:return f&&(h=SC(n,a,[f.width,f.height,f.width/f.height]),D=h[0],j=h[1],J=h[2],H=h[3],ie=h[4],E=s.ctx.createPattern(s.resizeImage(f,H,ie),"repeat"),s.renderRepeat(D,E,j,J)),[3,6];case 5:dge(d)?(p=SC(n,a,[null,null,null]),D=p[0],j=p[1],J=p[2],H=p[3],ie=p[4],y=oge(d.angle,H,ie),g=y[0],w=y[1],b=y[2],x=y[3],T=y[4],F=document.createElement("canvas"),F.width=H,F.height=ie,k=F.getContext("2d"),S=k.createLinearGradient(w,x,b,T),BU(d.stops,g).forEach(function(z){return S.addColorStop(z.stop,Fs(z.color))}),k.fillStyle=S,k.fillRect(0,0,H,ie),H>0&&ie>0&&(E=s.ctx.createPattern(F,"repeat"),s.renderRepeat(D,E,j,J))):Age(d)&&(C=SC(n,a,[null,null,null]),D=C[0],P=C[1],O=C[2],H=C[3],ie=C[4],Ae=d.position.length===0?[AT]:d.position,j=fr(Ae[0],H),J=fr(Ae[Ae.length-1],ie),ue=ige(d,j,J,H,ie),ne=ue[0],Y=ue[1],ne>0&&Y>0&&(te=s.ctx.createRadialGradient(P+j,O+J,0,P+j,O+J,ne),BU(d.stops,ne*2).forEach(function(z){return te.addColorStop(z.stop,Fs(z.color))}),s.path(D),s.ctx.fillStyle=te,ne!==Y?(L=n.bounds.left+.5*n.bounds.width,N=n.bounds.top+.5*n.bounds.height,q=Y/ne,Q=1/q,s.ctx.save(),s.ctx.translate(L,N),s.ctx.transform(1,0,0,q,0,0),s.ctx.translate(-L,-N),s.ctx.fillRect(P,Q*(O-N)+N,H,ie*Q),s.ctx.restore()):s.ctx.fill())),ee.label=6;case 6:return a--,[2]}})},s=this,o=0,i=n.styles.backgroundImage.slice(0).reverse(),A.label=1;case 1:return o<i.length?(c=i[o],[5,r(c)]):[3,4];case 2:A.sent(),A.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(n,a,r){return Do(this,void 0,void 0,function(){return ro(this,function(s){return this.path(rR(r,a)),this.ctx.fillStyle=Fs(n),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(n,a,r,s){return Do(this,void 0,void 0,function(){var o,i;return ro(this,function(c){switch(c.label){case 0:return a<3?[4,this.renderSolidBorder(n,r,s)]:[3,2];case 1:return c.sent(),[2];case 2:return o=v_e(s,r),this.path(o),this.ctx.fillStyle=Fs(n),this.ctx.fill(),i=h_e(s,r),this.path(i),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(n){return Do(this,void 0,void 0,function(){var a,r,s,o,i,c,A,d,f=this;return ro(this,function(m){switch(m.label){case 0:return this.applyEffects(n.getEffects(2)),a=n.container.styles,r=!Ld(a.backgroundColor)||a.backgroundImage.length,s=[{style:a.borderTopStyle,color:a.borderTopColor,width:a.borderTopWidth},{style:a.borderRightStyle,color:a.borderRightColor,width:a.borderRightWidth},{style:a.borderBottomStyle,color:a.borderBottomColor,width:a.borderBottomWidth},{style:a.borderLeftStyle,color:a.borderLeftColor,width:a.borderLeftWidth}],o=B_e(Ym(a.backgroundClip,0),n.curves),r||a.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),Ld(a.backgroundColor)||(this.ctx.fillStyle=Fs(a.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(n.container)]):[3,2];case 1:m.sent(),this.ctx.restore(),a.boxShadow.slice(0).reverse().forEach(function(h){f.ctx.save();var p=r2(n.curves),y=h.inset?0:C_e,g=f_e(p,-y+(h.inset?1:-1)*h.spread.number,(h.inset?1:-1)*h.spread.number,h.spread.number*(h.inset?-2:2),h.spread.number*(h.inset?-2:2));h.inset?(f.path(p),f.ctx.clip(),f.mask(g)):(f.mask(p),f.ctx.clip(),f.path(g)),f.ctx.shadowOffsetX=h.offsetX.number+y,f.ctx.shadowOffsetY=h.offsetY.number,f.ctx.shadowColor=Fs(h.color),f.ctx.shadowBlur=h.blur.number,f.ctx.fillStyle=h.inset?Fs(h.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),m.label=2;case 2:i=0,c=0,A=s,m.label=3;case 3:return c<A.length?(d=A[c],d.style!==0&&!Ld(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,i,n.curves,2)]:[3,11]):[3,13];case 4:return m.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,i,n.curves,3)];case 6:return m.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,i,n.curves)];case 8:return m.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,i,n.curves)];case 10:m.sent(),m.label=11;case 11:i++,m.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(n,a,r,s,o){return Do(this,void 0,void 0,function(){var i,c,A,d,f,m,h,p,y,g,w,b,x,T,F,k,F,k;return ro(this,function(S){return this.ctx.save(),i=p_e(s,r),c=rR(s,r),o===2&&(this.path(c),this.ctx.clip()),el(c[0])?(A=c[0].start.x,d=c[0].start.y):(A=c[0].x,d=c[0].y),el(c[1])?(f=c[1].end.x,m=c[1].end.y):(f=c[1].x,m=c[1].y),r===0||r===2?h=Math.abs(A-f):h=Math.abs(d-m),this.ctx.beginPath(),o===3?this.formatPath(i):this.formatPath(c.slice(0,2)),p=a<3?a*3:a*2,y=a<3?a*2:a,o===3&&(p=a,y=a),g=!0,h<=p*2?g=!1:h<=p*2+y?(w=h/(2*p+y),p*=w,y*=w):(b=Math.floor((h+y)/(p+y)),x=(h-b*p)/(b-1),T=(h-(b+1)*p)/b,y=T<=0||Math.abs(y-x)<Math.abs(y-T)?x:T),g&&(o===3?this.ctx.setLineDash([0,p+y]):this.ctx.setLineDash([p,y])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=a):this.ctx.lineWidth=a*2+1.1,this.ctx.strokeStyle=Fs(n),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(el(c[0])&&(F=c[3],k=c[0],this.ctx.beginPath(),this.formatPath([new cn(F.end.x,F.end.y),new cn(k.start.x,k.start.y)]),this.ctx.stroke()),el(c[1])&&(F=c[1],k=c[2],this.ctx.beginPath(),this.formatPath([new cn(F.end.x,F.end.y),new cn(k.start.x,k.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(n){return Do(this,void 0,void 0,function(){var a;return ro(this,function(r){switch(r.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Fs(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),a=m_e(n),[4,this.renderStack(a)];case 1:return r.sent(),this.applyEffects([]),[2,this.canvas]}})})},t})(AH),E_e=function(e){return e instanceof qO||e instanceof jO?!0:e instanceof hT&&e.type!==t2&&e.type!==e2},B_e=function(e,t){switch(e){case 0:return r2(t);case 2:return l_e(t);case 1:default:return s2(t)}},k_e=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},T_e=["-apple-system","system-ui"],I_e=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return T_e.indexOf(t)===-1}):e},F_e=(function(e){iu(t,e);function t(n,a){var r=e.call(this,n,a)||this;return r.canvas=a.canvas?a.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),r.options=a,r.canvas.width=Math.floor(a.width*a.scale),r.canvas.height=Math.floor(a.height*a.scale),r.canvas.style.width=a.width+"px",r.canvas.style.height=a.height+"px",r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-a.x,-a.y),r.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+a.width+"x"+a.height+" at "+a.x+","+a.y+") with scale "+a.scale),r}return t.prototype.render=function(n){return Do(this,void 0,void 0,function(){var a,r;return ro(this,function(s){switch(s.label){case 0:return a=wE(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,n),[4,P_e(a)];case 1:return r=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Fs(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(r,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t})(AH),P_e=function(e){return new Promise(function(t,n){var a=new Image;a.onload=function(){t(a)},a.onerror=n,a.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},D_e=(function(){function e(t){var n=t.id,a=t.enabled;this.id=n,this.enabled=a,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,ty([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,ty([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,ty([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,ty([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e})(),U_e=(function(){function e(t,n){var a;this.windowBounds=n,this.instanceName="#"+e.instanceCount++,this.logger=new D_e({id:this.instanceName,enabled:t.logging}),this.cache=(a=t.cache)!==null&&a!==void 0?a:new e_e(this,t)}return e.instanceCount=1,e})(),R_e=function(e,t){return t===void 0&&(t={}),N_e(e,t)};typeof window<"u"&&oH.setContext(window);var N_e=function(e,t){return Do(void 0,void 0,void 0,function(){var n,a,r,s,o,i,c,A,d,f,m,h,p,y,g,w,b,x,T,F,S,k,S,E,C,D,P,O,H,ie,Ae,j,J,ue,ne,Y,te,L,N,q;return ro(this,function(Q){switch(Q.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(n=e.ownerDocument,!n)throw new Error("Element is not attached to a Document");if(a=n.defaultView,!a)throw new Error("Document is not attached to a Window");return r={allowTaint:(E=t.allowTaint)!==null&&E!==void 0?E:!1,imageTimeout:(C=t.imageTimeout)!==null&&C!==void 0?C:15e3,proxy:t.proxy,useCORS:(D=t.useCORS)!==null&&D!==void 0?D:!1},s=oE({logging:(P=t.logging)!==null&&P!==void 0?P:!0,cache:t.cache},r),o={windowWidth:(O=t.windowWidth)!==null&&O!==void 0?O:a.innerWidth,windowHeight:(H=t.windowHeight)!==null&&H!==void 0?H:a.innerHeight,scrollX:(ie=t.scrollX)!==null&&ie!==void 0?ie:a.pageXOffset,scrollY:(Ae=t.scrollY)!==null&&Ae!==void 0?Ae:a.pageYOffset},i=new Lc(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),c=new U_e(s,i),A=(j=t.foreignObjectRendering)!==null&&j!==void 0?j:!1,d={allowTaint:(J=t.allowTaint)!==null&&J!==void 0?J:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:A,copyStyles:A},c.logger.debug("Starting document clone with size "+i.width+"x"+i.height+" scrolled to "+-i.left+","+-i.top),f=new tR(c,e,d),m=f.clonedReferenceElement,m?[4,f.toIFrame(n,i)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return h=Q.sent(),p=pT(m)||Vye(m)?fpe(m.ownerDocument):Ew(c,m),y=p.width,g=p.height,w=p.left,b=p.top,x=V_e(c,m,t.backgroundColor),T={canvas:t.canvas,backgroundColor:x,scale:(ne=(ue=t.scale)!==null&&ue!==void 0?ue:a.devicePixelRatio)!==null&&ne!==void 0?ne:1,x:((Y=t.x)!==null&&Y!==void 0?Y:0)+w,y:((te=t.y)!==null&&te!==void 0?te:0)+b,width:(L=t.width)!==null&&L!==void 0?L:Math.ceil(y),height:(N=t.height)!==null&&N!==void 0?N:Math.ceil(g)},A?(c.logger.debug("Document cloned, using foreign object rendering"),S=new F_e(c,T),[4,S.render(m)]):[3,3];case 2:return F=Q.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+w+","+b+" with size "+y+"x"+g+" using computed rendering"),c.logger.debug("Starting DOM parsing"),k=JO(c,m),x===k.styles.backgroundColor&&(k.styles.backgroundColor=Bc.TRANSPARENT),c.logger.debug("Starting renderer for element at "+T.x+","+T.y+" with size "+T.width+"x"+T.height),S=new S_e(c,T),[4,S.render(k)];case 4:F=Q.sent(),Q.label=5;case 5:return(!((q=t.removeContainer)!==null&&q!==void 0)||q)&&(tR.destroy(h)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,F]}})})},V_e=function(e,t,n){var a=t.ownerDocument,r=a.documentElement?Xp(e,getComputedStyle(a.documentElement).backgroundColor):Bc.TRANSPARENT,s=a.body?Xp(e,getComputedStyle(a.body).backgroundColor):Bc.TRANSPARENT,o=typeof n=="string"?Xp(e,n):n===null?Bc.TRANSPARENT:4294967295;return t===a.documentElement?Ld(r)?Ld(s)?o:s:r:o};class L_e{constructor(){this.languagePatterns={gujarati:/[\u0A80-\u0AFF]/,devanagari:/[\u0900-\u097F]/,kannada:/[\u0C80-\u0CFF]/,malayalam:/[\u0D00-\u0D7F]/,telugu:/[\u0C00-\u0C7F]/,tamil:/[\u0B80-\u0BFF]/,english:/^[A-Za-z0-9\s.,;:!?\-'"()]+$/},this.languageFonts={gujarati:'"Noto Sans Gujarati", "Shruti", "Gujarati Sangam MN", sans-serif',hindi:'"Noto Sans Devanagari", "Mangal", "Devanagari Sangam MN", sans-serif',marathi:'"Noto Sans Devanagari", "Mangal", "Devanagari Sangam MN", sans-serif',devanagari:'"Noto Sans Devanagari", "Mangal", "Devanagari Sangam MN", sans-serif',kannada:'"Noto Sans Kannada", "Tunga", "Kannada Sangam MN", sans-serif',malayalam:'"Noto Sans Malayalam", "Kartika", "Malayalam Sangam MN", sans-serif',telugu:'"Noto Sans Telugu", "Gautami", "Telugu Sangam MN", sans-serif',tamil:'"Noto Sans Tamil", "Latha", "Tamil Sangam MN", sans-serif'}}detectLanguage(t){return!t||typeof t!="string"?null:this.languagePatterns.gujarati.test(t)?"gujarati":this.languagePatterns.kannada.test(t)?"kannada":this.languagePatterns.malayalam.test(t)?"malayalam":this.languagePatterns.telugu.test(t)?"telugu":this.languagePatterns.tamil.test(t)?"tamil":this.languagePatterns.devanagari.test(t)?"hindi":(this.languagePatterns.english.test(t),"english")}getFixedContainerDimensions(t){switch(t?.toLowerCase()){case"letter":case"legal":return{width:580,minHeight:45,fontSize:17};case"a4":default:return{width:520,minHeight:40,fontSize:16}}}getMaxWidthForPageSize(t){switch(t?.toLowerCase()){case"letter":return 530;case"legal":return 530;case"a4":default:return 480}}createHtmlTemplate(t,n,a={},r="A4"){const s=this.getFixedContainerDimensions(r),o=a.fontSize||s.fontSize,i=a.color||"#2d3748",c=this.languageFonts[n]||this.languageFonts.devanagari,A=a.lineHeight||1.4,d=a.textAlign||"left",f=a.padding||3;return`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="UTF-8">
        <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Gujarati:wght@400;500&family=Noto+Sans+Devanagari:wght@400;500&family=Noto+Sans+Kannada:wght@400;500&family=Noto+Sans+Malayalam:wght@400;500&family=Noto+Sans+Telugu:wght@400;500&family=Noto+Sans+Tamil:wght@400;500&display=swap" rel="stylesheet">
        <style>
          * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
          }
          
          body {
            font-family: ${c};
            font-size: ${o}px;
            color: ${i};
            line-height: ${A};
            text-align: ${d};
            background: white;
            -webkit-font-smoothing: antialiased;
            text-rendering: optimizeLegibility;
            padding: ${f}px;
            width: ${s.width}px; /* Fixed width for consistency */
            min-height: ${s.minHeight}px; /* Minimum height for consistency */
            /* Remove fixed height and overflow hidden to allow dynamic content */
            display: flex;
            align-items: flex-start; /* Align content to top instead of center */
          }
          
          .text-content {
            word-wrap: break-word;
            overflow-wrap: break-word;
            width: 100%;
            /* Remove text-overflow ellipsis to show all content */
          }
        </style>
      </head>
      <body>
        <div class="text-content">${t.replace(/\n/g,"<br>")}</div>
      </body>
      </html>
    `}async renderTextAsImage(t,n,a={},r="A4"){return new Promise((s,o)=>{try{const i=document.createElement("iframe");i.style.cssText=`
          position: absolute;
          top: -10000px;
          left: -10000px;
          width: 800px;
          height: 600px;
          border: none;
          visibility: hidden;
        `,document.body.appendChild(i);const c=i.contentDocument||i.contentWindow.document,A=this.createHtmlTemplate(t,n,a,r);c.open(),c.write(A),c.close(),this.waitForFontsToLoad(c).then(()=>{try{const d=this.getFixedContainerDimensions(r),f=c.body,m=d.width,p=Math.max(f.offsetHeight,d.minHeight),y=a.scale||2;R_e(c.body,{width:m,height:p,scale:y,useCORS:!0,allowTaint:!1,backgroundColor:"white"}).then(g=>{const w=g.toDataURL("image/png");document.body.removeChild(i),s(w)}).catch(g=>{console.error("Canvas rendering failed:",g),document.body.removeChild(i),s(null)})}catch(d){console.error("Text rendering failed:",d),document.body.removeChild(i),s(null)}})}catch(i){console.error("Error in renderTextAsImage:",i),o(i)}})}waitForFontsToLoad(t){return new Promise(n=>{t.fonts&&t.fonts.ready?t.fonts.ready.then(()=>{setTimeout(n,100)}):setTimeout(n,500)})}async processTextForPdf(t,n={},a="A4",r=!1){if(!t)return{content:{text:"",style:n},success:!0,isRegional:!1};const s=this.detectLanguage(t);if(r||!["gujarati","hindi","marathi","kannada","malayalam","telugu","tamil"].includes(s))return{content:{text:t,style:n},success:!0,isRegional:!1};try{const o=await this.renderTextAsImage(t,s,{fontSize:n.fontSize||8,color:n.color||"#2d3748",lineHeight:n.lineHeight||1.4},a);return o?{content:{image:o,margin:n.margin||[0,0,0,0]},success:!0,isRegional:!0}:{content:{text:t,style:n},success:!1,isRegional:!1,error:"Regional text rendering failed"}}catch(o){return console.error("Regional text processing failed:",o),{content:{text:t,style:n},success:!1,isRegional:!1,error:o.message}}}}const mp=async e=>{try{const n=await(await fetch(e)).blob();return new Promise((a,r)=>{const s=new FileReader;s.readAsDataURL(n),s.onload=()=>a(s.result),s.onerror=o=>r(o)})}catch(t){throw console.error("Error converting URL to base64:",t),t}},gh=async e=>{try{return{data:(await dt.get(`/print/${e}`)).data.data.config,error:null}}catch(t){return t?.response?.status===404?(console.log("No print configurations found for doctor ID:",e,"- this is normal for new users"),{data:null,error:null,isNewUser:!0}):(console.error("Error fetching print details:",t),{data:null,error:t,isNewUser:!1})}},Uo=typeof navigator<"u"&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),fH=async(e,t)=>{try{const n=new FormData;return n.append("file",t),{data:(await dt.post(`/print/${e}/header-image`,n,{transformRequest:[(r,s)=>(delete s["Content-Type"],r)]})).data.data,error:null}}catch(n){return console.error("Error uploading header image:",n),{data:null,error:n}}},Sd=async(e,t=null)=>{if(t){const{createFileURL:r}=await Jr(async()=>{const{createFileURL:o}=await Promise.resolve().then(()=>fR);return{createFileURL:o}},void 0,import.meta.url),s=`doctorHeaderImages/${t}`;return await r(s,"/api/print/header-image-file")}const{getCurrentServerURL:n}=await Jr(async()=>{const{getCurrentServerURL:r}=await Promise.resolve().then(()=>fR);return{getCurrentServerURL:r}},void 0,import.meta.url);return`${await n()}/api/print/${e}/header-image`},mH=async e=>{try{return{data:(await dt.delete(`/print/${e}/header-image`)).data,error:null}}catch(t){return console.error("Error deleting header image:",t),{data:null,error:t}}},M_e=Object.freeze(Object.defineProperty({__proto__:null,deletePrescriptionHeaderImage:mH,fetchPrintConfigs:gh,getPrescriptionHeaderImageUrl:Sd,isMobile:Uo,uploadPrescriptionHeaderImage:fH},Symbol.toStringTag,{value:"Module"}));let hs;const RA=async()=>{if(!hs)try{const[e,t]=await Promise.all([Jr(()=>import("./pdfmake-CUMUgokm.js").then(a=>a.p),[],import.meta.url),Jr(()=>import("./vfs_fonts-DVRpzkoP.js").then(a=>a.v),[],import.meta.url)]);hs=e.default||e;const n=t.default||t;n.pdfMake&&n.pdfMake.vfs?hs.vfs=n.pdfMake.vfs:n.vfs?hs.vfs=n.vfs:(typeof n=="object"&&n["Roboto-Regular.ttf"],hs.vfs=n),console.log("PDFMake initialized successfully with VFS fonts")}catch(e){throw console.error("Failed to initialize PDFMake:",e),new Error("PDFMake initialization failed")}};class O_e{constructor(){this.regionalTextRenderer=new L_e,this.styles={clinicHeader:{fontSize:24,color:"#1a472a",alignment:"center",margin:[0,0,0,5]},doctorName:{fontSize:20,color:"#2d5aa0",margin:[0,0,0,3]},doctorCredentials:{fontSize:14,color:"#4a5568",margin:[0,0,0,2]},registrationInfo:{fontSize:12,color:"#718096",margin:[0,0,0,8]},prescriptionHeader:{fontSize:28,color:"#1a202c",alignment:"center",margin:[0,0,0,25]},patientSectionTitle:{fontSize:12,color:"#2d5aa0",margin:[12,3,12,3],padding:[8,4,8,4],alignment:"left"},patientLabel:{fontSize:11,color:"#4a5568"},patientValue:{fontSize:12,color:"#1a202c",margin:[0,2,0,0]},patientInlineInfo:{fontSize:11,color:"#4a5568",lineHeight:1.3,margin:[0,0,0,0]},medicalSectionTitle:{fontSize:12,color:"#2d5aa0",margin:[12,3,12,3],padding:[8,4,8,4],alignment:"left"},vitalLabel:{fontSize:12,color:"#2b6cb0"},vitalValue:{fontSize:12,color:"#1a202c",margin:[0,1,0,2]},diagnosisText:{fontSize:12,color:"#2d3748",lineHeight:1.2,margin:[0,0,0,0]},clinicalNotesText:{fontSize:12,color:"#2d3748",lineHeight:1.2,margin:[0,0,0,0]},prescriptionTableHeader:{fontSize:11,color:"#2d3748",margin:[8,8,8,8]},medicineNumber:{fontSize:18,color:"#2b6cb0",margin:[5,5,5,5]},cleanMedicineName:{fontSize:12,color:"#1a202c",margin:[0,0,0,4]},saltComposition:{fontSize:11,color:"#1a202c",margin:[0,0,0,4]},cleanMedicineDetails:{fontSize:12,color:"#4a5568",margin:[0,0,0,0]},cleanFieldLabel:{fontSize:12,color:"#2b6cb0",margin:[0,0,0,2]},cleanFieldValue:{fontSize:11,color:"#2d3748",margin:[0,0,0,0]},dosageInstructionsTitle:{fontSize:12,color:"#4a5568",margin:[0,3,0,5]},cleanDosageItem:{fontSize:12,color:"#2d3748",margin:[0,3,0,3],lineHeight:1.3},medicineName:{fontSize:14,color:"#1a202c",margin:[0,2,0,2]},medicineStrength:{fontSize:12,color:"#2b6cb0",margin:[0,1,0,2]},medicineComposition:{fontSize:10,color:"#718096",margin:[0,0,0,5]},dosageInstruction:{fontSize:11,color:"#2d3748",margin:[3,2,3,2],border:[!0,!0,!0,!0],borderColor:["#e2e8f0","#e2e8f0","#e2e8f0","#e2e8f0"],padding:[4,2,4,2]},durationText:{fontSize:9,color:"#c53030",alignment:"center",margin:[3,4,3,4],fillColor:"#fed7d7",border:[!0,!0,!0,!0],borderColor:["#fc8181","#fc8181","#fc8181","#fc8181"],borderWidth:[1,1,1,1]},instructionsText:{fontSize:11,color:"#4a5568",margin:[5,5,5,5]},medicalAdviceTitle:{fontSize:12,color:"#2d5aa0",margin:[12,3,12,3],padding:[8,4,8,4],alignment:"left"},adviceText:{fontSize:12,color:"#2d3748",lineHeight:1.2,margin:[0,0,0,0]},followupTitle:{fontSize:12,color:"#4a5568",margin:[0,3,0,3]},followupText:{fontSize:12,color:"#4a5568",margin:[0,2,0,0]},translationTitle:{fontSize:12,color:"#4a5568",margin:[15,5,15,3]},translatedText:{fontSize:12,color:"#4a5568",lineHeight:1.3,margin:[15,0,15,8]},medicalFooter:{fontSize:9,color:"#718096",alignment:"center",margin:[0,10,0,0]},disclaimer:{fontSize:9,color:"#6b7280",alignment:"center",lineHeight:1.3,margin:[0,3,0,3]},receiptTitle:{fontSize:20,color:"#2d5aa0",alignment:"center",margin:[0,5,0,10]},sectionHeader:{fontSize:12,color:"#2d5aa0",margin:[0,5,0,5],bold:!0},patientInfo:{fontSize:11,color:"#1a202c",margin:[5,2,5,2]},receiptInfo:{fontSize:11,color:"#1a202c",margin:[5,2,5,2]},tableHeader:{fontSize:11,color:"#2d3748",bold:!0,margin:[5,5,5,5]},tableCell:{fontSize:10,color:"#1a202c",margin:[5,3,5,3]},summaryLabel:{fontSize:11,color:"#4a5568",margin:[5,2,5,2]},summaryValue:{fontSize:11,color:"#1a202c",margin:[5,2,5,2]},summaryLabelBold:{fontSize:12,color:"#2d3748",bold:!0,margin:[5,3,5,3]},summaryValueBold:{fontSize:12,color:"#1a202c",bold:!0,margin:[5,3,5,3]},summaryValuePaid:{fontSize:11,color:"#1a202c",margin:[5,2,5,2]},summaryValueDue:{fontSize:11,color:"#1a202c",margin:[5,2,5,2]},noDataText:{fontSize:11,color:"#6b7280",alignment:"center",margin:[0,10,0,10]}}}async processRegionalText(t,n={},a="A4",r=!1){return(await this.regionalTextRenderer.processTextForPdf(t,n,a,r)).content}getRegionalImageWidth(t){switch(t?.toLowerCase()){case"letter":case"legal":return 460;case"a4":default:return 450}}async applyLanguageFont(t,n={},a="A4",r=!1){const s=this.regionalTextRenderer.detectLanguage(t);if(["gujarati","hindi","marathi","kannada","malayalam","telugu","tamil"].includes(s)&&!r){const o=this.regionalTextRenderer.getFixedContainerDimensions(a),i=this.getRegionalImageWidth(a);return{image:await this.regionalTextRenderer.renderTextAsImage(t,s,{fontSize:o.fontSize,color:n.color||"#2d3748",fontFamily:s==="gujarati"?"Noto Sans Gujarati":s==="kannada"?"Noto Sans Kannada":s==="malayalam"?"Noto Sans Malayalam":s==="telugu"?"Noto Sans Telugu":s==="tamil"?"Noto Sans Tamil":"Noto Sans Devanagari",padding:5},a),width:i,margin:[0,2,15,2],alignment:n.alignment||"left"}}return{text:t,...n}}async generateConsultationPDF(t,n){hs||await RA();let a=null;if(t.printConfigurations?.headerImagePath&&t.printConfigurations?.doctorId)try{const o=await Sd(t.printConfigurations.doctorId,t.printConfigurations.headerImagePath);a=await mp(o)}catch(o){console.error("Failed to load header image for PDF:",o)}let r=null;t.printConfigurations?.headerSize!==void 0&&t.printConfigurations?.headerSize!==null?r=Math.round(t.printConfigurations.headerSize*72):t.headerSize!==void 0&&(r=t.headerSize);const s={pageSize:this.getPageSize(t.printConfigurations?.pageSize),pageMargins:this.getPageMargins(t.printConfigurations?.pageSize,r),defaultStyle:{fontSize:10,columnGap:20},header:()=>t.printConfigurations?.useHeader?this.createProfessionalMedicalHeader(t.printConfigurations,t.printConfigurations?.pageSize,a,r):null,footer:(o,i)=>t.printConfigurations?.useFooter?this.createMedicalFooter(o,i,t.printConfigurations):null,content:[this.createProfessionalPatientCard(n,t.consultation),...this.hasVitals(t.vitals)?[this.createProfessionalVitalsCard(t.vitals)]:[],await this.createClinicalFindingsSection(t.consultation,t.printConfigurations?.pageSize),await this.createProfessionalPrescriptionSection(t.medicines||[],t.translationLanguage,t.printConfigurations?.pageSize,t.translationFailed),await this.createMedicalAdviceSection(t.consultation,t.translatedPatientNotes,t.printConfigurations?.pageSize,t.translationFailed)],styles:this.styles,pageBreakBefore:function(o,i,c){return o.style==="prescriptionTableHeader"&&o.pageNumbers.length>1?!0:(i&&i.length===0&&c&&c.length<2,!1)},info:{title:"Medical Prescription",author:"Professional Medical System",subject:"Patient Prescription and Medical Advice"},compress:!1};return hs.createPdf(s)}createProfessionalMedicalHeader(t,n="A4",a=null,r=null){const s=this.getHeaderMargins(n,r),i=this.getPageWidth(n)-(s[0]+s[2]);return a?{table:{headerRows:0,widths:["*"],body:[[{stack:[{image:a,width:i,height:80,alignment:"center",margin:[0,0,0,0]},{canvas:[{type:"line",x1:0,y1:4,x2:500,y2:4,lineWidth:2,lineColor:"#2b6cb0"},{type:"line",x1:0,y1:8,x2:500,y2:8,lineWidth:1,lineColor:"#4a5568"}],margin:[0,10,0,0],alignment:"center"}],margin:[0,0,0,0]}]]},layout:"noBorders",margin:[s[0],s[1],s[2],s[3]]}:{table:{headerRows:0,widths:["*"],body:[[{stack:[{columns:[{width:"40%",stack:[{text:`Dr. ${t.doctorName}`,style:"doctorName"},{text:t.doctorDegrees||"MBBS",style:"doctorCredentials"},{text:`Reg. No: ${t.doctorRegistrationNumber}`,style:"registrationInfo"}]},{width:"60%",stack:[...t.clinicAddress?[{stack:t.clinicAddress.split(/\r?\n|\r/).map(c=>({text:c.trim(),fontSize:10,color:"#4a5568",alignment:"right",margin:[0,1,0,1]})),margin:[0,5,0,2]}]:[],...t.contactNumber?[{text:` ${t.contactNumber}`,fontSize:10,color:"#4a5568",alignment:"right"}]:[],...t.email?[{text:`Email: ${t.email}`,fontSize:10,color:"#4a5568",alignment:"right"}]:[]]}]},{canvas:[{type:"line",x1:0,y1:4,x2:500,y2:4,lineWidth:2,lineColor:"#2b6cb0"},{type:"line",x1:0,y1:8,x2:500,y2:8,lineWidth:1,lineColor:"#4a5568"}],margin:[0,10,0,0],alignment:"center"}],margin:s}]]},layout:"noBorders",margin:[0,0,0,20]}}createProfessionalPatientCard(t,n){const a=[`Patient Name - ${t.name||t.patientName||"N/A"}`,`${t.age||"N/A"} yrs/${t.gender||"N/A"}`,`ID - ${t.id||t.patientId||"N/A"}`,`Contact - ${t.contactNumber||t.phoneNumber||"N/A"}`].join(" | ");return{table:{headerRows:0,widths:["*","auto"],body:[[{text:a,style:"patientInlineInfo",margin:[6,3,15,3]},{text:(s=>{const o=new Date(s),c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][o.getMonth()],A=o.getDate(),d=o.getFullYear().toString().slice(-2);return`${A} ${c}' ${d}`})(n.consultationDate||n.createdAt),fontSize:11,color:"#4a5568",lineHeight:1.3,alignment:"right",margin:[15,3,12,3]}]]},layout:"noBorders",margin:[0,0,0,3],alignment:"left"}}createProfessionalVitalsCard(t){const n=[];if(t.pulse&&n.push(`Pulse Rate: ${t.pulse}bpm`),t.systolicBP&&t.diastolicBP&&n.push(`Blood Pressure: ${t.systolicBP}/${t.diastolicBP}mmHg`),t.temperature&&n.push(`Temperature: ${t.temperature}C`),t.respiratoryRate&&n.push(`Respiratory Rate: ${t.respiratoryRate}/min`),t.weight&&n.push(`Weight: ${t.weight}kg`),t.height){const a=t.weight&&t.height?(t.weight/(t.height/100*(t.height/100))).toFixed(1):null;n.push(`Height: ${t.height}cm${a?` (BMI: ${a})`:""}`)}return{table:{headerRows:0,widths:["*"],body:[[{text:[{text:"VITAL SIGNS: ",style:"patientSectionTitle"},{text:n.join(", "),style:"vitalValue"}],margin:[6,3,15,5]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,0,0,5],alignment:"left"}}async createClinicalFindingsSection(t,n="A4"){const a=[];if(t.diagnosis){const r=await this.applyLanguageFont(t.diagnosis,{style:"diagnosisText",margin:[0,0,0,0]},n,!1);a.push([{text:[{text:"DIAGNOSIS: ",style:"medicalAdviceTitle"},r.text?r:{text:t.diagnosis,style:"diagnosisText"}],margin:[6,3,15,1]}])}if(t.clinicalNotes?.trim()){const r=await this.applyLanguageFont(t.clinicalNotes,{style:"clinicalNotesText",margin:[0,0,0,0]},n,!1);a.push([{text:[{text:"CLINICAL NOTES: ",style:"medicalAdviceTitle"},r.text?r:{text:t.clinicalNotes,style:"clinicalNotesText"}],margin:[6,0,15,3]}])}return a.length===0?[]:[{table:{headerRows:0,widths:["*"],body:a},layout:{hLineWidth:(r,s)=>r===0||r===s.table.body.length?1:0,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,0,0,5],alignment:"left"}]}async createProfessionalPrescriptionSection(t,n="none",a="A4",r=!1){const s=t.filter(i=>i.isSelected!==!1);if(s.length===0)return{text:""};const o=[];for(const i of s){const A=this.createSimpleDosageText(i)||"As directed",d=i.duration||"As directed",f=i.instructions||"";let m=`Schedule: ${A}   Duration: ${d}`;f.trim()&&(m+=`   ${f}`);let h=i.productName||"";if(i.productForm||i.quantityUnits!==null&&i.quantityUnits!==void 0){const y=[];i.productForm&&y.push(i.productForm),i.quantityUnits!==null&&i.quantityUnits!==void 0&&y.push(`Qty:${i.quantityUnits}`),h+=` (${y.join(",")})`}const p=i.saltComposition?` - ${i.saltComposition.toUpperCase()}`:"";if(o.push({text:[{text:h,style:"cleanMedicineName",bold:!0},{text:p,fontSize:10,color:"#1a202c"}],margin:[0,0,0,0]}),o.push({text:m,style:"cleanFieldValue",margin:[0,0,0,n&&n!=="none"?0:4]}),n&&n!=="none")try{const y=[];if(A&&A!=="As directed"&&y.push(A),d&&d!=="As directed"&&y.push(d),f.trim()&&y.push(f),y.length>0){const g=y.map(T=>this.translateMedicineText(T,n)),w=await Promise.all(g);let b="",x=0;if(A&&A!=="As directed"){const T=w[x];T&&T.trim()&&(b+=T),x++}if(d&&d!=="As directed"){const T=w[x];T&&T.trim()&&(b&&(b+="   "),b+=T),x++}if(f.trim()){const T=w[x];T&&T.trim()&&(b&&(b+="   "),b+=T)}if(b&&b.trim()&&!r){const T=await this.applyLanguageFont(b,{style:"translatedText"},a,!1);o.push({...T,margin:[-6,1,0,2]})}}}catch(y){console.error("Error translating medicine text:",y)}}return[{table:{headerRows:0,widths:["*"],body:[[{text:"PRESCRIPTION (Rx)",style:"medicalAdviceTitle",margin:[6,3,15,1]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,0,0,2],alignment:"left"},{table:{headerRows:0,widths:["*"],body:[[{stack:o,margin:[6,3,6,1]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,0,0,5],alignment:"left"}]}createSimpleDosageText(t){return t?.dosage_schedule||"As directed"}async translateMedicineText(t,n){if(!t||!n||n==="none")return"";try{const{translationLanguages:a}=await Jr(async()=>{const{translationLanguages:c}=await Promise.resolve().then(()=>kE);return{translationLanguages:c}},void 0,import.meta.url),s=a.find(c=>c.value===n)?.label||n,{translateText:o}=await Jr(async()=>{const{translateText:c}=await import("./translationUtils-ZYbMZ81A.js");return{translateText:c}},[],import.meta.url);return await o(t,s)||t}catch(a){return console.error("Translation failed for medicine text:",a),t}}async createMedicalAdviceSection(t,n,a="A4",r=!1){const s=[];if(t.investigations?.trim()){const o=await this.applyLanguageFont(t.investigations,{style:"adviceText",margin:[0,0,0,0]},a,!1);s.push({stack:[{table:{headerRows:0,widths:["*"],body:[[{text:[{text:"INVESTIGATIONS ADVISED: ",style:"medicalAdviceTitle"},o.text?o:{text:t.investigations,style:"adviceText"}],margin:[6,3,15,1]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"}}],margin:[0,0,0,5],alignment:"left"})}if(t.followupDate){const o=i=>{const c=new Date(i),d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][c.getMonth()],f=c.getDate(),m=c.getFullYear().toString().slice(-2);return`${f} ${d}' ${m}`};s.push({stack:[{table:{headerRows:0,widths:["*"],body:[[{text:[{text:"FOLLOW-UP APPOINTMENT: ",style:"medicalAdviceTitle"},{text:o(t.followupDate),style:"followupText"}],margin:[6,3,15,5]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"}}],margin:[0,0,0,8],alignment:"left"})}if(t.patientNotes?.trim()){const o=await this.applyLanguageFont(t.patientNotes,{style:"adviceText",margin:[0,0,0,0]},a,!1),c=[{text:[{text:"PATIENT ADVICE: ",style:"medicalAdviceTitle"},o.text?o:{text:t.patientNotes,style:"adviceText"}],margin:[0,0,0,0]}];if(n&&!r){const A=await this.applyLanguageFont(n,{style:"translatedText"},a,!1);c.push({...A,margin:[-6,2,0,0]})}s.push({stack:[{table:{headerRows:0,widths:["*"],body:[[{stack:c,margin:[6,3,15,1]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"}}],margin:[0,0,0,5],alignment:"left"})}return s}createMedicalDisclaimer(){return{stack:[{table:{headerRows:0,widths:["*"],body:[[{stack:[{text:" IMPORTANT MEDICAL NOTICE",style:"medicalAdviceTitle",alignment:"center"},{text:[` Take medications exactly as prescribed
`,` Do not stop medication without consulting your doctor
`,` Contact your doctor immediately if you experience any adverse reactions
`,` Keep all medications out of reach of children
`," This prescription is valid for 30 days from date of issue"].join(""),style:"disclaimer",margin:[15,5,15,10]}]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#fed7d7",vLineColor:()=>"#fed7d7",fillColor:()=>"#fffbf5"}}],unbreakable:!0,margin:[0,15,0,0],alignment:"left",pageBreakBefore:function(t,n,a,r){return 842-(r?r.length*30:0)<120&&n.length===0}}}createMedicalFooter(t,n,a){return{columns:[{width:"*",text:`Dr. ${a?.doctorName||"Doctor"} - Reg. No: ${a?.doctorRegistrationNumber||"REG001"} | This is a computer-generated prescription.`,style:"medicalFooter"},{width:"auto",text:`Page ${t} of ${n}`,style:"medicalFooter"}],margin:[40,5,40,5],alignment:"left"}}createReceiptFooter(t,n,a){return{columns:[{width:"*",text:`Dr. ${a?.doctorName||"Doctor"} - Reg. No: ${a?.doctorRegistrationNumber||"REG001"} | This is a computer-generated receipt.`,style:"medicalFooter"},{width:"auto",text:`Page ${t} of ${n}`,style:"medicalFooter"}],margin:[40,5,40,5],alignment:"left"}}createTreatmentPlanFooter(t,n,a){return{columns:[{width:"*",text:`Dr. ${a?.doctorName||"Doctor"} - Reg. No: ${a?.doctorRegistrationNumber||"REG001"} | Charges are indicative`,style:"medicalFooter"},{width:"auto",text:`Page ${t} of ${n}`,style:"medicalFooter"}],margin:[40,5,40,5],alignment:"left"}}createPatientField(t,n){return{columns:[{width:"35%",text:t,style:"patientLabel"},{width:"*",text:n,style:"patientValue"}],margin:[0,0,0,1]}}createVitalField(t,n){return{text:`${t}: ${n}`,style:"vitalValue",margin:[8,3,8,3]}}createCleanDosageSchedule(t){return t?.dosage_schedule?[{text:t.dosage_schedule,style:"cleanDosageItem",alignment:"left",color:"#2d3748"}]:[{text:"Take as directed by your physician",style:"cleanDosageItem",alignment:"center",italics:!0,color:"#4a5568"}]}createDosageSchedule(t){return t?.dosage_schedule?[{text:t.dosage_schedule,style:"dosageInstruction",alignment:"left"}]:[{text:"Take as directed by physician",style:"dosageInstruction"}]}getBPStatus(t,n){return t>140||n>90?" High":t<90||n<60?" Low":" Normal"}async generateTreatmentPlanPDF(t,n){hs||await RA();let a=null;if(t.printConfigurations?.headerImagePath&&t.printConfigurations?.doctorId)try{const o=await Sd(t.printConfigurations.doctorId,t.printConfigurations.headerImagePath);a=await mp(o)}catch(o){console.error("Failed to load header image for PDF:",o)}let r=null;t.printConfigurations?.headerSize!==void 0&&t.printConfigurations?.headerSize!==null?r=Math.round(t.printConfigurations.headerSize*72):t.headerSize!==void 0&&(r=t.headerSize);const s={pageSize:this.getPageSize(t.printConfigurations?.pageSize),pageMargins:this.getPageMargins(t.printConfigurations?.pageSize,r),defaultStyle:{fontSize:10,columnGap:20},header:()=>t.printConfigurations?.useHeader?this.createProfessionalMedicalHeader(t.printConfigurations,t.printConfigurations?.pageSize,a,r):null,footer:(o,i)=>t.printConfigurations?.useFooter?this.createTreatmentPlanFooter(o,i,t.printConfigurations):null,content:[this.createProfessionalPatientCard(n,{createdAt:new Date}),this.createTreatmentPlanDetailsSection(t.treatmentPlan),...this.getCompletedProcedures(t.procedureTreatments).length>0?[this.createProceduresSection("COMPLETED PROCEDURES",this.getCompletedProcedures(t.procedureTreatments))]:[],...this.createPendingProceduresSections(t.procedureTreatments),...t.paymentReceipts&&t.paymentReceipts.length>0?[this.createPaymentDetailsSection(t.paymentReceipts)]:[],...this.hasMultipleOptions(t.procedureTreatments)?[]:[this.createCostSummarySection(t.procedureTreatments,t.paymentReceipts)],this.createPaymentSummarySection(t.procedureTreatments,t.paymentReceipts)],styles:this.styles,pageBreakBefore:function(o,i,c){return i&&i.length===0&&c&&c.length<2,!1},info:{title:"Treatment Plan",author:"Professional Medical System",subject:"Patient Treatment Plan"},compress:!1};return hs.createPdf(s)}createTreatmentPlanDetailsSection(t){const n=t?.treatmentPlanName;return!n||n.startsWith("New Treatment Plan")?null:{stack:[{table:{headerRows:0,widths:["*"],body:[[{text:[{text:"TREATMENT PLAN: ",style:"medicalAdviceTitle"},{text:n,style:"patientValue"}],margin:[6,3,15,5]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"}}],unbreakable:!0,margin:[0,0,0,8],alignment:"left",pageBreakBefore:function(a,r){return r.length===0}}}getCompletedProcedures(t){return t?t.filter(n=>n.status?.toLowerCase()==="completed"&&n.isSelected!==!1&&n.status?.toLowerCase()!=="cancelled"):[]}getPendingProcedures(t){return t?t.filter(n=>n.status?.toLowerCase()!=="completed"&&n.isSelected!==!1&&n.status?.toLowerCase()!=="cancelled"):[]}hasMultipleOptions(t){if(!t)return!1;const n=t.filter(r=>r.status?.toLowerCase()!=="completed"&&r.isSelected!==!1&&r.status?.toLowerCase()!=="cancelled"),a=new Set;return n.forEach(r=>{const s=(r.option||r.options||"").trim();s&&a.add(s)}),a.size>=2}groupPendingProceduresByOption(t){const n=this.getPendingProcedures(t),a={};return n.forEach(r=>{const o=(r.option||r.options||"").trim()||"no-option";a[o]||(a[o]=[]),a[o].push(r)}),a}calculateGroupTotal(t){return t.reduce((n,a)=>{const r=a.costEstimate||a.procedureCost||0;return n+r},0)}createPendingProceduresSections(t){const n=this.getPendingProcedures(t);if(n.length===0)return[];if(this.hasMultipleOptions(t)){const a=this.groupPendingProceduresByOption(t),r=[];return a["no-option"]&&r.push(this.createProceduresSection("PENDING PROCEDURES",a["no-option"])),Object.keys(a).filter(o=>o!=="no-option").sort((o,i)=>o.localeCompare(i)).forEach(o=>{const i=a[o],c=this.calculateGroupTotal(i);r.push(this.createProceduresWithTotalSection(`OPTION ${o.toUpperCase()}`,i,c))}),r}else return[this.createProceduresSection("PENDING PROCEDURES",n)]}createProceduresWithTotalSection(t,n,a){if(!n||n.length===0)return null;const r={table:{headerRows:1,widths:["70%","30%"],body:[[{text:"PROCEDURE",style:"prescriptionTableHeader"},{text:"COST",style:"prescriptionTableHeader",alignment:"center"}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,2,0,8]};return n.forEach(s=>{const o=s.procedure?.procedure_name||s.procedureName||"Unknown Procedure",i=s.location&&s.location.trim()?`${o} (${s.location.trim()})`:o,c=s.procedure?.description||s.description||"",A=s.procedureCost||0,d=s.costEstimate||s.procedureCost||0,f=A-d;let m=`${d.toLocaleString()}`;f>0&&(m+=` (${f.toLocaleString()} discount)`),r.table.body.push([{stack:[{text:i,style:"cleanMedicineName"},...c?[{text:c,style:"cleanMedicineDetails"}]:[]]},{text:m,style:"cleanFieldValue",alignment:"center"}])}),r.table.body.push([{text:`${t} Total:`,style:"cleanMedicineName",bold:!0,alignment:"right"},{text:`${a.toLocaleString()}`,style:"cleanMedicineName",bold:!0,alignment:"center"}]),[{table:{headerRows:0,widths:["*"],body:[[{text:t,style:"medicalSectionTitle"}]]},layout:"noBorders",margin:[0,0,0,2]},r]}createProceduresSection(t,n){if(!n||n.length===0)return null;const a={table:{headerRows:1,widths:["70%","30%"],body:[[{text:"PROCEDURE",style:"prescriptionTableHeader"},{text:"COST",style:"prescriptionTableHeader",alignment:"center"}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,2,0,8]};return n.forEach(r=>{const s=r.procedure?.procedure_name||r.procedureName||"Unknown Procedure",o=r.location&&r.location.trim()?`${s} (${r.location.trim()})`:s,i=r.procedure?.description||r.description||"",c=r.procedureCost||0,A=r.costEstimate||r.procedureCost||0,d=c-A;let f=`${A.toLocaleString()}`;d>0&&(f+=` (${d.toLocaleString()} discount)`),a.table.body.push([{stack:[{text:o,style:"cleanMedicineName"},...i?[{text:i,style:"cleanMedicineDetails"}]:[]]},{text:f,style:"cleanFieldValue",alignment:"center"}])}),[{table:{headerRows:0,widths:["*"],body:[[{text:t,style:"medicalSectionTitle"}]]},layout:"noBorders",margin:[0,0,0,2]},a]}createPaymentDetailsSection(t){if(!t||t.length===0)return null;const n={table:{headerRows:1,widths:["25%","20%","18%","18%","19%"],body:[[{text:"RECEIPT ID",style:"prescriptionTableHeader"},{text:"DATE",style:"prescriptionTableHeader",alignment:"center"},{text:"TOTAL",style:"prescriptionTableHeader",alignment:"center"},{text:"PAID",style:"prescriptionTableHeader",alignment:"center"},{text:"BALANCE",style:"prescriptionTableHeader",alignment:"center"}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,2,0,8]};return t.forEach(a=>{n.table.body.push([{text:a.identifier||"N/A",style:"cleanFieldValue"},{text:ar(a.paymentReceiptDate),style:"cleanFieldValue",alignment:"center"},{text:`${(a.totalAmount||0).toLocaleString()}`,style:"cleanFieldValue",alignment:"center"},{text:`${(a.totalPaid||0).toLocaleString()}`,style:"cleanFieldValue",alignment:"center"},{text:`${(a.balanceDue||0).toLocaleString()}`,style:"cleanFieldValue",alignment:"center"}])}),[{table:{headerRows:0,widths:["*"],body:[[{text:"PAYMENT INFORMATION",style:"medicalSectionTitle"}]]},layout:"noBorders",margin:[0,0,0,2]},n]}createCostSummarySection(t,n){const a=t?.filter(d=>d.isSelected!==!1&&d.status?.toLowerCase()!=="cancelled")||[],r=a.reduce((d,f)=>d+(f.procedureCost||0),0),s=a.reduce((d,f)=>d+(f.costEstimate||f.procedureCost||0),0),o=r-s;let i=`${s.toLocaleString()}`;o>0&&(i+=` (${o.toLocaleString()} total discount)`);const A={table:{headerRows:0,widths:["60%","40%"],body:[["Total Cost:",i]].map(([d,f])=>[{text:d,fontSize:12,color:"#000000",bold:!0,margin:[5,2,5,2]},{text:f,style:"cleanFieldValue",alignment:"right",margin:[5,2,5,2]}])},layout:{hLineWidth:(d,f)=>d===0||d===f.table.body.length?1:0,vLineWidth:(d,f)=>d===0||d===f.table.widths.length?1:0,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,2,0,8]};return[{table:{headerRows:0,widths:["*"],body:[[{text:"COST SUMMARY",style:"medicalSectionTitle"}]]},layout:"noBorders",margin:[0,0,0,2]},A]}createPaymentSummarySection(t,n){const a=t?.filter(A=>A.isSelected!==!1&&A.status?.toLowerCase()==="completed"&&A.status?.toLowerCase()!=="cancelled")||[],r=n?.reduce((A,d)=>A+(d.totalPaid||0),0)||0,s=a.reduce((A,d)=>{const f=d.costEstimate||d.cost_estimate,m=d.procedureCost||0;return A+(f!==void 0?f:m)},0),o=Math.max(0,s-r),i=[["Amount Due:",`${s.toLocaleString()}`],["Amount Paid:",`${r.toLocaleString()}`],["Amount Pending:",`${o.toLocaleString()}`]],c={table:{headerRows:0,widths:["60%","40%"],body:i.map(([A,d])=>[{text:A,fontSize:12,color:"#000000",bold:!0,margin:[5,2,5,2]},{text:d,style:"cleanFieldValue",alignment:"right",margin:[5,2,5,2]}])},layout:{hLineWidth:(A,d)=>A===0||A===d.table.body.length?1:0,vLineWidth:(A,d)=>A===0||A===d.table.widths.length?1:0,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,2,0,8]};return[{table:{headerRows:0,widths:["*"],body:[[{text:"PAYMENT SUMMARY",style:"medicalSectionTitle"}]]},layout:"noBorders",margin:[0,0,0,2]},c]}getLanguageDisplayName(t){return{hi:"Hindi",bn:"Bengali",te:"Telugu",mr:"Marathi",ta:"Tamil",gu:"Gujarati",ur:"Urdu",ml:"Malayalam",kn:"Kannada",or:"Odia",pa:"Punjabi",as:"Assamese",hindi:"Hindi",marathi:"Marathi",gujarati:"Gujarati",kannada:"Kannada",malayalam:"Malayalam",telugu:"Telugu",tamil:"Tamil"}[t]||(t?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase():"Translation")}getPageSize(t){switch(t?.toLowerCase()){case"letter":return"LETTER";case"legal":return"LEGAL";case"a4":default:return"A4"}}getPageMargins(t,n=null){const a=n??130;switch(t?.toLowerCase()){case"letter":return[45,a,45,45];case"legal":return[35,a,35,55];case"a4":default:return[40,a,40,40]}}getHeaderMargins(t,n=null){const a=this.getPageMargins(t,n);return[a[0],20,a[2],15]}getPageWidth(t){switch(t?.toLowerCase()){case"letter":return 612;case"legal":return 612;case"a4":default:return 595}}hasVitals(t){return t?!!(t.pulse||t.systolicBP||t.diastolicBP||t.respiratoryRate||t.temperature||t.weight||t.height):!1}async generateBillPDF(t,n){hs||await RA();const a=t.headerSize!==void 0?t.headerSize:null,r={pageSize:this.getPageSize(t.printConfigurations?.pageSize),pageMargins:this.getPageMargins(t.printConfigurations?.pageSize,a),defaultStyle:{fontSize:10,columnGap:20},header:()=>this.createProfessionalBillHeader(t.printConfigurations,t.printConfigurations?.pageSize,t.doctor,a),footer:(s,o)=>this.createBillFooter(s,o,t.printConfigurations),content:[this.createBillTitle(),this.createBillPatientInfo(n,t.consultation,t.printConfigurations,t.doctor),this.createBillServicesTable(t.consultation),...t.consultation.associatedReceipt?[this.createAssociatedReceiptSection(t.consultation.associatedReceipt,t.consultation.payments)]:[]],styles:this.styles,pageBreakBefore:function(s,o,i){return!!(s.table&&s.table.body&&s.table.body.length>15)},info:{title:"Tax Invoice cum Bill of Supply",author:"Professional Medical System",subject:"Patient Bill and Tax Invoice"},compress:!1};return hs.createPdf(r)}async generatePharmacyBillPDF(t,n){hs||await RA();const a=t.pharmacyBill,r=t.pharmacyConfigurations||{},s={pageSize:"A4",pageOrientation:"landscape",pageMargins:[40,60,40,40],defaultStyle:{fontSize:10,columnGap:20},header:()=>r.useHeader?this.createPharmacyBillHeader(r):null,footer:()=>null,content:[this.createPharmacyBillTitle(n,a,r),this.createPharmacyBillItemsTable(a),this.createPharmacyBillBottomSection(a)],styles:this.styles,pageBreakBefore:function(o,i,c){return!!(o.table&&o.table.body&&o.table.body.length>15)},info:{title:"Pharmacy Bill",author:"Professional Medical System",subject:"Pharmacy Bill"},compress:!1};return hs.createPdf(s)}async generateMedicalFitnessCertificatePDF(t,n,a){hs||await RA();const r=a?.pageSize||"A4";let s=null;if(a?.headerImagePath&&a?.doctorId)try{const g=await Sd(a.doctorId,a.headerImagePath);s=await mp(g)}catch(g){console.error("Failed to load header image for PDF:",g)}let o=null;a?.headerSize!==void 0&&a?.headerSize!==null&&(o=Math.round(a.headerSize*72));const i=g=>{if(!g)return"";try{const w=new Date(g+"T12:00:00"),b=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],x=w.getDate(),T=b[w.getMonth()],F=w.getFullYear();return`${x} ${T} ${F}`}catch{return g}},c=t.patientName||n.name||"N/A",A=t.patientAge||n.age||"N/A",d=t.purpose||"",f=t.validityPeriod||"",m=t.additionalNotes||"";i(t.certificateDate);let h=`This is to certify that ${c}, aged ${A} years, is medically fit for ${d}. This certificate is valid for ${f}.`;m&&(h+=` ${m}`);const p={consultationDate:t.certificateDate,createdAt:t.certificateDate},y={pageSize:this.getPageSize(r),pageMargins:this.getPageMargins(r,o),defaultStyle:{fontSize:10,columnGap:20},header:()=>a?.useHeader?this.createProfessionalMedicalHeader(a,r,s,o):null,footer:(g,w)=>a?.useFooter?this.createMedicalFooter(g,w,a):null,content:[this.createProfessionalPatientCard(n,p),{text:"MEDICAL FITNESS CERTIFICATE",style:"prescriptionHeader",margin:[0,20,0,20]},{table:{headerRows:0,widths:["*"],body:[[{stack:[{text:h,style:"adviceText",margin:[0,0,0,20]}],margin:[12,0,12,0]}]]},layout:"noBorders",margin:[0,0,0,30]},{table:{headerRows:0,widths:["*"],body:[[{stack:[{canvas:[{type:"line",x1:0,y1:0,x2:200,y2:0,lineWidth:1,lineColor:"#1a202c"}],margin:[0,0,0,5]},{text:t.doctorName||a?.doctorName||"Dr. [Doctor Name]",fontSize:12,color:"#1a202c",margin:[0,0,0,3]},{text:i(t.certificateDate),fontSize:10,color:"#4a5568",margin:[0,0,0,3]},...a?.doctorRegistrationNumber?[{text:`Reg. No: ${a.doctorRegistrationNumber}`,fontSize:10,color:"#4a5568",margin:[0,0,0,0]}]:[]],margin:[12,0,12,0]}]]},layout:"noBorders",margin:[0,30,0,0]}],styles:this.styles,pageBreakBefore:function(g,w,b){return!1},info:{title:"Medical Fitness Certificate",author:"Professional Medical System",subject:"Medical Fitness Certificate"},compress:!1};return hs.createPdf(y)}async generateLeaveOfAbsencePDF(t,n,a){hs||await RA();const r=a?.pageSize||"A4";let s=null;if(a?.headerImagePath&&a?.doctorId)try{const b=await Sd(a.doctorId,a.headerImagePath);s=await mp(b)}catch(b){console.error("Failed to load header image for PDF:",b)}let o=null;a?.headerSize!==void 0&&a?.headerSize!==null&&(o=Math.round(a.headerSize*72));const i=b=>{if(!b)return"";try{const x=new Date(b+"T12:00:00"),T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],F=x.getDate(),k=T[x.getMonth()],S=x.getFullYear();return`${F} ${k} ${S}`}catch{return b}},c=t.patientName||n.name||"N/A",A=t.patientAge||n.age||"N/A",d=t.activity||"",f=t.reason||"",m=i(t.tillDate),h=t.additionalNotes||"",p=i(t.certificateDate);let y=`This is to certify that ${c}, aged ${A} years, should be granted leave of absence from ${d}`;m&&(y+=` till ${m}`),y+=` for the reason ${f}.`,h&&(y+=` ${h}`);const g={consultationDate:t.certificateDate,createdAt:t.certificateDate},w={pageSize:this.getPageSize(r),pageMargins:this.getPageMargins(r,o),defaultStyle:{fontSize:10,columnGap:20},header:()=>a?.useHeader?this.createProfessionalMedicalHeader(a,r,s,o):null,footer:(b,x)=>a?.useFooter?this.createMedicalFooter(b,x,a):null,content:[this.createProfessionalPatientCard(n,g),{text:"LEAVE OF ABSENCE CERTIFICATE",style:"prescriptionHeader",margin:[0,20,0,20]},{table:{headerRows:0,widths:["*"],body:[[{stack:[{text:y,style:"adviceText",margin:[0,0,0,20]}],margin:[12,0,12,0]}]]},layout:"noBorders",margin:[0,0,0,30]},{table:{headerRows:0,widths:["*"],body:[[{stack:[{canvas:[{type:"line",x1:0,y1:0,x2:200,y2:0,lineWidth:1,lineColor:"#1a202c"}],margin:[0,0,0,5]},{text:t.doctorName||a?.doctorName||"Dr. [Doctor Name]",fontSize:12,color:"#1a202c",margin:[0,0,0,3]},{text:p,fontSize:10,color:"#4a5568",margin:[0,0,0,3]},...a?.doctorRegistrationNumber?[{text:`Reg. No: ${a.doctorRegistrationNumber}`,fontSize:10,color:"#4a5568",margin:[0,0,0,0]}]:[]],margin:[12,0,12,0]}]]},layout:"noBorders",margin:[0,30,0,0]}],styles:this.styles,pageBreakBefore:function(b,x,T){return!1},info:{title:"Leave of Absence Certificate",author:"Professional Medical System",subject:"Leave of Absence Certificate"},compress:!1};return hs.createPdf(w)}async generateReceiptPDF(t,n){await RA(),console.log("Generating receipt PDF with data:",t);const a=t.consultation,r=t.printConfigurations||{},s=r.pageSize||"A4";let o=null;if(r?.headerImagePath&&r?.doctorId)try{const A=await Sd(r.doctorId,r.headerImagePath);o=await mp(A)}catch(A){console.error("Failed to load header image for PDF:",A)}let i=null;r?.headerSize!==void 0&&r?.headerSize!==null?i=Math.round(r.headerSize*72):t?.headerSize!==void 0&&(i=t.headerSize);const c={pageSize:this.getPageSize(s),pageMargins:this.getPageMargins(s,i),header:()=>r?.useHeader?this.createProfessionalMedicalHeader(r,s,o,i):null,footer:(A,d)=>r?.useFooter?this.createReceiptFooter(A,d,r):null,content:[this.createReceiptTitle(),this.createReceiptPatientInfo(n,a,t),this.createReceiptServicesTable(a),...this.createReceiptPaymentSection(a)],styles:this.styles,info:{title:"Payment Receipt",author:"Professional Medical System",subject:"Patient Payment Receipt"}};return hs.createPdf(c)}createReceiptTitle(){return{text:"PAYMENT RECEIPT",style:"receiptTitle",alignment:"center",margin:[0,0,0,15]}}createReceiptPatientInfo(t,n,a={}){return{table:{headerRows:0,widths:["33%","33%","34%"],body:[[{stack:[{text:"Patient Information",style:"sectionHeader",margin:[0,0,0,3]},{text:n.patientName||t.name||t.patientName||"Unknown Patient",style:"patientInfo"},{text:`ID: ${n.patientId||t.patientId||"N/A"}`,style:"patientInfo"}],margin:[6,3,6,3]},{stack:[{text:"Appointment Details",style:"sectionHeader",margin:[0,0,0,3]},{text:`Dr. ${n.doctorName||a?.doctor?.doctorName||"Unknown Doctor"}`,style:"patientInfo"},{text:`Date: ${this.formatReceiptDate(n.appointmentDate)}`,style:"patientInfo"}],margin:[6,3,6,3]},{stack:[{text:"Receipt Information",style:"sectionHeader",margin:[0,0,0,3]},{text:n.receiptNumber||n.identifier||"N/A",style:"patientInfo"},{text:`Date: ${this.formatReceiptDate(n.receiptDate||n.paymentReceiptDate)}`,style:"patientInfo"}],margin:[6,3,6,3]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,0,0,10]}}createReceiptServicesTable(t){const n=t.services||[];if(n.length===0)return{text:"No services recorded",style:"noDataText",margin:[0,10]};const a=n.some(i=>parseFloat(i.discountAmount)>0);let r,s;a?(r=[{text:"Description",style:"tableHeader"},{text:"Base Cost per unit",style:"tableHeader",alignment:"right"},{text:"Discount per unit",style:"tableHeader",alignment:"right"},{text:"Quantity",style:"tableHeader",alignment:"center"},{text:"Total",style:"tableHeader",alignment:"right"}],s=["35%","20%","20%","10%","15%"]):(r=[{text:"Description",style:"tableHeader"},{text:"Base Cost per unit",style:"tableHeader",alignment:"right"},{text:"Quantity",style:"tableHeader",alignment:"center"},{text:"Total",style:"tableHeader",alignment:"right"}],s=["45%","25%","15%","15%"]);const o=[r];return n.forEach(i=>{const c=parseFloat(i.baseCost)||0,A=parseFloat(i.discountAmount)||0,d=parseInt(i.quantity)||1,f=(c-A)*d;let m;a?m=[{text:i.serviceDescription||"Service",style:"tableCell"},{text:this.formatAmount(c),style:"tableCell",alignment:"right"},{text:this.formatAmount(A),style:"tableCell",alignment:"right"},{text:d.toString(),style:"tableCell",alignment:"center"},{text:this.formatAmount(f),style:"tableCell",alignment:"right"}]:m=[{text:i.serviceDescription||"Service",style:"tableCell"},{text:this.formatAmount(c),style:"tableCell",alignment:"right"},{text:d.toString(),style:"tableCell",alignment:"center"},{text:this.formatAmount(f),style:"tableCell",alignment:"right"}],o.push(m)}),[{table:{headerRows:0,widths:["*"],body:[[{text:"Item Details",style:"sectionHeader",margin:[6,3,6,3]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,0,0,2]},{table:{headerRows:1,widths:s,body:o},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0",fillColor:function(i){return i===0?"#f8f9fa":null}},margin:[0,0,0,5]},this.createReceiptSummary(t,a)]}createReceiptSummary(t,n){const a=t.subtotal||0,r=t.totalLineDiscount||0,s=parseFloat(t.additionalDiscount)||0,o=t.grandTotal||0,i=[];return i.push(["Subtotal:",this.formatAmount(a)]),n&&r>0&&i.push(["Line Discounts:",`-${this.formatAmount(r)}`]),s>0&&i.push(["Additional Discount:",`-${this.formatAmount(s)}`]),i.push(["Grand Total:",this.formatAmount(o)]),{table:{headerRows:0,widths:["70%","30%"],body:i.map(([c,A])=>[{text:c,style:c==="Grand Total:"?"summaryLabelBold":"summaryLabel",alignment:"right",margin:[5,2,5,2]},{text:A,style:c==="Grand Total:"?"summaryValueBold":"summaryValue",alignment:"right",margin:[5,2,5,2]}])},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,2,0,10]}}createReceiptPaymentSection(t){const n=t.grandTotal||0,a=t.totalPaid||0,r=t.balanceDue||0,s=t.payments||[],o=[];if(o.push({table:{headerRows:0,widths:["*"],body:[[{text:"Payment Information",style:"sectionHeader",margin:[6,3,6,3]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,0,0,2]}),o.push({table:{headerRows:0,widths:["33%","33%","34%"],body:[[{stack:[{text:"Total Amount",style:"summaryLabel",margin:[0,0,0,2]},{text:this.formatAmount(n),style:"summaryValueBold"}],margin:[6,8,6,8]},{stack:[{text:"Paid Amount",style:"summaryLabel",margin:[0,0,0,2]},{text:this.formatAmount(a),style:"summaryValuePaid"}],margin:[6,8,6,8]},{stack:[{text:"Balance Due",style:"summaryLabel",margin:[0,0,0,2]},{text:this.formatAmount(r),style:r>0?"summaryValueDue":"summaryValuePaid"}],margin:[6,8,6,8]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,0,0,10]}),s&&s.length>0){o.push({text:"Payment History",style:"summaryLabel",margin:[6,5,6,5]});const i=[[{text:"Date",style:"tableHeader"},{text:"Mode",style:"tableHeader"},{text:"Amount",style:"tableHeader",alignment:"right"}]];s.forEach(c=>{i.push([{text:this.formatReceiptDate(c.paymentDate),style:"tableCell"},{text:c.mode||"Cash",style:"tableCell"},{text:this.formatAmount(c.amount),style:"tableCell",alignment:"right"}])}),o.push({table:{headerRows:1,widths:["40%","30%","30%"],body:i},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0",fillColor:function(c){return c===0?"#f8f9fa":null}},margin:[0,0,0,10]})}else o.push({stack:[{text:"Payment History",style:"summaryLabel",margin:[6,5,6,2]},{text:"No payments recorded",style:"noDataText",margin:[0,5,0,5]}]});return o}formatAmount(t){if(t==null)return"0.00";const n=parseFloat(t)||0;return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(n)}formatReceiptDate(t){if(!t)return"N/A";try{return new Date(t).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return t}}formatDateTime(t){if(!t)return"N/A";try{return new Date(t*1e3).toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return t}}createBillTitle(){return{text:"Tax Invoice cum Bill of Supply",style:"receiptTitle",alignment:"center",margin:[0,10,0,15]}}createProfessionalBillHeader(t,n="A4",a=null,r=null){const s=this.getHeaderMargins(n,r);return{table:{headerRows:0,widths:["*"],body:[[{stack:[{columns:[{width:"40%",stack:[{text:`Dr. ${t.doctorName}`,style:"doctorName"},{text:t.doctorDegrees||"MBBS",style:"doctorCredentials"},{text:`Reg. No: ${t.doctorRegistrationNumber}`,style:"registrationInfo"}]},{width:"60%",stack:[...t.clinicAddress?[{stack:t.clinicAddress.split(/\r?\n|\r/).map(o=>({text:o.trim(),fontSize:10,color:"#4a5568",alignment:"right",margin:[0,1,0,1]})),margin:[0,5,0,2]}]:[],...t.contactNumber?[{text:` ${t.contactNumber}`,fontSize:10,color:"#4a5568",alignment:"right"}]:[],...t.email?[{text:`Email: ${t.email}`,fontSize:10,color:"#4a5568",alignment:"right"}]:[]]}]},{canvas:[{type:"line",x1:0,y1:4,x2:500,y2:4,lineWidth:2,lineColor:"#2b6cb0"},{type:"line",x1:0,y1:8,x2:500,y2:8,lineWidth:1,lineColor:"#4a5568"}],margin:[0,10,0,0],alignment:"center"}],margin:s}]]},layout:"noBorders",margin:[0,0,0,20]}}createBillPatientInfo(t,n,a,r=null){return{table:{headerRows:0,widths:["50%","50%"],body:[[{stack:[{text:"BILL TO:",style:"sectionHeader",alignment:"left"},{text:t.patientName||t.name||"Unknown Patient",style:"patientInfo"},{text:`Patient ID: ${t.patientId||"N/A"} | Age: ${n.patientAge||t.age||"N/A"}`,style:"patientInfo"}],margin:[12,8,12,8]},{stack:[{text:`Invoice No: ${n.billNumber}`,style:"patientInfo"},{text:`Date: ${this.formatReceiptDate(n.billDate)}`,style:"patientInfo"},{text:`Appointment Date: ${this.formatReceiptDate(n.appointmentDate)}`,style:"patientInfo"},...r?.isGST&&r?.gstIdentifier?[{text:`GST No: ${r.gstIdentifier}`,style:"patientInfo",bold:!0}]:[]],margin:[12,8,12,8],alignment:"left"}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,0,0,15]}}createBillServicesTable(t){const n=t.services||[];if(n.length===0)return{text:"No services found",style:"noDataText"};const a=n.some(c=>parseFloat(c.discountAmount)>0);let r,s;a?(r=[{text:"Sr.",style:"tableHeader",fontSize:9},{text:"Description",style:"tableHeader",fontSize:9},{text:"HSN/SAC Code",style:"tableHeader",fontSize:9},{text:"Base Cost per unit (incl. GST)",style:"tableHeader",fontSize:9},{text:"Discount per unit",style:"tableHeader",fontSize:9},{text:"GST%",style:"tableHeader",fontSize:9},{text:"Taxable Value",style:"tableHeader",fontSize:9},{text:"GST Amount",style:"tableHeader",fontSize:9},{text:"Quantity",style:"tableHeader",fontSize:9},{text:"Total",style:"tableHeader",fontSize:9}],s=["4%","16%","9%","11%","10%","7%","11%","10%","8%","14%"]):(r=[{text:"Sr.",style:"tableHeader",fontSize:9},{text:"Description",style:"tableHeader",fontSize:9},{text:"HSN/SAC Code",style:"tableHeader",fontSize:9},{text:"Base Cost per unit (incl. GST)",style:"tableHeader",fontSize:9},{text:"GST%",style:"tableHeader",fontSize:9},{text:"Taxable Value",style:"tableHeader",fontSize:9},{text:"GST Amount",style:"tableHeader",fontSize:9},{text:"Quantity",style:"tableHeader",fontSize:9},{text:"Total",style:"tableHeader",fontSize:9}],s=["4%","19%","11%","13%","8%","12%","12%","9%","12%"]);const o=[r];n.forEach((c,A)=>{let d;a?d=[{text:(A+1).toString(),style:"tableCell"},{text:c.serviceDescription||"N/A",style:"tableCell"},{text:c.hsnSacCode||"N/A",style:"tableCell",alignment:"center"},{text:this.formatAmount(c.baseCost),style:"tableCell",alignment:"right"},{text:this.formatAmount(c.discountAmount),style:"tableCell",alignment:"right"},{text:`${c.gstPercent||0}%`,style:"tableCell",alignment:"center"},{text:this.formatAmount(c.gstExclusiveAmount||0),style:"tableCell",alignment:"right"},{text:this.formatAmount(c.gstAmount),style:"tableCell",alignment:"right"},{text:c.quantity?.toString()||"1",style:"tableCell",alignment:"center"},{text:this.formatAmount(c.totalWithGst),style:"tableCell",alignment:"right",bold:!0}]:d=[{text:(A+1).toString(),style:"tableCell"},{text:c.serviceDescription||"N/A",style:"tableCell"},{text:c.hsnSacCode||"N/A",style:"tableCell",alignment:"center"},{text:this.formatAmount(c.baseCost),style:"tableCell",alignment:"right"},{text:`${c.gstPercent||0}%`,style:"tableCell",alignment:"center"},{text:this.formatAmount(c.gstExclusiveAmount||0),style:"tableCell",alignment:"right"},{text:this.formatAmount(c.gstAmount),style:"tableCell",alignment:"right"},{text:c.quantity?.toString()||"1",style:"tableCell",alignment:"center"},{text:this.formatAmount(c.totalWithGst),style:"tableCell",alignment:"right",bold:!0}],o.push(d)});const i=[];return a&&i.push([{text:"Base Cost Total (incl. GST):",style:"summaryLabel",fontSize:9,alignment:"right"},{text:this.formatAmount(t.baseSubtotal),style:"summaryValue",fontSize:9,alignment:"right"}],[{text:"Line Item Discounts:",style:"summaryLabel",fontSize:9,alignment:"right"},{text:`-${this.formatAmount(t.totalLineDiscount)}`,style:"summaryValue",fontSize:9,alignment:"right"}],[{text:"Subtotal after Discounts (incl. GST):",style:"summaryLabel",fontSize:9,alignment:"right"},{text:this.formatAmount(t.baseSubtotal-t.totalLineDiscount),style:"summaryValue",fontSize:9,alignment:"right"}]),i.push([{text:"Taxable Value Total:",style:"summaryLabel",fontSize:9,alignment:"right"},{text:this.formatAmount(t.totalTaxableValue||0),style:"summaryValue",fontSize:9,alignment:"right"}],[{text:"GST Amount:",style:"summaryLabel",fontSize:9,alignment:"right"},{text:this.formatAmount(t.totalGSTAmount),style:"summaryValue",fontSize:9,alignment:"right"}]),t.additionalDiscount>0&&i.push([{text:"Additional Discount:",style:"summaryLabel",fontSize:9,alignment:"right"},{text:`-${this.formatAmount(t.additionalDiscount)}`,style:"summaryValue",fontSize:9,alignment:"right"}]),i.push([{text:"Grand Total (incl. GST):",style:"summaryLabelBold",fontSize:10,alignment:"right"},{text:this.formatAmount(t.grandTotal),style:"summaryValueBold",fontSize:10,alignment:"right"}]),[{table:{headerRows:1,widths:s,body:o},layout:{hLineWidth:(c,A)=>c===0||c===1?2:1,vLineWidth:()=>1,hLineColor:()=>"#2b6cb0",vLineColor:()=>"#e2e8f0",fillColor:c=>c===0?"#f8fafc":null},margin:[0,0,0,10]},{table:{headerRows:0,widths:["70%","30%"],body:i},layout:{hLineWidth:(c,A)=>c===A.table.body.length-1?2:0,vLineWidth:()=>0,hLineColor:()=>"#2b6cb0",fillColor:(c,A)=>c===A.table.body.length-1?"#f1f5f9":null},margin:[0,5,0,15]}]}createAssociatedReceiptSection(t,n=[]){const a=[{text:"ASSOCIATED PAYMENT RECEIPT",style:"sectionHeader",margin:[0,15,0,10]}];if(t){if(a.push({table:{headerRows:0,widths:["50%","50%"],body:[[{stack:[{text:"Receipt Information:",style:"summaryLabel"},{text:`Receipt No: ${t.identifier}`,style:"receiptInfo"},{text:`Receipt Date: ${this.formatReceiptDate(t.paymentReceiptDate)}`,style:"receiptInfo"}],margin:[8,8,8,8]},{stack:[{text:"Payment Summary:",style:"summaryLabel"},{text:`Total Paid: ${this.formatAmount(n.reduce((r,s)=>r+(parseFloat(s.amount)||0),0))}`,style:"summaryValuePaid"},{text:`Balance Due: ${this.formatAmount(Math.max(0,t.balanceDue||0))}`,style:t.balanceDue>0?"summaryValueDue":"summaryValuePaid"}],margin:[8,8,8,8]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,0,0,10]}),n&&n.length>0){const r=[[{text:"Date",style:"tableHeader"},{text:"Method",style:"tableHeader"},{text:"Amount",style:"tableHeader"}]];n.forEach(s=>{r.push([{text:s.paymentDate||this.formatReceiptDate(s.paymentDate)||"N/A",style:"tableCell"},{text:s.paymentMethod||s.mode||"N/A",style:"tableCell"},{text:this.formatAmount(s.amount),style:"tableCell",alignment:"right"}])}),a.push({table:{headerRows:1,widths:["35%","30%","35%"],body:r},layout:{hLineWidth:s=>s===0||s===1?2:1,vLineWidth:()=>1,hLineColor:()=>"#2b6cb0",vLineColor:()=>"#e2e8f0",fillColor:s=>s===0?"#f8fafc":null},margin:[0,0,0,10]})}}else a.push({text:"No associated payment receipt found",style:"noDataText"});return a}createPharmacyBillTitle(t,n,a){const r=n.patientId||t.patientId||"N/A",s=n.patientName||t.name||t.patientName||"Unknown Patient";return{columns:[{width:"40%",text:"Tax Invoice cum Bill of Supply",style:"receiptTitle",fontSize:16,alignment:"left"},{width:"60%",table:{headerRows:0,widths:["50%","50%"],body:[[{text:`Patient: ${s} (ID${r})`,style:"patientInfo",fontSize:9,margin:[0,0,0,0]},{text:`Doctor: ${n.doctorName||"Unknown"}`,style:"patientInfo",fontSize:9,alignment:"right",margin:[0,0,0,0]}],[{text:`Invoice No.: ${n.identifier||"N/A"}`,style:"patientInfo",fontSize:9,margin:[0,1,0,0]},{text:`Date: ${this.formatReceiptDate(n.billDate)}`,style:"patientInfo",fontSize:9,alignment:"right",margin:[0,1,0,0]}]]},layout:"noBorders",alignment:"right"}],margin:[0,3,0,3]}}createPharmacyBillHeader(t){const n=t.header||"";return{table:{headerRows:0,widths:["*"],body:[[{stack:[{columns:[{width:"*",stack:n?n.split(/\r?\n|\r/).map(a=>a.trim()).filter(a=>a).map((a,r,s)=>({text:a,fontSize:r===0?14:12,color:r===0?"#1a202c":"#4a5568",alignment:"left",margin:[0,r===0?3:1,0,r===s.length-1?0:.5]})):[{text:"",fontSize:10}]},{width:"auto",stack:t.gstNumber?[{text:`GSTIN: ${t.gstNumber}`,fontSize:10,color:"#4a5568",alignment:"right",margin:[0,3,0,0]}]:[]}],margin:[0,0,0,0]},{canvas:[{type:"line",x1:0,y1:4,x2:762,y2:4,lineWidth:2,lineColor:"#2b6cb0"},{type:"line",x1:0,y1:8,x2:762,y2:8,lineWidth:1,lineColor:"#4a5568"}],margin:[0,3,0,0],alignment:"center"}],margin:[40,10,40,8]}]]},layout:"noBorders",margin:[0,0,0,3]}}createPharmacyBillPatientInfo(t,n,a){const r=n.patientId||t.patientId||"N/A",s=n.patientName||t.name||t.patientName||"Unknown Patient";return{table:{headerRows:0,widths:["35%","30%","35%"],body:[[{stack:[{text:`Patient: ${s} (ID${r})`,style:"patientInfo"},...n.patientPhone?[{text:`Phone: ${n.patientPhone}`,style:"patientInfo",margin:[0,2,0,0]}]:[]],margin:[6,2,6,2]},{stack:[{text:`Doctor: ${n.doctorName||"Unknown"}`,style:"patientInfo"}],margin:[6,2,6,2]},{columns:[{width:"auto",text:`Invoice No.: ${n.identifier||"N/A"}`,style:"patientInfo"},{width:"*",text:`Date: ${this.formatReceiptDate(n.billDate)}`,style:"patientInfo",alignment:"right"}],margin:[6,2,6,2]}]]},layout:{hLineWidth:()=>1,vLineWidth:()=>1,hLineColor:()=>"#e2e8f0",vLineColor:()=>"#e2e8f0"},margin:[0,0,0,8]}}createPharmacyBillItemsTable(t){const n=t.items||[];if(n.length===0)return{text:"No items found",style:"noDataText",margin:[0,10]};const a=[{text:"Item",style:"tableHeader",fontSize:9},{text:"HSN",style:"tableHeader",alignment:"center",fontSize:9},{text:"Batch",style:"tableHeader",fontSize:9},{text:"Expiry",style:"tableHeader",fontSize:9},{text:"MRP/Unit",style:"tableHeader",alignment:"right",fontSize:8},{text:"Discount",style:"tableHeader",alignment:"right",fontSize:9},{text:"Taxable/Unit",style:"tableHeader",alignment:"right",fontSize:8},{text:"GST",style:"tableHeader",alignment:"right",fontSize:9},{text:"Final/Unit",style:"tableHeader",alignment:"right",fontSize:9},{text:"Qty",style:"tableHeader",alignment:"right",fontSize:9},{text:"Total",style:"tableHeader",alignment:"right",fontSize:9}],r=["24%","7%","8%","8%","8%","9%","9%","5%","9%","5%","8%"],s=[a];return n.forEach((o,i)=>{const c=o.taxableValuePerUnit!==void 0?o.taxableValuePerUnit:this.calculatePharmacyTaxableValuePerUnit(o),A=o.finalValuePerUnit!==void 0?o.finalValuePerUnit:this.calculatePharmacyFinalValuePerUnit(o),d=o.itemTotal!==void 0?o.itemTotal:this.calculatePharmacyItemTotal(o);let f="N/A",m=!1;if(o.expiryDate){const b=typeof o.expiryDate=="number"?new Date(o.expiryDate*1e3):new Date(o.expiryDate);if(!isNaN(b.getTime())){f=this.formatReceiptDate(o.expiryDate);const x=new Date;x.setHours(0,0,0,0),b.setHours(0,0,0,0),m=b<x}}const p=[{text:o.medicineName||"N/A",fontSize:9,bold:!0}];o.marketer&&p.push({text:"  ",fontSize:9,bold:!0},{text:o.marketer,fontSize:9});const y=o.batchNumber||"N/A",g=o.mrp&&o.unitsPerPack&&o.unitsPerPack>0?o.mrp/o.unitsPerPack:0,w=[{text:p,style:"tableCell",fontSize:9},{text:o.hsnCode||"N/A",style:"tableCell",fontSize:9,alignment:"center"},{text:y,style:"tableCell",fontSize:9},{text:f,style:"tableCell",fontSize:9,color:m?"#c53030":"#1a202c"},{text:this.formatAmount(g),style:"tableCell",fontSize:9,alignment:"right"},{text:`${o.discountPercentage||0}%`,style:"tableCell",fontSize:9,alignment:"right"},{text:this.formatAmount(c),style:"tableCell",fontSize:9,alignment:"right"},{text:`${o.gstPercentage||0}%`,style:"tableCell",fontSize:9,alignment:"right"},{text:this.formatAmount(A),style:"tableCell",fontSize:9,alignment:"right"},{text:(o.quantityUnits||0).toString(),style:"tableCell",fontSize:9,alignment:"right"},{text:this.formatAmount(d),style:"tableCell",fontSize:9,alignment:"right",bold:!0}];s.push(w)}),{table:{headerRows:1,widths:r,body:s},layout:{hLineWidth:(o,i)=>o===0||o===1?2:1,vLineWidth:()=>1,hLineColor:()=>"#2b6cb0",vLineColor:()=>"#e2e8f0"},margin:[0,0,0,3]}}calculatePharmacyTaxableValuePerUnit(t){if(!t.mrp||!t.unitsPerPack||t.unitsPerPack<=0)return 0;const n=parseFloat(t.mrp)||0,a=parseFloat(t.unitsPerPack)||1,r=parseFloat(t.gstPercentage)||0,s=parseFloat(t.discountPercentage)||0,o=n/a,i=1+r/100,c=o/i,A=1-s/100;return c*A}calculatePharmacyFinalValuePerUnit(t){if(!t.mrp||!t.unitsPerPack||t.unitsPerPack<=0)return 0;const n=this.calculatePharmacyTaxableValuePerUnit(t),r=1+(parseFloat(t.gstPercentage)||0)/100;return n*r}calculatePharmacyItemTotal(t){if(!t.mrp||!t.unitsPerPack||t.unitsPerPack<=0)return 0;const n=this.calculatePharmacyFinalValuePerUnit(t),a=parseFloat(t.quantityUnits)||0;return n*a}createPharmacyBillSummary(t){const n=[],a=(c,A,d=!1,f=9)=>{const m=d?{text:c,fontSize:f,bold:!0}:{text:c,fontSize:f},h=d?{text:A,fontSize:f,bold:!0}:{text:A,fontSize:f};n.push({columns:[{text:m.text,fontSize:m.fontSize,bold:m.bold,alignment:"right"},{text:h.text,fontSize:h.fontSize,bold:h.bold,alignment:"right",margin:[8,0,0,0]}],margin:[0,.5,0,.5]})};a("Total MRP:",this.formatAmount(t.totalMrp||0)),a("Total Discount:",`-${this.formatAmount(t.totalDiscount||0)}`);const r=this.formatAmount(t.totalGst||0);a("Total GST:",r);const s=this.formatAmount(t.totalCgst||0),o=this.formatAmount(t.totalSgst||0);n.push({columns:[{width:"*",text:"",fontSize:9},{width:"auto",text:`(CGST: ${s}, SGST: ${o})`,fontSize:9,alignment:"right"}],margin:[0,.5,0,.5]}),t.additionalDiscountAmount>0&&a("Additional Discount:",`-${this.formatAmount(t.additionalDiscountAmount)}`,!1),a("Net Amount:",this.formatAmount(t.netAmount||0),!0);const i=t.roundOff||0;return a("Round Off:",`${i>0?"+":""}${this.formatAmount(i)}`),a("Final Amount:",this.formatAmount(t.finalAmount||0),!0),{stack:n,margin:[0,0,0,8],alignment:"right"}}createPharmacyBillBottomSection(t){const n=[];t.payments&&t.payments.length>0?(n.push({text:"Payment Information",style:"sectionHeader",margin:[0,0,0,5]}),t.payments.forEach(s=>{const o=this.formatAmount(s.amount),i=s.mode||"Cash";n.push({text:`${o} - ${i}`,fontSize:9,margin:[0,2,0,2]})})):(n.push({text:"Payment Information",style:"sectionHeader",margin:[0,0,0,5]}),n.push({text:"No payments recorded",fontSize:9,color:"#718096",margin:[0,2,0,2]}));const a={stack:[{text:"",fontSize:10},{text:"Sign",style:"sectionHeader",alignment:"center",margin:[0,0,0,0]}],margin:[10,0,10,0]},r=this.createPharmacyBillSummary(t);return{columns:[{width:"33%",stack:n,margin:[0,5,10,0]},{width:"33%",stack:[a],margin:[10,5,10,0]},{width:"34%",stack:[r],margin:[10,5,0,0]}],margin:[0,10,0,0]}}createPharmacyBillFooter(t,n,a){return{margin:[40,5,40,15],table:{widths:["*"],body:[[{stack:[{text:"This is a computer generated bill",style:"disclaimer"}],border:[!1,!0,!1,!1],borderColor:["","#e2e8f0","",""]}]]},layout:"noBorders"}}createBillFooter(t,n,a){return{margin:[40,10,40,20],table:{widths:["*"],body:[[{stack:[{text:"Tax Invoice cum Bill of Supply - Computer Generated",style:"disclaimer"},{text:"This is a system generated bill and does not require physical signature.",style:"disclaimer"},...a?.clinicName?[{text:`${a.clinicName} - Professional Medical Services`,style:"medicalFooter"}]:[],{text:`Page ${t} of ${n}`,style:"medicalFooter"}],border:[!1,!0,!1,!1],borderColor:["","#e2e8f0","",""]}]]},layout:"noBorders"}}}const NA=new O_e,Nw=["Dermatology","Cardiology","Dentistry","Endocrinology","Neurology","Pediatrics","Orthopedics","Psychiatry","Ophthalmology","Gynecology"],gT=["Tablet","Capsule","Chewable Tablet","Effervescent Tablet","Sublingual Tablet","Gelatin coated Tablet","Soft Gelatin Capsule","Soft Gelatine Capsule","Capsule ER","Capsule XR","Eye Capsule","Vaginal Capsule","Capsule Combipack","TabCap","RotaCap","Instacap","TransCap","AliCap","RediCap","RespiCap","NexCap","OxyCap","Vegicap","Captab","Caplet","Pellet","Softule","Opticops","Diskette","Grain","Powder","Powder for Injection","Powder for Oral Suspension","Powder for Inhalation","Powder for Infusion","Powder for Oral Solution","Dusting Powder","Dry Syrup","Dry Suspension","Syrup","Solution","Suspension","Lotion","Liquid","Oral Solution","Oral Suspension","Solution for Injection","Solution for Infusion","Solution for Inhalation","Suspension for Injection","Nasal Solution","Ophthalmic Solution","Ophthalmic Suspension","Redimix Suspension","Rediuse Suspension","Oral Liquid","Oral Emulsion","Emulsion","Ophthalmic Emulsion","Elixir","Tonic","Linctus","Mouth Wash","Mouthwash","Expectorant","Cream","Ointment","Gel","Eye Gel","Eye Ointment","Ophthalmic Gel","Oral Gel","Dental Gel","Vaginal Gel","Rectal Gel","Rectal Ointment","Rectal Cream","Vaginal Cream","Eye Cream","Paste","Oral Paste","Gum Paint","Mouth Paint","Paint","Toothpaste","Serum","Oil","Moisturiser","Shampoo","Conditioner","Face Wash","Soap","Scrub","Cleanser","Liniment","Foam","Drop","Eye Drop","Ear Drop","Oral Drop","Nasal Drop","Eye/Ear Drop","Spray","Nasal Spray","Mouth Spray","Vaginal Spray","Intranasal Spray","Inhaler","Respule","Autohaler","Multihaler","Transihaler","Transpule","Oxipule","Nebuliser","Aerosol","Injection","Infusion","Prefilled Syringe","Water for Injection","Solvent for Injection","Ampule","Ampoule","Vial","Patch","Transdermal Patch","Vaginal Suppository","Suppository","Pessary","Enema","Lozenge","Pastille","Chewing Gum","Gummy","Gum","Bio-Adhesive","Disintegrating Strip","Strip","Film","Gargle","Oral Jelly","Jelly","Nail Lacquer","Intrauterine system","Wipe","Kit","Combo Pack","Tablet Combikit","Sachet","Bottle","Pen","Disposable Pen","Pre-filled Pen","Cartridge","Tube","Jar","Pouch","Bar","Box","Toothbrush","Vaccine","Granule","Particle","Husk","Various","Unit"],Vw=["Strip","Bottle","Box","Sachet","Tube","Vial","Ampoule","Ampule","Cartridge","Pouch","Jar","Kit","Combo Pack","Unit","Bag","Can","Dose","Pack"],vH=[{label:"No Translation",value:"none"},{label:"Gujarati",value:"gujarati"},{label:"Marathi",value:"marathi"},{label:"Hindi",value:"hindi"},{label:"Kannada",value:"kannada"},{label:"Malayalam",value:"malayalam"},{label:"Telugu",value:"telugu"},{label:"Tamil",value:"tamil"}],hH=[{name:"Practo",value:"practo"},{name:"Eka.Care",value:"ekacare"},{name:"Healthplix",value:"healthplix"},{name:"Evamed Custom Template",value:"evamed-custom"},{name:"TatvaCare",value:"tatvacare"}],pH=[{name:"Patient Records",value:"patients",disabled:!1}],yT=["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal","Andaman and Nicobar Islands","Chandigarh","Dadra and Nagar Haveli and Daman and Diu","Delhi","Jammu and Kashmir","Ladakh","Lakshadweep","Puducherry"],kE=Object.freeze(Object.defineProperty({__proto__:null,dataImportTypes:pH,doctorSpecialization:Nw,emrSystems:hH,indianStates:yT,packTypeOptions:Vw,productPhysicalForm:gT,translationLanguages:vH},Symbol.toStringTag,{value:"Module"})),H_e={class:"d-flex align-center"},$_e={key:0,class:"d-flex justify-center align-center pdf-loading"},Q_e={key:1,class:"pdf-viewer"},G_e=["src"],z_e={key:2,class:"d-flex justify-center align-center pdf-error"},K_e={__name:"pdf-share-component",props:{contentType:{type:String,required:!0,validator:e=>["consultation","treatment-plan","receipt","bill","pharmacy-bill","certificate","leave-of-absence"].includes(e)},data:{type:Object,required:!0},patient:{type:Object,required:!0}},emits:["pdfGenerated"],setup(e,{emit:t}){const n=e,a=t,r=Rn(),s=ae(()=>r.getters["doctorModule/currentDoctor"]),{showWarning:o}=ra(),i=ae({get:()=>r.state.selectedTranslationLanguage,set:ne=>r.dispatch("updateSelectedTranslationLanguage",ne)}),c=ae(()=>{const ne=n.data?.printConfigurations?.headerSize;return ne!=null?Math.round(ne*72):130}),A=V(!1),d=V(!1),f=V(null),m=V(null),h=V(null),p=V(!1),y=V(!1),g=V(!1);let w=null;const b={consultation:{title:"Prescription PDF",filenamePrefix:"prescription"},"treatment-plan":{title:"Treatment Plan PDF",filenamePrefix:"treatment-plan"},receipt:{title:"Payment Receipt PDF",filenamePrefix:"receipt"},bill:{title:"Tax Invoice cum Bill of Supply PDF",filenamePrefix:"bill"},"pharmacy-bill":{title:"Pharmacy Bill PDF",filenamePrefix:"pharmacy-bill"},certificate:{title:"Medical Fitness Certificate PDF",filenamePrefix:"certificate"},"leave-of-absence":{title:"Leave of Absence PDF",filenamePrefix:"leave-of-absence"}},x=ae(()=>b[n.contentType]);ae(()=>x.value.title);const T=ae(()=>{const ne=n.patient.name||n.patient.patientName||"patient",Y=new Date().toISOString().split("T")[0];return`${x.value.filenamePrefix}-${ne}-${Y}.pdf`}),F=V(""),k=V(!1),S=ae(()=>{const ne=n.data.printConfigurations,Y={...n.data,translatedPatientNotes:F.value,translationLanguage:i.value,translationFailed:i.value&&i.value!=="none"&&n.data.consultation?.patientNotes?.trim()&&E(n.data.consultation.patientNotes)&&!F.value};if(n.contentType!=="pharmacy-bill"&&n.contentType!=="certificate"&&n.contentType!=="leave-of-absence"&&(Y.headerSize=c.value),(n.contentType==="certificate"||n.contentType==="leave-of-absence")&&(Y.printConfigurations=ne||{}),ne&&ne.doctorName)return Y;const te=s.value,L={doctorName:te?.doctorName||"Doctor",doctorDegrees:te?.doctorDegrees||"MBBS",doctorRegistrationNumber:te?.doctorRegistrationNumber||"REG001",email:te?.email||"",clinicAddress:te?.clinicAddress||`Medical Center
Healthcare District`,contactNumber:te?.contactNumber||"+1-234-567-8900",useHeader:!0,pageSize:"A4",doctorId:te?.id||1};return{...Y,printConfigurations:L}}),E=ne=>{if(!ne||!ne.trim())return!1;const Y=ne.trim();return Y.length<3?!1:![/^[-_.\/\\]+$/,/^[nN][aA]$/,/^[nN]\/[aA]$/,/^[nN][iI][lL]$/,/^[nN][oO][nN][eE]$/,/^[nN][oO][tT]\s+[aA][pP][pP][lL][iI][cC][aA][bB][lL][eE]$/i,/^[\s\-\.\,\;\:]*$/].some(L=>L.test(Y))},C=async()=>{if(n.contentType!=="consultation"||!n.data.consultation?.patientNotes?.trim()||!i.value||i.value==="none"||!E(n.data.consultation.patientNotes)){F.value="";return}try{k.value=!0;const{translationLanguages:ne}=await Jr(async()=>{const{translationLanguages:q}=await Promise.resolve().then(()=>kE);return{translationLanguages:q}},void 0,import.meta.url),te=ne.find(q=>q.value===i.value)?.label||i.value,{translateText:L}=await Jr(async()=>{const{translateText:q}=await import("./translationUtils-ZYbMZ81A.js");return{translateText:q}},[],import.meta.url),N=await L(n.data.consultation.patientNotes,te);if(!N||N.trim()===""||N===n.data.consultation.patientNotes){o(`Translation to ${te} temporarily unavailable - showing original text`),F.value="";return}F.value=N}catch(ne){console.error("Error translating patient notes:",ne);const{translationLanguages:Y}=await Jr(async()=>{const{translationLanguages:N}=await Promise.resolve().then(()=>kE);return{translationLanguages:N}},void 0,import.meta.url),L=Y.find(N=>N.value===i.value)?.label||i.value;o(`Translation to ${L} temporarily unavailable - showing original text`),F.value=""}finally{k.value=!1}};Ke(()=>[n.data,n.patient],async()=>{g.value||(n.contentType==="consultation"&&i.value&&i.value!=="none"&&n.data.consultation?.patientNotes?.trim()?await C():F.value="",await new Promise(ne=>setTimeout(ne,100)),P())});const D=async(ne,Y)=>{w&&(clearTimeout(w),w=null),w=setTimeout(async()=>{ne!==Y&&n.data&&n.patient&&!g.value&&(n.contentType==="consultation"&&ne&&ne!=="none"&&n.data.consultation?.patientNotes?.trim()?await C():F.value="",await new Promise(te=>setTimeout(te,100)),P()),w=null},400)};Ke(i,(ne,Y)=>{D(ne,Y)}),un(async()=>{n.contentType==="consultation"&&i.value&&i.value!=="none"&&n.data.consultation?.patientNotes?.trim()&&await C(),await new Promise(ne=>setTimeout(ne,200)),P()});const P=async()=>{if(g.value){console.log("PDF generation already in progress, skipping...");return}try{g.value=!0,console.log(`Generating ${n.contentType} PDF with Professional PDFMake...`),console.log("Data:",S.value),console.log("Patient:",n.patient),A.value=!0,m.value=null,d.value=!1,f.value=null;let ne;if(n.contentType==="consultation"?ne=await NA.generateConsultationPDF(S.value,n.patient):n.contentType==="treatment-plan"?ne=await NA.generateTreatmentPlanPDF(S.value,n.patient):n.contentType==="receipt"?ne=await NA.generateReceiptPDF(S.value,n.patient):n.contentType==="bill"?ne=await NA.generateBillPDF(S.value,n.patient):n.contentType==="pharmacy-bill"?ne=await NA.generatePharmacyBillPDF(S.value,n.patient):(n.contentType==="certificate"||n.contentType==="leave-of-absence")&&((S.value.documentData?.documentType||(n.contentType==="leave-of-absence"?"leave-of-absence":"medical-fitness-certificate"))==="leave-of-absence"?ne=await NA.generateLeaveOfAbsencePDF(S.value.documentData,n.patient,S.value.printConfigurations):ne=await NA.generateMedicalFitnessCertificatePDF(S.value.documentData,n.patient,S.value.printConfigurations)),!ne)throw new Error(`PDF generation not supported for content type: ${n.contentType}`);ne.getBlob(Y=>{A.value=!1,g.value=!1,d.value=!0,h.value=Y;const te=URL.createObjectURL(Y);f.value=te,a("pdfGenerated",Y),console.log("Professional PDF generation with PDFMake completed successfully")})}catch(ne){console.error("Error generating Professional PDF with PDFMake:",ne),m.value="Failed to generate PDF. Please try again.",A.value=!1,g.value=!1}},O=async()=>{f.value&&(URL.revokeObjectURL(f.value),f.value=null),h.value=null,await P()},H=async()=>{if(!h.value){console.error("No PDF to share");return}try{p.value=!0;const ne=await J(h.value),Y=await j3(ne,T.value);if(Y.success){const te=Y.data.file_url;await ie(te),alert("Please check the browser window to complete sharing PDF via WhatsApp.")}else throw new Error(`Failed to upload PDF: ${Y.error}`)}catch(ne){console.error("Error sharing PDF:",ne),alert(`Failed to share PDF: ${ne.message}`)}finally{p.value=!1}},ie=async ne=>{const Y=s.value?.doctorName||"Your Doctor",te=n.patient.name||n.patient.patientName||"Patient",L=n.patient.contactNumber||n.patient.phoneNumber;let N;if(n.contentType==="consultation"){const Q=ar(S.value.consultation.consultationDate),ee=S.value.consultation.followupDate?ar(S.value.consultation.followupDate):"Not scheduled";N=`Hi ${te},

Your prescription from Dr.${Y} for consultation on ${Q} is ready.

 **View your prescription:** ${ne}
 (Please download document within 24 hours)

 Please follow the dosage instructions carefully and complete the full course of medication. 
 Please schedule your follow-up appointment for: ${ee}.

 For any questions, please contact your doctor.`,S.value.doctor?.doctorReviewLink&&(N+=`

 Kindly leave your feedback for Dr.${Y}: ${S.value.doctor.doctorReviewLink}`),N+=`

Best regards,
Dr.${Y}`}else if(n.contentType==="treatment-plan"){const Q=S.value.treatmentPlan.treatmentPlanName||"Treatment Plan",ee=ar(Un());N=`Hello ${te},

Your treatment plan from Dr. ${Y} is ready.

 **Treatment Plan:** ${Q}
 **Date:** ${ee}

 **View your treatment plan:** ${ne}
 (Please download document within 24 hours)

 Please follow the treatment schedule and contact us for any questions.

Best regards,
Dr. ${Y}`}else if(n.contentType==="receipt"){const Q=S.value.consultation.receiptNumber||"Receipt",ee=ar(S.value.consultation.receiptDate||Un());N=`Hello ${te},

Your payment receipt from Dr. ${Y} is ready.

 **Receipt Number:** ${Q}
 **Receipt Date:** ${ee}

 **View your receipt:** ${ne}
 (Please download document within 24 hours)

 Thank you for your payment. Please keep this receipt for your records.

Best regards,
Dr. ${Y}`}else if(n.contentType==="bill"){const Q=S.value.consultation.billNumber||"Bill",ee=ar(S.value.consultation.billDate||Un()),z=S.value.consultation.grandTotal||0;N=`Hello ${te},

Your tax invoice cum bill of supply from Dr. ${Y} is ready.

 **Bill Number:** ${Q}
 **Bill Date:** ${ee}
 **Total Amount:** ${z.toFixed(2)}

 **View your bill:** ${ne}
 (Please download document within 24 hours)

Best regards,
Dr. ${Y}`}else if(n.contentType==="certificate"){const Q=S.value.documentData||{},ee=Q.documentType||"medical-fitness-certificate",z=Q.certificateDate?ar(Q.certificateDate):ar(Un());if(ee==="leave-of-absence"){const X=Q.activity||"",le=Q.reason||"",re=Q.tillDate?ar(Q.tillDate):"";N=`Hello ${te},

Your leave of absence certificate from Dr. ${Y} is ready.

 **Certificate Type:** Leave of Absence Certificate
 **Document Date:** ${z}
${X?` **From:** ${X}`:""}
${le?` **Reason:** ${le}`:""}
${re?` **Valid Till:** ${re}`:""}

 **View your certificate:** ${ne}
 (Please download document within 24 hours)

 Please keep this certificate for your records.

Best regards,
Dr. ${Y}`}else{const X=Q.purpose||"medical fitness",le=Q.validityPeriod||"";N=`Hello ${te},

Your medical fitness certificate from Dr. ${Y} is ready.

 **Certificate Type:** Medical Fitness Certificate
 **Certificate Date:** ${z}
${` **Purpose:** ${X}`}
${le?` **Validity:** ${le}`:""}

 **View your certificate:** ${ne}
 (Please download document within 24 hours)

 Please keep this certificate for your records.

Best regards,
Dr. ${Y}`}}else if(n.contentType==="leave-of-absence"){const Q=S.value.documentData||{},ee=Q.certificateDate?ar(Q.certificateDate):ar(Un()),z=Q.activity||"",X=Q.reason||"",le=Q.tillDate?ar(Q.tillDate):"";N=`Hello ${te},

Your leave of absence certificate from Dr. ${Y} is ready.

 **Certificate Type:** Leave of Absence Certificate
 **Document Date:** ${ee}
${z?` **From:** ${z}`:""}
${X?` **Reason:** ${X}`:""}
${le?` **Valid Till:** ${le}`:""}

 **View your certificate:** ${ne}
 (Please download document within 24 hours)

 Please keep this certificate for your records.

Best regards,
Dr. ${Y}`}else if(n.contentType==="pharmacy-bill"){const Q=S.value.pharmacyBill?.identifier||"Bill",ee=ar(S.value.pharmacyBill?.billDate||Un()),z=S.value.pharmacyBill?.finalAmount||0;N=`Hello ${te},

Your pharmacy bill from Dr. ${Y} is ready.

 **Bill Number:** ${Q}
 **Bill Date:** ${ee}
 **Total Amount:** ${z.toFixed(2)}

 **View your bill:** ${ne}
 (Please download document within 24 hours)

 Thank you for your purchase.

Best regards,
Dr. ${Y}`}N||(N=`Hello ${te},

Your document from Dr. ${Y} is ready.

 **View your document:** ${ne}
 (Please download document within 24 hours)

Best regards,
Dr. ${Y}`);const q=`https://api.whatsapp.com/send?phone=${L}&text=${encodeURIComponent(N)}`;try{const{ipcRenderer:Q}=window.require("electron"),ee=await Q.invoke("open-external",q);ee.success?console.log("Successfully opened WhatsApp with system default browser"):(console.error("Failed to open WhatsApp:",ee.error),window.open(q,"_blank","noopener,noreferrer"))}catch(Q){console.error("Failed to use Electron IPC:",Q),window.open(q,"_blank","noopener,noreferrer")}},Ae=async()=>{if(!h.value){console.error("No PDF to share");return}try{y.value=!0;const ne=await J(h.value),Y=await j3(ne,T.value);if(Y.success){const te=Y.data.file_url;await j(te),alert("Please check your email client to complete sharing PDF via email.")}else throw new Error(`Failed to upload PDF: ${Y.error}`)}catch(ne){console.error("Error sharing PDF via email:",ne),alert(`Failed to share PDF via email: ${ne.message}`)}finally{y.value=!1}},j=async ne=>{const Y=s.value?.doctorName||"Your Doctor",te=n.patient.name||n.patient.patientName||"Patient",L=n.patient.email||n.patient.emailAddress;let N,q;if(n.contentType==="consultation"){const ee=ar(S.value.consultation.consultationDate),z=S.value.consultation.followupDate?ar(S.value.consultation.followupDate):"Not scheduled";N=`Prescription - Consultation ${ee} - Dr. ${Y}`,q=`Dear ${te},

Your prescription from Dr. ${Y} for the consultation on ${ee} is ready for review.

You can access your prescription document by clicking the link below:

${ne}

Please note: This document will be available for download for 24 hours.

Important Instructions:
- Please follow the dosage instructions carefully
- Complete the full course of medication as prescribed
- Schedule your follow-up appointment for: ${z}

If you have any questions or concerns, please contact our clinic directly.`,S.value.doctor?.doctorReviewLink&&(q+=`

We value your feedback. Please share your experience: ${S.value.doctor.doctorReviewLink}`),q+=`

Best regards,
Dr. ${Y}
${s.value?.clinicAddress||""}
${s.value?.contactNumber||""}`}else if(n.contentType==="treatment-plan"){const ee=S.value.treatmentPlan.treatmentPlanName||"Treatment Plan",z=ar(Un());N=`Treatment Plan - ${ee} - Dr. ${Y}`,q=`Dear ${te},

Your treatment plan from Dr. ${Y} has been prepared.

Treatment Plan Details:
- Plan Name: ${ee}
- Date Created: ${z}

You can access your treatment plan document by clicking the link below:

${ne}

Please note: This document will be available for download for 24 hours.

Please follow the treatment schedule as outlined in the document. If you have any questions or concerns, please contact our clinic directly.

Best regards,
Dr. ${Y}
${s.value?.clinicAddress||""}
${s.value?.contactNumber||""}`}else if(n.contentType==="receipt"){const ee=S.value.consultation.receiptNumber||"Receipt",z=ar(S.value.consultation.receiptDate||Un());N=`Payment Receipt - ${ee} - Dr. ${Y}`,q=`Dear ${te},

Your payment receipt from Dr. ${Y} is ready.

Receipt Details:
- Receipt Number: ${ee}
- Receipt Date: ${z}

You can access your receipt document by clicking the link below:

${ne}

Please note: This document will be available for download for 24 hours.

Thank you for your payment. Please keep this receipt for your records.

Best regards,
Dr. ${Y}
${s.value?.clinicAddress||""}
${s.value?.contactNumber||""}`}else if(n.contentType==="bill"){const ee=S.value.consultation.billNumber||"Bill",z=ar(S.value.consultation.billDate||Un()),X=S.value.consultation.grandTotal||0;N=`Tax Invoice - ${ee} - Dr. ${Y}`,q=`Dear ${te},

Your tax invoice cum bill of supply from Dr. ${Y} is ready.

Invoice Details:
- Bill Number: ${ee}
- Bill Date: ${z}
- Total Amount: ${X.toFixed(2)}

You can access your invoice document by clicking the link below:

${ne}

Please note: This document will be available for download for 24 hours.

Best regards,
Dr. ${Y}
${s.value?.clinicAddress||""}
${s.value?.contactNumber||""}`}else if(n.contentType==="pharmacy-bill"){const ee=S.value.pharmacyBill?.identifier||"Bill",z=ar(S.value.pharmacyBill?.billDate||Un()),X=S.value.pharmacyBill?.finalAmount||0;N=`Pharmacy Bill - ${ee} - Dr. ${Y}`,q=`Dear ${te},

Your pharmacy bill from Dr. ${Y} is ready.

Bill Details:
- Bill Number: ${ee}
- Bill Date: ${z}
- Total Amount: ${X.toFixed(2)}

You can access your pharmacy bill document by clicking the link below:

${ne}

Please note: This document will be available for download for 24 hours.

Thank you for your purchase.

Best regards,
Dr. ${Y}
${s.value?.clinicAddress||""}
${s.value?.contactNumber||""}`}else if(n.contentType==="certificate"){const ee=S.value.documentData||{},z=ee.certificateDate?ar(ee.certificateDate):ar(Un()),X=ee.purpose||"medical fitness",le=ee.validityPeriod||"";N=`Medical Fitness Certificate - Dr. ${Y}`,q=`Dear ${te},

Your medical fitness certificate from Dr. ${Y} is ready.

Certificate Details:
- Certificate Type: Medical Fitness Certificate
- Certificate Date: ${z}
${`- Purpose: ${X}`}
${le?`- Validity: ${le}`:""}

You can access your certificate document by clicking the link below:

${ne}

Please note: This document will be available for download for 24 hours.

Please keep this certificate for your records.

Best regards,
Dr. ${Y}
${s.value?.clinicAddress||""}
${s.value?.contactNumber||""}`}else if(n.contentType==="leave-of-absence"){const ee=S.value.documentData||{},z=ee.certificateDate?ar(ee.certificateDate):ar(Un()),X=ee.activity||"",le=ee.reason||"",re=ee.tillDate?ar(ee.tillDate):"";N=`Leave of Absence Certificate - Dr. ${Y}`,q=`Dear ${te},

Your leave of absence certificate from Dr. ${Y} is ready.

Certificate Details:
- Certificate Type: Leave of Absence Certificate
- Document Date: ${z}
${X?`- From: ${X}`:""}
${le?`- Reason: ${le}`:""}
${re?`- Valid Till: ${re}`:""}

You can access your certificate document by clicking the link below:

${ne}

Please note: This document will be available for download for 24 hours.

Please keep this certificate for your records.

Best regards,
Dr. ${Y}
${s.value?.clinicAddress||""}
${s.value?.contactNumber||""}`}(!N||!q)&&(N=`Document from Dr. ${Y}`,q=`Dear ${te},

Your document from Dr. ${Y} is ready.

You can access your document by clicking the link below:

${ne}

Please note: This document will be available for download for 24 hours.

Best regards,
Dr. ${Y}
${s.value?.clinicAddress||""}
${s.value?.contactNumber||""}`);let Q="mailto:";L&&(Q+=encodeURIComponent(L)),Q+=`?subject=${encodeURIComponent(N)}&body=${encodeURIComponent(q)}`;try{const{ipcRenderer:ee}=window.require("electron"),z=await ee.invoke("open-external",Q);z.success?console.log("Successfully opened email client with system default email application"):(console.error("Failed to open email client:",z.error),window.open(Q,"_blank","noopener,noreferrer"))}catch(ee){console.error("Failed to use Electron IPC:",ee),window.open(Q,"_blank","noopener,noreferrer")}},J=ne=>new Promise((Y,te)=>{const L=new FileReader;L.readAsDataURL(ne),L.onload=()=>{const N=L.result.split(",")[1];Y(N)},L.onerror=N=>te(N)}),ue=()=>{console.log("PDF loaded in iframe")};return Ui(()=>{w&&(clearTimeout(w),w=null),f.value&&URL.revokeObjectURL(f.value)}),(ne,Y)=>{const te=I("v-select"),L=I("v-icon"),N=I("v-btn"),q=I("v-tooltip"),Q=I("v-col"),ee=I("v-row"),z=I("v-card"),X=I("v-progress-circular"),le=I("v-alert-title"),re=I("v-alert");return U(),me(We,null,[l(ee,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[l(Q,{cols:"12"},{default:u(()=>[l(z,{rounded:"0",class:"pa-0",color:"surfaceContainerHigh"},{default:u(()=>[l(ee,{"no-gutters":"",align:"center",class:"px-2 py-1"},{default:u(()=>[l(Q,{cols:"12",class:"d-flex align-center justify-end"},{default:u(()=>[v("div",H_e,[e.contentType==="consultation"?(U(),pe(te,{key:0,modelValue:i.value,"onUpdate:modelValue":Y[0]||(Y[0]=de=>i.value=de),items:$e(vH),"item-title":"label","item-value":"value",label:"Translation Language",density:"compact",variant:"underlined",clearable:"",style:{"max-width":"200px"},class:"text-caption compact-select mr-2","hide-details":"",disabled:A.value},null,8,["modelValue","items","disabled"])):ge("",!0),l(q,{text:"WhatsApp PDF"},{activator:u(({props:de})=>[l(N,Ue({rounded:"x-small",size:"small",onClick:H,class:"mr-1 btn-hover-base",disabled:!d.value,loading:p.value},de),{default:u(()=>[l(L,{size:"large"},{default:u(()=>[...Y[1]||(Y[1]=[v("img",{src:Y_,alt:"Share PDF",class:"whatsapp-icon"},null,-1)])]),_:1})]),_:1},16,["disabled","loading"])]),_:1}),l(q,{text:"Email PDF"},{activator:u(({props:de})=>[l(N,Ue({rounded:"x-small",size:"small",onClick:Ae,class:"mr-1 btn-hover-base",disabled:!d.value,loading:y.value},de),{default:u(()=>[l(L,{size:"large"},{default:u(()=>[...Y[2]||(Y[2]=[v("img",{src:Ape,alt:"Email PDF",class:"email-icon"},null,-1)])]),_:1})]),_:1},16,["disabled","loading"])]),_:1}),l(N,{rounded:"x-small",size:"small",variant:"outlined",onClick:O,class:"btn-hover-base"},{default:u(()=>[l(L,{size:"large"},{default:u(()=>[...Y[3]||(Y[3]=[v("img",{src:Sg,alt:"Refresh"},null,-1)])]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(ee,{"no-gutters":"",class:"pdf-row"},{default:u(()=>[l(Q,{cols:"12",class:"pdf-container"},{default:u(()=>[A.value?(U(),me("div",$_e,[l(X,{indeterminate:"",color:"primary",size:"64"}),Y[4]||(Y[4]=v("span",{class:"ml-4"},"Generating PDF...",-1))])):f.value?(U(),me("div",Q_e,[v("iframe",{src:f.value,width:"100%",height:"100%",style:{border:"none","border-radius":"8px"},onLoad:ue},null,40,G_e)])):m.value?(U(),me("div",z_e,[l(re,{type:"error",variant:"tonal"},{append:u(()=>[l(N,{onClick:O,variant:"text"},{default:u(()=>[...Y[6]||(Y[6]=[M("Retry",-1)])]),_:1})]),default:u(()=>[l(le,null,{default:u(()=>[...Y[5]||(Y[5]=[M("Error generating PDF",-1)])]),_:1}),M(" "+K(m.value)+" ",1)]),_:1})])):ge("",!0)]),_:1})]),_:1})],64)}}},yh=Xt(K_e,[["__scopeId","data-v-4fc007bd"]]),W_e={class:"text-center"},j_e={class:"text-center"},q_e={class:"text-body-2 text-medium-emphasis mb-4"},Y_e={class:"pa-1"},X_e={class:"text-body-1 font-weight-medium"},J_e={class:"text-body-2 text-medium-emphasis"},Z_e={class:"pa-1"},e2e={class:"text-body-1 font-weight-medium"},t2e={class:"text-body-2 text-medium-emphasis"},n2e={class:"pa-1"},a2e={class:"text-body-1 font-weight-medium"},r2e={class:"text-body-2 text-medium-emphasis"},s2e={key:0,class:"d-flex align-center"},o2e={key:1,class:"text-body-2 text-error"},i2e={key:2,class:"d-flex flex-column"},l2e={class:"text-body-2 font-weight-medium"},u2e={class:"text-caption text-medium-emphasis"},c2e={key:0},d2e={key:1},A2e={key:0,class:"text-caption text-medium-emphasis mt-1"},f2e={key:0},m2e={class:"text-left"},v2e={class:"text-left"},h2e={class:"text-left"},p2e={class:"text-left"},g2e={class:"text-left"},y2e={key:0,class:"text-body-2 mb-1"},_2e={class:"text-body-2 mb-1"},w2e={class:"text-body-2 mb-1"},b2e={key:0,class:"text-body-2 mb-1"},x2e={class:"text-subtitle-1 font-weight-bold"},C2e={class:"text-h6"},S2e={class:"text-h6 text-success"},E2e={key:0,class:"text-center pa-4"},B2e={class:"text-left"},k2e={class:"text-left"},T2e={class:"text-right"},I2e={class:"text-right"},F2e={class:"text-center pa-4"},P2e={__name:"payment-receipt-view",props:{receiptId:{type:[String,Number],required:!0}},emits:["close","edit-receipt"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ra(),o=Rn(),i=ae(()=>o.getters["doctorModule/currentDoctor"]),c=ae(()=>i.value?.doctorName||"Unknown Doctor"),A=V(!1),d=V(!1),f=V(null),m=V(null),h=V([]),p=V("view"),y=V({}),g=V(null),w=V(null),b=V(!1),x=V(null),T=ae(()=>m.value?.services||[]),F=cT(T,ae(()=>m.value?.additionalDiscount||0)),{subtotal:k,totalLineDiscount:S,finalGrandTotal:E,calculateServiceTotal:C}=F,D=ae(()=>Array.isArray(h.value)?h.value.reduce((L,N)=>L+(parseFloat(N.amount)||0),0):0),P=ae(()=>Math.max(0,E.value-D.value)),O=ae(()=>m.value?{patientName:m.value.patientName||"Unknown Patient",patientId:m.value.patientId||"N/A",patientContactNumber:m.value.patientContactNumber,doctorName:c.value,receiptNumber:m.value.identifier,receiptDate:m.value.paymentReceiptDate,appointmentDate:m.value.appointmentDate,services:m.value.services||[],subtotal:k.value,totalLineDiscount:S.value,additionalDiscount:parseFloat(m.value.additionalDiscount)||0,grandTotal:E.value,totalPaid:D.value,balanceDue:P.value,payments:h.value||[]}:null),H=async()=>{if(!n.receiptId){f.value="No receipt ID provided";return}A.value=!0,f.value=null;try{console.log("Loading receipt data for ID:",n.receiptId);const L=await qM(n.receiptId);if(L.error)throw new Error(L.error.message||"Failed to load receipt");m.value=L.data,console.log("Receipt data loaded:",m.value),L.data.treatmentPlanId&&(g.value=L.data.treatmentPlanId,await ie()),await Ae(),await j()}catch(L){console.error("Error loading receipt data:",L),f.value=L.message||"Failed to load receipt data",s(f.value)}finally{A.value=!1}},ie=async()=>{if(!g.value){w.value=null;return}b.value=!0,x.value=null;try{console.log("Loading treatment plan data for ID:",g.value);const L=await Cf(g.value);if(L.error)throw new Error(L.error.message||"Failed to load treatment plan");w.value=L.data,console.log("Treatment plan data loaded:",w.value)}catch(L){console.error("Error loading treatment plan data:",L),x.value=L.message||"Failed to load treatment plan"}finally{b.value=!1}},Ae=async()=>{if(!n.receiptId){h.value=[];return}d.value=!0;try{console.log("Loading payments for receipt ID:",n.receiptId);const L=await Bg(n.receiptId);L.success&&Array.isArray(L.data)?(h.value=L.data,console.log("Payments loaded:",h.value)):(console.warn("No payments found or invalid response:",L),h.value=[])}catch(L){console.error("Error loading receipt payments:",L),h.value=[]}finally{d.value=!1}},j=async()=>{try{const L=o.state.doctorModule.doctorId;if(!L){console.warn("No doctor ID available for print configurations");return}const N=await gh(L);y.value=N.data||{},console.log("Print configurations fetched:",y.value)}catch(L){console.error("Error fetching print configs:",L),s("Failed to load print configurations")}},J=L=>{if(!L)return"";try{return new Date(L).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return L}},ue=L=>{if(!L)return"";try{return new Date(L*1e3).toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return L}},ne=()=>{console.log("Edit receipt:",n.receiptId),a("edit-receipt",n.receiptId)},Y=L=>{console.log("Receipt PDF generated successfully:",L),r("Receipt PDF generated successfully")},te=()=>{a("close")};return un(()=>{H()}),(L,N)=>{const q=I("v-icon"),Q=I("v-btn"),ee=I("v-card-title"),z=I("v-col"),X=I("v-row"),le=I("v-tab"),re=I("v-tabs"),de=I("v-progress-circular"),G=I("v-label"),Z=I("v-card-text"),ce=I("v-card"),Se=I("v-table"),Pe=I("v-divider"),ye=I("v-container"),Ce=I("v-tabs-window-item"),_e=I("v-tabs-window");return U(),pe(ce,{rounded:"lg",color:"surfaceContainer",flat:"",ripple:!1},{default:u(()=>[l(X,{"no-gutters":""},{default:u(()=>[l(z,{cols:"12"},{default:u(()=>[l(ee,{class:"d-flex align-center justify-space-between"},{default:u(()=>[N[3]||(N[3]=v("span",null,"Payment Receipt",-1)),l(Q,{onClick:te,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(q,{size:"18"},{default:u(()=>[...N[2]||(N[2]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(X,{"no-gutters":""},{default:u(()=>[l(z,{cols:"12"},{default:u(()=>[l(re,{modelValue:p.value,"onUpdate:modelValue":N[0]||(N[0]=De=>p.value=De),color:"primary","bg-color":"surfaceContainerHigh","align-tabs":"start",class:"mx-3 mb-3"},{default:u(()=>[l(le,{value:"view"},{default:u(()=>[l(q,{start:""},{default:u(()=>[...N[4]||(N[4]=[M("mdi-eye",-1)])]),_:1}),N[5]||(N[5]=M(" View Receipt ",-1))]),_:1}),l(le,{value:"share"},{default:u(()=>[l(q,{start:""},{default:u(()=>[...N[6]||(N[6]=[M("mdi-share-variant",-1)])]),_:1}),N[7]||(N[7]=M(" Share Receipt ",-1))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(X,{"no-gutters":""},{default:u(()=>[l(z,{cols:"12",class:"scroll-element"},{default:u(()=>[l(_e,{modelValue:p.value,"onUpdate:modelValue":N[1]||(N[1]=De=>p.value=De)},{default:u(()=>[l(Ce,{value:"view"},{default:u(()=>[A.value?(U(),pe(X,{key:0,"no-gutters":""},{default:u(()=>[l(z,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[v("div",W_e,[l(de,{indeterminate:"",color:"primary",size:"64"}),N[8]||(N[8]=v("div",{class:"mt-4 text-subtitle-1"},"Loading receipt...",-1))])]),_:1})]),_:1})):f.value?(U(),pe(X,{key:1,"no-gutters":""},{default:u(()=>[l(z,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[v("div",j_e,[l(q,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...N[9]||(N[9]=[M("mdi-alert-circle",-1)])]),_:1}),N[11]||(N[11]=v("div",{class:"text-h6 mb-2"},"Failed to Load Receipt",-1)),v("div",q_e,K(f.value),1),l(Q,{color:"primary",onClick:H,"prepend-icon":"mdi-refresh"},{default:u(()=>[...N[10]||(N[10]=[M(" Try Again ",-1)])]),_:1})])]),_:1})]),_:1})):m.value?(U(),pe(ye,{key:2,fluid:"",class:"pa-3"},{default:u(()=>[l(ce,{flat:"",color:"surfaceContainerHigh",class:"mb-4 card-enhanced"},{default:u(()=>[l(Z,{class:"pb-1 pt-2"},{default:u(()=>[l(X,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(z,{cols:"4"},{default:u(()=>[v("div",Y_e,[l(G,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...N[12]||(N[12]=[M("Patient Information",-1)])]),_:1}),v("div",X_e,K(m.value.patientName||"Unknown Patient"),1),v("div",J_e,"ID: "+K(m.value.patientId||"N/A"),1)])]),_:1}),l(z,{cols:"4"},{default:u(()=>[v("div",Z_e,[l(G,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...N[13]||(N[13]=[M("Appointment Details",-1)])]),_:1}),v("div",e2e,"Dr. "+K(c.value),1),v("div",t2e,"Date: "+K(J(m.value.appointmentDate)),1)])]),_:1}),l(z,{cols:"4"},{default:u(()=>[v("div",n2e,[l(G,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...N[14]||(N[14]=[M("Receipt Information",-1)])]),_:1}),v("div",a2e,K(m.value.identifier),1),v("div",r2e,"Date: "+K(J(m.value.paymentReceiptDate)),1)])]),_:1})]),_:1})]),_:1})]),_:1}),g.value?(U(),pe(ce,{key:0,flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(Z,{class:"pb-2"},{default:u(()=>[l(X,{"no-gutters":"",align:"center",class:"mb-2"},{default:u(()=>[l(z,{cols:"3",class:"d-flex align-center"},{default:u(()=>[...N[15]||(N[15]=[v("div",{class:"text-subtitle-1"},"Treatment Plan",-1)])]),_:1}),l(z,{cols:"9"},{default:u(()=>[b.value?(U(),me("div",s2e,[l(de,{indeterminate:"",size:"16",color:"primary",class:"mr-2"}),N[16]||(N[16]=v("span",{class:"text-body-2"},"Loading treatment plan...",-1))])):x.value?(U(),me("div",o2e,[l(q,{size:"16",class:"mr-1"},{default:u(()=>[...N[17]||(N[17]=[M("mdi-alert-circle",-1)])]),_:1}),M(" "+K(x.value),1)])):w.value?(U(),me("div",i2e,[v("div",l2e,K(w.value.treatmentPlanName),1),v("div",u2e,[M(" Status: "+K(w.value.status)+" ",1),w.value.startDate?(U(),me("span",c2e,"  Start: "+K(J(w.value.startDate)),1)):ge("",!0),w.value.endDate?(U(),me("span",d2e,"  End: "+K(J(w.value.endDate)),1)):ge("",!0)]),w.value.notes?(U(),me("div",A2e,[N[18]||(N[18]=v("strong",null,"Notes:",-1)),M(" "+K(w.value.notes.substring(0,80)),1),w.value.notes.length>80?(U(),me("span",f2e,"...")):ge("",!0)])):ge("",!0)])):ge("",!0)]),_:1})]),_:1})]),_:1})]),_:1})):ge("",!0),l(ce,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(Z,{class:"pb-2"},{default:u(()=>[N[23]||(N[23]=v("div",{class:"text-subtitle-1 mb-3"},"Item Details",-1)),l(Se,{density:"compact",class:"mb-3"},{default:u(()=>[N[19]||(N[19]=v("thead",null,[v("tr",null,[v("th",{class:"text-left",style:{width:"60px"}},"Sr. No"),v("th",{class:"text-left",style:{width:"300px"}},"Description"),v("th",{class:"text-left",style:{width:"120px"}},"Base Cost per unit ()"),v("th",{class:"text-left",style:{width:"120px"}},"Discount per unit ()"),v("th",{class:"text-left",style:{width:"100px"}},"Quantity"),v("th",{class:"text-left",style:{width:"120px"}},"Total ()")])],-1)),v("tbody",null,[(U(!0),me(We,null,qt(m.value.services,(De,xe)=>(U(),me("tr",{key:xe},[v("td",null,K(xe+1),1),v("td",m2e,K(De.serviceDescription),1),v("td",v2e,K($e(Ar)(De.baseCost)),1),v("td",h2e,K($e(Ar)(De.discountAmount)),1),v("td",p2e,K(De.quantity),1),v("td",g2e,K($e(Ar)($e(C)(De))),1)]))),128))])]),_:1}),l(Pe,{class:"mb-3"}),l(X,{"no-gutters":""},{default:u(()=>[l(z,{cols:"8",class:"text-right"},{default:u(()=>[N[20]||(N[20]=v("div",{class:"text-body-2 mb-1"},"Subtotal:",-1)),N[21]||(N[21]=v("div",{class:"text-body-2 mb-1"},"Line Discounts:",-1)),m.value.additionalDiscount>0?(U(),me("div",y2e,"Additional Discount:")):ge("",!0),N[22]||(N[22]=v("div",{class:"text-subtitle-1 font-weight-bold"},"Grand Total:",-1))]),_:1}),l(z,{cols:"4",class:"text-right"},{default:u(()=>[v("div",_2e,K($e(Ar)($e(k))),1),v("div",w2e,"-"+K($e(Ar)($e(S))),1),m.value.additionalDiscount>0?(U(),me("div",b2e,"-"+K($e(Ar)(m.value.additionalDiscount)),1)):ge("",!0),v("div",x2e,K($e(Ar)($e(E))),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(ce,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(Z,{class:"pb-2"},{default:u(()=>[N[32]||(N[32]=v("div",{class:"text-subtitle-1 mb-3"},"Payment Information",-1)),l(X,{"no-gutters":"",class:"mb-3"},{default:u(()=>[l(z,{cols:"4"},{default:u(()=>[N[24]||(N[24]=v("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Total Amount",-1)),v("div",C2e,K($e(Ar)($e(E))),1)]),_:1}),l(z,{cols:"4"},{default:u(()=>[N[25]||(N[25]=v("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Paid Amount",-1)),v("div",S2e,K($e(Ar)(D.value)),1)]),_:1}),l(z,{cols:"4"},{default:u(()=>[N[26]||(N[26]=v("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Balance Due",-1)),v("div",{class:ct(["text-h6",P.value>0?"text-error":"text-success"])},K($e(Ar)(P.value)),3)]),_:1})]),_:1}),d.value?(U(),me("div",E2e,[l(de,{indeterminate:"",size:"32",color:"primary"}),N[27]||(N[27]=v("div",{class:"text-body-2 mt-2"},"Loading payments...",-1))])):h.value&&h.value.length>0?(U(),me(We,{key:1},[l(Pe,{class:"mb-3"}),N[29]||(N[29]=v("div",{class:"text-subtitle-2 mb-2"},"Payment History",-1)),l(Se,{density:"compact"},{default:u(()=>[N[28]||(N[28]=v("thead",null,[v("tr",null,[v("th",{class:"text-left"},"Date"),v("th",{class:"text-left"},"Mode"),v("th",{class:"text-right"},"Amount"),v("th",{class:"text-right"},"Created")])],-1)),v("tbody",null,[(U(!0),me(We,null,qt(h.value,De=>(U(),me("tr",{key:De.id},[v("td",B2e,K(J(De.paymentDate)),1),v("td",k2e,K(De.mode),1),v("td",T2e,K($e(Ar)(De.amount)),1),v("td",I2e,K(ue(De.createdAt)),1)]))),128))])]),_:1})],64)):(U(),me(We,{key:2},[l(Pe,{class:"mb-3"}),v("div",F2e,[l(q,{size:"48",color:"outline",class:"mb-2"},{default:u(()=>[...N[30]||(N[30]=[M("mdi-currency-inr",-1)])]),_:1}),N[31]||(N[31]=v("div",{class:"text-body-2 text-medium-emphasis"},"No payments recorded",-1))])],64))]),_:1})]),_:1}),l(ce,{flat:"",color:"surfaceContainerHigh",class:"card-enhanced"},{default:u(()=>[l(Z,{class:"d-flex justify-center gap-3 pb-2"},{default:u(()=>[l(Q,{color:"secondary",variant:"outlined",onClick:ne,"prepend-icon":"mdi-pencil",class:"btn-hover-base"},{default:u(()=>[...N[33]||(N[33]=[M(" Edit Receipt ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})):ge("",!0)]),_:1}),l(Ce,{value:"share",class:"h-100"},{default:u(()=>[l(X,{"no-gutters":"",class:"h-100"},{default:u(()=>[l(z,{cols:"12"},{default:u(()=>[l(yh,{"content-type":"receipt",data:{consultation:O.value,printConfigurations:y.value,doctor:i.value},patient:{name:m.value?.patientName,patientName:m.value?.patientName,patientId:m.value?.patientId,contactNumber:m.value?.patientContactNumber},onPdfGenerated:Y},null,8,["data","patient"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}}},gH=Xt(P2e,[["__scopeId","data-v-2cbfd0d5"]]),yH=async e=>{try{if(!e)throw new Error("Doctor ID is required");return{data:(await dt.get(`/billreceipt/next-identifier/${e}`)).data.data,error:null}}catch(t){return console.error("Error getting next bill identifier:",t),t.response?.status===400&&t.response?.data?.error?.includes("No bill series found")?{data:null,error:{message:"No bill series found. Please create a bill series first in Admin Settings.",needsSeries:!0}}:{data:null,error:t}}},_H=async e=>{try{if(!e.doctorId||!e.appointmentId||!e.services)throw new Error("Doctor ID, Appointment ID, and services are required");if(!Array.isArray(e.services)||e.services.length===0)throw new Error("At least one service is required");return{data:(await dt.post("/billreceipt/with-services",e)).data.data,error:null}}catch(t){return console.error("Error creating bill with services:",t),{data:null,error:t}}},_T=async e=>{try{if(!e)throw new Error("Bill ID is required");return{data:(await dt.get(`/billreceipt/${e}/with-services`)).data.data,error:null}}catch(t){return console.error("Error getting bill with services:",t),{data:null,error:t}}},wH=async(e,t)=>{try{if(!e)throw new Error("Bill ID is required");if(!t.services||!Array.isArray(t.services)||t.services.length===0)throw new Error("At least one service is required");return{data:(await dt.put(`/billreceipt/${e}/with-services`,t)).data.data,error:null}}catch(n){return console.error("Error updating bill with services:",n),{data:null,error:n}}},TE=async(e,t,n,a=null)=>{try{const r=e.state.doctorModule?.doctorId;if(!r)throw new Error("No doctor selected. Please select a doctor first.");return console.log("Fetching bills for date range:",{startDate:t,endDate:n,doctorId:r,treatmentPlanId:a}),await bH(t,n,r,a)}catch(r){return console.error("Error fetching bills for date range:",r),{success:!1,error:{message:r.message||"Failed to fetch bills for date range",status:500}}}},bH=async(e,t,n=null,a=null)=>{try{console.log("Fetching bills for date range with filters:",{startDate:e,endDate:t,doctorId:n,treatmentPlanId:a});const r=new URLSearchParams;e&&r.append("startDate",e),t&&r.append("endDate",t),n&&r.append("doctor_id",n.toString()),a&&r.append("treatmentPlanId",a.toString());const s=`/billreceipt/date-range?${r.toString()}`;return{success:!0,data:(await dt.get(s)).data.data,message:"Bills fetched successfully for date range"}}catch(r){return console.error("Error fetching bills for date range:",r),{success:!1,error:{message:r.response?.data?.error||r.message||"Failed to fetch bills for date range",status:r.response?.status||500}}}},wT=async e=>{try{if(!e)throw new Error("Bill ID is required");return console.log("Fetching payment receipts for bill ID:",e),{success:!0,data:(await dt.get("/paymentreceipt",{params:{bill_id:e}})).data.data||[],message:"Payment receipts fetched successfully"}}catch(t){return console.error("Error fetching payment receipts for bill:",t),{success:!1,error:{message:t.response?.data?.error||t.message||"Failed to fetch payment receipts",status:t.response?.status||500}}}},Zn=e=>!e&&e!==0?"0":`${Number(e).toLocaleString("en-IN")}`,D2e=Object.freeze(Object.defineProperty({__proto__:null,createBillWithServices:_H,fetchAllBillsForDateRange:bH,fetchBillsForDateRange:TE,formatBillAmount:Zn,getBillWithServices:_T,getNextBillIdentifier:yH,getReceiptsByBill:wT,updateBillWithServices:wH},Symbol.toStringTag,{value:"Module"}));function bT(e,t){const n=y=>{const g=parseFloat(y.baseCost)||0,w=parseInt(y.quantity)||1,b=parseFloat(y.gstPercent)||0,x=parseFloat(y.discountAmount)||0,T=g*w,F=x*w,k=Math.max(0,T-F),S=b>0?Math.round(k*b/(100+b)):0,E=k-S,C=k;return{baseAmount:T,gstAmount:S,gstExclusiveAmount:E,subtotalWithGST:C,discountAmount:F,total:C}},a=ae(()=>e.value.map(y=>({...y,...n(y)}))),r=ae(()=>e.value.reduce((y,g)=>{const w=parseFloat(g.baseCost)||0,b=parseInt(g.quantity)||1;return y+w*b},0)),s=ae(()=>e.value.reduce((y,g)=>{const w=parseFloat(g.baseCost)||0,b=parseInt(g.quantity)||1,x=parseFloat(g.gstPercent)||0,T=parseFloat(g.discountAmount)||0,F=w*b,k=T*b,S=Math.max(0,F-k),E=x>0?Math.round(S*x/(100+x)):0;return y+E},0)),o=ae(()=>e.value.reduce((y,g)=>{const w=n(g).total;return y+w},0)),i=ae(()=>e.value.reduce((y,g)=>{const w=parseFloat(g.discountAmount)||0,b=parseInt(g.quantity)||1;return y+w*b},0)),c=ae(()=>e.value.reduce((y,g)=>{const w=n(g);return y+(w.gstExclusiveAmount||0)},0)),A=ae(()=>{const y=i.value,g=parseFloat(t.value)||0;return y+g}),d=ae(()=>{const y=o.value,g=parseFloat(t.value)||0;return Math.max(0,y-g)}),f=ae(()=>e.value.some(y=>y.serviceDescription&&y.serviceDescription.trim().length>0&&parseFloat(y.baseCost)>0)),m=ae(()=>{const y={};return e.value.forEach(g=>{const w=parseFloat(g.gstPercent)||0;if(w>0){y[w]||(y[w]={rate:w,baseAmount:0,gstAmount:0});const b=parseFloat(g.baseCost)||0,x=parseInt(g.quantity)||1,T=parseFloat(g.discountAmount)||0,F=b*x,k=T*x,S=Math.max(0,F-k),E=Math.round(S*w/(100+w)),C=S-E;y[w].baseAmount+=C,y[w].gstAmount+=E}}),Object.values(y)}),h=y=>n(y),p=ae(()=>r.value===0?0:s.value/r.value*100);return{servicesWithTotals:a,baseSubtotal:r,totalGSTAmount:s,subtotalWithGST:o,totalLineDiscount:i,totalTaxableValue:c,totalAllDiscounts:A,finalGrandTotal:d,gstBreakdown:m,effectiveTaxRate:p,hasValidService:f,calculateServiceTotal:n,getServiceGSTDetails:h}}const U2e={class:"pa-1"},R2e={class:"text-body-1 font-weight-medium"},N2e={class:"text-body-2 text-medium-emphasis"},V2e={class:"pa-1"},L2e={class:"text-body-1 font-weight-medium"},M2e={class:"text-body-2 text-medium-emphasis"},O2e={class:"pa-1"},H2e={class:"text-body-2 text-medium-emphasis"},$2e={class:"d-flex flex-column py-1"},Q2e={class:"text-body-2 font-weight-medium"},G2e={class:"text-caption text-medium-emphasis"},z2e={key:0},K2e={class:"text-caption"},W2e={key:0,class:"ml-2"},j2e={key:0,class:"text-left",style:{width:"100px"}},q2e={key:0},Y2e={class:"text-body-2 font-weight-medium"},X2e={class:"text-body-2 font-weight-medium"},J2e={class:"text-body-2 font-weight-medium"},Z2e={key:0,class:"text-body-2 mb-1"},ewe={key:1,class:"text-body-2 mb-1"},twe={key:2,class:"text-body-2 mb-1"},nwe={key:3,class:"text-body-2 mb-1"},awe={key:0,class:"text-body-2 mb-1"},rwe={key:1,class:"text-body-2 mb-1"},swe={key:2,class:"text-body-2 mb-1"},owe={class:"text-body-2 mb-1"},iwe={class:"text-body-2 mb-1"},lwe={key:3,class:"text-body-2 mb-1"},uwe={class:"text-subtitle-1 font-weight-bold"},cwe={class:"text-body-2 mb-1"},dwe={class:"text-body-2 mb-1"},Awe={__name:"bill-receipt-create",props:{appointment:{type:Object,required:!0}},emits:["close","billCreated","view-bill"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ra(),o=Rn(),i=ae(()=>o.state.doctorModule.doctorId),c=ae(()=>o.getters["doctorModule/currentDoctor"]),A=ae(()=>c.value?.doctorName||"Unknown Doctor"),d=ae(()=>c.value?.isGST||!1),f=V({patientName:n.appointment?.patient_name||"",patientId:n.appointment?.patientId||"",appointmentDate:n.appointment?.appointmentDate||"",billDate:Un(),appointmentId:n.appointment?.id||null,doctorId:i.value,additionalDiscount:0}),m=V([{serviceDescription:"",hsnSacCode:"",baseCost:null,gstPercent:0,quantity:1,discountAmount:0,isFromHistory:!1}]),h=V(!1),p=V(null),y=V([]),g=V(!1);ae(()=>p.value?y.value.find(Z=>Z.id===p.value):null);const w=V(!1),b=hh,x=V([{amount:null,mode:"Cash",paymentDate:Un(),datePickerMenu:!1}]);V(!1);const T=bT(m,ae(()=>f.value.additionalDiscount)),{servicesWithTotals:F,baseSubtotal:k,totalGSTAmount:S,subtotalWithGST:E,totalLineDiscount:C,totalTaxableValue:D,totalAllDiscounts:P,finalGrandTotal:O,hasValidService:H,gstBreakdown:ie,calculateServiceTotal:Ae}=T,j=ae(()=>m.value.some(Z=>(parseFloat(Z.discountAmount)||0)>0)),J=()=>{m.value.push({serviceDescription:"",hsnSacCode:"",baseCost:null,gstPercent:0,quantity:1,discountAmount:0,isFromHistory:!1})},ue=Z=>{m.value.length>1?m.value.splice(Z,1):s("At least one service is required")},ne=(Z,ce)=>{m.value[Z]&&(m.value[Z].serviceDescription=ce)},Y=(Z,ce)=>{console.log("Service selected:",ce),ce&&typeof ce=="object"&&!ce.isUserTyped?(m.value[Z]={...m.value[Z],serviceDescription:ce.serviceDescription,hsnSacCode:ce.hsnSacCode||"",baseCost:ce.baseCost||0,gstPercent:ce.gstPercent||ce.gstRate||0,isFromHistory:!1},console.log("Updated service with baseCost:",m.value[Z].baseCost,"and GST%:",m.value[Z].gstPercent,"and HSN/SAC:",m.value[Z].hsnSacCode)):ce===null&&(m.value[Z]={...m.value[Z],serviceDescription:"",hsnSacCode:"",baseCost:0,gstPercent:0,isFromHistory:!1})},te=ae(()=>{const Z=H.value,ce=f.value.doctorId&&f.value.appointmentId;return console.log("Bill validation check:",{hasValidService:Z,hasValidAppointment:ce,billData:f.value}),Z&&ce}),L=async()=>{if(!f.value.patientId||!f.value.doctorId){console.log("Missing patient or doctor ID for loading treatment plans");return}g.value=!0;try{console.log("Loading treatment plans for patient:",f.value.patientId,"doctor:",f.value.doctorId);const Z=await kg(f.value.patientId,f.value.doctorId);if(Z.error)throw new Error(Z.error.message||"Failed to load treatment plans");y.value=Z.data||[],console.log("Loaded treatment plans:",y.value.length)}catch(Z){console.error("Error loading treatment plans:",Z),s("Failed to load treatment plans: "+(Z.message||"Unknown error")),y.value=[]}finally{g.value=!1}},N=ae(()=>x.value.reduce((Z,ce)=>Z+(parseFloat(ce.amount)||0),0)),q=ae(()=>O.value-N.value),Q=Z=>{if(!Z)return"";try{return new Date(Z).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return Z}},ee=()=>{x.value.push({amount:null,mode:"Cash",paymentDate:Un(),datePickerMenu:!1})},z=Z=>{x.value.length>1?x.value.splice(Z,1):x.value[0]={amount:null,mode:"Cash",paymentDate:Un(),datePickerMenu:!1}},X=Z=>{if(!Z)return null;try{if(typeof Z=="string")return Z.includes("T")?Z.split("T")[0]:Z;if(Z instanceof Date){const ce=Z.getFullYear(),Se=String(Z.getMonth()+1).padStart(2,"0"),Pe=String(Z.getDate()).padStart(2,"0");return`${ce}-${Se}-${Pe}`}return null}catch(ce){return console.error("Error parsing payment date:",ce),null}},le=(Z,ce)=>{if(Z)if(Z instanceof Date){const Se=Z.getFullYear(),Pe=String(Z.getMonth()+1).padStart(2,"0"),ye=String(Z.getDate()).padStart(2,"0");ce.paymentDate=`${Se}-${Pe}-${ye}`}else typeof Z=="string"&&(ce.paymentDate=Z);else ce.paymentDate="";ce.datePickerMenu=!1},re=async()=>{if(!te.value){s("Please fill in all required fields and add at least one valid service");return}w.value=!0;try{const{data:Z,error:ce}=await yH(f.value.doctorId);if(ce){if(ce.needsSeries){s("No bill series found. Please create a bill series first in Admin Settings  GST Bill Series Configuration.");return}throw new Error(ce.message||"Failed to get next bill identifier")}console.log("Next bill identifier:",Z);const Se={doctorId:f.value.doctorId,appointmentId:f.value.appointmentId,billDate:f.value.billDate,additionalDiscount:f.value.additionalDiscount||0,treatmentPlanId:h.value?p.value:null,services:m.value.map(_e=>({serviceDescription:_e.serviceDescription,hsnSacCode:_e.hsnSacCode||"",baseCost:_e.baseCost,gstPercent:_e.gstPercent||0,quantity:_e.quantity||1,discountAmount:_e.discountAmount||0}))};console.log("Creating bill with data:",Se);const{data:Pe,error:ye}=await _H(Se);if(ye)throw new Error(ye.message||"Failed to create bill");console.log("Bill created successfully:",Pe),x.value.some(_e=>_e.amount&&parseFloat(_e.amount)>0&&_e.mode&&_e.paymentDate)&&await de(Pe.id),r("Bill created successfully!"),a("billCreated",Pe),a("view-bill",Pe.id)}catch(Z){console.error("Error generating bill:",Z),s("Failed to generate bill. Please try again.")}finally{w.value=!1}},de=async Z=>{try{console.log("Creating payment receipt for bill:",Z);const ce={doctorId:f.value.doctorId,appointmentId:f.value.appointmentId,billId:Z,paymentReceiptDate:Un(),additionalDiscount:0,isThreeC:!0,treatmentPlanId:h.value?p.value:null};console.log("Creating payment receipt with payload:",ce);const Se=await jM(ce);if(Se.error){console.error("Error creating payment receipt:",Se.error),s("Bill created but failed to create payment receipt: "+Se.error.message);return}const Pe=Se.data.id;console.log("Payment receipt created:",Pe);const ye=x.value.filter(Ce=>Ce.amount&&parseFloat(Ce.amount)>0&&Ce.mode&&Ce.paymentDate);console.log("Creating payments:",ye);for(const Ce of ye){const _e={amount:Number(Ce.amount),mode:Ce.mode,paymentDate:Ce.paymentDate,paymentReceiptId:Pe,appointmentId:f.value.appointmentId};console.log("Creating payment with payload:",_e);const De=await vh(_e);De.success?console.log("Payment created successfully:",De.data):(console.error("Error creating payment:",De.error),s(`Failed to create payment: ${De.error?.message||"Unknown error"}`))}x.value=[{amount:null,mode:"Cash",paymentDate:Un()}],r("Payment receipt and payments created successfully!")}catch(ce){console.error("Error creating payment receipt and payments:",ce),s("Bill created but failed to create payments: "+(ce.message||"Unknown error"))}},G=()=>{w.value=!1,m.value=[{serviceDescription:"",hsnSacCode:"",baseCost:null,gstPercent:0,quantity:1,discountAmount:0,isFromHistory:!1}],f.value={patientName:n.appointment?.patient_name||"",patientId:n.appointment?.patientId||"",appointmentDate:n.appointment?.appointmentDate||"",billDate:Un(),appointmentId:n.appointment?.id||null,doctorId:i.value,additionalDiscount:0},x.value=[{amount:null,mode:"Cash",paymentDate:Un(),datePickerMenu:!1}],h.value=!1,p.value=null,y.value=[],g.value=!1,a("close")};return Ke(h,Z=>{Z&&y.value.length===0?L():Z||(p.value=null)}),(Z,ce)=>{const Se=I("v-icon"),Pe=I("v-btn"),ye=I("v-card-title"),Ce=I("v-col"),_e=I("v-row"),De=I("v-label"),xe=I("v-card-text"),Te=I("v-card"),Me=I("v-switch"),et=I("v-list-item"),lt=I("v-select"),Re=I("v-text-field"),Le=I("v-table"),nt=I("v-divider"),Tt=I("v-date-picker"),Pt=I("v-menu"),Kt=I("v-container");return U(),pe(Te,{rounded:"lg",color:"surfaceContainer",flat:"",ripple:!1},{default:u(()=>[l(_e,{"no-gutters":""},{default:u(()=>[l(Ce,{cols:"12"},{default:u(()=>[l(ye,{class:"d-flex align-center justify-space-between"},{default:u(()=>[ce[4]||(ce[4]=v("span",null,"Tax Invoice cum Bill of Supply - Generate",-1)),l(Pe,{onClick:G,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(Se,{size:"18"},{default:u(()=>[...ce[3]||(ce[3]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(_e,{"no-gutters":""},{default:u(()=>[l(Ce,{cols:"12",class:"scroll-element"},{default:u(()=>[l(Kt,{fluid:"",class:"pa-3"},{default:u(()=>[l(Te,{flat:"",color:"surfaceContainerHigh",class:"mb-4 card-enhanced"},{default:u(()=>[l(xe,{class:"pb-1 pt-2"},{default:u(()=>[l(_e,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(Ce,{cols:"4"},{default:u(()=>[v("div",U2e,[l(De,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...ce[5]||(ce[5]=[M("Patient Information",-1)])]),_:1}),v("div",R2e,K(f.value.patientName),1),v("div",N2e,"ID: "+K(f.value.patientId),1)])]),_:1}),l(Ce,{cols:"4"},{default:u(()=>[v("div",V2e,[l(De,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...ce[6]||(ce[6]=[M("Appointment Details",-1)])]),_:1}),v("div",L2e,"Dr. "+K(A.value),1),v("div",M2e,"Date: "+K(Q(f.value.appointmentDate)),1)])]),_:1}),l(Ce,{cols:"4"},{default:u(()=>[v("div",O2e,[l(De,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...ce[7]||(ce[7]=[M("Tax Invoice cum Bill of Supply Information",-1)])]),_:1}),ce[8]||(ce[8]=v("div",{class:"text-body-1 font-weight-medium"},"New Bill",-1)),v("div",H2e,"Date: "+K(Q(f.value.billDate)),1)])]),_:1})]),_:1})]),_:1})]),_:1}),l(Te,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(xe,{class:"pb-2"},{default:u(()=>[l(_e,{"no-gutters":"",align:"center",class:"mb-3"},{default:u(()=>[l(Ce,{cols:"2",class:"d-flex align-center"},{default:u(()=>[...ce[9]||(ce[9]=[v("div",{class:"text-subtitle-1"},"Treatment Plan",-1)])]),_:1}),l(Ce,{cols:"3",class:"d-flex align-center"},{default:u(()=>[l(Me,{modelValue:h.value,"onUpdate:modelValue":ce[0]||(ce[0]=$t=>h.value=$t),label:"Link to treatment plan",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),h.value?(U(),pe(Ce,{key:0,cols:"7"},{default:u(()=>[l(lt,{modelValue:p.value,"onUpdate:modelValue":ce[1]||(ce[1]=$t=>p.value=$t),items:y.value,"item-title":"treatmentPlanName","item-value":"id",label:"Select Treatment Plan",variant:"outlined",density:"compact",loading:g.value,disabled:g.value,clearable:"","hide-details":""},{selection:u(({item:$t})=>[v("div",$2e,[v("div",Q2e,K($t.raw.treatmentPlanName),1),v("div",G2e,[M(" Status: "+K($t.raw.status)+"  Created: "+K(Q($t.raw.createdAt))+" ",1),$t.raw.notes?(U(),me("span",z2e,"  "+K($t.raw.notes.substring(0,30))+"...",1)):ge("",!0)])])]),item:u(({props:$t,item:bt})=>[l(et,eu(nu($t)),{title:u(()=>[M(K(bt.raw.treatmentPlanName),1)]),subtitle:u(()=>[v("div",K2e,[M(" Status: "+K(bt.raw.status)+"  Created: "+K(Q(bt.raw.createdAt))+" ",1),bt.raw.notes?(U(),me("span",W2e," "+K(bt.raw.notes.substring(0,50))+"...",1)):ge("",!0)])]),_:2},1040)]),_:1},8,["modelValue","items","loading","disabled"])]),_:1})):ge("",!0)]),_:1})]),_:1})]),_:1}),l(Te,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(xe,{class:"pb-2"},{default:u(()=>[ce[25]||(ce[25]=v("div",{class:"text-subtitle-1 mb-3"},"Goods and Services Information",-1)),l(Le,{density:"compact",class:"mb-3"},{default:u(()=>[v("thead",null,[v("tr",null,[ce[10]||(ce[10]=v("th",{class:"text-left",style:{width:"60px"}},"Sr. No",-1)),ce[11]||(ce[11]=v("th",{class:"text-left",style:{width:"200px"}},"Description",-1)),d.value?(U(),me("th",j2e,"HSN/SAC Code")):ge("",!0),ce[12]||(ce[12]=v("th",{class:"text-left",style:{width:"120px"}},"Base Cost per unit (incl. GST)",-1)),ce[13]||(ce[13]=v("th",{class:"text-left",style:{width:"110px"}},"Discount per unit",-1)),ce[14]||(ce[14]=v("th",{class:"text-left",style:{width:"100px"}},"GST %",-1)),ce[15]||(ce[15]=v("th",{class:"text-left",style:{width:"120px"}},"Taxable Value",-1)),ce[16]||(ce[16]=v("th",{class:"text-left",style:{width:"100px"}},"GST Amount",-1)),ce[17]||(ce[17]=v("th",{class:"text-left",style:{width:"70px"}},"Quantity",-1)),ce[18]||(ce[18]=v("th",{class:"text-left",style:{width:"120px"}},"Total",-1)),ce[19]||(ce[19]=v("th",{class:"text-left",style:{width:"80px"}},"Actions",-1))])]),v("tbody",null,[(U(!0),me(We,null,qt($e(F),($t,bt)=>(U(),me("tr",{key:bt},[v("td",null,K(bt+1),1),v("td",null,[l(Cw,{"model-value":$t.serviceDescription,"onUpdate:modelValue":st=>ne(bt,st),onServiceSelected:st=>Y(bt,st),"doctor-id":i.value,density:"compact"},null,8,["model-value","onUpdate:modelValue","onServiceSelected","doctor-id"])]),d.value?(U(),me("td",q2e,[l(Re,{modelValue:m.value[bt].hsnSacCode,"onUpdate:modelValue":st=>m.value[bt].hsnSacCode=st,density:"compact",variant:"underlined","hide-details":"",placeholder:"HSN/SAC"},null,8,["modelValue","onUpdate:modelValue"])])):ge("",!0),v("td",null,[l(Re,{modelValue:m.value[bt].baseCost,"onUpdate:modelValue":st=>m.value[bt].baseCost=st,modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"underlined","hide-details":"",min:"0",step:"1"},null,8,["modelValue","onUpdate:modelValue"])]),v("td",null,[l(Re,{modelValue:m.value[bt].discountAmount,"onUpdate:modelValue":st=>m.value[bt].discountAmount=st,modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"underlined","hide-details":"",min:"0",step:"1"},null,8,["modelValue","onUpdate:modelValue"])]),v("td",null,[l(Re,{modelValue:m.value[bt].gstPercent,"onUpdate:modelValue":st=>m.value[bt].gstPercent=st,modelModifiers:{number:!0},type:"number",suffix:"%",density:"compact",variant:"underlined","hide-details":"",min:"0",max:"100",step:"0.1"},null,8,["modelValue","onUpdate:modelValue"])]),v("td",null,[v("div",Y2e,K($e(Zn)($e(Ae)(m.value[bt]).gstExclusiveAmount||0)),1)]),v("td",null,[v("div",X2e,K($e(Zn)($e(Ae)(m.value[bt]).gstAmount||0)),1)]),v("td",null,[l(Re,{modelValue:m.value[bt].quantity,"onUpdate:modelValue":st=>m.value[bt].quantity=st,modelModifiers:{number:!0},type:"number",density:"compact",variant:"underlined","hide-details":"",min:"1",step:"1"},null,8,["modelValue","onUpdate:modelValue"])]),v("td",null,[v("div",J2e,K($e(Zn)($e(Ae)(m.value[bt]).total||0)),1)]),v("td",null,[l(Pe,{icon:"",size:"small",color:"error",variant:"text",onClick:st=>ue(bt)},{default:u(()=>[l(Se,null,{default:u(()=>[...ce[20]||(ce[20]=[M("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])]))),128))])]),_:1}),l(_e,{"no-gutters":"",class:"align-center"},{default:u(()=>[l(Ce,{cols:"auto"},{default:u(()=>[l(Pe,{variant:"outlined",color:"primary",onClick:J,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...ce[21]||(ce[21]=[M(" Add Service ",-1)])]),_:1})]),_:1}),l(Ce),l(Ce,{cols:"3"},{default:u(()=>[l(Re,{label:"Additional Discount",modelValue:f.value.additionalDiscount,"onUpdate:modelValue":ce[2]||(ce[2]=$t=>f.value.additionalDiscount=$t),modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),l(nt,{class:"mb-3"}),l(_e,{"no-gutters":""},{default:u(()=>[l(Ce,{cols:"8",class:"text-right"},{default:u(()=>[j.value?(U(),me("div",Z2e,"Base Cost Total (incl. GST):")):ge("",!0),j.value?(U(),me("div",ewe,"Line Item Discounts:")):ge("",!0),j.value?(U(),me("div",twe,"Subtotal after Discounts (incl. GST):")):ge("",!0),ce[22]||(ce[22]=v("div",{class:"text-body-2 mb-1"},"Taxable Value Total:",-1)),ce[23]||(ce[23]=v("div",{class:"text-body-2 mb-1"},"GST Amount:",-1)),f.value.additionalDiscount>0?(U(),me("div",nwe,"Additional Discount:")):ge("",!0),ce[24]||(ce[24]=v("div",{class:"text-subtitle-1 font-weight-bold"},"Grand Total (incl. GST):",-1))]),_:1}),l(Ce,{cols:"4",class:"text-right"},{default:u(()=>[j.value?(U(),me("div",awe,K($e(Zn)($e(k))),1)):ge("",!0),j.value?(U(),me("div",rwe,"-"+K($e(Zn)($e(C))),1)):ge("",!0),j.value?(U(),me("div",swe,K($e(Zn)($e(k)-$e(C))),1)):ge("",!0),v("div",owe,K($e(Zn)($e(D))),1),v("div",iwe,K($e(Zn)($e(S))),1),f.value.additionalDiscount>0?(U(),me("div",lwe,"-"+K($e(Zn)(f.value.additionalDiscount)),1)):ge("",!0),v("div",uwe,K($e(Zn)($e(O))),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(Te,{flat:"",class:"mb-3 card-enhanced",color:"surfaceContainerHigh"},{default:u(()=>[l(xe,{class:"pb-2"},{default:u(()=>[ce[30]||(ce[30]=v("div",{class:"text-subtitle-1 mb-3"},"Payment Information",-1)),l(Le,{density:"compact",class:"mb-3"},{default:u(()=>[ce[28]||(ce[28]=v("thead",null,[v("tr",null,[v("th",{class:"text-left",style:{width:"60px"}},"Sr. No"),v("th",{class:"text-left",style:{width:"150px"}},"Amount ()"),v("th",{class:"text-left",style:{width:"120px"}},"Payment Mode"),v("th",{class:"text-left",style:{width:"150px"}},"Payment Date"),v("th",{class:"text-left",style:{width:"80px"}},"Actions")])],-1)),v("tbody",null,[(U(!0),me(We,null,qt(x.value,($t,bt)=>(U(),me("tr",{key:bt},[v("td",null,K(bt+1),1),v("td",null,[l(Re,{modelValue:$t.amount,"onUpdate:modelValue":st=>$t.amount=st,modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"underlined","hide-details":"",min:"0",step:"1"},null,8,["modelValue","onUpdate:modelValue"])]),v("td",null,[l(lt,{modelValue:$t.mode,"onUpdate:modelValue":st=>$t.mode=st,items:$e(b),density:"compact",variant:"underlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),v("td",null,[l(Pt,{modelValue:$t.datePickerMenu,"onUpdate:modelValue":st=>$t.datePickerMenu=st,"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},{activator:u(({props:st})=>[l(Re,Ue({modelValue:$t.paymentDate,"onUpdate:modelValue":Je=>$t.paymentDate=Je,density:"compact",variant:"underlined","hide-details":"",readonly:""},{ref_for:!0},st),{"append-inner":u(()=>[l(Se,{class:"text-medium-emphasis"},{default:u(()=>[...ce[26]||(ce[26]=[M("mdi-calendar",-1)])]),_:1})]),_:1},16,["modelValue","onUpdate:modelValue"])]),default:u(()=>[l(Tt,{"model-value":X($t.paymentDate),"onUpdate:modelValue":st=>le(st,$t),color:"primary",locale:"en-IN"},null,8,["model-value","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),v("td",null,[l(Pe,{icon:"",size:"small",color:"error",variant:"text",onClick:st=>z(bt)},{default:u(()=>[l(Se,null,{default:u(()=>[...ce[27]||(ce[27]=[M("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])]))),128))])]),_:1}),l(_e,{"no-gutters":"",class:"align-center"},{default:u(()=>[l(Ce,{cols:"auto"},{default:u(()=>[l(Pe,{variant:"outlined",color:"secondary",onClick:ee,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...ce[29]||(ce[29]=[M(" Add Payment ",-1)])]),_:1})]),_:1}),l(Ce),l(Ce,{cols:"4",class:"text-right"},{default:u(()=>[v("div",cwe,"Bill Total: "+K($e(Zn)($e(O))),1),v("div",dwe,"Total Payments: "+K($e(Zn)(N.value)),1),v("div",{class:ct(["text-subtitle-1 font-weight-bold",q.value>=0?"text-success":"text-error"])}," Balance: "+K($e(Zn)(q.value)),3)]),_:1})]),_:1})]),_:1})]),_:1}),l(Te,{flat:"",color:"surfaceContainerHigh",class:"card-enhanced"},{default:u(()=>[l(xe,{class:"d-flex justify-center pb-2"},{default:u(()=>[l(Pe,{color:"primary",onClick:re,disabled:!te.value||w.value,loading:w.value,"prepend-icon":"mdi-receipt",class:"btn-hover-base"},{default:u(()=>[...ce[31]||(ce[31]=[M(" Generate Bill ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},fwe=Xt(Awe,[["__scopeId","data-v-2a9d4242"]]),mwe={class:"text-center"},vwe={class:"text-center"},hwe={class:"text-body-2 text-medium-emphasis mb-4"},pwe={class:"pa-1"},gwe={class:"text-body-1 font-weight-medium"},ywe={class:"text-body-2 text-medium-emphasis"},_we={class:"pa-1"},wwe={class:"text-body-1 font-weight-medium"},bwe={class:"text-body-2 text-medium-emphasis"},xwe={class:"pa-1"},Cwe={class:"text-body-1 font-weight-medium"},Swe={class:"text-body-2 text-medium-emphasis"},Ewe={key:0,class:"text-body-2 text-medium-emphasis"},Bwe={key:0,class:"d-flex align-center"},kwe={key:1,class:"text-body-2 text-error"},Twe={key:2,class:"d-flex flex-column"},Iwe={class:"text-body-2 font-weight-medium"},Fwe={class:"text-caption text-medium-emphasis"},Pwe={key:0},Dwe={key:1},Uwe={key:0,class:"text-caption text-medium-emphasis mt-1"},Rwe={key:0},Nwe={key:0,class:"text-left"},Vwe={key:1,class:"text-right"},Lwe={class:"text-left"},Mwe={class:"text-left"},Owe={key:0,class:"text-left"},Hwe={class:"text-right"},$we={key:1,class:"text-right"},Qwe={class:"text-center"},Gwe={class:"text-right"},zwe={class:"text-right"},Kwe={class:"text-center"},Wwe={class:"text-right"},jwe={key:0,class:"text-body-2 mb-1"},qwe={key:1,class:"text-body-2 mb-1"},Ywe={key:2,class:"text-body-2 mb-1"},Xwe={key:3,class:"text-body-2 mb-1"},Jwe={key:0,class:"text-body-2 mb-1"},Zwe={key:1,class:"text-body-2 mb-1"},ebe={key:2,class:"text-body-2 mb-1"},tbe={class:"text-body-2 mb-1"},nbe={class:"text-body-2 mb-1"},abe={key:3,class:"text-body-2 mb-1"},rbe={class:"text-subtitle-1 font-weight-bold"},sbe={key:0,class:"text-center pa-4"},obe={key:1,class:"text-center pa-4"},ibe={class:"text-body-2 text-error"},lbe={class:"text-body-1 font-weight-medium"},ube={class:"text-caption text-medium-emphasis"},cbe={class:"text-h6"},dbe={class:"text-h6 text-success"},Abe={key:0,class:"text-center pa-4"},fbe={class:"text-left"},mbe={class:"text-left"},vbe={class:"text-right"},hbe={class:"text-center pa-4"},pbe={key:3,class:"text-center pa-4"},gbe={__name:"bill-receipt-view",props:{billId:{type:[String,Number],required:!0}},emits:["close","edit-bill"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ra(),o=Rn(),i=ae(()=>o.getters["doctorModule/currentDoctor"]),c=ae(()=>i.value?.doctorName||"Unknown Doctor"),A=ae(()=>i.value?.isGST||!1),d=V(!1),f=V(!1),m=V(!1),h=V(null),p=V(null),y=V(null),g=V(null),w=V([]),b=V("view"),x=V({}),T=V(null),F=V(null),k=V(!1),S=V(null),E=ae(()=>{if(!y.value?.services)return null;const le=V(y.value.services||[]),re=V(y.value.additionalDiscount||0);return bT(le,re)}),C=ae(()=>E.value?.baseSubtotal.value||0),D=ae(()=>E.value?.totalGSTAmount.value||0),P=ae(()=>E.value?.subtotalWithGST.value||0),O=ae(()=>E.value?.totalLineDiscount.value||0),H=ae(()=>E.value?.totalTaxableValue.value||0),ie=ae(()=>E.value?.finalGrandTotal.value||0),Ae=le=>E.value?E.value.calculateServiceTotal(le):{total:0,gstAmount:0},j=ae(()=>Array.isArray(w.value)?w.value.reduce((le,re)=>le+(parseFloat(re.amount)||0),0):0),J=ae(()=>Math.max(0,ie.value-j.value)),ue=ae(()=>y.value?.services?y.value.services.some(le=>(parseFloat(le.discountAmount)||0)>0):!1),ne=ae(()=>y.value?{patientName:y.value.patientName||"Unknown Patient",patientId:y.value.patientId||"N/A",patientAge:y.value.patientAge||y.value.age||"N/A",patientGender:y.value.patientGender||y.value.gender||"N/A",patientContactNumber:y.value.patientContactNumber,doctorName:c.value,billNumber:y.value.identifier,billDate:y.value.billDate,appointmentDate:y.value.appointmentDate,services:(y.value.services||[]).map(le=>{const re=Ae(le);return{...le,gstAmount:re.gstAmount,gstExclusiveAmount:re.gstExclusiveAmount,totalWithGst:re.total}}),baseSubtotal:C.value,totalGSTAmount:D.value,subtotalWithGST:P.value,totalLineDiscount:O.value,totalTaxableValue:H.value,additionalDiscount:parseFloat(y.value.additionalDiscount)||0,grandTotal:ie.value,associatedReceipt:g.value?{...g.value,balanceDue:J.value}:null,totalPaid:j.value,balanceDue:J.value,payments:(w.value||[]).map(le=>({...le,paymentDate:le.paymentDate?Q(le.paymentDate):"N/A",paymentMethod:le.mode||"N/A",amount:le.amount||0}))}:null),Y=async()=>{if(!n.billId){h.value="No bill ID provided";return}d.value=!0,h.value=null;try{console.log("Loading bill data for ID:",n.billId);const le=await _T(n.billId);if(le.error)throw new Error(le.error.message||"Failed to load bill");if(y.value=le.data,console.log("Bill data loaded:",y.value),y.value&&(!y.value.patientAge||!y.value.patientGender))try{const re=y.value.patientId;if(re&&o.getters["patientModule/getPatientById"]){const de=o.getters["patientModule/getPatientById"](re);de&&(y.value.patientAge=y.value.patientAge||de.age,y.value.patientGender=y.value.patientGender||de.gender)}}catch(re){console.warn("Could not fetch additional patient details:",re)}le.data.treatmentPlanId&&(T.value=le.data.treatmentPlanId,await te()),await L(),await q()}catch(le){console.error("Error loading bill data:",le),h.value=le.message||"Failed to load bill data",s(h.value)}finally{d.value=!1}},te=async()=>{if(!T.value){F.value=null;return}k.value=!0,S.value=null;try{console.log("Loading treatment plan data for ID:",T.value);const le=await Cf(T.value);if(le.error)throw new Error(le.error.message||"Failed to load treatment plan");F.value=le.data,console.log("Treatment plan data loaded:",F.value)}catch(le){console.error("Error loading treatment plan data:",le),S.value=le.message||"Failed to load treatment plan"}finally{k.value=!1}},L=async()=>{if(!n.billId){g.value=null;return}f.value=!0,p.value=null;try{console.log("Loading associated payment receipt for bill ID:",n.billId);const le=await wT(n.billId);le.success&&Array.isArray(le.data)&&le.data.length>0?(g.value=le.data[0],console.log("Associated payment receipt loaded:",g.value),await N()):(console.warn("No associated payment receipt found for bill:",n.billId),g.value=null)}catch(le){console.error("Error loading associated payment receipt:",le),p.value=le.message||"Failed to load payment information"}finally{f.value=!1}},N=async()=>{if(!g.value?.id){w.value=[];return}m.value=!0;try{console.log("Loading payments for receipt ID:",g.value.id);const le=await Bg(g.value.id);le.success&&Array.isArray(le.data)?(w.value=le.data,console.log("Payments loaded:",w.value)):(console.warn("No payments found or invalid response:",le),w.value=[])}catch(le){console.error("Error loading receipt payments:",le),w.value=[]}finally{m.value=!1}},q=async()=>{try{const le=o.state.doctorModule.doctorId;if(!le){console.warn("No doctor ID available for print configurations");return}const re=await gh(le);x.value=re.data||{},console.log("Print configurations fetched:",x.value)}catch(le){console.error("Error fetching print configs:",le),s("Failed to load print configurations")}},Q=le=>{if(!le)return"";try{return new Date(le).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return le}},ee=()=>{a("edit-bill",n.billId)},z=le=>{console.log("Bill PDF generated successfully:",le),r("Bill PDF generated successfully")},X=()=>{a("close")};return un(()=>{Y()}),(le,re)=>{const de=I("v-icon"),G=I("v-btn"),Z=I("v-card-title"),ce=I("v-col"),Se=I("v-row"),Pe=I("v-tab"),ye=I("v-tabs"),Ce=I("v-progress-circular"),_e=I("v-label"),De=I("v-card-text"),xe=I("v-card"),Te=I("v-table"),Me=I("v-divider"),et=I("v-container"),lt=I("v-tabs-window-item"),Re=I("v-tabs-window");return U(),pe(xe,{rounded:"lg",color:"surfaceContainer",flat:"",ripple:!1},{default:u(()=>[l(Se,{"no-gutters":""},{default:u(()=>[l(ce,{cols:"12"},{default:u(()=>[l(Z,{class:"d-flex align-center justify-space-between"},{default:u(()=>[re[3]||(re[3]=v("span",null,"Tax Invoice cum Bill of Supply - View",-1)),l(G,{onClick:X,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(de,{size:"18"},{default:u(()=>[...re[2]||(re[2]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(Se,{"no-gutters":""},{default:u(()=>[l(ce,{cols:"12"},{default:u(()=>[l(ye,{modelValue:b.value,"onUpdate:modelValue":re[0]||(re[0]=Le=>b.value=Le),color:"primary","bg-color":"surfaceContainerHigh","align-tabs":"start",class:"mx-3 mb-3"},{default:u(()=>[l(Pe,{value:"view"},{default:u(()=>[l(de,{start:""},{default:u(()=>[...re[4]||(re[4]=[M("mdi-eye",-1)])]),_:1}),re[5]||(re[5]=M(" View Bill ",-1))]),_:1}),l(Pe,{value:"share"},{default:u(()=>[l(de,{start:""},{default:u(()=>[...re[6]||(re[6]=[M("mdi-share-variant",-1)])]),_:1}),re[7]||(re[7]=M(" Share Bill ",-1))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(Se,{"no-gutters":""},{default:u(()=>[l(ce,{cols:"12",class:"scroll-element"},{default:u(()=>[l(Re,{modelValue:b.value,"onUpdate:modelValue":re[1]||(re[1]=Le=>b.value=Le)},{default:u(()=>[l(lt,{value:"view"},{default:u(()=>[d.value?(U(),pe(Se,{key:0,"no-gutters":""},{default:u(()=>[l(ce,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[v("div",mwe,[l(Ce,{indeterminate:"",color:"primary",size:"64"}),re[8]||(re[8]=v("div",{class:"mt-4 text-subtitle-1"},"Loading bill...",-1))])]),_:1})]),_:1})):h.value?(U(),pe(Se,{key:1,"no-gutters":""},{default:u(()=>[l(ce,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[v("div",vwe,[l(de,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...re[9]||(re[9]=[M("mdi-alert-circle",-1)])]),_:1}),re[11]||(re[11]=v("div",{class:"text-h6 mb-2"},"Failed to Load Bill",-1)),v("div",hwe,K(h.value),1),l(G,{color:"primary",onClick:Y,"prepend-icon":"mdi-refresh"},{default:u(()=>[...re[10]||(re[10]=[M(" Try Again ",-1)])]),_:1})])]),_:1})]),_:1})):y.value?(U(),pe(et,{key:2,fluid:"",class:"pa-3"},{default:u(()=>[l(xe,{flat:"",color:"surfaceContainerHigh",class:"mb-4 card-enhanced"},{default:u(()=>[l(De,{class:"pb-1 pt-2"},{default:u(()=>[l(Se,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(ce,{cols:"4"},{default:u(()=>[v("div",pwe,[l(_e,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...re[12]||(re[12]=[M("Patient Information",-1)])]),_:1}),v("div",gwe,K(y.value.patientName||"Unknown Patient"),1),v("div",ywe,"ID: "+K(y.value.patientId||"N/A"),1)])]),_:1}),l(ce,{cols:"4"},{default:u(()=>[v("div",_we,[l(_e,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...re[13]||(re[13]=[M("Appointment Details",-1)])]),_:1}),v("div",wwe,"Dr. "+K(c.value),1),v("div",bwe,"Date: "+K(Q(y.value.appointmentDate)),1)])]),_:1}),l(ce,{cols:"4"},{default:u(()=>[v("div",xwe,[l(_e,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...re[14]||(re[14]=[M("Tax Invoice cum Bill of Supply Information",-1)])]),_:1}),v("div",Cwe,K(y.value.identifier),1),v("div",Swe,"Date: "+K(Q(y.value.billDate)),1),i.value?.isGST&&i.value?.gstIdentifier?(U(),me("div",Ewe,"GST: "+K(i.value.gstIdentifier),1)):ge("",!0)])]),_:1})]),_:1})]),_:1})]),_:1}),T.value?(U(),pe(xe,{key:0,flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(De,{class:"pb-2"},{default:u(()=>[l(Se,{"no-gutters":"",align:"center",class:"mb-2"},{default:u(()=>[l(ce,{cols:"3",class:"d-flex align-center"},{default:u(()=>[...re[15]||(re[15]=[v("div",{class:"text-subtitle-1"},"Treatment Plan",-1)])]),_:1}),l(ce,{cols:"9"},{default:u(()=>[k.value?(U(),me("div",Bwe,[l(Ce,{indeterminate:"",size:"16",color:"primary",class:"mr-2"}),re[16]||(re[16]=v("span",{class:"text-body-2"},"Loading treatment plan...",-1))])):S.value?(U(),me("div",kwe,[l(de,{size:"16",class:"mr-1"},{default:u(()=>[...re[17]||(re[17]=[M("mdi-alert-circle",-1)])]),_:1}),M(" "+K(S.value),1)])):F.value?(U(),me("div",Twe,[v("div",Iwe,K(F.value.treatmentPlanName),1),v("div",Fwe,[M(" Status: "+K(F.value.status)+" ",1),F.value.startDate?(U(),me("span",Pwe,"  Start: "+K(Q(F.value.startDate)),1)):ge("",!0),F.value.endDate?(U(),me("span",Dwe,"  End: "+K(Q(F.value.endDate)),1)):ge("",!0)]),F.value.notes?(U(),me("div",Uwe,[re[18]||(re[18]=v("strong",null,"Notes:",-1)),M(" "+K(F.value.notes.substring(0,80)),1),F.value.notes.length>80?(U(),me("span",Rwe,"...")):ge("",!0)])):ge("",!0)])):ge("",!0)]),_:1})]),_:1})]),_:1})]),_:1})):ge("",!0),l(xe,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(De,{class:"pb-2"},{default:u(()=>[re[30]||(re[30]=v("div",{class:"text-subtitle-1 mb-3"},"Goods and Services Information",-1)),l(Te,{density:"compact",class:"mb-3"},{default:u(()=>[v("thead",null,[v("tr",null,[re[19]||(re[19]=v("th",{class:"text-left"},"Sr. No",-1)),re[20]||(re[20]=v("th",{class:"text-left"},"Description",-1)),A.value?(U(),me("th",Nwe,"HSN/SAC Code")):ge("",!0),re[21]||(re[21]=v("th",{class:"text-right"},"Base Cost per unit (incl. GST)",-1)),ue.value?(U(),me("th",Vwe,"Discount per unit")):ge("",!0),re[22]||(re[22]=v("th",{class:"text-center"},"GST %",-1)),re[23]||(re[23]=v("th",{class:"text-right"},"Taxable Value",-1)),re[24]||(re[24]=v("th",{class:"text-right"},"GST Amt",-1)),re[25]||(re[25]=v("th",{class:"text-center"},"Qty",-1)),re[26]||(re[26]=v("th",{class:"text-right"},"Total",-1))])]),v("tbody",null,[(U(!0),me(We,null,qt(y.value.services,(Le,nt)=>(U(),me("tr",{key:nt},[v("td",Lwe,K(nt+1),1),v("td",Mwe,K(Le.serviceDescription),1),A.value?(U(),me("td",Owe,K(Le.hsnSacCode||"N/A"),1)):ge("",!0),v("td",Hwe,K($e(Zn)(Le.baseCost)),1),ue.value?(U(),me("td",$we,K($e(Zn)(Le.discountAmount)),1)):ge("",!0),v("td",Qwe,K(Le.gstPercent)+"%",1),v("td",Gwe,K($e(Zn)(Ae(Le).gstExclusiveAmount)),1),v("td",zwe,K($e(Zn)(Ae(Le).gstAmount)),1),v("td",Kwe,K(Le.quantity),1),v("td",Wwe,K($e(Zn)(Ae(Le).total)),1)]))),128))])]),_:1}),l(Me,{class:"mb-3"}),l(Se,{"no-gutters":""},{default:u(()=>[l(ce,{cols:"8",class:"text-right"},{default:u(()=>[ue.value?(U(),me("div",jwe,"Base Cost Total (incl. GST):")):ge("",!0),ue.value?(U(),me("div",qwe,"Line Item Discounts:")):ge("",!0),ue.value?(U(),me("div",Ywe,"Subtotal after Discounts (incl. GST):")):ge("",!0),re[27]||(re[27]=v("div",{class:"text-body-2 mb-1"},"Taxable Value Total:",-1)),re[28]||(re[28]=v("div",{class:"text-body-2 mb-1"},"GST Amount:",-1)),y.value.additionalDiscount>0?(U(),me("div",Xwe,"Additional Discount:")):ge("",!0),re[29]||(re[29]=v("div",{class:"text-subtitle-1 font-weight-bold"},"Grand Total (incl. GST):",-1))]),_:1}),l(ce,{cols:"4",class:"text-right"},{default:u(()=>[ue.value?(U(),me("div",Jwe,K($e(Zn)(C.value)),1)):ge("",!0),ue.value?(U(),me("div",Zwe,"-"+K($e(Zn)(O.value)),1)):ge("",!0),ue.value?(U(),me("div",ebe,K($e(Zn)(C.value-O.value)),1)):ge("",!0),v("div",tbe,K($e(Zn)(H.value)),1),v("div",nbe,K($e(Zn)(D.value)),1),y.value.additionalDiscount>0?(U(),me("div",abe,"-"+K($e(Zn)(y.value.additionalDiscount)),1)):ge("",!0),v("div",rbe,K($e(Zn)(ie.value)),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(xe,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(De,{class:"pb-2"},{default:u(()=>[re[43]||(re[43]=v("div",{class:"text-subtitle-1 mb-3"},"Payment Information",-1)),f.value?(U(),me("div",sbe,[l(Ce,{indeterminate:"",size:"32",color:"primary"}),re[31]||(re[31]=v("div",{class:"text-body-2 mt-2"},"Loading payment information...",-1))])):p.value?(U(),me("div",obe,[l(de,{size:"48",color:"error",class:"mb-2"},{default:u(()=>[...re[32]||(re[32]=[M("mdi-alert-circle",-1)])]),_:1}),v("div",ibe,K(p.value),1)])):g.value?(U(),me(We,{key:2},[l(Se,{"no-gutters":"",class:"mb-3"},{default:u(()=>[l(ce,{cols:"4"},{default:u(()=>[re[33]||(re[33]=v("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Payment Receipt",-1)),v("div",lbe,K(g.value.identifier),1),v("div",ube,K(Q(g.value.paymentReceiptDate)),1)]),_:1}),l(ce,{cols:"4"},{default:u(()=>[re[34]||(re[34]=v("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Total Amount",-1)),v("div",cbe,K($e(Zn)(ie.value)),1)]),_:1}),l(ce,{cols:"4"},{default:u(()=>[re[35]||(re[35]=v("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Paid Amount",-1)),v("div",dbe,K($e(Zn)(j.value)),1)]),_:1})]),_:1}),m.value?(U(),me("div",Abe,[l(Ce,{indeterminate:"",size:"32",color:"primary"}),re[36]||(re[36]=v("div",{class:"text-body-2 mt-2"},"Loading payment history...",-1))])):w.value&&w.value.length>0?(U(),me(We,{key:1},[l(Me,{class:"mb-3"}),re[38]||(re[38]=v("div",{class:"text-subtitle-2 mb-2"},"Payment History",-1)),l(Te,{density:"compact"},{default:u(()=>[re[37]||(re[37]=v("thead",null,[v("tr",null,[v("th",{class:"text-left"},"Date"),v("th",{class:"text-left"},"Method"),v("th",{class:"text-right"},"Amount")])],-1)),v("tbody",null,[(U(!0),me(We,null,qt(w.value,Le=>(U(),me("tr",{key:Le.id},[v("td",fbe,K(Q(Le.paymentDate)),1),v("td",mbe,K(Le.mode||"N/A"),1),v("td",vbe,K($e(Zn)(Le.amount)),1)]))),128))])]),_:1})],64)):(U(),me(We,{key:2},[l(Me,{class:"mb-3"}),v("div",hbe,[l(de,{size:"48",color:"outline",class:"mb-2"},{default:u(()=>[...re[39]||(re[39]=[M("mdi-currency-inr",-1)])]),_:1}),re[40]||(re[40]=v("div",{class:"text-body-2 text-medium-emphasis"},"No payments recorded",-1))])],64))],64)):(U(),me("div",pbe,[l(de,{size:"48",color:"outline",class:"mb-2"},{default:u(()=>[...re[41]||(re[41]=[M("mdi-receipt",-1)])]),_:1}),re[42]||(re[42]=v("div",{class:"text-body-2 text-medium-emphasis"},"No associated payment receipt found",-1))]))]),_:1})]),_:1}),l(xe,{flat:"",color:"surfaceContainerHigh",class:"card-enhanced"},{default:u(()=>[l(De,{class:"d-flex justify-center gap-3 pb-2"},{default:u(()=>[l(G,{color:"secondary",variant:"outlined",onClick:ee,"prepend-icon":"mdi-pencil",class:"btn-hover-base"},{default:u(()=>[...re[44]||(re[44]=[M(" Edit Bill ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})):ge("",!0)]),_:1}),l(lt,{value:"share",class:"h-100"},{default:u(()=>[l(Se,{"no-gutters":"",class:"h-100"},{default:u(()=>[l(ce,{cols:"12"},{default:u(()=>[l(yh,{"content-type":"bill",data:{consultation:ne.value,printConfigurations:x.value,doctor:i.value},patient:{name:y.value?.patientName,patientName:y.value?.patientName,patientId:y.value?.patientId,contactNumber:y.value?.patientContactNumber},onPdfGenerated:z},null,8,["data","patient"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}}},xH=Xt(gbe,[["__scopeId","data-v-f81d44f3"]]),ybe={class:"text-center"},_be={class:"text-center"},wbe={class:"text-body-2 text-medium-emphasis mb-4"},bbe={class:"pa-1"},xbe={class:"text-body-1 font-weight-medium"},Cbe={class:"text-body-2 text-medium-emphasis"},Sbe={class:"pa-1"},Ebe={class:"text-body-1 font-weight-medium"},Bbe={class:"text-body-2 text-medium-emphasis"},kbe={class:"pa-1"},Tbe={class:"text-body-1 font-weight-medium"},Ibe={class:"text-body-2 text-medium-emphasis"},Fbe={class:"text-caption text-medium-emphasis mt-1"},Pbe={class:"d-flex flex-column py-1"},Dbe={class:"text-body-2 font-weight-medium"},Ube={class:"text-caption text-medium-emphasis"},Rbe={key:0},Nbe={class:"text-caption"},Vbe={key:0,class:"ml-2"},Lbe={key:2,class:"text-body-2 text-medium-emphasis"},Mbe={key:0,class:"text-left",style:{width:"100px"}},Obe={key:0,class:"text-body-2 font-weight-medium"},Hbe={key:0},$be={key:0,class:"text-body-2 font-weight-medium"},Qbe={key:0,class:"text-body-2 font-weight-medium"},Gbe={key:0,class:"text-body-2 font-weight-medium"},zbe={key:0,class:"text-body-2 font-weight-medium"},Kbe={class:"text-body-2 font-weight-medium"},Wbe={class:"text-body-2 font-weight-medium"},jbe={key:0,class:"text-body-2 font-weight-medium"},qbe={class:"text-body-2 font-weight-medium"},Ybe={key:0,class:"text-body-2 mb-1"},Xbe={key:1,class:"text-body-2 mb-1"},Jbe={key:2,class:"text-body-2 mb-1"},Zbe={key:3,class:"text-body-2 mb-1"},exe={key:0,class:"text-body-2 mb-1"},txe={key:1,class:"text-body-2 mb-1"},nxe={key:2,class:"text-body-2 mb-1"},axe={class:"text-body-2 mb-1"},rxe={class:"text-body-2 mb-1"},sxe={key:3,class:"text-body-2 mb-1"},oxe={class:"text-subtitle-1 font-weight-bold"},ixe={key:0,class:"text-center pa-4"},lxe={class:"text-subtitle-2"},uxe={class:"text-body-2"},cxe={class:"text-h6"},dxe={class:"text-h6 text-success"},Axe={key:0,class:"text-center pa-4"},fxe={class:"font-weight-bold"},mxe={__name:"bill-receipt-edit",props:{billId:{type:[String,Number],required:!0}},emits:["close","bill-updated"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ra(),o=Rn(),i=ae(()=>o.state.doctorModule.doctorId),c=ae(()=>o.getters["doctorModule/currentDoctor"]),A=ae(()=>c.value?.doctorName||"Unknown Doctor"),d=ae(()=>c.value?.isGST||!1),f=V(!1),m=V(!1),h=V(null),p=V(null),y=V([]),g=V(!1),w=V(!1),b=V(null),x=V(null),T=V([]),F=V([]),k=V(!1),S=V(null),E=V([]),C=V(!1),D=V(null);ae(()=>S.value?E.value.find(Re=>Re.id===S.value):null);const P=bT(y,ae(()=>p.value?.additionalDiscount||0)),{servicesWithTotals:O,baseSubtotal:H,totalGSTAmount:ie,subtotalWithGST:Ae,totalLineDiscount:j,totalTaxableValue:J,finalGrandTotal:ue,hasValidService:ne,calculateServiceTotal:Y}=P,te=ae(()=>y.value.some(Re=>(parseFloat(Re.discountAmount)||0)>0)),L=hh,N=V([]),q=()=>{y.value.push({serviceDescription:"",hsnSacCode:"",baseCost:null,gstPercent:0,quantity:1,discountAmount:0,isFromHistory:!1,isPrepopulated:!1})},Q=Re=>{y.value.length>1?y.value.splice(Re,1):s("At least one service is required")},ee=(Re,Le)=>{y.value[Re]&&(y.value[Re].serviceDescription=Le)},z=(Re,Le)=>{console.log("Service selected:",Le),Le&&typeof Le=="object"&&!Le.isUserTyped?y.value[Re]={...y.value[Re],serviceDescription:Le.serviceDescription,hsnSacCode:Le.hsnSacCode||"",baseCost:Le.baseCost,gstPercent:Le.gstPercent||0,isFromHistory:!0,isPrepopulated:y.value[Re].isPrepopulated===!0}:Le===null&&(y.value[Re]={serviceDescription:"",hsnSacCode:"",baseCost:null,gstPercent:0,quantity:1,discountAmount:0,isFromHistory:!1,isPrepopulated:y.value[Re].isPrepopulated===!0})},X=async()=>{if(!p.value?.patientId||!p.value?.doctorId){console.log("Missing patient or doctor ID for loading treatment plans");return}C.value=!0;try{console.log("Loading treatment plans for patient:",p.value.patientId,"doctor:",p.value.doctorId);const Re=await kg(p.value.patientId,p.value.doctorId);if(Re.error)throw new Error(Re.error.message||"Failed to load treatment plans");E.value=Re.data||[],console.log("Loaded treatment plans:",E.value.length)}catch(Re){console.error("Error loading treatment plans:",Re),s("Failed to load treatment plans: "+(Re.message||"Unknown error")),E.value=[]}finally{C.value=!1}},le=ae(()=>Array.isArray(T.value)?T.value.reduce((Re,Le)=>Re+(parseFloat(Le.amount)||0),0):0),re=ae(()=>Array.isArray(N.value)?N.value.reduce((Re,Le)=>Re+(parseFloat(Le.amount)||0),0):0),de=ae(()=>{const Re=le.value,Le=re.value;return Math.max(0,ue.value-Re-Le)}),G=ae(()=>{const Re=ne.value,Le=p.value?.patientName;return Re&&Le}),Z=()=>{N.value.push({amount:null,mode:"Cash",paymentDate:new Date().toISOString().split("T")[0],datePickerMenu:!1})},ce=Re=>{N.value.splice(Re,1)},Se=Re=>{if(!Re)return null;try{if(typeof Re=="string")return Re.includes("T")?Re.split("T")[0]:Re;if(Re instanceof Date){const Le=Re.getFullYear(),nt=String(Re.getMonth()+1).padStart(2,"0"),Tt=String(Re.getDate()).padStart(2,"0");return`${Le}-${nt}-${Tt}`}return null}catch(Le){return console.error("Error parsing payment date:",Le),null}},Pe=(Re,Le)=>{if(Re)if(Re instanceof Date){const nt=Re.getFullYear(),Tt=String(Re.getMonth()+1).padStart(2,"0"),Pt=String(Re.getDate()).padStart(2,"0");Le.paymentDate=`${nt}-${Tt}-${Pt}`}else typeof Re=="string"&&(Le.paymentDate=Re);else Le.paymentDate="";Le.datePickerMenu=!1},ye=async()=>{if(!n.billId){h.value="No bill ID provided";return}f.value=!0,h.value=null;try{console.log("Loading bill data for editing, ID:",n.billId);const Re=await _T(n.billId);if(Re.error)throw new Error(Re.error.message||"Failed to load bill");const Le=Re.data;if(p.value={id:Le.id,identifier:Le.identifier,patientName:Le.patientName,patientId:Le.patientId,appointmentDate:Le.appointmentDate,billDate:Le.billDate,doctorId:Le.doctorId,appointmentId:Le.appointmentId,additionalDiscount:Le.additionalDiscount||0,treatmentPlanId:Le.treatmentPlanId},Le.services&&Le.services.length>0?y.value=Le.services.map(nt=>({id:nt.id,serviceDescription:nt.serviceDescription,hsnSacCode:nt.hsnSacCode||"",baseCost:nt.baseCost,gstPercent:nt.gstPercent||0,quantity:nt.quantity||1,discountAmount:nt.discountAmount||0,isFromHistory:!1,isPrepopulated:!0})):y.value=[{serviceDescription:"",hsnSacCode:"",baseCost:null,gstPercent:0,quantity:1,discountAmount:0,isFromHistory:!1,isPrepopulated:!1}],console.log("Bill data loaded for editing:",p.value),console.log("Services loaded:",y.value),Le.treatmentPlanId){k.value=!0,S.value=Le.treatmentPlanId,await X();try{const nt=await Cf(Le.treatmentPlanId);D.value=nt}catch(nt){console.error("Error loading original treatment plan data:",nt)}}await Ce()}catch(Re){console.error("Error loading bill data:",Re),h.value=Re.message||"Failed to load bill data",s(h.value)}finally{f.value=!1}},Ce=async()=>{if(!n.billId){x.value=null;return}g.value=!0,b.value=null;try{console.log("Loading associated payment receipt for bill ID:",n.billId);const Re=await wT(n.billId);Re.success&&Array.isArray(Re.data)&&Re.data.length>0?(x.value=Re.data[0],console.log("Associated payment receipt loaded:",x.value),await _e()):(console.warn("No associated payment receipt found for bill:",n.billId),x.value=null)}catch(Re){console.error("Error loading associated payment receipt:",Re),b.value=Re.message||"Failed to load payment information"}finally{g.value=!1}},_e=async()=>{if(!x.value?.id){T.value=[];return}w.value=!0;try{console.log("Loading payments for receipt ID:",x.value.id);const Re=await Bg(x.value.id);Re.success&&Array.isArray(Re.data)?(T.value=Re.data,console.log("Payments loaded:",T.value)):(console.warn("No payments found or invalid response:",Re),T.value=[])}catch(Re){console.error("Error loading receipt payments:",Re),T.value=[]}finally{w.value=!1}},De=async()=>{if(!G.value){s("Please add at least one valid service with description and cost");return}m.value=!0;try{const Re=y.value.filter(Tt=>Tt.serviceDescription&&Tt.baseCost>0).map(Tt=>({id:Tt.id,serviceDescription:Tt.serviceDescription,hsnSacCode:Tt.hsnSacCode||"",baseCost:parseFloat(Tt.baseCost)||0,gstPercent:parseFloat(Tt.gstPercent)||0,quantity:parseInt(Tt.quantity)||1,discountAmount:parseFloat(Tt.discountAmount)||0})),Le={patientName:p.value.patientName,patientId:p.value.patientId,appointmentDate:p.value.appointmentDate,billDate:p.value.billDate,doctorId:p.value.doctorId,appointmentId:p.value.appointmentId,additionalDiscount:parseFloat(p.value.additionalDiscount)||0,treatmentPlanId:k.value?S.value:null,services:Re};console.log("Updating bill with payload:",Le);const nt=await wH(n.billId,Le);if(nt.error)throw new Error(nt.error.message||"Failed to update bill");console.log("Bill updated successfully:",nt.data),await Me(),await xe(),r(`Bill ${nt.data.identifier} updated successfully!`),a("bill-updated",nt.data)}catch(Re){console.error("Error updating bill:",Re),s("Failed to update bill. Please try again.")}finally{m.value=!1}},xe=async()=>{if(N.value.length===0||!x.value){console.log("No new payment entries to create or no associated receipt");return}console.log("Creating new payment entries:",N.value);try{const Re=N.value.filter(Le=>Le.amount&&Le.amount>0&&Le.mode&&Le.paymentDate);console.log("Valid payments to create:",Re);for(const Le of Re){const nt={amount:parseFloat(Le.amount),mode:Le.mode,paymentDate:Le.paymentDate,paymentReceiptId:x.value.id};console.log("Creating payment with payload:",nt);const Tt=await vh(nt);Tt.success?console.log("Payment created successfully:",Tt.data):(console.error("Error creating payment entry:",Tt.error),s(`Failed to create payment: ${Tt.error?.message||"Unknown error"}`))}await _e(),N.value=[]}catch(Re){console.error("Error creating payment entries:",Re),s("Failed to create some payments: "+(Re.message||"Unknown error"))}},Te=async Re=>{if(Re){F.value.push(Re);try{console.log("Deleting payment:",Re);const Le=await iT(Re);if(Le.error)throw new Error(Le.error.message||"Failed to delete payment");T.value=T.value.filter(nt=>nt.id!==Re),r("Payment deleted successfully")}catch(Le){console.error("Error deleting payment:",Le),s("Failed to delete payment: "+(Le.message||"Unknown error"))}finally{F.value=F.value.filter(Le=>Le!==Re)}}},Me=async()=>{if(!x.value?.id){console.log("No associated payment receipt to update");return}try{console.log("Updating payment receipt treatment plan");const Re={treatmentPlanId:k.value?S.value:null};console.log("Updating payment receipt with data:",Re);const Le=await Zve(x.value.id,Re);if(Le.error)throw new Error(Le.error.message||"Failed to update payment receipt treatment plan");console.log("Payment receipt treatment plan updated successfully"),x.value.treatmentPlanId=Re.treatmentPlanId}catch(Re){console.error("Error updating payment receipt treatment plan:",Re),console.warn("Payment receipt treatment plan update failed, but bill was updated successfully")}},et=Re=>{if(!Re)return"";try{return new Date(Re).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return Re}},lt=()=>{a("close")};return Ke(k,Re=>{Re&&E.value.length===0?X():Re||(S.value=null)}),un(()=>{ye()}),(Re,Le)=>{const nt=I("v-icon"),Tt=I("v-btn"),Pt=I("v-card-title"),Kt=I("v-col"),$t=I("v-row"),bt=I("v-progress-circular"),st=I("v-label"),Je=I("v-card-text"),Nt=I("v-card"),rn=I("v-switch"),Lt=I("v-chip"),_t=I("v-list-item"),ut=I("v-select"),Ft=I("v-text-field"),zt=I("v-table"),dn=I("v-divider"),Hn=I("v-alert"),Ze=I("v-date-picker"),Ge=I("v-menu"),xt=I("v-container");return U(),pe(Nt,{rounded:"lg",color:"surfaceContainer",flat:"",ripple:!1},{default:u(()=>[l($t,{"no-gutters":""},{default:u(()=>[l(Kt,{cols:"12"},{default:u(()=>[l(Pt,{class:"d-flex align-center justify-space-between"},{default:u(()=>[Le[4]||(Le[4]=v("span",null,"Tax Invoice cum Bill of Supply - Edit",-1)),l(Tt,{onClick:lt,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(nt,{size:"18"},{default:u(()=>[...Le[3]||(Le[3]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l($t,{"no-gutters":""},{default:u(()=>[l(Kt,{cols:"12",class:"scroll-element"},{default:u(()=>[f.value?(U(),pe($t,{key:0,"no-gutters":""},{default:u(()=>[l(Kt,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[v("div",ybe,[l(bt,{indeterminate:"",color:"primary",size:"64"}),Le[5]||(Le[5]=v("div",{class:"mt-4 text-subtitle-1"},"Loading bill...",-1))])]),_:1})]),_:1})):h.value?(U(),pe($t,{key:1,"no-gutters":""},{default:u(()=>[l(Kt,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[v("div",_be,[l(nt,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...Le[6]||(Le[6]=[M("mdi-alert-circle",-1)])]),_:1}),Le[8]||(Le[8]=v("div",{class:"text-h6 mb-2"},"Failed to Load Bill",-1)),v("div",wbe,K(h.value),1),l(Tt,{color:"primary",onClick:ye,"prepend-icon":"mdi-refresh"},{default:u(()=>[...Le[7]||(Le[7]=[M(" Retry ",-1)])]),_:1})])]),_:1})]),_:1})):p.value?(U(),pe(xt,{key:2,fluid:"",class:"pa-3"},{default:u(()=>[l(Nt,{flat:"",color:"surfaceContainerHigh",class:"mb-4 card-enhanced"},{default:u(()=>[l(Je,{class:"pb-1 pt-2"},{default:u(()=>[l($t,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(Kt,{cols:"4"},{default:u(()=>[v("div",bbe,[l(st,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...Le[9]||(Le[9]=[M("Patient Information",-1)])]),_:1}),v("div",xbe,K(p.value.patientName||"Unknown Patient"),1),v("div",Cbe,"ID: "+K(p.value.patientId||"N/A"),1)])]),_:1}),l(Kt,{cols:"4"},{default:u(()=>[v("div",Sbe,[l(st,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...Le[10]||(Le[10]=[M("Appointment Details",-1)])]),_:1}),v("div",Ebe,"Dr. "+K(A.value),1),v("div",Bbe,"Date: "+K(et(p.value.appointmentDate)),1)])]),_:1}),l(Kt,{cols:"4"},{default:u(()=>[v("div",kbe,[l(st,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...Le[11]||(Le[11]=[M("Tax Invoice cum Bill of Supply Information",-1)])]),_:1}),v("div",Tbe,K(p.value.identifier),1),v("div",Ibe,"Date: "+K(et(p.value.billDate)),1)])]),_:1})]),_:1})]),_:1})]),_:1}),l(Nt,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(Je,{class:"pb-2"},{default:u(()=>[l($t,{"no-gutters":"",align:"center",class:"mb-3"},{default:u(()=>[l(Kt,{cols:"2",class:"d-flex align-center"},{default:u(()=>[...Le[12]||(Le[12]=[v("div",{class:"text-subtitle-1"},"Treatment Plan",-1)])]),_:1}),l(Kt,{cols:"3",class:"d-flex align-center"},{default:u(()=>[l(rn,{modelValue:k.value,"onUpdate:modelValue":Le[0]||(Le[0]=gt=>k.value=gt),label:"Link to treatment plan",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),l(Kt,{cols:"7"},{default:u(()=>[!k.value&&D.value?(U(),me(We,{key:0},[l(Lt,{color:"secondary",variant:"outlined","prepend-icon":"mdi-link-variant",class:"mr-2"},{default:u(()=>[M(K(D.value.treatmentPlanName),1)]),_:1}),v("div",Fbe," Status: "+K(D.value.status)+"  Created: "+K(et(D.value.createdAt)),1)],64)):k.value?(U(),pe(ut,{key:1,modelValue:S.value,"onUpdate:modelValue":Le[1]||(Le[1]=gt=>S.value=gt),items:E.value,"item-title":"treatmentPlanName","item-value":"id",label:"Select Treatment Plan",variant:"outlined",density:"compact",loading:C.value,disabled:C.value,clearable:"","hide-details":""},{selection:u(({item:gt})=>[v("div",Pbe,[v("div",Dbe,K(gt.raw.treatmentPlanName),1),v("div",Ube,[M(" Status: "+K(gt.raw.status)+"  Created: "+K(et(gt.raw.createdAt))+" ",1),gt.raw.notes?(U(),me("span",Rbe,"  "+K(gt.raw.notes.substring(0,30))+"...",1)):ge("",!0)])])]),item:u(({props:gt,item:Bt})=>[l(_t,eu(nu(gt)),{title:u(()=>[M(K(Bt.raw.treatmentPlanName),1)]),subtitle:u(()=>[v("div",Nbe,[M(" Status: "+K(Bt.raw.status)+"  Created: "+K(et(Bt.raw.createdAt))+" ",1),Bt.raw.notes?(U(),me("span",Vbe," "+K(Bt.raw.notes.substring(0,50))+"...",1)):ge("",!0)])]),_:2},1040)]),_:1},8,["modelValue","items","loading","disabled"])):(U(),me("div",Lbe," No treatment plan linked "))]),_:1})]),_:1})]),_:1})]),_:1}),l(Nt,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(Je,{class:"pb-2"},{default:u(()=>[Le[28]||(Le[28]=v("div",{class:"text-subtitle-1 mb-3"},"Goods and Services Information",-1)),l(zt,{density:"compact",class:"mb-3"},{default:u(()=>[v("thead",null,[v("tr",null,[Le[13]||(Le[13]=v("th",{class:"text-left",style:{width:"60px"}},"Sr. No",-1)),Le[14]||(Le[14]=v("th",{class:"text-left",style:{width:"200px"}},"Description",-1)),d.value?(U(),me("th",Mbe,"HSN/SAC Code")):ge("",!0),Le[15]||(Le[15]=v("th",{class:"text-left",style:{width:"120px"}},"Base Cost per unit (incl. GST)",-1)),Le[16]||(Le[16]=v("th",{class:"text-left",style:{width:"110px"}},"Discount per unit",-1)),Le[17]||(Le[17]=v("th",{class:"text-left",style:{width:"80px"}},"GST %",-1)),Le[18]||(Le[18]=v("th",{class:"text-left",style:{width:"120px"}},"Taxable Value",-1)),Le[19]||(Le[19]=v("th",{class:"text-left",style:{width:"100px"}},"GST Amount",-1)),Le[20]||(Le[20]=v("th",{class:"text-left",style:{width:"90px"}},"Quantity",-1)),Le[21]||(Le[21]=v("th",{class:"text-left",style:{width:"120px"}},"Total",-1)),Le[22]||(Le[22]=v("th",{class:"text-left",style:{width:"80px"}},"Actions",-1))])]),v("tbody",null,[(U(!0),me(We,null,qt($e(O),(gt,Bt)=>(U(),me("tr",{key:Bt,class:ct(gt.isPrepopulated?"prepopulated-service":"")},[v("td",null,K(Bt+1),1),v("td",null,[gt.isPrepopulated?(U(),me("span",Obe,K(gt.serviceDescription),1)):(U(),pe(Cw,{key:1,"model-value":gt.serviceDescription,"onUpdate:modelValue":wt=>ee(Bt,wt),onServiceSelected:wt=>z(Bt,wt),"doctor-id":i.value,density:"compact"},null,8,["model-value","onUpdate:modelValue","onServiceSelected","doctor-id"]))]),d.value?(U(),me("td",Hbe,[gt.isPrepopulated?(U(),me("span",$be,K(gt.hsnSacCode||"N/A"),1)):(U(),pe(Ft,{key:1,modelValue:y.value[Bt].hsnSacCode,"onUpdate:modelValue":wt=>y.value[Bt].hsnSacCode=wt,density:"compact",variant:"underlined","hide-details":"",placeholder:"HSN/SAC"},null,8,["modelValue","onUpdate:modelValue"]))])):ge("",!0),v("td",null,[gt.isPrepopulated?(U(),me("span",Qbe,""+K(gt.baseCost?.toLocaleString()||0),1)):(U(),pe(Ft,{key:1,modelValue:y.value[Bt].baseCost,"onUpdate:modelValue":wt=>y.value[Bt].baseCost=wt,modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"underlined","hide-details":"",min:"0",step:"1"},null,8,["modelValue","onUpdate:modelValue"]))]),v("td",null,[gt.isPrepopulated?(U(),me("span",Gbe,""+K(gt.discountAmount?.toLocaleString()||0),1)):(U(),pe(Ft,{key:1,modelValue:y.value[Bt].discountAmount,"onUpdate:modelValue":wt=>y.value[Bt].discountAmount=wt,modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"underlined","hide-details":"",min:"0",step:"1"},null,8,["modelValue","onUpdate:modelValue"]))]),v("td",null,[gt.isPrepopulated?(U(),me("span",zbe,K(gt.gstPercent||0)+"%",1)):(U(),pe(Ft,{key:1,modelValue:y.value[Bt].gstPercent,"onUpdate:modelValue":wt=>y.value[Bt].gstPercent=wt,modelModifiers:{number:!0},type:"number",suffix:"%",density:"compact",variant:"underlined","hide-details":"",min:"0",max:"100",step:"0.1"},null,8,["modelValue","onUpdate:modelValue"]))]),v("td",null,[v("div",Kbe,K($e(Zn)($e(Y)(y.value[Bt]).gstExclusiveAmount||0)),1)]),v("td",null,[v("div",Wbe,K($e(Zn)($e(Y)(y.value[Bt]).gstAmount||0)),1)]),v("td",null,[gt.isPrepopulated?(U(),me("span",jbe,K(gt.quantity||1),1)):(U(),pe(Ft,{key:1,modelValue:y.value[Bt].quantity,"onUpdate:modelValue":wt=>y.value[Bt].quantity=wt,modelModifiers:{number:!0},type:"number",density:"compact",variant:"underlined","hide-details":"",min:"1",step:"1"},null,8,["modelValue","onUpdate:modelValue"]))]),v("td",null,[v("div",qbe,K($e(Zn)($e(Y)(y.value[Bt]).total||0)),1)]),v("td",null,[l(Tt,{icon:"",size:"small",color:"error",variant:"text",onClick:wt=>Q(Bt),title:gt.isPrepopulated?"Delete existing service":"Delete new service"},{default:u(()=>[l(nt,null,{default:u(()=>[...Le[23]||(Le[23]=[M("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick","title"])])],2))),128))])]),_:1}),l($t,{"no-gutters":"",class:"align-center"},{default:u(()=>[l(Kt,{cols:"auto"},{default:u(()=>[l(Tt,{variant:"outlined",color:"primary",onClick:q,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...Le[24]||(Le[24]=[M(" Add Service ",-1)])]),_:1})]),_:1}),l(Kt),l(Kt,{cols:"3"},{default:u(()=>[l(Ft,{label:"Additional Discount",modelValue:p.value.additionalDiscount,"onUpdate:modelValue":Le[2]||(Le[2]=gt=>p.value.additionalDiscount=gt),modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),l(dn,{class:"mb-3"}),l($t,{"no-gutters":""},{default:u(()=>[l(Kt,{cols:"8",class:"text-right"},{default:u(()=>[te.value?(U(),me("div",Ybe,"Base Cost Total (incl. GST):")):ge("",!0),te.value?(U(),me("div",Xbe,"Line Item Discounts:")):ge("",!0),te.value?(U(),me("div",Jbe,"Subtotal after Discounts (incl. GST):")):ge("",!0),Le[25]||(Le[25]=v("div",{class:"text-body-2 mb-1"},"Taxable Value Total:",-1)),Le[26]||(Le[26]=v("div",{class:"text-body-2 mb-1"},"GST Amount:",-1)),p.value.additionalDiscount>0?(U(),me("div",Zbe,"Additional Discount:")):ge("",!0),Le[27]||(Le[27]=v("div",{class:"text-subtitle-1 font-weight-bold"},"Grand Total (incl. GST):",-1))]),_:1}),l(Kt,{cols:"4",class:"text-right"},{default:u(()=>[te.value?(U(),me("div",exe,K($e(Zn)($e(H))),1)):ge("",!0),te.value?(U(),me("div",txe,"-"+K($e(Zn)($e(j))),1)):ge("",!0),te.value?(U(),me("div",nxe,K($e(Zn)($e(H)-$e(j))),1)):ge("",!0),v("div",axe,K($e(Zn)($e(J))),1),v("div",rxe,K($e(Zn)($e(ie))),1),p.value.additionalDiscount>0?(U(),me("div",sxe,"-"+K($e(Zn)(p.value.additionalDiscount)),1)):ge("",!0),v("div",oxe,K($e(Zn)($e(ue))),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(Nt,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(Je,{class:"pb-2"},{default:u(()=>[Le[42]||(Le[42]=v("div",{class:"text-subtitle-1 mb-3"},"Payment Information",-1)),g.value?(U(),me("div",ixe,[l(bt,{indeterminate:"",color:"primary",size:"32"}),Le[29]||(Le[29]=v("div",{class:"mt-2 text-body-2"},"Loading payment information...",-1))])):b.value?(U(),pe(Hn,{key:1,type:"warning",variant:"tonal",class:"mb-3"},{default:u(()=>[M(K(b.value),1)]),_:1})):x.value?(U(),me(We,{key:2},[l($t,{"no-gutters":"",class:"mb-3"},{default:u(()=>[l(Kt,{cols:"12"},{default:u(()=>[l(Hn,{type:"info",variant:"tonal",density:"compact"},{title:u(()=>[v("span",lxe,"Payment Receipt: "+K(x.value.identifier),1)]),default:u(()=>[v("div",uxe,[Le[30]||(Le[30]=v("strong",null,"Date:",-1)),M(" "+K(et(x.value.paymentReceiptDate)),1)])]),_:1})]),_:1})]),_:1}),l($t,{"no-gutters":"",class:"mb-3"},{default:u(()=>[l(Kt,{cols:"4"},{default:u(()=>[Le[31]||(Le[31]=v("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Total Amount",-1)),v("div",cxe,K($e(Zn)($e(ue))),1)]),_:1}),l(Kt,{cols:"4"},{default:u(()=>[Le[32]||(Le[32]=v("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Paid Amount",-1)),v("div",dxe,K($e(Zn)(le.value+re.value)),1)]),_:1}),l(Kt,{cols:"4"},{default:u(()=>[Le[33]||(Le[33]=v("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Balance Due",-1)),v("div",{class:ct(["text-h6",de.value>0?"text-error":"text-success"])},K($e(Zn)(de.value)),3)]),_:1})]),_:1}),w.value?(U(),me("div",Axe,[l(bt,{indeterminate:"",size:"32",color:"primary"}),Le[34]||(Le[34]=v("div",{class:"text-body-2 mt-2"},"Loading payments...",-1))])):(U(),me(We,{key:1},[l(dn,{class:"mb-3"}),Le[40]||(Le[40]=v("div",{class:"text-subtitle-2 mb-2"},"Payments",-1)),l(zt,{density:"compact",class:"mb-3"},{default:u(()=>[Le[38]||(Le[38]=v("thead",null,[v("tr",null,[v("th",{class:"text-left",style:{width:"60px"}},"Sr. No"),v("th",{class:"text-left",style:{width:"150px"}},"Amount ()"),v("th",{class:"text-left",style:{width:"150px"}},"Payment Mode"),v("th",{class:"text-left",style:{width:"150px"}},"Payment Date"),v("th",{class:"text-left",style:{width:"80px"}},"Actions")])],-1)),v("tbody",null,[(U(!0),me(We,null,qt(T.value,(gt,Bt)=>(U(),me("tr",{key:`existing-${gt.id}`},[v("td",null,K(Bt+1),1),v("td",fxe,""+K(gt.amount.toLocaleString()),1),v("td",null,K(gt.mode),1),v("td",null,K(et(gt.paymentDate)),1),v("td",null,[l(Tt,{icon:"",size:"small",color:"error",variant:"text",onClick:wt=>Te(gt.id),loading:F.value.includes(gt.id)},{default:u(()=>[l(nt,null,{default:u(()=>[...Le[35]||(Le[35]=[M("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick","loading"])])]))),128)),(U(!0),me(We,null,qt(N.value,(gt,Bt)=>(U(),me("tr",{key:`new-${Bt}`},[v("td",null,K(T.value.length+Bt+1),1),v("td",null,[l(Ft,{modelValue:gt.amount,"onUpdate:modelValue":wt=>gt.amount=wt,modelModifiers:{number:!0},type:"number",prefix:"",min:"1",density:"compact",variant:"underlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),v("td",null,[l(ut,{modelValue:gt.mode,"onUpdate:modelValue":wt=>gt.mode=wt,items:$e(L),density:"compact",variant:"underlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),v("td",null,[l(Ge,{modelValue:gt.datePickerMenu,"onUpdate:modelValue":wt=>gt.datePickerMenu=wt,"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},{activator:u(({props:wt})=>[l(Ft,Ue({modelValue:gt.paymentDate,"onUpdate:modelValue":gn=>gt.paymentDate=gn,density:"compact",variant:"underlined","hide-details":"",readonly:""},{ref_for:!0},wt),{"append-inner":u(()=>[l(nt,{class:"text-medium-emphasis"},{default:u(()=>[...Le[36]||(Le[36]=[M("mdi-calendar",-1)])]),_:1})]),_:1},16,["modelValue","onUpdate:modelValue"])]),default:u(()=>[l(Ze,{"model-value":Se(gt.paymentDate),"onUpdate:modelValue":wt=>Pe(wt,gt),color:"primary",locale:"en-IN"},null,8,["model-value","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),v("td",null,[l(Tt,{icon:"",size:"small",color:"error",variant:"text",onClick:wt=>ce(Bt)},{default:u(()=>[l(nt,null,{default:u(()=>[...Le[37]||(Le[37]=[M("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])]))),128))])]),_:1}),l($t,{"no-gutters":"",class:"align-center"},{default:u(()=>[l(Kt,{cols:"auto"},{default:u(()=>[l(Tt,{variant:"outlined",color:"secondary",onClick:Z,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...Le[39]||(Le[39]=[M(" Add Payment ",-1)])]),_:1})]),_:1})]),_:1})],64))],64)):(U(),pe(Hn,{key:3,type:"info",variant:"tonal"},{default:u(()=>[...Le[41]||(Le[41]=[M(" No associated payment receipt found. Payments will be managed separately. ",-1)])]),_:1}))]),_:1})]),_:1}),l(Nt,{flat:"",color:"surfaceContainerHigh",class:"card-enhanced"},{default:u(()=>[l(Je,{class:"d-flex justify-center pb-2"},{default:u(()=>[l(Tt,{color:"primary",onClick:De,loading:m.value,disabled:!G.value,"prepend-icon":"mdi-content-save",class:"btn-hover-base"},{default:u(()=>[...Le[43]||(Le[43]=[M(" Update Bill ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})):ge("",!0)]),_:1})]),_:1})]),_:1})}}},CH=Xt(mxe,[["__scopeId","data-v-f7ae1934"]]),vxe={key:1,class:"d-flex justify-center align-center pa-8"},hxe={__name:"patient-document-create",props:{appointment:{type:Object,required:!0},doctorId:{type:Number,required:!0},clinicId:{type:Number,required:!0}},emits:["close"],setup(e,{emit:t}){const n=e,a=t,{showError:r}=ra();Rn();const s=V("write"),o=V("medical-fitness-certificate"),i=V([{title:"Medical Fitness Certificate",value:"medical-fitness-certificate"},{title:"Leave of Absence",value:"leave-of-absence"}]),c=V(!1),A=V(!1),d=V(null),f=V(null),m=D=>{if(D instanceof Date){const P=D.getFullYear(),O=String(D.getMonth()+1).padStart(2,"0"),H=String(D.getDate()).padStart(2,"0");return`${P}-${O}-${H}`}return D},h=()=>Un(),p=V({documentType:"medical-fitness-certificate",patientName:n.appointment.patient_name||"",patientAge:n.appointment.patient_age||null,certificateDate:h(),purpose:"",validityPeriod:"",activity:"",reason:"",tillDate:"",doctorName:"",clinicName:"",additionalNotes:""}),y=ae(()=>{const D={};return p.value.patientName||(D.patientName="Required"),(p.value.patientAge===null||p.value.patientAge===void 0||p.value.patientAge==="")&&(D.patientAge="Required"),p.value.certificateDate||(D.certificateDate="Required"),o.value==="medical-fitness-certificate"&&(p.value.purpose||(D.purpose="Required"),p.value.validityPeriod||(D.validityPeriod="Required")),o.value==="leave-of-absence"&&(p.value.activity||(D.activity="Required"),p.value.reason||(D.reason="Required"),p.value.tillDate||(D.tillDate="Required")),p.value.doctorName||(D.doctorName="Required"),p.value.clinicName||(D.clinicName="Required"),D}),g=ae({get:()=>p.value.certificateDate?new Date(p.value.certificateDate+"T12:00:00").toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"",set:()=>{}}),w=ae({get:()=>p.value.tillDate?new Date(p.value.tillDate+"T12:00:00").toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"",set:()=>{}}),b=ae(()=>o.value==="leave-of-absence"?"Document Date *":"Certificate Date *"),x=ae(()=>({id:n.appointment.patientId,name:p.value.patientName||n.appointment.patient_name||"N/A",age:p.value.patientAge||n.appointment.patient_age||null,gender:n.appointment.patient_gender||"N/A",contactNumber:n.appointment.contactNumber||"N/A"})),T=ae(()=>f.value?{documentData:{...p.value,certificateDate:p.value.certificateDate},printConfigurations:f.value}:null),F=D=>{let P;typeof D=="string"?P=D.includes("T")?D.split("T")[0]:D:D instanceof Date?P=m(D):P=h(),p.value.certificateDate=P,c.value=!1},k=D=>{let P;typeof D=="string"?P=D.includes("T")?D.split("T")[0]:D:D instanceof Date?P=m(D):P="",p.value.tillDate=P,A.value=!1},S=D=>{p.value.documentType=D,D==="medical-fitness-certificate"?(p.value.activity="",p.value.reason="",p.value.tillDate=""):D==="leave-of-absence"&&(p.value.purpose="",p.value.validityPeriod="")},E=async()=>{try{const D=await gh(n.doctorId);if(D.error){console.error("Error fetching print configs:",D.error),r("Failed to load print configurations");return}if(f.value=D.data||{},f.value.doctorName&&!p.value.doctorName&&(p.value.doctorName=f.value.doctorName),f.value.clinicAddress&&!p.value.clinicName){const P=f.value.clinicAddress.split(`
`)[0]||f.value.clinicAddress;p.value.clinicName=P}}catch(D){console.error("Error fetching print configurations:",D),r("Failed to load print configurations")}},C=()=>{a("close")};return Ke(s,D=>{D==="write"&&d.value&&d.value.validate()}),un(async()=>{await E()}),(D,P)=>{const O=I("v-icon"),H=I("v-btn"),ie=I("v-card-title"),Ae=I("v-col"),j=I("v-row"),J=I("v-select"),ue=I("v-tab"),ne=I("v-tabs"),Y=I("v-text-field"),te=I("v-date-picker"),L=I("v-menu"),N=I("v-textarea"),q=I("v-form"),Q=I("v-card-text"),ee=I("v-card"),z=I("v-tabs-window-item"),X=I("v-progress-circular"),le=I("v-tabs-window");return U(),pe(ee,{rounded:"lg",color:"surfaceContainer",flat:"",ripple:!1},{default:u(()=>[l(j,{"no-gutters":""},{default:u(()=>[l(Ae,{cols:"12"},{default:u(()=>[l(ie,{class:"d-flex align-center justify-space-between"},{default:u(()=>[P[19]||(P[19]=v("span",null,"Create Document",-1)),l(H,{onClick:C,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(O,{size:"18"},{default:u(()=>[...P[18]||(P[18]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(j,{"no-gutters":""},{default:u(()=>[l(Ae,{cols:"12",class:"pa-3"},{default:u(()=>[l(J,{modelValue:o.value,"onUpdate:modelValue":[P[0]||(P[0]=re=>o.value=re),S],items:i.value,label:"Document Type",variant:"outlined",density:"compact",class:"mb-0","hide-details":""},null,8,["modelValue","items"]),l(ne,{modelValue:s.value,"onUpdate:modelValue":P[1]||(P[1]=re=>s.value=re),class:"mb-3"},{default:u(()=>[l(ue,{value:"write"},{default:u(()=>[...P[20]||(P[20]=[M("Write",-1)])]),_:1}),l(ue,{value:"share"},{default:u(()=>[...P[21]||(P[21]=[M("Share",-1)])]),_:1})]),_:1},8,["modelValue"]),l(le,{modelValue:s.value,"onUpdate:modelValue":P[17]||(P[17]=re=>s.value=re)},{default:u(()=>[l(z,{value:"write"},{default:u(()=>[l(ee,{flat:"",color:"surfaceContainerHigh",class:"card-enhanced"},{default:u(()=>[l(Q,null,{default:u(()=>[l(q,{ref_key:"formRef",ref:d},{default:u(()=>[l(j,null,{default:u(()=>[l(Ae,{cols:"6"},{default:u(()=>[l(Y,{modelValue:p.value.patientName,"onUpdate:modelValue":P[2]||(P[2]=re=>p.value.patientName=re),label:"Patient Name *",variant:"outlined",density:"compact",rules:[re=>!!re||"Patient name is required"],"error-messages":y.value.patientName},null,8,["modelValue","rules","error-messages"])]),_:1}),l(Ae,{cols:"6"},{default:u(()=>[l(Y,{modelValue:p.value.patientAge,"onUpdate:modelValue":P[3]||(P[3]=re=>p.value.patientAge=re),modelModifiers:{number:!0},label:"Patient Age *",type:"number",variant:"outlined",density:"compact",rules:[re=>re!=null&&re!==""||"Patient age is required"],"error-messages":y.value.patientAge},null,8,["modelValue","rules","error-messages"])]),_:1}),l(Ae,{cols:"6"},{default:u(()=>[l(L,{modelValue:c.value,"onUpdate:modelValue":P[6]||(P[6]=re=>c.value=re),"close-on-content-click":!1,transition:"scale-transition","offset-y":""},{activator:u(({props:re})=>[l(Y,Ue({modelValue:g.value,"onUpdate:modelValue":P[4]||(P[4]=de=>g.value=de),label:b.value,variant:"outlined",density:"compact",readonly:""},re,{rules:[de=>!!de||"Certificate date is required"],"error-messages":y.value.certificateDate}),{"append-inner":u(()=>[l(O,null,{default:u(()=>[...P[22]||(P[22]=[M("mdi-calendar",-1)])]),_:1})]),_:1},16,["modelValue","label","rules","error-messages"])]),default:u(()=>[l(te,{modelValue:p.value.certificateDate,"onUpdate:modelValue":[P[5]||(P[5]=re=>p.value.certificateDate=re),F],color:"primary",locale:"en-IN"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),o.value==="medical-fitness-certificate"?(U(),me(We,{key:0},[l(Ae,{cols:"6"},{default:u(()=>[l(Y,{modelValue:p.value.purpose,"onUpdate:modelValue":P[7]||(P[7]=re=>p.value.purpose=re),label:"Purpose *",variant:"outlined",density:"compact",placeholder:"e.g., work, travel",rules:[re=>!!re||"Purpose is required"],"error-messages":y.value.purpose},null,8,["modelValue","rules","error-messages"])]),_:1}),l(Ae,{cols:"6"},{default:u(()=>[l(Y,{modelValue:p.value.validityPeriod,"onUpdate:modelValue":P[8]||(P[8]=re=>p.value.validityPeriod=re),label:"Validity Period *",variant:"outlined",density:"compact",placeholder:"e.g., 30 days",rules:[re=>!!re||"Validity period is required"],"error-messages":y.value.validityPeriod},null,8,["modelValue","rules","error-messages"])]),_:1})],64)):ge("",!0),o.value==="leave-of-absence"?(U(),me(We,{key:1},[l(Ae,{cols:"6"},{default:u(()=>[l(Y,{modelValue:p.value.activity,"onUpdate:modelValue":P[9]||(P[9]=re=>p.value.activity=re),label:"Activity/Institution *",variant:"outlined",density:"compact",placeholder:"e.g., college, court",rules:[re=>!!re||"Activity is required"],"error-messages":y.value.activity},null,8,["modelValue","rules","error-messages"])]),_:1}),l(Ae,{cols:"6"},{default:u(()=>[l(Y,{modelValue:p.value.reason,"onUpdate:modelValue":P[10]||(P[10]=re=>p.value.reason=re),label:"Reason *",variant:"outlined",density:"compact",placeholder:"e.g., medical treatment",rules:[re=>!!re||"Reason is required"],"error-messages":y.value.reason},null,8,["modelValue","rules","error-messages"])]),_:1}),l(Ae,{cols:"6"},{default:u(()=>[l(L,{modelValue:A.value,"onUpdate:modelValue":P[13]||(P[13]=re=>A.value=re),"close-on-content-click":!1,transition:"scale-transition","offset-y":""},{activator:u(({props:re})=>[l(Y,Ue({modelValue:w.value,"onUpdate:modelValue":P[11]||(P[11]=de=>w.value=de),label:"Till Date *",variant:"outlined",density:"compact",readonly:""},re,{rules:[de=>!!de||"Till date is required"],"error-messages":y.value.tillDate}),{"append-inner":u(()=>[l(O,null,{default:u(()=>[...P[23]||(P[23]=[M("mdi-calendar",-1)])]),_:1})]),_:1},16,["modelValue","rules","error-messages"])]),default:u(()=>[l(te,{modelValue:p.value.tillDate,"onUpdate:modelValue":[P[12]||(P[12]=re=>p.value.tillDate=re),k],color:"primary",locale:"en-IN"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})],64)):ge("",!0),l(Ae,{cols:"6"},{default:u(()=>[l(Y,{modelValue:p.value.doctorName,"onUpdate:modelValue":P[14]||(P[14]=re=>p.value.doctorName=re),label:"Doctor Name *",variant:"outlined",density:"compact",rules:[re=>!!re||"Doctor name is required"],"error-messages":y.value.doctorName},null,8,["modelValue","rules","error-messages"])]),_:1}),l(Ae,{cols:"6"},{default:u(()=>[l(Y,{modelValue:p.value.clinicName,"onUpdate:modelValue":P[15]||(P[15]=re=>p.value.clinicName=re),label:"Clinic Name *",variant:"outlined",density:"compact",rules:[re=>!!re||"Clinic name is required"],"error-messages":y.value.clinicName},null,8,["modelValue","rules","error-messages"])]),_:1}),l(Ae,{cols:"12"},{default:u(()=>[l(N,{modelValue:p.value.additionalNotes,"onUpdate:modelValue":P[16]||(P[16]=re=>p.value.additionalNotes=re),label:"Additional Notes",variant:"outlined",density:"compact",rows:"3",placeholder:"Optional additional information"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1}),l(z,{value:"share"},{default:u(()=>[f.value?(U(),pe(yh,{key:0,contentType:o.value==="leave-of-absence"?"leave-of-absence":"certificate",data:T.value,patient:x.value},null,8,["contentType","data","patient"])):(U(),me("div",vxe,[l(X,{indeterminate:"",color:"primary"})]))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}}},pxe=Xt(hxe,[["__scopeId","data-v-407b4bc6"]]),EC=""+new URL("images/no_patient_waiting-BEIBlTUs.png",import.meta.url).href,gxe={__name:"Permission",props:{permission:{type:String,default:null},anyPermission:{type:Array,default:null},allPermissions:{type:Array,default:null},feature:{type:String,default:null},requireAdmin:{type:Boolean,default:!1},tag:{type:String,default:"div"}},setup(e){const t=e,{hasPermission:n,hasAnyPermission:a,hasAllPermissions:r,hasFeatureAccess:s,isAdmin:o,features:i}=Ah(),c=ae(()=>{if(t.requireAdmin)return o.value;if(t.feature){const A=s(t.feature);return A?A.value:!1}if(t.permission){if(o.value)return!0;const A=n(t.permission),d=t.permission.split(".");if(d.length>=2){const f=d[0],m=i.value.find(h=>h&&h.id===f);if(m&&m.adminOnly)return!1}return A.value}return t.anyPermission&&Array.isArray(t.anyPermission)&&t.anyPermission.length>0?a(t.anyPermission).value:t.allPermissions&&Array.isArray(t.allPermissions)&&t.allPermissions.length>0?r(t.allPermissions).value:!0});return(A,d)=>c.value?(U(),pe(ew(e.tag),eu(Ue({key:0},A.$attrs)),{default:u(()=>[EZ(A.$slots,"default",{},void 0,!0)]),_:3},16)):ge("",!0)}},Bn=Xt(gxe,[["__scopeId","data-v-4340528a"]]),oR={__name:"delete-appointment",props:{deleteSelectedAppointment:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=e,a=t,r=V(n.deleteSelectedAppointment),s=()=>{a("close")},o=async i=>{const c=await Wve(i.id);c.error?console.error("Error deleting appointment:",c.error):console.log("Appointment deleted successfully"),s()};return(i,c)=>{const A=I("v-card-title"),d=I("v-col"),f=I("v-icon"),m=I("v-btn"),h=I("v-row"),p=I("v-card"),y=I("v-card-text"),g=I("v-divider");return U(),pe(p,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(p,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"11"},{default:u(()=>[l(A,{class:"pa-0 pl-2"},{default:u(()=>[...c[1]||(c[1]=[M("Confirm Appointment Delete",-1)])]),_:1})]),_:1}),l(d,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(m,{icon:"",size:"x-small",onClick:s},{default:u(()=>[l(f,null,{default:u(()=>[...c[2]||(c[2]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(p,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(y,{class:"text-left"},{default:u(()=>[...c[3]||(c[3]=[M(" Are you sure you want to delete this appointment? ",-1),v("span",{class:"text-red font-weight-bold"}," You will not be able to recover data once deleted. ",-1)])]),_:1})]),_:1})]),_:1}),l(g),l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"2"}),l(d,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(m,{variant:"outlined",onClick:c[0]||(c[0]=w=>o(r.value))},{default:u(()=>[...c[4]||(c[4]=[M("Yes, Delete Appointment",-1)])]),_:1})]),_:1}),l(d,{cols:"2"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},yxe={class:"tab-content"},_xe={class:"tab-content"},wxe={class:"tab-content"},bxe={class:"scroll-hover",style:{height:"calc(100% - 8px)"}},xxe={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},Cxe={class:"d-flex align-center flex-wrap"},Sxe={class:"text-caption mr-2"},Exe={class:"d-flex align-center"},Bxe={class:"scroll-hover",style:{height:"calc(100vh - 280px)"}},kxe={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},Txe={class:"d-flex align-center flex-wrap"},Ixe={class:"text-caption mr-2"},Fxe={class:"text-success"},Pxe={class:"d-flex align-center"},Dxe={class:"scroll-hover",style:{height:"calc(100vh - 280px)"}},Uxe={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},Rxe={class:"d-flex align-center flex-wrap"},Nxe={class:"text-caption mr-2"},Vxe={class:"text-error"},Lxe={class:"d-flex align-center"},Mxe={__name:"appointment-queue",setup(e,{expose:t}){const n=Rn(),a=Al(),{showSuccess:r,showWarning:s}=ra(),o=V("in-queue"),i=V(!1),c=V([]),A=V(!1),d=V(null),f=V(!1),m=V(null),h=V(!1),p=V(!1),y=V(!1),g=V(null),w=V(!1),b=V(null),x=V(!1),T=V(null),F=V(!1),k=V(null),S=V(!1),E=V(null),C=V(!1),D=V(null),P=()=>{const _t=new Date,ut=new Date(_t.getTime()+330*60*1e3),Ft=ut.getUTCFullYear(),zt=String(ut.getUTCMonth()+1).padStart(2,"0"),dn=String(ut.getUTCDate()).padStart(2,"0");return`${Ft}-${zt}-${dn}`},O=_t=>{if(_t instanceof Date){const ut=_t.getFullYear(),Ft=String(_t.getMonth()+1).padStart(2,"0"),zt=String(_t.getDate()).padStart(2,"0");return`${ut}-${Ft}-${zt}`}return _t},H=V(P()),ie=V(""),Ae=V(null),j=ae(()=>n.state.doctorModule.doctorId),J=ae(()=>n.state.clinicModule.clinicId),ue=ae(()=>n.getters["doctorModule/isGSTRegistered"]),ne=_t=>{if(!ie.value||ie.value.trim()==="")return _t;const ut=ie.value.toLowerCase().trim();return _t.filter(Ft=>Ft.patient_name.toLowerCase().includes(ut))},Y=ae(()=>{const _t=c.value.filter(ut=>ut.status==="waiting"||ut.status==="confirmed");return ne(_t)}),te=ae(()=>{const _t=c.value.filter(ut=>ut.status==="completed");return ne(_t)}),L=ae(()=>{const _t=c.value.filter(ut=>ut.status==="cancelled");return ne(_t)}),{hasPermission:N}=Ah(),q=_t=>{if(!N("home.queue.patient").value){s("You do not have permission to view patient details from appointment card");return}console.log("Is this mobile",Uo),Uo?a.push({name:"PatientDetailMobile",params:{id:_t},query:{from:"home"}}):a.push({name:"PatientDetailPage",params:{id:_t},query:{from:"home"}})},Q=_t=>{console.log("Tab changed to:",_t),f.value=!0,setTimeout(()=>{f.value=!1},500),requestAnimationFrame(()=>{f.value=!0,setTimeout(()=>{f.value=!1},300)}),m.value=_t,setTimeout(()=>{m.value=null},600)},ee=_t=>{if(!_t)return"Select Date";const ut=P(),Ft=new Date(Date.now()+330*60*1e3-1440*60*1e3).toISOString().slice(0,10),zt=new Date(Date.now()+330*60*1e3+1440*60*1e3).toISOString().slice(0,10);if(_t===ut)return"Today";if(_t===Ft)return"Yesterday";if(_t===zt)return"Tomorrow";const dn=new Date(_t+"T12:00:00");return dn.toLocaleDateString("en-IN",{day:"numeric",month:"short",year:dn.getFullYear()!==new Date().getFullYear()?"numeric":void 0})},z=async _t=>{let ut;typeof _t=="string"?ut=_t.includes("T")?_t.split("T")[0]:_t:_t instanceof Date?ut=O(_t):ut=P(),H.value=ut,h.value=!1,await st(j.value,J.value,ut)},X=()=>{Ae.value&&clearTimeout(Ae.value),Ae.value=setTimeout(()=>{console.log("Search query:",ie.value)},300)};tu(()=>{st(j.value,J.value,H.value)});const le=()=>{i.value=!0},re=async()=>{i.value=!1,await st(j.value,J.value,H.value)},de=async _t=>{r(_t.message),await st(j.value,J.value,H.value)},G=_t=>{_t.type,r(_t.message)},Z=V(!1),ce=V(null),Se=_t=>{Z.value=!0,ce.value=_t,console.log("Selected Appointment for Deletion:",_t)},Pe=async()=>{Z.value=!1,ce.value=null,await st(j.value,J.value,H.value)},ye=_t=>{d.value={..._t},A.value=!0},Ce=async()=>{await st(j.value,J.value,H.value),A.value=!1},_e=_t=>{if(!N("home.queue.bill").value){s("You do not have permission to generate receipts");return}g.value=_t,ue.value?y.value=!0:p.value=!0},De=()=>{p.value=!1,y.value=!1,g.value=null},xe=_t=>{console.log("Receipt created successfully:",_t),r(`Receipt ${_t.identifier} created successfully!`)},Te=_t=>{console.log("Bill created successfully:",_t),r(`Bill ${_t.identifier} created successfully!`),y.value=!1,g.value=null,nt(_t.id)},Me=_t=>{console.log("Edit receipt requested for ID:",_t),p.value=!1,y.value=!1,b.value=_t,w.value=!0},et=()=>{w.value=!1,b.value=null},lt=()=>{x.value=!1,T.value=null},Re=_t=>{console.log("View receipt requested for ID:",_t),p.value=!1,y.value=!1,k.value=_t,F.value=!0},Le=()=>{F.value=!1,k.value=null},nt=_t=>{console.log("View bill requested for ID:",_t),p.value=!1,y.value=!1,E.value=_t,S.value=!0},Tt=()=>{S.value=!1,E.value=null},Pt=_t=>{console.log("Edit bill requested from view for ID:",_t),S.value=!1,E.value=null,T.value=_t,x.value=!0},Kt=_t=>{console.log("Edit receipt requested from view for ID:",_t),F.value=!1,k.value=null,b.value=_t,w.value=!0},$t=_t=>{console.log("Receipt updated successfully:",_t),r(`Receipt ${_t.identifier} updated successfully!`),et()},bt=_t=>{console.log("Bill updated successfully:",_t),r(`Bill ${_t.identifier} updated successfully!`),lt()},st=async(_t,ut,Ft=null,zt=!1)=>{const dn=await zve(_t,ut,Ft);dn.error||(c.value=[...dn.data],zt&&r("Appointment list refreshed"))},Je=async _t=>{_t.status=_t.status==="waiting"?"completed":"waiting",await WM(_t)},Nt=async()=>{await st(j.value,J.value,H.value,!0)},rn=_t=>{if(!N("home.queue.certificate").value){s("You do not have permission to generate certificates");return}D.value=_t,C.value=!0},Lt=()=>{C.value=!1,D.value=null};return t({refreshAppointments:st}),(_t,ut)=>{const Ft=I("v-icon"),zt=I("v-btn"),dn=I("v-date-picker"),Hn=I("v-menu"),Ze=I("v-col"),Ge=I("v-tooltip"),xt=I("v-spacer"),gt=I("v-row"),Bt=I("v-badge"),wt=I("v-tab"),gn=I("v-tabs"),Wn=I("v-card"),zn=I("v-text-field"),oa=I("v-progress-circular"),Ra=I("v-card-title"),Be=I("v-chip"),Qe=I("v-card-text"),ke=I("v-card-actions"),Ve=I("v-empty-state"),ze=I("v-tabs-window-item"),je=I("v-tabs-window"),oe=I("v-bottom-sheet"),se=I("v-dialog");return U(),me(We,null,[l(Wn,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex flex-column"},{default:u(()=>[l(Wn,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(gt,{"no-gutters":""},{default:u(()=>[l(Ze,{cols:"7",class:"d-flex justify-start"},{default:u(()=>[l(Hn,{modelValue:h.value,"onUpdate:modelValue":ut[1]||(ut[1]=be=>h.value=be),"close-on-content-click":!1,transition:"scale-transition","offset-y":""},{activator:u(({props:be})=>[l(zt,Ue(be,{variant:"outlined",size:"small",rounded:"x-small",class:"btn-hover-enhanced"}),{default:u(()=>[M(K(ee(H.value))+" ",1),l(Ft,{class:"ml-1"},{default:u(()=>[...ut[20]||(ut[20]=[M("mdi-calendar",-1)])]),_:1})]),_:1},16)]),default:u(()=>[l(dn,{modelValue:H.value,"onUpdate:modelValue":[ut[0]||(ut[0]=be=>H.value=be),z],color:"primary",locale:"en-IN"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),l(Ze,{cols:"5",class:"d-flex justify-end"},{default:u(()=>[l(Ge,{text:"Add Patient to Appointment Queue"},{activator:u(({props:be})=>[l(zt,Ue({rounded:"x-small",onClick:le,size:"small",variant:"outlined"},be,{class:"btn-hover-enhanced mr-1"}),{default:u(()=>[...ut[21]||(ut[21]=[M(" Add Patient ",-1)])]),_:1},16)]),_:1}),l(xt),l(Ge,{text:"Refresh Appointment Queue"},{activator:u(({props:be})=>[l(zt,Ue({rounded:"x-small",onClick:Nt,size:"small"},be,{class:"btn-hover-enhanced"}),{default:u(()=>[l(Ft,{size:"large"},{default:u(()=>[...ut[22]||(ut[22]=[v("img",{src:Sg,alt:"Refresh",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1},16)]),_:1})]),_:1})]),_:1}),l(gt,{"no-gutters":""},{default:u(()=>[l(Ze,{cols:"12"},{default:u(()=>[l(gn,{modelValue:o.value,"onUpdate:modelValue":[ut[2]||(ut[2]=be=>o.value=be),Q],"align-tabs":"center",density:"compact",class:"tabs-hover-container"},{default:u(()=>[l(Ge,{text:"Patients Waiting & Confirmed"},{activator:u(({props:be})=>[l(wt,Ue({value:"in-queue"},be,{class:["tab-hover",{"tab-active":o.value==="in-queue"}]}),{default:u(()=>[v("div",yxe,[l(Bt,{color:o.value==="in-queue"?"warning":"primary",content:Y.value.length,inline:"",class:"tab-badge"},{default:u(()=>[l(Ft,{size:"large",class:"tab-icon"},{default:u(()=>[...ut[23]||(ut[23]=[v("img",{src:Zfe,alt:"waiting"},null,-1)])]),_:1})]),_:1},8,["color","content"])])]),_:1},16,["class"])]),_:1}),l(Ge,{text:"Consultations Completed"},{activator:u(({props:be})=>[l(wt,Ue({value:"completed"},be,{class:["tab-hover",{"tab-active":o.value==="completed"}]}),{default:u(()=>[v("div",_xe,[l(Bt,{color:o.value==="completed"?"success":"primary",content:te.value.length,inline:"",class:"tab-badge"},{default:u(()=>[l(Ft,{size:"large",class:"tab-icon"},{default:u(()=>[...ut[24]||(ut[24]=[v("img",{src:eme,alt:"completed"},null,-1)])]),_:1})]),_:1},8,["color","content"])])]),_:1},16,["class"])]),_:1}),l(Ge,{text:"Cancelled Appointments"},{activator:u(({props:be})=>[l(wt,Ue({value:"cancelled"},be,{class:["tab-hover",{"tab-active":o.value==="cancelled"}]}),{default:u(()=>[v("div",wxe,[l(Bt,{color:o.value==="cancelled"?"error":"primary",content:L.value.length,inline:"",class:"tab-badge"},{default:u(()=>[l(Ft,{size:"large",class:"tab-icon"},{default:u(()=>[...ut[25]||(ut[25]=[v("img",{src:tme,alt:"cancelled"},null,-1)])]),_:1})]),_:1},8,["color","content"])])]),_:1},16,["class"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(je,{modelValue:o.value,"onUpdate:modelValue":ut[6]||(ut[6]=be=>o.value=be),class:"flex-grow-1"},{default:u(()=>[l(ze,{value:"in-queue",class:"h-100"},{default:u(()=>[l(gt,{"no-gutters":"",class:"h-100"},{default:u(()=>[l(Ze,{cols:"12",class:"pa-2"},{default:u(()=>[l(zn,{modelValue:ie.value,"onUpdate:modelValue":ut[3]||(ut[3]=be=>ie.value=be),placeholder:"Search waiting patients by name...",variant:"outlined",density:"compact","hide-details":"",clearable:"",class:"search-field",onInput:X},{"prepend-inner":u(()=>[l(Ft,{size:"small",color:"secondary"},{default:u(()=>[...ut[26]||(ut[26]=[M("mdi-magnify",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(Ze,{cols:"12",class:"h-100",style:{height:"calc(100% - 80px)"}},{default:u(()=>[v("div",bxe,[Y.value?Y.value.length>0?(U(!0),me(We,{key:1},qt(Y.value.sort((be,Fe)=>new Date(be.appointmentDate+" "+be.appointmentTime)-new Date(Fe.appointmentDate+" "+Fe.appointmentTime)),be=>(U(),pe(Wn,{key:be.id,style:Rt([{textAlign:"left"},{cursor:"pointer",position:"relative",overflow:"visible"}]),density:"compact",class:"ma-2 card-enhanced card-hover-base card-status-waiting",onClick:Fe=>q(be.patientId)},{default:u(()=>[l(Ra,{class:"pb-0 pt-2"},{default:u(()=>[v("div",xxe,K(be.patient_name),1)]),_:2},1024),l(Qe,{class:"py-1"},{default:u(()=>[l(gt,{"no-gutters":"",align:"center"},{default:u(()=>[l(Ze,{cols:"12",class:"d-flex align-center justify-space-between"},{default:u(()=>[v("div",Cxe,[v("span",Sxe,[v("span",{class:ct(new Date(be.appointmentDate+" "+be.appointmentTime)<new Date?"text-error":"text-primary")},K($e(aC)(be.appointmentTime)),3),M(" "+K(`  ${be.patient_gender}`)+K(be.patient_age!==null?`  ${be.patient_age}y`:"")+K(be.contactNumber?`  ${be.contactNumber}`:"")+K(be.importID?`  Import ID: ${be.importID}`:""),1)])]),v("div",Exe,[be.status==="confirmed"?(U(),pe(Ft,{key:0,size:"small",color:"secondary",class:"mr-1"},{default:u(()=>[...ut[27]||(ut[27]=[v("img",{src:nme,alt:"Confirmed"},null,-1)])]),_:1})):ge("",!0),l(Ge,{text:be.category==="walkin"?"Walk-in Patient":"Scheduled Appointment"},{activator:u(({props:Fe})=>[l(Ft,Ue({size:"small",class:"mr-1",color:"secondary"},{ref_for:!0},Fe),{default:u(()=>[M(K(be.category==="walkin"?"mdi-walk":"mdi-calendar-account-outline"),1)]),_:2},1040)]),_:2},1032,["text"]),be.type==="procedure"?(U(),pe(Ge,{key:1,text:"Procedure Appointment"},{activator:u(({props:Fe})=>[l(Ft,Ue({size:"small",class:"mr-1",color:"secondary"},{ref_for:!0},Fe),{default:u(()=>[...ut[28]||(ut[28]=[v("img",{src:Zx,alt:"Procedure"},null,-1)])]),_:1},16)]),_:1})):ge("",!0),be.has_prior_consultation?(U(),pe(Ge,{key:2,text:"Past Consultations Available"},{activator:u(({props:Fe})=>[l(Ft,Ue({size:"small",class:"mr-1",color:"secondary"},{ref_for:!0},Fe),{default:u(()=>[...ut[29]||(ut[29]=[M("mdi-file-eye",-1)])]),_:1},16)]),_:1})):ge("",!0),be.type==="followup"?(U(),pe(Be,{key:3,size:"x-small",color:"primary","text-color":"black",class:"mr-1"},{default:u(()=>[...ut[30]||(ut[30]=[M(" follow-up ",-1)])]),_:1})):ge("",!0)])]),_:2},1024)]),_:2},1024)]),_:2},1024),l(ke,{class:"pa-0 px-4 action-row-highlight"},{default:u(()=>[l(Ge,{text:"Edit Appointment"},{activator:u(({props:Fe})=>[l(zt,Ue({color:"primary",variant:"plain",size:"default"},{ref_for:!0},Fe,{onClick:pn(at=>ye(be),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[l(Ft,{size:"default"},{default:u(()=>[...ut[31]||(ut[31]=[v("img",{src:yv,alt:"Edit"},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024),l(Ge,{text:"Delete Appointment"},{activator:u(({props:Fe})=>[l(zt,Ue({color:"secondary",variant:"plain",size:"default"},{ref_for:!0},Fe,{onClick:pn(at=>Se(be),["stop"]),class:"btn-hover-base"}),{default:u(()=>[l(Ft,{size:"default"},{default:u(()=>[...ut[32]||(ut[32]=[v("img",{src:Nd},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024),l(xt),l(Bn,{permission:"home.queue.bill",tag:"span"},{default:u(()=>[l(Ge,{text:"Generate Receipt"},{activator:u(({props:Fe})=>[l(zt,Ue({color:"primary",variant:"plain",size:"default"},{ref_for:!0},Fe,{onClick:pn(at=>_e(be),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[l(Ft,{size:"default"},{default:u(()=>[...ut[33]||(ut[33]=[M("mdi-currency-inr",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024),l(Bn,{permission:"home.queue.certificate",tag:"span"},{default:u(()=>[l(Ge,{text:"Create Document"},{activator:u(({props:Fe})=>[l(zt,Ue({color:"primary",variant:"plain",size:"default"},{ref_for:!0},Fe,{onClick:pn(at=>rn(be),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[l(Ft,{size:"default"},{default:u(()=>[...ut[34]||(ut[34]=[v("img",{src:eC,alt:"Create Document"},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024),l(Ge,{text:"Mark Complete"},{activator:u(({props:Fe})=>[l(zt,Ue({color:"#2e7d32",variant:"plain",size:"default"},{ref_for:!0},Fe,{onClick:pn(at=>Je(be),["stop"]),class:"btn-hover-base"}),{default:u(()=>[l(Ft,{size:"default"},{default:u(()=>[...ut[35]||(ut[35]=[M("mdi-check-circle-outline",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):Y.value.length===0?(U(),pe(Ze,{key:2,class:"text-center"},{default:u(()=>[l(Wn,{flat:"",color:"surfaceContainer"},{default:u(()=>[l(Ve,{image:$e(EC)},{title:u(()=>[...ut[36]||(ut[36]=[v("div",{class:"text-subtitle-2 mt-8"}," No patients in the wait queue ",-1)])]),text:u(()=>[...ut[37]||(ut[37]=[v("div",{class:"text-caption"}," appointments will show here once you add them to wait queue ",-1)])]),_:1},8,["image"])]),_:1})]),_:1})):ge("",!0):(U(),pe(gt,{key:0,"no-gutters":""},{default:u(()=>[l(Ze,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[l(oa,{indeterminate:"",color:"primary"})]),_:1})]),_:1}))])]),_:1})]),_:1})]),_:1}),l(ze,{value:"completed"},{default:u(()=>[l(gt,{"no-gutters":""},{default:u(()=>[l(Ze,{cols:"12",class:"pa-2"},{default:u(()=>[l(zn,{modelValue:ie.value,"onUpdate:modelValue":ut[4]||(ut[4]=be=>ie.value=be),placeholder:"Search completed patients by name...",variant:"outlined",density:"compact","hide-details":"",clearable:"",class:"search-field",onInput:X},{"prepend-inner":u(()=>[l(Ft,{size:"small",color:"secondary"},{default:u(()=>[...ut[38]||(ut[38]=[M("mdi-magnify",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(Ze,{cols:"12"},{default:u(()=>[v("div",Bxe,[te.value?te.value.length>0?(U(!0),me(We,{key:1},qt(te.value.sort((be,Fe)=>new Date(Fe.appointmentDate+" "+Fe.appointmentTime)-new Date(be.appointmentDate+" "+be.appointmentTime)),be=>(U(),pe(Wn,{key:be.id,style:Rt([{textAlign:"left"},{cursor:"pointer",position:"relative",overflow:"visible"}]),density:"compact",class:"ma-2 card-enhanced card-hover-base card-status-completed",onClick:Fe=>q(be.patientId)},{default:u(()=>[l(Ra,{class:"pb-0 pt-2"},{default:u(()=>[v("div",kxe,K(be.patient_name),1)]),_:2},1024),l(Qe,{class:"py-1"},{default:u(()=>[l(gt,{"no-gutters":"",align:"center"},{default:u(()=>[l(Ze,{cols:"12",class:"d-flex align-center justify-space-between"},{default:u(()=>[v("div",Txe,[v("span",Ixe,[v("span",Fxe,K($e(aC)(be.appointmentTime)),1),M(" "+K(`  ${be.patient_gender}`)+K(be.patient_age!==null?`  ${be.patient_age}y`:"")+K(be.contactNumber?`  ${be.contactNumber}`:"")+K(be.importID?`  Import ID: ${be.importID}`:""),1)])]),v("div",Pxe,[l(Ft,{size:"small",color:"success",class:"mr-1"},{default:u(()=>[...ut[39]||(ut[39]=[M(" mdi-check-circle ",-1)])]),_:1}),l(Ge,{text:be.category==="walkin"?"Walk-in Patient":"Scheduled Appointment"},{activator:u(({props:Fe})=>[l(Ft,Ue({size:"small",class:"mr-1",color:"secondary"},{ref_for:!0},Fe),{default:u(()=>[M(K(be.category==="walkin"?"mdi-walk":"mdi-calendar-account-outline"),1)]),_:2},1040)]),_:2},1032,["text"]),be.type==="procedure"?(U(),pe(Ge,{key:0,text:"Procedure Appointment"},{activator:u(({props:Fe})=>[l(Ft,Ue({size:"small",class:"mr-1",color:"secondary"},{ref_for:!0},Fe),{default:u(()=>[...ut[40]||(ut[40]=[v("img",{src:Zx,alt:"Procedure"},null,-1)])]),_:1},16)]),_:1})):ge("",!0),be.has_prior_consultation?(U(),pe(Ge,{key:1,text:"Past Consultations Available"},{activator:u(({props:Fe})=>[l(Ft,Ue({size:"small",class:"mr-1",color:"secondary"},{ref_for:!0},Fe),{default:u(()=>[...ut[41]||(ut[41]=[M("mdi-file-eye",-1)])]),_:1},16)]),_:1})):ge("",!0),be.type==="followup"?(U(),pe(Be,{key:2,size:"x-small",color:"primary","text-color":"black",class:"mr-1"},{default:u(()=>[...ut[42]||(ut[42]=[M(" follow-up ",-1)])]),_:1})):ge("",!0)])]),_:2},1024)]),_:2},1024)]),_:2},1024),l(ke,{class:"pa-0 px-4 action-row-highlight"},{default:u(()=>[l(Ge,{text:"Edit Appointment"},{activator:u(({props:Fe})=>[l(zt,Ue({color:"primary",variant:"plain",size:"default"},{ref_for:!0},Fe,{onClick:pn(at=>ye(be),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[l(Ft,{size:"default"},{default:u(()=>[...ut[43]||(ut[43]=[v("img",{src:yv,alt:"Edit"},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024),l(Ge,{text:"Delete Appointment"},{activator:u(({props:Fe})=>[l(zt,Ue({color:"secondary",variant:"plain",size:"default"},{ref_for:!0},Fe,{onClick:pn(at=>Se(be),["stop"]),class:"btn-hover-base"}),{default:u(()=>[l(Ft,{size:"default"},{default:u(()=>[...ut[44]||(ut[44]=[v("img",{src:Nd},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024),l(xt),l(Bn,{permission:"home.queue.bill",tag:"span"},{default:u(()=>[l(Ge,{text:"Generate Receipt"},{activator:u(({props:Fe})=>[l(zt,Ue({color:"primary",variant:"plain",size:"default"},{ref_for:!0},Fe,{onClick:pn(at=>_e(be),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[l(Ft,{size:"default"},{default:u(()=>[...ut[45]||(ut[45]=[M("mdi-currency-inr",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024),l(Bn,{permission:"home.queue.certificate",tag:"span"},{default:u(()=>[l(Ge,{text:"Create Document"},{activator:u(({props:Fe})=>[l(zt,Ue({color:"primary",variant:"plain",size:"default"},{ref_for:!0},Fe,{onClick:pn(at=>rn(be),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[l(Ft,{size:"default"},{default:u(()=>[...ut[46]||(ut[46]=[v("img",{src:eC,alt:"Create Document"},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024),l(Ge,{text:"Unmark Complete"},{activator:u(({props:Fe})=>[l(zt,Ue({color:"#f57c00",variant:"plain",size:"default"},{ref_for:!0},Fe,{onClick:pn(at=>Je(be),["stop"]),class:"btn-hover-base"}),{default:u(()=>[l(Ft,{size:"default"},{default:u(()=>[...ut[47]||(ut[47]=[M("mdi-undo",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):ge("",!0):(U(),pe(gt,{key:0,"no-gutters":""},{default:u(()=>[l(Ze,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[l(oa,{indeterminate:"",color:"primary"})]),_:1})]),_:1})),te.value.length===0?(U(),pe(Ze,{key:2,class:"text-center"},{default:u(()=>[l(Wn,{flat:"",color:"surfaceContainer"},{default:u(()=>[l(Ve,{image:$e(EC)},{title:u(()=>[...ut[48]||(ut[48]=[v("div",{class:"text-subtitle-2 mt-8"}," No patients in the completed list ",-1)])]),text:u(()=>[...ut[49]||(ut[49]=[v("div",{class:"text-caption"}," appointments will show here once you completed them ",-1)])]),_:1},8,["image"])]),_:1})]),_:1})):ge("",!0)])]),_:1})]),_:1})]),_:1}),l(ze,{value:"cancelled"},{default:u(()=>[l(gt,{"no-gutters":""},{default:u(()=>[l(Ze,{cols:"12",class:"pa-2"},{default:u(()=>[l(zn,{modelValue:ie.value,"onUpdate:modelValue":ut[5]||(ut[5]=be=>ie.value=be),placeholder:"Search cancelled patients by name...",variant:"outlined",density:"compact","hide-details":"",clearable:"",class:"search-field",onInput:X},{"prepend-inner":u(()=>[l(Ft,{size:"small",color:"secondary"},{default:u(()=>[...ut[50]||(ut[50]=[M("mdi-magnify",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(Ze,{cols:"12"},{default:u(()=>[v("div",Dxe,[L.value?L.value.length>0?(U(!0),me(We,{key:1},qt(L.value.sort((be,Fe)=>new Date(Fe.appointmentDate+" "+Fe.appointmentTime)-new Date(be.appointmentDate+" "+be.appointmentTime)),be=>(U(),pe(Wn,{key:be.id,style:Rt([{textAlign:"left"},{cursor:"pointer",position:"relative",overflow:"visible"}]),density:"compact",class:"ma-2 card-enhanced card-hover-base card-status-cancelled",onClick:Fe=>q(be.patientId)},{default:u(()=>[l(Ra,{class:"pb-0 pt-2"},{default:u(()=>[v("div",Uxe,K(be.patient_name),1)]),_:2},1024),l(Qe,{class:"py-1"},{default:u(()=>[l(gt,{"no-gutters":"",align:"center"},{default:u(()=>[l(Ze,{cols:"12",class:"d-flex align-center justify-space-between"},{default:u(()=>[v("div",Rxe,[v("span",Nxe,[v("span",Vxe,K($e(aC)(be.appointmentTime)),1),M(" "+K(`  ${be.patient_gender}`)+K(be.patient_age!==null?`  ${be.patient_age}y`:"")+K(be.contactNumber?`  ${be.contactNumber}`:"")+K(be.importID?`  Import ID: ${be.importID}`:""),1)])]),v("div",Lxe,[l(Ft,{size:"small",color:"error",class:"mr-1"},{default:u(()=>[...ut[51]||(ut[51]=[M(" mdi-cancel ",-1)])]),_:1}),l(Ge,{text:be.category==="walkin"?"Walk-in Patient":"Scheduled Appointment"},{activator:u(({props:Fe})=>[l(Ft,Ue({size:"small",class:"mr-1",color:"secondary"},{ref_for:!0},Fe),{default:u(()=>[M(K(be.category==="walkin"?"mdi-walk":"mdi-calendar-account-outline"),1)]),_:2},1040)]),_:2},1032,["text"]),be.type==="procedure"?(U(),pe(Ge,{key:0,text:"Procedure Appointment"},{activator:u(({props:Fe})=>[l(Ft,Ue({size:"small",class:"mr-1",color:"secondary"},{ref_for:!0},Fe),{default:u(()=>[...ut[52]||(ut[52]=[v("img",{src:Zx,alt:"Procedure"},null,-1)])]),_:1},16)]),_:1})):ge("",!0),be.has_prior_consultation?(U(),pe(Ge,{key:1,text:"Past Consultations Available"},{activator:u(({props:Fe})=>[l(Ft,Ue({size:"small",class:"mr-1",color:"secondary"},{ref_for:!0},Fe),{default:u(()=>[...ut[53]||(ut[53]=[M("mdi-file-eye",-1)])]),_:1},16)]),_:1})):ge("",!0),be.type==="followup"?(U(),pe(Be,{key:2,size:"x-small",color:"primary","text-color":"black",class:"mr-1"},{default:u(()=>[...ut[54]||(ut[54]=[M(" follow-up ",-1)])]),_:1})):ge("",!0)])]),_:2},1024)]),_:2},1024)]),_:2},1024),l(ke,{class:"pa-0 px-4 action-row-highlight"},{default:u(()=>[l(Ge,{text:"Edit Appointment"},{activator:u(({props:Fe})=>[l(zt,Ue({color:"primary",variant:"plain",size:"default"},{ref_for:!0},Fe,{onClick:pn(at=>ye(be),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[l(Ft,{size:"default"},{default:u(()=>[...ut[55]||(ut[55]=[v("img",{src:yv,alt:"Edit"},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024),l(Ge,{text:"Delete Appointment"},{activator:u(({props:Fe})=>[l(zt,Ue({color:"secondary",variant:"plain",size:"default"},{ref_for:!0},Fe,{onClick:pn(at=>Se(be),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[l(Ft,{size:"default"},{default:u(()=>[...ut[56]||(ut[56]=[v("img",{src:Nd},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024),l(xt),l(Bn,{permission:"home.queue.bill",tag:"span"},{default:u(()=>[l(Ge,{text:"Generate Receipt"},{activator:u(({props:Fe})=>[l(zt,Ue({color:"primary",variant:"plain",size:"default"},{ref_for:!0},Fe,{onClick:pn(at=>_e(be),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[l(Ft,{size:"default"},{default:u(()=>[...ut[57]||(ut[57]=[M("mdi-currency-inr",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024),l(Bn,{permission:"home.queue.certificate",tag:"span"},{default:u(()=>[l(Ge,{text:"Create Document"},{activator:u(({props:Fe})=>[l(zt,Ue({color:"primary",variant:"plain",size:"default"},{ref_for:!0},Fe,{onClick:pn(at=>rn(be),["stop"]),class:"btn-hover-base mr-1"}),{default:u(()=>[l(Ft,{size:"default"},{default:u(()=>[...ut[58]||(ut[58]=[v("img",{src:eC,alt:"Create Document"},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024),l(Ge,{text:"Reschedule"},{activator:u(({props:Fe})=>[l(zt,Ue({color:"#f57c00",variant:"plain",size:"default"},{ref_for:!0},Fe,{onClick:pn(at=>ye(be),["stop"]),class:"btn-hover-base"}),{default:u(()=>[l(Ft,{size:"default"},{default:u(()=>[...ut[59]||(ut[59]=[M("mdi-calendar-edit",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):ge("",!0):(U(),pe(gt,{key:0,"no-gutters":""},{default:u(()=>[l(Ze,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[l(oa,{indeterminate:"",color:"primary"})]),_:1})]),_:1})),L.value.length===0?(U(),pe(Ze,{key:2,class:"text-center"},{default:u(()=>[l(Wn,{flat:"",color:"surfaceContainer"},{default:u(()=>[l(Ve,{image:$e(EC)},{title:u(()=>[...ut[60]||(ut[60]=[v("div",{class:"text-subtitle-2 mt-8"}," No cancelled appointments ",-1)])]),text:u(()=>[...ut[61]||(ut[61]=[v("div",{class:"text-caption"}," cancelled appointments will show here ",-1)])]),_:1},8,["image"])]),_:1})]),_:1})):ge("",!0)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),$e(Uo)?(U(),pe(oe,{key:0,modelValue:i.value,"onUpdate:modelValue":ut[7]||(ut[7]=be=>i.value=be),class:"elevation-24","max-width":"100%"},{default:u(()=>[l(sU,{onClose:re,onAppointmentCreated:de,onError:G,doctorId:j.value,clinicId:J.value,selectedDate:H.value},null,8,["doctorId","clinicId","selectedDate"])]),_:1},8,["modelValue"])):ge("",!0),$e(Uo)?ge("",!0):(U(),pe(se,{key:1,modelValue:i.value,"onUpdate:modelValue":ut[8]||(ut[8]=be=>i.value=be),persistent:"","max-width":"1000px"},{default:u(()=>[l(sU,{onClose:re,onAppointmentCreated:de,onError:G,doctorId:j.value,clinicId:J.value,selectedDate:H.value},null,8,["doctorId","clinicId","selectedDate"])]),_:1},8,["modelValue"])),$e(Uo)?(U(),pe(oe,{key:2,modelValue:A.value,"onUpdate:modelValue":ut[9]||(ut[9]=be=>A.value=be),class:"elevation-24","max-width":"100%"},{default:u(()=>[l(oU,{onClose:Ce,appointment:d.value},null,8,["appointment"])]),_:1},8,["modelValue"])):ge("",!0),$e(Uo)?ge("",!0):(U(),pe(se,{key:3,modelValue:A.value,"onUpdate:modelValue":ut[10]||(ut[10]=be=>A.value=be),persistent:"","max-width":"30%"},{default:u(()=>[l(oU,{onClose:Ce,appointment:d.value},null,8,["appointment"])]),_:1},8,["modelValue"])),$e(Uo)?(U(),pe(oe,{key:4,modelValue:Z.value,"onUpdate:modelValue":ut[11]||(ut[11]=be=>Z.value=be),class:"elevation-24","max-width":"100%"},{default:u(()=>[l(oR,{onClose:Pe,deleteSelectedAppointment:ce.value},null,8,["deleteSelectedAppointment"])]),_:1},8,["modelValue"])):ge("",!0),$e(Uo)?ge("",!0):(U(),pe(se,{key:5,modelValue:Z.value,"onUpdate:modelValue":ut[12]||(ut[12]=be=>Z.value=be),persistent:"","max-width":"30%"},{default:u(()=>[l(oR,{onClose:Pe,deleteSelectedAppointment:ce.value},null,8,["deleteSelectedAppointment"])]),_:1},8,["modelValue"])),l(se,{modelValue:p.value,"onUpdate:modelValue":ut[13]||(ut[13]=be=>p.value=be),persistent:"","max-width":"70%"},{default:u(()=>[g.value?(U(),pe(The,{key:0,appointment:g.value,onClose:De,onReceiptCreated:xe,onEditReceipt:Me,onViewReceipt:Re},null,8,["appointment"])):ge("",!0)]),_:1},8,["modelValue"]),ut[62]||(ut[62]=M()),l(se,{modelValue:y.value,"onUpdate:modelValue":ut[14]||(ut[14]=be=>y.value=be),persistent:"","max-width":"80%"},{default:u(()=>[g.value?(U(),pe(fwe,{key:0,appointment:g.value,onClose:De,onBillCreated:Te,onEditReceipt:Me,onViewBill:nt},null,8,["appointment"])):ge("",!0)]),_:1},8,["modelValue"]),l(se,{modelValue:w.value,"onUpdate:modelValue":ut[15]||(ut[15]=be=>w.value=be),persistent:"","max-width":"70%"},{default:u(()=>[w.value&&b.value?(U(),pe(uO,{key:0,receiptId:b.value,onClose:et,onReceiptUpdated:$t},null,8,["receiptId"])):ge("",!0)]),_:1},8,["modelValue"]),l(se,{modelValue:x.value,"onUpdate:modelValue":ut[16]||(ut[16]=be=>x.value=be),persistent:"","max-width":"85%"},{default:u(()=>[x.value&&T.value?(U(),pe(CH,{key:0,billId:T.value,onClose:lt,onBillUpdated:bt},null,8,["billId"])):ge("",!0)]),_:1},8,["modelValue"]),l(se,{modelValue:F.value,"onUpdate:modelValue":ut[17]||(ut[17]=be=>F.value=be),persistent:"","max-width":"70%"},{default:u(()=>[F.value&&k.value?(U(),pe(gH,{key:0,receiptId:k.value,onClose:Le,onEditReceipt:Kt},null,8,["receiptId"])):ge("",!0)]),_:1},8,["modelValue"]),l(se,{modelValue:S.value,"onUpdate:modelValue":ut[18]||(ut[18]=be=>S.value=be),persistent:"","max-width":"80%"},{default:u(()=>[S.value&&E.value?(U(),pe(xH,{key:0,billId:E.value,onClose:Tt,onEditBill:Pt},null,8,["billId"])):ge("",!0)]),_:1},8,["modelValue"]),l(se,{modelValue:C.value,"onUpdate:modelValue":ut[19]||(ut[19]=be=>C.value=be),persistent:"","max-width":"80%"},{default:u(()=>[D.value?(U(),pe(pxe,{key:0,appointment:D.value,doctorId:j.value,clinicId:J.value,onClose:Lt},null,8,["appointment","doctorId","clinicId"])):ge("",!0)]),_:1},8,["modelValue"])],64)}}},SH=Xt(Mxe,[["__scopeId","data-v-981063c4"]]),Oxe=""+new URL("images/default-BWombGQT.jpg",import.meta.url).href,uf=[{src:Oxe,alt:"evamed logo",url:"https://www.evamed.in"}],Hxe=async(e=null)=>{try{console.log("=== MAKING API CALL TO FETCH CAROUSEL ITEMS ===");let t=e;if(!t){const i=Ti.state.doctorModule?.doctors||[],c=Ti.state.doctorModule?.doctorId,A=i.find(d=>d.id===c);A&&A.doctorSpecialization&&(t=A.doctorSpecialization)}console.log("API call with specialization:",t);const n=new URLSearchParams;n.append("active_only","true"),t&&n.append("specialization",t);const a=`https://api.origamimed.com/advertisements/?${n.toString()}`;console.log("Fetching carousel items from:",a);const r={"Content-Type":"application/json"},s=Ks.currentUser;if(s){const i=await s.getIdToken();r.Authorization=`Bearer ${i}`}const o=await fetch(a,{method:"GET",headers:r,signal:AbortSignal.timeout(1e4)});if(console.log("API Response Status:",o.status),o.ok){const i=await o.json();if(console.log("API Response Data:",i),i.success&&i.data&&i.data.advertisements){const c=i.data.advertisements.map(A=>({src:A.image_url,alt:A.title||"Advertisement",url:A.link_url,title:A.title,description:A.description,id:A.id}));return console.log("Returning",c.length,"carousel items from API"),EH(c),c}else console.warn("API response success but no advertisements found:",i)}else console.error("API request failed with status:",o.status);return console.log("Falling back to default carousel items"),uf.map(i=>({...i,isDefault:!0}))}catch(t){return console.error("Error fetching carousel items:",t),uf.map(n=>({...n,isDefault:!0}))}},EH=e=>{try{if(!e||e.length===0)return;const t={items:e,timestamp:Date.now(),specialization:$xe()};localStorage.setItem("carouselItemsSimple",JSON.stringify(t)),console.log(" Saved",e.length,"items to cache")}catch(t){console.error(" Error saving to cache:",t)}},BC=()=>{try{const e=localStorage.getItem("carouselItemsSimple");if(!e)return console.log(" No cache found"),null;const t=JSON.parse(e);if(t.items&&t.items.length>0){const n=Date.now()-t.timestamp;return console.log(" Found cached items:",t.items.length,"age:",Math.round(n/(60*1e3)),"min"),t.items}return null}catch(e){return console.error(" Error loading from cache:",e),null}},iR=async(e=!1)=>{if(console.log(" getCarouselItemsSimple called, forceRefresh:",e),!e){const t=BC();if(t&&t.length>0)return console.log(" Using cached items"),t}try{console.log(" Fetching from API...");const t=await Hxe();if(t&&t.length>0&&!t[0].isDefault)return console.log(" Got real API data:",t.length,"items"),EH(t),t;console.log(" API failed, trying cache fallback");const n=BC();return n&&n.length>0?(console.log(" Using cache as fallback"),n):(console.log(" No cache available, using defaults"),uf)}catch(t){console.error(" API error:",t);const n=BC();return n&&n.length>0?n:uf}},$xe=()=>{const e=Ti.state.doctorModule?.doctors||[],t=Ti.state.doctorModule?.doctorId;return e.find(a=>a.id===t)?.doctorSpecialization||null},lR=()=>{try{console.log("=== CACHE DEBUG ===");const e=localStorage.getItem("carouselItems");if(e){const n=JSON.parse(e);console.log(" Old cache found:",n.items?.length||0,"items")}else console.log(" No old cache");const t=localStorage.getItem("carouselItemsSimple");if(t){const n=JSON.parse(t);console.log(" New cache found:",n.items?.length||0,"items"),console.log(" First item:",n.items?.[0])}else console.log(" No new cache");console.log("=== END CACHE DEBUG ===")}catch(e){console.error(" Debug error:",e)}},Qxe=e=>typeof e=="object"&&e!==null&&typeof e.src=="string"&&e.src.length>0&&typeof e.alt=="string"&&(e.url===null||typeof e.url=="string"),uR=e=>{console.log("filterValidCarouselItems - input items:",e);const n=e.filter((a,r)=>{const s=Qxe(a);return s||console.log(`filterValidCarouselItems - item ${r} failed validation:`,a),s}).map(a=>{const r={...a};return delete r.isDefault,r});return console.log("filterValidCarouselItems - output items:",n),n},Gxe=()=>{try{const e=localStorage.getItem("carouselState");if(e){const t=JSON.parse(e),n=Date.now()-3600*1e3;if(t.timestamp>n)return t}}catch(e){console.error("Error loading carousel state:",e)}return null},zxe=(e,t)=>{try{const n={currentSlide:e,viewTime:t,timestamp:Date.now()};localStorage.setItem("carouselState",JSON.stringify(n))}catch(n){console.error("Error saving carousel state:",n)}},Kxe={key:0,class:"d-flex align-center justify-center",style:{height:"100%"}},Wxe={class:"carousel-overlay"},jxe={key:0,class:"cta-container"},qxe={class:"progress-container"},Yxe={class:"progress-text"},Xxe={key:2,class:"d-flex align-center justify-center",style:{height:"100%"}},kC=1e4,cR=2e3,Jxe={__name:"home-content",setup(e){const t=Rn(),n=ae(()=>{const k=t.state.doctorModule?.doctors||[],S=t.state.doctorModule?.doctorId;return k.find(E=>E.id===S)||null}),a=ae(()=>n.value?.doctorSpecialization||null),r=V([]),s=V(!0),o=V(0),i=V(0),c=V(null),A=V(!0),d=V(!1),f=V(!1),m=V(!1),h=()=>{zxe(o.value,i.value)},p=()=>{const k=Gxe();return k?(d.value=!0,o.value=k.currentSlide||0,i.value=k.viewTime||0,setTimeout(()=>{d.value=!1},100),!0):!1},y=()=>{if(c.value&&(clearInterval(c.value),c.value=null),!f.value){console.log("Component not active, skipping timer start");return}c.value=setInterval(()=>{A.value&&f.value&&(i.value+=cR,i.value>=kC&&w(),i.value%1e3===0&&h())},cR),console.log("Timer started with ID:",c.value)},g=()=>{c.value&&(clearInterval(c.value),c.value=null)},w=()=>{r.value.length>0&&(o.value=(o.value+1)%r.value.length,i.value=0,h())},b=()=>{d.value||(i.value=0)},x=k=>{if(k)if(window.require)try{const{shell:S}=window.require("electron");S.openExternal(k)}catch(S){console.error("Error opening external URL:",S),window.open(k,"_blank")}else window.open(k,"_blank")},T=async()=>{try{console.log("refreshCarouselItems called - forcing fresh fetch due to doctor change"),s.value=!0,lR();const k=await iR(!0);if(console.log("refreshCarouselItems - freshItems:",k),k&&k.length>0){const S=uR(k);console.log("refreshCarouselItems - validItems:",S),S.length>0?(r.value=S,o.value=0,i.value=0,h()):console.log("refreshCarouselItems - no valid items after filtering, keeping existing items")}else console.log("refreshCarouselItems - no fresh items, keeping existing items")}catch(k){console.error("Error refreshing carousel items:",k)}finally{s.value=!1}},F=()=>{A.value=!document.hidden};return Ke(o,(k,S)=>{!d.value&&S!==k&&(i.value=0),h()}),Ke(r,k=>{k.length>0&&o.value>=k.length&&(o.value=0,i.value=0)},{immediate:!0}),Ke(a,async(k,S)=>{if(console.log("Doctor specialization changed:",{oldSpecialization:S,newSpecialization:k}),m.value){console.log("Already refreshing, skipping...");return}if(S!==void 0&&k!==S&&r.value.length>0){console.log("Refreshing carousel items due to specialization change");try{m.value=!0,await T()}finally{m.value=!1}}},{immediate:!1}),un(async()=>{try{console.log("onMounted - starting carousel setup"),lR(),s.value=!0;const k=await iR();if(console.log("onMounted - received carousel data:",k),k&&k.length>0){const E=uR(k);console.log("onMounted - validItems:",E),E.length>0?r.value=E:(console.log("onMounted - no valid items after filtering, using defaults"),r.value=uf)}else console.log("onMounted - no data, using defaults"),r.value=uf;p()||(o.value=0,i.value=0),o.value>=r.value.length&&(o.value=0,i.value=0)}catch(k){console.error("Error loading carousel items:",k),r.value.length===0&&(r.value=uf)}finally{s.value=!1,await xn(),f.value=!0,y(),document.addEventListener("visibilitychange",F)}}),Ui(()=>{f.value=!1,g(),h(),document.removeEventListener("visibilitychange",F)}),cg(()=>{f.value=!0}),X2(()=>{f.value=!1,h()}),(k,S)=>{const E=I("v-skeleton-loader"),C=I("v-icon"),D=I("v-btn"),P=I("v-progress-linear"),O=I("v-carousel-item"),H=I("v-carousel"),ie=I("v-alert"),Ae=I("v-card");return U(),pe(Ae,{flat:"",color:"surfaceContainer",class:"pa-1",style:{height:"100%"}},{default:u(()=>[s.value?(U(),me("div",Kxe,[l(E,{type:"card",width:"80%",height:"80%",class:"mx-auto"})])):r.value.length>0?(U(),pe(H,{key:1,modelValue:o.value,"onUpdate:modelValue":[S[0]||(S[0]=j=>o.value=j),b],"show-arrows":"hover",cycle:!1,"hide-delimiters":"",style:{height:"100%"}},{default:u(()=>[(U(!0),me(We,null,qt(r.value,(j,J)=>(U(),pe(O,{key:J,src:j.src,alt:j.alt,contain:""},{default:u(()=>[v("div",Wxe,[j.url?(U(),me("div",jxe,[l(D,{variant:"elevated",color:"primary",size:"large",onClick:ue=>x(j.url),class:"btn-hover-enhanced"},{default:u(()=>[S[2]||(S[2]=M(" Know More ",-1)),l(C,{right:"",class:"ml-2"},{default:u(()=>[...S[1]||(S[1]=[M("mdi-open-in-new",-1)])]),_:1})]),_:1},8,["onClick"])])):ge("",!0),v("div",qxe,[l(P,{"model-value":i.value/kC*100,color:"white",height:"3",class:"progress-bar"},null,8,["model-value"]),v("div",Yxe,K(Math.ceil((kC-i.value)/1e3))+"s ",1)])])]),_:2},1032,["src","alt"]))),128))]),_:1},8,["modelValue"])):(U(),me("div",Xxe,[l(ie,{type:"info",variant:"tonal"},{default:u(()=>[...S[3]||(S[3]=[M(" No carousel items available ",-1)])]),_:1})]))]),_:1})}}},Zxe=Xt(Jxe,[["__scopeId","data-v-8073aa0a"]]),eCe={class:"booking-content"},tCe={key:0,class:"booking-patient-name"},nCe={class:"booking-actions"},aCe={__name:"resource-booking-row",props:{booking:{type:Object,required:!0},startColumn:{type:Number,required:!0},spanColumns:{type:Number,required:!0},hasConflict:{type:Boolean,default:!1}},emits:["click","edit","delete"],setup(e,{emit:t}){const n=e,a=t,r=ae(()=>{const f=n.booking.reason;return{procedure:"Procedure",maintenance:"Maintenance",cleaning:"Cleaning"}[f]||"Procedure"}),s=ae(()=>`reason-${n.booking.reason||"procedure"}`),o=ae(()=>{if(!n.booking.patient?.name)return"";const f=n.booking.patient.name;return f.length>10?f.substring(0,10)+"...":f});ae(()=>{const f=aU(n.booking.startDateTime),m=aU(n.booking.endDateTime),h=wo(f,"h:mm a"),p=wo(m,"h:mm a");return`${h} - ${p}`});const i=ae(()=>({gridColumnStart:n.startColumn+2,gridColumnEnd:n.startColumn+n.spanColumns+2})),c=()=>{a("click",n.booking)},A=()=>{a("edit",n.booking)},d=()=>{a("delete",n.booking)};return(f,m)=>{const h=I("v-icon"),p=I("v-btn");return U(),me("div",{class:ct(["booking-row",{"has-conflict":e.hasConflict}]),style:Rt(i.value),onClick:c},[v("div",eCe,[e.booking.reason==="procedure"&&e.booking.patient?(U(),me("div",tCe,K(o.value),1)):(U(),me("div",{key:1,class:ct(["booking-reason",s.value])},K(r.value),3)),v("div",nCe,[l(p,{icon:"",size:"x-small",variant:"text",onClick:pn(A,["stop"]),class:"booking-action-btn"},{default:u(()=>[l(h,{size:"small"},{default:u(()=>[...m[0]||(m[0]=[M("mdi-pencil",-1)])]),_:1})]),_:1}),l(p,{icon:"",size:"x-small",variant:"text",onClick:pn(d,["stop"]),class:"booking-action-btn"},{default:u(()=>[l(h,{size:"small"},{default:u(()=>[...m[1]||(m[1]=[M("mdi-delete",-1)])]),_:1})]),_:1})])])],6)}}},rCe=Xt(aCe,[["__scopeId","data-v-b5fd55e6"]]),sCe={class:"booking-grid-container"},oCe={class:"grid-header sticky-header"},iCe={key:0,class:"hour-label"},lCe={key:1,class:"quarter-marker"},uCe={class:"entity-header-row sticky-row"},cCe={class:"entity-header-cell sticky-cell"},dCe={class:"entity-content"},ACe={class:"entity-name-row"},fCe={class:"entity-name"},mCe={class:"entity-actions"},vCe={key:1,class:"empty-entity-row"},hCe={__name:"resource-booking-grid",props:{entities:{type:Array,default:()=>[]},bookings:{type:Array,default:()=>[]},conflicts:{type:Array,default:()=>[]}},emits:["booking-click","add-booking","edit-entity","delete-entity","edit-booking","delete-booking"],setup(e,{emit:t}){const n=e,a=t,r=ae(()=>{const g=[];for(let x=8;x<=23;x++){const T=x===23?0:45;for(let F=0;F<=T;F+=15){const k=OM(MM(new Date,x),F),S=F===0?wo(k,"h a"):"";g.push({hour:x,minute:F,label:wo(k,"h:mm a"),hourLabel:S,timestamp:k.getTime()})}}return g}),s=ae(()=>[...n.entities].sort((g,w)=>g.name.localeCompare(w.name))),o=g=>n.bookings.filter(w=>(w.entityId||w.entity?.id)===g).sort((w,b)=>w.startDateTime-b.startDateTime),i=g=>{const w=g.startDateTime,b=new Date(w*1e3),x=b.getHours(),T=b.getMinutes();if(x<8)return 0;if(x>23||x===23&&T>0)return 59;const F=x-8,k=Math.floor(T/15)+1,S=F*4+k;return Math.max(0,Math.min(59,S))},c=g=>{const w=i(g),b=g.endDateTime,x=new Date(b*1e3),T=x.getHours(),F=x.getMinutes();if(T<8)return 1;if(T>23||T===23&&F>0)return 60-w;const k=T-8,S=Math.floor(F/15)+1,C=k*4+S-w;return Math.max(1,C)},A=g=>n.conflicts.some(w=>w.booking1?.id===g.id||w.booking2?.id===g.id),d=g=>{a("booking-click",g)},f=g=>{a("edit-booking",g)},m=g=>{a("delete-booking",g)},h=g=>{a("add-booking",g)},p=g=>{a("edit-entity",g)},y=g=>{a("delete-entity",g)};return(g,w)=>{const b=I("v-icon"),x=I("v-btn");return U(),me("div",sCe,[v("div",oCe,[w[0]||(w[0]=v("div",{class:"entity-header-cell sticky-cell"},null,-1)),(U(!0),me(We,null,qt(r.value,(T,F)=>(U(),me("div",{key:F,class:ct(["time-header-cell",{"hour-marker":T.minute===0&&T.hour!==23}])},[T.minute===0&&T.hour!==23?(U(),me("span",iCe,K(T.hourLabel),1)):ge("",!0),T.minute!==0&&T.minute%15===0?(U(),me("div",lCe)):ge("",!0)],2))),128))]),(U(!0),me(We,null,qt(s.value,T=>(U(),me("div",{key:T.id,class:"entity-section"},[v("div",uCe,[v("div",cCe,[v("div",dCe,[v("div",ACe,[v("div",fCe,K(T.name),1),v("div",mCe,[l(x,{icon:"",size:"x-small",variant:"text",onClick:pn(F=>p(T),["stop"]),class:"ml-1"},{default:u(()=>[l(b,{size:"small"},{default:u(()=>[...w[1]||(w[1]=[M("mdi-pencil",-1)])]),_:1})]),_:1},8,["onClick"]),l(x,{icon:"",size:"x-small",variant:"text",onClick:pn(F=>h(T),["stop"]),class:"ml-1",color:"primary"},{default:u(()=>[l(b,{size:"small"},{default:u(()=>[...w[2]||(w[2]=[M("mdi-plus",-1)])]),_:1})]),_:1},8,["onClick"]),l(x,{icon:"",size:"x-small",variant:"text",onClick:pn(F=>y(T),["stop"]),class:"ml-1"},{default:u(()=>[l(b,{size:"small"},{default:u(()=>[...w[3]||(w[3]=[M("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])])])]),(U(!0),me(We,null,qt(r.value,(F,k)=>(U(),me("div",{key:k,class:"time-cell"}))),128))]),o(T.id).length>0?(U(!0),me(We,{key:0},qt(o(T.id),F=>(U(),me("div",{key:F.id,class:"booking-row-wrapper"},[w[4]||(w[4]=v("div",{class:"entity-header-cell sticky-cell"},null,-1)),l(rCe,{booking:F,"start-column":i(F),"span-columns":c(F),"has-conflict":A(F),onClick:d,onEdit:f,onDelete:m},null,8,["booking","start-column","span-columns","has-conflict"])]))),128)):(U(),me("div",vCe,[...w[5]||(w[5]=[v("div",{class:"entity-header-cell sticky-cell"},null,-1),v("div",{class:"empty-booking-cell"},null,-1)])]))]))),128))])}}},pCe=Xt(hCe,[["__scopeId","data-v-a822fa5b"]]),gCe={__name:"resource-entity-create",emits:["close","saved"],setup(e,{emit:t}){const n=t,a=Rn(),{showSuccess:r,showError:s}=ra(),o=V(!0),i=V(!1),c=V(!1),A=V(null),d=[{label:"Room",value:"room"},{label:"Equipment",value:"equipment"}],f=V({name:"",type:"room"}),m=()=>{o.value=!1,n("close")},h=async()=>{if(!A.value)return;const{valid:p}=await A.value.validate();if(p){c.value=!0;try{const y=a.state.clinicId||a.state.clinicModule?.clinicId||1,g={...f.value,clinicId:y},w=await a.dispatch("resourceBookingModule/createEntity",g);if(w.error)throw w.error;r("Entity created successfully"),n("saved"),m()}catch(y){console.error("Error creating entity:",y),s(y.response?.data?.error||y.message||"Failed to create entity")}finally{c.value=!1}}};return(p,y)=>{const g=I("v-icon"),w=I("v-btn"),b=I("v-card-title"),x=I("v-divider"),T=I("v-text-field"),F=I("v-select"),k=I("v-form"),S=I("v-card-text"),E=I("v-spacer"),C=I("v-card-actions"),D=I("v-card"),P=I("v-dialog");return U(),pe(P,{modelValue:o.value,"onUpdate:modelValue":y[3]||(y[3]=O=>o.value=O),persistent:"","max-width":"600px"},{default:u(()=>[l(D,{rounded:"lg"},{default:u(()=>[l(b,{class:"d-flex align-center justify-space-between"},{default:u(()=>[y[5]||(y[5]=v("span",null,"Add Entity",-1)),l(w,{onClick:m,variant:"text",size:"small"},{default:u(()=>[l(g,null,{default:u(()=>[...y[4]||(y[4]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(x),l(S,{class:"py-2"},{default:u(()=>[l(k,{ref_key:"form",ref:A,modelValue:i.value,"onUpdate:modelValue":y[2]||(y[2]=O=>i.value=O)},{default:u(()=>[l(T,{modelValue:f.value.name,"onUpdate:modelValue":y[0]||(y[0]=O=>f.value.name=O),label:"Name *",variant:"outlined",density:"compact",rules:[O=>!!O||"Name is required"],"prepend-inner-icon":"mdi-rename-box",class:"mb-1"},null,8,["modelValue","rules"]),l(F,{modelValue:f.value.type,"onUpdate:modelValue":y[1]||(y[1]=O=>f.value.type=O),items:d,"item-title":"label","item-value":"value",label:"Type *",variant:"outlined",density:"compact",rules:[O=>!!O||"Type is required"],"prepend-inner-icon":"mdi-tag",class:"mb-1"},null,8,["modelValue","rules"])]),_:1},8,["modelValue"])]),_:1}),l(x),l(C,{class:"pa-3"},{default:u(()=>[l(E),l(w,{onClick:m},{default:u(()=>[...y[6]||(y[6]=[M("Cancel",-1)])]),_:1}),l(w,{color:"primary",onClick:h,disabled:!i.value||c.value,loading:c.value},{default:u(()=>[...y[7]||(y[7]=[M(" Create ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},yCe={__name:"resource-entity-edit",props:{entity:{type:Object,required:!0}},emits:["close","saved"],setup(e,{emit:t}){const n=e,a=t,r=Rn(),{showSuccess:s,showError:o}=ra(),i=V(!0),c=V(!1),A=V(!1),d=V(null),f=[{label:"Room",value:"room"},{label:"Equipment",value:"equipment"}],m=V({name:"",type:"room"});Ke(()=>n.entity,y=>{y&&(m.value={name:y.name||"",type:y.type||"room"})},{immediate:!0});const h=()=>{i.value=!1,a("close")},p=async()=>{if(!d.value)return;const{valid:y}=await d.value.validate();if(y){A.value=!0;try{const g=r.state.clinicId||r.state.clinicModule?.clinicId||1,w={...m.value,clinicId:g},b=await r.dispatch("resourceBookingModule/updateEntity",{id:n.entity.id,entityData:w});if(b.error)throw b.error;s("Entity updated successfully"),a("saved"),h()}catch(g){console.error("Error updating entity:",g),o(g.response?.data?.error||g.message||"Failed to update entity")}finally{A.value=!1}}};return(y,g)=>{const w=I("v-icon"),b=I("v-btn"),x=I("v-card-title"),T=I("v-divider"),F=I("v-text-field"),k=I("v-select"),S=I("v-form"),E=I("v-card-text"),C=I("v-spacer"),D=I("v-card-actions"),P=I("v-card"),O=I("v-dialog");return U(),pe(O,{modelValue:i.value,"onUpdate:modelValue":g[3]||(g[3]=H=>i.value=H),persistent:"","max-width":"600px"},{default:u(()=>[l(P,{rounded:"lg"},{default:u(()=>[l(x,{class:"d-flex align-center justify-space-between"},{default:u(()=>[g[5]||(g[5]=v("span",null,"Edit Entity",-1)),l(b,{onClick:h,variant:"text",size:"small"},{default:u(()=>[l(w,null,{default:u(()=>[...g[4]||(g[4]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(T),l(E,{class:"py-2"},{default:u(()=>[l(S,{ref_key:"form",ref:d,modelValue:c.value,"onUpdate:modelValue":g[2]||(g[2]=H=>c.value=H)},{default:u(()=>[l(F,{modelValue:m.value.name,"onUpdate:modelValue":g[0]||(g[0]=H=>m.value.name=H),label:"Name *",variant:"outlined",density:"compact",rules:[H=>!!H||"Name is required"],"prepend-inner-icon":"mdi-rename-box",class:"mb-1"},null,8,["modelValue","rules"]),l(k,{modelValue:m.value.type,"onUpdate:modelValue":g[1]||(g[1]=H=>m.value.type=H),items:f,"item-title":"label","item-value":"value",label:"Type *",variant:"outlined",density:"compact",rules:[H=>!!H||"Type is required"],"prepend-inner-icon":"mdi-tag",class:"mb-1"},null,8,["modelValue","rules"])]),_:1},8,["modelValue"])]),_:1}),l(T),l(D,{class:"pa-3"},{default:u(()=>[l(C),l(b,{onClick:h},{default:u(()=>[...g[6]||(g[6]=[M("Cancel",-1)])]),_:1}),l(b,{color:"primary",onClick:p,disabled:!c.value||A.value,loading:A.value},{default:u(()=>[...g[7]||(g[7]=[M(" Update ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},_Ce={class:"w-100"},wCe={class:"text-subtitle-2 mb-1"},bCe={class:"text-caption",style:{opacity:"0.7"}},xCe={__name:"resource-booking-form",props:{booking:{type:Object,default:null},entities:{type:Array,default:()=>[]},selectedDate:{type:String,default:()=>Un()},preselectedEntity:{type:Object,default:null}},emits:["close","saved"],setup(e,{emit:t}){const n=e,a=t,r=Rn(),{showSuccess:s,showError:o}=ra(),i=V(!0),c=V(!1),A=V(!1),d=V(null),f=V(null);let m=null,h=null;const p=V(!1),y=V([]),g=V(""),w=V(null),b=V(!1),x=[{label:"Procedure",value:"procedure"},{label:"Maintenance",value:"maintenance"},{label:"Cleaning",value:"cleaning"}],T=V({entityId:n.preselectedEntity?.id||null,startDate:n.selectedDate,startTime:new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Kolkata"}),endDate:n.selectedDate,endTime:"",reason:"procedure",patientId:null}),F=V(!1),k=V([]),S=ae(()=>!!n.booking),E=ae(()=>{const N=[];for(let q=7;q<24;q++)for(let Q=0;Q<60;Q+=15){const ee=`${q.toString().padStart(2,"0")}:${Q.toString().padStart(2,"0")}`,z=new Date;z.setHours(q,Q,0,0);const X=z.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});N.push({title:X,value:ee})}return N}),C=N=>{if(!N)return N;const[q,Q]=N.split(":").map(Number),ee=Math.round(Q/15)*15,z=q+Math.floor(ee/60),X=ee%60;return`${z.toString().padStart(2,"0")}:${X.toString().padStart(2,"0")}`},D=()=>{if(T.value.startTime){const N=C(T.value.startTime),[q,Q]=N.split(":").map(Number),ee=Q+30,z=q+Math.floor(ee/60),X=ee%60;T.value.endTime=`${z.toString().padStart(2,"0")}:${X.toString().padStart(2,"0")}`,T.value.startTime!==N&&(T.value.startTime=N)}};Ke(()=>T.value.startTime,()=>{!S.value&&T.value.startTime&&!T.value.endTime&&D()},{immediate:!0}),Ke(()=>n.booking,N=>{if(N){const q=new Date(N.startDateTime*1e3),Q=new Date(N.endDateTime*1e3),ee=`${q.getHours().toString().padStart(2,"0")}:${q.getMinutes().toString().padStart(2,"0")}`,z=`${Q.getHours().toString().padStart(2,"0")}:${Q.getMinutes().toString().padStart(2,"0")}`;T.value={entityId:N.entityId||N.entity?.id,startDate:q.toISOString().split("T")[0],startTime:C(ee),endDate:Q.toISOString().split("T")[0],endTime:C(z),reason:N.reason||"procedure",patientId:N.patientId||null},N.patient&&(w.value=N.patient)}else{const q=new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Kolkata"});let Q=C(q);const[ee]=Q.split(":").map(Number);ee<7&&(Q="07:00"),T.value={entityId:n.preselectedEntity?.id||null,startDate:n.selectedDate,startTime:Q,endDate:n.selectedDate,endTime:"",reason:"procedure",patientId:null},w.value=null,D()}},{immediate:!0}),Ke(()=>n.preselectedEntity,N=>{!S.value&&N&&!T.value.entityId&&(T.value.entityId=N.id)},{immediate:!0});const P=N=>!N||!T.value.startDate?!0:N<T.value.startDate?"End date must be on or after start date":!0,O=N=>!N||!T.value.startTime?!0:T.value.startDate===T.value.endDate&&N<=T.value.startTime?"End time must be after start time":!0,H=N=>N?`${N.name||""} (${N.contactNumber||N.contact_number||""})`:"",ie=ae(()=>!g.value||g.value.length<1?"Start typing to search for patients":b.value?`No patients found matching "${g.value}"`:""),Ae=async N=>{if(!N||N.length<1){y.value=[],b.value=!1;return}h&&h.abort(),h=new AbortController,p.value=!0,b.value=!1;try{const q=await nT(N,{signal:h.signal});h.signal.aborted||(y.value=q.data,(!y.value||y.value.length===0)&&(b.value=!0))}catch(q){q.name!=="AbortError"&&(console.error("Error fetching patients:",q),b.value=!0)}finally{h?.signal.aborted||(p.value=!1)}};Ke(g,N=>{m&&clearTimeout(m),b.value=!1,m=setTimeout(()=>{Ae(N)},300)}),Ke(w,N=>{N?T.value.patientId=N.id:T.value.patientId=null});const j=()=>{!S.value&&T.value.startDate&&!T.value.endDate&&(T.value.endDate=T.value.startDate)},J=()=>{!S.value&&T.value.startTime&&T.value.startDate===T.value.endDate&&D()},ue=()=>{T.value.endDate<T.value.startDate&&(T.value.startDate=T.value.endDate)},ne=()=>{},Y=async()=>{if(!(!T.value.entityId||!T.value.startDate||!T.value.startTime||!T.value.endDate||!T.value.endTime))try{const N=new Date(`${T.value.startDate}T${T.value.startTime}:00`),q=new Date(`${T.value.endDate}T${T.value.endTime}:00`),Q=Math.floor(N.getTime()/1e3),ee=Math.floor(q.getTime()/1e3),z=S.value?n.booking.id:null,X=await r.dispatch("resourceBookingModule/checkConflicts",{entityId:T.value.entityId,startDateTime:Q.toString(),endDateTime:ee.toString(),excludeId:z,signal:null});X.data&&(F.value=X.data.hasConflicts,k.value=X.data.conflicts||[])}catch(N){console.error("Error checking conflicts:",N)}};Ke([()=>T.value.entityId,()=>T.value.startDate,()=>T.value.startTime,()=>T.value.endDate,()=>T.value.endTime],()=>{c.value&&Y()},{deep:!0});const te=()=>{i.value=!1,a("close")},L=async()=>{if(!d.value)return;const{valid:N}=await d.value.validate();if(N){A.value=!0;try{const q=`${T.value.startDate}T${T.value.startTime}:00`,Q=`${T.value.endDate}T${T.value.endTime}:00`,ee=new Date(q),z=new Date(Q),X=Math.floor(ee.getTime()/1e3),le=Math.floor(z.getTime()/1e3);if(isNaN(X)||isNaN(le)||X<=0||le<=0)throw new Error("Invalid date or time. Please check your input.");const re={entityId:T.value.entityId,patientId:T.value.patientId||null,reason:T.value.reason,startDateTime:X.toString(),endDateTime:le.toString()};let de;if(S.value?de=await r.dispatch("resourceBookingModule/updateBooking",{id:n.booking.id,bookingData:re}):de=await r.dispatch("resourceBookingModule/createBooking",re),de.error)throw de.error;de.hasConflicts?s(S.value?"Booking updated (with conflicts)":"Booking created (with conflicts)"):s(S.value?"Booking updated successfully":"Booking created successfully"),a("saved"),te()}catch(q){console.error("Error saving booking:",q),o(q.response?.data?.error||q.message||`Failed to ${S.value?"update":"create"} booking`)}finally{A.value=!1}}};return da(()=>{m&&(clearTimeout(m),m=null),h&&(h.abort(),h=null)}),(N,q)=>{const Q=I("v-icon"),ee=I("v-btn"),z=I("v-card-title"),X=I("v-divider"),le=I("v-select"),re=I("v-text-field"),de=I("v-col"),G=I("v-row"),Z=I("v-list-item"),ce=I("v-autocomplete"),Se=I("v-alert"),Pe=I("v-form"),ye=I("v-card-text"),Ce=I("v-spacer"),_e=I("v-card-actions"),De=I("v-card"),xe=I("v-dialog");return U(),pe(xe,{modelValue:i.value,"onUpdate:modelValue":q[11]||(q[11]=Te=>i.value=Te),persistent:"","max-width":"700px"},{default:u(()=>[l(De,{rounded:"lg"},{default:u(()=>[l(z,{class:"d-flex align-center justify-space-between"},{default:u(()=>[v("span",null,K(S.value?"Edit Booking":"Create Booking"),1),l(ee,{onClick:te,variant:"text",size:"small"},{default:u(()=>[l(Q,null,{default:u(()=>[...q[12]||(q[12]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(X),l(ye,{class:"py-2"},{default:u(()=>[l(Pe,{ref_key:"form",ref:d,modelValue:c.value,"onUpdate:modelValue":q[10]||(q[10]=Te=>c.value=Te)},{default:u(()=>[S.value?ge("",!0):(U(),pe(le,{key:0,modelValue:T.value.entityId,"onUpdate:modelValue":q[0]||(q[0]=Te=>T.value.entityId=Te),items:e.entities,"item-title":"name","item-value":"id",label:"Entity *",variant:"outlined",density:"compact",rules:[Te=>!!Te||"Entity is required"],"prepend-inner-icon":"mdi-office-building",class:"mb-2"},null,8,["modelValue","items","rules"])),l(G,{dense:""},{default:u(()=>[l(de,{cols:"12",md:"6"},{default:u(()=>[l(re,{modelValue:T.value.startDate,"onUpdate:modelValue":[q[1]||(q[1]=Te=>T.value.startDate=Te),j],label:"Start Date *",type:"date",variant:"outlined",density:"compact",rules:[Te=>!!Te||"Start date is required"],"prepend-inner-icon":"mdi-calendar",class:"date-input",onClick:q[2]||(q[2]=Te=>Te.target.showPicker&&Te.target.showPicker())},null,8,["modelValue","rules"])]),_:1}),l(de,{cols:"12",md:"6"},{default:u(()=>[l(le,{modelValue:T.value.startTime,"onUpdate:modelValue":[q[3]||(q[3]=Te=>T.value.startTime=Te),J],items:E.value,"item-title":"title","item-value":"value",label:"Start Time *",variant:"outlined",density:"compact",rules:[Te=>!!Te||"Start time is required"],"prepend-inner-icon":"mdi-clock-outline"},null,8,["modelValue","items","rules"])]),_:1})]),_:1}),l(G,{dense:""},{default:u(()=>[l(de,{cols:"12",md:"6"},{default:u(()=>[l(re,{modelValue:T.value.endDate,"onUpdate:modelValue":[q[4]||(q[4]=Te=>T.value.endDate=Te),ue],label:"End Date *",type:"date",variant:"outlined",density:"compact",rules:[Te=>!!Te||"End date is required",P],"prepend-inner-icon":"mdi-calendar",class:"date-input",onClick:q[5]||(q[5]=Te=>Te.target.showPicker&&Te.target.showPicker())},null,8,["modelValue","rules"])]),_:1}),l(de,{cols:"12",md:"6"},{default:u(()=>[l(le,{modelValue:T.value.endTime,"onUpdate:modelValue":[q[6]||(q[6]=Te=>T.value.endTime=Te),ne],items:E.value,"item-title":"title","item-value":"value",label:"End Time *",variant:"outlined",density:"compact",rules:[Te=>!!Te||"End time is required",O],"prepend-inner-icon":"mdi-clock-outline"},null,8,["modelValue","items","rules"])]),_:1})]),_:1}),l(le,{modelValue:T.value.reason,"onUpdate:modelValue":q[7]||(q[7]=Te=>T.value.reason=Te),items:x,"item-title":"label","item-value":"value",label:"Reason *",variant:"outlined",density:"compact",rules:[Te=>!!Te||"Reason is required"],"prepend-inner-icon":"mdi-tag",class:"mb-2"},null,8,["modelValue","rules"]),l(ce,{ref_key:"searchRef",ref:f,modelValue:w.value,"onUpdate:modelValue":q[8]||(q[8]=Te=>w.value=Te),search:g.value,"onUpdate:search":q[9]||(q[9]=Te=>g.value=Te),items:y.value,loading:p.value,"item-title":H,"item-value":"id","return-object":"",label:"Patient (Optional)",variant:"outlined",density:"compact",clearable:"","prepend-inner-icon":"mdi-account-search","no-data-text":ie.value,"menu-props":{maxHeight:"400px",closeOnContentClick:!1},class:"mb-2"},{item:u(({props:Te,item:Me})=>[l(Z,Ue(Te,{class:"py-2"}),{default:u(()=>[v("div",_Ce,[v("div",wCe," ID: "+K(Me.raw.id)+"  "+K(Me.raw.gender)+", "+K(Me.raw.age)+" yrs ",1),v("div",bCe,K(Me.raw.contactNumber||Me.raw.contact_number||""),1)])]),_:2},1040)]),_:1},8,["modelValue","search","items","loading","no-data-text"]),F.value&&k.value.length>0?(U(),pe(Se,{key:1,type:"warning",variant:"tonal",density:"compact",class:"mb-2"},{default:u(()=>[M(" This booking conflicts with "+K(k.value.length)+" existing booking(s). Booking will still be created. ",1)]),_:1})):ge("",!0)]),_:1},8,["modelValue"])]),_:1}),l(X),l(_e,{class:"pa-3"},{default:u(()=>[l(Ce),l(ee,{onClick:te},{default:u(()=>[...q[13]||(q[13]=[M("Cancel",-1)])]),_:1}),l(ee,{color:"primary",onClick:L,disabled:!c.value||A.value,loading:A.value},{default:u(()=>[M(K(S.value?"Update":"Create"),1)]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},CCe=Xt(xCe,[["__scopeId","data-v-011b8917"]]),SCe={key:0,class:"d-flex justify-center align-center",style:{height:"100%"}},ECe={__name:"resource-booking",setup(e){const t=Rn(),{showSuccess:n,showError:a}=ra(),r=V(!1),s=V(!1),o=V(!1),i=V(!1),c=V(null),A=V(null),d=V(null);let f=null,m=null;const h=ae(()=>t.getters["resourceBookingModule/filteredEntities"]),p=ae(()=>t.getters["resourceBookingModule/bookingsByDate"]),y=ae(()=>t.getters["resourceBookingModule/conflicts"]),g=ae({get:()=>t.state.resourceBookingModule.selectedDate||Un(),set:q=>t.commit("resourceBookingModule/setSelectedDate",q)});ae(()=>t.state.resourceBookingModule.selectedEntity);const w=ae({get:()=>t.state.resourceBookingModule.entitySearchQuery||"",set:q=>t.commit("resourceBookingModule/setEntitySearchQuery",q)}),b=ae(()=>t.state.resourceBookingModule.isLoading),x=ae(()=>t.state.resourceBookingModule.isRefreshing),T=ae(()=>h.value),F=q=>{if(!q)return"Select Date";const Q=Un(),ee=new Date(Date.now()+330*60*1e3-1440*60*1e3).toISOString().slice(0,10),z=new Date(Date.now()+330*60*1e3+1440*60*1e3).toISOString().slice(0,10);if(q===Q)return"Today";if(q===ee)return"Yesterday";if(q===z)return"Tomorrow";const X=new Date(q+"T12:00:00");return X.toLocaleDateString("en-IN",{day:"numeric",month:"short",year:X.getFullYear()!==new Date().getFullYear()?"numeric":void 0})},k=async q=>{let Q;typeof q=="string"?Q=q.includes("T")?q.split("T")[0]:q:q instanceof Date?Q=wo(q,"yyyy-MM-dd"):Q=Un(),g.value=Q,r.value=!1,await L()},S=()=>{f&&clearTimeout(f),f=setTimeout(()=>{},300)},E=()=>{s.value=!0},C=()=>{s.value=!1},D=q=>{c.value=q,o.value=!0},P=()=>{o.value=!1,c.value=null},O=async()=>{await te()},H=q=>{D(q)},ie=async q=>{if(confirm(`Are you sure you want to delete "${q.name}"? This will also delete all bookings for this entity.`))try{const Q=await t.dispatch("resourceBookingModule/deleteEntity",q.id);if(Q.error)throw Q.error;n("Entity deleted successfully"),await te(),await L()}catch(Q){a(Q.response?.data?.error||Q.message||"Failed to delete entity")}},Ae=(q=null)=>{d.value=q,A.value=null,i.value=!0},j=q=>{A.value=q,i.value=!0},J=async q=>{if(confirm("Are you sure you want to delete this booking?"))try{const Q=await t.dispatch("resourceBookingModule/deleteBooking",q.id);if(Q.error)throw Q.error;n("Booking deleted successfully"),await L()}catch(Q){a(Q.response?.data?.error||Q.message||"Failed to delete booking")}},ue=()=>{i.value=!1,A.value=null,d.value=null},ne=async()=>{await L()},Y=async()=>{await t.dispatch("resourceBookingModule/refreshBookings")},te=async()=>{m&&m.abort(),m=new AbortController,await t.dispatch("resourceBookingModule/fetchEntities",{signal:m.signal})},L=async()=>{m&&m.abort(),g.value||(g.value=Un()),m=new AbortController;try{const q=await t.dispatch("resourceBookingModule/fetchBookings",{date:g.value,signal:m.signal});q.error&&console.error("Error fetching bookings:",q.error)}catch(q){console.error("Error in fetchBookings:",q)}},N=async()=>{try{const q=t.state.resourceBookingModule.selectedDate;q?g.value=q:g.value=Un(),t.commit("resourceBookingModule/setSelectedDate",g.value),await te(),g.value&&await L()}catch(q){console.error("Error initializing resource booking component:",q),a("Failed to initialize resource bookings. Please refresh the page.")}};return un(async()=>{await N()}),cg(async()=>{(h.value.length===0||!g.value)&&await N()}),da(()=>{f&&(clearTimeout(f),f=null),m&&(m.abort(),m=null)}),(q,Q)=>{const ee=I("v-icon"),z=I("v-btn"),X=I("v-date-picker"),le=I("v-menu"),re=I("v-col"),de=I("v-text-field"),G=I("v-tooltip"),Z=I("v-row"),ce=I("v-card"),Se=I("v-progress-circular"),Pe=I("v-empty-state"),ye=I("v-alert"),Ce=I("v-dialog");return U(),pe(ce,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex flex-column"},{default:u(()=>[l(ce,{rounded:"0",class:"pa-2",color:"surfaceContainerHigh",style:{"min-height":"56px"}},{default:u(()=>[l(Z,{"no-gutters":"",align:"center",class:"header-row"},{default:u(()=>[l(re,{cols:"auto",class:"d-flex align-center pr-2"},{default:u(()=>[l(le,{modelValue:r.value,"onUpdate:modelValue":Q[1]||(Q[1]=_e=>r.value=_e),"close-on-content-click":!1,transition:"scale-transition","offset-y":""},{activator:u(({props:_e})=>[l(z,Ue(_e,{variant:"outlined",size:"small",rounded:"x-small",class:"btn-hover-enhanced",style:{"min-width":"auto"}}),{default:u(()=>[M(K(F(g.value))+" ",1),l(ee,{size:"small",class:"ml-1"},{default:u(()=>[...Q[7]||(Q[7]=[M("mdi-calendar",-1)])]),_:1})]),_:1},16)]),default:u(()=>[l(X,{modelValue:g.value,"onUpdate:modelValue":[Q[0]||(Q[0]=_e=>g.value=_e),k],color:"primary",locale:"en-IN"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),l(re,{class:"d-flex justify-center"},{default:u(()=>[l(de,{modelValue:w.value,"onUpdate:modelValue":[Q[2]||(Q[2]=_e=>w.value=_e),S],label:"Filter entities",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-magnify",clearable:"","hide-details":"",style:{"max-width":"300px"}},null,8,["modelValue"])]),_:1}),l(re,{cols:"auto",class:"d-flex justify-end align-center gap-1"},{default:u(()=>[l(G,{text:"Add Entity"},{activator:u(({props:_e})=>[l(z,Ue({rounded:"x-small",onClick:E,size:"small",variant:"outlined"},_e,{class:"btn-hover-enhanced",style:{"min-width":"auto"}}),{default:u(()=>[...Q[8]||(Q[8]=[M(" Add Entity ",-1)])]),_:1},16)]),_:1}),l(G,{text:"Refresh Bookings"},{activator:u(({props:_e})=>[l(z,Ue({rounded:"x-small",onClick:Y,size:"small"},_e,{class:"btn-hover-enhanced",loading:x.value,disabled:x.value,style:{"min-width":"auto"}}),{default:u(()=>[x.value?ge("",!0):(U(),pe(ee,{key:0,size:"small"},{default:u(()=>[...Q[9]||(Q[9]=[v("img",{src:Sg,alt:"Refresh",style:{filter:"invert(1)"}},null,-1)])]),_:1}))]),_:1},16,["loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1}),l(ce,{flat:"",class:"ma-2",color:"surfaceContainer",style:{height:"calc(100% - 16px)"}},{default:u(()=>[b.value?(U(),me("div",SCe,[l(Se,{indeterminate:"",color:"primary"})])):T.value.length===0?(U(),pe(Pe,{key:1},{title:u(()=>[...Q[10]||(Q[10]=[v("div",{class:"text-subtitle-2 mt-4"}," No entities available ",-1)])]),text:u(()=>[l(z,{variant:"outlined",onClick:E},{default:u(()=>[...Q[11]||(Q[11]=[M("Add Entity",-1)])]),_:1})]),_:1})):(U(),me(We,{key:2},[$e(t).state.resourceBookingModule.error?(U(),pe(ye,{key:0,type:"error",variant:"tonal",density:"compact",class:"ma-2",dismissible:"","onClick:close":Q[3]||(Q[3]=_e=>$e(t).commit("resourceBookingModule/setError",null))},{default:u(()=>[M(K($e(t).state.resourceBookingModule.error?.response?.data?.error||$e(t).state.resourceBookingModule.error?.message||"An error occurred"),1)]),_:1})):ge("",!0),l(pCe,{entities:T.value,bookings:p.value,conflicts:y.value,onBookingClick:j,onAddBooking:Ae,onEditEntity:H,onDeleteEntity:ie,onEditBooking:j,onDeleteBooking:J},null,8,["entities","bookings","conflicts"])],64))]),_:1}),l(Ce,{modelValue:s.value,"onUpdate:modelValue":Q[4]||(Q[4]=_e=>s.value=_e),persistent:"","max-width":"600px"},{default:u(()=>[s.value?(U(),pe(gCe,{key:0,onClose:C,onSaved:O})):ge("",!0)]),_:1},8,["modelValue"]),l(Ce,{modelValue:o.value,"onUpdate:modelValue":Q[5]||(Q[5]=_e=>o.value=_e),persistent:"","max-width":"600px"},{default:u(()=>[o.value&&c.value?(U(),pe(yCe,{key:0,entity:c.value,onClose:P,onSaved:O},null,8,["entity"])):ge("",!0)]),_:1},8,["modelValue"]),l(Ce,{modelValue:i.value,"onUpdate:modelValue":Q[6]||(Q[6]=_e=>i.value=_e),persistent:"","max-width":"700px"},{default:u(()=>[i.value?(U(),pe(CCe,{key:0,booking:A.value,entities:h.value,"selected-date":g.value,"preselected-entity":d.value,onClose:ue,onSaved:ne},null,8,["booking","entities","selected-date","preselected-entity"])):ge("",!0)]),_:1},8,["modelValue"])]),_:1})}}},BCe=Xt(ECe,[["__scopeId","data-v-97873da0"]]),kCe={class:"scrollable-content"},TCe={class:"scrollable-content"},ICe={class:"text-h6 mb-4"},FCe=["aria-label"],PCe={key:0,class:"d-flex align-center justify-center",style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",background:"rgba(255, 255, 255, 0.95)","z-index":"9999"}},DCe={__name:"home-page",setup(e){const t=Rn(),n=zf(),a=Al(),r=V(null);let s=null;try{window.require&&(s=window.require("electron").ipcRenderer)}catch(E){console.error("Failed to access ipcRenderer:",E)}const o=V(0),i=V(new Map),c=V({}),A=V(!1),d=V(""),f=V(!1),m=V(""),h=V(null),p=V(new Map),y=V(100),g=V([{title:"Queue"},{title:"Appointments",url:"https://calendar.google.com/",id:"calendar"},{title:"Procedure Bookings",id:"procedure-bookings"}]);g.value.slice(1).forEach(E=>{E.id&&(c.value[E.id]=!1)}),un(async()=>{try{await w(),n.params.tab==="1"?o.value=1:o.value=0}catch(E){console.error("Error during initialization:",E),h.value="Failed to initialize component properly"}if(s)try{s.on("external-site-loading",(E,{siteId:C,isLoading:D})=>{Object.prototype.hasOwnProperty.call(c.value,C)&&(c.value[C]=D)}),s.on("external-site-loaded",(E,{siteId:C})=>{if(Object.prototype.hasOwnProperty.call(c.value,C)){c.value[C]=!1;const D=p.value.get(C);D&&(clearTimeout(D),p.value.delete(C))}}),s.on("external-site-error",(E,{siteId:C,error:D})=>{if(Object.prototype.hasOwnProperty.call(c.value,C)){c.value[C]=!1,f.value=!0,m.value=`Failed to load ${C}: ${D}`;const P=p.value.get(C);P&&(clearTimeout(P),p.value.delete(C))}})}catch(E){console.error("Error setting up IPC listeners:",E),h.value="Failed to initialize external site integration"}try{window.addEventListener("doctor-selection-changed",k),window.addEventListener("clinic-selection-changed",S)}catch(E){console.error("Error setting up event listeners:",E),h.value="Failed to initialize data refresh listeners"}}),Ke(o,async(E,C)=>{try{if(E===1&&await w(),E>=1&&E<g.value.length){const D=g.value[E];D.url&&D.id&&setTimeout(()=>{xn(()=>{T(D.id,D.url)})},500)}if(C>=1&&C<g.value.length){const D=g.value[C];D.url&&D.id&&F(D.id)}}catch(D){console.error("Error in tab watcher:",D),h.value="Failed to switch tabs properly"}}),Ke(()=>a.currentRoute.value.params.tab,E=>{if(E){let C=0;E==="1"&&(C=1),C!==o.value&&(console.log("Route tab parameter changed, switching to tab:",C),o.value=C)}}),da(()=>{try{g.value.slice(1).forEach(E=>{if(E.url&&E.id)try{F(E.id)}catch(C){console.error(`Error closing external site ${E.id}:`,C)}}),s&&(s.removeAllListeners("external-site-loading"),s.removeAllListeners("external-site-loaded"),s.removeAllListeners("external-site-error")),window.removeEventListener("doctor-selection-changed",k),window.removeEventListener("clinic-selection-changed",S),p.value.forEach(E=>clearTimeout(E)),p.value.clear(),i.value.clear()}catch(E){console.error("Error during component cleanup:",E)}});const w=async()=>{try{if(s){const E=await s.invoke("get-zoom-level");E.success?y.value=E.zoomFactor||100:console.error("Failed to get zoom level:",E.error)}else console.warn("ipcRenderer not available for zoom check")}catch(E){console.error("Error checking zoom level:",E)}},b=(E,C)=>{C?i.value.set(E,C):i.value.delete(E)},x=E=>i.value.get(E)||null,T=async(E,C)=>{try{if(E==="calendar"&&(await w(),y.value!==100))return;xn(()=>{const D=x(E);if(!(D instanceof HTMLElement)){console.error(`${E}Container is not a DOM element`),f.value=!0,m.value=`Failed to load ${E}. Please try again.`;return}if(!s){console.error("ipcRenderer is not available");try{window.open(C,"_blank"),A.value=!0,d.value=`${E} opened in external browser`}catch{f.value=!0,m.value=`Failed to open ${E}`}return}if(D){c.value[E]=!0;const P=setTimeout(()=>{c.value[E]=!1,f.value=!0,m.value=`${E} is taking too long to load`},15e3);p.value.set(E,P);const O=D.getBoundingClientRect(),H=12,ie=4;s.send("open-external-site",{siteId:E,url:C,bounds:{x:O.left+ie,y:O.top+ie,width:O.width-ie*2,height:O.height-ie*2}})}else console.error(`${E}Container is not defined`),f.value=!0,m.value=`Failed to initialize ${E} container`})}catch(D){console.error("Error opening external site:",D),c.value[E]=!1,f.value=!0,m.value="Failed to open external application"}},F=E=>{try{xn(()=>{c.value[E]=!1;const C=p.value.get(E);C&&(clearTimeout(C),p.value.delete(E)),s?s.send("close-external-site",{siteId:E}):console.error("ipcRenderer is not available")})}catch(C){console.error("Error closing external site:",C)}},k=async E=>{try{const{doctorId:C,doctorName:D}=E.detail;if(console.log("Doctor changed:",D),!C){console.warn("No doctorId provided in doctor change event");return}if(!r.value?.refreshAppointments){console.warn("AppointmentQueue component not ready for refresh");return}const P=t.state.clinicModule?.clinicId;if(!P){console.warn("No clinicId available for appointment refresh");return}await r.value.refreshAppointments(C,P)}catch(C){console.error("Error handling doctor change:",C),f.value=!0,m.value="Failed to refresh appointments after doctor change"}},S=async E=>{try{const{clinicId:C,clinicName:D}=E.detail;if(console.log("Clinic changed:",D),!C){console.warn("No clinicId provided in clinic change event");return}if(!r.value?.refreshAppointments){console.warn("AppointmentQueue component not ready for refresh");return}const P=t.state.doctorModule?.doctorId;if(!P){console.warn("No doctorId available for appointment refresh");return}await r.value.refreshAppointments(P,C)}catch(C){console.error("Error handling clinic change:",C),f.value=!0,m.value="Failed to refresh appointments after clinic change"}};return(E,C)=>{const D=I("v-alert"),P=I("v-tab"),O=I("v-tabs"),H=I("v-card"),ie=I("v-col"),Ae=I("v-row"),j=I("v-snackbar"),J=I("v-window-item"),ue=I("v-icon"),ne=I("v-card-title"),Y=I("v-card-text"),te=I("v-skeleton-loader"),L=I("v-window"),N=I("v-main");return U(),pe(N,null,{default:u(()=>[h.value?(U(),pe(D,{key:0,type:"error",dismissible:"","onClick:close":C[0]||(C[0]=q=>h.value=null),class:"ma-3"},{default:u(()=>[M(K(h.value),1)]),_:1})):ge("",!0),l(Ae,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[l(ie,{cols:"12"},{default:u(()=>[l(H,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center"},{default:u(()=>[l(O,{modelValue:o.value,"onUpdate:modelValue":C[1]||(C[1]=q=>o.value=q),color:"primary","align-tabs":"start",class:"w-100"},{default:u(()=>[(U(!0),me(We,null,qt(g.value,(q,Q)=>(U(),pe(P,{key:Q,value:Q},{default:u(()=>[M(K(q.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(L,{modelValue:o.value,"onUpdate:modelValue":C[4]||(C[4]=q=>o.value=q),class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[l(J,{value:0,style:{height:"100%"}},{default:u(()=>[l(Ae,{"no-gutters":"","aria-label":"main row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[l(ie,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[v("div",kCe,[l(SH,{ref_key:"appointmentQueueRef",ref:r},null,512)])]),_:1}),l(ie,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[v("div",TCe,[l(Zxe)])]),_:1})]),_:1}),l(j,{modelValue:A.value,"onUpdate:modelValue":C[2]||(C[2]=q=>A.value=q),class:"elevation-24",color:"success"},{default:u(()=>[M(K(d.value),1)]),_:1},8,["modelValue"]),l(j,{modelValue:f.value,"onUpdate:modelValue":C[3]||(C[3]=q=>f.value=q),class:"elevation-24",color:"failure"},{default:u(()=>[M(K(m.value),1)]),_:1},8,["modelValue"])]),_:1}),(U(!0),me(We,null,qt(g.value.slice(1),(q,Q)=>(U(),pe(J,{key:q.id,value:Q+1,style:{height:"100%"}},{default:u(()=>[l(Ae,{"no-gutters":"","aria-label":"main-row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[l(ie,{cols:"12",order:"1",class:"stable-height-column"},{default:u(()=>[q.id==="calendar"&&y.value!==100?(U(),pe(H,{key:0,color:"surface",variant:"elevated",class:"pa-6 ma-2 d-flex flex-column align-center justify-center scrollable-content"},{default:u(()=>[l(ue,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...C[5]||(C[5]=[M(" mdi-magnify-close ",-1)])]),_:1}),l(ne,{class:"text-h5 text-center mb-2"},{default:u(()=>[...C[6]||(C[6]=[M(" Calendar Unavailable ",-1)])]),_:1}),l(Y,{class:"text-center"},{default:u(()=>[C[7]||(C[7]=v("p",{class:"text-h6 mb-3"},"Calendar requires 100% zoom level to display properly.",-1)),v("p",ICe,[v("strong",null,"Current zoom: "+K(y.value)+"%",1)]),C[8]||(C[8]=v("p",{class:"text-body-1 mb-4"}," The calendar positioning system requires the default zoom level to work correctly. Please use the zoom controls in the top navigation bar to reset to 100%. ",-1))]),_:1})]),_:1})):ge("",!0),q.id==="procedure-bookings"?(U(),pe(BCe,{key:1})):q.url?(U(),pe(H,{key:2,color:"surfaceContainer",flat:"",class:"pa-1 scrollable-content"},{default:u(()=>[v("div",{ref_for:!0,ref:ee=>b(q.id,ee),style:{width:"100%",height:"100%",position:"relative"},"aria-label":`${q.title} Container`},[c.value[q.id]?(U(),me("div",PCe,[l(te,{type:"card",width:"80%",height:"80%",class:"mx-auto"})])):ge("",!0)],8,FCe)]),_:2},1024)):ge("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})}}},UCe=Xt(DCe,[["__scopeId","data-v-431c6b2c"]]),RCe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M14,2H6A2,2%200%200,0%204,4V20A2,2%200%200,0%206,22H18A2,2%200%200,0%2020,20V8L14,2M13.5,16V19H10.5V16H8L12,12L16,16H13.5M13,9V3.5L18.5,9H13Z'%20/%3e%3c/svg%3e",NCe={__name:"TabsExtension",props:{items:{type:Array,required:!0},modelValue:{type:Number,default:0},alignTabs:{type:String,default:"start"}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,a=t,r=V(n.modelValue);Ke(()=>n.modelValue,o=>{r.value=o});const s=o=>{a("update:modelValue",o)};return(o,i)=>{const c=I("v-tab"),A=I("v-tabs");return U(),pe(A,{modelValue:r.value,"onUpdate:modelValue":[i[0]||(i[0]=d=>r.value=d),s],"align-tabs":e.alignTabs||"start",density:"compact"},{default:u(()=>[(U(!0),me(We,null,qt(e.items,(d,f)=>(U(),pe(c,{key:d.title||f,disabled:d.disabled},{default:u(()=>[M(K(d.title),1)]),_:2},1032,["disabled"]))),128))]),_:1},8,["modelValue","align-tabs"])}}},VCe={__name:"BreadcrumbsExtension",props:{items:{type:Array,required:!0}},setup(e){return(t,n)=>{const a=I("v-icon"),r=I("v-breadcrumbs-item"),s=I("v-breadcrumbs");return U(),pe(s,null,{default:u(()=>[(U(!0),me(We,null,qt(e.items,(o,i)=>(U(),pe(r,{key:i,to:o.to,disabled:o.disabled},{default:u(()=>[o.icon?(U(),pe(a,{key:0,start:o.iconPosition!=="end",end:o.iconPosition==="end",small:"",class:ct(o.iconClass)},{default:u(()=>[M(K(o.icon),1)]),_:2},1032,["start","end","class"])):ge("",!0),M(" "+K(o.text),1)]),_:2},1032,["to","disabled"]))),128))]),_:1})}}};function LCe(){const e=Rn(),t=(r,s=0,o="start",i=null)=>{e.dispatch("appBar/setExtensionContent",{component:f_(NCe),props:{items:r,modelValue:s,alignTabs:o,"onUpdate:modelValue":i||(()=>{})}})},n=r=>{e.dispatch("appBar/setExtensionContent",{component:f_(VCe),props:{items:r}})},a=()=>{e.dispatch("appBar/clearExtensionContent")};return Ui(()=>{a()}),{setTabs:t,setBreadcrumbs:n,clearExtension:a}}const MCe={class:"filter-container pa-3",style:{flex:"1 1 auto","overflow-y":"auto"}},OCe={class:"filter-field mb-3"},HCe={class:"filter-field mb-3"},$Ce={class:"filter-field mb-3"},QCe={class:"d-flex justify-center mt-4"},GCe={class:"d-flex align-center"},zCe={class:"d-flex age-dob-container",style:{gap:"8px"}},KCe={__name:"PatientFilter",props:{modelValueName:{type:String,default:""},modelValuePhone:{type:String,default:""},modelValueDate:{type:String,default:""}},emits:["update:modelValueName","update:modelValuePhone","update:modelValueDate","filter-change","clear-filters","patient-created"],setup(e,{expose:t,emit:n}){const a=e,r=n,s=V(a.modelValueName),o=V(a.modelValuePhone),i=V(a.modelValueDate),c=V(""),A=V(""),d=V(""),f=V(!1),m=V(!1),h=V("dob"),p=V(""),y=V({name:"",contact_number:"",age:"",birthDate:"",gender:"",email:""}),g=()=>{f.value=!0},w=()=>{f.value=!1,h.value="dob",p.value="",y.value={name:"",contact_number:"",age:"",birthDate:"",gender:"",email:""},m.value=!1},b=D=>{if(h.value==="dob")if(D){p.value=D;const P=aT(D);P!==null&&(y.value.age=P.toString())}else p.value=""};Ke(h,D=>{D==="age"?(y.value.birthDate&&(p.value=y.value.birthDate),y.value.birthDate=""):p.value&&(y.value.birthDate=p.value)}),t({openCreatePatientDialog:g});const x=()=>{c.value="",s.value&&s.value.length<2&&(c.value="Name must be at least 2 characters long"),S()},T=()=>{A.value="",o.value&&o.value.replace(/\D/g,"").length>15&&(A.value="Phone number cannot exceed 15 digits"),S()},F=()=>{if(d.value="",i.value){const D=new Date(i.value);isNaN(D.getTime())&&(d.value="Please enter a valid date")}S()},k=()=>{s.value="",o.value="",i.value="",c.value="",A.value="",d.value="",r("update:modelValueName",""),r("update:modelValuePhone",""),r("update:modelValueDate",""),r("clear-filters")},S=()=>{r("update:modelValueName",s.value),r("update:modelValuePhone",o.value),r("update:modelValueDate",i.value),r("filter-change",{name:s.value,phone:o.value,date:i.value,hasErrors:!!(c.value||A.value||d.value)})};Ke(()=>a.modelValueName,D=>{s.value=D}),Ke(()=>a.modelValuePhone,D=>{o.value=D}),Ke(()=>a.modelValueDate,D=>{i.value=D}),Ke([s,o,i],()=>{S()});const E=D=>{const P=D.target.value.replace(/[^0-9]/g,"").slice(0,10);y.value.contact_number=P},C=async()=>{try{const D={...y.value};if(h.value==="dob"&&D.birthDate){const O=Cd(D.birthDate);O!==null?D.birthDate=O.toString():D.birthDate=""}else delete D.birthDate;const P=await QM(D);P.error?(r("patient-created",{success:!1,message:"Error creating patient. Please try again.",error:P.error}),console.error("There was an error creating the patient:",P.error)):(w(),r("patient-created",{success:!0,message:"Patient created successfully",patient:P.data}))}catch(D){console.error("There was an error creating the patient:",D),r("patient-created",{success:!1,message:"An unexpected error occurred. Please try again.",error:D})}};return(D,P)=>{const O=I("v-card-text"),H=I("v-card"),ie=I("v-text-field"),Ae=I("v-btn"),j=I("v-icon"),J=I("v-card-title"),ue=I("v-divider"),ne=I("v-col"),Y=I("v-btn-toggle"),te=I("v-select"),L=I("v-row"),N=I("v-form"),q=I("v-spacer"),Q=I("v-card-actions"),ee=I("v-dialog");return U(),pe(H,{color:"surfaceContainer",flat:"",style:{height:"100%",display:"flex","flex-direction":"column"}},{default:u(()=>[l(H,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(O,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...P[13]||(P[13]=[v("span",{class:"text-body-2 font-weight-medium"},"Filter Patients",-1)])]),_:1})]),_:1}),v("div",MCe,[v("div",OCe,[l(ie,{modelValue:s.value,"onUpdate:modelValue":P[0]||(P[0]=z=>s.value=z),label:"Patient Name",placeholder:"Enter patient name...",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":c.value,onInput:x,maxlength:"100"},null,8,["modelValue","error-messages"])]),v("div",HCe,[l(ie,{modelValue:o.value,"onUpdate:modelValue":P[1]||(P[1]=z=>o.value=z),label:"Phone Number",placeholder:"Enter phone number...",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":A.value,onInput:T,maxlength:"15"},null,8,["modelValue","error-messages"])]),v("div",$Ce,[l(ie,{modelValue:i.value,"onUpdate:modelValue":P[2]||(P[2]=z=>i.value=z),type:"date",label:"Appointment Date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input date-input","error-messages":d.value,onInput:F},null,8,["modelValue","error-messages"])]),v("div",QCe,[l(Ae,{variant:"text",size:"small","prepend-icon":"mdi-filter-remove",onClick:k,class:"filter-button-clear"},{default:u(()=>[...P[14]||(P[14]=[M(" Clear ",-1)])]),_:1})])]),l(ee,{modelValue:f.value,"onUpdate:modelValue":P[12]||(P[12]=z=>f.value=z),persistent:"","max-width":"900px"},{default:u(()=>[l(H,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[l(J,{class:"d-flex justify-space-between align-center pa-3"},{default:u(()=>[v("div",GCe,[l(j,{class:"mr-2",color:"primary"},{default:u(()=>[...P[15]||(P[15]=[M("mdi-account-plus",-1)])]),_:1}),P[16]||(P[16]=v("span",{class:"text-h6 font-weight-medium"},"Create Patient",-1))]),l(Ae,{icon:"",size:"x-small",onClick:w,tabindex:"-1"},{default:u(()=>[l(j,null,{default:u(()=>[...P[17]||(P[17]=[v("img",{src:ou,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1}),l(ue),l(O,{class:"pa-4"},{default:u(()=>[l(N,{modelValue:m.value,"onUpdate:modelValue":P[11]||(P[11]=z=>m.value=z),"validate-on":"input"},{default:u(()=>[l(L,{"no-gutters":""},{default:u(()=>[l(ne,{cols:"6",class:"pr-2 mb-2"},{default:u(()=>[l(ie,{label:"Name *",modelValue:y.value.name,"onUpdate:modelValue":P[3]||(P[3]=z=>y.value.name=z),clearable:"",rules:$e(gr),density:"comfortable",variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),l(ne,{cols:"6",class:"pl-2 mb-2"},{default:u(()=>[l(ie,{label:"Phone Number *",modelValue:y.value.contact_number,"onUpdate:modelValue":P[4]||(P[4]=z=>y.value.contact_number=z),type:"tel",counter:10,rules:$e(mh),clearable:"",density:"comfortable",variant:"outlined",maxlength:"10",onInput:E},null,8,["modelValue","rules"])]),_:1}),l(ne,{cols:"6",class:"pr-2 mb-2"},{default:u(()=>[v("div",zCe,[l(Y,{modelValue:h.value,"onUpdate:modelValue":P[5]||(P[5]=z=>h.value=z),mandatory:"",density:"compact",variant:"outlined",divided:"",class:"age-dob-toggle"},{default:u(()=>[l(Ae,{value:"dob",size:"small"},{default:u(()=>[...P[18]||(P[18]=[M("DOB",-1)])]),_:1}),l(Ae,{value:"age",size:"small"},{default:u(()=>[...P[19]||(P[19]=[M("Age",-1)])]),_:1})]),_:1},8,["modelValue"]),h.value==="age"?(U(),pe(ie,{key:0,label:"Age (yrs) *",modelValue:y.value.age,"onUpdate:modelValue":P[6]||(P[6]=z=>y.value.age=z),clearable:"",density:"comfortable",variant:"outlined",rules:$e(rT),disabled:!!y.value.birthDate||!!p.value,class:"flex-grow-1","hide-details":"auto"},null,8,["modelValue","rules","disabled"])):(U(),pe(ie,{key:1,label:"Date of Birth *",modelValue:y.value.birthDate,"onUpdate:modelValue":[P[7]||(P[7]=z=>y.value.birthDate=z),b],type:"date",clearable:"",density:"comfortable",variant:"outlined",rules:$e(sT),class:"flex-grow-1 date-input","hide-details":"auto",onClick:P[8]||(P[8]=z=>z.target.showPicker&&z.target.showPicker())},null,8,["modelValue","rules"]))])]),_:1}),l(ne,{cols:"6",class:"pl-2 mb-2"},{default:u(()=>[l(te,{modelValue:y.value.gender,"onUpdate:modelValue":P[9]||(P[9]=z=>y.value.gender=z),items:["Male","Female"],label:"Gender *",clearable:"",density:"comfortable",variant:"outlined",rules:$e(oT)},null,8,["modelValue","rules"])]),_:1}),l(ne,{cols:"12",class:"mb-2"},{default:u(()=>[l(ie,{label:"Email (optional)",modelValue:y.value.email,"onUpdate:modelValue":P[10]||(P[10]=z=>y.value.email=z),type:"email",clearable:"",density:"comfortable",variant:"outlined",rules:$e(Eg)},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(ue),l(Q,{class:"pa-3"},{default:u(()=>[l(q),l(Ae,{variant:"text",onClick:w},{default:u(()=>[...P[20]||(P[20]=[M(" Cancel ",-1)])]),_:1}),l(Ae,{variant:"outlined",disabled:!m.value,onClick:C,"prepend-icon":"mdi-account-plus",class:"btn-hover-enhanced"},{default:u(()=>[...P[21]||(P[21]=[M(" Create Patient ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},WCe=Xt(KCe,[["__scopeId","data-v-04aa507e"]]),jCe={class:"filter-container pa-3",style:{flex:"1 1 auto","overflow-y":"auto"}},qCe={class:"filter-field mb-3"},YCe={class:"filter-field mb-3"},XCe={class:"d-flex justify-center mt-4 mb-2"},JCe={key:0,class:"d-flex justify-center"},ZCe={__name:"TrendsFilter",props:{modelValueDoctor:{type:String,default:null},modelValueFromDate:{type:String,default:""},availableDoctors:{type:Array,default:()=>[]},maxDate:{type:String,default:""},isLoading:{type:Boolean,default:!1}},emits:["update:modelValueDoctor","update:modelValueFromDate","show-trends","clear-filters"],setup(e,{emit:t}){const n=e,a=t,r=V(n.modelValueDoctor),s=V(n.modelValueFromDate);Ke(()=>n.modelValueDoctor,c=>{r.value=c}),Ke(()=>n.modelValueFromDate,c=>{s.value=c}),Ke(r,c=>{a("update:modelValueDoctor",c)}),Ke(s,c=>{a("update:modelValueFromDate",c)});const o=()=>{a("show-trends",{doctor:r.value,fromDate:s.value})},i=()=>{r.value=null,s.value="",a("clear-filters")};return(c,A)=>{const d=I("v-card-text"),f=I("v-card"),m=I("v-list-item"),h=I("v-select"),p=I("v-text-field"),y=I("v-btn");return U(),pe(f,{color:"surfaceContainer",flat:"",style:{height:"100%",display:"flex","flex-direction":"column"}},{default:u(()=>[l(f,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(d,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...A[2]||(A[2]=[v("span",{class:"text-body-2 font-weight-medium"},"Trends Analysis",-1)])]),_:1})]),_:1}),v("div",jCe,[v("div",qCe,[l(h,{modelValue:r.value,"onUpdate:modelValue":A[0]||(A[0]=g=>r.value=g),items:e.availableDoctors,"item-title":"doctorName","item-value":"doctorName",label:"Doctor (optional)",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input"},{item:u(({props:g,item:w})=>[l(m,Ue(g,{title:w.raw.doctorName}),{subtitle:u(()=>[M(K(w.raw.doctorSpecialization),1)]),_:2},1040,["title"])]),_:1},8,["modelValue","items"])]),v("div",YCe,[l(p,{modelValue:s.value,"onUpdate:modelValue":A[1]||(A[1]=g=>s.value=g),type:"date",label:"From Date (optional)",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input date-input",max:e.maxDate},null,8,["modelValue","max"])]),v("div",XCe,[l(y,{color:"primary",size:"small","prepend-icon":"mdi-chart-line",onClick:o,loading:e.isLoading,class:"filter-button"},{default:u(()=>[...A[3]||(A[3]=[M(" Show Trends ",-1)])]),_:1},8,["loading"])]),r.value||s.value?(U(),me("div",JCe,[l(y,{variant:"text",size:"small","prepend-icon":"mdi-filter-remove",onClick:i,class:"filter-button-clear"},{default:u(()=>[...A[4]||(A[4]=[M(" Clear ",-1)])]),_:1})])):ge("",!0)])]),_:1})}}},eSe=Xt(ZCe,[["__scopeId","data-v-950c9542"]]),Kv=""+new URL("images/search_here-_oFYQxGX.png",import.meta.url).href,tSe={class:"scrollable-content"},nSe={class:"scrollable-content"},aSe={class:"text-center"},rSe={class:"text-center"},sSe={class:"text-body-2 text-medium-emphasis mb-4"},oSe={class:"text-center"},iSe={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},lSe={key:0,class:"text-body-2 text-medium-emphasis ml-2",style:{"font-weight":"500"}},uSe={class:"d-flex align-center flex-wrap"},cSe={key:0,class:"text-body-2 text-medium-emphasis mr-3"},dSe={key:1,class:"text-body-2 text-medium-emphasis mr-3"},ASe={key:2,class:"text-body-2 text-medium-emphasis mr-3"},fSe={key:3,class:"text-body-2 text-medium-emphasis mr-3"},mSe={class:"scrollable-content"},vSe={class:"scrollable-content"},hSe={key:1},pSe={class:"text-center"},gSe={class:"text-center"},ySe={class:"text-center"},_Se={class:"text-body-2 text-medium-emphasis mb-4"},wSe={class:"text-center"},bSe={key:4,class:"trends-scroll-container",style:{"overflow-y":"auto","max-height":"75vh"}},xSe={class:"text-h4"},CSe={class:"text-h4"},SSe={class:"text-h4"},ESe={class:"text-h4"},BSe={class:"chart-container"},kSe={class:"text-center"},TSe={class:"font-weight-medium"},ISe={class:"text-center"},FSe={class:"font-weight-medium"},PSe={class:"d-flex justify-center"},DSe={__name:"patients-landing-page",setup(e){LCe();const{showSnackbar:t,showWarning:n}=ra(),a=Rn(),r=V(0),s=zf(),o=Al(),i=V(s.params.id),c=V([]),A=V(""),d=V(""),f=V(""),m=V(null),h=V(!1),p=V(null),y=V(!1),g=V(null),w=ae(()=>Un()),b=ae(()=>[{title:"Start Date",key:"startDate",sortable:!0,align:"center",width:"35%"},{title:"End Date",key:"endDate",sortable:!0,align:"center",width:"35%"},{title:"Appointments",key:"count",sortable:!0,align:"center",width:"30%"}]),x=ae(()=>{if(!j.value.length)return[];const de={};return j.value.forEach(G=>{const Z=new Date(G.appointmentDate),ce=Z.getFullYear(),Se=E(Z),Pe=`${ce}-W${Se.toString().padStart(2,"0")}`;de[Pe]||(de[Pe]={week:Pe,count:0,dates:[],year:ce,weekNumber:Se}),de[Pe].count++,de[Pe].dates.push(G.appointmentDate)}),Object.values(de).map(G=>{const Z=C(G.year,G.weekNumber),ce=D(G.year,G.weekNumber);return{...G,startDate:Z.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),endDate:ce.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),dateRange:`${Z.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${ce.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`}}).sort((G,Z)=>G.week.localeCompare(Z.week))}),T=ae(()=>j.value.length?new Set(j.value.map(G=>G.patientId)).size:0),F=ae(()=>{if(!x.value.length)return 0;const de=x.value.reduce((G,Z)=>G+Z.count,0);return Math.round(de/x.value.length)}),k=ae(()=>x.value.length),S=ae(()=>a.getters["doctorModule/allDoctors"]||[]),E=de=>{const G=new Date(de.getFullYear(),0,1),Z=G.getDay(),ce=(de-G)/(1440*60*1e3)+1;return Math.ceil((ce+Z-1)/7)},C=(de,G)=>{const ce=new Date(de,0,1).getDay(),Se=(G-1)*7-ce+1;return new Date(de,0,1+Se)},D=(de,G)=>{const Z=C(de,G);return new Date(Z.getTime()+8640*60*1e3)},P=async()=>{if(!ie.value)try{ie.value=!0,Ae.value=null,ue.value=!0;const de=await Kve(J.value.selectedDoctor?.trim()||"",J.value.fromDate||"");if(de.error)throw new Error(`Failed to fetch trends data: ${de.error.message||"Unknown error"}`);j.value=Array.isArray(de.data)?de.data:[],t({message:`Loaded ${j.value.length} completed appointments for trends analysis`,color:"success",timeout:3e3})}catch(de){console.error("Error fetching trends data:",de),Ae.value=de.message||"Failed to load trends data",j.value=[],t({message:Ae.value,color:"error",timeout:5e3})}finally{ie.value=!1}},O=()=>{try{J.value.selectedDoctor=null,J.value.fromDate="",Ae.value=null,ue.value=!1,j.value=[],t({message:"Trends configuration cleared successfully",color:"success",timeout:3e3})}catch(de){console.error("Error clearing trends configuration:",de),m.value="Failed to clear trends configuration"}},H=async()=>{try{a.getters["doctorModule/isInitialized"]||await a.dispatch("doctorModule/initializeDoctors")}catch(de){console.error("Error initializing doctors:",de)}},ie=V(!1),Ae=V(null),j=V([]),J=V({selectedDoctor:null,fromDate:""}),ue=V(!1),ne=V([{title:"List",disabled:!1},{title:"Trends",disabled:!1}]),Y=async()=>{try{if(await o.isReady(),s.path==="/patients")return;await xn();let de=0;for(;!s.params.id&&de<3;)await xn(),await new Promise(G=>setTimeout(G,10)),de++;if(!s.params.id){console.warn("Route params not ready after retries, skipping URL param extraction");return}if(i.value=s.params.id,!i.value)throw new Error("No user ID found in URL parameters")}catch(de){console.error("Error extracting URL parameters:",de),m.value="Invalid URL parameters"}},te=ae(()=>{try{return s.path!=="/patients"}catch(de){return console.error("Error checking child route:",de),!1}});ae(()=>s.query.from==="patients-landing-page"),un(async()=>{try{s.path!=="/patients"?await Y():(y.value=!0,L(),H())}catch(de){console.error("Error on mount:",de),m.value="Failed to initialize"}}),Ke(()=>s.path,async()=>{try{if(await o.isReady(),s.path==="/patients"){y.value=!0,L(),(m.value==="Invalid URL parameters"||m.value==="Navigation error occurred")&&(m.value=null);return}await xn(),await new Promise(de=>setTimeout(de,50)),s.path!=="/patients"&&await Y()}catch(de){console.error("Error on route change:",de),s.path!=="/patients"&&(m.value="Navigation update failed")}}),Ke(()=>s.path,()=>{try{s.path!=="/patients"||m.value==="Navigation error occurred"&&(m.value=null)}catch(de){console.error("Error in route validation:",de),m.value="Navigation error occurred"}},{immediate:!1}),Ke(r,de=>{try{de===1&&H()}catch(G){console.error("Error handling tab change:",G)}});const L=async()=>{if(!h.value)try{h.value=!0,p.value=null;const de=await Uve(A.value?.trim()||"",d.value?.trim()||"",f.value||"");if(de.error)throw new Error(`Search failed: ${de.error.message||"Unknown error"}`);c.value=Array.isArray(de.data)?de.data:[],y.value=!0,(A.value||d.value||f.value)&&t({message:`Found ${c.value.length} patient${c.value.length!==1?"s":""}`,color:"success",timeout:3e3})}catch(de){console.error("Error fetching patients:",de),p.value=de.message||"Failed to search patients",c.value=[],y.value=!0,t({message:p.value,color:"error",timeout:5e3})}finally{h.value=!1}},N=()=>{p.value=null,L()},q=()=>{try{A.value="",d.value="",f.value="",p.value=null,y.value=!0,L(),t({message:"Filters cleared successfully",color:"success",timeout:3e3})}catch(de){console.error("Error clearing filters:",de),m.value="Failed to clear filters"}},Q=de=>{de.hasErrors||(y.value=!0,re())},ee=de=>{de.success?(t({message:de.message||"Patient created successfully",color:"success",timeout:3e3}),L()):t({message:de.message||"Error creating patient",color:"error",timeout:5e3})},z=()=>{g.value&&g.value.openCreatePatientDialog()},X=de=>{const{hasPermission:G}=Ah();if(!G("patients.details").value){n("You do not have permission to view patient details");return}if(!G("patients.details").value){n("You do not have permission to access consultation or procedure");return}try{if(!de)throw new Error("Invalid patient ID");o.push({path:`/patients/${de}`,query:{from:"patients-landing-page"}})}catch(Se){console.error("Error navigating to patient:",Se),t({message:"Failed to open patient details",color:"error",timeout:5e3})}};let le;const re=()=>{clearTimeout(le),le=setTimeout(()=>{L()},500)};return Ke([A,d,f],()=>{y.value=!0,re()}),(de,G)=>{const Z=I("v-alert"),ce=I("v-tab"),Se=I("v-tabs"),Pe=I("v-btn"),ye=I("v-card"),Ce=I("v-col"),_e=I("v-row"),De=I("v-progress-circular"),xe=I("v-icon"),Te=I("v-card-text"),Me=I("v-empty-state"),et=I("v-card-title"),lt=I("v-tooltip"),Re=I("v-lazy"),Le=I("v-window-item"),nt=I("v-chip"),Tt=I("v-data-table"),Pt=I("v-window"),Kt=I("router-view"),$t=I("v-main");return U(),pe($t,null,{default:u(()=>[m.value?(U(),pe(Z,{key:0,type:"error",dismissible:"","onClick:close":G[0]||(G[0]=bt=>m.value=null),class:"ma-3"},{default:u(()=>[M(K(m.value),1)]),_:1})):ge("",!0),te.value?(U(),pe(Kt,{key:2})):(U(),me(We,{key:1},[l(_e,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[l(Ce,{cols:"12"},{default:u(()=>[l(ye,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center justify-space-between"},{default:u(()=>[l(Se,{modelValue:r.value,"onUpdate:modelValue":G[1]||(G[1]=bt=>r.value=bt),color:"primary","align-tabs":"start",class:"flex-grow-1"},{default:u(()=>[(U(!0),me(We,null,qt(ne.value,(bt,st)=>(U(),pe(ce,{key:st,value:st,disabled:bt.disabled},{default:u(()=>[M(K(bt.title),1)]),_:2},1032,["value","disabled"]))),128))]),_:1},8,["modelValue"]),l(Bn,{permission:"patients.create",class:"create-patient-btn"},{default:u(()=>[l(Pe,{color:"primary",variant:"flat","prepend-icon":"mdi-account-plus",onClick:z,size:"small"},{default:u(()=>[...G[8]||(G[8]=[M(" Create Patient ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(Pt,{modelValue:r.value,"onUpdate:modelValue":G[7]||(G[7]=bt=>r.value=bt),class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[l(Le,{value:0,style:{height:"100%"}},{default:u(()=>[l(_e,{"aria-label":"main row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[l(Ce,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[v("div",tSe,[l(WCe,{ref_key:"patientFilterRef",ref:g,"model-value-name":A.value,"onUpdate:modelValueName":G[2]||(G[2]=bt=>A.value=bt),"model-value-phone":d.value,"onUpdate:modelValuePhone":G[3]||(G[3]=bt=>d.value=bt),"model-value-date":f.value,"onUpdate:modelValueDate":G[4]||(G[4]=bt=>f.value=bt),onFilterChange:Q,onClearFilters:q,onPatientCreated:ee},null,8,["model-value-name","model-value-phone","model-value-date"])])]),_:1}),l(Ce,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[v("div",nSe,[l(ye,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[h.value?(U(),pe(_e,{key:0,"no-gutters":""},{default:u(()=>[l(Ce,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[v("div",aSe,[l(De,{indeterminate:"",color:"primary",size:"64"}),G[9]||(G[9]=v("div",{class:"mt-4 text-subtitle-1"},"Searching patients...",-1))])]),_:1})]),_:1})):p.value?(U(),pe(_e,{key:1,"no-gutters":""},{default:u(()=>[l(Ce,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[v("div",rSe,[l(xe,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...G[10]||(G[10]=[M("mdi-alert-circle",-1)])]),_:1}),G[12]||(G[12]=v("div",{class:"text-h6 mb-2"},"Search Failed",-1)),v("div",sSe,K(p.value),1),l(Pe,{color:"primary",onClick:N,"prepend-icon":"mdi-refresh"},{default:u(()=>[...G[11]||(G[11]=[M(" Try Again ",-1)])]),_:1})])]),_:1})]),_:1})):c.value&&c.value.length===0&&y.value?(U(),me(We,{key:2},[l(ye,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(Te,{class:"pt-2 pb-0"},{default:u(()=>[...G[13]||(G[13]=[v("strong",null,"0",-1),M(" results found ",-1)])]),_:1})]),_:1}),l(Me,{image:$e(Kv),class:"d-flex justify-center"},{title:u(()=>[...G[14]||(G[14]=[v("div",{class:"text-subtitle-2 mt-8 text-center"}," No Patients Found ",-1)])]),text:u(()=>[...G[15]||(G[15]=[v("div",{class:"text-caption text-center"}," Try adjusting your search criteria or clear filters to see all patients ",-1)])]),actions:u(()=>[l(Pe,{color:"primary",variant:"outlined",onClick:q,"prepend-icon":"mdi-filter-remove"},{default:u(()=>[...G[16]||(G[16]=[M(" Clear Filters ",-1)])]),_:1})]),_:1},8,["image"])],64)):y.value?c.value&&c.value.length>0?(U(),me(We,{key:4},[l(ye,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(Te,{class:"pt-2 pb-0"},{default:u(()=>[v("strong",null,K(c.value.length),1),M(" result"+K(c.value.length!==1?"s":"")+" found ",1)]),_:1})]),_:1}),l(_e,{"no-gutters":""},{default:u(()=>[l(Ce,{cols:"12",class:"scroll-element mt-2",style:{"padding-bottom":"20px"}},{default:u(()=>[(U(!0),me(We,null,qt(c.value,bt=>(U(),pe(Re,{key:bt?.id||Math.random(),options:{threshold:.1,rootMargin:"50px"},"min-height":"70"},{default:u(()=>[l(Bn,{"any-permission":["patients.details"],feature:["patients"],tag:"div"},{default:u(()=>[bt?(U(),pe(ye,{key:0,style:Rt([{textAlign:"left"},{cursor:"pointer"}]),density:"compact",class:"mx-2 patient-card-spacing card-enhanced card-status-default card-hover-base",rounded:"lg",onClick:st=>X(bt.id)},{default:u(()=>[l(_e,{"no-gutters":""},{default:u(()=>[l(Ce,{cols:"12"},{default:u(()=>[l(et,{class:"pb-0 pt-2"},{default:u(()=>[v("span",iSe,K(bt?.name||"Unknown Patient"),1),bt?.contactNumber?(U(),me("span",lSe," ("+K(bt.contactNumber)+") ",1)):ge("",!0)]),_:2},1024),l(Te,{class:"pb-1"},{default:u(()=>[v("div",uSe,[bt?.id?(U(),me("span",cSe,[G[20]||(G[20]=v("strong",null,"ID:",-1)),M(" "+K(bt.id),1)])):ge("",!0),bt?.gender&&bt.gender!==""?(U(),me("span",dSe,[G[21]||(G[21]=v("strong",null,"Gender:",-1)),M(" "+K(bt.gender),1)])):ge("",!0),bt?.age&&bt.age!==""?(U(),me("span",ASe,[G[22]||(G[22]=v("strong",null,"Age:",-1)),M(" "+K(bt.age?`${bt.age} yrs`:""),1)])):ge("",!0),bt?.importID?(U(),me("span",fSe,[G[23]||(G[23]=v("strong",null,"Import ID:",-1)),M(" "+K(bt.importID),1)])):ge("",!0),bt?.isImported===!0||bt?.isImported===1?(U(),pe(lt,{key:4,text:"Imported Patient"},{activator:u(({props:st})=>[l(xe,Ue({size:"small",color:"info"},{ref_for:!0},st,{class:"ml-1"}),{default:u(()=>[...G[24]||(G[24]=[v("img",{src:RCe,alt:"Imported",style:{width:"16px",height:"16px",filter:"invert(0.5)"}},null,-1)])]),_:1},16)]),_:1})):ge("",!0)])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])):ge("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})],64)):ge("",!0):(U(),pe(_e,{key:3,"no-gutters":""},{default:u(()=>[l(Ce,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[v("div",oSe,[l(xe,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...G[17]||(G[17]=[M("mdi-account-search",-1)])]),_:1}),G[18]||(G[18]=v("div",{class:"text-h6 mb-2"},"Search for Patients",-1)),G[19]||(G[19]=v("div",{class:"text-body-2 text-medium-emphasis"},"Use the filters on the left to find patients",-1))])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1})]),_:1}),l(Le,{value:1,style:{height:"100%"}},{default:u(()=>[l(_e,{"aria-label":"trends row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[l(Ce,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[v("div",mSe,[l(eSe,{"model-value-doctor":J.value.selectedDoctor,"onUpdate:modelValueDoctor":G[5]||(G[5]=bt=>J.value.selectedDoctor=bt),"model-value-from-date":J.value.fromDate,"onUpdate:modelValueFromDate":G[6]||(G[6]=bt=>J.value.fromDate=bt),"available-doctors":S.value,"max-date":w.value,"is-loading":ie.value,onShowTrends:P,onClearFilters:O},null,8,["model-value-doctor","model-value-from-date","available-doctors","max-date","is-loading"])])]),_:1}),l(Ce,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[v("div",vSe,[l(ye,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[l(ye,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(Te,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[j.value.length>0?(U(),me(We,{key:0},[v("strong",null,K(j.value.length),1),G[25]||(G[25]=M(" appointments analyzed ",-1))],64)):(U(),me("strong",hSe,"Trends Analysis"))]),_:1})]),_:1}),ue.value?ie.value?(U(),pe(_e,{key:1,"no-gutters":""},{default:u(()=>[l(Ce,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[v("div",gSe,[l(De,{indeterminate:"",color:"primary",size:"64"}),G[30]||(G[30]=v("div",{class:"mt-4 text-subtitle-1"},"Loading trends data...",-1))])]),_:1})]),_:1})):Ae.value?(U(),pe(_e,{key:2,"no-gutters":""},{default:u(()=>[l(Ce,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[v("div",ySe,[l(xe,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...G[31]||(G[31]=[M("mdi-alert-circle",-1)])]),_:1}),G[33]||(G[33]=v("div",{class:"text-h6 mb-2"},"Failed to Load Trends",-1)),v("div",_Se,K(Ae.value),1),l(Pe,{color:"primary",onClick:P,"prepend-icon":"mdi-refresh"},{default:u(()=>[...G[32]||(G[32]=[M(" Try Again ",-1)])]),_:1})])]),_:1})]),_:1})):j.value.length===0&&ue.value?(U(),pe(_e,{key:3,"no-gutters":""},{default:u(()=>[l(Ce,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[v("div",wSe,[l(xe,{size:"64",color:"warning",class:"mb-4"},{default:u(()=>[...G[34]||(G[34]=[M("mdi-chart-line-variant",-1)])]),_:1}),G[36]||(G[36]=v("div",{class:"text-h6 mb-2"},"No Trends Data",-1)),G[37]||(G[37]=v("div",{class:"text-body-2 text-medium-emphasis mb-4"}," No completed appointments found for the selected criteria ",-1)),l(Pe,{color:"primary",variant:"outlined",onClick:O,"prepend-icon":"mdi-refresh"},{default:u(()=>[...G[35]||(G[35]=[M(" Clear Configuration ",-1)])]),_:1})])]),_:1})]),_:1})):j.value.length>0?(U(),me("div",bSe,[l(Te,{class:"pt-3"},{default:u(()=>[l(_e,{class:"mb-4"},{default:u(()=>[l(Ce,{cols:"3"},{default:u(()=>[l(ye,{color:"primary",variant:"tonal"},{default:u(()=>[l(Te,{class:"text-center"},{default:u(()=>[v("div",xSe,K(j.value.length),1),G[38]||(G[38]=v("div",{class:"text-caption"},"Total Appointments",-1))]),_:1})]),_:1})]),_:1}),l(Ce,{cols:"3"},{default:u(()=>[l(ye,{color:"success",variant:"tonal"},{default:u(()=>[l(Te,{class:"text-center"},{default:u(()=>[v("div",CSe,K(T.value),1),G[39]||(G[39]=v("div",{class:"text-caption"},"Unique Patients",-1))]),_:1})]),_:1})]),_:1}),l(Ce,{cols:"3"},{default:u(()=>[l(ye,{color:"info",variant:"tonal"},{default:u(()=>[l(Te,{class:"text-center"},{default:u(()=>[v("div",SSe,K(F.value),1),G[40]||(G[40]=v("div",{class:"text-caption"},"Weekly Average",-1))]),_:1})]),_:1})]),_:1}),l(Ce,{cols:"3"},{default:u(()=>[l(ye,{color:"warning",variant:"tonal"},{default:u(()=>[l(Te,{class:"text-center"},{default:u(()=>[v("div",ESe,K(k.value),1),G[41]||(G[41]=v("div",{class:"text-caption"},"Weeks of Data",-1))]),_:1})]),_:1})]),_:1})]),_:1}),v("div",BSe,[l(Tt,{headers:b.value,items:x.value,"items-per-page":10,class:"elevation-1 trends-table",density:"comfortable","fixed-header":""},{"item.startDate":u(({item:bt})=>[v("div",kSe,[v("span",TSe,K(bt.startDate),1)])]),"item.endDate":u(({item:bt})=>[v("div",ISe,[v("span",FSe,K(bt.endDate),1)])]),"item.count":u(({item:bt})=>[v("div",PSe,[l(nt,{color:"primary",size:"small"},{default:u(()=>[M(K(bt.count),1)]),_:2},1024)])]),_:2},1032,["headers","items"])])]),_:1})])):ge("",!0):(U(),pe(_e,{key:0,"no-gutters":""},{default:u(()=>[l(Ce,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[v("div",pSe,[l(xe,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...G[26]||(G[26]=[M("mdi-chart-line-variant",-1)])]),_:1}),G[28]||(G[28]=v("div",{class:"text-h6 mb-2"},"Ready to Analyze Trends",-1)),G[29]||(G[29]=v("div",{class:"text-body-2 text-medium-emphasis mb-4"},' Configure your analysis settings and click "Show Trends" to view appointment trends ',-1)),l(Pe,{color:"primary",variant:"outlined",onClick:P,"prepend-icon":"mdi-chart-line"},{default:u(()=>[...G[27]||(G[27]=[M(" Show All Trends ",-1)])]),_:1})])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))]),_:1})}}},USe=Xt(DSe,[["__scopeId","data-v-46e38356"]]),RSe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,21H8V7H19M19,5H8A2,2%200%200,0%206,7V21A2,2%200%200,0%208,23H19A2,2%200%200,0%2021,21V7A2,2%200%200,0%2019,5M16,1H4A2,2%200%200,0%202,3V17H4V3H16V1Z'%20/%3e%3c/svg%3e",IE="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M17,9H7V7H17M17,13H7V11H17M14,17H7V15H14M12,3A1,1%200%200,1%2013,4A1,1%200%200,1%2012,5A1,1%200%200,1%2011,4A1,1%200%200,1%2012,3M19,3H14.82C14.4,1.84%2013.3,1%2012,1C10.7,1%209.6,1.84%209.18,3H5A2,2%200%200,0%203,5V19A2,2%200%200,0%205,21H19A2,2%200%200,0%2021,19V5A2,2%200%200,0%2019,3Z'%20/%3e%3c/svg%3e",NSe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,3H14.82C14.4,1.84%2013.3,1%2012,1C10.7,1%209.6,1.84%209.18,3H5A2,2%200%200,0%203,5V19A2,2%200%200,0%205,21H19A2,2%200%200,0%2021,19V5A2,2%200%200,0%2019,3M12,3A1,1%200%200,1%2013,4A1,1%200%200,1%2012,5A1,1%200%200,1%2011,4A1,1%200%200,1%2012,3M5,13.46H7.17L10.5,7.08L11.44,14.05L13.93,10.86L16.53,13.46H19V15H15.89L14.07,13.21L10.38,17.92L9.62,12.15L8.11,15H5V13.46Z'%20/%3e%3c/svg%3e",VSe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='currentColor'%20d='M16,11.78L20.24,4.45L21.97,5.45L16.74,14.5L10.23,10.75L5.46,19H22V21H2V3H4V17.54L9.5,8L16,11.78Z'%20/%3e%3c/svg%3e",BH="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M14%202H6C4.89%202%204%202.89%204%204V20C4%2021.11%204.89%2022%206%2022H13.81C13.28%2021.09%2013%2020.05%2013%2019C13%2018.67%2013.03%2018.33%2013.08%2018H6V16H13.81C14.27%2015.2%2014.91%2014.5%2015.68%2014H6V12H18V13.08C18.33%2013.03%2018.67%2013%2019%2013S19.67%2013.03%2020%2013.08V8L14%202M13%209V3.5L18.5%209H13M18%2015V18H15V20H18V23H20V20H23V18H20V15H18Z'%20/%3e%3c/svg%3e",FE="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z'%20/%3e%3c/svg%3e",Zd="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M4,6H20V16H4M20,18A2,2%200%200,0%2022,16V6C22,4.89%2021.1,4%2020,4H4C2.89,4%202,4.89%202,6V16A2,2%200%200,0%204,18H0V20H24V18H20Z'%20/%3e%3c/svg%3e",_h="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M6,19A5,5%200%200,1%201,14A5,5%200%200,1%206,9C7,6.65%209.3,5%2012,5C15.43,5%2018.24,7.66%2018.5,11.03L19,11A4,4%200%200,1%2023,15A4,4%200%200,1%2019,19H6M19,13H17V12A5,5%200%200,0%2012,7C9.5,7%207.45,8.82%207.06,11.19C6.73,11.07%206.37,11%206,11A3,3%200%200,0%203,14A3,3%200%200,0%206,17H19A2,2%200%200,0%2021,15A2,2%200%200,0%2019,13Z'%20/%3e%3c/svg%3e",LSe=async e=>{try{return{data:(await dt.post("/diagnosis/",e)).data.data.new_diagnosis,error:null}}catch(t){return console.error("There was an error creating patients:",t?.response||t),{data:[],error:t}}},MSe=async e=>{try{return await dt.put("/diagnosis/",e),{error:null}}catch(t){return console.error("Error updating diagnosis:",t),{error:t}}},OSe=async e=>{try{return{data:(await dt.post("/medicine/medicines",e)).data.data.id_mapping,error:null}}catch(t){return console.error("Error adding medicine:",t),{data:[],error:t}}},HSe=async(e,t)=>{try{return{data:(await dt.post(`/dosages?doctor_id=${t}`,e)).data.data.id_mapping,error:null}}catch(n){return console.error("Error creating dosage:",n),{data:null,error:n}}},$Se=async(e,t)=>{try{return await dt.post(`/consultation/consultation_medicines/${e}`,t),{error:null}}catch(n){return console.error("Error updating consultation:",n),{error:n}}},kH=async e=>{try{return{data:(await dt.post("/medicine/",e)).data.data.newMedicine,error:null}}catch(t){return console.error("Error adding medicine:",t),{data:[],error:t}}},PE=async(e,t)=>{try{return await dt.post(`/diagnosis/diagnosis_medicines/${e}`,t),{error:null}}catch(n){return console.error("Error adding diagnosis medicine mapping:",n),{error:n}}},QSe=async e=>{try{return{data:(await dt.get(`/medicine/diagnosis_medicines/${e.id}`)).data.data.medicines,error:null}}catch(t){return console.error("Error adding diagnosis medicine mapping:",t),{data:[],error:t}}},GSe=async(e,t,n={})=>{try{const a=n.skipMessages?{headers:{"X-Skip-Messages":"true"}}:{};return{data:(await dt.get(`/medicine/dosage/${e.id}?doctor_id=${t}`,a)).data.data.dosages,error:null,errorMessage:null}}catch(a){if(console.error("Error fetching dosages:",a),a.response?.status===404){const r=a.response?.data?.error||null;return{data:[],error:null,errorMessage:r}}return{data:[],error:a,errorMessage:null}}},TH=async(e,t=!1,n=null)=>{try{const a={};return t&&(a.include_pharmacy_details=!0,n&&(a.pharmacy_id=n)),{data:(await dt.get(`/medicine/search_medicines/${e}`,{params:a})).data.data.medicines,error:null}}catch(a){return console.error("Error fetching medicines:",a),a.response?.status===404?{data:[],error:null}:{data:[],error:a}}},zSe=async(e,t)=>{try{return{data:(await dt.put(`/medicine/${e}`,t)).data.data,error:null}}catch(n){return console.error("Error updating medicine:",n),{data:null,error:n}}},KSe={__name:"create-diagnosis-template",props:{medicineList:{type:Array,default:()=>[]},diagnosis:{type:String,default:""},patientNotes:{type:String,default:""},investigations:{type:String,default:""},doctorId:{type:[String,Number],required:!0}},emits:["close","update&close"],setup(e,{emit:t}){const n=e,a=t,r=V(n.diagnosis),s=V(n.patientNotes),o=V(n.investigations),i=V(!1),c=V(!1),A=V([]),d=V(""),f=V(null),m=ae(()=>n.medicineList.filter(g=>g.isLocal&&g.productName&&g.id!==void 0&&g.id!==null)),h=()=>{f.value&&f.value.abort(),a("close")},p=(g,w)=>{if(w)A.value.includes(g.id)||A.value.push(g.id),console.log("Medicine selected:",g.productName);else{const b=A.value.indexOf(g.id);b>-1&&A.value.splice(b,1),console.log("Medicine deselected:",g.productName)}d.value=""},y=async()=>{c.value=!0,d.value="",f.value=new AbortController;const g=n.medicineList.filter(b=>A.value.includes(b.id)),w={diagnosisName:r.value,instructions:s.value,investigations:o.value,isBookmark:1,isCreatedByUser:1,isImportedFromServer:0,doctor_id:n.doctorId};console.log("Creating new diagnosis:",w);try{const b=await LSe(w);if(f.value?.signal.aborted)return;if(b.error)d.value="Failed to create diagnosis template. Please try again.",console.error("Error creating diagnosis:",b.error);else{w.id=b.data.id;const x=await PE(w.id,g);if(f.value?.signal.aborted)return;if(x.error){d.value="Diagnosis created but failed to associate medicines. Please try editing the template to add medicines.",console.error("Error creating diagnosis medicines:",x.error);return}console.log("Diagnosis template created successfully"),a("update&close")}}catch(b){f.value?.signal.aborted||(d.value="An unexpected error occurred. Please try again.",console.error("Error creating diagnosis template:",b))}finally{f.value?.signal.aborted||(c.value=!1),f.value=null}};return da(()=>{f.value&&f.value.abort()}),(g,w)=>{const b=I("v-card-title"),x=I("v-col"),T=I("v-icon"),F=I("v-btn"),k=I("v-row"),S=I("v-card"),E=I("v-text-field"),C=I("v-textarea"),D=I("v-divider"),P=I("v-card-subtitle"),O=I("v-checkbox"),H=I("v-tooltip"),ie=I("v-chip"),Ae=I("v-card-text"),j=I("v-alert"),J=I("v-form");return U(),pe(S,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(k,{"no-gutters":""},{default:u(()=>[l(x,{cols:"12"},{default:u(()=>[l(S,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(k,{"no-gutters":""},{default:u(()=>[l(x,{cols:"11"},{default:u(()=>[l(b,{class:"pa-0 pl-2"},{default:u(()=>[...w[4]||(w[4]=[M("Create Diagnosis Template",-1)])]),_:1})]),_:1}),l(x,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(F,{icon:"",size:"x-small",onClick:h},{default:u(()=>[l(T,null,{default:u(()=>[...w[5]||(w[5]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(k,{"no-gutters":""},{default:u(()=>[l(x,{cols:"12"},{default:u(()=>[l(S,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(J,{modelValue:i.value,"onUpdate:modelValue":w[3]||(w[3]=ue=>i.value=ue),"validate-on":"blur"},{default:u(()=>[l(k,{"no-gutters":""},{default:u(()=>[l(x,{cols:"12"},{default:u(()=>[l(E,{label:"Diagnosis Name *",density:"compact",modelValue:r.value,"onUpdate:modelValue":w[0]||(w[0]=ue=>r.value=ue),rules:$e(gr)},null,8,["modelValue","rules"])]),_:1}),l(x,{cols:"12"},{default:u(()=>[l(C,{label:"Instructions",density:"compact",modelValue:s.value,"onUpdate:modelValue":w[1]||(w[1]=ue=>s.value=ue),rows:"2","auto-grow":""},null,8,["modelValue"])]),_:1}),l(x,{cols:"12"},{default:u(()=>[l(C,{label:"Investigations",density:"compact",modelValue:o.value,"onUpdate:modelValue":w[2]||(w[2]=ue=>o.value=ue),rows:"1","auto-grow":""},null,8,["modelValue"])]),_:1})]),_:1}),l(k,{"no-gutters":""},{default:u(()=>[l(x,{cols:"12"},{default:u(()=>[l(D,{class:"my-3"},{default:u(()=>[...w[6]||(w[6]=[M("Medicines",-1)])]),_:1}),m.value.length>0?(U(),pe(S,{key:0,variant:"outlined"},{default:u(()=>[l(P,{class:"pb-2"},{default:u(()=>[...w[7]||(w[7]=[M("Available Medicines (from current consultation):",-1)])]),_:1}),l(Ae,null,{default:u(()=>[(U(!0),me(We,null,qt(m.value,ue=>(U(),pe(S,{key:`available-${ue.id}`,flat:""},{default:u(()=>[l(k,{"no-gutters":""},{default:u(()=>[l(x,{cols:"5",class:"d-flex align-center justify-start"},{default:u(()=>[l(O,{"model-value":A.value.includes(ue.id),color:"primary",density:"compact","hide-details":"","onUpdate:modelValue":ne=>p(ue,ne)},null,8,["model-value","onUpdate:modelValue"]),l(ie,{color:"primary","text-color":"black",size:"small",class:"ml-2"},kv({default:u(()=>[v("strong",null,K(ue.productName),1)]),_:2},[ue.isLocal?{name:"append",fn:u(()=>[l(H,{text:"Saved Medicine"},{activator:u(({props:ne})=>[l(T,Ue({size:"small"},{ref_for:!0},ne,{class:"ml-1"}),{default:u(()=>[...w[8]||(w[8]=[v("img",{src:Zd,alt:"Saved Medicine"},null,-1)])]),_:1},16)]),_:1})]),key:"0"}:{name:"append",fn:u(()=>[l(H,{text:"External Medicine"},{activator:u(({props:ne})=>[l(T,Ue({size:"small"},{ref_for:!0},ne,{class:"ml-1"}),{default:u(()=>[...w[9]||(w[9]=[v("img",{src:_h,alt:"External Medicine"},null,-1)])]),_:1},16)]),_:1})]),key:"1"}]),1024)]),_:2},1024),l(x,{cols:"7",class:"d-flex align-center justify-start"},{default:u(()=>[l(P,null,{default:u(()=>[M(K(ue.saltComposition),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):(U(),pe(j,{key:1,type:"info",variant:"outlined"},{default:u(()=>[...w[10]||(w[10]=[M(" No medicines available from current consultation to add to template. ",-1)])]),_:1})),d.value?(U(),pe(j,{key:2,type:"error",variant:"outlined",class:"mt-3"},{default:u(()=>[M(K(d.value),1)]),_:1})):ge("",!0)]),_:1})]),_:1}),l(D),l(k,{"no-gutters":""},{default:u(()=>[l(x,{cols:"2"}),l(x,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(F,{variant:"outlined",onClick:y,disabled:!i.value,loading:c.value},{default:u(()=>[...w[11]||(w[11]=[M(" Create ",-1)])]),_:1},8,["disabled","loading"])]),_:1}),l(x,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},WSe=Xt(KSe,[["__scopeId","data-v-92535624"]]),jSe={__name:"edit-diagnosis-template",props:{medicineList:{type:Array,required:!0},selectedDiagnosis:{type:Object,default:null}},emits:["close","update&close"],setup(e,{emit:t}){const n=e,a=t,r=V(null),s=V({}),o=V([]),i=V(!1),c=V(!1),A=V([]),d=V(!1),f=V(""),m=V(null);Ke(()=>n.medicineList,()=>{h()},{deep:!0});const h=()=>{const x=o.value.map(T=>T.id);A.value=n.medicineList.filter(T=>T.isLocal&&T.id!==void 0&&T.id!==null&&!x.includes(T.id)).map(T=>({...T,isSelected:!1,_uniqueKey:`available_${T.id}`}))};un(async()=>{n.selectedDiagnosis?(r.value=n.selectedDiagnosis,await p(n.selectedDiagnosis)):h()});const p=async x=>{if(!x){s.value={},o.value=[],h();return}s.value=Qn.cloneDeep(x),d.value=!0,f.value="";try{const T=await QSe(x);o.value=(T.data||[]).map(F=>({...F,isSelected:!0,_uniqueKey:`template_${F.id}`})),console.log("Template medicines fetched:",o.value),h()}catch(T){console.error("Error fetching template medicines:",T),f.value="Failed to load template medicines. Please try again.",o.value=[],h()}finally{d.value=!1}},y=x=>{console.log("Medicine selection changed:",x.productName,x.isSelected)},g=x=>{console.log("Template medicine selection changed:",x.productName,x.isSelected)},w=async()=>{if(!(!r.value||!c.value)){i.value=!0;try{const x=await MSe(s.value);if(x.error){console.error("Error updating diagnosis:",x.error);return}const T=o.value.filter(S=>S.isSelected),F=A.value.filter(S=>S.isSelected),k=[...T,...F];if(k.length>0){const S=await PE(r.value.id,k);if(S.error){console.error("Error updating diagnosis medicines:",S.error);return}}else{const S=await PE(r.value.id,[]);if(S.error){console.error("Error clearing diagnosis medicines:",S.error);return}}console.log("Template updated successfully"),a("update&close")}catch(x){console.error("Error updating template:",x)}finally{i.value=!1}}},b=()=>{m.value&&m.value.abort(),a("close")};return da(()=>{m.value&&m.value.abort()}),(x,T)=>{const F=I("v-card-title"),k=I("v-col"),S=I("v-icon"),E=I("v-btn"),C=I("v-row"),D=I("v-card"),P=I("v-text-field"),O=I("v-textarea"),H=I("v-divider"),ie=I("v-card-subtitle"),Ae=I("v-progress-linear"),j=I("v-card-text"),J=I("v-checkbox"),ue=I("v-tooltip"),ne=I("v-chip"),Y=I("v-alert"),te=I("v-form");return U(),pe(D,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(C,{"no-gutters":""},{default:u(()=>[l(k,{cols:"12"},{default:u(()=>[l(D,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(C,{"no-gutters":""},{default:u(()=>[l(k,{cols:"11"},{default:u(()=>[l(F,{class:"pa-0 pl-2"},{default:u(()=>[...T[4]||(T[4]=[M("Edit Diagnosis Template",-1)])]),_:1})]),_:1}),l(k,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(E,{icon:"",size:"x-small",onClick:b},{default:u(()=>[l(S,null,{default:u(()=>[...T[5]||(T[5]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(C,{"no-gutters":""},{default:u(()=>[l(k,{cols:"12"},{default:u(()=>[l(D,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(te,{modelValue:c.value,"onUpdate:modelValue":T[3]||(T[3]=L=>c.value=L),"validate-on":"blur"},{default:u(()=>[l(C,{"no-gutters":""},{default:u(()=>[r.value?(U(),me(We,{key:0},[l(k,{cols:"12"},{default:u(()=>[l(P,{label:"Diagnosis Name *",density:"compact",modelValue:s.value.diagnosisName,"onUpdate:modelValue":T[0]||(T[0]=L=>s.value.diagnosisName=L),rules:$e(gr)},null,8,["modelValue","rules"])]),_:1}),l(k,{cols:"12"},{default:u(()=>[l(O,{label:"Instructions",density:"compact",rows:"2","auto-grow":"",modelValue:s.value.instructions,"onUpdate:modelValue":T[1]||(T[1]=L=>s.value.instructions=L)},null,8,["modelValue"])]),_:1}),l(k,{cols:"12"},{default:u(()=>[l(O,{label:"Investigations",density:"compact",modelValue:s.value.investigations,"onUpdate:modelValue":T[2]||(T[2]=L=>s.value.investigations=L),rows:"1","auto-grow":""},null,8,["modelValue"])]),_:1}),l(k,{cols:"12"},{default:u(()=>[l(H,{class:"my-3"},{default:u(()=>[...T[6]||(T[6]=[M("Medicines",-1)])]),_:1}),d.value?(U(),pe(D,{key:0,variant:"outlined",class:"mb-3"},{default:u(()=>[l(ie,{class:"pb-2"},{default:u(()=>[...T[7]||(T[7]=[M("Loading template medicines...",-1)])]),_:1}),l(j,null,{default:u(()=>[l(Ae,{indeterminate:""})]),_:1})]),_:1})):o.value.length>0?(U(),pe(D,{key:1,variant:"outlined",class:"mb-3"},{default:u(()=>[l(ie,{class:"pb-2"},{default:u(()=>[...T[8]||(T[8]=[M("Current Template Medicines:",-1)])]),_:1}),l(j,null,{default:u(()=>[(U(!0),me(We,null,qt(o.value,L=>(U(),pe(D,{key:L._uniqueKey||`template-${L.id}`,flat:""},{default:u(()=>[l(C,{"no-gutters":""},{default:u(()=>[l(k,{cols:"5",class:"d-flex align-center justify-start"},{default:u(()=>[l(J,{modelValue:L.isSelected,"onUpdate:modelValue":N=>L.isSelected=N,color:"primary",density:"compact","hide-details":"",onChange:N=>g(L)},null,8,["modelValue","onUpdate:modelValue","onChange"]),l(ne,{color:"primary","text-color":"black",size:"small",class:"ml-2"},{append:u(()=>[l(ue,{text:"Saved Medicine"},{activator:u(({props:N})=>[l(S,Ue({size:"small"},{ref_for:!0},N,{class:"ml-1"}),{default:u(()=>[...T[9]||(T[9]=[v("img",{src:Zd,alt:"Saved Medicine"},null,-1)])]),_:1},16)]),_:1})]),default:u(()=>[v("strong",null,K(L.productName),1)]),_:2},1024)]),_:2},1024),l(k,{cols:"7",class:"d-flex align-center justify-start"},{default:u(()=>[l(ie,null,{default:u(()=>[M(K(L.saltComposition),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):ge("",!0),A.value.length>0?(U(),pe(D,{key:2,variant:"outlined"},{default:u(()=>[l(ie,{class:"pb-2"},{default:u(()=>[...T[10]||(T[10]=[M("Available Medicines (from current consultation):",-1)])]),_:1}),l(j,null,{default:u(()=>[(U(!0),me(We,null,qt(A.value,L=>(U(),pe(D,{key:L._uniqueKey||`available-${L.id}`,flat:""},{default:u(()=>[l(C,{"no-gutters":""},{default:u(()=>[l(k,{cols:"5",class:"d-flex align-center justify-start"},{default:u(()=>[l(J,{modelValue:L.isSelected,"onUpdate:modelValue":N=>L.isSelected=N,color:"primary",density:"compact","hide-details":"",onChange:N=>y(L)},null,8,["modelValue","onUpdate:modelValue","onChange"]),l(ne,{color:"primary","text-color":"black",size:"small",class:"ml-2"},kv({default:u(()=>[v("strong",null,K(L.productName),1)]),_:2},[L.isLocal?{name:"append",fn:u(()=>[l(ue,{text:"Saved Medicine"},{activator:u(({props:N})=>[l(S,Ue({size:"small"},{ref_for:!0},N,{class:"ml-1"}),{default:u(()=>[...T[11]||(T[11]=[v("img",{src:Zd,alt:"Saved Medicine"},null,-1)])]),_:1},16)]),_:1})]),key:"0"}:{name:"append",fn:u(()=>[l(ue,{text:"External Medicine"},{activator:u(({props:N})=>[l(S,Ue({size:"small"},{ref_for:!0},N,{class:"ml-1"}),{default:u(()=>[...T[12]||(T[12]=[v("img",{src:_h,alt:"External Medicine"},null,-1)])]),_:1},16)]),_:1})]),key:"1"}]),1024)]),_:2},1024),l(k,{cols:"7",class:"d-flex align-center justify-start"},{default:u(()=>[l(ie,null,{default:u(()=>[M(K(L.saltComposition),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):(U(),pe(Y,{key:3,type:"info",variant:"outlined"},{default:u(()=>[...T[13]||(T[13]=[M(" No medicines available from current consultation to add to template. ",-1)])]),_:1})),f.value?(U(),pe(Y,{key:4,type:"error",variant:"outlined",class:"mt-3"},{default:u(()=>[M(K(f.value),1)]),_:1})):ge("",!0)]),_:1})],64)):(U(),pe(k,{key:1,cols:"12"},{default:u(()=>[l(Y,{type:"info",variant:"outlined"},{default:u(()=>[...T[14]||(T[14]=[M(" No diagnosis template selected for editing. ",-1)])]),_:1})]),_:1}))]),_:1}),l(H),l(C,{"no-gutters":""},{default:u(()=>[l(k,{cols:"2"}),l(k,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(E,{variant:"outlined",onClick:w,disabled:!c.value||!r.value,loading:i.value},{default:u(()=>[...T[15]||(T[15]=[M(" Update ",-1)])]),_:1},8,["disabled","loading"])]),_:1}),l(k,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},qSe=Xt(jSe,[["__scopeId","data-v-217bbc0c"]]),YSe={class:"diagnosis-name-truncate"},XSe={__name:"search-diagnosis",props:{modelValue:{type:String,default:""},doctorId:{type:[String,Number],required:!0}},emits:["update:modelValue","diagnosisSelected"],setup(e,{emit:t}){const n=e,a=t,r=V(!1),s=V([]),o=V(""),i=V(""),c=V(!1);let A=null;const d=h=>{o.value=h};Ke(i,h=>{typeof h=="string"?(a("update:modelValue",h),a("diagnosisSelected",{diagnosisName:h,isUserTyped:!0,isFromHistory:!1})):h&&typeof h=="object"?(a("update:modelValue",h.diagnosisName),a("diagnosisSelected",h)):h||(a("update:modelValue",""),a("diagnosisSelected",null))}),Ke(o,h=>{if(A&&clearTimeout(A),c.value=!1,!h||h.length<1){r.value=!1,s.value=[];return}A=setTimeout(()=>{f(h)},300)}),Ke(()=>n.modelValue,h=>{h!==i.value&&(i.value=h)},{immediate:!0});const f=async h=>{if(!(!h||h.length<1)){r.value=!0,c.value=!1;try{const p=await dt.get(`diagnosis/search_diagnosis/${h}`,{params:{doctor_id:n.doctorId}});s.value=p.data.data.diagnosis,(!s.value||s.value.length===0)&&(c.value=!0)}catch(p){console.error("Error fetching diagnosis:",p),c.value=!0}finally{r.value=!1}}},m=ae(()=>!o.value||o.value.length<1?"Start typing to search consultation history, or type custom diagnosis":r.value?"Searching consultation history and external sources...":c.value?"No matches found in consultation history or external sources. You can still type custom diagnosis.":"");return(h,p)=>{const y=I("v-icon"),g=I("v-tooltip"),w=I("v-list-item"),b=I("v-card-subtitle"),x=I("v-card"),T=I("v-combobox");return U(),pe(T,{modelValue:i.value,"onUpdate:modelValue":p[0]||(p[0]=F=>i.value=F),items:s.value,search:o.value,"onUpdate:search":d,"item-title":"diagnosisName","item-value":"diagnosisName",label:"Diagnosis - search history or type directly",placeholder:"Type diagnosis or search consultation history...",variant:"underlined",loading:r.value,"no-data-text":m.value,clearable:"","hide-no-data":"","auto-select-first":"",density:"compact",class:"diagnosis-combobox"},{item:u(({props:F,item:k})=>[l(w,Ue(F,{density:"compact"}),{title:u(()=>[v("span",YSe,K(k.raw.diagnosisName),1)]),append:u(()=>[l(g,{location:"top"},{activator:u(({props:S})=>[l(y,Ue(S,{size:"small"}),{default:u(()=>[k.raw.isFromHistory?(U(),pe(y,{key:0,icon:"mdi-history",color:"primary"})):(U(),pe(y,{key:1,icon:"mdi-cloud",color:"secondary"}))]),_:2},1040)]),default:u(()=>[v("span",null,K(k.raw.isFromHistory?"From your consultation history":"External suggestion"),1)]),_:2},1024)]),_:2},1040)]),"no-data":u(()=>[l(x,{flat:"",class:"pa-4 text-center"},{default:u(()=>[l(b,null,{default:u(()=>[M(K(m.value),1)]),_:1})]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},JSe=Xt(XSe,[["__scopeId","data-v-18a25720"]]),ZSe={class:"investigation-name-truncate"},eEe={__name:"search-investigation",props:{modelValue:{type:String,default:""},doctorId:{type:[String,Number],required:!0}},emits:["update:modelValue","investigationSelected"],setup(e,{emit:t}){const n=e,a=t,r=V(!1),s=V([]),o=V(""),i=V(""),c=V(!1);let A=null;const d=h=>{o.value=h};Ke(i,h=>{typeof h=="string"?(a("update:modelValue",h),a("investigationSelected",{investigationName:h,isUserTyped:!0,isFromHistory:!1})):h&&typeof h=="object"?(a("update:modelValue",h.investigationName),a("investigationSelected",h)):h||(a("update:modelValue",""),a("investigationSelected",null))}),Ke(o,h=>{if(A&&clearTimeout(A),c.value=!1,!h||h.length<1){r.value=!1,s.value=[];return}A=setTimeout(()=>{f(h)},300)}),Ke(()=>n.modelValue,h=>{h!==i.value&&(i.value=h)},{immediate:!0});const f=async h=>{if(!(!h||h.length<1)){r.value=!0,c.value=!1;try{const p=await dt.get(`consultation/search_investigations/${h}`,{params:{doctor_id:n.doctorId}});s.value=p.data.data.investigations.filter(y=>y.investigationName&&y.investigationName.trim().length>0),(!s.value||s.value.length===0)&&(c.value=!0)}catch(p){console.error("Error fetching investigations:",p),c.value=!0}finally{r.value=!1}}},m=ae(()=>!o.value||o.value.length<1?"Start typing to search consultation history, or type custom investigations":r.value?"Searching consultation history...":c.value?"No matches found in consultation history. You can still type custom investigations.":"");return(h,p)=>{const y=I("v-icon"),g=I("v-tooltip"),w=I("v-list-item"),b=I("v-card-subtitle"),x=I("v-card"),T=I("v-combobox");return U(),pe(T,{modelValue:i.value,"onUpdate:modelValue":p[0]||(p[0]=F=>i.value=F),items:s.value,search:o.value,"onUpdate:search":d,"item-title":"investigationName","item-value":"investigationName",label:"Investigations - search history or type directly",placeholder:"Type investigations or search consultation history...",variant:"underlined",loading:r.value,"no-data-text":m.value,clearable:"","hide-no-data":"","auto-select-first":"",density:"compact",class:"investigation-combobox"},{item:u(({props:F,item:k})=>[l(w,Ue(F,{density:"compact"}),{title:u(()=>[v("span",ZSe,K(k.raw.investigationName),1)]),append:u(()=>[l(g,{location:"top"},{activator:u(({props:S})=>[l(y,Ue(S,{size:"small"}),{default:u(()=>[k.raw.isFromHistory?(U(),pe(y,{key:0,icon:"mdi-history",color:"primary"})):ge("",!0)]),_:2},1040)]),default:u(()=>[v("span",null,K(k.raw.isFromHistory?"From your consultation history":"Custom investigation"),1)]),_:2},1024)]),_:2},1040)]),"no-data":u(()=>[l(x,{flat:"",class:"pa-4 text-center"},{default:u(()=>[l(b,null,{default:u(()=>[M(K(m.value),1)]),_:1})]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},tEe=Xt(eEe,[["__scopeId","data-v-4f59e225"]]),nEe={class:"patient-advice-multiline"},aEe={__name:"search-patient-advice",props:{doctorId:{type:[String,Number],required:!0}},emits:["patientAdviceSelected"],setup(e,{emit:t}){const n=e,a=t,r=V(!1),s=V([]),o=V(""),i=V(null),c=V(!1);let A=null;const d=y=>{s.value.some(w=>w.patientAdvice===y)||(o.value=y)},f=()=>{(!o.value||o.value.length===0)&&s.value.length===0&&h("")},m=y=>{y&&(a("patientAdviceSelected",y),i.value=null)};Ke(o,y=>{A&&clearTimeout(A),c.value=!1,A=setTimeout(()=>{h(y||"")},300)});const h=async y=>{r.value=!0,c.value=!1;try{const g=y||"",w=await dt.get(`consultation/search_patient_advice/${encodeURIComponent(g)}`,{params:{doctor_id:n.doctorId}});s.value=w.data.data.patientAdvices.filter(b=>b.patientAdvice&&b.patientAdvice.trim().length>0),(!s.value||s.value.length===0)&&(c.value=!0)}catch(g){console.error("Error fetching patient advice:",g),c.value=!0}finally{r.value=!1}},p=ae(()=>!o.value||o.value.length<1?r.value?"Loading recent patient advice...":c.value?"No patient advice found in consultation history. Start typing to search.":"Start typing to search consultation history":r.value?"Searching consultation history...":c.value?"No matches found in consultation history.":"");return(y,g)=>{const w=I("v-icon"),b=I("v-tooltip"),x=I("v-list-item"),T=I("v-card-subtitle"),F=I("v-card"),k=I("v-autocomplete");return U(),pe(k,{modelValue:i.value,"onUpdate:modelValue":[g[0]||(g[0]=S=>i.value=S),m],items:s.value,search:o.value,"onUpdate:search":d,onFocus:f,"item-title":"patientAdvice","item-value":"patientAdvice",label:"Search Patient Advice History",placeholder:"Type to search consultation history...",variant:"outlined",loading:r.value,"no-data-text":p.value,clearable:"","hide-no-data":"","auto-select-first":"",density:"compact","return-object":"",class:"patient-advice-search"},{item:u(({props:S,item:E})=>[l(x,Ue(S,{density:"compact",class:"patient-advice-list-item"}),{title:u(()=>[v("div",nEe,K(E.raw.patientAdvice),1)]),append:u(()=>[l(b,{location:"top"},{activator:u(({props:C})=>[l(w,Ue(C,{size:"small"}),{default:u(()=>[E.raw.isFromHistory?(U(),pe(w,{key:0,icon:"mdi-history",color:"primary"})):ge("",!0)]),_:2},1040)]),default:u(()=>[v("span",null,K(E.raw.isFromHistory?"From your consultation history":"Custom patient advice"),1)]),_:2},1024)]),_:2},1040)]),"no-data":u(()=>[l(F,{flat:"",class:"pa-4 text-center"},{default:u(()=>[l(T,null,{default:u(()=>[M(K(p.value),1)]),_:1})]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},rEe=Xt(aEe,[["__scopeId","data-v-daaff071"]]),sEe={class:"template-name template-name-truncate"},oEe={class:"text-caption template-subtitle-truncate"},iEe={key:0},lEe={__name:"diagnosis-template-autocomplete",props:{doctorId:{type:[String,Number],required:!0}},emits:["template-selected"],setup(e,{emit:t}){const n=e,a=t,r=V(null),s=V([]),o=V(""),i=V(!1),c=V(!1);let A=null;const d=w=>{o.value=w},f=()=>{s.value.length===0&&(!o.value||o.value.length===0)&&h()};Ke(o,w=>{if(A&&clearTimeout(A),!w||w.length===0){h();return}A=setTimeout(()=>{p(w)},300)});const m=w=>{w&&typeof w=="object"&&(console.log("Template selected:",w),a("template-selected",{template:w,autoFillData:{diagnosis:w.diagnosisName,instructions:w.instructions||"",investigations:w.investigations||"",medicines:w.diagnosisMedicines||[]}}),setTimeout(()=>{r.value=null,o.value="",s.value=[]},100))},h=async()=>{i.value=!0;try{const w=await dt.get("diagnosis/search_templates/all",{params:{doctor_id:n.doctorId}});s.value=w.data.data.templates||[],c.value=!0}catch(w){console.error("Error fetching all templates:",w),s.value=[],c.value=!0}finally{i.value=!1}},p=async w=>{if(!(!w||w.length===0)){i.value=!0;try{const b=await dt.get(`diagnosis/search_templates/${w}`,{params:{doctor_id:n.doctorId}});s.value=b.data.data.templates||[]}catch(b){console.error("Error fetching templates:",b),s.value=[]}finally{i.value=!1}}},y=w=>{const b=[];return w.instructions&&b.push(`Instructions: ${w.instructions.substring(0,30)}...`),w.investigations&&b.push(`Investigations: ${w.investigations.substring(0,20)}...`),w.diagnosisMedicines&&w.diagnosisMedicines.length>0&&b.push(`${w.diagnosisMedicines.length} medicine(s)`),b.join(" | ")||"Template"},g=ae(()=>i.value?!o.value||o.value.length===0?"Loading templates...":"Searching templates...":!o.value||o.value.length===0?c.value&&s.value.length===0?"No saved diagnosis templates found. Create templates during consultations to see them here.":"Click to view your saved diagnosis templates":o.value&&s.value.length===0?`No templates found for "${o.value}". Try a different search term.`:"");return(w,b)=>{const x=I("v-icon"),T=I("v-tooltip"),F=I("v-list-item"),k=I("v-list"),S=I("v-card-subtitle"),E=I("v-card-text"),C=I("v-card"),D=I("v-autocomplete");return U(),pe(D,{modelValue:r.value,"onUpdate:modelValue":[b[0]||(b[0]=P=>r.value=P),m],items:s.value,search:o.value,"onUpdate:search":d,onFocus:f,"item-title":"diagnosisName","item-value":"diagnosisName",label:"select diagnosis template (optional)",placeholder:"Search saved templates...",variant:"outlined",loading:i.value,"no-data-text":g.value,clearable:"","return-object":"",density:"compact","prepend-inner-icon":"mdi-magnify",class:"template-autocomplete"},{item:u(({props:P,item:O})=>[l(k,{density:"compact",class:"template-search-list"},{default:u(()=>[l(F,Ue(P,{class:"template-search-item"}),{title:u(()=>[v("span",sEe,K(O.raw.diagnosisName),1)]),subtitle:u(()=>[v("span",oEe,K(y(O.raw)),1)]),append:u(()=>[l(T,{location:"top"},{activator:u(({props:H})=>[l(x,Ue(H,{size:"small",color:"primary"}),{default:u(()=>[...b[1]||(b[1]=[M(" mdi-bookmark ",-1)])]),_:1},16)]),default:u(()=>[b[2]||(b[2]=v("span",null,"Saved Template",-1))]),_:1})]),_:2},1040)]),_:2},1024)]),"no-data":u(()=>[l(C,{flat:"",class:"pa-4 text-center"},{default:u(()=>[c.value&&s.value.length===0&&!o.value?(U(),me("div",iEe,[l(x,{color:"grey-lighten-1",size:"48",class:"mb-2"},{default:u(()=>[...b[3]||(b[3]=[M("mdi-bookmark-outline",-1)])]),_:1}),l(S,{class:"text-wrap mb-2"},{default:u(()=>[...b[4]||(b[4]=[M("No saved diagnosis templates found",-1)])]),_:1}),l(E,{class:"text-caption text-grey"},{default:u(()=>[...b[5]||(b[5]=[M(" Save diagnosis templates during consultations to quickly reuse them here. ",-1)])]),_:1})])):(U(),pe(S,{key:1,class:"text-wrap"},{default:u(()=>[M(K(g.value),1)]),_:1}))]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},uEe=Xt(lEe,[["__scopeId","data-v-fd6a829c"]]),cEe={class:"font-weight-medium medicine-chip-truncate"},dEe={class:"d-flex align-center"},AEe={class:"medicine-name-truncate"},fEe={key:0,class:"ml-2"},mEe={key:1,class:"ml-2"},vEe={class:"text-center"},hEe={__name:"search-medicine",props:{showInventoryStatus:{type:Boolean,default:!1}},emits:["searchedMedicines","addMedicine"],setup(e,{emit:t}){const n=Rn(),a=e,r=ae(()=>n.getters["pharmacyModule/currentPharmacyId"]),s=t,o=()=>{s("addMedicine")},i=V(!1),c=V([]),A=V(""),d=V([]),f=V(!1);let m=null;Ke(A,w=>{if(m&&clearTimeout(m),f.value=!1,!w||w.trim().length===0){i.value=!1;return}m=setTimeout(()=>{h(w)},300)}),Ke(d,w=>{w.length>0&&s("searchedMedicines",w)});const h=async w=>{if(!(!w||w.trim().length===0)){i.value=!0,f.value=!1;try{const b=a.showInventoryStatus?r.value:null,x=await TH(w,a.showInventoryStatus,b);x.error?(console.error("Medicine search error:",x.error),f.value=!0):(c.value=x.data,(!c.value||c.value.length===0)&&(f.value=!0))}catch(b){console.error("Medicine search failed:",b),f.value=!0}finally{i.value=!1}}},p=w=>w.isPharmacy?w.inventoryUnits===void 0||w.inventoryUnits===null?"grey":w.inventoryUnits===0?"error":w.lowStock?"warning":"success":"default",y=w=>w.isPharmacy?w.inventoryUnits===void 0||w.inventoryUnits===null?"No Inventory":w.inventoryUnits===0?w.closestExpiry&&new Date(w.closestExpiry)<new Date?"Expired - No stock":"No stock":`${w.inventoryUnits} units`:"",g=ae(()=>!A.value||A.value.trim().length===0?"Start typing to search medicines":i.value?"Searching medicines...":f.value?"No medicines found matching your search. Try different keywords or create new medicine below.":"");return(w,b)=>{const x=I("v-chip"),T=I("v-list-item-subtitle"),F=I("v-icon"),k=I("v-list-item"),S=I("v-divider"),E=I("v-card-subtitle"),C=I("v-btn"),D=I("v-card"),P=I("v-list"),O=I("v-autocomplete");return U(),pe(O,{multiple:"",clearable:"","clear-on-select":"","hide-selected":"",chips:"","closable-chips":"",density:"compact",variant:"outlined",label:"search medicine by trade name",items:c.value,search:A.value,"onUpdate:search":b[0]||(b[0]=H=>A.value=H),loading:i.value,"item-title":"productName","item-value":"item","return-object":"",modelValue:d.value,"onUpdate:modelValue":b[1]||(b[1]=H=>d.value=H),rounded:"l","prepend-inner-icon":"mdi-magnify","no-data-text":g.value,placeholder:i.value?"Searching...":"Start typing to search medicines"},{chip:u(({props:H,item:ie})=>[l(x,Ue(H,{size:"small",class:"mr-1"}),{default:u(()=>[v("span",cEe,K(ie.raw.productName),1)]),_:2},1040)]),item:u(({props:H,item:ie,index:Ae})=>[l(P,{density:"compact",class:"medicine-search-list"},{default:u(()=>[l(k,Ue(H,{class:"medicine-search-item"}),{title:u(()=>[v("div",dEe,[v("span",AEe,K(ie.raw.productName),1),e.showInventoryStatus&&ie.raw.isPharmacy?(U(),pe(x,{key:0,color:p(ie.raw),size:"x-small",variant:"flat",class:"ml-2"},{default:u(()=>[M(K(y(ie.raw)),1)]),_:2},1032,["color"])):ge("",!0)])]),append:u(()=>[e.showInventoryStatus&&ie.raw.isPharmacy?(U(),pe(F,{key:0,size:"small"},{default:u(()=>[...b[2]||(b[2]=[M(" mdi-store-plus-outline ",-1)])]),_:1})):ie.raw.isLocal?(U(),pe(F,{key:1,size:"small"},{default:u(()=>[...b[3]||(b[3]=[v("img",{src:Zd,alt:"Saved Medicine"},null,-1)])]),_:1})):(U(),pe(F,{key:2,size:"small"},{default:u(()=>[...b[4]||(b[4]=[v("img",{src:_h,alt:"External Medicine"},null,-1)])]),_:1}))]),default:u(()=>[l(T,{class:"medicine-subtitle-truncate"},{default:u(()=>[M(K(ie.raw.marketer)+" ",1),e.showInventoryStatus&&ie.raw.isPharmacy?(U(),me(We,{key:0},[ie.raw.mrp!==null&&ie.raw.mrp!==void 0?(U(),me("span",fEe,"  MRP: "+K(Math.round(ie.raw.mrp)),1)):ge("",!0),ie.raw.discountPercentage!==null&&ie.raw.discountPercentage!==void 0?(U(),me("span",mEe,"  Discount: "+K(ie.raw.discountPercentage)+"% ",1)):ge("",!0)],64)):ge("",!0)]),_:2},1024)]),_:2},1040),Ae===c.value.length-1?(U(),me(We,{key:0},[l(S),l(D,{flat:"",class:"pt-1"},{default:u(()=>[l(E,null,{default:u(()=>[...b[5]||(b[5]=[M("Medicine not in list?",-1)])]),_:1}),l(C,{class:"ml-3",variant:"outlined",onClick:o},{default:u(()=>[l(F,{class:"mr-2"},{default:u(()=>[...b[6]||(b[6]=[M("mdi-plus",-1)])]),_:1}),b[7]||(b[7]=M(" Create Medicine ",-1))]),_:1})]),_:1})],64)):ge("",!0)]),_:2},1024)]),"no-data":u(()=>[A.value&&A.value.trim().length>0?(U(),pe(D,{key:0,flat:"",class:"pa-4"},{default:u(()=>[v("div",vEe,[l(E,{class:"mb-2"},{default:u(()=>[M(K(g.value),1)]),_:1}),l(C,{variant:"outlined",color:"primary",onClick:o},{default:u(()=>[l(F,{class:"mr-2"},{default:u(()=>[...b[8]||(b[8]=[M("mdi-plus",-1)])]),_:1}),b[9]||(b[9]=M(" Create Medicine ",-1))]),_:1})])]),_:1})):(U(),pe(D,{key:1,flat:"",class:"pa-4 text-center"},{default:u(()=>[l(E,null,{default:u(()=>[M(K(g.value),1)]),_:1})]),_:1}))]),_:1},8,["items","search","loading","modelValue","no-data-text","placeholder"])}}},IH=Xt(hEe,[["__scopeId","data-v-246f01d9"]]),pEe={__name:"search-dosage-schedule",props:{modelValue:{type:String,default:""},medicineId:{type:[String,Number],default:null},productForm:{type:String,default:null},doctorId:{type:[String,Number],required:!0}},emits:["update:modelValue","dosageScheduleSelected"],setup(e,{emit:t}){const n=e,a=t,r=V(!1),s=V([]),o=V(""),i=V(""),c=V(!1);let A=null,d=!0;const f=g=>{o.value=g},m=()=>{(!o.value||o.value.trim().length===0)&&n.medicineId&&p("*")},h=()=>{(!o.value||o.value.trim().length===0)&&n.medicineId&&p("*")};Ke(i,g=>{typeof g=="string"?(a("update:modelValue",g),a("dosageScheduleSelected",{dosage_schedule:g,isUserTyped:!0,isFromHistory:!1})):g&&typeof g=="object"?(a("update:modelValue",g.dosage_schedule),a("dosageScheduleSelected",g)):g||(a("update:modelValue",""),a("dosageScheduleSelected",null))}),Ke(o,g=>{if(A&&clearTimeout(A),c.value=!1,!g||g.length<1){r.value=!1,s.value=[];return}A=setTimeout(()=>{p(g)},300)}),Ke(()=>n.modelValue,g=>{g!==i.value&&(i.value=g)},{immediate:!0}),Ke([()=>n.medicineId,()=>n.productForm],()=>{o.value&&o.value.length>0?p(o.value):n.medicineId&&p("*")});const p=async g=>{const w=g==="*"||g==="FOCUS";if(!(!w&&(!g||g.length<1))){r.value=!0,c.value=!1;try{const b={};n.medicineId&&(b.medicine_id=n.medicineId),n.productForm&&(b.product_form=n.productForm),n.doctorId&&(b.doctor_id=n.doctorId);const x=w?"*":g,T=await dt.get(`/medicine/search_dosage_schedules/${encodeURIComponent(x)}`,{params:b});if(!d)return;if(T.data.success&&T.data.data.dosage_schedules){const F=T.data.data.dosage_schedules.filter(k=>k&&k.trim().length>0).map(k=>({dosage_schedule:k,isFromHistory:!0}));s.value=F,F.length===0&&(c.value=!0)}else s.value=[],c.value=!0}catch(b){if(!d)return;console.error("Error fetching dosage schedules:",b),c.value=!0}finally{d&&(r.value=!1)}}},y=ae(()=>!o.value||o.value.length<1?"Click to see all schedule history, or start typing to search":r.value?"Searching schedule history...":c.value?"No matches found in schedule history. You can still type custom schedule.":"");return da(()=>{d=!1,A&&(clearTimeout(A),A=null)}),(g,w)=>{const b=I("v-icon"),x=I("v-tooltip"),T=I("v-combobox");return U(),pe(T,{modelValue:i.value,"onUpdate:modelValue":w[0]||(w[0]=F=>i.value=F),items:s.value,search:o.value,"onUpdate:search":f,onClick:m,onFocus:h,"item-title":"dosage_schedule","item-value":"dosage_schedule",label:"Dosage Schedule",placeholder:"Type or search dosage...",variant:"outlined",loading:r.value,"no-data-text":y.value,clearable:"","hide-no-data":"","auto-select-first":"",density:"compact",class:"dosage-schedule-combobox","single-line":"","hide-details":"","hide-dropdown-icon":""},{"prepend-inner":u(()=>[l(x,{text:"Dosage Schedule e.g. 1 after breakfast",location:"top"},{activator:u(({props:F})=>[l(b,Ue(F,{size:"small",class:"text-medium-emphasis mr-1"}),{default:u(()=>[...w[1]||(w[1]=[M(" mdi-clock-outline ",-1)])]),_:1},16)]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},gEe=Xt(pEe,[["__scopeId","data-v-b0eb0e04"]]),yEe={__name:"search-dosage-duration",props:{modelValue:{type:String,default:""},medicineId:{type:[String,Number],default:null},productForm:{type:String,default:null},doctorId:{type:[String,Number],required:!0}},emits:["update:modelValue","durationSelected"],setup(e,{emit:t}){const n=e,a=t,r=V(!1),s=V([]),o=V(""),i=V(""),c=V(!1);let A=null,d=!0;const f=g=>{o.value=g},m=()=>{(!o.value||o.value.trim().length===0)&&n.medicineId&&p("*")},h=()=>{(!o.value||o.value.trim().length===0)&&n.medicineId&&p("*")};Ke(i,g=>{typeof g=="string"?(a("update:modelValue",g),a("durationSelected",{duration:g,isUserTyped:!0,isFromHistory:!1})):g&&typeof g=="object"?(a("update:modelValue",g.duration),a("durationSelected",g)):g||(a("update:modelValue",""),a("durationSelected",null))}),Ke(o,g=>{if(A&&clearTimeout(A),c.value=!1,!g||g.length<1){r.value=!1,s.value=[];return}A=setTimeout(()=>{p(g)},300)}),Ke(()=>n.modelValue,g=>{g!==i.value&&(i.value=g)},{immediate:!0}),Ke([()=>n.medicineId,()=>n.productForm],()=>{o.value&&o.value.length>0?p(o.value):n.medicineId&&p("*")});const p=async g=>{const w=g==="*"||g==="FOCUS";if(!(!w&&(!g||g.length<1))){r.value=!0,c.value=!1;try{const b={};n.medicineId&&(b.medicine_id=n.medicineId),n.productForm&&(b.product_form=n.productForm),n.doctorId&&(b.doctor_id=n.doctorId);const x=w?"*":g,T=await dt.get(`/medicine/search_dosage_duration/${encodeURIComponent(x)}`,{params:b});if(!d)return;if(T.data.success&&T.data.data.dosage_durations){const F=T.data.data.dosage_durations.filter(k=>k&&k.trim().length>0).map(k=>({duration:k,isFromHistory:!0}));s.value=F,F.length===0&&(c.value=!0)}else s.value=[],c.value=!0}catch(b){if(!d)return;console.error("Error fetching dosage durations:",b),c.value=!0}finally{d&&(r.value=!1)}}},y=ae(()=>!o.value||o.value.length<1?"Click to see all duration history, or start typing to search":r.value?"Searching duration history...":c.value?"No matches found in duration history. You can still type custom duration.":"");return da(()=>{d=!1,A&&(clearTimeout(A),A=null)}),(g,w)=>{const b=I("v-icon"),x=I("v-tooltip"),T=I("v-combobox");return U(),pe(T,{modelValue:i.value,"onUpdate:modelValue":w[0]||(w[0]=F=>i.value=F),items:s.value,search:o.value,"onUpdate:search":f,onClick:m,onFocus:h,"item-title":"duration","item-value":"duration",label:"Duration",placeholder:"Type or search duration...",variant:"outlined",loading:r.value,"no-data-text":y.value,clearable:"","hide-no-data":"","auto-select-first":"",density:"compact",class:"dosage-duration-combobox","single-line":"","hide-details":"","hide-dropdown-icon":""},{"prepend-inner":u(()=>[l(x,{text:"Duration e.g. 5 days",location:"top"},{activator:u(({props:F})=>[l(b,Ue(F,{size:"small",class:"text-medium-emphasis mr-1"}),{default:u(()=>[...w[1]||(w[1]=[M(" mdi-calendar-range ",-1)])]),_:1},16)]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},_Ee=Xt(yEe,[["__scopeId","data-v-f773064d"]]),wEe={__name:"search-dosage-instructions",props:{modelValue:{type:String,default:""},medicineId:{type:[String,Number],default:null},productForm:{type:String,default:null},doctorId:{type:[String,Number],required:!0}},emits:["update:modelValue","instructionsSelected"],setup(e,{emit:t}){const n=e,a=t,r=V(!1),s=V([]),o=V(""),i=V(""),c=V(!1);let A=null,d=!0;const f=g=>{o.value=g},m=()=>{(!o.value||o.value.trim().length===0)&&n.medicineId&&p("*")},h=()=>{(!o.value||o.value.trim().length===0)&&n.medicineId&&p("*")};Ke(i,g=>{typeof g=="string"?(a("update:modelValue",g),a("instructionsSelected",{instructions:g,isUserTyped:!0,isFromHistory:!1})):g&&typeof g=="object"?(a("update:modelValue",g.instructions),a("instructionsSelected",g)):g||(a("update:modelValue",""),a("instructionsSelected",null))}),Ke(o,g=>{if(A&&clearTimeout(A),c.value=!1,!g||g.length<1){r.value=!1,s.value=[];return}A=setTimeout(()=>{p(g)},300)}),Ke(()=>n.modelValue,g=>{g!==i.value&&(i.value=g)},{immediate:!0}),Ke([()=>n.medicineId,()=>n.productForm],()=>{o.value&&o.value.length>0?p(o.value):n.medicineId&&p("*")});const p=async g=>{const w=g==="*"||g==="FOCUS";if(!(!w&&(!g||g.length<1))){r.value=!0,c.value=!1;try{const b={};n.medicineId&&(b.medicine_id=n.medicineId),n.productForm&&(b.product_form=n.productForm),n.doctorId&&(b.doctor_id=n.doctorId);const x=w?"*":g,T=await dt.get(`/medicine/search_dosage_instructions/${encodeURIComponent(x)}`,{params:b});if(!d)return;if(T.data.success&&T.data.data.dosage_instructions){const F=T.data.data.dosage_instructions.filter(k=>k&&k.trim().length>0).map(k=>({instructions:k,isFromHistory:!0}));s.value=F,F.length===0&&(c.value=!0)}else s.value=[],c.value=!0}catch(b){if(!d)return;console.error("Error fetching dosage instructions:",b),c.value=!0}finally{d&&(r.value=!1)}}},y=ae(()=>!o.value||o.value.length<1?"Click to see all instruction history, or start typing to search":r.value?"Searching instruction history...":c.value?"No matches found in instruction history. You can still type custom instructions.":"");return da(()=>{d=!1,A&&(clearTimeout(A),A=null)}),(g,w)=>{const b=I("v-icon"),x=I("v-tooltip"),T=I("v-combobox");return U(),pe(T,{modelValue:i.value,"onUpdate:modelValue":w[0]||(w[0]=F=>i.value=F),items:s.value,search:o.value,"onUpdate:search":f,onClick:m,onFocus:h,"item-title":"instructions","item-value":"instructions",label:"Instructions",placeholder:"Type or search instructions...",variant:"outlined",loading:r.value,"no-data-text":y.value,clearable:"","hide-no-data":"","auto-select-first":"",density:"compact",class:"dosage-instructions-combobox","single-line":"","hide-details":"","hide-dropdown-icon":""},{"prepend-inner":u(()=>[l(x,{text:"Instructions e.g. on empty stomach",location:"top"},{activator:u(({props:F})=>[l(b,Ue(F,{size:"small",class:"text-medium-emphasis mr-1"}),{default:u(()=>[...w[1]||(w[1]=[M(" mdi-information-outline ",-1)])]),_:1},16)]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},bEe=Xt(wEe,[["__scopeId","data-v-73718740"]]),FH={__name:"edit-medicine",props:{medicine:{type:Object,required:!0},mode:{type:String,default:"consultation",validator:e=>["consultation","pharmacy"].includes(e)}},emits:["close","update:medicine"],setup(e,{emit:t}){const n=e,a=t,r=V(gT),s=ae(()=>n.mode==="pharmacy"),o=V({productName:"",marketer:"",saltComposition:"",productForm:"",group:"",hsnCode:"",alertUnits:0}),i=V(!1),c=f=>{f&&(o.value={productName:f.productName||"",marketer:f.marketer||"",saltComposition:f.saltComposition||"",productForm:f.productForm||"",group:f.group||"",hsnCode:f.hsnCode||"",alertUnits:f.alertUnits!==void 0&&f.alertUnits!==null?f.alertUnits:0},console.log("Edit medicine form populated from:",f),console.log("Edit medicine form populated to:",o.value))};Ke(()=>n.medicine,f=>{c(f)},{immediate:!0,deep:!0}),Ke(()=>n.medicine?.id,f=>{f&&n.medicine&&c(n.medicine)},{immediate:!0});const A=()=>{a("close")},d=async()=>{const f={productName:o.value.productName,marketer:o.value.marketer||"",saltComposition:o.value.saltComposition||"",productForm:o.value.productForm,group:o.value.group||""};s.value&&(f.hsnCode=o.value.hsnCode||"",f.alertUnits=o.value.alertUnits||0,f.isPharmacy=!0);const m=await zSe(n.medicine.id,f);if(m.error)console.error("Error updating medicine:",m.error);else{const h=m.data||{...n.medicine,...f};a("update:medicine",h),A()}};return(f,m)=>{const h=I("v-card-title"),p=I("v-col"),y=I("v-icon"),g=I("v-btn"),w=I("v-row"),b=I("v-card"),x=I("v-text-field"),T=I("v-combobox"),F=I("v-divider"),k=I("v-form");return U(),pe(b,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(w,{"no-gutters":""},{default:u(()=>[l(p,{cols:"12"},{default:u(()=>[l(b,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(w,{"no-gutters":""},{default:u(()=>[l(p,{cols:"11"},{default:u(()=>[l(h,{class:"pa-0 pl-2"},{default:u(()=>[...m[8]||(m[8]=[M("Edit Medicine",-1)])]),_:1})]),_:1}),l(p,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(g,{icon:"",size:"x-small",onClick:A},{default:u(()=>[l(y,null,{default:u(()=>[...m[9]||(m[9]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(w,{"no-gutters":""},{default:u(()=>[l(p,{cols:"12"},{default:u(()=>[l(b,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(k,{modelValue:i.value,"onUpdate:modelValue":m[7]||(m[7]=S=>i.value=S),"validate-on":"blur"},{default:u(()=>[l(w,{"no-gutters":""},{default:u(()=>[l(p,{cols:"12"},{default:u(()=>[l(x,{label:"Trade Name *",density:"compact",modelValue:o.value.productName,"onUpdate:modelValue":m[0]||(m[0]=S=>o.value.productName=S),rules:$e(gr)},null,8,["modelValue","rules"])]),_:1}),l(p,{cols:"12"},{default:u(()=>[l(T,{label:"Product Form *",density:"compact",items:r.value,rules:$e(gr),modelValue:o.value.productForm,"onUpdate:modelValue":m[1]||(m[1]=S=>o.value.productForm=S),clearable:""},null,8,["items","rules","modelValue"])]),_:1}),l(p,{cols:"12"},{default:u(()=>[l(x,{label:"Company Name",density:"compact",modelValue:o.value.marketer,"onUpdate:modelValue":m[2]||(m[2]=S=>o.value.marketer=S)},null,8,["modelValue"])]),_:1}),l(p,{cols:"12"},{default:u(()=>[l(x,{label:"Salt Composition",density:"compact",modelValue:o.value.saltComposition,"onUpdate:modelValue":m[3]||(m[3]=S=>o.value.saltComposition=S)},null,8,["modelValue"])]),_:1}),l(p,{cols:"12"},{default:u(()=>[l(x,{label:"Group",density:"compact",modelValue:o.value.group,"onUpdate:modelValue":m[4]||(m[4]=S=>o.value.group=S)},null,8,["modelValue"])]),_:1}),s.value?(U(),me(We,{key:0},[l(p,{cols:"12"},{default:u(()=>[l(x,{label:"HSN Code",density:"compact",modelValue:o.value.hsnCode,"onUpdate:modelValue":m[5]||(m[5]=S=>o.value.hsnCode=S),hint:"4-8 digits, alphanumeric","persistent-hint":""},null,8,["modelValue"])]),_:1}),l(p,{cols:"12"},{default:u(()=>[l(x,{label:"Alert Units",density:"compact",type:"number",modelValue:o.value.alertUnits,"onUpdate:modelValue":m[6]||(m[6]=S=>o.value.alertUnits=S),modelModifiers:{number:!0},hint:"Low stock alert threshold","persistent-hint":"",rules:[S=>S>=0||"Must be 0 or greater"]},null,8,["modelValue","rules"])]),_:1})],64)):ge("",!0)]),_:1}),l(F),l(w,{"no-gutters":""},{default:u(()=>[l(p,{cols:"2"}),l(p,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(g,{variant:"outlined",onClick:d,disabled:!i.value},{default:u(()=>[...m[10]||(m[10]=[M("Update",-1)])]),_:1},8,["disabled"])]),_:1}),l(p,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},xT={__name:"create-medicine",props:{mode:{type:String,default:"consultation",validator:e=>["consultation","pharmacy"].includes(e)}},emits:["close","update:medicinelist","medicine-created"],setup(e,{emit:t}){const n=e,a=t,r=V(gT),s=V({productName:"",marketer:"",saltComposition:"",productForm:"",group:"",hsnCode:"",alertUnits:0}),o=ae(()=>n.mode==="pharmacy"),i=V(!1),c=()=>{a("close")},A=async d=>{const f={productName:d.productName,marketer:d.marketer||"",saltComposition:d.saltComposition||"",productForm:d.productForm,group:d.group||""};o.value&&(f.hsnCode=d.hsnCode||"",f.alertUnits=d.alertUnits||0,f.isPharmacy=!0);const m=await kH(f);m.error?console.error("Error creating medicine:",m.error):(a("update:medicinelist",m.data),a("medicine-created",m.data),c())};return(d,f)=>{const m=I("v-card-title"),h=I("v-col"),p=I("v-icon"),y=I("v-btn"),g=I("v-row"),w=I("v-card"),b=I("v-text-field"),x=I("v-combobox"),T=I("v-divider"),F=I("v-form");return U(),pe(w,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(g,{"no-gutters":""},{default:u(()=>[l(h,{cols:"12"},{default:u(()=>[l(w,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(g,{"no-gutters":""},{default:u(()=>[l(h,{cols:"11"},{default:u(()=>[l(m,{class:"pa-0 pl-2"},{default:u(()=>[...f[9]||(f[9]=[M("Create New Medicine",-1)])]),_:1})]),_:1}),l(h,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(y,{icon:"",size:"x-small",onClick:c},{default:u(()=>[l(p,null,{default:u(()=>[...f[10]||(f[10]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(g,{"no-gutters":""},{default:u(()=>[l(h,{cols:"12"},{default:u(()=>[l(w,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(F,{modelValue:i.value,"onUpdate:modelValue":f[8]||(f[8]=k=>i.value=k),"validate-on":"blur"},{default:u(()=>[l(g,{"no-gutters":""},{default:u(()=>[l(h,{cols:"12"},{default:u(()=>[l(b,{label:"Trade Name *",density:"compact",modelValue:s.value.productName,"onUpdate:modelValue":f[0]||(f[0]=k=>s.value.productName=k),rules:$e(gr)},null,8,["modelValue","rules"])]),_:1}),l(h,{cols:"12"},{default:u(()=>[l(x,{label:"Product Form *",density:"compact",items:r.value,rules:$e(gr),modelValue:s.value.productForm,"onUpdate:modelValue":f[1]||(f[1]=k=>s.value.productForm=k),clearable:""},null,8,["items","rules","modelValue"])]),_:1}),l(h,{cols:"12"},{default:u(()=>[l(b,{label:"Company Name",density:"compact",modelValue:s.value.marketer,"onUpdate:modelValue":f[2]||(f[2]=k=>s.value.marketer=k)},null,8,["modelValue"])]),_:1}),l(h,{cols:"12"},{default:u(()=>[l(b,{label:"Salt Composition",density:"compact",modelValue:s.value.saltComposition,"onUpdate:modelValue":f[3]||(f[3]=k=>s.value.saltComposition=k)},null,8,["modelValue"])]),_:1}),l(h,{cols:"12"},{default:u(()=>[l(b,{label:"Group",density:"compact",modelValue:s.value.group,"onUpdate:modelValue":f[4]||(f[4]=k=>s.value.group=k)},null,8,["modelValue"])]),_:1}),o.value?(U(),me(We,{key:0},[l(h,{cols:"12"},{default:u(()=>[l(b,{label:"HSN Code",density:"compact",modelValue:s.value.hsnCode,"onUpdate:modelValue":f[5]||(f[5]=k=>s.value.hsnCode=k),hint:"4-8 digits, alphanumeric","persistent-hint":""},null,8,["modelValue"])]),_:1}),l(h,{cols:"12"},{default:u(()=>[l(b,{label:"Alert Units",density:"compact",type:"number",modelValue:s.value.alertUnits,"onUpdate:modelValue":f[6]||(f[6]=k=>s.value.alertUnits=k),modelModifiers:{number:!0},hint:"Low stock alert threshold","persistent-hint":"",rules:[k=>k>=0||"Must be 0 or greater"]},null,8,["modelValue","rules"])]),_:1})],64)):ge("",!0)]),_:1}),l(T),l(g,{"no-gutters":""},{default:u(()=>[l(h,{cols:"2"}),l(h,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(y,{variant:"outlined",onClick:f[7]||(f[7]=k=>A(s.value)),disabled:!i.value},{default:u(()=>[...f[11]||(f[11]=[M("Create",-1)])]),_:1},8,["disabled"])]),_:1}),l(h,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},xEe={class:"transcription-container pa-4"},CEe={key:0,class:"text-center"},SEe={key:1,class:"text-center"},EEe={key:2,class:"text-center"},BEe={key:3,class:"transcription-text"},kEe={class:"text-body-1 mb-0 text-white"},TEe={key:4,class:"text-center text-medium-emphasis"},IEe={key:0,class:"d-flex justify-center mb-4"},FEe={__name:"dictation-modal",props:{modelValue:{type:Boolean,default:!1},currentText:{type:String,default:""},label:{type:String,default:"Dictation"}},emits:["update:modelValue","transcriptionComplete","transcriptionUpdate"],setup(e,{emit:t}){const n=e,a=t,r=V(!1),s=V(!1),o=V(!1),i=V(!1),c=V("");window.dictationModalActive=!1;let A=null,d=null,f=null,m=null;Ke(()=>n.modelValue,k=>{r.value=k,window.dictationModalActive=k,k&&(c.value="",setTimeout(()=>{b()},300))}),Ke(r,k=>{a("update:modelValue",k),window.dictationModalActive=k,k||F()});const h=()=>o.value?"Requesting permission...":i.value?"Connecting...":s.value?"Recording...":"Processing...",p=k=>{if(!r.value)return;const S=k.target;S&&(S.isContentEditable||["INPUT","TEXTAREA","SELECT"].includes(S.tagName))||k.repeat||(window.dictationModalActive=!0,k.key==="Enter"?(k.preventDefault(),k.stopPropagation(),k.stopImmediatePropagation(),s.value?x():T()):k.key==="Escape"&&(k.preventDefault(),k.stopPropagation(),k.stopImmediatePropagation(),s.value&&x()),setTimeout(()=>{window.dictationModalActive=!1},10))};un(()=>{document.addEventListener("keydown",p,{capture:!0})});const y=()=>{if(m&&(clearTimeout(m),m=null),A){if(A.readyState===WebSocket.OPEN)try{A.send(JSON.stringify({action:"close"}))}catch(k){console.warn("Error sending close message to WebSocket:",k)}A.close(),A=null}};Ui(()=>{document.removeEventListener("keydown",p,{capture:!0}),y(),F()});const g=async()=>{try{return"permissions"in navigator?(await navigator.permissions.query({name:"microphone"})).state:"unknown"}catch(k){return console.log("Permissions API not available:",k),"unknown"}},w=async()=>{try{return(await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}})).getTracks().forEach(S=>S.stop()),!0}catch(k){throw console.error("Failed to get microphone access:",k),k}},b=async()=>{if(!(s.value||o.value||i.value))try{if(o.value=!0,await g()==="denied"){alert("Microphone access is blocked. Please enable microphone permissions in your browser settings and refresh the page.");return}await w(),f=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:16e3}}),o.value=!1,i.value=!0,c.value="";const S=Vre();A=new WebSocket(S),m=setTimeout(()=>{A.readyState!==WebSocket.OPEN&&(console.error("WebSocket connection timeout"),alert("Connection timeout. Please check your network connection and try again."),F(),T())},1e4),A.onopen=()=>{m&&(clearTimeout(m),m=null),A.send(JSON.stringify({action:"open"})),d=new MediaRecorder(f),d.ondataavailable=E=>{if(E.data.size>0&&A.readyState===WebSocket.OPEN){const C=new FileReader;C.onload=()=>{const D=C.result.split(",")[1];A.send(JSON.stringify({action:"audio_data",data:D}))},C.readAsDataURL(E.data)}},d.start(1e3),i.value=!1,s.value=!0},A.onmessage=E=>{try{const C=JSON.parse(E.data);if(console.log("WebSocket message received:",C),C.status==="transcription")C.type==="interim"?(c.value=C.fullText+(C.text?" "+C.text:""),a("transcriptionUpdate",c.value),console.log("Interim transcription updated:",c.value)):C.type==="final"&&(c.value=C.fullText,a("transcriptionUpdate",c.value),console.log("Final transcription updated:",c.value));else if(C.status==="completed"){console.log("Received transcription:",C.transcription),console.log("Received summary:",C.summary);const D=(C.summary||C.transcription||"").trim();c.value="Processing complete...",setTimeout(()=>{a("transcriptionComplete",D),T()},1e3),A.close()}else C.status==="error"&&(console.error("WebSocket error:",C.message),A.close())}catch{console.log("Received message:",E.data)}},A.onerror=E=>{console.error("WebSocket error:",E),m&&(clearTimeout(m),m=null),i.value=!1,F()},A.onclose=()=>{m&&(clearTimeout(m),m=null),i.value=!1,s.value=!1}}catch(k){console.error("Error starting recording:",k),o.value=!1,i.value=!1,m&&(clearTimeout(m),m=null);let S="Unable to access microphone. ";k.name==="NotAllowedError"?S+="Please allow microphone access in your browser settings and try again.":k.name==="NotFoundError"?S+="No microphone found on this device.":k.name==="NotSupportedError"?S+="Microphone is not supported in this browser.":k.name==="NotReadableError"?S+="Microphone is already in use by another application.":S+="Please check your permissions and try again.",alert(S),T()}},x=()=>{s.value&&(d&&d.state==="recording"&&d.stop(),A&&A.readyState===WebSocket.OPEN&&A.send(JSON.stringify({action:"close"})),s.value=!1)},T=()=>{F(),r.value=!1},F=()=>{m&&(clearTimeout(m),m=null),d&&d.state==="recording"&&d.stop(),f&&(f.getTracks().forEach(k=>k.stop()),f=null),A&&A.readyState===WebSocket.OPEN&&A.close(),A=null,d=null,s.value=!1,o.value=!1,i.value=!1};return(k,S)=>{const E=I("v-icon"),C=I("v-card-title"),D=I("v-col"),P=I("v-btn"),O=I("v-row"),H=I("v-card"),ie=I("v-progress-circular"),Ae=I("v-sheet"),j=I("v-dialog");return U(),pe(j,{modelValue:r.value,"onUpdate:modelValue":S[0]||(S[0]=J=>r.value=J),persistent:"","max-width":"500px"},{default:u(()=>[l(H,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[l(O,{"no-gutters":""},{default:u(()=>[l(D,{cols:"12"},{default:u(()=>[l(H,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(O,{"no-gutters":""},{default:u(()=>[l(D,{cols:"11"},{default:u(()=>[l(C,{class:"pa-0 pl-2"},{default:u(()=>[l(E,{class:ct([{"recording-pulse":s.value},"mr-2"]),color:s.value?"error":i.value?"warning":"primary"},{default:u(()=>[...S[1]||(S[1]=[M(" mdi-microphone ",-1)])]),_:1},8,["class","color"]),M(" "+K(h()),1)]),_:1})]),_:1}),l(D,{cols:"1"},{default:u(()=>[l(P,{icon:"",size:"x-small",onClick:T},{default:u(()=>[l(E,null,{default:u(()=>[...S[2]||(S[2]=[v("img",{src:ou,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(O,{"no-gutters":""},{default:u(()=>[l(D,{cols:"12"},{default:u(()=>[l(H,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[v("div",xEe,[l(Ae,{class:ct(["transcription-display pa-4",{"transcription-active":s.value}]),rounded:"lg",color:"surface-variant","min-height":"150"},{default:u(()=>[o.value?(U(),me("div",CEe,[l(ie,{indeterminate:"",color:"primary",class:"mb-3"}),S[3]||(S[3]=v("p",{class:"text-body-1 text-medium-emphasis"},"Requesting microphone permission...",-1))])):i.value?(U(),me("div",SEe,[l(ie,{indeterminate:"",color:"primary",class:"mb-3"}),S[4]||(S[4]=v("p",{class:"text-body-1 text-medium-emphasis"},"Connecting to transcription service...",-1))])):s.value&&!c.value?(U(),me("div",EEe,[...S[5]||(S[5]=[v("div",{class:"listening-indicator mb-3"},[v("div",{class:"listening-dots"},[v("span"),v("span"),v("span")])],-1),v("p",{class:"text-body-1 text-white"},"Listening... Start speaking now",-1)])])):c.value?(U(),me("div",BEe,[v("p",kEe,K(c.value),1)])):(U(),me("div",TEe,[...S[6]||(S[6]=[v("p",{class:"text-body-1"},"Preparing to record...",-1)])]))]),_:1},8,["class"])]),s.value?(U(),me("div",IEe,[l(P,{color:"error",variant:"outlined",onClick:x,size:"large",class:"stop-recording-btn"},{default:u(()=>[l(E,null,{default:u(()=>[...S[7]||(S[7]=[M("mdi-stop",-1)])]),_:1}),S[8]||(S[8]=M(" Stop Dictation ",-1))]),_:1})])):ge("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},t0=Xt(FEe,[["__scopeId","data-v-c1bafded"]]),PH=async e=>{try{return{data:(await dt.post("/vitals",e)).data.data.vitals,error:null}}catch(t){return console.error("Error creating vitals:",t),{data:null,error:t}}},PEe=async e=>{try{return{data:(await dt.get(`/vitals/consultation/${e}`)).data.data.vitals,error:null}}catch(t){return console.error("Error fetching vitals:",t),{data:null,error:t}}},DH=async(e,t=10,n=0)=>{try{return{data:(await dt.get(`/vitals/patient/${e}?limit=${t}&offset=${n}`)).data.data.vitals,error:null}}catch(a){return console.error("Error fetching patient vitals history:",a),{data:[],error:a}}},UH=async(e,t)=>{try{return{data:(await dt.put(`/vitals/consultation/${e}`,t)).data.data.vitals,error:null}}catch(n){return console.error("Error updating vitals:",n),{data:null,error:n}}},RH=async(e,t,n)=>{try{const a=await PH({consultationId:e,patientId:t,...n});return a.error&&a.error.response?.status===400?await UH(e,n):a}catch(a){return console.error("Error saving vitals:",a),{data:null,error:a}}},qr=(e,t)=>e==null||e===""?"":`${e} ${t}`,o_=(e,t)=>{if(!t)return{isNormal:null,range:""};const a={pulse:{min:60,max:100,range:"60-100 bpm"},systolicBP:{min:90,max:120,range:"90-120 mmHg"},diastolicBP:{min:60,max:80,range:"60-80 mmHg"},respiratoryRate:{min:12,max:20,range:"12-20 breaths/min"},temperature:{min:36.1,max:37.2,range:"36.1-37.2C"},serumBilirubin:{min:.2,max:1.2,range:"0.2-1.2 mg/dL"},bloodGlucoseFF:{min:70,max:100,range:"70-100 mg/dL"},bloodGlucosePP:{min:0,max:140,range:"<140 mg/dL"},bloodGlucoseRandom:{min:0,max:200,range:"<200 mg/dL"},serumCreatinine:{min:.7,max:1.3,range:"0.7-1.3 mg/dL"}}[e];return a?{isNormal:t>=a.min&&t<=a.max,range:a.range}:{isNormal:null,range:""}},DEe=Object.freeze(Object.defineProperty({__proto__:null,createVitals:PH,fetchVitalsByConsultation:PEe,fetchVitalsByPatient:DH,formatVitalWithUnit:qr,isVitalInNormalRange:o_,saveVitals:RH,updateVitals:UH},Symbol.toStringTag,{value:"Module"})),DE="vitalsPreferences",vp={pulse:!0,bloodPressure:!0,temperature:!0,respiratoryRate:!0,height:!1,weight:!0,serumBilirubin:!1,bloodGlucoseFF:!1,bloodGlucosePP:!1,bloodGlucoseRandom:!1,serumCreatinine:!1},CT=e=>{try{if(!e)return console.warn("Doctor ID is required to get vitals preferences"),{...vp};const t=localStorage.getItem(DE);if(!t)return{...vp};const a=JSON.parse(t)[e];return a?{...vp,...a,weight:!0}:{...vp}}catch(t){return console.error("Error getting vitals preferences:",t),{...vp}}},UEe=(e,t)=>{try{if(!e)return console.error("Doctor ID is required to save vitals preferences"),!1;if(!t||typeof t!="object")return console.error("Valid preferences object is required"),!1;let n={};const a=localStorage.getItem(DE);a&&(n=JSON.parse(a));const r={...t,weight:!0};return n[e]=r,localStorage.setItem(DE,JSON.stringify(n)),console.log(`Vitals preferences saved for doctor ${e}:`,r),!0}catch(n){return console.error("Error saving vitals preferences:",n),!1}},REe={__name:"add-edit-vitals",props:{consultation:{type:Object,required:!0},patient:{type:Object,required:!0},existingVitals:{type:Object,default:null}},emits:["close","vitals-saved"],setup(e,{emit:t}){const n=e,a=t,r=Rn(),s=V(!1),o=V(!1),i=ae(()=>r.state.doctorModule.doctorId),c=V({}),A=()=>{const j=i.value;j&&(c.value=CT(j),console.log("Loaded vitals preferences:",c.value))},d=V({pulse:null,systolicBP:null,diastolicBP:null,respiratoryRate:null,weight:null,height:null,temperature:null,serumBilirubin:null,bloodGlucoseFF:null,bloodGlucosePP:null,bloodGlucoseRandom:null,serumCreatinine:null}),f=ae(()=>!!n.existingVitals),m=ae(()=>Object.values(d.value).some(j=>j!=null&&j!=="")),h=ae(()=>c.value.pulse===!0),p=ae(()=>c.value.bloodPressure===!0),y=ae(()=>c.value.temperature===!0),g=ae(()=>c.value.respiratoryRate===!0),w=ae(()=>!0),b=ae(()=>c.value.height===!0),x=ae(()=>c.value.serumBilirubin===!0),T=ae(()=>c.value.bloodGlucoseFF===!0),F=ae(()=>c.value.bloodGlucosePP===!0),k=ae(()=>c.value.bloodGlucoseRandom===!0),S=ae(()=>c.value.serumCreatinine===!0),E=ae(()=>x.value||T.value||F.value||k.value||S.value),C=[j=>!j||!isNaN(j)&&j>0||"Must be a positive number"],D=[j=>!j||!isNaN(j)&&j>0&&j<50||"Must be a valid temperature"],P=[j=>!j||!isNaN(j)&&j>=0&&j<=20||"Must be between 0-20 mg/dL"],O=[j=>!j||!isNaN(j)&&j>=30&&j<=600||"Must be between 30-600 mg/dL"],H=[j=>!j||!isNaN(j)&&j>=.1&&j<=10||"Must be between 0.1-10 mg/dL"],ie=()=>{a("close")},Ae=async()=>{if(m.value){o.value=!0;try{const j={};Object.keys(d.value).forEach(ue=>{const ne=d.value[ue];ne!=null&&ne!==""&&(j[ue]=parseFloat(ne))});const J=await RH(n.consultation.id,n.patient.id,j);J.error?console.error("Error saving vitals:",J.error):(a("vitals-saved",J.data),ie())}catch(j){console.error("Error saving vitals:",j)}finally{o.value=!1}}};return un(()=>{A(),n.existingVitals&&Object.keys(d.value).forEach(j=>{n.existingVitals[j]!==null&&n.existingVitals[j]!==void 0&&(d.value[j]=n.existingVitals[j])})}),(j,J)=>{const ue=I("v-card-title"),ne=I("v-col"),Y=I("v-icon"),te=I("v-btn"),L=I("v-row"),N=I("v-card"),q=I("v-text-field"),Q=I("v-subheader"),ee=I("v-divider"),z=I("v-form");return U(),pe(N,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(L,{"no-gutters":""},{default:u(()=>[l(ne,{cols:"12"},{default:u(()=>[l(N,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(L,{"no-gutters":""},{default:u(()=>[l(ne,{cols:"11"},{default:u(()=>[l(ue,{class:"pa-0 pl-2"},{default:u(()=>[M(K(f.value?"Edit Vitals":"Add Vitals"),1)]),_:1})]),_:1}),l(ne,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(te,{icon:"",size:"x-small",onClick:ie},{default:u(()=>[l(Y,null,{default:u(()=>[...J[13]||(J[13]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(L,{"no-gutters":""},{default:u(()=>[l(ne,{cols:"12"},{default:u(()=>[l(N,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(z,{modelValue:s.value,"onUpdate:modelValue":J[12]||(J[12]=X=>s.value=X),"validate-on":"blur"},{default:u(()=>[l(L,{"no-gutters":""},{default:u(()=>[h.value?(U(),pe(ne,{key:0,cols:"6",class:"pr-1"},{default:u(()=>[l(q,{label:"Pulse (bpm)",density:"compact",type:"number",modelValue:d.value.pulse,"onUpdate:modelValue":J[0]||(J[0]=X=>d.value.pulse=X),rules:C,suffix:"bpm",hint:"Normal range: 60-100 bpm","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1})):ge("",!0),g.value?(U(),pe(ne,{key:1,cols:h.value?6:12,class:ct(h.value?"pl-1":"")},{default:u(()=>[l(q,{label:"Respiratory Rate",density:"compact",type:"number",modelValue:d.value.respiratoryRate,"onUpdate:modelValue":J[1]||(J[1]=X=>d.value.respiratoryRate=X),rules:C,suffix:"breaths/min",hint:"Normal range: 12-20 breaths/min","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1},8,["cols","class"])):ge("",!0)]),_:1}),p.value?(U(),pe(L,{key:0,"no-gutters":""},{default:u(()=>[l(ne,{cols:"6",class:"pr-1"},{default:u(()=>[l(q,{label:"Systolic BP",density:"compact",type:"number",modelValue:d.value.systolicBP,"onUpdate:modelValue":J[2]||(J[2]=X=>d.value.systolicBP=X),rules:C,suffix:"mmHg",hint:"Normal: 90-120","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1}),l(ne,{cols:"6",class:"pl-1"},{default:u(()=>[l(q,{label:"Diastolic BP",density:"compact",type:"number",modelValue:d.value.diastolicBP,"onUpdate:modelValue":J[3]||(J[3]=X=>d.value.diastolicBP=X),rules:C,suffix:"mmHg",hint:"Normal: 60-80","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})):ge("",!0),l(L,{"no-gutters":""},{default:u(()=>[w.value?(U(),pe(ne,{key:0,cols:"6",class:"pr-1"},{default:u(()=>[l(q,{label:"Weight",density:"compact",type:"number",modelValue:d.value.weight,"onUpdate:modelValue":J[4]||(J[4]=X=>d.value.weight=X),rules:C,suffix:"kg",clearable:""},null,8,["modelValue"])]),_:1})):ge("",!0),b.value?(U(),pe(ne,{key:1,cols:w.value?6:12,class:ct(w.value?"pl-1":"")},{default:u(()=>[l(q,{label:"Height",density:"compact",type:"number",modelValue:d.value.height,"onUpdate:modelValue":J[5]||(J[5]=X=>d.value.height=X),rules:C,suffix:"cm",clearable:""},null,8,["modelValue"])]),_:1},8,["cols","class"])):ge("",!0)]),_:1}),y.value?(U(),pe(L,{key:1,"no-gutters":""},{default:u(()=>[l(ne,{cols:"6",class:"pr-1"},{default:u(()=>[l(q,{label:"Temperature",density:"compact",type:"number",step:"0.1",modelValue:d.value.temperature,"onUpdate:modelValue":J[6]||(J[6]=X=>d.value.temperature=X),rules:D,suffix:"C",hint:"Normal range: 36.1-37.2C","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})):ge("",!0),E.value?(U(),pe(L,{key:2,"no-gutters":"",class:"mt-4"},{default:u(()=>[l(ne,{cols:"12"},{default:u(()=>[l(Q,{class:"text-subtitle-2 font-weight-medium pa-0 mb-2"},{default:u(()=>[...J[14]||(J[14]=[M("Blood Chemistry",-1)])]),_:1})]),_:1})]),_:1})):ge("",!0),x.value||S.value?(U(),pe(L,{key:3,"no-gutters":""},{default:u(()=>[x.value?(U(),pe(ne,{key:0,cols:S.value?6:12,class:ct(S.value?"pr-1":"")},{default:u(()=>[l(q,{label:"Serum Bilirubin",density:"compact",type:"number",step:"0.1",modelValue:d.value.serumBilirubin,"onUpdate:modelValue":J[7]||(J[7]=X=>d.value.serumBilirubin=X),rules:P,suffix:"mg/dL",hint:"Normal range: 0.2-1.2 mg/dL","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1},8,["cols","class"])):ge("",!0),S.value?(U(),pe(ne,{key:1,cols:x.value?6:12,class:ct(x.value?"pl-1":"")},{default:u(()=>[l(q,{label:"Serum Creatinine",density:"compact",type:"number",step:"0.1",modelValue:d.value.serumCreatinine,"onUpdate:modelValue":J[8]||(J[8]=X=>d.value.serumCreatinine=X),rules:H,suffix:"mg/dL",hint:"Normal range: 0.7-1.3 mg/dL","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1},8,["cols","class"])):ge("",!0)]),_:1})):ge("",!0),T.value||F.value||k.value?(U(),pe(L,{key:4,"no-gutters":"",class:"mt-2"},{default:u(()=>[T.value?(U(),pe(ne,{key:0,cols:"4",class:"pr-1"},{default:u(()=>[l(q,{label:"Blood Glucose (FF)",density:"compact",type:"number",modelValue:d.value.bloodGlucoseFF,"onUpdate:modelValue":J[9]||(J[9]=X=>d.value.bloodGlucoseFF=X),rules:O,suffix:"mg/dL",hint:"Normal: 70-100 mg/dL","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1})):ge("",!0),F.value?(U(),pe(ne,{key:1,cols:"4",class:ct([T.value?"px-1":"pr-1",k.value?"":"pl-0"])},{default:u(()=>[l(q,{label:"Blood Glucose (PP)",density:"compact",type:"number",modelValue:d.value.bloodGlucosePP,"onUpdate:modelValue":J[10]||(J[10]=X=>d.value.bloodGlucosePP=X),rules:O,suffix:"mg/dL",hint:"Normal: <140 mg/dL","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1},8,["class"])):ge("",!0),k.value?(U(),pe(ne,{key:2,cols:"4",class:"pl-1"},{default:u(()=>[l(q,{label:"Blood Glucose (Random)",density:"compact",type:"number",modelValue:d.value.bloodGlucoseRandom,"onUpdate:modelValue":J[11]||(J[11]=X=>d.value.bloodGlucoseRandom=X),rules:O,suffix:"mg/dL",hint:"Normal: <200 mg/dL","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1})):ge("",!0)]),_:1})):ge("",!0),l(ee,{class:"mt-3"}),l(L,{"no-gutters":""},{default:u(()=>[l(ne,{cols:"2"}),l(ne,{cols:"8",class:"mt-3 d-flex justify-center gap-2"},{default:u(()=>[l(te,{variant:"outlined",onClick:ie},{default:u(()=>[...J[15]||(J[15]=[M("Cancel",-1)])]),_:1}),l(te,{variant:"elevated",color:"primary",onClick:Ae,disabled:!m.value,loading:o.value},{default:u(()=>[M(K(f.value?"Update":"Save"),1)]),_:1},8,["disabled","loading"])]),_:1}),l(ne,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},NEe=Xt(REe,[["__scopeId","data-v-7bcda799"]]),VEe={key:0,class:"d-flex justify-center align-center",style:{height:"200px"}},LEe={key:1,class:"text-center pa-4"},MEe={class:"text-error"},OEe={key:2,class:"text-center pa-4"},HEe={key:3},$Ee={class:"font-weight-medium"},QEe={key:1,class:"text-grey"},GEe={key:1,class:"text-grey"},zEe={key:1,class:"text-grey"},KEe={key:1,class:"text-grey"},WEe={key:0,class:"font-weight-medium"},jEe={key:1,class:"text-grey"},qEe={key:0,class:"font-weight-medium"},YEe={key:1,class:"text-grey"},XEe={key:1,class:"text-grey"},JEe={key:1,class:"text-grey"},ZEe={key:1,class:"text-grey"},eBe={key:1,class:"text-grey"},tBe={key:1,class:"text-grey"},nBe={__name:"vitals-trends",props:{patientId:{type:[String,Number],required:!0},patientName:{type:String,default:"Patient"}},emits:["close"],setup(e){const t=e,n=Rn(),a=V([]),r=V(!1),s=V(null),o=ae(()=>n.state.doctorModule.doctorId),i=V({}),c=()=>{const g=o.value;g&&(i.value=CT(g),console.log("Loaded vitals preferences for trends:",i.value))},A=[{title:"Date",key:"date",width:"120px",alwaysShow:!0},{title:"Pulse",key:"pulse",width:"100px",vitalKey:"pulse"},{title:"Blood Pressure",key:"bloodPressure",width:"140px",vitalKey:"bloodPressure"},{title:"Temperature",key:"temperature",width:"120px",vitalKey:"temperature"},{title:"Respiratory Rate",key:"respiratoryRate",width:"140px",vitalKey:"respiratoryRate"},{title:"Weight",key:"weight",width:"100px",alwaysShow:!0},{title:"Height",key:"height",width:"100px",vitalKey:"height"},{title:"Serum Bilirubin",key:"serumBilirubin",width:"140px",vitalKey:"serumBilirubin"},{title:"Blood Glucose FF",key:"bloodGlucoseFF",width:"140px",vitalKey:"bloodGlucoseFF"},{title:"Blood Glucose PP",key:"bloodGlucosePP",width:"140px",vitalKey:"bloodGlucosePP"},{title:"Blood Glucose Random",key:"bloodGlucoseRandom",width:"160px",vitalKey:"bloodGlucoseRandom"},{title:"Serum Creatinine",key:"serumCreatinine",width:"140px",vitalKey:"serumCreatinine"}],d=ae(()=>A.filter(g=>{if(g.alwaysShow)return!0;const w=g.vitalKey;return i.value[w]===!0})),f=ae(()=>a.value.map(g=>({date:g.createdAt,pulse:g.pulse,systolicBP:g.systolicBP,diastolicBP:g.diastolicBP,temperature:g.temperature,respiratoryRate:g.respiratoryRate,weight:g.weight,height:g.height,bloodPressure:g.systolicBP&&g.diastolicBP?`${g.systolicBP}/${g.diastolicBP}`:null,serumBilirubin:g.serumBilirubin,bloodGlucoseFF:g.bloodGlucoseFF,bloodGlucosePP:g.bloodGlucosePP,bloodGlucoseRandom:g.bloodGlucoseRandom,serumCreatinine:g.serumCreatinine}))),m=async()=>{if(!t.patientId){s.value="Patient ID is required";return}r.value=!0,s.value=null;try{const g=await DH(t.patientId,50,0);if(g.error)throw new Error(g.error.message||"Failed to fetch vitals history");a.value=g.data||[]}catch(g){console.error("Error fetching vitals history:",g),s.value=g.message||"Failed to fetch vitals history"}finally{r.value=!1}},h=g=>{if(!g)return"";try{return ar(g)}catch(w){return console.error("Error formatting date:",g,w),g||""}},p=(g,w)=>{const b=o_(g,w);return b.isNormal===null?"grey":b.isNormal?"success":"warning"},y=(g,w)=>{const b=o_("systolicBP",g),x=o_("diastolicBP",w);return b.isNormal===null||x.isNormal===null?"grey":b.isNormal&&x.isNormal?"success":"warning"};return un(()=>{c(),m()}),(g,w)=>{const b=I("v-card-title"),x=I("v-col"),T=I("v-icon"),F=I("v-btn"),k=I("v-row"),S=I("v-card"),E=I("v-progress-circular"),C=I("v-chip"),D=I("v-data-table");return U(),pe(S,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[l(k,{"no-gutters":""},{default:u(()=>[l(x,{cols:"12"},{default:u(()=>[l(S,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(k,{"no-gutters":""},{default:u(()=>[l(x,{cols:"11"},{default:u(()=>[l(b,{class:"pa-0 pl-2"},{default:u(()=>[M("Vitals Trends - "+K(e.patientName),1)]),_:1})]),_:1}),l(x,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(F,{icon:"",size:"x-small",onClick:w[0]||(w[0]=P=>g.$emit("close"))},{default:u(()=>[l(T,null,{default:u(()=>[...w[1]||(w[1]=[v("img",{src:ou,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(k,{"no-gutters":""},{default:u(()=>[l(x,{cols:"12"},{default:u(()=>[l(S,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[r.value?(U(),me("div",VEe,[l(E,{indeterminate:"",color:"primary"})])):s.value?(U(),me("div",LEe,[l(T,{color:"error",size:"48",class:"mb-2"},{default:u(()=>[...w[2]||(w[2]=[M("mdi-alert-circle",-1)])]),_:1}),v("p",MEe,K(s.value),1),l(F,{onClick:m,color:"primary",variant:"outlined"},{default:u(()=>[...w[3]||(w[3]=[M(" Try Again ",-1)])]),_:1})])):!a.value||a.value.length===0?(U(),me("div",OEe,[l(T,{color:"grey",size:"48",class:"mb-2"},{default:u(()=>[...w[4]||(w[4]=[M("mdi-chart-line-variant",-1)])]),_:1}),w[5]||(w[5]=v("p",{class:"text-grey"},"No vitals history found for this patient",-1))])):(U(),me("div",HEe,[l(D,{headers:d.value,items:f.value,"items-per-page":10,class:"elevation-1",density:"compact"},kv({"item.date":u(({item:P})=>[v("span",$Ee,K(h(P.date)),1)]),"item.weight":u(({item:P})=>[P.weight?(U(),me("span",WEe,K($e(qr)(P.weight,"kg")),1)):(U(),me("span",jEe,"-"))]),_:2},[i.value.pulse?{name:"item.pulse",fn:u(({item:P})=>[P.pulse?(U(),pe(C,{key:0,color:p("pulse",P.pulse),size:"small",variant:"tonal"},{default:u(()=>[M(K($e(qr)(P.pulse,"bpm")),1)]),_:2},1032,["color"])):(U(),me("span",QEe,"-"))]),key:"0"}:void 0,i.value.bloodPressure?{name:"item.bloodPressure",fn:u(({item:P})=>[P.systolicBP&&P.diastolicBP?(U(),pe(C,{key:0,color:y(P.systolicBP,P.diastolicBP),size:"small",variant:"tonal"},{default:u(()=>[M(K(P.systolicBP)+"/"+K(P.diastolicBP)+" mmHg ",1)]),_:2},1032,["color"])):(U(),me("span",GEe,"-"))]),key:"1"}:void 0,i.value.temperature?{name:"item.temperature",fn:u(({item:P})=>[P.temperature?(U(),pe(C,{key:0,color:p("temperature",P.temperature),size:"small",variant:"tonal"},{default:u(()=>[M(K($e(qr)(P.temperature,"C")),1)]),_:2},1032,["color"])):(U(),me("span",zEe,"-"))]),key:"2"}:void 0,i.value.respiratoryRate?{name:"item.respiratoryRate",fn:u(({item:P})=>[P.respiratoryRate?(U(),pe(C,{key:0,color:p("respiratoryRate",P.respiratoryRate),size:"small",variant:"tonal"},{default:u(()=>[M(K($e(qr)(P.respiratoryRate,"breaths/min")),1)]),_:2},1032,["color"])):(U(),me("span",KEe,"-"))]),key:"3"}:void 0,i.value.height?{name:"item.height",fn:u(({item:P})=>[P.height?(U(),me("span",qEe,K($e(qr)(P.height,"cm")),1)):(U(),me("span",YEe,"-"))]),key:"4"}:void 0,i.value.serumBilirubin?{name:"item.serumBilirubin",fn:u(({item:P})=>[P.serumBilirubin?(U(),pe(C,{key:0,color:p("serumBilirubin",P.serumBilirubin),size:"small",variant:"tonal"},{default:u(()=>[M(K($e(qr)(P.serumBilirubin,"mg/dL")),1)]),_:2},1032,["color"])):(U(),me("span",XEe,"-"))]),key:"5"}:void 0,i.value.bloodGlucoseFF?{name:"item.bloodGlucoseFF",fn:u(({item:P})=>[P.bloodGlucoseFF?(U(),pe(C,{key:0,color:p("bloodGlucoseFF",P.bloodGlucoseFF),size:"small",variant:"tonal"},{default:u(()=>[M(K($e(qr)(P.bloodGlucoseFF,"mg/dL")),1)]),_:2},1032,["color"])):(U(),me("span",JEe,"-"))]),key:"6"}:void 0,i.value.bloodGlucosePP?{name:"item.bloodGlucosePP",fn:u(({item:P})=>[P.bloodGlucosePP?(U(),pe(C,{key:0,color:p("bloodGlucosePP",P.bloodGlucosePP),size:"small",variant:"tonal"},{default:u(()=>[M(K($e(qr)(P.bloodGlucosePP,"mg/dL")),1)]),_:2},1032,["color"])):(U(),me("span",ZEe,"-"))]),key:"7"}:void 0,i.value.bloodGlucoseRandom?{name:"item.bloodGlucoseRandom",fn:u(({item:P})=>[P.bloodGlucoseRandom?(U(),pe(C,{key:0,color:p("bloodGlucoseRandom",P.bloodGlucoseRandom),size:"small",variant:"tonal"},{default:u(()=>[M(K($e(qr)(P.bloodGlucoseRandom,"mg/dL")),1)]),_:2},1032,["color"])):(U(),me("span",eBe,"-"))]),key:"8"}:void 0,i.value.serumCreatinine?{name:"item.serumCreatinine",fn:u(({item:P})=>[P.serumCreatinine?(U(),pe(C,{key:0,color:p("serumCreatinine",P.serumCreatinine),size:"small",variant:"tonal"},{default:u(()=>[M(K($e(qr)(P.serumCreatinine,"mg/dL")),1)]),_:2},1032,["color"])):(U(),me("span",tBe,"-"))]),key:"9"}:void 0]),1032,["headers","items"])]))]),_:1})]),_:1})]),_:1})]),_:1})}}},aBe=Xt(nBe,[["__scopeId","data-v-145a88d7"]]),rBe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M21,17H7V3H21M21,1H7A2,2%200%200,0%205,3V17A2,2%200%200,0%207,19H21A2,2%200%200,0%2023,17V3A2,2%200%200,0%2021,1M3,5H1V21A2,2%200%200,0%203,23H19V21H3M15.96,10.29L13.21,13.83L11.25,11.47L8.5,15H19.5L15.96,10.29Z'%20/%3e%3c/svg%3e",nl={MAX_FILE_SIZE:25*1024*1024,MAX_FILES:15,ACCEPTED_IMAGE_TYPES:["image/jpeg","image/jpg","image/png","image/gif","image/bmp","image/webp"],ACCEPTED_DOCUMENT_TYPES:["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","text/csv"],ACCEPTED_VIDEO_TYPES:["video/mp4","video/avi","video/mov","video/wmv"]},wv=e=>{if(e===0)return"0 B";const t=1024,n=["B","KB","MB","GB"],a=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,a)).toFixed(2))+" "+n[a]},sBe=e=>nl.ACCEPTED_IMAGE_TYPES.includes(e)?"image":nl.ACCEPTED_DOCUMENT_TYPES.includes(e)?"document":nl.ACCEPTED_VIDEO_TYPES.includes(e)?"video":"other",oBe=e=>{if(e.size>nl.MAX_FILE_SIZE)return{success:!1,error:`File "${e.name}" is too large. Maximum size is ${wv(nl.MAX_FILE_SIZE)}. Current size: ${wv(e.size)}`,type:"file_size"};const t=sBe(e.type);return t==="other"?{success:!1,error:`File "${e.name}" has unsupported file type: ${e.type}. Please use medical image formats (JPEG, PNG, etc.) or documents (PDF, Word, etc.)`,type:"file_type"}:{success:!0,file:e,category:t,size:e.size,formattedSize:wv(e.size)}},iBe=e=>{const t=Array.from(e||[]);if(t.length>nl.MAX_FILES)return{success:!1,error:`Too many files selected. Maximum allowed: ${nl.MAX_FILES}. Selected: ${t.length}`,type:"file_count",validFiles:[],errors:[]};const n=[],a=[];let r=0;t.forEach((o,i)=>{const c=oBe(o);c.success?(n.push({file:o,index:i,category:c.category,size:c.size,formattedSize:c.formattedSize}),r+=o.size):a.push({index:i,fileName:o.name,error:c.error,type:c.type})});const s={totalFiles:t.length,validFiles:n.length,invalidFiles:a.length,totalSize:r,formattedTotalSize:wv(r),categories:{}};return n.forEach(o=>{s.categories[o.category]=(s.categories[o.category]||0)+1}),{success:a.length===0,validFiles:n,errors:a,summary:s,hasWarnings:n.length>0&&a.length>0}},lBe=e=>{const t=[];if(e.success){const{summary:n}=e;t.push({type:"success",title:"Files Ready for Upload",message:`${n.validFiles} file(s) selected (${n.formattedTotalSize})`});const a=Object.keys(n.categories);if(a.length>1){const r=a.map(s=>`${n.categories[s]} ${s}${n.categories[s]>1?"s":""}`).join(", ");t.push({type:"info",title:"File Types",message:r})}}else e.hasWarnings?t.push({type:"warning",title:"Some Files Cannot Be Uploaded",message:`${e.validFiles.length} valid, ${e.errors.length} invalid`}):t.push({type:"error",title:"Upload Not Possible",message:"All selected files have validation errors"});return e.errors.forEach(n=>{t.push({type:"error",title:n.fileName,message:n.error})}),t},uBe=()=>({limits:{maxFiles:nl.MAX_FILES,maxFileSize:wv(nl.MAX_FILE_SIZE),maxFileSizeBytes:nl.MAX_FILE_SIZE},acceptedTypes:{images:"JPEG, PNG, GIF, BMP, WebP",documents:"PDF, Word documents, Text files",videos:"MP4, AVI, MOV, WMV"},recommendations:["For medical images: Use high-quality JPEG or PNG format","For X-rays and scans: Ensure images are clear and properly oriented","For documents: PDF format is preferred for reports and forms","Compress large files if possible while maintaining medical image quality"],warnings:[`Files larger than ${wv(nl.MAX_FILE_SIZE)} will be rejected`,`Maximum ${nl.MAX_FILES} files can be uploaded at once`,"Unsupported file types will be automatically filtered out"]});function cBe(e,t){return t.forEach((function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach((function(a){if(a!=="default"&&!(a in e)){var r=Object.getOwnPropertyDescriptor(n,a);Object.defineProperty(e,a,r.get?r:{enumerable:!0,get:function(){return n[a]}})}}))})),Object.freeze(e)}function NH(e,t){return new Promise((function(n,a){let r;return dBe(e).then((function(s){try{return r=s,n(new Blob([t.slice(0,2),r,t.slice(2)],{type:"image/jpeg"}))}catch(o){return a(o)}}),a)}))}const dBe=e=>new Promise(((t,n)=>{const a=new FileReader;a.addEventListener("load",(({target:{result:r}})=>{const s=new DataView(r);let o=0;if(s.getUint16(o)!==65496)return n("not a valid JPEG");for(o+=2;;){const i=s.getUint16(o);if(i===65498)break;const c=s.getUint16(o+2);if(i===65505&&s.getUint32(o+4)===1165519206){const A=o+10;let d;switch(s.getUint16(A)){case 18761:d=!0;break;case 19789:d=!1;break;default:return n("TIFF header contains invalid endian")}if(s.getUint16(A+2,d)!==42)return n("TIFF header contains invalid version");const f=s.getUint32(A+4,d),m=A+f+2+12*s.getUint16(A+f,d);for(let h=A+f+2;h<m;h+=12)if(s.getUint16(h,d)==274){if(s.getUint16(h+2,d)!==3)return n("Orientation data type is invalid");if(s.getUint32(h+4,d)!==1)return n("Orientation data count is invalid");s.setUint16(h+8,1,d);break}return t(r.slice(o,o+2+c))}o+=2+c}return t(new Blob)})),a.readAsArrayBuffer(e)}));var i2={},ABe={get exports(){return i2},set exports(e){i2=e}};(function(e){var t,n,a={};ABe.exports=a,a.parse=function(r,s){for(var o=a.bin.readUshort,i=a.bin.readUint,c=0,A={},d=new Uint8Array(r),f=d.length-4;i(d,f)!=101010256;)f--;c=f,c+=4;var m=o(d,c+=4);o(d,c+=2);var h=i(d,c+=2),p=i(d,c+=4);c+=4,c=p;for(var y=0;y<m;y++){i(d,c),c+=4,c+=4,c+=4,i(d,c+=4),h=i(d,c+=4);var g=i(d,c+=4),w=o(d,c+=4),b=o(d,c+2),x=o(d,c+4);c+=6;var T=i(d,c+=8);c+=4,c+=w+b+x,a._readLocal(d,T,A,h,g,s)}return A},a._readLocal=function(r,s,o,i,c,A){var d=a.bin.readUshort,f=a.bin.readUint;f(r,s),d(r,s+=4),d(r,s+=2);var m=d(r,s+=2);f(r,s+=2),f(r,s+=4),s+=4;var h=d(r,s+=8),p=d(r,s+=2);s+=2;var y=a.bin.readUTF8(r,s,h);if(s+=h,s+=p,A)o[y]={size:c,csize:i};else{var g=new Uint8Array(r.buffer,s);if(m==0)o[y]=new Uint8Array(g.buffer.slice(s,s+i));else{if(m!=8)throw"unknown compression method: "+m;var w=new Uint8Array(c);a.inflateRaw(g,w),o[y]=w}}},a.inflateRaw=function(r,s){return a.F.inflate(r,s)},a.inflate=function(r,s){return r[0],r[1],a.inflateRaw(new Uint8Array(r.buffer,r.byteOffset+2,r.length-6),s)},a.deflate=function(r,s){s==null&&(s={level:6});var o=0,i=new Uint8Array(50+Math.floor(1.1*r.length));i[o]=120,i[o+1]=156,o+=2,o=a.F.deflateRaw(r,i,o,s.level);var c=a.adler(r,0,r.length);return i[o+0]=c>>>24&255,i[o+1]=c>>>16&255,i[o+2]=c>>>8&255,i[o+3]=c>>>0&255,new Uint8Array(i.buffer,0,o+4)},a.deflateRaw=function(r,s){s==null&&(s={level:6});var o=new Uint8Array(50+Math.floor(1.1*r.length)),i=a.F.deflateRaw(r,o,i,s.level);return new Uint8Array(o.buffer,0,i)},a.encode=function(r,s){s==null&&(s=!1);var o=0,i=a.bin.writeUint,c=a.bin.writeUshort,A={};for(var d in r){var f=!a._noNeed(d)&&!s,m=r[d],h=a.crc.crc(m,0,m.length);A[d]={cpr:f,usize:m.length,crc:h,file:f?a.deflateRaw(m):m}}for(var d in A)o+=A[d].file.length+30+46+2*a.bin.sizeUTF8(d);o+=22;var p=new Uint8Array(o),y=0,g=[];for(var d in A){var w=A[d];g.push(y),y=a._writeHeader(p,y,d,w,0)}var b=0,x=y;for(var d in A)w=A[d],g.push(y),y=a._writeHeader(p,y,d,w,1,g[b++]);var T=y-x;return i(p,y,101010256),y+=4,c(p,y+=4,b),c(p,y+=2,b),i(p,y+=2,T),i(p,y+=4,x),y+=4,y+=2,p.buffer},a._noNeed=function(r){var s=r.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(s)!=-1},a._writeHeader=function(r,s,o,i,c,A){var d=a.bin.writeUint,f=a.bin.writeUshort,m=i.file;return d(r,s,c==0?67324752:33639248),s+=4,c==1&&(s+=2),f(r,s,20),f(r,s+=2,0),f(r,s+=2,i.cpr?8:0),d(r,s+=2,0),d(r,s+=4,i.crc),d(r,s+=4,m.length),d(r,s+=4,i.usize),f(r,s+=4,a.bin.sizeUTF8(o)),f(r,s+=2,0),s+=2,c==1&&(s+=2,s+=2,d(r,s+=6,A),s+=4),s+=a.bin.writeUTF8(r,s,o),c==0&&(r.set(m,s),s+=m.length),s},a.crc={table:(function(){for(var r=new Uint32Array(256),s=0;s<256;s++){for(var o=s,i=0;i<8;i++)1&o?o=3988292384^o>>>1:o>>>=1;r[s]=o}return r})(),update:function(r,s,o,i){for(var c=0;c<i;c++)r=a.crc.table[255&(r^s[o+c])]^r>>>8;return r},crc:function(r,s,o){return 4294967295^a.crc.update(4294967295,r,s,o)}},a.adler=function(r,s,o){for(var i=1,c=0,A=s,d=s+o;A<d;){for(var f=Math.min(A+5552,d);A<f;)c+=i+=r[A++];i%=65521,c%=65521}return c<<16|i},a.bin={readUshort:function(r,s){return r[s]|r[s+1]<<8},writeUshort:function(r,s,o){r[s]=255&o,r[s+1]=o>>8&255},readUint:function(r,s){return 16777216*r[s+3]+(r[s+2]<<16|r[s+1]<<8|r[s])},writeUint:function(r,s,o){r[s]=255&o,r[s+1]=o>>8&255,r[s+2]=o>>16&255,r[s+3]=o>>24&255},readASCII:function(r,s,o){for(var i="",c=0;c<o;c++)i+=String.fromCharCode(r[s+c]);return i},writeASCII:function(r,s,o){for(var i=0;i<o.length;i++)r[s+i]=o.charCodeAt(i)},pad:function(r){return r.length<2?"0"+r:r},readUTF8:function(r,s,o){for(var i,c="",A=0;A<o;A++)c+="%"+a.bin.pad(r[s+A].toString(16));try{i=decodeURIComponent(c)}catch{return a.bin.readASCII(r,s,o)}return i},writeUTF8:function(r,s,o){for(var i=o.length,c=0,A=0;A<i;A++){var d=o.charCodeAt(A);if((4294967168&d)==0)r[s+c]=d,c++;else if((4294965248&d)==0)r[s+c]=192|d>>6,r[s+c+1]=128|d>>0&63,c+=2;else if((4294901760&d)==0)r[s+c]=224|d>>12,r[s+c+1]=128|d>>6&63,r[s+c+2]=128|d>>0&63,c+=3;else{if((4292870144&d)!=0)throw"e";r[s+c]=240|d>>18,r[s+c+1]=128|d>>12&63,r[s+c+2]=128|d>>6&63,r[s+c+3]=128|d>>0&63,c+=4}}return c},sizeUTF8:function(r){for(var s=r.length,o=0,i=0;i<s;i++){var c=r.charCodeAt(i);if((4294967168&c)==0)o++;else if((4294965248&c)==0)o+=2;else if((4294901760&c)==0)o+=3;else{if((4292870144&c)!=0)throw"e";o+=4}}return o}},a.F={},a.F.deflateRaw=function(r,s,o,i){var c=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][i],A=a.F.U,d=a.F._goodIndex;a.F._hash;var f=a.F._putsE,m=0,h=o<<3,p=0,y=r.length;if(i==0){for(;m<y;)f(s,h,m+(P=Math.min(65535,y-m))==y?1:0),h=a.F._copyExact(r,m,P,s,h+8),m+=P;return h>>>3}var g=A.lits,w=A.strt,b=A.prev,x=0,T=0,F=0,k=0,S=0,E=0;for(y>2&&(w[E=a.F._hash(r,0)]=0),m=0;m<y;m++){if(S=E,m+1<y-2){E=a.F._hash(r,m+1);var C=m+1&32767;b[C]=w[E],w[E]=C}if(p<=m){(x>14e3||T>26697)&&y-m>100&&(p<m&&(g[x]=m-p,x+=2,p=m),h=a.F._writeBlock(m==y-1||p==y?1:0,g,x,k,r,F,m-F,s,h),x=T=k=0,F=m);var D=0;m<y-2&&(D=a.F._bestMatch(r,m,b,S,Math.min(c[2],y-m),c[3]));var P=D>>>16,O=65535&D;if(D!=0){O=65535&D;var H=d(P=D>>>16,A.of0);A.lhst[257+H]++;var ie=d(O,A.df0);A.dhst[ie]++,k+=A.exb[H]+A.dxb[ie],g[x]=P<<23|m-p,g[x+1]=O<<16|H<<8|ie,x+=2,p=m+P}else A.lhst[r[m]]++;T++}}for(F==m&&r.length!=0||(p<m&&(g[x]=m-p,x+=2,p=m),h=a.F._writeBlock(1,g,x,k,r,F,m-F,s,h),x=0,T=0,x=T=k=0,F=m);(7&h)!=0;)h++;return h>>>3},a.F._bestMatch=function(r,s,o,i,c,A){var d=32767&s,f=o[d],m=d-f+32768&32767;if(f==d||i!=a.F._hash(r,s-m))return 0;for(var h=0,p=0,y=Math.min(32767,s);m<=y&&--A!=0&&f!=d;){if(h==0||r[s+h]==r[s+h-m]){var g=a.F._howLong(r,s,m);if(g>h){if(p=m,(h=g)>=c)break;m+2<g&&(g=m+2);for(var w=0,b=0;b<g-2;b++){var x=s-m+b+32768&32767,T=x-o[x]+32768&32767;T>w&&(w=T,f=x)}}}m+=(d=f)-(f=o[d])+32768&32767}return h<<16|p},a.F._howLong=function(r,s,o){if(r[s]!=r[s-o]||r[s+1]!=r[s+1-o]||r[s+2]!=r[s+2-o])return 0;var i=s,c=Math.min(r.length,s+258);for(s+=3;s<c&&r[s]==r[s-o];)s++;return s-i},a.F._hash=function(r,s){return(r[s]<<8|r[s+1])+(r[s+2]<<4)&65535},a.saved=0,a.F._writeBlock=function(r,s,o,i,c,A,d,f,m){var h,p,y,g,w,b,x,T,F,k=a.F.U,S=a.F._putsF,E=a.F._putsE;k.lhst[256]++,p=(h=a.F.getTrees())[0],y=h[1],g=h[2],w=h[3],b=h[4],x=h[5],T=h[6],F=h[7];var C=32+((m+3&7)==0?0:8-(m+3&7))+(d<<3),D=i+a.F.contSize(k.fltree,k.lhst)+a.F.contSize(k.fdtree,k.dhst),P=i+a.F.contSize(k.ltree,k.lhst)+a.F.contSize(k.dtree,k.dhst);P+=14+3*x+a.F.contSize(k.itree,k.ihst)+(2*k.ihst[16]+3*k.ihst[17]+7*k.ihst[18]);for(var O=0;O<286;O++)k.lhst[O]=0;for(O=0;O<30;O++)k.dhst[O]=0;for(O=0;O<19;O++)k.ihst[O]=0;var H=C<D&&C<P?0:D<P?1:2;if(S(f,m,r),S(f,m+1,H),m+=3,H==0){for(;(7&m)!=0;)m++;m=a.F._copyExact(c,A,d,f,m)}else{var ie,Ae;if(H==1&&(ie=k.fltree,Ae=k.fdtree),H==2){a.F.makeCodes(k.ltree,p),a.F.revCodes(k.ltree,p),a.F.makeCodes(k.dtree,y),a.F.revCodes(k.dtree,y),a.F.makeCodes(k.itree,g),a.F.revCodes(k.itree,g),ie=k.ltree,Ae=k.dtree,E(f,m,w-257),E(f,m+=5,b-1),E(f,m+=5,x-4),m+=4;for(var j=0;j<x;j++)E(f,m+3*j,k.itree[1+(k.ordr[j]<<1)]);m+=3*x,m=a.F._codeTiny(T,k.itree,f,m),m=a.F._codeTiny(F,k.itree,f,m)}for(var J=A,ue=0;ue<o;ue+=2){for(var ne=s[ue],Y=ne>>>23,te=J+(8388607&ne);J<te;)m=a.F._writeLit(c[J++],ie,f,m);if(Y!=0){var L=s[ue+1],N=L>>16,q=L>>8&255,Q=255&L;E(f,m=a.F._writeLit(257+q,ie,f,m),Y-k.of0[q]),m+=k.exb[q],S(f,m=a.F._writeLit(Q,Ae,f,m),N-k.df0[Q]),m+=k.dxb[Q],J+=Y}}m=a.F._writeLit(256,ie,f,m)}return m},a.F._copyExact=function(r,s,o,i,c){var A=c>>>3;return i[A]=o,i[A+1]=o>>>8,i[A+2]=255-i[A],i[A+3]=255-i[A+1],A+=4,i.set(new Uint8Array(r.buffer,s,o),A),c+(o+4<<3)},a.F.getTrees=function(){for(var r=a.F.U,s=a.F._hufTree(r.lhst,r.ltree,15),o=a.F._hufTree(r.dhst,r.dtree,15),i=[],c=a.F._lenCodes(r.ltree,i),A=[],d=a.F._lenCodes(r.dtree,A),f=0;f<i.length;f+=2)r.ihst[i[f]]++;for(f=0;f<A.length;f+=2)r.ihst[A[f]]++;for(var m=a.F._hufTree(r.ihst,r.itree,7),h=19;h>4&&r.itree[1+(r.ordr[h-1]<<1)]==0;)h--;return[s,o,m,c,d,h,i,A]},a.F.getSecond=function(r){for(var s=[],o=0;o<r.length;o+=2)s.push(r[o+1]);return s},a.F.nonZero=function(r){for(var s="",o=0;o<r.length;o+=2)r[o+1]!=0&&(s+=(o>>1)+",");return s},a.F.contSize=function(r,s){for(var o=0,i=0;i<s.length;i++)o+=s[i]*r[1+(i<<1)];return o},a.F._codeTiny=function(r,s,o,i){for(var c=0;c<r.length;c+=2){var A=r[c],d=r[c+1];i=a.F._writeLit(A,s,o,i);var f=A==16?2:A==17?3:7;A>15&&(a.F._putsE(o,i,d,f),i+=f)}return i},a.F._lenCodes=function(r,s){for(var o=r.length;o!=2&&r[o-1]==0;)o-=2;for(var i=0;i<o;i+=2){var c=r[i+1],A=i+3<o?r[i+3]:-1,d=i+5<o?r[i+5]:-1,f=i==0?-1:r[i-1];if(c==0&&A==c&&d==c){for(var m=i+5;m+2<o&&r[m+2]==c;)m+=2;(h=Math.min(m+1-i>>>1,138))<11?s.push(17,h-3):s.push(18,h-11),i+=2*h-2}else if(c==f&&A==c&&d==c){for(m=i+5;m+2<o&&r[m+2]==c;)m+=2;var h=Math.min(m+1-i>>>1,6);s.push(16,h-3),i+=2*h-2}else s.push(c,0)}return o>>>1},a.F._hufTree=function(r,s,o){var i=[],c=r.length,A=s.length,d=0;for(d=0;d<A;d+=2)s[d]=0,s[d+1]=0;for(d=0;d<c;d++)r[d]!=0&&i.push({lit:d,f:r[d]});var f=i.length,m=i.slice(0);if(f==0)return 0;if(f==1){var h=i[0].lit;return m=h==0?1:0,s[1+(h<<1)]=1,s[1+(m<<1)]=1,1}i.sort((function(T,F){return T.f-F.f}));var p=i[0],y=i[1],g=0,w=1,b=2;for(i[0]={lit:-1,f:p.f+y.f,l:p,r:y,d:0};w!=f-1;)p=g!=w&&(b==f||i[g].f<i[b].f)?i[g++]:i[b++],y=g!=w&&(b==f||i[g].f<i[b].f)?i[g++]:i[b++],i[w++]={lit:-1,f:p.f+y.f,l:p,r:y};var x=a.F.setDepth(i[w-1],0);for(x>o&&(a.F.restrictDepth(m,o,x),x=o),d=0;d<f;d++)s[1+(m[d].lit<<1)]=m[d].d;return x},a.F.setDepth=function(r,s){return r.lit!=-1?(r.d=s,s):Math.max(a.F.setDepth(r.l,s+1),a.F.setDepth(r.r,s+1))},a.F.restrictDepth=function(r,s,o){var i=0,c=1<<o-s,A=0;for(r.sort((function(f,m){return m.d==f.d?f.f-m.f:m.d-f.d})),i=0;i<r.length&&r[i].d>s;i++){var d=r[i].d;r[i].d=s,A+=c-(1<<o-d)}for(A>>>=o-s;A>0;)(d=r[i].d)<s?(r[i].d++,A-=1<<s-d-1):i++;for(;i>=0;i--)r[i].d==s&&A<0&&(r[i].d--,A++);A!=0&&console.log("debt left")},a.F._goodIndex=function(r,s){var o=0;return s[16|o]<=r&&(o|=16),s[8|o]<=r&&(o|=8),s[4|o]<=r&&(o|=4),s[2|o]<=r&&(o|=2),s[1|o]<=r&&(o|=1),o},a.F._writeLit=function(r,s,o,i){return a.F._putsF(o,i,s[r<<1]),i+s[1+(r<<1)]},a.F.inflate=function(r,s){var o=Uint8Array;if(r[0]==3&&r[1]==0)return s||new o(0);var i=a.F,c=i._bitsF,A=i._bitsE,d=i._decodeTiny,f=i.makeCodes,m=i.codes2map,h=i._get17,p=i.U,y=s==null;y&&(s=new o(r.length>>>2<<3));for(var g,w,b=0,x=0,T=0,F=0,k=0,S=0,E=0,C=0,D=0;b==0;)if(b=c(r,D,1),x=c(r,D+1,2),D+=3,x!=0){if(y&&(s=a.F._check(s,C+(1<<17))),x==1&&(g=p.flmap,w=p.fdmap,S=511,E=31),x==2){T=A(r,D,5)+257,F=A(r,D+5,5)+1,k=A(r,D+10,4)+4,D+=14;for(var P=0;P<38;P+=2)p.itree[P]=0,p.itree[P+1]=0;var O=1;for(P=0;P<k;P++){var H=A(r,D+3*P,3);p.itree[1+(p.ordr[P]<<1)]=H,H>O&&(O=H)}D+=3*k,f(p.itree,O),m(p.itree,O,p.imap),g=p.lmap,w=p.dmap,D=d(p.imap,(1<<O)-1,T+F,r,D,p.ttree);var ie=i._copyOut(p.ttree,0,T,p.ltree);S=(1<<ie)-1;var Ae=i._copyOut(p.ttree,T,F,p.dtree);E=(1<<Ae)-1,f(p.ltree,ie),m(p.ltree,ie,g),f(p.dtree,Ae),m(p.dtree,Ae,w)}for(;;){var j=g[h(r,D)&S];D+=15&j;var J=j>>>4;if(!(J>>>8))s[C++]=J;else{if(J==256)break;var ue=C+J-254;if(J>264){var ne=p.ldef[J-257];ue=C+(ne>>>3)+A(r,D,7&ne),D+=7&ne}var Y=w[h(r,D)&E];D+=15&Y;var te=Y>>>4,L=p.ddef[te],N=(L>>>4)+c(r,D,15&L);for(D+=15&L,y&&(s=a.F._check(s,C+(1<<17)));C<ue;)s[C]=s[C++-N],s[C]=s[C++-N],s[C]=s[C++-N],s[C]=s[C++-N];C=ue}}}else{(7&D)!=0&&(D+=8-(7&D));var q=4+(D>>>3),Q=r[q-4]|r[q-3]<<8;y&&(s=a.F._check(s,C+Q)),s.set(new o(r.buffer,r.byteOffset+q,Q),C),D=q+Q<<3,C+=Q}return s.length==C?s:s.slice(0,C)},a.F._check=function(r,s){var o=r.length;if(s<=o)return r;var i=new Uint8Array(Math.max(o<<1,s));return i.set(r,0),i},a.F._decodeTiny=function(r,s,o,i,c,A){for(var d=a.F._bitsE,f=a.F._get17,m=0;m<o;){var h=r[f(i,c)&s];c+=15&h;var p=h>>>4;if(p<=15)A[m]=p,m++;else{var y=0,g=0;p==16?(g=3+d(i,c,2),c+=2,y=A[m-1]):p==17?(g=3+d(i,c,3),c+=3):p==18&&(g=11+d(i,c,7),c+=7);for(var w=m+g;m<w;)A[m]=y,m++}}return c},a.F._copyOut=function(r,s,o,i){for(var c=0,A=0,d=i.length>>>1;A<o;){var f=r[A+s];i[A<<1]=0,i[1+(A<<1)]=f,f>c&&(c=f),A++}for(;A<d;)i[A<<1]=0,i[1+(A<<1)]=0,A++;return c},a.F.makeCodes=function(r,s){for(var o,i,c,A,d=a.F.U,f=r.length,m=d.bl_count,h=0;h<=s;h++)m[h]=0;for(h=1;h<f;h+=2)m[r[h]]++;var p=d.next_code;for(o=0,m[0]=0,i=1;i<=s;i++)o=o+m[i-1]<<1,p[i]=o;for(c=0;c<f;c+=2)(A=r[c+1])!=0&&(r[c]=p[A],p[A]++)},a.F.codes2map=function(r,s,o){for(var i=r.length,c=a.F.U.rev15,A=0;A<i;A+=2)if(r[A+1]!=0)for(var d=A>>1,f=r[A+1],m=d<<4|f,h=s-f,p=r[A]<<h,y=p+(1<<h);p!=y;)o[c[p]>>>15-s]=m,p++},a.F.revCodes=function(r,s){for(var o=a.F.U.rev15,i=15-s,c=0;c<r.length;c+=2){var A=r[c]<<s-r[c+1];r[c]=o[A]>>>i}},a.F._putsE=function(r,s,o){o<<=7&s;var i=s>>>3;r[i]|=o,r[i+1]|=o>>>8},a.F._putsF=function(r,s,o){o<<=7&s;var i=s>>>3;r[i]|=o,r[i+1]|=o>>>8,r[i+2]|=o>>>16},a.F._bitsE=function(r,s,o){return(r[s>>>3]|r[1+(s>>>3)]<<8)>>>(7&s)&(1<<o)-1},a.F._bitsF=function(r,s,o){return(r[s>>>3]|r[1+(s>>>3)]<<8|r[2+(s>>>3)]<<16)>>>(7&s)&(1<<o)-1},a.F._get17=function(r,s){return(r[s>>>3]|r[1+(s>>>3)]<<8|r[2+(s>>>3)]<<16)>>>(7&s)},a.F._get25=function(r,s){return(r[s>>>3]|r[1+(s>>>3)]<<8|r[2+(s>>>3)]<<16|r[3+(s>>>3)]<<24)>>>(7&s)},a.F.U=(t=Uint16Array,n=Uint32Array,{next_code:new t(16),bl_count:new t(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new t(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new t(512),fltree:[],fdmap:new t(32),fdtree:[],lmap:new t(32768),ltree:[],ttree:[],dmap:new t(32768),dtree:[],imap:new t(512),itree:[],rev15:new t(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new t(65536),prev:new t(32768)}),(function(){for(var r=a.F.U,s=0;s<32768;s++){var o=s;o=(4278255360&(o=(4042322160&(o=(3435973836&(o=(2863311530&o)>>>1|(1431655765&o)<<1))>>>2|(858993459&o)<<2))>>>4|(252645135&o)<<4))>>>8|(16711935&o)<<8,r.rev15[s]=(o>>>16|o<<16)>>>17}function i(c,A,d){for(;A--!=0;)c.push(0,d)}for(s=0;s<32;s++)r.ldef[s]=r.of0[s]<<3|r.exb[s],r.ddef[s]=r.df0[s]<<4|r.dxb[s];i(r.fltree,144,8),i(r.fltree,112,9),i(r.fltree,24,7),i(r.fltree,8,8),a.F.makeCodes(r.fltree,9),a.F.codes2map(r.fltree,9,r.flmap),a.F.revCodes(r.fltree,9),i(r.fdtree,32,5),a.F.makeCodes(r.fdtree,5),a.F.codes2map(r.fdtree,5,r.fdmap),a.F.revCodes(r.fdtree,5),i(r.itree,19,0),i(r.ltree,286,0),i(r.dtree,30,0),i(r.ttree,320,0)})()})();var fBe=cBe({__proto__:null,default:i2},[i2]);const Sl=(function(){var e={nextZero(d,f){for(;d[f]!=0;)f++;return f},readUshort:(d,f)=>d[f]<<8|d[f+1],writeUshort(d,f,m){d[f]=m>>8&255,d[f+1]=255&m},readUint:(d,f)=>16777216*d[f]+(d[f+1]<<16|d[f+2]<<8|d[f+3]),writeUint(d,f,m){d[f]=m>>24&255,d[f+1]=m>>16&255,d[f+2]=m>>8&255,d[f+3]=255&m},readASCII(d,f,m){let h="";for(let p=0;p<m;p++)h+=String.fromCharCode(d[f+p]);return h},writeASCII(d,f,m){for(let h=0;h<m.length;h++)d[f+h]=m.charCodeAt(h)},readBytes(d,f,m){const h=[];for(let p=0;p<m;p++)h.push(d[f+p]);return h},pad:d=>d.length<2?`0${d}`:d,readUTF8(d,f,m){let h,p="";for(let y=0;y<m;y++)p+=`%${e.pad(d[f+y].toString(16))}`;try{h=decodeURIComponent(p)}catch{return e.readASCII(d,f,m)}return h}};function t(d,f,m,h){const p=f*m,y=s(h),g=Math.ceil(f*y/8),w=new Uint8Array(4*p),b=new Uint32Array(w.buffer),{ctype:x}=h,{depth:T}=h,F=e.readUshort;if(x==6){const ne=p<<2;if(T==8)for(var k=0;k<ne;k+=4)w[k]=d[k],w[k+1]=d[k+1],w[k+2]=d[k+2],w[k+3]=d[k+3];if(T==16)for(k=0;k<ne;k++)w[k]=d[k<<1]}else if(x==2){const ne=h.tabs.tRNS;if(ne==null){if(T==8)for(k=0;k<p;k++){var S=3*k;b[k]=255<<24|d[S+2]<<16|d[S+1]<<8|d[S]}if(T==16)for(k=0;k<p;k++)S=6*k,b[k]=255<<24|d[S+4]<<16|d[S+2]<<8|d[S]}else{var E=ne[0];const Y=ne[1],te=ne[2];if(T==8)for(k=0;k<p;k++){var C=k<<2;S=3*k,b[k]=255<<24|d[S+2]<<16|d[S+1]<<8|d[S],d[S]==E&&d[S+1]==Y&&d[S+2]==te&&(w[C+3]=0)}if(T==16)for(k=0;k<p;k++)C=k<<2,S=6*k,b[k]=255<<24|d[S+4]<<16|d[S+2]<<8|d[S],F(d,S)==E&&F(d,S+2)==Y&&F(d,S+4)==te&&(w[C+3]=0)}}else if(x==3){const ne=h.tabs.PLTE,Y=h.tabs.tRNS,te=Y?Y.length:0;if(T==1)for(var D=0;D<m;D++){var P=D*g,O=D*f;for(k=0;k<f;k++){C=O+k<<2;var H=3*(ie=d[P+(k>>3)]>>7-((7&k)<<0)&1);w[C]=ne[H],w[C+1]=ne[H+1],w[C+2]=ne[H+2],w[C+3]=ie<te?Y[ie]:255}}if(T==2)for(D=0;D<m;D++)for(P=D*g,O=D*f,k=0;k<f;k++)C=O+k<<2,H=3*(ie=d[P+(k>>2)]>>6-((3&k)<<1)&3),w[C]=ne[H],w[C+1]=ne[H+1],w[C+2]=ne[H+2],w[C+3]=ie<te?Y[ie]:255;if(T==4)for(D=0;D<m;D++)for(P=D*g,O=D*f,k=0;k<f;k++)C=O+k<<2,H=3*(ie=d[P+(k>>1)]>>4-((1&k)<<2)&15),w[C]=ne[H],w[C+1]=ne[H+1],w[C+2]=ne[H+2],w[C+3]=ie<te?Y[ie]:255;if(T==8)for(k=0;k<p;k++){var ie;C=k<<2,H=3*(ie=d[k]),w[C]=ne[H],w[C+1]=ne[H+1],w[C+2]=ne[H+2],w[C+3]=ie<te?Y[ie]:255}}else if(x==4){if(T==8)for(k=0;k<p;k++){C=k<<2;var Ae=d[j=k<<1];w[C]=Ae,w[C+1]=Ae,w[C+2]=Ae,w[C+3]=d[j+1]}if(T==16)for(k=0;k<p;k++){var j;C=k<<2,Ae=d[j=k<<2],w[C]=Ae,w[C+1]=Ae,w[C+2]=Ae,w[C+3]=d[j+2]}}else if(x==0)for(E=h.tabs.tRNS?h.tabs.tRNS:-1,D=0;D<m;D++){const ne=D*g,Y=D*f;if(T==1)for(var J=0;J<f;J++){var ue=(Ae=255*(d[ne+(J>>>3)]>>>7-(7&J)&1))==255*E?0:255;b[Y+J]=ue<<24|Ae<<16|Ae<<8|Ae}else if(T==2)for(J=0;J<f;J++)ue=(Ae=85*(d[ne+(J>>>2)]>>>6-((3&J)<<1)&3))==85*E?0:255,b[Y+J]=ue<<24|Ae<<16|Ae<<8|Ae;else if(T==4)for(J=0;J<f;J++)ue=(Ae=17*(d[ne+(J>>>1)]>>>4-((1&J)<<2)&15))==17*E?0:255,b[Y+J]=ue<<24|Ae<<16|Ae<<8|Ae;else if(T==8)for(J=0;J<f;J++)ue=(Ae=d[ne+J])==E?0:255,b[Y+J]=ue<<24|Ae<<16|Ae<<8|Ae;else if(T==16)for(J=0;J<f;J++)Ae=d[ne+(J<<1)],ue=F(d,ne+(J<<1))==E?0:255,b[Y+J]=ue<<24|Ae<<16|Ae<<8|Ae}return w}function n(d,f,m,h){const p=s(d),y=Math.ceil(m*p/8),g=new Uint8Array((y+1+d.interlace)*h);return f=d.tabs.CgBI?r(f,g):a(f,g),d.interlace==0?f=o(f,d,0,m,h):d.interlace==1&&(f=(function(b,x){const T=x.width,F=x.height,k=s(x),S=k>>3,E=Math.ceil(T*k/8),C=new Uint8Array(F*E);let D=0;const P=[0,0,4,0,2,0,1],O=[0,4,0,2,0,1,0],H=[8,8,8,4,4,2,2],ie=[8,8,4,4,2,2,1];let Ae=0;for(;Ae<7;){const J=H[Ae],ue=ie[Ae];let ne=0,Y=0,te=P[Ae];for(;te<F;)te+=J,Y++;let L=O[Ae];for(;L<T;)L+=ue,ne++;const N=Math.ceil(ne*k/8);o(b,x,D,ne,Y);let q=0,Q=P[Ae];for(;Q<F;){let ee=O[Ae],z=D+q*N<<3;for(;ee<T;){var j;if(k==1&&(j=(j=b[z>>3])>>7-(7&z)&1,C[Q*E+(ee>>3)]|=j<<7-((7&ee)<<0)),k==2&&(j=(j=b[z>>3])>>6-(7&z)&3,C[Q*E+(ee>>2)]|=j<<6-((3&ee)<<1)),k==4&&(j=(j=b[z>>3])>>4-(7&z)&15,C[Q*E+(ee>>1)]|=j<<4-((1&ee)<<2)),k>=8){const X=Q*E+ee*S;for(let le=0;le<S;le++)C[X+le]=b[(z>>3)+le]}z+=k,ee+=ue}q++,Q+=J}ne*Y!=0&&(D+=Y*(1+N)),Ae+=1}return C})(f,d)),f}function a(d,f){return r(new Uint8Array(d.buffer,2,d.length-6),f)}var r=(function(){const d={H:{}};return d.H.N=function(f,m){const h=Uint8Array;let p,y,g=0,w=0,b=0,x=0,T=0,F=0,k=0,S=0,E=0;if(f[0]==3&&f[1]==0)return m||new h(0);const C=d.H,D=C.b,P=C.e,O=C.R,H=C.n,ie=C.A,Ae=C.Z,j=C.m,J=m==null;for(J&&(m=new h(f.length>>>2<<5));g==0;)if(g=D(f,E,1),w=D(f,E+1,2),E+=3,w!=0){if(J&&(m=d.H.W(m,S+(1<<17))),w==1&&(p=j.J,y=j.h,F=511,k=31),w==2){b=P(f,E,5)+257,x=P(f,E+5,5)+1,T=P(f,E+10,4)+4,E+=14;let ne=1;for(var ue=0;ue<38;ue+=2)j.Q[ue]=0,j.Q[ue+1]=0;for(ue=0;ue<T;ue++){const L=P(f,E+3*ue,3);j.Q[1+(j.X[ue]<<1)]=L,L>ne&&(ne=L)}E+=3*T,H(j.Q,ne),ie(j.Q,ne,j.u),p=j.w,y=j.d,E=O(j.u,(1<<ne)-1,b+x,f,E,j.v);const Y=C.V(j.v,0,b,j.C);F=(1<<Y)-1;const te=C.V(j.v,b,x,j.D);k=(1<<te)-1,H(j.C,Y),ie(j.C,Y,p),H(j.D,te),ie(j.D,te,y)}for(;;){const ne=p[Ae(f,E)&F];E+=15&ne;const Y=ne>>>4;if(!(Y>>>8))m[S++]=Y;else{if(Y==256)break;{let te=S+Y-254;if(Y>264){const ee=j.q[Y-257];te=S+(ee>>>3)+P(f,E,7&ee),E+=7&ee}const L=y[Ae(f,E)&k];E+=15&L;const N=L>>>4,q=j.c[N],Q=(q>>>4)+D(f,E,15&q);for(E+=15&q;S<te;)m[S]=m[S++-Q],m[S]=m[S++-Q],m[S]=m[S++-Q],m[S]=m[S++-Q];S=te}}}}else{(7&E)!=0&&(E+=8-(7&E));const ne=4+(E>>>3),Y=f[ne-4]|f[ne-3]<<8;J&&(m=d.H.W(m,S+Y)),m.set(new h(f.buffer,f.byteOffset+ne,Y),S),E=ne+Y<<3,S+=Y}return m.length==S?m:m.slice(0,S)},d.H.W=function(f,m){const h=f.length;if(m<=h)return f;const p=new Uint8Array(h<<1);return p.set(f,0),p},d.H.R=function(f,m,h,p,y,g){const w=d.H.e,b=d.H.Z;let x=0;for(;x<h;){const T=f[b(p,y)&m];y+=15&T;const F=T>>>4;if(F<=15)g[x]=F,x++;else{let k=0,S=0;F==16?(S=3+w(p,y,2),y+=2,k=g[x-1]):F==17?(S=3+w(p,y,3),y+=3):F==18&&(S=11+w(p,y,7),y+=7);const E=x+S;for(;x<E;)g[x]=k,x++}}return y},d.H.V=function(f,m,h,p){let y=0,g=0;const w=p.length>>>1;for(;g<h;){const b=f[g+m];p[g<<1]=0,p[1+(g<<1)]=b,b>y&&(y=b),g++}for(;g<w;)p[g<<1]=0,p[1+(g<<1)]=0,g++;return y},d.H.n=function(f,m){const h=d.H.m,p=f.length;let y,g,w,b;const x=h.j;for(var T=0;T<=m;T++)x[T]=0;for(T=1;T<p;T+=2)x[f[T]]++;const F=h.K;for(y=0,x[0]=0,g=1;g<=m;g++)y=y+x[g-1]<<1,F[g]=y;for(w=0;w<p;w+=2)b=f[w+1],b!=0&&(f[w]=F[b],F[b]++)},d.H.A=function(f,m,h){const p=f.length,y=d.H.m.r;for(let g=0;g<p;g+=2)if(f[g+1]!=0){const w=g>>1,b=f[g+1],x=w<<4|b,T=m-b;let F=f[g]<<T;const k=F+(1<<T);for(;F!=k;)h[y[F]>>>15-m]=x,F++}},d.H.l=function(f,m){const h=d.H.m.r,p=15-m;for(let y=0;y<f.length;y+=2){const g=f[y]<<m-f[y+1];f[y]=h[g]>>>p}},d.H.M=function(f,m,h){h<<=7&m;const p=m>>>3;f[p]|=h,f[p+1]|=h>>>8},d.H.I=function(f,m,h){h<<=7&m;const p=m>>>3;f[p]|=h,f[p+1]|=h>>>8,f[p+2]|=h>>>16},d.H.e=function(f,m,h){return(f[m>>>3]|f[1+(m>>>3)]<<8)>>>(7&m)&(1<<h)-1},d.H.b=function(f,m,h){return(f[m>>>3]|f[1+(m>>>3)]<<8|f[2+(m>>>3)]<<16)>>>(7&m)&(1<<h)-1},d.H.Z=function(f,m){return(f[m>>>3]|f[1+(m>>>3)]<<8|f[2+(m>>>3)]<<16)>>>(7&m)},d.H.i=function(f,m){return(f[m>>>3]|f[1+(m>>>3)]<<8|f[2+(m>>>3)]<<16|f[3+(m>>>3)]<<24)>>>(7&m)},d.H.m=(function(){const f=Uint16Array,m=Uint32Array;return{K:new f(16),j:new f(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new f(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new m(32),J:new f(512),_:[],h:new f(32),$:[],w:new f(32768),C:[],v:[],d:new f(32768),D:[],u:new f(512),Q:[],r:new f(32768),s:new m(286),Y:new m(30),a:new m(19),t:new m(15e3),k:new f(65536),g:new f(32768)}})(),(function(){const f=d.H.m;for(var m=0;m<32768;m++){let p=m;p=(2863311530&p)>>>1|(1431655765&p)<<1,p=(3435973836&p)>>>2|(858993459&p)<<2,p=(4042322160&p)>>>4|(252645135&p)<<4,p=(4278255360&p)>>>8|(16711935&p)<<8,f.r[m]=(p>>>16|p<<16)>>>17}function h(p,y,g){for(;y--!=0;)p.push(0,g)}for(m=0;m<32;m++)f.q[m]=f.S[m]<<3|f.T[m],f.c[m]=f.p[m]<<4|f.z[m];h(f._,144,8),h(f._,112,9),h(f._,24,7),h(f._,8,8),d.H.n(f._,9),d.H.A(f._,9,f.J),d.H.l(f._,9),h(f.$,32,5),d.H.n(f.$,5),d.H.A(f.$,5,f.h),d.H.l(f.$,5),h(f.Q,19,0),h(f.C,286,0),h(f.D,30,0),h(f.v,320,0)})(),d.H.N})();function s(d){return[1,null,3,1,2,null,4][d.ctype]*d.depth}function o(d,f,m,h,p){let y=s(f);const g=Math.ceil(h*y/8);let w,b;y=Math.ceil(y/8);let x=d[m],T=0;if(x>1&&(d[m]=[0,0,1][x-2]),x==3)for(T=y;T<g;T++)d[T+1]=d[T+1]+(d[T+1-y]>>>1)&255;for(let F=0;F<p;F++)if(w=m+F*g,b=w+F+1,x=d[b-1],T=0,x==0)for(;T<g;T++)d[w+T]=d[b+T];else if(x==1){for(;T<y;T++)d[w+T]=d[b+T];for(;T<g;T++)d[w+T]=d[b+T]+d[w+T-y]}else if(x==2)for(;T<g;T++)d[w+T]=d[b+T]+d[w+T-g];else if(x==3){for(;T<y;T++)d[w+T]=d[b+T]+(d[w+T-g]>>>1);for(;T<g;T++)d[w+T]=d[b+T]+(d[w+T-g]+d[w+T-y]>>>1)}else{for(;T<y;T++)d[w+T]=d[b+T]+i(0,d[w+T-g],0);for(;T<g;T++)d[w+T]=d[b+T]+i(d[w+T-y],d[w+T-g],d[w+T-y-g])}return d}function i(d,f,m){const h=d+f-m,p=h-d,y=h-f,g=h-m;return p*p<=y*y&&p*p<=g*g?d:y*y<=g*g?f:m}function c(d,f,m){m.width=e.readUint(d,f),f+=4,m.height=e.readUint(d,f),f+=4,m.depth=d[f],f++,m.ctype=d[f],f++,m.compress=d[f],f++,m.filter=d[f],f++,m.interlace=d[f],f++}function A(d,f,m,h,p,y,g,w,b){const x=Math.min(f,p),T=Math.min(m,y);let F=0,k=0;for(let Ae=0;Ae<T;Ae++)for(let j=0;j<x;j++)if(g>=0&&w>=0?(F=Ae*f+j<<2,k=(w+Ae)*p+g+j<<2):(F=(-w+Ae)*f-g+j<<2,k=Ae*p+j<<2),b==0)h[k]=d[F],h[k+1]=d[F+1],h[k+2]=d[F+2],h[k+3]=d[F+3];else if(b==1){var S=d[F+3]*.00392156862745098,E=d[F]*S,C=d[F+1]*S,D=d[F+2]*S,P=h[k+3]*(1/255),O=h[k]*P,H=h[k+1]*P,ie=h[k+2]*P;const J=1-S,ue=S+P*J,ne=ue==0?0:1/ue;h[k+3]=255*ue,h[k+0]=(E+O*J)*ne,h[k+1]=(C+H*J)*ne,h[k+2]=(D+ie*J)*ne}else if(b==2)S=d[F+3],E=d[F],C=d[F+1],D=d[F+2],P=h[k+3],O=h[k],H=h[k+1],ie=h[k+2],S==P&&E==O&&C==H&&D==ie?(h[k]=0,h[k+1]=0,h[k+2]=0,h[k+3]=0):(h[k]=E,h[k+1]=C,h[k+2]=D,h[k+3]=S);else if(b==3){if(S=d[F+3],E=d[F],C=d[F+1],D=d[F+2],P=h[k+3],O=h[k],H=h[k+1],ie=h[k+2],S==P&&E==O&&C==H&&D==ie)continue;if(S<220&&P>20)return!1}return!0}return{decode:function(f){const m=new Uint8Array(f);let h=8;const p=e,y=p.readUshort,g=p.readUint,w={tabs:{},frames:[]},b=new Uint8Array(m.length);let x,T=0,F=0;const k=[137,80,78,71,13,10,26,10];for(var S=0;S<8;S++)if(m[S]!=k[S])throw"The input is not a PNG file!";for(;h<m.length;){const Ae=p.readUint(m,h);h+=4;const j=p.readASCII(m,h,4);if(h+=4,j=="IHDR")c(m,h,w);else if(j=="iCCP"){for(var E=h;m[E]!=0;)E++;p.readASCII(m,h,E-h),m[E+1];const J=m.slice(E+2,h+Ae);let ue=null;try{ue=a(J)}catch{ue=r(J)}w.tabs[j]=ue}else if(j=="CgBI")w.tabs[j]=m.slice(h,h+4);else if(j=="IDAT"){for(S=0;S<Ae;S++)b[T+S]=m[h+S];T+=Ae}else if(j=="acTL")w.tabs[j]={num_frames:g(m,h),num_plays:g(m,h+4)},x=new Uint8Array(m.length);else if(j=="fcTL"){F!=0&&((ie=w.frames[w.frames.length-1]).data=n(w,x.slice(0,F),ie.rect.width,ie.rect.height),F=0);const J={x:g(m,h+12),y:g(m,h+16),width:g(m,h+4),height:g(m,h+8)};let ue=y(m,h+22);ue=y(m,h+20)/(ue==0?100:ue);const ne={rect:J,delay:Math.round(1e3*ue),dispose:m[h+24],blend:m[h+25]};w.frames.push(ne)}else if(j=="fdAT"){for(S=0;S<Ae-4;S++)x[F+S]=m[h+S+4];F+=Ae-4}else if(j=="pHYs")w.tabs[j]=[p.readUint(m,h),p.readUint(m,h+4),m[h+8]];else if(j=="cHRM")for(w.tabs[j]=[],S=0;S<8;S++)w.tabs[j].push(p.readUint(m,h+4*S));else if(j=="tEXt"||j=="zTXt"){w.tabs[j]==null&&(w.tabs[j]={});var C=p.nextZero(m,h),D=p.readASCII(m,h,C-h),P=h+Ae-C-1;if(j=="tEXt")H=p.readASCII(m,C+1,P);else{var O=a(m.slice(C+2,C+2+P));H=p.readUTF8(O,0,O.length)}w.tabs[j][D]=H}else if(j=="iTXt"){w.tabs[j]==null&&(w.tabs[j]={}),C=0,E=h,C=p.nextZero(m,E),D=p.readASCII(m,E,C-E);const J=m[E=C+1];var H;m[E+1],E+=2,C=p.nextZero(m,E),p.readASCII(m,E,C-E),E=C+1,C=p.nextZero(m,E),p.readUTF8(m,E,C-E),P=Ae-((E=C+1)-h),J==0?H=p.readUTF8(m,E,P):(O=a(m.slice(E,E+P)),H=p.readUTF8(O,0,O.length)),w.tabs[j][D]=H}else if(j=="PLTE")w.tabs[j]=p.readBytes(m,h,Ae);else if(j=="hIST"){const J=w.tabs.PLTE.length/3;for(w.tabs[j]=[],S=0;S<J;S++)w.tabs[j].push(y(m,h+2*S))}else if(j=="tRNS")w.ctype==3?w.tabs[j]=p.readBytes(m,h,Ae):w.ctype==0?w.tabs[j]=y(m,h):w.ctype==2&&(w.tabs[j]=[y(m,h),y(m,h+2),y(m,h+4)]);else if(j=="gAMA")w.tabs[j]=p.readUint(m,h)/1e5;else if(j=="sRGB")w.tabs[j]=m[h];else if(j=="bKGD")w.ctype==0||w.ctype==4?w.tabs[j]=[y(m,h)]:w.ctype==2||w.ctype==6?w.tabs[j]=[y(m,h),y(m,h+2),y(m,h+4)]:w.ctype==3&&(w.tabs[j]=m[h]);else if(j=="IEND")break;h+=Ae,p.readUint(m,h),h+=4}var ie;return F!=0&&((ie=w.frames[w.frames.length-1]).data=n(w,x.slice(0,F),ie.rect.width,ie.rect.height)),w.data=n(w,b,w.width,w.height),delete w.compress,delete w.interlace,delete w.filter,w},toRGBA8:function(f){const m=f.width,h=f.height;if(f.tabs.acTL==null)return[t(f.data,m,h,f).buffer];const p=[];f.frames[0].data==null&&(f.frames[0].data=f.data);const y=m*h*4,g=new Uint8Array(y),w=new Uint8Array(y),b=new Uint8Array(y);for(let T=0;T<f.frames.length;T++){const F=f.frames[T],k=F.rect.x,S=F.rect.y,E=F.rect.width,C=F.rect.height,D=t(F.data,E,C,f);if(T!=0)for(var x=0;x<y;x++)b[x]=g[x];if(F.blend==0?A(D,E,C,g,m,h,k,S,0):F.blend==1&&A(D,E,C,g,m,h,k,S,1),p.push(g.buffer.slice(0)),F.dispose!=0){if(F.dispose==1)A(w,E,C,g,m,h,k,S,0);else if(F.dispose==2)for(x=0;x<y;x++)g[x]=b[x]}}return p},_paeth:i,_copyTile:A,_bin:e}})();(function(){const{_copyTile:e}=Sl,{_bin:t}=Sl,n=Sl._paeth;var a={table:(function(){const E=new Uint32Array(256);for(let C=0;C<256;C++){let D=C;for(let P=0;P<8;P++)1&D?D=3988292384^D>>>1:D>>>=1;E[C]=D}return E})(),update(E,C,D,P){for(let O=0;O<P;O++)E=a.table[255&(E^C[D+O])]^E>>>8;return E},crc:(E,C,D)=>4294967295^a.update(4294967295,E,C,D)};function r(E,C,D,P){C[D]+=E[0]*P>>4,C[D+1]+=E[1]*P>>4,C[D+2]+=E[2]*P>>4,C[D+3]+=E[3]*P>>4}function s(E){return Math.max(0,Math.min(255,E))}function o(E,C){const D=E[0]-C[0],P=E[1]-C[1],O=E[2]-C[2],H=E[3]-C[3];return D*D+P*P+O*O+H*H}function i(E,C,D,P,O,H,ie){ie==null&&(ie=1);const Ae=P.length,j=[];for(var J=0;J<Ae;J++){const Q=P[J];j.push([Q>>>0&255,Q>>>8&255,Q>>>16&255,Q>>>24&255])}for(J=0;J<Ae;J++){let Q=4294967295;for(var ue=0,ne=0;ne<Ae;ne++){var Y=o(j[J],j[ne]);ne!=J&&Y<Q&&(Q=Y,ue=ne)}}const te=new Uint32Array(O.buffer),L=new Int16Array(C*D*4),N=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(J=0;J<N.length;J++)N[J]=255*((N[J]+.5)/16-.5);for(let Q=0;Q<D;Q++)for(let ee=0;ee<C;ee++){var q;J=4*(Q*C+ee),ie!=2?q=[s(E[J]+L[J]),s(E[J+1]+L[J+1]),s(E[J+2]+L[J+2]),s(E[J+3]+L[J+3])]:(Y=N[4*(3&Q)+(3&ee)],q=[s(E[J]+Y),s(E[J+1]+Y),s(E[J+2]+Y),s(E[J+3]+Y)]),ue=0;let z=16777215;for(ne=0;ne<Ae;ne++){const re=o(q,j[ne]);re<z&&(z=re,ue=ne)}const X=j[ue],le=[q[0]-X[0],q[1]-X[1],q[2]-X[2],q[3]-X[3]];ie==1&&(ee!=C-1&&r(le,L,J+4,7),Q!=D-1&&(ee!=0&&r(le,L,J+4*C-4,3),r(le,L,J+4*C,5),ee!=C-1&&r(le,L,J+4*C+4,1))),H[J>>2]=ue,te[J>>2]=P[ue]}}function c(E,C,D,P,O){O==null&&(O={});const{crc:H}=a,ie=t.writeUint,Ae=t.writeUshort,j=t.writeASCII;let J=8;const ue=E.frames.length>1;let ne,Y=!1,te=33+(ue?20:0);if(O.sRGB!=null&&(te+=13),O.pHYs!=null&&(te+=21),O.iCCP!=null&&(ne=pako.deflate(O.iCCP),te+=21+ne.length+4),E.ctype==3){for(var L=E.plte.length,N=0;N<L;N++)E.plte[N]>>>24!=255&&(Y=!0);te+=8+3*L+4+(Y?8+1*L+4:0)}for(var q=0;q<E.frames.length;q++)ue&&(te+=38),te+=(X=E.frames[q]).cimg.length+12,q!=0&&(te+=4);te+=12;const Q=new Uint8Array(te),ee=[137,80,78,71,13,10,26,10];for(N=0;N<8;N++)Q[N]=ee[N];if(ie(Q,J,13),J+=4,j(Q,J,"IHDR"),J+=4,ie(Q,J,C),J+=4,ie(Q,J,D),J+=4,Q[J]=E.depth,J++,Q[J]=E.ctype,J++,Q[J]=0,J++,Q[J]=0,J++,Q[J]=0,J++,ie(Q,J,H(Q,J-17,17)),J+=4,O.sRGB!=null&&(ie(Q,J,1),J+=4,j(Q,J,"sRGB"),J+=4,Q[J]=O.sRGB,J++,ie(Q,J,H(Q,J-5,5)),J+=4),O.iCCP!=null){const le=13+ne.length;ie(Q,J,le),J+=4,j(Q,J,"iCCP"),J+=4,j(Q,J,"ICC profile"),J+=11,J+=2,Q.set(ne,J),J+=ne.length,ie(Q,J,H(Q,J-(le+4),le+4)),J+=4}if(O.pHYs!=null&&(ie(Q,J,9),J+=4,j(Q,J,"pHYs"),J+=4,ie(Q,J,O.pHYs[0]),J+=4,ie(Q,J,O.pHYs[1]),J+=4,Q[J]=O.pHYs[2],J++,ie(Q,J,H(Q,J-13,13)),J+=4),ue&&(ie(Q,J,8),J+=4,j(Q,J,"acTL"),J+=4,ie(Q,J,E.frames.length),J+=4,ie(Q,J,O.loop!=null?O.loop:0),J+=4,ie(Q,J,H(Q,J-12,12)),J+=4),E.ctype==3){for(ie(Q,J,3*(L=E.plte.length)),J+=4,j(Q,J,"PLTE"),J+=4,N=0;N<L;N++){const le=3*N,re=E.plte[N],de=255&re,G=re>>>8&255,Z=re>>>16&255;Q[J+le+0]=de,Q[J+le+1]=G,Q[J+le+2]=Z}if(J+=3*L,ie(Q,J,H(Q,J-3*L-4,3*L+4)),J+=4,Y){for(ie(Q,J,L),J+=4,j(Q,J,"tRNS"),J+=4,N=0;N<L;N++)Q[J+N]=E.plte[N]>>>24&255;J+=L,ie(Q,J,H(Q,J-L-4,L+4)),J+=4}}let z=0;for(q=0;q<E.frames.length;q++){var X=E.frames[q];ue&&(ie(Q,J,26),J+=4,j(Q,J,"fcTL"),J+=4,ie(Q,J,z++),J+=4,ie(Q,J,X.rect.width),J+=4,ie(Q,J,X.rect.height),J+=4,ie(Q,J,X.rect.x),J+=4,ie(Q,J,X.rect.y),J+=4,Ae(Q,J,P[q]),J+=2,Ae(Q,J,1e3),J+=2,Q[J]=X.dispose,J++,Q[J]=X.blend,J++,ie(Q,J,H(Q,J-30,30)),J+=4);const le=X.cimg;ie(Q,J,(L=le.length)+(q==0?0:4)),J+=4;const re=J;j(Q,J,q==0?"IDAT":"fdAT"),J+=4,q!=0&&(ie(Q,J,z++),J+=4),Q.set(le,J),J+=L,ie(Q,J,H(Q,re,J-re)),J+=4}return ie(Q,J,0),J+=4,j(Q,J,"IEND"),J+=4,ie(Q,J,H(Q,J-4,4)),J+=4,Q.buffer}function A(E,C,D){for(let P=0;P<E.frames.length;P++){const O=E.frames[P];O.rect.width;const H=O.rect.height,ie=new Uint8Array(H*O.bpl+H);O.cimg=h(O.img,H,O.bpp,O.bpl,ie,C,D)}}function d(E,C,D,P,O){const H=O[0],ie=O[1],Ae=O[2],j=O[3],J=O[4],ue=O[5];let ne=6,Y=8,te=255;for(var L=0;L<E.length;L++){const Pe=new Uint8Array(E[L]);for(var N=Pe.length,q=0;q<N;q+=4)te&=Pe[q+3]}const Q=te!=255,ee=(function(ye,Ce,_e,De,xe,Te){const Me=[];for(var et=0;et<ye.length;et++){const Pt=new Uint8Array(ye[et]),Kt=new Uint32Array(Pt.buffer);var lt;let $t=0,bt=0,st=Ce,Je=_e,Nt=De?1:0;if(et!=0){const rn=Te||De||et==1||Me[et-2].dispose!=0?1:2;let Lt=0,_t=1e9;for(let ut=0;ut<rn;ut++){var Re=new Uint8Array(ye[et-1-ut]);const Ft=new Uint32Array(ye[et-1-ut]);let zt=Ce,dn=_e,Hn=-1,Ze=-1;for(let xt=0;xt<_e;xt++)for(let gt=0;gt<Ce;gt++)Kt[nt=xt*Ce+gt]!=Ft[nt]&&(gt<zt&&(zt=gt),gt>Hn&&(Hn=gt),xt<dn&&(dn=xt),xt>Ze&&(Ze=xt));Hn==-1&&(zt=dn=Hn=Ze=0),xe&&((1&zt)==1&&zt--,(1&dn)==1&&dn--);const Ge=(Hn-zt+1)*(Ze-dn+1);Ge<_t&&(_t=Ge,Lt=ut,$t=zt,bt=dn,st=Hn-zt+1,Je=Ze-dn+1)}Re=new Uint8Array(ye[et-1-Lt]),Lt==1&&(Me[et-1].dispose=2),lt=new Uint8Array(st*Je*4),e(Re,Ce,_e,lt,st,Je,-$t,-bt,0),Nt=e(Pt,Ce,_e,lt,st,Je,-$t,-bt,3)?1:0,Nt==1?m(Pt,Ce,_e,lt,{x:$t,y:bt,width:st,height:Je}):e(Pt,Ce,_e,lt,st,Je,-$t,-bt,0)}else lt=Pt.slice(0);Me.push({rect:{x:$t,y:bt,width:st,height:Je},img:lt,blend:Nt,dispose:0})}if(De)for(et=0;et<Me.length;et++){if((Tt=Me[et]).blend==1)continue;const Pt=Tt.rect,Kt=Me[et-1].rect,$t=Math.min(Pt.x,Kt.x),bt=Math.min(Pt.y,Kt.y),st={x:$t,y:bt,width:Math.max(Pt.x+Pt.width,Kt.x+Kt.width)-$t,height:Math.max(Pt.y+Pt.height,Kt.y+Kt.height)-bt};Me[et-1].dispose=1,et-1!=0&&f(ye,Ce,_e,Me,et-1,st,xe),f(ye,Ce,_e,Me,et,st,xe)}let Le=0;if(ye.length!=1)for(var nt=0;nt<Me.length;nt++){var Tt;Le+=(Tt=Me[nt]).rect.width*Tt.rect.height}return Me})(E,C,D,H,ie,Ae),z={},X=[],le=[];if(P!=0){const Pe=[];for(q=0;q<ee.length;q++)Pe.push(ee[q].img.buffer);const ye=(function(xe){let Te=0;for(var Me=0;Me<xe.length;Me++)Te+=xe[Me].byteLength;const et=new Uint8Array(Te);let lt=0;for(Me=0;Me<xe.length;Me++){const Re=new Uint8Array(xe[Me]),Le=Re.length;for(let nt=0;nt<Le;nt+=4){let Tt=Re[nt],Pt=Re[nt+1],Kt=Re[nt+2];const $t=Re[nt+3];$t==0&&(Tt=Pt=Kt=0),et[lt+nt]=Tt,et[lt+nt+1]=Pt,et[lt+nt+2]=Kt,et[lt+nt+3]=$t}lt+=Le}return et.buffer})(Pe),Ce=y(ye,P);for(q=0;q<Ce.plte.length;q++)X.push(Ce.plte[q].est.rgba);let _e=0;for(q=0;q<ee.length;q++){const De=(de=ee[q]).img.length;var re=new Uint8Array(Ce.inds.buffer,_e>>2,De>>2);le.push(re);const xe=new Uint8Array(Ce.abuf,_e,De);ue&&i(de.img,de.rect.width,de.rect.height,X,xe,re),de.img.set(xe),_e+=De}}else for(L=0;L<ee.length;L++){var de=ee[L];const Pe=new Uint32Array(de.img.buffer);var G=de.rect.width;for(N=Pe.length,re=new Uint8Array(N),le.push(re),q=0;q<N;q++){const ye=Pe[q];if(q!=0&&ye==Pe[q-1])re[q]=re[q-1];else if(q>G&&ye==Pe[q-G])re[q]=re[q-G];else{let Ce=z[ye];if(Ce==null&&(z[ye]=Ce=X.length,X.push(ye),X.length>=300))break;re[q]=Ce}}}const Z=X.length;for(Z<=256&&J==0&&(Y=Z<=2?1:Z<=4?2:Z<=16?4:8,Y=Math.max(Y,j)),L=0;L<ee.length;L++){(de=ee[L]).rect.x,de.rect.y,G=de.rect.width;const Pe=de.rect.height;let ye=de.img;new Uint32Array(ye.buffer);let Ce=4*G,_e=4;if(Z<=256&&J==0){Ce=Math.ceil(Y*G/8);var ce=new Uint8Array(Ce*Pe);const De=le[L];for(let xe=0;xe<Pe;xe++){q=xe*Ce;const Te=xe*G;if(Y==8)for(var Se=0;Se<G;Se++)ce[q+Se]=De[Te+Se];else if(Y==4)for(Se=0;Se<G;Se++)ce[q+(Se>>1)]|=De[Te+Se]<<4-4*(1&Se);else if(Y==2)for(Se=0;Se<G;Se++)ce[q+(Se>>2)]|=De[Te+Se]<<6-2*(3&Se);else if(Y==1)for(Se=0;Se<G;Se++)ce[q+(Se>>3)]|=De[Te+Se]<<7-1*(7&Se)}ye=ce,ne=3,_e=1}else if(Q==0&&ee.length==1){ce=new Uint8Array(G*Pe*3);const De=G*Pe;for(q=0;q<De;q++){const xe=3*q,Te=4*q;ce[xe]=ye[Te],ce[xe+1]=ye[Te+1],ce[xe+2]=ye[Te+2]}ye=ce,ne=2,_e=3,Ce=3*G}de.img=ye,de.bpl=Ce,de.bpp=_e}return{ctype:ne,depth:Y,plte:X,frames:ee}}function f(E,C,D,P,O,H,ie){const Ae=Uint8Array,j=Uint32Array,J=new Ae(E[O-1]),ue=new j(E[O-1]),ne=O+1<E.length?new Ae(E[O+1]):null,Y=new Ae(E[O]),te=new j(Y.buffer);let L=C,N=D,q=-1,Q=-1;for(let z=0;z<H.height;z++)for(let X=0;X<H.width;X++){const le=H.x+X,re=H.y+z,de=re*C+le,G=te[de];G==0||P[O-1].dispose==0&&ue[de]==G&&(ne==null||ne[4*de+3]!=0)||(le<L&&(L=le),le>q&&(q=le),re<N&&(N=re),re>Q&&(Q=re))}q==-1&&(L=N=q=Q=0),ie&&((1&L)==1&&L--,(1&N)==1&&N--),H={x:L,y:N,width:q-L+1,height:Q-N+1};const ee=P[O];ee.rect=H,ee.blend=1,ee.img=new Uint8Array(H.width*H.height*4),P[O-1].dispose==0?(e(J,C,D,ee.img,H.width,H.height,-H.x,-H.y,0),m(Y,C,D,ee.img,H)):e(Y,C,D,ee.img,H.width,H.height,-H.x,-H.y,0)}function m(E,C,D,P,O){e(E,C,D,P,O.width,O.height,-O.x,-O.y,2)}function h(E,C,D,P,O,H,ie){const Ae=[];let j,J=[0,1,2,3,4];H!=-1?J=[H]:(C*P>5e5||D==1)&&(J=[0]),ie&&(j={level:0});const ue=fBe;for(var ne=0;ne<J.length;ne++){for(let L=0;L<C;L++)p(O,E,L,P,D,J[ne]);Ae.push(ue.deflate(O,j))}let Y,te=1e9;for(ne=0;ne<Ae.length;ne++)Ae[ne].length<te&&(Y=ne,te=Ae[ne].length);return Ae[Y]}function p(E,C,D,P,O,H){const ie=D*P;let Ae=ie+D;if(E[Ae]=H,Ae++,H==0)if(P<500)for(var j=0;j<P;j++)E[Ae+j]=C[ie+j];else E.set(new Uint8Array(C.buffer,ie,P),Ae);else if(H==1){for(j=0;j<O;j++)E[Ae+j]=C[ie+j];for(j=O;j<P;j++)E[Ae+j]=C[ie+j]-C[ie+j-O]+256&255}else if(D==0){for(j=0;j<O;j++)E[Ae+j]=C[ie+j];if(H==2)for(j=O;j<P;j++)E[Ae+j]=C[ie+j];if(H==3)for(j=O;j<P;j++)E[Ae+j]=C[ie+j]-(C[ie+j-O]>>1)+256&255;if(H==4)for(j=O;j<P;j++)E[Ae+j]=C[ie+j]-n(C[ie+j-O],0,0)+256&255}else{if(H==2)for(j=0;j<P;j++)E[Ae+j]=C[ie+j]+256-C[ie+j-P]&255;if(H==3){for(j=0;j<O;j++)E[Ae+j]=C[ie+j]+256-(C[ie+j-P]>>1)&255;for(j=O;j<P;j++)E[Ae+j]=C[ie+j]+256-(C[ie+j-P]+C[ie+j-O]>>1)&255}if(H==4){for(j=0;j<O;j++)E[Ae+j]=C[ie+j]+256-n(0,C[ie+j-P],0)&255;for(j=O;j<P;j++)E[Ae+j]=C[ie+j]+256-n(C[ie+j-O],C[ie+j-P],C[ie+j-O-P])&255}}}function y(E,C){const D=new Uint8Array(E),P=D.slice(0),O=new Uint32Array(P.buffer),H=g(P,C),ie=H[0],Ae=H[1],j=D.length,J=new Uint8Array(j>>2);let ue;if(D.length<2e7)for(var ne=0;ne<j;ne+=4)ue=w(ie,Y=D[ne]*(1/255),te=D[ne+1]*(1/255),L=D[ne+2]*(1/255),N=D[ne+3]*(1/255)),J[ne>>2]=ue.ind,O[ne>>2]=ue.est.rgba;else for(ne=0;ne<j;ne+=4){var Y=D[ne]*.00392156862745098,te=D[ne+1]*(1/255),L=D[ne+2]*(1/255),N=D[ne+3]*(1/255);for(ue=ie;ue.left;)ue=b(ue.est,Y,te,L,N)<=0?ue.left:ue.right;J[ne>>2]=ue.ind,O[ne>>2]=ue.est.rgba}return{abuf:P.buffer,inds:J,plte:Ae}}function g(E,C,D){D==null&&(D=1e-4);const P=new Uint32Array(E.buffer),O={i0:0,i1:E.length,bst:null,est:null,tdst:0,left:null,right:null};O.bst=F(E,O.i0,O.i1),O.est=k(O.bst);const H=[O];for(;H.length<C;){let Ae=0,j=0;for(var ie=0;ie<H.length;ie++)H[ie].est.L>Ae&&(Ae=H[ie].est.L,j=ie);if(Ae<D)break;const J=H[j],ue=x(E,P,J.i0,J.i1,J.est.e,J.est.eMq255);if(J.i0>=ue||J.i1<=ue){J.est.L=0;continue}const ne={i0:J.i0,i1:ue,bst:null,est:null,tdst:0,left:null,right:null};ne.bst=F(E,ne.i0,ne.i1),ne.est=k(ne.bst);const Y={i0:ue,i1:J.i1,bst:null,est:null,tdst:0,left:null,right:null};for(Y.bst={R:[],m:[],N:J.bst.N-ne.bst.N},ie=0;ie<16;ie++)Y.bst.R[ie]=J.bst.R[ie]-ne.bst.R[ie];for(ie=0;ie<4;ie++)Y.bst.m[ie]=J.bst.m[ie]-ne.bst.m[ie];Y.est=k(Y.bst),J.left=ne,J.right=Y,H[j]=ne,H.push(Y)}for(H.sort(((Ae,j)=>j.bst.N-Ae.bst.N)),ie=0;ie<H.length;ie++)H[ie].ind=ie;return[O,H]}function w(E,C,D,P,O){if(E.left==null)return E.tdst=(function(ne,Y,te,L,N){const q=Y-ne[0],Q=te-ne[1],ee=L-ne[2],z=N-ne[3];return q*q+Q*Q+ee*ee+z*z})(E.est.q,C,D,P,O),E;const H=b(E.est,C,D,P,O);let ie=E.left,Ae=E.right;H>0&&(ie=E.right,Ae=E.left);const j=w(ie,C,D,P,O);if(j.tdst<=H*H)return j;const J=w(Ae,C,D,P,O);return J.tdst<j.tdst?J:j}function b(E,C,D,P,O){const{e:H}=E;return H[0]*C+H[1]*D+H[2]*P+H[3]*O-E.eMq}function x(E,C,D,P,O,H){for(P-=4;D<P;){for(;T(E,D,O)<=H;)D+=4;for(;T(E,P,O)>H;)P-=4;if(D>=P)break;const ie=C[D>>2];C[D>>2]=C[P>>2],C[P>>2]=ie,D+=4,P-=4}for(;T(E,D,O)>H;)D-=4;return D+4}function T(E,C,D){return E[C]*D[0]+E[C+1]*D[1]+E[C+2]*D[2]+E[C+3]*D[3]}function F(E,C,D){const P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],O=[0,0,0,0],H=D-C>>2;for(let ie=C;ie<D;ie+=4){const Ae=E[ie]*.00392156862745098,j=E[ie+1]*(1/255),J=E[ie+2]*(1/255),ue=E[ie+3]*(1/255);O[0]+=Ae,O[1]+=j,O[2]+=J,O[3]+=ue,P[0]+=Ae*Ae,P[1]+=Ae*j,P[2]+=Ae*J,P[3]+=Ae*ue,P[5]+=j*j,P[6]+=j*J,P[7]+=j*ue,P[10]+=J*J,P[11]+=J*ue,P[15]+=ue*ue}return P[4]=P[1],P[8]=P[2],P[9]=P[6],P[12]=P[3],P[13]=P[7],P[14]=P[11],{R:P,m:O,N:H}}function k(E){const{R:C}=E,{m:D}=E,{N:P}=E,O=D[0],H=D[1],ie=D[2],Ae=D[3],j=P==0?0:1/P,J=[C[0]-O*O*j,C[1]-O*H*j,C[2]-O*ie*j,C[3]-O*Ae*j,C[4]-H*O*j,C[5]-H*H*j,C[6]-H*ie*j,C[7]-H*Ae*j,C[8]-ie*O*j,C[9]-ie*H*j,C[10]-ie*ie*j,C[11]-ie*Ae*j,C[12]-Ae*O*j,C[13]-Ae*H*j,C[14]-Ae*ie*j,C[15]-Ae*Ae*j],ue=J,ne=S;let Y=[Math.random(),Math.random(),Math.random(),Math.random()],te=0,L=0;if(P!=0)for(let q=0;q<16&&(Y=ne.multVec(ue,Y),L=Math.sqrt(ne.dot(Y,Y)),Y=ne.sml(1/L,Y),!(q!=0&&Math.abs(L-te)<1e-9));q++)te=L;const N=[O*j,H*j,ie*j,Ae*j];return{Cov:J,q:N,e:Y,L:te,eMq255:ne.dot(ne.sml(255,N),Y),eMq:ne.dot(Y,N),rgba:(Math.round(255*N[3])<<24|Math.round(255*N[2])<<16|Math.round(255*N[1])<<8|Math.round(255*N[0])<<0)>>>0}}var S={multVec:(E,C)=>[E[0]*C[0]+E[1]*C[1]+E[2]*C[2]+E[3]*C[3],E[4]*C[0]+E[5]*C[1]+E[6]*C[2]+E[7]*C[3],E[8]*C[0]+E[9]*C[1]+E[10]*C[2]+E[11]*C[3],E[12]*C[0]+E[13]*C[1]+E[14]*C[2]+E[15]*C[3]],dot:(E,C)=>E[0]*C[0]+E[1]*C[1]+E[2]*C[2]+E[3]*C[3],sml:(E,C)=>[E*C[0],E*C[1],E*C[2],E*C[3]]};Sl.encode=function(C,D,P,O,H,ie,Ae){O==null&&(O=0),Ae==null&&(Ae=!1);const j=d(C,D,P,O,[!1,!1,!1,0,Ae,!1]);return A(j,-1),c(j,D,P,H,ie)},Sl.encodeLL=function(C,D,P,O,H,ie,Ae,j){const J={ctype:0+(O==1?0:2)+(H==0?0:4),depth:ie,frames:[]},ue=(O+H)*ie,ne=ue*D;for(let Y=0;Y<C.length;Y++)J.frames.push({rect:{x:0,y:0,width:D,height:P},img:new Uint8Array(C[Y]),blend:0,dispose:1,bpp:Math.ceil(ue/8),bpl:Math.ceil(ne/8)});return A(J,0,!0),c(J,D,P,Ae,j)},Sl.encode.compress=d,Sl.encode.dither=i,Sl.quantize=y,Sl.quantize.getKDtree=g,Sl.quantize.getNearest=w})();const VH={toArrayBuffer(e,t){const n=e.width,a=e.height,r=n<<2,s=e.getContext("2d").getImageData(0,0,n,a),o=new Uint32Array(s.data.buffer),i=(32*n+31)/32<<2,c=i*a,A=122+c,d=new ArrayBuffer(A),f=new DataView(d),m=1<<20;let h,p,y,g,w=m,b=0,x=0,T=0;function F(E){f.setUint16(x,E,!0),x+=2}function k(E){f.setUint32(x,E,!0),x+=4}function S(E){x+=E}F(19778),k(A),S(4),k(122),k(108),k(n),k(-a>>>0),F(1),F(32),k(3),k(c),k(2835),k(2835),S(8),k(16711680),k(65280),k(255),k(4278190080),k(1466527264),(function E(){for(;b<a&&w>0;){for(g=122+b*i,h=0;h<r;)w--,p=o[T++],y=p>>>24,f.setUint32(g+h,p<<8|y),h+=4;b++}T<o.length?(w=m,setTimeout(E,VH._dly)):t(d)})()},toBlob(e,t){this.toArrayBuffer(e,(n=>{t(new Blob([n],{type:"image/bmp"}))}))},_dly:9};var si={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},mBe={[si.CHROME]:16384,[si.FIREFOX]:11180,[si.DESKTOP_SAFARI]:16384,[si.IE]:8192,[si.IOS]:4096,[si.ETC]:8192};const ST=typeof window<"u",LH=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,l2=ST&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),vBe=(ST||LH)&&(l2&&l2.getOriginalSymbol(window,"File")||typeof File<"u"&&File),MH=(ST||LH)&&(l2&&l2.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function ET(e,t,n=Date.now()){return new Promise((a=>{const r=e.split(","),s=r[0].match(/:(.*?);/)[1],o=globalThis.atob(r[1]);let i=o.length;const c=new Uint8Array(i);for(;i--;)c[i]=o.charCodeAt(i);const A=new Blob([c],{type:s});A.name=t,A.lastModified=n,a(A)}))}function OH(e){return new Promise(((t,n)=>{const a=new MH;a.onload=()=>t(a.result),a.onerror=r=>n(r),a.readAsDataURL(e)}))}function HH(e){return new Promise(((t,n)=>{const a=new Image;a.onload=()=>t(a),a.onerror=r=>n(r),a.src=e}))}function qA(){if(qA.cachedResult!==void 0)return qA.cachedResult;let e=si.ETC;const{userAgent:t}=navigator;return/Chrom(e|ium)/i.test(t)?e=si.CHROME:/iP(ad|od|hone)/i.test(t)&&/WebKit/i.test(t)?e=si.IOS:/Safari/i.test(t)?e=si.DESKTOP_SAFARI:/Firefox/i.test(t)?e=si.FIREFOX:(/MSIE/i.test(t)||document.documentMode)&&(e=si.IE),qA.cachedResult=e,qA.cachedResult}function $H(e,t){const n=qA(),a=mBe[n];let r=e,s=t,o=r*s;const i=r>s?s/r:r/s;for(;o>a*a;){const c=(a+r)/2,A=(a+s)/2;c<A?(s=A,r=A*i):(s=c*i,r=c),o=r*s}return{width:r,height:s}}function Lw(e,t){let n,a;try{if(n=new OffscreenCanvas(e,t),a=n.getContext("2d"),a===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),a=n.getContext("2d")}return n.width=e,n.height=t,[n,a]}function QH(e,t){const{width:n,height:a}=$H(e.width,e.height),[r,s]=Lw(n,a);return t&&/jpe?g/.test(t)&&(s.fillStyle="white",s.fillRect(0,0,r.width,r.height)),s.drawImage(e,0,0,r.width,r.height),r}function i_(){return i_.cachedResult!==void 0||(i_.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),i_.cachedResult}function u2(e,t={}){return new Promise((function(n,a){let r,s;var o=function(){try{return s=QH(r,t.fileType||e.type),n([r,s])}catch(c){return a(c)}},i=function(c){try{var A=function(d){try{throw d}catch(f){return a(f)}};try{let d;return OH(e).then((function(f){try{return d=f,HH(d).then((function(m){try{return r=m,(function(){try{return o()}catch(h){return a(h)}})()}catch(h){return A(h)}}),A)}catch(m){return A(m)}}),A)}catch(d){A(d)}}catch(d){return a(d)}};try{if(i_()||[si.DESKTOP_SAFARI,si.MOBILE_SAFARI].includes(qA()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(e).then((function(c){try{return r=c,o()}catch{return i()}}),i)}catch{i()}}))}function c2(e,t,n,a,r=1){return new Promise((function(s,o){let i;if(t==="image/png"){let A,d,f;return A=e.getContext("2d"),{data:d}=A.getImageData(0,0,e.width,e.height),f=Sl.encode([d.buffer],e.width,e.height,4096*r),i=new Blob([f],{type:t}),i.name=n,i.lastModified=a,c.call(this)}{let A=function(){return c.call(this)};if(t==="image/bmp")return new Promise((d=>VH.toBlob(e,d))).then((function(d){try{return i=d,i.name=n,i.lastModified=a,A.call(this)}catch(f){return o(f)}}).bind(this),o);{let d=function(){return A.call(this)};if(typeof OffscreenCanvas=="function"&&e instanceof OffscreenCanvas)return e.convertToBlob({type:t,quality:r}).then((function(f){try{return i=f,i.name=n,i.lastModified=a,d.call(this)}catch(m){return o(m)}}).bind(this),o);{let f;return f=e.toDataURL(t,r),ET(f,n,a).then((function(m){try{return i=m,d.call(this)}catch(h){return o(h)}}).bind(this),o)}}}function c(){return s(i)}}))}function xu(e){e.width=0,e.height=0}function tv(){return new Promise((function(e,t){let n,a,r,s;return tv.cachedResult!==void 0?e(tv.cachedResult):ET("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(o){try{return n=o,u2(n).then((function(i){try{return a=i[1],c2(a,n.type,n.name,n.lastModified).then((function(c){try{return r=c,xu(a),u2(r).then((function(A){try{return s=A[0],tv.cachedResult=s.width===1&&s.height===2,e(tv.cachedResult)}catch(d){return t(d)}}),t)}catch(A){return t(A)}}),t)}catch(c){return t(c)}}),t)}catch(i){return t(i)}}),t)}))}function GH(e){return new Promise(((t,n)=>{const a=new MH;a.onload=r=>{const s=new DataView(r.target.result);if(s.getUint16(0,!1)!=65496)return t(-2);const o=s.byteLength;let i=2;for(;i<o;){if(s.getUint16(i+2,!1)<=8)return t(-1);const c=s.getUint16(i,!1);if(i+=2,c==65505){if(s.getUint32(i+=2,!1)!=1165519206)return t(-1);const A=s.getUint16(i+=6,!1)==18761;i+=s.getUint32(i+4,A);const d=s.getUint16(i,A);i+=2;for(let f=0;f<d;f++)if(s.getUint16(i+12*f,A)==274)return t(s.getUint16(i+12*f+8,A))}else{if((65280&c)!=65280)break;i+=s.getUint16(i,!1)}}return t(-1)},a.onerror=r=>n(r),a.readAsArrayBuffer(e)}))}function zH(e,t){const{width:n}=e,{height:a}=e,{maxWidthOrHeight:r}=t;let s,o=e;return isFinite(r)&&(n>r||a>r)&&([o,s]=Lw(n,a),n>a?(o.width=r,o.height=a/n*r):(o.width=n/a*r,o.height=r),s.drawImage(e,0,0,o.width,o.height),xu(e)),o}function KH(e,t){const{width:n}=e,{height:a}=e,[r,s]=Lw(n,a);switch(t>4&&t<9?(r.width=a,r.height=n):(r.width=n,r.height=a),t){case 2:s.transform(-1,0,0,1,n,0);break;case 3:s.transform(-1,0,0,-1,n,a);break;case 4:s.transform(1,0,0,-1,0,a);break;case 5:s.transform(0,1,1,0,0,0);break;case 6:s.transform(0,1,-1,0,a,0);break;case 7:s.transform(0,-1,-1,0,a,n);break;case 8:s.transform(0,-1,1,0,0,n)}return s.drawImage(e,0,0,n,a),xu(e),r}function dR(e,t,n=0){return new Promise((function(a,r){let s,o,i,c,A,d,f,m,h,p,y,g,w,b,x,T,F,k,S,E;function C(P=5){if(t.signal&&t.signal.aborted)throw t.signal.reason;s+=P,t.onProgress(Math.min(s,100))}function D(P){if(t.signal&&t.signal.aborted)throw t.signal.reason;s=Math.min(Math.max(P,s),100),t.onProgress(s)}return s=n,o=t.maxIteration||10,i=1024*t.maxSizeMB*1024,C(),u2(e,t).then((function(P){try{return[,c]=P,C(),A=zH(c,t),C(),new Promise((function(O,H){var ie;if(!(ie=t.exifOrientation))return GH(e).then((function(j){try{return ie=j,Ae.call(this)}catch(J){return H(J)}}).bind(this),H);function Ae(){return O(ie)}return Ae.call(this)})).then((function(O){try{return d=O,C(),tv().then((function(H){try{return f=H?A:KH(A,d),C(),m=t.initialQuality||1,h=t.fileType||e.type,c2(f,h,e.name,e.lastModified,m).then((function(ie){try{{let j=function(){if(o--&&(x>i||x>w)){let ue,ne;return ue=E?.95*S.width:S.width,ne=E?.95*S.height:S.height,[F,k]=Lw(ue,ne),k.drawImage(S,0,0,ue,ne),m*=h==="image/png"?.85:.95,c2(F,h,e.name,e.lastModified,m).then((function(Y){try{return T=Y,xu(S),S=F,x=T.size,D(Math.min(99,Math.floor((b-x)/(b-i)*100))),j}catch(te){return r(te)}}),r)}return[1]},J=function(){return xu(S),xu(F),xu(A),xu(f),xu(c),D(100),a(T)};if(p=ie,C(),y=p.size>i,g=p.size>e.size,!y&&!g)return D(100),a(p);var Ae;return w=e.size,b=p.size,x=b,S=f,E=!t.alwaysKeepResolution&&y,(Ae=(function(ue){for(;ue;){if(ue.then)return void ue.then(Ae,r);try{if(ue.pop){if(ue.length)return ue.pop()?J.call(this):ue;ue=j}else ue=ue.call(this)}catch(ne){return r(ne)}}}).bind(this))(j)}}catch(j){return r(j)}}).bind(this),r)}catch(ie){return r(ie)}}).bind(this),r)}catch(H){return r(H)}}).bind(this),r)}catch(O){return r(O)}}).bind(this),r)}))}const hBe=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let TC;function pBe(e,t){return new Promise(((n,a)=>{TC||(TC=(function(o){const i=[];return i.push(o),URL.createObjectURL(new Blob(i))})(hBe));const r=new Worker(TC);r.addEventListener("message",(function(o){if(t.signal&&t.signal.aborted)r.terminate();else if(o.data.progress===void 0){if(o.data.error)return a(new Error(o.data.error)),void r.terminate();n(o.data.file),r.terminate()}else t.onProgress(o.data.progress)})),r.addEventListener("error",a),t.signal&&t.signal.addEventListener("abort",(()=>{a(t.signal.reason),r.terminate()})),r.postMessage({file:e,imageCompressionLibUrl:t.libURL,options:{...t,onProgress:void 0,signal:void 0}})}))}function as(e,t){return new Promise((function(n,a){let r,s,o,i,c,A;if(r={...t},o=0,{onProgress:i}=r,r.maxSizeMB=r.maxSizeMB||Number.POSITIVE_INFINITY,c=typeof r.useWebWorker!="boolean"||r.useWebWorker,delete r.useWebWorker,r.onProgress=h=>{o=h,typeof i=="function"&&i(o)},!(e instanceof Blob||e instanceof vBe))return a(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(e.type))return a(new Error("The file given is not an image"));if(A=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!c||typeof Worker!="function"||A)return dR(e,r).then((function(h){try{return s=h,m.call(this)}catch(p){return a(p)}}).bind(this),a);var d=(function(){try{return m.call(this)}catch(h){return a(h)}}).bind(this),f=function(h){try{return dR(e,r).then((function(p){try{return s=p,d()}catch(y){return a(y)}}),a)}catch(p){return a(p)}};try{return r.libURL=r.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",pBe(e,r).then((function(h){try{return s=h,d()}catch{return f()}}),f)}catch{f()}function m(){try{s.name=e.name,s.lastModified=e.lastModified}catch{}try{r.preserveExif&&e.type==="image/jpeg"&&(!r.fileType||r.fileType&&r.fileType===e.type)&&(s=NH(e,s))}catch{}return n(s)}}))}as.getDataUrlFromFile=OH,as.getFilefromDataUrl=ET,as.loadImage=HH,as.drawImageInCanvas=QH,as.drawFileInCanvas=u2,as.canvasToFile=c2,as.getExifOrientation=GH,as.handleMaxWidthOrHeight=zH,as.followExifOrientation=KH,as.cleanupCanvasMemory=xu,as.isAutoOrientationInBrowser=tv,as.approximateBelowMaximumCanvasSizeOfBrowser=$H,as.copyExifWithoutOrientation=NH,as.getBrowserName=qA,as.version="2.0.2";const gBe={class:"text-caption"},yBe={key:1,class:"text-overline grey--text text--darken-3 mx-2"},_Be={class:"mb-3"},wBe={class:"text-body-2"},bBe={class:"text-body-2"},xBe={class:"text-caption text-grey-600"},CBe={class:"d-flex justify-center"},SBe={class:"text-center text-caption mt-2 text-info"},AR={__name:"upload-dialog",props:{consultation:{type:Object,required:!1},procedure:{type:Object,required:!1},patient:{type:Object,required:!1}},emits:["close"],setup(e,{emit:t}){const n=e,a=t,r=V([]),s=V(!1),o=V(""),i=V(null),c=V([]),A=V(""),d=V(null),f=V(""),m=V("fast"),h=V([]),p=[{title:"Skip Compression",value:"none",subtitle:"Upload files without compression (fastest)"},{title:"Fast Compression",value:"fast",subtitle:"Quick compression, minimal quality loss"},{title:"Balanced",value:"balanced",subtitle:"Good balance of quality and size"},{title:"High Quality",value:"high",subtitle:"Best quality, larger files"},{title:"Aggressive",value:"aggressive",subtitle:"Smaller files, some quality loss"},{title:"Ultra",value:"ultra",subtitle:"Maximum compression, noticeable quality loss"}],y=uBe(),g=y.limits,w=y.acceptedTypes,b=["before_image","after_image","prescription","report","consent_letter"],x=ae(()=>i.value&&i.value.validFiles.length>0),T=ae(()=>x.value&&o.value&&!s.value),F=ae(()=>i.value?.validFiles?i.value.validFiles.some(Y=>Y.file.type.startsWith("image/")):!1),k=ae(()=>{if(!i.value?.validFiles)return"";const Y=i.value.validFiles.filter(z=>z.file.type.startsWith("image/"));if(Y.length===0)return"";const te=Y.reduce((z,X)=>z+X.file.size,0),L=(te/(1024*1024)).toFixed(2),N={high:.7,balanced:.5,aggressive:.3,ultra:.2},Q=(te*N[m.value]/(1024*1024)).toFixed(2),ee=((1-N[m.value])*100).toFixed(0);return`${L}MB  ${Q}MB (${ee}% reduction)`}),S=()=>{if(!i.value?.validFiles){h.value=[];return}const Y=i.value.validFiles.filter(L=>L.file.type.startsWith("image/")),te={high:.7,balanced:.5,aggressive:.3,ultra:.2};h.value=Y.map(L=>{const N=L.file.size,q=(N/(1024*1024)).toFixed(2),ee=(N*te[m.value]/(1024*1024)).toFixed(2),z=((1-te[m.value])*100).toFixed(0);return{name:L.file.name,originalSize:`${q}MB`,estimatedSize:`${ee}MB`,reduction:z}})},E=Y=>{if(A.value="",c.value=[],i.value=null,!Y||Y.length===0)return;const te=iBe(Y);i.value=te;const L=lBe(te);c.value=L,!te.success&&!te.hasWarnings&&(A.value="Selected files cannot be uploaded due to validation errors"),console.log("File validation result:",te)};Ke(r,E);const C=Y=>({image:"mdi-image",document:"mdi-file-document",video:"mdi-video",other:"mdi-file"})[Y]||"mdi-file",D=Y=>({image:"success",document:"info",video:"warning",other:"grey"})[Y]||"grey",P={high:{maxSizeMB:2,maxWidthOrHeight:2048,quality:.9,fileType:"image/jpeg"},balanced:{maxSizeMB:1,maxWidthOrHeight:1920,quality:.85,fileType:"image/jpeg"},aggressive:{maxSizeMB:.5,maxWidthOrHeight:1600,quality:.75,fileType:"image/jpeg"},ultra:{maxSizeMB:.25,maxWidthOrHeight:1200,quality:.65,fileType:"image/jpeg"}},O=Y=>{const te=Y.size/1048576;return(Y.name.toLowerCase().includes("xray")||Y.name.toLowerCase().includes("scan")||Y.name.toLowerCase().includes("mri"))&&te<=5&&m.value!=="ultra"?P.high:P[m.value]||P.balanced};Ke([i,m],()=>{S()},{immediate:!0});const H=async Y=>new Promise(te=>{const L=document.createElement("canvas"),N=L.getContext("2d"),q=new Image;q.onload=()=>{requestAnimationFrame(()=>{L.width=q.width,L.height=q.height,N.drawImage(q,0,0),window.requestIdleCallback?requestIdleCallback(()=>{L.toBlob(Q=>{const ee=new File([Q],Y.name,{type:Y.type,lastModified:Date.now()});te(ee)},Y.type,.95)}):setTimeout(()=>{L.toBlob(Q=>{const ee=new File([Q],Y.name,{type:Y.type,lastModified:Date.now()});te(ee)},Y.type,.95)},0)})},q.src=URL.createObjectURL(Y)}),ie=Y=>{const te=Y.type==="image/png"&&Y.name.toLowerCase().includes("transparent");return Y.type==="image/png"||te?"image/png":"image/jpeg"},Ae=async Y=>{if(!Y.type.startsWith("image/"))return Y;try{const te=Y.size;console.log(`Compressing image: ${Y.name} (${(te/1024/1024).toFixed(2)}MB)`);const L=await H(Y);console.log(`Metadata stripped: ${(L.size/1024/1024).toFixed(2)}MB`);let N;if(m.value==="fast")N={maxSizeMB:1,maxWidthOrHeight:1200,quality:.7,fileType:"image/jpeg",useWebWorker:!1,initialQuality:.7};else{N=O(L);const X=ie(L);N.fileType=X}let q=await as(L,N);const Q=q.size/te;if(Q>.8){if(console.log(`Primary compression insufficient (${(Q*100).toFixed(1)}%), trying alternatives...`),N.fileType!=="image/jpeg"){const X={...N,fileType:"image/jpeg",quality:Math.max(.6,N.quality-.1)},le=await as(L,X);le.size<q.size&&(q=le,console.log("JPEG compression was better"))}if(q.size/te>.7){console.log("Still too large, applying ultra compression...");const le=await as(L,{maxSizeMB:.2,maxWidthOrHeight:1e3,quality:.6,fileType:"image/jpeg",useWebWorker:!0});le.size<q.size&&(q=le,console.log("Ultra compression applied"))}}const ee=q.size,z=((1-ee/te)*100).toFixed(1);return console.log(`Final compression: ${Y.name} -> ${(ee/1024/1024).toFixed(2)}MB (${z}% reduction)`),q}catch(te){console.warn(`Failed to compress ${Y.name}:`,te);try{return console.log(`Attempting fallback JPEG compression for ${Y.name}`),await as(Y,{maxSizeMB:1,maxWidthOrHeight:1600,quality:.7,fileType:"image/jpeg",useWebWorker:!0})}catch(L){return console.warn(`Fallback compression also failed for ${Y.name}:`,L),Y}}},j=async(Y,te=null)=>{const L=[];let N=0;for(let q=0;q<Y.length;q++){const Q=Y[q];if(Q.type.startsWith("image/")){if(m.value==="none"||Q.size>10*1024*1024){console.log(`Skipping compression for file: ${Q.name} (${(Q.size/1024/1024).toFixed(2)}MB)`),L.push(Q),N++;continue}te&&te(Math.round(N/Y.length*100),`Compressing ${Q.name}...`);const ee=await new Promise(z=>{setTimeout(async()=>{try{await new Promise(de=>setTimeout(de,0));const X=Ae(Q),le=new Promise((de,G)=>setTimeout(()=>G(new Error("Compression timeout")),1e4)),re=await Promise.race([X,le]);z(re)}catch(X){console.error("Compression error:",X),z(Q)}},0)});L.push(ee)}else L.push(Q);N++,q<Y.length-1&&await new Promise(ee=>setTimeout(ee,50))}return te&&te(100,"Compression complete!"),L},J=()=>{a("close")},ue=()=>{r.value=[],o.value="",i.value=null,c.value=[],A.value=""},ne=async()=>{if(!T.value){console.warn("Cannot upload: validation failed or missing file type");return}s.value=!0;try{const Y=i.value.validFiles.map(le=>le.file);if(Y.length===0)throw new Error("No valid files to upload");console.log("Compressing images before upload..."),d.value=0,f.value="Starting compression...";const te=await j(Y,(le,re)=>{d.value=le,f.value=re}),L=new FormData;te.forEach(le=>{L.append("files",le)});const N={tag:o.value},q=n.consultation?.id,Q=q&&q!==0&&q!=="0",ee=n.procedure?.id,z=ee&&ee!==0&&ee!=="0";if(Q)N.consultationId=q;else if(z)N.treatmentPlanId=ee;else if(n.patient?.id)N.patientId=n.patient.id;else throw new Error("Either consultation, procedure, or patient ID is required");console.log("Uploading files:",{fileCount:te.length,totalSize:te.reduce((le,re)=>le+re.size,0),tag:o.value,params:N});const X=await dt.post("/upload/",L,{params:N,headers:{"Content-Type":"multipart/form-data"}});console.log("Upload successful:",X.data)}catch(Y){console.error("Upload failed:",Y)}finally{s.value=!1,d.value=null,f.value="",J()}};return(Y,te)=>{const L=I("v-chip"),N=I("v-card-title"),q=I("v-col"),Q=I("v-icon"),ee=I("v-btn"),z=I("v-tooltip"),X=I("v-row"),le=I("v-card"),re=I("v-file-input"),de=I("v-alert"),G=I("v-expansion-panel-title"),Z=I("v-list-item-title"),ce=I("v-list-item-subtitle"),Se=I("v-list-item"),Pe=I("v-list"),ye=I("v-expansion-panel-text"),Ce=I("v-expansion-panel"),_e=I("v-expansion-panels"),De=I("v-select"),xe=I("v-divider"),Te=I("v-progress-linear");return U(),pe(le,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[l(X,{"no-gutters":""},{default:u(()=>[l(q,{cols:"12"},{default:u(()=>[l(le,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(X,{"no-gutters":""},{default:u(()=>[l(q,{cols:"10"},{default:u(()=>[l(N,{class:"pa-0 pl-2"},{default:u(()=>[te[3]||(te[3]=M(" Medical File Upload ",-1)),l(L,{size:"small",color:"info",class:"ml-2"},{default:u(()=>[M(" Max: "+K($e(g).maxFiles)+" files, "+K($e(g).maxFileSize),1)]),_:1})]),_:1})]),_:1}),l(q,{cols:"2",class:"d-flex justify-end align-center"},{default:u(()=>[l(z,{"max-width":"400"},{activator:u(({props:Me})=>[l(ee,Ue({icon:"",size:"x-small"},Me,{class:"mr-1"}),{default:u(()=>[l(Q,null,{default:u(()=>[...te[4]||(te[4]=[M("mdi-help-circle-outline",-1)])]),_:1})]),_:1},16)]),default:u(()=>[v("div",gBe,[te[5]||(te[5]=v("strong",null,"File Limits:",-1)),te[6]||(te[6]=v("br",null,null,-1)),M("  Maximum "+K($e(g).maxFiles)+" files per upload",1),te[7]||(te[7]=v("br",null,null,-1)),M("  Maximum "+K($e(g).maxFileSize)+" per file",1),te[8]||(te[8]=v("br",null,null,-1)),te[9]||(te[9]=v("br",null,null,-1)),te[10]||(te[10]=v("strong",null,"Accepted Types:",-1)),te[11]||(te[11]=v("br",null,null,-1)),M("  Images: "+K($e(w).images),1),te[12]||(te[12]=v("br",null,null,-1)),M("  Documents: "+K($e(w).documents),1),te[13]||(te[13]=v("br",null,null,-1)),M("  Videos: "+K($e(w).videos),1)])]),_:1}),l(ee,{icon:"",size:"x-small",onClick:J,class:"btn-hover-base"},{default:u(()=>[l(Q,null,{default:u(()=>[...te[14]||(te[14]=[v("img",{src:ou,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(X,{"no-gutters":""},{default:u(()=>[l(q,{cols:"12"},{default:u(()=>[l(le,{flat:"",class:"d-flex justify-center ma-2",color:"surfaceContainer"},{default:u(()=>[l(X,{"no-gutters":""},{default:u(()=>[l(q,{cols:"12"},{default:u(()=>[l(re,{modelValue:r.value,"onUpdate:modelValue":[te[0]||(te[0]=Me=>r.value=Me),E],loading:s.value,density:"comfortable",variant:"solo-inverted",counter:"",clearable:"",accept:"image/*,application/*,video/*",label:"Select medical files",chips:"",multiple:"",error:!!A.value,"error-messages":A.value},{selection:u(({fileNames:Me,index:et})=>[et<2?(U(),pe(L,{key:0,color:"primary",size:"small",class:"me-2"},{default:u(()=>[M(K(Me[et]),1)]),_:2},1024)):et===2?(U(),me("span",yBe," +"+K(r.value.length-2)+" File(s) ",1)):ge("",!0)]),_:1},8,["modelValue","loading","error","error-messages"])]),_:1}),c.value.length>0?(U(),pe(q,{key:0,cols:"12"},{default:u(()=>[v("div",_Be,[(U(!0),me(We,null,qt(c.value,(Me,et)=>(U(),pe(de,{key:et,type:Me.type,title:Me.title,text:Me.message,class:"mb-2",density:"compact",variant:"tonal"},null,8,["type","title","text"]))),128))])]),_:1})):ge("",!0),i.value&&i.value.validFiles.length>0?(U(),pe(q,{key:1,cols:"12"},{default:u(()=>[l(_e,{variant:"accordion",class:"mb-3"},{default:u(()=>[l(Ce,null,{default:u(()=>[l(G,null,{default:u(()=>[v("span",wBe,"  "+K(i.value.summary.validFiles)+" Valid Files ("+K(i.value.summary.formattedTotalSize)+") ",1)]),_:1}),l(ye,null,{default:u(()=>[l(Pe,{dense:"",class:"py-0"},{default:u(()=>[(U(!0),me(We,null,qt(i.value.validFiles,Me=>(U(),pe(Se,{key:Me.index,class:"px-0 py-1"},{prepend:u(()=>[l(Q,{size:"small",color:D(Me.category)},{default:u(()=>[M(K(C(Me.category)),1)]),_:2},1032,["color"])]),default:u(()=>[l(Z,{class:"text-caption"},{default:u(()=>[M(K(Me.file.name),1)]),_:2},1024),l(ce,{class:"text-caption"},{default:u(()=>[M(K(Me.formattedSize)+"  "+K(Me.category),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):ge("",!0),l(q,{cols:"12"},{default:u(()=>[l(De,{modelValue:o.value,"onUpdate:modelValue":te[1]||(te[1]=Me=>o.value=Me),density:"comfortable",variant:"solo-inverted",items:b,label:"Select type",disabled:!x.value},null,8,["modelValue","disabled"])]),_:1}),x.value&&F.value?(U(),pe(q,{key:2,cols:"12"},{default:u(()=>[l(_e,{variant:"accordion",class:"mb-3"},{default:u(()=>[l(Ce,null,{default:u(()=>[l(G,null,{default:u(()=>[v("span",bBe,[te[15]||(te[15]=M("  Image Compression Settings ",-1)),l(L,{size:"x-small",color:"info",class:"ml-2"},{default:u(()=>[M(K(m.value),1)]),_:1})])]),_:1}),l(ye,null,{default:u(()=>[l(X,{"no-gutters":""},{default:u(()=>[l(q,{cols:"12",class:"mb-3"},{default:u(()=>[l(De,{modelValue:m.value,"onUpdate:modelValue":te[2]||(te[2]=Me=>m.value=Me),items:p,label:"Compression Mode",density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1}),l(q,{cols:"12",class:"mb-2"},{default:u(()=>[v("div",xBe," Estimated compression: "+K(k.value),1)]),_:1}),h.value.length>0?(U(),pe(q,{key:0,cols:"12"},{default:u(()=>[l(Pe,{dense:"",class:"py-0"},{default:u(()=>[(U(!0),me(We,null,qt(h.value,Me=>(U(),pe(Se,{key:Me.name,class:"px-0 py-1"},{default:u(()=>[l(Z,{class:"text-caption"},{default:u(()=>[M(K(Me.name),1)]),_:2},1024),l(ce,{class:"text-caption"},{default:u(()=>[M(K(Me.originalSize)+"  "+K(Me.estimatedSize)+" ("+K(Me.reduction)+"% reduction) ",1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):ge("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):ge("",!0),l(q,{cols:"12"},{default:u(()=>[l(xe,{class:"mb-2"}),v("div",CBe,[l(ee,{variant:"outlined",onClick:ue,disabled:!r.value||r.value.length===0,class:"btn-hover-base mr-4"},{default:u(()=>[...te[16]||(te[16]=[M(" Clear ",-1)])]),_:1},8,["disabled"]),l(ee,{variant:"elevated",color:"primary",onClick:ne,loading:s.value,disabled:!T.value,class:"btn-hover-enhanced ml-4"},{default:u(()=>[l(Q,{start:""},{default:u(()=>[...te[17]||(te[17]=[M("mdi-upload",-1)])]),_:1}),M(" Upload "+K(i.value?.summary?.validFiles||0)+" Files ",1)]),_:1},8,["loading","disabled"])])]),_:1}),d.value!==null&&d.value<100?(U(),pe(q,{key:3,cols:"12"},{default:u(()=>[l(Te,{"model-value":d.value,color:"info",class:"mt-3"},null,8,["model-value"]),v("div",SBe,K(f.value),1)]),_:1})):ge("",!0),s.value?(U(),pe(q,{key:4,cols:"12"},{default:u(()=>[l(Te,{indeterminate:"",color:"primary",class:"mt-3"}),te[18]||(te[18]=v("div",{class:"text-center text-caption mt-2 text-primary"}," Uploading medical files... ",-1))]),_:1})):ge("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},BT=()=>typeof window<"u"&&window.process&&window.process.type==="renderer",kT=async()=>{if(BT())try{const{ipcRenderer:e}=window.require("electron");return await e.invoke("get-local-ip")}catch(e){return console.error("Failed to get local IP via IPC:",e),"localhost"}else try{const e=window.location.hostname,n=`${Tr(e).api.https}/network-info`,r=await(await fetch(n)).json();return r.success&&r.localIP?r.localIP:(console.warn("API returned unsuccessful response:",r),"localhost")}catch(e){return console.error("Failed to get local IP from API:",e),"localhost"}},IC=async e=>{try{const t=e.replace("/api","/health"),n=await fetch(t,{method:"GET",headers:{Accept:"application/json"},timeout:5e3});return console.log(` ${t} is accessible (status: ${n.status})`),n.ok}catch(t){return console.log(` ${e} not accessible:`,t.message),!1}},WH=async()=>{if(BT())try{const e=await kT(),t=Tr(e);let n=t.api.https;if(!await IC(n)&&(console.log(" HTTPS not accessible, trying HTTP fallback..."),n=t.api.http,!await IC(n))){console.log(" Network IP not accessible, falling back to localhost...");const s=Tr("localhost");n=s.api.https,await IC(n)||(console.log(" Localhost HTTPS not accessible, trying localhost HTTP..."),n=s.api.http)}return $v(n),console.log(` API initialized with: ${n}`),n}catch(e){console.error("Failed to initialize network API:",e);const t=Tr("localhost").api.https;return $v(t),t}else return console.log("[network] Web mode: Skipping network API initialization - base URL already set by environment"),null},Mw=async()=>{if(BT())try{const e=await kT();return Tr(e).https}catch(e){return console.error("Failed to get current server URL:",e),Tr("localhost").https}else try{const e=window.location.hostname,t=Tr(e),n=`${t.api.https}/network-info`,r=await(await fetch(n)).json();return r.success&&r.serverURL?r.serverURL:(console.warn("API returned unsuccessful response for server URL:",r),t.https)}catch(e){return console.error("Failed to get server URL from API:",e),Tr(window.location.hostname).https}},EBe=async(e,t="/api/upload/file")=>{try{return`${await Mw()}${t}?path=${encodeURIComponent(e)}`}catch(n){return console.error("Failed to create file URL, using localhost fallback:",n),`${Tr("localhost").https}${t}?path=${encodeURIComponent(e)}`}},TT=async(e,t="/api/upload/file")=>{try{const n=await Mw();return e.map(a=>`${n}${t}?path=${encodeURIComponent(a)}`)}catch(n){console.error("Failed to create file URLs, using localhost fallback:",n);const a=Tr("localhost").https;return e.map(r=>`${a}${t}?path=${encodeURIComponent(r)}`)}},jH=async()=>{try{return await Mw()}catch(e){return console.error("Failed to get server URL, using localhost:",e),Tr("localhost").https}},fR=Object.freeze(Object.defineProperty({__proto__:null,createFileURL:EBe,createFileURLBatch:TT,createServerURLRef:jH,getCurrentServerURL:Mw,getLocalIP:kT,getServerURLs:Tr,initializeNetworkAPI:WH},Symbol.toStringTag,{value:"Module"})),BBe={key:0,style:{height:"70vh"}},kBe={key:0,style:{height:"100%",width:"100%",position:"relative"},class:"bg-grey-lighten-4"},TBe={class:"d-flex align-center justify-center fill-height"},IBe={class:"d-flex align-center justify-center fill-height"},FBe={class:"image-controls"},PBe=["src"],DBe={key:2,style:{height:"100%",width:"100%",position:"relative",background:"#f5f5f5"}},UBe={class:"d-flex flex-column align-center justify-center",style:{height:"100%"}},RBe={class:"mt-4"},NBe={class:"mt-6"},VBe={key:3,class:"d-flex flex-column align-center justify-center",style:{height:"100%"}},LBe={class:"mt-4 text-subtitle-1"},MBe={class:"text-caption text-grey"},OBe={class:"mt-4",style:{width:"100%",height:"60%"}},HBe=["src"],$Be={key:4,class:"d-flex flex-column align-center justify-center",style:{height:"100%"}},QBe={class:"mt-4 text-subtitle-1"},GBe={class:"text-caption text-grey"},zBe={__name:"media-viewer",props:{isOpen:{type:Boolean,required:!0},mediaItems:{type:Array,required:!0},selectedMedia:{type:Object,default:null},currentIndex:{type:Number,default:0}},emits:["close","navigate"],setup(e,{emit:t}){const n=V(!1);let a=null;try{window.require&&(a=window.require("electron").ipcRenderer,n.value=!0)}catch{console.log("Not running in Electron environment")}const r=e,s=t,o=V(!1),i=V(0),c=V(1),A=V(0),d=V(0),f=V(!1),m=V({x:0,y:0}),h=V(!1);let p;try{p=WD()}catch(L){console.error("Failed to get server base URL from environment, using localhost fallback:",L),p=Tr("localhost").http}const y=V(p);(async()=>{try{const L=WD();y.value=L}catch(L){console.error("Failed to get server URL from environment, trying network utility:",L);try{const N=await jH();y.value=N}catch(N){console.error("Failed to get server URL, using localhost fallback:",N),y.value=Tr("localhost").http}}})();const w=L=>`${y.value}/api/upload/file?path=${encodeURIComponent(L)}`,b=L=>{if(!L)return"Unknown File";const N=L.split("/");return N[N.length-1]||"Unknown File"},x=L=>{i.value=(i.value+L)%360,i.value<0&&(i.value+=360)},T=()=>{i.value=0},F=()=>{const L=Math.min(c.value*1.2,5);c.value=L},k=()=>{const L=Math.max(c.value/1.2,.2);c.value=L,E()},S=()=>{c.value=1,A.value=0,d.value=0},E=()=>{const L=Math.max(0,(c.value-1)*200);A.value=Math.max(-L,Math.min(L,A.value)),d.value=Math.max(-L,Math.min(L,d.value))},C=L=>{c.value>1&&(f.value=!0,m.value={x:L.clientX,y:L.clientY},L.preventDefault())},D=L=>{if(f.value&&c.value>1){const N=L.clientX-m.value.x,q=L.clientY-m.value.y;A.value+=N/c.value,d.value+=q/c.value,E(),m.value={x:L.clientX,y:L.clientY},L.preventDefault()}},P=()=>{f.value=!1},O=L=>{L.deltaY<0?F():k()},H=async()=>{if(!n.value||!a){console.warn("Copy feature only available in Electron");return}if(!r.selectedMedia||!r.selectedMedia.type.startsWith("image/")){console.warn("Copy feature only available for images");return}try{h.value=!0;const L=await a.invoke("copy-image-to-clipboard",r.selectedMedia.path);if(L.success)console.log("Image copied to clipboard successfully");else throw new Error(L.error||"Failed to copy image")}catch(L){console.error("Failed to copy image to clipboard:",L)}finally{h.value=!1}},ie=()=>{i.value=0,c.value=1,A.value=0,d.value=0,f.value=!1,h.value=!1},Ae=L=>{let N;L==="next"?N=Math.min(r.currentIndex+1,r.mediaItems.length-1):N=Math.max(r.currentIndex-1,0),N!==r.currentIndex&&(ie(),s("navigate",N))},j=L=>{if(r.isOpen)switch(L.key){case"ArrowLeft":L.preventDefault(),Ae("prev");break;case"ArrowRight":L.preventDefault(),Ae("next");break;case"Escape":L.preventDefault(),te();break}},J=async L=>{const N=w(L.path);if(window.require)try{const{ipcRenderer:q}=window.require("electron"),Q=await q.invoke("open-external",N);if(Q.success){console.log("Successfully opened PDF with system default application");return}else console.error("Failed to open with system app:",Q.error)}catch(q){console.error("Failed to use Electron IPC:",q)}ue(N)},ue=L=>{try{if(!window.open(L,"_blank","noopener,noreferrer")){console.log("Popup blocked, trying alternative approach");const q=document.createElement("a");q.href=L,q.target="_blank",q.rel="noopener noreferrer",document.body.appendChild(q),q.click(),document.body.removeChild(q)}}catch(N){console.error("Failed to open URL:",N),ne(L)}},ne=async L=>{try{await navigator.clipboard.writeText(L),console.log("URL copied to clipboard:",L),alert("Unable to open PDF. URL copied to clipboard - paste it in your browser.")}catch(N){console.error("Failed to copy to clipboard:",N),prompt("Copy this URL to view the PDF:",L)}},Y=L=>{const N=w(L.path),q=document.createElement("a");q.href=N,q.download=b(L.path)||"download",document.body.appendChild(q),q.click(),document.body.removeChild(q)},te=()=>{o.value=!1,s("close")};return(L,N)=>{const q=I("v-chip"),Q=I("v-col"),ee=I("v-icon"),z=I("v-btn"),X=I("v-tooltip"),le=I("v-row"),re=I("v-card"),de=I("v-progress-circular"),G=I("v-alert"),Z=I("v-img"),ce=I("v-card-text");return U(),pe(re,{onKeydown:j},{default:u(()=>[l(le,{"no-gutters":""},{default:u(()=>[l(Q,{cols:"12"},{default:u(()=>[l(re,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(le,{"no-gutters":""},{default:u(()=>[l(Q,{cols:"8",class:"d-flex align-center justify-start"},{default:u(()=>[N[13]||(N[13]=v("span",null,"Media Viewer",-1)),l(q,{class:"ml-2",size:"small",variant:"outlined"},{default:u(()=>[M(K(e.currentIndex+1)+" of "+K(e.mediaItems.length),1)]),_:1}),e.selectedMedia?.tag?(U(),pe(q,{key:0,class:"ml-2",size:"small",color:"primary"},{default:u(()=>[M(K(e.selectedMedia.tag==="before_image"?"Before":e.selectedMedia.tag==="after_image"?"After":e.selectedMedia.tag==="report"?"Report":e.selectedMedia.tag==="prescription"?"Rx":e.selectedMedia.tag==="consent_letter"?"Consent":e.selectedMedia.tag),1)]),_:1})):ge("",!0)]),_:1}),l(Q,{cols:"4",class:"d-flex align-center justify-end"},{default:u(()=>[l(X,{text:"Previous ()",location:"bottom"},{activator:u(({props:Se})=>[l(z,Ue({icon:"",variant:"text",disabled:e.currentIndex===0,onClick:N[0]||(N[0]=Pe=>Ae("prev")),class:"mr-1"},Se),{default:u(()=>[l(ee,null,{default:u(()=>[...N[14]||(N[14]=[M("mdi-chevron-left",-1)])]),_:1})]),_:1},16,["disabled"])]),_:1}),l(X,{text:"Next ()",location:"bottom"},{activator:u(({props:Se})=>[l(z,Ue({icon:"",variant:"text",disabled:e.currentIndex===e.mediaItems.length-1,onClick:N[1]||(N[1]=Pe=>Ae("next")),class:"mr-2"},Se),{default:u(()=>[l(ee,null,{default:u(()=>[...N[15]||(N[15]=[M("mdi-chevron-right",-1)])]),_:1})]),_:1},16,["disabled"])]),_:1}),l(X,{text:"Close (Esc)",location:"bottom"},{activator:u(({props:Se})=>[l(z,Ue({icon:"",size:"x-small",onClick:te},Se),{default:u(()=>[l(ee,null,{default:u(()=>[...N[16]||(N[16]=[v("img",{src:ou,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1},16)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(ce,{class:"pa-0"},{default:u(()=>[e.selectedMedia?(U(),me("div",BBe,[e.selectedMedia.type.startsWith("image/")?(U(),me("div",kBe,[v("div",{style:Rt([{height:"100%",width:"100%",overflow:"hidden",cursor:"grab"},{cursor:f.value?"grabbing":c.value>1?"grab":"default"}]),onMousedown:C,onMousemove:D,onMouseup:P,onMouseleave:P,onWheel:pn(O,["prevent"])},[e.selectedMedia.path?(U(),pe(Z,{key:0,src:w(e.selectedMedia.path),height:"100%",width:"100%",contain:"",style:Rt({transform:`rotate(${i.value}deg) scale(${c.value}) translate(${A.value}px, ${d.value}px)`,transition:f.value?"none":"transform 0.3s ease",transformOrigin:"center center"})},{placeholder:u(()=>[v("div",TBe,[l(de,{indeterminate:"",color:"primary"})])]),error:u(()=>[v("div",IBe,[l(G,{type:"error",variant:"tonal"},{default:u(()=>[...N[17]||(N[17]=[M(" Failed to load image ",-1)])]),_:1})])]),_:1},8,["src","style"])):ge("",!0)],36),v("div",FBe,[l(X,{text:"Copy Image",location:"top"},{activator:u(({props:Se})=>[l(z,Ue({icon:"",size:"small",variant:"elevated",onClick:N[2]||(N[2]=Pe=>H())},Se,{class:"mr-2",loading:h.value,disabled:h.value}),{default:u(()=>[l(ee,null,{default:u(()=>[...N[18]||(N[18]=[M("mdi-content-copy",-1)])]),_:1})]),_:1},16,["loading","disabled"])]),_:1}),l(X,{text:"Zoom In",location:"top"},{activator:u(({props:Se})=>[l(z,Ue({icon:"",size:"small",variant:"elevated",onClick:N[3]||(N[3]=Pe=>F())},Se,{class:"mr-2",disabled:c.value>=5}),{default:u(()=>[l(ee,null,{default:u(()=>[...N[19]||(N[19]=[M("mdi-magnify-plus-outline",-1)])]),_:1})]),_:1},16,["disabled"])]),_:1}),l(X,{text:"Zoom Out",location:"top"},{activator:u(({props:Se})=>[l(z,Ue({icon:"",size:"small",variant:"elevated",onClick:N[4]||(N[4]=Pe=>k())},Se,{class:"mr-2",disabled:c.value<=.2}),{default:u(()=>[l(ee,null,{default:u(()=>[...N[20]||(N[20]=[M("mdi-magnify-minus-outline",-1)])]),_:1})]),_:1},16,["disabled"])]),_:1}),l(X,{text:"Reset Zoom",location:"top"},{activator:u(({props:Se})=>[l(z,Ue({icon:"",size:"small",variant:"elevated",onClick:N[5]||(N[5]=Pe=>S())},Se,{class:"mr-2",disabled:c.value===1&&A.value===0&&d.value===0}),{default:u(()=>[l(ee,null,{default:u(()=>[...N[21]||(N[21]=[M("mdi-fit-to-page-outline",-1)])]),_:1})]),_:1},16,["disabled"])]),_:1}),l(X,{text:"Rotate Left",location:"top"},{activator:u(({props:Se})=>[l(z,Ue({icon:"",size:"small",variant:"elevated",onClick:N[6]||(N[6]=Pe=>x(-90))},Se,{class:"mr-2"}),{default:u(()=>[l(ee,null,{default:u(()=>[...N[22]||(N[22]=[M("mdi-rotate-left",-1)])]),_:1})]),_:1},16)]),_:1}),l(X,{text:"Rotate Right",location:"top"},{activator:u(({props:Se})=>[l(z,Ue({icon:"",size:"small",variant:"elevated",onClick:N[7]||(N[7]=Pe=>x(90))},Se,{class:"mr-2"}),{default:u(()=>[l(ee,null,{default:u(()=>[...N[23]||(N[23]=[M("mdi-rotate-right",-1)])]),_:1})]),_:1},16)]),_:1}),l(X,{text:"Reset Rotation",location:"top"},{activator:u(({props:Se})=>[l(z,Ue({icon:"",size:"small",variant:"elevated",onClick:N[8]||(N[8]=Pe=>T())},Se,{disabled:i.value===0}),{default:u(()=>[l(ee,null,{default:u(()=>[...N[24]||(N[24]=[M("mdi-backup-restore",-1)])]),_:1})]),_:1},16,["disabled"])]),_:1})])])):e.selectedMedia.type.startsWith("video/")?(U(),me("video",{key:1,src:w(e.selectedMedia.path),controls:"",style:{width:"100%",height:"100%","object-fit":"contain"}},null,8,PBe)):e.selectedMedia.type==="application/pdf"?(U(),me("div",DBe,[v("div",UBe,[l(ee,{size:"80",color:"primary"},{default:u(()=>[...N[25]||(N[25]=[M("mdi-file-pdf-box",-1)])]),_:1}),v("h3",RBe,K(b(e.selectedMedia.path)),1),N[28]||(N[28]=v("p",{class:"text-caption text-grey mt-2"},"PDF Document",-1)),N[29]||(N[29]=v("p",{class:"text-caption text-grey"},"Click to open/download this PDF",-1)),v("div",NBe,[l(z,{color:"primary",variant:"elevated",size:"large",onClick:N[9]||(N[9]=Se=>J(e.selectedMedia)),class:"px-8"},{default:u(()=>[l(ee,{left:""},{default:u(()=>[...N[26]||(N[26]=[M("mdi-file-pdf-box",-1)])]),_:1}),N[27]||(N[27]=M(" Open PDF ",-1))]),_:1})])])])):e.selectedMedia.type.startsWith("application/")?(U(),me("div",VBe,[l(ee,{size:"64",color:"grey"},{default:u(()=>[...N[30]||(N[30]=[M("mdi-file-document",-1)])]),_:1}),v("p",LBe,K(b(e.selectedMedia.path)),1),v("p",MBe,"File type: "+K(e.selectedMedia.type),1),v("div",OBe,[v("iframe",{src:w(e.selectedMedia.path),style:{width:"100%",height:"100%",border:"1px solid #ccc"},title:"Document Viewer",onError:N[10]||(N[10]=Se=>o.value=!0)},null,40,HBe)]),l(z,{color:"primary",variant:"outlined",class:"mt-4",onClick:N[11]||(N[11]=Se=>Y(e.selectedMedia))},{default:u(()=>[l(ee,{left:""},{default:u(()=>[...N[31]||(N[31]=[M("mdi-download",-1)])]),_:1}),N[32]||(N[32]=M(" Download File ",-1))]),_:1})])):(U(),me("div",$Be,[l(ee,{size:"64",color:"grey"},{default:u(()=>[...N[33]||(N[33]=[M("mdi-file",-1)])]),_:1}),v("p",QBe,K(b(e.selectedMedia.path)),1),v("p",GBe,"File type: "+K(e.selectedMedia.type),1),l(z,{color:"primary",variant:"outlined",class:"mt-4",onClick:N[12]||(N[12]=Se=>Y(e.selectedMedia))},{default:u(()=>[l(ee,{left:""},{default:u(()=>[...N[34]||(N[34]=[M("mdi-download",-1)])]),_:1}),N[35]||(N[35]=M(" Download File ",-1))]),_:1})]))])):ge("",!0)]),_:1})]),_:1})}}},mR=Xt(zBe,[["__scopeId","data-v-d2c20c46"]]),KBe={key:0,class:"text-caption text-medium-emphasis ml-2"},WBe={key:0,class:"d-flex justify-center align-center",style:{height:"400px"}},jBe={key:1,class:"text-center pa-4"},qBe={class:"text-error"},YBe={key:2},XBe={class:"images-column"},JBe={class:"column-header pa-3 bg-surface-variant"},ZBe={key:0,class:"images-scroll"},eke={class:"pa-2"},tke={class:"text-body-2 font-weight-bold"},nke={class:"d-flex align-center justify-center fill-height"},ake={class:"d-flex align-center justify-center fill-height"},rke={key:1,class:"empty-state pa-4 text-center"},ske={class:"images-column"},oke={class:"column-header pa-3 bg-surface-variant"},ike={key:0,class:"images-scroll"},lke={class:"pa-2"},uke={class:"text-body-2 font-weight-bold"},cke={class:"d-flex align-center justify-center fill-height"},dke={class:"d-flex align-center justify-center fill-height"},Ake={key:1,class:"empty-state pa-4 text-center"},fke={__name:"patient-images-modal",props:{isOpen:{type:Boolean,required:!0},patientId:{type:Number,required:!0},doctorId:{type:Number,required:!1}},emits:["close"],setup(e,{emit:t}){const n=e,a=t,r=V(!1),s=V(null),o=V(null),i=V([]),c=ae(()=>i.value.filter(h=>h.tag==="before_image").sort((h,p)=>p.createdAt-h.createdAt)),A=ae(()=>i.value.filter(h=>h.tag==="after_image").sort((h,p)=>p.createdAt-h.createdAt)),d=h=>{if(!h)return"";const p=new Date(h*1e3),y=new Date,g=new Date(p.getFullYear(),p.getMonth(),p.getDate()),b=new Date(y.getFullYear(),y.getMonth(),y.getDate()).getTime()-g.getTime(),x=Math.floor(b/(1e3*3600*24)),T=p.toLocaleDateString("en-US",{timeZone:"Asia/Kolkata",year:"numeric",month:"short",day:"numeric"});let F;return x===0?F="Today":x===1?F="1 day ago":F=`${x} days ago`,`${T}  ${F}`},f=async()=>{if(n.patientId){r.value=!0,s.value=null;try{const h=await pfe(n.patientId,"both",n.doctorId);if(h.success){o.value=h.data.patient;const p=h.data.images.map(g=>g.path),y=await TT(p);i.value=h.data.images.map((g,w)=>({...g,fileUrl:y[w]}))}else s.value=h.error}catch(h){s.value=h.message||"Failed to fetch patient images"}finally{r.value=!1}}},m=()=>{a("close")};return un(()=>{n.patientId&&f()}),Ke(()=>n.isOpen,h=>{h&&n.patientId&&f()}),Ke(()=>n.patientId,h=>{h&&n.isOpen&&f()}),(h,p)=>{const y=I("v-card-title"),g=I("v-col"),w=I("v-icon"),b=I("v-btn"),x=I("v-row"),T=I("v-card"),F=I("v-progress-circular"),k=I("v-chip"),S=I("v-card-subtitle"),E=I("v-alert"),C=I("v-img"),D=I("v-card-text");return U(),pe(T,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[l(x,{"no-gutters":""},{default:u(()=>[l(g,{cols:"12"},{default:u(()=>[l(T,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(x,{"no-gutters":""},{default:u(()=>[l(g,{cols:"11"},{default:u(()=>[l(y,{class:"pa-0 pl-2"},{default:u(()=>[p[0]||(p[0]=M(" Patient Images History ",-1)),o.value?(U(),me("span",KBe," - "+K(o.value.name),1)):ge("",!0)]),_:1})]),_:1}),l(g,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(b,{icon:"",size:"x-small",onClick:m},{default:u(()=>[l(w,null,{default:u(()=>[...p[1]||(p[1]=[v("img",{src:ou,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(x,{"no-gutters":""},{default:u(()=>[l(g,{cols:"12"},{default:u(()=>[l(T,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[r.value?(U(),me("div",WBe,[l(F,{indeterminate:"",color:"primary",size:"64"})])):s.value?(U(),me("div",jBe,[l(w,{color:"error",size:"48",class:"mb-2"},{default:u(()=>[...p[2]||(p[2]=[M("mdi-alert-circle",-1)])]),_:1}),v("p",qBe,K(s.value),1),l(b,{onClick:f,color:"primary",variant:"outlined"},{default:u(()=>[...p[3]||(p[3]=[M(" Try Again ",-1)])]),_:1})])):(U(),me("div",YBe,[l(D,{class:"pa-0",style:{height:"75vh"}},{default:u(()=>[l(x,{"no-gutters":"",class:"fill-height"},{default:u(()=>[l(g,{cols:"6",class:"border-e"},{default:u(()=>[v("div",XBe,[v("div",JBe,[l(w,{icon:"mdi-camera-outline",class:"me-2",color:"success"}),p[4]||(p[4]=v("span",{class:"text-subtitle-2 font-weight-bold"},"Before Images",-1)),l(k,{size:"small",class:"ms-2"},{default:u(()=>[M(K(c.value.length),1)]),_:1})]),c.value.length>0?(U(),me("div",ZBe,[v("div",eke,[l(x,{"no-gutters":""},{default:u(()=>[(U(!0),me(We,null,qt(c.value,(P,O)=>(U(),pe(g,{key:`before-${O}`,cols:"12",class:"mb-3"},{default:u(()=>[l(T,{class:"image-card",elevation:"2"},{default:u(()=>[l(S,{class:"pa-2"},{default:u(()=>[v("div",tke,[l(w,{icon:"mdi-calendar",size:"small",class:"me-1"}),M(" "+K(d(P.createdAt)),1)])]),_:2},1024),P.fileUrl?(U(),pe(C,{key:0,src:P.fileUrl,"aspect-ratio":"1",cover:"",loading:"lazy",transition:!1,class:"image-thumbnail"},{placeholder:u(()=>[v("div",nke,[l(F,{indeterminate:"",size:"24"})])]),error:u(()=>[v("div",ake,[l(E,{type:"error",variant:"tonal"},{default:u(()=>[...p[5]||(p[5]=[M(" Failed to load image ",-1)])]),_:1})])]),_:1},8,["src"])):ge("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1})])])):(U(),me("div",rke,[l(w,{icon:"mdi-camera-off",size:"48",class:"text-medium-emphasis mb-2"}),p[6]||(p[6]=v("p",{class:"text-body-2 text-medium-emphasis"},"No before images found",-1))]))])]),_:1}),l(g,{cols:"6"},{default:u(()=>[v("div",ske,[v("div",oke,[l(w,{icon:"mdi-camera-enhance",class:"me-2",color:"info"}),p[7]||(p[7]=v("span",{class:"text-subtitle-2 font-weight-bold"},"After Images",-1)),l(k,{size:"small",class:"ms-2"},{default:u(()=>[M(K(A.value.length),1)]),_:1})]),A.value.length>0?(U(),me("div",ike,[v("div",lke,[l(x,{"no-gutters":""},{default:u(()=>[(U(!0),me(We,null,qt(A.value,(P,O)=>(U(),pe(g,{key:`after-${O}`,cols:"12",class:"mb-3"},{default:u(()=>[l(T,{class:"image-card",elevation:"2"},{default:u(()=>[l(S,{class:"pa-2"},{default:u(()=>[v("div",uke,[l(w,{icon:"mdi-calendar",size:"small",class:"me-1"}),M(" "+K(d(P.createdAt)),1)])]),_:2},1024),P.fileUrl?(U(),pe(C,{key:0,src:P.fileUrl,"aspect-ratio":"1",cover:"",loading:"lazy",transition:!1,class:"image-thumbnail"},{placeholder:u(()=>[v("div",cke,[l(F,{indeterminate:"",size:"24"})])]),error:u(()=>[v("div",dke,[l(E,{type:"error",variant:"tonal"},{default:u(()=>[...p[8]||(p[8]=[M(" Failed to load image ",-1)])]),_:1})])]),_:1},8,["src"])):ge("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1})])])):(U(),me("div",Ake,[l(w,{icon:"mdi-camera-off",size:"48",class:"text-medium-emphasis mb-2"}),p[9]||(p[9]=v("p",{class:"text-body-2 text-medium-emphasis"},"No after images found",-1))]))])]),_:1})]),_:1})]),_:1})]))]),_:1})]),_:1})]),_:1})]),_:1})}}},vR=Xt(fke,[["__scopeId","data-v-8c82235c"]]),mke={__name:"delete-upload",props:{deleteSelectedUpload:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=e,a=t,r=V(n.deleteSelectedUpload),s=()=>{a("close")},o=async i=>{try{const c=await wfe(i.id);c.success?console.log("Upload deleted successfully"):console.error("Error deleting upload:",c.error)}catch(c){console.error("Error deleting upload:",c)}s()};return(i,c)=>{const A=I("v-card-title"),d=I("v-col"),f=I("v-icon"),m=I("v-btn"),h=I("v-row"),p=I("v-card"),y=I("v-card-text"),g=I("v-divider");return U(),pe(p,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(p,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"11"},{default:u(()=>[l(A,{class:"pa-0 pl-2"},{default:u(()=>[...c[1]||(c[1]=[M("Confirm Upload Delete",-1)])]),_:1})]),_:1}),l(d,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(m,{icon:"",size:"x-small",onClick:s},{default:u(()=>[l(f,null,{default:u(()=>[...c[2]||(c[2]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(p,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(y,{class:"text-left"},{default:u(()=>[...c[3]||(c[3]=[M(" Are you sure you want to delete this uploaded file? ",-1),v("span",{class:"text-red font-weight-bold"}," You will not be able to recover the file once deleted. ",-1)])]),_:1})]),_:1})]),_:1}),l(g),l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"2"}),l(d,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(m,{variant:"outlined",onClick:c[0]||(c[0]=w=>o(r.value))},{default:u(()=>[...c[4]||(c[4]=[M("Yes, Delete File",-1)])]),_:1})]),_:1}),l(d,{cols:"2"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},vke=""+new URL("images/upload_image-CQ-OTL21.png",import.meta.url).href,hke={key:1,class:"d-flex justify-center align-center",style:{height:"100%","min-height":"60vh"}},pke={key:2,class:"date-organized-uploads-vertical"},gke={class:"date-header-vertical mb-3"},yke={class:"upload-count-vertical text-caption text-medium-emphasis ml-2"},_ke={class:"d-flex align-center justify-center fill-height"},wke={class:"d-flex align-center justify-center fill-height"},bke={key:1,class:"no-images-placeholder text-center pa-4"},xke={key:0,class:"documents-list"},Cke={class:"d-flex align-center"},Ske={class:"file-info flex-grow-1 min-width-0"},Eke={class:"file-name text-body-2 font-weight-medium text-truncate"},Bke={class:"file-type text-caption text-medium-emphasis"},kke={key:1,class:"no-documents-placeholder text-center pa-4"},Tke={__name:"upload-files",props:{consultation:{type:Object,required:!1},procedure:{type:Object,required:!1},patient:{type:Object,required:!1}},setup(e){const t=e,n=Rn(),a=V([]),r=V(!1),s=V(t.consultation?Qn.cloneDeep(t.consultation):null),o=V(t.procedure?Qn.cloneDeep(t.procedure):null),i=V(!1),c=V(null),A=V(0),d=V(!1),f=V(null),m=V(null),h=V(!1),p=V(null),y=ae(()=>{if(!a.value||a.value.length===0)return[];const J={};return a.value.forEach(ue=>{const ne=new Date(ue.createdAt*1e3),Y=new Date,te=new Date(Y);te.setDate(te.getDate()-1);let L,N;if(ne.toDateString()===Y.toDateString())L="Today",N="Today";else if(ne.toDateString()===te.toDateString())L="Yesterday",N="Yesterday";else{const q=ne.getFullYear()===Y.getFullYear();L=ne.toLocaleDateString("en-US",{timeZone:"Asia/Kolkata",month:"short",day:"numeric",...q?{}:{year:"numeric"}}),N=ne.toLocaleDateString("en-US",{timeZone:"Asia/Kolkata",year:"numeric",month:"long",day:"numeric"})}J[L]||(J[L]={date:L,fullDate:N,rawDate:ne,items:[]}),J[L].items.push(ue)}),Object.values(J).sort((ue,ne)=>ne.rawDate.getTime()-ue.rawDate.getTime())}),g=J=>{const ue=[],ne=[];return J.forEach(Y=>{Y.type.startsWith("image/")?ue.push(Y):ne.push(Y)}),{images:ue,documents:ne}},w=async()=>{const J=f.value,ue=m.value||n.state.doctorModule?.doctorId;if(!J){console.log("Cannot fetch upload items: Patient ID not available"),a.value=[],r.value=!1;return}if(!ue){console.log("Cannot fetch upload items: Doctor ID not available"),a.value=[],r.value=!1;return}r.value=!0;try{const ne=await gfe(J,ue);if(ne.success&&ne.data.uploads){const Y=ne.data.uploads.map(L=>L.path),te=await TT(Y);a.value=ne.data.uploads.map((L,N)=>({...L,fileUrl:te[N]}))}else console.error("Failed to fetch patient uploads:",ne.error),a.value=[]}catch(ne){console.error("Error fetching upload items:",ne),a.value=[]}finally{r.value=!1}};Ke(()=>t.consultation,async J=>{J?(s.value=Qn.cloneDeep(J),f.value=J.patientId,m.value=J.doctorId,J.patientId&&J.doctorId?await w():(a.value=[],console.log("Patient ID or Doctor ID not available"))):(s.value=null,t.patient?.id&&(f.value=t.patient.id,m.value=m.value||n.state.doctorModule?.doctorId,f.value&&m.value&&await w()))},{immediate:!0}),Ke(()=>t.patient,async J=>{J&&J.id&&(f.value||(f.value=J.id),m.value||(m.value=n.state.doctorModule?.doctorId),f.value&&m.value&&await w())},{immediate:!0}),Ke(()=>t.procedure,async J=>{J?(o.value=Qn.cloneDeep(J),f.value=J.patientId,m.value=J.doctorId,J.patientId&&J.doctorId?await w():(a.value=[],console.log("Patient ID or Doctor ID not available"))):(o.value=null,t.patient?.id?(f.value=t.patient.id,m.value=m.value||n.state.doctorModule?.doctorId,f.value&&m.value&&await w()):a.value=[])},{immediate:!0});const b=V(!1),x=()=>{b.value=!0,console.log("Upload Template")},T=async()=>{b.value=!1,await w()},F=J=>({before_image:"Before",after_image:"After",report:"Report",prescription:"Rx",consent_letter:"Consent"})[J]||"Others",k=J=>({before_image:"mdi-camera-outline",after_image:"mdi-camera-enhance",report:"mdi-file-document-outline",prescription:"mdi-pill",consent_letter:"mdi-file-sign"})[J]||"mdi-file",S=J=>J.includes("pdf")?"mdi-file-pdf-box":J.includes("word")||J.includes("document")?"mdi-file-word-box":J.includes("excel")||J.includes("spreadsheet")?"mdi-file-excel-box":J.includes("powerpoint")||J.includes("presentation")?"mdi-file-powerpoint-box":"mdi-file-document-outline",E=J=>J.includes("pdf")?"red":J.includes("word")||J.includes("document")?"blue":J.includes("excel")||J.includes("spreadsheet")?"green":J.includes("powerpoint")||J.includes("presentation")?"orange":"grey",C=J=>{const ue=J.split("/"),Y=ue[ue.length-1].split(".").pop();return Y?Y.toUpperCase():"FILE"},D=J=>{console.log("Open Media",J);const ue=a.value.findIndex(ne=>ne.path===J.path);A.value=ue,c.value=J,i.value=!0},P=J=>{A.value=J,c.value=a.value[J]},O=()=>{i.value=!1,c.value=null,A.value=0},H=()=>{f.value?d.value=!0:console.warn("Patient information not available")},ie=()=>{d.value=!1},Ae=J=>{if(!J){console.error("No upload provided for deletion");return}h.value=!0,p.value=J,console.log("Selected Upload for Deletion:",J)},j=async()=>{try{h.value=!1,p.value=null,await w()}catch(J){console.error("Error handling upload delete close:",J)}};return(J,ue)=>{const ne=I("v-col"),Y=I("v-btn"),te=I("v-tooltip"),L=I("v-icon"),N=I("v-row"),q=I("v-card"),Q=I("v-progress-circular"),ee=I("v-empty-state"),z=I("v-chip"),X=I("v-divider"),le=I("v-alert"),re=I("v-img"),de=I("v-card-text"),G=I("v-bottom-sheet"),Z=I("v-dialog");return U(),me(We,null,[l(q,{rounded:"0",class:"pa-1 section-header-style",elevation:"0"},{default:u(()=>[l(N,{"no-gutters":""},{default:u(()=>[l(ne,{cols:"6"}),l(ne,{cols:"6",class:"d-flex justify-end align-center py-1"},{default:u(()=>[l(te,{text:"Upload Files"},{activator:u(({props:ce})=>[l(Y,Ue({size:"small"},ce,{onClick:x,class:"mr-1 btn-hover-base"}),{default:u(()=>[...ue[7]||(ue[7]=[M(" Upload ",-1)])]),_:1},16)]),_:1}),l(te,{text:"View Patient Images History"},{activator:u(({props:ce})=>[l(Y,Ue({variant:"outlined",size:"small"},ce,{onClick:H,class:"mr-1 btn-hover-base"}),{default:u(()=>[l(L,{size:"small"},{default:u(()=>[...ue[8]||(ue[8]=[v("img",{src:rBe,alt:"History"},null,-1)])]),_:1})]),_:1},16)]),_:1}),l(te,{text:"Refresh Files"},{activator:u(({props:ce})=>[l(Y,Ue({variant:"outlined",size:"small"},ce,{onClick:w,class:"btn-hover-base"}),{default:u(()=>[l(L,{size:"small"},{default:u(()=>[...ue[9]||(ue[9]=[v("img",{src:Sg,alt:"Refresh"},null,-1)])]),_:1})]),_:1},16)]),_:1})]),_:1})]),_:1})]),_:1}),l(N,{"no-gutters":""},{default:u(()=>[l(ne,{cols:"12",class:"scroll-element mt-1"},{default:u(()=>[r.value?(U(),pe(N,{key:0,"no-gutters":""},{default:u(()=>[l(ne,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%","min-height":"60vh"}},{default:u(()=>[l(Q,{indeterminate:"",color:"primary"})]),_:1})]),_:1})):a.value.length===0?(U(),me("div",hke,[l(ee,{image:$e(vke)},{title:u(()=>[...ue[10]||(ue[10]=[v("div",{class:"text-subtitle-2 mt-8"}," No images or documents found for this patient ",-1)])]),text:u(()=>[...ue[11]||(ue[11]=[v("div",{class:"text-caption"}," All uploaded images and documents for this patient will appear here ",-1)])]),_:1},8,["image"])])):(U(),me("div",pke,[(U(!0),me(We,null,qt(y.value,(ce,Se)=>(U(),me("div",{key:Se,class:"date-section mb-4"},[v("div",gke,[l(z,{color:"primary",variant:"elevated",size:"default",class:"date-chip-vertical","prepend-icon":"mdi-calendar",title:ce.fullDate||ce.date},{default:u(()=>[M(K(ce.date),1)]),_:2},1032,["title"]),v("span",yke,K(ce.items.length)+" upload"+K(ce.items.length!==1?"s":""),1),l(X,{class:"ml-4"})]),l(N,{"no-gutters":"",class:"split-content-row"},{default:u(()=>[l(ne,{cols:"9",class:"images-section pr-2"},{default:u(()=>[g(ce.items).images.length>0?(U(),pe(N,{key:0,"no-gutters":""},{default:u(()=>[(U(!0),me(We,null,qt(g(ce.items).images,(Pe,ye)=>(U(),pe(ne,{key:`img-${Se}-${ye}`,cols:"12",sm:"6",md:"4",class:"image-item-col pa-1"},{default:u(()=>[l(q,{class:"image-card elevation-2 card-hover-base",rounded:"lg",onClick:Ce=>D(Pe)},{default:u(()=>[l(z,{color:"primary",variant:"elevated",size:"x-small",class:"media-tag-small text-white","prepend-icon":k(Pe.tag)},{default:u(()=>[M(K(F(Pe.tag)),1)]),_:2},1032,["prepend-icon"]),l(te,{text:"Delete File"},{activator:u(({props:Ce})=>[l(Y,Ue({icon:"",size:"small",variant:"plain",color:"secondary",class:"delete-icon-small"},{ref_for:!0},Ce,{onClick:pn(_e=>Ae(Pe),["stop"])}),{default:u(()=>[l(L,{size:"small"},{default:u(()=>[...ue[12]||(ue[12]=[v("img",{src:Nd,alt:"Delete"},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024),l(re,{src:Pe.fileUrl,class:"image-thumbnail",cover:"","aspect-ratio":"1",loading:"lazy",transition:!1},{placeholder:u(()=>[v("div",_ke,[l(Q,{indeterminate:"",size:"20"})])]),error:u(()=>[v("div",wke,[l(le,{type:"error",variant:"tonal",density:"compact"},{default:u(()=>[...ue[13]||(ue[13]=[M(" Failed to load ",-1)])]),_:1})])]),_:1},8,["src"])]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:2},1024)):(U(),me("div",bke,[l(L,{icon:"mdi-image-off",size:"32",class:"text-medium-emphasis mb-2"}),ue[14]||(ue[14]=v("p",{class:"text-caption text-medium-emphasis"},"No images for this date",-1))]))]),_:2},1024),l(ne,{cols:"3",class:"documents-section pl-2"},{default:u(()=>[g(ce.items).documents.length>0?(U(),me("div",xke,[(U(!0),me(We,null,qt(g(ce.items).documents,(Pe,ye)=>(U(),pe(q,{key:`doc-${Se}-${ye}`,class:"document-item mb-2 elevation-1",rounded:"md",onClick:Ce=>D(Pe),hover:""},{default:u(()=>[l(de,{class:"pa-2"},{default:u(()=>[v("div",Cke,[l(L,{icon:S(Pe.type),size:"20",color:E(Pe.type),class:"mr-2 flex-shrink-0"},null,8,["icon","color"]),v("div",Ske,[v("div",Eke,K(F(Pe.tag)),1),v("div",Bke,K(C(Pe.path)),1)]),l(Y,{icon:"",size:"small",variant:"plain",color:"error",class:"ml-1 flex-shrink-0",onClick:pn(Ce=>Ae(Pe),["stop"])},{default:u(()=>[l(L,{size:"small"},{default:u(()=>[...ue[15]||(ue[15]=[v("img",{src:Nd,alt:"Delete"},null,-1)])]),_:1})]),_:1},8,["onClick"])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])):(U(),me("div",kke,[l(L,{icon:"mdi-file-off",size:"32",class:"text-medium-emphasis mb-2"}),ue[16]||(ue[16]=v("p",{class:"text-caption text-medium-emphasis"},"No documents for this date",-1))]))]),_:2},1024)]),_:2},1024)]))),128))]))]),_:1})]),_:1}),$e(Uo)?(U(),pe(G,{key:0,modelValue:b.value,"onUpdate:modelValue":ue[0]||(ue[0]=ce=>b.value=ce),class:"elevation-24","max-width":"100%"},{default:u(()=>[l(AR,{consultation:s.value,procedure:o.value,patient:t.patient,onClose:T},null,8,["consultation","procedure","patient"])]),_:1},8,["modelValue"])):ge("",!0),$e(Uo)?ge("",!0):(U(),pe(Z,{key:1,modelValue:b.value,"onUpdate:modelValue":ue[1]||(ue[1]=ce=>b.value=ce),persistent:"","max-width":"40%"},{default:u(()=>[l(AR,{consultation:s.value,procedure:o.value,patient:t.patient,onClose:T},null,8,["consultation","procedure","patient"])]),_:1},8,["modelValue"])),$e(Uo)?(U(),pe(G,{key:2,modelValue:i.value,"onUpdate:modelValue":ue[2]||(ue[2]=ce=>i.value=ce),class:"elevation-24","max-width":"100%"},{default:u(()=>[l(mR,{isOpen:i.value,mediaItems:a.value,selectedMedia:c.value,currentIndex:A.value,onClose:O,onNavigate:P},null,8,["isOpen","mediaItems","selectedMedia","currentIndex"])]),_:1},8,["modelValue"])):ge("",!0),$e(Uo)?ge("",!0):(U(),pe(Z,{key:3,modelValue:i.value,"onUpdate:modelValue":ue[3]||(ue[3]=ce=>i.value=ce),"max-width":"90%","max-height":"90%"},{default:u(()=>[l(mR,{isOpen:i.value,mediaItems:a.value,selectedMedia:c.value,currentIndex:A.value,onClose:O,onNavigate:P},null,8,["isOpen","mediaItems","selectedMedia","currentIndex"])]),_:1},8,["modelValue"])),$e(Uo)?(U(),pe(G,{key:4,modelValue:d.value,"onUpdate:modelValue":ue[4]||(ue[4]=ce=>d.value=ce),class:"elevation-24","max-width":"100%","max-height":"95%"},{default:u(()=>[l(vR,{isOpen:d.value,patientId:f.value,doctorId:m.value,onClose:ie},null,8,["isOpen","patientId","doctorId"])]),_:1},8,["modelValue"])):ge("",!0),$e(Uo)?ge("",!0):(U(),pe(Z,{key:5,modelValue:d.value,"onUpdate:modelValue":ue[5]||(ue[5]=ce=>d.value=ce),"max-width":"95%","max-height":"95%"},{default:u(()=>[l(vR,{isOpen:d.value,patientId:f.value,doctorId:m.value,onClose:ie},null,8,["isOpen","patientId","doctorId"])]),_:1},8,["modelValue"])),l(Z,{modelValue:h.value,"onUpdate:modelValue":ue[6]||(ue[6]=ce=>h.value=ce),"max-width":"30%",persistent:""},{default:u(()=>[l(mke,{deleteSelectedUpload:p.value,onClose:j},null,8,["deleteSelectedUpload"])]),_:1},8,["modelValue"])],64)}}},qH=Xt(Tke,[["__scopeId","data-v-c89e3178"]]),hR=""+new URL("images/no_today_consultation-CFXdUpZK.png",import.meta.url).href,Ike={class:"text-caption"},Fke={class:"text-center"},Pke={class:"text-body-2 text-medium-emphasis mt-2"},Dke={key:1,class:"text-caption text-medium-emphasis ml-2"},Uke={class:"d-flex justify-start align-center flex-wrap"},Rke={class:"text-body-2 font-weight-medium text-primary d-flex align-center justify-center"},Nke={class:"text-body-2 font-weight-medium text-primary d-flex align-center justify-center"},Vke={class:"text-body-2 font-weight-medium text-primary d-flex align-center justify-center"},Lke={class:"text-body-2 font-weight-medium text-primary d-flex align-center justify-center"},Mke={class:"medicine-info flex-grow-1"},Oke={class:"d-flex align-center justify-start"},Hke={class:"d-flex align-center"},$ke={class:"medicine-trade-name text-left"},Qke={key:0,class:"text-caption text-medium-emphasis ml-1"},Gke={class:"d-flex flex-column ml-1 order-buttons-container",style:{gap:"2px"}},zke={class:"d-flex align-center ml-2"},Kke={class:"text-caption text-medium-emphasis text-right"},Wke={class:"d-flex flex-wrap gap-1"},jke={class:"text-caption text-error d-flex align-center"},qke={class:"text-caption text-warning d-flex align-center"},Yke={class:"text-caption"},Xke={class:"text-center"},Jke={class:"text-body-2 text-medium-emphasis mt-2"},Zke={__name:"consultation-window",props:{consultation:{type:Object,required:!0},patient:{type:Object,required:!0},consultationCopy:{type:Object,required:!1}},emits:["update:consultation","createNewArtefact","pdfGenerated"],setup(e,{emit:t}){const n=e,a=Rn(),{showSuccess:r,showError:s,showWarning:o}=ra(),i=t,c=V(Qn.cloneDeep(n.patient)),A=V(Qn.cloneDeep(n.consultation)),d=V([]),f=V(null),m=V("write"),h=V(!1),p=V(!1),y=V(null),g=V(!1),w=V(!1),b=V(!1),x=V(!1),T=V(!1),F=V(!1),k=V({}),S=ae(()=>a.state.doctorModule.doctorId),E=ae(()=>a.getters["doctorModule/currentDoctor"]),C=ae(()=>a.getters["doctorModule/isPharmacyEnabled"]),D=ae(()=>a.getters["pharmacyModule/currentPharmacyId"]),P=V(!1),O=oe=>{if(!oe?.consultationDate||!oe?.status)return!1;const se=oe.consultationDate,be=oe.status,Fe=rt=>{if(!rt)return!1;const qe=new Date().toLocaleDateString("en-CA");return rt===qe},at=rt=>{if(!rt)return!1;const qe=new Date().toLocaleDateString("en-CA"),At=new Date(rt),Ut=new Date(qe);return At>Ut};return(Fe(se)||at(se))&&be==="CREATED"||be==="UPDATED"},H=ae(()=>A.value?.id&&A.value.id!=="0"&&O(A.value)),ie=ae(()=>A.value?.status==="UPDATED");ae(()=>!d.value||d.value.length===0?!1:d.value.some(oe=>oe.isPharmacy===!0&&oe.quantityUnits!==null&&oe.quantityUnits!==void 0&&oe.quantityUnits>0));const Ae=ae(()=>!N.value||N.value.length===0?[]:N.value.filter(oe=>oe.isCreatedByUser===!0&&!oe.isUserTyped)),j=oe=>oe.dosage_schedule&&oe.dosage_schedule.trim()||oe.duration&&oe.duration.trim()||oe.instructions&&oe.instructions.trim(),J=oe=>oe.isSelected?j(oe)?null:"missing-dosage":"unselected",ue=oe=>{const se=J(oe);return se?`medicine-${se}`:""},ne=ae(()=>d.value.filter(oe=>oe.isSelected&&j(oe)));ae(()=>d.value.filter(oe=>oe.isSelected&&!j(oe)));const Y=ae(()=>d.value.filter(oe=>!oe.isSelected)),te=ae(()=>d.value.filter(oe=>oe.isSelected&&!j(oe))),L=ae(()=>{const oe=ne.value.length,se=te.value.length,be=Y.value.length;if(be===0&&se===0)return"Save Consultation";const Fe=[];be>0&&Fe.push(`${be} unselected will be excluded`),se>0&&Fe.push(`${se} without dosage will be excluded`);const at=oe>0?`${oe} medicine${oe>1?"s":""} will be saved`:"";return at?`Save Consultation (${at}, ${Fe.join(", ")})`:`Save Consultation (${Fe.join(", ")})`}),N=V([]),q=ae(()=>{const oe=new Date;return oe.setDate(oe.getDate()+1),oe.toISOString().split("T")[0]}),Q=oe=>{(oe.ctrlKey||oe.metaKey)&&oe.key==="s"&&(oe.preventDefault(),A.value?.id&&A.value.id!=="0"&&zn(A.value))},ee=(oe,se=30)=>!oe||oe.length<=se?oe:oe.substring(0,se)+"...",z=oe=>{if(!oe)return"";const se=[];return oe.dosageSchedule&&oe.dosageSchedule.trim()&&se.push(oe.dosageSchedule.trim()),oe.duration&&oe.duration.trim()&&se.push(oe.duration.trim()),oe.instructions&&oe.instructions.trim()&&se.push(oe.instructions.trim()),oe.quantityUnits!==null&&oe.quantityUnits!==void 0&&se.push(`Qty: ${oe.quantityUnits}`),se.join(", ")},X=oe=>{if(!oe)return null;if(oe instanceof Date){const se=oe.getFullYear(),be=String(oe.getMonth()+1).padStart(2,"0"),Fe=String(oe.getDate()).padStart(2,"0");return`${se}-${be}-${Fe}`}return typeof oe=="string"?oe.includes("T")?oe.split("T")[0]:oe:null},le=oe=>{if(!oe)return"dd-mm";try{let se;if(oe instanceof Date)se=oe;else if(typeof oe=="string")se=new Date(oe.includes("T")?oe:oe+"T12:00:00");else return"dd-mm";return isNaN(se.getTime())?"dd-mm":se.toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}catch(se){return console.error("Error formatting followup date:",se),"dd-mm"}},re=oe=>{A.value.followupDate=X(oe),F.value=!1},de=oe=>{if(!oe)return null;try{if(oe instanceof Date)return oe;if(typeof oe=="string"){const se=oe.includes("T")?oe.split("T")[0]:oe;return new Date(se+"T12:00:00")}}catch(se){console.error("Error parsing followup date for picker:",se)}return null},G=()=>{A.value.followupDate=null},Z=oe=>{console.log("Tab changed to:",oe)};un(async()=>{await gt(),document.addEventListener("keydown",Q)}),Ui(()=>{document.removeEventListener("keydown",Q)});const ce=()=>{console.log("Add Item"),h.value=!0},Se=()=>{h.value=!1},Pe=oe=>{y.value=oe,p.value=!0},ye=()=>{p.value=!1,y.value=null},Ce=oe=>{const se=d.value.findIndex(be=>be.id===oe.id);se!==-1&&(d.value[se]={...d.value[se],...oe})},_e=oe=>{if(oe===0)return;const se=[...d.value];[se[oe-1],se[oe]]=[se[oe],se[oe-1]],d.value=se},De=oe=>{if(oe===d.value.length-1)return;const se=[...d.value];[se[oe],se[oe+1]]=[se[oe+1],se[oe]],d.value=se},xe=V(!1),Te=V(!1),Me=V(null),et=()=>{xe.value=!0,console.log("Diagnosis Template")},lt=oe=>{Me.value=oe,Te.value=!0,console.log("Edit Diagnosis Template",oe)},Re=()=>{xe.value=!1},Le=()=>{xe.value=!1},nt=()=>{Te.value=!1,Me.value=null},Tt=()=>{Te.value=!1,Me.value=null},Pt=async oe=>{if(!oe||oe==="0"){console.log("Cannot fetch vitals: Invalid consultation ID"),f.value=null;return}try{const{fetchVitalsByConsultation:se}=await Jr(async()=>{const{fetchVitalsByConsultation:Fe}=await Promise.resolve().then(()=>DEe);return{fetchVitalsByConsultation:Fe}},void 0,import.meta.url),be=await se(oe);f.value=be.data}catch(se){console.error("Error fetching vitals:",se)}},Kt=()=>{g.value=!0},$t=()=>{g.value=!1},bt=oe=>{f.value=oe,g.value=!1},st=()=>{w.value=!0},Je=()=>{w.value=!1};Ke(()=>n.patient,oe=>{oe&&(c.value=Qn.cloneDeep(oe),console.log("Patient data updated:",c.value))},{immediate:!0}),Ke(()=>n.consultation,async oe=>{oe&&oe.id&&oe.id!=="0"?(O(oe)||console.warn("Consultation window received invalid consultation:",{id:oe.id,status:oe.status,date:oe.consultationDate}),A.value=Qn.cloneDeep(oe),console.log("Consultation Details",A.value),d.value=Qn.cloneDeep(A.value.medicines||[]),d.value&&d.value.length>0&&d.value.forEach(se=>{se.isSelected=!0,se.dosage?(se.dosage_schedule=se.dosage.dosageSchedule||"",se.duration=se.dosage.duration||"",se.instructions=se.dosage.instructions||"",se.quantityUnits=se.dosage.quantityUnits!==null&&se.dosage.quantityUnits!==void 0?se.dosage.quantityUnits:null):(se.dosage_schedule=se.dosage_schedule||"",se.duration=se.duration||"",se.instructions=se.instructions||"",se.quantityUnits=se.quantityUnits!==null&&se.quantityUnits!==void 0?se.quantityUnits:null)}),await Pt(oe.id)):oe&&oe.id==="0"&&(A.value=Qn.cloneDeep(oe),d.value=[],f.value=null,console.log("No consultation selected"))},{immediate:!0}),Ke(()=>n.consultationCopy,oe=>{console.log("Consultation Copy",oe),A.value.doctorNotes=oe.doctorNotes,A.value.patientNotes=oe.patientNotes,A.value.diagnosis=oe.diagnosis,A.value.investigations=oe.investigations,A.value.clinicalNotes=oe.clinicalNotes||"",d.value=Qn.cloneDeep(oe.medicines||[]),d.value&&d.value.length>0&&d.value.forEach(se=>{se.dosage?(se.dosage_schedule=se.dosage.dosageSchedule||"",se.duration=se.dosage.duration||"",se.instructions=se.dosage.instructions||"",se.quantityUnits=se.dosage.quantityUnits!==null&&se.dosage.quantityUnits!==void 0?se.dosage.quantityUnits:null):(se.dosage_schedule=se.dosage_schedule||"",se.duration=se.duration||"",se.instructions=se.instructions||"",se.quantityUnits=se.quantityUnits!==null&&se.quantityUnits!==void 0?se.quantityUnits:null)})}),Ke(()=>A.value.patientNotes,oe=>{oe?.trim()||console.log("Patient notes cleared")});const Nt=async oe=>{console.log("Searched Medicine",oe);for(const se of oe)await rn(se)},rn=async oe=>{if(d.value.some(se=>se.id===oe.id))console.log("Medicine already selected");else{if(oe.dosage_schedule=oe.dosage_schedule||"",oe.duration=oe.duration||"",oe.instructions=oe.instructions||"",oe.quantityUnits=oe.quantityUnits!==null&&oe.quantityUnits!==void 0?oe.quantityUnits:null,oe.isSelected=!0,oe.isLocal===!0)try{const{data:se,error:be,errorMessage:Fe}=await GSe(oe,S.value,{skipMessages:!0});!be&&se&&se.length>0?(oe.dosageHistory=se,console.log(`Fetched ${se.length} dosage records for local medicine:`,oe.productName)):(oe.dosageHistory=[],Fe&&Fe.includes("No dosages found")&&o(Fe))}catch(se){console.error("Error fetching dosage history:",se),oe.dosageHistory=[]}else oe.dosageHistory=[];console.log("Selected Medicine",oe),d.value.push(oe),console.log("Medicines List",d.value)}},Lt=oe=>{console.log("New Medicines",oe),d.value.push({id:oe.id,productName:oe.productName,marketer:oe.marketer,saltComposition:oe.saltComposition,productForm:oe.productForm,isLocal:oe.isLocal,dosage_schedule:"",duration:"",instructions:"",quantityUnits:null,isSelected:!0})},_t=(oe,se)=>{if(console.log("Selected dosage schedule:",oe,"for medicine:",se),!oe||!se)return;const be=d.value.findIndex(Fe=>Fe.id===se.id);if(be!==-1){const Fe=typeof oe=="string"?oe:oe.dosage_schedule||"";d.value[be].dosage_schedule=Fe,console.log("Updated medicine with dosage schedule:",d.value[be])}},ut=(oe,se)=>{if(console.log("Selected dosage instructions:",oe,"for medicine:",se),!se)return;const be=d.value.findIndex(Fe=>Fe.id===se.id);if(be!==-1){const Fe=typeof oe=="string"?oe:oe?.instructions||"";d.value[be].instructions=Fe,console.log("Updated medicine with instructions:",d.value[be])}},Ft=(oe,se)=>{if(console.log("Selected dosage duration:",oe,"for medicine:",se),!se)return;const be=d.value.findIndex(Fe=>Fe.id===se.id);if(be!==-1){const Fe=typeof oe=="string"?oe:oe?.duration||"";d.value[be].duration=Fe,console.log("Updated medicine with duration:",d.value[be])}},zt=(oe,se)=>{if(console.log("Selected dosage history:",oe,"for medicine:",se),!oe||!se)return;const be=d.value.findIndex(Fe=>Fe.id===se.id);be!==-1&&(d.value[be].dosage_schedule=oe.dosageSchedule||"",d.value[be].instructions=oe.instructions||"",d.value[be].duration=oe.duration||"",d.value[be].quantityUnits=oe.quantityUnits!==null&&oe.quantityUnits!==void 0?oe.quantityUnits:null,console.log("Updated medicine with dosage history:",d.value[be]))},dn=async oe=>{console.log("Template selected for auto-fill:",oe);const{template:se,autoFillData:be}=oe;if(be.diagnosis&&be.diagnosis.trim()&&(A.value.diagnosis&&A.value.diagnosis.trim()?A.value.diagnosis.includes(be.diagnosis)||(A.value.diagnosis+=", "+be.diagnosis):A.value.diagnosis=be.diagnosis),be.instructions&&be.instructions.trim()&&(A.value.patientNotes&&A.value.patientNotes.trim()?A.value.patientNotes.includes(be.instructions)||(A.value.patientNotes+=", "+be.instructions):A.value.patientNotes=be.instructions),be.investigations&&be.investigations.trim()&&(A.value.investigations&&A.value.investigations.trim()?A.value.investigations.includes(be.investigations)||(A.value.investigations+=", "+be.investigations):A.value.investigations=be.investigations),be.medicines&&Array.isArray(be.medicines))for(const Fe of be.medicines)Fe.medicine&&await rn(Fe.medicine);N.value.some(Fe=>Fe.id===se.id)||N.value.push(se),console.log("Template auto-fill completed")},Hn=async oe=>{if(!oe){N.value=[];return}console.log("Diagnosis selected:",oe),oe.isCreatedByUser&&!oe.isUserTyped?(N.value.some(se=>se.id===oe.id)||N.value.push(oe),await xt(oe)):(N.value=[],console.log("User-typed or history diagnosis - no template extras to process"))},Ze=async oe=>{oe&&console.log("Investigation selected:",oe)},Ge=async oe=>{if(!oe)return;console.log("Patient advice selected:",oe);const se=oe.patientAdvice||"",be=A.value.patientNotes||"";be.trim()?A.value.patientNotes=be.trim()+", "+se:A.value.patientNotes=se},xt=async oe=>{if(console.log("Processing Diagnosis Extras",oe),!oe.isCreatedByUser||oe.isUserTyped){console.log("Skipping extras for user-typed text:",oe.diagnosisName);return}if(oe.instructions&&!A.value.patientNotes.includes(oe.instructions)&&(A.value.patientNotes.trim()?A.value.patientNotes+=", "+oe.instructions:A.value.patientNotes=oe.instructions),oe.investigations&&!A.value.investigations.includes(oe.investigations)&&(A.value.investigations.trim()?A.value.investigations+=", "+oe.investigations:A.value.investigations=oe.investigations),oe.diagnosisMedicines&&Array.isArray(oe.diagnosisMedicines))for(const se of oe.diagnosisMedicines)console.log("Diagnosis Medicine",se),se.medicine&&await rn(se.medicine)},gt=async()=>{try{const oe=await gh(S.value);k.value=oe.data,console.log("Configuration data fetched:",k.value)}catch(oe){console.error("Error fetching diagnosis:",oe)}},Bt=()=>{console.log("Create New Consultation"),i("createNewArtefact")},wt=async()=>{if(!A.value.id||A.value.id==="0"){console.log("Cannot refresh: No valid consultation ID");return}const oe=await rU(A.value.id);A.value=Qn.cloneDeep(oe.data),d.value=Qn.cloneDeep(A.value.medicines||[]),d.value&&d.value.length>0&&d.value.forEach(se=>{se.isSelected=!0,se.dosage?(se.dosage_schedule=se.dosage.dosageSchedule||"",se.duration=se.dosage.duration||"",se.instructions=se.dosage.instructions||"",se.quantityUnits=se.dosage.quantityUnits!==null&&se.dosage.quantityUnits!==void 0?se.dosage.quantityUnits:null):(se.dosage_schedule=se.dosage_schedule||"",se.duration=se.duration||"",se.instructions=se.instructions||"",se.quantityUnits=se.quantityUnits!==null&&se.quantityUnits!==void 0?se.quantityUnits:null)}),await Pt(A.value.id)},gn=async oe=>{const se=oe.patient_id||oe.patientId;se&&await Pve(se)},Wn=async()=>{if(!A.value?.id||A.value.id==="0"){s("Please save the consultation first");return}if(!D.value){s("Please select a pharmacy first");return}try{P.value=!0;const{data:oe,error:se}=await mM(A.value.id,D.value);se?s(se.response?.data?.error||"Failed to send to pharmacy"):r("Draft bill created successfully in pharmacy")}catch(oe){console.error("Error sending to pharmacy:",oe),s("An unexpected error occurred")}finally{P.value=!1}},zn=async oe=>{if(!oe?.id||oe.id==="0"){console.log("Cannot save: No valid consultation ID");return}try{const se=d.value.filter(rt=>rt.isSelected),be=se.length>0;if(oe.status="UPDATED",await HM(oe),!be){console.log("Consultation saved successfully without medicines"),await oa(),await gn(oe);return}const Fe=await OSe(se);console.log("Medicines created response",Fe.data),Fe.data&&se.forEach(rt=>{Fe.data[rt.id]&&(rt.id=Fe.data[rt.id]),rt.isLocal=!0}),console.log("Medicines for Dosage",se);const at=await HSe(se,S.value);console.log("Dosage created response",oe.id,at.data),await $Se(oe.id,at.data),r("Consultation details and medicines saved successfully"),await oa(),await gn(oe)}catch(se){console.error("Error updating consultation:",se)}},oa=async()=>{try{const oe=await rU(A.value.id),se=Qn.cloneDeep(oe.data);A.value=se,d.value=Qn.cloneDeep(se.medicines||[]),d.value&&d.value.length>0&&d.value.forEach(be=>{be.isSelected=!0,be.dosage?(be.dosage_schedule=be.dosage.dosageSchedule||"",be.duration=be.dosage.duration||"",be.instructions=be.dosage.instructions||"",be.quantityUnits=be.dosage.quantityUnits!==null&&be.dosage.quantityUnits!==void 0?be.dosage.quantityUnits:null):(be.dosage_schedule=be.dosage_schedule||"",be.duration=be.duration||"",be.instructions=be.instructions||"",be.quantityUnits=be.quantityUnits!==null&&be.quantityUnits!==void 0?be.quantityUnits:null)}),await Pt(se.id),i("update:consultation",se),console.log("Emitted fresh consultation data to parent:",se)}catch(oe){console.error("Error refreshing consultation data after save:",oe),i("update:consultation",Qn.cloneDeep(A.value))}},Ra=oe=>{console.log("PDF generated successfully:",oe),i("pdfGenerated",oe)},Be=()=>{b.value=!0},Qe=oe=>{console.log("Clinical notes transcription completed:",oe),oe&&oe.trim()&&(A.value.clinicalNotes&&A.value.clinicalNotes.trim()?A.value.clinicalNotes+=" "+oe:A.value.clinicalNotes=oe),b.value=!1},ke=()=>{x.value=!0},Ve=oe=>{console.log("Patient advice transcription completed:",oe),oe&&oe.trim()&&(A.value.patientNotes&&A.value.patientNotes.trim()?A.value.patientNotes+=" "+oe:A.value.patientNotes=oe),x.value=!1},ze=()=>{T.value=!0},je=oe=>{console.log("Doctor notes transcription completed:",oe),oe&&oe.trim()&&(A.value.doctorNotes&&A.value.doctorNotes.trim()?A.value.doctorNotes+=" "+oe:A.value.doctorNotes=oe),T.value=!1};return(oe,se)=>{const be=I("v-tab"),Fe=I("v-tooltip"),at=I("v-tabs"),rt=I("v-card"),qe=I("v-col"),At=I("v-row"),Ut=I("v-progress-circular"),ft=I("v-btn"),en=I("v-empty-state"),Jt=I("v-icon"),wn=I("v-card-subtitle"),yn=I("v-chip"),Pa=I("v-textarea"),Or=I("v-checkbox"),Hr=I("v-text-field"),Bs=I("v-date-picker"),Ko=I("v-menu"),Er=I("v-divider"),ks=I("v-dialog"),$r=I("v-tabs-window-item"),Vi=I("v-tabs-window");return U(),me(We,null,[l(At,{"no-gutters":""},{default:u(()=>[l(qe,null,{default:u(()=>[l(rt,{rounded:"0",class:"pa-1 patient-header-style",elevation:"0"},{default:u(()=>[l(at,{modelValue:m.value,"onUpdate:modelValue":[se[0]||(se[0]=Vt=>m.value=Vt),Z],"align-tabs":"center",density:"compact",class:"interactive-tabs"},{default:u(()=>[l(Fe,{text:"Write Prescription"},{activator:u(({props:Vt})=>[l(be,Ue({value:"write"},Vt,{class:["tab-interactive",{"tab-active":m.value==="write"}],tabindex:"-1"}),{default:u(()=>[...se[21]||(se[21]=[v("div",{class:"tab-content"}," WRITE Rx ",-1)])]),_:1},16,["class"])]),_:1}),l(Fe,{text:"Share Prescription"},{activator:u(({props:Vt})=>[l(be,Ue({value:"share"},Vt,{class:["tab-interactive",{"tab-active":m.value==="share"}]}),{default:u(()=>[...se[22]||(se[22]=[v("div",{class:"tab-content"}," SHARE Rx ",-1)])]),_:1},16,["class"])]),_:1}),l(Fe,{text:"Uploaded Items"},{activator:u(({props:Vt})=>[l(be,Ue({value:"media"},Vt,{class:["tab-interactive",{"tab-active":m.value==="media"}],tabindex:"-1"}),{default:u(()=>[...se[23]||(se[23]=[v("div",{class:"tab-content"}," UPLOADS ",-1)])]),_:1},16,["class"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(Vi,{modelValue:m.value,"onUpdate:modelValue":se[18]||(se[18]=Vt=>m.value=Vt),class:"flex-grow-1"},{default:u(()=>[l($r,{value:"write",class:"h-100"},{default:u(()=>[A.value.id?A.value.id==0?(U(),pe(At,{key:1,"no-gutters":""},{default:u(()=>[l(qe,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%"}},{default:u(()=>[l(en,{image:$e(hR)},{title:u(()=>[...se[24]||(se[24]=[v("div",{class:"text-subtitle-2"}," No consultation selected ",-1)])]),text:u(()=>[v("div",Ike,[se[26]||(se[26]=M(" Create a consultation by clicking on the button above ",-1)),se[27]||(se[27]=v("br",null,null,-1)),l(ft,{class:"mt-2",onClick:Bt},{default:u(()=>[...se[25]||(se[25]=[M("Create Consultation",-1)])]),_:1})])]),_:1},8,["image"])]),_:1})]),_:1})):A.value.id&&!H.value?(U(),pe(At,{key:2,"no-gutters":""},{default:u(()=>[l(qe,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%"}},{default:u(()=>[v("div",Fke,[l(Jt,{size:"48",color:"warning",class:"mb-4"},{default:u(()=>[...se[28]||(se[28]=[M("mdi-alert-circle-outline",-1)])]),_:1}),se[29]||(se[29]=v("div",{class:"text-h6 text-medium-emphasis"},"Invalid consultation",-1)),v("div",Pke,"This consultation cannot be displayed (status: "+K(A.value.status)+")",1)])]),_:1})]),_:1})):(U(),me(We,{key:3},[l(At,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[l(qe,{cols:"12"},{default:u(()=>[l(rt,{rounded:"0",class:"pa-1 patient-header-style",elevation:"0"},{default:u(()=>[l(At,{"no-gutters":""},{default:u(()=>[l(qe,{cols:"8",style:{"text-align":"left"},class:"d-flex align-center pl-1"},{default:u(()=>[M(K(A.value.consultationDate?new Date(A.value.consultationDate).toLocaleDateString("en-US",{timeZone:"Asia/Kolkata",weekday:"short",month:"short",day:"numeric",year:"numeric"}):A.value.createdAt?$e(ar)(A.value.createdAt):"No date"),1)]),_:1}),l(qe,{cols:"4",class:"d-flex justify-end align-center"},{default:u(()=>[C.value?(U(),pe(Fe,{key:0,text:"Send to Pharmacy"},{activator:u(({props:Vt})=>[l(ft,Ue({onClick:Wn},Vt,{class:"btn-hover-base mr-1",tabindex:"-1",variant:"outlined",loading:P.value,disabled:!ie.value}),{default:u(()=>[...se[30]||(se[30]=[M("Send to Pharmacy",-1)])]),_:1},16,["loading","disabled"])]),_:1})):ge("",!0),l(Fe,{text:L.value},{activator:u(({props:Vt})=>[l(ft,Ue({onClick:se[1]||(se[1]=Ja=>zn(A.value))},Vt,{class:"btn-hover-base mr-1",tabindex:"-1"}),{default:u(()=>[...se[31]||(se[31]=[M("SAVE",-1)])]),_:1},16)]),_:1},8,["text"]),l(Fe,{text:"Refresh Consultation"},{activator:u(({props:Vt})=>[l(ft,Ue({rounded:"x-small",size:"small",variant:"outlined"},Vt,{class:"btn-hover-base",onClick:se[2]||(se[2]=Ja=>wt()),tabindex:"-1"}),{default:u(()=>[l(Jt,{size:"large"},{default:u(()=>[...se[32]||(se[32]=[v("img",{src:Sg,alt:"Refresh"},null,-1)])]),_:1})]),_:1},16)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(At,{"no-gutters":"",class:"h-100"},{default:u(()=>[l(qe,{cols:"12",class:"scroll-element",style:{"padding-bottom":"20px"}},{default:u(()=>[l(At,{"no-gutters":""},{default:u(()=>[l(qe,{cols:"12"},{default:u(()=>[l(rt,{class:"form-section-card card-status-default ma-2 mb-1 pa-3",elevation:"2"},{default:u(()=>[l(At,{"no-gutters":""},{default:u(()=>[l(qe,{cols:"8",class:"d-flex align-center flex-wrap gap-2"},{default:u(()=>[l(wn,{class:"pa-0"},{default:u(()=>[...se[33]||(se[33]=[v("strong",null,"Vitals",-1)])]),_:1}),f.value?(U(),me(We,{key:0},[f.value.pulse?(U(),pe(yn,{key:0,color:"primary","text-color":"black",size:"small",class:"ml-2"},{default:u(()=>[se[34]||(se[34]=v("strong",null,"Pulse:",-1)),M(" "+K($e(qr)(f.value.pulse,"bpm")),1)]),_:1})):ge("",!0),f.value.systolicBP&&f.value.diastolicBP?(U(),pe(yn,{key:1,color:"primary","text-color":"black",size:"small"},{default:u(()=>[se[35]||(se[35]=v("strong",null,"BP:",-1)),M(" "+K(f.value.systolicBP)+"/"+K(f.value.diastolicBP)+" mmHg ",1)]),_:1})):ge("",!0),f.value.respiratoryRate?(U(),pe(yn,{key:2,color:"primary","text-color":"black",size:"small"},{default:u(()=>[se[36]||(se[36]=v("strong",null,"RR:",-1)),M(" "+K($e(qr)(f.value.respiratoryRate,"breaths/min")),1)]),_:1})):ge("",!0),f.value.temperature?(U(),pe(yn,{key:3,color:"primary","text-color":"black",size:"small"},{default:u(()=>[se[37]||(se[37]=v("strong",null,"Temp:",-1)),M(" "+K($e(qr)(f.value.temperature,"C")),1)]),_:1})):ge("",!0),f.value.weight?(U(),pe(yn,{key:4,color:"primary","text-color":"black",size:"small"},{default:u(()=>[se[38]||(se[38]=v("strong",null,"Weight:",-1)),M(" "+K($e(qr)(f.value.weight,"kg")),1)]),_:1})):ge("",!0),f.value.height?(U(),pe(yn,{key:5,color:"primary","text-color":"black",size:"small"},{default:u(()=>[se[39]||(se[39]=v("strong",null,"Height:",-1)),M(" "+K($e(qr)(f.value.height,"cm")),1)]),_:1})):ge("",!0),f.value.serumBilirubin?(U(),pe(yn,{key:6,color:"secondary","text-color":"black",size:"small"},{default:u(()=>[se[40]||(se[40]=v("strong",null,"S.Bilirubin:",-1)),M(" "+K($e(qr)(f.value.serumBilirubin,"mg/dL")),1)]),_:1})):ge("",!0),f.value.bloodGlucoseFF?(U(),pe(yn,{key:7,color:"secondary","text-color":"black",size:"small"},{default:u(()=>[se[41]||(se[41]=v("strong",null,"Glucose(FF):",-1)),M(" "+K($e(qr)(f.value.bloodGlucoseFF,"mg/dL")),1)]),_:1})):ge("",!0),f.value.bloodGlucosePP?(U(),pe(yn,{key:8,color:"secondary","text-color":"black",size:"small"},{default:u(()=>[se[42]||(se[42]=v("strong",null,"Glucose(PP):",-1)),M(" "+K($e(qr)(f.value.bloodGlucosePP,"mg/dL")),1)]),_:1})):ge("",!0),f.value.bloodGlucoseRandom?(U(),pe(yn,{key:9,color:"secondary","text-color":"black",size:"small"},{default:u(()=>[se[43]||(se[43]=v("strong",null,"Glucose(R):",-1)),M(" "+K($e(qr)(f.value.bloodGlucoseRandom,"mg/dL")),1)]),_:1})):ge("",!0),f.value.serumCreatinine?(U(),pe(yn,{key:10,color:"secondary","text-color":"black",size:"small"},{default:u(()=>[se[44]||(se[44]=v("strong",null,"S.Creatinine:",-1)),M(" "+K($e(qr)(f.value.serumCreatinine,"mg/dL")),1)]),_:1})):ge("",!0)],64)):(U(),me("span",Dke," - No vitals recorded yet "))]),_:1}),l(qe,{cols:"4",class:"d-flex justify-end align-center gap-2"},{default:u(()=>[l(Fe,{text:f.value?"Edit Vitals":"Add Vitals"},{activator:u(({props:Vt})=>[l(ft,Ue({variant:"outlined",size:"small",class:"d-flex align-center justify-center btn-hover-enhanced"},Vt,{onClick:Kt,tabindex:"-1"}),{default:u(()=>[l(Jt,{start:""},{default:u(()=>[...se[45]||(se[45]=[v("img",{src:NSe,alt:"Vitals"},null,-1)])]),_:1}),M(" "+K(f.value?"Update":"Add"),1)]),_:1},16)]),_:1},8,["text"]),l(Fe,{text:"View Trends"},{activator:u(({props:Vt})=>[l(ft,Ue({variant:"outlined",size:"small",class:"d-flex align-center justify-center btn-hover-enhanced"},Vt,{onClick:st,tabindex:"-1"}),{default:u(()=>[l(Jt,{start:""},{default:u(()=>[...se[46]||(se[46]=[v("img",{src:VSe,alt:"Trends"},null,-1)])]),_:1}),se[47]||(se[47]=M(" Trends ",-1))]),_:1},16)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(At,{"no-gutters":""},{default:u(()=>[l(qe,{cols:"12"},{default:u(()=>[l(rt,{class:"form-section-card card-status-default ma-2 mb-1 pa-3",elevation:"2"},{default:u(()=>[l(At,{"no-gutters":"",class:"align-top"},{default:u(()=>[l(qe,{cols:"2",class:"d-flex align-top"},{default:u(()=>[l(wn,{class:"pa-0"},{default:u(()=>[...se[48]||(se[48]=[v("strong",null,"Diagnosis",-1)])]),_:1})]),_:1}),l(qe,{cols:"7",class:"d-flex align-top"},{default:u(()=>[l(uEe,{"doctor-id":S.value,onTemplateSelected:dn},null,8,["doctor-id"])]),_:1}),l(qe,{cols:"3",class:"d-flex justify-end align-top"},{default:u(()=>[l(Fe,{text:"Save as Template"},{activator:u(({props:Vt})=>[l(ft,Ue({variant:"outlined",size:"small",class:"d-flex align-center justify-center btn-hover-enhanced"},Vt,{onClick:et,tabindex:"-1"}),{default:u(()=>[l(Jt,{start:""},{default:u(()=>[...se[49]||(se[49]=[v("img",{src:BH,alt:"Save Template"},null,-1)])]),_:1}),se[50]||(se[50]=M(" Create Template ",-1))]),_:1},16)]),_:1})]),_:1})]),_:1}),Ae.value.length>0?(U(),pe(At,{key:0,"no-gutters":"",class:"mt-n2 mb-2"},{default:u(()=>[l(qe,{cols:"1"}),l(qe,{cols:"10"},{default:u(()=>[v("div",Uke,[(U(!0),me(We,null,qt(Ae.value,Vt=>(U(),pe(Fe,{key:Vt.id,text:`Edit template: ${Vt.diagnosisName}`},{activator:u(({props:Ja})=>[l(yn,Ue({variant:"tonal",size:"default",density:"default",color:"primary",text:ee(Vt.diagnosisName,30),class:"mr-1 mb-1 chip-hover"},{ref_for:!0},Ja),{append:u(()=>[l(Fe,{text:"Edit Template"},{activator:u(({props:Vn})=>[l(Jt,Ue({size:"small",onClick:pn(nr=>lt(Vt),["stop"])},{ref_for:!0},Vn,{class:"ml-1 edit-icon",tabindex:"-1"}),{default:u(()=>[...se[51]||(se[51]=[v("img",{src:yv,alt:"Edit Template"},null,-1)])]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1040,["text"])]),_:2},1032,["text"]))),128))])]),_:1}),l(qe,{cols:"1"})]),_:1})):ge("",!0),l(At,{"no-gutters":""},{default:u(()=>[l(qe,{cols:"1"}),l(qe,{cols:"9"},{default:u(()=>[l(JSe,{modelValue:A.value.diagnosis,"onUpdate:modelValue":se[3]||(se[3]=Vt=>A.value.diagnosis=Vt),"doctor-id":S.value,onDiagnosisSelected:Hn},null,8,["modelValue","doctor-id"])]),_:1}),l(qe,{cols:"2"})]),_:1}),l(At,{"no-gutters":""},{default:u(()=>[l(qe,{cols:"1"}),l(qe,{cols:"9"},{default:u(()=>[l(Pa,{modelValue:A.value.clinicalNotes,"onUpdate:modelValue":se[4]||(se[4]=Vt=>A.value.clinicalNotes=Vt),label:"Clinical Notes",clearable:"","auto-grow":"",rows:"1","row-height":"15",density:"compact",variant:"underlined",name:"clinical-notes",autocomplete:"off","hide-details":"auto"},null,8,["modelValue"])]),_:1}),l(qe,{cols:"1",class:"d-flex align-center justify-center"},{default:u(()=>[l(Fe,{text:"Voice Input"},{activator:u(({props:Vt})=>[l(ft,Ue({icon:"mdi-microphone",rounded:"xls",variant:"flat",color:"primary",size:"small"},Vt,{onClick:Be,tabindex:"-1",class:"dictation-btn"}),null,16)]),_:1})]),_:1}),l(qe,{cols:"1"})]),_:1})]),_:1})]),_:1})]),_:1}),l(At,{"no-gutters":""},{default:u(()=>[l(qe,{cols:"12"},{default:u(()=>[l(rt,{class:"form-section-card card-status-default ma-2 mb-1 pa-3",elevation:"2"},{default:u(()=>[l(At,{"no-gutters":"",class:"align-top"},{default:u(()=>[l(qe,{cols:"2",class:"d-flex align-top"},{default:u(()=>[l(wn,{class:"pa-0"},{default:u(()=>[...se[52]||(se[52]=[v("strong",null,"Rx",-1)])]),_:1})]),_:1}),l(qe,{cols:"7",class:"d-flex align-top px-2"},{default:u(()=>[l(IH,{showInventoryStatus:C.value,onSearchedMedicines:Nt,onAddMedicine:ce},null,8,["showInventoryStatus"])]),_:1}),l(qe,{cols:"3",class:"d-flex justify-end align-top gap-2"},{default:u(()=>[l(Fe,{text:"Add Medicine"},{activator:u(({props:Vt})=>[l(ft,Ue({variant:"outlined",size:"small",class:"d-flex align-center justify-center btn-hover-enhanced"},Vt,{onClick:ce,tabindex:"-1"}),{default:u(()=>[l(Jt,{start:""},{default:u(()=>[...se[53]||(se[53]=[v("img",{src:FE,alt:"Add Medicine"},null,-1)])]),_:1}),se[54]||(se[54]=M(" Create Medicine ",-1))]),_:1},16)]),_:1})]),_:1})]),_:1}),l(At,{"no-gutters":""},{default:u(()=>[d.value.length>0?(U(),pe(qe,{key:0,cols:"12"},{default:u(()=>[l(At,{"no-gutters":"",class:"mb-2 mt-0"},{default:u(()=>[l(qe,{cols:C.value?3:4,class:"pr-2"},{default:u(()=>[v("div",Rke,[l(Jt,{size:"small",class:"mr-1"},{default:u(()=>[...se[55]||(se[55]=[M("mdi-clock-outline",-1)])]),_:1}),se[56]||(se[56]=M(" Dosage Schedule e.g. 1 after breakfast ",-1))])]),_:1},8,["cols"]),l(qe,{cols:(C.value,3),class:"px-1"},{default:u(()=>[v("div",Nke,[l(Jt,{size:"small",class:"mr-1"},{default:u(()=>[...se[57]||(se[57]=[M("mdi-calendar-range",-1)])]),_:1}),se[58]||(se[58]=M(" Duration e.g. 5 days ",-1))])]),_:1},8,["cols"]),l(qe,{cols:C.value?3:5,class:"px-1"},{default:u(()=>[v("div",Vke,[l(Jt,{size:"small",class:"mr-1"},{default:u(()=>[...se[59]||(se[59]=[M("mdi-information-outline",-1)])]),_:1}),se[60]||(se[60]=M(" Instructions e.g. on empty stomach ",-1))])]),_:1},8,["cols"]),C.value?(U(),pe(qe,{key:0,cols:"3",class:"pl-2"},{default:u(()=>[v("div",Lke,[l(Jt,{size:"small",class:"mr-1"},{default:u(()=>[...se[61]||(se[61]=[M("mdi-numeric",-1)])]),_:1}),se[62]||(se[62]=M(" Quantity e.g. 5 ",-1))])]),_:1})):ge("",!0)]),_:1}),(U(!0),me(We,null,qt(d.value,(Vt,Ja)=>(U(),me(We,{key:Ja},[l(rt,{flat:"",class:ct(["medicine-inline-layout mb-1",ue(Vt)])},{default:u(()=>[l(At,{"no-gutters":"",align:"center",class:"mb-1"},{default:u(()=>[l(qe,{cols:"5",class:"d-flex align-center"},{default:u(()=>[l(Or,{modelValue:Vt.isSelected,"onUpdate:modelValue":Vn=>Vt.isSelected=Vn,color:"primary",density:"compact","hide-details":"",class:"mr-2 flex-shrink-0",style:{"margin-top":"-2px"},tabindex:"-1"},null,8,["modelValue","onUpdate:modelValue"]),v("div",Mke,[v("div",Oke,[v("div",Hke,[v("span",$ke,[M(K(Vt.productName)+" ",1),Vt.productForm?(U(),me("span",Qke," ("+K(Vt.productForm)+") ",1)):ge("",!0)]),Vt.isLocal?(U(),pe(Fe,{key:0,text:"Edit Medicine"},{activator:u(({props:Vn})=>[l(Jt,Ue({size:"small"},{ref_for:!0},Vn,{class:"edit-icon flex-shrink-0 ml-1",onClick:nr=>Pe(Vt),tabindex:"-1"}),{default:u(()=>[...se[63]||(se[63]=[M(" mdi-pencil ",-1)])]),_:1},16,["onClick"])]),_:2},1024)):ge("",!0),v("div",Gke,[l(Fe,{text:"Move Up"},{activator:u(({props:Vn})=>[l(Jt,Ue({size:"x-small"},{ref_for:!0},Vn,{class:["order-icon",{"order-icon-disabled":Ja===0}],onClick:nr=>_e(Ja),tabindex:"-1"}),{default:u(()=>[...se[64]||(se[64]=[M(" mdi-chevron-up ",-1)])]),_:1},16,["class","onClick"])]),_:2},1024),l(Fe,{text:"Move Down"},{activator:u(({props:Vn})=>[l(Jt,Ue({size:"x-small"},{ref_for:!0},Vn,{class:["order-icon",{"order-icon-disabled":Ja===d.value.length-1}],onClick:nr=>De(Ja),tabindex:"-1"}),{default:u(()=>[...se[65]||(se[65]=[M(" mdi-chevron-down ",-1)])]),_:1},16,["class","onClick"])]),_:2},1024)])]),v("div",zke,[Vt.isPharmacy?(U(),pe(Fe,{key:0,text:"Pharmacy Medicine"},{activator:u(({props:Vn})=>[l(Jt,Ue({size:"small"},{ref_for:!0},Vn,{class:"flex-shrink-0"}),{default:u(()=>[...se[66]||(se[66]=[M(" mdi-store-plus-outline ",-1)])]),_:1},16)]),_:1})):Vt.isLocal?(U(),pe(Fe,{key:1,text:"Saved Medicine"},{activator:u(({props:Vn})=>[l(Jt,Ue({size:"small"},{ref_for:!0},Vn,{class:"flex-shrink-0"}),{default:u(()=>[...se[67]||(se[67]=[v("img",{src:Zd,alt:"Saved Medicine"},null,-1)])]),_:1},16)]),_:1})):(U(),pe(Fe,{key:2,text:"External Medicine"},{activator:u(({props:Vn})=>[l(Jt,Ue({size:"small"},{ref_for:!0},Vn,{class:"flex-shrink-0"}),{default:u(()=>[...se[68]||(se[68]=[v("img",{src:_h,alt:"External Medicine"},null,-1)])]),_:1},16)]),_:1}))])])])]),_:2},1024),l(qe,{cols:"7",class:"d-flex align-center justify-end pl-2"},{default:u(()=>[v("span",Kke,K(Vt.saltComposition),1)]),_:2},1024)]),_:2},1024),Vt.isLocal&&Vt.dosageHistory&&Vt.dosageHistory.length>0?(U(),pe(At,{key:0,"no-gutters":"",class:"mb-2"},{default:u(()=>[l(qe,{cols:"12"},{default:u(()=>[v("div",Wke,[(U(!0),me(We,null,qt(Vt.dosageHistory,(Vn,nr)=>(U(),pe(yn,{key:nr,size:"small",variant:"outlined",color:"primary",class:"chip-hover text-caption",onClick:vl=>zt(Vn,Vt),style:{cursor:"pointer"}},{default:u(()=>[M(K(z(Vn)),1)]),_:2},1032,["onClick"]))),128))])]),_:2},1024)]),_:2},1024)):ge("",!0),l(At,{"no-gutters":"",align:"center"},{default:u(()=>[l(qe,{cols:C.value?3:4,class:"pr-2"},{default:u(()=>[l(gEe,{modelValue:Vt.dosage_schedule,"onUpdate:modelValue":Vn=>Vt.dosage_schedule=Vn,"medicine-id":Vt.id,"product-form":Vt.productForm,"doctor-id":S.value,onDosageScheduleSelected:Vn=>_t(Vn,Vt),class:"flex-grow-1"},null,8,["modelValue","onUpdate:modelValue","medicine-id","product-form","doctor-id","onDosageScheduleSelected"])]),_:2},1032,["cols"]),l(qe,{cols:(C.value,3),class:"px-1"},{default:u(()=>[l(_Ee,{modelValue:Vt.duration,"onUpdate:modelValue":Vn=>Vt.duration=Vn,"medicine-id":Vt.id,"product-form":Vt.productForm,"doctor-id":S.value,onDurationSelected:Vn=>Ft(Vn,Vt),class:"flex-grow-1"},null,8,["modelValue","onUpdate:modelValue","medicine-id","product-form","doctor-id","onDurationSelected"])]),_:2},1032,["cols"]),l(qe,{cols:C.value?3:5,class:"px-1"},{default:u(()=>[l(bEe,{modelValue:Vt.instructions,"onUpdate:modelValue":Vn=>Vt.instructions=Vn,"medicine-id":Vt.id,"product-form":Vt.productForm,"doctor-id":S.value,onInstructionsSelected:Vn=>ut(Vn,Vt),class:"flex-grow-1"},null,8,["modelValue","onUpdate:modelValue","medicine-id","product-form","doctor-id","onInstructionsSelected"])]),_:2},1032,["cols"]),C.value?(U(),pe(qe,{key:0,cols:"3",class:"pl-2"},{default:u(()=>[l(Hr,{"model-value":Vt.quantityUnits!==null&&Vt.quantityUnits!==void 0?Vt.quantityUnits:"","onUpdate:modelValue":Vn=>Vt.quantityUnits=Vn===""||Vn===null||Vn===void 0?null:Number(Vn),label:"Quantity",type:"number",variant:"outlined",density:"compact",min:0,disabled:!Vt.isPharmacy,"hide-details":"","single-line":"",class:"flex-grow-1",placeholder:""},{"prepend-inner":u(()=>[l(Fe,{text:"Quantity e.g. 5",location:"top"},{activator:u(({props:Vn})=>[l(Jt,Ue({ref_for:!0},Vn,{size:"small",class:"text-medium-emphasis mr-1"}),{default:u(()=>[...se[69]||(se[69]=[M(" mdi-numeric ",-1)])]),_:1},16)]),_:1})]),_:1},8,["model-value","onUpdate:modelValue","disabled"])]),_:2},1024)):ge("",!0)]),_:2},1024)]),_:2},1032,["class"]),Vt.isSelected?ge("",!0):(U(),pe(At,{key:0,"no-gutters":"",class:"mb-1"},{default:u(()=>[l(qe,{cols:"12",class:"px-2"},{default:u(()=>[v("div",jke,[l(Jt,{size:"x-small",class:"mr-1"},{default:u(()=>[...se[70]||(se[70]=[M("mdi-alert-circle-outline",-1)])]),_:1}),se[71]||(se[71]=M(" Select this medicine to include it in the prescription ",-1))])]),_:1})]),_:1})),Vt.isSelected&&!j(Vt)?(U(),pe(At,{key:1,"no-gutters":"",class:"mb-1"},{default:u(()=>[l(qe,{cols:"12",class:"px-2"},{default:u(()=>[v("div",qke,[l(Jt,{size:"x-small",class:"mr-1"},{default:u(()=>[...se[72]||(se[72]=[M("mdi-alert-circle-outline",-1)])]),_:1}),se[73]||(se[73]=M(" Add dosage information to include this medicine in the prescription ",-1))])]),_:1})]),_:1})):ge("",!0)],64))),128))]),_:1})):(U(),pe(qe,{key:1,cols:"12"},{default:u(()=>[l(rt,{flat:"",class:"pa-2"},{default:u(()=>[l(At,{"no-gutters":""},{default:u(()=>[l(qe,{cols:"1"}),l(qe,{cols:"10"},{default:u(()=>[l(wn,{style:{textAlign:"centre"}},{default:u(()=>[...se[74]||(se[74]=[M("No medicines added yet",-1)])]),_:1})]),_:1}),l(qe,{cols:"1"})]),_:1})]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}),l(At,{"no-gutters":""},{default:u(()=>[l(qe,{cols:"12"},{default:u(()=>[l(rt,{class:"form-section-card card-status-default ma-2 mb-1 pa-3",elevation:"2"},{default:u(()=>[l(At,{"no-gutters":""},{default:u(()=>[l(qe,{cols:"12",class:"d-flex align-top mb-2"},{default:u(()=>[l(wn,{class:"pa-0"},{default:u(()=>[...se[75]||(se[75]=[v("strong",null,"Investigations & Patient Advice",-1)])]),_:1})]),_:1})]),_:1}),l(At,{"no-gutters":"",class:"mt-2"},{default:u(()=>[l(qe,{cols:"1"}),l(qe,{cols:"6"},{default:u(()=>[l(tEe,{modelValue:A.value.investigations,"onUpdate:modelValue":se[5]||(se[5]=Vt=>A.value.investigations=Vt),"doctor-id":S.value,onInvestigationSelected:Ze},null,8,["modelValue","doctor-id"])]),_:1}),l(qe,{cols:"1"}),l(qe,{cols:"3",class:"pl-2"},{default:u(()=>[l(Ko,{modelValue:F.value,"onUpdate:modelValue":se[8]||(se[8]=Vt=>F.value=Vt),"close-on-content-click":!1,transition:"scale-transition","offset-y":""},{activator:u(({props:Vt})=>[l(Hr,Ue(Vt,{"model-value":le(A.value.followupDate),label:"Follow-up Date",readonly:"",density:"comfortable",variant:"outlined","hide-details":"auto",class:"input-hover date-input",clearable:"","onClick:clear":G,onKeydown:[se[6]||(se[6]=QP(Ja=>F.value=!0,["enter"])),se[7]||(se[7]=QP(Ja=>F.value=!0,["space"]))]}),{"append-inner":u(()=>[l(Jt,{class:"text-medium-emphasis"},{default:u(()=>[...se[76]||(se[76]=[M("mdi-calendar",-1)])]),_:1})]),_:1},16,["model-value"])]),default:u(()=>[l(Bs,{"model-value":de(A.value.followupDate),"onUpdate:modelValue":re,color:"primary",locale:"en-IN",min:q.value},null,8,["model-value","min"])]),_:1},8,["modelValue"])]),_:1}),l(qe,{cols:"1"})]),_:1}),l(At,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(qe,{cols:"1"}),l(qe,{cols:"9"},{default:u(()=>[l(rEe,{"doctor-id":S.value,onPatientAdviceSelected:Ge},null,8,["doctor-id"])]),_:1}),l(qe,{cols:"2"})]),_:1}),l(At,{"no-gutters":""},{default:u(()=>[l(qe,{cols:"1"}),l(qe,{cols:"9"},{default:u(()=>[l(Pa,{modelValue:A.value.patientNotes,"onUpdate:modelValue":se[9]||(se[9]=Vt=>A.value.patientNotes=Vt),label:"Patient Advice",clearable:"","auto-grow":"",rows:"2","row-height":"15",density:"compact",variant:"underlined",name:"patient-advice",autocomplete:"off","hide-details":"auto"},null,8,["modelValue"])]),_:1}),l(qe,{cols:"1",class:"d-flex align-center justify-center"},{default:u(()=>[l(Fe,{text:"Voice Input"},{activator:u(({props:Vt})=>[l(ft,Ue({icon:"mdi-microphone",rounded:"xls",variant:"flat",color:"primary",size:"small"},Vt,{onClick:ke,tabindex:"-1",class:"dictation-btn"}),null,16)]),_:1})]),_:1}),l(qe,{cols:"1"})]),_:1})]),_:1})]),_:1})]),_:1}),l(At,{"no-gutters":""},{default:u(()=>[l(qe,{cols:"12",class:"px-4 py-1"},{default:u(()=>[l(Er,{thickness:"2",class:"border-opacity-50"})]),_:1})]),_:1}),l(At,{"no-gutters":""},{default:u(()=>[l(qe,{cols:"12"},{default:u(()=>[l(rt,{class:"form-section-card card-status-default mx-2 pa-3",elevation:"2"},{default:u(()=>[l(At,{"no-gutters":""},{default:u(()=>[l(qe,{cols:"12",class:"d-flex align-top mb-1"},{default:u(()=>[l(wn,{class:"pa-0"},{default:u(()=>[...se[77]||(se[77]=[v("strong",null,"Notes for Doctor",-1)])]),_:1})]),_:1})]),_:1}),l(At,{"no-gutters":""},{default:u(()=>[l(qe,{cols:"1"}),l(qe,{cols:"9"},{default:u(()=>[l(Pa,{clearable:"","auto-grow":"",rows:"1","row-height":"15",density:"compact",variant:"underlined",label:"Notes for Doctor",modelValue:A.value.doctorNotes,"onUpdate:modelValue":se[10]||(se[10]=Vt=>A.value.doctorNotes=Vt),name:"doctor-notes",autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(qe,{cols:"1",class:"d-flex align-center justify-center"},{default:u(()=>[l(Fe,{text:"Voice Input"},{activator:u(({props:Vt})=>[l(ft,Ue({icon:"mdi-microphone",rounded:"xls",variant:"flat",color:"primary",size:"small"},Vt,{onClick:ze,tabindex:"-1",class:"dictation-btn"}),null,16)]),_:1})]),_:1}),l(qe,{cols:"1"})]),_:1})]),_:1})]),_:1})]),_:1}),l(ks,{modelValue:p.value,"onUpdate:modelValue":se[11]||(se[11]=Vt=>p.value=Vt),"max-width":"40%",persistent:""},{default:u(()=>[y.value?(U(),pe(FH,{key:0,medicine:y.value,onClose:ye,"onUpdate:medicine":Ce},null,8,["medicine"])):ge("",!0)]),_:1},8,["modelValue"]),l(ks,{modelValue:h.value,"onUpdate:modelValue":se[12]||(se[12]=Vt=>h.value=Vt),"max-width":"40%",persistent:""},{default:u(()=>[l(xT,{onClose:Se,"onUpdate:medicinelist":Lt})]),_:1},8,["modelValue"]),l(ks,{modelValue:g.value,"onUpdate:modelValue":se[13]||(se[13]=Vt=>g.value=Vt),"max-width":"50%",persistent:""},{default:u(()=>[l(NEe,{consultation:A.value,patient:c.value,"existing-vitals":f.value,onClose:$t,onVitalsSaved:bt},null,8,["consultation","patient","existing-vitals"])]),_:1},8,["modelValue"]),l(ks,{modelValue:w.value,"onUpdate:modelValue":se[14]||(se[14]=Vt=>w.value=Vt),"max-width":"80%",persistent:""},{default:u(()=>[l(aBe,{"patient-id":c.value.id,"patient-name":c.value.name,onClose:Je},null,8,["patient-id","patient-name"])]),_:1},8,["modelValue"]),l(t0,{modelValue:b.value,"onUpdate:modelValue":se[15]||(se[15]=Vt=>b.value=Vt),"current-text":A.value.clinicalNotes,label:"Clinical Notes",onTranscriptionComplete:Qe},null,8,["modelValue","current-text"]),l(t0,{modelValue:x.value,"onUpdate:modelValue":se[16]||(se[16]=Vt=>x.value=Vt),"current-text":A.value.patientNotes,label:"Patient Advice",onTranscriptionComplete:Ve},null,8,["modelValue","current-text"]),l(t0,{modelValue:T.value,"onUpdate:modelValue":se[17]||(se[17]=Vt=>T.value=Vt),"current-text":A.value.doctorNotes,label:"Doctor Notes",onTranscriptionComplete:je},null,8,["modelValue","current-text"])]),_:1})]),_:1})],64)):(U(),pe(At,{key:0,"no-gutters":""},{default:u(()=>[l(qe,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[l(Ut,{indeterminate:"",color:"primary"})]),_:1})]),_:1}))]),_:1}),l($r,{value:"share",class:"h-100"},{default:u(()=>[A.value.id?A.value.id==0?(U(),pe(At,{key:1,"no-gutters":""},{default:u(()=>[l(qe,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%"}},{default:u(()=>[l(en,{image:$e(hR)},{title:u(()=>[...se[78]||(se[78]=[v("div",{class:"text-subtitle-2"}," No consultation selected ",-1)])]),text:u(()=>[v("div",Yke,[se[80]||(se[80]=M(" Create a consultation by clicking on the button above ",-1)),se[81]||(se[81]=v("br",null,null,-1)),l(ft,{class:"mt-2",onClick:Bt},{default:u(()=>[...se[79]||(se[79]=[M("Create Consultation",-1)])]),_:1})])]),_:1},8,["image"])]),_:1})]),_:1})):A.value.id&&!H.value?(U(),pe(At,{key:2,"no-gutters":""},{default:u(()=>[l(qe,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%"}},{default:u(()=>[v("div",Xke,[l(Jt,{size:"48",color:"warning",class:"mb-4"},{default:u(()=>[...se[82]||(se[82]=[M("mdi-alert-circle-outline",-1)])]),_:1}),se[83]||(se[83]=v("div",{class:"text-h6 text-medium-emphasis"},"Invalid consultation",-1)),v("div",Jke,"This consultation cannot be displayed (status: "+K(A.value.status)+")",1)])]),_:1})]),_:1})):(U(),pe(At,{key:3,"no-gutters":"",class:"h-100"},{default:u(()=>[l(qe,{cols:"12"},{default:u(()=>[l(yh,{"content-type":"consultation",data:{consultation:A.value,medicines:d.value,vitals:f.value,printConfigurations:k.value,doctor:E.value},patient:c.value,onPdfGenerated:Ra},null,8,["data","patient"])]),_:1})]),_:1})):(U(),pe(At,{key:0,"no-gutters":""},{default:u(()=>[l(qe,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[l(Ut,{indeterminate:"",color:"primary"})]),_:1})]),_:1}))]),_:1}),l($r,{value:"media",class:"h-100"},{default:u(()=>[l(At,{"no-gutters":"","aria-label":"toolbar",class:"h-100"},{default:u(()=>[l(qe,{cols:"12"},{default:u(()=>[l(qH,{consultation:A.value,patient:c.value},null,8,["consultation","patient"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(ks,{modelValue:xe.value,"onUpdate:modelValue":se[19]||(se[19]=Vt=>xe.value=Vt),persistent:"","max-width":"40%"},{default:u(()=>[l(WSe,{diagnosis:A.value.diagnosis,patientNotes:A.value.patientNotes,investigations:A.value.investigations,medicineList:d.value,"doctor-id":S.value,onClose:Re,"onUpdate&close":Le},null,8,["diagnosis","patientNotes","investigations","medicineList","doctor-id"])]),_:1},8,["modelValue"]),l(ks,{modelValue:Te.value,"onUpdate:modelValue":se[20]||(se[20]=Vt=>Te.value=Vt),persistent:"","max-width":"50%"},{default:u(()=>[l(qSe,{medicineList:d.value,selectedDiagnosis:Me.value,onClose:nt,"onUpdate&close":Tt},null,8,["medicineList","selectedDiagnosis"])]),_:1},8,["modelValue"])],64)}}},YH=Xt(Zke,[["__scopeId","data-v-fb2dae1e"]]),eTe={__name:"create-procedure",emits:["close","update:procedurelist"],setup(e,{emit:t}){const n=t,a=Rn(),r=ae(()=>a.state.doctorModule.doctorId),s=V({procedureName:"",cost:0,description:""}),o=V(!1),i=V(!1),c=[f=>f!=null&&f>=0||"Cost must be a positive number"],A=()=>{n("close")},d=async f=>{if(o.value){if(!r.value){console.error("Doctor ID not available");return}i.value=!0;try{const m=await uT(f.procedureName,f.cost,f.description,!0,"","",r.value);m.error?console.error("Error creating procedure:",m.error):(n("update:procedurelist",m.data),A())}catch(m){console.error("Error creating procedure:",m)}finally{i.value=!1}}};return(f,m)=>{const h=I("v-card-title"),p=I("v-col"),y=I("v-icon"),g=I("v-btn"),w=I("v-row"),b=I("v-card"),x=I("v-text-field"),T=I("v-textarea"),F=I("v-divider"),k=I("v-form");return U(),pe(b,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(w,{"no-gutters":""},{default:u(()=>[l(p,{cols:"12"},{default:u(()=>[l(b,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(w,{"no-gutters":""},{default:u(()=>[l(p,{cols:"11"},{default:u(()=>[l(h,{class:"pa-0 pl-2"},{default:u(()=>[...m[5]||(m[5]=[M("Create New Procedure",-1)])]),_:1})]),_:1}),l(p,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(g,{icon:"",size:"x-small",onClick:A},{default:u(()=>[l(y,null,{default:u(()=>[...m[6]||(m[6]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(w,{"no-gutters":""},{default:u(()=>[l(p,{cols:"12"},{default:u(()=>[l(b,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(k,{modelValue:o.value,"onUpdate:modelValue":m[4]||(m[4]=S=>o.value=S),"validate-on":"blur"},{default:u(()=>[l(w,{"no-gutters":""},{default:u(()=>[l(p,{cols:"12"},{default:u(()=>[l(x,{label:"Procedure Name *",density:"compact",modelValue:s.value.procedureName,"onUpdate:modelValue":m[0]||(m[0]=S=>s.value.procedureName=S),rules:$e(gr)},null,8,["modelValue","rules"])]),_:1}),l(p,{cols:"12"},{default:u(()=>[l(x,{label:"Cost *",density:"compact",modelValue:s.value.cost,"onUpdate:modelValue":m[1]||(m[1]=S=>s.value.cost=S),modelModifiers:{number:!0},type:"number",min:"0",step:"0.01",prefix:"",rules:c},null,8,["modelValue"])]),_:1}),l(p,{cols:"12"},{default:u(()=>[l(T,{label:"Description",density:"compact",modelValue:s.value.description,"onUpdate:modelValue":m[2]||(m[2]=S=>s.value.description=S),rows:"3"},null,8,["modelValue"])]),_:1})]),_:1}),l(F),l(w,{"no-gutters":""},{default:u(()=>[l(p,{cols:"2"}),l(p,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(g,{variant:"outlined",onClick:m[3]||(m[3]=S=>d(s.value)),disabled:!o.value,loading:i.value},{default:u(()=>[...m[7]||(m[7]=[M(" Create ",-1)])]),_:1},8,["disabled","loading"])]),_:1}),l(p,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},tTe={__name:"edit-procedure",props:{procedure:{type:Object,required:!0}},emits:["close","procedureUpdated"],setup(e,{emit:t}){const n=t,a=Rn(),r=ae(()=>a.state.doctorModule.doctorId),o=e.procedure||{},i=V({...Qn.cloneDeep(o),procedureName:o.treatmentName||o.treatment_name||o.procedureName||o.procedure_name||"",description:o.description||o.treatmentDescription||o.procedureDescription||"",cost:o.cost||o.costEstimate||o.cost_estimate||o.procedureCost||0,id:o.id||o.procedure_id||""}),c=V(!1),A=V(!1),d=[h=>h==null||h===""?"Cost is required":h<0?"Cost must be positive":!0],f=()=>{n("close")},m=async()=>{if(!i.value.id){console.error("Cannot update procedure: missing ID");return}if(!r.value){console.error("Doctor ID not available");return}c.value=!0,console.log("Updating procedure",i.value);try{const h=await tO(i.value.id,{procedure_name:i.value.procedureName,description:i.value.description,cost:i.value.cost},r.value);if(h.error)throw console.error("Error updating procedure",h.error),new Error(h.error.message||"Failed to update procedure");console.log("Procedure updated successfully",h.data),n("procedureUpdated",h.data),f()}catch(h){console.error("Error updating procedure",h)}finally{c.value=!1}};return(h,p)=>{const y=I("v-card-title"),g=I("v-col"),w=I("v-icon"),b=I("v-btn"),x=I("v-row"),T=I("v-card"),F=I("v-text-field"),k=I("v-textarea"),S=I("v-divider"),E=I("v-form");return U(),pe(T,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(x,{"no-gutters":""},{default:u(()=>[l(g,{cols:"12"},{default:u(()=>[l(T,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(x,{"no-gutters":""},{default:u(()=>[l(g,{cols:"11"},{default:u(()=>[l(y,{class:"pa-0 pl-2"},{default:u(()=>[...p[4]||(p[4]=[M("Edit Procedure",-1)])]),_:1})]),_:1}),l(g,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(b,{icon:"",size:"x-small",onClick:f},{default:u(()=>[l(w,null,{default:u(()=>[...p[5]||(p[5]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(x,{"no-gutters":""},{default:u(()=>[l(g,{cols:"12"},{default:u(()=>[l(T,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(E,{modelValue:A.value,"onUpdate:modelValue":p[3]||(p[3]=C=>A.value=C),"validate-on":"blur"},{default:u(()=>[l(x,{"no-gutters":""},{default:u(()=>[l(g,{cols:"12"},{default:u(()=>[l(F,{label:"Procedure Name *",density:"compact",modelValue:i.value.procedureName,"onUpdate:modelValue":p[0]||(p[0]=C=>i.value.procedureName=C),clearable:"",rules:$e(gr)},null,8,["modelValue","rules"])]),_:1}),l(g,{cols:"12"},{default:u(()=>[l(k,{label:"Procedure Description",density:"compact",modelValue:i.value.description,"onUpdate:modelValue":p[1]||(p[1]=C=>i.value.description=C),clearable:"",rows:"2","auto-grow":""},null,8,["modelValue"])]),_:1}),l(g,{cols:"12"},{default:u(()=>[l(F,{label:"Base Cost *",density:"compact",modelValue:i.value.cost,"onUpdate:modelValue":p[2]||(p[2]=C=>i.value.cost=C),modelModifiers:{number:!0},type:"number",min:"0",step:"0.01",prefix:"",clearable:"",rules:d},null,8,["modelValue"])]),_:1})]),_:1}),l(S),l(x,{"no-gutters":""},{default:u(()=>[l(g,{cols:"2"}),l(g,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(b,{variant:"outlined",onClick:m,disabled:!A.value,loading:c.value},{default:u(()=>[...p[6]||(p[6]=[M(" Update Procedure ",-1)])]),_:1},8,["disabled","loading"])]),_:1}),l(g,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},nTe={__name:"delete-procedure-treatment",props:{procedureTreatment:{type:Object,required:!0},treatmentPlanId:{type:[String,Number],required:!0}},emits:["close","deleted"],setup(e,{emit:t}){const n=e,a=t,r=V(n.procedureTreatment),s=()=>{a("close")},o=async i=>{try{const c=await nO(n.treatmentPlanId,i.id);c.error?console.error("Error deleting procedure treatment mapping:",c.error):(console.log("Procedure treatment mapping deleted successfully"),a("deleted",i))}catch(c){console.error("Error deleting procedure treatment mapping:",c)}s()};return(i,c)=>{const A=I("v-card-title"),d=I("v-col"),f=I("v-icon"),m=I("v-btn"),h=I("v-row"),p=I("v-card"),y=I("v-card-text"),g=I("v-divider");return U(),pe(p,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(p,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"11"},{default:u(()=>[l(A,{class:"pa-0 pl-2"},{default:u(()=>[...c[1]||(c[1]=[M("Confirm Procedure Removal",-1)])]),_:1})]),_:1}),l(d,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(m,{icon:"",size:"x-small",onClick:s},{default:u(()=>[l(f,null,{default:u(()=>[...c[2]||(c[2]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(p,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(y,{class:"text-left"},{default:u(()=>[...c[3]||(c[3]=[M(" Are you sure you want to remove this procedure from the treatment plan? ",-1),v("span",{class:"text-red font-weight-bold"}," You will not be able to recover this data once deleted. ",-1)])]),_:1})]),_:1})]),_:1}),l(g),l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"2"}),l(d,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(m,{variant:"outlined",onClick:c[0]||(c[0]=w=>o(r.value))},{default:u(()=>[...c[4]||(c[4]=[M("Yes, Remove Procedure",-1)])]),_:1})]),_:1}),l(d,{cols:"2"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},aTe={class:"procedure-name-wrap"},rTe={class:"font-weight-medium"},sTe={class:"text-center"},oTe={__name:"search-procedure",emits:["handleSearchedProcedures","addProcedure"],setup(e,{emit:t}){const n=t,a=Rn(),r=ae(()=>a.state.doctorModule.doctorId),s=()=>{n("addProcedure")},o=V(!1),i=V([]),c=V(""),A=V([]),d=V(!1);let f=null;Ke(c,p=>{if(f&&clearTimeout(f),d.value=!1,!p||p.trim().length===0){o.value=!1;return}f=setTimeout(()=>{m(p)},300)}),Ke(A,p=>{console.log("Search add procedures changed:",p),p.length>0&&(n("handleSearchedProcedures",p),A.value=[])});const m=async p=>{if(!(!p||p.trim().length===0)){if(!r.value){console.error("Doctor ID not available for procedure search");return}o.value=!0,d.value=!1;try{const y=new URLSearchParams;y.append("doctor_id",r.value);const g=await dt.get(`procedure/search_procedure/${p}?${y.toString()}`);i.value=g.data.data.procedures,(!i.value||i.value.length===0)&&(d.value=!0)}catch(y){console.error("Error fetching procedures:",y),d.value=!0}finally{o.value=!1}}},h=ae(()=>!c.value||c.value.trim().length===0?"Start typing to search procedures":o.value?"Searching procedures...":d.value?"No procedures found matching your search. Try different keywords or create new procedure below.":"");return(p,y)=>{const g=I("v-icon"),w=I("v-list-item"),b=I("v-divider"),x=I("v-card-subtitle"),T=I("v-btn"),F=I("v-card"),k=I("v-chip"),S=I("v-autocomplete");return U(),pe(S,{multiple:"",clearable:"","clear-on-select":"","hide-selected":"",chips:"","closable-chips":"",density:"compact",variant:"outlined",label:"Search procedures",items:i.value,search:c.value,"onUpdate:search":y[0]||(y[0]=E=>c.value=E),loading:o.value,"item-title":"procedureName","item-value":"item","return-object":"",modelValue:A.value,"onUpdate:modelValue":y[1]||(y[1]=E=>A.value=E),rounded:"l","prepend-inner-icon":"mdi-magnify","no-data-text":h.value,placeholder:o.value?"Searching...":"Start typing to search procedures"},{item:u(({props:E,item:C,index:D})=>[l(w,Ue(E,{density:"compact"}),{title:u(()=>[v("span",aTe,K(C.raw.procedureName),1)]),append:u(()=>[C.raw.isLocal?(U(),pe(g,{key:0},{default:u(()=>[...y[2]||(y[2]=[v("img",{src:Zd,alt:"Local Procedure"},null,-1)])]),_:1})):(U(),pe(g,{key:1},{default:u(()=>[...y[3]||(y[3]=[v("img",{src:_h,alt:"External Procedure"},null,-1)])]),_:1}))]),_:2},1040),D===i.value.length-1?(U(),me(We,{key:0},[l(b),l(F,{flat:"",class:"pt-1"},{default:u(()=>[l(x,null,{default:u(()=>[...y[4]||(y[4]=[M("Procedure not in list?",-1)])]),_:1}),l(T,{class:"ml-3",variant:"outlined",onClick:s},{default:u(()=>[l(g,{class:"mr-2"},{default:u(()=>[...y[5]||(y[5]=[M("mdi-plus",-1)])]),_:1}),y[6]||(y[6]=M(" Create Procedure ",-1))]),_:1})]),_:1})],64)):ge("",!0)]),chip:u(({props:E,item:C})=>[l(k,Ue(E,{size:"small",class:"mr-1"}),{default:u(()=>[v("span",rTe,K(C.raw.procedureName),1)]),_:2},1040)]),"no-data":u(()=>[c.value&&c.value.trim().length>0?(U(),pe(F,{key:0,flat:"",class:"pa-4"},{default:u(()=>[v("div",sTe,[l(x,{class:"mb-2"},{default:u(()=>[M(K(h.value),1)]),_:1}),l(T,{variant:"outlined",color:"primary",onClick:s},{default:u(()=>[l(g,{class:"mr-2"},{default:u(()=>[...y[7]||(y[7]=[M("mdi-plus",-1)])]),_:1}),y[8]||(y[8]=M(" Create Procedure ",-1))]),_:1})])]),_:1})):(U(),pe(F,{key:1,flat:"",class:"pa-4 text-center"},{default:u(()=>[l(x,null,{default:u(()=>[M(K(h.value),1)]),_:1})]),_:1}))]),_:1},8,["items","search","loading","modelValue","no-data-text","placeholder"])}}},iTe=Xt(oTe,[["__scopeId","data-v-c9cffa1d"]]),lTe={class:"procedure-care-multiline"},uTe={__name:"search-post-procedure-care",props:{doctorId:{type:[String,Number],required:!0}},emits:["postProcedureCareSelected"],setup(e,{emit:t}){const n=e,a=t,r=V(!1),s=V([]),o=V(""),i=V(null),c=V(!1);let A=null;const d=y=>{s.value.some(w=>w.description===y)||(o.value=y)},f=()=>{(!o.value||o.value.length===0)&&s.value.length===0&&h("")},m=y=>{y&&(a("postProcedureCareSelected",y),i.value=null)};Ke(o,y=>{A&&clearTimeout(A),c.value=!1,A=setTimeout(()=>{h(y||"")},300)});const h=async y=>{r.value=!0,c.value=!1;try{const g=y||"",w=await dt.get(`procedure/search_descriptions/${encodeURIComponent(g)}`,{params:{doctor_id:n.doctorId}});s.value=w.data.data.descriptions.filter(b=>b.description&&b.description.trim().length>0),(!s.value||s.value.length===0)&&(c.value=!0)}catch(g){console.error("Error fetching procedure care instructions:",g),c.value=!0}finally{r.value=!1}},p=ae(()=>!o.value||o.value.length<1?r.value?"Loading recent procedure care instructions...":c.value?"No procedure care instructions found. Start typing to search.":"Start typing to search procedure care instructions":r.value?"Searching procedure care instructions...":c.value?"No matches found in procedure care instructions.":"");return Ui(()=>{A&&(clearTimeout(A),A=null)}),(y,g)=>{const w=I("v-icon"),b=I("v-tooltip"),x=I("v-list-item"),T=I("v-card-subtitle"),F=I("v-card"),k=I("v-autocomplete");return U(),pe(k,{modelValue:i.value,"onUpdate:modelValue":[g[0]||(g[0]=S=>i.value=S),m],items:s.value,search:o.value,"onUpdate:search":d,onFocus:f,"item-title":"description","item-value":"description",label:"Search Post-Procedure Care Instructions",placeholder:"Type to search procedure care instructions...",variant:"outlined",loading:r.value,"no-data-text":p.value,clearable:"","hide-no-data":"","auto-select-first":"",density:"compact","return-object":"",class:"procedure-care-search"},{item:u(({props:S,item:E})=>[l(x,Ue(S,{density:"compact",class:"procedure-care-list-item"}),{title:u(()=>[v("div",lTe,K(E.raw.description),1)]),append:u(()=>[l(b,{location:"top"},{activator:u(({props:C})=>[l(w,Ue(C,{size:"small"}),{default:u(()=>[E.raw.isFromHistory?(U(),pe(w,{key:0,icon:"mdi-history",color:"primary"})):ge("",!0)]),_:2},1040)]),default:u(()=>[v("span",null,K(E.raw.isFromHistory?"From your procedure history":"Custom procedure care instructions"),1)]),_:2},1024)]),_:2},1040)]),"no-data":u(()=>[l(F,{flat:"",class:"pa-4 text-center"},{default:u(()=>[l(T,null,{default:u(()=>[M(K(p.value),1)]),_:1})]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},pR=Xt(uTe,[["__scopeId","data-v-69ba2d09"]]),cTe={class:"template-name template-name-truncate"},dTe={class:"text-caption template-subtitle-truncate"},ATe={key:0},fTe={__name:"treatment-plan-template-autocomplete",props:{doctorId:{type:[String,Number],required:!0}},emits:["template-selected"],setup(e,{emit:t}){const n=e,a=t,r=V(null),s=V([]),o=V(""),i=V(!1),c=V(!1);let A=null;const d=w=>{o.value=w},f=()=>{s.value.length===0&&(!o.value||o.value.length===0)&&h()};Ke(o,w=>{if(A&&clearTimeout(A),!w||w.length===0){h();return}A=setTimeout(()=>{p(w)},300)});const m=w=>{w&&typeof w=="object"&&(console.log("Template selected:",w),a("template-selected",{template:w,autoFillData:{treatmentPlanName:w.treatmentPlanName,notes:w.notes||"",procedures:(w.procedures||[]).map(b=>({procedureId:b.procedureId,costEstimate:b.costEstimate||0,procedureCost:b.procedureCost||0,procedureName:b.procedureName||"",location:b.location||"",option:b.option||"",procedureDescription:b.procedureDescription||""}))}}),setTimeout(()=>{r.value=null,o.value="",s.value=[]},100))},h=async()=>{i.value=!0;try{const w=await lO(n.doctorId);w.error?(s.value=[],c.value=!0):(s.value=w.data||[],c.value=!0)}catch(w){console.error("Error fetching all templates:",w),s.value=[],c.value=!0}finally{i.value=!1}},p=async w=>{if(!(!w||w.length===0)){i.value=!0;try{const b=await rO(w,n.doctorId);b.error?s.value=[]:s.value=b.data||[]}catch(b){console.error("Error fetching templates:",b),s.value=[]}finally{i.value=!1}}},y=w=>{const b=[];return w.notes&&b.push(`Notes: ${w.notes.substring(0,30)}...`),w.procedures&&w.procedures.length>0&&b.push(`${w.procedures.length} procedure(s)`),b.join(" | ")||"Template"},g=ae(()=>i.value?!o.value||o.value.length===0?"Loading templates...":"Searching templates...":!o.value||o.value.length===0?c.value&&s.value.length===0?"No saved treatment plan templates found. Create templates during consultations to see them here.":"Click to view your saved treatment plan templates":o.value&&s.value.length===0?`No templates found for "${o.value}". Try a different search term.`:"");return(w,b)=>{const x=I("v-icon"),T=I("v-tooltip"),F=I("v-list-item"),k=I("v-list"),S=I("v-card-subtitle"),E=I("v-card-text"),C=I("v-card"),D=I("v-autocomplete");return U(),pe(D,{modelValue:r.value,"onUpdate:modelValue":[b[0]||(b[0]=P=>r.value=P),m],items:s.value,search:o.value,"onUpdate:search":d,onFocus:f,"item-title":"treatmentPlanName","item-value":"treatmentPlanName",label:"select treatment plan template (optional)",placeholder:"Search saved templates...",variant:"outlined",loading:i.value,"no-data-text":g.value,clearable:"","return-object":"",density:"compact","prepend-inner-icon":"mdi-magnify",class:"template-autocomplete"},{item:u(({props:P,item:O})=>[l(k,{density:"compact",class:"template-search-list"},{default:u(()=>[l(F,Ue(P,{class:"template-search-item"}),{title:u(()=>[v("span",cTe,K(O.raw.treatmentPlanName),1)]),subtitle:u(()=>[v("span",dTe,K(y(O.raw)),1)]),append:u(()=>[l(T,{location:"top"},{activator:u(({props:H})=>[l(x,Ue(H,{size:"small",color:"primary"}),{default:u(()=>[...b[1]||(b[1]=[M(" mdi-bookmark ",-1)])]),_:1},16)]),default:u(()=>[b[2]||(b[2]=v("span",null,"Saved Template",-1))]),_:1})]),_:2},1040)]),_:2},1024)]),"no-data":u(()=>[l(C,{flat:"",class:"pa-4 text-center"},{default:u(()=>[c.value&&s.value.length===0&&!o.value?(U(),me("div",ATe,[l(x,{color:"grey-lighten-1",size:"48",class:"mb-2"},{default:u(()=>[...b[3]||(b[3]=[M("mdi-bookmark-outline",-1)])]),_:1}),l(S,{class:"text-wrap mb-2"},{default:u(()=>[...b[4]||(b[4]=[M("No saved treatment plan templates found",-1)])]),_:1}),l(E,{class:"text-caption text-grey"},{default:u(()=>[...b[5]||(b[5]=[M(" Save treatment plan templates during consultations to quickly reuse them here. ",-1)])]),_:1})])):(U(),pe(S,{key:1,class:"text-wrap"},{default:u(()=>[M(K(g.value),1)]),_:1}))]),_:1})]),_:1},8,["modelValue","items","search","loading","no-data-text"])}}},mTe=Xt(fTe,[["__scopeId","data-v-c280e42e"]]),vTe={class:"text-caption mr-3"},hTe={key:0,class:"text-caption mr-3"},pTe={key:1,class:"text-caption mr-3"},gTe={key:2,class:"text-caption"},yTe={__name:"create-treatment-plan-template",props:{procedureList:{type:Array,default:()=>[]},treatmentPlanName:{type:String,default:""},notes:{type:String,default:""},doctorId:{type:[String,Number],required:!0}},emits:["close","update&close"],setup(e,{emit:t}){const n=e,a=t,r=V(n.treatmentPlanName),s=V(n.notes),o=V(!1),i=V(!1),c=V([]),A=V(""),d=V(null),f=ae(()=>n.procedureList.filter(y=>y.isLocal&&(y.procedureName||y.procedure_name)&&y.id!==void 0&&y.id!==null)),m=()=>{d.value&&d.value.abort(),a("close")},h=(y,g)=>{if(g)c.value.includes(y.id)||c.value.push(y.id),console.log("Procedure selected:",y.procedureName||y.procedure_name);else{const w=c.value.indexOf(y.id);w>-1&&c.value.splice(w,1),console.log("Procedure deselected:",y.procedureName||y.procedure_name)}A.value=""},p=async()=>{if(c.value.length===0){A.value="Please select at least one procedure to create a template";return}i.value=!0,A.value="",d.value=new AbortController;const y=n.procedureList.filter(w=>c.value.includes(w.id)),g={doctor_id:n.doctorId,treatmentplan_name:r.value,notes:s.value||"",procedures:y.map(w=>({procedure_id:w.procedureId||w.procedure_id||w.id,cost_estimate:w.costEstimate!==void 0&&w.costEstimate!==null?parseFloat(w.costEstimate):parseFloat(w.cost||w.procedureCost||0),location:w.location||"",option:w.option||""}))};console.log("Creating new treatment plan template:",g);try{const w=await sO(g);if(d.value?.signal.aborted)return;w.error?(A.value="Failed to create treatment plan template. Please try again.",console.error("Error creating treatment plan template:",w.error)):(console.log("Treatment plan template created successfully"),a("update&close"))}catch(w){d.value?.signal.aborted||(A.value="An unexpected error occurred. Please try again.",console.error("Error creating treatment plan template:",w))}finally{d.value?.signal.aborted||(i.value=!1),d.value=null}};return da(()=>{d.value&&d.value.abort()}),(y,g)=>{const w=I("v-card-title"),b=I("v-col"),x=I("v-icon"),T=I("v-btn"),F=I("v-row"),k=I("v-card"),S=I("v-text-field"),E=I("v-textarea"),C=I("v-divider"),D=I("v-card-subtitle"),P=I("v-checkbox"),O=I("v-chip"),H=I("v-card-text"),ie=I("v-alert"),Ae=I("v-form");return U(),pe(k,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(F,{"no-gutters":""},{default:u(()=>[l(b,{cols:"12"},{default:u(()=>[l(k,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(F,{"no-gutters":""},{default:u(()=>[l(b,{cols:"11"},{default:u(()=>[l(w,{class:"pa-0 pl-2"},{default:u(()=>[...g[3]||(g[3]=[M("Create Treatment Plan Template",-1)])]),_:1})]),_:1}),l(b,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(T,{icon:"",size:"x-small",onClick:m},{default:u(()=>[l(x,null,{default:u(()=>[...g[4]||(g[4]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(F,{"no-gutters":""},{default:u(()=>[l(b,{cols:"12"},{default:u(()=>[l(k,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(Ae,{modelValue:o.value,"onUpdate:modelValue":g[2]||(g[2]=j=>o.value=j),"validate-on":"blur"},{default:u(()=>[l(F,{"no-gutters":""},{default:u(()=>[l(b,{cols:"12"},{default:u(()=>[l(S,{label:"Treatment Plan Name *",density:"compact",modelValue:r.value,"onUpdate:modelValue":g[0]||(g[0]=j=>r.value=j),rules:$e(gr)},null,8,["modelValue","rules"])]),_:1}),l(b,{cols:"12"},{default:u(()=>[l(E,{label:"Notes",density:"compact",modelValue:s.value,"onUpdate:modelValue":g[1]||(g[1]=j=>s.value=j),rows:"2","auto-grow":""},null,8,["modelValue"])]),_:1})]),_:1}),l(F,{"no-gutters":""},{default:u(()=>[l(b,{cols:"12"},{default:u(()=>[l(C,{class:"my-3"},{default:u(()=>[...g[5]||(g[5]=[M("Procedures",-1)])]),_:1}),f.value.length>0?(U(),pe(k,{key:0,variant:"outlined"},{default:u(()=>[l(D,{class:"pb-2"},{default:u(()=>[...g[6]||(g[6]=[M("Available Local Procedures (from current treatment plan):",-1)])]),_:1}),l(H,null,{default:u(()=>[(U(!0),me(We,null,qt(f.value,j=>(U(),pe(k,{key:`available-${j.id}`,flat:""},{default:u(()=>[l(F,{"no-gutters":"",class:"align-center"},{default:u(()=>[l(b,{cols:"auto",class:"d-flex align-center justify-start"},{default:u(()=>[l(P,{"model-value":c.value.includes(j.id),color:"primary",density:"compact","hide-details":"","onUpdate:modelValue":J=>h(j,J)},null,8,["model-value","onUpdate:modelValue"]),l(O,{color:"primary","text-color":"black",size:"small",class:"ml-2"},{default:u(()=>[v("strong",null,K(j.procedureName||j.procedure_name),1)]),_:2},1024)]),_:2},1024),l(b,{cols:"auto",class:"d-flex align-center justify-start flex-wrap ml-4"},{default:u(()=>[v("span",vTe," Base: "+K((j.cost||j.procedureCost||0).toFixed(2)),1),j.costEstimate!==void 0&&j.costEstimate!==null?(U(),me("span",hTe," Final: "+K(parseFloat(j.costEstimate||0).toFixed(2)),1)):ge("",!0),j.location?(U(),me("span",pTe," Location: "+K(j.location),1)):ge("",!0),j.option?(U(),me("span",gTe," Option: "+K(j.option),1)):ge("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):(U(),pe(ie,{key:1,type:"info",variant:"outlined"},{default:u(()=>[...g[7]||(g[7]=[M(" No local procedures available from current treatment plan to add to template. ",-1)])]),_:1})),A.value?(U(),pe(ie,{key:2,type:"error",variant:"outlined",class:"mt-3"},{default:u(()=>[M(K(A.value),1)]),_:1})):ge("",!0)]),_:1})]),_:1}),l(C),l(F,{"no-gutters":""},{default:u(()=>[l(b,{cols:"2"}),l(b,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(T,{variant:"outlined",onClick:p,disabled:!o.value||c.value.length===0,loading:i.value},{default:u(()=>[...g[8]||(g[8]=[M(" Create ",-1)])]),_:1},8,["disabled","loading"])]),_:1}),l(b,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},_Te=Xt(yTe,[["__scopeId","data-v-11bfc2fd"]]),wTe={class:"text-caption mr-3"},bTe={key:0,class:"text-caption mr-3"},xTe={key:1,class:"text-caption mr-3"},CTe={key:2,class:"text-caption"},STe={class:"text-caption mr-3"},ETe={key:0,class:"text-caption mr-3"},BTe={key:1,class:"text-caption mr-3"},kTe={key:2,class:"text-caption"},TTe={__name:"edit-treatment-plan-template",props:{procedureList:{type:Array,required:!0},selectedTemplate:{type:Object,default:null}},emits:["close","update&close"],setup(e,{emit:t}){const n=e,a=t,r=V(null),s=V({}),o=V([]),i=V(!1),c=V(!1),A=V([]),d=V(!1),f=V(""),m=V(null);Ke(()=>n.procedureList,()=>{h()},{deep:!0});const h=()=>{const x=o.value.map(T=>T.procedureId);A.value=n.procedureList.filter(T=>T.isLocal&&T.id!==void 0&&T.id!==null&&!x.includes(T.id)).map(T=>({...T,isSelected:!1,_uniqueKey:`available_${T.id}`}))};un(async()=>{n.selectedTemplate?(r.value=n.selectedTemplate,await p(n.selectedTemplate)):h()});const p=async x=>{if(!x){s.value={},o.value=[],h();return}s.value=Qn.cloneDeep(x),d.value=!0,f.value="";try{const T=await iO(x.id);if(!T.error&&T.data)o.value=(T.data.procedures||[]).map(F=>({...F,isSelected:!0,_uniqueKey:`template_${F.id}`})),console.log("Template procedures fetched:",o.value),h();else throw new Error("Failed to fetch template procedures")}catch(T){console.error("Error fetching template procedures:",T),f.value="Failed to load template procedures. Please try again.",o.value=[],h()}finally{d.value=!1}},y=x=>{console.log("Procedure selection changed:",x.procedureName||x.procedure_name,x.isSelected)},g=x=>{console.log("Template procedure selection changed:",x.procedureName,x.isSelected)},w=async()=>{if(!(!r.value||!c.value)){i.value=!0,f.value="";try{const x=o.value.filter(E=>E.isSelected),T=A.value.filter(E=>E.isSelected),k=[...x,...T].map(E=>({procedure_id:E.procedureId||E.procedure_id||E.id,cost_estimate:E.costEstimate!==void 0&&E.costEstimate!==null?parseFloat(E.costEstimate):parseFloat(E.procedureCost||E.cost||0),location:E.location||"",option:E.option||""})),S=await oO(r.value.id,{treatmentplan_name:s.value.treatmentPlanName,notes:s.value.notes||"",procedures:k});if(S.error){f.value="Failed to update template. Please try again.",console.error("Error updating treatment plan template:",S.error);return}console.log("Template updated successfully"),a("update&close")}catch(x){f.value="An unexpected error occurred. Please try again.",console.error("Error updating template:",x)}finally{i.value=!1}}},b=()=>{m.value&&m.value.abort(),a("close")};return da(()=>{m.value&&m.value.abort()}),(x,T)=>{const F=I("v-card-title"),k=I("v-col"),S=I("v-icon"),E=I("v-btn"),C=I("v-row"),D=I("v-card"),P=I("v-text-field"),O=I("v-textarea"),H=I("v-divider"),ie=I("v-card-subtitle"),Ae=I("v-progress-linear"),j=I("v-card-text"),J=I("v-checkbox"),ue=I("v-chip"),ne=I("v-alert"),Y=I("v-form");return U(),pe(D,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(C,{"no-gutters":""},{default:u(()=>[l(k,{cols:"12"},{default:u(()=>[l(D,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(C,{"no-gutters":""},{default:u(()=>[l(k,{cols:"11"},{default:u(()=>[l(F,{class:"pa-0 pl-2"},{default:u(()=>[...T[3]||(T[3]=[M("Edit Treatment Plan Template",-1)])]),_:1})]),_:1}),l(k,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(E,{icon:"",size:"x-small",onClick:b},{default:u(()=>[l(S,null,{default:u(()=>[...T[4]||(T[4]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(C,{"no-gutters":""},{default:u(()=>[l(k,{cols:"12"},{default:u(()=>[l(D,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(Y,{modelValue:c.value,"onUpdate:modelValue":T[2]||(T[2]=te=>c.value=te),"validate-on":"blur"},{default:u(()=>[l(C,{"no-gutters":""},{default:u(()=>[r.value?(U(),me(We,{key:0},[l(k,{cols:"12"},{default:u(()=>[l(P,{label:"Treatment Plan Name *",density:"compact",modelValue:s.value.treatmentPlanName,"onUpdate:modelValue":T[0]||(T[0]=te=>s.value.treatmentPlanName=te),rules:$e(gr)},null,8,["modelValue","rules"])]),_:1}),l(k,{cols:"12"},{default:u(()=>[l(O,{label:"Notes",density:"compact",rows:"2","auto-grow":"",modelValue:s.value.notes,"onUpdate:modelValue":T[1]||(T[1]=te=>s.value.notes=te)},null,8,["modelValue"])]),_:1}),l(k,{cols:"12"},{default:u(()=>[l(H,{class:"my-3"},{default:u(()=>[...T[5]||(T[5]=[M("Procedures",-1)])]),_:1}),d.value?(U(),pe(D,{key:0,variant:"outlined",class:"mb-3"},{default:u(()=>[l(ie,{class:"pb-2"},{default:u(()=>[...T[6]||(T[6]=[M("Loading template procedures...",-1)])]),_:1}),l(j,null,{default:u(()=>[l(Ae,{indeterminate:""})]),_:1})]),_:1})):o.value.length>0?(U(),pe(D,{key:1,variant:"outlined",class:"mb-3"},{default:u(()=>[l(ie,{class:"pb-2"},{default:u(()=>[...T[7]||(T[7]=[M("Current Template Procedures:",-1)])]),_:1}),l(j,null,{default:u(()=>[(U(!0),me(We,null,qt(o.value,te=>(U(),pe(D,{key:te._uniqueKey||`template-${te.id}`,flat:""},{default:u(()=>[l(C,{"no-gutters":"",class:"align-center"},{default:u(()=>[l(k,{cols:"auto",class:"d-flex align-center justify-start"},{default:u(()=>[l(J,{modelValue:te.isSelected,"onUpdate:modelValue":L=>te.isSelected=L,color:"primary",density:"compact","hide-details":"",onChange:L=>g(te)},null,8,["modelValue","onUpdate:modelValue","onChange"]),l(ue,{color:"primary","text-color":"black",size:"small",class:"ml-2"},{default:u(()=>[v("strong",null,K(te.procedureName),1)]),_:2},1024)]),_:2},1024),l(k,{cols:"auto",class:"d-flex align-center justify-start flex-wrap ml-4"},{default:u(()=>[v("span",wTe," Base: "+K((te.procedureCost||0).toFixed(2)),1),te.costEstimate!==void 0&&te.costEstimate!==null?(U(),me("span",bTe," Final: "+K(parseFloat(te.costEstimate||0).toFixed(2)),1)):ge("",!0),te.location?(U(),me("span",xTe," Location: "+K(te.location),1)):ge("",!0),te.option?(U(),me("span",CTe," Option: "+K(te.option),1)):ge("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):ge("",!0),A.value.length>0?(U(),pe(D,{key:2,variant:"outlined"},{default:u(()=>[l(ie,{class:"pb-2"},{default:u(()=>[...T[8]||(T[8]=[M("Available Local Procedures (from current treatment plan):",-1)])]),_:1}),l(j,null,{default:u(()=>[(U(!0),me(We,null,qt(A.value,te=>(U(),pe(D,{key:te._uniqueKey||`available-${te.id}`,flat:""},{default:u(()=>[l(C,{"no-gutters":"",class:"align-center"},{default:u(()=>[l(k,{cols:"auto",class:"d-flex align-center justify-start"},{default:u(()=>[l(J,{modelValue:te.isSelected,"onUpdate:modelValue":L=>te.isSelected=L,color:"primary",density:"compact","hide-details":"",onChange:L=>y(te)},null,8,["modelValue","onUpdate:modelValue","onChange"]),l(ue,{color:"primary","text-color":"black",size:"small",class:"ml-2"},{default:u(()=>[v("strong",null,K(te.procedureName||te.procedure_name),1)]),_:2},1024)]),_:2},1024),l(k,{cols:"auto",class:"d-flex align-center justify-start flex-wrap ml-4"},{default:u(()=>[v("span",STe," Base: "+K((te.cost||te.procedureCost||0).toFixed(2)),1),te.costEstimate!==void 0&&te.costEstimate!==null?(U(),me("span",ETe," Final: "+K(parseFloat(te.costEstimate||0).toFixed(2)),1)):ge("",!0),te.location?(U(),me("span",BTe," Location: "+K(te.location),1)):ge("",!0),te.option?(U(),me("span",kTe," Option: "+K(te.option),1)):ge("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):(U(),pe(ne,{key:3,type:"info",variant:"outlined"},{default:u(()=>[...T[9]||(T[9]=[M(" No local procedures available from current treatment plan to add to template. ",-1)])]),_:1})),f.value?(U(),pe(ne,{key:4,type:"error",variant:"outlined",class:"mt-3"},{default:u(()=>[M(K(f.value),1)]),_:1})):ge("",!0)]),_:1})],64)):(U(),pe(k,{key:1,cols:"12"},{default:u(()=>[l(ne,{type:"info",variant:"outlined"},{default:u(()=>[...T[10]||(T[10]=[M(" No treatment plan template selected for editing. ",-1)])]),_:1})]),_:1}))]),_:1}),l(H),l(C,{"no-gutters":""},{default:u(()=>[l(k,{cols:"2"}),l(k,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(E,{variant:"outlined",onClick:w,disabled:!c.value||!r.value,loading:i.value},{default:u(()=>[...T[11]||(T[11]=[M(" Update ",-1)])]),_:1},8,["disabled","loading"])]),_:1}),l(k,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},ITe=Xt(TTe,[["__scopeId","data-v-a21afca5"]]),d2=e=>{if(!e)return"";try{const t=typeof e=="string"?fh(e):new Date(e);return wo(t,"MMMM d, yyyy")}catch{return e}},FTe=(e,t,n)=>{const a=d2(e.dueDate);return`Hi ${n},

This is a reminder for your upcoming appointment with Dr. ${t}.

 Date: ${a}

Please arrive 10 minutes early. Contact us if you need to reschedule.

Best regards,
Dr. ${t}`},PTe=(e,t,n)=>{const a=d2(e.details.consultationDate),r=d2(e.dueDate);return`Hi ${n},

Your follow-up consultation with Dr. ${t} is due.

 Original Consultation: ${a}
 Follow-up Due: ${r}

Please schedule your follow-up appointment. Contact us to book a slot.

Best regards,
Dr. ${t}`},DTe=(e,t,n)=>{const a=d2(e.dueDate);let r="",s="";if(e.details.procedures&&Array.isArray(e.details.procedures)){const o=e.details.procedures.filter(c=>c.status==="completed").map(c=>c.procedure_name||c.procedureName).filter(c=>c),i=e.details.procedures.filter(c=>["proposed","ongoing","active","scheduled"].includes(c.status)).map(c=>c.procedure_name||c.procedureName).filter(c=>c);r=o.length>0?o.join(", "):"None",s=i.length>0?i.join(", "):"None"}else{if(e.procedureDetails){if(e.procedureDetails.includes("Completed:")){const o=e.procedureDetails.match(/Completed: ([^]+)/);r=o?o[1].trim():"None"}if(e.procedureDetails.includes("Pending:")){const o=e.procedureDetails.match(/Pending: ([^]*)/);s=o?o[1].trim():"None"}}r||(r="None"),s||(s="None")}return`Hi ${n},

This is a reminder for your treatment plan follow-up with Dr. ${t}.

 Follow-up Due: ${a}
 Completed: ${r}
 Pending: ${s}

Please contact us to schedule your next visit.

Best regards,
Dr. ${t}`},XH=async(e,t)=>{let n=e;n=n.replace(/\D/g,""),!n.startsWith("91")&&n.length===10&&(n="91"+n);const a=`https://api.whatsapp.com/send?phone=${n}&text=${encodeURIComponent(t)}`;try{const{ipcRenderer:r}=window.require("electron"),s=await r.invoke("open-external",a);return s.success?(console.log("Successfully opened WhatsApp with system default browser"),{success:!0}):(console.error("Failed to open WhatsApp via Electron:",s.error),window.open(a,"_blank","noopener,noreferrer"),{success:!0})}catch(r){return console.error("Failed to use Electron IPC:",r),window.open(a,"_blank","noopener,noreferrer"),{success:!0}}},JH=e=>{if(!e)return!1;const t=e.replace(/\D/g,"");return t.length===10||t.length===12&&t.startsWith("91")},UTe=async(e,t)=>{try{if(!e)throw new Error("Reminder data is required");if(!t?.doctorName)throw new Error("Doctor information is required");const n=e.details?.patient_phone||e.details?.contactNumber||e.details?.contact_number;if(!n)throw new Error("Patient contact number not available");if(!JH(n))throw new Error("Invalid phone number format");const a=e.patientName||"Patient",r=t.doctorName;let s;switch(e.type){case"appointment":s=FTe(e,r,a);break;case"consultation":s=PTe(e,r,a);break;case"procedures":s=DTe(e,r,a);break;default:throw new Error(`Unsupported reminder type: ${e.type}`)}if((await XH(n,s)).success)return{success:!0,message:`WhatsApp reminder sent to ${a}`};throw new Error("Failed to open WhatsApp")}catch(n){return console.error("WhatsApp reminder failed:",n),{success:!1,error:n.message}}},RTe=(e,t,n,a,r)=>`Hi ${r},

Post-procedure care instructions for ${e}:

${t}

Best regards,
Dr. ${a}`,NTe=async(e,t,n)=>{try{if(!e)throw new Error("Procedure data is required");if(!t)throw new Error("Patient data is required");if(!n?.doctorName)throw new Error("Doctor information is required");const a=t.contactNumber||t.phoneNumber||t.contact_number||t.patient_phone;if(!a)throw new Error("Patient contact number not available");if(!JH(a))throw new Error("Invalid phone number format");const r=t.name||t.patientName||"Patient",s=n.doctorName,o=e.procedureName||e.procedure?.procedure_name||e.procedure_name||"Procedure",i=e.postProcedureCare||e.instructions||"",c=e.startDate||e.procedureDate||e.treatmentPlan?.startDate||new Date().toISOString().split("T")[0];if(!i||!i.trim())throw new Error("Post-procedure care instructions are required");const A=RTe(o,i.trim(),c,s,r);if((await XH(a,A)).success)return{success:!0,message:`Post-procedure care instructions sent to ${r}`};throw new Error("Failed to open WhatsApp")}catch(a){return console.error("WhatsApp post-procedure care failed:",a),{success:!1,error:a.message}}},VTe={class:"text-caption"},LTe={key:0,class:"d-flex flex-wrap gap-1 align-center mt-1"},MTe={class:"d-flex flex-wrap gap-2 align-center"},OTe={key:0,class:"mt-2"},HTe={key:0,class:"text-caption text-medium-emphasis ml-2"},$Te={key:0,class:"mt-3 mb-3"},QTe={class:"text-center"},GTe={class:"text-body-2 font-weight-medium mb-0"},zTe={class:"text-center"},KTe={class:"text-body-2 font-weight-medium mb-0"},WTe={class:"text-center"},jTe={class:"text-body-2 font-weight-medium mb-0"},qTe={class:"text-center"},YTe={class:"text-body-2 font-weight-medium mb-0"},XTe={class:"text-center"},JTe={class:"text-center"},ZTe={key:1,class:"d-flex justify-center align-center pa-4"},e4e={key:2,class:"payment-receipts-container"},t4e={class:"d-flex align-center flex-wrap payment-receipt-details"},n4e={class:"text-subtitle-2 font-weight-bold receipt-id"},a4e={class:"text-caption text-medium-emphasis receipt-date"},r4e={class:"text-caption receipt-amount"},s4e={class:"text-caption receipt-amount"},o4e={class:"text-caption text-error receipt-amount"},i4e={key:0,class:"mx-2 pb-2"},l4e={class:"text-subtitle-2 text-medium-emphasis"},u4e={class:"d-flex align-center gap-2"},c4e={class:"text-subtitle-2 text-left"},d4e=["src","alt"],A4e={class:"mx-2 pb-2"},f4e={class:"text-subtitle-2 text-medium-emphasis"},m4e={class:"mb-1"},v4e={class:"procedure-name text-body-2 font-weight-bold text-left"},h4e={class:"text-body-2 font-weight-medium text-left d-flex align-center gap-1"},p4e={class:"d-flex align-center gap-1"},g4e={class:"d-flex justify-start align-center gap-2"},y4e={class:"d-flex justify-start"},_4e={key:2,class:"text-center py-8"},w4e={key:0,class:"date-section mb-4"},b4e={class:"date-header-vertical mb-3",style:{"margin-top":"16px","margin-left":"8px"}},x4e={class:"text-subtitle-2 text-left mb-1"},C4e={class:"d-flex flex-wrap gap-2 align-center mb-1"},S4e={class:"text-caption text-medium-emphasis procedure-description"},E4e={class:"text-subtitle-2 text-left mb-1"},B4e={class:"d-flex flex-wrap gap-2 align-center mb-1"},k4e={class:"text-caption text-medium-emphasis procedure-description"},T4e={key:1,class:"text-center py-8"},I4e={__name:"procedure-window",props:{treatmentPlan:{type:Object,default:()=>({id:"0"})},patient:{type:Object,default:()=>({})}},emits:["update:treatmentPlan","createNewTreatmentPlan"],setup(e,{emit:t}){const n=e,a=t,r=Rn(),s=ae(()=>r.state.doctorModule.doctorId),o=ae(()=>r.getters["doctorModule/currentDoctor"]),{showSuccess:i,showError:c}=ra(),A=V("plan"),d=V({}),f=V([]),m=V([]),h=V(!1),p=V(!1),y=V(!1),g=V(null),w=V(null),b=V([]),x=V(!1),T=V(!1),F=V(!1),k=V(null),S=V([]),E=V(!1),C=V(!1),D=V(null),P=V(new Set),O=V(!1),H=V({}),ie=V(!1),Ae=V(null),j=V(!1),J=V(null),ue=V(new Map),ne=V({}),Y=V({show:!1,text:"",color:"success"}),te=[{title:"Proposed",value:"proposed"},{title:"Ongoing",value:"ongoing"},{title:"Completed",value:"completed"},{title:"Deleted",value:"deleted"}],L=[{title:"Proposed",value:"proposed"},{title:"Ongoing",value:"ongoing"},{title:"Completed",value:"completed"},{title:"On Hold",value:"on_hold"},{title:"Cancelled",value:"cancelled"}],N=ae(()=>!f.value||f.value.length===0?0:f.value.filter(oe=>oe.isSelected&&oe.status?.toLowerCase()!=="cancelled").reduce((oe,se)=>{const be=se.procedureCost||0;return oe+be},0)),q=ae(()=>!f.value||f.value.length===0?0:f.value.filter(oe=>oe.isSelected&&oe.status?.toLowerCase()!=="cancelled").reduce((oe,se)=>{const be=se.costEstimate||se.cost_estimate,Fe=se.procedureCost||0;return oe+(be!==void 0?be:Fe)},0)),Q=ae(()=>!f.value||f.value.length===0?0:f.value.filter(oe=>oe.isSelected&&oe.status?.toLowerCase()==="completed"&&oe.status?.toLowerCase()!=="cancelled").reduce((oe,se)=>{const be=se.costEstimate||se.cost_estimate,Fe=se.procedureCost||0;return oe+(be!==void 0?be:Fe)},0)),ee=ae(()=>!k.value||k.value.length===0?0:k.value.reduce((oe,se)=>oe+(se.totalPaid||0),0)),z=ae(()=>Math.max(0,Q.value-ee.value)),X=ae(()=>f.value?f.value.some(oe=>(oe.option||oe.options||"").trim()!==""&&oe.status?.toLowerCase()!=="cancelled"):!1),le=ae(()=>f.value?f.value.filter(oe=>oe.status?.toLowerCase()!=="cancelled"):[]);ae(()=>{if(!f.value)return[];const oe={ongoing:1,on_hold:2,proposed:3,completed:4,cancelled:5},se=Fe=>{const at=Fe.start_date||Fe.startDate,rt=Fe.created_at||Fe.createdAt;return at?new Date(at):rt?new Date(rt):new Date(0)},be=[...f.value];return be.length>100?be.sort((Fe,at)=>{const rt=ue.value.get(Fe.id)||{status:Fe.status?.toLowerCase(),date:se(Fe)},qe=ue.value.get(at.id)||{status:at.status?.toLowerCase(),date:se(at)},At=oe[rt.status]||999,Ut=oe[qe.status]||999;return At!==Ut?At-Ut:qe.date-rt.date}):be.sort((Fe,at)=>{const rt=ue.value.get(Fe.id)||{status:Fe.status?.toLowerCase(),date:se(Fe)},qe=ue.value.get(at.id)||{status:at.status?.toLowerCase(),date:se(at)},At=oe[rt.status]||999,Ut=oe[qe.status]||999;return At!==Ut?At-Ut:qe.date-rt.date})});const re=ae(()=>{if(!f.value||f.value.length===0)return{unscheduled:[],dateGroups:[]};const oe={ongoing:1,on_hold:2,proposed:3,completed:4,cancelled:5},se=rt=>rt.sort((qe,At)=>{const Ut=(qe.status||"proposed").toLowerCase(),ft=(At.status||"proposed").toLowerCase(),en=oe[Ut]||999,Jt=oe[ft]||999;return en-Jt}),be=[],Fe={};f.value.forEach(rt=>{const At=ue.value.get(rt.id)?.startDate;if(!At)be.push(rt);else{const Ut=new Date(At),ft=new Date,en=Ut.getFullYear()===ft.getFullYear(),Jt=Ut.toLocaleDateString("en-US",{timeZone:"Asia/Kolkata",month:"short",day:"numeric",...en?{}:{year:"numeric"}}),wn=Ut.toLocaleDateString("en-US",{timeZone:"Asia/Kolkata",year:"numeric",month:"long",day:"numeric"});Fe[Jt]||(Fe[Jt]={date:Jt,fullDate:wn,rawDate:Ut,procedures:[]}),Fe[Jt].procedures.push(rt)}}),se(be),Object.values(Fe).forEach(rt=>{se(rt.procedures)});const at=Object.values(Fe).sort((rt,qe)=>rt.rawDate.getTime()-qe.rawDate.getTime());return{unscheduled:be,dateGroups:at}}),de=async()=>{if(!d.value?.id||d.value.id==="0"){f.value=[];return}try{const oe=await Cf(d.value.id);if(oe.error)throw new Error(oe.error.message||"Failed to load procedure details");let se=oe.data.procedures||[];se=se.sort((be,Fe)=>{const at=be.option||be.options||"",rt=Fe.option||Fe.options||"";return!at&&rt?-1:at&&!rt?1:at.localeCompare(rt)}),f.value=se,f.value.forEach(be=>{Ve(be)}),Hn()}catch(oe){console.error("Error loading procedure treatments:",oe),f.value=[]}},G=async()=>{if(!d.value?.id||d.value.id==="0"){k.value=[];return}try{k.value=null;const oe=await Sw(r,"",d.value.id);if(oe.error)throw new Error(oe.error.message||"Failed to load payment receipts");k.value=oe.data||[]}catch(oe){console.error("Error loading payment receipts:",oe),k.value=[],wt("Failed to load payment receipts","error")}};Ke(()=>n.treatmentPlan,oe=>{oe&&(d.value=Qn.cloneDeep(oe),(d.value.amountPaid===void 0||d.value.amountPaid===null)&&(d.value.amountPaid=0),O.value&&(H.value={treatmentPlanName:d.value.treatmentPlanName||"",status:d.value.status||"proposed",startDate:d.value.startDate||"",endDate:d.value.endDate||"",followupDate:d.value.followupDate||"",notes:d.value.notes||"",isReminded:d.value.isReminded||!1}),de(),oe.id&&oe.id!=="0"?G():k.value=[])},{immediate:!0,deep:!0}),Ke(()=>H.value.followupDate,(oe,se)=>{oe&&se&&oe!==se&&H.value.isReminded&&(H.value.isReminded=!1,console.log("Follow-up date changed, setting reminder to pending"))});const Z=oe=>{console.log("Tab changed to:",oe)},ce=()=>{a("createNewTreatmentPlan",{treatmentPlanName:"New Treatment Plan",startDate:"",endDate:"",followupDate:"",status:"proposed",notes:"",amountPaid:0,isTemplate:!1})},Se=async()=>{if(!s.value){console.error("Doctor ID not available");return}x.value=!0;try{const oe=await eO("",s.value);if(oe.error)throw new Error(oe.error.message||"Failed to load procedures");b.value=oe.data}catch(oe){console.error("Error loading procedures:",oe),wt("Failed to load procedures","error")}finally{x.value=!1}},Pe=async oe=>{if(!d.value?.id||d.value.id==="0"){wt("Please create a treatment plan first","error");return}const{template:se,autoFillData:be}=oe;if(!be.procedures||be.procedures.length===0){wt("Template has no procedures to copy","warning");return}try{const Fe=await dt.put(`/treatmentplan/${d.value.id}`,{treatmentplan_name:be.treatmentPlanName,notes:be.notes||""});if(!Fe.data.success)throw new Error(Fe.data.error||"Failed to update treatment plan details");let at=0,rt=0;const qe=[];for(const At of be.procedures)try{await dt.post(`/treatmentplan/${d.value.id}/procedure`,{procedure_id:At.procedureId,cost_estimate:At.costEstimate||0,location:At.location||"",option:At.option||"",notes:""}),at++}catch(Ut){rt++,qe.push(At.procedureName||"Unknown"),console.error("Error adding procedure from template:",Ut)}await zt(),S.value.find(At=>At.id===se.id)||S.value.push(se),rt===0?wt(`Applied template "${se.treatmentPlanName}": ${at} procedure(s) added`,"success"):wt(`Template applied with partial success: ${at} succeeded, ${rt} failed. Failed: ${qe.join(", ")}`,"warning")}catch(Fe){console.error("Error applying template:",Fe),wt("Failed to apply template","error")}},ye=()=>{E.value=!0},Ce=()=>{E.value=!1},_e=()=>{E.value=!1,wt("Treatment plan template created successfully","success")},De=oe=>{D.value=oe,C.value=!0},xe=()=>{C.value=!1,D.value=null},Te=()=>{C.value=!1,D.value=null,wt("Treatment plan template updated successfully","success")},Me=oe=>{S.value=S.value.filter(se=>se.id!==oe)},et=()=>{h.value=!0},lt=async oe=>{console.log("Searched Procedures received:",oe),console.log("Current selectedProcedures before:",m.value);for(const se of oe)await Re(se);console.log("Current selectedProcedures after:",m.value)},Re=async oe=>{if(console.log("Adding procedure to staging:",oe),oe.isLocal===!0){console.log("Local procedure - saving directly to treatment plan"),await Le(oe);return}console.log("Server procedure - adding to staging area");const se=m.value.some(be=>be.id===oe.id);if(console.log("Procedure already exists in staging:",se),se)console.log("Procedure already in staging, skipping");else{const be={...oe,cost:oe.cost||0,costEstimate:oe.cost||0,location:oe.location||"",options:oe.option||"",isSelected:!0,isLocal:oe.isLocal!==void 0?oe.isLocal:!0,stagingId:`staging_${Date.now()}_${oe.id||Math.random()}`};console.log("Staged Procedure:",be),m.value.push(be),console.log("Updated staging list:",m.value)}},Le=async oe=>{if(!d.value.id||d.value.id==="0"){wt("Please select a valid treatment plan first","error");return}try{console.log("Saving local procedure directly:",oe);const se=await Sp(d.value.id,oe.id,oe.cost||0,"","","");if(se.error)throw new Error(se.error.message||"Failed to save procedure to treatment plan");await de(),wt(`"${oe.procedureName}" added to treatment plan`,"success")}catch(se){console.error("Error saving local procedure directly:",se),wt("Failed to add procedure to treatment plan","error")}},nt=async()=>{if(!d.value.id||d.value.id==="0"){wt("Please select a valid treatment plan first","error");return}if(m.value.length===0){wt("No procedures selected to save","warning");return}T.value=!0;let oe=0;try{for(const se of m.value)if(se.isSelected){let be=se.id;if(!se.isLocal&&!se.id.toString().startsWith("staging_"))try{if(console.log("Creating local procedure for server procedure:",se),!s.value)throw new Error("Doctor ID not available");const at=await uT(se.procedureName,se.cost||0,"",!0,se.id.toString().replace("server_",""),se.identifier||"",s.value);if(at.error)throw console.error("API Error Response:",at.error),new Error(at.error.message||"Failed to create local procedure entry");be=at.data.id,console.log("Server procedure saved to local DB with ID:",be)}catch(at){throw console.error("Error saving server procedure to local DB:",at),at}const Fe=await Sp(d.value.id,be,se.costEstimate||se.cost||0,"",se.location||"",se.option||"");if(Fe.error)throw new Error(Fe.error.message||"Failed to save procedure to treatment plan");oe++}oe>0&&(m.value=[],await de(),wt(`${oe} procedure(s) added to treatment plan successfully`,"success"))}catch(se){console.error("Error saving procedures to treatment plan:",se),wt("Failed to save procedures to treatment plan","error")}finally{T.value=!1}},Tt=oe=>{m.value=m.value.filter(se=>se.stagingId!==oe)},Pt=async()=>{if(!d.value?.id||d.value.id==="0"){wt("Please select a valid treatment plan first","error");return}if(!f.value||f.value.length===0){wt("No procedures to save","warning");return}F.value=!0;let oe=0;try{for(const se of f.value){const be={cost_estimate:se.costEstimate||se.procedureCost||0,notes:se.notes||"",location:se.location||"",option:se.option||"",status:se.status||"proposed",start_date:se.startDate||null,end_date:se.endDate||null},Fe=await rE(d.value.id,se.id,be);Fe.error?console.error("Error saving procedure treatment:",se.id,Fe.error):oe++}oe>0?(wt(`${oe} procedure(s) saved successfully`,"success"),await de()):wt("No procedures were saved","warning")}catch(se){console.error("Error saving procedure treatments:",se),wt("Failed to save procedure treatments","error")}finally{F.value=!1}},Kt=async oe=>{(!oe.costEstimate||oe.costEstimate===0)&&(oe.costEstimate=oe.procedureCost||0),console.log("Final cost updated for procedure:",oe.id,"New cost:",oe.costEstimate)},$t=oe=>{console.log("Edit procedure - original procedureTreatment:",oe),console.log("ProcedureTreatment keys:",Object.keys(oe)),console.log("ProcedureTreatment ID:",oe.id),console.log("ProcedureTreatment procedure_id:",oe.procedure_id),console.log("ProcedureTreatment procedure:",oe.procedure),console.log("ProcedureTreatment costEstimate:",oe.costEstimate),console.log("ProcedureTreatment cost_estimate:",oe.cost_estimate);const se={id:oe.procedureId||oe.procedure_id||oe.procedure?.id,procedureName:oe.procedureName||oe.procedure_name||oe.procedure?.procedureName,description:oe.procedureDescription||oe.procedure_description||oe.procedure?.description||"",cost:oe.procedureCost||oe.procedure_cost||oe.procedure?.cost||0,isLocal:oe.isLocal||oe.procedure?.isLocal||!0};console.log("Extracted actual procedure for editing:",se),g.value=se,p.value=!0},bt=async oe=>{if(!d.value?.id||d.value.id==="0"){wt("Please select a valid treatment plan first","error");return}try{console.log("Duplicating procedure:",oe);const se=oe.procedureId||oe.procedure_id,be=oe.costEstimate||oe.cost_estimate||0;if(!se){wt("Unable to determine procedure ID for duplication","error");return}const Fe=await Sp(d.value.id,se,be,"","","");if(Fe.error){console.error("Error duplicating procedure:",Fe.error),wt("Failed to duplicate procedure","error");return}await de();const at=oe.procedure?.procedure_name||oe.procedureName||oe.procedure_name||"procedure";wt(`"${at}" duplicated successfully`,"success")}catch(se){console.error("Error duplicating procedure:",se),wt("Failed to duplicate procedure","error")}},st=async oe=>{if(console.log("New procedure created:",oe),console.log("Local treatment plan:",d.value),console.log("Procedure ID:",oe.id),console.log("Procedure cost:",oe.cost),!d.value.id||d.value.id==="0"){console.error("No valid treatment plan selected"),wt("Please select a valid treatment plan first","error");return}if(!oe.id){console.error("No procedure ID received from creation"),wt("Procedure was created but ID is missing","error");return}try{console.log("Making API call with:",{treatmentPlanId:d.value.id,procedureId:oe.id,costEstimate:oe.cost,notes:""});const se=await Sp(d.value.id,oe.id,oe.cost,"","","");if(console.log("API response:",se),se.error){console.error("API error details:",se.error);const be=se.error.response?.data?.error||se.error.message||"Failed to link procedure to treatment plan";throw new Error(be)}await de(),wt("Procedure added to treatment plan successfully","success")}catch(se){console.error("Error linking procedure to treatment plan:",se),console.error("Error stack:",se.stack);let be="Failed to add procedure to treatment plan";se.message&&(be=se.message),wt(be,"error")}},Je=()=>{h.value=!1},Nt=()=>{p.value=!1,g.value=null},rn=oe=>{w.value=oe,y.value=!0},Lt=()=>{y.value=!1,w.value=null},_t=async oe=>{console.log("Procedure treatment deleted:",oe),await de(),wt("Procedure removed from treatment plan successfully","success")},ut=()=>{F.value||(O.value||(H.value={treatmentPlanName:d.value.treatmentPlanName||"",status:d.value.status||"proposed",startDate:d.value.startDate||"",endDate:d.value.endDate||"",followupDate:d.value.followupDate||"",notes:d.value.notes||"",isReminded:d.value.isReminded||!1}),O.value=!O.value)},Ft=async()=>{if(!d.value?.id||d.value.id==="0"){wt("Please select a valid treatment plan first","error");return}if(!H.value.treatmentPlanName?.trim()){wt("Treatment plan name is required","error");return}F.value=!0;try{const oe=await dt.put(`/treatmentplan/${d.value.id}`,{treatmentplan_name:H.value.treatmentPlanName,status:H.value.status,start_date:H.value.startDate||null,end_date:H.value.endDate||null,followup_date:H.value.followupDate||null,notes:H.value.notes||"",isReminded:H.value.isReminded||!1});if(!oe.data.success)throw new Error(oe.data.error||"Failed to update treatment plan");O.value=!1,H.value={},await zt(),wt("Treatment plan updated successfully","success")}catch(oe){console.error("Error saving treatment plan changes:",oe),wt("Failed to update treatment plan","error")}finally{F.value=!1}},zt=async()=>{try{const oe=await Cf(d.value.id);if(oe.error)throw new Error(oe.error||"Failed to fetch treatment plan details");const se=Qn.cloneDeep(oe.data);d.value=se,await de(),await G(),a("update:treatmentPlan",se),console.log("Emitted fresh treatment plan data to parent:",se)}catch(oe){console.error("Error refreshing treatment plan data after save:",oe),a("update:treatmentPlan",Qn.cloneDeep(d.value))}},dn=async oe=>{console.log("Procedure updated:",oe),await de(),wt("Procedure updated successfully","success")},Hn=()=>{if(!f.value)return;const oe=se=>{const be=se.start_date||se.startDate,Fe=se.created_at||se.createdAt;return be?new Date(be):Fe?new Date(Fe):new Date(0)};f.value.forEach(se=>{if(!ue.value.has(se.id)){const be=se.start_date||se.startDate;ue.value.set(se.id,{status:se.status?.toLowerCase(),date:oe(se),startDate:be||null})}})},Ze=async oe=>{if(!d.value?.id||d.value.id==="0"){wt("Please select a valid treatment plan first","error");return}oe.isUpdating=!0;try{console.log("Updating procedure treatment progress:",oe),console.log("Procedure treatment keys:",Object.keys(oe)),console.log("Treatment procedure ID:",oe.id);const se=oe.id;if(!se)throw console.error("No treatment procedure ID found in procedure treatment object"),new Error("Treatment procedure ID not found in treatment data");const be={cost_estimate:oe.costEstimate||oe.cost_estimate||0,notes:oe.notes||"",location:oe.location||"",status:oe.status||"proposed",start_date:oe.startDate||"",end_date:oe.endDate||""};console.log("Sending update with treatmentProcedureId:",se,"updateData:",be);const Fe=await rE(d.value.id,se,be);if(Fe.error)throw new Error(Fe.error.message||"Failed to update procedure treatment");console.log("Update response:",Fe),ue.value.delete(oe.id),await de(),wt("Procedure progress updated successfully","success")}catch(se){console.error("Error updating procedure treatment:",se),wt("Failed to update procedure progress","error")}finally{oe.isUpdating=!1}},Ge=oe=>{switch(oe?.toLowerCase()){case"proposed":return"grey";case"ongoing":return"primary";case"completed":return"success";case"on_hold":return"warning";case"cancelled":return"error";default:return"grey"}},xt=oe=>{const se=new Set(P.value);if(se.has(oe))se.delete(oe);else{se.add(oe);const be=f.value.find(Fe=>Fe.id===oe);if(be&&(be.postProcedureCare===void 0||be.postProcedureCare===null)){const Fe=be.procedure?.description||be.procedureDescription||be.procedure_description||be.description||"";be.postProcedureCare=Fe,console.log("Initialized postProcedureCare from procedure description:",Fe)}}P.value=se},gt=oe=>P.value.has(oe),Bt=oe=>{try{return new Date(oe).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}catch{return oe}},wt=(oe,se="success")=>{Y.value={show:!0,text:oe,color:se}},gn=oe=>{Ae.value=oe,ie.value=!0},Wn=oe=>{console.log("Progress notes transcription completed:",oe),oe&&oe.trim()&&Ae.value&&(Ae.value.notes&&Ae.value.notes.trim()?Ae.value.notes+=" "+oe:Ae.value.notes=oe),ie.value=!1,Ae.value=null},zn=(oe,se)=>{if(!oe||!oe.description||!se)return;const be=oe.description||"",Fe=se.postProcedureCare||"";Fe.trim()?se.postProcedureCare=Fe.trim()+", "+be:se.postProcedureCare=be},oa=oe=>{J.value=oe,j.value=!0},Ra=oe=>{console.log("Post-procedure care transcription completed:",oe),oe&&oe.trim()&&J.value&&(J.value.postProcedureCare&&J.value.postProcedureCare.trim()?J.value.postProcedureCare+=" "+oe:J.value.postProcedureCare=oe),j.value=!1,J.value=null},Be=oe=>{const se=oe?.contactNumber||oe?.phoneNumber||oe?.contact_number||oe?.patient_phone;if(!se)return!1;const be=se.replace(/\D/g,"");return be.length===10||be.length===12&&be.startsWith("91")},Qe=async oe=>{try{if(!o.value){c("Please select a doctor first");return}if(!Be(n.patient)){c("Patient contact number not available or invalid");return}if(!oe.postProcedureCare||!oe.postProcedureCare.trim()){c("Post-procedure care instructions are required");return}oe.sendingWhatsApp=!0,console.log(" Sending post-procedure care instructions via WhatsApp");const se={procedureName:oe.procedure?.procedure_name||oe.procedureName||oe.procedure_name||"Procedure",postProcedureCare:oe.postProcedureCare.trim(),startDate:oe.startDate||oe.start_date||d.value.startDate||new Date().toISOString().split("T")[0],procedure:oe.procedure,treatmentPlan:d.value},be=await NTe(se,n.patient,o.value);if(be.success){const Fe=oe.procedureId||oe.procedure_id||oe.procedure?.id;if(Fe)try{await aO(Fe,oe.postProcedureCare.trim(),s.value),console.log(" Updated procedure.description with shared instructions")}catch(at){console.error(" Failed to update procedure.description:",at)}i(be.message||"Post-procedure care instructions sent successfully")}else throw new Error(be.error||"Failed to send post-procedure care instructions")}catch(se){console.error(" WhatsApp post-procedure care failed:",se),c(se.message||"Failed to send post-procedure care instructions")}finally{oe&&(oe.sendingWhatsApp=!1)}},ke=()=>"primary",Ve=oe=>{oe.scalePercentage===void 0&&(oe.scalePercentage=100),oe.finalCost===void 0&&(oe.finalCost=oe.costEstimate||oe.cost_estimate||oe.procedure?.cost||0),oe.option===void 0&&(oe.option=oe.option||""),oe.isSelected===void 0&&(oe.isSelected=!0),oe.status===void 0&&(oe.status="proposed"),oe.startDate===void 0&&(oe.startDate=""),oe.endDate===void 0&&(oe.endDate=""),oe.notes===void 0&&(oe.notes=""),oe.isUpdating===void 0&&(oe.isUpdating=!1),oe.sendingWhatsApp===void 0&&(oe.sendingWhatsApp=!1)},ze=oe=>{console.log("Treatment plan PDF generated:",oe)},je=async()=>{if(!s.value){console.warn("Doctor ID not available for loading print configurations"),ne.value={};return}try{const{fetchPrintConfigs:oe}=await Jr(async()=>{const{fetchPrintConfigs:be}=await Promise.resolve().then(()=>M_e);return{fetchPrintConfigs:be}},void 0,import.meta.url),se=await oe(s.value);ne.value=se.data||{}}catch(oe){console.error("Error loading print configurations:",oe),ne.value={}}};return un(()=>{Se(),je(),d.value?.id&&d.value.id!=="0"&&de()}),(oe,se)=>{const be=I("v-tab"),Fe=I("v-tooltip"),at=I("v-tabs"),rt=I("v-card"),qe=I("v-col"),At=I("v-row"),Ut=I("v-progress-circular"),ft=I("v-btn"),en=I("v-empty-state"),Jt=I("v-card-subtitle"),wn=I("v-icon"),yn=I("v-chip"),Pa=I("v-text-field"),Or=I("v-textarea"),Hr=I("v-select"),Bs=I("v-switch"),Ko=I("v-form"),Er=I("v-expand-transition"),ks=I("v-card-text"),$r=I("v-divider"),Vi=I("v-checkbox"),Vt=I("v-alert"),Ja=I("v-tabs-window-item"),Vn=I("v-tabs-window"),nr=I("v-dialog"),vl=I("v-snackbar");return U(),me(We,null,[l(At,{"no-gutters":""},{default:u(()=>[l(qe,null,{default:u(()=>[l(rt,{rounded:"0",class:"pa-1 patient-header-style",elevation:"0"},{default:u(()=>[l(at,{modelValue:A.value,"onUpdate:modelValue":[se[0]||(se[0]=vt=>A.value=vt),Z],"align-tabs":"center",density:"compact",class:"interactive-tabs"},{default:u(()=>[l(Fe,{text:"Treatment Plan"},{activator:u(({props:vt})=>[l(be,Ue({value:"plan"},vt,{class:["tab-interactive",{"tab-active":A.value==="plan"}],tabindex:"-1"}),{default:u(()=>[...se[17]||(se[17]=[v("div",{class:"tab-content"}," PLAN ",-1)])]),_:1},16,["class"])]),_:1}),l(Fe,{text:"Treatment Progress"},{activator:u(({props:vt})=>[l(be,Ue({value:"progress"},vt,{class:["tab-interactive",{"tab-active":A.value==="progress"}],tabindex:"-1"}),{default:u(()=>[...se[18]||(se[18]=[v("div",{class:"tab-content"}," PROGRESS ",-1)])]),_:1},16,["class"])]),_:1}),l(Fe,{text:"Share Treatment Plan"},{activator:u(({props:vt})=>[l(be,Ue({value:"share"},vt,{class:["tab-interactive",{"tab-active":A.value==="share"}],tabindex:"-1"}),{default:u(()=>[...se[19]||(se[19]=[v("div",{class:"tab-content"}," SHARE PLAN ",-1)])]),_:1},16,["class"])]),_:1}),l(Fe,{text:"Uploads"},{activator:u(({props:vt})=>[l(be,Ue({value:"uploads"},vt,{class:["tab-interactive",{"tab-active":A.value==="uploads"}],tabindex:"-1"}),{default:u(()=>[...se[20]||(se[20]=[v("div",{class:"tab-content"}," UPLOADS ",-1)])]),_:1},16,["class"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(Vn,{modelValue:A.value,"onUpdate:modelValue":se[8]||(se[8]=vt=>A.value=vt),class:"flex-grow-1"},{default:u(()=>[!e.treatmentPlan?.id&&A.value!=="uploads"?(U(),pe(At,{key:0,"no-gutters":""},{default:u(()=>[l(qe,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[l(Ut,{indeterminate:"",color:"primary"})]),_:1})]),_:1})):e.treatmentPlan.id=="0"&&A.value!=="uploads"?(U(),pe(At,{key:1,"no-gutters":""},{default:u(()=>[l(qe,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%"}},{default:u(()=>[l(en,null,{title:u(()=>[...se[21]||(se[21]=[v("div",{class:"text-subtitle-2"}," No treatment plan selected ",-1)])]),text:u(()=>[v("div",VTe,[se[23]||(se[23]=M(" Create a new treatment plan or select an existing one ",-1)),se[24]||(se[24]=v("br",null,null,-1)),l(ft,{class:"mt-2",onClick:ce},{default:u(()=>[...se[22]||(se[22]=[M("Create Treatment Plan",-1)])]),_:1})])]),_:1})]),_:1})]),_:1})):ge("",!0),l(Ja,{value:"plan",class:"h-100"},{default:u(()=>[e.treatmentPlan?.id&&e.treatmentPlan.id!=="0"?(U(),pe(At,{key:0,"no-gutters":"",class:"h-100"},{default:u(()=>[l(qe,{cols:"12",class:"scroll-element",style:{"padding-bottom":"20px"}},{default:u(()=>[l(rt,{class:"form-section-card card-status-default mx-2 my-1 pa-3",elevation:"2"},{default:u(()=>[l(At,{"no-gutters":"",class:"align-top"},{default:u(()=>[l(qe,{cols:"2",class:"d-flex align-top"},{default:u(()=>[l(Jt,{class:"pa-0"},{default:u(()=>[...se[25]||(se[25]=[v("strong",null,"Treatment Plan Details",-1)])]),_:1})]),_:1}),l(qe,{cols:"1"}),l(qe,{cols:"6",class:"d-flex align-top flex-column"},{default:u(()=>[l(mTe,{doctorId:s.value,onTemplateSelected:Pe},null,8,["doctorId"]),S.value.length>0?(U(),me("div",LTe,[(U(!0),me(We,null,qt(S.value,vt=>(U(),pe(yn,{key:vt.id,color:"primary",variant:"outlined",size:"small",closable:"","onClick:close":hn=>Me(vt.id),onClick:hn=>De(vt),class:"cursor-pointer"},{default:u(()=>[M(K(vt.treatmentPlanName)+" ",1),l(wn,{end:"",size:"small",class:"ml-1"},{default:u(()=>[...se[26]||(se[26]=[M("mdi-pencil",-1)])]),_:1})]),_:2},1032,["onClick:close","onClick"]))),128))])):ge("",!0)]),_:1}),l(qe,{cols:"3",class:"d-flex justify-end align-top"},{default:u(()=>[l(Fe,{text:"Save as Template"},{activator:u(({props:vt})=>[l(ft,Ue({variant:"outlined",size:"small",class:"d-flex align-center justify-center btn-hover-enhanced"},vt,{onClick:ye,disabled:!e.treatmentPlan?.id||e.treatmentPlan.id==="0",tabindex:"-1"}),{default:u(()=>[l(wn,{start:""},{default:u(()=>[...se[27]||(se[27]=[v("img",{src:BH,alt:"Save Template"},null,-1)])]),_:1}),se[28]||(se[28]=M(" Save as Template ",-1))]),_:1},16,["disabled"])]),_:1})]),_:1})]),_:1}),l(At,{"no-gutters":"",class:"mt-2 mb-2"},{default:u(()=>[l(qe,{cols:"11"},{default:u(()=>[v("div",MTe,[l(yn,{color:"primary","text-color":"black",size:"small",density:"compact"},{default:u(()=>[v("strong",null,K(d.value?.treatmentPlanName||"New Treatment Plan"),1)]),_:1}),l(yn,{size:"small",color:ke(),variant:"outlined",density:"compact"},{default:u(()=>[M(K((d.value?.status||"proposed").charAt(0).toUpperCase()+(d.value?.status||"proposed").slice(1)),1)]),_:1},8,["color"]),d.value?.startDate?(U(),pe(yn,{key:0,size:"small",variant:"outlined",color:"primary",density:"compact"},{default:u(()=>[M(" Start: "+K($e(Dl)(d.value.startDate)),1)]),_:1})):ge("",!0),d.value?.endDate?(U(),pe(yn,{key:1,size:"small",variant:"outlined",color:"primary",density:"compact"},{default:u(()=>[M(" End: "+K($e(Dl)(d.value.endDate)),1)]),_:1})):ge("",!0),d.value?.followupDate?(U(),pe(yn,{key:2,size:"small",variant:"outlined",color:"secondary",density:"compact"},{default:u(()=>[M(" Follow-up: "+K($e(Dl)(d.value.followupDate)),1)]),_:1})):ge("",!0)])]),_:1}),l(qe,{cols:"1",class:"d-flex flex-column justify-center align-center"},{default:u(()=>[l(Fe,{text:O.value?"Collapse":"Edit Treatment Plan"},{activator:u(({props:vt})=>[l(wn,Ue(vt,{size:"small",color:"primary",class:"expand-hint cursor-pointer",disabled:!e.treatmentPlan?.id||e.treatmentPlan.id==="0"||F.value,onClick:ut}),{default:u(()=>[M(K(O.value?"mdi-chevron-up":"mdi-chevron-down"),1)]),_:1},16,["disabled"])]),_:1},8,["text"])]),_:1})]),_:1}),l(Er,null,{default:u(()=>[O.value?(U(),me("div",OTe,[l(Ko,{onSubmit:pn(Ft,["prevent"])},{default:u(()=>[l(At,{"no-gutters":"",class:"mb-2 align-top"},{default:u(()=>[l(qe,{cols:"10",class:"pr-2"},{default:u(()=>[l(Pa,{modelValue:H.value.treatmentPlanName,"onUpdate:modelValue":se[1]||(se[1]=vt=>H.value.treatmentPlanName=vt),label:"Treatment Plan Name",variant:"outlined",density:"compact",required:"","hide-details":""},null,8,["modelValue"])]),_:1}),l(qe,{cols:"2",class:"d-flex justify-center align-start"},{default:u(()=>[l(ft,{color:"primary",size:"small",type:"submit",loading:F.value,disabled:!H.value.treatmentPlanName},{default:u(()=>[...se[29]||(se[29]=[M(" Save ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),l(At,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(qe,{cols:"10"},{default:u(()=>[l(Or,{modelValue:H.value.notes,"onUpdate:modelValue":se[2]||(se[2]=vt=>H.value.notes=vt),label:"Notes",variant:"outlined",density:"compact",rows:"1","auto-grow":"","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),l(At,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(qe,{cols:"4",class:"pr-1"},{default:u(()=>[l(Hr,{modelValue:H.value.status,"onUpdate:modelValue":se[3]||(se[3]=vt=>H.value.status=vt),items:te,label:"Status",variant:"outlined",density:"compact",required:"","hide-details":""},null,8,["modelValue"])]),_:1}),l(qe,{cols:"3",class:"px-1"},{default:u(()=>[l(Pa,{modelValue:H.value.startDate,"onUpdate:modelValue":se[4]||(se[4]=vt=>H.value.startDate=vt),label:"Start Date",type:"date",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),l(qe,{cols:"3",class:"pl-1"},{default:u(()=>[l(Pa,{modelValue:H.value.endDate,"onUpdate:modelValue":se[5]||(se[5]=vt=>H.value.endDate=vt),label:"End Date",type:"date",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),l(At,{"no-gutters":"",class:"mb-0"},{default:u(()=>[l(qe,{cols:"4",class:"pr-1"},{default:u(()=>[l(Pa,{modelValue:H.value.followupDate,"onUpdate:modelValue":se[6]||(se[6]=vt=>H.value.followupDate=vt),label:"Follow-up Date",type:"date",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),l(qe,{cols:"6",class:"pl-1 d-flex align-center"},{default:u(()=>[l(Bs,{modelValue:H.value.isReminded,"onUpdate:modelValue":se[7]||(se[7]=vt=>H.value.isReminded=vt),label:H.value.isReminded?"Reminded":"Reminder Pending",color:"primary",density:"compact","hide-details":"","true-value":!0,"false-value":!1},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1})])):ge("",!0)]),_:1})]),_:1}),l(rt,{class:"form-section-card card-status-default mx-2 my-1 pa-3",elevation:"2"},{default:u(()=>[l(At,{"no-gutters":""},{default:u(()=>[l(qe,{cols:"12",class:"d-flex align-center"},{default:u(()=>[l(Jt,{class:"pa-0"},{default:u(()=>[...se[30]||(se[30]=[v("strong",null,"Cost and Payment Information",-1)])]),_:1}),k.value&&k.value.length===0?(U(),me("span",HTe,"- No payment receipts found")):ge("",!0)]),_:1})]),_:1}),f.value&&f.value.length>0?(U(),me("div",$Te,[l(rt,{class:"cost-breakdown-card",color:"blue-grey-lighten-5",elevation:"0",rounded:"lg"},{default:u(()=>[l(ks,{class:"pa-3"},{default:u(()=>[l(At,{"no-gutters":"",class:"justify-space-between align-center"},{default:u(()=>[l(qe,null,{default:u(()=>[v("div",QTe,[se[31]||(se[31]=v("p",{class:"text-caption text-medium-emphasis mb-0"},"Base Cost",-1)),v("p",GTe,""+K(N.value.toLocaleString()),1)])]),_:1}),l(qe,null,{default:u(()=>[v("div",zTe,[se[32]||(se[32]=v("p",{class:"text-caption text-medium-emphasis mb-0"},"Final Cost",-1)),v("p",KTe,""+K(q.value.toLocaleString()),1)])]),_:1}),l(qe,null,{default:u(()=>[v("div",WTe,[se[33]||(se[33]=v("p",{class:"text-caption text-medium-emphasis mb-0"},"Amount Due",-1)),v("p",jTe,""+K(Q.value.toLocaleString()),1)])]),_:1}),l(qe,null,{default:u(()=>[v("div",qTe,[se[34]||(se[34]=v("p",{class:"text-caption text-medium-emphasis mb-0"},"Amount Paid",-1)),v("p",YTe,""+K(ee.value.toLocaleString()),1)])]),_:1}),l(qe,null,{default:u(()=>[v("div",XTe,[se[35]||(se[35]=v("p",{class:"text-caption text-medium-emphasis mb-0"},"Amount Pending",-1)),v("p",{class:ct(["text-body-2 font-weight-medium mb-0",z.value>0?"text-error":"text-success"])}," "+K(z.value.toLocaleString()),3)])]),_:1})]),_:1}),N.value!==q.value?(U(),pe(At,{key:0,"no-gutters":"",class:"justify-space-between align-center mt-2"},{default:u(()=>[l(qe),l(qe,null,{default:u(()=>[v("div",JTe,[l(yn,{size:"small",color:q.value<N.value?"success":"warning",variant:"outlined",density:"compact"},{default:u(()=>[M(K(q.value<N.value?""+(N.value-q.value).toLocaleString()+" off":""+(q.value-N.value).toLocaleString()+" markup"),1)]),_:1},8,["color"])])]),_:1}),l(qe),l(qe),l(qe)]),_:1})):ge("",!0)]),_:1})]),_:1})])):ge("",!0),k.value?k.value.length>0?(U(),me("div",e4e,[(U(!0),me(We,null,qt(k.value,vt=>(U(),pe(rt,{key:vt.id,class:"payment-receipt-card ma-1 pa-2",variant:"outlined",rounded:"md"},{default:u(()=>[l(At,{"no-gutters":"",align:"center"},{default:u(()=>[l(qe,null,{default:u(()=>[v("div",t4e,[v("span",n4e,K(vt.identifier),1),l($r,{vertical:"",class:"mx-2"}),v("span",a4e,K(Bt(vt.paymentReceiptDate)),1),l($r,{vertical:"",class:"mx-2"}),v("span",r4e,[se[36]||(se[36]=v("strong",null,"Total:",-1)),M(" "+K((vt.totalAmount||0).toLocaleString()),1)]),l($r,{vertical:"",class:"mx-2"}),v("span",s4e,[se[37]||(se[37]=v("strong",null,"Paid:",-1)),M(" "+K((vt.totalPaid||0).toLocaleString()),1)]),vt.balanceDue>0?(U(),me(We,{key:0},[l($r,{vertical:"",class:"mx-2"}),v("span",o4e,[se[38]||(se[38]=v("strong",null,"Balance:",-1)),M(" "+K(vt.balanceDue.toLocaleString()),1)])],64)):(U(),me(We,{key:1},[l($r,{vertical:"",class:"mx-2"}),l(yn,{size:"x-small",color:"success",variant:"outlined",class:"receipt-status"},{default:u(()=>[...se[39]||(se[39]=[M(" Paid ",-1)])]),_:1})],64))])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))])):ge("",!0):(U(),me("div",ZTe,[l(Ut,{indeterminate:"",color:"primary",size:"24"})]))]),_:1}),l(rt,{class:"form-section-card card-status-default mx-2 my-1 pa-3",elevation:"2"},{default:u(()=>[l(At,{"no-gutters":""},{default:u(()=>[l(qe,{cols:"6",class:"d-flex align-top"},{default:u(()=>[l(Jt,{class:"pa-0"},{default:u(()=>[...se[40]||(se[40]=[v("strong",null,"Procedures",-1)])]),_:1})]),_:1}),l(qe,{cols:"6",class:"d-flex justify-end align-center mb-2 gap-2"},{default:u(()=>[l(Fe,{text:"Create Procedure"},{activator:u(({props:vt})=>[l(ft,Ue({variant:"outlined",size:"small",class:"d-flex align-center justify-center btn-hover-enhanced"},vt,{onClick:et,disabled:!e.treatmentPlan?.id||e.treatmentPlan.id==="0"}),{default:u(()=>[l(wn,{start:""},{default:u(()=>[...se[41]||(se[41]=[v("img",{src:FE,alt:"Create Procedure"},null,-1)])]),_:1}),se[42]||(se[42]=M(" Create Procedure ",-1))]),_:1},16,["disabled"])]),_:1})]),_:1})]),_:1}),l(At,{"no-gutters":""},{default:u(()=>[l(qe,{cols:"1"}),l(qe,{cols:"10"},{default:u(()=>[l(iTe,{onHandleSearchedProcedures:lt,onAddProcedure:et})]),_:1})]),_:1}),m.value&&m.value.length>0?(U(),me("div",i4e,[l(At,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(qe,{cols:"8"},{default:u(()=>[v("h6",l4e,"Selected Procedures ("+K(m.value.filter(vt=>vt.isSelected).length)+")",1)]),_:1}),l(qe,{cols:"4",class:"d-flex justify-end align-center"},{default:u(()=>[l(ft,{color:"primary",size:"small",class:"btn-hover-enhanced",onClick:nt,loading:T.value,disabled:m.value.filter(vt=>vt.isSelected).length===0},{default:u(()=>[...se[43]||(se[43]=[M(" Save to Treatment Plan ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),(U(!0),me(We,null,qt(m.value,vt=>(U(),me("div",{key:vt.stagingId,class:"staging-row pa-3 mb-2",style:{border:"2px dashed rgba(var(--v-theme-primary), 0.3)","border-radius":"8px","background-color":"rgba(var(--v-theme-primary), 0.05)"}},[l(At,{"no-gutters":""},{default:u(()=>[l(qe,{cols:"3",class:"d-flex flex-column justify-start align-start"},{default:u(()=>[v("div",u4e,[v("h5",c4e,K(vt.procedureName||"Unknown Procedure"),1),l(wn,{size:"small",class:"text-medium-emphasis"},{default:u(()=>[v("img",{src:vt.isLocal?$e(Zd):$e(_h),alt:vt.isLocal?"Local":"Server"},null,8,d4e)]),_:2},1024)])]),_:2},1024),l(qe,{cols:"2",class:"px-2"},{default:u(()=>[se[44]||(se[44]=v("div",{class:"text-caption text-medium-emphasis"},"Location",-1)),l(Pa,{modelValue:vt.location,"onUpdate:modelValue":hn=>vt.location=hn,variant:"underlined",density:"compact",placeholder:"e.g.#14,left leg","hide-details":"",class:"location-input"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(qe,{cols:"2",class:"px-2"},{default:u(()=>[se[45]||(se[45]=v("div",{class:"text-caption text-medium-emphasis"},"Option",-1)),l(Hr,{modelValue:vt.option,"onUpdate:modelValue":hn=>vt.option=hn,variant:"underlined",density:"compact",items:["","A","B","C","D"],placeholder:"Select","hide-details":"",class:"option-select"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(qe,{cols:"2",class:"px-2"},{default:u(()=>[se[46]||(se[46]=v("div",{class:"text-caption text-medium-emphasis"},"Base Cost",-1)),l(Pa,{modelValue:vt.cost,"onUpdate:modelValue":hn=>vt.cost=hn,modelModifiers:{number:!0},variant:"underlined",density:"compact",type:"number",min:"0",step:"0.01",prefix:"","hide-details":"",class:"base-cost-input",placeholder:vt.isLocal?"Set cost":"Server procedure",onInput:hn=>vt.costEstimate=vt.cost},null,8,["modelValue","onUpdate:modelValue","placeholder","onInput"])]),_:2},1024),l(qe,{cols:"2",class:"px-2"},{default:u(()=>[se[47]||(se[47]=v("div",{class:"text-caption text-medium-emphasis"},"Estimate Cost",-1)),l(Pa,{modelValue:vt.costEstimate,"onUpdate:modelValue":hn=>vt.costEstimate=hn,modelModifiers:{number:!0},variant:"underlined",density:"compact",type:"number",min:"0",step:"0.01",prefix:"","hide-details":"",class:"final-cost-input"},null,8,["modelValue","onUpdate:modelValue"]),vt.cost&&vt.costEstimate!==vt.cost?(U(),pe(yn,{key:0,size:"small",color:vt.costEstimate<vt.cost?"success":"warning",variant:"outlined",density:"comfortable",class:"mt-1"},{default:u(()=>[M(K(vt.costEstimate<vt.cost?""+(vt.cost-vt.costEstimate).toLocaleString()+" off":""+(vt.costEstimate-vt.cost).toLocaleString()+" markup"),1)]),_:2},1032,["color"])):ge("",!0)]),_:2},1024),l(qe,{cols:"1",class:"d-flex justify-end align-center"},{default:u(()=>[l(Fe,{text:"Remove from staging"},{activator:u(({props:hn})=>[l(ft,Ue({size:"small",icon:"",variant:"plain",onClick:kn=>Tt(vt.stagingId),class:"edit-icon mr-2"},{ref_for:!0},hn),{default:u(()=>[l(wn,{size:"small",color:"error"},{default:u(()=>[...se[48]||(se[48]=[M("mdi-delete",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024),l(Vi,{modelValue:vt.isSelected,"onUpdate:modelValue":hn=>vt.isSelected=hn,"true-value":!0,"false-value":!1,density:"compact","hide-details":"",class:"treatment-checkbox"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]))),128))])):ge("",!0),m.value&&m.value.length>0&&f.value&&f.value.length>0?(U(),pe($r,{key:1,class:"mx-4 my-2"})):ge("",!0),X.value?(U(),pe(Vt,{key:2,type:"info",variant:"tonal",density:"compact",class:"mx-2 mb-2",icon:"mdi-information-outline",border:"start"},{default:u(()=>[...se[49]||(se[49]=[v("div",{class:"text-caption"}," Some procedures have options (A, B, C...) added to them. Please clear options once treatmentplan is finalized. ",-1)])]),_:1})):ge("",!0),v("div",A4e,[le.value&&le.value.length>0?(U(),pe(At,{key:0,"no-gutters":"",class:"mb-2"},{default:u(()=>[l(qe,{cols:"8",class:"d-flex justify-start align-center"},{default:u(()=>[v("h6",f4e,"Saved Procedures ("+K(le.value.filter(vt=>vt.isSelected&&vt.status?.toLowerCase()!=="cancelled").length)+")",1)]),_:1}),l(qe,{cols:"4",class:"d-flex justify-end align-center"},{default:u(()=>[l(ft,{color:"primary",size:"small",class:"btn-hover-enhanced",onClick:Pt,loading:F.value,disabled:!le.value||le.value.length===0},{default:u(()=>[...se[50]||(se[50]=[M(" Save Changes ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1})):ge("",!0),le.value&&le.value.length>0?(U(!0),me(We,{key:1},qt(le.value,vt=>(U(),me("div",{key:vt.id,class:"procedure-item-card pa-2 mb-1",style:{border:"1px solid rgba(var(--v-theme-outline), 0.12)","border-radius":"12px","background-color":"rgba(var(--v-theme-surface), 0.5)"}},[l(At,{"no-gutters":"",align:"center"},{default:u(()=>[l(qe,{cols:"5",class:"pr-2"},{default:u(()=>[v("div",m4e,[v("div",v4e,K(vt.procedure?.procedure_name||vt.procedureName||vt.procedure_name||"Unknown Procedure"),1)]),v("div",h4e,[M(" Base Cost "+K((vt.procedureCost||0).toLocaleString())+" ",1),l(Fe,{text:"Edit Procedure"},{activator:u(({props:hn})=>[l(ft,Ue({size:"x-small",icon:"",variant:"text",onClick:pn(kn=>$t(vt),["stop"]),class:"edit-icon-btn"},{ref_for:!0},hn),{default:u(()=>[l(wn,{size:"14",color:"primary"},{default:u(()=>[...se[51]||(se[51]=[v("img",{src:yv},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)])]),_:2},1024),l(qe,{cols:"2",class:"px-1"},{default:u(()=>[se[52]||(se[52]=v("div",{class:"text-caption text-medium-emphasis mb-1"},"Location",-1)),l(Pa,{modelValue:vt.location,"onUpdate:modelValue":hn=>vt.location=hn,variant:"outlined",density:"compact",placeholder:"e.g.#14,left leg","hide-details":"",class:"location-input-field"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(qe,{cols:"2",class:"px-1"},{default:u(()=>[se[53]||(se[53]=v("div",{class:"text-caption text-medium-emphasis mb-1"},"Option",-1)),l(Hr,{modelValue:vt.option,"onUpdate:modelValue":hn=>vt.option=hn,variant:"outlined",density:"compact",items:["","A","B","C","D"],placeholder:"Select","hide-details":"",class:"option-select-field"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(qe,{cols:"2",class:"px-1"},{default:u(()=>[se[54]||(se[54]=v("div",{class:"text-caption text-medium-emphasis mb-1"},"Final Cost",-1)),l(Pa,{modelValue:vt.costEstimate,"onUpdate:modelValue":hn=>vt.costEstimate=hn,modelModifiers:{number:!0},variant:"outlined",density:"compact",type:"number",min:"0",step:"0.01",prefix:"","hide-details":"",class:"final-cost-input-field",onBlur:hn=>Kt(vt)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),_:2},1024),l(qe,{cols:"1",class:"pl-1 d-flex justify-end align-center"},{default:u(()=>[v("div",p4e,[l(Fe,{text:"Duplicate Procedure"},{activator:u(({props:hn})=>[l(ft,Ue({size:"small",icon:"",variant:"text",onClick:kn=>bt(vt),class:"edit-icon-btn"},{ref_for:!0},hn),{default:u(()=>[l(wn,{size:"18",color:"primary"},{default:u(()=>[...se[55]||(se[55]=[v("img",{src:FE},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024),l(Fe,{text:"Remove Procedure"},{activator:u(({props:hn})=>[l(ft,Ue({size:"small",icon:"",variant:"text",onClick:kn=>rn(vt),class:"edit-icon-btn"},{ref_for:!0},hn),{default:u(()=>[l(wn,{size:"18",color:"error"},{default:u(()=>[...se[56]||(se[56]=[v("img",{src:Nd},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)])]),_:2},1024)]),_:2},1024),l(At,{"no-gutters":"",align:"center",class:"mt-1"},{default:u(()=>[l(qe,{cols:"5",class:"pr-2"},{default:u(()=>[v("div",g4e,[l(yn,{size:"small",color:Ge(vt.status),variant:"outlined",density:"compact",class:"text-caption"},{default:u(()=>[M(K((vt.status||"proposed").charAt(0).toUpperCase()+(vt.status||"proposed").slice(1).replace("_"," ")),1)]),_:2},1032,["color"])])]),_:2},1024),l(qe,{cols:"2",class:"px-1"}),l(qe,{cols:"2",class:"px-1"}),l(qe,{cols:"2",class:"px-1"},{default:u(()=>[v("div",y4e,[vt.procedureCost&&vt.costEstimate!==vt.procedureCost?(U(),pe(yn,{key:0,size:"small",color:vt.costEstimate<vt.procedureCost?"success":"warning",variant:"outlined",density:"compact",class:"text-caption"},{default:u(()=>[M(K(vt.costEstimate<vt.procedureCost?""+(vt.procedureCost-vt.costEstimate).toLocaleString()+" off":""+(vt.costEstimate-vt.procedureCost).toLocaleString()+" markup"),1)]),_:2},1032,["color"])):ge("",!0)])]),_:2},1024),l(qe,{cols:"1",class:"pl-1"})]),_:2},1024)]))),128)):(U(),me("div",_4e,[...se[57]||(se[57]=[v("p",{class:"text-subtitle-1 text-medium-emphasis"},"No procedures added yet",-1),v("p",{class:"text-caption text-medium-emphasis"},"Add procedures to create a treatment plan",-1)])]))])]),_:1})]),_:1})]),_:1})):ge("",!0)]),_:1}),l(Ja,{value:"progress",class:"h-100"},{default:u(()=>[e.treatmentPlan?.id&&e.treatmentPlan.id!=="0"?(U(),pe(At,{key:0,"no-gutters":"",class:"h-100"},{default:u(()=>[l(qe,{cols:"12",class:"scroll-element",style:{"padding-bottom":"20px"}},{default:u(()=>[re.value.unscheduled.length>0||re.value.dateGroups.length>0?(U(),me(We,{key:0},[re.value.unscheduled.length>0?(U(),me("div",w4e,[v("div",b4e,[l(yn,{color:"grey",variant:"elevated",size:"default",class:"date-chip-vertical","prepend-icon":"mdi-calendar-remove"},{default:u(()=>[...se[58]||(se[58]=[M(" Unscheduled ",-1)])]),_:1}),l($r,{class:"ml-4"})]),(U(!0),me(We,null,qt(re.value.unscheduled,vt=>(U(),me("div",{key:vt.id,class:"ma-2 mb-2"},[l(rt,{class:"form-section-card card-status-default pa-3 treatment-row"},{default:u(()=>[l(At,{"no-gutters":"",class:"mb-2 procedure-header",onClick:hn=>xt(vt.id),style:{cursor:"pointer"}},{default:u(()=>[l(qe,{cols:"11",class:"d-flex flex-column justify-start align-start"},{default:u(()=>[v("h5",x4e,K(vt.procedure?.procedure_name||vt.procedureName||vt.procedure_name||"Unknown Procedure"),1),v("div",C4e,[vt.location?(U(),pe(yn,{key:0,size:"small",color:"blue-grey",variant:"outlined",density:"compact"},{default:u(()=>[M(K(vt.location),1)]),_:2},1024)):ge("",!0),l(yn,{size:"small",color:Ge(vt.status),variant:"outlined",density:"compact"},{default:u(()=>[M(K((vt.status||"proposed").charAt(0).toUpperCase()+(vt.status||"proposed").slice(1).replace("_"," ")),1)]),_:2},1032,["color"])]),v("div",S4e,K(vt.procedure?.description||vt.description||vt.procedureDescription||""),1)]),_:2},1024),l(qe,{cols:"1",class:"d-flex flex-column justify-center align-center"},{default:u(()=>[l(wn,{size:"small",color:"primary",class:"expand-hint"},{default:u(()=>[M(K(gt(vt.id)?"mdi-chevron-up":"mdi-chevron-down"),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]),l(Er,null,{default:u(()=>[ma(v("div",null,[l(At,{"no-gutters":"",class:"mb-4 align-center"},{default:u(()=>[l(qe,{cols:"12",md:"3",class:"pr-2"},{default:u(()=>[l(Pa,{modelValue:vt.startDate,"onUpdate:modelValue":hn=>vt.startDate=hn,label:"Start Date",variant:"outlined",density:"compact",type:"date","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(qe,{cols:"12",md:"3",class:"px-1"},{default:u(()=>[l(Pa,{modelValue:vt.endDate,"onUpdate:modelValue":hn=>vt.endDate=hn,label:"End Date",variant:"outlined",density:"compact",type:"date","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(qe,{cols:"12",md:"2",class:"px-1"},{default:u(()=>[l(Hr,{modelValue:vt.status,"onUpdate:modelValue":hn=>vt.status=hn,label:"Status",variant:"outlined",density:"compact",items:L,"hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(qe,{cols:"12",md:"4",class:"d-flex justify-end gap-2 pl-2"},{default:u(()=>[l(ft,{color:"primary",variant:"flat",size:"small",class:"btn-hover-enhanced",loading:vt.isUpdating,onClick:pn(hn=>Ze(vt),["stop"])},{default:u(()=>[...se[59]||(se[59]=[M(" Save ",-1)])]),_:1},8,["loading","onClick"])]),_:2},1024)]),_:2},1024),l(At,{"no-gutters":"",class:"mt-2"},{default:u(()=>[l(qe,{cols:"12"},{default:u(()=>[l(At,{"no-gutters":"",class:"mb-1 mx-2"},{default:u(()=>[l(qe,{cols:"11"},{default:u(()=>[l(Or,{modelValue:vt.notes,"onUpdate:modelValue":hn=>vt.notes=hn,label:"Notes",variant:"underlined",density:"compact",rows:"2","auto-grow":"",clearable:"","hide-details":"",placeholder:"Add notes about procedure progress..."},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(qe,{cols:"1",class:"d-flex align-center justify-center"},{default:u(()=>[l(Fe,{text:"Voice Input"},{activator:u(({props:hn})=>[l(ft,Ue({icon:"mdi-microphone",rounded:"xls",variant:"flat",color:"primary",size:"small"},{ref_for:!0},hn,{onClick:kn=>gn(vt),tabindex:"-1",class:"dictation-btn"}),null,16,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),l(At,{"no-gutters":"",class:"mt-4"},{default:u(()=>[l(qe,{cols:"12",class:"px-2"},{default:u(()=>[l(rt,{variant:"outlined",class:"pa-3 post-procedure-care-card"},{default:u(()=>[l(Jt,{class:"text-subtitle-2 pa-0 mb-2"},{default:u(()=>[...se[60]||(se[60]=[M(" Post-Procedure Care Instructions ",-1)])]),_:1}),l(At,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(qe,{cols:"10"},{default:u(()=>[l(pR,{"doctor-id":s.value,onPostProcedureCareSelected:hn=>zn(hn,vt)},null,8,["doctor-id","onPostProcedureCareSelected"])]),_:2},1024),l(qe,{cols:"2"})]),_:2},1024),l(At,{"no-gutters":""},{default:u(()=>[l(qe,{cols:"10"},{default:u(()=>[l(Or,{modelValue:vt.postProcedureCare,"onUpdate:modelValue":hn=>vt.postProcedureCare=hn,label:"Instructions",variant:"underlined",density:"compact",rows:"2","auto-grow":"",clearable:"","hide-details":"",placeholder:"Enter post-procedure care instructions..."},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(qe,{cols:"1",class:"d-flex align-center justify-center"},{default:u(()=>[l(Fe,{text:"Voice Input"},{activator:u(({props:hn})=>[l(ft,Ue({icon:"mdi-microphone",rounded:"xls",variant:"flat",color:"primary",size:"small"},{ref_for:!0},hn,{onClick:kn=>oa(vt),tabindex:"-1",class:"dictation-btn"}),null,16,["onClick"])]),_:2},1024)]),_:2},1024),l(qe,{cols:"1",class:"d-flex align-center justify-center"},{default:u(()=>[l(Fe,{text:"Share via WhatsApp"},{activator:u(({props:hn})=>[l(ft,Ue({icon:"",rounded:"xls",variant:"flat",color:"success",size:"small"},{ref_for:!0},hn,{onClick:kn=>Qe(vt),loading:vt.sendingWhatsApp,disabled:!vt.postProcedureCare||!vt.postProcedureCare.trim(),tabindex:"-1",class:"whatsapp-btn"}),{default:u(()=>[l(wn,{size:"small"},{default:u(()=>[...se[61]||(se[61]=[v("img",{src:Y_,alt:"WhatsApp",style:{width:"18px",height:"18px"}},null,-1)])]),_:1})]),_:1},16,["onClick","loading","disabled"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)],512),[[ci,gt(vt.id)]])]),_:2},1024)]),_:2},1024)]))),128))])):ge("",!0),(U(!0),me(We,null,qt(re.value.dateGroups,(vt,hn)=>(U(),me("div",{key:`date-${hn}`,class:"date-section mb-4"},[v("div",{class:"date-header-vertical mb-3",style:Rt((hn===0&&re.value.unscheduled.length===0?"margin-top: 16px;":"")+" margin-left: 8px;")},[l(yn,{color:"primary",variant:"elevated",size:"default",class:"date-chip-vertical","prepend-icon":"mdi-calendar",title:vt.fullDate||vt.date},{default:u(()=>[M(K(vt.date),1)]),_:2},1032,["title"]),l($r,{class:"ml-4"})],4),(U(!0),me(We,null,qt(vt.procedures,kn=>(U(),me("div",{key:kn.id,class:"ma-2 mb-2"},[l(rt,{class:"form-section-card card-status-default pa-3 treatment-row"},{default:u(()=>[l(At,{"no-gutters":"",class:"mb-2 procedure-header",onClick:Na=>xt(kn.id),style:{cursor:"pointer"}},{default:u(()=>[l(qe,{cols:"11",class:"d-flex flex-column justify-start align-start"},{default:u(()=>[v("h5",E4e,K(kn.procedure?.procedure_name||kn.procedureName||kn.procedure_name||"Unknown Procedure"),1),v("div",B4e,[kn.location?(U(),pe(yn,{key:0,size:"small",color:"blue-grey",variant:"outlined",density:"compact"},{default:u(()=>[M(K(kn.location),1)]),_:2},1024)):ge("",!0),l(yn,{size:"small",color:Ge(kn.status),variant:"outlined",density:"compact"},{default:u(()=>[M(K((kn.status||"proposed").charAt(0).toUpperCase()+(kn.status||"proposed").slice(1).replace("_"," ")),1)]),_:2},1032,["color"])]),v("div",k4e,K(kn.procedure?.description||kn.description||kn.procedureDescription||""),1)]),_:2},1024),l(qe,{cols:"1",class:"d-flex flex-column justify-center align-center"},{default:u(()=>[l(wn,{size:"small",color:"primary",class:"expand-hint"},{default:u(()=>[M(K(gt(kn.id)?"mdi-chevron-up":"mdi-chevron-down"),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]),l(Er,null,{default:u(()=>[ma(v("div",null,[l(At,{"no-gutters":"",class:"mb-4 align-center"},{default:u(()=>[l(qe,{cols:"12",md:"3",class:"pr-2"},{default:u(()=>[l(Pa,{modelValue:kn.startDate,"onUpdate:modelValue":Na=>kn.startDate=Na,label:"Start Date",variant:"outlined",density:"compact",type:"date","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(qe,{cols:"12",md:"3",class:"px-1"},{default:u(()=>[l(Pa,{modelValue:kn.endDate,"onUpdate:modelValue":Na=>kn.endDate=Na,label:"End Date",variant:"outlined",density:"compact",type:"date","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(qe,{cols:"12",md:"2",class:"px-1"},{default:u(()=>[l(Hr,{modelValue:kn.status,"onUpdate:modelValue":Na=>kn.status=Na,label:"Status",variant:"outlined",density:"compact",items:L,"hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(qe,{cols:"12",md:"4",class:"d-flex justify-end gap-2 pl-2"},{default:u(()=>[l(ft,{color:"primary",variant:"flat",size:"small",class:"btn-hover-enhanced",loading:kn.isUpdating,onClick:pn(Na=>Ze(kn),["stop"])},{default:u(()=>[...se[62]||(se[62]=[M(" Save ",-1)])]),_:1},8,["loading","onClick"])]),_:2},1024)]),_:2},1024),l(At,{"no-gutters":"",class:"mt-2"},{default:u(()=>[l(qe,{cols:"12"},{default:u(()=>[l(At,{"no-gutters":"",class:"mb-1 mx-2"},{default:u(()=>[l(qe,{cols:"11"},{default:u(()=>[l(Or,{modelValue:kn.notes,"onUpdate:modelValue":Na=>kn.notes=Na,label:"Notes",variant:"underlined",density:"compact",rows:"2","auto-grow":"",clearable:"","hide-details":"",placeholder:"Add notes about procedure progress..."},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(qe,{cols:"1",class:"d-flex align-center justify-center"},{default:u(()=>[l(Fe,{text:"Voice Input"},{activator:u(({props:Na})=>[l(ft,Ue({icon:"mdi-microphone",rounded:"xls",variant:"flat",color:"primary",size:"small"},{ref_for:!0},Na,{onClick:Li=>gn(kn),tabindex:"-1",class:"dictation-btn"}),null,16,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),l(At,{"no-gutters":"",class:"mt-4"},{default:u(()=>[l(qe,{cols:"12",class:"px-2"},{default:u(()=>[l(rt,{variant:"outlined",class:"pa-3 post-procedure-care-card"},{default:u(()=>[l(Jt,{class:"text-subtitle-2 pa-0 mb-2"},{default:u(()=>[...se[63]||(se[63]=[M(" Post-Procedure Care Instructions ",-1)])]),_:1}),l(At,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(qe,{cols:"10"},{default:u(()=>[l(pR,{"doctor-id":s.value,onPostProcedureCareSelected:Na=>zn(Na,kn)},null,8,["doctor-id","onPostProcedureCareSelected"])]),_:2},1024),l(qe,{cols:"2"})]),_:2},1024),l(At,{"no-gutters":""},{default:u(()=>[l(qe,{cols:"10"},{default:u(()=>[l(Or,{modelValue:kn.postProcedureCare,"onUpdate:modelValue":Na=>kn.postProcedureCare=Na,label:"Instructions",variant:"underlined",density:"compact",rows:"2","auto-grow":"",clearable:"","hide-details":"",placeholder:"Enter post-procedure care instructions..."},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(qe,{cols:"1",class:"d-flex align-center justify-center"},{default:u(()=>[l(Fe,{text:"Voice Input"},{activator:u(({props:Na})=>[l(ft,Ue({icon:"mdi-microphone",rounded:"xls",variant:"flat",color:"primary",size:"small"},{ref_for:!0},Na,{onClick:Li=>oa(kn),tabindex:"-1",class:"dictation-btn"}),null,16,["onClick"])]),_:2},1024)]),_:2},1024),l(qe,{cols:"1",class:"d-flex align-center justify-center"},{default:u(()=>[l(Fe,{text:"Share via WhatsApp"},{activator:u(({props:Na})=>[l(ft,Ue({icon:"",rounded:"xls",variant:"flat",color:"success",size:"small"},{ref_for:!0},Na,{onClick:Li=>Qe(kn),loading:kn.sendingWhatsApp,disabled:!kn.postProcedureCare||!kn.postProcedureCare.trim(),tabindex:"-1",class:"whatsapp-btn"}),{default:u(()=>[l(wn,{size:"small"},{default:u(()=>[...se[64]||(se[64]=[v("img",{src:Y_,alt:"WhatsApp",style:{width:"18px",height:"18px"}},null,-1)])]),_:1})]),_:1},16,["onClick","loading","disabled"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)],512),[[ci,gt(kn.id)]])]),_:2},1024)]),_:2},1024)]))),128))]))),128))],64)):(U(),me("div",T4e,[l(wn,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...se[65]||(se[65]=[v("img",{src:IE},null,-1)])]),_:1}),se[66]||(se[66]=v("p",{class:"text-subtitle-1 text-medium-emphasis"},"No procedures to track",-1)),se[67]||(se[67]=v("p",{class:"text-caption text-medium-emphasis"},"Add procedures to the treatment plan first",-1))]))]),_:1})]),_:1})):ge("",!0)]),_:1}),l(Ja,{value:"share",class:"h-100"},{default:u(()=>[e.treatmentPlan?.id&&e.treatmentPlan.id!=="0"?(U(),pe(At,{key:0,"no-gutters":"",class:"h-100"},{default:u(()=>[l(qe,{cols:"12"},{default:u(()=>[l(yh,{"content-type":"treatment-plan",data:{treatmentPlan:d.value,procedureTreatments:f.value,paymentReceipts:k.value,printConfigurations:ne.value},patient:e.patient,onPdfGenerated:ze},null,8,["data","patient"])]),_:1})]),_:1})):ge("",!0)]),_:1}),l(Ja,{value:"uploads",class:"h-100"},{default:u(()=>[l(At,{"no-gutters":"","aria-label":"toolbar",class:"h-100"},{default:u(()=>[l(qe,{cols:"12"},{default:u(()=>[l(qH,{procedure:d.value,patient:e.patient},null,8,["procedure","patient"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(nr,{modelValue:h.value,"onUpdate:modelValue":se[9]||(se[9]=vt=>h.value=vt),"max-width":"500px",persistent:""},{default:u(()=>[l(eTe,{onClose:Je,"onUpdate:procedurelist":st})]),_:1},8,["modelValue"]),l(nr,{modelValue:p.value,"onUpdate:modelValue":se[10]||(se[10]=vt=>p.value=vt),"max-width":"500px",persistent:""},{default:u(()=>[g.value?(U(),pe(tTe,{key:0,procedure:g.value,onClose:Nt,onProcedureUpdated:dn},null,8,["procedure"])):ge("",!0)]),_:1},8,["modelValue"]),l(nr,{modelValue:y.value,"onUpdate:modelValue":se[11]||(se[11]=vt=>y.value=vt),"max-width":"500px",persistent:""},{default:u(()=>[w.value&&y.value?(U(),pe(nTe,{key:0,"procedure-treatment":w.value,"treatment-plan-id":e.treatmentPlan?.id,onClose:Lt,onDeleted:_t},null,8,["procedure-treatment","treatment-plan-id"])):ge("",!0)]),_:1},8,["modelValue"]),l(t0,{modelValue:ie.value,"onUpdate:modelValue":se[12]||(se[12]=vt=>ie.value=vt),"current-text":Ae.value?.notes||"",label:"Progress Notes",onTranscriptionComplete:Wn},null,8,["modelValue","current-text"]),l(t0,{modelValue:j.value,"onUpdate:modelValue":se[13]||(se[13]=vt=>j.value=vt),"current-text":J.value?.postProcedureCare||"",label:"Post-Procedure Care Instructions",onTranscriptionComplete:Ra},null,8,["modelValue","current-text"]),l(nr,{modelValue:E.value,"onUpdate:modelValue":se[14]||(se[14]=vt=>E.value=vt),"max-width":"800",persistent:""},{default:u(()=>[l(_Te,{treatmentPlanName:d.value?.treatmentPlanName||"",notes:d.value?.notes||"",procedureList:f.value||[],doctorId:s.value,onClose:Ce,"onUpdate&close":_e},null,8,["treatmentPlanName","notes","procedureList","doctorId"])]),_:1},8,["modelValue"]),l(nr,{modelValue:C.value,"onUpdate:modelValue":se[15]||(se[15]=vt=>C.value=vt),"max-width":"800",persistent:""},{default:u(()=>[D.value?(U(),pe(ITe,{key:0,selectedTemplate:D.value,procedureList:f.value||[],onClose:xe,"onUpdate&close":Te},null,8,["selectedTemplate","procedureList"])):ge("",!0)]),_:1},8,["modelValue"]),l(vl,{modelValue:Y.value.show,"onUpdate:modelValue":se[16]||(se[16]=vt=>Y.value.show=vt),color:Y.value.color,class:"elevation-24"},{default:u(()=>[M(K(Y.value.text),1)]),_:1},8,["modelValue","color"])],64)}}},F4e=Xt(I4e,[["__scopeId","data-v-7e8477a1"]]),P4e={class:"d-flex age-dob-container",style:{gap:"8px"}},D4e={class:"d-flex justify-center"},U4e={__name:"edit-patient-details",props:{patient:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=e,a=t,r=V({id:n.patient.id,name:n.patient.name||"",age:n.patient.age||"",birthDate:"",gender:n.patient.gender||"",contactNumber:n.patient.contactNumber||"",email:n.patient.email||"",address:n.patient.address||"",note:n.patient.note||""}),s=V("dob"),o=V("");un(()=>{if(n.patient.birthDate){let f="";typeof n.patient.birthDate=="string"?f=n.patient.birthDate:typeof n.patient.birthDate=="number"&&(f=Nve(n.patient.birthDate)),f&&(r.value.birthDate=f,s.value="dob")}else s.value="dob"}),Ke(s,f=>{f==="age"?(r.value.birthDate&&(o.value=r.value.birthDate),r.value.birthDate=""):o.value&&(r.value.birthDate=o.value)});const i=f=>{if(s.value==="dob")if(f){o.value=f;const m=aT(f);m!==null&&(r.value.age=m.toString())}else o.value=""},c=V(!1),A=()=>{a("close")},d=async()=>{const f={...r.value,name:r.value.name||"",age:r.value.age||"",gender:r.value.gender||"",contactNumber:r.value.contactNumber||"",email:r.value.email||"",address:r.value.address||"",note:r.value.note||""};if(s.value==="dob"&&f.birthDate){const h=Cd(f.birthDate);h!==null?f.birthDate=h.toString():f.birthDate=""}else delete f.birthDate;const m=await Rve(f);m&&!m.error?(console.log("Patient updated successfully"),a("close",r.value)):(console.error("Error updating patient"),a("close"))};return(f,m)=>{const h=I("v-card-title"),p=I("v-col"),y=I("v-icon"),g=I("v-btn"),w=I("v-row"),b=I("v-card"),x=I("v-text-field"),T=I("v-btn-toggle"),F=I("v-select"),k=I("v-textarea"),S=I("v-divider"),E=I("v-form");return U(),pe(b,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[l(w,{"no-gutters":""},{default:u(()=>[l(p,{cols:"12"},{default:u(()=>[l(b,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(w,{"no-gutters":""},{default:u(()=>[l(p,{cols:"11"},{default:u(()=>[l(h,{class:"pa-0 pl-2"},{default:u(()=>[...m[12]||(m[12]=[M("Edit patient details",-1)])]),_:1})]),_:1}),l(p,{cols:"1",class:"d-flex justify-end align-center"},{default:u(()=>[l(g,{icon:"",size:"x-small",onClick:A},{default:u(()=>[l(y,null,{default:u(()=>[...m[13]||(m[13]=[v("img",{src:ou,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(w,{"no-gutters":""},{default:u(()=>[l(p,{cols:"12"},{default:u(()=>[l(b,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(E,{modelValue:c.value,"onUpdate:modelValue":m[11]||(m[11]=C=>c.value=C),"validate-on":"blur"},{default:u(()=>[l(w,{"no-gutters":""},{default:u(()=>[l(p,{cols:"12",class:"my-2"},{default:u(()=>[l(x,{label:"Name *",variant:"outlined",modelValue:r.value.name,"onUpdate:modelValue":m[0]||(m[0]=C=>r.value.name=C),clearable:"",density:"compact",rules:$e(gr)},null,8,["modelValue","rules"])]),_:1}),l(p,{cols:"12",class:"mb-2"},{default:u(()=>[l(x,{label:"Contact Number *",variant:"outlined",modelValue:r.value.contactNumber,"onUpdate:modelValue":m[1]||(m[1]=C=>r.value.contactNumber=C),type:"tel",rules:$e(mh),clearable:"",density:"compact"},null,8,["modelValue","rules"])]),_:1}),l(p,{cols:"12",class:"mb-2"},{default:u(()=>[v("div",P4e,[l(T,{modelValue:s.value,"onUpdate:modelValue":m[2]||(m[2]=C=>s.value=C),mandatory:"",density:"compact",variant:"outlined",divided:"",class:"age-dob-toggle"},{default:u(()=>[l(g,{value:"dob",size:"small"},{default:u(()=>[...m[14]||(m[14]=[M("DOB",-1)])]),_:1}),l(g,{value:"age",size:"small"},{default:u(()=>[...m[15]||(m[15]=[M("AGE",-1)])]),_:1})]),_:1},8,["modelValue"]),s.value==="age"?(U(),pe(x,{key:0,label:"Age (yrs) *",variant:"outlined",modelValue:r.value.age,"onUpdate:modelValue":m[3]||(m[3]=C=>r.value.age=C),clearable:"",density:"compact",rules:$e(rT),disabled:!!r.value.birthDate||!!o.value,class:"flex-grow-1"},null,8,["modelValue","rules","disabled"])):(U(),pe(x,{key:1,label:"Date of Birth *",variant:"outlined",modelValue:r.value.birthDate,"onUpdate:modelValue":[m[4]||(m[4]=C=>r.value.birthDate=C),i],type:"date",clearable:"",density:"compact",rules:$e(sT),class:"flex-grow-1 date-input",onClick:m[5]||(m[5]=C=>C.target.showPicker&&C.target.showPicker())},null,8,["modelValue","rules"]))])]),_:1}),l(p,{cols:"12",class:"mb-2"},{default:u(()=>[l(F,{modelValue:r.value.gender,"onUpdate:modelValue":m[6]||(m[6]=C=>r.value.gender=C),items:["Male","Female"],label:"Gender *",required:"",clearable:"",variant:"outlined",density:"compact",rules:$e(oT)},null,8,["modelValue","rules"])]),_:1}),l(p,{cols:"12",class:"mb-2"},{default:u(()=>[l(x,{label:"Email (optional)",variant:"outlined",modelValue:r.value.email,"onUpdate:modelValue":m[7]||(m[7]=C=>r.value.email=C),clearable:"",density:"compact",rules:$e(Eg)},null,8,["modelValue","rules"])]),_:1}),l(p,{cols:"12",class:"mb-2"},{default:u(()=>[l(x,{label:"Address (optional)",variant:"outlined",modelValue:r.value.address,"onUpdate:modelValue":m[8]||(m[8]=C=>r.value.address=C),clearable:"",density:"compact"},null,8,["modelValue"])]),_:1}),l(p,{cols:"12",class:"mb-2"},{default:u(()=>[l(k,{label:"Patient Notes (optional)",variant:"outlined",modelValue:r.value.note,"onUpdate:modelValue":m[9]||(m[9]=C=>r.value.note=C),clearable:"",density:"compact",rows:"3","auto-grow":""},null,8,["modelValue"])]),_:1}),l(p,{cols:"12"},{default:u(()=>[l(S,{class:"mb-2"}),v("div",D4e,[l(g,{variant:"outlined",onClick:m[10]||(m[10]=C=>d()),disabled:!c.value},{default:u(()=>[...m[16]||(m[16]=[M("Update Patient",-1)])]),_:1},8,["disabled"])])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},R4e=Xt(U4e,[["__scopeId","data-v-9b0284ef"]]),N4e={__name:"delete-consultation",props:{deleteConsult:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=e,a=t,r=V(n.deleteConsult),s=()=>{a("close")},o=async i=>{i.status="CANCELLED";const c=await HM(i);c.error?console.error("Consultation delete failed",c.error):console.error("Consultation delete successful"),s()};return(i,c)=>{const A=I("v-card-title"),d=I("v-col"),f=I("v-icon"),m=I("v-btn"),h=I("v-row"),p=I("v-card"),y=I("v-card-text"),g=I("v-divider");return U(),pe(p,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(p,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"11"},{default:u(()=>[l(A,{class:"pa-0 pl-2"},{default:u(()=>[...c[1]||(c[1]=[M("Confirm Consultation Delete",-1)])]),_:1})]),_:1}),l(d,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(m,{icon:"",size:"x-small",onClick:s},{default:u(()=>[l(f,null,{default:u(()=>[...c[2]||(c[2]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(p,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(y,{class:"text-left"},{default:u(()=>[...c[3]||(c[3]=[M(" Are you sure you want to delete this consultation? You will not be able to recover data once deleted. ",-1)])]),_:1})]),_:1})]),_:1}),l(g),l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"2"}),l(d,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(m,{variant:"outlined",onClick:c[0]||(c[0]=w=>o(r.value))},{default:u(()=>[...c[4]||(c[4]=[M("Yes, Delete Consultation",-1)])]),_:1})]),_:1}),l(d,{cols:"2"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},V4e={class:"text-center"},L4e={class:"patient-header w-100"},M4e={class:"d-flex align-center flex-wrap justify-center"},O4e={class:"text-body-2 font-weight-bold"},H4e={class:"text-subtitle-2 ml-2 text-medium-emphasis"},$4e={key:0,class:"patient-note-inline-same-row"},Q4e={class:"text-caption text-black font-style-italic"},G4e={key:1,class:"patient-note-inline-same-row",style:{opacity:"0.7"}},z4e={class:"scrollable-content"},K4e={class:"d-flex justify-start section-header"},W4e={class:"scroll-hover",style:{height:"calc(100% - 8px)"}},j4e={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},q4e={key:0},Y4e={key:1,class:"text-caption text-medium-emphasis"},X4e={class:"d-flex align-center justify-center"},J4e={key:1,class:"text-center pa-4"},Z4e={class:"scroll-hover",style:{height:"calc(100% - 8px)"}},eIe={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},tIe={class:"text-caption text-medium-emphasis mb-1"},nIe={class:"d-flex align-center justify-center"},aIe={key:2,class:"text-center pa-4"},rIe={class:"scrollable-content"},sIe={__name:"patient-detail-page",setup(e){const t=Rn(),n=zf(),a=Al(),{hasPermission:r}=Ah(),s=V(n.params.id),o=V([]),i=V([]),c=V(!0),A=V({}),d=V({}),f=V(!1),m=V(""),h=V(!1),p=V(""),y=ae(()=>t.state.doctorModule.doctorId),g=V(null),w=V(null),b=V(!0),x=ae(()=>t.getters["doctorModule/isProcedurePrimary"]),T=ae(()=>{const Ce=[],_e=n.query.from;return _e==="patients-landing-page"?Ce.push({text:"Patients",to:{path:"/patients"},icon:"mdi-arrow-left",iconClass:"mr-1"}):_e==="research"?Ce.push({text:"Research",to:{path:"/research"},icon:"mdi-arrow-left",iconClass:"mr-1"}):_e==="data"?Ce.push({text:"Data",to:{path:"/data"},icon:"mdi-arrow-left",iconClass:"mr-1"}):_e==="home"?Ce.push({text:"Home",to:{path:"/home"},icon:"mdi-arrow-left",iconClass:"mr-1"}):Ce.push({text:"Patients",to:{path:"/patients"},icon:"mdi-arrow-left",iconClass:"mr-1"}),Ce}),F=V("consultations"),k=V([]),S=V({id:"0"}),E=V(!1),C=V(!1);Ke(y,async(Ce,_e)=>{if(Ce&&_e&&Ce!==_e&&d.value?.id){console.log(" Doctor changed from",_e,"to",Ce,"- refreshing consultations and procedures");try{const De=await t_(d.value.id,Ce);De.error||(o.value=Qn.cloneDeep(De.data)),await de(),await z(),S.value={id:"0"},E.value=!1}catch(De){console.error("Error refreshing data after doctor change:",De),h.value=!0,p.value="Failed to refresh data for new doctor"}}}),tu(async()=>{try{if(F.value=x.value?"procedures":"consultations",await N(),!s.value)throw new Error("No patient ID provided");if(!y.value)throw new Error("No doctor ID available - please select a doctor first");console.log(" Initializing patient detail page - Patient:",s.value,"Doctor:",y.value);const Ce=await tT(s.value);if(Ce.error)throw new Error(`Failed to load patient: ${Ce.error.message}`);d.value=Qn.cloneDeep(Ce.data),console.log(" Fetching consultations for patient:",d.value.id,"doctor:",y.value);const _e=await t_(d.value.id,y.value);if(_e.error)throw new Error(`Failed to load consultations: ${_e.error.message}`);console.log(" Fetched consultations:",_e.data),o.value=Qn.cloneDeep(_e.data),Ae(),await de(),await z()}catch(Ce){console.error("Error in onBeforeMount:",Ce),w.value=Ce.message||"Failed to load patient data"}finally{b.value=!1}}),un(async()=>{window.dispatchEvent(new CustomEvent("collapse-side-nav",{detail:!0})),console.log("Consultations on Mount",o.value),console.log("Patient Details on mount",d.value),document.addEventListener("keydown",q)}),da(async()=>{window.dispatchEvent(new CustomEvent("collapse-side-nav",{detail:!1})),document.removeEventListener("keydown",q)});const D=V(!1),P=V(!1),O=Ce=>{if(!Ce){console.error("No consultation provided for deletion"),h.value=!0,p.value="Cannot delete: Invalid consultation";return}D.value=!0,g.value=Ce,console.log("Selected Consultation for Deletion:",Ce)},H=async()=>{try{g.value&&i.value&&g.value.id===i.value.id&&await z(),D.value=!1,setTimeout(()=>{g.value=null},100)}catch(Ce){console.error("Error handling consultation delete close:",Ce),h.value=!0,p.value="Error refreshing after deletion",D.value=!1,setTimeout(()=>{g.value=null},100)}},ie=async Ce=>{try{P.value=!1,Ce&&(d.value=Qn.cloneDeep(Ce),f.value=!0,m.value="Patient details updated successfully",console.log("Patient details updated:",Ce))}catch(_e){console.error("Error updating patient details:",_e),h.value=!0,p.value="Failed to update patient details"}},Ae=()=>{if(!Array.isArray(o.value)||o.value.length===0)return;o.value.length>50?window.requestIdleCallback?requestIdleCallback(()=>{Ce()}):setTimeout(()=>{Ce()},0):Ce();function Ce(){o.value.sort((_e,De)=>!_e.consultationDate&&!De.consultationDate?0:_e.consultationDate?De.consultationDate?new Date(De.consultationDate)-new Date(_e.consultationDate):-1:1),console.log(" Sorted consultations chronologically:",o.value)}},j=ae(()=>!Array.isArray(o.value)||o.value.length===0?!1:o.value.some(Ce=>Ce?.consultationDate&&te(Ce))),J=Ce=>{if(!Ce)return 0;const _e=new Date().toLocaleDateString("en-CA"),De=new Date(Ce),Te=new Date(_e)-De;return Math.floor(Te/(1e3*60*60*24))},ue=Ce=>{if(!Ce)return{text:"No date",class:"consultation-date-text"};const _e=new Date(Ce).toLocaleDateString("en-US",{timeZone:"Asia/Kolkata",month:"short",day:"numeric",year:"numeric"}),De=J(Ce);let xe="",Te="consultation-date-text";return De===0?(xe="Today",Te+=" date-today"):De>0?(xe=`${De}d ago`,Te+=" date-past"):(xe=`${Math.abs(De)}d to go`,Te+=" date-future"),{text:`${_e}  ${xe}`,class:Te}},ne=Ce=>{if(!Ce)return!1;const _e=new Date().toLocaleDateString("en-CA");return Ce===_e},Y=Ce=>{if(!Ce)return!1;const _e=new Date().toLocaleDateString("en-CA"),De=new Date(Ce),xe=new Date(_e);return De>xe},te=Ce=>{if(!Ce?.consultationDate||!Ce?.status)return!1;const _e=Ce.consultationDate,De=Ce.status;return(ne(_e)||Y(_e))&&De==="CREATED"||De==="UPDATED"},L=ae(()=>!Array.isArray(o.value)||o.value.length===0?!1:o.value.some(Ce=>ne(Ce.consultationDate)&&(Ce?.status==="UPDATED"||Ce?.status==="CREATED"))),N=async()=>{try{if(await a.isReady(),s.value=n.params.id,!s.value)throw new Error("No patient ID found in URL parameters")}catch(Ce){throw console.error("Error extracting URL parameters:",Ce),w.value="Invalid patient URL",Ce}},q=Ce=>{if(Ce.key==="Escape"){if(window.dictationModalActive)return;const _e=document.activeElement;if(_e&&(_e.tagName==="INPUT"||_e.tagName==="TEXTAREA"||_e.isContentEditable||_e.closest(".v-field__input")||_e.closest(".v-text-field")||_e.closest(".v-textarea")))return;Ce.preventDefault(),Q()}},Q=()=>{try{const Ce=n.query.from;Ce==="patients-landing-page"?a.push("/patients"):Ce==="research"?a.push("/research"):Ce==="data"?a.push("/data"):Ce==="home"?a.push("/home"):a.push("/patients"),console.log(" Navigating back from ESC shortcut to:",Ce||"patients (default)")}catch(Ce){console.error("Error in back navigation:",Ce),a.push("/patients")}},ee=async()=>{try{if(!s.value||!y.value)throw new Error("Missing patient or doctor information");const Ce=new Date().toLocaleDateString("en-CA");await eT(s.value,y.value,Ce);const _e=await t_(s.value,y.value);if(_e.error)throw new Error(`Failed to refresh consultations: ${_e.error.message}`);o.value=Qn.cloneDeep(_e.data),Ae(),await z(),console.log("New consultation created"),f.value=!0,m.value="New consultation created successfully"}catch(Ce){console.error("Error creating consultation:",Ce),h.value=!0,p.value=Ce.message||"Failed to create consultation"}},z=async()=>{try{if(o.value&&o.value.length>0){const Ce=o.value.filter(_e=>_e?.consultationDate&&te(_e));Ce.length>0?(i.value=Ce[0],console.log("Selected most recent visible consultation:",i.value)):(console.log("No visible consultations available"),i.value={id:"0"})}else console.log("No consultations available"),i.value={id:"0"};c.value=ne(i.value?.consultationDate)}catch(Ce){console.error("Error selecting most recent consultation:",Ce),i.value={id:"0"},c.value=!1}},X=Ce=>{if(!Ce){console.error("No consultation provided to selectArtefact");return}if(!te(Ce)){console.warn("Attempted to select a consultation that should not be visible:",Ce);return}i.value=Ce,c.value=!1,E.value=!1,console.log("Selected Artefact:",i.value)},le=Ce=>{if(!Ce?.id){console.error("Invalid consultation provided for update");return}const _e=o.value.findIndex(De=>De?.id===Ce.id);_e!==-1&&(o.value[_e]=Ce),console.log("Updated Consultation:",i.value)},re=Ce=>{if(!Ce){console.error("No consultation provided to copy"),h.value=!0,p.value="Failed to copy consultation details";return}try{A.value=Qn.cloneDeep(Ce),f.value=!0,m.value="Details copied to new consultation",console.log("Copied Artefact:",A.value)}catch(_e){console.error("Error copying consultation:",_e),h.value=!0,p.value="Failed to copy consultation details"}},de=async()=>{if(!d.value.id||!y.value){console.warn("Patient ID or Doctor ID not available for loading procedures");return}C.value=!0;try{console.log(" Fetching procedures for patient:",d.value.id,"doctor:",y.value);const Ce=await lT(d.value.id,y.value);if(Ce.error)throw new Error(`Failed to load treatment plans: ${Ce.error.message}`);console.log(" Fetched procedures:",Ce.data),k.value=Qn.cloneDeep(Ce.data),console.log("Successfully loaded procedures:",k.value)}catch(Ce){console.error("Error loading procedures:",Ce),k.value=[],h.value=!0,p.value=`Failed to load treatment plans: ${Ce.message}`}finally{C.value=!1}},G=async()=>{if(!d.value.id||!y.value){h.value=!0,p.value="Patient or doctor information missing";return}try{const Ce=`New Treatment Plan ${new Date().toLocaleDateString()}`,_e=await aE(d.value.id,y.value,Ce,"","","");if(_e.error)throw new Error(`Failed to create procedure: ${_e.error.message}`);await de(),S.value=_e.data,E.value=!0,f.value=!0,m.value="New treatment plan created successfully",console.log("Created new procedure:",_e.data)}catch(Ce){console.error("Error creating procedure:",Ce),h.value=!0,p.value=Ce.message||"Failed to create treatment plan"}},Z=Ce=>{if(!Ce){console.error("No procedure provided to selectProcedure");return}S.value=Ce,E.value=!0,console.log("Selected Procedure:",S.value)},ce=Ce=>{if(!Ce?.id){console.error("Invalid procedure provided for update");return}const _e=k.value.findIndex(De=>De?.id===Ce.id);_e!==-1&&(k.value[_e]=Ce,S.value=Ce),console.log("Updated Procedure:",S.value)},Se=async Ce=>{if(!d.value.id||!y.value){h.value=!0,p.value="Patient or doctor information missing";return}try{const _e=await aE(d.value.id,y.value,Ce.treatmentPlanName||"New Treatment Plan",Ce.startDate||"",Ce.endDate||"",Ce.notes||"");if(_e.error)throw new Error(`Failed to create procedure: ${_e.error.message}`);await de(),S.value=_e.data,f.value=!0,m.value="Treatment plan created successfully",console.log("Created procedure from window:",_e.data)}catch(_e){console.error("Error creating procedure from window:",_e),h.value=!0,p.value=_e.message||"Failed to create treatment plan"}},Pe=async Ce=>{if(!Ce?.id){console.error("No procedure provided for deletion"),h.value=!0,p.value="Cannot delete: Invalid treatment plan";return}if(confirm(`Are you sure you want to delete the treatment plan "${Ce.treatmentPlanName}"?`))try{const _e=await ZM(Ce.id);if(_e.error){const De=_e.error.message||_e.error.response?.data?.error||"Failed to delete treatment plan";throw new Error(De)}await de(),S.value?.id===Ce.id&&(S.value={id:"0"},E.value=!1),f.value=!0,m.value="Treatment plan deleted successfully",console.log("Deleted procedure:",Ce.id)}catch(_e){console.error("Error deleting procedure:",_e),h.value=!0,p.value=_e.message||"Failed to delete treatment plan"}},ye=Ce=>{if(!Ce)return{text:"No data",class:"procedure-date-text"};let _e="",De="",xe="procedure-date-text";const Te=et=>et?new Date(et).toLocaleDateString("en-US",{timeZone:"Asia/Kolkata",month:"short",day:"numeric",year:"numeric"}):null;return Ce.status&&(De=Ce.status,Ce.status.toLowerCase()==="completed"&&(xe+=" status-completed")),Ce.startDate&&Ce.endDate?_e=`${Te(Ce.startDate)}  ${Te(Ce.endDate)}`:Ce.startDate?_e=`Start: ${Te(Ce.startDate)}`:Ce.endDate?_e=`End: ${Te(Ce.endDate)}`:Ce.createdAt?_e=`Created: ${Te(Ce.createdAt)}`:_e="No date available",{text:De?`${De}  ${_e}`:_e,class:xe}};return(Ce,_e)=>{const De=I("v-alert"),xe=I("v-progress-circular"),Te=I("v-col"),Me=I("v-row"),et=I("v-icon"),lt=I("v-breadcrumbs-item"),Re=I("v-breadcrumbs"),Le=I("v-card-title"),nt=I("v-btn"),Tt=I("v-tooltip"),Pt=I("v-card"),Kt=I("v-tab"),$t=I("v-tabs"),bt=I("v-card-text"),st=I("v-tabs-window-item"),Je=I("v-tabs-window"),Nt=I("v-dialog"),rn=I("v-snackbar");return U(),me(We,null,[w.value?(U(),pe(De,{key:0,type:"error",dismissible:"","onClick:close":_e[0]||(_e[0]=Lt=>w.value=null),class:"ma-3"},{default:u(()=>[M(K(w.value),1)]),_:1})):ge("",!0),b.value?(U(),pe(Me,{key:1,"no-gutters":"",class:"pa-3",style:{height:"100%"}},{default:u(()=>[l(Te,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[v("div",V4e,[l(xe,{indeterminate:"",color:"primary",size:"64"}),_e[8]||(_e[8]=v("div",{class:"mt-4 text-subtitle-1"},"Loading patient details...",-1))])]),_:1})]),_:1})):w.value?ge("",!0):(U(),me(We,{key:2},[l(Me,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[l(Te,{cols:"12"},{default:u(()=>[l(Pt,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center"},{default:u(()=>[v("div",L4e,[l(Me,{"no-gutters":"",class:"align-center"},{default:u(()=>[l(Te,{cols:"2",class:"d-flex justify-start"},{default:u(()=>[l(Re,{density:"default",class:"pa-0 breadcrumb-enhanced"},{default:u(()=>[(U(!0),me(We,null,qt(T.value,(Lt,_t)=>(U(),pe(lt,{key:_t,to:Lt.to,disabled:Lt.disabled,class:"text-subtitle-2 font-weight-medium breadcrumb-item-enhanced"},{default:u(()=>[Lt.icon?(U(),pe(et,{key:0,start:Lt.iconPosition!=="end",end:Lt.iconPosition==="end",size:"default",color:"primary",class:ct(Lt.iconClass)},{default:u(()=>[M(K(Lt.icon),1)]),_:2},1032,["start","end","class"])):ge("",!0),M(" "+K(Lt.text),1)]),_:2},1032,["to","disabled"]))),128))]),_:1})]),_:1}),l(Te,{cols:"10",class:"d-flex justify-center"},{default:u(()=>[v("div",M4e,[l(Le,{class:"pb-2 pr-2"},{default:u(()=>[v("span",O4e,K((d.value?.name||"Unknown Patient").length>40?(d.value?.name||"Unknown Patient").slice(0,40)+"":d.value?.name||"Unknown Patient"),1),v("span",H4e," ID: "+K(d.value?.id||"N/A")+"  "+K(d.value?.gender||"Unknown")+K(d.value?.age?`, ${d.value.age} yrs`:"")+K(d.value?.importID?`  Import ID: ${d.value.importID}`:""),1)]),_:1}),d.value?.note&&d.value.note.trim()!==""?(U(),me("div",$4e,[v("span",Q4e,K(d.value.note),1)])):(U(),me("div",G4e,[..._e[9]||(_e[9]=[v("span",{class:"text-caption text-medium-emphasis font-style-italic"},"no special note",-1)])])),l(Bn,{permission:"patients.edit"},{default:u(()=>[l(Tt,{text:"Edit Patient Details"},{activator:u(({props:Lt})=>[l(nt,Ue({color:"primary",variant:"text",size:"small"},Lt,{onClick:_e[1]||(_e[1]=_t=>P.value=!0),icon:"",tabindex:"-1",class:"ml-2"}),{default:u(()=>[l(et,null,{default:u(()=>[..._e[10]||(_e[10]=[v("img",{src:yv},null,-1)])]),_:1})]),_:1},16)]),_:1})]),_:1})])]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1}),l(Me,{"no-gutters":"","aria-label":"main row",class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[l(Te,{cols:"3",order:"1","aria-label":"list column",class:"pr-1 stable-height-column"},{default:u(()=>[v("div",z4e,[l(Pt,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex flex-column"},{default:u(()=>[v("div",K4e,[l($t,{modelValue:F.value,"onUpdate:modelValue":_e[2]||(_e[2]=Lt=>F.value=Lt),density:"compact",class:"mb-2"},{default:u(()=>[x.value?(U(),me(We,{key:0},[$e(r)("home.queue.patient").value||$e(r)("patients.details").value?(U(),pe(Kt,{key:0,value:"procedures",tabindex:"-1"},{default:u(()=>[..._e[11]||(_e[11]=[M(" Procedure ",-1)])]),_:1})):ge("",!0),$e(r)("home.queue.patient").value||$e(r)("patients.details").value?(U(),pe(Kt,{key:1,value:"consultations",tabindex:"-1"},{default:u(()=>[..._e[12]||(_e[12]=[M(" Consultation ",-1)])]),_:1})):ge("",!0)],64)):(U(),me(We,{key:1},[$e(r)("home.queue.patient").value||$e(r)("patients.details").value?(U(),pe(Kt,{key:0,value:"consultations",tabindex:"-1"},{default:u(()=>[..._e[13]||(_e[13]=[M(" Consultation ",-1)])]),_:1})):ge("",!0),$e(r)("home.queue.patient").value||$e(r)("patients.details").value?(U(),pe(Kt,{key:1,value:"procedures",tabindex:"-1"},{default:u(()=>[..._e[14]||(_e[14]=[M(" Procedure ",-1)])]),_:1})):ge("",!0)],64))]),_:1},8,["modelValue"])]),l(Je,{modelValue:F.value,"onUpdate:modelValue":_e[3]||(_e[3]=Lt=>F.value=Lt),class:"flex-grow-1"},{default:u(()=>[l(Bn,{anyPermission:"['home.queue.patient', 'patients.details']"},{default:u(()=>[l(st,{value:"consultations",class:"h-100"},{default:u(()=>[l(Me,{"no-gutters":"",class:"h-100"},{default:u(()=>[l(Te,{cols:"12",class:"mt-1 h-100"},{default:u(()=>[v("div",W4e,[l(Bn,{permission:"consultations.create"},{default:u(()=>[L.value?ge("",!0):(U(),pe(Pt,{key:0,color:"surfaceContainerHigh",density:"compact",class:"ma-2",rounded:"lg"},{default:u(()=>[l(bt,{class:"pa-3"},{default:u(()=>[l(nt,{color:"primary",variant:"flat",block:"",onClick:ee,disabled:!d.value?.id||!y.value},{default:u(()=>[..._e[15]||(_e[15]=[M(" Create New Consultation ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1}))]),_:1}),j.value?(U(!0),me(We,{key:0},qt(o.value,Lt=>(U(),me(We,{key:Lt.id},[Lt?.consultationDate&&te(Lt)?(U(),pe(Pt,{key:0,style:Rt([{textAlign:"left"},{cursor:"pointer"}]),class:ct([{"card-status-selected":i.value?.id===Lt.id,"card-status-default":i.value?.id!==Lt.id},"mx-2 mt-1 mb-2 card-enhanced card-hover-base"]),density:"compact",rounded:"lg",onClick:_t=>X(Lt)},{default:u(()=>[l(Me,{"no-gutters":""},{default:u(()=>[l(Te,{cols:"12"},{default:u(()=>[l(Le,{class:"pb-0 pt-2"},{default:u(()=>[v("div",j4e,K(Lt?.diagnosis||"No diagnosis"),1)]),_:2},1024),l(Me,{"no-gutters":""},{default:u(()=>[l(Te,{cols:"12"},{default:u(()=>[l(bt,{class:"pa-0 pb-2 pl-4"},{default:u(()=>[_e[16]||(_e[16]=v("span",{class:"text-caption text-medium-emphasis font-weight-bold"},"Rx: ",-1)),Lt?.medicines&&Lt.medicines.length>0?(U(!0),me(We,{key:0},qt(Lt.medicines,_t=>(U(),me(We,{key:_t?.id||_t},[M(K(_t?.productName||"Unknown medicine")+" ",1),Lt.medicines&&Lt.medicines.length>1&&Lt.medicines.indexOf(_t)!==Lt.medicines.length-1?(U(),me("span",q4e,", ")):ge("",!0)],64))),128)):(U(),me("span",Y4e,"No medicines prescribed"))]),_:2},1024)]),_:2},1024),Lt?.investigations&&Lt.investigations.trim()!==""?(U(),pe(Te,{key:0,cols:"12"},{default:u(()=>[l(bt,{class:"pa-0 pb-2 pl-4"},{default:u(()=>[_e[17]||(_e[17]=v("span",{class:"text-caption text-medium-emphasis font-weight-bold"},"Investigations: ",-1)),M(K(Lt.investigations),1)]),_:2},1024)]),_:2},1024)):ge("",!0),l(Te,{cols:"12",class:"d-flex align-center justify-space-between action-row-highlight pa-3 ma-0"},{default:u(()=>[l(bt,{class:"pa-0"},{default:u(()=>[v("span",{class:ct(ue(Lt.consultationDate).class)},K(ue(Lt.consultationDate).text),3)]),_:2},1024),v("div",X4e,[l(Tt,{text:ne(Lt.consultationDate)||Y(Lt.consultationDate)?"Cannot copy from today's or future consultations":"Copy to Most Recent"},{activator:u(({props:_t})=>[l(nt,Ue({onClick:pn(ut=>re(Lt),["stop"]),variant:"plain"},{ref_for:!0},_t,{size:"small",color:"primary",disabled:i.value?.id===Lt.id||ne(Lt.consultationDate)||Y(Lt.consultationDate),class:"btn-hover-base mr-1"}),{default:u(()=>[l(et,{size:"medium"},{default:u(()=>[..._e[18]||(_e[18]=[v("img",{src:RSe},null,-1)])]),_:1})]),_:1},16,["onClick","disabled"])]),_:2},1032,["text"]),l(Bn,{permission:"consultations.delete"},{default:u(()=>[l(Tt,{text:ne(Lt.consultationDate)?"Cannot delete today's consultation":"Delete Consultation"},{activator:u(({props:_t})=>[l(nt,Ue({color:"secondary",variant:"plain",size:"small"},{ref_for:!0},_t,{onClick:pn(ut=>O(Lt),["stop"]),disabled:ne(Lt.consultationDate),class:"btn-hover-base"}),{default:u(()=>[l(et,{size:"medium"},{default:u(()=>[..._e[19]||(_e[19]=[v("img",{src:Nd},null,-1)])]),_:1})]),_:1},16,["onClick","disabled"])]),_:2},1032,["text"])]),_:2},1024)])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class","onClick"])):ge("",!0)],64))),128)):(U(),me("div",J4e,[l(et,{size:"48",color:"primary",class:"mb-2"},{default:u(()=>[..._e[20]||(_e[20]=[v("img",{src:IE},null,-1)])]),_:1}),_e[21]||(_e[21]=v("p",{class:"text-subtitle-2 text-medium-emphasis"},"No consultations yet",-1)),_e[22]||(_e[22]=v("p",{class:"text-caption text-medium-emphasis"},"Create a consultation to get started",-1))]))])]),_:1})]),_:1})]),_:1})]),_:1}),l(Bn,{anyPermission:"['home.queue.patient', 'patients.details']"},{default:u(()=>[l(st,{value:"procedures",class:"h-100"},{default:u(()=>[l(Me,{"no-gutters":"",class:"h-100"},{default:u(()=>[l(Te,{cols:"12",class:"mt-1 h-100"},{default:u(()=>[v("div",Z4e,[l(Bn,{permission:"treatmentplans.create"},{default:u(()=>[l(Pt,{color:"surfaceContainerHigh",density:"compact",class:"ma-2",rounded:"lg"},{default:u(()=>[l(bt,{class:"pa-3"},{default:u(()=>[l(nt,{color:"primary",variant:"flat",block:"",onClick:G,disabled:!d.value?.id||!y.value},{default:u(()=>[..._e[23]||(_e[23]=[M(" Create Treatment Plan ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),C.value?(U(),pe(Me,{key:0,"no-gutters":""},{default:u(()=>[l(Te,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100px"}},{default:u(()=>[l(xe,{indeterminate:"",color:"primary"})]),_:1})]),_:1})):k.value&&k.value.length>0?(U(!0),me(We,{key:1},qt(k.value,Lt=>(U(),pe(Pt,{key:Lt.id,style:Rt([{textAlign:"left"},{cursor:"pointer"}]),class:ct([{"card-status-selected":S.value?.id===Lt.id&&E.value,"card-status-default":!(S.value?.id===Lt.id&&E.value)},"ma-2 card-enhanced card-hover-base"]),density:"compact",rounded:"lg",onClick:_t=>Z(Lt)},{default:u(()=>[l(Me,{"no-gutters":""},{default:u(()=>[l(Te,{cols:"12"},{default:u(()=>[l(Le,{class:"pb-0 pt-2"},{default:u(()=>[v("div",eIe,K(Lt?.treatmentPlanName||"Unnamed Treatment Plan"),1)]),_:2},1024),l(Me,{"no-gutters":""},{default:u(()=>[l(Te,{cols:"12"},{default:u(()=>[l(bt,{class:"pa-0 pb-2 pl-4"},{default:u(()=>[v("p",tIe,K(Lt?.notes||"No notes"),1)]),_:2},1024)]),_:2},1024),l(Te,{cols:"12",class:"d-flex align-center justify-space-between action-row-highlight pa-3 ma-0"},{default:u(()=>[l(bt,{class:"pa-0"},{default:u(()=>[v("span",{class:ct(ye(Lt).class),style:{"min-height":"18px",display:"inline-block"}},K(ye(Lt).text),3)]),_:2},1024),v("div",nIe,[l(Bn,{permission:"treatmentplans.delete"},{default:u(()=>[l(Tt,{text:"Delete Treatment Plan"},{activator:u(({props:_t})=>[l(nt,Ue({color:"secondary",variant:"plain",size:"small"},{ref_for:!0},_t,{onClick:pn(ut=>Pe(Lt),["stop"]),class:"btn-hover-base"}),{default:u(()=>[l(et,{size:"medium"},{default:u(()=>[..._e[24]||(_e[24]=[v("img",{src:Nd},null,-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024)])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128)):(U(),me("div",aIe,[l(et,{size:"48",color:"primary",class:"mb-2"},{default:u(()=>[..._e[25]||(_e[25]=[v("img",{src:IE},null,-1)])]),_:1}),_e[26]||(_e[26]=v("p",{class:"text-subtitle-2 text-medium-emphasis"},"No treatment plans yet",-1)),_e[27]||(_e[27]=v("p",{class:"text-caption text-medium-emphasis"},"Create a treatment plan to get started",-1))]))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(Nt,{modelValue:D.value,"onUpdate:modelValue":_e[4]||(_e[4]=Lt=>D.value=Lt),"max-width":"30%",persistent:""},{default:u(()=>[l(N4e,{deleteConsult:g.value,onClose:H},null,8,["deleteConsult"])]),_:1},8,["modelValue"]),l(Nt,{modelValue:P.value,"onUpdate:modelValue":_e[5]||(_e[5]=Lt=>P.value=Lt),"max-width":"50%",persistent:""},{default:u(()=>[l(R4e,{patient:d.value,onClose:ie},null,8,["patient"])]),_:1},8,["modelValue"])]),_:1})])]),_:1}),l(Te,{cols:"9",order:"2",class:"pl-1 stable-height-column","aria-label":"consultation column"},{default:u(()=>[v("div",rIe,[l(Pt,{color:"surfaceContainer",flat:"",style:{height:"100%"}},{default:u(()=>[F.value==="procedures"?(U(),pe(F4e,{treatmentPlan:S.value,patient:d.value,key:S.value?.id||"new","onUpdate:treatmentPlan":ce,onCreateNewTreatmentPlan:Se},null,8,["treatmentPlan","patient"])):(U(),pe(YH,{consultation:i.value,patient:d.value,key:i.value.id,consultationCopy:A.value,"onUpdate:consultation":le,onCreateNewArtefact:ee},null,8,["consultation","patient","consultationCopy"]))]),_:1})])]),_:1})]),_:1}),l(rn,{modelValue:f.value,"onUpdate:modelValue":_e[6]||(_e[6]=Lt=>f.value=Lt),class:"elevation-24",color:"success"},{default:u(()=>[M(K(m.value),1)]),_:1},8,["modelValue"]),l(rn,{modelValue:h.value,"onUpdate:modelValue":_e[7]||(_e[7]=Lt=>h.value=Lt),class:"elevation-24",color:"failure"},{default:u(()=>[M(K(p.value),1)]),_:1},8,["modelValue"])],64))],64)}}},oIe=Xt(sIe,[["__scopeId","data-v-68ad9a05"]]),iIe={__name:"edit-doctor",props:{doctor:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=t,a=V(Nw),r=e,s=V(Qn.clone(r.doctor)),o=V(!1),i=()=>{n("close")},c=async A=>{console.log("Updating doctor details",A);const d={...A,email:A.email||"",isGST:A.isGST||!1,gstIdentifier:A.gstIdentifier||"",isPharmacy:A.isPharmacy||!1},f=await sce(d);f.error?console.error("Error updating doctor details",f.error):console.error("Doctor detail update successful"),i()};return(A,d)=>{const f=I("v-card-title"),m=I("v-col"),h=I("v-icon"),p=I("v-btn"),y=I("v-row"),g=I("v-card"),w=I("v-switch"),b=I("v-card-subtitle"),x=I("v-divider"),T=I("v-text-field"),F=I("v-combobox"),k=I("v-form");return U(),pe(g,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(y,{"no-gutters":""},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(g,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(y,{"no-gutters":""},{default:u(()=>[l(m,{cols:"11"},{default:u(()=>[l(f,{class:"pa-0 pl-2"},{default:u(()=>[...d[10]||(d[10]=[M("Update Doctor Details",-1)])]),_:1})]),_:1}),l(m,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(p,{icon:"",size:"x-small",onClick:i},{default:u(()=>[l(h,null,{default:u(()=>[...d[11]||(d[11]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(y,{"no-gutters":""},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(g,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(k,{modelValue:o.value,"onUpdate:modelValue":d[9]||(d[9]=S=>o.value=S),"validate-on":"blur"},{default:u(()=>[l(y,{"no-gutters":"",class:"mb-3 pl-3"},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(w,{modelValue:s.value.procedurePrimary,"onUpdate:modelValue":d[0]||(d[0]=S=>s.value.procedurePrimary=S),label:"Procedure-Primary Practice",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"]),l(b,{class:"pa-0 text-caption text-medium-emphasis"},{default:u(()=>[...d[12]||(d[12]=[M(" Enable this for procedure-centric practices. ",-1)])]),_:1})]),_:1})]),_:1}),l(x,{class:"mb-3"}),l(y,{"no-gutters":""},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(T,{label:"Doctor Name (Dr.) *",density:"compact",modelValue:s.value.doctorName,"onUpdate:modelValue":d[1]||(d[1]=S=>s.value.doctorName=S),clearable:"",rules:$e(gr)},null,8,["modelValue","rules"])]),_:1}),l(m,{cols:"12"},{default:u(()=>[l(F,{label:"Specialization *",density:"compact",items:a.value,rules:$e(gr),clearable:"",modelValue:s.value.doctorSpecialization,"onUpdate:modelValue":d[2]||(d[2]=S=>s.value.doctorSpecialization=S)},null,8,["items","rules","modelValue"])]),_:1}),l(m,{cols:"12"},{default:u(()=>[l(T,{label:"Doctor Email (optional)",density:"compact",clearable:"",rules:$e(Eg),modelValue:s.value.email,"onUpdate:modelValue":d[3]||(d[3]=S=>s.value.email=S)},null,8,["rules","modelValue"])]),_:1}),l(m,{cols:"12"},{default:u(()=>[l(T,{label:"Review Link (optional)",density:"compact",clearable:"",modelValue:s.value.doctorReviewLink,"onUpdate:modelValue":d[4]||(d[4]=S=>s.value.doctorReviewLink=S)},null,8,["modelValue"])]),_:1})]),_:1}),l(x,{class:"my-3"}),l(y,{"no-gutters":"",class:"mb-3 pl-3"},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(w,{modelValue:s.value.isGST,"onUpdate:modelValue":d[5]||(d[5]=S=>s.value.isGST=S),label:"GST Registered Practice",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"]),l(b,{class:"pa-0 text-caption text-medium-emphasis"},{default:u(()=>[...d[13]||(d[13]=[M(" Enable if your practice is registered for GST. ",-1)])]),_:1})]),_:1})]),_:1}),s.value.isGST?(U(),pe(y,{key:0,"no-gutters":"",class:"mb-3"},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(T,{label:"GST Registration Number (optional)",density:"compact",modelValue:s.value.gstIdentifier,"onUpdate:modelValue":d[6]||(d[6]=S=>s.value.gstIdentifier=S),clearable:"",placeholder:"e.g., 27AAAAA0000A1Z5"},null,8,["modelValue"])]),_:1})]),_:1})):ge("",!0),l(x,{class:"my-3"}),l(y,{"no-gutters":"",class:"mb-3 pl-3"},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(w,{modelValue:s.value.isPharmacy,"onUpdate:modelValue":d[7]||(d[7]=S=>s.value.isPharmacy=S),label:"Pharmacy Practice",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"]),l(b,{class:"pa-0 text-caption text-medium-emphasis"},{default:u(()=>[...d[14]||(d[14]=[M(" Enable this for pharmacy practices. ",-1)])]),_:1})]),_:1})]),_:1}),l(x),l(y,{"no-gutters":""},{default:u(()=>[l(m,{cols:"2"}),l(m,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(p,{variant:"outlined",onClick:d[8]||(d[8]=S=>c(s.value)),disabled:!o.value},{default:u(()=>[...d[15]||(d[15]=[M("Update",-1)])]),_:1},8,["disabled"])]),_:1}),l(m,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},lIe={__name:"edit-clinic",props:{clinic:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=t,a=e,r=V(Qn.clone(a.clinic)),s=V(!1),o=()=>{n("close")},i=async c=>{console.log("Updating clinic details",c);const A=await lce(c);A.error?console.error("Error updating clinic details",A.error):console.error("Clinic detail update successful"),o()};return(c,A)=>{const d=I("v-card-title"),f=I("v-col"),m=I("v-icon"),h=I("v-btn"),p=I("v-row"),y=I("v-card"),g=I("v-text-field"),w=I("v-select"),b=I("v-divider"),x=I("v-form");return U(),pe(y,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(p,{"no-gutters":""},{default:u(()=>[l(f,{cols:"12"},{default:u(()=>[l(y,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(p,{"no-gutters":""},{default:u(()=>[l(f,{cols:"11"},{default:u(()=>[l(d,{class:"pa-0 pl-2"},{default:u(()=>[...A[5]||(A[5]=[M("Update Clinic Details",-1)])]),_:1})]),_:1}),l(f,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(h,{icon:"",size:"x-small",onClick:o},{default:u(()=>[l(m,null,{default:u(()=>[...A[6]||(A[6]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(p,{"no-gutters":""},{default:u(()=>[l(f,{cols:"12"},{default:u(()=>[l(y,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(x,{modelValue:s.value,"onUpdate:modelValue":A[4]||(A[4]=T=>s.value=T),"validate-on":"blur"},{default:u(()=>[l(p,{"no-gutters":""},{default:u(()=>[l(f,{cols:"12"},{default:u(()=>[l(g,{label:"Clinic Name *",density:"compact",modelValue:r.value.clinicName,"onUpdate:modelValue":A[0]||(A[0]=T=>r.value.clinicName=T),clearable:"",rules:$e(gr)},null,8,["modelValue","rules"])]),_:1}),l(f,{cols:"12"},{default:u(()=>[l(w,{label:"State/UT *",density:"compact",modelValue:r.value.clinicAddress,"onUpdate:modelValue":A[1]||(A[1]=T=>r.value.clinicAddress=T),items:$e(yT),rules:$e(gr),clearable:""},null,8,["modelValue","items","rules"])]),_:1}),l(f,{cols:"12"},{default:u(()=>[l(g,{label:"Contact Number *",density:"compact",clearable:"",modelValue:r.value.contactNumber,"onUpdate:modelValue":A[2]||(A[2]=T=>r.value.contactNumber=T),rules:$e(mh)},null,8,["modelValue","rules"])]),_:1})]),_:1}),l(b),l(p,{"no-gutters":""},{default:u(()=>[l(f,{cols:"2"}),l(f,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(h,{variant:"outlined",onClick:A[3]||(A[3]=T=>i(r.value)),disabled:!s.value},{default:u(()=>[...A[7]||(A[7]=[M("Update",-1)])]),_:1},8,["disabled"])]),_:1}),l(f,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},uIe={__name:"create-clinic",emits:["close"],setup(e,{emit:t}){const n=t,a=V({clinicName:"",clinicAddress:"",contactNumber:""}),r=V(!1),s=()=>{n("close")},o=async i=>{console.log("Create clinic",i);const c=await ice(i);c.error?console.error("Error creating clinic",c.error):console.error("Clinic create successful"),s()};return(i,c)=>{const A=I("v-card-title"),d=I("v-col"),f=I("v-icon"),m=I("v-btn"),h=I("v-row"),p=I("v-card"),y=I("v-text-field"),g=I("v-select"),w=I("v-divider"),b=I("v-form");return U(),pe(p,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(p,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"11"},{default:u(()=>[l(A,{class:"pa-0 pl-2"},{default:u(()=>[...c[5]||(c[5]=[M("Create New Clinic",-1)])]),_:1})]),_:1}),l(d,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(m,{icon:"",size:"x-small",onClick:s},{default:u(()=>[l(f,null,{default:u(()=>[...c[6]||(c[6]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(p,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(b,{modelValue:r.value,"onUpdate:modelValue":c[4]||(c[4]=x=>r.value=x),"validate-on":"blur"},{default:u(()=>[l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"12"},{default:u(()=>[l(y,{label:"Clinic Name *",density:"compact",modelValue:a.value.clinicName,"onUpdate:modelValue":c[0]||(c[0]=x=>a.value.clinicName=x),clearable:"",rules:$e(gr)},null,8,["modelValue","rules"])]),_:1}),l(d,{cols:"12"},{default:u(()=>[l(g,{label:"State/UT *",density:"compact",modelValue:a.value.clinicAddress,"onUpdate:modelValue":c[1]||(c[1]=x=>a.value.clinicAddress=x),items:$e(yT),rules:$e(gr),clearable:""},null,8,["modelValue","items","rules"])]),_:1}),l(d,{cols:"12"},{default:u(()=>[l(y,{label:"Contact Number *",density:"compact",clearable:"",modelValue:a.value.contactNumber,"onUpdate:modelValue":c[2]||(c[2]=x=>a.value.contactNumber=x),rules:$e(mh)},null,8,["modelValue","rules"])]),_:1})]),_:1}),l(w),l(h,{"no-gutters":""},{default:u(()=>[l(d,{cols:"2"}),l(d,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(m,{variant:"outlined",onClick:c[3]||(c[3]=x=>o(a.value)),disabled:!r.value},{default:u(()=>[...c[7]||(c[7]=[M("Create",-1)])]),_:1},8,["disabled"])]),_:1}),l(d,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},cIe={__name:"create-doctor",emits:["close"],setup(e,{emit:t}){const n=t,a=V(Nw),r=V({doctorName:"",doctorSpecialization:"",email:"",doctorReviewLink:"",procedurePrimary:!1,isGST:!1,gstIdentifier:"",isPharmacy:!1}),s=V(!1),o=()=>{n("close")},i=async c=>{console.log("Create doctor details",c);const A=await rce(c);A.error?console.error("Error creating doctor",A.error):console.error("Doctor created successfully"),o()};return(c,A)=>{const d=I("v-card-title"),f=I("v-col"),m=I("v-icon"),h=I("v-btn"),p=I("v-row"),y=I("v-card"),g=I("v-switch"),w=I("v-card-subtitle"),b=I("v-divider"),x=I("v-text-field"),T=I("v-combobox"),F=I("v-form");return U(),pe(y,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(p,{"no-gutters":""},{default:u(()=>[l(f,{cols:"12"},{default:u(()=>[l(y,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(p,{"no-gutters":""},{default:u(()=>[l(f,{cols:"11"},{default:u(()=>[l(d,{class:"pa-0 pl-2"},{default:u(()=>[...A[10]||(A[10]=[M("Create New Doctor",-1)])]),_:1})]),_:1}),l(f,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(h,{icon:"",size:"x-small",onClick:o},{default:u(()=>[l(m,null,{default:u(()=>[...A[11]||(A[11]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(p,{"no-gutters":""},{default:u(()=>[l(f,{cols:"12"},{default:u(()=>[l(y,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(F,{modelValue:s.value,"onUpdate:modelValue":A[9]||(A[9]=k=>s.value=k),"validate-on":"blur"},{default:u(()=>[l(p,{"no-gutters":"",class:"mb-3 pl-3"},{default:u(()=>[l(f,{cols:"12"},{default:u(()=>[l(g,{modelValue:r.value.procedurePrimary,"onUpdate:modelValue":A[0]||(A[0]=k=>r.value.procedurePrimary=k),label:"Procedure-Primary Practice",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"]),l(w,{class:"pa-0 text-caption text-medium-emphasis"},{default:u(()=>[...A[12]||(A[12]=[M(" Enable this for procedure-centric practices. ",-1)])]),_:1})]),_:1})]),_:1}),l(b,{class:"mb-3"}),l(p,{"no-gutters":""},{default:u(()=>[l(f,{cols:"12"},{default:u(()=>[l(x,{label:"Doctor Name (Dr.) *",density:"compact",modelValue:r.value.doctorName,"onUpdate:modelValue":A[1]||(A[1]=k=>r.value.doctorName=k),clearable:"",rules:$e(gr)},null,8,["modelValue","rules"])]),_:1}),l(f,{cols:"12"},{default:u(()=>[l(T,{label:"Specialization *",density:"compact",items:a.value,rules:$e(gr),clearable:"",modelValue:r.value.doctorSpecialization,"onUpdate:modelValue":A[2]||(A[2]=k=>r.value.doctorSpecialization=k)},null,8,["items","rules","modelValue"])]),_:1}),l(f,{cols:"12"},{default:u(()=>[l(x,{label:"Doctor Email (optional)",density:"compact",clearable:"",rules:$e(Eg),modelValue:r.value.email,"onUpdate:modelValue":A[3]||(A[3]=k=>r.value.email=k)},null,8,["rules","modelValue"])]),_:1}),l(f,{cols:"12"},{default:u(()=>[l(x,{label:"Review Link (optional)",density:"compact",clearable:"",modelValue:r.value.doctorReviewLink,"onUpdate:modelValue":A[4]||(A[4]=k=>r.value.doctorReviewLink=k)},null,8,["modelValue"])]),_:1})]),_:1}),l(b,{class:"my-3"}),l(p,{"no-gutters":"",class:"mb-3 pl-3"},{default:u(()=>[l(f,{cols:"12"},{default:u(()=>[l(g,{modelValue:r.value.isGST,"onUpdate:modelValue":A[5]||(A[5]=k=>r.value.isGST=k),label:"GST Registered Practice",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"]),l(w,{class:"pa-0 text-caption text-medium-emphasis"},{default:u(()=>[...A[13]||(A[13]=[M(" Enable if your practice is registered for GST. ",-1)])]),_:1})]),_:1})]),_:1}),r.value.isGST?(U(),pe(p,{key:0,"no-gutters":"",class:"mb-3"},{default:u(()=>[l(f,{cols:"12"},{default:u(()=>[l(x,{label:"GST Registration Number (optional)",density:"compact",modelValue:r.value.gstIdentifier,"onUpdate:modelValue":A[6]||(A[6]=k=>r.value.gstIdentifier=k),clearable:"",placeholder:"e.g., 27AAAAA0000A1Z5"},null,8,["modelValue"])]),_:1})]),_:1})):ge("",!0),l(b,{class:"my-3"}),l(p,{"no-gutters":"",class:"mb-3 pl-3"},{default:u(()=>[l(f,{cols:"12"},{default:u(()=>[l(g,{modelValue:r.value.isPharmacy,"onUpdate:modelValue":A[7]||(A[7]=k=>r.value.isPharmacy=k),label:"Pharmacy Practice",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"]),l(w,{class:"pa-0 text-caption text-medium-emphasis"},{default:u(()=>[...A[14]||(A[14]=[M(" Enable this for pharmacy practices. ",-1)])]),_:1})]),_:1})]),_:1}),l(b),l(p,{"no-gutters":""},{default:u(()=>[l(f,{cols:"2"}),l(f,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(h,{variant:"outlined",onClick:A[8]||(A[8]=k=>i(r.value)),disabled:!s.value},{default:u(()=>[...A[15]||(A[15]=[M("Create",-1)])]),_:1},8,["disabled"])]),_:1}),l(f,{cols:"2"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},dIe={class:"permissions-section"},AIe={class:"d-flex align-center justify-space-between mb-4"},fIe={key:0,class:"text-center py-8"},mIe={key:1,class:"features-container"},vIe={class:"d-flex align-center justify-space-between w-100 pr-4"},hIe={class:"d-flex align-center flex-grow-1"},pIe={class:"flex-grow-1"},gIe={class:"text-body-1 font-weight-medium d-flex align-center"},yIe={class:"text-caption text-medium-emphasis mt-1"},_Ie={class:"text-caption text-medium-emphasis mb-3 d-flex align-center"},wIe={class:"action-card-content"},bIe={class:"action-card-text"},xIe={class:"text-body-2 font-weight-medium action-title"},CIe={class:"action-description-wrapper"},SIe={class:"text-caption text-medium-emphasis action-description"},EIe={__name:"permission-assignment",props:{user:{type:Object,required:!0,default:()=>({permissions:[],selectedFeatures:[],role:null})},availableFeatures:{type:Array,required:!0,default:()=>[]}},emits:["update:user"],setup(e,{emit:t}){const n=e,a=t,r=V(""),s=V([]),o=V([]),i=V(null),c=ae(()=>o.value.map(F=>({value:F.id,name:F.name,description:F.description,...F}))),A=async()=>{try{const F=await dt.get("/admin/users/roles");F.data&&F.data.success&&(o.value=F.data.roles||[])}catch(F){console.error("Failed to load roles:",F)}},d=F=>{if(f.value=!0,i.value=F,!F){y({role:null}),f.value=!1;return}const k=o.value.find(P=>P.id===F);if(!k){f.value=!1;return}const S=k.defaultFeatures||[],E=k.defaultPermissions||[],C=S.includes("home")?[...S]:["home",...S],D=[...E];y({role:F,selectedFeatures:C,permissions:D}),setTimeout(()=>{f.value=!1},100)},f=V(!1),m=()=>{if(!n.user)return;const F=n.user.permissions||[],k=n.user.selectedFeatures||[];let S=!1;const E={};k.includes("home")||(E.selectedFeatures=[...k,"home"],S=!0),F.includes("home")||(E.permissions=[...F,"home"],S=!0),S&&y(E)};un(()=>{A(),n.user.role&&(i.value=n.user.role),m()}),Ke(()=>[n.user?.permissions,n.user?.selectedFeatures],()=>{const F=n.user?.permissions||[],k=n.user?.selectedFeatures||[];(!F.includes("home")||!k.includes("home"))&&m()},{immediate:!0}),Ke(()=>n.user.role,F=>{f.value||F!==i.value&&(i.value=F||null)});const h=F=>F&&F.actions&&Array.isArray(F.actions)&&F.actions.length>0,p=(F,k)=>{if(!h(F)){k.stopPropagation(),k.preventDefault();const S=s.value.indexOf(F.id);S>-1&&s.value.splice(S,1)}},y=F=>{a("update:user",{...n.user,...F})},g=ae(()=>{if(!r.value||r.value.trim()==="")return n.availableFeatures||[];const F=r.value.toLowerCase().trim();return(n.availableFeatures||[]).filter(k=>{if(!k)return!1;const S=(k.name||"").toLowerCase().includes(F),E=(k.description||"").toLowerCase().includes(F),C=(k.id||"").toLowerCase().includes(F),D=k.actions&&Array.isArray(k.actions)&&k.actions.some(P=>{const O=(P.description||"").toLowerCase(),H=(P.id||"").toLowerCase(),ie=(P.action||"").toLowerCase();return O.includes(F)||H.includes(F)||ie.includes(F)});return S||E||C||D})}),w=F=>!n.user||!n.user.permissions||!Array.isArray(n.user.permissions)?!1:n.user.permissions.includes(F),b=F=>{if(!n.user||!n.user.permissions||!Array.isArray(n.user.permissions))return 0;const k=n.availableFeatures.find(E=>E&&E.id===F);if(!k||!k.actions||!Array.isArray(k.actions))return 0;const S=k.actions.filter(E=>E&&E.id).map(E=>E.id);return n.user.permissions.filter(E=>S.includes(E)).length},x=(F,k)=>{if(!n.user||F==="home"&&!k)return;const S=n.user.permissions||[],E=n.user.selectedFeatures||[],C=n.availableFeatures.find(H=>H&&H.id===F);if(!C)return;const D=C.actions&&Array.isArray(C.actions)?C.actions.filter(H=>H&&H.id).map(H=>H.id):[];let P=[...S],O=[...E];k?(O.includes(F)||O.push(F),P.includes(F)||P.push(F),D.forEach(H=>{P.includes(H)||P.push(H)}),P=[...new Set(P)]):(O=O.filter(H=>H!==F),P=P.filter(H=>!(H===F||D.includes(H)||H&&typeof H=="string"&&H.startsWith(`${F}.`)))),O.includes("home")||O.push("home"),P.includes("home")||P.push("home"),y({permissions:P,selectedFeatures:O})},T=(F,k)=>{if(!n.user)return;let E=[...n.user.permissions||[]];k?E.includes(F)||E.push(F):E=E.filter(C=>C!==F),y({permissions:E})};return(F,k)=>{const S=I("v-chip"),E=I("v-list-item-subtitle"),C=I("v-list-item"),D=I("v-select"),P=I("v-text-field"),O=I("v-progress-circular"),H=I("v-checkbox"),ie=I("v-expansion-panel-title"),Ae=I("v-icon"),j=I("v-card"),J=I("v-col"),ue=I("v-row"),ne=I("v-expansion-panel-text"),Y=I("v-expansion-panel"),te=I("v-expansion-panels");return U(),me("div",dIe,[v("div",AIe,[k[5]||(k[5]=v("div",null,[v("h3",{class:"text-h6 mb-1"},"Assign Permissions"),v("p",{class:"text-caption text-medium-emphasis mb-0"}," Select features and specific actions the user can perform ")],-1)),e.user.selectedFeatures&&e.user.selectedFeatures.length>0?(U(),pe(S,{key:0,color:"primary",size:"small",variant:"flat",class:"font-weight-medium"},{default:u(()=>[M(K(e.user.selectedFeatures.length)+" selected ",1)]),_:1})):ge("",!0)]),l(D,{modelValue:i.value,"onUpdate:modelValue":[k[0]||(k[0]=L=>i.value=L),d],items:c.value,"item-value":"value","item-title":"name",label:"Select Role",variant:"outlined",density:"comfortable",clearable:"","hide-details":"",class:"mb-4",color:"primary"},{item:u(({props:L,item:N})=>[l(C,eu(nu(L)),{default:u(()=>[l(E,null,{default:u(()=>[M(K(N.raw.description),1)]),_:2},1024)]),_:2},1040)]),selection:u(({item:L})=>[M(K(L.raw.name),1)]),_:1},8,["modelValue","items"]),l(P,{modelValue:r.value,"onUpdate:modelValue":k[1]||(k[1]=L=>r.value=L),"prepend-inner-icon":"mdi-magnify",label:"Search features or actions...",variant:"outlined",density:"comfortable",clearable:"","hide-details":"",class:"mb-4",color:"primary"},null,8,["modelValue"]),!e.availableFeatures||e.availableFeatures.length===0?(U(),me("div",fIe,[l(O,{indeterminate:"",color:"primary",size:"32"}),k[6]||(k[6]=v("p",{class:"text-body-2 text-medium-emphasis mt-4"},"Loading permissions...",-1))])):(U(),me("div",mIe,[l(te,{modelValue:s.value,"onUpdate:modelValue":k[4]||(k[4]=L=>s.value=L),variant:"accordion",multiple:"",class:"feature-panels"},{default:u(()=>[(U(!0),me(We,null,qt(g.value,L=>(U(),pe(Y,{key:L?.id||L,value:L.id,class:"feature-panel"},{default:u(()=>[l(ie,{class:"feature-panel-title","hide-actions":!h(L),onClick:N=>p(L,N)},{default:u(()=>[v("div",vIe,[v("div",hIe,[L&&L.id?(U(),pe(H,{key:0,"model-value":e.user.selectedFeatures&&Array.isArray(e.user.selectedFeatures)&&e.user.selectedFeatures.includes(L.id),disabled:L.id==="home",onClick:k[2]||(k[2]=pn(()=>{},["stop"])),"onUpdate:modelValue":N=>x(L.id,N),density:"comfortable","hide-details":"",color:"primary",class:"mr-3"},null,8,["model-value","disabled","onUpdate:modelValue"])):ge("",!0),v("div",pIe,[v("div",gIe,[M(K(L.name||L.id)+" ",1),b(L.id)>0?(U(),pe(S,{key:0,size:"x-small",color:"primary",variant:"flat",class:"ml-2"},{default:u(()=>[M(K(b(L.id))+"/"+K(L.actions?.length||0),1)]),_:2},1024)):ge("",!0)]),v("div",yIe,K(L.description||"No description available"),1)])])])]),_:2},1032,["hide-actions","onClick"]),h(L)?(U(),pe(ne,{key:0,class:"feature-panel-content"},{default:u(()=>[v("div",null,[v("div",_Ie,[l(Ae,{size:"small",class:"mr-1"},{default:u(()=>[...k[7]||(k[7]=[M("mdi-check-circle-outline",-1)])]),_:1}),k[8]||(k[8]=M(" Select specific actions for this feature ",-1))]),l(ue,{dense:"",class:"actions-grid"},{default:u(()=>[(U(!0),me(We,null,qt(L.actions,N=>(U(),me(We,{key:N?.id||`action-${N?.action}`},[N&&N.id?(U(),pe(J,{key:0,cols:"12",sm:"6",md:"4"},{default:u(()=>[l(j,{class:ct(["action-card",{"action-card-selected":w(N.id)}]),onClick:q=>T(N.id,!w(N.id)),elevation:"0"},{default:u(()=>[v("div",wIe,[l(H,{"model-value":w(N.id),onClick:k[3]||(k[3]=pn(()=>{},["stop"])),"onUpdate:modelValue":q=>T(N.id,q),density:"compact","hide-details":"",color:"primary",class:"action-checkbox",size:"small"},null,8,["model-value","onUpdate:modelValue"]),v("div",bIe,[v("div",xIe,K(N.action?N.action.charAt(0).toUpperCase()+N.action.slice(1):N.id?N.id.split(".").pop():"Action"),1)])]),v("div",CIe,[v("div",SIe,K(N.description||N.id||"No description"),1)])]),_:2},1032,["class","onClick"])]),_:2},1024)):ge("",!0)],64))),128))]),_:2},1024)])]),_:2},1024)):ge("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]))])}}},gR=Xt(EIe,[["__scopeId","data-v-92772965"]]),BIe={__name:"CreatePharmacy",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","saved"],setup(e,{emit:t}){const{showSuccess:n,showError:a}=ra(),r=e,s=t,o=V(r.modelValue),i=V(null),c=V(!1),A=V(!1),d=V({pharmacyName:"",pharmacyNameLine1:"",addressAndContactInfo:"",gstNumberLine1:"",otherRegistrationInfo:"",useHeader:!0,pageSize:"A4"}),f=["A4","A5"];Ke(()=>r.modelValue,p=>{o.value=p,p&&(d.value={pharmacyName:"",pharmacyNameLine1:"",addressAndContactInfo:"",gstNumberLine1:"",otherRegistrationInfo:"",useHeader:!0,pageSize:"A4"},i.value&&i.value.resetValidation())}),Ke(o,p=>{s("update:modelValue",p)});const m=()=>{o.value=!1},h=async()=>{if(!i.value)return;const{valid:p}=await i.value.validate();if(p){A.value=!0;try{const y=d.value.pharmacyNameLine1.trim()+(d.value.addressAndContactInfo?.trim()?`
`+d.value.addressAndContactInfo.trim():""),g=d.value.gstNumberLine1.trim()+(d.value.otherRegistrationInfo?.trim()?`
`+d.value.otherRegistrationInfo.trim():""),w={pharmacyName:d.value.pharmacyName,header:y,gstNumber:g,useHeader:d.value.useHeader,pageSize:d.value.pageSize||"A4"},{data:b,error:x}=await hce(w);if(x)throw x;n("Pharmacy created successfully"),s("saved",b),m()}catch(y){console.error("Error creating pharmacy:",y),a(y.response?.data?.error||y.message||"Failed to create pharmacy")}finally{A.value=!1}}};return(p,y)=>{const g=I("v-icon"),w=I("v-btn"),b=I("v-card-title"),x=I("v-divider"),T=I("v-text-field"),F=I("v-col"),k=I("v-textarea"),S=I("v-switch"),E=I("v-select"),C=I("v-row"),D=I("v-form"),P=I("v-card-text"),O=I("v-spacer"),H=I("v-card-actions"),ie=I("v-card"),Ae=I("v-dialog");return U(),pe(Ae,{modelValue:o.value,"onUpdate:modelValue":y[8]||(y[8]=j=>o.value=j),"max-width":"600",persistent:""},{default:u(()=>[l(ie,{rounded:"lg",color:"surfaceContainer",flat:""},{default:u(()=>[l(b,{class:"d-flex align-center justify-space-between"},{default:u(()=>[y[10]||(y[10]=v("span",null,"Create Pharmacy",-1)),l(w,{onClick:m,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(g,{size:"18"},{default:u(()=>[...y[9]||(y[9]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(x),l(P,{class:"py-1"},{default:u(()=>[l(D,{ref_key:"form",ref:i,modelValue:c.value,"onUpdate:modelValue":y[7]||(y[7]=j=>c.value=j)},{default:u(()=>[l(C,{dense:""},{default:u(()=>[l(F,{cols:"12"},{default:u(()=>[l(T,{modelValue:d.value.pharmacyName,"onUpdate:modelValue":y[0]||(y[0]=j=>d.value.pharmacyName=j),label:"Pharmacy Name (Display) *",variant:"outlined",density:"compact",rules:[j=>!!j||"Pharmacy name is required"],hint:"Name shown in the UI for selecting this pharmacy","prepend-inner-icon":"mdi-pill"},null,8,["modelValue","rules"])]),_:1}),l(F,{cols:"12"},{default:u(()=>[l(T,{modelValue:d.value.pharmacyNameLine1,"onUpdate:modelValue":y[1]||(y[1]=j=>d.value.pharmacyNameLine1=j),label:"Pharmacy Name (First Line on Bill) *",variant:"outlined",density:"compact",rules:[j=>!!j||"Pharmacy name for bill is required"],hint:"First line of pharmacy name on printed bills","prepend-inner-icon":"mdi-file-document-outline"},null,8,["modelValue","rules"])]),_:1}),l(F,{cols:"12"},{default:u(()=>[l(k,{modelValue:d.value.addressAndContactInfo,"onUpdate:modelValue":y[2]||(y[2]=j=>d.value.addressAndContactInfo=j),label:"Address and Contact Info (Second Line on Bill)",variant:"outlined",density:"compact","auto-grow":"",rows:"2",hint:"Address, phone, email - second line on printed bills","prepend-inner-icon":"mdi-map-marker-outline"},null,8,["modelValue"])]),_:1}),l(F,{cols:"12"},{default:u(()=>[l(T,{modelValue:d.value.gstNumberLine1,"onUpdate:modelValue":y[3]||(y[3]=j=>d.value.gstNumberLine1=j),label:"GST Number (First Line)",variant:"outlined",density:"compact",hint:"GST number - first line on printed bills","prepend-inner-icon":"mdi-identifier"},null,8,["modelValue"])]),_:1}),l(F,{cols:"12"},{default:u(()=>[l(k,{modelValue:d.value.otherRegistrationInfo,"onUpdate:modelValue":y[4]||(y[4]=j=>d.value.otherRegistrationInfo=j),label:"Other Registration Info (Second Line)",variant:"outlined",density:"compact","auto-grow":"",rows:"2",hint:"Other registration numbers, licenses - second line on printed bills","prepend-inner-icon":"mdi-certificate-outline"},null,8,["modelValue"])]),_:1}),l(F,{cols:"12",class:"py-0 pl-2 pr-2"},{default:u(()=>[l(S,{modelValue:d.value.useHeader,"onUpdate:modelValue":y[5]||(y[5]=j=>d.value.useHeader=j),label:"Use Header on Pharmacy Bill",hint:"When disabled, blank space will be left at the top of each page for your custom pharmacy header",class:"input-hover",color:"primary",density:"compact"},null,8,["modelValue"])]),_:1}),l(F,{cols:"12"},{default:u(()=>[l(E,{modelValue:d.value.pageSize,"onUpdate:modelValue":y[6]||(y[6]=j=>d.value.pageSize=j),label:"Page Size",items:f,variant:"outlined",density:"compact","prepend-inner-icon":"mdi-file-document"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(x),l(H,{class:"pa-3"},{default:u(()=>[l(O),l(w,{variant:"outlined",onClick:m,disabled:A.value},{default:u(()=>[...y[11]||(y[11]=[M(" Cancel ",-1)])]),_:1},8,["disabled"]),l(w,{color:"primary",onClick:h,loading:A.value,disabled:!c.value||A.value},{default:u(()=>[...y[12]||(y[12]=[M(" Create ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},kIe={__name:"EditPharmacy",props:{modelValue:{type:Boolean,default:!1},pharmacy:{type:Object,default:null}},emits:["update:modelValue","saved"],setup(e,{emit:t}){const{showSuccess:n,showError:a}=ra(),r=e,s=t,o=V(r.modelValue),i=V(null),c=V(!1),A=V(!1),d=V({pharmacyName:"",pharmacyNameLine1:"",addressAndContactInfo:"",gstNumberLine1:"",otherRegistrationInfo:"",useHeader:!0,pageSize:"A4"}),f=["A4","A5"];Ke(()=>r.modelValue,p=>{if(o.value=p,p&&r.pharmacy){const g=(r.pharmacy.header||"").split(`
`),w=g[0]||"",b=g[1]||"",T=(r.pharmacy.gstNumber||"").split(`
`),F=T[0]||"",k=T[1]||"";d.value={pharmacyName:r.pharmacy.pharmacyName||"",pharmacyNameLine1:w,addressAndContactInfo:b,gstNumberLine1:F,otherRegistrationInfo:k,useHeader:r.pharmacy.useHeader!==void 0?r.pharmacy.useHeader===1||r.pharmacy.useHeader===!0:!0,pageSize:r.pharmacy.pageSize||"A4"},i.value&&i.value.resetValidation()}}),Ke(()=>r.pharmacy,p=>{if(p&&o.value){const g=(p.header||"").split(`
`),w=g[0]||"",b=g[1]||"",T=(p.gstNumber||"").split(`
`),F=T[0]||"",k=T[1]||"";d.value={pharmacyName:p.pharmacyName||"",pharmacyNameLine1:w,addressAndContactInfo:b,gstNumberLine1:F,otherRegistrationInfo:k,useHeader:p.useHeader!==void 0?p.useHeader===1||p.useHeader===!0:!0,pageSize:p.pageSize||"A4"}}}),Ke(o,p=>{s("update:modelValue",p)});const m=()=>{o.value=!1},h=async()=>{if(!i.value||!r.pharmacy)return;const{valid:p}=await i.value.validate();if(p){A.value=!0;try{const y=d.value.pharmacyNameLine1.trim()+(d.value.addressAndContactInfo?.trim()?`
`+d.value.addressAndContactInfo.trim():""),g=d.value.gstNumberLine1.trim()+(d.value.otherRegistrationInfo?.trim()?`
`+d.value.otherRegistrationInfo.trim():""),w={pharmacyName:d.value.pharmacyName,header:y,gstNumber:g,useHeader:d.value.useHeader,pageSize:d.value.pageSize||"A4"},{data:b,error:x}=await pce(r.pharmacy.id,w);if(x)throw x;n("Pharmacy updated successfully"),s("saved"),m()}catch(y){console.error("Error updating pharmacy:",y),a(y.response?.data?.error||y.message||"Failed to update pharmacy")}finally{A.value=!1}}};return(p,y)=>{const g=I("v-icon"),w=I("v-btn"),b=I("v-card-title"),x=I("v-divider"),T=I("v-text-field"),F=I("v-col"),k=I("v-textarea"),S=I("v-switch"),E=I("v-select"),C=I("v-row"),D=I("v-form"),P=I("v-card-text"),O=I("v-spacer"),H=I("v-card-actions"),ie=I("v-card"),Ae=I("v-dialog");return U(),pe(Ae,{modelValue:o.value,"onUpdate:modelValue":y[8]||(y[8]=j=>o.value=j),"max-width":"600",persistent:""},{default:u(()=>[l(ie,{rounded:"lg",color:"surfaceContainer",flat:""},{default:u(()=>[l(b,{class:"d-flex align-center justify-space-between"},{default:u(()=>[y[10]||(y[10]=v("span",null,"Edit Pharmacy",-1)),l(w,{onClick:m,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(g,{size:"18"},{default:u(()=>[...y[9]||(y[9]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(x),l(P,{class:"py-1"},{default:u(()=>[l(D,{ref_key:"form",ref:i,modelValue:c.value,"onUpdate:modelValue":y[7]||(y[7]=j=>c.value=j)},{default:u(()=>[l(C,{dense:""},{default:u(()=>[l(F,{cols:"12"},{default:u(()=>[l(T,{modelValue:d.value.pharmacyName,"onUpdate:modelValue":y[0]||(y[0]=j=>d.value.pharmacyName=j),label:"Pharmacy Name (Display) *",variant:"outlined",density:"compact",rules:[j=>!!j||"Pharmacy name is required"],hint:"Name shown in the UI for selecting this pharmacy","prepend-inner-icon":"mdi-pill"},null,8,["modelValue","rules"])]),_:1}),l(F,{cols:"12"},{default:u(()=>[l(T,{modelValue:d.value.pharmacyNameLine1,"onUpdate:modelValue":y[1]||(y[1]=j=>d.value.pharmacyNameLine1=j),label:"Pharmacy Name (First Line on Bill) *",variant:"outlined",density:"compact",rules:[j=>!!j||"Pharmacy name for bill is required"],hint:"First line of pharmacy name on printed bills","prepend-inner-icon":"mdi-file-document-outline"},null,8,["modelValue","rules"])]),_:1}),l(F,{cols:"12"},{default:u(()=>[l(k,{modelValue:d.value.addressAndContactInfo,"onUpdate:modelValue":y[2]||(y[2]=j=>d.value.addressAndContactInfo=j),label:"Address and Contact Info (Second Line on Bill)",variant:"outlined",density:"compact","auto-grow":"",rows:"2",hint:"Address, phone, email - second line on printed bills","prepend-inner-icon":"mdi-map-marker-outline"},null,8,["modelValue"])]),_:1}),l(F,{cols:"12"},{default:u(()=>[l(T,{modelValue:d.value.gstNumberLine1,"onUpdate:modelValue":y[3]||(y[3]=j=>d.value.gstNumberLine1=j),label:"GST Number (First Line)",variant:"outlined",density:"compact",hint:"GST number - first line on printed bills","prepend-inner-icon":"mdi-identifier"},null,8,["modelValue"])]),_:1}),l(F,{cols:"12"},{default:u(()=>[l(k,{modelValue:d.value.otherRegistrationInfo,"onUpdate:modelValue":y[4]||(y[4]=j=>d.value.otherRegistrationInfo=j),label:"Other Registration Info (Second Line)",variant:"outlined",density:"compact","auto-grow":"",rows:"2",hint:"Other registration numbers, licenses - second line on printed bills","prepend-inner-icon":"mdi-certificate-outline"},null,8,["modelValue"])]),_:1}),l(F,{cols:"12",class:"py-0 pl-2 pr-2"},{default:u(()=>[l(S,{modelValue:d.value.useHeader,"onUpdate:modelValue":y[5]||(y[5]=j=>d.value.useHeader=j),label:"Use Header on Pharmacy Bill",hint:"When disabled, blank space will be left at the top of each page for your custom pharmacy header",class:"input-hover",color:"primary",density:"compact"},null,8,["modelValue"])]),_:1}),l(F,{cols:"12"},{default:u(()=>[l(E,{modelValue:d.value.pageSize,"onUpdate:modelValue":y[6]||(y[6]=j=>d.value.pageSize=j),label:"Page Size",items:f,variant:"outlined",density:"compact","prepend-inner-icon":"mdi-file-document"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(x),l(H,{class:"pa-3"},{default:u(()=>[l(O),l(w,{variant:"outlined",onClick:m,disabled:A.value},{default:u(()=>[...y[11]||(y[11]=[M(" Cancel ",-1)])]),_:1},8,["disabled"]),l(w,{color:"primary",onClick:h,loading:A.value,disabled:!c.value||A.value},{default:u(()=>[...y[12]||(y[12]=[M(" Save ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},TIe=async(e,t,n)=>{try{if(!e)throw new Error("Doctor ID is required");if(!t||t.length!==3||!/^[A-Z]{3}$/.test(t))throw new Error("Prefix must be exactly 3 uppercase letters (A-Z)");if(!n||n.length!==6||!/^\d{6}$/.test(n))throw new Error("Seed suffix must be exactly 6 digits");const r=new Date().toISOString().split("T")[0],s={identifier:`${t}${n}`,status:"SERIES",paymentReceiptDate:r,doctorId:e,isThreeC:!1,additionalDiscount:0};return console.log("Creating receipt series with seed:",s),{data:(await dt.post("/paymentreceipt/",s)).data.data,error:null}}catch(a){return console.error("Error creating receipt series:",a),{data:null,error:a}}},IIe=async(e,t,n)=>{try{if(!e)throw new Error("Doctor ID is required");if(!t||t.length!==3||!/^[A-Z]{3}$/.test(t))throw new Error("Prefix must be exactly 3 uppercase letters (A-Z)");if(!n||n.length!==6||!/^\d{6}$/.test(n))throw new Error("Seed suffix must be exactly 6 digits");const r=new Date().toISOString().split("T")[0],s={identifier:`${t}${n}`,status:"SERIES",billDate:r,doctorId:e,additionalDiscount:0};return console.log("Creating bill series with seed:",s),{data:(await dt.post("/billreceipt/series",s)).data.data,error:null}}catch(a){return console.error("Error creating bill series:",a),{data:null,error:a}}},FIe={class:"text-center"},PIe={class:"scroll-hover",style:{"overflow-y":"auto",height:"100%"}},DIe={key:0,class:"ma-2 mb-3"},UIe={key:1,class:"ma-2 mt-4"},RIe={key:2,class:"ma-2 mt-4"},NIe={class:"text-subtitle-2 ml-2"},VIe={class:"scroll-hover",style:{"overflow-y":"auto","max-height":"75vh"}},LIe={key:0,class:"mb-3"},MIe={key:1},OIe={class:"scroll-hover",style:{"overflow-y":"auto","max-height":"75vh"}},HIe={key:0,class:"text-caption text-medium-emphasis"},$Ie={key:1,class:"text-caption text-medium-emphasis"},QIe={class:"d-flex align-center justify-center fill-height"},GIe={class:"d-flex align-center justify-center fill-height"},zIe={class:"d-flex align-center justify-space-between"},KIe={class:"flex-grow-1"},WIe={class:"d-flex align-center"},jIe=["href"],qIe={key:1,class:"text-body-2 text-disabled"},YIe={class:"d-flex align-center"},XIe=["href"],JIe={key:1,class:"text-body-2 text-disabled"},ZIe={class:"d-flex align-center"},eFe={class:"text-body-2"},tFe={class:"d-flex flex-wrap mt-3"},nFe={class:"text-subtitle-2 ml-2"},aFe={class:"scroll-hover",style:{"overflow-y":"auto","max-height":"75vh"}},rFe={class:"text-subtitle-2 ml-2"},sFe={class:"scroll-hover",style:{"overflow-y":"auto","max-height":"75vh"}},oFe={class:"text-subtitle-2 ml-2"},iFe={class:"scroll-hover",style:{"overflow-y":"auto","max-height":"75vh"}},lFe={class:"scroll-hover pa-3",style:{"overflow-y":"auto","max-height":"75vh"}},uFe={class:"d-flex align-center justify-space-between"},cFe={class:"flex-grow-1 text-left"},dFe={class:"d-flex align-center"},AFe={class:"d-flex align-start text-left"},fFe={class:"flex-grow-1 text-left"},mFe={class:"text-body-2 text-left"},vFe={key:0,class:"text-caption text-medium-emphasis mt-0 text-left"},hFe={class:"d-flex align-center text-left"},pFe={class:"text-body-2 text-left"},gFe={class:"d-flex align-center text-left"},yFe={class:"text-body-2 text-left"},_Fe={class:"d-flex align-center text-left"},wFe={class:"text-body-2 text-left"},bFe={class:"d-flex flex-wrap mt-2"},xFe={class:"scroll-hover pa-3",style:{"overflow-y":"auto","max-height":"75vh"}},CFe={class:"d-flex align-center"},SFe={class:"text-white"},EFe={class:"text-left"},BFe={class:"text-subtitle-2 font-weight-bold text-left"},kFe={class:"text-caption text-grey text-left"},TFe={class:"text-caption text-left"},IFe={key:0,class:"text-grey"},FFe={class:"user-actions-container"},PFe={class:"dialog-title"},DFe={class:"text-center pa-4"},UFe={class:"mb-4"},RFe={class:"mb-4"},NFe={class:"mb-4"},VFe={class:"text-body-1 font-weight-bold mb-2"},LFe={class:"text-body-2"},MFe={class:"text-caption"},OFe={__name:"admin-page",setup(e){const t=Rn(),{isAdmin:n,hasPermission:a}=Ah(),r=V(!0),s=V(null),o=ae(()=>n.value),i=ae(()=>{const Ie=a("admin.vitals").value,fe=a("admin.setup.prescription").value||a("admin.setup.receipt").value||a("admin.setup.bill").value||a("admin.setup.doctor").value||a("admin.setup.clinic").value||a("admin.setup.remote").value||a("admin.setup.pharmacy").value;return Ie||fe}),c=ae(()=>n.value),A=()=>a("admin.vitals").value?"vitalsconfig":n.value?"rxprintdetails":"vitalsconfig",d=V("vitalsconfig"),f=V(!1),m=V(""),h=V(!1),p=V(""),y=V(""),g=V(""),w=V(29200),b=V(!1),x=V(""),T=V(""),F=V(""),k=V(null),S=V(!1),E=V(),C=V(),D=ae(()=>t.state.doctorModule.doctorId),P=V({pulse:!0,bloodPressure:!0,temperature:!0,respiratoryRate:!0,height:!1,serumBilirubin:!1,bloodGlucoseFF:!1,bloodGlucosePP:!1,bloodGlucoseRandom:!1,serumCreatinine:!1}),O=V(!1),H=V({prefix:"",suffix:""}),ie=V(!1),Ae=V(!1),j=V({prefix:"",suffix:""}),J=V(!1),ue=V(!1),ne=V({pharmacyName:"",addressAndContactInfo:"",gstNumber:"",otherRegistrationInfo:"",useHeader:!0,pageSize:"A4"});V(!1),V(!1);const Y=V([]),te=V(!1),L=V(!1),N=V(!1),q=V(null),Q=V(!1),ee=V(null),z=V(null),X=V({prefix:"",seed:null}),le=V(!1),re=V(!1),de=V([]),G=V(!1),Z=V([]);Ke(Z,Ie=>{Array.isArray(Ie)||(Z.value=[])},{deep:!0});const ce=V(!1),Se=V(!1),Pe=V(!1),ye=V(null),Ce=V(null),_e=V({name:"",email:"",passcode:"",doctorId:null,role:null,permissions:["home"],selectedFeatures:["home"]}),De=V(!1),xe=V(!1),Te=V(!1),Me=V(null),et=V({id:null,name:"",email:"",doctorId:null,role:null,permissions:[],selectedFeatures:[]}),lt=V(!1),Re=V(!1),Le=V(!1),nt=V(null),Tt=V(""),Pt=V(!1),Kt=V(!1),$t=V(!1),bt=V(!1),st=V(null),Je=V(""),Nt=V(!1),rn=V(null),Lt=V(!1),_t=V(null),ut=V(""),Ft=V(!1),zt=V([]);Ke(zt,Ie=>{Array.isArray(Ie)||(zt.value=[])},{deep:!0});const dn=[Ie=>!!Ie||"Prefix is required",Ie=>Ie&&Ie.length===3||"Prefix must be exactly 3 characters",Ie=>Ie&&/^[A-Z]{3}$/.test(Ie)||"Prefix must be 3 uppercase letters (A-Z)"],Hn=[Ie=>!!Ie||"First receipt number is required",Ie=>Ie&&Ie.length===6||"First receipt number must be exactly 6 digits",Ie=>Ie&&/^\d{6}$/.test(Ie)||"First receipt number must be 6 digits (000001-999999)",Ie=>Ie&&parseInt(Ie)>=1&&parseInt(Ie)<=999999||"First receipt number must be between 000001 and 999999"],Ze=[Ie=>!!Ie||"Prefix is required",Ie=>Ie&&Ie.length===3||"Prefix must be exactly 3 characters",Ie=>Ie&&/^[A-Z]{3}$/.test(Ie)||"Prefix must be 3 uppercase letters (A-Z)"],Ge=[Ie=>!!Ie||"First bill number is required",Ie=>Ie&&Ie.length===6||"First bill number must be exactly 6 digits",Ie=>Ie&&/^\d{6}$/.test(Ie)||"First bill number must be 6 digits (000001-999999)",Ie=>Ie&&parseInt(Ie)>=1&&parseInt(Ie)<=999999||"First bill number must be between 000001 and 999999"],xt=ae(()=>t.getters["doctorModule/currentDoctor"]?.doctorName||null),gt=ae(()=>t.getters["doctorModule/isGSTRegistered"]);ae(()=>g.value?`https://${g.value}:${w.value}`:"");const Bt=(Ie,fe="An error occurred")=>{console.error(fe,Ie),h.value=!0,p.value=`${fe}: ${Ie?.response?.data?.message||Ie.message||"Unknown error"}`;const Wt=Ie?.response?.status===401||Ie?.response?.status===403;(Ie?.response?.status>=500||!Ie?.response)&&!Wt&&(s.value=`${fe}. Please try again or contact support.`)},wt=Ie=>{f.value=!0,m.value=Ie},gn=async Ie=>{try{await navigator.clipboard.writeText(Ie);let fe="Text copied to clipboard";Ie.includes("http")?fe="URL copied to clipboard":Ie.includes(":")?fe="Server address copied to clipboard":Ie.match(/^\d+\.\d+\.\d+\.\d+$/)&&(fe="IP address copied to clipboard"),wt(fe)}catch(fe){console.error("Failed to copy to clipboard:",fe),h.value=!0,p.value="Failed to copy to clipboard"}},Wn=()=>{try{if(!T.value||typeof T.value!="string")return console.warn("Invalid ngrok QR path value:",T.value),"";let fe=`file:///${T.value.replace(/\\/g,"/")}`;return k.value&&(fe+=`?t=${k.value}`),fe}catch(Ie){return console.error("Error processing ngrok QR URL:",Ie),""}},zn=V(!1),oa=V(!1),Ra=[{title:"A4",value:"A4"},{title:"Letter",value:"Letter"},{title:"Legal",value:"Legal"}],Be=V(!1),Qe=Ie=>{try{if(!Ie||typeof Ie!="object")throw new Error("Invalid doctor data provided");E.value=Ie,Be.value=!0}catch(fe){Bt(fe,"Failed to open doctor edit dialog")}},ke=async()=>{try{Be.value=!1,window.dispatchEvent(new Event("doctor-list-updated")),await Vn()}catch(Ie){Bt(Ie,"Failed to refresh doctor details")}},Ve=V(!1),ze=async()=>{try{Ve.value=!1,window.dispatchEvent(new Event("doctor-list-updated")),await Vn()}catch(Ie){Bt(Ie,"Failed to refresh doctor details after creation")}},je=V(!1),oe=Ie=>{try{if(!Ie||typeof Ie!="object")throw new Error("Invalid clinic data provided");C.value=Ie,je.value=!0}catch(fe){Bt(fe,"Failed to open clinic edit dialog")}},se=async()=>{try{je.value=!1,window.dispatchEvent(new Event("clinic-list-updated")),await vl()}catch(Ie){Bt(Ie,"Failed to refresh clinic details")}},be=V(!1),Fe=async()=>{try{be.value=!1,window.dispatchEvent(new Event("clinic-list-updated")),await vl()}catch(Ie){Bt(Ie,"Failed to refresh clinic details after creation")}};un(()=>{try{console.log("Admin page mounted successfully")}catch(Ie){Bt(Ie,"Failed to mount admin page")}}),tu(async()=>{try{r.value=!0,console.log("AdminPage component is about to be mounted.");const Ie=A();Ie&&(d.value=Ie);const fe=[en(),Vn(),vl(),yn(),wn()];(await Promise.allSettled(fe)).forEach((jt,It)=>{jt.status==="rejected"&&console.error(`Promise ${It} failed:`,jt.reason)}),vt()}catch(Ie){Bt(Ie,"Failed to initialize admin page")}finally{r.value=!1}}),Ke(D,async(Ie,fe)=>{try{Ie&&Ie!==fe&&(console.log(`Doctor ID changed from ${fe} to ${Ie}, refetching configurations...`),await en(Ie),vt())}catch(Wt){Bt(Wt,"Failed to fetch configurations for new doctor")}},{immediate:!1}),Ke(d,async Ie=>{Ie==="usermanagement"&&(await Promise.all([Li(),Da()]),zt.value.length||await Mi())},{immediate:!1}),Ke(d,async Ie=>{Ie==="mobiledetails"&&!y.value&&!g.value&&await at(),Ie==="pharmacyconfig"&&(ne.value.pharmacyName||await yn())},{immediate:!1}),Ke(gt,Ie=>{if(!Ie&&d.value==="billconfig"){const fe=A();fe&&(d.value=fe),wt("GST Bill Series Configuration is only available for GST-registered doctors")}},{immediate:!0}),Ke([n,()=>a("admin.vitals").value],()=>{if(!(()=>{switch(d.value){case"vitalsconfig":return a("admin.vitals").value;case"rxprintdetails":case"mobiledetails":case"doctordetails":case"clinicdetails":case"receiptconfig":case"billconfig":case"pharmacyconfig":case"usermanagement":return n.value;default:return!0}})()){const fe=A();fe&&(d.value=fe)}},{immediate:!0}),da(()=>{try{r.value=!1,s.value=null,rt.value={doctorName:"",doctorDegrees:"",doctorRegistrationNumber:"",clinicAddress:"-",email:"",doctorId:null,useHeader:!0,pageSize:"A4",headerImagePath:""},At.value="",qe.value=null,ne.value={pharmacyName:"",addressAndContactInfo:"",gstNumber:"",otherRegistrationInfo:"",useHeader:!0,pageSize:"A4"},Ja.value=[],nr.value=[],console.log("Admin page cleanup completed")}catch(Ie){console.error("Error during admin page cleanup:",Ie)}});const at=async()=>{try{b.value=!0;const Ie=await yfe();if(!Ie.success||!Ie.data)throw new Error(Ie.error||"Invalid response received from server");const fe=Ie.data;y.value=fe.path||"",g.value=fe.ipAddress||"",w.value=fe.port||29200,x.value=fe.ngrokTunnelUrl||"",T.value=fe.ngrokQrPath||"",F.value=fe.ngrokEndpointUrl||"",console.log("QR Code data fetched - IP:",g.value,"Port:",w.value,"Path:",y.value),console.log("Ngrok data fetched - Tunnel:",x.value,"QR Path:",T.value,"Endpoint:",F.value),F.value?console.log(" Ngrok endpoint URL is available:",F.value):console.log(" Ngrok endpoint URL is NOT available"),T.value?console.log(" Ngrok QR path is available:",T.value):console.log(" Ngrok QR path is NOT available")}catch(Ie){if(Ie?.response?.status===401||Ie?.response?.status===403){console.log("Authentication required for mobile connection details"),y.value="",g.value="",w.value=29200,x.value="",T.value="",F.value="";return}Bt(Ie,"Failed to fetch mobile connection details"),y.value="",g.value="",w.value=29200,x.value="",T.value="",F.value=""}finally{b.value=!1}},rt=V({doctorName:"",doctorDegrees:"",doctorRegistrationNumber:"",clinicAddress:"-",email:"",doctorId:null,useHeader:!0,useFooter:!0,pageSize:"A4",headerSize:1.8,headerImagePath:""}),qe=V(null),At=V(""),Ut=V(!1),ft=V(!1);Ke(De,Ie=>{Ie||(lt.value=!1)}),Ke(qe,async(Ie,fe)=>{if(Ie&&Ie instanceof File&&Ie!==fe&&!Ut.value){const Wt=new FileReader;Wt.onload=jt=>{At.value=jt.target.result},Wt.readAsDataURL(Ie),console.log("File selected via watcher, auto-uploading:",Ie.name);try{await fm()}catch(jt){console.error("Auto-upload failed:",jt)}}else!Ie&&fe&&(At.value="")});const en=async(Ie=null)=>{try{const fe=Ie||D.value;if(!fe)throw new Error("Doctor ID is required to fetch print configurations");console.log(`Fetching print configurations for doctor ID: ${fe}`);const Wt=await gh(fe);if(Wt.error)throw Wt.error;if(!Wt.data){console.log("No existing configuration found, initializing with defaults for new user"),rt.value={doctorName:"",doctorDegrees:"",doctorRegistrationNumber:"",clinicAddress:"-",email:"",doctorId:fe,useHeader:!0,useFooter:!0,pageSize:"A4",headerSize:1.8,headerImagePath:""},At.value="",wt("Please setup your print preferences.");return}const jt=Wt.data;rt.value={doctorName:jt.doctorName||"",doctorDegrees:jt.doctorDegrees||"",doctorRegistrationNumber:jt.doctorRegistrationNumber||"",clinicAddress:jt.clinicAddress||"",email:jt.email||"",doctorId:fe,useHeader:jt.useHeader!==void 0?jt.useHeader:!0,useFooter:jt.useFooter!==void 0?jt.useFooter:!0,pageSize:jt.pageSize||"A4",headerSize:jt.headerSize!==void 0&&jt.headerSize!==null?jt.headerSize:1.8,headerImagePath:jt.headerImagePath||""},jt.headerImagePath?Sd(fe,jt.headerImagePath).then(It=>{At.value=It}).catch(It=>{console.error("Failed to get header image URL:",It),At.value=""}):At.value="",console.log("Configuration data fetched:",rt.value)}catch(fe){if(fe?.response?.status===404){console.log("Print configuration not found - this is normal for new users");const jt=Ie||D.value;rt.value={doctorName:"",doctorDegrees:"",doctorRegistrationNumber:"",clinicAddress:"-",email:"",doctorId:jt,useHeader:!0,useFooter:!0,pageSize:"A4",headerImagePath:""},At.value="",wt("Please setup your print preferences.");return}Bt(fe,"Failed to fetch print configurations");const Wt=Ie||D.value;rt.value={doctorName:"",doctorDegrees:"",doctorRegistrationNumber:"",clinicAddress:"-",email:"",doctorId:Wt,useHeader:!0,useFooter:!0,pageSize:"A4",headerImagePath:""},At.value=""}},Jt=async()=>{if(!oa.value)try{if(oa.value=!0,!zn.value)throw new Error("Please fix validation errors before saving");const Ie=t.state.doctorModule.doctorId;if(!Ie)throw new Error("Doctor ID is required to save configurations");if(!rt.value.doctorName?.trim())throw new Error("Doctor name is required");const fe={doctorName:rt.value.doctorName,doctorDegrees:rt.value.doctorDegrees,doctorRegistrationNumber:rt.value.doctorRegistrationNumber,clinicAddress:rt.value.clinicAddress,email:rt.value.email,useHeader:rt.value.useHeader,useFooter:rt.value.useFooter,pageSize:rt.value.pageSize,headerSize:rt.value.headerSize!==void 0&&rt.value.headerSize!==null?rt.value.headerSize:1.8,headerImagePath:rt.value.headerImagePath||"",doctorId:Ie};console.log("Saving print configs with data:",fe),await Zu(dt.post(`/print/${Ie}`,fe)),wt("Print configurations saved successfully")}catch(Ie){Bt(Ie,"Failed to save print configurations")}finally{oa.value=!1}},wn=async()=>{try{te.value=!0;const{data:Ie,error:fe}=await qk();if(fe)throw fe;Y.value=Array.isArray(Ie)?Ie:[]}catch(Ie){Bt(Ie,"Failed to fetch pharmacies"),Y.value=[]}finally{te.value=!1}},yn=async()=>{try{console.log("Fetching pharmacy configurations...");const Ie=await hM();if(Ie.error)throw Ie.error;if(!Ie.data){console.log("No existing pharmacy configuration found, initializing with defaults"),ne.value={pharmacyName:"Add pharmacy details here",addressAndContactInfo:"",gstNumber:"Add GST number here",otherRegistrationInfo:"",useHeader:!0,pageSize:"A4"};return}const fe=Ie.data,jt=(fe.header||"Add pharmacy details here").split(`
`),It=jt[0]||"Add pharmacy details here",fn=jt[1]||"",$n=(fe.gstNumber||"Add GST number here").split(`
`),_n=$n[0]||"Add GST number here",Yn=$n[1]||"";ne.value={pharmacyName:It,addressAndContactInfo:fn,gstNumber:_n,otherRegistrationInfo:Yn,useHeader:fe.useHeader!==void 0?fe.useHeader===1||fe.useHeader===!0:!0,pageSize:fe.pageSize||"A4"},console.log("Pharmacy configuration data fetched:",ne.value)}catch(Ie){if(Ie?.response?.status===404){console.log("Pharmacy configuration not found - this is normal for new installations"),ne.value={pharmacyName:"Add pharmacy details here",addressAndContactInfo:"",gstNumber:"Add GST number here",otherRegistrationInfo:"",useHeader:!0,pageSize:"A4"};return}Bt(Ie,"Failed to fetch pharmacy configurations"),ne.value={pharmacyName:"Add pharmacy details here",addressAndContactInfo:"",gstNumber:"Add GST number here",otherRegistrationInfo:"",useHeader:!0,pageSize:"A4"}}},Pa=()=>{L.value=!0},Or=async Ie=>{await wn(),await t.dispatch("pharmacyModule/fetchPharmacies"),Ie&&Ie.id&&(await xn(),setTimeout(()=>{const fe=Y.value.find(Wt=>Wt.id===Ie.id);fe?(X.value={prefix:"",seed:null},z.value=null,ee.value=fe,Q.value=!0):(X.value={prefix:"",seed:null},z.value=null,ee.value=Ie,Q.value=!0)},100))},Hr=Ie=>{q.value=Ie,N.value=!0},Bs=async Ie=>{ee.value=Ie,X.value={prefix:"",seed:null},z.value=null;try{const{data:fe,error:Wt}=await gce(Ie.id);Wt?console.warn("Could not fetch latest series:",Wt):fe&&fe.identifier&&(z.value={identifier:fe.identifier,prefix:fe.prefix,seed:fe.seed}),Q.value=!0}catch(fe){console.warn("Error fetching latest series:",fe),Q.value=!0}},Ko=Ie=>{if(!Ie||Ie.length<9)return"";const fe=Ie.substring(0,3),Wt=Ie.substring(3),It=(parseInt(Wt)||0)+1;return`${fe}${It.toString().padStart(6,"0")}`},Er=Ie=>Ie&&Ie.split(`
`)[0]||"",ks=Ie=>{if(!Ie)return"";const fe=Ie.split(`
`);return fe.length>1?fe[1]:""},$r=Ie=>Ie&&Ie.split(`
`)[0]||"",Vi=Ie=>{if(!Ie)return"";const fe=Ie.split(`
`);return fe.length>1?fe[1]:""},Vt=async()=>{if(ee.value)try{re.value=!0;const{data:Ie,error:fe}=await _ce(ee.value.id,X.value.prefix,"",X.value.seed);if(fe)throw fe;wt("Pharmacy series created successfully"),Q.value=!1,ee.value=null,z.value=null,X.value={prefix:"",seed:null}}catch(Ie){Bt(Ie,"Failed to create pharmacy series")}finally{re.value=!1}},Ja=V([]),Vn=async()=>{try{const Ie=await ZS();if(!Ie?.data){console.warn("No doctor data found in response"),Ja.value=[];return}const fe=Array.isArray(Ie.data)?Ie.data:[Ie.data];Ja.value=fe.filter(Wt=>Wt&&typeof Wt=="object"&&Wt.id),console.log("Doctor details fetched:",Ja.value)}catch(Ie){Bt(Ie,"Failed to fetch doctor details"),Ja.value=[]}},nr=V([]),vl=async()=>{try{const Ie=await AM();if(!Ie?.data){console.warn("No clinic data found in response"),nr.value=[];return}const fe=Array.isArray(Ie.data)?Ie.data:[Ie.data];nr.value=fe.filter(Wt=>Wt&&typeof Wt=="object"&&Wt.id),console.log("Clinic details fetched:",nr.value)}catch(Ie){Bt(Ie,"Failed to fetch clinic details"),nr.value=[]}},vt=()=>{try{const Ie=D.value;if(!Ie){console.warn("No doctor ID available to load vitals preferences");return}const fe=CT(Ie);P.value={pulse:fe.pulse,bloodPressure:fe.bloodPressure,temperature:fe.temperature,respiratoryRate:fe.respiratoryRate,height:fe.height,serumBilirubin:fe.serumBilirubin,bloodGlucoseFF:fe.bloodGlucoseFF,bloodGlucosePP:fe.bloodGlucosePP,bloodGlucoseRandom:fe.bloodGlucoseRandom,serumCreatinine:fe.serumCreatinine},console.log("Vitals preferences loaded:",P.value)}catch(Ie){Bt(Ie,"Failed to load vitals preferences")}},hn=async()=>{if(!O.value)try{O.value=!0;const Ie=D.value;if(!Ie)throw new Error("Doctor ID is required to save vitals preferences");const fe={...P.value,weight:!0};if(UEe(Ie,fe))wt("Vitals preferences saved successfully");else throw new Error("Failed to save preferences")}catch(Ie){Bt(Ie,"Failed to save vitals preferences")}finally{O.value=!1}},kn=async()=>{if(!Ae.value)try{if(Ae.value=!0,!ie.value)throw new Error("Please fix validation errors before creating series");const Ie=D.value;if(!Ie)throw new Error("Doctor ID is required to create receipt series");if(!H.value.prefix?.trim())throw new Error("Prefix is required");if(!H.value.suffix?.trim())throw new Error("First receipt number is required");const jt=(parseInt(H.value.suffix)-1).toString().padStart(6,"0");console.log("Creating receipt series with:",{doctorId:Ie,prefix:H.value.prefix,suffix:jt,firstReceiptWillBe:H.value.suffix});const It=await TIe(Ie,H.value.prefix,jt);if(It.error)throw It.error;wt(`Receipt series created successfully. First receipt will be: ${H.value.prefix}${H.value.suffix}`),H.value={prefix:"",suffix:""},ie.value=!1}catch(Ie){Bt(Ie,"Failed to create receipt series")}finally{Ae.value=!1}},Na=async()=>{if(!ue.value)try{if(ue.value=!0,!J.value)throw new Error("Please fix validation errors before creating bill series");const Ie=D.value;if(!Ie)throw new Error("Doctor ID is required to create bill series");if(!j.value.prefix?.trim())throw new Error("Prefix is required");if(!j.value.suffix?.trim())throw new Error("First bill number is required");const jt=(parseInt(j.value.suffix)-1).toString().padStart(6,"0");console.log("Creating bill series with:",{doctorId:Ie,prefix:j.value.prefix,suffix:jt,firstBillWillBe:j.value.suffix});const It=await IIe(Ie,j.value.prefix,jt);if(It.error)throw It.error;wt(`Bill series created successfully. First bill will be: ${j.value.prefix}${j.value.suffix}`),j.value={prefix:"",suffix:""},J.value=!1}catch(Ie){Bt(Ie,"Failed to create bill series")}finally{ue.value=!1}},Li=async()=>{G.value=!0;try{const Ie=await dt.get("/admin/users");de.value=Ie.data.users||[]}catch(Ie){console.error("Failed to load users:",Ie),de.value=[]}finally{G.value=!1}},Da=async()=>{try{const fe=(await dt.get("/admin/users/features")).data.features||[];console.log("Loaded features:",fe),fe.forEach(Wt=>{console.log(`Feature ${Wt.id} (${Wt.name}):`,{hasActions:!!Wt.actions,actionsType:Array.isArray(Wt.actions)?"array":typeof Wt.actions,actionsLength:Array.isArray(Wt.actions)?Wt.actions.length:0,actions:Wt.actions})}),Z.value=fe}catch(Ie){console.error("Failed to load features:",Ie),Z.value=[]}},Mi=async()=>{try{const Ie=await ZS();zt.value=Ie||[]}catch(Ie){console.error("Failed to load doctors:",Ie),zt.value=[]}},hl=Ie=>Ie?Ie.split(" ").map(fe=>fe[0]).join("").toUpperCase().slice(0,2):"?",Wo=Ie=>Ie?Ie.charAt(0).toUpperCase()+Ie.slice(1):"",lm=Ie=>{if(!Ie)return"";const fe=Z.value.find(an=>an&&an.id===Ie);if(fe)return fe.name||Ie;let Wt=null,jt=Ie;for(const an of Z.value)if(an&&an.id&&Ie.startsWith(`${an.id}.`)){Wt=an,jt=Ie.substring(an.id.length+1);break}if(!Wt){const an=Ie.split(".");if(an.length>=2){const $n=an[0];Wt=Z.value.find(_n=>_n&&_n.id===$n),jt=an.slice(1).join(".")}}const It=Wt?Wt.name||Wt.id:Ie.split(".")[0];let fn=jt;if(Wt&&Wt.actions){const an=Wt.actions.find($n=>$n&&$n.id===Ie);if(an)fn=an.action?an.action.charAt(0).toUpperCase()+an.action.slice(1):jt;else{const $n=jt.split(".");fn=$n[$n.length-1].charAt(0).toUpperCase()+$n[$n.length-1].slice(1)}}else{const an=jt.split(".");fn=an[an.length-1].charAt(0).toUpperCase()+an[an.length-1].slice(1)}return`${It}: ${fn}`},fA=async()=>{Z.value.length||await Da(),zt.value.length||await Mi(),_e.value={name:"",email:"",passcode:"",doctorId:null,permissions:["home"],selectedFeatures:["home"]},Ce.value=null,ce.value=!0},Rh=async()=>{if(console.log("[createUser] ========== FUNCTION CALLED =========="),console.log("[createUser] createUserLoading:",Pe.value),console.log("[createUser] createUserValid:",Se.value),console.log("[createUser] Form ref exists:",!!ye.value),Pe.value){console.log("[createUser] Already loading, returning early");return}if(ye.value){const{valid:Ie}=await ye.value.validate();console.log("[createUser] Form validation result:",Ie),Ie||console.warn("[createUser] Form is not valid, but proceeding anyway for debugging")}console.log("[createUser] Setting loading to true"),Pe.value=!0;try{console.log("[createUser] Starting user creation process"),console.log("[createUser] newUser.value:",_e.value);const Ie=mA(_e.value.permissions||[],_e.value.selectedFeatures||[],Z.value);if(console.log("[createUser] Creating user with permissions:",{selectedFeatures:_e.value.selectedFeatures,permissions:Ie,permissionsCount:Ie.length}),console.log("[createUser] About to make API call to /admin/users"),console.log("[createUser] Request payload:",{name:_e.value.name,email:_e.value.email,passcode:_e.value.passcode,doctorId:_e.value.doctorId,role:_e.value.role,permissions:Ie}),console.log("[createUser] apiClient:",dt),console.log("[createUser] apiClient baseURL:",dt.defaults?.baseURL),console.log("[createUser] apiClient defaults:",dt.defaults),!dt.defaults?.baseURL)throw console.error("[createUser] ERROR: API client baseURL is not set!"),new Error("API client is not initialized. Please refresh the page.");console.log("[createUser] Making POST request to:",`${dt.defaults.baseURL}/admin/users`);const fe=await dt.post("/admin/users",{name:_e.value.name,email:_e.value.email,passcode:_e.value.passcode,doctorId:_e.value.doctorId,role:_e.value.role,permissions:Ie});console.log("[createUser] API call successful, response:",fe.data),fe.data.success&&(wt(`User "${_e.value.name}" created successfully`),ce.value=!1,await Li())}catch(Ie){console.error("[createUser] Error occurred:",Ie),console.error("[createUser] Error details:",{message:Ie.message,response:Ie.response?.data,status:Ie.response?.status,config:Ie.config});const fe=Ie.response?.data?.code,Wt=Ie.response?.data?.error||Ie.message;fe==="PASSCODE_NOT_UNIQUE"||Wt?.toLowerCase().includes("passcode")?Ce.value="This passcode is already in use by another user. Please use a different unique passcode.":(Ce.value=null,Bt(Ie,"Failed to create user"))}finally{console.log("[createUser] Finally block - setting loading to false"),Pe.value=!1}},um=async Ie=>{try{if(Z.value.length||await Da(),zt.value.length||await Mi(),!Z.value||Z.value.length===0){console.error("Features not loaded"),alert("Failed to load features. Please try again.");return}if(!Ie||!Ie.id){console.error("Invalid user data:",Ie),alert("Invalid user data");return}const fe=[],Wt=Ie.permissions||[];for(const jt of Z.value){if(!jt||!jt.id)continue;if((!jt.actions||jt.actions.length===0)&&Wt.includes(jt.id)){fe.push(jt.id);continue}Wt.some(fn=>!fn||typeof fn!="string"?!1:fn===jt.id||fn.startsWith(`${jt.id}.`))&&fe.push(jt.id)}Wt.includes("home")||Wt.push("home"),fe.includes("home")||fe.push("home"),et.value={id:Ie.id,name:Ie.name||"",email:Ie.email||"",doctorId:Ie.doctorId||null,role:Ie.role||null,isAdmin:Ie.isAdmin===!0,permissions:Array.isArray(Wt)?[...Wt]:["home"],selectedFeatures:Array.isArray(fe)?[...fe]:["home"]},(!et.value.permissions||!Array.isArray(et.value.permissions))&&(et.value.permissions=["home"]),(!et.value.selectedFeatures||!Array.isArray(et.value.selectedFeatures))&&(et.value.selectedFeatures=["home"]),et.value.permissions.includes("home")||et.value.permissions.push("home"),et.value.selectedFeatures.includes("home")||et.value.selectedFeatures.push("home"),De.value=!0}catch(fe){console.error("Error opening edit user dialog:",fe),alert("Error opening user editor. Please try again.")}},cm=async()=>{if(!Te.value){Te.value=!0;try{const Ie=et.value.isAdmin===!0;if(await dt.put(`/admin/users/${et.value.id}`,{name:et.value.name,email:et.value.email,role:et.value.role,isActive:!0,isAdmin:Ie}),Ie)wt("Admin user updated successfully");else{const fe=mA(et.value.permissions||[],et.value.selectedFeatures||[],Z.value);et.value.permissions=fe,console.log("Saving permissions:",{selectedFeatures:et.value.selectedFeatures,permissions:fe,permissionsCount:fe.length}),await dt.put(`/admin/users/${et.value.id}/permissions`,{permissions:fe}),wt("User updated successfully")}De.value=!1,await Li()}catch(Ie){Bt(Ie,"Failed to update user")}finally{Te.value=!1}}},mA=(Ie,fe,Wt)=>{if(!Array.isArray(Ie)||!Array.isArray(fe)||!Array.isArray(Wt))return Ie||[];const jt=new Set;fe.forEach(an=>{const $n=Wt.find(_n=>_n&&_n.id===an);$n&&($n.actions&&Array.isArray($n.actions)&&$n.actions.forEach(_n=>{_n&&_n.id&&jt.add(_n.id)}),(!$n.actions||$n.actions.length===0)&&jt.add(an))});const It=new Set;Ie.forEach(an=>{an&&typeof an=="string"&&fe.some(_n=>an.startsWith(`${_n}.`)||an===_n)&&It.add(an)}),fe.forEach(an=>{const $n=Wt.find(_n=>_n&&_n.id===an);$n&&((!$n.actions||$n.actions.length===0)&&It.add(an),Ie.includes(an)&&It.add(an))});const fn=Array.from(It);return console.log("Cleaned permissions:",{original:Ie.length,cleaned:fn.length,added:It.size-Ie.length,selectedFeatures:fe,validPermissionIds:Array.from(jt)}),fn},uu=Ie=>{nt.value=Ie,Tt.value="",Re.value=!0},Oi=async Ie=>{st.value=Ie,Je.value="",rn.value=null,Nt.value=!1,$t.value=!0,await dm(Ie)},dm=async Ie=>{if(!bt.value){bt.value=!0,rn.value=null;try{const fe=await dt.get(`/admin/users/${Ie.id}/passcode`);fe.data.success&&fe.data.passcode?Je.value=fe.data.passcode:(Je.value="",rn.value=null)}catch(fe){fe.response?.status===404||fe.response?.status===400?(Je.value="",rn.value=null):(rn.value=fe.response?.data?.error||"Failed to retrieve passcode",Je.value="")}finally{bt.value=!1}}},Am=async()=>{if(Je.value)try{await navigator.clipboard.writeText(Je.value),wt("Passcode copied to clipboard")}catch(Ie){console.error("Failed to copy passcode to clipboard:",Ie),h.value=!0,p.value="Failed to copy passcode to clipboard"}},vA=async()=>{if(!Le.value){Le.value=!0;try{(await dt.put(`/admin/users/${nt.value.id}/passcode`,{passcode:Tt.value})).data.success&&(wt(`Passcode reset for "${nt.value.name}"`),Re.value=!1,Tt.value="",Ju(nt.value)&&setTimeout(()=>{window.location.reload()},1e3))}catch(Ie){Bt(Ie,"Failed to reset passcode")}finally{Le.value=!1}}},cu=dh();W_(dt);const Nh=ae(()=>cu.userId.value),Ju=Ie=>!Ie||!Ie.id?!1:Ie.id===Nh.value,Vh=Ie=>{_t.value=Ie,ut.value="",Lt.value=!0},jo=async()=>{if(!(Ft.value||!_t.value)){if(Ju(_t.value)){Bt(null,"Cannot delete your own account"),Lt.value=!1;return}if(ut.value!=="DELETE"){Bt(null,"Please type DELETE to confirm");return}Ft.value=!0;try{(await dt.delete(`/admin/users/${_t.value.id}`)).data.success&&(wt(`User "${_t.value.name}" deleted successfully`),Lt.value=!1,ut.value="",_t.value=null,await Li())}catch(Ie){Ie.response?.status===400&&Ie.response?.data?.error?.includes("own account")?Bt(Ie,"Cannot delete your own account"):Bt(Ie,"Failed to delete user")}finally{Ft.value=!1}}},Lh=()=>{console.warn("Ngrok QR code image failed to load"),h.value=!0,p.value="Remote access QR code could not be loaded. Please refresh the page."},Mh=async()=>{if(!S.value)try{S.value=!0,console.log(" Clearing existing ngrok data..."),x.value="",T.value="",F.value="",k.value=null,console.log(" Regenerating ngrok tunnel...");const Ie=await _fe();if(!Ie.success)throw new Error(Ie.error||"Failed to regenerate ngrok tunnel");const fe=Ie.data;x.value=fe.ngrokTunnelUrl||"",T.value=fe.ngrokQrPath||"",F.value=fe.ngrokEndpointUrl||"",k.value=Date.now(),console.log(" Ngrok tunnel regenerated successfully"),console.log("New tunnel URL:",x.value),console.log("New QR path:",T.value),console.log("New endpoint URL:",F.value),wt("Remote access regenerated successfully. New QR code and URL are now available.")}catch(Ie){console.error("Failed to regenerate ngrok tunnel:",Ie),Bt(Ie,"Failed to regenerate remote access")}finally{S.value=!1}},Zu=(Ie,fe=3e4)=>Promise.race([Ie,new Promise((Wt,jt)=>setTimeout(()=>jt(new Error("Request timeout")),fe))]),Yc=Ie=>{console.log("File input changed")},fm=async()=>{if(qe.value&&!Ut.value)try{Ut.value=!0;const Ie=D.value;if(!Ie)throw new Error("Doctor ID is required to upload header image");let fe=qe.value;const Wt=fe.size;if(fe.type.startsWith("image/")&&Wt>100*1024)try{console.log(`Compressing header image: ${fe.name} (${(Wt/1024/1024).toFixed(2)}MB)`),fe=await as(fe,{maxSizeMB:2,maxWidthOrHeight:1200,useWebWorker:!0,fileType:"image/jpeg",initialQuality:.85});const $n=fe.size,_n=((1-$n/Wt)*100).toFixed(1);console.log(`Header image compressed: ${($n/1024/1024).toFixed(2)}MB (${_n}% reduction)`)}catch(an){console.warn("Image compression failed, using original file:",an)}const jt=await fH(Ie,fe);if(jt.error)throw jt.error;let It=jt.data?.filename||jt.data?.data?.filename;if(!It){const an=qe.value.name.split(".").pop()?.toLowerCase()||"jpg";It=`prescription_header_${Ie}.${an==="png"?"png":"jpg"}`,console.warn("No filename in upload response, using constructed:",It)}rt.value.headerImagePath=It,console.log("Header image path updated to:",It);const fn={doctorName:rt.value.doctorName||"",doctorDegrees:rt.value.doctorDegrees||"",doctorRegistrationNumber:rt.value.doctorRegistrationNumber||"",clinicAddress:rt.value.clinicAddress||"",email:rt.value.email||"",useHeader:rt.value.useHeader!==void 0?rt.value.useHeader:!0,useFooter:rt.value.useFooter!==void 0?rt.value.useFooter:!0,pageSize:rt.value.pageSize||"A4",headerSize:rt.value.headerSize!==void 0&&rt.value.headerSize!==null?rt.value.headerSize:1.8,headerImagePath:It,doctorId:Ie};console.log("Auto-saving print configs with headerImagePath:",fn),await Zu(dt.post(`/print/${Ie}`,fn)),It&&Sd(Ie,It).then(an=>{At.value=an}).catch(an=>{console.error("Failed to get header image URL:",an)}),qe.value=null,wt("Header image uploaded and saved successfully")}catch(Ie){Bt(Ie,"Failed to upload header image")}finally{Ut.value=!1}},Ta=async()=>{if(!ft.value)try{ft.value=!0;const Ie=D.value;if(!Ie)throw new Error("Doctor ID is required to delete header image");const fe=await mH(Ie);if(fe.error)throw fe.error;rt.value.headerImagePath="",At.value="",qe.value=null,wt("Header image removed successfully")}catch(Ie){Bt(Ie,"Failed to remove header image")}finally{ft.value=!1}};return(Ie,fe)=>{const Wt=I("v-alert"),jt=I("v-progress-circular"),It=I("v-col"),fn=I("v-row"),an=I("v-card-title"),$n=I("v-card-subtitle"),_n=I("v-card"),Yn=I("v-tooltip"),na=I("v-btn"),ts=I("v-switch"),Xc=I("v-img"),hA=I("v-file-input"),ua=I("v-text-field"),Jc=I("v-textarea"),Zc=I("v-select"),qo=I("v-form"),Bo=I("v-tabs-window-item"),Dr=I("v-card-text"),Ga=I("v-icon"),As=I("v-card-item"),mi=I("v-divider"),Br=I("v-chip"),ko=I("v-dialog"),Ts=I("v-checkbox"),Yo=I("v-avatar"),ec=I("v-tabs-window"),Ms=I("v-spacer"),ya=I("v-card-actions"),Xo=I("v-snackbar"),vi=I("v-main");return U(),pe(vi,{class:"mt-5"},{default:u(()=>[s.value?(U(),pe(Wt,{key:0,type:"error",dismissible:"","onClick:close":fe[0]||(fe[0]=Ye=>s.value=null),class:"ma-3"},{default:u(()=>[M(K(s.value),1)]),_:1})):ge("",!0),r.value?(U(),pe(fn,{key:1,"no-gutters":"",class:"pa-3",style:{height:"88%"}},{default:u(()=>[l(It,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[v("div",FIe,[l(jt,{indeterminate:"",color:"primary",size:"64"}),fe[92]||(fe[92]=v("div",{class:"mt-4 text-subtitle-1"},"Loading admin settings...",-1))])]),_:1})]),_:1})):s.value?ge("",!0):(U(),me(We,{key:2},[l(fn,{"aria-label":"main row",class:"pl-3 pr-3",style:{height:"100%"}},{default:u(()=>[l(It,{cols:"4",order:"1",class:"pr-1",style:{height:"92%"}},{default:u(()=>[l(_n,{color:"surfaceContainer",flat:"",style:{height:"100%"}},{default:u(()=>[v("div",PIe,[l(fn,{"no-gutters":""},{default:u(()=>[l(It,{cols:"12"},{default:u(()=>[o.value?(U(),me("div",DIe,[l(an,{class:"text-body-2 pa-2 pb-1",style:{"font-weight":"500"}},{default:u(()=>[...fe[93]||(fe[93]=[M(" evamed Setup ",-1)])]),_:1}),l(Bn,{permission:"admin.setup.doctor"},{default:u(()=>[l(Yn,{text:"Doctor Setup Details"},{activator:u(({props:Ye})=>[l(_n,Ue({style:[{textAlign:"left"},{cursor:"pointer"}],class:["ma-1 mb-1 card-enhanced card-hover-base",{"card-status-selected":d.value==="doctordetails","card-status-default":d.value!=="doctordetails"}],onClick:fe[1]||(fe[1]=va=>d.value="doctordetails")},Ye),{default:u(()=>[l(an,{class:"pb-0 pt-2"},{default:u(()=>[...fe[94]||(fe[94]=[v("div",{class:"text-body-2 font-weight-bold"},"Doctor Setup",-1)])]),_:1}),l($n,{class:"text-caption text-medium-emphasis pb-1 pt-0"},{default:u(()=>[...fe[95]||(fe[95]=[M("Name, Specialization ..",-1)])]),_:1})]),_:1},16,["class"])]),_:1})]),_:1}),l(Bn,{permission:"admin.setup.clinic"},{default:u(()=>[l(Yn,{text:"Clinic Setup Details"},{activator:u(({props:Ye})=>[l(_n,Ue({style:[{textAlign:"left"},{cursor:"pointer"}],class:["ma-1 mb-1 card-enhanced card-hover-base",{"card-status-selected":d.value==="clinicdetails","card-status-default":d.value!=="clinicdetails"}],onClick:fe[2]||(fe[2]=va=>d.value="clinicdetails")},Ye),{default:u(()=>[l(an,{class:"pb-0 pt-2"},{default:u(()=>[...fe[96]||(fe[96]=[v("div",{class:"text-body-2 font-weight-bold"},"Clinic Setup",-1)])]),_:1}),l($n,{class:"text-caption text-medium-emphasis pb-1 pt-0"},{default:u(()=>[...fe[97]||(fe[97]=[M("Name, Address ..",-1)])]),_:1})]),_:1},16,["class"])]),_:1})]),_:1}),l(Bn,{permission:"admin.setup.remote"},{default:u(()=>[l(Yn,{text:"Remote Access"},{activator:u(({props:Ye})=>[l(_n,Ue({style:[{textAlign:"left"},{cursor:"pointer"}],class:["ma-1 mb-1 card-enhanced card-hover-base",{"card-status-selected":d.value==="mobiledetails","card-status-default":d.value!=="mobiledetails"}],onClick:fe[3]||(fe[3]=va=>d.value="mobiledetails")},Ye),{default:u(()=>[l(an,{class:"pb-0 pt-2"},{default:u(()=>[...fe[98]||(fe[98]=[v("div",{class:"text-body-2 font-weight-bold"},"Remote Access",-1)])]),_:1}),l($n,{class:"text-caption text-medium-emphasis pb-1 pt-0"},{default:u(()=>[...fe[99]||(fe[99]=[M("Server address, QR Code ..",-1)])]),_:1})]),_:1},16,["class"])]),_:1})]),_:1}),l(Bn,{permission:"admin.setup.pharmacy"},{default:u(()=>[l(Yn,{text:"Pharmacy Configurations"},{activator:u(({props:Ye})=>[l(_n,Ue({style:[{textAlign:"left"},{cursor:"pointer"}],class:["ma-1 mb-1 card-enhanced card-hover-base",{"card-status-selected":d.value==="pharmacyconfig","card-status-default":d.value!=="pharmacyconfig"}],onClick:fe[4]||(fe[4]=va=>d.value="pharmacyconfig")},Ye),{default:u(()=>[l(an,{class:"pb-0 pt-2"},{default:u(()=>[...fe[100]||(fe[100]=[v("div",{class:"text-body-2 font-weight-bold"},"Pharmacy Configurations",-1)])]),_:1}),l($n,{class:"text-caption text-medium-emphasis pb-1 pt-0"},{default:u(()=>[...fe[101]||(fe[101]=[M("Header, GST Number ..",-1)])]),_:1})]),_:1},16,["class"])]),_:1})]),_:1})])):ge("",!0),i.value?(U(),me("div",UIe,[l(an,{class:"text-body-2 pa-2 pb-1",style:{"font-weight":"500"}},{default:u(()=>[...fe[102]||(fe[102]=[M(" Doctor Specific Setup ",-1)])]),_:1}),l(Bn,{permission:"admin.vitals"},{default:u(()=>[l(Yn,{text:"Configure Vitals Parameters"},{activator:u(({props:Ye})=>[l(_n,Ue({style:[{textAlign:"left"},{cursor:"pointer"}],class:["ma-1 mb-1 card-enhanced card-hover-base vitals-config-card",{"card-status-selected":d.value==="vitalsconfig","card-status-default":d.value!=="vitalsconfig"}],onClick:fe[5]||(fe[5]=va=>d.value="vitalsconfig")},Ye),{default:u(()=>[l(an,{class:"pb-0 pt-2"},{default:u(()=>[...fe[103]||(fe[103]=[v("div",{class:"text-body-2 font-weight-bold"},"Vitals Configuration",-1)])]),_:1}),l($n,{class:"text-caption text-medium-emphasis pb-1 pt-0"},{default:u(()=>[...fe[104]||(fe[104]=[M("Select relevant parameters ..",-1)])]),_:1})]),_:1},16,["class"])]),_:1})]),_:1}),l(Bn,{permission:"admin.setup.prescription"},{default:u(()=>[l(Yn,{text:"Print Configuration Details"},{activator:u(({props:Ye})=>[l(_n,Ue({style:[{textAlign:"left"},{cursor:"pointer"}],class:["ma-1 mb-1 card-enhanced card-hover-base",{"card-status-selected":d.value==="rxprintdetails","card-status-default":d.value!=="rxprintdetails"}],onClick:fe[6]||(fe[6]=va=>d.value="rxprintdetails")},Ye),{default:u(()=>[l(an,{class:"pb-0 pt-2"},{default:u(()=>[...fe[105]||(fe[105]=[v("div",{class:"text-body-2 font-weight-bold"},"Prescription Print Configuration",-1)])]),_:1}),l($n,{class:"text-caption text-medium-emphasis pb-1 pt-0"},{default:u(()=>[...fe[106]||(fe[106]=[M("Name, Registration number ..",-1)])]),_:1})]),_:1},16,["class"])]),_:1})]),_:1}),l(Bn,{permission:"admin.setup.receipt"},{default:u(()=>[l(Yn,{text:"Payment Receipt Configuration Details"},{activator:u(({props:Ye})=>[l(_n,Ue({style:[{textAlign:"left"},{cursor:"pointer"}],class:["ma-1 mb-1 card-enhanced card-hover-base",{"card-status-selected":d.value==="receiptconfig","card-status-default":d.value!=="receiptconfig"}],onClick:fe[7]||(fe[7]=va=>d.value="receiptconfig")},Ye),{default:u(()=>[l(an,{class:"pb-0 pt-2"},{default:u(()=>[...fe[107]||(fe[107]=[v("div",{class:"text-body-2 font-weight-bold"},"Payment Receipt Configuration",-1)])]),_:1}),l($n,{class:"text-caption text-medium-emphasis pb-1 pt-0"},{default:u(()=>[...fe[108]||(fe[108]=[M("Setup receipt series prefix and suffix ..",-1)])]),_:1})]),_:1},16,["class"])]),_:1})]),_:1}),l(Bn,{permission:"admin.setup.bill"},{default:u(()=>[gt.value?(U(),pe(Yn,{key:0,text:gt.value?"GST Bill Series Configuration Details":"GST Bill Series Configuration (Only available for GST-registered doctors)"},{activator:u(({props:Ye})=>[l(_n,Ue({style:[{textAlign:"left"},{cursor:"pointer"}],class:["ma-1 mb-1 card-enhanced card-hover-base",{"card-status-selected":d.value==="billconfig","card-status-default":d.value!=="billconfig"}],onClick:fe[8]||(fe[8]=()=>{gt.value&&(d.value="billconfig")})},Ye),{default:u(()=>[l(an,{class:"pb-0 pt-2"},{default:u(()=>[...fe[109]||(fe[109]=[v("div",{class:"text-body-2 font-weight-bold"},"GST Bill Series Configuration",-1)])]),_:1}),l($n,{class:"text-caption text-medium-emphasis pb-1 pt-0"},{default:u(()=>[...fe[110]||(fe[110]=[M("Setup GST bill series prefix and suffix ..",-1)])]),_:1})]),_:1},16,["class"])]),_:1},8,["text"])):ge("",!0)]),_:1})])):ge("",!0),c.value?(U(),me("div",RIe,[l(an,{class:"text-body-2 pa-2 pb-1",style:{"font-weight":"500"}},{default:u(()=>[...fe[111]||(fe[111]=[M(" Access Control ",-1)])]),_:1}),l(Bn,{"require-admin":""},{default:u(()=>[l(Yn,{text:"Manage Users and Permissions"},{activator:u(({props:Ye})=>[l(_n,Ue({style:[{textAlign:"left"},{cursor:"pointer"}],class:["ma-1 mb-1 card-enhanced card-hover-base",{"card-status-selected":d.value==="usermanagement","card-status-default":d.value!=="usermanagement"}],onClick:fe[9]||(fe[9]=va=>d.value="usermanagement")},Ye),{default:u(()=>[l(an,{class:"pb-0 pt-2"},{default:u(()=>[...fe[112]||(fe[112]=[v("div",{class:"text-body-2 font-weight-bold"},"User Management",-1)])]),_:1}),l($n,{class:"text-caption text-medium-emphasis pb-1 pt-0"},{default:u(()=>[...fe[113]||(fe[113]=[M("Create users, assign permissions ..",-1)])]),_:1})]),_:1},16,["class"])]),_:1})]),_:1})])):ge("",!0)]),_:1})]),_:1})])]),_:1})]),_:1}),l(It,{cols:"8",order:"2",class:"pl-1",style:{height:"100%"}},{default:u(()=>[l(_n,{color:"surfaceContainer",flat:"",style:{height:"92%"}},{default:u(()=>[l(ec,{modelValue:d.value,"onUpdate:modelValue":fe[50]||(fe[50]=Ye=>d.value=Ye)},{default:u(()=>[l(Bo,{value:"rxprintdetails"},{default:u(()=>[l(fn,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[l(It,{cols:"12"},{default:u(()=>[l(_n,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(fn,{"no-gutters":""},{default:u(()=>[l(It,{cols:"8",class:"d-flex align-center"},{default:u(()=>[v("div",NIe,[xt.value?(U(),me(We,{key:0},[M(" Editing configurations for: "+K(xt.value),1)],64)):(U(),me(We,{key:1},[M(" Print Configuration Settings ")],64))])]),_:1}),l(It,{cols:"4",class:"d-flex justify-end"},{default:u(()=>[l(na,{onClick:Jt,disabled:!zn.value||oa.value,loading:oa.value,class:"btn-hover-enhanced"},{default:u(()=>[...fe[114]||(fe[114]=[M(" SAVE ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),v("div",VIe,[l(fn,{"no-gutters":""},{default:u(()=>[l(It,{cols:"12",color:"surfaceContainer"},{default:u(()=>[l(qo,{modelValue:zn.value,"onUpdate:modelValue":fe[20]||(fe[20]=Ye=>zn.value=Ye),"validate-on":"blur",onSubmit:pn(Jt,["prevent"])},{default:u(()=>[l(fn,{"no-gutters":"",class:"ma-2 pa-2"},{default:u(()=>[l(It,{cols:"6",class:"py-0 pl-2 pr-2"},{default:u(()=>[l(ts,{modelValue:rt.value.useHeader,"onUpdate:modelValue":fe[10]||(fe[10]=Ye=>rt.value.useHeader=Ye),label:"Use Header on Prescription",hint:"When disabled, blank space will be left at the top of each page for your custom prescription header",class:"input-hover",color:"primary",density:"compact"},null,8,["modelValue"])]),_:1}),l(It,{cols:"6",class:"py-0 pl-2 pr-2"},{default:u(()=>[l(ts,{modelValue:rt.value.useFooter,"onUpdate:modelValue":fe[11]||(fe[11]=Ye=>rt.value.useFooter=Ye),label:"Use Footer on Prescription",hint:"When disabled, no footer will be printed at the bottom of each page",class:"input-hover",color:"primary",density:"compact"},null,8,["modelValue"])]),_:1}),l(It,{cols:"12",class:"py-2 mb-4"},{default:u(()=>[l(_n,{variant:"outlined",class:"pa-3"},{default:u(()=>[l(an,{class:"text-subtitle-2 pa-0 mb-2"},{default:u(()=>[...fe[115]||(fe[115]=[M("Prescription Header Image",-1)])]),_:1}),l($n,{class:"text-caption pa-0 mb-3"},{default:u(()=>[...fe[116]||(fe[116]=[M(" Upload an image to replace the text-based header. Image will be used when available. ",-1)])]),_:1}),At.value?(U(),me("div",LIe,[l(Xc,{src:At.value,"max-height":"150",contain:"",class:"mb-2",style:{border:"1px solid #e0e0e0","border-radius":"4px"}},null,8,["src"]),l(na,{onClick:Ta,color:"error",variant:"outlined",size:"small",loading:ft.value},{default:u(()=>[...fe[117]||(fe[117]=[M(" Remove Image ",-1)])]),_:1},8,["loading"])])):(U(),me("div",MIe,[l(hA,{modelValue:qe.value,"onUpdate:modelValue":fe[12]||(fe[12]=Ye=>qe.value=Ye),label:"Upload Header Image",accept:"image/jpeg,image/jpg,image/png","prepend-icon":"mdi-image",variant:"outlined",density:"compact",disabled:Ut.value,loading:Ut.value,onChange:Yc,class:"input-hover"},null,8,["modelValue","disabled","loading"])]))]),_:1})]),_:1}),l(It,{cols:"12"},{default:u(()=>[l(ua,{modelValue:rt.value.doctorName,"onUpdate:modelValue":fe[13]||(fe[13]=Ye=>rt.value.doctorName=Ye),label:"Doctor Name (Dr.) *",variant:"outlined",clearable:"",density:"compact",rows:"10",rules:$e(gr),class:"input-hover"},null,8,["modelValue","rules"])]),_:1}),l(It,{cols:"12"},{default:u(()=>[l(Jc,{"auto-grow":"",label:"Doctor Qualification *",clearable:"",rows:"2","row-height":"10",variant:"outlined",density:"compact",class:"input-hover",rules:$e(gr),modelValue:rt.value.doctorDegrees,"onUpdate:modelValue":fe[14]||(fe[14]=Ye=>rt.value.doctorDegrees=Ye)},null,8,["rules","modelValue"])]),_:1}),l(It,{cols:"12"},{default:u(()=>[l(ua,{modelValue:rt.value.doctorRegistrationNumber,"onUpdate:modelValue":fe[15]||(fe[15]=Ye=>rt.value.doctorRegistrationNumber=Ye),label:"Registration Number *",clearable:"",density:"compact",variant:"outlined",rows:"10",rules:$e(zM),class:"input-hover"},null,8,["modelValue","rules"])]),_:1}),l(It,{cols:"12"},{default:u(()=>[l(Jc,{"auto-grow":"",label:"Clinic Details *",clearable:"",rows:"2","row-height":"10",variant:"outlined",density:"compact",class:"input-hover",rules:$e(gr),modelValue:rt.value.clinicAddress,"onUpdate:modelValue":fe[16]||(fe[16]=Ye=>rt.value.clinicAddress=Ye)},null,8,["rules","modelValue"])]),_:1}),l(It,{cols:"12"},{default:u(()=>[l(ua,{modelValue:rt.value.email,"onUpdate:modelValue":fe[17]||(fe[17]=Ye=>rt.value.email=Ye),label:"Email (optional)",variant:"outlined",density:"compact",rows:"10",class:"input-hover"},null,8,["modelValue"])]),_:1}),l(It,{cols:"12"},{default:u(()=>[l(Zc,{modelValue:rt.value.pageSize,"onUpdate:modelValue":fe[18]||(fe[18]=Ye=>rt.value.pageSize=Ye),label:"Page Size",items:Ra,variant:"outlined",density:"compact",class:"input-hover"},null,8,["modelValue"])]),_:1}),l(It,{cols:"12"},{default:u(()=>[l(ua,{modelValue:rt.value.headerSize,"onUpdate:modelValue":fe[19]||(fe[19]=Ye=>rt.value.headerSize=Ye),modelModifiers:{number:!0},label:"Header Size (inches)",variant:"outlined",density:"compact",type:"number",step:"0.1",min:"0.7",max:"2.8",suffix:"in",hint:"Header size in inches (0.7 to 2.8)","persistent-hint":"",rules:[Ye=>Ye==null||Ye>=.7&&Ye<=2.8||"Header size must be between 0.7 and 2.8 inches"],class:"input-hover"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})])]),_:1}),l(Bo,{value:"mobiledetails"},{default:u(()=>[l(fn,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[l(It,{cols:"12"},{default:u(()=>[l(_n,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(fn,{"no-gutters":""},{default:u(()=>[l(It,{cols:"10"}),l(It,{cols:"2",class:"d-flex justify-end ma-3"})]),_:1})]),_:1})]),_:1})]),_:1}),v("div",OIe,[l(fn,{"no-gutters":""},{default:u(()=>[l(It,{cols:"12"},{default:u(()=>[l(_n,{style:{textAlign:"left"},density:"compact",rounded:"lg",class:"ma-2 card-enhanced card-status-default card-hover-base"},{default:u(()=>[l(fn,{"no-gutters":""},{default:u(()=>[l(It,{cols:"12"},{default:u(()=>[l(an,null,{default:u(()=>[...fe[118]||(fe[118]=[M("Remote Access via Internet",-1)])]),_:1}),l(Dr,{class:"ma-0 pa-0 pl-4 pb-2"},{default:u(()=>[F.value?(U(),me("div",HIe," Industry first access from other locations and devices using evamed True Private Network ")):(U(),me("div",$Ie,[...fe[119]||(fe[119]=[M(" Remote access is not currently available.",-1),v("br",null,null,-1),M(" Ngrok tunnel may not be configured or running. ",-1)])]))]),_:1})]),_:1})]),_:1}),l(fn,{"no-gutters":"",class:"pa-4"},{default:u(()=>[b.value?(U(),pe(It,{key:0,cols:"12",class:"d-flex justify-center align-center pa-4"},{default:u(()=>[l(jt,{indeterminate:"",color:"primary"}),fe[120]||(fe[120]=v("span",{class:"ml-2"},"Loading mobile connection details...",-1))]),_:1})):S.value?(U(),pe(It,{key:1,cols:"12",class:"d-flex flex-column justify-center align-center pa-4"},{default:u(()=>[l(jt,{indeterminate:"",color:"primary",size:"64"}),fe[121]||(fe[121]=v("span",{class:"mt-3 text-subtitle-2"},"Regenerating Remote Access...",-1)),fe[122]||(fe[122]=v("span",{class:"mt-1 text-caption text-medium-emphasis"},"Creating new tunnel and QR code",-1))]),_:1})):(U(),me(We,{key:2},[l(It,{cols:"12",class:"d-flex justify-center mb-4"},{default:u(()=>[T.value&&Wn()?(U(),pe(Xc,{src:Wn(),contain:"",height:"150",width:"150",onError:Lh,key:k.value},{placeholder:u(()=>[v("div",QIe,[l(jt,{indeterminate:"",color:"primary"})])]),error:u(()=>[v("div",GIe,[l(Wt,{type:"error",variant:"tonal"},{default:u(()=>[...fe[123]||(fe[123]=[M(" Failed to load QR code ",-1)])]),_:1})])]),_:1},8,["src"])):(U(),pe(Wt,{key:1,type:"info",variant:"tonal",density:"compact"},{default:u(()=>[...fe[124]||(fe[124]=[v("div",{class:"text-center"},[v("div",{class:"text-subtitle-2 mb-2"},"Remote Access Not Available"),v("div",{class:"text-caption"},[M(" Ngrok tunnel is not running or not configured."),v("br"),M(" Check server logs for ngrok setup instructions. ")])],-1)])]),_:1}))]),_:1}),l(It,{cols:"12"},{default:u(()=>[F.value?(U(),pe(ua,{key:0,"model-value":F.value,label:"Remote Access URL",readonly:"",variant:"outlined",density:"compact","append-inner-icon":"mdi-content-copy","onClick:appendInner":fe[21]||(fe[21]=Ye=>gn(F.value))},null,8,["model-value"])):(U(),pe(Wt,{key:1,type:"info",variant:"tonal",density:"compact"},{default:u(()=>[...fe[125]||(fe[125]=[v("div",{class:"text-center"},[v("div",{class:"text-subtitle-2 mb-1"},"Remote Access URL Not Available"),v("div",{class:"text-caption"}," Configure ngrok tunnel to enable remote access ")],-1)])]),_:1}))]),_:1}),l(It,{cols:"12",class:"mt-3 d-flex flex-column align-center"},{default:u(()=>[l(na,{onClick:Mh,disabled:S.value||b.value,loading:S.value,color:"primary",variant:"outlined",size:"small",density:"compact",class:"btn-hover-enhanced"},{default:u(()=>[l(Ga,{start:"",size:"small"},{default:u(()=>[...fe[126]||(fe[126]=[M("mdi-refresh",-1)])]),_:1}),M(" "+K(S.value?"Regenerating...":"Regenerate Remote Access"),1)]),_:1},8,["disabled","loading"]),fe[127]||(fe[127]=v("div",{class:"text-caption text-medium-emphasis mt-1 text-center",style:{"font-size":"0.7rem"}}," This will create a new tunnel URL and QR code. The old URL will stop working. ",-1))]),_:1})],64))]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1}),l(Bo,{value:"doctordetails"},{default:u(()=>[l(fn,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[l(It,{cols:"12"},{default:u(()=>[l(_n,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(fn,{"no-gutters":""},{default:u(()=>[l(It,{cols:"10"}),l(It,{cols:"2",class:"d-flex justify-end"},{default:u(()=>[l(na,{onClick:fe[22]||(fe[22]=Ye=>Ve.value=!0),class:"btn-hover-enhanced"},{default:u(()=>[...fe[128]||(fe[128]=[M("Create New",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(fn,{"no-gutters":""},{default:u(()=>[l(It,{cols:"12",color:"surfaceContainer"},{default:u(()=>[!Ja.value||Ja.value.length===0?(U(),pe(Wt,{key:0,type:"info",variant:"tonal",class:"ma-3"},{default:u(()=>[...fe[129]||(fe[129]=[M(' No doctors found. Click "Create New" to add a doctor. ',-1)])]),_:1})):ge("",!0),(U(!0),me(We,null,qt(Ja.value||[],Ye=>(U(),pe(_n,{style:{textAlign:"left"},density:"compact",rounded:"lg",class:"ma-2 card-enhanced card-status-default card-hover-base",key:Ye?.id||Math.random()},{default:u(()=>[l(As,{class:"pb-2"},{default:u(()=>[v("div",zIe,[v("div",KIe,[l(an,{class:"text-h6 pa-0 mb-1"},{default:u(()=>[M(K(Ye?.doctorName||"Unknown Doctor"),1)]),_:2},1024),Ye?.doctorSpecialization?(U(),pe($n,{key:0,class:"text-body-2 pa-0"},{default:u(()=>[M(K(Ye?.doctorSpecialization),1)]),_:2},1024)):ge("",!0)]),l(Yn,{text:"Edit Doctor Details"},{activator:u(({props:va})=>[l(na,Ue({icon:"",variant:"outlined",size:"small"},{ref_for:!0},va,{onClick:Hi=>Qe(Ye),class:"icon-btn-border"}),{default:u(()=>[...fe[130]||(fe[130]=[v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[v("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),v("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])]),_:1},16,["onClick"])]),_:2},1024)])]),_:2},1024),l(mi,{class:"mx-4 mb-3"}),l(Dr,{class:"pt-0"},{default:u(()=>[l(fn,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(It,{cols:"12",class:"mb-2"},{default:u(()=>[v("div",WIe,[l(Ga,{size:"small",class:"mr-2 text-medium-emphasis"},{default:u(()=>[...fe[131]||(fe[131]=[M("mdi-email-outline",-1)])]),_:1}),fe[132]||(fe[132]=v("span",{class:"text-body-2 text-medium-emphasis mr-2"},"Email:",-1)),Ye?.email&&Ye.email!=="Not specified"?(U(),me("a",{key:0,href:`mailto:${Ye.email}`,class:"text-body-2 text-primary text-decoration-none",onClick:fe[23]||(fe[23]=pn(()=>{},["stop"]))},K(Ye.email),9,jIe)):(U(),me("span",qIe,"Not specified"))])]),_:2},1024),l(It,{cols:"12",class:"mb-2"},{default:u(()=>[v("div",YIe,[l(Ga,{size:"small",class:"mr-2 text-medium-emphasis"},{default:u(()=>[...fe[133]||(fe[133]=[M("mdi-link-variant",-1)])]),_:1}),fe[136]||(fe[136]=v("span",{class:"text-body-2 text-medium-emphasis mr-2"},"Review Link:",-1)),Ye?.doctorReviewLink&&Ye.doctorReviewLink!=="Not specified"?(U(),me("a",{key:0,href:Ye.doctorReviewLink,target:"_blank",rel:"noopener noreferrer",class:"text-body-2 text-primary text-decoration-none",onClick:fe[24]||(fe[24]=pn(()=>{},["stop"]))},[fe[135]||(fe[135]=M(" View Profile ",-1)),l(Ga,{size:"x-small",class:"ml-1"},{default:u(()=>[...fe[134]||(fe[134]=[M("mdi-open-in-new",-1)])]),_:1})],8,XIe)):(U(),me("span",JIe,"Not specified"))])]),_:2},1024),Ye?.isGST&&Ye?.gstIdentifier?(U(),pe(It,{key:0,cols:"12",class:"mb-2"},{default:u(()=>[v("div",ZIe,[l(Ga,{size:"small",class:"mr-2 text-medium-emphasis"},{default:u(()=>[...fe[137]||(fe[137]=[M("mdi-receipt",-1)])]),_:1}),fe[138]||(fe[138]=v("span",{class:"text-body-2 text-medium-emphasis mr-2"},"GST Number:",-1)),v("span",eFe,K(Ye.gstIdentifier),1)])]),_:2},1024)):ge("",!0)]),_:2},1024),v("div",tFe,[l(Br,{color:Ye?.isGST?"success":"default",variant:Ye?.isGST?"tonal":"outlined",size:"small",density:"comfortable",class:"mr-2 mb-1"},{default:u(()=>[l(Ga,{start:"",size:"small"},{default:u(()=>[M(K(Ye?.isGST?"mdi-check-circle":"mdi-cancel"),1)]),_:2},1024),M(" "+K(Ye?.isGST?"GST Registered":"Non-GST"),1)]),_:2},1032,["color","variant"]),l(Br,{color:Ye?.isPharmacy?"primary":"default",variant:Ye?.isPharmacy?"tonal":"outlined",size:"small",density:"comfortable",class:"mb-1"},{default:u(()=>[l(Ga,{start:"",size:"small"},{default:u(()=>[M(K(Ye?.isPharmacy?"mdi-pharmacy":"mdi-pharmacy-off"),1)]),_:2},1024),M(" "+K(Ye?.isPharmacy?"Pharmacy Enabled":"Pharmacy Disabled"),1)]),_:2},1032,["color","variant"])])]),_:2},1024)]),_:2},1024))),128)),l(ko,{modelValue:Be.value,"onUpdate:modelValue":fe[25]||(fe[25]=Ye=>Be.value=Ye),"max-width":"40%",persistent:""},{default:u(()=>[l(iIe,{doctor:E.value,onClose:ke},null,8,["doctor"])]),_:1},8,["modelValue"]),l(ko,{modelValue:Ve.value,"onUpdate:modelValue":fe[26]||(fe[26]=Ye=>Ve.value=Ye),"max-width":"40%",persistent:""},{default:u(()=>[l(cIe,{onClose:ze})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(Bo,{value:"clinicdetails"},{default:u(()=>[l(fn,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[l(It,{cols:"12"},{default:u(()=>[l(_n,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(fn,{"no-gutters":""},{default:u(()=>[l(It,{cols:"10"}),l(It,{cols:"2",class:"d-flex justify-end"},{default:u(()=>[l(na,{onClick:fe[27]||(fe[27]=Ye=>be.value=!0),class:"btn-hover-enhanced"},{default:u(()=>[...fe[139]||(fe[139]=[M("Create New",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(fn,{"no-gutters":""},{default:u(()=>[l(It,{cols:"12",color:"surfaceContainer"},{default:u(()=>[!nr.value||nr.value.length===0?(U(),pe(Wt,{key:0,type:"info",variant:"tonal",class:"ma-3"},{default:u(()=>[...fe[140]||(fe[140]=[M(' No clinics found. Click "Create New" to add a clinic. ',-1)])]),_:1})):ge("",!0),(U(!0),me(We,null,qt(nr.value||[],Ye=>(U(),pe(_n,{style:{textAlign:"left"},density:"compact",rounded:"lg",class:"ma-2 card-enhanced card-status-default card-hover-base",key:Ye?.id||Math.random()},{default:u(()=>[l(fn,{"no-gutters":""},{default:u(()=>[l(It,{cols:"10"},{default:u(()=>[l(fn,{"no-gutters":""},{default:u(()=>[l(It,{cols:"12"},{default:u(()=>[l(an,null,{default:u(()=>[M(K(Ye?.clinicName||"Unknown Clinic"),1)]),_:2},1024)]),_:2},1024),l(It,{cols:"12"},{default:u(()=>[l(Dr,{class:"ma-0 pa-0 pl-4 pb-2"},{default:u(()=>[v("div",null,"Address: "+K(Ye?.clinicAddress||"Not specified"),1),v("div",null,"Contact: "+K(Ye?.contactNumber||"Not specified"),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),l(It,{cols:"2",class:"d-flex justify-end align-center"},{default:u(()=>[l(fn,{"no-gutters":""},{default:u(()=>[l(It,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[l(Yn,{text:"Edit Clinic Details"},{activator:u(({props:va})=>[l(na,Ue({icon:"",variant:"outlined",size:"small"},{ref_for:!0},va,{onClick:Hi=>oe(Ye),class:"icon-btn-border"}),{default:u(()=>[...fe[141]||(fe[141]=[v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[v("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),v("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024),l(mi),l(It,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[l(Yn,{text:"Delete Clinic"},{activator:u(({props:va})=>[l(na,Ue({icon:"",variant:"outlined",size:"small"},{ref_for:!0},va,{disabled:"",class:"icon-btn-border"}),{default:u(()=>[...fe[142]||(fe[142]=[v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[v("polyline",{points:"3 6 5 6 21 6"}),v("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)])]),_:1},16)]),_:1})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),l(ko,{modelValue:je.value,"onUpdate:modelValue":fe[28]||(fe[28]=Ye=>je.value=Ye),"max-width":"40%",persistent:""},{default:u(()=>[l(lIe,{clinic:C.value,onClose:se},null,8,["clinic"])]),_:1},8,["modelValue"]),l(ko,{modelValue:be.value,"onUpdate:modelValue":fe[29]||(fe[29]=Ye=>be.value=Ye),"max-width":"40%",persistent:""},{default:u(()=>[l(uIe,{onClose:Fe})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(Bo,{value:"vitalsconfig"},{default:u(()=>[l(fn,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[l(It,{cols:"12"},{default:u(()=>[l(_n,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(fn,{"no-gutters":""},{default:u(()=>[l(It,{cols:"8",class:"d-flex align-center"},{default:u(()=>[v("div",nFe,[xt.value?(U(),me(We,{key:0},[M(" Vitals Parameters Configured for: "+K(xt.value),1)],64)):(U(),me(We,{key:1},[M(" Configure Vitals Parameters ")],64))])]),_:1}),l(It,{cols:"4",class:"d-flex justify-end"},{default:u(()=>[l(na,{onClick:hn,disabled:O.value,loading:O.value,class:"btn-hover-enhanced"},{default:u(()=>[...fe[143]||(fe[143]=[M(" Save Preferences ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),v("div",aFe,[l(fn,{"no-gutters":""},{default:u(()=>[l(It,{cols:"12",color:"surfaceContainer"},{default:u(()=>[l(_n,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(an,{class:"text-h6 mb-2"},{default:u(()=>[...fe[144]||(fe[144]=[M("Select Vitals Parameters",-1)])]),_:1}),l($n,{class:"text-subtitle-2 mb-1"},{default:u(()=>[...fe[145]||(fe[145]=[M("Basic Vitals",-1)])]),_:1}),l(fn,{"no-gutters":"",class:"mb-3"},{default:u(()=>[l(It,{cols:"4",class:"pr-1"},{default:u(()=>[l(Ts,{label:"Weight (kg)","model-value":!0,disabled:"",density:"compact",class:"input-hover",color:"primary"})]),_:1}),l(It,{cols:"4",class:"px-1"},{default:u(()=>[l(Ts,{modelValue:P.value.pulse,"onUpdate:modelValue":fe[30]||(fe[30]=Ye=>P.value.pulse=Ye),label:"Pulse (bpm)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1}),l(It,{cols:"4",class:"pl-1"},{default:u(()=>[l(Ts,{modelValue:P.value.temperature,"onUpdate:modelValue":fe[31]||(fe[31]=Ye=>P.value.temperature=Ye),label:"Temperature (C)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1}),l(It,{cols:"4",class:"pr-1"},{default:u(()=>[l(Ts,{modelValue:P.value.bloodPressure,"onUpdate:modelValue":fe[32]||(fe[32]=Ye=>P.value.bloodPressure=Ye),label:"Blood Pressure (mmHg)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1}),l(It,{cols:"4",class:"px-1"},{default:u(()=>[l(Ts,{modelValue:P.value.respiratoryRate,"onUpdate:modelValue":fe[33]||(fe[33]=Ye=>P.value.respiratoryRate=Ye),label:"Respiratory Rate (breaths/min)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1}),l(It,{cols:"4",class:"pl-1"},{default:u(()=>[l(Ts,{modelValue:P.value.height,"onUpdate:modelValue":fe[34]||(fe[34]=Ye=>P.value.height=Ye),label:"Height (cm)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1})]),_:1}),l($n,{class:"text-subtitle-2 mb-1"},{default:u(()=>[...fe[146]||(fe[146]=[M("Blood Chemistry Parameters",-1)])]),_:1}),l(fn,{"no-gutters":"",class:"mb-3"},{default:u(()=>[l(It,{cols:"4",class:"pr-1"},{default:u(()=>[l(Ts,{modelValue:P.value.serumBilirubin,"onUpdate:modelValue":fe[35]||(fe[35]=Ye=>P.value.serumBilirubin=Ye),label:"Serum Bilirubin (mg/dL)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1}),l(It,{cols:"4",class:"px-1"},{default:u(()=>[l(Ts,{modelValue:P.value.bloodGlucoseFF,"onUpdate:modelValue":fe[36]||(fe[36]=Ye=>P.value.bloodGlucoseFF=Ye),label:"Blood Glucose - FF (mg/dL)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1}),l(It,{cols:"4",class:"pl-1"},{default:u(()=>[l(Ts,{modelValue:P.value.bloodGlucosePP,"onUpdate:modelValue":fe[37]||(fe[37]=Ye=>P.value.bloodGlucosePP=Ye),label:"Blood Glucose - PP (mg/dL)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1}),l(It,{cols:"4",class:"pr-1"},{default:u(()=>[l(Ts,{modelValue:P.value.bloodGlucoseRandom,"onUpdate:modelValue":fe[38]||(fe[38]=Ye=>P.value.bloodGlucoseRandom=Ye),label:"Blood Glucose - Random (mg/dL)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1}),l(It,{cols:"4",class:"px-1"},{default:u(()=>[l(Ts,{modelValue:P.value.serumCreatinine,"onUpdate:modelValue":fe[39]||(fe[39]=Ye=>P.value.serumCreatinine=Ye),label:"Serum Creatinine (mg/dL)",density:"compact",class:"input-hover",color:"primary"},null,8,["modelValue"])]),_:1})]),_:1}),l(Wt,{type:"info",variant:"tonal",density:"compact",class:"mt-2"},{default:u(()=>[...fe[147]||(fe[147]=[M(" These preferences will be applied to the vitals form and trends view. Weight is always enabled as it's considered essential. Blood chemistry parameters are advanced lab values that can be enabled as needed. ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1}),l(Bo,{value:"receiptconfig"},{default:u(()=>[l(fn,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[l(It,{cols:"12"},{default:u(()=>[l(_n,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(fn,{"no-gutters":""},{default:u(()=>[l(It,{cols:"12",class:"d-flex align-center"},{default:u(()=>[v("div",rFe,[xt.value?(U(),me(We,{key:0},[M(" Payment Receipt Configuration for: "+K(xt.value),1)],64)):(U(),me(We,{key:1},[M(" Payment Receipt Configuration Settings ")],64))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),v("div",sFe,[l(fn,{"no-gutters":""},{default:u(()=>[l(It,{cols:"12",color:"surfaceContainer"},{default:u(()=>[l(qo,{modelValue:ie.value,"onUpdate:modelValue":fe[44]||(fe[44]=Ye=>ie.value=Ye),"validate-on":"blur",onSubmit:pn(kn,["prevent"])},{default:u(()=>[l(fn,{"no-gutters":"",class:"ma-2 pa-2"},{default:u(()=>[l(It,{cols:"12"},{default:u(()=>[l(_n,{flat:"",class:"mb-4",color:"surfaceContainer"},{default:u(()=>[l(an,{class:"text-h6 mb-2"},{default:u(()=>[...fe[148]||(fe[148]=[M("Payment Receipt Series",-1)])]),_:1}),l(Dr,null,{default:u(()=>[...fe[149]||(fe[149]=[M(" Create a new receipt series by specifying a 3-letter prefix and the first receipt number you want to use. The system will generate sequential receipt numbers starting from your specified number. ",-1)])]),_:1})]),_:1})]),_:1}),l(It,{cols:"12",class:"mb-3"},{default:u(()=>[l(Wt,{type:"info",variant:"tonal",density:"compact"},{default:u(()=>[...fe[150]||(fe[150]=[v("strong",null,"Example:",-1),M(' If you enter prefix "INV" and first number "000100", your receipts will be numbered "INV000100", "INV000101", "INV000102", and so on. ',-1)])]),_:1})]),_:1}),l(It,{cols:"6",class:"pr-2"},{default:u(()=>[l(ua,{modelValue:H.value.prefix,"onUpdate:modelValue":fe[40]||(fe[40]=Ye=>H.value.prefix=Ye),label:"Prefix (3 letters) *",variant:"outlined",clearable:"",density:"compact",rules:dn,class:"input-hover",hint:"Enter 3 uppercase letters (e.g., INV, REC, PAY)",maxlength:"3",onInput:fe[41]||(fe[41]=Ye=>H.value.prefix=(Ye.target?.value||Ye||"").toString().toUpperCase())},null,8,["modelValue"])]),_:1}),l(It,{cols:"6",class:"pl-2"},{default:u(()=>[l(ua,{modelValue:H.value.suffix,"onUpdate:modelValue":fe[42]||(fe[42]=Ye=>H.value.suffix=Ye),label:"First Receipt Number (6 digits) *",variant:"outlined",clearable:"",density:"compact",rules:Hn,class:"input-hover",hint:"Enter 6 digits (000001-999999). This will be your first receipt number.",maxlength:"6",onInput:fe[43]||(fe[43]=Ye=>H.value.suffix=(Ye.target?.value||Ye||"").toString().replace(/\D/g,""))},null,8,["modelValue"])]),_:1}),l(It,{cols:"12",class:"mt-2"},{default:u(()=>[H.value.prefix&&H.value.suffix?(U(),pe(Wt,{key:0,type:"success",variant:"tonal",density:"compact"},{default:u(()=>[fe[151]||(fe[151]=v("strong",null,"First Receipt Number:",-1)),M(" "+K(H.value.prefix)+K(H.value.suffix)+" ",1),fe[152]||(fe[152]=v("br",null,null,-1)),fe[153]||(fe[153]=v("strong",null,"Second Receipt Number:",-1)),M(" "+K(H.value.prefix)+K((parseInt(H.value.suffix)+1).toString().padStart(6,"0")),1)]),_:1})):(U(),pe(Wt,{key:1,type:"info",variant:"tonal",density:"compact"},{default:u(()=>[fe[154]||(fe[154]=v("strong",null,"Preview:",-1)),M(" "+K(H.value.prefix||"XXX")+K(H.value.suffix||"000000")+" ",1),fe[155]||(fe[155]=v("br",null,null,-1)),fe[156]||(fe[156]=M("Enter both prefix and first receipt number to see the preview. ",-1))]),_:1}))]),_:1}),l(It,{cols:"12",class:"mt-3 d-flex justify-center"},{default:u(()=>[l(na,{onClick:kn,disabled:!ie.value||Ae.value,loading:Ae.value,color:"primary",variant:"elevated",class:"btn-hover-enhanced"},{default:u(()=>[...fe[157]||(fe[157]=[M(" Create Series ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})])]),_:1}),gt.value?(U(),pe(Bo,{key:0,value:"billconfig"},{default:u(()=>[l(fn,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[l(It,{cols:"12"},{default:u(()=>[l(_n,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(fn,{"no-gutters":""},{default:u(()=>[l(It,{cols:"12",class:"d-flex align-center"},{default:u(()=>[v("div",oFe,[xt.value?(U(),me(We,{key:0},[M(" GST Bill Series Configuration for: "+K(xt.value),1)],64)):(U(),me(We,{key:1},[M(" GST Bill Series Configuration Settings ")],64))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),v("div",iFe,[l(fn,{"no-gutters":""},{default:u(()=>[l(It,{cols:"12",color:"surfaceContainer"},{default:u(()=>[l(qo,{modelValue:J.value,"onUpdate:modelValue":fe[49]||(fe[49]=Ye=>J.value=Ye),"validate-on":"blur",onSubmit:pn(Na,["prevent"])},{default:u(()=>[l(fn,{"no-gutters":"",class:"ma-2 pa-2"},{default:u(()=>[l(It,{cols:"12"},{default:u(()=>[l(_n,{flat:"",class:"mb-4",color:"surfaceContainer"},{default:u(()=>[l(an,{class:"text-h6 mb-2"},{default:u(()=>[...fe[158]||(fe[158]=[M("GST Bill Series",-1)])]),_:1}),l(Dr,null,{default:u(()=>[...fe[159]||(fe[159]=[M(" Create a new GST bill series by specifying a 3-letter prefix and the first bill number you want to use. The system will generate sequential bill numbers starting from your specified number. This is separate from payment receipts and specifically for GST-registered billing. ",-1)])]),_:1})]),_:1})]),_:1}),l(It,{cols:"12",class:"mb-3"},{default:u(()=>[l(Wt,{type:"info",variant:"tonal",density:"compact"},{default:u(()=>[...fe[160]||(fe[160]=[v("strong",null,"Example:",-1),M(' If you enter prefix "BTX" and first number "000100", your GST bills will be numbered "BTX000100", "BTX000101", "BTX000102", and so on. ',-1),v("br",null,null,-1),v("strong",null,"Suggestion:",-1),M(' Use "BTX" for Bill Tax, "GST" for GST Bills, or your clinic initials. ',-1)])]),_:1})]),_:1}),l(It,{cols:"6",class:"pr-2"},{default:u(()=>[l(ua,{modelValue:j.value.prefix,"onUpdate:modelValue":fe[45]||(fe[45]=Ye=>j.value.prefix=Ye),label:"Prefix (3 letters) *",variant:"outlined",clearable:"",density:"compact",rules:Ze,class:"input-hover",hint:"Enter 3 uppercase letters (e.g., BTX, GST, CLN)",maxlength:"3",onInput:fe[46]||(fe[46]=Ye=>j.value.prefix=(Ye.target?.value||Ye||"").toString().toUpperCase())},null,8,["modelValue"])]),_:1}),l(It,{cols:"6",class:"pl-2"},{default:u(()=>[l(ua,{modelValue:j.value.suffix,"onUpdate:modelValue":fe[47]||(fe[47]=Ye=>j.value.suffix=Ye),label:"First Bill Number (6 digits) *",variant:"outlined",clearable:"",density:"compact",rules:Ge,class:"input-hover",hint:"Enter 6 digits (000001-999999). This will be your first bill number.",maxlength:"6",onInput:fe[48]||(fe[48]=Ye=>j.value.suffix=(Ye.target?.value||Ye||"").toString().replace(/\D/g,""))},null,8,["modelValue"])]),_:1}),l(It,{cols:"12",class:"mt-2"},{default:u(()=>[j.value.prefix&&j.value.suffix?(U(),pe(Wt,{key:0,type:"success",variant:"tonal",density:"compact"},{default:u(()=>[fe[161]||(fe[161]=v("strong",null,"First Bill Number:",-1)),M(" "+K(j.value.prefix)+K(j.value.suffix)+" ",1),fe[162]||(fe[162]=v("br",null,null,-1)),fe[163]||(fe[163]=v("strong",null,"Second Bill Number:",-1)),M(" "+K(j.value.prefix)+K((parseInt(j.value.suffix)+1).toString().padStart(6,"0")),1)]),_:1})):(U(),pe(Wt,{key:1,type:"info",variant:"tonal",density:"compact"},{default:u(()=>[fe[164]||(fe[164]=v("strong",null,"Preview:",-1)),M(" "+K(j.value.prefix||"XXX")+K(j.value.suffix||"000000")+" ",1),fe[165]||(fe[165]=v("br",null,null,-1)),fe[166]||(fe[166]=M("Enter both prefix and first bill number to see the preview. ",-1))]),_:1}))]),_:1}),l(It,{cols:"12",class:"mt-3 d-flex justify-center"},{default:u(()=>[l(na,{onClick:Na,disabled:!J.value||ue.value,loading:ue.value,color:"primary",variant:"elevated",class:"btn-hover-enhanced"},{default:u(()=>[...fe[167]||(fe[167]=[M(" Create Bill Series ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})])]),_:1})):ge("",!0),l(Bo,{value:"pharmacyconfig"},{default:u(()=>[l(fn,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[l(It,{cols:"12"},{default:u(()=>[l(_n,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(fn,{"no-gutters":""},{default:u(()=>[l(It,{cols:"8",class:"d-flex align-center"},{default:u(()=>[...fe[168]||(fe[168]=[v("div",{class:"text-subtitle-2 ml-2"}," Pharmacy Management ",-1)])]),_:1}),l(It,{cols:"4",class:"d-flex justify-end"},{default:u(()=>[l(na,{onClick:Pa,color:"primary",class:"btn-hover-enhanced"},{default:u(()=>[l(Ga,{left:""},{default:u(()=>[...fe[169]||(fe[169]=[M("mdi-plus",-1)])]),_:1}),fe[170]||(fe[170]=M(" Add Pharmacy ",-1))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),v("div",lFe,[te.value?(U(),pe(fn,{key:0,"no-gutters":"",class:"justify-center py-8"},{default:u(()=>[l(jt,{indeterminate:"",color:"primary"})]),_:1})):Y.value.length?(U(),pe(fn,{key:2,"no-gutters":""},{default:u(()=>[l(It,{cols:"12"},{default:u(()=>[(U(!0),me(We,null,qt(Y.value,Ye=>(U(),pe(_n,{key:Ye.id,density:"compact",rounded:"lg",class:"ma-2 card-enhanced card-status-default card-hover-base"},{default:u(()=>[l(As,{class:"pb-1"},{default:u(()=>[v("div",uFe,[v("div",cFe,[l(an,{class:"text-h6 pa-0 mb-0"},{default:u(()=>[M(K(Ye.pharmacyName||"Unnamed Pharmacy"),1)]),_:2},1024)]),v("div",dFe,[l(Yn,{text:"Edit Pharmacy"},{activator:u(({props:va})=>[l(na,Ue({icon:"",variant:"outlined",size:"small"},{ref_for:!0},va,{onClick:Hi=>Hr(Ye),class:"icon-btn-border mr-1"}),{default:u(()=>[...fe[174]||(fe[174]=[v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[v("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),v("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])]),_:1},16,["onClick"])]),_:2},1024),l(Yn,{text:"Configure Series"},{activator:u(({props:va})=>[l(na,Ue({icon:"",variant:"outlined",size:"small"},{ref_for:!0},va,{onClick:Hi=>Bs(Ye),class:"icon-btn-border"}),{default:u(()=>[l(Ga,{size:"small"},{default:u(()=>[...fe[175]||(fe[175]=[M("mdi-format-list-numbered",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)])])]),_:2},1024),l(mi,{class:"mx-4 mb-2"}),l(Dr,{class:"pt-0 pb-2"},{default:u(()=>[l(fn,{"no-gutters":"",class:"mb-1"},{default:u(()=>[Ye.header?(U(),pe(It,{key:0,cols:"12",class:"mb-1"},{default:u(()=>[v("div",AFe,[l(Ga,{size:"small",class:"mr-2 text-medium-emphasis mt-1"},{default:u(()=>[...fe[176]||(fe[176]=[M("mdi-file-document-outline",-1)])]),_:1}),v("div",fFe,[fe[177]||(fe[177]=v("span",{class:"text-body-2 text-medium-emphasis mr-2"},"Bill Header:",-1)),v("div",mFe,K(Er(Ye.header)),1),ks(Ye.header)?(U(),me("div",vFe,K(ks(Ye.header)),1)):ge("",!0)])])]),_:2},1024)):ge("",!0),$r(Ye.gstNumber)?(U(),pe(It,{key:1,cols:"12",class:"mb-1"},{default:u(()=>[v("div",hFe,[l(Ga,{size:"small",class:"mr-2 text-medium-emphasis"},{default:u(()=>[...fe[178]||(fe[178]=[M("mdi-identifier",-1)])]),_:1}),fe[179]||(fe[179]=v("span",{class:"text-body-2 text-medium-emphasis mr-2"},"GST Number:",-1)),v("span",pFe,K($r(Ye.gstNumber)),1)])]),_:2},1024)):ge("",!0),Vi(Ye.gstNumber)?(U(),pe(It,{key:2,cols:"12",class:"mb-1"},{default:u(()=>[v("div",gFe,[l(Ga,{size:"small",class:"mr-2 text-medium-emphasis"},{default:u(()=>[...fe[180]||(fe[180]=[M("mdi-certificate-outline",-1)])]),_:1}),fe[181]||(fe[181]=v("span",{class:"text-body-2 text-medium-emphasis mr-2"},"Registration Details:",-1)),v("span",yFe,K(Vi(Ye.gstNumber)),1)])]),_:2},1024)):ge("",!0),l(It,{cols:"12",class:"mb-1"},{default:u(()=>[v("div",_Fe,[l(Ga,{size:"small",class:"mr-2 text-medium-emphasis"},{default:u(()=>[...fe[182]||(fe[182]=[M("mdi-file-document",-1)])]),_:1}),fe[183]||(fe[183]=v("span",{class:"text-body-2 text-medium-emphasis mr-2"},"Page Size:",-1)),v("span",wFe,K(Ye.pageSize||"A4"),1)])]),_:2},1024)]),_:2},1024),v("div",bFe,[l(Br,{color:Ye.useHeader?"success":"default",variant:Ye.useHeader?"tonal":"outlined",size:"small",density:"compact",class:"mr-2"},{default:u(()=>[l(Ga,{start:"",size:"small"},{default:u(()=>[M(K(Ye.useHeader?"mdi-check-circle":"mdi-cancel"),1)]),_:2},1024),M(" "+K(Ye.useHeader?"Header Enabled":"Header Disabled"),1)]),_:2},1032,["color","variant"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):(U(),pe(fn,{key:1,"no-gutters":"",class:"justify-center py-8"},{default:u(()=>[l(It,{cols:"12",class:"text-center"},{default:u(()=>[l(Ga,{size:"64",color:"grey-lighten-1"},{default:u(()=>[...fe[171]||(fe[171]=[M("mdi-pill",-1)])]),_:1}),fe[172]||(fe[172]=v("p",{class:"text-subtitle-1 mt-4"},"No pharmacies found",-1)),fe[173]||(fe[173]=v("p",{class:"text-caption text-grey"},'Click "Add Pharmacy" to create your first pharmacy',-1))]),_:1})]),_:1}))])]),_:1}),l(Bo,{value:"usermanagement"},{default:u(()=>[l(fn,{"no-gutters":"","aria-label":"toolbar"},{default:u(()=>[l(It,{cols:"12"},{default:u(()=>[l(_n,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(fn,{"no-gutters":""},{default:u(()=>[l(It,{cols:"8",class:"d-flex align-center"},{default:u(()=>[...fe[184]||(fe[184]=[v("div",{class:"text-subtitle-2 ml-2"}," User Management & Permissions ",-1)])]),_:1}),l(It,{cols:"4",class:"d-flex justify-end"},{default:u(()=>[l(na,{onClick:fA,color:"primary",class:"btn-hover-enhanced"},{default:u(()=>[l(Ga,{left:""},{default:u(()=>[...fe[185]||(fe[185]=[M("mdi-plus",-1)])]),_:1}),fe[186]||(fe[186]=M(" Add User ",-1))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),v("div",xFe,[G.value?(U(),pe(fn,{key:0,"no-gutters":"",class:"justify-center py-8"},{default:u(()=>[l(jt,{indeterminate:"",color:"primary"})]),_:1})):de.value.length?(U(),pe(fn,{key:2,"no-gutters":""},{default:u(()=>[l(It,{cols:"12"},{default:u(()=>[(U(!0),me(We,null,qt(de.value,Ye=>(U(),pe(_n,{key:Ye.id,class:"mb-2 card-enhanced card-hover-base",outlined:""},{default:u(()=>[l(Dr,{class:"d-flex align-center justify-space-between"},{default:u(()=>[v("div",CFe,[l(Yo,{color:Ye.isActive?"primary":"grey",size:"40",class:"mr-3"},{default:u(()=>[v("span",SFe,K(hl(Ye.name)),1)]),_:2},1032,["color"]),v("div",EFe,[v("div",BFe,[M(K(Ye.name)+" ",1),Ye.isAdmin?(U(),pe(Br,{key:0,"x-small":"",color:"primary",class:"ml-1",density:"compact",style:{height:"18px","font-size":"10px",padding:"0 6px"}},{default:u(()=>[...fe[190]||(fe[190]=[M("Admin",-1)])]),_:1})):ge("",!0),Ye.role?(U(),pe(Br,{key:1,"x-small":"",color:"success",class:"ml-1",density:"compact",style:{height:"18px","font-size":"10px",padding:"0 6px"}},{default:u(()=>[M(K(Wo(Ye.role)),1)]),_:2},1024)):ge("",!0)]),v("div",kFe,[M(K(Ye.email||"No email")+" ",1),Ye.doctorId?(U(),pe(Br,{key:0,"x-small":"",color:"info",class:"ml-1",density:"compact",style:{height:"18px","font-size":"10px",padding:"0 6px"}},{default:u(()=>[...fe[191]||(fe[191]=[M("Doctor",-1)])]),_:1})):ge("",!0)]),v("div",TFe,[(U(!0),me(We,null,qt(Ye.permissions?.slice(0,3),va=>(U(),pe(Br,{key:va,"x-small":"",class:"mr-1 mt-1",density:"compact",style:{height:"18px","font-size":"10px",padding:"0 6px"}},{default:u(()=>[M(K(lm(va)),1)]),_:2},1024))),128)),Ye.permissions?.length>3?(U(),me("span",IFe," +"+K(Ye.permissions.length-3)+" more ",1)):ge("",!0)])])]),v("div",FFe,[l(Yn,{text:"Edit User"},{activator:u(({props:va})=>[l(na,Ue({icon:"",size:"small",variant:"outlined",onClick:Hi=>um(Ye),class:"icon-btn-border mr-1"},{ref_for:!0},va),{default:u(()=>[...fe[192]||(fe[192]=[v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[v("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),v("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])]),_:1},16,["onClick"])]),_:2},1024),l(Yn,{text:"View Passcode"},{activator:u(({props:va})=>[l(na,Ue({icon:"",size:"small",variant:"outlined",onClick:Hi=>Oi(Ye),class:"icon-btn-border mr-1"},{ref_for:!0},va),{default:u(()=>[...fe[193]||(fe[193]=[v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[v("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),v("circle",{cx:"12",cy:"12",r:"3"})],-1)])]),_:1},16,["onClick"])]),_:2},1024),l(Yn,{text:"Reset Passcode"},{activator:u(({props:va})=>[l(na,Ue({icon:"",size:"small",variant:"outlined",onClick:Hi=>uu(Ye),class:"icon-btn-border mr-1"},{ref_for:!0},va),{default:u(()=>[...fe[194]||(fe[194]=[v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[v("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),v("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})],-1)])]),_:1},16,["onClick"])]),_:2},1024),l(Bn,{"require-admin":""},{default:u(()=>[l(Yn,{text:"Delete User"},{activator:u(({props:va})=>[l(na,Ue({icon:"",size:"small",variant:"outlined",onClick:Hi=>Vh(Ye),disabled:Ju(Ye),color:"error",class:"icon-btn-border"},{ref_for:!0},va),{default:u(()=>[...fe[195]||(fe[195]=[v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[v("polyline",{points:"3 6 5 6 21 6"}),v("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)])]),_:1},16,["onClick","disabled"])]),_:2},1024)]),_:2},1024)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):(U(),pe(fn,{key:1,"no-gutters":"",class:"justify-center py-8"},{default:u(()=>[l(It,{cols:"12",class:"text-center"},{default:u(()=>[l(Ga,{size:"64",color:"grey-lighten-1"},{default:u(()=>[...fe[187]||(fe[187]=[M("mdi-account-group-outline",-1)])]),_:1}),fe[188]||(fe[188]=v("p",{class:"text-subtitle-1 mt-4"},"No users found",-1)),fe[189]||(fe[189]=v("p",{class:"text-caption text-grey"},'Click "Add User" to create your first user',-1))]),_:1})]),_:1}))])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(ko,{modelValue:ce.value,"onUpdate:modelValue":fe[61]||(fe[61]=Ye=>ce.value=Ye),"max-width":"600",scrollable:""},{default:u(()=>[l(_n,{class:"dialog-card"},{default:u(()=>[l(an,{class:"dialog-header"},{default:u(()=>[fe[197]||(fe[197]=v("span",{class:"dialog-title"},"Create New User",-1)),l(Ms),l(na,{icon:"",variant:"text",size:"small",onClick:fe[51]||(fe[51]=Ye=>ce.value=!1),class:"dialog-close-btn"},{default:u(()=>[l(Ga,null,{default:u(()=>[...fe[196]||(fe[196]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(Dr,{class:"dialog-card-text"},{default:u(()=>[Ce.value?(U(),pe(Wt,{key:0,type:"error",variant:"tonal",dismissible:"","onClick:close":fe[52]||(fe[52]=Ye=>Ce.value=null),class:"mb-4"},{default:u(()=>[M(K(Ce.value),1)]),_:1})):ge("",!0),l(qo,{ref_key:"createUserForm",ref:ye,modelValue:Se.value,"onUpdate:modelValue":fe[59]||(fe[59]=Ye=>Se.value=Ye)},{default:u(()=>[l(ua,{modelValue:_e.value.name,"onUpdate:modelValue":fe[53]||(fe[53]=Ye=>_e.value.name=Ye),label:"User Name *",variant:"outlined",density:"compact",rules:[Ye=>!!Ye||"Name is required"],class:"mb-2"},null,8,["modelValue","rules"]),l(ua,{modelValue:_e.value.passcode,"onUpdate:modelValue":fe[55]||(fe[55]=Ye=>_e.value.passcode=Ye),label:"Passcode *",variant:"outlined",density:"compact",type:Pt.value?"text":"password",rules:[Ye=>!!Ye||"Passcode is required",Ye=>Ye.length>=4||"Passcode must be at least 4 characters"],error:!!Ce.value,onInput:fe[56]||(fe[56]=Ye=>Ce.value=null),class:"mb-2"},{"append-inner":u(()=>[l(Ga,{icon:Pt.value?"mdi-eye-off":"mdi-eye",onClick:fe[54]||(fe[54]=Ye=>Pt.value=!Pt.value),style:{cursor:"pointer"}},null,8,["icon"])]),_:1},8,["modelValue","type","rules","error"]),l(ua,{modelValue:_e.value.email,"onUpdate:modelValue":fe[57]||(fe[57]=Ye=>_e.value.email=Ye),label:"Email (optional)",variant:"outlined",density:"compact",type:"email",class:"mb-2"},null,8,["modelValue"]),l(gR,{user:_e.value,"available-features":Z.value,"onUpdate:user":fe[58]||(fe[58]=Ye=>_e.value=Ye)},null,8,["user","available-features"])]),_:1},8,["modelValue"])]),_:1}),l(ya,{class:"dialog-actions"},{default:u(()=>[l(Ms),l(na,{variant:"outlined",color:"grey-darken-1",onClick:fe[60]||(fe[60]=Ye=>ce.value=!1),class:"dialog-cancel-btn"},{default:u(()=>[...fe[198]||(fe[198]=[M(" Cancel ",-1)])]),_:1}),l(na,{color:"primary",variant:"flat",disabled:!Se.value,loading:Pe.value,onClick:Rh,class:"dialog-save-btn"},{default:u(()=>[...fe[199]||(fe[199]=[M(" Create ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(ko,{modelValue:De.value,"onUpdate:modelValue":fe[68]||(fe[68]=Ye=>De.value=Ye),"max-width":"600",persistent:Te.value,scrollable:""},{default:u(()=>[et.value&&et.value.id&&Array.isArray(Z.value)&&Array.isArray(zt.value)?(U(),pe(_n,{key:0,class:"dialog-card"},{default:u(()=>[l(an,{class:"dialog-header"},{default:u(()=>[v("span",PFe,"Edit User: "+K(et.value?.name),1),l(Ms),l(na,{icon:"",variant:"text",size:"small",onClick:fe[62]||(fe[62]=Ye=>De.value=!1),disabled:Te.value,class:"dialog-close-btn"},{default:u(()=>[l(Ga,null,{default:u(()=>[...fe[200]||(fe[200]=[M("mdi-close",-1)])]),_:1})]),_:1},8,["disabled"])]),_:1}),l(Dr,{class:"dialog-card-text"},{default:u(()=>[l(qo,{ref_key:"editUserForm",ref:Me,modelValue:xe.value,"onUpdate:modelValue":fe[66]||(fe[66]=Ye=>xe.value=Ye)},{default:u(()=>[l(ua,{modelValue:et.value.name,"onUpdate:modelValue":fe[63]||(fe[63]=Ye=>et.value.name=Ye),label:"User Name *",variant:"outlined",density:"compact",rules:[Ye=>!!Ye||"Name is required"],"validate-on":"blur",class:"mb-2"},null,8,["modelValue","rules"]),l(ua,{modelValue:et.value.email,"onUpdate:modelValue":fe[64]||(fe[64]=Ye=>et.value.email=Ye),label:"Email (optional)",variant:"outlined",density:"compact",type:"email","validate-on":"blur",class:"mb-2"},null,8,["modelValue"]),et.value.isAdmin?ge("",!0):(U(),pe(gR,{key:0,user:et.value,"available-features":Z.value,"onUpdate:user":fe[65]||(fe[65]=Ye=>et.value=Ye)},null,8,["user","available-features"]))]),_:1},8,["modelValue"])]),_:1}),l(ya,{class:"dialog-actions"},{default:u(()=>[l(Ms),l(na,{variant:"outlined",color:"grey-darken-1",onClick:fe[67]||(fe[67]=Ye=>De.value=!1),disabled:Te.value,class:"dialog-cancel-btn"},{default:u(()=>[...fe[201]||(fe[201]=[M(" Cancel ",-1)])]),_:1},8,["disabled"]),l(na,{color:"primary",variant:"flat",disabled:!xe.value,loading:Te.value,onClick:cm,class:"dialog-save-btn"},{default:u(()=>[...fe[202]||(fe[202]=[M(" Save ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})):(U(),pe(_n,{key:1},{default:u(()=>[l(Dr,null,{default:u(()=>[v("div",DFe,[l(jt,{indeterminate:"",color:"primary"}),fe[203]||(fe[203]=v("p",{class:"mt-4"},"Loading user data...",-1))])]),_:1})]),_:1}))]),_:1},8,["modelValue","persistent"]),l(ko,{modelValue:Re.value,"onUpdate:modelValue":fe[72]||(fe[72]=Ye=>Re.value=Ye),"max-width":"400"},{default:u(()=>[l(_n,null,{default:u(()=>[l(an,null,{default:u(()=>[...fe[204]||(fe[204]=[M("Reset Passcode",-1)])]),_:1}),l(Dr,null,{default:u(()=>[v("p",UFe,"Enter a new passcode for "+K(nt.value?.name),1),l(ua,{modelValue:Tt.value,"onUpdate:modelValue":fe[70]||(fe[70]=Ye=>Tt.value=Ye),label:"New Passcode *",variant:"outlined",density:"compact",type:Kt.value?"text":"password",rules:[Ye=>!!Ye||"Passcode is required",Ye=>Ye.length>=4||"Passcode must be at least 4 characters"]},{"append-inner":u(()=>[l(Ga,{icon:Kt.value?"mdi-eye-off":"mdi-eye",onClick:fe[69]||(fe[69]=Ye=>Kt.value=!Kt.value),style:{cursor:"pointer"}},null,8,["icon"])]),_:1},8,["modelValue","type","rules"])]),_:1}),l(ya,null,{default:u(()=>[l(Ms),l(na,{text:"",onClick:fe[71]||(fe[71]=Ye=>Re.value=!1)},{default:u(()=>[...fe[205]||(fe[205]=[M("Cancel",-1)])]),_:1}),l(na,{color:"primary",disabled:!Tt.value||Tt.value.length<4,loading:Le.value,onClick:vA},{default:u(()=>[...fe[206]||(fe[206]=[M("Reset",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(ko,{modelValue:$t.value,"onUpdate:modelValue":fe[77]||(fe[77]=Ye=>$t.value=Ye),"max-width":"400"},{default:u(()=>[l(_n,null,{default:u(()=>[l(an,null,{default:u(()=>[...fe[207]||(fe[207]=[M("View Passcode",-1)])]),_:1}),l(Dr,null,{default:u(()=>[v("p",RFe,"Passcode for "+K(st.value?.name),1),rn.value?(U(),pe(Wt,{key:0,type:"error",variant:"tonal",dismissible:"","onClick:close":fe[73]||(fe[73]=Ye=>rn.value=null),class:"mb-4"},{default:u(()=>[M(K(rn.value),1)]),_:1})):ge("",!0),l(ua,{modelValue:Je.value,"onUpdate:modelValue":fe[75]||(fe[75]=Ye=>Je.value=Ye),label:"Passcode",variant:"outlined",density:"compact",type:Nt.value?"text":"password",readonly:"",loading:bt.value},{"append-inner":u(()=>[l(Ga,{icon:Nt.value?"mdi-eye-off":"mdi-eye",onClick:fe[74]||(fe[74]=Ye=>Nt.value=!Nt.value),style:{cursor:"pointer"}},null,8,["icon"])]),_:1},8,["modelValue","type","loading"]),!bt.value&&!rn.value&&!Je.value?(U(),pe(Wt,{key:1,type:"info",variant:"tonal",density:"compact",class:"mt-2"},{default:u(()=>[...fe[208]||(fe[208]=[M(" Passcode cannot be viewed for security reasons. Passcodes are stored securely and cannot be retrieved. ",-1)])]),_:1})):ge("",!0)]),_:1}),l(ya,null,{default:u(()=>[l(Ms),l(na,{icon:"",size:"small",onClick:Am,disabled:!Je.value,class:"mr-2"},{default:u(()=>[l(Ga,null,{default:u(()=>[...fe[209]||(fe[209]=[M("mdi-content-copy",-1)])]),_:1})]),_:1},8,["disabled"]),l(na,{text:"",onClick:fe[76]||(fe[76]=Ye=>$t.value=!1)},{default:u(()=>[...fe[210]||(fe[210]=[M("Close",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(ko,{modelValue:Lt.value,"onUpdate:modelValue":fe[80]||(fe[80]=Ye=>Lt.value=Ye),"max-width":"500"},{default:u(()=>[l(_n,null,{default:u(()=>[l(an,{class:"text-error"},{default:u(()=>[l(Ga,{color:"error",class:"mr-2"},{default:u(()=>[...fe[211]||(fe[211]=[M("mdi-alert-circle",-1)])]),_:1}),fe[212]||(fe[212]=M(" Delete User ",-1))]),_:1}),l(Dr,null,{default:u(()=>[v("div",NFe,[v("p",VFe,[fe[213]||(fe[213]=M(" Are you sure you want to delete ",-1)),v("strong",null,K(_t.value?.name),1),fe[214]||(fe[214]=M("? ",-1))]),l(Wt,{type:"warning",variant:"tonal",class:"mb-2"},{default:u(()=>[...fe[215]||(fe[215]=[v("div",{class:"text-caption"},[v("strong",null,"This action cannot be undone!")],-1),v("div",{class:"text-caption mt-1"},[M(" This will permanently delete: "),v("ul",{class:"mt-1 mb-0"},[v("li",null,"User account"),v("li",null,"All user permissions"),v("li",null,"All active sessions"),v("li",null,"All subscription data"),v("li",null,"All usage tracking data")])],-1)])]),_:1}),Ju(_t.value)?(U(),pe(Wt,{key:0,type:"error",variant:"tonal"},{default:u(()=>[...fe[216]||(fe[216]=[M(" You cannot delete your own account! ",-1)])]),_:1})):ge("",!0)]),l(ua,{modelValue:ut.value,"onUpdate:modelValue":fe[78]||(fe[78]=Ye=>ut.value=Ye),label:"Type 'DELETE' to confirm",variant:"outlined",density:"compact",rules:[Ye=>Ye==="DELETE"||"Please type DELETE to confirm"]},null,8,["modelValue","rules"])]),_:1}),l(ya,null,{default:u(()=>[l(Ms),l(na,{text:"",onClick:fe[79]||(fe[79]=Ye=>{Lt.value=!1,ut.value=""})},{default:u(()=>[...fe[217]||(fe[217]=[M("Cancel",-1)])]),_:1}),l(na,{color:"error",disabled:ut.value!=="DELETE"||Ju(_t.value),loading:Ft.value,onClick:jo},{default:u(()=>[...fe[218]||(fe[218]=[M(" Delete User ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(BIe,{modelValue:L.value,"onUpdate:modelValue":fe[81]||(fe[81]=Ye=>L.value=Ye),onSaved:Or},null,8,["modelValue"]),l(kIe,{modelValue:N.value,"onUpdate:modelValue":fe[82]||(fe[82]=Ye=>N.value=Ye),pharmacy:q.value,onSaved:Or},null,8,["modelValue","pharmacy"]),l(ko,{modelValue:Q.value,"onUpdate:modelValue":fe[89]||(fe[89]=Ye=>Q.value=Ye),"max-width":"500",persistent:""},{default:u(()=>[l(_n,{rounded:"lg",color:"surfaceContainer",flat:""},{default:u(()=>[l(an,{class:"d-flex align-center justify-space-between"},{default:u(()=>[v("span",null,"Configure Bill Series - "+K(ee.value?.pharmacyName||""),1),l(na,{onClick:fe[83]||(fe[83]=Ye=>{Q.value=!1,ee.value=null,z.value=null}),variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(Ga,{size:"18"},{default:u(()=>[...fe[219]||(fe[219]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(mi),l(Dr,{class:"py-1"},{default:u(()=>[z.value?(U(),pe(Wt,{key:0,type:"info",variant:"tonal",density:"compact",class:"mb-3"},{default:u(()=>[v("div",LFe,[fe[220]||(fe[220]=v("strong",null,"Current Latest Series:",-1)),M(" "+K(z.value.identifier)+" ",1),fe[221]||(fe[221]=v("br",null,null,-1)),v("span",MFe,"(Next bill will be: "+K(Ko(z.value.identifier))+")",1)])]),_:1})):(U(),pe(Wt,{key:1,type:"warning",variant:"tonal",density:"compact",class:"mb-3"},{default:u(()=>[...fe[222]||(fe[222]=[v("div",{class:"text-body-2"},"No series configured yet. Create a new series below.",-1)])]),_:1})),l(qo,{ref:"seriesForm",modelValue:le.value,"onUpdate:modelValue":fe[87]||(fe[87]=Ye=>le.value=Ye)},{default:u(()=>[l(fn,{dense:""},{default:u(()=>[l(It,{cols:"12"},{default:u(()=>[l(ua,{modelValue:X.value.prefix,"onUpdate:modelValue":[fe[84]||(fe[84]=Ye=>X.value.prefix=Ye),fe[85]||(fe[85]=Ye=>{X.value.prefix=(Ye||"").toString().toUpperCase().replace(/[^A-Z]/g,"").substring(0,3)})],label:"Prefix (3 letters) *",variant:"outlined",density:"compact",hint:"e.g., PHM, BIL","prepend-inner-icon":"mdi-format-text",maxlength:"3",rules:[Ye=>!!Ye||"Prefix is required",Ye=>Ye&&Ye.length===3||"Prefix must be exactly 3 letters"]},null,8,["modelValue","rules"])]),_:1}),l(It,{cols:"12"},{default:u(()=>[l(ua,{modelValue:X.value.seed,"onUpdate:modelValue":fe[86]||(fe[86]=Ye=>X.value.seed=Ye),modelModifiers:{number:!0},label:"Seed (Starting Number) *",variant:"outlined",density:"compact",type:"number",hint:"Starting number for the series (e.g., 1). The first bill will be PREFIX000001","prepend-inner-icon":"mdi-numeric",min:"1",rules:[Ye=>Ye!=null&&Ye>=1||"Seed must be at least 1"]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(mi),l(ya,{class:"pa-3"},{default:u(()=>[l(Ms),l(na,{variant:"outlined",onClick:fe[88]||(fe[88]=Ye=>{Q.value=!1,ee.value=null,z.value=null}),disabled:re.value},{default:u(()=>[...fe[223]||(fe[223]=[M(" Cancel ",-1)])]),_:1},8,["disabled"]),l(na,{color:"primary",onClick:Vt,loading:re.value,disabled:!le.value},{default:u(()=>[...fe[224]||(fe[224]=[M(" Create Series ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(Xo,{modelValue:f.value,"onUpdate:modelValue":fe[90]||(fe[90]=Ye=>f.value=Ye),class:"elevation-24",color:"success"},{default:u(()=>[M(K(m.value),1)]),_:1},8,["modelValue"]),l(Xo,{modelValue:h.value,"onUpdate:modelValue":fe[91]||(fe[91]=Ye=>h.value=Ye),timeout:2e3,class:"elevation-24",color:"failure"},{default:u(()=>[M(K(p.value),1)]),_:1},8,["modelValue"])],64))]),_:1})}}},HFe=Xt(OFe,[["__scopeId","data-v-1c283a9d"]]);var ZH=1252,$Fe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],IT={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},FT=function(e){$Fe.indexOf(e)!=-1&&(ZH=IT[0]=e)};function QFe(){FT(1252)}var Ul=function(e){FT(e)};function e$(){Ul(1200),QFe()}function yR(e){for(var t=[],n=0,a=e.length;n<a;++n)t[n]=e.charCodeAt(n);return t}function GFe(e){for(var t=[],n=0;n<e.length>>1;++n)t[n]=String.fromCharCode(e.charCodeAt(2*n)+(e.charCodeAt(2*n+1)<<8));return t.join("")}function t$(e){for(var t=[],n=0;n<e.length>>1;++n)t[n]=String.fromCharCode(e.charCodeAt(2*n+1)+(e.charCodeAt(2*n)<<8));return t.join("")}var Dp=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1);return t==255&&n==254?GFe(e.slice(2)):t==254&&n==255?t$(e.slice(2)):t==65279?e.slice(1):e},Cy=function(t){return String.fromCharCode(t)},_R=function(t){return String.fromCharCode(t)},O0,Id="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function wR(e){for(var t="",n=0,a=0,r=0,s=0,o=0,i=0,c=0,A=0;A<e.length;)n=e.charCodeAt(A++),s=n>>2,a=e.charCodeAt(A++),o=(n&3)<<4|a>>4,r=e.charCodeAt(A++),i=(a&15)<<2|r>>6,c=r&63,isNaN(a)?i=c=64:isNaN(r)&&(c=64),t+=Id.charAt(s)+Id.charAt(o)+Id.charAt(i)+Id.charAt(c);return t}function Di(e){var t="",n=0,a=0,r=0,s=0,o=0,i=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var A=0;A<e.length;)s=Id.indexOf(e.charAt(A++)),o=Id.indexOf(e.charAt(A++)),n=s<<2|o>>4,t+=String.fromCharCode(n),i=Id.indexOf(e.charAt(A++)),a=(o&15)<<4|i>>2,i!==64&&(t+=String.fromCharCode(a)),c=Id.indexOf(e.charAt(A++)),r=(i&3)<<6|c,c!==64&&(t+=String.fromCharCode(r));return t}var pa=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),Wf=(function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,n){return n?new Buffer(t,n):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}})();function eA(e){return pa?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function bR(e){return pa?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Tl=function(t){return pa?Wf(t,"binary"):t.split("").map(function(n){return n.charCodeAt(0)&255})};function jf(e){if(Array.isArray(e))return e.map(function(a){return String.fromCharCode(a)}).join("");for(var t=[],n=0;n<e.length;++n)t[n]=String.fromCharCode(e[n]);return t.join("")}function PT(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return PT(new Uint8Array(e));for(var t=new Array(e.length),n=0;n<e.length;++n)t[n]=e[n];return t}var Ed=pa?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:Wf(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,n=0;for(t=0;t<e.length;++t)n+=e[t].length;var a=new Uint8Array(n),r=0;for(t=0,n=0;t<e.length;n+=r,++t)if(r=e[t].length,e[t]instanceof Uint8Array)a.set(e[t],n);else{if(typeof e[t]=="string")throw"wtf";a.set(new Uint8Array(e[t]),n)}return a}return[].concat.apply([],e.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function zFe(e){for(var t=[],n=0,a=e.length+250,r=eA(e.length+255),s=0;s<e.length;++s){var o=e.charCodeAt(s);if(o<128)r[n++]=o;else if(o<2048)r[n++]=192|o>>6&31,r[n++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var i=e.charCodeAt(++s)&1023;r[n++]=240|o>>8&7,r[n++]=128|o>>2&63,r[n++]=128|i>>6&15|(o&3)<<4,r[n++]=128|i&63}else r[n++]=224|o>>12&15,r[n++]=128|o>>6&63,r[n++]=128|o&63;n>a&&(t.push(r.slice(0,n)),n=0,r=eA(65535),a=65530)}return t.push(r.slice(0,n)),Ed(t)}var Oo=/\u0000/g,Up=/[\u0001-\u0006]/g;function bv(e){for(var t="",n=e.length-1;n>=0;)t+=e.charAt(n--);return t}function Rl(e,t){var n=""+e;return n.length>=t?n:Rr("0",t-n.length)+n}function DT(e,t){var n=""+e;return n.length>=t?n:Rr(" ",t-n.length)+n}function A2(e,t){var n=""+e;return n.length>=t?n:n+Rr(" ",t-n.length)}function KFe(e,t){var n=""+Math.round(e);return n.length>=t?n:Rr("0",t-n.length)+n}function WFe(e,t){var n=""+e;return n.length>=t?n:Rr("0",t-n.length)+n}var xR=Math.pow(2,32);function Qm(e,t){if(e>xR||e<-xR)return KFe(e,t);var n=Math.round(e);return WFe(n,t)}function f2(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var CR=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],FC=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function jFe(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var ea={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},SR={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},qFe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function m2(e,t,n){for(var a=e<0?-1:1,r=e*a,s=0,o=1,i=0,c=1,A=0,d=0,f=Math.floor(r);A<t&&(f=Math.floor(r),i=f*o+s,d=f*A+c,!(r-f<5e-8));)r=1/(r-f),s=o,o=i,c=A,A=d;if(d>t&&(A>t?(d=c,i=s):(d=A,i=o)),!n)return[0,a*i,d];var m=Math.floor(a*i/d);return[m,a*i-m*d,d]}function YA(e,t,n){if(e>2958465||e<0)return null;var a=e|0,r=Math.floor(86400*(e-a)),s=0,o=[],i={D:a,T:r,u:86400*(e-a)-r,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(i.u)<1e-6&&(i.u=0),t&&t.date1904&&(a+=1462),i.u>.9999&&(i.u=0,++r==86400&&(i.T=r=0,++a,++i.D)),a===60)o=n?[1317,10,29]:[1900,2,29],s=3;else if(a===0)o=n?[1317,8,29]:[1900,1,0],s=6;else{a>60&&--a;var c=new Date(1900,0,1);c.setDate(c.getDate()+a-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),a<60&&(s=(s+6)%7),n&&(s=tPe(c,o))}return i.y=o[0],i.m=o[1],i.d=o[2],i.S=r%60,r=Math.floor(r/60),i.M=r%60,r=Math.floor(r/60),i.H=r,i.q=s,i}var n$=new Date(1899,11,31,0,0,0),YFe=n$.getTime(),XFe=new Date(1900,2,1,0,0,0);function a$(e,t){var n=e.getTime();return t?n-=1461*24*60*60*1e3:e>=XFe&&(n+=1440*60*1e3),(n-(YFe+(e.getTimezoneOffset()-n$.getTimezoneOffset())*6e4))/(1440*60*1e3)}function UT(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function JFe(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function ZFe(e){var t=e<0?12:11,n=UT(e.toFixed(12));return n.length<=t||(n=e.toPrecision(10),n.length<=t)?n:e.toExponential(5)}function ePe(e){var t=UT(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function H0(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),n;return t>=-4&&t<=-1?n=e.toPrecision(10+t):Math.abs(t)<=9?n=ZFe(e):t===10?n=e.toFixed(10).substr(0,12):n=ePe(e),UT(JFe(n.toUpperCase()))}function Sf(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):H0(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return ll(14,a$(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function tPe(e,t){t[0]-=581;var n=e.getDay();return e<60&&(n=(n+6)%7),n}function nPe(e,t,n,a){var r="",s=0,o=0,i=n.y,c,A=0;switch(e){case 98:i=n.y+543;case 121:switch(t.length){case 1:case 2:c=i%100,A=2;break;default:c=i%1e4,A=4;break}break;case 109:switch(t.length){case 1:case 2:c=n.m,A=t.length;break;case 3:return FC[n.m-1][1];case 5:return FC[n.m-1][0];default:return FC[n.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=n.d,A=t.length;break;case 3:return CR[n.q][0];default:return CR[n.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(n.H+11)%12,A=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=n.H,A=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=n.M,A=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return n.u===0&&(t=="s"||t=="ss")?Rl(n.S,t.length):(a>=2?o=a===3?1e3:100:o=a===1?10:1,s=Math.round(o*(n.S+n.u)),s>=60*o&&(s=0),t==="s"?s===0?"0":""+s/o:(r=Rl(s,2+a),t==="ss"?r.substr(0,2):"."+r.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=n.D*24+n.H;break;case"[m]":case"[mm]":c=(n.D*24+n.H)*60+n.M;break;case"[s]":case"[ss]":c=((n.D*24+n.H)*60+n.M)*60+Math.round(n.S+n.u);break;default:throw"bad abstime format: "+t}A=t.length===3?1:2;break;case 101:c=i,A=1;break}var d=A>0?Rl(c,A):"";return d}function Fd(e){var t=3;if(e.length<=t)return e;for(var n=e.length%t,a=e.substr(0,n);n!=e.length;n+=t)a+=(a.length>0?",":"")+e.substr(n,t);return a}var r$=/%/g;function aPe(e,t,n){var a=t.replace(r$,""),r=t.length-a.length;return kc(e,a,n*Math.pow(10,2*r))+Rr("%",r)}function rPe(e,t,n){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return kc(e,t.substr(0,a),n/Math.pow(10,3*(t.length-a)))}function s$(e,t){var n,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+s$(e,-t);var r=e.indexOf(".");r===-1&&(r=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%r;if(s<0&&(s+=r),n=(t/Math.pow(10,s)).toPrecision(a+1+(r+s)%r),n.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(o-n.length+s):n+="E+"+(o-s);n.substr(0,2)==="0.";)n=n.charAt(0)+n.substr(2,r)+"."+n.substr(2+r),n=n.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(i,c,A,d){return c+A+d.substr(0,(r+s)%r)+"."+d.substr(s)+"E"})}else n=t.toExponential(a);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var o$=/# (\?+)( ?)\/( ?)(\d+)/;function sPe(e,t,n){var a=parseInt(e[4],10),r=Math.round(t*a),s=Math.floor(r/a),o=r-s*a,i=a;return n+(s===0?"":""+s)+" "+(o===0?Rr(" ",e[1].length+1+e[4].length):DT(o,e[1].length)+e[2]+"/"+e[3]+Rl(i,e[4].length))}function oPe(e,t,n){return n+(t===0?"":""+t)+Rr(" ",e[1].length+2+e[4].length)}var i$=/^#*0*\.([0#]+)/,l$=/\).*[0#]/,u$=/\(###\) ###\\?-####/;function Ro(e){for(var t="",n,a=0;a!=e.length;++a)switch(n=e.charCodeAt(a)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(n)}return t}function ER(e,t){var n=Math.pow(10,t);return""+Math.round(e*n)/n}function BR(e,t){var n=e-Math.floor(e),a=Math.pow(10,t);return t<(""+Math.round(n*a)).length?0:Math.round(n*a)}function iPe(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function lPe(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Yi(e,t,n){if(e.charCodeAt(0)===40&&!t.match(l$)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?Yi("n",a,n):"("+Yi("n",a,-n)+")"}if(t.charCodeAt(t.length-1)===44)return rPe(e,t,n);if(t.indexOf("%")!==-1)return aPe(e,t,n);if(t.indexOf("E")!==-1)return s$(t,n);if(t.charCodeAt(0)===36)return"$"+Yi(e,t.substr(t.charAt(1)==" "?2:1),n);var r,s,o,i,c=Math.abs(n),A=n<0?"-":"";if(t.match(/^00+$/))return A+Qm(c,t.length);if(t.match(/^[#?]+$/))return r=Qm(n,0),r==="0"&&(r=""),r.length>t.length?r:Ro(t.substr(0,t.length-r.length))+r;if(s=t.match(o$))return sPe(s,c,A);if(t.match(/^#+0+$/))return A+Qm(c,t.length-t.indexOf("0"));if(s=t.match(i$))return r=ER(n,s[1].length).replace(/^([^\.]+)$/,"$1."+Ro(s[1])).replace(/\.$/,"."+Ro(s[1])).replace(/\.(\d*)$/,function(p,y){return"."+y+Rr("0",Ro(s[1]).length-y.length)}),t.indexOf("0.")!==-1?r:r.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return A+ER(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return A+Fd(Qm(c,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+Yi(e,t,-n):Fd(""+(Math.floor(n)+iPe(n,s[1].length)))+"."+Rl(BR(n,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return Yi(e,t.replace(/^#,#*,/,""),n);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return r=bv(Yi(e,t.replace(/[\\-]/g,""),n)),o=0,bv(bv(t.replace(/\\/g,"")).replace(/[0#]/g,function(p){return o<r.length?r.charAt(o++):p==="0"?"0":""}));if(t.match(u$))return r=Yi(e,"##########",n),"("+r.substr(0,3)+") "+r.substr(3,3)+"-"+r.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),i=m2(c,Math.pow(10,o)-1,!1),r=""+A,d=kc("n",s[1],i[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),r+=d+s[2]+"/"+s[3],d=A2(i[2],o),d.length<s[4].length&&(d=Ro(s[4].substr(s[4].length-d.length))+d),r+=d,r;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),i=m2(c,Math.pow(10,o)-1,!0),A+(i[0]||(i[1]?"":"0"))+" "+(i[1]?DT(i[1],o)+s[2]+"/"+s[3]+A2(i[2],o):Rr(" ",2*o+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return r=Qm(n,0),t.length<=r.length?r:Ro(t.substr(0,t.length-r.length))+r;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){r=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=r.indexOf(".");var f=t.indexOf(".")-o,m=t.length-r.length-f;return Ro(t.substr(0,f)+r+t.substr(t.length-m))}if(s=t.match(/^00,000\.([#0]*0)$/))return o=BR(n,s[1].length),n<0?"-"+Yi(e,t,-n):Fd(lPe(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(p){return"00,"+(p.length<3?Rl(0,3-p.length):"")+p})+"."+Rl(o,s[1].length);switch(t){case"###,##0.00":return Yi(e,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var h=Fd(Qm(c,0));return h!=="0"?A+h:"";case"###,###.00":return Yi(e,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return Yi(e,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function uPe(e,t,n){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return kc(e,t.substr(0,a),n/Math.pow(10,3*(t.length-a)))}function cPe(e,t,n){var a=t.replace(r$,""),r=t.length-a.length;return kc(e,a,n*Math.pow(10,2*r))+Rr("%",r)}function c$(e,t){var n,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+c$(e,-t);var r=e.indexOf(".");r===-1&&(r=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%r;if(s<0&&(s+=r),n=(t/Math.pow(10,s)).toPrecision(a+1+(r+s)%r),!n.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(o-n.length+s):n+="E+"+(o-s),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(i,c,A,d){return c+A+d.substr(0,(r+s)%r)+"."+d.substr(s)+"E"})}else n=t.toExponential(a);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function _u(e,t,n){if(e.charCodeAt(0)===40&&!t.match(l$)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?_u("n",a,n):"("+_u("n",a,-n)+")"}if(t.charCodeAt(t.length-1)===44)return uPe(e,t,n);if(t.indexOf("%")!==-1)return cPe(e,t,n);if(t.indexOf("E")!==-1)return c$(t,n);if(t.charCodeAt(0)===36)return"$"+_u(e,t.substr(t.charAt(1)==" "?2:1),n);var r,s,o,i,c=Math.abs(n),A=n<0?"-":"";if(t.match(/^00+$/))return A+Rl(c,t.length);if(t.match(/^[#?]+$/))return r=""+n,n===0&&(r=""),r.length>t.length?r:Ro(t.substr(0,t.length-r.length))+r;if(s=t.match(o$))return oPe(s,c,A);if(t.match(/^#+0+$/))return A+Rl(c,t.length-t.indexOf("0"));if(s=t.match(i$))return r=(""+n).replace(/^([^\.]+)$/,"$1."+Ro(s[1])).replace(/\.$/,"."+Ro(s[1])),r=r.replace(/\.(\d*)$/,function(p,y){return"."+y+Rr("0",Ro(s[1]).length-y.length)}),t.indexOf("0.")!==-1?r:r.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return A+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return A+Fd(""+c);if(s=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+_u(e,t,-n):Fd(""+n)+"."+Rr("0",s[1].length);if(s=t.match(/^#,#*,#0/))return _u(e,t.replace(/^#,#*,/,""),n);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return r=bv(_u(e,t.replace(/[\\-]/g,""),n)),o=0,bv(bv(t.replace(/\\/g,"")).replace(/[0#]/g,function(p){return o<r.length?r.charAt(o++):p==="0"?"0":""}));if(t.match(u$))return r=_u(e,"##########",n),"("+r.substr(0,3)+") "+r.substr(3,3)+"-"+r.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),i=m2(c,Math.pow(10,o)-1,!1),r=""+A,d=kc("n",s[1],i[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),r+=d+s[2]+"/"+s[3],d=A2(i[2],o),d.length<s[4].length&&(d=Ro(s[4].substr(s[4].length-d.length))+d),r+=d,r;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),i=m2(c,Math.pow(10,o)-1,!0),A+(i[0]||(i[1]?"":"0"))+" "+(i[1]?DT(i[1],o)+s[2]+"/"+s[3]+A2(i[2],o):Rr(" ",2*o+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return r=""+n,t.length<=r.length?r:Ro(t.substr(0,t.length-r.length))+r;if(s=t.match(/^([#0]+)\.([#0]+)$/)){r=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=r.indexOf(".");var f=t.indexOf(".")-o,m=t.length-r.length-f;return Ro(t.substr(0,f)+r+t.substr(t.length-m))}if(s=t.match(/^00,000\.([#0]*0)$/))return n<0?"-"+_u(e,t,-n):Fd(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(p){return"00,"+(p.length<3?Rl(0,3-p.length):"")+p})+"."+Rl(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var h=Fd(""+c);return h!=="0"?A+h:"";default:if(t.match(/\.[0#?]*$/))return _u(e,t.slice(0,t.lastIndexOf(".")),n)+Ro(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function kc(e,t,n){return(n|0)===n?_u(e,t,n):Yi(e,t,n)}function dPe(e){for(var t=[],n=!1,a=0,r=0;a<e.length;++a)switch(e.charCodeAt(a)){case 34:n=!n;break;case 95:case 42:case 92:++a;break;case 59:t[t.length]=e.substr(r,a-r),r=a+1}if(t[t.length]=e.substr(r),n===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var d$=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function wh(e){for(var t=0,n="",a="";t<e.length;)switch(n=e.charAt(t)){case"G":f2(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(a=n;e.charAt(t++)!=="]"&&t<e.length;)a+=e.charAt(t);if(a.match(d$))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(n=e.charAt(++t))>-1||n=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===n;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function APe(e,t,n,a){for(var r=[],s="",o=0,i="",c="t",A,d,f,m="H";o<e.length;)switch(i=e.charAt(o)){case"G":if(!f2(e,o))throw new Error("unrecognized character "+i+" in "+e);r[r.length]={t:"G",v:"General"},o+=7;break;case'"':for(s="";(f=e.charCodeAt(++o))!==34&&o<e.length;)s+=String.fromCharCode(f);r[r.length]={t:"t",v:s},++o;break;case"\\":var h=e.charAt(++o),p=h==="("||h===")"?h:"t";r[r.length]={t:p,v:h},++o;break;case"_":r[r.length]={t:"t",v:" "},o+=2;break;case"@":r[r.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(A==null&&(A=YA(t,n,e.charAt(o+1)==="2"),A==null))return"";r[r.length]={t:"X",v:e.substr(o,2)},c=i,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":i=i.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||A==null&&(A=YA(t,n),A==null))return"";for(s=i;++o<e.length&&e.charAt(o).toLowerCase()===i;)s+=i;i==="m"&&c.toLowerCase()==="h"&&(i="M"),i==="h"&&(i=m),r[r.length]={t:i,v:s},c=i;break;case"A":case"a":case"":var y={t:i,v:i};if(A==null&&(A=YA(t,n)),e.substr(o,3).toUpperCase()==="A/P"?(A!=null&&(y.v=A.H>=12?"P":"A"),y.t="T",m="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(A!=null&&(y.v=A.H>=12?"PM":"AM"),y.t="T",o+=5,m="h"):e.substr(o,5).toUpperCase()==="/"?(A!=null&&(y.v=A.H>=12?"":""),y.t="T",o+=5,m="h"):(y.t="t",++o),A==null&&y.t==="T")return"";r[r.length]=y,c=i;break;case"[":for(s=i;e.charAt(o++)!=="]"&&o<e.length;)s+=e.charAt(o);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(d$)){if(A==null&&(A=YA(t,n),A==null))return"";r[r.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",wh(e)||(r[r.length]={t:"t",v:s}));break;case".":if(A!=null){for(s=i;++o<e.length&&(i=e.charAt(o))==="0";)s+=i;r[r.length]={t:"s",v:s};break}case"0":case"#":for(s=i;++o<e.length&&"0#?.,E+-%".indexOf(i=e.charAt(o))>-1;)s+=i;r[r.length]={t:"n",v:s};break;case"?":for(s=i;e.charAt(++o)===i;)s+=i;r[r.length]={t:i,v:s},c=i;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":r[r.length]={t:a===1?"t":i,v:i},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=i;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)s+=e.charAt(o);r[r.length]={t:"D",v:s};break;case" ":r[r.length]={t:i,v:i},++o;break;case"$":r[r.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(i)===-1)throw new Error("unrecognized character "+i+" in "+e);r[r.length]={t:"t",v:i},++o;break}var g=0,w=0,b;for(o=r.length-1,c="t";o>=0;--o)switch(r[o].t){case"h":case"H":r[o].t=m,c="h",g<1&&(g=1);break;case"s":(b=r[o].v.match(/\.0+$/))&&(w=Math.max(w,b[0].length-1)),g<3&&(g=3);case"d":case"y":case"M":case"e":c=r[o].t;break;case"m":c==="s"&&(r[o].t="M",g<2&&(g=2));break;case"X":break;case"Z":g<1&&r[o].v.match(/[Hh]/)&&(g=1),g<2&&r[o].v.match(/[Mm]/)&&(g=2),g<3&&r[o].v.match(/[Ss]/)&&(g=3)}switch(g){case 0:break;case 1:A.u>=.5&&(A.u=0,++A.S),A.S>=60&&(A.S=0,++A.M),A.M>=60&&(A.M=0,++A.H);break;case 2:A.u>=.5&&(A.u=0,++A.S),A.S>=60&&(A.S=0,++A.M);break}var x="",T;for(o=0;o<r.length;++o)switch(r[o].t){case"t":case"T":case" ":case"D":break;case"X":r[o].v="",r[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":r[o].v=nPe(r[o].t.charCodeAt(0),r[o].v,A,w),r[o].t="t";break;case"n":case"?":for(T=o+1;r[T]!=null&&((i=r[T].t)==="?"||i==="D"||(i===" "||i==="t")&&r[T+1]!=null&&(r[T+1].t==="?"||r[T+1].t==="t"&&r[T+1].v==="/")||r[o].t==="("&&(i===" "||i==="n"||i===")")||i==="t"&&(r[T].v==="/"||r[T].v===" "&&r[T+1]!=null&&r[T+1].t=="?"));)r[o].v+=r[T].v,r[T]={v:"",t:";"},++T;x+=r[o].v,o=T-1;break;case"G":r[o].t="t",r[o].v=Sf(t,n);break}var F="",k,S;if(x.length>0){x.charCodeAt(0)==40?(k=t<0&&x.charCodeAt(0)===45?-t:t,S=kc("n",x,k)):(k=t<0&&a>1?-t:t,S=kc("n",x,k),k<0&&r[0]&&r[0].t=="t"&&(S=S.substr(1),r[0].v="-"+r[0].v)),T=S.length-1;var E=r.length;for(o=0;o<r.length;++o)if(r[o]!=null&&r[o].t!="t"&&r[o].v.indexOf(".")>-1){E=o;break}var C=r.length;if(E===r.length&&S.indexOf("E")===-1){for(o=r.length-1;o>=0;--o)r[o]==null||"n?".indexOf(r[o].t)===-1||(T>=r[o].v.length-1?(T-=r[o].v.length,r[o].v=S.substr(T+1,r[o].v.length)):T<0?r[o].v="":(r[o].v=S.substr(0,T+1),T=-1),r[o].t="t",C=o);T>=0&&C<r.length&&(r[C].v=S.substr(0,T+1)+r[C].v)}else if(E!==r.length&&S.indexOf("E")===-1){for(T=S.indexOf(".")-1,o=E;o>=0;--o)if(!(r[o]==null||"n?".indexOf(r[o].t)===-1)){for(d=r[o].v.indexOf(".")>-1&&o===E?r[o].v.indexOf(".")-1:r[o].v.length-1,F=r[o].v.substr(d+1);d>=0;--d)T>=0&&(r[o].v.charAt(d)==="0"||r[o].v.charAt(d)==="#")&&(F=S.charAt(T--)+F);r[o].v=F,r[o].t="t",C=o}for(T>=0&&C<r.length&&(r[C].v=S.substr(0,T+1)+r[C].v),T=S.indexOf(".")+1,o=E;o<r.length;++o)if(!(r[o]==null||"n?(".indexOf(r[o].t)===-1&&o!==E)){for(d=r[o].v.indexOf(".")>-1&&o===E?r[o].v.indexOf(".")+1:0,F=r[o].v.substr(0,d);d<r[o].v.length;++d)T<S.length&&(F+=S.charAt(T++));r[o].v=F,r[o].t="t",C=o}}}for(o=0;o<r.length;++o)r[o]!=null&&"n?".indexOf(r[o].t)>-1&&(k=a>1&&t<0&&o>0&&r[o-1].v==="-"?-t:t,r[o].v=kc(r[o].t,r[o].v,k),r[o].t="t");var D="";for(o=0;o!==r.length;++o)r[o]!=null&&(D+=r[o].v);return D}var kR=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function TR(e,t){if(t==null)return!1;var n=parseFloat(t[2]);switch(t[1]){case"=":if(e==n)return!0;break;case">":if(e>n)return!0;break;case"<":if(e<n)return!0;break;case"<>":if(e!=n)return!0;break;case">=":if(e>=n)return!0;break;case"<=":if(e<=n)return!0;break}return!1}function fPe(e,t){var n=dPe(e),a=n.length,r=n[a-1].indexOf("@");if(a<4&&r>-1&&--a,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if(typeof t!="number")return[4,n.length===4||r>-1?n[n.length-1]:"@"];switch(n.length){case 1:n=r>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=r>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=r>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"];break}var s=t>0?n[0]:t<0?n[1]:n[2];if(n[0].indexOf("[")===-1&&n[1].indexOf("[")===-1)return[a,s];if(n[0].match(/\[[=<>]/)!=null||n[1].match(/\[[=<>]/)!=null){var o=n[0].match(kR),i=n[1].match(kR);return TR(t,o)?[a,n[0]]:TR(t,i)?[a,n[1]]:[a,n[o!=null&&i!=null?2:1]]}return[a,s]}function ll(e,t,n){n==null&&(n={});var a="";switch(typeof e){case"string":e=="m/d/yy"&&n.dateNF?a=n.dateNF:a=e;break;case"number":e==14&&n.dateNF?a=n.dateNF:a=(n.table!=null?n.table:ea)[e],a==null&&(a=n.table&&n.table[SR[e]]||ea[SR[e]]),a==null&&(a=qFe[e]||"General");break}if(f2(a,0))return Sf(t,n);t instanceof Date&&(t=a$(t,n.date1904));var r=fPe(a,t);if(f2(r[1]))return Sf(t,n);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return APe(r[1],t,n,r[0])}function cf(e,t){if(typeof t!="number"){t=+t||-1;for(var n=0;n<392;++n){if(ea[n]==null){t<0&&(t=n);continue}if(ea[n]==e){t=n;break}}t<0&&(t=391)}return ea[t]=e,t}function A$(){ea=jFe()}var mPe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},f$=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function vPe(e){var t=typeof e=="number"?ea[e]:e;return t=t.replace(f$,"(\\d+)"),new RegExp("^"+t+"$")}function hPe(e,t,n){var a=-1,r=-1,s=-1,o=-1,i=-1,c=-1;(t.match(f$)||[]).forEach(function(f,m){var h=parseInt(n[m+1],10);switch(f.toLowerCase().charAt(0)){case"y":a=h;break;case"d":s=h;break;case"h":o=h;break;case"s":c=h;break;case"m":o>=0?i=h:r=h;break}}),c>=0&&i==-1&&r>=0&&(i=r,r=-1);var A=(""+(a>=0?a:new Date().getFullYear())).slice(-4)+"-"+("00"+(r>=1?r:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);A.length==7&&(A="0"+A),A.length==8&&(A="20"+A);var d=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&i==-1&&c==-1?A:a==-1&&r==-1&&s==-1?d:A+"T"+d}var pPe=(function(){var e={};e.version="1.2.0";function t(){for(var S=0,E=new Array(256),C=0;C!=256;++C)S=C,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,E[C]=S;return typeof Int32Array<"u"?new Int32Array(E):E}var n=t();function a(S){var E=0,C=0,D=0,P=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(D=0;D!=256;++D)P[D]=S[D];for(D=0;D!=256;++D)for(C=S[D],E=256+D;E<4096;E+=256)C=P[E]=C>>>8^S[C&255];var O=[];for(D=1;D!=16;++D)O[D-1]=typeof Int32Array<"u"?P.subarray(D*256,D*256+256):P.slice(D*256,D*256+256);return O}var r=a(n),s=r[0],o=r[1],i=r[2],c=r[3],A=r[4],d=r[5],f=r[6],m=r[7],h=r[8],p=r[9],y=r[10],g=r[11],w=r[12],b=r[13],x=r[14];function T(S,E){for(var C=E^-1,D=0,P=S.length;D<P;)C=C>>>8^n[(C^S.charCodeAt(D++))&255];return~C}function F(S,E){for(var C=E^-1,D=S.length-15,P=0;P<D;)C=x[S[P++]^C&255]^b[S[P++]^C>>8&255]^w[S[P++]^C>>16&255]^g[S[P++]^C>>>24]^y[S[P++]]^p[S[P++]]^h[S[P++]]^m[S[P++]]^f[S[P++]]^d[S[P++]]^A[S[P++]]^c[S[P++]]^i[S[P++]]^o[S[P++]]^s[S[P++]]^n[S[P++]];for(D+=15;P<D;)C=C>>>8^n[(C^S[P++])&255];return~C}function k(S,E){for(var C=E^-1,D=0,P=S.length,O=0,H=0;D<P;)O=S.charCodeAt(D++),O<128?C=C>>>8^n[(C^O)&255]:O<2048?(C=C>>>8^n[(C^(192|O>>6&31))&255],C=C>>>8^n[(C^(128|O&63))&255]):O>=55296&&O<57344?(O=(O&1023)+64,H=S.charCodeAt(D++)&1023,C=C>>>8^n[(C^(240|O>>8&7))&255],C=C>>>8^n[(C^(128|O>>2&63))&255],C=C>>>8^n[(C^(128|H>>6&15|(O&3)<<4))&255],C=C>>>8^n[(C^(128|H&63))&255]):(C=C>>>8^n[(C^(224|O>>12&15))&255],C=C>>>8^n[(C^(128|O>>6&63))&255],C=C>>>8^n[(C^(128|O&63))&255]);return~C}return e.table=n,e.bstr=T,e.buf=F,e.str=k,e})(),ba=(function(){var t={};t.version="1.2.1";function n(Be,Qe){for(var ke=Be.split("/"),Ve=Qe.split("/"),ze=0,je=0,oe=Math.min(ke.length,Ve.length);ze<oe;++ze){if(je=ke[ze].length-Ve[ze].length)return je;if(ke[ze]!=Ve[ze])return ke[ze]<Ve[ze]?-1:1}return ke.length-Ve.length}function a(Be){if(Be.charAt(Be.length-1)=="/")return Be.slice(0,-1).indexOf("/")===-1?Be:a(Be.slice(0,-1));var Qe=Be.lastIndexOf("/");return Qe===-1?Be:Be.slice(0,Qe+1)}function r(Be){if(Be.charAt(Be.length-1)=="/")return r(Be.slice(0,-1));var Qe=Be.lastIndexOf("/");return Qe===-1?Be:Be.slice(Qe+1)}function s(Be,Qe){typeof Qe=="string"&&(Qe=new Date(Qe));var ke=Qe.getHours();ke=ke<<6|Qe.getMinutes(),ke=ke<<5|Qe.getSeconds()>>>1,Be.write_shift(2,ke);var Ve=Qe.getFullYear()-1980;Ve=Ve<<4|Qe.getMonth()+1,Ve=Ve<<5|Qe.getDate(),Be.write_shift(2,Ve)}function o(Be){var Qe=Be.read_shift(2)&65535,ke=Be.read_shift(2)&65535,Ve=new Date,ze=ke&31;ke>>>=5;var je=ke&15;ke>>>=4,Ve.setMilliseconds(0),Ve.setFullYear(ke+1980),Ve.setMonth(je-1),Ve.setDate(ze);var oe=Qe&31;Qe>>>=5;var se=Qe&63;return Qe>>>=6,Ve.setHours(Qe),Ve.setMinutes(se),Ve.setSeconds(oe<<1),Ve}function i(Be){Gs(Be,0);for(var Qe={},ke=0;Be.l<=Be.length-4;){var Ve=Be.read_shift(2),ze=Be.read_shift(2),je=Be.l+ze,oe={};switch(Ve){case 21589:ke=Be.read_shift(1),ke&1&&(oe.mtime=Be.read_shift(4)),ze>5&&(ke&2&&(oe.atime=Be.read_shift(4)),ke&4&&(oe.ctime=Be.read_shift(4))),oe.mtime&&(oe.mt=new Date(oe.mtime*1e3));break}Be.l=je,Qe[Ve]=oe}return Qe}var c;function A(){return c||(c={})}function d(Be,Qe){if(Be[0]==80&&Be[1]==75)return ut(Be,Qe);if((Be[0]|32)==109&&(Be[1]|32)==105)return Bt(Be,Qe);if(Be.length<512)throw new Error("CFB file size "+Be.length+" < 512");var ke=3,Ve=512,ze=0,je=0,oe=0,se=0,be=0,Fe=[],at=Be.slice(0,512);Gs(at,0);var rt=f(at);switch(ke=rt[0],ke){case 3:Ve=512;break;case 4:Ve=4096;break;case 0:if(rt[1]==0)return ut(Be,Qe);default:throw new Error("Major Version: Expected 3 or 4 saw "+ke)}Ve!==512&&(at=Be.slice(0,Ve),Gs(at,28));var qe=Be.slice(0,Ve);m(at,ke);var At=at.read_shift(4,"i");if(ke===3&&At!==0)throw new Error("# Directory Sectors: Expected 0 saw "+At);at.l+=4,oe=at.read_shift(4,"i"),at.l+=4,at.chk("00100000","Mini Stream Cutoff Size: "),se=at.read_shift(4,"i"),ze=at.read_shift(4,"i"),be=at.read_shift(4,"i"),je=at.read_shift(4,"i");for(var Ut=-1,ft=0;ft<109&&(Ut=at.read_shift(4,"i"),!(Ut<0));++ft)Fe[ft]=Ut;var en=h(Be,Ve);g(be,je,en,Ve,Fe);var Jt=b(en,oe,Fe,Ve);Jt[oe].name="!Directory",ze>0&&se!==H&&(Jt[se].name="!MiniFAT"),Jt[Fe[0]].name="!FAT",Jt.fat_addrs=Fe,Jt.ssz=Ve;var wn={},yn=[],Pa=[],Or=[];x(oe,Jt,en,yn,ze,wn,Pa,se),p(Pa,Or,yn),yn.shift();var Hr={FileIndex:Pa,FullPaths:Or};return Qe&&Qe.raw&&(Hr.raw={header:qe,sectors:en}),Hr}function f(Be){if(Be[Be.l]==80&&Be[Be.l+1]==75)return[0,0];Be.chk(ie,"Header Signature: "),Be.l+=16;var Qe=Be.read_shift(2,"u");return[Be.read_shift(2,"u"),Qe]}function m(Be,Qe){var ke=9;switch(Be.l+=2,ke=Be.read_shift(2)){case 9:if(Qe!=3)throw new Error("Sector Shift: Expected 9 saw "+ke);break;case 12:if(Qe!=4)throw new Error("Sector Shift: Expected 12 saw "+ke);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+ke)}Be.chk("0600","Mini Sector Shift: "),Be.chk("000000000000","Reserved: ")}function h(Be,Qe){for(var ke=Math.ceil(Be.length/Qe)-1,Ve=[],ze=1;ze<ke;++ze)Ve[ze-1]=Be.slice(ze*Qe,(ze+1)*Qe);return Ve[ke-1]=Be.slice(ke*Qe),Ve}function p(Be,Qe,ke){for(var Ve=0,ze=0,je=0,oe=0,se=0,be=ke.length,Fe=[],at=[];Ve<be;++Ve)Fe[Ve]=at[Ve]=Ve,Qe[Ve]=ke[Ve];for(;se<at.length;++se)Ve=at[se],ze=Be[Ve].L,je=Be[Ve].R,oe=Be[Ve].C,Fe[Ve]===Ve&&(ze!==-1&&Fe[ze]!==ze&&(Fe[Ve]=Fe[ze]),je!==-1&&Fe[je]!==je&&(Fe[Ve]=Fe[je])),oe!==-1&&(Fe[oe]=Ve),ze!==-1&&Ve!=Fe[Ve]&&(Fe[ze]=Fe[Ve],at.lastIndexOf(ze)<se&&at.push(ze)),je!==-1&&Ve!=Fe[Ve]&&(Fe[je]=Fe[Ve],at.lastIndexOf(je)<se&&at.push(je));for(Ve=1;Ve<be;++Ve)Fe[Ve]===Ve&&(je!==-1&&Fe[je]!==je?Fe[Ve]=Fe[je]:ze!==-1&&Fe[ze]!==ze&&(Fe[Ve]=Fe[ze]));for(Ve=1;Ve<be;++Ve)if(Be[Ve].type!==0){if(se=Ve,se!=Fe[se])do se=Fe[se],Qe[Ve]=Qe[se]+"/"+Qe[Ve];while(se!==0&&Fe[se]!==-1&&se!=Fe[se]);Fe[Ve]=-1}for(Qe[0]+="/",Ve=1;Ve<be;++Ve)Be[Ve].type!==2&&(Qe[Ve]+="/")}function y(Be,Qe,ke){for(var Ve=Be.start,ze=Be.size,je=[],oe=Ve;ke&&ze>0&&oe>=0;)je.push(Qe.slice(oe*O,oe*O+O)),ze-=O,oe=$A(ke,oe*4);return je.length===0?gs(0):Ed(je).slice(0,Be.size)}function g(Be,Qe,ke,Ve,ze){var je=H;if(Be===H){if(Qe!==0)throw new Error("DIFAT chain shorter than expected")}else if(Be!==-1){var oe=ke[Be],se=(Ve>>>2)-1;if(!oe)return;for(var be=0;be<se&&(je=$A(oe,be*4))!==H;++be)ze.push(je);g($A(oe,Ve-4),Qe-1,ke,Ve,ze)}}function w(Be,Qe,ke,Ve,ze){var je=[],oe=[];ze||(ze=[]);var se=Ve-1,be=0,Fe=0;for(be=Qe;be>=0;){ze[be]=!0,je[je.length]=be,oe.push(Be[be]);var at=ke[Math.floor(be*4/Ve)];if(Fe=be*4&se,Ve<4+Fe)throw new Error("FAT boundary crossed: "+be+" 4 "+Ve);if(!Be[at])break;be=$A(Be[at],Fe)}return{nodes:je,data:MR([oe])}}function b(Be,Qe,ke,Ve){var ze=Be.length,je=[],oe=[],se=[],be=[],Fe=Ve-1,at=0,rt=0,qe=0,At=0;for(at=0;at<ze;++at)if(se=[],qe=at+Qe,qe>=ze&&(qe-=ze),!oe[qe]){be=[];var Ut=[];for(rt=qe;rt>=0;){Ut[rt]=!0,oe[rt]=!0,se[se.length]=rt,be.push(Be[rt]);var ft=ke[Math.floor(rt*4/Ve)];if(At=rt*4&Fe,Ve<4+At)throw new Error("FAT boundary crossed: "+rt+" 4 "+Ve);if(!Be[ft]||(rt=$A(Be[ft],At),Ut[rt]))break}je[qe]={nodes:se,data:MR([be])}}return je}function x(Be,Qe,ke,Ve,ze,je,oe,se){for(var be=0,Fe=Ve.length?2:0,at=Qe[Be].data,rt=0,qe=0,At;rt<at.length;rt+=128){var Ut=at.slice(rt,rt+128);Gs(Ut,64),qe=Ut.read_shift(2),At=MT(Ut,0,qe-Fe),Ve.push(At);var ft={name:At,type:Ut.read_shift(1),color:Ut.read_shift(1),L:Ut.read_shift(4,"i"),R:Ut.read_shift(4,"i"),C:Ut.read_shift(4,"i"),clsid:Ut.read_shift(16),state:Ut.read_shift(4,"i"),start:0,size:0},en=Ut.read_shift(2)+Ut.read_shift(2)+Ut.read_shift(2)+Ut.read_shift(2);en!==0&&(ft.ct=T(Ut,Ut.l-8));var Jt=Ut.read_shift(2)+Ut.read_shift(2)+Ut.read_shift(2)+Ut.read_shift(2);Jt!==0&&(ft.mt=T(Ut,Ut.l-8)),ft.start=Ut.read_shift(4,"i"),ft.size=Ut.read_shift(4,"i"),ft.size<0&&ft.start<0&&(ft.size=ft.type=0,ft.start=H,ft.name=""),ft.type===5?(be=ft.start,ze>0&&be!==H&&(Qe[be].name="!StreamData")):ft.size>=4096?(ft.storage="fat",Qe[ft.start]===void 0&&(Qe[ft.start]=w(ke,ft.start,Qe.fat_addrs,Qe.ssz)),Qe[ft.start].name=ft.name,ft.content=Qe[ft.start].data.slice(0,ft.size)):(ft.storage="minifat",ft.size<0?ft.size=0:be!==H&&ft.start!==H&&Qe[be]&&(ft.content=y(ft,Qe[be].data,(Qe[se]||{}).data))),ft.content&&Gs(ft.content,0),je[At]=ft,oe.push(ft)}}function T(Be,Qe){return new Date((Ci(Be,Qe+4)/1e7*Math.pow(2,32)+Ci(Be,Qe)/1e7-11644473600)*1e3)}function F(Be,Qe){return A(),d(c.readFileSync(Be),Qe)}function k(Be,Qe){var ke=Qe&&Qe.type;switch(ke||pa&&Buffer.isBuffer(Be)&&(ke="buffer"),ke||"base64"){case"file":return F(Be,Qe);case"base64":return d(Tl(Di(Be)),Qe);case"binary":return d(Tl(Be),Qe)}return d(Be,Qe)}function S(Be,Qe){var ke=Qe||{},Ve=ke.root||"Root Entry";if(Be.FullPaths||(Be.FullPaths=[]),Be.FileIndex||(Be.FileIndex=[]),Be.FullPaths.length!==Be.FileIndex.length)throw new Error("inconsistent CFB structure");Be.FullPaths.length===0&&(Be.FullPaths[0]=Ve+"/",Be.FileIndex[0]={name:Ve,type:5}),ke.CLSID&&(Be.FileIndex[0].clsid=ke.CLSID),E(Be)}function E(Be){var Qe="Sh33tJ5";if(!ba.find(Be,"/"+Qe)){var ke=gs(4);ke[0]=55,ke[1]=ke[3]=50,ke[2]=54,Be.FileIndex.push({name:Qe,type:2,content:ke,size:4,L:69,R:69,C:69}),Be.FullPaths.push(Be.FullPaths[0]+Qe),C(Be)}}function C(Be,Qe){S(Be);for(var ke=!1,Ve=!1,ze=Be.FullPaths.length-1;ze>=0;--ze){var je=Be.FileIndex[ze];switch(je.type){case 0:Ve?ke=!0:(Be.FileIndex.pop(),Be.FullPaths.pop());break;case 1:case 2:case 5:Ve=!0,isNaN(je.R*je.L*je.C)&&(ke=!0),je.R>-1&&je.L>-1&&je.R==je.L&&(ke=!0);break;default:ke=!0;break}}if(!(!ke&&!Qe)){var oe=new Date(1987,1,19),se=0,be=Object.create?Object.create(null):{},Fe=[];for(ze=0;ze<Be.FullPaths.length;++ze)be[Be.FullPaths[ze]]=!0,Be.FileIndex[ze].type!==0&&Fe.push([Be.FullPaths[ze],Be.FileIndex[ze]]);for(ze=0;ze<Fe.length;++ze){var at=a(Fe[ze][0]);Ve=be[at],Ve||(Fe.push([at,{name:r(at).replace("/",""),type:1,clsid:j,ct:oe,mt:oe,content:null}]),be[at]=!0)}for(Fe.sort(function(At,Ut){return n(At[0],Ut[0])}),Be.FullPaths=[],Be.FileIndex=[],ze=0;ze<Fe.length;++ze)Be.FullPaths[ze]=Fe[ze][0],Be.FileIndex[ze]=Fe[ze][1];for(ze=0;ze<Fe.length;++ze){var rt=Be.FileIndex[ze],qe=Be.FullPaths[ze];if(rt.name=r(qe).replace("/",""),rt.L=rt.R=rt.C=-(rt.color=1),rt.size=rt.content?rt.content.length:0,rt.start=0,rt.clsid=rt.clsid||j,ze===0)rt.C=Fe.length>1?1:-1,rt.size=0,rt.type=5;else if(qe.slice(-1)=="/"){for(se=ze+1;se<Fe.length&&a(Be.FullPaths[se])!=qe;++se);for(rt.C=se>=Fe.length?-1:se,se=ze+1;se<Fe.length&&a(Be.FullPaths[se])!=a(qe);++se);rt.R=se>=Fe.length?-1:se,rt.type=1}else a(Be.FullPaths[ze+1]||"")==a(qe)&&(rt.R=ze+1),rt.type=2}}}function D(Be,Qe){var ke=Qe||{};if(ke.fileType=="mad")return wt(Be,ke);switch(C(Be),ke.fileType){case"zip":return zt(Be,ke)}var Ve=(function(At){for(var Ut=0,ft=0,en=0;en<At.FileIndex.length;++en){var Jt=At.FileIndex[en];if(Jt.content){var wn=Jt.content.length;wn>0&&(wn<4096?Ut+=wn+63>>6:ft+=wn+511>>9)}}for(var yn=At.FullPaths.length+3>>2,Pa=Ut+7>>3,Or=Ut+127>>7,Hr=Pa+ft+yn+Or,Bs=Hr+127>>7,Ko=Bs<=109?0:Math.ceil((Bs-109)/127);Hr+Bs+Ko+127>>7>Bs;)Ko=++Bs<=109?0:Math.ceil((Bs-109)/127);var Er=[1,Ko,Bs,Or,yn,ft,Ut,0];return At.FileIndex[0].size=Ut<<6,Er[7]=(At.FileIndex[0].start=Er[0]+Er[1]+Er[2]+Er[3]+Er[4]+Er[5])+(Er[6]+7>>3),Er})(Be),ze=gs(Ve[7]<<9),je=0,oe=0;{for(je=0;je<8;++je)ze.write_shift(1,Ae[je]);for(je=0;je<8;++je)ze.write_shift(2,0);for(ze.write_shift(2,62),ze.write_shift(2,3),ze.write_shift(2,65534),ze.write_shift(2,9),ze.write_shift(2,6),je=0;je<3;++je)ze.write_shift(2,0);for(ze.write_shift(4,0),ze.write_shift(4,Ve[2]),ze.write_shift(4,Ve[0]+Ve[1]+Ve[2]+Ve[3]-1),ze.write_shift(4,0),ze.write_shift(4,4096),ze.write_shift(4,Ve[3]?Ve[0]+Ve[1]+Ve[2]-1:H),ze.write_shift(4,Ve[3]),ze.write_shift(-4,Ve[1]?Ve[0]-1:H),ze.write_shift(4,Ve[1]),je=0;je<109;++je)ze.write_shift(-4,je<Ve[2]?Ve[1]+je:-1)}if(Ve[1])for(oe=0;oe<Ve[1];++oe){for(;je<236+oe*127;++je)ze.write_shift(-4,je<Ve[2]?Ve[1]+je:-1);ze.write_shift(-4,oe===Ve[1]-1?H:oe+1)}var se=function(At){for(oe+=At;je<oe-1;++je)ze.write_shift(-4,je+1);At&&(++je,ze.write_shift(-4,H))};for(oe=je=0,oe+=Ve[1];je<oe;++je)ze.write_shift(-4,J.DIFSECT);for(oe+=Ve[2];je<oe;++je)ze.write_shift(-4,J.FATSECT);se(Ve[3]),se(Ve[4]);for(var be=0,Fe=0,at=Be.FileIndex[0];be<Be.FileIndex.length;++be)at=Be.FileIndex[be],at.content&&(Fe=at.content.length,!(Fe<4096)&&(at.start=oe,se(Fe+511>>9)));for(se(Ve[6]+7>>3);ze.l&511;)ze.write_shift(-4,J.ENDOFCHAIN);for(oe=je=0,be=0;be<Be.FileIndex.length;++be)at=Be.FileIndex[be],at.content&&(Fe=at.content.length,!(!Fe||Fe>=4096)&&(at.start=oe,se(Fe+63>>6)));for(;ze.l&511;)ze.write_shift(-4,J.ENDOFCHAIN);for(je=0;je<Ve[4]<<2;++je){var rt=Be.FullPaths[je];if(!rt||rt.length===0){for(be=0;be<17;++be)ze.write_shift(4,0);for(be=0;be<3;++be)ze.write_shift(4,-1);for(be=0;be<12;++be)ze.write_shift(4,0);continue}at=Be.FileIndex[je],je===0&&(at.start=at.size?at.start-1:H);var qe=je===0&&ke.root||at.name;if(Fe=2*(qe.length+1),ze.write_shift(64,qe,"utf16le"),ze.write_shift(2,Fe),ze.write_shift(1,at.type),ze.write_shift(1,at.color),ze.write_shift(-4,at.L),ze.write_shift(-4,at.R),ze.write_shift(-4,at.C),at.clsid)ze.write_shift(16,at.clsid,"hex");else for(be=0;be<4;++be)ze.write_shift(4,0);ze.write_shift(4,at.state||0),ze.write_shift(4,0),ze.write_shift(4,0),ze.write_shift(4,0),ze.write_shift(4,0),ze.write_shift(4,at.start),ze.write_shift(4,at.size),ze.write_shift(4,0)}for(je=1;je<Be.FileIndex.length;++je)if(at=Be.FileIndex[je],at.size>=4096)if(ze.l=at.start+1<<9,pa&&Buffer.isBuffer(at.content))at.content.copy(ze,ze.l,0,at.size),ze.l+=at.size+511&-512;else{for(be=0;be<at.size;++be)ze.write_shift(1,at.content[be]);for(;be&511;++be)ze.write_shift(1,0)}for(je=1;je<Be.FileIndex.length;++je)if(at=Be.FileIndex[je],at.size>0&&at.size<4096)if(pa&&Buffer.isBuffer(at.content))at.content.copy(ze,ze.l,0,at.size),ze.l+=at.size+63&-64;else{for(be=0;be<at.size;++be)ze.write_shift(1,at.content[be]);for(;be&63;++be)ze.write_shift(1,0)}if(pa)ze.l=ze.length;else for(;ze.l<ze.length;)ze.write_shift(1,0);return ze}function P(Be,Qe){var ke=Be.FullPaths.map(function(be){return be.toUpperCase()}),Ve=ke.map(function(be){var Fe=be.split("/");return Fe[Fe.length-(be.slice(-1)=="/"?2:1)]}),ze=!1;Qe.charCodeAt(0)===47?(ze=!0,Qe=ke[0].slice(0,-1)+Qe):ze=Qe.indexOf("/")!==-1;var je=Qe.toUpperCase(),oe=ze===!0?ke.indexOf(je):Ve.indexOf(je);if(oe!==-1)return Be.FileIndex[oe];var se=!je.match(Up);for(je=je.replace(Oo,""),se&&(je=je.replace(Up,"!")),oe=0;oe<ke.length;++oe)if((se?ke[oe].replace(Up,"!"):ke[oe]).replace(Oo,"")==je||(se?Ve[oe].replace(Up,"!"):Ve[oe]).replace(Oo,"")==je)return Be.FileIndex[oe];return null}var O=64,H=-2,ie="d0cf11e0a1b11ae1",Ae=[208,207,17,224,161,177,26,225],j="00000000000000000000000000000000",J={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:H,FREESECT:-1,HEADER_SIGNATURE:ie,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:j,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function ue(Be,Qe,ke){A();var Ve=D(Be,ke);c.writeFileSync(Qe,Ve)}function ne(Be){for(var Qe=new Array(Be.length),ke=0;ke<Be.length;++ke)Qe[ke]=String.fromCharCode(Be[ke]);return Qe.join("")}function Y(Be,Qe){var ke=D(Be,Qe);switch(Qe&&Qe.type||"buffer"){case"file":return A(),c.writeFileSync(Qe.filename,ke),ke;case"binary":return typeof ke=="string"?ke:ne(ke);case"base64":return wR(typeof ke=="string"?ke:ne(ke));case"buffer":if(pa)return Buffer.isBuffer(ke)?ke:Wf(ke);case"array":return typeof ke=="string"?Tl(ke):ke}return ke}var te;function L(Be){try{var Qe=Be.InflateRaw,ke=new Qe;if(ke._processChunk(new Uint8Array([3,0]),ke._finishFlushFlag),ke.bytesRead)te=Be;else throw new Error("zlib does not expose bytesRead")}catch(Ve){console.error("cannot use native zlib: "+(Ve.message||Ve))}}function N(Be,Qe){if(!te)return Lt(Be,Qe);var ke=te.InflateRaw,Ve=new ke,ze=Ve._processChunk(Be.slice(Be.l),Ve._finishFlushFlag);return Be.l+=Ve.bytesRead,ze}function q(Be){return te?te.deflateRawSync(Be):Pt(Be)}var Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ee=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],z=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function X(Be){var Qe=(Be<<1|Be<<11)&139536|(Be<<5|Be<<15)&558144;return(Qe>>16|Qe>>8|Qe)&255}for(var le=typeof Uint8Array<"u",re=le?new Uint8Array(256):[],de=0;de<256;++de)re[de]=X(de);function G(Be,Qe){var ke=re[Be&255];return Qe<=8?ke>>>8-Qe:(ke=ke<<8|re[Be>>8&255],Qe<=16?ke>>>16-Qe:(ke=ke<<8|re[Be>>16&255],ke>>>24-Qe))}function Z(Be,Qe){var ke=Qe&7,Ve=Qe>>>3;return(Be[Ve]|(ke<=6?0:Be[Ve+1]<<8))>>>ke&3}function ce(Be,Qe){var ke=Qe&7,Ve=Qe>>>3;return(Be[Ve]|(ke<=5?0:Be[Ve+1]<<8))>>>ke&7}function Se(Be,Qe){var ke=Qe&7,Ve=Qe>>>3;return(Be[Ve]|(ke<=4?0:Be[Ve+1]<<8))>>>ke&15}function Pe(Be,Qe){var ke=Qe&7,Ve=Qe>>>3;return(Be[Ve]|(ke<=3?0:Be[Ve+1]<<8))>>>ke&31}function ye(Be,Qe){var ke=Qe&7,Ve=Qe>>>3;return(Be[Ve]|(ke<=1?0:Be[Ve+1]<<8))>>>ke&127}function Ce(Be,Qe,ke){var Ve=Qe&7,ze=Qe>>>3,je=(1<<ke)-1,oe=Be[ze]>>>Ve;return ke<8-Ve||(oe|=Be[ze+1]<<8-Ve,ke<16-Ve)||(oe|=Be[ze+2]<<16-Ve,ke<24-Ve)||(oe|=Be[ze+3]<<24-Ve),oe&je}function _e(Be,Qe,ke){var Ve=Qe&7,ze=Qe>>>3;return Ve<=5?Be[ze]|=(ke&7)<<Ve:(Be[ze]|=ke<<Ve&255,Be[ze+1]=(ke&7)>>8-Ve),Qe+3}function De(Be,Qe,ke){var Ve=Qe&7,ze=Qe>>>3;return ke=(ke&1)<<Ve,Be[ze]|=ke,Qe+1}function xe(Be,Qe,ke){var Ve=Qe&7,ze=Qe>>>3;return ke<<=Ve,Be[ze]|=ke&255,ke>>>=8,Be[ze+1]=ke,Qe+8}function Te(Be,Qe,ke){var Ve=Qe&7,ze=Qe>>>3;return ke<<=Ve,Be[ze]|=ke&255,ke>>>=8,Be[ze+1]=ke&255,Be[ze+2]=ke>>>8,Qe+16}function Me(Be,Qe){var ke=Be.length,Ve=2*ke>Qe?2*ke:Qe+5,ze=0;if(ke>=Qe)return Be;if(pa){var je=bR(Ve);if(Be.copy)Be.copy(je);else for(;ze<Be.length;++ze)je[ze]=Be[ze];return je}else if(le){var oe=new Uint8Array(Ve);if(oe.set)oe.set(Be);else for(;ze<ke;++ze)oe[ze]=Be[ze];return oe}return Be.length=Ve,Be}function et(Be){for(var Qe=new Array(Be),ke=0;ke<Be;++ke)Qe[ke]=0;return Qe}function lt(Be,Qe,ke){var Ve=1,ze=0,je=0,oe=0,se=0,be=Be.length,Fe=le?new Uint16Array(32):et(32);for(je=0;je<32;++je)Fe[je]=0;for(je=be;je<ke;++je)Be[je]=0;be=Be.length;var at=le?new Uint16Array(be):et(be);for(je=0;je<be;++je)Fe[ze=Be[je]]++,Ve<ze&&(Ve=ze),at[je]=0;for(Fe[0]=0,je=1;je<=Ve;++je)Fe[je+16]=se=se+Fe[je-1]<<1;for(je=0;je<be;++je)se=Be[je],se!=0&&(at[je]=Fe[se+16]++);var rt=0;for(je=0;je<be;++je)if(rt=Be[je],rt!=0)for(se=G(at[je],Ve)>>Ve-rt,oe=(1<<Ve+4-rt)-1;oe>=0;--oe)Qe[se|oe<<rt]=rt&15|je<<4;return Ve}var Re=le?new Uint16Array(512):et(512),Le=le?new Uint16Array(32):et(32);if(!le){for(var nt=0;nt<512;++nt)Re[nt]=0;for(nt=0;nt<32;++nt)Le[nt]=0}(function(){for(var Be=[],Qe=0;Qe<32;Qe++)Be.push(5);lt(Be,Le,32);var ke=[];for(Qe=0;Qe<=143;Qe++)ke.push(8);for(;Qe<=255;Qe++)ke.push(9);for(;Qe<=279;Qe++)ke.push(7);for(;Qe<=287;Qe++)ke.push(8);lt(ke,Re,288)})();var Tt=(function(){for(var Qe=le?new Uint8Array(32768):[],ke=0,Ve=0;ke<z.length-1;++ke)for(;Ve<z[ke+1];++Ve)Qe[Ve]=ke;for(;Ve<32768;++Ve)Qe[Ve]=29;var ze=le?new Uint8Array(259):[];for(ke=0,Ve=0;ke<ee.length-1;++ke)for(;Ve<ee[ke+1];++Ve)ze[Ve]=ke;function je(se,be){for(var Fe=0;Fe<se.length;){var at=Math.min(65535,se.length-Fe),rt=Fe+at==se.length;for(be.write_shift(1,+rt),be.write_shift(2,at),be.write_shift(2,~at&65535);at-- >0;)be[be.l++]=se[Fe++]}return be.l}function oe(se,be){for(var Fe=0,at=0,rt=le?new Uint16Array(32768):[];at<se.length;){var qe=Math.min(65535,se.length-at);if(qe<10){for(Fe=_e(be,Fe,+(at+qe==se.length)),Fe&7&&(Fe+=8-(Fe&7)),be.l=Fe/8|0,be.write_shift(2,qe),be.write_shift(2,~qe&65535);qe-- >0;)be[be.l++]=se[at++];Fe=be.l*8;continue}Fe=_e(be,Fe,+(at+qe==se.length)+2);for(var At=0;qe-- >0;){var Ut=se[at];At=(At<<5^Ut)&32767;var ft=-1,en=0;if((ft=rt[At])&&(ft|=at&-32768,ft>at&&(ft-=32768),ft<at))for(;se[ft+en]==se[at+en]&&en<250;)++en;if(en>2){Ut=ze[en],Ut<=22?Fe=xe(be,Fe,re[Ut+1]>>1)-1:(xe(be,Fe,3),Fe+=5,xe(be,Fe,re[Ut-23]>>5),Fe+=3);var Jt=Ut<8?0:Ut-4>>2;Jt>0&&(Te(be,Fe,en-ee[Ut]),Fe+=Jt),Ut=Qe[at-ft],Fe=xe(be,Fe,re[Ut]>>3),Fe-=3;var wn=Ut<4?0:Ut-2>>1;wn>0&&(Te(be,Fe,at-ft-z[Ut]),Fe+=wn);for(var yn=0;yn<en;++yn)rt[At]=at&32767,At=(At<<5^se[at])&32767,++at;qe-=en-1}else Ut<=143?Ut=Ut+48:Fe=De(be,Fe,1),Fe=xe(be,Fe,re[Ut]),rt[At]=at&32767,++at}Fe=xe(be,Fe,0)-1}return be.l=(Fe+7)/8|0,be.l}return function(be,Fe){return be.length<8?je(be,Fe):oe(be,Fe)}})();function Pt(Be){var Qe=gs(50+Math.floor(Be.length*1.1)),ke=Tt(Be,Qe);return Qe.slice(0,ke)}var Kt=le?new Uint16Array(32768):et(32768),$t=le?new Uint16Array(32768):et(32768),bt=le?new Uint16Array(128):et(128),st=1,Je=1;function Nt(Be,Qe){var ke=Pe(Be,Qe)+257;Qe+=5;var Ve=Pe(Be,Qe)+1;Qe+=5;var ze=Se(Be,Qe)+4;Qe+=4;for(var je=0,oe=le?new Uint8Array(19):et(19),se=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],be=1,Fe=le?new Uint8Array(8):et(8),at=le?new Uint8Array(8):et(8),rt=oe.length,qe=0;qe<ze;++qe)oe[Q[qe]]=je=ce(Be,Qe),be<je&&(be=je),Fe[je]++,Qe+=3;var At=0;for(Fe[0]=0,qe=1;qe<=be;++qe)at[qe]=At=At+Fe[qe-1]<<1;for(qe=0;qe<rt;++qe)(At=oe[qe])!=0&&(se[qe]=at[At]++);var Ut=0;for(qe=0;qe<rt;++qe)if(Ut=oe[qe],Ut!=0){At=re[se[qe]]>>8-Ut;for(var ft=(1<<7-Ut)-1;ft>=0;--ft)bt[At|ft<<Ut]=Ut&7|qe<<3}var en=[];for(be=1;en.length<ke+Ve;)switch(At=bt[ye(Be,Qe)],Qe+=At&7,At>>>=3){case 16:for(je=3+Z(Be,Qe),Qe+=2,At=en[en.length-1];je-- >0;)en.push(At);break;case 17:for(je=3+ce(Be,Qe),Qe+=3;je-- >0;)en.push(0);break;case 18:for(je=11+ye(Be,Qe),Qe+=7;je-- >0;)en.push(0);break;default:en.push(At),be<At&&(be=At);break}var Jt=en.slice(0,ke),wn=en.slice(ke);for(qe=ke;qe<286;++qe)Jt[qe]=0;for(qe=Ve;qe<30;++qe)wn[qe]=0;return st=lt(Jt,Kt,286),Je=lt(wn,$t,30),Qe}function rn(Be,Qe){if(Be[0]==3&&!(Be[1]&3))return[eA(Qe),2];for(var ke=0,Ve=0,ze=bR(Qe||1<<18),je=0,oe=ze.length>>>0,se=0,be=0;(Ve&1)==0;){if(Ve=ce(Be,ke),ke+=3,Ve>>>1)Ve>>1==1?(se=9,be=5):(ke=Nt(Be,ke),se=st,be=Je);else{ke&7&&(ke+=8-(ke&7));var Fe=Be[ke>>>3]|Be[(ke>>>3)+1]<<8;if(ke+=32,Fe>0)for(!Qe&&oe<je+Fe&&(ze=Me(ze,je+Fe),oe=ze.length);Fe-- >0;)ze[je++]=Be[ke>>>3],ke+=8;continue}for(;;){!Qe&&oe<je+32767&&(ze=Me(ze,je+32767),oe=ze.length);var at=Ce(Be,ke,se),rt=Ve>>>1==1?Re[at]:Kt[at];if(ke+=rt&15,rt>>>=4,(rt>>>8&255)===0)ze[je++]=rt;else{if(rt==256)break;rt-=257;var qe=rt<8?0:rt-4>>2;qe>5&&(qe=0);var At=je+ee[rt];qe>0&&(At+=Ce(Be,ke,qe),ke+=qe),at=Ce(Be,ke,be),rt=Ve>>>1==1?Le[at]:$t[at],ke+=rt&15,rt>>>=4;var Ut=rt<4?0:rt-2>>1,ft=z[rt];for(Ut>0&&(ft+=Ce(Be,ke,Ut),ke+=Ut),!Qe&&oe<At&&(ze=Me(ze,At+100),oe=ze.length);je<At;)ze[je]=ze[je-ft],++je}}}return Qe?[ze,ke+7>>>3]:[ze.slice(0,je),ke+7>>>3]}function Lt(Be,Qe){var ke=Be.slice(Be.l||0),Ve=rn(ke,Qe);return Be.l+=Ve[1],Ve[0]}function _t(Be,Qe){if(Be)typeof console<"u"&&console.error(Qe);else throw new Error(Qe)}function ut(Be,Qe){var ke=Be;Gs(ke,0);var Ve=[],ze=[],je={FileIndex:Ve,FullPaths:ze};S(je,{root:Qe.root});for(var oe=ke.length-4;(ke[oe]!=80||ke[oe+1]!=75||ke[oe+2]!=5||ke[oe+3]!=6)&&oe>=0;)--oe;ke.l=oe+4,ke.l+=4;var se=ke.read_shift(2);ke.l+=6;var be=ke.read_shift(4);for(ke.l=be,oe=0;oe<se;++oe){ke.l+=20;var Fe=ke.read_shift(4),at=ke.read_shift(4),rt=ke.read_shift(2),qe=ke.read_shift(2),At=ke.read_shift(2);ke.l+=8;var Ut=ke.read_shift(4),ft=i(ke.slice(ke.l+rt,ke.l+rt+qe));ke.l+=rt+qe+At;var en=ke.l;ke.l=Ut+4,Ft(ke,Fe,at,je,ft),ke.l=en}return je}function Ft(Be,Qe,ke,Ve,ze){Be.l+=2;var je=Be.read_shift(2),oe=Be.read_shift(2),se=o(Be);if(je&8257)throw new Error("Unsupported ZIP encryption");for(var be=Be.read_shift(4),Fe=Be.read_shift(4),at=Be.read_shift(4),rt=Be.read_shift(2),qe=Be.read_shift(2),At="",Ut=0;Ut<rt;++Ut)At+=String.fromCharCode(Be[Be.l++]);if(qe){var ft=i(Be.slice(Be.l,Be.l+qe));(ft[21589]||{}).mt&&(se=ft[21589].mt),((ze||{})[21589]||{}).mt&&(se=ze[21589].mt)}Be.l+=qe;var en=Be.slice(Be.l,Be.l+Fe);switch(oe){case 8:en=N(Be,at);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+oe)}var Jt=!1;je&8&&(be=Be.read_shift(4),be==134695760&&(be=Be.read_shift(4),Jt=!0),Fe=Be.read_shift(4),at=Be.read_shift(4)),Fe!=Qe&&_t(Jt,"Bad compressed size: "+Qe+" != "+Fe),at!=ke&&_t(Jt,"Bad uncompressed size: "+ke+" != "+at),Wn(Ve,At,en,{unsafe:!0,mt:se})}function zt(Be,Qe){var ke=Qe||{},Ve=[],ze=[],je=gs(1),oe=ke.compression?8:0,se=0,be=0,Fe=0,at=0,rt=0,qe=Be.FullPaths[0],At=qe,Ut=Be.FileIndex[0],ft=[],en=0;for(be=1;be<Be.FullPaths.length;++be)if(At=Be.FullPaths[be].slice(qe.length),Ut=Be.FileIndex[be],!(!Ut.size||!Ut.content||At=="Sh33tJ5")){var Jt=at,wn=gs(At.length);for(Fe=0;Fe<At.length;++Fe)wn.write_shift(1,At.charCodeAt(Fe)&127);wn=wn.slice(0,wn.l),ft[rt]=pPe.buf(Ut.content,0);var yn=Ut.content;oe==8&&(yn=q(yn)),je=gs(30),je.write_shift(4,67324752),je.write_shift(2,20),je.write_shift(2,se),je.write_shift(2,oe),Ut.mt?s(je,Ut.mt):je.write_shift(4,0),je.write_shift(-4,ft[rt]),je.write_shift(4,yn.length),je.write_shift(4,Ut.content.length),je.write_shift(2,wn.length),je.write_shift(2,0),at+=je.length,Ve.push(je),at+=wn.length,Ve.push(wn),at+=yn.length,Ve.push(yn),je=gs(46),je.write_shift(4,33639248),je.write_shift(2,0),je.write_shift(2,20),je.write_shift(2,se),je.write_shift(2,oe),je.write_shift(4,0),je.write_shift(-4,ft[rt]),je.write_shift(4,yn.length),je.write_shift(4,Ut.content.length),je.write_shift(2,wn.length),je.write_shift(2,0),je.write_shift(2,0),je.write_shift(2,0),je.write_shift(2,0),je.write_shift(4,0),je.write_shift(4,Jt),en+=je.l,ze.push(je),en+=wn.length,ze.push(wn),++rt}return je=gs(22),je.write_shift(4,101010256),je.write_shift(2,0),je.write_shift(2,0),je.write_shift(2,rt),je.write_shift(2,rt),je.write_shift(4,en),je.write_shift(4,at),je.write_shift(2,0),Ed([Ed(Ve),Ed(ze),je])}var dn={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Hn(Be,Qe){if(Be.ctype)return Be.ctype;var ke=Be.name||"",Ve=ke.match(/\.([^\.]+)$/);return Ve&&dn[Ve[1]]||Qe&&(Ve=(ke=Qe).match(/[\.\\]([^\.\\])+$/),Ve&&dn[Ve[1]])?dn[Ve[1]]:"application/octet-stream"}function Ze(Be){for(var Qe=wR(Be),ke=[],Ve=0;Ve<Qe.length;Ve+=76)ke.push(Qe.slice(Ve,Ve+76));return ke.join(`\r
`)+`\r
`}function Ge(Be){var Qe=Be.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Fe){var at=Fe.charCodeAt(0).toString(16).toUpperCase();return"="+(at.length==1?"0"+at:at)});Qe=Qe.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Qe.charAt(0)==`
`&&(Qe="=0D"+Qe.slice(1)),Qe=Qe.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var ke=[],Ve=Qe.split(`\r
`),ze=0;ze<Ve.length;++ze){var je=Ve[ze];if(je.length==0){ke.push("");continue}for(var oe=0;oe<je.length;){var se=76,be=je.slice(oe,oe+se);be.charAt(se-1)=="="?se--:be.charAt(se-2)=="="?se-=2:be.charAt(se-3)=="="&&(se-=3),be=je.slice(oe,oe+se),oe+=se,oe<je.length&&(be+="="),ke.push(be)}}return ke.join(`\r
`)}function xt(Be){for(var Qe=[],ke=0;ke<Be.length;++ke){for(var Ve=Be[ke];ke<=Be.length&&Ve.charAt(Ve.length-1)=="=";)Ve=Ve.slice(0,Ve.length-1)+Be[++ke];Qe.push(Ve)}for(var ze=0;ze<Qe.length;++ze)Qe[ze]=Qe[ze].replace(/[=][0-9A-Fa-f]{2}/g,function(je){return String.fromCharCode(parseInt(je.slice(1),16))});return Tl(Qe.join(`\r
`))}function gt(Be,Qe,ke){for(var Ve="",ze="",je="",oe,se=0;se<10;++se){var be=Qe[se];if(!be||be.match(/^\s*$/))break;var Fe=be.match(/^(.*?):\s*([^\s].*)$/);if(Fe)switch(Fe[1].toLowerCase()){case"content-location":Ve=Fe[2].trim();break;case"content-type":je=Fe[2].trim();break;case"content-transfer-encoding":ze=Fe[2].trim();break}}switch(++se,ze.toLowerCase()){case"base64":oe=Tl(Di(Qe.slice(se).join("")));break;case"quoted-printable":oe=xt(Qe.slice(se));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ze)}var at=Wn(Be,Ve.slice(ke.length),oe,{unsafe:!0});je&&(at.ctype=je)}function Bt(Be,Qe){if(ne(Be.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var ke=Qe&&Qe.root||"",Ve=(pa&&Buffer.isBuffer(Be)?Be.toString("binary"):ne(Be)).split(`\r
`),ze=0,je="";for(ze=0;ze<Ve.length;++ze)if(je=Ve[ze],!!/^Content-Location:/i.test(je)&&(je=je.slice(je.indexOf("file")),ke||(ke=je.slice(0,je.lastIndexOf("/")+1)),je.slice(0,ke.length)!=ke))for(;ke.length>0&&(ke=ke.slice(0,ke.length-1),ke=ke.slice(0,ke.lastIndexOf("/")+1),je.slice(0,ke.length)!=ke););var oe=(Ve[1]||"").match(/boundary="(.*?)"/);if(!oe)throw new Error("MAD cannot find boundary");var se="--"+(oe[1]||""),be=[],Fe=[],at={FileIndex:be,FullPaths:Fe};S(at);var rt,qe=0;for(ze=0;ze<Ve.length;++ze){var At=Ve[ze];At!==se&&At!==se+"--"||(qe++&&gt(at,Ve.slice(rt,ze),ke),rt=ze)}return at}function wt(Be,Qe){var ke=Qe||{},Ve=ke.boundary||"SheetJS";Ve="------="+Ve;for(var ze=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Ve.slice(2)+'"',"","",""],je=Be.FullPaths[0],oe=je,se=Be.FileIndex[0],be=1;be<Be.FullPaths.length;++be)if(oe=Be.FullPaths[be].slice(je.length),se=Be.FileIndex[be],!(!se.size||!se.content||oe=="Sh33tJ5")){oe=oe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(en){return"_x"+en.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(en){return"_u"+en.charCodeAt(0).toString(16)+"_"});for(var Fe=se.content,at=pa&&Buffer.isBuffer(Fe)?Fe.toString("binary"):ne(Fe),rt=0,qe=Math.min(1024,at.length),At=0,Ut=0;Ut<=qe;++Ut)(At=at.charCodeAt(Ut))>=32&&At<128&&++rt;var ft=rt>=qe*4/5;ze.push(Ve),ze.push("Content-Location: "+(ke.root||"file:///C:/SheetJS/")+oe),ze.push("Content-Transfer-Encoding: "+(ft?"quoted-printable":"base64")),ze.push("Content-Type: "+Hn(se,oe)),ze.push(""),ze.push(ft?Ge(at):Ze(at))}return ze.push(Ve+`--\r
`),ze.join(`\r
`)}function gn(Be){var Qe={};return S(Qe,Be),Qe}function Wn(Be,Qe,ke,Ve){var ze=Ve&&Ve.unsafe;ze||S(Be);var je=!ze&&ba.find(Be,Qe);if(!je){var oe=Be.FullPaths[0];Qe.slice(0,oe.length)==oe?oe=Qe:(oe.slice(-1)!="/"&&(oe+="/"),oe=(oe+Qe).replace("//","/")),je={name:r(Qe),type:2},Be.FileIndex.push(je),Be.FullPaths.push(oe),ze||ba.utils.cfb_gc(Be)}return je.content=ke,je.size=ke?ke.length:0,Ve&&(Ve.CLSID&&(je.clsid=Ve.CLSID),Ve.mt&&(je.mt=Ve.mt),Ve.ct&&(je.ct=Ve.ct)),je}function zn(Be,Qe){S(Be);var ke=ba.find(Be,Qe);if(ke){for(var Ve=0;Ve<Be.FileIndex.length;++Ve)if(Be.FileIndex[Ve]==ke)return Be.FileIndex.splice(Ve,1),Be.FullPaths.splice(Ve,1),!0}return!1}function oa(Be,Qe,ke){S(Be);var Ve=ba.find(Be,Qe);if(Ve){for(var ze=0;ze<Be.FileIndex.length;++ze)if(Be.FileIndex[ze]==Ve)return Be.FileIndex[ze].name=r(ke),Be.FullPaths[ze]=ke,!0}return!1}function Ra(Be){C(Be,!0)}return t.find=P,t.read=k,t.parse=d,t.write=Y,t.writeFile=ue,t.utils={cfb_new:gn,cfb_add:Wn,cfb_del:zn,cfb_mov:oa,cfb_gc:Ra,ReadShift:n0,CheckField:R$,prep_blob:Gs,bconcat:Ed,use_zlib:L,_deflateRaw:Pt,_inflateRaw:Lt,consts:J},t})();function gPe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var n=t.read();return t.close(),n}catch(a){if(!a.message||!a.message.match(/onstruct/))throw a}throw new Error("Cannot access file "+e)}function Vu(e){for(var t=Object.keys(e),n=[],a=0;a<t.length;++a)Object.prototype.hasOwnProperty.call(e,t[a])&&n.push(t[a]);return n}function RT(e){for(var t=[],n=Vu(e),a=0;a!==n.length;++a)t[e[n[a]]]=n[a];return t}var v2=new Date(1899,11,30,0,0,0);function Qo(e,t){var n=e.getTime(),a=v2.getTime()+(e.getTimezoneOffset()-v2.getTimezoneOffset())*6e4;return(n-a)/(1440*60*1e3)}var m$=new Date,yPe=v2.getTime()+(m$.getTimezoneOffset()-v2.getTimezoneOffset())*6e4,IR=m$.getTimezoneOffset();function Ow(e){var t=new Date;return t.setTime(e*24*60*60*1e3+yPe),t.getTimezoneOffset()!==IR&&t.setTime(t.getTime()+(t.getTimezoneOffset()-IR)*6e4),t}function _Pe(e){var t=0,n=0,a=!1,r=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!r)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var s=1;s!=r.length;++s)if(r[s]){switch(n=1,s>3&&(a=!0),r[s].slice(r[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+r[s].slice(r[s].length-1));case"D":n*=24;case"H":n*=60;case"M":if(a)n*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=n*parseInt(r[s],10)}return t}var FR=new Date("2017-02-19T19:06:09.000Z"),v$=isNaN(FR.getFullYear())?new Date("2/19/17"):FR,wPe=v$.getFullYear()==2017;function Vs(e,t){var n=new Date(e);if(wPe)return t>0?n.setTime(n.getTime()+n.getTimezoneOffset()*60*1e3):t<0&&n.setTime(n.getTime()-n.getTimezoneOffset()*60*1e3),n;if(e instanceof Date)return e;if(v$.getFullYear()==1917&&!isNaN(n.getFullYear())){var a=n.getFullYear();return e.indexOf(""+a)>-1||n.setFullYear(n.getFullYear()+100),n}var r=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+r[0],+r[1]-1,+r[2],+r[3]||0,+r[4]||0,+r[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function Ef(e,t){if(pa&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return Np(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Np(t$(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Np(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Np(new TextDecoder("utf-16be").decode(e.slice(2)))}var n={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(s){return n[s]||s})}catch{}for(var a=[],r=0;r!=e.length;++r)a.push(String.fromCharCode(e[r]));return a.join("")}function Xs(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=Xs(e[n]));return t}function Rr(e,t){for(var n="";n.length<t;)n+=e;return n}function Ol(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var n=1,a=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return n*=100,""});return!isNaN(t=Number(a))||(a=a.replace(/[(](.*)[)]/,function(r,s){return n=-n,s}),!isNaN(t=Number(a)))?t/n:t}var bPe=["january","february","march","april","may","june","july","august","september","october","november","december"];function Wv(e){var t=new Date(e),n=new Date(NaN),a=t.getYear(),r=t.getMonth(),s=t.getDate();if(isNaN(s))return n;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&bPe.indexOf(o)==-1)return n}else if(o.match(/[a-z]/))return n;return a<0||a>8099?n:(r>0||s>1)&&a!=101?t:e.match(/[^-0-9:,\/\\]/)?n:t}var xPe=(function(){var e="abacaba".split(/(:?b)/i).length==5;return function(n,a,r){if(e||typeof a=="string")return n.split(a);for(var s=n.split(a),o=[s[0]],i=1;i<s.length;++i)o.push(r),o.push(s[i]);return o}})();function h$(e){return e?e.content&&e.type?Ef(e.content,!0):e.data?Dp(e.data):e.asNodeBuffer&&pa?Dp(e.asNodeBuffer().toString("binary")):e.asBinary?Dp(e.asBinary()):e._data&&e._data.getContent?Dp(Ef(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function p$(e){if(!e)return null;if(e.data)return yR(e.data);if(e.asNodeBuffer&&pa)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?yR(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function CPe(e){return e&&e.name.slice(-4)===".bin"?p$(e):h$(e)}function Zi(e,t){for(var n=e.FullPaths||Vu(e.files),a=t.toLowerCase().replace(/[\/]/g,"\\"),r=a.replace(/\\/g,"/"),s=0;s<n.length;++s){var o=n[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(a==o||r==o)return e.files?e.files[n[s]]:e.FileIndex[s]}return null}function NT(e,t){var n=Zi(e,t);if(n==null)throw new Error("Cannot find file "+t+" in zip");return n}function rs(e,t,n){if(!n)return CPe(NT(e,t));if(!t)return null;try{return rs(e,t)}catch{return null}}function Si(e,t,n){if(!n)return h$(NT(e,t));if(!t)return null;try{return Si(e,t)}catch{return null}}function SPe(e,t,n){return p$(NT(e,t))}function PR(e){for(var t=e.FullPaths||Vu(e.files),n=[],a=0;a<t.length;++a)t[a].slice(-1)!="/"&&n.push(t[a].replace(/^Root Entry[\/]/,""));return n.sort()}function EPe(e,t,n){if(e.FullPaths){if(typeof n=="string"){var a;return pa?a=Wf(n):a=zFe(n),ba.utils.cfb_add(e,t,a)}ba.utils.cfb_add(e,t,n)}else e.file(t,n)}function g$(e,t){switch(t.type){case"base64":return ba.read(e,{type:"base64"});case"binary":return ba.read(e,{type:"binary"});case"buffer":case"array":return ba.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Rp(e,t){if(e.charAt(0)=="/")return e.slice(1);var n=t.split("/");t.slice(-1)!="/"&&n.pop();for(var a=e.split("/");a.length!==0;){var r=a.shift();r===".."?n.pop():r!=="."&&n.push(r)}return n.join("/")}var y$=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,BPe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,DR=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,kPe=/<[^>]*>/g,So=y$.match(DR)?DR:kPe,TPe=/<\w*:/,IPe=/<(\/?)\w+:/;function Mn(e,t,n){for(var a={},r=0,s=0;r!==e.length&&!((s=e.charCodeAt(r))===32||s===10||s===13);++r);if(t||(a[0]=e.slice(0,r)),r===e.length)return a;var o=e.match(BPe),i=0,c="",A=0,d="",f="",m=1;if(o)for(A=0;A!=o.length;++A){for(f=o[A],s=0;s!=f.length&&f.charCodeAt(s)!==61;++s);for(d=f.slice(0,s).trim();f.charCodeAt(s+1)==32;)++s;for(m=(r=f.charCodeAt(s+1))==34||r==39?1:0,c=f.slice(s+1+m,f.length-m),i=0;i!=d.length&&d.charCodeAt(i)!==58;++i);if(i===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),a[d]=c,a[d.toLowerCase()]=c;else{var h=(i===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(i+1);if(a[h]&&d.slice(i-3,i)=="ext")continue;a[h]=c,a[h.toLowerCase()]=c}}return a}function ju(e){return e.replace(IPe,"<$1")}var _$={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},FPe=RT(_$),Ia=(function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function n(a){var r=a+"",s=r.indexOf("<![CDATA[");if(s==-1)return r.replace(e,function(i,c){return _$[i]||String.fromCharCode(parseInt(c,i.indexOf("x")>-1?16:10))||i}).replace(t,function(i,c){return String.fromCharCode(parseInt(c,16))});var o=r.indexOf("]]>");return n(r.slice(0,s))+r.slice(s+9,o)+n(r.slice(o+3))}})(),PPe=/[&<>'"]/g,DPe=/[\u0000-\u001f]/g;function VT(e){var t=e+"";return t.replace(PPe,function(n){return FPe[n]}).replace(/\n/g,"<br/>").replace(DPe,function(n){return"&#x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+";"})}var UR=(function(){var e=/&#(\d+);/g;function t(n,a){return String.fromCharCode(parseInt(a,10))}return function(a){return a.replace(e,t)}})();function Sr(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function PC(e){for(var t="",n=0,a=0,r=0,s=0,o=0,i=0;n<e.length;){if(a=e.charCodeAt(n++),a<128){t+=String.fromCharCode(a);continue}if(r=e.charCodeAt(n++),a>191&&a<224){o=(a&31)<<6,o|=r&63,t+=String.fromCharCode(o);continue}if(s=e.charCodeAt(n++),a<240){t+=String.fromCharCode((a&15)<<12|(r&63)<<6|s&63);continue}o=e.charCodeAt(n++),i=((a&7)<<18|(r&63)<<12|(s&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(i>>>10&1023)),t+=String.fromCharCode(56320+(i&1023))}return t}function RR(e){var t=eA(2*e.length),n,a,r=1,s=0,o=0,i;for(a=0;a<e.length;a+=r)r=1,(i=e.charCodeAt(a))<128?n=i:i<224?(n=(i&31)*64+(e.charCodeAt(a+1)&63),r=2):i<240?(n=(i&15)*4096+(e.charCodeAt(a+1)&63)*64+(e.charCodeAt(a+2)&63),r=3):(r=4,n=(i&7)*262144+(e.charCodeAt(a+1)&63)*4096+(e.charCodeAt(a+2)&63)*64+(e.charCodeAt(a+3)&63),n-=65536,o=55296+(n>>>10&1023),n=56320+(n&1023)),o!==0&&(t[s++]=o&255,t[s++]=o>>>8,o=0),t[s++]=n%256,t[s++]=n>>>8;return t.slice(0,s).toString("ucs2")}function NR(e){return Wf(e,"binary").toString("utf8")}var Sy="foo bar baz",mr=pa&&(NR(Sy)==PC(Sy)&&NR||RR(Sy)==PC(Sy)&&RR)||PC,Np=pa?function(e){return Wf(e,"utf8").toString("binary")}:function(e){for(var t=[],n=0,a=0,r=0;n<e.length;)switch(a=e.charCodeAt(n++),!0){case a<128:t.push(String.fromCharCode(a));break;case a<2048:t.push(String.fromCharCode(192+(a>>6))),t.push(String.fromCharCode(128+(a&63)));break;case(a>=55296&&a<57344):a-=55296,r=e.charCodeAt(n++)-56320+(a<<10),t.push(String.fromCharCode(240+(r>>18&7))),t.push(String.fromCharCode(144+(r>>12&63))),t.push(String.fromCharCode(128+(r>>6&63))),t.push(String.fromCharCode(128+(r&63)));break;default:t.push(String.fromCharCode(224+(a>>12))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)))}return t.join("")},$0=(function(){var e={};return function(n,a){var r=n+"|"+(a||"");return e[r]?e[r]:e[r]=new RegExp("<(?:\\w+:)?"+n+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+n+">",a||"")}})(),w$=(function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(n){for(var a=n.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),r=0;r<e.length;++r)a=a.replace(e[r][0],e[r][1]);return a}})(),UPe=(function(){var e={};return function(n){return e[n]!==void 0?e[n]:e[n]=new RegExp("<(?:vt:)?"+n+">([\\s\\S]*?)</(?:vt:)?"+n+">","g")}})(),RPe=/<\/?(?:vt:)?variant>/g,NPe=/<(?:vt:)([^>]*)>([\s\S]*)</;function VR(e,t){var n=Mn(e),a=e.match(UPe(n.baseType))||[],r=[];if(a.length!=n.size){if(t.WTF)throw new Error("unexpected vector length "+a.length+" != "+n.size);return r}return a.forEach(function(s){var o=s.replace(RPe,"").match(NPe);o&&r.push({v:mr(o[2]),t:o[1]})}),r}var VPe=/(^\s|\s$|\n)/;function LPe(e){return Vu(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function MPe(e,t,n){return"<"+e+(n!=null?LPe(n):"")+(t!=null?(t.match(VPe)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function LT(e){if(pa&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return mr(jf(PT(e)));throw new Error("Bad input format: expected Buffer or string")}var Q0=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,OPe={CT:"http://schemas.openxmlformats.org/package/2006/content-types"},HPe=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function $Pe(e,t){for(var n=1-2*(e[t+7]>>>7),a=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),r=e[t+6]&15,s=5;s>=0;--s)r=r*256+e[t+s];return a==2047?r==0?n*(1/0):NaN:(a==0?a=-1022:(a-=1023,r+=Math.pow(2,52)),n*Math.pow(2,a-52)*r)}function QPe(e,t,n){var a=(t<0||1/t==-1/0?1:0)<<7,r=0,s=0,o=a?-t:t;isFinite(o)?o==0?r=s=0:(r=Math.floor(Math.log(o)/Math.LN2),s=o*Math.pow(2,52-r),r<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?r=-1022:(s-=Math.pow(2,52),r+=1023)):(r=2047,s=isNaN(t)?26985:0);for(var i=0;i<=5;++i,s/=256)e[n+i]=s&255;e[n+6]=(r&15)<<4|s&15,e[n+7]=r>>4|a}var LR=function(e){for(var t=[],n=10240,a=0;a<e[0].length;++a)if(e[0][a])for(var r=0,s=e[0][a].length;r<s;r+=n)t.push.apply(t,e[0][a].slice(r,r+n));return t},MR=pa?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:Wf(t)})):LR(e)}:LR,OR=function(e,t,n){for(var a=[],r=t;r<n;r+=2)a.push(String.fromCharCode(Cc(e,r)));return a.join("").replace(Oo,"")},MT=pa?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf16le",t,n).replace(Oo,""):OR(e,t,n)}:OR,HR=function(e,t,n){for(var a=[],r=t;r<t+n;++r)a.push(("0"+e[r].toString(16)).slice(-2));return a.join("")},b$=pa?function(e,t,n){return Buffer.isBuffer(e)?e.toString("hex",t,t+n):HR(e,t,n)}:HR,$R=function(e,t,n){for(var a=[],r=t;r<n;r++)a.push(String.fromCharCode(Xm(e,r)));return a.join("")},Fg=pa?function(t,n,a){return Buffer.isBuffer(t)?t.toString("utf8",n,a):$R(t,n,a)}:$R,x$=function(e,t){var n=Ci(e,t);return n>0?Fg(e,t+4,t+4+n-1):""},C$=x$,S$=function(e,t){var n=Ci(e,t);return n>0?Fg(e,t+4,t+4+n-1):""},E$=S$,B$=function(e,t){var n=2*Ci(e,t);return n>0?Fg(e,t+4,t+4+n-1):""},k$=B$,T$=function(t,n){var a=Ci(t,n);return a>0?MT(t,n+4,n+4+a):""},I$=T$,F$=function(e,t){var n=Ci(e,t);return n>0?Fg(e,t+4,t+4+n):""},P$=F$,D$=function(e,t){return $Pe(e,t)},h2=D$,U$=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};pa&&(C$=function(t,n){if(!Buffer.isBuffer(t))return x$(t,n);var a=t.readUInt32LE(n);return a>0?t.toString("utf8",n+4,n+4+a-1):""},E$=function(t,n){if(!Buffer.isBuffer(t))return S$(t,n);var a=t.readUInt32LE(n);return a>0?t.toString("utf8",n+4,n+4+a-1):""},k$=function(t,n){if(!Buffer.isBuffer(t))return B$(t,n);var a=2*t.readUInt32LE(n);return t.toString("utf16le",n+4,n+4+a-1)},I$=function(t,n){if(!Buffer.isBuffer(t))return T$(t,n);var a=t.readUInt32LE(n);return t.toString("utf16le",n+4,n+4+a)},P$=function(t,n){if(!Buffer.isBuffer(t))return F$(t,n);var a=t.readUInt32LE(n);return t.toString("utf8",n+4,n+4+a)},h2=function(t,n){return Buffer.isBuffer(t)?t.readDoubleLE(n):D$(t,n)},U$=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var Xm=function(e,t){return e[t]},Cc=function(e,t){return e[t+1]*256+e[t]},GPe=function(e,t){var n=e[t+1]*256+e[t];return n<32768?n:(65535-n+1)*-1},Ci=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},$A=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},zPe=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function n0(e,t){var n="",a,r,s=[],o,i,c,A;switch(t){case"dbcs":if(A=this.l,pa&&Buffer.isBuffer(this))n=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)n+=String.fromCharCode(Cc(this,A)),A+=2;e*=2;break;case"utf8":n=Fg(this,this.l,this.l+e);break;case"utf16le":e*=2,n=MT(this,this.l,this.l+e);break;case"wstr":return n0.call(this,e,"dbcs");case"lpstr-ansi":n=C$(this,this.l),e=4+Ci(this,this.l);break;case"lpstr-cp":n=E$(this,this.l),e=4+Ci(this,this.l);break;case"lpwstr":n=k$(this,this.l),e=4+2*Ci(this,this.l);break;case"lpp4":e=4+Ci(this,this.l),n=I$(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Ci(this,this.l),n=P$(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,n="";(o=Xm(this,this.l+e++))!==0;)s.push(Cy(o));n=s.join("");break;case"_wstr":for(e=0,n="";(o=Cc(this,this.l+e))!==0;)s.push(Cy(o)),e+=2;e+=2,n=s.join("");break;case"dbcs-cont":for(n="",A=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(A)!==-1)return o=Xm(this,A),this.l=A+1,i=n0.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+i;s.push(Cy(Cc(this,A))),A+=2}n=s.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(n="",A=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(A)!==-1)return o=Xm(this,A),this.l=A+1,i=n0.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+i;s.push(Cy(Xm(this,A))),A+=1}n=s.join("");break;default:switch(e){case 1:return a=Xm(this,this.l),this.l++,a;case 2:return a=(t==="i"?GPe:Cc)(this,this.l),this.l+=2,a;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(a=(e>0?$A:zPe)(this,this.l),this.l+=4,a):(r=Ci(this,this.l),this.l+=4,r);case 8:case-8:if(t==="f")return e==8?r=h2(this,this.l):r=h2([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,r;e=8;case 16:n=b$(this,this.l,e);break}}return this.l+=e,n}var KPe=function(e,t,n){e[n]=t&255,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24&255},WPe=function(e,t,n){e[n]=t&255,e[n+1]=t>>8&255,e[n+2]=t>>16&255,e[n+3]=t>>24&255},jPe=function(e,t,n){e[n]=t&255,e[n+1]=t>>>8&255};function qPe(e,t,n){var a=0,r=0;if(n==="dbcs"){for(r=0;r!=t.length;++r)jPe(this,t.charCodeAt(r),this.l+2*r);a=2*t.length}else if(n==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),r=0;r!=t.length;++r)this[this.l+r]=t.charCodeAt(r)&255;a=t.length}else if(n==="hex"){for(;r<e;++r)this[this.l++]=parseInt(t.slice(2*r,2*r+2),16)||0;return this}else if(n==="utf16le"){var s=Math.min(this.l+e,this.length);for(r=0;r<Math.min(t.length,e);++r){var o=t.charCodeAt(r);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(e){case 1:a=1,this[this.l]=t&255;break;case 2:a=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:a=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:a=4,KPe(this,t,this.l);break;case 8:if(a=8,n==="f"){QPe(this,t,this.l);break}case 16:break;case-4:a=4,WPe(this,t,this.l);break}return this.l+=a,this}function R$(e,t){var n=b$(this,this.l,e.length>>1);if(n!==e)throw new Error(t+"Expected "+e+" saw "+n);this.l+=e.length>>1}function Gs(e,t){e.l=t,e.read_shift=n0,e.chk=R$,e.write_shift=qPe}function bo(e,t){e.l+=t}function gs(e){var t=eA(e);return Gs(t,0),t}function Kc(e,t,n){if(e){var a,r,s;Gs(e,e.l||0);for(var o=e.length,i=0,c=0;e.l<o;){i=e.read_shift(1),i&128&&(i=(i&127)+((e.read_shift(1)&127)<<7));var A=b2[i]||b2[65535];for(a=e.read_shift(1),s=a&127,r=1;r<4&&a&128;++r)s+=((a=e.read_shift(1))&127)<<7*r;c=e.l+s;var d=A.f&&A.f(e,s,n);if(e.l=c,t(d,A,i))return}}}function UE(){var e=[],t=pa?256:2048,n=function(A){var d=gs(A);return Gs(d,0),d},a=n(t),r=function(){a&&(a.length>a.l&&(a=a.slice(0,a.l),a.l=a.length),a.length>0&&e.push(a),a=null)},s=function(A){return a&&A<a.length-a.l?a:(r(),a=n(Math.max(A+1,t)))},o=function(){return r(),Ed(e)},i=function(A){r(),a=A,a.l==null&&(a.l=a.length),s(t)};return{next:s,push:i,end:o,_bufs:e}}function a0(e,t,n){var a=Xs(e);if(t.s?(a.cRel&&(a.c+=t.s.c),a.rRel&&(a.r+=t.s.r)):(a.cRel&&(a.c+=t.c),a.rRel&&(a.r+=t.r)),!n||n.biff<12){for(;a.c>=256;)a.c-=256;for(;a.r>=65536;)a.r-=65536}return a}function QR(e,t,n){var a=Xs(e);return a.s=a0(a.s,t.s,n),a.e=a0(a.e,t.s,n),a}function r0(e,t){if(e.cRel&&e.c<0)for(e=Xs(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Xs(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var n=qn(e);return!e.cRel&&e.cRel!=null&&(n=JPe(n)),!e.rRel&&e.rRel!=null&&(n=YPe(n)),n}function DC(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+ws(e.s.c)+":"+(e.e.cRel?"":"$")+ws(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Js(e.s.r)+":"+(e.e.rRel?"":"$")+Js(e.e.r):r0(e.s,t.biff)+":"+r0(e.e,t.biff)}function OT(e){return parseInt(XPe(e),10)-1}function Js(e){return""+(e+1)}function YPe(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function XPe(e){return e.replace(/\$(\d+)$/,"$1")}function HT(e){for(var t=ZPe(e),n=0,a=0;a!==t.length;++a)n=26*n+t.charCodeAt(a)-64;return n-1}function ws(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function JPe(e){return e.replace(/^([A-Z])/,"$$$1")}function ZPe(e){return e.replace(/^\$([A-Z])/,"$1")}function eDe(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Lo(e){for(var t=0,n=0,a=0;a<e.length;++a){var r=e.charCodeAt(a);r>=48&&r<=57?t=10*t+(r-48):r>=65&&r<=90&&(n=26*n+(r-64))}return{c:n-1,r:t-1}}function qn(e){for(var t=e.c+1,n="";t;t=(t-1)/26|0)n=String.fromCharCode((t-1)%26+65)+n;return n+(e.r+1)}function bh(e){var t=e.indexOf(":");return t==-1?{s:Lo(e),e:Lo(e)}:{s:Lo(e.slice(0,t)),e:Lo(e.slice(t+1))}}function Sa(e,t){return typeof t>"u"||typeof t=="number"?Sa(e.s,e.e):(typeof e!="string"&&(e=qn(e)),typeof t!="string"&&(t=qn(t)),e==t?e:e+":"+t)}function Vr(e){var t={s:{c:0,r:0},e:{c:0,r:0}},n=0,a=0,r=0,s=e.length;for(n=0;a<s&&!((r=e.charCodeAt(a)-64)<1||r>26);++a)n=26*n+r;for(t.s.c=--n,n=0;a<s&&!((r=e.charCodeAt(a)-48)<0||r>9);++a)n=10*n+r;if(t.s.r=--n,a===s||r!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++a,n=0;a!=s&&!((r=e.charCodeAt(a)-64)<1||r>26);++a)n=26*n+r;for(t.e.c=--n,n=0;a!=s&&!((r=e.charCodeAt(a)-48)<0||r>9);++a)n=10*n+r;return t.e.r=--n,t}function GR(e,t){var n=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=ll(e.z,n?Qo(t):t)}catch{}try{return e.w=ll((e.XF||{}).numFmtId||(n?14:0),n?Qo(t):t)}catch{return""+t}}function Mc(e,t,n){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&n&&n.dateNF&&(e.z=n.dateNF),e.t=="e"?Xf[e.v]||e.v:t==null?GR(e,e.v):GR(e,t))}function uA(e,t){var n=t&&t.sheet?t.sheet:"Sheet1",a={};return a[n]=e,{SheetNames:[n],Sheets:a}}function N$(e,t,n){var a=n||{},r=e?Array.isArray(e):a.dense,s=e||(r?[]:{}),o=0,i=0;if(s&&a.origin!=null){if(typeof a.origin=="number")o=a.origin;else{var c=typeof a.origin=="string"?Lo(a.origin):a.origin;o=c.r,i=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var A={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=Vr(s["!ref"]);A.s.c=d.s.c,A.s.r=d.s.r,A.e.c=Math.max(A.e.c,d.e.c),A.e.r=Math.max(A.e.r,d.e.r),o==-1&&(A.e.r=o=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var m=0;m!=t[f].length;++m)if(!(typeof t[f][m]>"u")){var h={v:t[f][m]},p=o+f,y=i+m;if(A.s.r>p&&(A.s.r=p),A.s.c>y&&(A.s.c=y),A.e.r<p&&(A.e.r=p),A.e.c<y&&(A.e.c=y),t[f][m]&&typeof t[f][m]=="object"&&!Array.isArray(t[f][m])&&!(t[f][m]instanceof Date))h=t[f][m];else if(Array.isArray(h.v)&&(h.f=t[f][m][1],h.v=h.v[0]),h.v===null)if(h.f)h.t="n";else if(a.nullError)h.t="e",h.v=0;else if(a.sheetStubs)h.t="z";else continue;else typeof h.v=="number"?h.t="n":typeof h.v=="boolean"?h.t="b":h.v instanceof Date?(h.z=a.dateNF||ea[14],a.cellDates?(h.t="d",h.w=ll(h.z,Qo(h.v))):(h.t="n",h.v=Qo(h.v),h.w=ll(h.z,h.v))):h.t="s";if(r)s[p]||(s[p]=[]),s[p][y]&&s[p][y].z&&(h.z=s[p][y].z),s[p][y]=h;else{var g=qn({c:y,r:p});s[g]&&s[g].z&&(h.z=s[g].z),s[g]=h}}}return A.s.c<1e7&&(s["!ref"]=Sa(A)),s}function xh(e,t){return N$(null,e,t)}function tDe(e){return e.read_shift(4,"i")}function _o(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function nDe(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function $T(e,t){var n=e.l,a=e.read_shift(1),r=_o(e),s=[],o={t:r,h:r};if((a&1)!==0){for(var i=e.read_shift(4),c=0;c!=i;++c)s.push(nDe(e));o.r=s}else o.r=[{ich:0,ifnt:0}];return e.l=n+t,o}var aDe=$T;function fl(e){var t=e.read_shift(4),n=e.read_shift(2);return n+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:n}}function qf(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}var rDe=_o;function QT(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}var sDe=_o,RE=QT;function GT(e){var t=e.slice(e.l,e.l+4),n=t[0]&1,a=t[0]&2;e.l+=4;var r=a===0?h2([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):$A(t,0)>>2;return n?r/100:r}function V$(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var Yf=V$;function mo(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function oDe(e){var t={},n=e.read_shift(1),a=n>>>1,r=e.read_shift(1),s=e.read_shift(2,"i"),o=e.read_shift(1),i=e.read_shift(1),c=e.read_shift(1);switch(e.l++,a){case 0:t.auto=1;break;case 1:t.index=r;var A=df[r];A&&(t.rgb=z0(A));break;case 2:t.rgb=z0([o,i,c]);break;case 3:t.theme=r;break}return s!=0&&(t.tint=s>0?s/32767:s/32768),t}function iDe(e){var t=e.read_shift(1);e.l++;var n={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return n}function L$(e,t){var n={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},a=e.read_shift(4);switch(a){case 0:return"";case 4294967295:case 4294967294:return n[e.read_shift(4)]||""}if(a>400)throw new Error("Unsupported Clipboard: "+a.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function lDe(e){return L$(e,1)}function uDe(e){return L$(e,2)}var zT=2,ai=3,Ey=11,zR=12,p2=19,By=64,cDe=65,dDe=71,ADe=4108,fDe=4126,Ds=80,M$=81,mDe=[Ds,M$],vDe={1:{n:"CodePage",t:zT},2:{n:"Category",t:Ds},3:{n:"PresentationFormat",t:Ds},4:{n:"ByteCount",t:ai},5:{n:"LineCount",t:ai},6:{n:"ParagraphCount",t:ai},7:{n:"SlideCount",t:ai},8:{n:"NoteCount",t:ai},9:{n:"HiddenCount",t:ai},10:{n:"MultimediaClipCount",t:ai},11:{n:"ScaleCrop",t:Ey},12:{n:"HeadingPairs",t:ADe},13:{n:"TitlesOfParts",t:fDe},14:{n:"Manager",t:Ds},15:{n:"Company",t:Ds},16:{n:"LinksUpToDate",t:Ey},17:{n:"CharacterCount",t:ai},19:{n:"SharedDoc",t:Ey},22:{n:"HyperlinksChanged",t:Ey},23:{n:"AppVersion",t:ai,p:"version"},24:{n:"DigSig",t:cDe},26:{n:"ContentType",t:Ds},27:{n:"ContentStatus",t:Ds},28:{n:"Language",t:Ds},29:{n:"Version",t:Ds},255:{},2147483648:{n:"Locale",t:p2},2147483651:{n:"Behavior",t:p2},1919054434:{}},hDe={1:{n:"CodePage",t:zT},2:{n:"Title",t:Ds},3:{n:"Subject",t:Ds},4:{n:"Author",t:Ds},5:{n:"Keywords",t:Ds},6:{n:"Comments",t:Ds},7:{n:"Template",t:Ds},8:{n:"LastAuthor",t:Ds},9:{n:"RevNumber",t:Ds},10:{n:"EditTime",t:By},11:{n:"LastPrinted",t:By},12:{n:"CreatedDate",t:By},13:{n:"ModifiedDate",t:By},14:{n:"PageCount",t:ai},15:{n:"WordCount",t:ai},16:{n:"CharCount",t:ai},17:{n:"Thumbnail",t:dDe},18:{n:"Application",t:Ds},19:{n:"DocSecurity",t:ai},255:{},2147483648:{n:"Locale",t:p2},2147483651:{n:"Behavior",t:p2},1919054434:{}},KR={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},pDe=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function gDe(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var yDe=gDe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),df=Xs(yDe),Xf={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},O$={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},WR={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function _De(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function wDe(e){var t=_De();if(!e||!e.match)return t;var n={};if((e.match(So)||[]).forEach(function(a){var r=Mn(a);switch(r[0].replace(TPe,"<")){case"<?xml":break;case"<Types":t.xmlns=r["xmlns"+(r[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":n[r.Extension]=r.ContentType;break;case"<Override":t[WR[r.ContentType]]!==void 0&&t[WR[r.ContentType]].push(r.PartName);break}}),t.xmlns!==OPe.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=n,delete t.calcchains,t}var nv={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function NE(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function s0(e,t){var n={"!id":{}};if(!e)return n;t.charAt(0)!=="/"&&(t="/"+t);var a={};return(e.match(So)||[]).forEach(function(r){var s=Mn(r);if(s[0]==="<Relationship"){var o={};o.Type=s.Type,o.Target=s.Target,o.Id=s.Id,s.TargetMode&&(o.TargetMode=s.TargetMode);var i=s.TargetMode==="External"?s.Target:Rp(s.Target,t);n[i]=o,a[s.Id]=o}}),n["!id"]=a,n}var bDe="application/vnd.oasis.opendocument.spreadsheet";function xDe(e,t){for(var n=LT(e),a,r;a=Q0.exec(n);)switch(a[3]){case"manifest":break;case"file-entry":if(r=Mn(a[0],!1),r.path=="/"&&r.type!==bDe)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw a}}var o0=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],CDe=(function(){for(var e=new Array(o0.length),t=0;t<o0.length;++t){var n=o0[t],a="(?:"+n[0].slice(0,n[0].indexOf(":"))+":)"+n[0].slice(n[0].indexOf(":")+1);e[t]=new RegExp("<"+a+"[^>]*>([\\s\\S]*?)</"+a+">")}return e})();function H$(e){var t={};e=mr(e);for(var n=0;n<o0.length;++n){var a=o0[n],r=e.match(CDe[n]);r!=null&&r.length>0&&(t[a[1]]=Ia(r[1])),a[2]==="date"&&t[a[1]]&&(t[a[1]]=Vs(t[a[1]]))}return t}var SDe=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function $$(e,t,n,a){var r=[];if(typeof e=="string")r=VR(e,a);else for(var s=0;s<e.length;++s)r=r.concat(e[s].map(function(d){return{v:d}}));var o=typeof t=="string"?VR(t,a).map(function(d){return d.v}):t,i=0,c=0;if(o.length>0)for(var A=0;A!==r.length;A+=2){switch(c=+r[A+1].v,r[A].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":n.Worksheets=c,n.SheetNames=o.slice(i,i+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":n.NamedRanges=c,n.DefinedNames=o.slice(i,i+c);break;case"Charts":case"Diagramme":n.Chartsheets=c,n.ChartNames=o.slice(i,i+c);break}i+=c}}function EDe(e,t,n){var a={};return t||(t={}),e=mr(e),SDe.forEach(function(r){var s=(e.match($0(r[0]))||[])[1];switch(r[2]){case"string":s&&(t[r[1]]=Ia(s));break;case"bool":t[r[1]]=s==="true";break;case"raw":var o=e.match(new RegExp("<"+r[0]+"[^>]*>([\\s\\S]*?)</"+r[0]+">"));o&&o.length>0&&(a[r[1]]=o[1]);break}}),a.HeadingPairs&&a.TitlesOfParts&&$$(a.HeadingPairs,a.TitlesOfParts,t,n),t}var BDe=/<[^>]+>[^<]*/g;function kDe(e,t){var n={},a="",r=e.match(BDe);if(r)for(var s=0;s!=r.length;++s){var o=r[s],i=Mn(o);switch(i[0]){case"<?xml":break;case"<Properties":break;case"<property":a=Ia(i.name);break;case"</property>":a=null;break;default:if(o.indexOf("<vt:")===0){var c=o.split(">"),A=c[0].slice(4),d=c[1];switch(A){case"lpstr":case"bstr":case"lpwstr":n[a]=Ia(d);break;case"bool":n[a]=Sr(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":n[a]=parseInt(d,10);break;case"r4":case"r8":case"decimal":n[a]=parseFloat(d);break;case"filetime":case"date":n[a]=Vs(d);break;case"cy":case"error":n[a]=Ia(d);break;default:if(A.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",o,A,c)}}else if(o.slice(0,2)!=="</"){if(t.WTF)throw new Error(o)}}}return n}var TDe={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},UC;function IDe(e,t,n){UC||(UC=RT(TDe)),t=UC[t]||t,e[t]=n}function KT(e){var t=e.read_shift(4),n=e.read_shift(4);return new Date((n/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function Q$(e,t,n){var a=e.l,r=e.read_shift(0,"lpstr-cp");if(n)for(;e.l-a&3;)++e.l;return r}function G$(e,t,n){var a=e.read_shift(0,"lpwstr");return a}function z$(e,t,n){return t===31?G$(e):Q$(e,t,n)}function VE(e,t,n){return z$(e,t,n===!1?0:4)}function FDe(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return z$(e,t,0)}function PDe(e){for(var t=e.read_shift(4),n=[],a=0;a!=t;++a){var r=e.l;n[a]=e.read_shift(0,"lpwstr").replace(Oo,""),e.l-r&2&&(e.l+=2)}return n}function DDe(e){for(var t=e.read_shift(4),n=[],a=0;a!=t;++a)n[a]=e.read_shift(0,"lpstr-cp").replace(Oo,"");return n}function UDe(e){var t=e.l,n=g2(e,M$);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var a=g2(e,ai);return[n,a]}function RDe(e){for(var t=e.read_shift(4),n=[],a=0;a<t/2;++a)n.push(UDe(e));return n}function jR(e,t){for(var n=e.read_shift(4),a={},r=0;r!=n;++r){var s=e.read_shift(4),o=e.read_shift(4);a[s]=e.read_shift(o,t===1200?"utf16le":"utf8").replace(Oo,"").replace(Up,"!"),t===1200&&o%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),a}function K$(e){var t=e.read_shift(4),n=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),n}function NDe(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function g2(e,t,n){var a=e.read_shift(2),r,s=n||{};if(e.l+=2,t!==zR&&a!==t&&mDe.indexOf(t)===-1&&!((t&65534)==4126&&(a&65534)==4126))throw new Error("Expected type "+t+" saw "+a);switch(t===zR?a:t){case 2:return r=e.read_shift(2,"i"),s.raw||(e.l+=2),r;case 3:return r=e.read_shift(4,"i"),r;case 11:return e.read_shift(4)!==0;case 19:return r=e.read_shift(4),r;case 30:return Q$(e,a,4).replace(Oo,"");case 31:return G$(e);case 64:return KT(e);case 65:return K$(e);case 71:return NDe(e);case 80:return VE(e,a,!s.raw).replace(Oo,"");case 81:return FDe(e,a).replace(Oo,"");case 4108:return RDe(e);case 4126:case 4127:return a==4127?PDe(e):DDe(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+a)}}function qR(e,t){var n=e.l,a=e.read_shift(4),r=e.read_shift(4),s=[],o=0,i=0,c=-1,A={};for(o=0;o!=r;++o){var d=e.read_shift(4),f=e.read_shift(4);s[o]=[d,f+n]}s.sort(function(b,x){return b[1]-x[1]});var m={};for(o=0;o!=r;++o){if(e.l!==s[o][1]){var h=!0;if(o>0&&t)switch(t[s[o-1][0]].t){case 2:e.l+2===s[o][1]&&(e.l+=2,h=!1);break;case 80:e.l<=s[o][1]&&(e.l=s[o][1],h=!1);break;case 4108:e.l<=s[o][1]&&(e.l=s[o][1],h=!1);break}if((!t||o==0)&&e.l<=s[o][1]&&(h=!1,e.l=s[o][1]),h)throw new Error("Read Error: Expected address "+s[o][1]+" at "+e.l+" :"+o)}if(t){var p=t[s[o][0]];if(m[p.n]=g2(e,p.t,{raw:!0}),p.p==="version"&&(m[p.n]=String(m[p.n]>>16)+"."+("0000"+String(m[p.n]&65535)).slice(-4)),p.n=="CodePage")switch(m[p.n]){case 0:m[p.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Ul(i=m[p.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+m[p.n])}}else if(s[o][0]===1){if(i=m.CodePage=g2(e,zT),Ul(i),c!==-1){var y=e.l;e.l=s[c][1],A=jR(e,i),e.l=y}}else if(s[o][0]===0){if(i===0){c=o,e.l=s[o+1][1];continue}A=jR(e,i)}else{var g=A[s[o][0]],w;switch(e[e.l]){case 65:e.l+=4,w=K$(e);break;case 30:e.l+=4,w=VE(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,w=VE(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,w=e.read_shift(4,"i");break;case 19:e.l+=4,w=e.read_shift(4);break;case 5:e.l+=4,w=e.read_shift(8,"f");break;case 11:e.l+=4,w=Wr(e,4);break;case 64:e.l+=4,w=Vs(KT(e));break;default:throw new Error("unparsed value: "+e[e.l])}m[g]=w}}return e.l=n+a,m}function YR(e,t,n){var a=e.content;if(!a)return{};Gs(a,0);var r,s,o,i,c=0;a.chk("feff","Byte Order: "),a.read_shift(2);var A=a.read_shift(4),d=a.read_shift(16);if(d!==ba.utils.consts.HEADER_CLSID&&d!==n)throw new Error("Bad PropertySet CLSID "+d);if(r=a.read_shift(4),r!==1&&r!==2)throw new Error("Unrecognized #Sets: "+r);if(s=a.read_shift(16),i=a.read_shift(4),r===1&&i!==a.l)throw new Error("Length mismatch: "+i+" !== "+a.l);r===2&&(o=a.read_shift(16),c=a.read_shift(4));var f=qR(a,t),m={SystemIdentifier:A};for(var h in f)m[h]=f[h];if(m.FMTID=s,r===1)return m;if(c-a.l==2&&(a.l+=2),a.l!==c)throw new Error("Length mismatch 2: "+a.l+" !== "+c);var p;try{p=qR(a,null)}catch{}for(h in p)m[h]=p[h];return m.FMTID=[s,o],m}function Ad(e,t){return e.read_shift(t),null}function VDe(e,t,n){for(var a=[],r=e.l+t;e.l<r;)a.push(n(e,r-e.l));if(r!==e.l)throw new Error("Slurp error");return a}function Wr(e,t){return e.read_shift(t)===1}function ss(e){return e.read_shift(2,"u")}function W$(e,t){return VDe(e,t,ss)}function LDe(e){var t=e.read_shift(1),n=e.read_shift(1);return n===1?t:t===1}function Pg(e,t,n){var a=e.read_shift(n&&n.biff>=12?2:1),r="sbcs-cont";if(n&&n.biff>=8,!n||n.biff==8){var s=e.read_shift(1);s&&(r="dbcs-cont")}else n.biff==12&&(r="wstr");n.biff>=2&&n.biff<=5&&(r="cpstr");var o=a?e.read_shift(a,r):"";return o}function MDe(e){var t=e.read_shift(2),n=e.read_shift(1),a=n&4,r=n&8,s=1+(n&1),o=0,i,c={};r&&(o=e.read_shift(2)),a&&(i=e.read_shift(4));var A=s==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,A);return r&&(e.l+=4*o),a&&(e.l+=i),c.t=d,r||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function Bf(e,t,n){var a;if(n){if(n.biff>=2&&n.biff<=5)return e.read_shift(t,"cpstr");if(n.biff>=12)return e.read_shift(t,"dbcs-cont")}var r=e.read_shift(1);return r===0?a=e.read_shift(t,"sbcs-cont"):a=e.read_shift(t,"dbcs-cont"),a}function Dg(e,t,n){var a=e.read_shift(n&&n.biff==2?1:2);return a===0?(e.l++,""):Bf(e,a,n)}function Jf(e,t,n){if(n.biff>5)return Dg(e,t,n);var a=e.read_shift(1);return a===0?(e.l++,""):e.read_shift(a,n.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function ODe(e){var t=e.read_shift(1);e.l++;var n=e.read_shift(2);return e.l+=2,[t,n]}function HDe(e){var t=e.read_shift(4),n=e.l,a=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(a=!0),e.l=n);var r=e.read_shift((a?t-24:t)>>1,"utf16le").replace(Oo,"");return a&&(e.l+=24),r}function $De(e){for(var t=e.read_shift(2),n="";t-- >0;)n+="../";var a=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var r=e.read_shift(4);if(r===0)return n+a.replace(/\\/g,"/");var s=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=e.read_shift(s>>1,"utf16le").replace(Oo,"");return n+o}function QDe(e,t){var n=e.read_shift(16);switch(n){case"e0c9ea79f9bace118c8200aa004ba90b":return HDe(e);case"0303000000000000c000000000000046":return $De(e);default:throw new Error("Unsupported Moniker "+n)}}function ky(e){var t=e.read_shift(4),n=t>0?e.read_shift(t,"utf16le").replace(Oo,""):"";return n}function GDe(e,t){var n=e.l+t,a=e.read_shift(4);if(a!==2)throw new Error("Unrecognized streamVersion: "+a);var r=e.read_shift(2);e.l+=2;var s,o,i,c,A="",d,f;r&16&&(s=ky(e,n-e.l)),r&128&&(o=ky(e,n-e.l)),(r&257)===257&&(i=ky(e,n-e.l)),(r&257)===1&&(c=QDe(e,n-e.l)),r&8&&(A=ky(e,n-e.l)),r&32&&(d=e.read_shift(16)),r&64&&(f=KT(e)),e.l=n;var m=o||i||c||"";m&&A&&(m+="#"+A),m||(m="#"+A),r&2&&m.charAt(0)=="/"&&m.charAt(1)!="/"&&(m="file://"+m);var h={Target:m};return d&&(h.guid=d),f&&(h.time=f),s&&(h.Tooltip=s),h}function j$(e){var t=e.read_shift(1),n=e.read_shift(1),a=e.read_shift(1),r=e.read_shift(1);return[t,n,a,r]}function q$(e,t){var n=j$(e);return n[3]=0,n}function qu(e){var t=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{r:t,c:n,ixfe:a}}function zDe(e){var t=e.read_shift(2),n=e.read_shift(2);return e.l+=8,{type:t,flags:n}}function KDe(e,t,n){return t===0?"":Jf(e,t,n)}function WDe(e,t,n){var a=n.biff>8?4:2,r=e.read_shift(a),s=e.read_shift(a,"i"),o=e.read_shift(a,"i");return[r,s,o]}function Y$(e){var t=e.read_shift(2),n=GT(e);return[t,n]}function jDe(e,t,n){e.l+=4,t-=4;var a=e.l+t,r=Pg(e,t,n),s=e.read_shift(2);if(a-=e.l,s!==a)throw new Error("Malformed AddinUdf: padding = "+a+" != "+s);return e.l+=s,r}function Hw(e){var t=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),r=e.read_shift(2);return{s:{c:a,r:t},e:{c:r,r:n}}}function X$(e){var t=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(1),r=e.read_shift(1);return{s:{c:a,r:t},e:{c:r,r:n}}}var qDe=X$;function J$(e){e.l+=4;var t=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return e.l+=12,[n,t,a]}function YDe(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function XDe(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function ao(e){e.l+=2,e.l+=e.read_shift(2)}var JDe={0:ao,4:ao,5:ao,6:ao,7:XDe,8:ao,9:ao,10:ao,11:ao,12:ao,13:YDe,14:ao,15:ao,16:ao,17:ao,18:ao,19:ao,20:ao,21:J$};function ZDe(e,t){for(var n=e.l+t,a=[];e.l<n;){var r=e.read_shift(2);e.l-=2;try{a.push(JDe[r](e,n-e.l))}catch{return e.l=n,a}}return e.l!=n&&(e.l=n),a}function Ty(e,t){var n={BIFFVer:0,dt:0};switch(n.BIFFVer=e.read_shift(2),t-=2,t>=2&&(n.dt=e.read_shift(2),e.l-=2),n.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+n.BIFFVer)}return e.read_shift(t),n}function e3e(e,t){return t===0||e.read_shift(2),1200}function t3e(e,t,n){if(n.enc)return e.l+=t,"";var a=e.l,r=Jf(e,0,n);return e.read_shift(t+a-e.l),r}function n3e(e,t,n){var a=n&&n.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:a&16,fBelow:a&64,fRight:a&128}}function a3e(e,t,n){var a=e.read_shift(4),r=e.read_shift(1)&3,s=e.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var o=Pg(e,0,n);return o.length===0&&(o="Sheet1"),{pos:a,hs:r,dt:s,name:o}}function r3e(e,t){for(var n=e.l+t,a=e.read_shift(4),r=e.read_shift(4),s=[],o=0;o!=r&&e.l<n;++o)s.push(MDe(e));return s.Count=a,s.Unique=r,s}function s3e(e,t){var n={};return n.dsst=e.read_shift(2),e.l+=t-2,n}function o3e(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var n=e.read_shift(2);e.l+=4;var a=e.read_shift(1);return e.l+=3,a&7&&(t.level=a&7),a&32&&(t.hidden=!0),a&64&&(t.hpt=n/20),t}function i3e(e){var t=zDe(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var n=e.read_shift(4);return n!==0}function l3e(e){return e.read_shift(2),e.read_shift(4)}function XR(e,t,n){var a=0;n&&n.biff==2||(a=e.read_shift(2));var r=e.read_shift(2);n&&n.biff==2&&(a=1-(r>>15),r&=32767);var s={Unsynced:a&1,DyZero:(a&2)>>1,ExAsc:(a&4)>>2,ExDsc:(a&8)>>3};return[s,r]}function u3e(e){var t=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(2),o=e.read_shift(2),i=e.read_shift(2),c=e.read_shift(2),A=e.read_shift(2);return{Pos:[t,n],Dim:[a,r],Flags:s,CurTab:o,FirstTab:i,Selected:c,TabRatio:A}}function c3e(e,t,n){if(n&&n.biff>=2&&n.biff<5)return{};var a=e.read_shift(2);return{RTL:a&64}}function d3e(){}function A3e(e,t,n){var a={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(n&&n.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return a.name=Pg(e,0,n),a}function f3e(e){var t=qu(e);return t.isst=e.read_shift(4),t}function m3e(e,t,n){n.biffguess&&n.biff==2&&(n.biff=5);var a=e.l+t,r=qu(e);n.biff==2&&e.l++;var s=Dg(e,a-e.l,n);return r.val=s,r}function v3e(e,t,n){var a=e.read_shift(2),r=Jf(e,0,n);return[a,r]}var h3e=Jf;function JR(e,t,n){var a=e.l+t,r=n.biff==8||!n.biff?4:2,s=e.read_shift(r),o=e.read_shift(r),i=e.read_shift(2),c=e.read_shift(2);return e.l=a,{s:{r:s,c:i},e:{r:o,c}}}function p3e(e){var t=e.read_shift(2),n=e.read_shift(2),a=Y$(e);return{r:t,c:n,ixfe:a[0],rknum:a[1]}}function g3e(e,t){for(var n=e.l+t-2,a=e.read_shift(2),r=e.read_shift(2),s=[];e.l<n;)s.push(Y$(e));if(e.l!==n)throw new Error("MulRK read error");var o=e.read_shift(2);if(s.length!=o-r+1)throw new Error("MulRK length mismatch");return{r:a,c:r,C:o,rkrec:s}}function y3e(e,t){for(var n=e.l+t-2,a=e.read_shift(2),r=e.read_shift(2),s=[];e.l<n;)s.push(e.read_shift(2));if(e.l!==n)throw new Error("MulBlank read error");var o=e.read_shift(2);if(s.length!=o-r+1)throw new Error("MulBlank length mismatch");return{r:a,c:r,C:o,ixfe:s}}function _3e(e,t,n,a){var r={},s=e.read_shift(4),o=e.read_shift(4),i=e.read_shift(4),c=e.read_shift(2);return r.patternType=pDe[i>>26],a.cellStyles&&(r.alc=s&7,r.fWrap=s>>3&1,r.alcV=s>>4&7,r.fJustLast=s>>7&1,r.trot=s>>8&255,r.cIndent=s>>16&15,r.fShrinkToFit=s>>20&1,r.iReadOrder=s>>22&2,r.fAtrNum=s>>26&1,r.fAtrFnt=s>>27&1,r.fAtrAlc=s>>28&1,r.fAtrBdr=s>>29&1,r.fAtrPat=s>>30&1,r.fAtrProt=s>>31&1,r.dgLeft=o&15,r.dgRight=o>>4&15,r.dgTop=o>>8&15,r.dgBottom=o>>12&15,r.icvLeft=o>>16&127,r.icvRight=o>>23&127,r.grbitDiag=o>>30&3,r.icvTop=i&127,r.icvBottom=i>>7&127,r.icvDiag=i>>14&127,r.dgDiag=i>>21&15,r.icvFore=c&127,r.icvBack=c>>7&127,r.fsxButton=c>>14&1),r}function w3e(e,t,n){var a={};return a.ifnt=e.read_shift(2),a.numFmtId=e.read_shift(2),a.flags=e.read_shift(2),a.fStyle=a.flags>>2&1,t-=6,a.data=_3e(e,t,a.fStyle,n),a}function b3e(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function ZR(e,t,n){var a=qu(e);(n.biff==2||t==9)&&++e.l;var r=LDe(e);return a.val=r,a.t=r===!0||r===!1?"b":"e",a}function x3e(e,t,n){n.biffguess&&n.biff==2&&(n.biff=5);var a=qu(e),r=mo(e);return a.val=r,a}var eN=KDe;function C3e(e,t,n){var a=e.l+t,r=e.read_shift(2),s=e.read_shift(2);if(n.sbcch=s,s==1025||s==14849)return[s,r];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var o=Bf(e,s),i=[];a>e.l;)i.push(Dg(e));return[s,r,o,i]}function tN(e,t,n){var a=e.read_shift(2),r,s={fBuiltIn:a&1,fWantAdvise:a>>>1&1,fWantPict:a>>>2&1,fOle:a>>>3&1,fOleLink:a>>>4&1,cf:a>>>5&1023,fIcon:a>>>15&1};return n.sbcch===14849&&(r=jDe(e,t-2,n)),s.body=r||e.read_shift(t-2),typeof r=="string"&&(s.Name=r),s}var S3e=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function nN(e,t,n){var a=e.l+t,r=e.read_shift(2),s=e.read_shift(1),o=e.read_shift(1),i=e.read_shift(n&&n.biff==2?1:2),c=0;(!n||n.biff>=5)&&(n.biff!=5&&(e.l+=2),c=e.read_shift(2),n.biff==5&&(e.l+=2),e.l+=4);var A=Bf(e,o,n);r&32&&(A=S3e[A.charCodeAt(0)]);var d=a-e.l;n&&n.biff==2&&--d;var f=a==e.l||i===0||!(d>0)?[]:oVe(e,d,n,i);return{chKey:s,Name:A,itab:c,rgce:f}}function Z$(e,t,n){if(n.biff<8)return E3e(e,t,n);for(var a=[],r=e.l+t,s=e.read_shift(n.biff>8?4:2);s--!==0;)a.push(WDe(e,n.biff>8?12:6,n));if(e.l!=r)throw new Error("Bad ExternSheet: "+e.l+" != "+r);return a}function E3e(e,t,n){e[e.l+1]==3&&e[e.l]++;var a=Pg(e,t,n);return a.charCodeAt(0)==3?a.slice(1):a}function B3e(e,t,n){if(n.biff<8){e.l+=t;return}var a=e.read_shift(2),r=e.read_shift(2),s=Bf(e,a,n),o=Bf(e,r,n);return[s,o]}function k3e(e,t,n){var a=X$(e);e.l++;var r=e.read_shift(1);return t-=8,[iVe(e,t,n),r,a]}function aN(e,t,n){var a=qDe(e);switch(n.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[a,rVe(e,t,n)]}function T3e(e){var t=e.read_shift(4)!==0,n=e.read_shift(4)!==0,a=e.read_shift(4);return[t,n,a]}function I3e(e,t,n){if(!(n.biff<8)){var a=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(2),o=e.read_shift(2),i=Jf(e,0,n);return n.biff<8&&e.read_shift(1),[{r:a,c:r},i,o,s]}}function F3e(e,t,n){return I3e(e,t,n)}function P3e(e,t){for(var n=[],a=e.read_shift(2);a--;)n.push(Hw(e));return n}function D3e(e,t,n){if(n&&n.biff<8)return R3e(e,t,n);var a=J$(e),r=ZDe(e,t-22,a[1]);return{cmo:a,ft:r}}var U3e={8:function(e,t){var n=e.l+t;e.l+=10;var a=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var r=e.read_shift(1);return e.l+=r,e.l=n,{fmt:a}}};function R3e(e,t,n){e.l+=4;var a=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var o=[];return o.push((U3e[a]||bo)(e,t,n)),{cmo:[r,a,s],ft:o}}function N3e(e,t,n){var a=e.l,r="";try{e.l+=4;var s=(n.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(s)==-1?e.l+=6:o=ODe(e,6,n);var i=e.read_shift(2);e.read_shift(2),ss(e,2);var c=e.read_shift(2);e.l+=c;for(var A=1;A<e.lens.length-1;++A){if(e.l-a!=e.lens[A])throw new Error("TxO: bad continue record");var d=e[e.l],f=Bf(e,e.lens[A+1]-e.lens[A]-1);if(r+=f,r.length>=(d?i:2*i))break}if(r.length!==i&&r.length!==i*2)throw new Error("cchText: "+i+" != "+r.length);return e.l=a+t,{t:r}}catch{return e.l=a+t,{t:r}}}function V3e(e,t){var n=Hw(e);e.l+=16;var a=GDe(e,t-24);return[n,a]}function L3e(e,t){e.read_shift(2);var n=Hw(e),a=e.read_shift((t-10)/2,"dbcs-cont");return a=a.replace(Oo,""),[n,a]}function M3e(e){var t=[0,0],n;return n=e.read_shift(2),t[0]=KR[n]||n,n=e.read_shift(2),t[1]=KR[n]||n,t}function O3e(e){for(var t=e.read_shift(2),n=[];t-- >0;)n.push(q$(e));return n}function H3e(e){for(var t=e.read_shift(2),n=[];t-- >0;)n.push(q$(e));return n}function $3e(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function e9(e,t,n){if(!n.cellStyles)return bo(e,t);var a=n&&n.biff>=12?4:2,r=e.read_shift(a),s=e.read_shift(a),o=e.read_shift(a),i=e.read_shift(a),c=e.read_shift(2);a==2&&(e.l+=2);var A={s:r,e:s,w:o,ixfe:i,flags:c};return(n.biff>=5||!n.biff)&&(A.level=c>>8&7),A}function Q3e(e,t){var n={};return t<32||(e.l+=16,n.header=mo(e),n.footer=mo(e),e.l+=2),n}function G3e(e,t,n){var a={area:!1};if(n.biff!=5)return e.l+=t,a;var r=e.read_shift(1);return e.l+=3,r&16&&(a.area=!0),a}var z3e=qu,K3e=W$,W3e=Dg;function j3e(e){var t=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(4),r={fmt:t,env:n,len:a,data:e.slice(e.l,e.l+a)};return e.l+=a,r}function q3e(e,t,n){n.biffguess&&n.biff==5&&(n.biff=2);var a=qu(e);++e.l;var r=Jf(e,t-7,n);return a.t="str",a.val=r,a}function Y3e(e){var t=qu(e);++e.l;var n=mo(e);return t.t="n",t.val=n,t}function X3e(e){var t=qu(e);++e.l;var n=e.read_shift(2);return t.t="n",t.val=n,t}function J3e(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function Z3e(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function eUe(e,t,n){var a=e.l+t,r=qu(e),s=e.read_shift(2),o=Bf(e,s,n);return e.l=a,r.t="str",r.val=o,r}var tUe=[2,3,48,49,131,139,140,245],rN=(function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=RT({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(i,c){var A=[],d=eA(1);switch(c.type){case"base64":d=Tl(Di(i));break;case"binary":d=Tl(i);break;case"buffer":case"array":d=i;break}Gs(d,0);var f=d.read_shift(1),m=!!(f&136),h=!1,p=!1;switch(f){case 2:break;case 3:break;case 48:h=!0,m=!0;break;case 49:h=!0,m=!0;break;case 131:break;case 139:break;case 140:p=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var y=0,g=521;f==2&&(y=d.read_shift(2)),d.l+=3,f!=2&&(y=d.read_shift(4)),y>1048576&&(y=1e6),f!=2&&(g=d.read_shift(2));var w=d.read_shift(2),b=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(b=e[d[d.l]]),d.l+=1,d.l+=2),p&&(d.l+=36);for(var x=[],T={},F=Math.min(d.length,f==2?521:g-10-(h?264:0)),k=p?32:11;d.l<F&&d[d.l]!=13;)switch(T={},T.name=O0.utils.decode(b,d.slice(d.l,d.l+k)).replace(/[\u0000\r\n].*$/g,""),d.l+=k,T.type=String.fromCharCode(d.read_shift(1)),f!=2&&!p&&(T.offset=d.read_shift(4)),T.len=d.read_shift(1),f==2&&(T.offset=d.read_shift(2)),T.dec=d.read_shift(1),T.name.length&&x.push(T),f!=2&&(d.l+=p?13:14),T.type){case"B":(!h||T.len!=8)&&c.WTF&&console.log("Skipping "+T.name+":"+T.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+T.name+":"+T.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+T.type)}if(d[d.l]!==13&&(d.l=g-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=g;var S=0,E=0;for(A[0]=[],E=0;E!=x.length;++E)A[0][E]=x[E].name;for(;y-- >0;){if(d[d.l]===42){d.l+=w;continue}for(++d.l,A[++S]=[],E=0,E=0;E!=x.length;++E){var C=d.slice(d.l,d.l+x[E].len);d.l+=x[E].len,Gs(C,0);var D=O0.utils.decode(b,C);switch(x[E].type){case"C":D.trim().length&&(A[S][E]=D.replace(/\s+$/,""));break;case"D":D.length===8?A[S][E]=new Date(+D.slice(0,4),+D.slice(4,6)-1,+D.slice(6,8)):A[S][E]=D;break;case"F":A[S][E]=parseFloat(D.trim());break;case"+":case"I":A[S][E]=p?C.read_shift(-4,"i")^2147483648:C.read_shift(4,"i");break;case"L":switch(D.trim().toUpperCase()){case"Y":case"T":A[S][E]=!0;break;case"N":case"F":A[S][E]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+D+"|")}break;case"M":if(!m)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));A[S][E]="##MEMO##"+(p?parseInt(D.trim(),10):C.read_shift(4));break;case"N":D=D.replace(/\u0000/g,"").trim(),D&&D!="."&&(A[S][E]=+D||0);break;case"@":A[S][E]=new Date(C.read_shift(-8,"f")-621356832e5);break;case"T":A[S][E]=new Date((C.read_shift(4)-2440588)*864e5+C.read_shift(4));break;case"Y":A[S][E]=C.read_shift(4,"i")/1e4+C.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":A[S][E]=-C.read_shift(-8,"f");break;case"B":if(h&&x[E].len==8){A[S][E]=C.read_shift(8,"f");break}case"G":case"P":C.l+=x[E].len;break;case"0":if(x[E].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+x[E].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(A=A.slice(0,c.sheetRows)),c.DBF=x,A}function a(i,c){var A=c||{};A.dateNF||(A.dateNF="yyyymmdd");var d=xh(n(i,A),A);return d["!cols"]=A.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete A.DBF,d}function r(i,c){try{return uA(a(i,c),c)}catch(A){if(c&&c.WTF)throw A}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function o(i,c){var A=c||{};if(+A.codepage>=0&&Ul(+A.codepage),A.type=="string")throw new Error("Cannot write DBF to JS string");var d=UE(),f=GE(i,{header:1,raw:!0,cellDates:!0}),m=f[0],h=f.slice(1),p=i["!cols"]||[],y=0,g=0,w=0,b=1;for(y=0;y<m.length;++y){if(((p[y]||{}).DBF||{}).name){m[y]=p[y].DBF.name,++w;continue}if(m[y]!=null){if(++w,typeof m[y]=="number"&&(m[y]=m[y].toString(10)),typeof m[y]!="string")throw new Error("DBF Invalid column name "+m[y]+" |"+typeof m[y]+"|");if(m.indexOf(m[y])!==y){for(g=0;g<1024;++g)if(m.indexOf(m[y]+"_"+g)==-1){m[y]+="_"+g;break}}}}var x=Vr(i["!ref"]),T=[],F=[],k=[];for(y=0;y<=x.e.c-x.s.c;++y){var S="",E="",C=0,D=[];for(g=0;g<h.length;++g)h[g][y]!=null&&D.push(h[g][y]);if(D.length==0||m[y]==null){T[y]="?";continue}for(g=0;g<D.length;++g){switch(typeof D[g]){case"number":E="B";break;case"string":E="C";break;case"boolean":E="L";break;case"object":E=D[g]instanceof Date?"D":"C";break;default:E="C"}C=Math.max(C,String(D[g]).length),S=S&&S!=E?"C":E}C>250&&(C=250),E=((p[y]||{}).DBF||{}).type,E=="C"&&p[y].DBF.len>C&&(C=p[y].DBF.len),S=="B"&&E=="N"&&(S="N",k[y]=p[y].DBF.dec,C=p[y].DBF.len),F[y]=S=="C"||E=="N"?C:s[S]||0,b+=F[y],T[y]=S}var P=d.next(32);for(P.write_shift(4,318902576),P.write_shift(4,h.length),P.write_shift(2,296+32*w),P.write_shift(2,b),y=0;y<4;++y)P.write_shift(4,0);for(P.write_shift(4,0|(+t[ZH]||3)<<8),y=0,g=0;y<m.length;++y)if(m[y]!=null){var O=d.next(32),H=(m[y].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);O.write_shift(1,H,"sbcs"),O.write_shift(1,T[y]=="?"?"C":T[y],"sbcs"),O.write_shift(4,g),O.write_shift(1,F[y]||s[T[y]]||0),O.write_shift(1,k[y]||0),O.write_shift(1,2),O.write_shift(4,0),O.write_shift(1,0),O.write_shift(4,0),O.write_shift(4,0),g+=F[y]||s[T[y]]||0}var ie=d.next(264);for(ie.write_shift(4,13),y=0;y<65;++y)ie.write_shift(4,0);for(y=0;y<h.length;++y){var Ae=d.next(b);for(Ae.write_shift(1,0),g=0;g<m.length;++g)if(m[g]!=null)switch(T[g]){case"L":Ae.write_shift(1,h[y][g]==null?63:h[y][g]?84:70);break;case"B":Ae.write_shift(8,h[y][g]||0,"f");break;case"N":var j="0";for(typeof h[y][g]=="number"&&(j=h[y][g].toFixed(k[g]||0)),w=0;w<F[g]-j.length;++w)Ae.write_shift(1,32);Ae.write_shift(1,j,"sbcs");break;case"D":h[y][g]?(Ae.write_shift(4,("0000"+h[y][g].getFullYear()).slice(-4),"sbcs"),Ae.write_shift(2,("00"+(h[y][g].getMonth()+1)).slice(-2),"sbcs"),Ae.write_shift(2,("00"+h[y][g].getDate()).slice(-2),"sbcs")):Ae.write_shift(8,"00000000","sbcs");break;case"C":var J=String(h[y][g]!=null?h[y][g]:"").slice(0,F[g]);for(Ae.write_shift(1,J,"sbcs"),w=0;w<F[g]-J.length;++w)Ae.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:r,to_sheet:a,from_sheet:o}})(),nUe=(function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Vu(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),n=function(m,h){var p=e[h];return typeof p=="number"?_R(p):p},a=function(m,h,p){var y=h.charCodeAt(0)-32<<4|p.charCodeAt(0)-48;return y==59?m:_R(y)};e["|"]=254;function r(m,h){switch(h.type){case"base64":return s(Di(m),h);case"binary":return s(m,h);case"buffer":return s(pa&&Buffer.isBuffer(m)?m.toString("binary"):jf(m),h);case"array":return s(Ef(m),h)}throw new Error("Unrecognized type "+h.type)}function s(m,h){var p=m.split(/[\n\r]+/),y=-1,g=-1,w=0,b=0,x=[],T=[],F=null,k={},S=[],E=[],C=[],D=0,P;for(+h.codepage>=0&&Ul(+h.codepage);w!==p.length;++w){D=0;var O=p[w].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,a).replace(t,n),H=O.replace(/;;/g,"\0").split(";").map(function(Q){return Q.replace(/\u0000/g,";")}),ie=H[0],Ae;if(O.length>0)switch(ie){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":H[1].charAt(0)=="P"&&T.push(O.slice(3).replace(/;;/g,";"));break;case"C":var j=!1,J=!1,ue=!1,ne=!1,Y=-1,te=-1;for(b=1;b<H.length;++b)switch(H[b].charAt(0)){case"A":break;case"X":g=parseInt(H[b].slice(1))-1,J=!0;break;case"Y":for(y=parseInt(H[b].slice(1))-1,J||(g=0),P=x.length;P<=y;++P)x[P]=[];break;case"K":Ae=H[b].slice(1),Ae.charAt(0)==='"'?Ae=Ae.slice(1,Ae.length-1):Ae==="TRUE"?Ae=!0:Ae==="FALSE"?Ae=!1:isNaN(Ol(Ae))?isNaN(Wv(Ae).getDate())||(Ae=Vs(Ae)):(Ae=Ol(Ae),F!==null&&wh(F)&&(Ae=Ow(Ae))),j=!0;break;case"E":ne=!0;var L=xv(H[b].slice(1),{r:y,c:g});x[y][g]=[x[y][g],L];break;case"S":ue=!0,x[y][g]=[x[y][g],"S5S"];break;case"G":break;case"R":Y=parseInt(H[b].slice(1))-1;break;case"C":te=parseInt(H[b].slice(1))-1;break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+O)}if(j&&(x[y][g]&&x[y][g].length==2?x[y][g][0]=Ae:x[y][g]=Ae,F=null),ue){if(ne)throw new Error("SYLK shared formula cannot have own formula");var N=Y>-1&&x[Y][te];if(!N||!N[1])throw new Error("SYLK shared formula cannot find base");x[y][g][1]=c9(N[1],{r:y-Y,c:g-te})}break;case"F":var q=0;for(b=1;b<H.length;++b)switch(H[b].charAt(0)){case"X":g=parseInt(H[b].slice(1))-1,++q;break;case"Y":for(y=parseInt(H[b].slice(1))-1,P=x.length;P<=y;++P)x[P]=[];break;case"M":D=parseInt(H[b].slice(1))/20;break;case"F":break;case"G":break;case"P":F=T[parseInt(H[b].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(C=H[b].slice(1).split(" "),P=parseInt(C[0],10);P<=parseInt(C[1],10);++P)D=parseInt(C[2],10),E[P-1]=D===0?{hidden:!0}:{wch:D},jv(E[P-1]);break;case"C":g=parseInt(H[b].slice(1))-1,E[g]||(E[g]={});break;case"R":y=parseInt(H[b].slice(1))-1,S[y]||(S[y]={}),D>0?(S[y].hpt=D,S[y].hpx=K0(D)):D===0&&(S[y].hidden=!0);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+O)}q<1&&(F=null);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+O)}}return S.length>0&&(k["!rows"]=S),E.length>0&&(k["!cols"]=E),h&&h.sheetRows&&(x=x.slice(0,h.sheetRows)),[x,k]}function o(m,h){var p=r(m,h),y=p[0],g=p[1],w=xh(y,h);return Vu(g).forEach(function(b){w[b]=g[b]}),w}function i(m,h){return uA(o(m,h),h)}function c(m,h,p,y){var g="C;Y"+(p+1)+";X"+(y+1)+";K";switch(m.t){case"n":g+=m.v||0,m.f&&!m.F&&(g+=";E"+$Re(m.f,{r:p,c:y}));break;case"b":g+=m.v?"TRUE":"FALSE";break;case"e":g+=m.w||m.v;break;case"d":g+='"'+(m.w||m.v)+'"';break;case"s":g+='"'+m.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return g}function A(m,h){h.forEach(function(p,y){var g="F;W"+(y+1)+" "+(y+1)+" ";p.hidden?g+="0":(typeof p.width=="number"&&!p.wpx&&(p.wpx=_2(p.width)),typeof p.wpx=="number"&&!p.wch&&(p.wch=w2(p.wpx)),typeof p.wch=="number"&&(g+=Math.round(p.wch))),g.charAt(g.length-1)!=" "&&m.push(g)})}function d(m,h){h.forEach(function(p,y){var g="F;";p.hidden?g+="M0;":p.hpt?g+="M"+20*p.hpt+";":p.hpx&&(g+="M"+20*i9(p.hpx)+";"),g.length>2&&m.push(g+"R"+(y+1))})}function f(m,h){var p=["ID;PWXL;N;E"],y=[],g=Vr(m["!ref"]),w,b=Array.isArray(m),x=`\r
`;p.push("P;PGeneral"),p.push("F;P0;DG0G8;M255"),m["!cols"]&&A(p,m["!cols"]),m["!rows"]&&d(p,m["!rows"]),p.push("B;Y"+(g.e.r-g.s.r+1)+";X"+(g.e.c-g.s.c+1)+";D"+[g.s.c,g.s.r,g.e.c,g.e.r].join(" "));for(var T=g.s.r;T<=g.e.r;++T)for(var F=g.s.c;F<=g.e.c;++F){var k=qn({r:T,c:F});w=b?(m[T]||[])[F]:m[k],!(!w||w.v==null&&(!w.f||w.F))&&y.push(c(w,m,T,F))}return p.join(x)+x+y.join(x)+x+"E"+x}return{to_workbook:i,to_sheet:o,from_sheet:f}})(),aUe=(function(){function e(s,o){switch(o.type){case"base64":return t(Di(s),o);case"binary":return t(s,o);case"buffer":return t(pa&&Buffer.isBuffer(s)?s.toString("binary"):jf(s),o);case"array":return t(Ef(s),o)}throw new Error("Unrecognized type "+o.type)}function t(s,o){for(var i=s.split(`
`),c=-1,A=-1,d=0,f=[];d!==i.length;++d){if(i[d].trim()==="BOT"){f[++c]=[],A=0;continue}if(!(c<0)){var m=i[d].trim().split(","),h=m[0],p=m[1];++d;for(var y=i[d]||"";(y.match(/["]/g)||[]).length&1&&d<i.length-1;)y+=`
`+i[++d];switch(y=y.trim(),+h){case-1:if(y==="BOT"){f[++c]=[],A=0;continue}else if(y!=="EOD")throw new Error("Unrecognized DIF special command "+y);break;case 0:y==="TRUE"?f[c][A]=!0:y==="FALSE"?f[c][A]=!1:isNaN(Ol(p))?isNaN(Wv(p).getDate())?f[c][A]=p:f[c][A]=Vs(p):f[c][A]=Ol(p),++A;break;case 1:y=y.slice(1,y.length-1),y=y.replace(/""/g,'"'),y&&y.match(/^=".*"$/)&&(y=y.slice(2,-1)),f[c][A++]=y!==""?y:null;break}if(y==="EOD")break}}return o&&o.sheetRows&&(f=f.slice(0,o.sheetRows)),f}function n(s,o){return xh(e(s,o),o)}function a(s,o){return uA(n(s,o),o)}var r=(function(){var s=function(c,A,d,f,m){c.push(A),c.push(d+","+f),c.push('"'+m.replace(/"/g,'""')+'"')},o=function(c,A,d,f){c.push(A+","+d),c.push(A==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var A=[],d=Vr(c["!ref"]),f,m=Array.isArray(c);s(A,"TABLE",0,1,"sheetjs"),s(A,"VECTORS",0,d.e.r-d.s.r+1,""),s(A,"TUPLES",0,d.e.c-d.s.c+1,""),s(A,"DATA",0,0,"");for(var h=d.s.r;h<=d.e.r;++h){o(A,-1,0,"BOT");for(var p=d.s.c;p<=d.e.c;++p){var y=qn({r:h,c:p});if(f=m?(c[h]||[])[p]:c[y],!f){o(A,1,0,"");continue}switch(f.t){case"n":var g=f.w;!g&&f.v!=null&&(g=f.v),g==null?f.f&&!f.F?o(A,1,0,"="+f.f):o(A,1,0,""):o(A,0,g,"V");break;case"b":o(A,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":o(A,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=ll(f.z||ea[14],Qo(Vs(f.v)))),o(A,0,f.w,"V");break;default:o(A,1,0,"")}}}o(A,-1,0,"EOD");var w=`\r
`,b=A.join(w);return b}})();return{to_workbook:a,to_sheet:n,from_sheet:r}})(),rUe=(function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function n(f,m){for(var h=f.split(`
`),p=-1,y=-1,g=0,w=[];g!==h.length;++g){var b=h[g].trim().split(":");if(b[0]==="cell"){var x=Lo(b[1]);if(w.length<=x.r)for(p=w.length;p<=x.r;++p)w[p]||(w[p]=[]);switch(p=x.r,y=x.c,b[2]){case"t":w[p][y]=e(b[3]);break;case"v":w[p][y]=+b[3];break;case"vtf":var T=b[b.length-1];case"vtc":switch(b[3]){case"nl":w[p][y]=!!+b[4];break;default:w[p][y]=+b[4];break}b[2]=="vtf"&&(w[p][y]=[w[p][y],T])}}}return m&&m.sheetRows&&(w=w.slice(0,m.sheetRows)),w}function a(f,m){return xh(n(f,m),m)}function r(f,m){return uA(a(f,m),m)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,i=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function A(f){if(!f||!f["!ref"])return"";for(var m=[],h=[],p,y="",g=bh(f["!ref"]),w=Array.isArray(f),b=g.s.r;b<=g.e.r;++b)for(var x=g.s.c;x<=g.e.c;++x)if(y=qn({r:b,c:x}),p=w?(f[b]||[])[x]:f[y],!(!p||p.v==null||p.t==="z")){switch(h=["cell",y,"t"],p.t){case"s":case"str":h.push(t(p.v));break;case"n":p.f?(h[2]="vtf",h[3]="n",h[4]=p.v,h[5]=t(p.f)):(h[2]="v",h[3]=p.v);break;case"b":h[2]="vt"+(p.f?"f":"c"),h[3]="nl",h[4]=p.v?"1":"0",h[5]=t(p.f||(p.v?"TRUE":"FALSE"));break;case"d":var T=Qo(Vs(p.v));h[2]="vtc",h[3]="nd",h[4]=""+T,h[5]=p.w||ll(p.z||ea[14],T);break;case"e":continue}m.push(h.join(":"))}return m.push("sheet:c:"+(g.e.c-g.s.c+1)+":r:"+(g.e.r-g.s.r+1)+":tvf:1"),m.push("valueformat:1:text-wiki"),m.join(`
`)}function d(f){return[s,o,i,o,A(f),c].join(`
`)}return{to_workbook:r,to_sheet:a,from_sheet:d}})(),G0=(function(){function e(d,f,m,h,p){p.raw?f[m][h]=d:d===""||(d==="TRUE"?f[m][h]=!0:d==="FALSE"?f[m][h]=!1:isNaN(Ol(d))?isNaN(Wv(d).getDate())?f[m][h]=d:f[m][h]=Vs(d):f[m][h]=Ol(d))}function t(d,f){var m=f||{},h=[];if(!d||d.length===0)return h;for(var p=d.split(/[\r\n]/),y=p.length-1;y>=0&&p[y].length===0;)--y;for(var g=10,w=0,b=0;b<=y;++b)w=p[b].indexOf(" "),w==-1?w=p[b].length:w++,g=Math.max(g,w);for(b=0;b<=y;++b){h[b]=[];var x=0;for(e(p[b].slice(0,g).trim(),h,b,x,m),x=1;x<=(p[b].length-g)/10+1;++x)e(p[b].slice(g+(x-1)*10,g+x*10).trim(),h,b,x,m)}return m.sheetRows&&(h=h.slice(0,m.sheetRows)),h}var n={44:",",9:"	",59:";",124:"|"},a={44:3,9:2,59:1,124:0};function r(d){for(var f={},m=!1,h=0,p=0;h<d.length;++h)(p=d.charCodeAt(h))==34?m=!m:!m&&p in n&&(f[p]=(f[p]||0)+1);p=[];for(h in f)Object.prototype.hasOwnProperty.call(f,h)&&p.push([f[h],h]);if(!p.length){f=a;for(h in f)Object.prototype.hasOwnProperty.call(f,h)&&p.push([f[h],h])}return p.sort(function(y,g){return y[0]-g[0]||a[y[1]]-a[g[1]]}),n[p.pop()[1]]||44}function s(d,f){var m=f||{},h="",p=m.dense?[]:{},y={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(h=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(h=d.charAt(4),d=d.slice(6)):h=r(d.slice(0,1024)):m&&m.FS?h=m.FS:h=r(d.slice(0,1024));var g=0,w=0,b=0,x=0,T=0,F=h.charCodeAt(0),k=!1,S=0,E=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var C=m.dateNF!=null?vPe(m.dateNF):null;function D(){var P=d.slice(x,T),O={};if(P.charAt(0)=='"'&&P.charAt(P.length-1)=='"'&&(P=P.slice(1,-1).replace(/""/g,'"')),P.length===0)O.t="z";else if(m.raw)O.t="s",O.v=P;else if(P.trim().length===0)O.t="s",O.v=P;else if(P.charCodeAt(0)==61)P.charCodeAt(1)==34&&P.charCodeAt(P.length-1)==34?(O.t="s",O.v=P.slice(2,-1).replace(/""/g,'"')):GRe(P)?(O.t="n",O.f=P.slice(1)):(O.t="s",O.v=P);else if(P=="TRUE")O.t="b",O.v=!0;else if(P=="FALSE")O.t="b",O.v=!1;else if(!isNaN(b=Ol(P)))O.t="n",m.cellText!==!1&&(O.w=P),O.v=b;else if(!isNaN(Wv(P).getDate())||C&&P.match(C)){O.z=m.dateNF||ea[14];var H=0;C&&P.match(C)&&(P=hPe(P,m.dateNF,P.match(C)||[]),H=1),m.cellDates?(O.t="d",O.v=Vs(P,H)):(O.t="n",O.v=Qo(Vs(P,H))),m.cellText!==!1&&(O.w=ll(O.z,O.v instanceof Date?Qo(O.v):O.v)),m.cellNF||delete O.z}else O.t="s",O.v=P;if(O.t=="z"||(m.dense?(p[g]||(p[g]=[]),p[g][w]=O):p[qn({c:w,r:g})]=O),x=T+1,E=d.charCodeAt(x),y.e.c<w&&(y.e.c=w),y.e.r<g&&(y.e.r=g),S==F)++w;else if(w=0,++g,m.sheetRows&&m.sheetRows<=g)return!0}e:for(;T<d.length;++T)switch(S=d.charCodeAt(T)){case 34:E===34&&(k=!k);break;case F:case 10:case 13:if(!k&&D())break e;break}return T-x>0&&D(),p["!ref"]=Sa(y),p}function o(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,f):xh(t(d,f),f)}function i(d,f){var m="",h=f.type=="string"?[0,0,0,0]:e4(d,f);switch(f.type){case"base64":m=Di(d);break;case"binary":m=d;break;case"buffer":f.codepage==65001?m=d.toString("utf8"):f.codepage&&typeof O0<"u"||(m=pa&&Buffer.isBuffer(d)?d.toString("binary"):jf(d));break;case"array":m=Ef(d);break;case"string":m=d;break;default:throw new Error("Unrecognized type "+f.type)}return h[0]==239&&h[1]==187&&h[2]==191?m=mr(m.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?m=mr(m):f.type=="binary"&&typeof O0<"u",m.slice(0,19)=="socialcalc:version:"?rUe.to_sheet(f.type=="string"?m:mr(m),f):o(m,f)}function c(d,f){return uA(i(d,f),f)}function A(d){for(var f=[],m=Vr(d["!ref"]),h,p=Array.isArray(d),y=m.s.r;y<=m.e.r;++y){for(var g=[],w=m.s.c;w<=m.e.c;++w){var b=qn({r:y,c:w});if(h=p?(d[y]||[])[w]:d[b],!h||h.v==null){g.push("          ");continue}for(var x=(h.w||(Mc(h),h.w)||"").slice(0,10);x.length<10;)x+=" ";g.push(x+(w===0?" ":""))}f.push(g.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:i,from_sheet:A}})();function sUe(e,t){var n=t||{},a=!!n.WTF;n.WTF=!0;try{var r=nUe.to_workbook(e,n);return n.WTF=a,r}catch(s){if(n.WTF=a,!s.message.match(/SYLK bad record ID/)&&a)throw s;return G0.to_workbook(e,t)}}var i0=(function(){function e(L,N,q){if(L){Gs(L,L.l||0);for(var Q=q.Enum||Y;L.l<L.length;){var ee=L.read_shift(2),z=Q[ee]||Q[65535],X=L.read_shift(2),le=L.l+X,re=z.f&&z.f(L,X,q);if(L.l=le,N(re,z,ee))return}}}function t(L,N){switch(N.type){case"base64":return n(Tl(Di(L)),N);case"binary":return n(Tl(L),N);case"buffer":case"array":return n(L,N)}throw"Unsupported type "+N.type}function n(L,N){if(!L)return L;var q=N||{},Q=q.dense?[]:{},ee="Sheet1",z="",X=0,le={},re=[],de=[],G={s:{r:0,c:0},e:{r:0,c:0}},Z=q.sheetRows||0;if(L[2]==0&&(L[3]==8||L[3]==9)&&L.length>=16&&L[14]==5&&L[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(L[2]==2)q.Enum=Y,e(L,function(ye,Ce,_e){switch(_e){case 0:q.vers=ye,ye>=4096&&(q.qpro=!0);break;case 6:G=ye;break;case 204:ye&&(z=ye);break;case 222:z=ye;break;case 15:case 51:q.qpro||(ye[1].v=ye[1].v.slice(1));case 13:case 14:case 16:_e==14&&(ye[2]&112)==112&&(ye[2]&15)>1&&(ye[2]&15)<15&&(ye[1].z=q.dateNF||ea[14],q.cellDates&&(ye[1].t="d",ye[1].v=Ow(ye[1].v))),q.qpro&&ye[3]>X&&(Q["!ref"]=Sa(G),le[ee]=Q,re.push(ee),Q=q.dense?[]:{},G={s:{r:0,c:0},e:{r:0,c:0}},X=ye[3],ee=z||"Sheet"+(X+1),z="");var De=q.dense?(Q[ye[0].r]||[])[ye[0].c]:Q[qn(ye[0])];if(De){De.t=ye[1].t,De.v=ye[1].v,ye[1].z!=null&&(De.z=ye[1].z),ye[1].f!=null&&(De.f=ye[1].f);break}q.dense?(Q[ye[0].r]||(Q[ye[0].r]=[]),Q[ye[0].r][ye[0].c]=ye[1]):Q[qn(ye[0])]=ye[1];break}},q);else if(L[2]==26||L[2]==14)q.Enum=te,L[2]==14&&(q.qpro=!0,L.l=0),e(L,function(ye,Ce,_e){switch(_e){case 204:ee=ye;break;case 22:ye[1].v=ye[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ye[3]>X&&(Q["!ref"]=Sa(G),le[ee]=Q,re.push(ee),Q=q.dense?[]:{},G={s:{r:0,c:0},e:{r:0,c:0}},X=ye[3],ee="Sheet"+(X+1)),Z>0&&ye[0].r>=Z)break;q.dense?(Q[ye[0].r]||(Q[ye[0].r]=[]),Q[ye[0].r][ye[0].c]=ye[1]):Q[qn(ye[0])]=ye[1],G.e.c<ye[0].c&&(G.e.c=ye[0].c),G.e.r<ye[0].r&&(G.e.r=ye[0].r);break;case 27:ye[14e3]&&(de[ye[14e3][0]]=ye[14e3][1]);break;case 1537:de[ye[0]]=ye[1],ye[0]==X&&(ee=ye[1]);break}},q);else throw new Error("Unrecognized LOTUS BOF "+L[2]);if(Q["!ref"]=Sa(G),le[z||ee]=Q,re.push(z||ee),!de.length)return{SheetNames:re,Sheets:le};for(var ce={},Se=[],Pe=0;Pe<de.length;++Pe)le[re[Pe]]?(Se.push(de[Pe]||re[Pe]),ce[de[Pe]]=le[de[Pe]]||le[re[Pe]]):(Se.push(de[Pe]),ce[de[Pe]]={"!ref":"A1"});return{SheetNames:Se,Sheets:ce}}function a(L,N){var q=N||{};if(+q.codepage>=0&&Ul(+q.codepage),q.type=="string")throw new Error("Cannot write WK1 to JS string");var Q=UE(),ee=Vr(L["!ref"]),z=Array.isArray(L),X=[];xl(Q,0,s(1030)),xl(Q,6,c(ee));for(var le=Math.min(ee.e.r,8191),re=ee.s.r;re<=le;++re)for(var de=Js(re),G=ee.s.c;G<=ee.e.c;++G){re===ee.s.r&&(X[G]=ws(G));var Z=X[G]+de,ce=z?(L[re]||[])[G]:L[Z];if(!(!ce||ce.t=="z"))if(ce.t=="n")(ce.v|0)==ce.v&&ce.v>=-32768&&ce.v<=32767?xl(Q,13,h(re,G,ce.v)):xl(Q,14,y(re,G,ce.v));else{var Se=Mc(ce);xl(Q,15,f(re,G,Se.slice(0,239)))}}return xl(Q,1),Q.end()}function r(L,N){var q=N||{};if(+q.codepage>=0&&Ul(+q.codepage),q.type=="string")throw new Error("Cannot write WK3 to JS string");var Q=UE();xl(Q,0,o(L));for(var ee=0,z=0;ee<L.SheetNames.length;++ee)(L.Sheets[L.SheetNames[ee]]||{})["!ref"]&&xl(Q,27,ne(L.SheetNames[ee],z++));var X=0;for(ee=0;ee<L.SheetNames.length;++ee){var le=L.Sheets[L.SheetNames[ee]];if(!(!le||!le["!ref"])){for(var re=Vr(le["!ref"]),de=Array.isArray(le),G=[],Z=Math.min(re.e.r,8191),ce=re.s.r;ce<=Z;++ce)for(var Se=Js(ce),Pe=re.s.c;Pe<=re.e.c;++Pe){ce===re.s.r&&(G[Pe]=ws(Pe));var ye=G[Pe]+Se,Ce=de?(le[ce]||[])[Pe]:le[ye];if(!(!Ce||Ce.t=="z"))if(Ce.t=="n")xl(Q,23,D(ce,Pe,X,Ce.v));else{var _e=Mc(Ce);xl(Q,22,S(ce,Pe,X,_e.slice(0,239)))}}++X}}return xl(Q,1),Q.end()}function s(L){var N=gs(2);return N.write_shift(2,L),N}function o(L){var N=gs(26);N.write_shift(2,4096),N.write_shift(2,4),N.write_shift(4,0);for(var q=0,Q=0,ee=0,z=0;z<L.SheetNames.length;++z){var X=L.SheetNames[z],le=L.Sheets[X];if(!(!le||!le["!ref"])){++ee;var re=bh(le["!ref"]);q<re.e.r&&(q=re.e.r),Q<re.e.c&&(Q=re.e.c)}}return q>8191&&(q=8191),N.write_shift(2,q),N.write_shift(1,ee),N.write_shift(1,Q),N.write_shift(2,0),N.write_shift(2,0),N.write_shift(1,1),N.write_shift(1,2),N.write_shift(4,0),N.write_shift(4,0),N}function i(L,N,q){var Q={s:{c:0,r:0},e:{c:0,r:0}};return N==8&&q.qpro?(Q.s.c=L.read_shift(1),L.l++,Q.s.r=L.read_shift(2),Q.e.c=L.read_shift(1),L.l++,Q.e.r=L.read_shift(2),Q):(Q.s.c=L.read_shift(2),Q.s.r=L.read_shift(2),N==12&&q.qpro&&(L.l+=2),Q.e.c=L.read_shift(2),Q.e.r=L.read_shift(2),N==12&&q.qpro&&(L.l+=2),Q.s.c==65535&&(Q.s.c=Q.e.c=Q.s.r=Q.e.r=0),Q)}function c(L){var N=gs(8);return N.write_shift(2,L.s.c),N.write_shift(2,L.s.r),N.write_shift(2,L.e.c),N.write_shift(2,L.e.r),N}function A(L,N,q){var Q=[{c:0,r:0},{t:"n",v:0},0,0];return q.qpro&&q.vers!=20768?(Q[0].c=L.read_shift(1),Q[3]=L.read_shift(1),Q[0].r=L.read_shift(2),L.l+=2):(Q[2]=L.read_shift(1),Q[0].c=L.read_shift(2),Q[0].r=L.read_shift(2)),Q}function d(L,N,q){var Q=L.l+N,ee=A(L,N,q);if(ee[1].t="s",q.vers==20768){L.l++;var z=L.read_shift(1);return ee[1].v=L.read_shift(z,"utf8"),ee}return q.qpro&&L.l++,ee[1].v=L.read_shift(Q-L.l,"cstr"),ee}function f(L,N,q){var Q=gs(7+q.length);Q.write_shift(1,255),Q.write_shift(2,N),Q.write_shift(2,L),Q.write_shift(1,39);for(var ee=0;ee<Q.length;++ee){var z=q.charCodeAt(ee);Q.write_shift(1,z>=128?95:z)}return Q.write_shift(1,0),Q}function m(L,N,q){var Q=A(L,N,q);return Q[1].v=L.read_shift(2,"i"),Q}function h(L,N,q){var Q=gs(7);return Q.write_shift(1,255),Q.write_shift(2,N),Q.write_shift(2,L),Q.write_shift(2,q,"i"),Q}function p(L,N,q){var Q=A(L,N,q);return Q[1].v=L.read_shift(8,"f"),Q}function y(L,N,q){var Q=gs(13);return Q.write_shift(1,255),Q.write_shift(2,N),Q.write_shift(2,L),Q.write_shift(8,q,"f"),Q}function g(L,N,q){var Q=L.l+N,ee=A(L,N,q);if(ee[1].v=L.read_shift(8,"f"),q.qpro)L.l=Q;else{var z=L.read_shift(2);T(L.slice(L.l,L.l+z),ee),L.l+=z}return ee}function w(L,N,q){var Q=N&32768;return N&=-32769,N=(Q?L:0)+(N>=8192?N-16384:N),(Q?"":"$")+(q?ws(N):Js(N))}var b={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},x=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function T(L,N){Gs(L,0);for(var q=[],Q=0,ee="",z="",X="",le="";L.l<L.length;){var re=L[L.l++];switch(re){case 0:q.push(L.read_shift(8,"f"));break;case 1:z=w(N[0].c,L.read_shift(2),!0),ee=w(N[0].r,L.read_shift(2),!1),q.push(z+ee);break;case 2:{var de=w(N[0].c,L.read_shift(2),!0),G=w(N[0].r,L.read_shift(2),!1);z=w(N[0].c,L.read_shift(2),!0),ee=w(N[0].r,L.read_shift(2),!1),q.push(de+G+":"+z+ee)}break;case 3:if(L.l<L.length){console.error("WK1 premature formula end");return}break;case 4:q.push("("+q.pop()+")");break;case 5:q.push(L.read_shift(2));break;case 6:{for(var Z="";re=L[L.l++];)Z+=String.fromCharCode(re);q.push('"'+Z.replace(/"/g,'""')+'"')}break;case 8:q.push("-"+q.pop());break;case 23:q.push("+"+q.pop());break;case 22:q.push("NOT("+q.pop()+")");break;case 20:case 21:le=q.pop(),X=q.pop(),q.push(["AND","OR"][re-20]+"("+X+","+le+")");break;default:if(re<32&&x[re])le=q.pop(),X=q.pop(),q.push(X+x[re]+le);else if(b[re]){if(Q=b[re][1],Q==69&&(Q=L[L.l++]),Q>q.length){console.error("WK1 bad formula parse 0x"+re.toString(16)+":|"+q.join("|")+"|");return}var ce=q.slice(-Q);q.length-=Q,q.push(b[re][0]+"("+ce.join(",")+")")}else return re<=7?console.error("WK1 invalid opcode "+re.toString(16)):re<=24?console.error("WK1 unsupported op "+re.toString(16)):re<=30?console.error("WK1 invalid opcode "+re.toString(16)):re<=115?console.error("WK1 unsupported function opcode "+re.toString(16)):console.error("WK1 unrecognized opcode "+re.toString(16))}}q.length==1?N[1].f=""+q[0]:console.error("WK1 bad formula parse |"+q.join("|")+"|")}function F(L){var N=[{c:0,r:0},{t:"n",v:0},0];return N[0].r=L.read_shift(2),N[3]=L[L.l++],N[0].c=L[L.l++],N}function k(L,N){var q=F(L);return q[1].t="s",q[1].v=L.read_shift(N-4,"cstr"),q}function S(L,N,q,Q){var ee=gs(6+Q.length);ee.write_shift(2,L),ee.write_shift(1,q),ee.write_shift(1,N),ee.write_shift(1,39);for(var z=0;z<Q.length;++z){var X=Q.charCodeAt(z);ee.write_shift(1,X>=128?95:X)}return ee.write_shift(1,0),ee}function E(L,N){var q=F(L);q[1].v=L.read_shift(2);var Q=q[1].v>>1;if(q[1].v&1)switch(Q&7){case 0:Q=(Q>>3)*5e3;break;case 1:Q=(Q>>3)*500;break;case 2:Q=(Q>>3)/20;break;case 3:Q=(Q>>3)/200;break;case 4:Q=(Q>>3)/2e3;break;case 5:Q=(Q>>3)/2e4;break;case 6:Q=(Q>>3)/16;break;case 7:Q=(Q>>3)/64;break}return q[1].v=Q,q}function C(L,N){var q=F(L),Q=L.read_shift(4),ee=L.read_shift(4),z=L.read_shift(2);if(z==65535)return Q===0&&ee===3221225472?(q[1].t="e",q[1].v=15):Q===0&&ee===3489660928?(q[1].t="e",q[1].v=42):q[1].v=0,q;var X=z&32768;return z=(z&32767)-16446,q[1].v=(1-X*2)*(ee*Math.pow(2,z+32)+Q*Math.pow(2,z)),q}function D(L,N,q,Q){var ee=gs(14);if(ee.write_shift(2,L),ee.write_shift(1,q),ee.write_shift(1,N),Q==0)return ee.write_shift(4,0),ee.write_shift(4,0),ee.write_shift(2,65535),ee;var z=0,X=0,le=0,re=0;return Q<0&&(z=1,Q=-Q),X=Math.log2(Q)|0,Q/=Math.pow(2,X-31),re=Q>>>0,(re&2147483648)==0&&(Q/=2,++X,re=Q>>>0),Q-=re,re|=2147483648,re>>>=0,Q*=Math.pow(2,32),le=Q>>>0,ee.write_shift(4,le),ee.write_shift(4,re),X+=16383+(z?32768:0),ee.write_shift(2,X),ee}function P(L,N){var q=C(L);return L.l+=N-14,q}function O(L,N){var q=F(L),Q=L.read_shift(4);return q[1].v=Q>>6,q}function H(L,N){var q=F(L),Q=L.read_shift(8,"f");return q[1].v=Q,q}function ie(L,N){var q=H(L);return L.l+=N-10,q}function Ae(L,N){return L[L.l+N-1]==0?L.read_shift(N,"cstr"):""}function j(L,N){var q=L[L.l++];q>N-1&&(q=N-1);for(var Q="";Q.length<q;)Q+=String.fromCharCode(L[L.l++]);return Q}function J(L,N,q){if(!(!q.qpro||N<21)){var Q=L.read_shift(1);L.l+=17,L.l+=1,L.l+=2;var ee=L.read_shift(N-21,"cstr");return[Q,ee]}}function ue(L,N){for(var q={},Q=L.l+N;L.l<Q;){var ee=L.read_shift(2);if(ee==14e3){for(q[ee]=[0,""],q[ee][0]=L.read_shift(2);L[L.l];)q[ee][1]+=String.fromCharCode(L[L.l]),L.l++;L.l++}}return q}function ne(L,N){var q=gs(5+L.length);q.write_shift(2,14e3),q.write_shift(2,N);for(var Q=0;Q<L.length;++Q){var ee=L.charCodeAt(Q);q[q.l++]=ee>127?95:ee}return q[q.l++]=0,q}var Y={0:{n:"BOF",f:ss},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:i},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:m},14:{n:"NUMBER",f:p},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:g},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Ae},222:{n:"SHEETNAMELP",f:j},65535:{n:""}},te={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:k},23:{n:"NUMBER17",f:C},24:{n:"NUMBER18",f:E},25:{n:"FORMULA19",f:P},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:ue},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:O},38:{n:"??"},39:{n:"NUMBER27",f:H},40:{n:"FORMULA28",f:ie},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Ae},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:J},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:a,book_to_wk3:r,to_workbook:t}})();function oUe(e){var t={},n=e.match(So),a=0,r=!1;if(n)for(;a!=n.length;++a){var s=Mn(n[a]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;t.cp=IT[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=s.val;break;case"<sz":t.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":s.rgb&&(t.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(s[0].charCodeAt(1)!==47&&!r)throw new Error("Unrecognized rich format "+s[0])}}return t}var iUe=(function(){var e=$0("t"),t=$0("rPr");function n(s){var o=s.match(e);if(!o)return{t:"s",v:""};var i={t:"s",v:Ia(o[1])},c=s.match(t);return c&&(i.s=oUe(c[1])),i}var a=/<(?:\w+:)?r>/g,r=/<\/(?:\w+:)?r>/;return function(o){return o.replace(a,"").split(r).map(n).filter(function(i){return i.v})}})(),lUe=(function(){var t=/(\r\n|\n)/g;function n(r,s,o){var i=[];r.u&&i.push("text-decoration: underline;"),r.uval&&i.push("text-underline-style:"+r.uval+";"),r.sz&&i.push("font-size:"+r.sz+"pt;"),r.outline&&i.push("text-effect: outline;"),r.shadow&&i.push("text-shadow: auto;"),s.push('<span style="'+i.join("")+'">'),r.b&&(s.push("<b>"),o.push("</b>")),r.i&&(s.push("<i>"),o.push("</i>")),r.strike&&(s.push("<s>"),o.push("</s>"));var c=r.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(s.push("<"+c+">"),o.push("</"+c+">")),o.push("</span>"),r}function a(r){var s=[[],r.v,[]];return r.v?(r.s&&n(r.s,s[0],s[2]),s[0].join("")+s[1].replace(t,"<br/>")+s[2].join("")):""}return function(s){return s.map(a).join("")}})(),uUe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,cUe=/<(?:\w+:)?r>/,dUe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function WT(e,t){var n=t?t.cellHTML:!0,a={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(a.t=Ia(mr(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),a.r=mr(e),n&&(a.h=VT(a.t))):e.match(cUe)&&(a.r=mr(e),a.t=Ia(mr((e.replace(dUe,"").match(uUe)||[]).join("").replace(So,""))),n&&(a.h=lUe(iUe(a.r)))),a):{t:""}}var AUe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,fUe=/<(?:\w+:)?(?:si|sstItem)>/g,mUe=/<\/(?:\w+:)?(?:si|sstItem)>/;function vUe(e,t){var n=[],a="";if(!e)return n;var r=e.match(AUe);if(r){a=r[2].replace(fUe,"").split(mUe);for(var s=0;s!=a.length;++s){var o=WT(a[s].trim(),t);o!=null&&(n[n.length]=o)}r=Mn(r[1]),n.Count=r.count,n.Unique=r.uniqueCount}return n}function hUe(e){return[e.read_shift(4),e.read_shift(4)]}function pUe(e,t){var n=[],a=!1;return Kc(e,function(s,o,i){switch(i){case 159:n.Count=s[0],n.Unique=s[1];break;case 19:n.push(s);break;case 160:return!0;case 35:a=!0;break;case 36:a=!1;break;default:if(o.T,!a||t.WTF)throw new Error("Unexpected record 0x"+i.toString(16))}}),n}function t9(e){for(var t=[],n=e.split(""),a=0;a<n.length;++a)t[a]=n[a].charCodeAt(0);return t}function Tc(e,t){var n={};return n.Major=e.read_shift(2),n.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),n}function gUe(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=Tc(e,4),t.U=Tc(e,4),t.W=Tc(e,4),t}function yUe(e){for(var t=e.read_shift(4),n=e.l+t-4,a={},r=e.read_shift(4),s=[];r-- >0;)s.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(a.name=e.read_shift(0,"lpp4"),a.comps=s,e.l!=n)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+n);return a}function _Ue(e){var t=[];e.l+=4;for(var n=e.read_shift(4);n-- >0;)t.push(yUe(e));return t}function wUe(e){var t=[];e.l+=4;for(var n=e.read_shift(4);n-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function bUe(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=Tc(e,4),t.U=Tc(e,4),t.W=Tc(e,4),t}function xUe(e){var t=bUe(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function n9(e,t){var n=e.l+t,a={};a.Flags=e.read_shift(4)&63,e.l+=4,a.AlgID=e.read_shift(4);var r=!1;switch(a.AlgID){case 26126:case 26127:case 26128:r=a.Flags==36;break;case 26625:r=a.Flags==4;break;case 0:r=a.Flags==16||a.Flags==4||a.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+a.AlgID}if(!r)throw new Error("Encryption Flags/AlgID mismatch");return a.AlgIDHash=e.read_shift(4),a.KeySize=e.read_shift(4),a.ProviderType=e.read_shift(4),e.l+=8,a.CSPName=e.read_shift(n-e.l>>1,"utf16le"),e.l=n,a}function a9(e,t){var n={},a=e.l+t;return e.l+=4,n.Salt=e.slice(e.l,e.l+16),e.l+=16,n.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),n.VerifierHash=e.slice(e.l,a),e.l=a,n}function CUe(e){var t=Tc(e);switch(t.Minor){case 2:return[t.Minor,SUe(e)];case 3:return[t.Minor,EUe()];case 4:return[t.Minor,BUe(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function SUe(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var n=e.read_shift(4),a=n9(e,n),r=a9(e,e.length-e.l);return{t:"Std",h:a,v:r}}function EUe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function BUe(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var n=e.read_shift(e.length-e.l,"utf8"),a={};return n.replace(So,function(s){var o=Mn(s);switch(ju(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(i){a[i]=o[i]});break;case"<dataIntegrity":a.encryptedHmacKey=o.encryptedHmacKey,a.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":a.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":a.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":a.encs.push(o);break;default:throw o[0]}}),a}function kUe(e,t){var n={},a=n.EncryptionVersionInfo=Tc(e,4);if(t-=4,a.Minor!=2)throw new Error("unrecognized minor version code: "+a.Minor);if(a.Major>4||a.Major<2)throw new Error("unrecognized major version code: "+a.Major);n.Flags=e.read_shift(4),t-=4;var r=e.read_shift(4);return t-=4,n.EncryptionHeader=n9(e,r),t-=r,n.EncryptionVerifier=a9(e,t),n}function TUe(e){var t={},n=t.EncryptionVersionInfo=Tc(e,4);if(n.Major!=1||n.Minor!=1)throw"unrecognized version code "+n.Major+" : "+n.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function IUe(e){var t=0,n,a=t9(e),r=a.length+1,s,o,i,c,A;for(n=eA(r),n[0]=a.length,s=1;s!=r;++s)n[s]=a[s-1];for(s=r-1;s>=0;--s)o=n[s],i=(t&16384)===0?0:1,c=t<<1&32767,A=i|c,t=A^o;return t^52811}var r9=(function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],n=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],a=function(o){return(o/2|o*128)&255},r=function(o,i){return a(o^i)},s=function(o){for(var i=t[o.length-1],c=104,A=o.length-1;A>=0;--A)for(var d=o[A],f=0;f!=7;++f)d&64&&(i^=n[c]),d*=2,--c;return i};return function(o){for(var i=t9(o),c=s(i),A=i.length,d=eA(16),f=0;f!=16;++f)d[f]=0;var m,h,p;for((A&1)===1&&(m=c>>8,d[A]=r(e[0],m),--A,m=c&255,h=i[i.length-1],d[A]=r(h,m));A>0;)--A,m=c>>8,d[A]=r(i[A],m),--A,m=c&255,d[A]=r(i[A],m);for(A=15,p=15-i.length;p>0;)m=c>>8,d[A]=r(e[p],m),--A,--p,m=c&255,d[A]=r(i[A],m),--A,--p;return d}})(),FUe=function(e,t,n,a,r){r||(r=t),a||(a=r9(e));var s,o;for(s=0;s!=t.length;++s)o=t[s],o^=a[n],o=(o>>5|o<<3)&255,r[s]=o,++n;return[r,n,a]},PUe=function(e){var t=0,n=r9(e);return function(a){var r=FUe("",a,t,n);return t=r[1],r[0]}};function DUe(e,t,n,a){var r={key:ss(e),verificationBytes:ss(e)};return n.password&&(r.verifier=IUe(n.password)),a.valid=r.verificationBytes===r.verifier,a.valid&&(a.insitu=PUe(n.password)),r}function UUe(e,t,n){var a=n||{};return a.Info=e.read_shift(2),e.l-=2,a.Info===1?a.Data=TUe(e):a.Data=kUe(e,t),a}function RUe(e,t,n){var a={Type:n.biff>=8?e.read_shift(2):0};return a.Type?UUe(e,t-2,a):DUe(e,n.biff>=8?t:t-2,n,a),a}var NUe=(function(){function e(r,s){switch(s.type){case"base64":return t(Di(r),s);case"binary":return t(r,s);case"buffer":return t(pa&&Buffer.isBuffer(r)?r.toString("binary"):jf(r),s);case"array":return t(Ef(r),s)}throw new Error("Unrecognized type "+s.type)}function t(r,s){var o=s||{},i=o.dense?[]:{},c=r.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var A={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(i)&&(i[f]=[]);for(var m=/\\\w+\b/g,h=0,p,y=-1;p=m.exec(d);){switch(p[0]){case"\\cell":var g=d.slice(h,m.lastIndex-p[0].length);if(g[0]==" "&&(g=g.slice(1)),++y,g.length){var w={v:g,t:"s"};Array.isArray(i)?i[f][y]=w:i[qn({r:f,c:y})]=w}break}h=m.lastIndex}y>A.e.c&&(A.e.c=y)}),i["!ref"]=Sa(A),i}function n(r,s){return uA(e(r,s),s)}function a(r){for(var s=["{\\rtf1\\ansi"],o=Vr(r["!ref"]),i,c=Array.isArray(r),A=o.s.r;A<=o.e.r;++A){s.push("\\trowd\\trautofit1");for(var d=o.s.c;d<=o.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=o.s.c;d<=o.e.c;++d){var f=qn({r:A,c:d});i=c?(r[A]||[])[d]:r[f],!(!i||i.v==null&&(!i.f||i.F))&&(s.push(" "+(i.w||(Mc(i),i.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:n,to_sheet:e,from_sheet:a}})();function VUe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function z0(e){for(var t=0,n=1;t!=3;++t)n=n*256+(e[t]>255?255:e[t]<0?0:e[t]);return n.toString(16).toUpperCase().slice(1)}function LUe(e){var t=e[0]/255,n=e[1]/255,a=e[2]/255,r=Math.max(t,n,a),s=Math.min(t,n,a),o=r-s;if(o===0)return[0,0,t];var i=0,c=0,A=r+s;switch(c=o/(A>1?2-A:A),r){case t:i=((n-a)/o+6)%6;break;case n:i=(a-t)/o+2;break;case a:i=(t-n)/o+4;break}return[i/6,c,A/2]}function MUe(e){var t=e[0],n=e[1],a=e[2],r=n*2*(a<.5?a:1-a),s=a-r/2,o=[s,s,s],i=6*t,c;if(n!==0)switch(i|0){case 0:case 6:c=r*i,o[0]+=r,o[1]+=c;break;case 1:c=r*(2-i),o[0]+=c,o[1]+=r;break;case 2:c=r*(i-2),o[1]+=r,o[2]+=c;break;case 3:c=r*(4-i),o[1]+=c,o[2]+=r;break;case 4:c=r*(i-4),o[2]+=r,o[0]+=c;break;case 5:c=r*(6-i),o[2]+=c,o[0]+=r;break}for(var A=0;A!=3;++A)o[A]=Math.round(o[A]*255);return o}function y2(e,t){if(t===0)return e;var n=LUe(VUe(e));return t<0?n[2]=n[2]*(1+t):n[2]=1-(1-n[2])*(1-t),z0(MUe(n))}var s9=6,OUe=15,HUe=1,Vo=s9;function _2(e){return Math.floor((e+Math.round(128/Vo)/256)*Vo)}function w2(e){return Math.floor((e-5)/Vo*100+.5)/100}function LE(e){return Math.round((e*Vo+5)/Vo*256)/256}function RC(e){return LE(w2(_2(e)))}function jT(e){var t=Math.abs(e-RC(e)),n=Vo;if(t>.005)for(Vo=HUe;Vo<OUe;++Vo)Math.abs(e-RC(e))<=t&&(t=Math.abs(e-RC(e)),n=Vo);Vo=n}function jv(e){e.width?(e.wpx=_2(e.width),e.wch=w2(e.wpx),e.MDW=Vo):e.wpx?(e.wch=w2(e.wpx),e.width=LE(e.wch),e.MDW=Vo):typeof e.wch=="number"&&(e.width=LE(e.wch),e.wpx=_2(e.width),e.MDW=Vo),e.customWidth&&delete e.customWidth}var $Ue=96,o9=$Ue;function i9(e){return e*96/o9}function K0(e){return e*o9/96}var QUe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function GUe(e,t,n,a){t.Borders=[];var r={},s=!1;(e[0].match(So)||[]).forEach(function(o){var i=Mn(o);switch(ju(i[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":r={},i.diagonalUp&&(r.diagonalUp=Sr(i.diagonalUp)),i.diagonalDown&&(r.diagonalDown=Sr(i.diagonalDown)),t.Borders.push(r);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(a&&a.WTF&&!s)throw new Error("unrecognized "+i[0]+" in borders")}})}function zUe(e,t,n,a){t.Fills=[];var r={},s=!1;(e[0].match(So)||[]).forEach(function(o){var i=Mn(o);switch(ju(i[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":r={},t.Fills.push(r);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(r),r={};break;case"<patternFill":case"<patternFill>":i.patternType&&(r.patternType=i.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":r.bgColor||(r.bgColor={}),i.indexed&&(r.bgColor.indexed=parseInt(i.indexed,10)),i.theme&&(r.bgColor.theme=parseInt(i.theme,10)),i.tint&&(r.bgColor.tint=parseFloat(i.tint)),i.rgb&&(r.bgColor.rgb=i.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":r.fgColor||(r.fgColor={}),i.theme&&(r.fgColor.theme=parseInt(i.theme,10)),i.tint&&(r.fgColor.tint=parseFloat(i.tint)),i.rgb!=null&&(r.fgColor.rgb=i.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(a&&a.WTF&&!s)throw new Error("unrecognized "+i[0]+" in fills")}})}function KUe(e,t,n,a){t.Fonts=[];var r={},s=!1;(e[0].match(So)||[]).forEach(function(o){var i=Mn(o);switch(ju(i[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(r),r={};break;case"<name":i.val&&(r.name=mr(i.val));break;case"<name/>":case"</name>":break;case"<b":r.bold=i.val?Sr(i.val):1;break;case"<b/>":r.bold=1;break;case"<i":r.italic=i.val?Sr(i.val):1;break;case"<i/>":r.italic=1;break;case"<u":switch(i.val){case"none":r.underline=0;break;case"single":r.underline=1;break;case"double":r.underline=2;break;case"singleAccounting":r.underline=33;break;case"doubleAccounting":r.underline=34;break}break;case"<u/>":r.underline=1;break;case"<strike":r.strike=i.val?Sr(i.val):1;break;case"<strike/>":r.strike=1;break;case"<outline":r.outline=i.val?Sr(i.val):1;break;case"<outline/>":r.outline=1;break;case"<shadow":r.shadow=i.val?Sr(i.val):1;break;case"<shadow/>":r.shadow=1;break;case"<condense":r.condense=i.val?Sr(i.val):1;break;case"<condense/>":r.condense=1;break;case"<extend":r.extend=i.val?Sr(i.val):1;break;case"<extend/>":r.extend=1;break;case"<sz":i.val&&(r.sz=+i.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":i.val&&(r.vertAlign=i.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":i.val&&(r.family=parseInt(i.val,10));break;case"<family/>":case"</family>":break;case"<scheme":i.val&&(r.scheme=i.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(i.val=="1")break;i.codepage=IT[parseInt(i.val,10)];break;case"<color":if(r.color||(r.color={}),i.auto&&(r.color.auto=Sr(i.auto)),i.rgb)r.color.rgb=i.rgb.slice(-6);else if(i.indexed){r.color.index=parseInt(i.indexed,10);var c=df[r.color.index];r.color.index==81&&(c=df[1]),c||(c=df[1]),r.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else i.theme&&(r.color.theme=parseInt(i.theme,10),i.tint&&(r.color.tint=parseFloat(i.tint)),i.theme&&n.themeElements&&n.themeElements.clrScheme&&(r.color.rgb=y2(n.themeElements.clrScheme[r.color.theme].rgb,r.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(a&&a.WTF&&!s)throw new Error("unrecognized "+i[0]+" in fonts")}})}function WUe(e,t,n){t.NumberFmt=[];for(var a=Vu(ea),r=0;r<a.length;++r)t.NumberFmt[a[r]]=ea[a[r]];var s=e[0].match(So);if(s)for(r=0;r<s.length;++r){var o=Mn(s[r]);switch(ju(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var i=Ia(mr(o.formatCode)),c=parseInt(o.numFmtId,10);if(t.NumberFmt[c]=i,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=i}cf(i,c)}}break;case"</numFmt>":break;default:if(n.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}var Iy=["numFmtId","fillId","fontId","borderId","xfId"],Fy=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function jUe(e,t,n){t.CellXf=[];var a,r=!1;(e[0].match(So)||[]).forEach(function(s){var o=Mn(s),i=0;switch(ju(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(a=o,delete a[0],i=0;i<Iy.length;++i)a[Iy[i]]&&(a[Iy[i]]=parseInt(a[Iy[i]],10));for(i=0;i<Fy.length;++i)a[Fy[i]]&&(a[Fy[i]]=Sr(a[Fy[i]]));if(t.NumberFmt&&a.numFmtId>392){for(i=392;i>60;--i)if(t.NumberFmt[a.numFmtId]==t.NumberFmt[i]){a.numFmtId=i;break}}t.CellXf.push(a);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};o.vertical&&(c.vertical=o.vertical),o.horizontal&&(c.horizontal=o.horizontal),o.textRotation!=null&&(c.textRotation=o.textRotation),o.indent&&(c.indent=o.indent),o.wrapText&&(c.wrapText=Sr(o.wrapText)),a.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":r=!0;break;case"</AlternateContent>":r=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(n&&n.WTF&&!r)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}var qUe=(function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,n=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,a=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,r=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(i,c,A){var d={};if(!i)return d;i=i.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=i.match(t))&&WUe(f,d,A),(f=i.match(r))&&KUe(f,d,c,A),(f=i.match(a))&&zUe(f,d,c,A),(f=i.match(s))&&GUe(f,d,c,A),(f=i.match(n))&&jUe(f,d,A),d}})();function YUe(e,t){var n=e.read_shift(2),a=_o(e);return[n,a]}function XUe(e,t,n){var a={};a.sz=e.read_shift(2)/20;var r=iDe(e);r.fItalic&&(a.italic=1),r.fCondense&&(a.condense=1),r.fExtend&&(a.extend=1),r.fShadow&&(a.shadow=1),r.fOutline&&(a.outline=1),r.fStrikeout&&(a.strike=1);var s=e.read_shift(2);switch(s===700&&(a.bold=1),e.read_shift(2)){case 1:a.vertAlign="superscript";break;case 2:a.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(a.underline=o);var i=e.read_shift(1);i>0&&(a.family=i);var c=e.read_shift(1);switch(c>0&&(a.charset=c),e.l++,a.color=oDe(e),e.read_shift(1)){case 1:a.scheme="major";break;case 2:a.scheme="minor";break}return a.name=_o(e),a}var JUe=bo;function ZUe(e,t){var n=e.l+t,a=e.read_shift(2),r=e.read_shift(2);return e.l=n,{ixfe:a,numFmtId:r}}var eRe=bo;function tRe(e,t,n){var a={};a.NumberFmt=[];for(var r in ea)a.NumberFmt[r]=ea[r];a.CellXf=[],a.Fonts=[];var s=[],o=!1;return Kc(e,function(c,A,d){switch(d){case 44:a.NumberFmt[c[0]]=c[1],cf(c[1],c[0]);break;case 43:a.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=y2(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&a.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:s.push(d),o=!0;break;case 38:s.pop(),o=!1;break;default:if(A.T>0)s.push(d);else if(A.T<0)s.pop();else if(!o||n.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),a}var nRe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function aRe(e,t,n){t.themeElements.clrScheme=[];var a={};(e[0].match(So)||[]).forEach(function(r){var s=Mn(r);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":a.rgb=s.val;break;case"<a:sysClr":a.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(t.themeElements.clrScheme[nRe.indexOf(s[0])]=a,a={}):a.name=s[0].slice(3,s[0].length-1);break;default:if(n&&n.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function rRe(){}function sRe(){}var oRe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,iRe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,lRe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function uRe(e,t,n){t.themeElements={};var a;[["clrScheme",oRe,aRe],["fontScheme",iRe,rRe],["fmtScheme",lRe,sRe]].forEach(function(r){if(!(a=e.match(r[1])))throw new Error(r[0]+" not found in themeElements");r[2](a,t,n)})}var cRe=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function l9(e,t){(!e||e.length===0)&&(e=dRe());var n,a={};if(!(n=e.match(cRe)))throw new Error("themeElements not found in theme");return uRe(n[0],a,t),a.raw=e,a}function dRe(e,t){var n=[y$];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface=" "/>',n[n.length]='<a:font script="Hang" typeface=" "/>',n[n.length]='<a:font script="Hans" typeface=""/>',n[n.length]='<a:font script="Hant" typeface=""/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface=" "/>',n[n.length]='<a:font script="Hang" typeface=" "/>',n[n.length]='<a:font script="Hans" typeface=""/>',n[n.length]='<a:font script="Hant" typeface=""/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function ARe(e,t,n){var a=e.l+t,r=e.read_shift(4);if(r!==124226){if(!n.cellStyles){e.l=a;return}var s=e.slice(e.l);e.l=a;var o;try{o=g$(s,{type:"array"})}catch{return}var i=Si(o,"theme/theme/theme1.xml",!0);if(i)return l9(i,n)}}function fRe(e){return e.read_shift(4)}function mRe(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=vRe(e,4);break;case 2:t.xclrValue=j$(e);break;case 3:t.xclrValue=fRe(e);break;case 4:e.l+=4;break}return e.l+=8,t}function vRe(e,t){return bo(e,t)}function hRe(e,t){return bo(e,t)}function pRe(e){var t=e.read_shift(2),n=e.read_shift(2)-4,a=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:a[1]=mRe(e);break;case 6:a[1]=hRe(e,n);break;case 14:case 15:a[1]=e.read_shift(n===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+n)}return a}function gRe(e,t){var n=e.l+t;e.l+=2;var a=e.read_shift(2);e.l+=2;for(var r=e.read_shift(2),s=[];r-- >0;)s.push(pRe(e,n-e.l));return{ixfe:a,ext:s}}function yRe(e,t){t.forEach(function(n){n[0]})}function _Re(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:_o(e)}}function wRe(e){for(var t=[],n=e.read_shift(4);n-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function bRe(e){return e.l+=4,e.read_shift(4)!=0}function xRe(e,t,n){var a={Types:[],Cell:[],Value:[]},r=n||{},s=[],o=!1,i=2;return Kc(e,function(c,A,d){switch(d){case 335:a.Types.push({name:c.name});break;case 51:c.forEach(function(f){i==1?a.Cell.push({type:a.Types[f[0]-1].name,index:f[1]}):i==0&&a.Value.push({type:a.Types[f[0]-1].name,index:f[1]})});break;case 337:i=c?1:0;break;case 338:i=2;break;case 35:s.push(d),o=!0;break;case 36:s.pop(),o=!1;break;default:if(!A.T){if(!o||r.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),a}function CRe(e,t,n){var a={Types:[],Cell:[],Value:[]};if(!e)return a;var r=!1,s=2,o;return e.replace(So,function(i){var c=Mn(i);switch(ju(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":a.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var A=0;A<a.Types.length;++A)a.Types[A].name==c.name&&(o=a.Types[A]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?a.Cell.push({type:a.Types[c.t-1].name,index:+c.v}):s==0&&a.Value.push({type:a.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+c.i);break;default:if(!r&&n.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return i}),a}function SRe(e){var t=[];if(!e)return t;var n=1;return(e.match(So)||[]).forEach(function(a){var r=Mn(a);switch(r[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete r[0],r.i?n=r.i:r.i=n,t.push(r);break}}),t}function ERe(e){var t={};t.i=e.read_shift(4);var n={};n.r=e.read_shift(4),n.c=e.read_shift(4),t.r=qn(n);var a=e.read_shift(1);return a&2&&(t.l="1"),a&8&&(t.a="1"),t}function BRe(e,t,n){var a=[];return Kc(e,function(s,o,i){switch(i){case 63:a.push(s);break;default:if(!o.T)throw new Error("Unexpected record 0x"+i.toString(16))}}),a}function kRe(e,t,n,a){if(!e)return e;var r=a||{},s=!1;Kc(e,function(i,c,A){switch(A){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!c.T){if(!s||r.WTF)throw new Error("Unexpected record 0x"+A.toString(16))}}},r)}function TRe(e,t){if(!e)return"??";var n=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][n].Target}function sN(e,t,n,a){var r=Array.isArray(e),s;t.forEach(function(o){var i=Lo(o.ref);if(r?(e[i.r]||(e[i.r]=[]),s=e[i.r][i.c]):s=e[o.ref],!s){s={t:"z"},r?e[i.r][i.c]=s:e[o.ref]=s;var c=Vr(e["!ref"]||"BDWGO1000001:A1");c.s.r>i.r&&(c.s.r=i.r),c.e.r<i.r&&(c.e.r=i.r),c.s.c>i.c&&(c.s.c=i.c),c.e.c<i.c&&(c.e.c=i.c);var A=Sa(c);A!==e["!ref"]&&(e["!ref"]=A)}s.c||(s.c=[]);var d={a:o.author,t:o.t,r:o.r,T:n};o.h&&(d.h=o.h);for(var f=s.c.length-1;f>=0;--f){if(!n&&s.c[f].T)return;n&&!s.c[f].T&&s.c.splice(f,1)}if(n&&a){for(f=0;f<a.length;++f)if(d.a==a[f].id){d.a=a[f].name||d.a;break}}s.c.push(d)})}function IRe(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var n=[],a=[],r=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);r&&r[1]&&r[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var i=o.match(/<(?:\w+:)?author[^>]*>(.*)/);i&&n.push(i[1])}});var s=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var i=o.match(/<(?:\w+:)?comment[^>]*>/);if(i){var c=Mn(i[0]),A={author:c.authorId&&n[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=Lo(c.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var f=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),m=!!f&&!!f[1]&&WT(f[1])||{r:"",t:"",h:""};A.r=m.r,m.r=="<t></t>"&&(m.t=m.h=""),A.t=(m.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(A.h=m.h),a.push(A)}}}}),a}function FRe(e,t){var n=[],a=!1,r={},s=0;return e.replace(So,function(i,c){var A=Mn(i);switch(ju(A[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":r={author:A.personId,guid:A.id,ref:A.ref,T:1};break;case"</threadedComment>":r.t!=null&&n.push(r);break;case"<text>":case"<text":s=c+i.length;break;case"</text>":r.t=e.slice(s,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":a=!0;break;case"</mentions>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&t.WTF)throw new Error("unrecognized "+A[0]+" in threaded comments")}return i}),n}function PRe(e,t){var n=[],a=!1;return e.replace(So,function(s){var o=Mn(s);switch(ju(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":n.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&t.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return s}),n}function DRe(e){var t={};t.iauthor=e.read_shift(4);var n=Yf(e);return t.rfx=n.s,t.ref=qn(n.s),e.l+=16,t}var URe=_o;function RRe(e,t){var n=[],a=[],r={},s=!1;return Kc(e,function(i,c,A){switch(A){case 632:a.push(i);break;case 635:r=i;break;case 637:r.t=i.t,r.h=i.h,r.r=i.r;break;case 636:if(r.author=a[r.iauthor],delete r.iauthor,t.sheetRows&&r.rfx&&t.sheetRows<=r.rfx.r)break;r.t||(r.t=""),delete r.rfx,n.push(r);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!s||t.WTF)throw new Error("Unexpected record 0x"+A.toString(16))}}}),n}var NRe="application/vnd.ms-office.vbaProject";function VRe(e){var t=ba.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(n,a){if(!(n.slice(-1)==="/"||!n.match(/_VBA_PROJECT_CUR/))){var r=n.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");ba.utils.cfb_add(t,r,e.FileIndex[a].content)}}),ba.write(t)}function LRe(){return{"!type":"dialog"}}function MRe(){return{"!type":"dialog"}}function ORe(){return{"!type":"macro"}}function HRe(){return{"!type":"macro"}}var xv=(function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function n(a,r,s,o){var i=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),o.length==0?i=!0:o.charAt(0)=="["&&(i=!0,o=o.slice(1,-1));var A=s.length>0?parseInt(s,10)|0:0,d=o.length>0?parseInt(o,10)|0:0;return i?d+=t.c:--d,c?A+=t.r:--A,r+(i?"":"$")+ws(d)+(c?"":"$")+Js(A)}return function(r,s){return t=s,r.replace(e,n)}})(),u9=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,$Re=(function(){return function(t,n){return t.replace(u9,function(a,r,s,o,i,c){var A=HT(o)-(s?0:n.c),d=OT(c)-(i?0:n.r),f=d==0?"":i?d+1:"["+d+"]",m=A==0?"":s?A+1:"["+A+"]";return r+"R"+f+"C"+m})}})();function c9(e,t){return e.replace(u9,function(n,a,r,s,o,i){return a+(r=="$"?r+s:ws(HT(s)+t.c))+(o=="$"?o+i:Js(OT(i)+t.r))})}function QRe(e,t,n){var a=bh(t),r=a.s,s=Lo(n),o={r:s.r-r.r,c:s.c-r.c};return c9(e,o)}function GRe(e){return e.length!=1}function oN(e){return e.replace(/_xlfn\./g,"")}function ns(e){e.l+=1}function tA(e,t){var n=e.read_shift(2);return[n&16383,n>>14&1,n>>15&1]}function d9(e,t,n){var a=2;if(n){if(n.biff>=2&&n.biff<=5)return A9(e);n.biff==12&&(a=4)}var r=e.read_shift(a),s=e.read_shift(a),o=tA(e),i=tA(e);return{s:{r,c:o[0],cRel:o[1],rRel:o[2]},e:{r:s,c:i[0],cRel:i[1],rRel:i[2]}}}function A9(e){var t=tA(e),n=tA(e),a=e.read_shift(1),r=e.read_shift(1);return{s:{r:t[0],c:a,cRel:t[1],rRel:t[2]},e:{r:n[0],c:r,cRel:n[1],rRel:n[2]}}}function zRe(e,t,n){if(n.biff<8)return A9(e);var a=e.read_shift(n.biff==12?4:2),r=e.read_shift(n.biff==12?4:2),s=tA(e),o=tA(e);return{s:{r:a,c:s[0],cRel:s[1],rRel:s[2]},e:{r,c:o[0],cRel:o[1],rRel:o[2]}}}function f9(e,t,n){if(n&&n.biff>=2&&n.biff<=5)return KRe(e);var a=e.read_shift(n&&n.biff==12?4:2),r=tA(e);return{r:a,c:r[0],cRel:r[1],rRel:r[2]}}function KRe(e){var t=tA(e),n=e.read_shift(1);return{r:t[0],c:n,cRel:t[1],rRel:t[2]}}function WRe(e){var t=e.read_shift(2),n=e.read_shift(2);return{r:t,c:n&255,fQuoted:!!(n&16384),cRel:n>>15,rRel:n>>15}}function jRe(e,t,n){var a=n&&n.biff?n.biff:8;if(a>=2&&a<=5)return qRe(e);var r=e.read_shift(a>=12?4:2),s=e.read_shift(2),o=(s&16384)>>14,i=(s&32768)>>15;if(s&=16383,i==1)for(;r>524287;)r-=1048576;if(o==1)for(;s>8191;)s=s-16384;return{r,c:s,cRel:o,rRel:i}}function qRe(e){var t=e.read_shift(2),n=e.read_shift(1),a=(t&32768)>>15,r=(t&16384)>>14;return t&=16383,a==1&&t>=8192&&(t=t-16384),r==1&&n>=128&&(n=n-256),{r:t,c:n,cRel:r,rRel:a}}function YRe(e,t,n){var a=(e[e.l++]&96)>>5,r=d9(e,n.biff>=2&&n.biff<=5?6:8,n);return[a,r]}function XRe(e,t,n){var a=(e[e.l++]&96)>>5,r=e.read_shift(2,"i"),s=8;if(n)switch(n.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}var o=d9(e,s,n);return[a,r,o]}function JRe(e,t,n){var a=(e[e.l++]&96)>>5;return e.l+=n&&n.biff>8?12:n.biff<8?6:8,[a]}function ZRe(e,t,n){var a=(e[e.l++]&96)>>5,r=e.read_shift(2),s=8;if(n)switch(n.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}return e.l+=s,[a,r]}function eNe(e,t,n){var a=(e[e.l++]&96)>>5,r=zRe(e,t-1,n);return[a,r]}function tNe(e,t,n){var a=(e[e.l++]&96)>>5;return e.l+=n.biff==2?6:n.biff==12?14:7,[a]}function iN(e){var t=e[e.l+1]&1,n=1;return e.l+=4,[t,n]}function nNe(e,t,n){e.l+=2;for(var a=e.read_shift(n&&n.biff==2?1:2),r=[],s=0;s<=a;++s)r.push(e.read_shift(n&&n.biff==2?1:2));return r}function aNe(e,t,n){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(n&&n.biff==2?1:2)]}function rNe(e,t,n){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(n&&n.biff==2?1:2)]}function sNe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function oNe(e,t,n){var a=e[e.l+1]&255?1:0;return e.l+=n&&n.biff==2?3:4,[a]}function m9(e){var t=e.read_shift(1),n=e.read_shift(1);return[t,n]}function iNe(e){return e.read_shift(2),m9(e)}function lNe(e){return e.read_shift(2),m9(e)}function uNe(e,t,n){var a=(e[e.l]&96)>>5;e.l+=1;var r=f9(e,0,n);return[a,r]}function cNe(e,t,n){var a=(e[e.l]&96)>>5;e.l+=1;var r=jRe(e,0,n);return[a,r]}function dNe(e,t,n){var a=(e[e.l]&96)>>5;e.l+=1;var r=e.read_shift(2);n&&n.biff==5&&(e.l+=12);var s=f9(e,0,n);return[a,r,s]}function ANe(e,t,n){var a=(e[e.l]&96)>>5;e.l+=1;var r=e.read_shift(n&&n.biff<=3?1:2);return[fVe[r],p9[r],a]}function fNe(e,t,n){var a=e[e.l++],r=e.read_shift(1),s=n&&n.biff<=3?[a==88?-1:0,e.read_shift(1)]:mNe(e);return[r,(s[0]===0?p9:AVe)[s[1]]]}function mNe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function vNe(e,t,n){e.l+=n&&n.biff==2?3:4}function hNe(e,t,n){if(e.l++,n&&n.biff==12)return[e.read_shift(4,"i"),0];var a=e.read_shift(2),r=e.read_shift(n&&n.biff==2?1:2);return[a,r]}function pNe(e){return e.l++,Xf[e.read_shift(1)]}function gNe(e){return e.l++,e.read_shift(2)}function yNe(e){return e.l++,e.read_shift(1)!==0}function _Ne(e){return e.l++,mo(e)}function wNe(e,t,n){return e.l++,Pg(e,t-1,n)}function bNe(e,t){var n=[e.read_shift(1)];if(t==12)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2;break}switch(n[0]){case 4:n[1]=Wr(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:n[1]=Xf[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:n[1]=mo(e);break;case 2:n[1]=Jf(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function xNe(e,t,n){for(var a=e.read_shift(n.biff==12?4:2),r=[],s=0;s!=a;++s)r.push((n.biff==12?Yf:Hw)(e));return r}function CNe(e,t,n){var a=0,r=0;n.biff==12?(a=e.read_shift(4),r=e.read_shift(4)):(r=1+e.read_shift(1),a=1+e.read_shift(2)),n.biff>=2&&n.biff<8&&(--a,--r==0&&(r=256));for(var s=0,o=[];s!=a&&(o[s]=[]);++s)for(var i=0;i!=r;++i)o[s][i]=bNe(e,n.biff);return o}function SNe(e,t,n){var a=e.read_shift(1)>>>5&3,r=!n||n.biff>=8?4:2,s=e.read_shift(r);switch(n.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[a,0,s]}function ENe(e,t,n){if(n.biff==5)return BNe(e);var a=e.read_shift(1)>>>5&3,r=e.read_shift(2),s=e.read_shift(4);return[a,r,s]}function BNe(e){var t=e.read_shift(1)>>>5&3,n=e.read_shift(2,"i");e.l+=8;var a=e.read_shift(2);return e.l+=12,[t,n,a]}function kNe(e,t,n){var a=e.read_shift(1)>>>5&3;e.l+=n&&n.biff==2?3:4;var r=e.read_shift(n&&n.biff==2?1:2);return[a,r]}function TNe(e,t,n){var a=e.read_shift(1)>>>5&3,r=e.read_shift(n&&n.biff==2?1:2);return[a,r]}function INe(e,t,n){var a=e.read_shift(1)>>>5&3;return e.l+=4,n.biff<8&&e.l--,n.biff==12&&(e.l+=2),[a]}function FNe(e,t,n){var a=(e[e.l++]&96)>>5,r=e.read_shift(2),s=4;if(n)switch(n.biff){case 5:s=15;break;case 12:s=6;break}return e.l+=s,[a,r]}var PNe=bo,DNe=bo,UNe=bo;function Ug(e,t,n){return e.l+=2,[WRe(e)]}function qT(e){return e.l+=6,[]}var RNe=Ug,NNe=qT,VNe=qT,LNe=Ug;function v9(e){return e.l+=2,[ss(e),e.read_shift(2)&1]}var MNe=Ug,ONe=v9,HNe=qT,$Ne=Ug,QNe=Ug,GNe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function zNe(e){e.l+=2;var t=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(4),r=e.read_shift(2),s=e.read_shift(2),o=GNe[n>>2&31];return{ixti:t,coltype:n&3,rt:o,idx:a,c:r,C:s}}function KNe(e){return e.l+=2,[e.read_shift(4)]}function WNe(e,t,n){return e.l+=5,e.l+=2,e.l+=n.biff==2?1:4,["PTGSHEET"]}function jNe(e,t,n){return e.l+=n.biff==2?4:5,["PTGENDSHEET"]}function qNe(e){var t=e.read_shift(1)>>>5&3,n=e.read_shift(2);return[t,n]}function YNe(e){var t=e.read_shift(1)>>>5&3,n=e.read_shift(2);return[t,n]}function XNe(e){return e.l+=4,[0,0]}var lN={1:{n:"PtgExp",f:hNe},2:{n:"PtgTbl",f:UNe},3:{n:"PtgAdd",f:ns},4:{n:"PtgSub",f:ns},5:{n:"PtgMul",f:ns},6:{n:"PtgDiv",f:ns},7:{n:"PtgPower",f:ns},8:{n:"PtgConcat",f:ns},9:{n:"PtgLt",f:ns},10:{n:"PtgLe",f:ns},11:{n:"PtgEq",f:ns},12:{n:"PtgGe",f:ns},13:{n:"PtgGt",f:ns},14:{n:"PtgNe",f:ns},15:{n:"PtgIsect",f:ns},16:{n:"PtgUnion",f:ns},17:{n:"PtgRange",f:ns},18:{n:"PtgUplus",f:ns},19:{n:"PtgUminus",f:ns},20:{n:"PtgPercent",f:ns},21:{n:"PtgParen",f:ns},22:{n:"PtgMissArg",f:ns},23:{n:"PtgStr",f:wNe},26:{n:"PtgSheet",f:WNe},27:{n:"PtgEndSheet",f:jNe},28:{n:"PtgErr",f:pNe},29:{n:"PtgBool",f:yNe},30:{n:"PtgInt",f:gNe},31:{n:"PtgNum",f:_Ne},32:{n:"PtgArray",f:tNe},33:{n:"PtgFunc",f:ANe},34:{n:"PtgFuncVar",f:fNe},35:{n:"PtgName",f:SNe},36:{n:"PtgRef",f:uNe},37:{n:"PtgArea",f:YRe},38:{n:"PtgMemArea",f:kNe},39:{n:"PtgMemErr",f:PNe},40:{n:"PtgMemNoMem",f:DNe},41:{n:"PtgMemFunc",f:TNe},42:{n:"PtgRefErr",f:INe},43:{n:"PtgAreaErr",f:JRe},44:{n:"PtgRefN",f:cNe},45:{n:"PtgAreaN",f:eNe},46:{n:"PtgMemAreaN",f:qNe},47:{n:"PtgMemNoMemN",f:YNe},57:{n:"PtgNameX",f:ENe},58:{n:"PtgRef3d",f:dNe},59:{n:"PtgArea3d",f:XRe},60:{n:"PtgRefErr3d",f:FNe},61:{n:"PtgAreaErr3d",f:ZRe},255:{}},JNe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},ZNe={1:{n:"PtgElfLel",f:v9},2:{n:"PtgElfRw",f:$Ne},3:{n:"PtgElfCol",f:RNe},6:{n:"PtgElfRwV",f:QNe},7:{n:"PtgElfColV",f:LNe},10:{n:"PtgElfRadical",f:MNe},11:{n:"PtgElfRadicalS",f:HNe},13:{n:"PtgElfColS",f:NNe},15:{n:"PtgElfColSV",f:VNe},16:{n:"PtgElfRadicalLel",f:ONe},25:{n:"PtgList",f:zNe},29:{n:"PtgSxName",f:KNe},255:{}},eVe={0:{n:"PtgAttrNoop",f:XNe},1:{n:"PtgAttrSemi",f:oNe},2:{n:"PtgAttrIf",f:rNe},4:{n:"PtgAttrChoose",f:nNe},8:{n:"PtgAttrGoto",f:aNe},16:{n:"PtgAttrSum",f:vNe},32:{n:"PtgAttrBaxcel",f:iN},33:{n:"PtgAttrBaxcel",f:iN},64:{n:"PtgAttrSpace",f:iNe},65:{n:"PtgAttrSpaceSemi",f:lNe},128:{n:"PtgAttrIfError",f:sNe},255:{}};function Rg(e,t,n,a){if(a.biff<8)return bo(e,t);for(var r=e.l+t,s=[],o=0;o!==n.length;++o)switch(n[o][0]){case"PtgArray":n[o][1]=CNe(e,0,a),s.push(n[o][1]);break;case"PtgMemArea":n[o][2]=xNe(e,n[o][1],a),s.push(n[o][2]);break;case"PtgExp":a&&a.biff==12&&(n[o][1][1]=e.read_shift(4),s.push(n[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[o][0]}return t=r-e.l,t!==0&&s.push(bo(e,t)),s}function Ng(e,t,n){for(var a=e.l+t,r,s,o=[];a!=e.l;)t=a-e.l,s=e[e.l],r=lN[s]||lN[JNe[s]],(s===24||s===25)&&(r=(s===24?ZNe:eVe)[e[e.l+1]]),!r||!r.f?bo(e,t):o.push([r.n,r.f(e,t,n)]);return o}function tVe(e){for(var t=[],n=0;n<e.length;++n){for(var a=e[n],r=[],s=0;s<a.length;++s){var o=a[s];if(o)switch(o[0]){case 2:r.push('"'+o[1].replace(/"/g,'""')+'"');break;default:r.push(o[1])}else r.push("")}t.push(r.join(","))}return t.join(";")}var nVe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function aVe(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function h9(e,t,n){if(!e)return"SH33TJSERR0";if(n.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var a=e.XTI[t];if(n.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!a)return"SH33TJSERR1";var r="";if(n.biff>8)switch(e[a[0]][0]){case 357:return r=a[1]==-1?"#REF":e.SheetNames[a[1]],a[1]==a[2]?r:r+":"+e.SheetNames[a[2]];case 358:return n.SID!=null?e.SheetNames[n.SID]:"SH33TJSSAME"+e[a[0]][0];case 355:default:return"SH33TJSSRC"+e[a[0]][0]}switch(e[a[0]][0][0]){case 1025:return r=a[1]==-1?"#REF":e.SheetNames[a[1]]||"SH33TJSERR3",a[1]==a[2]?r:r+":"+e.SheetNames[a[2]];case 14849:return e[a[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return e[a[0]][0][3]?(r=a[1]==-1?"#REF":e[a[0]][0][3][a[1]]||"SH33TJSERR4",a[1]==a[2]?r:r+":"+e[a[0]][0][3][a[2]]):"SH33TJSERR2"}}function uN(e,t,n){var a=h9(e,t,n);return a=="#REF"?a:aVe(a,n)}function io(e,t,n,a,r){var s=r&&r.biff||8,o={s:{c:0,r:0}},i=[],c,A,d,f=0,m=0,h,p="";if(!e[0]||!e[0][0])return"";for(var y=-1,g="",w=0,b=e[0].length;w<b;++w){var x=e[0][w];switch(x[0]){case"PtgUminus":i.push("-"+i.pop());break;case"PtgUplus":i.push("+"+i.pop());break;case"PtgPercent":i.push(i.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=i.pop(),A=i.pop(),y>=0){switch(e[0][y][1][0]){case 0:g=Rr(" ",e[0][y][1][1]);break;case 1:g=Rr("\r",e[0][y][1][1]);break;default:if(g="",r.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][y][1][0])}A=A+g,y=-1}i.push(A+nVe[x[0]]+c);break;case"PtgIsect":c=i.pop(),A=i.pop(),i.push(A+" "+c);break;case"PtgUnion":c=i.pop(),A=i.pop(),i.push(A+","+c);break;case"PtgRange":c=i.pop(),A=i.pop(),i.push(A+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=a0(x[1][1],o,r),i.push(r0(d,s));break;case"PtgRefN":d=n?a0(x[1][1],n,r):x[1][1],i.push(r0(d,s));break;case"PtgRef3d":f=x[1][1],d=a0(x[1][2],o,r),p=uN(a,f,r),i.push(p+"!"+r0(d,s));break;case"PtgFunc":case"PtgFuncVar":var T=x[1][0],F=x[1][1];T||(T=0),T&=127;var k=T==0?[]:i.slice(-T);i.length-=T,F==="User"&&(F=k.shift()),i.push(F+"("+k.join(",")+")");break;case"PtgBool":i.push(x[1]?"TRUE":"FALSE");break;case"PtgInt":i.push(x[1]);break;case"PtgNum":i.push(String(x[1]));break;case"PtgStr":i.push('"'+x[1].replace(/"/g,'""')+'"');break;case"PtgErr":i.push(x[1]);break;case"PtgAreaN":h=QR(x[1][1],n?{s:n}:o,r),i.push(DC(h,r));break;case"PtgArea":h=QR(x[1][1],o,r),i.push(DC(h,r));break;case"PtgArea3d":f=x[1][1],h=x[1][2],p=uN(a,f,r),i.push(p+"!"+DC(h,r));break;case"PtgAttrSum":i.push("SUM("+i.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":m=x[1][2];var S=(a.names||[])[m-1]||(a[0]||[])[m],E=S?S.Name:"SH33TJSNAME"+String(m);E&&E.slice(0,6)=="_xlfn."&&!r.xlfn&&(E=E.slice(6)),i.push(E);break;case"PtgNameX":var C=x[1][1];m=x[1][2];var D;if(r.biff<=5)C<0&&(C=-C),a[C]&&(D=a[C][m]);else{var P="";if(((a[C]||[])[0]||[])[0]==14849||(((a[C]||[])[0]||[])[0]==1025?a[C][m]&&a[C][m].itab>0&&(P=a.SheetNames[a[C][m].itab-1]+"!"):P=a.SheetNames[m-1]+"!"),a[C]&&a[C][m])P+=a[C][m].Name;else if(a[0]&&a[0][m])P+=a[0][m].Name;else{var O=(h9(a,C,r)||"").split(";;");O[m-1]?P=O[m-1]:P+="SH33TJSERRX"}i.push(P);break}D||(D={Name:"SH33TJSERRY"}),i.push(D.Name);break;case"PtgParen":var H="(",ie=")";if(y>=0){switch(g="",e[0][y][1][0]){case 2:H=Rr(" ",e[0][y][1][1])+H;break;case 3:H=Rr("\r",e[0][y][1][1])+H;break;case 4:ie=Rr(" ",e[0][y][1][1])+ie;break;case 5:ie=Rr("\r",e[0][y][1][1])+ie;break;default:if(r.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][y][1][0])}y=-1}i.push(H+i.pop()+ie);break;case"PtgRefErr":i.push("#REF!");break;case"PtgRefErr3d":i.push("#REF!");break;case"PtgExp":d={c:x[1][1],r:x[1][0]};var Ae={c:n.c,r:n.r};if(a.sharedf[qn(d)]){var j=a.sharedf[qn(d)];i.push(io(j,o,Ae,a,r))}else{var J=!1;for(c=0;c!=a.arrayf.length;++c)if(A=a.arrayf[c],!(d.c<A[0].s.c||d.c>A[0].e.c)&&!(d.r<A[0].s.r||d.r>A[0].e.r)){i.push(io(A[1],o,Ae,a,r)),J=!0;break}J||i.push(x[1])}break;case"PtgArray":i.push("{"+tVe(x[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":y=w;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":i.push("");break;case"PtgAreaErr":i.push("#REF!");break;case"PtgAreaErr3d":i.push("#REF!");break;case"PtgList":i.push("Table"+x[1].idx+"[#"+x[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(x));default:throw new Error("Unrecognized Formula Token: "+String(x))}var ue=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(r.biff!=3&&y>=0&&ue.indexOf(e[0][w][0])==-1){x=e[0][y];var ne=!0;switch(x[1][0]){case 4:ne=!1;case 0:g=Rr(" ",x[1][1]);break;case 5:ne=!1;case 1:g=Rr("\r",x[1][1]);break;default:if(g="",r.WTF)throw new Error("Unexpected PtgAttrSpaceType "+x[1][0])}i.push((ne?g:"")+i.pop()+(ne?"":g)),y=-1}}if(i.length>1&&r.WTF)throw new Error("bad formula stack");return i[0]}function rVe(e,t,n){var a=e.l+t,r=n.biff==2?1:2,s,o=e.read_shift(r);if(o==65535)return[[],bo(e,t-2)];var i=Ng(e,o,n);return t!==o+r&&(s=Rg(e,t-o-r,i,n)),e.l=a,[i,s]}function sVe(e,t,n){var a=e.l+t,r=n.biff==2?1:2,s,o=e.read_shift(r);if(o==65535)return[[],bo(e,t-2)];var i=Ng(e,o,n);return t!==o+r&&(s=Rg(e,t-o-r,i,n)),e.l=a,[i,s]}function oVe(e,t,n,a){var r=e.l+t,s=Ng(e,a,n),o;return r!==e.l&&(o=Rg(e,r-e.l,s,n)),[s,o]}function iVe(e,t,n){var a=e.l+t,r,s=e.read_shift(2),o=Ng(e,s,n);return s==65535?[[],bo(e,t-2)]:(t!==s+2&&(r=Rg(e,a-s-2,o,n)),[o,r])}function lVe(e){var t;if(Cc(e,e.l+6)!==65535)return[mo(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function NC(e,t,n){var a=e.l+t,r=qu(e);n.biff==2&&++e.l;var s=lVe(e),o=e.read_shift(1);n.biff!=2&&(e.read_shift(1),n.biff>=5&&e.read_shift(4));var i=sVe(e,a-e.l,n);return{cell:r,val:s[0],formula:i,shared:o>>3&1,tt:s[1]}}function $w(e,t,n){var a=e.read_shift(4),r=Ng(e,a,n),s=e.read_shift(4),o=s>0?Rg(e,s,r,n):null;return[r,o]}var uVe=$w,Qw=$w,cVe=$w,dVe=$w,AVe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},p9={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},fVe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function cN(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,n){return n.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function VC(e){var t=e.split(":"),n=t[0].split(".")[0];return[n,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}var l0={},Cv={};function u0(e,t){if(e){var n=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(n=[1,1,1,1,.5,.5]),e.left==null&&(e.left=n[0]),e.right==null&&(e.right=n[1]),e.top==null&&(e.top=n[2]),e.bottom==null&&(e.bottom=n[3]),e.header==null&&(e.header=n[4]),e.footer==null&&(e.footer=n[5])}}function g9(e,t,n,a,r,s){try{a.cellNF&&(e.z=ea[t])}catch(i){if(a.WTF)throw i}if(!(e.t==="z"&&!a.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Vs(e.v)),(!a||a.cellText!==!1)&&e.t!=="z")try{if(ea[t]==null&&cf(mPe[t]||"General",t),e.t==="e")e.w=e.w||Xf[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=H0(e.v);else if(e.t==="d"){var o=Qo(e.v);(o|0)===o?e.w=o.toString(10):e.w=H0(o)}else{if(e.v===void 0)return"";e.w=Sf(e.v,Cv)}else e.t==="d"?e.w=ll(t,Qo(e.v),Cv):e.w=ll(t,e.v,Cv)}catch(i){if(a.WTF)throw i}if(a.cellStyles&&n!=null)try{e.s=s.Fills[n],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=y2(r.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),a.WTF&&(e.s.fgColor.raw_rgb=r.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=y2(r.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),a.WTF&&(e.s.bgColor.raw_rgb=r.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(i){if(a.WTF&&s.Fills)throw i}}}function mVe(e,t){var n=Vr(t);n.s.r<=n.e.r&&n.s.c<=n.e.c&&n.s.r>=0&&n.s.c>=0&&(e["!ref"]=Sa(n))}var vVe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,hVe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,pVe=/<(?:\w:)?hyperlink [^>]*>/mg,gVe=/"(\w*:\w*)"/,yVe=/<(?:\w:)?col\b[^>]*[\/]?>/g,_Ve=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,wVe=/<(?:\w:)?pageMargins[^>]*\/>/g,y9=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,bVe=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,xVe=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function CVe(e,t,n,a,r,s,o){if(!e)return e;a||(a={"!id":{}});var i=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},A="",d="",f=e.match(hVe);f?(A=e.slice(0,f.index),d=e.slice(f.index+f[0].length)):A=d=e;var m=A.match(y9);m?YT(m[0],i,r,n):(m=A.match(bVe))&&SVe(m[0],m[1]||"",i,r,n);var h=(A.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(h>0){var p=A.slice(h,h+50).match(gVe);p&&mVe(i,p[1])}var y=A.match(xVe);y&&y[1]&&FVe(y[1],r);var g=[];if(t.cellStyles){var w=A.match(yVe);w&&kVe(g,w)}f&&PVe(f[1],i,t,c,s,o);var b=d.match(_Ve);b&&(i["!autofilter"]=TVe(b[0]));var x=[],T=d.match(vVe);if(T)for(h=0;h!=T.length;++h)x[h]=Vr(T[h].slice(T[h].indexOf('"')+1));var F=d.match(pVe);F&&EVe(i,F,a);var k=d.match(wVe);if(k&&(i["!margins"]=BVe(Mn(k[0]))),!i["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(i["!ref"]=Sa(c)),t.sheetRows>0&&i["!ref"]){var S=Vr(i["!ref"]);t.sheetRows<=+S.e.r&&(S.e.r=t.sheetRows-1,S.e.r>c.e.r&&(S.e.r=c.e.r),S.e.r<S.s.r&&(S.s.r=S.e.r),S.e.c>c.e.c&&(S.e.c=c.e.c),S.e.c<S.s.c&&(S.s.c=S.e.c),i["!fullref"]=i["!ref"],i["!ref"]=Sa(S))}return g.length>0&&(i["!cols"]=g),x.length>0&&(i["!merges"]=x),i}function YT(e,t,n,a){var r=Mn(e);n.Sheets[a]||(n.Sheets[a]={}),r.codeName&&(n.Sheets[a].CodeName=Ia(mr(r.codeName)))}function SVe(e,t,n,a,r){YT(e.slice(0,e.indexOf(">")),n,a,r)}function EVe(e,t,n){for(var a=Array.isArray(e),r=0;r!=t.length;++r){var s=Mn(mr(t[r]),!0);if(!s.ref)return;var o=((n||{})["!id"]||[])[s.id];o?(s.Target=o.Target,s.location&&(s.Target+="#"+Ia(s.location))):(s.Target="#"+Ia(s.location),o={Target:s.Target,TargetMode:"Internal"}),s.Rel=o,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var i=Vr(s.ref),c=i.s.r;c<=i.e.r;++c)for(var A=i.s.c;A<=i.e.c;++A){var d=qn({c:A,r:c});a?(e[c]||(e[c]=[]),e[c][A]||(e[c][A]={t:"z",v:void 0}),e[c][A].l=s):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=s)}}}function BVe(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(n){e[n]&&(t[n]=parseFloat(e[n]))}),t}function kVe(e,t){for(var n=!1,a=0;a!=t.length;++a){var r=Mn(t[a],!0);r.hidden&&(r.hidden=Sr(r.hidden));var s=parseInt(r.min,10)-1,o=parseInt(r.max,10)-1;for(r.outlineLevel&&(r.level=+r.outlineLevel||0),delete r.min,delete r.max,r.width=+r.width,!n&&r.width&&(n=!0,jT(r.width)),jv(r);s<=o;)e[s++]=Xs(r)}}function TVe(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}var IVe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function FVe(e,t){t.Views||(t.Views=[{}]),(e.match(IVe)||[]).forEach(function(n,a){var r=Mn(n);t.Views[a]||(t.Views[a]={}),+r.zoomScale&&(t.Views[a].zoom=+r.zoomScale),Sr(r.rightToLeft)&&(t.Views[a].RTL=!0)})}var PVe=(function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,n=/r=["']([^"']*)["']/,a=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,r=/ref=["']([^"']*)["']/,s=$0("v"),o=$0("f");return function(c,A,d,f,m,h){for(var p=0,y="",g=[],w=[],b=0,x=0,T=0,F="",k,S,E=0,C=0,D,P,O=0,H=0,ie=Array.isArray(h.CellXf),Ae,j=[],J=[],ue=Array.isArray(A),ne=[],Y={},te=!1,L=!!d.sheetStubs,N=c.split(t),q=0,Q=N.length;q!=Q;++q){y=N[q].trim();var ee=y.length;if(ee!==0){var z=0;e:for(p=0;p<ee;++p)switch(y[p]){case">":if(y[p-1]!="/"){++p;break e}if(d&&d.cellStyles){if(S=Mn(y.slice(z,p),!0),E=S.r!=null?parseInt(S.r,10):E+1,C=-1,d.sheetRows&&d.sheetRows<E)continue;Y={},te=!1,S.ht&&(te=!0,Y.hpt=parseFloat(S.ht),Y.hpx=K0(Y.hpt)),S.hidden=="1"&&(te=!0,Y.hidden=!0),S.outlineLevel!=null&&(te=!0,Y.level=+S.outlineLevel),te&&(ne[E-1]=Y)}break;case"<":z=p;break}if(z>=p)break;if(S=Mn(y.slice(z,p),!0),E=S.r!=null?parseInt(S.r,10):E+1,C=-1,!(d.sheetRows&&d.sheetRows<E)){f.s.r>E-1&&(f.s.r=E-1),f.e.r<E-1&&(f.e.r=E-1),d&&d.cellStyles&&(Y={},te=!1,S.ht&&(te=!0,Y.hpt=parseFloat(S.ht),Y.hpx=K0(Y.hpt)),S.hidden=="1"&&(te=!0,Y.hidden=!0),S.outlineLevel!=null&&(te=!0,Y.level=+S.outlineLevel),te&&(ne[E-1]=Y)),g=y.slice(p).split(e);for(var X=0;X!=g.length&&g[X].trim().charAt(0)=="<";++X);for(g=g.slice(X),p=0;p!=g.length;++p)if(y=g[p].trim(),y.length!==0){if(w=y.match(n),b=p,x=0,T=0,y="<c "+(y.slice(0,1)=="<"?">":"")+y,w!=null&&w.length===2){for(b=0,F=w[1],x=0;x!=F.length&&!((T=F.charCodeAt(x)-64)<1||T>26);++x)b=26*b+T;--b,C=b}else++C;for(x=0;x!=y.length&&y.charCodeAt(x)!==62;++x);if(++x,S=Mn(y.slice(0,x),!0),S.r||(S.r=qn({r:E-1,c:C})),F=y.slice(x),k={t:""},(w=F.match(s))!=null&&w[1]!==""&&(k.v=Ia(w[1])),d.cellFormula){if((w=F.match(o))!=null&&w[1]!==""){if(k.f=Ia(mr(w[1])).replace(/\r\n/g,`
`),d.xlfn||(k.f=oN(k.f)),w[0].indexOf('t="array"')>-1)k.F=(F.match(r)||[])[1],k.F.indexOf(":")>-1&&j.push([Vr(k.F),k.F]);else if(w[0].indexOf('t="shared"')>-1){P=Mn(w[0]);var le=Ia(mr(w[1]));d.xlfn||(le=oN(le)),J[parseInt(P.si,10)]=[P,le,S.r]}}else(w=F.match(/<f[^>]*\/>/))&&(P=Mn(w[0]),J[P.si]&&(k.f=QRe(J[P.si][1],J[P.si][2],S.r)));var re=Lo(S.r);for(x=0;x<j.length;++x)re.r>=j[x][0].s.r&&re.r<=j[x][0].e.r&&re.c>=j[x][0].s.c&&re.c<=j[x][0].e.c&&(k.F=j[x][1])}if(S.t==null&&k.v===void 0)if(k.f||k.F)k.v=0,k.t="n";else if(L)k.t="z";else continue;else k.t=S.t||"n";switch(f.s.c>C&&(f.s.c=C),f.e.c<C&&(f.e.c=C),k.t){case"n":if(k.v==""||k.v==null){if(!L)continue;k.t="z"}else k.v=parseFloat(k.v);break;case"s":if(typeof k.v>"u"){if(!L)continue;k.t="z"}else D=l0[parseInt(k.v,10)],k.v=D.t,k.r=D.r,d.cellHTML&&(k.h=D.h);break;case"str":k.t="s",k.v=k.v!=null?mr(k.v):"",d.cellHTML&&(k.h=VT(k.v));break;case"inlineStr":w=F.match(a),k.t="s",w!=null&&(D=WT(w[1]))?(k.v=D.t,d.cellHTML&&(k.h=D.h)):k.v="";break;case"b":k.v=Sr(k.v);break;case"d":d.cellDates?k.v=Vs(k.v,1):(k.v=Qo(Vs(k.v,1)),k.t="n");break;case"e":(!d||d.cellText!==!1)&&(k.w=k.v),k.v=O$[k.v];break}if(O=H=0,Ae=null,ie&&S.s!==void 0&&(Ae=h.CellXf[S.s],Ae!=null&&(Ae.numFmtId!=null&&(O=Ae.numFmtId),d.cellStyles&&Ae.fillId!=null&&(H=Ae.fillId))),g9(k,O,H,d,m,h),d.cellDates&&ie&&k.t=="n"&&wh(ea[O])&&(k.t="d",k.v=Ow(k.v)),S.cm&&d.xlmeta){var de=(d.xlmeta.Cell||[])[+S.cm-1];de&&de.type=="XLDAPR"&&(k.D=!0)}if(ue){var G=Lo(S.r);A[G.r]||(A[G.r]=[]),A[G.r][G.c]=k}else A[S.r]=k}}}}ne.length>0&&(A["!rows"]=ne)}})();function DVe(e,t){var n={},a=e.l+t;n.r=e.read_shift(4),e.l+=4;var r=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=a,s&7&&(n.level=s&7),s&16&&(n.hidden=!0),s&32&&(n.hpt=r/20),n}var UVe=Yf;function RVe(){}function NVe(e,t){var n={},a=e[e.l];return++e.l,n.above=!(a&64),n.left=!(a&128),e.l+=18,n.name=rDe(e),n}function VVe(e){var t=fl(e);return[t]}function LVe(e){var t=qf(e);return[t]}function MVe(e){var t=fl(e),n=e.read_shift(1);return[t,n,"b"]}function OVe(e){var t=qf(e),n=e.read_shift(1);return[t,n,"b"]}function HVe(e){var t=fl(e),n=e.read_shift(1);return[t,n,"e"]}function $Ve(e){var t=qf(e),n=e.read_shift(1);return[t,n,"e"]}function QVe(e){var t=fl(e),n=e.read_shift(4);return[t,n,"s"]}function GVe(e){var t=qf(e),n=e.read_shift(4);return[t,n,"s"]}function zVe(e){var t=fl(e),n=mo(e);return[t,n,"n"]}function _9(e){var t=qf(e),n=mo(e);return[t,n,"n"]}function KVe(e){var t=fl(e),n=GT(e);return[t,n,"n"]}function WVe(e){var t=qf(e),n=GT(e);return[t,n,"n"]}function jVe(e){var t=fl(e),n=$T(e);return[t,n,"is"]}function qVe(e){var t=fl(e),n=_o(e);return[t,n,"str"]}function YVe(e){var t=qf(e),n=_o(e);return[t,n,"str"]}function XVe(e,t,n){var a=e.l+t,r=fl(e);r.r=n["!row"];var s=e.read_shift(1),o=[r,s,"b"];if(n.cellFormula){e.l+=2;var i=Qw(e,a-e.l,n);o[3]=io(i,null,r,n.supbooks,n)}else e.l=a;return o}function JVe(e,t,n){var a=e.l+t,r=fl(e);r.r=n["!row"];var s=e.read_shift(1),o=[r,s,"e"];if(n.cellFormula){e.l+=2;var i=Qw(e,a-e.l,n);o[3]=io(i,null,r,n.supbooks,n)}else e.l=a;return o}function ZVe(e,t,n){var a=e.l+t,r=fl(e);r.r=n["!row"];var s=mo(e),o=[r,s,"n"];if(n.cellFormula){e.l+=2;var i=Qw(e,a-e.l,n);o[3]=io(i,null,r,n.supbooks,n)}else e.l=a;return o}function eLe(e,t,n){var a=e.l+t,r=fl(e);r.r=n["!row"];var s=_o(e),o=[r,s,"str"];if(n.cellFormula){e.l+=2;var i=Qw(e,a-e.l,n);o[3]=io(i,null,r,n.supbooks,n)}else e.l=a;return o}var tLe=Yf;function nLe(e,t){var n=e.l+t,a=Yf(e),r=QT(e),s=_o(e),o=_o(e),i=_o(e);e.l=n;var c={rfx:a,relId:r,loc:s,display:i};return o&&(c.Tooltip=o),c}function aLe(){}function rLe(e,t,n){var a=e.l+t,r=V$(e),s=e.read_shift(1),o=[r];if(o[2]=s,n.cellFormula){var i=uVe(e,a-e.l,n);o[1]=i}else e.l=a;return o}function sLe(e,t,n){var a=e.l+t,r=Yf(e),s=[r];if(n.cellFormula){var o=dVe(e,a-e.l,n);s[1]=o,e.l=a}else e.l=a;return s}var oLe=["left","right","top","bottom","header","footer"];function iLe(e){var t={};return oLe.forEach(function(n){t[n]=mo(e)}),t}function lLe(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function uLe(){}function cLe(){}function dLe(e,t,n,a,r,s,o){if(!e)return e;var i=t||{};a||(a={"!id":{}});var c=i.dense?[]:{},A,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,m=!1,h,p,y,g,w,b,x,T,F,k=[];i.biff=12,i["!row"]=0;var S=0,E=!1,C=[],D={},P=i.supbooks||r.supbooks||[[]];if(P.sharedf=D,P.arrayf=C,P.SheetNames=r.SheetNames||r.Sheets.map(function(ue){return ue.name}),!i.supbooks&&(i.supbooks=P,r.Names))for(var O=0;O<r.Names.length;++O)P[0][O+1]=r.Names[O];var H=[],ie=[],Ae=!1;b2[16]={n:"BrtShortReal",f:_9};var j;if(Kc(e,function(ne,Y,te){if(!m)switch(te){case 148:A=ne;break;case 0:h=ne,i.sheetRows&&i.sheetRows<=h.r&&(m=!0),T=Js(g=h.r),i["!row"]=h.r,(ne.hidden||ne.hpt||ne.level!=null)&&(ne.hpt&&(ne.hpx=K0(ne.hpt)),ie[ne.r]=ne);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(p={t:ne[2]},ne[2]){case"n":p.v=ne[1];break;case"s":x=l0[ne[1]],p.v=x.t,p.r=x.r;break;case"b":p.v=!!ne[1];break;case"e":p.v=ne[1],i.cellText!==!1&&(p.w=Xf[p.v]);break;case"str":p.t="s",p.v=ne[1];break;case"is":p.t="s",p.v=ne[1].t;break}if((y=o.CellXf[ne[0].iStyleRef])&&g9(p,y.numFmtId,null,i,s,o),w=ne[0].c==-1?w+1:ne[0].c,i.dense?(c[g]||(c[g]=[]),c[g][w]=p):c[ws(w)+T]=p,i.cellFormula){for(E=!1,S=0;S<C.length;++S){var L=C[S];h.r>=L[0].s.r&&h.r<=L[0].e.r&&w>=L[0].s.c&&w<=L[0].e.c&&(p.F=Sa(L[0]),E=!0)}!E&&ne.length>3&&(p.f=ne[3])}if(d.s.r>h.r&&(d.s.r=h.r),d.s.c>w&&(d.s.c=w),d.e.r<h.r&&(d.e.r=h.r),d.e.c<w&&(d.e.c=w),i.cellDates&&y&&p.t=="n"&&wh(ea[y.numFmtId])){var N=YA(p.v);N&&(p.t="d",p.v=new Date(N.y,N.m-1,N.d,N.H,N.M,N.S,N.u))}j&&(j.type=="XLDAPR"&&(p.D=!0),j=void 0);break;case 1:case 12:if(!i.sheetStubs||f)break;p={t:"z",v:void 0},w=ne[0].c==-1?w+1:ne[0].c,i.dense?(c[g]||(c[g]=[]),c[g][w]=p):c[ws(w)+T]=p,d.s.r>h.r&&(d.s.r=h.r),d.s.c>w&&(d.s.c=w),d.e.r<h.r&&(d.e.r=h.r),d.e.c<w&&(d.e.c=w),j&&(j.type=="XLDAPR"&&(p.D=!0),j=void 0);break;case 176:k.push(ne);break;case 49:j=((i.xlmeta||{}).Cell||[])[ne-1];break;case 494:var q=a["!id"][ne.relId];for(q?(ne.Target=q.Target,ne.loc&&(ne.Target+="#"+ne.loc),ne.Rel=q):ne.relId==""&&(ne.Target="#"+ne.loc),g=ne.rfx.s.r;g<=ne.rfx.e.r;++g)for(w=ne.rfx.s.c;w<=ne.rfx.e.c;++w)i.dense?(c[g]||(c[g]=[]),c[g][w]||(c[g][w]={t:"z",v:void 0}),c[g][w].l=ne):(b=qn({c:w,r:g}),c[b]||(c[b]={t:"z",v:void 0}),c[b].l=ne);break;case 426:if(!i.cellFormula)break;C.push(ne),F=i.dense?c[g][w]:c[ws(w)+T],F.f=io(ne[1],d,{r:h.r,c:w},P,i),F.F=Sa(ne[0]);break;case 427:if(!i.cellFormula)break;D[qn(ne[0].s)]=ne[1],F=i.dense?c[g][w]:c[ws(w)+T],F.f=io(ne[1],d,{r:h.r,c:w},P,i);break;case 60:if(!i.cellStyles)break;for(;ne.e>=ne.s;)H[ne.e--]={width:ne.w/256,hidden:!!(ne.flags&1),level:ne.level},Ae||(Ae=!0,jT(ne.w/256)),jv(H[ne.e+1]);break;case 161:c["!autofilter"]={ref:Sa(ne)};break;case 476:c["!margins"]=ne;break;case 147:r.Sheets[n]||(r.Sheets[n]={}),ne.name&&(r.Sheets[n].CodeName=ne.name),(ne.above||ne.left)&&(c["!outline"]={above:ne.above,left:ne.left});break;case 137:r.Views||(r.Views=[{}]),r.Views[0]||(r.Views[0]={}),ne.RTL&&(r.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!Y.T){if(!f||i.WTF)throw new Error("Unexpected record 0x"+te.toString(16))}}},i),delete i.supbooks,delete i["!row"],!c["!ref"]&&(d.s.r<2e6||A&&(A.e.r>0||A.e.c>0||A.s.r>0||A.s.c>0))&&(c["!ref"]=Sa(A||d)),i.sheetRows&&c["!ref"]){var J=Vr(c["!ref"]);i.sheetRows<=+J.e.r&&(J.e.r=i.sheetRows-1,J.e.r>d.e.r&&(J.e.r=d.e.r),J.e.r<J.s.r&&(J.s.r=J.e.r),J.e.c>d.e.c&&(J.e.c=d.e.c),J.e.c<J.s.c&&(J.s.c=J.e.c),c["!fullref"]=c["!ref"],c["!ref"]=Sa(J))}return k.length>0&&(c["!merges"]=k),H.length>0&&(c["!cols"]=H),ie.length>0&&(c["!rows"]=ie),c}function ALe(e){var t=[],n=e.match(/^<c:numCache>/),a;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var o=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(t[+o[1]]=n?+o[2]:o[2])});var r=Ia((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){a=s.replace(/<.*?>/g,"")}),[t,r,a]}function fLe(e,t,n,a,r,s){var o=s||{"!type":"chart"};if(!e)return s;var i=0,c=0,A="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var m=ALe(f);d.s.r=d.s.c=0,d.e.c=i,A=ws(i),m[0].forEach(function(h,p){o[A+Js(p)]={t:"n",v:h,z:m[1]},c=p}),d.e.r<c&&(d.e.r=c),++i}),i>0&&(o["!ref"]=Sa(d)),o}function mLe(e,t,n,a,r){if(!e)return e;a||(a={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},o,i=e.match(y9);return i&&YT(i[0],s,r,n),(o=e.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=o[1]),a["!id"][s["!rel"]]&&(s["!drawel"]=a["!id"][s["!rel"]]),s}function vLe(e,t){e.l+=10;var n=_o(e);return{name:n}}function hLe(e,t,n,a,r){if(!e)return e;a||(a={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},o=!1;return Kc(e,function(c,A,d){switch(d){case 550:s["!rel"]=c;break;case 651:r.Sheets[n]||(r.Sheets[n]={}),c.name&&(r.Sheets[n].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(A.T>0)){if(!(A.T<0)){if(!o||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),a["!id"][s["!rel"]]&&(s["!drawel"]=a["!id"][s["!rel"]]),s}var w9=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],pLe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],gLe=[],yLe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function dN(e,t){for(var n=0;n!=e.length;++n)for(var a=e[n],r=0;r!=t.length;++r){var s=t[r];if(a[s[0]]==null)a[s[0]]=s[1];else switch(s[2]){case"bool":typeof a[s[0]]=="string"&&(a[s[0]]=Sr(a[s[0]]));break;case"int":typeof a[s[0]]=="string"&&(a[s[0]]=parseInt(a[s[0]],10));break}}}function AN(e,t){for(var n=0;n!=t.length;++n){var a=t[n];if(e[a[0]]==null)e[a[0]]=a[1];else switch(a[2]){case"bool":typeof e[a[0]]=="string"&&(e[a[0]]=Sr(e[a[0]]));break;case"int":typeof e[a[0]]=="string"&&(e[a[0]]=parseInt(e[a[0]],10));break}}}function b9(e){AN(e.WBProps,w9),AN(e.CalcPr,yLe),dN(e.WBView,pLe),dN(e.Sheets,gLe),Cv.date1904=Sr(e.WBProps.date1904)}var _Le="][*?/\\".split("");function wLe(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var n=!0;return _Le.forEach(function(a){if(e.indexOf(a)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),n}var bLe=/<\w+:workbook/;function xLe(e,t){if(!e)throw new Error("Could not find file");var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},a=!1,r="xmlns",s={},o=0;if(e.replace(So,function(c,A){var d=Mn(c);switch(ju(d[0])){case"<?xml":break;case"<workbook":c.match(bLe)&&(r="xmlns"+c.match(/<(\w+):/)[1]),n.xmlns=d[r];break;case"</workbook>":break;case"<fileVersion":delete d[0],n.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":w9.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":n.WBProps[f[0]]=Sr(d[f[0]]);break;case"int":n.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:n.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(n.WBProps.CodeName=mr(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],n.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Ia(mr(d.name)),delete d[0],n.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":a=!0;break;case"</definedNames>":a=!1;break;case"<definedName":s={},s.Name=mr(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),Sr(d.hidden||"0")&&(s.Hidden=!0),o=A+c.length;break;case"</definedName>":s.Ref=Ia(mr(e.slice(o,A))),n.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],n.CalcPr=d;break;case"<calcPr/>":delete d[0],n.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":a=!0;break;case"</AlternateContent>":a=!1;break;case"<revisionPtr":break;default:if(!a&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),HPe.indexOf(n.xmlns)===-1)throw new Error("Unknown Namespace: "+n.xmlns);return b9(n),n}function CLe(e,t){var n={};return n.Hidden=e.read_shift(4),n.iTabID=e.read_shift(4),n.strRelID=RE(e),n.name=_o(e),n}function SLe(e,t){var n={},a=e.read_shift(4);n.defaultThemeVersion=e.read_shift(4);var r=t>8?_o(e):"";return r.length>0&&(n.CodeName=r),n.autoCompressPictures=!!(a&65536),n.backupFile=!!(a&64),n.checkCompatibility=!!(a&4096),n.date1904=!!(a&1),n.filterPrivacy=!!(a&8),n.hidePivotFieldList=!!(a&1024),n.promptedSolutions=!!(a&16),n.publishItems=!!(a&2048),n.refreshAllConnections=!!(a&262144),n.saveExternalLinkValues=!!(a&128),n.showBorderUnselectedTables=!!(a&4),n.showInkAnnotation=!!(a&32),n.showObjects=["all","placeholders","none"][a>>13&3],n.showPivotChartFilter=!!(a&32768),n.updateLinks=["userSet","never","always"][a>>8&3],n}function ELe(e,t){var n={};return e.read_shift(4),n.ArchID=e.read_shift(4),e.l+=t-8,n}function BLe(e,t,n){var a=e.l+t;e.l+=4,e.l+=1;var r=e.read_shift(4),s=sDe(e),o=cVe(e,0,n),i=QT(e);e.l=a;var c={Name:s,Ptg:o};return r<268435455&&(c.Sheet=r),i&&(c.Comment=i),c}function kLe(e,t){var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},a=[],r=!1;t||(t={}),t.biff=12;var s=[],o=[[]];return o.SheetNames=[],o.XTI=[],b2[16]={n:"BrtFRTArchID$",f:ELe},Kc(e,function(c,A,d){switch(d){case 156:o.SheetNames.push(c.name),n.Sheets.push(c);break;case 153:n.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=io(c.Ptg,null,null,o,t),delete t.SID,delete c.Ptg,s.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([d,c]):o[0]=[d,c],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(c),o.XTI=o.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:a.push(d),r=!0;break;case 36:a.pop(),r=!1;break;case 37:a.push(d),r=!0;break;case 38:a.pop(),r=!1;break;case 16:break;default:if(!A.T){if(!r||t.WTF&&a[a.length-1]!=37&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),b9(n),n.Names=s,n.supbooks=o,n}function TLe(e,t,n){return t.slice(-4)===".bin"?kLe(e,n):xLe(e,n)}function ILe(e,t,n,a,r,s,o,i){return t.slice(-4)===".bin"?dLe(e,a,n,r,s,o,i):CVe(e,a,n,r,s,o,i)}function FLe(e,t,n,a,r,s,o,i){return t.slice(-4)===".bin"?hLe(e,a,n,r,s):mLe(e,a,n,r,s)}function PLe(e,t,n,a,r,s,o,i){return t.slice(-4)===".bin"?ORe():HRe()}function DLe(e,t,n,a,r,s,o,i){return t.slice(-4)===".bin"?LRe():MRe()}function ULe(e,t,n,a){return t.slice(-4)===".bin"?tRe(e,n,a):qUe(e,n,a)}function RLe(e,t,n){return l9(e,n)}function NLe(e,t,n){return t.slice(-4)===".bin"?pUe(e,n):vUe(e,n)}function VLe(e,t,n){return t.slice(-4)===".bin"?RRe(e,n):IRe(e,n)}function LLe(e,t,n){return t.slice(-4)===".bin"?BRe(e):SRe(e)}function MLe(e,t,n,a){return n.slice(-4)===".bin"?kRe(e,t,n,a):void 0}function OLe(e,t,n){return t.slice(-4)===".bin"?xRe(e,t,n):CRe(e,t,n)}var x9=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,C9=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function bl(e,t){var n=e.split(/\s+/),a=[];if(a[0]=n[0],n.length===1)return a;var r=e.match(x9),s,o,i,c;if(r)for(c=0;c!=r.length;++c)s=r[c].match(C9),(o=s[1].indexOf(":"))===-1?a[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?i="xmlns"+s[1].slice(6):i=s[1].slice(o+1),a[i]=s[2].slice(1,s[2].length-1));return a}function HLe(e){var t=e.split(/\s+/),n={};if(t.length===1)return n;var a=e.match(x9),r,s,o,i;if(a)for(i=0;i!=a.length;++i)r=a[i].match(C9),(s=r[1].indexOf(":"))===-1?n[r[1]]=r[2].slice(1,r[2].length-1):(r[1].slice(0,6)==="xmlns:"?o="xmlns"+r[1].slice(6):o=r[1].slice(s+1),n[o]=r[2].slice(1,r[2].length-1));return n}var c0;function $Le(e,t){var n=c0[e]||Ia(e);return n==="General"?Sf(t):ll(n,t)}function QLe(e,t,n,a){var r=a;switch((n[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":r=Sr(a);break;case"i2":case"int":r=parseInt(a,10);break;case"r4":case"float":r=parseFloat(a);break;case"date":case"dateTime.tz":r=Vs(a);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+n[0])}e[Ia(t)]=r}function GLe(e,t,n){if(e.t!=="z"){if(!n||n.cellText!==!1)try{e.t==="e"?e.w=e.w||Xf[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=H0(e.v):e.w=Sf(e.v):e.w=$Le(t||"General",e.v)}catch(s){if(n.WTF)throw s}try{var a=c0[t]||t||"General";if(n.cellNF&&(e.z=a),n.cellDates&&e.t=="n"&&wh(a)){var r=YA(e.v);r&&(e.t="d",e.v=new Date(r.y,r.m-1,r.d,r.H,r.M,r.S,r.u))}}catch(s){if(n.WTF)throw s}}}function zLe(e,t,n){if(n.cellStyles&&t.Interior){var a=t.Interior;a.Pattern&&(a.patternType=QUe[a.Pattern]||a.Pattern)}e[t.ID]=t}function KLe(e,t,n,a,r,s,o,i,c,A){var d="General",f=a.StyleID,m={};A=A||{};var h=[],p=0;for(f===void 0&&i&&(f=i.StyleID),f===void 0&&o&&(f=o.StyleID);s[f]!==void 0&&(s[f].nf&&(d=s[f].nf),s[f].Interior&&h.push(s[f].Interior),!!s[f].Parent);)f=s[f].Parent;switch(n.Type){case"Boolean":a.t="b",a.v=Sr(e);break;case"String":a.t="s",a.r=UR(Ia(e)),a.v=e.indexOf("<")>-1?Ia(t||e).replace(/<.*?>/g,""):a.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),a.v=(Vs(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),a.v!==a.v?a.v=Ia(e):a.v<60&&(a.v=a.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":a.v===void 0&&(a.v=+e),a.t||(a.t="n");break;case"Error":a.t="e",a.v=O$[e],A.cellText!==!1&&(a.w=e);break;default:e==""&&t==""?a.t="z":(a.t="s",a.v=UR(t||e));break}if(GLe(a,d,A),A.cellFormula!==!1)if(a.Formula){var y=Ia(a.Formula);y.charCodeAt(0)==61&&(y=y.slice(1)),a.f=xv(y,r),delete a.Formula,a.ArrayRange=="RC"?a.F=xv("RC:RC",r):a.ArrayRange&&(a.F=xv(a.ArrayRange,r),c.push([Vr(a.F),a.F]))}else for(p=0;p<c.length;++p)r.r>=c[p][0].s.r&&r.r<=c[p][0].e.r&&r.c>=c[p][0].s.c&&r.c<=c[p][0].e.c&&(a.F=c[p][1]);A.cellStyles&&(h.forEach(function(g){!m.patternType&&g.patternType&&(m.patternType=g.patternType)}),a.s=m),a.StyleID!==void 0&&(a.ixfe=a.StyleID)}function WLe(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function LC(e,t){var n=t||{};A$();var a=Dp(LT(e));(n.type=="binary"||n.type=="array"||n.type=="base64")&&(a=mr(a));var r=a.slice(0,1024).toLowerCase(),s=!1;if(r=r.replace(/".*?"/g,""),(r.indexOf(">")&1023)>Math.min(r.indexOf(",")&1023,r.indexOf(";")&1023)){var o=Xs(n);return o.type="string",G0.to_workbook(a,o)}if(r.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Ce){r.indexOf("<"+Ce)>=0&&(s=!0)}),s)return n8e(a,n);c0={"General Number":"General","General Date":ea[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":ea[15],"Short Date":ea[14],"Long Time":ea[19],"Medium Time":ea[18],"Short Time":ea[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:ea[2],Standard:ea[4],Percent:ea[10],Scientific:ea[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var i,c=[],A,d={},f=[],m=n.dense?[]:{},h="",p={},y={},g=bl('<Data ss:Type="String">'),w=0,b=0,x=0,T={s:{r:2e6,c:2e6},e:{r:0,c:0}},F={},k={},S="",E=0,C=[],D={},P={},O=0,H=[],ie=[],Ae={},j=[],J,ue=!1,ne=[],Y=[],te={},L=0,N=0,q={Sheets:[],WBProps:{date1904:!1}},Q={};Q0.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"");for(var ee="";i=Q0.exec(a);)switch(i[3]=(ee=i[3]).toLowerCase()){case"data":if(ee=="data"){if(i[1]==="/"){if((A=c.pop())[0]!==i[3])throw new Error("Bad state: "+A.join("|"))}else i[0].charAt(i[0].length-2)!=="/"&&c.push([i[3],!0]);break}if(c[c.length-1][1])break;i[1]==="/"?KLe(a.slice(w,i.index),S,g,c[c.length-1][0]=="comment"?Ae:p,{c:b,r:x},F,j[b],y,ne,n):(S="",g=bl(i[0]),w=i.index+i[0].length);break;case"cell":if(i[1]==="/")if(ie.length>0&&(p.c=ie),(!n.sheetRows||n.sheetRows>x)&&p.v!==void 0&&(n.dense?(m[x]||(m[x]=[]),m[x][b]=p):m[ws(b)+Js(x)]=p),p.HRef&&(p.l={Target:Ia(p.HRef)},p.HRefScreenTip&&(p.l.Tooltip=p.HRefScreenTip),delete p.HRef,delete p.HRefScreenTip),(p.MergeAcross||p.MergeDown)&&(L=b+(parseInt(p.MergeAcross,10)|0),N=x+(parseInt(p.MergeDown,10)|0),C.push({s:{c:b,r:x},e:{c:L,r:N}})),!n.sheetStubs)p.MergeAcross?b=L+1:++b;else if(p.MergeAcross||p.MergeDown){for(var z=b;z<=L;++z)for(var X=x;X<=N;++X)(z>b||X>x)&&(n.dense?(m[X]||(m[X]=[]),m[X][z]={t:"z"}):m[ws(z)+Js(X)]={t:"z"});b=L+1}else++b;else p=HLe(i[0]),p.Index&&(b=+p.Index-1),b<T.s.c&&(T.s.c=b),b>T.e.c&&(T.e.c=b),i[0].slice(-2)==="/>"&&++b,ie=[];break;case"row":i[1]==="/"||i[0].slice(-2)==="/>"?(x<T.s.r&&(T.s.r=x),x>T.e.r&&(T.e.r=x),i[0].slice(-2)==="/>"&&(y=bl(i[0]),y.Index&&(x=+y.Index-1)),b=0,++x):(y=bl(i[0]),y.Index&&(x=+y.Index-1),te={},(y.AutoFitHeight=="0"||y.Height)&&(te.hpx=parseInt(y.Height,10),te.hpt=i9(te.hpx),Y[x]=te),y.Hidden=="1"&&(te.hidden=!0,Y[x]=te));break;case"worksheet":if(i[1]==="/"){if((A=c.pop())[0]!==i[3])throw new Error("Bad state: "+A.join("|"));f.push(h),T.s.r<=T.e.r&&T.s.c<=T.e.c&&(m["!ref"]=Sa(T),n.sheetRows&&n.sheetRows<=T.e.r&&(m["!fullref"]=m["!ref"],T.e.r=n.sheetRows-1,m["!ref"]=Sa(T))),C.length&&(m["!merges"]=C),j.length>0&&(m["!cols"]=j),Y.length>0&&(m["!rows"]=Y),d[h]=m}else T={s:{r:2e6,c:2e6},e:{r:0,c:0}},x=b=0,c.push([i[3],!1]),A=bl(i[0]),h=Ia(A.Name),m=n.dense?[]:{},C=[],ne=[],Y=[],Q={name:h,Hidden:0},q.Sheets.push(Q);break;case"table":if(i[1]==="/"){if((A=c.pop())[0]!==i[3])throw new Error("Bad state: "+A.join("|"))}else{if(i[0].slice(-2)=="/>")break;c.push([i[3],!1]),j=[],ue=!1}break;case"style":i[1]==="/"?zLe(F,k,n):k=bl(i[0]);break;case"numberformat":k.nf=Ia(bl(i[0]).Format||"General"),c0[k.nf]&&(k.nf=c0[k.nf]);for(var le=0;le!=392&&ea[le]!=k.nf;++le);if(le==392){for(le=57;le!=392;++le)if(ea[le]==null){cf(k.nf,le);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(J=bl(i[0]),J.Hidden&&(J.hidden=!0,delete J.Hidden),J.Width&&(J.wpx=parseInt(J.Width,10)),!ue&&J.wpx>10){ue=!0,Vo=s9;for(var re=0;re<j.length;++re)j[re]&&jv(j[re])}ue&&jv(J),j[J.Index-1||j.length]=J;for(var de=0;de<+J.Span;++de)j[j.length]=Xs(J);break;case"namedrange":if(i[1]==="/")break;q.Names||(q.Names=[]);var G=Mn(i[0]),Z={Name:G.Name,Ref:xv(G.RefersTo.slice(1),{r:0,c:0})};q.Sheets.length>0&&(Z.Sheet=q.Sheets.length-1),q.Names.push(Z);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(i[0].slice(-2)==="/>")break;i[1]==="/"?S+=a.slice(E,i.index):E=i.index+i[0].length;break;case"interior":if(!n.cellStyles)break;k.Interior=bl(i[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(i[0].slice(-2)==="/>")break;i[1]==="/"?IDe(D,ee,a.slice(O,i.index)):O=i.index+i[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(i[1]==="/"){if((A=c.pop())[0]!==i[3])throw new Error("Bad state: "+A.join("|"))}else c.push([i[3],!1]);break;case"comment":if(i[1]==="/"){if((A=c.pop())[0]!==i[3])throw new Error("Bad state: "+A.join("|"));WLe(Ae),ie.push(Ae)}else c.push([i[3],!1]),A=bl(i[0]),Ae={a:A.Author};break;case"autofilter":if(i[1]==="/"){if((A=c.pop())[0]!==i[3])throw new Error("Bad state: "+A.join("|"))}else if(i[0].charAt(i[0].length-2)!=="/"){var ce=bl(i[0]);m["!autofilter"]={ref:xv(ce.Range).replace(/\$/g,"")},c.push([i[3],!0])}break;case"name":break;case"datavalidation":if(i[1]==="/"){if((A=c.pop())[0]!==i[3])throw new Error("Bad state: "+A.join("|"))}else i[0].charAt(i[0].length-2)!=="/"&&c.push([i[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(i[1]==="/"){if((A=c.pop())[0]!==i[3])throw new Error("Bad state: "+A.join("|"))}else i[0].charAt(i[0].length-2)!=="/"&&c.push([i[3],!0]);break;case"null":break;default:if(c.length==0&&i[3]=="document"||c.length==0&&i[3]=="uof")return gN(a,n);var Se=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(i[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Se=!1}break;case"componentoptions":switch(i[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Se=!1}break;case"excelworkbook":switch(i[3]){case"date1904":q.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Se=!1}break;case"workbookoptions":switch(i[3]){case"owcversion":break;case"height":break;case"width":break;default:Se=!1}break;case"worksheetoptions":switch(i[3]){case"visible":if(i[0].slice(-2)!=="/>")if(i[1]==="/")switch(a.slice(O,i.index)){case"SheetHidden":Q.Hidden=1;break;case"SheetVeryHidden":Q.Hidden=2;break}else O=i.index+i[0].length;break;case"header":m["!margins"]||u0(m["!margins"]={},"xlml"),isNaN(+Mn(i[0]).Margin)||(m["!margins"].header=+Mn(i[0]).Margin);break;case"footer":m["!margins"]||u0(m["!margins"]={},"xlml"),isNaN(+Mn(i[0]).Margin)||(m["!margins"].footer=+Mn(i[0]).Margin);break;case"pagemargins":var Pe=Mn(i[0]);m["!margins"]||u0(m["!margins"]={},"xlml"),isNaN(+Pe.Top)||(m["!margins"].top=+Pe.Top),isNaN(+Pe.Left)||(m["!margins"].left=+Pe.Left),isNaN(+Pe.Right)||(m["!margins"].right=+Pe.Right),isNaN(+Pe.Bottom)||(m["!margins"].bottom=+Pe.Bottom);break;case"displayrighttoleft":q.Views||(q.Views=[]),q.Views[0]||(q.Views[0]={}),q.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Se=!1}break;case"pivottable":case"pivotcache":switch(i[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Se=!1}break;case"pagebreaks":switch(i[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Se=!1}break;case"autofilter":switch(i[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Se=!1}break;case"querytable":switch(i[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Se=!1}break;case"datavalidation":switch(i[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Se=!1}break;case"sorting":case"conditionalformatting":switch(i[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Se=!1}break;case"mapinfo":case"schema":case"data":switch(i[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Se=!1}break;case"smarttags":break;default:Se=!1;break}if(Se||i[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+i[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(i[0].slice(-2)==="/>")break;i[1]==="/"?QLe(P,ee,H,a.slice(O,i.index)):(H=i,O=i.index+i[0].length);break}if(n.WTF)throw"Unrecognized tag: "+i[3]+"|"+c.join("|")}var ye={};return!n.bookSheets&&!n.bookProps&&(ye.Sheets=d),ye.SheetNames=f,ye.Workbook=q,ye.SSF=Xs(ea),ye.Props=D,ye.Custprops=P,ye}function ME(e,t){switch(ZT(t=t||{}),t.type||"base64"){case"base64":return LC(Di(e),t);case"binary":case"buffer":case"file":return LC(e,t);case"array":return LC(jf(e),t)}}function jLe(e){var t={},n=e.content;if(n.l=28,t.AnsiUserType=n.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=lDe(n),n.length-n.l<=4)return t;var a=n.read_shift(4);if(a==0||a>40||(n.l-=4,t.Reserved1=n.read_shift(0,"lpstr-ansi"),n.length-n.l<=4)||(a=n.read_shift(4),a!==1907505652)||(t.UnicodeClipboardFormat=uDe(n),a=n.read_shift(4),a==0||a>40))return t;n.l-=4,t.Reserved2=n.read_shift(0,"lpwstr")}var qLe=[60,1084,2066,2165,2175];function YLe(e,t,n,a,r){var s=a,o=[],i=n.slice(n.l,n.l+s);if(r&&r.enc&&r.enc.insitu&&i.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:r.enc.insitu(i)}o.push(i),n.l+=s;for(var c=Cc(n,n.l),A=OE[c],d=0;A!=null&&qLe.indexOf(c)>-1;)s=Cc(n,n.l+2),d=n.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),i=n.slice(d,n.l+4+s),o.push(i),n.l+=4+s,A=OE[c=Cc(n,n.l)];var f=Ed(o);Gs(f,0);var m=0;f.lens=[];for(var h=0;h<o.length;++h)f.lens.push(m),m+=o[h].length;if(f.length<a)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+a;return t.f(f,f.length,r)}function gu(e,t,n){if(e.t!=="z"&&e.XF){var a=0;try{a=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=ea[a])}catch(s){if(t.WTF)throw s}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||Xf[e.v]:a===0||a=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=H0(e.v):e.w=Sf(e.v):e.w=ll(a,e.v,{date1904:!!n,dateNF:t&&t.dateNF})}catch(s){if(t.WTF)throw s}if(t.cellDates&&a&&e.t=="n"&&wh(ea[a]||String(a))){var r=YA(e.v);r&&(e.t="d",e.v=new Date(r.y,r.m-1,r.d,r.H,r.M,r.S,r.u))}}}function Py(e,t,n){return{v:e,ixfe:t,t:n}}function XLe(e,t){var n={opts:{}},a={},r=t.dense?[]:{},s={},o={},i=null,c=[],A="",d={},f,m="",h,p,y,g,w={},b=[],x,T,F=[],k=[],S={Sheets:[],WBProps:{date1904:!1},Views:[{}]},E={},C=function(Pt){return Pt<8?df[Pt]:Pt<64&&k[Pt-8]||df[Pt]},D=function(Pt,Kt,$t){var bt=Kt.XF.data;if(!(!bt||!bt.patternType||!$t||!$t.cellStyles)){Kt.s={},Kt.s.patternType=bt.patternType;var st;(st=z0(C(bt.icvFore)))&&(Kt.s.fgColor={rgb:st}),(st=z0(C(bt.icvBack)))&&(Kt.s.bgColor={rgb:st})}},P=function(Pt,Kt,$t){if(!(te>1)&&!($t.sheetRows&&Pt.r>=$t.sheetRows)){if($t.cellStyles&&Kt.XF&&Kt.XF.data&&D(Pt,Kt,$t),delete Kt.ixfe,delete Kt.XF,f=Pt,m=qn(Pt),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),Pt.r<o.s.r&&(o.s.r=Pt.r),Pt.c<o.s.c&&(o.s.c=Pt.c),Pt.r+1>o.e.r&&(o.e.r=Pt.r+1),Pt.c+1>o.e.c&&(o.e.c=Pt.c+1),$t.cellFormula&&Kt.f){for(var bt=0;bt<b.length;++bt)if(!(b[bt][0].s.c>Pt.c||b[bt][0].s.r>Pt.r)&&!(b[bt][0].e.c<Pt.c||b[bt][0].e.r<Pt.r)){Kt.F=Sa(b[bt][0]),(b[bt][0].s.c!=Pt.c||b[bt][0].s.r!=Pt.r)&&delete Kt.f,Kt.f&&(Kt.f=""+io(b[bt][1],o,Pt,ne,O));break}}$t.dense?(r[Pt.r]||(r[Pt.r]=[]),r[Pt.r][Pt.c]=Kt):r[m]=Kt}},O={enc:!1,sbcch:0,snames:[],sharedf:w,arrayf:b,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(O.password=t.password);var H,ie=[],Ae=[],j=[],J=[],ue=!1,ne=[];ne.SheetNames=O.snames,ne.sharedf=O.sharedf,ne.arrayf=O.arrayf,ne.names=[],ne.XTI=[];var Y=0,te=0,L=0,N=[],q=[],Q;O.codepage=1200,Ul(1200);for(var ee=!1;e.l<e.length-1;){var z=e.l,X=e.read_shift(2);if(X===0&&Y===10)break;var le=e.l===e.length?0:e.read_shift(2),re=OE[X];if(re&&re.f){if(t.bookSheets&&Y===133&&X!==133)break;if(Y=X,re.r===2||re.r==12){var de=e.read_shift(2);if(le-=2,!O.enc&&de!==X&&((de&255)<<8|de>>8)!==X)throw new Error("rt mismatch: "+de+"!="+X);re.r==12&&(e.l+=10,le-=10)}var G={};if(X===10?G=re.f(e,le,O):G=YLe(X,re,e,le,O),te==0&&[9,521,1033,2057].indexOf(Y)===-1)continue;switch(X){case 34:n.opts.Date1904=S.WBProps.date1904=G;break;case 134:n.opts.WriteProtect=!0;break;case 47:if(O.enc||(e.l=0),O.enc=G,!t.password)throw new Error("File is password-protected");if(G.valid==null)throw new Error("Encryption scheme unsupported");if(!G.valid)throw new Error("Password is incorrect");break;case 92:O.lastuser=G;break;case 66:var Z=Number(G);switch(Z){case 21010:Z=1200;break;case 32768:Z=1e4;break;case 32769:Z=1252;break}Ul(O.codepage=Z),ee=!0;break;case 317:O.rrtabid=G;break;case 25:O.winlocked=G;break;case 439:n.opts.RefreshAll=G;break;case 12:n.opts.CalcCount=G;break;case 16:n.opts.CalcDelta=G;break;case 17:n.opts.CalcIter=G;break;case 13:n.opts.CalcMode=G;break;case 14:n.opts.CalcPrecision=G;break;case 95:n.opts.CalcSaveRecalc=G;break;case 15:O.CalcRefMode=G;break;case 2211:n.opts.FullCalc=G;break;case 129:G.fDialog&&(r["!type"]="dialog"),G.fBelow||((r["!outline"]||(r["!outline"]={})).above=!0),G.fRight||((r["!outline"]||(r["!outline"]={})).left=!0);break;case 224:F.push(G);break;case 430:ne.push([G]),ne[ne.length-1].XTI=[];break;case 35:case 547:ne[ne.length-1].push(G);break;case 24:case 536:Q={Name:G.Name,Ref:io(G.rgce,o,null,ne,O)},G.itab>0&&(Q.Sheet=G.itab-1),ne.names.push(Q),ne[0]||(ne[0]=[],ne[0].XTI=[]),ne[ne.length-1].push(G),G.Name=="_xlnm._FilterDatabase"&&G.itab>0&&G.rgce&&G.rgce[0]&&G.rgce[0][0]&&G.rgce[0][0][0]=="PtgArea3d"&&(q[G.itab-1]={ref:Sa(G.rgce[0][0][1][2])});break;case 22:O.ExternCount=G;break;case 23:ne.length==0&&(ne[0]=[],ne[0].XTI=[]),ne[ne.length-1].XTI=ne[ne.length-1].XTI.concat(G),ne.XTI=ne.XTI.concat(G);break;case 2196:if(O.biff<8)break;Q!=null&&(Q.Comment=G[1]);break;case 18:r["!protect"]=G;break;case 19:G!==0&&O.WTF&&console.error("Password verifier: "+G);break;case 133:s[G.pos]=G,O.snames.push(G.name);break;case 10:{if(--te)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,r["!ref"]=Sa(o),t.sheetRows&&t.sheetRows<=o.e.r){var ce=o.e.r;o.e.r=t.sheetRows-1,r["!fullref"]=r["!ref"],r["!ref"]=Sa(o),o.e.r=ce}o.e.r++,o.e.c++}ie.length>0&&(r["!merges"]=ie),Ae.length>0&&(r["!objects"]=Ae),j.length>0&&(r["!cols"]=j),J.length>0&&(r["!rows"]=J),S.Sheets.push(E)}A===""?d=r:a[A]=r,r=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(O.biff===8&&(O.biff={9:2,521:3,1033:4}[X]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[G.BIFFVer]||8),O.biffguess=G.BIFFVer==0,G.BIFFVer==0&&G.dt==4096&&(O.biff=5,ee=!0,Ul(O.codepage=28591)),O.biff==8&&G.BIFFVer==0&&G.dt==16&&(O.biff=2),te++)break;if(r=t.dense?[]:{},O.biff<8&&!ee&&(ee=!0,Ul(O.codepage=t.codepage||1252)),O.biff<5||G.BIFFVer==0&&G.dt==4096){A===""&&(A="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var Se={pos:e.l-le,name:A};s[Se.pos]=Se,O.snames.push(A)}else A=(s[z]||{name:""}).name;G.dt==32&&(r["!type"]="chart"),G.dt==64&&(r["!type"]="macro"),ie=[],Ae=[],O.arrayf=b=[],j=[],J=[],ue=!1,E={Hidden:(s[z]||{hs:0}).hs,name:A}}break;case 515:case 3:case 2:r["!type"]=="chart"&&(t.dense?(r[G.r]||[])[G.c]:r[qn({c:G.c,r:G.r})])&&++G.c,x={ixfe:G.ixfe,XF:F[G.ixfe]||{},v:G.val,t:"n"},L>0&&(x.z=N[x.ixfe>>8&63]),gu(x,t,n.opts.Date1904),P({c:G.c,r:G.r},x,t);break;case 5:case 517:x={ixfe:G.ixfe,XF:F[G.ixfe],v:G.val,t:G.t},L>0&&(x.z=N[x.ixfe>>8&63]),gu(x,t,n.opts.Date1904),P({c:G.c,r:G.r},x,t);break;case 638:x={ixfe:G.ixfe,XF:F[G.ixfe],v:G.rknum,t:"n"},L>0&&(x.z=N[x.ixfe>>8&63]),gu(x,t,n.opts.Date1904),P({c:G.c,r:G.r},x,t);break;case 189:for(var Pe=G.c;Pe<=G.C;++Pe){var ye=G.rkrec[Pe-G.c][0];x={ixfe:ye,XF:F[ye],v:G.rkrec[Pe-G.c][1],t:"n"},L>0&&(x.z=N[x.ixfe>>8&63]),gu(x,t,n.opts.Date1904),P({c:Pe,r:G.r},x,t)}break;case 6:case 518:case 1030:{if(G.val=="String"){i=G;break}if(x=Py(G.val,G.cell.ixfe,G.tt),x.XF=F[x.ixfe],t.cellFormula){var Ce=G.formula;if(Ce&&Ce[0]&&Ce[0][0]&&Ce[0][0][0]=="PtgExp"){var _e=Ce[0][0][1][0],De=Ce[0][0][1][1],xe=qn({r:_e,c:De});w[xe]?x.f=""+io(G.formula,o,G.cell,ne,O):x.F=((t.dense?(r[_e]||[])[De]:r[xe])||{}).F}else x.f=""+io(G.formula,o,G.cell,ne,O)}L>0&&(x.z=N[x.ixfe>>8&63]),gu(x,t,n.opts.Date1904),P(G.cell,x,t),i=G}break;case 7:case 519:if(i)i.val=G,x=Py(G,i.cell.ixfe,"s"),x.XF=F[x.ixfe],t.cellFormula&&(x.f=""+io(i.formula,o,i.cell,ne,O)),L>0&&(x.z=N[x.ixfe>>8&63]),gu(x,t,n.opts.Date1904),P(i.cell,x,t),i=null;else throw new Error("String record expects Formula");break;case 33:case 545:{b.push(G);var Te=qn(G[0].s);if(h=t.dense?(r[G[0].s.r]||[])[G[0].s.c]:r[Te],t.cellFormula&&h){if(!i||!Te||!h)break;h.f=""+io(G[1],o,G[0],ne,O),h.F=Sa(G[0])}}break;case 1212:{if(!t.cellFormula)break;if(m){if(!i)break;w[qn(i.cell)]=G[0],h=t.dense?(r[i.cell.r]||[])[i.cell.c]:r[qn(i.cell)],(h||{}).f=""+io(G[0],o,f,ne,O)}}break;case 253:x=Py(c[G.isst].t,G.ixfe,"s"),c[G.isst].h&&(x.h=c[G.isst].h),x.XF=F[x.ixfe],L>0&&(x.z=N[x.ixfe>>8&63]),gu(x,t,n.opts.Date1904),P({c:G.c,r:G.r},x,t);break;case 513:t.sheetStubs&&(x={ixfe:G.ixfe,XF:F[G.ixfe],t:"z"},L>0&&(x.z=N[x.ixfe>>8&63]),gu(x,t,n.opts.Date1904),P({c:G.c,r:G.r},x,t));break;case 190:if(t.sheetStubs)for(var Me=G.c;Me<=G.C;++Me){var et=G.ixfe[Me-G.c];x={ixfe:et,XF:F[et],t:"z"},L>0&&(x.z=N[x.ixfe>>8&63]),gu(x,t,n.opts.Date1904),P({c:Me,r:G.r},x,t)}break;case 214:case 516:case 4:x=Py(G.val,G.ixfe,"s"),x.XF=F[x.ixfe],L>0&&(x.z=N[x.ixfe>>8&63]),gu(x,t,n.opts.Date1904),P({c:G.c,r:G.r},x,t);break;case 0:case 512:te===1&&(o=G);break;case 252:c=G;break;case 1054:if(O.biff==4){N[L++]=G[1];for(var lt=0;lt<L+163&&ea[lt]!=G[1];++lt);lt>=163&&cf(G[1],L+163)}else cf(G[1],G[0]);break;case 30:{N[L++]=G;for(var Re=0;Re<L+163&&ea[Re]!=G;++Re);Re>=163&&cf(G,L+163)}break;case 229:ie=ie.concat(G);break;case 93:Ae[G.cmo[0]]=O.lastobj=G;break;case 438:O.lastobj.TxO=G;break;case 127:O.lastobj.ImData=G;break;case 440:for(g=G[0].s.r;g<=G[0].e.r;++g)for(y=G[0].s.c;y<=G[0].e.c;++y)h=t.dense?(r[g]||[])[y]:r[qn({c:y,r:g})],h&&(h.l=G[1]);break;case 2048:for(g=G[0].s.r;g<=G[0].e.r;++g)for(y=G[0].s.c;y<=G[0].e.c;++y)h=t.dense?(r[g]||[])[y]:r[qn({c:y,r:g})],h&&h.l&&(h.l.Tooltip=G[1]);break;case 28:{if(O.biff<=5&&O.biff>=2)break;h=t.dense?(r[G[0].r]||[])[G[0].c]:r[qn(G[0])];var Le=Ae[G[2]];h||(t.dense?(r[G[0].r]||(r[G[0].r]=[]),h=r[G[0].r][G[0].c]={t:"z"}):h=r[qn(G[0])]={t:"z"},o.e.r=Math.max(o.e.r,G[0].r),o.s.r=Math.min(o.s.r,G[0].r),o.e.c=Math.max(o.e.c,G[0].c),o.s.c=Math.min(o.s.c,G[0].c)),h.c||(h.c=[]),p={a:G[1],t:Le.TxO.t},h.c.push(p)}break;case 2173:yRe(F[G.ixfe],G.ext);break;case 125:{if(!O.cellStyles)break;for(;G.e>=G.s;)j[G.e--]={width:G.w/256,level:G.level||0,hidden:!!(G.flags&1)},ue||(ue=!0,jT(G.w/256)),jv(j[G.e+1])}break;case 520:{var nt={};G.level!=null&&(J[G.r]=nt,nt.level=G.level),G.hidden&&(J[G.r]=nt,nt.hidden=!0),G.hpt&&(J[G.r]=nt,nt.hpt=G.hpt,nt.hpx=K0(G.hpt))}break;case 38:case 39:case 40:case 41:r["!margins"]||u0(r["!margins"]={}),r["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[X]]=G;break;case 161:r["!margins"]||u0(r["!margins"]={}),r["!margins"].header=G.header,r["!margins"].footer=G.footer;break;case 574:G.RTL&&(S.Views[0].RTL=!0);break;case 146:k=G;break;case 2198:H=G;break;case 140:T=G;break;case 442:A?E.CodeName=G||E.name:S.WBProps.CodeName=G||"ThisWorkbook";break}}else re||console.error("Missing Info for XLS Record 0x"+X.toString(16)),e.l+=le}return n.SheetNames=Vu(s).sort(function(Tt,Pt){return Number(Tt)-Number(Pt)}).map(function(Tt){return s[Tt].name}),t.bookSheets||(n.Sheets=a),!n.SheetNames.length&&d["!ref"]?(n.SheetNames.push("Sheet1"),n.Sheets&&(n.Sheets.Sheet1=d)):n.Preamble=d,n.Sheets&&q.forEach(function(Tt,Pt){n.Sheets[n.SheetNames[Pt]]["!autofilter"]=Tt}),n.Strings=c,n.SSF=Xs(ea),O.enc&&(n.Encryption=O.enc),H&&(n.Themes=H),n.Metadata={},T!==void 0&&(n.Metadata.Country=T),ne.names.length>0&&(S.Names=ne.names),n.Workbook=S,n}var fN={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function JLe(e,t,n){var a=ba.find(e,"/!DocumentSummaryInformation");if(a&&a.size>0)try{var r=YR(a,vDe,fN.DSI);for(var s in r)t[s]=r[s]}catch(A){if(n.WTF)throw A}var o=ba.find(e,"/!SummaryInformation");if(o&&o.size>0)try{var i=YR(o,hDe,fN.SI);for(var c in i)t[c]==null&&(t[c]=i[c])}catch(A){if(n.WTF)throw A}t.HeadingPairs&&t.TitlesOfParts&&($$(t.HeadingPairs,t.TitlesOfParts,t,n),delete t.HeadingPairs,delete t.TitlesOfParts)}function S9(e,t){t||(t={}),ZT(t),e$(),t.codepage&&FT(t.codepage);var n,a;if(e.FullPaths){if(ba.find(e,"/encryption"))throw new Error("File is password-protected");n=ba.find(e,"!CompObj"),a=ba.find(e,"/Workbook")||ba.find(e,"/Book")}else{switch(t.type){case"base64":e=Tl(Di(e));break;case"binary":e=Tl(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Gs(e,0),a={content:e}}var r,s;if(n&&jLe(n),t.bookProps&&!t.bookSheets)r={};else{var o=pa?"buffer":"array";if(a&&a.content)r=XLe(a.content,t);else if((s=ba.find(e,"PerfectOffice_MAIN"))&&s.content)r=i0.to_workbook(s.content,(t.type=o,t));else if((s=ba.find(e,"NativeContent_MAIN"))&&s.content)r=i0.to_workbook(s.content,(t.type=o,t));else throw(s=ba.find(e,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&ba.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(r.vbaraw=VRe(e))}var i={};return e.FullPaths&&JLe(e,i,t),r.Props=r.Custprops=i,t.bookFiles&&(r.cfb=e),r}var b2={0:{f:DVe},1:{f:VVe},2:{f:KVe},3:{f:HVe},4:{f:MVe},5:{f:zVe},6:{f:qVe},7:{f:QVe},8:{f:eLe},9:{f:ZVe},10:{f:XVe},11:{f:JVe},12:{f:LVe},13:{f:WVe},14:{f:$Ve},15:{f:OVe},16:{f:_9},17:{f:YVe},18:{f:GVe},19:{f:$T},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:BLe},40:{},42:{},43:{f:XUe},44:{f:YUe},45:{f:JUe},46:{f:eRe},47:{f:ZUe},48:{},49:{f:tDe},50:{},51:{f:wRe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:e9},62:{f:jVe},63:{f:ERe},64:{f:uLe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:bo,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:lLe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:NVe},148:{f:UVe,p:16},151:{f:aLe},152:{},153:{f:SLe},154:{},155:{},156:{f:CLe},157:{},158:{},159:{T:1,f:hUe},160:{T:-1},161:{T:1,f:Yf},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:tLe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:_Re},336:{T:-1},337:{f:bRe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:RE},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Z$},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:rLe},427:{f:sLe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:iLe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:RVe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:nLe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:RE},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:URe},633:{T:1},634:{T:-1},635:{T:1,f:DRe},636:{T:-1},637:{f:aDe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:vLe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:cLe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},OE={6:{f:NC},10:{f:Ad},12:{f:ss},13:{f:ss},14:{f:Wr},15:{f:Wr},16:{f:mo},17:{f:Wr},18:{f:Wr},19:{f:ss},20:{f:eN},21:{f:eN},23:{f:Z$},24:{f:nN},25:{f:Wr},26:{},27:{},28:{f:F3e},29:{},34:{f:Wr},35:{f:tN},38:{f:mo},39:{f:mo},40:{f:mo},41:{f:mo},42:{f:Wr},43:{f:Wr},47:{f:RUe},49:{f:A3e},51:{f:ss},60:{},61:{f:u3e},64:{f:Wr},65:{f:d3e},66:{f:ss},77:{},80:{},81:{},82:{},85:{f:ss},89:{},90:{},91:{},92:{f:t3e},93:{f:D3e},94:{},95:{f:Wr},96:{},97:{},99:{f:Wr},125:{f:e9},128:{f:b3e},129:{f:n3e},130:{f:ss},131:{f:Wr},132:{f:Wr},133:{f:a3e},134:{},140:{f:M3e},141:{f:ss},144:{},146:{f:H3e},151:{},152:{},153:{},154:{},155:{},156:{f:ss},157:{},158:{},160:{f:K3e},161:{f:Q3e},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:g3e},190:{f:y3e},193:{f:Ad},197:{},198:{},199:{},200:{},201:{},202:{f:Wr},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:ss},220:{},221:{f:Wr},222:{},224:{f:w3e},225:{f:e3e},226:{f:Ad},227:{},229:{f:P3e},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:r3e},253:{f:f3e},255:{f:s3e},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:W$},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Wr},353:{f:Ad},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:C3e},431:{f:Wr},432:{},433:{},434:{},437:{},438:{f:N3e},439:{f:Wr},440:{f:V3e},441:{},442:{f:Dg},443:{},444:{f:ss},445:{},446:{},448:{f:Ad},449:{f:l3e,r:2},450:{f:Ad},512:{f:JR},513:{f:z3e},515:{f:x3e},516:{f:m3e},517:{f:ZR},519:{f:W3e},520:{f:o3e},523:{},545:{f:aN},549:{f:XR},566:{},574:{f:c3e},638:{f:p3e},659:{},1048:{},1054:{f:v3e},1084:{},1212:{f:k3e},2048:{f:L3e},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Ty},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Ad},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:$3e,r:12},2173:{f:gRe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Wr,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:B3e,r:12},2197:{},2198:{f:ARe,r:12},2199:{},2200:{},2201:{},2202:{f:T3e,r:12},2203:{f:Ad},2204:{},2205:{},2206:{},2207:{},2211:{f:i3e},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:ss},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:G3e},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:O3e},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:JR},1:{},2:{f:X3e},3:{f:Y3e},4:{f:q3e},5:{f:ZR},7:{f:J3e},8:{},9:{f:Ty},11:{},22:{f:ss},30:{f:h3e},31:{},32:{},33:{f:aN},36:{},37:{f:XR},50:{f:Z3e},62:{},52:{},67:{},68:{f:ss},69:{},86:{},126:{},127:{f:j3e},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:eUe},223:{},234:{},354:{},421:{},518:{f:NC},521:{f:Ty},536:{f:nN},547:{f:tN},561:{},579:{},1030:{f:NC},1033:{f:Ty},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function xl(e,t,n,a){var r=t;if(!isNaN(r)){var s=(n||[]).length||0,o=e.next(4);o.write_shift(2,r),o.write_shift(2,s),s>0&&U$(n)&&e.push(n)}}function mN(e,t){var n=t||{},a=n.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var r=e.match(/<table/i);if(!r)throw new Error("Invalid HTML: could not find <table>");var s=e.match(/<\/table/i),o=r.index,i=s&&s.index||e.length,c=xPe(e.slice(o,i),/(:?<tr[^>]*>)/i,"<tr>"),A=-1,d=0,f=0,m=0,h={s:{r:1e7,c:1e7},e:{r:0,c:0}},p=[];for(o=0;o<c.length;++o){var y=c[o].trim(),g=y.slice(0,3).toLowerCase();if(g=="<tr"){if(++A,n.sheetRows&&n.sheetRows<=A){--A;break}d=0;continue}if(!(g!="<td"&&g!="<th")){var w=y.split(/<\/t[dh]>/i);for(i=0;i<w.length;++i){var b=w[i].trim();if(b.match(/<t[dh]/i)){for(var x=b,T=0;x.charAt(0)=="<"&&(T=x.indexOf(">"))>-1;)x=x.slice(T+1);for(var F=0;F<p.length;++F){var k=p[F];k.s.c==d&&k.s.r<A&&A<=k.e.r&&(d=k.e.c+1,F=-1)}var S=Mn(b.slice(0,b.indexOf(">")));m=S.colspan?+S.colspan:1,((f=+S.rowspan)>1||m>1)&&p.push({s:{r:A,c:d},e:{r:A+(f||1)-1,c:d+m-1}});var E=S.t||S["data-t"]||"";if(!x.length){d+=m;continue}if(x=w$(x),h.s.r>A&&(h.s.r=A),h.e.r<A&&(h.e.r=A),h.s.c>d&&(h.s.c=d),h.e.c<d&&(h.e.c=d),!x.length){d+=m;continue}var C={t:"s",v:x};n.raw||!x.trim().length||E=="s"||(x==="TRUE"?C={t:"b",v:!0}:x==="FALSE"?C={t:"b",v:!1}:isNaN(Ol(x))?isNaN(Wv(x).getDate())||(C={t:"d",v:Vs(x)},n.cellDates||(C={t:"n",v:Qo(C.v)}),C.z=n.dateNF||ea[14]):C={t:"n",v:Ol(x)}),n.dense?(a[A]||(a[A]=[]),a[A][d]=C):a[qn({r:A,c:d})]=C,d+=m}}}}return a["!ref"]=Sa(h),p.length&&(a["!merges"]=p),a}function ZLe(e,t,n,a){for(var r=e["!merges"]||[],s=[],o=t.s.c;o<=t.e.c;++o){for(var i=0,c=0,A=0;A<r.length;++A)if(!(r[A].s.r>n||r[A].s.c>o)&&!(r[A].e.r<n||r[A].e.c<o)){if(r[A].s.r<n||r[A].s.c<o){i=-1;break}i=r[A].e.r-r[A].s.r+1,c=r[A].e.c-r[A].s.c+1;break}if(!(i<0)){var d=qn({r:n,c:o}),f=a.dense?(e[n]||[])[o]:e[d],m=f&&f.v!=null&&(f.h||VT(f.w||(Mc(f),f.w)||""))||"",h={};i>1&&(h.rowspan=i),c>1&&(h.colspan=c),a.editable?m='<span contenteditable="true">'+m+"</span>":f&&(h["data-t"]=f&&f.t||"z",f.v!=null&&(h["data-v"]=f.v),f.z!=null&&(h["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(m='<a href="'+f.l.Target+'">'+m+"</a>")),h.id=(a.id||"sjs")+"-"+d,s.push(MPe("td",m,h))}}var p="<tr>";return p+s.join("")+"</tr>"}var e8e='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',t8e="</body></html>";function n8e(e,t){var n=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!n||n.length==0)throw new Error("Invalid HTML: could not find <table>");if(n.length==1)return uA(mN(n[0],t),t);var a=t4();return n.forEach(function(r,s){n4(a,mN(r,t),"Sheet"+(s+1))}),a}function a8e(e,t,n){var a=[];return a.join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}function r8e(e,t){var n=t||{},a=n.header!=null?n.header:e8e,r=n.footer!=null?n.footer:t8e,s=[a],o=bh(e["!ref"]);n.dense=Array.isArray(e),s.push(a8e(e,o,n));for(var i=o.s.r;i<=o.e.r;++i)s.push(ZLe(e,o,i,n));return s.push("</table>"+r),s.join("")}function E9(e,t,n){var a=n||{},r=0,s=0;if(a.origin!=null)if(typeof a.origin=="number")r=a.origin;else{var o=typeof a.origin=="string"?Lo(a.origin):a.origin;r=o.r,s=o.c}var i=t.getElementsByTagName("tr"),c=Math.min(a.sheetRows||1e7,i.length),A={s:{r:0,c:0},e:{r,c:s}};if(e["!ref"]){var d=bh(e["!ref"]);A.s.r=Math.min(A.s.r,d.s.r),A.s.c=Math.min(A.s.c,d.s.c),A.e.r=Math.max(A.e.r,d.e.r),A.e.c=Math.max(A.e.c,d.e.c),r==-1&&(A.e.r=r=d.e.r+1)}var f=[],m=0,h=e["!rows"]||(e["!rows"]=[]),p=0,y=0,g=0,w=0,b=0,x=0;for(e["!cols"]||(e["!cols"]=[]);p<i.length&&y<c;++p){var T=i[p];if(vN(T)){if(a.display)continue;h[y]={hidden:!0}}var F=T.children;for(g=w=0;g<F.length;++g){var k=F[g];if(!(a.display&&vN(k))){var S=k.hasAttribute("data-v")?k.getAttribute("data-v"):k.hasAttribute("v")?k.getAttribute("v"):w$(k.innerHTML),E=k.getAttribute("data-z")||k.getAttribute("z");for(m=0;m<f.length;++m){var C=f[m];C.s.c==w+s&&C.s.r<y+r&&y+r<=C.e.r&&(w=C.e.c+1-s,m=-1)}x=+k.getAttribute("colspan")||1,((b=+k.getAttribute("rowspan")||1)>1||x>1)&&f.push({s:{r:y+r,c:w+s},e:{r:y+r+(b||1)-1,c:w+s+(x||1)-1}});var D={t:"s",v:S},P=k.getAttribute("data-t")||k.getAttribute("t")||"";S!=null&&(S.length==0?D.t=P||"z":a.raw||S.trim().length==0||P=="s"||(S==="TRUE"?D={t:"b",v:!0}:S==="FALSE"?D={t:"b",v:!1}:isNaN(Ol(S))?isNaN(Wv(S).getDate())||(D={t:"d",v:Vs(S)},a.cellDates||(D={t:"n",v:Qo(D.v)}),D.z=a.dateNF||ea[14]):D={t:"n",v:Ol(S)})),D.z===void 0&&E!=null&&(D.z=E);var O="",H=k.getElementsByTagName("A");if(H&&H.length)for(var ie=0;ie<H.length&&!(H[ie].hasAttribute("href")&&(O=H[ie].getAttribute("href"),O.charAt(0)!="#"));++ie);O&&O.charAt(0)!="#"&&(D.l={Target:O}),a.dense?(e[y+r]||(e[y+r]=[]),e[y+r][w+s]=D):e[qn({c:w+s,r:y+r})]=D,A.e.c<w+s&&(A.e.c=w+s),w+=x}}++y}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),A.e.r=Math.max(A.e.r,y-1+r),e["!ref"]=Sa(A),y>=c&&(e["!fullref"]=Sa((A.e.r=i.length-p+y-1+r,A))),e}function B9(e,t){var n=t||{},a=n.dense?[]:{};return E9(a,e,t)}function s8e(e,t){return uA(B9(e,t),t)}function vN(e){var t="",n=o8e(e);return n&&(t=n(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function o8e(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function i8e(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(a,r){return Array(parseInt(r,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),n=Ia(t.replace(/<[^>]*>/g,""));return[n]}var hN={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function k9(e,t){var n=t||{},a=LT(e),r=[],s,o,i={name:""},c="",A=0,d,f,m={},h=[],p=n.dense?[]:{},y,g,w={value:""},b="",x=0,T=[],F=-1,k=-1,S={s:{r:1e6,c:1e7},e:{r:0,c:0}},E=0,C={},D=[],P={},O=0,H=0,ie=[],Ae=1,j=1,J=[],ue={Names:[]},ne={},Y=["",""],te=[],L={},N="",q=0,Q=!1,ee=!1,z=0;for(Q0.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");y=Q0.exec(a);)switch(y[3]=y[3].replace(/_.*$/,"")){case"table":case"":y[1]==="/"?(S.e.c>=S.s.c&&S.e.r>=S.s.r?p["!ref"]=Sa(S):p["!ref"]="A1:A1",n.sheetRows>0&&n.sheetRows<=S.e.r&&(p["!fullref"]=p["!ref"],S.e.r=n.sheetRows-1,p["!ref"]=Sa(S)),D.length&&(p["!merges"]=D),ie.length&&(p["!rows"]=ie),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),h.push(d.name),m[d.name]=p,ee=!1):y[0].charAt(y[0].length-2)!=="/"&&(d=Mn(y[0],!1),F=k=-1,S.s.r=S.s.c=1e7,S.e.r=S.e.c=0,p=n.dense?[]:{},D=[],ie=[],ee=!0);break;case"table-row-group":y[1]==="/"?--E:++E;break;case"table-row":case"":if(y[1]==="/"){F+=Ae,Ae=1;break}if(f=Mn(y[0],!1),f.?F=f.-1:F==-1&&(F=0),Ae=+f["number-rows-repeated"]||1,Ae<10)for(z=0;z<Ae;++z)E>0&&(ie[F+z]={level:E});k=-1;break;case"covered-table-cell":y[1]!=="/"&&++k,n.sheetStubs&&(n.dense?(p[F]||(p[F]=[]),p[F][k]={t:"z"}):p[qn({r:F,c:k})]={t:"z"}),b="",T=[];break;case"table-cell":case"":if(y[0].charAt(y[0].length-2)==="/")++k,w=Mn(y[0],!1),j=parseInt(w["number-columns-repeated"]||"1",10),g={t:"z",v:null},w.formula&&n.cellFormula!=!1&&(g.f=cN(Ia(w.formula))),(w.||w["value-type"])=="string"&&(g.t="s",g.v=Ia(w["string-value"]||""),n.dense?(p[F]||(p[F]=[]),p[F][k]=g):p[qn({r:F,c:k})]=g),k+=j-1;else if(y[1]!=="/"){++k,b="",x=0,T=[],j=1;var X=Ae?F+Ae-1:F;if(k>S.e.c&&(S.e.c=k),k<S.s.c&&(S.s.c=k),F<S.s.r&&(S.s.r=F),X>S.e.r&&(S.e.r=X),w=Mn(y[0],!1),te=[],L={},g={t:w.||w["value-type"],v:null},n.cellFormula)if(w.formula&&(w.formula=Ia(w.formula)),w["number-matrix-columns-spanned"]&&w["number-matrix-rows-spanned"]&&(O=parseInt(w["number-matrix-rows-spanned"],10)||0,H=parseInt(w["number-matrix-columns-spanned"],10)||0,P={s:{r:F,c:k},e:{r:F+O-1,c:k+H-1}},g.F=Sa(P),J.push([P,g.F])),w.formula)g.f=cN(w.formula);else for(z=0;z<J.length;++z)F>=J[z][0].s.r&&F<=J[z][0].e.r&&k>=J[z][0].s.c&&k<=J[z][0].e.c&&(g.F=J[z][1]);switch((w["number-columns-spanned"]||w["number-rows-spanned"])&&(O=parseInt(w["number-rows-spanned"],10)||0,H=parseInt(w["number-columns-spanned"],10)||0,P={s:{r:F,c:k},e:{r:F+O-1,c:k+H-1}},D.push(P)),w["number-columns-repeated"]&&(j=parseInt(w["number-columns-repeated"],10)),g.t){case"boolean":g.t="b",g.v=Sr(w["boolean-value"]);break;case"float":g.t="n",g.v=parseFloat(w.value);break;case"percentage":g.t="n",g.v=parseFloat(w.value);break;case"currency":g.t="n",g.v=parseFloat(w.value);break;case"date":g.t="d",g.v=Vs(w["date-value"]),n.cellDates||(g.t="n",g.v=Qo(g.v)),g.z="m/d/yy";break;case"time":g.t="n",g.v=_Pe(w["time-value"])/86400,n.cellDates&&(g.t="d",g.v=Ow(g.v)),g.z="HH:MM:SS";break;case"number":g.t="n",g.v=parseFloat(w.);break;default:if(g.t==="string"||g.t==="text"||!g.t)g.t="s",w["string-value"]!=null&&(b=Ia(w["string-value"]),T=[]);else throw new Error("Unsupported value type "+g.t)}}else{if(Q=!1,g.t==="s"&&(g.v=b||"",T.length&&(g.R=T),Q=x==0),ne.Target&&(g.l=ne),te.length>0&&(g.c=te,te=[]),b&&n.cellText!==!1&&(g.w=b),Q&&(g.t="z",delete g.v),(!Q||n.sheetStubs)&&!(n.sheetRows&&n.sheetRows<=F))for(var le=0;le<Ae;++le){if(j=parseInt(w["number-columns-repeated"]||"1",10),n.dense)for(p[F+le]||(p[F+le]=[]),p[F+le][k]=le==0?g:Xs(g);--j>0;)p[F+le][k+j]=Xs(g);else for(p[qn({r:F+le,c:k})]=g;--j>0;)p[qn({r:F+le,c:k+j})]=Xs(g);S.e.c<=k&&(S.e.c=k)}j=parseInt(w["number-columns-repeated"]||"1",10),k+=j-1,j=0,g={},b="",T=[]}ne={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(y[1]==="/"){if((s=r.pop())[0]!==y[3])throw"Bad state: "+s}else y[0].charAt(y[0].length-2)!=="/"&&r.push([y[3],!0]);break;case"annotation":if(y[1]==="/"){if((s=r.pop())[0]!==y[3])throw"Bad state: "+s;L.t=b,T.length&&(L.R=T),L.a=N,te.push(L)}else y[0].charAt(y[0].length-2)!=="/"&&r.push([y[3],!1]);N="",q=0,b="",x=0,T=[];break;case"creator":y[1]==="/"?N=a.slice(q,y.index):q=y.index+y[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(y[1]==="/"){if((s=r.pop())[0]!==y[3])throw"Bad state: "+s}else y[0].charAt(y[0].length-2)!=="/"&&r.push([y[3],!1]);b="",x=0,T=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(y[1]==="/"){if(C[i.name]=c,(s=r.pop())[0]!==y[3])throw"Bad state: "+s}else y[0].charAt(y[0].length-2)!=="/"&&(c="",i=Mn(y[0],!1),r.push([y[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(r[r.length-1][0]){case"time-style":case"date-style":o=Mn(y[0],!1),c+=hN[y[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(r[r.length-1][0]){case"time-style":case"date-style":o=Mn(y[0],!1),c+=hN[y[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(y[0].slice(-2)==="/>")break;if(y[1]==="/")switch(r[r.length-1][0]){case"number-style":case"date-style":case"time-style":c+=a.slice(A,y.index);break}else A=y.index+y[0].length;break;case"named-range":o=Mn(y[0],!1),Y=VC(o["cell-range-address"]);var re={Name:o.name,Ref:Y[0]+"!"+Y[1]};ee&&(re.Sheet=h.length),ue.Names.push(re);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(r[r.length-1][0])>-1)break;if(y[1]==="/"&&(!w||!w["string-value"])){var de=i8e(a.slice(x,y.index));b=(b.length>0?b+`
`:"")+de[0]}else Mn(y[0],!1),x=y.index+y[0].length;break;case"s":break;case"database-range":if(y[1]==="/")break;try{Y=VC(Mn(y[0])["target-range-address"]),m[Y[0]]["!autofilter"]={ref:Y[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(y[1]!=="/"){if(ne=Mn(y[0],!1),!ne.href)break;ne.Target=Ia(ne.href),delete ne.href,ne.Target.charAt(0)=="#"&&ne.Target.indexOf(".")>-1?(Y=VC(ne.Target.slice(1)),ne.Target="#"+Y[0]+"!"+Y[1]):ne.Target.match(/^\.\.[\\\/]/)&&(ne.Target=ne.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(y[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(n.WTF)throw new Error(y)}}var G={Sheets:m,SheetNames:h,Workbook:ue};return n.bookSheets&&delete G.Sheets,G}function pN(e,t){t=t||{},Zi(e,"META-INF/manifest.xml")&&xDe(rs(e,"META-INF/manifest.xml"),t);var n=Si(e,"content.xml");if(!n)throw new Error("Missing content.xml in ODS / UOF file");var a=k9(mr(n),t);return Zi(e,"meta.xml")&&(a.Props=H$(rs(e,"meta.xml"))),a}function gN(e,t){return k9(e,t)}function XT(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function HE(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):mr(jf(e))}function $E(e){var t=e.reduce(function(r,s){return r+s.length},0),n=new Uint8Array(t),a=0;return e.forEach(function(r){n.set(r,a),a+=r.length}),n}function yN(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function l8e(e,t){for(var n=(e[t+15]&127)<<7|e[t+14]>>1,a=e[t+14]&1,r=t+13;r>=t;--r)a=a*256+e[r];return(e[t+15]&128?-a:a)*Math.pow(10,n-6176)}function W0(e,t){var n=t?t[0]:0,a=e[n]&127;e:if(e[n++]>=128&&(a|=(e[n]&127)<<7,e[n++]<128||(a|=(e[n]&127)<<14,e[n++]<128)||(a|=(e[n]&127)<<21,e[n++]<128)||(a+=(e[n]&127)*Math.pow(2,28),++n,e[n++]<128)||(a+=(e[n]&127)*Math.pow(2,35),++n,e[n++]<128)||(a+=(e[n]&127)*Math.pow(2,42),++n,e[n++]<128)))break e;return t&&(t[0]=n),a}function xs(e){var t=0,n=e[t]&127;e:if(e[t++]>=128){if(n|=(e[t]&127)<<7,e[t++]<128||(n|=(e[t]&127)<<14,e[t++]<128)||(n|=(e[t]&127)<<21,e[t++]<128))break e;n|=(e[t]&127)<<28}return n}function ho(e){for(var t=[],n=[0];n[0]<e.length;){var a=n[0],r=W0(e,n),s=r&7;r=Math.floor(r/8);var o=0,i;if(r==0)break;switch(s){case 0:{for(var c=n[0];e[n[0]++]>=128;);i=e.slice(c,n[0])}break;case 5:o=4,i=e.slice(n[0],n[0]+o),n[0]+=o;break;case 1:o=8,i=e.slice(n[0],n[0]+o),n[0]+=o;break;case 2:o=W0(e,n),i=e.slice(n[0],n[0]+o),n[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(r," at offset ").concat(a))}var A={data:i,type:s};t[r]==null?t[r]=[A]:t[r].push(A)}return t}function JT(e,t){return e?.map(function(n){return t(n.data)})||[]}function u8e(e){for(var t,n=[],a=[0];a[0]<e.length;){var r=W0(e,a),s=ho(e.slice(a[0],a[0]+r));a[0]+=r;var o={id:xs(s[1][0].data),messages:[]};s[2].forEach(function(i){var c=ho(i.data),A=xs(c[3][0].data);o.messages.push({meta:c,data:e.slice(a[0],a[0]+A)}),a[0]+=A}),(t=s[3])!=null&&t[0]&&(o.merge=xs(s[3][0].data)>>>0>0),n.push(o)}return n}function c8e(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var n=[0],a=W0(t,n),r=[];n[0]<t.length;){var s=t[n[0]]&3;if(s==0){var o=t[n[0]++]>>2;if(o<60)++o;else{var i=o-59;o=t[n[0]],i>1&&(o|=t[n[0]+1]<<8),i>2&&(o|=t[n[0]+2]<<16),i>3&&(o|=t[n[0]+3]<<24),o>>>=0,o++,n[0]+=i}r.push(t.slice(n[0],n[0]+o)),n[0]+=o;continue}else{var c=0,A=0;if(s==1?(A=(t[n[0]]>>2&7)+4,c=(t[n[0]++]&224)<<3,c|=t[n[0]++]):(A=(t[n[0]++]>>2)+1,s==2?(c=t[n[0]]|t[n[0]+1]<<8,n[0]+=2):(c=(t[n[0]]|t[n[0]+1]<<8|t[n[0]+2]<<16|t[n[0]+3]<<24)>>>0,n[0]+=4)),r=[$E(r)],c==0)throw new Error("Invalid offset 0");if(c>r[0].length)throw new Error("Invalid offset beyond length");if(A>=c)for(r.push(r[0].slice(-c)),A-=c;A>=r[r.length-1].length;)r.push(r[r.length-1]),A-=r[r.length-1].length;r.push(r[0].slice(-c,-c+A))}}var d=$E(r);if(d.length!=a)throw new Error("Unexpected length: ".concat(d.length," != ").concat(a));return d}function d8e(e){for(var t=[],n=0;n<e.length;){var a=e[n++],r=e[n]|e[n+1]<<8|e[n+2]<<16;n+=3,t.push(c8e(a,e.slice(n,n+r))),n+=r}if(n!==e.length)throw new Error("data is not a valid framed stream!");return $E(t)}function A8e(e,t,n,a){var r=XT(e),s=r.getUint32(4,!0),o=(a>1?12:8)+yN(s&(a>1?3470:398))*4,i=-1,c=-1,A=NaN,d=new Date(2001,0,1);s&512&&(i=r.getUint32(o,!0),o+=4),o+=yN(s&(a>1?12288:4096))*4,s&16&&(c=r.getUint32(o,!0),o+=4),s&32&&(A=r.getFloat64(o,!0),o+=8),s&64&&(d.setTime(d.getTime()+r.getFloat64(o,!0)*1e3),o+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:A};break;case 3:f={t:"s",v:t[c]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:A>0};break;case 7:f={t:"n",v:A/86400};break;case 8:f={t:"e",v:0};break;case 9:if(i>-1)f={t:"s",v:n[i]};else if(c>-1)f={t:"s",v:t[c]};else if(!isNaN(A))f={t:"n",v:A};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function f8e(e,t,n){var a=XT(e),r=a.getUint32(8,!0),s=12,o=-1,i=-1,c=NaN,A=NaN,d=new Date(2001,0,1);r&1&&(c=l8e(e,s),s+=16),r&2&&(A=a.getFloat64(s,!0),s+=8),r&4&&(d.setTime(d.getTime()+a.getFloat64(s,!0)*1e3),s+=8),r&8&&(i=a.getUint32(s,!0),s+=4),r&16&&(o=a.getUint32(s,!0),s+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:t[i]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:A>0};break;case 7:f={t:"n",v:A/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:n[o]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(r&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(r&31," : ").concat(e.slice(0,4)))}return f}function m8e(e,t,n){switch(e[0]){case 0:case 1:case 2:case 3:return A8e(e,t,n,e[0]);case 5:return f8e(e,t,n);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function Md(e){var t=ho(e);return W0(t[1][0].data)}function _N(e,t){var n=ho(t.data),a=xs(n[1][0].data),r=n[3],s=[];return(r||[]).forEach(function(o){var i=ho(o.data),c=xs(i[1][0].data)>>>0;switch(a){case 1:s[c]=HE(i[3][0].data);break;case 8:{var A=e[Md(i[9][0].data)][0],d=ho(A.data),f=e[Md(d[1][0].data)][0],m=xs(f.meta[1][0].data);if(m!=2001)throw new Error("2000 unexpected reference to ".concat(m));var h=ho(f.data);s[c]=h[3].map(function(p){return HE(p.data)}).join("")}break}}),s}function v8e(e,t){var n,a,r,s,o,i,c,A,d,f,m,h,p,y,g=ho(e),w=xs(g[1][0].data)>>>0,b=xs(g[2][0].data)>>>0,x=((a=(n=g[8])==null?void 0:n[0])==null?void 0:a.data)&&xs(g[8][0].data)>0||!1,T,F;if((s=(r=g[7])==null?void 0:r[0])!=null&&s.data&&t!=0)T=(i=(o=g[7])==null?void 0:o[0])==null?void 0:i.data,F=(A=(c=g[6])==null?void 0:c[0])==null?void 0:A.data;else if((f=(d=g[4])==null?void 0:d[0])!=null&&f.data&&t!=1)T=(h=(m=g[4])==null?void 0:m[0])==null?void 0:h.data,F=(y=(p=g[3])==null?void 0:p[0])==null?void 0:y.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var k=x?4:1,S=XT(T),E=[],C=0;C<T.length/2;++C){var D=S.getUint16(C*2,!0);D<65535&&E.push([C,D])}if(E.length!=b)throw"Expected ".concat(b," cells, found ").concat(E.length);var P=[];for(C=0;C<E.length-1;++C)P[E[C][0]]=F.subarray(E[C][1]*k,E[C+1][1]*k);return E.length>=1&&(P[E[E.length-1][0]]=F.subarray(E[E.length-1][1]*k)),{R:w,cells:P}}function h8e(e,t){var n,a=ho(t.data),r=(n=a?.[7])!=null&&n[0]?xs(a[7][0].data)>>>0>0?1:0:-1,s=JT(a[5],function(o){return v8e(o,r)});return{nrows:xs(a[4][0].data)>>>0,data:s.reduce(function(o,i){return o[i.R]||(o[i.R]=[]),i.cells.forEach(function(c,A){if(o[i.R][A])throw new Error("Duplicate cell r=".concat(i.R," c=").concat(A));o[i.R][A]=c}),o},[])}}function p8e(e,t,n){var a,r=ho(t.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(xs(r[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(r[6][0].data));if(s.e.c=(xs(r[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(r[7][0].data));n["!ref"]=Sa(s);var o=ho(r[4][0].data),i=_N(e,e[Md(o[4][0].data)][0]),c=(a=o[17])!=null&&a[0]?_N(e,e[Md(o[17][0].data)][0]):[],A=ho(o[3][0].data),d=0;A[1].forEach(function(f){var m=ho(f.data),h=e[Md(m[2][0].data)][0],p=xs(h.meta[1][0].data);if(p!=6002)throw new Error("6001 unexpected reference to ".concat(p));var y=h8e(e,h);y.data.forEach(function(g,w){g.forEach(function(b,x){var T=qn({r:d+w,c:x}),F=m8e(b,i,c);F&&(n[T]=F)})}),d+=y.nrows})}function g8e(e,t){var n=ho(t.data),a={"!ref":"A1"},r=e[Md(n[2][0].data)],s=xs(r[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return p8e(e,r[0],a),a}function y8e(e,t){var n,a=ho(t.data),r={name:(n=a[1])!=null&&n[0]?HE(a[1][0].data):"",sheets:[]},s=JT(a[2],Md);return s.forEach(function(o){e[o].forEach(function(i){var c=xs(i.meta[1][0].data);c==6e3&&r.sheets.push(g8e(e,i))})}),r}function _8e(e,t){var n=t4(),a=ho(t.data),r=JT(a[1],Md);if(r.forEach(function(s){e[s].forEach(function(o){var i=xs(o.meta[1][0].data);if(i==2){var c=y8e(e,o);c.sheets.forEach(function(A,d){n4(n,A,d==0?c.name:c.name+"_"+d,!0)})}})}),n.SheetNames.length==0)throw new Error("Empty NUMBERS file");return n}function MC(e){var t,n,a,r,s={},o=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var A;try{A=d8e(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var d;try{d=u8e(A)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){s[f.id]=f.messages,o.push(f.id)})}}),!o.length)throw new Error("File has no messages");var i=((r=(a=(n=(t=s?.[1])==null?void 0:t[0])==null?void 0:n.meta)==null?void 0:a[1])==null?void 0:r[0].data)&&xs(s[1][0].meta[1][0].data)==1&&s[1][0];if(i||o.forEach(function(c){s[c].forEach(function(A){var d=xs(A.meta[1][0].data)>>>0;if(d==1)if(!i)i=A;else throw new Error("Document has multiple roots")})}),!i)throw new Error("Cannot find Document root");return _8e(s,i)}function w8e(e){return function(n){for(var a=0;a!=e.length;++a){var r=e[a];n[r[0]]===void 0&&(n[r[0]]=r[1]),r[2]==="n"&&(n[r[0]]=Number(n[r[0]]))}}}function ZT(e){w8e([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function b8e(e){return nv.WS.indexOf(e)>-1?"sheet":e==nv.CS?"chart":e==nv.DS?"dialog":e==nv.MS?"macro":e&&e.length?e:"sheet"}function x8e(e,t){if(!e)return 0;try{e=t.map(function(a){return a.id||(a.id=a.strRelID),[a.name,e["!id"][a.id].Target,b8e(e["!id"][a.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function C8e(e,t,n,a,r,s,o,i,c,A,d,f){try{s[a]=s0(Si(e,n,!0),t);var m=rs(e,t),h;switch(i){case"sheet":h=ILe(m,t,r,c,s[a],A,d,f);break;case"chart":if(h=FLe(m,t,r,c,s[a],A,d,f),!h||!h["!drawel"])break;var p=Rp(h["!drawel"].Target,t),y=NE(p),g=TRe(Si(e,p,!0),s0(Si(e,y,!0),p)),w=Rp(g,p),b=NE(w);h=fLe(Si(e,w,!0),w,c,s0(Si(e,b,!0),w),A,h);break;case"macro":h=PLe(m,t,r,c,s[a],A,d,f);break;case"dialog":h=DLe(m,t,r,c,s[a],A,d,f);break;default:throw new Error("Unrecognized sheet type "+i)}o[a]=h;var x=[];s&&s[a]&&Vu(s[a]).forEach(function(T){var F="";if(s[a][T].Type==nv.CMNT){F=Rp(s[a][T].Target,t);var k=VLe(rs(e,F,!0),F,c);if(!k||!k.length)return;sN(h,k,!1)}s[a][T].Type==nv.TCMNT&&(F=Rp(s[a][T].Target,t),x=x.concat(FRe(rs(e,F,!0),c)))}),x&&x.length&&sN(h,x,!0,c.people||[])}catch(T){if(c.WTF)throw T}}function qi(e){return e.charAt(0)=="/"?e.slice(1):e}function S8e(e,t){if(A$(),t=t||{},ZT(t),Zi(e,"META-INF/manifest.xml")||Zi(e,"objectdata.xml"))return pN(e,t);if(Zi(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof MC<"u"){if(e.FileIndex)return MC(e);var n=ba.utils.cfb_new();return PR(e).forEach(function(ie){EPe(n,ie,SPe(e,ie))}),MC(n)}throw new Error("Unsupported NUMBERS file")}if(!Zi(e,"[Content_Types].xml"))throw Zi(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Zi(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var a=PR(e),r=wDe(Si(e,"[Content_Types].xml")),s=!1,o,i;if(r.workbooks.length===0&&(i="xl/workbook.xml",rs(e,i,!0)&&r.workbooks.push(i)),r.workbooks.length===0){if(i="xl/workbook.bin",!rs(e,i,!0))throw new Error("Could not find workbook");r.workbooks.push(i),s=!0}r.workbooks[0].slice(-3)=="bin"&&(s=!0);var c={},A={};if(!t.bookSheets&&!t.bookProps){if(l0=[],r.sst)try{l0=NLe(rs(e,qi(r.sst)),r.sst,t)}catch(ie){if(t.WTF)throw ie}t.cellStyles&&r.themes.length&&(c=RLe(Si(e,r.themes[0].replace(/^\//,""),!0)||"",r.themes[0],t)),r.style&&(A=ULe(rs(e,qi(r.style)),r.style,c,t))}r.links.map(function(ie){try{var Ae=s0(Si(e,NE(qi(ie))),ie);return MLe(rs(e,qi(ie)),Ae,ie,t)}catch{}});var d=TLe(rs(e,qi(r.workbooks[0])),r.workbooks[0],t),f={},m="";r.coreprops.length&&(m=rs(e,qi(r.coreprops[0]),!0),m&&(f=H$(m)),r.extprops.length!==0&&(m=rs(e,qi(r.extprops[0]),!0),m&&EDe(m,f,t)));var h={};(!t.bookSheets||t.bookProps)&&r.custprops.length!==0&&(m=Si(e,qi(r.custprops[0]),!0),m&&(h=kDe(m,t)));var p={};if((t.bookSheets||t.bookProps)&&(d.Sheets?o=d.Sheets.map(function(Ae){return Ae.name}):f.Worksheets&&f.SheetNames.length>0&&(o=f.SheetNames),t.bookProps&&(p.Props=f,p.Custprops=h),t.bookSheets&&typeof o<"u"&&(p.SheetNames=o),t.bookSheets?p.SheetNames:t.bookProps))return p;o={};var y={};t.bookDeps&&r.calcchain&&(y=LLe(rs(e,qi(r.calcchain)),r.calcchain));var g=0,w={},b,x;{var T=d.Sheets;f.Worksheets=T.length,f.SheetNames=[];for(var F=0;F!=T.length;++F)f.SheetNames[F]=T[F].name}var k=s?"bin":"xml",S=r.workbooks[0].lastIndexOf("/"),E=(r.workbooks[0].slice(0,S+1)+"_rels/"+r.workbooks[0].slice(S+1)+".rels").replace(/^\//,"");Zi(e,E)||(E="xl/_rels/workbook."+k+".rels");var C=s0(Si(e,E,!0),E.replace(/_rels.*/,"s5s"));(r.metadata||[]).length>=1&&(t.xlmeta=OLe(rs(e,qi(r.metadata[0])),r.metadata[0],t)),(r.people||[]).length>=1&&(t.people=PRe(rs(e,qi(r.people[0])),t)),C&&(C=x8e(C,d.Sheets));var D=rs(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(g=0;g!=f.Worksheets;++g){var P="sheet";if(C&&C[g]?(b="xl/"+C[g][1].replace(/[\/]?xl\//,""),Zi(e,b)||(b=C[g][1]),Zi(e,b)||(b=E.replace(/_rels\/.*$/,"")+C[g][1]),P=C[g][2]):(b="xl/worksheets/sheet"+(g+1-D)+"."+k,b=b.replace(/sheet0\./,"sheet.")),x=b.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(g!=t.sheets)continue e;break;case"string":if(f.SheetNames[g].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var O=!1,H=0;H!=t.sheets.length;++H)typeof t.sheets[H]=="number"&&t.sheets[H]==g&&(O=1),typeof t.sheets[H]=="string"&&t.sheets[H].toLowerCase()==f.SheetNames[g].toLowerCase()&&(O=1);if(!O)continue e}}C8e(e,b,x,f.SheetNames[g],g,w,o,P,t,d,c,A)}return p={Directory:r,Workbook:d,Props:f,Custprops:h,Deps:y,Sheets:o,SheetNames:f.SheetNames,Strings:l0,Styles:A,Themes:c,SSF:Xs(ea)},t&&t.bookFiles&&(e.files?(p.keys=a,p.files=e.files):(p.keys=[],p.files={},e.FullPaths.forEach(function(ie,Ae){ie=ie.replace(/^Root Entry[\/]/,""),p.keys.push(ie),p.files[ie]=e.FileIndex[Ae]}))),t&&t.bookVBA&&(r.vba.length>0?p.vbaraw=rs(e,qi(r.vba[0]),!0):r.defaults&&r.defaults.bin===NRe&&(p.vbaraw=rs(e,"xl/vbaProject.bin",!0))),p}function E8e(e,t){var n=t||{},a="Workbook",r=ba.find(e,a);try{if(a="/!DataSpaces/Version",r=ba.find(e,a),!r||!r.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(gUe(r.content),a="/!DataSpaces/DataSpaceMap",r=ba.find(e,a),!r||!r.content)throw new Error("ECMA-376 Encrypted file missing "+a);var s=_Ue(r.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",r=ba.find(e,a),!r||!r.content)throw new Error("ECMA-376 Encrypted file missing "+a);var o=wUe(r.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",r=ba.find(e,a),!r||!r.content)throw new Error("ECMA-376 Encrypted file missing "+a);xUe(r.content)}catch{}if(a="/EncryptionInfo",r=ba.find(e,a),!r||!r.content)throw new Error("ECMA-376 Encrypted file missing "+a);var i=CUe(r.content);if(a="/EncryptedPackage",r=ba.find(e,a),!r||!r.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(i[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(i[1],r.content,n.password||"",n);if(i[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(i[1],r.content,n.password||"",n);throw new Error("File is password-protected")}function e4(e,t){var n="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":n=Di(e.slice(0,12));break;case"binary":n=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function B8e(e,t){return ba.find(e,"EncryptedPackage")?E8e(e,t):S9(e,t)}function k8e(e,t){var n,a=e,r=t||{};return r.type||(r.type=pa&&Buffer.isBuffer(e)?"buffer":"base64"),n=g$(a,r),S8e(n,r)}function T9(e,t){var n=0;e:for(;n<e.length;)switch(e.charCodeAt(n)){case 10:case 13:case 32:++n;break;case 60:return ME(e.slice(n),t);default:break e}return G0.to_workbook(e,t)}function T8e(e,t){var n="",a=e4(e,t);switch(t.type){case"base64":n=Di(e);break;case"binary":n=e;break;case"buffer":n=e.toString("binary");break;case"array":n=Ef(e);break;default:throw new Error("Unrecognized type "+t.type)}return a[0]==239&&a[1]==187&&a[2]==191&&(n=mr(n)),t.type="binary",T9(n,t)}function I8e(e,t){var n=e;return t.type=="base64"&&(n=Di(n)),n=O0.utils.decode(1200,n.slice(2),"str"),t.type="binary",T9(n,t)}function F8e(e){return e.match(/[^\x00-\x7F]/)?Np(e):e}function OC(e,t,n,a){return a?(n.type="string",G0.to_workbook(e,n)):G0.to_workbook(t,n)}function QE(e,t){e$();var n=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return QE(new Uint8Array(e),(n=Xs(n),n.type="array",n));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!n.type&&(n.type=typeof Deno<"u"?"buffer":"array");var a=e,r=[0,0,0,0],s=!1;if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),Cv={},n.dateNF&&(Cv.dateNF=n.dateNF),n.type||(n.type=pa&&Buffer.isBuffer(e)?"buffer":"base64"),n.type=="file"&&(n.type=pa?"buffer":"binary",a=gPe(e),typeof Uint8Array<"u"&&!pa&&(n.type="array")),n.type=="string"&&(s=!0,n.type="binary",n.codepage=65001,a=F8e(e)),n.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),i=new Uint8Array(o);if(i.foo="bar",!i.foo)return n=Xs(n),n.type="array",QE(PT(a),n)}switch((r=e4(a,n))[0]){case 208:if(r[1]===207&&r[2]===17&&r[3]===224&&r[4]===161&&r[5]===177&&r[6]===26&&r[7]===225)return B8e(ba.read(a,n),n);break;case 9:if(r[1]<=8)return S9(a,n);break;case 60:return ME(a,n);case 73:if(r[1]===73&&r[2]===42&&r[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(r[1]===68)return sUe(a,n);break;case 84:if(r[1]===65&&r[2]===66&&r[3]===76)return aUe.to_workbook(a,n);break;case 80:return r[1]===75&&r[2]<9&&r[3]<9?k8e(a,n):OC(e,a,n,s);case 239:return r[3]===60?ME(a,n):OC(e,a,n,s);case 255:if(r[1]===254)return I8e(a,n);if(r[1]===0&&r[2]===2&&r[3]===0)return i0.to_workbook(a,n);break;case 0:if(r[1]===0&&(r[2]>=2&&r[3]===0||r[2]===0&&(r[3]===8||r[3]===9)))return i0.to_workbook(a,n);break;case 3:case 131:case 139:case 140:return rN.to_workbook(a,n);case 123:if(r[1]===92&&r[2]===114&&r[3]===116)return NUe.to_workbook(a,n);break;case 10:case 13:case 32:return T8e(a,n);case 137:if(r[1]===80&&r[2]===78&&r[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return tUe.indexOf(r[0])>-1&&r[2]<=12&&r[3]<=31?rN.to_workbook(a,n):OC(e,a,n,s)}function P8e(e,t,n,a,r,s,o,i){var c=Js(n),A=i.defval,d=i.raw||!Object.prototype.hasOwnProperty.call(i,"raw"),f=!0,m=r===1?[]:{};if(r!==1)if(Object.defineProperty)try{Object.defineProperty(m,"__rowNum__",{value:n,enumerable:!1})}catch{m.__rowNum__=n}else m.__rowNum__=n;if(!o||e[n])for(var h=t.s.c;h<=t.e.c;++h){var p=o?e[n][h]:e[a[h]+c];if(p===void 0||p.t===void 0){if(A===void 0)continue;s[h]!=null&&(m[s[h]]=A);continue}var y=p.v;switch(p.t){case"z":if(y==null)break;continue;case"e":y=y==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+p.t)}if(s[h]!=null){if(y==null)if(p.t=="e"&&y===null)m[s[h]]=null;else if(A!==void 0)m[s[h]]=A;else if(d&&y===null)m[s[h]]=null;else continue;else m[s[h]]=d&&(p.t!=="n"||p.t==="n"&&i.rawNumbers!==!1)?y:Mc(p,y,i);y!=null&&(f=!1)}}return{row:m,isempty:f}}function GE(e,t){if(e==null||e["!ref"]==null)return[];var n={t:"n",v:0},a=0,r=1,s=[],o=0,i="",c={s:{r:0,c:0},e:{r:0,c:0}},A=t||{},d=A.range!=null?A.range:e["!ref"];switch(A.header===1?a=1:A.header==="A"?a=2:Array.isArray(A.header)?a=3:A.header==null&&(a=0),typeof d){case"string":c=Vr(d);break;case"number":c=Vr(e["!ref"]),c.s.r=d;break;default:c=d}a>0&&(r=0);var f=Js(c.s.r),m=[],h=[],p=0,y=0,g=Array.isArray(e),w=c.s.r,b=0,x={};g&&!e[w]&&(e[w]=[]);var T=A.skipHidden&&e["!cols"]||[],F=A.skipHidden&&e["!rows"]||[];for(b=c.s.c;b<=c.e.c;++b)if(!(T[b]||{}).hidden)switch(m[b]=ws(b),n=g?e[w][b]:e[m[b]+f],a){case 1:s[b]=b-c.s.c;break;case 2:s[b]=m[b];break;case 3:s[b]=A.header[b-c.s.c];break;default:if(n==null&&(n={w:"__EMPTY",t:"s"}),i=o=Mc(n,null,A),y=x[o]||0,!y)x[o]=1;else{do i=o+"_"+y++;while(x[i]);x[o]=y,x[i]=1}s[b]=i}for(w=c.s.r+r;w<=c.e.r;++w)if(!(F[w]||{}).hidden){var k=P8e(e,c,w,m,a,s,g,A);(k.isempty===!1||(a===1?A.blankrows!==!1:A.blankrows))&&(h[p++]=k.row)}return h.length=p,h}var wN=/"/g;function D8e(e,t,n,a,r,s,o,i){for(var c=!0,A=[],d="",f=Js(n),m=t.s.c;m<=t.e.c;++m)if(a[m]){var h=i.dense?(e[n]||[])[m]:e[a[m]+f];if(h==null)d="";else if(h.v!=null){c=!1,d=""+(i.rawNumbers&&h.t=="n"?h.v:Mc(h,null,i));for(var p=0,y=0;p!==d.length;++p)if((y=d.charCodeAt(p))===r||y===s||y===34||i.forceQuotes){d='"'+d.replace(wN,'""')+'"';break}d=="ID"&&(d='"ID"')}else h.f!=null&&!h.F?(c=!1,d="="+h.f,d.indexOf(",")>=0&&(d='"'+d.replace(wN,'""')+'"')):d="";A.push(d)}return i.blankrows===!1&&c?null:A.join(o)}function I9(e,t){var n=[],a=t??{};if(e==null||e["!ref"]==null)return"";var r=Vr(e["!ref"]),s=a.FS!==void 0?a.FS:",",o=s.charCodeAt(0),i=a.RS!==void 0?a.RS:`
`,c=i.charCodeAt(0),A=new RegExp((s=="|"?"\\|":s)+"+$"),d="",f=[];a.dense=Array.isArray(e);for(var m=a.skipHidden&&e["!cols"]||[],h=a.skipHidden&&e["!rows"]||[],p=r.s.c;p<=r.e.c;++p)(m[p]||{}).hidden||(f[p]=ws(p));for(var y=0,g=r.s.r;g<=r.e.r;++g)(h[g]||{}).hidden||(d=D8e(e,r,g,f,o,c,s,a),d!=null&&(a.strip&&(d=d.replace(A,"")),(d||a.blankrows!==!1)&&n.push((y++?i:"")+d)));return delete a.dense,n.join("")}function U8e(e,t){t||(t={}),t.FS="	",t.RS=`
`;var n=I9(e,t);return n}function R8e(e){var t="",n,a="";if(e==null||e["!ref"]==null)return[];var r=Vr(e["!ref"]),s="",o=[],i,c=[],A=Array.isArray(e);for(i=r.s.c;i<=r.e.c;++i)o[i]=ws(i);for(var d=r.s.r;d<=r.e.r;++d)for(s=Js(d),i=r.s.c;i<=r.e.c;++i)if(t=o[i]+s,n=A?(e[d]||[])[i]:e[t],a="",n!==void 0){if(n.F!=null){if(t=n.F,!n.f)continue;a=n.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(n.f!=null)a=n.f;else{if(n.t=="z")continue;if(n.t=="n"&&n.v!=null)a=""+n.v;else if(n.t=="b")a=n.v?"TRUE":"FALSE";else if(n.w!==void 0)a="'"+n.w;else{if(n.v===void 0)continue;n.t=="s"?a="'"+n.v:a=""+n.v}}c[c.length]=t+"="+a}return c}function F9(e,t,n){var a=n||{},r=+!a.skipHeader,s=e||{},o=0,i=0;if(s&&a.origin!=null)if(typeof a.origin=="number")o=a.origin;else{var c=typeof a.origin=="string"?Lo(a.origin):a.origin;o=c.r,i=c.c}var A,d={s:{c:0,r:0},e:{c:i,r:o+t.length-1+r}};if(s["!ref"]){var f=Vr(s["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),o==-1&&(o=f.e.r+1,d.e.r=o+t.length-1+r)}else o==-1&&(o=0,d.e.r=t.length-1+r);var m=a.header||[],h=0;t.forEach(function(y,g){Vu(y).forEach(function(w){(h=m.indexOf(w))==-1&&(m[h=m.length]=w);var b=y[w],x="z",T="",F=qn({c:i+h,r:o+g+r});A=j0(s,F),b&&typeof b=="object"&&!(b instanceof Date)?s[F]=b:(typeof b=="number"?x="n":typeof b=="boolean"?x="b":typeof b=="string"?x="s":b instanceof Date?(x="d",a.cellDates||(x="n",b=Qo(b)),T=a.dateNF||ea[14]):b===null&&a.nullError&&(x="e",b=0),A?(A.t=x,A.v=b,delete A.w,delete A.R,T&&(A.z=T)):s[F]=A={t:x,v:b},T&&(A.z=T))})}),d.e.c=Math.max(d.e.c,i+m.length-1);var p=Js(o);if(r)for(h=0;h<m.length;++h)s[ws(h+i)+p]={t:"s",v:m[h]};return s["!ref"]=Sa(d),s}function N8e(e,t){return F9(null,e,t)}function j0(e,t,n){if(typeof t=="string"){if(Array.isArray(e)){var a=Lo(t);return e[a.r]||(e[a.r]=[]),e[a.r][a.c]||(e[a.r][a.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?j0(e,qn(t)):j0(e,qn({r:t,c:n||0}))}function V8e(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var n=e.SheetNames.indexOf(t);if(n>-1)return n;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function t4(){return{SheetNames:[],Sheets:{}}}function n4(e,t,n,a){var r=1;if(!n)for(;r<=65535&&e.SheetNames.indexOf(n="Sheet"+r)!=-1;++r,n=void 0);if(!n||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(a&&e.SheetNames.indexOf(n)>=0){var s=n.match(/(^.*?)(\d+)$/);r=s&&+s[2]||0;var o=s&&s[1]||n;for(++r;r<=65535&&e.SheetNames.indexOf(n=o+r)!=-1;++r);}if(wLe(n),e.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return e.SheetNames.push(n),e.Sheets[n]=t,n}function L8e(e,t,n){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var a=V8e(e,t);switch(e.Workbook.Sheets[a]||(e.Workbook.Sheets[a]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}e.Workbook.Sheets[a].Hidden=n}function M8e(e,t){return e.z=t,e}function P9(e,t,n){return t?(e.l={Target:t},n&&(e.l.Tooltip=n)):delete e.l,e}function O8e(e,t,n){return P9(e,"#"+t,n)}function H8e(e,t,n){e.c||(e.c=[]),e.c.push({t,a:n||"SheetJS"})}function $8e(e,t,n,a){for(var r=typeof t!="string"?t:Vr(t),s=typeof t=="string"?t:Sa(t),o=r.s.r;o<=r.e.r;++o)for(var i=r.s.c;i<=r.e.c;++i){var c=j0(e,o,i);c.t="n",c.F=s,delete c.v,o==r.s.r&&i==r.s.c&&(c.f=n,a&&(c.D=!0))}return e}var Q8e={encode_col:ws,encode_row:Js,encode_cell:qn,encode_range:Sa,decode_col:HT,decode_row:OT,split_cell:eDe,decode_cell:Lo,decode_range:bh,format_cell:Mc,sheet_add_aoa:N$,sheet_add_json:F9,sheet_add_dom:E9,aoa_to_sheet:xh,json_to_sheet:N8e,table_to_sheet:B9,table_to_book:s8e,sheet_to_csv:I9,sheet_to_txt:U8e,sheet_to_json:GE,sheet_to_html:r8e,sheet_to_formulae:R8e,sheet_to_row_object_array:GE,sheet_get_cell:j0,book_new:t4,book_append_sheet:n4,book_set_sheet_visibility:L8e,cell_set_number_format:M8e,cell_set_hyperlink:P9,cell_set_internal_link:O8e,cell_add_comment:H8e,sheet_set_array_formula:$8e,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const D9={practo:{name:"Practo",headerRow:1,requiredColumns:{"Patient Name":"name","Mobile Number":"contact_number",Age:"age",Gender:"gender"},optionalColumns:{"Patient Number":"importID","Email Address":"email",Pincode:"address","Date of Birth":"dateOfBirth",DOB:"dateOfBirth","Birth Date":"dateOfBirth"},validation:{required:["Patient Name","Mobile Number","Age","Gender"],optional:["Patient Number","Email Address","Pincode","Date of Birth","DOB","Birth Date"],dataTypes:{"Patient Name":"string","Patient Number":"string",Age:["string","number"],Gender:"string","Mobile Number":["string","number"],"Email Address":"string",Pincode:"string","Date of Birth":"string",DOB:"string","Birth Date":"string"}}},ekacare:{name:"Eka.Care",requiredColumns:{"Patient name":"name",Mobile:"contact_number"},optionalColumns:{"UHID (DF)":"importID",Age:"age",Gender:"gender","Patient Address":"address","Mail ID(DF)":"email","Date of Birth":"dateOfBirth",DOB:"dateOfBirth","Birth Date":"dateOfBirth"},validation:{required:["Patient name","Mobile"],optional:["UHID (DF)","Age","Gender","Patient Address","Mail ID(DF)","Date of Birth","DOB","Birth Date"],dataTypes:{"Patient name":"string","UHID (DF)":"string",Mobile:"string",Age:"string",Gender:"string","Patient Address":"string","Mail ID(DF)":"string","Date of Birth":"string",DOB:"string","Birth Date":"string"}}},healthplix:{name:"Healthplix",headerRow:1,requiredColumns:{ID:"importID",name:"name",phone_number:"contact_number",Sex:"gender",age:"age"},optionalColumns:{person_address:"address",email_id:"email",dob:"dateOfBirth",date_of_birth:"dateOfBirth","Date of Birth":"dateOfBirth",DOB:"dateOfBirth","Birth Date":"dateOfBirth"},validation:{required:["ID","name","phone_number","Sex","age"],optional:["person_address","email_id","dob","date_of_birth","Date of Birth","DOB","Birth Date"],dataTypes:{ID:"string",name:"string",phone_number:["string","number"],Sex:"string",age:["string","number"],person_address:"string",email_id:"string",dob:"string",date_of_birth:"string","Date of Birth":"string",DOB:"string","Birth Date":"string"}}},"evamed-custom":{name:"Evamed Custom Template",headerRow:1,requiredColumns:{id:"importID",name:"name",phone_number:"contact_number"},optionalColumns:{age:"age",gender:"gender",date_of_birth:"dateOfBirth",address:"address",email:"email"},validation:{required:["id","name","phone_number"],optional:["age","gender","date_of_birth","address","email"],dataTypes:{id:["string","number"],name:"string",phone_number:["string","number"],age:["string","number"],gender:"string",date_of_birth:"string",address:"string",email:"string"}}},tatvacare:{name:"TatvaCare",headerRow:1,requiredColumns:{"Patient Name":"name",Mobile:"contact_number"},optionalColumns:{Gender:"gender","Date of Birth":"dateOfBirth",Age:"age","Patient ID":"importID","Street Address":"streetAddress",City:"city",State:"state","Pin Code":"pinCode"},validation:{required:["Patient Name","Mobile"],optional:["Gender","Date of Birth","Age","Patient ID","Street Address","City","State","Pin Code"],dataTypes:{"Patient Name":"string",Mobile:["string","number"],Gender:"string","Date of Birth":"string",Age:["string","number"],"Patient ID":"string","Street Address":"string",City:"string",State:"string","Pin Code":"string"}}}},x2=e=>D9[e]||null,bN=e=>Object.prototype.hasOwnProperty.call(D9,e),U9=(e,t)=>{const n=x2(t);if(!n)return{isValid:!1,error:`Unsupported EMR system: ${t}`,missing:[],found:[]};const a=n.validation.required,r=new Set(e.map(i=>i.trim()));let s=[],o=[];if(t==="practo"){const i={"Patient Name":["Patient Name","PatientName","patient Name","patient name","Name","Patient","Full Name","FullName"],"Mobile Number":["Mobile Number","MobileNumber","mobile Number","mobile number","Mobile","Phone","Phone Number","PhoneNumber","Contact","Contact Number","ContactNumber"],Age:["Age","age","Patient Age","patient Age","Age (Years)"],Gender:["Gender","gender","Sex","sex","Patient Gender","patient Gender"],"Patient Number":["Patient Number","PatientNumber","patient Number","patient number","Patient ID","PatientID","ID","Patient No","PatientNo"],"Date of Birth":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],DOB:["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],"Birth Date":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"]};a.forEach(c=>{(i[c]||[c]).find(f=>r.has(f))?o.push(c):s.push(c)})}else if(t==="evamed-custom"){const i={id:["id","ID","Id","patient_id","patient id","Patient ID","PatientID","Patient Id","patientId","PatientNumber","patient number","Patient Number"],name:["name","Name","patient_name","patient name","Patient Name","PatientName","Patient name","Full Name","FullName","full name"],phone_number:["phone_number","phone number","Phone Number","PhoneNumber","phone","Phone","mobile","Mobile","Mobile Number","mobile number","contact_number","contact number","Contact Number","ContactNumber","Contact"],age:["age","Age","patient_age","patient age","Patient Age","PatientAge","Age (Years)","age (years)"],gender:["gender","Gender","patient_gender","patient gender","Patient Gender","PatientGender","sex","Sex","Gender/Sex"],date_of_birth:["date_of_birth","date of birth","Date of Birth","DateOfBirth","DOB","dob","Birth Date","birth date","BirthDate","birthdate"],address:["address","Address","patient_address","patient address","Patient Address","PatientAddress","Address Line","address line"],email:["email","Email","patient_email","patient email","Patient Email","PatientEmail","email_id","email id","Email ID","EmailID","Email Address","email address"]};a.forEach(c=>{(i[c]||[c]).find(f=>r.has(f))?o.push(c):s.push(c)})}else if(t==="tatvacare"){const i={"Patient Name":["Patient Name","PatientName","patient Name","patient name","Name","Patient","Full Name","FullName"],Mobile:["Mobile","mobile","Mobile Number","mobile Number","MobileNumber","Phone","Phone Number","PhoneNumber","Contact","Contact Number","ContactNumber"],Gender:["Gender","gender","Sex","sex","Patient Gender","patient Gender"],"Date of Birth":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth Date"],Age:["Age","age","Patient Age","patient Age","Age (Years)","age (years)"],"Patient ID":["Patient ID","PatientID","patient ID","patient id","Patient Id","ID","Id","Patient Number","PatientNumber"],"Street Address":["Street Address","StreetAddress","street Address","street address","Address","address","Street","street"],City:["City","city"],State:["State","state"],"Pin Code":["Pin Code","PinCode","pin Code","pin code","Pincode","pincode","Postal Code","postal Code","Zip Code","zip Code"]};a.forEach(c=>{(i[c]||[c]).find(f=>r.has(f))?o.push(c):s.push(c)})}else if(t==="ekacare"){const i={"Patient name":["Patient name","Patient Name","PatientName","patient name","patient Name","Name","Patient","Full Name","FullName"],Mobile:["Mobile","mobile","Mobile Number","mobile Number","MobileNumber","Phone","Phone Number","PhoneNumber","Contact","Contact Number","ContactNumber"],Age:["Age","age","Patient Age","patient Age","Age (Years)"],Gender:["Gender","gender","Sex","sex","Patient Gender","patient Gender"],"Date of Birth":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],DOB:["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],"Birth Date":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"]};a.forEach(c=>{(i[c]||[c]).find(f=>r.has(f))?o.push(c):s.push(c)})}else if(t==="healthplix"){const i={ID:["ID","id","Id","patient_id","patient id","Patient ID","PatientID","Patient Id","patientId"],name:["name","Name","patient_name","patient name","Patient Name","PatientName","Patient name","Full Name","FullName"],phone_number:["phone_number","phone number","Phone Number","PhoneNumber","phone","Phone","mobile","Mobile","Mobile Number","mobile number","contact_number","contact number","Contact Number","ContactNumber"],Sex:["Sex","sex","Gender","gender","Patient Gender","patient Gender"],age:["age","Age","patient_age","patient age","Patient Age","PatientAge","Age (Years)"],dob:["dob","DOB","date_of_birth","date of birth","Date of Birth","DateOfBirth","Birth Date","birth date","BirthDate","birthdate"],date_of_birth:["dob","date_of_birth","date of birth","Date of Birth","DateOfBirth","DOB","Birth Date","birth date","BirthDate","birthdate"],"Date of Birth":["dob","Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],DOB:["dob","Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],"Birth Date":["dob","Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","Birth Date","birth date","BirthDate","birthdate","date_of_birth"]};a.forEach(c=>{(i[c]||[c]).find(f=>r.has(f))?o.push(c):s.push(c)})}else s=a.filter(i=>!r.has(i)),o=a.filter(i=>r.has(i));return{isValid:s.length===0,error:s.length>0?`Missing required columns: ${s.join(", ")}`:null,missing:s,found:o,mapping:n}},hp=e=>{if(!e)return null;try{const t=fh(e),a=RM(new Date,t);return isNaN(a)||a<0?null:a}catch(t){return console.error("Error calculating age from DOB:",e,t),null}},G8e=(e,t,n)=>{const a=x2(n);if(!a)throw new Error(`Unsupported EMR system: ${n}`);const r={},s={...a.requiredColumns,...a.optionalColumns},o=(i,c)=>{let A=c.indexOf(i);if(A!==-1)return A;if(n==="practo"){const f={"Patient Name":["Patient Name","patient Name","Patient name","patient name","PatientName","Name","Patient","Full Name","FullName"],"Mobile Number":["Mobile Number","mobile Number","Mobile number","mobile number","MobileNumber","Mobile","Phone","Phone Number","PhoneNumber","Contact","Contact Number","ContactNumber"],"Patient Number":["Patient Number","patient Number","Patient number","patient number","PatientNumber","Patient ID","PatientID","ID","Patient No","PatientNo"],Age:["Age","age","Patient Age","patient Age","Age (Years)"],Gender:["Gender","gender","Sex","sex","Patient Gender","patient Gender"],"Email Address":["Email Address","email Address","Email address","email address","Email","email","Email ID","Email address"],Pincode:["Pincode","pincode","Pin Code","pin Code","Postal Code","postal Code","Zip Code","zip Code"],"Date of Birth":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],DOB:["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],"Birth Date":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"]}[i]||[i];for(const m of f)if(A=c.indexOf(m),A!==-1)return A}if(n==="evamed-custom"){const f={id:["id","ID","Id","patient_id","patient id","Patient ID","PatientID","Patient Id","patientId","PatientNumber","patient number","Patient Number"],name:["name","Name","patient_name","patient name","Patient Name","PatientName","Patient name","Full Name","FullName","full name"],phone_number:["phone_number","phone number","Phone Number","PhoneNumber","phone","Phone","mobile","Mobile","Mobile Number","mobile number","contact_number","contact number","Contact Number","ContactNumber","Contact"],age:["age","Age","patient_age","patient age","Patient Age","PatientAge","Age (Years)","age (years)"],gender:["gender","Gender","patient_gender","patient gender","Patient Gender","PatientGender","sex","Sex","Gender/Sex"],date_of_birth:["date_of_birth","date of birth","Date of Birth","DateOfBirth","DOB","dob","Birth Date","birth date","BirthDate","birthdate"],address:["address","Address","patient_address","patient address","Patient Address","PatientAddress","Address Line","address line"],email:["email","Email","patient_email","patient email","Patient Email","PatientEmail","email_id","email id","Email ID","EmailID","Email Address","email address"]}[i]||[i];for(const m of f)if(A=c.indexOf(m),A!==-1)return A}if(n==="ekacare"){const f={"Patient name":["Patient name","Patient Name","PatientName","patient name","patient Name","Name","Patient","Full Name","FullName"],Mobile:["Mobile","mobile","Mobile Number","mobile Number","MobileNumber","Phone","Phone Number","PhoneNumber","Contact","Contact Number","ContactNumber"],Age:["Age","age","Patient Age","patient Age","Age (Years)"],Gender:["Gender","gender","Sex","sex","Patient Gender","patient Gender"],"Date of Birth":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],DOB:["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],"Birth Date":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth date","BirthDate","birthdate","date_of_birth"]}[i]||[i];for(const m of f)if(A=c.indexOf(m),A!==-1)return A}if(n==="healthplix"){const f={ID:["ID","id","Id","patient_id","patient id","Patient ID","PatientID","Patient Id","patientId"],name:["name","Name","patient_name","patient name","Patient Name","PatientName","Patient name","Full Name","FullName"],phone_number:["phone_number","phone number","Phone Number","PhoneNumber","phone","Phone","mobile","Mobile","Mobile Number","mobile number","contact_number","contact number","Contact Number","ContactNumber"],Sex:["Sex","sex","Gender","gender","Patient Gender","patient Gender"],age:["age","Age","patient_age","patient age","Patient Age","PatientAge","Age (Years)"],dob:["dob","DOB","date_of_birth","date of birth","Date of Birth","DateOfBirth","Birth Date","birth date","BirthDate","birthdate"],date_of_birth:["dob","date_of_birth","date of birth","Date of Birth","DateOfBirth","DOB","Birth Date","birth date","BirthDate","birthdate"],"Date of Birth":["dob","Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],DOB:["dob","Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","Birth Date","birth date","BirthDate","birthdate","date_of_birth"],"Birth Date":["dob","Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","Birth Date","birth date","BirthDate","birthdate","date_of_birth"]}[i]||[i];for(const m of f)if(A=c.indexOf(m),A!==-1)return A}if(n==="tatvacare"){const f={"Patient Name":["Patient Name","patient Name","Patient name","patient name","PatientName","Name","Patient","Full Name","FullName"],Mobile:["Mobile","mobile","Mobile Number","mobile Number","MobileNumber","Phone","Phone Number","PhoneNumber","Contact","Contact Number","ContactNumber"],Gender:["Gender","gender","Sex","sex","Patient Gender","patient Gender"],"Date of Birth":["Date of Birth","DateOfBirth","date of Birth","date of birth","DOB","dob","Birth Date","birth Date"],Age:["Age","age","Patient Age","patient Age","Age (Years)","age (years)"],"Patient ID":["Patient ID","PatientID","patient ID","patient id","Patient Id","ID","Id","Patient Number","PatientNumber"],"Street Address":["Street Address","StreetAddress","street Address","street address","Address","address","Street","street"],City:["City","city"],State:["State","state"],"Pin Code":["Pin Code","PinCode","pin Code","pin code","Pincode","pincode","Postal Code","postal Code","Zip Code","zip Code"]}[i]||[i];for(const m of f)if(A=c.indexOf(m),A!==-1)return A}return-1};if(Object.entries(s).forEach(([i,c])=>{const A=o(i,t);if(A!==-1&&c){let d=e[A];n==="practo"&&typeof d=="string"&&d.endsWith("'")&&(d=d.slice(0,-1).trim()),d=K8e(d,i,a.validation.dataTypes[i]),d!=null&&d!==""&&(r[c]=d)}}),r.email=r.email||"",r.address=r.address||"",r.note=r.note||"",n==="practo"){if(r.dateOfBirth){const i=Cd(r.dateOfBirth);i!==null&&(r.birthDate=i.toString(),r.age=hp(r.dateOfBirth)),delete r.dateOfBirth}else if(r.age!==void 0&&r.age!==null&&r.age!==""){const i=parseInt(r.age,10);r.age=isNaN(i)||i<0?null:i}else r.age=null;r.gender=r.gender||"Male"}if(n==="ekacare"){if(r.dateOfBirth){const i=Cd(r.dateOfBirth);i!==null&&(r.birthDate=i.toString(),r.age=hp(r.dateOfBirth)),delete r.dateOfBirth}else if(r.age!==void 0&&r.age!==null&&r.age!==""){const i=String(r.age).match(/^\d+/);if(i){const c=parseInt(i[0],10);r.age=isNaN(c)||c<0?null:c}else r.age=null}}if(n==="healthplix"){if(r.dateOfBirth){const i=Cd(r.dateOfBirth);i!==null&&(r.birthDate=i.toString(),r.age=hp(r.dateOfBirth)),delete r.dateOfBirth}else if(r.age!==void 0&&r.age!==null&&r.age!==""){const i=parseInt(r.age,10);r.age=isNaN(i)||i<0?null:i}}if(n==="evamed-custom"){if(r.dateOfBirth){const i=Cd(r.dateOfBirth);i!==null&&(r.birthDate=i.toString(),r.age=hp(r.dateOfBirth)),delete r.dateOfBirth}else if(r.age!==void 0&&r.age!==null){const i=parseInt(r.age,10);r.age=isNaN(i)||i<0?null:i}if(r.gender){const i=String(r.gender).toLowerCase().trim();i==="male"||i==="m"?r.gender="Male":i==="female"||i==="f"?r.gender="Female":i==="other"||i==="o"?r.gender="Other":r.gender=String(r.gender).trim()}else r.gender="Male"}if(n==="tatvacare"){if(r.dateOfBirth){const c=Cd(r.dateOfBirth);c!==null&&(r.birthDate=c.toString(),r.age=hp(r.dateOfBirth)),delete r.dateOfBirth}else if(r.age!==void 0&&r.age!==null){const c=parseInt(r.age,10);r.age=isNaN(c)||c<0?null:c}const i=[];if(r.streetAddress&&i.push(r.streetAddress),r.city&&i.push(r.city),r.state&&i.push(r.state),r.pinCode&&i.push(r.pinCode),r.address=i.length>0?i.join(", "):"",delete r.streetAddress,delete r.city,delete r.state,delete r.pinCode,r.gender){const c=String(r.gender).toLowerCase().trim();c==="male"||c==="m"?r.gender="Male":c==="female"||c==="f"?r.gender="Female":c==="other"||c==="o"?r.gender="Other":r.gender=String(r.gender).trim()}else r.gender="Male"}return r.importID=r.importID||null,r.importSource=n,r},z8e=e=>{if(!e||e==="")return"";const t=String(e).trim();let n=t.match(/^(\d{2})-(\d{2})-(\d{4})$/);if(n){const[,a,r,s]=n;return`${s}-${r}-${a}`}if(n=t.match(/^(\d{4})-(\d{2})-(\d{2})$/),n)return t;if(n=t.match(/^(\d{2})\/(\d{2})\/(\d{4})$/),n){const[,a,r,s]=n;return`${s}-${r}-${a}`}if(n=t.match(/^(\d{4})\/(\d{2})\/(\d{2})$/),n){const[,a,r,s]=n;return`${a}-${r}-${s}`}return t},K8e=(e,t,n)=>{if(e==null||e==="")return"";let a=String(e).trim();if(!n)return a;switch(t){case"Patient Age":{if(typeof e=="number")return String(Math.floor(e));const r=a.match(/\d+/);return r?r[0]:a}case"Age":{if(e==null||e===""||a==="")return"";if(a.endsWith("'"))return a.slice(0,-1).trim()||"";const r=a.match(/^\d+/);return r?r[0]:""}case"Patient Contact":return a.replace(/[^\d+\-\s]/g,"");case"Mobile Number":{let r=a;return r.endsWith("'")&&(r=r.slice(0,-1)),r.startsWith("+91")&&(r=r.substring(3)),r.trim()}case"Mobile":return a.startsWith("+91")?a.substring(3).trim():a.replace(/[^\d]/g,"");case"Patient Gender":case"Gender":case"gender":{if(e==null||e===""||a==="")return"";let r=a;if(r.endsWith("'")&&(r=r.slice(0,-1).trim()),!r.trim())return"";const s=r.toLowerCase().trim();return s==="f"?"Female":s==="m"?"Male":s==="o"?"Other":s==="male"||s.includes("male")&&!s.includes("female")?"Male":s==="female"||s.includes("female")?"Female":s==="other"?"Other":r.trim()}case"Patient Name":case"Patient name":{let r=a;return r.endsWith("'")&&(r=r.slice(0,-1)),r.replace(/\s+/g," ").trim()}case"Email Address":{let r=a;return r.endsWith("'")&&(r=r.slice(0,-1)),r.trim()}case"Pincode":{let r=a;return r.endsWith("'")&&(r=r.slice(0,-1)),r.trim()}case"Patient Number":{let r=a;return r.endsWith("'")&&(r=r.slice(0,-1)),r.trim()}case"UHID (DF)":return a.trim();case"ID":return a.trim();case"phone_number":{if(e==null||e==="")return"";let r=String(e).trim();return r.startsWith("+91")&&(r=r.substring(3).trim()),r.endsWith(".0")&&(r=r.slice(0,-2)),r=r.replace(/[^\d]/g,""),r}case"Sex":{if(e==null||e===""||a==="")return"";const r=a.trim(),s=r.toLowerCase();return s==="female"?"Female":s==="male"?"Male":r}case"Age":case"age":{if(e==null||e===""||a==="")return"";let r=a;r.endsWith("'")&&(r=r.slice(0,-1).trim());const s=r.match(/^\d+/);return s?s[0]:""}case"id":return e==null||e===""?"":String(e).trim();case"address":case"person_address":return e==null||e===""||a===","||a==='","'?"":String(e).replace(/\s+/g," ").trim();case"email":case"email_id":return e==null||e===""?"":String(e).trim();case"Date of Birth":case"date_of_birth":case"dob":case"DOB":case"Birth Date":{let r=a;return r.endsWith("'")&&(r=r.slice(0,-1).trim()),z8e(r)}case"Patient ID":return a.trim();case"Street Address":case"City":case"State":case"Pin Code":return e==null||e===""?"":String(e).trim();default:return a}};function HC(e){const t=[];let n="",a=!1;for(let r=0;r<e.length;r++){const s=e[r],o=e[r+1];s==='"'?a&&o==='"'?(n+='"',r++):a=!a:s===","&&!a?(t.push(n.trim()),n=""):n+=s}return t.push(n.trim()),t}const R9=async(e,t=null)=>{const n=e.name.toLowerCase(),a=e.type==="text/csv"||e.type==="application/csv"||n.endsWith(".csv"),r=e.type==="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"||e.type==="application/vnd.ms-excel"||n.endsWith(".xlsx")||n.endsWith(".xls");if(!a&&!r)throw new Error("Unsupported file type. Please use CSV (.csv) or Excel (.xlsx, .xls) files.");return a?new Promise((s,o)=>{const i=new FileReader;i.onload=c=>{try{const d=c.target.result.split(/\r?\n/);let f=0,m=1;if(t){const w=x2(t);w&&w.headerRow&&(f=w.headerRow-1,m=f+1)}if(f>=d.length){o(new Error(`Header row ${f+1} does not exist in file`));return}const h=d[f].trim();if(!h){o(new Error("Header row is empty"));return}const p=HC(h).map(w=>String(w).trim()).filter(w=>w!=="");let y=0;for(let w=m;w<d.length;w++){const b=d[w].trim();b&&HC(b).some(x=>x.trim()!=="")&&y++}const g=[];for(let w=m;w<d.length;w++){const b=d[w].trim();if(b){const x=HC(b);x.some(T=>T.trim()!=="")&&g.push(x)}}s({headers:p,rows:g,totalRows:g.length,headerRowIndex:f+1,isCSV:!0,fileType:"csv"})}catch(A){o(new Error(`Failed to parse CSV file: ${A.message}`))}},i.onerror=()=>o(new Error("Failed to read file")),i.readAsText(e)}):r?new Promise((s,o)=>{const i=new FileReader;i.onload=c=>{try{console.log(`Reading Excel file: ${e.name} (${(e.size/1024/1024).toFixed(2)} MB)`);const A=c.target.result,d=QE(A,{type:"binary",cellDates:!1,cellNF:!1,cellStyles:!1,sheetStubs:!1});if(!d.SheetNames||d.SheetNames.length===0){o(new Error("Excel file has no worksheets"));return}const f=d.SheetNames[0],m=d.Sheets[f];if(!m){o(new Error(`Worksheet "${f}" not found`));return}console.log(`Processing worksheet: ${f}`);const h=Q8e.sheet_to_json(m,{header:1,defval:"",raw:!1,blankrows:!1});if(h.length===0){o(new Error("Excel file is empty"));return}console.log(`Excel file parsed: ${h.length} total rows`);let p=0,y=1;if(t){const b=x2(t);b&&b.headerRow&&(p=b.headerRow-1,y=p+1)}if(p>=h.length){o(new Error(`Header row ${p+1} does not exist in Excel file`));return}const g=h[p].map(b=>String(b).trim()).filter(b=>b!=="");if(g.length===0){o(new Error("Header row is empty in Excel file"));return}const w=h.slice(y).filter(b=>b.some(x=>x!=null&&String(x).trim()!==""));console.log(`Excel file processed: ${g.length} columns, ${w.length} data rows`),s({headers:g,rows:w,totalRows:w.length,headerRowIndex:p+1,isCSV:!1,fileType:"excel"})}catch(A){console.error("Excel file parsing error:",A),o(new Error(`Failed to parse Excel file: ${A.message}`))}},i.onerror=()=>{console.error("Failed to read Excel file"),o(new Error("Failed to read Excel file"))},i.readAsBinaryString(e)}):Promise.reject(new Error("Unsupported file type. Please use CSV (.csv) or Excel (.xlsx, .xls) files."))},zE=async(e,t)=>{try{const n=await R9(e,t),a=U9(n.headers,t);return{isValid:a.isValid,error:a.error,fileData:a.isValid?n:null,validation:a}}catch(n){return{isValid:!1,error:n.message,fileData:null,validation:null}}},N9=async(e,t,n=null)=>{const{headers:a,rows:r,fileType:s}=e;s&&console.log(`Processing ${s.toUpperCase()} file with ${r.length} rows`);const o={total:r.length,successful:0,failed:0,errors:[],patients:[],duplicates:0},i=100,c=500,A=new Map,d=[],f=[];for(let m=0;m<r.length;m++)try{const h=G8e(r[m],a,t);h.isImported=!0;const p=j8e(h);if(p){o.failed++,o.errors.push({row:m+1,patientData:r[m],error:p,mappedData:h});continue}h.importID&&h.importID.trim()!==""?(A.set(h.importID,{patientData:h,rowIndex:m+1}),d.push(h)):f.push(h),n&&(m%i===0||m===r.length-1)&&n({current:m+1,total:r.length,phase:"mapping",currentPatient:h.name,message:`Processing row ${m+1} of ${r.length}...`}),m%i===0&&m>0&&await new Promise(y=>setTimeout(y,0))}catch(h){console.error(`Row ${m+1} mapping error:`,h),o.failed++,o.errors.push({row:m+1,patientData:r[m],error:h.message,mappedData:null})}if(d.length>0){n&&n({current:0,total:d.length,phase:"duplicate-check",message:"Checking for existing patients..."});const m=await W8e(d,t);o.duplicates=m.duplicates.length,o.errors.push(...m.duplicates.map(p=>({row:p.row,patientData:p.originalData,error:`Patient already exists with Import ID: ${p.importID}`,mappedData:p.originalData,isDuplicate:!0})));const h=[...m.newPatients,...f];await xN(h,o,n,c)}else await xN(f,o,n,c);return n&&n({current:r.length,total:r.length,phase:"complete",successful:o.successful,failed:o.failed,duplicates:o.duplicates,message:`Import completed: ${o.successful} successful, ${o.failed} failed, ${o.duplicates} duplicates`}),o};async function xN(e,t,n,a){if(e.length===0){console.log("No patients to import");return}n&&n({current:0,total:e.length,phase:"bulk-insert",message:`Inserting ${e.length} patients in batches...`}),console.log(`Bulk inserting ${e.length} patients in batches of ${a}...`);for(let r=0;r<e.length;r+=a){const s=e.slice(r,r+a),o=Math.floor(r/a)+1,i=Math.ceil(e.length/a);console.log(`Processing batch ${o}/${i} (${s.length} patients)...`),n&&n({current:r,total:e.length,phase:"bulk-insert",message:`Inserting batch ${o}/${i}: ${r+1}-${Math.min(r+a,e.length)} of ${e.length}...`});try{const{data:c,error:A}=await Dve(s);A?(console.error(`Batch ${o} failed:`,A),t.failed+=s.length,t.errors.push(...s.map((d,f)=>({patientData:d,error:A.message||"Failed to bulk create patients",row:r+f+1})))):(t.successful+=c.successful||0,t.failed+=c.failed||0,c.patients&&t.patients.push(...c.patients),c.errors&&c.errors.length>0&&t.errors.push(...c.errors.map((d,f)=>({...d,row:r+f+1})))),r+a<e.length&&await new Promise(d=>setTimeout(d,50))}catch(c){console.error(`Batch ${o} error:`,c),t.failed+=s.length,t.errors.push(...s.map((A,d)=>({patientData:A,error:c.message||"Failed to process batch",row:r+d+1})))}s.length=0}console.log(`Bulk insert completed: ${t.successful} successful, ${t.failed} failed`)}const W8e=async(e,t)=>{const n=e.filter(a=>a.importID&&a.importID.trim()!=="");if(n.length===0)return console.log("No patients with importID found, proceeding with all patients"),{newPatients:e,duplicates:[]};try{console.log(`Checking for duplicates: ${n.length} patients with importID from ${t}`);const{default:a}=await Jr(async()=>{const{default:c}=await Promise.resolve().then(()=>_M);return{default:c}},void 0,import.meta.url),r=1e3,s=new Set;for(let c=0;c<n.length;c+=r){const d=n.slice(c,c+r).map(f=>f.importID);try{const f=await a.post("/patient/check-duplicates",{importIDs:d,importSource:t});if(f.data&&f.data.success){const m=f.data.data.existingImportIDs||[];m.forEach(h=>s.add(h)),console.log(`Batch ${Math.floor(c/r)+1}: Found ${m.length} duplicates`)}}catch(f){console.warn("Duplicate check batch failed, continuing with other batches:",f.message)}}console.log(`Found ${s.size} total existing patients with matching importIDs`);const o=[],i=[];return e.forEach((c,A)=>{c.importID&&c.importID.trim()!==""&&s.has(c.importID)?i.push({row:A+1,importID:c.importID,originalData:c}):o.push(c)}),console.log(`Duplicate check results: ${o.length} new patients, ${i.length} duplicates`),{newPatients:o,duplicates:i}}catch(a){return console.warn("Duplicate check failed, proceeding with all patients:",a.message),{newPatients:e,duplicates:[]}}},j8e=e=>(console.log("DEBUG validatePatientData - Input data:",JSON.stringify(e,null,2)),!e.name||e.name.trim()===""?"Patient name is required":!e.contact_number||e.contact_number.trim()===""?"Contact number is required":(console.log(`DEBUG validatePatientData - Before modification - Age: ${JSON.stringify(e.age)}, Gender: ${JSON.stringify(e.gender)}`),!e.age&&e.age!=="0"&&(e.age=""),e.gender||(e.gender=""),console.log(`DEBUG validatePatientData - After modification - Age: ${JSON.stringify(e.age)}, Gender: ${JSON.stringify(e.gender)}`),null)),V9=async(e,t)=>{try{if(console.log("saveImportFile called with:",{fileName:e?.name,fileSize:e?.size,fileType:e?.type,emrSystem:t}),!t)throw new Error("EMR system is required");const n=new FormData;n.append("importFile",e,e.name),console.log("FormData contents:");for(let o of n.entries())console.log(o[0],o[1]);const a={emrSystem:t};console.log("Query params:",a);const{default:r}=await Jr(async()=>{const{default:o}=await Promise.resolve().then(()=>_M);return{default:o}},void 0,import.meta.url),s=await r.post("/upload/save-import",n,{params:a,headers:{"Content-Type":"multipart/form-data"}});if(s.data&&s.data.success)return{success:!0,filePath:s.data.data.filePath,fileName:s.data.data.fileName};throw new Error(s.data?.error||"Failed to save file")}catch(n){return console.error("Error saving import file:",n),console.error("Error response:",n.response?.data),{success:!1,error:n.response?.data?.error||n.message||"Failed to save import file"}}},L9=e=>{if(e===0)return"0 Bytes";const t=1024,n=["Bytes","KB","MB","GB"],a=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,a)).toFixed(2))+" "+n[a]},M9=e=>{const t=e*.1,n=e*.01,a=t+n+2;return a<60?`~${Math.ceil(a)} seconds`:a<3600?`~${Math.ceil(a/60)} minutes`:`~${Math.ceil(a/3600)} hours`},q8e=Object.freeze(Object.defineProperty({__proto__:null,estimateImportTime:M9,getFileSizeString:L9,processImportFile:N9,readImportFile:R9,saveImportFile:V9,validateFileHeaders:U9,validateImportFile:zE},Symbol.toStringTag,{value:"Module"})),a4={patients:{tableName:"patients",displayName:"Patient Records",columns:[{dbField:"name",exportName:"Name"},{dbField:"age",exportName:"Age"},{dbField:"gender",exportName:"Gender"},{dbField:"contactNumber",exportName:"Contact Number"},{dbField:"email",exportName:"Email Address"},{dbField:"address",exportName:"Address"},{dbField:"note",exportName:"Notes"},{dbField:"importID",exportName:"Import ID"},{dbField:"importSource",exportName:"Import Source"},{dbField:"isImported",exportName:"Is Imported"}]},medicines:{tableName:"medicines",displayName:"Medicines",columns:[{dbField:"productName",exportName:"Product Name"},{dbField:"marketer",exportName:"Marketer"},{dbField:"saltComposition",exportName:"Salt Composition"},{dbField:"productForm",exportName:"Product Form"}]}},Y8e=e=>a4[e]?.columns||[],X8e=async e=>{try{const t={success:!1,data:{},summary:{totalRecords:0,dataTypes:[],dateRange:null},filePath:null,error:null};if(!e.dataTypes||!Object.values(e.dataTypes).some(a=>a))throw new Error("No data types selected for export");const n=Object.keys(e.dataTypes).filter(a=>e.dataTypes[a]);console.log("Selected data types for export:",n);for(const a of n){const r=await J8e(a,e);t.data[a]=r,t.summary.totalRecords+=r.length,t.summary.dataTypes.push({type:a,count:r.length,displayName:a4[a]?.displayName||a})}return(e.dateFrom||e.dateTo)&&(t.summary.dateRange={from:e.dateFrom||"Beginning",to:e.dateTo||"Now"}),t.success=!0,t}catch(t){return console.error("Export error:",t),{success:!1,data:{},summary:{totalRecords:0,dataTypes:[],dateRange:null},filePath:null,error:t.message}}},J8e=async(e,t)=>{try{console.log(`Fetching ${e} data for export...`);let n;if(e==="patients"){n=await dt.get("/patient/patients",{params:{dateFrom:t.dateFrom,dateTo:t.dateTo,exportAll:!0}});const a=n.data?.data?.patients||n.data?.patients||[];return console.log(`Found ${a.length} patients for export`),a}else if(e==="medicines")try{n=await dt.get("/medicine/all",{params:{dateFrom:t.dateFrom,dateTo:t.dateTo,exportAll:!0}});const a=n.data?.data?.medicines||n.data?.medicines||[];return console.log(`Found ${a.length} medicines for export`),a}catch(a){return console.warn("Medicine export endpoint not available yet:",a.message),[]}else throw new Error(`Unknown data type: ${e}`)}catch(n){if(console.error(`Error fetching ${e} data:`,n),n.response?.status===404)return console.warn(`API endpoint for ${e} export not implemented yet. Returning empty array.`),[];throw n}},Z8e=e=>{try{const t=[];return Object.keys(e.data).forEach(n=>{const a=e.data[n],r=Y8e(n);if(a.length===0)return;t.push(`
--- ${a4[n]?.displayName||n} ---`);const s=r.map(o=>o.exportName);t.push(s.join(",")),a.forEach(o=>{const i=r.map(c=>{const A=o[c.dbField];if(A==null)return"";const d=String(A);return d.includes(",")||d.includes('"')||d.includes(`
`)?`"${d.replace(/"/g,'""')}"`:d});t.push(i.join(","))}),t.push("")}),t.join(`
`)}catch(t){throw console.error("Error generating CSV:",t),t}},e6e=()=>{try{const e=["id","name","phone_number","age","gender","date_of_birth","address","email"],t=[{id:"P001",name:"Rajesh Kumar",phone_number:"9876543210",age:"35",gender:"Male",date_of_birth:"1989-05-15",address:"123 Main Street, Mumbai, Maharashtra",email:"rajesh.kumar@example.com"},{id:"P002",name:"Priya Sharma",phone_number:"9876543211",age:"28",gender:"Female",date_of_birth:"1996-08-22",address:"456 Park Avenue, Delhi",email:"priya.sharma@example.com"},{id:"P003",name:"Amit Patel",phone_number:"9876543212",age:"42",gender:"Male",date_of_birth:"1982-03-10",address:"789 MG Road, Bangalore, Karnataka",email:"amit.patel@example.com"},{id:"P004",name:"Sneha Reddy",phone_number:"9876543213",age:"31",gender:"Female",date_of_birth:"1993-11-05",address:"321 Church Street, Hyderabad, Telangana",email:"sneha.reddy@example.com"},{id:"P005",name:"Vikram Singh",phone_number:"9876543214",age:"45",gender:"Male",date_of_birth:"1979-07-18",address:"654 Nehru Road, Pune, Maharashtra",email:"vikram.singh@example.com"},{id:"P006",name:"Anjali Desai",phone_number:"9876543215",age:"29",gender:"Female",date_of_birth:"1995-12-30",address:"987 Gandhi Nagar, Ahmedabad, Gujarat",email:"anjali.desai@example.com"}],n=[];return n.push(e.join(",")),t.forEach(a=>{const r=e.map(s=>{const o=a[s]||"";if(o==null||o==="")return"";const i=String(o);return i.includes(",")||i.includes('"')||i.includes(`
`)?`"${i.replace(/"/g,'""')}"`:i});n.push(r.join(","))}),n.join(`
`)}catch(e){throw console.error("Error generating Evamed template:",e),e}},t6e=async()=>{try{const e=e6e(),t="evamed_template.csv",n=new Blob([e],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const a=await window.electronAPI.showSaveDialog({defaultPath:t,filters:[{name:"CSV Files",extensions:["csv"]}]});return!a.canceled&&a.filePath?(await window.electronAPI.writeFile(a.filePath,e),{success:!0,filePath:a.filePath,filename:t}):{success:!1,error:"Save canceled by user"}}else{const a=document.createElement("a"),r=URL.createObjectURL(n);return a.setAttribute("href",r),a.setAttribute("download",t),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r),{success:!0,filePath:`Downloaded: ${t}`,filename:t}}}catch(e){return console.error("Error downloading Evamed template:",e),{success:!1,error:e.message}}},n6e=async(e,t)=>{try{const n=new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5),r=`evamed_export_${t.dataTypes.map(o=>o.type).join("_")}_${n}.csv`,s=new Blob([e],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const o=await window.electronAPI.showSaveDialog({defaultPath:r,filters:[{name:"CSV Files",extensions:["csv"]}]});return!o.canceled&&o.filePath?(await window.electronAPI.writeFile(o.filePath,e),{success:!0,filePath:o.filePath,filename:r}):{success:!1,error:"Save canceled by user"}}else{const o=document.createElement("a"),i=URL.createObjectURL(s);return o.setAttribute("href",i),o.setAttribute("download",r),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i),{success:!0,filePath:`Downloaded: ${r}`,filename:r}}}catch(n){return console.error("Error saving export file:",n),{success:!1,error:n.message}}},a6e={class:"filter-container pa-3",style:{flex:"1 1 auto","overflow-y":"auto"}},r6e={class:"filter-field mb-3"},s6e={class:"text-caption"},o6e={class:"filter-field mb-3"},i6e={class:"d-flex justify-center mt-4 mb-2"},l6e={key:1,class:"d-flex justify-center"},u6e={__name:"ImportFilter",props:{filters:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},emits:["filter-change","start-import","clear-filters","template-downloaded"],setup(e,{emit:t}){const n=e,a=t,r=V({selectedEMR:n.filters.selectedEMR||"",selectedDataType:n.filters.selectedDataType||"patients",importFile:n.filters.importFile||null}),s=V({isValidating:!1,isValid:null,error:null,fileData:null}),o=V(!1),i=V([...hH]),c=V([...pH,{name:"Appointments",value:"appointments",disabled:!0},{name:"Treatments",value:"treatments",disabled:!0},{name:"Billing Records",value:"billing",disabled:!0}]),A=ae(()=>n.loading),d=ae(()=>r.value.selectedEMR!==""),f=ae(()=>r.value.selectedEMR&&r.value.selectedDataType&&r.value.importFile&&s.value.isValid===!0&&!s.value.isValidating&&!A.value),m=ae(()=>r.value.selectedEMR||r.value.importFile),h=ae(()=>r.value.selectedEMR?s.value.isValidating?"Validating file structure...":s.value.error?`Error: ${s.value.error}`:s.value.isValid&&s.value.fileData?`Valid file: ${s.value.fileData.totalRows} patient records found`:"Supported formats: CSV, Excel":"Please select an EMR system first"),p=async F=>{console.log("File selected, starting validation...",F),s.value={isValidating:!1,isValid:null,error:null,fileData:null};const k=r.value.importFile;console.log("Files from v-model:",k);let S=null;if(k&&(Array.isArray(k)?S=k.length>0?k[0]:null:k instanceof File&&(S=k)),S){console.log("File selected:",S.name,`(${L9(S.size)})`);const E=y(S);if(E.error){console.error("Basic validation failed:",E.error),s.value.error=E.error,s.value.isValid=!1,g();return}if(console.log("Basic validation passed"),r.value.selectedEMR&&bN(r.value.selectedEMR)){console.log("Starting file structure validation for EMR:",r.value.selectedEMR),s.value.isValidating=!0;try{const C=await zE(S,r.value.selectedEMR);console.log("File validation result:",C),s.value.isValid=C.isValid,s.value.error=C.error,s.value.fileData=C.fileData,C.isValid?console.log(` File validated successfully: ${C.fileData.totalRows} rows found`):console.warn(" File validation failed:",C.error)}catch(C){console.error("File validation error:",C),s.value.isValid=!1,s.value.error=`Validation error: ${C.message}`}s.value.isValidating=!1}else console.log("EMR system not selected or not supported, skipping structure validation"),s.value.isValid=!0}else console.log("No file found");g()},y=F=>{if(F.size>52428800)return{error:"File size exceeds 50MB limit"};const S=[".csv",".xlsx",".xls"],E="."+F.name.split(".").pop().toLowerCase();return S.includes(E)?F.size===0?{error:"File is empty"}:{error:null}:{error:"Unsupported file type. Please use CSV or Excel files."}},g=()=>{a("filter-change",{...r.value})},w=()=>{a("start-import",{...r.value})},b=()=>{r.value={selectedEMR:"",selectedDataType:"patients",importFile:null},s.value={isValidating:!1,isValid:null,error:null,fileData:null},a("clear-filters"),g()},x=async()=>{try{o.value=!0;const F=await t6e();F.success?a("template-downloaded",{success:!0,filename:F.filename}):a("template-downloaded",{success:!1,error:F.error})}catch(F){console.error("Error downloading template:",F),a("template-downloaded",{success:!1,error:F.message})}finally{o.value=!1}},T=V({});return Ke(()=>n.filters,F=>{Object.keys(F).some(S=>F[S]!==T.value[S])&&(r.value={...r.value,...F},T.value={...F})},{immediate:!0}),Ke(()=>r.value.selectedEMR,async(F,k)=>{if(F!==k){if(s.value={isValidating:!1,isValid:null,error:null,fileData:null},r.value.importFile&&F&&bN(F)){s.value.isValidating=!0;try{const S=await zE(r.value.importFile[0],F);s.value.isValid=S.isValid,s.value.error=S.error,s.value.fileData=S.fileData}catch(S){s.value.isValid=!1,s.value.error=`Validation error: ${S.message}`}s.value.isValidating=!1}g()}}),(F,k)=>{const S=I("v-card-text"),E=I("v-card"),C=I("v-select"),D=I("v-icon"),P=I("v-alert"),O=I("v-chip"),H=I("v-list-item"),ie=I("v-file-input"),Ae=I("v-btn");return U(),pe(E,{color:"surfaceContainer",flat:"",style:{height:"100%",display:"flex","flex-direction":"column"}},{default:u(()=>[l(E,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(S,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...k[3]||(k[3]=[v("span",{class:"text-body-2 font-weight-medium"},"Import Configuration",-1)])]),_:1})]),_:1}),v("div",a6e,[v("div",r6e,[l(C,{modelValue:r.value.selectedEMR,"onUpdate:modelValue":[k[0]||(k[0]=j=>r.value.selectedEMR=j),g],items:i.value,"item-title":"name","item-value":"value",label:"EMR System",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input"},null,8,["modelValue","items"])]),r.value.selectedEMR==="evamed-custom"?(U(),pe(P,{key:0,type:"info",variant:"tonal",class:"mb-3",border:"start",density:"compact"},{prepend:u(()=>[l(D,{size:"small",color:"primary"},{default:u(()=>[...k[4]||(k[4]=[M("mdi-alert-circle",-1)])]),_:1})]),default:u(()=>[v("div",s6e,[k[5]||(k[5]=M(" Important - please ",-1)),v("a",{href:"#",onClick:pn(x,["prevent"]),class:ct(["template-download-link",{"template-download-link-disabled":o.value}])}," click here ",2),k[6]||(k[6]=M(" to download the blank custom template. Add your information and then import below. ",-1))])]),_:1})):ge("",!0),v("div",o6e,[l(C,{modelValue:r.value.selectedDataType,"onUpdate:modelValue":k[1]||(k[1]=j=>r.value.selectedDataType=j),items:c.value,"item-title":"name","item-value":"value",label:"Data Type",density:"compact",variant:"outlined",disabled:!0,"hide-details":"auto",class:"filter-input"},{item:u(({props:j,item:J})=>[l(H,Ue(j,{disabled:J.raw.disabled}),kv({_:2},[J.raw.disabled?{name:"append",fn:u(()=>[l(O,{size:"x-small",color:"grey"},{default:u(()=>[...k[7]||(k[7]=[M("Coming Soon",-1)])]),_:1})]),key:"0"}:void 0]),1040,["disabled"])]),_:1},8,["modelValue","items"]),k[8]||(k[8]=v("p",{class:"text-caption text-medium-emphasis mt-1 mb-0"},"Currently we support import of patient information only.",-1))]),v("div",{class:ct(["filter-field mb-3",{"opacity-disabled":!d.value}])},[l(ie,{modelValue:r.value.importFile,"onUpdate:modelValue":k[2]||(k[2]=j=>r.value.importFile=j),label:"Import File",placeholder:"Select file to import",density:"compact",variant:"outlined",accept:".csv,.xlsx,.xls","show-size":"","hide-details":"auto",class:"filter-input",disabled:!d.value,loading:s.value.isValidating,onChange:p},kv({_:2},[r.value.importFile&&!s.value.isValidating?{name:"append-inner",fn:u(()=>[s.value.isValid===!0?(U(),pe(D,{key:0,color:"success",size:"small"},{default:u(()=>[...k[9]||(k[9]=[M(" mdi-check-circle ",-1)])]),_:1})):s.value.isValid===!1?(U(),pe(D,{key:1,color:"error",size:"small"},{default:u(()=>[...k[10]||(k[10]=[M(" mdi-alert-circle ",-1)])]),_:1})):ge("",!0)]),key:"0"}:void 0]),1032,["modelValue","disabled","loading"]),v("p",{class:ct(["text-caption mt-1 mb-0",{"text-success":s.value.isValid===!0,"text-error":s.value.isValid===!1,"text-medium-emphasis":s.value.isValid===null}])},K(h.value),3)],2),v("div",i6e,[l(Ae,{color:"primary",size:"small","prepend-icon":"mdi-upload",onClick:w,disabled:!f.value,loading:A.value,class:"filter-button"},{default:u(()=>[...k[11]||(k[11]=[M(" Start Import ",-1)])]),_:1},8,["disabled","loading"])]),m.value?(U(),me("div",l6e,[l(Ae,{variant:"text",size:"small","prepend-icon":"mdi-filter-remove",onClick:b,class:"filter-button-clear"},{default:u(()=>[...k[12]||(k[12]=[M(" Clear ",-1)])]),_:1})])):ge("",!0)])]),_:1})}}},c6e=Xt(u6e,[["__scopeId","data-v-29791cb3"]]),d6e={class:"filter-container pa-3",style:{flex:"1 1 auto","overflow-y":"auto"}},A6e={class:"filter-section mb-3"},f6e={class:"filter-section mb-3"},m6e={class:"d-flex justify-center mt-4 mb-2"},v6e={key:0,class:"d-flex justify-center"},h6e={__name:"ExportFilter",props:{filters:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},emits:["filter-change","start-export","clear-filters"],setup(e,{emit:t}){const n=e,a=t,r=V({dataTypes:{patients:n.filters.dataTypes?.patients!==void 0?n.filters.dataTypes.patients:!0,medicines:n.filters.dataTypes?.medicines!==void 0?n.filters.dataTypes.medicines:!1},dateFrom:n.filters.dateFrom||"",dateTo:n.filters.dateTo||""}),s=V(n.filters.dataTypes?.patients?"patients":n.filters.dataTypes?.medicines?"medicines":"patients"),o=ae(()=>n.loading),i=ae(()=>new Date().toISOString().split("T")[0]),c=ae(()=>!o.value&&A.value),A=ae(()=>s.value!==null&&s.value!==""),d=ae(()=>r.value.dateFrom||r.value.dateTo||s.value!=="patients"),f=y=>{r.value.dataTypes={patients:!1,medicines:!1},y&&(r.value.dataTypes[y]=!0),m()},m=()=>{a("filter-change",{...r.value})},h=()=>{a("start-export",{...r.value})},p=()=>{s.value="patients",r.value={dataTypes:{patients:!0,medicines:!1},dateFrom:"",dateTo:""},a("clear-filters"),m()};return Ke(()=>n.filters,y=>{r.value={...r.value,...y},y.dataTypes&&(s.value=y.dataTypes.patients?"patients":y.dataTypes.medicines?"medicines":"patients")},{deep:!0}),f(s.value),(y,g)=>{const w=I("v-card-text"),b=I("v-card"),x=I("v-radio"),T=I("v-radio-group"),F=I("v-text-field"),k=I("v-btn");return U(),pe(b,{color:"surfaceContainer",flat:"",style:{height:"100%",display:"flex","flex-direction":"column"}},{default:u(()=>[l(b,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(w,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...g[3]||(g[3]=[v("span",{class:"text-body-2 font-weight-medium"},"Export Configuration",-1)])]),_:1})]),_:1}),v("div",d6e,[v("div",A6e,[g[4]||(g[4]=v("div",{class:"filter-section-label mb-2"},"Data Type",-1)),l(T,{modelValue:s.value,"onUpdate:modelValue":[g[0]||(g[0]=S=>s.value=S),f],"hide-details":"",density:"compact"},{default:u(()=>[l(x,{value:"patients",label:"Patient Records",density:"compact"}),l(x,{value:"medicines",label:"Medicines",density:"compact"})]),_:1},8,["modelValue"])]),v("div",f6e,[g[5]||(g[5]=v("div",{class:"filter-section-label mb-2"},"Date Range (Optional)",-1)),l(F,{modelValue:r.value.dateFrom,"onUpdate:modelValue":[g[1]||(g[1]=S=>r.value.dateFrom=S),m],label:"From Date",type:"date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input mb-2",max:r.value.dateTo||i.value},null,8,["modelValue","max"]),l(F,{modelValue:r.value.dateTo,"onUpdate:modelValue":[g[2]||(g[2]=S=>r.value.dateTo=S),m],label:"To Date",type:"date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input",min:r.value.dateFrom,max:i.value},null,8,["modelValue","min","max"])]),v("div",m6e,[l(k,{disabled:!c.value,loading:o.value,color:"primary",size:"small","prepend-icon":"mdi-download",onClick:h,class:"filter-button"},{default:u(()=>[...g[6]||(g[6]=[M(" Start Export ",-1)])]),_:1},8,["disabled","loading"])]),d.value?(U(),me("div",v6e,[l(k,{variant:"text",size:"small","prepend-icon":"mdi-filter-remove",onClick:p,class:"filter-button-clear"},{default:u(()=>[...g[7]||(g[7]=[M(" Clear ",-1)])]),_:1})])):ge("",!0)])]),_:1})}}},p6e=Xt(h6e,[["__scopeId","data-v-19977106"]]),g6e={class:"scrollable-content"},y6e={class:"scrollable-content"},_6e={key:1},w6e={class:"text-center"},b6e={class:"mt-4 text-subtitle-1"},x6e={class:"text-center"},C6e={class:"scrollable-content"},S6e={class:"scrollable-content"},E6e={key:1},B6e={class:"text-center"},k6e={class:"mt-4 text-subtitle-1"},T6e={key:0,class:"mt-4"},I6e={class:"mb-2"},F6e={class:"mb-2"},P6e={key:0,class:"mb-2"},D6e={key:1},U6e={class:"text-center"},R6e={class:"mb-4"},N6e={class:"mb-4"},V6e={class:"text-caption"},L6e={key:0,class:"mb-4"},M6e={class:"mt-2"},O6e={key:1},H6e={__name:"data-page",setup(e){const t=V(0);zf();const n=V(null),a=V(!1),r=V(""),s=V(!1),o=V(""),i=V(!1),c=V(null),A=V(!1),d=V(0),f=V(""),m=V([]),h=V([]),p=V({selectedEMR:"",selectedDataType:"patients",importFile:null}),y=V(!1),g=V(0),w=V(""),b=V([]),x=V(null),T=V(!1),F=V({dataTypes:{patients:!0,medicines:!1},dateFrom:"",dateTo:""}),k=V([{title:"Data Type",key:"type",sortable:!0},{title:"Import Source",key:"importSource",sortable:!0},{title:"Records Processed",key:"processed",sortable:!0},{title:"Records Imported",key:"imported",sortable:!0},{title:"Duplicates Skipped",key:"duplicates",sortable:!0},{title:"With Import ID",key:"withImportID",sortable:!0},{title:"Errors",key:"errors",sortable:!0},{title:"Status",key:"status",sortable:!0}]),S=V([{title:"Date",key:"date",sortable:!0},{title:"Format",key:"format",sortable:!0},{title:"Data Types",key:"dataTypes",sortable:!0},{title:"Records",key:"recordCount",sortable:!0},{title:"Status",key:"status",sortable:!0},{title:"Actions",key:"actions",sortable:!1}]),E=V([{title:"Row",key:"row",sortable:!0,width:"80px"},{title:"Patient Data",key:"patientData",sortable:!1},{title:"Error",key:"error",sortable:!1},{title:"Actions",key:"actions",sortable:!1,width:"100px"}]),C=V([{title:"IMPORT",disabled:!1},{title:"EXPORT",disabled:!1}]),D=Y=>{p.value={...p.value,...Y}},P=Y=>{F.value={...F.value,...Y}},O=()=>{p.value={selectedEMR:"",selectedDataType:"patients",importFile:null}},H=Y=>{Y.success?(a.value=!0,r.value=`Evamed template downloaded successfully: ${Y.filename}`):(s.value=!0,o.value=`Failed to download template: ${Y.error}`)},ie=()=>{F.value={dataTypes:{patients:!0,medicines:!1},dateFrom:"",dateTo:""}},Ae=async Y=>{try{if(A.value=!0,d.value=0,f.value="Initializing import...",m.value=[],h.value=[],console.log("Starting import with filters:",Y),!Y.importFile)throw new Error("No file selected for import");if(!Y.selectedEMR)throw new Error("No EMR system selected");let te;if(Array.isArray(Y.importFile))te=Y.importFile[0];else if(Y.importFile instanceof File)te=Y.importFile;else throw new Error("Invalid file format");if(!te)throw new Error("No valid file found");const L=Y.selectedEMR;if(console.log("Processing file:",te.name,"for EMR:",L),console.log("Full filterData:",Y),!L||L.trim()==="")throw new Error("EMR system is required and cannot be empty");f.value="Saving import file...";const N=await V9(te,L);if(!N.success)throw new Error(`Failed to save import file: ${N.error}`);d.value=10,console.log(`Import file saved: ${N.fileName}`),f.value="Reading and validating file...";const{readImportFile:q,validateFileHeaders:Q}=await Jr(async()=>{const{readImportFile:Z,validateFileHeaders:ce}=await Promise.resolve().then(()=>q8e);return{readImportFile:Z,validateFileHeaders:ce}},void 0,import.meta.url);let ee;try{ee=await q(te,L)}catch(Z){throw new Error(`Failed to read file: ${Z.message}`)}const z=Q(ee.headers,L);if(!z.isValid)throw new Error(`File validation failed: ${z.error}`);d.value=20;const X=M9(ee.totalRows);f.value=`Processing ${ee.totalRows} patient records (${X})...`;const le=await N9(ee,L,Z=>{if(Z.phase==="mapping")d.value=20+Z.current/Z.total*30,f.value=`Mapping data: ${Z.current} of ${Z.total}`,Z.currentPatient&&(f.value+=` (${Z.currentPatient})`);else if(Z.phase==="duplicate-check")d.value=50+Z.current/Z.total*10,f.value=Z.message||"Checking for existing patients...";else if(Z.phase==="bulk-insert")d.value=60+Z.current/Z.total*30,f.value=Z.message||"Bulk inserting patients...";else if(Z.phase==="complete"&&(d.value=90+Z.current/Z.total*10,f.value=Z.message||"Import completed!",Z.successful>0||Z.failed>0||Z.duplicates>0)){const ce=[];Z.successful>0&&ce.push(`Success: ${Z.successful}`),Z.failed>0&&ce.push(`Failed: ${Z.failed}`),Z.duplicates>0&&ce.push(`Duplicates: ${Z.duplicates}`),f.value+=` - ${ce.join(", ")}`}Z.lastError&&Z.failed>0&&console.warn("Import error:",Z.lastError)});h.value=le.errors||[];const re=le.patients?le.patients.filter(Z=>Z.importID&&Z.importID.trim()!=="").length:0;d.value=100,A.value=!1;const de=L==="practo"?"Practo":L==="ekacare"?"Eka.Care":L==="healthplix"?"Healthplix":L==="evamed-custom"?"Evamed Custom Template":L==="tatvacare"?"TatvaCare":L;m.value=[{type:"Patient Records",importSource:de,processed:le.total,imported:le.successful,duplicates:le.duplicates||0,withImportID:re,errors:le.failed,status:le.failed===0?"Success":"Partial Success"}];const G=le.duplicates||0;if(le.failed===0&&G===0)f.value=`${de} import completed successfully! ${le.successful} patients imported.`,a.value=!0,r.value=`Successfully imported ${le.successful} patients from ${de}!`;else if(le.failed===0&&G>0)f.value=`${de} import completed successfully! ${le.successful} patients imported, ${G} duplicates skipped.`,a.value=!0,r.value=`Successfully imported ${le.successful} patients from ${de} (${G} duplicates skipped)!`;else{const Z=G>0?`, ${G} duplicates skipped`:"";f.value=`${de} import completed with ${le.failed} errors. ${le.successful} patients imported successfully${Z}.`,s.value=!0,o.value=`${de} import completed with ${le.failed} errors out of ${le.total} records${Z}.`}console.log("Import Results:",le),le.errors.length>0&&console.log("Import Errors:",le.errors)}catch(te){console.error("Import error:",te),A.value=!1,d.value=0,s.value=!0,o.value="Import failed: "+te.message,f.value=`Import failed: ${te.message}`}},j=async Y=>{try{y.value=!0,g.value=0,w.value="Preparing export...",x.value=null,T.value=!1,console.log("Starting export with filters:",Y),g.value=10,w.value="Collecting data...";const te=await X8e(Y);if(!te.success)throw new Error(te.error||"Failed to collect export data");g.value=50,w.value=`Found ${te.summary.totalRecords} records. Formatting data...`;const L=Z8e(te);g.value=80,w.value="Preparing file for download...";const N=await n6e(L,te.summary);if(!N.success)throw new Error(N.error||"Failed to save export file");g.value=100,w.value="Export completed successfully!",x.value={...te.summary,filePath:N.filePath,filename:N.filename},T.value=!0;const q={id:Date.now().toString(),date:new Date().toLocaleDateString(),format:"CSV",dataTypes:te.summary.dataTypes.map(Q=>Q.displayName).join(", "),recordCount:te.summary.totalRecords,status:"Completed",filePath:N.filePath,filename:N.filename};b.value.unshift(q),a.value=!0,r.value=`Export completed! ${te.summary.totalRecords} records exported.`}catch(te){console.error("Export error:",te),y.value=!1,g.value=0,w.value="",T.value=!1,s.value=!0,o.value="Export failed: "+te.message}finally{setTimeout(()=>{T.value&&(y.value=!1)},1500)}},J=Y=>{console.log("Opening export:",Y),window.require.electronAPI&&Y.filePath&&window.require.electronAPI.showItemInFolder(Y.filePath),a.value=!0,r.value=`Opened ${Y.format} export location`},ue=Y=>{if(!Y||!Array.isArray(Y))return"No data available";const te=Y[0]||"Unknown",L=Y[3]||Y[1]||"No contact";return`${te} (${L})`},ne=Y=>{let te=null;Y.mappedData&&(te={source:Y.mappedData.importSource||"Unknown",importID:Y.mappedData.importID||null}),c.value={row:Y.row,patientData:Y.patientData,error:Y.error,formattedData:ue(Y.patientData),importInfo:te},i.value=!0};return un(()=>{try{console.log("Data page initialized")}catch(Y){console.error("Error setting up data page:",Y),n.value="Failed to initialize data page"}}),(Y,te)=>{const L=I("v-alert"),N=I("v-tab"),q=I("v-tabs"),Q=I("v-card"),ee=I("v-col"),z=I("v-row"),X=I("v-card-text"),le=I("v-progress-circular"),re=I("v-data-table"),de=I("v-icon"),G=I("v-expansion-panel-title"),Z=I("v-chip"),ce=I("v-btn"),Se=I("v-expansion-panel-text"),Pe=I("v-expansion-panel"),ye=I("v-expansion-panels"),Ce=I("v-window-item"),_e=I("v-card-title"),De=I("v-window"),xe=I("v-snackbar"),Te=I("v-spacer"),Me=I("v-card-actions"),et=I("v-dialog"),lt=I("v-main");return U(),pe(lt,null,{default:u(()=>[l(Bn,{feature:"data"},{default:u(()=>[n.value?(U(),pe(L,{key:0,type:"error",dismissible:"","onClick:close":te[0]||(te[0]=Re=>n.value=null),class:"ma-3"},{default:u(()=>[M(K(n.value),1)]),_:1})):ge("",!0),l(z,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[l(ee,{cols:"12"},{default:u(()=>[l(Q,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center"},{default:u(()=>[l(q,{modelValue:t.value,"onUpdate:modelValue":te[1]||(te[1]=Re=>t.value=Re),color:"primary","align-tabs":"start",class:"w-100"},{default:u(()=>[(U(!0),me(We,null,qt(C.value,(Re,Le)=>(U(),pe(N,{key:Le,value:Le,disabled:Re.disabled},{default:u(()=>[M(K(Re.title),1)]),_:2},1032,["value","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(De,{modelValue:t.value,"onUpdate:modelValue":te[2]||(te[2]=Re=>t.value=Re),class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[l(Ce,{value:0,style:{height:"100%"}},{default:u(()=>[l(Bn,{permission:"data.import"},{default:u(()=>[l(z,{"aria-label":"import row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[l(ee,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[v("div",g6e,[l(c6e,{filters:p.value,loading:A.value,onFilterChange:D,onStartImport:Ae,onClearFilters:O,onTemplateDownloaded:H},null,8,["filters","loading"])])]),_:1}),l(ee,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[v("div",y6e,[l(Q,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[l(Q,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(X,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[m.value.length>0?(U(),me(We,{key:0},[v("strong",null,K(m.value[0]?.imported||0),1),te[7]||(te[7]=M(" records imported ",-1))],64)):(U(),me("strong",_6e,"Import Data"))]),_:1})]),_:1}),A.value?(U(),pe(z,{key:0,"no-gutters":""},{default:u(()=>[l(ee,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[v("div",w6e,[l(le,{indeterminate:"",color:"primary",size:"64"}),v("div",b6e,K(f.value||"Processing import..."),1)])]),_:1})]),_:1})):m.value.length>0?(U(),pe(z,{key:1,"no-gutters":""},{default:u(()=>[l(ee,{cols:"12",class:"scroll-element mt-2",style:{"padding-bottom":"20px"}},{default:u(()=>[l(re,{headers:k.value,items:m.value,class:"elevation-1 ma-2",density:"comfortable"},null,8,["headers","items"]),h.value.length>0?(U(),pe(ye,{key:0,class:"ma-2"},{default:u(()=>[l(Pe,null,{default:u(()=>[l(G,null,{default:u(()=>[l(de,{color:"error",class:"mr-2"},{default:u(()=>[...te[8]||(te[8]=[M("mdi-alert-circle",-1)])]),_:1}),M(" Failed Records ("+K(h.value.length)+") ",1)]),_:1}),l(Se,null,{default:u(()=>[l(re,{headers:E.value,items:h.value,class:"elevation-1",density:"comfortable","items-per-page":10,"items-per-page-options":[5,10,25,50]},{"item.patientData":u(({item:Re})=>[l(Z,{size:"small",color:"grey",variant:"outlined"},{default:u(()=>[M(K(ue(Re.patientData)),1)]),_:2},1024)]),"item.error":u(({item:Re})=>[l(Z,{size:"small",color:"error",variant:"outlined"},{default:u(()=>[M(K(Re.error),1)]),_:2},1024)]),"item.actions":u(({item:Re})=>[l(ce,{size:"small",color:"primary",variant:"text",onClick:Le=>ne(Re)},{default:u(()=>[l(de,{size:"small"},{default:u(()=>[...te[9]||(te[9]=[M("mdi-eye",-1)])]),_:1}),te[10]||(te[10]=M(" Details ",-1))]),_:1},8,["onClick"])]),_:2},1032,["headers","items"])]),_:1})]),_:1})]),_:1})):ge("",!0)]),_:1})]),_:1})):(U(),pe(z,{key:2,"no-gutters":"",style:{height:"calc(100% - 60px)"}},{default:u(()=>[l(ee,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%"}},{default:u(()=>[v("div",x6e,[l(de,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...te[11]||(te[11]=[M("mdi-cloud-upload",-1)])]),_:1}),te[12]||(te[12]=v("div",{class:"text-h6 mb-2"},"Import Data",-1)),te[13]||(te[13]=v("div",{class:"text-body-2 text-medium-emphasis"},"Select EMR system and file to begin import process",-1))])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1}),l(Ce,{value:1,style:{height:"100%"}},{default:u(()=>[l(Bn,{permission:"data.export"},{default:u(()=>[l(z,{"aria-label":"export row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[l(ee,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[v("div",C6e,[l(p6e,{filters:F.value,loading:y.value,onFilterChange:P,onStartExport:j,onClearFilters:ie},null,8,["filters","loading"])])]),_:1}),l(ee,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[v("div",S6e,[l(Q,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[l(Q,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(X,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[b.value.length>0?(U(),me(We,{key:0},[v("strong",null,K(b.value.length),1),M(" export"+K(b.value.length!==1?"s":"")+" available ",1)],64)):(U(),me("strong",E6e,"Export Data"))]),_:1})]),_:1}),y.value?(U(),pe(z,{key:0,"no-gutters":""},{default:u(()=>[l(ee,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[v("div",B6e,[l(le,{"model-value":g.value,color:"primary",size:"64",width:"6"},{default:u(()=>[M(K(g.value)+"% ",1)]),_:1},8,["model-value"]),v("div",k6e,K(w.value||"Processing export..."),1),x.value?(U(),me("div",T6e,[l(Q,{class:"mx-auto","max-width":"300",outlined:""},{default:u(()=>[l(_e,{class:"text-h6"},{default:u(()=>[...te[14]||(te[14]=[M("Export Summary",-1)])]),_:1}),l(X,null,{default:u(()=>[v("div",I6e,[te[15]||(te[15]=v("strong",null,"Total Records:",-1)),M(" "+K(x.value.totalRecords),1)]),v("div",F6e,[te[16]||(te[16]=v("strong",null,"Data Types:",-1)),(U(!0),me(We,null,qt(x.value.dataTypes,Re=>(U(),me("div",{key:Re.type,class:"ml-2"},K(Re.displayName)+": "+K(Re.count)+" records ",1))),128))]),x.value.dateRange?(U(),me("div",P6e,[te[17]||(te[17]=v("strong",null,"Date Range:",-1)),M(" "+K(x.value.dateRange.from)+" - "+K(x.value.dateRange.to),1)])):ge("",!0),T.value&&x.value.filename?(U(),me("div",D6e,[te[18]||(te[18]=v("strong",null,"File:",-1)),M(" "+K(x.value.filename),1)])):ge("",!0)]),_:1})]),_:1})])):ge("",!0)])]),_:1})]),_:1})):b.value.length>0?(U(),pe(z,{key:1,"no-gutters":""},{default:u(()=>[l(ee,{cols:"12",class:"scroll-element mt-2",style:{"padding-bottom":"20px"}},{default:u(()=>[l(re,{headers:S.value,items:b.value,class:"elevation-1 ma-2",density:"comfortable"},{"item.actions":u(({item:Re})=>[l(ce,{size:"small",color:"primary",variant:"text",onClick:Le=>J(Re)},{default:u(()=>[l(de,null,{default:u(()=>[...te[19]||(te[19]=[M("mdi-download",-1)])]),_:1}),te[20]||(te[20]=M(" Download ",-1))]),_:1},8,["onClick"])]),_:2},1032,["headers","items"])]),_:1})]),_:1})):(U(),pe(z,{key:2,"no-gutters":"",style:{height:"calc(100% - 60px)"}},{default:u(()=>[l(ee,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%"}},{default:u(()=>[v("div",U6e,[l(de,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...te[21]||(te[21]=[M("mdi-download",-1)])]),_:1}),te[22]||(te[22]=v("div",{class:"text-h6 mb-2"},"Export Data",-1)),te[23]||(te[23]=v("div",{class:"text-body-2 text-medium-emphasis"},"Configure export settings and start export process",-1))])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(xe,{modelValue:a.value,"onUpdate:modelValue":te[3]||(te[3]=Re=>a.value=Re),class:"elevation-24",color:"success"},{default:u(()=>[M(K(r.value),1)]),_:1},8,["modelValue"]),l(xe,{modelValue:s.value,"onUpdate:modelValue":te[4]||(te[4]=Re=>s.value=Re),class:"elevation-24",color:"error"},{default:u(()=>[M(K(o.value),1)]),_:1},8,["modelValue"]),l(et,{modelValue:i.value,"onUpdate:modelValue":te[6]||(te[6]=Re=>i.value=Re),"max-width":"600px"},{default:u(()=>[l(Q,null,{default:u(()=>[l(_e,{class:"text-h6"},{default:u(()=>[l(de,{color:"error",class:"mr-2"},{default:u(()=>[...te[24]||(te[24]=[M("mdi-alert-circle",-1)])]),_:1}),M(" Error Details - Row "+K(c.value?.row),1)]),_:1}),l(X,null,{default:u(()=>[l(z,null,{default:u(()=>[l(ee,{cols:"12"},{default:u(()=>[v("div",R6e,[te[25]||(te[25]=v("strong",null,"Error Message:",-1)),l(Z,{color:"error",variant:"outlined",class:"ml-2"},{default:u(()=>[M(K(c.value?.error),1)]),_:1})]),v("div",N6e,[te[26]||(te[26]=v("strong",null,"Patient Data:",-1)),l(Q,{variant:"outlined",class:"mt-2 pa-3"},{default:u(()=>[v("pre",V6e,K(JSON.stringify(c.value?.patientData,null,2)),1)]),_:1})]),c.value?.importInfo?(U(),me("div",L6e,[te[28]||(te[28]=v("strong",null,"Import Information:",-1)),v("div",M6e,[l(Z,{color:"info",variant:"outlined",class:"mr-2"},{default:u(()=>[M(" Source: "+K(c.value.importInfo.source),1)]),_:1}),c.value.importInfo.importID?(U(),pe(Z,{key:0,color:"secondary",variant:"outlined"},{default:u(()=>[M(" ID: "+K(c.value.importInfo.importID),1)]),_:1})):(U(),pe(Z,{key:1,color:"warning",variant:"outlined"},{default:u(()=>[...te[27]||(te[27]=[M(" No Import ID ",-1)])]),_:1}))])])):ge("",!0),c.value?.formattedData?(U(),me("div",O6e,[te[29]||(te[29]=v("strong",null,"Formatted Data:",-1)),l(Z,{color:"primary",variant:"outlined",class:"ml-2"},{default:u(()=>[M(K(c.value.formattedData),1)]),_:1})])):ge("",!0)]),_:1})]),_:1})]),_:1}),l(Me,null,{default:u(()=>[l(Te),l(ce,{color:"primary",onClick:te[5]||(te[5]=Re=>i.value=!1)},{default:u(()=>[...te[30]||(te[30]=[M(" Close ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}},$6e=Xt(H6e,[["__scopeId","data-v-6767bc22"]]),Q6e={class:"filter-container pa-3",style:{flex:"1 1 auto","overflow-y":"auto"}},G6e={class:"filter-field mb-3"},z6e={class:"filter-field mb-3"},K6e={key:0,class:"text-caption"},W6e={class:"filter-section mb-3"},j6e={class:"filter-section mb-3"},q6e={class:"d-flex justify-center mt-4 mb-2"},Y6e={class:"d-flex justify-center"},X6e={__name:"ResearchFilter",props:{modelValueDiagnosis:{type:String,default:null},modelValueMedicine:{type:String,default:null},modelValueDateFrom:{type:String,default:""},modelValueDateTo:{type:String,default:""},modelValuePatientName:{type:String,default:""},modelValueGender:{type:String,default:""},modelValueAgeGreaterThan:{type:[String,Number],default:""},modelValueAgeLessThan:{type:[String,Number],default:""},maxDate:{type:String,default:()=>Un()},isSearching:{type:Boolean,default:!1}},emits:["update:modelValueDiagnosis","update:modelValueMedicine","update:modelValueDateFrom","update:modelValueDateTo","update:modelValuePatientName","update:modelValueGender","update:modelValueAgeGreaterThan","update:modelValueAgeLessThan","filter-change","search","clear-filters"],setup(e,{emit:t}){const n=e,a=t,r=V(n.modelValueDiagnosis),s=V(n.modelValueMedicine),o=V(n.modelValueDateFrom),i=V(n.modelValueDateTo),c=V(n.modelValuePatientName),A=V(n.modelValueGender),d=V(n.modelValueAgeGreaterThan),f=V(n.modelValueAgeLessThan),m=V(""),h=V(""),p=V(""),y=V(""),g=V(""),w=V(""),b=V(""),x=V(""),T=V(""),F=V([]),k=V(!1),S=[{title:"Male",value:"Male"},{title:"Female",value:"Female"}],E=ae(()=>!!(m.value||h.value||p.value||y.value||g.value||w.value||b.value||x.value));Ke(()=>n.modelValueDiagnosis,ue=>{r.value=ue}),Ke(()=>n.modelValueMedicine,ue=>{s.value=ue}),Ke(()=>n.modelValueDateFrom,ue=>{o.value=ue}),Ke(()=>n.modelValueDateTo,ue=>{i.value=ue}),Ke(()=>n.modelValuePatientName,ue=>{c.value=ue}),Ke(()=>n.modelValueGender,ue=>{A.value=ue}),Ke(()=>n.modelValueAgeGreaterThan,ue=>{d.value=ue}),Ke(()=>n.modelValueAgeLessThan,ue=>{f.value=ue}),Ke(r,ue=>{a("update:modelValueDiagnosis",ue),D()}),Ke(s,ue=>{a("update:modelValueMedicine",ue),D()}),Ke(o,ue=>{a("update:modelValueDateFrom",ue),H(),ie(),D()}),Ke(i,ue=>{a("update:modelValueDateTo",ue),ie(),H(),D()}),Ke(c,ue=>{a("update:modelValuePatientName",ue),D()}),Ke(A,ue=>{a("update:modelValueGender",ue),D()}),Ke(d,ue=>{a("update:modelValueAgeGreaterThan",ue),Ae(),D()}),Ke(f,ue=>{a("update:modelValueAgeLessThan",ue),Ae(),D()});let C=null;const D=()=>{const ue=typeof s.value=="object"&&s.value!==null?s.value.productName:s.value;a("filter-change",{diagnosis:r.value,medicine:ue,dateFrom:o.value,dateTo:i.value,patientName:c.value,gender:A.value,ageGreaterThan:d.value,ageLessThan:f.value,hasErrors:E.value})},P=()=>{if(!E.value){const ue={diagnosis:r.value,medicine:s.value,dateFrom:o.value,dateTo:i.value,patientName:c.value,gender:A.value,ageGreaterThan:d.value,ageLessThan:f.value};console.log(" ResearchFilter: Starting search with filters"),a("search",ue)}},O=()=>{r.value=null,s.value=null,o.value="",i.value="",c.value="",A.value="",d.value="",f.value="",T.value="",m.value="",h.value="",p.value="",y.value="",g.value="",w.value="",b.value="",x.value="",a("clear-filters")},H=()=>{p.value="",o.value&&i.value&&o.value>i.value&&(p.value="From date cannot be after to date")},ie=()=>{y.value="",o.value&&i.value&&i.value<o.value&&(y.value="To date cannot be before from date")},Ae=()=>{b.value="",x.value="",d.value&&(isNaN(d.value)||d.value<0)&&(b.value="Please enter a valid age"),f.value&&(isNaN(f.value)||f.value<0)&&(x.value="Please enter a valid age"),d.value&&f.value&&parseInt(d.value)>=parseInt(f.value)&&(b.value='Must be less than "Age less than"',x.value='Must be greater than "Age greater than"')},j=ue=>{clearTimeout(C),C=setTimeout(()=>{J(ue)},300)},J=async ue=>{k.value=!0;try{const ne=await TH(ue);if(ne.error)F.value=[];else{const Y=ne.data||[];F.value=Y.filter(te=>te.isLocal===!0)}}catch(ne){console.error("Error fetching medicines:",ne),F.value=[]}finally{k.value=!1}};return(ue,ne)=>{const Y=I("v-card-text"),te=I("v-card"),L=I("v-text-field"),N=I("v-icon"),q=I("v-list-item"),Q=I("v-list-item-title"),ee=I("v-autocomplete"),z=I("v-col"),X=I("v-row"),le=I("v-select"),re=I("v-btn");return U(),pe(te,{color:"surfaceContainer",flat:"",style:{height:"100%",display:"flex","flex-direction":"column"}},{default:u(()=>[l(te,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(Y,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...ne[10]||(ne[10]=[v("span",{class:"text-body-2 font-weight-medium"},"Research Filters",-1)])]),_:1})]),_:1}),v("div",Q6e,[v("div",G6e,[l(L,{modelValue:r.value,"onUpdate:modelValue":ne[0]||(ne[0]=de=>r.value=de),label:"Diagnosis",placeholder:"Enter diagnosis name...",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":m.value,maxlength:"100"},null,8,["modelValue","error-messages"])]),v("div",z6e,[l(ee,{modelValue:s.value,"onUpdate:modelValue":ne[1]||(ne[1]=de=>s.value=de),search:T.value,"onUpdate:search":[ne[2]||(ne[2]=de=>T.value=de),j],items:F.value,loading:k.value,"item-title":"productName","item-value":"item","return-object":"",label:"Medicine",placeholder:"Search for medicine...",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":h.value},{item:u(({props:de,item:G})=>[l(q,Ue(de,{title:G.raw.productName}),{subtitle:u(()=>[G.raw.marketer?(U(),me("span",K6e,K(G.raw.marketer),1)):ge("",!0)]),append:u(()=>[l(N,null,{default:u(()=>[...ne[11]||(ne[11]=[v("img",{src:Zd,alt:"Saved Medicine"},null,-1)])]),_:1})]),_:2},1040,["title"])]),"no-data":u(()=>[T.value&&T.value.length>=3?(U(),pe(q,{key:0},{default:u(()=>[l(Q,null,{default:u(()=>[M('No medicines found matching "'+K(T.value)+'"',1)]),_:1})]),_:1})):(U(),pe(q,{key:1},{default:u(()=>[l(Q,null,{default:u(()=>[...ne[12]||(ne[12]=[M("Type at least 3 characters to search",-1)])]),_:1})]),_:1}))]),_:1},8,["modelValue","search","items","loading","error-messages"])]),v("div",W6e,[ne[13]||(ne[13]=v("div",{class:"filter-section-label mb-2"},"Date Range",-1)),l(X,{dense:""},{default:u(()=>[l(z,{cols:"6"},{default:u(()=>[l(L,{modelValue:o.value,"onUpdate:modelValue":ne[3]||(ne[3]=de=>o.value=de),type:"date",label:"From Date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input date-input",max:i.value||e.maxDate,"error-messages":p.value,onInput:H,onClick:ne[4]||(ne[4]=de=>de.target.showPicker&&de.target.showPicker())},null,8,["modelValue","max","error-messages"])]),_:1}),l(z,{cols:"6"},{default:u(()=>[l(L,{modelValue:i.value,"onUpdate:modelValue":ne[5]||(ne[5]=de=>i.value=de),type:"date",label:"To Date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input date-input",min:o.value,max:e.maxDate,"error-messages":y.value,onInput:ie,onClick:ne[6]||(ne[6]=de=>de.target.showPicker&&de.target.showPicker())},null,8,["modelValue","min","max","error-messages"])]),_:1})]),_:1})]),v("div",j6e,[ne[14]||(ne[14]=v("div",{class:"filter-section-label mb-2"},"Demographics",-1)),l(le,{modelValue:A.value,"onUpdate:modelValue":ne[7]||(ne[7]=de=>A.value=de),items:S,label:"Gender",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input mb-2","error-messages":w.value},null,8,["modelValue","error-messages"]),l(X,{dense:""},{default:u(()=>[l(z,{cols:"6"},{default:u(()=>[l(L,{modelValue:d.value,"onUpdate:modelValue":ne[8]||(ne[8]=de=>d.value=de),type:"number",label:"Age >",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":b.value,min:"0",max:"150"},null,8,["modelValue","error-messages"])]),_:1}),l(z,{cols:"6"},{default:u(()=>[l(L,{modelValue:f.value,"onUpdate:modelValue":ne[9]||(ne[9]=de=>f.value=de),type:"number",label:"Age <",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":x.value,min:"0",max:"150"},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),v("div",q6e,[l(re,{color:"primary",size:"small","prepend-icon":"mdi-database-search",onClick:P,loading:e.isSearching,disabled:E.value,class:"filter-button"},{default:u(()=>[...ne[15]||(ne[15]=[M(" Search ",-1)])]),_:1},8,["loading","disabled"])]),v("div",Y6e,[l(re,{variant:"text",size:"small","prepend-icon":"mdi-filter-remove",onClick:O,class:"filter-button-clear"},{default:u(()=>[...ne[16]||(ne[16]=[M(" Clear ",-1)])]),_:1})])])]),_:1})}}},J6e=Xt(X6e,[["__scopeId","data-v-1e00cd36"]]),Z6e={class:"filter-container pa-3",style:{flex:"1 1 auto","overflow-y":"auto"}},e5e={class:"filter-field mb-3"},t5e={class:"filter-section mb-3"},n5e={class:"filter-section mb-3"},a5e={class:"d-flex justify-center mt-4 mb-2"},r5e={class:"d-flex justify-center"},s5e={__name:"ProcedureResearchFilter",props:{modelValueProcedureName:{type:String,default:""},modelValueDateFrom:{type:String,default:""},modelValueDateTo:{type:String,default:""},modelValueGender:{type:String,default:""},modelValueAgeGreaterThan:{type:[String,Number],default:""},modelValueAgeLessThan:{type:[String,Number],default:""},maxDate:{type:String,default:()=>Un()},isSearching:{type:Boolean,default:!1}},emits:["update:modelValueProcedureName","update:modelValueDateFrom","update:modelValueDateTo","update:modelValueGender","update:modelValueAgeGreaterThan","update:modelValueAgeLessThan","filter-change","search","clear-filters"],setup(e,{emit:t}){const n=e,a=t,r=V(n.modelValueProcedureName||""),s=V(n.modelValueDateFrom||""),o=V(n.modelValueDateTo||""),i=V(n.modelValueGender||""),c=V(n.modelValueAgeGreaterThan||""),A=V(n.modelValueAgeLessThan||""),d=V(""),f=V(""),m=V(""),h=V(""),p=V(""),y=V(""),g=[{title:"Male",value:"Male"},{title:"Female",value:"Female"}],w=ae(()=>!!(d.value||f.value||m.value||h.value||p.value||y.value)),b=()=>{f.value="",s.value&&o.value&&s.value>o.value&&(f.value="From date cannot be after To date"),s.value&&n.maxDate&&s.value>n.maxDate&&(f.value="From date cannot be in the future")},x=()=>{m.value="",s.value&&o.value&&o.value<s.value&&(m.value="To date cannot be before From date"),o.value&&n.maxDate&&o.value>n.maxDate&&(m.value="To date cannot be in the future")},T=()=>{p.value="",y.value="";const E=parseInt(c.value),C=parseInt(A.value);c.value&&(isNaN(E)||E<0||E>150)&&(p.value="Age must be between 0 and 150"),A.value&&(isNaN(C)||C<0||C>150)&&(y.value="Age must be between 0 and 150"),c.value&&A.value&&E>=C&&(p.value='Must be less than "Age Less Than"',y.value='Must be greater than "Age Greater Than"')},F=Qn.debounce(()=>{const E={procedureName:r.value,dateFrom:s.value,dateTo:o.value,gender:i.value,ageGreaterThan:c.value,ageLessThan:A.value};a("filter-change",E)},300);Ke(()=>n.modelValueProcedureName,E=>{E!==r.value&&(r.value=E||"")}),Ke(()=>n.modelValueDateFrom,E=>{E!==s.value&&(s.value=E||"")}),Ke(()=>n.modelValueDateTo,E=>{E!==o.value&&(o.value=E||"")}),Ke(()=>n.modelValueGender,E=>{E!==i.value&&(i.value=E||"")}),Ke(()=>n.modelValueAgeGreaterThan,E=>{E!==c.value&&(c.value=E||"")}),Ke(()=>n.modelValueAgeLessThan,E=>{E!==A.value&&(A.value=E||"")}),Ke(r,E=>{a("update:modelValueProcedureName",E),F()}),Ke(s,E=>{a("update:modelValueDateFrom",E),b(),x(),F()}),Ke(o,E=>{a("update:modelValueDateTo",E),x(),b(),F()}),Ke(i,E=>{a("update:modelValueGender",E),F()}),Ke(c,E=>{a("update:modelValueAgeGreaterThan",E),T(),F()}),Ke(A,E=>{a("update:modelValueAgeLessThan",E),T(),F()});const k=async()=>{if(b(),x(),T(),await xn(),w.value){console.log(" Cannot search: validation errors present");return}const E={procedureName:r.value,dateFrom:s.value,dateTo:o.value,gender:i.value,ageGreaterThan:c.value,ageLessThan:A.value};console.log(" Procedure research search triggered with filters:",E),a("search",E)},S=()=>{r.value="",s.value="",o.value="",i.value="",c.value="",A.value="",d.value="",f.value="",m.value="",h.value="",p.value="",y.value="",a("clear-filters")};return(E,C)=>{const D=I("v-card-text"),P=I("v-card"),O=I("v-text-field"),H=I("v-col"),ie=I("v-row"),Ae=I("v-select"),j=I("v-btn");return U(),pe(P,{color:"surfaceContainer",flat:"",style:{height:"100%",display:"flex","flex-direction":"column"}},{default:u(()=>[l(P,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(D,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...C[8]||(C[8]=[v("span",{class:"text-body-2 font-weight-medium"},"Procedure Research Filters",-1)])]),_:1})]),_:1}),v("div",Z6e,[v("div",e5e,[l(O,{modelValue:r.value,"onUpdate:modelValue":C[0]||(C[0]=J=>r.value=J),label:"Procedure Name",placeholder:"Enter procedure name...",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":d.value,maxlength:"100"},null,8,["modelValue","error-messages"])]),v("div",t5e,[C[9]||(C[9]=v("div",{class:"filter-section-label mb-2"},"Date Range",-1)),l(ie,{dense:""},{default:u(()=>[l(H,{cols:"6"},{default:u(()=>[l(O,{modelValue:s.value,"onUpdate:modelValue":C[1]||(C[1]=J=>s.value=J),type:"date",label:"From Date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input date-input",max:o.value||e.maxDate,"error-messages":f.value,onInput:b,onClick:C[2]||(C[2]=J=>J.target.showPicker&&J.target.showPicker())},null,8,["modelValue","max","error-messages"])]),_:1}),l(H,{cols:"6"},{default:u(()=>[l(O,{modelValue:o.value,"onUpdate:modelValue":C[3]||(C[3]=J=>o.value=J),type:"date",label:"To Date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input date-input",min:s.value,max:e.maxDate,"error-messages":m.value,onInput:x,onClick:C[4]||(C[4]=J=>J.target.showPicker&&J.target.showPicker())},null,8,["modelValue","min","max","error-messages"])]),_:1})]),_:1})]),v("div",n5e,[C[10]||(C[10]=v("div",{class:"filter-section-label mb-2"},"Demographics",-1)),l(Ae,{modelValue:i.value,"onUpdate:modelValue":C[5]||(C[5]=J=>i.value=J),items:g,label:"Gender",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input mb-2","error-messages":h.value},null,8,["modelValue","error-messages"]),l(ie,{dense:""},{default:u(()=>[l(H,{cols:"6"},{default:u(()=>[l(O,{modelValue:c.value,"onUpdate:modelValue":C[6]||(C[6]=J=>c.value=J),type:"number",label:"Age >",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":p.value,min:"0",max:"150"},null,8,["modelValue","error-messages"])]),_:1}),l(H,{cols:"6"},{default:u(()=>[l(O,{modelValue:A.value,"onUpdate:modelValue":C[7]||(C[7]=J=>A.value=J),type:"number",label:"Age <",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":y.value,min:"0",max:"150"},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),v("div",a5e,[l(j,{color:"primary",size:"small","prepend-icon":"mdi-database-search",onClick:k,loading:e.isSearching,disabled:w.value,class:"filter-button"},{default:u(()=>[...C[11]||(C[11]=[M(" Search ",-1)])]),_:1},8,["loading","disabled"])]),v("div",r5e,[l(j,{variant:"text",size:"small","prepend-icon":"mdi-filter-remove",onClick:S,class:"filter-button-clear"},{default:u(()=>[...C[12]||(C[12]=[M(" Clear ",-1)])]),_:1})])])]),_:1})}}},o5e=Xt(s5e,[["__scopeId","data-v-1d811a88"]]),i5e={class:"scrollable-content"},l5e={class:"scrollable-content"},u5e={key:0,class:"text-medium-emphasis ml-2"},c5e={key:1},d5e={class:"text-center"},A5e={class:"text-center"},f5e={class:"text-body-2 text-medium-emphasis mb-4"},m5e={class:"text-center"},v5e={class:"text-h4"},h5e={class:"text-h4"},p5e={class:"text-h4"},g5e={class:"text-h4"},y5e={class:"d-flex align-center"},_5e={class:"mr-2 text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},w5e={class:"text-caption text-medium-emphasis"},b5e={key:0,class:"text-body-2 mb-1"},x5e={key:1,class:"text-body-2"},C5e={class:"scrollable-content"},S5e={class:"scrollable-content"},E5e={key:0,class:"text-medium-emphasis ml-2"},B5e={key:1},k5e={class:"text-center"},T5e={class:"text-center"},I5e={class:"text-body-2 text-medium-emphasis mb-4"},F5e={class:"text-center"},P5e={class:"text-h4"},D5e={class:"text-h4"},U5e={class:"text-h4"},R5e={class:"text-h4"},N5e={class:"d-flex align-center"},V5e={class:"mr-2 text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},L5e={class:"text-caption text-medium-emphasis"},M5e={key:0,class:"text-body-2 mb-1"},O5e={__name:"research-page",setup(e){const{showSnackbar:t}=ra(),n=Rn(),a=V(0);zf();const r=Al(),s=V(null),o=ae(()=>Un()),i=V([{title:"Consultations",disabled:!1},{title:"Procedures",disabled:!1}]),c=V({diagnosis:null,medicine:null,dateFrom:"",dateTo:"",patientName:"",gender:"",ageGreaterThan:"",ageLessThan:""}),A=V({procedureName:"",dateFrom:"",dateTo:"",gender:"",ageGreaterThan:"",ageLessThan:""}),d=ae(()=>n.state.researchModule.searchResults),f=ae(()=>n.state.researchModule.isLoading),m=ae(()=>n.state.researchModule.hasSearched),h=ae(()=>n.state.researchModule.searchError),p=ae(()=>n.getters["researchModule/searchSummary"]),y=ae(()=>n.getters["researchModule/hasActiveFilters"]),g=ae(()=>n.getters["researchModule/activeFiltersText"]),w=ae(()=>d.value.length?new Set(d.value.map(X=>X.patientId)).size:0),b=ae(()=>d.value.length?new Set(d.value.filter(X=>X.diagnosis).map(X=>X.diagnosis)).size:0),x=ae(()=>{if(!d.value.length)return 0;const z=new Set;return d.value.forEach(X=>{X.medicines&&Array.isArray(X.medicines)&&X.medicines.forEach(le=>z.add(le.productName))}),z.size}),T=ae(()=>d.value.length),F=ae(()=>n.state.procedureResearchModule.searchResults),k=ae(()=>n.state.procedureResearchModule.isLoading),S=ae(()=>n.state.procedureResearchModule.hasSearched),E=ae(()=>n.state.procedureResearchModule.searchError),C=ae(()=>n.getters["procedureResearchModule/searchSummary"]),D=ae(()=>n.getters["procedureResearchModule/hasActiveFilters"]),P=ae(()=>n.getters["procedureResearchModule/activeFiltersText"]),O=ae(()=>F.value.length?new Set(F.value.map(X=>X.patientId)).size:0),H=ae(()=>F.value.length?new Set(F.value.filter(X=>X.procedureName).map(X=>X.procedureName)).size:0),ie=ae(()=>F.value.length?new Set(F.value.filter(X=>X.treatmentPlanId).map(X=>X.treatmentPlanId)).size:0),Ae=ae(()=>F.value.length);un(()=>{try{const z=n.state.researchModule.filters;c.value={...z};const X=n.state.procedureResearchModule?.filters||{};A.value={...A.value,...X},m.value&&d.value.length>0?(console.log(" Restored previous consultation research search:",d.value.length,"results"),t({message:`Restored previous search: ${d.value.length} results`,color:"success",timeout:3e3})):y.value&&!m.value&&console.log(" Active consultation filters found, ready to search"),S.value&&F.value.length>0?console.log(" Restored previous procedure research search:",F.value.length,"results"):D.value&&!S.value&&console.log(" Active procedure filters found, ready to search")}catch(z){console.error("Error setting up research page:",z),s.value="Failed to initialize research page"}});const j=async z=>{if(f.value){console.log(" Search in progress, skipping filter update");return}try{c.value={...c.value,...z},await n.dispatch("researchModule/updateFilters",{filters:c.value}),console.log(" Research filters updated:",c.value)}catch(X){console.error("Error updating filters:",X),s.value="Failed to update search filters"}},J=async(z=null)=>{if(f.value){console.log(" Search already in progress, skipping duplicate request");return}try{console.log(" Starting research search...");const X=z||c.value;await n.dispatch("researchModule/updateFilters",{filters:X});const le=await n.dispatch("researchModule/performSearch");le.success?t({message:`Found ${le.data.length} research results`,color:"success",timeout:3e3}):t({message:le.error?.message||"Search failed",color:"error",timeout:5e3})}catch(X){console.error(" Search failed:",X),t({message:X.message||"Failed to perform search",color:"error",timeout:5e3})}},ue=async()=>{await J()},ne=async()=>{if(f.value){console.log(" Search in progress, skipping filter clear");return}try{c.value={diagnosis:null,medicine:null,dateFrom:"",dateTo:"",patientName:"",gender:"",ageGreaterThan:"",ageLessThan:""},await n.dispatch("researchModule/clearAll"),t({message:"All filters and results cleared",color:"success",timeout:3e3})}catch(z){console.error("Error clearing filters:",z),s.value="Failed to clear filters"}},Y=z=>{try{if(!z.patientId)throw new Error("Invalid patient ID");r.push({path:`/patients/${z.patientId}`,query:{from:"research"}})}catch(X){console.error("Error navigating to patient:",X),t({message:"Failed to open patient details",color:"error",timeout:5e3})}},te=async z=>{if(k.value){console.log(" Procedure search in progress, skipping filter update");return}try{A.value={...A.value,...z},await n.dispatch("procedureResearchModule/updateFilters",{filters:A.value}),console.log(" Procedure filters updated:",A.value)}catch(X){console.error("Error updating procedure filters:",X),s.value="Failed to update procedure search filters"}},L=async(z=null)=>{if(k.value){console.log(" Procedure search already in progress, skipping duplicate request");return}try{console.log(" Starting procedure research search...");const X=z||A.value;await n.dispatch("procedureResearchModule/updateFilters",{filters:X});const le=await n.dispatch("procedureResearchModule/performSearch");le.success?t({message:`Found ${le.data.length} procedure results`,color:"success",timeout:3e3}):t({message:le.error?.message||"Procedure search failed",color:"error",timeout:5e3})}catch(X){console.error(" Procedure search failed:",X),t({message:X.message||"Failed to perform procedure search",color:"error",timeout:5e3})}},N=async()=>{await L()},q=async()=>{if(k.value){console.log(" Procedure search in progress, skipping filter clear");return}try{A.value={procedureName:"",dateFrom:"",dateTo:"",gender:"",ageGreaterThan:"",ageLessThan:""},await n.dispatch("procedureResearchModule/clearAll"),t({message:"All procedure filters and results cleared",color:"success",timeout:3e3})}catch(z){console.error("Error clearing procedure filters:",z),s.value="Failed to clear procedure filters"}},Q=z=>{try{if(!z.patientId)throw new Error("Invalid patient ID");r.push({path:`/patients/${z.patientId}`,query:{from:"research"}})}catch(X){console.error("Error navigating to patient from procedure result:",X),t({message:"Failed to open patient details",color:"error",timeout:5e3})}},ee=z=>{if(!z)return"";try{return new Date(z).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return z}};return(z,X)=>{const le=I("v-alert"),re=I("v-tab"),de=I("v-tabs"),G=I("v-card"),Z=I("v-col"),ce=I("v-row"),Se=I("v-card-text"),Pe=I("v-progress-circular"),ye=I("v-icon"),Ce=I("v-btn"),_e=I("v-empty-state"),De=I("v-chip"),xe=I("v-card-title"),Te=I("v-lazy"),Me=I("v-window-item"),et=I("v-window"),lt=I("v-main");return U(),pe(lt,null,{default:u(()=>[l(Bn,{feature:"research"},{default:u(()=>[s.value?(U(),pe(le,{key:0,type:"error",dismissible:"","onClick:close":X[0]||(X[0]=Re=>s.value=null),class:"ma-3"},{default:u(()=>[M(K(s.value),1)]),_:1})):ge("",!0),l(ce,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[l(Z,{cols:"12"},{default:u(()=>[l(G,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center"},{default:u(()=>[l(de,{modelValue:a.value,"onUpdate:modelValue":X[1]||(X[1]=Re=>a.value=Re),color:"primary","align-tabs":"start",class:"w-100"},{default:u(()=>[(U(!0),me(We,null,qt(i.value,(Re,Le)=>(U(),pe(re,{key:Le,value:Le,disabled:Re.disabled},{default:u(()=>[M(K(Re.title),1)]),_:2},1032,["value","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(et,{modelValue:a.value,"onUpdate:modelValue":X[16]||(X[16]=Re=>a.value=Re),class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[l(Me,{value:0,style:{height:"100%"}},{default:u(()=>[l(ce,{"aria-label":"research row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[l(Z,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[v("div",i5e,[l(J6e,{"model-value-diagnosis":c.value.diagnosis,"onUpdate:modelValueDiagnosis":X[2]||(X[2]=Re=>c.value.diagnosis=Re),"model-value-medicine":c.value.medicine,"onUpdate:modelValueMedicine":X[3]||(X[3]=Re=>c.value.medicine=Re),"model-value-date-from":c.value.dateFrom,"onUpdate:modelValueDateFrom":X[4]||(X[4]=Re=>c.value.dateFrom=Re),"model-value-date-to":c.value.dateTo,"onUpdate:modelValueDateTo":X[5]||(X[5]=Re=>c.value.dateTo=Re),"model-value-patient-name":c.value.patientName,"onUpdate:modelValuePatientName":X[6]||(X[6]=Re=>c.value.patientName=Re),"model-value-gender":c.value.gender,"onUpdate:modelValueGender":X[7]||(X[7]=Re=>c.value.gender=Re),"model-value-age-greater-than":c.value.ageGreaterThan,"onUpdate:modelValueAgeGreaterThan":X[8]||(X[8]=Re=>c.value.ageGreaterThan=Re),"model-value-age-less-than":c.value.ageLessThan,"onUpdate:modelValueAgeLessThan":X[9]||(X[9]=Re=>c.value.ageLessThan=Re),"max-date":o.value,"is-searching":f.value,onFilterChange:j,onSearch:J,onClearFilters:ne},null,8,["model-value-diagnosis","model-value-medicine","model-value-date-from","model-value-date-to","model-value-patient-name","model-value-gender","model-value-age-greater-than","model-value-age-less-than","max-date","is-searching"])])]),_:1}),l(Z,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[v("div",l5e,[l(G,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[l(G,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(Se,{class:"pt-2 pb-0"},{default:u(()=>[p.value&&p.value.totalResults>0?(U(),me(We,{key:0},[v("strong",null,K(p.value.totalResults),1),M(" research result"+K(p.value.totalResults!==1?"s":"")+" found ",1),g.value?(U(),me("span",u5e,"  "+K(g.value),1)):ge("",!0)],64)):(U(),me("strong",c5e,"Research Data Search"))]),_:1})]),_:1}),f.value?(U(),pe(ce,{key:0,"no-gutters":""},{default:u(()=>[l(Z,{cols:"12",class:"d-flex justify-center align-center",style:{height:"calc(100vh - 280px)"}},{default:u(()=>[v("div",d5e,[l(Pe,{indeterminate:"",size:"64",color:"primary"}),X[17]||(X[17]=v("div",{class:"mt-4 text-subtitle-1"},"Searching Research Data...",-1))])]),_:1})]),_:1})):h.value?(U(),pe(ce,{key:1,"no-gutters":""},{default:u(()=>[l(Z,{cols:"12",class:"d-flex justify-center align-center",style:{height:"calc(100vh - 280px)"}},{default:u(()=>[v("div",A5e,[l(ye,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...X[18]||(X[18]=[M("mdi-alert-circle",-1)])]),_:1}),X[20]||(X[20]=v("div",{class:"text-h6 mb-2"},"Search Failed",-1)),v("div",f5e,K(h.value),1),l(Ce,{color:"primary",onClick:ue,"prepend-icon":"mdi-refresh",loading:f.value,disabled:f.value},{default:u(()=>[...X[19]||(X[19]=[M(" Try Again ",-1)])]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})):d.value&&d.value.length===0&&m.value?(U(),pe(_e,{key:2,image:$e(Kv),class:"d-flex justify-center"},{title:u(()=>[...X[21]||(X[21]=[v("div",{class:"text-subtitle-2 mt-8 text-center"}," No Research Data Found ",-1)])]),text:u(()=>[...X[22]||(X[22]=[v("div",{class:"text-caption text-center"}," Try adjusting your search criteria or clear filters to see all data ",-1)])]),actions:u(()=>[l(Ce,{color:"primary",variant:"outlined",onClick:ne,"prepend-icon":"mdi-filter-remove",loading:f.value,disabled:f.value},{default:u(()=>[...X[23]||(X[23]=[M(" Clear Filters ",-1)])]),_:1},8,["loading","disabled"])]),_:1},8,["image"])):m.value?d.value&&d.value.length>0?(U(),me(We,{key:4},[l(ce,{class:"mb-1 pa-1"},{default:u(()=>[l(Z,{cols:"3"},{default:u(()=>[l(G,{color:"primary",variant:"tonal"},{default:u(()=>[l(Se,{class:"text-center"},{default:u(()=>[v("div",v5e,K(w.value),1),X[27]||(X[27]=v("div",{class:"text-caption"},"Unique Patients",-1))]),_:1})]),_:1})]),_:1}),l(Z,{cols:"3"},{default:u(()=>[l(G,{color:"success",variant:"tonal"},{default:u(()=>[l(Se,{class:"text-center"},{default:u(()=>[v("div",h5e,K(b.value),1),X[28]||(X[28]=v("div",{class:"text-caption"},"Unique Diagnoses",-1))]),_:1})]),_:1})]),_:1}),l(Z,{cols:"3"},{default:u(()=>[l(G,{color:"info",variant:"tonal"},{default:u(()=>[l(Se,{class:"text-center"},{default:u(()=>[v("div",p5e,K(x.value),1),X[29]||(X[29]=v("div",{class:"text-caption"},"Unique Medicines",-1))]),_:1})]),_:1})]),_:1}),l(Z,{cols:"3"},{default:u(()=>[l(G,{color:"warning",variant:"tonal"},{default:u(()=>[l(Se,{class:"text-center"},{default:u(()=>[v("div",g5e,K(T.value),1),X[30]||(X[30]=v("div",{class:"text-caption"},"Total Consultations",-1))]),_:1})]),_:1})]),_:1})]),_:1}),l(ce,{"no-gutters":""},{default:u(()=>[l(Z,{cols:"12",class:"scroll-element",style:{"padding-bottom":"40px"}},{default:u(()=>[(U(!0),me(We,null,qt(d.value,Re=>(U(),pe(Te,{key:`${Re.patientId}-${Re.consultationId}`,options:{threshold:.1,rootMargin:"50px"},"min-height":"50"},{default:u(()=>[l(G,{style:Rt([{textAlign:"left"},{cursor:"pointer"}]),density:"compact",class:"mb-1 mx-2 card-enhanced card-status-default card-hover-base",rounded:"lg",onClick:Le=>Y(Re)},{default:u(()=>[l(ce,{"no-gutters":""},{default:u(()=>[l(Z,{cols:"12"},{default:u(()=>[l(xe,{class:"d-flex align-center justify-space-between pb-2 pt-2"},{default:u(()=>[v("div",y5e,[v("span",_5e,K(Re.patientName||"Unknown Patient"),1),Re.patientGender&&Re.patientGender!==""?(U(),pe(De,{key:0,color:"primary","text-color":"black",size:"small",class:"mr-1"},{default:u(()=>[M(K(Re.patientGender),1)]),_:2},1024)):ge("",!0),Re.patientAge&&Re.patientAge!==""?(U(),pe(De,{key:1,color:"primary","text-color":"black",size:"small",class:"mr-1"},{default:u(()=>[M(K(Re.patientAge?`${Re.patientAge} yrs`:""),1)]),_:2},1024)):ge("",!0)]),v("div",w5e,K(ee(Re.consultationDate)),1)]),_:2},1024),l(Se,{class:"pt-0 pb-1"},{default:u(()=>[l(ce,{dense:""},{default:u(()=>[l(Z,{cols:"12"},{default:u(()=>[Re.diagnosis?(U(),me("div",b5e,[X[31]||(X[31]=v("strong",null,"Diagnosis:",-1)),M(" "+K(Re.diagnosis),1)])):ge("",!0),Re.medicines&&Re.medicines.length>0?(U(),me("div",x5e,[X[32]||(X[32]=v("strong",null,"Medicines:",-1)),M(" "+K(Re.medicines.map(Le=>Le.productName).join(", ")),1)])):ge("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),_:1})],64)):ge("",!0):(U(),pe(ce,{key:3,"no-gutters":""},{default:u(()=>[l(Z,{cols:"12",class:"d-flex justify-center align-center",style:{height:"calc(100vh - 280px)"}},{default:u(()=>[v("div",m5e,[l(ye,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...X[24]||(X[24]=[M("mdi-database-search",-1)])]),_:1}),X[25]||(X[25]=v("div",{class:"text-h6 mb-2"},"Search for Research Data",-1)),X[26]||(X[26]=v("div",{class:"text-body-2 text-medium-emphasis"},"Use the filters on the left to search based on diagnosis, medicines, and dates",-1))])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1})]),_:1}),l(Me,{value:1,style:{height:"100%"}},{default:u(()=>[l(ce,{"aria-label":"procedure research row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[l(Z,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[v("div",C5e,[l(o5e,{"model-value-procedure-name":A.value.procedureName,"onUpdate:modelValueProcedureName":X[10]||(X[10]=Re=>A.value.procedureName=Re),"model-value-date-from":A.value.dateFrom,"onUpdate:modelValueDateFrom":X[11]||(X[11]=Re=>A.value.dateFrom=Re),"model-value-date-to":A.value.dateTo,"onUpdate:modelValueDateTo":X[12]||(X[12]=Re=>A.value.dateTo=Re),"model-value-gender":A.value.gender,"onUpdate:modelValueGender":X[13]||(X[13]=Re=>A.value.gender=Re),"model-value-age-greater-than":A.value.ageGreaterThan,"onUpdate:modelValueAgeGreaterThan":X[14]||(X[14]=Re=>A.value.ageGreaterThan=Re),"model-value-age-less-than":A.value.ageLessThan,"onUpdate:modelValueAgeLessThan":X[15]||(X[15]=Re=>A.value.ageLessThan=Re),"max-date":o.value,"is-searching":k.value,onFilterChange:te,onSearch:L,onClearFilters:q},null,8,["model-value-procedure-name","model-value-date-from","model-value-date-to","model-value-gender","model-value-age-greater-than","model-value-age-less-than","max-date","is-searching"])])]),_:1}),l(Z,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[v("div",S5e,[l(G,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[l(G,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(Se,{class:"pt-2 pb-0"},{default:u(()=>[C.value&&C.value.totalResults>0?(U(),me(We,{key:0},[v("strong",null,K(C.value.totalResults),1),M(" procedure result"+K(C.value.totalResults!==1?"s":"")+" found ",1),P.value?(U(),me("span",E5e,"  "+K(P.value),1)):ge("",!0)],64)):(U(),me("strong",B5e,"Procedure Research Search"))]),_:1})]),_:1}),k.value?(U(),pe(ce,{key:0,"no-gutters":""},{default:u(()=>[l(Z,{cols:"12",class:"d-flex justify-center align-center",style:{height:"calc(100vh - 280px)"}},{default:u(()=>[v("div",k5e,[l(Pe,{indeterminate:"",size:"64",color:"primary"}),X[33]||(X[33]=v("div",{class:"mt-4 text-subtitle-1"},"Searching Procedure Data...",-1))])]),_:1})]),_:1})):E.value?(U(),pe(ce,{key:1,"no-gutters":""},{default:u(()=>[l(Z,{cols:"12",class:"d-flex justify-center align-center",style:{height:"calc(100vh - 280px)"}},{default:u(()=>[v("div",T5e,[l(ye,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...X[34]||(X[34]=[M("mdi-alert-circle",-1)])]),_:1}),X[36]||(X[36]=v("div",{class:"text-h6 mb-2"},"Search Failed",-1)),v("div",I5e,K(E.value),1),l(Ce,{color:"primary",onClick:N,"prepend-icon":"mdi-refresh",loading:k.value,disabled:k.value},{default:u(()=>[...X[35]||(X[35]=[M(" Try Again ",-1)])]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})):F.value&&F.value.length===0&&S.value?(U(),pe(_e,{key:2,image:$e(Kv),class:"d-flex justify-center"},{title:u(()=>[...X[37]||(X[37]=[v("div",{class:"text-subtitle-2 mt-8 text-center"}," No Procedure Data Found ",-1)])]),text:u(()=>[...X[38]||(X[38]=[v("div",{class:"text-caption text-center"}," Try adjusting your search criteria or clear filters to see all data ",-1)])]),actions:u(()=>[l(Ce,{color:"primary",variant:"outlined",onClick:q,"prepend-icon":"mdi-filter-remove",loading:k.value,disabled:k.value},{default:u(()=>[...X[39]||(X[39]=[M(" Clear Filters ",-1)])]),_:1},8,["loading","disabled"])]),_:1},8,["image"])):S.value?F.value&&F.value.length>0?(U(),me(We,{key:4},[l(ce,{class:"mb-1 pa-1"},{default:u(()=>[l(Z,{cols:"3"},{default:u(()=>[l(G,{color:"primary",variant:"tonal"},{default:u(()=>[l(Se,{class:"text-center"},{default:u(()=>[v("div",P5e,K(O.value),1),X[43]||(X[43]=v("div",{class:"text-caption"},"Unique Patients",-1))]),_:1})]),_:1})]),_:1}),l(Z,{cols:"3"},{default:u(()=>[l(G,{color:"success",variant:"tonal"},{default:u(()=>[l(Se,{class:"text-center"},{default:u(()=>[v("div",D5e,K(H.value),1),X[44]||(X[44]=v("div",{class:"text-caption"},"Unique Procedures",-1))]),_:1})]),_:1})]),_:1}),l(Z,{cols:"3"},{default:u(()=>[l(G,{color:"info",variant:"tonal"},{default:u(()=>[l(Se,{class:"text-center"},{default:u(()=>[v("div",U5e,K(ie.value),1),X[45]||(X[45]=v("div",{class:"text-caption"},"Treatment Plans",-1))]),_:1})]),_:1})]),_:1}),l(Z,{cols:"3"},{default:u(()=>[l(G,{color:"warning",variant:"tonal"},{default:u(()=>[l(Se,{class:"text-center"},{default:u(()=>[v("div",R5e,K(Ae.value),1),X[46]||(X[46]=v("div",{class:"text-caption"},"Total Records",-1))]),_:1})]),_:1})]),_:1})]),_:1}),l(ce,{"no-gutters":""},{default:u(()=>[l(Z,{cols:"12",class:"scroll-element",style:{"padding-bottom":"40px"}},{default:u(()=>[(U(!0),me(We,null,qt(F.value,Re=>(U(),pe(Te,{key:`${Re.patientId}-${Re.treatmentProcedureId}`,options:{threshold:.1,rootMargin:"50px"},"min-height":"50"},{default:u(()=>[l(G,{style:Rt([{textAlign:"left"},{cursor:"pointer"}]),density:"compact",class:"mb-1 mx-2 card-enhanced card-status-default card-hover-base",rounded:"lg",onClick:Le=>Q(Re)},{default:u(()=>[l(ce,{"no-gutters":""},{default:u(()=>[l(Z,{cols:"12"},{default:u(()=>[l(xe,{class:"d-flex align-center justify-space-between pb-2 pt-2"},{default:u(()=>[v("div",N5e,[v("span",V5e,K(Re.patientName||"Unknown Patient"),1),Re.patientGender&&Re.patientGender!==""?(U(),pe(De,{key:0,color:"primary","text-color":"black",size:"small",class:"mr-1"},{default:u(()=>[M(K(Re.patientGender),1)]),_:2},1024)):ge("",!0),Re.patientAge&&Re.patientAge!==""?(U(),pe(De,{key:1,color:"primary","text-color":"black",size:"small",class:"mr-1"},{default:u(()=>[M(K(Re.patientAge?`${Re.patientAge} yrs`:""),1)]),_:2},1024)):ge("",!0)]),v("div",L5e,K(ee(Re.procedureStartDate||Re.treatmentPlanCreatedAt)),1)]),_:2},1024),l(Se,{class:"pt-0 pb-1"},{default:u(()=>[l(ce,{dense:""},{default:u(()=>[l(Z,{cols:"12"},{default:u(()=>[Re.procedureName?(U(),me("div",M5e,[X[47]||(X[47]=v("strong",null,"Procedure:",-1)),M(" "+K(Re.procedureName),1)])):ge("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),_:1})],64)):ge("",!0):(U(),pe(ce,{key:3,"no-gutters":""},{default:u(()=>[l(Z,{cols:"12",class:"d-flex justify-center align-center",style:{height:"calc(100vh - 280px)"}},{default:u(()=>[v("div",F5e,[l(ye,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...X[40]||(X[40]=[M("mdi-database-search",-1)])]),_:1}),X[41]||(X[41]=v("div",{class:"text-h6 mb-2"},"Search for Procedure Data",-1)),X[42]||(X[42]=v("div",{class:"text-body-2 text-medium-emphasis"},"Use the filters on the left to search based on procedures, dates, and demographics",-1))])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}},H5e=Xt(O5e,[["__scopeId","data-v-a66dfcba"]]),$5e={class:"filter-container pa-3",style:{flex:"1 1 auto","overflow-y":"auto"}},Q5e={class:"filter-field mb-3"},G5e={class:"filter-field mb-3"},z5e={class:"filter-section mb-3"},K5e={class:"filter-field mb-3"},W5e={class:"d-flex justify-center mt-4 mb-2"},j5e={class:"d-flex justify-center"},q5e={__name:"ReminderFilter",props:{filters:{type:Object,default:()=>({})},isLoading:{type:Boolean,default:!1}},emits:["filter-change","search","clear-filters"],setup(e,{emit:t}){const n=e,a=t,r=V(n.filters?.reminderType||""),s=V(n.filters?.reminderStatus||""),o=V(n.filters?.dateFrom||""),i=V(n.filters?.dateTo||""),c=V(n.filters?.patientName||""),A=V(""),d=V(""),f=V(""),m=V(""),h=V(""),p=[{title:"All Types",value:""},{title:"Appointment",value:"appointment"},{title:"Consultation",value:"consultation"},{title:"Procedures",value:"procedures"}],y=[{title:"All Statuses",value:""},{title:"Pending",value:"pending"},{title:"Completed",value:"completed"}],g=ae(()=>!!(A.value||d.value||f.value||m.value||h.value)),w=()=>{f.value="",o.value&&i.value&&o.value>i.value&&(f.value="From date cannot be after To date")},b=()=>{m.value="",o.value&&i.value&&i.value<o.value&&(m.value="To date cannot be before From date")},x=()=>{h.value="",c.value&&c.value.length<2&&(h.value="Patient name must be at least 2 characters")};Ke(()=>n.filters,S=>{S&&(r.value=S.reminderType||"",s.value=S.reminderStatus||"",o.value=S.dateFrom||"",i.value=S.dateTo||"",c.value=S.patientName||"")},{deep:!0}),Ke(r,()=>{T()}),Ke(s,()=>{T()}),Ke(o,()=>{w(),b(),T()}),Ke(i,()=>{b(),w(),T()}),Ke(c,()=>{x(),T()});const T=()=>{const S={reminderType:r.value,reminderStatus:s.value,dateFrom:o.value,dateTo:i.value,patientName:c.value};a("filter-change",S)},F=async()=>{if(w(),b(),x(),await xn(),g.value){console.log(" Cannot search: validation errors present");return}const S={reminderType:r.value,reminderStatus:s.value,dateFrom:o.value,dateTo:i.value,patientName:c.value};console.log(" Reminder search triggered with filters:",S),a("search",S)},k=()=>{r.value="",s.value="",o.value="",i.value="",c.value="",A.value="",d.value="",f.value="",m.value="",h.value="",a("clear-filters")};return(S,E)=>{const C=I("v-card-text"),D=I("v-card"),P=I("v-select"),O=I("v-text-field"),H=I("v-col"),ie=I("v-row"),Ae=I("v-btn");return U(),pe(D,{color:"surfaceContainer",flat:"",style:{height:"100%",display:"flex","flex-direction":"column"}},{default:u(()=>[l(D,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(C,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...E[7]||(E[7]=[v("span",{class:"text-body-2 font-weight-medium"},"Filter Reminders",-1)])]),_:1})]),_:1}),v("div",$5e,[v("div",Q5e,[l(P,{modelValue:r.value,"onUpdate:modelValue":E[0]||(E[0]=j=>r.value=j),items:p,label:"Reminder Type",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":A.value},null,8,["modelValue","error-messages"])]),v("div",G5e,[l(P,{modelValue:s.value,"onUpdate:modelValue":E[1]||(E[1]=j=>s.value=j),items:y,label:"Reminder Status",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":d.value},null,8,["modelValue","error-messages"])]),v("div",z5e,[E[8]||(E[8]=v("div",{class:"filter-section-label mb-2"},"Date Range",-1)),l(ie,{dense:""},{default:u(()=>[l(H,{cols:"6"},{default:u(()=>[l(O,{modelValue:o.value,"onUpdate:modelValue":E[2]||(E[2]=j=>o.value=j),type:"date",label:"From Date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input date-input",max:i.value,"error-messages":f.value,onInput:w,onClick:E[3]||(E[3]=j=>j.target.showPicker&&j.target.showPicker())},null,8,["modelValue","max","error-messages"])]),_:1}),l(H,{cols:"6"},{default:u(()=>[l(O,{modelValue:i.value,"onUpdate:modelValue":E[4]||(E[4]=j=>i.value=j),type:"date",label:"To Date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input date-input",min:o.value,"error-messages":m.value,onInput:b,onClick:E[5]||(E[5]=j=>j.target.showPicker&&j.target.showPicker())},null,8,["modelValue","min","error-messages"])]),_:1})]),_:1})]),v("div",K5e,[l(O,{modelValue:c.value,"onUpdate:modelValue":E[6]||(E[6]=j=>c.value=j),label:"Patient Name",placeholder:"Enter patient name...",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input","error-messages":h.value,maxlength:"100"},null,8,["modelValue","error-messages"])]),v("div",W5e,[l(Ae,{color:"primary",size:"small","prepend-icon":"mdi-magnify",onClick:F,loading:e.isLoading,disabled:g.value,class:"filter-button"},{default:u(()=>[...E[9]||(E[9]=[M(" Search ",-1)])]),_:1},8,["loading","disabled"])]),v("div",j5e,[l(Ae,{variant:"text",size:"small","prepend-icon":"mdi-filter-remove",onClick:k,disabled:e.isLoading,class:"filter-button-clear"},{default:u(()=>[...E[10]||(E[10]=[M(" Clear ",-1)])]),_:1},8,["disabled"])]),l(D,{color:"info",variant:"tonal",class:"mt-4 pa-2",elevation:"0",rounded:"lg"},{default:u(()=>[...E[11]||(E[11]=[v("div",{class:"text-caption text-medium-emphasis mb-2"},[v("strong",null,"Default Search Windows:")],-1),v("div",{class:"text-caption"},[v("div",{class:"mb-1"},"Appointments: Next 7 days"),v("div",{class:"mb-1"},"Consultations: Next 30 days"),v("div",{class:"mb-1"},"Treatment Plans: Next 30 days")],-1)])]),_:1})])]),_:1})}}},Y5e=Xt(q5e,[["__scopeId","data-v-3c599c88"]]),X5e={class:"scrollable-content"},J5e={class:"scrollable-content"},Z5e={key:0,class:"text-medium-emphasis ml-2"},eMe={key:1},tMe={class:"text-center"},nMe={class:"text-center"},aMe={class:"text-body-2 text-medium-emphasis mb-4"},rMe={class:"text-caption text-center"},sMe={class:"text-center"},oMe={class:"text-caption text-center"},iMe={class:"d-flex align-center mb-1"},lMe={class:"d-flex align-center mb-1"},uMe={class:"d-flex align-center"},cMe={class:"text-h4"},dMe={class:"text-h4"},AMe={class:"text-h4"},fMe={class:"text-h4"},mMe={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},vMe={class:"d-flex align-center"},hMe={class:"text-body-2 font-weight-medium"},pMe={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},gMe={key:0,class:"text-body-2 text-medium-emphasis ml-2"},yMe={key:0,class:"text-body-2 text-medium-emphasis mt-1"},_Me={key:2,class:"text-body-2 text-medium-emphasis mt-1"},wMe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"18",height:"18"},bMe=["d"],xMe={__name:"tasks-page",setup(e){const{showSnackbar:t}=ra(),n=Rn(),a=V(0),r=V(null),s=ae(()=>n.state.reminderModule.searchResults),o=ae(()=>n.state.reminderModule.isLoading),i=ae(()=>n.state.reminderModule.hasSearched),c=ae(()=>n.state.reminderModule.searchError),A=ae(()=>n.state.reminderModule.filters),d=ae(()=>n.getters["reminderModule/hasActiveFilters"]),f=ae(()=>n.getters["reminderModule/uniquePatientsCount"]),m=ae(()=>n.getters["reminderModule/pendingRemindersCount"]),h=ae(()=>n.getters["reminderModule/completedRemindersCount"]),p=V([{title:"Reminders",disabled:!1}]);un(()=>{try{console.log("Tasks page initialized")}catch(E){console.error("Error setting up tasks page:",E),r.value="Failed to initialize tasks page"}});const y=E=>{const C=E.details?.patient_phone||E.details?.contactNumber||E.details?.contact_number;if(!C)return!1;const D=C.replace(/\D/g,"");return D.length===10||D.length===12&&D.startsWith("91")},g=async E=>{try{const C=n.getters["doctorModule/currentDoctor"];if(!C){t({message:"Please select a doctor first",color:"warning",timeout:5e3});return}if(!y(E)){t({message:"Patient contact number not available or invalid",color:"warning",timeout:5e3});return}E.sendingWhatsApp=!0,console.log(" Sending WhatsApp reminder for:",E.type,E.patientName);const D=await UTe(E,C);if(D.success)t({message:D.message||"WhatsApp reminder sent successfully",color:"success",timeout:3e3});else throw new Error(D.error||"Failed to send WhatsApp reminder")}catch(C){console.error(" WhatsApp reminder failed:",C),t({message:C.message||"Failed to send WhatsApp reminder",color:"error",timeout:5e3})}finally{E&&(E.sendingWhatsApp=!1)}},w=async E=>{try{await n.dispatch("reminderModule/updateFilters",{filters:E}),console.log(" Reminder filters updated via store:",E)}catch(C){console.error("Error updating filters:",C),r.value="Failed to update search filters"}},b=async(E=null)=>{try{if(E&&await n.dispatch("reminderModule/updateFilters",{filters:E}),!n.state.doctorModule?.doctorId){t({message:"Please select a doctor first to search reminders",color:"warning",timeout:5e3});return}console.log(" Starting reminder search...");const D=await n.dispatch("reminderModule/performSearch");if(D.success){const P=D.data.length;let O=`Found ${P} reminder${P!==1?"s":""}`;D.partialErrors?.length>0?(O+=` (${D.partialErrors.length} source${D.partialErrors.length!==1?"s":""} failed)`,t({message:O,color:"warning",timeout:5e3})):t({message:O,color:"success",timeout:3e3})}else throw new Error(D.error?.message||"Search failed")}catch(C){console.error(" Search failed:",C),t({message:C.message||"Failed to search reminders",color:"error",timeout:5e3})}},x=()=>{F(),setTimeout(()=>{b()},100)},T=async()=>{await b()},F=async()=>{try{await n.dispatch("reminderModule/clearAll"),t({message:"All filters and results cleared",color:"success",timeout:3e3})}catch(E){console.error("Error clearing filters:",E),r.value="Failed to clear filters"}},k=async E=>{try{const C=!E.details.isReminded,D=C?"reminded":"not reminded";console.log(` Toggling reminder status to: ${D}`,E),console.log(" Reminder details:",E.details),t({message:`Marking reminder as ${D}...`,color:"info",timeout:2e3}),await new Promise(O=>requestAnimationFrame(O));const P=await n.dispatch("reminderModule/markAsReminded",{reminder:E,isReminded:C});if(P.success)await new Promise(O=>requestAnimationFrame(O)),t({message:`Reminder marked as ${D}`,color:"success",timeout:3e3});else throw new Error(P.error||"Failed to update reminder status")}catch(C){console.error(" Failed to toggle reminder status:",C),t({message:C.message||"Failed to update reminder status",color:"error",timeout:5e3})}},S=E=>{if(!E)return"";try{return new Date(E).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return E}};return(E,C)=>{const D=I("v-alert"),P=I("v-tab"),O=I("v-tabs"),H=I("v-card"),ie=I("v-col"),Ae=I("v-row"),j=I("v-card-text"),J=I("v-progress-circular"),ue=I("v-icon"),ne=I("v-btn"),Y=I("v-empty-state"),te=I("v-divider"),L=I("v-card-title"),N=I("v-tooltip"),q=I("v-lazy"),Q=I("v-window-item"),ee=I("v-window"),z=I("v-main");return U(),pe(z,null,{default:u(()=>[r.value?(U(),pe(D,{key:0,type:"error",dismissible:"","onClick:close":C[0]||(C[0]=X=>r.value=null),class:"ma-3"},{default:u(()=>[M(K(r.value),1)]),_:1})):ge("",!0),l(Ae,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[l(ie,{cols:"12"},{default:u(()=>[l(H,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center"},{default:u(()=>[l(O,{modelValue:a.value,"onUpdate:modelValue":C[1]||(C[1]=X=>a.value=X),color:"primary","align-tabs":"start",class:"w-100"},{default:u(()=>[(U(!0),me(We,null,qt(p.value,(X,le)=>(U(),pe(P,{key:le,value:le,disabled:X.disabled},{default:u(()=>[M(K(X.title),1)]),_:2},1032,["value","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(ee,{modelValue:a.value,"onUpdate:modelValue":C[2]||(C[2]=X=>a.value=X),class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[l(Q,{value:0,style:{height:"100%"}},{default:u(()=>[l(Ae,{"aria-label":"reminders row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[l(ie,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[v("div",X5e,[l(Y5e,{filters:A.value,isLoading:o.value,onFilterChange:w,onSearch:b,onClearFilters:F},null,8,["filters","isLoading"])])]),_:1}),l(ie,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[v("div",J5e,[l(H,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[l(H,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(j,{class:"pt-2 pb-0"},{default:u(()=>[s.value.length>0&&i.value?(U(),me(We,{key:0},[v("strong",null,K(s.value.length),1),M(" reminder"+K(s.value.length!==1?"s":"")+" found ",1),d.value?(U(),me("span",Z5e,"  Filtered ")):ge("",!0)],64)):(U(),me("strong",eMe,"Reminders Management"))]),_:1})]),_:1}),o.value?(U(),pe(Ae,{key:0,"no-gutters":""},{default:u(()=>[l(ie,{cols:"12",class:"d-flex justify-center align-center",style:{height:"calc(100vh - 280px)"}},{default:u(()=>[v("div",tMe,[l(J,{indeterminate:"",size:"64",color:"primary"}),C[3]||(C[3]=v("div",{class:"mt-4 text-subtitle-1"},"Searching Reminders...",-1))])]),_:1})]),_:1})):c.value?(U(),pe(Ae,{key:1,"no-gutters":""},{default:u(()=>[l(ie,{cols:"12",class:"d-flex justify-center align-center",style:{height:"calc(100vh - 280px)"}},{default:u(()=>[v("div",nMe,[l(ue,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...C[4]||(C[4]=[M("mdi-alert-circle",-1)])]),_:1}),C[6]||(C[6]=v("div",{class:"text-h6 mb-2"},"Search Failed",-1)),v("div",aMe,K(c.value),1),l(ne,{color:"primary",onClick:T,"prepend-icon":"mdi-refresh",loading:o.value,disabled:o.value},{default:u(()=>[...C[5]||(C[5]=[M(" Try Again ",-1)])]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})):s.value.length===0&&i.value?(U(),pe(Y,{key:2,image:$e(Kv),class:"d-flex justify-center"},{title:u(()=>[...C[7]||(C[7]=[v("div",{class:"text-subtitle-2 mt-8 text-center"}," No Reminders Found ",-1)])]),text:u(()=>[C[12]||(C[12]=v("div",{class:"text-caption text-center mb-4"}," Try adjusting your search criteria or clear filters to see all reminders ",-1)),l(H,{color:"info",variant:"tonal",class:"pa-3 mx-auto",style:{"max-width":"400px"},rounded:"lg"},{default:u(()=>[v("div",rMe,[l(ue,{size:"small",class:"mb-1"},{default:u(()=>[...C[8]||(C[8]=[M("mdi-information",-1)])]),_:1}),C[9]||(C[9]=v("div",{class:"font-weight-medium mb-1"},"Default Search Ranges",-1)),C[10]||(C[10]=v("div",{class:"text-body-2 text-left"},[M("  "),v("strong",null,"Appointments:"),M(" Next 7 days"),v("br"),M("  "),v("strong",null,"Consultations:"),M(" Next 30 days"),v("br"),M("  "),v("strong",null,"Treatment Plans:"),M(" Next 30 days ")],-1)),C[11]||(C[11]=v("div",{class:"mt-2 text-caption text-medium-emphasis"}," Use date filters to search beyond these ranges ",-1))])]),_:1})]),actions:u(()=>[l(ne,{color:"primary",variant:"outlined",onClick:F,"prepend-icon":"mdi-filter-remove",loading:o.value,disabled:o.value},{default:u(()=>[...C[13]||(C[13]=[M(" Clear Filters ",-1)])]),_:1},8,["loading","disabled"])]),_:1},8,["image"])):i.value?s.value.length>0?(U(),me(We,{key:4},[l(Ae,{class:"mb-1 pa-1"},{default:u(()=>[l(ie,{cols:"3"},{default:u(()=>[l(H,{color:"primary",variant:"tonal"},{default:u(()=>[l(j,{class:"text-center"},{default:u(()=>[v("div",cMe,K(f.value),1),C[27]||(C[27]=v("div",{class:"text-caption"},"Unique Patients",-1))]),_:1})]),_:1})]),_:1}),l(ie,{cols:"3"},{default:u(()=>[l(H,{color:"success",variant:"tonal"},{default:u(()=>[l(j,{class:"text-center"},{default:u(()=>[v("div",dMe,K(m.value),1),C[28]||(C[28]=v("div",{class:"text-caption"},"Pending",-1))]),_:1})]),_:1})]),_:1}),l(ie,{cols:"3"},{default:u(()=>[l(H,{color:"info",variant:"tonal"},{default:u(()=>[l(j,{class:"text-center"},{default:u(()=>[v("div",AMe,K(h.value),1),C[29]||(C[29]=v("div",{class:"text-caption"},"Completed",-1))]),_:1})]),_:1})]),_:1}),l(ie,{cols:"3"},{default:u(()=>[l(H,{color:"warning",variant:"tonal"},{default:u(()=>[l(j,{class:"text-center"},{default:u(()=>[v("div",fMe,K(s.value.length),1),C[30]||(C[30]=v("div",{class:"text-caption"},"Total Reminders",-1))]),_:1})]),_:1})]),_:1})]),_:1}),l(Ae,{"no-gutters":""},{default:u(()=>[l(ie,{cols:"12",class:"scroll-element",style:{"padding-bottom":"40px"}},{default:u(()=>[(U(!0),me(We,null,qt(s.value,X=>(U(),pe(q,{key:`reminder-${X.id}-${X.status}-${X.details?.isReminded||!1}`,options:{threshold:.1,rootMargin:"100px"},"min-height":"60",eager:""},{default:u(()=>[l(H,{style:{textAlign:"left"},density:"compact",class:"mb-2 mx-2 card-enhanced card-status-default",rounded:"lg"},{default:u(()=>[l(Ae,{"no-gutters":""},{default:u(()=>[l(ie,{cols:"10"},{default:u(()=>[l(L,{class:"d-flex justify-space-between align-center pb-0 pt-2"},{default:u(()=>[v("span",mMe,K(X.title||"Reminder"),1),v("div",vMe,[v("span",hMe,K(S(X.dueDate)),1)])]),_:2},1024),l(j,{class:"pb-1"},{default:u(()=>[l(Ae,{dense:""},{default:u(()=>[l(ie,{cols:"12"},{default:u(()=>[v("div",pMe,[M(K(X.patientName)+" ",1),X.description?(U(),me("span",gMe," ("+K(X.description)+") ",1)):ge("",!0)]),X.type==="consultation"&&X.consultationDetails?(U(),me("div",yMe,K(X.consultationDetails),1)):ge("",!0),X.type==="procedures"&&X.procedureDetails?(U(!0),me(We,{key:1},qt(X.procedureDetails.split(" | "),(le,re)=>(U(),me("div",{key:re,class:"text-body-2 text-medium-emphasis mt-1"},K(le),1))),128)):ge("",!0),X.type==="appointment"&&X.lastAppointmentDetails?(U(),me("div",_Me,K(X.lastAppointmentDetails),1)):ge("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),l(ie,{cols:"2",class:"d-flex justify-center align-center"},{default:u(()=>[l(Ae,{"no-gutters":""},{default:u(()=>[l(ie,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[l(Bn,{permission:"tasks.edit",tag:"span"},{default:u(()=>[l(N,{text:X.status==="completed"?"Mark as Not Reminded":"Mark as Reminded"},{activator:u(({props:le})=>[l(ne,Ue({color:X.status==="completed"?"success":"warning",variant:"plain",size:"small"},{ref_for:!0},le,{onClick:pn(re=>k(X),["stop"]),class:"btn-hover-base mb-2"}),{default:u(()=>[l(ue,{color:X.status==="completed"?"success":"warning",size:"18"},{default:u(()=>[(U(),me("svg",wMe,[v("path",{fill:"currentColor",d:X.status==="completed"?"M17.75 21.16L15 18.16L16.16 17L17.75 18.59L21.34 15L22.5 16.41L17.75 21.16M3 20V19L5 17V11C5 7.9 7.03 5.18 10 4.29V4C10 2.9 10.9 2 12 2C13.11 2 14 2.9 14 4V4.29C16.97 5.18 19 7.9 19 11V12.08L18 12C14.69 12 12 14.69 12 18C12 18.7 12.12 19.37 12.34 20H3M12 23C10.9 23 10 22.11 10 21H12.8C13.04 21.41 13.33 21.79 13.65 22.13C13.29 22.66 12.69 23 12 23Z":"M23 7V13H21V7M21 15H23V17H21M12 2A2 2 0 0 0 10 4A2 2 0 0 0 10 4.29C7.12 5.14 5 7.82 5 11V17L3 19V20H21V19L19 17V11C19 7.82 16.88 5.14 14 4.29A2 2 0 0 0 14 4A2 2 0 0 0 12 2M10 21A2 2 0 0 0 12 23A2 2 0 0 0 14 21Z"},null,8,bMe)]))]),_:2},1032,["color"])]),_:2},1040,["color","onClick"])]),_:2},1032,["text"])]),_:2},1024)]),_:2},1024),l(te,{class:"mx-4"}),l(ie,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[l(N,{text:"Send WhatsApp Reminder"},{activator:u(({props:le})=>[l(ne,Ue({variant:"plain",size:"small"},{ref_for:!0},le,{onClick:pn(re=>g(X),["stop"]),disabled:!y(X),loading:X.sendingWhatsApp,class:"btn-hover-base mt-1"}),{default:u(()=>[l(ue,{size:"18"},{default:u(()=>[...C[31]||(C[31]=[v("img",{src:Y_,alt:"WhatsApp",style:{width:"18px",height:"18px"}},null,-1)])]),_:1})]),_:1},16,["onClick","disabled","loading"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})],64)):ge("",!0):(U(),pe(Ae,{key:3,"no-gutters":""},{default:u(()=>[l(ie,{cols:"12",class:"d-flex justify-center align-center",style:{height:"calc(100vh - 280px)"}},{default:u(()=>[v("div",sMe,[l(ue,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...C[14]||(C[14]=[M("mdi-bell-outline",-1)])]),_:1}),C[25]||(C[25]=v("div",{class:"text-h6 mb-2"},"Reminder Management",-1)),C[26]||(C[26]=v("div",{class:"text-body-2 text-medium-emphasis mb-6"},"Use the filters on the left to search for reminders",-1)),l(ne,{color:"primary",variant:"outlined",onClick:x},{default:u(()=>[...C[15]||(C[15]=[M(" View All Reminders ",-1)])]),_:1}),l(H,{color:"surface-variant",variant:"tonal",class:"mt-6 pa-4 mx-auto",style:{"max-width":"400px"},rounded:"lg"},{default:u(()=>[v("div",oMe,[l(ue,{size:"small",class:"mb-2"},{default:u(()=>[...C[16]||(C[16]=[M("mdi-clock-outline",-1)])]),_:1}),C[23]||(C[23]=v("div",{class:"font-weight-medium mb-2 text-body-2"},"Default Search Windows",-1)),l(Ae,{dense:"",class:"text-left"},{default:u(()=>[l(ie,{cols:"12",class:"text-body-2"},{default:u(()=>[v("div",iMe,[l(ue,{size:"x-small",color:"primary",class:"mr-2"},{default:u(()=>[...C[17]||(C[17]=[M("mdi-calendar-clock",-1)])]),_:1}),C[18]||(C[18]=v("span",null,[v("strong",null,"Appointments:"),M(" Next 7 days")],-1))]),v("div",lMe,[l(ue,{size:"x-small",color:"success",class:"mr-2"},{default:u(()=>[...C[19]||(C[19]=[M("mdi-stethoscope",-1)])]),_:1}),C[20]||(C[20]=v("span",null,[v("strong",null,"Consultations:"),M(" Next 30 days")],-1))]),v("div",uMe,[l(ue,{size:"x-small",color:"info",class:"mr-2"},{default:u(()=>[...C[21]||(C[21]=[M("mdi-medical-bag",-1)])]),_:1}),C[22]||(C[22]=v("span",null,[v("strong",null,"Treatment Plans:"),M(" Next 30 days")],-1))])]),_:1})]),_:1}),l(te,{class:"my-2"}),C[24]||(C[24]=v("div",{class:"text-caption text-medium-emphasis"},"  Set custom date ranges in filters to search beyond these windows ",-1))])]),_:1})])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},CMe=Xt(xMe,[["__scopeId","data-v-d9f25aad"]]),SMe={class:"filter-container pa-3",style:{flex:"1 1 auto","overflow-y":"auto"}},EMe={class:"filter-field mb-3"},BMe={class:"d-flex justify-center mt-4"},kMe={__name:"PaymentFilter",props:{paymentDate:{type:String,default:""}},emits:["filter-change","search","clear"],setup(e,{emit:t}){const n=e,a=t,r=V(n.paymentDate||""),s=ae(()=>Un()),o=ae(()=>!!r.value);ae(()=>{let m=0;return r.value&&m++,m});const i=m=>{if(!m)return"";try{return new Date(m).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return m}},c=()=>{d()},A=()=>{r.value="",d()},d=()=>{a("filter-change",{paymentDate:r.value,hasErrors:!1,hasFilters:o.value})},f=()=>{r.value="",a("clear"),d()};return Ke(()=>n.paymentDate,m=>{r.value=m||""}),d(),(m,h)=>{const p=I("v-card-text"),y=I("v-card"),g=I("v-text-field"),w=I("v-chip"),b=I("v-btn");return U(),pe(y,{color:"surfaceContainer",flat:"",style:{height:"100%",display:"flex","flex-direction":"column"}},{default:u(()=>[l(y,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(p,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...h[1]||(h[1]=[v("span",{class:"text-body-2 font-weight-medium"},"Filter Payment Receipts",-1)])]),_:1})]),_:1}),v("div",SMe,[v("div",EMe,[l(g,{modelValue:r.value,"onUpdate:modelValue":[h[0]||(h[0]=x=>r.value=x),c],type:"date",label:"Payment Receipt Date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input date-input",max:s.value,"onClick:clear":A},null,8,["modelValue","max"]),r.value?(U(),pe(w,{key:0,size:"small",color:"primary",variant:"outlined",closable:"",class:"mt-2","onClick:close":A},{default:u(()=>[M(" Date: "+K(i(r.value)),1)]),_:1})):ge("",!0)]),v("div",BMe,[l(b,{variant:"text",size:"small","prepend-icon":"mdi-filter-remove",onClick:f,class:"filter-button-clear",disabled:!o.value},{default:u(()=>[...h[2]||(h[2]=[M(" Clear ",-1)])]),_:1},8,["disabled"])])])]),_:1})}}},TMe=Xt(kMe,[["__scopeId","data-v-e2fa6283"]]),IMe={class:"scrollable-content"},FMe={class:"scrollable-content"},PMe={class:"text-center"},DMe={class:"text-center"},UMe={class:"text-body-2 text-medium-emphasis mb-4"},RMe={class:"text-center"},NMe={class:"text-body-2 text-medium-emphasis"},VMe={class:"font-weight-bold",style:{color:"black"}},LMe={class:"font-weight-bold",style:{color:"black"}},MMe={key:0,class:"text-body-2 mb-1"},OMe={class:"font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},HMe={key:1,class:"text-body-2 text-medium-emphasis mb-1"},$Me={key:0,class:"amount-badge"},QMe={class:"text-body-1 font-weight-bold"},GMe={__name:"payments",setup(e){const{showSnackbar:t}=ra(),n=Rn(),a=V(0),r=V([]),s=V(""),o=V(null),i=V(!1),c=V(null),A=V(!1),d=V(!1),f=V(!1),m=V(null),h=V(!1),p=V(null),y=V(!1);ae(()=>Un());const g=ae(()=>n.getters["doctorModule/isGSTRegistered"]),w=async()=>{if(!i.value)try{i.value=!0,c.value=null;const Y=await Sw(n,s.value?.trim()||"");if(Y.error)throw new Error(`Search failed: ${Y.error.message||"Unknown error"}`);const te=Array.isArray(Y.data)?Y.data:[];r.value=te.filter(L=>L.status!=="Series"),A.value=!0,s.value&&t({message:`Found ${r.value.length} payment receipt${r.value.length!==1?"s":""}`,color:"success",timeout:3e3})}catch(Y){console.error("Error fetching payment receipts:",Y),c.value=Y.message||"Failed to search payment receipts",r.value=[],A.value=!0,t({message:c.value,color:"error",timeout:5e3})}finally{i.value=!1}},b=()=>{c.value=null,w()},x=()=>{try{s.value="",c.value=null,A.value=!0,w(),t({message:"Filters cleared successfully",color:"success",timeout:3e3})}catch(Y){console.error("Error clearing filters:",Y),o.value="Failed to clear filters"}},T=Y=>{s.value=Y.paymentDate||"",Y.hasErrors||(A.value=!0,ne())},F=Y=>{s.value=Y.paymentDate||"",w()},k=Y=>{if(g.value){const te=r.value.find(N=>N.id===Y),L=te?.billId||te?.billid;L?(p.value=L,h.value=!0):(t({message:"No associated bill found. Showing payment receipt view.",color:"info",timeout:3e3}),m.value=Y,d.value=!0)}else m.value=Y,d.value=!0},S=Y=>{if(g.value){const te=r.value.find(N=>N.id===Y),L=te?.billId||te?.billid;L?(p.value=L,y.value=!0):(t({message:"No associated bill found. Showing payment receipt edit.",color:"info",timeout:3e3}),m.value=Y,f.value=!0)}else console.log("Edit receipt:",Y),m.value=Y,f.value=!0},E=()=>{d.value=!1,m.value=null},C=()=>{f.value=!1,m.value=null},D=Y=>{d.value=!1,m.value=Y,f.value=!0},P=()=>{h.value=!1,p.value=null},O=Y=>{h.value=!1,p.value=null,p.value=Y,y.value=!0},H=()=>{y.value=!1,p.value=null},ie=Y=>{console.log("Bill updated:",Y),y.value=!1,p.value=null,w(),t({message:`Bill ${Y.identifier} updated successfully!`,color:"success",timeout:3e3})},Ae=Y=>{console.log("Receipt updated:",Y),f.value=!1,m.value=null,w(),t({message:`Receipt ${Y.identifier} updated successfully!`,color:"success",timeout:3e3})},j=Y=>{if(!Y)return"";try{let te;typeof Y=="number"?te=new Date(Y*1e3):te=new Date(Y);const L=wo(te,"d MMM"),N=wo(te,"EEE");return`${L}, ${N}`}catch(te){return console.error("Error formatting created day:",te),""}},J=Y=>{if(!Y)return"";try{let te;typeof Y=="number"?te=new Date(Y*1e3):te=new Date(Y);const L=te.getHours(),N=te.getMinutes(),q=L%12||12,Q=L>=12?"PM":"AM";return`${q}.${N.toString().padStart(2,"0")}${Q}`}catch(te){return console.error("Error formatting created time:",te),""}};let ue;const ne=()=>{clearTimeout(ue),ue=setTimeout(()=>{w()},500)};return Ke([s],()=>{A.value=!0,ne()}),un(()=>{try{r.value.length===0&&!A.value&&(A.value=!0,w())}catch(Y){console.error("Error on mount:",Y),o.value="Failed to initialize"}}),cg(()=>{A.value&&w()}),da(()=>{ue&&(clearTimeout(ue),ue=null)}),(Y,te)=>{const L=I("v-alert"),N=I("v-tab"),q=I("v-tabs"),Q=I("v-card"),ee=I("v-col"),z=I("v-row"),X=I("v-progress-circular"),le=I("v-icon"),re=I("v-btn"),de=I("v-card-text"),G=I("v-empty-state"),Z=I("v-card-title"),ce=I("v-tooltip"),Se=I("v-divider"),Pe=I("v-lazy"),ye=I("v-window-item"),Ce=I("v-window"),_e=I("v-main"),De=I("v-dialog");return U(),me(We,null,[l(_e,null,{default:u(()=>[o.value?(U(),pe(L,{key:0,type:"error",dismissible:"","onClick:close":te[0]||(te[0]=xe=>o.value=null),class:"ma-3"},{default:u(()=>[M(K(o.value),1)]),_:1})):ge("",!0),l(z,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[l(ee,{cols:"12"},{default:u(()=>[l(Q,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center"},{default:u(()=>[l(q,{modelValue:a.value,"onUpdate:modelValue":te[1]||(te[1]=xe=>a.value=xe),color:"primary","align-tabs":"start",class:"w-100"},{default:u(()=>[l(N,{value:0},{default:u(()=>[...te[7]||(te[7]=[M("List",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(Ce,{modelValue:a.value,"onUpdate:modelValue":te[2]||(te[2]=xe=>a.value=xe),class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[l(ye,{value:0,style:{height:"100%"}},{default:u(()=>[l(z,{"aria-label":"main row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[l(ee,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[v("div",IMe,[l(TMe,{"payment-date":s.value,onFilterChange:T,onSearch:F,onClear:x},null,8,["payment-date"])])]),_:1}),l(ee,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[v("div",FMe,[l(Q,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[i.value?(U(),pe(z,{key:0,"no-gutters":""},{default:u(()=>[l(ee,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[v("div",PMe,[l(X,{indeterminate:"",color:"primary",size:"64"}),te[8]||(te[8]=v("div",{class:"mt-4 text-subtitle-1"},"Searching payment receipts...",-1))])]),_:1})]),_:1})):c.value?(U(),pe(z,{key:1,"no-gutters":""},{default:u(()=>[l(ee,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[v("div",DMe,[l(le,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...te[9]||(te[9]=[M("mdi-alert-circle",-1)])]),_:1}),te[11]||(te[11]=v("div",{class:"text-h6 mb-2"},"Search Failed",-1)),v("div",UMe,K(c.value),1),l(re,{color:"primary",onClick:b,"prepend-icon":"mdi-refresh"},{default:u(()=>[...te[10]||(te[10]=[M(" Try Again ",-1)])]),_:1})])]),_:1})]),_:1})):r.value&&r.value.length===0&&A.value?(U(),me(We,{key:2},[l(Q,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(de,{class:"pt-2 pb-0"},{default:u(()=>[...te[12]||(te[12]=[v("strong",null,"0",-1),M(" results found ",-1)])]),_:1})]),_:1}),l(G,{image:$e(Kv),class:"d-flex justify-center"},{title:u(()=>[...te[13]||(te[13]=[v("div",{class:"text-subtitle-2 mt-8 text-center"}," No Payment Receipts Found ",-1)])]),text:u(()=>[...te[14]||(te[14]=[v("div",{class:"text-caption text-center"}," Try adjusting your search criteria or clear filters to see all receipts ",-1)])]),actions:u(()=>[l(re,{color:"primary",variant:"outlined",onClick:x,"prepend-icon":"mdi-filter-remove"},{default:u(()=>[...te[15]||(te[15]=[M(" Clear Filters ",-1)])]),_:1})]),_:1},8,["image"])],64)):A.value?r.value&&r.value.length>0?(U(),me(We,{key:4},[l(Q,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(de,{class:"pt-2 pb-0"},{default:u(()=>[v("strong",null,K(r.value.length),1),M(" result"+K(r.value.length!==1?"s":"")+" found ",1)]),_:1})]),_:1}),l(z,{"no-gutters":""},{default:u(()=>[l(ee,{cols:"12",class:"scroll-element mt-2",style:{"padding-bottom":"20px"}},{default:u(()=>[(U(!0),me(We,null,qt(r.value,(xe,Te)=>(U(),pe(Pe,{key:xe?.id||`receipt-${Te}`,options:{threshold:.1,rootMargin:"50px"},"min-height":"80"},{default:u(()=>[xe?(U(),pe(Q,{key:0,style:{textAlign:"left"},density:"compact",class:"mb-2 mx-2 card-enhanced card-status-default card-hover-base",rounded:"lg"},{default:u(()=>[l(z,{"no-gutters":""},{default:u(()=>[l(ee,{cols:"8"},{default:u(()=>[l(Z,{class:"pb-0 pt-2"},{default:u(()=>[v("div",NMe,[xe?.identifier?(U(),me(We,{key:0},[v("span",VMe,"Receipt ID: "+K(xe.identifier),1),g.value&&xe?.billIdentifier?(U(),me(We,{key:0},[te[19]||(te[19]=M("  ",-1)),v("span",LMe,"Invoice ID: "+K(xe.billIdentifier),1)],64)):ge("",!0)],64)):ge("",!0),(xe?.identifier||g.value&&xe?.billIdentifier)&&(xe?.createdAt||xe?.paymentReceiptDate)?(U(),me(We,{key:1},[M("  ")],64)):ge("",!0),xe?.createdAt||xe?.paymentReceiptDate?(U(),me(We,{key:2},[M(K(j(xe.createdAt||xe.paymentReceiptDate))+"  "+K(J(xe.createdAt||xe.paymentReceiptDate)),1)],64)):ge("",!0)])]),_:2},1024),l(de,{class:"pb-1"},{default:u(()=>[xe?.patientName?(U(),me("div",MMe,[l(le,{size:"small",class:"mr-1"},{default:u(()=>[...te[20]||(te[20]=[M("mdi-account",-1)])]),_:1}),v("span",OMe,K(xe.patientName),1)])):ge("",!0),xe?.servicesInfo?(U(),me("div",HMe,[l(le,{size:"small",class:"mr-1"},{default:u(()=>[...te[21]||(te[21]=[M("mdi-file-document-outline",-1)])]),_:1}),M(" "+K(xe.servicesInfo),1)])):ge("",!0)]),_:2},1024)]),_:2},1024),l(ee,{cols:"2",class:"d-flex justify-center align-center"},{default:u(()=>[xe?.totalPaid!==void 0?(U(),me("div",$Me,[v("div",QMe,K($e(Ar)(xe.totalPaid)),1)])):ge("",!0)]),_:2},1024),l(ee,{cols:"2",class:"d-flex justify-center align-center"},{default:u(()=>[l(z,{"no-gutters":""},{default:u(()=>[l(ee,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[l(Bn,{feature:"billing"},{default:u(()=>[l(ce,{text:"View Receipt"},{activator:u(({props:Me})=>[l(re,Ue({variant:"plain",color:"primary",size:"small"},{ref_for:!0},Me,{onClick:pn(et=>k(xe.id),["stop"]),class:"btn-hover-base mb-2"}),{default:u(()=>[l(le,{size:"18"},{default:u(()=>[...te[22]||(te[22]=[M("mdi-eye",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),l(Se,{class:"mx-4"}),l(ee,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[l(Bn,{permission:"billing.edit"},{default:u(()=>[l(ce,{text:"Edit Receipt"},{activator:u(({props:Me})=>[l(re,Ue({variant:"plain",color:"secondary",size:"small"},{ref_for:!0},Me,{onClick:pn(et=>S(xe.id),["stop"]),class:"btn-hover-base mt-1"}),{default:u(()=>[l(le,{size:"18"},{default:u(()=>[...te[23]||(te[23]=[M("mdi-pencil",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):ge("",!0)]),_:2},1024))),128))]),_:1})]),_:1})],64)):ge("",!0):(U(),pe(z,{key:3,"no-gutters":""},{default:u(()=>[l(ee,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[v("div",RMe,[l(le,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...te[16]||(te[16]=[M("mdi-currency-inr",-1)])]),_:1}),te[17]||(te[17]=v("div",{class:"text-h6 mb-2"},"Search for Payment Receipts",-1)),te[18]||(te[18]=v("div",{class:"text-body-2 text-medium-emphasis"},"Use the filters on the left to find payment receipts",-1))])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(De,{modelValue:d.value,"onUpdate:modelValue":te[3]||(te[3]=xe=>d.value=xe),persistent:"","max-width":"70%"},{default:u(()=>[m.value?(U(),pe(gH,{key:0,"receipt-id":m.value,onClose:E,onEditReceipt:D},null,8,["receipt-id"])):ge("",!0)]),_:1},8,["modelValue"]),l(De,{modelValue:h.value,"onUpdate:modelValue":te[4]||(te[4]=xe=>h.value=xe),persistent:"","max-width":"80%"},{default:u(()=>[p.value?(U(),pe(xH,{key:0,"bill-id":p.value,onClose:P,onEditBill:O},null,8,["bill-id"])):ge("",!0)]),_:1},8,["modelValue"]),l(De,{modelValue:f.value,"onUpdate:modelValue":te[5]||(te[5]=xe=>f.value=xe),persistent:"","max-width":"70%"},{default:u(()=>[m.value?(U(),pe(uO,{key:0,"receipt-id":m.value,onClose:C,onReceiptUpdated:Ae},null,8,["receipt-id"])):ge("",!0)]),_:1},8,["modelValue"]),l(De,{modelValue:y.value,"onUpdate:modelValue":te[6]||(te[6]=xe=>y.value=xe),persistent:"","max-width":"85%"},{default:u(()=>[p.value?(U(),pe(CH,{key:0,"bill-id":p.value,onClose:H,onBillUpdated:ie},null,8,["bill-id"])):ge("",!0)]),_:1},8,["modelValue"])],64)}}},zMe=Xt(GMe,[["__scopeId","data-v-d581564c"]]),KMe={class:"filter-container pa-3",style:{flex:"1 1 auto","overflow-y":"auto"}},WMe={class:"filter-field mb-3"},jMe={key:0,class:"filter-section mb-3"},qMe={class:"filter-section-label mb-2"},YMe={class:"d-flex justify-center mt-4 mb-2"},XMe={class:"d-flex justify-center"},JMe={key:1,class:"mt-4"},ZMe={class:"text-caption text-medium-emphasis"},eOe={class:"mb-1"},tOe={key:0},nOe={key:1},aOe={key:2},rOe={key:3},sOe={__name:"ReportFilter",props:{filters:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},emits:["filter-change","start-report","clear-filters"],setup(e,{emit:t}){const n=e,a=t,r=V({reportType:"3c-daily-case-register",selectedDate:"",startDate:"",endDate:"",...n.filters}),s=V([{label:"3C Daily Case Register",value:"3c-daily-case-register"},{label:"Payment Report",value:"payment-report"},{label:"GST Bill Report",value:"gst-bill-report"},{label:"GST Detail Report",value:"gst-detail-report"}]),o=ae(()=>r.value.reportType?r.value.reportType==="3c-daily-case-register"?!!r.value.selectedDate:r.value.reportType==="payment-report"||r.value.reportType==="gst-bill-report"||r.value.reportType==="gst-detail-report"?!!(r.value.startDate&&r.value.endDate):!0:!1);Ke(()=>n.filters,m=>{r.value={...r.value,...m}},{deep:!0});const i=()=>{a("filter-change",{...r.value})},c=()=>{o.value&&a("start-report",{...r.value})},A=()=>{r.value={reportType:"3c-daily-case-register",selectedDate:"",startDate:"",endDate:""},a("clear-filters"),i()},d=m=>{const h=s.value.find(p=>p.value===m);return h?h.label:m},f=m=>m?new Date(m).toLocaleDateString():"";return(m,h)=>{const p=I("v-card-text"),y=I("v-card"),g=I("v-select"),w=I("v-text-field"),b=I("v-col"),x=I("v-row"),T=I("v-btn"),F=I("v-form");return U(),pe(y,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[l(y,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(p,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...h[4]||(h[4]=[v("span",{class:"text-body-2 font-weight-medium"},"Report Configuration",-1)])]),_:1})]),_:1}),v("div",KMe,[l(F,{onSubmit:pn(c,["prevent"])},{default:u(()=>[v("div",WMe,[l(g,{modelValue:r.value.reportType,"onUpdate:modelValue":[h[0]||(h[0]=k=>r.value.reportType=k),i],items:s.value,"item-title":"label","item-value":"value",label:"Report Type",variant:"outlined",density:"compact",class:"filter-input"},null,8,["modelValue","items"])]),r.value.reportType?(U(),me("div",jMe,[v("div",qMe,K(r.value.reportType==="3c-daily-case-register"?"Select Date":"Select Date Range"),1),r.value.reportType==="3c-daily-case-register"?(U(),pe(w,{key:0,modelValue:r.value.selectedDate,"onUpdate:modelValue":[h[1]||(h[1]=k=>r.value.selectedDate=k),i],type:"date",label:"Report Date",variant:"outlined",density:"compact",class:"filter-input date-input"},null,8,["modelValue"])):r.value.reportType==="payment-report"||r.value.reportType==="gst-bill-report"||r.value.reportType==="gst-detail-report"?(U(),pe(x,{key:1,dense:""},{default:u(()=>[l(b,{cols:"6"},{default:u(()=>[l(w,{modelValue:r.value.startDate,"onUpdate:modelValue":[h[2]||(h[2]=k=>r.value.startDate=k),i],type:"date",label:"Start Date",variant:"outlined",density:"compact",class:"filter-input date-input"},null,8,["modelValue"])]),_:1}),l(b,{cols:"6"},{default:u(()=>[l(w,{modelValue:r.value.endDate,"onUpdate:modelValue":[h[3]||(h[3]=k=>r.value.endDate=k),i],type:"date",label:"End Date",variant:"outlined",density:"compact",class:"filter-input date-input"},null,8,["modelValue"])]),_:1})]),_:1})):ge("",!0)])):ge("",!0),v("div",YMe,[l(T,{type:"submit",color:"primary",size:"small",loading:e.loading,disabled:!o.value,"prepend-icon":"mdi-chart-line",class:"filter-button"},{default:u(()=>[...h[5]||(h[5]=[M(" Generate Report ",-1)])]),_:1},8,["loading","disabled"])]),v("div",XMe,[l(T,{variant:"text",size:"small",onClick:A,"prepend-icon":"mdi-filter-remove",class:"filter-button-clear"},{default:u(()=>[...h[6]||(h[6]=[M(" Clear ",-1)])]),_:1})]),r.value.reportType?(U(),me("div",JMe,[l(y,{variant:"outlined",class:"pa-2",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.02)"}},{default:u(()=>[v("div",ZMe,[v("div",eOe,[h[7]||(h[7]=v("strong",null,"Type:",-1)),M(" "+K(d(r.value.reportType)),1)]),r.value.reportType==="3c-daily-case-register"&&r.value.selectedDate?(U(),me("div",tOe,[h[8]||(h[8]=v("strong",null,"Date:",-1)),M(" "+K(f(r.value.selectedDate)),1)])):ge("",!0),r.value.reportType==="payment-report"&&r.value.startDate&&r.value.endDate?(U(),me("div",nOe,[h[9]||(h[9]=v("strong",null,"Date Range:",-1)),M(" "+K(f(r.value.startDate))+" - "+K(f(r.value.endDate)),1)])):ge("",!0),r.value.reportType==="gst-bill-report"&&r.value.startDate&&r.value.endDate?(U(),me("div",aOe,[h[10]||(h[10]=v("strong",null,"Date Range:",-1)),M(" "+K(f(r.value.startDate))+" - "+K(f(r.value.endDate)),1)])):ge("",!0),r.value.reportType==="gst-detail-report"&&r.value.startDate&&r.value.endDate?(U(),me("div",rOe,[h[11]||(h[11]=v("strong",null,"Date Range:",-1)),M(" "+K(f(r.value.startDate))+" - "+K(f(r.value.endDate)),1)])):ge("",!0)])]),_:1})])):ge("",!0)]),_:1})])]),_:1})}}},oOe=Xt(sOe,[["__scopeId","data-v-26d5957c"]]),iOe={class:"scrollable-content"},lOe={class:"scrollable-content"},uOe={key:1},cOe={class:"text-center"},dOe={class:"mt-4 text-subtitle-1"},AOe={key:0,class:"mt-4"},fOe={class:"mb-2"},mOe={class:"mb-2"},vOe={key:0,class:"mb-2"},hOe={key:1},pOe={class:"text-center"},gOe={__name:"reports",setup(e){const t=Rn(),n=V(!1),a=V(""),r=V(!1),s=V(""),o=V(!1),i=V(0),c=V(""),A=V([]),d=V(null),f=V(!1),m=V({reportType:"3c-daily-case-register",selectedDate:"",startDate:"",endDate:"",includeCharts:!0,format:"pdf",includePatientDetails:!0,includeConsultationNotes:!1,includeTaxDetails:!0,includePaymentMethods:!0}),h=V([{title:"Date",key:"date",sortable:!0},{title:"Report Type",key:"reportType",sortable:!0},{title:"Format",key:"format",sortable:!0},{title:"Records",key:"recordCount",sortable:!0},{title:"Status",key:"status",sortable:!0}]),p=L=>{m.value={...m.value,...L}},y=()=>{m.value={reportType:"3c-daily-case-register",selectedDate:"",startDate:"",endDate:"",includeCharts:!0,format:"pdf",includePatientDetails:!0,includeConsultationNotes:!1,includeTaxDetails:!0,includePaymentMethods:!0}},g=async L=>{try{o.value=!0,i.value=0,c.value="Preparing report...",d.value=null,f.value=!1,console.log("Starting report generation with filters:",L),L.reportType==="3c-daily-case-register"?await Ae(L):L.reportType==="payment-report"?await P(L):L.reportType==="gst-bill-report"?await w(L):L.reportType==="gst-detail-report"?await E(L):await te(L)}catch(N){console.error("Report generation error:",N),o.value=!1,i.value=0,c.value="",f.value=!1,r.value=!0,s.value="Report generation failed: "+N.message}finally{setTimeout(()=>{f.value&&(o.value=!1)},1500)}},w=async L=>{try{if(!L.startDate||!L.endDate)throw new Error("Please select both start and end dates for the GST Bill Report");const N=new Date(L.startDate),q=new Date(L.endDate);if(N>q)throw new Error("Start date must be less than or equal to end date");i.value=20,c.value="Fetching bills for date range...";const Q=await TE(t,L.startDate,L.endDate);if(Q.error)throw new Error(`Failed to fetch bills: ${Q.error.message||"Unknown error"}`);i.value=40,c.value="Processing bill data...";const ee=Array.isArray(Q.data)?Q.data:[],z=ee.filter(Z=>Z.status!=="Series");console.log(`Found ${z.length} valid bills out of ${ee.length} total bills for date range`),i.value=60,c.value="Transforming data to GST Bill Report format...";const X=await x(z,L.startDate,L.endDate);i.value=80,c.value="Generating CSV file...";const le=F(X);i.value=90,c.value="Preparing download...";const re=`gst_bill_report_${L.startDate}_to_${L.endDate}.csv`,de=await D(le,re);if(!de.success)throw new Error(de.error||"Failed to save report file");i.value=100,c.value="GST Bill Report generated successfully!",d.value={reportType:"GST Bill Report",totalRecords:X.length,dateRange:{from:L.startDate,to:L.endDate},filename:re},f.value=!0;const G={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"GST Bill Report",format:"CSV",recordCount:X.length,status:"Completed",filename:re};A.value.unshift(G),n.value=!0,a.value=`GST Bill Report generated successfully! ${X.length} records included.`}catch(N){throw console.error("GST Bill Report generation error:",N),N}},b=L=>{if(!L.services||!Array.isArray(L.services)||L.services.length===0)return{itemTotal:0,gstAmount:0,totalWithGST:0,grandTotal:0};let N=0,q=0,Q=0;L.services.forEach(X=>{const le=parseFloat(X.baseCost)||0,re=parseInt(X.quantity)||1,de=parseFloat(X.gstPercent)||0,G=parseFloat(X.discountAmount)||0,Z=le*re,ce=G*re,Se=Math.max(0,Z-ce),Pe=de>0?Math.round(Se*de/(100+de)):0,ye=Se-Pe;N+=ye,q+=Pe,Q+=Se});const ee=parseFloat(L.additionalDiscount)||0,z=Math.max(0,Q-ee);return{itemTotal:Math.round(N),gstAmount:q,totalWithGST:Math.round(Q),grandTotal:Math.round(z)}},x=async(L,N,q)=>{const Q=[],ee=L.sort((z,X)=>{const le=new Date(z.billDate),re=new Date(X.billDate);return le-re});for(const z of ee){const X=await T(z.id),le=b(z),re={billIdentifier:z.identifier||"",billDate:z.billDate||"",patientName:z.patientName||"Unknown Patient",services:z.servicesDescription||"",itemTotal:le.itemTotal,gstAmount:le.gstAmount,totalWithGST:le.totalWithGST,additionalDiscount:z.additionalDiscount||0,grandTotal:le.grandTotal,cash:X.cash||0,card:X.card||0,upi:X.upi||0,bankTransfer:X.bankTransfer||0,cheque:X.cheque||0,online:X.online||0};Q.push(re)}return console.log("Transformed GST Bill Report data:",Q),Q},T=async L=>{const N={cash:0,card:0,upi:0,bankTransfer:0,cheque:0,online:0};try{const{getReceiptsByBill:q,getPaymentsByReceipt:Q}=await Jr(async()=>{const{getReceiptsByBill:X,getPaymentsByReceipt:le}=await Promise.resolve().then(()=>D2e);return{getReceiptsByBill:X,getPaymentsByReceipt:le}},void 0,import.meta.url),{getPaymentsByReceipt:ee}=await Jr(async()=>{const{getPaymentsByReceipt:X}=await Promise.resolve().then(()=>she);return{getPaymentsByReceipt:X}},void 0,import.meta.url),z=await q(L);if(z.success&&Array.isArray(z.data))for(const X of z.data){const le=await ee(X.id);le.success&&Array.isArray(le.data)&&le.data.forEach(re=>{const de=re.mode?.toLowerCase(),G=re.amount||0;switch(de){case"cash":N.cash+=G;break;case"card":N.card+=G;break;case"upi":N.upi+=G;break;case"bank transfer":case"banktransfer":N.bankTransfer+=G;break;case"cheque":N.cheque+=G;break;case"online":N.online+=G;break;default:N.online+=G;break}})}}catch(q){console.error("Error fetching payment modes for bill:",L,q)}return N},F=L=>{const q=[["Bill Identifier","Bill Date","Patient Name","Services","Total Taxable Value","GST Amount","Total with GST","Additional Discount","Grand Total","Cash","Card","UPI","Bank Transfer","Cheque","Online"].join(",")];return L.forEach(Q=>{const ee=[ue(Q.billIdentifier),Q.billDate,ue(Q.patientName),ue(Q.services),Q.itemTotal,Q.gstAmount,Q.totalWithGST,Q.additionalDiscount,Q.grandTotal,Q.cash,Q.card,Q.upi,Q.bankTransfer,Q.cheque,Q.online];q.push(ee.join(","))}),q.join(`
`)},k=L=>{const N=parseFloat(L.baseCost)||0,q=parseInt(L.quantity)||1,Q=parseFloat(L.gstPercent)||0,ee=parseFloat(L.discountAmount)||0,z=N*q,X=ee*q,le=Math.max(0,z-X),re=Q>0?Math.round(le*Q/(100+Q)):0,de=le-re,G=le;return{baseCost:N,discountAmount:ee,gstPercent:Q,quantity:q,taxableValue:Math.round(de),gstAmount:re,total:Math.round(G)}},S=async(L,N,q)=>{const Q=[],ee=L.sort((z,X)=>{const le=new Date(z.billDate),re=new Date(X.billDate);return le-re});for(const z of ee)if(!(!z.services||!Array.isArray(z.services)||z.services.length===0))for(const X of z.services){const le=k(X),re={billIdentifier:z.identifier||"",billDate:z.billDate||"",patientName:z.patientName||"Unknown Patient",serviceDescription:X.serviceDescription||"",hsnSacCode:X.hsnSacCode||"",baseCost:le.baseCost,discountAmount:le.discountAmount,gstPercent:le.gstPercent,quantity:le.quantity,taxableValue:le.taxableValue,gstAmount:le.gstAmount,total:le.total};Q.push(re)}return console.log("Transformed GST Detail Report data:",Q),Q},E=async L=>{try{i.value=10,c.value="Fetching bills data...",i.value=30,c.value="Loading bills from database...";const N=await TE(t,L.startDate,L.endDate);if(N.error)throw new Error(N.error.message||"Failed to fetch bills");const q=Array.isArray(N.data)?N.data:[],Q=q.filter(de=>de.status!=="Series");console.log(`Found ${Q.length} valid bills out of ${q.length} total bills for date range`),i.value=60,c.value="Transforming data to GST Detail Report format...";const ee=await S(Q,L.startDate,L.endDate);i.value=80,c.value="Generating CSV file...";const z=C(ee);i.value=90,c.value="Preparing download...";const X=`gst_detail_report_${L.startDate}_to_${L.endDate}.csv`,le=await D(z,X);if(!le.success)throw new Error(le.error||"Failed to save report file");i.value=100,c.value="GST Detail Report generated successfully!",d.value={reportType:"GST Detail Report",totalRecords:ee.length,dateRange:{from:L.startDate,to:L.endDate},filename:X},f.value=!0;const re={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"GST Detail Report",format:"CSV",recordCount:ee.length,status:"Completed",filename:X};A.value.unshift(re),n.value=!0,a.value=`GST Detail Report generated successfully! ${ee.length} line items included.`}catch(N){throw console.error("GST Detail Report generation error:",N),N}},C=L=>{const q=[["Bill Identifier","Bill Date","Patient Name","Service Description","HSN/SAC Code","Base Cost per unit (incl. GST)","Discount per unit","GST %","Quantity","Taxable Value","GST Amount","Total (incl. GST)"].join(",")];return L.forEach(Q=>{const ee=[ue(Q.billIdentifier),Q.billDate,ue(Q.patientName),ue(Q.serviceDescription),ue(Q.hsnSacCode),Q.baseCost,Q.discountAmount,Q.gstPercent,Q.quantity,Q.taxableValue,Q.gstAmount,Q.total];q.push(ee.join(","))}),q.join(`
`)},D=async(L,N)=>{try{const q=new Blob([L],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const Q=await window.electronAPI.showSaveDialog({defaultPath:N,filters:[{name:"CSV Files",extensions:["csv"]}]});return!Q.canceled&&Q.filePath?(await window.electronAPI.writeFile(Q.filePath,L),{success:!0,filePath:Q.filePath,filename:N}):{success:!1,error:"Save canceled by user"}}else{const Q=document.createElement("a"),ee=URL.createObjectURL(q);return Q.setAttribute("href",ee),Q.setAttribute("download",N),Q.style.visibility="hidden",document.body.appendChild(Q),Q.click(),document.body.removeChild(Q),URL.revokeObjectURL(ee),{success:!0,filePath:`Downloaded: ${N}`,filename:N}}}catch(q){return console.error("Error saving GST Bill Report file:",q),{success:!1,error:q.message}}},P=async L=>{try{if(!L.startDate||!L.endDate)throw new Error("Please select both start and end dates for the Payment Report");const N=new Date(L.startDate),q=new Date(L.endDate);if(N>q)throw new Error("Start date must be less than or equal to end date");i.value=20,c.value="Fetching payment receipts for date range...";const Q=await XM(t,L.startDate,L.endDate);if(Q.error)throw new Error(`Failed to fetch payment receipts: ${Q.error.message||"Unknown error"}`);i.value=40,c.value="Processing payment data...";const ee=Array.isArray(Q.data)?Q.data:[],z=ee.filter(Z=>Z.status==="Created"||Z.status==="Completed");console.log(`Found ${z.length} valid receipts out of ${ee.length} total receipts for date range`),i.value=60,c.value="Transforming data to Payment Report format...";const X=O(z,L.startDate,L.endDate);i.value=80,c.value="Generating CSV file...";const le=H(X);i.value=90,c.value="Preparing download...";const re=`payment_report_${L.startDate}_to_${L.endDate}.csv`,de=await ie(le,re);if(!de.success)throw new Error(de.error||"Failed to save report file");i.value=100,c.value="Payment Report generated successfully!",d.value={reportType:"Payment Report",totalRecords:X.length,dateRange:{from:L.startDate,to:L.endDate},filename:re},f.value=!0;const G={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"Payment Report",format:"CSV",recordCount:X.length,status:"Completed",filename:re};A.value.unshift(G),n.value=!0,a.value=`Payment Report generated successfully! ${X.length} records included.`}catch(N){throw console.error("Payment Report generation error:",N),N}},O=(L,N,q)=>{const Q=L.sort((z,X)=>{const le=new Date(z.paymentReceiptDate||z.createdAt),re=new Date(X.paymentReceiptDate||X.createdAt);return le-re}),ee=[];return Q.forEach(z=>{const X={cash:0,card:0,upi:0,bankTransfer:0,cheque:0,online:0};z.payments&&Array.isArray(z.payments)&&z.payments.forEach(de=>{const G=de.mode?.toLowerCase(),Z=de.amount||0;switch(G){case"cash":X.cash+=Z;break;case"card":X.card+=Z;break;case"upi":X.upi+=Z;break;case"bank transfer":case"banktransfer":X.bankTransfer+=Z;break;case"cheque":X.cheque+=Z;break;case"online":X.online+=Z;break;default:X.online+=Z;break}});const le=z.servicesInfo||"",re={paymentReceiptId:z.identifier||"",patientName:z.patientName||"Unknown Patient",services:le,totalAmount:z.totalAmount||0,cash:X.cash,card:X.card,upi:X.upi,bankTransfer:X.bankTransfer,cheque:X.cheque,online:X.online,receiptDate:Y(z.paymentReceiptDate||z.createdAt)};ee.push(re)}),console.log("Transformed Payment Report data:",ee),ee},H=L=>{const q=[["Payment Receipt ID","Patient Name","Services","Total Amount","Cash","Card","UPI","Bank Transfer","Cheque","Online","Receipt Date"].join(",")];return L.forEach(Q=>{const ee=[ue(Q.paymentReceiptId),ue(Q.patientName),ue(Q.services),Q.totalAmount,Q.cash,Q.card,Q.upi,Q.bankTransfer,Q.cheque,Q.online,Q.receiptDate];q.push(ee.join(","))}),q.join(`
`)},ie=async(L,N)=>{try{const q=new Blob([L],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const Q=await window.electronAPI.showSaveDialog({defaultPath:N,filters:[{name:"CSV Files",extensions:["csv"]}]});return!Q.canceled&&Q.filePath?(await window.electronAPI.writeFile(Q.filePath,L),{success:!0,filePath:Q.filePath,filename:N}):{success:!1,error:"Save canceled by user"}}else{const Q=document.createElement("a"),ee=URL.createObjectURL(q);return Q.setAttribute("href",ee),Q.setAttribute("download",N),Q.style.visibility="hidden",document.body.appendChild(Q),Q.click(),document.body.removeChild(Q),URL.revokeObjectURL(ee),{success:!0,filePath:`Downloaded: ${N}`,filename:N}}}catch(q){return console.error("Error saving Payment Report file:",q),{success:!1,error:q.message}}},Ae=async L=>{try{if(!L.selectedDate)throw new Error("Please select a date for the 3C Daily Case Register report");i.value=20,c.value="Fetching payment receipts...";const N=await Sw(t,L.selectedDate);if(N.error)throw new Error(`Failed to fetch payment receipts: ${N.error.message||"Unknown error"}`);i.value=40,c.value="Processing receipt data...";const q=Array.isArray(N.data)?N.data:[],Q=q.filter(de=>de.status==="Created"||de.status==="Completed");console.log(`Found ${Q.length} valid receipts out of ${q.length} total receipts`),i.value=60,c.value="Transforming data to 3C format...";const ee=j(Q,L.selectedDate);i.value=80,c.value="Generating CSV file...";const z=J(ee);i.value=90,c.value="Preparing download...";const X=`3c_daily_case_register_${L.selectedDate}.csv`,le=await ne(z,X);if(!le.success)throw new Error(le.error||"Failed to save report file");i.value=100,c.value="Report generated successfully!",d.value={reportType:"3C Daily Case Register",totalRecords:ee.length,dateRange:{from:L.selectedDate,to:L.selectedDate},filename:X},f.value=!0;const re={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"3C Daily Case Register",format:"CSV",recordCount:ee.length,status:"Completed",filename:X};A.value.unshift(re),n.value=!0,a.value=`3C Report generated successfully! ${ee.length} records included.`}catch(N){throw console.error("3C Report generation error:",N),N}},j=(L,N)=>{const q=L.sort((z,X)=>{const le=new Date(z.paymentReceiptDate||z.createdAt),re=new Date(X.paymentReceiptDate||X.createdAt);return le-re}),Q=[];let ee=1;return q.forEach(z=>{const X=z.servicesInfo||"",le={date:N,serialNumber:ee++,patientName:z.patientName||"Unknown Patient",services:X,feesReceived:z.totalPaid||0,dateOfReceipt:Y(z.paymentReceiptDate||z.createdAt),paymentReceiptNo:z.identifier||""};Q.push(le)}),console.log("Transformed 3C data:",Q),Q},J=L=>{const q=[["Date","Serial Number","Patient Name","Services","Fees Received","Date of Receipt","Payment Receipt No."].join(",")];return L.forEach(Q=>{const ee=[Q.date,Q.serialNumber,ue(Q.patientName),ue(Q.services),Q.feesReceived,Q.dateOfReceipt,ue(Q.paymentReceiptNo)];q.push(ee.join(","))}),q.join(`
`)},ue=L=>{if(L==null)return"";const N=String(L);return N.includes(",")||N.includes('"')||N.includes(`
`)?`"${N.replace(/"/g,'""')}"`:N},ne=async(L,N)=>{try{const q=new Blob([L],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const Q=await window.electronAPI.showSaveDialog({defaultPath:N,filters:[{name:"CSV Files",extensions:["csv"]}]});return!Q.canceled&&Q.filePath?(await window.electronAPI.writeFile(Q.filePath,L),{success:!0,filePath:Q.filePath,filename:N}):{success:!1,error:"Save canceled by user"}}else{const Q=document.createElement("a"),ee=URL.createObjectURL(q);return Q.setAttribute("href",ee),Q.setAttribute("download",N),Q.style.visibility="hidden",document.body.appendChild(Q),Q.click(),document.body.removeChild(Q),URL.revokeObjectURL(ee),{success:!0,filePath:`Downloaded: ${N}`,filename:N}}}catch(q){return console.error("Error saving 3C report file:",q),{success:!1,error:q.message}}},Y=L=>{if(!L)return"";try{return new Date(L).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"})}catch{return L}},te=async L=>{i.value=10,c.value="Collecting data...",await new Promise(X=>setTimeout(X,1e3)),i.value=30,c.value="Analyzing records...",await new Promise(X=>setTimeout(X,1500)),i.value=60,c.value="Generating charts and visualizations...",await new Promise(X=>setTimeout(X,1e3)),i.value=80,c.value="Finalizing report...",await new Promise(X=>setTimeout(X,800)),i.value=100,c.value="Report generated successfully!";const N=Math.floor(Math.random()*500)+50,Q={"payment-report":"Payment Report","gst-bill-report":"GST Bill Report","gst-detail-report":"GST Detail Report","3c-daily-case-register":"3C Daily Case Register"}[L.reportType]||"Custom Report";let ee=null;(L.reportType==="payment-report"||L.reportType==="gst-bill-report"||L.reportType==="gst-detail-report")&&L.startDate&&L.endDate&&(ee={from:L.startDate,to:L.endDate}),d.value={reportType:Q,totalRecords:N,dateRange:ee,filename:`${L.reportType}_report_${new Date().toISOString().split("T")[0]}.${L.format||"pdf"}`},f.value=!0;const z={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:Q,format:(L.format||"pdf").toUpperCase(),recordCount:N,status:"Completed",filename:d.value.filename};A.value.unshift(z),n.value=!0,a.value=`Report generated successfully! ${N} records included.`};return un(()=>{console.log("Reports page initialized")}),(L,N)=>{const q=I("v-col"),Q=I("v-card-text"),ee=I("v-card"),z=I("v-progress-circular"),X=I("v-card-title"),le=I("v-row"),re=I("v-data-table"),de=I("v-icon"),G=I("v-snackbar"),Z=I("v-main");return U(),pe(Z,null,{default:u(()=>[l(Bn,{feature:"reports"},{default:u(()=>[l(le,{"aria-label":"reports row",style:{height:"calc(100vh - 64px)"},class:"d-flex align-stretch ma-0"},{default:u(()=>[l(q,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[v("div",iOe,[l(oOe,{filters:m.value,loading:o.value,onFilterChange:p,onStartReport:g,onClearFilters:y},null,8,["filters","loading"])])]),_:1}),l(q,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[v("div",lOe,[l(ee,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[l(ee,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(Q,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[A.value.length>0?(U(),me(We,{key:0},[v("strong",null,K(A.value.length),1),M(" report"+K(A.value.length!==1?"s":"")+" available ",1)],64)):(U(),me("strong",uOe,"Generate Reports"))]),_:1})]),_:1}),o.value?(U(),pe(le,{key:0,"no-gutters":""},{default:u(()=>[l(q,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[v("div",cOe,[l(z,{"model-value":i.value,color:"primary",size:"64",width:"6"},{default:u(()=>[M(K(i.value)+"% ",1)]),_:1},8,["model-value"]),v("div",dOe,K(c.value||"Generating report..."),1),d.value?(U(),me("div",AOe,[l(ee,{class:"mx-auto","max-width":"300",outlined:""},{default:u(()=>[l(X,{class:"text-h6"},{default:u(()=>[...N[2]||(N[2]=[M("Report Summary",-1)])]),_:1}),l(Q,null,{default:u(()=>[v("div",fOe,[N[3]||(N[3]=v("strong",null,"Report Type:",-1)),M(" "+K(d.value.reportType),1)]),v("div",mOe,[N[4]||(N[4]=v("strong",null,"Total Records:",-1)),M(" "+K(d.value.totalRecords),1)]),d.value.dateRange?(U(),me("div",vOe,[N[5]||(N[5]=v("strong",null,"Date Range:",-1)),M(" "+K(d.value.dateRange.from)+" - "+K(d.value.dateRange.to),1)])):ge("",!0),f.value&&d.value.filename?(U(),me("div",hOe,[N[6]||(N[6]=v("strong",null,"File:",-1)),M(" "+K(d.value.filename),1)])):ge("",!0)]),_:1})]),_:1})])):ge("",!0)])]),_:1})]),_:1})):A.value.length>0?(U(),pe(le,{key:1,"no-gutters":""},{default:u(()=>[l(q,{cols:"12",class:"scroll-element mt-2",style:{"padding-bottom":"20px"}},{default:u(()=>[l(re,{headers:h.value,items:A.value,class:"elevation-1 ma-2",density:"comfortable"},null,8,["headers","items"])]),_:1})]),_:1})):(U(),pe(le,{key:2,"no-gutters":"",style:{height:"calc(100% - 60px)"}},{default:u(()=>[l(q,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%"}},{default:u(()=>[v("div",pOe,[l(de,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...N[7]||(N[7]=[M("mdi-chart-line",-1)])]),_:1}),N[8]||(N[8]=v("div",{class:"text-h6 mb-2"},"Generate Reports",-1)),N[9]||(N[9]=v("div",{class:"text-body-2 text-medium-emphasis"},"Configure report settings and generate comprehensive clinic reports",-1))])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1}),l(G,{modelValue:n.value,"onUpdate:modelValue":N[0]||(N[0]=ce=>n.value=ce),class:"elevation-24",color:"success"},{default:u(()=>[M(K(a.value),1)]),_:1},8,["modelValue"]),l(G,{modelValue:r.value,"onUpdate:modelValue":N[1]||(N[1]=ce=>r.value=ce),class:"elevation-24",color:"error"},{default:u(()=>[M(K(s.value),1)]),_:1},8,["modelValue"])]),_:1})]),_:1})}}},yOe=Xt(gOe,[["__scopeId","data-v-8ffafc0c"]]),_Oe={class:"filter-container pa-3",style:{flex:"1 1 auto","overflow-y":"auto"}},wOe={class:"filter-field mb-3"},bOe={class:"filter-field mb-3"},xOe={class:"status-chip-wrapper"},COe={class:"d-flex justify-center mt-4 mb-2"},SOe={class:"d-flex justify-center"},EOe={__name:"PharmacyQueueFilter",props:{billDate:{type:String,default:""},status:{type:String,default:null},isSearching:{type:Boolean,default:!1}},emits:["filter-change","search","clear"],setup(e,{emit:t}){const n=e,a=t,r=V(n.billDate||""),s=V(n.status!==null?n.status:null),o=[{value:null,label:"All"},{value:"Draft",label:"Draft"},{value:"Finalized",label:"Finalized"},{value:"Cancelled",label:"Cancelled"},{value:"Refund",label:"Refund"}],i=ae(()=>Un()),c=ae(()=>!!r.value||s.value!==null),A=()=>{h()},d=()=>{r.value="",h()},f=()=>{h()},m=g=>{s.value=g,f()},h=()=>{a("filter-change",{billDate:r.value,status:s.value,hasErrors:!1,hasFilters:c.value})},p=()=>{a("search",{billDate:r.value,status:s.value})},y=()=>{r.value="",s.value=null,a("clear"),h()};return Ke(()=>n.billDate,g=>{r.value=g||""}),Ke(()=>n.status,g=>{s.value=g!==void 0?g:null}),h(),(g,w)=>{const b=I("v-card-text"),x=I("v-card"),T=I("v-text-field"),F=I("v-icon"),k=I("v-chip"),S=I("v-btn");return U(),pe(x,{color:"surfaceContainer",flat:"",style:{height:"100%",display:"flex","flex-direction":"column"}},{default:u(()=>[l(x,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(b,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...w[1]||(w[1]=[v("span",{class:"text-body-2 font-weight-medium"},"Filter Pharmacy Bills",-1)])]),_:1})]),_:1}),v("div",_Oe,[v("div",wOe,[l(T,{modelValue:r.value,"onUpdate:modelValue":[w[0]||(w[0]=E=>r.value=E),A],type:"date",label:"Bill Date",density:"compact",variant:"outlined",clearable:"","hide-details":"auto",class:"filter-input date-input",max:i.value,"onClick:clear":d},null,8,["modelValue","max"])]),v("div",bOe,[w[3]||(w[3]=v("div",{class:"filter-section-label mb-2"},"Status",-1)),v("div",xOe,[(U(),me(We,null,qt(o,E=>l(k,{key:E.value,size:"small",variant:s.value===E.value?"flat":"outlined",color:s.value===E.value?"primary":"default",class:ct(["status-chip",{"status-chip-active":s.value===E.value}]),onClick:C=>m(E.value)},{default:u(()=>[s.value===E.value?(U(),pe(F,{key:0,size:"small",class:"mr-1"},{default:u(()=>[...w[2]||(w[2]=[M(" mdi-check-circle ",-1)])]),_:1})):ge("",!0),M(" "+K(E.label),1)]),_:2},1032,["variant","color","class","onClick"])),64))])]),v("div",COe,[l(S,{color:"primary",size:"small","prepend-icon":"mdi-magnify",onClick:p,class:"filter-button",loading:e.isSearching},{default:u(()=>[...w[4]||(w[4]=[M(" Search ",-1)])]),_:1},8,["loading"])]),v("div",SOe,[l(S,{variant:"text",size:"small","prepend-icon":"mdi-filter-remove",onClick:y,class:"filter-button-clear",disabled:!c.value},{default:u(()=>[...w[5]||(w[5]=[M(" Clear ",-1)])]),_:1},8,["disabled"])])])]),_:1})}}},BOe=Xt(EOe,[["__scopeId","data-v-95bbd6af"]]);var av=9e15,cA=1e9,KE="0123456789abcdef",C2="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",S2="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",WE={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-av,maxE:av,crypto:!1},O9,Sc,Kn=!0,Gw="[DecimalError] ",nA=Gw+"Invalid argument: ",H9=Gw+"Precision limit exceeded",$9=Gw+"crypto unavailable",Q9="[object Decimal]",xo=Math.floor,ys=Math.pow,kOe=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,TOe=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,IOe=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,G9=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Hl=1e7,Fn=7,FOe=9007199254740991,POe=C2.length-1,jE=S2.length-1,Qt={toStringTag:Q9};Qt.absoluteValue=Qt.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),En(e)};Qt.ceil=function(){return En(new this.constructor(this),this.e+1,2)};Qt.clampedTo=Qt.clamp=function(e,t){var n,a=this,r=a.constructor;if(e=new r(e),t=new r(t),!e.s||!t.s)return new r(NaN);if(e.gt(t))throw Error(nA+t);return n=a.cmp(e),n<0?e:a.cmp(t)>0?t:new r(a)};Qt.comparedTo=Qt.cmp=function(e){var t,n,a,r,s=this,o=s.d,i=(e=new s.constructor(e)).d,c=s.s,A=e.s;if(!o||!i)return!c||!A?NaN:c!==A?c:o===i?0:!o^c<0?1:-1;if(!o[0]||!i[0])return o[0]?c:i[0]?-A:0;if(c!==A)return c;if(s.e!==e.e)return s.e>e.e^c<0?1:-1;for(a=o.length,r=i.length,t=0,n=a<r?a:r;t<n;++t)if(o[t]!==i[t])return o[t]>i[t]^c<0?1:-1;return a===r?0:a>r^c<0?1:-1};Qt.cosine=Qt.cos=function(){var e,t,n=this,a=n.constructor;return n.d?n.d[0]?(e=a.precision,t=a.rounding,a.precision=e+Math.max(n.e,n.sd())+Fn,a.rounding=1,n=DOe(a,q9(a,n)),a.precision=e,a.rounding=t,En(Sc==2||Sc==3?n.neg():n,e,t,!0)):new a(1):new a(NaN)};Qt.cubeRoot=Qt.cbrt=function(){var e,t,n,a,r,s,o,i,c,A,d=this,f=d.constructor;if(!d.isFinite()||d.isZero())return new f(d);for(Kn=!1,s=d.s*ys(d.s*d,1/3),!s||Math.abs(s)==1/0?(n=Ys(d.d),e=d.e,(s=(e-n.length+1)%3)&&(n+=s==1||s==-2?"0":"00"),s=ys(n,1/3),e=xo((e+1)/3)-(e%3==(e<0?-1:2)),s==1/0?n="5e"+e:(n=s.toExponential(),n=n.slice(0,n.indexOf("e")+1)+e),a=new f(n),a.s=d.s):a=new f(s.toString()),o=(e=f.precision)+3;;)if(i=a,c=i.times(i).times(i),A=c.plus(d),a=ur(A.plus(d).times(i),A.plus(c),o+2,1),Ys(i.d).slice(0,o)===(n=Ys(a.d)).slice(0,o))if(n=n.slice(o-3,o+1),n=="9999"||!r&&n=="4999"){if(!r&&(En(i,e+1,0),i.times(i).times(i).eq(d))){a=i;break}o+=4,r=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(En(a,e+1,1),t=!a.times(a).times(a).eq(d));break}return Kn=!0,En(a,e,f.rounding,t)};Qt.decimalPlaces=Qt.dp=function(){var e,t=this.d,n=NaN;if(t){if(e=t.length-1,n=(e-xo(this.e/Fn))*Fn,e=t[e],e)for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n};Qt.dividedBy=Qt.div=function(e){return ur(this,new this.constructor(e))};Qt.dividedToIntegerBy=Qt.divToInt=function(e){var t=this,n=t.constructor;return En(ur(t,new n(e),0,1,1),n.precision,n.rounding)};Qt.equals=Qt.eq=function(e){return this.cmp(e)===0};Qt.floor=function(){return En(new this.constructor(this),this.e+1,3)};Qt.greaterThan=Qt.gt=function(e){return this.cmp(e)>0};Qt.greaterThanOrEqualTo=Qt.gte=function(e){var t=this.cmp(e);return t==1||t===0};Qt.hyperbolicCosine=Qt.cosh=function(){var e,t,n,a,r,s=this,o=s.constructor,i=new o(1);if(!s.isFinite())return new o(s.s?1/0:NaN);if(s.isZero())return i;n=o.precision,a=o.rounding,o.precision=n+Math.max(s.e,s.sd())+4,o.rounding=1,r=s.d.length,r<32?(e=Math.ceil(r/3),t=(1/Kw(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),s=qv(o,1,s.times(t),new o(1),!0);for(var c,A=e,d=new o(8);A--;)c=s.times(s),s=i.minus(c.times(d.minus(c.times(d))));return En(s,o.precision=n,o.rounding=a,!0)};Qt.hyperbolicSine=Qt.sinh=function(){var e,t,n,a,r=this,s=r.constructor;if(!r.isFinite()||r.isZero())return new s(r);if(t=s.precision,n=s.rounding,s.precision=t+Math.max(r.e,r.sd())+4,s.rounding=1,a=r.d.length,a<3)r=qv(s,2,r,r,!0);else{e=1.4*Math.sqrt(a),e=e>16?16:e|0,r=r.times(1/Kw(5,e)),r=qv(s,2,r,r,!0);for(var o,i=new s(5),c=new s(16),A=new s(20);e--;)o=r.times(r),r=r.times(i.plus(o.times(c.times(o).plus(A))))}return s.precision=t,s.rounding=n,En(r,t,n,!0)};Qt.hyperbolicTangent=Qt.tanh=function(){var e,t,n=this,a=n.constructor;return n.isFinite()?n.isZero()?new a(n):(e=a.precision,t=a.rounding,a.precision=e+7,a.rounding=1,ur(n.sinh(),n.cosh(),a.precision=e,a.rounding=t)):new a(n.s)};Qt.inverseCosine=Qt.acos=function(){var e=this,t=e.constructor,n=e.abs().cmp(1),a=t.precision,r=t.rounding;return n!==-1?n===0?e.isNeg()?Eu(t,a,r):new t(0):new t(NaN):e.isZero()?Eu(t,a+4,r).times(.5):(t.precision=a+6,t.rounding=1,e=new t(1).minus(e).div(e.plus(1)).sqrt().atan(),t.precision=a,t.rounding=r,e.times(2))};Qt.inverseHyperbolicCosine=Qt.acosh=function(){var e,t,n=this,a=n.constructor;return n.lte(1)?new a(n.eq(1)?0:NaN):n.isFinite()?(e=a.precision,t=a.rounding,a.precision=e+Math.max(Math.abs(n.e),n.sd())+4,a.rounding=1,Kn=!1,n=n.times(n).minus(1).sqrt().plus(n),Kn=!0,a.precision=e,a.rounding=t,n.ln()):new a(n)};Qt.inverseHyperbolicSine=Qt.asinh=function(){var e,t,n=this,a=n.constructor;return!n.isFinite()||n.isZero()?new a(n):(e=a.precision,t=a.rounding,a.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,a.rounding=1,Kn=!1,n=n.times(n).plus(1).sqrt().plus(n),Kn=!0,a.precision=e,a.rounding=t,n.ln())};Qt.inverseHyperbolicTangent=Qt.atanh=function(){var e,t,n,a,r=this,s=r.constructor;return r.isFinite()?r.e>=0?new s(r.abs().eq(1)?r.s/0:r.isZero()?r:NaN):(e=s.precision,t=s.rounding,a=r.sd(),Math.max(a,e)<2*-r.e-1?En(new s(r),e,t,!0):(s.precision=n=a-r.e,r=ur(r.plus(1),new s(1).minus(r),n+e,1),s.precision=e+4,s.rounding=1,r=r.ln(),s.precision=e,s.rounding=t,r.times(.5))):new s(NaN)};Qt.inverseSine=Qt.asin=function(){var e,t,n,a,r=this,s=r.constructor;return r.isZero()?new s(r):(t=r.abs().cmp(1),n=s.precision,a=s.rounding,t!==-1?t===0?(e=Eu(s,n+4,a).times(.5),e.s=r.s,e):new s(NaN):(s.precision=n+6,s.rounding=1,r=r.div(new s(1).minus(r.times(r)).sqrt().plus(1)).atan(),s.precision=n,s.rounding=a,r.times(2)))};Qt.inverseTangent=Qt.atan=function(){var e,t,n,a,r,s,o,i,c,A=this,d=A.constructor,f=d.precision,m=d.rounding;if(A.isFinite()){if(A.isZero())return new d(A);if(A.abs().eq(1)&&f+4<=jE)return o=Eu(d,f+4,m).times(.25),o.s=A.s,o}else{if(!A.s)return new d(NaN);if(f+4<=jE)return o=Eu(d,f+4,m).times(.5),o.s=A.s,o}for(d.precision=i=f+10,d.rounding=1,n=Math.min(28,i/Fn+2|0),e=n;e;--e)A=A.div(A.times(A).plus(1).sqrt().plus(1));for(Kn=!1,t=Math.ceil(i/Fn),a=1,c=A.times(A),o=new d(A),r=A;e!==-1;)if(r=r.times(c),s=o.minus(r.div(a+=2)),r=r.times(c),o=s.plus(r.div(a+=2)),o.d[t]!==void 0)for(e=t;o.d[e]===s.d[e]&&e--;);return n&&(o=o.times(2<<n-1)),Kn=!0,En(o,d.precision=f,d.rounding=m,!0)};Qt.isFinite=function(){return!!this.d};Qt.isInteger=Qt.isInt=function(){return!!this.d&&xo(this.e/Fn)>this.d.length-2};Qt.isNaN=function(){return!this.s};Qt.isNegative=Qt.isNeg=function(){return this.s<0};Qt.isPositive=Qt.isPos=function(){return this.s>0};Qt.isZero=function(){return!!this.d&&this.d[0]===0};Qt.lessThan=Qt.lt=function(e){return this.cmp(e)<0};Qt.lessThanOrEqualTo=Qt.lte=function(e){return this.cmp(e)<1};Qt.logarithm=Qt.log=function(e){var t,n,a,r,s,o,i,c,A=this,d=A.constructor,f=d.precision,m=d.rounding,h=5;if(e==null)e=new d(10),t=!0;else{if(e=new d(e),n=e.d,e.s<0||!n||!n[0]||e.eq(1))return new d(NaN);t=e.eq(10)}if(n=A.d,A.s<0||!n||!n[0]||A.eq(1))return new d(n&&!n[0]?-1/0:A.s!=1?NaN:n?0:1/0);if(t)if(n.length>1)s=!0;else{for(r=n[0];r%10===0;)r/=10;s=r!==1}if(Kn=!1,i=f+h,o=Pd(A,i),a=t?E2(d,i+10):Pd(e,i),c=ur(o,a,i,1),q0(c.d,r=f,m))do if(i+=10,o=Pd(A,i),a=t?E2(d,i+10):Pd(e,i),c=ur(o,a,i,1),!s){+Ys(c.d).slice(r+1,r+15)+1==1e14&&(c=En(c,f+1,0));break}while(q0(c.d,r+=10,m));return Kn=!0,En(c,f,m)};Qt.minus=Qt.sub=function(e){var t,n,a,r,s,o,i,c,A,d,f,m,h=this,p=h.constructor;if(e=new p(e),!h.d||!e.d)return!h.s||!e.s?e=new p(NaN):h.d?e.s=-e.s:e=new p(e.d||h.s!==e.s?h:NaN),e;if(h.s!=e.s)return e.s=-e.s,h.plus(e);if(A=h.d,m=e.d,i=p.precision,c=p.rounding,!A[0]||!m[0]){if(m[0])e.s=-e.s;else if(A[0])e=new p(h);else return new p(c===3?-0:0);return Kn?En(e,i,c):e}if(n=xo(e.e/Fn),d=xo(h.e/Fn),A=A.slice(),s=d-n,s){for(f=s<0,f?(t=A,s=-s,o=m.length):(t=m,n=d,o=A.length),a=Math.max(Math.ceil(i/Fn),o)+2,s>a&&(s=a,t.length=1),t.reverse(),a=s;a--;)t.push(0);t.reverse()}else{for(a=A.length,o=m.length,f=a<o,f&&(o=a),a=0;a<o;a++)if(A[a]!=m[a]){f=A[a]<m[a];break}s=0}for(f&&(t=A,A=m,m=t,e.s=-e.s),o=A.length,a=m.length-o;a>0;--a)A[o++]=0;for(a=m.length;a>s;){if(A[--a]<m[a]){for(r=a;r&&A[--r]===0;)A[r]=Hl-1;--A[r],A[a]+=Hl}A[a]-=m[a]}for(;A[--o]===0;)A.pop();for(;A[0]===0;A.shift())--n;return A[0]?(e.d=A,e.e=zw(A,n),Kn?En(e,i,c):e):new p(c===3?-0:0)};Qt.modulo=Qt.mod=function(e){var t,n=this,a=n.constructor;return e=new a(e),!n.d||!e.s||e.d&&!e.d[0]?new a(NaN):!e.d||n.d&&!n.d[0]?En(new a(n),a.precision,a.rounding):(Kn=!1,a.modulo==9?(t=ur(n,e.abs(),0,3,1),t.s*=e.s):t=ur(n,e,0,a.modulo,1),t=t.times(e),Kn=!0,n.minus(t))};Qt.naturalExponential=Qt.exp=function(){return qE(this)};Qt.naturalLogarithm=Qt.ln=function(){return Pd(this)};Qt.negated=Qt.neg=function(){var e=new this.constructor(this);return e.s=-e.s,En(e)};Qt.plus=Qt.add=function(e){var t,n,a,r,s,o,i,c,A,d,f=this,m=f.constructor;if(e=new m(e),!f.d||!e.d)return!f.s||!e.s?e=new m(NaN):f.d||(e=new m(e.d||f.s===e.s?f:NaN)),e;if(f.s!=e.s)return e.s=-e.s,f.minus(e);if(A=f.d,d=e.d,i=m.precision,c=m.rounding,!A[0]||!d[0])return d[0]||(e=new m(f)),Kn?En(e,i,c):e;if(s=xo(f.e/Fn),a=xo(e.e/Fn),A=A.slice(),r=s-a,r){for(r<0?(n=A,r=-r,o=d.length):(n=d,a=s,o=A.length),s=Math.ceil(i/Fn),o=s>o?s+1:o+1,r>o&&(r=o,n.length=1),n.reverse();r--;)n.push(0);n.reverse()}for(o=A.length,r=d.length,o-r<0&&(r=o,n=d,d=A,A=n),t=0;r;)t=(A[--r]=A[r]+d[r]+t)/Hl|0,A[r]%=Hl;for(t&&(A.unshift(t),++a),o=A.length;A[--o]==0;)A.pop();return e.d=A,e.e=zw(A,a),Kn?En(e,i,c):e};Qt.precision=Qt.sd=function(e){var t,n=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(nA+e);return n.d?(t=z9(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t};Qt.round=function(){var e=this,t=e.constructor;return En(new t(e),e.e+1,t.rounding)};Qt.sine=Qt.sin=function(){var e,t,n=this,a=n.constructor;return n.isFinite()?n.isZero()?new a(n):(e=a.precision,t=a.rounding,a.precision=e+Math.max(n.e,n.sd())+Fn,a.rounding=1,n=ROe(a,q9(a,n)),a.precision=e,a.rounding=t,En(Sc>2?n.neg():n,e,t,!0)):new a(NaN)};Qt.squareRoot=Qt.sqrt=function(){var e,t,n,a,r,s,o=this,i=o.d,c=o.e,A=o.s,d=o.constructor;if(A!==1||!i||!i[0])return new d(!A||A<0&&(!i||i[0])?NaN:i?o:1/0);for(Kn=!1,A=Math.sqrt(+o),A==0||A==1/0?(t=Ys(i),(t.length+c)%2==0&&(t+="0"),A=Math.sqrt(t),c=xo((c+1)/2)-(c<0||c%2),A==1/0?t="5e"+c:(t=A.toExponential(),t=t.slice(0,t.indexOf("e")+1)+c),a=new d(t)):a=new d(A.toString()),n=(c=d.precision)+3;;)if(s=a,a=s.plus(ur(o,s,n+2,1)).times(.5),Ys(s.d).slice(0,n)===(t=Ys(a.d)).slice(0,n))if(t=t.slice(n-3,n+1),t=="9999"||!r&&t=="4999"){if(!r&&(En(s,c+1,0),s.times(s).eq(o))){a=s;break}n+=4,r=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(En(a,c+1,1),e=!a.times(a).eq(o));break}return Kn=!0,En(a,c,d.rounding,e)};Qt.tangent=Qt.tan=function(){var e,t,n=this,a=n.constructor;return n.isFinite()?n.isZero()?new a(n):(e=a.precision,t=a.rounding,a.precision=e+10,a.rounding=1,n=n.sin(),n.s=1,n=ur(n,new a(1).minus(n.times(n)).sqrt(),e+10,0),a.precision=e,a.rounding=t,En(Sc==2||Sc==4?n.neg():n,e,t,!0)):new a(NaN)};Qt.times=Qt.mul=function(e){var t,n,a,r,s,o,i,c,A,d=this,f=d.constructor,m=d.d,h=(e=new f(e)).d;if(e.s*=d.s,!m||!m[0]||!h||!h[0])return new f(!e.s||m&&!m[0]&&!h||h&&!h[0]&&!m?NaN:!m||!h?e.s/0:e.s*0);for(n=xo(d.e/Fn)+xo(e.e/Fn),c=m.length,A=h.length,c<A&&(s=m,m=h,h=s,o=c,c=A,A=o),s=[],o=c+A,a=o;a--;)s.push(0);for(a=A;--a>=0;){for(t=0,r=c+a;r>a;)i=s[r]+h[a]*m[r-a-1]+t,s[r--]=i%Hl|0,t=i/Hl|0;s[r]=(s[r]+t)%Hl|0}for(;!s[--o];)s.pop();return t?++n:s.shift(),e.d=s,e.e=zw(s,n),Kn?En(e,f.precision,f.rounding):e};Qt.toBinary=function(e,t){return r4(this,2,e,t)};Qt.toDecimalPlaces=Qt.toDP=function(e,t){var n=this,a=n.constructor;return n=new a(n),e===void 0?n:(di(e,0,cA),t===void 0?t=a.rounding:di(t,0,8),En(n,e+n.e+1,t))};Qt.toExponential=function(e,t){var n,a=this,r=a.constructor;return e===void 0?n=Lu(a,!0):(di(e,0,cA),t===void 0?t=r.rounding:di(t,0,8),a=En(new r(a),e+1,t),n=Lu(a,!0,e+1)),a.isNeg()&&!a.isZero()?"-"+n:n};Qt.toFixed=function(e,t){var n,a,r=this,s=r.constructor;return e===void 0?n=Lu(r):(di(e,0,cA),t===void 0?t=s.rounding:di(t,0,8),a=En(new s(r),e+r.e+1,t),n=Lu(a,!1,e+a.e+1)),r.isNeg()&&!r.isZero()?"-"+n:n};Qt.toFraction=function(e){var t,n,a,r,s,o,i,c,A,d,f,m,h=this,p=h.d,y=h.constructor;if(!p)return new y(h);if(A=n=new y(1),a=c=new y(0),t=new y(a),s=t.e=z9(p)-h.e-1,o=s%Fn,t.d[0]=ys(10,o<0?Fn+o:o),e==null)e=s>0?t:A;else{if(i=new y(e),!i.isInt()||i.lt(A))throw Error(nA+i);e=i.gt(t)?s>0?t:A:i}for(Kn=!1,i=new y(Ys(p)),d=y.precision,y.precision=s=p.length*Fn*2;f=ur(i,t,0,1,1),r=n.plus(f.times(a)),r.cmp(e)!=1;)n=a,a=r,r=A,A=c.plus(f.times(r)),c=r,r=t,t=i.minus(f.times(r)),i=r;return r=ur(e.minus(n),a,0,1,1),c=c.plus(r.times(A)),n=n.plus(r.times(a)),c.s=A.s=h.s,m=ur(A,a,s,1).minus(h).abs().cmp(ur(c,n,s,1).minus(h).abs())<1?[A,a]:[c,n],y.precision=d,Kn=!0,m};Qt.toHexadecimal=Qt.toHex=function(e,t){return r4(this,16,e,t)};Qt.toNearest=function(e,t){var n=this,a=n.constructor;if(n=new a(n),e==null){if(!n.d)return n;e=new a(1),t=a.rounding}else{if(e=new a(e),t===void 0?t=a.rounding:di(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(Kn=!1,n=ur(n,e,0,t,1).times(e),Kn=!0,En(n)):(e.s=n.s,n=e),n};Qt.toNumber=function(){return+this};Qt.toOctal=function(e,t){return r4(this,8,e,t)};Qt.toPower=Qt.pow=function(e){var t,n,a,r,s,o,i=this,c=i.constructor,A=+(e=new c(e));if(!i.d||!e.d||!i.d[0]||!e.d[0])return new c(ys(+i,A));if(i=new c(i),i.eq(1))return i;if(a=c.precision,s=c.rounding,e.eq(1))return En(i,a,s);if(t=xo(e.e/Fn),t>=e.d.length-1&&(n=A<0?-A:A)<=FOe)return r=K9(c,i,n,a),e.s<0?new c(1).div(r):En(r,a,s);if(o=i.s,o<0){if(t<e.d.length-1)return new c(NaN);if((e.d[t]&1)==0&&(o=1),i.e==0&&i.d[0]==1&&i.d.length==1)return i.s=o,i}return n=ys(+i,A),t=n==0||!isFinite(n)?xo(A*(Math.log("0."+Ys(i.d))/Math.LN10+i.e+1)):new c(n+"").e,t>c.maxE+1||t<c.minE-1?new c(t>0?o/0:0):(Kn=!1,c.rounding=i.s=1,n=Math.min(12,(t+"").length),r=qE(e.times(Pd(i,a+n)),a),r.d&&(r=En(r,a+5,1),q0(r.d,a,s)&&(t=a+10,r=En(qE(e.times(Pd(i,t+n)),t),t+5,1),+Ys(r.d).slice(a+1,a+15)+1==1e14&&(r=En(r,a+1,0)))),r.s=o,Kn=!0,c.rounding=s,En(r,a,s))};Qt.toPrecision=function(e,t){var n,a=this,r=a.constructor;return e===void 0?n=Lu(a,a.e<=r.toExpNeg||a.e>=r.toExpPos):(di(e,1,cA),t===void 0?t=r.rounding:di(t,0,8),a=En(new r(a),e,t),n=Lu(a,e<=a.e||a.e<=r.toExpNeg,e)),a.isNeg()&&!a.isZero()?"-"+n:n};Qt.toSignificantDigits=Qt.toSD=function(e,t){var n=this,a=n.constructor;return e===void 0?(e=a.precision,t=a.rounding):(di(e,1,cA),t===void 0?t=a.rounding:di(t,0,8)),En(new a(n),e,t)};Qt.toString=function(){var e=this,t=e.constructor,n=Lu(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n};Qt.truncated=Qt.trunc=function(){return En(new this.constructor(this),this.e+1,1)};Qt.valueOf=Qt.toJSON=function(){var e=this,t=e.constructor,n=Lu(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};function Ys(e){var t,n,a,r=e.length-1,s="",o=e[0];if(r>0){for(s+=o,t=1;t<r;t++)a=e[t]+"",n=Fn-a.length,n&&(s+=_d(n)),s+=a;o=e[t],a=o+"",n=Fn-a.length,n&&(s+=_d(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}function di(e,t,n){if(e!==~~e||e<t||e>n)throw Error(nA+e)}function q0(e,t,n,a){var r,s,o,i;for(s=e[0];s>=10;s/=10)--t;return--t<0?(t+=Fn,r=0):(r=Math.ceil((t+1)/Fn),t%=Fn),s=ys(10,Fn-t),i=e[r]%s|0,a==null?t<3?(t==0?i=i/100|0:t==1&&(i=i/10|0),o=n<4&&i==99999||n>3&&i==49999||i==5e4||i==0):o=(n<4&&i+1==s||n>3&&i+1==s/2)&&(e[r+1]/s/100|0)==ys(10,t-2)-1||(i==s/2||i==0)&&(e[r+1]/s/100|0)==0:t<4?(t==0?i=i/1e3|0:t==1?i=i/100|0:t==2&&(i=i/10|0),o=(a||n<4)&&i==9999||!a&&n>3&&i==4999):o=((a||n<4)&&i+1==s||!a&&n>3&&i+1==s/2)&&(e[r+1]/s/1e3|0)==ys(10,t-3)-1,o}function l_(e,t,n){for(var a,r=[0],s,o=0,i=e.length;o<i;){for(s=r.length;s--;)r[s]*=t;for(r[0]+=KE.indexOf(e.charAt(o++)),a=0;a<r.length;a++)r[a]>n-1&&(r[a+1]===void 0&&(r[a+1]=0),r[a+1]+=r[a]/n|0,r[a]%=n)}return r.reverse()}function DOe(e,t){var n,a,r;if(t.isZero())return t;a=t.d.length,a<32?(n=Math.ceil(a/3),r=(1/Kw(4,n)).toString()):(n=16,r="2.3283064365386962890625e-10"),e.precision+=n,t=qv(e,1,t.times(r),new e(1));for(var s=n;s--;){var o=t.times(t);t=o.times(o).minus(o).times(8).plus(1)}return e.precision-=n,t}var ur=(function(){function e(a,r,s){var o,i=0,c=a.length;for(a=a.slice();c--;)o=a[c]*r+i,a[c]=o%s|0,i=o/s|0;return i&&a.unshift(i),a}function t(a,r,s,o){var i,c;if(s!=o)c=s>o?1:-1;else for(i=c=0;i<s;i++)if(a[i]!=r[i]){c=a[i]>r[i]?1:-1;break}return c}function n(a,r,s,o){for(var i=0;s--;)a[s]-=i,i=a[s]<r[s]?1:0,a[s]=i*o+a[s]-r[s];for(;!a[0]&&a.length>1;)a.shift()}return function(a,r,s,o,i,c){var A,d,f,m,h,p,y,g,w,b,x,T,F,k,S,E,C,D,P,O,H=a.constructor,ie=a.s==r.s?1:-1,Ae=a.d,j=r.d;if(!Ae||!Ae[0]||!j||!j[0])return new H(!a.s||!r.s||(Ae?j&&Ae[0]==j[0]:!j)?NaN:Ae&&Ae[0]==0||!j?ie*0:ie/0);for(c?(h=1,d=a.e-r.e):(c=Hl,h=Fn,d=xo(a.e/h)-xo(r.e/h)),P=j.length,C=Ae.length,w=new H(ie),b=w.d=[],f=0;j[f]==(Ae[f]||0);f++);if(j[f]>(Ae[f]||0)&&d--,s==null?(k=s=H.precision,o=H.rounding):i?k=s+(a.e-r.e)+1:k=s,k<0)b.push(1),p=!0;else{if(k=k/h+2|0,f=0,P==1){for(m=0,j=j[0],k++;(f<C||m)&&k--;f++)S=m*c+(Ae[f]||0),b[f]=S/j|0,m=S%j|0;p=m||f<C}else{for(m=c/(j[0]+1)|0,m>1&&(j=e(j,m,c),Ae=e(Ae,m,c),P=j.length,C=Ae.length),E=P,x=Ae.slice(0,P),T=x.length;T<P;)x[T++]=0;O=j.slice(),O.unshift(0),D=j[0],j[1]>=c/2&&++D;do m=0,A=t(j,x,P,T),A<0?(F=x[0],P!=T&&(F=F*c+(x[1]||0)),m=F/D|0,m>1?(m>=c&&(m=c-1),y=e(j,m,c),g=y.length,T=x.length,A=t(y,x,g,T),A==1&&(m--,n(y,P<g?O:j,g,c))):(m==0&&(A=m=1),y=j.slice()),g=y.length,g<T&&y.unshift(0),n(x,y,T,c),A==-1&&(T=x.length,A=t(j,x,P,T),A<1&&(m++,n(x,P<T?O:j,T,c))),T=x.length):A===0&&(m++,x=[0]),b[f++]=m,A&&x[0]?x[T++]=Ae[E]||0:(x=[Ae[E]],T=1);while((E++<C||x[0]!==void 0)&&k--);p=x[0]!==void 0}b[0]||b.shift()}if(h==1)w.e=d,O9=p;else{for(f=1,m=b[0];m>=10;m/=10)f++;w.e=f+d*h-1,En(w,i?s+w.e+1:s,o,p)}return w}})();function En(e,t,n,a){var r,s,o,i,c,A,d,f,m,h=e.constructor;e:if(t!=null){if(f=e.d,!f)return e;for(r=1,i=f[0];i>=10;i/=10)r++;if(s=t-r,s<0)s+=Fn,o=t,d=f[m=0],c=d/ys(10,r-o-1)%10|0;else if(m=Math.ceil((s+1)/Fn),i=f.length,m>=i)if(a){for(;i++<=m;)f.push(0);d=c=0,r=1,s%=Fn,o=s-Fn+1}else break e;else{for(d=i=f[m],r=1;i>=10;i/=10)r++;s%=Fn,o=s-Fn+r,c=o<0?0:d/ys(10,r-o-1)%10|0}if(a=a||t<0||f[m+1]!==void 0||(o<0?d:d%ys(10,r-o-1)),A=n<4?(c||a)&&(n==0||n==(e.s<0?3:2)):c>5||c==5&&(n==4||a||n==6&&(s>0?o>0?d/ys(10,r-o):0:f[m-1])%10&1||n==(e.s<0?8:7)),t<1||!f[0])return f.length=0,A?(t-=e.e+1,f[0]=ys(10,(Fn-t%Fn)%Fn),e.e=-t||0):f[0]=e.e=0,e;if(s==0?(f.length=m,i=1,m--):(f.length=m+1,i=ys(10,Fn-s),f[m]=o>0?(d/ys(10,r-o)%ys(10,o)|0)*i:0),A)for(;;)if(m==0){for(s=1,o=f[0];o>=10;o/=10)s++;for(o=f[0]+=i,i=1;o>=10;o/=10)i++;s!=i&&(e.e++,f[0]==Hl&&(f[0]=1));break}else{if(f[m]+=i,f[m]!=Hl)break;f[m--]=0,i=1}for(s=f.length;f[--s]===0;)f.pop()}return Kn&&(e.e>h.maxE?(e.d=null,e.e=NaN):e.e<h.minE&&(e.e=0,e.d=[0])),e}function Lu(e,t,n){if(!e.isFinite())return j9(e);var a,r=e.e,s=Ys(e.d),o=s.length;return t?(n&&(a=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+_d(a):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(e.e<0?"e":"e+")+e.e):r<0?(s="0."+_d(-r-1)+s,n&&(a=n-o)>0&&(s+=_d(a))):r>=o?(s+=_d(r+1-o),n&&(a=n-r-1)>0&&(s=s+"."+_d(a))):((a=r+1)<o&&(s=s.slice(0,a)+"."+s.slice(a)),n&&(a=n-o)>0&&(r+1===o&&(s+="."),s+=_d(a))),s}function zw(e,t){var n=e[0];for(t*=Fn;n>=10;n/=10)t++;return t}function E2(e,t,n){if(t>POe)throw Kn=!0,n&&(e.precision=n),Error(H9);return En(new e(C2),t,1,!0)}function Eu(e,t,n){if(t>jE)throw Error(H9);return En(new e(S2),t,n,!0)}function z9(e){var t=e.length-1,n=t*Fn+1;if(t=e[t],t){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function _d(e){for(var t="";e--;)t+="0";return t}function K9(e,t,n,a){var r,s=new e(1),o=Math.ceil(a/Fn+4);for(Kn=!1;;){if(n%2&&(s=s.times(t),SN(s.d,o)&&(r=!0)),n=xo(n/2),n===0){n=s.d.length-1,r&&s.d[n]===0&&++s.d[n];break}t=t.times(t),SN(t.d,o)}return Kn=!0,s}function CN(e){return e.d[e.d.length-1]&1}function W9(e,t,n){for(var a,r,s=new e(t[0]),o=0;++o<t.length;){if(r=new e(t[o]),!r.s){s=r;break}a=s.cmp(r),(a===n||a===0&&s.s===n)&&(s=r)}return s}function qE(e,t){var n,a,r,s,o,i,c,A=0,d=0,f=0,m=e.constructor,h=m.rounding,p=m.precision;if(!e.d||!e.d[0]||e.e>17)return new m(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(t==null?(Kn=!1,c=p):c=t,i=new m(.03125);e.e>-2;)e=e.times(i),f+=5;for(a=Math.log(ys(2,f))/Math.LN10*2+5|0,c+=a,n=s=o=new m(1),m.precision=c;;){if(s=En(s.times(e),c,1),n=n.times(++d),i=o.plus(ur(s,n,c,1)),Ys(i.d).slice(0,c)===Ys(o.d).slice(0,c)){for(r=f;r--;)o=En(o.times(o),c,1);if(t==null)if(A<3&&q0(o.d,c-a,h,A))m.precision=c+=10,n=s=i=new m(1),d=0,A++;else return En(o,m.precision=p,h,Kn=!0);else return m.precision=p,o}o=i}}function Pd(e,t){var n,a,r,s,o,i,c,A,d,f,m,h=1,p=10,y=e,g=y.d,w=y.constructor,b=w.rounding,x=w.precision;if(y.s<0||!g||!g[0]||!y.e&&g[0]==1&&g.length==1)return new w(g&&!g[0]?-1/0:y.s!=1?NaN:g?0:y);if(t==null?(Kn=!1,d=x):d=t,w.precision=d+=p,n=Ys(g),a=n.charAt(0),Math.abs(s=y.e)<15e14){for(;a<7&&a!=1||a==1&&n.charAt(1)>3;)y=y.times(e),n=Ys(y.d),a=n.charAt(0),h++;s=y.e,a>1?(y=new w("0."+n),s++):y=new w(a+"."+n.slice(1))}else return A=E2(w,d+2,x).times(s+""),y=Pd(new w(a+"."+n.slice(1)),d-p).plus(A),w.precision=x,t==null?En(y,x,b,Kn=!0):y;for(f=y,c=o=y=ur(y.minus(1),y.plus(1),d,1),m=En(y.times(y),d,1),r=3;;){if(o=En(o.times(m),d,1),A=c.plus(ur(o,new w(r),d,1)),Ys(A.d).slice(0,d)===Ys(c.d).slice(0,d))if(c=c.times(2),s!==0&&(c=c.plus(E2(w,d+2,x).times(s+""))),c=ur(c,new w(h),d,1),t==null)if(q0(c.d,d-p,b,i))w.precision=d+=p,A=o=y=ur(f.minus(1),f.plus(1),d,1),m=En(y.times(y),d,1),r=i=1;else return En(c,w.precision=x,b,Kn=!0);else return w.precision=x,c;c=A,r+=2}}function j9(e){return String(e.s*e.s/0)}function u_(e,t){var n,a,r;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(n<0&&(n=a),n+=+t.slice(a+1),t=t.substring(0,a)):n<0&&(n=t.length),a=0;t.charCodeAt(a)===48;a++);for(r=t.length;t.charCodeAt(r-1)===48;--r);if(t=t.slice(a,r),t){if(r-=a,e.e=n=n-a-1,e.d=[],a=(n+1)%Fn,n<0&&(a+=Fn),a<r){for(a&&e.d.push(+t.slice(0,a)),r-=Fn;a<r;)e.d.push(+t.slice(a,a+=Fn));t=t.slice(a),a=Fn-t.length}else a-=r;for(;a--;)t+="0";e.d.push(+t),Kn&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function UOe(e,t){var n,a,r,s,o,i,c,A,d;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),G9.test(t))return u_(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(TOe.test(t))n=16,t=t.toLowerCase();else if(kOe.test(t))n=2;else if(IOe.test(t))n=8;else throw Error(nA+t);for(s=t.search(/p/i),s>0?(c=+t.slice(s+1),t=t.substring(2,s)):t=t.slice(2),s=t.indexOf("."),o=s>=0,a=e.constructor,o&&(t=t.replace(".",""),i=t.length,s=i-s,r=K9(a,new a(n),s,s*2)),A=l_(t,n,Hl),d=A.length-1,s=d;A[s]===0;--s)A.pop();return s<0?new a(e.s*0):(e.e=zw(A,d),e.d=A,Kn=!1,o&&(e=ur(e,r,i*4)),c&&(e=e.times(Math.abs(c)<54?ys(2,c):Zt.pow(2,c))),Kn=!0,e)}function ROe(e,t){var n,a=t.d.length;if(a<3)return t.isZero()?t:qv(e,2,t,t);n=1.4*Math.sqrt(a),n=n>16?16:n|0,t=t.times(1/Kw(5,n)),t=qv(e,2,t,t);for(var r,s=new e(5),o=new e(16),i=new e(20);n--;)r=t.times(t),t=t.times(s.plus(r.times(o.times(r).minus(i))));return t}function qv(e,t,n,a,r){var s,o,i,c,A=e.precision,d=Math.ceil(A/Fn);for(Kn=!1,c=n.times(n),i=new e(a);;){if(o=ur(i.times(c),new e(t++*t++),A,1),i=r?a.plus(o):a.minus(o),a=ur(o.times(c),new e(t++*t++),A,1),o=i.plus(a),o.d[d]!==void 0){for(s=d;o.d[s]===i.d[s]&&s--;);if(s==-1)break}s=i,i=a,a=o,o=s}return Kn=!0,o.d.length=d+1,o}function Kw(e,t){for(var n=e;--t;)n*=e;return n}function q9(e,t){var n,a=t.s<0,r=Eu(e,e.precision,1),s=r.times(.5);if(t=t.abs(),t.lte(s))return Sc=a?4:1,t;if(n=t.divToInt(r),n.isZero())Sc=a?3:2;else{if(t=t.minus(n.times(r)),t.lte(s))return Sc=CN(n)?a?2:3:a?4:1,t;Sc=CN(n)?a?1:4:a?3:2}return t.minus(r).abs()}function r4(e,t,n,a){var r,s,o,i,c,A,d,f,m,h=e.constructor,p=n!==void 0;if(p?(di(n,1,cA),a===void 0?a=h.rounding:di(a,0,8)):(n=h.precision,a=h.rounding),!e.isFinite())d=j9(e);else{for(d=Lu(e),o=d.indexOf("."),p?(r=2,t==16?n=n*4-3:t==8&&(n=n*3-2)):r=t,o>=0&&(d=d.replace(".",""),m=new h(1),m.e=d.length-o,m.d=l_(Lu(m),10,r),m.e=m.d.length),f=l_(d,10,r),s=c=f.length;f[--c]==0;)f.pop();if(!f[0])d=p?"0p+0":"0";else{if(o<0?s--:(e=new h(e),e.d=f,e.e=s,e=ur(e,m,n,a,0,r),f=e.d,s=e.e,A=O9),o=f[n],i=r/2,A=A||f[n+1]!==void 0,A=a<4?(o!==void 0||A)&&(a===0||a===(e.s<0?3:2)):o>i||o===i&&(a===4||A||a===6&&f[n-1]&1||a===(e.s<0?8:7)),f.length=n,A)for(;++f[--n]>r-1;)f[n]=0,n||(++s,f.unshift(1));for(c=f.length;!f[c-1];--c);for(o=0,d="";o<c;o++)d+=KE.charAt(f[o]);if(p){if(c>1)if(t==16||t==8){for(o=t==16?4:3,--c;c%o;c++)d+="0";for(f=l_(d,r,t),c=f.length;!f[c-1];--c);for(o=1,d="1.";o<c;o++)d+=KE.charAt(f[o])}else d=d.charAt(0)+"."+d.slice(1);d=d+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)d="0"+d;d="0."+d}else if(++s>c)for(s-=c;s--;)d+="0";else s<c&&(d=d.slice(0,s)+"."+d.slice(s))}d=(t==16?"0x":t==2?"0b":t==8?"0o":"")+d}return e.s<0?"-"+d:d}function SN(e,t){if(e.length>t)return e.length=t,!0}function NOe(e){return new this(e).abs()}function VOe(e){return new this(e).acos()}function LOe(e){return new this(e).acosh()}function MOe(e,t){return new this(e).plus(t)}function OOe(e){return new this(e).asin()}function HOe(e){return new this(e).asinh()}function $Oe(e){return new this(e).atan()}function QOe(e){return new this(e).atanh()}function GOe(e,t){e=new this(e),t=new this(t);var n,a=this.precision,r=this.rounding,s=a+4;return!e.s||!t.s?n=new this(NaN):!e.d&&!t.d?(n=Eu(this,s,1).times(t.s>0?.25:.75),n.s=e.s):!t.d||e.isZero()?(n=t.s<0?Eu(this,a,r):new this(0),n.s=e.s):!e.d||t.isZero()?(n=Eu(this,s,1).times(.5),n.s=e.s):t.s<0?(this.precision=s,this.rounding=1,n=this.atan(ur(e,t,s,1)),t=Eu(this,s,1),this.precision=a,this.rounding=r,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(ur(e,t,s,1)),n}function zOe(e){return new this(e).cbrt()}function KOe(e){return En(e=new this(e),e.e+1,2)}function WOe(e,t,n){return new this(e).clamp(t,n)}function jOe(e){if(!e||typeof e!="object")throw Error(Gw+"Object expected");var t,n,a,r=e.defaults===!0,s=["precision",1,cA,"rounding",0,8,"toExpNeg",-av,0,"toExpPos",0,av,"maxE",0,av,"minE",-av,0,"modulo",0,9];for(t=0;t<s.length;t+=3)if(n=s[t],r&&(this[n]=WE[n]),(a=e[n])!==void 0)if(xo(a)===a&&a>=s[t+1]&&a<=s[t+2])this[n]=a;else throw Error(nA+n+": "+a);if(n="crypto",r&&(this[n]=WE[n]),(a=e[n])!==void 0)if(a===!0||a===!1||a===0||a===1)if(a)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error($9);else this[n]=!1;else throw Error(nA+n+": "+a);return this}function qOe(e){return new this(e).cos()}function YOe(e){return new this(e).cosh()}function Y9(e){var t,n,a;function r(s){var o,i,c,A=this;if(!(A instanceof r))return new r(s);if(A.constructor=r,EN(s)){A.s=s.s,Kn?!s.d||s.e>r.maxE?(A.e=NaN,A.d=null):s.e<r.minE?(A.e=0,A.d=[0]):(A.e=s.e,A.d=s.d.slice()):(A.e=s.e,A.d=s.d?s.d.slice():s.d);return}if(c=typeof s,c==="number"){if(s===0){A.s=1/s<0?-1:1,A.e=0,A.d=[0];return}if(s<0?(s=-s,A.s=-1):A.s=1,s===~~s&&s<1e7){for(o=0,i=s;i>=10;i/=10)o++;Kn?o>r.maxE?(A.e=NaN,A.d=null):o<r.minE?(A.e=0,A.d=[0]):(A.e=o,A.d=[s]):(A.e=o,A.d=[s]);return}if(s*0!==0){s||(A.s=NaN),A.e=NaN,A.d=null;return}return u_(A,s.toString())}if(c==="string")return(i=s.charCodeAt(0))===45?(s=s.slice(1),A.s=-1):(i===43&&(s=s.slice(1)),A.s=1),G9.test(s)?u_(A,s):UOe(A,s);if(c==="bigint")return s<0?(s=-s,A.s=-1):A.s=1,u_(A,s.toString());throw Error(nA+s)}if(r.prototype=Qt,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.EUCLID=9,r.config=r.set=jOe,r.clone=Y9,r.isDecimal=EN,r.abs=NOe,r.acos=VOe,r.acosh=LOe,r.add=MOe,r.asin=OOe,r.asinh=HOe,r.atan=$Oe,r.atanh=QOe,r.atan2=GOe,r.cbrt=zOe,r.ceil=KOe,r.clamp=WOe,r.cos=qOe,r.cosh=YOe,r.div=XOe,r.exp=JOe,r.floor=ZOe,r.hypot=eHe,r.ln=tHe,r.log=nHe,r.log10=rHe,r.log2=aHe,r.max=sHe,r.min=oHe,r.mod=iHe,r.mul=lHe,r.pow=uHe,r.random=cHe,r.round=dHe,r.sign=AHe,r.sin=fHe,r.sinh=mHe,r.sqrt=vHe,r.sub=hHe,r.sum=pHe,r.tan=gHe,r.tanh=yHe,r.trunc=_He,e===void 0&&(e={}),e&&e.defaults!==!0)for(a=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<a.length;)e.hasOwnProperty(n=a[t++])||(e[n]=this[n]);return r.config(e),r}function XOe(e,t){return new this(e).div(t)}function JOe(e){return new this(e).exp()}function ZOe(e){return En(e=new this(e),e.e+1,3)}function eHe(){var e,t,n=new this(0);for(Kn=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return Kn=!0,new this(1/0);n=t}return Kn=!0,n.sqrt()}function EN(e){return e instanceof Zt||e&&e.toStringTag===Q9||!1}function tHe(e){return new this(e).ln()}function nHe(e,t){return new this(e).log(t)}function aHe(e){return new this(e).log(2)}function rHe(e){return new this(e).log(10)}function sHe(){return W9(this,arguments,-1)}function oHe(){return W9(this,arguments,1)}function iHe(e,t){return new this(e).mod(t)}function lHe(e,t){return new this(e).mul(t)}function uHe(e,t){return new this(e).pow(t)}function cHe(e){var t,n,a,r,s=0,o=new this(1),i=[];if(e===void 0?e=this.precision:di(e,1,cA),a=Math.ceil(e/Fn),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(a));s<a;)r=t[s],r>=429e7?t[s]=crypto.getRandomValues(new Uint32Array(1))[0]:i[s++]=r%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(a*=4);s<a;)r=t[s]+(t[s+1]<<8)+(t[s+2]<<16)+((t[s+3]&127)<<24),r>=214e7?crypto.randomBytes(4).copy(t,s):(i.push(r%1e7),s+=4);s=a/4}else throw Error($9);else for(;s<a;)i[s++]=Math.random()*1e7|0;for(a=i[--s],e%=Fn,a&&e&&(r=ys(10,Fn-e),i[s]=(a/r|0)*r);i[s]===0;s--)i.pop();if(s<0)n=0,i=[0];else{for(n=-1;i[0]===0;n-=Fn)i.shift();for(a=1,r=i[0];r>=10;r/=10)a++;a<Fn&&(n-=Fn-a)}return o.e=n,o.d=i,o}function dHe(e){return En(e=new this(e),e.e+1,this.rounding)}function AHe(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function fHe(e){return new this(e).sin()}function mHe(e){return new this(e).sinh()}function vHe(e){return new this(e).sqrt()}function hHe(e,t){return new this(e).sub(t)}function pHe(){var e=0,t=arguments,n=new this(t[e]);for(Kn=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return Kn=!0,En(n,this.precision,this.rounding)}function gHe(e){return new this(e).tan()}function yHe(e){return new this(e).tanh()}function _He(e){return En(e=new this(e),e.e+1,1)}Qt[Symbol.for("nodejs.util.inspect.custom")]=Qt.toString;Qt[Symbol.toStringTag]="Decimal";var Zt=Qt.constructor=Y9(WE);C2=new Zt(C2);S2=new Zt(S2);function X9(e){const t=V([]),n=V(!1),a=V([]),r=V(!1),s=(f=1e4)=>new Promise((m,h)=>setTimeout(()=>h(new Error("API_TIMEOUT")),f)),o=async()=>{if(!e.value){console.log("No bill ID available for loading payments"),t.value=[];return}if(n.value){console.log("Already loading payments, skipping duplicate call");return}n.value=!0,console.log("Loading payments for pharmacy bill ID:",e.value);try{const f=await Promise.race([xce(e.value),s(1e4)]);console.log("Full API response:",f),f.success?(t.value=Array.isArray(f.data)?f.data:[],console.log(" Payments loaded successfully:",t.value.length)):(console.error(" API Error loading payments:",f.error),t.value=[])}catch(f){f.message==="API_TIMEOUT"?console.error(" Payment loading timed out"):console.error(" Exception loading bill payments:",f),t.value=[]}finally{n.value=!1}},i=async f=>{if(!e.value)throw new Error("No bill ID available for payment creation");r.value=!0;try{const m={...f,amount:Number(f.amount)};console.log("Creating pharmacy payment with payload:",m);const h=await Promise.race([Cce(e.value,m),s(15e3)]);if(!h.success)throw new Error(h.error?.message||"Failed to create payment");return console.log("Payment created successfully:",h.data),await o(),h}catch(m){throw m.message==="API_TIMEOUT"?new Error("Payment creation timed out. Please try again."):m}finally{r.value=!1}},c=async f=>{if(!(!f||!e.value)){if(a.value.includes(f)){console.log("Payment already being deleted:",f);return}a.value.push(f);try{const m=await Promise.race([Sce(e.value,f),s(1e4)]);if(!m.success)throw new Error(m.error?.message||"Failed to delete payment");return console.log("Payment deleted successfully:",f),await o(),m}catch(m){throw m.message==="API_TIMEOUT"?new Error("Payment deletion timed out. Please try again."):m}finally{a.value=a.value.filter(m=>m!==f)}}},A=ae(()=>Array.isArray(t.value)?t.value.reduce((f,m)=>f+(parseFloat(m.amount)||0),0):0);let d=null;return Ke(e,async(f,m)=>{if(console.log("Bill ID watcher triggered:",{newBillId:f||"null",oldBillId:m||"null",lastBillId:d||"null"}),f===d){console.log("Bill ID unchanged, skipping reload");return}d=f,f?(console.log("Bill ID changed, loading payments for:",f),await o()):(console.log("No bill ID, clearing payments"),t.value=[])},{immediate:!0}),{billPayments:t,isLoadingPayments:n,deletingPayments:a,isSubmittingPayment:r,totalPaymentsMade:A,loadBillPayments:o,createNewPayment:i,deletePayment:c,formatPaymentAmount:Ar}}const wHe={class:"text-center"},bHe={class:"text-center"},xHe={class:"text-body-2 text-medium-emphasis mb-4"},CHe={class:"pa-1"},SHe={class:"text-body-1 font-weight-medium"},EHe={class:"text-body-2 text-medium-emphasis"},BHe={class:"pa-1"},kHe={class:"text-body-1 font-weight-medium"},THe={class:"text-body-2 text-medium-emphasis"},IHe={class:"pa-1"},FHe={class:"text-body-1 font-weight-medium"},PHe={class:"text-body-2 text-medium-emphasis"},DHe={key:0,class:"text-right",style:{width:"100px"}},UHe={key:1,class:"text-right",style:{width:"100px"}},RHe={key:2,class:"text-left",style:{width:"80px"}},NHe={class:"text-body-2 font-weight-medium"},VHe={class:"text-caption text-medium-emphasis"},LHe={key:0,class:"text-caption text-medium-emphasis"},MHe={class:"text-body-2 font-weight-medium"},OHe={key:1},HHe={class:"text-body-2"},$He={class:"text-caption text-medium-emphasis"},QHe={class:"text-right"},GHe={class:"text-right"},zHe={class:"text-right"},KHe={class:"text-right"},WHe={class:"text-right"},jHe={class:"text-right"},qHe={key:1},YHe={key:0,class:"text-right"},XHe={class:"text-body-2"},JHe={key:1,class:"text-right"},ZHe={class:"text-right font-weight-medium"},e$e={key:2},t$e={key:0},n$e={key:1},a$e={class:"text-body-2 mb-1"},r$e={class:"text-body-2 mb-1"},s$e={key:0,class:"text-body-2 mb-1"},o$e={class:"text-body-2 mb-1"},i$e={class:"text-body-2 mb-1"},l$e={class:"text-body-2 mb-1"},u$e={class:"text-body-2 mb-1"},c$e={key:0,class:"text-body-2 mb-1"},d$e={class:"text-body-2 mb-1"},A$e={class:"text-body-2 mb-1"},f$e={class:"text-subtitle-1 font-weight-bold mt-2"},m$e={class:"text-h6"},v$e={key:0,class:"text-caption text-medium-emphasis mt-1"},h$e={class:"text-h6 text-success"},p$e={key:0,class:"text-caption text-info mt-1"},g$e={key:0,class:"text-center pa-4"},y$e={class:"font-weight-bold"},_$e={class:"d-flex align-center flex-wrap",style:{gap:"2px"}},w$e={class:"font-weight-medium text-body-1"},b$e={key:0,class:"text-caption text-medium-emphasis"},x$e={class:"mt-1"},C$e={class:"d-flex align-center justify-space-between flex-wrap gap-2 mt-1"},S$e={class:"d-flex align-center flex-wrap gap-2"},E$e={__name:"pharmacy-bill-edit",props:{billId:{type:[String,Number],required:!0},mode:{type:String,default:"edit",validator:e=>["edit","return"].includes(e)}},emits:["close","bill-updated"],setup(e,{emit:t}){const n=Rn(),{showSuccess:a,showError:r}=ra(),s=ae(()=>n.getters["pharmacyModule/currentPharmacyId"]),o=e,i=t,c=V(!1),A=V(null),d=V(null),f=V([]),m=V([]),h=V(0),p=V(!1),y=V(!1),g=V(!1),w=V(!1),b=V(null),x=V([]),T=V(!1),F=V("");let k=null;const S=V({}),E=V(null),C=X9(E),{billPayments:D,isLoadingPayments:P,deletingPayments:O,totalPaymentsMade:H,loadBillPayments:ie,createNewPayment:Ae,deletePayment:j}=C,J=hh,ue=V([]),ne=[Ze=>!!Ze||"Amount is required",Ze=>Ze>0||"Amount must be greater than 0",Ze=>Number.isInteger(Number(Ze))||"Amount must be a whole number"],Y=[Ze=>!!Ze||"Payment mode is required"],te=[Ze=>!!Ze||"Payment date is required"],L=()=>{ue.value.push({amount:null,mode:"Cash",paymentDate:Un(),datePickerMenu:!1})},N=Ze=>{ue.value.splice(Ze,1)},q=Ze=>{if(!Ze)return null;try{if(typeof Ze=="string")return Ze.includes("T")?Ze.split("T")[0]:Ze;if(Ze instanceof Date){const Ge=Ze.getFullYear(),xt=String(Ze.getMonth()+1).padStart(2,"0"),gt=String(Ze.getDate()).padStart(2,"0");return`${Ge}-${xt}-${gt}`}return null}catch(Ge){return console.error("Error parsing payment date:",Ge),null}},Q=(Ze,Ge)=>{if(Ze)if(Ze instanceof Date){const xt=Ze.getFullYear(),gt=String(Ze.getMonth()+1).padStart(2,"0"),Bt=String(Ze.getDate()).padStart(2,"0");Ge.paymentDate=`${xt}-${gt}-${Bt}`}else typeof Ze=="string"&&(Ge.paymentDate=Ze);else Ge.paymentDate="";Ge.datePickerMenu=!1},ee=ae(()=>Array.isArray(ue.value)?ue.value.reduce((Ze,Ge)=>Ze+(parseFloat(Ge.amount)||0),0):0),z=ae(()=>{const Ze=H.value,Ge=ee.value;return Math.max(0,lt.value-Ze-Ge)}),X=async()=>{if(ue.value.length===0){console.log("No new payment entries to create");return}console.log("Creating new payment entries:",ue.value);try{const Ze=ue.value.filter(Ge=>Ge.amount&&parseFloat(Ge.amount)>0&&Ge.mode&&Ge.paymentDate);console.log("Valid payments to create:",Ze);for(const Ge of Ze){const xt={amount:parseFloat(Ge.amount),mode:Ge.mode,paymentDate:Ge.paymentDate};console.log("Creating payment with payload:",xt);const gt=await Ae(xt);gt.success?console.log("Payment created successfully:",gt.data):(console.error("Error creating payment entry:",gt.error),r(`Failed to create payment: ${gt.error?.message||"Unknown error"}`))}ue.value=[],console.log("New payment entries cleared"),await ie()}catch(Ze){console.error("Error creating payment entries:",Ze),r("Failed to create some payments. Please try again.")}},le=async()=>{try{c.value=!0,A.value=null;const{data:Ze,error:Ge}=await fM(o.billId);if(Ge)A.value=Ge.response?.data?.error||Ge.message||"Failed to load bill",r("Error loading bill");else{if(o.mode==="return"&&Ze.status!=="Finalized"){A.value="Only finalized bills can be returned",r("Only finalized bills can be returned");return}d.value=Ze,f.value=Ze.prescriptionMedicines||[],m.value=(Ze.items||[]).map(xt=>({...xt,medicineId:xt.medicineId,medicineName:xt.medicineName,saltComposition:xt.saltComposition||"",marketer:xt.marketer||"",batchId:xt.medicineBatchId||null,batchNumber:xt.batchNumber||"",expiryDate:xt.expiryDate||null,packType:xt.packType||"",unitsPerPack:xt.unitsPerPack||1,mrp:xt.mrp||0,discountPercentage:xt.discountPercentage||0,gstPercentage:xt.gstPercentage||0,quantityUnits:xt.quantityUnits||1,availableUnits:xt.availableUnits||0,returnedQuantity:xt.returnedQuantity||0,returnQuantity:0,billItemId:xt.id})),h.value=Ze.additionalDiscountAmount||0,await de(),E.value=o.billId,await ie()}}catch(Ze){console.error("Error loading bill:",Ze),A.value=Ze.message||"An unexpected error occurred",r("Error loading bill")}finally{c.value=!1}},re=async Ze=>{if(S.value[Ze])return S.value[Ze];try{if(!s.value)return console.error("Pharmacy ID is required to load batches"),[];const{data:Ge,error:xt}=await mce(Ze,s.value);if(!xt&&Ge){const gt=Ge.map(Bt=>({id:Bt.batchId||Bt.id,label:`${Bt.batchNumber} (Exp: ${Je(Bt.expiryDate)}, Stock: ${Bt.availableUnits})`,batchNumber:Bt.batchNumber,expiryDate:Bt.expiryDate,packType:Bt.packType||"",unitsPerPack:Bt.unitsPerPack||1,availableUnits:Bt.availableUnits,mrp:Bt.mrp,discountPercentage:Bt.discountPercentage,gstPercentage:Bt.gstPercentage}));return S.value[Ze]=gt,gt}}catch(Ge){console.error("Error loading batches:",Ge)}return[]},de=async()=>{const Ze=[...new Set(m.value.map(Ge=>Ge.medicineId))];await Promise.all(Ze.map(Ge=>re(Ge)))},G=Ze=>S.value[Ze]||[],Z=async(Ze,Ge)=>{const gt=G(Ze.medicineId).find(Bt=>Bt.id===Ze.batchId);gt&&(Ze.batchNumber=gt.batchNumber,Ze.expiryDate=gt.expiryDate,Ze.packType=gt.packType||"",Ze.unitsPerPack=gt.unitsPerPack||1,Ze.mrp=gt.mrp,Ze.discountPercentage=gt.discountPercentage,Ze.gstPercentage=gt.gstPercentage,Ze.availableUnits=gt.availableUnits,ye(Ze))},ce=Ze=>{if(!Ze.mrp||!Ze.unitsPerPack||Ze.unitsPerPack<=0)return 0;const Ge=new Zt(Ze.mrp),xt=new Zt(Ze.unitsPerPack),gt=new Zt(Ze.gstPercentage||0),Bt=new Zt(Ze.discountPercentage||0),wt=Ge.dividedBy(xt),gn=new Zt(1).minus(Bt.dividedBy(100)),Wn=wt.times(gn),zn=new Zt(1).plus(gt.dividedBy(100));return Wn.dividedBy(zn).toNumber()},Se=Ze=>{if(!Ze.mrp||!Ze.unitsPerPack||Ze.unitsPerPack<=0)return 0;const Ge=new Zt(Ze.mrp),xt=new Zt(Ze.unitsPerPack),gt=new Zt(Ze.discountPercentage||0),Bt=Ge.dividedBy(xt),wt=new Zt(1).minus(gt.dividedBy(100));return Bt.times(wt).toNumber()},Pe=Ze=>{if(o.mode==="return"){const Ge=Ze.quantityUnits||0,xt=Ze.returnQuantity||0;return Math.max(0,Ge-xt)}return Ze.quantityUnits||0},ye=(Ze,Ge)=>{if(!Ze.mrp||!Ze.unitsPerPack||Ze.unitsPerPack<=0)return 0;const xt=new Zt(Ze.mrp),gt=new Zt(Ze.unitsPerPack),Bt=new Zt(Ze.discountPercentage||0),wt=Pe(Ze),gn=new Zt(wt),Wn=xt.dividedBy(gt),zn=new Zt(1).minus(Bt.dividedBy(100));return Wn.times(zn).times(gn).toNumber()},Ce=()=>{m.value.forEach((Ze,Ge)=>{ye(Ze)})},_e=ae(()=>m.value.reduce((Ge,xt)=>{if(!xt.mrp||!xt.unitsPerPack||xt.unitsPerPack<=0)return Ge;const gt=new Zt(xt.mrp),Bt=new Zt(xt.unitsPerPack),wt=Pe(xt),gn=new Zt(wt),zn=gt.dividedBy(Bt).times(gn);return Ge.plus(zn)},new Zt(0)).toNumber()),De=ae(()=>m.value.reduce((Ge,xt)=>{if(!xt.mrp||!xt.unitsPerPack||xt.unitsPerPack<=0)return Ge;const gt=new Zt(xt.mrp),Bt=new Zt(xt.unitsPerPack),wt=new Zt(xt.discountPercentage||0),gn=Pe(xt),Wn=new Zt(gn),zn=gt.dividedBy(Bt),oa=new Zt(1).minus(wt.dividedBy(100)),Ra=zn.times(oa),Qe=zn.minus(Ra).times(Wn);return Ge.plus(Qe)},new Zt(0)).toNumber()),xe=ae(()=>m.value.reduce((Ge,xt)=>{if(!xt.mrp||!xt.unitsPerPack||xt.unitsPerPack<=0)return Ge;const gt=new Zt(xt.mrp),Bt=new Zt(xt.unitsPerPack),wt=new Zt(xt.gstPercentage||0),gn=new Zt(xt.discountPercentage||0),Wn=Pe(xt),zn=new Zt(Wn),oa=gt.dividedBy(Bt),Ra=new Zt(1).minus(gn.dividedBy(100)),Be=oa.times(Ra),Qe=new Zt(1).plus(wt.dividedBy(100)),ze=Be.dividedBy(Qe).times(wt.dividedBy(100)).times(zn);return Ge.plus(ze)},new Zt(0)).toNumber()),Te=ae(()=>m.value.reduce((Ge,xt)=>{const gt=new Zt(ye(xt,m.value.indexOf(xt)));return Ge.plus(gt)},new Zt(0)).toNumber()),Me=ae(()=>{const Ze=new Zt(Te.value),Ge=new Zt(h.value||0),xt=Ze.minus(Ge);return Zt.max(new Zt(0),xt).toNumber()}),et=ae(()=>Math.ceil(Me.value)-Me.value),lt=ae(()=>Math.ceil(Me.value)),Re=Ze=>{if(!Ze)return"N/A";try{let Ge;if(typeof Ze=="number")Ge=new Date(Ze*1e3);else if(typeof Ze=="string")Ge=new Date(Ze);else return"Invalid Date";if(isNaN(Ge.getTime()))return"Invalid Date";const xt=String(Ge.getDate()).padStart(2,"0"),gt=Ge.toLocaleDateString("en-IN",{month:"short"}),Bt=String(Ge.getFullYear()).slice(-2);return`${xt} ${gt} ${Bt}`}catch(Ge){return console.error("Error formatting date:",Ge,Ze),"Invalid Date"}},Le=Ze=>{if(F.value=Ze,k&&clearTimeout(k),!Ze||Ze.trim().length===0){x.value=[],T.value=!1;return}k=setTimeout(()=>{nt(Ze.trim())},300)},nt=async Ze=>{if(!Ze||Ze.trim().length===0){x.value=[];return}try{T.value=!0,console.log(" Searching for:",Ze);const{data:Ge,error:xt}=await Bce(Ze);if(console.log(" Search response:",{medicinesCount:Ge?.length||0,error:xt?.message||null,data:Ge}),!xt&&Ge){const gt=[];Ge.forEach(Bt=>{console.log(` Medicine: ${Bt.productName}, Batches: ${Bt.batches?.length||0}`);const wt=Bt.batches||[];console.log(` Valid batches for ${Bt.productName}: ${wt.length}`),wt.forEach(gn=>{const Wn=gn.unitsPerPack||1,zn=gn.mrp/Wn;gt.push({batchId:gn.batchId||gn.id,batchNumber:gn.batchNumber,expiryDate:gn.expiryDate,expiryFormatted:Re(gn.expiryDate),medicineId:Bt.id,medicineName:Bt.productName,saltComposition:Bt.saltComposition||"",marketer:Bt.marketer||"",availableUnits:gn.availableUnits,mrp:gn.mrp,mrpPerUnit:zn,discountPercentage:gn.discountPercentage||0,gstPercentage:gn.gstPercentage||0,packType:gn.packType||"",unitsPerPack:Wn,displayLabel:`${Bt.productName} - ${gn.batchNumber} (Exp: ${Re(gn.expiryDate)}, Stock: ${gn.availableUnits}, MRP: ${Nt(zn)}/unit)`})})}),x.value=gt,console.log("Flattened batches:",gt.length)}else console.log("No data or error in response"),x.value=[],xt&&r("Error searching medicines: "+(xt.message||"Unknown error"))}catch(Ge){console.error("Error searching medicines:",Ge),x.value=[],r("Error searching medicines")}finally{T.value=!1}},Tt=()=>{w.value=!0,x.value=[],b.value=null,F.value="",k&&clearTimeout(k)},Pt=()=>{if(!b.value)return;const Ze=b.value;if(Ze.availableUnits<=0){r("Selected batch has no available stock.");return}const Ge={medicineId:Ze.medicineId,medicineName:Ze.medicineName,saltComposition:Ze.saltComposition,marketer:Ze.marketer||"",batchId:Ze.batchId,batchNumber:Ze.batchNumber,expiryDate:Ze.expiryDate,packType:Ze.packType,unitsPerPack:Ze.unitsPerPack,mrp:Ze.mrp,discountPercentage:Ze.discountPercentage,gstPercentage:Ze.gstPercentage,quantityUnits:1,availableUnits:Ze.availableUnits};m.value.push(Ge),ye(Ge,m.value.length-1),w.value=!1,b.value=null,a("Medicine added to bill")},Kt=Ze=>{m.value.splice(Ze,1),Ce()},$t=async()=>{if(m.value.length===0)return{success:!1,error:"Please add at least one item to save the draft"};try{const Ze=m.value.map(gt=>({medicineId:gt.medicineId,medicineBatchId:gt.batchId,quantityUnits:gt.quantityUnits,discountPercentage:gt.discountPercentage||0})),{data:Ge,error:xt}=await dce(o.billId,Ze,h.value);return xt?{success:!1,error:xt.response?.data?.error||xt.message||"Failed to save draft"}:!Ge||!Ge.success?{success:!1,error:"Failed to save draft: Update did not succeed"}:(await X(),{success:!0,error:null})}catch(Ze){return console.error("Error saving draft:",Ze),{success:!1,error:Ze.message||"An unexpected error occurred"}}},bt=async()=>{try{p.value=!0;const Ze=await $t();Ze.success?(a("Draft saved successfully"),i("bill-updated"),ut()):r(Ze.error||"Failed to save draft")}catch(Ze){console.error("Error saving draft:",Ze),r("An unexpected error occurred")}finally{p.value=!1}},st=async()=>{if(m.value.length===0){r("Please add at least one item to finalize the bill");return}try{y.value=!0;const Ze=await $t();if(!Ze.success){r(`Failed to save changes: ${Ze.error}. Please try again.`);return}const{data:Ge,error:xt}=await Ace(o.billId);xt?r(xt.response?.data?.error||"Failed to finalize bill"):(a("Bill finalized successfully"),i("bill-updated",o.billId))}catch(Ze){console.error("Error finalizing bill:",Ze),r("An unexpected error occurred")}finally{y.value=!1}},Je=Ze=>{if(!Ze)return"";try{let Ge;if(typeof Ze=="number")Ge=new Date(Ze*1e3);else if(typeof Ze=="string")Ge=new Date(Ze);else return"";if(isNaN(Ge.getTime()))return"";const xt=String(Ge.getDate()).padStart(2,"0"),gt=Ge.toLocaleDateString("en-IN",{month:"short"}),Bt=String(Ge.getFullYear()).slice(-2);return`${xt} ${gt} ${Bt}`}catch(Ge){return console.error("Error formatting date:",Ge,Ze),""}},Nt=Ze=>Ze==null?"0.00":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(Ze),rn=Ze=>Ze==null?"0":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(Ze),Lt=Ze=>{if(!Ze)return!1;try{let Ge;if(typeof Ze=="number")Ge=new Date(Ze*1e3);else if(typeof Ze=="string")Ge=new Date(Ze);else return!1;if(isNaN(Ge.getTime()))return!1;const xt=new Date;return xt.setHours(0,0,0,0),Ge.setHours(0,0,0,0),Ge<xt}catch(Ge){return console.error("Error checking expiry:",Ge,Ze),!1}},_t=Ze=>({Draft:"warning",Finalized:"success",Cancelled:"error",Refund:"info"})[Ze]||"default",ut=()=>{i("close")},Ft=Ze=>Ze.quantityUnits-(Ze.returnedQuantity||0),zt=(Ze,Ge)=>{const xt=Ft(Ze);Ze.returnQuantity>xt&&(Ze.returnQuantity=xt,r(`Return quantity cannot exceed ${xt} units for ${Ze.medicineName}`)),Ze.returnQuantity<0&&(Ze.returnQuantity=0)},dn=ae(()=>m.value.filter(Ze=>Ze.returnQuantity>0).length),Hn=async()=>{const Ze=m.value.filter(Ge=>Ge.returnQuantity>0).map(Ge=>({billItemId:Ge.billItemId||Ge.id,returnedQuantity:Ge.returnQuantity}));if(Ze.length===0){r("Please specify return quantity for at least one item");return}try{if(g.value=!0,ue.value.length>0){const gt=ue.value.filter(Bt=>Bt.amount&&parseFloat(Bt.amount)>0&&Bt.mode&&Bt.paymentDate);if(gt.length>0){for(const Bt of gt){const wt={amount:parseFloat(Bt.amount),mode:Bt.mode,paymentDate:Bt.paymentDate},gn=await Ae(wt);if(!gn.success){r(`Failed to create payment: ${gn.error?.message||"Unknown error"}`),g.value=!1;return}}ue.value=[],await ie()}}const{data:Ge,error:xt}=await Ece(o.billId,Ze);xt?r(xt.response?.data?.error||xt.message||"Failed to process return"):(a("Return processed successfully"),i("bill-updated",o.billId))}catch(Ge){console.error("Error processing return:",Ge),r("An unexpected error occurred")}finally{g.value=!1}};return Ke(()=>o.billId,Ze=>{E.value=Ze},{immediate:!0}),un(()=>{le()}),(Ze,Ge)=>{const xt=I("v-icon"),gt=I("v-btn"),Bt=I("v-card-title"),wt=I("v-col"),gn=I("v-row"),Wn=I("v-progress-circular"),zn=I("v-label"),oa=I("v-chip"),Ra=I("v-card-text"),Be=I("v-card"),Qe=I("v-select"),ke=I("v-text-field"),Ve=I("v-table"),ze=I("v-alert"),je=I("v-divider"),oe=I("v-date-picker"),se=I("v-menu"),be=I("v-container"),Fe=I("v-list-item"),at=I("v-card-subtitle"),rt=I("v-autocomplete"),qe=I("v-spacer"),At=I("v-card-actions"),Ut=I("v-dialog");return U(),me(We,null,[l(Be,{rounded:"lg",color:"surfaceContainer",flat:"",ripple:!1},{default:u(()=>[l(gn,{"no-gutters":""},{default:u(()=>[l(wt,{cols:"12"},{default:u(()=>[l(Bt,{class:"d-flex align-center justify-space-between"},{default:u(()=>[v("span",null,"Pharmacy Bill - "+K(e.mode==="return"?"Return":"Edit"),1),l(gt,{onClick:ut,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(xt,{size:"18"},{default:u(()=>[...Ge[4]||(Ge[4]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(gn,{"no-gutters":""},{default:u(()=>[l(wt,{cols:"12",class:"scroll-element"},{default:u(()=>[c.value?(U(),pe(gn,{key:0,"no-gutters":""},{default:u(()=>[l(wt,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[v("div",wHe,[l(Wn,{indeterminate:"",color:"primary",size:"64"}),Ge[5]||(Ge[5]=v("div",{class:"mt-4 text-subtitle-1"},"Loading bill...",-1))])]),_:1})]),_:1})):A.value?(U(),pe(gn,{key:1,"no-gutters":""},{default:u(()=>[l(wt,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[v("div",bHe,[l(xt,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...Ge[6]||(Ge[6]=[M("mdi-alert-circle",-1)])]),_:1}),Ge[8]||(Ge[8]=v("div",{class:"text-h6 mb-2"},"Failed to Load Bill",-1)),v("div",xHe,K(A.value),1),l(gt,{color:"primary",onClick:le,"prepend-icon":"mdi-refresh"},{default:u(()=>[...Ge[7]||(Ge[7]=[M(" Retry ",-1)])]),_:1})])]),_:1})]),_:1})):d.value?(U(),pe(be,{key:2,fluid:"",class:"pa-3"},{default:u(()=>[l(Be,{flat:"",color:"surfaceContainerHigh",class:"mb-4 card-enhanced"},{default:u(()=>[l(Ra,{class:"pb-1 pt-2"},{default:u(()=>[l(gn,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(wt,{cols:"4"},{default:u(()=>[v("div",CHe,[l(zn,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...Ge[9]||(Ge[9]=[M("Patient Information",-1)])]),_:1}),v("div",SHe,K(d.value.patientName||"Unknown Patient"),1),v("div",EHe,"ID: "+K(d.value.patientId||"N/A"),1)])]),_:1}),l(wt,{cols:"4"},{default:u(()=>[v("div",BHe,[l(zn,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...Ge[10]||(Ge[10]=[M("Consultation Details",-1)])]),_:1}),v("div",kHe,"Dr. "+K(d.value.doctorName||"Unknown"),1),v("div",THe,"Date: "+K(Je(d.value.consultationDate)),1)])]),_:1}),l(wt,{cols:"4"},{default:u(()=>[v("div",IHe,[l(zn,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...Ge[11]||(Ge[11]=[M("Bill Information",-1)])]),_:1}),v("div",FHe,K(d.value.identifier),1),v("div",PHe,"Date: "+K(Je(d.value.billDate)),1),l(oa,{color:_t(d.value.status),size:"small",variant:"flat",class:"mt-1"},{default:u(()=>[M(K(d.value.status),1)]),_:1},8,["color"])])]),_:1})]),_:1})]),_:1})]),_:1}),f.value&&f.value.length>0?(U(),pe(Be,{key:0,flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(Ra,{class:"pb-2"},{default:u(()=>[Ge[12]||(Ge[12]=v("div",{class:"text-subtitle-1 mb-2"},"Prescription Medicines",-1)),Ge[13]||(Ge[13]=v("div",{class:"text-body-2 text-medium-emphasis mb-2"},"These medicines were prescribed in the consultation:",-1)),(U(!0),me(We,null,qt(f.value,(ft,en)=>(U(),pe(oa,{key:en,size:"small",variant:"outlined",class:"mr-2 mb-2"},{default:u(()=>[M(K(ft.productName)+" ("+K(ft.quantityUnits)+" units) ",1)]),_:2},1024))),128))]),_:1})]),_:1})):ge("",!0),l(Be,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(Ra,{class:"pb-2"},{default:u(()=>[Ge[34]||(Ge[34]=v("div",{class:"text-subtitle-1 mb-3"},"Bill Items",-1)),l(Ve,{density:"compact",class:"mb-3"},{default:u(()=>[v("thead",null,[v("tr",null,[Ge[14]||(Ge[14]=v("th",{class:"text-left",style:{width:"60px"}},"Sr. No",-1)),Ge[15]||(Ge[15]=v("th",{class:"text-left",style:{width:"200px"}},"Item",-1)),Ge[16]||(Ge[16]=v("th",{class:"text-left",style:{width:"150px"}},"Batch Details",-1)),Ge[17]||(Ge[17]=v("th",{class:"text-left",style:{width:"120px"}},"Packaging Details",-1)),Ge[18]||(Ge[18]=v("th",{class:"text-right",style:{width:"100px"}},"MRP (Pack)",-1)),Ge[19]||(Ge[19]=v("th",{class:"text-right",style:{width:"100px"}},"Discount %",-1)),Ge[20]||(Ge[20]=v("th",{class:"text-right",style:{width:"120px"}},"Taxable Value/Unit",-1)),Ge[21]||(Ge[21]=v("th",{class:"text-right",style:{width:"100px"}},"GST %",-1)),Ge[22]||(Ge[22]=v("th",{class:"text-right",style:{width:"120px"}},"Final Value/Unit",-1)),Ge[23]||(Ge[23]=v("th",{class:"text-right",style:{width:"100px"}},"Qty",-1)),e.mode==="return"?(U(),me("th",DHe,"Already Returned")):ge("",!0),e.mode==="return"?(U(),me("th",UHe,"Return Qty")):ge("",!0),Ge[24]||(Ge[24]=v("th",{class:"text-right",style:{width:"120px"}},"Total ()",-1)),e.mode==="edit"?(U(),me("th",RHe,"Actions")):ge("",!0)])]),v("tbody",null,[(U(!0),me(We,null,qt(m.value,(ft,en)=>(U(),me("tr",{key:en},[v("td",null,K(en+1),1),v("td",null,[v("div",NHe,K(ft.medicineName),1),v("div",VHe,K(ft.saltComposition),1),ft.marketer?(U(),me("div",LHe,K(ft.marketer),1)):ge("",!0)]),v("td",null,[e.mode==="return"||ft.batchId?(U(),me(We,{key:0},[v("div",MHe,K(ft.batchNumber||"N/A"),1),v("div",{class:ct(["text-caption text-medium-emphasis",Lt(ft.expiryDate)?"text-error":""])},[ft.expiryDate?(U(),me(We,{key:0},[M(" Exp: "+K(Je(ft.expiryDate))+" ",1),Lt(ft.expiryDate)?(U(),pe(oa,{key:0,color:"error",size:"x-small",variant:"tonal",class:"ml-1"},{default:u(()=>[...Ge[25]||(Ge[25]=[M(" Expired ",-1)])]),_:1})):ge("",!0)],64)):(U(),me("span",OHe,"Exp: N/A"))],2),e.mode==="return"?(U(),pe(oa,{key:0,size:"x-small",color:"info",variant:"tonal",class:"mt-1"},{default:u(()=>[l(xt,{start:"",size:"x-small"},{default:u(()=>[...Ge[26]||(Ge[26]=[M("mdi-lock",-1)])]),_:1}),Ge[27]||(Ge[27]=M(" Locked ",-1))]),_:1})):ge("",!0)],64)):e.mode==="edit"?(U(),pe(Qe,{key:1,modelValue:ft.batchId,"onUpdate:modelValue":[Jt=>ft.batchId=Jt,()=>Z(ft,en)],items:G(ft.medicineId),"item-title":"label","item-value":"id",density:"compact",variant:"underlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):ge("",!0)]),v("td",null,[v("div",HHe,K(ft.packType||"N/A"),1),v("div",$He,K(ft.unitsPerPack||1)+" units/pack",1)]),v("td",QHe,K(Nt(ft.mrp)),1),v("td",GHe,K(ft.discountPercentage)+"%",1),v("td",zHe,K(Nt(ce(ft))),1),v("td",KHe,K(ft.gstPercentage)+"%",1),v("td",WHe,K(Nt(Se(ft))),1),v("td",jHe,[e.mode==="edit"?(U(),pe(ke,{key:0,modelValue:ft.quantityUnits,"onUpdate:modelValue":[Jt=>ft.quantityUnits=Jt,()=>ye(ft,en)],modelModifiers:{number:!0},type:"number",density:"compact",variant:"underlined","hide-details":"",min:"1",max:ft.availableUnits},null,8,["modelValue","onUpdate:modelValue","max"])):(U(),me("span",qHe,K(ft.quantityUnits),1))]),e.mode==="return"?(U(),me("td",YHe,[v("span",XHe,K(ft.returnedQuantity||0),1)])):ge("",!0),e.mode==="return"?(U(),me("td",JHe,[l(ke,{modelValue:ft.returnQuantity,"onUpdate:modelValue":[Jt=>ft.returnQuantity=Jt,()=>{zt(ft,en),Ce()}],modelModifiers:{number:!0},type:"number",density:"compact",variant:"underlined","hide-details":"",min:"0",max:Ft(ft)},null,8,["modelValue","onUpdate:modelValue","max"])])):ge("",!0),v("td",ZHe,K(Nt(ye(ft,en))),1),e.mode==="edit"?(U(),me("td",e$e,[l(gt,{icon:"",size:"small",color:"error",variant:"text",onClick:Jt=>Kt(en)},{default:u(()=>[l(xt,null,{default:u(()=>[...Ge[28]||(Ge[28]=[M("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])):ge("",!0)]))),128))])]),_:1}),m.value.length===0?(U(),pe(ze,{key:0,type:"info",variant:"tonal",class:"mt-2"},{default:u(()=>[e.mode==="edit"?(U(),me("span",t$e,'No items in bill. Click "Add Medicine" to add items.')):(U(),me("span",n$e,"No items in bill."))]),_:1})):ge("",!0),e.mode==="edit"?(U(),pe(gn,{key:1,"no-gutters":"",class:"align-center mt-3"},{default:u(()=>[l(wt,{cols:"auto"},{default:u(()=>[l(gt,{variant:"outlined",color:"primary",onClick:Tt,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...Ge[29]||(Ge[29]=[M(" Add Medicine ",-1)])]),_:1})]),_:1}),l(wt),l(wt,{cols:"3"},{default:u(()=>[l(ke,{label:"Additional Discount",modelValue:h.value,"onUpdate:modelValue":[Ge[0]||(Ge[0]=ft=>h.value=ft),Ce],modelModifiers:{number:!0},type:"number",prefix:"",density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})):ge("",!0),e.mode==="return"?(U(),pe(Be,{key:2,flat:"",color:"surfaceContainerHigh",class:"mt-3 card-enhanced"},{default:u(()=>[l(Ra,{class:"pb-2"},{default:u(()=>[Ge[32]||(Ge[32]=v("div",{class:"text-subtitle-2 mb-2"},"Return Summary",-1)),v("div",a$e,[Ge[30]||(Ge[30]=M(" Items to Return: ",-1)),v("strong",null,K(dn.value),1)]),l(je,{class:"my-2"}),v("div",r$e,[Ge[31]||(Ge[31]=v("strong",null,"Updated Bill Total (after return):",-1)),M(" "+K(Nt(lt.value)),1)]),Ge[33]||(Ge[33]=v("div",{class:"text-body-2 text-medium-emphasis"}," Bill total updates in real-time. Adjust payments as needed before processing return. ",-1))]),_:1})]),_:1})):ge("",!0)]),_:1})]),_:1}),l(Be,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(Ra,{class:"pb-2"},{default:u(()=>[Ge[42]||(Ge[42]=v("div",{class:"text-subtitle-1 mb-3"},"Bill Summary",-1)),l(je,{class:"mb-3"}),l(gn,{"no-gutters":""},{default:u(()=>[l(wt,{cols:"6"},{default:u(()=>[Ge[35]||(Ge[35]=v("div",{class:"text-body-2 mb-1"},"Total MRP:",-1)),Ge[36]||(Ge[36]=v("div",{class:"text-body-2 mb-1"},"Total Discount:",-1)),Ge[37]||(Ge[37]=v("div",{class:"text-body-2 mb-1"},"Total GST:",-1)),Ge[38]||(Ge[38]=v("div",{class:"text-body-2 mb-1"},"Subtotal with GST:",-1)),h.value>0?(U(),me("div",s$e,"Additional Discount:")):ge("",!0),Ge[39]||(Ge[39]=v("div",{class:"text-body-2 mb-1"},"Net Amount:",-1)),Ge[40]||(Ge[40]=v("div",{class:"text-body-2 mb-1"},"Round Off:",-1)),Ge[41]||(Ge[41]=v("div",{class:"text-subtitle-1 font-weight-bold mt-2"},"Final Amount:",-1))]),_:1}),l(wt,{cols:"6",class:"text-right"},{default:u(()=>[v("div",o$e,K(Nt(_e.value)),1),v("div",i$e,"-"+K(Nt(De.value)),1),v("div",l$e,K(Nt(xe.value)),1),v("div",u$e,K(Nt(Te.value)),1),h.value>0?(U(),me("div",c$e,"-"+K(Nt(h.value)),1)):ge("",!0),v("div",d$e,K(Nt(Me.value)),1),v("div",A$e,K(et.value>0?"+":"")+K(Nt(et.value)),1),v("div",f$e,K(Nt(lt.value)),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(Be,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(Ra,{class:"pb-2"},{default:u(()=>[Ge[53]||(Ge[53]=v("div",{class:"text-subtitle-1 mb-3"},"Payment Information",-1)),l(gn,{"no-gutters":"",class:"mb-3"},{default:u(()=>[l(wt,{cols:"4"},{default:u(()=>[Ge[43]||(Ge[43]=v("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Total Amount",-1)),v("div",m$e,K(Nt(lt.value)),1),e.mode==="return"?(U(),me("div",v$e," (Updated after return) ")):ge("",!0)]),_:1}),l(wt,{cols:"4"},{default:u(()=>[Ge[44]||(Ge[44]=v("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Paid Amount",-1)),v("div",h$e,K(Nt($e(H)+ee.value)),1)]),_:1}),l(wt,{cols:"4"},{default:u(()=>[Ge[45]||(Ge[45]=v("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Balance Due",-1)),v("div",{class:ct(["text-h6",z.value>0?"text-error":"text-success"])},K(Nt(z.value)),3),e.mode==="return"&&z.value<0?(U(),me("div",p$e," (Credit/Overpayment) ")):ge("",!0)]),_:1})]),_:1}),$e(P)?(U(),me("div",g$e,[l(Wn,{indeterminate:"",size:"32",color:"primary"}),Ge[46]||(Ge[46]=v("div",{class:"text-body-2 mt-2"},"Loading payments...",-1))])):(U(),me(We,{key:1},[l(je,{class:"mb-3"}),Ge[52]||(Ge[52]=v("div",{class:"text-subtitle-2 mb-2"},"Payments",-1)),l(Ve,{density:"compact",class:"mb-3"},{default:u(()=>[Ge[50]||(Ge[50]=v("thead",null,[v("tr",null,[v("th",{class:"text-left",style:{width:"60px"}},"Sr. No"),v("th",{class:"text-left",style:{width:"150px"}},"Amount ()"),v("th",{class:"text-left",style:{width:"150px"}},"Payment Mode"),v("th",{class:"text-left",style:{width:"150px"}},"Payment Date"),v("th",{class:"text-left",style:{width:"80px"}},"Actions")])],-1)),v("tbody",null,[(U(!0),me(We,null,qt($e(D),(ft,en)=>(U(),me("tr",{key:`existing-${ft.id}`},[v("td",null,K(en+1),1),v("td",y$e,""+K(ft.amount.toLocaleString()),1),v("td",null,K(ft.mode),1),v("td",null,K(Je(ft.paymentDate)),1),v("td",null,[l(gt,{icon:"",size:"small",color:"error",variant:"text",onClick:Jt=>$e(j)(ft.id),loading:$e(O).includes(ft.id)},{default:u(()=>[l(xt,null,{default:u(()=>[...Ge[47]||(Ge[47]=[M("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick","loading"])])]))),128)),(U(!0),me(We,null,qt(ue.value,(ft,en)=>(U(),me("tr",{key:`new-${en}`},[v("td",null,K($e(D).length+en+1),1),v("td",null,[l(ke,{modelValue:ft.amount,"onUpdate:modelValue":Jt=>ft.amount=Jt,modelModifiers:{number:!0},type:"number",prefix:"",min:"1",density:"compact",variant:"underlined","hide-details":"",rules:ne},null,8,["modelValue","onUpdate:modelValue"])]),v("td",null,[l(Qe,{modelValue:ft.mode,"onUpdate:modelValue":Jt=>ft.mode=Jt,items:$e(J),density:"compact",variant:"underlined","hide-details":"",rules:Y},null,8,["modelValue","onUpdate:modelValue","items"])]),v("td",null,[l(se,{modelValue:ft.datePickerMenu,"onUpdate:modelValue":Jt=>ft.datePickerMenu=Jt,"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},{activator:u(({props:Jt})=>[l(ke,Ue({modelValue:ft.paymentDate,"onUpdate:modelValue":wn=>ft.paymentDate=wn,density:"compact",variant:"underlined","hide-details":"",rules:te,readonly:""},{ref_for:!0},Jt),{"append-inner":u(()=>[l(xt,{class:"text-medium-emphasis"},{default:u(()=>[...Ge[48]||(Ge[48]=[M("mdi-calendar",-1)])]),_:1})]),_:1},16,["modelValue","onUpdate:modelValue"])]),default:u(()=>[l(oe,{"model-value":q(ft.paymentDate),"onUpdate:modelValue":Jt=>Q(Jt,ft),color:"primary",locale:"en-IN"},null,8,["model-value","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),v("td",null,[l(gt,{icon:"",size:"small",color:"error",variant:"text",onClick:Jt=>N(en)},{default:u(()=>[l(xt,null,{default:u(()=>[...Ge[49]||(Ge[49]=[M("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])]))),128))])]),_:1}),l(gn,{"no-gutters":"",class:"align-center"},{default:u(()=>[l(wt,{cols:"auto"},{default:u(()=>[l(gt,{variant:"outlined",color:"secondary",onClick:L,"prepend-icon":"mdi-plus",class:"btn-hover-base"},{default:u(()=>[...Ge[51]||(Ge[51]=[M(" Add Payment ",-1)])]),_:1})]),_:1})]),_:1})],64))]),_:1})]),_:1}),l(Be,{flat:"",color:"surfaceContainerHigh",class:"card-enhanced"},{default:u(()=>[l(Ra,{class:"d-flex justify-center pb-2",style:{gap:"4px"}},{default:u(()=>[e.mode==="edit"?(U(),me(We,{key:0},[l(gt,{variant:"outlined",onClick:bt,loading:p.value,disabled:d.value.status!=="Draft"||m.value.length===0},{default:u(()=>[...Ge[54]||(Ge[54]=[M(" Save Draft ",-1)])]),_:1},8,["loading","disabled"]),l(gt,{color:"primary",onClick:st,loading:y.value,disabled:d.value.status!=="Draft"||m.value.length===0},{default:u(()=>[...Ge[55]||(Ge[55]=[M(" Finalize Bill ",-1)])]),_:1},8,["loading","disabled"])],64)):(U(),me(We,{key:1},[l(gt,{variant:"outlined",onClick:ut},{default:u(()=>[...Ge[56]||(Ge[56]=[M(" Cancel ",-1)])]),_:1}),l(gt,{color:"primary",onClick:Hn,loading:g.value,disabled:dn.value===0},{default:u(()=>[...Ge[57]||(Ge[57]=[M(" Process Return ",-1)])]),_:1},8,["loading","disabled"])],64))]),_:1})]),_:1})]),_:1})):ge("",!0)]),_:1})]),_:1})]),_:1}),l(Ut,{modelValue:w.value,"onUpdate:modelValue":Ge[3]||(Ge[3]=ft=>w.value=ft),"max-width":"700px",persistent:""},{default:u(()=>[l(Be,null,{default:u(()=>[l(Bt,null,{default:u(()=>[...Ge[58]||(Ge[58]=[M("Add Medicine to Bill",-1)])]),_:1}),l(Ra,null,{default:u(()=>[l(rt,{modelValue:b.value,"onUpdate:modelValue":Ge[1]||(Ge[1]=ft=>b.value=ft),items:x.value,"item-title":"displayLabel","return-object":"",label:"Search Medicine by Batch",variant:"outlined",loading:T.value,"onUpdate:search":Le,placeholder:"Type medicine name to search...",clearable:"",autofocus:""},{item:u(({props:ft,item:en})=>[l(Fe,Ue(ft,{class:"batch-search-item"}),{title:u(()=>[v("div",_$e,[v("span",w$e,K(en.raw.medicineName),1),en.raw.saltComposition?(U(),me("span",b$e," ("+K(en.raw.saltComposition)+") ",1)):ge("",!0)])]),subtitle:u(()=>[v("div",x$e,[v("div",C$e,[v("div",S$e,[l(oa,{size:"small",variant:"tonal",color:"primary",density:"compact"},{default:u(()=>[l(xt,{start:"",size:"small"},{default:u(()=>[...Ge[59]||(Ge[59]=[M("mdi-barcode",-1)])]),_:1}),M(" "+K(en.raw.batchNumber),1)]),_:2},1024),l(oa,{size:"small",variant:"tonal",color:"info",density:"compact"},{default:u(()=>[l(xt,{start:"",size:"small"},{default:u(()=>[...Ge[60]||(Ge[60]=[M("mdi-calendar",-1)])]),_:1}),M(" "+K(en.raw.expiryFormatted),1)]),_:2},1024),l(oa,{size:"small",variant:"tonal",color:"default",density:"compact"},{default:u(()=>[M(K(rn(en.raw.mrpPerUnit))+"/unit ",1)]),_:2},1024),en.raw.discountPercentage>0?(U(),pe(oa,{key:0,size:"small",variant:"tonal",color:"warning",density:"compact"},{default:u(()=>[l(xt,{start:"",size:"small"},{default:u(()=>[...Ge[61]||(Ge[61]=[M("mdi-tag",-1)])]),_:1}),M(" "+K(en.raw.discountPercentage)+"% off ",1)]),_:2},1024)):ge("",!0)]),l(oa,{size:"default",variant:"flat",color:"success",class:"font-weight-bold"},{default:u(()=>[l(xt,{start:""},{default:u(()=>[...Ge[62]||(Ge[62]=[M("mdi-package-variant",-1)])]),_:1}),M(" "+K(en.raw.availableUnits)+" units ",1)]),_:2},1024)])])]),_:2},1040)]),"no-data":u(()=>[l(Be,{flat:"",class:"pa-4 text-center"},{default:u(()=>[l(at,null,{default:u(()=>[M(K(T.value?"Searching...":"No batches found. Try a different search term."),1)]),_:1})]),_:1})]),_:1},8,["modelValue","items","loading"])]),_:1}),l(At,null,{default:u(()=>[l(qe),l(gt,{variant:"outlined",onClick:Ge[2]||(Ge[2]=ft=>w.value=!1)},{default:u(()=>[...Ge[63]||(Ge[63]=[M("Cancel",-1)])]),_:1}),l(gt,{color:"primary",onClick:Pt,disabled:!b.value},{default:u(()=>[...Ge[64]||(Ge[64]=[M("Add to Bill",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},B$e=Xt(E$e,[["__scopeId","data-v-2233e4b7"]]),k$e={class:"text-center"},T$e={class:"text-center"},I$e={class:"text-body-2 text-medium-emphasis mb-4"},F$e={class:"pa-1"},P$e={class:"text-body-1 font-weight-medium"},D$e={class:"text-body-2 text-medium-emphasis"},U$e={key:0,class:"text-body-2 text-medium-emphasis"},R$e={class:"pa-1"},N$e={class:"text-body-1 font-weight-medium"},V$e={class:"text-body-2 text-medium-emphasis"},L$e={class:"pa-1"},M$e={class:"text-body-1 font-weight-medium"},O$e={class:"text-body-2 text-medium-emphasis"},H$e={class:"text-body-2 font-weight-medium"},$$e={key:0,class:"text-caption text-medium-emphasis"},Q$e={class:"text-body-2"},G$e={class:"text-body-2 font-weight-medium"},z$e={key:1},K$e={class:"text-body-2"},W$e={class:"text-caption text-medium-emphasis"},j$e={class:"text-right"},q$e={class:"text-right"},Y$e={class:"text-right"},X$e={class:"text-right"},J$e={class:"text-right"},Z$e={class:"text-right"},e9e={class:"text-right font-weight-medium"},t9e={key:0,class:"text-body-2 mb-1 font-weight-bold"},n9e={class:"text-body-2 mb-1"},a9e={class:"text-body-2 mb-1"},r9e={class:"text-body-2 mb-1"},s9e={class:"text-body-2 mb-1",style:{"font-size":"0.875rem"}},o9e={class:"text-body-2 mb-1",style:{"font-size":"0.875rem"}},i9e={class:"text-body-2 mb-1 font-weight-bold"},l9e={key:0,class:"text-body-2 mb-1 font-weight-bold"},u9e={class:"text-body-2 mb-1"},c9e={class:"text-body-2 mb-1"},d9e={class:"text-subtitle-1 font-weight-bold mt-2"},A9e={class:"text-h6"},f9e={class:"text-h6 text-success"},m9e={key:0,class:"text-center pa-4"},v9e={class:"text-left"},h9e={class:"text-left"},p9e={class:"text-right"},g9e={class:"text-right"},y9e={class:"text-center pa-4"},_9e={key:1,class:"d-flex justify-center align-center pa-8"},w9e={class:"text-center"},b9e={__name:"pharmacy-bill-view",props:{billId:{type:[String,Number],required:!0}},emits:["close","edit-bill"],setup(e,{emit:t}){const{showError:n}=ra(),a=e,r=t,s=V(!1),o=V(null),i=V(null),c=V(null),A=V("view"),d=V({}),f=V(null),m=X9(f),{billPayments:h,isLoadingPayments:p,totalPaymentsMade:y,loadBillPayments:g}=m,w=async()=>{try{s.value=!0,o.value=null;const{data:Q,error:ee}=await fM(a.billId);if(ee)o.value=ee.response?.data?.error||ee.message||"Failed to load bill",n("Error loading bill");else{if(i.value=Q,Q.patientId)try{const z=await tT(Q.patientId);z.data&&(c.value=z.data)}catch(z){console.warn("Could not fetch patient details:",z)}await L(),f.value=a.billId,await g()}}catch(Q){console.error("Error loading bill:",Q),o.value=Q.message||"An unexpected error occurred",n("Error loading bill")}finally{s.value=!1}},b=Q=>{if(!Q)return"";try{let ee;if(typeof Q=="number")ee=new Date(Q*1e3);else if(typeof Q=="string")ee=new Date(Q);else return"";if(isNaN(ee.getTime()))return"";const z=String(ee.getDate()).padStart(2,"0"),X=ee.toLocaleDateString("en-IN",{month:"short"}),le=String(ee.getFullYear()).slice(-2);return`${z} ${X} ${le}`}catch(ee){return console.error("Error formatting date:",ee,Q),""}},x=Q=>{if(!Q)return"";try{return new Date(Q*1e3).toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return Q}},T=Q=>Q==null?"0.00":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(Q),F=Q=>{if(!Q.mrp||!Q.unitsPerPack||Q.unitsPerPack<=0)return 0;const ee=new Zt(Q.mrp),z=new Zt(Q.unitsPerPack),X=new Zt(Q.gstPercentage||0),le=new Zt(Q.discountPercentage||0),re=ee.dividedBy(z),de=new Zt(1).plus(X.dividedBy(100)),G=re.dividedBy(de),Z=new Zt(1).minus(le.dividedBy(100));return G.times(Z).toNumber()},k=Q=>{if(!Q.mrp||!Q.unitsPerPack||Q.unitsPerPack<=0)return 0;const ee=new Zt(F(Q)),z=new Zt(Q.gstPercentage||0),X=new Zt(1).plus(z.dividedBy(100));return ee.times(X).toNumber()},S=(Q,ee)=>{if(!Q.mrp||!Q.unitsPerPack||Q.unitsPerPack<=0)return 0;const z=new Zt(Q.mrp),X=new Zt(Q.unitsPerPack),le=new Zt(Q.gstPercentage||0),re=new Zt(Q.discountPercentage||0),de=new Zt(Q.quantityUnits||0),G=z.dividedBy(X),Z=new Zt(1).plus(le.dividedBy(100)),ce=G.dividedBy(Z),Se=new Zt(1).minus(re.dividedBy(100)),Pe=ce.times(Se),ye=Pe.times(le.dividedBy(100));return Pe.plus(ye).times(de).toNumber()},E=ae(()=>i.value?.items?i.value.items.reduce((ee,z)=>{if(!z.mrp||!z.unitsPerPack||z.unitsPerPack<=0)return ee;const X=new Zt(z.mrp),le=new Zt(z.unitsPerPack),re=new Zt(z.quantityUnits||0),G=X.dividedBy(le).times(re);return ee.plus(G)},new Zt(0)).toNumber():0),C=ae(()=>i.value?.items?i.value.items.reduce((ee,z)=>{if(!z.mrp||!z.unitsPerPack||z.unitsPerPack<=0)return ee;const X=new Zt(z.mrp),le=new Zt(z.unitsPerPack),re=new Zt(z.gstPercentage||0),de=new Zt(z.discountPercentage||0),G=new Zt(z.quantityUnits||0),Z=X.dividedBy(le),ce=new Zt(1).plus(re.dividedBy(100)),Se=Z.dividedBy(ce),Pe=new Zt(1).minus(de.dividedBy(100)),ye=Se.times(Pe),_e=Se.minus(ye).times(G);return ee.plus(_e)},new Zt(0)).toNumber():0),D=ae(()=>i.value?.items?i.value.items.reduce((ee,z)=>{if(!z.mrp||!z.unitsPerPack||z.unitsPerPack<=0)return ee;const X=new Zt(z.mrp),le=new Zt(z.unitsPerPack),re=new Zt(z.gstPercentage||0),de=new Zt(z.discountPercentage||0),G=new Zt(z.quantityUnits||0),Z=X.dividedBy(le),ce=new Zt(1).plus(re.dividedBy(100)),Se=Z.dividedBy(ce),Pe=new Zt(1).minus(de.dividedBy(100)),_e=Se.times(Pe).times(re.dividedBy(100)).times(G);return ee.plus(_e)},new Zt(0)).toNumber():0),P=ae(()=>new Zt(D.value).dividedBy(2).toNumber()),O=ae(()=>new Zt(D.value).dividedBy(2).toNumber()),H=ae(()=>i.value?.items?i.value.items.reduce((ee,z)=>{const X=z.totalAmount||S(z);return ee.plus(new Zt(X))},new Zt(0)).toNumber():0),ie=ae(()=>{const Q=new Zt(H.value),ee=new Zt(i.value?.additionalDiscountAmount||0),z=Q.minus(ee);return Zt.max(new Zt(0),z).toNumber()}),Ae=ae(()=>Math.ceil(ie.value)-ie.value),j=ae(()=>Math.ceil(ie.value)),J=ae(()=>Math.max(0,j.value-y.value)),ue=Q=>{if(!Q)return!1;try{let ee;if(typeof Q=="number")ee=new Date(Q*1e3);else if(typeof Q=="string")ee=new Date(Q);else return!1;if(isNaN(ee.getTime()))return!1;const z=new Date;return z.setHours(0,0,0,0),ee.setHours(0,0,0,0),ee<z}catch(ee){return console.error("Error checking expiry:",ee,Q),!1}},ne=Q=>({Draft:"warning",Finalized:"success",Cancelled:"error",Refund:"info"})[Q]||"default",Y=()=>{r("edit-bill")},te=()=>{r("close")},L=async()=>{try{const Q=i.value?.pharmacyId;if(!Q){console.warn("No pharmacyId in bill data, using default pharmacy"),d.value={header:"",gstNumber:"",useHeader:!0,pageSize:"A4"};return}const ee=await hM(Q);if(ee.error)console.error("Error fetching pharmacy config:",ee.error),d.value={header:"",gstNumber:"",useHeader:!0,pageSize:"A4"};else{const z=ee.data||{};d.value={header:z.header||"",gstNumber:z.gstNumber||"",useHeader:z.useHeader!==void 0?z.useHeader===1||z.useHeader===!0:!0,pageSize:z.pageSize||"A4"}}}catch(Q){console.error("Error fetching pharmacy configurations:",Q),d.value={header:"",gstNumber:"",useHeader:!0,pageSize:"A4"}}},N=ae(()=>{if(!i.value)return null;const Q=i.value.items.map((ee,z)=>({...ee,taxableValuePerUnit:ee.unitPrice||F(ee),finalValuePerUnit:ee.totalAmount&&ee.quantityUnits?ee.totalAmount/ee.quantityUnits:k(ee),itemTotal:ee.totalAmount||S(ee)}));return{pharmacyBill:{identifier:i.value.identifier,billDate:i.value.billDate,status:i.value.status,patientName:i.value.patientName,patientId:i.value.patientId,patientContactNumber:i.value.patientContactNumber,doctorName:i.value.doctorName,consultationDate:i.value.consultationDate,items:Q,totalMrp:E.value,totalDiscount:C.value,totalGst:D.value,totalCgst:P.value,totalSgst:O.value,subtotalWithGst:H.value,additionalDiscountAmount:i.value.additionalDiscountAmount||0,netAmount:ie.value,roundOff:Ae.value,finalAmount:j.value,payments:h.value||[],totalPaymentsMade:y.value,balanceDue:J.value},pharmacyConfigurations:d.value}}),q=Q=>{console.log("Pharmacy bill PDF generated:",Q)};return Ke(()=>a.billId,Q=>{f.value=Q},{immediate:!0}),un(()=>{w()}),(Q,ee)=>{const z=I("v-icon"),X=I("v-btn"),le=I("v-card-title"),re=I("v-col"),de=I("v-row"),G=I("v-tab"),Z=I("v-tabs"),ce=I("v-progress-circular"),Se=I("v-label"),Pe=I("v-chip"),ye=I("v-card-text"),Ce=I("v-card"),_e=I("v-table"),De=I("v-divider"),xe=I("v-container"),Te=I("v-tabs-window-item"),Me=I("v-tabs-window");return U(),pe(Ce,{rounded:"lg",color:"surfaceContainer",flat:"",ripple:!1},{default:u(()=>[l(de,{"no-gutters":""},{default:u(()=>[l(re,{cols:"12"},{default:u(()=>[l(le,{class:"d-flex align-center justify-space-between"},{default:u(()=>[ee[3]||(ee[3]=v("span",null,"Pharmacy Bill - View",-1)),l(X,{onClick:te,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(z,{size:"18"},{default:u(()=>[...ee[2]||(ee[2]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(de,{"no-gutters":""},{default:u(()=>[l(re,{cols:"12"},{default:u(()=>[l(Z,{modelValue:A.value,"onUpdate:modelValue":ee[0]||(ee[0]=et=>A.value=et),color:"primary","bg-color":"surfaceContainerHigh","align-tabs":"start",class:"mx-3 mb-3"},{default:u(()=>[l(G,{value:"view"},{default:u(()=>[l(z,{start:""},{default:u(()=>[...ee[4]||(ee[4]=[M("mdi-eye",-1)])]),_:1}),ee[5]||(ee[5]=M(" View Bill ",-1))]),_:1}),l(G,{value:"share"},{default:u(()=>[l(z,{start:""},{default:u(()=>[...ee[6]||(ee[6]=[M("mdi-share-variant",-1)])]),_:1}),ee[7]||(ee[7]=M(" Share Bill ",-1))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(de,{"no-gutters":""},{default:u(()=>[l(re,{cols:"12",class:"scroll-element"},{default:u(()=>[l(Me,{modelValue:A.value,"onUpdate:modelValue":ee[1]||(ee[1]=et=>A.value=et)},{default:u(()=>[l(Te,{value:"view"},{default:u(()=>[s.value?(U(),pe(de,{key:0,"no-gutters":""},{default:u(()=>[l(re,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[v("div",k$e,[l(ce,{indeterminate:"",color:"primary",size:"64"}),ee[8]||(ee[8]=v("div",{class:"mt-4 text-subtitle-1"},"Loading bill...",-1))])]),_:1})]),_:1})):o.value?(U(),pe(de,{key:1,"no-gutters":""},{default:u(()=>[l(re,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[v("div",T$e,[l(z,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...ee[9]||(ee[9]=[M("mdi-alert-circle",-1)])]),_:1}),ee[11]||(ee[11]=v("div",{class:"text-h6 mb-2"},"Failed to Load Bill",-1)),v("div",I$e,K(o.value),1),l(X,{color:"primary",onClick:w,"prepend-icon":"mdi-refresh"},{default:u(()=>[...ee[10]||(ee[10]=[M(" Retry ",-1)])]),_:1})])]),_:1})]),_:1})):i.value?(U(),pe(xe,{key:2,fluid:"",class:"pa-3"},{default:u(()=>[l(Ce,{flat:"",color:"surfaceContainerHigh",class:"mb-4 card-enhanced"},{default:u(()=>[l(ye,{class:"pb-1 pt-2"},{default:u(()=>[l(de,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(re,{cols:"4"},{default:u(()=>[v("div",F$e,[l(Se,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...ee[12]||(ee[12]=[M("Patient Information",-1)])]),_:1}),v("div",P$e,K(i.value.patientName||"Unknown Patient"),1),v("div",D$e,"ID: "+K(i.value.patientId||"N/A"),1),i.value.patientContactNumber?(U(),me("div",U$e," Phone: "+K(i.value.patientContactNumber),1)):ge("",!0)])]),_:1}),l(re,{cols:"4"},{default:u(()=>[v("div",R$e,[l(Se,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...ee[13]||(ee[13]=[M("Consultation Details",-1)])]),_:1}),v("div",N$e,"Dr. "+K(i.value.doctorName||"Unknown"),1),v("div",V$e,"Date: "+K(b(i.value.consultationDate)),1)])]),_:1}),l(re,{cols:"4"},{default:u(()=>[v("div",L$e,[l(Se,{class:"text-caption text-medium-emphasis"},{default:u(()=>[...ee[14]||(ee[14]=[M("Bill Information",-1)])]),_:1}),v("div",M$e,K(i.value.identifier),1),v("div",O$e,"Date: "+K(b(i.value.billDate)),1),l(Pe,{color:ne(i.value.status),size:"small",variant:"flat",class:"mt-1"},{default:u(()=>[M(K(i.value.status),1)]),_:1},8,["color"])])]),_:1})]),_:1})]),_:1})]),_:1}),l(Ce,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(ye,{class:"pb-2"},{default:u(()=>[ee[17]||(ee[17]=v("div",{class:"text-subtitle-1 mb-3"},"Bill Items",-1)),l(_e,{density:"compact",class:"mb-3"},{default:u(()=>[ee[16]||(ee[16]=v("thead",null,[v("tr",null,[v("th",{class:"text-left",style:{width:"60px"}},"Sr. No"),v("th",{class:"text-left",style:{width:"200px"}},"Item"),v("th",{class:"text-left",style:{width:"100px"}},"HSN Code"),v("th",{class:"text-left",style:{width:"150px"}},"Batch Details"),v("th",{class:"text-left",style:{width:"120px"}},"Packaging Details"),v("th",{class:"text-right",style:{width:"100px"}},"MRP (Pack)"),v("th",{class:"text-right",style:{width:"100px"}},"Discount %"),v("th",{class:"text-right",style:{width:"120px"}},"Taxable Value/Unit"),v("th",{class:"text-right",style:{width:"100px"}},"GST %"),v("th",{class:"text-right",style:{width:"120px"}},"Final Value/Unit"),v("th",{class:"text-right",style:{width:"100px"}},"Qty"),v("th",{class:"text-right",style:{width:"120px"}},"Total ()")])],-1)),v("tbody",null,[(U(!0),me(We,null,qt(i.value.items,(et,lt)=>(U(),me("tr",{key:lt},[v("td",null,K(lt+1),1),v("td",null,[v("div",H$e,K(et.medicineName),1),et.marketer?(U(),me("div",$$e,K(et.marketer),1)):ge("",!0)]),v("td",null,[v("div",Q$e,K(et.hsnCode||"N/A"),1)]),v("td",null,[v("div",G$e,K(et.batchNumber||"N/A"),1),v("div",{class:ct(["text-caption text-medium-emphasis",ue(et.expiryDate)?"text-error":""])},[et.expiryDate?(U(),me(We,{key:0},[M(" Exp: "+K(b(et.expiryDate))+" ",1),ue(et.expiryDate)?(U(),pe(Pe,{key:0,color:"error",size:"x-small",variant:"tonal",class:"ml-1"},{default:u(()=>[...ee[15]||(ee[15]=[M(" Expired ",-1)])]),_:1})):ge("",!0)],64)):(U(),me("span",z$e,"Exp: N/A"))],2)]),v("td",null,[v("div",K$e,K(et.packType||"N/A"),1),v("div",W$e,K(et.unitsPerPack||1)+" units/pack",1)]),v("td",j$e,K(T(et.mrp)),1),v("td",q$e,K(et.discountPercentage)+"%",1),v("td",Y$e,K(T(et.unitPrice||F(et))),1),v("td",X$e,K(et.gstPercentage)+"%",1),v("td",J$e,K(T(et.totalAmount&&et.quantityUnits?et.totalAmount/et.quantityUnits:k(et))),1),v("td",Z$e,K(et.quantityUnits),1),v("td",e9e,K(T(et.totalAmount||S(et,lt))),1)]))),128))])]),_:1})]),_:1})]),_:1}),l(Ce,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(ye,{class:"pb-2"},{default:u(()=>[ee[27]||(ee[27]=v("div",{class:"text-subtitle-1 mb-3"},"Bill Summary",-1)),l(De,{class:"mb-3"}),l(de,{"no-gutters":""},{default:u(()=>[l(re,{cols:"6"},{default:u(()=>[ee[18]||(ee[18]=v("div",{class:"text-body-2 mb-1"},"Total MRP:",-1)),ee[19]||(ee[19]=v("div",{class:"text-body-2 mb-1"},"Total Discount:",-1)),ee[20]||(ee[20]=v("div",{class:"text-body-2 mb-1"},"Total GST:",-1)),ee[21]||(ee[21]=v("div",{class:"text-body-2 mb-1 pl-4",style:{"font-size":"0.875rem"}},"CGST:",-1)),ee[22]||(ee[22]=v("div",{class:"text-body-2 mb-1 pl-4",style:{"font-size":"0.875rem"}},"SGST:",-1)),ee[23]||(ee[23]=v("div",{class:"text-body-2 mb-1 font-weight-bold"},"Subtotal with GST:",-1)),i.value.additionalDiscountAmount>0?(U(),me("div",t9e,"Additional Discount:")):ge("",!0),ee[24]||(ee[24]=v("div",{class:"text-body-2 mb-1"},"Net Amount:",-1)),ee[25]||(ee[25]=v("div",{class:"text-body-2 mb-1"},"Round Off:",-1)),ee[26]||(ee[26]=v("div",{class:"text-subtitle-1 font-weight-bold mt-2"},"Final Amount:",-1))]),_:1}),l(re,{cols:"6",class:"text-right"},{default:u(()=>[v("div",n9e,K(T(E.value)),1),v("div",a9e,"-"+K(T(C.value)),1),v("div",r9e,K(T(D.value)),1),v("div",s9e,K(T(P.value)),1),v("div",o9e,K(T(O.value)),1),v("div",i9e,K(T(H.value)),1),i.value.additionalDiscountAmount>0?(U(),me("div",l9e,"-"+K(T(i.value.additionalDiscountAmount)),1)):ge("",!0),v("div",u9e,K(T(ie.value)),1),v("div",c9e,K(Ae.value>0?"+":"")+K(T(Ae.value)),1),v("div",d9e,K(T(j.value)),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(Ce,{flat:"",color:"surfaceContainerHigh",class:"mb-3 card-enhanced"},{default:u(()=>[l(ye,{class:"pb-2"},{default:u(()=>[ee[36]||(ee[36]=v("div",{class:"text-subtitle-1 mb-3"},"Payment Information",-1)),l(de,{"no-gutters":"",class:"mb-3"},{default:u(()=>[l(re,{cols:"4"},{default:u(()=>[ee[28]||(ee[28]=v("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Total Amount",-1)),v("div",A9e,K(T(j.value)),1)]),_:1}),l(re,{cols:"4"},{default:u(()=>[ee[29]||(ee[29]=v("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Paid Amount",-1)),v("div",f9e,K(T($e(y))),1)]),_:1}),l(re,{cols:"4"},{default:u(()=>[ee[30]||(ee[30]=v("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"Balance Due",-1)),v("div",{class:ct(["text-h6",J.value>0?"text-error":"text-success"])},K(T(J.value)),3)]),_:1})]),_:1}),$e(p)?(U(),me("div",m9e,[l(ce,{indeterminate:"",size:"32",color:"primary"}),ee[31]||(ee[31]=v("div",{class:"text-body-2 mt-2"},"Loading payments...",-1))])):$e(h)&&$e(h).length>0?(U(),me(We,{key:1},[l(De,{class:"mb-3"}),ee[33]||(ee[33]=v("div",{class:"text-subtitle-2 mb-2"},"Payment History",-1)),l(_e,{density:"compact"},{default:u(()=>[ee[32]||(ee[32]=v("thead",null,[v("tr",null,[v("th",{class:"text-left"},"Date"),v("th",{class:"text-left"},"Mode"),v("th",{class:"text-right"},"Amount"),v("th",{class:"text-right"},"Created")])],-1)),v("tbody",null,[(U(!0),me(We,null,qt($e(h),et=>(U(),me("tr",{key:et.id},[v("td",v9e,K(b(et.paymentDate)),1),v("td",h9e,K(et.mode),1),v("td",p9e,K(T(et.amount)),1),v("td",g9e,K(x(et.createdAt)),1)]))),128))])]),_:1})],64)):(U(),me(We,{key:2},[l(De,{class:"mb-3"}),v("div",y9e,[l(z,{size:"48",color:"outline",class:"mb-2"},{default:u(()=>[...ee[34]||(ee[34]=[M("mdi-currency-inr",-1)])]),_:1}),ee[35]||(ee[35]=v("div",{class:"text-body-2 text-medium-emphasis"},"No payments recorded",-1))])],64))]),_:1})]),_:1}),l(Ce,{flat:"",color:"surfaceContainerHigh",class:"card-enhanced"},{default:u(()=>[l(ye,{class:"d-flex justify-center pb-2 gap-2"},{default:u(()=>[l(Bn,{permission:"pharmacy.queue.manage"},{default:u(()=>[i.value.status==="Draft"?(U(),pe(X,{key:0,color:"primary",onClick:Y},{default:u(()=>[...ee[37]||(ee[37]=[M(" Edit Bill ",-1)])]),_:1})):ge("",!0)]),_:1})]),_:1})]),_:1})]),_:1})):ge("",!0)]),_:1}),l(Te,{value:"share",class:"h-100"},{default:u(()=>[l(de,{"no-gutters":"",class:"h-100"},{default:u(()=>[l(re,{cols:"12"},{default:u(()=>[N.value&&c.value?(U(),pe(yh,{key:0,"content-type":"pharmacy-bill",data:N.value,patient:c.value,onPdfGenerated:q},null,8,["data","patient"])):(U(),me("div",_9e,[v("div",w9e,[l(ce,{indeterminate:"",color:"primary",size:"64"}),ee[38]||(ee[38]=v("div",{class:"mt-4 text-subtitle-1"},"Loading bill data...",-1))])]))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}}},x9e=Xt(b9e,[["__scopeId","data-v-085e5c74"]]),C9e={class:"text-medium-emphasis"},S9e={key:0},E9e={__name:"cancel-bill",props:{bill:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ra(),o=V(!1),i=()=>{a("close")},c=async()=>{try{o.value=!0;const A=await fce(n.bill.id);if(A.error){const d=A.error.response?.data?.error||A.error.message||"Failed to cancel bill";s(d)}else r("Bill cancelled successfully. Inventory has been released."),i()}catch(A){console.error("Error cancelling bill:",A),s("An unexpected error occurred while cancelling the bill")}finally{o.value=!1}};return(A,d)=>{const f=I("v-card-title"),m=I("v-col"),h=I("v-icon"),p=I("v-btn"),y=I("v-row"),g=I("v-card"),w=I("v-card-text"),b=I("v-divider");return U(),pe(g,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(y,{"no-gutters":""},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(g,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(y,{"no-gutters":""},{default:u(()=>[l(m,{cols:"11"},{default:u(()=>[l(f,{class:"pa-0 pl-2"},{default:u(()=>[...d[0]||(d[0]=[M("Confirm Bill Cancellation",-1)])]),_:1})]),_:1}),l(m,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(p,{icon:"",size:"x-small",onClick:i},{default:u(()=>[l(h,null,{default:u(()=>[...d[1]||(d[1]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(y,{"no-gutters":""},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(g,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(y,{"no-gutters":""},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(w,{class:"text-left"},{default:u(()=>[d[4]||(d[4]=M(" Are you sure you want to cancel this bill? ",-1)),d[5]||(d[5]=v("span",{class:"text-warning font-weight-bold"}," This will release the reserved/sold inventory back to stock. ",-1)),d[6]||(d[6]=v("br",null,null,-1)),d[7]||(d[7]=v("br",null,null,-1)),v("span",C9e,[d[3]||(d[3]=M(" Bill ID: ",-1)),v("strong",null,K(e.bill?.identifier||"N/A"),1),e.bill?.status?(U(),me("span",S9e,[d[2]||(d[2]=M("  Status: ",-1)),v("strong",null,K(e.bill.status),1)])):ge("",!0)])]),_:1})]),_:1})]),_:1}),l(b),l(y,{"no-gutters":""},{default:u(()=>[l(m,{cols:"2"}),l(m,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(p,{variant:"outlined",color:"error",onClick:c,loading:o.value,disabled:o.value},{default:u(()=>[...d[8]||(d[8]=[M(" Yes, Cancel Bill ",-1)])]),_:1},8,["loading","disabled"])]),_:1}),l(m,{cols:"2"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},B9e={class:"w-100",style:{"white-space":"normal",overflow:"visible","text-overflow":"unset"}},k9e={class:"text-subtitle-2 mb-1",style:{"white-space":"normal","line-height":"1.3",overflow:"visible","text-overflow":"unset"}},T9e={class:"text-caption",style:{opacity:"0.7"}},I9e={class:"d-flex justify-center"},F9e={__name:"create-draft-bill",emits:["close","draft-bill-created"],setup(e,{emit:t}){const n=Rn(),{showSuccess:a,showError:r}=ra(),s=t,o=ae(()=>n.getters["doctorModule/allDoctors"]||[]),i=V(null);un(()=>{i.value=n.state.doctorModule.doctorId,o.value.length===0&&n.dispatch("doctorModule/fetchDoctors").then(()=>{!i.value&&o.value.length>0&&(i.value=n.state.doctorModule.doctorId||o.value[0]?.id)})});let c=null,A=null;const d=V(!1),f=V([]),m=V(""),h=V(null),p=V(!1),y=V(!1),g=k=>k?`${k.name||""} (${k.contactNumber||k.contact_number||""})`:"",w=(k,S=0,E=!1)=>{if(S===0)return"First time patient";if(E&&S>1)return k?`Has appointment today  Last visit: ${Dl(k)}`:"Has appointment today";if(E&&S===1)return"First visit today";if(k){const C=Un(),D=k;if(D<C)return`Last visit: ${Dl(D)}`;if(D>C)return`Next visit: ${Dl(D)}`}return"No previous visits"},b=ae(()=>!m.value||m.value.length<1?"Start typing to search for patients":p.value?`No patients found matching "${m.value}"`:""),x=async k=>{if(!k||k.length<1){f.value=[],p.value=!1;return}A&&A.abort(),A=new AbortController,d.value=!0,p.value=!1;try{const S=await nT(k,{signal:A.signal});A.signal.aborted||(f.value=S.data,(!f.value||f.value.length===0)&&(p.value=!0))}catch(S){S.name!=="AbortError"&&(console.error("Error fetching patients:",S),p.value=!0)}finally{A?.signal.aborted||(d.value=!1)}};Ke(m,k=>{c&&clearTimeout(c),p.value=!1,c=setTimeout(()=>{x(k)},300)});const T=async()=>{if(!h.value||!h.value.id){r("Please select a patient");return}if(!i.value){r("Please select a doctor");return}try{y.value=!0;const k=Un(),S=await eT(h.value.id,i.value,k);if(S.error){r(S.error.response?.data?.error||"Failed to create consultation");return}if(!S.data||!S.data.consultation_id){r("Failed to get consultation ID");return}const E=S.data.consultation_id,C=await mM(E);if(C.error){r(C.error.response?.data?.error||"Failed to create draft bill");return}a("Draft bill created successfully"),s("draft-bill-created"),F()}catch(k){console.error("Error creating draft bill:",k),r("An unexpected error occurred")}finally{y.value=!1}},F=()=>{s("close")};return da(()=>{c&&(clearTimeout(c),c=null),A&&(A.abort(),A=null)}),(k,S)=>{const E=I("v-card-title"),C=I("v-col"),D=I("v-icon"),P=I("v-btn"),O=I("v-row"),H=I("v-card"),ie=I("v-list-item"),Ae=I("v-select"),j=I("v-list"),J=I("v-card-subtitle"),ue=I("v-autocomplete"),ne=I("v-card-text"),Y=I("v-divider"),te=I("v-empty-state");return U(),pe(H,{rounded:"lg",color:"surfaceContainer"},{default:u(()=>[l(O,{"no-gutters":""},{default:u(()=>[l(C,{cols:"12"},{default:u(()=>[l(H,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(O,{"no-gutters":""},{default:u(()=>[l(C,{cols:"11"},{default:u(()=>[l(E,{class:"pa-0 pl-2"},{default:u(()=>[...S[3]||(S[3]=[M("Create Draft Bill",-1)])]),_:1})]),_:1}),l(C,{cols:"1"},{default:u(()=>[l(P,{icon:"",size:"x-small",onClick:F,tabindex:"-1"},{default:u(()=>[l(D,null,{default:u(()=>[...S[4]||(S[4]=[v("img",{src:ou,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(O,{"no-gutters":""},{default:u(()=>[l(C,{cols:"12"},{default:u(()=>[l(H,{flat:"",class:"d-flex justify-center ma-2",color:"surfaceContainer"},{default:u(()=>[l(Ae,{modelValue:i.value,"onUpdate:modelValue":S[0]||(S[0]=L=>i.value=L),items:o.value,"item-title":"doctorName","item-value":"id",density:"compact",variant:"outlined",placeholder:"Select Doctor",style:{width:"90%","max-width":"700px"},"prepend-inner-icon":"mdi-doctor","hide-details":"auto","menu-props":{maxHeight:"400px"}},{item:u(({props:L,item:N})=>[l(ie,eu(nu(L)),{title:u(()=>[M(K(N.raw.doctorName),1)]),subtitle:u(()=>[M(K(N.raw.doctorSpecialization),1)]),_:2},1040)]),_:1},8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),l(O,{"no-gutters":""},{default:u(()=>[l(C,{cols:"12"},{default:u(()=>[l(H,{flat:"",class:"d-flex justify-center ma-2",color:"surfaceContainer"},{default:u(()=>[l(ue,{ref:"searchRef",density:"compact",placeholder:"Search by name or phone",style:{width:"90%","max-width":"700px"},theme:"light",variant:"solo",rounded:"l",items:f.value,search:m.value,"onUpdate:search":S[1]||(S[1]=L=>m.value=L),loading:d.value,"item-title":g,"item-value":"id","return-object":"",modelValue:h.value,"onUpdate:modelValue":S[2]||(S[2]=L=>h.value=L),chips:"",clearable:"","prepend-inner-icon":"mdi-magnify","no-data-text":b.value,"menu-props":{maxHeight:"400px",closeOnContentClick:!1}},{item:u(({props:L,item:N,index:q})=>[l(j,{density:"compact",class:"pa-0 py-1"},{default:u(()=>[l(ie,Ue(L,{class:"py-0 my-0",style:{"min-height":"60px"}}),{default:u(()=>[v("div",B9e,[v("div",k9e," ID: "+K(N.raw.id)+"  "+K(N.raw.gender)+", "+K(N.raw.age)+" yrs  Added On: "+K($e(Dl)(N.raw.createdAt))+K(N.raw.importID?`  Import ID: ${N.raw.importID}`:""),1),v("div",T9e,K(w(N.raw.lastAppointmentDate,N.raw.totalAppointments,N.raw.hasAppointmentToday)),1)])]),_:2},1040)]),_:2},1024)]),"no-data":u(()=>[l(j,{density:"compact"},{default:u(()=>[l(ie,null,{default:u(()=>[l(J,null,{default:u(()=>[M(K(b.value),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["items","search","loading","modelValue","no-data-text"])]),_:1})]),_:1})]),_:1}),l(O,{"no-gutters":""},{default:u(()=>[l(C,{cols:"12",class:"scroll-element"},{default:u(()=>[l(H,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[h.value&&h.value.id?(U(),me(We,{key:0},[l(H,{flat:"",class:"text-left",variant:"text"},{default:u(()=>[l(ne,{class:"ma-0 pa-0 pl-4 mb-1"},{default:u(()=>[l(O,{"no-gutters":""},{default:u(()=>[l(C,{cols:"6"},{default:u(()=>[M(K(`Name: ${h.value.name}`),1)]),_:1}),l(C,{cols:"6"},{default:u(()=>[M(K(`Gender: ${h.value.gender}`),1)]),_:1})]),_:1}),l(O,{"no-gutters":""},{default:u(()=>[l(C,{cols:"6"},{default:u(()=>[M(K(`Contact: ${h.value.contactNumber||h.value.contact_number}`),1)]),_:1}),l(C,{cols:"6"},{default:u(()=>[M(K(h.value.age!==null?`Age: ${h.value.age} yrs`:""),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(H,{flat:"",class:"text-left",variant:"text"},{default:u(()=>[l(O,{"no-gutters":""},{default:u(()=>[l(C,{cols:"12"},{default:u(()=>[l(Y,{class:"mb-2"}),v("div",I9e,[l(P,{variant:"outlined",onClick:T,disabled:!h.value||y.value,loading:y.value},{default:u(()=>[...S[5]||(S[5]=[M(" Create Draft Bill ",-1)])]),_:1},8,["disabled","loading"])])]),_:1})]),_:1})]),_:1})],64)):(U(),pe(te,{key:1,image:$e(KM)},{title:u(()=>[...S[6]||(S[6]=[v("div",{class:"text-subtitle-2 mt-8"}," Search for a patient above to create a draft bill ",-1)])]),text:u(()=>[...S[7]||(S[7]=[v("div",{class:"text-caption"},null,-1)])]),_:1},8,["image"]))]),_:1})]),_:1})]),_:1})]),_:1})}}},P9e=Xt(F9e,[["__scopeId","data-v-b2a2ca6f"]]),D9e={class:"scrollable-content"},U9e={class:"scrollable-content"},R9e={class:"text-center"},N9e={class:"text-center"},V9e={class:"text-body-2 text-medium-emphasis mb-4"},L9e={class:"text-center"},M9e={class:"text-subtitle-2 mt-8 text-center"},O9e={key:0},H9e={key:1},$9e={class:"text-caption text-center"},Q9e={key:0},G9e={key:1},z9e={class:"text-body-2 text-medium-emphasis"},K9e={class:"font-weight-bold",style:{color:"black"}},W9e={key:0,class:"text-body-2 mb-1"},j9e={class:"font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},q9e={key:0,class:"text-medium-emphasis ml-2"},Y9e={key:1,class:"text-body-2 text-medium-emphasis mb-1"},X9e={key:2,class:"text-body-2 font-weight-medium mt-2"},J9e={__name:"pharmacy-queue",setup(e){const t=Rn(),{showError:n}=ra(),a=ae(()=>t.getters["pharmacyModule/currentPharmacyId"]),r=V(0),s=V([]),o=V(""),i=V(""),c=V(null),A=V(null),d=V(!1),f=V(null),m=V(!1),h=V(!1),p=V(!1),y=V(null),g=V("edit"),w=V(!1),b=V(null),x=V(!1);ae(()=>Un());const T=ae(()=>{if(!s.value||s.value.length===0)return[];const ee=o.value?.trim();if(!ee)return s.value;if(/^\d+$/.test(ee))return s.value.filter(X=>X?.patientContactNumber?.includes(ee)??!1);{const X=ee.toLowerCase();return s.value.filter(le=>le?.patientName?.toLowerCase().includes(X)??!1)}}),F=ee=>({Draft:"rgb(var(--v-theme-warning))",Finalized:"rgb(var(--v-theme-success))",Cancelled:"rgb(var(--v-theme-error))",Refund:"rgb(var(--v-theme-info))",Series:"rgb(var(--v-theme-secondary))"})[ee]||"rgb(var(--v-theme-on-surface))",k=ee=>{if(!ee)return"";try{const z=new Date(ee*1e3),X=wo(z,"d MMM"),le=wo(z,"EEE");return`${X}, ${le}`}catch(z){return console.error("Error formatting created day:",z),""}},S=ee=>{if(!ee)return"";try{const z=new Date(ee*1e3),X=z.getHours(),le=z.getMinutes(),re=X%12||12,de=X>=12?"PM":"AM";return`${re}.${le.toString().padStart(2,"0")}${de}`}catch(z){return console.error("Error formatting created time:",z),""}},E=ee=>ee==null?"0.00":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(ee),C=async()=>{if(!d.value){if(!a.value){n("Please select a pharmacy first");return}try{d.value=!0,f.value=null;const{data:ee,error:z}=await cce(i.value||null,c.value||null,a.value);z?(f.value=z.response?.data?.error||z.message||"Failed to fetch pharmacy bills",s.value=[],n("Error fetching pharmacy bills")):(s.value=ee||[],m.value=!0)}catch(ee){console.error("Error in fetchBills:",ee),f.value=ee.message||"An unexpected error occurred",s.value=[],n("Error fetching pharmacy bills")}finally{d.value=!1}}},D=ee=>{i.value=ee.billDate||"",c.value=ee.status||null},P=()=>{C()},O=()=>{i.value="",c.value=null,o.value="",s.value=[],m.value=!1,f.value=null},H=()=>{C()},ie=ee=>{y.value=ee,h.value=!0},Ae=ee=>{y.value=ee,g.value="edit",p.value=!0},j=ee=>{y.value=ee,g.value="return",p.value=!0},J=ee=>{ee?.status!=="Cancelled"&&(b.value=ee,w.value=!0)},ue=()=>{w.value=!1,b.value=null,C()},ne=()=>{p.value=!1,y.value=null,g.value="edit"},Y=()=>{h.value=!1,y.value=null},te=()=>{h.value=!1,p.value=!0},L=async ee=>{p.value=!1,g.value="edit",await xn(),ee?(y.value=ee,h.value=!0):y.value=null,C()},N=()=>{x.value=!0},q=()=>{x.value=!1},Q=()=>{C()};return Ke(a,(ee,z)=>{ee&&ee!==z&&m.value&&C()}),un(()=>{i.value=Un(),C()}),(ee,z)=>{const X=I("v-alert"),le=I("v-tab"),re=I("v-tabs"),de=I("v-card"),G=I("v-col"),Z=I("v-row"),ce=I("v-progress-circular"),Se=I("v-icon"),Pe=I("v-btn"),ye=I("v-text-field"),Ce=I("v-card-text"),_e=I("v-empty-state"),De=I("v-card-title"),xe=I("v-tooltip"),Te=I("v-divider"),Me=I("v-lazy"),et=I("v-window-item"),lt=I("v-window"),Re=I("v-main"),Le=I("v-dialog");return U(),me(We,null,[l(Re,null,{default:u(()=>[A.value?(U(),pe(X,{key:0,type:"error",dismissible:"","onClick:close":z[0]||(z[0]=nt=>A.value=null),class:"ma-3"},{default:u(()=>[M(K(A.value),1)]),_:1})):ge("",!0),l(Z,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[l(G,{cols:"12"},{default:u(()=>[l(de,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center"},{default:u(()=>[l(re,{modelValue:r.value,"onUpdate:modelValue":z[1]||(z[1]=nt=>r.value=nt),color:"primary","align-tabs":"start",class:"w-100"},{default:u(()=>[l(le,{value:0},{default:u(()=>[...z[9]||(z[9]=[M("Queue",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(lt,{modelValue:r.value,"onUpdate:modelValue":z[4]||(z[4]=nt=>r.value=nt),class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[l(et,{value:0,style:{height:"100%"}},{default:u(()=>[l(Z,{"aria-label":"main row",style:{height:"100%"},class:"d-flex align-stretch"},{default:u(()=>[l(G,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[v("div",D9e,[l(BOe,{"bill-date":i.value,status:c.value,onFilterChange:D,onSearch:P,onClear:O},null,8,["bill-date","status"])])]),_:1}),l(G,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[v("div",U9e,[l(de,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[d.value?(U(),pe(Z,{key:0,"no-gutters":""},{default:u(()=>[l(G,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[v("div",R9e,[l(ce,{indeterminate:"",color:"primary",size:"64"}),z[10]||(z[10]=v("div",{class:"mt-4 text-subtitle-1"},"Loading pharmacy bills...",-1))])]),_:1})]),_:1})):f.value?(U(),pe(Z,{key:1,"no-gutters":""},{default:u(()=>[l(G,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[v("div",N9e,[l(Se,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...z[11]||(z[11]=[M("mdi-alert-circle",-1)])]),_:1}),z[13]||(z[13]=v("div",{class:"text-h6 mb-2"},"Search Failed",-1)),v("div",V9e,K(f.value),1),l(Pe,{color:"primary",onClick:H,"prepend-icon":"mdi-refresh"},{default:u(()=>[...z[12]||(z[12]=[M(" Try Again ",-1)])]),_:1})])]),_:1})]),_:1})):m.value?(U(),me(We,{key:3},[l(de,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(Ce,{class:"pt-2 pb-0 d-flex align-center"},{default:u(()=>[l(G,{cols:"4",class:"pa-0"},{default:u(()=>[l(ye,{modelValue:o.value,"onUpdate:modelValue":z[2]||(z[2]=nt=>o.value=nt),density:"compact",variant:"outlined",clearable:"","hide-details":"auto","prepend-inner-icon":"mdi-account-search",placeholder:"Search by name or number",class:"patient-search-input"},null,8,["modelValue"])]),_:1}),l(G,{cols:"4",class:"pa-0 text-center"},{default:u(()=>[v("strong",null,K(T.value.length),1),M(" result"+K(T.value.length!==1?"s":"")+" found ",1)]),_:1}),l(G,{cols:"4",class:"pa-0 text-right"},{default:u(()=>[l(Bn,{permission:"pharmacy.queue.manage"},{default:u(()=>[l(Pe,{color:"primary",variant:"outlined",onClick:N,"prepend-icon":"mdi-plus",size:"small"},{default:u(()=>[...z[17]||(z[17]=[M(" Create Draft Bill ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),T.value&&T.value.length===0?(U(),pe(_e,{key:0,image:$e(Kv),class:"d-flex justify-center"},{title:u(()=>[v("div",M9e,[o.value?(U(),me("span",O9e,"No bills match your search")):(U(),me("span",H9e,"No Pharmacy Bills Found"))])]),text:u(()=>[v("div",$9e,[o.value?(U(),me("span",Q9e,"Try a different search term or clear the filter")):(U(),me("span",G9e,"Try adjusting your search criteria or clear filters to see all bills"))])]),actions:u(()=>[o.value?(U(),pe(Pe,{key:0,color:"primary",variant:"outlined",onClick:z[3]||(z[3]=nt=>o.value=""),"prepend-icon":"mdi-close",class:"mr-2"},{default:u(()=>[...z[18]||(z[18]=[M(" Clear Search ",-1)])]),_:1})):ge("",!0),l(Pe,{color:"primary",variant:"outlined",onClick:O,"prepend-icon":"mdi-filter-remove"},{default:u(()=>[...z[19]||(z[19]=[M(" Clear All Filters ",-1)])]),_:1})]),_:1},8,["image"])):T.value&&T.value.length>0?(U(),pe(Z,{key:1,"no-gutters":""},{default:u(()=>[l(G,{cols:"12",class:"scroll-element mt-2",style:{"padding-bottom":"20px"}},{default:u(()=>[(U(!0),me(We,null,qt(T.value,nt=>(U(),pe(Me,{key:nt?.id||Math.random(),options:{threshold:.1,rootMargin:"50px"}},{default:u(()=>[nt?(U(),pe(de,{key:0,style:{textAlign:"left"},density:"compact",class:"mb-2 mx-2 card-enhanced card-status-default card-hover-base",rounded:"lg"},{default:u(()=>[l(Z,{"no-gutters":""},{default:u(()=>[l(G,{cols:"8"},{default:u(()=>[l(De,{class:"pb-0 pt-2"},{default:u(()=>[v("div",z9e,[nt?.identifier?(U(),me(We,{key:0},[v("span",K9e,"Bill ID: "+K(nt.identifier),1),z[20]||(z[20]=M("  ",-1))],64)):ge("",!0),nt?.createdAt?(U(),me(We,{key:1},[M(K(k(nt.createdAt))+"  "+K(S(nt.createdAt))+"  ",1)],64)):ge("",!0),v("span",{class:"font-weight-medium",style:Rt({color:F(nt?.status)})},K(nt?.status||"Unknown"),5)])]),_:2},1024),l(Ce,{class:"pb-1 pt-1"},{default:u(()=>[nt?.patientName?(U(),me("div",W9e,[l(Se,{size:"small",class:"mr-1"},{default:u(()=>[...z[21]||(z[21]=[M("mdi-account",-1)])]),_:1}),v("span",j9e,K(nt.patientName),1),nt?.patientContactNumber?(U(),me("span",q9e,"("+K(nt.patientContactNumber)+")",1)):ge("",!0)])):ge("",!0),nt?.doctorName?(U(),me("div",Y9e,[l(Se,{size:"small",class:"mr-1"},{default:u(()=>[...z[22]||(z[22]=[M("mdi-doctor",-1)])]),_:1}),M(" Dr. "+K(nt.doctorName),1)])):ge("",!0),nt?.netAmount!==void 0?(U(),me("div",X9e,[l(Se,{size:"small",class:"mr-1"},{default:u(()=>[...z[23]||(z[23]=[M("mdi-currency-inr",-1)])]),_:1}),M(" Net Amount: "+K(E(nt.netAmount)),1)])):ge("",!0)]),_:2},1024)]),_:2},1024),l(G,{cols:"2",class:"d-flex justify-center align-center"},{default:u(()=>[l(Z,{"no-gutters":""},{default:u(()=>[l(G,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[l(Bn,{permission:"pharmacy.queue.manage"},{default:u(()=>[l(xe,{text:"View Bill"},{activator:u(({props:Tt})=>[l(Pe,Ue({variant:"plain",color:"primary",size:"small"},{ref_for:!0},Tt,{onClick:pn(Pt=>ie(nt.id),["stop"]),class:"btn-hover-base mb-2"}),{default:u(()=>[l(Se,{size:"18"},{default:u(()=>[...z[24]||(z[24]=[M("mdi-eye",-1)])]),_:1})]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),l(Te,{class:"mx-4"}),l(G,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[l(Bn,{permission:"pharmacy.queue.manage"},{default:u(()=>[l(xe,{text:nt?.status==="Finalized"?"Cannot edit finalized bills":nt?.status==="Cancelled"?"Cannot edit cancelled bills":"Edit Bill"},{activator:u(({props:Tt})=>[l(Pe,Ue({variant:"plain",color:"secondary",size:"small"},{ref_for:!0},Tt,{disabled:nt?.status==="Finalized"||nt?.status==="Cancelled",onClick:pn(Pt=>Ae(nt.id),["stop"]),class:"btn-hover-base mt-1"}),{default:u(()=>[l(Se,{size:"18"},{default:u(()=>[...z[25]||(z[25]=[M("mdi-pencil",-1)])]),_:1})]),_:1},16,["disabled","onClick"])]),_:2},1032,["text"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),l(G,{cols:"2",class:"d-flex justify-center align-center"},{default:u(()=>[l(Z,{"no-gutters":""},{default:u(()=>[l(G,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[l(xe,{text:nt?.status==="Finalized"?"Return Bill":"Return only available for finalized bills"},{activator:u(({props:Tt})=>[l(Pe,Ue({variant:"plain",size:"small"},{ref_for:!0},Tt,{disabled:nt?.status!=="Finalized",onClick:pn(Pt=>j(nt.id),["stop"]),class:"btn-hover-base mb-2",style:{color:"orange"}}),{default:u(()=>[l(Se,{size:"18",color:"orange"},{default:u(()=>[...z[26]||(z[26]=[M("mdi-arrow-u-left-top",-1)])]),_:1})]),_:1},16,["disabled","onClick"])]),_:2},1032,["text"])]),_:2},1024),l(Te,{class:"mx-4"}),l(G,{cols:"12",class:"d-flex justify-center align-center"},{default:u(()=>[l(Bn,{permission:"pharmacy.queue.manage"},{default:u(()=>[l(xe,{text:nt?.status==="Cancelled"?"Bill is already cancelled":"Cancel Bill"},{activator:u(({props:Tt})=>[l(Pe,Ue({variant:"plain",color:"error",size:"small"},{ref_for:!0},Tt,{disabled:nt?.status==="Cancelled",onClick:pn(Pt=>J(nt),["stop"]),class:"btn-hover-base mt-1"}),{default:u(()=>[l(Se,{size:"18"},{default:u(()=>[...z[27]||(z[27]=[M("mdi-close-circle",-1)])]),_:1})]),_:1},16,["disabled","onClick"])]),_:2},1032,["text"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):ge("",!0)]),_:2},1024))),128))]),_:1})]),_:1})):ge("",!0)],64)):(U(),pe(Z,{key:2,"no-gutters":""},{default:u(()=>[l(G,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[v("div",L9e,[l(Se,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...z[14]||(z[14]=[M("mdi-pill",-1)])]),_:1}),z[15]||(z[15]=v("div",{class:"text-h6 mb-2"},"Search for Pharmacy Bills",-1)),z[16]||(z[16]=v("div",{class:"text-body-2 text-medium-emphasis"},"Use the filters on the left to find pharmacy bills",-1))])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(Le,{modelValue:p.value,"onUpdate:modelValue":z[5]||(z[5]=nt=>p.value=nt),persistent:"","max-width":"85%"},{default:u(()=>[y.value?(U(),pe(B$e,{key:0,"bill-id":y.value,mode:g.value,onClose:ne,onBillUpdated:L},null,8,["bill-id","mode"])):ge("",!0)]),_:1},8,["modelValue"]),l(Le,{modelValue:h.value,"onUpdate:modelValue":z[6]||(z[6]=nt=>h.value=nt),persistent:"","max-width":"70%"},{default:u(()=>[y.value?(U(),pe(x9e,{key:0,"bill-id":y.value,onClose:Y,onEditBill:te},null,8,["bill-id"])):ge("",!0)]),_:1},8,["modelValue"]),l(Le,{modelValue:w.value,"onUpdate:modelValue":z[7]||(z[7]=nt=>w.value=nt),persistent:"","max-width":"30%"},{default:u(()=>[b.value?(U(),pe(E9e,{key:0,bill:b.value,onClose:ue},null,8,["bill"])):ge("",!0)]),_:1},8,["modelValue"]),l(Le,{modelValue:x.value,"onUpdate:modelValue":z[8]||(z[8]=nt=>x.value=nt),persistent:"","max-width":"50%"},{default:u(()=>[l(P9e,{onClose:q,onDraftBillCreated:Q})]),_:1},8,["modelValue"])],64)}}},Z9e=Xt(J9e,[["__scopeId","data-v-d08cebc8"]]),eQe={class:"mb-4"},tQe={class:"d-flex align-center justify-space-between"},nQe={class:"flex-grow-1"},aQe={class:"text-subtitle-1 font-weight-medium"},rQe={key:0,class:"text-caption text-medium-emphasis mt-1"},sQe={key:1,class:"text-caption text-medium-emphasis"},oQe={key:2,class:"text-caption text-warning mt-1"},iQe={__name:"pharmacy-medicine-form",emits:["close","medicine-added"],setup(e,{emit:t}){const{showSuccess:n,showInfo:a}=ra(),r=t,s=V(null),o=V(!1),i=V(null),c=V(null),A=V(!1),d=async y=>{if(!y||y.length===0)return;const g=y[0];s.value=g,i.value=null,c.value=null,g.isPharmacy?c.value="This medicine is already marked as pharmacy medicine.":g.isLocal||(c.value="This is an external medicine. It will be created in your database and then marked as pharmacy medicine.")},f=()=>{A.value=!0},m=async y=>{A.value=!1,y&&y.id&&(s.value={...y,isLocal:!0,isPharmacy:!1},await h())},h=async()=>{if(!s.value){i.value="Please select a medicine first";return}if(s.value.isPharmacy){a("This medicine is already in pharmacy");return}try{o.value=!0,i.value=null;let y=s.value.id;if(!s.value.isLocal){const b=await kH({productName:s.value.productName,marketer:s.value.marketer||"",saltComposition:s.value.saltComposition||"",productForm:s.value.productForm||"",productId:s.value.productId||"",primaryUse:s.value.primaryUse||"",source:"A",isCreatedByUser:!1});if(b.error){i.value=b.error.response?.data?.error||"Failed to create medicine";return}if(!b.data||!b.data.id){i.value="Medicine was created but ID was not returned";return}y=b.data.id}const{data:g,error:w}=await Rce(y);if(w){i.value=w.response?.data?.error||"Failed to add medicine to pharmacy";return}n("Medicine added to pharmacy successfully"),r("medicine-added",g),p()}catch(y){console.error("Error adding medicine to pharmacy:",y),i.value="An unexpected error occurred"}finally{o.value=!1}},p=()=>{s.value=null,i.value=null,c.value=null,r("close")};return(y,g)=>{const w=I("v-icon"),b=I("v-btn"),x=I("v-card-title"),T=I("v-divider"),F=I("v-alert"),k=I("v-chip"),S=I("v-card"),E=I("v-card-text"),C=I("v-spacer"),D=I("v-card-actions"),P=I("v-dialog");return U(),me(We,null,[l(S,{rounded:"lg",color:"surfaceContainer",flat:""},{default:u(()=>[l(x,{class:"d-flex align-center justify-space-between"},{default:u(()=>[g[4]||(g[4]=v("span",null,"Add Medicine to Pharmacy",-1)),l(b,{onClick:p,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(w,{size:"18"},{default:u(()=>[...g[3]||(g[3]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(T),l(E,{class:"pt-4"},{default:u(()=>[i.value?(U(),pe(F,{key:0,type:"error",variant:"tonal",class:"mb-4",dismissible:"","onClick:close":g[0]||(g[0]=O=>i.value=null)},{default:u(()=>[M(K(i.value),1)]),_:1})):ge("",!0),c.value?(U(),pe(F,{key:1,type:"info",variant:"tonal",class:"mb-4"},{default:u(()=>[M(K(c.value),1)]),_:1})):ge("",!0),v("div",eQe,[g[5]||(g[5]=v("div",{class:"text-subtitle-2 mb-2"},"Search and select a medicine to add to pharmacy inventory:",-1)),l(IH,{onSearchedMedicines:d,onAddMedicine:f})]),s.value?(U(),pe(S,{key:2,variant:"outlined",class:"pa-3 mb-4",color:s.value.isPharmacy?"success":"primary"},{default:u(()=>[v("div",tQe,[v("div",nQe,[v("div",aQe,[M(K(s.value.productName)+" ",1),s.value.isPharmacy?(U(),pe(k,{key:0,size:"x-small",color:"success",variant:"flat",class:"ml-2"},{default:u(()=>[...g[6]||(g[6]=[M(" Already in Pharmacy ",-1)])]),_:1})):ge("",!0)]),s.value.saltComposition?(U(),me("div",rQe,K(s.value.saltComposition),1)):ge("",!0),s.value.marketer?(U(),me("div",sQe,K(s.value.marketer),1)):ge("",!0),s.value.isLocal?ge("",!0):(U(),me("div",oQe,[l(w,{size:"small"},{default:u(()=>[...g[7]||(g[7]=[M("mdi-information",-1)])]),_:1}),g[8]||(g[8]=M(" This medicine will be created in your database first ",-1))]))])])]),_:1},8,["color"])):ge("",!0)]),_:1}),l(T),l(D,{class:"pa-4"},{default:u(()=>[l(C),l(b,{onClick:p},{default:u(()=>[...g[9]||(g[9]=[M(" Cancel ",-1)])]),_:1}),l(b,{color:"primary",variant:"outlined",onClick:h,disabled:!s.value||o.value||s.value&&s.value.isPharmacy,loading:o.value},{default:u(()=>[M(K(s.value?.isPharmacy?"Already Added":"Add to Pharmacy"),1)]),_:1},8,["disabled","loading"])]),_:1})]),_:1}),l(P,{modelValue:A.value,"onUpdate:modelValue":g[2]||(g[2]=O=>A.value=O),persistent:"","max-width":"600px"},{default:u(()=>[l(xT,{onClose:g[1]||(g[1]=O=>A.value=!1),"onUpdate:medicinelist":m})]),_:1},8,["modelValue"])],64)}}},lQe=Xt(iQe,[["__scopeId","data-v-4e957024"]]),uQe={key:0,class:"text-caption text-medium-emphasis"},cQe={key:1},dQe={class:"text-caption font-weight-medium"},AQe={key:0,class:"text-caption text-medium-emphasis"},fQe={key:2,class:"text-caption text-error"},mQe={class:"text-caption text-medium-emphasis"},vQe={class:"font-weight-medium"},hQe={class:"text-caption text-medium-emphasis"},pQe={key:0,class:"mb-0.5"},gQe={key:1,class:"mb-0.5"},yQe={key:2},_Qe={__name:"pharmacy-batch-inward-form",props:{medicineId:{type:Number,default:null},medicineInfo:{type:Object,default:null},purchaseInvoiceId:{type:Number,default:null}},emits:["close","batch-created"],setup(e,{emit:t}){const n=Rn(),{showSuccess:a,showError:r}=ra(),s=ae(()=>n.getters["pharmacyModule/currentPharmacyId"]),o=e,i=t,c=V(null),A=V(!1),d=V(!1),f=V(!1),m=V(!1),h=V(null),p=V([]),y=V(""),g=V({medicineId:o.medicineId||null,batchNumber:"",expiryDate:"",packType:"",unitsPerPack:1,mrp:null,discountPercentage:0,saleQuantityPacks:0,freeQuantityPacks:0,cgstPercentage:0,sgstPercentage:0,inwardBillId:"",purchaseInvoiceId:o.purchaseInvoiceId||null,location:""}),w=V("0.00"),b=ae(()=>Number(w.value??0)||0),x=()=>{w.value=(Number(w.value??0)||0).toFixed(2)},T=ae(()=>{const N=Number(g.value.cgstPercentage??0)||0,q=Number(g.value.sgstPercentage??0)||0;return N+q}),F=ae(()=>{const N=b.value||0,q=Number(T.value??0)||0;return N*(1+q/100)}),k=ae(()=>(Number(F.value??0)||0).toFixed(2)),S=ae(()=>{const N=g.value.saleQuantityPacks||0,q=g.value.freeQuantityPacks||0;return N+q}),E=ae(()=>S.value*(g.value.unitsPerPack||1)),C=ae(()=>{const N=g.value.saleQuantityPacks||0,q=g.value.freeQuantityPacks||0,Q=b.value||0,ee=N+q;return ee===0?null:Q*N/ee}),D=ae(()=>{const N=g.value.saleQuantityPacks||0,q=g.value.freeQuantityPacks||0,Q=F.value||0,ee=N+q;return ee===0?null:Q*N/ee}),P=ae(()=>{const N=g.value.cgstPercentage||0,q=g.value.sgstPercentage||0;return N+q}),O=[N=>!!N||"Expiry date is required"],H=[N=>N!=null&&!isNaN(N)&&N>=0||"Sale quantity must be non-negative",N=>{const q=N!=null&&!isNaN(N)?N:0,Q=g.value.freeQuantityPacks!==null&&g.value.freeQuantityPacks!==void 0&&!isNaN(g.value.freeQuantityPacks)?g.value.freeQuantityPacks:0;return q>0||Q>0||"At least one of sale quantity or free quantity must be greater than 0"}],ie=[N=>N!=null&&!isNaN(N)&&N>=0||"Free quantity must be non-negative",N=>{const q=g.value.saleQuantityPacks!==null&&g.value.saleQuantityPacks!==void 0&&!isNaN(g.value.saleQuantityPacks)?g.value.saleQuantityPacks:0,Q=N!=null&&!isNaN(N)?N:0;return q>0||Q>0||"At least one of sale quantity or free quantity must be greater than 0"}],Ae=[N=>{if(!N||N.trim()==="")return"Price to retailer (excl. GST) is required";const q=Number(N);return isNaN(q)?"Price to retailer (excl. GST) must be a valid number":q<0?"Price to retailer (excl. GST) must be non-negative":!0}],j=()=>{c.value&&c.value.validate()},J=()=>{c.value&&c.value.validate()},ue=async()=>{if(o.purchaseInvoiceId)try{const{data:N}=await Cg(o.purchaseInvoiceId);N&&(y.value=`${N.pharmacyPurchaseInvoiceIdentifier} (${ne(N.pharmacyPurchaseInvoiceDate)})`)}catch(N){console.error("Error loading invoice info:",N)}else{m.value=!0;try{const{data:N}=await Pce(s.value);p.value=N||[]}catch(N){console.error("Error loading purchase invoices:",N)}finally{m.value=!1}}},ne=N=>N?new Date(N*1e3).toLocaleDateString():"-",Y=async()=>{if(!o.medicineId){h.value=null;return}if(o.medicineInfo){h.value={id:o.medicineInfo.id,productName:o.medicineInfo.productName,marketer:o.medicineInfo.marketer},g.value.medicineId=o.medicineInfo.id;return}try{f.value=!0;const{data:N,error:q}=await ww();if(!q&&N){const Q=N.find(ee=>ee.id===o.medicineId);Q?(h.value={id:Q.id,productName:Q.productName,marketer:Q.marketer},g.value.medicineId=Q.id):(r("Medicine not found"),h.value=null)}else r("Failed to load medicine details"),h.value=null}catch(N){console.error("Error loading medicine details:",N),r("Error loading medicine details"),h.value=null}finally{f.value=!1}},te=async()=>{if(!A.value){c.value?.validate();return}try{d.value=!0;const N=g.value.saleQuantityPacks||0,q=g.value.freeQuantityPacks||0;if(N===0&&q===0){r("At least one of sale quantity or free quantity must be greater than 0"),d.value=!1;return}const Q=D.value;if(Q!==null&&g.value.mrp<Q){r("MRP must be greater than or equal to calculated cost"),d.value=!1;return}if(!s.value){r("Please select a pharmacy first");return}const ee={medicineId:g.value.medicineId,pharmacyId:s.value,batchNumber:g.value.batchNumber,expiryDate:g.value.expiryDate,packType:g.value.packType,unitsPerPack:parseInt(g.value.unitsPerPack||1),mrp:parseFloat(g.value.mrp),discountPercentage:parseFloat(g.value.discountPercentage||0),saleQuantityPacks:parseFloat(g.value.saleQuantityPacks||0),freeQuantityPacks:parseFloat(g.value.freeQuantityPacks||0),priceToRetailer:parseFloat(F.value||0),cgstPercentage:parseFloat(g.value.cgstPercentage||0),sgstPercentage:parseFloat(g.value.sgstPercentage||0),inwardBillId:g.value.inwardBillId||"",purchaseInvoiceId:g.value.purchaseInvoiceId||o.purchaseInvoiceId||null,location:g.value.location||""},{data:z,error:X}=await vM(ee);X?r(X.response?.data?.error||"Failed to create batch inward"):(a("Batch inward created successfully"),i("batch-created"),L())}catch(N){console.error("Error saving batch inward:",N),r("An unexpected error occurred")}finally{d.value=!1}},L=()=>{i("close")};return Ke(()=>o.purchaseInvoiceId,N=>{N&&(g.value.purchaseInvoiceId=N,ue())},{immediate:!0}),un(()=>{x(),o.medicineId?Y():r("Medicine ID is required"),ue()}),(N,q)=>{const Q=I("v-icon"),ee=I("v-btn"),z=I("v-card-title"),X=I("v-divider"),le=I("v-col"),re=I("v-text-field"),de=I("v-select"),G=I("v-autocomplete"),Z=I("v-row"),ce=I("v-form"),Se=I("v-card-text"),Pe=I("v-spacer"),ye=I("v-card-actions"),Ce=I("v-card");return U(),pe(Ce,{rounded:"lg",color:"surfaceContainer",flat:""},{default:u(()=>[l(z,{class:"d-flex align-center justify-space-between"},{default:u(()=>[q[16]||(q[16]=v("span",null,"Add purchased inventory",-1)),l(ee,{onClick:L,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(Q,{size:"18"},{default:u(()=>[...q[15]||(q[15]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(X),l(Se,{class:"py-1"},{default:u(()=>[l(ce,{ref_key:"form",ref:c,modelValue:A.value,"onUpdate:modelValue":q[14]||(q[14]=_e=>A.value=_e)},{default:u(()=>[l(Z,{dense:""},{default:u(()=>[l(le,{cols:"12",class:"pb-1"},{default:u(()=>[f.value?(U(),me("div",uQe," Loading... ")):h.value?(U(),me("div",cQe,[v("div",dQe,K(h.value.productName||"Unknown Medicine"),1),h.value.marketer?(U(),me("div",AQe,K(h.value.marketer),1)):ge("",!0)])):(U(),me("div",fQe," Medicine not found "))]),_:1}),l(le,{cols:"12",md:"6"},{default:u(()=>[l(re,{modelValue:g.value.batchNumber,"onUpdate:modelValue":q[0]||(q[0]=_e=>g.value.batchNumber=_e),label:"Batch Number *",variant:"outlined",density:"compact",rules:[_e=>!!_e||"Batch number is required"],"prepend-inner-icon":"mdi-barcode"},null,8,["modelValue","rules"])]),_:1}),l(le,{cols:"12",md:"6"},{default:u(()=>[l(re,{modelValue:g.value.expiryDate,"onUpdate:modelValue":q[1]||(q[1]=_e=>g.value.expiryDate=_e),type:"date",label:"Expiry Date *",variant:"outlined",density:"compact",rules:O,"prepend-inner-icon":"mdi-calendar"},null,8,["modelValue"])]),_:1}),l(le,{cols:"12",md:"6"},{default:u(()=>[l(de,{modelValue:g.value.packType,"onUpdate:modelValue":q[2]||(q[2]=_e=>g.value.packType=_e),items:$e(Vw),label:"Pack Type *",variant:"outlined",density:"compact",rules:[_e=>!!_e||"Pack type is required"],"prepend-inner-icon":"mdi-package-variant"},null,8,["modelValue","items","rules"])]),_:1}),l(le,{cols:"12",md:"6"},{default:u(()=>[l(re,{modelValue:g.value.unitsPerPack,"onUpdate:modelValue":q[3]||(q[3]=_e=>g.value.unitsPerPack=_e),modelModifiers:{number:!0},label:"Units Per Pack *",variant:"outlined",density:"compact",type:"number",rules:[_e=>_e!=null&&!isNaN(_e)&&_e>0||"Units per pack must be greater than 0"],"prepend-inner-icon":"mdi-numeric"},null,8,["modelValue","rules"])]),_:1}),l(le,{cols:"12",md:"6"},{default:u(()=>[l(re,{modelValue:g.value.mrp,"onUpdate:modelValue":q[4]||(q[4]=_e=>g.value.mrp=_e),modelModifiers:{number:!0},label:"MRP per Pack () *",variant:"outlined",density:"compact",type:"number",rules:[_e=>_e!=null&&!isNaN(_e)&&_e>=0||"MRP must be a positive number"],"prepend-inner-icon":"mdi-currency-inr"},null,8,["modelValue","rules"])]),_:1}),l(le,{cols:"12",md:"6"},{default:u(()=>[l(re,{modelValue:g.value.discountPercentage,"onUpdate:modelValue":q[5]||(q[5]=_e=>g.value.discountPercentage=_e),modelModifiers:{number:!0},label:"Discount to Patients % *",variant:"outlined",density:"compact",type:"number",rules:[_e=>_e!=null&&!isNaN(_e)&&_e>=0&&_e<=100||"Discount must be between 0-100%"],"prepend-inner-icon":"mdi-percent"},null,8,["modelValue","rules"])]),_:1}),l(le,{cols:"12",class:"py-0"},{default:u(()=>[l(X)]),_:1}),l(le,{cols:"12",md:"6"},{default:u(()=>[l(re,{modelValue:g.value.saleQuantityPacks,"onUpdate:modelValue":[q[6]||(q[6]=_e=>g.value.saleQuantityPacks=_e),j],modelModifiers:{number:!0},label:"Sale Quantity (Packs) *",variant:"outlined",density:"compact",type:"number",rules:H,"prepend-inner-icon":"mdi-package-variant"},null,8,["modelValue"])]),_:1}),l(le,{cols:"12",md:"6"},{default:u(()=>[l(re,{modelValue:g.value.freeQuantityPacks,"onUpdate:modelValue":[q[7]||(q[7]=_e=>g.value.freeQuantityPacks=_e),J],modelModifiers:{number:!0},label:"Free Quantity (Packs) *",variant:"outlined",density:"compact",type:"number",rules:ie,"prepend-inner-icon":"mdi-gift"},null,8,["modelValue"])]),_:1}),l(le,{cols:"12",md:"6"},{default:u(()=>[l(re,{modelValue:g.value.cgstPercentage,"onUpdate:modelValue":q[8]||(q[8]=_e=>g.value.cgstPercentage=_e),modelModifiers:{number:!0},label:"CGST % *",variant:"outlined",density:"compact",type:"number",rules:[_e=>_e!=null&&!isNaN(_e)&&_e>=0&&_e<=100||"CGST must be between 0-100%"],"prepend-inner-icon":"mdi-percent"},null,8,["modelValue","rules"])]),_:1}),l(le,{cols:"12",md:"6"},{default:u(()=>[l(re,{modelValue:g.value.sgstPercentage,"onUpdate:modelValue":q[9]||(q[9]=_e=>g.value.sgstPercentage=_e),modelModifiers:{number:!0},label:"SGST % *",variant:"outlined",density:"compact",type:"number",rules:[_e=>_e!=null&&!isNaN(_e)&&_e>=0&&_e<=100||"SGST must be between 0-100%"],"prepend-inner-icon":"mdi-percent"},null,8,["modelValue","rules"])]),_:1}),l(le,{cols:"12",md:"6"},{default:u(()=>[l(re,{modelValue:w.value,"onUpdate:modelValue":q[10]||(q[10]=_e=>w.value=_e),label:"Price to Retailer (Excl. GST) per Pack () *",variant:"outlined",density:"compact",inputmode:"decimal",rules:Ae,"prepend-inner-icon":"mdi-currency-inr",hint:"User input (excludes GST)","persistent-hint":"",onBlur:x},null,8,["modelValue"])]),_:1}),l(le,{cols:"12",md:"6"},{default:u(()=>[v("div",mQe,[v("div",vQe,"Price to Retailer (Incl. GST): "+K(k.value),1),q[17]||(q[17]=v("div",null,"Computed using CGST + SGST",-1))])]),_:1}),e.purchaseInvoiceId?ge("",!0):(U(),pe(le,{key:0,cols:"12",md:"6"},{default:u(()=>[l(G,{modelValue:g.value.purchaseInvoiceId,"onUpdate:modelValue":q[11]||(q[11]=_e=>g.value.purchaseInvoiceId=_e),items:p.value,"item-title":"displayText","item-value":"id",label:"Purchase Invoice (Optional)",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-file-document",loading:m.value,hint:"Link this batch to a purchase invoice","persistent-hint":"",clearable:""},null,8,["modelValue","items","loading"])]),_:1})),e.purchaseInvoiceId?(U(),pe(le,{key:1,cols:"12",md:"6"},{default:u(()=>[l(re,{"model-value":y.value,label:"Purchase Invoice",variant:"outlined",density:"compact",readonly:"","prepend-inner-icon":"mdi-file-document"},null,8,["model-value"])]),_:1})):ge("",!0),l(le,{cols:"12",md:"6"},{default:u(()=>[l(re,{modelValue:g.value.inwardBillId,"onUpdate:modelValue":q[12]||(q[12]=_e=>g.value.inwardBillId=_e),label:"Inward Bill ID",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-receipt",hint:"Optional reference to inward bill","persistent-hint":""},null,8,["modelValue"])]),_:1}),l(le,{cols:"12",md:"6"},{default:u(()=>[l(re,{modelValue:g.value.location,"onUpdate:modelValue":q[13]||(q[13]=_e=>g.value.location=_e),label:"Location",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-map-marker",hint:"Physical storage location (e.g., Shelf A-3, Room 1)","persistent-hint":""},null,8,["modelValue"])]),_:1}),l(le,{cols:"12",class:"pt-1"},{default:u(()=>[l(X,{class:"mb-1"}),v("div",hQe,[S.value>0?(U(),me("div",pQe,[q[18]||(q[18]=v("strong",null,"Total Quantity:",-1)),M(" "+K(S.value)+" packs ("+K(E.value)+" units) ",1)])):ge("",!0),C.value!==null?(U(),me("div",gQe,[q[19]||(q[19]=v("strong",null,"Cost per Pack (Excl. GST):",-1)),M(" "+K(C.value.toFixed(2)),1)])):ge("",!0),P.value!==null?(U(),me("div",yQe,[q[20]||(q[20]=v("strong",null,"GST %:",-1)),M(" "+K(P.value.toFixed(2))+"% ",1)])):ge("",!0)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(X),l(ye,{class:"pa-3"},{default:u(()=>[l(Pe),l(ee,{onClick:L},{default:u(()=>[...q[21]||(q[21]=[M(" Cancel ",-1)])]),_:1}),l(ee,{color:"primary",onClick:te,disabled:!A.value||d.value,loading:d.value,variant:"outlined"},{default:u(()=>[...q[22]||(q[22]=[M(" Add purchased inventory ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})}}},wQe=Xt(_Qe,[["__scopeId","data-v-6a6280f1"]]),bQe={class:"text-body-2 font-weight-medium"},xQe={key:0,class:"text-caption text-medium-emphasis mt-0.5"},CQe={class:"text-caption text-medium-emphasis"},SQe={class:"font-weight-medium"},EQe={class:"text-body-2 text-medium-emphasis"},BQe={key:0,class:"mb-0.5"},kQe={key:1,class:"mb-0.5"},TQe={key:2},IQe={__name:"edit-batch-inward",props:{batchId:{type:Number,required:!0},batch:{type:Object,required:!0}},emits:["close","batch-updated"],setup(e,{emit:t}){const{showSuccess:n,showError:a}=ra(),r=e,s=t,o=V(null),i=V(!1),c=V(!1),A=V(null),d=V(null),f=L=>{if(!L)return"";try{const N=new Date(L*1e3);if(isNaN(N.getTime()))return"";const q=N.getFullYear(),Q=String(N.getMonth()+1).padStart(2,"0"),ee=String(N.getDate()).padStart(2,"0");return`${q}-${Q}-${ee}`}catch(N){return console.error("Error converting timestamp to date:",N),""}},m=r.batch.unitsPerPack||1,h=r.batch.saleQuantity||0,p=r.batch.freeQuantity||0,g=(r.batch.priceToRetailer||0)/100,w=ae(()=>{const L=Number(S.value.cgstPercentage??0)||0,N=Number(S.value.sgstPercentage??0)||0;return L+N}),b=V("0.00"),x=ae(()=>Number(b.value??0)||0),T=()=>{b.value=(Number(b.value??0)||0).toFixed(2)},F=ae(()=>{const L=x.value||0,N=Number(w.value??0)||0;return L*(1+N/100)}),k=ae(()=>(Number(F.value??0)||0).toFixed(2)),S=V({batchNumber:r.batch.batchNumber||"",expiryDate:r.batch.expiryDate?typeof r.batch.expiryDate=="number"?f(r.batch.expiryDate):typeof r.batch.expiryDate=="string"&&r.batch.expiryDate.includes("T")?r.batch.expiryDate.split("T")[0]:r.batch.expiryDate:"",packType:r.batch.packType||"",unitsPerPack:m,mrp:r.batch.mrp||null,discountPercentage:r.batch.discountPercentage||0,saleQuantityPacks:m>0?h/m:0,freeQuantityPacks:m>0?p/m:0,cgstPercentage:r.batch.cgstPercentage||0,sgstPercentage:r.batch.sgstPercentage||0,inwardBillId:r.batch.inwardBillId||"",location:r.batch.location||""}),E=()=>{const N=1+(Number(w.value??0)||0)/100;if(N<=0){b.value="0.00";return}b.value=((Number(g??0)||0)/N).toFixed(2)},C=ae(()=>{const L=S.value.saleQuantityPacks||0,N=S.value.freeQuantityPacks||0;return L+N}),D=ae(()=>C.value*(S.value.unitsPerPack||1)),P=ae(()=>{const L=S.value.saleQuantityPacks||0,N=S.value.freeQuantityPacks||0,q=Number(x.value??0)||0,Q=L+N;return Q===0?null:q*L/Q}),O=ae(()=>{const L=S.value.saleQuantityPacks||0,N=S.value.freeQuantityPacks||0,q=F.value||0,Q=L+N;return Q===0?null:q*L/Q}),H=ae(()=>{const L=S.value.cgstPercentage||0,N=S.value.sgstPercentage||0;return L+N}),ie=[L=>!!L||"Expiry date is required"],Ae=[L=>L!=null&&L>=0||"Sale quantity must be non-negative",L=>{const N=L||0,q=S.value.freeQuantityPacks||0;return N>0||q>0||"At least one of sale quantity or free quantity must be greater than 0"}],j=[L=>L!=null&&L>=0||"Free quantity must be non-negative",L=>{const N=S.value.saleQuantityPacks||0,q=L||0;return N>0||q>0||"At least one of sale quantity or free quantity must be greater than 0"}],J=async()=>{if(!i.value){o.value?.validate();return}try{c.value=!0;const L=S.value.saleQuantityPacks||0,N=S.value.freeQuantityPacks||0;if(L===0&&N===0){a("At least one of sale quantity or free quantity must be greater than 0"),c.value=!1;return}const q=O.value;if(q!==null&&S.value.mrp<q){a("MRP must be greater than or equal to calculated cost"),c.value=!1;return}const Q={batchNumber:S.value.batchNumber,expiryDate:S.value.expiryDate,packType:S.value.packType,unitsPerPack:parseInt(S.value.unitsPerPack||1),mrp:parseFloat(S.value.mrp),discountPercentage:parseFloat(S.value.discountPercentage||0),saleQuantityPacks:parseFloat(S.value.saleQuantityPacks||0),freeQuantityPacks:parseFloat(S.value.freeQuantityPacks||0),priceToRetailer:parseFloat(F.value||0),cgstPercentage:parseFloat(S.value.cgstPercentage||0),sgstPercentage:parseFloat(S.value.sgstPercentage||0),inwardBillId:S.value.inwardBillId||"",location:S.value.location||""},{data:ee,error:z}=await vce(r.batchId,Q);z?a(z.response?.data?.error||"Failed to update batch inward"):(n("Batch inward updated successfully"),s("batch-updated"),te())}catch(L){console.error("Error updating batch inward:",L),a("An unexpected error occurred")}finally{c.value=!1}},ue=async()=>{if(r.batch.purchaseInvoiceId)try{const{data:L}=await Cg(r.batch.purchaseInvoiceId);L&&(d.value={id:L.id,identifier:L.pharmacyPurchaseInvoiceIdentifier,date:L.pharmacyPurchaseInvoiceDate,displayText:`${L.pharmacyPurchaseInvoiceIdentifier} (${ne(L.pharmacyPurchaseInvoiceDate)})`})}catch(L){console.error("Error loading purchase invoice info:",L)}},ne=L=>L?new Date(L*1e3).toLocaleDateString():"-",Y=()=>{r.batch.medicineName||r.batch.medicineMarketer?A.value={id:r.batch.medicineId,productName:r.batch.medicineName,marketer:r.batch.medicineMarketer}:ww().then(({data:L,error:N})=>{if(!N&&L){for(const q of L)if(q.batches&&q.batches.find(ee=>ee.id===r.batchId)){A.value={id:q.id,productName:q.productName,marketer:q.marketer};break}}}).catch(L=>{console.error("Error loading medicine info:",L)})},te=()=>{s("close")};return un(()=>{Y(),ue(),E()}),(L,N)=>{const q=I("v-icon"),Q=I("v-btn"),ee=I("v-card-title"),z=I("v-divider"),X=I("v-col"),le=I("v-text-field"),re=I("v-select"),de=I("v-row"),G=I("v-form"),Z=I("v-card-text"),ce=I("v-spacer"),Se=I("v-card-actions"),Pe=I("v-card");return U(),pe(Pe,{rounded:"lg",color:"surfaceContainer",flat:""},{default:u(()=>[l(ee,{class:"d-flex align-center justify-space-between"},{default:u(()=>[N[15]||(N[15]=v("span",null,"Edit purchased inventory",-1)),l(Q,{onClick:te,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(q,{size:"18"},{default:u(()=>[...N[14]||(N[14]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(z),l(Z,{class:"py-1"},{default:u(()=>[l(G,{ref_key:"form",ref:o,modelValue:i.value,"onUpdate:modelValue":N[13]||(N[13]=ye=>i.value=ye)},{default:u(()=>[l(de,{dense:""},{default:u(()=>[A.value?(U(),pe(X,{key:0,cols:"12"},{default:u(()=>[v("div",bQe,K(A.value.productName||"Unknown Medicine"),1),A.value.marketer?(U(),me("div",xQe,K(A.value.marketer),1)):ge("",!0)]),_:1})):ge("",!0),l(X,{cols:"12",md:"6"},{default:u(()=>[l(le,{modelValue:S.value.batchNumber,"onUpdate:modelValue":N[0]||(N[0]=ye=>S.value.batchNumber=ye),label:"Batch Number *",variant:"outlined",density:"compact",rules:[ye=>!!ye||"Batch number is required"],"prepend-inner-icon":"mdi-barcode"},null,8,["modelValue","rules"])]),_:1}),l(X,{cols:"12",md:"6"},{default:u(()=>[l(le,{modelValue:S.value.expiryDate,"onUpdate:modelValue":N[1]||(N[1]=ye=>S.value.expiryDate=ye),type:"date",label:"Expiry Date *",variant:"outlined",density:"compact",rules:ie,"prepend-inner-icon":"mdi-calendar"},null,8,["modelValue"])]),_:1}),l(X,{cols:"12",md:"6"},{default:u(()=>[l(re,{modelValue:S.value.packType,"onUpdate:modelValue":N[2]||(N[2]=ye=>S.value.packType=ye),items:$e(Vw),label:"Pack Type *",variant:"outlined",density:"compact",rules:[ye=>!!ye||"Pack type is required"],"prepend-inner-icon":"mdi-package-variant"},null,8,["modelValue","items","rules"])]),_:1}),l(X,{cols:"12",md:"6"},{default:u(()=>[l(le,{modelValue:S.value.unitsPerPack,"onUpdate:modelValue":N[3]||(N[3]=ye=>S.value.unitsPerPack=ye),modelModifiers:{number:!0},label:"Units Per Pack *",variant:"outlined",density:"compact",type:"number",rules:[ye=>ye!=null&&ye>0||"Units per pack must be greater than 0"],"prepend-inner-icon":"mdi-numeric"},null,8,["modelValue","rules"])]),_:1}),l(X,{cols:"12",md:"6"},{default:u(()=>[l(le,{modelValue:S.value.mrp,"onUpdate:modelValue":N[4]||(N[4]=ye=>S.value.mrp=ye),modelModifiers:{number:!0},label:"MRP per Pack () *",variant:"outlined",density:"compact",type:"number",rules:[ye=>ye!=null&&ye>=0||"MRP must be a positive number"],"prepend-inner-icon":"mdi-currency-inr"},null,8,["modelValue","rules"])]),_:1}),l(X,{cols:"12",md:"6"},{default:u(()=>[l(le,{modelValue:S.value.discountPercentage,"onUpdate:modelValue":N[5]||(N[5]=ye=>S.value.discountPercentage=ye),modelModifiers:{number:!0},label:"Discount to Patients % *",variant:"outlined",density:"compact",type:"number",rules:[ye=>ye!=null&&ye>=0&&ye<=100||"Discount must be between 0-100%"],"prepend-inner-icon":"mdi-percent"},null,8,["modelValue","rules"])]),_:1}),l(X,{cols:"12"},{default:u(()=>[l(z,{class:"my-1"})]),_:1}),l(X,{cols:"12",md:"6"},{default:u(()=>[l(le,{modelValue:S.value.saleQuantityPacks,"onUpdate:modelValue":N[6]||(N[6]=ye=>S.value.saleQuantityPacks=ye),modelModifiers:{number:!0},label:"Sale Quantity (Packs) *",variant:"outlined",density:"compact",type:"number",rules:Ae,"prepend-inner-icon":"mdi-package-variant"},null,8,["modelValue"])]),_:1}),l(X,{cols:"12",md:"6"},{default:u(()=>[l(le,{modelValue:S.value.freeQuantityPacks,"onUpdate:modelValue":N[7]||(N[7]=ye=>S.value.freeQuantityPacks=ye),modelModifiers:{number:!0},label:"Free Quantity (Packs) *",variant:"outlined",density:"compact",type:"number",rules:j,"prepend-inner-icon":"mdi-gift"},null,8,["modelValue"])]),_:1}),l(X,{cols:"12",md:"6"},{default:u(()=>[l(le,{modelValue:S.value.cgstPercentage,"onUpdate:modelValue":N[8]||(N[8]=ye=>S.value.cgstPercentage=ye),modelModifiers:{number:!0},label:"CGST % *",variant:"outlined",density:"compact",type:"number",rules:[ye=>ye!=null&&ye>=0&&ye<=100||"CGST must be between 0-100%"],"prepend-inner-icon":"mdi-percent"},null,8,["modelValue","rules"])]),_:1}),l(X,{cols:"12",md:"6"},{default:u(()=>[l(le,{modelValue:S.value.sgstPercentage,"onUpdate:modelValue":N[9]||(N[9]=ye=>S.value.sgstPercentage=ye),modelModifiers:{number:!0},label:"SGST % *",variant:"outlined",density:"compact",type:"number",rules:[ye=>ye!=null&&ye>=0&&ye<=100||"SGST must be between 0-100%"],"prepend-inner-icon":"mdi-percent"},null,8,["modelValue","rules"])]),_:1}),l(X,{cols:"12",md:"6"},{default:u(()=>[l(le,{modelValue:b.value,"onUpdate:modelValue":N[10]||(N[10]=ye=>b.value=ye),label:"Price to Retailer (Excl. GST) per Pack () *",variant:"outlined",density:"compact",inputmode:"decimal",rules:[ye=>Number(ye)>=0||"Price to retailer (excl. GST) must be non-negative"],"prepend-inner-icon":"mdi-currency-inr",hint:"User input (excludes GST)","persistent-hint":"",onBlur:T},null,8,["modelValue","rules"])]),_:1}),l(X,{cols:"12",md:"6"},{default:u(()=>[v("div",CQe,[v("div",SQe,"Price to Retailer (Incl. GST): "+K(k.value),1),N[16]||(N[16]=v("div",null,"Computed using CGST + SGST",-1))])]),_:1}),d.value?(U(),pe(X,{key:1,cols:"12",md:"6"},{default:u(()=>[l(le,{"model-value":d.value.displayText,label:"Purchase Invoice",variant:"outlined",density:"compact",readonly:"","prepend-inner-icon":"mdi-file-document",hint:"Invoice link cannot be changed","persistent-hint":""},null,8,["model-value"])]),_:1})):ge("",!0),l(X,{cols:"12",md:"6"},{default:u(()=>[l(le,{modelValue:S.value.inwardBillId,"onUpdate:modelValue":N[11]||(N[11]=ye=>S.value.inwardBillId=ye),label:"Inward Bill ID",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-receipt",hint:"Optional reference to inward bill","persistent-hint":""},null,8,["modelValue"])]),_:1}),l(X,{cols:"12",md:"6"},{default:u(()=>[l(le,{modelValue:S.value.location,"onUpdate:modelValue":N[12]||(N[12]=ye=>S.value.location=ye),label:"Location",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-map-marker",hint:"Physical storage location (e.g., Shelf A-3, Room 1)","persistent-hint":""},null,8,["modelValue"])]),_:1}),l(X,{cols:"12"},{default:u(()=>[l(z,{class:"my-1"}),v("div",EQe,[C.value>0?(U(),me("div",BQe,[N[17]||(N[17]=v("strong",null,"Total Quantity:",-1)),M(" "+K(C.value)+" packs ("+K(D.value)+" units) ",1)])):ge("",!0),P.value!==null?(U(),me("div",kQe,[N[18]||(N[18]=v("strong",null,"Calculated Cost per Pack (Excl. GST):",-1)),M(" "+K(P.value.toFixed(2)),1)])):ge("",!0),H.value!==null?(U(),me("div",TQe,[N[19]||(N[19]=v("strong",null,"Calculated GST %:",-1)),M(" "+K(H.value.toFixed(2))+"% ",1)])):ge("",!0)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(z),l(Se,{class:"pa-3"},{default:u(()=>[l(ce),l(Q,{onClick:te},{default:u(()=>[...N[20]||(N[20]=[M(" Cancel ",-1)])]),_:1}),l(Q,{color:"primary",variant:"outlined",onClick:J,disabled:!i.value||c.value,loading:c.value},{default:u(()=>[...N[21]||(N[21]=[M(" Update purchased inventory ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})}}},FQe=Xt(IQe,[["__scopeId","data-v-b0e37027"]]),PQe={class:"text-body-2"},DQe={key:2,class:"text-caption text-medium-emphasis mt-1 ml-4"},UQe={key:3,class:"text-caption text-medium-emphasis mt-1 ml-4"},RQe={__name:"edit-inventory",props:{batchId:{type:Number,required:!0},batch:{type:Object,required:!0}},emits:["close","inventory-added"],setup(e,{emit:t}){const{showSuccess:n,showError:a}=ra(),r=e,s=t,o=V(null),i=V(!1),c=V(!1),A=V(!1),d=V(null),f=V(null),m=V("increase"),h=V(""),p=V("packs"),y=V(null),g=V(null),w=ae(()=>p.value==="packs"&&y.value&&f.value?.unitsPerPack>0?y.value*f.value.unitsPerPack:g.value||0),b=ae(()=>p.value==="units"&&g.value&&f.value?.unitsPerPack>0?(g.value/f.value.unitsPerPack).toFixed(2):y.value||0),x=()=>{p.value==="packs"?(y.value&&f.value?.unitsPerPack>0&&(g.value=y.value*f.value.unitsPerPack),p.value="units"):(g.value&&f.value?.unitsPerPack>0&&(y.value=g.value/f.value.unitsPerPack),p.value="packs")},T=ae(()=>[E=>E!=null&&E>0||"Quantity must be greater than 0",E=>{if(m.value==="decrease"&&f.value){const C=f.value.availableUnits||0;let D=0;return p.value==="packs"&&E&&f.value?.unitsPerPack>0?D=E*f.value.unitsPerPack:p.value==="units"&&E&&(D=E),D<=C||`Cannot decrease more than current stock (${C} units)`}return!0}]),F=async()=>{try{A.value=!0,d.value=null,r.batch?f.value={batchNumber:r.batch.batchNumber||"Unknown",medicineName:r.batch.medicineName||"Unknown",availableUnits:r.batch.availableUnits||0,medicineId:r.batch.medicineId,unitsPerPack:r.batch.unitsPerPack||1}:d.value="Batch information not available"}catch(E){console.error("Error loading batch info:",E),d.value=E.message||"Failed to load batch information"}finally{A.value=!1}},k=async()=>{if(!i.value){o.value?.validate();return}if(!m.value){a("Please select increase or decrease for stock correction");return}try{c.value=!0;let E=0;if(p.value==="packs"&&y.value&&f.value?.unitsPerPack>0)E=y.value*f.value.unitsPerPack;else if(p.value==="units"&&g.value)E=g.value;else{a("Please enter a valid quantity"),c.value=!1;return}const C="stock_correction";let D=E;m.value==="decrease"&&(D=-E);const{data:P,error:O}=await Vce(r.batchId,D,h.value,C);if(O)a(O.response?.data?.error||"Failed to adjust inventory");else{const H=m.value==="increase"?"increased":"decreased";n(`Inventory ${H} successfully`),s("inventory-added"),S()}}catch(E){console.error("Error adjusting inventory:",E),a("An unexpected error occurred")}finally{c.value=!1}},S=()=>{m.value="increase",y.value=null,g.value=null,p.value="packs",h.value="",s("close")};return un(()=>{F()}),(E,C)=>{const D=I("v-icon"),P=I("v-btn"),O=I("v-card-title"),H=I("v-divider"),ie=I("v-progress-circular"),Ae=I("v-col"),j=I("v-row"),J=I("v-alert"),ue=I("v-radio"),ne=I("v-radio-group"),Y=I("v-text-field"),te=I("v-textarea"),L=I("v-form"),N=I("v-card-text"),q=I("v-spacer"),Q=I("v-card-actions"),ee=I("v-card");return U(),pe(ee,{rounded:"lg",color:"surfaceContainer",flat:""},{default:u(()=>[l(O,{class:"d-flex align-center justify-space-between"},{default:u(()=>[C[6]||(C[6]=v("span",null,"Manage Inventory",-1)),l(P,{onClick:S,variant:"text",size:"small",color:"outline",class:"btn-hover-base"},{default:u(()=>[l(D,{size:"18"},{default:u(()=>[...C[5]||(C[5]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(H),l(N,{class:"pt-4"},{default:u(()=>[A.value?(U(),pe(j,{key:0},{default:u(()=>[l(Ae,{cols:"12",class:"d-flex justify-center align-center pa-8"},{default:u(()=>[l(ie,{indeterminate:"",color:"primary"})]),_:1})]),_:1})):f.value?(U(),me(We,{key:1},[l(J,{type:"info",variant:"tonal",class:"mb-4"},{default:u(()=>[v("div",PQe,[C[7]||(C[7]=v("strong",null,"Batch:",-1)),M(" "+K(f.value.batchNumber),1),C[8]||(C[8]=v("br",null,null,-1)),C[9]||(C[9]=v("strong",null,"Medicine:",-1)),M(" "+K(f.value.medicineName),1),C[10]||(C[10]=v("br",null,null,-1)),C[11]||(C[11]=v("strong",null,"Current Stock:",-1)),M(" "+K(f.value.availableUnits||0)+" units ",1)])]),_:1}),l(L,{ref_key:"form",ref:o,modelValue:i.value,"onUpdate:modelValue":C[4]||(C[4]=z=>i.value=z)},{default:u(()=>[l(j,null,{default:u(()=>[l(Ae,{cols:"12"},{default:u(()=>[l(ne,{modelValue:m.value,"onUpdate:modelValue":C[0]||(C[0]=z=>m.value=z),inline:"",rules:[z=>!!z||"Please select correction direction"]},{default:u(()=>[l(ue,{label:"Increase Stock",value:"increase",color:"success"}),l(ue,{label:"Decrease Stock",value:"decrease",color:"error"})]),_:1},8,["modelValue","rules"])]),_:1}),l(Ae,{cols:"12"},{default:u(()=>[p.value==="packs"?(U(),pe(Y,{key:0,modelValue:y.value,"onUpdate:modelValue":C[1]||(C[1]=z=>y.value=z),modelModifiers:{number:!0},label:"Quantity (Packs) *",variant:"outlined",density:"comfortable",type:"number",rules:T.value,"prepend-inner-icon":"mdi-package-variant",hint:"Enter quantity in packs","persistent-hint":""},{"append-inner":u(()=>[l(P,{icon:"",size:"small",variant:"text",onClick:x,title:"Switch to Units"},{default:u(()=>[l(D,{size:"small"},{default:u(()=>[...C[12]||(C[12]=[M("mdi-swap-horizontal",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","rules"])):(U(),pe(Y,{key:1,modelValue:g.value,"onUpdate:modelValue":C[2]||(C[2]=z=>g.value=z),modelModifiers:{number:!0},label:"Quantity (Units) *",variant:"outlined",density:"comfortable",type:"number",rules:T.value,"prepend-inner-icon":"mdi-package-variant",hint:"Enter quantity in units","persistent-hint":""},{"append-inner":u(()=>[l(P,{icon:"",size:"small",variant:"text",onClick:x,title:"Switch to Packs"},{default:u(()=>[l(D,{size:"small"},{default:u(()=>[...C[13]||(C[13]=[M("mdi-swap-horizontal",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","rules"])),p.value==="packs"&&f.value?.unitsPerPack>0&&y.value?(U(),me("div",DQe," = "+K(w.value)+" units ("+K(f.value.unitsPerPack)+" units/pack) ",1)):p.value==="units"&&f.value?.unitsPerPack>0&&g.value?(U(),me("div",UQe," = "+K(b.value)+" packs ("+K(f.value.unitsPerPack)+" units/pack) ",1)):ge("",!0)]),_:1}),l(Ae,{cols:"12"},{default:u(()=>[l(te,{modelValue:h.value,"onUpdate:modelValue":C[3]||(C[3]=z=>h.value=z),label:"Reason/Notes *",variant:"outlined",density:"comfortable",rules:[z=>!!z||"Reason is required"],rows:"3","prepend-inner-icon":"mdi-note-text"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)):d.value?(U(),me(We,{key:2},[l(J,{type:"error",class:"mb-4"},{default:u(()=>[M(K(d.value),1)]),_:1}),l(P,{color:"primary",onClick:F,"prepend-icon":"mdi-refresh"},{default:u(()=>[...C[14]||(C[14]=[M(" Retry ",-1)])]),_:1})],64)):ge("",!0)]),_:1}),l(H),l(Q,{class:"pa-4"},{default:u(()=>[l(q),l(P,{variant:"outlined",onClick:S},{default:u(()=>[...C[15]||(C[15]=[M(" Cancel ",-1)])]),_:1}),l(P,{color:"primary",onClick:k,disabled:!i.value||c.value||!f.value,loading:c.value},{default:u(()=>[M(K(m.value==="increase"?"Increase Stock":"Decrease Stock"),1)]),_:1},8,["disabled","loading"])]),_:1})]),_:1})}}},NQe=Xt(RQe,[["__scopeId","data-v-199072f7"]]),VQe={class:"text-medium-emphasis"},LQe={key:0},MQe={__name:"remove-medicine-from-pharmacy",props:{medicine:{type:Object,required:!0}},emits:["close","medicine-removed"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ra(),o=V(!1),i=()=>{a("close")},c=async()=>{try{o.value=!0;const A=await Nce(n.medicine.id);if(A.error){const d=A.error.response?.data?.error||A.error.message||"Failed to remove medicine from pharmacy";s(d)}else r("Medicine removed from pharmacy successfully"),a("medicine-removed"),i()}catch(A){console.error("Error removing medicine from pharmacy:",A),s("An unexpected error occurred while removing the medicine from pharmacy")}finally{o.value=!1}};return(A,d)=>{const f=I("v-card-title"),m=I("v-col"),h=I("v-icon"),p=I("v-btn"),y=I("v-row"),g=I("v-card"),w=I("v-card-text"),b=I("v-divider");return U(),pe(g,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(y,{"no-gutters":""},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(g,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(y,{"no-gutters":""},{default:u(()=>[l(m,{cols:"11"},{default:u(()=>[l(f,{class:"pa-0 pl-2"},{default:u(()=>[...d[0]||(d[0]=[M("Remove Medicine from Pharmacy",-1)])]),_:1})]),_:1}),l(m,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(p,{icon:"",size:"x-small",onClick:i},{default:u(()=>[l(h,null,{default:u(()=>[...d[1]||(d[1]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(y,{"no-gutters":""},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(g,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(y,{"no-gutters":""},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(w,{class:"text-left"},{default:u(()=>[d[4]||(d[4]=M(" Are you sure you want to remove this medicine from pharmacy? ",-1)),d[5]||(d[5]=v("span",{class:"text-warning font-weight-bold"}," Medicine will not be shown in pharmacy operations. You will need to select and add it again later. ",-1)),d[6]||(d[6]=v("br",null,null,-1)),d[7]||(d[7]=v("br",null,null,-1)),v("span",VQe,[d[3]||(d[3]=M(" Medicine: ",-1)),v("strong",null,K(e.medicine?.productName||"N/A"),1),e.medicine?.marketer?(U(),me("span",LQe,[d[2]||(d[2]=M("  Marketer: ",-1)),v("strong",null,K(e.medicine.marketer),1)])):ge("",!0)])]),_:1})]),_:1})]),_:1}),l(b),l(y,{"no-gutters":""},{default:u(()=>[l(m,{cols:"2"}),l(m,{cols:"8",class:"mt-2 d-flex justify-center"},{default:u(()=>[l(p,{variant:"outlined",color:"error",onClick:c,loading:o.value,disabled:o.value},{default:u(()=>[...d[8]||(d[8]=[M(" Yes, Remove from Pharmacy ",-1)])]),_:1},8,["loading","disabled"])]),_:1}),l(m,{cols:"2"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},OQe={class:"d-flex align-center"},HQe={class:"d-flex align-center"},$Qe={class:"pr-3 d-flex"},QQe={class:"scrollable-content"},GQe={class:"text-center"},zQe={class:"text-center"},KQe={class:"text-body-2 text-medium-emphasis mb-4"},WQe={class:"text-center"},jQe={class:"text-center"},qQe={class:"text-body-2 text-medium-emphasis mb-4"},YQe={key:0},XQe={key:1},JQe={class:"d-flex align-center justify-space-between w-100"},ZQe={class:"flex-grow-1"},e7e={class:"d-flex align-center mb-1"},t7e={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},n7e={class:"d-flex align-center flex-wrap"},a7e={class:"d-flex align-center ml-2"},r7e={key:0},s7e={class:"text-right"},o7e={class:"text-right"},i7e={class:"text-right"},l7e={class:"text-right"},u7e={class:"text-center"},c7e={key:1,class:"text-body-2 text-medium-emphasis text-center py-2"},d7e={key:0,class:"text-medium-emphasis"},A7e={__name:"pharmacy-inventory",setup(e){const t=Rn(),{showSuccess:n,showError:a}=ra(),r=ae(()=>t.getters["pharmacyModule/currentPharmacyId"]),s=V(0),o=V([]),i=V(null),c=V(!1),A=V(null),d=V(""),f=V(""),m=V(!1),h=V(!1),p=V(!1),y=V(!1),g=V(!1),w=V(!1),b=V(!1),x=V(!1),T=V(!1),F=V(!1),k=V(null),S=V(null);V(null);const E=V(null),C=V(null),D=V(null),P=V(new Map),O=V(new Set),H=V(!1),ie=V(null),Ae=st=>!st||st===0?"error":st<10?"warning":"success",j=st=>{if(!st)return!1;try{const Je=new Date(st),Nt=new Date;return Nt.setHours(0,0,0,0),Je<Nt}catch{return!1}},J=st=>{if(!st.batches||st.batches.length===0)return!1;const Je=new Date;return Je.setHours(0,0,0,0),st.batches.some(Nt=>{if(!Nt.expiryDate)return!1;try{const rn=new Date(Nt.expiryDate);return rn.setHours(0,0,0,0),rn<Je&&(Nt.availableUnits||0)>0}catch{return!1}})},ue=st=>{if(!st.batches||st.batches.length===0)return!1;const Je=new Date;Je.setHours(0,0,0,0);const Nt=new Date(Je);return Nt.setDate(Nt.getDate()+15),st.batches.some(rn=>{if(!rn.expiryDate)return!1;try{const Lt=new Date(rn.expiryDate);Lt.setHours(0,0,0,0);const _t=Lt>=Je,ut=Lt<=Nt;return _t&&ut&&(rn.availableUnits||0)>0}catch{return!1}})},ne=st=>{if(!st)return"";try{return new Date(st).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return st}},Y=st=>st==null?"0.00":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(st),te=ae(()=>{let st=o.value;if(d.value&&d.value.trim()!==""){const Je=d.value.toLowerCase().trim();st=st.filter(Nt=>(Nt.productName||"").toLowerCase().includes(Je))}if(f.value&&f.value.trim()!==""){const Je=f.value.toLowerCase().trim();st=st.filter(Nt=>(Nt.group||"").toLowerCase().includes(Je))}return m.value&&(st=st.filter(Je=>Je.hasExpiredBatchesWithInventory)),p.value&&(st=st.filter(Je=>Je.hasNearingExpiryBatchesWithInventory)),h.value&&(st=st.filter(Je=>Je.lowStock)),st}),L=st=>{if(!st.batches||st.batches.length===0)return{availableUnits:0,lowStock:!1};const Je=new Date;Je.setHours(0,0,0,0);const Nt=st.batches.filter(_t=>{if(!_t.expiryDate)return!0;try{return new Date(_t.expiryDate)>=Je}catch{return!0}}).reduce((_t,ut)=>_t+(ut.availableUnits||0),0),rn=st.alertUnits||0,Lt=Nt<rn;return{availableUnits:Nt,lowStock:Lt}},N=async()=>{if(!r.value){a("Please select a pharmacy first");return}try{c.value=!0,A.value=null;const{data:st,error:Je}=await ww(r.value);Je?(A.value=Je.response?.data?.error||Je.message||"Failed to load inventory",o.value=[],a("Error loading inventory")):(o.value=(st||[]).map(Nt=>{const rn=L(Nt),Lt=J(Nt),_t=ue(Nt);return{...Nt,availableUnits:rn.availableUnits,lowStock:rn.lowStock,hasExpiredBatchesWithInventory:Lt,hasNearingExpiryBatchesWithInventory:_t}}),await Pt())}catch(st){console.error("Error in loadInventory:",st),A.value=st.message||"An unexpected error occurred",o.value=[],a("Error loading inventory")}finally{c.value=!1}},q=()=>{y.value=!0},Q=(st=null)=>{if(k.value=st,st){const Je=o.value.find(Nt=>Nt.id===st);Je?S.value={id:Je.id,productName:Je.productName,marketer:Je.marketer}:S.value=null}else S.value=null;g.value=!0},ee=st=>{let Je=null,Nt=null;for(const rn of o.value)if(rn.batches&&(Je=rn.batches.find(Lt=>Lt.id===st),Je)){Nt=rn;break}Je?(C.value={...Je,medicineId:Nt.id,medicineName:Nt.productName,medicineMarketer:Nt.marketer},T.value=!0):a("Batch not found")},z=st=>{let Je=null;for(const Nt of o.value)if(Nt.batches){const rn=Nt.batches.find(Lt=>Lt.id===st);if(rn){Je={...rn,medicineName:Nt.productName||"Unknown",medicineId:Nt.id,unitsPerPack:rn.unitsPerPack||1};break}}Je?(C.value=Je,w.value=!0):a("Batch not found")},X=()=>{b.value=!0},le=()=>{y.value=!1},re=()=>{y.value=!1,N()},de=()=>{g.value=!1,k.value=null,S.value=null},G=()=>{g.value=!1,k.value=null,S.value=null,N()},Z=()=>{w.value=!1,C.value=null},ce=()=>{w.value=!1,C.value=null,N()},Se=()=>{b.value=!1},Pe=()=>{b.value=!1,N(),n("Medicine created successfully")},ye=st=>{E.value=st,x.value=!0},Ce=st=>{D.value=st,F.value=!0},_e=()=>{x.value=!1,E.value=null},De=st=>{const Je=o.value.findIndex(Nt=>Nt.id===st.id);Je!==-1&&(o.value[Je]={...o.value[Je],...st}),x.value=!1,E.value=null,N(),n("Medicine updated successfully")},xe=()=>{T.value=!1,C.value=null},Te=()=>{T.value=!1,C.value=null,N()},Me=()=>{F.value=!1,D.value=null},et=()=>{F.value=!1,D.value=null,N()},lt=st=>P.value.has(st)&&P.value.get(st)===!0,Re=st=>!!(st.purchaseInvoiceId||st.purchaseInvoiceIdentifier),Le=st=>lt(st.id)?"Cannot delete: Inventory is used in a bill":Re(st)?"Cannot delete: Batch is linked to a purchase invoice. Remove from invoice view instead.":"Delete Inventory",nt=st=>O.value.has(st),Tt=async st=>{if(P.value.has(st))return P.value.get(st);const{data:Je,error:Nt}=await kce(st);if(Nt)return console.error("Error checking batch usage:",Nt),P.value.set(st,!1),!1;const rn=Je?.isUsed||!1;return P.value.set(st,rn),rn},Pt=async()=>{P.value.clear();const st=[];o.value.forEach(Nt=>{Nt.batches&&Nt.batches.length>0&&Nt.batches.forEach(rn=>{st.push(rn.id)})});const Je=st.map(Nt=>Tt(Nt));await Promise.all(Je)},Kt=async st=>{let Je=null;for(const rn of o.value)if(rn.batches&&(Je=rn.batches.find(Lt=>Lt.id===st),Je))break;if(!Je){a("Batch not found");return}if(Re(Je)){a("Cannot delete batch: Batch is linked to a purchase invoice. Remove from invoice view instead.");return}if(await Tt(st)){a("Cannot delete batch: This inventory is being used in one or more bills");return}ie.value=Je,H.value=!0},$t=()=>{H.value=!1,ie.value=null},bt=async st=>{if(st)try{O.value.add(st);const{data:Je,error:Nt}=await Tce(st);if(Nt){const rn=Nt.message||"Failed to delete batch";a(rn);return}P.value.delete(st),H.value=!1,ie.value=null,n("Batch deleted successfully"),await N()}catch(Je){console.error("Error deleting batch:",Je),a("An unexpected error occurred while deleting the batch")}finally{O.value.delete(st)}};return Ke(r,(st,Je)=>{st&&st!==Je&&N()}),un(()=>{N()}),(st,Je)=>{const Nt=I("v-alert"),rn=I("v-tab"),Lt=I("v-tabs"),_t=I("v-icon"),ut=I("v-card-text"),Ft=I("v-card"),zt=I("v-btn"),dn=I("v-tooltip"),Hn=I("v-col"),Ze=I("v-row"),Ge=I("v-progress-circular"),xt=I("v-text-field"),gt=I("v-checkbox"),Bt=I("v-chip"),wt=I("v-card-title"),gn=I("v-divider"),Wn=I("v-table"),zn=I("v-lazy"),oa=I("v-window-item"),Ra=I("v-window"),Be=I("v-main"),Qe=I("v-dialog");return U(),me(We,null,[l(Be,null,{default:u(()=>[i.value?(U(),pe(Nt,{key:0,type:"error",dismissible:"","onClick:close":Je[0]||(Je[0]=ke=>i.value=null),class:"ma-3"},{default:u(()=>[M(K(i.value),1)]),_:1})):ge("",!0),l(Ze,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[l(Hn,{cols:"12"},{default:u(()=>[l(Ft,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center justify-space-between"},{default:u(()=>[v("div",OQe,[l(Lt,{modelValue:s.value,"onUpdate:modelValue":Je[1]||(Je[1]=ke=>s.value=ke),color:"primary","align-tabs":"start"},{default:u(()=>[l(rn,{value:0},{default:u(()=>[...Je[18]||(Je[18]=[M("Inventory",-1)])]),_:1})]),_:1},8,["modelValue"]),o.value&&o.value.length>0?(U(),pe(Ft,{key:0,rounded:"0",class:"ml-3",color:"warning",variant:"tonal",style:{height:"fit-content"}},{default:u(()=>[l(ut,{class:"py-1 px-2"},{default:u(()=>[v("div",HQe,[l(_t,{color:"warning",size:"small",class:"mr-2"},{default:u(()=>[...Je[19]||(Je[19]=[M("mdi-alert-circle",-1)])]),_:1}),Je[20]||(Je[20]=v("span",{class:"text-body-2 font-weight-medium"}," Before reconciliation, ensure no inventory blocked for draft bills. ",-1))])]),_:1})]),_:1})):ge("",!0)]),v("div",$Qe,[l(Bn,{permission:"pharmacy.inventory.manage"},{default:u(()=>[l(zt,{color:"primary","prepend-icon":"mdi-magnify-plus",onClick:q,style:{"margin-right":"2px"}},{default:u(()=>[...Je[21]||(Je[21]=[M(" Search & Add Medicine ",-1)])]),_:1})]),_:1}),l(Bn,{permission:"pharmacy.inventory.manage"},{default:u(()=>[l(zt,{color:"primary",variant:"outlined","prepend-icon":"mdi-plus-box",onClick:X,style:{"margin-right":"2px"}},{default:u(()=>[...Je[22]||(Je[22]=[M(" Create & Add Medicine ",-1)])]),_:1})]),_:1}),l(dn,{text:"Refresh Inventory"},{activator:u(({props:ke})=>[l(zt,Ue({rounded:"x-small",onClick:N,size:"small"},ke,{loading:c.value,class:"btn-hover-enhanced ml-1"}),{default:u(()=>[l(_t,null,{default:u(()=>[...Je[23]||(Je[23]=[M("mdi-refresh",-1)])]),_:1})]),_:1},16,["loading"])]),_:1})])]),_:1})]),_:1})]),_:1}),l(Ra,{modelValue:s.value,"onUpdate:modelValue":Je[8]||(Je[8]=ke=>s.value=ke),class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[l(oa,{value:0,style:{height:"100%"}},{default:u(()=>[v("div",QQe,[c.value?(U(),pe(Ze,{key:0,"no-gutters":""},{default:u(()=>[l(Hn,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50vh"}},{default:u(()=>[v("div",GQe,[l(Ge,{indeterminate:"",color:"primary",size:"64"}),Je[24]||(Je[24]=v("div",{class:"mt-4 text-subtitle-1"},"Loading inventory...",-1))])]),_:1})]),_:1})):A.value?(U(),pe(Ze,{key:1,"no-gutters":""},{default:u(()=>[l(Hn,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50vh"}},{default:u(()=>[v("div",zQe,[l(_t,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...Je[25]||(Je[25]=[M("mdi-alert-circle",-1)])]),_:1}),Je[27]||(Je[27]=v("div",{class:"text-h6 mb-2"},"Failed to Load Inventory",-1)),v("div",KQe,K(A.value),1),l(zt,{color:"primary",onClick:N,"prepend-icon":"mdi-refresh"},{default:u(()=>[...Je[26]||(Je[26]=[M(" Try Again ",-1)])]),_:1})])]),_:1})]),_:1})):o.value&&o.value.length===0?(U(),pe(Ze,{key:2,"no-gutters":""},{default:u(()=>[l(Hn,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50vh"}},{default:u(()=>[v("div",WQe,[l(_t,{size:"64",color:"grey",class:"mb-4"},{default:u(()=>[...Je[28]||(Je[28]=[M("mdi-pill-off",-1)])]),_:1}),Je[30]||(Je[30]=v("div",{class:"text-h6 mb-2"},"No Pharmacy Inventory",-1)),Je[31]||(Je[31]=v("div",{class:"text-body-2 text-medium-emphasis mb-4"},"Add medicines to start managing inventory",-1)),l(Bn,{permission:"pharmacy.inventory.manage"},{default:u(()=>[l(zt,{color:"primary",onClick:q,"prepend-icon":"mdi-magnify-plus"},{default:u(()=>[...Je[29]||(Je[29]=[M(" Search & Add Medicine ",-1)])]),_:1})]),_:1})])]),_:1})]),_:1})):o.value&&o.value.length>0?(U(),me(We,{key:3},[l(Ze,{"no-gutters":"",class:"mb-2 align-center"},{default:u(()=>[l(Hn,{cols:"12",md:"auto",class:"d-flex align-center flex-wrap gap-2"},{default:u(()=>[l(xt,{modelValue:d.value,"onUpdate:modelValue":Je[2]||(Je[2]=ke=>d.value=ke),placeholder:"Filter by medicine name...",density:"compact",variant:"outlined",clearable:"","hide-details":"","prepend-inner-icon":"mdi-magnify",class:"filter-input",style:{"max-width":"400px","min-width":"280px","margin-left":"4px"}},null,8,["modelValue"]),l(xt,{modelValue:f.value,"onUpdate:modelValue":Je[3]||(Je[3]=ke=>f.value=ke),placeholder:"Filter by group...",density:"compact",variant:"outlined",clearable:"","hide-details":"","prepend-inner-icon":"mdi-tag",class:"filter-input",style:{"max-width":"400px","min-width":"280px","margin-left":"4px"}},null,8,["modelValue"])]),_:1}),l(Hn,{cols:"12",md:"auto",class:"d-flex align-center flex-wrap gap-2 ml-auto",style:{"margin-right":"2px"}},{default:u(()=>[l(gt,{modelValue:m.value,"onUpdate:modelValue":Je[4]||(Je[4]=ke=>m.value=ke),label:"Expired batches only",density:"compact","hide-details":"",color:"error",class:"filter-checkbox"},null,8,["modelValue"]),l(gt,{modelValue:p.value,"onUpdate:modelValue":Je[5]||(Je[5]=ke=>p.value=ke),label:"Nearing expiry",density:"compact","hide-details":"",color:"warning",class:"filter-checkbox"},null,8,["modelValue"]),l(gt,{modelValue:h.value,"onUpdate:modelValue":Je[6]||(Je[6]=ke=>h.value=ke),label:"Low stock only",density:"compact","hide-details":"",color:"warning",class:"filter-checkbox"},null,8,["modelValue"])]),_:1})]),_:1}),d.value&&d.value.trim()!==""||f.value&&f.value.trim()!==""||m.value||p.value||h.value?(U(),me(We,{key:0},[te.value.length===0?(U(),pe(Ze,{key:0,"no-gutters":""},{default:u(()=>[l(Hn,{cols:"12",class:"d-flex justify-center align-center",style:{height:"40vh"}},{default:u(()=>[v("div",jQe,[l(_t,{size:"64",color:"grey",class:"mb-4"},{default:u(()=>[...Je[32]||(Je[32]=[M("mdi-magnify-remove",-1)])]),_:1}),Je[34]||(Je[34]=v("div",{class:"text-h6 mb-2"},"No medicines found",-1)),v("div",qQe,[d.value&&d.value.trim()!==""?(U(),me("span",YQe,' No medicines match "'+K(d.value)+'" ',1)):(U(),me("span",XQe," No medicines match the selected filters "))]),l(zt,{color:"primary",onClick:Je[7]||(Je[7]=ke=>{d.value="",f.value="",m.value=!1,p.value=!1,h.value=!1}),"prepend-icon":"mdi-filter-remove"},{default:u(()=>[...Je[33]||(Je[33]=[M(" Clear All Filters ",-1)])]),_:1})])]),_:1})]),_:1})):ge("",!0)],64)):ge("",!0),(U(!0),me(We,null,qt(te.value,ke=>(U(),pe(zn,{key:ke?.id||Math.random(),options:{threshold:.1,rootMargin:"50px"}},{default:u(()=>[ke?(U(),pe(Ft,{key:0,style:{textAlign:"left"},density:"compact",class:"mb-1 mx-2 card-enhanced card-status-default",rounded:"lg"},{default:u(()=>[l(wt,{class:"pb-0 pt-2"},{default:u(()=>[v("div",JQe,[v("div",ZQe,[v("div",e7e,[v("span",t7e,K(ke.productName||"Unknown Medicine"),1),l(Bn,{permission:"pharmacy.inventory.manage"},{default:u(()=>[l(dn,{text:"Edit Medicine"},{activator:u(({props:Ve})=>[l(_t,Ue({size:"x-small"},{ref_for:!0},Ve,{class:"edit-icon flex-shrink-0 ml-1",onClick:ze=>ye(ke),tabindex:"-1"}),{default:u(()=>[...Je[35]||(Je[35]=[M(" mdi-pencil ",-1)])]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024),l(Bn,{permission:"pharmacy.inventory.manage"},{default:u(()=>[l(dn,{text:"Remove Medicine from Pharmacy"},{activator:u(({props:Ve})=>[l(_t,Ue({size:"x-small"},{ref_for:!0},Ve,{class:"edit-icon flex-shrink-0 ml-1",onClick:ze=>Ce(ke),tabindex:"-1",color:"error"}),{default:u(()=>[...Je[36]||(Je[36]=[M(" mdi-delete-outline ",-1)])]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024)]),v("div",n7e,[ke.group&&ke.group.trim()!==""?(U(),pe(Bt,{key:0,color:"info",size:"small",variant:"tonal",class:"mr-1 mb-1"},{default:u(()=>[M(K(ke.group),1)]),_:2},1024)):ge("",!0),l(Bt,{color:Ae(ke.availableUnits),size:"small",variant:"tonal",class:"mr-1 mb-1"},{default:u(()=>[l(_t,{size:"small",class:"mr-1"},{default:u(()=>[...Je[37]||(Je[37]=[M("mdi-package-variant",-1)])]),_:1}),M(" "+K(ke.availableUnits||0)+" units ",1)]),_:2},1032,["color"]),ke.lowStock?(U(),pe(Bt,{key:1,color:"warning",size:"small",variant:"tonal",class:"mr-1 mb-1"},{default:u(()=>[l(_t,{size:"small",class:"mr-1"},{default:u(()=>[...Je[38]||(Je[38]=[M("mdi-alert",-1)])]),_:1}),Je[39]||(Je[39]=M(" Low Stock ",-1))]),_:1})):ge("",!0),!ke.hsnCode||ke.hsnCode.trim()===""?(U(),pe(Bt,{key:2,color:"warning",size:"small",variant:"tonal",class:"mr-1 mb-1"},{default:u(()=>[l(_t,{size:"small",class:"mr-1"},{default:u(()=>[...Je[40]||(Je[40]=[M("mdi-alert-circle",-1)])]),_:1}),Je[41]||(Je[41]=M(" HSN Missing ",-1))]),_:1})):ge("",!0)])]),v("div",a7e,[l(Bn,{permission:"pharmacy.inventory.manage"},{default:u(()=>[l(zt,{color:"primary",variant:"outlined","prepend-icon":"mdi-plus",size:"small",onClick:Ve=>Q(ke.id)},{default:u(()=>[...Je[42]||(Je[42]=[M(" Add Inventory ",-1)])]),_:1},8,["onClick"])]),_:2},1024)])])]),_:2},1024),ke.batches&&ke.batches.length>0?(U(),pe(gn,{key:0})):ge("",!0),l(ut,{class:ct({"pt-1 pb-1":ke.batches&&ke.batches.length>0,"pa-0":!ke.batches||ke.batches.length===0})},{default:u(()=>[ke.batches&&ke.batches.length>0?(U(),me("div",r7e,[l(Wn,{density:"compact",class:"batch-table compact-table"},{default:u(()=>[Je[43]||(Je[43]=v("thead",null,[v("tr",null,[v("th",{class:"text-left"},"Batch #"),v("th",{class:"text-left"},"Expiry"),v("th",{class:"text-left"},"InwardBillID"),v("th",{class:"text-left"},"Location"),v("th",{class:"text-right"},"MRP/pack"),v("th",{class:"text-right"},"Cost/pack"),v("th",{class:"text-right"},"Discount %"),v("th",{class:"text-right"},"Available Quantity"),v("th",{class:"text-center"},"Actions")])],-1)),v("tbody",null,[(U(!0),me(We,null,qt(ke.batches,Ve=>(U(),me("tr",{key:Ve.id,class:ct({"batch-expired":j(Ve.expiryDate)})},[v("td",null,K(Ve.batchNumber),1),v("td",null,[v("span",{class:ct({"text-error":j(Ve.expiryDate)})},K(ne(Ve.expiryDate)),3)]),v("td",null,K(Ve.inwardBillId||Ve.purchaseInvoiceIdentifier||"-"),1),v("td",null,K(Ve.location||"-"),1),v("td",s7e,K(Y(Ve.mrp)),1),v("td",o7e,K(Y(Ve.cost)),1),v("td",i7e,K(Ve.discountPercentage||0)+"%",1),v("td",l7e,[l(Bt,{color:Ve.availableUnits>0?"success":"error",size:"small",variant:"tonal"},{default:u(()=>[M(K(Ve.availableUnits||0),1)]),_:2},1032,["color"])]),v("td",u7e,[l(Bn,{permission:"pharmacy.inventory.manage",tag:"span"},{default:u(()=>[l(dn,{text:"Edit Purchased Inventory"},{activator:u(({props:ze})=>[l(zt,Ue({icon:"mdi-pencil",size:"small",variant:"text",onClick:je=>ee(Ve.id),class:"mr-1"},{ref_for:!0},ze),null,16,["onClick"])]),_:2},1024)]),_:2},1024),l(Bn,{permission:"pharmacy.inventory.manage",tag:"span"},{default:u(()=>[l(dn,{text:"Manage Inventory"},{activator:u(({props:ze})=>[l(zt,Ue({icon:"mdi-swap-horizontal",size:"small",variant:"text",onClick:je=>z(Ve.id)},{ref_for:!0},ze,{class:"mr-1"}),null,16,["onClick"])]),_:2},1024)]),_:2},1024),l(Bn,{permission:"pharmacy.inventory.manage",tag:"span"},{default:u(()=>[l(dn,{text:Le(Ve)},{activator:u(({props:ze})=>[l(zt,Ue({icon:"mdi-delete-outline",size:"small",variant:"text",onClick:je=>Kt(Ve.id),disabled:lt(Ve.id)||Re(Ve)||nt(Ve.id),loading:nt(Ve.id),color:"error"},{ref_for:!0},ze),null,16,["onClick","disabled","loading"])]),_:2},1032,["text"])]),_:2},1024)])],2))),128))])]),_:2},1024)])):(U(),me("div",c7e,' No inventory available. Click on "Add Inventory" to add inventory. '))]),_:2},1032,["class"])]),_:2},1024)):ge("",!0)]),_:2},1024))),128))],64)):ge("",!0)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(Qe,{modelValue:y.value,"onUpdate:modelValue":Je[9]||(Je[9]=ke=>y.value=ke),persistent:"","max-width":"700px"},{default:u(()=>[y.value?(U(),pe(lQe,{key:0,onClose:le,onMedicineAdded:re})):ge("",!0)]),_:1},8,["modelValue"]),l(Qe,{modelValue:g.value,"onUpdate:modelValue":Je[10]||(Je[10]=ke=>g.value=ke),persistent:"","max-width":"800px"},{default:u(()=>[g.value?(U(),pe(wQe,{key:0,"medicine-id":k.value,"medicine-info":S.value,onClose:de,onBatchCreated:G},null,8,["medicine-id","medicine-info"])):ge("",!0)]),_:1},8,["modelValue"]),l(Qe,{modelValue:w.value,"onUpdate:modelValue":Je[11]||(Je[11]=ke=>w.value=ke),persistent:"","max-width":"600px"},{default:u(()=>[w.value&&C.value?(U(),pe(NQe,{key:0,"batch-id":C.value.id,batch:C.value,onClose:Z,onInventoryAdded:ce},null,8,["batch-id","batch"])):ge("",!0)]),_:1},8,["modelValue"]),l(Qe,{modelValue:b.value,"onUpdate:modelValue":Je[12]||(Je[12]=ke=>b.value=ke),persistent:"","max-width":"40%"},{default:u(()=>[b.value?(U(),pe(xT,{key:0,mode:"pharmacy",onClose:Se,onMedicineCreated:Pe})):ge("",!0)]),_:1},8,["modelValue"]),l(Qe,{modelValue:x.value,"onUpdate:modelValue":Je[13]||(Je[13]=ke=>x.value=ke),persistent:"","max-width":"40%"},{default:u(()=>[x.value&&E.value?(U(),pe(FH,{key:0,medicine:E.value,mode:"pharmacy",onClose:_e,"onUpdate:medicine":De},null,8,["medicine"])):ge("",!0)]),_:1},8,["modelValue"]),l(Qe,{modelValue:T.value,"onUpdate:modelValue":Je[14]||(Je[14]=ke=>T.value=ke),persistent:"","max-width":"800px"},{default:u(()=>[T.value&&C.value?(U(),pe(FQe,{key:0,"batch-id":C.value.id,batch:C.value,onClose:xe,onBatchUpdated:Te},null,8,["batch-id","batch"])):ge("",!0)]),_:1},8,["modelValue"]),l(Qe,{modelValue:F.value,"onUpdate:modelValue":Je[15]||(Je[15]=ke=>F.value=ke),persistent:"","max-width":"30%"},{default:u(()=>[F.value&&D.value?(U(),pe(MQe,{key:0,medicine:D.value,onClose:Me,onMedicineRemoved:et},null,8,["medicine"])):ge("",!0)]),_:1},8,["modelValue"]),l(Qe,{modelValue:H.value,"onUpdate:modelValue":Je[17]||(Je[17]=ke=>H.value=ke),persistent:"","max-width":"500px"},{default:u(()=>[l(Ft,{rounded:"lg",flat:"",color:"surfaceContainer"},{default:u(()=>[l(Ze,{"no-gutters":""},{default:u(()=>[l(Hn,{cols:"12"},{default:u(()=>[l(Ft,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(Ze,{"no-gutters":""},{default:u(()=>[l(Hn,{cols:"11"},{default:u(()=>[l(wt,{class:"pa-0 pl-2"},{default:u(()=>[...Je[44]||(Je[44]=[M("Delete Inventory Batch",-1)])]),_:1})]),_:1}),l(Hn,{cols:"1",class:"d-flex justify-end"},{default:u(()=>[l(zt,{icon:"",size:"x-small",onClick:$t,disabled:nt(ie.value?.id)},{default:u(()=>[l(_t,null,{default:u(()=>[...Je[45]||(Je[45]=[M("mdi-close",-1)])]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(Ze,{"no-gutters":""},{default:u(()=>[l(Hn,{cols:"12"},{default:u(()=>[l(Ft,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(Ze,{"no-gutters":""},{default:u(()=>[l(Hn,{cols:"12"},{default:u(()=>[l(ut,{class:"text-left"},{default:u(()=>[Je[51]||(Je[51]=M(" Are you sure you want to delete this inventory batch? ",-1)),Je[52]||(Je[52]=v("span",{class:"text-error font-weight-bold"}," This action cannot be undone. The batch and all associated inventory data will be permanently deleted. ",-1)),Je[53]||(Je[53]=v("br",null,null,-1)),Je[54]||(Je[54]=v("br",null,null,-1)),ie.value?(U(),me("span",d7e,[Je[46]||(Je[46]=v("strong",null,"Batch #:",-1)),M(" "+K(ie.value.batchNumber),1),Je[47]||(Je[47]=v("br",null,null,-1)),Je[48]||(Je[48]=v("strong",null,"Expiry:",-1)),M(" "+K(ne(ie.value.expiryDate)),1),Je[49]||(Je[49]=v("br",null,null,-1)),Je[50]||(Je[50]=v("strong",null,"Available Units:",-1)),M(" "+K(ie.value.availableUnits||0),1)])):ge("",!0)]),_:1})]),_:1})]),_:1}),l(gn),l(Ze,{"no-gutters":""},{default:u(()=>[l(Hn,{cols:"12",class:"pa-3 d-flex justify-end"},{default:u(()=>[l(zt,{variant:"outlined",color:"error",onClick:Je[16]||(Je[16]=ke=>bt(ie.value?.id)),loading:nt(ie.value?.id),disabled:!ie.value||nt(ie.value?.id),class:"mr-2"},{default:u(()=>[...Je[55]||(Je[55]=[M(" Delete ",-1)])]),_:1},8,["loading","disabled"]),l(zt,{variant:"flat",color:"primary",onClick:$t,disabled:nt(ie.value?.id)},{default:u(()=>[...Je[56]||(Je[56]=[M(" Cancel ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},f7e=Xt(A7e,[["__scopeId","data-v-c2fcfcf4"]]),m7e={__name:"pharmacy-supplier-form",props:{supplier:{type:Object,default:null}},emits:["close","saved"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ra(),o=V(!0),i=V(!1),c=V(!1),A=V(null),d=V({identifier:"",supplierName:"",gstin:"",address:"",contactNumber:""});Ke(()=>n.supplier,h=>{h&&(d.value={...h})},{immediate:!0});const f=()=>{o.value=!1,a("close")},m=async()=>{if(!A.value)return;const{valid:h}=await A.value.validate();if(h){c.value=!0;try{const{data:p,error:y}=await Dce(d.value);if(y)throw y;r("Supplier created successfully"),a("saved"),f()}catch(p){console.error("Error creating supplier:",p),s(p.response?.data?.error||p.message||"Failed to create supplier")}finally{c.value=!1}}};return(h,p)=>{const y=I("v-icon"),g=I("v-btn"),w=I("v-card-title"),b=I("v-divider"),x=I("v-text-field"),T=I("v-textarea"),F=I("v-form"),k=I("v-card-text"),S=I("v-spacer"),E=I("v-card-actions"),C=I("v-card"),D=I("v-dialog");return U(),pe(D,{modelValue:o.value,"onUpdate:modelValue":p[6]||(p[6]=P=>o.value=P),persistent:"","max-width":"600px"},{default:u(()=>[l(C,{rounded:"lg"},{default:u(()=>[l(w,{class:"d-flex align-center justify-space-between"},{default:u(()=>[p[8]||(p[8]=v("span",null,"Add Supplier",-1)),l(g,{onClick:f,variant:"text",size:"small"},{default:u(()=>[l(y,null,{default:u(()=>[...p[7]||(p[7]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(b),l(k,{class:"py-2"},{default:u(()=>[l(F,{ref_key:"form",ref:A,modelValue:i.value,"onUpdate:modelValue":p[5]||(p[5]=P=>i.value=P)},{default:u(()=>[l(x,{modelValue:d.value.identifier,"onUpdate:modelValue":p[0]||(p[0]=P=>d.value.identifier=P),label:"Identifier",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-identifier",class:"mb-1"},null,8,["modelValue"]),l(x,{modelValue:d.value.supplierName,"onUpdate:modelValue":p[1]||(p[1]=P=>d.value.supplierName=P),label:"Supplier Name *",variant:"outlined",density:"compact",rules:[P=>!!P||"Supplier name is required"],"prepend-inner-icon":"mdi-account",class:"mb-1"},null,8,["modelValue","rules"]),l(x,{modelValue:d.value.gstin,"onUpdate:modelValue":p[2]||(p[2]=P=>d.value.gstin=P),label:"GSTIN *",variant:"outlined",density:"compact",rules:[P=>!!P||"GSTIN is required"],"prepend-inner-icon":"mdi-card-account-details",class:"mb-1"},null,8,["modelValue","rules"]),l(T,{modelValue:d.value.address,"onUpdate:modelValue":p[3]||(p[3]=P=>d.value.address=P),label:"Address",variant:"outlined",density:"compact",rows:"2","prepend-inner-icon":"mdi-map-marker",class:"mb-1"},null,8,["modelValue"]),l(x,{modelValue:d.value.contactNumber,"onUpdate:modelValue":p[4]||(p[4]=P=>d.value.contactNumber=P),label:"Contact Number",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-phone"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),l(b),l(E,{class:"pa-3"},{default:u(()=>[l(S),l(g,{onClick:f},{default:u(()=>[...p[9]||(p[9]=[M("Cancel",-1)])]),_:1}),l(g,{color:"primary",onClick:m,disabled:!i.value||c.value,loading:c.value},{default:u(()=>[...p[10]||(p[10]=[M(" Save ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},v7e={__name:"pharmacy-edit-supplier",props:{supplier:{type:Object,required:!0}},emits:["close","saved"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ra(),o=V(!0),i=V(!1),c=V(!1),A=V(null),d=V({identifier:"",supplierName:"",gstin:"",address:"",contactNumber:""});Ke(()=>n.supplier,h=>{h&&(d.value={identifier:h.identifier||"",supplierName:h.supplierName||"",gstin:h.gstin||"",address:h.address||"",contactNumber:h.contactNumber||""})},{immediate:!0});const f=()=>{o.value=!1,a("close")},m=async()=>{if(!A.value)return;const{valid:h}=await A.value.validate();if(h){c.value=!0;try{const{data:p,error:y}=await Uce(n.supplier.id,d.value);if(y)throw y;r("Supplier updated successfully"),a("saved"),f()}catch(p){console.error("Error updating supplier:",p),s(p.response?.data?.error||p.message||"Failed to update supplier")}finally{c.value=!1}}};return(h,p)=>{const y=I("v-icon"),g=I("v-btn"),w=I("v-card-title"),b=I("v-divider"),x=I("v-text-field"),T=I("v-textarea"),F=I("v-form"),k=I("v-card-text"),S=I("v-spacer"),E=I("v-card-actions"),C=I("v-card"),D=I("v-dialog");return U(),pe(D,{modelValue:o.value,"onUpdate:modelValue":p[6]||(p[6]=P=>o.value=P),persistent:"","max-width":"600px"},{default:u(()=>[l(C,{rounded:"lg"},{default:u(()=>[l(w,{class:"d-flex align-center justify-space-between"},{default:u(()=>[p[8]||(p[8]=v("span",null,"Edit Supplier",-1)),l(g,{onClick:f,variant:"text",size:"small"},{default:u(()=>[l(y,null,{default:u(()=>[...p[7]||(p[7]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(b),l(k,{class:"py-2"},{default:u(()=>[l(F,{ref_key:"form",ref:A,modelValue:i.value,"onUpdate:modelValue":p[5]||(p[5]=P=>i.value=P)},{default:u(()=>[l(x,{modelValue:d.value.identifier,"onUpdate:modelValue":p[0]||(p[0]=P=>d.value.identifier=P),label:"Identifier",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-identifier",class:"mb-1"},null,8,["modelValue"]),l(x,{modelValue:d.value.supplierName,"onUpdate:modelValue":p[1]||(p[1]=P=>d.value.supplierName=P),label:"Supplier Name *",variant:"outlined",density:"compact",rules:[P=>!!P||"Supplier name is required"],"prepend-inner-icon":"mdi-account",class:"mb-1"},null,8,["modelValue","rules"]),l(x,{modelValue:d.value.gstin,"onUpdate:modelValue":p[2]||(p[2]=P=>d.value.gstin=P),label:"GSTIN *",variant:"outlined",density:"compact",rules:[P=>!!P||"GSTIN is required"],"prepend-inner-icon":"mdi-card-account-details",class:"mb-1"},null,8,["modelValue","rules"]),l(T,{modelValue:d.value.address,"onUpdate:modelValue":p[3]||(p[3]=P=>d.value.address=P),label:"Address",variant:"outlined",density:"compact",rows:"2","prepend-inner-icon":"mdi-map-marker",class:"mb-1"},null,8,["modelValue"]),l(x,{modelValue:d.value.contactNumber,"onUpdate:modelValue":p[4]||(p[4]=P=>d.value.contactNumber=P),label:"Contact Number",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-phone"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),l(b),l(E,{class:"pa-3"},{default:u(()=>[l(S),l(g,{onClick:f},{default:u(()=>[...p[9]||(p[9]=[M("Cancel",-1)])]),_:1}),l(g,{color:"primary",onClick:m,disabled:!i.value||c.value,loading:c.value},{default:u(()=>[...p[10]||(p[10]=[M(" Update ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},h7e={__name:"pharmacy-purchase-invoice-form",props:{supplierId:{type:Number,default:null}},emits:["close","saved"],setup(e,{emit:t}){const n=Rn(),a=e,r=t,{showSuccess:s,showError:o}=ra(),i=ae(()=>n.getters["pharmacyModule/currentPharmacyId"]),c=V(!0),A=V(!1),d=V(!1),f=V(null),m=V([]),h=V({supplierId:null,pharmacyPurchaseInvoiceDate:"",pharmacyPurchaseInvoiceIdentifier:"",status:1,additionalDiscount:0,paymentDueDate:"",paymentDate:""}),p=[{label:"Draft",value:1},{label:"Finalized",value:2}];Ke(()=>a.supplierId,w=>{w&&(h.value.supplierId=w)},{immediate:!0}),un(async()=>{const{data:w}=await pM();m.value=w||[]});const y=()=>{c.value=!1,r("close")},g=async()=>{if(!f.value)return;const{valid:w}=await f.value.validate();if(w){if(!i.value){o("Please select a pharmacy first");return}d.value=!0;try{const b={...h.value,pharmacyId:i.value},{data:x,error:T}=await bce(b);if(T)throw T;s("Purchase invoice created successfully"),r("saved"),y()}catch(b){console.error("Error creating purchase invoice:",b),o(b.response?.data?.error||b.message||"Failed to create purchase invoice")}finally{d.value=!1}}};return(w,b)=>{const x=I("v-icon"),T=I("v-btn"),F=I("v-card-title"),k=I("v-divider"),S=I("v-select"),E=I("v-col"),C=I("v-text-field"),D=I("v-row"),P=I("v-form"),O=I("v-card-text"),H=I("v-spacer"),ie=I("v-card-actions"),Ae=I("v-card"),j=I("v-dialog");return U(),pe(j,{modelValue:c.value,"onUpdate:modelValue":b[8]||(b[8]=J=>c.value=J),persistent:"","max-width":"700px"},{default:u(()=>[l(Ae,{rounded:"lg"},{default:u(()=>[l(F,{class:"d-flex align-center justify-space-between"},{default:u(()=>[b[10]||(b[10]=v("span",null,"Create Purchase Invoice",-1)),l(T,{onClick:y,variant:"text",size:"small"},{default:u(()=>[l(x,null,{default:u(()=>[...b[9]||(b[9]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(k),l(O,{class:"py-1"},{default:u(()=>[l(P,{ref_key:"form",ref:f,modelValue:A.value,"onUpdate:modelValue":b[7]||(b[7]=J=>A.value=J)},{default:u(()=>[l(D,{dense:""},{default:u(()=>[l(E,{cols:"12"},{default:u(()=>[l(S,{modelValue:h.value.supplierId,"onUpdate:modelValue":b[0]||(b[0]=J=>h.value.supplierId=J),items:m.value,"item-title":"supplierName","item-value":"id",label:"Supplier *",variant:"outlined",density:"compact",rules:[J=>!!J||"Supplier is required"],"prepend-inner-icon":"mdi-account",disabled:!!e.supplierId},null,8,["modelValue","items","rules","disabled"])]),_:1}),l(E,{cols:"12",md:"6"},{default:u(()=>[l(C,{modelValue:h.value.pharmacyPurchaseInvoiceDate,"onUpdate:modelValue":b[1]||(b[1]=J=>h.value.pharmacyPurchaseInvoiceDate=J),type:"date",label:"Invoice Date *",variant:"outlined",density:"compact",rules:[J=>!!J||"Invoice date is required"],"prepend-inner-icon":"mdi-calendar"},null,8,["modelValue","rules"])]),_:1}),l(E,{cols:"12",md:"6"},{default:u(()=>[l(C,{modelValue:h.value.pharmacyPurchaseInvoiceIdentifier,"onUpdate:modelValue":b[2]||(b[2]=J=>h.value.pharmacyPurchaseInvoiceIdentifier=J),label:"Invoice Identifier *",variant:"outlined",density:"compact",rules:[J=>!!J||"Invoice identifier is required"],"prepend-inner-icon":"mdi-file-document"},null,8,["modelValue","rules"])]),_:1}),l(E,{cols:"12",md:"6"},{default:u(()=>[l(S,{modelValue:h.value.status,"onUpdate:modelValue":b[3]||(b[3]=J=>h.value.status=J),items:p,"item-title":"label","item-value":"value",label:"Status",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-check-circle"},null,8,["modelValue"])]),_:1}),l(E,{cols:"12",md:"6"},{default:u(()=>[l(C,{modelValue:h.value.additionalDiscount,"onUpdate:modelValue":b[4]||(b[4]=J=>h.value.additionalDiscount=J),modelModifiers:{number:!0},label:"Additional Discount ()",variant:"outlined",density:"compact",type:"number",rules:[J=>J==null||J>=0||"Additional discount cannot be negative"],"prepend-inner-icon":"mdi-currency-inr"},null,8,["modelValue","rules"])]),_:1}),l(E,{cols:"12",md:"6"},{default:u(()=>[l(C,{modelValue:h.value.paymentDueDate,"onUpdate:modelValue":b[5]||(b[5]=J=>h.value.paymentDueDate=J),type:"date",label:"Payment Due Date",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-calendar-clock"},null,8,["modelValue"])]),_:1}),l(E,{cols:"12",md:"6"},{default:u(()=>[l(C,{modelValue:h.value.paymentDate,"onUpdate:modelValue":b[6]||(b[6]=J=>h.value.paymentDate=J),type:"date",label:"Payment Date",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-calendar-check"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(k),l(ie,{class:"pa-3"},{default:u(()=>[l(H),l(T,{onClick:y},{default:u(()=>[...b[11]||(b[11]=[M("Cancel",-1)])]),_:1}),l(T,{color:"primary",onClick:g,disabled:!A.value||d.value,loading:d.value},{default:u(()=>[...b[12]||(b[12]=[M(" Create Invoice ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},p7e={class:"text-center py-4"},g7e={__name:"pharmacy-edit-purchase-invoice",props:{invoiceId:{type:Number,required:!0}},emits:["close","saved"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ra(),o=V(!0),i=V(!1),c=V(!1),A=V(!1),d=V(null),f=V({status:1,additionalDiscount:0,paymentDueDate:"",paymentDate:""}),m=[{label:"Draft",value:1},{label:"Finalized",value:2}],h=async()=>{A.value=!0;try{const{data:w,error:b}=await Cg(n.invoiceId);if(b)throw b;f.value={status:w.status||1,additionalDiscount:w.additionalDiscount||0,paymentDueDate:w.paymentDueDate?p(w.paymentDueDate):"",paymentDate:w.paymentDate?p(w.paymentDate):""}}catch(w){console.error("Error loading invoice:",w),s(w.response?.data?.error||w.message||"Failed to load invoice")}finally{A.value=!1}};un(()=>{h()});const p=w=>w?new Date(w*1e3).toISOString().split("T")[0]:"",y=()=>{o.value=!1,a("close")},g=async()=>{if(!d.value)return;const{valid:w}=await d.value.validate();if(w){c.value=!0;try{const{data:b,error:x}=await Ice(n.invoiceId,f.value);if(x)throw x;r("Purchase invoice updated successfully"),a("saved"),y()}catch(b){console.error("Error updating purchase invoice:",b),s(b.response?.data?.error||b.message||"Failed to update purchase invoice")}finally{c.value=!1}}};return(w,b)=>{const x=I("v-icon"),T=I("v-btn"),F=I("v-card-title"),k=I("v-divider"),S=I("v-progress-circular"),E=I("v-card-text"),C=I("v-select"),D=I("v-text-field"),P=I("v-form"),O=I("v-spacer"),H=I("v-card-actions"),ie=I("v-card"),Ae=I("v-dialog");return U(),pe(Ae,{modelValue:o.value,"onUpdate:modelValue":b[5]||(b[5]=j=>o.value=j),persistent:"","max-width":"600px"},{default:u(()=>[l(ie,{rounded:"lg"},{default:u(()=>[l(F,{class:"d-flex align-center justify-space-between"},{default:u(()=>[b[7]||(b[7]=v("span",null,"Edit Purchase Invoice",-1)),l(T,{onClick:y,variant:"text",size:"small"},{default:u(()=>[l(x,null,{default:u(()=>[...b[6]||(b[6]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(k),A.value?(U(),pe(E,{key:0,class:"py-2"},{default:u(()=>[v("div",p7e,[l(S,{indeterminate:"",color:"primary"})])]),_:1})):(U(),pe(E,{key:1,class:"py-2"},{default:u(()=>[l(P,{ref_key:"form",ref:d,modelValue:i.value,"onUpdate:modelValue":b[4]||(b[4]=j=>i.value=j)},{default:u(()=>[l(C,{modelValue:f.value.status,"onUpdate:modelValue":b[0]||(b[0]=j=>f.value.status=j),items:m,"item-title":"label","item-value":"value",label:"Status",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-check-circle",class:"mb-1"},null,8,["modelValue"]),l(D,{modelValue:f.value.additionalDiscount,"onUpdate:modelValue":b[1]||(b[1]=j=>f.value.additionalDiscount=j),modelModifiers:{number:!0},label:"Additional Discount ()",variant:"outlined",density:"compact",type:"number",rules:[j=>j==null||j>=0||"Additional discount cannot be negative"],"prepend-inner-icon":"mdi-currency-inr",class:"mb-1"},null,8,["modelValue","rules"]),l(D,{modelValue:f.value.paymentDueDate,"onUpdate:modelValue":b[2]||(b[2]=j=>f.value.paymentDueDate=j),type:"date",label:"Payment Due Date",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-calendar-clock",class:"mb-1"},null,8,["modelValue"]),l(D,{modelValue:f.value.paymentDate,"onUpdate:modelValue":b[3]||(b[3]=j=>f.value.paymentDate=j),type:"date",label:"Payment Date",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-calendar-check"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})),l(k),l(H,{class:"pa-3"},{default:u(()=>[l(O),l(T,{onClick:y},{default:u(()=>[...b[8]||(b[8]=[M("Cancel",-1)])]),_:1}),l(T,{color:"primary",onClick:g,disabled:!i.value||c.value,loading:c.value},{default:u(()=>[...b[9]||(b[9]=[M(" Update ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},y7e={class:"text-center py-4"},_7e={class:"text-body-2 mb-0.5"},w7e={class:"text-body-2 mb-0.5"},b7e={class:"text-body-2 mb-0.5"},x7e={class:"text-body-2 mb-0.5"},C7e={class:"text-body-2 mb-0.5"},S7e={key:0,class:"text-body-2 mb-0.5"},E7e={key:0,class:"text-body-2 mb-0.5"},B7e={key:1,class:"text-body-2 mb-0.5"},k7e={key:2,class:"text-body-2 mb-0.5"},T7e={class:"text-right"},I7e={class:"text-right"},F7e={class:"text-right"},P7e={class:"text-right"},D7e={class:"text-right"},U7e={class:"text-right"},R7e={class:"text-center"},N7e={key:1,class:"text-body-2 text-medium-emphasis py-2 text-center"},V7e={key:0,class:"text-body-2 mb-1"},L7e={class:"text-body-2 mb-1"},M7e={class:"text-body-2 mb-1"},O7e={class:"text-body-2 mb-1"},H7e={key:0,class:"text-body-2 mb-1"},$7e={class:"text-subtitle-1 font-weight-bold"},Q7e={class:"text-body-2 text-medium-emphasis mt-2"},G7e={__name:"pharmacy-purchase-invoice-view",props:{invoiceId:{type:Number,required:!0}},emits:["close","updated","add-batch"],setup(e,{emit:t}){const n=e,a=t,{showSuccess:r,showError:s}=ra(),o=V(!0),i=V(!1),c=V(null),A=V(!1),d=async()=>{i.value=!0;try{const{data:b,error:x}=await Cg(n.invoiceId);if(x)throw x;c.value=b}catch(b){console.error("Error loading invoice:",b),s(b.response?.data?.error||b.message||"Failed to load invoice")}finally{i.value=!1}};Ke(()=>n.invoiceId,()=>{d()},{immediate:!0});const f=()=>{o.value=!1,a("close")},m=()=>{a("add-batch",n.invoiceId)},h=()=>{A.value=!0},p=()=>{A.value=!1,d(),a("updated")},y=async b=>{if(confirm("Are you sure you want to remove this batch? This will delete the batch entirely."))try{const{error:x}=await Fce(n.invoiceId,b);if(x)throw x;r("Batch removed successfully"),d(),a("updated")}catch(x){console.error("Error removing batch:",x),s(x.response?.data?.error||x.message||"Failed to remove batch")}},g=b=>b?new Date(b*1e3).toLocaleDateString():"-",w=b=>b==null?"0.00":`${b.toFixed(2)}`;return(b,x)=>{const T=I("v-icon"),F=I("v-btn"),k=I("v-card-title"),S=I("v-divider"),E=I("v-progress-circular"),C=I("v-card-text"),D=I("v-chip"),P=I("v-col"),O=I("v-row"),H=I("v-table"),ie=I("v-spacer"),Ae=I("v-card-actions"),j=I("v-card"),J=I("v-dialog");return U(),me(We,null,[l(J,{modelValue:o.value,"onUpdate:modelValue":x[0]||(x[0]=ue=>o.value=ue),persistent:"","max-width":"90%",scrollable:""},{default:u(()=>[l(j,{rounded:"lg"},{default:u(()=>[l(k,{class:"d-flex align-center justify-space-between"},{default:u(()=>[x[3]||(x[3]=v("span",null,"Purchase Invoice Details",-1)),l(F,{onClick:f,variant:"text",size:"small"},{default:u(()=>[l(T,null,{default:u(()=>[...x[2]||(x[2]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(S),i.value?(U(),pe(C,{key:0,class:"py-2"},{default:u(()=>[v("div",y7e,[l(E,{indeterminate:"",color:"primary"})])]),_:1})):c.value?(U(),pe(C,{key:1,class:"py-2"},{default:u(()=>[l(O,{dense:"",class:"mb-2"},{default:u(()=>[l(P,{cols:"12",md:"4"},{default:u(()=>[x[7]||(x[7]=v("div",{class:"text-subtitle-2 mb-1"},"Invoice Information",-1)),v("div",_7e,[x[4]||(x[4]=v("strong",null,"Date:",-1)),M(" "+K(g(c.value.pharmacyPurchaseInvoiceDate)),1)]),v("div",w7e,[x[5]||(x[5]=v("strong",null,"Identifier:",-1)),M(" "+K(c.value.pharmacyPurchaseInvoiceIdentifier),1)]),v("div",b7e,[x[6]||(x[6]=v("strong",null,"Status:",-1)),l(D,{color:c.value.status===2?"success":"warning",size:"small",variant:"tonal",class:"ml-2"},{default:u(()=>[M(K(c.value.statusLabel||"Draft"),1)]),_:1},8,["color"])])]),_:1}),l(P,{cols:"12",md:"4"},{default:u(()=>[x[11]||(x[11]=v("div",{class:"text-subtitle-2 mb-1"},"Supplier Information",-1)),v("div",x7e,[x[8]||(x[8]=v("strong",null,"Name:",-1)),M(" "+K(c.value.supplier?.supplierName||"-"),1)]),v("div",C7e,[x[9]||(x[9]=v("strong",null,"GSTIN:",-1)),M(" "+K(c.value.supplier?.gstin||"-"),1)]),c.value.supplier?.address?(U(),me("div",S7e,[x[10]||(x[10]=v("strong",null,"Address:",-1)),M(" "+K(c.value.supplier.address),1)])):ge("",!0)]),_:1}),l(P,{cols:"12",md:"4"},{default:u(()=>[x[15]||(x[15]=v("div",{class:"text-subtitle-2 mb-1"},"Payment Information",-1)),c.value.paymentDueDate?(U(),me("div",E7e,[x[12]||(x[12]=v("strong",null,"Due Date:",-1)),M(" "+K(g(c.value.paymentDueDate)),1)])):ge("",!0),c.value.paymentDate?(U(),me("div",B7e,[x[13]||(x[13]=v("strong",null,"Payment Date:",-1)),M(" "+K(g(c.value.paymentDate)),1)])):(U(),me("div",k7e,[...x[14]||(x[14]=[v("strong",null,"Payment Status:",-1),M(),v("span",{class:"text-warning"},"Unpaid",-1)])]))]),_:1})]),_:1}),l(S,{class:"my-2"}),x[23]||(x[23]=v("div",{class:"text-subtitle-2 mb-1"},"Medicine Batches",-1)),c.value.batches&&c.value.batches.length>0?(U(),pe(H,{key:0,density:"compact"},{default:u(()=>[x[16]||(x[16]=v("thead",null,[v("tr",null,[v("th",{class:"text-left"},"Medicine Name"),v("th",{class:"text-left"},"Batch Number"),v("th",{class:"text-left"},"Expiry Date"),v("th",{class:"text-left"},"Location"),v("th",{class:"text-right"},"MRP (per pack)"),v("th",{class:"text-right"},"Cost (per unit excl. GST)"),v("th",{class:"text-right"},"GST %"),v("th",{class:"text-right"},"Total Packs"),v("th",{class:"text-right"},"Total Units"),v("th",{class:"text-right"},"Total Cost"),v("th",{class:"text-center"},"Actions")])],-1)),v("tbody",null,[(U(!0),me(We,null,qt(c.value.batches,ue=>(U(),me("tr",{key:ue.id},[v("td",null,K(ue.medicine?.productName||"-"),1),v("td",null,K(ue.batchNumber),1),v("td",null,K(g(ue.expiryDate)),1),v("td",null,K(ue.location||"-"),1),v("td",T7e,K(w(ue.mrp)),1),v("td",I7e,K(w(ue.costPerUnitExclGst||0)),1),v("td",F7e,K(ue.gstPercentage||0)+"%",1),v("td",P7e,K(ue.totalPacks||0),1),v("td",D7e,K(ue.totalUnits||0),1),v("td",U7e,K(w(ue.totalCost||0)),1),v("td",R7e,[l(F,{size:"x-small",variant:"text",icon:"mdi-delete",color:"error",onClick:ne=>y(ue.id)},null,8,["onClick"])])]))),128))])]),_:1})):(U(),me("div",N7e," No batches added yet ")),l(S,{class:"mb-3 mt-2"}),c.value.totals?(U(),pe(O,{key:2,"no-gutters":""},{default:u(()=>[l(P,{cols:"8",class:"text-right"},{default:u(()=>[x[17]||(x[17]=v("div",{class:"text-body-2 mb-1"},"Base Cost Total:",-1)),x[18]||(x[18]=v("div",{class:"text-body-2 mb-1"},"GST:",-1)),x[19]||(x[19]=v("div",{class:"text-body-2 mb-1"},"Subtotal with GST:",-1)),c.value.totals.additionalDiscount>0?(U(),me("div",V7e,"Additional Discount:")):ge("",!0),x[20]||(x[20]=v("div",{class:"text-subtitle-1 font-weight-bold"},"Grand Total:",-1))]),_:1}),l(P,{cols:"4",class:"text-right"},{default:u(()=>[v("div",L7e,K(w(c.value.totals.subtotal)),1),v("div",M7e,K(w(c.value.totals.totalGST)),1),v("div",O7e,K(w(c.value.totals.subtotalWithGST)),1),c.value.totals.additionalDiscount>0?(U(),me("div",H7e,"-"+K(w(c.value.totals.additionalDiscount)),1)):ge("",!0),v("div",$7e,K(w(c.value.totals.netAmount)),1)]),_:1})]),_:1})):ge("",!0),v("div",Q7e,[x[21]||(x[21]=v("strong",null,"Medicine Count:",-1)),M(" "+K(c.value.medicineCount||0)+" | ",1),x[22]||(x[22]=v("strong",null,"Batch Count:",-1)),M(" "+K(c.value.batchCount||0),1)])]),_:1})):ge("",!0),l(S),l(Ae,{class:"pa-3"},{default:u(()=>[l(F,{color:"primary","prepend-icon":"mdi-plus",onClick:m},{default:u(()=>[...x[24]||(x[24]=[M(" Add Medicine Batch ",-1)])]),_:1}),l(ie),l(F,{color:"primary",variant:"outlined","prepend-icon":"mdi-pencil",onClick:h},{default:u(()=>[...x[25]||(x[25]=[M(" Edit Invoice ",-1)])]),_:1}),l(F,{onClick:f},{default:u(()=>[...x[26]||(x[26]=[M("Close",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),A.value?(U(),pe(g7e,{key:0,"invoice-id":e.invoiceId,onClose:x[1]||(x[1]=ue=>A.value=!1),onSaved:p},null,8,["invoice-id"])):ge("",!0)],64)}}},z7e={key:1},K7e={class:"text-caption text-medium-emphasis"},W7e={class:"font-weight-medium"},j7e={class:"text-caption text-medium-emphasis"},q7e={key:0,class:"mb-0.5"},Y7e={key:1,class:"mb-0.5"},X7e={key:2},J7e={__name:"pharmacy-add-medicine-batch",props:{purchaseInvoiceId:{type:Number,required:!0}},emits:["close","saved"],setup(e,{emit:t}){const n=Rn(),a=e,r=t,{showSuccess:s,showError:o}=ra(),i=ae(()=>n.getters["pharmacyModule/currentPharmacyId"]),c=V(!0),A=V(!1),d=V(!1),f=V(!1),m=V(null),h=V(null),p=V(null),y=V([]),g=V(""),w=V({batchNumber:"",expiryDate:"",packType:"",unitsPerPack:1,mrp:null,discountPercentage:0,saleQuantityPacks:0,freeQuantityPacks:0,cgstPercentage:0,sgstPercentage:0,location:""}),b=V("0.00"),x=ae(()=>Number(b.value??0)||0),T=()=>{b.value=(Number(b.value??0)||0).toFixed(2)},F=ae(()=>{const J=Number(w.value.cgstPercentage??0)||0,ue=Number(w.value.sgstPercentage??0)||0;return J+ue}),k=ae(()=>{const J=x.value||0,ue=Number(F.value??0)||0;return J*(1+ue/100)}),S=ae(()=>(Number(k.value??0)||0).toFixed(2)),E=ae(()=>{const J=w.value.saleQuantityPacks||0,ue=w.value.freeQuantityPacks||0;return J+ue}),C=ae(()=>E.value*(w.value.unitsPerPack||1)),D=ae(()=>{const J=w.value.saleQuantityPacks||0,ue=w.value.freeQuantityPacks||0,ne=x.value||0,Y=J+ue;return Y===0?null:ne*J/Y});un(async()=>{T(),await P(),await O()});const P=async()=>{if(!i.value){o("Please select a pharmacy first");return}f.value=!0;try{const{data:J,error:ue}=await ww(i.value);if(ue){console.error("Error loading pharmacy medicines:",ue),o("Failed to load pharmacy medicines");return}y.value=(J||[]).map(ne=>({id:ne.id,productName:ne.productName,marketer:ne.marketer,productForm:ne.productForm,group:ne.group,hsnCode:ne.hsnCode,displayName:ne.productName}))}catch(J){console.error("Error loading pharmacy medicines:",J),o("Failed to load pharmacy medicines")}finally{f.value=!1}},O=async()=>{try{const{data:J}=await Cg(a.purchaseInvoiceId);J&&(g.value=`${J.pharmacyPurchaseInvoiceIdentifier} (${ie(J.pharmacyPurchaseInvoiceDate)})`)}catch(J){console.error("Error loading invoice info:",J)}},H=J=>{p.value=y.value.find(ue=>ue.id===J)},ie=J=>J?new Date(J*1e3).toLocaleDateString():"-",Ae=()=>{c.value=!1,r("close")},j=async()=>{if(!m.value)return;const{valid:J}=await m.value.validate();if(J){if(!h.value){o("Please select a medicine");return}if(!i.value){o("Please select a pharmacy first");return}d.value=!0;try{const ue={medicineId:h.value,pharmacyId:i.value,purchaseInvoiceId:a.purchaseInvoiceId,...w.value,priceToRetailer:Number(k.value??0)||0},{data:ne,error:Y}=await vM(ue);if(Y)throw Y;s("Batch added successfully"),r("saved"),Ae()}catch(ue){console.error("Error creating batch:",ue),o(ue.response?.data?.error||ue.message||"Failed to create batch")}finally{d.value=!1}}};return(J,ue)=>{const ne=I("v-icon"),Y=I("v-btn"),te=I("v-card-title"),L=I("v-divider"),N=I("v-text-field"),q=I("v-list-item-title"),Q=I("v-list-item-subtitle"),ee=I("v-list-item"),z=I("v-autocomplete"),X=I("v-col"),le=I("v-select"),re=I("v-row"),de=I("v-form"),G=I("v-card-text"),Z=I("v-spacer"),ce=I("v-card-actions"),Se=I("v-card"),Pe=I("v-dialog");return U(),pe(Pe,{modelValue:c.value,"onUpdate:modelValue":ue[14]||(ue[14]=ye=>c.value=ye),persistent:"","max-width":"800px",scrollable:""},{default:u(()=>[l(Se,{rounded:"lg"},{default:u(()=>[l(te,{class:"d-flex align-center justify-space-between"},{default:u(()=>[ue[16]||(ue[16]=v("span",null,"Add Medicine Batch to Invoice",-1)),l(Y,{onClick:Ae,variant:"text",size:"small"},{default:u(()=>[l(ne,null,{default:u(()=>[...ue[15]||(ue[15]=[M("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),l(L),l(G,{class:"py-1"},{default:u(()=>[l(de,{ref_key:"form",ref:m,modelValue:A.value,"onUpdate:modelValue":ue[13]||(ue[13]=ye=>A.value=ye)},{default:u(()=>[e.purchaseInvoiceId?(U(),pe(N,{key:0,"model-value":g.value,label:"Purchase Invoice",variant:"outlined",density:"compact",readonly:"","prepend-inner-icon":"mdi-file-document",class:"mb-1"},null,8,["model-value"])):ge("",!0),l(z,{modelValue:h.value,"onUpdate:modelValue":[ue[0]||(ue[0]=ye=>h.value=ye),H],items:y.value,"item-value":"id","item-title":"productName",label:"Select Medicine *",variant:"outlined",density:"compact",rules:[ye=>!!ye||"Medicine selection is required"],"prepend-inner-icon":"mdi-pill",loading:f.value,class:"mb-1"},{selection:u(({item:ye})=>[M(K(ye.raw.productName),1)]),item:u(({props:ye,item:Ce})=>[l(ee,eu(nu({...ye,title:void 0})),{prepend:u(()=>[l(ne,null,{default:u(()=>[...ue[17]||(ue[17]=[M("mdi-pill",-1)])]),_:1})]),default:u(()=>[l(q,{class:"text-wrap"},{default:u(()=>[M(K(Ce.raw.productName),1)]),_:2},1024),l(Q,{class:"text-wrap"},{default:u(()=>[M(K([Ce.raw.marketer,Ce.raw.group,Ce.raw.productForm].filter(Boolean).join(" | ")||"No additional details"),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","items","rules","loading"]),h.value&&p.value?(U(),me("div",z7e,[l(L,{class:"my-1"}),ue[22]||(ue[22]=v("div",{class:"text-caption font-weight-medium mb-1"},"Batch Details",-1)),l(re,{dense:""},{default:u(()=>[l(X,{cols:"12",md:"6"},{default:u(()=>[l(N,{modelValue:w.value.batchNumber,"onUpdate:modelValue":ue[1]||(ue[1]=ye=>w.value.batchNumber=ye),label:"Batch Number *",variant:"outlined",density:"compact",rules:[ye=>!!ye||"Batch number is required"],"prepend-inner-icon":"mdi-barcode"},null,8,["modelValue","rules"])]),_:1}),l(X,{cols:"12",md:"6"},{default:u(()=>[l(N,{modelValue:w.value.expiryDate,"onUpdate:modelValue":ue[2]||(ue[2]=ye=>w.value.expiryDate=ye),type:"date",label:"Expiry Date *",variant:"outlined",density:"compact",rules:[ye=>!!ye||"Expiry date is required"],"prepend-inner-icon":"mdi-calendar"},null,8,["modelValue","rules"])]),_:1}),l(X,{cols:"12",md:"6"},{default:u(()=>[l(le,{modelValue:w.value.packType,"onUpdate:modelValue":ue[3]||(ue[3]=ye=>w.value.packType=ye),items:$e(Vw),label:"Pack Type *",variant:"outlined",density:"compact",rules:[ye=>!!ye||"Pack type is required"],"prepend-inner-icon":"mdi-package-variant"},null,8,["modelValue","items","rules"])]),_:1}),l(X,{cols:"12",md:"6"},{default:u(()=>[l(N,{modelValue:w.value.unitsPerPack,"onUpdate:modelValue":ue[4]||(ue[4]=ye=>w.value.unitsPerPack=ye),modelModifiers:{number:!0},label:"Units Per Pack *",variant:"outlined",density:"compact",type:"number",rules:[ye=>ye!=null&&ye>0||"Units per pack must be greater than 0"],"prepend-inner-icon":"mdi-numeric"},null,8,["modelValue","rules"])]),_:1}),l(X,{cols:"12",md:"6"},{default:u(()=>[l(N,{modelValue:w.value.mrp,"onUpdate:modelValue":ue[5]||(ue[5]=ye=>w.value.mrp=ye),modelModifiers:{number:!0},label:"MRP per Pack () *",variant:"outlined",density:"compact",type:"number",rules:[ye=>ye!=null&&ye>=0||"MRP must be a positive number"],"prepend-inner-icon":"mdi-currency-inr"},null,8,["modelValue","rules"])]),_:1}),l(X,{cols:"12",md:"6"},{default:u(()=>[l(N,{modelValue:w.value.discountPercentage,"onUpdate:modelValue":ue[6]||(ue[6]=ye=>w.value.discountPercentage=ye),modelModifiers:{number:!0},label:"Discount to Patients %",variant:"outlined",density:"compact",type:"number",rules:[ye=>ye==null||ye>=0&&ye<=100||"Discount must be between 0 and 100"],"prepend-inner-icon":"mdi-percent"},null,8,["modelValue","rules"])]),_:1}),l(X,{cols:"12",md:"6"},{default:u(()=>[l(N,{modelValue:w.value.saleQuantityPacks,"onUpdate:modelValue":ue[7]||(ue[7]=ye=>w.value.saleQuantityPacks=ye),modelModifiers:{number:!0},label:"Sale Quantity (Packs) *",variant:"outlined",density:"compact",type:"number",rules:[ye=>ye!=null&&ye>=0||"Sale quantity must be non-negative"],"prepend-inner-icon":"mdi-numeric"},null,8,["modelValue","rules"])]),_:1}),l(X,{cols:"12",md:"6"},{default:u(()=>[l(N,{modelValue:w.value.freeQuantityPacks,"onUpdate:modelValue":ue[8]||(ue[8]=ye=>w.value.freeQuantityPacks=ye),modelModifiers:{number:!0},label:"Free Quantity (Packs) *",variant:"outlined",density:"compact",type:"number",rules:[ye=>ye!=null&&ye>=0||"Free quantity must be non-negative"],"prepend-inner-icon":"mdi-numeric"},null,8,["modelValue","rules"])]),_:1}),l(X,{cols:"12",md:"6"},{default:u(()=>[l(N,{modelValue:w.value.cgstPercentage,"onUpdate:modelValue":ue[9]||(ue[9]=ye=>w.value.cgstPercentage=ye),modelModifiers:{number:!0},label:"CGST % *",variant:"outlined",density:"compact",type:"number",rules:[ye=>ye!=null||"CGST percentage is required"],"prepend-inner-icon":"mdi-percent"},null,8,["modelValue","rules"])]),_:1}),l(X,{cols:"12",md:"6"},{default:u(()=>[l(N,{modelValue:w.value.sgstPercentage,"onUpdate:modelValue":ue[10]||(ue[10]=ye=>w.value.sgstPercentage=ye),modelModifiers:{number:!0},label:"SGST % *",variant:"outlined",density:"compact",type:"number",rules:[ye=>ye!=null||"SGST percentage is required"],"prepend-inner-icon":"mdi-percent"},null,8,["modelValue","rules"])]),_:1}),l(X,{cols:"12",md:"6"},{default:u(()=>[l(N,{modelValue:b.value,"onUpdate:modelValue":ue[11]||(ue[11]=ye=>b.value=ye),label:"Price to Retailer (Excl. GST) () *",variant:"outlined",density:"compact",inputmode:"decimal",rules:[ye=>Number(ye)>=0||"Price to retailer (excl. GST) must be non-negative"],"prepend-inner-icon":"mdi-currency-inr",hint:"User input (excludes GST)","persistent-hint":"",onBlur:T},null,8,["modelValue","rules"])]),_:1}),l(X,{cols:"12",md:"6"},{default:u(()=>[v("div",K7e,[v("div",W7e,"Price to Retailer (Incl. GST): "+K(S.value),1),ue[18]||(ue[18]=v("div",null,"Computed using CGST + SGST",-1))])]),_:1}),l(X,{cols:"12"},{default:u(()=>[l(N,{modelValue:w.value.location,"onUpdate:modelValue":ue[12]||(ue[12]=ye=>w.value.location=ye),label:"Location",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-map-marker",hint:"Physical storage location (e.g., Shelf A-3, Room 1)","persistent-hint":""},null,8,["modelValue"])]),_:1}),l(X,{cols:"12",class:"pt-1"},{default:u(()=>[l(L,{class:"mb-1"}),v("div",j7e,[E.value>0?(U(),me("div",q7e,[ue[19]||(ue[19]=v("strong",null,"Total Quantity:",-1)),M(" "+K(E.value)+" packs ("+K(C.value)+" units) ",1)])):ge("",!0),D.value!==null?(U(),me("div",Y7e,[ue[20]||(ue[20]=v("strong",null,"Cost per Pack (Excl. GST):",-1)),M(" "+K(D.value.toFixed(2)),1)])):ge("",!0),F.value!==null?(U(),me("div",X7e,[ue[21]||(ue[21]=v("strong",null,"GST %:",-1)),M(" "+K(F.value.toFixed(2))+"% ",1)])):ge("",!0)])]),_:1})]),_:1})])):ge("",!0)]),_:1},8,["modelValue"])]),_:1}),l(L),l(ce,{class:"pa-3"},{default:u(()=>[l(Z),l(Y,{onClick:Ae},{default:u(()=>[...ue[23]||(ue[23]=[M("Cancel",-1)])]),_:1}),l(Y,{color:"primary",onClick:j,disabled:!A.value||!h.value||d.value,loading:d.value},{default:u(()=>[...ue[24]||(ue[24]=[M(" Add Batch ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Z7e={class:"d-flex align-center"},eGe={class:"pr-3 d-flex"},tGe={class:"scrollable-content"},nGe={class:"text-center"},aGe={class:"text-center"},rGe={class:"text-body-2 text-medium-emphasis mb-4"},sGe={class:"text-center"},oGe={class:"d-flex align-center justify-space-between w-100"},iGe={class:"flex-grow-1"},lGe={class:"d-flex align-center"},uGe={class:"text-body-2 font-weight-bold",style:{"word-wrap":"break-word","overflow-wrap":"break-word","line-height":"1.4"}},cGe={class:"d-flex align-center"},dGe={key:0,class:"text-body-2 mb-2 px-0"},AGe={class:"d-flex align-center flex-wrap text-left"},fGe={key:0,class:"text-medium-emphasis mr-2"},mGe={key:1,class:"text-medium-emphasis mr-2"},vGe={key:2,class:"text-medium-emphasis"},hGe={key:1},pGe={class:"text-right"},gGe={class:"text-right"},yGe={class:"text-right"},_Ge={class:"text-center"},wGe={key:2,class:"text-body-2 text-medium-emphasis text-center py-2 px-4"},bGe={__name:"pharmacy-purchase",setup(e){const t=Rn(),n=ae(()=>t.getters["pharmacyModule/currentPharmacyId"]),a=V(0),r=V(null),s=V(!1),o=V(null),i=V([]),c=V(""),A=V(""),d=V(!1),f=V(!1),m=V(null),h=V(!1),p=V(null),y=V(null),g=V(!1),w=V(null),b=ae(()=>{let ne=i.value;if(c.value&&c.value.trim()!==""){const Y=c.value.toLowerCase();ne=ne.filter(te=>te.supplierName&&te.supplierName.toLowerCase().includes(Y))}if(A.value&&A.value.trim()!==""){const Y=A.value.toLowerCase();ne=ne.map(te=>{const L=(te.invoices||[]).filter(N=>N.pharmacyPurchaseInvoiceIdentifier&&N.pharmacyPurchaseInvoiceIdentifier.toLowerCase().includes(Y));return{...te,invoices:L}}).filter(te=>te.invoices.length>0)}return ne}),x=async()=>{if(!n.value){o.value="Please select a pharmacy first";return}s.value=!0,o.value=null;try{const{data:ne,error:Y}=await pM();if(Y)throw Y;const te=await Promise.all((ne||[]).map(async L=>{const{data:N}=await wce(n.value,{supplierId:L.id});return{...L,invoices:N||[]}}));i.value=te}catch(ne){console.error("Error loading suppliers:",ne),o.value=ne.response?.data?.error||ne.message||"Failed to load suppliers"}finally{s.value=!1}},T=()=>{m.value=null,d.value=!0},F=()=>{d.value=!1,m.value=null},k=ne=>{m.value=ne,f.value=!0},S=()=>{f.value=!1,m.value=null},E=()=>{F(),S(),x()},C=ne=>{p.value=ne,h.value=!0},D=()=>{h.value=!1,p.value=null},P=()=>{D(),x()},O=ne=>{y.value=ne},H=()=>{y.value=null},ie=ne=>{w.value=ne,g.value=!0},Ae=()=>{g.value=!1,w.value=null},j=()=>{Ae(),y.value&&(H(),O(w.value)),x()},J=ne=>ne?new Date(ne*1e3).toLocaleDateString():"-",ue=ne=>ne==null?"0.00":`${ne.toFixed(2)}`;return Ke(n,(ne,Y)=>{ne&&ne!==Y&&x()}),un(()=>{x()}),(ne,Y)=>{const te=I("v-alert"),L=I("v-tab"),N=I("v-tabs"),q=I("v-btn"),Q=I("v-icon"),ee=I("v-tooltip"),z=I("v-card"),X=I("v-col"),le=I("v-row"),re=I("v-progress-circular"),de=I("v-text-field"),G=I("v-card-title"),Z=I("v-divider"),ce=I("v-chip"),Se=I("v-table"),Pe=I("v-card-text"),ye=I("v-lazy"),Ce=I("v-window-item"),_e=I("v-window"),De=I("v-main");return U(),pe(De,null,{default:u(()=>[r.value?(U(),pe(te,{key:0,type:"error",dismissible:"","onClick:close":Y[0]||(Y[0]=xe=>r.value=null),class:"ma-3"},{default:u(()=>[M(K(r.value),1)]),_:1})):ge("",!0),l(le,{"no-gutters":"",class:"pl-3 pr-3 mb-2",style:{height:"50px"}},{default:u(()=>[l(X,{cols:"12"},{default:u(()=>[l(z,{color:"surfaceContainer",flat:"",style:{height:"100%"},class:"d-flex align-center justify-space-between"},{default:u(()=>[v("div",Z7e,[l(N,{modelValue:a.value,"onUpdate:modelValue":Y[1]||(Y[1]=xe=>a.value=xe),color:"primary","align-tabs":"start"},{default:u(()=>[l(L,{value:0},{default:u(()=>[...Y[5]||(Y[5]=[M("Purchase",-1)])]),_:1})]),_:1},8,["modelValue"])]),v("div",eGe,[l(Bn,{permission:"pharmacy.purchase.create"},{default:u(()=>[l(q,{color:"primary","prepend-icon":"mdi-plus",onClick:T},{default:u(()=>[...Y[6]||(Y[6]=[M(" Add Supplier ",-1)])]),_:1})]),_:1}),l(ee,{text:"Refresh"},{activator:u(({props:xe})=>[l(q,Ue({rounded:"x-small",onClick:x,size:"small"},xe,{loading:s.value,class:"btn-hover-enhanced ml-1"}),{default:u(()=>[l(Q,null,{default:u(()=>[...Y[7]||(Y[7]=[M("mdi-refresh",-1)])]),_:1})]),_:1},16,["loading"])]),_:1})])]),_:1})]),_:1})]),_:1}),l(_e,{modelValue:a.value,"onUpdate:modelValue":Y[4]||(Y[4]=xe=>a.value=xe),class:"pl-3 pr-3 stable-height-main"},{default:u(()=>[l(Ce,{value:0,style:{height:"100%"}},{default:u(()=>[v("div",tGe,[s.value?(U(),pe(le,{key:0,"no-gutters":""},{default:u(()=>[l(X,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50vh"}},{default:u(()=>[v("div",nGe,[l(re,{indeterminate:"",color:"primary",size:"64"}),Y[8]||(Y[8]=v("div",{class:"mt-4 text-subtitle-1"},"Loading suppliers...",-1))])]),_:1})]),_:1})):o.value?(U(),pe(le,{key:1,"no-gutters":""},{default:u(()=>[l(X,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50vh"}},{default:u(()=>[v("div",aGe,[l(Q,{size:"64",color:"error",class:"mb-4"},{default:u(()=>[...Y[9]||(Y[9]=[M("mdi-alert-circle",-1)])]),_:1}),Y[11]||(Y[11]=v("div",{class:"text-h6 mb-2"},"Failed to Load Suppliers",-1)),v("div",rGe,K(o.value),1),l(q,{color:"primary",onClick:x,"prepend-icon":"mdi-refresh"},{default:u(()=>[...Y[10]||(Y[10]=[M(" Try Again ",-1)])]),_:1})])]),_:1})]),_:1})):b.value.length===0?(U(),pe(le,{key:2,"no-gutters":""},{default:u(()=>[l(X,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50vh"}},{default:u(()=>[v("div",sGe,[l(Q,{size:"64",color:"grey",class:"mb-4"},{default:u(()=>[...Y[12]||(Y[12]=[M("mdi-cart-off",-1)])]),_:1}),Y[14]||(Y[14]=v("div",{class:"text-h6 mb-2"},"No Suppliers",-1)),Y[15]||(Y[15]=v("div",{class:"text-body-2 text-medium-emphasis mb-4"},"Add suppliers to start managing purchase invoices",-1)),l(Bn,{permission:"pharmacy.purchase.create"},{default:u(()=>[l(q,{color:"primary",onClick:T,"prepend-icon":"mdi-plus"},{default:u(()=>[...Y[13]||(Y[13]=[M(" Add Supplier ",-1)])]),_:1})]),_:1})])]),_:1})]),_:1})):(U(),me(We,{key:3},[l(le,{"no-gutters":"",class:"mb-2"},{default:u(()=>[l(X,{cols:"12",class:"d-flex justify-center align-center flex-wrap gap-2"},{default:u(()=>[l(de,{modelValue:c.value,"onUpdate:modelValue":Y[2]||(Y[2]=xe=>c.value=xe),placeholder:"Filter by supplier name...",density:"compact",variant:"outlined",clearable:"","hide-details":"","prepend-inner-icon":"mdi-magnify",class:"filter-input",style:{"max-width":"300px",width:"100%"}},null,8,["modelValue"]),l(de,{modelValue:A.value,"onUpdate:modelValue":Y[3]||(Y[3]=xe=>A.value=xe),placeholder:"Filter by invoice ID...",density:"compact",variant:"outlined",clearable:"","hide-details":"","prepend-inner-icon":"mdi-file-document",class:"filter-input",style:{"max-width":"300px",width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),(U(!0),me(We,null,qt(b.value,xe=>(U(),pe(ye,{key:xe.id,options:{threshold:.1,rootMargin:"50px"}},{default:u(()=>[l(z,{style:{textAlign:"left"},density:"compact",class:"mb-1 mx-2 card-enhanced card-status-default",rounded:"lg"},{default:u(()=>[l(G,{class:"pb-0 pt-2"},{default:u(()=>[v("div",oGe,[v("div",iGe,[v("div",lGe,[v("div",uGe,K(xe.supplierName||"Unknown Supplier"),1),l(Bn,{permission:"pharmacy.purchase.create",tag:"span"},{default:u(()=>[l(ee,{text:"Edit Supplier"},{activator:u(({props:Te})=>[l(Q,Ue({size:"x-small"},{ref_for:!0},Te,{class:"edit-icon flex-shrink-0 ml-1",onClick:Me=>k(xe),tabindex:"-1"}),{default:u(()=>[...Y[16]||(Y[16]=[M(" mdi-pencil ",-1)])]),_:1},16,["onClick"])]),_:2},1024)]),_:2},1024)])]),v("div",cGe,[l(Bn,{permission:"pharmacy.purchase.create"},{default:u(()=>[l(q,{color:"primary",variant:"outlined","prepend-icon":"mdi-file-document-plus",size:"small",onClick:Te=>C(xe.id)},{default:u(()=>[...Y[17]||(Y[17]=[M(" Add Invoice ",-1)])]),_:1},8,["onClick"])]),_:2},1024)])])]),_:2},1024),l(Pe,{class:ct({"pt-1 pb-1":xe.invoices&&xe.invoices.length>0,"pt-1 pb-2":!xe.invoices||xe.invoices.length===0})},{default:u(()=>[xe.gstin||xe.address||xe.contactNumber?(U(),me("div",dGe,[v("div",AGe,[xe.gstin&&xe.gstin.trim()!==""?(U(),me("span",fGe," GSTIN: "+K(xe.gstin),1)):ge("",!0),xe.address?(U(),me("span",mGe," Address: "+K(xe.address),1)):ge("",!0),xe.contactNumber?(U(),me("span",vGe," Contact No.: "+K(xe.contactNumber),1)):ge("",!0)])])):ge("",!0),xe.invoices&&xe.invoices.length>0?(U(),me("div",hGe,[xe.address||xe.contactNumber?(U(),pe(Z,{key:0,class:"mb-2"})):ge("",!0),l(Se,{density:"compact",class:"batch-table compact-table"},{default:u(()=>[Y[18]||(Y[18]=v("thead",null,[v("tr",null,[v("th",{class:"text-left"},"Date"),v("th",{class:"text-left"},"Invoice ID"),v("th",{class:"text-left"},"Status"),v("th",{class:"text-right"},"Total Amount"),v("th",{class:"text-right"},"Batches"),v("th",{class:"text-right"},"Medicines"),v("th",{class:"text-center"},"Actions")])],-1)),v("tbody",null,[(U(!0),me(We,null,qt(xe.invoices,Te=>(U(),me("tr",{key:Te.id},[v("td",null,K(J(Te.pharmacyPurchaseInvoiceDate)),1),v("td",null,K(Te.pharmacyPurchaseInvoiceIdentifier),1),v("td",null,[l(ce,{color:Te.status===2?"success":"warning",size:"small",variant:"tonal"},{default:u(()=>[M(K(Te.statusLabel||"Draft"),1)]),_:2},1032,["color"])]),v("td",pGe,K(ue(Te.totalAmount||0)),1),v("td",gGe,K(Te.batchCount||0),1),v("td",yGe,K(Te.medicineCount||0),1),v("td",_Ge,[l(Bn,{feature:"pharmacy.purchase",tag:"span"},{default:u(()=>[l(ee,{text:"View Invoice"},{activator:u(({props:Me})=>[l(q,Ue({icon:"mdi-eye",size:"small",variant:"text",onClick:et=>O(Te.id),class:"mr-1"},{ref_for:!0},Me),null,16,["onClick"])]),_:2},1024)]),_:2},1024),l(Bn,{permission:"pharmacy.purchase.create",tag:"span"},{default:u(()=>[l(ee,{text:"Add Medicine Batch"},{activator:u(({props:Me})=>[l(q,Ue({icon:"mdi-plus",size:"small",variant:"text",onClick:et=>ie(Te.id)},{ref_for:!0},Me),null,16,["onClick"])]),_:2},1024)]),_:2},1024)])]))),128))])]),_:2},1024)])):(U(),me("div",wGe,' No purchase invoices yet. Click on "Add Invoice" to create one. '))]),_:2},1032,["class"])]),_:2},1024)]),_:2},1024))),128))],64))])]),_:1})]),_:1},8,["modelValue"]),d.value?(U(),pe(m7e,{key:1,supplier:m.value,onClose:F,onSaved:E},null,8,["supplier"])):ge("",!0),f.value?(U(),pe(v7e,{key:2,supplier:m.value,onClose:S,onSaved:E},null,8,["supplier"])):ge("",!0),h.value?(U(),pe(h7e,{key:3,"supplier-id":p.value,onClose:D,onSaved:P},null,8,["supplier-id"])):ge("",!0),y.value?(U(),pe(G7e,{key:4,"invoice-id":y.value,onClose:H,onUpdated:P,onAddBatch:ie},null,8,["invoice-id"])):ge("",!0),g.value?(U(),pe(J7e,{key:5,"purchase-invoice-id":w.value,onClose:Ae,onSaved:j},null,8,["purchase-invoice-id"])):ge("",!0)]),_:1})}}},xGe=Xt(bGe,[["__scopeId","data-v-f49a5380"]]),CGe={class:"mb-4"},SGe={class:"mb-4"},EGe={class:"mb-4"},BGe={key:0,class:"text-caption text-medium-emphasis mt-2"},kGe={key:1,class:"text-caption text-medium-emphasis mt-2"},TGe={class:"d-flex justify-center mt-2 mb-2"},IGe={class:"d-flex justify-center mt-2"},FGe={key:0,class:"mt-4"},PGe={class:"text-caption text-medium-emphasis"},DGe={key:0},UGe={key:1},RGe={key:2},NGe={__name:"PharmacyReportFilter",props:{filters:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},emits:["filter-change","start-report","clear-filters"],setup(e,{emit:t}){const n=Rn(),a=e,r=t,s=V({reportType:"",startDate:"",endDate:"",pharmacyId:null,...a.filters}),o=V([]),i=ae(()=>n.getters["pharmacyModule/currentPharmacyId"]);un(async()=>{const{data:y}=await qk();o.value=y||[],!s.value.pharmacyId&&i.value&&(s.value.pharmacyId=i.value,d())}),Ke(i,y=>{y&&!s.value.pharmacyId&&(s.value.pharmacyId=y,d())});const c=V([{label:"Medicine Wise Sales Report",value:"sales-report"},{label:"Billing Report",value:"billing-report"},{label:"Payment Report",value:"payment-report"},{label:"Inventory Transactions Report",value:"inventory-report"},{label:"Expired Inventory Report",value:"expired-inventory-report"},{label:"Purchase Bill Report",value:"purchase-bill-report"},{label:"HSN-wise GST Report",value:"hsn-wise-gst-report"},{label:"Rate-wise GST Report",value:"rate-wise-gst-report"},{label:"Inventory Snapshot Report",value:"inventory-snapshot-report"}]),A=ae(()=>!s.value.reportType||!s.value.pharmacyId?!1:s.value.reportType==="expired-inventory-report"||s.value.reportType==="inventory-snapshot-report"?!0:!!(s.value.startDate&&s.value.endDate));Ke(()=>a.filters,y=>{s.value={...s.value,...y}},{deep:!0});const d=()=>{r("filter-change",{...s.value})},f=()=>{A.value&&r("start-report",{...s.value})},m=()=>{s.value={reportType:"",startDate:"",endDate:"",pharmacyId:i.value||null},r("clear-filters"),d()},h=y=>{const g=c.value.find(w=>w.value===y);return g?g.label:y},p=y=>y?new Date(y).toLocaleDateString():"";return(y,g)=>{const w=I("v-card-text"),b=I("v-card"),x=I("v-label"),T=I("v-icon"),F=I("v-select"),k=I("v-text-field"),S=I("v-col"),E=I("v-row"),C=I("v-divider"),D=I("v-btn"),P=I("v-card-title"),O=I("v-form");return U(),pe(b,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[l(b,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(w,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[...g[4]||(g[4]=[v("strong",null,"Report Configuration",-1)])]),_:1})]),_:1}),l(w,{class:"pa-4"},{default:u(()=>[l(O,{onSubmit:pn(f,["prevent"])},{default:u(()=>[v("div",CGe,[l(x,{class:"text-subtitle-2 font-weight-medium mb-2"},{default:u(()=>[...g[5]||(g[5]=[M("Pharmacy",-1)])]),_:1}),l(F,{modelValue:s.value.pharmacyId,"onUpdate:modelValue":[g[0]||(g[0]=H=>s.value.pharmacyId=H),d],items:o.value,"item-title":"pharmacyName","item-value":"id",variant:"outlined",density:"comfortable",loading:o.value.length===0},{"prepend-inner":u(()=>[l(T,{color:"primary"},{default:u(()=>[...g[6]||(g[6]=[M("mdi-pill",-1)])]),_:1})]),_:1},8,["modelValue","items","loading"])]),v("div",SGe,[l(x,{class:"text-subtitle-2 font-weight-medium mb-2"},{default:u(()=>[...g[7]||(g[7]=[M("Report Type",-1)])]),_:1}),l(F,{modelValue:s.value.reportType,"onUpdate:modelValue":[g[1]||(g[1]=H=>s.value.reportType=H),d],items:c.value,"item-title":"label","item-value":"value",variant:"outlined",density:"comfortable"},{"prepend-inner":u(()=>[l(T,{color:"primary"},{default:u(()=>[...g[8]||(g[8]=[M("mdi-chart-line",-1)])]),_:1})]),_:1},8,["modelValue","items"])]),v("div",EGe,[l(x,{class:"text-subtitle-2 font-weight-medium mb-2"},{default:u(()=>[s.value.reportType==="expired-inventory-report"||s.value.reportType==="inventory-snapshot-report"?(U(),me(We,{key:0},[M(" Snapshot Report (Current Date) ")],64)):(U(),me(We,{key:1},[M(" Select Date Range ")],64))]),_:1}),l(E,{"no-gutters":"",class:"ga-2"},{default:u(()=>[l(S,{cols:"6"},{default:u(()=>[l(k,{modelValue:s.value.startDate,"onUpdate:modelValue":[g[2]||(g[2]=H=>s.value.startDate=H),d],type:"date",label:"Start Date",variant:"outlined",density:"comfortable",disabled:s.value.reportType==="expired-inventory-report"||s.value.reportType==="inventory-snapshot-report"},null,8,["modelValue","disabled"])]),_:1}),l(S,{cols:"6"},{default:u(()=>[l(k,{modelValue:s.value.endDate,"onUpdate:modelValue":[g[3]||(g[3]=H=>s.value.endDate=H),d],type:"date",label:"End Date",variant:"outlined",density:"comfortable",disabled:s.value.reportType==="expired-inventory-report"||s.value.reportType==="inventory-snapshot-report"},null,8,["modelValue","disabled"])]),_:1})]),_:1}),s.value.reportType==="expired-inventory-report"?(U(),me("div",BGe," This report shows expired/expiring batches as of today (IST). Date range selection is not applicable. ")):ge("",!0),s.value.reportType==="inventory-snapshot-report"?(U(),me("div",kGe," This report shows current inventory state as of today. Date range selection is not applicable. ")):ge("",!0)]),l(C,{class:"my-4"}),v("div",TGe,[l(D,{type:"submit",color:"primary",loading:e.loading,disabled:!A.value,"prepend-icon":"mdi-chart-line",class:"btn-hover-enhanced"},{default:u(()=>[...g[9]||(g[9]=[M(" Generate Report ",-1)])]),_:1},8,["loading","disabled"])]),v("div",IGe,[l(D,{variant:"outlined",color:"secondary",onClick:m,"prepend-icon":"mdi-filter-remove",class:"btn-hover-enhanced"},{default:u(()=>[...g[10]||(g[10]=[M(" Clear All Filters ",-1)])]),_:1})]),s.value.reportType?(U(),me("div",FGe,[l(b,{variant:"outlined",class:"pa-3"},{default:u(()=>[l(P,{class:"text-subtitle-2 pa-0"},{default:u(()=>[...g[11]||(g[11]=[M("Report Preview",-1)])]),_:1}),l(w,{class:"pa-0 pt-2"},{default:u(()=>[v("div",PGe,[v("div",null,[g[12]||(g[12]=v("strong",null,"Type:",-1)),M(" "+K(h(s.value.reportType)),1)]),s.value.reportType==="expired-inventory-report"?(U(),me("div",DGe,[...g[13]||(g[13]=[v("strong",null,"Report Type:",-1),M(" Snapshot (Current Date - IST) ",-1)])])):ge("",!0),s.value.reportType==="inventory-snapshot-report"?(U(),me("div",UGe,[...g[14]||(g[14]=[v("strong",null,"Report Type:",-1),M(" Snapshot (Current Date) ",-1)])])):s.value.startDate&&s.value.endDate?(U(),me("div",RGe,[g[15]||(g[15]=v("strong",null,"Date Range:",-1)),M(" "+K(p(s.value.startDate))+" - "+K(p(s.value.endDate)),1)])):ge("",!0)])]),_:1})]),_:1})])):ge("",!0)]),_:1})]),_:1})]),_:1})}}},VGe=Xt(NGe,[["__scopeId","data-v-5e7b7d67"]]),LGe={class:"scrollable-content"},MGe={class:"scrollable-content"},OGe={key:1},HGe={class:"text-center"},$Ge={class:"mt-4 text-subtitle-1"},QGe={key:0,class:"mt-4"},GGe={class:"mb-2"},zGe={class:"mb-2"},KGe={key:0,class:"mb-2"},WGe={key:1},jGe={class:"text-center"},qGe={__name:"pharmacy-reports",setup(e){const t=Rn(),n=V(!1),a=V(""),r=V(!1),s=V(""),o=V(!1),i=V(0),c=V(""),A=V([]),d=V(null),f=V(!1),m=V({reportType:"",startDate:"",endDate:"",pharmacyId:null}),h=ae(()=>t.getters["pharmacyModule/currentPharmacyId"]);un(()=>{h.value&&(m.value.pharmacyId=h.value)});const p=V([{title:"Date",key:"date",sortable:!0},{title:"Report Type",key:"reportType",sortable:!0},{title:"Format",key:"format",sortable:!0},{title:"Records",key:"recordCount",sortable:!0},{title:"Status",key:"status",sortable:!0}]),y=re=>{m.value={...m.value,...re}},g=()=>{m.value={reportType:"",startDate:"",endDate:"",pharmacyId:h.value||null}},w=async re=>{try{if(o.value=!0,i.value=0,c.value="Preparing report...",d.value=null,f.value=!1,console.log("Starting pharmacy report generation with filters:",re),re.reportType!=="expired-inventory-report"&&re.reportType!=="inventory-snapshot-report"){if(!re.startDate||!re.endDate)throw new Error("Please select both start and end dates for the report");const de=new Date(re.startDate),G=new Date(re.endDate);if(de>G)throw new Error("Start date must be less than or equal to end date")}if(re.reportType==="sales-report")await b(re);else if(re.reportType==="billing-report")await F(re);else if(re.reportType==="payment-report")await E(re);else if(re.reportType==="inventory-report")await P(re);else if(re.reportType==="expired-inventory-report")await ie(re);else if(re.reportType==="purchase-bill-report")await j(re);else if(re.reportType==="hsn-wise-gst-report")await ne(re);else if(re.reportType==="rate-wise-gst-report")await L(re);else if(re.reportType==="inventory-snapshot-report")await Q(re);else throw new Error("Invalid report type selected")}catch(de){console.error("Report generation error:",de),o.value=!1,i.value=0,c.value="",f.value=!1,r.value=!0,s.value="Report generation failed: "+de.message}finally{setTimeout(()=>{f.value&&(o.value=!1)},1500)}},b=async re=>{try{i.value=20,c.value="Fetching medicine-wise sales data...";const de=await dt.get("/pharmacy/reports/medicine-wise-sales",{params:{pharmacyId:re.pharmacyId,startDate:re.startDate,endDate:re.endDate}});if(de.data.success===!1)throw new Error(de.data.error||"Failed to fetch medicine-wise sales data");const G=de.data.data||[];i.value=60,c.value="Processing sales data...",i.value=80,c.value="Generating CSV file...";const Z=x(G);i.value=90,c.value="Preparing download...";const ce=`medicine_wise_sales_report_${re.startDate}_to_${re.endDate}.csv`,Se=await T(Z,ce);if(!Se.success)throw new Error(Se.error||"Failed to save report file");i.value=100,c.value="Medicine Wise Sales Report generated successfully!",d.value={reportType:"Medicine Wise Sales Report",totalRecords:G.length,dateRange:{from:re.startDate,to:re.endDate},filename:ce},f.value=!0;const Pe={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"Medicine Wise Sales Report",format:"CSV",recordCount:G.length,status:"Completed",filename:ce};A.value.unshift(Pe),n.value=!0,a.value=`Medicine Wise Sales Report generated successfully! ${G.length} records included.`}catch(de){throw console.error("Medicine Wise Sales Report generation error:",de),de}},x=re=>{const G=[["MedicineName","Company","GenericName","HSN","Group","BillID","BillDate","PatientName","DoctorName","BatchDetails","ExpiryDate","InwardBillID","MRP/unit","Cost/unit","Quantity","Discount%","TotalTaxableValue","GST Rate %","GSTAmount","Total Amount","CostAmount","ProfitAmount"].join(",")];return re.forEach(Z=>{const ce=[X(Z.MedicineName),X(Z.Company),X(Z.GenericName),X(Z.HSN),X(Z.Group),X(Z.BillID),Z.BillDate,X(Z.PatientName),X(Z.DoctorName),X(Z.BatchDetails),Z.ExpiryDate,X(Z.InwardBillID),Z.MRPPerUnit,Z.CostPerUnit,Z.Quantity,Z.DiscountPercentage,Z.TotalTaxableValue,Z.GSTRatePercentage,Z.GSTAmount,Z.TotalAmount,Z.CostAmount,Z.ProfitAmount];G.push(ce.join(","))}),G.join(`
`)},T=async(re,de)=>{try{const G=new Blob([re],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const Z=await window.electronAPI.showSaveDialog({defaultPath:de,filters:[{name:"CSV Files",extensions:["csv"]}]});return!Z.canceled&&Z.filePath?(await window.electronAPI.writeFile(Z.filePath,re),{success:!0,filePath:Z.filePath,filename:de}):{success:!1,error:"Save canceled by user"}}else{const Z=document.createElement("a"),ce=URL.createObjectURL(G);return Z.setAttribute("href",ce),Z.setAttribute("download",de),Z.style.visibility="hidden",document.body.appendChild(Z),Z.click(),document.body.removeChild(Z),URL.revokeObjectURL(ce),{success:!0,filePath:`Downloaded: ${de}`,filename:de}}}catch(G){return console.error("Error saving Sales Report file:",G),{success:!1,error:G.message}}},F=async re=>{try{i.value=20,c.value="Fetching billing data...";const de=await dt.get("/pharmacy/reports/billing",{params:{pharmacyId:re.pharmacyId,startDate:re.startDate,endDate:re.endDate}});if(de.data.success===!1)throw new Error(de.data.error||"Failed to fetch billing data");const G=de.data.data||[];i.value=60,c.value="Processing billing data...",i.value=80,c.value="Generating CSV file...";const Z=k(G);i.value=90,c.value="Preparing download...";const ce=`billing_report_${re.startDate}_to_${re.endDate}.csv`,Se=await S(Z,ce);if(!Se.success)throw new Error(Se.error||"Failed to save report file");i.value=100,c.value="Billing Report generated successfully!",d.value={reportType:"Billing Report",totalRecords:G.length,dateRange:{from:re.startDate,to:re.endDate},filename:ce},f.value=!0;const Pe={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"Billing Report",format:"CSV",recordCount:G.length,status:"Completed",filename:ce};A.value.unshift(Pe),n.value=!0,a.value=`Billing Report generated successfully! ${G.length} records included.`}catch(de){throw console.error("Billing Report generation error:",de),de}},k=re=>{const G=[["BillID","BillDate","PatientName","DoctorName","TotalMRP","TotalDiscount","TotalTaxableValue","TotalGST","AdditionalDiscount","NetAmount","Roundoff","FinalAmount"].join(",")];return re.forEach(Z=>{const ce=[X(Z.BillID),Z.BillDate,X(Z.PatientName),X(Z.DoctorName),Z.TotalMRP,Z.TotalDiscount,Z.TotalTaxableValue,Z.TotalGST,Z.AdditionalDiscount,Z.NetAmount,Z.Roundoff,Z.FinalAmount];G.push(ce.join(","))}),G.join(`
`)},S=async(re,de)=>{try{const G=new Blob([re],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const Z=await window.electronAPI.showSaveDialog({defaultPath:de,filters:[{name:"CSV Files",extensions:["csv"]}]});return!Z.canceled&&Z.filePath?(await window.electronAPI.writeFile(Z.filePath,re),{success:!0,filePath:Z.filePath,filename:de}):{success:!1,error:"Save canceled by user"}}else{const Z=document.createElement("a"),ce=URL.createObjectURL(G);return Z.setAttribute("href",ce),Z.setAttribute("download",de),Z.style.visibility="hidden",document.body.appendChild(Z),Z.click(),document.body.removeChild(Z),URL.revokeObjectURL(ce),{success:!0,filePath:`Downloaded: ${de}`,filename:de}}}catch(G){return console.error("Error saving Billing Report file:",G),{success:!1,error:G.message}}},E=async re=>{try{i.value=20,c.value="Fetching payment data...";const de=await dt.get("/pharmacy/reports/payment",{params:{pharmacyId:re.pharmacyId,startDate:re.startDate,endDate:re.endDate}});if(de.data.success===!1)throw new Error(de.data.error||"Failed to fetch payment data");const G=de.data.data||[];i.value=60,c.value="Processing payment data...",i.value=80,c.value="Generating CSV file...";const Z=C(G);i.value=90,c.value="Preparing download...";const ce=`payment_report_${re.startDate}_to_${re.endDate}.csv`,Se=await D(Z,ce);if(!Se.success)throw new Error(Se.error||"Failed to save report file");i.value=100,c.value="Payment Report generated successfully!",d.value={reportType:"Payment Report",totalRecords:G.length,dateRange:{from:re.startDate,to:re.endDate},filename:ce},f.value=!0;const Pe={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"Payment Report",format:"CSV",recordCount:G.length,status:"Completed",filename:ce};A.value.unshift(Pe),n.value=!0,a.value=`Payment Report generated successfully! ${G.length} records included.`}catch(de){throw console.error("Payment Report generation error:",de),de}},C=re=>{const G=[["BillID","BillDate","PatientName","Total Amount","Cash","Card","UPI","Bank Transfer","Cheque","Online","Other"].join(",")];return re.forEach(Z=>{const ce=[X(Z.BillID),Z.BillDate,X(Z.PatientName),Z.TotalAmount,Z.Cash,Z.Card,Z.UPI,Z.BankTransfer,Z.Cheque,Z.Online,Z.Other];G.push(ce.join(","))}),G.join(`
`)},D=async(re,de)=>{try{const G=new Blob([re],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const Z=await window.electronAPI.showSaveDialog({defaultPath:de,filters:[{name:"CSV Files",extensions:["csv"]}]});return!Z.canceled&&Z.filePath?(await window.electronAPI.writeFile(Z.filePath,re),{success:!0,filePath:Z.filePath,filename:de}):{success:!1,error:"Save canceled by user"}}else{const Z=document.createElement("a"),ce=URL.createObjectURL(G);return Z.setAttribute("href",ce),Z.setAttribute("download",de),Z.style.visibility="hidden",document.body.appendChild(Z),Z.click(),document.body.removeChild(Z),URL.revokeObjectURL(ce),{success:!0,filePath:`Downloaded: ${de}`,filename:de}}}catch(G){return console.error("Error saving Payment Report file:",G),{success:!1,error:G.message}}},P=async re=>{try{i.value=20,c.value="Fetching inventory transactions data...";const de=await dt.get("/pharmacy/reports/inventory-transactions",{params:{pharmacyId:re.pharmacyId,startDate:re.startDate,endDate:re.endDate}});if(de.data.success===!1)throw new Error(de.data.error||"Failed to fetch inventory transactions data");const G=de.data.data||[];i.value=60,c.value="Processing inventory transactions data...",i.value=80,c.value="Generating CSV file...";const Z=O(G);i.value=90,c.value="Preparing download...";const ce=`inventory_transactions_report_${re.startDate}_to_${re.endDate}.csv`,Se=await H(Z,ce);if(!Se.success)throw new Error(Se.error||"Failed to save report file");i.value=100,c.value="Inventory Transactions Report generated successfully!",d.value={reportType:"Inventory Transactions Report",totalRecords:G.length,dateRange:{from:re.startDate,to:re.endDate},filename:ce},f.value=!0;const Pe={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"Inventory Transactions Report",format:"CSV",recordCount:G.length,status:"Completed",filename:ce};A.value.unshift(Pe),n.value=!0,a.value=`Inventory Transactions Report generated successfully! ${G.length} records included.`}catch(de){throw console.error("Inventory Transactions Report generation error:",de),de}},O=re=>{const G=[["Transaction Date","Medicine Name","Batch ID","Transaction Type","Quantity","Note","Inward Bill ID"].join(",")];return re.forEach(Z=>{const ce=[Z.transactionDate,X(Z.medicineName),X(Z.batchId),X(Z.transactionType),Z.quantity,X(Z.note),X(Z.inwardBillId)];G.push(ce.join(","))}),G.join(`
`)},H=async(re,de)=>{try{const G=new Blob([re],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const Z=await window.electronAPI.showSaveDialog({defaultPath:de,filters:[{name:"CSV Files",extensions:["csv"]}]});return!Z.canceled&&Z.filePath?(await window.electronAPI.writeFile(Z.filePath,re),{success:!0,filePath:Z.filePath,filename:de}):{success:!1,error:"Save canceled by user"}}else{const Z=document.createElement("a"),ce=URL.createObjectURL(G);return Z.setAttribute("href",ce),Z.setAttribute("download",de),Z.style.visibility="hidden",document.body.appendChild(Z),Z.click(),document.body.removeChild(Z),URL.revokeObjectURL(ce),{success:!0,filePath:`Downloaded: ${de}`,filename:de}}}catch(G){return console.error("Error saving Inventory Transactions Report file:",G),{success:!1,error:G.message}}},ie=async re=>{try{i.value=20,c.value="Fetching expired inventory data...";const de=await dt.get("/pharmacy/reports/expired-inventory",{params:{pharmacyId:re.pharmacyId}});if(de.data.success===!1)throw new Error(de.data.error||"Failed to fetch expired inventory data");const G=de.data.data||[];i.value=60,c.value="Processing expired inventory data...",i.value=80,c.value="Generating CSV file...";const Z=Ae(G);i.value=90,c.value="Preparing download...";const ce=Un(),Se=`expired_inventory_report_${ce}.csv`,Pe=await le(Z,Se);if(!Pe.success)throw new Error(Pe.error||"Failed to save report file");i.value=100,c.value="Expired Inventory Report generated successfully!",d.value={reportType:"Expired Inventory Report",totalRecords:G.length,dateRange:{from:ce,to:ce},filename:Se},f.value=!0;const ye={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"Expired Inventory Report",format:"CSV",recordCount:G.length,status:"Completed",filename:Se};A.value.unshift(ye),n.value=!0,a.value=`Expired Inventory Report generated successfully! ${G.length} records included.`}catch(de){throw console.error("Expired Inventory Report generation error:",de),de}},Ae=re=>{const G=[["Medicine Name","Company Name","Batch ID","Expiry Date","MRP","cost excl. GST","GST%","cost incl. GST","Inventory Quantity"].join(",")];return re.forEach(Z=>{const ce=[X(Z.medicineName),X(Z.companyName),X(Z.batchId),Z.expiryDate,Z.mrp,Z["cost excl. GST"]||0,Z["GST%"]||0,Z["cost incl. GST"]||0,Z.inventoryQuantity];G.push(ce.join(","))}),G.join(`
`)},j=async re=>{try{i.value=20,c.value="Fetching purchase bill data...";const de=await dt.get("/pharmacy/reports/purchase-bill",{params:{pharmacyId:re.pharmacyId,startDate:re.startDate,endDate:re.endDate}});if(de.data.success===!1)throw new Error(de.data.error||"Failed to fetch purchase bill data");const G=de.data.data||[];i.value=60,c.value="Processing purchase bill data...",i.value=80,c.value="Generating CSV file...";const Z=J(G);i.value=90,c.value="Preparing download...";const ce=`purchase_bill_report_${re.startDate}_to_${re.endDate}.csv`,Se=await ue(Z,ce);if(!Se.success)throw new Error(Se.error||"Failed to save report file");i.value=100,c.value="Purchase Bill Report generated successfully!",d.value={reportType:"Purchase Bill Report",totalRecords:G.length,dateRange:{from:re.startDate,to:re.endDate},filename:ce},f.value=!0;const Pe={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"Purchase Bill Report",format:"CSV",recordCount:G.length,status:"Completed",filename:ce};A.value.unshift(Pe),n.value=!0,a.value=`Purchase Bill Report generated successfully! ${G.length} records included.`}catch(de){throw console.error("Purchase Bill Report generation error:",de),de}},J=re=>{const G=[["SupplierName","SupplierGSTIN","TotalMRP","TotalTaxableValue","TotalGST","AdditionalDiscount","NetAmount"].join(",")];return re.forEach(Z=>{const ce=[X(Z.SupplierName),X(Z.SupplierGSTIN),Z.TotalMRP,Z.TotalTaxableValue,Z.TotalGST,Z.AdditionalDiscount,Z.NetAmount];G.push(ce.join(","))}),G.join(`
`)},ue=async(re,de)=>{try{const G=new Blob([re],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const Z=await window.electronAPI.showSaveDialog({defaultPath:de,filters:[{name:"CSV Files",extensions:["csv"]}]});return!Z.canceled&&Z.filePath?(await window.electronAPI.writeFile(Z.filePath,re),{success:!0,filePath:Z.filePath,filename:de}):{success:!1,error:"Save canceled by user"}}else{const Z=document.createElement("a"),ce=URL.createObjectURL(G);return Z.setAttribute("href",ce),Z.setAttribute("download",de),Z.style.visibility="hidden",document.body.appendChild(Z),Z.click(),document.body.removeChild(Z),URL.revokeObjectURL(ce),{success:!0,filePath:`Downloaded: ${de}`,filename:de}}}catch(G){return console.error("Error saving Purchase Bill Report file:",G),{success:!1,error:G.message}}},ne=async re=>{try{i.value=20,c.value="Fetching HSN-wise GST data...";const de=await dt.get("/pharmacy/reports/hsn-wise-gst",{params:{pharmacyId:re.pharmacyId,startDate:re.startDate,endDate:re.endDate}});if(de.data.success===!1)throw new Error(de.data.error||"Failed to fetch HSN-wise GST data");const G=de.data.data||[];i.value=60,c.value="Processing HSN-wise GST data...",i.value=80,c.value="Generating CSV file...";const Z=Y(G);i.value=90,c.value="Preparing download...";const ce=`hsn_wise_gst_report_${re.startDate}_to_${re.endDate}.csv`,Se=await te(Z,ce);if(!Se.success)throw new Error(Se.error||"Failed to save report file");i.value=100,c.value="HSN-wise GST Report generated successfully!",d.value={reportType:"HSN-wise GST Report",totalRecords:G.length,dateRange:{from:re.startDate,to:re.endDate},filename:ce},f.value=!0;const Pe={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"HSN-wise GST Report",format:"CSV",recordCount:G.length,status:"Completed",filename:ce};A.value.unshift(Pe),n.value=!0,a.value=`HSN-wise GST Report generated successfully! ${G.length} records included.`}catch(de){throw console.error("HSN-wise GST Report generation error:",de),de}},Y=re=>{const G=[["HSN","TotalQuantity","TotalTaxableValue","GSTAmount","TotalAmount"].join(",")];return re.forEach(Z=>{const ce=[X(Z.HSN),Z.TotalQuantity,Z.TotalTaxableValue,Z.GSTAmount,Z.TotalAmount];G.push(ce.join(","))}),G.join(`
`)},te=async(re,de)=>{try{const G=new Blob([re],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const Z=await window.electronAPI.showSaveDialog({defaultPath:de,filters:[{name:"CSV Files",extensions:["csv"]}]});return!Z.canceled&&Z.filePath?(await window.electronAPI.writeFile(Z.filePath,re),{success:!0,filePath:Z.filePath,filename:de}):{success:!1,error:"Save canceled by user"}}else{const Z=document.createElement("a"),ce=URL.createObjectURL(G);return Z.setAttribute("href",ce),Z.setAttribute("download",de),Z.style.visibility="hidden",document.body.appendChild(Z),Z.click(),document.body.removeChild(Z),URL.revokeObjectURL(ce),{success:!0,filePath:`Downloaded: ${de}`,filename:de}}}catch(G){return console.error("Error saving HSN-wise GST Report file:",G),{success:!1,error:G.message}}},L=async re=>{try{i.value=20,c.value="Fetching rate-wise GST data...";const de=await dt.get("/pharmacy/reports/rate-wise-gst",{params:{pharmacyId:re.pharmacyId,startDate:re.startDate,endDate:re.endDate}});if(de.data.success===!1)throw new Error(de.data.error||"Failed to fetch rate-wise GST data");const G=de.data.data||[];i.value=60,c.value="Processing rate-wise GST data...",i.value=80,c.value="Generating CSV file...";const Z=N(G);i.value=90,c.value="Preparing download...";const ce=`rate_wise_gst_report_${re.startDate}_to_${re.endDate}.csv`,Se=await q(Z,ce);if(!Se.success)throw new Error(Se.error||"Failed to save report file");i.value=100,c.value="Rate-wise GST Report generated successfully!",d.value={reportType:"Rate-wise GST Report",totalRecords:G.length,dateRange:{from:re.startDate,to:re.endDate},filename:ce},f.value=!0;const Pe={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"Rate-wise GST Report",format:"CSV",recordCount:G.length,status:"Completed",filename:ce};A.value.unshift(Pe),n.value=!0,a.value=`Rate-wise GST Report generated successfully! ${G.length} records included.`}catch(de){throw console.error("Rate-wise GST Report generation error:",de),de}},N=re=>{const G=[["GST%","TotalTaxableValue","GSTAmount","TotalAmount"].join(",")];return re.forEach(Z=>{const ce=[Z["GST%"],Z.TotalTaxableValue,Z.GSTAmount,Z.TotalAmount];G.push(ce.join(","))}),G.join(`
`)},q=async(re,de)=>{try{const G=new Blob([re],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const Z=await window.electronAPI.showSaveDialog({defaultPath:de,filters:[{name:"CSV Files",extensions:["csv"]}]});return!Z.canceled&&Z.filePath?(await window.electronAPI.writeFile(Z.filePath,re),{success:!0,filePath:Z.filePath,filename:de}):{success:!1,error:"Save canceled by user"}}else{const Z=document.createElement("a"),ce=URL.createObjectURL(G);return Z.setAttribute("href",ce),Z.setAttribute("download",de),Z.style.visibility="hidden",document.body.appendChild(Z),Z.click(),document.body.removeChild(Z),URL.revokeObjectURL(ce),{success:!0,filePath:`Downloaded: ${de}`,filename:de}}}catch(G){return console.error("Error saving Rate-wise GST Report file:",G),{success:!1,error:G.message}}},Q=async re=>{try{i.value=20,c.value="Fetching inventory snapshot data...";const de=await dt.get("/pharmacy/reports/inventory-snapshot",{params:{pharmacyId:re.pharmacyId}});if(de.data.success===!1)throw new Error(de.data.error||"Failed to fetch inventory snapshot data");const G=de.data.data||[];i.value=60,c.value="Processing inventory snapshot data...",i.value=80,c.value="Generating CSV file...";const Z=ee(G);i.value=90,c.value="Preparing download...";const ce=Un(),Se=`inventory_snapshot_report_${ce}.csv`,Pe=await z(Z,Se);if(!Pe.success)throw new Error(Pe.error||"Failed to save report file");i.value=100,c.value="Inventory Snapshot Report generated successfully!",d.value={reportType:"Inventory Snapshot Report",totalRecords:G.length,dateRange:{from:ce,to:ce},filename:Se},f.value=!0;const ye={id:Date.now().toString(),date:new Date().toLocaleDateString(),reportType:"Inventory Snapshot Report",format:"CSV",recordCount:G.length,status:"Completed",filename:Se};A.value.unshift(ye),n.value=!0,a.value=`Inventory Snapshot Report generated successfully! ${G.length} records included.`}catch(de){throw console.error("Inventory Snapshot Report generation error:",de),de}},ee=re=>{const G=[["MedicineName","HSN","Product_form","Group","batchNumber","Expiry Date","PackType","UnitsPerpack","MRP","COST excl. GST","GST%","COST incl. GST","Quantity","InwardBillID","Location"].join(",")];return re.forEach(Z=>{const ce=[X(Z.MedicineName),X(Z.HSN),X(Z.Product_form),X(Z.Group),X(Z.batchNumber),Z["Expiry Date"],X(Z.PackType),Z.UnitsPerpack,Z.MRP,Z["COST excl. GST"]||0,Z["GST%"]||0,Z["COST incl. GST"]||0,Z.Quantity,X(Z.InwardBillID),X(Z.Location)];G.push(ce.join(","))}),G.join(`
`)},z=async(re,de)=>{try{const G=new Blob([re],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const Z=await window.electronAPI.showSaveDialog({defaultPath:de,filters:[{name:"CSV Files",extensions:["csv"]}]});return!Z.canceled&&Z.filePath?(await window.electronAPI.writeFile(Z.filePath,re),{success:!0,filePath:Z.filePath,filename:de}):{success:!1,error:"Save canceled by user"}}else{const Z=document.createElement("a"),ce=URL.createObjectURL(G);return Z.setAttribute("href",ce),Z.setAttribute("download",de),Z.style.visibility="hidden",document.body.appendChild(Z),Z.click(),document.body.removeChild(Z),URL.revokeObjectURL(ce),{success:!0,filePath:`Downloaded: ${de}`,filename:de}}}catch(G){return console.error("Error saving Inventory Snapshot Report file:",G),{success:!1,error:G.message}}},X=re=>{if(re==null)return"";const de=String(re);return de.includes(",")||de.includes('"')||de.includes(`
`)?`"${de.replace(/"/g,'""')}"`:de},le=async(re,de)=>{try{const G=new Blob([re],{type:"text/csv;charset=utf-8;"});if(window.electronAPI){const Z=await window.electronAPI.showSaveDialog({defaultPath:de,filters:[{name:"CSV Files",extensions:["csv"]}]});return!Z.canceled&&Z.filePath?(await window.electronAPI.writeFile(Z.filePath,re),{success:!0,filePath:Z.filePath,filename:de}):{success:!1,error:"Save canceled by user"}}else{const Z=document.createElement("a"),ce=URL.createObjectURL(G);return Z.setAttribute("href",ce),Z.setAttribute("download",de),Z.style.visibility="hidden",document.body.appendChild(Z),Z.click(),document.body.removeChild(Z),URL.revokeObjectURL(ce),{success:!0,filePath:`Downloaded: ${de}`,filename:de}}}catch(G){return console.error("Error saving Expired Inventory Report file:",G),{success:!1,error:G.message}}};return un(()=>{console.log("Pharmacy Reports page initialized")}),(re,de)=>{const G=I("v-col"),Z=I("v-card-text"),ce=I("v-card"),Se=I("v-progress-circular"),Pe=I("v-card-title"),ye=I("v-row"),Ce=I("v-data-table"),_e=I("v-icon"),De=I("v-snackbar"),xe=I("v-main");return U(),pe(xe,null,{default:u(()=>[l(Bn,{feature:"pharmacy.reports"},{default:u(()=>[l(ye,{"aria-label":"pharmacy reports row",style:{height:"calc(100vh - 64px)"},class:"d-flex align-stretch ma-0"},{default:u(()=>[l(G,{cols:"4",order:"1",class:"pr-1 stable-height-column"},{default:u(()=>[v("div",LGe,[l(VGe,{filters:m.value,loading:o.value,onFilterChange:y,onStartReport:w,onClearFilters:g},null,8,["filters","loading"])])]),_:1}),l(G,{cols:"8",order:"2",class:"pl-1 stable-height-column"},{default:u(()=>[v("div",MGe,[l(ce,{flat:"",color:"surfaceContainer",style:{height:"100%"}},{default:u(()=>[l(ce,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(Z,{class:"pt-2 pb-0 d-flex align-center justify-center"},{default:u(()=>[A.value.length>0?(U(),me(We,{key:0},[v("strong",null,K(A.value.length),1),M(" report"+K(A.value.length!==1?"s":"")+" available ",1)],64)):(U(),me("strong",OGe,"Generate Reports"))]),_:1})]),_:1}),o.value?(U(),pe(ye,{key:0,"no-gutters":""},{default:u(()=>[l(G,{cols:"12",class:"d-flex justify-center align-center",style:{height:"50%"}},{default:u(()=>[v("div",HGe,[l(Se,{"model-value":i.value,color:"primary",size:"64",width:"6"},{default:u(()=>[M(K(i.value)+"% ",1)]),_:1},8,["model-value"]),v("div",$Ge,K(c.value||"Generating report..."),1),d.value?(U(),me("div",QGe,[l(ce,{class:"mx-auto","max-width":"300",outlined:""},{default:u(()=>[l(Pe,{class:"text-h6"},{default:u(()=>[...de[2]||(de[2]=[M("Report Summary",-1)])]),_:1}),l(Z,null,{default:u(()=>[v("div",GGe,[de[3]||(de[3]=v("strong",null,"Report Type:",-1)),M(" "+K(d.value.reportType),1)]),v("div",zGe,[de[4]||(de[4]=v("strong",null,"Total Records:",-1)),M(" "+K(d.value.totalRecords),1)]),d.value.dateRange?(U(),me("div",KGe,[de[5]||(de[5]=v("strong",null,"Date Range:",-1)),M(" "+K(d.value.dateRange.from)+" - "+K(d.value.dateRange.to),1)])):ge("",!0),f.value&&d.value.filename?(U(),me("div",WGe,[de[6]||(de[6]=v("strong",null,"File:",-1)),M(" "+K(d.value.filename),1)])):ge("",!0)]),_:1})]),_:1})])):ge("",!0)])]),_:1})]),_:1})):A.value.length>0?(U(),pe(ye,{key:1,"no-gutters":""},{default:u(()=>[l(G,{cols:"12",class:"scroll-element mt-2",style:{"padding-bottom":"20px"}},{default:u(()=>[l(Ce,{headers:p.value,items:A.value,class:"elevation-1 ma-2",density:"comfortable"},null,8,["headers","items"])]),_:1})]),_:1})):(U(),pe(ye,{key:2,"no-gutters":"",style:{height:"calc(100% - 60px)"}},{default:u(()=>[l(G,{cols:"12",class:"d-flex justify-center align-center",style:{height:"100%"}},{default:u(()=>[v("div",jGe,[l(_e,{size:"64",color:"primary",class:"mb-4"},{default:u(()=>[...de[7]||(de[7]=[M("mdi-chart-line",-1)])]),_:1}),de[8]||(de[8]=v("div",{class:"text-h6 mb-2"},"Generate Reports",-1)),de[9]||(de[9]=v("div",{class:"text-body-2 text-medium-emphasis"},"Configure report settings and generate comprehensive pharmacy reports",-1))])]),_:1})]),_:1}))]),_:1})])]),_:1})]),_:1}),l(De,{modelValue:n.value,"onUpdate:modelValue":de[0]||(de[0]=Te=>n.value=Te),class:"elevation-24",color:"success"},{default:u(()=>[M(K(a.value),1)]),_:1},8,["modelValue"]),l(De,{modelValue:r.value,"onUpdate:modelValue":de[1]||(de[1]=Te=>r.value=Te),class:"elevation-24",color:"error"},{default:u(()=>[M(K(s.value),1)]),_:1},8,["modelValue"])]),_:1})]),_:1})}}},YGe=Xt(qGe,[["__scopeId","data-v-a25da5a6"]]),YE=""+new URL("images/login_screen-CYaYXXaw.png",import.meta.url).href,XGe=""+new URL("images/login_screen_card-37SK0J6l.png",import.meta.url).href,JGe=""+new URL("google-ax7zTtAP.webp",import.meta.url).href,ZGe={key:0,class:"window-controls"},eze={class:"d-flex justify-center align-center",style:{height:"100%",padding:"40px"}},tze={class:"card-content"},nze={class:"terms-text mb-4 text-center text-caption"},aze={__name:"login-page",setup(e){const t=Rn(),n=Al(),a=Ua(),r=ae(()=>t.state.auth.loading),s=ae(()=>t.state.auth.error),o=V(!1),i=ae(()=>t.getters["auth/isAuthenticated"]);Ke(i,(m,h)=>{if(a&&m&&!h){console.log("Google authentication completed, clearing desktop session and redirecting to passcode login..."),localStorage.removeItem("desktopSessionToken"),localStorage.removeItem("desktopPermissions"),localStorage.removeItem("desktopIsAdmin"),localStorage.removeItem("desktopUserName"),localStorage.removeItem("desktopUserId"),localStorage.removeItem("desktopFeatures");const p=t.getters["auth/currentUser"];if(p&&p.metadata){const y=p.metadata.creationTime===p.metadata.lastSignInTime;sessionStorage.setItem("isFirstTimeSignIn",y?"true":"false")}n.replace("/desktop/passcode")}},{immediate:!1}),un(()=>{if(!a){const p=new URLSearchParams(window.location.search).get("endpoint"),y=p?`/web/login?endpoint=${encodeURIComponent(p)}`:"/web/login";n.replace(y);return}const m=!!localStorage.getItem("desktopSessionToken");i.value&&(m?n.replace("/home"):n.replace("/desktop/passcode"))});const c=async()=>{try{console.log("Starting authentication process..."),localStorage.removeItem("desktopSessionToken"),localStorage.removeItem("desktopPermissions"),localStorage.removeItem("desktopIsAdmin"),localStorage.removeItem("desktopUserName"),localStorage.removeItem("desktopUserId"),localStorage.removeItem("desktopFeatures");const m=await t.dispatch("auth/signInWithGoogle");t.getters["auth/isAuthenticated"]?(sessionStorage.setItem("isFirstTimeSignIn",m?"true":"false"),await n.replace("/desktop/passcode")):console.error("Authentication failed or user not authenticated after attempt.")}catch(m){console.error("Component caught authentication error:",m)}},A=()=>{try{if(window.require){const{shell:m}=window.require("electron");m.openExternal("https://www.evamed.in/terms")}else window.open("https://www.evamed.in/terms","_blank")}catch(m){console.error("Error opening terms link:",m),window.open("https://www.evamed.in/terms","_blank")}},d=async()=>{if(!(!a||o.value))try{if(o.value=!0,window.require){const{ipcRenderer:m}=window.require("electron"),h=await m.invoke("toggle-fullscreen");if(h.success)console.log(`Fullscreen toggled: ${h.wasFullscreen}  ${h.isFullscreen}`),h.isFullscreen||console.log("Exited fullscreen - native window controls now available");else throw new Error(h.error||"Failed to exit fullscreen")}else throw new Error("Electron IPC not available")}catch(m){console.error("Failed to exit fullscreen:",m)}finally{o.value=!1}},f=async()=>{if(!(!a||o.value))try{if(o.value=!0,window.require){const{ipcRenderer:m}=window.require("electron"),h=await m.invoke("window-close");if(h.success)console.log("Window close initiated");else throw new Error(h.error||"Failed to close window")}else throw new Error("Electron IPC not available")}catch(m){console.error("Failed to close window:",m)}finally{o.value=!1}};return(m,h)=>{const p=I("v-icon"),y=I("v-btn"),g=I("v-tooltip"),w=I("v-img"),b=I("v-alert"),x=I("v-card");return U(),me("div",{class:"login-wrapper login-page-root",style:Rt({backgroundImage:`url(${$e(YE)})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",width:"100vw",height:"100vh"})},[$e(a)?(U(),me("div",ZGe,[l(g,{text:"Exit Fullscreen",location:"bottom"},{activator:u(({props:T})=>[l(y,Ue(T,{icon:"",size:"small",variant:"outlined",class:"control-btn",onClick:d,disabled:o.value}),{default:u(()=>[l(p,null,{default:u(()=>[...h[0]||(h[0]=[M("mdi-fullscreen-exit",-1)])]),_:1})]),_:1},16,["disabled"])]),_:1}),l(g,{text:"Close",location:"bottom"},{activator:u(({props:T})=>[l(y,Ue(T,{icon:"",size:"small",variant:"outlined",class:"control-btn close-btn",onClick:f,disabled:o.value}),{default:u(()=>[l(p,null,{default:u(()=>[...h[1]||(h[1]=[M("mdi-close",-1)])]),_:1})]),_:1},16,["disabled"])]),_:1})])):ge("",!0),v("div",eze,[l(x,{elevation:"2",class:"login-card",rounded:"xl"},{default:u(()=>[l(w,{src:$e(XGe),cover:"",height:"300",class:"card-image"},null,8,["src"]),v("div",tze,[v("p",nze,[h[2]||(h[2]=M(" By continuing, you agree to our ",-1)),v("a",{href:"#",onClick:pn(A,["prevent"]),class:"terms-link"},"Terms and Conditions"),h[3]||(h[3]=M(". ",-1))]),$e(a)?(U(),pe(y,{key:0,block:"",variant:"elevated",size:"large",loading:r.value,disabled:r.value,onClick:c,class:"text-none btn-hover-enhanced login-button",color:"primary"},{prepend:u(()=>[l(w,{src:$e(JGe),height:"24",width:"24",contain:""},null,8,["src"])]),default:u(()=>[h[4]||(h[4]=M(" Sign in with Google ",-1))]),_:1},8,["loading","disabled"])):ge("",!0),s.value?(U(),pe(b,{key:1,type:"error",variant:"tonal",density:"compact",class:"mt-4 text-left text-caption",closable:""},{default:u(()=>[M(K(s.value),1)]),_:1})):ge("",!0)])]),_:1})])],4)}}},rze=Xt(aze,[["__scopeId","data-v-42131e5c"]]),sze={name:"WelcomePage",setup(){const e=Al(),t=V(!0),n=V(0),a=V({first_name:"",last_name:"",registrationNumber:"",phone:"",pincode:"",specialization:""}),r=V(null),s=V(!1),o=V(null),i=[f=>!!f||"this information is required"];return un(()=>{t.value=!0}),{showDialog:t,currentStep:n,userProfile:a,profileForm:r,isSubmitting:s,profileError:o,doctorSpecialization:Nw,nameRules:gr,regNumberRules:zM,phoneRules:mh,pincodeRules:Vve,specializationRules:i,submitProfile:async()=>{const{valid:f}=await r.value.validate();if(!f){o.value="Please fill in all required fields correctly.";return}s.value=!0,o.value=null;try{const m=Ks.currentUser;if(!m||!m.email)throw new Error("User authentication required");const h={first_name:a.value.first_name,last_name:a.value.last_name,email:m.email,phone:a.value.phone,address:"",city:"",state:"",country:"India",pincode:a.value.pincode,registration_number:a.value.registrationNumber,specialization:a.value.specialization,premium_level:"basic",premium_end_date:null,max_devices:1,auth_id:m.uid};console.log("=== DETAILED API PAYLOAD DEBUG ==="),console.log("Full payload:",JSON.stringify(h,null,2)),console.log("Registration number:",h.registration_number),console.log("Specialization:",h.specialization),console.log("Auth ID:",h.auth_id),console.log("=====================================");const p=await m.getIdToken(),g=await Ir.post("https://api.origamimed.com/users/",h,{headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"}});if(g.status===200||g.status===201)console.log("User profile created successfully"),n.value=1;else throw new Error("Failed to create user profile")}catch(m){if(console.error("Profile submission error:",m),m.response){const h=m.response.status;h>=400&&h<500?o.value="Please check your information and try again.":o.value="Server error. Please try again later."}else m.request?o.value="Network error. Please check your connection and try again.":o.value=m.message||"Something went wrong. Please try again."}finally{s.value=!1}},goToHome:()=>{t.value=!1,setTimeout(()=>{e.push("/home")},200)},openVideos:()=>{try{if(window.require){const{shell:f}=window.require("electron");f.openExternal("https://www.evamed.in/videos")}else window.open("https://www.evamed.in/videos","_blank")}catch(f){console.error("Error opening videos link:",f),window.open("https://www.evamed.in/videos","_blank")}}}}};function oze(e,t,n,a,r,s){const o=I("v-toolbar-title"),i=I("v-toolbar"),c=I("v-stepper-item"),A=I("v-divider"),d=I("v-stepper-header"),f=I("v-text-field"),m=I("v-col"),h=I("v-combobox"),p=I("v-row"),y=I("v-form"),g=I("v-alert"),w=I("v-card-text"),b=I("v-spacer"),x=I("v-btn"),T=I("v-card-actions"),F=I("v-stepper-window-item"),k=I("v-list-item-title"),S=I("v-list-item-subtitle"),E=I("v-list-item"),C=I("v-list"),D=I("v-stepper-window"),P=I("v-stepper"),O=I("v-card"),H=I("v-dialog");return U(),me("div",null,[l(H,{modelValue:a.showDialog,"onUpdate:modelValue":t[10]||(t[10]=ie=>a.showDialog=ie),persistent:"","max-width":"700px","overlay-opacity":"0.7"},{default:u(()=>[l(O,null,{default:u(()=>[l(i,{color:"primary",dark:"",flat:"",class:"brand-blue-toolbar"},{default:u(()=>[l(o,null,{default:u(()=>[...t[11]||(t[11]=[M("Welcome to evamed!",-1)])]),_:1})]),_:1}),l(P,{modelValue:a.currentStep,"onUpdate:modelValue":t[9]||(t[9]=ie=>a.currentStep=ie),"alt-labels":""},{default:u(()=>[l(d,null,{default:u(()=>[l(c,{complete:a.currentStep>0,step:"1",title:"Setup Profile"},null,8,["complete"]),l(A),l(c,{step:"2",title:"Get Started"})]),_:1}),l(D,{modelValue:a.currentStep,"onUpdate:modelValue":t[8]||(t[8]=ie=>a.currentStep=ie)},{default:u(()=>[l(F,{value:0},{default:u(()=>[l(w,{class:"pt-4"},{default:u(()=>[t[13]||(t[13]=v("h2",{class:"text-h5 mb-3"},"Let's set up your profile with evamed.",-1)),t[14]||(t[14]=v("p",{class:"mb-4"},"Please provide your professional details to get started:",-1)),l(y,{ref:"profileForm",onSubmit:pn(a.submitProfile,["prevent"])},{default:u(()=>[l(p,{"no-gutters":"",class:"mx-0"},{default:u(()=>[l(m,{cols:"12",md:"6",class:"pb-2 pr-md-2"},{default:u(()=>[l(f,{modelValue:a.userProfile.first_name,"onUpdate:modelValue":t[0]||(t[0]=ie=>a.userProfile.first_name=ie),label:"First Name",rules:a.nameRules,variant:"outlined",density:"compact",required:""},null,8,["modelValue","rules"])]),_:1}),l(m,{cols:"12",md:"6",class:"pb-2 pl-md-2"},{default:u(()=>[l(f,{modelValue:a.userProfile.last_name,"onUpdate:modelValue":t[1]||(t[1]=ie=>a.userProfile.last_name=ie),label:"Last Name",rules:a.nameRules,variant:"outlined",density:"compact",required:""},null,8,["modelValue","rules"])]),_:1}),l(m,{cols:"12",md:"6",class:"pb-2 pr-md-2"},{default:u(()=>[l(f,{modelValue:a.userProfile.registrationNumber,"onUpdate:modelValue":t[2]||(t[2]=ie=>a.userProfile.registrationNumber=ie),label:"Medical Registration Number",rules:a.regNumberRules,variant:"outlined",density:"compact",required:""},null,8,["modelValue","rules"])]),_:1}),l(m,{cols:"12",md:"6",class:"pb-2 pl-md-2"},{default:u(()=>[l(f,{modelValue:a.userProfile.phone,"onUpdate:modelValue":t[3]||(t[3]=ie=>a.userProfile.phone=ie),label:"Mobile Number",rules:a.phoneRules,variant:"outlined",density:"compact",required:""},null,8,["modelValue","rules"])]),_:1}),l(m,{cols:"12",md:"6",class:"pb-2 pr-md-2"},{default:u(()=>[l(f,{modelValue:a.userProfile.pincode,"onUpdate:modelValue":t[4]||(t[4]=ie=>a.userProfile.pincode=ie),label:"Practice Pincode",rules:a.pincodeRules,variant:"outlined",density:"compact",required:""},null,8,["modelValue","rules"])]),_:1}),l(m,{cols:"12",md:"6",class:"pb-2 pl-md-2"},{default:u(()=>[l(h,{modelValue:a.userProfile.specialization,"onUpdate:modelValue":t[5]||(t[5]=ie=>a.userProfile.specialization=ie),items:a.doctorSpecialization,label:"Specialization",rules:a.specializationRules,variant:"outlined",density:"compact",required:""},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1},8,["onSubmit"]),a.profileError?(U(),pe(g,{key:0,type:"error",variant:"tonal",density:"compact",class:"mt-4",closable:"","onClick:close":t[6]||(t[6]=ie=>a.profileError=null)},{default:u(()=>[M(K(a.profileError),1)]),_:1})):ge("",!0),l(g,{type:"info",variant:"tonal",density:"compact",class:"mt-4",icon:"mdi-information"},{default:u(()=>[...t[12]||(t[12]=[v("small",null," This information is shared with evamed. It is used to verify your identity and ensure only licensed practitioners can access the software. ",-1)])]),_:1})]),_:1}),l(T,{class:"px-6 pb-6"},{default:u(()=>[l(b),l(x,{color:"primary",class:"btn-hover-base text-none",onClick:a.submitProfile,loading:a.isSubmitting,disabled:a.isSubmitting},{default:u(()=>[...t[15]||(t[15]=[M(" Continue ",-1)])]),_:1},8,["onClick","loading","disabled"])]),_:1})]),_:1}),l(F,{value:1},{default:u(()=>[l(w,{class:"pt-6"},{default:u(()=>[t[21]||(t[21]=v("h2",{class:"text-h5 mb-4"},"Let's get started",-1)),t[22]||(t[22]=v("p",{class:"mb-4"},"We're excited to have you onboard! Choose how you'd like to begin:",-1)),l(C,null,{default:u(()=>[l(E,{"prepend-icon":"mdi-play-circle"},{default:u(()=>[l(k,null,{default:u(()=>[...t[16]||(t[16]=[M("Watch demo videos",-1)])]),_:1}),l(S,null,{default:u(()=>[t[17]||(t[17]=M("View our tutorials and take a demo at ",-1)),v("a",{href:"#",onClick:t[7]||(t[7]=pn((...ie)=>a.openVideos&&a.openVideos(...ie),["prevent"])),class:"video-link"},"our website"),t[18]||(t[18]=M(".",-1))]),_:1})]),_:1}),l(E,{"prepend-icon":"mdi-account-cog"},{default:u(()=>[l(k,null,{default:u(()=>[...t[19]||(t[19]=[M("Setup your practice",-1)])]),_:1}),l(S,null,{default:u(()=>[...t[20]||(t[20]=[M("Configure your doctor, clinic and print details in the Admin tab.",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),l(T,{class:"px-6 pb-6"},{default:u(()=>[l(b),l(x,{color:"primary",class:"btn-hover-base text-none",onClick:a.goToHome},{default:u(()=>[...t[23]||(t[23]=[M(" GET STARTED ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])])}const ize=Xt(sze,[["render",oze],["__scopeId","data-v-57136c3e"]]),lze={class:"splash-screen"},uze={class:"splash-content"},cze={class:"logo-container"},dze={class:"loading-container"},Aze={key:0,class:"timeout-message"},fze={__name:"SplashScreen",setup(e){const t=V(!1);let n=null;return un(()=>{n=setTimeout(()=>{t.value=!0},3e3)}),Ui(()=>{n&&clearTimeout(n)}),(a,r)=>{const s=I("v-img"),o=I("v-progress-linear"),i=I("v-alert");return U(),me("div",lze,[v("div",uze,[v("div",cze,[l(s,{src:$e(z_),alt:"evamed Logo",width:"120",height:"120",class:"logo-image"},null,8,["src"])]),r[2]||(r[2]=v("h1",{class:"app-name"},"evamed",-1)),v("div",dze,[r[0]||(r[0]=v("p",{class:"loading-text"},"Initializing...",-1)),l(o,{indeterminate:"",color:"primary",height:"4",rounded:"",class:"loading-bar"})]),t.value?(U(),me("div",Aze,[l(i,{type:"info",variant:"tonal",density:"compact",class:"mt-4"},{default:u(()=>[...r[1]||(r[1]=[M(" Taking longer than usual. Please wait... ",-1)])]),_:1})])):ge("",!0)])])}}},mze=Xt(fze,[["__scopeId","data-v-ff0066be"]]),vze={class:"splash-page"},hze={__name:"splash-page",setup(e){return(t,n)=>(U(),me("div",vze,[l(mze)]))}},pze=Xt(hze,[["__scopeId","data-v-bb0f5d68"]]),gze="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z'%20/%3e%3c/svg%3e",yze={__name:"mobile-home",setup(e){const t=V("queue"),n=V(!1),a=r=>{t.value=r,setTimeout(()=>{n.value=!1},150)};return(r,s)=>{const o=I("v-app-bar-title"),i=I("v-spacer"),c=I("v-icon"),A=I("v-btn"),d=I("v-app-bar"),f=I("v-card-title"),m=I("v-col"),h=I("v-row"),p=I("v-card"),y=I("v-list-item-title"),g=I("v-list-item"),w=I("v-list"),b=I("v-navigation-drawer"),x=I("v-main");return U(),me(We,null,[l(d,{density:"compact",color:"primary",elevation:"2",class:"app-header"},{default:u(()=>[l(o,{class:"text-h6 font-weight-medium"},{default:u(()=>[...s[5]||(s[5]=[M(" EvaMed ",-1)])]),_:1}),l(i),l(A,{icon:"",variant:"text",onClick:s[0]||(s[0]=pn(T=>n.value=!n.value,["stop"])),class:"btn-hover-base"},{default:u(()=>[l(c,null,{default:u(()=>[...s[6]||(s[6]=[v("img",{src:gze,alt:"Menu",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1}),l(b,{modelValue:n.value,"onUpdate:modelValue":s[4]||(s[4]=T=>n.value=T),location:"bottom",temporary:"",class:"navigation-drawer",height:"280"},{default:u(()=>[l(p,{rounded:"lg",color:"surfaceContainer",class:"navigation-card"},{default:u(()=>[l(h,{"no-gutters":""},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(p,{rounded:"0",class:"pa-1",color:"surfaceContainerHigh"},{default:u(()=>[l(h,{"no-gutters":""},{default:u(()=>[l(m,{cols:"11"},{default:u(()=>[l(f,{class:"pa-0 pl-2"},{default:u(()=>[...s[7]||(s[7]=[M("Navigation",-1)])]),_:1})]),_:1}),l(m,{cols:"1"},{default:u(()=>[l(A,{icon:"",size:"x-small",onClick:s[1]||(s[1]=T=>n.value=!1)},{default:u(()=>[l(c,null,{default:u(()=>[...s[8]||(s[8]=[v("img",{src:ou,alt:"close",style:{filter:"invert(1)"}},null,-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(h,{"no-gutters":""},{default:u(()=>[l(m,{cols:"12"},{default:u(()=>[l(p,{flat:"",class:"ma-2",color:"surfaceContainer"},{default:u(()=>[l(w,{class:"nav-list"},{default:u(()=>[l(g,{class:ct([{"active-item":t.value==="home"},"nav-item btn-hover-base"]),onClick:s[2]||(s[2]=T=>a("home")),ripple:""},{prepend:u(()=>[l(c,{color:t.value==="home"?"primary":"grey-darken-1",class:"nav-icon"},{default:u(()=>[...s[9]||(s[9]=[M(" mdi-home-outline ",-1)])]),_:1},8,["color"])]),default:u(()=>[l(y,{class:ct([{"active-title":t.value==="home"},"nav-title"])},{default:u(()=>[...s[10]||(s[10]=[M(" Home ",-1)])]),_:1},8,["class"])]),_:1},8,["class"]),l(g,{class:ct([{"active-item":t.value==="queue"},"nav-item btn-hover-base"]),onClick:s[3]||(s[3]=T=>a("queue")),ripple:""},{prepend:u(()=>[l(c,{color:t.value==="queue"?"primary":"grey-darken-1",class:"nav-icon"},{default:u(()=>[...s[11]||(s[11]=[M(" mdi-clipboard-list-outline ",-1)])]),_:1},8,["color"])]),default:u(()=>[l(y,{class:ct([{"active-title":t.value==="queue"},"nav-title"])},{default:u(()=>[...s[12]||(s[12]=[M(" Queue ",-1)])]),_:1},8,["class"])]),_:1},8,["class"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(x,{class:"pt-0"},{default:u(()=>[t.value==="home"?(U(),me(We,{key:0},[M(" This is home ")],64)):ge("",!0),t.value==="queue"?(U(),pe(SH,{key:1})):ge("",!0)]),_:1})],64)}}},_ze=Xt(yze,[["__scopeId","data-v-dd4f3937"]]),wze={class:"d-flex justify-center align-center",style:{height:"100%"}},bze={class:"text-center"},xze={key:1,class:"d-flex justify-center align-center pa-4",style:{"min-height":"50vh"}},Cze={class:"text-center"},Sze={class:"d-flex justify-center align-center pa-4",style:{"min-height":"30vh"}},Eze={class:"text-center"},Bze={__name:"patient-detail-mobile",setup(e){const t=zf(),n=Al(),a=V(!0),r=V(!1),s=V(null),o=V(0),i=V(!1),c=V(""),A=V("info"),d=V(4e3),f=V(navigator.onLine),m=V(t.params.id),h=V({}),p=V([]),y=V({}),g=(j,J="Unknown")=>{console.error(`Mobile Patient Detail Error (${J}):`,j),j?.code==="NETWORK_ERROR"||j?.response?.status>=500||!j?.response||j?.message?.includes("timeout")?s.value=`${J} error. Please check your connection and try again.`:(i.value=!0,c.value=`${J}: ${j?.response?.data?.message||j.message||"Unknown error occurred"}`,A.value="error")},w=j=>{i.value=!0,c.value=j,A.value="success",d.value=3e3},b=j=>{i.value=!0,c.value=j,A.value="warning",d.value=5e3},x=ae(()=>{try{return h.value?.name||"Unknown Patient"}catch(j){return console.warn("Error accessing patient name:",j),"Unknown Patient"}}),T=(j,J=15e3)=>Promise.race([j,new Promise((ue,ne)=>setTimeout(()=>ne(new Error("Request timeout")),J))]),F=()=>{try{window.history.length>1?n.back():n.push("/patients")}catch(j){console.error("Navigation error:",j),n.push("/patients")}},k=async()=>{try{if(!m.value)throw new Error("Patient ID is required");const j=await T(tT(m.value));if(!j?.data)throw new Error("No patient data received");h.value=Qn.cloneDeep(j.data),console.log("Patient details fetched:",h.value)}catch(j){g(j,"Failed to fetch patient details"),h.value={name:"Unknown Patient"}}},S=async()=>{try{if(!h.value?.id)throw new Error("Patient ID is required for consultations");const j=await T(t_(h.value.id));if(!j?.data){console.warn("No consultation data received"),p.value=[];return}p.value=Qn.cloneDeep(j.data),console.log("Consultations fetched:",p.value)}catch(j){g(j,"Failed to fetch consultations"),p.value=[]}},E=async()=>{try{await n.isReady();const j=t.params.id;if(!j)throw new Error("Patient ID not found in URL");if(!/^[a-zA-Z0-9-]+$/.test(j))throw new Error("Invalid patient ID format");m.value=j,console.log("Patient ID extracted from URL:",m.value)}catch(j){g(j,"Invalid URL parameters"),n.push("/patients")}},C=ae(()=>{try{return!Array.isArray(p.value)||p.value.length===0?!1:p.value.some(j=>{try{if(!j?.createdAt)return console.warn("Consultation missing createdAt:",j),!1;const J=ar(j.createdAt);return console.log("Created Date",j.createdAt,"Checking creation date in IST:",J,"against today:",rC),J===rC}catch(J){return console.warn("Error processing consultation date:",J),!1}})}catch(j){return console.error("Error checking consultation presence:",j),!1}}),D=async()=>{try{if(C.value){const j=p.value.find(J=>{try{return J?.createdAt&&ar(J.createdAt)===rC}catch(ue){return console.warn("Error processing consultation for selection:",ue),!1}});y.value=j||{id:"0"},j?console.log("Today's consultation selected:",j):console.warn("Today's consultation found but could not be selected")}else console.log("No consultation found for today"),y.value={id:"0"}}catch(j){console.error("Error selecting today's consultation:",j),y.value={id:"0"}}},P=async()=>{if(!r.value)try{r.value=!0,await Promise.allSettled([k(),S()]),await D(),o.value+=1,w("Data refreshed successfully")}catch(j){g(j,"Failed to refresh data")}finally{r.value=!1}},O=j=>{console.error("Consultation component error:",j),g(j,"Consultation loading failed"),o.value+=1},H=()=>{f.value=!0,w("Connection restored"),setTimeout(()=>{P()},1e3)},ie=()=>{f.value=!1,b("You are now offline. Data may not be current.")},Ae=j=>{j.touches.length>1&&j.preventDefault()};return tu(async()=>{try{a.value=!0,console.log("Patient detail mobile page initializing..."),await E(),await k(),await S(),await D()}catch(j){g(j,"Failed to initialize page")}finally{a.value=!1}}),un(()=>{try{window.addEventListener("online",H),window.addEventListener("offline",ie),document.addEventListener("touchstart",Ae,{passive:!1});const j=document.querySelector("meta[name=viewport]");j&&j.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"),console.log("Mobile patient detail page mounted successfully")}catch(j){console.error("Error setting up mobile optimizations:",j)}}),da(()=>{try{window.removeEventListener("online",H),window.removeEventListener("offline",ie),document.removeEventListener("touchstart",Ae),a.value=!1,r.value=!1,s.value=null,i.value=!1,console.log("Mobile patient detail cleanup completed")}catch(j){console.error("Cleanup error:",j)}}),Ke(()=>t.params.id,async j=>{j&&j!==m.value&&(m.value=j,await P())}),(j,J)=>{const ue=I("v-alert"),ne=I("v-icon"),Y=I("v-app-bar-nav-icon"),te=I("v-toolbar-title"),L=I("v-app-bar"),N=I("v-progress-circular"),q=I("v-card"),Q=I("v-main"),ee=I("v-spacer"),z=I("v-btn"),X=I("v-snackbar");return U(),me(We,null,[s.value?(U(),pe(ue,{key:0,type:"error",variant:"tonal",closable:"","onClick:close":J[0]||(J[0]=le=>s.value=null),class:"ma-2",density:"compact"},{default:u(()=>[M(K(s.value),1)]),_:1})):ge("",!0),a.value?(U(),me(We,{key:1},[l(L,{density:"compact"},{default:u(()=>[l(Y,null,{default:u(()=>[l(ne,{onClick:F,icon:"mdi-chevron-left",size:"large"})]),_:1}),l(te,{class:"text-h6"},{default:u(()=>[...J[3]||(J[3]=[M("Loading...",-1)])]),_:1})]),_:1}),l(Q,{class:"pt-0"},{default:u(()=>[l(q,{color:"surfaceContainer",flat:"",style:{height:"100vh"}},{default:u(()=>[v("div",wze,[v("div",bze,[l(N,{indeterminate:"",color:"primary",size:"64"}),J[4]||(J[4]=v("div",{class:"mt-4 text-subtitle-1"},"Loading patient details...",-1))])])]),_:1})]),_:1})],64)):s.value?ge("",!0):(U(),me(We,{key:2},[l(L,{density:"compact",class:"mobile-app-bar"},{default:u(()=>[l(Y,null,{default:u(()=>[l(ne,{onClick:F,icon:"mdi-chevron-left",size:"large"})]),_:1}),l(te,{class:"text-h6 patient-title"},{default:u(()=>[M(K(x.value),1)]),_:1}),l(ee),l(z,{icon:"",onClick:P,loading:r.value,disabled:r.value,size:"small"},{default:u(()=>[l(ne,null,{default:u(()=>[...J[5]||(J[5]=[M("mdi-refresh",-1)])]),_:1})]),_:1},8,["loading","disabled"])]),_:1}),l(Q,{class:"pt-0"},{default:u(()=>[l(q,{color:"surfaceContainer",flat:"",class:"mobile-content"},{default:u(()=>[f.value?ge("",!0):(U(),pe(ue,{key:0,type:"warning",variant:"tonal",density:"compact",class:"ma-2"},{default:u(()=>[...J[6]||(J[6]=[M(" You are offline. Data may not be current. ",-1)])]),_:1})),!y.value?.id||y.value.id==="0"?(U(),me("div",xze,[v("div",Cze,[l(ne,{size:"64",color:"grey-lighten-1",class:"mb-4"},{default:u(()=>[...J[7]||(J[7]=[M("mdi-calendar-blank",-1)])]),_:1}),J[9]||(J[9]=v("div",{class:"text-h6 mb-2"},"No consultation today",-1)),J[10]||(J[10]=v("div",{class:"text-body-2 text-grey"},"No consultation has been created for today.",-1)),l(z,{variant:"outlined",onClick:P,class:"mt-4",loading:r.value},{default:u(()=>[...J[8]||(J[8]=[M(" Refresh ",-1)])]),_:1},8,["loading"])])])):(U(),pe(vS,{key:2},{default:u(()=>[(U(),pe(YH,{consultation:y.value,patient:h.value,key:`${y.value.id}-${o.value}`,onError:O},null,8,["consultation","patient"]))]),fallback:u(()=>[v("div",Sze,[v("div",Eze,[l(N,{indeterminate:"",color:"primary",size:"48"}),J[11]||(J[11]=v("div",{class:"mt-3 text-body-2"},"Loading consultation...",-1))])])]),_:1}))]),_:1})]),_:1})],64)),l(X,{modelValue:i.value,"onUpdate:modelValue":J[2]||(J[2]=le=>i.value=le),color:A.value,timeout:d.value,location:"bottom",class:"mobile-snackbar"},{actions:u(()=>[l(z,{variant:"text",size:"small",onClick:J[1]||(J[1]=le=>i.value=!1)},{default:u(()=>[...J[12]||(J[12]=[M(" Close ",-1)])]),_:1})]),default:u(()=>[M(K(c.value)+" ",1)]),_:1},8,["modelValue","color","timeout"])],64)}}},kze=Xt(Bze,[["__scopeId","data-v-fd53b52b"]]),Tze={key:0,class:"window-controls"},Ize={class:"passcode-card"},Fze={key:0,class:"loading-section"},Pze={key:1,class:"user-section"},Dze={key:0,class:"user-selector mb-4"},Uze={class:"text-white text-caption"},Rze={class:"d-flex align-center user-selection-content"},Nze={class:"text-white text-caption"},Vze={class:"user-selection-text"},Lze={class:"user-avatar"},Mze={class:"welcome-text"},Oze={key:1,class:"subtitle"},Hze={class:"passcode-input-wrapper"},$ze=["type","disabled"],Qze={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Gze={key:1,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},zze={key:0,class:"error-message"},Kze=["disabled"],Wze={key:0,class:"loading-spinner"},jze={key:1},qze={key:3,class:"footer-section"},Yze={__name:"passcode-login",setup(e){const t=Rn(),n=Al(),a=zf(),{loginWithPasscode:r,resetAllAuthState:s}=dh(),o=Ua(),i=V(!1),c=V(""),A=V(!1),d=V(null),f=V(!0),m=V(""),h=V(null),p=V(!1),y=V(!0),g=V(!1),w=()=>{if(g.value)return;const Y=document.querySelector(".passcode-input");Y&&document.activeElement!==Y&&(c.value="",Y.value="",Y.setAttribute("value",""),Y.removeAttribute("data-autofilled"))};Ke(()=>a.path,Y=>{Y==="/desktop/passcode"&&(c.value="",g.value=!1,w())},{immediate:!0}),Ke(c,(Y,te)=>{!g.value&&Y&&Y.length>1&&(!te||te.length===0)&&xn(()=>{if(!g.value){const L=document.querySelector(".passcode-input");L&&document.activeElement!==L&&(console.log("Clearing browser autofilled passcode"),w())}})},{immediate:!1});const b=V([]),x=V(null),T=V(!1),F=V(""),k=ae(()=>t.getters["auth/currentUser"]),S=ae(()=>k.value?.email||""),E=ae(()=>k.value?.displayName||""),C=ae(()=>{if(x.value){const Y=b.value.find(te=>te.id===x.value);if(Y)return Y.name||Y.email||"User"}return m.value||E.value||"User"}),D=Y=>!Y||Y==="User"?"?":Y.split(" ").map(te=>te[0]).join("").toUpperCase().slice(0,2),P=async()=>{T.value=!0;try{let Y;try{Y=await dt.get("/desktop/auth/users")}catch{Y=await dt.get("/admin/users")}const te=Y.data?.users||(Array.isArray(Y.data)?Y.data:[]);if(Array.isArray(te)&&te.length>0){b.value=te;const L=b.value.find(N=>N.isAdmin===!0)||b.value[0];L&&(x.value=L.id,F.value=L.email||"",h.value=L.id,m.value=L.name||"User")}}catch(Y){console.error("Failed to fetch users:",Y)}finally{T.value=!1}},O=ae(()=>b.value.map(Y=>{const te=Y.name||Y.email||"Unknown User",L=Y.isAdmin?`${te} (Admin)`:te;return{value:Y.id,text:L,email:Y.email,raw:Y}})),H=Y=>{const te=b.value.find(L=>L.id===Y);te&&(h.value=te.id,m.value=te.name||"User",F.value=te.email||"")};let ie=null,Ae=null;un(async()=>{if(c.value="",g.value=!1,f.value=!0,await xn(),!k.value||!S.value){console.log("No Google auth found, redirecting to login..."),setTimeout(()=>{n.replace("/login")},100);return}w(),await P();try{const Y=sessionStorage.getItem("selectedUserId");if(Y){const te=parseInt(Y),L=b.value.find(N=>N.id===te);L&&(x.value=te,h.value=te,m.value=L.name||L.email||"User",F.value=L.email||"")}}catch(Y){console.error("Error verifying Google user:",Y)}finally{f.value=!1,await xn();const Y=document.querySelector(".passcode-input");if(Y){Ae=Y,c.value="",Y.value="";const te=()=>{g.value=!0};Y.addEventListener("keydown",te),Y.addEventListener("keypress",te),Y.addEventListener("input",q=>{q.inputType&&(q.inputType.includes("insert")||q.inputType.includes("delete"))&&te(),document.activeElement===Y&&te()}),Y.addEventListener("focus",()=>{setTimeout(()=>{!g.value&&(Y.value||c.value)&&document.activeElement!==Y&&(console.log("Clearing autofilled passcode on focus"),w())},100)}),Y.addEventListener("animationstart",q=>{(q.animationName==="onAutoFillStart"||q.target.matches(":-webkit-autofill"))&&!g.value&&(console.log("Detected autofill animation, clearing passcode"),setTimeout(()=>{g.value||w()},100))});const L=new MutationObserver(q=>{!g.value&&document.activeElement!==Y&&(Y.value||c.value)&&(console.log("MutationObserver detected value change, clearing passcode"),w())});ie=L,L.observe(Y,{attributes:!0,attributeFilter:["value"],childList:!1,subtree:!1}),[()=>{!g.value&&document.activeElement!==Y&&w()},()=>{!g.value&&document.activeElement!==Y&&w()},()=>{!g.value&&document.activeElement!==Y&&w()}].forEach((q,Q)=>{setTimeout(q,(Q+1)*200)})}y.value=!1}}),Ui(()=>{if(ie&&ie.disconnect(),Ae){const Y=Ae.cloneNode(!0);Ae.parentNode?.replaceChild(Y,Ae)}});const j=async()=>{if(!c.value){d.value="Please enter your passcode";return}const Y=x.value||h.value;if(!Y){d.value="Please select a user";return}A.value=!0,d.value=null;try{if((await r(c.value,Y)).success){sessionStorage.removeItem("selectedUserId");const L=sessionStorage.getItem("isFirstTimeSignIn")==="true";sessionStorage.removeItem("isFirstTimeSignIn");const N=L?"/welcome":"/home";n.replace(N)}}catch(te){d.value=te.response?.data?.error||te.message||"Invalid passcode. Please try again.",c.value=""}finally{A.value=!1}},J=async()=>{try{s(),await t.dispatch("auth/signOut")}catch(Y){console.error("Error signing out:",Y)}n.replace("/login")},ue=async()=>{if(!(!o||i.value))try{if(i.value=!0,window.require){const{ipcRenderer:Y}=window.require("electron"),te=await Y.invoke("toggle-fullscreen");if(te.success)console.log(`Fullscreen toggled: ${te.wasFullscreen}  ${te.isFullscreen}`),te.isFullscreen||console.log("Exited fullscreen - native window controls now available");else throw new Error(te.error||"Failed to exit fullscreen")}else throw new Error("Electron IPC not available")}catch(Y){console.error("Failed to exit fullscreen:",Y)}finally{i.value=!1}},ne=async()=>{if(!(!o||i.value))try{if(i.value=!0,window.require){const{ipcRenderer:Y}=window.require("electron"),te=await Y.invoke("window-close");if(te.success)console.log("Window close initiated");else throw new Error(te.error||"Failed to close window")}else throw new Error("Electron IPC not available")}catch(Y){console.error("Failed to close window:",Y)}finally{i.value=!1}};return(Y,te)=>{const L=I("v-icon"),N=I("v-btn"),q=I("v-tooltip"),Q=I("v-avatar"),ee=I("v-list-item"),z=I("v-select");return U(),me("div",{class:"passcode-login-container",style:Rt({backgroundImage:$e(YE)?`url(${$e(YE)})`:"none",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",width:"100vw",height:"100vh"})},[$e(o)?(U(),me("div",Tze,[l(q,{text:"Exit Fullscreen",location:"bottom"},{activator:u(({props:X})=>[l(N,Ue(X,{icon:"",size:"small",variant:"outlined",class:"control-btn",onClick:ue,disabled:i.value}),{default:u(()=>[l(L,null,{default:u(()=>[...te[3]||(te[3]=[M("mdi-fullscreen-exit",-1)])]),_:1})]),_:1},16,["disabled"])]),_:1}),l(q,{text:"Close",location:"bottom"},{activator:u(({props:X})=>[l(N,Ue(X,{icon:"",size:"small",variant:"outlined",class:"control-btn close-btn",onClick:ne,disabled:i.value}),{default:u(()=>[l(L,null,{default:u(()=>[...te[4]||(te[4]=[M("mdi-close",-1)])]),_:1})]),_:1},16,["disabled"])]),_:1})])):ge("",!0),v("div",Ize,[f.value?(U(),me("div",Fze,[...te[5]||(te[5]=[v("div",{class:"loading-spinner large"},null,-1),v("p",{class:"loading-text"},"Verifying your account...",-1)])])):(U(),me("div",Pze,[b.value.length>0?(U(),me("div",Dze,[l(z,{modelValue:x.value,"onUpdate:modelValue":[te[0]||(te[0]=X=>x.value=X),H],items:O.value,"item-title":"text","item-value":"value",label:"Select User",variant:"outlined",density:"compact",loading:T.value,class:"user-select-field",color:"primary"},{item:u(({props:X,item:le})=>[l(ee,eu(nu(X)),{prepend:u(()=>[l(Q,{size:"32",color:le.raw.raw?.isAdmin?"primary":"secondary"},{default:u(()=>[v("span",Uze,K(D(le.raw.text)),1)]),_:2},1032,["color"])]),_:2},1040)]),selection:u(({item:X})=>[v("div",Rze,[l(Q,{size:"24",color:X.raw.raw?.isAdmin?"primary":"secondary",class:"mr-2 flex-shrink-0"},{default:u(()=>[v("span",Nze,K(D(X.raw.text)),1)]),_:2},1032,["color"]),v("span",Vze,K(X.raw.text),1)])]),_:1},8,["modelValue","items","loading"])])):ge("",!0),v("div",Lze,K(D(C.value)),1),v("h2",Mze,"Welcome, "+K(C.value)+"!",1),F.value?(U(),me("p",Oze,K(F.value),1)):ge("",!0),te[6]||(te[6]=v("p",{class:"subtitle"},"Enter your passcode to continue",-1))])),f.value?ge("",!0):(U(),me("form",{key:2,onSubmit:pn(j,["prevent"]),class:"passcode-form",autocomplete:"off","data-form-type":"other"},[v("div",Hze,[ma(v("input",{"onUpdate:modelValue":te[1]||(te[1]=X=>c.value=X),type:p.value?"text":"password",class:"passcode-input",placeholder:"Enter passcode",disabled:A.value,autocomplete:"new-password","data-form-type":"other","data-lpignore":"true","data-1p-ignore":"true","data-bwignore":"true","data-safari-ignore":"true",name:"passcode-input-manual",id:"passcode-input-manual",autofocus:"",maxlength:"20"},null,8,$ze),[[D8,c.value]]),v("button",{type:"button",class:"passcode-toggle-btn",onClick:te[2]||(te[2]=X=>p.value=!p.value),tabindex:"-1"},[p.value?(U(),me("svg",Qze,[...te[7]||(te[7]=[v("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},null,-1),v("line",{x1:"1",y1:"1",x2:"23",y2:"23"},null,-1)])])):(U(),me("svg",Gze,[...te[8]||(te[8]=[v("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},null,-1),v("circle",{cx:"12",cy:"12",r:"3"},null,-1)])]))])]),d.value?(U(),me("div",zze,K(d.value),1)):ge("",!0),v("button",{type:"submit",class:"login-button",disabled:A.value||!c.value},[A.value?(U(),me("span",Wze)):(U(),me("span",jze,"Continue"))],8,Kze)],32)),f.value?ge("",!0):(U(),me("div",qze,[v("button",{class:"switch-account-btn",onClick:J}," Sign in with different account ")]))])],4)}}},Xze=Xt(Yze,[["__scopeId","data-v-ee7437a8"]]),Jze={class:"login-container"},Zze={class:"login-card"},eKe={key:0,class:"form-group"},tKe=["disabled"],nKe=["value"],aKe={class:"form-group"},rKe={class:"passcode-input-wrapper"},sKe=["type","disabled"],oKe={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},iKe={key:1,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},lKe={key:1,class:"error-message"},uKe=["disabled"],cKe={key:0,class:"loading-spinner"},dKe={key:1},AKe={__name:"login",setup(e){const t=Al(),{login:n}=Kf(),a=V(""),r=V(!1),s=V(null),o=V([]),i=V(null),c=V(!1),A=V(!1),d=V(!0),f=V(!1),m=()=>{const y=document.getElementById("passcode");y&&(a.value="",y.value="",y.setAttribute("value",""),y.removeAttribute("data-autofilled"))};Ke(a,y=>{!f.value&&y&&y.length>0&&xn(()=>{const g=document.getElementById("passcode");g&&g.value&&!f.value&&(console.log("Clearing browser autofilled passcode"),m())})},{immediate:!1});const h=async()=>{c.value=!0;try{const y=await dt.get("/web/auth/users"),g=y.data?.users||(Array.isArray(y.data)?y.data:[]);if(Array.isArray(g)&&g.length>0){o.value=g;const w=o.value.find(b=>b.isAdmin===!0)||o.value[0];w&&(i.value=w.id)}}catch(y){console.error("Failed to fetch users:",y)}finally{c.value=!1}};un(async()=>{m();const y=document.getElementById("passcode");if(!y)return;const g=()=>{f.value=!0};y.addEventListener("keydown",g,{once:!0}),y.addEventListener("input",g,{once:!0}),y.addEventListener("focus",()=>{setTimeout(()=>{!f.value&&y.value&&(console.log("Clearing autofilled passcode on focus"),m())},50)}),y.addEventListener("animationstart",F=>{(F.animationName==="onAutoFillStart"||F.target.matches(":-webkit-autofill"))&&(f.value||(console.log("Detected autofill animation, clearing passcode"),setTimeout(()=>m(),100)))});const w=new MutationObserver(F=>{!f.value&&y.value&&(console.log("MutationObserver detected value change, clearing passcode"),m())});w.observe(y,{attributes:!0,attributeFilter:["value"],childList:!1,subtree:!1}),await xn(),setTimeout(()=>m(),100),setTimeout(()=>m(),300),setTimeout(()=>m(),500),setTimeout(()=>m(),1e3),await h(),setTimeout(()=>{m(),d.value=!1},1500);let b=w,x=y,T=g;Ui(()=>{b&&b.disconnect(),x&&(x.removeEventListener("keydown",T),x.removeEventListener("input",T))})});const p=async()=>{if(!a.value){s.value="Please enter your passcode";return}if(!i.value){s.value="Please select a user";return}r.value=!0,s.value=null;try{(await n(a.value,i.value)).success&&t.push("/home")}catch(y){s.value=y.response?.data?.error||y.message||"Login failed. Please try again."}finally{r.value=!1}};return(y,g)=>(U(),me("div",Jze,[v("div",Zze,[g[8]||(g[8]=v("div",{class:"logo-section"},[v("img",{src:z_,alt:"Logo",class:"logo"}),v("h1",{class:"app-title"},"EvaMed"),v("p",{class:"app-subtitle"},"Medical Practice Management")],-1)),v("form",{onSubmit:pn(p,["prevent"]),class:"login-form",autocomplete:"off"},[o.value.length>0?(U(),me("div",eKe,[g[4]||(g[4]=v("label",{for:"user",class:"form-label"},"Select User",-1)),ma(v("select",{id:"user","onUpdate:modelValue":g[0]||(g[0]=w=>i.value=w),class:"form-input",disabled:r.value||c.value},[g[3]||(g[3]=v("option",{value:null},"Select a user...",-1)),(U(!0),me(We,null,qt(o.value,w=>(U(),me("option",{key:w.id,value:w.id},K(w.name||w.email)+" "+K(w.isAdmin?"(Admin)":""),9,nKe))),128))],8,tKe),[[F8,i.value]])])):ge("",!0),v("div",aKe,[g[7]||(g[7]=v("label",{for:"passcode",class:"form-label"},"Enter Passcode",-1)),v("div",rKe,[ma(v("input",{id:"passcode","onUpdate:modelValue":g[1]||(g[1]=w=>a.value=w),type:A.value?"text":"password",class:"form-input",placeholder:"Enter your passcode",disabled:r.value,autocomplete:"off","data-form-type":"other","data-lpignore":"true","data-1p-ignore":"true",autofocus:""},null,8,sKe),[[D8,a.value]]),v("button",{type:"button",class:"passcode-toggle-btn",onClick:g[2]||(g[2]=w=>A.value=!A.value),tabindex:"-1"},[A.value?(U(),me("svg",oKe,[...g[5]||(g[5]=[v("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},null,-1),v("line",{x1:"1",y1:"1",x2:"23",y2:"23"},null,-1)])])):(U(),me("svg",iKe,[...g[6]||(g[6]=[v("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},null,-1),v("circle",{cx:"12",cy:"12",r:"3"},null,-1)])]))])])]),s.value?(U(),me("div",lKe,K(s.value),1)):ge("",!0),v("button",{type:"submit",class:"login-button",disabled:r.value||!a.value},[r.value?(U(),me("span",cKe)):(U(),me("span",dKe,"Sign In"))],8,uKe)],32),g[9]||(g[9]=v("div",{class:"login-footer"},[v("p",null,"Contact admin if you don't have a passcode")],-1))])]))}},fKe=Xt(AKe,[["__scopeId","data-v-6be93448"]]),mKe={class:"user-management-container"},vKe={key:0,class:"loading-container"},hKe={key:1,class:"error-container"},pKe={key:2,class:"users-list"},gKe={class:"user-info"},yKe={class:"user-avatar"},_Ke={class:"user-details"},wKe={class:"user-name"},bKe={class:"user-email"},xKe={class:"user-meta"},CKe={key:0,class:"badge badge-info"},SKe={key:1,class:"badge badge-warning"},EKe={class:"permission-count"},BKe={class:"user-actions"},kKe=["onClick"],TKe=["onClick"],IKe=["onClick"],FKe=["onClick"],PKe={key:0,class:"empty-state"},DKe={class:"modal-content"},UKe={key:0,class:"error-message"},RKe={key:1,class:"error-message"},NKe={class:"form-group"},VKe={class:"form-group"},LKe={class:"form-group"},MKe={class:"form-group"},OKe={key:0,class:"field-error-message"},HKe={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",style:{display:"inline-block","vertical-align":"middle","margin-right":"4px"}},$Ke={key:1,class:"field-help-text"},QKe={class:"form-actions"},GKe=["disabled"],zKe={key:0},KKe={key:1},WKe={class:"modal-content modal-large"},jKe={class:"modal-title"},qKe={class:"permissions-editor"},YKe={class:"features-list"},XKe={key:0,class:"loading-features"},JKe={class:"feature-checkbox"},ZKe=["checked","onChange"],eWe={class:"feature-name"},tWe={class:"feature-description"},nWe={key:0,class:"actions-section"},aWe={class:"actions-list"},rWe=["checked","onChange"],sWe={class:"permissions-summary"},oWe={class:"selected-permissions"},iWe={key:0,class:"no-permissions"},lWe={class:"form-actions"},uWe={class:"modal-content"},cWe={class:"modal-title"},dWe={key:0,class:"passcode-result"},AWe={class:"passcode-display"},fWe={key:1,class:"passcode-options"},mWe={class:"form-actions"},vWe={class:"modal-content"},hWe={class:"modal-title"},pWe={key:0,class:"loading-container"},gWe={key:1,class:"error-message"},yWe={key:2,class:"passcode-result"},_We={class:"passcode-display"},wWe={__name:"user-management",setup(e){dh(),W_(dt);const t=V([]),n=V([]),a=V(!0),r=V(null),s=V(!1),o=V(!1),i=V(!1),c=V(!1),A=V({name:"",email:"",doctorId:null,passcode:""}),d=V(null),f=V([]),m=V(null),h=V(null),p=V(!1),y=V(null),g=V(null),w=V(!1),b=V(null);V(!1);const x=dt,T=async()=>{a.value=!0,r.value=null;try{const[q,Q]=await Promise.all([x.get("/admin/users"),x.get("/admin/users/features")]);t.value=q.data.users||[],n.value=Q.data.features||[]}catch(q){r.value=q.response?.data?.error||"Failed to load users",console.error("Load users error:",q)}finally{a.value=!1}},F=q=>q?q.split(" ").map(Q=>Q[0]).join("").toUpperCase().slice(0,2):"?",k=async()=>{h.value=null,y.value=null,p.value=!0;try{const q=await x.post("/admin/users",{name:A.value.name,email:A.value.email||void 0,doctorId:A.value.doctorId||void 0,passcode:A.value.passcode?.trim()||void 0,generatePasscode:!A.value.passcode?.trim()});if(q.data.success){const Q=q.data.passcode;alert(`User created!

Passcode: ${Q}

Please save this passcode securely.`),S(),T()}}catch(q){const Q=q.response?.data?.error||"Failed to create user";q.response?.data?.code==="PASSCODE_NOT_UNIQUE"||Q.toLowerCase().includes("passcode")?(y.value="This passcode is already in use by another user. Please use a different unique passcode.",h.value=null,setTimeout(()=>{const z=document.getElementById("passcode");z&&(z.focus(),z.scrollIntoView({behavior:"smooth",block:"center"}),z.classList.add("shake-animation"),setTimeout(()=>{z.classList.remove("shake-animation")},500))},100)):(h.value=Q,y.value=null)}finally{p.value=!1}},S=()=>{s.value=!1,A.value={name:"",email:"",doctorId:null,passcode:""},h.value=null,y.value=null},E=q=>{try{if(!n.value||n.value.length===0){console.warn("Features not loaded yet, loading now..."),T().then(()=>{n.value&&n.value.length>0?(d.value=q,f.value=[...q.permissions||[]],o.value=!0):alert("Failed to load features. Please try again.")});return}if(!q||!q.id){console.error("Invalid user data:",q),alert("Invalid user data");return}d.value=q,f.value=[...q.permissions||[]],o.value=!0}catch(Q){console.error("Error opening edit permissions modal:",Q),alert("Error opening permissions editor. Please try again.")}},C=ae(()=>{const q=new Set;return f.value&&f.value.length>0&&f.value.forEach(Q=>{if(Q&&typeof Q=="string"){const ee=Q.split(".")[0];ee&&q.add(ee)}}),q}),D=ae(()=>new Set(f.value||[])),P=q=>C.value.has(q),O=q=>D.value.has(q),H=(q,Q)=>{const ee=n.value.find(z=>z.id===q);if(ee)if(Q){const z=ee.actions.find(X=>X.action==="view");z&&!f.value.includes(z.id)&&f.value.push(z.id)}else f.value=f.value.filter(z=>!z.startsWith(`${q}.`))},ie=(q,Q)=>{Q?f.value.includes(q)||f.value.push(q):f.value=f.value.filter(ee=>ee!==q)},Ae=async()=>{try{await x.put(`/admin/users/${d.value.id}/permissions`,{permissions:f.value}),alert("Permissions updated successfully!"),o.value=!1,T()}catch(q){alert(q.response?.data?.error||"Failed to update permissions")}},j=q=>{d.value=q,m.value=null,i.value=!0},J=async()=>{try{const q=await x.put(`/admin/users/${d.value.id}/passcode`,{generateNew:!0});q.data.success&&(m.value=q.data.passcode)}catch(q){alert(q.response?.data?.error||"Failed to reset passcode")}},ue=()=>{i.value=!1,m.value=null},ne=async q=>{console.log("View passcode clicked for user:",q),d.value=q,g.value=null,b.value=null,w.value=!0,c.value=!0;try{console.log("Fetching passcode for user ID:",q.id);const Q=await x.get(`/admin/users/${q.id}/passcode`);console.log("Passcode response:",Q.data),Q.data.success?g.value=Q.data.passcode:b.value=Q.data.error||"Failed to retrieve passcode"}catch(Q){console.error("Error fetching passcode:",Q),b.value=Q.response?.data?.error||"Failed to retrieve passcode"}finally{w.value=!1}},Y=async()=>{if(g.value)try{await navigator.clipboard.writeText(g.value),alert("Passcode copied to clipboard!")}catch{const Q=document.createElement("textarea");Q.value=g.value,Q.style.position="fixed",Q.style.opacity="0",document.body.appendChild(Q),Q.select();try{document.execCommand("copy"),alert("Passcode copied to clipboard!")}catch{alert("Failed to copy passcode. Please copy manually.")}document.body.removeChild(Q)}},te=()=>{c.value=!1,g.value=null,b.value=null,w.value=!1},L=()=>{h.value=null,y.value=null,A.value={name:"",email:"",doctorId:null,passcode:""},s.value=!0},N=q=>{alert("Edit user functionality coming soon")};return un(()=>{T()}),(q,Q)=>(U(),me("div",mKe,[v("div",{class:"page-header"},[Q[11]||(Q[11]=v("h1",{class:"page-title"},"User Management",-1)),v("button",{class:"btn-primary",onClick:L},[...Q[10]||(Q[10]=[v("span",{class:"btn-icon"},"+",-1),M(" Add User ",-1)])])]),a.value?(U(),me("div",vKe,[...Q[12]||(Q[12]=[v("div",{class:"loading-spinner"},null,-1),v("p",null,"Loading users...",-1)])])):r.value?(U(),me("div",hKe,[v("p",null,K(r.value),1),v("button",{class:"btn-secondary",onClick:T},"Retry")])):(U(),me("div",pKe,[(U(!0),me(We,null,qt(t.value,ee=>(U(),me("div",{key:ee.id,class:ct(["user-card",{inactive:!ee.isActive}])},[v("div",gKe,[v("div",yKe,K(F(ee.name)),1),v("div",_Ke,[v("h3",wKe,K(ee.name),1),v("p",bKe,K(ee.email||"No email"),1),v("div",xKe,[ee.doctorId?(U(),me("span",CKe,"Doctor #"+K(ee.doctorId),1)):ge("",!0),ee.isActive?ge("",!0):(U(),me("span",SKe,"Inactive")),v("span",EKe,K(ee.permissions.length)+" permissions",1)])])]),v("div",BKe,[v("button",{class:"btn-icon-action",onClick:z=>E(ee),title:"Edit Permissions"},[...Q[13]||(Q[13]=[v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[v("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),v("polyline",{points:"16 17 21 12 16 7"}),v("line",{x1:"21",y1:"12",x2:"9",y2:"12"})],-1)])],8,kKe),v("button",{class:"btn-icon-action",onClick:z=>ne(ee),title:"View Passcode"},[...Q[14]||(Q[14]=[v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[v("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),v("circle",{cx:"12",cy:"12",r:"3"})],-1)])],8,TKe),v("button",{class:"btn-icon-action",onClick:z=>j(ee),title:"Reset Passcode"},[...Q[15]||(Q[15]=[v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[v("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),v("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})],-1)])],8,IKe),v("button",{class:"btn-icon-action",onClick:z=>N(),title:"Edit User"},[...Q[16]||(Q[16]=[v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[v("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),v("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,FKe)])],2))),128)),t.value.length===0?(U(),me("div",PKe,[...Q[17]||(Q[17]=[v("p",null,"No users found. Create your first user to get started.",-1)])])):ge("",!0)])),s.value?(U(),me("div",{key:3,class:"modal-overlay",onClick:Q[5]||(Q[5]=pn(ee=>s.value=!1,["self"]))},[v("div",DKe,[Q[25]||(Q[25]=v("h2",{class:"modal-title"},"Create New User",-1)),y.value?(U(),me("div",UKe,[Q[18]||(Q[18]=v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[v("circle",{cx:"12",cy:"12",r:"10"}),v("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),v("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})],-1)),v("span",null,K(y.value),1)])):ge("",!0),h.value&&!y.value?(U(),me("div",RKe,[Q[19]||(Q[19]=v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[v("circle",{cx:"12",cy:"12",r:"10"}),v("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),v("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})],-1)),v("span",null,K(h.value),1)])):ge("",!0),v("form",{onSubmit:pn(k,["prevent"]),class:"modal-form"},[v("div",NKe,[Q[20]||(Q[20]=v("label",{for:"name"},"Name *",-1)),ma(v("input",{id:"name","onUpdate:modelValue":Q[0]||(Q[0]=ee=>A.value.name=ee),type:"text",required:"",placeholder:"Enter user name"},null,512),[[GA,A.value.name]])]),v("div",VKe,[Q[21]||(Q[21]=v("label",{for:"email"},"Email",-1)),ma(v("input",{id:"email","onUpdate:modelValue":Q[1]||(Q[1]=ee=>A.value.email=ee),type:"email",placeholder:"Enter email (optional)"},null,512),[[GA,A.value.email]])]),v("div",LKe,[Q[22]||(Q[22]=v("label",{for:"doctorId"},"Link to Doctor (ID)",-1)),ma(v("input",{id:"doctorId","onUpdate:modelValue":Q[2]||(Q[2]=ee=>A.value.doctorId=ee),type:"number",placeholder:"Doctor ID (optional)"},null,512),[[GA,A.value.doctorId,void 0,{number:!0}]])]),v("div",MKe,[Q[24]||(Q[24]=v("label",{for:"passcode"},"Passcode",-1)),ma(v("input",{id:"passcode","onUpdate:modelValue":Q[3]||(Q[3]=ee=>A.value.passcode=ee),type:"text",class:ct({"input-error":y.value}),placeholder:"Enter passcode (leave empty to auto-generate)",onInput:Q[4]||(Q[4]=ee=>y.value=null)},null,34),[[GA,A.value.passcode]]),y.value?(U(),me("p",OKe,[(U(),me("svg",HKe,[...Q[23]||(Q[23]=[v("circle",{cx:"12",cy:"12",r:"10"},null,-1),v("line",{x1:"12",y1:"8",x2:"12",y2:"12"},null,-1),v("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"},null,-1)])])),M(" "+K(y.value),1)])):(U(),me("p",$Ke," Leave empty to auto-generate a unique passcode "))]),v("div",QKe,[v("button",{type:"button",class:"btn-secondary",onClick:S},"Cancel"),v("button",{type:"submit",class:"btn-primary",disabled:!A.value.name||p.value},[p.value?(U(),me("span",zKe,"Creating...")):(U(),me("span",KKe,"Create User"))],8,GKe)])],32)])])):ge("",!0),o.value?(U(),me("div",{key:4,class:"modal-overlay",onClick:Q[7]||(Q[7]=pn(ee=>o.value=!1,["self"]))},[v("div",WKe,[v("h2",jKe,"Edit Permissions: "+K(d.value?.name),1),v("div",qKe,[Q[27]||(Q[27]=v("p",{class:"help-text"}," Select features to grant access. Once a feature is selected, you can assign specific actions. ",-1)),v("div",YKe,[!n.value||n.value.length===0?(U(),me("div",XKe,[...Q[26]||(Q[26]=[v("p",null,"Loading features...",-1)])])):(U(!0),me(We,{key:1},qt(n.value,ee=>(U(),me("div",{key:ee.id,class:"feature-item"},[v("label",JKe,[v("input",{type:"checkbox",checked:P(ee.id),onChange:z=>H(ee.id,z.target.checked)},null,40,ZKe),v("span",eWe,K(ee.name),1),v("span",tWe,K(ee.description),1)]),P(ee.id)?(U(),me("div",nWe,[v("h4",null,"Actions for "+K(ee.name),1),v("div",aWe,[(U(!0),me(We,null,qt(ee.actions,z=>(U(),me("label",{key:z.id,class:"action-checkbox"},[v("input",{type:"checkbox",checked:O(z.id),onChange:X=>ie(z.id,X.target.checked)},null,40,rWe),v("span",null,K(z.description),1)]))),128))])])):ge("",!0)]))),128))]),v("div",sWe,[v("h4",null,"Selected Permissions ("+K(f.value.length)+")",1),v("div",oWe,[(U(!0),me(We,null,qt(f.value,ee=>(U(),me("span",{key:ee,class:"permission-badge"},K(ee),1))),128)),f.value.length===0?(U(),me("span",iWe," No permissions selected ")):ge("",!0)])])]),v("div",lWe,[v("button",{type:"button",class:"btn-secondary",onClick:Q[6]||(Q[6]=ee=>o.value=!1)},"Cancel"),v("button",{type:"button",class:"btn-primary",onClick:Ae},"Save Permissions")])])])):ge("",!0),i.value?(U(),me("div",{key:5,class:"modal-overlay",onClick:Q[8]||(Q[8]=pn(ee=>i.value=!1,["self"]))},[v("div",uWe,[v("h2",cWe,"Reset Passcode: "+K(d.value?.name),1),m.value?(U(),me("div",dWe,[Q[28]||(Q[28]=v("p",{class:"passcode-label"},"New Passcode:",-1)),v("div",AWe,K(m.value),1),Q[29]||(Q[29]=v("p",{class:"passcode-warning"}," Save this passcode securely. It won't be shown again.",-1))])):(U(),me("div",fWe,[...Q[30]||(Q[30]=[v("p",null,"Generate a new passcode for this user?",-1),v("p",{class:"warning-text"},"This will invalidate all active sessions for this user.",-1)])])),v("div",mWe,[v("button",{type:"button",class:"btn-secondary",onClick:ue},K(m.value?"Close":"Cancel"),1),m.value?ge("",!0):(U(),me("button",{key:0,type:"button",class:"btn-primary",onClick:J}," Generate New Passcode "))])])])):ge("",!0),c.value?(U(),me("div",{key:6,class:"modal-overlay",onClick:Q[9]||(Q[9]=pn(ee=>c.value=!1,["self"]))},[v("div",vWe,[v("h2",hWe,"View Passcode: "+K(d.value?.name),1),w.value?(U(),me("div",pWe,[...Q[31]||(Q[31]=[v("div",{class:"loading-spinner"},null,-1),v("p",null,"Loading passcode...",-1)])])):b.value?(U(),me("div",gWe,[Q[32]||(Q[32]=v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[v("circle",{cx:"12",cy:"12",r:"10"}),v("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),v("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})],-1)),v("span",null,K(b.value),1)])):g.value?(U(),me("div",yWe,[Q[33]||(Q[33]=v("p",{class:"passcode-label"},"Passcode:",-1)),v("div",_We,K(g.value),1),v("button",{type:"button",class:"btn-secondary",onClick:Y,style:{"margin-top":"10px"}}," Copy to Clipboard "),Q[34]||(Q[34]=v("p",{class:"passcode-warning"}," This passcode is stored in plain text. Keep it secure.",-1))])):ge("",!0),v("div",{class:"form-actions"},[v("button",{type:"button",class:"btn-secondary",onClick:te},"Close")])])])):ge("",!0)]))}},BN=Xt(wWe,[["__scopeId","data-v-79c64cc9"]]),bWe=[{path:"/",name:"SplashPage",component:pze,meta:{requiresAuth:!1}},{name:"LoginPage",component:rze,path:"/login",meta:{requiresAuth:!1}},{name:"MobileHome",component:_ze,path:"/mobile",meta:{requiresAuth:!1}},{name:"PatientDetailMobile",component:kze,path:"/mobile/:id",meta:{requiresAuth:!1}},{name:"WelcomePage",component:ize,path:"/welcome",meta:{requiresAuth:!0}},{name:"HomePage",component:UCe,path:"/home/:tab?",meta:{requiresAuth:!0,requiredFeature:"home"}},{name:"PatientsLandingPage",component:USe,path:"/patients",meta:{requiresAuth:!0,requiredFeature:"patients"},children:[{path:":id",name:"PatientDetailPage",component:oIe,meta:{requiresAuth:!0,requiredFeature:"patients"}}]},{name:"TasksPage",component:CMe,path:"/tasks",meta:{requiresAuth:!0,requiredFeature:"tasks"}},{name:"AdminPage",component:HFe,path:"/admin",meta:{requiresAuth:!0,requiresAdmin:!0}},{name:"DataPage",component:$6e,path:"/data",meta:{requiresAuth:!0,requiredFeature:"data"}},{name:"ResearchPage",component:H5e,path:"/research",meta:{requiresAuth:!0,requiredFeature:"research"}},{name:"ReportsPage",component:yOe,path:"/reports",meta:{requiresAuth:!0,requiredFeature:"reports"}},{name:"PaymentsPage",component:zMe,path:"/payments",meta:{requiresAuth:!0,requiredFeature:"billing"}},{name:"PharmacyQueuePage",component:Z9e,path:"/pharmacy/queue",meta:{requiresAuth:!0,requiredFeature:"pharmacy.queue"}},{name:"PharmacyInventoryPage",component:f7e,path:"/pharmacy/inventory",meta:{requiresAuth:!0,requiredFeature:"pharmacy.inventory"}},{name:"PharmacyPurchasePage",component:xGe,path:"/pharmacy/purchase",meta:{requiresAuth:!0,requiredFeature:"pharmacy.purchase"}},{name:"PharmacyReportsPage",component:YGe,path:"/pharmacy/reports",meta:{requiresAuth:!0,requiredFeature:"pharmacy.reports"}},{name:"DesktopPasscodeLogin",component:Xze,path:"/desktop/passcode",meta:{requiresAuth:!1,requiresGoogleAuth:!0}},{name:"WebLogin",component:fKe,path:"/web/login",meta:{requiresAuth:!1}},{name:"UserManagement",component:BN,path:"/admin/users",meta:{requiresAuth:!0,requiresAdmin:!0}},{name:"UserManagementEdit",component:BN,path:"/admin/users/:id",meta:{requiresAuth:!0,requiresAdmin:!0}}],$s=Ure({history:ure(),routes:bWe});$s.beforeEach(async(e,t,n)=>{const a=t.query.server||e.query.server,r=t.query.endpoint||e.query.endpoint;if((a||r)&&!e.query.server&&!e.query.endpoint)return console.log("Preserving query params:",{serverParam:a,endpointParam:r}),n({...e,query:{...e.query,...a&&{server:a},...r&&{endpoint:r}}});if(Ua()){const o=Ti.getters["auth/isAuthenticated"],i=!!localStorage.getItem("desktopSessionToken"),c=o&&i,A=dh(),d=A.isAdmin.value,f=A.permissions.value||[];console.log("Navigation guard triggered (Electron mode):",{to:e.path,from:t.path,requiresAuth:e.matched.some(w=>w.meta.requiresAuth),requiresGoogleAuth:e.matched.some(w=>w.meta.requiresGoogleAuth),requiresAdmin:e.matched.some(w=>w.meta.requiresAdmin),requiredFeature:e.meta.requiredFeature,requiredPermission:e.meta.requiredPermission,isGoogleAuthenticated:o,hasDesktopSession:i,isFullyAuthenticated:c,isAdmin:d,permissionsCount:f.length});const m=e.matched.some(w=>w.meta.requiresAuth),h=e.matched.some(w=>w.meta.requiresGoogleAuth),p=e.matched.some(w=>w.meta.requiresAdmin),y=e.meta.requiredFeature,g=e.meta.requiredPermission;if(m&&!c)if(o){console.log("Route requires auth, have Google auth but no passcode, redirecting to passcode page"),n("/desktop/passcode");return}else{console.log("Route requires auth but no Google auth, redirecting to login"),n("/login");return}if(p&&!(d||f.some(b=>b&&typeof b=="string"&&b.startsWith("admin.")))){console.log("Route requires admin access or admin permissions, redirecting to home"),n("/home");return}if(g&&!d){if(!f.includes(g)){console.log(`Route requires permission: ${g}, redirecting to home`),n("/home");return}}if(y&&((A.features.value||[]).find(b=>b&&b.id===y),!d)){if(!f.some(x=>!x||typeof x!="string"?!1:x===y?!0:x.startsWith(`${y}.`))){console.log(`Route requires feature access: ${y}, user doesn't have access, redirecting to home`),n("/home");return}}if(h&&!o){console.log("Route requires Google auth but user not signed in, redirecting to login"),n("/login");return}if(e.path==="/login"){if(c){console.log("Fully authenticated user trying to access login page, redirecting to home"),n("/home");return}else if(o){console.log("Google authenticated user trying to access login page, redirecting to passcode"),n("/desktop/passcode");return}}if(e.path==="/desktop/passcode"&&c){console.log("Fully authenticated user trying to access passcode page, redirecting to home"),n("/home");return}console.log("Navigation allowed (Electron mode)"),n()}else{const o=Kf(),i=!!localStorage.getItem("sessionToken"),c=o.isAuthenticated.value,A=o.isAdmin.value,d=o.permissions.value||[];console.log("Navigation guard triggered (Web mode):",{to:e.path,from:t.path,requiresAuth:e.matched.some(g=>g.meta.requiresAuth),requiresAdmin:e.matched.some(g=>g.meta.requiresAdmin),requiredFeature:e.meta.requiredFeature,requiredPermission:e.meta.requiredPermission,hasSessionToken:i,isWebAuthenticated:c,sessionTokenValue:o.sessionToken.value?"exists":"null",isAdmin:A,permissionsCount:d.length});const f=e.matched.some(g=>g.meta.requiresAuth),m=e.matched.some(g=>g.meta.requiresAdmin),h=e.meta.requiredFeature,p=e.meta.requiredPermission,y=()=>{const b=new URLSearchParams(window.location.search).get("endpoint")||e.query.endpoint||t.query.endpoint;return b?`/web/login?endpoint=${encodeURIComponent(b)}`:"/web/login"};if(e.path==="/"&&!c){console.log("On splash page but not authenticated, redirecting to web login");const g=y();console.log("Redirecting to:",g),n(g);return}if(f&&!c){console.log("Route requires auth but not authenticated, redirecting to web login");const g=y();console.log("Redirecting to:",g),n(g);return}if(m&&!A){console.log("Route requires admin access, redirecting to home"),n("/home");return}if(p&&!A){if(!d.includes(p)){console.log(`Route requires permission: ${p}, redirecting to home`),n("/home");return}}if(h&&!A){if(!d.some(w=>!w||typeof w!="string"?!1:w===h?!0:w.startsWith(`${h}.`))){console.log(`Route requires feature access: ${h}, user doesn't have access, redirecting to home`),n("/home");return}}if(e.path==="/web/login"&&c){console.log("Authenticated user trying to access web login page, redirecting to home"),n("/home");return}console.log("Navigation allowed (Web mode)"),n()}});const xWe=it({...tn(),...$a(p6(),["fullHeight"]),...la()},"VApp"),CWe=yt()({name:"VApp",props:xWe(),setup(e,t){let{slots:n}=t;const a=ka(e),{layoutClasses:r,getLayoutItem:s,items:o,layoutRef:i}=y6({...e,fullHeight:!0}),{rtlClasses:c}=Zr();return St(()=>v("div",{ref:i,class:ct(["v-application",a.themeClasses.value,r.value,c.value,e.class]),style:Rt([e.style])},[v("div",{class:"v-application__wrap"},[n.default?.()])])),{getLayoutItem:s,items:o,theme:a}}}),Nn=it({tag:{type:[String,Object,Function],default:"div"}},"tag"),J9=it({text:String,...tn(),...Nn()},"VToolbarTitle"),s4=yt()({name:"VToolbarTitle",props:J9(),setup(e,t){let{slots:n}=t;return St(()=>{const a=!!(n.default||n.text||e.text);return l(e.tag,{class:ct(["v-toolbar-title",e.class]),style:Rt(e.style)},{default:()=>[a&&v("div",{class:"v-toolbar-title__placeholder"},[n.text?n.text():e.text,n.default?.()])]})}),{}}}),SWe=it({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function Ni(e,t,n){return yt()({name:e,props:SWe({mode:n,origin:t}),setup(a,r){let{slots:s}=r;const o={onBeforeEnter(i){a.origin&&(i.style.transformOrigin=a.origin)},onLeave(i){if(a.leaveAbsolute){const{offsetTop:c,offsetLeft:A,offsetWidth:d,offsetHeight:f}=i;i._transitionInitialStyles={position:i.style.position,top:i.style.top,left:i.style.left,width:i.style.width,height:i.style.height},i.style.position="absolute",i.style.top=`${c}px`,i.style.left=`${A}px`,i.style.width=`${d}px`,i.style.height=`${f}px`}a.hideOnLeave&&i.style.setProperty("display","none","important")},onAfterLeave(i){if(a.leaveAbsolute&&i?._transitionInitialStyles){const{position:c,top:A,left:d,width:f,height:m}=i._transitionInitialStyles;delete i._transitionInitialStyles,i.style.position=c||"",i.style.top=A||"",i.style.left=d||"",i.style.width=f||"",i.style.height=m||""}}};return()=>{const i=a.group?uk:zd;return au(i,{name:a.disabled?"":e,css:!a.disabled,...a.group?void 0:{mode:a.mode},...a.disabled?{}:o},s.default)}}})}function Z9(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return yt()({name:e,props:{mode:{type:String,default:n},disabled:Boolean,group:Boolean},setup(a,r){let{slots:s}=r;const o=a.group?uk:zd;return()=>au(o,{name:a.disabled?"":e,css:!a.disabled,...a.disabled?{}:t},s.default)}})}function eQ(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",a=Ho(`offset-${n}`);return{onBeforeEnter(o){o._parent=o.parentNode,o._initialStyle={transition:o.style.transition,overflow:o.style.overflow,[n]:o.style[n]}},onEnter(o){const i=o._initialStyle;if(!i)return;o.style.setProperty("transition","none","important"),o.style.overflow="hidden";const c=`${o[a]}px`;o.style[n]="0",o.offsetHeight,o.style.transition=i.transition,e&&o._parent&&o._parent.classList.add(e),requestAnimationFrame(()=>{o.style[n]=c})},onAfterEnter:s,onEnterCancelled:s,onLeave(o){o._initialStyle={transition:"",overflow:o.style.overflow,[n]:o.style[n]},o.style.overflow="hidden",o.style[n]=`${o[a]}px`,o.offsetHeight,requestAnimationFrame(()=>o.style[n]="0")},onAfterLeave:r,onLeaveCancelled:r};function r(o){e&&o._parent&&o._parent.classList.remove(e),s(o)}function s(o){if(!o._initialStyle)return;const i=o._initialStyle[n];o.style.overflow=o._initialStyle.overflow,i!=null&&(o.style[n]=i),delete o._initialStyle}}const EWe=it({target:[Object,Array]},"v-dialog-transition"),$C=new WeakMap,Ww=yt()({name:"VDialogTransition",props:EWe(),setup(e,t){let{slots:n}=t;const a={onBeforeEnter(r){r.style.pointerEvents="none",r.style.visibility="hidden"},async onEnter(r,s){await new Promise(h=>requestAnimationFrame(h)),await new Promise(h=>requestAnimationFrame(h)),r.style.visibility="";const o=TN(e.target,r),{x:i,y:c,sx:A,sy:d,speed:f}=o;$C.set(r,o);const m=KA(r,[{transform:`translate(${i}px, ${c}px) scale(${A}, ${d})`,opacity:0},{}],{duration:225*f,easing:Qte});kN(r)?.forEach(h=>{KA(h,[{opacity:0},{opacity:0,offset:.33},{}],{duration:450*f,easing:E0})}),m.finished.then(()=>s())},onAfterEnter(r){r.style.removeProperty("pointer-events")},onBeforeLeave(r){r.style.pointerEvents="none"},async onLeave(r,s){await new Promise(h=>requestAnimationFrame(h));let o;!$C.has(r)||Array.isArray(e.target)||e.target.offsetParent||e.target.getClientRects().length?o=TN(e.target,r):o=$C.get(r);const{x:i,y:c,sx:A,sy:d,speed:f}=o;KA(r,[{},{transform:`translate(${i}px, ${c}px) scale(${A}, ${d})`,opacity:0}],{duration:125*f,easing:Gte}).finished.then(()=>s()),kN(r)?.forEach(h=>{KA(h,[{},{opacity:0,offset:.2},{opacity:0}],{duration:250*f,easing:E0})})},onAfterLeave(r){r.style.removeProperty("pointer-events")}};return()=>e.target?l(zd,Ue({name:"dialog-transition"},a,{css:!1}),n):l(zd,{name:"dialog-transition"},n)}});function kN(e){const t=e.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list")?.children;return t&&[...t]}function TN(e,t){const n=W8(e),a=mk(t),[r,s]=getComputedStyle(t).transformOrigin.split(" ").map(w=>parseFloat(w)),[o,i]=getComputedStyle(t).getPropertyValue("--v-overlay-anchor-origin").split(" ");let c=n.left+n.width/2;o==="left"||i==="left"?c-=n.width/2:(o==="right"||i==="right")&&(c+=n.width/2);let A=n.top+n.height/2;o==="top"||i==="top"?A-=n.height/2:(o==="bottom"||i==="bottom")&&(A+=n.height/2);const d=n.width/a.width,f=n.height/a.height,m=Math.max(1,d,f),h=d/m||0,p=f/m||0,y=a.width*a.height/(window.innerWidth*window.innerHeight),g=y>.12?Math.min(1.5,(y-.12)*10+1):1;return{x:c-(r+a.left),y:A-(s+a.top),sx:h,sy:p,speed:g}}const BWe=Ni("fab-transition","center center","out-in"),kWe=Ni("dialog-bottom-transition"),TWe=Ni("dialog-top-transition"),Y0=Ni("fade-transition"),o4=Ni("scale-transition"),IWe=Ni("scroll-x-transition"),FWe=Ni("scroll-x-reverse-transition"),PWe=Ni("scroll-y-transition"),DWe=Ni("scroll-y-reverse-transition"),UWe=Ni("slide-x-transition"),RWe=Ni("slide-x-reverse-transition"),i4=Ni("slide-y-transition"),NWe=Ni("slide-y-reverse-transition"),jw=Z9("expand-transition",eQ()),l4=Z9("expand-x-transition",eQ("",!0)),VWe=it({defaults:Object,disabled:Boolean,reset:[Number,String],root:[Boolean,String],scoped:Boolean},"VDefaultsProvider"),Ln=yt(!1)({name:"VDefaultsProvider",props:VWe(),setup(e,t){let{slots:n}=t;const{defaults:a,disabled:r,reset:s,root:o,scoped:i}=Mf(e);return wr(a,{reset:s,root:o,scoped:i,disabled:r}),()=>n.default?.()}}),Lr=it({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function Mr(e){return{dimensionStyles:ae(()=>{const n={},a=Yt(e.height),r=Yt(e.maxHeight),s=Yt(e.maxWidth),o=Yt(e.minHeight),i=Yt(e.minWidth),c=Yt(e.width);return a!=null&&(n.height=a),r!=null&&(n.maxHeight=r),s!=null&&(n.maxWidth=s),o!=null&&(n.minHeight=o),i!=null&&(n.minWidth=i),c!=null&&(n.width=c),n})}}function LWe(e){return{aspectStyles:ae(()=>{const t=Number(e.aspectRatio);return t?{paddingBottom:String(1/t*100)+"%"}:void 0})}}const tQ=it({aspectRatio:[String,Number],contentClass:null,inline:Boolean,...tn(),...Lr()},"VResponsive"),XE=yt()({name:"VResponsive",props:tQ(),setup(e,t){let{slots:n}=t;const{aspectStyles:a}=LWe(e),{dimensionStyles:r}=Mr(e);return St(()=>v("div",{class:ct(["v-responsive",{"v-responsive--inline":e.inline},e.class]),style:Rt([r.value,e.style])},[v("div",{class:"v-responsive__sizer",style:Rt(a.value)},null),n.additional?.(),n.default&&v("div",{class:ct(["v-responsive__content",e.contentClass])},[n.default()])])),{}}});function u4(e){return fk(()=>{const t=Du(e),n=[],a={};if(t.background)if(ES(t.background)){if(a.backgroundColor=t.background,!t.text&&Fte(t.background)){const r=ki(t.background);if(r.a==null||r.a===1){const s=a6(r);a.color=s,a.caretColor=s}}}else n.push(`bg-${t.background}`);return t.text&&(ES(t.text)?(a.color=t.text,a.caretColor=t.text):n.push(`text-${t.text}`)),{colorClasses:n,colorStyles:a}})}function Ls(e){const{colorClasses:t,colorStyles:n}=u4(()=>({text:Du(e)}));return{textColorClasses:t,textColorStyles:n}}function Fa(e){const{colorClasses:t,colorStyles:n}=u4(()=>({background:Du(e)}));return{backgroundColorClasses:t,backgroundColorStyles:n}}const cr=it({rounded:{type:[Boolean,Number,String],default:void 0},tile:Boolean},"rounded");function xr(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qu();return{roundedClasses:ae(()=>{const a=Xr(e)?e.value:e.rounded,r=Xr(e)?e.value:e.tile,s=[];if(r||a===!1)s.push("rounded-0");else if(a===!0||a==="")s.push(`${t}--rounded`);else if(typeof a=="string"||a===0)for(const o of String(a).split(" "))s.push(`rounded-${o}`);return s})}}const lu=it({transition:{type:null,default:"fade-transition",validator:e=>e!==!0}},"transition"),po=(e,t)=>{let{slots:n}=t;const{transition:a,disabled:r,group:s,...o}=e,{component:i=s?uk:zd,...c}=C0(a)?a:{};let A;return C0(a)?A=Ue(c,fte({disabled:r,group:s}),o):A=Ue({name:r||!a?"":a},o),au(i,A,n)};function MWe(e,t){if(!ck)return;const n=t.modifiers||{},a=t.value,{handler:r,options:s}=typeof a=="object"?a:{handler:a,options:{}},o=new IntersectionObserver(function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],c=arguments.length>1?arguments[1]:void 0;const A=e._observe?.[t.instance.$.uid];if(!A)return;const d=i.some(f=>f.isIntersecting);r&&(!n.quiet||A.init)&&(!n.once||d||A.init)&&r(d,i,c),d&&n.once?nQ(e,t):A.init=!0},s);e._observe=Object(e._observe),e._observe[t.instance.$.uid]={init:!1,observer:o},o.observe(e)}function nQ(e,t){const n=e._observe?.[t.instance.$.uid];n&&(n.observer.unobserve(e),delete e._observe[t.instance.$.uid])}const Xl={mounted:MWe,unmounted:nQ},aQ=it({absolute:Boolean,alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...tQ(),...tn(),...cr(),...lu()},"VImg"),Oc=yt()({name:"VImg",directives:{vIntersect:Xl},props:aQ(),emits:{loadstart:e=>!0,load:e=>!0,error:e=>!0},setup(e,t){let{emit:n,slots:a}=t;const{backgroundColorClasses:r,backgroundColorStyles:s}=Fa(()=>e.color),{roundedClasses:o}=xr(e),i=Pr("VImg"),c=Ht(""),A=V(),d=Ht(e.eager?"loading":"idle"),f=Ht(),m=Ht(),h=ae(()=>e.src&&typeof e.src=="object"?{src:e.src.src,srcset:e.srcset||e.src.srcset,lazySrc:e.lazySrc||e.src.lazySrc,aspect:Number(e.aspectRatio||e.src.aspect||0)}:{src:e.src,srcset:e.srcset,lazySrc:e.lazySrc,aspect:Number(e.aspectRatio||0)}),p=ae(()=>h.value.aspect||f.value/m.value||0);Ke(()=>e.src,()=>{y(d.value!=="idle")}),Ke(p,(O,H)=>{!O&&H&&A.value&&T(A.value)}),tu(()=>y());function y(O){if(!(e.eager&&O)&&!(ck&&!O&&!e.eager)){if(d.value="loading",h.value.lazySrc){const H=new Image;H.src=h.value.lazySrc,T(H,null)}h.value.src&&xn(()=>{n("loadstart",A.value?.currentSrc||h.value.src),setTimeout(()=>{if(!i.isUnmounted)if(A.value?.complete){if(A.value.naturalWidth||w(),d.value==="error")return;p.value||T(A.value,null),d.value==="loading"&&g()}else p.value||T(A.value),b()})})}}function g(){i.isUnmounted||(b(),T(A.value),d.value="loaded",n("load",A.value?.currentSrc||h.value.src))}function w(){i.isUnmounted||(d.value="error",n("error",A.value?.currentSrc||h.value.src))}function b(){const O=A.value;O&&(c.value=O.currentSrc||O.src)}let x=-1;da(()=>{clearTimeout(x)});function T(O){let H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const ie=()=>{if(clearTimeout(x),i.isUnmounted)return;const{naturalHeight:Ae,naturalWidth:j}=O;Ae||j?(f.value=j,m.value=Ae):!O.complete&&d.value==="loading"&&H!=null?x=window.setTimeout(ie,H):(O.currentSrc.endsWith(".svg")||O.currentSrc.startsWith("data:image/svg+xml"))&&(f.value=1,m.value=1)};ie()}const F=Xe(()=>({"v-img__img--cover":e.cover,"v-img__img--contain":!e.cover})),k=()=>{if(!h.value.src||d.value==="idle")return null;const O=v("img",{class:ct(["v-img__img",F.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:h.value.src,srcset:h.value.srcset,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable,sizes:e.sizes,ref:A,onLoad:g,onError:w},null),H=a.sources?.();return l(po,{transition:e.transition,appear:!0},{default:()=>[ma(H?v("picture",{class:"v-img__picture"},[H,O]):O,[[ci,d.value==="loaded"]])]})},S=()=>l(po,{transition:e.transition},{default:()=>[h.value.lazySrc&&d.value!=="loaded"&&v("img",{class:ct(["v-img__img","v-img__img--preload",F.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:h.value.lazySrc,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable},null)]}),E=()=>a.placeholder?l(po,{transition:e.transition,appear:!0},{default:()=>[(d.value==="loading"||d.value==="error"&&!a.error)&&v("div",{class:"v-img__placeholder"},[a.placeholder()])]}):null,C=()=>a.error?l(po,{transition:e.transition,appear:!0},{default:()=>[d.value==="error"&&v("div",{class:"v-img__error"},[a.error()])]}):null,D=()=>e.gradient?v("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${e.gradient})`}},null):null,P=Ht(!1);{const O=Ke(p,H=>{H&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{P.value=!0})}),O())})}return St(()=>{const O=XE.filterProps(e);return ma(l(XE,Ue({class:["v-img",{"v-img--absolute":e.absolute,"v-img--booting":!P.value},r.value,o.value,e.class],style:[{width:Yt(e.width==="auto"?f.value:e.width)},s.value,e.style]},O,{aspectRatio:p.value,"aria-label":e.alt,role:e.alt?"img":void 0}),{additional:()=>v(We,null,[l(k,null,null),l(S,null,null),l(D,null,null),l(E,null,null),l(C,null,null)]),default:a.default}),[[Xl,{handler:y,options:e.options},null,{once:!0}]])}),{currentSrc:c,image:A,state:d,naturalWidth:f,naturalHeight:m}}}),zo=it({border:[Boolean,Number,String]},"border");function fi(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qu();return{borderClasses:ae(()=>{const a=e.border;return a===!0||a===""?`${t}--border`:typeof a=="string"||a===0?String(a).split(" ").map(r=>`border-${r}`):[]})}}const es=it({elevation:{type:[Number,String],validator(e){const t=parseInt(e);return!isNaN(t)&&t>=0&&t<=24}}},"elevation");function Ss(e){return{elevationClasses:Xe(()=>{const n=Xr(e)?e.value:e.elevation;return n==null?[]:[`elevation-${n}`]})}}const OWe=[null,"prominent","default","comfortable","compact"],rQ=it({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>OWe.includes(e)},extended:{type:Boolean,default:null},extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...zo(),...tn(),...es(),...cr(),...Nn({tag:"header"}),...la()},"VToolbar"),JE=yt()({name:"VToolbar",props:rQ(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:a,backgroundColorStyles:r}=Fa(()=>e.color),{borderClasses:s}=fi(e),{elevationClasses:o}=Ss(e),{roundedClasses:i}=xr(e),{themeClasses:c}=ka(e),{rtlClasses:A}=Zr(),d=Ht(e.extended===null?!!n.extension?.():e.extended),f=ae(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),m=ae(()=>d.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return wr({VBtn:{variant:"text"}}),St(()=>{const h=!!(e.title||n.title),p=!!(n.image||e.image),y=n.extension?.();return d.value=e.extended===null?!!y:e.extended,l(e.tag,{class:ct(["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},a.value,s.value,o.value,i.value,c.value,A.value,e.class]),style:Rt([r.value,e.style])},{default:()=>[p&&v("div",{key:"image",class:"v-toolbar__image"},[n.image?l(Ln,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},n.image):l(Oc,{key:"image-img",cover:!0,src:e.image},null)]),l(Ln,{defaults:{VTabs:{height:Yt(f.value)}}},{default:()=>[v("div",{class:"v-toolbar__content",style:{height:Yt(f.value)}},[n.prepend&&v("div",{class:"v-toolbar__prepend"},[n.prepend?.()]),h&&l(s4,{key:"title",text:e.title},{text:n.title}),n.default?.(),n.append&&v("div",{class:"v-toolbar__append"},[n.append?.()])])]}),l(Ln,{defaults:{VTabs:{height:Yt(m.value)}}},{default:()=>[l(jw,null,{default:()=>[d.value&&v("div",{class:"v-toolbar__extension",style:{height:Yt(m.value)}},[y])]})]})]})}),{contentHeight:f,extensionHeight:m}}}),HWe=it({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function $We(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:n}=t;let a=0,r=0;const s=V(null),o=Ht(0),i=Ht(0),c=Ht(0),A=Ht(!1),d=Ht(!1),f=ae(()=>Number(e.scrollThreshold)),m=ae(()=>tr((f.value-o.value)/f.value||0)),h=()=>{const p=s.value;if(!p||n&&!n.value)return;a=o.value,o.value="window"in p?p.pageYOffset:p.scrollTop;const y=p instanceof Window?document.documentElement.scrollHeight:p.scrollHeight;if(r!==y){r=y;return}d.value=o.value<a,c.value=Math.abs(o.value-f.value)};return Ke(d,()=>{i.value=i.value||o.value}),Ke(A,()=>{i.value=0}),un(()=>{Ke(()=>e.scrollTarget,p=>{const y=p?document.querySelector(p):window;y&&y!==s.value&&(s.value?.removeEventListener("scroll",h),s.value=y,s.value.addEventListener("scroll",h,{passive:!0}))},{immediate:!0})}),da(()=>{s.value?.removeEventListener("scroll",h)}),n&&Ke(n,h,{immediate:!0}),{scrollThreshold:f,currentScroll:o,currentThreshold:c,isScrollActive:A,scrollRatio:m,isScrollingUp:d,savedScroll:i}}function Zf(){const e=Ht(!1);return un(()=>{window.requestAnimationFrame(()=>{e.value=!0})}),{ssrBootStyles:Xe(()=>e.value?void 0:{transition:"none !important"}),isBooted:ah(e)}}const QWe=it({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...rQ(),...$f(),...HWe(),height:{type:[Number,String],default:64}},"VAppBar"),GWe=yt()({name:"VAppBar",props:QWe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=V(),r=ln(e,"modelValue"),s=ae(()=>{const b=new Set(e.scrollBehavior?.split(" ")??[]);return{hide:b.has("hide"),fullyHide:b.has("fully-hide"),inverted:b.has("inverted"),collapse:b.has("collapse"),elevate:b.has("elevate"),fadeImage:b.has("fade-image")}}),o=ae(()=>{const b=s.value;return b.hide||b.fullyHide||b.inverted||b.collapse||b.elevate||b.fadeImage||!r.value}),{currentScroll:i,scrollThreshold:c,isScrollingUp:A,scrollRatio:d}=$We(e,{canScroll:o}),f=Xe(()=>s.value.hide||s.value.fullyHide),m=ae(()=>e.collapse||s.value.collapse&&(s.value.inverted?d.value>0:d.value===0)),h=ae(()=>e.flat||s.value.fullyHide&&!r.value||s.value.elevate&&(s.value.inverted?i.value>0:i.value===0)),p=ae(()=>s.value.fadeImage?s.value.inverted?1-d.value:d.value:void 0),y=ae(()=>{if(s.value.hide&&s.value.inverted)return 0;const b=a.value?.contentHeight??0,x=a.value?.extensionHeight??0;return f.value?i.value<c.value||s.value.fullyHide?b+x:b:b+x});yo(()=>!!e.scrollBehavior,()=>{_r(()=>{f.value?s.value.inverted?r.value=i.value>c.value:r.value=A.value||i.value<c.value:r.value=!0})});const{ssrBootStyles:g}=Zf(),{layoutItemStyles:w}=Qf({id:e.name,order:ae(()=>parseInt(e.order,10)),position:Xe(()=>e.location),layoutSize:y,elementSize:Ht(void 0),active:r,absolute:Xe(()=>e.absolute)});return St(()=>{const b=JE.filterProps(e);return l(JE,Ue({ref:a,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...w.value,"--v-toolbar-image-opacity":p.value,height:void 0,...g.value},e.style]},b,{collapse:m.value,flat:h.value}),n)}),{}}}),zWe=[null,"default","comfortable","compact"],ds=it({density:{type:String,default:"default",validator:e=>zWe.includes(e)}},"density");function Eo(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qu();return{densityClasses:Xe(()=>`${t}--density-${e.density}`)}}const KWe=["elevated","flat","tonal","outlined","text","plain"];function dA(e,t){return v(We,null,[e&&v("span",{key:"overlay",class:ct(`${t}__overlay`)},null),v("span",{key:"underlay",class:ct(`${t}__underlay`)},null)])}const ml=it({color:String,variant:{type:String,default:"elevated",validator:e=>KWe.includes(e)}},"variant");function em(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qu();const n=Xe(()=>{const{variant:s}=Du(e);return`${t}--variant-${s}`}),{colorClasses:a,colorStyles:r}=u4(()=>{const{variant:s,color:o}=Du(e);return{[["elevated","flat"].includes(s)?"background":"text"]:o}});return{colorClasses:a,colorStyles:r,variantClasses:n}}const sQ=it({baseColor:String,divided:Boolean,direction:{type:String,default:"horizontal"},...zo(),...tn(),...ds(),...es(),...cr(),...Nn(),...la(),...ml()},"VBtnGroup"),ZE=yt()({name:"VBtnGroup",props:sQ(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=ka(e),{densityClasses:r}=Eo(e),{borderClasses:s}=fi(e),{elevationClasses:o}=Ss(e),{roundedClasses:i}=xr(e);wr({VBtn:{height:Xe(()=>e.direction==="horizontal"?"auto":null),baseColor:Xe(()=>e.baseColor),color:Xe(()=>e.color),density:Xe(()=>e.density),flat:!0,variant:Xe(()=>e.variant)}}),St(()=>l(e.tag,{class:ct(["v-btn-group",`v-btn-group--${e.direction}`,{"v-btn-group--divided":e.divided},a.value,s.value,r.value,o.value,i.value,e.class]),style:Rt(e.style)},n))}}),tm=it({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),nm=it({value:null,disabled:Boolean,selectedClass:String},"group-item");function am(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const a=Pr("useGroupItem");if(!a)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const r=Go();Ha(Symbol.for(`${t.description}:id`),r);const s=Tn(t,null);if(!s){if(!n)return s;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${t.description}`)}const o=Xe(()=>e.value),i=ae(()=>!!(s.disabled.value||e.disabled));s.register({id:r,value:o,disabled:i},a),da(()=>{s.unregister(r)});const c=ae(()=>s.isSelected(r)),A=ae(()=>s.items.value[0].id===r),d=ae(()=>s.items.value[s.items.value.length-1].id===r),f=ae(()=>c.value&&[s.selectedClass.value,e.selectedClass]);return Ke(c,m=>{a.emit("group:selected",{value:m})},{flush:"sync"}),{id:r,isSelected:c,isFirst:A,isLast:d,toggle:()=>s.select(r,!c.value),select:m=>s.select(r,m),selectedClass:f,value:o,disabled:i,group:s}}function AA(e,t){let n=!1;const a=is([]),r=ln(e,"modelValue",[],m=>m==null?[]:oQ(a,pr(m)),m=>{const h=jWe(a,m);return e.multiple?h:h[0]}),s=Pr("useGroup");function o(m,h){const p=m,y=Symbol.for(`${t.description}:id`),w=Jm(y,s?.vnode).indexOf(h);$e(p.value)==null&&(p.value=w,p.useIndexAsValue=!0),w>-1?a.splice(w,0,p):a.push(p)}function i(m){if(n)return;c();const h=a.findIndex(p=>p.id===m);a.splice(h,1)}function c(){const m=a.find(h=>!h.disabled);m&&e.mandatory==="force"&&!r.value.length&&(r.value=[m.id])}un(()=>{c()}),da(()=>{n=!0}),Z2(()=>{for(let m=0;m<a.length;m++)a[m].useIndexAsValue&&(a[m].value=m)});function A(m,h){const p=a.find(y=>y.id===m);if(!(h&&p?.disabled))if(e.multiple){const y=r.value.slice(),g=y.findIndex(b=>b===m),w=~g;if(h=h??!w,w&&e.mandatory&&y.length<=1||!w&&e.max!=null&&y.length+1>e.max)return;g<0&&h?y.push(m):g>=0&&!h&&y.splice(g,1),r.value=y}else{const y=r.value.includes(m);if(e.mandatory&&y||!y&&!h)return;r.value=h??!y?[m]:[]}}function d(m){if(e.multiple,r.value.length){const h=r.value[0],p=a.findIndex(w=>w.id===h);let y=(p+m)%a.length,g=a[y];for(;g.disabled&&y!==p;)y=(y+m)%a.length,g=a[y];if(g.disabled)return;r.value=[a[y].id]}else{const h=a.find(p=>!p.disabled);h&&(r.value=[h.id])}}const f={register:o,unregister:i,selected:r,select:A,disabled:Xe(()=>e.disabled),prev:()=>d(a.length-1),next:()=>d(1),isSelected:m=>r.value.includes(m),selectedClass:Xe(()=>e.selectedClass),items:Xe(()=>a),getItemIndex:m=>WWe(a,m)};return Ha(t,f),f}function WWe(e,t){const n=oQ(e,[t]);return n.length?e.findIndex(a=>a.id===n[0]):-1}function oQ(e,t){const n=[];return t.forEach(a=>{const r=e.find(o=>bs(a,o.value)),s=e[a];r?.value!=null?n.push(r.id):s?.useIndexAsValue&&n.push(s.id)}),n}function jWe(e,t){const n=[];return t.forEach(a=>{const r=e.findIndex(s=>s.id===a);if(~r){const s=e[r];n.push(s.value!=null?s.value:r)}}),n}const c4=Symbol.for("vuetify:v-btn-toggle"),qWe=it({...sQ(),...tm()},"VBtnToggle"),YWe=yt()({name:"VBtnToggle",props:qWe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{isSelected:a,next:r,prev:s,select:o,selected:i}=AA(e,c4);return St(()=>{const c=ZE.filterProps(e);return l(ZE,Ue({class:["v-btn-toggle",e.class]},c,{style:e.style}),{default:()=>[n.default?.({isSelected:a,next:r,prev:s,select:o,selected:i})]})}),{next:r,prev:s,select:o}}}),XWe=["x-small","small","default","large","x-large"],Yu=it({size:{type:[String,Number],default:"default"}},"size");function Ch(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qu();return fk(()=>{const n=e.size;let a,r;return E_(XWe,n)?a=`${t}--size-${n}`:n&&(r={width:Yt(n),height:Yt(n)}),{sizeClasses:a,sizeStyles:r}})}const JWe=it({color:String,disabled:Boolean,start:Boolean,end:Boolean,icon:An,opacity:[String,Number],...tn(),...Yu(),...Nn({tag:"i"}),...la()},"VIcon"),Ea=yt()({name:"VIcon",props:JWe(),setup(e,t){let{attrs:n,slots:a}=t;const r=Ht(),{themeClasses:s}=Ck(),{iconData:o}=Yne(()=>r.value||e.icon),{sizeClasses:i}=Ch(e),{textColorClasses:c,textColorStyles:A}=Ls(()=>e.color);return St(()=>{const d=a.default?.();d&&(r.value=H8(d).filter(m=>m.type===dg&&m.children&&typeof m.children=="string")[0]?.children);const f=!!(n.onClick||n.onClickOnce);return l(o.value.component,{tag:e.tag,icon:o.value.icon,class:ct(["v-icon","notranslate",s.value,i.value,c.value,{"v-icon--clickable":f,"v-icon--disabled":e.disabled,"v-icon--start":e.start,"v-icon--end":e.end},e.class]),style:Rt([{"--v-icon-opacity":e.opacity},i.value?void 0:{fontSize:Yt(e.size),height:Yt(e.size),width:Yt(e.size)},A.value,e.style]),role:f?"button":void 0,"aria-hidden":!f,tabindex:f?e.disabled?-1:0:void 0},{default:()=>[d]})}),{}}});function Vg(e,t){const n=V(),a=Ht(!1);if(ck){const r=new IntersectionObserver(s=>{a.value=!!s.find(o=>o.isIntersecting)},t);cs(()=>{r.disconnect()}),Ke(n,(s,o)=>{o&&(r.unobserve(o),a.value=!1),s&&r.observe(s)},{flush:"post"})}return{intersectionRef:n,isIntersecting:a}}const ZWe=it({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...tn(),...Yu(),...Nn({tag:"div"}),...la()},"VProgressCircular"),kf=yt()({name:"VProgressCircular",props:ZWe(),setup(e,t){let{slots:n}=t;const a=20,r=2*Math.PI*a,s=V(),{themeClasses:o}=ka(e),{sizeClasses:i,sizeStyles:c}=Ch(e),{textColorClasses:A,textColorStyles:d}=Ls(()=>e.color),{textColorClasses:f,textColorStyles:m}=Ls(()=>e.bgColor),{intersectionRef:h,isIntersecting:p}=Vg(),{resizeRef:y,contentRect:g}=Kl(),w=Xe(()=>tr(parseFloat(e.modelValue),0,100)),b=Xe(()=>Number(e.width)),x=Xe(()=>c.value?Number(e.size):g.value?g.value.width:Math.max(b.value,32)),T=Xe(()=>a/(1-b.value/x.value)*2),F=Xe(()=>b.value/x.value*T.value),k=Xe(()=>Yt((100-w.value)/100*r));return _r(()=>{h.value=s.value,y.value=s.value}),St(()=>l(e.tag,{ref:s,class:ct(["v-progress-circular",{"v-progress-circular--indeterminate":!!e.indeterminate,"v-progress-circular--visible":p.value,"v-progress-circular--disable-shrink":e.indeterminate==="disable-shrink"},o.value,i.value,A.value,e.class]),style:Rt([c.value,d.value,e.style]),role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.indeterminate?void 0:w.value},{default:()=>[v("svg",{style:{transform:`rotate(calc(-90deg + ${Number(e.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${T.value} ${T.value}`},[v("circle",{class:ct(["v-progress-circular__underlay",f.value]),style:Rt(m.value),fill:"transparent",cx:"50%",cy:"50%",r:a,"stroke-width":F.value,"stroke-dasharray":r,"stroke-dashoffset":0},null),v("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:a,"stroke-width":F.value,"stroke-dasharray":r,"stroke-dashoffset":k.value},null)]),n.default&&v("div",{class:"v-progress-circular__content"},[n.default({value:w.value})])]})),{}}}),IN={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},Wc=it({location:String},"location");function rm(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2?arguments[2]:void 0;const{isRtl:a}=Zr();return{locationStyles:ae(()=>{if(!e.location)return{};const{side:s,align:o}=CS(e.location.split(" ").length>1?e.location:`${e.location} center`,a.value);function i(A){return n?n(A):0}const c={};return s!=="center"&&(t?c[IN[s]]=`calc(100% - ${i(s)}px)`:c[s]=0),o!=="center"?t?c[IN[o]]=`calc(100% - ${i(o)}px)`:c[o]=0:(s==="center"?c.top=c.left="50%":c[{top:"left",bottom:"left",left:"top",right:"top"}[s]]="50%",c.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[s]),c})}}const eje=it({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},bufferColor:String,bufferOpacity:[Number,String],clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},opacity:[Number,String],reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...tn(),...Wc({location:"top"}),...cr(),...Nn(),...la()},"VProgressLinear"),qw=yt()({name:"VProgressLinear",props:eje(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=ln(e,"modelValue"),{isRtl:r,rtlClasses:s}=Zr(),{themeClasses:o}=ka(e),{locationStyles:i}=rm(e),{textColorClasses:c,textColorStyles:A}=Ls(()=>e.color),{backgroundColorClasses:d,backgroundColorStyles:f}=Fa(()=>e.bgColor||e.color),{backgroundColorClasses:m,backgroundColorStyles:h}=Fa(()=>e.bufferColor||e.bgColor||e.color),{backgroundColorClasses:p,backgroundColorStyles:y}=Fa(()=>e.color),{roundedClasses:g}=xr(e),{intersectionRef:w,isIntersecting:b}=Vg(),x=ae(()=>parseFloat(e.max)),T=ae(()=>parseFloat(e.height)),F=ae(()=>tr(parseFloat(e.bufferValue)/x.value*100,0,100)),k=ae(()=>tr(parseFloat(a.value)/x.value*100,0,100)),S=ae(()=>r.value!==e.reverse),E=ae(()=>e.indeterminate?"fade-transition":"slide-x-transition");function C(D){if(!w.value)return;const{left:P,right:O,width:H}=w.value.getBoundingClientRect(),ie=S.value?H-D.clientX+(O-H):D.clientX-P;a.value=Math.round(ie/H*x.value)}return St(()=>l(e.tag,{ref:w,class:ct(["v-progress-linear",{"v-progress-linear--absolute":e.absolute,"v-progress-linear--active":e.active&&b.value,"v-progress-linear--reverse":S.value,"v-progress-linear--rounded":e.rounded,"v-progress-linear--rounded-bar":e.roundedBar,"v-progress-linear--striped":e.striped,"v-progress-linear--clickable":e.clickable},g.value,o.value,s.value,e.class]),style:Rt([{bottom:e.location==="bottom"?0:void 0,top:e.location==="top"?0:void 0,height:e.active?Yt(T.value):0,"--v-progress-linear-height":Yt(T.value),...e.absolute?i.value:{}},e.style]),role:"progressbar","aria-hidden":e.active?"false":"true","aria-valuemin":"0","aria-valuemax":e.max,"aria-valuenow":e.indeterminate?void 0:Math.min(parseFloat(a.value),x.value),onClick:e.clickable&&C},{default:()=>[e.stream&&v("div",{key:"stream",class:ct(["v-progress-linear__stream",c.value]),style:{...A.value,[S.value?"left":"right"]:Yt(-T.value),borderTop:`${Yt(T.value/2)} dotted`,opacity:parseFloat(e.bufferOpacity),top:`calc(50% - ${Yt(T.value/4)})`,width:Yt(100-F.value,"%"),"--v-progress-linear-stream-to":Yt(T.value*(S.value?1:-1))}},null),v("div",{class:ct(["v-progress-linear__background",d.value]),style:Rt([f.value,{opacity:parseFloat(e.bgOpacity),width:e.stream?0:void 0}])},null),v("div",{class:ct(["v-progress-linear__buffer",m.value]),style:Rt([h.value,{opacity:parseFloat(e.bufferOpacity),width:Yt(F.value,"%")}])},null),l(zd,{name:E.value},{default:()=>[e.indeterminate?v("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(D=>v("div",{key:D,class:ct(["v-progress-linear__indeterminate",D,p.value]),style:Rt(y.value)},null))]):v("div",{class:ct(["v-progress-linear__determinate",p.value]),style:Rt([y.value,{width:Yt(k.value,"%")}])},null)]}),n.default&&v("div",{class:"v-progress-linear__content"},[n.default({value:k.value,buffer:F.value})])]})),{}}}),Yw=it({loading:[Boolean,String]},"loader");function Lg(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qu();return{loaderClasses:Xe(()=>({[`${t}--loading`]:e.loading}))}}function Mg(e,t){let{slots:n}=t;return v("div",{class:ct(`${e.name}__loader`)},[n.default?.({color:e.color,isActive:e.active})||l(qw,{absolute:e.absolute,active:e.active,color:e.color,height:"2",indeterminate:!0},null)])}const tje=["static","relative","fixed","absolute","sticky"],Sh=it({position:{type:String,validator:e=>tje.includes(e)}},"position");function Eh(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qu();return{positionClasses:Xe(()=>e.position?`${t}--${e.position}`:void 0)}}function nje(){const e=Pr("useRoute");return ae(()=>e?.proxy?.$route)}function iQ(){return Pr("useRouter")?.proxy?.$router}function Og(e,t){const n=ew("RouterLink"),a=Xe(()=>!!(e.href||e.to)),r=ae(()=>a?.value||ZP(t,"click")||ZP(e,"click"));if(typeof n=="string"||!("useLink"in n)){const d=Xe(()=>e.href);return{isLink:a,isClickable:r,href:d,linkProps:is({href:d})}}const s=n.useLink({to:Xe(()=>e.to||""),replace:Xe(()=>e.replace)}),o=ae(()=>e.to?s:void 0),i=nje(),c=ae(()=>o.value?e.exact?i.value?o.value.isExactActive?.value&&bs(o.value.route.value.query,i.value.query):o.value.isExactActive?.value??!1:o.value.isActive?.value??!1:!1),A=ae(()=>e.to?o.value?.route.value.href:e.href);return{isLink:a,isClickable:r,isActive:c,route:o.value?.route,navigate:o.value?.navigate,href:A,linkProps:is({href:A,"aria-current":Xe(()=>c.value?"page":void 0)})}}const Hg=it({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let QC=!1;function aje(e,t){let n=!1,a,r;Ba&&e?.beforeEach&&(xn(()=>{window.addEventListener("popstate",s),a=e.beforeEach((o,i,c)=>{QC?n?t(c):c():setTimeout(()=>n?t(c):c()),QC=!0}),r=e?.afterEach(()=>{QC=!1})}),cs(()=>{window.removeEventListener("popstate",s),a?.(),r?.()}));function s(o){o.state?.replaced||(n=!0,setTimeout(()=>n=!1))}}function rje(e,t){Ke(()=>e.isActive?.value,n=>{e.isLink.value&&n!=null&&t&&xn(()=>{t(n)})},{immediate:!0})}const eB=Symbol("rippleStop"),sje=80;function FN(e,t){e.style.transform=t,e.style.webkitTransform=t}function tB(e){return e.constructor.name==="TouchEvent"}function lQ(e){return e.constructor.name==="KeyboardEvent"}const oje=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=0,r=0;if(!lQ(e)){const f=t.getBoundingClientRect(),m=tB(e)?e.touches[e.touches.length-1]:e;a=m.clientX-f.left,r=m.clientY-f.top}let s=0,o=.3;t._ripple?.circle?(o=.15,s=t.clientWidth/2,s=n.center?s:s+Math.sqrt((a-s)**2+(r-s)**2)/4):s=Math.sqrt(t.clientWidth**2+t.clientHeight**2)/2;const i=`${(t.clientWidth-s*2)/2}px`,c=`${(t.clientHeight-s*2)/2}px`,A=n.center?i:`${a-s}px`,d=n.center?c:`${r-s}px`;return{radius:s,scale:o,x:A,y:d,centerX:i,centerY:c}},B2={show(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t?._ripple?.enabled)return;const a=document.createElement("span"),r=document.createElement("span");a.appendChild(r),a.className="v-ripple__container",n.class&&(a.className+=` ${n.class}`);const{radius:s,scale:o,x:i,y:c,centerX:A,centerY:d}=oje(e,t,n),f=`${s*2}px`;r.className="v-ripple__animation",r.style.width=f,r.style.height=f,t.appendChild(a);const m=window.getComputedStyle(t);m&&m.position==="static"&&(t.style.position="relative",t.dataset.previousPosition="static"),r.classList.add("v-ripple__animation--enter"),r.classList.add("v-ripple__animation--visible"),FN(r,`translate(${i}, ${c}) scale3d(${o},${o},${o})`),r.dataset.activated=String(performance.now()),requestAnimationFrame(()=>{requestAnimationFrame(()=>{r.classList.remove("v-ripple__animation--enter"),r.classList.add("v-ripple__animation--in"),FN(r,`translate(${A}, ${d}) scale3d(1,1,1)`)})})},hide(e){if(!e?._ripple?.enabled)return;const t=e.getElementsByClassName("v-ripple__animation");if(t.length===0)return;const n=Array.from(t).findLast(s=>!s.dataset.isHiding);if(n)n.dataset.isHiding="true";else return;const a=performance.now()-Number(n.dataset.activated),r=Math.max(250-a,0);setTimeout(()=>{n.classList.remove("v-ripple__animation--in"),n.classList.add("v-ripple__animation--out"),setTimeout(()=>{e.getElementsByClassName("v-ripple__animation").length===1&&e.dataset.previousPosition&&(e.style.position=e.dataset.previousPosition,delete e.dataset.previousPosition),n.parentNode?.parentNode===e&&e.removeChild(n.parentNode)},300)},r)}};function uQ(e){return typeof e>"u"||!!e}function X0(e){const t={},n=e.currentTarget;if(!(!n?._ripple||n._ripple.touched||e[eB])){if(e[eB]=!0,tB(e))n._ripple.touched=!0,n._ripple.isTouch=!0;else if(n._ripple.isTouch)return;if(t.center=n._ripple.centered||lQ(e),n._ripple.class&&(t.class=n._ripple.class),tB(e)){if(n._ripple.showTimerCommit)return;n._ripple.showTimerCommit=()=>{B2.show(e,n,t)},n._ripple.showTimer=window.setTimeout(()=>{n?._ripple?.showTimerCommit&&(n._ripple.showTimerCommit(),n._ripple.showTimerCommit=null)},sje)}else B2.show(e,n,t)}}function PN(e){e[eB]=!0}function Ei(e){const t=e.currentTarget;if(t?._ripple){if(window.clearTimeout(t._ripple.showTimer),e.type==="touchend"&&t._ripple.showTimerCommit){t._ripple.showTimerCommit(),t._ripple.showTimerCommit=null,t._ripple.showTimer=window.setTimeout(()=>{Ei(e)});return}window.setTimeout(()=>{t._ripple&&(t._ripple.touched=!1)}),B2.hide(t)}}function cQ(e){const t=e.currentTarget;t?._ripple&&(t._ripple.showTimerCommit&&(t._ripple.showTimerCommit=null),window.clearTimeout(t._ripple.showTimer))}let J0=!1;function DN(e,t){!J0&&t.includes(e.key)&&(J0=!0,X0(e))}function dQ(e){J0=!1,Ei(e)}function AQ(e){J0&&(J0=!1,Ei(e))}function fQ(e,t,n){const{value:a,modifiers:r}=t,s=uQ(a);s||B2.hide(e),e._ripple=e._ripple??{},e._ripple.enabled=s,e._ripple.centered=r.center,e._ripple.circle=r.circle;const o=C0(a)?a:{};o.class&&(e._ripple.class=o.class);const i=o.keys??["Enter","Space"];if(e._ripple.keyDownHandler=c=>DN(c,i),s&&!n){if(r.stop){e.addEventListener("touchstart",PN,{passive:!0}),e.addEventListener("mousedown",PN);return}e.addEventListener("touchstart",X0,{passive:!0}),e.addEventListener("touchend",Ei,{passive:!0}),e.addEventListener("touchmove",cQ,{passive:!0}),e.addEventListener("touchcancel",Ei),e.addEventListener("mousedown",X0),e.addEventListener("mouseup",Ei),e.addEventListener("mouseleave",Ei),e.addEventListener("keydown",c=>DN(c,i)),e.addEventListener("keyup",dQ),e.addEventListener("blur",AQ),e.addEventListener("dragstart",Ei,{passive:!0})}else!s&&n&&mQ(e)}function mQ(e){e.removeEventListener("mousedown",X0),e.removeEventListener("touchstart",X0),e.removeEventListener("touchend",Ei),e.removeEventListener("touchmove",cQ),e.removeEventListener("touchcancel",Ei),e.removeEventListener("mouseup",Ei),e.removeEventListener("mouseleave",Ei),e._ripple?.keyDownHandler&&e.removeEventListener("keydown",e._ripple.keyDownHandler),e.removeEventListener("keyup",dQ),e.removeEventListener("dragstart",Ei),e.removeEventListener("blur",AQ)}function ije(e,t){fQ(e,t,!1)}function lje(e){mQ(e),delete e._ripple}function uje(e,t){if(t.value===t.oldValue)return;const n=uQ(t.oldValue);fQ(e,t,n)}const Co={mounted:ije,unmounted:lje,updated:uje},Xw=it({active:{type:Boolean,default:void 0},activeColor:String,baseColor:String,symbol:{type:null,default:c4},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:An,appendIcon:An,block:Boolean,readonly:Boolean,slim:Boolean,stacked:Boolean,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},...zo(),...tn(),...ds(),...Lr(),...es(),...nm(),...Yw(),...Wc(),...Sh(),...cr(),...Hg(),...Yu(),...Nn({tag:"button"}),...la(),...ml({variant:"elevated"})},"VBtn"),Jn=yt()({name:"VBtn",props:Xw(),emits:{"group:selected":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const{themeClasses:r}=ka(e),{borderClasses:s}=fi(e),{densityClasses:o}=Eo(e),{dimensionStyles:i}=Mr(e),{elevationClasses:c}=Ss(e),{loaderClasses:A}=Lg(e),{locationStyles:d}=rm(e),{positionClasses:f}=Eh(e),{roundedClasses:m}=xr(e),{sizeClasses:h,sizeStyles:p}=Ch(e),y=am(e,e.symbol,!1),g=Og(e,n),w=ae(()=>e.active!==void 0?e.active:g.isLink.value?g.isActive?.value:y?.isSelected.value),b=Xe(()=>w.value?e.activeColor??e.color:e.color),x=ae(()=>({color:y?.isSelected.value&&(!g.isLink.value||g.isActive?.value)||!y||g.isActive?.value?b.value??e.baseColor:e.baseColor,variant:e.variant})),{colorClasses:T,colorStyles:F,variantClasses:k}=em(x),S=ae(()=>y?.disabled.value||e.disabled),E=Xe(()=>e.variant==="elevated"&&!(e.disabled||e.flat||e.border)),C=ae(()=>{if(!(e.value===void 0||typeof e.value=="symbol"))return Object(e.value)===e.value?JSON.stringify(e.value,null,0):e.value});function D(P){S.value||g.isLink.value&&(P.metaKey||P.ctrlKey||P.shiftKey||P.button!==0||n.target==="_blank")||(g.navigate?.(P),y?.toggle())}return rje(g,y?.select),St(()=>{const P=g.isLink.value?"a":e.tag,O=!!(e.prependIcon||a.prepend),H=!!(e.appendIcon||a.append),ie=!!(e.icon&&e.icon!==!0);return ma(l(P,Ue({type:P==="a"?void 0:"button",class:["v-btn",y?.selectedClass.value,{"v-btn--active":w.value,"v-btn--block":e.block,"v-btn--disabled":S.value,"v-btn--elevated":E.value,"v-btn--flat":e.flat,"v-btn--icon":!!e.icon,"v-btn--loading":e.loading,"v-btn--readonly":e.readonly,"v-btn--slim":e.slim,"v-btn--stacked":e.stacked},r.value,s.value,T.value,o.value,c.value,A.value,f.value,m.value,h.value,k.value,e.class],style:[F.value,i.value,d.value,p.value,e.style],"aria-busy":e.loading?!0:void 0,disabled:S.value||void 0,tabindex:e.loading||e.readonly?-1:void 0,onClick:D,value:C.value},g.linkProps),{default:()=>[dA(!0,"v-btn"),!e.icon&&O&&v("span",{key:"prepend",class:"v-btn__prepend"},[a.prepend?l(Ln,{key:"prepend-defaults",disabled:!e.prependIcon,defaults:{VIcon:{icon:e.prependIcon}}},a.prepend):l(Ea,{key:"prepend-icon",icon:e.prependIcon},null)]),v("span",{class:"v-btn__content","data-no-activator":""},[!a.default&&ie?l(Ea,{key:"content-icon",icon:e.icon},null):l(Ln,{key:"content-defaults",disabled:!ie,defaults:{VIcon:{icon:e.icon}}},{default:()=>[a.default?.()??K(e.text)]})]),!e.icon&&H&&v("span",{key:"append",class:"v-btn__append"},[a.append?l(Ln,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VIcon:{icon:e.appendIcon}}},a.append):l(Ea,{key:"append-icon",icon:e.appendIcon},null)]),!!e.loading&&v("span",{key:"loader",class:"v-btn__loader"},[a.loader?.()??l(kf,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,width:"2"},null)])]}),[[Co,!S.value&&e.ripple,"",{center:!!e.icon}]])}),{group:y}}}),cje=it({...Xw({icon:"$menu",variant:"text"})},"VAppBarNavIcon"),dje=yt()({name:"VAppBarNavIcon",props:cje(),setup(e,t){let{slots:n}=t;return St(()=>l(Jn,Ue(e,{class:["v-app-bar-nav-icon"]}),n)),{}}}),Aje=yt()({name:"VAppBarTitle",props:J9(),setup(e,t){let{slots:n}=t;return St(()=>l(s4,Ue(e,{class:"v-app-bar-title"}),n)),{}}}),vQ=Gc("v-alert-title"),fje=it({iconSize:[Number,String],iconSizes:{type:Array,default:()=>[["x-small",10],["small",16],["default",24],["large",28],["x-large",32]]}},"iconSize");function mje(e,t){return{iconSize:ae(()=>{const a=new Map(e.iconSizes),r=e.iconSize??t()??"default";return a.has(r)?a.get(r):r})}}const vje=["success","info","warning","error"],hje=it({border:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:An,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>vje.includes(e)},...tn(),...ds(),...Lr(),...es(),...fje(),...Wc(),...Sh(),...cr(),...Nn(),...la(),...ml({variant:"flat"})},"VAlert"),pje=yt()({name:"VAlert",props:hje(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const r=ln(e,"modelValue"),s=Xe(()=>{if(e.icon!==!1)return e.type?e.icon??`$${e.type}`:e.icon}),{iconSize:o}=mje(e,()=>e.prominent?44:void 0),{themeClasses:i}=ka(e),{colorClasses:c,colorStyles:A,variantClasses:d}=em(()=>({color:e.color??e.type,variant:e.variant})),{densityClasses:f}=Eo(e),{dimensionStyles:m}=Mr(e),{elevationClasses:h}=Ss(e),{locationStyles:p}=rm(e),{positionClasses:y}=Eh(e),{roundedClasses:g}=xr(e),{textColorClasses:w,textColorStyles:b}=Ls(()=>e.borderColor),{t:x}=Qa(),T=Xe(()=>({"aria-label":x(e.closeLabel),onClick(F){r.value=!1,n("click:close",F)}}));return()=>{const F=!!(a.prepend||s.value),k=!!(a.title||e.title),S=!!(a.close||e.closable),E={density:e.density,icon:s.value,size:e.iconSize||e.prominent?o.value:void 0};return r.value&&l(e.tag,{class:ct(["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${e.border===!0?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},i.value,c.value,f.value,h.value,y.value,g.value,d.value,e.class]),style:Rt([A.value,m.value,p.value,e.style]),role:"alert"},{default:()=>[dA(!1,"v-alert"),e.border&&v("div",{key:"border",class:ct(["v-alert__border",w.value]),style:Rt(b.value)},null),F&&v("div",{key:"prepend",class:"v-alert__prepend"},[a.prepend?l(Ln,{key:"prepend-defaults",disabled:!s.value,defaults:{VIcon:{...E}}},a.prepend):l(Ea,Ue({key:"prepend-icon"},E),null)]),v("div",{class:"v-alert__content"},[k&&l(vQ,{key:"title"},{default:()=>[a.title?.()??e.title]}),a.text?.()??e.text,a.default?.()]),a.append&&v("div",{key:"append",class:"v-alert__append"},[a.append()]),S&&v("div",{key:"close",class:"v-alert__close"},[a.close?l(Ln,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>[a.close?.({props:T.value})]}):l(Jn,Ue({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},T.value),null)])]})}}}),gje=it({start:Boolean,end:Boolean,icon:An,image:String,text:String,...zo(),...tn(),...ds(),...cr(),...Yu(),...Nn(),...la(),...ml({variant:"flat"})},"VAvatar"),ul=yt()({name:"VAvatar",props:gje(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=ka(e),{borderClasses:r}=fi(e),{colorClasses:s,colorStyles:o,variantClasses:i}=em(e),{densityClasses:c}=Eo(e),{roundedClasses:A}=xr(e),{sizeClasses:d,sizeStyles:f}=Ch(e);return St(()=>l(e.tag,{class:ct(["v-avatar",{"v-avatar--start":e.start,"v-avatar--end":e.end},a.value,r.value,s.value,c.value,A.value,d.value,i.value,e.class]),style:Rt([o.value,f.value,e.style])},{default:()=>[n.default?l(Ln,{key:"content-defaults",defaults:{VImg:{cover:!0,src:e.image},VIcon:{icon:e.icon}}},{default:()=>[n.default()]}):e.image?l(Oc,{key:"image",src:e.image,alt:"",cover:!0},null):e.icon?l(Ea,{key:"icon",icon:e.icon},null):e.text,dA(!1,"v-avatar")]})),{}}}),yje=it({text:String,onClick:Ns(),...tn(),...la()},"VLabel"),Bh=yt()({name:"VLabel",props:yje(),setup(e,t){let{slots:n}=t;return St(()=>v("label",{class:ct(["v-label",{"v-label--clickable":!!e.onClick},e.class]),style:Rt(e.style),onClick:e.onClick},[e.text,n.default?.()])),{}}}),hQ=Symbol.for("vuetify:selection-control-group"),d4=it({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:An,trueIcon:An,ripple:{type:[Boolean,Object],default:!0},multiple:{type:Boolean,default:null},name:String,readonly:{type:Boolean,default:null},modelValue:null,type:String,valueComparator:{type:Function,default:bs},...tn(),...ds(),...la()},"SelectionControlGroup"),_je=it({...d4({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup"),pQ=yt()({name:"VSelectionControlGroup",props:_je(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=ln(e,"modelValue"),r=Go(),s=Xe(()=>e.id||`v-selection-control-group-${r}`),o=Xe(()=>e.name||s.value),i=new Set;return Ha(hQ,{modelValue:a,forceUpdate:()=>{i.forEach(c=>c())},onForceUpdate:c=>{i.add(c),cs(()=>{i.delete(c)})}}),wr({[e.defaultsTarget]:{color:Xe(()=>e.color),disabled:Xe(()=>e.disabled),density:Xe(()=>e.density),error:Xe(()=>e.error),inline:Xe(()=>e.inline),modelValue:a,multiple:Xe(()=>!!e.multiple||e.multiple==null&&Array.isArray(a.value)),name:o,falseIcon:Xe(()=>e.falseIcon),trueIcon:Xe(()=>e.trueIcon),readonly:Xe(()=>e.readonly),ripple:Xe(()=>e.ripple),type:Xe(()=>e.type),valueComparator:Xe(()=>e.valueComparator)}}),St(()=>v("div",{class:ct(["v-selection-control-group",{"v-selection-control-group--inline":e.inline},e.class]),style:Rt(e.style),role:e.type==="radio"?"radiogroup":void 0},[n.default?.()])),{}}}),Jw=it({label:String,baseColor:String,trueValue:null,falseValue:null,value:null,...tn(),...d4()},"VSelectionControl");function wje(e){const t=Tn(hQ,void 0),{densityClasses:n}=Eo(e),a=ln(e,"modelValue"),r=ae(()=>e.trueValue!==void 0?e.trueValue:e.value!==void 0?e.value:!0),s=ae(()=>e.falseValue!==void 0?e.falseValue:!1),o=ae(()=>!!e.multiple||e.multiple==null&&Array.isArray(a.value)),i=ae({get(){const h=t?t.modelValue.value:a.value;return o.value?pr(h).some(p=>e.valueComparator(p,r.value)):e.valueComparator(h,r.value)},set(h){if(e.readonly)return;const p=h?r.value:s.value;let y=p;o.value&&(y=h?[...pr(a.value),p]:pr(a.value).filter(g=>!e.valueComparator(g,r.value))),t?t.modelValue.value=y:a.value=y}}),{textColorClasses:c,textColorStyles:A}=Ls(()=>{if(!(e.error||e.disabled))return i.value?e.color:e.baseColor}),{backgroundColorClasses:d,backgroundColorStyles:f}=Fa(()=>i.value&&!e.error&&!e.disabled?e.color:e.baseColor),m=ae(()=>i.value?e.trueIcon:e.falseIcon);return{group:t,densityClasses:n,trueValue:r,falseValue:s,model:i,textColorClasses:c,textColorStyles:A,backgroundColorClasses:d,backgroundColorStyles:f,icon:m}}const aA=yt()({name:"VSelectionControl",directives:{vRipple:Co},inheritAttrs:!1,props:Jw(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const{group:r,densityClasses:s,icon:o,model:i,textColorClasses:c,textColorStyles:A,backgroundColorClasses:d,backgroundColorStyles:f,trueValue:m}=wje(e),h=Go(),p=Ht(!1),y=Ht(!1),g=V(),w=Xe(()=>e.id||`input-${h}`),b=Xe(()=>!e.disabled&&!e.readonly);r?.onForceUpdate(()=>{g.value&&(g.value.checked=i.value)});function x(S){b.value&&(p.value=!0,Pv(S.target,":focus-visible")!==!1&&(y.value=!0))}function T(){p.value=!1,y.value=!1}function F(S){S.stopPropagation()}function k(S){if(!b.value){g.value&&(g.value.checked=i.value);return}e.readonly&&r&&xn(()=>r.forceUpdate()),i.value=S.target.checked}return St(()=>{const S=a.label?a.label({label:e.label,props:{for:w.value}}):e.label,[E,C]=iA(n),D=v("input",Ue({ref:g,checked:i.value,disabled:!!e.disabled,id:w.value,onBlur:T,onFocus:x,onInput:k,"aria-disabled":!!e.disabled,"aria-label":e.label,type:e.type,value:m.value,name:e.name,"aria-checked":e.type==="checkbox"?i.value:void 0},C),null);return v("div",Ue({class:["v-selection-control",{"v-selection-control--dirty":i.value,"v-selection-control--disabled":e.disabled,"v-selection-control--error":e.error,"v-selection-control--focused":p.value,"v-selection-control--focus-visible":y.value,"v-selection-control--inline":e.inline},s.value,e.class]},E,{style:e.style}),[v("div",{class:ct(["v-selection-control__wrapper",c.value]),style:Rt(A.value)},[a.default?.({backgroundColorClasses:d,backgroundColorStyles:f}),ma(v("div",{class:ct(["v-selection-control__input"])},[a.input?.({model:i,textColorClasses:c,textColorStyles:A,backgroundColorClasses:d,backgroundColorStyles:f,inputNode:D,icon:o.value,props:{onFocus:x,onBlur:T,id:w.value}})??v(We,null,[o.value&&l(Ea,{key:"icon",icon:o.value},null),D])]),[[Co,!e.disabled&&!e.readonly&&e.ripple,null,{center:!0,circle:!0}]])]),S&&l(Bh,{for:w.value,onClick:F},{default:()=>[S]})])}),{isFocused:p,input:g}}}),gQ=it({indeterminate:Boolean,indeterminateIcon:{type:An,default:"$checkboxIndeterminate"},...Jw({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),Mu=yt()({name:"VCheckboxBtn",props:gQ(),emits:{"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{slots:n}=t;const a=ln(e,"indeterminate"),r=ln(e,"modelValue");function s(c){a.value&&(a.value=!1)}const o=Xe(()=>a.value?e.indeterminateIcon:e.falseIcon),i=Xe(()=>a.value?e.indeterminateIcon:e.trueIcon);return St(()=>{const c=$a(aA.filterProps(e),["modelValue"]);return l(aA,Ue(c,{modelValue:r.value,"onUpdate:modelValue":[A=>r.value=A,s],class:["v-checkbox-btn",e.class],style:e.style,type:"checkbox",falseIcon:o.value,trueIcon:i.value,"aria-checked":a.value?"mixed":void 0}),n)}),{}}});function yQ(e){const{t}=Qa();function n(a){let{name:r,color:s,...o}=a;const i={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[r],c=e[`onClick:${r}`];function A(f){f.key!=="Enter"&&f.key!==" "||(f.preventDefault(),f.stopPropagation(),aw(c,new PointerEvent("click",f)))}const d=c&&i?t(`$vuetify.input.${i}`,e.label??""):void 0;return l(Ea,Ue({icon:e[`${r}Icon`],"aria-label":d,onClick:c,onKeydown:A,color:s},o),null)}return{InputIcon:n}}const bje=it({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...tn(),...lu({transition:{component:i4,leaveAbsolute:!0,group:!0}})},"VMessages"),_Q=yt()({name:"VMessages",props:bje(),setup(e,t){let{slots:n}=t;const a=ae(()=>pr(e.messages)),{textColorClasses:r,textColorStyles:s}=Ls(()=>e.color);return St(()=>l(po,{transition:e.transition,tag:"div",class:ct(["v-messages",r.value,e.class]),style:Rt([s.value,e.style])},{default:()=>[e.active&&a.value.map((o,i)=>v("div",{class:"v-messages__message",key:`${i}-${a.value}`},[n.message?n.message({message:o}):o]))]})),{}}}),$g=it({focused:Boolean,"onUpdate:focused":Ns()},"focus");function jc(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qu();const n=ln(e,"focused"),a=Xe(()=>({[`${t}--focused`]:n.value}));function r(){n.value=!0}function s(){n.value=!1}return{focusClasses:a,isFocused:n,focus:r,blur:s}}const wQ=Symbol.for("vuetify:form"),xje=it({disabled:Boolean,fastFail:Boolean,readonly:Boolean,modelValue:{type:Boolean,default:null},validateOn:{type:String,default:"input"}},"form");function Cje(e){const t=ln(e,"modelValue"),n=Xe(()=>e.disabled),a=Xe(()=>e.readonly),r=Ht(!1),s=V([]),o=V([]);async function i(){const d=[];let f=!0;o.value=[],r.value=!0;for(const m of s.value){const h=await m.validate();if(h.length>0&&(f=!1,d.push({id:m.id,errorMessages:h})),!f&&e.fastFail)break}return o.value=d,r.value=!1,{valid:f,errors:o.value}}function c(){s.value.forEach(d=>d.reset())}function A(){s.value.forEach(d=>d.resetValidation())}return Ke(s,()=>{let d=0,f=0;const m=[];for(const h of s.value)h.isValid===!1?(f++,m.push({id:h.id,errorMessages:h.errorMessages})):h.isValid===!0&&d++;o.value=m,t.value=f>0?!1:d===s.value.length?!0:null},{deep:!0,flush:"post"}),Ha(wQ,{register:d=>{let{id:f,vm:m,validate:h,reset:p,resetValidation:y}=d;s.value.some(g=>g.id===f),s.value.push({id:f,validate:h,reset:p,resetValidation:y,vm:f_(m),isValid:null,errorMessages:[]})},unregister:d=>{s.value=s.value.filter(f=>f.id!==d)},update:(d,f,m)=>{const h=s.value.find(p=>p.id===d);h&&(h.isValid=f,h.errorMessages=m)},isDisabled:n,isReadonly:a,isValidating:r,isValid:t,items:s,validateOn:Xe(()=>e.validateOn)}),{errors:o,isDisabled:n,isReadonly:a,isValidating:r,isValid:t,items:s,validate:i,reset:c,resetValidation:A}}function Qg(e){const t=Tn(wQ,null);return{...t,isReadonly:ae(()=>!!(e?.readonly??t?.isReadonly.value)),isDisabled:ae(()=>!!(e?.disabled??t?.isDisabled.value))}}const Sje=Symbol.for("vuetify:rules");function Eje(e){const t=Tn(Sje,null);if(!e){if(!t)throw new Error("Could not find Vuetify rules injection");return t.aliases}return t?.resolve(e)??Xe(e)}const bQ=it({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...$g()},"validation");function xQ(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qu(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Go();const a=ln(e,"modelValue"),r=ae(()=>e.validationValue===void 0?a.value:e.validationValue),s=Qg(e),o=Eje(()=>e.rules),i=V([]),c=Ht(!0),A=ae(()=>!!(pr(a.value===""?null:a.value).length||pr(r.value===""?null:r.value).length)),d=ae(()=>e.errorMessages?.length?pr(e.errorMessages).concat(i.value).slice(0,Math.max(0,Number(e.maxErrors))):i.value),f=ae(()=>{let T=(e.validateOn??s.validateOn?.value)||"input";T==="lazy"&&(T="input lazy"),T==="eager"&&(T="input eager");const F=new Set(T?.split(" ")??[]);return{input:F.has("input"),blur:F.has("blur")||F.has("input")||F.has("invalid-input"),invalidInput:F.has("invalid-input"),lazy:F.has("lazy"),eager:F.has("eager")}}),m=ae(()=>e.error||e.errorMessages?.length?!1:e.rules.length?c.value?i.value.length||f.value.lazy?null:!0:!i.value.length:!0),h=Ht(!1),p=ae(()=>({[`${t}--error`]:m.value===!1,[`${t}--dirty`]:A.value,[`${t}--disabled`]:s.isDisabled.value,[`${t}--readonly`]:s.isReadonly.value})),y=Pr("validation"),g=ae(()=>e.name??$e(n));tu(()=>{s.register?.({id:g.value,vm:y,validate:x,reset:w,resetValidation:b})}),da(()=>{s.unregister?.(g.value)}),un(async()=>{f.value.lazy||await x(!f.value.eager),s.update?.(g.value,m.value,d.value)}),yo(()=>f.value.input||f.value.invalidInput&&m.value===!1,()=>{Ke(r,()=>{if(r.value!=null)x();else if(e.focused){const T=Ke(()=>e.focused,F=>{F||x(),T()})}})}),yo(()=>f.value.blur,()=>{Ke(()=>e.focused,T=>{T||x()})}),Ke([m,d],()=>{s.update?.(g.value,m.value,d.value)});async function w(){a.value=null,await xn(),await b()}async function b(){c.value=!0,f.value.lazy?i.value=[]:await x(!f.value.eager)}async function x(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const F=[];h.value=!0;for(const k of o.value){if(F.length>=Number(e.maxErrors??1))break;const E=await(typeof k=="function"?k:()=>k)(r.value);if(E!==!0){if(E!==!1&&typeof E!="string"){console.warn(`${E} is not a valid value. Rule functions must return boolean true or a string.`);continue}F.push(E||"")}}return i.value=F,h.value=!1,c.value=T,i.value}return{errorMessages:d,isDirty:A,isDisabled:s.isDisabled,isReadonly:s.isReadonly,isPristine:c,isValid:m,isValidating:h,reset:w,resetValidation:b,validate:x,validationClasses:p}}const qc=it({id:String,appendIcon:An,baseColor:String,centerAffix:{type:Boolean,default:!0},color:String,glow:Boolean,iconColor:[Boolean,String],prependIcon:An,hideDetails:[Boolean,String],hideSpinButtons:Boolean,hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},"onClick:prepend":Ns(),"onClick:append":Ns(),...tn(),...ds(),...Qc(Lr(),["maxWidth","minWidth","width"]),...la(),...bQ()},"VInput"),Zs=yt()({name:"VInput",props:{...qc()},emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:a,emit:r}=t;const{densityClasses:s}=Eo(e),{dimensionStyles:o}=Mr(e),{themeClasses:i}=ka(e),{rtlClasses:c}=Zr(),{InputIcon:A}=yQ(e),d=Go(),f=ae(()=>e.id||`input-${d}`),{errorMessages:m,isDirty:h,isDisabled:p,isReadonly:y,isPristine:g,isValid:w,isValidating:b,reset:x,resetValidation:T,validate:F,validationClasses:k}=xQ(e,"v-input",f),S=ae(()=>e.errorMessages?.length||!g.value&&m.value.length?m.value:e.hint&&(e.persistentHint||e.focused)?e.hint:e.messages),E=Xe(()=>S.value.length>0),C=Xe(()=>!e.hideDetails||e.hideDetails==="auto"&&(E.value||!!a.details)),D=ae(()=>C.value?`${f.value}-messages`:void 0),P=ae(()=>({id:f,messagesId:D,isDirty:h,isDisabled:p,isReadonly:y,isPristine:g,isValid:w,isValidating:b,hasDetails:C,reset:x,resetValidation:T,validate:F})),O=Xe(()=>e.error||e.disabled?void 0:e.focused?e.color:e.baseColor),H=Xe(()=>{if(e.iconColor)return e.iconColor===!0?O.value:e.iconColor});return St(()=>{const ie=!!(a.prepend||e.prependIcon),Ae=!!(a.append||e.appendIcon);return v("div",{class:ct(["v-input",`v-input--${e.direction}`,{"v-input--center-affix":e.centerAffix,"v-input--focused":e.focused,"v-input--glow":e.glow,"v-input--hide-spin-buttons":e.hideSpinButtons},s.value,i.value,c.value,k.value,e.class]),style:Rt([o.value,e.style])},[ie&&v("div",{key:"prepend",class:"v-input__prepend"},[a.prepend?.(P.value),e.prependIcon&&l(A,{key:"prepend-icon",name:"prepend",color:H.value},null)]),a.default&&v("div",{class:"v-input__control"},[a.default?.(P.value)]),Ae&&v("div",{key:"append",class:"v-input__append"},[e.appendIcon&&l(A,{key:"append-icon",name:"append",color:H.value},null),a.append?.(P.value)]),C.value&&v("div",{id:D.value,class:"v-input__details",role:"alert","aria-live":"polite"},[l(_Q,{active:E.value,messages:S.value},{message:a.message}),a.details?.(P.value)])])}),{reset:x,resetValidation:T,validate:F,isValid:w,errorMessages:m}}}),GC=Symbol("Forwarded refs");function zC(e,t){let n=e;for(;n;){const a=Reflect.getOwnPropertyDescriptor(n,t);if(a)return a;n=Object.getPrototypeOf(n)}}function Es(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return e[GC]=n,new Proxy(e,{get(r,s){if(Reflect.has(r,s))return Reflect.get(r,s);if(!(typeof s=="symbol"||s.startsWith("$")||s.startsWith("__"))){for(const o of n)if(o.value&&Reflect.has(o.value,s)){const i=Reflect.get(o.value,s);return typeof i=="function"?i.bind(o.value):i}}},has(r,s){if(Reflect.has(r,s))return!0;if(typeof s=="symbol"||s.startsWith("$")||s.startsWith("__"))return!1;for(const o of n)if(o.value&&Reflect.has(o.value,s))return!0;return!1},set(r,s,o){if(Reflect.has(r,s))return Reflect.set(r,s,o);if(typeof s=="symbol"||s.startsWith("$")||s.startsWith("__"))return!1;for(const i of n)if(i.value&&Reflect.has(i.value,s))return Reflect.set(i.value,s,o);return!1},getOwnPropertyDescriptor(r,s){const o=Reflect.getOwnPropertyDescriptor(r,s);if(o)return o;if(!(typeof s=="symbol"||s.startsWith("$")||s.startsWith("__"))){for(const i of n){if(!i.value)continue;const c=zC(i.value,s)??("_"in i.value?zC(i.value._?.setupState,s):void 0);if(c)return c}for(const i of n){const c=i.value&&i.value[GC];if(!c)continue;const A=c.slice();for(;A.length;){const d=A.shift(),f=zC(d.value,s);if(f)return f;const m=d.value&&d.value[GC];m&&A.push(...m)}}}}})}const Bje=it({...qc(),...$a(gQ(),["inline"])},"VCheckbox"),kje=yt()({name:"VCheckbox",inheritAttrs:!1,props:Bje(),emits:{"update:modelValue":e=>!0,"update:focused":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const r=ln(e,"modelValue"),{isFocused:s,focus:o,blur:i}=jc(e),c=V(),A=Go();return St(()=>{const[d,f]=iA(n),m=Zs.filterProps(e),h=Mu.filterProps(e);return l(Zs,Ue({ref:c,class:["v-checkbox",e.class]},d,m,{modelValue:r.value,"onUpdate:modelValue":p=>r.value=p,id:e.id||`checkbox-${A}`,focused:s.value,style:e.style}),{...a,default:p=>{let{id:y,messagesId:g,isDisabled:w,isReadonly:b,isValid:x}=p;return l(Mu,Ue(h,{id:y.value,"aria-describedby":g.value,disabled:w.value,readonly:b.value},f,{error:x.value===!1,modelValue:r.value,"onUpdate:modelValue":T=>r.value=T,onFocus:o,onBlur:i}),a)}})}),Es({},c)}});function Tje(e){let{selectedElement:t,containerElement:n,isRtl:a,isHorizontal:r}=e;const s=Z0(r,n),o=CQ(r,a,n),i=Z0(r,t),c=SQ(r,t),A=i*.4;return o>c?c-A:o+s<c+i?c-s+i+A:o}function Ije(e){let{selectedElement:t,containerElement:n,isHorizontal:a}=e;const r=Z0(a,n),s=SQ(a,t),o=Z0(a,t);return s-r/2+o/2}function UN(e,t){return t?.[e?"scrollWidth":"scrollHeight"]||0}function Fje(e,t){return t?.[e?"clientWidth":"clientHeight"]||0}function CQ(e,t,n){if(!n)return 0;const{scrollLeft:a,offsetWidth:r,scrollWidth:s}=n;return e?t?s-r+a:a:n.scrollTop}function Z0(e,t){return t?.[e?"offsetWidth":"offsetHeight"]||0}function SQ(e,t){return t?.[e?"offsetLeft":"offsetTop"]||0}const EQ=Symbol.for("vuetify:v-slide-group"),A4=it({centerActive:Boolean,contentClass:null,direction:{type:String,default:"horizontal"},symbol:{type:null,default:EQ},nextIcon:{type:An,default:"$next"},prevIcon:{type:An,default:"$prev"},showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["always","desktop","mobile"].includes(e)},...tn(),...Hf({mobile:null}),...Nn(),...tm({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),eg=yt()({name:"VSlideGroup",props:A4(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{isRtl:a}=Zr(),{displayClasses:r,mobile:s}=dl(e),o=AA(e,e.symbol),i=Ht(!1),c=Ht(0),A=Ht(0),d=Ht(0),f=ae(()=>e.direction==="horizontal"),{resizeRef:m,contentRect:h}=Kl(),{resizeRef:p,contentRect:y}=Kl(),g=Qne(),w=ae(()=>({container:m.el,duration:200,easing:"easeOutQuart"})),b=ae(()=>o.selected.value.length?o.items.value.findIndex(L=>L.id===o.selected.value[0]):-1),x=ae(()=>o.selected.value.length?o.items.value.findIndex(L=>L.id===o.selected.value[o.selected.value.length-1]):-1);if(Ba){let L=-1;Ke(()=>[o.selected.value,h.value,y.value,f.value],()=>{cancelAnimationFrame(L),L=requestAnimationFrame(()=>{if(h.value&&y.value){const N=f.value?"width":"height";A.value=h.value[N],d.value=y.value[N],i.value=A.value+1<d.value}if(b.value>=0&&p.el){const N=p.el.children[x.value];F(N,e.centerActive)}})})}const T=Ht(!1);function F(L,N){let q=0;N?q=Ije({containerElement:m.el,isHorizontal:f.value,selectedElement:L}):q=Tje({containerElement:m.el,isHorizontal:f.value,isRtl:a.value,selectedElement:L}),k(q)}function k(L){if(!Ba||!m.el)return;const N=Z0(f.value,m.el),q=CQ(f.value,a.value,m.el);if(!(UN(f.value,m.el)<=N||Math.abs(L-q)<16)){if(f.value&&a.value&&m.el){const{scrollWidth:ee,offsetWidth:z}=m.el;L=ee-z-L}f.value?g.horizontal(L,w.value):g(L,w.value)}}function S(L){const{scrollTop:N,scrollLeft:q}=L.target;c.value=f.value?q:N}function E(L){if(T.value=!0,!(!i.value||!p.el)){for(const N of L.composedPath())for(const q of p.el.children)if(q===N){F(q);return}}}function C(L){T.value=!1}let D=!1;function P(L){!D&&!T.value&&!(L.relatedTarget&&p.el?.contains(L.relatedTarget))&&Ae(),D=!1}function O(){D=!0}function H(L){if(!p.el)return;function N(q){L.preventDefault(),Ae(q)}f.value?L.key==="ArrowRight"?N(a.value?"prev":"next"):L.key==="ArrowLeft"&&N(a.value?"next":"prev"):L.key==="ArrowDown"?N("next"):L.key==="ArrowUp"&&N("prev"),L.key==="Home"?N("first"):L.key==="End"&&N("last")}function ie(L,N){if(!L)return;let q=L;do q=q?.[N==="next"?"nextElementSibling":"previousElementSibling"];while(q?.hasAttribute("disabled"));return q}function Ae(L){if(!p.el)return;let N;if(!L)N=S0(p.el)[0];else if(L==="next"){if(N=ie(p.el.querySelector(":focus"),L),!N)return Ae("first")}else if(L==="prev"){if(N=ie(p.el.querySelector(":focus"),L),!N)return Ae("last")}else L==="first"?(N=p.el.firstElementChild,N?.hasAttribute("disabled")&&(N=ie(N,"next"))):L==="last"&&(N=p.el.lastElementChild,N?.hasAttribute("disabled")&&(N=ie(N,"prev")));N&&N.focus({preventScroll:!0})}function j(L){const N=f.value&&a.value?-1:1,q=(L==="prev"?-N:N)*A.value;let Q=c.value+q;if(f.value&&a.value&&m.el){const{scrollWidth:ee,offsetWidth:z}=m.el;Q+=ee-z}k(Q)}const J=ae(()=>({next:o.next,prev:o.prev,select:o.select,isSelected:o.isSelected})),ue=ae(()=>i.value||Math.abs(c.value)>0),ne=ae(()=>{switch(e.showArrows){case"always":return!0;case"desktop":return!s.value;case!0:return ue.value;case"mobile":return s.value||ue.value;default:return!s.value&&ue.value}}),Y=ae(()=>Math.abs(c.value)>1),te=ae(()=>{if(!m.value||!ue.value)return!1;const L=UN(f.value,m.el),N=Fje(f.value,m.el);return L-N-Math.abs(c.value)>1});return St(()=>l(e.tag,{class:ct(["v-slide-group",{"v-slide-group--vertical":!f.value,"v-slide-group--has-affixes":ne.value,"v-slide-group--is-overflowing":i.value},r.value,e.class]),style:Rt(e.style),tabindex:T.value||o.selected.value.length?-1:0,onFocus:P},{default:()=>[ne.value&&v("div",{key:"prev",class:ct(["v-slide-group__prev",{"v-slide-group__prev--disabled":!Y.value}]),onMousedown:O,onClick:()=>Y.value&&j("prev")},[n.prev?.(J.value)??l(Y0,null,{default:()=>[l(Ea,{icon:a.value?e.nextIcon:e.prevIcon},null)]})]),v("div",{key:"container",ref:m,class:ct(["v-slide-group__container",e.contentClass]),onScroll:S},[v("div",{ref:p,class:"v-slide-group__content",onFocusin:E,onFocusout:C,onKeydown:H},[n.default?.(J.value)])]),ne.value&&v("div",{key:"next",class:ct(["v-slide-group__next",{"v-slide-group__next--disabled":!te.value}]),onMousedown:O,onClick:()=>te.value&&j("next")},[n.next?.(J.value)??l(Y0,null,{default:()=>[l(Ea,{icon:a.value?e.prevIcon:e.nextIcon},null)]})])]})),{selected:o.selected,scrollTo:j,scrollOffset:c,focus:Ae,hasPrev:Y,hasNext:te}}}),BQ=Symbol.for("vuetify:v-chip-group"),Pje=it({baseColor:String,column:Boolean,filter:Boolean,valueComparator:{type:Function,default:bs},...A4(),...tn(),...tm({selectedClass:"v-chip--selected"}),...Nn(),...la(),...ml({variant:"tonal"})},"VChipGroup"),Dje=yt()({name:"VChipGroup",props:Pje(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:a}=ka(e),{isSelected:r,select:s,next:o,prev:i,selected:c}=AA(e,BQ);return wr({VChip:{baseColor:Xe(()=>e.baseColor),color:Xe(()=>e.color),disabled:Xe(()=>e.disabled),filter:Xe(()=>e.filter),variant:Xe(()=>e.variant)}}),St(()=>{const A=eg.filterProps(e);return l(eg,Ue(A,{class:["v-chip-group",{"v-chip-group--column":e.column},a.value,e.class],style:e.style}),{default:()=>[n.default?.({isSelected:r,select:s,next:o,prev:i,selected:c.value})]})}),{}}}),Uje=it({activeClass:String,appendAvatar:String,appendIcon:An,baseColor:String,closable:Boolean,closeIcon:{type:An,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:An,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:An,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},modelValue:{type:Boolean,default:!0},onClick:Ns(),onClickOnce:Ns(),...zo(),...tn(),...ds(),...es(),...nm(),...cr(),...Hg(),...Yu(),...Nn({tag:"span"}),...la(),...ml({variant:"tonal"})},"VChip"),kh=yt()({name:"VChip",directives:{vRipple:Co},props:Uje(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0,"group:selected":e=>!0,click:e=>!0},setup(e,t){let{attrs:n,emit:a,slots:r}=t;const{t:s}=Qa(),{borderClasses:o}=fi(e),{densityClasses:i}=Eo(e),{elevationClasses:c}=Ss(e),{roundedClasses:A}=xr(e),{sizeClasses:d}=Ch(e),{themeClasses:f}=ka(e),m=ln(e,"modelValue"),h=am(e,BQ,!1),p=Og(e,n),y=Xe(()=>e.link!==!1&&p.isLink.value),g=ae(()=>!e.disabled&&e.link!==!1&&(!!h||e.link||p.isClickable.value)),w=Xe(()=>({"aria-label":s(e.closeLabel),disabled:e.disabled,onClick(S){S.preventDefault(),S.stopPropagation(),m.value=!1,a("click:close",S)}})),{colorClasses:b,colorStyles:x,variantClasses:T}=em(()=>({color:!h||h.isSelected.value?e.color??e.baseColor:e.baseColor,variant:e.variant}));function F(S){a("click",S),g.value&&(p.navigate?.(S),h?.toggle())}function k(S){(S.key==="Enter"||S.key===" ")&&(S.preventDefault(),F(S))}return()=>{const S=p.isLink.value?"a":e.tag,E=!!(e.appendIcon||e.appendAvatar),C=!!(E||r.append),D=!!(r.close||e.closable),P=!!(r.filter||e.filter)&&h,O=!!(e.prependIcon||e.prependAvatar),H=!!(O||r.prepend);return m.value&&ma(l(S,Ue({class:["v-chip",{"v-chip--disabled":e.disabled,"v-chip--label":e.label,"v-chip--link":g.value,"v-chip--filter":P,"v-chip--pill":e.pill,[`${e.activeClass}`]:e.activeClass&&p.isActive?.value},f.value,o.value,b.value,i.value,c.value,A.value,d.value,T.value,h?.selectedClass.value,e.class],style:[x.value,e.style],disabled:e.disabled||void 0,draggable:e.draggable,tabindex:g.value?0:void 0,onClick:F,onKeydown:g.value&&!y.value&&k},p.linkProps),{default:()=>[dA(g.value,"v-chip"),P&&l(l4,{key:"filter"},{default:()=>[ma(v("div",{class:"v-chip__filter"},[r.filter?l(Ln,{key:"filter-defaults",disabled:!e.filterIcon,defaults:{VIcon:{icon:e.filterIcon}}},r.filter):l(Ea,{key:"filter-icon",icon:e.filterIcon},null)]),[[ci,h.isSelected.value]])]}),H&&v("div",{key:"prepend",class:"v-chip__prepend"},[r.prepend?l(Ln,{key:"prepend-defaults",disabled:!O,defaults:{VAvatar:{image:e.prependAvatar,start:!0},VIcon:{icon:e.prependIcon,start:!0}}},r.prepend):v(We,null,[e.prependIcon&&l(Ea,{key:"prepend-icon",icon:e.prependIcon,start:!0},null),e.prependAvatar&&l(ul,{key:"prepend-avatar",image:e.prependAvatar,start:!0},null)])]),v("div",{class:"v-chip__content","data-no-activator":""},[r.default?.({isSelected:h?.isSelected.value,selectedClass:h?.selectedClass.value,select:h?.select,toggle:h?.toggle,value:h?.value.value,disabled:e.disabled})??K(e.text)]),C&&v("div",{key:"append",class:"v-chip__append"},[r.append?l(Ln,{key:"append-defaults",disabled:!E,defaults:{VAvatar:{end:!0,image:e.appendAvatar},VIcon:{end:!0,icon:e.appendIcon}}},r.append):v(We,null,[e.appendIcon&&l(Ea,{key:"append-icon",end:!0,icon:e.appendIcon},null),e.appendAvatar&&l(ul,{key:"append-avatar",end:!0,image:e.appendAvatar},null)])]),D&&v("button",Ue({key:"close",class:"v-chip__close",type:"button","data-testid":"close-chip"},w.value),[r.close?l(Ln,{key:"close-defaults",defaults:{VIcon:{icon:e.closeIcon,size:"x-small"}}},r.close):l(Ea,{key:"close-icon",icon:e.closeIcon,size:"x-small"},null)])]}),[[Co,g.value&&e.ripple,null]])}}}),Rje=it({color:String,inset:Boolean,length:[Number,String],opacity:[Number,String],thickness:[Number,String],vertical:Boolean,...tn(),...la()},"VDivider"),Ii=yt()({name:"VDivider",props:Rje(),setup(e,t){let{attrs:n,slots:a}=t;const{themeClasses:r}=ka(e),{textColorClasses:s,textColorStyles:o}=Ls(()=>e.color),i=ae(()=>{const c={};return e.length&&(c[e.vertical?"height":"width"]=Yt(e.length)),e.thickness&&(c[e.vertical?"borderRightWidth":"borderTopWidth"]=Yt(e.thickness)),c});return St(()=>{const c=v("hr",{class:ct([{"v-divider":!0,"v-divider--inset":e.inset,"v-divider--vertical":e.vertical},r.value,s.value,e.class]),style:Rt([i.value,o.value,{"--v-border-opacity":e.opacity},e.style]),"aria-orientation":!n.role||n.role==="separator"?e.vertical?"vertical":"horizontal":void 0,role:`${n.role||"separator"}`},null);return a.default?v("div",{class:ct(["v-divider__wrapper",{"v-divider__wrapper--vertical":e.vertical,"v-divider__wrapper--inset":e.inset}])},[c,v("div",{class:"v-divider__content"},[a.default()]),c]):c}),{}}}),nB=Symbol.for("vuetify:list");function kQ(){let{filterable:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{filterable:!1};const t=Tn(nB,{filterable:!1,hasPrepend:Ht(!1),updateHasPrepend:()=>null}),n={filterable:t.filterable||e,hasPrepend:Ht(!1),updateHasPrepend:a=>{a&&(n.hasPrepend.value=a)}};return Ha(nB,n),t}function TQ(){return Tn(nB,null)}const f4=e=>{const t={activate:n=>{let{id:a,value:r,activated:s}=n;return a=Cn(a),e&&!r&&s.size===1&&s.has(a)||(r?s.add(a):s.delete(a)),s},in:(n,a,r)=>{let s=new Set;if(n!=null)for(const o of pr(n))s=t.activate({id:o,value:!0,activated:new Set(s),children:a,parents:r});return s},out:n=>Array.from(n)};return t},IQ=e=>{const t=f4(e);return{activate:a=>{let{activated:r,id:s,...o}=a;s=Cn(s);const i=r.has(s)?new Set([s]):new Set;return t.activate({...o,id:s,activated:i})},in:(a,r,s)=>{let o=new Set;if(a!=null){const i=pr(a);i.length&&(o=t.in(i.slice(0,1),r,s))}return o},out:(a,r,s)=>t.out(a,r,s)}},Nje=e=>{const t=f4(e);return{activate:a=>{let{id:r,activated:s,children:o,...i}=a;return r=Cn(r),o.has(r)?s:t.activate({id:r,activated:s,children:o,...i})},in:t.in,out:t.out}},Vje=e=>{const t=IQ(e);return{activate:a=>{let{id:r,activated:s,children:o,...i}=a;return r=Cn(r),o.has(r)?s:t.activate({id:r,activated:s,children:o,...i})},in:t.in,out:t.out}},Lje={open:e=>{let{id:t,value:n,opened:a,parents:r}=e;if(n){const s=new Set;s.add(t);let o=r.get(t);for(;o!=null;)s.add(o),o=r.get(o);return s}else return a.delete(t),a},select:()=>null},FQ={open:e=>{let{id:t,value:n,opened:a,parents:r}=e;if(n){let s=r.get(t);for(a.add(t);s!=null&&s!==t;)a.add(s),s=r.get(s);return a}else a.delete(t);return a},select:()=>null},Mje={open:FQ.open,select:e=>{let{id:t,value:n,opened:a,parents:r}=e;if(!n)return a;const s=[];let o=r.get(t);for(;o!=null;)s.push(o),o=r.get(o);return new Set(s)}},m4=e=>{const t={select:n=>{let{id:a,value:r,selected:s}=n;if(a=Cn(a),e&&!r){const o=Array.from(s.entries()).reduce((i,c)=>{let[A,d]=c;return d==="on"&&i.push(A),i},[]);if(o.length===1&&o[0]===a)return s}return s.set(a,r?"on":"off"),s},in:(n,a,r,s)=>{const o=new Map;for(const i of n||[])t.select({id:i,value:!0,selected:o,children:a,parents:r,disabled:s});return o},out:n=>{const a=[];for(const[r,s]of n.entries())s==="on"&&a.push(r);return a}};return t},PQ=e=>{const t=m4(e);return{select:a=>{let{selected:r,id:s,...o}=a;s=Cn(s);const i=r.has(s)?new Map([[s,r.get(s)]]):new Map;return t.select({...o,id:s,selected:i})},in:(a,r,s,o)=>a?.length?t.in(a.slice(0,1),r,s,o):new Map,out:(a,r,s)=>t.out(a,r,s)}},Oje=e=>{const t=m4(e);return{select:a=>{let{id:r,selected:s,children:o,...i}=a;return r=Cn(r),o.has(r)?s:t.select({id:r,selected:s,children:o,...i})},in:t.in,out:t.out}},Hje=e=>{const t=PQ(e);return{select:a=>{let{id:r,selected:s,children:o,...i}=a;return r=Cn(r),o.has(r)?s:t.select({id:r,selected:s,children:o,...i})},in:t.in,out:t.out}},DQ=e=>{const t={select:n=>{let{id:a,value:r,selected:s,children:o,parents:i,disabled:c}=n;a=Cn(a);const A=new Map(s),d=[a];for(;d.length;){const m=d.shift();c.has(m)||s.set(Cn(m),r?"on":"off"),o.has(m)&&d.push(...o.get(m))}let f=Cn(i.get(a));for(;f;){let m=!0,h=!0;for(const p of o.get(f)){const y=Cn(p);if(!c.has(y)&&(s.get(y)!=="on"&&(m=!1),s.has(y)&&s.get(y)!=="off"&&(h=!1),!m&&!h))break}s.set(f,m?"on":h?"off":"indeterminate"),f=Cn(i.get(f))}return e&&!r&&Array.from(s.entries()).reduce((h,p)=>{let[y,g]=p;return g==="on"&&h.push(y),h},[]).length===0?A:s},in:(n,a,r,s)=>{let o=new Map;for(const i of n||[])o=t.select({id:i,value:!0,selected:o,children:a,parents:r,disabled:s});return o},out:(n,a)=>{const r=[];for(const[s,o]of n.entries())o==="on"&&!a.has(s)&&r.push(s);return r}};return t},$je=e=>{const t=DQ(e);return{select:t.select,in:t.in,out:(a,r,s)=>{const o=[];for(const[i,c]of a.entries())if(c==="on"){if(s.has(i)){const A=s.get(i);if(a.get(A)==="on")continue}o.push(i)}return o}}},tg=Symbol.for("vuetify:nested"),UQ={id:Ht(),root:{register:()=>null,unregister:()=>null,children:V(new Map),parents:V(new Map),disabled:V(new Set),open:()=>null,openOnSelect:()=>null,activate:()=>null,select:()=>null,activatable:V(!1),selectable:V(!1),opened:V(new Set),activated:V(new Set),selected:V(new Map),selectedValues:V([]),getPath:()=>[]}},Qje=it({activatable:Boolean,selectable:Boolean,activeStrategy:[String,Function,Object],selectStrategy:[String,Function,Object],openStrategy:[String,Object],opened:null,activated:null,selected:null,mandatory:Boolean},"nested"),Gje=e=>{let t=!1;const n=Ht(new Map),a=Ht(new Map),r=Ht(new Set),s=ln(e,"opened",e.opened,y=>new Set(Array.isArray(y)?y.map(g=>Cn(g)):y),y=>[...y.values()]),o=ae(()=>{if(typeof e.activeStrategy=="object")return e.activeStrategy;if(typeof e.activeStrategy=="function")return e.activeStrategy(e.mandatory);switch(e.activeStrategy){case"leaf":return Nje(e.mandatory);case"single-leaf":return Vje(e.mandatory);case"independent":return f4(e.mandatory);case"single-independent":default:return IQ(e.mandatory)}}),i=ae(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;if(typeof e.selectStrategy=="function")return e.selectStrategy(e.mandatory);switch(e.selectStrategy){case"single-leaf":return Hje(e.mandatory);case"leaf":return Oje(e.mandatory);case"independent":return m4(e.mandatory);case"single-independent":return PQ(e.mandatory);case"trunk":return $je(e.mandatory);case"classic":default:return DQ(e.mandatory)}}),c=ae(()=>{if(typeof e.openStrategy=="object")return e.openStrategy;switch(e.openStrategy){case"list":return Mje;case"single":return Lje;case"multiple":default:return FQ}}),A=ln(e,"activated",e.activated,y=>o.value.in(y,n.value,a.value),y=>o.value.out(y,n.value,a.value)),d=ln(e,"selected",e.selected,y=>i.value.in(y,n.value,a.value,r.value),y=>i.value.out(y,n.value,a.value));da(()=>{t=!0});function f(y){const g=[];let w=Cn(y);for(;w!==void 0;)g.unshift(w),w=a.value.get(w);return g}const m=Pr("nested"),h=new Set,p={id:Ht(),root:{opened:s,activatable:Xe(()=>e.activatable),selectable:Xe(()=>e.selectable),activated:A,selected:d,selectedValues:ae(()=>{const y=[];for(const[g,w]of d.value.entries())w==="on"&&y.push(g);return y}),register:(y,g,w,b)=>{if(h.has(y)){f(y).map(String).join(" -> "),f(g).concat(y).map(String).join(" -> ");return}else h.add(y);g&&y!==g&&a.value.set(y,g),w&&r.value.add(y),b&&n.value.set(y,[]),g!=null&&n.value.set(g,[...n.value.get(g)||[],y])},unregister:y=>{if(t)return;h.delete(y),n.value.delete(y),r.value.delete(y);const g=a.value.get(y);if(g){const w=n.value.get(g)??[];n.value.set(g,w.filter(b=>b!==y))}a.value.delete(y)},open:(y,g,w)=>{m.emit("click:open",{id:y,value:g,path:f(y),event:w});const b=c.value.open({id:y,value:g,opened:new Set(s.value),children:n.value,parents:a.value,event:w});b&&(s.value=b)},openOnSelect:(y,g,w)=>{const b=c.value.select({id:y,value:g,selected:new Map(d.value),opened:new Set(s.value),children:n.value,parents:a.value,event:w});b&&(s.value=b)},select:(y,g,w)=>{m.emit("click:select",{id:y,value:g,path:f(y),event:w});const b=i.value.select({id:y,value:g,selected:new Map(d.value),children:n.value,parents:a.value,disabled:r.value,event:w});b&&(d.value=b),p.root.openOnSelect(y,g,w)},activate:(y,g,w)=>{if(!e.activatable)return p.root.select(y,!0,w);m.emit("click:activate",{id:y,value:g,path:f(y),event:w});const b=o.value.activate({id:y,value:g,activated:new Set(A.value),children:n.value,parents:a.value,event:w});if(b.size!==A.value.size)A.value=b;else{for(const x of b)if(!A.value.has(x)){A.value=b;return}for(const x of A.value)if(!b.has(x)){A.value=b;return}}},children:n,parents:a,disabled:r,getPath:f}};return Ha(tg,p),p.root},RQ=(e,t,n)=>{const a=Tn(tg,UQ),r=Symbol("nested item"),s=ae(()=>{const i=Cn(Du(e));return i!==void 0?i:r}),o={...a,id:s,open:(i,c)=>a.root.open(s.value,i,c),openOnSelect:(i,c)=>a.root.openOnSelect(s.value,i,c),isOpen:ae(()=>a.root.opened.value.has(s.value)),parent:ae(()=>a.root.parents.value.get(s.value)),activate:(i,c)=>a.root.activate(s.value,i,c),isActivated:ae(()=>a.root.activated.value.has(s.value)),select:(i,c)=>a.root.select(s.value,i,c),isSelected:ae(()=>a.root.selected.value.get(s.value)==="on"),isIndeterminate:ae(()=>a.root.selected.value.get(s.value)==="indeterminate"),isLeaf:ae(()=>!a.root.children.value.get(s.value)),isGroupActivator:a.isGroupActivator};return tu(()=>{a.isGroupActivator||a.root.register(s.value,a.id.value,Du(t),n)}),da(()=>{a.isGroupActivator||a.root.unregister(s.value)}),n&&Ha(tg,o),o},zje=()=>{const e=Tn(tg,UQ);Ha(tg,{...e,isGroupActivator:!0})},Kje=Ri({name:"VListGroupActivator",setup(e,t){let{slots:n}=t;return zje(),()=>n.default?.()}}),NQ=it({activeColor:String,baseColor:String,color:String,collapseIcon:{type:An,default:"$collapse"},disabled:Boolean,expandIcon:{type:An,default:"$expand"},rawId:[String,Number],prependIcon:An,appendIcon:An,fluid:Boolean,subgroup:Boolean,title:String,value:null,...tn(),...Nn()},"VListGroup"),ng=yt()({name:"VListGroup",props:NQ(),setup(e,t){let{slots:n}=t;const{isOpen:a,open:r,id:s}=RQ(()=>e.value,()=>e.disabled,!0),o=ae(()=>`v-list-group--id-${String(e.rawId??s.value)}`),i=TQ(),{isBooted:c}=Zf();function A(h){["INPUT","TEXTAREA"].includes(h.target?.tagName)||r(!a.value,h)}const d=ae(()=>({onClick:A,class:"v-list-group__header",id:o.value})),f=ae(()=>a.value?e.collapseIcon:e.expandIcon),m=ae(()=>({VListItem:{activeColor:e.activeColor,baseColor:e.baseColor,color:e.color,prependIcon:e.prependIcon||e.subgroup&&f.value,appendIcon:e.appendIcon||!e.subgroup&&f.value,title:e.title,value:e.value}}));return St(()=>l(e.tag,{class:ct(["v-list-group",{"v-list-group--prepend":i?.hasPrepend.value,"v-list-group--fluid":e.fluid,"v-list-group--subgroup":e.subgroup,"v-list-group--open":a.value},e.class]),style:Rt(e.style)},{default:()=>[n.activator&&l(Ln,{defaults:m.value},{default:()=>[l(Kje,null,{default:()=>[n.activator({props:d.value,isOpen:a.value})]})]}),l(po,{transition:{component:jw},disabled:!c.value},{default:()=>[ma(v("div",{class:"v-list-group__items",role:"group","aria-labelledby":o.value},[n.default?.()]),[[ci,a.value]])]})]})),{isOpen:a}}}),Wje=it({opacity:[Number,String],...tn(),...Nn()},"VListItemSubtitle"),VQ=yt()({name:"VListItemSubtitle",props:Wje(),setup(e,t){let{slots:n}=t;return St(()=>l(e.tag,{class:ct(["v-list-item-subtitle",e.class]),style:Rt([{"--v-list-item-subtitle-opacity":e.opacity},e.style])},n)),{}}}),LQ=Gc("v-list-item-title"),MQ=it({active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:An,baseColor:String,disabled:Boolean,lines:[Boolean,String],link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:An,ripple:{type:[Boolean,Object],default:!0},slim:Boolean,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},value:null,onClick:Ns(),onClickOnce:Ns(),...zo(),...tn(),...ds(),...Lr(),...es(),...cr(),...Hg(),...Nn(),...la(),...ml({variant:"text"})},"VListItem"),Jl=yt()({name:"VListItem",directives:{vRipple:Co},props:MQ(),emits:{click:e=>!0},setup(e,t){let{attrs:n,slots:a,emit:r}=t;const s=Og(e,n),o=ae(()=>e.value===void 0?s.href.value:e.value),{activate:i,isActivated:c,select:A,isOpen:d,isSelected:f,isIndeterminate:m,isGroupActivator:h,root:p,parent:y,openOnSelect:g,id:w}=RQ(o,()=>e.disabled,!1),b=TQ(),x=ae(()=>e.active!==!1&&(e.active||s.isActive?.value||(p.activatable.value?c.value:f.value))),T=Xe(()=>e.link!==!1&&s.isLink.value),F=ae(()=>!!b&&(p.selectable.value||p.activatable.value||e.value!=null)),k=ae(()=>!e.disabled&&e.link!==!1&&(e.link||s.isClickable.value||F.value)),S=Xe(()=>e.rounded||e.nav),E=Xe(()=>e.color??e.activeColor),C=Xe(()=>({color:x.value?E.value??e.baseColor:e.baseColor,variant:e.variant}));Ke(()=>s.isActive?.value,Q=>{Q&&D()}),tu(()=>{s.isActive?.value&&D()});function D(){y.value!=null&&p.open(y.value,!0),g(!0)}const{themeClasses:P}=ka(e),{borderClasses:O}=fi(e),{colorClasses:H,colorStyles:ie,variantClasses:Ae}=em(C),{densityClasses:j}=Eo(e),{dimensionStyles:J}=Mr(e),{elevationClasses:ue}=Ss(e),{roundedClasses:ne}=xr(S),Y=Xe(()=>e.lines?`v-list-item--${e.lines}-line`:void 0),te=Xe(()=>e.ripple!==void 0&&e.ripple&&b?.filterable?{keys:["Enter"]}:e.ripple),L=ae(()=>({isActive:x.value,select:A,isOpen:d.value,isSelected:f.value,isIndeterminate:m.value}));function N(Q){r("click",Q),!["INPUT","TEXTAREA"].includes(Q.target?.tagName)&&k.value&&(s.navigate?.(Q),!h&&(p.activatable.value?i(!c.value,Q):(p.selectable.value||e.value!=null)&&A(!f.value,Q)))}function q(Q){const ee=Q.target;["INPUT","TEXTAREA"].includes(ee.tagName)||(Q.key==="Enter"||Q.key===" "&&!b?.filterable)&&(Q.preventDefault(),Q.stopPropagation(),Q.target.dispatchEvent(new MouseEvent("click",Q)))}return St(()=>{const Q=T.value?"a":e.tag,ee=a.title||e.title!=null,z=a.subtitle||e.subtitle!=null,X=!!(e.appendAvatar||e.appendIcon),le=!!(X||a.append),re=!!(e.prependAvatar||e.prependIcon),de=!!(re||a.prepend);return b?.updateHasPrepend(de),e.activeColor&&j8("active-color",["color","base-color"]),ma(l(Q,Ue({class:["v-list-item",{"v-list-item--active":x.value,"v-list-item--disabled":e.disabled,"v-list-item--link":k.value,"v-list-item--nav":e.nav,"v-list-item--prepend":!de&&b?.hasPrepend.value,"v-list-item--slim":e.slim,[`${e.activeClass}`]:e.activeClass&&x.value},P.value,O.value,H.value,j.value,ue.value,Y.value,ne.value,Ae.value,e.class],style:[ie.value,J.value,e.style],tabindex:k.value?b?-2:0:void 0,"aria-selected":F.value?p.activatable.value?c.value:p.selectable.value?f.value:x.value:void 0,onClick:N,onKeydown:k.value&&!T.value&&q},s.linkProps),{default:()=>[dA(k.value||x.value,"v-list-item"),de&&v("div",{key:"prepend",class:"v-list-item__prepend"},[a.prepend?l(Ln,{key:"prepend-defaults",disabled:!re,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon},VListItemAction:{start:!0}}},{default:()=>[a.prepend?.(L.value)]}):v(We,null,[e.prependAvatar&&l(ul,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&l(Ea,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)]),v("div",{class:"v-list-item__spacer"},null)]),v("div",{class:"v-list-item__content","data-no-activator":""},[ee&&l(LQ,{key:"title"},{default:()=>[a.title?.({title:e.title})??K(e.title)]}),z&&l(VQ,{key:"subtitle"},{default:()=>[a.subtitle?.({subtitle:e.subtitle})??K(e.subtitle)]}),a.default?.(L.value)]),le&&v("div",{key:"append",class:"v-list-item__append"},[a.append?l(Ln,{key:"append-defaults",disabled:!X,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon},VListItemAction:{end:!0}}},{default:()=>[a.append?.(L.value)]}):v(We,null,[e.appendIcon&&l(Ea,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&l(ul,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)]),v("div",{class:"v-list-item__spacer"},null)])]}),[[Co,k.value&&te.value]])}),{activate:i,isActivated:c,isGroupActivator:h,isSelected:f,list:b,select:A,root:p,id:w,link:s}}}),jje=it({color:String,inset:Boolean,sticky:Boolean,title:String,...tn(),...Nn()},"VListSubheader"),Th=yt()({name:"VListSubheader",props:jje(),setup(e,t){let{slots:n}=t;const{textColorClasses:a,textColorStyles:r}=Ls(()=>e.color);return St(()=>{const s=!!(n.default||e.title);return l(e.tag,{class:ct(["v-list-subheader",{"v-list-subheader--inset":e.inset,"v-list-subheader--sticky":e.sticky},a.value,e.class]),style:Rt([{textColorStyles:r},e.style])},{default:()=>[s&&v("div",{class:"v-list-subheader__text"},[n.default?.()??e.title])]})}),{}}}),qje=it({items:Array,returnObject:Boolean},"VListChildren"),OQ=yt()({name:"VListChildren",props:qje(),setup(e,t){let{slots:n}=t;return kQ(),()=>n.default?.()??e.items?.map(a=>{let{children:r,props:s,type:o,raw:i}=a;if(o==="divider")return n.divider?.({props:s})??l(Ii,s,null);if(o==="subheader")return n.subheader?.({props:s})??l(Th,s,null);const c={subtitle:n.subtitle?d=>n.subtitle?.({...d,item:i}):void 0,prepend:n.prepend?d=>n.prepend?.({...d,item:i}):void 0,append:n.append?d=>n.append?.({...d,item:i}):void 0,title:n.title?d=>n.title?.({...d,item:i}):void 0},A=ng.filterProps(s);return r?l(ng,Ue(A,{value:e.returnObject?i:s?.value,rawId:s?.value}),{activator:d=>{let{props:f}=d;const m=Ue(s,f,{value:e.returnObject?i:s.value});return n.header?n.header({props:m}):l(Jl,m,c)},default:()=>l(OQ,{items:r,returnObject:e.returnObject},n)}):n.item?n.item({props:s}):l(Jl,Ue(s,{value:e.returnObject?i:s.value}),c)})}}),HQ=it({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},itemType:{type:[Boolean,String,Array,Function],default:"type"},returnObject:Boolean,valueComparator:Function},"list-items"),Yje=new Set(["item","divider","subheader"]);function Il(e,t){const n=Nr(t,e.itemTitle,t),a=Nr(t,e.itemValue,n),r=Nr(t,e.itemChildren),s=e.itemProps===!0?typeof t=="object"&&t!=null&&!Array.isArray(t)?"children"in t?$a(t,["children"]):t:void 0:Nr(t,e.itemProps);let o=Nr(t,e.itemType,"item");Yje.has(o)||(o="item");const i={title:n,value:a,...s};return{type:o,title:String(i.title??""),value:i.value,props:i,children:o==="item"&&Array.isArray(r)?$Q(e,r):void 0,raw:t}}Il.neededProps=["itemTitle","itemValue","itemChildren","itemProps","itemType"];function $Q(e,t){const n=Qc(e,Il.neededProps),a=[];for(const r of t)a.push(Il(n,r));return a}function v4(e){const t=ae(()=>$Q(e,e.items)),n=ae(()=>t.value.some(i=>i.value===null)),a=Ht(new Map),r=Ht([]);_r(()=>{const i=t.value,c=new Map,A=[];for(let d=0;d<i.length;d++){const f=i[d];if(xS(f.value)||f.value===null){let m=c.get(f.value);m||(m=[],c.set(f.value,m)),m.push(f)}else A.push(f)}a.value=c,r.value=A});function s(i){const c=a.value,A=t.value,d=r.value,f=n.value,m=e.returnObject,h=!!e.valueComparator,p=e.valueComparator||bs,y=Qc(e,Il.neededProps),g=[];e:for(const w of i){if(!f&&w===null)continue;if(m&&typeof w=="string"){g.push(Il(y,w));continue}const b=c.get(w);if(h||!b){for(const x of h?A:d)if(p(w,x.value)){g.push(x);continue e}g.push(Il(y,w));continue}g.push(...b)}return g}function o(i){return e.returnObject?i.map(c=>{let{raw:A}=c;return A}):i.map(c=>{let{value:A}=c;return A})}return{items:t,transformIn:s,transformOut:o}}const Xje=new Set(["item","divider","subheader"]);function Jje(e,t){const n=xS(t)?t:Nr(t,e.itemTitle),a=xS(t)?t:Nr(t,e.itemValue,void 0),r=Nr(t,e.itemChildren),s=e.itemProps===!0?$a(t,["children"]):Nr(t,e.itemProps);let o=Nr(t,e.itemType,"item");Xje.has(o)||(o="item");const i={title:n,value:a,...s};return{type:o,title:i.title,value:i.value,props:i,children:o==="item"&&r?QQ(e,r):void 0,raw:t}}function QQ(e,t){const n=[];for(const a of t)n.push(Jje(e,a));return n}function GQ(e){return{items:ae(()=>QQ(e,e.items))}}const zQ=it({baseColor:String,activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,filterable:Boolean,expandIcon:An,collapseIcon:An,lines:{type:[Boolean,String],default:"one"},slim:Boolean,nav:Boolean,"onClick:open":Ns(),"onClick:select":Ns(),"onUpdate:opened":Ns(),...Qje({selectStrategy:"single-leaf",openStrategy:"list"}),...zo(),...tn(),...ds(),...Lr(),...es(),...HQ(),...cr(),...Nn(),...la(),...ml({variant:"text"})},"VList"),Yv=yt()({name:"VList",props:zQ(),emits:{"update:selected":e=>!0,"update:activated":e=>!0,"update:opened":e=>!0,"click:open":e=>!0,"click:activate":e=>!0,"click:select":e=>!0},setup(e,t){let{slots:n}=t;const{items:a}=GQ(e),{themeClasses:r}=ka(e),{backgroundColorClasses:s,backgroundColorStyles:o}=Fa(()=>e.bgColor),{borderClasses:i}=fi(e),{densityClasses:c}=Eo(e),{dimensionStyles:A}=Mr(e),{elevationClasses:d}=Ss(e),{roundedClasses:f}=xr(e),{children:m,open:h,parents:p,select:y,getPath:g}=Gje(e),w=Xe(()=>e.lines?`v-list--${e.lines}-line`:void 0),b=Xe(()=>e.activeColor),x=Xe(()=>e.baseColor),T=Xe(()=>e.color);kQ({filterable:e.filterable}),wr({VListGroup:{activeColor:b,baseColor:x,color:T,expandIcon:Xe(()=>e.expandIcon),collapseIcon:Xe(()=>e.collapseIcon)},VListItem:{activeClass:Xe(()=>e.activeClass),activeColor:b,baseColor:x,color:T,density:Xe(()=>e.density),disabled:Xe(()=>e.disabled),lines:Xe(()=>e.lines),nav:Xe(()=>e.nav),slim:Xe(()=>e.slim),variant:Xe(()=>e.variant)}});const F=Ht(!1),k=V();function S(H){F.value=!0}function E(H){F.value=!1}function C(H){!F.value&&!(H.relatedTarget&&k.value?.contains(H.relatedTarget))&&O()}function D(H){const ie=H.target;if(!(!k.value||ie.tagName==="INPUT"&&["Home","End"].includes(H.key)||ie.tagName==="TEXTAREA")){if(H.key==="ArrowDown")O("next");else if(H.key==="ArrowUp")O("prev");else if(H.key==="Home")O("first");else if(H.key==="End")O("last");else return;H.preventDefault()}}function P(H){F.value=!0}function O(H){if(k.value)return af(k.value,H)}return St(()=>l(e.tag,{ref:k,class:ct(["v-list",{"v-list--disabled":e.disabled,"v-list--nav":e.nav,"v-list--slim":e.slim},r.value,s.value,i.value,c.value,d.value,w.value,f.value,e.class]),style:Rt([o.value,A.value,e.style]),tabindex:e.disabled?-1:0,role:"listbox","aria-activedescendant":void 0,onFocusin:S,onFocusout:E,onFocus:C,onKeydown:D,onMousedown:P},{default:()=>[l(OQ,{items:a.value,returnObject:e.returnObject},n)]})),{open:h,select:y,focus:O,children:m,parents:p,getPath:g}}}),Zje=Gc("v-list-img"),eqe=it({start:Boolean,end:Boolean,...tn(),...Nn()},"VListItemAction"),KQ=yt()({name:"VListItemAction",props:eqe(),setup(e,t){let{slots:n}=t;return St(()=>l(e.tag,{class:ct(["v-list-item-action",{"v-list-item-action--start":e.start,"v-list-item-action--end":e.end},e.class]),style:Rt(e.style)},n)),{}}}),tqe=it({start:Boolean,end:Boolean,...tn(),...Nn()},"VListItemMedia"),nqe=yt()({name:"VListItemMedia",props:tqe(),setup(e,t){let{slots:n}=t;return St(()=>l(e.tag,{class:ct(["v-list-item-media",{"v-list-item-media--start":e.start,"v-list-item-media--end":e.end},e.class]),style:Rt(e.style)},n)),{}}});function KC(e,t){return{x:e.x+t.x,y:e.y+t.y}}function aqe(e,t){return{x:e.x-t.x,y:e.y-t.y}}function RN(e,t){if(e.side==="top"||e.side==="bottom"){const{side:n,align:a}=e,r=a==="left"?0:a==="center"?t.width/2:a==="right"?t.width:a,s=n==="top"?0:n==="bottom"?t.height:n;return KC({x:r,y:s},t)}else if(e.side==="left"||e.side==="right"){const{side:n,align:a}=e,r=n==="left"?0:n==="right"?t.width:n,s=a==="top"?0:a==="center"?t.height/2:a==="bottom"?t.height:a;return KC({x:r,y:s},t)}return KC({x:t.width/2,y:t.height/2},t)}const WQ={static:oqe,connected:lqe},rqe=it({locationStrategy:{type:[String,Function],default:"static",validator:e=>typeof e=="function"||e in WQ},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array]},"VOverlay-location-strategies");function sqe(e,t){const n=V({}),a=V();Ba&&yo(()=>!!(t.isActive.value&&e.locationStrategy),i=>{Ke(()=>e.locationStrategy,i),cs(()=>{window.removeEventListener("resize",r),visualViewport?.removeEventListener("resize",s),visualViewport?.removeEventListener("scroll",o),a.value=void 0}),window.addEventListener("resize",r,{passive:!0}),visualViewport?.addEventListener("resize",s,{passive:!0}),visualViewport?.addEventListener("scroll",o,{passive:!0}),typeof e.locationStrategy=="function"?a.value=e.locationStrategy(t,e,n)?.updateLocation:a.value=WQ[e.locationStrategy](t,e,n)?.updateLocation});function r(i){a.value?.(i)}function s(i){a.value?.(i)}function o(i){a.value?.(i)}return{contentStyles:n,updateLocation:a}}function oqe(){}function iqe(e,t){const n=mk(e);return t?n.x+=parseFloat(e.style.right||0):n.x-=parseFloat(e.style.left||0),n.y-=parseFloat(e.style.top||0),n}function lqe(e,t,n){(Array.isArray(e.target.value)||jte(e.target.value))&&Object.assign(n.value,{position:"fixed",top:0,[e.isRtl.value?"right":"left"]:0});const{preferredAnchor:r,preferredOrigin:s}=fk(()=>{const w=CS(t.location,e.isRtl.value),b=t.origin==="overlap"?w:t.origin==="auto"?Tx(w):CS(t.origin,e.isRtl.value);return w.side===b.side&&w.align===Ix(b).align?{preferredAnchor:eD(w),preferredOrigin:eD(b)}:{preferredAnchor:w,preferredOrigin:b}}),[o,i,c,A]=["minWidth","minHeight","maxWidth","maxHeight"].map(w=>ae(()=>{const b=parseFloat(t[w]);return isNaN(b)?1/0:b})),d=ae(()=>{if(Array.isArray(t.offset))return t.offset;if(typeof t.offset=="string"){const w=t.offset.split(" ").map(parseFloat);return w.length<2&&w.push(0),w}return typeof t.offset=="number"?[t.offset,0]:[0,0]});let f=!1,m=-1;const h=new $8(4),p=new ResizeObserver(()=>{if(!f)return;if(requestAnimationFrame(b=>{b!==m&&h.clear(),requestAnimationFrame(x=>{m=x})}),h.isFull){const b=h.values();if(bs(b.at(-1),b.at(-3))&&!bs(b.at(-1),b.at(-2)))return}const w=g();w&&h.push(w.flipped)});let y=new Iu({x:0,y:0,width:0,height:0});Ke(e.target,(w,b)=>{b&&!Array.isArray(b)&&p.unobserve(b),Array.isArray(w)?bs(w,b)||g():w&&p.observe(w)},{immediate:!0}),Ke(e.contentEl,(w,b)=>{b&&p.unobserve(b),w&&p.observe(w)},{immediate:!0}),cs(()=>{p.disconnect()});function g(){if(f=!1,requestAnimationFrame(()=>f=!0),!e.target.value||!e.contentEl.value)return;(Array.isArray(e.target.value)||e.target.value.offsetParent||e.target.value.getClientRects().length)&&(y=W8(e.target.value));const w=iqe(e.contentEl.value,e.isRtl.value),b=I_(e.contentEl.value),x=12;b.length||(b.push(document.documentElement),e.contentEl.value.style.top&&e.contentEl.value.style.left||(w.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),w.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const T=b.reduce((H,ie)=>{const Ae=vte(ie);return H?new Iu({x:Math.max(H.left,Ae.left),y:Math.max(H.top,Ae.top),width:Math.min(H.right,Ae.right)-Math.max(H.left,Ae.left),height:Math.min(H.bottom,Ae.bottom)-Math.max(H.top,Ae.top)}):Ae},void 0);T.x+=x,T.y+=x,T.width-=x*2,T.height-=x*2;let F={anchor:r.value,origin:s.value};function k(H){const ie=new Iu(w),Ae=RN(H.anchor,y),j=RN(H.origin,ie);let{x:J,y:ue}=aqe(Ae,j);switch(H.anchor.side){case"top":ue-=d.value[0];break;case"bottom":ue+=d.value[0];break;case"left":J-=d.value[0];break;case"right":J+=d.value[0];break}switch(H.anchor.align){case"top":ue-=d.value[1];break;case"bottom":ue+=d.value[1];break;case"left":J-=d.value[1];break;case"right":J+=d.value[1];break}return ie.x+=J,ie.y+=ue,ie.width=Math.min(ie.width,c.value),ie.height=Math.min(ie.height,A.value),{overflows:nD(ie,T),x:J,y:ue}}let S=0,E=0;const C={x:0,y:0},D={x:!1,y:!1};let P=-1;for(;!(P++>10);){const{x:H,y:ie,overflows:Ae}=k(F);S+=H,E+=ie,w.x+=H,w.y+=ie;{const j=tD(F.anchor),J=Ae.x.before||Ae.x.after,ue=Ae.y.before||Ae.y.after;let ne=!1;if(["x","y"].forEach(Y=>{if(Y==="x"&&J&&!D.x||Y==="y"&&ue&&!D.y){const te={anchor:{...F.anchor},origin:{...F.origin}},L=Y==="x"?j==="y"?Ix:Tx:j==="y"?Tx:Ix;te.anchor=L(te.anchor),te.origin=L(te.origin);const{overflows:N}=k(te);(N[Y].before<=Ae[Y].before&&N[Y].after<=Ae[Y].after||N[Y].before+N[Y].after<(Ae[Y].before+Ae[Y].after)/2)&&(F=te,ne=D[Y]=!0)}}),ne)continue}Ae.x.before&&(S+=Ae.x.before,w.x+=Ae.x.before),Ae.x.after&&(S-=Ae.x.after,w.x-=Ae.x.after),Ae.y.before&&(E+=Ae.y.before,w.y+=Ae.y.before),Ae.y.after&&(E-=Ae.y.after,w.y-=Ae.y.after);{const j=nD(w,T);C.x=T.width-j.x.before-j.x.after,C.y=T.height-j.y.before-j.y.after,S+=j.x.before,w.x+=j.x.before,E+=j.y.before,w.y+=j.y.before}break}const O=tD(F.anchor);return Object.assign(n.value,{"--v-overlay-anchor-origin":`${F.anchor.side} ${F.anchor.align}`,transformOrigin:`${F.origin.side} ${F.origin.align}`,top:Yt(WC(E)),left:e.isRtl.value?void 0:Yt(WC(S)),right:e.isRtl.value?Yt(WC(-S)):void 0,minWidth:Yt(O==="y"?Math.min(o.value,y.width):o.value),maxWidth:Yt(NN(tr(C.x,o.value===1/0?0:o.value,c.value))),maxHeight:Yt(NN(tr(C.y,i.value===1/0?0:i.value,A.value)))}),{available:C,contentBox:w,flipped:D}}return Ke(()=>[r.value,s.value,t.offset,t.minWidth,t.minHeight,t.maxWidth,t.maxHeight],()=>g()),xn(()=>{const w=g();if(!w)return;const{available:b,contentBox:x}=w;x.height>b.y&&requestAnimationFrame(()=>{g(),requestAnimationFrame(()=>{g()})})}),{updateLocation:g}}function WC(e){return Math.round(e*devicePixelRatio)/devicePixelRatio}function NN(e){return Math.ceil(e*devicePixelRatio)/devicePixelRatio}let aB=!0;const k2=[];function uqe(e){!aB||k2.length?(k2.push(e),rB()):(aB=!1,e(),rB())}let VN=-1;function rB(){cancelAnimationFrame(VN),VN=requestAnimationFrame(()=>{const e=k2.shift();e&&e(),k2.length?rB():aB=!0})}const jQ={none:null,close:Aqe,block:fqe,reposition:mqe},cqe=it({scrollStrategy:{type:[String,Function],default:"block",validator:e=>typeof e=="function"||e in jQ}},"VOverlay-scroll-strategies");function dqe(e,t){if(!Ba)return;let n;_r(async()=>{n?.stop(),t.isActive.value&&e.scrollStrategy&&(n=Hd(),await new Promise(a=>setTimeout(a)),n.active&&n.run(()=>{typeof e.scrollStrategy=="function"?e.scrollStrategy(t,e,n):jQ[e.scrollStrategy]?.(t,e,n)}))}),cs(()=>{n?.stop()})}function Aqe(e){function t(n){e.isActive.value=!1}qQ(h4(e.target.value,e.contentEl.value),t)}function fqe(e,t){const n=e.root.value?.offsetParent,a=h4(e.target.value,e.contentEl.value),r=[...new Set([...I_(a,t.contained?n:void 0),...I_(e.contentEl.value,t.contained?n:void 0)])].filter(i=>!i.classList.contains("v-overlay-scroll-blocked")),s=window.innerWidth-document.documentElement.offsetWidth,o=(i=>yk(i)&&i)(n||document.documentElement);o&&e.root.value.classList.add("v-overlay--scroll-blocked"),r.forEach((i,c)=>{i.style.setProperty("--v-body-scroll-x",Yt(-i.scrollLeft)),i.style.setProperty("--v-body-scroll-y",Yt(-i.scrollTop)),i!==document.documentElement&&i.style.setProperty("--v-scrollbar-offset",Yt(s)),i.classList.add("v-overlay-scroll-blocked")}),cs(()=>{r.forEach((i,c)=>{const A=parseFloat(i.style.getPropertyValue("--v-body-scroll-x")),d=parseFloat(i.style.getPropertyValue("--v-body-scroll-y")),f=i.style.scrollBehavior;i.style.scrollBehavior="auto",i.style.removeProperty("--v-body-scroll-x"),i.style.removeProperty("--v-body-scroll-y"),i.style.removeProperty("--v-scrollbar-offset"),i.classList.remove("v-overlay-scroll-blocked"),i.scrollLeft=-A,i.scrollTop=-d,i.style.scrollBehavior=f}),o&&e.root.value.classList.remove("v-overlay--scroll-blocked")})}function mqe(e,t,n){let a=!1,r=-1,s=-1;function o(i){uqe(()=>{const c=performance.now();e.updateLocation.value?.(i),a=(performance.now()-c)/(1e3/60)>2})}s=(typeof requestIdleCallback>"u"?i=>i():requestIdleCallback)(()=>{n.run(()=>{qQ(h4(e.target.value,e.contentEl.value),i=>{a?(cancelAnimationFrame(r),r=requestAnimationFrame(()=>{r=requestAnimationFrame(()=>{o(i)})})):o(i)})})}),cs(()=>{typeof cancelIdleCallback<"u"&&cancelIdleCallback(s),cancelAnimationFrame(r)})}function h4(e,t){return Array.isArray(e)?document.elementsFromPoint(...e).find(n=>!t?.contains(n)):e??t}function qQ(e,t){const n=[document,...I_(e)];n.forEach(a=>{a.addEventListener("scroll",t,{passive:!0})}),cs(()=>{n.forEach(a=>{a.removeEventListener("scroll",t)})})}const sB=Symbol.for("vuetify:v-menu"),p4=it({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function g4(e,t){let n=()=>{};function a(o){n?.();const i=Number(o?e.openDelay:e.closeDelay);return new Promise(c=>{n=ute(i,()=>{t?.(o),c(o)})})}function r(){return a(!0)}function s(){return a(!1)}return{clearDelay:n,runOpenDelay:r,runCloseDelay:s}}const vqe=it({target:[String,Object],activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...p4()},"VOverlay-activator");function hqe(e,t){let{isActive:n,isTop:a,contentEl:r}=t;const s=Pr("useActivator"),o=V();let i=!1,c=!1,A=!0;const d=ae(()=>e.openOnFocus||e.openOnFocus==null&&e.openOnHover),f=ae(()=>e.openOnClick||e.openOnClick==null&&!e.openOnHover&&!d.value),{runOpenDelay:m,runCloseDelay:h}=g4(e,E=>{E===(e.openOnHover&&i||d.value&&c)&&!(e.openOnHover&&n.value&&!a.value)&&(n.value!==E&&(A=!0),n.value=E)}),p=V(),y={onClick:E=>{E.stopPropagation(),o.value=E.currentTarget||E.target,n.value||(p.value=[E.clientX,E.clientY]),n.value=!n.value},onMouseenter:E=>{E.sourceCapabilities?.firesTouchEvents||(i=!0,o.value=E.currentTarget||E.target,m())},onMouseleave:E=>{i=!1,h()},onFocus:E=>{Pv(E.target,":focus-visible")!==!1&&(c=!0,E.stopPropagation(),o.value=E.currentTarget||E.target,m())},onBlur:E=>{c=!1,E.stopPropagation(),h()}},g=ae(()=>{const E={};return f.value&&(E.onClick=y.onClick),e.openOnHover&&(E.onMouseenter=y.onMouseenter,E.onMouseleave=y.onMouseleave),d.value&&(E.onFocus=y.onFocus,E.onBlur=y.onBlur),E}),w=ae(()=>{const E={};if(e.openOnHover&&(E.onMouseenter=()=>{i=!0,m()},E.onMouseleave=()=>{i=!1,h()}),d.value&&(E.onFocusin=()=>{c=!0,m()},E.onFocusout=()=>{c=!1,h()}),e.closeOnContentClick){const C=Tn(sB,null);E.onClick=()=>{n.value=!1,C?.closeParents()}}return E}),b=ae(()=>{const E={};return e.openOnHover&&(E.onMouseenter=()=>{A&&(i=!0,A=!1,m())},E.onMouseleave=()=>{i=!1,h()}),E});Ke(a,E=>{E&&(e.openOnHover&&!i&&(!d.value||!c)||d.value&&!c&&(!e.openOnHover||!i))&&!r.value?.contains(document.activeElement)&&(n.value=!1)}),Ke(n,E=>{E||setTimeout(()=>{p.value=void 0})},{flush:"post"});const x=B_();_r(()=>{x.value&&xn(()=>{o.value=x.el})});const T=B_(),F=ae(()=>e.target==="cursor"&&p.value?p.value:T.value?T.el:YQ(e.target,s)||o.value),k=ae(()=>Array.isArray(F.value)?void 0:F.value);let S;return Ke(()=>!!e.activator,E=>{E&&Ba?(S=Hd(),S.run(()=>{pqe(e,s,{activatorEl:o,activatorEvents:g})})):S&&S.stop()},{flush:"post",immediate:!0}),cs(()=>{S?.stop()}),{activatorEl:o,activatorRef:x,target:F,targetEl:k,targetRef:T,activatorEvents:g,contentEvents:w,scrimEvents:b}}function pqe(e,t,n){let{activatorEl:a,activatorEvents:r}=n;Ke(()=>e.activator,(c,A)=>{if(A&&c!==A){const d=i(A);d&&o(d)}c&&xn(()=>s())},{immediate:!0}),Ke(()=>e.activatorProps,()=>{s()}),cs(()=>{o()});function s(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:i(),A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;c&&hte(c,Ue(r.value,A))}function o(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:i(),A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;c&&pte(c,Ue(r.value,A))}function i(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.activator;const A=YQ(c,t);return a.value=A?.nodeType===Node.ELEMENT_NODE?A:void 0,a.value}}function YQ(e,t){if(!e)return;let n;if(e==="parent"){let a=t?.proxy?.$el?.parentNode;for(;a?.hasAttribute("data-no-activator");)a=a.parentNode;n=a}else typeof e=="string"?n=document.querySelector(e):"$el"in e?n=e.$el:n=e;return n}function XQ(){if(!Ba)return Ht(!1);const{ssr:e}=dl();if(e){const t=Ht(!1);return un(()=>{t.value=!0}),t}else return Ht(!0)}const y4=it({eager:Boolean},"lazy");function _4(e,t){const n=Ht(!1),a=Xe(()=>n.value||e.eager||t.value);Ke(t,()=>n.value=!0);function r(){e.eager||(n.value=!1)}return{isBooted:n,hasContent:a,onAfterLeave:r}}function sm(){const t=Pr("useScopeId").vnode.scopeId;return{scopeId:t?{[t]:""}:void 0}}const LN=Symbol.for("vuetify:stack"),pp=is([]);function gqe(e,t,n){const a=Pr("useStack"),r=!n,s=Tn(LN,void 0),o=is({activeChildren:new Set});Ha(LN,o);const i=Ht(Number(Du(t)));yo(e,()=>{const d=pp.at(-1)?.[1];i.value=d?d+10:Number(Du(t)),r&&pp.push([a.uid,i.value]),s?.activeChildren.add(a.uid),cs(()=>{if(r){const f=Cn(pp).findIndex(m=>m[0]===a.uid);pp.splice(f,1)}s?.activeChildren.delete(a.uid)})});const c=Ht(!0);r&&_r(()=>{const d=pp.at(-1)?.[0]===a.uid;setTimeout(()=>c.value=d)});const A=Xe(()=>!o.activeChildren.size);return{globalTop:ah(c),localTop:A,stackStyles:Xe(()=>({zIndex:i.value}))}}function yqe(e){return{teleportTarget:ae(()=>{const n=e();if(n===!0||!Ba)return;const a=n===!1?document.body:typeof n=="string"?document.querySelector(n):n;if(a==null)return;let r=[...a.children].find(s=>s.matches(".v-overlay-container"));return r||(r=document.createElement("div"),r.className="v-overlay-container",a.appendChild(r)),r})}}function _qe(){return!0}function JQ(e,t,n){if(!e||ZQ(e,n)===!1)return!1;const a=r6(t);if(typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&a.host===e.target)return!1;const r=(typeof n.value=="object"&&n.value.include||(()=>[]))();return r.push(t),!r.some(s=>s?.contains(e.target))}function ZQ(e,t){return(typeof t.value=="object"&&t.value.closeConditional||_qe)(e)}function wqe(e,t,n){const a=typeof n.value=="function"?n.value:n.value.handler;e.shadowTarget=e.target,t._clickOutside.lastMousedownWasOutside&&JQ(e,t,n)&&setTimeout(()=>{ZQ(e,n)&&a&&a(e)},0)}function MN(e,t){const n=r6(e);t(document),typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&t(n)}const oB={mounted(e,t){const n=r=>wqe(r,e,t),a=r=>{e._clickOutside.lastMousedownWasOutside=JQ(r,e,t)};MN(e,r=>{r.addEventListener("click",n,!0),r.addEventListener("mousedown",a,!0)}),e._clickOutside||(e._clickOutside={lastMousedownWasOutside:!1}),e._clickOutside[t.instance.$.uid]={onClick:n,onMousedown:a}},beforeUnmount(e,t){e._clickOutside&&(MN(e,n=>{if(!n||!e._clickOutside?.[t.instance.$.uid])return;const{onClick:a,onMousedown:r}=e._clickOutside[t.instance.$.uid];n.removeEventListener("click",a,!0),n.removeEventListener("mousedown",r,!0)}),delete e._clickOutside[t.instance.$.uid])}};function bqe(e){const{modelValue:t,color:n,...a}=e;return l(zd,{name:"fade-transition",appear:!0},{default:()=>[e.modelValue&&v("div",Ue({class:["v-overlay__scrim",e.color.backgroundColorClasses.value],style:e.color.backgroundColorStyles.value},a),null)]})}const Gg=it({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,opacity:[Number,String],noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...vqe(),...tn(),...Lr(),...y4(),...rqe(),...cqe(),...la(),...lu()},"VOverlay"),Ou=yt()({name:"VOverlay",directives:{vClickOutside:oB},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...Gg()},emits:{"click:outside":e=>!0,"update:modelValue":e=>!0,keydown:e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,t){let{slots:n,attrs:a,emit:r}=t;const s=Pr("VOverlay"),o=V(),i=V(),c=V(),A=ln(e,"modelValue"),d=ae({get:()=>A.value,set:z=>{z&&e.disabled||(A.value=z)}}),{themeClasses:f}=ka(e),{rtlClasses:m,isRtl:h}=Zr(),{hasContent:p,onAfterLeave:y}=_4(e,d),g=Fa(()=>typeof e.scrim=="string"?e.scrim:null),{globalTop:w,localTop:b,stackStyles:x}=gqe(d,()=>e.zIndex,e._disableGlobalStack),{activatorEl:T,activatorRef:F,target:k,targetEl:S,targetRef:E,activatorEvents:C,contentEvents:D,scrimEvents:P}=hqe(e,{isActive:d,isTop:b,contentEl:c}),{teleportTarget:O}=yqe(()=>{const z=e.attach||e.contained;if(z)return z;const X=T?.value?.getRootNode()||s.proxy?.$el?.getRootNode();return X instanceof ShadowRoot?X:!1}),{dimensionStyles:H}=Mr(e),ie=XQ(),{scopeId:Ae}=sm();Ke(()=>e.disabled,z=>{z&&(d.value=!1)});const{contentStyles:j,updateLocation:J}=sqe(e,{isRtl:h,contentEl:c,target:k,isActive:d});dqe(e,{root:o,contentEl:c,targetEl:S,target:k,isActive:d,updateLocation:J});function ue(z){r("click:outside",z),e.persistent?q():d.value=!1}function ne(z){return d.value&&w.value&&(!e.scrim||z.target===i.value||z instanceof MouseEvent&&z.shadowTarget===i.value)}Ba&&Ke(d,z=>{z?window.addEventListener("keydown",Y):window.removeEventListener("keydown",Y)},{immediate:!0}),da(()=>{Ba&&window.removeEventListener("keydown",Y)});function Y(z){z.key==="Escape"&&w.value&&(c.value?.contains(document.activeElement)||r("keydown",z),e.persistent?q():(d.value=!1,c.value?.contains(document.activeElement)&&T.value?.focus()))}function te(z){z.key==="Escape"&&!w.value||r("keydown",z)}const L=iQ();yo(()=>e.closeOnBack,()=>{aje(L,z=>{w.value&&d.value?(z(!1),e.persistent?q():d.value=!1):z()})});const N=V();Ke(()=>d.value&&(e.absolute||e.contained)&&O.value==null,z=>{if(z){const X=gk(o.value);X&&X!==document.scrollingElement&&(N.value=X.scrollTop)}});function q(){e.noClickAnimation||c.value&&KA(c.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:E0})}function Q(){r("afterEnter")}function ee(){y(),r("afterLeave")}return St(()=>v(We,null,[n.activator?.({isActive:d.value,targetRef:E,props:Ue({ref:F},C.value,e.activatorProps)}),ie.value&&p.value&&l(hZ,{disabled:!O.value,to:O.value},{default:()=>[v("div",Ue({class:["v-overlay",{"v-overlay--absolute":e.absolute||e.contained,"v-overlay--active":d.value,"v-overlay--contained":e.contained},f.value,m.value,e.class],style:[x.value,{"--v-overlay-opacity":e.opacity,top:Yt(N.value)},e.style],ref:o,onKeydown:te},Ae,a),[l(bqe,Ue({color:g,modelValue:d.value&&!!e.scrim,ref:i},P.value),null),l(po,{appear:!0,persisted:!0,transition:e.transition,target:k.value,onAfterEnter:Q,onAfterLeave:ee},{default:()=>[ma(v("div",Ue({ref:c,class:["v-overlay__content",e.contentClass],style:[H.value,j.value]},D.value,e.contentProps),[n.default?.({isActive:d})]),[[ci,d.value],[oB,{handler:ue,closeConditional:ne,include:()=>[T.value]}]])]})])]})])),{activatorEl:T,scrimEl:i,target:k,animateClick:q,contentEl:c,globalTop:w,localTop:b,updateLocation:J}}}),e7=it({id:String,submenu:Boolean,disableInitialFocus:Boolean,...$a(Gg({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:Ww}}),["absolute"])},"VMenu"),Xv=yt()({name:"VMenu",props:e7(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=ln(e,"modelValue"),{scopeId:r}=sm(),{isRtl:s}=Zr(),o=Go(),i=Xe(()=>e.id||`v-menu-${o}`),c=V(),A=Tn(sB,null),d=Ht(new Set);Ha(sB,{register(){d.value.add(o)},unregister(){d.value.delete(o)},closeParents(g){setTimeout(()=>{!d.value.size&&!e.persistent&&(g==null||c.value?.contentEl&&!cte(g,c.value.contentEl))&&(a.value=!1,A?.closeParents())},40)}}),da(()=>{A?.unregister(),document.removeEventListener("focusin",f)}),X2(()=>a.value=!1);async function f(g){const w=g.relatedTarget,b=g.target;await xn(),a.value&&w!==b&&c.value?.contentEl&&c.value?.globalTop&&![document,c.value.contentEl].includes(b)&&!c.value.contentEl.contains(b)&&S0(c.value.contentEl)[0]?.focus()}Ke(a,g=>{g?(A?.register(),Ba&&!e.disableInitialFocus&&document.addEventListener("focusin",f,{once:!0})):(A?.unregister(),Ba&&document.removeEventListener("focusin",f))},{immediate:!0});function m(g){A?.closeParents(g)}function h(g){if(!e.disabled)if(g.key==="Tab"||g.key==="Enter"&&!e.closeOnContentClick){if(g.key==="Enter"&&(g.target instanceof HTMLTextAreaElement||g.target instanceof HTMLInputElement&&g.target.closest("form")))return;g.key==="Enter"&&g.preventDefault(),G8(S0(c.value?.contentEl,!1),g.shiftKey?"prev":"next",b=>b.tabIndex>=0)||(a.value=!1,c.value?.activatorEl?.focus())}else e.submenu&&g.key===(s.value?"ArrowRight":"ArrowLeft")&&(a.value=!1,c.value?.activatorEl?.focus())}function p(g){if(e.disabled)return;const w=c.value?.contentEl;w&&a.value?g.key==="ArrowDown"?(g.preventDefault(),g.stopImmediatePropagation(),af(w,"next")):g.key==="ArrowUp"?(g.preventDefault(),g.stopImmediatePropagation(),af(w,"prev")):e.submenu&&(g.key===(s.value?"ArrowRight":"ArrowLeft")?a.value=!1:g.key===(s.value?"ArrowLeft":"ArrowRight")&&(g.preventDefault(),af(w,"first"))):(e.submenu?g.key===(s.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(g.key))&&(a.value=!0,g.preventDefault(),setTimeout(()=>setTimeout(()=>p(g))))}const y=ae(()=>Ue({"aria-haspopup":"menu","aria-expanded":String(a.value),"aria-controls":i.value,onKeydown:p},e.activatorProps));return St(()=>{const g=Ou.filterProps(e);return l(Ou,Ue({ref:c,id:i.value,class:["v-menu",e.class],style:e.style},g,{modelValue:a.value,"onUpdate:modelValue":w=>a.value=w,absolute:!0,activatorProps:y.value,location:e.location??(e.submenu?"end":"bottom"),"onClick:outside":m,onKeydown:h},r),{activator:n.activator,default:function(){for(var w=arguments.length,b=new Array(w),x=0;x<w;x++)b[x]=arguments[x];return l(Ln,{root:"VMenu"},{default:()=>[n.default?.(...b)]})}})}),Es({id:i,openChildren:d},c)}}),xqe=it({active:Boolean,disabled:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...tn(),...lu({transition:{component:i4}})},"VCounter"),Zw=yt()({name:"VCounter",functional:!0,props:xqe(),setup(e,t){let{slots:n}=t;const a=Xe(()=>e.max?`${e.value} / ${e.max}`:String(e.value));return St(()=>l(po,{transition:e.transition},{default:()=>[ma(v("div",{class:ct(["v-counter",{"text-error":e.max&&!e.disabled&&parseFloat(e.value)>parseFloat(e.max)},e.class]),style:Rt(e.style)},[n.default?n.default({counter:a.value,max:e.max,value:e.value}):a.value]),[[ci,e.active]])]})),{}}}),Cqe=it({floating:Boolean,...tn()},"VFieldLabel"),Vp=yt()({name:"VFieldLabel",props:Cqe(),setup(e,t){let{slots:n}=t;return St(()=>l(Bh,{class:ct(["v-field-label",{"v-field-label--floating":e.floating},e.class]),style:Rt(e.style)},n)),{}}}),Sqe=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],zg=it({appendInnerIcon:An,bgColor:String,clearable:Boolean,clearIcon:{type:An,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,details:Boolean,dirty:Boolean,disabled:{type:Boolean,default:null},glow:Boolean,error:Boolean,flat:Boolean,iconColor:[Boolean,String],label:String,persistentClear:Boolean,prependInnerIcon:An,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:e=>Sqe.includes(e)},"onClick:clear":Ns(),"onClick:appendInner":Ns(),"onClick:prependInner":Ns(),...tn(),...Yw(),...cr(),...la()},"VField"),rA=yt()({name:"VField",inheritAttrs:!1,props:{id:String,...$g(),...zg()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:r}=t;const{themeClasses:s}=ka(e),{loaderClasses:o}=Lg(e),{focusClasses:i,isFocused:c,focus:A,blur:d}=jc(e),{InputIcon:f}=yQ(e),{roundedClasses:m}=xr(e),{rtlClasses:h}=Zr(),p=Xe(()=>e.dirty||e.active),y=Xe(()=>!!(e.label||r.label)),g=Xe(()=>!e.singleLine&&y.value),w=Go(),b=ae(()=>e.id||`input-${w}`),x=Xe(()=>e.details?`${b.value}-messages`:void 0),T=V(),F=V(),k=V(),S=ae(()=>["plain","underlined"].includes(e.variant)),E=ae(()=>e.error||e.disabled?void 0:p.value&&c.value?e.color:e.baseColor),C=ae(()=>{if(!(!e.iconColor||e.glow&&!c.value))return e.iconColor===!0?E.value:e.iconColor}),{backgroundColorClasses:D,backgroundColorStyles:P}=Fa(()=>e.bgColor),{textColorClasses:O,textColorStyles:H}=Ls(E);Ke(p,j=>{if(g.value){const J=T.value.$el,ue=F.value.$el;requestAnimationFrame(()=>{const ne=mk(J),Y=ue.getBoundingClientRect(),te=Y.x-ne.x,L=Y.y-ne.y-(ne.height/2-Y.height/2),N=Y.width/.75,q=Math.abs(N-ne.width)>1?{maxWidth:Yt(N)}:void 0,Q=getComputedStyle(J),ee=getComputedStyle(ue),z=parseFloat(Q.transitionDuration)*1e3||150,X=parseFloat(ee.getPropertyValue("--v-field-label-scale")),le=ee.getPropertyValue("color");J.style.visibility="visible",ue.style.visibility="hidden",KA(J,{transform:`translate(${te}px, ${L}px) scale(${X})`,color:le,...q},{duration:z,easing:E0,direction:j?"normal":"reverse"}).finished.then(()=>{J.style.removeProperty("visibility"),ue.style.removeProperty("visibility")})})}},{flush:"post"});const ie=ae(()=>({isActive:p,isFocused:c,controlRef:k,blur:d,focus:A}));function Ae(j){j.target!==document.activeElement&&j.preventDefault()}return St(()=>{const j=e.variant==="outlined",J=!!(r["prepend-inner"]||e.prependInnerIcon),ue=!!(e.clearable||r.clear)&&!e.disabled,ne=!!(r["append-inner"]||e.appendInnerIcon||ue),Y=()=>r.label?r.label({...ie.value,label:e.label,props:{for:b.value}}):e.label;return v("div",Ue({class:["v-field",{"v-field--active":p.value,"v-field--appended":ne,"v-field--center-affix":e.centerAffix??!S.value,"v-field--disabled":e.disabled,"v-field--dirty":e.dirty,"v-field--error":e.error,"v-field--glow":e.glow,"v-field--flat":e.flat,"v-field--has-background":!!e.bgColor,"v-field--persistent-clear":e.persistentClear,"v-field--prepended":J,"v-field--reverse":e.reverse,"v-field--single-line":e.singleLine,"v-field--no-label":!Y(),[`v-field--variant-${e.variant}`]:!0},s.value,D.value,i.value,o.value,m.value,h.value,e.class],style:[P.value,e.style],onClick:Ae},n),[v("div",{class:"v-field__overlay"},null),l(Mg,{name:"v-field",active:!!e.loading,color:e.error?"error":typeof e.loading=="string"?e.loading:e.color},{default:r.loader}),J&&v("div",{key:"prepend",class:"v-field__prepend-inner"},[e.prependInnerIcon&&l(f,{key:"prepend-icon",name:"prependInner",color:C.value},null),r["prepend-inner"]?.(ie.value)]),v("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(e.variant)&&g.value&&l(Vp,{key:"floating-label",ref:F,class:ct([O.value]),floating:!0,for:b.value,"aria-hidden":!p.value,style:Rt(H.value)},{default:()=>[Y()]}),y.value&&l(Vp,{key:"label",ref:T,for:b.value},{default:()=>[Y()]}),r.default?.({...ie.value,props:{id:b.value,class:"v-field__input","aria-describedby":x.value},focus:A,blur:d})??v("div",{id:b.value,class:"v-field__input","aria-describedby":x.value},null)]),ue&&l(l4,{key:"clear"},{default:()=>[ma(v("div",{class:"v-field__clearable",onMousedown:te=>{te.preventDefault(),te.stopPropagation()}},[l(Ln,{defaults:{VIcon:{icon:e.clearIcon}}},{default:()=>[r.clear?r.clear({...ie.value,props:{onFocus:A,onBlur:d,onClick:e["onClick:clear"],tabindex:-1}}):l(f,{name:"clear",onFocus:A,onBlur:d,tabindex:-1},null)]})]),[[ci,e.dirty]])]}),ne&&v("div",{key:"append",class:"v-field__append-inner"},[r["append-inner"]?.(ie.value),e.appendInnerIcon&&l(f,{key:"append-icon",name:"appendInner",color:C.value},null)]),v("div",{class:ct(["v-field__outline",O.value]),style:Rt(H.value)},[j&&v(We,null,[v("div",{class:"v-field__outline__start"},null),g.value&&v("div",{class:"v-field__outline__notch"},[l(Vp,{ref:F,floating:!0,for:b.value,"aria-hidden":!p.value},{default:()=>[Y()]})]),v("div",{class:"v-field__outline__end"},null)]),S.value&&g.value&&l(Vp,{ref:F,floating:!0,for:b.value,"aria-hidden":!p.value},{default:()=>[Y()]})])])}),{controlRef:k,fieldIconColor:C}}});function t7(e){function t(n,a){!e.autofocus||!n||a[0].target?.focus?.()}return{onIntersect:t}}const Eqe=["color","file","time","date","datetime-local","week","month"],Kg=it({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...qc(),...zg()},"VTextField"),Hc=yt()({name:"VTextField",directives:{vIntersect:Xl},inheritAttrs:!1,props:Kg(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:r}=t;const s=ln(e,"modelValue"),{isFocused:o,focus:i,blur:c}=jc(e),{onIntersect:A}=t7(e),d=ae(()=>typeof e.counterValue=="function"?e.counterValue(s.value):typeof e.counterValue=="number"?e.counterValue:(s.value??"").toString().length),f=ae(()=>{if(n.maxlength)return n.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),m=ae(()=>["plain","underlined"].includes(e.variant)),h=V(),p=V(),y=V(),g=ae(()=>Eqe.includes(e.type)||e.persistentPlaceholder||o.value||e.active);function w(){o.value||i(),xn(()=>{y.value!==document.activeElement&&y.value?.focus()})}function b(k){a("mousedown:control",k),k.target!==y.value&&(w(),k.preventDefault())}function x(k){a("click:control",k)}function T(k,S){k.stopPropagation(),w(),xn(()=>{s.value=null,S(),aw(e["onClick:clear"],k)})}function F(k){const S=k.target;if(s.value=S.value,e.modelModifiers?.trim&&["text","search","password","tel","url"].includes(e.type)){const E=[S.selectionStart,S.selectionEnd];xn(()=>{S.selectionStart=E[0],S.selectionEnd=E[1]})}}return St(()=>{const k=!!(r.counter||e.counter!==!1&&e.counter!=null),S=!!(k||r.details),[E,C]=iA(n),{modelValue:D,...P}=Zs.filterProps(e),O=rA.filterProps(e);return l(Zs,Ue({ref:h,modelValue:s.value,"onUpdate:modelValue":H=>s.value=H,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-input--plain-underlined":m.value},e.class],style:e.style},E,P,{centerAffix:!m.value,focused:o.value}),{...r,default:H=>{let{id:ie,isDisabled:Ae,isDirty:j,isReadonly:J,isValid:ue,hasDetails:ne,reset:Y}=H;return l(rA,Ue({ref:p,onMousedown:b,onClick:x,"onClick:clear":te=>T(te,Y),"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:e.role},$a(O,["onClick:clear"]),{id:ie.value,active:g.value||j.value,dirty:j.value||e.dirty,disabled:Ae.value,focused:o.value,details:ne.value,error:ue.value===!1}),{...r,default:te=>{let{props:{class:L,...N}}=te;const q=ma(v("input",Ue({ref:y,value:s.value,onInput:F,autofocus:e.autofocus,readonly:J.value,disabled:Ae.value,name:e.name,placeholder:e.placeholder,size:1,role:e.role,type:e.type,onFocus:i,onBlur:c},N,C),null),[[Xl,{handler:A},null,{once:!0}]]);return v(We,null,[e.prefix&&v("span",{class:"v-text-field__prefix"},[v("span",{class:"v-text-field__prefix__text"},[e.prefix])]),r.default?v("div",{class:ct(L),"data-no-activator":""},[r.default(),q]):Uu(q,{class:L}),e.suffix&&v("span",{class:"v-text-field__suffix"},[v("span",{class:"v-text-field__suffix__text"},[e.suffix])])])}})},details:S?H=>v(We,null,[r.details?.(H),k&&v(We,null,[v("span",null,null),l(Zw,{active:e.persistentCounter||o.value,value:d.value,max:f.value,disabled:e.disabled},r.counter)])]):void 0})}),Es({},h,p,y)}}),Bqe=it({renderless:Boolean,...tn()},"VVirtualScrollItem"),n7=yt()({name:"VVirtualScrollItem",inheritAttrs:!1,props:Bqe(),emits:{"update:height":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:r}=t;const{resizeRef:s,contentRect:o}=Kl(void 0,"border");Ke(()=>o.value?.height,i=>{i!=null&&a("update:height",i)}),St(()=>e.renderless?v(We,null,[r.default?.({itemRef:s})]):v("div",Ue({ref:s,class:["v-virtual-scroll__item",e.class],style:e.style},n),[r.default?.()]))}}),kqe=-1,Tqe=1,jC=100,a7=it({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function r7(e,t){const n=dl(),a=Ht(0);_r(()=>{a.value=parseFloat(e.itemHeight||0)});const r=Ht(0),s=Ht(Math.ceil((parseInt(e.height)||n.height.value)/(a.value||16))||1),o=Ht(0),i=Ht(0),c=V(),A=V();let d=0;const{resizeRef:f,contentRect:m}=Kl();_r(()=>{f.value=c.value});const h=ae(()=>c.value===document.documentElement?n.height.value:m.value?.height||parseInt(e.height)||0),p=ae(()=>!!(c.value&&A.value&&h.value&&a.value));let y=Array.from({length:t.value.length}),g=Array.from({length:t.value.length});const w=Ht(0);let b=-1;function x(Y){return y[Y]||a.value}const T=O8(()=>{const Y=performance.now();g[0]=0;const te=t.value.length;for(let L=1;L<=te-1;L++)g[L]=(g[L-1]||0)+x(L-1);w.value=Math.max(w.value,performance.now()-Y)},w),F=Ke(p,Y=>{Y&&(F(),d=A.value.offsetTop,T.immediate(),j(),~b&&xn(()=>{Ba&&window.requestAnimationFrame(()=>{ue(b),b=-1})}))});cs(()=>{T.clear()});function k(Y,te){const L=y[Y],N=a.value;a.value=N?Math.min(a.value,te):te,(L!==te||N!==a.value)&&(y[Y]=te,T())}function S(Y){Y=tr(Y,0,t.value.length-1);const te=Math.floor(Y),L=Y%1,N=te+1,q=g[te]||0,Q=g[N]||q;return q+(Q-q)*L}function E(Y){return Iqe(g,Y)}let C=0,D=0,P=0;Ke(h,(Y,te)=>{te&&(j(),Y<te&&requestAnimationFrame(()=>{D=0,j()}))});let O=-1;function H(){if(!c.value||!A.value)return;const Y=c.value.scrollTop,te=performance.now();te-P>500?(D=Math.sign(Y-C),d=A.value.offsetTop):D=Y-C,C=Y,P=te,window.clearTimeout(O),O=window.setTimeout(ie,500),j()}function ie(){!c.value||!A.value||(D=0,P=0,window.clearTimeout(O),j())}let Ae=-1;function j(){cancelAnimationFrame(Ae),Ae=requestAnimationFrame(J)}function J(){if(!c.value||!h.value||!a.value)return;const Y=C-d,te=Math.sign(D),L=Math.max(0,Y-jC),N=tr(E(L),0,t.value.length),q=Y+h.value+jC,Q=tr(E(q)+1,N+1,t.value.length);if((te!==kqe||N<r.value)&&(te!==Tqe||Q>s.value)){const ee=S(r.value)-S(N),z=S(Q)-S(s.value);Math.max(ee,z)>jC?(r.value=N,s.value=Q):(N<=0&&(r.value=N),Q>=t.value.length&&(s.value=Q))}o.value=S(r.value),i.value=S(t.value.length)-S(s.value)}function ue(Y){const te=S(Y);!c.value||Y&&!te?b=Y:c.value.scrollTop=te}const ne=ae(()=>t.value.slice(r.value,s.value).map((Y,te)=>{const L=te+r.value;return{raw:Y,index:L,key:Nr(Y,e.itemKey,L)}}));return Ke(t,()=>{y=Array.from({length:t.value.length}),g=Array.from({length:t.value.length}),T.immediate(),j()},{deep:1}),{calculateVisibleItems:j,containerRef:c,markerRef:A,computedItems:ne,paddingTop:o,paddingBottom:i,scrollToIndex:ue,handleScroll:H,handleScrollend:ie,handleItemResize:k}}function Iqe(e,t){let n=e.length-1,a=0,r=0,s=null,o=-1;if(e[n]<t)return n;for(;a<=n;)if(r=a+n>>1,s=e[r],s>t)n=r-1;else if(s<t)o=r,a=r+1;else return s===t?r:a;return o}const Fqe=it({items:{type:Array,default:()=>[]},renderless:Boolean,...a7(),...tn(),...Lr()},"VVirtualScroll"),eb=yt()({name:"VVirtualScroll",props:Fqe(),setup(e,t){let{slots:n}=t;const a=Pr("VVirtualScroll"),{dimensionStyles:r}=Mr(e),{calculateVisibleItems:s,containerRef:o,markerRef:i,handleScroll:c,handleScrollend:A,handleItemResize:d,scrollToIndex:f,paddingTop:m,paddingBottom:h,computedItems:p}=r7(e,Xe(()=>e.items));return yo(()=>e.renderless,()=>{function y(){const w=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";o.value===document.documentElement?(document[w]("scroll",c,{passive:!0}),document[w]("scrollend",A)):(o.value?.[w]("scroll",c,{passive:!0}),o.value?.[w]("scrollend",A))}un(()=>{o.value=gk(a.vnode.el,!0),y(!0)}),cs(y)}),St(()=>{const y=p.value.map(g=>l(n7,{key:g.key,renderless:e.renderless,"onUpdate:height":w=>d(g.index,w)},{default:w=>n.default?.({item:g.raw,index:g.index,...w})}));return e.renderless?v(We,null,[v("div",{ref:i,class:"v-virtual-scroll__spacer",style:{paddingTop:Yt(m.value)}},null),y,v("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:Yt(h.value)}},null)]):v("div",{ref:o,class:ct(["v-virtual-scroll",e.class]),onScrollPassive:c,onScrollend:A,style:Rt([r.value,e.style])},[v("div",{ref:i,class:"v-virtual-scroll__container",style:{paddingTop:Yt(m.value),paddingBottom:Yt(h.value)}},[y])])}),{calculateVisibleItems:s,scrollToIndex:f}}});function w4(e,t){const n=Ht(!1);let a;function r(i){cancelAnimationFrame(a),n.value=!0,a=requestAnimationFrame(()=>{a=requestAnimationFrame(()=>{n.value=!1})})}async function s(){await new Promise(i=>requestAnimationFrame(i)),await new Promise(i=>requestAnimationFrame(i)),await new Promise(i=>requestAnimationFrame(i)),await new Promise(i=>{if(n.value){const c=Ke(n,()=>{c(),i()})}else i()})}async function o(i){if(i.key==="Tab"&&t.value?.focus(),!["PageDown","PageUp","Home","End"].includes(i.key))return;const c=e.value?.$el;if(!c)return;(i.key==="Home"||i.key==="End")&&c.scrollTo({top:i.key==="Home"?0:c.scrollHeight,behavior:"smooth"}),await s();const A=c.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(i.key==="PageDown"||i.key==="Home"){const d=c.getBoundingClientRect().top;for(const f of A)if(f.getBoundingClientRect().top>=d){f.focus();break}}else{const d=c.getBoundingClientRect().bottom;for(const f of[...A].reverse())if(f.getBoundingClientRect().bottom<=d){f.focus();break}}}return{onScrollPassive:r,onKeydown:o}}const b4=it({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:An,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,noAutoScroll:Boolean,...HQ({itemChildren:!1})},"Select"),Pqe=it({...b4(),...$a(Kg({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...lu({transition:{component:Ww}})},"VSelect"),x4=yt()({name:"VSelect",props:Pqe(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:n}=t;const{t:a}=Qa(),r=V(),s=V(),o=V(),{items:i,transformIn:c,transformOut:A}=v4(e),d=ln(e,"modelValue",[],Y=>c(Y===null?[null]:pr(Y)),Y=>{const te=A(Y);return e.multiple?te:te[0]??null}),f=ae(()=>typeof e.counterValue=="function"?e.counterValue(d.value):typeof e.counterValue=="number"?e.counterValue:d.value.length),m=Qg(e),h=ae(()=>d.value.map(Y=>Y.value)),p=Ht(!1);let y="",g=-1,w;const b=ae(()=>e.hideSelected?i.value.filter(Y=>!d.value.some(te=>(e.valueComparator||bs)(te,Y))):i.value),x=ae(()=>e.hideNoData&&!b.value.length||m.isReadonly.value||m.isDisabled.value),T=ln(e,"menu"),F=ae({get:()=>T.value,set:Y=>{T.value&&!Y&&s.value?.openChildren.size||Y&&x.value||(T.value=Y)}}),k=Xe(()=>F.value?e.closeText:e.openText),S=ae(()=>({...e.menuProps,activatorProps:{...e.menuProps?.activatorProps||{},"aria-haspopup":"listbox"}})),E=V(),C=w4(E,r);function D(Y){e.openOnClear&&(F.value=!0)}function P(){x.value||(F.value=!F.value)}function O(Y){Dv(Y)&&H(Y)}function H(Y){if(!Y.key||m.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(Y.key)&&Y.preventDefault(),["Enter","ArrowDown"," "].includes(Y.key)&&(F.value=!0),["Escape","Tab"].includes(Y.key)&&(F.value=!1),Y.key==="Home"?E.value?.focus("first"):Y.key==="End"&&E.value?.focus("last");const te=1e3;if(!Dv(Y))return;const L=performance.now();L-w>te&&(y="",g=-1),y+=Y.key.toLowerCase(),w=L;const N=b.value;function q(){let le=Q();return le||y.at(-1)===y.at(-2)&&(y=y.slice(0,-1),le=Q(),le)||(g=-1,le=Q(),le)?le:(y=Y.key.toLowerCase(),Q())}function Q(){for(let le=g+1;le<N.length;le++){const re=N[le];if(re.title.toLowerCase().startsWith(y))return[re,le]}}const ee=q();if(!ee)return;const[z,X]=ee;g=X,E.value?.focus(X),e.multiple||(d.value=[z])}function ie(Y){let te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!Y.props.disabled)if(e.multiple){const L=d.value.findIndex(q=>(e.valueComparator||bs)(q.value,Y.value)),N=te??!~L;if(~L){const q=N?[...d.value,Y]:[...d.value];q.splice(L,1),d.value=q}else N&&(d.value=[...d.value,Y])}else{const L=te!==!1;d.value=L?[Y]:[],xn(()=>{F.value=!1})}}function Ae(Y){E.value?.$el.contains(Y.relatedTarget)||(F.value=!1)}function j(){e.eager&&o.value?.calculateVisibleItems()}function J(){p.value&&r.value?.focus()}function ue(Y){p.value=!0}function ne(Y){if(Y==null)d.value=[];else if(Pv(r.value,":autofill")||Pv(r.value,":-webkit-autofill")){const te=i.value.find(L=>L.title===Y);te&&ie(te)}else r.value&&(r.value.value="")}return Ke(F,()=>{if(!e.hideSelected&&F.value&&d.value.length){const Y=b.value.findIndex(te=>d.value.some(L=>(e.valueComparator||bs)(L.value,te.value)));Ba&&!e.noAutoScroll&&window.requestAnimationFrame(()=>{Y>=0&&o.value?.scrollToIndex(Y)})}}),Ke(()=>e.items,(Y,te)=>{F.value||p.value&&e.hideNoData&&!te.length&&Y.length&&(F.value=!0)}),St(()=>{const Y=!!(e.chips||n.chip),te=!!(!e.hideNoData||b.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),L=d.value.length>0,N=Hc.filterProps(e),q=L||!p.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return l(Hc,Ue({ref:r},N,{modelValue:d.value.map(Q=>Q.props.title).join(", "),"onUpdate:modelValue":ne,focused:p.value,"onUpdate:focused":Q=>p.value=Q,validationValue:d.externalValue,counterValue:f.value,dirty:L,class:["v-select",{"v-select--active-menu":F.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":d.value.length,"v-select--selection-slot":!!n.selection},e.class],style:e.style,inputmode:"none",placeholder:q,"onClick:clear":D,"onMousedown:control":P,onBlur:Ae,onKeydown:H,"aria-label":a(k.value),title:a(k.value)}),{...n,default:()=>v(We,null,[l(Xv,Ue({ref:s,modelValue:F.value,"onUpdate:modelValue":Q=>F.value=Q,activator:"parent",contentClass:"v-select__content",disabled:x.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:j,onAfterLeave:J},S.value),{default:()=>[te&&l(Yv,Ue({ref:E,selected:h.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:Q=>Q.preventDefault(),onKeydown:O,onFocusin:ue,tabindex:"-1","aria-live":"polite","aria-label":`${e.label}-list`,color:e.itemColor??e.color},C,e.listProps),{default:()=>[n["prepend-item"]?.(),!b.value.length&&!e.hideNoData&&(n["no-data"]?.()??l(Jl,{key:"no-data",title:a(e.noDataText)},null)),l(eb,{ref:o,renderless:!0,items:b.value,itemKey:"value"},{default:Q=>{let{item:ee,index:z,itemRef:X}=Q;const le=Ate(ee.props),re=Ue(ee.props,{ref:X,key:ee.value,onClick:()=>ie(ee,null)});return ee.type==="divider"?n.divider?.({props:ee.raw,index:z})??l(Ii,Ue(ee.props,{key:`divider-${z}`}),null):ee.type==="subheader"?n.subheader?.({props:ee.raw,index:z})??l(Th,Ue(ee.props,{key:`subheader-${z}`}),null):n.item?.({item:ee,index:z,props:re})??l(Jl,Ue(re,{role:"option"}),{prepend:de=>{let{isSelected:G}=de;return v(We,null,[e.multiple&&!e.hideSelected?l(Mu,{key:ee.value,modelValue:G,ripple:!1,tabindex:"-1"},null):void 0,le.prependAvatar&&l(ul,{image:le.prependAvatar},null),le.prependIcon&&l(Ea,{icon:le.prependIcon},null)])}})}}),n["append-item"]?.()]})]}),d.value.map((Q,ee)=>{function z(de){de.stopPropagation(),de.preventDefault(),ie(Q,!1)}const X={"onClick:close":z,onKeydown(de){de.key!=="Enter"&&de.key!==" "||(de.preventDefault(),de.stopPropagation(),z(de))},onMousedown(de){de.preventDefault(),de.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},le=Y?!!n.chip:!!n.selection,re=le?rw(Y?n.chip({item:Q,index:ee,props:X}):n.selection({item:Q,index:ee})):void 0;if(!(le&&!re))return v("div",{key:Q.value,class:"v-select__selection"},[Y?n.chip?l(Ln,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:Q.title}}},{default:()=>[re]}):l(kh,Ue({key:"chip",closable:e.closableChips,size:"small",text:Q.title,disabled:Q.props.disabled},X),null):re??v("span",{class:"v-select__selection-text"},[Q.title,e.multiple&&ee<d.value.length-1&&v("span",{class:"v-select__selection-comma"},[M(",")])])])})]),"append-inner":function(){for(var Q=arguments.length,ee=new Array(Q),z=0;z<Q;z++)ee[z]=arguments[z];return v(We,null,[n["append-inner"]?.(...ee),e.menuIcon?l(Ea,{class:"v-select__menu-icon",color:r.value?.fieldIconColor,icon:e.menuIcon},null):void 0])}})}),Es({isFocused:p,menu:F,select:ie},r)}}),Dqe=(e,t,n)=>{if(e==null||t==null)return-1;if(!t.length)return 0;e=e.toString().toLocaleLowerCase(),t=t.toString().toLocaleLowerCase();const a=[];let r=e.indexOf(t);for(;~r;)a.push([r,r+t.length]),r=e.indexOf(t,r+t.length);return a.length?a:-1};function qC(e,t){if(!(e==null||typeof e=="boolean"||e===-1))return typeof e=="number"?[[e,e+t.length]]:Array.isArray(e[0])?e:[e]}const Ih=it({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function Uqe(e,t,n){const a=[],r=n?.default??Dqe,s=n?.filterKeys?pr(n.filterKeys):!1,o=Object.keys(n?.customKeyFilter??{}).length;if(!e?.length)return a;e:for(let i=0;i<e.length;i++){const[c,A=c]=pr(e[i]),d={},f={};let m=-1;if((t||o>0)&&!n?.noFilter){let h=!1;if(typeof c=="object"){if(c.type==="divider"||c.type==="subheader")continue;const g=s||Object.keys(A);h=g.length===o;for(const w of g){const b=Nr(A,w),x=n?.customKeyFilter?.[w];if(m=x?x(b,t,c):r(b,t,c),m!==-1&&m!==!1)x?d[w]=qC(m,t):f[w]=qC(m,t);else if(n?.filterMode==="every")continue e}}else m=r(c,t,c),m!==-1&&m!==!1&&(f.title=qC(m,t));const p=Object.keys(f).length,y=Object.keys(d).length;if(!p&&!y||n?.filterMode==="union"&&y!==o&&!p||n?.filterMode==="intersection"&&(y!==o||!p&&o>0&&!h))continue}a.push({index:i,matches:{...f,...d}})}return a}function Fh(e,t,n,a){const r=Ht([]),s=Ht(new Map),o=ae(()=>a?.transform?$e(t).map(c=>[c,a.transform(c)]):$e(t));_r(()=>{const c=typeof n=="function"?n():$e(n),A=typeof c!="string"&&typeof c!="number"?"":String(c),d=Uqe(o.value,A,{customKeyFilter:{...e.customKeyFilter,...$e(a?.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),f=$e(t),m=[],h=new Map;d.forEach(p=>{let{index:y,matches:g}=p;const w=f[y];m.push(w),h.set(w.value,g)}),r.value=m,s.value=h});function i(c){return s.value.get(c.value)}return{filteredItems:r,filteredMatches:s,getMatches:i}}function s7(e,t,n){return n==null||!n.length?t:n.map((a,r)=>{const s=r===0?0:n[r-1][1],o=[v("span",{class:ct(`${e}__unmask`)},[t.slice(s,a[0])]),v("span",{class:ct(`${e}__mask`)},[t.slice(a[0],a[1])])];return r===n.length-1&&o.push(v("span",{class:ct(`${e}__unmask`)},[t.slice(a[1])])),v(We,null,[o])})}const Rqe=it({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...Ih({filterKeys:["title"]}),...b4(),...$a(Kg({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...lu({transition:!1})},"VAutocomplete"),Nqe=yt()({name:"VAutocomplete",props:Rqe(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:n}=t;const{t:a}=Qa(),r=V(),s=Ht(!1),o=Ht(!0),i=Ht(!1),c=V(),A=V(),d=Ht(-1),{items:f,transformIn:m,transformOut:h}=v4(e),{textColorClasses:p,textColorStyles:y}=Ls(()=>r.value?.color),g=ln(e,"search",""),w=ln(e,"modelValue",[],re=>m(re===null?[null]:pr(re)),re=>{const de=h(re);return e.multiple?de:de[0]??null}),b=ae(()=>typeof e.counterValue=="function"?e.counterValue(w.value):typeof e.counterValue=="number"?e.counterValue:w.value.length),x=Qg(e),{filteredItems:T,getMatches:F}=Fh(e,f,()=>o.value?"":g.value),k=ae(()=>e.hideSelected?T.value.filter(re=>!w.value.some(de=>de.value===re.value)):T.value),S=ae(()=>!!(e.chips||n.chip)),E=ae(()=>S.value||!!n.selection),C=ae(()=>w.value.map(re=>re.props.value)),D=ae(()=>(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&g.value===k.value[0]?.title)&&k.value.length>0&&!o.value&&!i.value),P=ae(()=>e.hideNoData&&!k.value.length||x.isReadonly.value||x.isDisabled.value),O=ln(e,"menu"),H=ae({get:()=>O.value,set:re=>{O.value&&!re&&c.value?.openChildren.size||re&&P.value||(O.value=re)}}),ie=ae(()=>H.value?e.closeText:e.openText),Ae=V(),j=w4(Ae,r);function J(re){e.openOnClear&&(H.value=!0),g.value=""}function ue(){P.value||(H.value=!0)}function ne(re){P.value||(s.value&&(re.preventDefault(),re.stopPropagation()),H.value=!H.value)}function Y(re){(Dv(re)||re.key==="Backspace")&&r.value?.focus()}function te(re){if(x.isReadonly.value)return;const de=r.value?.selectionStart,G=w.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(re.key)&&re.preventDefault(),["Enter","ArrowDown"].includes(re.key)&&(H.value=!0),["Escape"].includes(re.key)&&(H.value=!1),D.value&&["Enter","Tab"].includes(re.key)&&!w.value.some(Z=>{let{value:ce}=Z;return ce===k.value[0].value})&&le(k.value[0]),re.key==="ArrowDown"&&D.value&&Ae.value?.focus("next"),["Backspace","Delete"].includes(re.key)){if(!e.multiple&&E.value&&w.value.length>0&&!g.value)return le(w.value[0],!1);if(~d.value){re.preventDefault();const Z=d.value;le(w.value[d.value],!1),d.value=Z>=G-1?G-2:Z}else re.key==="Backspace"&&!g.value&&(d.value=G-1);return}if(e.multiple)if(re.key==="ArrowLeft"){if(d.value<0&&de&&de>0)return;const Z=d.value>-1?d.value-1:G-1;if(w.value[Z])d.value=Z;else{const ce=g.value?.length??null;d.value=-1,r.value?.setSelectionRange(ce,ce)}}else if(re.key==="ArrowRight"){if(d.value<0)return;const Z=d.value+1;w.value[Z]?d.value=Z:(d.value=-1,r.value?.setSelectionRange(0,0))}else~d.value&&Dv(re)&&(d.value=-1)}function L(re){if(Pv(r.value,":autofill")||Pv(r.value,":-webkit-autofill")){const de=f.value.find(G=>G.title===re.target.value);de&&le(de)}}function N(){e.eager&&A.value?.calculateVisibleItems()}function q(){s.value&&(o.value=!0,r.value?.focus())}function Q(re){s.value=!0,setTimeout(()=>{i.value=!0})}function ee(re){i.value=!1}function z(re){(re==null||re===""&&!e.multiple&&!E.value)&&(w.value=[])}const X=Ht(!1);function le(re){let de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!re||re.props.disabled))if(e.multiple){const G=w.value.findIndex(ce=>(e.valueComparator||bs)(ce.value,re.value)),Z=de??!~G;if(~G){const ce=Z?[...w.value,re]:[...w.value];ce.splice(G,1),w.value=ce}else Z&&(w.value=[...w.value,re]);e.clearOnSelect&&(g.value="")}else{const G=de!==!1;w.value=G?[re]:[],g.value=G&&!E.value?re.title:"",xn(()=>{H.value=!1,o.value=!0})}}return Ke(s,(re,de)=>{re!==de&&(re?(X.value=!0,g.value=e.multiple||E.value?"":String(w.value.at(-1)?.props.title??""),o.value=!0,xn(()=>X.value=!1)):(!e.multiple&&g.value==null&&(w.value=[]),H.value=!1,(e.multiple||E.value)&&(g.value=""),d.value=-1))}),Ke(g,re=>{!s.value||X.value||(re&&(H.value=!0),o.value=!re)}),Ke(H,()=>{if(!e.hideSelected&&H.value&&w.value.length){const re=k.value.findIndex(de=>w.value.some(G=>de.value===G.value));Ba&&window.requestAnimationFrame(()=>{re>=0&&A.value?.scrollToIndex(re)})}}),Ke(()=>e.items,(re,de)=>{H.value||s.value&&!de.length&&re.length&&(H.value=!0)}),St(()=>{const re=!!(!e.hideNoData||k.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),de=w.value.length>0,G=Hc.filterProps(e);return l(Hc,Ue({ref:r},G,{modelValue:g.value,"onUpdate:modelValue":[Z=>g.value=Z,z],focused:s.value,"onUpdate:focused":Z=>s.value=Z,validationValue:w.externalValue,counterValue:b.value,dirty:de,onChange:L,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":H.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!E.value,"v-autocomplete--selecting-index":d.value>-1},e.class],style:e.style,readonly:x.isReadonly.value,placeholder:de?void 0:e.placeholder,"onClick:clear":J,"onMousedown:control":ue,onKeydown:te}),{...n,default:()=>v(We,null,[l(Xv,Ue({ref:c,modelValue:H.value,"onUpdate:modelValue":Z=>H.value=Z,activator:"parent",contentClass:"v-autocomplete__content",disabled:P.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:N,onAfterLeave:q},e.menuProps),{default:()=>[re&&l(Yv,Ue({ref:Ae,filterable:!0,selected:C.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:Z=>Z.preventDefault(),onKeydown:Y,onFocusin:Q,onFocusout:ee,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},j,e.listProps),{default:()=>[n["prepend-item"]?.(),!k.value.length&&!e.hideNoData&&(n["no-data"]?.()??l(Jl,{key:"no-data",title:a(e.noDataText)},null)),l(eb,{ref:A,renderless:!0,items:k.value,itemKey:"value"},{default:Z=>{let{item:ce,index:Se,itemRef:Pe}=Z;const ye=Ue(ce.props,{ref:Pe,key:ce.value,active:D.value&&Se===0?!0:void 0,onClick:()=>le(ce,null)});return ce.type==="divider"?n.divider?.({props:ce.raw,index:Se})??l(Ii,Ue(ce.props,{key:`divider-${Se}`}),null):ce.type==="subheader"?n.subheader?.({props:ce.raw,index:Se})??l(Th,Ue(ce.props,{key:`subheader-${Se}`}),null):n.item?.({item:ce,index:Se,props:ye})??l(Jl,Ue(ye,{role:"option"}),{prepend:Ce=>{let{isSelected:_e}=Ce;return v(We,null,[e.multiple&&!e.hideSelected?l(Mu,{key:ce.value,modelValue:_e,ripple:!1,tabindex:"-1"},null):void 0,ce.props.prependAvatar&&l(ul,{image:ce.props.prependAvatar},null),ce.props.prependIcon&&l(Ea,{icon:ce.props.prependIcon},null)])},title:()=>o.value?ce.title:s7("v-autocomplete",ce.title,F(ce)?.title)})}}),n["append-item"]?.()]})]}),w.value.map((Z,ce)=>{function Se(_e){_e.stopPropagation(),_e.preventDefault(),le(Z,!1)}const Pe={"onClick:close":Se,onKeydown(_e){_e.key!=="Enter"&&_e.key!==" "||(_e.preventDefault(),_e.stopPropagation(),Se(_e))},onMousedown(_e){_e.preventDefault(),_e.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},ye=S.value?!!n.chip:!!n.selection,Ce=ye?rw(S.value?n.chip({item:Z,index:ce,props:Pe}):n.selection({item:Z,index:ce})):void 0;if(!(ye&&!Ce))return v("div",{key:Z.value,class:ct(["v-autocomplete__selection",ce===d.value&&["v-autocomplete__selection--selected",p.value]]),style:Rt(ce===d.value?y.value:{})},[S.value?n.chip?l(Ln,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:Z.title}}},{default:()=>[Ce]}):l(kh,Ue({key:"chip",closable:e.closableChips,size:"small",text:Z.title,disabled:Z.props.disabled},Pe),null):Ce??v("span",{class:"v-autocomplete__selection-text"},[Z.title,e.multiple&&ce<w.value.length-1&&v("span",{class:"v-autocomplete__selection-comma"},[M(",")])])])})]),"append-inner":function(){for(var Z=arguments.length,ce=new Array(Z),Se=0;Se<Z;Se++)ce[Se]=arguments[Se];return v(We,null,[n["append-inner"]?.(...ce),e.menuIcon?l(Ea,{class:"v-autocomplete__menu-icon",color:r.value?.fieldIconColor,icon:e.menuIcon,onMousedown:ne,onClick:z8,"aria-label":a(ie.value),title:a(ie.value),tabindex:"-1"},null):void 0])}})}),Es({isFocused:s,isPristine:o,menu:H,search:g,filteredItems:T,select:le},r)}}),Vqe=it({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:An,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...tn(),...Wc({location:"top end"}),...cr(),...Nn(),...la(),...lu({transition:"scale-rotate-transition"}),...Lr()},"VBadge"),Lqe=yt()({name:"VBadge",inheritAttrs:!1,props:Vqe(),setup(e,t){const{backgroundColorClasses:n,backgroundColorStyles:a}=Fa(()=>e.color),{roundedClasses:r}=xr(e),{t:s}=Qa(),{textColorClasses:o,textColorStyles:i}=Ls(()=>e.textColor),{themeClasses:c}=Ck(),{locationStyles:A}=rm(e,!0,f=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(f)?Number(e.offsetY??0):["left","right"].includes(f)?Number(e.offsetX??0):0)),{dimensionStyles:d}=Mr(e);return St(()=>{const f=Number(e.content),m=!e.max||isNaN(f)?e.content:f<=Number(e.max)?f:`${e.max}+`,[h,p]=bS(t.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return l(e.tag,Ue({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},p,{style:e.style}),{default:()=>[v("div",{class:"v-badge__wrapper"},[t.slots.default?.(),l(po,{transition:e.transition},{default:()=>[ma(v("span",Ue({class:["v-badge__badge",c.value,n.value,r.value,o.value],style:[a.value,i.value,d.value,e.inline?{}:A.value],"aria-atomic":"true","aria-label":s(e.label,f),"aria-live":"polite",role:"status"},h),[e.dot?void 0:t.slots.badge?t.slots.badge?.():e.icon?l(Ea,{icon:e.icon},null):m]),[[ci,e.modelValue]])]})])]})}),{}}}),Mqe=it({color:String,density:String,...tn()},"VBannerActions"),o7=yt()({name:"VBannerActions",props:Mqe(),setup(e,t){let{slots:n}=t;return wr({VBtn:{color:e.color,density:e.density,slim:!0,variant:"text"}}),St(()=>v("div",{class:ct(["v-banner-actions",e.class]),style:Rt(e.style)},[n.default?.()])),{}}}),i7=Gc("v-banner-text"),Oqe=it({avatar:String,bgColor:String,color:String,icon:An,lines:String,stacked:Boolean,sticky:Boolean,text:String,...zo(),...tn(),...ds(),...Lr(),...Hf({mobile:null}),...es(),...Wc(),...Sh(),...cr(),...Nn(),...la()},"VBanner"),Hqe=yt()({name:"VBanner",props:Oqe(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:a,backgroundColorStyles:r}=Fa(()=>e.bgColor),{borderClasses:s}=fi(e),{densityClasses:o}=Eo(e),{displayClasses:i,mobile:c}=dl(e),{dimensionStyles:A}=Mr(e),{elevationClasses:d}=Ss(e),{locationStyles:f}=rm(e),{positionClasses:m}=Eh(e),{roundedClasses:h}=xr(e),{themeClasses:p}=ka(e),y=Xe(()=>e.color),g=Xe(()=>e.density);wr({VBannerActions:{color:y,density:g}}),St(()=>{const w=!!(e.text||n.text),b=!!(e.avatar||e.icon),x=!!(b||n.prepend);return l(e.tag,{class:ct(["v-banner",{"v-banner--stacked":e.stacked||c.value,"v-banner--sticky":e.sticky,[`v-banner--${e.lines}-line`]:!!e.lines},p.value,a.value,s.value,o.value,i.value,d.value,m.value,h.value,e.class]),style:Rt([r.value,A.value,f.value,e.style]),role:"banner"},{default:()=>[x&&v("div",{key:"prepend",class:"v-banner__prepend"},[n.prepend?l(Ln,{key:"prepend-defaults",disabled:!b,defaults:{VAvatar:{color:y.value,density:g.value,icon:e.icon,image:e.avatar}}},n.prepend):l(ul,{key:"prepend-avatar",color:y.value,density:g.value,icon:e.icon,image:e.avatar},null)]),v("div",{class:"v-banner__content"},[w&&l(i7,{key:"text"},{default:()=>[n.text?.()??e.text]}),n.default?.()]),n.actions&&l(o7,{key:"actions"},n.actions)]})})}}),$qe=it({baseColor:String,bgColor:String,color:String,grow:Boolean,mode:{type:String,validator:e=>!e||["horizontal","shift"].includes(e)},height:{type:[Number,String],default:56},active:{type:Boolean,default:!0},...zo(),...tn(),...ds(),...es(),...cr(),...$f({name:"bottom-navigation"}),...Nn({tag:"header"}),...tm({selectedClass:"v-btn--selected"}),...la()},"VBottomNavigation"),Qqe=yt()({name:"VBottomNavigation",props:$qe(),emits:{"update:active":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:a}=Ck(),{borderClasses:r}=fi(e),{backgroundColorClasses:s,backgroundColorStyles:o}=Fa(()=>e.bgColor),{densityClasses:i}=Eo(e),{elevationClasses:c}=Ss(e),{roundedClasses:A}=xr(e),{ssrBootStyles:d}=Zf(),f=ae(()=>Number(e.height)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0)),m=ln(e,"active",e.active),{layoutItemStyles:h}=Qf({id:e.name,order:ae(()=>parseInt(e.order,10)),position:Xe(()=>"bottom"),layoutSize:Xe(()=>m.value?f.value:0),elementSize:f,active:m,absolute:Xe(()=>e.absolute)});return AA(e,c4),wr({VBtn:{baseColor:Xe(()=>e.baseColor),color:Xe(()=>e.color),density:Xe(()=>e.density),stacked:Xe(()=>e.mode!=="horizontal"),variant:"text"}},{scoped:!0}),St(()=>l(e.tag,{class:ct(["v-bottom-navigation",{"v-bottom-navigation--active":m.value,"v-bottom-navigation--grow":e.grow,"v-bottom-navigation--shift":e.mode==="shift"},a.value,s.value,r.value,i.value,c.value,A.value,e.class]),style:Rt([o.value,h.value,{height:Yt(f.value)},d.value,e.style])},{default:()=>[n.default&&v("div",{class:"v-bottom-navigation__content"},[n.default()])]})),{}}}),l7=it({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...Gg({origin:"center center",scrollStrategy:"block",transition:{component:Ww},zIndex:2400})},"VDialog"),iB=yt()({name:"VDialog",props:l7(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,t){let{emit:n,slots:a}=t;const r=ln(e,"modelValue"),{scopeId:s}=sm(),o=V();function i(d){const f=d.relatedTarget,m=d.target;if(f!==m&&o.value?.contentEl&&o.value?.globalTop&&![document,o.value.contentEl].includes(m)&&!o.value.contentEl.contains(m)){const h=S0(o.value.contentEl);if(!h.length)return;const p=h[0],y=h[h.length-1];f===p?y.focus():p.focus()}}da(()=>{document.removeEventListener("focusin",i)}),Ba&&Ke(()=>r.value&&e.retainFocus,d=>{d?document.addEventListener("focusin",i):document.removeEventListener("focusin",i)},{immediate:!0});function c(){n("afterEnter"),(e.scrim||e.retainFocus)&&o.value?.contentEl&&!o.value.contentEl.contains(document.activeElement)&&o.value.contentEl.focus({preventScroll:!0})}function A(){n("afterLeave")}return Ke(r,async d=>{d||(await xn(),o.value.activatorEl?.focus({preventScroll:!0}))}),St(()=>{const d=Ou.filterProps(e),f=Ue({"aria-haspopup":"dialog"},e.activatorProps),m=Ue({tabindex:-1},e.contentProps);return l(Ou,Ue({ref:o,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},d,{modelValue:r.value,"onUpdate:modelValue":h=>r.value=h,"aria-modal":"true",activatorProps:f,contentProps:m,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:c,onAfterLeave:A},s),{activator:a.activator,default:function(){for(var h=arguments.length,p=new Array(h),y=0;y<h;y++)p[y]=arguments[y];return l(Ln,{root:"VDialog"},{default:()=>[a.default?.(...p)]})}})}),Es({},o)}}),Gqe=it({inset:Boolean,...l7({transition:"bottom-sheet-transition"})},"VBottomSheet"),zqe=yt()({name:"VBottomSheet",props:Gqe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=ln(e,"modelValue");return St(()=>{const r=iB.filterProps(e);return l(iB,Ue(r,{contentClass:["v-bottom-sheet__content",e.contentClass],modelValue:a.value,"onUpdate:modelValue":s=>a.value=s,class:["v-bottom-sheet",{"v-bottom-sheet--inset":e.inset},e.class],style:e.style}),n)}),{}}}),Kqe=it({divider:[Number,String],...tn()},"VBreadcrumbsDivider"),u7=yt()({name:"VBreadcrumbsDivider",props:Kqe(),setup(e,t){let{slots:n}=t;return St(()=>v("li",{"aria-hidden":"true",class:ct(["v-breadcrumbs-divider",e.class]),style:Rt(e.style)},[n?.default?.()??e.divider])),{}}}),Wqe=it({active:Boolean,activeClass:String,activeColor:String,color:String,disabled:Boolean,title:String,...tn(),...Hg(),...Nn({tag:"li"})},"VBreadcrumbsItem"),c7=yt()({name:"VBreadcrumbsItem",props:Wqe(),setup(e,t){let{slots:n,attrs:a}=t;const r=Og(e,a),s=ae(()=>e.active||r.isActive?.value),{textColorClasses:o,textColorStyles:i}=Ls(()=>s.value?e.activeColor:e.color);return St(()=>l(e.tag,{class:ct(["v-breadcrumbs-item",{"v-breadcrumbs-item--active":s.value,"v-breadcrumbs-item--disabled":e.disabled,[`${e.activeClass}`]:s.value&&e.activeClass},o.value,e.class]),style:Rt([i.value,e.style]),"aria-current":s.value?"page":void 0},{default:()=>[r.isLink.value?v("a",Ue({class:"v-breadcrumbs-item--link",onClick:r.navigate},r.linkProps),[n.default?.()??e.title]):n.default?.()??e.title]})),{}}}),jqe=it({activeClass:String,activeColor:String,bgColor:String,color:String,disabled:Boolean,divider:{type:String,default:"/"},icon:An,items:{type:Array,default:()=>[]},...tn(),...ds(),...cr(),...Nn({tag:"ul"})},"VBreadcrumbs"),qqe=yt()({name:"VBreadcrumbs",props:jqe(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:a,backgroundColorStyles:r}=Fa(()=>e.bgColor),{densityClasses:s}=Eo(e),{roundedClasses:o}=xr(e);wr({VBreadcrumbsDivider:{divider:Xe(()=>e.divider)},VBreadcrumbsItem:{activeClass:Xe(()=>e.activeClass),activeColor:Xe(()=>e.activeColor),color:Xe(()=>e.color),disabled:Xe(()=>e.disabled)}});const i=ae(()=>e.items.map(c=>typeof c=="string"?{item:{title:c},raw:c}:{item:c,raw:c}));return St(()=>{const c=!!(n.prepend||e.icon);return l(e.tag,{class:ct(["v-breadcrumbs",a.value,s.value,o.value,e.class]),style:Rt([r.value,e.style])},{default:()=>[c&&v("li",{key:"prepend",class:"v-breadcrumbs__prepend"},[n.prepend?l(Ln,{key:"prepend-defaults",disabled:!e.icon,defaults:{VIcon:{icon:e.icon,start:!0}}},n.prepend):l(Ea,{key:"prepend-icon",start:!0,icon:e.icon},null)]),i.value.map((A,d,f)=>{let{item:m,raw:h}=A;return v(We,null,[n.item?.({item:m,index:d})??l(c7,Ue({key:d,disabled:d>=f.length-1},typeof m=="string"?{title:m}:m),{default:n.title?()=>n.title?.({item:m,index:d}):void 0}),d<f.length-1&&l(u7,null,{default:n.divider?()=>n.divider?.({item:h,index:d}):void 0})])}),n.default?.()]})}),{}}}),d7=yt()({name:"VCardActions",props:tn(),setup(e,t){let{slots:n}=t;return wr({VBtn:{slim:!0,variant:"text"}}),St(()=>v("div",{class:ct(["v-card-actions",e.class]),style:Rt(e.style)},[n.default?.()])),{}}}),Yqe=it({opacity:[Number,String],...tn(),...Nn()},"VCardSubtitle"),A7=yt()({name:"VCardSubtitle",props:Yqe(),setup(e,t){let{slots:n}=t;return St(()=>l(e.tag,{class:ct(["v-card-subtitle",e.class]),style:Rt([{"--v-card-subtitle-opacity":e.opacity},e.style])},n)),{}}}),f7=Gc("v-card-title"),Xqe=it({appendAvatar:String,appendIcon:An,prependAvatar:String,prependIcon:An,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...tn(),...ds()},"VCardItem"),m7=yt()({name:"VCardItem",props:Xqe(),setup(e,t){let{slots:n}=t;return St(()=>{const a=!!(e.prependAvatar||e.prependIcon),r=!!(a||n.prepend),s=!!(e.appendAvatar||e.appendIcon),o=!!(s||n.append),i=!!(e.title!=null||n.title),c=!!(e.subtitle!=null||n.subtitle);return v("div",{class:ct(["v-card-item",e.class]),style:Rt(e.style)},[r&&v("div",{key:"prepend",class:"v-card-item__prepend"},[n.prepend?l(Ln,{key:"prepend-defaults",disabled:!a,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon}}},n.prepend):v(We,null,[e.prependAvatar&&l(ul,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&l(Ea,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])]),v("div",{class:"v-card-item__content"},[i&&l(f7,{key:"title"},{default:()=>[n.title?.()??K(e.title)]}),c&&l(A7,{key:"subtitle"},{default:()=>[n.subtitle?.()??K(e.subtitle)]}),n.default?.()]),o&&v("div",{key:"append",class:"v-card-item__append"},[n.append?l(Ln,{key:"append-defaults",disabled:!s,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon}}},n.append):v(We,null,[e.appendIcon&&l(Ea,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&l(ul,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)])])])}),{}}}),Jqe=it({opacity:[Number,String],...tn(),...Nn()},"VCardText"),v7=yt()({name:"VCardText",props:Jqe(),setup(e,t){let{slots:n}=t;return St(()=>l(e.tag,{class:ct(["v-card-text",e.class]),style:Rt([{"--v-card-text-opacity":e.opacity},e.style])},n)),{}}}),Zqe=it({appendAvatar:String,appendIcon:An,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:An,ripple:{type:[Boolean,Object],default:!0},subtitle:{type:[String,Number,Boolean],default:void 0},text:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...zo(),...tn(),...ds(),...Lr(),...es(),...Yw(),...Wc(),...Sh(),...cr(),...Hg(),...Nn(),...la(),...ml({variant:"elevated"})},"VCard"),eYe=yt()({name:"VCard",directives:{vRipple:Co},props:Zqe(),setup(e,t){let{attrs:n,slots:a}=t;const{themeClasses:r}=ka(e),{borderClasses:s}=fi(e),{colorClasses:o,colorStyles:i,variantClasses:c}=em(e),{densityClasses:A}=Eo(e),{dimensionStyles:d}=Mr(e),{elevationClasses:f}=Ss(e),{loaderClasses:m}=Lg(e),{locationStyles:h}=rm(e),{positionClasses:p}=Eh(e),{roundedClasses:y}=xr(e),g=Og(e,n);return St(()=>{const w=e.link!==!1&&g.isLink.value,b=!e.disabled&&e.link!==!1&&(e.link||g.isClickable.value),x=w?"a":e.tag,T=!!(a.title||e.title!=null),F=!!(a.subtitle||e.subtitle!=null),k=T||F,S=!!(a.append||e.appendAvatar||e.appendIcon),E=!!(a.prepend||e.prependAvatar||e.prependIcon),C=!!(a.image||e.image),D=k||E||S,P=!!(a.text||e.text!=null);return ma(l(x,Ue({class:["v-card",{"v-card--disabled":e.disabled,"v-card--flat":e.flat,"v-card--hover":e.hover&&!(e.disabled||e.flat),"v-card--link":b},r.value,s.value,o.value,A.value,f.value,m.value,p.value,y.value,c.value,e.class],style:[i.value,d.value,h.value,e.style],onClick:b&&g.navigate,tabindex:e.disabled?-1:void 0},g.linkProps),{default:()=>[C&&v("div",{key:"image",class:"v-card__image"},[a.image?l(Ln,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},a.image):l(Oc,{key:"image-img",cover:!0,src:e.image},null)]),l(Mg,{name:"v-card",active:!!e.loading,color:typeof e.loading=="boolean"?void 0:e.loading},{default:a.loader}),D&&l(m7,{key:"item",prependAvatar:e.prependAvatar,prependIcon:e.prependIcon,title:e.title,subtitle:e.subtitle,appendAvatar:e.appendAvatar,appendIcon:e.appendIcon},{default:a.item,prepend:a.prepend,title:a.title,subtitle:a.subtitle,append:a.append}),P&&l(v7,{key:"text"},{default:()=>[a.text?.()??e.text]}),a.default?.(),a.actions&&l(d7,null,{default:a.actions}),dA(b,"v-card")]}),[[Co,b&&e.ripple]])}),{}}}),tYe=e=>{const{touchstartX:t,touchendX:n,touchstartY:a,touchendY:r}=e,s=.5,o=16;e.offsetX=n-t,e.offsetY=r-a,Math.abs(e.offsetY)<s*Math.abs(e.offsetX)&&(e.left&&n<t-o&&e.left(e),e.right&&n>t+o&&e.right(e)),Math.abs(e.offsetX)<s*Math.abs(e.offsetY)&&(e.up&&r<a-o&&e.up(e),e.down&&r>a+o&&e.down(e))};function nYe(e,t){const n=e.changedTouches[0];t.touchstartX=n.clientX,t.touchstartY=n.clientY,t.start?.({originalEvent:e,...t})}function aYe(e,t){const n=e.changedTouches[0];t.touchendX=n.clientX,t.touchendY=n.clientY,t.end?.({originalEvent:e,...t}),tYe(t)}function rYe(e,t){const n=e.changedTouches[0];t.touchmoveX=n.clientX,t.touchmoveY=n.clientY,t.move?.({originalEvent:e,...t})}function sYe(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:n=>nYe(n,t),touchend:n=>aYe(n,t),touchmove:n=>rYe(n,t)}}function oYe(e,t){const n=t.value,a=n?.parent?e.parentElement:e,r=n?.options??{passive:!0},s=t.instance?.$.uid;if(!a||s===void 0)return;const o=sYe(t.value);a._touchHandlers=a._touchHandlers??Object.create(null),a._touchHandlers[s]=o,L8(o).forEach(i=>{a.addEventListener(i,o[i],r)})}function iYe(e,t){const n=t.value?.parent?e.parentElement:e,a=t.instance?.$.uid;if(!n?._touchHandlers||a===void 0)return;const r=n._touchHandlers[a];L8(r).forEach(s=>{n.removeEventListener(s,r[s])}),delete n._touchHandlers[a]}const T2={mounted:oYe,unmounted:iYe},h7=Symbol.for("vuetify:v-window"),p7=Symbol.for("vuetify:v-window-group"),tb=it({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||e==="hover"},verticalArrows:[Boolean,String],touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...tn(),...Nn(),...la()},"VWindow"),Tf=yt()({name:"VWindow",directives:{vTouch:T2},props:tb(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:a}=ka(e),{isRtl:r}=Zr(),{t:s}=Qa(),o=AA(e,p7),i=V(),c=ae(()=>r.value?!e.reverse:e.reverse),A=Ht(!1),d=ae(()=>{const T=e.direction==="vertical"?"y":"x",k=(c.value?!A.value:A.value)?"-reverse":"";return`v-window-${T}${k}-transition`}),f=Ht(0),m=V(void 0),h=ae(()=>o.items.value.findIndex(T=>o.selected.value.includes(T.id)));Ke(h,(T,F)=>{const k=o.items.value.length,S=k-1;k<=2?A.value=T<F:T===S&&F===0?A.value=!0:T===0&&F===S?A.value=!1:A.value=T<F}),Ha(h7,{transition:d,isReversed:A,transitionCount:f,transitionHeight:m,rootRef:i});const p=Xe(()=>e.continuous||h.value!==0),y=Xe(()=>e.continuous||h.value!==o.items.value.length-1);function g(){p.value&&o.prev()}function w(){y.value&&o.next()}const b=ae(()=>{const T=[],F={icon:r.value?e.nextIcon:e.prevIcon,class:`v-window__${c.value?"right":"left"}`,onClick:o.prev,"aria-label":s("$vuetify.carousel.prev")};T.push(p.value?n.prev?n.prev({props:F}):l(Jn,F,null):v("div",null,null));const k={icon:r.value?e.prevIcon:e.nextIcon,class:`v-window__${c.value?"left":"right"}`,onClick:o.next,"aria-label":s("$vuetify.carousel.next")};return T.push(y.value?n.next?n.next({props:k}):l(Jn,k,null):v("div",null,null)),T}),x=ae(()=>e.touch===!1?e.touch:{...{left:()=>{c.value?g():w()},right:()=>{c.value?w():g()},start:F=>{let{originalEvent:k}=F;k.stopPropagation()}},...e.touch===!0?{}:e.touch});return St(()=>ma(l(e.tag,{ref:i,class:ct(["v-window",{"v-window--show-arrows-on-hover":e.showArrows==="hover","v-window--vertical-arrows":!!e.verticalArrows},a.value,e.class]),style:Rt(e.style)},{default:()=>[v("div",{class:"v-window__container",style:{height:m.value}},[n.default?.({group:o}),e.showArrows!==!1&&v("div",{class:ct(["v-window__controls",{"v-window__controls--left":e.verticalArrows==="left"||e.verticalArrows===!0},{"v-window__controls--right":e.verticalArrows==="right"}])},[b.value])]),n.additional?.({group:o})]}),[[T2,x.value]])),{group:o}}}),lYe=it({color:String,cycle:Boolean,delimiterIcon:{type:An,default:"$delimiter"},height:{type:[Number,String],default:500},hideDelimiters:Boolean,hideDelimiterBackground:Boolean,interval:{type:[Number,String],default:6e3,validator:e=>Number(e)>0},progress:[Boolean,String],verticalDelimiters:[Boolean,String],...tb({continuous:!0,mandatory:"force",showArrows:!0})},"VCarousel"),uYe=yt()({name:"VCarousel",props:lYe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=ln(e,"modelValue"),{t:r}=Qa(),s=V();let o=-1;Ke(a,c),Ke(()=>e.interval,c),Ke(()=>e.cycle,A=>{A?c():window.clearTimeout(o)}),un(i);function i(){!e.cycle||!s.value||(o=window.setTimeout(s.value.group.next,Number(e.interval)>0?Number(e.interval):6e3))}function c(){window.clearTimeout(o),window.requestAnimationFrame(i)}return St(()=>{const A=Tf.filterProps(e);return l(Tf,Ue({ref:s},A,{modelValue:a.value,"onUpdate:modelValue":d=>a.value=d,class:["v-carousel",{"v-carousel--hide-delimiter-background":e.hideDelimiterBackground,"v-carousel--vertical-delimiters":e.verticalDelimiters},e.class],style:[{height:Yt(e.height)},e.style]}),{default:n.default,additional:d=>{let{group:f}=d;return v(We,null,[!e.hideDelimiters&&v("div",{class:"v-carousel__controls",style:{left:e.verticalDelimiters==="left"&&e.verticalDelimiters?0:"auto",right:e.verticalDelimiters==="right"?0:"auto"}},[f.items.value.length>0&&l(Ln,{defaults:{VBtn:{color:e.color,icon:e.delimiterIcon,size:"x-small",variant:"text"}},scoped:!0},{default:()=>[f.items.value.map((m,h)=>{const p={id:`carousel-item-${m.id}`,"aria-label":r("$vuetify.carousel.ariaLabel.delimiter",h+1,f.items.value.length),class:["v-carousel__controls__item",f.isSelected(m.id)&&"v-btn--active"],onClick:()=>f.select(m.id,!0)};return n.item?n.item({props:p,item:m}):l(Jn,Ue(m,p),null)})]})]),e.progress&&l(qw,{absolute:!0,class:"v-carousel__progress",color:typeof e.progress=="string"?e.progress:void 0,modelValue:(f.getItemIndex(a.value)+1)/f.items.value.length*100},null)])},prev:n.prev,next:n.next})}),{}}}),nb=it({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...tn(),...nm(),...y4()},"VWindowItem"),If=yt()({name:"VWindowItem",directives:{vTouch:T2},props:nb(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const a=Tn(h7),r=am(e,p7),{isBooted:s}=Zf();if(!a||!r)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const o=Ht(!1),i=ae(()=>s.value&&(a.isReversed.value?e.reverseTransition!==!1:e.transition!==!1));function c(){!o.value||!a||(o.value=!1,a.transitionCount.value>0&&(a.transitionCount.value-=1,a.transitionCount.value===0&&(a.transitionHeight.value=void 0)))}function A(){o.value||!a||(o.value=!0,a.transitionCount.value===0&&(a.transitionHeight.value=Yt(a.rootRef.value?.clientHeight)),a.transitionCount.value+=1)}function d(){c()}function f(p){o.value&&xn(()=>{!i.value||!o.value||!a||(a.transitionHeight.value=Yt(p.clientHeight))})}const m=ae(()=>{const p=a.isReversed.value?e.reverseTransition:e.transition;return i.value?{name:typeof p!="string"?a.transition.value:p,onBeforeEnter:A,onAfterEnter:c,onEnterCancelled:d,onBeforeLeave:A,onAfterLeave:c,onLeaveCancelled:d,onEnter:f}:!1}),{hasContent:h}=_4(e,r.isSelected);return St(()=>l(po,{transition:m.value,disabled:!s.value},{default:()=>[ma(v("div",{class:ct(["v-window-item",r.selectedClass.value,e.class]),style:Rt(e.style)},[h.value&&n.default?.()]),[[ci,r.isSelected.value]])]})),{groupItem:r}}}),cYe=it({...aQ(),...nb()},"VCarouselItem"),dYe=yt()({name:"VCarouselItem",inheritAttrs:!1,props:cYe(),setup(e,t){let{slots:n,attrs:a}=t;St(()=>{const r=Oc.filterProps(e),s=If.filterProps(e);return l(If,Ue({class:["v-carousel-item",e.class]},s),{default:()=>[l(Oc,Ue(a,r),n)]})})}}),AYe=Gc("v-code","code"),fYe=it({color:{type:Object},disabled:Boolean,dotSize:{type:[Number,String],default:10},height:{type:[Number,String],default:150},width:{type:[Number,String],default:300},...tn()},"VColorPickerCanvas"),mYe=Ri({name:"VColorPickerCanvas",props:fYe(),emits:{"update:color":e=>!0,"update:position":e=>!0},setup(e,t){let{emit:n}=t;const a=Ht(!1),r=V(),s=Ht(parseFloat(e.width)),o=Ht(parseFloat(e.height)),i=V({x:0,y:0}),c=ae({get:()=>i.value,set(g){if(!r.value)return;const{x:w,y:b}=g;i.value=g,n("update:color",{h:e.color?.h??0,s:tr(w,0,s.value)/s.value,v:1-tr(b,0,o.value)/o.value,a:e.color?.a??1})}}),A=ae(()=>{const{x:g,y:w}=c.value,b=parseInt(e.dotSize,10)/2;return{width:Yt(e.dotSize),height:Yt(e.dotSize),transform:`translate(${Yt(g-b)}, ${Yt(w-b)})`}}),{resizeRef:d}=Kl(g=>{if(!d.el?.offsetParent)return;const{width:w,height:b}=g[0].contentRect;s.value=w,o.value=b});function f(g,w,b){const{left:x,top:T,width:F,height:k}=b;c.value={x:tr(g-x,0,F),y:tr(w-T,0,k)}}function m(g){g.type==="mousedown"&&g.preventDefault(),!e.disabled&&(h(g),window.addEventListener("mousemove",h),window.addEventListener("mouseup",p),window.addEventListener("touchmove",h),window.addEventListener("touchend",p))}function h(g){if(e.disabled||!r.value)return;a.value=!0;const w=lte(g);f(w.clientX,w.clientY,r.value.getBoundingClientRect())}function p(){window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",p),window.removeEventListener("touchmove",h),window.removeEventListener("touchend",p)}function y(){if(!r.value)return;const g=r.value,w=g.getContext("2d");if(!w)return;const b=w.createLinearGradient(0,0,g.width,0);b.addColorStop(0,"hsla(0, 0%, 100%, 1)"),b.addColorStop(1,`hsla(${e.color?.h??0}, 100%, 50%, 1)`),w.fillStyle=b,w.fillRect(0,0,g.width,g.height);const x=w.createLinearGradient(0,0,0,g.height);x.addColorStop(0,"hsla(0, 0%, 0%, 0)"),x.addColorStop(1,"hsla(0, 0%, 0%, 1)"),w.fillStyle=x,w.fillRect(0,0,g.width,g.height)}return Ke(()=>e.color?.h,y,{immediate:!0}),Ke(()=>[s.value,o.value],(g,w)=>{y(),i.value={x:c.value.x*g[0]/w[0],y:c.value.y*g[1]/w[1]}},{flush:"post"}),Ke(()=>e.color,()=>{if(a.value){a.value=!1;return}i.value=e.color?{x:e.color.s*s.value,y:(1-e.color.v)*o.value}:{x:0,y:0}},{deep:!0,immediate:!0}),un(()=>y()),St(()=>v("div",{ref:d,class:ct(["v-color-picker-canvas",e.class]),style:Rt(e.style),onMousedown:m,onTouchstartPassive:m},[v("canvas",{ref:r,width:s.value,height:o.value},null),e.color&&v("div",{class:ct(["v-color-picker-canvas__dot",{"v-color-picker-canvas__dot--disabled":e.disabled}]),style:Rt(A.value)},null)])),{}}});function vYe(e,t){if(t){const{a:n,...a}=e;return a}return e}function hYe(e,t){if(t==null||typeof t=="string"){const n=e.a!==1;if(t?.startsWith("rgb(")){const{r,g:s,b:o,a:i}=Ru(e);return`rgb(${r} ${s} ${o}`+(n?` / ${i})`:")")}else if(t?.startsWith("hsl(")){const{h:r,s,l:o,a:i}=BS(e);return`hsl(${r} ${Math.round(s*100)} ${Math.round(o*100)}`+(n?` / ${i})`:")")}const a=n6(e);return e.a===1?a.slice(0,7):a}if(typeof t=="object"){let n;return zA(t,["r","g","b"])?n=Ru(e):zA(t,["h","s","l"])?n=BS(e):zA(t,["h","s","v"])&&(n=e),vYe(n,!zA(t,["a"])&&e.a===1)}return e}const rv={h:0,s:0,v:0,a:1},lB={inputProps:{type:"number",min:0},inputs:[{label:"R",max:255,step:1,getValue:e=>Math.round(e.r),getColor:(e,t)=>({...e,r:Number(t)}),localeKey:"redInput"},{label:"G",max:255,step:1,getValue:e=>Math.round(e.g),getColor:(e,t)=>({...e,g:Number(t)}),localeKey:"greenInput"},{label:"B",max:255,step:1,getValue:e=>Math.round(e.b),getColor:(e,t)=>({...e,b:Number(t)}),localeKey:"blueInput"},{label:"A",max:1,step:.01,getValue:e=>{let{a:t}=e;return t!=null?Math.round(t*100)/100:1},getColor:(e,t)=>({...e,a:Number(t)}),localeKey:"alphaInput"}],to:Ru,from:fg},pYe={...lB,inputs:lB.inputs?.slice(0,3)},uB={inputProps:{type:"number",min:0},inputs:[{label:"H",max:360,step:1,getValue:e=>Math.round(e.h),getColor:(e,t)=>({...e,h:Number(t)}),localeKey:"hueInput"},{label:"S",max:1,step:.01,getValue:e=>Math.round(e.s*100)/100,getColor:(e,t)=>({...e,s:Number(t)}),localeKey:"saturationInput"},{label:"L",max:1,step:.01,getValue:e=>Math.round(e.l*100)/100,getColor:(e,t)=>({...e,l:Number(t)}),localeKey:"lightnessInput"},{label:"A",max:1,step:.01,getValue:e=>{let{a:t}=e;return t!=null?Math.round(t*100)/100:1},getColor:(e,t)=>({...e,a:Number(t)}),localeKey:"alphaInput"}],to:BS,from:hk},gYe={...uB,inputs:uB.inputs.slice(0,3)},g7={inputProps:{type:"text"},inputs:[{label:"HEXA",getValue:e=>e,getColor:(e,t)=>t,localeKey:"hexaInput"}],to:n6,from:Dte},yYe={...g7,inputs:[{label:"HEX",getValue:e=>e.slice(0,7),getColor:(e,t)=>t,localeKey:"hexInput"}]},Af={rgb:pYe,rgba:lB,hsl:gYe,hsla:uB,hex:yYe,hexa:g7},_Ye=e=>{let{label:t,...n}=e;return v("div",{class:"v-color-picker-edit__input"},[v("input",eu(nu(n)),null),v("span",null,[t])])},wYe=it({color:Object,disabled:Boolean,mode:{type:String,default:"rgba",validator:e=>Object.keys(Af).includes(e)},modes:{type:Array,default:()=>Object.keys(Af),validator:e=>Array.isArray(e)&&e.every(t=>Object.keys(Af).includes(t))},...tn()},"VColorPickerEdit"),bYe=Ri({name:"VColorPickerEdit",props:wYe(),emits:{"update:color":e=>!0,"update:mode":e=>!0},setup(e,t){let{emit:n}=t;const{t:a}=Qa(),r=ae(()=>e.modes.map(o=>({...Af[o],name:o}))),s=ae(()=>{const o=r.value.find(c=>c.name===e.mode);if(!o)return[];const i=e.color?o.to(e.color):null;return o.inputs?.map(c=>{let{getValue:A,getColor:d,localeKey:f,...m}=c;return{...o.inputProps,...m,ariaLabel:a(`$vuetify.colorPicker.ariaLabel.${f}`),disabled:e.disabled,value:i&&A(i),onChange:h=>{const p=h.target;p&&n("update:color",o.from(d(i??o.to(rv),p.value)))}}})});return St(()=>v("div",{class:ct(["v-color-picker-edit",e.class]),style:Rt(e.style)},[s.value?.map(o=>l(_Ye,o,null)),r.value.length>1&&l(Jn,{icon:"$unfold",size:"x-small",variant:"plain","aria-label":a("$vuetify.colorPicker.ariaLabel.changeFormat"),onClick:()=>{const o=r.value.findIndex(i=>i.name===e.mode);n("update:mode",r.value[(o+1)%r.value.length].name)}},null)])),{}}}),C4=Symbol.for("vuetify:v-slider");function cB(e,t,n){const a=n==="vertical",r=t.getBoundingClientRect(),s="touches"in e?e.touches[0]:e;return a?s.clientY-(r.top+r.height/2):s.clientX-(r.left+r.width/2)}function xYe(e,t){return"touches"in e&&e.touches.length?e.touches[0][t]:"changedTouches"in e&&e.changedTouches.length?e.changedTouches[0][t]:e[t]}const y7=it({disabled:{type:Boolean,default:null},error:Boolean,readonly:{type:Boolean,default:null},max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:e=>typeof e=="boolean"||e==="always"},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:e=>typeof e=="boolean"||e==="always"},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:e=>["vertical","horizontal"].includes(e)},reverse:Boolean,noKeyboard:Boolean,...cr(),...es({elevation:2}),ripple:{type:Boolean,default:!0}},"Slider"),_7=e=>{const t=ae(()=>parseFloat(e.min)),n=ae(()=>parseFloat(e.max)),a=ae(()=>Number(e.step)>0?parseFloat(e.step):0),r=ae(()=>Math.max(qP(a.value),qP(t.value)));function s(o){if(o=parseFloat(o),a.value<=0)return o;const i=tr(o,t.value,n.value),c=t.value%a.value;let A=Math.round((i-c)/a.value)*a.value+c;return i>A&&A+a.value>n.value&&(A=n.value),parseFloat(Math.min(A,n.value).toFixed(r.value))}return{min:t,max:n,step:a,decimals:r,roundValue:s}},w7=e=>{let{props:t,steps:n,onSliderStart:a,onSliderMove:r,onSliderEnd:s,getActiveThumb:o}=e;const{isRtl:i}=Zr(),c=Xe(()=>t.reverse),A=ae(()=>t.direction==="vertical"),d=ae(()=>A.value!==c.value),{min:f,max:m,step:h,decimals:p,roundValue:y}=n,g=ae(()=>parseInt(t.thumbSize,10)),w=ae(()=>parseInt(t.tickSize,10)),b=ae(()=>parseInt(t.trackSize,10)),x=ae(()=>(m.value-f.value)/h.value),T=Xe(()=>t.disabled),F=ae(()=>t.error||t.disabled?void 0:t.thumbColor??t.color),k=ae(()=>t.error||t.disabled?void 0:t.thumbColor),S=ae(()=>t.error||t.disabled?void 0:t.trackColor??t.color),E=ae(()=>t.error||t.disabled?void 0:t.trackFillColor??t.color),C=Ht(!1),D=Ht(0),P=V(),O=V();function H(z){const X=P.value?.$el;if(!X)return;const le=t.direction==="vertical",re=le?"top":"left",de=le?"height":"width",G=le?"clientY":"clientX",{[re]:Z,[de]:ce}=X.getBoundingClientRect(),Se=xYe(z,G);let Pe=tr((Se-Z-D.value)/ce)||0;return(le?d.value:d.value!==i.value)&&(Pe=1-Pe),y(f.value+Pe*(m.value-f.value))}const ie=z=>{const X=H(z);X!=null&&s({value:X}),C.value=!1,D.value=0},Ae=z=>{const X=H(z);O.value=o(z),O.value&&(C.value=!0,O.value.contains(z.target)?D.value=cB(z,O.value,t.direction):(D.value=0,X!=null&&r({value:X})),X!=null&&a({value:X}),xn(()=>O.value?.focus()))},j={passive:!0,capture:!0};function J(z){const X=H(z);X!=null&&r({value:X})}function ue(z){z.stopPropagation(),z.preventDefault(),ie(z),window.removeEventListener("mousemove",J,j),window.removeEventListener("mouseup",ue)}function ne(z){ie(z),window.removeEventListener("touchmove",J,j),z.target?.removeEventListener("touchend",ne)}function Y(z){Ae(z),window.addEventListener("touchmove",J,j),z.target?.addEventListener("touchend",ne,{passive:!1})}function te(z){z.button===0&&(z.preventDefault(),Ae(z),window.addEventListener("mousemove",J,j),window.addEventListener("mouseup",ue,{passive:!1}))}const L=z=>{const X=(z-f.value)/(m.value-f.value)*100;return tr(isNaN(X)?0:X,0,100)},N=Xe(()=>t.showTicks),q=ae(()=>N.value?t.ticks?Array.isArray(t.ticks)?t.ticks.map(z=>({value:z,position:L(z),label:z.toString()})):Object.keys(t.ticks).map(z=>({value:parseFloat(z),position:L(parseFloat(z)),label:t.ticks[z]})):x.value!==1/0?Bi(x.value+1).map(z=>{const X=f.value+z*h.value;return{value:X,position:L(X)}}):[]:[]),Q=ae(()=>q.value.some(z=>{let{label:X}=z;return!!X})),ee={activeThumbRef:O,color:Xe(()=>t.color),decimals:p,disabled:T,direction:Xe(()=>t.direction),elevation:Xe(()=>t.elevation),hasLabels:Q,isReversed:c,indexFromEnd:d,min:f,max:m,mousePressed:C,noKeyboard:Xe(()=>t.noKeyboard),numTicks:x,onSliderMousedown:te,onSliderTouchstart:Y,parsedTicks:q,parseMouseMove:H,position:L,readonly:Xe(()=>t.readonly),rounded:Xe(()=>t.rounded),roundValue:y,showTicks:N,startOffset:D,step:h,thumbSize:g,thumbColor:F,thumbLabelColor:k,thumbLabel:Xe(()=>t.thumbLabel),ticks:Xe(()=>t.ticks),tickSize:w,trackColor:S,trackContainerRef:P,trackFillColor:E,trackSize:b,vertical:A};return Ha(C4,ee),ee},CYe=it({focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0},ripple:{type:[Boolean,Object],default:!0},name:String,noKeyboard:Boolean,...tn()},"VSliderThumb"),dB=yt()({name:"VSliderThumb",directives:{vRipple:Co},props:CYe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n,emit:a}=t;const r=Tn(C4),{isRtl:s,rtlClasses:o}=Zr();if(!r)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{min:i,max:c,thumbColor:A,thumbLabelColor:d,step:f,disabled:m,thumbSize:h,thumbLabel:p,direction:y,isReversed:g,vertical:w,readonly:b,elevation:x,mousePressed:T,decimals:F,indexFromEnd:k}=r,S=ae(()=>m.value?void 0:x.value),{elevationClasses:E}=Ss(S),{textColorClasses:C,textColorStyles:D}=Ls(A),{backgroundColorClasses:P,backgroundColorStyles:O}=Fa(d),{pageup:H,pagedown:ie,end:Ae,home:j,left:J,right:ue,down:ne,up:Y}=wS,te=[H,ie,Ae,j,J,ue,ne,Y],L=ae(()=>f.value?[1,2,3]:[1,5,10]);function N(Q,ee){if(e.noKeyboard||!te.includes(Q.key))return;Q.preventDefault();const z=f.value||.1,X=(c.value-i.value)/z;if([J,ue,ne,Y].includes(Q.key)){const re=(w.value?[s.value?J:ue,g.value?ne:Y]:k.value!==s.value?[J,Y]:[ue,Y]).includes(Q.key)?1:-1,de=Q.shiftKey?2:Q.ctrlKey?1:0;re===-1&&ee===c.value&&!de&&!Number.isInteger(X)?ee=ee-X%1*z:ee=ee+re*z*L.value[de]}else if(Q.key===j)ee=i.value;else if(Q.key===Ae)ee=c.value;else{const le=Q.key===ie?1:-1;ee=ee-le*z*(X>100?X/10:10)}return Math.max(e.min,Math.min(e.max,ee))}function q(Q){const ee=N(Q,e.modelValue);ee!=null&&a("update:modelValue",ee)}return St(()=>{const Q=Yt(k.value?100-e.position:e.position,"%");return v("div",{class:ct(["v-slider-thumb",{"v-slider-thumb--focused":e.focused,"v-slider-thumb--pressed":e.focused&&T.value},e.class,o.value]),style:Rt([{"--v-slider-thumb-position":Q,"--v-slider-thumb-size":Yt(h.value)},e.style]),role:"slider",tabindex:m.value?-1:0,"aria-label":e.name,"aria-valuemin":i.value,"aria-valuemax":c.value,"aria-valuenow":e.modelValue,"aria-readonly":!!b.value,"aria-orientation":y.value,onKeydown:b.value?void 0:q},[v("div",{class:ct(["v-slider-thumb__surface",C.value,E.value]),style:Rt(D.value)},null),ma(v("div",{class:ct(["v-slider-thumb__ripple",C.value]),style:Rt(D.value)},null),[[Co,e.ripple,null,{circle:!0,center:!0}]]),l(o4,{origin:"bottom center"},{default:()=>[ma(v("div",{class:"v-slider-thumb__label-container"},[v("div",{class:ct(["v-slider-thumb__label",P.value]),style:Rt(O.value)},[v("div",null,[n["thumb-label"]?.({modelValue:e.modelValue})??e.modelValue.toFixed(f.value?F.value:1)]),v("div",{class:"v-slider-thumb__label-wedge"},null)])]),[[ci,p.value&&e.focused||p.value==="always"]])]})])}),{}}}),SYe=it({start:{type:Number,required:!0},stop:{type:Number,required:!0},...tn()},"VSliderTrack"),b7=yt()({name:"VSliderTrack",props:SYe(),emits:{},setup(e,t){let{slots:n}=t;const a=Tn(C4);if(!a)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{color:r,parsedTicks:s,rounded:o,showTicks:i,tickSize:c,trackColor:A,trackFillColor:d,trackSize:f,vertical:m,min:h,max:p,indexFromEnd:y}=a,{roundedClasses:g}=xr(o),{backgroundColorClasses:w,backgroundColorStyles:b}=Fa(d),{backgroundColorClasses:x,backgroundColorStyles:T}=Fa(A),F=ae(()=>`inset-${m.value?"block":"inline"}-${y.value?"end":"start"}`),k=ae(()=>m.value?"height":"width"),S=ae(()=>({[F.value]:"0%",[k.value]:"100%"})),E=ae(()=>e.stop-e.start),C=ae(()=>({[F.value]:Yt(e.start,"%"),[k.value]:Yt(E.value,"%")})),D=ae(()=>i.value?(m.value?s.value.slice().reverse():s.value).map((O,H)=>{const ie=O.value!==h.value&&O.value!==p.value?Yt(O.position,"%"):void 0;return v("div",{key:O.value,class:ct(["v-slider-track__tick",{"v-slider-track__tick--filled":O.position>=e.start&&O.position<=e.stop,"v-slider-track__tick--first":O.value===h.value,"v-slider-track__tick--last":O.value===p.value}]),style:{[F.value]:ie}},[(O.label||n["tick-label"])&&v("div",{class:"v-slider-track__tick-label"},[n["tick-label"]?.({tick:O,index:H})??O.label])])}):[]);return St(()=>v("div",{class:ct(["v-slider-track",g.value,e.class]),style:Rt([{"--v-slider-track-size":Yt(f.value),"--v-slider-tick-size":Yt(c.value)},e.style])},[v("div",{class:ct(["v-slider-track__background",x.value,{"v-slider-track__background--opacity":!!r.value||!d.value}]),style:{...S.value,...T.value}},null),v("div",{class:ct(["v-slider-track__fill",w.value]),style:{...C.value,...b.value}},null),i.value&&v("div",{class:ct(["v-slider-track__ticks",{"v-slider-track__ticks--always-show":i.value==="always"}])},[D.value])])),{}}}),EYe=it({...$g(),...y7(),...qc(),modelValue:{type:[Number,String],default:0}},"VSlider"),AB=yt()({name:"VSlider",props:EYe(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,start:e=>!0,end:e=>!0},setup(e,t){let{slots:n,emit:a}=t;const r=V(),s=V(),{rtlClasses:o}=Zr(),i=_7(e),c=ln(e,"modelValue",void 0,E=>i.roundValue(E??i.min.value)),{min:A,max:d,mousePressed:f,roundValue:m,onSliderMousedown:h,onSliderTouchstart:p,trackContainerRef:y,position:g,hasLabels:w,readonly:b,noKeyboard:x}=w7({props:e,steps:i,onSliderStart:()=>{a("start",c.value)},onSliderEnd:E=>{let{value:C}=E;const D=m(C);c.value=D,a("end",D)},onSliderMove:E=>{let{value:C}=E;return c.value=m(C)},getActiveThumb:()=>r.value?.$el}),{isFocused:T,focus:F,blur:k}=jc(e),S=ae(()=>g(c.value));return St(()=>{const E=Zs.filterProps(e),C=!!(e.label||n.label||n.prepend);return l(Zs,Ue({ref:s,class:["v-slider",{"v-slider--has-labels":!!n["tick-label"]||w.value,"v-slider--focused":T.value,"v-slider--pressed":f.value,"v-slider--disabled":e.disabled},o.value,e.class],style:e.style},E,{focused:T.value}),{...n,prepend:C?D=>v(We,null,[n.label?.(D)??(e.label?l(Bh,{id:D.id.value,class:"v-slider__label",text:e.label},null):void 0),n.prepend?.(D)]):void 0,default:D=>{let{id:P,messagesId:O}=D;return v("div",{class:"v-slider__container",onMousedown:b.value?void 0:h,onTouchstartPassive:b.value?void 0:p},[v("input",{id:P.value,name:e.name||P.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:c.value},null),l(b7,{ref:y,start:0,stop:S.value},{"tick-label":n["tick-label"]}),l(dB,{ref:r,"aria-describedby":O.value,focused:T.value,noKeyboard:x.value,min:A.value,max:d.value,modelValue:c.value,"onUpdate:modelValue":H=>c.value=H,position:S.value,elevation:e.elevation,onFocus:F,onBlur:k,ripple:e.ripple,name:e.name},{"thumb-label":n["thumb-label"]})])}})}),Es({focus:()=>r.value?.$el.focus()},s)}}),BYe=it({color:{type:Object},disabled:Boolean,hideAlpha:Boolean,...tn()},"VColorPickerPreview"),kYe=Ri({name:"VColorPickerPreview",props:BYe(),emits:{"update:color":e=>!0},setup(e,t){let{emit:n}=t;const{t:a}=Qa(),r=new AbortController;Ui(()=>r.abort());async function s(){if(!zP||e.disabled)return;const o=new window.EyeDropper;try{const i=await o.open({signal:r.signal}),c=fg(ki(i.sRGBHex));n("update:color",{...e.color??rv,...c})}catch{}}return St(()=>v("div",{class:ct(["v-color-picker-preview",{"v-color-picker-preview--hide-alpha":e.hideAlpha},e.class]),style:Rt(e.style)},[zP&&v("div",{class:"v-color-picker-preview__eye-dropper",key:"eyeDropper"},[l(Jn,{"aria-label":a("$vuetify.colorPicker.ariaLabel.eyedropper"),density:"comfortable",disabled:e.disabled,icon:"$eyeDropper",variant:"plain",onClick:s},null)]),v("div",{class:"v-color-picker-preview__dot"},[v("div",{style:{background:Z8(e.color??rv)}},null)]),v("div",{class:"v-color-picker-preview__sliders"},[l(AB,{class:"v-color-picker-preview__track v-color-picker-preview__hue",name:a("$vuetify.colorPicker.ariaLabel.hueSlider"),modelValue:e.color?.h,"onUpdate:modelValue":o=>n("update:color",{...e.color??rv,h:o}),step:0,min:0,max:360,disabled:e.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null),!e.hideAlpha&&l(AB,{class:"v-color-picker-preview__track v-color-picker-preview__alpha",name:a("$vuetify.colorPicker.ariaLabel.alphaSlider"),modelValue:e.color?.a??1,"onUpdate:modelValue":o=>n("update:color",{...e.color??rv,a:o}),step:1/256,min:0,max:1,disabled:e.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null)])])),{}}}),TYe={base:"#f44336",lighten5:"#ffebee",lighten4:"#ffcdd2",lighten3:"#ef9a9a",lighten2:"#e57373",lighten1:"#ef5350",darken1:"#e53935",darken2:"#d32f2f",darken3:"#c62828",darken4:"#b71c1c",accent1:"#ff8a80",accent2:"#ff5252",accent3:"#ff1744",accent4:"#d50000"},IYe={base:"#e91e63",lighten5:"#fce4ec",lighten4:"#f8bbd0",lighten3:"#f48fb1",lighten2:"#f06292",lighten1:"#ec407a",darken1:"#d81b60",darken2:"#c2185b",darken3:"#ad1457",darken4:"#880e4f",accent1:"#ff80ab",accent2:"#ff4081",accent3:"#f50057",accent4:"#c51162"},FYe={base:"#9c27b0",lighten5:"#f3e5f5",lighten4:"#e1bee7",lighten3:"#ce93d8",lighten2:"#ba68c8",lighten1:"#ab47bc",darken1:"#8e24aa",darken2:"#7b1fa2",darken3:"#6a1b9a",darken4:"#4a148c",accent1:"#ea80fc",accent2:"#e040fb",accent3:"#d500f9",accent4:"#aa00ff"},PYe={base:"#673ab7",lighten5:"#ede7f6",lighten4:"#d1c4e9",lighten3:"#b39ddb",lighten2:"#9575cd",lighten1:"#7e57c2",darken1:"#5e35b1",darken2:"#512da8",darken3:"#4527a0",darken4:"#311b92",accent1:"#b388ff",accent2:"#7c4dff",accent3:"#651fff",accent4:"#6200ea"},DYe={base:"#3f51b5",lighten5:"#e8eaf6",lighten4:"#c5cae9",lighten3:"#9fa8da",lighten2:"#7986cb",lighten1:"#5c6bc0",darken1:"#3949ab",darken2:"#303f9f",darken3:"#283593",darken4:"#1a237e",accent1:"#8c9eff",accent2:"#536dfe",accent3:"#3d5afe",accent4:"#304ffe"},UYe={base:"#2196f3",lighten5:"#e3f2fd",lighten4:"#bbdefb",lighten3:"#90caf9",lighten2:"#64b5f6",lighten1:"#42a5f5",darken1:"#1e88e5",darken2:"#1976d2",darken3:"#1565c0",darken4:"#0d47a1",accent1:"#82b1ff",accent2:"#448aff",accent3:"#2979ff",accent4:"#2962ff"},RYe={base:"#03a9f4",lighten5:"#e1f5fe",lighten4:"#b3e5fc",lighten3:"#81d4fa",lighten2:"#4fc3f7",lighten1:"#29b6f6",darken1:"#039be5",darken2:"#0288d1",darken3:"#0277bd",darken4:"#01579b",accent1:"#80d8ff",accent2:"#40c4ff",accent3:"#00b0ff",accent4:"#0091ea"},NYe={base:"#00bcd4",lighten5:"#e0f7fa",lighten4:"#b2ebf2",lighten3:"#80deea",lighten2:"#4dd0e1",lighten1:"#26c6da",darken1:"#00acc1",darken2:"#0097a7",darken3:"#00838f",darken4:"#006064",accent1:"#84ffff",accent2:"#18ffff",accent3:"#00e5ff",accent4:"#00b8d4"},VYe={base:"#009688",lighten5:"#e0f2f1",lighten4:"#b2dfdb",lighten3:"#80cbc4",lighten2:"#4db6ac",lighten1:"#26a69a",darken1:"#00897b",darken2:"#00796b",darken3:"#00695c",darken4:"#004d40",accent1:"#a7ffeb",accent2:"#64ffda",accent3:"#1de9b6",accent4:"#00bfa5"},LYe={base:"#4caf50",lighten5:"#e8f5e9",lighten4:"#c8e6c9",lighten3:"#a5d6a7",lighten2:"#81c784",lighten1:"#66bb6a",darken1:"#43a047",darken2:"#388e3c",darken3:"#2e7d32",darken4:"#1b5e20",accent1:"#b9f6ca",accent2:"#69f0ae",accent3:"#00e676",accent4:"#00c853"},MYe={base:"#8bc34a",lighten5:"#f1f8e9",lighten4:"#dcedc8",lighten3:"#c5e1a5",lighten2:"#aed581",lighten1:"#9ccc65",darken1:"#7cb342",darken2:"#689f38",darken3:"#558b2f",darken4:"#33691e",accent1:"#ccff90",accent2:"#b2ff59",accent3:"#76ff03",accent4:"#64dd17"},OYe={base:"#cddc39",lighten5:"#f9fbe7",lighten4:"#f0f4c3",lighten3:"#e6ee9c",lighten2:"#dce775",lighten1:"#d4e157",darken1:"#c0ca33",darken2:"#afb42b",darken3:"#9e9d24",darken4:"#827717",accent1:"#f4ff81",accent2:"#eeff41",accent3:"#c6ff00",accent4:"#aeea00"},HYe={base:"#ffeb3b",lighten5:"#fffde7",lighten4:"#fff9c4",lighten3:"#fff59d",lighten2:"#fff176",lighten1:"#ffee58",darken1:"#fdd835",darken2:"#fbc02d",darken3:"#f9a825",darken4:"#f57f17",accent1:"#ffff8d",accent2:"#ffff00",accent3:"#ffea00",accent4:"#ffd600"},$Ye={base:"#ffc107",lighten5:"#fff8e1",lighten4:"#ffecb3",lighten3:"#ffe082",lighten2:"#ffd54f",lighten1:"#ffca28",darken1:"#ffb300",darken2:"#ffa000",darken3:"#ff8f00",darken4:"#ff6f00",accent1:"#ffe57f",accent2:"#ffd740",accent3:"#ffc400",accent4:"#ffab00"},QYe={base:"#ff9800",lighten5:"#fff3e0",lighten4:"#ffe0b2",lighten3:"#ffcc80",lighten2:"#ffb74d",lighten1:"#ffa726",darken1:"#fb8c00",darken2:"#f57c00",darken3:"#ef6c00",darken4:"#e65100",accent1:"#ffd180",accent2:"#ffab40",accent3:"#ff9100",accent4:"#ff6d00"},GYe={base:"#ff5722",lighten5:"#fbe9e7",lighten4:"#ffccbc",lighten3:"#ffab91",lighten2:"#ff8a65",lighten1:"#ff7043",darken1:"#f4511e",darken2:"#e64a19",darken3:"#d84315",darken4:"#bf360c",accent1:"#ff9e80",accent2:"#ff6e40",accent3:"#ff3d00",accent4:"#dd2c00"},zYe={base:"#795548",lighten5:"#efebe9",lighten4:"#d7ccc8",lighten3:"#bcaaa4",lighten2:"#a1887f",lighten1:"#8d6e63",darken1:"#6d4c41",darken2:"#5d4037",darken3:"#4e342e",darken4:"#3e2723"},KYe={base:"#607d8b",lighten5:"#eceff1",lighten4:"#cfd8dc",lighten3:"#b0bec5",lighten2:"#90a4ae",lighten1:"#78909c",darken1:"#546e7a",darken2:"#455a64",darken3:"#37474f",darken4:"#263238"},WYe={base:"#9e9e9e",lighten5:"#fafafa",lighten4:"#f5f5f5",lighten3:"#eeeeee",lighten2:"#e0e0e0",lighten1:"#bdbdbd",darken1:"#757575",darken2:"#616161",darken3:"#424242",darken4:"#212121"},jYe={black:"#000000",white:"#ffffff",transparent:"#ffffff00"},qYe={red:TYe,pink:IYe,purple:FYe,deepPurple:PYe,indigo:DYe,blue:UYe,lightBlue:RYe,cyan:NYe,teal:VYe,green:LYe,lightGreen:MYe,lime:OYe,yellow:HYe,amber:$Ye,orange:QYe,deepOrange:GYe,brown:zYe,blueGrey:KYe,grey:WYe,shades:jYe},YYe=it({swatches:{type:Array,default:()=>XYe(qYe)},disabled:Boolean,color:Object,maxHeight:[Number,String],...tn()},"VColorPickerSwatches");function XYe(e){return Object.keys(e).map(t=>{const n=e[t];return n.base?[n.base,n.darken4,n.darken3,n.darken2,n.darken1,n.lighten1,n.lighten2,n.lighten3,n.lighten4,n.lighten5]:[n.black,n.white,n.transparent]})}const JYe=Ri({name:"VColorPickerSwatches",props:YYe(),emits:{"update:color":e=>!0},setup(e,t){let{emit:n}=t;return St(()=>v("div",{class:ct(["v-color-picker-swatches",e.class]),style:Rt([{maxHeight:Yt(e.maxHeight)},e.style])},[v("div",null,[e.swatches.map(a=>v("div",{class:"v-color-picker-swatches__swatch"},[a.map(r=>{const s=ki(r),o=fg(s),i=J8(s);return v("div",{class:"v-color-picker-swatches__color",onClick:()=>o&&n("update:color",o)},[v("div",{style:{background:i}},[e.color&&bs(e.color,o)?l(Ea,{size:"x-small",icon:"$success",color:Vte(r,"#FFFFFF")>2?"white":"black"},null):void 0])])})]))])])),{}}}),ZYe=Gc("v-picker-title"),S4=it({color:String,...zo(),...tn(),...Lr(),...es(),...Wc(),...Sh(),...cr(),...Nn(),...la()},"VSheet"),ag=yt()({name:"VSheet",props:S4(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=ka(e),{backgroundColorClasses:r,backgroundColorStyles:s}=Fa(()=>e.color),{borderClasses:o}=fi(e),{dimensionStyles:i}=Mr(e),{elevationClasses:c}=Ss(e),{locationStyles:A}=rm(e),{positionClasses:d}=Eh(e),{roundedClasses:f}=xr(e);return St(()=>l(e.tag,{class:ct(["v-sheet",a.value,r.value,o.value,c.value,d.value,f.value,e.class]),style:Rt([s.value,i.value,A.value,e.style])},n)),{}}}),ab=it({bgColor:String,divided:Boolean,landscape:Boolean,title:String,hideHeader:Boolean,...S4()},"VPicker"),Jv=yt()({name:"VPicker",props:ab(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:a,backgroundColorStyles:r}=Fa(()=>e.color);return St(()=>{const s=ag.filterProps(e),o=!!(e.title||n.title);return l(ag,Ue(s,{color:e.bgColor,class:["v-picker",{"v-picker--divided":e.divided,"v-picker--landscape":e.landscape,"v-picker--with-actions":!!n.actions},e.class],style:e.style}),{default:()=>[!e.hideHeader&&v("div",{key:"header",class:ct([a.value]),style:Rt([r.value])},[o&&l(ZYe,{key:"picker-title"},{default:()=>[n.title?.()??e.title]}),n.header&&v("div",{class:"v-picker__header"},[n.header()])]),v("div",{class:"v-picker__body"},[n.default?.()]),n.actions&&l(Ln,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[v("div",{class:"v-picker__actions"},[n.actions()])]})]})}),{}}}),eXe=it({canvasHeight:{type:[String,Number],default:150},disabled:Boolean,dotSize:{type:[Number,String],default:10},hideCanvas:Boolean,hideSliders:Boolean,hideInputs:Boolean,mode:{type:String,default:"rgba",validator:e=>Object.keys(Af).includes(e)},modes:{type:Array,default:()=>Object.keys(Af),validator:e=>Array.isArray(e)&&e.every(t=>Object.keys(Af).includes(t))},showSwatches:Boolean,swatches:Array,swatchesMaxHeight:{type:[Number,String],default:150},modelValue:{type:[Object,String]},...ab({hideHeader:!0})},"VColorPicker"),tXe=Ri({name:"VColorPicker",props:eXe(),emits:{"update:modelValue":e=>!0,"update:mode":e=>!0},setup(e,t){let{slots:n}=t;const a=ln(e,"mode"),r=V(null),s=ln(e,"modelValue",void 0,d=>{if(d==null||d==="")return null;let f;try{f=fg(ki(d))}catch{return null}return f},d=>d?hYe(d,e.modelValue):null),o=ae(()=>s.value?{...s.value,h:r.value??s.value.h}:null),{rtlClasses:i}=Zr();let c=!0;Ke(s,d=>{if(!c){c=!0;return}d&&(r.value=d.h)},{immediate:!0});const A=d=>{c=!1,r.value=d.h,s.value=d};return tu(()=>{e.modes.includes(a.value)||(a.value=e.modes[0])}),wr({VSlider:{color:void 0,trackColor:void 0,trackFillColor:void 0}}),St(()=>{const d=Jv.filterProps(e);return l(Jv,Ue(d,{class:["v-color-picker",i.value,e.class],style:[{"--v-color-picker-color-hsv":Z8({...o.value??rv,a:1})},e.style]}),{...n,default:()=>v(We,null,[!e.hideCanvas&&l(mYe,{key:"canvas",color:o.value,"onUpdate:color":A,disabled:e.disabled,dotSize:e.dotSize,width:e.width,height:e.canvasHeight},null),(!e.hideSliders||!e.hideInputs)&&v("div",{key:"controls",class:"v-color-picker__controls"},[!e.hideSliders&&l(kYe,{key:"preview",color:o.value,"onUpdate:color":A,hideAlpha:!a.value.endsWith("a"),disabled:e.disabled},null),!e.hideInputs&&l(bYe,{key:"edit",modes:e.modes,mode:a.value,"onUpdate:mode":f=>a.value=f,color:o.value,"onUpdate:color":A,disabled:e.disabled},null)]),e.showSwatches&&l(JYe,{key:"swatches",color:o.value,"onUpdate:color":A,maxHeight:e.swatchesMaxHeight,swatches:e.swatches,disabled:e.disabled},null)])})}),{}}}),nXe=it({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...Ih({filterKeys:["title"]}),...b4({hideNoData:!0,returnObject:!0}),...$a(Kg({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...lu({transition:!1})},"VCombobox"),aXe=yt()({name:"VCombobox",props:nXe(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:search":e=>!0,"update:menu":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const{t:r}=Qa(),s=V(),o=Ht(!1),i=Ht(!0),c=Ht(!1),A=V(),d=V(),f=Ht(-1);let m=!1;const{items:h,transformIn:p,transformOut:y}=v4(e),{textColorClasses:g,textColorStyles:w}=Ls(()=>s.value?.color),b=ln(e,"modelValue",[],de=>p(pr(de)),de=>{const G=y(de);return e.multiple?G:G[0]??null}),x=Qg(e),T=ae(()=>!!(e.chips||a.chip)),F=ae(()=>T.value||!!a.selection),k=Ht(!e.multiple&&!F.value?b.value[0]?.title??"":""),S=ae({get:()=>k.value,set:async de=>{if(k.value=de??"",!e.multiple&&!F.value&&(b.value=[Il(e,de)],xn(()=>d.value?.scrollToIndex(0))),de&&e.multiple&&e.delimiters?.length){const G=e.delimiters.map(k_).join("|"),Z=de.split(new RegExp(`(?:${G})+`));if(Z.length>1){for(let ce of Z)ce=ce.trim(),ce&&(z(Il(e,ce)),await xn());k.value=""}}de||(f.value=-1),i.value=!de}}),E=ae(()=>typeof e.counterValue=="function"?e.counterValue(b.value):typeof e.counterValue=="number"?e.counterValue:e.multiple?b.value.length:S.value.length),{filteredItems:C,getMatches:D}=Fh(e,h,()=>i.value?"":S.value),P=ae(()=>e.hideSelected?C.value.filter(de=>!b.value.some(G=>G.value===de.value)):C.value),O=ae(()=>e.hideNoData&&!P.value.length||x.isReadonly.value||x.isDisabled.value),H=ln(e,"menu"),ie=ae({get:()=>H.value,set:de=>{H.value&&!de&&A.value?.openChildren.size||de&&O.value||(H.value=de)}}),Ae=Xe(()=>ie.value?e.closeText:e.openText);Ke(k,de=>{m?xn(()=>m=!1):o.value&&!ie.value&&(ie.value=!0),n("update:search",de)}),Ke(b,de=>{!e.multiple&&!F.value&&(k.value=de[0]?.title??"")});const j=ae(()=>b.value.map(de=>de.value)),J=ae(()=>(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&S.value===P.value[0]?.title)&&P.value.length>0&&!i.value&&!c.value),ue=V(),ne=w4(ue,s);function Y(de){m=!0,e.openOnClear&&(ie.value=!0)}function te(){O.value||(ie.value=!0)}function L(de){O.value||(o.value&&(de.preventDefault(),de.stopPropagation()),ie.value=!ie.value)}function N(de){(Dv(de)||de.key==="Backspace")&&s.value?.focus()}function q(de){if(ote(de)||x.isReadonly.value)return;const G=s.value?.selectionStart,Z=b.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(de.key)&&de.preventDefault(),["Enter","ArrowDown"].includes(de.key)&&(ie.value=!0),["Escape"].includes(de.key)&&(ie.value=!1),["Enter","Escape","Tab"].includes(de.key)&&(J.value&&["Enter","Tab"].includes(de.key)&&!b.value.some(ce=>{let{value:Se}=ce;return Se===P.value[0].value})&&z(C.value[0]),i.value=!0),de.key==="ArrowDown"&&J.value&&ue.value?.focus("next"),de.key==="Enter"&&S.value&&(z(Il(e,S.value)),F.value&&(k.value="")),["Backspace","Delete"].includes(de.key)){if(!e.multiple&&F.value&&b.value.length>0&&!S.value)return z(b.value[0],!1);if(~f.value){de.preventDefault();const ce=f.value;z(b.value[f.value],!1),f.value=ce>=Z-1?Z-2:ce}else de.key==="Backspace"&&!S.value&&(f.value=Z-1);return}if(e.multiple)if(de.key==="ArrowLeft"){if(f.value<0&&G&&G>0)return;const ce=f.value>-1?f.value-1:Z-1;b.value[ce]?f.value=ce:(f.value=-1,s.value?.setSelectionRange(S.value.length,S.value.length))}else if(de.key==="ArrowRight"){if(f.value<0)return;const ce=f.value+1;b.value[ce]?f.value=ce:(f.value=-1,s.value?.setSelectionRange(0,0))}else~f.value&&Dv(de)&&(f.value=-1)}function Q(){e.eager&&d.value?.calculateVisibleItems()}function ee(){o.value&&(i.value=!0,s.value?.focus())}function z(de){let G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!de||de.props.disabled))if(e.multiple){const Z=b.value.findIndex(Se=>(e.valueComparator||bs)(Se.value,de.value)),ce=G??!~Z;if(~Z){const Se=ce?[...b.value,de]:[...b.value];Se.splice(Z,1),b.value=Se}else ce&&(b.value=[...b.value,de]);e.clearOnSelect&&(S.value="")}else{const Z=G!==!1;b.value=Z?[de]:[],k.value=Z&&!F.value?de.title:"",xn(()=>{ie.value=!1,i.value=!0})}}function X(de){o.value=!0,setTimeout(()=>{c.value=!0})}function le(de){c.value=!1}function re(de){(de==null||de===""&&!e.multiple&&!F.value)&&(b.value=[])}return Ke(o,(de,G)=>{if(!(de||de===G)&&(f.value=-1,ie.value=!1,S.value)){if(e.multiple){z(Il(e,S.value));return}if(!F.value)return;b.value.some(Z=>{let{title:ce}=Z;return ce===S.value})?k.value="":z(Il(e,S.value))}}),Ke(ie,()=>{if(!e.hideSelected&&ie.value&&b.value.length){const de=P.value.findIndex(G=>b.value.some(Z=>(e.valueComparator||bs)(Z.value,G.value)));Ba&&window.requestAnimationFrame(()=>{de>=0&&d.value?.scrollToIndex(de)})}}),Ke(()=>e.items,(de,G)=>{ie.value||o.value&&!G.length&&de.length&&(ie.value=!0)}),St(()=>{const de=!!(!e.hideNoData||P.value.length||a["prepend-item"]||a["append-item"]||a["no-data"]),G=b.value.length>0,Z=Hc.filterProps(e);return l(Hc,Ue({ref:s},Z,{modelValue:S.value,"onUpdate:modelValue":[ce=>S.value=ce,re],focused:o.value,"onUpdate:focused":ce=>o.value=ce,validationValue:b.externalValue,counterValue:E.value,dirty:G,class:["v-combobox",{"v-combobox--active-menu":ie.value,"v-combobox--chips":!!e.chips,"v-combobox--selection-slot":!!F.value,"v-combobox--selecting-index":f.value>-1,[`v-combobox--${e.multiple?"multiple":"single"}`]:!0},e.class],style:e.style,readonly:x.isReadonly.value,placeholder:G?void 0:e.placeholder,"onClick:clear":Y,"onMousedown:control":te,onKeydown:q}),{...a,default:()=>v(We,null,[l(Xv,Ue({ref:A,modelValue:ie.value,"onUpdate:modelValue":ce=>ie.value=ce,activator:"parent",contentClass:"v-combobox__content",disabled:O.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:Q,onAfterLeave:ee},e.menuProps),{default:()=>[de&&l(Yv,Ue({ref:ue,filterable:!0,selected:j.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:ce=>ce.preventDefault(),onKeydown:N,onFocusin:X,onFocusout:le,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},ne,e.listProps),{default:()=>[a["prepend-item"]?.(),!P.value.length&&!e.hideNoData&&(a["no-data"]?.()??l(Jl,{key:"no-data",title:r(e.noDataText)},null)),l(eb,{ref:d,renderless:!0,items:P.value,itemKey:"value"},{default:ce=>{let{item:Se,index:Pe,itemRef:ye}=ce;const Ce=Ue(Se.props,{ref:ye,key:Se.value,active:J.value&&Pe===0?!0:void 0,onClick:()=>z(Se,null)});return Se.type==="divider"?a.divider?.({props:Se.raw,index:Pe})??l(Ii,Ue(Se.props,{key:`divider-${Pe}`}),null):Se.type==="subheader"?a.subheader?.({props:Se.raw,index:Pe})??l(Th,Ue(Se.props,{key:`subheader-${Pe}`}),null):a.item?.({item:Se,index:Pe,props:Ce})??l(Jl,Ue(Ce,{role:"option"}),{prepend:_e=>{let{isSelected:De}=_e;return v(We,null,[e.multiple&&!e.hideSelected?l(Mu,{key:Se.value,modelValue:De,ripple:!1,tabindex:"-1"},null):void 0,Se.props.prependAvatar&&l(ul,{image:Se.props.prependAvatar},null),Se.props.prependIcon&&l(Ea,{icon:Se.props.prependIcon},null)])},title:()=>i.value?Se.title:s7("v-combobox",Se.title,D(Se)?.title)})}}),a["append-item"]?.()]})]}),b.value.map((ce,Se)=>{function Pe(De){De.stopPropagation(),De.preventDefault(),z(ce,!1)}const ye={"onClick:close":Pe,onKeydown(De){De.key!=="Enter"&&De.key!==" "||(De.preventDefault(),De.stopPropagation(),Pe(De))},onMousedown(De){De.preventDefault(),De.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},Ce=T.value?!!a.chip:!!a.selection,_e=Ce?rw(T.value?a.chip({item:ce,index:Se,props:ye}):a.selection({item:ce,index:Se})):void 0;if(!(Ce&&!_e))return v("div",{key:ce.value,class:ct(["v-combobox__selection",Se===f.value&&["v-combobox__selection--selected",g.value]]),style:Rt(Se===f.value?w.value:{})},[T.value?a.chip?l(Ln,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:ce.title}}},{default:()=>[_e]}):l(kh,Ue({key:"chip",closable:e.closableChips,size:"small",text:ce.title,disabled:ce.props.disabled},ye),null):_e??v("span",{class:"v-combobox__selection-text"},[ce.title,e.multiple&&Se<b.value.length-1&&v("span",{class:"v-combobox__selection-comma"},[M(",")])])])})]),"append-inner":function(){for(var ce=arguments.length,Se=new Array(ce),Pe=0;Pe<ce;Pe++)Se[Pe]=arguments[Pe];return v(We,null,[a["append-inner"]?.(...Se),(!e.hideNoData||e.items.length)&&e.menuIcon?l(Ea,{class:"v-combobox__menu-icon",color:s.value?.fieldIconColor,icon:e.menuIcon,onMousedown:L,onClick:z8,"aria-label":r(Ae.value),title:r(Ae.value),tabindex:"-1"},null):void 0])}})}),Es({isFocused:o,isPristine:i,menu:ie,search:S,selectionIndex:f,filteredItems:C,select:z},s)}}),rXe=it({modelValue:null,color:String,cancelText:{type:String,default:"$vuetify.confirmEdit.cancel"},okText:{type:String,default:"$vuetify.confirmEdit.ok"},disabled:{type:[Boolean,Array],default:void 0},hideActions:Boolean},"VConfirmEdit"),sXe=yt()({name:"VConfirmEdit",props:rXe(),emits:{cancel:()=>!0,save:e=>!0,"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const r=ln(e,"modelValue"),s=V();_r(()=>{s.value=structuredClone(Cn(r.value))});const{t:o}=Qa(),i=ae(()=>bs(r.value,s.value));function c(y){return typeof e.disabled=="boolean"?e.disabled:Array.isArray(e.disabled)?e.disabled.includes(y):i.value}const A=ae(()=>c("save")),d=ae(()=>c("cancel"));function f(){r.value=s.value,n("save",s.value)}function m(){s.value=structuredClone(Cn(r.value)),n("cancel")}function h(y){return v(We,null,[l(Jn,Ue({disabled:d.value,variant:"text",color:e.color,onClick:m,text:o(e.cancelText)},y),null),l(Jn,Ue({disabled:A.value,variant:"text",color:e.color,onClick:f,text:o(e.okText)},y),null)])}let p=!1;return St(()=>v(We,null,[a.default?.({model:s,save:f,cancel:m,isPristine:i.value,get actions(){return p=!0,h}}),!e.hideActions&&!p&&h()])),{save:f,cancel:m,isPristine:i}}}),x7=it({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),C7=Symbol.for("vuetify:datatable:expanded");function rb(e){const t=Xe(()=>e.expandOnClick),n=ln(e,"expanded",e.expanded,i=>new Set(i),i=>[...i.values()]);function a(i,c){const A=new Set(n.value);c?A.add(i.value):A.delete(i.value),n.value=A}function r(i){return n.value.has(i.value)}function s(i){a(i,!r(i))}const o={expand:a,expanded:n,expandOnClick:t,isExpanded:r,toggleExpand:s};return Ha(C7,o),o}function S7(){const e=Tn(C7);if(!e)throw new Error("foo");return e}const E4=it({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),E7=Symbol.for("vuetify:data-table-group");function B4(e){return{groupBy:ln(e,"groupBy")}}function sb(e){const{disableSort:t,groupBy:n,sortBy:a}=e,r=V(new Set),s=ae(()=>n.value.map(d=>({...d,order:d.order??!1})).concat(t?.value?[]:a.value));function o(d){return r.value.has(d.id)}function i(d){const f=new Set(r.value);o(d)?f.delete(d.id):f.add(d.id),r.value=f}function c(d){function f(m){const h=[];for(const p of m.items)"type"in p&&p.type==="group"?h.push(...f(p)):h.push(p);return[...new Set(h)]}return f({items:d})}const A={sortByWithGroups:s,toggleGroup:i,opened:r,groupBy:n,extractRows:c,isGroupOpen:o};return Ha(E7,A),A}function B7(){const e=Tn(E7);if(!e)throw new Error("Missing group!");return e}function oXe(e,t){if(!e.length)return[];const n=new Map;for(const a of e){const r=hf(a.raw,t);n.has(r)||n.set(r,[]),n.get(r).push(a)}return n}function k7(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!t.length)return[];const r=oXe(e,t[0]),s=[],o=t.slice(1);return r.forEach((i,c)=>{const A=t[0],d=`${a}_${A}_${c}`;s.push({depth:n,id:d,key:A,value:c,items:o.length?k7(i,o,n+1,d):i,type:"group"})}),s}function T7(e,t){const n=[];for(const a of e)"type"in a&&a.type==="group"?(a.value!=null&&n.push(a),(t.has(a.id)||a.value==null)&&n.push(...T7(a.items,t))):n.push(a);return n}function ob(e,t,n){return{flatItems:ae(()=>{if(!t.value.length)return e.value;const r=k7(e.value,t.value.map(s=>s.key));return T7(r,n.value)})}}function ib(e){let{page:t,itemsPerPage:n,sortBy:a,groupBy:r,search:s}=e;const o=Pr("VDataTable"),i=()=>({page:t.value,itemsPerPage:n.value,sortBy:a.value,groupBy:r.value,search:s.value});let c=null;Ke(i,A=>{bs(c,A)||(c&&c.search!==A.search&&(t.value=1),o.emit("update:options",A),c=A)},{deep:!0,immediate:!0})}const k4=it({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),I7=Symbol.for("vuetify:data-table-pagination");function T4(e){const t=ln(e,"page",void 0,a=>Number(a??1)),n=ln(e,"itemsPerPage",void 0,a=>Number(a??10));return{page:t,itemsPerPage:n}}function I4(e){const{page:t,itemsPerPage:n,itemsLength:a}=e,r=ae(()=>n.value===-1?0:n.value*(t.value-1)),s=ae(()=>n.value===-1?a.value:Math.min(a.value,r.value+n.value)),o=ae(()=>n.value===-1||a.value===0?1:Math.ceil(a.value/n.value));Ke([t,o],()=>{t.value>o.value&&(t.value=o.value)});function i(m){n.value=m,t.value=1}function c(){t.value=tr(t.value+1,1,o.value)}function A(){t.value=tr(t.value-1,1,o.value)}function d(m){t.value=tr(m,1,o.value)}const f={page:t,itemsPerPage:n,startIndex:r,stopIndex:s,pageCount:o,itemsLength:a,nextPage:c,prevPage:A,setPage:d,setItemsPerPage:i};return Ha(I7,f),f}function iXe(){const e=Tn(I7);if(!e)throw new Error("Missing pagination!");return e}function F7(e){const t=Pr("usePaginatedItems"),{items:n,startIndex:a,stopIndex:r,itemsPerPage:s}=e,o=ae(()=>s.value<=0?n.value:n.value.slice(a.value,r.value));return Ke(o,i=>{t.emit("update:currentItems",i)},{immediate:!0}),{paginatedItems:o}}const lXe={showSelectAll:!1,allSelected:()=>[],select:e=>{let{items:t,value:n}=e;return new Set(n?[t[0]?.value]:[])},selectAll:e=>{let{selected:t}=e;return t}},P7={showSelectAll:!0,allSelected:e=>{let{currentPage:t}=e;return t},select:e=>{let{items:t,value:n,selected:a}=e;for(const r of t)n?a.add(r.value):a.delete(r.value);return a},selectAll:e=>{let{value:t,currentPage:n,selected:a}=e;return P7.select({items:n,value:t,selected:a})}},D7={showSelectAll:!0,allSelected:e=>{let{allItems:t}=e;return t},select:e=>{let{items:t,value:n,selected:a}=e;for(const r of t)n?a.add(r.value):a.delete(r.value);return a},selectAll:e=>{let{value:t,allItems:n,selected:a}=e;return D7.select({items:n,value:t,selected:a})}},U7=it({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:{type:Function,default:bs}},"DataTable-select"),R7=Symbol.for("vuetify:data-table-selection");function lb(e,t){let{allItems:n,currentPage:a}=t;const r=ln(e,"modelValue",e.modelValue,b=>new Set(pr(b).map(x=>n.value.find(T=>e.valueComparator(x,T.value))?.value??x)),b=>[...b.values()]),s=ae(()=>n.value.filter(b=>b.selectable)),o=ae(()=>a.value.filter(b=>b.selectable)),i=ae(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;switch(e.selectStrategy){case"single":return lXe;case"all":return D7;case"page":default:return P7}}),c=Ht(null);function A(b){return pr(b).every(x=>r.value.has(x.value))}function d(b){return pr(b).some(x=>r.value.has(x.value))}function f(b,x){const T=i.value.select({items:b,value:x,selected:new Set(r.value)});r.value=T}function m(b,x,T){const F=[];if(x=x??a.value.findIndex(k=>k.value===b.value),e.selectStrategy!=="single"&&T?.shiftKey&&c.value!==null){const[k,S]=[c.value,x].sort((E,C)=>E-C);F.push(...a.value.slice(k,S+1).filter(E=>E.selectable))}else F.push(b),c.value=x;f(F,!A([b]))}function h(b){const x=i.value.selectAll({value:b,allItems:s.value,currentPage:o.value,selected:new Set(r.value)});r.value=x}const p=ae(()=>r.value.size>0),y=ae(()=>{const b=i.value.allSelected({allItems:s.value,currentPage:o.value});return!!b.length&&A(b)}),g=Xe(()=>i.value.showSelectAll),w={toggleSelect:m,select:f,selectAll:h,isSelected:A,isSomeSelected:d,someSelected:p,allSelected:y,showSelectAll:g,lastSelectedIndex:c,selectStrategy:i};return Ha(R7,w),w}function ub(){const e=Tn(R7);if(!e)throw new Error("Missing selection!");return e}const N7=it({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),V7=Symbol.for("vuetify:data-table-sort");function cb(e){const t=ln(e,"sortBy"),n=Xe(()=>e.mustSort),a=Xe(()=>e.multiSort);return{sortBy:t,mustSort:n,multiSort:a}}function db(e){const{sortBy:t,mustSort:n,multiSort:a,page:r}=e,s=c=>{if(c.key==null)return;let A=t.value.map(f=>({...f}))??[];const d=A.find(f=>f.key===c.key);d?d.order==="desc"?n.value&&A.length===1?d.order="asc":A=A.filter(f=>f.key!==c.key):d.order="desc":a.value?A.push({key:c.key,order:"asc"}):A=[{key:c.key,order:"asc"}],t.value=A,r&&(r.value=1)};function o(c){return!!t.value.find(A=>A.key===c.key)}const i={sortBy:t,toggleSort:s,isSorted:o};return Ha(V7,i),i}function L7(){const e=Tn(V7);if(!e)throw new Error("Missing sort!");return e}function F4(e,t,n,a){const r=Qa();return{sortedItems:ae(()=>n.value.length?uXe(t.value,n.value,r.current.value,{transform:a?.transform,sortFunctions:{...e.customKeySort,...a?.sortFunctions?.value},sortRawFunctions:a?.sortRawFunctions?.value}):t.value)}}function uXe(e,t,n,a){const r=new Intl.Collator(n,{sensitivity:"accent",usage:"sort"});return e.map(o=>[o,a?.transform?a.transform(o):o]).sort((o,i)=>{for(let c=0;c<t.length;c++){let A=!1;const d=t[c].key,f=t[c].order??"asc";if(f===!1)continue;let m=hf(o[1],d),h=hf(i[1],d),p=o[0].raw,y=i[0].raw;if(f==="desc"&&([m,h]=[h,m],[p,y]=[y,p]),a?.sortRawFunctions?.[d]){const g=a.sortRawFunctions[d](p,y);if(g==null)continue;if(A=!0,g)return g}if(a?.sortFunctions?.[d]){const g=a.sortFunctions[d](m,h);if(g==null)continue;if(A=!0,g)return g}if(!A&&(m instanceof Date&&h instanceof Date&&(m=m.getTime(),h=h.getTime()),[m,h]=[m,h].map(g=>g!=null?g.toString().toLocaleLowerCase():g),m!==h))return z1(m)&&z1(h)?0:z1(m)?-1:z1(h)?1:!isNaN(m)&&!isNaN(h)?Number(m)-Number(h):r.compare(m,h)}return 0}).map(o=>{let[i]=o;return i})}const cXe=it({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},returnObject:Boolean},"DataIterator-items");function dXe(e,t){const n=e.returnObject?t:Nr(t,e.itemValue),a=Nr(t,e.itemSelectable,!0);return{type:"item",value:n,selectable:a,raw:t}}function AXe(e,t){const n=[];for(const a of t)n.push(dXe(e,a));return n}function fXe(e){return{items:ae(()=>AXe(e,e.items))}}const mXe=it({search:String,loading:Boolean,...tn(),...cXe(),...U7(),...N7(),...k4({itemsPerPage:5}),...x7(),...E4(),...Ih(),...Nn(),...lu({transition:{component:Y0,hideOnLeave:!0}})},"VDataIterator"),vXe=yt()({name:"VDataIterator",props:mXe(),emits:{"update:modelValue":e=>!0,"update:groupBy":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,t){let{slots:n}=t;const a=ln(e,"groupBy"),r=Xe(()=>e.search),{items:s}=fXe(e),{filteredItems:o}=Fh(e,s,r,{transform:te=>te.raw}),{sortBy:i,multiSort:c,mustSort:A}=cb(e),{page:d,itemsPerPage:f}=T4(e),{toggleSort:m}=db({sortBy:i,multiSort:c,mustSort:A,page:d}),{sortByWithGroups:h,opened:p,extractRows:y,isGroupOpen:g,toggleGroup:w}=sb({groupBy:a,sortBy:i}),{sortedItems:b}=F4(e,o,h,{transform:te=>te.raw}),{flatItems:x}=ob(b,a,p),T=Xe(()=>x.value.length),{startIndex:F,stopIndex:k,pageCount:S,prevPage:E,nextPage:C,setItemsPerPage:D,setPage:P}=I4({page:d,itemsPerPage:f,itemsLength:T}),{paginatedItems:O}=F7({items:x,startIndex:F,stopIndex:k,itemsPerPage:f}),H=ae(()=>y(O.value)),{isSelected:ie,select:Ae,selectAll:j,toggleSelect:J}=lb(e,{allItems:s,currentPage:H}),{isExpanded:ue,toggleExpand:ne}=rb(e);ib({page:d,itemsPerPage:f,sortBy:i,groupBy:a,search:r});const Y=ae(()=>({page:d.value,itemsPerPage:f.value,sortBy:i.value,pageCount:S.value,toggleSort:m,prevPage:E,nextPage:C,setPage:P,setItemsPerPage:D,isSelected:ie,select:Ae,selectAll:j,toggleSelect:J,isExpanded:ue,toggleExpand:ne,isGroupOpen:g,toggleGroup:w,items:H.value,groupedItems:O.value}));return St(()=>l(e.tag,{class:ct(["v-data-iterator",{"v-data-iterator--loading":e.loading},e.class]),style:Rt(e.style)},{default:()=>[n.header?.(Y.value),l(po,{transition:e.transition},{default:()=>[e.loading?l(Mg,{key:"loader",name:"v-data-iterator",active:!0},{default:te=>n.loader?.(te)}):v("div",{key:"items"},[O.value.length?n.default?.(Y.value):n["no-data"]?.()])]}),n.footer?.(Y.value)]})),{}}});function hXe(){const e=V([]);JL(()=>e.value=[]);function t(n,a){e.value[a]=n}return{refs:e,updateRef:t}}const pXe=it({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:An,default:"$first"},prevIcon:{type:An,default:"$prev"},nextIcon:{type:An,default:"$next"},lastIcon:{type:An,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...zo(),...tn(),...ds(),...es(),...cr(),...Yu(),...Nn({tag:"nav"}),...la(),...ml({variant:"text"})},"VPagination"),fB=yt()({name:"VPagination",props:pXe(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,t){let{slots:n,emit:a}=t;const r=ln(e,"modelValue"),{t:s,n:o}=Qa(),{isRtl:i}=Zr(),{themeClasses:c}=ka(e),{width:A}=dl(),d=Ht(-1);wr(void 0,{scoped:!0});const{resizeRef:f}=Kl(E=>{if(!E.length)return;const{target:C,contentRect:D}=E[0],P=C.querySelector(".v-pagination__list > *");if(!P)return;const O=D.width,H=P.offsetWidth+parseFloat(getComputedStyle(P).marginRight)*2;d.value=y(O,H)}),m=ae(()=>parseInt(e.length,10)),h=ae(()=>parseInt(e.start,10)),p=ae(()=>e.totalVisible!=null?parseInt(e.totalVisible,10):d.value>=0?d.value:y(A.value,58));function y(E,C){const D=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(Number(((E-C*D)/C).toFixed(2))))}const g=ae(()=>{if(m.value<=0||isNaN(m.value)||m.value>Number.MAX_SAFE_INTEGER)return[];if(p.value<=0)return[];if(p.value===1)return[r.value];if(m.value<=p.value)return Bi(m.value,h.value);const E=p.value%2===0,C=E?p.value/2:Math.floor(p.value/2),D=E?C:C+1,P=m.value-C;if(D-r.value>=0)return[...Bi(Math.max(1,p.value-1),h.value),e.ellipsis,m.value];if(r.value-P>=(E?1:0)){const O=p.value-1,H=m.value-O+h.value;return[h.value,e.ellipsis,...Bi(O,H)]}else{const O=Math.max(1,p.value-2),H=O===1?r.value:r.value-Math.ceil(O/2)+h.value;return[h.value,e.ellipsis,...Bi(O,H),e.ellipsis,m.value]}});function w(E,C,D){E.preventDefault(),r.value=C,D&&a(D,C)}const{refs:b,updateRef:x}=hXe();wr({VPaginationBtn:{color:Xe(()=>e.color),border:Xe(()=>e.border),density:Xe(()=>e.density),size:Xe(()=>e.size),variant:Xe(()=>e.variant),rounded:Xe(()=>e.rounded),elevation:Xe(()=>e.elevation)}});const T=ae(()=>g.value.map((E,C)=>{const D=P=>x(P,C);if(typeof E=="string")return{isActive:!1,key:`ellipsis-${C}`,page:E,props:{ref:D,ellipsis:!0,icon:!0,disabled:!0}};{const P=E===r.value;return{isActive:P,key:E,page:o(E),props:{ref:D,ellipsis:!1,icon:!0,disabled:!!e.disabled||Number(e.length)<2,color:P?e.activeColor:e.color,"aria-current":P,"aria-label":s(P?e.currentPageAriaLabel:e.pageAriaLabel,E),onClick:O=>w(O,E)}}}})),F=ae(()=>{const E=!!e.disabled||r.value<=h.value,C=!!e.disabled||r.value>=h.value+m.value-1;return{first:e.showFirstLastPage?{icon:i.value?e.lastIcon:e.firstIcon,onClick:D=>w(D,h.value,"first"),disabled:E,"aria-label":s(e.firstAriaLabel),"aria-disabled":E}:void 0,prev:{icon:i.value?e.nextIcon:e.prevIcon,onClick:D=>w(D,r.value-1,"prev"),disabled:E,"aria-label":s(e.previousAriaLabel),"aria-disabled":E},next:{icon:i.value?e.prevIcon:e.nextIcon,onClick:D=>w(D,r.value+1,"next"),disabled:C,"aria-label":s(e.nextAriaLabel),"aria-disabled":C},last:e.showFirstLastPage?{icon:i.value?e.firstIcon:e.lastIcon,onClick:D=>w(D,h.value+m.value-1,"last"),disabled:C,"aria-label":s(e.lastAriaLabel),"aria-disabled":C}:void 0}});function k(){const E=r.value-h.value;b.value[E]?.$el.focus()}function S(E){E.key===wS.left&&!e.disabled&&r.value>Number(e.start)?(r.value=r.value-1,xn(k)):E.key===wS.right&&!e.disabled&&r.value<h.value+m.value-1&&(r.value=r.value+1,xn(k))}return St(()=>l(e.tag,{ref:f,class:ct(["v-pagination",c.value,e.class]),style:Rt(e.style),role:"navigation","aria-label":s(e.ariaLabel),onKeydown:S,"data-test":"v-pagination-root"},{default:()=>[v("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&v("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[n.first?n.first(F.value.first):l(Jn,Ue({_as:"VPaginationBtn"},F.value.first),null)]),v("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[n.prev?n.prev(F.value.prev):l(Jn,Ue({_as:"VPaginationBtn"},F.value.prev),null)]),T.value.map((E,C)=>v("li",{key:E.key,class:ct(["v-pagination__item",{"v-pagination__item--is-active":E.isActive}]),"data-test":"v-pagination-item"},[n.item?n.item(E):l(Jn,Ue({_as:"VPaginationBtn"},E.props),{default:()=>[E.page]})])),v("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[n.next?n.next(F.value.next):l(Jn,Ue({_as:"VPaginationBtn"},F.value.next),null)]),e.showFirstLastPage&&v("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[n.last?n.last(F.value.last):l(Jn,Ue({_as:"VPaginationBtn"},F.value.last),null)])])]})),{}}}),P4=it({prevIcon:{type:An,default:"$prev"},nextIcon:{type:An,default:"$next"},firstIcon:{type:An,default:"$first"},lastIcon:{type:An,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),rg=yt()({name:"VDataTableFooter",props:P4(),setup(e,t){let{slots:n}=t;const{t:a}=Qa(),{page:r,pageCount:s,startIndex:o,stopIndex:i,itemsLength:c,itemsPerPage:A,setItemsPerPage:d}=iXe(),f=ae(()=>e.itemsPerPageOptions.map(m=>typeof m=="number"?{value:m,title:m===-1?a("$vuetify.dataFooter.itemsPerPageAll"):String(m)}:{...m,title:isNaN(Number(m.title))?a(m.title):m.title}));return St(()=>{const m=fB.filterProps(e);return v("div",{class:"v-data-table-footer"},[n.prepend?.(),v("div",{class:"v-data-table-footer__items-per-page"},[v("span",{"aria-label":a(e.itemsPerPageText)},[a(e.itemsPerPageText)]),l(x4,{items:f.value,modelValue:A.value,"onUpdate:modelValue":h=>d(Number(h)),density:"compact",variant:"outlined",hideDetails:!0},null)]),v("div",{class:"v-data-table-footer__info"},[v("div",null,[a(e.pageText,c.value?o.value+1:0,i.value,c.value)])]),v("div",{class:"v-data-table-footer__pagination"},[l(fB,Ue({modelValue:r.value,"onUpdate:modelValue":h=>r.value=h,density:"comfortable",firstAriaLabel:e.firstPageLabel,lastAriaLabel:e.lastPageLabel,length:s.value,nextAriaLabel:e.nextPageLabel,previousAriaLabel:e.prevPageLabel,rounded:!0,showFirstLastPage:!0,totalVisible:e.showCurrentPage?1:0,variant:"plain"},m),null)])])}),{}}}),I2=$te({align:{type:String,default:"start"},fixed:{type:[Boolean,String],default:!1},fixedOffset:[Number,String],fixedEndOffset:[Number,String],height:[Number,String],lastFixed:Boolean,firstFixedEnd:Boolean,noPadding:Boolean,tag:String,width:[Number,String],maxWidth:[Number,String],nowrap:Boolean},(e,t)=>{let{slots:n}=t;const a=e.tag??"td",r=typeof e.fixed=="string"?e.fixed:e.fixed?"start":"none";return l(a,{class:ct(["v-data-table__td",{"v-data-table-column--fixed":r==="start","v-data-table-column--fixed-end":r==="end","v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--first-fixed-end":e.firstFixedEnd,"v-data-table-column--no-padding":e.noPadding,"v-data-table-column--nowrap":e.nowrap},`v-data-table-column--align-${e.align}`]),style:{height:Yt(e.height),width:Yt(e.width),maxWidth:Yt(e.maxWidth),left:r==="start"?Yt(e.fixedOffset||null):void 0,right:r==="end"?Yt(e.fixedEndOffset||null):void 0}},{default:()=>[n.default?.()]})}),gXe=it({headers:Array},"DataTable-header"),M7=Symbol.for("vuetify:data-table-headers"),O7={title:"",sortable:!1},yXe={...O7,width:48};function _Xe(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).map(n=>({element:n,priority:0}));return{enqueue:(n,a)=>{let r=!1;for(let s=0;s<t.length;s++)if(t[s].priority>a){t.splice(s,0,{element:n,priority:a}),r=!0;break}r||t.push({element:n,priority:a})},size:()=>t.length,count:()=>{let n=0;if(!t.length)return 0;const a=Math.floor(t[0].priority);for(let r=0;r<t.length;r++)Math.floor(t[r].priority)===a&&(n+=1);return n},dequeue:()=>t.shift()}}function mB(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!e.children)t.push(e);else for(const n of e.children)mB(n,t);return t}function H7(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set;for(const n of e)n.key&&t.add(n.key),n.children&&H7(n.children,t);return t}function wXe(e){if(e.key){if(e.key==="data-table-group")return O7;if(["data-table-expand","data-table-select"].includes(e.key))return yXe}}function D4(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.children?Math.max(t,...e.children.map(n=>D4(n,t+1))):t}function bXe(e){let t=!1;function n(s,o){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"none";if(s)if(i!=="none"&&(s.fixed=i),s.fixed===!0&&(s.fixed="start"),s.fixed===o)if(s.children)if(o==="start")for(let c=s.children.length-1;c>=0;c--)n(s.children[c],o,o);else for(let c=0;c<s.children.length;c++)n(s.children[c],o,o);else!t&&o==="start"?s.lastFixed=!0:!t&&o==="end"?s.firstFixedEnd=!0:isNaN(Number(s.width))?(`${s.key}`,void 0):s.minWidth=Math.max(Number(s.width)||0,Number(s.minWidth)||0),t=!0;else if(s.children)if(o==="start")for(let c=s.children.length-1;c>=0;c--)n(s.children[c],o);else for(let c=0;c<s.children.length;c++)n(s.children[c],o);else t=!1}for(let s=e.length-1;s>=0;s--)n(e[s],"start");for(let s=0;s<e.length;s++)n(e[s],"end");let a=0;for(let s=0;s<e.length;s++)a=$7(e[s],a);let r=0;for(let s=e.length-1;s>=0;s--)r=Q7(e[s],r)}function $7(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e)return t;if(e.children){e.fixedOffset=t;for(const n of e.children)t=$7(n,t)}else e.fixed&&e.fixed!=="end"&&(e.fixedOffset=t,t+=parseFloat(e.width||"0")||0);return t}function Q7(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e)return t;if(e.children){e.fixedEndOffset=t;for(const n of e.children)t=Q7(n,t)}else e.fixed==="end"&&(e.fixedEndOffset=t,t+=parseFloat(e.width||"0")||0);return t}function xXe(e,t){const n=[];let a=0;const r=_Xe(e);for(;r.size()>0;){let o=r.count();const i=[];let c=1;for(;o>0;){const{element:A,priority:d}=r.dequeue(),f=t-a-D4(A);if(i.push({...A,rowspan:f??1,colspan:A.children?mB(A).length:1}),A.children)for(const m of A.children){const h=d%1+c/Math.pow(10,a+2);r.enqueue(m,a+f+h)}c+=1,o-=1}a+=1,n.push(i)}return{columns:e.map(o=>mB(o)).flat(),headers:n}}function G7(e){const t=[];for(const n of e){const a={...wXe(n),...n},r=a.key??(typeof a.value=="string"?a.value:null),s=a.value??r??null,o={...a,key:r,value:s,sortable:a.sortable??(a.key!=null||!!a.sort),children:a.children?G7(a.children):void 0};t.push(o)}return t}function U4(e,t){const n=V([]),a=V([]),r=V({}),s=V({}),o=V({});_r(()=>{const A=(e.headers||Object.keys(e.items[0]??{}).map(y=>({key:y,title:$u(y)}))).slice(),d=H7(A);t?.groupBy?.value.length&&!d.has("data-table-group")&&A.unshift({key:"data-table-group",title:"Group"}),t?.showSelect?.value&&!d.has("data-table-select")&&A.unshift({key:"data-table-select"}),t?.showExpand?.value&&!d.has("data-table-expand")&&A.push({key:"data-table-expand"});const f=G7(A);bXe(f);const m=Math.max(...f.map(y=>D4(y)))+1,h=xXe(f,m);n.value=h.headers,a.value=h.columns;const p=h.headers.flat(1);for(const y of p)y.key&&(y.sortable&&(y.sort&&(r.value[y.key]=y.sort),y.sortRaw&&(s.value[y.key]=y.sortRaw)),y.filter&&(o.value[y.key]=y.filter))});const i={headers:n,columns:a,sortFunctions:r,sortRawFunctions:s,filterFunctions:o};return Ha(M7,i),i}function Ab(){const e=Tn(M7);if(!e)throw new Error("Missing headers!");return e}const z7=it({color:String,disableSort:Boolean,fixedHeader:Boolean,multiSort:Boolean,sortAscIcon:{type:An,default:"$sortAsc"},sortDescIcon:{type:An,default:"$sortDesc"},headerProps:{type:Object},sticky:Boolean,...Hf(),...Yw()},"VDataTableHeaders"),Ff=yt()({name:"VDataTableHeaders",props:z7(),setup(e,t){let{slots:n}=t;const{t:a}=Qa(),{toggleSort:r,sortBy:s,isSorted:o}=L7(),{someSelected:i,allSelected:c,selectAll:A,showSelectAll:d}=ub(),{columns:f,headers:m}=Ab(),{loaderClasses:h}=Lg(e);function p(C,D){if(!(e.sticky||e.fixedHeader)&&!C.fixed)return;const P=typeof C.fixed=="string"?C.fixed:C.fixed?"start":"none";return{position:"sticky",left:P==="start"?Yt(C.fixedOffset):void 0,right:P==="end"?Yt(C.fixedEndOffset):void 0,top:e.sticky||e.fixedHeader?`calc(var(--v-table-header-height) * ${D})`:void 0}}function y(C,D){C.key==="Enter"&&!e.disableSort&&r(D)}function g(C){const D=s.value.find(P=>P.key===C.key);return D?D.order==="asc"?e.sortAscIcon:e.sortDescIcon:e.sortAscIcon}const{backgroundColorClasses:w,backgroundColorStyles:b}=Fa(()=>e.color),{displayClasses:x,mobile:T}=dl(e),F=ae(()=>({headers:m.value,columns:f.value,toggleSort:r,isSorted:o,sortBy:s.value,someSelected:i.value,allSelected:c.value,selectAll:A,getSortIcon:g})),k=ae(()=>["v-data-table__th",{"v-data-table__th--sticky":e.sticky||e.fixedHeader},x.value,h.value]),S=C=>{let{column:D,x:P,y:O}=C;const H=D.key==="data-table-select"||D.key==="data-table-expand",ie=Ue(e.headerProps??{},D.headerProps??{});return l(I2,Ue({tag:"th",align:D.align,class:[{"v-data-table__th--sortable":D.sortable&&!e.disableSort,"v-data-table__th--sorted":o(D),"v-data-table__th--fixed":D.fixed},...k.value],style:{width:Yt(D.width),minWidth:Yt(D.minWidth),maxWidth:Yt(D.maxWidth),...p(D,O)},colspan:D.colspan,rowspan:D.rowspan,fixed:D.fixed,nowrap:D.nowrap,lastFixed:D.lastFixed,firstFixedEnd:D.firstFixedEnd,noPadding:H,tabindex:D.sortable?0:void 0,onClick:D.sortable?()=>r(D):void 0,onKeydown:D.sortable?Ae=>y(Ae,D):void 0},ie),{default:()=>{const Ae=`header.${D.key}`,j={column:D,selectAll:A,isSorted:o,toggleSort:r,sortBy:s.value,someSelected:i.value,allSelected:c.value,getSortIcon:g};return n[Ae]?n[Ae](j):D.key==="data-table-select"?n["header.data-table-select"]?.(j)??(d.value&&l(Mu,{modelValue:c.value,indeterminate:i.value&&!c.value,"onUpdate:modelValue":A},null)):v("div",{class:"v-data-table-header__content"},[v("span",null,[D.title]),D.sortable&&!e.disableSort&&l(Ea,{key:"icon",class:"v-data-table-header__sort-icon",icon:g(D)},null),e.multiSort&&o(D)&&v("div",{key:"badge",class:ct(["v-data-table-header__sort-badge",...w.value]),style:Rt(b.value)},[s.value.findIndex(J=>J.key===D.key)+1])])}})},E=()=>{const C=ae(()=>f.value.filter(P=>P?.sortable&&!e.disableSort)),D=ae(()=>{if(f.value.find(O=>O.key==="data-table-select")!=null)return c.value?"$checkboxOn":i.value?"$checkboxIndeterminate":"$checkboxOff"});return l(I2,Ue({tag:"th",class:[...k.value],colspan:m.value.length+1},e.headerProps),{default:()=>[v("div",{class:"v-data-table-header__content"},[l(x4,{chips:!0,class:"v-data-table__td-sort-select",clearable:!0,density:"default",items:C.value,label:a("$vuetify.dataTable.sortBy"),multiple:e.multiSort,variant:"underlined","onClick:clear":()=>s.value=[],appendIcon:D.value,"onClick:append":()=>A(!c.value)},{chip:P=>l(kh,{onClick:P.item.raw?.sortable?()=>r(P.item.raw):void 0,onMousedown:O=>{O.preventDefault(),O.stopPropagation()}},{default:()=>[P.item.title,l(Ea,{class:ct(["v-data-table__td-sort-icon",o(P.item.raw)&&"v-data-table__td-sort-icon-active"]),icon:g(P.item.raw),size:"small"},null)]})})])]})};St(()=>T.value?v("tr",null,[l(E,null,null)]):v(We,null,[n.headers?n.headers(F.value):m.value.map((C,D)=>v("tr",null,[C.map((P,O)=>l(S,{column:P,x:O,y:D},null))])),e.loading&&v("tr",{class:"v-data-table-progress"},[v("th",{colspan:f.value.length},[l(Mg,{name:"v-data-table-progress",absolute:!0,active:!0,color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0},{default:n.loader})])])]))}}),CXe=it({item:{type:Object,required:!0}},"VDataTableGroupHeaderRow"),SXe=yt()({name:"VDataTableGroupHeaderRow",props:CXe(),setup(e,t){let{slots:n}=t;const{isGroupOpen:a,toggleGroup:r,extractRows:s}=B7(),{isSelected:o,isSomeSelected:i,select:c}=ub(),{columns:A}=Ab(),d=ae(()=>s([e.item]));return()=>v("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[A.value.map(f=>{if(f.key==="data-table-group"){const m=a(e.item)?"$expand":"$next",h=()=>r(e.item);return n["data-table-group"]?.({item:e.item,count:d.value.length,props:{icon:m,onClick:h}})??l(I2,{class:"v-data-table-group-header-row__column"},{default:()=>[l(Jn,{size:"small",variant:"text",icon:m,onClick:h},null),v("span",null,[e.item.value]),v("span",null,[M("("),d.value.length,M(")")])]})}if(f.key==="data-table-select"){const m=o(d.value),h=i(d.value)&&!m,p=y=>c(d.value,y);return n["data-table-select"]?.({props:{modelValue:m,indeterminate:h,"onUpdate:modelValue":p}})??v("td",null,[l(Mu,{modelValue:m,indeterminate:h,"onUpdate:modelValue":p},null)])}return v("td",null,null)})])}}),EXe=it({index:Number,item:Object,cellProps:[Object,Function],onClick:Ns(),onContextmenu:Ns(),onDblclick:Ns(),...Hf()},"VDataTableRow"),R4=yt()({name:"VDataTableRow",props:EXe(),setup(e,t){let{slots:n}=t;const{displayClasses:a,mobile:r}=dl(e,"v-data-table__tr"),{isSelected:s,toggleSelect:o,someSelected:i,allSelected:c,selectAll:A}=ub(),{isExpanded:d,toggleExpand:f}=S7(),{toggleSort:m,sortBy:h,isSorted:p}=L7(),{columns:y}=Ab();St(()=>v("tr",{class:ct(["v-data-table__tr",{"v-data-table__tr--clickable":!!(e.onClick||e.onContextmenu||e.onDblclick)},a.value]),onClick:e.onClick,onContextmenu:e.onContextmenu,onDblclick:e.onDblclick},[e.item&&y.value.map((g,w)=>{const b=e.item,x=`item.${g.key}`,T=`header.${g.key}`,F={index:e.index,item:b.raw,internalItem:b,value:hf(b.columns,g.key),column:g,isSelected:s,toggleSelect:o,isExpanded:d,toggleExpand:f},k={column:g,selectAll:A,isSorted:p,toggleSort:m,sortBy:h.value,someSelected:i.value,allSelected:c.value,getSortIcon:()=>""},S=typeof e.cellProps=="function"?e.cellProps({index:F.index,item:F.item,internalItem:F.internalItem,value:F.value,column:g}):e.cellProps,E=typeof g.cellProps=="function"?g.cellProps({index:F.index,item:F.item,internalItem:F.internalItem,value:F.value}):g.cellProps;return l(I2,Ue({align:g.align,class:{"v-data-table__td--expanded-row":g.key==="data-table-expand","v-data-table__td--select-row":g.key==="data-table-select"},fixed:g.fixed,fixedOffset:g.fixedOffset,fixedEndOffset:g.fixedEndOffset,lastFixed:g.lastFixed,firstFixedEnd:g.firstFixedEnd,maxWidth:r.value?void 0:g.maxWidth,noPadding:g.key==="data-table-select"||g.key==="data-table-expand",nowrap:g.nowrap,width:r.value?void 0:g.width},S,E),{default:()=>{if(g.key==="data-table-select")return n["item.data-table-select"]?.({...F,props:{disabled:!b.selectable,modelValue:s([b]),onClick:pn(()=>o(b),["stop"])}})??l(Mu,{disabled:!b.selectable,modelValue:s([b]),onClick:pn(D=>o(b,e.index,D),["stop"])},null);if(g.key==="data-table-expand")return n["item.data-table-expand"]?.({...F,props:{icon:d(b)?"$collapse":"$expand",size:"small",variant:"text",onClick:pn(()=>f(b),["stop"])}})??l(Jn,{icon:d(b)?"$collapse":"$expand",size:"small",variant:"text",onClick:pn(()=>f(b),["stop"])},null);if(n[x]&&!r.value)return n[x](F);const C=K(F.value);return r.value?v(We,null,[v("div",{class:"v-data-table__td-title"},[n[T]?.(k)??g.title]),v("div",{class:"v-data-table__td-value"},[n[x]?.(F)??C])]):C}})})]))}}),K7=it({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowProps:[Object,Function],cellProps:[Object,Function],...Hf()},"VDataTableRows"),Pf=yt()({name:"VDataTableRows",inheritAttrs:!1,props:K7(),setup(e,t){let{attrs:n,slots:a}=t;const{columns:r}=Ab(),{expandOnClick:s,toggleExpand:o,isExpanded:i}=S7(),{isSelected:c,toggleSelect:A}=ub(),{toggleGroup:d,isGroupOpen:f}=B7(),{t:m}=Qa(),{mobile:h}=dl(e);return St(()=>e.loading&&(!e.items.length||a.loading)?v("tr",{class:"v-data-table-rows-loading",key:"loading"},[v("td",{colspan:r.value.length},[a.loading?.()??m(e.loadingText)])]):!e.loading&&!e.items.length&&!e.hideNoData?v("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[v("td",{colspan:r.value.length},[a["no-data"]?.()??m(e.noDataText)])]):v(We,null,[e.items.map((p,y)=>{if(p.type==="group"){const b={index:y,item:p,columns:r.value,isExpanded:i,toggleExpand:o,isSelected:c,toggleSelect:A,toggleGroup:d,isGroupOpen:f};return a["group-header"]?a["group-header"](b):l(SXe,Ue({key:`group-header_${p.id}`,item:p},fD(n,":group-header",()=>b)),a)}const g={index:y,item:p.raw,internalItem:p,columns:r.value,isExpanded:i,toggleExpand:o,isSelected:c,toggleSelect:A},w={...g,props:Ue({key:`item_${p.key??p.index}`,onClick:s.value?()=>{o(p)}:void 0,index:y,item:p,cellProps:e.cellProps,mobile:h.value},fD(n,":row",()=>g),typeof e.rowProps=="function"?e.rowProps({item:g.item,index:g.index,internalItem:g.internalItem}):e.rowProps)};return v(We,{key:w.props.key},[a.item?a.item(w):l(R4,w.props,a),i(p)&&a["expanded-row"]?.(g)])})])),{}}}),W7=it({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,striped:{type:String,default:null,validator:e=>["even","odd"].includes(e)},...tn(),...ds(),...Nn(),...la()},"VTable"),Df=yt()({name:"VTable",props:W7(),setup(e,t){let{slots:n,emit:a}=t;const{themeClasses:r}=ka(e),{densityClasses:s}=Eo(e);return St(()=>{const o={VCheckboxBtn:{density:e.density}};return l(e.tag,{class:ct(["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!n.top,"v-table--has-bottom":!!n.bottom,"v-table--hover":e.hover,"v-table--striped-even":e.striped==="even","v-table--striped-odd":e.striped==="odd"},r.value,s.value,e.class]),style:Rt(e.style)},{default:()=>[n.top?.(),l(Ln,{defaults:o},{default:()=>[n.default?v("div",{class:"v-table__wrapper",style:{height:Yt(e.height)}},[v("table",null,[n.default()])]):n.wrapper?.()]}),n.bottom?.()]})}),{}}}),BXe=it({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function kXe(e,t,n,a){const r=e.returnObject?t:Nr(t,e.itemValue),s=Nr(t,e.itemSelectable,!0),o=a.reduce((i,c)=>(c.key!=null&&(i[c.key]=Nr(t,c.value)),i),{});return{type:"item",key:e.returnObject?Nr(t,e.itemValue):r,index:n,value:r,selectable:s,columns:o,raw:t}}function TXe(e,t,n){return t.map((a,r)=>kXe(e,a,r,n))}function N4(e,t){return{items:ae(()=>TXe(e,e.items,t.value))}}const V4=it({...K7(),hideDefaultBody:Boolean,hideDefaultFooter:Boolean,hideDefaultHeader:Boolean,width:[String,Number],search:String,...x7(),...E4(),...gXe(),...BXe(),...U7(),...N7(),...z7(),...W7()},"DataTable"),IXe=it({...k4(),...V4(),...Ih(),...P4()},"VDataTable"),FXe=yt()({name:"VDataTable",props:IXe(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const{groupBy:r}=B4(e),{sortBy:s,multiSort:o,mustSort:i}=cb(e),{page:c,itemsPerPage:A}=T4(e),{disableSort:d}=Mf(e),{columns:f,headers:m,sortFunctions:h,sortRawFunctions:p,filterFunctions:y}=U4(e,{groupBy:r,showSelect:Xe(()=>e.showSelect),showExpand:Xe(()=>e.showExpand)}),{items:g}=N4(e,f),w=Xe(()=>e.search),{filteredItems:b}=Fh(e,g,w,{transform:z=>z.columns,customKeyFilter:y}),{toggleSort:x}=db({sortBy:s,multiSort:o,mustSort:i,page:c}),{sortByWithGroups:T,opened:F,extractRows:k,isGroupOpen:S,toggleGroup:E}=sb({groupBy:r,sortBy:s,disableSort:d}),{sortedItems:C}=F4(e,b,T,{transform:z=>({...z.raw,...z.columns}),sortFunctions:h,sortRawFunctions:p}),{flatItems:D}=ob(C,r,F),P=ae(()=>D.value.length),{startIndex:O,stopIndex:H,pageCount:ie,setItemsPerPage:Ae}=I4({page:c,itemsPerPage:A,itemsLength:P}),{paginatedItems:j}=F7({items:D,startIndex:O,stopIndex:H,itemsPerPage:A}),J=ae(()=>k(j.value)),{isSelected:ue,select:ne,selectAll:Y,toggleSelect:te,someSelected:L,allSelected:N}=lb(e,{allItems:g,currentPage:J}),{isExpanded:q,toggleExpand:Q}=rb(e);ib({page:c,itemsPerPage:A,sortBy:s,groupBy:r,search:w}),wr({VDataTableRows:{hideNoData:Xe(()=>e.hideNoData),noDataText:Xe(()=>e.noDataText),loading:Xe(()=>e.loading),loadingText:Xe(()=>e.loadingText)}});const ee=ae(()=>({page:c.value,itemsPerPage:A.value,sortBy:s.value,pageCount:ie.value,toggleSort:x,setItemsPerPage:Ae,someSelected:L.value,allSelected:N.value,isSelected:ue,select:ne,selectAll:Y,toggleSelect:te,isExpanded:q,toggleExpand:Q,isGroupOpen:S,toggleGroup:E,items:J.value.map(z=>z.raw),internalItems:J.value,groupedItems:j.value,columns:f.value,headers:m.value}));return St(()=>{const z=rg.filterProps(e),X=Ff.filterProps(e),le=Pf.filterProps(e),re=Df.filterProps(e);return l(Df,Ue({class:["v-data-table",{"v-data-table--show-select":e.showSelect,"v-data-table--loading":e.loading},e.class],style:e.style},re,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>a.top?.(ee.value),default:()=>a.default?a.default(ee.value):v(We,null,[a.colgroup?.(ee.value),!e.hideDefaultHeader&&v("thead",{key:"thead"},[l(Ff,X,a)]),a.thead?.(ee.value),!e.hideDefaultBody&&v("tbody",null,[a["body.prepend"]?.(ee.value),a.body?a.body(ee.value):l(Pf,Ue(n,le,{items:j.value}),a),a["body.append"]?.(ee.value)]),a.tbody?.(ee.value),a.tfoot?.(ee.value)]),bottom:()=>a.bottom?a.bottom(ee.value):!e.hideDefaultFooter&&v(We,null,[l(Ii,null,null),l(rg,z,{prepend:a["footer.prepend"]})])})}),{}}}),PXe=it({...$a(V4(),["hideDefaultFooter"]),...E4(),...a7(),...Ih()},"VDataTableVirtual"),DXe=yt()({name:"VDataTableVirtual",props:PXe(),emits:{"update:modelValue":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const{groupBy:r}=B4(e),{sortBy:s,multiSort:o,mustSort:i}=cb(e),{disableSort:c}=Mf(e),{columns:A,headers:d,filterFunctions:f,sortFunctions:m,sortRawFunctions:h}=U4(e,{groupBy:r,showSelect:Xe(()=>e.showSelect),showExpand:Xe(()=>e.showExpand)}),{items:p}=N4(e,A),y=Xe(()=>e.search),{filteredItems:g}=Fh(e,p,y,{transform:re=>re.columns,customKeyFilter:f}),{toggleSort:w}=db({sortBy:s,multiSort:o,mustSort:i}),{sortByWithGroups:b,opened:x,extractRows:T,isGroupOpen:F,toggleGroup:k}=sb({groupBy:r,sortBy:s,disableSort:c}),{sortedItems:S}=F4(e,g,b,{transform:re=>({...re.raw,...re.columns}),sortFunctions:m,sortRawFunctions:h}),{flatItems:E}=ob(S,r,x),C=ae(()=>T(E.value)),{isSelected:D,select:P,selectAll:O,toggleSelect:H,someSelected:ie,allSelected:Ae}=lb(e,{allItems:C,currentPage:C}),{isExpanded:j,toggleExpand:J}=rb(e),{containerRef:ue,markerRef:ne,paddingTop:Y,paddingBottom:te,computedItems:L,handleItemResize:N,handleScroll:q,handleScrollend:Q,calculateVisibleItems:ee,scrollToIndex:z}=r7(e,E),X=ae(()=>L.value.map(re=>re.raw));ib({sortBy:s,page:Ht(1),itemsPerPage:Ht(-1),groupBy:r,search:y}),wr({VDataTableRows:{hideNoData:Xe(()=>e.hideNoData),noDataText:Xe(()=>e.noDataText),loading:Xe(()=>e.loading),loadingText:Xe(()=>e.loadingText)}});const le=ae(()=>({sortBy:s.value,toggleSort:w,someSelected:ie.value,allSelected:Ae.value,isSelected:D,select:P,selectAll:O,toggleSelect:H,isExpanded:j,toggleExpand:J,isGroupOpen:F,toggleGroup:k,items:C.value.map(re=>re.raw),internalItems:C.value,groupedItems:E.value,columns:A.value,headers:d.value}));return St(()=>{const re=Ff.filterProps(e),de=Pf.filterProps(e),G=Df.filterProps(e);return l(Df,Ue({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},G,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>a.top?.(le.value),wrapper:()=>v("div",{ref:ue,onScrollPassive:q,onScrollend:Q,class:"v-table__wrapper",style:{height:Yt(e.height)}},[v("table",null,[a.colgroup?.(le.value),!e.hideDefaultHeader&&v("thead",{key:"thead"},[l(Ff,re,a)]),a.thead?.(le.value),!e.hideDefaultBody&&v("tbody",{key:"tbody"},[v("tr",{ref:ne,style:{height:Yt(Y.value),border:0}},[v("td",{colspan:A.value.length,style:{height:0,border:0}},null)]),a["body.prepend"]?.(le.value),l(Pf,Ue(n,de,{items:X.value}),{...a,item:Z=>l(n7,{key:Z.internalItem.index,renderless:!0,"onUpdate:height":ce=>N(Z.internalItem.index,ce)},{default:ce=>{let{itemRef:Se}=ce;return a.item?.({...Z,itemRef:Se})??l(R4,Ue(Z.props,{ref:Se,key:Z.internalItem.index,index:Z.internalItem.index}),a)}})}),a["body.append"]?.(le.value),v("tr",{style:{height:Yt(te.value),border:0}},[v("td",{colspan:A.value.length,style:{height:0,border:0}},null)])]),a.tbody?.(le.value),a.tfoot?.(le.value)])]),bottom:()=>a.bottom?.(le.value)})}),{calculateVisibleItems:ee,scrollToIndex:z}}}),UXe=it({itemsLength:{type:[Number,String],required:!0},...k4(),...V4(),...P4()},"VDataTableServer"),RXe=yt()({name:"VDataTableServer",props:UXe(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:groupBy":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const{groupBy:r}=B4(e),{sortBy:s,multiSort:o,mustSort:i}=cb(e),{page:c,itemsPerPage:A}=T4(e),{disableSort:d}=Mf(e),f=ae(()=>parseInt(e.itemsLength,10)),{columns:m,headers:h}=U4(e,{groupBy:r,showSelect:Xe(()=>e.showSelect),showExpand:Xe(()=>e.showExpand)}),{items:p}=N4(e,m),{toggleSort:y}=db({sortBy:s,multiSort:o,mustSort:i,page:c}),{opened:g,isGroupOpen:w,toggleGroup:b,extractRows:x}=sb({groupBy:r,sortBy:s,disableSort:d}),{pageCount:T,setItemsPerPage:F}=I4({page:c,itemsPerPage:A,itemsLength:f}),{flatItems:k}=ob(p,r,g),{isSelected:S,select:E,selectAll:C,toggleSelect:D,someSelected:P,allSelected:O}=lb(e,{allItems:p,currentPage:p}),{isExpanded:H,toggleExpand:ie}=rb(e),Ae=ae(()=>x(p.value));ib({page:c,itemsPerPage:A,sortBy:s,groupBy:r,search:Xe(()=>e.search)}),Ha("v-data-table",{toggleSort:y,sortBy:s}),wr({VDataTableRows:{hideNoData:Xe(()=>e.hideNoData),noDataText:Xe(()=>e.noDataText),loading:Xe(()=>e.loading),loadingText:Xe(()=>e.loadingText)}});const j=ae(()=>({page:c.value,itemsPerPage:A.value,sortBy:s.value,pageCount:T.value,toggleSort:y,setItemsPerPage:F,someSelected:P.value,allSelected:O.value,isSelected:S,select:E,selectAll:C,toggleSelect:D,isExpanded:H,toggleExpand:ie,isGroupOpen:w,toggleGroup:b,items:Ae.value.map(J=>J.raw),internalItems:Ae.value,groupedItems:k.value,columns:m.value,headers:h.value}));St(()=>{const J=rg.filterProps(e),ue=Ff.filterProps(e),ne=Pf.filterProps(e),Y=Df.filterProps(e);return l(Df,Ue({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},Y,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>a.top?.(j.value),default:()=>a.default?a.default(j.value):v(We,null,[a.colgroup?.(j.value),!e.hideDefaultHeader&&v("thead",{key:"thead",class:"v-data-table__thead",role:"rowgroup"},[l(Ff,ue,a)]),a.thead?.(j.value),!e.hideDefaultBody&&v("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[a["body.prepend"]?.(j.value),a.body?a.body(j.value):l(Pf,Ue(n,ne,{items:k.value}),a),a["body.append"]?.(j.value)]),a.tbody?.(j.value),a.tfoot?.(j.value)]),bottom:()=>a.bottom?a.bottom(j.value):!e.hideDefaultFooter&&v(We,null,[l(Ii,null,null),l(rg,J,{prepend:a["footer.prepend"]})])})})}}),NXe=it({fluid:{type:Boolean,default:!1},...tn(),...Lr(),...Nn()},"VContainer"),VXe=yt()({name:"VContainer",props:NXe(),setup(e,t){let{slots:n}=t;const{rtlClasses:a}=Zr(),{dimensionStyles:r}=Mr(e);return St(()=>l(e.tag,{class:ct(["v-container",{"v-container--fluid":e.fluid},a.value,e.class]),style:Rt([r.value,e.style])},n)),{}}}),j7=sw.reduce((e,t)=>(e[t]={type:[Boolean,String,Number],default:!1},e),{}),q7=sw.reduce((e,t)=>{const n="offset"+$u(t);return e[n]={type:[String,Number],default:null},e},{}),Y7=sw.reduce((e,t)=>{const n="order"+$u(t);return e[n]={type:[String,Number],default:null},e},{}),ON={col:Object.keys(j7),offset:Object.keys(q7),order:Object.keys(Y7)};function LXe(e,t,n){let a=e;if(!(n==null||n===!1)){if(t){const r=t.replace(e,"");a+=`-${r}`}return e==="col"&&(a="v-"+a),e==="col"&&(n===""||n===!0)||(a+=`-${n}`),a.toLowerCase()}}const MXe=["auto","start","end","center","baseline","stretch"],OXe=it({cols:{type:[Boolean,String,Number],default:!1},...j7,offset:{type:[String,Number],default:null},...q7,order:{type:[String,Number],default:null},...Y7,alignSelf:{type:String,default:null,validator:e=>MXe.includes(e)},...tn(),...Nn()},"VCol"),HXe=yt()({name:"VCol",props:OXe(),setup(e,t){let{slots:n}=t;const a=ae(()=>{const r=[];let s;for(s in ON)ON[s].forEach(i=>{const c=e[i],A=LXe(s,i,c);A&&r.push(A)});const o=r.some(i=>i.startsWith("v-col-"));return r.push({"v-col":!o||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),r});return()=>au(e.tag,{class:[a.value,e.class],style:e.style},n.default?.())}}),L4=["start","end","center"],X7=["space-between","space-around","space-evenly"];function M4(e,t){return sw.reduce((n,a)=>{const r=e+$u(a);return n[r]=t(),n},{})}const $Xe=[...L4,"baseline","stretch"],J7=e=>$Xe.includes(e),Z7=M4("align",()=>({type:String,default:null,validator:J7})),QXe=[...L4,...X7],eG=e=>QXe.includes(e),tG=M4("justify",()=>({type:String,default:null,validator:eG})),GXe=[...L4,...X7,"stretch"],nG=e=>GXe.includes(e),aG=M4("alignContent",()=>({type:String,default:null,validator:nG})),HN={align:Object.keys(Z7),justify:Object.keys(tG),alignContent:Object.keys(aG)},zXe={align:"align",justify:"justify",alignContent:"align-content"};function KXe(e,t,n){let a=zXe[e];if(n!=null){if(t){const r=t.replace(e,"");a+=`-${r}`}return a+=`-${n}`,a.toLowerCase()}}const WXe=it({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:J7},...Z7,justify:{type:String,default:null,validator:eG},...tG,alignContent:{type:String,default:null,validator:nG},...aG,...tn(),...Nn()},"VRow"),jXe=yt()({name:"VRow",props:WXe(),setup(e,t){let{slots:n}=t;const a=ae(()=>{const r=[];let s;for(s in HN)HN[s].forEach(o=>{const i=e[o],c=KXe(s,o,i);c&&r.push(c)});return r.push({"v-row--no-gutters":e.noGutters,"v-row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),r});return()=>au(e.tag,{class:["v-row",a.value,e.class],style:e.style},n.default?.())}}),rG=Gc("v-spacer","div","VSpacer"),sG=it({active:{type:[String,Array],default:void 0},controlHeight:[Number,String],disabled:{type:[Boolean,String,Array],default:null},nextIcon:{type:An,default:"$next"},prevIcon:{type:An,default:"$prev"},modeIcon:{type:An,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),vB=yt()({name:"VDatePickerControls",props:sG(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,t){let{emit:n}=t;const{t:a}=Qa(),r=ae(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),s=ae(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),o=ae(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),i=ae(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function c(){n("click:prev")}function A(){n("click:next")}function d(){n("click:year")}function f(){n("click:month")}return St(()=>v("div",{class:ct(["v-date-picker-controls"]),style:{"--v-date-picker-controls-height":Yt(e.controlHeight)}},[l(Jn,{class:"v-date-picker-controls__month-btn","data-testid":"month-btn",disabled:r.value,text:e.text,variant:"text",rounded:!0,onClick:f},null),l(Jn,{class:"v-date-picker-controls__mode-btn","data-testid":"year-btn",disabled:s.value,density:"comfortable",icon:e.modeIcon,variant:"text","aria-label":a("$vuetify.datePicker.ariaLabel.selectYear"),onClick:d},null),l(rG,null,null),v("div",{class:"v-date-picker-controls__month"},[l(Jn,{"data-testid":"prev-month",disabled:o.value,density:"comfortable",icon:e.prevIcon,variant:"text","aria-label":a("$vuetify.datePicker.ariaLabel.previousMonth"),onClick:c},null),l(Jn,{"data-testid":"next-month",disabled:i.value,icon:e.nextIcon,density:"comfortable",variant:"text","aria-label":a("$vuetify.datePicker.ariaLabel.nextMonth"),onClick:A},null)])])),{}}}),qXe=it({appendIcon:An,color:String,header:String,transition:String,onClick:Ns()},"VDatePickerHeader"),hB=yt()({name:"VDatePickerHeader",props:qXe(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,t){let{emit:n,slots:a}=t;const{backgroundColorClasses:r,backgroundColorStyles:s}=Fa(()=>e.color);function o(){n("click")}function i(){n("click:append")}return St(()=>{const c=!!(a.default||e.header),A=!!(a.append||e.appendIcon);return v("div",{class:ct(["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},r.value]),style:Rt(s.value),onClick:o},[a.prepend&&v("div",{key:"prepend",class:"v-date-picker-header__prepend"},[a.prepend()]),c&&l(po,{key:"content",name:e.transition},{default:()=>[v("div",{key:e.header,class:"v-date-picker-header__content"},[a.default?.()??e.header])]}),A&&v("div",{class:"v-date-picker-header__append"},[a.append?l(Ln,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>[a.append?.()]}):l(Jn,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:i},null)])])}),{}}}),YXe=it({allowedDates:[Array,Function],disabled:{type:Boolean,default:null},displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]},weeksInMonth:{type:String,default:"dynamic"},firstDayOfWeek:{type:[Number,String],default:void 0},weekdayFormat:String},"calendar");function XXe(e){const t=vg(),n=ln(e,"modelValue",[],h=>pr(h).map(p=>t.date(p))),a=ae(()=>e.displayValue?t.date(e.displayValue):n.value.length>0?t.date(n.value[0]):e.min?t.date(e.min):Array.isArray(e.allowedDates)?t.date(e.allowedDates[0]):t.date()),r=ln(e,"year",void 0,h=>{const p=h!=null?Number(h):t.getYear(a.value);return t.startOfYear(t.setYear(t.date(),p))},h=>t.getYear(h)),s=ln(e,"month",void 0,h=>{const p=h!=null?Number(h):t.getMonth(a.value),y=t.setYear(t.startOfMonth(t.date()),t.getYear(r.value));return t.setMonth(y,p)},h=>t.getMonth(h)),o=ae(()=>{const h=t.toJsDate(t.startOfWeek(t.date(),e.firstDayOfWeek)).getDay();return t.getWeekdays(e.firstDayOfWeek,e.weekdayFormat).filter((p,y)=>e.weekdays.includes((y+h)%7))}),i=ae(()=>{const h=t.getWeekArray(s.value,e.firstDayOfWeek),p=h.flat(),y=42;if(e.weeksInMonth==="static"&&p.length<y){const g=p[p.length-1];let w=[];for(let b=1;b<=y-p.length;b++)w.push(t.addDays(g,b)),b%7===0&&(h.push(w),w=[])}return h});function c(h,p){return h.filter(y=>e.weekdays.includes(t.toJsDate(y).getDay())).map((y,g)=>{const w=t.toISO(y),b=!t.isSameMonth(y,s.value),x=t.isSameDay(y,t.startOfMonth(s.value)),T=t.isSameDay(y,t.endOfMonth(s.value)),F=t.isSameDay(y,s.value),k=e.weekdays.length;return{date:y,formatted:t.format(y,"keyboardDate"),isAdjacent:b,isDisabled:m(y),isEnd:T,isHidden:b&&!e.showAdjacentMonths,isSame:F,isSelected:n.value.some(S=>t.isSameDay(y,S)),isStart:x,isToday:t.isSameDay(y,p),isWeekEnd:g%k===k-1,isWeekStart:g%k===0,isoDate:w,localized:t.format(y,"dayOfMonth"),month:t.getMonth(y),year:t.getYear(y)}})}const A=ae(()=>{const h=t.startOfWeek(a.value,e.firstDayOfWeek),p=[];for(let g=0;g<=6;g++)p.push(t.addDays(h,g));const y=t.date();return c(p,y)}),d=ae(()=>{const h=i.value.flat(),p=t.date();return c(h,p)}),f=ae(()=>i.value.map(h=>h.length?t.getWeek(h[0],e.firstDayOfWeek):null));function m(h){if(e.disabled)return!0;const p=t.date(h);return e.min&&t.isBefore(t.endOfDay(p),t.date(e.min))||e.max&&t.isAfter(p,t.date(e.max))?!0:Array.isArray(e.allowedDates)&&e.allowedDates.length>0?!e.allowedDates.some(y=>t.isSameDay(t.date(y),p)):typeof e.allowedDates=="function"?!e.allowedDates(p):!1}return{displayValue:a,daysInMonth:d,daysInWeek:A,genDays:c,model:n,weeksInMonth:i,weekdayLabels:o,weekNumbers:f}}const oG=it({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...$a(YXe(),["displayValue"])},"VDatePickerMonth"),pB=yt()({name:"VDatePickerMonth",props:oG(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const r=V(),{t:s}=Qa(),{daysInMonth:o,model:i,weekNumbers:c,weekdayLabels:A}=XXe(e),d=vg(),f=Ht(),m=Ht(),h=Ht(!1),p=Xe(()=>h.value?e.reverseTransition:e.transition);e.multiple==="range"&&i.value.length>0&&(f.value=i.value[0],i.value.length>1&&(m.value=i.value[i.value.length-1]));const y=ae(()=>{const T=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return i.value.length>=T});Ke(o,(T,F)=>{F&&(h.value=d.isBefore(T[0].date,F[0].date))});function g(T){const F=d.startOfDay(T);if(i.value.length===0?f.value=void 0:i.value.length===1&&(f.value=i.value[0],m.value=void 0),!f.value)f.value=F,i.value=[f.value];else if(m.value)f.value=T,m.value=void 0,i.value=[f.value];else{if(d.isSameDay(F,f.value)){f.value=void 0,i.value=[];return}else d.isBefore(F,f.value)?(m.value=d.endOfDay(f.value),f.value=F):m.value=d.endOfDay(F);i.value=Lne(d,f.value,m.value)}}function w(T){const F=d.format(T.date,"fullDateWithWeekday"),k=T.isToday?"currentDate":"selectDate";return s(`$vuetify.datePicker.ariaLabel.${k}`,F)}function b(T){const F=i.value.findIndex(k=>d.isSameDay(k,T));if(F===-1)i.value=[...i.value,T];else{const k=[...i.value];k.splice(F,1),i.value=k}}function x(T){e.multiple==="range"?g(T):e.multiple?b(T):i.value=[T]}St(()=>v("div",{class:"v-date-picker-month",style:{"--v-date-picker-days-in-week":e.weekdays.length}},[e.showWeek&&v("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&v("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[M("")]),c.value.map(T=>v("div",{class:ct(["v-date-picker-month__day","v-date-picker-month__day--adjacent"])},[T]))]),l(po,{name:p.value},{default:()=>[v("div",{ref:r,key:o.value[0].date?.toString(),class:"v-date-picker-month__days"},[!e.hideWeekdays&&A.value.map(T=>v("div",{class:ct(["v-date-picker-month__day","v-date-picker-month__weekday"])},[T])),o.value.map((T,F)=>{const k={props:{class:"v-date-picker-month__day-btn",color:T.isSelected||T.isToday?e.color:void 0,disabled:T.isDisabled,icon:!0,ripple:!1,text:T.localized,variant:T.isSelected?"flat":T.isToday?"outlined":"text","aria-label":w(T),"aria-current":T.isToday?"date":void 0,onClick:()=>x(T.date)},item:T,i:F};return y.value&&!T.isSelected&&(T.isDisabled=!0),v("div",{class:ct(["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":T.isAdjacent,"v-date-picker-month__day--hide-adjacent":T.isHidden,"v-date-picker-month__day--selected":T.isSelected,"v-date-picker-month__day--week-end":T.isWeekEnd,"v-date-picker-month__day--week-start":T.isWeekStart}]),"data-v-date":T.isDisabled?void 0:T.isoDate},[(e.showAdjacentMonths||!T.isAdjacent)&&(a.day?.(k)??l(Jn,k.props,null))])})])]})]))}}),iG=it({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number,allowedMonths:[Array,Function]},"VDatePickerMonths"),gB=yt()({name:"VDatePickerMonths",props:iG(),emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const r=vg(),s=ln(e,"modelValue"),o=ae(()=>{let c=r.startOfYear(r.date());return e.year&&(c=r.setYear(c,e.year)),Bi(12).map(A=>{const d=r.format(c,"monthShort"),f=r.format(c,"month"),m=!!(!i(A)||e.min&&r.isAfter(r.startOfMonth(r.date(e.min)),c)||e.max&&r.isAfter(c,r.startOfMonth(r.date(e.max))));return c=r.getNextMonth(c),{isDisabled:m,text:d,label:f,value:A}})});_r(()=>{s.value=s.value??r.getMonth(r.date())});function i(c){return Array.isArray(e.allowedMonths)&&e.allowedMonths.length?e.allowedMonths.includes(c):typeof e.allowedMonths=="function"?e.allowedMonths(c):!0}return St(()=>v("div",{class:"v-date-picker-months",style:{height:Yt(e.height)}},[v("div",{class:"v-date-picker-months__content"},[o.value.map((c,A)=>{const d={active:s.value===A,ariaLabel:c.label,color:s.value===A?e.color:void 0,disabled:c.isDisabled,rounded:!0,text:c.text,variant:s.value===c.value?"flat":"text",onClick:()=>f(A)};function f(m){if(s.value===m){n("update:modelValue",s.value);return}s.value=m}return a.month?.({month:c,i:A,props:d})??l(Jn,Ue({key:"month"},d),null)})])])),{}}}),lG=it({color:String,height:[String,Number],min:null,max:null,modelValue:Number,allowedYears:[Array,Function]},"VDatePickerYears"),yB=yt()({name:"VDatePickerYears",props:lG(),directives:{vIntersect:Xl},emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const r=vg(),s=ln(e,"modelValue"),o=ae(()=>{const d=r.getYear(r.date());let f=d-100,m=d+52;e.min&&(f=r.getYear(r.date(e.min))),e.max&&(m=r.getYear(r.date(e.max)));let h=r.startOfYear(r.date());return h=r.setYear(h,f),Bi(m-f+1,f).map(p=>{const y=r.format(h,"year");return h=r.setYear(h,r.getYear(h)+1),{text:y,value:p,isDisabled:!A(p)}})});_r(()=>{s.value=s.value??r.getYear(r.date())});const i=B_();function c(){i.el?.focus(),i.el?.scrollIntoView({block:"center"})}function A(d){return Array.isArray(e.allowedYears)&&e.allowedYears.length?e.allowedYears.includes(d):typeof e.allowedYears=="function"?e.allowedYears(d):!0}return St(()=>ma(v("div",{class:"v-date-picker-years",style:{height:Yt(e.height)}},[v("div",{class:"v-date-picker-years__content"},[o.value.map((d,f)=>{const m={ref:s.value===d.value?i:void 0,active:s.value===d.value,color:s.value===d.value?e.color:void 0,rounded:!0,text:d.text,disabled:d.isDisabled,variant:s.value===d.value?"flat":"text",onClick:()=>{if(s.value===d.value){n("update:modelValue",s.value);return}s.value=d.value}};return a.year?.({year:d,i:f,props:m})??l(Jn,Ue({key:"month"},m),null)})])]),[[Xl,{handler:c},null,{once:!0}]])),{}}}),JXe=it({header:{type:String,default:"$vuetify.datePicker.header"},headerColor:String,...sG(),...oG({weeksInMonth:"static"}),...$a(iG(),["modelValue"]),...$a(lG(),["modelValue"]),...ab({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),ZXe=yt()({name:"VDatePicker",props:JXe(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const r=vg(),{t:s}=Qa(),{rtlClasses:o}=Zr(),i=ln(e,"modelValue",void 0,ue=>pr(ue).map(ne=>r.date(ne)),ue=>e.multiple?ue:ue[0]),c=ln(e,"viewMode"),A=ae(()=>{const ue=r.date(e.min);return e.min&&r.isValid(ue)?ue:null}),d=ae(()=>{const ue=r.date(e.max);return e.max&&r.isValid(ue)?ue:null}),f=ae(()=>{const ue=r.date();let ne=ue;return i.value?.[0]?ne=r.date(i.value[0]):A.value&&r.isBefore(ue,A.value)?ne=A.value:d.value&&r.isAfter(ue,d.value)&&(ne=d.value),ne&&r.isValid(ne)?ne:ue}),m=Xe(()=>e.headerColor??e.color),h=ln(e,"month"),p=ae({get:()=>Number(h.value??r.getMonth(r.startOfMonth(f.value))),set:ue=>h.value=ue}),y=ln(e,"year"),g=ae({get:()=>Number(y.value??r.getYear(r.startOfYear(r.setMonth(f.value,p.value)))),set:ue=>y.value=ue}),w=Ht(!1),b=ae(()=>e.multiple&&i.value.length>1?s("$vuetify.datePicker.itemsSelected",i.value.length):i.value[0]&&r.isValid(i.value[0])?r.format(r.date(i.value[0]),"normalDateWithWeekday"):s(e.header)),x=ae(()=>{let ue=r.date();return ue=r.setDate(ue,1),ue=r.setMonth(ue,p.value),ue=r.setYear(ue,g.value),r.format(ue,"monthAndYear")}),T=Xe(()=>`date-picker-header${w.value?"-reverse":""}-transition`),F=ae(()=>{if(e.disabled)return!0;const ue=[];if(c.value!=="month")ue.push("prev","next");else{let ne=r.date();if(ne=r.startOfMonth(ne),ne=r.setMonth(ne,p.value),ne=r.setYear(ne,g.value),A.value){const Y=r.addDays(r.startOfMonth(ne),-1);r.isAfter(A.value,Y)&&ue.push("prev")}if(d.value){const Y=r.addDays(r.endOfMonth(ne),1);r.isAfter(Y,d.value)&&ue.push("next")}}return ue}),k=ae(()=>e.allowedYears||C),S=ae(()=>e.allowedMonths||D);function E(ue,ne){const Y=e.allowedDates;if(typeof Y!="function")return!0;const te=r.getDiff(ne,ue,"days");for(let L=0;L<te;L++)if(Y(r.addDays(ue,L)))return!0;return!1}function C(ue){if(typeof e.allowedDates=="function"){const ne=r.parseISO(`${ue}-01-01`);return E(ne,r.endOfYear(ne))}if(Array.isArray(e.allowedDates)&&e.allowedDates.length){for(const ne of e.allowedDates)if(r.getYear(r.date(ne))===ue)return!0;return!1}return!0}function D(ue){if(typeof e.allowedDates=="function"){const ne=String(ue+1).padStart(2,"0"),Y=r.parseISO(`${g.value}-${ne}-01`);return E(Y,r.endOfMonth(Y))}if(Array.isArray(e.allowedDates)&&e.allowedDates.length){for(const ne of e.allowedDates)if(r.getYear(r.date(ne))===g.value&&r.getMonth(r.date(ne))===ue)return!0;return!1}return!0}function P(){p.value<11?p.value++:(g.value++,p.value=0,J()),j()}function O(){p.value>0?p.value--:(g.value--,p.value=11,J()),j()}function H(){c.value="month"}function ie(){c.value=c.value==="months"?"month":"months"}function Ae(){c.value=c.value==="year"?"month":"year"}function j(){c.value==="months"&&ie()}function J(){c.value==="year"&&Ae()}return Ke(i,(ue,ne)=>{const Y=pr(ne),te=pr(ue);if(!te.length)return;const L=r.date(Y[Y.length-1]),N=r.date(te[te.length-1]),q=r.getMonth(N),Q=r.getYear(N);q!==p.value&&(p.value=q,j()),Q!==g.value&&(g.value=Q,J()),w.value=r.isBefore(L,N)}),St(()=>{const ue=Jv.filterProps(e),ne=vB.filterProps(e),Y=hB.filterProps(e),te=pB.filterProps(e),L=$a(gB.filterProps(e),["modelValue"]),N=$a(yB.filterProps(e),["modelValue"]),q={color:m.value,header:b.value,transition:T.value};return l(Jv,Ue(ue,{color:m.value,class:["v-date-picker",`v-date-picker--${c.value}`,{"v-date-picker--show-week":e.showWeek},o.value,e.class],style:e.style}),{title:()=>a.title?.()??v("div",{class:"v-date-picker__title"},[s(e.title)]),header:()=>a.header?l(Ln,{defaults:{VDatePickerHeader:{...q}}},{default:()=>[a.header?.(q)]}):l(hB,Ue({key:"header"},Y,q,{onClick:c.value!=="month"?H:void 0}),{prepend:a.prepend,append:a.append}),default:()=>v(We,null,[l(vB,Ue(ne,{disabled:F.value,text:x.value,"onClick:next":P,"onClick:prev":O,"onClick:month":ie,"onClick:year":Ae}),null),l(Y0,{hideOnLeave:!0},{default:()=>[c.value==="months"?l(gB,Ue({key:"date-picker-months"},L,{modelValue:p.value,"onUpdate:modelValue":[Q=>p.value=Q,j],min:A.value,max:d.value,year:g.value,allowedMonths:S.value}),{month:a.month}):c.value==="year"?l(yB,Ue({key:"date-picker-years"},N,{modelValue:g.value,"onUpdate:modelValue":[Q=>g.value=Q,J],min:A.value,max:d.value,allowedYears:k.value}),{year:a.year}):l(pB,Ue({key:"date-picker-month"},te,{modelValue:i.value,"onUpdate:modelValue":Q=>i.value=Q,month:p.value,"onUpdate:month":[Q=>p.value=Q,j],year:g.value,"onUpdate:year":[Q=>g.value=Q,J],min:A.value,max:d.value}),{day:a.day})]})]),actions:a.actions})}),{}}}),eJe=it({actionText:String,bgColor:String,color:String,icon:An,image:String,justify:{type:String,default:"center"},headline:String,title:String,text:String,textWidth:{type:[Number,String],default:500},href:String,to:String,...tn(),...Lr(),...Yu({size:void 0}),...la()},"VEmptyState"),tJe=yt()({name:"VEmptyState",props:eJe(),emits:{"click:action":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const{themeClasses:r}=ka(e),{backgroundColorClasses:s,backgroundColorStyles:o}=Fa(()=>e.bgColor),{dimensionStyles:i}=Mr(e),{displayClasses:c}=dl();function A(d){n("click:action",d)}return St(()=>{const d=!!(a.actions||e.actionText),f=!!(a.headline||e.headline),m=!!(a.title||e.title),h=!!(a.text||e.text),p=!!(a.media||e.image||e.icon),y=e.size||(e.image?200:96);return v("div",{class:ct(["v-empty-state",{[`v-empty-state--${e.justify}`]:!0},r.value,s.value,c.value,e.class]),style:Rt([o.value,i.value,e.style])},[p&&v("div",{key:"media",class:"v-empty-state__media"},[a.media?l(Ln,{key:"media-defaults",defaults:{VImg:{src:e.image,height:y},VIcon:{size:y,icon:e.icon}}},{default:()=>[a.media()]}):v(We,null,[e.image?l(Oc,{key:"image",src:e.image,height:y},null):e.icon?l(Ea,{key:"icon",color:e.color,size:y,icon:e.icon},null):void 0])]),f&&v("div",{key:"headline",class:"v-empty-state__headline"},[a.headline?.()??e.headline]),m&&v("div",{key:"title",class:"v-empty-state__title"},[a.title?.()??e.title]),h&&v("div",{key:"text",class:"v-empty-state__text",style:{maxWidth:Yt(e.textWidth)}},[a.text?.()??e.text]),a.default&&v("div",{key:"content",class:"v-empty-state__content"},[a.default()]),d&&v("div",{key:"actions",class:"v-empty-state__actions"},[l(Ln,{defaults:{VBtn:{class:"v-empty-state__action-btn",color:e.color??"surface-variant",href:e.href,text:e.actionText,to:e.to}}},{default:()=>[a.actions?.({props:{onClick:A}})??l(Jn,{onClick:A},null)]})])])}),{}}}),sg=Symbol.for("vuetify:v-expansion-panel"),uG=it({...tn(),...y4()},"VExpansionPanelText"),_B=yt()({name:"VExpansionPanelText",props:uG(),setup(e,t){let{slots:n}=t;const a=Tn(sg);if(!a)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:r,onAfterLeave:s}=_4(e,a.isSelected);return St(()=>l(jw,{onAfterLeave:s},{default:()=>[ma(v("div",{class:ct(["v-expansion-panel-text",e.class]),style:Rt(e.style)},[n.default&&r.value&&v("div",{class:"v-expansion-panel-text__wrapper"},[n.default?.()])]),[[ci,a.isSelected.value]])]})),{}}}),cG=it({color:String,expandIcon:{type:An,default:"$expand"},collapseIcon:{type:An,default:"$collapse"},hideActions:Boolean,focusable:Boolean,static:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...tn(),...Lr()},"VExpansionPanelTitle"),wB=yt()({name:"VExpansionPanelTitle",directives:{vRipple:Co},props:cG(),setup(e,t){let{slots:n}=t;const a=Tn(sg);if(!a)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:r,backgroundColorStyles:s}=Fa(()=>e.color),{dimensionStyles:o}=Mr(e),i=ae(()=>({collapseIcon:e.collapseIcon,disabled:a.disabled.value,expanded:a.isSelected.value,expandIcon:e.expandIcon,readonly:e.readonly})),c=Xe(()=>a.isSelected.value?e.collapseIcon:e.expandIcon);return St(()=>ma(v("button",{class:ct(["v-expansion-panel-title",{"v-expansion-panel-title--active":a.isSelected.value,"v-expansion-panel-title--focusable":e.focusable,"v-expansion-panel-title--static":e.static},r.value,e.class]),style:Rt([s.value,o.value,e.style]),type:"button",tabindex:a.disabled.value?-1:void 0,disabled:a.disabled.value,"aria-expanded":a.isSelected.value,onClick:e.readonly?void 0:a.toggle},[v("span",{class:"v-expansion-panel-title__overlay"},null),n.default?.(i.value),!e.hideActions&&l(Ln,{defaults:{VIcon:{icon:c.value}}},{default:()=>[v("span",{class:"v-expansion-panel-title__icon"},[n.actions?.(i.value)??l(Ea,null,null)])]})]),[[Co,e.ripple]])),{}}}),dG=it({title:String,text:String,bgColor:String,...es(),...nm(),...cr(),...Nn(),...cG(),...uG()},"VExpansionPanel"),nJe=yt()({name:"VExpansionPanel",props:dG(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const a=am(e,sg),{backgroundColorClasses:r,backgroundColorStyles:s}=Fa(()=>e.bgColor),{elevationClasses:o}=Ss(e),{roundedClasses:i}=xr(e),c=Xe(()=>a?.disabled.value||e.disabled),A=ae(()=>a.group.items.value.reduce((m,h,p)=>(a.group.selected.value.includes(h.id)&&m.push(p),m),[])),d=ae(()=>{const m=a.group.items.value.findIndex(h=>h.id===a.id);return!a.isSelected.value&&A.value.some(h=>h-m===1)}),f=ae(()=>{const m=a.group.items.value.findIndex(h=>h.id===a.id);return!a.isSelected.value&&A.value.some(h=>h-m===-1)});return Ha(sg,a),St(()=>{const m=!!(n.text||e.text),h=!!(n.title||e.title),p=wB.filterProps(e),y=_B.filterProps(e);return l(e.tag,{class:ct(["v-expansion-panel",{"v-expansion-panel--active":a.isSelected.value,"v-expansion-panel--before-active":d.value,"v-expansion-panel--after-active":f.value,"v-expansion-panel--disabled":c.value},i.value,r.value,e.class]),style:Rt([s.value,e.style])},{default:()=>[v("div",{class:ct(["v-expansion-panel__shadow",...o.value])},null),l(Ln,{defaults:{VExpansionPanelTitle:{...p},VExpansionPanelText:{...y}}},{default:()=>[h&&l(wB,{key:"title"},{default:()=>[n.title?n.title():e.title]}),m&&l(_B,{key:"text"},{default:()=>[n.text?n.text():e.text]}),n.default?.()]})]})}),{groupItem:a}}}),aJe=["default","accordion","inset","popout"],rJe=it({flat:Boolean,...tm(),...Qc(dG(),["bgColor","collapseIcon","color","eager","elevation","expandIcon","focusable","hideActions","readonly","ripple","rounded","tile","static"]),...la(),...tn(),...Nn(),variant:{type:String,default:"default",validator:e=>aJe.includes(e)}},"VExpansionPanels"),sJe=yt()({name:"VExpansionPanels",props:rJe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{next:a,prev:r}=AA(e,sg),{themeClasses:s}=ka(e),o=Xe(()=>e.variant&&`v-expansion-panels--variant-${e.variant}`);return wr({VExpansionPanel:{bgColor:Xe(()=>e.bgColor),collapseIcon:Xe(()=>e.collapseIcon),color:Xe(()=>e.color),eager:Xe(()=>e.eager),elevation:Xe(()=>e.elevation),expandIcon:Xe(()=>e.expandIcon),focusable:Xe(()=>e.focusable),hideActions:Xe(()=>e.hideActions),readonly:Xe(()=>e.readonly),ripple:Xe(()=>e.ripple),rounded:Xe(()=>e.rounded),static:Xe(()=>e.static)}}),St(()=>l(e.tag,{class:ct(["v-expansion-panels",{"v-expansion-panels--flat":e.flat,"v-expansion-panels--tile":e.tile},s.value,o.value,e.class]),style:Rt(e.style)},{default:()=>[n.default?.({prev:r,next:a})]})),{next:a,prev:r}}}),oJe=it({app:Boolean,appear:Boolean,extended:Boolean,layout:Boolean,offset:Boolean,modelValue:{type:Boolean,default:!0},...$a(Xw({active:!0}),["location"]),...$f(),...Wc(),...lu({transition:"fab-transition"})},"VFab"),iJe=yt()({name:"VFab",props:oJe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=ln(e,"modelValue"),r=Ht(56),s=V(),{resizeRef:o}=Kl(f=>{f.length&&(r.value=f[0].target.clientHeight)}),i=Xe(()=>e.app||e.absolute),c=ae(()=>i.value?e.location?.split(" ").shift()??"bottom":!1),A=ae(()=>i.value?e.location?.split(" ")[1]??"end":!1);yo(()=>e.app,()=>{const f=Qf({id:e.name,order:ae(()=>parseInt(e.order,10)),position:c,layoutSize:ae(()=>e.layout?r.value+24:0),elementSize:ae(()=>r.value+24),active:ae(()=>e.app&&a.value),absolute:Xe(()=>e.absolute)});_r(()=>{s.value=f.layoutItemStyles.value})});const d=V();return St(()=>{const f=Jn.filterProps(e);return v("div",{ref:d,class:ct(["v-fab",{"v-fab--absolute":e.absolute,"v-fab--app":!!e.app,"v-fab--extended":e.extended,"v-fab--offset":e.offset,[`v-fab--${c.value}`]:i.value,[`v-fab--${A.value}`]:i.value},e.class]),style:Rt([e.app?{...s.value}:{height:e.absolute?"100%":"inherit"},e.style])},[v("div",{class:"v-fab__container"},[l(po,{appear:e.appear,transition:e.transition},{default:()=>[ma(l(Jn,Ue({ref:o},f,{active:void 0,location:void 0}),n),[[ci,e.active]])]})])])}),{}}});function lJe(){function e(n){return[...n.dataTransfer?.items??[]].filter(r=>r.kind==="file").map(r=>r.webkitGetAsEntry()).filter(Boolean).length>0||[...n.dataTransfer?.files??[]].length>0}async function t(n){const a=[],r=[...n.dataTransfer?.items??[]].filter(s=>s.kind==="file").map(s=>s.webkitGetAsEntry()).filter(Boolean);if(r.length)for(const s of r){const o=await AG(s,fG(".",s));a.push(...o.map(i=>i.file))}else a.push(...n.dataTransfer?.files??[]);return a}return{handleDrop:t,hasFilesOrFolders:e}}function AG(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new Promise((n,a)=>{e.isFile?e.file(s=>n([{file:s,path:t}]),a):e.isDirectory&&e.createReader().readEntries(async s=>{const o=[];for(const i of s)o.push(...await AG(i,fG(t,i)));n(o)})})}function fG(e,t){return t.isDirectory?`${e}/${t.name}`:e}const uJe=it({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},...qc({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>pr(e).every(t=>t!=null&&typeof t=="object")},...zg({clearable:!0})},"VFileInput"),cJe=yt()({name:"VFileInput",inheritAttrs:!1,props:uJe(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:r}=t;const{t:s}=Qa(),o=ln(e,"modelValue",e.modelValue,Ae=>pr(Ae),Ae=>!e.multiple&&Array.isArray(Ae)?Ae[0]:Ae),{isFocused:i,focus:c,blur:A}=jc(e),d=ae(()=>typeof e.showSize!="boolean"?e.showSize:void 0),f=ae(()=>(o.value??[]).reduce((Ae,j)=>{let{size:J=0}=j;return Ae+J},0)),m=ae(()=>JP(f.value,d.value)),h=ae(()=>(o.value??[]).map(Ae=>{const{name:j="",size:J=0}=Ae;return e.showSize?`${j} (${JP(J,d.value)})`:j})),p=ae(()=>{const Ae=o.value?.length??0;return e.showSize?s(e.counterSizeString,Ae,m.value):s(e.counterString,Ae)}),y=V(),g=V(),w=V(),b=Xe(()=>i.value||e.active),x=ae(()=>["plain","underlined"].includes(e.variant)),T=Ht(!1),{handleDrop:F,hasFilesOrFolders:k}=lJe();function S(){w.value!==document.activeElement&&w.value?.focus(),i.value||c()}function E(Ae){w.value?.click()}function C(Ae){a("mousedown:control",Ae)}function D(Ae){w.value?.click(),a("click:control",Ae)}function P(Ae){Ae.stopPropagation(),S(),xn(()=>{o.value=[],aw(e["onClick:clear"],Ae)})}function O(Ae){Ae.preventDefault(),Ae.stopImmediatePropagation(),T.value=!0}function H(Ae){Ae.preventDefault(),T.value=!1}async function ie(Ae){if(Ae.preventDefault(),Ae.stopImmediatePropagation(),T.value=!1,!w.value||!k(Ae))return;const j=new DataTransfer;for(const J of await F(Ae))j.items.add(J);w.value.files=j.files,w.value.dispatchEvent(new Event("change",{bubbles:!0}))}return Ke(o,Ae=>{(!Array.isArray(Ae)||!Ae.length)&&w.value&&(w.value.value="")}),St(()=>{const Ae=!!(r.counter||e.counter),j=!!(Ae||r.details),[J,ue]=iA(n),{modelValue:ne,...Y}=Zs.filterProps(e),te={...rA.filterProps(e),"onClick:clear":P};return l(Zs,Ue({ref:y,modelValue:e.multiple?o.value:o.value[0],class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--dragging":T.value,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":x.value},e.class],style:e.style,"onClick:prepend":E},J,Y,{centerAffix:!x.value,focused:i.value}),{...r,default:L=>{let{id:N,isDisabled:q,isDirty:Q,isReadonly:ee,isValid:z,hasDetails:X}=L;return l(rA,Ue({ref:g,prependIcon:e.prependIcon,onMousedown:C,onClick:D,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},te,{id:N.value,active:b.value||Q.value,dirty:Q.value||e.dirty,disabled:q.value,focused:i.value,details:X.value,error:z.value===!1,onDragover:O,onDrop:ie}),{...r,default:le=>{let{props:{class:re,...de}}=le;return v(We,null,[v("input",Ue({ref:w,type:"file",readonly:ee.value,disabled:q.value,multiple:e.multiple,name:e.name,onClick:G=>{G.stopPropagation(),ee.value&&G.preventDefault(),S()},onChange:G=>{if(!G.target)return;const Z=G.target;o.value=[...Z.files??[]]},onDragleave:H,onFocus:S,onBlur:A},de,ue),null),v("div",{class:ct(re)},[!!o.value?.length&&!e.hideInput&&(r.selection?r.selection({fileNames:h.value,totalBytes:f.value,totalBytesReadable:m.value}):e.chips?h.value.map(G=>l(kh,{key:G,size:"small",text:G},null)):h.value.join(", "))])])}})},details:j?L=>v(We,null,[r.details?.(L),Ae&&v(We,null,[v("span",null,null),l(Zw,{active:!!o.value?.length,value:p.value,disabled:e.disabled},r.counter)])]):void 0})}),Es({},y,g,w)}}),dJe=it({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...zo(),...tn(),...es(),...$f(),...cr(),...Nn({tag:"footer"}),...la()},"VFooter"),AJe=yt()({name:"VFooter",props:dJe(),setup(e,t){let{slots:n}=t;const a=V(),{themeClasses:r}=ka(e),{backgroundColorClasses:s,backgroundColorStyles:o}=Fa(()=>e.color),{borderClasses:i}=fi(e),{elevationClasses:c}=Ss(e),{roundedClasses:A}=xr(e),d=Ht(32),{resizeRef:f}=Kl(h=>{h.length&&(d.value=h[0].target.clientHeight)}),m=ae(()=>e.height==="auto"?d.value:parseInt(e.height,10));return yo(()=>e.app,()=>{const h=Qf({id:e.name,order:ae(()=>parseInt(e.order,10)),position:Xe(()=>"bottom"),layoutSize:m,elementSize:ae(()=>e.height==="auto"?void 0:m.value),active:Xe(()=>e.app),absolute:Xe(()=>e.absolute)});_r(()=>{a.value=h.layoutItemStyles.value})}),St(()=>l(e.tag,{ref:f,class:ct(["v-footer",r.value,s.value,i.value,c.value,A.value,e.class]),style:Rt([o.value,e.app?a.value:{height:Yt(e.height)},e.style])},n)),{}}}),fJe=it({...tn(),...xje()},"VForm"),mJe=yt()({name:"VForm",props:fJe(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,t){let{slots:n,emit:a}=t;const r=Cje(e),s=V();function o(c){c.preventDefault(),r.reset()}function i(c){const A=c,d=r.validate();A.then=d.then.bind(d),A.catch=d.catch.bind(d),A.finally=d.finally.bind(d),a("submit",A),A.defaultPrevented||d.then(f=>{let{valid:m}=f;m&&s.value?.submit()}),A.preventDefault()}return St(()=>v("form",{ref:s,class:ct(["v-form",e.class]),style:Rt(e.style),novalidate:!0,onReset:o,onSubmit:i},[n.default?.(r)])),Es(r,s)}}),vJe=it({disabled:Boolean,modelValue:{type:Boolean,default:null},...p4()},"VHover"),hJe=yt()({name:"VHover",props:vJe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=ln(e,"modelValue"),{runOpenDelay:r,runCloseDelay:s}=g4(e,o=>!e.disabled&&(a.value=o));return()=>n.default?.({isHovering:a.value,props:{onMouseenter:r,onMouseleave:s}})}}),pJe=it({color:String,direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},side:{type:String,default:"end",validator:e=>["start","end","both"].includes(e)},mode:{type:String,default:"intersect",validator:e=>["intersect","manual"].includes(e)},margin:[Number,String],loadMoreText:{type:String,default:"$vuetify.infiniteScroll.loadMore"},emptyText:{type:String,default:"$vuetify.infiniteScroll.empty"},...Lr(),...Nn()},"VInfiniteScroll"),$N=Ri({name:"VInfiniteScrollIntersect",props:{side:{type:String,required:!0},rootMargin:String},emits:{intersect:(e,t)=>!0},setup(e,t){let{emit:n}=t;const{intersectionRef:a,isIntersecting:r}=Vg();return Ke(r,async s=>{n("intersect",e.side,s)}),St(()=>v("div",{class:"v-infinite-scroll-intersect",style:{"--v-infinite-margin-size":e.rootMargin},ref:a},[M("")])),{}}}),gJe=yt()({name:"VInfiniteScroll",props:pJe(),emits:{load:e=>!0},setup(e,t){let{slots:n,emit:a}=t;const r=V(),s=Ht("ok"),o=Ht("ok"),i=ae(()=>Yt(e.margin)),c=Ht(!1);function A(k){if(!r.value)return;const S=e.direction==="vertical"?"scrollTop":"scrollLeft";r.value[S]=k}function d(){if(!r.value)return 0;const k=e.direction==="vertical"?"scrollTop":"scrollLeft";return r.value[k]}function f(){if(!r.value)return 0;const k=e.direction==="vertical"?"scrollHeight":"scrollWidth";return r.value[k]}function m(){if(!r.value)return 0;const k=e.direction==="vertical"?"clientHeight":"clientWidth";return r.value[k]}un(()=>{r.value&&(e.side==="start"?A(f()):e.side==="both"&&A(f()/2-m()/2))});function h(k,S){k==="start"?s.value=S:k==="end"?o.value=S:k==="both"&&(s.value=S,o.value=S)}function p(k){return k==="start"?s.value:o.value}let y=0;function g(k,S){c.value=S,c.value&&w(k)}function w(k){if(e.mode!=="manual"&&!c.value)return;const S=p(k);if(!r.value||["empty","loading"].includes(S))return;y=f(),h(k,"loading");function E(C){h(k,C),xn(()=>{C==="empty"||C==="error"||(C==="ok"&&k==="start"&&A(f()-y+d()),e.mode!=="manual"&&xn(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{w(k)})})})}))})}a("load",{side:k,done:E})}const{t:b}=Qa();function x(k,S){if(e.side!==k&&e.side!=="both")return;const E=()=>w(k),C={side:k,props:{onClick:E,color:e.color}};return S==="error"?n.error?.(C):S==="empty"?n.empty?.(C)??v("div",null,[b(e.emptyText)]):e.mode==="manual"?S==="loading"?n.loading?.(C)??l(kf,{indeterminate:!0,color:e.color},null):n["load-more"]?.(C)??l(Jn,{variant:"outlined",color:e.color,onClick:E},{default:()=>[b(e.loadMoreText)]}):n.loading?.(C)??l(kf,{indeterminate:!0,color:e.color},null)}const{dimensionStyles:T}=Mr(e);St(()=>{const k=e.tag,S=e.side==="start"||e.side==="both",E=e.side==="end"||e.side==="both",C=e.mode==="intersect";return l(k,{ref:r,class:ct(["v-infinite-scroll",`v-infinite-scroll--${e.direction}`,{"v-infinite-scroll--start":S,"v-infinite-scroll--end":E}]),style:Rt(T.value)},{default:()=>[v("div",{class:"v-infinite-scroll__side"},[x("start",s.value)]),S&&C&&l($N,{key:"start",side:"start",onIntersect:g,rootMargin:i.value},null),n.default?.(),E&&C&&l($N,{key:"end",side:"end",onIntersect:g,rootMargin:i.value},null),v("div",{class:"v-infinite-scroll__side"},[x("end",o.value)])]})});function F(k){const S=k??e.side;h(S,"ok"),xn(()=>{A(f()-y+d()),e.mode!=="manual"&&xn(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{S==="both"?(w("start"),w("end")):w(S)})})})})})}return{reset:F}}}),mG=Symbol.for("vuetify:v-item-group"),yJe=it({...tn(),...tm({selectedClass:"v-item--selected"}),...Nn(),...la()},"VItemGroup"),_Je=yt()({name:"VItemGroup",props:yJe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:a}=ka(e),{isSelected:r,select:s,next:o,prev:i,selected:c}=AA(e,mG);return()=>l(e.tag,{class:ct(["v-item-group",a.value,e.class]),style:Rt(e.style)},{default:()=>[n.default?.({isSelected:r,select:s,next:o,prev:i,selected:c.value})]})}}),wJe=yt()({name:"VItem",props:nm(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const{isSelected:a,select:r,toggle:s,selectedClass:o,value:i,disabled:c}=am(e,mG);return()=>n.default?.({isSelected:a.value,selectedClass:o.value,select:r,toggle:s,value:i.value,disabled:c.value})}}),bJe=it({color:String,...zo(),...tn(),...cr(),...Nn({tag:"kbd"}),...la(),...es()},"VKbd"),xJe=yt()({name:"VKbd",props:bJe(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=ka(e),{borderClasses:r}=fi(e),{roundedClasses:s}=xr(e),{backgroundColorClasses:o,backgroundColorStyles:i}=Fa(()=>e.color),{elevationClasses:c}=Ss(e);return St(()=>l(e.tag,{class:ct(["v-kbd",a.value,o.value,r.value,c.value,s.value,e.class]),style:Rt([i.value,e.style])},n)),{}}}),CJe=it({...tn(),...Lr(),...p6()},"VLayout"),SJe=yt()({name:"VLayout",props:CJe(),setup(e,t){let{slots:n}=t;const{layoutClasses:a,layoutStyles:r,getLayoutItem:s,items:o,layoutRef:i}=y6(e),{dimensionStyles:c}=Mr(e);return St(()=>v("div",{ref:i,class:ct([a.value,e.class]),style:Rt([c.value,r.value,e.style])},[n.default?.()])),{getLayoutItem:s,items:o}}}),EJe=it({position:{type:String,required:!0},size:{type:[Number,String],default:300},modelValue:Boolean,...tn(),...$f()},"VLayoutItem"),BJe=yt()({name:"VLayoutItem",props:EJe(),setup(e,t){let{slots:n}=t;const{layoutItemStyles:a}=Qf({id:e.name,order:ae(()=>parseInt(e.order,10)),position:Xe(()=>e.position),elementSize:Xe(()=>e.size),layoutSize:Xe(()=>e.size),active:Xe(()=>e.modelValue),absolute:Xe(()=>e.absolute)});return()=>v("div",{class:ct(["v-layout-item",e.class]),style:Rt([a.value,e.style])},[n.default?.()])}}),kJe=it({modelValue:Boolean,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},...tn(),...Lr(),...Nn(),...lu({transition:"fade-transition"})},"VLazy"),TJe=yt()({name:"VLazy",directives:{vIntersect:Xl},props:kJe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{dimensionStyles:a}=Mr(e),r=ln(e,"modelValue");function s(o){r.value||(r.value=o)}return St(()=>ma(l(e.tag,{class:ct(["v-lazy",e.class]),style:Rt([a.value,e.style])},{default:()=>[r.value&&l(po,{transition:e.transition,appear:!0},{default:()=>[n.default?.()]})]}),[[Xl,{handler:s,options:e.options},null]])),{}}}),IJe=it({locale:String,fallbackLocale:String,messages:Object,rtl:{type:Boolean,default:void 0},...tn()},"VLocaleProvider"),FJe=yt()({name:"VLocaleProvider",props:IJe(),setup(e,t){let{slots:n}=t;const{rtlClasses:a}=Zte(e);return St(()=>v("div",{class:ct(["v-locale-provider",a.value,e.class]),style:Rt(e.style)},[n.default?.()])),{}}}),PJe=it({scrollable:Boolean,...tn(),...Lr(),...Nn({tag:"main"})},"VMain"),DJe=yt()({name:"VMain",props:PJe(),setup(e,t){let{slots:n}=t;const{dimensionStyles:a}=Mr(e),{mainStyles:r}=g6(),{ssrBootStyles:s}=Zf();return St(()=>l(e.tag,{class:ct(["v-main",{"v-main--scrollable":e.scrollable},e.class]),style:Rt([r.value,s.value,a.value,e.style])},{default:()=>[e.scrollable?v("div",{class:"v-main__scroller"},[n.default?.()]):n.default?.()]})),{}}});function UJe(e){let{rootEl:t,isSticky:n,layoutItemStyles:a}=e;const r=Ht(!1),s=Ht(0),o=ae(()=>{const A=typeof r.value=="boolean"?"top":r.value;return[n.value?{top:"auto",bottom:"auto",height:void 0}:void 0,r.value?{[A]:Yt(s.value)}:{top:a.value.top}]});un(()=>{Ke(n,A=>{A?window.addEventListener("scroll",c,{passive:!0}):window.removeEventListener("scroll",c)},{immediate:!0})}),da(()=>{window.removeEventListener("scroll",c)});let i=0;function c(){const A=i>window.scrollY?"up":"down",d=t.value.getBoundingClientRect(),f=parseFloat(a.value.top??0),m=window.scrollY-Math.max(0,s.value-f),h=d.height+Math.max(s.value,f)-window.scrollY-window.innerHeight,p=parseFloat(getComputedStyle(t.value).getPropertyValue("--v-body-scroll-y"))||0;d.height<window.innerHeight-f?(r.value="top",s.value=f):A==="up"&&r.value==="bottom"||A==="down"&&r.value==="top"?(s.value=window.scrollY+d.top-p,r.value=!0):A==="down"&&h<=0?(s.value=0,r.value="bottom"):A==="up"&&m<=0&&(p?r.value!=="top"&&(s.value=-m+p+f,r.value="top"):(s.value=d.top+m,r.value="top")),i=window.scrollY}return{isStuck:r,stickyStyles:o}}const RJe=100,NJe=20;function QN(e){return(e<0?-1:1)*Math.sqrt(Math.abs(e))*1.41421356237}function GN(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let t=0;for(let n=e.length-1;n>0;n--){if(e[n].t===e[n-1].t)continue;const a=QN(t),r=(e[n].d-e[n-1].d)/(e[n].t-e[n-1].t);t+=(r-a)*Math.abs(r),n===e.length-1&&(t*=.5)}return QN(t)*1e3}function VJe(){const e={};function t(r){Array.from(r.changedTouches).forEach(s=>{(e[s.identifier]??(e[s.identifier]=new $8(NJe))).push([r.timeStamp,s])})}function n(r){Array.from(r.changedTouches).forEach(s=>{delete e[s.identifier]})}function a(r){const s=e[r]?.values().reverse();if(!s)throw new Error(`No samples for touch id ${r}`);const o=s[0],i=[],c=[];for(const A of s){if(o[0]-A[0]>RJe)break;i.push({t:A[0],d:A[1].clientX}),c.push({t:A[0],d:A[1].clientY})}return{x:GN(i),y:GN(c),get direction(){const{x:A,y:d}=this,[f,m]=[Math.abs(A),Math.abs(d)];return f>m&&A>=0?"right":f>m&&A<=0?"left":m>f&&d>=0?"down":m>f&&d<=0?"up":LJe()}}}return{addMovement:t,endTouch:n,getVelocity:a}}function LJe(){throw new Error}function MJe(e){let{el:t,isActive:n,isTemporary:a,width:r,touchless:s,position:o}=e;un(()=>{window.addEventListener("touchstart",b,{passive:!0}),window.addEventListener("touchmove",x,{passive:!1}),window.addEventListener("touchend",T,{passive:!0})}),da(()=>{window.removeEventListener("touchstart",b),window.removeEventListener("touchmove",x),window.removeEventListener("touchend",T)});const i=ae(()=>["left","right"].includes(o.value)),{addMovement:c,endTouch:A,getVelocity:d}=VJe();let f=!1;const m=Ht(!1),h=Ht(0),p=Ht(0);let y;function g(k,S){return(o.value==="left"?k:o.value==="right"?document.documentElement.clientWidth-k:o.value==="top"?k:o.value==="bottom"?document.documentElement.clientHeight-k:Gm())-(S?r.value:0)}function w(k){let S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const E=o.value==="left"?(k-p.value)/r.value:o.value==="right"?(document.documentElement.clientWidth-k-p.value)/r.value:o.value==="top"?(k-p.value)/r.value:o.value==="bottom"?(document.documentElement.clientHeight-k-p.value)/r.value:Gm();return S?tr(E):E}function b(k){if(s.value)return;const S=k.changedTouches[0].clientX,E=k.changedTouches[0].clientY,C=25,D=o.value==="left"?S<C:o.value==="right"?S>document.documentElement.clientWidth-C:o.value==="top"?E<C:o.value==="bottom"?E>document.documentElement.clientHeight-C:Gm(),P=n.value&&(o.value==="left"?S<r.value:o.value==="right"?S>document.documentElement.clientWidth-r.value:o.value==="top"?E<r.value:o.value==="bottom"?E>document.documentElement.clientHeight-r.value:Gm());(D||P||n.value&&a.value)&&(y=[S,E],p.value=g(i.value?S:E,n.value),h.value=w(i.value?S:E),f=p.value>-20&&p.value<80,A(k),c(k))}function x(k){const S=k.changedTouches[0].clientX,E=k.changedTouches[0].clientY;if(f){if(!k.cancelable){f=!1;return}const D=Math.abs(S-y[0]),P=Math.abs(E-y[1]);(i.value?D>P&&D>3:P>D&&P>3)?(m.value=!0,f=!1):(i.value?P:D)>3&&(f=!1)}if(!m.value)return;k.preventDefault(),c(k);const C=w(i.value?S:E,!1);h.value=Math.max(0,Math.min(1,C)),C>1?p.value=g(i.value?S:E,!0):C<0&&(p.value=g(i.value?S:E,!1))}function T(k){if(f=!1,!m.value)return;c(k),m.value=!1;const S=d(k.changedTouches[0].identifier),E=Math.abs(S.x),C=Math.abs(S.y);(i.value?E>C&&E>400:C>E&&C>3)?n.value=S.direction===({left:"right",right:"left",top:"down",bottom:"up"}[o.value]||Gm()):n.value=h.value>.5}const F=ae(()=>m.value?{transform:o.value==="left"?`translateX(calc(-100% + ${h.value*r.value}px))`:o.value==="right"?`translateX(calc(100% - ${h.value*r.value}px))`:o.value==="top"?`translateY(calc(-100% + ${h.value*r.value}px))`:o.value==="bottom"?`translateY(calc(100% - ${h.value*r.value}px))`:Gm(),transition:"none"}:void 0);return yo(m,()=>{const k=t.value?.style.transform??null,S=t.value?.style.transition??null;_r(()=>{t.value?.style.setProperty("transform",F.value?.transform||"none"),t.value?.style.setProperty("transition",F.value?.transition||null)}),cs(()=>{t.value?.style.setProperty("transform",k),t.value?.style.setProperty("transition",S)})}),{isDragging:m,dragProgress:h,dragStyles:F}}function Gm(){throw new Error}const OJe=["start","end","left","right","top","bottom"],HJe=it({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>OJe.includes(e)},sticky:Boolean,...zo(),...tn(),...p4(),...Hf({mobile:null}),...es(),...$f(),...cr(),...Nn({tag:"nav"}),...la()},"VNavigationDrawer"),$Je=yt()({name:"VNavigationDrawer",props:HJe(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:r}=t;const{isRtl:s}=Zr(),{themeClasses:o}=ka(e),{borderClasses:i}=fi(e),{backgroundColorClasses:c,backgroundColorStyles:A}=Fa(()=>e.color),{elevationClasses:d}=Ss(e),{displayClasses:f,mobile:m}=dl(e),{roundedClasses:h}=xr(e),p=iQ(),y=ln(e,"modelValue",null,Y=>!!Y),{ssrBootStyles:g}=Zf(),{scopeId:w}=sm(),b=V(),x=Ht(!1),{runOpenDelay:T,runCloseDelay:F}=g4(e,Y=>{x.value=Y}),k=ae(()=>e.rail&&e.expandOnHover&&x.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),S=ae(()=>SS(e.location,s.value)),E=Xe(()=>e.persistent),C=ae(()=>!e.permanent&&(m.value||e.temporary)),D=ae(()=>e.sticky&&!C.value&&S.value!=="bottom");yo(()=>e.expandOnHover&&e.rail!=null,()=>{Ke(x,Y=>a("update:rail",!Y))}),yo(()=>!e.disableResizeWatcher,()=>{Ke(C,Y=>!e.permanent&&xn(()=>y.value=!Y))}),yo(()=>!e.disableRouteWatcher&&!!p,()=>{Ke(p.currentRoute,()=>C.value&&(y.value=!1))}),Ke(()=>e.permanent,Y=>{Y&&(y.value=!0)}),e.modelValue==null&&!C.value&&(y.value=e.permanent||!m.value);const{isDragging:P,dragProgress:O}=MJe({el:b,isActive:y,isTemporary:C,width:k,touchless:Xe(()=>e.touchless),position:S}),H=ae(()=>{const Y=C.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):k.value;return P.value?Y*O.value:Y}),{layoutItemStyles:ie,layoutItemScrimStyles:Ae}=Qf({id:e.name,order:ae(()=>parseInt(e.order,10)),position:S,layoutSize:H,elementSize:k,active:ah(y),disableTransitions:Xe(()=>P.value),absolute:ae(()=>e.absolute||D.value&&typeof j.value!="string")}),{isStuck:j,stickyStyles:J}=UJe({rootEl:b,isSticky:D,layoutItemStyles:ie}),ue=Fa(()=>typeof e.scrim=="string"?e.scrim:null),ne=ae(()=>({...P.value?{opacity:O.value*.2,transition:"none"}:void 0,...Ae.value}));return wr({VList:{bgColor:"transparent"}}),St(()=>{const Y=r.image||e.image;return v(We,null,[l(e.tag,Ue({ref:b,onMouseenter:T,onMouseleave:F,class:["v-navigation-drawer",`v-navigation-drawer--${S.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":x.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":C.value,"v-navigation-drawer--persistent":E.value,"v-navigation-drawer--active":y.value,"v-navigation-drawer--sticky":D.value},o.value,c.value,i.value,f.value,d.value,h.value,e.class],style:[A.value,ie.value,g.value,J.value,e.style]},w,n),{default:()=>[Y&&v("div",{key:"image",class:"v-navigation-drawer__img"},[r.image?l(Ln,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},r.image):l(Oc,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),r.prepend&&v("div",{class:"v-navigation-drawer__prepend"},[r.prepend?.()]),v("div",{class:"v-navigation-drawer__content"},[r.default?.()]),r.append&&v("div",{class:"v-navigation-drawer__append"},[r.append?.()])]}),l(zd,{name:"fade-transition"},{default:()=>[C.value&&(P.value||y.value)&&!!e.scrim&&v("div",Ue({class:["v-navigation-drawer__scrim",ue.backgroundColorClasses.value],style:[ne.value,ue.backgroundColorStyles.value],onClick:()=>{E.value||(y.value=!1)}},w),null)]})])}),{isStuck:j}}}),QJe=Ri({name:"VNoSsr",setup(e,t){let{slots:n}=t;const a=XQ();return()=>a.value&&n.default?.()}}),GJe=50,zJe=500;function KJe(e){let{toggleUpDown:t}=e,n=-1,a=-1;cs(s);function r(i){s(),o(i),window.addEventListener("pointerup",s),document.addEventListener("blur",s),n=window.setTimeout(()=>{a=window.setInterval(()=>o(i),GJe)},zJe)}function s(){window.clearTimeout(n),window.clearInterval(a),window.removeEventListener("pointerup",s),document.removeEventListener("blur",s)}function o(i){t(i==="up")}return{holdStart:r,holdStop:s}}const WJe=it({controlVariant:{type:String,default:"default"},inset:Boolean,hideInput:Boolean,modelValue:{type:Number,default:null},min:{type:Number,default:Number.MIN_SAFE_INTEGER},max:{type:Number,default:Number.MAX_SAFE_INTEGER},step:{type:Number,default:1},precision:{type:Number,default:0},minFractionDigits:{type:Number,default:null},decimalSeparator:{type:String,validator:e=>!e||e.length===1},...$a(Kg(),["modelValue","validationValue"])},"VNumberInput"),jJe=yt()({name:"VNumberInput",props:{...WJe()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=V(),{holdStart:r,holdStop:s}=KJe({toggleUpDown:C}),o=Qg(e),i=ae(()=>o.isDisabled.value||o.isReadonly.value),c=Ht(e.focused),{decimalSeparator:A}=Qa(),d=ae(()=>e.decimalSeparator?.[0]||A.value);function f(te){let L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.precision,N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const q=L==null?String(te):te.toFixed(L);if(c.value&&N)return Number(q).toString().replace(".",d.value);if(e.minFractionDigits===null||L!==null&&L<e.minFractionDigits)return q.replace(".",d.value);let[Q,ee]=q.split(".");return ee=(ee??"").padEnd(e.minFractionDigits,"0").replace(new RegExp(`(?<=\\d{${e.minFractionDigits}})0+$`,"g"),""),[Q,ee].filter(Boolean).join(d.value)}const m=ln(e,"modelValue",null,te=>te??null,te=>te==null?te??null:tr(Number(te),e.min,e.max)),h=Ht(null);_r(()=>{c.value&&!i.value||(m.value==null?h.value=null:isNaN(m.value)||(h.value=f(m.value)))});const p=ae({get:()=>h.value,set(te){if(te===null||te===""){m.value=null,h.value=null;return}const L=Number(te.replace(d.value,"."));!isNaN(L)&&L<=e.max&&L>=e.min&&(m.value=L,h.value=te)}}),y=ae(()=>i.value?!1:(m.value??0)+e.step<=e.max),g=ae(()=>i.value?!1:(m.value??0)-e.step>=e.min),w=ae(()=>e.hideInput?"stacked":e.controlVariant),b=Xe(()=>w.value==="split"?"$plus":"$collapse"),x=Xe(()=>w.value==="split"?"$minus":"$expand"),T=Xe(()=>w.value==="split"?"default":"small"),F=Xe(()=>w.value==="stacked"?"auto":"100%"),k={props:{onClick:O,onPointerup:H,onPointerdown:ie,onPointercancel:H}},S={props:{onClick:O,onPointerup:H,onPointerdown:Ae,onPointercancel:H}};Ke(()=>e.precision,()=>J()),Ke(()=>e.minFractionDigits,()=>J()),un(()=>{j()});function E(te){if(te==null)return 0;const L=te.toString(),N=L.indexOf(".");return~N?L.length-N:0}function C(){let te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(i.value)return;if(m.value==null){p.value=f(tr(0,e.min,e.max));return}let L=Math.max(E(m.value),E(e.step));e.precision!=null&&(L=Math.max(L,e.precision)),te?y.value&&(p.value=f(m.value+e.step,L)):g.value&&(p.value=f(m.value-e.step,L))}function D(te){if(!te.data)return;const L=te.target,{value:N,selectionStart:q,selectionEnd:Q}=L??{},ee=N?N.slice(0,q)+te.data+N.slice(Q):te.data,z=dte(ee,e.precision,d.value);if(new RegExp(`^-?\\d*${k_(d.value)}?\\d*$`).test(ee)||(te.preventDefault(),L.value=z),e.precision!=null){if(ee.split(d.value)[1]?.length>e.precision){te.preventDefault(),L.value=z;const X=(q??0)+te.data.length;L.setSelectionRange(X,X)}e.precision===0&&ee.includes(d.value)&&(te.preventDefault(),L.value=z)}}async function P(te){["Enter","ArrowLeft","ArrowRight","Backspace","Delete","Tab"].includes(te.key)||te.ctrlKey||["ArrowDown","ArrowUp"].includes(te.key)&&(te.preventDefault(),te.stopPropagation(),j(),await xn(),te.key==="ArrowDown"?C(!1):C())}function O(te){te.stopPropagation()}function H(te){te.currentTarget?.releasePointerCapture(te.pointerId),te.preventDefault(),s()}function ie(te){te.currentTarget?.setPointerCapture(te.pointerId),te.preventDefault(),te.stopPropagation(),r("up")}function Ae(te){te.currentTarget?.setPointerCapture(te.pointerId),te.preventDefault(),te.stopPropagation(),r("down")}function j(){if(i.value||!a.value)return;const te=a.value.value,L=Number(te.replace(d.value,"."));te&&!isNaN(L)?p.value=f(tr(L,e.min,e.max)):p.value=null}function J(){i.value||(p.value=m.value!==null&&!isNaN(m.value)?f(m.value,e.precision,!1):null)}function ue(){if(!i.value){if(m.value===null||isNaN(m.value)){p.value=null;return}p.value=m.value.toString().replace(".",d.value)}}function ne(){ue()}function Y(){j()}return St(()=>{const{modelValue:te,...L}=Hc.filterProps(e);function N(){return n.increment?l(Ln,{key:"increment-defaults",defaults:{VBtn:{disabled:!y.value,height:F.value,size:T.value,icon:b.value,variant:"text"}}},{default:()=>[n.increment(k)]}):l(Jn,{"aria-hidden":"true","data-testid":"increment",disabled:!y.value,height:F.value,icon:b.value,key:"increment-btn",onClick:O,onPointerdown:ie,onPointerup:H,onPointercancel:H,size:T.value,variant:"text",tabindex:"-1"},null)}function q(){return n.decrement?l(Ln,{key:"decrement-defaults",defaults:{VBtn:{disabled:!g.value,height:F.value,size:T.value,icon:x.value,variant:"text"}}},{default:()=>[n.decrement(S)]}):l(Jn,{"aria-hidden":"true","data-testid":"decrement",disabled:!g.value,height:F.value,icon:x.value,key:"decrement-btn",onClick:O,onPointerdown:Ae,onPointerup:H,onPointercancel:H,size:T.value,variant:"text",tabindex:"-1"},null)}function Q(){return v("div",{class:"v-number-input__control"},[q(),l(Ii,{vertical:w.value!=="stacked"},null),N()])}function ee(){return!e.hideInput&&!e.inset?l(Ii,{vertical:!0},null):void 0}const z=w.value==="split"?v("div",{class:"v-number-input__control"},[l(Ii,{vertical:!0},null),N()]):e.reverse||w.value==="hidden"?void 0:v(We,null,[ee(),Q()]),X=n["append-inner"]||z,le=w.value==="split"?v("div",{class:"v-number-input__control"},[q(),l(Ii,{vertical:!0},null)]):e.reverse&&w.value!=="hidden"?v(We,null,[Q(),ee()]):void 0,re=n["prepend-inner"]||le;return l(Hc,Ue({ref:a},L,{modelValue:p.value,"onUpdate:modelValue":de=>p.value=de,focused:c.value,"onUpdate:focused":de=>c.value=de,validationValue:m.value,onBeforeinput:D,onFocus:ne,onBlur:Y,onKeydown:P,class:["v-number-input",{"v-number-input--default":w.value==="default","v-number-input--hide-input":e.hideInput,"v-number-input--inset":e.inset,"v-number-input--reverse":e.reverse,"v-number-input--split":w.value==="split","v-number-input--stacked":w.value==="stacked"},e.class],style:e.style,inputmode:"decimal"}),{...n,"append-inner":X?function(){for(var de=arguments.length,G=new Array(de),Z=0;Z<de;Z++)G[Z]=arguments[Z];return v(We,null,[n["append-inner"]?.(...G),z])}:void 0,"prepend-inner":re?function(){for(var de=arguments.length,G=new Array(de),Z=0;Z<de;Z++)G[Z]=arguments[Z];return v(We,null,[le,n["prepend-inner"]?.(...G)])}:void 0})}),Es({},a)}}),qJe=it({autofocus:Boolean,divider:String,focusAll:Boolean,label:{type:String,default:"$vuetify.input.otp"},length:{type:[Number,String],default:6},modelValue:{type:[Number,String],default:void 0},placeholder:String,type:{type:String,default:"number"},...Lr(),...$g(),...Qc(zg({variant:"outlined"}),["baseColor","bgColor","class","color","disabled","error","loading","rounded","style","theme","variant"])},"VOtpInput"),YJe=yt()({name:"VOtpInput",props:qJe(),emits:{finish:e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:r}=t;const{dimensionStyles:s}=Mr(e),{isFocused:o,focus:i,blur:c}=jc(e),A=ln(e,"modelValue","",D=>D==null?[]:String(D).split(""),D=>D.join("")),{t:d}=Qa(),f=ae(()=>Number(e.length)),m=ae(()=>Array(f.value).fill(0)),h=V(-1),p=V(),y=V([]),g=ae(()=>y.value[h.value]);let w=!1;yo(()=>e.autofocus,()=>{const D=Hd();D.run(()=>{const{intersectionRef:P,isIntersecting:O}=Vg();_r(()=>{P.value=y.value[0]}),Ke(O,H=>{H&&(P.value?.focus(),D.stop())})})});function b(){if(C(g.value.value)){g.value.value="";return}if(w)return;const D=A.value.slice(),P=g.value.value;D[h.value]=P;let O=null;h.value>A.value.length?O=A.value.length+1:h.value+1!==f.value&&(O="next"),A.value=D,O&&af(p.value,O)}function x(){w=!1,b()}function T(D){const P=A.value.slice(),O=h.value;let H=null;["ArrowLeft","ArrowRight","Backspace","Delete"].includes(D.key)&&(D.preventDefault(),D.key==="ArrowLeft"?H="prev":D.key==="ArrowRight"?H="next":["Backspace","Delete"].includes(D.key)&&(P[h.value]="",A.value=P,h.value>0&&D.key==="Backspace"?H="prev":requestAnimationFrame(()=>{y.value[O]?.select()})),requestAnimationFrame(()=>{H!=null&&af(p.value,H)}))}function F(D,P){P.preventDefault(),P.stopPropagation();const O=P?.clipboardData?.getData("Text").trim().slice(0,f.value)??"",H=O.length-1===-1?D:O.length-1;C(O)||(A.value=O.split(""),h.value=H)}function k(){A.value=[]}function S(D,P){i(),h.value=P}function E(){c(),h.value=-1}function C(D){return e.type==="number"&&/[^0-9]/g.test(D)}return wr({VField:{color:Xe(()=>e.color),bgColor:Xe(()=>e.color),baseColor:Xe(()=>e.baseColor),disabled:Xe(()=>e.disabled),error:Xe(()=>e.error),variant:Xe(()=>e.variant)}},{scoped:!0}),Ke(A,D=>{D.length===f.value&&a("finish",D.join(""))},{deep:!0}),Ke(h,D=>{D<0||xn(()=>{y.value[D]?.select()})}),St(()=>{const[D,P]=iA(n);return v("div",Ue({class:["v-otp-input",{"v-otp-input--divided":!!e.divider},e.class],style:[e.style]},D),[v("div",{ref:p,class:"v-otp-input__content",style:Rt([s.value])},[m.value.map((O,H)=>v(We,null,[e.divider&&H!==0&&v("span",{class:"v-otp-input__divider"},[e.divider]),l(rA,{focused:o.value&&e.focusAll||h.value===H,key:H},{...r,loader:void 0,default:()=>v("input",{ref:ie=>y.value[H]=ie,"aria-label":d(e.label,H+1),autofocus:H===0&&e.autofocus,autocomplete:"one-time-code",class:ct(["v-otp-input__field"]),disabled:e.disabled,inputmode:e.type==="number"?"numeric":"text",min:e.type==="number"?0:void 0,maxlength:H===0?f.value:"1",placeholder:e.placeholder,type:e.type==="number"?"text":e.type,value:A.value[H],onInput:b,onFocus:ie=>S(ie,H),onBlur:E,onKeydown:T,onCompositionstart:()=>w=!0,onCompositionend:x,onPaste:ie=>F(H,ie)},null)})])),v("input",Ue({class:"v-otp-input-input",type:"hidden"},P,{value:A.value.join("")}),null),l(Ou,{contained:!0,contentClass:"v-otp-input__loader",modelValue:!!e.loading,persistent:!0},{default:()=>[r.loader?.()??l(kf,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,size:"24",width:"2"},null)]}),r.default?.()])])}),{blur:()=>{y.value?.some(D=>D.blur())},focus:()=>{y.value?.[0].focus()},reset:k,isFocused:o}}});function XJe(e){return Math.floor(Math.abs(e))*Math.sign(e)}const JJe=it({scale:{type:[Number,String],default:.5},...tn()},"VParallax"),ZJe=yt()({name:"VParallax",props:JJe(),setup(e,t){let{slots:n}=t;const{intersectionRef:a,isIntersecting:r}=Vg(),{resizeRef:s,contentRect:o}=Kl(),{height:i}=dl(),c=V();_r(()=>{a.value=s.value=c.value?.$el});let A;Ke(r,h=>{h?(A=gk(a.value),A=A===document.scrollingElement?document:A,A.addEventListener("scroll",m,{passive:!0}),m()):A.removeEventListener("scroll",m)}),da(()=>{A?.removeEventListener("scroll",m)}),Ke(i,m),Ke(()=>o.value?.height,m);const d=ae(()=>1-tr(Number(e.scale)));let f=-1;function m(){r.value&&(cancelAnimationFrame(f),f=requestAnimationFrame(()=>{const h=(c.value?.$el).querySelector(".v-img__img");if(!h)return;const p=A instanceof Document?document.documentElement.clientHeight:A.clientHeight,y=A instanceof Document?window.scrollY:A.scrollTop,g=a.value.getBoundingClientRect().top+y,w=o.value.height,b=g+(w-p)/2,x=XJe((y-b)*d.value),T=Math.max(1,(d.value*(p-w)+w)/w);h.style.setProperty("transform",`translateY(${x}px) scale(${T})`)}))}return St(()=>l(Oc,{class:ct(["v-parallax",{"v-parallax--active":r.value},e.class]),style:Rt(e.style),ref:c,cover:!0,onLoadstart:m,onLoad:m},n)),{}}}),eZe=it({...Jw({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),tZe=yt()({name:"VRadio",props:eZe(),setup(e,t){let{slots:n}=t;return St(()=>{const a=aA.filterProps(e);return l(aA,Ue(a,{class:["v-radio",e.class],style:e.style,type:"radio"}),n)}),{}}}),nZe=it({height:{type:[Number,String],default:"auto"},...qc(),...$a(d4(),["multiple"]),trueIcon:{type:An,default:"$radioOn"},falseIcon:{type:An,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),aZe=yt()({name:"VRadioGroup",inheritAttrs:!1,props:nZe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const r=Go(),s=ae(()=>e.id||`radio-group-${r}`),o=ln(e,"modelValue"),i=V();return St(()=>{const[c,A]=iA(n),d=Zs.filterProps(e),f=aA.filterProps(e),m=a.label?a.label({label:e.label,props:{for:s.value}}):e.label;return l(Zs,Ue({ref:i,class:["v-radio-group",e.class],style:e.style},c,d,{modelValue:o.value,"onUpdate:modelValue":h=>o.value=h,id:s.value}),{...a,default:h=>{let{id:p,messagesId:y,isDisabled:g,isReadonly:w}=h;return v(We,null,[m&&l(Bh,{id:p.value},{default:()=>[m]}),l(pQ,Ue(f,{id:p.value,"aria-describedby":y.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:g.value,readonly:w.value,"aria-labelledby":m?p.value:void 0,multiple:!1},A,{modelValue:o.value,"onUpdate:modelValue":b=>o.value=b}),a)])}})}),Es({},i)}}),rZe=it({...$g(),...qc(),...y7(),strict:Boolean,modelValue:{type:Array,default:()=>[0,0]}},"VRangeSlider"),sZe=yt()({name:"VRangeSlider",props:rZe(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,end:e=>!0,start:e=>!0},setup(e,t){let{slots:n,emit:a}=t;const r=V(),s=V(),o=V(),{rtlClasses:i}=Zr();function c(D){if(!r.value||!s.value)return;const P=cB(D,r.value.$el,e.direction),O=cB(D,s.value.$el,e.direction),H=Math.abs(P),ie=Math.abs(O);return H<ie||H===ie&&P<0?r.value.$el:s.value.$el}const A=_7(e),d=ln(e,"modelValue",void 0,D=>D?.length?D.map(P=>A.roundValue(P)):[0,0]),{activeThumbRef:f,hasLabels:m,max:h,min:p,mousePressed:y,onSliderMousedown:g,onSliderTouchstart:w,position:b,trackContainerRef:x,readonly:T}=w7({props:e,steps:A,onSliderStart:()=>{a("start",d.value)},onSliderEnd:D=>{let{value:P}=D;const O=f.value===r.value?.$el?[P,d.value[1]]:[d.value[0],P];!e.strict&&O[0]<O[1]&&(d.value=O),a("end",d.value)},onSliderMove:D=>{let{value:P}=D;const[O,H]=d.value;!e.strict&&O===H&&O!==p.value&&(f.value=P>O?s.value?.$el:r.value?.$el,f.value?.focus()),f.value===r.value?.$el?d.value=[Math.min(P,H),H]:d.value=[O,Math.max(O,P)]},getActiveThumb:c}),{isFocused:F,focus:k,blur:S}=jc(e),E=ae(()=>b(d.value[0])),C=ae(()=>b(d.value[1]));return St(()=>{const D=Zs.filterProps(e),P=!!(e.label||n.label||n.prepend);return l(Zs,Ue({class:["v-slider","v-range-slider",{"v-slider--has-labels":!!n["tick-label"]||m.value,"v-slider--focused":F.value,"v-slider--pressed":y.value,"v-slider--disabled":e.disabled},i.value,e.class],style:e.style,ref:o},D,{focused:F.value}),{...n,prepend:P?O=>v(We,null,[n.label?.(O)??(e.label?l(Bh,{class:"v-slider__label",text:e.label},null):void 0),n.prepend?.(O)]):void 0,default:O=>{let{id:H,messagesId:ie}=O;return v("div",{class:"v-slider__container",onMousedown:T.value?void 0:g,onTouchstartPassive:T.value?void 0:w},[v("input",{id:`${H.value}_start`,name:e.name||H.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:d.value[0]},null),v("input",{id:`${H.value}_stop`,name:e.name||H.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:d.value[1]},null),l(b7,{ref:x,start:E.value,stop:C.value},{"tick-label":n["tick-label"]}),l(dB,{ref:r,"aria-describedby":ie.value,focused:F&&f.value===r.value?.$el,modelValue:d.value[0],"onUpdate:modelValue":Ae=>d.value=[Ae,d.value[1]],onFocus:Ae=>{k(),f.value=r.value?.$el,h.value!==p.value&&d.value[0]===d.value[1]&&d.value[1]===p.value&&Ae.relatedTarget!==s.value?.$el&&(r.value?.$el.blur(),s.value?.$el.focus())},onBlur:()=>{S(),f.value=void 0},min:p.value,max:d.value[1],position:E.value,ripple:e.ripple},{"thumb-label":n["thumb-label"]}),l(dB,{ref:s,"aria-describedby":ie.value,focused:F&&f.value===s.value?.$el,modelValue:d.value[1],"onUpdate:modelValue":Ae=>d.value=[d.value[0],Ae],onFocus:Ae=>{k(),f.value=s.value?.$el,h.value!==p.value&&d.value[0]===d.value[1]&&d.value[0]===h.value&&Ae.relatedTarget!==r.value?.$el&&(s.value?.$el.blur(),r.value?.$el.focus())},onBlur:()=>{S(),f.value=void 0},min:d.value[0],max:h.value,position:C.value,ripple:e.ripple},{"thumb-label":n["thumb-label"]})])}})}),Es({focus:()=>r.value?.$el.focus()},o)}}),oZe=it({name:String,itemAriaLabel:{type:String,default:"$vuetify.rating.ariaLabel.item"},activeColor:String,color:String,clearable:Boolean,disabled:Boolean,emptyIcon:{type:An,default:"$ratingEmpty"},fullIcon:{type:An,default:"$ratingFull"},halfIncrements:Boolean,hover:Boolean,length:{type:[Number,String],default:5},readonly:Boolean,modelValue:{type:[Number,String],default:0},itemLabels:Array,itemLabelPosition:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},ripple:Boolean,...tn(),...ds(),...Yu(),...Nn(),...la()},"VRating"),iZe=yt()({name:"VRating",props:oZe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{t:a}=Qa(),{themeClasses:r}=ka(e),s=ln(e,"modelValue"),o=ae(()=>tr(parseFloat(s.value),0,Number(e.length))),i=ae(()=>Bi(Number(e.length),1)),c=ae(()=>i.value.flatMap(g=>e.halfIncrements?[g-.5,g]:[g])),A=Ht(-1),d=ae(()=>c.value.map(g=>{const w=e.hover&&A.value>-1,b=o.value>=g,x=A.value>=g,F=(w?x:b)?e.fullIcon:e.emptyIcon,k=e.activeColor??e.color,S=b||x?k:e.color;return{isFilled:b,isHovered:x,icon:F,color:S}})),f=ae(()=>[0,...c.value].map(g=>{function w(){A.value=g}function b(){A.value=-1}function x(){e.disabled||e.readonly||(s.value=o.value===g&&e.clearable?0:g)}return{onMouseenter:e.hover?w:void 0,onMouseleave:e.hover?b:void 0,onClick:x}})),m=Go(),h=ae(()=>e.name??`v-rating-${m}`);function p(g){let{value:w,index:b,showStar:x=!0}=g;const{onMouseenter:T,onMouseleave:F,onClick:k}=f.value[b+1],S=`${h.value}-${String(w).replace(".","-")}`,E={color:d.value[b]?.color,density:e.density,disabled:e.disabled,icon:d.value[b]?.icon,ripple:e.ripple,size:e.size,variant:"plain"};return v(We,null,[v("label",{for:S,class:ct({"v-rating__item--half":e.halfIncrements&&w%1>0,"v-rating__item--full":e.halfIncrements&&w%1===0}),onMouseenter:T,onMouseleave:F,onClick:k},[v("span",{class:"v-rating__hidden"},[a(e.itemAriaLabel,w,e.length)]),x?n.item?n.item({...d.value[b],props:E,value:w,index:b,rating:o.value}):l(Jn,Ue({"aria-label":a(e.itemAriaLabel,w,e.length)},E),null):void 0]),v("input",{class:"v-rating__hidden",name:h.value,id:S,type:"radio",value:w,checked:o.value===w,tabindex:-1,readonly:e.readonly,disabled:e.disabled},null)])}function y(g){return n["item-label"]?n["item-label"](g):g.label?v("span",null,[g.label]):v("span",null,[M("")])}return St(()=>{const g=!!e.itemLabels?.length||n["item-label"];return l(e.tag,{class:ct(["v-rating",{"v-rating--hover":e.hover,"v-rating--readonly":e.readonly},r.value,e.class]),style:Rt(e.style)},{default:()=>[l(p,{value:0,index:-1,showStar:!1},null),i.value.map((w,b)=>v("div",{class:"v-rating__wrapper"},[g&&e.itemLabelPosition==="top"?y({value:w,index:b,label:e.itemLabels?.[b]}):void 0,v("div",{class:"v-rating__item"},[e.halfIncrements?v(We,null,[l(p,{value:w-.5,index:b*2},null),l(p,{value:w,index:b*2+1},null)]):l(p,{value:w,index:b},null)]),g&&e.itemLabelPosition==="bottom"?y({value:w,index:b,label:e.itemLabels?.[b]}):void 0]))]})}),{}}}),lZe={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function uZe(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return v("div",{class:ct(["v-skeleton-loader__bone",`v-skeleton-loader__${e}`])},[t])}function zN(e){const[t,n]=e.split("@");return Array.from({length:n}).map(()=>fb(t))}function fb(e){let t=[];if(!e)return t;const n=lZe[e];if(e!==n){if(e.includes(","))return KN(e);if(e.includes("@"))return zN(e);n.includes(",")?t=KN(n):n.includes("@")?t=zN(n):n&&t.push(fb(n))}return[uZe(e,t)]}function KN(e){return e.replace(/\s/g,"").split(",").map(fb)}const cZe=it({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...Lr(),...es(),...la()},"VSkeletonLoader"),dZe=yt()({name:"VSkeletonLoader",props:cZe(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:a,backgroundColorStyles:r}=Fa(()=>e.color),{dimensionStyles:s}=Mr(e),{elevationClasses:o}=Ss(e),{themeClasses:i}=ka(e),{t:c}=Qa(),A=ae(()=>fb(pr(e.type).join(",")));return St(()=>{const d=!n.default||e.loading,f=e.boilerplate||!d?{}:{ariaLive:"polite",ariaLabel:c(e.loadingText),role:"alert"};return v("div",Ue({class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":e.boilerplate},i.value,a.value,o.value],style:[r.value,d?s.value:{}]},f),[d?A.value:n.default?.()])}),{}}}),AZe=yt()({name:"VSlideGroupItem",props:nm(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const a=am(e,EQ);return()=>n.default?.({isSelected:a.isSelected.value,select:a.select,toggle:a.toggle,selectedClass:a.selectedClass.value})}});function fZe(e){const t=Ht(e());let n=-1;function a(){clearInterval(n)}function r(){a(),xn(()=>t.value=e())}function s(o){const i=o?getComputedStyle(o):{transitionDuration:.2},c=parseFloat(i.transitionDuration)*1e3||200;if(a(),t.value<=0)return;const A=performance.now();n=window.setInterval(()=>{const d=performance.now()-A+c;t.value=Math.max(e()-d,0),t.value<=0&&a()},c)}return cs(a),{clear:a,time:t,start:s,reset:r}}const vG=it({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...Wc({location:"bottom"}),...Sh(),...cr(),...ml(),...la(),...$a(Gg({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),bB=yt()({name:"VSnackbar",props:vG(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=ln(e,"modelValue"),{positionClasses:r}=Eh(e),{scopeId:s}=sm(),{themeClasses:o}=ka(e),{colorClasses:i,colorStyles:c,variantClasses:A}=em(e),{roundedClasses:d}=xr(e),f=fZe(()=>Number(e.timeout)),m=V(),h=V(),p=Ht(!1),y=Ht(0),g=V(),w=Tn(k0,void 0);yo(()=>!!w,()=>{const P=g6();_r(()=>{g.value=P.mainStyles.value})}),Ke(a,x),Ke(()=>e.timeout,x),un(()=>{a.value&&x()});let b=-1;function x(){f.reset(),window.clearTimeout(b);const P=Number(e.timeout);if(!a.value||P===-1)return;const O=dk(h.value);f.start(O),b=window.setTimeout(()=>{a.value=!1},P)}function T(){f.reset(),window.clearTimeout(b)}function F(){p.value=!0,T()}function k(){p.value=!1,x()}function S(P){y.value=P.touches[0].clientY}function E(P){Math.abs(y.value-P.changedTouches[0].clientY)>50&&(a.value=!1)}function C(){p.value&&k()}const D=ae(()=>e.location.split(" ").reduce((P,O)=>(P[`v-snackbar--${O}`]=!0,P),{}));return St(()=>{const P=Ou.filterProps(e),O=!!(n.default||n.text||e.text);return l(Ou,Ue({ref:m,class:["v-snackbar",{"v-snackbar--active":a.value,"v-snackbar--multi-line":e.multiLine&&!e.vertical,"v-snackbar--timer":!!e.timer,"v-snackbar--vertical":e.vertical},D.value,r.value,e.class],style:[g.value,e.style]},P,{modelValue:a.value,"onUpdate:modelValue":H=>a.value=H,contentProps:Ue({class:["v-snackbar__wrapper",o.value,i.value,d.value,A.value],style:[c.value],onPointerenter:F,onPointerleave:k},P.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:S,onTouchend:E,onAfterLeave:C},s),{default:()=>[dA(!1,"v-snackbar"),e.timer&&!p.value&&v("div",{key:"timer",class:"v-snackbar__timer"},[l(qw,{ref:h,color:typeof e.timer=="string"?e.timer:"info",max:e.timeout,modelValue:f.time.value},null)]),O&&v("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[n.text?.()??e.text,n.default?.()]),n.actions&&l(Ln,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[v("div",{class:"v-snackbar__actions"},[n.actions({isActive:a})])]})],activator:n.activator})}),Es({},m)}}),mZe=it({closable:[Boolean,String],closeText:{type:String,default:"$vuetify.dismiss"},modelValue:{type:Array,default:()=>[]},...$a(vG(),["modelValue"])},"VSnackbarQueue"),vZe=yt()({name:"VSnackbarQueue",props:mZe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const{t:r}=Qa(),s=Ht(!1),o=Ht(!1),i=Ht();Ke(()=>e.modelValue.length,(m,h)=>{!o.value&&m>h&&A()}),Ke(s,m=>{m&&(o.value=!0)});function c(){e.modelValue.length?A():(i.value=void 0,o.value=!1)}function A(){const[m,...h]=e.modelValue;n("update:modelValue",h),i.value=typeof m=="string"?{text:m}:m,xn(()=>{s.value=!0})}function d(){s.value=!1}const f=ae(()=>({color:typeof e.closable=="string"?e.closable:void 0,text:r(e.closeText)}));St(()=>{const m=!!(e.closable||a.actions),{modelValue:h,...p}=bB.filterProps(e);return v(We,null,[o.value&&!!i.value&&(a.default?l(Ln,{defaults:{VSnackbar:i.value}},{default:()=>[a.default({item:i.value})]}):l(bB,Ue(p,i.value,{modelValue:s.value,"onUpdate:modelValue":y=>s.value=y,onAfterLeave:c}),{text:a.text?()=>a.text?.({item:i.value}):void 0,actions:m?()=>v(We,null,[a.actions?l(Ln,{defaults:{VBtn:f.value}},{default:()=>[a.actions({item:i.value,props:{onClick:d}})]}):l(Jn,Ue(f.value,{onClick:d}),null)]):void 0}))])})}}),hG=it({autoDraw:Boolean,autoDrawDuration:[Number,String],autoDrawEasing:{type:String,default:"ease"},color:String,gradient:{type:Array,default:()=>[]},gradientDirection:{type:String,validator:e=>["top","bottom","left","right"].includes(e),default:"top"},height:{type:[String,Number],default:75},labels:{type:Array,default:()=>[]},labelSize:{type:[Number,String],default:7},lineWidth:{type:[String,Number],default:4},id:String,itemValue:{type:String,default:"value"},modelValue:{type:Array,default:()=>[]},min:[String,Number],max:[String,Number],padding:{type:[String,Number],default:8},showLabels:Boolean,smooth:[Boolean,String,Number],width:{type:[Number,String],default:300}},"Line"),pG=it({autoLineWidth:Boolean,...hG()},"VBarline"),WN=yt()({name:"VBarline",props:pG(),setup(e,t){let{slots:n}=t;const a=Go(),r=ae(()=>e.id||`barline-${a}`),s=ae(()=>Number(e.autoDrawDuration)||500),o=ae(()=>!!(e.showLabels||e.labels.length>0||n?.label)),i=ae(()=>parseFloat(e.lineWidth)||4),c=ae(()=>Math.max(e.modelValue.length*i.value,Number(e.width))),A=ae(()=>({minX:0,maxX:c.value,minY:0,maxY:parseInt(e.height,10)})),d=ae(()=>e.modelValue.map(g=>Nr(g,e.itemValue,g)));function f(g,w){const{minX:b,maxX:x,minY:T,maxY:F}=w,k=g.length;let S=e.max!=null?Number(e.max):Math.max(...g),E=e.min!=null?Number(e.min):Math.min(...g);E>0&&e.min==null&&(E=0),S<0&&e.max==null&&(S=0);const C=x/(k===1?2:k),D=(F-T)/(S-E||1),P=F-Math.abs(E*D);return g.map((O,H)=>{const ie=Math.abs(D*O);return{x:b+H*C,y:P-ie+ +(O<0)*ie,height:ie,value:O}})}const m=ae(()=>{const g=[],w=f(d.value,A.value),b=w.length;for(let x=0;g.length<b;x++){const T=w[x];let F=e.labels[x];F||(F=typeof T=="object"?T.value:T),g.push({x:T.x,value:String(F)})}return g}),h=ae(()=>f(d.value,A.value)),p=ae(()=>h.value.length===1?(A.value.maxX-i.value)/2:(Math.abs(h.value[0].x-h.value[1].x)-i.value)/2),y=ae(()=>typeof e.smooth=="boolean"?e.smooth?2:0:Number(e.smooth));St(()=>{const g=e.gradient.slice().length?e.gradient.slice().reverse():[""];return v("svg",{display:"block"},[v("defs",null,[v("linearGradient",{id:r.value,gradientUnits:"userSpaceOnUse",x1:e.gradientDirection==="left"?"100%":"0",y1:e.gradientDirection==="top"?"100%":"0",x2:e.gradientDirection==="right"?"100%":"0",y2:e.gradientDirection==="bottom"?"100%":"0"},[g.map((w,b)=>v("stop",{offset:b/Math.max(g.length-1,1),"stop-color":w||"currentColor"},null))])]),v("clipPath",{id:`${r.value}-clip`},[h.value.map(w=>v("rect",{x:w.x+p.value,y:w.y,width:i.value,height:w.height,rx:y.value,ry:y.value},[e.autoDraw&&v(We,null,[v("animate",{attributeName:"y",from:w.y+w.height,to:w.y,dur:`${s.value}ms`,fill:"freeze"},null),v("animate",{attributeName:"height",from:"0",to:w.height,dur:`${s.value}ms`,fill:"freeze"},null)])]))]),o.value&&v("g",{key:"labels",style:{textAnchor:"middle",dominantBaseline:"mathematical",fill:"currentColor"}},[m.value.map((w,b)=>v("text",{x:w.x+p.value+i.value/2,y:parseInt(e.height,10)-2+(parseInt(e.labelSize,10)||7*.75),"font-size":Number(e.labelSize)||7},[n.label?.({index:b,value:w.value})??w.value]))]),v("g",{"clip-path":`url(#${r.value}-clip)`,fill:`url(#${r.value})`},[v("rect",{x:0,y:0,width:Math.max(e.modelValue.length*i.value,Number(e.width)),height:e.height},null)])])})}});function hZe(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:75;if(e.length===0)return"";const r=e.shift(),s=e[e.length-1];return(n?`M${r.x} ${a-r.x+2} L${r.x} ${r.y}`:`M${r.x} ${r.y}`)+e.map((o,i)=>{const c=e[i+1],A=e[i-1]||r,d=c&&pZe(c,o,A);if(!c||d)return`L${o.x} ${o.y}`;const f=Math.min(jN(A,o),jN(c,o)),h=f/2<t?f/2:t,p=qN(A,o,h),y=qN(c,o,h);return`L${p.x} ${p.y}S${o.x} ${o.y} ${y.x} ${y.y}`}).join("")+(n?`L${s.x} ${a-r.x+2} Z`:"")}function Dy(e){return parseInt(e,10)}function pZe(e,t,n){return Dy(e.x+n.x)===Dy(2*t.x)&&Dy(e.y+n.y)===Dy(2*t.y)}function jN(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function qN(e,t,n){const a={x:e.x-t.x,y:e.y-t.y},r=Math.sqrt(a.x*a.x+a.y*a.y),s={x:a.x/r,y:a.y/r};return{x:t.x+s.x*n,y:t.y+s.y*n}}const gG=it({fill:Boolean,...hG()},"VTrendline"),YN=yt()({name:"VTrendline",props:gG(),setup(e,t){let{slots:n}=t;const a=Go(),r=ae(()=>e.id||`trendline-${a}`),s=ae(()=>Number(e.autoDrawDuration)||(e.fill?500:2e3)),o=V(0),i=V(null);function c(g,w){const{minX:b,maxX:x,minY:T,maxY:F}=w;g.length===1&&(g=[g[0],g[0]]);const k=g.length,S=e.max!=null?Number(e.max):Math.max(...g),E=e.min!=null?Number(e.min):Math.min(...g),C=(x-b)/(k-1),D=(F-T)/(S-E||1);return g.map((P,O)=>({x:b+O*C,y:F-(P-E)*D,value:P}))}const A=ae(()=>!!(e.showLabels||e.labels.length>0||n?.label)),d=ae(()=>parseFloat(e.lineWidth)||4),f=ae(()=>Number(e.width)),m=ae(()=>{const g=Number(e.padding);return{minX:g,maxX:f.value-g,minY:g,maxY:parseInt(e.height,10)-g}}),h=ae(()=>e.modelValue.map(g=>Nr(g,e.itemValue,g))),p=ae(()=>{const g=[],w=c(h.value,m.value),b=w.length;for(let x=0;g.length<b;x++){const T=w[x];let F=e.labels[x];F||(F=typeof T=="object"?T.value:T),g.push({x:T.x,value:String(F)})}return g});Ke(()=>e.modelValue,async()=>{if(await xn(),!e.autoDraw||!i.value)return;const g=i.value,w=g.getTotalLength();e.fill?(g.style.transformOrigin="bottom center",g.style.transition="none",g.style.transform="scaleY(0)",g.getBoundingClientRect(),g.style.transition=`transform ${s.value}ms ${e.autoDrawEasing}`,g.style.transform="scaleY(1)"):(g.style.strokeDasharray=`${w}`,g.style.strokeDashoffset=`${w}`,g.getBoundingClientRect(),g.style.transition=`stroke-dashoffset ${s.value}ms ${e.autoDrawEasing}`,g.style.strokeDashoffset="0"),o.value=w},{immediate:!0});function y(g){const w=typeof e.smooth=="boolean"?e.smooth?8:0:Number(e.smooth);return hZe(c(h.value,m.value),w,g,parseInt(e.height,10))}St(()=>{const g=e.gradient.slice().length?e.gradient.slice().reverse():[""];return v("svg",{display:"block","stroke-width":parseFloat(e.lineWidth)??4},[v("defs",null,[v("linearGradient",{id:r.value,gradientUnits:"userSpaceOnUse",x1:e.gradientDirection==="left"?"100%":"0",y1:e.gradientDirection==="top"?"100%":"0",x2:e.gradientDirection==="right"?"100%":"0",y2:e.gradientDirection==="bottom"?"100%":"0"},[g.map((w,b)=>v("stop",{offset:b/Math.max(g.length-1,1),"stop-color":w||"currentColor"},null))])]),A.value&&v("g",{key:"labels",style:{textAnchor:"middle",dominantBaseline:"mathematical",fill:"currentColor"}},[p.value.map((w,b)=>v("text",{x:w.x+d.value/2+d.value/2,y:parseInt(e.height,10)-4+(parseInt(e.labelSize,10)||7*.75),"font-size":Number(e.labelSize)||7},[n.label?.({index:b,value:w.value})??w.value]))]),v("path",{ref:i,d:y(e.fill),fill:e.fill?`url(#${r.value})`:"none",stroke:e.fill?"none":`url(#${r.value})`},null),e.fill&&v("path",{d:y(!1),fill:"none",stroke:e.color??e.gradient?.[0]},null)])})}}),gZe=it({type:{type:String,default:"trend"},...pG(),...gG()},"VSparkline"),yZe=yt()({name:"VSparkline",props:gZe(),setup(e,t){let{slots:n}=t;const{textColorClasses:a,textColorStyles:r}=Ls(()=>e.color),s=ae(()=>!!(e.showLabels||e.labels.length>0||n?.label)),o=ae(()=>{let i=parseInt(e.height,10);return s.value&&(i+=parseInt(e.labelSize,10)*1.5),i});St(()=>{const i=e.type==="trend"?YN:WN,c=e.type==="trend"?YN.filterProps(e):WN.filterProps(e);return l(i,Ue({key:e.type,class:a.value,style:r.value,viewBox:`0 0 ${e.width} ${parseInt(o.value,10)}`},c),n)})}}),_Ze=it({...tn(),...e7({offset:8,minWidth:0,openDelay:0,closeDelay:100,location:"top center",transition:"scale-transition"})},"VSpeedDial"),wZe=yt()({name:"VSpeedDial",props:_Ze(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=ln(e,"modelValue"),r=V(),s=ae(()=>{const[i,c="center"]=e.location?.split(" ")??[];return`${i} ${c}`}),o=ae(()=>({[`v-speed-dial__content--${s.value.replace(" ","-")}`]:!0}));return St(()=>{const i=Xv.filterProps(e);return l(Xv,Ue(i,{modelValue:a.value,"onUpdate:modelValue":c=>a.value=c,class:e.class,style:e.style,contentClass:["v-speed-dial__content",o.value,e.contentClass],location:s.value,ref:r,transition:"fade-transition"}),{...n,default:c=>l(Ln,{defaults:{VBtn:{size:"small"}}},{default:()=>[l(po,{appear:!0,group:!0,transition:e.transition},{default:()=>[n.default?.(c)]})]})})}),{}}}),O4=Symbol.for("vuetify:v-stepper"),yG=it({color:String,disabled:{type:[Boolean,String],default:!1},prevText:{type:String,default:"$vuetify.stepper.prev"},nextText:{type:String,default:"$vuetify.stepper.next"}},"VStepperActions"),_G=yt()({name:"VStepperActions",props:yG(),emits:{"click:prev":()=>!0,"click:next":()=>!0},setup(e,t){let{emit:n,slots:a}=t;const{t:r}=Qa();function s(){n("click:prev")}function o(){n("click:next")}return St(()=>{const i={onClick:s},c={onClick:o};return v("div",{class:"v-stepper-actions"},[l(Ln,{defaults:{VBtn:{disabled:["prev",!0].includes(e.disabled),text:r(e.prevText),variant:"text"}}},{default:()=>[a.prev?.({props:i})??l(Jn,i,null)]}),l(Ln,{defaults:{VBtn:{color:e.color,disabled:["next",!0].includes(e.disabled),text:r(e.nextText),variant:"tonal"}}},{default:()=>[a.next?.({props:c})??l(Jn,c,null)]})])}),{}}}),wG=Gc("v-stepper-header"),bZe=it({color:String,title:String,subtitle:String,complete:Boolean,completeIcon:{type:An,default:"$complete"},editable:Boolean,editIcon:{type:An,default:"$edit"},error:Boolean,errorIcon:{type:An,default:"$error"},icon:An,ripple:{type:[Boolean,Object],default:!0},rules:{type:Array,default:()=>[]}},"StepperItem"),xZe=it({...bZe(),...nm()},"VStepperItem"),bG=yt()({name:"VStepperItem",directives:{vRipple:Co},props:xZe(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const a=am(e,O4,!0),r=ae(()=>a?.value.value??e.value),s=ae(()=>e.rules.every(m=>m()===!0)),o=ae(()=>!e.disabled&&e.editable),i=ae(()=>!e.disabled&&e.editable),c=ae(()=>e.error||!s.value),A=ae(()=>e.complete||e.rules.length>0&&s.value),d=ae(()=>c.value?e.errorIcon:A.value?e.completeIcon:a.isSelected.value&&e.editable?e.editIcon:e.icon),f=ae(()=>({canEdit:i.value,hasError:c.value,hasCompleted:A.value,title:e.title,subtitle:e.subtitle,step:r.value,value:e.value}));return St(()=>{const m=(!a||a.isSelected.value||A.value||i.value)&&!c.value&&!e.disabled,h=!!(e.title!=null||n.title),p=!!(e.subtitle!=null||n.subtitle);function y(){a?.toggle()}return ma(v("button",{class:ct(["v-stepper-item",{"v-stepper-item--complete":A.value,"v-stepper-item--disabled":e.disabled,"v-stepper-item--error":c.value},a?.selectedClass.value]),disabled:!e.editable,type:"button",onClick:y},[o.value&&dA(!0,"v-stepper-item"),l(ul,{key:"stepper-avatar",class:"v-stepper-item__avatar",color:m?e.color:void 0,size:24},{default:()=>[n.icon?.(f.value)??(d.value?l(Ea,{icon:d.value},null):r.value)]}),v("div",{class:"v-stepper-item__content"},[h&&v("div",{key:"title",class:"v-stepper-item__title"},[n.title?.(f.value)??e.title]),p&&v("div",{key:"subtitle",class:"v-stepper-item__subtitle"},[n.subtitle?.(f.value)??e.subtitle]),n.default?.(f.value)])]),[[Co,e.editable&&e.ripple,null]])}),{}}}),CZe=it({...$a(tb(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VStepperWindow"),xG=yt()({name:"VStepperWindow",props:CZe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=Tn(O4,null),r=ln(e,"modelValue"),s=ae({get(){return r.value!=null||!a?r.value:a.items.value.find(o=>a.selected.value.includes(o.id))?.value},set(o){r.value=o}});return St(()=>{const o=Tf.filterProps(e);return l(Tf,Ue({_as:"VStepperWindow"},o,{modelValue:s.value,"onUpdate:modelValue":i=>s.value=i,class:["v-stepper-window",e.class],style:e.style,mandatory:!1,touch:!1}),n)}),{}}}),SZe=it({...nb()},"VStepperWindowItem"),CG=yt()({name:"VStepperWindowItem",props:SZe(),setup(e,t){let{slots:n}=t;return St(()=>{const a=If.filterProps(e);return l(If,Ue({_as:"VStepperWindowItem"},a,{class:["v-stepper-window-item",e.class],style:e.style}),n)}),{}}}),EZe=it({altLabels:Boolean,bgColor:String,completeIcon:An,editIcon:An,editable:Boolean,errorIcon:An,hideActions:Boolean,items:{type:Array,default:()=>[]},itemTitle:{type:String,default:"title"},itemValue:{type:String,default:"value"},nonLinear:Boolean,flat:Boolean,...Hf()},"Stepper"),BZe=it({...EZe(),...tm({mandatory:"force",selectedClass:"v-stepper-item--selected"}),...S4(),...Qc(yG(),["prevText","nextText"])},"VStepper"),kZe=yt()({name:"VStepper",props:BZe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{items:a,next:r,prev:s,selected:o}=AA(e,O4),{displayClasses:i,mobile:c}=dl(e),{completeIcon:A,editIcon:d,errorIcon:f,color:m,editable:h,prevText:p,nextText:y}=Mf(e),g=ae(()=>e.items.map((x,T)=>{const F=Nr(x,e.itemTitle,x),k=Nr(x,e.itemValue,T+1);return{title:F,value:k,raw:x}})),w=ae(()=>a.value.findIndex(x=>o.value.includes(x.id))),b=ae(()=>e.disabled?e.disabled:w.value===0?"prev":w.value===a.value.length-1?"next":!1);return wr({VStepperItem:{editable:h,errorIcon:f,completeIcon:A,editIcon:d,prevText:p,nextText:y},VStepperActions:{color:m,disabled:b,prevText:p,nextText:y}}),St(()=>{const x=ag.filterProps(e),T=!!(n.header||e.items.length),F=e.items.length>0,k=!e.hideActions&&!!(F||n.actions);return l(ag,Ue(x,{color:e.bgColor,class:["v-stepper",{"v-stepper--alt-labels":e.altLabels,"v-stepper--flat":e.flat,"v-stepper--non-linear":e.nonLinear,"v-stepper--mobile":c.value},i.value,e.class],style:e.style}),{default:()=>[T&&l(wG,{key:"stepper-header"},{default:()=>[g.value.map((S,E)=>{let{raw:C,...D}=S;return v(We,null,[!!E&&l(Ii,null,null),l(bG,D,{default:n[`header-item.${D.value}`]??n.header,icon:n.icon,title:n.title,subtitle:n.subtitle})])})]}),F&&l(xG,{key:"stepper-window"},{default:()=>[g.value.map(S=>l(CG,{value:S.value},{default:()=>n[`item.${S.value}`]?.(S)??n.item?.(S)}))]}),n.default?.({prev:s,next:r}),k&&(n.actions?.({next:r,prev:s})??l(_G,{key:"stepper-actions","onClick:prev":s,"onClick:next":r},n))]})}),{prev:s,next:r}}}),TZe=it({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...qc(),...Jw()},"VSwitch"),IZe=yt()({name:"VSwitch",inheritAttrs:!1,props:TZe(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const r=ln(e,"indeterminate"),s=ln(e,"modelValue"),{loaderClasses:o}=Lg(e),{isFocused:i,focus:c,blur:A}=jc(e),d=V(),f=V(),m=Ba&&window.matchMedia("(forced-colors: active)").matches,h=Xe(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),p=Go(),y=Xe(()=>e.id||`switch-${p}`);function g(){r.value&&(r.value=!1)}function w(b){b.stopPropagation(),b.preventDefault(),d.value?.input?.click()}return St(()=>{const[b,x]=iA(n),T=Zs.filterProps(e),F=aA.filterProps(e);return l(Zs,Ue({ref:f,class:["v-switch",{"v-switch--flat":e.flat},{"v-switch--inset":e.inset},{"v-switch--indeterminate":r.value},o.value,e.class]},b,T,{modelValue:s.value,"onUpdate:modelValue":k=>s.value=k,id:y.value,focused:i.value,style:e.style}),{...a,default:k=>{let{id:S,messagesId:E,isDisabled:C,isReadonly:D,isValid:P}=k;const O={model:s,isValid:P};return l(aA,Ue({ref:d},F,{modelValue:s.value,"onUpdate:modelValue":[H=>s.value=H,g],id:S.value,"aria-describedby":E.value,type:"checkbox","aria-checked":r.value?"mixed":void 0,disabled:C.value,readonly:D.value,onFocus:c,onBlur:A},x),{...a,default:H=>{let{backgroundColorClasses:ie,backgroundColorStyles:Ae}=H;return v("div",{class:ct(["v-switch__track",m?void 0:ie.value]),style:Rt(Ae.value),onClick:w},[a["track-true"]&&v("div",{key:"prepend",class:"v-switch__track-true"},[a["track-true"](O)]),a["track-false"]&&v("div",{key:"append",class:"v-switch__track-false"},[a["track-false"](O)])])},input:H=>{let{inputNode:ie,icon:Ae,backgroundColorClasses:j,backgroundColorStyles:J}=H;return v(We,null,[ie,v("div",{class:ct(["v-switch__thumb",{"v-switch__thumb--filled":Ae||e.loading},e.inset||m?void 0:j.value]),style:Rt(e.inset?void 0:J.value)},[a.thumb?l(Ln,{defaults:{VIcon:{icon:Ae,size:"x-small"}}},{default:()=>[a.thumb({...O,icon:Ae})]}):l(o4,null,{default:()=>[e.loading?l(Mg,{name:"v-switch",active:!0,color:P.value===!1?void 0:h.value},{default:ue=>a.loader?a.loader(ue):l(kf,{active:ue.isActive,color:ue.color,indeterminate:!0,size:"16",width:"2"},null)}):Ae&&l(Ea,{key:String(Ae),icon:Ae,size:"x-small"},null)]})])])}})}})}),Es({},f)}}),FZe=it({color:String,height:[Number,String],window:Boolean,...tn(),...es(),...$f(),...cr(),...Nn(),...la()},"VSystemBar"),PZe=yt()({name:"VSystemBar",props:FZe(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=ka(e),{backgroundColorClasses:r,backgroundColorStyles:s}=Fa(()=>e.color),{elevationClasses:o}=Ss(e),{roundedClasses:i}=xr(e),{ssrBootStyles:c}=Zf(),A=ae(()=>e.height??(e.window?32:24)),{layoutItemStyles:d}=Qf({id:e.name,order:ae(()=>parseInt(e.order,10)),position:Ht("top"),layoutSize:A,elementSize:A,active:ae(()=>!0),absolute:Xe(()=>e.absolute)});return St(()=>l(e.tag,{class:ct(["v-system-bar",{"v-system-bar--window":e.window},a.value,r.value,o.value,i.value,e.class]),style:Rt([s.value,d.value,c.value,e.style])},n)),{}}}),H4=Symbol.for("vuetify:v-tabs"),DZe=it({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...$a(Xw({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),SG=yt()({name:"VTab",props:DZe(),setup(e,t){let{slots:n,attrs:a}=t;const{textColorClasses:r,textColorStyles:s}=Ls(()=>e.sliderColor),o=V(),i=V(),c=ae(()=>e.direction==="horizontal"),A=ae(()=>o.value?.group?.isSelected.value??!1);function d(f){let{value:m}=f;if(m){const h=o.value?.$el.parentElement?.querySelector(".v-tab--selected .v-tab__slider"),p=i.value;if(!h||!p)return;const y=getComputedStyle(h).color,g=h.getBoundingClientRect(),w=p.getBoundingClientRect(),b=c.value?"x":"y",x=c.value?"X":"Y",T=c.value?"right":"bottom",F=c.value?"width":"height",k=g[b],S=w[b],E=k>S?g[T]-w[T]:g[b]-w[b],C=Math.sign(E)>0?c.value?"right":"bottom":Math.sign(E)<0?c.value?"left":"top":"center",P=(Math.abs(E)+(Math.sign(E)<0?g[F]:w[F]))/Math.max(g[F],w[F])||0,O=g[F]/w[F]||0,H=1.5;KA(p,{backgroundColor:[y,"currentcolor"],transform:[`translate${x}(${E}px) scale${x}(${O})`,`translate${x}(${E/H}px) scale${x}(${(P-1)/H+1})`,"none"],transformOrigin:Array(3).fill(C)},{duration:225,easing:E0})}}return St(()=>{const f=Jn.filterProps(e);return l(Jn,Ue({symbol:H4,ref:o,class:["v-tab",e.class],style:e.style,tabindex:A.value?0:-1,role:"tab","aria-selected":String(A.value),active:!1},f,a,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":d}),{...n,default:()=>v(We,null,[n.default?.()??e.text,!e.hideSlider&&v("div",{ref:i,class:ct(["v-tab__slider",r.value]),style:Rt(s.value)},null)])})}),Es({},o)}}),UZe=it({...$a(tb(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),EG=yt()({name:"VTabsWindow",props:UZe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=Tn(H4,null),r=ln(e,"modelValue"),s=ae({get(){return r.value!=null||!a?r.value:a.items.value.find(o=>a.selected.value.includes(o.id))?.value},set(o){r.value=o}});return St(()=>{const o=Tf.filterProps(e);return l(Tf,Ue({_as:"VTabsWindow"},o,{modelValue:s.value,"onUpdate:modelValue":i=>s.value=i,class:["v-tabs-window",e.class],style:e.style,mandatory:!1,touch:!1}),n)}),{}}}),RZe=it({...nb()},"VTabsWindowItem"),BG=yt()({name:"VTabsWindowItem",props:RZe(),setup(e,t){let{slots:n}=t;return St(()=>{const a=If.filterProps(e);return l(If,Ue({_as:"VTabsWindowItem"},a,{class:["v-tabs-window-item",e.class],style:e.style}),n)}),{}}});function NZe(e){return e?e.map(t=>C0(t)?t:{text:t,value:t}):[]}const VZe=it({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...A4({mandatory:"force",selectedClass:"v-tab-item--selected"}),...ds(),...Nn()},"VTabs"),LZe=yt()({name:"VTabs",props:VZe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:a}=t;const r=ln(e,"modelValue"),s=ae(()=>NZe(e.items)),{densityClasses:o}=Eo(e),{backgroundColorClasses:i,backgroundColorStyles:c}=Fa(()=>e.bgColor),{scopeId:A}=sm();return wr({VTab:{color:Xe(()=>e.color),direction:Xe(()=>e.direction),stacked:Xe(()=>e.stacked),fixed:Xe(()=>e.fixedTabs),sliderColor:Xe(()=>e.sliderColor),hideSlider:Xe(()=>e.hideSlider)}}),St(()=>{const d=eg.filterProps(e),f=!!(a.window||e.items.length>0);return v(We,null,[l(eg,Ue(d,{modelValue:r.value,"onUpdate:modelValue":m=>r.value=m,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},o.value,i.value,e.class],style:[{"--v-tabs-height":Yt(e.height)},c.value,e.style],role:"tablist",symbol:H4},A,n),{default:()=>[a.default?.()??s.value.map(m=>a.tab?.({item:m})??l(SG,Ue(m,{key:m.text,value:m.value}),{default:a[`tab.${m.value}`]?()=>a[`tab.${m.value}`]?.({item:m}):void 0}))]}),f&&l(EG,Ue({modelValue:r.value,"onUpdate:modelValue":m=>r.value=m,key:"tabs-window"},A),{default:()=>[s.value.map(m=>a.item?.({item:m})??l(BG,{value:m.value},{default:()=>a[`item.${m.value}`]?.({item:m})})),a.window?.()]})])}),{}}}),MZe=it({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...qc(),...zg()},"VTextarea"),OZe=yt()({name:"VTextarea",directives:{vIntersect:Xl},inheritAttrs:!1,props:MZe(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0,"update:rows":e=>!0},setup(e,t){let{attrs:n,emit:a,slots:r}=t;const s=ln(e,"modelValue"),{isFocused:o,focus:i,blur:c}=jc(e),{onIntersect:A}=t7(e),d=ae(()=>typeof e.counterValue=="function"?e.counterValue(s.value):(s.value||"").toString().length),f=ae(()=>{if(n.maxlength)return n.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),m=V(),h=V(),p=Ht(""),y=V(),g=ae(()=>e.persistentPlaceholder||o.value||e.active);function w(){y.value!==document.activeElement&&y.value?.focus(),o.value||i()}function b(P){w(),a("click:control",P)}function x(P){a("mousedown:control",P)}function T(P){P.stopPropagation(),w(),xn(()=>{s.value="",aw(e["onClick:clear"],P)})}function F(P){const O=P.target;if(s.value=O.value,e.modelModifiers?.trim){const H=[O.selectionStart,O.selectionEnd];xn(()=>{O.selectionStart=H[0],O.selectionEnd=H[1]})}}const k=V(),S=V(Number(e.rows)),E=ae(()=>["plain","underlined"].includes(e.variant));_r(()=>{e.autoGrow||(S.value=Number(e.rows))});function C(){e.autoGrow&&xn(()=>{if(!k.value||!h.value)return;const P=getComputedStyle(k.value),O=getComputedStyle(h.value.$el),H=parseFloat(P.getPropertyValue("--v-field-padding-top"))+parseFloat(P.getPropertyValue("--v-input-padding-top"))+parseFloat(P.getPropertyValue("--v-field-padding-bottom")),ie=k.value.scrollHeight,Ae=parseFloat(P.lineHeight),j=Math.max(parseFloat(e.rows)*Ae+H,parseFloat(O.getPropertyValue("--v-input-control-height"))),J=parseFloat(e.maxRows)*Ae+H||1/0,ue=tr(ie??0,j,J);S.value=Math.floor((ue-H)/Ae),p.value=Yt(ue)})}un(C),Ke(s,C),Ke(()=>e.rows,C),Ke(()=>e.maxRows,C),Ke(()=>e.density,C),Ke(S,P=>{a("update:rows",P)});let D;return Ke(k,P=>{P?(D=new ResizeObserver(C),D.observe(k.value)):D?.disconnect()}),da(()=>{D?.disconnect()}),St(()=>{const P=!!(r.counter||e.counter||e.counterValue),O=!!(P||r.details),[H,ie]=iA(n),{modelValue:Ae,...j}=Zs.filterProps(e),J={...rA.filterProps(e),"onClick:clear":T};return l(Zs,Ue({ref:m,modelValue:s.value,"onUpdate:modelValue":ue=>s.value=ue,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":E.value},e.class],style:e.style},H,j,{centerAffix:S.value===1&&!E.value,focused:o.value}),{...r,default:ue=>{let{id:ne,isDisabled:Y,isDirty:te,isReadonly:L,isValid:N,hasDetails:q}=ue;return l(rA,Ue({ref:h,style:{"--v-textarea-control-height":p.value},onClick:b,onMousedown:x,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},J,{id:ne.value,active:g.value||te.value,centerAffix:S.value===1&&!E.value,dirty:te.value||e.dirty,disabled:Y.value,focused:o.value,details:q.value,error:N.value===!1}),{...r,default:Q=>{let{props:{class:ee,...z}}=Q;return v(We,null,[e.prefix&&v("span",{class:"v-text-field__prefix"},[e.prefix]),ma(v("textarea",Ue({ref:y,class:ee,value:s.value,onInput:F,autofocus:e.autofocus,readonly:L.value,disabled:Y.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:w,onBlur:c},z,ie),null),[[Xl,{handler:A},null,{once:!0}]]),e.autoGrow&&ma(v("textarea",{class:ct([ee,"v-textarea__sizer"]),id:`${z.id}-sizer`,"onUpdate:modelValue":X=>s.value=X,ref:k,readonly:!0,"aria-hidden":"true"},null),[[GA,s.value]]),e.suffix&&v("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:O?ue=>v(We,null,[r.details?.(ue),P&&v(We,null,[v("span",null,null),l(Zw,{active:e.persistentCounter||o.value,value:d.value,max:f.value,disabled:e.disabled},r.counter)])]):void 0})}),Es({},m,h,y)}}),HZe=it({withBackground:Boolean,...tn(),...la(),...Nn()},"VThemeProvider"),$Ze=yt()({name:"VThemeProvider",props:HZe(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=ka(e);return()=>e.withBackground?l(e.tag,{class:ct(["v-theme-provider",a.value,e.class]),style:Rt(e.style)},{default:()=>[n.default?.()]}):n.default?.()}}),QZe=it({dotColor:String,fillDot:Boolean,hideDot:Boolean,icon:An,iconColor:String,lineColor:String,...tn(),...cr(),...Yu(),...es()},"VTimelineDivider"),GZe=yt()({name:"VTimelineDivider",props:QZe(),setup(e,t){let{slots:n}=t;const{sizeClasses:a,sizeStyles:r}=Ch(e,"v-timeline-divider__dot"),{backgroundColorStyles:s,backgroundColorClasses:o}=Fa(()=>e.dotColor),{roundedClasses:i}=xr(e,"v-timeline-divider__dot"),{elevationClasses:c}=Ss(e),{backgroundColorClasses:A,backgroundColorStyles:d}=Fa(()=>e.lineColor);return St(()=>v("div",{class:ct(["v-timeline-divider",{"v-timeline-divider--fill-dot":e.fillDot},e.class]),style:Rt(e.style)},[v("div",{class:ct(["v-timeline-divider__before",A.value]),style:Rt(d.value)},null),!e.hideDot&&v("div",{key:"dot",class:ct(["v-timeline-divider__dot",c.value,i.value,a.value]),style:Rt(r.value)},[v("div",{class:ct(["v-timeline-divider__inner-dot",o.value,i.value]),style:Rt(s.value)},[n.default?l(Ln,{key:"icon-defaults",disabled:!e.icon,defaults:{VIcon:{color:e.iconColor,icon:e.icon,size:e.size}}},n.default):l(Ea,{key:"icon",color:e.iconColor,icon:e.icon,size:e.size},null)])]),v("div",{class:ct(["v-timeline-divider__after",A.value]),style:Rt(d.value)},null)])),{}}}),kG=it({density:String,dotColor:String,fillDot:Boolean,hideDot:Boolean,hideOpposite:{type:Boolean,default:void 0},icon:An,iconColor:String,lineInset:[Number,String],side:{type:String,validator:e=>e==null||["start","end"].includes(e)},...tn(),...Lr(),...es(),...cr(),...Yu(),...Nn()},"VTimelineItem"),zZe=yt()({name:"VTimelineItem",props:kG(),setup(e,t){let{slots:n}=t;const{dimensionStyles:a}=Mr(e),r=Ht(0),s=V();return Ke(s,o=>{o&&(r.value=o.$el.querySelector(".v-timeline-divider__dot")?.getBoundingClientRect().width??0)},{flush:"post"}),St(()=>v("div",{class:ct(["v-timeline-item",{"v-timeline-item--fill-dot":e.fillDot,"v-timeline-item--side-start":e.side==="start","v-timeline-item--side-end":e.side==="end"},e.class]),style:Rt([{"--v-timeline-dot-size":Yt(r.value),"--v-timeline-line-inset":e.lineInset?`calc(var(--v-timeline-dot-size) / 2 + ${Yt(e.lineInset)})`:Yt(0)},e.style])},[v("div",{class:"v-timeline-item__body",style:Rt(a.value)},[n.default?.()]),l(GZe,{ref:s,hideDot:e.hideDot,icon:e.icon,iconColor:e.iconColor,size:e.size,elevation:e.elevation,dotColor:e.dotColor,fillDot:e.fillDot,rounded:e.rounded},{default:n.icon}),e.density!=="compact"&&v("div",{class:"v-timeline-item__opposite"},[!e.hideOpposite&&n.opposite?.()])])),{}}}),KZe=it({align:{type:String,default:"center",validator:e=>["center","start"].includes(e)},direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},justify:{type:String,default:"auto",validator:e=>["auto","center"].includes(e)},side:{type:String,validator:e=>e==null||["start","end"].includes(e)},lineThickness:{type:[String,Number],default:2},lineColor:String,truncateLine:{type:String,validator:e=>["start","end","both"].includes(e)},...Qc(kG({lineInset:0}),["dotColor","fillDot","hideOpposite","iconColor","lineInset","size"]),...tn(),...ds(),...Nn(),...la()},"VTimeline"),WZe=yt()({name:"VTimeline",props:KZe(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=ka(e),{densityClasses:r}=Eo(e),{rtlClasses:s}=Zr();wr({VTimelineDivider:{lineColor:Xe(()=>e.lineColor)},VTimelineItem:{density:Xe(()=>e.density),dotColor:Xe(()=>e.dotColor),fillDot:Xe(()=>e.fillDot),hideOpposite:Xe(()=>e.hideOpposite),iconColor:Xe(()=>e.iconColor),lineColor:Xe(()=>e.lineColor),lineInset:Xe(()=>e.lineInset),size:Xe(()=>e.size)}});const o=ae(()=>{const c=e.side?e.side:e.density!=="default"?"end":null;return c&&`v-timeline--side-${c}`}),i=ae(()=>{const c=["v-timeline--truncate-line-start","v-timeline--truncate-line-end"];switch(e.truncateLine){case"both":return c;case"start":return c[0];case"end":return c[1];default:return null}});return St(()=>l(e.tag,{class:ct(["v-timeline",`v-timeline--${e.direction}`,`v-timeline--align-${e.align}`,`v-timeline--justify-${e.justify}`,i.value,{"v-timeline--inset-line":!!e.lineInset},a.value,r.value,o.value,s.value,e.class]),style:Rt([{"--v-timeline-line-thickness":Yt(e.lineThickness)},e.style])},n)),{}}});function XA(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return String(e).padStart(t,"0")}const jZe=it({allowedValues:Function,ampm:Boolean,color:String,disabled:Boolean,displayedValue:null,double:Boolean,format:{type:Function,default:e=>e},max:{type:Number,required:!0},min:{type:Number,required:!0},scrollable:Boolean,readonly:Boolean,rotate:{type:Number,default:0},step:{type:Number,default:1},modelValue:{type:Number}},"VTimePickerClock"),xB=yt()({name:"VTimePickerClock",props:jZe(),emits:{change:e=>!0,input:e=>!0},setup(e,t){let{emit:n}=t;const a=V(null),r=V(null),s=V(void 0),o=V(!1),i=V(null),c=V(null),A=O8(ne=>n("change",ne),750),{textColorClasses:d,textColorStyles:f}=Ls(()=>e.color),{backgroundColorClasses:m,backgroundColorStyles:h}=Fa(()=>e.color),p=ae(()=>e.max-e.min+1),y=ae(()=>e.double?p.value/2:p.value),g=ae(()=>360/y.value),w=ae(()=>g.value*Math.PI/180),b=ae(()=>e.modelValue==null?e.min:e.modelValue),x=ae(()=>.62),T=ae(()=>{const ne=[];for(let Y=e.min;Y<=e.max;Y=Y+e.step)ne.push(Y);return ne});Ke(()=>e.modelValue,ne=>{s.value=ne});function F(ne){s.value!==ne&&(s.value=ne),n("input",ne)}function k(ne){return!e.allowedValues||e.allowedValues(ne)}function S(ne){if(!e.scrollable||e.disabled)return;ne.preventDefault();const Y=Math.sign(-ne.deltaY||1);let te=b.value;do te=te+Y,te=(te-e.min+p.value)%p.value+e.min;while(!k(te)&&te!==b.value);te!==e.displayedValue&&F(te),A(te)}function E(ne){return e.double&&ne-e.min>=y.value}function C(ne){return E(ne)?x.value:1}function D(ne){const Y=e.rotate*Math.PI/180;return{x:Math.sin((ne-e.min)*w.value+Y)*C(ne),y:-Math.cos((ne-e.min)*w.value+Y)*C(ne)}}function P(ne,Y){const te=(Math.round(ne/g.value)+(Y?y.value:0))%p.value+e.min;return ne<360-g.value/2?te:Y?e.max-y.value+1:e.min}function O(ne){const{x:Y,y:te}=D(ne);return{left:`${Math.round(50+Y*50)}%`,top:`${Math.round(50+te*50)}%`}}function H(ne,Y){const te=Y.x-ne.x,L=Y.y-ne.y;return Math.sqrt(te*te+L*L)}function ie(ne,Y){const te=2*Math.atan2(Y.y-ne.y-H(ne,Y),Y.x-ne.x);return Math.abs(te*180/Math.PI)}function Ae(ne){i.value===null&&(i.value=ne),c.value=ne,F(ne)}function j(ne){if(ne.preventDefault(),!o.value&&ne.type!=="click"||!a.value)return;const{width:Y,top:te,left:L}=a.value?.getBoundingClientRect(),{width:N}=r.value?.getBoundingClientRect()??{width:0},{clientX:q,clientY:Q}="touches"in ne?ne.touches[0]:ne,ee={x:Y/2,y:-Y/2},z={x:q-L,y:te-Q},X=Math.round(ie(ee,z)-e.rotate+360)%360,le=e.double&&H(ee,z)<(N+N*x.value)/4,re=Math.ceil(15/g.value);let de;for(let G=0;G<re;G++)if(de=P(X+G*g.value,le),k(de)||(de=P(X-G*g.value,le),k(de)))return Ae(de)}function J(ne){e.disabled||(ne.preventDefault(),window.addEventListener("mousemove",j),window.addEventListener("touchmove",j),window.addEventListener("mouseup",ue),window.addEventListener("touchend",ue),i.value=null,c.value=null,o.value=!0,j(ne))}function ue(ne){ne.stopPropagation(),window.removeEventListener("mousemove",j),window.removeEventListener("touchmove",j),window.removeEventListener("mouseup",ue),window.removeEventListener("touchend",ue),o.value=!1,c.value!==null&&k(c.value)&&n("change",c.value)}St(()=>v("div",{class:ct([{"v-time-picker-clock":!0,"v-time-picker-clock--indeterminate":e.modelValue==null,"v-time-picker-clock--readonly":e.readonly}]),onMousedown:J,onTouchstart:J,onWheel:S,ref:a},[v("div",{class:"v-time-picker-clock__inner",ref:r},[v("div",{class:ct([{"v-time-picker-clock__hand":!0,"v-time-picker-clock__hand--inner":E(e.modelValue)},d.value]),style:Rt([{transform:`rotate(${e.rotate+g.value*(b.value-e.min)}deg) scaleY(${C(b.value)})`},f.value])},null),T.value.map(ne=>{const Y=ne===b.value;return v("div",{class:ct([{"v-time-picker-clock__item":!0,"v-time-picker-clock__item--active":Y,"v-time-picker-clock__item--disabled":e.disabled||!k(ne)},Y&&m.value]),style:Rt([O(ne),Y&&h.value])},[v("span",null,[e.format(ne)])])})])]))}}),qZe=it({ampm:Boolean,color:String,disabled:Boolean,hour:Number,minute:Number,second:Number,period:String,readonly:Boolean,useSeconds:Boolean,value:Number,viewMode:String},"VTimePickerControls"),CB=yt()({name:"VTimePickerControls",props:qZe(),emits:{"update:period":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const{t:r}=Qa();return St(()=>{let s=e.hour;return e.ampm&&(s=s?(s-1)%12+1:12),v("div",{class:"v-time-picker-controls"},[v("div",{class:ct({"v-time-picker-controls__time":!0,"v-time-picker-controls__time--with-seconds":e.useSeconds})},[l(Jn,{active:e.viewMode==="hour",color:e.viewMode==="hour"?e.color:void 0,disabled:e.disabled,variant:"tonal",class:ct({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time--with-ampm__btn":e.ampm,"v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),text:e.hour==null?"--":XA(`${s}`),onClick:()=>n("update:viewMode","hour")},null),v("span",{class:ct(["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":e.useSeconds}])},[M(":")]),l(Jn,{active:e.viewMode==="minute",color:e.viewMode==="minute"?e.color:void 0,class:ct({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":e.viewMode==="minute","v-time-picker-controls__time--with-ampm__btn":e.ampm,"v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),disabled:e.disabled,variant:"tonal",text:e.minute==null?"--":XA(e.minute),onClick:()=>n("update:viewMode","minute")},null),e.useSeconds&&v("span",{class:ct(["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":e.useSeconds}]),key:"secondsDivider"},[M(":")]),e.useSeconds&&l(Jn,{key:"secondsVal",active:e.viewMode==="second",color:e.viewMode==="second"?e.color:void 0,variant:"tonal",onClick:()=>n("update:viewMode","second"),class:ct({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":e.viewMode==="second","v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),disabled:e.disabled,text:e.second==null?"--":XA(e.second)},null),e.ampm&&v("div",{class:"v-time-picker-controls__ampm"},[l(Jn,{active:e.period==="am",color:e.period==="am"?e.color:void 0,class:ct({"v-time-picker-controls__ampm__am":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":e.period==="am"}),disabled:e.disabled,text:r("$vuetify.timePicker.am"),variant:e.disabled&&e.period==="am"?"elevated":"tonal",onClick:()=>e.period!=="am"?n("update:period","am"):null},null),l(Jn,{active:e.period==="pm",color:e.period==="pm"?e.color:void 0,class:ct({"v-time-picker-controls__ampm__pm":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":e.period==="pm"}),disabled:e.disabled,text:r("$vuetify.timePicker.pm"),variant:e.disabled&&e.period==="pm"?"elevated":"tonal",onClick:()=>e.period!=="pm"?n("update:period","pm"):null},null)])])])}),{}}}),YZe=Bi(24),TG=Bi(12),XZe=TG.map(e=>e+12);Bi(60);const JZe=it({allowedHours:[Function,Array],allowedMinutes:[Function,Array],allowedSeconds:[Function,Array],disabled:Boolean,format:{type:String,default:"ampm"},max:String,min:String,viewMode:{type:String,default:"hour"},modelValue:null,readonly:Boolean,scrollable:Boolean,useSeconds:Boolean,...$a(ab({title:"$vuetify.timePicker.title"}),["landscape"])},"VTimePicker"),ZZe=yt()({name:"VTimePicker",props:JZe(),emits:{"update:hour":e=>!0,"update:minute":e=>!0,"update:period":e=>!0,"update:second":e=>!0,"update:modelValue":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const{t:r}=Qa(),s=V(null),o=V(null),i=V(null),c=V(null),A=V(null),d=V(null),f=V("am"),m=ln(e,"viewMode","hour"),h=V(null),p=V(null),y=ae(()=>{let O;if(e.allowedHours instanceof Array?O=Ae=>e.allowedHours.includes(Ae):O=e.allowedHours,!e.min&&!e.max)return O;const H=e.min?Number(e.min.split(":")[0]):0,ie=e.max?Number(e.max.split(":")[0]):23;return Ae=>Ae>=Number(H)&&Ae<=Number(ie)&&(!O||O(Ae))}),g=ae(()=>{let O;const H=!y.value||s.value===null||y.value(s.value);if(e.allowedMinutes instanceof Array?O=Y=>e.allowedMinutes.includes(Y):O=e.allowedMinutes,!e.min&&!e.max)return H?O:()=>!1;const[ie,Ae]=e.min?e.min.split(":").map(Number):[0,0],[j,J]=e.max?e.max.split(":").map(Number):[23,59],ue=ie*60+Number(Ae),ne=j*60+Number(J);return Y=>{const te=60*s.value+Y;return te>=ue&&te<=ne&&H&&(!O||O(Y))}}),w=ae(()=>{let O;const ie=(!y.value||s.value===null||y.value(s.value))&&(!g.value||o.value===null||g.value(o.value));if(e.allowedSeconds instanceof Array?O=N=>e.allowedSeconds.includes(N):O=e.allowedSeconds,!e.min&&!e.max)return ie?O:()=>!1;const[Ae,j,J]=e.min?e.min.split(":").map(Number):[0,0,0],[ue,ne,Y]=e.max?e.max.split(":").map(Number):[23,59,59],te=Ae*3600+j*60+Number(J||0),L=ue*3600+ne*60+Number(Y||0);return N=>{const q=3600*s.value+60*o.value+N;return q>=te&&q<=L&&ie&&(!O||O(N))}}),b=ae(()=>e.format==="ampm");Ke(()=>e.modelValue,O=>S(O)),un(()=>{S(e.modelValue)});function x(){return s.value!=null&&o.value!=null&&(!e.useSeconds||i.value!=null)?`${XA(s.value)}:${XA(o.value)}`+(e.useSeconds?`:${XA(i.value)}`:""):null}function T(){const O=x();O!==null&&n("update:modelValue",O)}function F(O){return O?(O-1)%12+1:12}function k(O,H){return O%12+(H==="pm"?12:0)}function S(O){if(O==null||O==="")s.value=null,o.value=null,i.value=null;else if(O instanceof Date)s.value=O.getHours(),o.value=O.getMinutes(),i.value=O.getSeconds();else{const[H,,ie,,Ae,j]=O.trim().toLowerCase().match(/^(\d+):(\d+)(:(\d+))?([ap]m)?$/)||new Array(6);s.value=j?k(parseInt(H,10),j):parseInt(H,10),o.value=parseInt(ie,10),i.value=parseInt(Ae||0,10)}f.value=s.value==null||s.value<12?"am":"pm"}function E(O,H){const ie=y.value;if(!ie)return H;const Ae=b.value?H<12?TG:XZe:YZe;return((Ae.find(J=>ie((J+H)%Ae.length+Ae[0]))||0)+H)%Ae.length+Ae[0]}function C(O){if(f.value=O,s.value!=null){const H=s.value+(f.value==="am"?-12:12);s.value=E("hour",H)}return n("update:period",O),T(),!0}function D(O){m.value==="hour"?s.value=b.value?k(O,f.value):O:m.value==="minute"?o.value=O:i.value=O}function P(O){switch(m.value||"hour"){case"hour":n("update:hour",O);break;case"minute":n("update:minute",O);break;case"second":n("update:second",O);break}const H=s.value!==null&&o.value!==null&&(e.useSeconds?i.value!==null:!0);m.value==="hour"?m.value="minute":e.useSeconds&&m.value==="minute"&&(m.value="second"),!(s.value===c.value&&o.value===A.value&&(!e.useSeconds||i.value===d.value)||x()===null)&&(c.value=s.value,A.value=o.value,e.useSeconds&&(d.value=i.value),H&&T())}St(()=>{const O=Jv.filterProps(e),H=CB.filterProps(e),ie=xB.filterProps($a(e,["format","modelValue","min","max"]));return l(Jv,Ue(O,{color:void 0,class:["v-time-picker",e.class],style:e.style}),{title:()=>a.title?.()??v("div",{class:"v-time-picker__title"},[r(e.title)]),header:()=>l(CB,Ue(H,{ampm:b.value,hour:s.value,minute:o.value,period:f.value,second:i.value,viewMode:m.value,"onUpdate:period":Ae=>C(Ae),"onUpdate:viewMode":Ae=>m.value=Ae,ref:h}),null),default:()=>l(xB,Ue(ie,{allowedValues:m.value==="hour"?y.value:m.value==="minute"?g.value:w.value,double:m.value==="hour"&&!b.value,format:m.value==="hour"?b.value?F:Ae=>Ae:Ae=>XA(Ae,2),max:m.value==="hour"?b.value&&f.value==="am"?11:23:59,min:m.value==="hour"&&b.value&&f.value==="pm"?12:0,size:20,step:m.value==="hour"?1:5,modelValue:m.value==="hour"?s.value:m.value==="minute"?o.value:i.value,onChange:P,onInput:D,ref:p}),null),actions:a.actions})})}}),eet=it({...tn(),...ml({variant:"text"})},"VToolbarItems"),tet=yt()({name:"VToolbarItems",props:eet(),setup(e,t){let{slots:n}=t;return wr({VBtn:{color:Xe(()=>e.color),height:"inherit",variant:Xe(()=>e.variant)}}),St(()=>v("div",{class:ct(["v-toolbar-items",e.class]),style:Rt(e.style)},[n.default?.()])),{}}}),net=it({id:String,interactive:Boolean,text:String,...$a(Gg({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:null}),["absolute","persistent"])},"VTooltip"),IG=yt()({name:"VTooltip",props:net(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=ln(e,"modelValue"),{scopeId:r}=sm(),s=Go(),o=Xe(()=>e.id||`v-tooltip-${s}`),i=V(),c=ae(()=>e.location.split(" ").length>1?e.location:e.location+" center"),A=ae(()=>e.origin==="auto"||e.origin==="overlap"||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),d=Xe(()=>e.transition!=null?e.transition:a.value?"scale-transition":"fade-transition"),f=ae(()=>Ue({"aria-describedby":o.value},e.activatorProps));return St(()=>{const m=Ou.filterProps(e);return l(Ou,Ue({ref:i,class:["v-tooltip",{"v-tooltip--interactive":e.interactive},e.class],style:e.style,id:o.value},m,{modelValue:a.value,"onUpdate:modelValue":h=>a.value=h,transition:d.value,absolute:!0,location:c.value,origin:A.value,persistent:!0,role:"tooltip",activatorProps:f.value,_disableGlobalStack:!0},r),{activator:n.activator,default:function(){for(var h=arguments.length,p=new Array(h),y=0;y<h;y++)p[y]=arguments[y];return n.default?.(...p)??e.text}})}),Es({},i)}}),aet=it({...$a(NQ({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand"}),["subgroup"])},"VTreeviewGroup"),SB=yt()({name:"VTreeviewGroup",props:aet(),setup(e,t){let{slots:n}=t;const a=V(),r=ae(()=>a.value?.isOpen?e.collapseIcon:e.expandIcon),s=ae(()=>({VTreeviewItem:{prependIcon:void 0,appendIcon:void 0,toggleIcon:r.value}}));return St(()=>{const o=ng.filterProps(e);return l(ng,Ue(o,{ref:a,class:["v-treeview-group",e.class],subgroup:!0}),{...n,activator:n.activator?i=>v(We,null,[l(Ln,{defaults:s.value},{default:()=>[n.activator?.(i)]})]):void 0})}),{}}}),FG=Symbol.for("vuetify:v-treeview"),PG=it({loading:Boolean,hideActions:Boolean,indentLines:Array,toggleIcon:An,...MQ({slim:!0})},"VTreeviewItem"),EB=yt()({name:"VTreeviewItem",props:PG(),emits:{toggleExpand:e=>!0},setup(e,t){let{slots:n,emit:a}=t;const r=Tn(FG,{visibleIds:V()}).visibleIds,s=V(),o=ae(()=>s.value?.root.activatable.value&&s.value?.isGroupActivator),i=ae(()=>s.value?.link.isClickable.value||e.value!=null&&!!s.value?.list),c=ae(()=>!e.disabled&&e.link!==!1&&(e.link||i.value||o.value)),A=ae(()=>r.value&&!r.value.has(Cn(s.value?.id)));function d(m){c.value&&o.value&&s.value?.activate(!s.value?.isActivated,m)}function f(m){m.preventDefault(),m.stopPropagation(),a("toggleExpand",m)}return St(()=>{const m=Jl.filterProps(e),h=n.prepend||e.toggleIcon||e.indentLines;return l(Jl,Ue({ref:s},m,{active:s.value?.isActivated||void 0,class:["v-treeview-item",{"v-treeview-item--activatable-group-activator":o.value,"v-treeview-item--filtered":A.value},e.class],ripple:!1,onClick:d}),{...n,prepend:h?p=>v(We,null,[e.indentLines&&e.indentLines.length>0?v("div",{key:"indent-lines",class:"v-treeview-indent-lines",style:{"--v-indent-parts":e.indentLines.length}},[e.indentLines.map(y=>v("div",{class:ct(`v-treeview-indent-line v-treeview-indent-line--${y}`)},null))]):"",!e.hideActions&&l(KQ,{start:!0},{default:()=>[e.toggleIcon?l(Jn,{density:"compact",icon:e.toggleIcon,loading:e.loading,variant:"text",onClick:f},{loader:()=>l(kf,{indeterminate:"disable-shrink",size:"20",width:"2"},null)}):v("div",{class:"v-treeview-item__level"},null)]}),n.prepend?.(p)]):void 0})}),Es({},s)}}),DG=it({fluid:Boolean,disabled:Boolean,loadChildren:Function,loadingIcon:{type:String,default:"$loading"},items:Array,openOnClick:{type:Boolean,default:void 0},indeterminateIcon:{type:An,default:"$checkboxIndeterminate"},falseIcon:An,trueIcon:An,returnObject:Boolean,activatable:Boolean,selectable:Boolean,selectedColor:String,selectStrategy:[String,Function,Object],index:Number,isLastGroup:Boolean,separateRoots:Boolean,parentIndentLines:Array,indentLinesVariant:String,path:{type:Array,default:()=>[]},...Qc(PG(),["hideActions"]),...ds()},"VTreeviewChildren"),F2=yt()({name:"VTreeviewChildren",props:DG(),setup(e,t){let{slots:n}=t;const a=is(new Set),r=V([]),s=ae(()=>!e.disabled&&(e.openOnClick!=null?e.openOnClick:e.selectable&&!e.activatable));async function o(c){try{if(!e.items?.length||!e.loadChildren)return;c?.children?.length===0&&(a.add(c.value),await e.loadChildren(c.raw))}finally{a.delete(c.value)}}function i(c,A){e.selectable&&c(A)}return()=>n.default?.()??e.items?.map((c,A,d)=>{const{children:f,props:m}=c,h=a.has(c.value),p=!!d.at(A+1)?.children,y=e.path?.length??0,g=d.length-1===A,w={index:A,depth:y,isFirst:A===0,isLast:g,path:[...e.path,A],hideAction:e.hideActions},b=Wte({depth:y,isLast:g,isLastGroup:e.isLastGroup,leafLinks:!e.hideActions&&!e.fluid,separateRoots:e.separateRoots,parentIndentLines:e.parentIndentLines,variant:e.indentLinesVariant}),x={prepend:k=>v(We,null,[e.selectable&&(!f||f&&!["leaf","single-leaf"].includes(e.selectStrategy))&&v("div",null,[l(Mu,{key:c.value,modelValue:k.isSelected,disabled:e.disabled,loading:h,color:e.selectedColor,density:e.density,indeterminate:k.isIndeterminate,indeterminateIcon:e.indeterminateIcon,falseIcon:e.falseIcon,trueIcon:e.trueIcon,"onUpdate:modelValue":S=>i(k.select,S),onClick:S=>S.stopPropagation(),onKeydown:S=>{["Enter","Space"].includes(S.key)&&(S.stopPropagation(),i(k.select,k.isSelected))}},null)]),n.prepend?.({...k,...w,item:c.raw,internalItem:c})]),append:n.append?k=>n.append?.({...k,...w,item:c.raw,internalItem:c}):void 0,title:n.title?k=>n.title?.({...k,item:c.raw,internalItem:c}):void 0,subtitle:n.subtitle?k=>n.subtitle?.({...k,item:c.raw,internalItem:c}):void 0},T=SB.filterProps(m),F=F2.filterProps({...e,...w});return f?l(SB,Ue(T,{value:e.returnObject?c.raw:T?.value,rawId:T?.value}),{activator:k=>{let{props:S}=k;const E={...m,...S,value:m?.value,onToggleExpand:[()=>o(c),S.onClick],onClick:s.value?[()=>o(c),S.onClick]:()=>i(r.value[A]?.select,!r.value[A]?.isSelected)};return l(EB,Ue({ref:C=>r.value[A]=C},E,{hideActions:e.hideActions,indentLines:b.node,value:e.returnObject?c.raw:m.value,loading:h}),x)},default:()=>l(F2,Ue(F,{items:f,indentLinesVariant:e.indentLinesVariant,parentIndentLines:b.children,isLastGroup:p,returnObject:e.returnObject}),n)}):kx(n.item,{props:m,item:c.raw,internalItem:c},()=>c.type==="divider"?kx(n.divider,{props:c.raw},()=>l(Ii,c.props,null)):c.type==="subheader"?kx(n.subheader,{props:c.raw},()=>l(Th,c.props,null)):l(EB,Ue(m,{hideActions:e.hideActions,indentLines:b.leaf,value:e.returnObject?Cn(c.raw):m.value}),x))})}});function UG(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];for(const n of e)t.push(n),n.children&&UG(n.children,t);return t}const ret=it({openAll:Boolean,indentLines:[Boolean,String],search:String,...Ih({filterKeys:["title"]}),...$a(DG(),["index","path","indentLinesVariant","parentIndentLines","isLastGroup"]),...$a(zQ({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand",slim:!0}),["nav","openStrategy"]),modelValue:Array},"VTreeview"),set=yt()({name:"VTreeview",props:ret(),emits:{"update:opened":e=>!0,"update:activated":e=>!0,"update:selected":e=>!0,"update:modelValue":e=>!0,"click:open":e=>!0,"click:select":e=>!0},setup(e,t){let{slots:n,emit:a}=t;const{items:r}=GQ(e),s=Xe(()=>e.activeColor),o=Xe(()=>e.baseColor),i=Xe(()=>e.color),c=ln(e,"activated"),A=ln(e,"selected"),d=ae({get:()=>e.modelValue??A.value,set(x){A.value=x,a("update:modelValue",x)}}),f=V(),m=ae(()=>e.openAll?b(r.value):e.opened),h=ae(()=>UG(r.value)),p=Xe(()=>e.search),{filteredItems:y}=Fh(e,h,p),g=ae(()=>{if(!p.value)return null;const x=f.value?.getPath;return x?new Set(y.value.flatMap(T=>{const F=e.returnObject?T.raw:T.props.value;return[...x(F),...w(F)].map(Cn)})):null});function w(x){const T=[],F=(f.value?.children.get(x)??[]).slice();for(;F.length;){const k=F.shift();k&&(T.push(k),F.push(...(f.value?.children.get(k)??[]).slice()))}return T}function b(x){let T=[];for(const F of x)F.children&&(T.push(e.returnObject?Cn(F.raw):F.value),F.children&&(T=T.concat(b(F.children))));return T}return Ha(FG,{visibleIds:g}),wr({VTreeviewGroup:{activeColor:s,baseColor:o,color:i,collapseIcon:Xe(()=>e.collapseIcon),expandIcon:Xe(()=>e.expandIcon)},VTreeviewItem:{activeClass:Xe(()=>e.activeClass),activeColor:s,baseColor:o,color:i,density:Xe(()=>e.density),disabled:Xe(()=>e.disabled),lines:Xe(()=>e.lines),variant:Xe(()=>e.variant)}}),St(()=>{const x=Yv.filterProps(e),T=F2.filterProps(e),F=typeof e.indentLines=="boolean"?"default":e.indentLines;return l(Yv,Ue({ref:f},x,{class:["v-treeview",{"v-treeview--fluid":e.fluid},e.class],openStrategy:"multiple",style:e.style,opened:m.value,activated:c.value,"onUpdate:activated":k=>c.value=k,selected:d.value,"onUpdate:selected":k=>d.value=k}),{default:()=>[l(F2,Ue(T,{density:e.density,returnObject:e.returnObject,items:r.value,parentIndentLines:e.indentLines?[]:void 0,indentLinesVariant:F}),n)]})}),{}}}),oet=yt()({name:"VValidation",props:bQ(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const a=xQ(e,"validation");return()=>n.default?.(a)}}),iet=Object.freeze(Object.defineProperty({__proto__:null,VAlert:pje,VAlertTitle:vQ,VApp:CWe,VAppBar:GWe,VAppBarNavIcon:dje,VAppBarTitle:Aje,VAutocomplete:Nqe,VAvatar:ul,VBadge:Lqe,VBanner:Hqe,VBannerActions:o7,VBannerText:i7,VBottomNavigation:Qqe,VBottomSheet:zqe,VBreadcrumbs:qqe,VBreadcrumbsDivider:u7,VBreadcrumbsItem:c7,VBtn:Jn,VBtnGroup:ZE,VBtnToggle:YWe,VCard:eYe,VCardActions:d7,VCardItem:m7,VCardSubtitle:A7,VCardText:v7,VCardTitle:f7,VCarousel:uYe,VCarouselItem:dYe,VCheckbox:kje,VCheckboxBtn:Mu,VChip:kh,VChipGroup:Dje,VClassIcon:xk,VCode:AYe,VCol:HXe,VColorPicker:tXe,VCombobox:aXe,VComponentIcon:US,VConfirmEdit:sXe,VContainer:VXe,VCounter:Zw,VDataIterator:vXe,VDataTable:FXe,VDataTableFooter:rg,VDataTableHeaders:Ff,VDataTableRow:R4,VDataTableRows:Pf,VDataTableServer:RXe,VDataTableVirtual:DXe,VDatePicker:ZXe,VDatePickerControls:vB,VDatePickerHeader:hB,VDatePickerMonth:pB,VDatePickerMonths:gB,VDatePickerYears:yB,VDefaultsProvider:Ln,VDialog:iB,VDialogBottomTransition:kWe,VDialogTopTransition:TWe,VDialogTransition:Ww,VDivider:Ii,VEmptyState:tJe,VExpandTransition:jw,VExpandXTransition:l4,VExpansionPanel:nJe,VExpansionPanelText:_B,VExpansionPanelTitle:wB,VExpansionPanels:sJe,VFab:iJe,VFabTransition:BWe,VFadeTransition:Y0,VField:rA,VFieldLabel:Vp,VFileInput:cJe,VFooter:AJe,VForm:mJe,VHover:hJe,VIcon:Ea,VImg:Oc,VInfiniteScroll:gJe,VInput:Zs,VItem:wJe,VItemGroup:_Je,VKbd:xJe,VLabel:Bh,VLayout:SJe,VLayoutItem:BJe,VLazy:TJe,VLigatureIcon:Wne,VList:Yv,VListGroup:ng,VListImg:Zje,VListItem:Jl,VListItemAction:KQ,VListItemMedia:nqe,VListItemSubtitle:VQ,VListItemTitle:LQ,VListSubheader:Th,VLocaleProvider:FJe,VMain:DJe,VMenu:Xv,VMessages:_Q,VNavigationDrawer:$Je,VNoSsr:QJe,VNumberInput:jJe,VOtpInput:YJe,VOverlay:Ou,VPagination:fB,VParallax:ZJe,VProgressCircular:kf,VProgressLinear:qw,VRadio:tZe,VRadioGroup:aZe,VRangeSlider:sZe,VRating:iZe,VResponsive:XE,VRow:jXe,VScaleTransition:o4,VScrollXReverseTransition:FWe,VScrollXTransition:IWe,VScrollYReverseTransition:DWe,VScrollYTransition:PWe,VSelect:x4,VSelectionControl:aA,VSelectionControlGroup:pQ,VSheet:ag,VSkeletonLoader:dZe,VSlideGroup:eg,VSlideGroupItem:AZe,VSlideXReverseTransition:RWe,VSlideXTransition:UWe,VSlideYReverseTransition:NWe,VSlideYTransition:i4,VSlider:AB,VSnackbar:bB,VSnackbarQueue:vZe,VSpacer:rG,VSparkline:yZe,VSpeedDial:wZe,VStepper:kZe,VStepperActions:_G,VStepperHeader:wG,VStepperItem:bG,VStepperWindow:xG,VStepperWindowItem:CG,VSvgIcon:bk,VSwitch:IZe,VSystemBar:PZe,VTab:SG,VTable:Df,VTabs:LZe,VTabsWindow:EG,VTabsWindowItem:BG,VTextField:Hc,VTextarea:OZe,VThemeProvider:$Ze,VTimePicker:ZZe,VTimePickerClock:xB,VTimePickerControls:CB,VTimeline:WZe,VTimelineItem:zZe,VToolbar:JE,VToolbarItems:tet,VToolbarTitle:s4,VTooltip:IG,VTreeview:set,VTreeviewGroup:SB,VTreeviewItem:EB,VValidation:oet,VVirtualScroll:eb,VWindow:Tf,VWindowItem:If},Symbol.toStringTag,{value:"Module"}));function uet(e,t){const n=t.modifiers||{},a=t.value,{once:r,immediate:s,...o}=n,i=!Object.keys(o).length,{handler:c,options:A}=typeof a=="object"?a:{handler:a,options:{attributes:o?.attr??i,characterData:o?.char??i,childList:o?.child??i,subtree:o?.sub??i}},d=new MutationObserver(function(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],m=arguments.length>1?arguments[1]:void 0;c?.(f,m),r&&RG(e,t)});s&&c?.([],d),e._mutate=Object(e._mutate),e._mutate[t.instance.$.uid]={observer:d},d.observe(e,A)}function RG(e,t){e._mutate?.[t.instance.$.uid]&&(e._mutate[t.instance.$.uid].observer.disconnect(),delete e._mutate[t.instance.$.uid])}const cet={mounted:uet,unmounted:RG};function det(e,t){const n=t.value,a={passive:!t.modifiers?.active};window.addEventListener("resize",n,a),e._onResize=Object(e._onResize),e._onResize[t.instance.$.uid]={handler:n,options:a},t.modifiers?.quiet||n()}function Aet(e,t){if(!e._onResize?.[t.instance.$.uid])return;const{handler:n,options:a}=e._onResize[t.instance.$.uid];window.removeEventListener("resize",n,a),delete e._onResize[t.instance.$.uid]}const fet={mounted:det,unmounted:Aet};function NG(e,t){const{self:n=!1}=t.modifiers??{},a=t.value,r=typeof a=="object"&&a.options||{passive:!0},s=typeof a=="function"||"handleEvent"in a?a:a.handler,o=n?e:t.arg?document.querySelector(t.arg):window;o&&(o.addEventListener("scroll",s,r),e._onScroll=Object(e._onScroll),e._onScroll[t.instance.$.uid]={handler:s,options:r,target:n?void 0:o})}function VG(e,t){if(!e._onScroll?.[t.instance.$.uid])return;const{handler:n,options:a,target:r=e}=e._onScroll[t.instance.$.uid];r.removeEventListener("scroll",n,a),delete e._onScroll[t.instance.$.uid]}function met(e,t){t.value!==t.oldValue&&(VG(e,t),NG(e,t))}const vet={mounted:NG,unmounted:VG,updated:met};function het(e,t){const n=typeof e=="string"?I(e):e,a=pet(n,t);return{mounted:a,updated:a,unmounted(r){R8(null,r)}}}function pet(e,t){return function(n,a,r){const s=typeof t=="function"?t(a):t,o=a.value?.text??a.value??s?.text,i=C0(a.value)?a.value:{},c=()=>o??n.textContent,A=(r.ctx===a.instance.$?get(r,a.instance.$)?.provides:r.ctx?.provides)??a.instance.$.provides,d=au(e,Ue(s,i),c);d.appContext=Object.assign(Object.create(null),a.instance.$.appContext,{provides:A}),R8(d,n)}}function get(e,t){const n=new Set,a=s=>{for(const o of s){if(!o)continue;if(o===e||o.el&&e.el&&o.el===e.el)return!0;n.add(o);let i;if(o.suspense?i=a([o.ssContent]):Array.isArray(o.children)?i=a(o.children):o.component?.vnode&&(i=a([o.component?.subTree])),i)return i;n.delete(o)}return!1};if(!a([t.subTree]))return t;const r=Array.from(n).reverse();for(const s of r)if(s.component)return s.component;return t}const yet=het(IG,e=>({activator:"parent",location:e.arg?.replace("-"," "),text:typeof e.value=="boolean"?void 0:e.value})),_et=Object.freeze(Object.defineProperty({__proto__:null,ClickOutside:oB,Intersect:Xl,Mutate:cet,Resize:fet,Ripple:Co,Scroll:vet,Tooltip:yet,Touch:T2},Symbol.toStringTag,{value:"Module"}));const wet=new Map,bet={activated:!1,tokenObservers:[]};function Zl(e){return wet.get(e)||Object.assign({},bet)}const XN={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3};class xet{constructor(t,n,a,r,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=a,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new F0,this.pending.promise.catch(n=>{}),await Cet(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new F0,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function Cet(e){return new Promise(t=>{setTimeout(t,e)})}const Eet={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},P2=new lh("appCheck","AppCheck",Eet);function LG(e){if(!Zl(e).activated)throw P2.create("use-before-activation",{appName:e.name})}const Bet="firebase-app-check-database",ket=1,BB="firebase-app-check-store";let Uy=null;function Tet(){return Uy||(Uy=new Promise((e,t)=>{try{const n=indexedDB.open(Bet,ket);n.onsuccess=a=>{e(a.target.result)},n.onerror=a=>{var r;t(P2.create("storage-open",{originalErrorMessage:(r=a.target.error)===null||r===void 0?void 0:r.message}))},n.onupgradeneeded=a=>{const r=a.target.result;switch(a.oldVersion){case 0:r.createObjectStore(BB,{keyPath:"compositeKey"})}}}catch(n){t(P2.create("storage-open",{originalErrorMessage:n?.message}))}}),Uy)}function Iet(e,t){return Fet(Pet(e),t)}async function Fet(e,t){const a=(await Tet()).transaction(BB,"readwrite"),s=a.objectStore(BB).put({compositeKey:e,value:t});return new Promise((o,i)=>{s.onsuccess=c=>{o()},a.onerror=c=>{var A;i(P2.create("storage-set",{originalErrorMessage:(A=c.target.error)===null||A===void 0?void 0:A.message}))}})}function Pet(e){return`${e.options.appId}-${e.name}`}const kB=new _g("@firebase/app-check");function JN(e,t){return b5()?Iet(e,t).catch(n=>{kB.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}const Det={error:"UNKNOWN_ERROR"};function Uet(e){return vw.encodeString(JSON.stringify(e),!1)}async function TB(e,t=!1,n=!1){const a=e.app;LG(a);const r=Zl(a);let s=r.token,o;if(s&&!Lp(s)&&(r.token=void 0,s=void 0),!s){const A=await r.cachedTokenPromise;A&&(Lp(A)?s=A:await JN(a,void 0))}if(!t&&s&&Lp(s))return{token:s.token};let i=!1;try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),i=!0),s=await Zl(a).exchangeTokenPromise}catch(A){A.code==="appCheck/throttled"||A.code==="appCheck/initial-throttle"?kB.warn(A.message):n&&kB.error(A),o=A}let c;return s?o?Lp(s)?c={token:s.token,internalError:o}:c=eV(o):(c={token:s.token},r.token=s,await JN(a,s)):c=eV(o),i&&Let(a,c),c}async function Ret(e){const t=e.app;LG(t);const{provider:n}=Zl(t);{const{token:a}=await n.getToken();return{token:a}}}function Net(e,t,n,a){const{app:r}=e,s=Zl(r),o={next:n,error:a,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Lp(s.token)){const i=s.token;Promise.resolve().then(()=>{n({token:i.token}),ZN(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>ZN(e))}function MG(e,t){const n=Zl(e),a=n.tokenObservers.filter(r=>r.next!==t);a.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=a}function ZN(e){const{app:t}=e,n=Zl(t);let a=n.tokenRefresher;a||(a=Vet(e),n.tokenRefresher=a),!a.isRunning()&&n.isTokenAutoRefreshEnabled&&a.start()}function Vet(e){const{app:t}=e;return new xet(async()=>{const n=Zl(t);let a;if(n.token?a=await TB(e,!0):a=await TB(e),a.error)throw a.error;if(a.internalError)throw a.internalError},()=>!0,()=>{const n=Zl(t);if(n.token){let a=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const r=n.token.expireTimeMillis-300*1e3;return a=Math.min(a,r),Math.max(0,a-Date.now())}else return 0},XN.RETRIAL_MIN_WAIT,XN.RETRIAL_MAX_WAIT)}function Let(e,t){const n=Zl(e).tokenObservers;for(const a of n)try{a.type==="EXTERNAL"&&t.error!=null?a.error(t.error):a.next(t)}catch{}}function Lp(e){return e.expireTimeMillis-Date.now()>0}function eV(e){return{token:Uet(Det),error:e}}class Met{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=Zl(this.app);for(const n of t)MG(this.app,n.next);return Promise.resolve()}}function Oet(e,t){return new Met(e,t)}function Het(e){return{getToken:t=>TB(e,t),getLimitedUseToken:()=>Ret(e),addTokenListener:t=>Net(e,"INTERNAL",t),removeTokenListener:t=>MG(e.app,t)}}const $et="@firebase/app-check",Qet="0.10.1",Get="app-check",tV="app-check-internal";function zet(){Nu(new jl(Get,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return Oet(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(tV).initialize()})),Nu(new jl(tV,e=>{const t=e.getProvider("app-check").getImmediate();return Het(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),Fi($et,Qet)}zet();const OG=Symbol("firebaseApp");function Ket(e){return Of()&&Tn(OG,null)||k5(e)}const Ry=new WeakMap;function Wet(e,t){if(!Ry.has(e)){const n=Hd(!0);Ry.set(e,n);const{unmount:a}=t;t.unmount=()=>{a.call(t),n.stop(),Ry.delete(e)}}return Ry.get(e)}const jet=new WeakMap,Ny=new WeakMap;function qet(e){const t=Ket(e);if(!Ny.has(t)){let n;const r=[new Promise(s=>{n=s}),s=>{Ny.set(t,s),n(s.value)}];Ny.set(t,r)}return Ny.get(t)}function Yet(e,t){eM(t,n=>{const a=qet();e.value=n,Array.isArray(a)&&a[1](e)})}var nV={};const aV="@firebase/database",rV="1.0.20";let HG="";function Xet(e){HG=e}class Jet{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Ws(n))}get(t){const n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:P0(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class Zet{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return zc(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const $G=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Jet(t)}}catch{}return new Zet},JA=$G("localStorage"),ett=$G("sessionStorage");const Sv=new _g("@firebase/database"),ttt=(function(){let e=1;return function(){return e++}})(),QG=function(e){const t=$oe(e),n=new Voe;n.update(t);const a=n.digest();return vw.encodeByteArray(a)},Wg=function(...e){let t="";for(let n=0;n<e.length;n++){const a=e[n];Array.isArray(a)||a&&typeof a=="object"&&typeof a.length=="number"?t+=Wg.apply(null,a):typeof a=="object"?t+=Ws(a):t+=a,t+=" "}return t};let d0=null,sV=!0;const ntt=function(e,t){on(!0,"Can't turn on custom loggers persistently."),Sv.logLevel=Ya.VERBOSE,d0=Sv.log.bind(Sv)},uo=function(...e){if(sV===!0&&(sV=!1,d0===null&&ett.get("logging_enabled")===!0&&ntt()),d0){const t=Wg.apply(null,e);d0(t)}},jg=function(e){return function(...t){uo(e,...t)}},IB=function(...e){const t="FIREBASE INTERNAL ERROR: "+Wg(...e);Sv.error(t)},Uf=function(...e){const t=`FIREBASE FATAL ERROR: ${Wg(...e)}`;throw Sv.error(t),new Error(t)},Pi=function(...e){const t="FIREBASE WARNING: "+Wg(...e);Sv.warn(t)},att=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Pi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},GG=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},rtt=function(e){if(document.readyState==="complete")e();else{let t=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Zv="[MIN_NAME]",Rf="[MAX_NAME]",Ph=function(e,t){if(e===t)return 0;if(e===Zv||t===Rf)return-1;if(t===Zv||e===Rf)return 1;{const n=oV(e),a=oV(t);return n!==null?a!==null?n-a===0?e.length-t.length:n-a:-1:a!==null?1:e<t?-1:1}},stt=function(e,t){return e===t?0:e<t?-1:1},gp=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Ws(t))},$4=function(e){if(typeof e!="object"||e===null)return Ws(e);const t=[];for(const a in e)t.push(a);t.sort();let n="{";for(let a=0;a<t.length;a++)a!==0&&(n+=","),n+=Ws(t[a]),n+=":",n+=$4(e[t[a]]);return n+="}",n},zG=function(e,t){const n=e.length;if(n<=t)return[e];const a=[];for(let r=0;r<n;r+=t)r+t>n?a.push(e.substring(r,n)):a.push(e.substring(r,r+t));return a};function cl(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const KG=function(e){on(!GG(e),"Invalid JSON number");const t=11,n=52,a=(1<<t-1)-1;let r,s,o,i,c;e===0?(s=0,o=0,r=1/e===-1/0?1:0):(r=e<0,e=Math.abs(e),e>=Math.pow(2,1-a)?(i=Math.min(Math.floor(Math.log(e)/Math.LN2),a),s=i+a,o=Math.round(e*Math.pow(2,n-i)-Math.pow(2,n))):(s=0,o=Math.round(e/Math.pow(2,1-a-n))));const A=[];for(c=n;c;c-=1)A.push(o%2?1:0),o=Math.floor(o/2);for(c=t;c;c-=1)A.push(s%2?1:0),s=Math.floor(s/2);A.push(r?1:0),A.reverse();const d=A.join("");let f="";for(c=0;c<64;c+=8){let m=parseInt(d.substr(c,8),2).toString(16);m.length===1&&(m="0"+m),f=f+m}return f.toLowerCase()},ott=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},itt=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},ltt=new RegExp("^-?(0*)\\d{1,10}$"),utt=-2147483648,ctt=2147483647,oV=function(e){if(ltt.test(e)){const t=Number(e);if(t>=utt&&t<=ctt)return t}return null},qg=function(e){try{e()}catch(t){setTimeout(()=>{const n=t.stack||"";throw Pi("Exception was thrown by user callback.",n),t},Math.floor(0))}},dtt=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},A0=function(e,t){const n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};class Att{constructor(t,n){this.appCheckProvider=n,this.appName=t.name,tl(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(a=>this.appCheck=a)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((n,a)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,a):n(null)},0)})}addTokenChangeListener(t){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(a=>a.addTokenListener(t))}notifyForInvalidToken(){Pi(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class ftt{constructor(t,n,a){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=a,this.auth_=null,this.auth_=a.getImmediate({optional:!0}),this.auth_||a.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(uo("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,a)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,a):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Pi(t)}}const Q4="5",WG="v",jG="s",qG="r",YG="f",XG=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,JG="ls",ZG="p",FB="ac",ez="websocket",tz="long_polling";class mtt{constructor(t,n,a,r,s=!1,o="",i=!1,c=!1,A=null){this.secure=n,this.namespace=a,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=i,this.isUsingEmulator=c,this.emulatorOptions=A,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=JA.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&JA.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}}function vtt(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function nz(e,t,n){on(typeof t=="string","typeof type must == string"),on(typeof n=="object","typeof params must == object");let a;if(t===ez)a=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===tz)a=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);vtt(e)&&(n.ns=e.namespace);const r=[];return cl(n,(s,o)=>{r.push(s+"="+o)}),a+r.join("&")}class htt{constructor(){this.counters_={}}incrementCounter(t,n=1){zc(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return hoe(this.counters_)}}const YC={},XC={};function G4(e){const t=e.toString();return YC[t]||(YC[t]=new htt),YC[t]}function ptt(e,t){const n=e.toString();return XC[n]||(XC[n]=t()),XC[n]}class gtt{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){const a=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<a.length;++r)a[r]&&qg(()=>{this.onMessage_(a[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const iV="start",ytt="close",_tt="pLPCommand",wtt="pRTLPCB",az="id",rz="pw",sz="ser",btt="cb",xtt="seg",Ctt="ts",Stt="d",Ett="dframe",oz=1870,iz=30,Btt=oz-iz,ktt=25e3,Ttt=3e4;class sv{constructor(t,n,a,r,s,o,i){this.connId=t,this.repoInfo=n,this.applicationId=a,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=jg(t),this.stats_=G4(n),this.urlFn=c=>(this.appCheckToken&&(c[FB]=this.appCheckToken),nz(n,tz,c))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new gtt(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Ttt)),rtt(()=>{if(this.isClosed_)return;this.scriptTagHolder=new z4((...s)=>{const[o,i,c,A,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===iV)this.id=i,this.password=c;else if(o===ytt)i?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(i,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,i]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,i)},()=>{this.onClosed_()},this.urlFn);const a={};a[iV]="t",a[sz]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(a[btt]=this.scriptTagHolder.uniqueCallbackIdentifier),a[WG]=Q4,this.transportSessionId&&(a[jG]=this.transportSessionId),this.lastSessionId&&(a[JG]=this.lastSessionId),this.applicationId&&(a[ZG]=this.applicationId),this.appCheckToken&&(a[FB]=this.appCheckToken),typeof location<"u"&&location.hostname&&XG.test(location.hostname)&&(a[qG]=YG);const r=this.urlFn(a);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){sv.forceAllow_=!0}static forceDisallow(){sv.forceDisallow_=!0}static isAvailable(){return sv.forceAllow_?!0:!sv.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!ott()&&!itt()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const n=Ws(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const a=h5(n),r=zG(a,Btt);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(t,n){this.myDisconnFrame=document.createElement("iframe");const a={};a[Ett]="t",a[az]=t,a[rz]=n,this.myDisconnFrame.src=this.urlFn(a),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const n=Ws(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class z4{constructor(t,n,a,r){this.onDisconnect=a,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=ttt(),window[_tt+this.uniqueCallbackIdentifier]=t,window[wtt+this.uniqueCallbackIdentifier]=n,this.myIFrame=z4.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(i){uo("frame writing exception"),i.stack&&uo(i.stack),uo(i)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||uo("No IE domain setting required")}catch{const a=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+a+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[az]=this.myID,t[rz]=this.myPW,t[sz]=this.currentSerial;let n=this.urlFn(t),a="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+iz+a.length<=oz;){const o=this.pendingSegs.shift();a=a+"&"+xtt+r+"="+o.seg+"&"+Ctt+r+"="+o.ts+"&"+Stt+r+"="+o.d,r++}return n=n+a,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,a){this.pendingSegs.push({seg:t,ts:n,d:a}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);const a=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(a,Math.floor(ktt)),s=()=>{clearTimeout(r),a()};this.addTag(t,s)}addTag(t,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const a=this.myIFrame.doc.createElement("script");a.type="text/javascript",a.async=!0,a.src=t,a.onload=a.onreadystatechange=function(){const r=a.readyState;(!r||r==="loaded"||r==="complete")&&(a.onload=a.onreadystatechange=null,a.parentNode&&a.parentNode.removeChild(a),n())},a.onerror=()=>{uo("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(a)}catch{}},Math.floor(1))}}const Itt=16384,Ftt=45e3;let D2=null;typeof MozWebSocket<"u"?D2=MozWebSocket:typeof WebSocket<"u"&&(D2=WebSocket);class Fl{constructor(t,n,a,r,s,o,i){this.connId=t,this.applicationId=a,this.appCheckToken=r,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=jg(this.connId),this.stats_=G4(n),this.connURL=Fl.connectionURL_(n,o,i,r,a),this.nodeAdmin=n.nodeAdmin}static connectionURL_(t,n,a,r,s){const o={};return o[WG]=Q4,typeof location<"u"&&location.hostname&&XG.test(location.hostname)&&(o[qG]=YG),n&&(o[jG]=n),a&&(o[JG]=a),r&&(o[FB]=r),s&&(o[ZG]=s),nz(t,ez,o)}open(t,n){this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,JA.set("previous_websocket_failure",!0);try{let a;Ioe(),this.mySock=new D2(this.connURL,[],a)}catch(a){this.log_("Error instantiating WebSocket.");const r=a.message||a.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=a=>{this.handleIncomingFrame(a)},this.mySock.onerror=a=>{this.log_("WebSocket error.  Closing connection.");const r=a.message||a.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){Fl.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,a=navigator.userAgent.match(n);a&&a.length>1&&parseFloat(a[1])<4.4&&(t=!0)}return!t&&D2!==null&&!Fl.forceDisallow_}static previouslyFailed(){return JA.isInMemoryStorage||JA.get("previous_websocket_failure")===!0}markConnectionHealthy(){JA.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const a=P0(n);this.onMessage(a)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(on(this.frames===null,"We already have a frame buffer"),t.length<=6){const n=Number(t);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const n=t.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const a=this.extractFrameCount_(n);a!==null&&this.appendFrame_(a)}}send(t){this.resetKeepAlive();const n=Ws(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const a=zG(n,Itt);a.length>1&&this.sendString_(String(a.length));for(let r=0;r<a.length;r++)this.sendString_(a[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Ftt))}sendString_(t){try{this.mySock.send(t)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Fl.responsesRequiredToBeHealthy=2;Fl.healthyTimeout=3e4;class og{static get ALL_TRANSPORTS(){return[sv,Fl]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const n=Fl&&Fl.isAvailable();let a=n&&!Fl.previouslyFailed();if(t.webSocketOnly&&(n||Pi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),a=!0),a)this.transports_=[Fl];else{const r=this.transports_=[];for(const s of og.ALL_TRANSPORTS)s&&s.isAvailable()&&r.push(s);og.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}og.globalTransportInitialized_=!1;const Ptt=6e4,Dtt=5e3,Utt=10*1024,Rtt=100*1024,JC="t",lV="d",Ntt="s",uV="r",Vtt="e",cV="o",dV="a",AV="n",fV="p",Ltt="h";class Mtt{constructor(t,n,a,r,s,o,i,c,A,d){this.id=t,this.repoInfo_=n,this.applicationId_=a,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=i,this.onDisconnect_=c,this.onKill_=A,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=jg("c:"+this.id+":"),this.transportManager_=new og(n),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),a=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,a)},Math.floor(0));const r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=A0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Rtt?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Utt?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){const n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(JC in t){const n=t[JC];n===dV?this.upgradeIfSecondaryHealthy_():n===uV?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===cV&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const n=gp("t",t),a=gp("d",t);if(n==="c")this.onSecondaryControl_(a);else if(n==="d")this.pendingDataMessages.push(a);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:fV,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:dV,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:AV,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const n=gp("t",t),a=gp("d",t);n==="c"?this.onControl_(a):n==="d"&&this.onDataMessage_(a)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const n=gp(JC,t);if(lV in t){const a=t[lV];if(n===Ltt){const r=Object.assign({},a);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===AV){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Ntt?this.onConnectionShutdown_(a):n===uV?this.onReset_(a):n===Vtt?IB("Server Error: "+a):n===cV?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):IB("Unknown control packet command: "+n)}}onHandshake_(t){const n=t.ts,a=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Q4!==a&&Pi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),a=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,a),A0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Ptt))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):A0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Dtt))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:fV,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(JA.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class lz{put(t,n,a,r){}merge(t,n,a,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,a){}onDisconnectMerge(t,n,a){}onDisconnectCancel(t,n){}reportStats(t){}}class uz{constructor(t){this.allowedEvents_=t,this.listeners_={},on(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){const a=[...this.listeners_[t]];for(let r=0;r<a.length;r++)a[r].callback.apply(a[r].context,n)}}on(t,n,a){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:a});const r=this.getInitialEvent(t);r&&n.apply(a,r)}off(t,n,a){this.validateEventType_(t);const r=this.listeners_[t]||[];for(let s=0;s<r.length;s++)if(r[s].callback===n&&(!a||a===r[s].context)){r.splice(s,1);return}}validateEventType_(t){on(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}}class U2 extends uz{static getInstance(){return new U2}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Nk()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return on(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}const mV=32,vV=768;class br{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let a=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[a]=this.pieces_[r],a++);this.pieces_.length=a,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}}function sr(){return new br("")}function xa(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function sA(e){return e.pieces_.length-e.pieceNum_}function hr(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new br(e.pieces_,t)}function cz(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Ott(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function dz(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function Az(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new br(t,0)}function Rs(e,t){const n=[];for(let a=e.pieceNum_;a<e.pieces_.length;a++)n.push(e.pieces_[a]);if(t instanceof br)for(let a=t.pieceNum_;a<t.pieces_.length;a++)n.push(t.pieces_[a]);else{const a=t.split("/");for(let r=0;r<a.length;r++)a[r].length>0&&n.push(a[r])}return new br(n,0)}function ga(e){return e.pieceNum_>=e.pieces_.length}function sl(e,t){const n=xa(e),a=xa(t);if(n===null)return t;if(n===a)return sl(hr(e),hr(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function fz(e,t){if(sA(e)!==sA(t))return!1;for(let n=e.pieceNum_,a=t.pieceNum_;n<=e.pieces_.length;n++,a++)if(e.pieces_[n]!==t.pieces_[a])return!1;return!0}function Nl(e,t){let n=e.pieceNum_,a=t.pieceNum_;if(sA(e)>sA(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[a])return!1;++n,++a}return!0}class Htt{constructor(t,n){this.errorPrefix_=n,this.parts_=dz(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let a=0;a<this.parts_.length;a++)this.byteLength_+=pw(this.parts_[a]);mz(this)}}function $tt(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=pw(t),mz(e)}function Qtt(e){const t=e.parts_.pop();e.byteLength_-=pw(t),e.parts_.length>0&&(e.byteLength_-=1)}function mz(e){if(e.byteLength_>vV)throw new Error(e.errorPrefix_+"has a key path longer than "+vV+" bytes ("+e.byteLength_+").");if(e.parts_.length>mV)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+mV+") or object contains a cycle "+OA(e))}function OA(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}class K4 extends uz{static getInstance(){return new K4}constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const a=!document[t];a!==this.visible_&&(this.visible_=a,this.trigger("visible",a))},!1)}getInitialEvent(t){return on(t==="visible","Unknown event type: "+t),[this.visible_]}}const yp=1e3,Gtt=300*1e3,hV=30*1e3,ztt=1.3,Ktt=3e4,Wtt="server_kill",pV=3;class Ic extends lz{constructor(t,n,a,r,s,o,i,c){if(super(),this.repoInfo_=t,this.applicationId_=n,this.onDataUpdate_=a,this.onConnectStatus_=r,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=i,this.authOverride_=c,this.id=Ic.nextPersistentConnectionId_++,this.log_=jg("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=yp,this.maxReconnectDelay_=Gtt,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");K4.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&U2.getInstance().on("online",this.onOnline_,this)}sendRequest(t,n,a){const r=++this.requestNumber_,s={r,a:t,b:n};this.log_(Ws(s)),on(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),a&&(this.requestCBHash_[r]=a)}get(t){this.initConnection_();const n=new F0,r={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:o=>{const i=o.d;o.s==="ok"?n.resolve(i):n.reject(i)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(t,n,a,r){this.initConnection_();const s=t._queryIdentifier,o=t._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),on(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),on(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const i={onComplete:r,hashFn:n,query:t,tag:a};this.listens.get(o).set(s,i),this.connected_&&this.sendListen_(i)}sendGet_(t){const n=this.outstandingGets_[t];this.sendRequest("g",n.request,a=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(a)})}sendListen_(t){const n=t.query,a=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+a+" for "+r);const s={p:a},o="q";t.tag&&(s.q=n._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest(o,s,i=>{const c=i.d,A=i.s;Ic.warnOnListenWarnings_(c,n),(this.listens.get(a)&&this.listens.get(a).get(r))===t&&(this.log_("listen response",i),A!=="ok"&&this.removeListen_(a,r),t.onComplete&&t.onComplete(A,c))})}static warnOnListenWarnings_(t,n){if(t&&typeof t=="object"&&zc(t,"w")){const a=Mv(t,"w");if(Array.isArray(a)&&~a.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();Pi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||Noe(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=hV)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,n=Roe(t)?"auth":"gauth",a={cred:t};this.authOverride_===null?a.noauth=!0:typeof this.authOverride_=="object"&&(a.authvar=this.authOverride_),this.sendRequest(n,a,r=>{const s=r.s,o=r.d||"error";this.authToken_===t&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const n=t.s,a=t.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,a)})}unlisten(t,n){const a=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+a+" "+r),on(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(a,r)&&this.connected_&&this.sendUnlisten_(a,r,t._queryObject,n)}sendUnlisten_(t,n,a,r){this.log_("Unlisten on "+t+" for "+n);const s={p:t},o="n";r&&(s.q=a,s.t=r),this.sendRequest(o,s)}onDisconnectPut(t,n,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,n,a):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:n,onComplete:a})}onDisconnectMerge(t,n,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,n,a):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:n,onComplete:a})}onDisconnectCancel(t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(t,n,a,r){const s={p:n,d:a};this.log_("onDisconnect "+t,s),this.sendRequest(t,s,o=>{r&&setTimeout(()=>{r(o.s,o.d)},Math.floor(0))})}put(t,n,a,r){this.putInternal("p",t,n,a,r)}merge(t,n,a,r){this.putInternal("m",t,n,a,r)}putInternal(t,n,a,r,s){this.initConnection_();const o={p:n,d:a};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;const i=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(i):this.log_("Buffering put: "+n)}sendPut_(t){const n=this.outstandingPuts_[t].action,a=this.outstandingPuts_[t].request,r=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,a,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(s.s,s.d)})}reportStats(t){if(this.connected_){const n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,a=>{if(a.s!=="ok"){const s=a.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Ws(t));const n=t.r,a=this.requestCBHash_[n];a&&(delete this.requestCBHash_[n],a(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,n){this.log_("handleServerMessage",t,n),t==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):t==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):t==="c"?this.onListenRevoked_(n.p,n.q):t==="ac"?this.onAuthRevoked_(n.s,n.d):t==="apc"?this.onAppCheckRevoked_(n.s,n.d):t==="sd"?this.onSecurityDebugPacket_(n):IB("Unrecognized action received from server: "+Ws(t)+`
Are you using the latest client?`)}onReady_(t,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){on(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=yp,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=yp,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Ktt&&(this.reconnectDelay_=yp),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-t);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*ztt)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),a=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Ic.nextConnectionId_++,s=this.lastSessionId;let o=!1,i=null;const c=function(){i?i.close():(o=!0,a())},A=function(f){on(i,"sendRequest call when we're not connected not allowed."),i.sendRequest(f)};this.realtime_={close:c,sendRequest:A};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[f,m]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?uo("getToken() completed but was canceled"):(uo("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=m&&m.token,i=new Mtt(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,a,h=>{Pi(h+" ("+this.repoInfo_.toString()+")"),this.interrupt(Wtt)},s))}catch(f){this.log_("Failed to get token: "+f),o||(this.repoInfo_.nodeAdmin&&Pi(f),c())}}}interrupt(t){uo("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){uo("Resuming connection for reason: "+t),delete this.interruptReasons_[t],GS(this.interruptReasons_)&&(this.reconnectDelay_=yp,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const n=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const n=this.outstandingPuts_[t];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,n){let a;n?a=n.map(s=>$4(s)).join("$"):a="default";const r=this.removeListen_(t,a);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(t,n){const a=new br(t).toString();let r;if(this.listens.has(a)){const s=this.listens.get(a);r=s.get(n),s.delete(n),s.size===0&&this.listens.delete(a)}else r=void 0;return r}onAuthRevoked_(t,n){uo("Auth token revoked: "+t+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=pV&&(this.reconnectDelay_=hV,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,n){uo("App check token revoked: "+t+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=pV&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const n of t.values())this.sendListen_(n);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let n="js";t["sdk."+n+"."+HG.replace(/\./g,"-")]=1,Nk()?t["framework.cordova"]=1:w5()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=U2.getInstance().currentlyOnline();return GS(this.interruptReasons_)&&t}}Ic.nextPersistentConnectionId_=0;Ic.nextConnectionId_=0;class Ca{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new Ca(t,n)}}class mb{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){const a=new Ca(Zv,t),r=new Ca(Zv,n);return this.compare(a,r)!==0}minPost(){return Ca.MIN}}let Vy;class vz extends mb{static get __EMPTY_NODE(){return Vy}static set __EMPTY_NODE(t){Vy=t}compare(t,n){return Ph(t.name,n.name)}isDefinedOn(t){throw ih("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return Ca.MIN}maxPost(){return new Ca(Rf,Vy)}makePost(t,n){return on(typeof t=="string","KeyIndex indexValue must always be a string."),new Ca(t,Vy)}toString(){return".key"}}const Ev=new vz;class Ly{constructor(t,n,a,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!t.isEmpty();)if(t=t,o=n?a(t.key,n):1,r&&(o*=-1),o<0)this.isReverse_?t=t.left:t=t.right;else if(o===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class Us{constructor(t,n,a,r,s){this.key=t,this.value=n,this.color=a??Us.RED,this.left=r??ii.EMPTY_NODE,this.right=s??ii.EMPTY_NODE}copy(t,n,a,r,s){return new Us(t??this.key,n??this.value,a??this.color,r??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,a){let r=this;const s=a(t,r.key);return s<0?r=r.copy(null,null,null,r.left.insert(t,n,a),null):s===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(t,n,a)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return ii.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,n){let a,r;if(a=this,n(t,a.key)<0)!a.left.isEmpty()&&!a.left.isRed_()&&!a.left.left.isRed_()&&(a=a.moveRedLeft_()),a=a.copy(null,null,null,a.left.remove(t,n),null);else{if(a.left.isRed_()&&(a=a.rotateRight_()),!a.right.isEmpty()&&!a.right.isRed_()&&!a.right.left.isRed_()&&(a=a.moveRedRight_()),n(t,a.key)===0){if(a.right.isEmpty())return ii.EMPTY_NODE;r=a.right.min_(),a=a.copy(r.key,r.value,null,null,a.right.removeMin_())}a=a.copy(null,null,null,null,a.right.remove(t,n))}return a.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,Us.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,Us.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}Us.RED=!0;Us.BLACK=!1;class jtt{copy(t,n,a,r,s){return this}insert(t,n,a){return new Us(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ii{constructor(t,n=ii.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new ii(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Us.BLACK,null,null))}remove(t){return new ii(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Us.BLACK,null,null))}get(t){let n,a=this.root_;for(;!a.isEmpty();){if(n=this.comparator_(t,a.key),n===0)return a.value;n<0?a=a.left:n>0&&(a=a.right)}return null}getPredecessorKey(t){let n,a=this.root_,r=null;for(;!a.isEmpty();)if(n=this.comparator_(t,a.key),n===0){if(a.left.isEmpty())return r?r.key:null;for(a=a.left;!a.right.isEmpty();)a=a.right;return a.key}else n<0?a=a.left:n>0&&(r=a,a=a.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Ly(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new Ly(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new Ly(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new Ly(this.root_,null,this.comparator_,!0,t)}}ii.EMPTY_NODE=new jtt;function qtt(e,t){return Ph(e.name,t.name)}function W4(e,t){return Ph(e,t)}let PB;function Ytt(e){PB=e}const hz=function(e){return typeof e=="number"?"number:"+KG(e):"string:"+e},pz=function(e){if(e.isLeafNode()){const t=e.val();on(typeof t=="string"||typeof t=="number"||typeof t=="object"&&zc(t,".sv"),"Priority must be a string or number.")}else on(e===PB||e.isEmpty(),"priority of unexpected type.");on(e===PB||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let gV;class Ps{static set __childrenNodeConstructor(t){gV=t}static get __childrenNodeConstructor(){return gV}constructor(t,n=Ps.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=n,this.lazyHash_=null,on(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),pz(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new Ps(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:Ps.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return ga(t)?this:xa(t)===".priority"?this.priorityNode_:Ps.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,n){return null}updateImmediateChild(t,n){return t===".priority"?this.updatePriority(n):n.isEmpty()&&t!==".priority"?this:Ps.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}updateChild(t,n){const a=xa(t);return a===null?n:n.isEmpty()&&a!==".priority"?this:(on(a!==".priority"||sA(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(a,Ps.__childrenNodeConstructor.EMPTY_NODE.updateChild(hr(t),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,n){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+hz(this.priorityNode_.val())+":");const n=typeof this.value_;t+=n+":",n==="number"?t+=KG(this.value_):t+=this.value_,this.lazyHash_=QG(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===Ps.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Ps.__childrenNodeConstructor?-1:(on(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const n=typeof t.value_,a=typeof this.value_,r=Ps.VALUE_TYPE_ORDER.indexOf(n),s=Ps.VALUE_TYPE_ORDER.indexOf(a);return on(r>=0,"Unknown leaf type: "+n),on(s>=0,"Unknown leaf type: "+a),r===s?a==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:s-r}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const n=t;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Ps.VALUE_TYPE_ORDER=["object","boolean","number","string"];let gz,yz;function Xtt(e){gz=e}function Jtt(e){yz=e}class Ztt extends mb{compare(t,n){const a=t.node.getPriority(),r=n.node.getPriority(),s=a.compareTo(r);return s===0?Ph(t.name,n.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return Ca.MIN}maxPost(){return new Ca(Rf,new Ps("[PRIORITY-POST]",yz))}makePost(t,n){const a=gz(t);return new Ca(n,new Ps("[PRIORITY-POST]",a))}toString(){return".priority"}}const go=new Ztt;const ent=Math.log(2);class tnt{constructor(t){const n=s=>parseInt(Math.log(s)/ent,10),a=s=>parseInt(Array(s+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;const r=a(this.count);this.bits_=t+1&r}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const R2=function(e,t,n,a){e.sort(t);const r=function(c,A){const d=A-c;let f,m;if(d===0)return null;if(d===1)return f=e[c],m=n?n(f):f,new Us(m,f.node,Us.BLACK,null,null);{const h=parseInt(d/2,10)+c,p=r(c,h),y=r(h+1,A);return f=e[h],m=n?n(f):f,new Us(m,f.node,Us.BLACK,p,y)}},s=function(c){let A=null,d=null,f=e.length;const m=function(p,y){const g=f-p,w=f;f-=p;const b=r(g+1,w),x=e[g],T=n?n(x):x;h(new Us(T,x.node,y,null,b))},h=function(p){A?(A.left=p,A=p):(d=p,A=p)};for(let p=0;p<c.count;++p){const y=c.nextBitIsOne(),g=Math.pow(2,c.count-(p+1));y?m(g,Us.BLACK):(m(g,Us.BLACK),m(g,Us.RED))}return d},o=new tnt(e.length),i=s(o);return new ii(a||t,i)};let ZC;const zm={};class Ec{static get Default(){return on(zm&&go,"ChildrenNode.ts has not been loaded"),ZC=ZC||new Ec({".priority":zm},{".priority":go}),ZC}constructor(t,n){this.indexes_=t,this.indexSet_=n}get(t){const n=Mv(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof ii?n:null}hasIndex(t){return zc(this.indexSet_,t.toString())}addIndex(t,n){on(t!==Ev,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const a=[];let r=!1;const s=n.getIterator(Ca.Wrap);let o=s.getNext();for(;o;)r=r||t.isDefinedOn(o.node),a.push(o),o=s.getNext();let i;r?i=R2(a,t.getCompare()):i=zm;const c=t.toString(),A=Object.assign({},this.indexSet_);A[c]=t;const d=Object.assign({},this.indexes_);return d[c]=i,new Ec(d,A)}addToIndexes(t,n){const a=N_(this.indexes_,(r,s)=>{const o=Mv(this.indexSet_,s);if(on(o,"Missing index implementation for "+s),r===zm)if(o.isDefinedOn(t.node)){const i=[],c=n.getIterator(Ca.Wrap);let A=c.getNext();for(;A;)A.name!==t.name&&i.push(A),A=c.getNext();return i.push(t),R2(i,o.getCompare())}else return zm;else{const i=n.get(t.name);let c=r;return i&&(c=c.remove(new Ca(t.name,i))),c.insert(t,t.node)}});return new Ec(a,this.indexSet_)}removeFromIndexes(t,n){const a=N_(this.indexes_,r=>{if(r===zm)return r;{const s=n.get(t.name);return s?r.remove(new Ca(t.name,s)):r}});return new Ec(a,this.indexSet_)}}let _p;class Xa{static get EMPTY_NODE(){return _p||(_p=new Xa(new ii(W4),null,Ec.Default))}constructor(t,n,a){this.children_=t,this.priorityNode_=n,this.indexMap_=a,this.lazyHash_=null,this.priorityNode_&&pz(this.priorityNode_),this.children_.isEmpty()&&on(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||_p}updatePriority(t){return this.children_.isEmpty()?this:new Xa(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const n=this.children_.get(t);return n===null?_p:n}}getChild(t){const n=xa(t);return n===null?this:this.getImmediateChild(n).getChild(hr(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,n){if(on(n,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(n);{const a=new Ca(t,n);let r,s;n.isEmpty()?(r=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),s=this.indexMap_.addToIndexes(a,this.children_));const o=r.isEmpty()?_p:this.priorityNode_;return new Xa(r,o,s)}}updateChild(t,n){const a=xa(t);if(a===null)return n;{on(xa(t)!==".priority"||sA(t)===1,".priority must be the last token in a path");const r=this.getImmediateChild(a).updateChild(hr(t),n);return this.updateImmediateChild(a,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const n={};let a=0,r=0,s=!0;if(this.forEachChild(go,(o,i)=>{n[o]=i.val(t),a++,s&&Xa.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):s=!1}),!t&&s&&r<2*a){const o=[];for(const i in n)o[i]=n[i];return o}else return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+hz(this.getPriority().val())+":"),this.forEachChild(go,(n,a)=>{const r=a.hash();r!==""&&(t+=":"+n+":"+r)}),this.lazyHash_=t===""?"":QG(t)}return this.lazyHash_}getPredecessorChildName(t,n,a){const r=this.resolveIndex_(a);if(r){const s=r.getPredecessorKey(new Ca(t,n));return s?s.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const n=this.resolveIndex_(t);if(n){const a=n.minKey();return a&&a.name}else return this.children_.minKey()}getFirstChild(t){const n=this.getFirstChildName(t);return n?new Ca(n,this.children_.get(n)):null}getLastChildName(t){const n=this.resolveIndex_(t);if(n){const a=n.maxKey();return a&&a.name}else return this.children_.maxKey()}getLastChild(t){const n=this.getLastChildName(t);return n?new Ca(n,this.children_.get(n)):null}forEachChild(t,n){const a=this.resolveIndex_(t);return a?a.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,n){const a=this.resolveIndex_(n);if(a)return a.getIteratorFrom(t,r=>r);{const r=this.children_.getIteratorFrom(t.name,Ca.Wrap);let s=r.peek();for(;s!=null&&n.compare(s,t)<0;)r.getNext(),s=r.peek();return r}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,n){const a=this.resolveIndex_(n);if(a)return a.getReverseIteratorFrom(t,r=>r);{const r=this.children_.getReverseIteratorFrom(t.name,Ca.Wrap);let s=r.peek();for(;s!=null&&n.compare(s,t)>0;)r.getNext(),s=r.peek();return r}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Yg?-1:0}withIndex(t){if(t===Ev||this.indexMap_.hasIndex(t))return this;{const n=this.indexMap_.addIndex(t,this.children_);return new Xa(this.children_,this.priorityNode_,n)}}isIndexed(t){return t===Ev||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const n=t;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const a=this.getIterator(go),r=n.getIterator(go);let s=a.getNext(),o=r.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=a.getNext(),o=r.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(t){return t===Ev?null:this.indexMap_.get(t.toString())}}Xa.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class nnt extends Xa{constructor(){super(new ii(W4),Xa.EMPTY_NODE,Ec.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Xa.EMPTY_NODE}isEmpty(){return!1}}const Yg=new nnt;Object.defineProperties(Ca,{MIN:{value:new Ca(Zv,Xa.EMPTY_NODE)},MAX:{value:new Ca(Rf,Yg)}});vz.__EMPTY_NODE=Xa.EMPTY_NODE;Ps.__childrenNodeConstructor=Xa;Ytt(Yg);Jtt(Yg);const ant=!0;function co(e,t=null){if(e===null)return Xa.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),on(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){const n=e;return new Ps(n,co(t))}if(!(e instanceof Array)&&ant){const n=[];let a=!1;if(cl(e,(o,i)=>{if(o.substring(0,1)!=="."){const c=co(i);c.isEmpty()||(a=a||!c.getPriority().isEmpty(),n.push(new Ca(o,c)))}}),n.length===0)return Xa.EMPTY_NODE;const s=R2(n,qtt,o=>o.name,W4);if(a){const o=R2(n,go.getCompare());return new Xa(s,co(t),new Ec({".priority":o},{".priority":go}))}else return new Xa(s,co(t),Ec.Default)}else{let n=Xa.EMPTY_NODE;return cl(e,(a,r)=>{if(zc(e,a)&&a.substring(0,1)!=="."){const s=co(r);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(a,s))}}),n.updatePriority(co(t))}}Xtt(co);class rnt extends mb{constructor(t){super(),this.indexPath_=t,on(!ga(t)&&xa(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){const a=this.extractChild(t.node),r=this.extractChild(n.node),s=a.compareTo(r);return s===0?Ph(t.name,n.name):s}makePost(t,n){const a=co(t),r=Xa.EMPTY_NODE.updateChild(this.indexPath_,a);return new Ca(n,r)}maxPost(){const t=Xa.EMPTY_NODE.updateChild(this.indexPath_,Yg);return new Ca(Rf,t)}toString(){return dz(this.indexPath_,0).join("/")}}class snt extends mb{compare(t,n){const a=t.node.compareTo(n.node);return a===0?Ph(t.name,n.name):a}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return Ca.MIN}maxPost(){return Ca.MAX}makePost(t,n){const a=co(t);return new Ca(n,a)}toString(){return".value"}}const ont=new snt;function int(e){return{type:"value",snapshotNode:e}}function lnt(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function unt(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function yV(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function cnt(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}class j4{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=go}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return on(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return on(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Zv}hasEnd(){return this.endSet_}getIndexEndValue(){return on(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return on(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Rf}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return on(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===go}copy(){const t=new j4;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function _V(e){const t={};if(e.isDefault())return t;let n;if(e.index_===go?n="$priority":e.index_===ont?n="$value":e.index_===Ev?n="$key":(on(e.index_ instanceof rnt,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Ws(n),e.startSet_){const a=e.startAfterSet_?"startAfter":"startAt";t[a]=Ws(e.indexStartValue_),e.startNameSet_&&(t[a]+=","+Ws(e.indexStartName_))}if(e.endSet_){const a=e.endBeforeSet_?"endBefore":"endAt";t[a]=Ws(e.indexEndValue_),e.endNameSet_&&(t[a]+=","+Ws(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function wV(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==go&&(t.i=e.index_.toString()),t}class N2 extends lz{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(on(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,n,a,r){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=a,this.appCheckTokenProvider_=r,this.log_=jg("p:rest:"),this.listens_={}}listen(t,n,a,r){const s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);const o=N2.getListenId_(t,a),i={};this.listens_[o]=i;const c=_V(t._queryParams);this.restRequest_(s+".json",c,(A,d)=>{let f=d;if(A===404&&(f=null,A=null),A===null&&this.onDataUpdate_(s,f,!1,a),Mv(this.listens_,o)===i){let m;A?A===401?m="permission_denied":m="rest_error:"+A:m="ok",r(m,null)}})}unlisten(t,n){const a=N2.getListenId_(t,n);delete this.listens_[a]}get(t){const n=_V(t._queryParams),a=t._path.toString(),r=new F0;return this.restRequest_(a+".json",n,(s,o)=>{let i=o;s===404&&(i=null,s=null),s===null?(this.onDataUpdate_(a,i,!1,null),r.resolve(i)):r.reject(new Error(i))}),r.promise}refreshAuthToken(t){}restRequest_(t,n={},a){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(n.auth=r.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+uh(n);this.log_("Sending REST request for "+o);const i=new XMLHttpRequest;i.onreadystatechange=()=>{if(a&&i.readyState===4){this.log_("REST Response for "+o+" received. status:",i.status,"response:",i.responseText);let c=null;if(i.status>=200&&i.status<300){try{c=P0(i.responseText)}catch{Pi("Failed to parse JSON response for "+o+": "+i.responseText)}a(null,c)}else i.status!==401&&i.status!==404&&Pi("Got unsuccessful REST response for "+o+" Status: "+i.status),a(i.status);a=null}},i.open("GET",o,!0),i.send()})}}class dnt{constructor(){this.rootNode_=Xa.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}}function V2(){return{value:null,children:new Map}}function _z(e,t,n){if(ga(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{const a=xa(t);e.children.has(a)||e.children.set(a,V2());const r=e.children.get(a);t=hr(t),_z(r,t,n)}}function DB(e,t,n){e.value!==null?n(t,e.value):Ant(e,(a,r)=>{const s=new br(t.toString()+"/"+a);DB(r,s,n)})}function Ant(e,t){e.children.forEach((n,a)=>{t(a,n)})}class fnt{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),n=Object.assign({},t);return this.last_&&cl(this.last_,(a,r)=>{n[a]=n[a]-r}),this.last_=t,n}}const bV=10*1e3,mnt=30*1e3,vnt=300*1e3;class hnt{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new fnt(t);const a=bV+(mnt-bV)*Math.random();A0(this.reportStats_.bind(this),Math.floor(a))}reportStats_(){const t=this.statsListener_.get(),n={};let a=!1;cl(t,(r,s)=>{s>0&&zc(this.statsToReport_,r)&&(n[r]=s,a=!0)}),a&&this.server_.reportStats(n),A0(this.reportStats_.bind(this),Math.floor(Math.random()*2*vnt))}}var Bu;(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Bu||(Bu={}));function wz(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function bz(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function xz(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}class L2{constructor(t,n,a){this.path=t,this.affectedTree=n,this.revert=a,this.type=Bu.ACK_USER_WRITE,this.source=wz()}operationForChild(t){if(ga(this.path)){if(this.affectedTree.value!=null)return on(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new br(t));return new L2(sr(),n,this.revert)}}else return on(xa(this.path)===t,"operationForChild called for unrelated child."),new L2(hr(this.path),this.affectedTree,this.revert)}}class Nf{constructor(t,n,a){this.source=t,this.path=n,this.snap=a,this.type=Bu.OVERWRITE}operationForChild(t){return ga(this.path)?new Nf(this.source,sr(),this.snap.getImmediateChild(t)):new Nf(this.source,hr(this.path),this.snap)}}class ig{constructor(t,n,a){this.source=t,this.path=n,this.children=a,this.type=Bu.MERGE}operationForChild(t){if(ga(this.path)){const n=this.children.subtree(new br(t));return n.isEmpty()?null:n.value?new Nf(this.source,sr(),n.value):new ig(this.source,sr(),n)}else return on(xa(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new ig(this.source,hr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class q4{constructor(t,n,a){this.node_=t,this.fullyInitialized_=n,this.filtered_=a}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(ga(t))return this.isFullyInitialized()&&!this.filtered_;const n=xa(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}function pnt(e,t,n,a){const r=[],s=[];return t.forEach(o=>{o.type==="child_changed"&&e.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(cnt(o.childName,o.snapshotNode))}),wp(e,r,"child_removed",t,a,n),wp(e,r,"child_added",t,a,n),wp(e,r,"child_moved",s,a,n),wp(e,r,"child_changed",t,a,n),wp(e,r,"value",t,a,n),r}function wp(e,t,n,a,r,s){const o=a.filter(i=>i.type===n);o.sort((i,c)=>ynt(e,i,c)),o.forEach(i=>{const c=gnt(e,i,s);r.forEach(A=>{A.respondsTo(i.type)&&t.push(A.createEvent(c,e.query_))})})}function gnt(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function ynt(e,t,n){if(t.childName==null||n.childName==null)throw ih("Should only compare child_ events.");const a=new Ca(t.childName,t.snapshotNode),r=new Ca(n.childName,n.snapshotNode);return e.index_.compare(a,r)}function Cz(e,t){return{eventCache:e,serverCache:t}}function f0(e,t,n,a){return Cz(new q4(t,n,a),e.serverCache)}function Sz(e,t,n,a){return Cz(e.eventCache,new q4(t,n,a))}function UB(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Vf(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let eS;const _nt=()=>(eS||(eS=new ii(stt)),eS);class vr{static fromObject(t){let n=new vr(null);return cl(t,(a,r)=>{n=n.set(new br(a),r)}),n}constructor(t,n=_nt()){this.value=t,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:sr(),value:this.value};if(ga(t))return null;{const a=xa(t),r=this.children.get(a);if(r!==null){const s=r.findRootMostMatchingPathAndValue(hr(t),n);return s!=null?{path:Rs(new br(a),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(ga(t))return this;{const n=xa(t),a=this.children.get(n);return a!==null?a.subtree(hr(t)):new vr(null)}}set(t,n){if(ga(t))return new vr(n,this.children);{const a=xa(t),s=(this.children.get(a)||new vr(null)).set(hr(t),n),o=this.children.insert(a,s);return new vr(this.value,o)}}remove(t){if(ga(t))return this.children.isEmpty()?new vr(null):new vr(null,this.children);{const n=xa(t),a=this.children.get(n);if(a){const r=a.remove(hr(t));let s;return r.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,r),this.value===null&&s.isEmpty()?new vr(null):new vr(this.value,s)}else return this}}get(t){if(ga(t))return this.value;{const n=xa(t),a=this.children.get(n);return a?a.get(hr(t)):null}}setTree(t,n){if(ga(t))return n;{const a=xa(t),s=(this.children.get(a)||new vr(null)).setTree(hr(t),n);let o;return s.isEmpty()?o=this.children.remove(a):o=this.children.insert(a,s),new vr(this.value,o)}}fold(t){return this.fold_(sr(),t)}fold_(t,n){const a={};return this.children.inorderTraversal((r,s)=>{a[r]=s.fold_(Rs(t,r),n)}),n(t,this.value,a)}findOnPath(t,n){return this.findOnPath_(t,sr(),n)}findOnPath_(t,n,a){const r=this.value?a(n,this.value):!1;if(r)return r;if(ga(t))return null;{const s=xa(t),o=this.children.get(s);return o?o.findOnPath_(hr(t),Rs(n,s),a):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,sr(),n)}foreachOnPath_(t,n,a){if(ga(t))return this;{this.value&&a(n,this.value);const r=xa(t),s=this.children.get(r);return s?s.foreachOnPath_(hr(t),Rs(n,r),a):new vr(null)}}foreach(t){this.foreach_(sr(),t)}foreach_(t,n){this.children.inorderTraversal((a,r)=>{r.foreach_(Rs(t,a),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,a)=>{a.value&&t(n,a.value)})}}class $l{constructor(t){this.writeTree_=t}static empty(){return new $l(new vr(null))}}function m0(e,t,n){if(ga(t))return new $l(new vr(n));{const a=e.writeTree_.findRootMostValueAndPath(t);if(a!=null){const r=a.path;let s=a.value;const o=sl(r,t);return s=s.updateChild(o,n),new $l(e.writeTree_.set(r,s))}else{const r=new vr(n),s=e.writeTree_.setTree(t,r);return new $l(s)}}}function xV(e,t,n){let a=e;return cl(n,(r,s)=>{a=m0(a,Rs(t,r),s)}),a}function CV(e,t){if(ga(t))return $l.empty();{const n=e.writeTree_.setTree(t,new vr(null));return new $l(n)}}function RB(e,t){return om(e,t)!=null}function om(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(sl(n.path,t)):null}function SV(e){const t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(go,(a,r)=>{t.push(new Ca(a,r))}):e.writeTree_.children.inorderTraversal((a,r)=>{r.value!=null&&t.push(new Ca(a,r.value))}),t}function Od(e,t){if(ga(t))return e;{const n=om(e,t);return n!=null?new $l(new vr(n)):new $l(e.writeTree_.subtree(t))}}function NB(e){return e.writeTree_.isEmpty()}function eh(e,t){return Ez(sr(),e.writeTree_,t)}function Ez(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let a=null;return t.children.inorderTraversal((r,s)=>{r===".priority"?(on(s.value!==null,"Priority writes must always be leaf nodes"),a=s.value):n=Ez(Rs(e,r),s,n)}),!n.getChild(e).isEmpty()&&a!==null&&(n=n.updateChild(Rs(e,".priority"),a)),n}}function Bz(e,t){return Pz(t,e)}function wnt(e,t,n,a,r){on(a>e.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),e.allWrites.push({path:t,snap:n,writeId:a,visible:r}),r&&(e.visibleWrites=m0(e.visibleWrites,t,n)),e.lastWriteId=a}function bnt(e,t){for(let n=0;n<e.allWrites.length;n++){const a=e.allWrites[n];if(a.writeId===t)return a}return null}function xnt(e,t){const n=e.allWrites.findIndex(i=>i.writeId===t);on(n>=0,"removeWrite called with nonexistent writeId.");const a=e.allWrites[n];e.allWrites.splice(n,1);let r=a.visible,s=!1,o=e.allWrites.length-1;for(;r&&o>=0;){const i=e.allWrites[o];i.visible&&(o>=n&&Cnt(i,a.path)?r=!1:Nl(a.path,i.path)&&(s=!0)),o--}if(r){if(s)return Snt(e),!0;if(a.snap)e.visibleWrites=CV(e.visibleWrites,a.path);else{const i=a.children;cl(i,c=>{e.visibleWrites=CV(e.visibleWrites,Rs(a.path,c))})}return!0}else return!1}function Cnt(e,t){if(e.snap)return Nl(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Nl(Rs(e.path,n),t))return!0;return!1}function Snt(e){e.visibleWrites=kz(e.allWrites,Ent,sr()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function Ent(e){return e.visible}function kz(e,t,n){let a=$l.empty();for(let r=0;r<e.length;++r){const s=e[r];if(t(s)){const o=s.path;let i;if(s.snap)Nl(n,o)?(i=sl(n,o),a=m0(a,i,s.snap)):Nl(o,n)&&(i=sl(o,n),a=m0(a,sr(),s.snap.getChild(i)));else if(s.children){if(Nl(n,o))i=sl(n,o),a=xV(a,i,s.children);else if(Nl(o,n))if(i=sl(o,n),ga(i))a=xV(a,sr(),s.children);else{const c=Mv(s.children,xa(i));if(c){const A=c.getChild(hr(i));a=m0(a,sr(),A)}}}else throw ih("WriteRecord should have .snap or .children")}}return a}function Tz(e,t,n,a,r){if(!a&&!r){const s=om(e.visibleWrites,t);if(s!=null)return s;{const o=Od(e.visibleWrites,t);if(NB(o))return n;if(n==null&&!RB(o,sr()))return null;{const i=n||Xa.EMPTY_NODE;return eh(o,i)}}}else{const s=Od(e.visibleWrites,t);if(!r&&NB(s))return n;if(!r&&n==null&&!RB(s,sr()))return null;{const o=function(A){return(A.visible||r)&&(!a||!~a.indexOf(A.writeId))&&(Nl(A.path,t)||Nl(t,A.path))},i=kz(e.allWrites,o,t),c=n||Xa.EMPTY_NODE;return eh(i,c)}}}function Bnt(e,t,n){let a=Xa.EMPTY_NODE;const r=om(e.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(go,(s,o)=>{a=a.updateImmediateChild(s,o)}),a;if(n){const s=Od(e.visibleWrites,t);return n.forEachChild(go,(o,i)=>{const c=eh(Od(s,new br(o)),i);a=a.updateImmediateChild(o,c)}),SV(s).forEach(o=>{a=a.updateImmediateChild(o.name,o.node)}),a}else{const s=Od(e.visibleWrites,t);return SV(s).forEach(o=>{a=a.updateImmediateChild(o.name,o.node)}),a}}function knt(e,t,n,a,r){on(a||r,"Either existingEventSnap or existingServerSnap must exist");const s=Rs(t,n);if(RB(e.visibleWrites,s))return null;{const o=Od(e.visibleWrites,s);return NB(o)?r.getChild(n):eh(o,r.getChild(n))}}function Tnt(e,t,n,a){const r=Rs(t,n),s=om(e.visibleWrites,r);if(s!=null)return s;if(a.isCompleteForChild(n)){const o=Od(e.visibleWrites,r);return eh(o,a.getNode().getImmediateChild(n))}else return null}function Int(e,t){return om(e.visibleWrites,t)}function Fnt(e,t,n,a,r,s,o){let i;const c=Od(e.visibleWrites,t),A=om(c,sr());if(A!=null)i=A;else if(n!=null)i=eh(c,n);else return[];if(i=i.withIndex(o),!i.isEmpty()&&!i.isLeafNode()){const d=[],f=o.getCompare(),m=s?i.getReverseIteratorFrom(a,o):i.getIteratorFrom(a,o);let h=m.getNext();for(;h&&d.length<r;)f(h,a)!==0&&d.push(h),h=m.getNext();return d}else return[]}function Pnt(){return{visibleWrites:$l.empty(),allWrites:[],lastWriteId:-1}}function VB(e,t,n,a){return Tz(e.writeTree,e.treePath,t,n,a)}function Iz(e,t){return Bnt(e.writeTree,e.treePath,t)}function EV(e,t,n,a){return knt(e.writeTree,e.treePath,t,n,a)}function M2(e,t){return Int(e.writeTree,Rs(e.treePath,t))}function Dnt(e,t,n,a,r,s){return Fnt(e.writeTree,e.treePath,t,n,a,r,s)}function Y4(e,t,n){return Tnt(e.writeTree,e.treePath,t,n)}function Fz(e,t){return Pz(Rs(e.treePath,t),e.writeTree)}function Pz(e,t){return{treePath:e,writeTree:t}}class Unt{constructor(){this.changeMap=new Map}trackChildChange(t){const n=t.type,a=t.childName;on(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),on(a!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(a);if(r){const s=r.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(a,yV(a,t.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(a);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(a,unt(a,r.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(a,lnt(a,t.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(a,yV(a,t.snapshotNode,r.oldSnap));else throw ih("Illegal combination of changes: "+t+" occurred after "+r)}else this.changeMap.set(a,t)}getChanges(){return Array.from(this.changeMap.values())}}class Rnt{getCompleteChild(t){return null}getChildAfterChild(t,n,a){return null}}const Dz=new Rnt;class X4{constructor(t,n,a=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=a}getCompleteChild(t){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{const a=this.optCompleteServerCache_!=null?new q4(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Y4(this.writes_,t,a)}}getChildAfterChild(t,n,a){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Vf(this.viewCache_),s=Dnt(this.writes_,r,n,1,a,t);return s.length===0?null:s[0]}}function Nnt(e,t){on(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),on(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function Vnt(e,t,n,a,r){const s=new Unt;let o,i;if(n.type===Bu.OVERWRITE){const A=n;A.source.fromUser?o=LB(e,t,A.path,A.snap,a,r,s):(on(A.source.fromServer,"Unknown source."),i=A.source.tagged||t.serverCache.isFiltered()&&!ga(A.path),o=O2(e,t,A.path,A.snap,a,r,i,s))}else if(n.type===Bu.MERGE){const A=n;A.source.fromUser?o=Mnt(e,t,A.path,A.children,a,r,s):(on(A.source.fromServer,"Unknown source."),i=A.source.tagged||t.serverCache.isFiltered(),o=MB(e,t,A.path,A.children,a,r,i,s))}else if(n.type===Bu.ACK_USER_WRITE){const A=n;A.revert?o=$nt(e,t,A.path,a,r,s):o=Ont(e,t,A.path,A.affectedTree,a,r,s)}else if(n.type===Bu.LISTEN_COMPLETE)o=Hnt(e,t,n.path,a,s);else throw ih("Unknown operation type: "+n.type);const c=s.getChanges();return Lnt(t,o,c),{viewCache:o,changes:c}}function Lnt(e,t,n){const a=t.eventCache;if(a.isFullyInitialized()){const r=a.getNode().isLeafNode()||a.getNode().isEmpty(),s=UB(e);(n.length>0||!e.eventCache.isFullyInitialized()||r&&!a.getNode().equals(s)||!a.getNode().getPriority().equals(s.getPriority()))&&n.push(int(UB(t)))}}function Uz(e,t,n,a,r,s){const o=t.eventCache;if(M2(a,n)!=null)return t;{let i,c;if(ga(n))if(on(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const A=Vf(t),d=A instanceof Xa?A:Xa.EMPTY_NODE,f=Iz(a,d);i=e.filter.updateFullNode(t.eventCache.getNode(),f,s)}else{const A=VB(a,Vf(t));i=e.filter.updateFullNode(t.eventCache.getNode(),A,s)}else{const A=xa(n);if(A===".priority"){on(sA(n)===1,"Can't have a priority with additional path components");const d=o.getNode();c=t.serverCache.getNode();const f=EV(a,n,d,c);f!=null?i=e.filter.updatePriority(d,f):i=o.getNode()}else{const d=hr(n);let f;if(o.isCompleteForChild(A)){c=t.serverCache.getNode();const m=EV(a,n,o.getNode(),c);m!=null?f=o.getNode().getImmediateChild(A).updateChild(d,m):f=o.getNode().getImmediateChild(A)}else f=Y4(a,A,t.serverCache);f!=null?i=e.filter.updateChild(o.getNode(),A,f,d,r,s):i=o.getNode()}}return f0(t,i,o.isFullyInitialized()||ga(n),e.filter.filtersNodes())}}function O2(e,t,n,a,r,s,o,i){const c=t.serverCache;let A;const d=o?e.filter:e.filter.getIndexedFilter();if(ga(n))A=d.updateFullNode(c.getNode(),a,null);else if(d.filtersNodes()&&!c.isFiltered()){const h=c.getNode().updateChild(n,a);A=d.updateFullNode(c.getNode(),h,null)}else{const h=xa(n);if(!c.isCompleteForPath(n)&&sA(n)>1)return t;const p=hr(n),g=c.getNode().getImmediateChild(h).updateChild(p,a);h===".priority"?A=d.updatePriority(c.getNode(),g):A=d.updateChild(c.getNode(),h,g,p,Dz,null)}const f=Sz(t,A,c.isFullyInitialized()||ga(n),d.filtersNodes()),m=new X4(r,f,s);return Uz(e,f,n,r,m,i)}function LB(e,t,n,a,r,s,o){const i=t.eventCache;let c,A;const d=new X4(r,t,s);if(ga(n))A=e.filter.updateFullNode(t.eventCache.getNode(),a,o),c=f0(t,A,!0,e.filter.filtersNodes());else{const f=xa(n);if(f===".priority")A=e.filter.updatePriority(t.eventCache.getNode(),a),c=f0(t,A,i.isFullyInitialized(),i.isFiltered());else{const m=hr(n),h=i.getNode().getImmediateChild(f);let p;if(ga(m))p=a;else{const y=d.getCompleteChild(f);y!=null?cz(m)===".priority"&&y.getChild(Az(m)).isEmpty()?p=y:p=y.updateChild(m,a):p=Xa.EMPTY_NODE}if(h.equals(p))c=t;else{const y=e.filter.updateChild(i.getNode(),f,p,m,d,o);c=f0(t,y,i.isFullyInitialized(),e.filter.filtersNodes())}}}return c}function BV(e,t){return e.eventCache.isCompleteForChild(t)}function Mnt(e,t,n,a,r,s,o){let i=t;return a.foreach((c,A)=>{const d=Rs(n,c);BV(t,xa(d))&&(i=LB(e,i,d,A,r,s,o))}),a.foreach((c,A)=>{const d=Rs(n,c);BV(t,xa(d))||(i=LB(e,i,d,A,r,s,o))}),i}function kV(e,t,n){return n.foreach((a,r)=>{t=t.updateChild(a,r)}),t}function MB(e,t,n,a,r,s,o,i){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c=t,A;ga(n)?A=a:A=new vr(null).setTree(n,a);const d=t.serverCache.getNode();return A.children.inorderTraversal((f,m)=>{if(d.hasChild(f)){const h=t.serverCache.getNode().getImmediateChild(f),p=kV(e,h,m);c=O2(e,c,new br(f),p,r,s,o,i)}}),A.children.inorderTraversal((f,m)=>{const h=!t.serverCache.isCompleteForChild(f)&&m.value===null;if(!d.hasChild(f)&&!h){const p=t.serverCache.getNode().getImmediateChild(f),y=kV(e,p,m);c=O2(e,c,new br(f),y,r,s,o,i)}}),c}function Ont(e,t,n,a,r,s,o){if(M2(r,n)!=null)return t;const i=t.serverCache.isFiltered(),c=t.serverCache;if(a.value!=null){if(ga(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return O2(e,t,n,c.getNode().getChild(n),r,s,i,o);if(ga(n)){let A=new vr(null);return c.getNode().forEachChild(Ev,(d,f)=>{A=A.set(new br(d),f)}),MB(e,t,n,A,r,s,i,o)}else return t}else{let A=new vr(null);return a.foreach((d,f)=>{const m=Rs(n,d);c.isCompleteForPath(m)&&(A=A.set(d,c.getNode().getChild(m)))}),MB(e,t,n,A,r,s,i,o)}}function Hnt(e,t,n,a,r){const s=t.serverCache,o=Sz(t,s.getNode(),s.isFullyInitialized()||ga(n),s.isFiltered());return Uz(e,o,n,a,Dz,r)}function $nt(e,t,n,a,r,s){let o;if(M2(a,n)!=null)return t;{const i=new X4(a,t,r),c=t.eventCache.getNode();let A;if(ga(n)||xa(n)===".priority"){let d;if(t.serverCache.isFullyInitialized())d=VB(a,Vf(t));else{const f=t.serverCache.getNode();on(f instanceof Xa,"serverChildren would be complete if leaf node"),d=Iz(a,f)}d=d,A=e.filter.updateFullNode(c,d,s)}else{const d=xa(n);let f=Y4(a,d,t.serverCache);f==null&&t.serverCache.isCompleteForChild(d)&&(f=c.getImmediateChild(d)),f!=null?A=e.filter.updateChild(c,d,f,hr(n),i,s):t.eventCache.getNode().hasChild(d)?A=e.filter.updateChild(c,d,Xa.EMPTY_NODE,hr(n),i,s):A=c,A.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=VB(a,Vf(t)),o.isLeafNode()&&(A=e.filter.updateFullNode(A,o,s)))}return o=t.serverCache.isFullyInitialized()||M2(a,sr())!=null,f0(t,A,o,e.filter.filtersNodes())}}function Qnt(e,t){const n=Vf(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!ga(t)&&!n.getImmediateChild(xa(t)).isEmpty())?n.getChild(t):null}function TV(e,t,n,a){t.type===Bu.MERGE&&t.source.queryId!==null&&(on(Vf(e.viewCache_),"We should always have a full cache before handling merges"),on(UB(e.viewCache_),"Missing event cache, even though we have a server cache"));const r=e.viewCache_,s=Vnt(e.processor_,r,t,n,a);return Nnt(e.processor_,s.viewCache),on(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,Gnt(e,s.changes,s.viewCache.eventCache.getNode())}function Gnt(e,t,n,a){const r=e.eventRegistrations_;return pnt(e.eventGenerator_,t,n,r)}let IV;function znt(e){on(!IV,"__referenceConstructor has already been defined"),IV=e}function J4(e,t,n,a){const r=t.source.queryId;if(r!==null){const s=e.views.get(r);return on(s!=null,"SyncTree gave us an op for an invalid query."),TV(s,t,n,a)}else{let s=[];for(const o of e.views.values())s=s.concat(TV(o,t,n,a));return s}}function Z4(e,t){let n=null;for(const a of e.views.values())n=n||Qnt(a,t);return n}let FV;function Knt(e){on(!FV,"__referenceConstructor has already been defined"),FV=e}class PV{constructor(t){this.listenProvider_=t,this.syncPointTree_=new vr(null),this.pendingWriteTree_=Pnt(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Wnt(e,t,n,a,r){return wnt(e.pendingWriteTree_,t,n,a,r),r?hb(e,new Nf(wz(),t,n)):[]}function ov(e,t,n=!1){const a=bnt(e.pendingWriteTree_,t);if(xnt(e.pendingWriteTree_,t)){let s=new vr(null);return a.snap!=null?s=s.set(sr(),!0):cl(a.children,o=>{s=s.set(new br(o),!0)}),hb(e,new L2(a.path,s,n))}else return[]}function vb(e,t,n){return hb(e,new Nf(bz(),t,n))}function jnt(e,t,n){const a=vr.fromObject(n);return hb(e,new ig(bz(),t,a))}function qnt(e,t,n,a){const r=Lz(e,a);if(r!=null){const s=Mz(r),o=s.path,i=s.queryId,c=sl(o,t),A=new Nf(xz(i),c,n);return Oz(e,o,A)}else return[]}function Ynt(e,t,n,a){const r=Lz(e,a);if(r){const s=Mz(r),o=s.path,i=s.queryId,c=sl(o,t),A=vr.fromObject(n),d=new ig(xz(i),c,A);return Oz(e,o,d)}else return[]}function Rz(e,t,n){const r=e.pendingWriteTree_,s=e.syncPointTree_.findOnPath(t,(o,i)=>{const c=sl(o,t),A=Z4(i,c);if(A)return A});return Tz(r,t,s,n,!0)}function hb(e,t){return Nz(t,e.syncPointTree_,null,Bz(e.pendingWriteTree_,sr()))}function Nz(e,t,n,a){if(ga(e.path))return Vz(e,t,n,a);{const r=t.get(sr());n==null&&r!=null&&(n=Z4(r,sr()));let s=[];const o=xa(e.path),i=e.operationForChild(o),c=t.children.get(o);if(c&&i){const A=n?n.getImmediateChild(o):null,d=Fz(a,o);s=s.concat(Nz(i,c,A,d))}return r&&(s=s.concat(J4(r,e,a,n))),s}}function Vz(e,t,n,a){const r=t.get(sr());n==null&&r!=null&&(n=Z4(r,sr()));let s=[];return t.children.inorderTraversal((o,i)=>{const c=n?n.getImmediateChild(o):null,A=Fz(a,o),d=e.operationForChild(o);d&&(s=s.concat(Vz(d,i,c,A)))}),r&&(s=s.concat(J4(r,e,a,n))),s}function Lz(e,t){return e.tagToQueryMap.get(t)}function Mz(e){const t=e.indexOf("$");return on(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new br(e.substr(0,t))}}function Oz(e,t,n){const a=e.syncPointTree_.get(t);on(a,"Missing sync point for query tag that we're tracking");const r=Bz(e.pendingWriteTree_,t);return J4(a,n,r,null)}class eI{constructor(t){this.node_=t}getImmediateChild(t){const n=this.node_.getImmediateChild(t);return new eI(n)}node(){return this.node_}}class tI{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){const n=Rs(this.path_,t);return new tI(this.syncTree_,n)}node(){return Rz(this.syncTree_,this.path_)}}const Xnt=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},DV=function(e,t,n){if(!e||typeof e!="object")return e;if(on(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return Jnt(e[".sv"],t,n);if(typeof e[".sv"]=="object")return Znt(e[".sv"],t);on(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},Jnt=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:on(!1,"Unexpected server value: "+e)}},Znt=function(e,t,n){e.hasOwnProperty("increment")||on(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const a=e.increment;typeof a!="number"&&on(!1,"Unexpected increment value: "+a);const r=t.node();if(on(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return a;const o=r.getValue();return typeof o!="number"?a:o+a},eat=function(e,t,n,a){return nI(t,new tI(n,e),a)},tat=function(e,t,n){return nI(e,new eI(t),n)};function nI(e,t,n){const a=e.getPriority().val(),r=DV(a,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const o=e,i=DV(o.getValue(),t,n);return i!==o.getValue()||r!==o.getPriority().val()?new Ps(i,co(r)):e}else{const o=e;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new Ps(r))),o.forEachChild(go,(i,c)=>{const A=nI(c,t.getImmediateChild(i),n);A!==c&&(s=s.updateImmediateChild(i,A))}),s}}class aI{constructor(t="",n=null,a={children:{},childCount:0}){this.name=t,this.parent=n,this.node=a}}function rI(e,t){let n=t instanceof br?t:new br(t),a=e,r=xa(n);for(;r!==null;){const s=Mv(a.node.children,r)||{children:{},childCount:0};a=new aI(r,a,s),n=hr(n),r=xa(n)}return a}function Dh(e){return e.node.value}function Hz(e,t){e.node.value=t,OB(e)}function $z(e){return e.node.childCount>0}function nat(e){return Dh(e)===void 0&&!$z(e)}function pb(e,t){cl(e.node.children,(n,a)=>{t(new aI(n,e,a))})}function Qz(e,t,n,a){n&&t(e),pb(e,r=>{Qz(r,t,!0)})}function aat(e,t,n){let a=e.parent;for(;a!==null;){if(t(a))return!0;a=a.parent}return!1}function Xg(e){return new br(e.parent===null?e.name:Xg(e.parent)+"/"+e.name)}function OB(e){e.parent!==null&&rat(e.parent,e.name,e)}function rat(e,t,n){const a=nat(n),r=zc(e.node.children,t);a&&r?(delete e.node.children[t],e.node.childCount--,OB(e)):!a&&!r&&(e.node.children[t]=n.node,e.node.childCount++,OB(e))}const sat=/[\[\].#$\/\u0000-\u001F\u007F]/,oat=/[\[\].#$\u0000-\u001F\u007F]/,tS=10*1024*1024,Gz=function(e){return typeof e=="string"&&e.length!==0&&!sat.test(e)},iat=function(e){return typeof e=="string"&&e.length!==0&&!oat.test(e)},lat=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),iat(e)},zz=function(e,t,n){const a=n instanceof br?new Htt(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+OA(a));if(typeof t=="function")throw new Error(e+"contains a function "+OA(a)+" with contents = "+t.toString());if(GG(t))throw new Error(e+"contains "+t.toString()+" "+OA(a));if(typeof t=="string"&&t.length>tS/3&&pw(t)>tS)throw new Error(e+"contains a string greater than "+tS+" utf8 bytes "+OA(a)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let r=!1,s=!1;if(cl(t,(o,i)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Gz(o)))throw new Error(e+" contains an invalid key ("+o+") "+OA(a)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);$tt(a,o),zz(e,i,a),Qtt(a)}),r&&s)throw new Error(e+' contains ".value" child '+OA(a)+" in addition to actual children.")}},uat=function(e,t){const n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!Gz(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!lat(n))throw new Error(Hoe(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};class cat{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function dat(e,t){let n=null;for(let a=0;a<t.length;a++){const r=t[a],s=r.getPath();n!==null&&!fz(s,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(r)}n&&e.eventLists_.push(n)}function im(e,t,n){dat(e,n),Aat(e,a=>Nl(a,t)||Nl(t,a))}function Aat(e,t){e.recursionDepth_++;let n=!0;for(let a=0;a<e.eventLists_.length;a++){const r=e.eventLists_[a];if(r){const s=r.path;t(s)?(fat(e.eventLists_[a]),e.eventLists_[a]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function fat(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(n!==null){e.events[t]=null;const a=n.getEventRunner();d0&&uo("event: "+n.toString()),qg(a)}}}const mat="repo_interrupt",vat=25;class hat{constructor(t,n,a,r){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=a,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new cat,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=V2(),this.transactionQueueTree_=new aI,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function pat(e,t,n){if(e.stats_=G4(e.repoInfo_),e.forceRestClient_||dtt())e.server_=new N2(e.repoInfo_,(a,r,s,o)=>{UV(e,a,r,s,o)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>RV(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ws(n)}catch(a){throw new Error("Invalid authOverride provided: "+a)}}e.persistentConnection_=new Ic(e.repoInfo_,t,(a,r,s,o)=>{UV(e,a,r,s,o)},a=>{RV(e,a)},a=>{yat(e,a)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(a=>{e.server_.refreshAuthToken(a)}),e.appCheckProvider_.addTokenChangeListener(a=>{e.server_.refreshAppCheckToken(a.token)}),e.statsReporter_=ptt(e.repoInfo_,()=>new hnt(e.stats_,e.server_)),e.infoData_=new dnt,e.infoSyncTree_=new PV({startListening:(a,r,s,o)=>{let i=[];const c=e.infoData_.getNode(a._path);return c.isEmpty()||(i=vb(e.infoSyncTree_,a._path,c),setTimeout(()=>{o("ok")},0)),i},stopListening:()=>{}}),sI(e,"connected",!1),e.serverSyncTree_=new PV({startListening:(a,r,s,o)=>(e.server_.listen(a,s,r,(i,c)=>{const A=o(i,c);im(e.eventQueue_,a._path,A)}),[]),stopListening:(a,r)=>{e.server_.unlisten(a,r)}})}function gat(e){const n=e.infoData_.getNode(new br(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Kz(e){return Xnt({timestamp:gat(e)})}function UV(e,t,n,a,r){e.dataUpdateCount++;const s=new br(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(r)if(a){const c=N_(n,A=>co(A));o=Ynt(e.serverSyncTree_,s,c,r)}else{const c=co(n);o=qnt(e.serverSyncTree_,s,c,r)}else if(a){const c=N_(n,A=>co(A));o=jnt(e.serverSyncTree_,s,c)}else{const c=co(n);o=vb(e.serverSyncTree_,s,c)}let i=s;o.length>0&&(i=iI(e,s)),im(e.eventQueue_,i,o)}function RV(e,t){sI(e,"connected",t),t===!1&&wat(e)}function yat(e,t){cl(t,(n,a)=>{sI(e,n,a)})}function sI(e,t,n){const a=new br("/.info/"+t),r=co(n);e.infoData_.updateSnapshot(a,r);const s=vb(e.infoSyncTree_,a,r);im(e.eventQueue_,a,s)}function _at(e){return e.nextWriteId_++}function wat(e){Wz(e,"onDisconnectEvents");const t=Kz(e),n=V2();DB(e.onDisconnect_,sr(),(r,s)=>{const o=eat(r,s,e.serverSyncTree_,t);_z(n,r,o)});let a=[];DB(n,sr(),(r,s)=>{a=a.concat(vb(e.serverSyncTree_,r,s));const o=Sat(e,r);iI(e,o)}),e.onDisconnect_=V2(),im(e.eventQueue_,sr(),a)}function bat(e){e.persistentConnection_&&e.persistentConnection_.interrupt(mat)}function Wz(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),uo(n,...t)}function jz(e,t,n){return Rz(e.serverSyncTree_,t,n)||Xa.EMPTY_NODE}function oI(e,t=e.transactionQueueTree_){if(t||gb(e,t),Dh(t)){const n=Yz(e,t);on(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&xat(e,Xg(t),n)}else $z(t)&&pb(t,n=>{oI(e,n)})}function xat(e,t,n){const a=n.map(A=>A.currentWriteId),r=jz(e,t,a);let s=r;const o=r.hash();for(let A=0;A<n.length;A++){const d=n[A];on(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const f=sl(t,d.path);s=s.updateChild(f,d.currentOutputSnapshotRaw)}const i=s.val(!0),c=t;e.server_.put(c.toString(),i,A=>{Wz(e,"transaction put response",{path:c.toString(),status:A});let d=[];if(A==="ok"){const f=[];for(let m=0;m<n.length;m++)n[m].status=2,d=d.concat(ov(e.serverSyncTree_,n[m].currentWriteId)),n[m].onComplete&&f.push(()=>n[m].onComplete(null,!0,n[m].currentOutputSnapshotResolved)),n[m].unwatcher();gb(e,rI(e.transactionQueueTree_,t)),oI(e,e.transactionQueueTree_),im(e.eventQueue_,t,d);for(let m=0;m<f.length;m++)qg(f[m])}else{if(A==="datastale")for(let f=0;f<n.length;f++)n[f].status===3?n[f].status=4:n[f].status=0;else{Pi("transaction at "+c.toString()+" failed: "+A);for(let f=0;f<n.length;f++)n[f].status=4,n[f].abortReason=A}iI(e,t)}},o)}function iI(e,t){const n=qz(e,t),a=Xg(n),r=Yz(e,n);return Cat(e,r,a),a}function Cat(e,t,n){if(t.length===0)return;const a=[];let r=[];const o=t.filter(i=>i.status===0).map(i=>i.currentWriteId);for(let i=0;i<t.length;i++){const c=t[i],A=sl(n,c.path);let d=!1,f;if(on(A!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,f=c.abortReason,r=r.concat(ov(e.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=vat)d=!0,f="maxretry",r=r.concat(ov(e.serverSyncTree_,c.currentWriteId,!0));else{const m=jz(e,c.path,o);c.currentInputSnapshot=m;const h=t[i].update(m.val());if(h!==void 0){zz("transaction failed: Data returned ",h,c.path);let p=co(h);typeof h=="object"&&h!=null&&zc(h,".priority")||(p=p.updatePriority(m.getPriority()));const g=c.currentWriteId,w=Kz(e),b=tat(p,m,w);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=b,c.currentWriteId=_at(e),o.splice(o.indexOf(g),1),r=r.concat(Wnt(e.serverSyncTree_,c.path,b,c.currentWriteId,c.applyLocally)),r=r.concat(ov(e.serverSyncTree_,g,!0))}else d=!0,f="nodata",r=r.concat(ov(e.serverSyncTree_,c.currentWriteId,!0))}im(e.eventQueue_,n,r),r=[],d&&(t[i].status=2,(function(m){setTimeout(m,Math.floor(0))})(t[i].unwatcher),t[i].onComplete&&(f==="nodata"?a.push(()=>t[i].onComplete(null,!1,t[i].currentInputSnapshot)):a.push(()=>t[i].onComplete(new Error(f),!1,null))))}gb(e,e.transactionQueueTree_);for(let i=0;i<a.length;i++)qg(a[i]);oI(e,e.transactionQueueTree_)}function qz(e,t){let n,a=e.transactionQueueTree_;for(n=xa(t);n!==null&&Dh(a)===void 0;)a=rI(a,n),t=hr(t),n=xa(t);return a}function Yz(e,t){const n=[];return Xz(e,t,n),n.sort((a,r)=>a.order-r.order),n}function Xz(e,t,n){const a=Dh(t);if(a)for(let r=0;r<a.length;r++)n.push(a[r]);pb(t,r=>{Xz(e,r,n)})}function gb(e,t){const n=Dh(t);if(n){let a=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[a]=n[r],a++);n.length=a,Hz(t,n.length>0?n:void 0)}pb(t,a=>{gb(e,a)})}function Sat(e,t){const n=Xg(qz(e,t)),a=rI(e.transactionQueueTree_,t);return aat(a,r=>{nS(e,r)}),nS(e,a),Qz(a,r=>{nS(e,r)}),n}function nS(e,t){const n=Dh(t);if(n){const a=[];let r=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(on(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(on(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),r=r.concat(ov(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&a.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Hz(t,void 0):n.length=s+1,im(e.eventQueue_,Xg(t),r);for(let o=0;o<a.length;o++)qg(a[o])}}function Eat(e){let t="";const n=e.split("/");for(let a=0;a<n.length;a++)if(n[a].length>0){let r=n[a];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}function Bat(e){const t={};e.charAt(0)==="?"&&(e=e.substring(1));for(const n of e.split("&")){if(n.length===0)continue;const a=n.split("=");a.length===2?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Pi(`Invalid query segment '${n}' in query '${e}'`)}return t}const NV=function(e,t){const n=kat(e),a=n.namespace;n.domain==="firebase.com"&&Uf(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!a||a==="undefined")&&n.domain!=="localhost"&&Uf("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||att();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new mtt(n.host,n.secure,a,r,t,"",a!==n.subdomain),path:new br(n.pathString)}},kat=function(e){let t="",n="",a="",r="",s="",o=!0,i="https",c=443;if(typeof e=="string"){let A=e.indexOf("//");A>=0&&(i=e.substring(0,A-1),e=e.substring(A+2));let d=e.indexOf("/");d===-1&&(d=e.length);let f=e.indexOf("?");f===-1&&(f=e.length),t=e.substring(0,Math.min(d,f)),d<f&&(r=Eat(e.substring(d,f)));const m=Bat(e.substring(Math.min(e.length,f)));A=t.indexOf(":"),A>=0?(o=i==="https"||i==="wss",c=parseInt(t.substring(A+1),10)):A=t.length;const h=t.slice(0,A);if(h.toLowerCase()==="localhost")n="localhost";else if(h.split(".").length<=2)n=h;else{const p=t.indexOf(".");a=t.substring(0,p).toLowerCase(),n=t.substring(p+1),s=a}"ns"in m&&(s=m.ns)}return{host:t,port:c,domain:n,subdomain:a,secure:o,scheme:i,pathString:r,namespace:s}};class lI{constructor(t,n,a,r){this._repo=t,this._path=n,this._queryParams=a,this._orderByCalled=r}get key(){return ga(this._path)?null:cz(this._path)}get ref(){return new Uh(this._repo,this._path)}get _queryIdentifier(){const t=wV(this._queryParams),n=$4(t);return n==="{}"?"default":n}get _queryObject(){return wV(this._queryParams)}isEqual(t){if(t=zu(t),!(t instanceof lI))return!1;const n=this._repo===t._repo,a=fz(this._path,t._path),r=this._queryIdentifier===t._queryIdentifier;return n&&a&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+Ott(this._path)}}class Uh extends lI{constructor(t,n){super(t,n,new j4,!1)}get parent(){const t=Az(this._path);return t===null?null:new Uh(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}znt(Uh);Knt(Uh);const Tat="FIREBASE_DATABASE_EMULATOR_HOST",HB={};let Iat=!1;function Fat(e,t,n,a,r){let s=a||e.options.databaseURL;s===void 0&&(e.options.projectId||Uf("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),uo("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o=NV(s,r),i=o.repoInfo,c;typeof process<"u"&&nV&&(c=nV[Tat]),c?(s=`http://${c}?ns=${i.namespace}`,o=NV(s,r),i=o.repoInfo):o.repoInfo.secure;const A=new ftt(e.name,e.options,t);uat("Invalid Firebase Database URL",o),ga(o.path)||Uf("Database URL must point to the root of a Firebase Database (not including a child path).");const d=Dat(i,e,A,new Att(e,n));return new Uat(d,e)}function Pat(e,t){const n=HB[t];(!n||n[e.key]!==e)&&Uf(`Database ${t}(${e.repoInfo_}) has already been deleted.`),bat(e),delete n[e.key]}function Dat(e,t,n,a){let r=HB[t.name];r||(r={},HB[t.name]=r);let s=r[e.toURLString()];return s&&Uf("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new hat(e,Iat,n,a),r[e.toURLString()]=s,s}class Uat{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(pat(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Uh(this._repo,sr())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Pat(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Uf("Cannot call "+t+" on a deleted database.")}}function Rat(e){Xet(lA),Nu(new jl("database",(t,{instanceIdentifier:n})=>{const a=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return Fat(a,r,s,n)},"PUBLIC").setMultipleInstances(!0)),Fi(aV,rV,e),Fi(aV,rV,"esm2017")}Ic.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};Ic.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};Rat();var VV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var uI;(function(){var e;function t(S,E){function C(){}C.prototype=E.prototype,S.D=E.prototype,S.prototype=new C,S.prototype.constructor=S,S.C=function(D,P,O){for(var H=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)H[ie-2]=arguments[ie];return E.prototype[P].apply(D,H)}}function n(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(a,n),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(S,E,C){C||(C=0);var D=Array(16);if(typeof E=="string")for(var P=0;16>P;++P)D[P]=E.charCodeAt(C++)|E.charCodeAt(C++)<<8|E.charCodeAt(C++)<<16|E.charCodeAt(C++)<<24;else for(P=0;16>P;++P)D[P]=E[C++]|E[C++]<<8|E[C++]<<16|E[C++]<<24;E=S.g[0],C=S.g[1],P=S.g[2];var O=S.g[3],H=E+(O^C&(P^O))+D[0]+3614090360&4294967295;E=C+(H<<7&4294967295|H>>>25),H=O+(P^E&(C^P))+D[1]+3905402710&4294967295,O=E+(H<<12&4294967295|H>>>20),H=P+(C^O&(E^C))+D[2]+606105819&4294967295,P=O+(H<<17&4294967295|H>>>15),H=C+(E^P&(O^E))+D[3]+3250441966&4294967295,C=P+(H<<22&4294967295|H>>>10),H=E+(O^C&(P^O))+D[4]+4118548399&4294967295,E=C+(H<<7&4294967295|H>>>25),H=O+(P^E&(C^P))+D[5]+1200080426&4294967295,O=E+(H<<12&4294967295|H>>>20),H=P+(C^O&(E^C))+D[6]+2821735955&4294967295,P=O+(H<<17&4294967295|H>>>15),H=C+(E^P&(O^E))+D[7]+4249261313&4294967295,C=P+(H<<22&4294967295|H>>>10),H=E+(O^C&(P^O))+D[8]+1770035416&4294967295,E=C+(H<<7&4294967295|H>>>25),H=O+(P^E&(C^P))+D[9]+2336552879&4294967295,O=E+(H<<12&4294967295|H>>>20),H=P+(C^O&(E^C))+D[10]+4294925233&4294967295,P=O+(H<<17&4294967295|H>>>15),H=C+(E^P&(O^E))+D[11]+2304563134&4294967295,C=P+(H<<22&4294967295|H>>>10),H=E+(O^C&(P^O))+D[12]+1804603682&4294967295,E=C+(H<<7&4294967295|H>>>25),H=O+(P^E&(C^P))+D[13]+4254626195&4294967295,O=E+(H<<12&4294967295|H>>>20),H=P+(C^O&(E^C))+D[14]+2792965006&4294967295,P=O+(H<<17&4294967295|H>>>15),H=C+(E^P&(O^E))+D[15]+1236535329&4294967295,C=P+(H<<22&4294967295|H>>>10),H=E+(P^O&(C^P))+D[1]+4129170786&4294967295,E=C+(H<<5&4294967295|H>>>27),H=O+(C^P&(E^C))+D[6]+3225465664&4294967295,O=E+(H<<9&4294967295|H>>>23),H=P+(E^C&(O^E))+D[11]+643717713&4294967295,P=O+(H<<14&4294967295|H>>>18),H=C+(O^E&(P^O))+D[0]+3921069994&4294967295,C=P+(H<<20&4294967295|H>>>12),H=E+(P^O&(C^P))+D[5]+3593408605&4294967295,E=C+(H<<5&4294967295|H>>>27),H=O+(C^P&(E^C))+D[10]+38016083&4294967295,O=E+(H<<9&4294967295|H>>>23),H=P+(E^C&(O^E))+D[15]+3634488961&4294967295,P=O+(H<<14&4294967295|H>>>18),H=C+(O^E&(P^O))+D[4]+3889429448&4294967295,C=P+(H<<20&4294967295|H>>>12),H=E+(P^O&(C^P))+D[9]+568446438&4294967295,E=C+(H<<5&4294967295|H>>>27),H=O+(C^P&(E^C))+D[14]+3275163606&4294967295,O=E+(H<<9&4294967295|H>>>23),H=P+(E^C&(O^E))+D[3]+4107603335&4294967295,P=O+(H<<14&4294967295|H>>>18),H=C+(O^E&(P^O))+D[8]+1163531501&4294967295,C=P+(H<<20&4294967295|H>>>12),H=E+(P^O&(C^P))+D[13]+2850285829&4294967295,E=C+(H<<5&4294967295|H>>>27),H=O+(C^P&(E^C))+D[2]+4243563512&4294967295,O=E+(H<<9&4294967295|H>>>23),H=P+(E^C&(O^E))+D[7]+1735328473&4294967295,P=O+(H<<14&4294967295|H>>>18),H=C+(O^E&(P^O))+D[12]+2368359562&4294967295,C=P+(H<<20&4294967295|H>>>12),H=E+(C^P^O)+D[5]+4294588738&4294967295,E=C+(H<<4&4294967295|H>>>28),H=O+(E^C^P)+D[8]+2272392833&4294967295,O=E+(H<<11&4294967295|H>>>21),H=P+(O^E^C)+D[11]+1839030562&4294967295,P=O+(H<<16&4294967295|H>>>16),H=C+(P^O^E)+D[14]+4259657740&4294967295,C=P+(H<<23&4294967295|H>>>9),H=E+(C^P^O)+D[1]+2763975236&4294967295,E=C+(H<<4&4294967295|H>>>28),H=O+(E^C^P)+D[4]+1272893353&4294967295,O=E+(H<<11&4294967295|H>>>21),H=P+(O^E^C)+D[7]+4139469664&4294967295,P=O+(H<<16&4294967295|H>>>16),H=C+(P^O^E)+D[10]+3200236656&4294967295,C=P+(H<<23&4294967295|H>>>9),H=E+(C^P^O)+D[13]+681279174&4294967295,E=C+(H<<4&4294967295|H>>>28),H=O+(E^C^P)+D[0]+3936430074&4294967295,O=E+(H<<11&4294967295|H>>>21),H=P+(O^E^C)+D[3]+3572445317&4294967295,P=O+(H<<16&4294967295|H>>>16),H=C+(P^O^E)+D[6]+76029189&4294967295,C=P+(H<<23&4294967295|H>>>9),H=E+(C^P^O)+D[9]+3654602809&4294967295,E=C+(H<<4&4294967295|H>>>28),H=O+(E^C^P)+D[12]+3873151461&4294967295,O=E+(H<<11&4294967295|H>>>21),H=P+(O^E^C)+D[15]+530742520&4294967295,P=O+(H<<16&4294967295|H>>>16),H=C+(P^O^E)+D[2]+3299628645&4294967295,C=P+(H<<23&4294967295|H>>>9),H=E+(P^(C|~O))+D[0]+4096336452&4294967295,E=C+(H<<6&4294967295|H>>>26),H=O+(C^(E|~P))+D[7]+1126891415&4294967295,O=E+(H<<10&4294967295|H>>>22),H=P+(E^(O|~C))+D[14]+2878612391&4294967295,P=O+(H<<15&4294967295|H>>>17),H=C+(O^(P|~E))+D[5]+4237533241&4294967295,C=P+(H<<21&4294967295|H>>>11),H=E+(P^(C|~O))+D[12]+1700485571&4294967295,E=C+(H<<6&4294967295|H>>>26),H=O+(C^(E|~P))+D[3]+2399980690&4294967295,O=E+(H<<10&4294967295|H>>>22),H=P+(E^(O|~C))+D[10]+4293915773&4294967295,P=O+(H<<15&4294967295|H>>>17),H=C+(O^(P|~E))+D[1]+2240044497&4294967295,C=P+(H<<21&4294967295|H>>>11),H=E+(P^(C|~O))+D[8]+1873313359&4294967295,E=C+(H<<6&4294967295|H>>>26),H=O+(C^(E|~P))+D[15]+4264355552&4294967295,O=E+(H<<10&4294967295|H>>>22),H=P+(E^(O|~C))+D[6]+2734768916&4294967295,P=O+(H<<15&4294967295|H>>>17),H=C+(O^(P|~E))+D[13]+1309151649&4294967295,C=P+(H<<21&4294967295|H>>>11),H=E+(P^(C|~O))+D[4]+4149444226&4294967295,E=C+(H<<6&4294967295|H>>>26),H=O+(C^(E|~P))+D[11]+3174756917&4294967295,O=E+(H<<10&4294967295|H>>>22),H=P+(E^(O|~C))+D[2]+718787259&4294967295,P=O+(H<<15&4294967295|H>>>17),H=C+(O^(P|~E))+D[9]+3951481745&4294967295,S.g[0]=S.g[0]+E&4294967295,S.g[1]=S.g[1]+(P+(H<<21&4294967295|H>>>11))&4294967295,S.g[2]=S.g[2]+P&4294967295,S.g[3]=S.g[3]+O&4294967295}a.prototype.u=function(S,E){E===void 0&&(E=S.length);for(var C=E-this.blockSize,D=this.B,P=this.h,O=0;O<E;){if(P==0)for(;O<=C;)r(this,S,O),O+=this.blockSize;if(typeof S=="string"){for(;O<E;)if(D[P++]=S.charCodeAt(O++),P==this.blockSize){r(this,D),P=0;break}}else for(;O<E;)if(D[P++]=S[O++],P==this.blockSize){r(this,D),P=0;break}}this.h=P,this.o+=E},a.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var E=1;E<S.length-8;++E)S[E]=0;var C=8*this.o;for(E=S.length-8;E<S.length;++E)S[E]=C&255,C/=256;for(this.u(S),S=Array(16),E=C=0;4>E;++E)for(var D=0;32>D;D+=8)S[C++]=this.g[E]>>>D&255;return S};function s(S,E){var C=i;return Object.prototype.hasOwnProperty.call(C,S)?C[S]:C[S]=E(S)}function o(S,E){this.h=E;for(var C=[],D=!0,P=S.length-1;0<=P;P--){var O=S[P]|0;D&&O==E||(C[P]=O,D=!1)}this.g=C}var i={};function c(S){return-128<=S&&128>S?s(S,function(E){return new o([E|0],0>E?-1:0)}):new o([S|0],0>S?-1:0)}function A(S){if(isNaN(S)||!isFinite(S))return f;if(0>S)return g(A(-S));for(var E=[],C=1,D=0;S>=C;D++)E[D]=S/C|0,C*=4294967296;return new o(E,0)}function d(S,E){if(S.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(S.charAt(0)=="-")return g(d(S.substring(1),E));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=A(Math.pow(E,8)),D=f,P=0;P<S.length;P+=8){var O=Math.min(8,S.length-P),H=parseInt(S.substring(P,P+O),E);8>O?(O=A(Math.pow(E,O)),D=D.j(O).add(A(H))):(D=D.j(C),D=D.add(A(H)))}return D}var f=c(0),m=c(1),h=c(16777216);e=o.prototype,e.m=function(){if(y(this))return-g(this).m();for(var S=0,E=1,C=0;C<this.g.length;C++){var D=this.i(C);S+=(0<=D?D:4294967296+D)*E,E*=4294967296}return S},e.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(p(this))return"0";if(y(this))return"-"+g(this).toString(S);for(var E=A(Math.pow(S,6)),C=this,D="";;){var P=T(C,E).g;C=w(C,P.j(E));var O=((0<C.g.length?C.g[0]:C.h)>>>0).toString(S);if(C=P,p(C))return O+D;for(;6>O.length;)O="0"+O;D=O+D}},e.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function p(S){if(S.h!=0)return!1;for(var E=0;E<S.g.length;E++)if(S.g[E]!=0)return!1;return!0}function y(S){return S.h==-1}e.l=function(S){return S=w(this,S),y(S)?-1:p(S)?0:1};function g(S){for(var E=S.g.length,C=[],D=0;D<E;D++)C[D]=~S.g[D];return new o(C,~S.h).add(m)}e.abs=function(){return y(this)?g(this):this},e.add=function(S){for(var E=Math.max(this.g.length,S.g.length),C=[],D=0,P=0;P<=E;P++){var O=D+(this.i(P)&65535)+(S.i(P)&65535),H=(O>>>16)+(this.i(P)>>>16)+(S.i(P)>>>16);D=H>>>16,O&=65535,H&=65535,C[P]=H<<16|O}return new o(C,C[C.length-1]&-2147483648?-1:0)};function w(S,E){return S.add(g(E))}e.j=function(S){if(p(this)||p(S))return f;if(y(this))return y(S)?g(this).j(g(S)):g(g(this).j(S));if(y(S))return g(this.j(g(S)));if(0>this.l(h)&&0>S.l(h))return A(this.m()*S.m());for(var E=this.g.length+S.g.length,C=[],D=0;D<2*E;D++)C[D]=0;for(D=0;D<this.g.length;D++)for(var P=0;P<S.g.length;P++){var O=this.i(D)>>>16,H=this.i(D)&65535,ie=S.i(P)>>>16,Ae=S.i(P)&65535;C[2*D+2*P]+=H*Ae,b(C,2*D+2*P),C[2*D+2*P+1]+=O*Ae,b(C,2*D+2*P+1),C[2*D+2*P+1]+=H*ie,b(C,2*D+2*P+1),C[2*D+2*P+2]+=O*ie,b(C,2*D+2*P+2)}for(D=0;D<E;D++)C[D]=C[2*D+1]<<16|C[2*D];for(D=E;D<2*E;D++)C[D]=0;return new o(C,0)};function b(S,E){for(;(S[E]&65535)!=S[E];)S[E+1]+=S[E]>>>16,S[E]&=65535,E++}function x(S,E){this.g=S,this.h=E}function T(S,E){if(p(E))throw Error("division by zero");if(p(S))return new x(f,f);if(y(S))return E=T(g(S),E),new x(g(E.g),g(E.h));if(y(E))return E=T(S,g(E)),new x(g(E.g),E.h);if(30<S.g.length){if(y(S)||y(E))throw Error("slowDivide_ only works with positive integers.");for(var C=m,D=E;0>=D.l(S);)C=F(C),D=F(D);var P=k(C,1),O=k(D,1);for(D=k(D,2),C=k(C,2);!p(D);){var H=O.add(D);0>=H.l(S)&&(P=P.add(C),O=H),D=k(D,1),C=k(C,1)}return E=w(S,P.j(E)),new x(P,E)}for(P=f;0<=S.l(E);){for(C=Math.max(1,Math.floor(S.m()/E.m())),D=Math.ceil(Math.log(C)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),O=A(C),H=O.j(E);y(H)||0<H.l(S);)C-=D,O=A(C),H=O.j(E);p(O)&&(O=m),P=P.add(O),S=w(S,H)}return new x(P,S)}e.A=function(S){return T(this,S).h},e.and=function(S){for(var E=Math.max(this.g.length,S.g.length),C=[],D=0;D<E;D++)C[D]=this.i(D)&S.i(D);return new o(C,this.h&S.h)},e.or=function(S){for(var E=Math.max(this.g.length,S.g.length),C=[],D=0;D<E;D++)C[D]=this.i(D)|S.i(D);return new o(C,this.h|S.h)},e.xor=function(S){for(var E=Math.max(this.g.length,S.g.length),C=[],D=0;D<E;D++)C[D]=this.i(D)^S.i(D);return new o(C,this.h^S.h)};function F(S){for(var E=S.g.length+1,C=[],D=0;D<E;D++)C[D]=S.i(D)<<1|S.i(D-1)>>>31;return new o(C,S.h)}function k(S,E){var C=E>>5;E%=32;for(var D=S.g.length-C,P=[],O=0;O<D;O++)P[O]=0<E?S.i(O+C)>>>E|S.i(O+C+1)<<32-E:S.i(O+C);return new o(P,S.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=A,o.fromString=d,uI=o}).apply(typeof VV<"u"?VV:typeof self<"u"?self:typeof window<"u"?window:{});var My=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(R,ve,we){return R==Array.prototype||R==Object.prototype||(R[ve]=we.value),R};function n(R){R=[typeof globalThis=="object"&&globalThis,R,typeof window=="object"&&window,typeof self=="object"&&self,typeof My=="object"&&My];for(var ve=0;ve<R.length;++ve){var we=R[ve];if(we&&we.Math==Math)return we}throw Error("Cannot find global object")}var a=n(this);function r(R,ve){if(ve)e:{var we=a;R=R.split(".");for(var Oe=0;Oe<R.length-1;Oe++){var pt=R[Oe];if(!(pt in we))break e;we=we[pt]}R=R[R.length-1],Oe=we[R],ve=ve(Oe),ve!=Oe&&ve!=null&&t(we,R,{configurable:!0,writable:!0,value:ve})}}function s(R,ve){R instanceof String&&(R+="");var we=0,Oe=!1,pt={next:function(){if(!Oe&&we<R.length){var kt=we++;return{value:ve(kt,R[kt]),done:!1}}return Oe=!0,{done:!0,value:void 0}}};return pt[Symbol.iterator]=function(){return pt},pt}r("Array.prototype.values",function(R){return R||function(){return s(this,function(ve,we){return we})}});var o=o||{},i=this||self;function c(R){var ve=typeof R;return ve=ve!="object"?ve:R?Array.isArray(R)?"array":ve:"null",ve=="array"||ve=="object"&&typeof R.length=="number"}function A(R){var ve=typeof R;return ve=="object"&&R!=null||ve=="function"}function d(R,ve,we){return R.call.apply(R.bind,arguments)}function f(R,ve,we){if(!R)throw Error();if(2<arguments.length){var Oe=Array.prototype.slice.call(arguments,2);return function(){var pt=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(pt,Oe),R.apply(ve,pt)}}return function(){return R.apply(ve,arguments)}}function m(R,ve,we){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function h(R,ve){var we=Array.prototype.slice.call(arguments,1);return function(){var Oe=we.slice();return Oe.push.apply(Oe,arguments),R.apply(this,Oe)}}function p(R,ve){function we(){}we.prototype=ve.prototype,R.aa=ve.prototype,R.prototype=new we,R.prototype.constructor=R,R.Qb=function(Oe,pt,kt){for(var nn=Array(arguments.length-2),Va=2;Va<arguments.length;Va++)nn[Va-2]=arguments[Va];return ve.prototype[pt].apply(Oe,nn)}}function y(R){const ve=R.length;if(0<ve){const we=Array(ve);for(let Oe=0;Oe<ve;Oe++)we[Oe]=R[Oe];return we}return[]}function g(R,ve){for(let we=1;we<arguments.length;we++){const Oe=arguments[we];if(c(Oe)){const pt=R.length||0,kt=Oe.length||0;R.length=pt+kt;for(let nn=0;nn<kt;nn++)R[pt+nn]=Oe[nn]}else R.push(Oe)}}class w{constructor(ve,we){this.i=ve,this.j=we,this.h=0,this.g=null}get(){let ve;return 0<this.h?(this.h--,ve=this.g,this.g=ve.next,ve.next=null):ve=this.i(),ve}}function b(R){return/^[\s\xa0]*$/.test(R)}function x(){var R=i.navigator;return R&&(R=R.userAgent)?R:""}function T(R){return T[" "](R),R}T[" "]=function(){};var F=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function k(R,ve,we){for(const Oe in R)ve.call(we,R[Oe],Oe,R)}function S(R,ve){for(const we in R)ve.call(void 0,R[we],we,R)}function E(R){const ve={};for(const we in R)ve[we]=R[we];return ve}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(R,ve){let we,Oe;for(let pt=1;pt<arguments.length;pt++){Oe=arguments[pt];for(we in Oe)R[we]=Oe[we];for(let kt=0;kt<C.length;kt++)we=C[kt],Object.prototype.hasOwnProperty.call(Oe,we)&&(R[we]=Oe[we])}}function P(R){var ve=1;R=R.split(":");const we=[];for(;0<ve&&R.length;)we.push(R.shift()),ve--;return R.length&&we.push(R.join(":")),we}function O(R){i.setTimeout(()=>{throw R},0)}function H(){var R=ne;let ve=null;return R.g&&(ve=R.g,R.g=R.g.next,R.g||(R.h=null),ve.next=null),ve}class ie{constructor(){this.h=this.g=null}add(ve,we){const Oe=Ae.get();Oe.set(ve,we),this.h?this.h.next=Oe:this.g=Oe,this.h=Oe}}var Ae=new w(()=>new j,R=>R.reset());class j{constructor(){this.next=this.g=this.h=null}set(ve,we){this.h=ve,this.g=we,this.next=null}reset(){this.next=this.g=this.h=null}}let J,ue=!1,ne=new ie,Y=()=>{const R=i.Promise.resolve(void 0);J=()=>{R.then(te)}};var te=()=>{for(var R;R=H();){try{R.h.call(R.g)}catch(we){O(we)}var ve=Ae;ve.j(R),100>ve.h&&(ve.h++,R.next=ve.g,ve.g=R)}ue=!1};function L(){this.s=this.s,this.C=this.C}L.prototype.s=!1,L.prototype.ma=function(){this.s||(this.s=!0,this.N())},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(R,ve){this.type=R,this.g=this.target=ve,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!i.addEventListener||!Object.defineProperty)return!1;var R=!1,ve=Object.defineProperty({},"passive",{get:function(){R=!0}});try{const we=()=>{};i.addEventListener("test",we,ve),i.removeEventListener("test",we,ve)}catch{}return R})();function Q(R,ve){if(N.call(this,R?R.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,R){var we=this.type=R.type,Oe=R.changedTouches&&R.changedTouches.length?R.changedTouches[0]:null;if(this.target=R.target||R.srcElement,this.g=ve,ve=R.relatedTarget){if(F){e:{try{T(ve.nodeName);var pt=!0;break e}catch{}pt=!1}pt||(ve=null)}}else we=="mouseover"?ve=R.fromElement:we=="mouseout"&&(ve=R.toElement);this.relatedTarget=ve,Oe?(this.clientX=Oe.clientX!==void 0?Oe.clientX:Oe.pageX,this.clientY=Oe.clientY!==void 0?Oe.clientY:Oe.pageY,this.screenX=Oe.screenX||0,this.screenY=Oe.screenY||0):(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0),this.button=R.button,this.key=R.key||"",this.ctrlKey=R.ctrlKey,this.altKey=R.altKey,this.shiftKey=R.shiftKey,this.metaKey=R.metaKey,this.pointerId=R.pointerId||0,this.pointerType=typeof R.pointerType=="string"?R.pointerType:ee[R.pointerType]||"",this.state=R.state,this.i=R,R.defaultPrevented&&Q.aa.h.call(this)}}p(Q,N);var ee={2:"touch",3:"pen",4:"mouse"};Q.prototype.h=function(){Q.aa.h.call(this);var R=this.i;R.preventDefault?R.preventDefault():R.returnValue=!1};var z="closure_listenable_"+(1e6*Math.random()|0),X=0;function le(R,ve,we,Oe,pt){this.listener=R,this.proxy=null,this.src=ve,this.type=we,this.capture=!!Oe,this.ha=pt,this.key=++X,this.da=this.fa=!1}function re(R){R.da=!0,R.listener=null,R.proxy=null,R.src=null,R.ha=null}function de(R){this.src=R,this.g={},this.h=0}de.prototype.add=function(R,ve,we,Oe,pt){var kt=R.toString();R=this.g[kt],R||(R=this.g[kt]=[],this.h++);var nn=Z(R,ve,Oe,pt);return-1<nn?(ve=R[nn],we||(ve.fa=!1)):(ve=new le(ve,this.src,kt,!!Oe,pt),ve.fa=we,R.push(ve)),ve};function G(R,ve){var we=ve.type;if(we in R.g){var Oe=R.g[we],pt=Array.prototype.indexOf.call(Oe,ve,void 0),kt;(kt=0<=pt)&&Array.prototype.splice.call(Oe,pt,1),kt&&(re(ve),R.g[we].length==0&&(delete R.g[we],R.h--))}}function Z(R,ve,we,Oe){for(var pt=0;pt<R.length;++pt){var kt=R[pt];if(!kt.da&&kt.listener==ve&&kt.capture==!!we&&kt.ha==Oe)return pt}return-1}var ce="closure_lm_"+(1e6*Math.random()|0),Se={};function Pe(R,ve,we,Oe,pt){if(Array.isArray(ve)){for(var kt=0;kt<ve.length;kt++)Pe(R,ve[kt],we,Oe,pt);return null}return we=lt(we),R&&R[z]?R.K(ve,we,A(Oe)?!!Oe.capture:!1,pt):ye(R,ve,we,!1,Oe,pt)}function ye(R,ve,we,Oe,pt,kt){if(!ve)throw Error("Invalid event type");var nn=A(pt)?!!pt.capture:!!pt,Va=Me(R);if(Va||(R[ce]=Va=new de(R)),we=Va.add(ve,we,Oe,nn,kt),we.proxy)return we;if(Oe=Ce(),we.proxy=Oe,Oe.src=R,Oe.listener=we,R.addEventListener)q||(pt=nn),pt===void 0&&(pt=!1),R.addEventListener(ve.toString(),Oe,pt);else if(R.attachEvent)R.attachEvent(xe(ve.toString()),Oe);else if(R.addListener&&R.removeListener)R.addListener(Oe);else throw Error("addEventListener and attachEvent are unavailable.");return we}function Ce(){function R(we){return ve.call(R.src,R.listener,we)}const ve=Te;return R}function _e(R,ve,we,Oe,pt){if(Array.isArray(ve))for(var kt=0;kt<ve.length;kt++)_e(R,ve[kt],we,Oe,pt);else Oe=A(Oe)?!!Oe.capture:!!Oe,we=lt(we),R&&R[z]?(R=R.i,ve=String(ve).toString(),ve in R.g&&(kt=R.g[ve],we=Z(kt,we,Oe,pt),-1<we&&(re(kt[we]),Array.prototype.splice.call(kt,we,1),kt.length==0&&(delete R.g[ve],R.h--)))):R&&(R=Me(R))&&(ve=R.g[ve.toString()],R=-1,ve&&(R=Z(ve,we,Oe,pt)),(we=-1<R?ve[R]:null)&&De(we))}function De(R){if(typeof R!="number"&&R&&!R.da){var ve=R.src;if(ve&&ve[z])G(ve.i,R);else{var we=R.type,Oe=R.proxy;ve.removeEventListener?ve.removeEventListener(we,Oe,R.capture):ve.detachEvent?ve.detachEvent(xe(we),Oe):ve.addListener&&ve.removeListener&&ve.removeListener(Oe),(we=Me(ve))?(G(we,R),we.h==0&&(we.src=null,ve[ce]=null)):re(R)}}}function xe(R){return R in Se?Se[R]:Se[R]="on"+R}function Te(R,ve){if(R.da)R=!0;else{ve=new Q(ve,this);var we=R.listener,Oe=R.ha||R.src;R.fa&&De(R),R=we.call(Oe,ve)}return R}function Me(R){return R=R[ce],R instanceof de?R:null}var et="__closure_events_fn_"+(1e9*Math.random()>>>0);function lt(R){return typeof R=="function"?R:(R[et]||(R[et]=function(ve){return R.handleEvent(ve)}),R[et])}function Re(){L.call(this),this.i=new de(this),this.M=this,this.F=null}p(Re,L),Re.prototype[z]=!0,Re.prototype.removeEventListener=function(R,ve,we,Oe){_e(this,R,ve,we,Oe)};function Le(R,ve){var we,Oe=R.F;if(Oe)for(we=[];Oe;Oe=Oe.F)we.push(Oe);if(R=R.M,Oe=ve.type||ve,typeof ve=="string")ve=new N(ve,R);else if(ve instanceof N)ve.target=ve.target||R;else{var pt=ve;ve=new N(Oe,R),D(ve,pt)}if(pt=!0,we)for(var kt=we.length-1;0<=kt;kt--){var nn=ve.g=we[kt];pt=nt(nn,Oe,!0,ve)&&pt}if(nn=ve.g=R,pt=nt(nn,Oe,!0,ve)&&pt,pt=nt(nn,Oe,!1,ve)&&pt,we)for(kt=0;kt<we.length;kt++)nn=ve.g=we[kt],pt=nt(nn,Oe,!1,ve)&&pt}Re.prototype.N=function(){if(Re.aa.N.call(this),this.i){var R=this.i,ve;for(ve in R.g){for(var we=R.g[ve],Oe=0;Oe<we.length;Oe++)re(we[Oe]);delete R.g[ve],R.h--}}this.F=null},Re.prototype.K=function(R,ve,we,Oe){return this.i.add(String(R),ve,!1,we,Oe)},Re.prototype.L=function(R,ve,we,Oe){return this.i.add(String(R),ve,!0,we,Oe)};function nt(R,ve,we,Oe){if(ve=R.i.g[String(ve)],!ve)return!0;ve=ve.concat();for(var pt=!0,kt=0;kt<ve.length;++kt){var nn=ve[kt];if(nn&&!nn.da&&nn.capture==we){var Va=nn.listener,Qr=nn.ha||nn.src;nn.fa&&G(R.i,nn),pt=Va.call(Qr,Oe)!==!1&&pt}}return pt&&!Oe.defaultPrevented}function Tt(R,ve,we){if(typeof R=="function")we&&(R=m(R,we));else if(R&&typeof R.handleEvent=="function")R=m(R.handleEvent,R);else throw Error("Invalid listener argument");return 2147483647<Number(ve)?-1:i.setTimeout(R,ve||0)}function Pt(R){R.g=Tt(()=>{R.g=null,R.i&&(R.i=!1,Pt(R))},R.l);const ve=R.h;R.h=null,R.m.apply(null,ve)}class Kt extends L{constructor(ve,we){super(),this.m=ve,this.l=we,this.h=null,this.i=!1,this.g=null}j(ve){this.h=arguments,this.g?this.i=!0:Pt(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $t(R){L.call(this),this.h=R,this.g={}}p($t,L);var bt=[];function st(R){k(R.g,function(ve,we){this.g.hasOwnProperty(we)&&De(ve)},R),R.g={}}$t.prototype.N=function(){$t.aa.N.call(this),st(this)},$t.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Je=i.JSON.stringify,Nt=i.JSON.parse,rn=class{stringify(R){return i.JSON.stringify(R,void 0)}parse(R){return i.JSON.parse(R,void 0)}};function Lt(){}Lt.prototype.h=null;function _t(R){return R.h||(R.h=R.i())}function ut(){}var Ft={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function zt(){N.call(this,"d")}p(zt,N);function dn(){N.call(this,"c")}p(dn,N);var Hn={},Ze=null;function Ge(){return Ze=Ze||new Re}Hn.La="serverreachability";function xt(R){N.call(this,Hn.La,R)}p(xt,N);function gt(R){const ve=Ge();Le(ve,new xt(ve))}Hn.STAT_EVENT="statevent";function Bt(R,ve){N.call(this,Hn.STAT_EVENT,R),this.stat=ve}p(Bt,N);function wt(R){const ve=Ge();Le(ve,new Bt(ve,R))}Hn.Ma="timingevent";function gn(R,ve){N.call(this,Hn.Ma,R),this.size=ve}p(gn,N);function Wn(R,ve){if(typeof R!="function")throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){R()},ve)}function zn(){this.g=!0}zn.prototype.xa=function(){this.g=!1};function oa(R,ve,we,Oe,pt,kt){R.info(function(){if(R.g)if(kt)for(var nn="",Va=kt.split("&"),Qr=0;Qr<Va.length;Qr++){var _a=Va[Qr].split("=");if(1<_a.length){var fs=_a[0];_a=_a[1];var za=fs.split("_");nn=2<=za.length&&za[1]=="type"?nn+(fs+"="+_a+"&"):nn+(fs+"=redacted&")}}else nn=null;else nn=kt;return"XMLHTTP REQ ("+Oe+") [attempt "+pt+"]: "+ve+`
`+we+`
`+nn})}function Ra(R,ve,we,Oe,pt,kt,nn){R.info(function(){return"XMLHTTP RESP ("+Oe+") [ attempt "+pt+"]: "+ve+`
`+we+`
`+kt+" "+nn})}function Be(R,ve,we,Oe){R.info(function(){return"XMLHTTP TEXT ("+ve+"): "+ke(R,we)+(Oe?" "+Oe:"")})}function Qe(R,ve){R.info(function(){return"TIMEOUT: "+ve})}zn.prototype.info=function(){};function ke(R,ve){if(!R.g)return ve;if(!ve)return null;try{var we=JSON.parse(ve);if(we){for(R=0;R<we.length;R++)if(Array.isArray(we[R])){var Oe=we[R];if(!(2>Oe.length)){var pt=Oe[1];if(Array.isArray(pt)&&!(1>pt.length)){var kt=pt[0];if(kt!="noop"&&kt!="stop"&&kt!="close")for(var nn=1;nn<pt.length;nn++)pt[nn]=""}}}}return Je(we)}catch{return ve}}var Ve={NO_ERROR:0,TIMEOUT:8},ze={},je;function oe(){}p(oe,Lt),oe.prototype.g=function(){return new XMLHttpRequest},oe.prototype.i=function(){return{}},je=new oe;function se(R,ve,we,Oe){this.j=R,this.i=ve,this.l=we,this.R=Oe||1,this.U=new $t(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new be}function be(){this.i=null,this.g="",this.h=!1}var Fe={},at={};function rt(R,ve,we){R.L=1,R.v=Mi(hn(ve)),R.m=we,R.P=!0,qe(R,null)}function qe(R,ve){R.F=Date.now(),ft(R),R.A=hn(R.v);var we=R.A,Oe=R.R;Array.isArray(Oe)||(Oe=[String(Oe)]),vA(we.i,"t",Oe),R.C=0,we=R.j.J,R.h=new be,R.g=Hi(R.j,we?ve:null,!R.m),0<R.O&&(R.M=new Kt(m(R.Y,R,R.g),R.O)),ve=R.U,we=R.g,Oe=R.ca;var pt="readystatechange";Array.isArray(pt)||(pt&&(bt[0]=pt.toString()),pt=bt);for(var kt=0;kt<pt.length;kt++){var nn=Pe(we,pt[kt],Oe||ve.handleEvent,!1,ve.h||ve);if(!nn)break;ve.g[nn.key]=nn}ve=R.H?E(R.H):{},R.m?(R.u||(R.u="POST"),ve["Content-Type"]="application/x-www-form-urlencoded",R.g.ea(R.A,R.u,R.m,ve)):(R.u="GET",R.g.ea(R.A,R.u,null,ve)),gt(),oa(R.i,R.u,R.A,R.l,R.R,R.m)}se.prototype.ca=function(R){R=R.target;const ve=this.M;ve&&ts(R)==3?ve.j():this.Y(R)},se.prototype.Y=function(R){try{if(R==this.g)e:{const za=ts(this.g);var ve=this.g.Ba();const du=this.g.Z();if(!(3>za)&&(za!=3||this.g&&(this.h.h||this.g.oa()||Xc(this.g)))){this.J||za!=4||ve==7||(ve==8||0>=du?gt(3):gt(2)),Jt(this);var we=this.g.Z();this.X=we;t:if(At(this)){var Oe=Xc(this.g);R="";var pt=Oe.length,kt=ts(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){yn(this),wn(this);var nn="";break t}this.h.i=new i.TextDecoder}for(ve=0;ve<pt;ve++)this.h.h=!0,R+=this.h.i.decode(Oe[ve],{stream:!(kt&&ve==pt-1)});Oe.length=0,this.h.g+=R,this.C=0,nn=this.h.g}else nn=this.g.oa();if(this.o=we==200,Ra(this.i,this.u,this.A,this.l,this.R,za,we),this.o){if(this.T&&!this.K){t:{if(this.g){var Va,Qr=this.g;if((Va=Qr.g?Qr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(Va)){var _a=Va;break t}}_a=null}if(we=_a)Be(this.i,this.l,we,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pa(this,we);else{this.o=!1,this.s=3,wt(12),yn(this),wn(this);break e}}if(this.P){we=!0;let Os;for(;!this.J&&this.C<nn.length;)if(Os=Ut(this,nn),Os==at){za==4&&(this.s=4,wt(14),we=!1),Be(this.i,this.l,null,"[Incomplete Response]");break}else if(Os==Fe){this.s=4,wt(15),Be(this.i,this.l,nn,"[Invalid Chunk]"),we=!1;break}else Be(this.i,this.l,Os,null),Pa(this,Os);if(At(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),za!=4||nn.length!=0||this.h.h||(this.s=1,wt(16),we=!1),this.o=this.o&&we,!we)Be(this.i,this.l,nn,"[Invalid Chunked Response]"),yn(this),wn(this);else if(0<nn.length&&!this.W){this.W=!0;var fs=this.j;fs.g==this&&fs.ba&&!fs.M&&(fs.j.info("Great, no buffering proxy detected. Bytes received: "+nn.length),Yo(fs),fs.M=!0,wt(11))}}else Be(this.i,this.l,nn,null),Pa(this,nn);za==4&&yn(this),this.o&&!this.J&&(za==4?ya(this.j,this):(this.o=!1,ft(this)))}else hA(this.g),we==400&&0<nn.indexOf("Unknown SID")?(this.s=3,wt(12)):(this.s=0,wt(13)),yn(this),wn(this)}}}catch{}finally{}};function At(R){return R.g?R.u=="GET"&&R.L!=2&&R.j.Ca:!1}function Ut(R,ve){var we=R.C,Oe=ve.indexOf(`
`,we);return Oe==-1?at:(we=Number(ve.substring(we,Oe)),isNaN(we)?Fe:(Oe+=1,Oe+we>ve.length?at:(ve=ve.slice(Oe,Oe+we),R.C=Oe+we,ve)))}se.prototype.cancel=function(){this.J=!0,yn(this)};function ft(R){R.S=Date.now()+R.I,en(R,R.I)}function en(R,ve){if(R.B!=null)throw Error("WatchDog timer not null");R.B=Wn(m(R.ba,R),ve)}function Jt(R){R.B&&(i.clearTimeout(R.B),R.B=null)}se.prototype.ba=function(){this.B=null;const R=Date.now();0<=R-this.S?(Qe(this.i,this.A),this.L!=2&&(gt(),wt(17)),yn(this),this.s=2,wn(this)):en(this,this.S-R)};function wn(R){R.j.G==0||R.J||ya(R.j,R)}function yn(R){Jt(R);var ve=R.M;ve&&typeof ve.ma=="function"&&ve.ma(),R.M=null,st(R.U),R.g&&(ve=R.g,R.g=null,ve.abort(),ve.ma())}function Pa(R,ve){try{var we=R.j;if(we.G!=0&&(we.g==R||Er(we.h,R))){if(!R.K&&Er(we.h,R)&&we.G==3){try{var Oe=we.Da.g.parse(ve)}catch{Oe=null}if(Array.isArray(Oe)&&Oe.length==3){var pt=Oe;if(pt[0]==0){e:if(!we.u){if(we.g)if(we.g.F+3e3<R.F)Ms(we),qo(we);else break e;Ts(we),wt(18)}}else we.za=pt[1],0<we.za-we.T&&37500>pt[2]&&we.F&&we.v==0&&!we.C&&(we.C=Wn(m(we.Za,we),6e3));if(1>=Ko(we.h)&&we.ca){try{we.ca()}catch{}we.ca=void 0}}else vi(we,11)}else if((R.K||we.g==R)&&Ms(we),!b(ve))for(pt=we.Da.g.parse(ve),ve=0;ve<pt.length;ve++){let _a=pt[ve];if(we.T=_a[0],_a=_a[1],we.G==2)if(_a[0]=="c"){we.K=_a[1],we.ia=_a[2];const fs=_a[3];fs!=null&&(we.la=fs,we.j.info("VER="+we.la));const za=_a[4];za!=null&&(we.Aa=za,we.j.info("SVER="+we.Aa));const du=_a[5];du!=null&&typeof du=="number"&&0<du&&(Oe=1.5*du,we.L=Oe,we.j.info("backChannelRequestTimeoutMs_="+Oe)),Oe=we;const Os=R.g;if(Os){const gA=Os.g?Os.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gA){var kt=Oe.h;kt.g||gA.indexOf("spdy")==-1&&gA.indexOf("quic")==-1&&gA.indexOf("h2")==-1||(kt.j=kt.l,kt.g=new Set,kt.h&&(ks(kt,kt.h),kt.h=null))}if(Oe.D){const mm=Os.g?Os.g.getResponseHeader("X-HTTP-Session-Id"):null;mm&&(Oe.ya=mm,Da(Oe.I,Oe.D,mm))}}we.G=3,we.l&&we.l.ua(),we.ba&&(we.R=Date.now()-R.F,we.j.info("Handshake RTT: "+we.R+"ms")),Oe=we;var nn=R;if(Oe.qa=va(Oe,Oe.J?Oe.ia:null,Oe.W),nn.K){$r(Oe.h,nn);var Va=nn,Qr=Oe.L;Qr&&(Va.I=Qr),Va.B&&(Jt(Va),ft(Va)),Oe.g=nn}else ko(Oe);0<we.i.length&&Dr(we)}else _a[0]!="stop"&&_a[0]!="close"||vi(we,7);else we.G==3&&(_a[0]=="stop"||_a[0]=="close"?_a[0]=="stop"?vi(we,7):Zc(we):_a[0]!="noop"&&we.l&&we.l.ta(_a),we.v=0)}}gt(4)}catch{}}var Or=class{constructor(R,ve){this.g=R,this.map=ve}};function Hr(R){this.l=R||10,i.PerformanceNavigationTiming?(R=i.performance.getEntriesByType("navigation"),R=0<R.length&&(R[0].nextHopProtocol=="hq"||R[0].nextHopProtocol=="h2")):R=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=R?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Bs(R){return R.h?!0:R.g?R.g.size>=R.j:!1}function Ko(R){return R.h?1:R.g?R.g.size:0}function Er(R,ve){return R.h?R.h==ve:R.g?R.g.has(ve):!1}function ks(R,ve){R.g?R.g.add(ve):R.h=ve}function $r(R,ve){R.h&&R.h==ve?R.h=null:R.g&&R.g.has(ve)&&R.g.delete(ve)}Hr.prototype.cancel=function(){if(this.i=Vi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const R of this.g.values())R.cancel();this.g.clear()}};function Vi(R){if(R.h!=null)return R.i.concat(R.h.D);if(R.g!=null&&R.g.size!==0){let ve=R.i;for(const we of R.g.values())ve=ve.concat(we.D);return ve}return y(R.i)}function Vt(R){if(R.V&&typeof R.V=="function")return R.V();if(typeof Map<"u"&&R instanceof Map||typeof Set<"u"&&R instanceof Set)return Array.from(R.values());if(typeof R=="string")return R.split("");if(c(R)){for(var ve=[],we=R.length,Oe=0;Oe<we;Oe++)ve.push(R[Oe]);return ve}ve=[],we=0;for(Oe in R)ve[we++]=R[Oe];return ve}function Ja(R){if(R.na&&typeof R.na=="function")return R.na();if(!R.V||typeof R.V!="function"){if(typeof Map<"u"&&R instanceof Map)return Array.from(R.keys());if(!(typeof Set<"u"&&R instanceof Set)){if(c(R)||typeof R=="string"){var ve=[];R=R.length;for(var we=0;we<R;we++)ve.push(we);return ve}ve=[],we=0;for(const Oe in R)ve[we++]=Oe;return ve}}}function Vn(R,ve){if(R.forEach&&typeof R.forEach=="function")R.forEach(ve,void 0);else if(c(R)||typeof R=="string")Array.prototype.forEach.call(R,ve,void 0);else for(var we=Ja(R),Oe=Vt(R),pt=Oe.length,kt=0;kt<pt;kt++)ve.call(void 0,Oe[kt],we&&we[kt],R)}var nr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vl(R,ve){if(R){R=R.split("&");for(var we=0;we<R.length;we++){var Oe=R[we].indexOf("="),pt=null;if(0<=Oe){var kt=R[we].substring(0,Oe);pt=R[we].substring(Oe+1)}else kt=R[we];ve(kt,pt?decodeURIComponent(pt.replace(/\+/g," ")):"")}}}function vt(R){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,R instanceof vt){this.h=R.h,kn(this,R.j),this.o=R.o,this.g=R.g,Na(this,R.s),this.l=R.l;var ve=R.i,we=new uu;we.i=ve.i,ve.g&&(we.g=new Map(ve.g),we.h=ve.h),Li(this,we),this.m=R.m}else R&&(ve=String(R).match(nr))?(this.h=!1,kn(this,ve[1]||"",!0),this.o=hl(ve[2]||""),this.g=hl(ve[3]||"",!0),Na(this,ve[4]),this.l=hl(ve[5]||"",!0),Li(this,ve[6]||"",!0),this.m=hl(ve[7]||"")):(this.h=!1,this.i=new uu(null,this.h))}vt.prototype.toString=function(){var R=[],ve=this.j;ve&&R.push(Wo(ve,fA,!0),":");var we=this.g;return(we||ve=="file")&&(R.push("//"),(ve=this.o)&&R.push(Wo(ve,fA,!0),"@"),R.push(encodeURIComponent(String(we)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),we=this.s,we!=null&&R.push(":",String(we))),(we=this.l)&&(this.g&&we.charAt(0)!="/"&&R.push("/"),R.push(Wo(we,we.charAt(0)=="/"?um:Rh,!0))),(we=this.i.toString())&&R.push("?",we),(we=this.m)&&R.push("#",Wo(we,mA)),R.join("")};function hn(R){return new vt(R)}function kn(R,ve,we){R.j=we?hl(ve,!0):ve,R.j&&(R.j=R.j.replace(/:$/,""))}function Na(R,ve){if(ve){if(ve=Number(ve),isNaN(ve)||0>ve)throw Error("Bad port number "+ve);R.s=ve}else R.s=null}function Li(R,ve,we){ve instanceof uu?(R.i=ve,Nh(R.i,R.h)):(we||(ve=Wo(ve,cm)),R.i=new uu(ve,R.h))}function Da(R,ve,we){R.i.set(ve,we)}function Mi(R){return Da(R,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),R}function hl(R,ve){return R?ve?decodeURI(R.replace(/%25/g,"%2525")):decodeURIComponent(R):""}function Wo(R,ve,we){return typeof R=="string"?(R=encodeURI(R).replace(ve,lm),we&&(R=R.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R):null}function lm(R){return R=R.charCodeAt(0),"%"+(R>>4&15).toString(16)+(R&15).toString(16)}var fA=/[#\/\?@]/g,Rh=/[#\?:]/g,um=/[#\?]/g,cm=/[#\?@]/g,mA=/#/g;function uu(R,ve){this.h=this.g=null,this.i=R||null,this.j=!!ve}function Oi(R){R.g||(R.g=new Map,R.h=0,R.i&&vl(R.i,function(ve,we){R.add(decodeURIComponent(ve.replace(/\+/g," ")),we)}))}e=uu.prototype,e.add=function(R,ve){Oi(this),this.i=null,R=cu(this,R);var we=this.g.get(R);return we||this.g.set(R,we=[]),we.push(ve),this.h+=1,this};function dm(R,ve){Oi(R),ve=cu(R,ve),R.g.has(ve)&&(R.i=null,R.h-=R.g.get(ve).length,R.g.delete(ve))}function Am(R,ve){return Oi(R),ve=cu(R,ve),R.g.has(ve)}e.forEach=function(R,ve){Oi(this),this.g.forEach(function(we,Oe){we.forEach(function(pt){R.call(ve,pt,Oe,this)},this)},this)},e.na=function(){Oi(this);const R=Array.from(this.g.values()),ve=Array.from(this.g.keys()),we=[];for(let Oe=0;Oe<ve.length;Oe++){const pt=R[Oe];for(let kt=0;kt<pt.length;kt++)we.push(ve[Oe])}return we},e.V=function(R){Oi(this);let ve=[];if(typeof R=="string")Am(this,R)&&(ve=ve.concat(this.g.get(cu(this,R))));else{R=Array.from(this.g.values());for(let we=0;we<R.length;we++)ve=ve.concat(R[we])}return ve},e.set=function(R,ve){return Oi(this),this.i=null,R=cu(this,R),Am(this,R)&&(this.h-=this.g.get(R).length),this.g.set(R,[ve]),this.h+=1,this},e.get=function(R,ve){return R?(R=this.V(R),0<R.length?String(R[0]):ve):ve};function vA(R,ve,we){dm(R,ve),0<we.length&&(R.i=null,R.g.set(cu(R,ve),y(we)),R.h+=we.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const R=[],ve=Array.from(this.g.keys());for(var we=0;we<ve.length;we++){var Oe=ve[we];const kt=encodeURIComponent(String(Oe)),nn=this.V(Oe);for(Oe=0;Oe<nn.length;Oe++){var pt=kt;nn[Oe]!==""&&(pt+="="+encodeURIComponent(String(nn[Oe]))),R.push(pt)}}return this.i=R.join("&")};function cu(R,ve){return ve=String(ve),R.j&&(ve=ve.toLowerCase()),ve}function Nh(R,ve){ve&&!R.j&&(Oi(R),R.i=null,R.g.forEach(function(we,Oe){var pt=Oe.toLowerCase();Oe!=pt&&(dm(this,Oe),vA(this,pt,we))},R)),R.j=ve}function Ju(R,ve){const we=new zn;if(i.Image){const Oe=new Image;Oe.onload=h(jo,we,"TestLoadImage: loaded",!0,ve,Oe),Oe.onerror=h(jo,we,"TestLoadImage: error",!1,ve,Oe),Oe.onabort=h(jo,we,"TestLoadImage: abort",!1,ve,Oe),Oe.ontimeout=h(jo,we,"TestLoadImage: timeout",!1,ve,Oe),i.setTimeout(function(){Oe.ontimeout&&Oe.ontimeout()},1e4),Oe.src=R}else ve(!1)}function Vh(R,ve){const we=new zn,Oe=new AbortController,pt=setTimeout(()=>{Oe.abort(),jo(we,"TestPingServer: timeout",!1,ve)},1e4);fetch(R,{signal:Oe.signal}).then(kt=>{clearTimeout(pt),kt.ok?jo(we,"TestPingServer: ok",!0,ve):jo(we,"TestPingServer: server error",!1,ve)}).catch(()=>{clearTimeout(pt),jo(we,"TestPingServer: error",!1,ve)})}function jo(R,ve,we,Oe,pt){try{pt&&(pt.onload=null,pt.onerror=null,pt.onabort=null,pt.ontimeout=null),Oe(we)}catch{}}function Lh(){this.g=new rn}function Mh(R,ve,we){const Oe=we||"";try{Vn(R,function(pt,kt){let nn=pt;A(pt)&&(nn=Je(pt)),ve.push(Oe+kt+"="+encodeURIComponent(nn))})}catch(pt){throw ve.push(Oe+"type="+encodeURIComponent("_badmap")),pt}}function Zu(R){this.l=R.Ub||null,this.j=R.eb||!1}p(Zu,Lt),Zu.prototype.g=function(){return new Yc(this.l,this.j)},Zu.prototype.i=(function(R){return function(){return R}})({});function Yc(R,ve){Re.call(this),this.D=R,this.o=ve,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(Yc,Re),e=Yc.prototype,e.open=function(R,ve){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=R,this.A=ve,this.readyState=1,Ie(this)},e.send=function(R){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const ve={headers:this.u,method:this.B,credentials:this.m,cache:void 0};R&&(ve.body=R),(this.D||i).fetch(new Request(this.A,ve)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ta(this)),this.readyState=0},e.Sa=function(R){if(this.g&&(this.l=R,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=R.headers,this.readyState=2,Ie(this)),this.g&&(this.readyState=3,Ie(this),this.g)))if(this.responseType==="arraybuffer")R.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof i.ReadableStream<"u"&&"body"in R){if(this.j=R.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;fm(this)}else R.text().then(this.Ra.bind(this),this.ga.bind(this))};function fm(R){R.j.read().then(R.Pa.bind(R)).catch(R.ga.bind(R))}e.Pa=function(R){if(this.g){if(this.o&&R.value)this.response.push(R.value);else if(!this.o){var ve=R.value?R.value:new Uint8Array(0);(ve=this.v.decode(ve,{stream:!R.done}))&&(this.response=this.responseText+=ve)}R.done?Ta(this):Ie(this),this.readyState==3&&fm(this)}},e.Ra=function(R){this.g&&(this.response=this.responseText=R,Ta(this))},e.Qa=function(R){this.g&&(this.response=R,Ta(this))},e.ga=function(){this.g&&Ta(this)};function Ta(R){R.readyState=4,R.l=null,R.j=null,R.v=null,Ie(R)}e.setRequestHeader=function(R,ve){this.u.append(R,ve)},e.getResponseHeader=function(R){return this.h&&this.h.get(R.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const R=[],ve=this.h.entries();for(var we=ve.next();!we.done;)we=we.value,R.push(we[0]+": "+we[1]),we=ve.next();return R.join(`\r
`)};function Ie(R){R.onreadystatechange&&R.onreadystatechange.call(R)}Object.defineProperty(Yc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(R){this.m=R?"include":"same-origin"}});function fe(R){let ve="";return k(R,function(we,Oe){ve+=Oe,ve+=":",ve+=we,ve+=`\r
`}),ve}function Wt(R,ve,we){e:{for(Oe in we){var Oe=!1;break e}Oe=!0}Oe||(we=fe(we),typeof R=="string"?we!=null&&encodeURIComponent(String(we)):Da(R,ve,we))}function jt(R){Re.call(this),this.headers=new Map,this.o=R||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(jt,Re);var It=/^https?$/i,fn=["POST","PUT"];e=jt.prototype,e.Ha=function(R){this.J=R},e.ea=function(R,ve,we,Oe){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+R);ve=ve?ve.toUpperCase():"GET",this.D=R,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():je.g(),this.v=this.o?_t(this.o):_t(je),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(ve,String(R),!0),this.B=!1}catch(kt){an(this,kt);return}if(R=we||"",we=new Map(this.headers),Oe)if(Object.getPrototypeOf(Oe)===Object.prototype)for(var pt in Oe)we.set(pt,Oe[pt]);else if(typeof Oe.keys=="function"&&typeof Oe.get=="function")for(const kt of Oe.keys())we.set(kt,Oe.get(kt));else throw Error("Unknown input type for opt_headers: "+String(Oe));Oe=Array.from(we.keys()).find(kt=>kt.toLowerCase()=="content-type"),pt=i.FormData&&R instanceof i.FormData,!(0<=Array.prototype.indexOf.call(fn,ve,void 0))||Oe||pt||we.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[kt,nn]of we)this.g.setRequestHeader(kt,nn);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{na(this),this.u=!0,this.g.send(R),this.u=!1}catch(kt){an(this,kt)}};function an(R,ve){R.h=!1,R.g&&(R.j=!0,R.g.abort(),R.j=!1),R.l=ve,R.m=5,$n(R),Yn(R)}function $n(R){R.A||(R.A=!0,Le(R,"complete"),Le(R,"error"))}e.abort=function(R){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=R||7,Le(this,"complete"),Le(this,"abort"),Yn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yn(this,!0)),jt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?_n(this):this.bb())},e.bb=function(){_n(this)};function _n(R){if(R.h&&typeof o<"u"&&(!R.v[1]||ts(R)!=4||R.Z()!=2)){if(R.u&&ts(R)==4)Tt(R.Ea,0,R);else if(Le(R,"readystatechange"),ts(R)==4){R.h=!1;try{const nn=R.Z();e:switch(nn){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var ve=!0;break e;default:ve=!1}var we;if(!(we=ve)){var Oe;if(Oe=nn===0){var pt=String(R.D).match(nr)[1]||null;!pt&&i.self&&i.self.location&&(pt=i.self.location.protocol.slice(0,-1)),Oe=!It.test(pt?pt.toLowerCase():"")}we=Oe}if(we)Le(R,"complete"),Le(R,"success");else{R.m=6;try{var kt=2<ts(R)?R.g.statusText:""}catch{kt=""}R.l=kt+" ["+R.Z()+"]",$n(R)}}finally{Yn(R)}}}}function Yn(R,ve){if(R.g){na(R);const we=R.g,Oe=R.v[0]?()=>{}:null;R.g=null,R.v=null,ve||Le(R,"ready");try{we.onreadystatechange=Oe}catch{}}}function na(R){R.I&&(i.clearTimeout(R.I),R.I=null)}e.isActive=function(){return!!this.g};function ts(R){return R.g?R.g.readyState:0}e.Z=function(){try{return 2<ts(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(R){if(this.g){var ve=this.g.responseText;return R&&ve.indexOf(R)==0&&(ve=ve.substring(R.length)),Nt(ve)}};function Xc(R){try{if(!R.g)return null;if("response"in R.g)return R.g.response;switch(R.H){case"":case"text":return R.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in R.g)return R.g.mozResponseArrayBuffer}return null}catch{return null}}function hA(R){const ve={};R=(R.g&&2<=ts(R)&&R.g.getAllResponseHeaders()||"").split(`\r
`);for(let Oe=0;Oe<R.length;Oe++){if(b(R[Oe]))continue;var we=P(R[Oe]);const pt=we[0];if(we=we[1],typeof we!="string")continue;we=we.trim();const kt=ve[pt]||[];ve[pt]=kt,kt.push(we)}S(ve,function(Oe){return Oe.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ua(R,ve,we){return we&&we.internalChannelParams&&we.internalChannelParams[R]||ve}function Jc(R){this.Aa=0,this.i=[],this.j=new zn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ua("failFast",!1,R),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ua("baseRetryDelayMs",5e3,R),this.cb=ua("retryDelaySeedMs",1e4,R),this.Wa=ua("forwardChannelMaxRetries",2,R),this.wa=ua("forwardChannelRequestTimeoutMs",2e4,R),this.pa=R&&R.xmlHttpFactory||void 0,this.Xa=R&&R.Tb||void 0,this.Ca=R&&R.useFetchStreams||!1,this.L=void 0,this.J=R&&R.supportsCrossDomainXhr||!1,this.K="",this.h=new Hr(R&&R.concurrentRequestLimit),this.Da=new Lh,this.P=R&&R.fastHandshake||!1,this.O=R&&R.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=R&&R.Rb||!1,R&&R.xa&&this.j.xa(),R&&R.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&R&&R.detectBufferingProxy||!1,this.ja=void 0,R&&R.longPollingTimeout&&0<R.longPollingTimeout&&(this.ja=R.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Jc.prototype,e.la=8,e.G=1,e.connect=function(R,ve,we,Oe){wt(0),this.W=R,this.H=ve||{},we&&Oe!==void 0&&(this.H.OSID=we,this.H.OAID=Oe),this.F=this.X,this.I=va(this,null,this.W),Dr(this)};function Zc(R){if(Bo(R),R.G==3){var ve=R.U++,we=hn(R.I);if(Da(we,"SID",R.K),Da(we,"RID",ve),Da(we,"TYPE","terminate"),mi(R,we),ve=new se(R,R.j,ve),ve.L=2,ve.v=Mi(hn(we)),we=!1,i.navigator&&i.navigator.sendBeacon)try{we=i.navigator.sendBeacon(ve.v.toString(),"")}catch{}!we&&i.Image&&(new Image().src=ve.v,we=!0),we||(ve.g=Hi(ve.j,null),ve.g.ea(ve.v)),ve.F=Date.now(),ft(ve)}Ye(R)}function qo(R){R.g&&(Yo(R),R.g.cancel(),R.g=null)}function Bo(R){qo(R),R.u&&(i.clearTimeout(R.u),R.u=null),Ms(R),R.h.cancel(),R.s&&(typeof R.s=="number"&&i.clearTimeout(R.s),R.s=null)}function Dr(R){if(!Bs(R.h)&&!R.s){R.s=!0;var ve=R.Ga;J||Y(),ue||(J(),ue=!0),ne.add(ve,R),R.B=0}}function Ga(R,ve){return Ko(R.h)>=R.h.j-(R.s?1:0)?!1:R.s?(R.i=ve.D.concat(R.i),!0):R.G==1||R.G==2||R.B>=(R.Va?0:R.Wa)?!1:(R.s=Wn(m(R.Ga,R,ve),Xo(R,R.B)),R.B++,!0)}e.Ga=function(R){if(this.s)if(this.s=null,this.G==1){if(!R){this.U=Math.floor(1e5*Math.random()),R=this.U++;const pt=new se(this,this.j,R);let kt=this.o;if(this.S&&(kt?(kt=E(kt),D(kt,this.S)):kt=this.S),this.m!==null||this.O||(pt.H=kt,kt=null),this.P)e:{for(var ve=0,we=0;we<this.i.length;we++){t:{var Oe=this.i[we];if("__data__"in Oe.map&&(Oe=Oe.map.__data__,typeof Oe=="string")){Oe=Oe.length;break t}Oe=void 0}if(Oe===void 0)break;if(ve+=Oe,4096<ve){ve=we;break e}if(ve===4096||we===this.i.length-1){ve=we+1;break e}}ve=1e3}else ve=1e3;ve=Br(this,pt,ve),we=hn(this.I),Da(we,"RID",R),Da(we,"CVER",22),this.D&&Da(we,"X-HTTP-Session-Id",this.D),mi(this,we),kt&&(this.O?ve="headers="+encodeURIComponent(String(fe(kt)))+"&"+ve:this.m&&Wt(we,this.m,kt)),ks(this.h,pt),this.Ua&&Da(we,"TYPE","init"),this.P?(Da(we,"$req",ve),Da(we,"SID","null"),pt.T=!0,rt(pt,we,null)):rt(pt,we,ve),this.G=2}}else this.G==3&&(R?As(this,R):this.i.length==0||Bs(this.h)||As(this))};function As(R,ve){var we;ve?we=ve.l:we=R.U++;const Oe=hn(R.I);Da(Oe,"SID",R.K),Da(Oe,"RID",we),Da(Oe,"AID",R.T),mi(R,Oe),R.m&&R.o&&Wt(Oe,R.m,R.o),we=new se(R,R.j,we,R.B+1),R.m===null&&(we.H=R.o),ve&&(R.i=ve.D.concat(R.i)),ve=Br(R,we,1e3),we.I=Math.round(.5*R.wa)+Math.round(.5*R.wa*Math.random()),ks(R.h,we),rt(we,Oe,ve)}function mi(R,ve){R.H&&k(R.H,function(we,Oe){Da(ve,Oe,we)}),R.l&&Vn({},function(we,Oe){Da(ve,Oe,we)})}function Br(R,ve,we){we=Math.min(R.i.length,we);var Oe=R.l?m(R.l.Na,R.l,R):null;e:{var pt=R.i;let kt=-1;for(;;){const nn=["count="+we];kt==-1?0<we?(kt=pt[0].g,nn.push("ofs="+kt)):kt=0:nn.push("ofs="+kt);let Va=!0;for(let Qr=0;Qr<we;Qr++){let _a=pt[Qr].g;const fs=pt[Qr].map;if(_a-=kt,0>_a)kt=Math.max(0,pt[Qr].g-100),Va=!1;else try{Mh(fs,nn,"req"+_a+"_")}catch{Oe&&Oe(fs)}}if(Va){Oe=nn.join("&");break e}}}return R=R.i.splice(0,we),ve.D=R,Oe}function ko(R){if(!R.g&&!R.u){R.Y=1;var ve=R.Fa;J||Y(),ue||(J(),ue=!0),ne.add(ve,R),R.v=0}}function Ts(R){return R.g||R.u||3<=R.v?!1:(R.Y++,R.u=Wn(m(R.Fa,R),Xo(R,R.v)),R.v++,!0)}e.Fa=function(){if(this.u=null,ec(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var R=2*this.R;this.j.info("BP detection timer enabled: "+R),this.A=Wn(m(this.ab,this),R)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wt(10),qo(this),ec(this))};function Yo(R){R.A!=null&&(i.clearTimeout(R.A),R.A=null)}function ec(R){R.g=new se(R,R.j,"rpc",R.Y),R.m===null&&(R.g.H=R.o),R.g.O=0;var ve=hn(R.qa);Da(ve,"RID","rpc"),Da(ve,"SID",R.K),Da(ve,"AID",R.T),Da(ve,"CI",R.F?"0":"1"),!R.F&&R.ja&&Da(ve,"TO",R.ja),Da(ve,"TYPE","xmlhttp"),mi(R,ve),R.m&&R.o&&Wt(ve,R.m,R.o),R.L&&(R.g.I=R.L);var we=R.g;R=R.ia,we.L=1,we.v=Mi(hn(ve)),we.m=null,we.P=!0,qe(we,R)}e.Za=function(){this.C!=null&&(this.C=null,qo(this),Ts(this),wt(19))};function Ms(R){R.C!=null&&(i.clearTimeout(R.C),R.C=null)}function ya(R,ve){var we=null;if(R.g==ve){Ms(R),Yo(R),R.g=null;var Oe=2}else if(Er(R.h,ve))we=ve.D,$r(R.h,ve),Oe=1;else return;if(R.G!=0){if(ve.o)if(Oe==1){we=ve.m?ve.m.length:0,ve=Date.now()-ve.F;var pt=R.B;Oe=Ge(),Le(Oe,new gn(Oe,we)),Dr(R)}else ko(R);else if(pt=ve.s,pt==3||pt==0&&0<ve.X||!(Oe==1&&Ga(R,ve)||Oe==2&&Ts(R)))switch(we&&0<we.length&&(ve=R.h,ve.i=ve.i.concat(we)),pt){case 1:vi(R,5);break;case 4:vi(R,10);break;case 3:vi(R,6);break;default:vi(R,2)}}}function Xo(R,ve){let we=R.Ta+Math.floor(Math.random()*R.cb);return R.isActive()||(we*=2),we*ve}function vi(R,ve){if(R.j.info("Error code "+ve),ve==2){var we=m(R.fb,R),Oe=R.Xa;const pt=!Oe;Oe=new vt(Oe||"//www.google.com/images/cleardot.gif"),i.location&&i.location.protocol=="http"||kn(Oe,"https"),Mi(Oe),pt?Ju(Oe.toString(),we):Vh(Oe.toString(),we)}else wt(2);R.G=0,R.l&&R.l.sa(ve),Ye(R),Bo(R)}e.fb=function(R){R?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function Ye(R){if(R.G=0,R.ka=[],R.l){const ve=Vi(R.h);(ve.length!=0||R.i.length!=0)&&(g(R.ka,ve),g(R.ka,R.i),R.h.i.length=0,y(R.i),R.i.length=0),R.l.ra()}}function va(R,ve,we){var Oe=we instanceof vt?hn(we):new vt(we);if(Oe.g!="")ve&&(Oe.g=ve+"."+Oe.g),Na(Oe,Oe.s);else{var pt=i.location;Oe=pt.protocol,ve=ve?ve+"."+pt.hostname:pt.hostname,pt=+pt.port;var kt=new vt(null);Oe&&kn(kt,Oe),ve&&(kt.g=ve),pt&&Na(kt,pt),we&&(kt.l=we),Oe=kt}return we=R.D,ve=R.ya,we&&ve&&Da(Oe,we,ve),Da(Oe,"VER",R.la),mi(R,Oe),Oe}function Hi(R,ve,we){if(ve&&!R.J)throw Error("Can't create secondary domain capable XhrIo object.");return ve=R.Ca&&!R.pa?new jt(new Zu({eb:we})):new jt(R.pa),ve.Ha(R.J),ve}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function e1(){}e=e1.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Jo(R,ve){Re.call(this),this.g=new Jc(ve),this.l=R,this.h=ve&&ve.messageUrlParams||null,R=ve&&ve.messageHeaders||null,ve&&ve.clientProtocolHeaderRequired&&(R?R["X-Client-Protocol"]="webchannel":R={"X-Client-Protocol":"webchannel"}),this.g.o=R,R=ve&&ve.initMessageHeaders||null,ve&&ve.messageContentType&&(R?R["X-WebChannel-Content-Type"]=ve.messageContentType:R={"X-WebChannel-Content-Type":ve.messageContentType}),ve&&ve.va&&(R?R["X-WebChannel-Client-Profile"]=ve.va:R={"X-WebChannel-Client-Profile":ve.va}),this.g.S=R,(R=ve&&ve.Sb)&&!b(R)&&(this.g.m=R),this.v=ve&&ve.supportsCrossDomainXhr||!1,this.u=ve&&ve.sendRawJson||!1,(ve=ve&&ve.httpSessionIdParam)&&!b(ve)&&(this.g.D=ve,R=this.h,R!==null&&ve in R&&(R=this.h,ve in R&&delete R[ve])),this.j=new hi(this)}p(Jo,Re),Jo.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Jo.prototype.close=function(){Zc(this.g)},Jo.prototype.o=function(R){var ve=this.g;if(typeof R=="string"){var we={};we.__data__=R,R=we}else this.u&&(we={},we.__data__=Je(R),R=we);ve.i.push(new Or(ve.Ya++,R)),ve.G==3&&Dr(ve)},Jo.prototype.N=function(){this.g.l=null,delete this.j,Zc(this.g),delete this.g,Jo.aa.N.call(this)};function Oh(R){zt.call(this),R.__headers__&&(this.headers=R.__headers__,this.statusCode=R.__status__,delete R.__headers__,delete R.__status__);var ve=R.__sm__;if(ve){e:{for(const we in ve){R=we;break e}R=void 0}(this.i=R)&&(R=this.i,ve=ve!==null&&R in ve?ve[R]:void 0),this.data=ve}else this.data=R}p(Oh,zt);function pA(){dn.call(this),this.status=1}p(pA,dn);function hi(R){this.g=R}p(hi,e1),hi.prototype.ua=function(){Le(this.g,"a")},hi.prototype.ta=function(R){Le(this.g,new Oh(R))},hi.prototype.sa=function(R){Le(this.g,new pA)},hi.prototype.ra=function(){Le(this.g,"b")},Jo.prototype.send=Jo.prototype.o,Jo.prototype.open=Jo.prototype.m,Jo.prototype.close=Jo.prototype.close,Ve.NO_ERROR=0,Ve.TIMEOUT=8,Ve.HTTP_ERROR=6,ze.COMPLETE="complete",ut.EventType=Ft,Ft.OPEN="a",Ft.CLOSE="b",Ft.ERROR="c",Ft.MESSAGE="d",Re.prototype.listen=Re.prototype.K,jt.prototype.listenOnce=jt.prototype.L,jt.prototype.getLastError=jt.prototype.Ka,jt.prototype.getLastErrorCode=jt.prototype.Ba,jt.prototype.getStatus=jt.prototype.Z,jt.prototype.getResponseJson=jt.prototype.Oa,jt.prototype.getResponseText=jt.prototype.oa,jt.prototype.send=jt.prototype.ea,jt.prototype.setWithCredentials=jt.prototype.Ha}).apply(typeof My<"u"?My:typeof self<"u"?self:typeof window<"u"?window:{});const LV="@firebase/firestore",MV="4.8.0";class xi{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}xi.UNAUTHENTICATED=new xi(null),xi.GOOGLE_CREDENTIALS=new xi("google-credentials-uid"),xi.FIRST_PARTY=new xi("first-party-uid"),xi.MOCK_USER=new xi("mock-user");let yb="11.10.0";const H2=new _g("@firebase/firestore");function Vl(e,...t){if(H2.logLevel<=Ya.DEBUG){const n=t.map(Zz);H2.debug(`Firestore (${yb}): ${e}`,...n)}}function Jz(e,...t){if(H2.logLevel<=Ya.ERROR){const n=t.map(Zz);H2.error(`Firestore (${yb}): ${e}`,...n)}}function Zz(e){if(typeof e=="string")return e;try{return(function(n){return JSON.stringify(n)})(e)}catch{return e}}function $2(e,t,n){let a="Unexpected state";typeof t=="string"?a=t:n=t,eK(e,a,n)}function eK(e,t,n){let a=`FIRESTORE (${yb}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{a+=" CONTEXT: "+JSON.stringify(n)}catch{a+=" CONTEXT: "+n}throw Jz(a),new Error(a)}function v0(e,t,n,a){let r="Unexpected state";typeof n=="string"?r=n:a=n,e||eK(t,r,a)}const Ma={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};class Oa extends Gu{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class h0{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}class Nat{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Vat{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(xi.UNAUTHENTICATED)))}shutdown(){}}class Lat{constructor(t){this.t=t,this.currentUser=xi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){v0(this.o===void 0,42304);let a=this.i;const r=c=>this.i!==a?(a=this.i,n(c)):Promise.resolve();let s=new h0;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new h0,t.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const c=s;t.enqueueRetryable((async()=>{await c.promise,await r(this.currentUser)}))},i=c=>{Vl("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((c=>i(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?i(c):(Vl("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new h0)}}),0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((a=>this.i!==t?(Vl("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(v0(typeof a.accessToken=="string",31837,{l:a}),new Nat(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return v0(t===null||typeof t=="string",2055,{h:t}),new xi(t)}}class Mat{constructor(t,n,a){this.P=t,this.T=n,this.I=a,this.type="FirstParty",this.user=xi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Oat{constructor(t,n,a){this.P=t,this.T=n,this.I=a}getToken(){return Promise.resolve(new Mat(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(xi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class OV{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Hat{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tl(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){v0(this.o===void 0,3512);const a=s=>{s.error!=null&&Vl("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,Vl("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable((()=>a(s)))};const r=s=>{Vl("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>r(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):Vl("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new OV(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(v0(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new OV(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function $at(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let a=0;a<e;a++)n[a]=Math.floor(256*Math.random());return n}function Qat(){return new TextEncoder}class Gat{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const r=$at(40);for(let s=0;s<r.length;++s)a.length<20&&r[s]<n&&(a+=t.charAt(r[s]%62))}return a}}function Ql(e,t){return e<t?-1:e>t?1:0}function zat(e,t){let n=0;for(;n<e.length&&n<t.length;){const a=e.codePointAt(n),r=t.codePointAt(n);if(a!==r){if(a<128&&r<128)return Ql(a,r);{const s=Qat(),o=Kat(s.encode(HV(e,n)),s.encode(HV(t,n)));return o!==0?o:Ql(a,r)}}n+=a>65535?2:1}return Ql(e.length,t.length)}function HV(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function Kat(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Ql(e[n],t[n]);return Ql(e.length,t.length)}const $V="__name__";class bu{constructor(t,n,a){n===void 0?n=0:n>t.length&&$2(637,{offset:n,range:t.length}),a===void 0?a=t.length-n:a>t.length-n&&$2(1746,{length:a,range:t.length-n}),this.segments=t,this.offset=n,this.len=a}get length(){return this.len}isEqual(t){return bu.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof bu?t.forEach((a=>{n.push(a)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,a=this.limit();n<a;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const a=Math.min(t.length,n.length);for(let r=0;r<a;r++){const s=bu.compareSegments(t.get(r),n.get(r));if(s!==0)return s}return Ql(t.length,n.length)}static compareSegments(t,n){const a=bu.isNumericId(t),r=bu.isNumericId(n);return a&&!r?-1:!a&&r?1:a&&r?bu.extractNumericId(t).compare(bu.extractNumericId(n)):zat(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return uI.fromString(t.substring(4,t.length-2))}}class Bl extends bu{construct(t,n,a){return new Bl(t,n,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const a of t){if(a.indexOf("//")>=0)throw new Oa(Ma.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);n.push(...a.split("/").filter((r=>r.length>0)))}return new Bl(n)}static emptyPath(){return new Bl([])}}const Wat=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class QA extends bu{construct(t,n,a){return new QA(t,n,a)}static isValidIdentifier(t){return Wat.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),QA.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===$V}static keyField(){return new QA([$V])}static fromServerFormat(t){const n=[];let a="",r=0;const s=()=>{if(a.length===0)throw new Oa(Ma.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(a),a=""};let o=!1;for(;r<t.length;){const i=t[r];if(i==="\\"){if(r+1===t.length)throw new Oa(Ma.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Oa(Ma.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);a+=c,r+=2}else i==="`"?(o=!o,r++):i!=="."||o?(a+=i,r++):(s(),r++)}if(s(),o)throw new Oa(Ma.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new QA(n)}static emptyPath(){return new QA([])}}class ZA{constructor(t){this.path=t}static fromPath(t){return new ZA(Bl.fromString(t))}static fromName(t){return new ZA(Bl.fromString(t).popFirst(5))}static empty(){return new ZA(Bl.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Bl.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Bl.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ZA(new Bl(t.slice()))}}function jat(e,t,n,a){if(t===!0&&a===!0)throw new Oa(Ma.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function qat(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function us(e,t){const n={typeString:e};return t&&(n.value=t),n}function Jg(e,t){if(!qat(e))throw new Oa(Ma.INVALID_ARGUMENT,"JSON must be an object");let n;for(const a in t)if(t[a]){const r=t[a].typeString,s="value"in t[a]?{value:t[a].value}:void 0;if(!(a in e)){n=`JSON missing required field: '${a}'`;break}const o=e[a];if(r&&typeof o!==r){n=`JSON field '${a}' must be a ${r}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${a}' field to equal '${s.value}'`;break}}if(n)throw new Oa(Ma.INVALID_ARGUMENT,n);return!0}const QV=-62135596800,GV=1e6;class Cu{static now(){return Cu.fromMillis(Date.now())}static fromDate(t){return Cu.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),a=Math.floor((t-1e3*n)*GV);return new Cu(n,a)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Oa(Ma.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Oa(Ma.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<QV)throw new Oa(Ma.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Oa(Ma.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/GV}_compareTo(t){return this.seconds===t.seconds?Ql(this.nanoseconds,t.nanoseconds):Ql(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Cu._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Jg(t,Cu._jsonSchema))return new Cu(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-QV;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Cu._jsonSchemaVersion="firestore/timestamp/1.0",Cu._jsonSchema={type:us("string",Cu._jsonSchemaVersion),seconds:us("number"),nanoseconds:us("number")};function Yat(e){return e.name==="IndexedDbTransactionError"}class Xat extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Lf{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Xat("Invalid base64 string: "+s):s}})(t);return new Lf(n)}static fromUint8Array(t){const n=(function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s})(t);return new Lf(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const a=new Uint8Array(n.length);for(let r=0;r<n.length;r++)a[r]=n.charCodeAt(r);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ql(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Lf.EMPTY_BYTE_STRING=new Lf("");const zV="(default)";class Q2{constructor(t,n){this.projectId=t,this.database=n||zV}static empty(){return new Q2("","")}get isDefaultDatabase(){return this.database===zV}isEqual(t){return t instanceof Q2&&t.projectId===this.projectId&&t.database===this.database}}class Jat{constructor(t,n=null,a=[],r=[],s=null,o="F",i=null,c=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=a,this.filters=r,this.limit=s,this.limitType=o,this.startAt=i,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function Zat(e){return new Jat(e)}var KV,wa;(wa=KV||(KV={}))[wa.OK=0]="OK",wa[wa.CANCELLED=1]="CANCELLED",wa[wa.UNKNOWN=2]="UNKNOWN",wa[wa.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wa[wa.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wa[wa.NOT_FOUND=5]="NOT_FOUND",wa[wa.ALREADY_EXISTS=6]="ALREADY_EXISTS",wa[wa.PERMISSION_DENIED=7]="PERMISSION_DENIED",wa[wa.UNAUTHENTICATED=16]="UNAUTHENTICATED",wa[wa.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wa[wa.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wa[wa.ABORTED=10]="ABORTED",wa[wa.OUT_OF_RANGE=11]="OUT_OF_RANGE",wa[wa.UNIMPLEMENTED=12]="UNIMPLEMENTED",wa[wa.INTERNAL=13]="INTERNAL",wa[wa.UNAVAILABLE=14]="UNAVAILABLE",wa[wa.DATA_LOSS=15]="DATA_LOSS";new uI([4294967295,4294967295],0);const ert=41943040;const trt=1048576;function aS(){return typeof document<"u"?document:null}class nrt{constructor(t,n,a=1e3,r=1.5,s=6e4){this.Fi=t,this.timerId=n,this.d_=a,this.E_=r,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(t){this.cancel();const n=Math.floor(this.R_+this.p_()),a=Math.max(0,Date.now()-this.m_),r=Math.max(0,n-a);r>0&&Vl("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${a} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,(()=>(this.m_=Date.now(),t()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}class cI{constructor(t,n,a,r,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=a,this.op=r,this.removalCallback=s,this.deferred=new h0,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,a,r,s){const o=Date.now()+a,i=new cI(t,n,o,r,s);return i.start(a),i}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Oa(Ma.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var WV,jV;(jV=WV||(WV={})).Fa="default",jV.Cache="cache";function art(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}const qV=new Map;const rrt="firestore.googleapis.com",YV=!0;class XV{constructor(t){var n,a;if(t.host===void 0){if(t.ssl!==void 0)throw new Oa(Ma.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=rrt,this.ssl=YV}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:YV;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=ert;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<trt)throw new Oa(Ma.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}jat("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=art((a=t.experimentalLongPollingOptions)!==null&&a!==void 0?a:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Oa(Ma.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Oa(Ma.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Oa(Ma.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(a,r){return a.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class srt{constructor(t,n,a,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=a,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new XV({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Oa(Ma.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Oa(Ma.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new XV(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new Vat;switch(a.type){case"firstParty":return new Oat(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Oa(Ma.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const a=qV.get(n);a&&(Vl("ComponentProvider","Removing Datastore"),qV.delete(n),a.terminate())})(this),Promise.resolve()}}class dI{constructor(t,n,a){this.converter=n,this._query=a,this.type="query",this.firestore=t}withConverter(t){return new dI(this.firestore,t,this._query)}}class ku{constructor(t,n,a){this.converter=n,this._key=a,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new AI(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ku(this.firestore,t,this._key)}toJSON(){return{type:ku._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,a){if(Jg(n,ku._jsonSchema))return new ku(t,a||null,new ZA(Bl.fromString(n.referencePath)))}}ku._jsonSchemaVersion="firestore/documentReference/1.0",ku._jsonSchema={type:us("string",ku._jsonSchemaVersion),referencePath:us("string")};class AI extends dI{constructor(t,n,a){super(t,n,Zat(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ku(this.firestore,null,new ZA(t))}withConverter(t){return new AI(this.firestore,t,this._path)}}const JV="AsyncQueue";class ZV{constructor(t=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new nrt(this,"async_queue_retry"),this.oc=()=>{const a=aS();a&&Vl(JV,"Visibility state changed to "+a.visibilityState),this.F_.y_()},this._c=t;const n=aS();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ac(),this.uc(t)}enterRestrictedMode(t){if(!this.Xu){this.Xu=!0,this.rc=t||!1;const n=aS();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(t){if(this.ac(),this.Xu)return new Promise((()=>{}));const n=new h0;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Zu.push(t),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(t){if(!Yat(t))throw t;Vl(JV,"Operation failed with retryable error: "+t)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(t){const n=this._c.then((()=>(this.nc=!0,t().catch((a=>{throw this.tc=a,this.nc=!1,Jz("INTERNAL UNHANDLED ERROR: ",eL(a)),a})).then((a=>(this.nc=!1,a))))));return this._c=n,n}enqueueAfterDelay(t,n,a){this.ac(),this.sc.indexOf(t)>-1&&(n=0);const r=cI.createAndSchedule(this,t,n,a,(s=>this.lc(s)));return this.ec.push(r),r}ac(){this.tc&&$2(47125,{hc:eL(this.tc)})}verifyOperationInProgress(){}async Pc(){let t;do t=this._c,await t;while(t!==this._c)}Tc(t){for(const n of this.ec)if(n.timerId===t)return!0;return!1}Ic(t){return this.Pc().then((()=>{this.ec.sort(((n,a)=>n.targetTimeMs-a.targetTimeMs));for(const n of this.ec)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Pc()}))}dc(t){this.sc.push(t)}lc(t){const n=this.ec.indexOf(t);this.ec.splice(n,1)}}function eL(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class ort extends srt{constructor(t,n,a,r){super(t,n,a,r),this.type="firestore",this._queue=new ZV,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new ZV(t),this._firestoreClient=void 0,await t}}}class _c{constructor(t){this._byteString=t}static fromBase64String(t){try{return new _c(Lf.fromBase64String(t))}catch(n){throw new Oa(Ma.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new _c(Lf.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:_c._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Jg(t,_c._jsonSchema))return _c.fromBase64String(t.bytes)}}_c._jsonSchemaVersion="firestore/bytes/1.0",_c._jsonSchema={type:us("string",_c._jsonSchemaVersion),bytes:us("string")};class tK{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Oa(Ma.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new QA(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class ff{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Oa(Ma.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Oa(Ma.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Ql(this._lat,t._lat)||Ql(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ff._jsonSchemaVersion}}static fromJSON(t){if(Jg(t,ff._jsonSchema))return new ff(t.latitude,t.longitude)}}ff._jsonSchemaVersion="firestore/geoPoint/1.0",ff._jsonSchema={type:us("string",ff._jsonSchemaVersion),latitude:us("number"),longitude:us("number")};class mf{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(a,r){if(a.length!==r.length)return!1;for(let s=0;s<a.length;++s)if(a[s]!==r[s])return!1;return!0})(this._values,t._values)}toJSON(){return{type:mf._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Jg(t,mf._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new mf(t.vectorValues);throw new Oa(Ma.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}mf._jsonSchemaVersion="firestore/vectorValue/1.0",mf._jsonSchema={type:us("string",mf._jsonSchemaVersion),vectorValues:us("object")};const irt=new RegExp("[~\\*/\\[\\]]");function lrt(e,t,n){if(t.search(irt)>=0)throw tL(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e);try{return new tK(...t.split("."))._internalPath}catch{throw tL(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e)}}function tL(e,t,n,a,r){let s=`Function ${t}() called with invalid data`;s+=". ";let o="";return new Oa(Ma.INVALID_ARGUMENT,s+e+o)}class nK{constructor(t,n,a,r,s){this._firestore=t,this._userDataWriter=n,this._key=a,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ku(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new urt(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(aK("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class urt extends nK{data(){return super.data()}}function aK(e,t){return typeof t=="string"?lrt(e,t):t instanceof tK?t._internalPath:t._delegate._internalPath}class Oy{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Bv extends nK{constructor(t,n,a,r,s,o){super(t,n,a,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new c_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const a=this._document.data.field(aK("DocumentSnapshot.get",t));if(a!==null)return this._userDataWriter.convertValue(a,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Oa(Ma.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Bv._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Bv._jsonSchemaVersion="firestore/documentSnapshot/1.0",Bv._jsonSchema={type:us("string",Bv._jsonSchemaVersion),bundleSource:us("string","DocumentSnapshot"),bundleName:us("string"),bundle:us("string")};class c_ extends Bv{data(t={}){return super.data(t)}}class p0{constructor(t,n,a,r){this._firestore=t,this._userDataWriter=n,this._snapshot=r,this.metadata=new Oy(r.hasPendingWrites,r.fromCache),this.query=a}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((a=>{t.call(n,new c_(this._firestore,this._userDataWriter,a.key,a,new Oy(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Oa(Ma.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map((i=>{const c=new c_(r._firestore,r._userDataWriter,i.doc.key,i.doc,new Oy(r._snapshot.mutatedKeys.has(i.doc.key),r._snapshot.fromCache),r.query.converter);return i.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((i=>s||i.type!==3)).map((i=>{const c=new c_(r._firestore,r._userDataWriter,i.doc.key,i.doc,new Oy(r._snapshot.mutatedKeys.has(i.doc.key),r._snapshot.fromCache),r.query.converter);let A=-1,d=-1;return i.type!==0&&(A=o.indexOf(i.doc.key),o=o.delete(i.doc.key)),i.type!==1&&(o=o.add(i.doc),d=o.indexOf(i.doc.key)),{type:crt(i.type),doc:c,oldIndex:A,newIndex:d}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Oa(Ma.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=p0._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Gat.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],a=[],r=[];return this.docs.forEach((s=>{s._document!==null&&(n.push(s._document),a.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function crt(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $2(61501,{type:e})}}p0._jsonSchemaVersion="firestore/querySnapshot/1.0",p0._jsonSchema={type:us("string",p0._jsonSchemaVersion),bundleSource:us("string","QuerySnapshot"),bundleName:us("string"),bundle:us("string")};(function(t,n=!0){(function(r){yb=r})(lA),Nu(new jl("firestore",((a,{instanceIdentifier:r,options:s})=>{const o=a.getProvider("app").getImmediate(),i=new ort(new Lat(a.getProvider("auth-internal")),new Hat(o,a.getProvider("app-check-internal")),(function(A,d){if(!Object.prototype.hasOwnProperty.apply(A.options,["projectId"]))throw new Oa(Ma.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Q2(A.options.projectId,d)})(o,r),o);return s=Object.assign({useFetchStreams:n},s),i._setSettings(s),i}),"PUBLIC").setMultipleInstances(!0)),Fi(LV,MV,t),Fi(LV,MV,"esm2017")})();const rK="firebasestorage.googleapis.com",drt="storageBucket",Art=120*1e3,frt=600*1e3;class Xu extends Gu{constructor(t,n,a=0){super(rS(t),`Firebase Storage: ${n} (${rS(t)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Xu.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return rS(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Hu;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Hu||(Hu={}));function rS(e){return"storage/"+e}function mrt(){const e="An unknown error occurred, please check the error payload for server response.";return new Xu(Hu.UNKNOWN,e)}function vrt(){return new Xu(Hu.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function hrt(){return new Xu(Hu.CANCELED,"User canceled the upload/download.")}function prt(e){return new Xu(Hu.INVALID_URL,"Invalid URL '"+e+"'.")}function grt(e){return new Xu(Hu.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function nL(e){return new Xu(Hu.INVALID_ARGUMENT,e)}function sK(){return new Xu(Hu.APP_DELETED,"The Firebase app was deleted.")}function yrt(e){return new Xu(Hu.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class Ll{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let a;try{a=Ll.makeFromUrl(t,n)}catch{return new Ll(t,"")}if(a.path==="")return a;throw grt(t)}static makeFromUrl(t,n){let a=null;const r="([A-Za-z0-9.\\-_]+)";function s(T){T.path.charAt(T.path.length-1)==="/"&&(T.path_=T.path_.slice(0,-1))}const o="(/(.*))?$",i=new RegExp("^gs://"+r+o,"i"),c={bucket:1,path:3};function A(T){T.path_=decodeURIComponent(T.path)}const d="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${d}/b/${r}/o${m}`,"i"),p={bucket:1,path:3},y=n===rK?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",w=new RegExp(`^https?://${y}/${r}/${g}`,"i"),x=[{regex:i,indices:c,postModify:s},{regex:h,indices:p,postModify:A},{regex:w,indices:{bucket:1,path:2},postModify:A}];for(let T=0;T<x.length;T++){const F=x[T],k=F.regex.exec(t);if(k){const S=k[F.indices.bucket];let E=k[F.indices.path];E||(E=""),a=new Ll(S,E),F.postModify(a);break}}if(a==null)throw prt(t);return a}}class _rt{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function wrt(e,t,n){let a=1,r=null,s=null,o=!1,i=0;function c(){return i===2}let A=!1;function d(...g){A||(A=!0,t.apply(null,g))}function f(g){r=setTimeout(()=>{r=null,e(h,c())},g)}function m(){s&&clearTimeout(s)}function h(g,...w){if(A){m();return}if(g){m(),d.call(null,g,...w);return}if(c()||o){m(),d.call(null,g,...w);return}a<64&&(a*=2);let x;i===1?(i=2,x=0):x=(a+Math.random())*1e3,f(x)}let p=!1;function y(g){p||(p=!0,m(),!A&&(r!==null?(g||(i=2),clearTimeout(r),f(0)):g||(i=1)))}return f(0),s=setTimeout(()=>{o=!0,y(!0)},n),y}function brt(e){e(!1)}function xrt(e){return e!==void 0}function aL(e,t,n,a){if(a<t)throw nL(`Invalid value for '${e}'. Expected ${t} or greater.`);if(a>n)throw nL(`Invalid value for '${e}'. Expected ${n} or less.`)}function Crt(e){const t=encodeURIComponent;let n="?";for(const a in e)if(e.hasOwnProperty(a)){const r=t(a)+"="+t(e[a]);n=n+r+"&"}return n=n.slice(0,-1),n}var G2;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(G2||(G2={}));function Srt(e,t){const n=e>=500&&e<600,r=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||r||s}class Ert{constructor(t,n,a,r,s,o,i,c,A,d,f,m=!0,h=!1){this.url_=t,this.method_=n,this.headers_=a,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=i,this.errorCallback_=c,this.timeout_=A,this.progressCallback_=d,this.connectionFactory_=f,this.retry=m,this.isUsingEmulator=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,y)=>{this.resolve_=p,this.reject_=y,this.start_()})}start_(){const t=(a,r)=>{if(r){a(!1,new Hy(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=i=>{const c=i.loaded,A=i.lengthComputable?i.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,A)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const i=s.getErrorCode()===G2.NO_ERROR,c=s.getStatus();if(!i||Srt(c,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===G2.ABORT;a(!1,new Hy(!1,null,d));return}const A=this.successCodes_.indexOf(c)!==-1;a(!0,new Hy(A,s))})},n=(a,r)=>{const s=this.resolve_,o=this.reject_,i=r.connection;if(r.wasSuccessCode)try{const c=this.callback_(i,i.getResponse());xrt(c)?s(c):s()}catch(c){o(c)}else if(i!==null){const c=mrt();c.serverResponse=i.getErrorText(),this.errorCallback_?o(this.errorCallback_(i,c)):o(c)}else if(r.canceled){const c=this.appDelete_?sK():hrt();o(c)}else{const c=vrt();o(c)}};this.canceled_?n(!1,new Hy(!1,null,!0)):this.backoffId_=wrt(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&brt(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Hy{constructor(t,n,a){this.wasSuccessCode=t,this.connection=n,this.canceled=!!a}}function Brt(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function krt(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function Trt(e,t){t&&(e["X-Firebase-GMPID"]=t)}function Irt(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function Frt(e,t,n,a,r,s,o=!0,i=!1){const c=Crt(e.urlParams),A=e.url+c,d=Object.assign({},e.headers);return Trt(d,t),Brt(d,n),krt(d,s),Irt(d,a),new Ert(A,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r,o,i)}function Prt(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function Drt(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}class z2{constructor(t,n){this._service=t,n instanceof Ll?this._location=n:this._location=Ll.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new z2(t,n)}get root(){const t=new Ll(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Drt(this._location.path)}get storage(){return this._service}get parent(){const t=Prt(this._location.path);if(t===null)return null;const n=new Ll(this._location.bucket,t);return new z2(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw yrt(t)}}function rL(e,t){const n=t?.[drt];return n==null?null:Ll.makeFromBucketSpec(n,e)}class Urt{constructor(t,n,a,r,s,o=!1){this.app=t,this._authProvider=n,this._appCheckProvider=a,this._url=r,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=rK,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Art,this._maxUploadRetryTime=frt,this._requests=new Set,r!=null?this._bucket=Ll.makeFromBucketSpec(r,this._host):this._bucket=rL(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Ll.makeFromBucketSpec(this._url,t):this._bucket=rL(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){aL("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){aL("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(tl(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new z2(this,t)}_makeRequest(t,n,a,r,s=!0){if(this._deleted)return new _rt(sK());{const o=Frt(t,this._appId,a,r,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[a,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,a,r).getPromise()}}const sL="@firebase/storage",oL="0.13.14";const Rrt="storage";function Nrt(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),a=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return new Urt(n,a,r,t,lA)}function Vrt(){Nu(new jl(Rrt,Nrt,"PUBLIC").setMultipleInstances(!0)),Fi(sL,oL,""),Fi(sL,oL,"esm2017")}Vrt();function Lrt(e){return Ort({initialUser:e,dependencies:{popupRedirectResolver:dM,persistence:[lM,zk,Kk]}})}const Mrt=Symbol("VueFireAuth");function Ort({dependencies:e,initialUser:t}){return(n,a)=>{const[r,s]=Hrt(n,a,t,e);Yet(r,s)}}function Hrt(e,t,n,a,r=j5(e,a)){const s=Wet(e,t).run(()=>V(n));return jet.set(e,s),t.provide(Mrt,r),[s,r]}function $rt(e,{firebaseApp:t,modules:n=[]}){e.provide(OG,t);for(const a of n)a(t,e)}const Qrt=()=>{console.log(" Clearing desktop session on app startup - passcode will be required"),localStorage.removeItem("desktopSessionToken"),localStorage.removeItem("desktopPermissions"),localStorage.removeItem("desktopIsAdmin"),localStorage.removeItem("desktopUserName"),localStorage.removeItem("desktopUserId"),localStorage.removeItem("desktopFeatures")};Qrt();window.addEventListener("unhandledrejection",e=>{e.reason&&typeof e.reason.code=="string"&&e.reason.code.startsWith("auth/")&&(console.warn("Unhandled Firebase Auth error (suppressed):",e.reason.code,e.reason.message),e.preventDefault())});console.log("Vue app starting in environment:",Ua()?"Electron":"Web");if(Ua())try{const{ipcRenderer:e}=window.electron||window.require("electron");e.on("server-ready",(t,n)=>{console.log("Server ready event received");const{localIP:a}=n||{};if(a&&Ua()){const r=Tr(a).api.https;$v(r),console.log("Local IP:",a)}}),e.on("server-error",(t,n)=>{console.error("Server error received:",n)})}catch(e){console.error("Failed to set up IPC listeners:",e)}const Grt={dark:!1,colors:{primary:"#133665",surfaceTint:"#415F91",onPrimary:"#FFFFFF",primaryContainer:"#506DA0",onPrimaryContainer:"#FFFFFF",secondary:"#2E3647",onSecondary:"#FFFFFF",secondaryContainer:"#646D80",onSecondaryContainer:"#FFFFFF",tertiary:"#452E4A",onTertiary:"#FFFFFF",tertiaryContainer:"#7F6484",onTertiaryContainer:"#FFFFFF",error:"#740006",onError:"#FFFFFF",errorContainer:"#CF2C27",onErrorContainer:"#FFFFFF",background:"#F9F9FF",onBackground:"#191C20",surface:"#F9F9FF",onSurface:"#0F1116",surfaceVariant:"#E0E2EC",onSurfaceVariant:"#33363E",outline:"#4F525A",outlineVariant:"#6A6D75",shadow:"#000000",scrim:"#000000",inverseSurface:"#2E3036",inverseOnSurface:"#F0F0F7",inversePrimary:"#AAC7FF",primaryFixed:"#506DA0",onPrimaryFixed:"#FFFFFF",primaryFixedDim:"#375586",onPrimaryFixedVariant:"#FFFFFF",secondaryFixed:"#646D80",onSecondaryFixed:"#FFFFFF",secondaryFixedDim:"#4C5567",onSecondaryFixedVariant:"#FFFFFF",tertiaryFixed:"#7F6484",onTertiaryFixed:"#FFFFFF",tertiaryFixedDim:"#654C6B",onTertiaryFixedVariant:"#FFFFFF",surfaceDim:"#C5C6CD",surfaceBright:"#F9F9FF",surfaceContainerLowest:"#FFFFFF",surfaceContainerLow:"#F3F3FA",surfaceContainer:"#E7E8EE",surfaceContainerHigh:"#DCDCE3",surfaceContainerHighest:"#D1D1D8"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#F5F5F5","theme-on-code":"#000000"}},zrt=_6({components:iet,directives:_et,theme:{defaultTheme:"myCustomLightTheme",themes:{myCustomLightTheme:Grt}},defaults:{VBtn:{color:"primary",rounded:"sm",size:"small"},VSnackbar:{timeout:3e3},VSheet:{rounded:"sm",colour:"surface"},VTextField:{density:"compact"},VTooltip:{location:"top",openDelay:1e3}}}),Zg=Jee(Jfe);Zg.use($s);Zg.use(zrt);Zg.use(Ti);Ua()&&Zg.use($rt,{firebaseApp:e_,modules:[Lrt()]});let iv=!1;const Km=()=>{if(!iv){console.log("Mounting app");try{Zg.mount("#app"),iv=!0,console.log("App mounted successfully")}catch(e){console.error("Error mounting app:",e)}}},Krt=async()=>{try{console.log("Starting app initialization..."),console.log("Environment:",Ua()?"Electron":"Web"),console.log("Initializing API client...");try{await gM(),console.log("API client initialized with URL parameters")}catch(e){console.warn("API client initialization failed:",e)}console.log("Initializing network API...");try{const e=await WH();console.log("Network API initialized:",e)}catch(e){console.warn("Network API initialization failed:",e)}if(Ua()){console.log("Testing Firebase Auth..."),console.log("Auth object:",Ks),console.log("Auth app:",Ks?.app),console.log("Auth currentUser:",Ks?.currentUser),console.log("Setting up auth state listener...");try{const e=Ks.onAuthStateChanged(n=>{console.log(" Auth state changed!"),console.log("Initial auth state:",n?"User logged in":"No user"),console.log("User object:",n),Ti.commit("auth/SET_USER",n),Km(),setTimeout(()=>{iv&&$s.currentRoute.value.path==="/"&&(n?!!localStorage.getItem("desktopSessionToken")?(console.log("Authenticated user with valid desktop session, navigating to home"),$s.push("/home")):(console.log("Google auth detected, but passcode required - navigating to passcode page"),$s.push("/desktop/passcode")):(console.log("No authenticated user, navigating to login"),$s.push("/login")))},100)},n=>{console.error("Auth state change error:",n),n.code==="auth/network-request-failed"&&console.warn("Network request failed - this is common in Electron. Continuing with offline mode."),Km(),setTimeout(()=>{iv&&$s.currentRoute.value.path==="/"&&$s.push("/login")},100)});console.log("Auth state listener set up successfully, unsubscribe function:",typeof e);const t=setTimeout(()=>{iv||(console.log("Auth state listener timeout - mounting app with current user"),Ti.commit("auth/SET_USER",Ks.currentUser),Km(),xn(()=>{try{$s.currentRoute.value.path==="/"&&(Ks.currentUser?!!localStorage.getItem("desktopSessionToken")?(console.log("Timeout: Authenticated user with desktop session, navigating to home"),$s.push("/home")):(console.log("Timeout: Google auth detected, passcode required - navigating to passcode page"),$s.push("/desktop/passcode")):(console.log("Timeout: No authenticated user, navigating to login"),$s.push("/login")))}catch(n){console.error("Navigation error during timeout:",n)}}))},3e3);window.backupTimeout=t}catch(e){console.error("Failed to set up auth state listener:",e),Ti.commit("auth/SET_USER",null),Km()}}else console.log("Web mode: Checking web session..."),wM(),console.log("Web mode: Session interceptors set up"),Km(),setTimeout(async()=>{if(iv){const e=$s.currentRoute.value.path,t=Kf();if(console.log("Web mode initialization - current route:",e),console.log("Session token exists:",!!t.sessionToken.value),t.sessionToken.value)try{if(console.log("Verifying existing session token..."),(await t.verifySession()).valid)console.log("Web session valid"),e==="/"&&$s.push("/home");else if(console.log("Web session invalid, clearing session"),t.clearSession(),e!=="/web/login"){const r=new URLSearchParams(window.location.search).get("endpoint"),s=r?`/web/login?endpoint=${encodeURIComponent(r)}`:"/web/login";$s.push(s)}}catch(n){if(console.warn("Session verification failed:",n),t.clearSession(),e!=="/web/login"&&e!=="/"){const r=new URLSearchParams(window.location.search).get("endpoint"),s=r?`/web/login?endpoint=${encodeURIComponent(r)}`:"/web/login";$s.push(s)}}else if(e==="/"){console.log("No web session, navigating to web login");const a=new URLSearchParams(window.location.search).get("endpoint"),r=a?`/web/login?endpoint=${encodeURIComponent(a)}`:"/web/login";$s.push(r)}}},100)}catch(e){console.error("Error initializing app:",e),Ti.commit("auth/SET_USER",null),Km()}};console.log("Starting Vue app initialization...");Krt();export{dt as a,J1 as c,wo as f,CM as g,fh as p};
